# StackOverflow 问答 15380000-15380999

# magento - 如何在 magento 管理端添加自定义字段以添加类别？

> ID：15380001
> 
> 赞同：0
> 
> 时间：2013-03-13T08:14:15.833
> 
> 标签：magento, zend-framework, magento-1.7

我是**magento**新手，我正在使用**magento** 1.7.0.2 。在这个管理端类别添加文件中，我想额外添加一个复选框，但我不知道添加类别文件名和文件夹结构路径。那么任何人都可以指导我以及文件的位置，如何在其上添加复选框。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:43:06.550

如果要以属性的形式添加另一个复选框。您必须使用安装脚本构建一个小模块。看这个[教程](http://www.atwix.com/magento/add-category-attribute/)

# php - javascript 未在动态 iframe 中加载

> ID：15380015
> 
> 赞同：1
> 
> 时间：2013-03-13T08:15:23.373
> 
> 标签：php, javascript, jquery, iframe

我花了几个小时阅读 javascript 书籍、模式和查看 stackoverflow 问题，但我一直坚持将某些内容动态加载到 iframe 中

**目标**单击一个按钮，(1) ajax 发布到`temp.php`数据（例如 src、高度、宽度、id）。(2)`temp.php`设置 iframe 并返回相应的 html。(3) Javascript 预置数据。

这是我到目前为止的相应代码

(1)

```
$.ajax({
           type:"POST",
           data:{
                 'src':"target.php",
                 'frame_height':$(".mydiv").height(),
                 'frame_width':$(".mydiv").width()
           },
           url:"temp.php",
           success:function (inHtml) {
                 loadConversation(inHtml, 
```

我已经将 POST 变量加载到相应的 php 变量中。(2)

```
<iframe id="myTestFrame" src="<?php echo $src; ?>" width="<?php echo $width; ?>"
    height="<?php echo $height; ?>" frameborder="0">
<p>Your browser does not support iframes.</p> 
```

(3) `$('.mydiv').prepend(inHtml);`

请假设语法正确。

`target.php`确实运行了一个初始化滚动插件的简单javascript代码：

```
$(function () {

    var Scroll = (function () {

        var  init = function () {

             $("#content-1").mCustomScrollbar({});

             $(".inner_content").mCustomScrollbar({autoDraggerLength:true});                      

             $(".output a[rel~='_mCS_1_scrollTo']").click(function (e) {
                 e.preventDefault();
                 $("#content-1").mCustomScrollbar("scrollTo", $(this).attr("href"));
             });
             };

        return { init:init };

    })();

    Scroll.init();
}); 
```

现在发生的事情是我可以直接从网络服务器调用 temp.php 并且它会正确加载。

[预期的](http://imageshack.us/a/img203/4990/help1x.jpg)

但是一旦从主站点调用它 - 它就会中断（并且“未定义”启动）

[在主站点坏了](http://imageshack.us/a/img585/9578/help2r.jpg)

我已经完成了相同的 iframe 帖子，然后使用另一个带有插件的 php 页面动态更新 src 并且它工作正常（单击时相同，ajax 帖子， prepend(html) ，我完全迷路了）。主站点在 jquery UI 的选项卡式界面中运行它，但我认为这没有任何区别 - 到目前为止我发现如果我在 init 中插入一个简单的“alert(document.height)”函数，警告框将包含 0，所以我认为 javascript 在 iframe 完成加载之前运行 - 但 Firebug 显示 NET 中的响应 HTML 非常好，代码相当短。（脚本放在右大括号之前的最后一个）

# elasticsearch - 使用 Haystack + Elasticsearch 进行提升

> ID：15380017
> 
> 赞同：7
> 
> 时间：2013-03-13T08:15:25.817
> 
> 标签：elasticsearch, django-haystack

我在“标签”字段上实现了提升；但是它没有以适当的方式对我的结果进行排名。

我的 search_indexes.py：

```
class ParagraphIndex(indexes.SearchIndex, indexes.Indexable):
    text= indexes.CharField(document=True, use_template=True, boost=1.0)
    tags= indexes.MultiValueField(boost=2.5)
    def prepare_tags(self,object):
        return [tag.tag for tag in object.tags.all()] 
```

我的常规搜索适用于正确的字段。我已经多次运行 update_index 并且仍然得到相同的答案。任何帮助都感激不尽。如果需要更多信息，请告诉我！

# ios - 从老式结构转移到类

> ID：15380024
> 
> 赞同：0
> 
> 时间：2013-03-13T08:15:57.877
> 
> 标签：ios, objective-c

我知道这可能是一个菜鸟问题，但我有点卡在这里。我通常会在不同的 ViewController 中访问应用程序数据：首先我声明一个 global.h 模块，如下所示

全局.h

```
typedef struct {

    NSString *appName
    NSString *appVersion;

    bool mode;

} structApp;

extern structApp app; 
```

之后，我在 MainViewController.h 中声明了结构，以便我可以访问数据

```
@implementation ViewController

structApp app;

- (void)viewDidLoad
{
    app.appVersion = @"v1.02";
}

@end 
```

然后我在每个 ViewController.h 中包含“global.h”

这样我就可以全局访问。据我所知，这是一个很好的实现，我已经在 20 多个应用程序中使用了它。当这个结构变大时，问题就开始了。在这些情况下，我会看到损坏的内存、之前加载数据的 nil 变量等。

有没有更好的方法让所有 ViewController 中的数据都可用？如果可以的话，请给我一些例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:24:32.563

正如您`extern`在结构中使用的那样，任何对象都会更新相同的值。

在 OOPS 中，全局变量永远不会说好，因此您需要使用单例模式。

创建一个在你的结构中包含所有这些东西的单例/共享类并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:27:02.303

你有两个选择

1.  使用单例类 - 参考[Objective C Singleton](http://db-in.com/blog/2011/12/objective-c-singleton/)
2.  在 App 委托中声明属性 - 请参阅[SO](https://stackoverflow.com/questions/662582/sharing-data-between-views-through-app-delegate)

您可以使用以下方式从任何类访问应用程序委托：

```
AppDelegate *appDel = [[UIApplication sharedApplication] delegate]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:27:27.363

只有在处理原始数据时才应该处理 struct（如果您采用 OOP 方式）。

```
 app.appVersion = @"v1.02"; 
```

使您的结构指向悬空指针，因为您指向函数范围内的数据（app.appVersion 仅保存指针，而不保存数据）。因此，您必须保留所有这些对象值以使其内容安全，但我必须承认它仍然是一种 Q&D 方法。

如果您需要对数据进行全局访问，则可以使用单例，前提是您确实需要对数据进行强封装和控制。

如何制作单例 [我的 Objective-C 单例应该是什么样子？](https://stackoverflow.com/questions/145154/what-should-my-objective-c-singleton-look-like)

您也可以使用宏，这样您就可以使用常量字符串而不必担心数据持久性，因为它们将始终在您处理的范围内可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:36:27.060

一般来说，使用 struct 应该可以正常工作。使用它们没有任何问题。如果您观察到由重叠内存或非法重用它引起的奇怪值，那么您的问题出在其他地方，但原则上不在于使用结构。该`extern`声明可能会导致这样的问题。

从内存使用的角度来看，一个类也不过是一个结构。如果我是你，我会设计一个具有属性的类，在使用结构时你有成员。并以几乎相同的方式使用它们。

对于“全局变量”，我应用了单例模式。这基本上是一个具有类方法（前导 + 而不是 -）的类，它使该类的唯一实例可用。在该方法中，我检查类（对同一类的类内部静态引用）是否已经可用（！= nil）并实例化它。有时我为此使用初始化方法。初始化是一个objective-c典型的东西。在第一次使用该类时或之前，每个类（甚至是子类）只调用一次。将类变量实例化为单例但不能移植到其他编程语言的非常好的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T09:35:49.110

如果您只想读取数据并且不需要任何复杂的数据结构，您还可以使用设置文件，例如

设置.h

```
#define appName @"blabla"
#define appVersion @"1.01"
#define mode 1 
```

# python - 如何在 Pyramid 1.4 中创建自己的命令

> ID：15380026
> 
> 赞同：2
> 
> 时间：2013-03-13T08:16:05.207
> 
> 标签：python, pyramid, paster

好的，在 1.4 版本之前，我们有贴纸，我们可以在其中添加我们自己的命令，例如删除缓存或加载数据库初始数据。现在，据我所知，金字塔处理控制台脚本，但有关此新功能的文档很差。我想加载初始数据库数据。在旧式中，我为粘贴器编写单独的命令并在我可以加载这样的数据时注册它：

```
paster loaddbdata 
```

我现在怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:02:50.947

Pyramid 提供了`pyramid.paster.bootstrap()`使用您的应用程序轻松创建脚本的方法。将脚本转换为命令不是通过 Pyramid 提供的任何复杂结构来完成的，而是您应该只使用 setuptools 入口点。这涉及向`[console_scripts]`您的 .re-running 开发中添加一个部分`setup.py` `entry_points`，并且您的脚本应该安装到`bin`目录中。

```
setup(
   # ...
   entry_points={
    'paste.app_factory': [
        'main = myapp:main',
    ],
    'console_scripts': [
        'myscript = myapp.scripts.myscript:main',
    ],
) 
```

# android - 更新sqlite在listview android中不起作用

> ID：15380028
> 
> 赞同：2
> 
> 时间：2013-03-13T08:16:10.613
> 
> 标签：android, android-sqlite

我使用列表视图，当我尝试更新列表视图但不更改时

我把方法放进 `updateTggl()`去`SaveData()`，所以当我保存数据时，列表会改变但不起作用

这是我的方法

```
private void updateTggl() 
{
    DatabaseHelper dbConnector = new DatabaseHelper(this);

   if (getIntent().getExtras() != null)
   {
       dbConnector.updateTanggal(rowID,tglEt.getText().toString());
   }
} 
```

这是代码 updateTanggal 方法

```
public void updateTanggal(long id, String tglb) 
  {
     ContentValues editTgl = new ContentValues();
     editTgl.put("tglb", tglb);
     SQLiteDatabase db = this.getWritableDatabase();
     db.update("petak_tetap", editTgl, "_id=" + id, null);
     db.close();
  } 
```

调用列表视图的代码

```
db = new DatabaseHelper(this);
        constantsCursor = db.getReadableDatabase().rawQuery(
                "SELECT _ID, alamat, tglb " + "FROM petak_tetap ORDER BY _ID",
                null);

        ListAdapter adapter = new SimpleCursorAdapter(this, R.layout.row,
                constantsCursor, new String[] { DatabaseHelper.ID,
                        DatabaseHelper.ALAMAT, DatabaseHelper.TANGGAL_AKHIR },
                new int[] { R.id.id, R.id.alamat, R.id.tglakhir });

        setListAdapter(adapter);
        registerForContextMenu(getListView()); 
```

这是完整的代码活动

```
package hariff.ltis.petaktetap;

import hariff.ltis.mainmenu.R;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import android.app.AlertDialog;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.ListActivity;
import android.content.ContentValues;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class MainPetakTetap extends ListActivity {
    private int year;
    private int month;
    private int day;
    static final int DATE_DIALOG_ID = 999;
    private LocationManager lm;
    private LocationListener locListener;
    private TextView latTxt, lonTxt;
    public static final int DIALOG_DATE_AWAL = 5;
    public static final int DIALOG_DATE_AKHIR = 6;
    Intent intent = null;
    private static final int ADD_ID = Menu.FIRST + 1;
    private static final int DELETE_ID = Menu.FIRST + 3;
    private static final int UPDATE_ID = Menu.FIRST + 4;
    private static final int DETAIL_ID = Menu.FIRST + 5;
    private static final int CANCEL = Menu.FIRST + 6;
    public static final int SHOW_SUB_ACTIVITY_VIEW = 3;
    private DatabaseHelper db = null;
    private DatabaseHelper ds = null;
    private Cursor constantsCursor = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.banner);

        //ds = new DatabaseHelper(getApplicationContext());
        //ds.loadAll();

        db = new DatabaseHelper(this);
        constantsCursor = db.getReadableDatabase().rawQuery(
                "SELECT _ID, alamat, tglb " + "FROM petak_tetap ORDER BY _ID",
                null);

        ListAdapter adapter = new SimpleCursorAdapter(this, R.layout.row,
                constantsCursor, new String[] { DatabaseHelper.ID,
                        DatabaseHelper.ALAMAT, DatabaseHelper.TANGGAL_AKHIR },
                new int[] { R.id.id, R.id.alamat, R.id.tglakhir });

        setListAdapter(adapter);
        registerForContextMenu(getListView());

        Button button = (Button) findViewById(R.id.btnKembali);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                LogOut();
                setResult(RESULT_OK, null);
                finish();
            }
        });

        button = (Button) findViewById(R.id.btnDataBaru);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                add();
            }
        });

    }// onCreate

    private void LogOut(){

    }//LogOut

    @Override
    public void onDestroy() {
        super.onDestroy();

        constantsCursor.close();
        db.close();
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenu.ContextMenuInfo menuInfo) {
        menu.add(Menu.NONE, DETAIL_ID, Menu.NONE, "Detail");
        menu.add(Menu.NONE, UPDATE_ID, Menu.NONE, "Update");
        menu.add(Menu.NONE, DELETE_ID, Menu.NONE, "Delete");
        menu.add(Menu.NONE, CANCEL, Menu.NONE, "Back")

        .setAlphabeticShortcut('d');
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        switch (item.getItemId()) {

        case DETAIL_ID:
            AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item
                    .getMenuInfo();

            detail(info.id);
            return (true);

        case DELETE_ID:
            AdapterView.AdapterContextMenuInfo infoDetail = (AdapterView.AdapterContextMenuInfo) item
                    .getMenuInfo();

            delete(infoDetail.id);
            return (true);

        case UPDATE_ID:
            AdapterView.AdapterContextMenuInfo infoCode = (AdapterView.AdapterContextMenuInfo) item
            .getMenuInfo();

            addCode(infoCode.id);
            return (true);

        case CANCEL:

        }

        return (super.onOptionsItemSelected(item));
    }

    private LocationManager lman;
    private LocationListener locaListener;
    private TextView latTxtt, lonTxtt;
    private EditText tvDisplayDateAwal, tvDisplayDateAkhir;
    private DatePicker dpResult;

    private void add() {
        LayoutInflater inflater = LayoutInflater.from(this);
        View addView = inflater.inflate(R.layout.add_edit, null);
        latTxtt = (TextView) addView.findViewById(R.id.latitudeTxtt);
        lonTxtt = (TextView) addView.findViewById(R.id.longitudeTxtt);

        lman = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locaListener = new MyLocationListenerDialog();
        lman.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, 10,
                locaListener);
        final DialogWrapper wrapper = new DialogWrapper(addView);

        tvDisplayDateAwal = (EditText) addView.findViewById(R.id.tglawal);
        tvDisplayDateAkhir = (EditText) addView.findViewById(R.id.tglakhir);
        dpResult = (DatePicker) addView.findViewById(R.id.dpResult);
        dpResult.setVisibility(View.GONE);

        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar.MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);

        // set current date into textview
        tvDisplayDateAkhir.setText(new StringBuilder()
                // Month is 0 based, just add 1
                .append(day).append("-").append(month + 1).append("-")
                .append(year).append(" "));

        // set current date into datepicker
        dpResult.init(year, month, day, null);
        Date date1 = (Date) new Date(dpResult.getYear() - 1900,
                dpResult.getMonth(), dpResult.getDayOfMonth());
        SimpleDateFormat dates = new SimpleDateFormat("dd-MM-yyyy");
        String dateString = dates.format(date1);
        tvDisplayDateAkhir.setText(dateString);

        View showDlgAwal = addView.findViewById(R.id.tglawal);
        showDlgAwal.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                showDialog(DIALOG_DATE_AWAL);
            }
        });

        View showDlgAkhir = addView.findViewById(R.id.tglakhir);
        showDlgAkhir.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Perform action on click
                showDialog(DIALOG_DATE_AKHIR);
            }
        });

        Dialog dialog = null;

        new AlertDialog.Builder(this)

                .setTitle(R.string.add_title)
                .setView(addView)
                .setPositiveButton(R.string.ok,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                processAdd(wrapper);
                                // stop gps
                                lman.removeUpdates(locaListener);
                            }
                        })

                .setNegativeButton(R.string.cancel,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int whichButton) {
                                // stop the gps when cancel
                                lman.removeUpdates(locaListener);
                            }
                        }).show();

    }// akhir fungsi add

    public Dialog onCreateDialog(int id) {
        switch (id) {
        case (DIALOG_DATE_AWAL):
            return new DatePickerDialog(this, datePickerListenerAwal, year,
                    month, day);

        case (DIALOG_DATE_AKHIR):
            return new DatePickerDialog(this, datePickerListenerAkhir, year,
                    month, day);
        }
        return null;
    }// onCreateDialog

    // isi dialog awal
    private DatePickerDialog.OnDateSetListener datePickerListenerAwal = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            // set selected date into textview
            tvDisplayDateAwal.setText(new StringBuilder().append(day)
                    .append("-").append(month + 1).append("-").append(year)
                    .append(" "));

            // set selected date into datepicker also
            dpResult.init(year, month, day, null);

            Date date1 = (Date) new Date(dpResult.getYear() - 1900,
                    dpResult.getMonth(), dpResult.getDayOfMonth());
            SimpleDateFormat dates = new SimpleDateFormat("dd-MM-yyyy");
            String dateString = dates.format(date1);
            tvDisplayDateAwal.setText(dateString);
        }
    };

    // isi dialog akhir
    private DatePickerDialog.OnDateSetListener datePickerListenerAkhir = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,
                int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            // set selected date into textview
            tvDisplayDateAkhir.setText(new StringBuilder().append(day)
                    .append("-").append(month + 1).append("-").append(year)
                    .append(" "));

            // set selected date into datepicker also
            dpResult.init(year, month, day, null);

            Date date1 = (Date) new Date(dpResult.getYear() - 1900,
                    dpResult.getMonth(), dpResult.getDayOfMonth());
            SimpleDateFormat dates = new SimpleDateFormat("dd-MM-yyyy");
            String dateString = dates.format(date1);
            tvDisplayDateAkhir.setText(dateString);
        }
    };

    private class MyLocationListenerDialog implements LocationListener {
        @Override
        public void onLocationChanged(Location loc) {
            // TODO Auto-generated method stub
            if (loc != null) {
                latTxtt.setText(String.valueOf(loc.getLatitude()));
                lonTxtt.setText(String.valueOf(loc.getLongitude()));
            }
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }//onProviderDisabled

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }//onProviderEnabled

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }//onStatusChanged

        protected void onPause() {
            lman.removeUpdates(locaListener);
            onPause();
        }

        private void stopListening() {
            if (lman != null) {
                lman.removeUpdates(this);
            }
        }

    }

    private void detail(final long rowId) {
        if (rowId > 0) {
            LayoutInflater inflater = LayoutInflater.from(this);
            View addView = inflater.inflate(R.layout.detail_tetap, null);

            final DialogWrapper wrapper = new DialogWrapper(addView);
            TextView idDt = (TextView) addView.findViewById(R.id.idDetail);
            TextView codeTxtDt = (TextView) addView
                    .findViewById(R.id.codeDetail);
            TextView alamatTxtDt = (TextView) addView
                    .findViewById(R.id.alamatDetail);
            TextView batasTxtDt = (TextView) addView
                    .findViewById(R.id.batasDetail);
            TextView latTxtDt = (TextView) addView.findViewById(R.id.latDetail);
            TextView lonTxtDt = (TextView) addView.findViewById(R.id.lonDetail);
            TextView luasTxtDt = (TextView) addView
                    .findViewById(R.id.luasDetail);
            TextView tglAwaltxtDt = (TextView) addView
                    .findViewById(R.id.tglAwalDetail);
            TextView tglAkhirtxtDt = (TextView) addView
                    .findViewById(R.id.tglAkhirDetail);
            // View editTextHidden = (EditText) findViewById(R.id.txtHidden);
            // database handler
            DatabaseHelper db = new DatabaseHelper(getApplicationContext());
            // Spinner Drop down elements
            SQLiteDatabase dbs = db.getReadableDatabase();

            Cursor cursor = dbs.rawQuery("SELECT * FROM petak_tetap where _ID="
                    + rowId + "", null);
            if (cursor.moveToFirst()) {
                do {
                    String noId = cursor.getString(0); // Here you can get data
                                                        // from table and stored
                                                        // in string if it has
                                                        // only one string.
                    String code = cursor.getString(1);
                    String alamat = cursor.getString(2);
                    String batas = cursor.getString(3);
                    String lat = cursor.getString(4);
                    String lon = cursor.getString(5);
                    String luas = cursor.getString(6);
                    String tglAwal = cursor.getString(7);
                    String tglAkhir = cursor.getString(8);

                    idDt.setText(noId);
                    codeTxtDt.setText(code);
                    alamatTxtDt.setText(alamat);
                    batasTxtDt.setText(batas);
                    latTxtDt.setText(lat);
                    lonTxtDt.setText(lon);
                    luasTxtDt.setText(luas);
                    tglAwaltxtDt.setText(tglAwal);
                    tglAkhirtxtDt.setText(tglAkhir);

                } while (cursor.moveToNext());
            }
            if (cursor != null && !cursor.isClosed()) {
                cursor.close();
            }
            if (db != null) {
                db.close();
            }
            new AlertDialog.Builder(this)
                    .setTitle(R.string.detail_title)

                    .setView(addView)
                    .setPositiveButton(R.string.ok,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    // ignore, just dismiss
                                }
                            }).show();
        }
    }

    private void addCode(final long rowId) {
        if (rowId > 0) {

            // View editTextHidden = (EditText) findViewById(R.id.txtHidden);
            // database handler
            DatabaseHelper db = new DatabaseHelper(getApplicationContext());
            // Spinner Drop down elements
            SQLiteDatabase dbs = db.getReadableDatabase();

            Cursor cursor = dbs.rawQuery("SELECT * FROM petak_tetap where _ID="
                    + rowId + "", null);
            if (cursor.moveToFirst()) {
                do {
                    String noId = cursor.getString(0); // Here you can get data
                                                        // from table and stored
                                                        // in string if it has
                                                        // only one string.
                    String code = cursor.getString(1);
                    String alamat = cursor.getString(2);
                    String batas = cursor.getString(3);
                    String lat = cursor.getString(4);
                    String lon = cursor.getString(5);
                    String luas = cursor.getString(6);
                    String tglAwal = cursor.getString(7);
                    String tglAkhir = cursor.getString(8);
                    Intent intent = new Intent(MainPetakTetap.this, MainUpdate.class);
                    intent.putExtra("new_variable_name",code);
                    intent.putExtra("row_id",noId);
                    intent.putExtra("tanggal_akhir",tglAkhir);
                    startActivity(intent);

                } while (cursor.moveToNext());
            }
            if (cursor != null && !cursor.isClosed()) {
                cursor.close();
            }
            if (db != null) {
                db.close();
            }

            //Bundle extras = new Bundle();

            //intent.putExtras(extras);

        }
    }

    private void delete(final long rowId) {
        if (rowId > 0) {
            new AlertDialog.Builder(this)
                    .setTitle(R.string.delete_title)
                    .setPositiveButton(R.string.ok,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    processDelete(rowId);
                                }
                            })
                    .setNegativeButton(R.string.cancel,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    // ignore, just dismiss
                                }
                            }).show();
        }
    }

    private void processAdd(DialogWrapper wrapper) {
        ContentValues values = new ContentValues(2);

        values.put(DatabaseHelper.CODE, wrapper.getCode());
        values.put(DatabaseHelper.ALAMAT, wrapper.getAlamat());
        values.put(DatabaseHelper.BATAS, wrapper.getBatas());
        values.put(DatabaseHelper.LAT, wrapper.getLat());
        values.put(DatabaseHelper.LON, wrapper.getLon());
        values.put(DatabaseHelper.LUAS, wrapper.getLuas());
        values.put(DatabaseHelper.TANGGAL_AWAL, wrapper.getTglA());
        values.put(DatabaseHelper.TANGGAL_AKHIR, wrapper.getTglB());

        db.getWritableDatabase().insert("petak_tetap", DatabaseHelper.ALAMAT,
                values);
        constantsCursor.requery();
    }

    private void processDelete(long rowId) {
        String[] args = { String.valueOf(rowId) };

        db.getWritableDatabase().delete("petak_tetap", "_ID=?", args);
        constantsCursor.requery();
    }

    class DialogWrapper {
        EditText codeField = null;
        EditText alamatField = null;
        EditText batasField = null;
        EditText luasField = null;
        EditText tglAField = null;
        EditText tglBField = null;
        TextView latField = null;
        TextView lonField = null;
        View base = null;

        DialogWrapper(View base) {
            this.base = base;
            tglBField = (EditText) base.findViewById(R.id.tglakhir);
        }

        String getCode() {
            return (getCodeField().getText().toString());
        }

        String getAlamat() {
            return (getAlamatField().getText().toString());
        }

        String getBatas() {
            return (getBatasField().getText().toString());
        }

        String getLuas() {
            return (getLuasField().getText().toString());
        }

        String getTglA() {
            return (getTglAField().getText().toString());
        }

        String getTglB() {
            return (getTglBField().getText().toString());
        }

        String getLat() {
            return (getLatField().getText().toString());
        }

        String getLon() {
            return (getLonField().getText().toString());
        }

        private EditText getCodeField() {
            if (codeField == null) {
                codeField = (EditText) base.findViewById(R.id.code);
            }
            return (codeField);
        }

        private EditText getAlamatField() {
            if (alamatField == null) {
                alamatField = (EditText) base.findViewById(R.id.alamat);
            }

            return (alamatField);
        }

        private EditText getBatasField() {
            if (batasField == null) {
                batasField = (EditText) base.findViewById(R.id.batas);
            }

            return (batasField);
        }

        private TextView getLatField() {
            if (latField == null) {
                latField = (TextView) base.findViewById(R.id.latitudeTxtt);
            }

            return (latField);
        }

        private TextView getLonField() {
            if (lonField == null) {
                lonField = (TextView) base.findViewById(R.id.longitudeTxtt);
            }

            return (lonField);
        }

        private EditText getLuasField() {
            if (luasField == null) {
                luasField = (EditText) base.findViewById(R.id.luas);
            }

            return (luasField);
        }

        private EditText getTglAField() {
            if (tglAField == null) {
                tglAField = (EditText) base.findViewById(R.id.tglawal);
            }

            return (tglAField);
        }

        private EditText getTglBField() {
            if (tglBField == null) {
                tglBField = (EditText) base.findViewById(R.id.tglakhir);
            }

            return (tglBField);
        }
    }
} 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:23:46.470

> 更新sqlite在listview android中不起作用

您没有指定您使用的是哪种适配器。但可能有一些`CursorAdapter`。

所以你应该调用`cursor.requery()`或者你可以再次执行查询来获取新的Cursor，然后将这个新的Cursor交换到CursorAdapter中。

如果第一种方法不起作用，您也可以尝试使用`changeCursor()`或在您的适配器上。`swapCursor()`

```
yourAdapter.changeCursor(newCursor); 
```

如果你不使用 CursorAdapter 有方法`notifyDataSetChanged()`

# javascript - 为什么我在以不同方式使用它时无法获得复选框长度？

> ID：15380030
> 
> 赞同：0
> 
> 时间：2013-03-13T08:16:28.020
> 
> 标签：javascript, html

这是我的代码：

**HTML：**

```
<form name="frm1">
    <input type="checkbox" id="chk1" name="chk1[]"  value="1"/>
    <input type="checkbox" id="chk1" name="chk1[]"  value="2"/>
</form>
<button class="test1">Test 1</button>

<form name="frm2">
    <input type="checkbox" id="chk2" name="chk2[]"  value="1"/>
    <!--<input type="checkbox" id="chk2" name="chk2[]"  value="2"/>-->
</form>
<button class="test2">Test 2</button>

<form name="frm3">
    <input type="checkbox" name="chk3[]"  value="1"/>
    <input type="checkbox" name="chk3[]"  value="2"/>
</form>
<button class="test3">Test 3</button> 
```

**脚本：**

```
$('button.test3').click(function (){
    alert(document.frm3.chk3.length);// Gives error: document.frm3.chk3 is undefined  
});

$('button.test2').click(function (){
    alert(document.frm2.chk2.length);// Outputs: undefined
});

$('button.test1').click(function (){
    alert(document.frm1.chk1.length);// Gives 2 as expected
}); 
```

**小提琴：http:** [//jsfiddle.net/mgsvy/](http://jsfiddle.net/mgsvy/)

如果我可以访问 a `form`by`name`和它，`elements`那么**为什么**上面会给出意想不到的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:18:12.730

你需要使用`alert(document.frm3["chk3[]"].length);`

`document.frm3`使用 name 属性来标识元素，在您的情况下，复选框的名称是`chk3[]`您需要使用的`document.frm3["chk3[]"]`

演示：[小提琴](http://jsfiddle.net/arunpjohny/mgsvy/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:25:45.787

你可以使用`document.frm3['chk3[]'].length`或`document.getElementsByName`这样的财产，

```
document.getElementsByName('chk1[]').length

document.getElementsByName('chk2[]').length

document.getElementsByName('chk3[]').length 
```

**[现场演示](http://jsfiddle.net/mgsvy/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:26:57.133

防水的方法在这里：http: [//jsfiddle.net/mgsvy/2/](http://jsfiddle.net/mgsvy/2/)

我删除了复选框上的 id，因为您在多个元素上使用了相同的 id，这就是为什么您的行为不一致。由于名称中包含括号，因此您必须使用括号表示法来引用该特定名称。

如果只有一个具有该名称的元素，则将其存储为节点而不是节点列表，节点列表没有长度属性并被`undefined`返回。`|| 1`确保您仍然获得正确的输出。

```
alert(document.frm2['chk2[]'].length || 1); 
```

# java - 在服务器上创建图表并从客户端访问它是不好的设计吗？

> ID：15380031
> 
> 赞同：1
> 
> 时间：2013-03-13T08:16:33.893
> 
> 标签：java, apache-flex

假设我们有两种创建图表的选择，如下所示：

1.  通过一些开源库（例如 jfreecharts）在服务器端（Java）创建图表并将图像发送到客户端

2.  在客户端（Flex）创建图表并显示它们。请注意，几乎没有可用于创建各种图表的开源 flex 库。两种选择都是购买昂贵的库或编写一个。

什么是最可取的方式，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:42:54.363

如果生成的图表或图像的大小大于用于创建它的原始 xml 或 json，则响应延迟将增加。

如果涉及大量数据传输，请始终选择有意义的格式，例如 JSON 字符串或 xml，并在客户端进行处理。

# ios - EAAccessoryManager 附件选择器错误

> ID：15380032
> 
> 赞同：5
> 
> 时间：2013-03-13T08:16:34.363
> 
> 标签：ios, bluetooth, mfi, accessory

我正在尝试构建一个与外部附件（通过蓝牙）通信的应用程序。为了确保应用程序对用户友好，我希望他不要去设置连接配件，而是显示 iOS 6.0 包含的配件选择器。

为此，只需简单调用：

```
[[EAAccessoryManager sharedAccessoryManager] showBluetoothAccessoryPickerWithNameFilter:nil completion:nil]; 
```

目前，我没有使用过滤器和完成（根据[iOS Class Reference](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/EAAccessoryManager_class/Reference/Reference.html)两者都可以为零）——即使我也尝试使用它们。

现在**的问题**是我的配件出现了**2 到 10 秒**，然后从列表中消失，直到我取消弹出窗口并再次显示它。另一个问题是有时它根本不会出现。我还确保设备已经配对但未连接。

我尝试使用另一种配件（不是我自己制作的）和不同的设备（iPhone 4、4S、5 - iPad - iPod Touch），但没有成功。

有没有人有类似的问题？如果是，您是如何解决的？这是一个iOS错误吗？它是一个附件错误吗？

感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T13:13:03.210

I can confirm that iOS 7 BETA 4 has fixed this issue. If you are using the RN 42 APL bluetooth chip (which you must be as its the only one available on the MFI program)

The only thing you need to be aware of is that the firmware on the RN 42 module needs to be 5.36 and above (as it fully supports the iAP protocol)

I have updated my App (that talks to a custom build accessory) and the accessory picker dialog works a charm.... just thought I'd let you guys know!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T19:29:19.367

刚刚从苹果那里得到了这些问题的答案。苹果表示这是一个错误，他们将在未来的 ios 版本中修复它。不确定什么时候会发生。但是不要为此浪费时间，因为这是错误。在新修复之前，解决方法是在蓝牙设置屏幕上配对设备，然后在 App 中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-02T07:27:16.237

我可以确认 iOS 6.1.3 中仍然存在该错误

We have designed a custom piece of hardware that uses the RN42 APL module (we are part of the MFI program). We have spoken to Roving Networks (now Microchip) and they have assured us the firmware on their module matches apples requirements... Microchip are still looking into the problem, but we are looking at the possibility that it is a bug with iOS 6.x

I will download iOS 7.0 and try it out... will report back guys

Cheers Will

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T19:12:59.620

我遇到了完全相同的问题，过去一周一直无法解决。我正在使用 Roving Networks RN-42-APL-X 模块，并将我正在使用的模块的查询扫描窗口和页面扫描窗口更改为 100%，但仍然没有运气。

showBluetootAccessoryPickerWithNameFilter 有时会找不到我的设备，当它找到时，它会在找到设备后 0.5 秒到 6 秒之间丢失设备...

2013-03-13 00:45:22.006 EADemo[356:907] BTM：找到设备“myDevice”00:08:36:4B:A4:49

2013-03-13 00:45:22.631 EADemo[356:907] BTM：丢失设备“myDevice”00:08:36:4B:A4:49

# javascript - Knockout.js：当父 li 元素具有点击绑定时，子标签不起作用

> ID：15380035
> 
> 赞同：5
> 
> 时间：2013-03-13T08:16:49.913
> 
> 标签：javascript, knockout.js

我有一个菜单，每个项目都可以切换它自己的子菜单，这里是示例代码。如您所见，子菜单项是链接到 google.co.nz 的标签

```
 <ul id="menuHolder">
    <li data-bind="click: showMenu.bind($data, 1)"> 
         Main menu item
        <ul class="submenu" data-bind="visible: selected() == '1'">
            <li>
               <a class="sub-item" href="http://google.co.nz">
                    Submenu item
               </a>
             </li>
        </ul>
    </li>
 </ul>
<script type="text/javascript">
  var menuModel = function () {
    var self = this;
    self.selected = ko.observable(0);        
    self.showMenu = function (data) {
        var s = self.selected();
        if (s > 0 && data == s)
            self.selected(0);
        else
            self.selected(data);
    };     
}
ko.applyBindings(new menuModel(), document.getElementById("menuHolder"));
</script> 
```

一切都有效，只有 a 标签不再有效，这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T08:53:56.457

您的问题如下：单击链接会引发 click 事件，该事件会发生并由您的`showMenu`函数处理，默认情况下 KO 不会触发浏览器的默认行为，因此您的链接不会打开。

您需要在链接上添加一个单击事件处理程序，该处理程序返回`true`this 告诉 KO 触发浏览器默认行为，您可能还需要设置`clickBubble`属性`false`以防止`showMenu`执行：

```
<a class="sub-item" href="http://google.co.nz"
   data-bind="click: function(){ return true }, clickBubble: false" >
      Submenu item
</a> 
```

可以在文档中阅读更多关于点击绑定的[信息](http://knockoutjs.com/documentation/click-binding.html)。

演示[JSFiddle。](http://jsfiddle.net/xRL8j/)

# c# - 如何在文本框 wpf 控件中使用我的本机脚本（泰米尔语）

> ID：15380039
> 
> 赞同：6
> 
> 时间：2013-03-13T08:16:52.050
> 
> 标签：c#, wpf, c#-4.0, wpf-controls

我想使用我的母语脚本（泰米尔语）。我决定使用专门为泰米尔语设计的 Windows 默认字体 Latha。但是我无法在文本框中输入母语。当我打字时，它只捕获英语。如何做到这一点？

任何帮助将不胜感激 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:45:41.040

您是否尝试过添加这样的自定义字体系列资源？

```
<FontFamily x:Key="MyFontFamily">/Fonts/FontName__.TTF</FontFamily> 
```

您可以将其`Style`用于您的`TextBox FontFamily`.

# jakarta-ee - Websphere 是否支持虚拟目录映射？

> ID：15380041
> 
> 赞同：0
> 
> 时间：2013-03-13T08:17:12.303
> 
> 标签：jakarta-ee, websphere, web.xml, virtual-directory

有没有办法创建驻留在 Websphere 主目录之外的虚拟目录。换句话说，如何将 Web 虚拟路径映射到目录路径。

例如 C:/Test/image.jpg 可从以下位置访问：`http://localhost:9080/Test/image.jpg`

我知道如何在 Weblogic 中使用 weblogic.xml 文件执行此操作，但不知道 Websphere。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:16:04.287

通常，您使用 IHS（IBM Http Server）只是一个配置了 WebSphere 插件以实现负载平衡的 Apache 2。在那里，您可以映射所有静态内容。

检查：[http ://www-01.ibm.com/software/webservers/httpservers/](http://www-01.ibm.com/software/webservers/httpservers/)

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-21T13:20:29.107

万一其他人遇到这个老问题，似乎可以通过使用**extendedDocumentRoot** WebSphere 扩展

> extendedDocumentRoot 当应用程序需要访问应用程序 Web 应用程序归档 (WAR) 目录之外的文件时，使用扩展的文档根工具。此工具使您能够为应用程序配置一个或多个目录路径，您可以从中提供静态文件和 JSP 文件。当应用程序需要访问存在于 Web 应用程序归档 (WAR) 目录之外的文件时，您可以使用此属性。例如，如果多个应用程序需要访问一组公用文件，您可以将公用文件放在一个目录中，您可以将每个应用程序作为扩展文档根目录链接到该目录。

来自 [https://www.ibm.com/support/knowledgecenter/en/SSEQTP_9.0.0/com.ibm.websphere.base.doc/ae/rweb_jspengine.html](https://www.ibm.com/support/knowledgecenter/en/SSEQTP_9.0.0/com.ibm.websphere.base.doc/ae/rweb_jspengine.html) [https://www.ibm.com/support/knowledgecenter/ en/SSAW57_8.0.0/com.ibm.websphere.nd.doc/info/ae/ae/rweb_jsp_staticfile.html](https://www.ibm.com/support/knowledgecenter/en/SSAW57_8.0.0/com.ibm.websphere.nd.doc/info/ae/ae/rweb_jsp_staticfile.html) [https://www.ibm.com/developerworks/community/forums/html/topic?id=d870176c-c16c -4153-9f96-537116074b14](https://www.ibm.com/developerworks/community/forums/html/topic?id=d870176c-c16c-4153-9f96-537116074b14)

# android - 如何在 Eclipse 中使用 Google 提供的 Android Design Pack

> ID：15380043
> 
> 赞同：3
> 
> 时间：2013-03-13T08:17:18.890
> 
> 标签：android, eclipse, user-interface

我正在尝试使用 Google 在下面的链接中提供的这些很酷的加载项

[http://developer.android.com/design/downloads/index.html](http://developer.android.com/design/downloads/index.html)

但我不明白如何将它与 eclipse 集成，以便它们可以直接作为拖放使用。你知道如何使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T08:31:07.153

您不能集成到 eclipse 中，因为它只允许有效[视图](http://developer.android.com/reference/android/view/View.html)“链接”到您的项目（直接或从库中）。这些只是制作可绘制对象的来源。您必须从中创建自己的可绘制对象。但是如果你对 holo 主题感兴趣，你应该查看 android (API 11+) 的来源。如果你已经安装了，你可以在 /platforms/android-11/data/res/ 找到它。也许您会发现[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)项目很有用。但是您可以使用 Action Bar Icon Pack，您必须将适当的可绘制对象复制到您的项目中，并且当您将 ImageView 拖到布局编辑器中时，您可以从对话框中选择源，也可以在 xml 中输入路径。

**编辑** 忘了提，有一个非常棒的在线工具，可以[在这里](http://android-holo-colors.com/)生成具有自定义颜色的全息可绘制对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T05:16:50.607

经过一些挖掘和观看 Google IO 2012 有关设计的视频后，设计包实际上是设计人员在实际开发之前创建 UI 的模板。它包含一组操作栏图标（这些可以导入到您的项目中），一组模板，可以与 Adob​​e 产品一起使用，以创建应用程序的初始模型。虽然，它们不能直接导入 eclipse 并使用（因为它们实际上已经在 SDK 中可用），但它是开始设计的一个很好的指南，而不是之后实际编码和重新发明。

# google-maps - 点击谷歌静态地图上的标记

> ID：15380046
> 
> 赞同：0
> 
> 时间：2013-03-13T08:17:38.430
> 
> 标签：google-maps, google-maps-markers

我有一个从谷歌地图下载静态图像的应用程序，标记放置在我想要的位置（通过将参数传递到谷歌静态地图 URL 来放置）。但是，我还需要能够单击标记。我想我可以将 x 和 y 坐标转换为 lon/lat，然后找出点击了哪个标记的方式，但我发现这并不容易。

我知道地图的尺寸​​（以像素为单位）、缩放级别以及地图的中心点（以像素和经度/纬度为单位），所以我关注[了这篇博](http://www.appelsiini.net/2008/6/clickable-markers-with-google-static-maps)文。不幸的是，这没有用。

有谁知道我该怎么做，或者知道我可以用另一种方法来确定是否点击了标记？不幸的是，我被迫使用静态地图，所以我不能用 JavaScript API 做任何事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:46:11.903

看：

[http://home.provide.net/~bratliff/largetiles/](http://home.provide.net/~bratliff/largetiles/)

或者

[http://home.provide.net/~bratliff/harbor/](http://home.provide.net/~bratliff/harbor/)

这不完全是您正在做的事情，但它确实演示了墨卡托投影转换和跨浏览器鼠标事件。

# javascript - 在变量 jquery 中使用选择器

> ID：15380047
> 
> 赞同：2
> 
> 时间：2013-03-13T08:17:49.867
> 
> 标签：javascript, jquery, jquery-selectors

我必须在单击链接时创建这样的功能[它](http://www.biz.konicaminolta.com/lineup/index.html)会在弹出框中显示产品详细信息这是使用我不理解的大 jquery 代码

这是我的[jsfiddle](http://jsfiddle.net/Hg4zp/2/) ，我试图为一些链接提供具有不同#tags的相同类来显示div，我希望当我点击链接时，它会解析相同的href值并显示相应的结果，但它没有工作可以有人建议这里的正确方法是我的 JS

```
$(".show").click(function() {
    var link = $('this').attr('href');
  $(link).show();

}); 
```

和 html

```
<a href="#popup" id="show" class="show">a</a>
<a href="#popup1" id="show1" class="show">b</a>
<a href="#popup2" id="show2" class="show">c</a> 
```

我想在锚点点击时显示#popup

[小提琴](http://jsfiddle.net/Hg4zp/2/)上的完整代码，我想要[这个功能](http://www.biz.konicaminolta.com/lineup/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:22:52.943

你应该打电话`$(this)`，而不是`$('this')`

*   `$(this)``this`将jQuery 对象中引用的对象包装起来，
*   `$('this')`将遍历您的所有文档以查找标记的 html 节点`this`（很像`$('div')`将查找标记的 html 节点`div`）；因为没有，它将选择一个空的节点列表。

工作小提琴：http: [//jsfiddle.net/Hg4zp/3/](http://jsfiddle.net/Hg4zp/3/)

（还有一个错字，调用`.hide(")`而不是`.hide()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:46:20.880

试试这个方法：

```
$(".show").click(function (e) { //<-----pass the event here
   e.preventDefault(); //<--------------stop the default behavior of the link
   var link = $(this).attr('href'); //<-remove the quotes $(this)
   $(link).show();
});

$(".close").click(function () {
   $(this).closest("div.popupbox").hide(); //<----use .hide(); not .hide(");
}); 
```

在这些情况下，您应该使用`preventDefault()`来停止单击链接时发生的跳转。

# mysql - mysql 字符串到日期

> ID：15380049
> 
> 赞同：0
> 
> 时间：2013-03-13T08:17:56.493
> 
> 标签：mysql

如何将像 '12-Mar-2013' 这样的字符串/varchar 转换为像 2013-03-12 这样的日期？

我试过

```
SELECT STR_TO_DATE('12-Mar-2013','%Y-%m-%d');

SELECT DATE_FORMAT('12-Mar-2013','%Y-%m-%d'); 
```

但两者都返回null。

我当前的数据库版本是 5.5.7-rc。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T08:21:47.253

使用[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_str-to-date).

尝试

```
SELECT STR_TO_DATE('12-Mar-2013','%d-%M-%Y');

->   2013-03-12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T08:25:57.017

这应该可以解决问题

```
SELECT DATE_FORMAT(STR_TO_DATE('12-Mar-2013','%d-%b-%Y'), '%Y-%d-%m'); 
```

# c# - 验证当前已通过身份验证的 windows 用户是否具有委托权限

> ID：15380054
> 
> 赞同：3
> 
> 时间：2013-03-13T08:18:11.810
> 
> 标签：c#, wcf, windows-authentication, impersonation

鉴于我有一个使用 Windows 身份验证的 WCF 服务，并且我想模拟它们并调用另一个 WCF 服务，如下所示：

```
using (ServiceSecurityContext.Current.WindowsIdentity.Impersonate())
{
    // call another WCF service
} 
```

我已经设置了所有配置设置并且它工作正常，只要在客户端，它们包括以下行：

```
client.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Delegation; 
```

但是，在尝试调用用户令牌是否具有委托权限之前，我该如何验证？即我无法控制的客户端设置了 AllowedPersonationLevel？

如果他们没有设置它，就会抛出各种奇怪的异常（比如无法加载程序集 X 等）。

理想情况下，我希望能够执行以下操作：

```
using (ServiceSecurityContext.Current.WindowsIdentity.Impersonate())
{
    if (UserDoesntHaveDelegationRights())
        throw new SecurityException("No delegation rights");

    // call another WCF service
} 
```

请注意，`WindowsIdentity.GetCurrent().ImpersonationLevel` 它始终等于`TokenImpersonationLevel.Impersonation`，因此不幸的是，这不是一个选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:52:09.897

这里的定义可能有些混乱。就[模拟级别](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379572%28v=vs.85%29.aspx)而言， Windows 身份可以是：

*   Impersonated - 服务可以在本地模拟用户
*   委托 - 服务可以远程模拟用户

委托的能力是如此强大，以至于它在 Active Directory 中受到高度限制：

1.  客户必须允许委托
2.  执行委派的服务帐户必须在 Active Directory中标记为“*受信任的委派”。*

以下是如何[为委托启用帐户](http://technet.microsoft.com/en-us/library/cc739474%28v=ws.10%29.aspx)。它需要 Active Directory 域管理员进行更改。我曾经工作过的每个公司环境都有一个不允许委派的政策。

回到你的问题：

**So while `TokenImpersonationLevel.Delegation` exists, its considered a security risk and rarely (if ever) used. `TokenImpersonationLevel.Impersonation` is the highest level that you will probably ever get.**

`TokenImpersonationLevel.Impersonation` is useful. You can still connect to a database or make a remote service call as the impersonated user. But a remote service (not on the same box) can't impersonate the user a second time. The basic rule of thumb is "impersonation enables two machines hops". If the user's credentials have to "hop" farther, it will fail.

If you need to pass a user's credentials between many servers the best choice is a federated security model such as Windows Identity Foundation (WIF). See [Identity Management in Active Directory](http://msdn.microsoft.com/en-us/security/aa570351.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:49:46.257

关于什么

```
if (WindowsIdentity.GetCurrent().ImpersonationLevel != TokenImpersonationLevel.Delegation) ... 
```

# php - 到函数内部的全局变量

> ID：15380057
> 
> 赞同：0
> 
> 时间：2013-03-13T08:18:27.300
> 
> 标签：php, function, variables, global

我对函数内部的全局变量有问题

```
<?php
    function main(){
        $var = "My Variable";
        function sub() {
            GLOBAL $var;
            echo $var; // Will show "My Variable"
        }
        sub();
        echo $var; // Will show "My Variable" 
    }
    main();
    sub(); // Will not show and I will sub() cant use outside main() function
?> 
```

1.  我只想全局`$var`内部子函数
2.  `sub()`不能在函数外`main()`工作

我绑定使用`GLOBAL`，但它什么也没显示...任何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:25:35.807

您没有为全局范围变量赋值`$var`。
仅`main()`将值分配给被调用`$var`但仅在`main()`' 范围内的变量。只有`main()`'s`echo $var;`实际上打印了值。两个调用`sub()`都不产生输出。
试试看

```
<?php
function main(){
    $var = "My Variable"; 
    function sub() {
      GLOBAL $var;
      echo 'sub: ', $var, "\n";
    }
    sub();
    echo 'main: ', $var, "\n";
}
main();
sub(); 
```

输出是

```
sub: 
main: My Variable
sub: 
```

请阅读[https://en.wikipedia.org/wiki/Dependency_injection](https://en.wikipedia.org/wiki/Dependency_injection) ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:31:38.293

不知道我是否理解你想要什么，但你`$var`不是全球性的。它是 main() 中的一个局部变量

如果您在函数或类之外声明变量，则变量只是全局变量。

```
<?php
    $var = "My Variable"; // made $var global
    function main(){
        //removed $var here
        function sub() {
            global $var;
            echo $var; // Will show "My Variable"
        }
        sub();
        echo $var; // Will throw notice:  Undefined variable: var
    }
    main();
    sub(); // Will show "My Variable"
?> 
```

为什么要在方法中声明一个方法以从那里调用它？

也许这样的东西就是你想要的......

```
<?php
   //$var = "My Variable";
    function main(){
        $var = "My Variable";
        $sub = function($var) {
            echo "sub: ".$var; // Will show "sub: My Variable"
        };
        $sub($var);
        echo "main: ".$var; //  Will show "main: My Variable"
    }
    main();
    // sub(); // Will not work
    // $sub(); // Will not work
?> 
```

# c# - 为什么递减一个变量会修改 C# Parallel.ForEach 循环中另一个变量的递增？

> ID：15380059
> 
> 赞同：3
> 
> 时间：2013-03-13T08:18:40.403
> 
> 标签：c#, linq, concurrency, lambda, task-parallel-library

[从Parallel.ForEach](https://stackoverflow.com/questions/14039051/parallel-foreach-keeps-spawning-new-threads)运行代码通过我的一些修改 不断产生新线程

带有注释行的输出：

```
//threadsRemaining = Interlocked.Decrement(ref concurrentThreads); 
```

是“显而易见的”，即预期一个：

```
[00:00] Job 0 complete. 2 threads remaining. unsafeCount=2
[00:00] Job 1 complete. 1 threads remaining. unsafeCount=1
[00:00] Job 2 complete. 3 threads remaining. unsafeCount=3
[00:00] Job 3 complete. 4 threads remaining. unsafeCount=4
[00:00] Job 4 complete. 5 threads remaining. unsafeCount=5
[00:00] Job 5 complete. 6 threads remaining. unsafeCount=6
[00:01] Job 6 complete. 7 threads remaining. unsafeCount=7
[00:01] Job 8 complete. 8 threads remaining. unsafeCount=8
[00:01] Job 7 complete. 9 threads remaining. unsafeCount=9
[00:01] Job 9 complete. 10 threads remaining. unsafeCount=10 
```

虽然取消注释上述行时相同代码的输出是：

```
[00:00] Job 0 complete. 1 threads remaining. unsafeCount=1
[00:00] Job 1 complete. 0 threads remaining. unsafeCount=0
[00:00] Job 3 complete. 0 threads remaining. unsafeCount=0
[00:00] Job 2 complete. 1 threads remaining. unsafeCount=1
[00:00] Job 4 complete. 1 threads remaining. unsafeCount=1
[00:00] Job 5 complete. 1 threads remaining. unsafeCount=1
[00:01] Job 6 complete. 1 threads remaining. unsafeCount=1
[00:01] Job 8 complete. 1 threads remaining. unsafeCount=1
[00:01] Job 9 complete. 1 threads remaining. unsafeCount=1
[00:01] Job 7 complete. 0 threads remaining. unsafeCount=0 
```

你能解释一下为什么减少一个变量会`threadsRemainin`停止（或阻止）增加另一个变量`unsafeCount`吗？

控制台应用程序代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace seParallelForEachKeepsSpawningNewThreads
{
  public class Node
  {
    public Node Previous { get; private set; }
    public Node(Node previous)
    {
      Previous = previous;
    }
  }
  public class Program
  {
    public static void Main(string[] args)
    {
      DateTime startMoment = DateTime.Now;
      int concurrentThreads = 0;
      int unsafeCount = 0;

      var jobs = Enumerable.Range(0, 10);
      ParallelOptions po = new ParallelOptions
      {
        MaxDegreeOfParallelism = Environment.ProcessorCount
      };
      Parallel.ForEach(jobs, po, delegate(int jobNr)
      {
        int threadsRemaining = Interlocked.Increment(ref concurrentThreads);
        unsafeCount++;

        int heavyness = jobNr % 9;

        //Give the processor and the garbage collector something to do...
        List<Node> nodes = new List<Node>();
        Node current = null;
        //for (int y = 0; y < 1024 * 1024 * heavyness; y++)
        for (int y = 0; y < 1024 * 4 * heavyness; y++)
        {
          current = new Node(current);
          nodes.Add(current);
        }

        TimeSpan elapsed = DateTime.Now - startMoment;
//*****************
         //threadsRemaining = Interlocked.Decrement(ref concurrentThreads);
        Console.WriteLine("[{0:mm\\:ss}] Job {1} complete. {2} threads remaining. unsafeCount={2}", 
          elapsed, jobNr, threadsRemaining, unsafeCount);
      });
      Console.WriteLine("FINISHED");
      Console.ReadLine();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T08:23:45.557

这就是问题：

```
Console.WriteLine(
    "[{0:mm\\:ss}] Job {1} complete. {2} threads remaining. unsafeCount={2}", 
    elapsed, jobNr, threadsRemaining, unsafeCount); 
```

最后一部分应该是`{3}`，不是`{2}`。你现在只是打印`threadsRemaining`两次......

# django - 获取 url 并将实例添加到具有预填充外键的模型中：django admin

> ID：15380060
> 
> 赞同：0
> 
> 时间：2013-03-13T08:18:58.243
> 
> 标签：django, django-templates, django-admin, django-views

我有一个页面，其中每个比赛都连续显示。每行包含竞赛 ID 和链接到具有竞赛外键的其他模型名称。像新闻模型：

```
class News(models.Model):
    title = models.CharField(max_length=50, null=True)
    description = models.TextField()
    time = models.TimeField( default= datetime.datetime.now().time())
    contest = models.ForeignKey(Contest) 
```

我想使用管理员添加和更改这些模型。我希望当用户单击具有外键的“新闻”来比赛 id=1 时，它只显示具有该外键值的新闻列表。所以我用

```
{% for instance in instances %}
                    <tr class="{% cycle 'row1' 'row2' %}">
                        <td>{{ instance.title }}</td>
                        <td>{{ instance.startTime }}</td>
                        <td>{{ instance.timeSpan }}</td>
                        <td>{{ instance.date }}</td>                      
                        <td><a href="/admin/ContestManagement/news/?contest__id__exact={{ instance.id }}">News</a></td>                       
                {% endfor %} 
```

现在，当我单击此链接时，它会根据我的需要显示带有此特殊竞赛 ID 的新闻列表。现在我想知道我如何在这个模板中理解（用比赛 id 过滤的 change_list），这个页面中的比赛 id 是什么，以向这个比赛 id 添加新闻，我有什么做的？（因为当前的 url 是：/admin/ContestManagement/news/add/ ![<code>在此输入图片说明</code>](../Images/b6755682b7fa239e071ea41566f20c3b.png) 我在模板中试过`{{request}}`，但它是空的！！非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:15:52.810

如果为空，则必须在*settings.py*的**TEMPLATE_CONTEXT_PROCESSORS**中`{{request}}`添加**django.core.context_processors.request**

 ***请参阅：[https ://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)***

# jquery - HTML5, jQuery, ... >> 流畅的触摸兼容拖放/输入范围滑块解决方案有人吗？

> ID：15380062
> 
> 赞同：2
> 
> 时间：2013-03-13T08:19:01.827
> 
> 标签：jquery, html, drag-and-drop, slider, touch

任何人都可以帮助并推荐基于拖放的 UI 元素的触摸兼容解决方案吗？

我目前正在寻找类似于 `HTML5 input range` 或 [http://jqueryui.com/slider](http://jqueryui.com/slider)的输入范围滑块。

虽然原生 HTML5 造成了太多麻烦（在旧浏览器和触摸屏上），但我会选择 jQuery。到目前为止，一切都很好——但是 jQuery 拖放事件的整体性能并不令人满意，因为拖动对象时总是存在某种延迟。在滑块示例中，光标（和/或触摸设备上的手指）总是在前面几个像素，尤其是在进行快速移动时。

是否有任何替代品，插件，黑客，......在那里，这可能会有所帮助？或者有什么方法可以加快 jQuery 的拖放功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T05:04:01.867

锤子.js，也许： [http ://eightmedia.github.io/hammer.js/](http://eightmedia.github.io/hammer.js/)

尝试在网站的窗口上做一个幻灯片（用鼠标或手指），希望它能回答

# java - 将项目（jar）导入 Eclipse

> ID：15380065
> 
> 赞同：8
> 
> 时间：2013-03-13T08:19:17.457
> 
> 标签：java, eclipse, jar, import, package

我有一个需要导入 Eclipse 的 .jar 文件。但是，我不想将 jar 作为引用库。我需要像“普通”项目一样包含 .jar，包含包（！）和 .java 文件。

我尝试执行以下操作：新建 Java 项目 -> 导入 -> 常规 -> 存档文件。在这种情况下，当我将此 jar 也作为引用库放置时，它会被导入但带有 .class 文件。

新建 Java 项目 -> 导入 -> 常规 -> 文件系统。导入 .java 文件，但包丢失并且是普通文件夹。此外，文件有些奇怪，因为图标中的“j”看起来不同，并且没有注意到错误（没有下划线）

将“现有项目导入工作区”根本不起作用，它说没有项目。我还尝试在解压缩后将 jar 作为 zip 导入，这给了我 -java 文件，但它破坏了包。

有谁知道如何正确导入这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T08:31:49.900

我以这种方式管理它：新 Java 项目 -> Java 设置 -> 源 -> 链接源（源文件夹）。在那里我添加了我的反编译 jar 并且它被正确导入:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-20T16:33:31.437

您也可以创建一个新的 Java 项目，然后执行 File -> Import -> General -> Archive File。这将为您节省解压缩 jar 并添加为链接源文件夹的步骤。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T08:21:30.527

您不能以这种方式导入 jar，除非它在 ​​jar 中打包了源代码。如果您真的需要源代码，则必须在某处找到存档。但当然，并不是每个人都愿意分享他的消息来源……

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-11T05:33:15.693

我尝试了以下方法，它奏效了。

1.  创建一个新的 Java 项目
2.  转到`File`> `Import`> `General`>`Archive File`
3.  `.jar`从本地系统中选择所需的存档文件（在这种情况下）。
4.  选择您在步骤 1 中创建的项目，然后单击`Ok`

这将为您节省解压缩 jar 的步骤，但如果有`.class`文件，eclipse 不会将它们转换为`.java`文件。这必须单独进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-12T17:30:42.247

以下有助于所有最近的日食。

请尝试以下 eclipse 插件将 jar 导入为项目：

Step 1) Eclipse Help > Eclipse Marketplace
Step 2) 安装插件“Import Jar As Project”
Step 3) 重启 Eclipse
Step 4) File->Import->Other->Jar without source
Step 5) 选择一个jar/war文件并点击完成

将从 jar 中创建新项目

[https://marketplace.eclipse.org/content/import-jar-project](https://marketplace.eclipse.org/content/import-jar-project)

谢谢你。

# java - setSelection 不适用于 Horizo ntalScrollView 内 FrameLayout 内的 gridView

> ID：15380068
> 
> 赞同：1
> 
> 时间：2013-03-13T08:19:27.697
> 
> 标签：java, android

这是我用于创建水平网格视图的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/change_frame_scrollview" 
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent" >
            <GridView
                android:id="@+id/change_frame_gridview"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:stretchMode="columnWidth"
                android:scrollbars="horizontal"
                android:padding="10dp" />
    </FrameLayout>
</HorizontalScrollView> 
```

以下是如何在 Activity 中实现：

```
gridView = (GridView) v.findViewById(R.id.change_frame_gridview);
gridView.setAdapter(adapter);
gridView.setNumColumns(adapter.getCount());
gridView.setOnItemClickListener(this);
FrameLayout.LayoutParams params  = new FrameLayout.LayoutParams(
        (adapter.getItemWidth() + FrameThumbnailAdapter.ITEM_MARGIN) * adapter.getCount(),
            LayoutParams.WRAP_CONTENT);
gridView.setLayoutParams(params);
gridView.requestFocus();
gridView.setSelection(10);
adapter.notifyDataSetChanged(); 
```

但是 selection(10) 不起作用。

# python - 字典列表的列表列表

> ID：15380073
> 
> 赞同：4
> 
> 时间：2013-03-13T08:19:50.587
> 
> 标签：python, list, dictionary

如何将列表列表转换为字典列表？

更具体地说：我该怎么做：

```
[['a1', 'b1', 'c1', 'd1', 'e1', 'f1', 'g1', 'h1', 'i1'], ['a2', 'b2', 'c2', 'd2', 'e2', 'f2', 'g2', 'h2', 'i2'], ['a3', 'b3', 'c3', 'd3', 'e3', 'f3', 'g3', 'h3', 'i3'], ['a4', 'b4', 'c4', 'd4', 'e4', 'f4', 'g4', 'h4', 'i4'], ['a5', 'b5', 'c5', 'd5', 'e5', 'f5', 'g5', 'h5', 'i5'], ['a6', 'b6', 'c6', 'd6', 'e6', 'f6', 'g6', 'h6', 'i6'], ['a7', 'b7', 'c7', 'd7', 'e7', 'f7', 'g7', 'h7', 'i7'], ['a8', 'b8', 'c8', 'd8', 'e8', 'f8', 'g8', 'h8', 'i8'], ['a9', 'b9', 'c9', 'd9', 'e9', 'f9', 'g9', 'h9', 'i9']] 
```

对此：

```
[{'a1': None, 'b1': None, 'c1': None, 'd1': None, 'e1': None, 'f1': None, 'g1': None, 'h1': None, 'i1': None}, #etc 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-13T08:22:17.530

```
In [20]: l = [['a1', 'b1', 'c1', 'd1', 'e1', 'f1', 'g1', 'h1', 'i1'], ['a2', 'b2', 'c2', 'd2', 'e2', 'f2', 'g2', 'h2', 'i2'], ['a3', 'b3', 'c3', 'd3', 'e3', 'f3', 'g3', 'h3', 'i3'], ['a4', 'b4', 'c4', 'd4', 'e4', 'f4', 'g4', 'h4', 'i4'], ['a5', 'b5', 'c5', 'd5', 'e5', 'f5', 'g5', 'h5', 'i5'], ['a6', 'b6', 'c6', 'd6', 'e6', 'f6', 'g6', 'h6', 'i6'], ['a7', 'b7', 'c7', 'd7', 'e7', 'f7', 'g7', 'h7', 'i7'], ['a8', 'b8', 'c8', 'd8', 'e8', 'f8', 'g8', 'h8', 'i8'], ['a9', 'b9', 'c9', 'd9', 'e9', 'f9', 'g9', 'h9', 'i9']]

In [21]: map(dict.fromkeys, l)
Out[21]: 
[{'a1': None,
  'b1': None,
  'c1': None,
  'd1': None,
  'e1': None,
  'f1': None,
  'g1': None,
  'h1': None,
  'i1': None},
 {'a2': None,
  'b2': None,
  'c2': None,
  'd2': None,
   ... 
```

这将适用于任何可迭代的可迭代对象，而不仅仅是列表列表（当然，前提是二级元素是可[散列](http://docs.python.org/2/glossary.html#term-hashable)的）。

在 Python 2 中，上述代码返回一个列表。

在 Python 3 中，它返回一个可迭代对象。如果你需要一个列表，你可以使用`list(map(dict.fromkeys, l))`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T08:22:54.170

试试这个：

```
l = [['a1', 'b1', 'c1', 'd1', 'e1', 'f1', 'g1', 'h1', 'i1'], ['a2', 'b2', 'c2', 'd2', 'e2', 'f2', 'g2', 'h2', 'i2'], ['a3', 'b3', 'c3', 'd3', 'e3', 'f3', 'g3', 'h3', 'i3'], ['a4', 'b4', 'c4', 'd4', 'e4', 'f4', 'g4', 'h4', 'i4'], ['a5', 'b5', 'c5', 'd5', 'e5', 'f5', 'g5', 'h5', 'i5'], ['a6', 'b6', 'c6', 'd6', 'e6', 'f6', 'g6', 'h6', 'i6'], ['a7', 'b7', 'c7', 'd7', 'e7', 'f7', 'g7', 'h7', 'i7'], ['a8', 'b8', 'c8', 'd8', 'e8', 'f8', 'g8', 'h8', 'i8'], ['a9', 'b9', 'c9', 'd9', 'e9', 'f9', 'g9', 'h9', 'i9']]
res = []
for line in l:
    res.append(dict((k, None) for k in line)) 
```

或者：

```
res = [dict((k, None) for k in line) for line in l] 
```

# android - Android图库意图（startActivityForResult）后退按钮错误

> ID：15380084
> 
> 赞同：2
> 
> 时间：2013-03-13T08:20:38.833
> 
> 标签：android, android-intent, gallery

我使用此代码，如果单击按钮，则会调用图库。但是，当我单击图库上的后退按钮时，`NullPointerException`会发生。我怎么解决这个问题？请帮我。我想这是因为我使用了`startActivityForResult`，但没有结果。但我找不到如何解决这个错误？

```
 plusButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

                Intent intent = new Intent(Intent.ACTION_PICK);

                intent.setType("image/*");
                intent.setData(android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(intent, REQ_GALLERY); 
                onResume();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:36:42.663

请改用以下代码：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),PICK_IMAGE); 
```

# c# - 左/右连接与查询中的多个连接

> ID：15380086
> 
> 赞同：4
> 
> 时间：2013-03-13T08:20:40.890
> 
> 标签：c#, .net, linq

我有一个参考表，在这个表中有 3 个字段（`Id`, `User1`, `User2`）。该字段`User2`可以为空，但不使用时我们使用 0。

当我执行下面的 Linq 查询时，其中的记录`User2 == 0`不是结果的一部分。

在这种情况下如何进行左/右连接？

```
class MyReference
{
    public int Id { get; set; }
    public int User1 { get; set; }
    public int User2 { get; set; }
}

class User
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

class MyClassResult
{
    public int Id { get; set; }
    public string U1FirstName { get; set; }
    public string U2FirstName { get; set; }
}

var result =
    (from myReference in context.MyReference
     join u1 in context.USER on myReference.User1 equals User.Id
     join u2 in context.USER on myReference.User2 equals User.Id
     select new MyClassResult
     {
         Id = myReference.Id,
         U1FirstName = u1.FirstName,
         U2FirstName = u2.FirstName
     }).ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:00:16.030

您必须使用`into`关键字和[`DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb494243.aspx)获取空元素：

```
var result = (from myReference in context.MyReference
                join u1 in context.USER on myReference.User1 equals u1.Id
                join u2 in context.USER on myReference.User2 equals u2.Id into x2
                from un2 in x2.DefaultIfEmpty()
                select
                    new MyClassResult {
                        Id = myReference.Id, 
                        U1FirstName = u1.FirstName, 
                        U2FirstName = un2 != null ? un2.FirstName : null
                    }); 
```

作为替代方案，特别是如果`myReference.User1`可以的话`0`，您可以`let`在最终选择之前使用关键字来获取用户信息：

```
var result = (from myReference in context.MyReference
            let u1 = users.FirstOrDefault(u => u.Id == myReference.User1)
            let u2 = users.FirstOrDefault(u => u.Id == myReference.User2)
            select
            new MyClassResult {
                Id = myReference.Id,
                U1FirstName = u1 != null ? u1.FirstName : null,
                U2FirstName = u2 != null ? u2.FirstName : null
            }); 
```

# android - 如何从 sharedpreferences 中获取价值并将其保存为 arraylist

> ID：15380089
> 
> 赞同：-2
> 
> 时间：2013-03-13T08:20:53.013
> 
> 标签：android, arraylist, sharedpreferences

如何从共享偏好中获取价值并将其保存为数组列表

我想从共享首选项中获取字符串，以便将该字符串保存到数组列表

```
SharedPreferences keyValues = context.getSharedPreferences("name_icons_list", context.MODE_PRIVATE);
    if(keyValues.getString(""+str,"").equals("true"))

    {

        holder.tb1.setChecked(true);
        onApps.add(str);
        System.out.println("Block appp+++++"+onApps);
        System.out.println("******************************************");
        System.out.println("data retrive from database"+ position);
        System.out.println("******************************************");       

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:35:47.270

您可以使用此代码将首选项保存在 arraylist 中，反之亦然

```
public String[] getApplicationList() {   Log.i("test","prefrence getapplist");
           return mApplicationList;
   }
   public void saveApplicationList(String[] applicationList) {  Log.i("test","prefrence saveapplist");
           mApplicationList = applicationList;
           String combined = "";
           for (int i=0; i<mApplicationList.length; i++){
                   combined = combined + mApplicationList[i] + ";";
           }
           mPref.edit().putString(PREF_APPLICATION_LIST, combined).commit();
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:33:41.020

我相信这应该可以解决问题：

```
String savedString = context.getSharedPreferences(FILE_NAME, Context.MODE_PRIVATE)
            .getString("name_icons_list", "");
    StringTokenizer st = new StringTokenizer(savedString, ",");
    int numberOfToken = st.countTokens();
    ArrayList<String> arraylist = new ArrayList<String>();
    for (int i = 0; i < numberOfToken; i++) {
        arraylist.add(st.nextToken());
    } 
```

# javascript - 初始化布局和异步加载

> ID：15380090
> 
> 赞同：0
> 
> 时间：2013-03-13T08:20:55.573
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

目前，我正在通过`data.js`Grid 应用程序模板提供的异步加载数据。由于 StorageFile 类的异步特性，在设置全局 WinJS 命名空间之前`groupedItems.js`（“Hub”页面）`_initializeLayout`在处理程序中调用的位置存在问题。`ready``Data`

在`data.js`：

```
fileNames.forEach(function (val, index, arr) {
    var uri = new Windows.Foundation.Uri('ms-appx:///data/' + val + '.geojson');

    Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri).then(function (file) {

        Windows.Storage.FileIO.readTextAsync(file).then(function (contents) {

            // ... read, parse, and organize the data ...

            // Put the data into the global namespace
            WinJS.Namespace.define("Data", {
                items: groupedItems,
                groups: groupedItems.groups,
                getItemReference: getItemReference,
                getItemsFromGroup: getItemsFromGroup,
                resolveGroupReference: resolveGroupReference,
                resolveItemReference: resolveItemReference
            });
        });
    });
} 
```

在`groupedItems.js`：

```
 // ...

 // This function updates the ListView with new layouts
    _initializeLayout: function (listView, viewState) {
        /// <param name="listView" value="WinJS.UI.ListView.prototype" />

        if (viewState === appViewState.snapped) {
            listView.itemDataSource = Data.groups.dataSource;
            listView.groupDataSource = null;
            listView.layout = new ui.ListLayout();
        } else {
            listView.itemDataSource = Data.items.dataSource;
            listView.groupDataSource = Data.groups.dataSource;
            listView.layout = new ui.GridLayout({ groupHeaderPosition: "top" });
        }
    },

 // .... 
```

看到我无法将此代码从该文件移出到`done()`Promise in 的函数中`data.js`，如何让应用程序等到`Data`在初始化布局之前在 WinJS 命名空间中初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:44:40.353

您有两个正在进行的异步操作（加载数据和加载页面）和一个操作（初始化网格），只有在两个异步操作完成（加载页面，数据可用）后才需要执行。有很多方法可以解决这个问题，具体取决于您要采用的架构方法。

1.  蛮力方法是您创建一个新函数来检查文档是否已准备好和数据是否已加载，如果是，则调用`_initializeLayout()`. 然后，您在两个地方（加载文档的地方和数据可用的地方）调用该函数，并且只有在两个条件都满足时才会执行。看来您可以通过检查全局`Data`项及其相关属性的存在来判断数据是否已加载。

2.  还有更多涉及的解决方案在架构上更简洁。例如，在您的文档就绪处理程序中，您可以检查数据是否可用。如果是，您只需初始化布局。如果不是您安装通知，以便当数据可用时，您的回调将被调用，然后您可以初始化布局。如果数据加载代码当前没有通知方案，那么您创建一个可供任何希望在数据加载后调用的客户端使用的方案。与第一种方法相比，这具有优势，因为数据加载代码不必了解有关网格的任何信息。网格确实必须了解数据——这是有道理的，因为网格需要数据。

3.  当然也有一些方法可以使用 promise/done 系统来做到这一点，尽管我个人对它不够熟悉，无法建议使用它的好方法。

# delphi - Twebconnection 方法不允许错误 windows server 2008 R2

> ID：15380091
> 
> 赞同：1
> 
> 时间：2013-03-13T08:20:55.660
> 
> 标签：delphi, datasnap

我有一个安装的 Delphi 应用程序服务器，`windows server 2008 R2` 我已经在 Windows 组件服务中注册了 dcom 对象。

当我通过 tsocketconnection 连接到应用程序服务器时，我可以正常连接，没有任何问题，并且我的客户端应用程序运行良好。当我尝试通过 Twebconnection 连接到应用程序服务器时，出现错误： `"method not allowed error"` 我已在其中添加了一个脚本虚拟目录`iis 7.5`并添加`httpsrvr.dll`到该目录中

但仍然无法从客户端连接。

# ios6 - MFMessageComposeViewController 在 4" 屏幕上不是全屏

> ID：15380093
> 
> 赞同：0
> 
> 时间：2013-03-13T08:20:59.127
> 
> 标签：ios6, sms

我正在制作一个 iPhone 应用程序，在这个应用程序中用户可以发送短信。在我的 iPhone 4 上，我的屏幕很完美，但在我的 iPhone 5 上，我得到了一个空白框。

仅限 iPhone。iOS 6x

**截图（iphone5）：[http :](https://i.stack.imgur.com/ZOqu1.png) **//i.stack.imgur.com/ZOqu1.png****

 **![在此处输入图像描述](../Images/1299dc841a2e18922665760fea8ef8d5.png)

```
#import "smsview.h"

@interface smsview ()

@end

@implementation smsview

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    [self dismissModalViewControllerAnimated:YES];

    if (result == MessageComposeResultCancelled)
        NSLog(@"Message cancelled");
    else if (result == MessageComposeResultSent)
        NSLog(@"Message sent");
    else
        NSLog(@"Message failed");
}

- (void)sendSMS:(NSString *)bodyOfMessage recipientList:(NSArray *)recipients
{
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = bodyOfMessage;
        controller.recipients = recipients;
        controller.messageComposeDelegate = self;
        [self presentModalViewController:controller animated:YES];
    }
}

-(IBAction)Text:(id)sender
{
    {
        [self sendSMS:@"" recipientList:[NSArray arrayWithObjects:@"+1-234-567-8910", nil]];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:44:53.273

如果您失败，请按照以下步骤操作。

1.  [如果不从这里](http://itunes.apple.com/us/app/xcode/id497799835?mt=12)下载，您使用的是最新版本的 Xcode 。

2.  您可以使用自动布局功能并使用 iPhone 5 屏幕分辨率创建设计，它适用于 4" 和 3.5" 设备，但在这种情况下，您应该对布局管理器有足够的了解。

3.  为您的应用设置 4 英寸的启动图像。这就是您获得 1136 像素屏幕高度的方式（没有它，您将获得 960 像素，顶部和底部有黑色边距），为了使您的应用程序适应新的更高屏幕，您要做的第一件事是将启动图像更改为：默认 568h@2x.png。它的大小应为 1136x640 (HxW)。是的，在新的屏幕尺寸中使用默认图像是让您的应用程序占据整个新 iPhone 5 屏幕的关键。

4.  如果您正确设置了自动调整大小的蒙版，希望一切正常。

5.  如果您没有这样做，请使用适当的自动调整大小掩码调整您的视图布局，或者如果您只想支持 iOS 6，请查看 Auto Layout。

6.  如果您必须专门为更大的屏幕做一些事情，那么看起来您必须检查`[[UIScreen mainScreen] bounds]`（或 applicationFrame，但如果它存在，则需要考虑状态栏高度）的高度，因为似乎没有特定的 API那。

例如：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    //iPhone 4 specific
} else {
    //iPhone 5 specific
} 
```

希望这能解决您的问题。**

# iphone - Apple 提交规则和规定（SIM 卡数据访问）

> ID：15380097
> 
> 赞同：4
> 
> 时间：2013-03-13T08:21:16.170
> 
> 标签：iphone, app-store, user-data

我对访问设备 SIM 卡数据（例如 SIM 序列号和用户电话号码）进行了大量研究，以下是我的发现：

*   通过使用 iOS SDK 的私有 API，我们可以从 SIM 卡中提取所需的信息（如果已经存储在 SIM 卡上）。
*   该问题与提交应用程序的规则和规定有关。在苹果商店，由于苹果拒绝任何访问 SIM 卡的应用程序，因为他们认为这种行为会破坏用户的隐私和安全。
*   此功能用于未参加 APPStore 提交的应用程序。

参考 ：

*   [如何在 iPhone 中读取 SIM 卡中的信息？](https://stackoverflow.com/questions/7700833/how-could-i-read-information-from-sim-card-in-iphone)

*   [在 iPhone OS 4.0 中以编程方式获取自己的电话号码](https://stackoverflow.com/questions/4544803/programatically-get-own-phone-number-in-iphone-os-4-0)

*   [如何获取我的 iPhone 设备的电话号码？](https://stackoverflow.com/questions/6041605/how-can-i-get-the-phone-number-of-my-iphone-device)

*   [读/写 SIM 卡上的证书 - iOS](https://stackoverflow.com/questions/12705603/read-write-certificates-on-a-sim-card-ios)

我发现的所有帖子和教程都说我无法从设备 SIM 卡中提取数据而不会面临苹果拒绝！

我的问题是，有什么方法可以访问 SIM 卡信息并在 Appstore 上成功发布我的应用程序？我感谢任何提及苹果提交规则和法规文件中“没有 SIM 卡数据访问”的部分！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:32:03.660

我的问题是，有什么方法可以访问 SIM 卡信息并在 Appstore 上成功发布我的应用程序？- 不，没有办法。文档中没有直接引用“No Sim Card Data”。

由于您已经阅读过 SIM 卡数据，因此无法使用 Apple SDK 访问。以下是 Apple Developer Document 的一部分：

> 以下指南可以帮助您以让人们感到舒适的方式请求用户数据。
> 
> 确保用户了解他们被要求分享个人数据的原因。如果人们没有看到明显的需要，他们很自然地会怀疑他们的个人信息请求。为避免让用户感到不舒服，请确保仅在他们尝试使用明显需要了解其信息的功能时才显示警报。例如，当位置服务关闭时，人们可以使用地图，但当他们访问查找和跟踪其当前位置的功能时，他们会看到警报。
> 
> 如果信息不明显，请描述您的应用需要这些信息的原因。您可以提供出现在警报中的文本，位于系统提供的标题下方，例如““应用程序名称”希望访问您的联系人”。您希望此文本具体而有礼貌，以便人们理解您为什么要求访问他们的信息并且不会感到压力。你的理由文本应该：
> 
> 不包括您的应用名称。系统提供的警报标题已包含您的应用名称。清楚地描述您的应用为什么需要这些数据。如果合适，您还可以说明您的应用程序不使用数据的方式。使用以用户为中心的术语并进行本地化。尽可能简短，同时仍然易于理解。尽可能避免提供超过一个句子。使用句子风格的大写。（句式大写意味着第一个单词大写，其余单词小写，除非它们是专有名词或专有形容词。）仅当您的应用在没有用户的情况下无法执行其主要功能时才在应用启动时请求许可数据。如果您的应用程序的主要功能显然取决于了解他们的个人信息，那么人们不会对此感到困扰。
> 
> 避免在用户实际选择需要数据的功能之前进行触发警报的程序调用。通过这种方式，您可以避免让人们想知道为什么您的应用在执行看似不需要的事情时需要他们的个人信息。（请注意，获取用户的位置服务首选项不会触发警报。）
> 
> 对于位置数据，请检查位置服务首选项以避免不必要地触发警报。您可以使用 Core Location 编程接口来获取此设置（要了解如何执行此操作，请参阅 Core Location Framework Reference）。有了这些知识，您就可以尽可能接近需要位置信息的功能触发警报，或者完全避免警报。

你可以参考[这个](https://stackoverflow.com/questions/193182/programmatically-get-own-phone-number-in-iphone-os)

# testing - MonkeyTalk 字符串索引超出范围错误

> ID：15380101
> 
> 赞同：2
> 
> 时间：2013-03-13T08:21:22.733
> 
> 标签：testing, monkeytalk

我是monkeytalk IDE的新手。我正在使用 Ubuntu 12.04 并使用 monkeytalk 最新版本作为测试工具来测试 ios 应用程序。我创建了一个用于测试的脚本。但是当我要保存脚本文件时，它会显示以下错误。

```
Save Failed String index out of range: -1 
```

谁能帮我解决这个问题。任何帮助都是可观的。

# jenkins - 詹金斯：在同一个项目中对每次提交进行测试并在点击时发布

> ID：15380103
> 
> 赞同：0
> 
> 时间：2013-03-13T08:21:26.283
> 
> 标签：jenkins, continuous-integration

1）我想在每次提交时运行我的测试套件，所以 Jenkins 应该轮询 SVN，进行更新并运行测试。这可能没有问题，但是......

2）我还希望能够创建构建，其中还包括创建 zip 存档并通过 scp 将它们传输到远程服务器。

这怎么可能在同一个项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:24:00.903

你检查过[Jenkins SCP 插件](https://wiki.jenkins-ci.org/display/JENKINS/SCP+plugin)吗？您可以在现有项目本身中添加一个额外的构建步骤，用于创建您的构建、生成 zip 档案等。最后作为构建后操作将工件发布到 SCP 存储库。那会有帮助吗？

# linq - 将新实体属性设置为 ObjectContext 中现有实体的属性

> ID：15380104
> 
> 赞同：0
> 
> 时间：2013-03-13T08:21:28.180
> 
> 标签：linq, entity-framework, objectcontext

我创建了一个新的实体对象：

```
 mplToCreate = this._context.MasterPartsList.CreateOBject(); 
```

然后，我想将 设置为我尝试使用以下表达式`parentPnID`查询的现有项目的属性：`IQueryable`

```
mplToCreate.parentPnID = this._context.MasterPartNumbers.FirstOrDefault(x => x.pn == this._selectedItem.Pn).pnID; 
```

但我`NullReferenceException`在那条线上得到了一个。（我知道存在一个符合这个逻辑的 in 。`pnID`）`MasterPartNumbers`

请帮我纠正我的右手表达，以便我可以相应地设置属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:38:31.207

这是一个错字，还是问题所在？

```
// assignment
FirstOrDefault(x => x.pn = this._selectedItem.Pn)

// equality
FirstOrDefault(x => x.pn == this._selectedItem.Pn) 
```

# django - 使用 Django Query 过滤项目

> ID：15380107
> 
> 赞同：0
> 
> 时间：2013-03-13T08:21:40.723
> 
> 标签：django, algorithm, orm, filter

我遇到了这个问题，想寻求你的帮助。

背景：我有一袋球，每个球都有一个年龄（红色和蓝色）和颜色属性。

我想要的是获得前 10 个“最年轻”的球，并且最多有 3 个蓝球（这意味着如果 10 个最年轻的球列表中的蓝球超过 3 个，则将“redudant”最旧的蓝球替换为最年轻的红球）

要获得前 10 名：

```
sel_balls = Ball.objects.all().sort('age')[:10] 
```

现在，为了也满足“最多3个蓝球”的条件，我需要进一步处理：

1.  遍历 sel_balls 并计算蓝球的数量（= B）
2.  如果 B <= 3：什么都不做
3.  否则：获得额外的 B - 3 个红球来代替最旧的 (B - 3) 个蓝球（并且这些红球必须没有出现在已经取出的原始 10 个球中）。我想我可以通过获取红球列表中最旧的年龄值来做到这一点，并执行另一个查询，例如：

    add_reds = Ball.objects.filter(age >= old_sel_age)[: B - 3]

我的问题是：

1.  有什么方法可以让我只在一个查询中满足约束？
2.  如果我必须进行 2 次查询，有没有比我上面提到的一种方法更快的方法？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:45:32.533

你应该使用注释来做到这一点。请参阅[文档](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#order-of-annotate-and-filter-clauses)。

`.filter()`之前`.annotate()`给出'WHERE'

`.filter()`在`.annotate()`给出'HAVING'之后（这就是你需要的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:15:47.650

使用 Q 对数据库进行复杂查询：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)

# php - 使用 Cpdf（又名 Cezpdf 或 R&O 的 PDF 创建）生成的 PDF 中未显示（隐藏）粗体/斜体文本

> ID：15380108
> 
> 赞同：1
> 
> 时间：2013-03-13T08:21:42.930
> 
> 标签：php, pdf, pdf-generation

生成的 PDF 中不显示粗体和斜体文本。

```
$pdf = new Cezpdf(); 
$pdf->addText(65,675,10, '<b>Hidden</b> Shown');
// Doing more stuff to the PDF ...
$pdf->output(); 
```

输出中不显示粗体字“隐藏”。常规单词“Shown”显示在输出中。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:25:30.547

问题似乎是因为底层 Cpdf 类处理文本的方式不同，这取决于是否存在像“b”这样的控制指令。

替换 Cpdf.php 中的 2908 和 2909 行：

```
$this->addContent(' /F'.$this->currentFontNum.' '.sprintf('%.1f',$size).' Tf ');
$this->addContent(' ('.$this->filterText($part, false).') Tj'); 
```

使用以下三行：

```
$place_text = $this->filterText($part, false);
$this->addContent(" /F$this->currentFontNum ".sprintf('%.1F Tf ', $size));
$this->addContent(" [($place_text)] TJ"); 
```

现在显示了控制指令中的文本。

# java - 创建ejb项目时可以生成的“客户端ejb”模块的目的是什么？

> ID：15380110
> 
> 赞同：1
> 
> 时间：2013-03-13T08:22:01.083
> 
> 标签：java, jakarta-ee, client, ejb

正如标题所说，即使通过搜索，我也无法弄清楚创建 ejb 项目时可以生成的“ejb 客户端”模块的用途，谁能给我一个提示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:43:59.593

引用 Netbeans IDE 文档：

> Java EE 应用程序客户端是一个独立的应用程序，它被配置为作为 Java EE 企业应用程序的一部分工作。任何 Java 应用程序都可以访问远程 EJB 方法和 Web 服务，因此您不必创建 Java EE 应用程序客户端来访问您的企业应用程序。从企业应用程序客户端访问企业应用程序的优势在于，应用程序客户端可以访问企业应用程序服务器上运行的服务和功能，而常规 Java 应用程序则不能。例如，您可以为企业应用程序客户端配置安全角色和权限。

所以它只是一个普通的 Java 应用程序，可以在应用程序服务器中运行，访问 EJB，就像在普通的 Java 独立应用程序中一样，甚至是应用程序服务器服务。

# c++ - 适用于 Windows 的 C++ 动态代码分析工具

> ID：15380114
> 
> 赞同：3
> 
> 时间：2013-03-13T08:22:10.463
> 
> 标签：c++, visual-studio, dynamic-analysis

我正在寻找一种在 VS for C++ 中运行时检测（内存泄漏、内存损坏、...）的工具

我发现了这个：[C++ 的动态代码分析](https://stackoverflow.com/questions/4933699/dynamic-code-analysis-c)

不幸的是，它们中的大多数都在 linux 下运行，所以我要求运行 VS 或至少适用于 Windows 的工具

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T14:22:49.983

我所知道的 Windows 平台最好的工具是[DrMemory](http://www.drmemory.org/)。

它运行速度很快，并且在我的关键/遗留 MFC C++ 代码中帮助了我很多，即使它目前仅针对 32 位应用程序。

让我知道你最喜欢的参数！我建议您从简单的“-top_stats -light”开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T06:13:02.910

我也一直在寻找这个问题的答案。

我发现的一个是[DevPartner Bounds Checker](http://www.borland.com/Products/Software-Testing/Automated-Testing/Devpartner-Studio)（该链接适用于 DevPartner Studio。但是，可以只购买边界检查器组件）。我能够从中获得一些不错的结果，但我也遇到了它的检测工具在我的特定代码库上崩溃的问题。他们的技术支持非常糟糕。YMMV。

另一个是[Parasoft Insure++](http://www.parasoft.com/product/insure/)。这个工具已经存在了很长时间，并且演示看起来不错。我还没有太多时间使用它，但它似乎充满希望。

这两个都是具有销售团队和技术支持的商业产品。价格往往与推销员协商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:29:01.313

我建议您查看[Runtime Checker](http://www.runtimechecker.com/)。它旨在帮助检测 Windows C++ 应用程序中的内存泄漏。

# sql - Oracle SQL 通过其 ascii 值搜索或查找字符

> ID：15380115
> 
> 赞同：1
> 
> 时间：2013-03-13T08:22:15.440
> 
> 标签：sql, oracle

我的挑战是在多个表中找到某些字符。

在我的工作中，数据库设置为将所有日期值保存在名为 d_date、d_inserteby_id、d_valid_to 等的列中。但下划线是 SQL 权限中的保留字符，因此像 '%D_%' 这样的直截了当不起作用。

因此，当我查找包含对日期的引用的行时，我必须比 '%D_%' 更有创意

我知道我可以： `select * from table t where Upper(T.column) like '%D_%' escape '\'`

但是如何使用它的 ascii 值搜索那个 d 和下划线呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T09:45:00.113

您无法在表中搜索列名，如果您的架构经常更改，则必须查看数据字典并使用动态 SQL。

你可以 ...

```
select table_name,
       column_name
from   all_tab_columns
where  owner = ? -- insert name of table owner
and    upper(column_name) like 'D\_%' escape '\' 
```

在搜索中使用 D 的 ASCII 值没有任何好处——它只会混淆代码。LIKE 和 ESCAPE 是正确的方法。

顺便说一句，在 Oracle 中使用大小写混合的对象名称被认为是一种不好的做法。

编辑：当然，如果您真的想通过 ASCII 字符搜索字符串，那么您可以执行以下操作：

```
where ascii(substr('D_123',1,1))=68 and
      ascii(substr('D_123',2,1))=95 
```

或者

```
where ascii(substr('D_123',1,1))||ascii(substr('D_123',2,1))='6895' 
```

或者

```
where substr(dump(substr('D_123',1,2)),-6) = ' 68,95' 
```

与以往一样，有很多方法以错误的方式做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:04:37.857

我仍然不确定你为什么要使用 ASCII 值而不是文字下划线，但也许这就是你想要的（95 是 '_' 的 ASCII 代码）：

```
 select * 
  from t 
  where upper(t.column1) like '%D\' || chr(95) || '%' escape '\' 
```

请注意，如果您尝试将 95 替换为例如 65（对于“A”），这将引发错误，因为您无法转义普通字符。

要处理这个问题，您需要某种逻辑来区分正常字符和必须转义的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:03:55.600

@Shogoot：如果我对您的理解正确，您希望能够搜索具有任何列的任何 ROW 的任何表，该列具有您的搜索字符串的值。

如果以上是正确的假设，我认为您唯一的解决方案是使用 PL/SQL 块，如下所示：

```
DECLARE

    -- Find tables that have the right type of columns
    CURSOR cur IS
        SELECT  atc.owner
                ,atc.table_name
                ,atc.column_name
        FROM    all_tab_columns atc
        WHERE   atc.data_type IN ('VARCHAR2', 'CHAR', 'DATE')
        AND     owner IN ('OE')
        ;

    vTestString VARCHAR2(250) := CHR(45); -- CHR(45) = '-'      
    iCount      INTEGER := 0;
    vStatement  VARCHAR2(2000) := '';
BEGIN

    -- Loop through tables and columns 
    FOR rec IN cur LOOP
        BEGIN
            -- Find tables that have the right type of columns
            vStatement  :=  'SELECT COUNT(*) '
                            || 'FROM ' || rec.owner || '.' || rec.table_name || ' '
                            || 'WHERE ' || rec.column_name || ' LIKE ''%' || vTestString || '%'' '
                            ;

            --dbms_output.put_line(vStatement);
            EXECUTE IMMEDIATE vStatement
            INTO iCount
            ;

            IF (iCount > 0) THEN
                dbms_output.put_line('Found ' || iCount || ' matches in: ' || rec.owner || '.' || rec.table_name || '.' ||  rec.column_name);
            END IF;     
        EXCEPTION
            -- Oops, we might end here if there is an error
            WHEN OTHERS THEN
                dbms_output.put_line('Something messed up with: ' || rec.owner || '.' || rec.table_name || '.' ||  rec.column_name || '(' || SQLERRM || ')');
        END;
    END LOOP;
END; 
```

您必须将搜索字符串更改为您需要的任何内容。上面的查询基于 Oracle 的 OE 模式，您必须调整“cur”查询以满足您的需要。

另外，请记住，您可能会搜索大量数据，因此请根据自己的舒适度使用它。

希望这可以帮助。

〜TJ

# javascript - 从 .NET 服务 AJAX 调用在 JS 中格式化日期

> ID：15380118
> 
> 赞同：0
> 
> 时间：2013-03-13T08:22:20.563
> 
> 标签：javascript, date

我有这个问题。我通过 AJAX 调用从 .NET 服务获取日期。得到的日期格式是这样的（我在意大利）

```
Mon Dec 31 2012 08:25:21 GMT+0100 (ora solare Europa occidentale) 
```

如何以 dd/MM/yyyy 格式格式化此日期？我不能在 .NET 服务端工作，而只能从 JS 端工作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:36:23.973

假设您的输入格式没有改变：

```
var date = "Mon Dec 31 2012 08:25:21 GMT+0100 (ora solare Europa occidentale)"
var parts = date.split(' ');
var monthMap = {"Jan": "01", "Feb": "02", "Mar": "03", "Apr": "04", "May": "05", "Jun": "06", "Jul": "07", "Aug": "08", "Sep": "09", "Oct": "10", "Nov": "11", "Dec": "12"}
var formatted = parts[2]+"/"+monthMap[parts[1]]+"/"+parts[3]

// -> 31/12/2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:36:54.827

您可以使用正则表达式来解析日期，然后将这些位重新组合成所需的格式。

```
function pad(n) {
    return (n < 10) ? ("0" + n) : n;
}

var dateString = "Mon Dec 31 2012 08:25:21 GMT+0100 (ora solare Europa occidentale)";

// I'm not sure what the Italian three letter month abbreviations are, so I've used English
var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

var m = dateString.match(/^\S{3} (\S{3}) (\d{1,2}) (\d{4})/);

var formattedDate = pad(m[2]) + "/" + pad(months.indexOf(m[1])+1) + "/" + m[3]; 
```

JSFiddle在这里：http: [//jsfiddle.net/Mhuxk/](http://jsfiddle.net/Mhuxk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:57:26.633

您可以相当轻松地解析这些位以获取日期对象，然后以您想要的任何格式创建格式化字符串。以下考虑了可能与客户端不同的时区：

```
var s = 'Mon Dec 31 2012 08:25:21 GMT+0100';

function getDate(s) {

    // Split the string into bits
    var s = s.split(/[ :]/);

    // Conversion for month to month number (zero indexed)
    var months = {jan:0,feb:1,mar:2,apr:3,may:4,jun:5,
                  jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};

    // Calculate the offset in minutes
    var offsetMins = s[7].substring(4,6) * 60;
    offsetMins += s[7].substring(6,8) * 1;
    offsetMins *= s[7].substring(3,4) == '+'? 1 : -1;

    // Build a UTC date value, allowing for the offset in minutes,
    // and pass to the Date constructor
    var date = new Date(Date.UTC(s[3], months[s[1].toLowerCase()],
               s[2], s[4], (s[5] - offsetMins), s[6]));

    // return the date object
    return date;
}

function padN(n) {
  return (n<10? '0' : '') + n;
}

var d = getDate(s);

alert(padN(d.getDate()) + '/' + padN(d.getMonth() + 1) + '/' + d.getFullYear()); 
```

# iphone - 如何仅在 iphone 应用程序中接受输入字段中的数字

> ID：15380124
> 
> 赞同：1
> 
> 时间：2013-03-13T08:22:45.367
> 
> 标签：iphone, ipad, uitextfield

我正在制作一个应用程序，我希望当用户输入任何数据时，无论用户输入什么，就像他输入 a 这样它不会接受这个输入并且在文本字段中不显示任何内容，如果它输入任何数字那么它应该接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T08:47:54.223

以下代码应该可以帮助您，这将不允许在您的文本字段中输入除数字以外的任何其他文本。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    static NSCharacterSet *charSet = nil;
    if(!charSet) {
    charSet = [[[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet] retain];
    }
    NSRange strLocation = [string rangeOfCharacterFromSet:charSet];
    return (strLocation.location == NSNotFound);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:31:46.890

为什么你这样做更好给键盘样式

```
[txtField setKeyboardType:UIKeyboardTypeNumberPad] 
```

或者你可以以编程方式进行：

```
NSString *nameRegex = @"[0-9]*";
NSPredicate *nameTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", nameRegex];
BOOL value = [nameTest evaluateWithObject:string];
if(value == YES)
    {
 // Do Somethings
    }
    else 
        {

    // Do something
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:32:00.850

您需要将 Textfield 的键盘类型设置为 Numberpad。

使用代码试试这个：（你也可以在 XIB 属性上使用界面生成器进行设置）

```
[txtFieldObj setKeyboardType:UIKeyboardTypeNumberPad]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:38:36.257

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
if (textField.tag==3)
{
    NSUInteger lengthOfString = string.length;
    for (NSInteger loopIndex = 0; loopIndex < lengthOfString; loopIndex++)
    {
        unichar character = [string characterAtIndex:loopIndex];
        if (character < 46 || character==47)
            return NO;
        if (character > 57)
            return NO;
    }
} 
```

**将标签设置为您的文本字段。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T09:58:12.823

```
 NSUInteger lengthOfString = string.length;
    for (NSInteger loopIndex = 0; loopIndex < lengthOfString; loopIndex++) {
        unichar character = [string characterAtIndex:loopIndex];
        if (character < 48) return NO; // 48 unichar for 0
        if (character > 57) return NO; // 57 unichar for 9
    } 
```

这是应该写在文本字段中的代码应该在范围内更改字符

# java - 无法在 Eclipse 中将项目添加到 Tomcat 服务器

> ID：15380125
> 
> 赞同：55
> 
> 时间：2013-03-13T08:22:48.460
> 
> 标签：java, eclipse, tomcat, jst

我无法将我的项目添加到 Eclipse 中的服务器 - 为什么？

我安装了所有必要的工具（Web Dev、Java EE、服务器适配器和 Tomcat 本身，一切）

我配置了运行时环境，将所有 Java 版本调整为 JDK 6（因为它应该在 Tomcat 6 上运行），但是在创建新服务器时，我可以添加资源的对话框左侧仍然是空的。

我还能尝试什么？

PS：我在 Windows 7 Professional 上使用[Eclipse v4.2](https://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases) (Juno)。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-13T08:27:52.717

您没有将项目创建为“动态 Web 项目”，因此 Eclipse 无法将其识别为 Web 项目。创建一个新的“Dynamic Web Project”或转到*Properties* → *Projects Facets*并检查*Dynamic Web Module*。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-09-16T10:23:05.333

1.  右键单击*Package Explorer*视图中的项目名称。
2.  选择*属性*
3.  选择*项目方面*
4.  单击*运行*时选项卡
5.  检查*服务器*
6.  点击`OK`

现在：

1.  右键单击*服务器*视图中的服务器名称
2.  单击*添加和删除...*
3.  将资源移至右列

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-06T09:11:11.613

如果您能够在 Eclipse 项目资源管理器中看到该项目，但在将项目添加到 Web 服务器时无法看到该项目，请按照项目属性 -> 项目构面，确保勾选了***动态 Web 模块***和***Java 。***

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-26T11:35:00.577

我将这个问题修复为将*动态 Web 模块*添加到*项目方面*

1.  右键单击*Package Explorer*视图中的项目名称。
2.  选择*属性*
3.  选择*项目方面*
4.  激活*动态 Web 模块*
5.  点击`OK`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-07T11:38:55.573

1.  右键单击项目
2.  转到属性 => 项目事实
3.  单击运行时选项卡
4.  检查服务器的框
5.  然后确定

关闭 eclipse 并启动服务器，您将能够看到并运行该项目。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-08T16:46:46.053

转到项目属性->**项目方面。确保选中动态 Web 模块和 Java。**

除此之外，如果“Cloud Foundry Standalone Application”已经被选中，则**需要取消选中。**默认情况下，很少有 IDE 会预先选择此选项。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-04T13:12:40.910

按照之前海报建议的步骤后，请执行以下步骤：

*   右键单击项目
*   单击*Maven*，然后单击*更新项目*
*   勾选“强制更新快照/发布”复选框，然后单击“确定”

你现在应该可以走了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-05-10T15:42:23.373

就我而言：

项目属性 →*项目方面*。确保选中“动态 Web 模块”。最后，我输入版本号“2.3”而不是“3.0”。之后，Apache Tomcat 5.5 运行时会列在*“运行时”*选项卡中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-30T12:49:30.420

我用来解决它的步骤：

1.  双击服务器选项卡中的 Tomcat 服务器。
2.  在 Runtime Environment: 旁边的下拉列表中，选择 Apache Tomcat`your version`
3.  点击保存。

现在，您应该能够在右键单击*“添加和删除”*时添加到服务器。

注意：此外，在清除/运行时，您会收到多个实例的错误，打开 server.xml 并确保它包含每个应用程序的单个实例而不是多个实例。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-20T15:25:19.887

在我的例子中，.project 文件是只读的（它是从源代码控制系统中提取的）。使其可写解决了这个问题。

[Eclipse v4.7](https://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases)（氧气）。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-07-03T12:15:25.163

为了我：

是[Eclipse v4.5](https://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases) (Mars) 不支持[Java SE 7](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)，所以我添加了[Java SE 8](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8)。有效。

# c# - 是否有任何可从 C# 编译成 .Net，可通过 C# 脚本语言扩展？

> ID：15380131
> 
> 赞同：1
> 
> 时间：2013-03-13T08:23:09.587
> 
> 标签：c#, .net, scripting

所以需要做3件事：

*   从脚本生成纯 IL/C#
*   能够投入 C# 类和语法结构
*   简单的 C# api

通常我想要这样的api：

```
var sctipt = "Script...";
var scriptConstruct =  "{0} \{ {1} \}";
ScriptCompiler.registerConstruct<Action<string, string> >(scriptConstruct);
ScriptCompiler.reginsterType(ClassT);
ScriptCompiler.bindFunction<Action<String> >(MyFunction, "FunctionNameInScript")
var CompiledScript = ScriptCompiler.Compile(sctipt);
CompiledScript.execute(); 
```

有没有这样的脚本语言？我尝试了 Nemerle，但找不到如何以我刚才描述的方式使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:24:45.293

一个名为 Roslyn 的新项目目前正在开发中，并且完全符合您的要求。它作为社区技术预览版提供。已经进行了许多改进，因此我建议您尝试一下。

[http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:28:02.730

I haven't looked at this for a good while, but your question brings to mind [Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx):

> The Roslyn CTP previews the next generation of language object models for code generation, analysis, and refactoring, and the upcoming support for scripting and interactive use of VB and C#.

There's some stuff kicking around on this, [here](http://blogs.msdn.com/b/csharpfaq/archive/2011/12/02/introduction-to-the-roslyn-scripting-api.aspx) and [here](http://www.codeproject.com/Articles/113169/C-As-A-Scripting-Language-In-Your-NET-Applications).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:06:31.733

你看过下面的链接吗？

[http://reverseblade.blogspot.com/2009/02/dont-wait-for-c-5-use-nemerle.html](http://reverseblade.blogspot.com/2009/02/dont-wait-for-c-5-use-nemerle.html)

这样你就可以动态运行

# android - java.lang.NoClassDefFoundError com.sun.jersey.api.client.Client

> ID：15380134
> 
> 赞同：0
> 
> 时间：2013-03-13T08:23:27.383
> 
> 标签：android, jersey

```
03-13 08:10:19.621: E/AndroidRuntime(800): java.lang.NoClassDefFoundError: 
com.sun.jersey.api.client.Client 
```

为什么我得到这个例外？虽然我已经添加了罐子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:27:39.433

Add the used libraries in your application manifest:

```
<uses-library android:name="your library" /> 
```

**Edit:**

btw. make sure that you have added **jersey-core** to your classpath too, as it is a dependency for com.sun.jersey.api.client.Client.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:29:12.333

你应该试试这个：

1.  从项目中删除对 JAR 的所有引用`Java project -> properties -> Java build path -> libraries`

2.  `libs`如果在项目的根目录中不存在一个文件夹，则将`Copy`JAR 放入该`libs`文件夹中。

3.  如果还没有运行。右键单击您的项目 > Android 工具 > 修复项目属性

`clean your project`并运行。它会起作用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:29:32.063

看起来您已将 jar 文件添加到项目中但尚未将它们添加为库，只需按照以下步骤操作，

*   右键单击您的项目，选择“构建路径”
*   从构建路径中选择“配置构建路径”
*   从对话框中选择“库”选项卡
*   单击第一个按钮“添加罐子”
*   从您的项目文件夹中选择 jar 文件
*   清理项目并完成。

# jquery - 在 jquery 的画布中旋转图像

> ID：15380138
> 
> 赞同：0
> 
> 时间：2013-03-13T08:23:39.820
> 
> 标签：jquery, image, slider

我有一个画布，它包含 5 个具有不同 ID 的图像，分别命名为 img1、img2、img3、img4 和 img5。现在我正在使用 jquery 滑块。现在，如果我在滑块中更改旋转，那么图像将被旋转，这是为该滑块分配的。但在我的情况下，我可以创建多个滑块，但是如果我在任何一个滑块中进行旋转，那么只有具有 id img5 的图像会发生变化，这不是该滑块的确切图像。简而言之，所有滑块都分配给最后一张图像。我的代码是这样的：

```
$('.slider').slider({
orientation : 'horizontal',
max:180,
min:-180,
value:0,
id:objid,
slide: function(event, ui) {
var $this = $(this);
/* Change the rotation and register that value in data object when it stops */
draggable_elem.css({'-moz-transform':'rotate('+ui.value+'deg)','-webkit-transform':'rotate('+ui.value+'deg)'});
$('.degrees',$this).html(ui.value);
},
stop:function(event, ui) {
newObject.rotation = ui.value;
}
}); 
```

而是`objid`图像的id。

请建议，如何区分仅一个滑块的图像。提前致谢。

# angularjs - 服务变量未在控制器中更新

> ID：15380140
> 
> 赞同：24
> 
> 时间：2013-03-13T08:23:43.887
> 
> 标签：angularjs

我有一个在 ng-view 之外的 NavbarCtrl。我有一个登录控制器，它与服务对话以使用户登录。用户登录后，我希望导航栏使用用户的电子邮件地址进行更新。但是对于我的生活，我似乎无法让导航栏范围更新用户登录后加载到我的“Auth”服务中的数据。

这是我的主要 index.html：

```
<div class="navbar navbar-inverse navbar-fixed-top">

        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="#">Brim</a>

                <div class="pull-right"  ng-controller="NavbarCtrl">
                    <div ng-click="refresh()">hello</div>
                    {{ user.email }}
                </div>
            </div>
        </div>

    </div>

    <div class="container" ng-view> 
```

我的服务：

```
.factory('Auth', function($resource) {
    var authenticated = false;
    var user = {};
    return {
        isAuthenticated: function () {
            return authenticated;
        },
        getUser: function() {
            return user;
        },
        login: function(loginUser, callback) {
            user =  {email:'email@email.com'}
            authenticated = true;
            callback(true);
            //actual code for logging in taken out for brevity
        }
    }
}) 
```

还有我的登录和导航栏控制器：

```
function LoginCtrl($scope, $location, Auth) {

$scope.login = function() {
    Auth.login($scope.user, function(success) {
        if(success) $location.path('/dashboard');
        //console.log(Auth.getUser())
    });
}

}

function NavbarCtrl($scope, Auth)  {

//thought this should work
$scope.user = Auth.getUser();

//experimenting unsuccessfully with $watch
$scope.$watch(Auth.isAuthenticated(),function () {
    $scope.user = Auth.getUser()
})

//clicking on a refresh button is the only way I can get this to work
$scope.refresh = function() {
    $scope.user = Auth.getUser()
}
} 
```

根据我的研究，我会认为 $scope.user = Auth.getUser(); 会起作用，但事实并非如此，我完全不知道如何在用户登录时更新我的​​导航栏。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-13T17:09:43.280

**更新**：嗯，你每天都会学到一些新东西......只需删除`()`以观察函数的结果：

```
$scope.$watch(Auth.isAuthenticated, function() { ... }); 
```

`[Updated fiddle](http://jsfiddle.net/mrajcok/wzECr/2/)`

在这个小提琴中，请注意 'watch1' 和 'watch3' 如何在值`$scope.isAuthenticated`更改时第二次触发。

因此，这是监视服务上定义的***原始*****值****更改***的通用技术：*

 **   定义返回原语（的值）的 API/方法
*   $watch 那个方法

要监视**在服务上定义的*****对象或数组*****的更改***：*

 **   定义返回（引用）对象/数组的 API/方法
*   在服务中，注意只修改对象/数组，不要重新分配。
    例如，不要这样做：`user = ...;`
    而是这样做： `angular.copy(newInfo, user)`或这样：`user.email = ...`
*   通常你会为该方法的结果分配一个本地 $scope 属性，因此 $scope 属性将是对实际对象/数组的引用
*   $watch 范围属性

例子：

```
$scope.user = Auth.getUser();
// Because user is a reference to an object, if you change the object
// in the service (i.e., you do not reassign it), $scope.user will
// likewise change.
$scope.$watch('user', function(newValue) { ... }, true);
// Above, the 3rd parameter to $watch is set to 'true' to compare
// equality rather than reference.  If you are using Angular 1.2+
// use $watchCollection() instead:
$scope.$watchCollection('user', function(newValue) { ... }); 
```

* * *

原答案：

要查看函数的结果，您需要传递 $watch 包装该函数的函数：

```
$scope.$watch( function() { return Auth.isAuthenticated() }, function() { ... }); 
```

[小提琴](http://jsfiddle.net/mrajcok/wzECr/1/)。在小提琴中，请注意当值`$scope.isAuthenticated`更改时，只有“watch3”第二次触发。（它们最初都会触发，作为 $watch 初始化的一部分。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:53:33.617

尝试改变

> $scope.$watch(Auth.isAuthenticated(),function () { $scope.user = Auth.getUser() })

到

> $scope.$watch(Auth.isAuthenticated(),function () { $scope.user = Auth.getUser() }, true)

详细解释请看 AungularJs [$watch 文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope)，默认值为 false 表示 Angular 通过引用检测第一个参数值的变化，而传递 true 表示通过相等进行检查。作为函数的参数，检查总是返回 false，因为对函数的引用总是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T19:45:07.430

用作`user`变量名通常不是一个好主意。我曾经改变过它，`currentUser`一切都对我有用。**

# jms - Camel JMS 无法创建生产者

> ID：15380145
> 
> 赞同：1
> 
> 时间：2013-03-13T08:23:52.727
> 
> 标签：jms, apache-camel

我对骆驼相当陌生，并且一直在尝试使用 requestBody 但不断收到错误。我已经简化了我的代码，但仍然得到相同的异常。如果我的猜测是正确的，那么关键可能是消息“无法为端点创建生产者”，但我不确定如何使用 Java DSL 来做到这一点。

有人可以指出我做错了什么的骆驼文档。感谢您的帮助。

这是简化的代码。

```
package nz.co.home.cameljmsrequest;

import org.apache.camel.CamelContext;
import org.apache.camel.ProducerTemplate;
import org.apache.camel.component.activemq.ActiveMQComponent;
import org.apache.camel.impl.DefaultCamelContext;

public class App {

    public static void main(String[] args) throws Exception {

        // set up the underlying camel context and add the ActiveMQ component
        CamelContext camelContext = new DefaultCamelContext();
        camelContext.addComponent(
                "jms",
                ActiveMQComponent.activeMQComponent("tcp://192.168.1.150:61616")
                );

        // start the context
        camelContext.start();

        // send the message
        ProducerTemplate producer = camelContext.createProducerTemplate();
        String requestBody = producer.requestBody("jms:queue:test", 
                "Request Message", String.class);
        System.out.println(requestBody);

        // stop the context
        camelContext.stop();

        // just because we can
        System.out.println("sent message");
    }
} 
```

生成的消息如下所示：

```
Exception in thread "main" org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[Message: Request Message]
    at org.apache.camel.util.ObjectHelper.wrapCamelExecutionException(ObjectHelper.java:1287)
    at org.apache.camel.util.ExchangeHelper.extractResultBody(ExchangeHelper.java:618)
    at org.apache.camel.impl.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:454)
    at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:120)
    at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:136)
    at org.apache.camel.impl.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:284)
    at org.apache.camel.impl.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:314)
    at nz.co.home.cameljmsrequest.App.main(App.java:23)
Caused by: org.apache.camel.FailedToCreateProducerException: Failed to create Producer for endpoint: Endpoint[jms://queue:testCamelActiveMq]. Reason: java.lang.IllegalArgumentException: connectionFactory must be specified
    at org.apache.camel.component.jms.JmsProducer.initReplyManager(JmsProducer.java:98)
    at org.apache.camel.component.jms.JmsProducer.processInOut(JmsProducer.java:164)
    at org.apache.camel.component.jms.JmsProducer.process(JmsProducer.java:129)
    at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)
    at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)
    at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86)
    at org.apache.camel.processor.UnitOfWorkProducer.process(UnitOfWorkProducer.java:63)
    at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:366)
    at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:337)
    at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:233)
    at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:337)
    at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:192)
    at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:115)
    at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:119)
    ... 4 more
Caused by: java.lang.IllegalArgumentException: connectionFactory must be specified
    at org.apache.camel.util.ObjectHelper.notNull(ObjectHelper.java:290)
    at org.apache.camel.component.jms.JmsConfiguration.createConnectionFactory(JmsConfiguration.java:1052)
    at org.apache.camel.component.jms.JmsConfiguration.getConnectionFactory(JmsConfiguration.java:415)
    at org.apache.camel.component.jms.JmsEndpoint.getConnectionFactory(JmsEndpoint.java:468)
    at org.apache.camel.component.jms.reply.TemporaryQueueReplyManager.createListenerContainer(TemporaryQueueReplyManager.java:115)
    at org.apache.camel.component.jms.reply.ReplyManagerSupport.doStart(ReplyManagerSupport.java:222)
    at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
    at org.apache.camel.util.ServiceHelper.startService(ServiceHelper.java:62)
    at org.apache.camel.util.ServiceHelper.startService(ServiceHelper.java:52)
    at org.apache.camel.component.jms.JmsProducer.createReplyManager(JmsProducer.java:503)
    at org.apache.camel.component.jms.JmsProducer.initReplyManager(JmsProducer.java:94)
    ... 18 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:43:17.523

从堆栈跟踪中可以清楚地看出，未指定 ActiveMQ 连接工厂是一个问题。

配置可以在 Spring XML 中完成。

请查看 jms 页面 - [Apache Camel:JMS](http://camel.apache.org/jms.html)

# javascript - 无法将 JSON 字符串转换为 javascript 对象

> ID：15380152
> 
> 赞同：1
> 
> 时间：2013-03-13T08:24:24.917
> 
> 标签：javascript, json

```
 var JSONObj='[{"rmaNumber":null,"orderReferenceNumber":"referene45","orderStatus":"Pending","dateRequested":null,"dateApproved":null,"segateAddress":null,"billingAddress":null,"shippingAddress":null,"returnForCredit":{"requested":null,"received":null,"shipped":35,"credited":45,"invoiceAmount":null},"returnForExchange":{"requested":null,"received":null,"shipped":35,"credited":45,"invoiceAmount":null},"totals":null}]'
    var parsedJSON = eval('(\'+JSONObj+\')');    
    var result=parsedJSON.result;
    var count=parsedJSON.count;
    alert('result:'+result+' count:'+count); 
```

在警报中给出未定义的：未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:25:49.503

您应该[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)为此使用：

```
var parsedJSON = JSON.parse(JSONObj);
console.log(parsedJSON[0].orderStatus);  // "Pending" 
```

**注意：**此方法仅受现代浏览器支持。[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON#Browser_compatibility)阅读有关浏览器兼容性的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:25:53.547

```
var JSONObj='[{"rmaNumber":null,"orderReferenceNumber":"referene45","orderStatus":"Pending","dateRequested":null,"dateApproved":null,"segateAddress":null,"billingAddress":null,"shippingAddress":null,"returnForCredit":{"requested":null,"received":null,"shipped":35,"credited":45,"invoiceAmount":null},"returnForExchange":{"requested":null,"received":null,"shipped":35,"credited":45,"invoiceAmount":null},"totals":null}]';

var parsedJSON = JSON.parse(JSONObj);    
var result=parsedJSON.result;
var count=parsedJSON.count;
alert('result:'+result+' count:'+count); 
```

但是，您没有任何名为“result”或“count”的 JSON 字段，因此这些字段是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:26:04.847

您可以改用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)。

对于不支持`JSON.parse`nativly(MSIE) 的浏览器，您可以使用第三方库，如[json2](https://github.com/douglascrockford/JSON-js)或[json3](http://bestiejs.github.com/json3/)。

```
var parsedJSON = JSON.parse(JSONObj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:26:29.710

你有报价问题。

您可以通过更换来修复它

```
var parsedJSON = eval('(\'+JSONObj+\')'); 
```

和

```
var parsedJSON = eval('('+JSONObj+')'); 
```

但是这里没有理由不使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T08:28:57.320

```
var parsedJSON = eval(JSONObj); 
```

这将为您提供已解析的 JSON 对象。`result`但是您的 Json 对象中没有属性名称，因此也没有`count`。如果你想计算数组，那么你只需使用`length`例如`parsedJSON.length`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T08:31:22.120

尝试

```
var JSONObj='[{"rmaNumber":null,"orderReferenceNumber":"referene45","orderStatus":"Pending","dateRequested":null,"dateApproved":null,"segateAddress":null,"billingAddress":null,"shippingAddress":null,"returnForCredit":{"requested":null,"received":null,"shipped":35,"credited":45,"invoiceAmount":null},"returnForExchange":{"requested":null,"received":null,"shipped":35,"credited":45,"invoiceAmount":null},"totals":null}]';

 eval("var  parsedJSON =" + JSONObj); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T08:50:19.433

**第一件事：**

```
var parsedJSON = eval('(\'+JSONObj+\')'); 
```

应该

```
var parsedJSON = eval('('+JSONObj+')'); 
```

**第二件事：**
我没有看到任何`result`或`count`对象是 json 字符串

**第三件事：**
json中的数据在数组中，因此如果对象中有任何对象`result`，则在数组中应该使用`parsedJSON[0].result`

# json - Grails - 在控制器中生成自定义 JSON 时出错

> ID：15380157
> 
> 赞同：0
> 
> 时间：2013-03-13T08:24:44.283
> 
> 标签：json, grails, groovy

我正在尝试使用以下代码在控制器中创建自定义 json 输出，但在 chrome rest 客户端中收到错误“Unexpected token <”。相同的代码适用于 xml。

```
def customJSON = {

    def a = Student.list().get(0)

    render(contentType:"application/json"){

        student(){ name(a.firstName) }
    }

}

def customXml = {

    def a = Student.list().get(0)

    render(contentType:"text/xml"){

        student(){ name(a.firstName) }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:47:38.397

您的代码导致以下异常：

```
Message: Array elements must be defined with the "element" method call eg: element(value)
    Line | Method
->>   98 | invokeMethod      in grails.web.JSONBuilder 
```

问题是 grails 发送带有异常内容的 HTML 响应，但内容类型为“application/json”。所以客户端认为这是一个无效的 JSON 响应。

以下代码应该可以工作：

```
def a = Student.list().get(0)

render(contentType:"application/json"){
            student(name : a.firstName)
        } 
```

# ruby-on-rails - Rails 教程第 10 章练习 5 使用 partials 消除重复

> ID：15380162
> 
> 赞同：1
> 
> 时间：2013-03-13T08:25:08.597
> 
> 标签：ruby-on-rails, railstutorial.org, partials

我是 Rails 的新手，和许多其他人一样，我正在通过 Hartl 的 Rails 教程学习它。但是在练习 5 第 10 章（使用分部消除重复）中，我完全被卡住了，我想继续说清楚。使用stackoverflow我找到了一个解决方案，但它对我不起作用。在我的情况下，“删除”链接不会出现。我的文件：

**app/views/shared/_feed_item.html.erb**

```
<li id="<%= feed_item.id %>">
  <%= link_to gravatar_for(feed_item.user), feed_item.user %>
  <span class="user">
    <%= link_to feed_item.user.name, feed_item.user %>
  </span>
  <span class="content"><%= feed_item.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(feed_item.created_at) %> ago.
  </span>
  <% if current_user?(feed_item.user) %>
  <% render partial: 'shared/delete_link', locals: { object: feed_item } %>
  <% end %>
 </li> 
```

**app/views/microposts/_micropost.html.erb**

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
  <% render partial: 'shared/delete_link', locals: { object: micropost } %>
  <% end %>
  </li> 
```

**app/views/shared/_delete_link.html.erb**

```
 <%= link_to "delete", object, method: :delete,
                                     data: { confirm: "You sure?" },
                                     title: object.content %> 
```

我不明白为什么“删除”链接不呈现。条件`current_user?`成功执行......情况好像`<% render partial: 'shared/delete_link', locals: { object: feed_item } %>`根本不存在。零利润。如果有人能就这个案例启发我，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T08:27:57.323

更改`<% render partial: 'shared/delete_link', locals: { object: feed_item } %>`为`<%= render partial: 'shared/delete_link', locals: { object: feed_item } %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T06:35:50.370

`partial:`我们可以通过删减和 来稍微解决这个问题`locals:`。

也就是说，这也有效：`<%= render 'shared/delete_link', object: feed_item %>`

# php - 多语种网站 - 网页翻译

> ID：15380164
> 
> 赞同：1
> 
> 时间：2013-03-13T08:25:18.283
> 
> 标签：php, internationalization, translation, multilingual

在开始之前，我想提一下，我知道有很多关于多语言功能的答案，但我只是没有找到我希望从我的小搜索中找到的答案。

我有一个页面（例如 about.php），其中所有内容都只是 html，有许多标题标签、p 标签、列表项等。内容是“静态的”，这意味着它不是来自数据库，我'想通过单击链接（英语或法语）对其应用翻译。

我遵循了一些教程和示例，并提出了与[此](http://www.bitrepository.com/php-how-to-add-multi-language-support-to-a-website.html)示例非常相似的内容，但我关心的是页面的内容。我想说的是：假设我的页面结构如下所示：

```
<html>
<body>
<ul>
<li><a href="index.php"><?php echo $lang['HOME']; ?></a></li>
<li><a href="about.php"><?php echo $lang['ABOUT']; ?></a></li>
<li><a href="?lang=fre">french</a></li>
</ul>
<h1><?php echo $lang['HEADING']; ?></h1>
<p><?php echo $lang['PARAGR']; ?></p>
<p><?php echo $lang['ANOTHER_PAR']; ?></p>
</body>
</html> 
```

导航菜单的值可以很容易地存储在 $lang 数组中，并每次都回显出特定的值，但这也是最好（或更有效）的方法和页面内容吗？我是否必须在 $lang 中放入我所有的标题、段落和列表等，或者这可以通过更好的方式轻松完成？如果某些段落里面的文字太多怎么办？ETC

希望有道理。

PS 我还考虑制作两个不同的文件，例如 about_eng.php 和 about_fre.php，其中我分别拥有英语和法语的所有 html 内容，并带有一个简单的 if 语句来检查每次选择哪种语言并包含正确的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:47:33.530

我认为将特定语言的数据保存在声明 $lang 数组的不同 php 文件中是一个好方法。这将避免用语言重新输入所有内容，这意味着更少的冗余。所以我同意贾斯帕尔的观点。对于输入 $lang['XXX'] 您可以轻松地将 php 转换为这个（也许是一个愚蠢的解决方案，但它会起作用）：

```
function displayMyPage() {
global $lang;     // do not forget the other globals you need in the page...
$l = $lang;       // localize $lang as $l... 
?>  
<html>
<body>
<ul>
<li><a href="index.php"><?php echo $l['HOME']; ?></a></li>
<li><a href="about.php"><?php echo $l['ABOUT']; ?></a></li>
<li><a href="?lang=fre">french</a></li>
</ul>
<h1><?php echo $l['HEADING']; ?></h1>
<p><?php echo $l['PARAGR']; ?></p>
<p><?php echo $l['ANOTHER_PAR']; ?></p>
</body>
</html>
<?php
}
?> 
```

# autohotkey - 使用自动热键中的键发送现有修饰符？

> ID：15380171
> 
> 赞同：4
> 
> 时间：2013-03-13T08:25:39.770
> 
> 标签：autohotkey

我正在尝试使用 Send 命令发送按下的修饰符，我想出的唯一方法是将它们全部列出：

```
; (Note: I've remapped using registry the Capslock as F13)
F13 & h::
    if GetKeyState("Control") && GetKeyState("Shift") {
        Send +^{Left}
        return
    }

    if GetKeyState("Control") {
        Send ^{Left}
        return
    }

    if GetKeyState("Shift") {
        Send +{Left}
        return
    }
    Send {Left}
    return 
```

在 Windows 中，如果您按 ctrl+left，它会向左跳转一个单词，如果我按 ctrl+shift+left，它会向左选择一个单词。同样，我想像上面的例子一样发送现有的修饰符，但是有没有更简单的方法？伪代码：`F13 & h::Send {CurrentlyPressedModifiers}{Left}`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T09:16:03.503

您可以使用发送，{盲}模式来做到这一点。例子：

```
*a::Send, {Blind}{Left} 
```

`*`接受所有修饰符，并且 {Blind}将`a`修饰符传递给`Send`命令。

或者，您可以避免发送并使用：

```
a::Left 
```

这里所有的修饰符都会自动传递给`Left`命令。

# 注意：据我在测试后看到的，这两种解决方案都不能使用“你的”组合键，只能使用标准热键。

因此，您最初的解决方案可能是唯一的解决方案，除非您将组合键更改回标准热键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T14:34:07.127

我知道这是一篇旧帖子，但我想分享我适用于这个问题的脚本。

```
SetCapsLockState, alwaysoff

CapsLock & i::send {Blind}{Up}
CapsLock & k::send {Blind}{Down}
CapsLock & j::send {Blind}{Left}
CapsLock & l::send {Blind}{Right}

CapsLock & n::send {Blind}{Home}
CapsLock & m::send {Blind}{End}

CapsLock & u::send {Blind}{BS}
CapsLock & o::send {Blind}{Del} 
```

Capslock 被禁用并按住它会将箭头键映射到 i、j、k、l。{Blind} 允许修饰符。

Home、End、Backspace 和 Delete 也被重新映射以更快地输入。

# c++ - 如何杀死 MFC 向导按钮的焦点

> ID：15380173
> 
> 赞同：0
> 
> 时间：2013-03-13T08:25:44.507
> 
> 标签：c++, visual-c++, mfc

我正在开发一个 MFC 向导基础应用程序。当应用程序加载时，它会自动聚焦到`cancel`按钮。如果用户按下回车键，则应用程序意外退出。然后我将焦点设置为出现在内部对话框中的文本框，使用`cedit.setFocus()`. 但是当我使用键盘键入时，它会聚焦文本字段，但如果我按下回车键仍然聚焦到`cancel`按钮。

简单来说，无论如何设置和取消 MFC 向导按钮的焦点

**已编辑：** 我添加了我的问题的图像以进行澄清。看看这个窗口。这里光标在“文本框 1”中，即使它聚焦取消向导按钮（*就像聚焦两个元素*）。如果我输入一些文本，它会毫无问题地转到“文本框 1”。但是如果我点击进入按钮，表单退出，因为它专注于取消按钮。所以我需要删除这个取消按钮的默认焦点。但只需要关注“文本框 1” ![在此处输入图像描述](../Images/e95ee05f8ff8570ad3d55ff6e8549ceb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:12:44.510

如果将焦点设置到 OnInitDialog 内的控件，则必须将默认实现的返回值更改为 FALSE。否则，框架将自动将焦点设置到对话框的第一个控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:42:50.420

Christopher 和 mfc 的好答案分别解释了正在发生的事情的不同部分，并告诉您如何解决该部分。剩下的部分是您说应用程序自动将焦点设置为“取消”按钮。您也可以在对话框编辑器中使用 Layout - Tab Order 来控制它，以使编辑控件具有第一个焦点。.SetFocus() 和返回 FALSE 的技术对于在程序控制下设置焦点很有用。布局 - 选项卡顺序对于选择 [TAB] 键将焦点移动到复杂对话框上的控件的顺序很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T13:21:43.867

CDialog 的标准行为是将`Enter`键指定为单击确定按钮，将`ESC`键指定为取消按钮，这些消息在 MFC 框架内的默认处理程序中处理。如果您想要与此不同的行为，则必须覆盖 IDOK 和 IDCANCEL 单击消息处理程序。

但是，您对键的编辑框响应的`Enter`问题本身就是一个完全不同的问题。这是因为默认的编辑框只用于处理单行文本输入，不响应`Enter`键码。

要启用多行输入的编辑框，您必须在对话框编辑器中设置编辑框的`Multi-line`and`Want return`属性。

OP第一条评论后的附加信息-----------------

该`OK`按钮被突出显示，因为它被设置为对话框的默认响应按钮。在对话框编辑器中删除`Default Button`此按钮的属性。但是，这仅适用于视觉显示，您可能必须删除此`OK`按钮才能完成您想要的工作。

要在对话框退出时禁用`Enter`键，您必须添加一个绕过处理程序，如下所示：

```
// add a message routing macro entry in the message map
ON_BN_CLICKED(IDOK, OnFilterDefaultExitKey)

// add a function prototype in the {{AFX_MSG() declaration
afx_msg void OnFilterDefaultExitKey();

// add a handler in the class implementation file
 /* ==================================== */
void CTest1Dlg::OnFilterDefaultExitKey() 
{
    // default exit key handler, ignore everything.
} 
```

但是，以这种方式添加代码也会使`OK`键完全无用，根本不响应任何点击。因此，您必须`Done`手动添加一个按钮来处理用户对已编辑数据的最终确定。

```
 /* ========================== */
void CTest1Dlg::OnButtonDone() 
{
    EndDialog(IDOK);    
} 
```

# c# - 如何在数据表中添加图像？

> ID：15380187
> 
> 赞同：5
> 
> 时间：2013-03-13T08:26:17.393
> 
> 标签：c#, asp.net, .net, gridview, datatable

如何在数据表中添加图像？我尝试了以下代码，

```
Image img = new Image();
img.ImageUrl = "~/images/xx.png";
dr = dt.NewRow();
dr[column] = imgdw; 
```

但它`System.Web.UI.WebControls.Image`在 gridview 中显示文本而不是图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T08:35:40.673

试试这个代码：

```
 DataTable dt = new DataTable();
        dt.Columns.Add("col1", typeof(byte[]));
        Image img = Image.FromFile(@"physical path to the file");
        DataRow dr = dt.NewRow();
        dr["col1"] = imageToByteArray(img);
        dt.Rows.Add(dr); 
```

`imageToByteArray`在哪里

```
 public byte[] imageToByteArray(System.Drawing.Image imageIn)
    {
        MemoryStream ms = new MemoryStream();
        imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
        return ms.ToArray();
    } 
```

所以想法是不要尝试直接存储Image，而是将其转换为byte []然后存储它，以便稍后您可以重新获取它并使用它或将它分配给这样的图片框：

```
 pictureBox1.Image = byteArrayToImage((byte[])dt.Rows[0]["col1"]); 
```

哪里`byteArrayToImage`是：

```
 public Image byteArrayToImage(byte[] byteArrayIn)
    {
        MemoryStream ms = new MemoryStream(byteArrayIn);
        Image returnImage = Image.FromStream(ms);
        return returnImage;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:31:57.770

使用此代码：

```
DataTable table = new DataTable("ImageTable"); //Create a new DataTable instance.

DataColumn column = new DataColumn("MyImage"); //Create the column.
column.DataType = System.Type.GetType("System.Byte[]"); //Type byte[] to store image bytes.
column.AllowDBNull = true;
column.Caption = "My Image";

table.Columns.Add(column); //Add the column to the table. 
```

向表中添加新行：

```
DataRow row = table.NewRow();
row["MyImage"] = <Image byte array>;
tables.Rows.Add(row); 
```

查看以下代码项目链接（图像到字节 []）：

[代码项目](http://www.codeproject.com/Articles/15460/C-Image-to-Byte-Array-and-Byte-Array-to-Image-Conv)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T09:07:52.977

如果目的是在 GridView 中显示图像，那么我个人不会将实际图像存储在 DataTable 中，只存储图像路径。存储图像只会使 DataTable 不必要地膨胀。显然，这仅适用于您的图像存储在文件系统而不是数据库中的情况。

要在 GridView 中显示图像，请使用**TemplateField**

例如

```
dr = dt.NewRow();
dr[column] = "~/images/xx.png";

<asp:TemplateField>
     <ItemTemplate>                    
         <img src='<%#Eval("NameOfColumn")%>' />
     </ItemTemplate>
</asp:TemplateField> 
```

当您将图像路径存储在数据库中而不是存储原始图像时，这也可以很好地工作。

# android - 简单的 CSS 媒体查询不起作用

> ID：15380188
> 
> 赞同：1
> 
> 时间：2013-03-13T08:26:18.803
> 
> 标签：android, css, media-queries

以下网页在桌面上正确显示，但我不知道为什么它不能在 Android 手机上运行（文本颜色始终为蓝色）：

```
<html>
    <head>
        <style type="text/css">
            @media screen { body { color: blue; } }
            @media handheld { body { color: red; } }
        </style>
    </head>
    <body>
        This is a test!
    </body>
</html> 
```

测试：

*   安卓：4.0.4
*   标准安卓网页浏览器：4.0.4-S7562XXALJ4
*   铬：25.0.1364.169
*   火狐：19.0.2

在所有移动浏览器上，在计算机屏幕上显示网页的选项已被禁用。使用媒体查询的在线网页可以正常工作。

我也尝试过仅屏幕/非屏幕对，但仍然无法正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:39:01.660

尝试以视口大小为目标

```
@media screen { body { color: blue; } }
@media only screen 
    and (max-width : 420px) { 
    /* Styles */
    body { color: red; }
} 
```

根据您的目标设备视口修改“最大宽度”

# java-me - 在特定按钮的动作监听器上运行特定命令

> ID：15380189
> 
> 赞同：0
> 
> 时间：2013-03-13T08:26:20.227
> 
> 标签：java-me, lwuit, codenameone

我有一个表格，它有 4 个命令，分别是 Action1、Action2、Action3、Action4。这些命令运行良好。

现在我有一个按钮说 runCommand 必须调用 Action1 命令。我们该怎么做。对特定按钮的动作侦听器的动作运行命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:21:41.933

虽然调用 actionPerformed 会起作用，但有一种更好、更正确的方法：

```
Display.getInstance().getCurrent().dispatchCommand(cancel, new ActionEvent(form, BACK_COMMAND_ID)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:58:07.927

问题解决了。

我们可以使用以下代码在代码中运行命令。

```
 cancle.actionPerformed(new ActionEvent(form, BACK_COMMAND_ID)); 
```

# python - 未找到已安装应用的模块

> ID：15380190
> 
> 赞同：0
> 
> 时间：2013-03-13T08:26:21.047
> 
> 标签：python, django, django-manage.py, manage.py

我已经将我的模板文件夹作为我的 python web 应用程序中的一个应用程序，我在我的 INSTALLED_APPS 中提到了它我在模板文件夹中也有 init 文件，但是当我运行 manage.py 任务时，出现错误并进行管理。 py 没有找到这个应用程序，即使我将应用程序放入 INSTALLED_APPS 字典时也没有错误。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:05:37.770

我不知道是什么`manage.py tasks`，必须来自您安装的某个扩展。但是，您的要求没有多大意义。一个应用程序至少有一个`models.py`文件，而您的模板文件夹可能没有。但是当然没有理由将您的模板文件夹视为应用程序。将文件夹放入`TEMPLATE_DIRS`。

# sql - 与 FOREIGN KEY 约束冲突

> ID：15380191
> 
> 赞同：0
> 
> 时间：2013-03-13T08:26:22.120
> 
> 标签：sql, sql-server-2008

我创建了一个凭证录入系统，比如会计软件

但我收到一条错误消息

```
Msg 547, Level 16, State 0, Line 1
The INSERT statement conflicted with the FOREIGN KEY constraint "Payment_Voucher_All_Voucher_List". The conflict occurred in database "Accounting12", table "dbo.Payment_Voucher".

The statement has been terminated. 
```

请任何人告诉我我的数据库
和数据库架构有什么问题

```
CREATE TABLE [dbo].[Receipt_Voucher] (
    [Id] INTEGER IDENTITY(90000000,1) NOT NULL,
    [Voucher_No] VARCHAR(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Date] DATE,
    [Dr_Account] INTEGER,
    [Dr_Amount] MONEY,
    [Cr_Account] INTEGER,
    [Cr_Amount] MONEY,
    [voucher_type] VARCHAR(40) NOT NULL,
    CONSTRAINT [PK_Receipt_Voucher] PRIMARY KEY CLUSTERED ([Voucher_No], [voucher_type])
)
GO

/* ---------------------------------------------------------------------- */
/* Add table "Payment_Voucher"                                            */
/* ---------------------------------------------------------------------- */

CREATE TABLE [dbo].[Payment_Voucher] (
    [Id] INTEGER IDENTITY(90000000,1) NOT NULL,
    [Voucher_No] VARCHAR(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [Date] DATE,
    [Dr_Account] INTEGER,
    [Dr_Amount] MONEY,
    [Cr_Account] INTEGER,
    [Cr_Amount] MONEY,
    [voucher_type] VARCHAR(40) NOT NULL,
    CONSTRAINT [PK_Payment_Voucher] PRIMARY KEY CLUSTERED ([Voucher_No], [voucher_type])
)
GO

/* ---------------------------------------------------------------------- */
/* Add table "All_Voucher_List"                                           */
/* ---------------------------------------------------------------------- */

CREATE TABLE [dbo].[All_Voucher_List] (
    [Voucher_No] VARCHAR(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [voucher_type] VARCHAR(40) NOT NULL,
    CONSTRAINT [PK_Voucher] PRIMARY KEY CLUSTERED ([Voucher_No], [voucher_type])
)
GO

/* ---------------------------------------------------------------------- */
/* Foreign key constraints                                                */
/* ---------------------------------------------------------------------- */

ALTER TABLE [dbo].[All_Voucher_List] ADD CONSTRAINT [Receipt_Voucher_All_Voucher_List] 
    FOREIGN KEY ([Voucher_No], [voucher_type]) REFERENCES [dbo].[Receipt_Voucher] ([Voucher_No],[voucher_type])
GO

ALTER TABLE [dbo].[All_Voucher_List] ADD CONSTRAINT [Payment_Voucher_All_Voucher_List] 
    FOREIGN KEY ([Voucher_No], [voucher_type]) REFERENCES [dbo].[Payment_Voucher] ([Voucher_No],[voucher_type])
GO 
```

输入收据凭证

```
INSERT INTO dbo.Receipt_Voucher
        ( Voucher_No ,
          Date ,
          Dr_Account ,
          Dr_Amount ,
          Cr_Account ,
          Cr_Amount ,
          voucher_type
        )
VALUES  ( '0001' , -- Voucher_No - varchar(50)
          '2013-03-13 08:15:28' , -- Date - date
          5 , -- Dr_Account - int
          500 , -- Dr_Amount - money
          2 , -- Cr_Account - int
          500 , -- Cr_Amount - money
          '2'  -- voucher_type - varchar(40)
        ) 
```

现在输入 All_Voucher_List

```
INSERT INTO dbo.All_Voucher_List
        ( Voucher_No, voucher_type )
VALUES  ( '0001', -- Voucher_No - varchar(50)
          '2'  -- voucher_type - varchar(40)
          ) 
```

但有一些错误

```
Msg 547, Level 16, State 0, Line 1
The INSERT statement conflicted with the FOREIGN KEY constraint "Payment_Voucher_All_Voucher_List". The conflict occurred in database "Accounting12", table "dbo.Payment_Voucher".
The statement has been terminated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:39:01.953

**外键只能引用一个父表。**

`[Voucher_No], [voucher_type]`在您的情况下，表的相同列`All_Voucher_List`引用两个表`[Receipt_Voucher]`和`[Payment_Voucher]`.

当您尝试将记录插入第二个 FK 时会阻止您这样做，因为您在表中`Receipt_Voucher`没有相应的记录。`Payment_Voucher`

[您可以在此处](https://stackoverflow.com/a/922341/1920232)阅读有关该主题的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:52:39.513

petterm 是正确的，您的第二个约束不允许插入通过。

我的第一个想法是创建一个包含所有凭证的表并在单个约束中使用它，但我知道您的第三个表正是该表。

所以我的建议是在填充前两个表时使用触发器或其他方法填充该表。

我知道这是要维护的另一段代码，但是其他可能的解决方法（例如使用视图或复制键来引用两个表）只会使您的数据模型更加复杂而几乎没有好处，并且会给谁将产生问题将来在这些桌子上工作..

# php - Firebug 显示使用 AJAX 发布的 JSON 数据，但 PHP 说 $_POST 为空

> ID：15380192
> 
> 赞同：1
> 
> 时间：2013-03-13T08:26:25.523
> 
> 标签：php, ajax, json, post

我正在尝试完成我的第一次 AJAX 交换，但我在最后阶段遇到了困难。我有一个 JSON 字符串，我通过 AJAX 将其发送到 php 页面，`verify.php`但是当我尝试接收此数据时，`$_POST`at`verify.php`似乎完全为空，如我`verify.php`页面上的代码所示：

```
如果（空（$_POST））{
   回声“空”；
} 别的 {
   echo '非空';
}

```

我不知道为什么会这样......我的 AJAX 代码似乎没问题：

```
$.ajax({
   类型：'POST'，
   url: '服务器端/verify.php',
   data: data, // 其中 data 是一个 javascript obj。这是 JSON.stringify'ied。
   数据类型：“JSON”，
   成功：函数（返回）{
      控制台.log（返回）；
   }                
});
```

当我 console.log 我的 JSON 字符串时，我看到它显示得很好，甚至我的成功回调函数也将“空”记录到控制台（因为由于我上面的 if 语句，它正在回显“空”） . 因此，交换似乎进行得很好，数据似乎发送得很好，但显然没有到达`$_POST`超全球。谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:28:46.350

请检查您是否遗漏了任何步骤！

// 声明一个变量

```
 var jsonObj = {demo: 'this is just a simple json object'} 
```

// 让我们转换我们的 JSON 对象

```
 var postData = JSON.stringify(jsonObj); 
```

// 让我们将字符串化的 json 放入一个变量中以进行发布

```
 var postArray = {json:postData};

 $.ajax({
   type: 'POST',
   url: "http://somedomain.local.com/phpfile.php",
   data: postArray,
   success: function(data){
      // Do some action here with the data variable that contains the resulting message
   }
 }); 
```

我们需要从用于运输的字符串中去除斜线。然后我们只需运行 json_decode php 函数。之后，我们可以访问 php 对象并随意使用它。

```
 if(isset($_POST["json"])){
    $json = stripslashes($_POST["json"]);
    $output = json_decode($json);

    // Now you can access your php object like so
    // $output[0]->variable-name
  } 
```

希望它会有所帮助！

# ios - GPS 在 iOS 上到处乱跳

> ID：15380203
> 
> 赞同：0
> 
> 时间：2013-03-13T08:27:01.977
> 
> 标签：ios, geolocation, titanium, titanium-mobile

我有一个地理定位处理程序，它处理我的 GPS 位置并将它们发送到 PHP 服务。这在 Android 上运行得非常好，并且在我制作的谷歌地图网络应用程序上很容易遵循。然而; 我已经在 iPhone 4s 和 4 上对其进行了测试，并且坐标到处乱跳。跟随附近的 Wifi 热点甚至网络提供商的塔楼。iOS 怎么可能像一个蹒跚学步的糖一样跳跃而 Android 运行良好？我已经尝试过使用 PROVIDER_GPS 并且没有使用 preferredProvider 以及启用和不启用 Wifi。这是我的位置处理：

```
Ti.Geolocation.purpose = 'Determine Current Location';
Ti.Geolocation.preferredProvider = Ti.Geolocation.PROVIDER_GPS;
var callback;
function locationHandler(e) {
    if (e.success === undefined || e.success) {
        if (typeof (callback) === 'function') {
            callback(e);
        }
    }
} 
function start(obj) {
    callback = obj.action;
    Ti.Geolocation.addEventListener("location", locationHandler);
}

function stop() {
    callback = undefined;
    Ti.Geolocation.removeEventListener("location", locationHandler);
}

exports.start = start;
exports.stop = stop; 
```

# linux - 在bash中重命名多个文件

> ID：15380205
> 
> 赞同：4
> 
> 时间：2013-03-13T08:27:06.307
> 
> 标签：linux, bash, shell

我在某个目录中有`A.js`, `B.js`,我想在 bash shell 中编写一个命令行来重命名这些文件 _A、_B、_C。`C.js`我怎样才能做到这一点？

我试过`find -name '*.sh' | xargs -I file mv file basename file .sh`但它不起作用，basename 文件 .sh 不被识别为嵌套命令

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T08:48:47.850

怎么样

```
rename 's/(.*).js/_$1/' *.js 
```

检查系统上重命名的语法。

上面的命令将重命名`A.js`为`_A`& 以此类推。

如果您想保留扩展名，以下应该会有所帮助：

```
rename 's/(.*)/_$1/' *.js 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T08:36:12.307

假设您仍想保留文件的扩展名，您可以这样做：

```
$ for f in * ; do mv "$f" _"$f" ; done 
```

它将获取目录中每个文件的名称，并在前面加上一个“_”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T12:10:39.577

一种简单的本地方法，使用**目录遍历**：

```
find -type f | xargs -I {} mv {} {}.txt 
```

将重命名每个文件，在末尾添加扩展名 .txt。

还有一种更通用的**并行化**方式：

```
find -name "file*.p" | parallel 'f="{}" ; mv -- {} ${f:0:4}change_between${f:8}' 
```

# android - 低功耗蓝牙与 NFC

> ID：15380206
> 
> 赞同：1
> 
> 时间：2013-03-13T08:27:08.027
> 
> 标签：android, nfc, bluetooth-lowenergy

蓝牙低功耗是否也像 NFC 一样进行身份验证，（我的意思是，我们是否需要明确输入密码，或者它会进行自动身份验证）并传输数据。

BLE能否对NFC构成威胁。两者有什么区别？

在这里，我列出了一些我知道的差异

低功耗蓝牙/NFC：

*   它通信的速度（快/慢），
*   协议 ISO，设置时间（快/慢），
*   功耗（取决于），
*   安全性（好/更好）

* * *

蓝牙和 BLE 是两种不同的硬件，还是只是 BT 硬件表现为具有特定库和协议的 BLE？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T08:33:17.487

汽车会对飞机构成威胁吗？是的，它们都提供交通工具，但你不会希望空客 A380 去两个街角的商场拿一批胡萝卜，你也不会用汽车出国旅行……

两者不是竞争，而是互补的东西。例如，对于同时实现 BLE 和 NFC 的设备，您可以使用 NFC 轻松安全地配对设备...

低功耗蓝牙的范围更广（我们甚至可以在开放空间中使用最远 30 米的设备！），而 NFC 的范围更短。

> 蓝牙和 BLE 是两种不同的硬件，还是只是 BT 硬件表现为具有特定库和协议的 BLE？

它们是不同的，它们唯一的共同点是频率范围。整个沟通是不同的。但是，有些芯片可以同时使用两者，这些芯片称为双模芯片（例如德州仪器 CC2564）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T00:49:19.960

> 蓝牙和 BLE 是两种不同的硬件，还是只是 BT 硬件表现为具有特定库和协议的 BLE？

蓝牙和 BLE 可以在同一个无线电芯片上同时支持，但是关于它的一切都不同，除了它们都共享 2.4GHz ISM 频谱。仅设计用于蓝牙的芯片通常不能通过加载不同的固件来强制执行 BLE，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T09:17:13.223

Apple 在 iOS7 中通过 iBeacons 支持蓝牙 LE。

它们甚至可以让您将任何兼容蓝牙 4.0 的 iOS 设备变成信标。

[http://appleinsider.com/articles/13/06/19/inside-ios-7-ibeacons-enhance-apps-location-awareness-via-bluetooth-le](http://appleinsider.com/articles/13/06/19/inside-ios-7-ibeacons-enhance-apps-location-awareness-via-bluetooth-le)

# regex - 如何匹配正则表达式中的水平位置？

> ID：15380208
> 
> 赞同：0
> 
> 时间：2013-03-13T08:27:11.253
> 
> 标签：regex

在正则表达式中，如何匹配某个水平位置的字符？我想`n`用逗号后跟三个空格替换逗号位置，即

```
s/,/, /        # replace ',' at position n=4 with ', ' 
```

但是这些正则表达式仍然错过了水平位置约束。

和...一起

```
s/,/,  /       # replace ',' at position n=3 with ',  '
s/,/,   /      # replace ',' at position n=2 with ',   ' 
```

我想用它来重新格式化数据列，从

```
1,10000,0.187929453,10000
162,28000,0.045417083,28000
22,100000,0.020914811,100000
64,1000,0.234950091,10000
65,46000,0.037523632,46000
66,118000,0.015378538,118000 
```

到

```
1,   10000,  0.187929453, 10000
162, 28000,  0.045417083, 28000
22,  100000, 0.020914811, 100000
64,  1000,   0.234950091, 10000
65,  46000,  0.037523632, 46000
66,  118000, 0.015378538, 118000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:13:58.940

这里不需要使用正则表达式，这种类型的问题可以使用 awk 轻松解决。考虑以下代码：

```
awk -F"," 'NF==4{printf("%-5s%-8s%-12s %s\n", $1",", $2",", $3",", $4)}' in.file 
```

### 现场演示：http: [//ideone.com/bXJXX5](http://ideone.com/bXJXX5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:47:17.160

尝试类似：

```
s/^(.{3}),/$1,   / 
```

语法取决于您的语言。以上适用于 Perl。在某些语言中，它`\1`不是`$1`.

大多数语言都有更简单的方法来做你想做的事。Perl 和 C 必须`printf`格式化输出：

```
#another Perl example:
printf '%4s %7s %s %s', map({ $_ . ',' }, split(',',$line)); 
```

# c# - 通过 HttpClient.PostAsJsonAsync 将多个标量参数传递给 WebAPI

> ID：15380216
> 
> 赞同：2
> 
> 时间：2013-03-13T08:27:38.010
> 
> 标签：c#, asp.net-web-api

这是我的方法：

```
[HttpPost]
[ActionName("TestString")]
public string TestString([FromBody] int a, [FromBody] int b, [FromBody] int c)
{
  return "test " + a + " " + b + " " + c;
} 
```

有什么方法可以调用这个方法`HttpClient.PostAsJsonAsync`

我试过这个：

`HttpResponseMessage response = client.PostAsJsonAsync("api/task/TestString","a=8,b=5,c=6").Result;`

但我得到这个错误：`StatusCode: 500, ReasonPhrase: 'Internal Server Error'`

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:36:48.160

我很确定您只允许使用一个 [FromBody] 标签。尝试（添加您自己的错误处理等）：

```
[HttpPost]
[ActionName("TestString")]
public string TestString([FromBody] dynamic body)
{
  return "test " + body.a.ToString() + " " + body.b.ToString() + " " + body.c.ToString();
} 
```

如果表单主体实际上包含 a、b 和 c，这应该可以工作。

# error-handling - IBM AppScan Why does the "Application Error" still appeared where implementation already done?

> ID：15380217
> 
> 赞同：0
> 
> 时间：2013-03-13T08:27:38.673
> 
> 标签：error-handling

I am using the IBM app scan and we have found this error shown as "Informational" rather than severity = High. We have implemented codes to countermeasure it but after the second round scan it still there. May I know what is the purpose of all these informational scan results? ![Error msg](../Images/1e5320f958255151df1709da4e0464b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:45:44.907

AppScan 告诉您它能够在您的应用程序中触发应用程序错误。您的应用程序很可能没有正确检查 AppScan 放入此参数的值。这不一定是安全漏洞，这就是它被列为信息的原因。您可以查看信息问题并可能采取行动。

如果单击该问题，您可以在“问题详细信息”窗格中查看有关它的更多详细信息。那里的信息包括解释问题性质的建议。它还显示完整的 HTTP 请求和响应，包括 AppScan 为触发问题而修改的参数或 cookie 值。您应该查看该信息以了解您的修复程序显然没有解决问题的原因。

# ios - 适用于所有类型的 ios 手势识别器

> ID：15380223
> 
> 赞同：3
> 
> 时间：2013-03-13T08:27:51.247
> 
> 标签：ios, uigesturerecognizer

我只需要知道是否有一种方法可以在一个 UIGestureRecognizer 实例中捕获所有类型的手势。

示例：我有一个 UIView，我必须检测对其进行的任何类型的点击，而无需为每种类型的手势创建实例

有没有办法做到这一点 ？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T08:32:33.470

当然是，自己处理低级 UIView 事件（[iOS 事件处理指南](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009541)）：

```
Responding to Touch Events
– touchesBegan:withEvent:
– touchesMoved:withEvent:
– touchesEnded:withEvent:
– touchesCancelled:withEvent:
Responding to Motion Events
– motionBegan:withEvent:
– motionEnded:withEvent:
– motionCancelled:withEvent: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-05T19:45:57.673

您可以子类化`UIGestureRecognizer`该类并将其内部状态更改`UIGestureRecognizerStateRecognized`为何时开始触摸。

示例代码：

```
@interface UITouchGestureRecognizer : UIGestureRecognizer

@end 
```

```
#import <UIKit/UIGestureRecognizerSubclass.h>

@implementation UITouchGestureRecognizer

- (void) reset
{
    [super reset];
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    self.state = UIGestureRecognizerStateRecognized;
}

@end 
```

# c# - 在 Windows 应用商店应用中使用自定义流

> ID：15380230
> 
> 赞同：2
> 
> 时间：2013-03-13T08:28:00.203
> 
> 标签：c#, encryption, windows-8, stream, microsoft-metro

我有一个处理`Stream`需要移植到 WinRT 的自定义的 .NET 代码。这样做的动机是，应用程序读取一个加密的文件（自定义`Stream`）。在完整的.NET中我使用

```
 var readFileStream = File.OpenRead(bookPath);
 var readDecryptedStream = new MyStream(password, readFileStream);
 //it is a zip file
 var readZipFile = new ZipFile(readDecryptedStream);
 //extract files from the zip file 
```

`MyStream`继承自`Stream`并在 Read/Write 方法中进行一些编码和解码，完整代码在这里[http://dl.dropbox.com/u/73642/mystream.cs](http://dl.dropbox.com/u/73642/mystream.cs)。此代码在 .NET 中运行良好。

我的 WinRT 实现是

```
var file =await ApplicationData.Current.LocalFolder.GetFileAsync(bookPath); //I copied the same file to Local folder
var filestream = await file.OpenStreamForReadAsync();
var readDecryptedStream = new MyStream(password, readFileStream);
ZipArchive z = new ZipArchive(readDecryptedStream , ZipArchiveMode.Read); 
```

这段代码的问题是`new ZipArchive(readDecryptedStream , ZipArchiveMode.Read);`永远不会读完流。当我在 read 方法中设置断点时`MyStream`，它会一直以 offset=0 调用（因此它永远不会完成）。

当我使用未加密的文件时，`new ZipArchive(filestream , ZipArchiveMode.Read);`一切正常，所以问题一定是`MyStream`实现。

知道有什么问题吗？与完整的 .NET 相比，自定义是否`Stream`需要 WinRT 上的不同实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:39:56.153

我通过重新启动计算机解决了它。这很奇怪，但有时所有的流，包括从 ApplicatonData 读取文件都停止工作，我必须重新启动计算机。这是一个真正的痛苦。

# .htaccess - codeigniter htaccess 301

> ID：15380233
> 
> 赞同：0
> 
> 时间：2013-03-13T08:28:05.973
> 
> 标签：.htaccess, codeigniter, redirect

Hi all I have the normal htaccess file for codeigniter and I want to 301 one url to another

I've had to obfuscate the links to be able to post :(

ie h2tp://www domain com/controller/method/value1 ->h2tp://www domain com/controller/method/value2

but I'm having a hell of a time...

Here's the htaccess

```
 <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /

        RewriteRule ^(home(/index)?)/?$ / [L,R=301]
        RewriteRule ^(.*)/index/?$ $1 [L,R=301]

        #Removes trailing slashes 
        #had to remove ajaxquery search else it fails
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_URI} !(search/ajaxsearch)
        RewriteRule ^(.+)/$ $1 [L,R=301]

        #Rewrite all non-www to www based filenames
        #should get rid of any canonical issues
        RewriteCond %{HTTP_HOST} ^domain\.es [NC]
        RewriteRule ^(.*)$ http://www.domain\.es/$1 [R=301,L]

        #Removes access to the system folder by users.
        #Additionally this will allow you to create a System.php controller,
        #previously this would not have been possible.
        #'system' can be replaced if you have renamed your system folder.
        RewriteCond %{REQUEST_URI} ^system.*
        RewriteRule ^(.*)$ /index.php?/$1 [L]

        #Checks to see if the user is attempting to access a valid file,
        #such as an image or css document, if this isn't true it sends the
        #request to index.php
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php?/$1 [L]

    </IfModule>

    <IfModule !mod_rewrite.c>
        # If we don't have mod_rewrite installed, all 404's
        # can be sent to index.php, and everything works as normal.
        # Submitted by: ElliotHaughin

        ErrorDocument 404 /index.php
    </IfModule>[/code][/quote] 
```

If I put

```
 Redirect 301 /controller/method/value1 h2tp://www domain com/controller/method/value2 
```

I get this

h2tp://www domain com/controller/method/value2?controller/method/value1

I've been hours on this now, it's killing me :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:20:44.900

Due to my complete lack of knowledge on htaccess I was trying to add the 301 redirects below these lines.

```
 #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L] 
```

All checks had been run by then and the [L] flag was stopping anymore checks being run.

so when I posted a normal 301 redirect above the following lines it worked.

```
 #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# responsive-design - how to write spec for responsive website?

> ID：15380235
> 
> 赞同：0
> 
> 时间：2013-03-13T08:28:11.637
> 
> 标签：responsive-design, specifications

I'm about to write spec to responsive website that has web, tablet and mobile versions. this is the first spec I'm writing to responsive site, and I'm not sure which format would be the best understood: - Should I write different spec for each version (PC, Tablet and Mobile)? - Should I write everything in one ducument and describe the differences in each version? - Are there any further things you think it's important to take in mind when writing this kind of ducument? any examples or tips will be welcomed, thanx!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:55:20.247

查看响应式网页设计的[HTML5 Rocks 教程](http://www.html5rocks.com/en/mobile/responsivedesign/)。
如果你想深入了解这部分，你需要阅读[ETHAN MARCOTTE](http://alistapart.com/article/responsive-web-design)的这篇[博客](http://alistapart.com/article/responsive-web-design)。

# java - 如何使用 id 检索枚举名称？

> ID：15380243
> 
> 赞同：39
> 
> 时间：2013-03-13T08:29:04.993
> 
> 标签：java, enums

我有`enum`：

```
public enum EnumStatus {

    PASSED(40L, "Has Passed"),
    AVERAGE(60L, "Has Average Marks"),
    GOOD(80L, "Has Good Marks");

    private java.lang.String name;

    private java.lang.Long id;

    EnumStatus(Long id, java.lang.String name) {
        this.name = name;
        this.id = id;
    }

    public java.lang.String getName() {
        return name;
    }

    public java.lang.Long getId() {
        return id;
    }
} 
```

我必须仅使用 id (40,60, 80) 来获取枚举名称 ( `PASSED`, `AVERAGE`, `GOOD`)。我该怎么做？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-13T08:35:02.940

`enum`在您的搜索中创建一个静态方法`values`（隐式方法/成员，不确切知道它是哪个）并返回相应的值。对于方法找不到匹配值的情况，您应该创建一个特殊条目，例如`UNKNOWN`，您可以返回它。这样，您就不必返回`null`，这总是一个坏主意。

```
public static EnumStatus getById(Long id) {
    for(EnumStatus e : values()) {
        if(e.id.equals(id)) return e;
    }
    return UNKNOWN;
} 
```

顺便说一句 - 你的代码似乎是错误的。之后的括号`GOOD`似乎不属于那里。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-13T08:35:00.800

这可以使用静态映射和静态初始化器来完成：

```
public enum EnumStatus {

    PASSED(40L, "Has Passed"),
    AVERAGE(60L, "Has Average Marks"),
    GOOD(80L, "Has Good Marks");

    private static final Map<Long, EnumStatus> byId = new HashMap<Long, EnumStatus>();
    static {
        for (EnumStatus e : EnumStatus.values()) {
            if (byId.put(e.getId(), e) != null) {
                throw new IllegalArgumentException("duplicate id: " + e.getId());
            }
        }
    }

    public static EnumStatus getById(Long id) {
        return byId.get(id);
    }

    // original code follows

    private java.lang.String name;

    private java.lang.Long id;

    EnumStatus(Long id, java.lang.String name) {
        this.name = name;
        this.id = id;
    }

    public java.lang.String getName() {
        return name;
    }

    public java.lang.Long getId() {
        return id;
    }

} 
```

这将提供一种`O(1)` `getById()`方法，并且会自动检测您是否在枚举中意外地有重复的 id。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T08:39:22.407

您可以按如下方式进行这项工作：

```
public static String fromId(long id) {
        for (EnumStatus es : EnumStatus.values()) {
            if (es.id.equals(id)) {
                return es.getName();
            }
        }
        throw new IllegalArgumentException();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T08:41:36.787

```
public static EnumStatus getById(long id)
{
  for (EnumStatus e : EnumStatus.values())
  {
    if (id == e.getId()) return e;
  } 
  throw new IllegalArgumentException("oh no");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T08:38:30.913

在你的方法中添加一个方法`Enum`并通过传递 id 来获取它。

```
 public static ArrayList<EnumStatus> getEnumStatusById(ArrayList<Long> idList) {
    ArrayList<EnumStatus> listById = new ArrayList();
    for(EnumStatus es: EnumStatus.values()) {
        if( idList.contains(es.getId())) {
            listById.add(es);
        }
    }
    return listById;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-16T09:12:42.060

Nihal，你有很多回答如何找到正确的枚举元素。但我有一种感觉，你也希望元素的名称像**"PASSED" 而不是 "Has Passed"**。

请调用 **.name()**以获取**"PASSED"**。扩展约书亚的答案：`getById(40L).name();`

和 EnumStatus.PASSED.getName() 在你的情况下得到**"已通过"**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T08:35:10.057

遍历所有值并比较 Id

```
for (EnumStatus  enumStatus : EnumStatus.values()) {
   if (..) {..}
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T09:02:05.887

有时枚举的序数与这种 id 有明确的关系，从而可以在这些方法中以一种巧妙的方式获得 O(1)。在您的代码中，很明显

`EnumStatus.X = 40 + 20 * ordinal`,

因此您可以利用在[幕后生成的静态数组](https://stackoverflow.com/questions/1163076/how-is-values-implemented-for-java-6-enums)。

```
public static EnumStatus fromId(Long id) {
    int index = (id - 40L) / 20L;
    return values()[index];
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-10T10:33:43.910

**定义合同**

```
/**
 * Contract that will allow Types with id to have generic implementation.
 */
public interface IdentifierType<T> {
  T getId();
} 
```

**申请合同**

```
public enum EntityType implements IdentifierType<Integer> {
  ENTITY1(1, "ONE), ENTITY2(2, "TWO");

  private Integer id;
  private String name;

  private EntityType(int id, String name) {
    this.id = id;
    this.name = name;
  }

  public static EntityType valueOf(Integer id) {
    return EnumHelper.INSTANCE.valueOf(id, EntityType.values());
  }

  @Override
  public Integer getId() {
    return id;
  }
} 
```

**助手/实用程序**

```
public enum EnumHelper {
  INSTANCE;

  /**
   * This will return {@link Enum} constant out of provided {@link Enum} values with the specified id.
   * @param id the id of the constant to return.
   * @param values the {@link Enum} constants of specified type.
   * @return the {@link Enum} constant.
   */
  public <T extends IdentifierType<S>, S> T valueOf(S id, T[] values) {
    if (!values[0].getClass().isEnum()) {
        throw new IllegalArgumentException("Values provided to scan is not an Enum");
    }

    T type = null;

    for (int i = 0; i < values.length && type == null; i++) {
        if (values[i].getId().equals(id)) {
            type = values[i];
        }
    }

    return type;
  }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-06T22:19:58.797

此**模式**可以帮助您：

```
public interface Identifiable<T extends Number> {

    @Nonnull
    T getId();
}

public final class GettableById<K extends Number, V extends Enum<V> & Identifiable<K>> {

    @Nonnull
    private final Map<K, V> idToValue;

    public GettableById(@Nonnull V[] values) {
        this.idToValue = Arrays.stream(values)
                .collect(Collectors.toUnmodifiableMap(Identifiable::getId, v -> v));
    }

    @Nonnull
    public V getById(@Nonnull K id) {
        var value = idToValue.get(id);
        if (value != null) {
            return value;
        }
        throw new NullPointerException("Cannot get value by id: %s".formatted(id));
    }
}

public enum DataType implements Identifiable<Short> {

    ANNUAL((short) 1), QUARTERLY((short) 2);

    private static final GettableById<Short, DataType> companion = new GettableById<>(values());

    @Nonnull
    private final Short id;

    public static DataType getById(Short id) {
        return companion.getById(id);
    }

    DataType(@Nonnull Short id) {
        this.id = id;
    }

    @Nonnull
    @Override
    public Short getId() {
        return id;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-16T13:46:00.010

自 Java 8 引入以来`Optional`，您可以将其用作返回类型。考虑实施如下：

```
public static Optional<EnumStatus> fromId(Long id) {
    for (EnumStatus e: values()) {
        if (e.id.equals(id)) {
            return Optional.of(e);
        }
    }
    return Optional.empty();
} 
```

或使用流 API：

```
public static Optional<EnumStatus> fromId(Long id) {
    return Stream.of(values())
            .filter(e -> e.id.equals(id))
            .findFirst();
} 
```

在*Effective Java 3rd Edition*一书中，作者*Joshua Bloch*推荐了一种有效的解决方案，该解决方案也`Optional`用作返回类型：

```
private static final Map<String, Operation> stringToEnum =
    Stream.of(values()).collect(
        toMap(Object::toString, e -> e));

public static Optional<Operation> fromString(String symbol) {
    return Optional.ofNullable(stringToEnum.get(symbol));
} 
```

Bloch 的使用理由`Optional`：

> ...请注意，该`fromString`方法返回一个`Optional<Operation>`. 这允许该方法指示传入的字符串不代表有效的操作，并迫使客户端面对这种可能性

# java - 构造函数 this() 不必要吗？

> ID：15380245
> 
> 赞同：4
> 
> 时间：2013-03-13T08:29:08.617
> 
> 标签：java, constructor, this, superclass, default-constructor

有一个类 U1 正在扩展类 U。类 U 是空的......

在 U1 的构造函数中有第一行，调用超类的构造函数......

```
public U1(Plate plate, int order)
{
   super(plate, order);
...

} 
```

现在我想删除 U1 类并在 U1 类中执行迄今为止在 U1 中所做的任何事情......所以，现在我不需要调用超类的构造函数，因为 U 类不会有任何超类......

是`this(plate, order)`不必要的，我可以省略吗？

这就是我的 U 构造函数的样子：

```
public U(Plate plate, int order)
    {
       this(plate, order);
    ...

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T08:31:16.833

这是不必要的，我希望它会导致堆栈溢出，因为您从构造函数中调用构造函数本身。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T08:37:34.510

这将导致编译错误。JLS第[8.8.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.7)说：

> *“构造函数通过一系列涉及 . 的一个或多个显式构造函数调用直接或间接调用自身是编译时错误`this`。”*

在这种情况下，构造函数直接调用自身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:02:28.573

在如下示例中，我们将得到错误：递归构造函数调用，

```
class TestConstruct{
 public TestConstruct(){
  this();
  System.out.println("constructor of Test class");
 }//end of constructor 
}//end of class TestConstruct
public class AppConstruct{ 
 public static void main(String[] a){
 Test t = new Test(); 
 }//end of main
}//end of AppConstruct 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:37:12.887

并不是说你可以忽略它。您必须省略它，否则它将充当永无止境的递归调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T08:46:43.947

我们在构造函数中调用super()来初始化继承自超类的实例变量，所以如果没有超类就不需要调用super()——java.lang.Object例外。如果多构造函数在哪里，我们可以通过 this() 调用其他构造函数，但不要调用构造函数本身，这会导致之前人们提到的坏事。

# c# - 布料数字化仪！制作真实布料的 3d 模型

> ID：15380246
> 
> 赞同：2
> 
> 时间：2013-03-13T08:29:09.350
> 
> 标签：c#, windows, vb.net, hardware

我有我正在做的这个项目。这是一家服装店，他需要他所有的衣服都可以作为 3d 对象在 PC 上用于以后的不同目的。

我一直在做一些研究，我想唯一可能的方法是让一个模特穿上每块布，她站在一块可以单向旋转的板上，相机会以不同的角度拍摄。

我可能会使事情复杂化，但我需要知道是否存在任何其他技术来实现这一点。

我不介意任何想法，即使它需要电子设备。一些提示会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:07:32.260

我认为您正在搜索的是一个名为reconstructMe的程序，这[是链接](http://reconstructme.net/)。

你需要的是一个 Kinect。其他一些程序也可以[简单的谷歌搜索](https://www.google.nl/search?q=kinect+scanning&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3anl%3aofficial&client=firefox-a#hl=en&sugexp=les%3B&gs_rn=5&gs_ri=psy-ab&tok=wwZ9arYyN-BnruN4zF5znw&pq=kinect%20scanning&cp=16&gs_id=3t&xhr=t&q=kinect+scanning+software&es_nrs=true&pf=p&client=firefox-a&hs=Ni3&rls=org.mozilla%3anl%3Aofficial&sclient=psy-ab&oq=kinect+scanning+&gs_l=&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.43287494,d.ZWU&fp=8d3af1e5b12e0f78&biw=826&bih=878)

我希望这有帮助！

**编辑：**

如果你想自己做事，你可能想看看这里的点云库。它确实需要一些 C++ 编码，不过我正在开发 C# 版本，因此有关包装的更多信息，您可以向我发送消息。

# video - 使用 FFMPEG 转换文件...文件末尾没有 MOOV ATOM

> ID：15380249
> 
> 赞同：1
> 
> 时间：2013-03-13T08:29:13.333
> 
> 标签：video, ffmpeg, qt-faststart

我正在执行以下操作：

1.  我在 Delphi XE2 程序中使用 FFMPEG 将收到的任何文件转换为 mp4 文件。
2.  转换后，我还使用 qr-faststart 将原子移动到文件的开头。

问题是在转换某些文件（并非总是）后，qr-faststart 会出现以下错误：

*   “遇到非 QT 顶级原子（这是 QuickTime 文件吗？）”
*   “文件中的最后一个原子不是 moov 原子”

FFMPEG 的命令行是：`-i "sourceFile" -sameq "destinationFile"`

qt-faststart 的命令行是`"sourceFile" "destFile"`

这是两个函数的完整代码：

```
function TfrmMain.ConvertFile(aVideoFile: String; var aNewFile: String): Boolean;
var SEInfo: TShellExecuteInfo;
    ExitCode: DWORD;
    ExecuteFile, ParamString, StartInString: string;
    tmpVideoFile : String;
    logCommand   : String;
begin
  logMain.WriteFeedBackMessage(Format('enter ConvertFile %S ...', [aVideoFile]), '', EVENTLOG_INFORMATION_TYPE, False);
  Result := False;
  StartInString := edConverterPath.Text;
  tmpVideoFile  := ExtractFileName(aVideoFile);
  aNewFile      := ChangeFileExt(tmpVideoFile, '.mp4');
  if tmpVideoFile = aNewFile then begin
    logMain.WriteFeedBackMessage('the file is already converted ...', '', EVENTLOG_INFORMATION_TYPE, False);
    if OptimizeFastStart(aVideoFile) then begin
      Result := True;
    end;
    Exit;
  end;
  aNewFile := ExtractFilePath(aVideoFile) + aNewFile;
  if FileExists(aNewFile) then begin
    DeleteFile(aNewFile);
  end;
  logCommand := '';
  if ckLog.Checked then begin
    logCommand := ' -loglevel verbose -report';
  end;
  ParamString := '-i "' + aVideoFile + '" -sameq "' + aNewFile + '" ' + logCommand;
  logMain.WriteFeedBackMessage(Format('ParamString %S', [ParamString]), '', EVENTLOG_INFORMATION_TYPE, False);
  ExecuteFile := IncludeTrailingBackslash(StartInString) + 'ffmpeg.exe';
  if FileExists(ExecuteFile) then begin
    FillChar(SEInfo, SizeOf(SEInfo), 0) ;
    SEInfo.cbSize := SizeOf(TShellExecuteInfo) ;
    with SEInfo do begin
      fMask := SEE_MASK_NOCLOSEPROCESS;
      Wnd := Application.Handle;
      lpFile := PChar(ExecuteFile) ;
      //ParamString can contain the application parameters.
      lpParameters := PChar(ParamString) ;
      //  StartInString specifies the  name of the working directory. If ommited, the current directory is used.
      lpDirectory := PChar(StartInString) ;
      nShow := SW_SHOWNORMAL;
    end;
    if ShellExecuteEx(@SEInfo) then begin
      repeat
        Application.ProcessMessages;
        GetExitCodeProcess(SEInfo.hProcess, ExitCode) ;
      until (ExitCode <> STILL_ACTIVE) or Application.Terminated;
    end;
    if FileExists(aNewFile) then begin
      logMain.WriteFeedBackMessage(Format('Converting Video %S succesfull!', [aVideoFile]), Format('File %S was created.', [aNewFile]), EVENTLOG_INFORMATION_TYPE, True, False, False);
      if OptimizeFastStart(aNewFile) then begin
        Result := True;
      end;
    end;
  end else begin
    logMain.WriteFeedBackMessage(Format('File %S does not exist on the server!', [ExecuteFile]), 'The converter cannot be located on the disk!' + #13#10 + ExecuteFile, EVENTLOG_ERROR_TYPE, True, False, False);
  end;
end; 
```

快速开始就在这里

```
function TfrmMain.OptimizeFastStart(aVideoFile: String): Boolean;
var SEInfo: TShellExecuteInfo;
    ExitCode: DWORD;
    ExecuteFile, ParamString, StartInString: string;
    strVideoFile : String;
    newVideoFile : String;
    startCommand : String;
begin
  // you need fast start utility
  logMain.WriteFeedBackMessage(Format('enter OptimizeFastStart %S ...', [aVideoFile]), '', EVENTLOG_INFORMATION_TYPE, False);
  Result := False;
  StartInString := edConverterPath.Text;
  strVideoFile  := ExtractFileName(aVideoFile);
  newVideoFile  := 'TMP_' + strVideoFile;
  if strVideoFile = aVideoFile then begin
    strVideoFile  := StartInString + strVideoFile;
    newVideoFile  := StartInString + newVideoFile;
  end;
  if not FileExists(strVideoFile) then begin
    logMain.WriteFeedBackMessage(Format('file %S dont exist...', [strVideoFile]), '', EVENTLOG_INFORMATION_TYPE, False);
    Exit;
  end;
  if FileExists(newVideoFile) then begin
    DeleteFile(newVideoFile);
  end;

  ParamString := Format('"%S" "%S"', [strVideoFile, newVideoFile]);
  ExecuteFile := IncludeTrailingBackslash(StartInString) + 'qt-faststart.exe';
  if FileExists(ExecuteFile) then begin
    logMain.WriteFeedBackMessage(Format('source %S destination %S', [strVideoFile, newVideoFile]), '', EVENTLOG_INFORMATION_TYPE, False);
    FillChar(SEInfo, SizeOf(SEInfo), 0) ;
    SEInfo.cbSize := SizeOf(TShellExecuteInfo);
    with SEInfo do begin
      fMask := SEE_MASK_NOCLOSEPROCESS;
      Wnd := Application.Handle;
      lpFile := PChar(ExecuteFile) ;
      lpParameters := PChar(ParamString);
      lpDirectory  := PChar(StartInString);
      nShow        := SW_SHOWNORMAL;
    end;
    if ShellExecuteEx(@SEInfo) then begin
      repeat
        Application.ProcessMessages;
        GetExitCodeProcess(SEInfo.hProcess, ExitCode) ;
      until (ExitCode <> STILL_ACTIVE) or Application.Terminated;
    end;
    logMain.WriteFeedBackMessage(Format('after file executed...', [strVideoFile]), '', EVENTLOG_INFORMATION_TYPE, False);
    sleep(500);
    Application.ProcessMessages;
    if FileExists(newVideoFile) then begin
      DeleteFile(strVideoFile);
      Application.ProcessMessages;
      sleep(500);
      Application.ProcessMessages;
      logMain.WriteFeedBackMessage(Format('before rename file...', [strVideoFile]), '', EVENTLOG_INFORMATION_TYPE, False);
      if RenameFile(newVideoFile, strVideoFile) then begin
        logMain.WriteFeedBackMessage(Format('rename file OK...', [strVideoFile]), '', EVENTLOG_INFORMATION_TYPE, False);
        Result := True;
        logMain.WriteFeedBackMessage(Format('Processing Video %S for WEB succesfull!', [strVideoFile]), '', EVENTLOG_INFORMATION_TYPE, True);
      end;
    end else begin
      logMain.WriteFeedBackMessage(Format('file %S does not exist!...', [newVideoFile]), '', EVENTLOG_INFORMATION_TYPE, True);
    end;
  end else begin
    logMain.WriteFeedBackMessage('Cannot find the qt-faststart.exe converter on the disk!', ExecuteFile, EVENTLOG_ERROR_TYPE, True);
  end;
end; 
```

谁能建议我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:59:37.510

去掉 -sameq 选项，不代表质量一样。另外，你有什么版本的FFMpeg？如果您没有最新的，请更新。那应该可以解决您的问题。您可以发布完整的命令行输出吗？

# javascript - javascript文件未加载

> ID：15380250
> 
> 赞同：-4
> 
> 时间：2013-03-13T08:29:21.120
> 
> 标签：javascript, jsf-2

试图从我的页面导入我的 js 文件。

我的页面在`webcontent/mydomain/templates/page.xhtml`

我的js在`webcontent/mydomain/test/scripts`

在 page.xhtml

```
<script type="text/javascript" src="../test/scripts/test.js"></script> 
```

但是脚本仍然没有被选中。

谁能告诉我需要如何在 src.src 中给出路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:32:03.930

试试这个：

```
<script src="/test/scripts/test.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:02:11.857

假设它`webcontent`是公共 Web 内容的根目录，因此`/mydomain`也是公共文件夹，因此您的 JavaScript 可通过 独立使用`http://localhost:8080/context/mydomain/test/scripts/test.js`，假设域为`http://localhost:8080`，上下文路径为`/context`，则应执行以下操作：

```
<script src="#{request.contextPath}/mydomain/test/scripts/test.js"></script> 
```

这将生成一个具有动态内联上下文路径的域相对 URL，这比摆弄`../`使 URI 相对于当前请求 URI（如您在浏览器的地址栏中看到）而不是与许多初学者错误地假设的模板文件。

# c# - 在控制台应用程序中检测系统范围的滚动

> ID：15380252
> 
> 赞同：3
> 
> 时间：2013-03-13T08:29:23.303
> 
> 标签：c#, background, scroll, console-application

我想知道如何制作一个控制台应用程序来检测用户是否用鼠标滚轮滚动（屏幕上的任何位置）。

我希望它成为控制台应用程序的原因是我可以在后台运行它。我现在已经搜索了很多，但似乎找不到我需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:40:20.867

你可以阅读这个主题：

[鼠标滚轮事件 (C#)](https://stackoverflow.com/questions/479284/mouse-wheel-event-c)

如果您有自己的控件，则可以通过设计器或在代码中动态设置这些东西。但是，鼠标需要位于您的控件之上，这样您才能接收到事件。因此，在您的情况下，您需要在消息过滤器上注册。小心，你不要在那里做太多事情。如果你在这个地方做很多事情，这可能会减慢你的整个应用程序：

```
public bool PreFilterMessage(ref Message m) 
```

您也可以在不显示表单的情况下设置 Windows 表单项目。这是一个 windows 窗体项目的 program.cs 代码：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new WindowlessApplicationContext());

    }
}

/// <summary>
/// The window less application context.
/// </summary>
internal class WindowlessApplicationContext : ApplicationContext
{
    /// <summary>
    /// Standard constructor.
    /// </summary>
    public WindowlessApplicationContext()
    {
        try
        {
            //Your code

        }
        // you mayy add catch here
        finally
        {
            //Close process
            Environment.Exit(0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:43:40.850

实现它的一种方法是通过 P/Invoke 使用原始输入。从这里开始：

```
http://msdn.microsoft.com/en-us/library/ms645543(v=vs.85).aspx,
http://msdn.microsoft.com/en-us/library/ms645536(v=vs.85).aspx. 
```

参考自： http: [//www.codeproject.com/Questions/217948/I-need-to-capture-mouse-events-in-Console](http://www.codeproject.com/Questions/217948/I-need-to-capture-mouse-events-in-Console)

# node.js - 为代码库运行多个节点应用程序实例的优缺点

> ID：15380253
> 
> 赞同：0
> 
> 时间：2013-03-13T08:29:26.613
> 
> 标签：node.js, express

我们可以为代码库运行多个节点应用程序，我们每次都需要在差异端口上启动它们，但我不确定这样做是否好。

我可以看到这种方法的以下优点和缺点

优点：

*   多个域，如 sub1.domain.com、sub2.domain.com 等，共享相同的代码库。
*   在一个地方更新代码。

    你还有什么想提的优点吗？

缺点：

*   可能会导致读取某些文件或其他一些多进程问题时出现死锁。

    你还想提其他什么缺点吗？

共享代码库是个好举措吗？

请分享你的经验。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:49:40.510

您实际上是在生成应用程序的几个实例，这本身并不是一件坏事或一件好事，它与您的应用程序所做的事情有关。如果应用程序不访问将与自身实例共享的任何资源，这不是问题，您可以根据需要生成任意数量的实例，用于您认为合适的任何目的。

但是，如果您的应用程序使用任何共享资源，例如数据库或平面文件，则需要考虑竞争条件和死锁。这在符合 ACID 的数据库上处理得非常好，在面向文档的数据库上这不是那么成熟，并且需要您对所使用的技术和语言有很好的掌握。

如果没有明显的理由运行应用程序的多个实例，请不要这样做。

一旦你开始沿着多个实例的路线走，你必须围绕瓶颈、网络流量、备份和许多其他让人们头疼的事情进行设计，不要仅仅因为你可以就这样做。

# android - 退出全屏活动时状态栏闪烁

> ID：15380257
> 
> 赞同：8
> 
> 时间：2013-03-13T08:29:39.763
> 
> 标签：android, statusbar, flicker, android-fullscreen

我注意到在以下场景中发生了令人讨厌的闪烁：显示全屏活动，然后启动另一个非全屏活动。

在我的应用程序中，我在第二个活动的顶部使用了一个操作栏，我清楚地看到在活动之间切换时闪烁是如何完成的。

当状态栏出现时，它不会顺利地将我的活动向下推，但速度非常快，并且伴随着令人讨厌的闪烁。

是否有一些 API 可以用来控制这种行为？还是其他一些解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-14T13:02:59.377

我有同样的问题。下面的解决方法修复了它，在完成您的第一个活动之前放置此代码。

```
Handler handler = new Handler();
handler.post(new Runnable() {
    @Override
    public void run() {
        YourActivity.this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    }
}); 
```

# php - 通过来自本地网络中的服务器的样本流式传输音频

> ID：15380259
> 
> 赞同：0
> 
> 时间：2013-03-13T08:29:48.873
> 
> 标签：php, javascript, audio, stream

对不起，如果我的问题很愚蠢，但我是网络开发的初学者。我正在尝试使用 php 和 javascript 编写代码，但找不到答案或一些示例如何解决我的问题。

问题是将音频样本（不是文件）从服务器发送到客户端并在客户端播放此音频。

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:06:38.900

在浏览器中有几种播放音频的方法：

**1）最常见的Flash插件：**

使用 Flash，您可以处理原始 PCM 样本并播放它们，但在这种情况下，您至少需要 Flash API 和 ActionScript 3 的基本知识。

**2) HTML5 视频/音频 API (Javascript)，但这些规范尚未完成：**

使用当前的 API，您无法在没有媒体容器的情况下直接处理 PCM。谷歌目前浏览器支持的容器，不同的浏览器支持不同的容器和不同的编解码器。

**3) Windows Media Player 等其他插件：**

也许你会发现，适合你的插件，但要考虑到，如果你打算将你的声音流式传输给大量观众，那么你最好使用像 flash 这样的流行插件。

概括：

通过网络发送 PCM 样本比压缩音频慢得多，但就您在本地网络中而言，这应该不是问题。

一种解决方案是，将您的样本包装在服务器上（使用 PHP），您应该根据您选择的客户端选择媒体容器。

或者学习一点flash，制作可以播放PCM样本的flash swf。

# c# - 如何在不依赖副作用的情况下创建两个序列？

> ID：15380262
> 
> 赞同：1
> 
> 时间：2013-03-13T08:30:01.533
> 
> 标签：c#, sequence

假设您必须处理一个序列，`InputType`该序列产生两个序列，一个是 type `OutputType`，另一个是 type `ErrorType`。

一个基本的实现可能是：

```
class SeqProcessor {
  private IEnumerable<ErrorType> errorTypes;

  public SeqProcessor()
  {
    this.errorTypes = Enumerable.Empty<ErrorType>;
  }

  public IEnumerable<ErrorType> Errors
  {
    get { return this.errors; } 
  }

  public IEnumerable<OutputType> ProcessItems(IEnumerable<InputType> inputTypes)
  {
     yield return new OutputType();
     if (err) this.errorTypes = this.errorTypes.Concat(new ErrorType());
     yield return new OutputType();
     yield return new OutputType();
     if (err) this.errorTypes = this.errorTypes.Concat(new ErrorType());
     // ...
     yield break;
  }
} 
```

例如，我看到这两种选择：

*   在and和 let return之间使用通用接口（例如`IProduct`）（而不是使用 Linq 进行区分）。`OutputType``ErrorType``ProcessItems``IEnumerable<IProduct>`

*   定义一个`ErrorType`被调用的子类，`NoError`并让`ProcessItems`返回元组`IEnumerable<Tuple<OutputType, ErrorType>>`（如果没有错误，`NoError`将在元组中使用）。

**编辑：**

由于`ErrorType`在语义上不同`OutputType`，混合这些类型可能违反*单一责任原则*。委托的使用能否成为可接受的替代设计：

```
class SeqProcessor {
  public IEnumerable<OutputType> ProcessItems(
    IEnumerable<InputType> inputTypes,
    Action<ErrorType> onError)
  {
    yield return new OutputType();
    // ...
    onError(new ErrorType());
  }
} 
```

在这种情况下，您使用哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:07:31.083

第二种方法表明 NoError 实例是 NoError 的特化；这在实践中很少是真的。更有可能两者之间的共享功能很小，从而使第一种方法更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:19:34.300

根据您想要实现的目标，我在这里看到了多种可能的解决方案：

1.  保留原始实现（我将替换`private IEnumerable<ErrorType> errorTypes`它，但可以让您确定错误所属的项目）。在这种情况下，您遇到的*错误*将具有**警告**的意义（这也是我更喜欢 name 的`Warning`原因），因为它们与实际结果是分开的。

2.  仅当使用结果列表的其他函数确实可以使用错误输出时，对两种结果类型（即输出和错误）使用通用接口才有意义。我怀疑这是您的意图，但恕我直言，这将是有效的设计选择。

3.  正如 Pieter 指出的那样，拥有一个子类`NoError`真的`ErrorType`很讨厌。**但是**，更好的解决方案是使用和`ResultType`类型作为基础。这样，您就真正拥有了基类的*专业化*。不过，我想知道如果出现错误，输出是否会包含在内。原始元素？已处理但无效的元素？无效的？根据您想要实现的目标，这*可能*是合理的，但这很难从给定的信息中分辨出来，老实说，我怀疑这就是您想要的。`NoError``Error`

***   这`OnError`在许多情况下都是很好的做法，因为它具有很大的灵活性。但是，在这种情况下，您仍然需要考虑结果中的相应条目是什么。恕我直言，将它简单地排除在外可能是最好的选择，以避免处理任何一个`null`或任何一个特殊值。** 

 **总而言之，这种`OnError`方法似乎是最有希望的，尽管额外的信息可能会促使您采用其他提到的方法之一。**

# jquery - 在asp.net中通过进度条拖放文件上传

> ID：15380265
> 
> 赞同：0
> 
> 时间：2013-03-13T08:30:08.163
> 
> 标签：jquery, .net, asp.net-3.5

我想要拖放区域，我们需要在其中拖放要从桌面上传的文件/多个文件，并且文件也会自动上传并显示进度条。要取消上传过程，必须显示上传文件的取消按钮和删除按钮。文件上传后，也可以从我们上传文件的同一个地方下载文件。

我发现了很多 jQuery 插件，但没有一个提供所有功能。

我是 asp.net 和 jQuery 领域的新手。请指导我。我正在使用 asp.net 3.5 Framwork 和 Visual Studio 2008。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:00:32.727

我用过 jquery Upload File Demo http://blueimp.github.com/jQuery-File-Upload/[^]

然后添加下载功能

这样的方式

jquery中的下载功能文件上传这样的方式

[http://www.codeproject.com/Questions/563453/downloadplusfunctionalityplusinplusjqueryplusFilep](http://www.codeproject.com/Questions/563453/downloadplusfunctionalityplusinplusjqueryplusFilep)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:27:14.453

您可以使用 silverlight 多文件上传器。它提供了上传多个文件的最佳方式，客户端验证文件类型和文件大小等。此外，我们可以轻松地在 silverlight 中显示进度条（上传）。

看到这个链接。

[http://silverlightfileupld.codeplex.com/](http://silverlightfileupld.codeplex.com/)

# java - 为什么 Eclipse 蚂蚁编辑器会警告我

> ID：15380269
> 
> 赞同：4
> 
> 时间：2013-03-13T08:30:25.087
> 
> 标签：java, eclipse, ant

我在 Eclipse 中使用 ANT 编辑器时遇到了一些麻烦（真的很烦人），它向我显示警告*“未找到参考 build.classpath”。*在以下块上：

```
<target name="generate" depends="..., mvn-depends">
    <taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
        <classpath refid="build.classpath" />
    </taskdef>
    ...
</target> 
```

目标`mvn-depends`看起来像这样：

```
<target name="mvn-depends">
    <artifact:dependencies pathId="build.classpath">
        <pom refid="my.pom" />
    </artifact:dependencies>
</target> 
```

构建文件中的其余引用`build.classpath`没有引发任何警告，并且构建运行良好，没有任何错误，所以它似乎并不多。

尽管如此，每次我必须编辑该文件时，忽略警告都会让我感到有点肮脏。具体来说，不知道这是 Eclipse ant 构建文件验证代码中的错误还是构建文件的结构方式中的潜在问题，Eclipse 已经确定了这一点。

如果有人对为什么显示此警告有任何想法，以及是否可以安全地忽略或什至禁用偏好并愿意分享这些知识，我绝对会感激这些知识。

**编辑：**

根据要求，这是一个`build.classpath`不会导致任何警告的引用示例：

```
<javac deprecation="off" debug="on" source="1.7" target="1.7" encoding="UTF-8"
       includeantruntime="false" memoryMaximumSize="512M" fork="true">
    <classpath refid="build.classpath" />
</javac> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:18:16.927

由于编辑器可以识别 refid 和 Ant 指定的其他元素，因此我猜想编辑器执行的操作类似于 Ant 的构建文件解析过程。

也就是说，把这个ant构建文件解析成一个`Project`对象，里面的引用`<taskdef>`可能会被检查，而`<javac>`可能不会。

由于 build.classpath 是在运行时设置的，并且它是由其他东西设置的`<classpath>`，所以 Eclipse 可能找不到它。

我没有强有力的证据证明这一点。但是可以做一些事情来让我们知道更多。

*   首先，将 复制`<javac>`到存在警告的同一目标 `<taskdef>`，以查看是否`<javac>`收到警告；

*   然后，将 复制`<taskdef>`到presetdefed 所在的同一个目标上 `<javac>`，看看是否`<taskdef>`仍然得到警告；

*   第三，在目标“生成”中，注释掉该`<taskdef>`部分，并检查`<xjc ... />`调用是否收到警告。

对于第一个，我期待“NO”，而对于其他两个，我期待“YES”。否则，我的猜测是错误的。

并且它只是一个警告是有道理的——Eclipse 在编辑时找不到的东西可能在运行时存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:43:05.780

确保您已正确指定路径元素位置，如下所示。

```
<property name="dependencyfinder.home" value="C:/DependencyFinder"/>

<path id="dependencyfinder">
    <pathelement location="${dependencyfinder.home}/lib/aaa.jar"/> 
</path>

<taskdef classname="com.sun.tools.xjc.XJCTask">
    <classpath refid="dependencyfinder"/>
</taskdef> 
```

注意：DependencyFinder 有一个文件夹 lib，而 lib 有 aaa.jar

请查看以下链接以获取更多信息
[点击这里](http://depfind.sourceforge.net/tasks/definitions.html)

# c# - 在 Visual Studio 2010 中突出显示 Goto

> ID：15380277
> 
> 赞同：3
> 
> 时间：2013-03-13T08:30:50.890
> 
> 标签：c#, visual-studio-2010

我目前正在翻译旧的生成的 C# 代码，其中充满了**goto**。请不要对此发表评论，我知道这很可怕。无论如何，有没有办法/扩展/任何使 goto 语句更具可读性的方法？找到代码跳转到的地方很痛苦。我不想使用搜索功能，因为它让我失去了方向。

我发现的只是：http: [//visualstudiogallery.msdn.microsoft.com/4b286b9c-4dd5-416b-b143-e31d36dc622b](http://visualstudiogallery.msdn.microsoft.com/4b286b9c-4dd5-416b-b143-e31d36dc622b) ，它不起作用。

你能推荐什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:24:03.853

可能有点晚了，但您可以使用 Visual Studio 可扩展性构建自己的（因此也可以添加自定义行为）：[编辑器内部：标签和分类器](http://msdn.microsoft.com/fr-fr/library/dd885240.aspx#tagsandclassifiers)。步骤是：

1）创建一个Editor Classifier项目（内置项目类型）

2）删除现有的类文件

3）添加下面的代码。它将代码部分中的所有“goto”语句着色为红色：

![转到着色器](../Images/ae34fbbdc2d64bc8eea55bf39025a8b1.png)

```
internal class GotoTagger : ITagger<GotoTag>
{
    private ITextSearchService _textSearchService;
    private ITextStructureNavigator _textStructureNavigator;

    event EventHandler<SnapshotSpanEventArgs> ITagger<GotoTag>.TagsChanged { add { } remove { } }

    public GotoTagger(ITextSearchService textSearchService, ITextStructureNavigator textStructureNavigator)
    {
        _textSearchService = textSearchService;
        _textStructureNavigator = textStructureNavigator;
    }

    public IEnumerable<ITagSpan<GotoTag>> GetTags(NormalizedSnapshotSpanCollection spans)
    {
        if (spans.Count == 0)
            yield break;

        if (spans.Count > 0)
        {
            // look for 'goto' occurrences
            foreach (SnapshotSpan span in _textSearchService.FindAll(new FindData("goto", spans[0].Snapshot, FindOptions.WholeWord | FindOptions.MatchCase, _textStructureNavigator)))
            {
                yield return new TagSpan<GotoTag>(span, new GotoTag());
            }
        }
    }
}

    [Export(typeof(IViewTaggerProvider))]
    [TagType(typeof(TextMarkerTag))]
    [ContentType("code")] // only for code portion. Could be changed to csharp to colorize only C# code for example
    internal class GotoTaggerProvider : IViewTaggerProvider
    {
        [Import]
        internal ITextSearchService TextSearchService { get; set; }

        [Import]
        internal ITextStructureNavigatorSelectorService TextStructureNavigatorSelector { get; set; }

        public ITagger<T> CreateTagger<T>(ITextView textView, ITextBuffer buffer) where T : ITag
        {
            if (textView.TextBuffer != buffer)
                return null;

            return new GotoTagger(TextSearchService, TextStructureNavigatorSelector.GetTextStructureNavigator(buffer)) as ITagger<T>;
        }
    }

    internal class GotoTag : TextMarkerTag
    {
        public GotoTag() : base("goto") { }
    }

    [Export(typeof(EditorFormatDefinition))]
    [Name("goto")]
    [UserVisible(true)]
    internal class GotoFormatDefinition : MarkerFormatDefinition
    {
        public GotoFormatDefinition()
        {
            BackgroundColor = Colors.Red;
            ForegroundColor = Colors.White;
            DisplayName = "Goto Word";
            ZOrder = 5;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:59:32.380

你可以考虑[DevExpress CodeRush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)。`goto`语句会得到一个像这样的箭头：![转到箭头](../Images/c7a773ca7b3038f1a4e582907bfab8a6.png). 将鼠标悬停在箭头上会突出显示标签后面的语句（如果它已经可见），单击它使其可见并将光标移动到该语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:56:54.580

尝试 ReSharper 的[Navigate to function exits](http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Navigate_from_Here__Function_Exits.html)。

或 Coderush 的[流程中断图标](http://documentation.devexpress.com/#CodeRush/CustomDocument3527)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T10:51:43.447

另请注意，您可以使用“Ctrl”+“-”跳回到您正在查看的代码中的最后一个位置。这可能很明显，但在我看来，CSharpie 可能不知道这个热键。

# azure - Azure 网站 Git 部署错误

> ID：15380278
> 
> 赞同：0
> 
> 时间：2013-03-13T08:30:53.953
> 
> 标签：azure, orchardcms, azure-web-app-service, kudu

我使用来自 BitBucket 的 Git Deploy 将 Orchard CMS 网站部署到 Windows Azure。

就在我最近的更改中，我在尝试部署时遇到了错误：

> 该进程无法访问文件“C:\DWASFiles\Sites[MyWebsite]\VirtualDirectory0\site\wwwroot\App_Data\Dependencies\Joel.Net.Akismet.dll”，因为它正被另一个进程使用。

鉴于它的 Azure 网站，我不能“停止 AppPool”或类似的东西。我已经尝试停止该站点，但是在站点停止的情况下我无法进行部署。我不知道如何进一步排除故障。

**尝试通过 ftp 更新**

没有“重新启动”选项，但我可以停止并启动站点，这不起作用（502 Web 服务器错误）。

通过 ftp 删除 \App_Data\Dependencies 文件夹中的文件不起作用，并得到相同的错误。

停止站点，然后通过 ftp 上传文件确实有效。但是尝试通过 Git 重新部署，我得到了一个类似的错误：

> 命令：deploy.cmd 处理基本网站部署。KuduSync.NET 从：'C:\DWASFiles\Sites[MyWebsite]\VirtualDirectory0\site\repository' 到：'C:\DWASFiles\Sites[MyWebsite]\VirtualDirectory0\site\wwwroot' 错误：进程无法访问文件' C:\DWASFiles\Sites[MyWebsite]\VirtualDirectory0\site\wwwroot\App_Data\Dependencies\Markdown.dll' 因为它正被另一个进程使用。复制文件：'App_Data\Dependencies\dependencies.compiled.xml' 复制文件：'App_Data\Dependencies\dependencies.xml' 复制文件：'App_Data\Dependencies\Ionic.Zip.dll' 复制文件：'App_Data\Dependencies\Joel. Net.Akismet.dll' 复制文件：'App_Data\Dependencies\Markdown.dll' 在网站部署过程中出现错误。处理基本网站部署。

我确信它不仅仅是一个 dll，而是 \App_Data\Dependencies 文件夹中的所有 dll 在 Git 部署期间都不会“停止”。

**尝试在 Azure 网站上设置另一个站点来执行 Git 部署**

我已经为 Git 设置了另一个 Azure 站点来部署相同的代码分支，这工作正常。

但是当我将我的域名切换到新的 Azure 网站时，我的新网站不再工作，但我的旧网站可以接受 git deploy。

因此，我的域名指向它的网站，一定是有活动导致更新停止工作。有没有办法停止站点***并***进行 Git 部署？

* * *

因此，根据@David 的评论从我的仓库中删除 Dependencies 文件夹后，我收到了一个新错误：

> 命令：deploy.cmd 处理基本网站部署。KuduSync.NET 从：'C:\DWASFiles\Sites[MyWebsite]\VirtualDirectory0\site\repository' 到：'C:\DWASFiles\Sites[MyWebsite]\VirtualDirectory0\site\wwwroot' 错误：访问路径 'Joel. Net.Akismet.dll' 被拒绝。复制文件：'.gitignore' 删除文件：'App_Data\Dependencies\Joel.Net.Akismet.dll' 网站部署过程中出现错误。处理基本网站部署。

似乎 Kudu 同步发现 Dependencies 文件夹中没有文件，并试图删除它们！当我根本没有 Dependencies 文件夹时也会发生同样的情况 - 它试图删除 Dependencies 文件夹。

@David 是否有 kudu 忽略文件？

* * *

**解决了！**

好的，我坚持下去，我终于解决了。

*   我删除了整个 app_data 文件夹（先备份它），然后将其签入 Git。
*   这被推送到 Azure，给了我一个全新的 Orchard 站点
*   然后我重新添加了我的 app_data 但选择忽略 app_data/dependencies 文件夹
*   推送到 Git 并完美更新到 Azure

希望我的下一次检查仍然有效（手指交叉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:06:49.293

我猜问题的根源是您将`App_Data\Dependencies`文件夹提交到您的存储库中。这个文件夹是 Orchard 动态创建的，不应该在你的仓库中。

我怀疑如果你不这样做（通过使用.gitignore），一切都会正常工作，你不会得到这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:37:56.497

您可以在部署前重新启动网站，这类似于回收应用程序池。只需从仪表板上的页脚点击重新启动按钮。

# c# - 在一条记录上绑定我的网格视图的最简单方法是什么（不同的不同数据）

> ID：15380281
> 
> 赞同：1
> 
> 时间：2013-03-13T08:31:00.490
> 
> 标签：c#, asp.net, linq, gridview, datarowview

将我的网格视图绑定到单个数据行的最简单方法是什么：

例如，我有以下数据：

```
dep_code = 3;
dep_name = "computer science";
boss_num = 356;
boss_name ="Ahmed"; 
```

我想在我的gridview 上绑定这些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:34:12.517

我认为列表列表应该是最简单的

```
List<List<string>> list = {{dep_code,dep_name,boss_num,boss_name}};
GridView1.DataSource = list;
GridView1.DataBind(); 
```

# extjs - 具有远程缓冲存储的 ExtJS 网格无法呈现第一页

> ID：15380287
> 
> 赞同：3
> 
> 时间：2013-03-13T08:31:08.420
> 
> 标签：extjs, extjs4

ExtJS 版本：4.1.0

我有一个带有远程缓冲存储的无限滚动网格，声明如下：

```
Ext.define('App.store.UserGridStore', {
    extend: 'Ext.data.Store',
    autoLoad: true,
    buffered: true,
    pageSize: 30,
    leadingBufferZone:60,
    trailingBufferZone:60,
    scrollToLoadBuffer:20,
    numFromEdge:20,
    clearOnPageLoad:false,

    isSortable: true,
    remoteSort: true,
    proxy: {
        type: 'ajax',
        url: 'Service/data',
        reader: {
            type: 'json',
            root: 'data',
            noCache: true,
            successProperty: 'success',
            totalProperty: 'total'
        }
    }
}); 
```

在具有几页行的页面上，当用户一直向下滚动然后返回到第 1 页时，网格会重新呈现除第 1 页之外的所有页面（它只显示空白区域）。

商店似乎正确地触发了对我的后端服务的查询，并且该服务返回了正确的数据。但是，数据不会呈现在网格上。

任何解决此问题的指针？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:27:46.363

在我将 pageSize 设置为更大的数字（300）后，这个问题就消失了。发生这种情况的原因可能是由于 pageSize (30) 较低，商店无法处理太多 AJAX 调用。

# haskell - 函数定义中的模板数据类型

> ID：15380288
> 
> 赞同：2
> 
> 时间：2013-03-13T08:31:09.237
> 
> 标签：haskell

我的程序中有两个功能：

```
getWidth :: Size -> GLint
getWidth (Size a b) = a

getXPos :: Position -> GLint
getXPos (Position a b) = a 
```

我意识到这两个函数在做同样的事情，唯一的区别是参数类型。问题是：我如何编写这样一个通用函数：

```
getFirst :: ANYTHING -> a
getFirst (ANYTHING a b) -> a 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T11:55:09.043

对于您的问题，这可能有点矫枉过正，但也许对于偶然发现这个问题的其他人会很有用。

[通过使用GHC 的泛型编程](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/generic-programming.html)，您可以实现一个真正的泛型函数，该函数适用于具有单个构造函数和两个字段的任何数据类型。

我们先来看看类型签名。您想编写一个函数，例如

```
getFirst :: ANYTHING -> a 
```

在 Haskell 中，可以是“任何东西”的类型用类型变量表示（就像结果类型一样`a`），所以让我们写

```
getFirst :: t -> a 
```

然而，拥有一个完全多态的类型不允许我们以任何方式操作该类型，因为我们无法对其内部结构做出任何假设。因此我们需要写一些关于类型的约束`t`。

第二件事是多态返回类型（`a`上述）意味着返回类型是根据调用站点推断的，本质上意味着调用者能够“请求”第一个字段的任何可能类型。这显然是不可能的，因为例如`Size`唯一有效的返回类型是`GLint`. 所以我们需要声明返回类型，使它依赖于类型`t`。

```
getFirst :: (Generic t, GPair (Rep t)) => t -> FirstT (Rep t) 
```

现在，这是一个相当复杂的类型签名，但本质是，对于任何`t`泛型且具有`Rep t`有效泛型对 ( `GPair`) 的泛型表示的任何类型，我们都可以访问具有 type 的对的第一个字段`FirstT (Rep t)`。

类型类`GPair`可以这样定义

```
class GPair g where
    type FirstT g   -- type of the first field in the pair
    type SecondT g  -- type of the second field in the pair

    gGetFirst  :: g x -> FirstT g
    gGetSecond :: g x -> SecondT g 
```

这个类型类引入了函数`gGetFirst`，`gGetSecond`它不作用于对类型本身，而是作用于它的泛型表示。类型声明`FirstT`和`SecondT`所谓的关联类型同义词是[TypeFamilies](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/type-families.html)语言扩展的一部分。我们在这里声明的是，`FirstT`并且`SecondT`是由 type 确定的某些现有的、未知类型的同义词`g`。

类型的通用表示包含在元数据描述中，其中包含数据类型名称、构造函数名称、记录字段名称等信息。在这种情况下，我们不需要任何这些信息，所以第一个实例`GPair`简单剥离元数据层。

```
instance GPair f => GPair (M1 i c f) where
    type FirstT (M1 i c f) = FirstT f
    type SecondT (M1 i c f) = SecondT f

    gGetFirst  = gGetFirst . unM1
    gGetSecond = gGetSecond . unM1 
```

接下来，我们需要为具有两个字段的通用构造函数创建一个实例。

```
instance (GField l, GField r) => GPair (l :*: r) where
    type FirstT  (l :*: r) = FieldT l
    type SecondT (l :*: r) = FieldT r

    gGetFirst  (l :*: _) = gGet l
    gGetSecond (_ :*: r) = gGet r 
```

然后我们定义了通用字段类型类`GField`，它作用于该对的单个字段。

```
class GField g where
    type FieldT g

    gGet :: g x -> FieldT g 
```

`GField`我们像上面那样剥离元数据层

```
instance GField f => GField (M1 i c f) where
    type FieldT (M1 i c f) = FieldT f

    gGet = gGet . unM1 
```

现在我们只需要为通用构造函数字段添加一个实例。

```
instance GField (K1 r t) where
    type FieldT (K1 r t) = t

    gGet (K1 x) = x 
```

现在我们可以实现真正通用的访问器函数`getFirst`和`getSecond`.

```
getFirst :: (Generic t, GPair (Rep t)) => t -> FirstT (Rep t)
getFirst = gGetFirst . from

getSecond :: (Generic t, GPair (Rep t)) => t -> SecondT (Rep t)
getSecond = gGetSecond . from 
```

该函数`from`是其中的一部分，`GHC.Generics`它将值转换为其通用形式。为此，需要实现数据类型`Size`和类型类。`Position``Generic`

```
{-# LANGUAGE DeriveGeneric #-}

data Position = Position GLInt GLInt deriving Generic
data Size     = Size GLInt GLInt deriving Generic 
```

让我们测试一下：

```
> let sz = Size 1 2
> let pos = Position 4 6
> getFirst sz
1
> getSecond pos
6 
```

这些函数还可以自动为适当的内置类型工作，例如元组：

```
> getSecond (1, "foo")
"foo" 
```

现在，您可能会认为对于一个简单、通用的函数来说，这是非常多的代码，这是一个有效的关注点。但是，在实践中，一旦您熟悉了泛型表示类型的结构，泛型实例的编写就相当容易和快速。

此外，GHC 的泛型编程的优点在于它是完全类型安全的（例如，与 Java 中的反射 API 不同）。这意味着如果您尝试使用具有不兼容类型的泛型函数，您会得到编译时错误而不是运行时异常。

例如：

```
a = getFirst (1,2,3) -- compile error because value has more than two fields

data Foo = Foo Int Int | Bar Float Float deriving Generic

b = getFirst $ Foo 1 2 -- compile error because the type has multiple constuctors 
```

这是尝试此操作的完整代码：

```
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE FlexibleContexts #-}
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE TypeOperators #-}
{-# LANGUAGE DeriveGeneric #-}

import GHC.Generics

class GPair g where
    type FirstT g
    type SecondT g

    gGetFirst  :: g x -> FirstT g
    gGetSecond :: g x -> SecondT g

instance GPair f => GPair (M1 i c f) where
    type FirstT (M1 i c f) = FirstT f
    type SecondT (M1 i c f) = SecondT f

    gGetFirst  = gGetFirst . unM1
    gGetSecond = gGetSecond . unM1

instance (GField l, GField r) => GPair (l :*: r) where
    type FirstT (l :*: r) = FieldT l
    type SecondT (l :*: r) = FieldT r

    gGetFirst  (l :*: _) = gGet l
    gGetSecond (_ :*: r) = gGet r

class GField g where
    type FieldT g

    gGet :: g x -> FieldT g

instance GField f => GField (M1 i c f) where
    type FieldT (M1 i c f) = FieldT f

    gGet = gGet . unM1

instance GField (K1 r t) where
    type FieldT (K1 r t) = t

    gGet (K1 x) = x

getFirst :: (Generic t, GPair (Rep t)) => t -> FirstT (Rep t)
getFirst = gGetFirst . from

getSecond :: (Generic t, GPair (Rep t)) => t -> SecondT (Rep t)
getSecond = gGetSecond . from 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T09:01:38.803

您需要一个[类型类](http://en.wikibooks.org/wiki/Haskell/Classes_and_types)（尽管 IMO 概括这两个功能不是一个好主意）：

```
class Dimension d where
    getX :: d -> GLint
    getY :: d -> GLint

instance Dimension Size where
    getX (Size x y) = x
    getY (Size x y) = y

instance Dimension Position where
    getX (Position x y) = x
    getY (Position x y) = y 
```

如果您只想编写更少的代码，请使用[记录语法](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#record-syntax)：

```
data Size = Size { getWidth :: GLint, getHeight :: GLint }
data Position = Position { getXPos :: GLint, getYPos :: GLint } 
```

# html - URL 中的片段 ID 不起作用

> ID：15380292
> 
> 赞同：1
> 
> 时间：2013-03-13T08:31:24.627
> 
> 标签：html

我在 Windows 7 上使用 Microsoft Internet Explorer 版本 8。我有一个包含片段 ID 的 HTML 文档。当我打开 Internet Explorer 并输入我的 HTML 页面的 URL 并在输入的 URL 中包含片段 ID 时，页面会显示但**不在**请求的部分。下面是我的 HTML 文档的第一部分。请注意，该文档非常大并且包含许多片段 ID。下面列出的只是我文档的一小部分。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html dir="rtl" lang="iw">
<head>
<meta http-equiv="Content-Type" content="text/html">
</head>
<body>
<!-- Lots of lines of text -->
<h2 id="George%20Best">George Best</h2> 
```

我使用以下网址：

```
file:///C:/HTML/MyPage.html#George%20Best 
```

该页面显示在文档中间的某处，但不靠近标题“George Best”。

请注意，如果我输入以下 URL，页面将显示在顶部：

```
file:///C:/HTML/MyPage.html 
```

然后，如果我手动将片段 ID 附加到 URL 的末尾，则显示会重新调整并显示文档的正确部分。我相信我错过了一些东西，但我不知道是什么。我希望读到这里的人能够启发我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:07:31.793

您正在尝试调用片段 ID，但您没有对引用进行 url 编码。试试这个。

```
file:///C:/HTML/MyPage.html#George%2520Best 
```

%25 是 % 符号的 url 编码。

# c# - 文件通过 FtpWebRequest 上传到 FTP 后无法删除

> ID：15380297
> 
> 赞同：2
> 
> 时间：2013-03-13T08:31:29.743
> 
> 标签：c#, file-upload, ftp

这是我上传文件的代码：

```
 FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(uri));

                reqFTP.Credentials = new NetworkCredential("****", "*****");
                reqFTP.Method = WebRequestMethods.Ftp.UploadFile;
                reqFTP.KeepAlive = false;
                reqFTP.UseBinary = true;
                reqFTP.UsePassive = true;

                reqFTP.ContentLength = stream.Length;
                // reqFTP.EnableSsl = true; // it's FTPES type of ftp

                int buffLen = 2048;
                byte[] buff = new byte[buffLen];
                int contentLen;

                try
                {
                    Stream ftpStream = reqFTP.GetRequestStream();
                    contentLen = stream.Read(buff, 0, buffLen);
                    while (contentLen != 0)
                    {
                        ftpStream.Write(buff, 0, contentLen);
                        contentLen = stream.Read(buff, 0, buffLen);
                    }

                    ftpStream.Flush();
                    ftpStream.Close();
                    ftpStream.Dispose();

                }
                catch (Exception exc)
                {

                    return false;
                }
                //delete image from local

                stream.Flush();
                stream.Close();
                stream.Dispose();

                DeleteFile(); 
```

`DeleteFile`方法尝试删除上传的文件；但它有一个错误，我的应用程序正在使用该文件，因此无法删除它。有没有人可以帮我解决这个问题？！

**更新1**：

```
private void DeleteFile()
    {
        DirectoryInfo DirInfo = new DirectoryInfo(@"Direectory Contains uploaded file");
        foreach (FileInfo file in DirInfo.GetFiles())
        {
            file.Delete();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:35:41.447

我假设您要删除本地文件？该错误表明该文件仍在使用中。将初始化流变量的代码包装在 using 块中。

# unix - 有什么方法可以登录到远程服务器并将控制权交还给用户？

> ID：15380299
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:31:31.997
> 
> 标签：unix

我想编写一个脚本，它可以登录到远程服务器并将控制权交还给终端上的用户，以便用户可以在此之后执行命令。基本上是为了避免登录服务器的冗长过程。请建议我如何做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:13:46.110

如果远程服务器在 linux 上运行，则使用 ssh 密钥来完成这项工作，那么您只需一个命令即可登录：

```
ssh <servername> 
```

# javascript - 谷歌地图中圆形标记的信息窗口

> ID：15380302
> 
> 赞同：0
> 
> 时间：2013-03-13T08:31:48.653
> 
> 标签：javascript, google-maps

问题：我试图在谷歌地图中点击圆形标记时获得一个信息窗口。

我的代码：

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<title>Google Maps JavaScript API v3 Example: Circle Simple</title>

<style type="text/css">
#map_canvas {
    height: 100%
}
</style>

<script src="https://maps.googleapis.com/maps/api/js?&sensor=false"
    type="text/javascript">
</script>

<script type="text/javascript">

var citymap = {};
citymap['Yelahanka'] = {
  center: new google.maps.LatLng(13.133754,77.585784),
  population: 2842518
};
citymap['Dodaballarpur'] = {
  center: new google.maps.LatLng(15.133754,77.585784),
  population: 8143197
};
citymap['Mekricircle'] = {
  center: new google.maps.LatLng(16.133754,77.585784),
  population: 3844829
}
var cityCircle;

function initialize() {
  var mapOptions = {
    zoom: 7,
    center: new google.maps.LatLng(13.133754,77.585784),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

  var contentString = '<div id="content">'+
  '<div id="siteNotice">'+
  '</div>'+
  '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
  '<div id="bodyContent">'+
  '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
  'sandstone rock formation in the southern part of the '+
  'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
  'south west of the nearest large town, Alice Springs; 450&#160;km '+
  '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
  'features of the Uluru - Kata Tjuta National Park. Uluru is '+
  'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
  'Aboriginal people of the area. It has many springs, waterholes, '+
  'rock caves and ancient paintings. Uluru is listed as a World '+
  'Heritage Site.</p>'+
  '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
  'http://en.wikipedia.org/w/index.php?title=Uluru</a> '+
  '(last visited June 22, 2009).</p>'+
  '</div>'+
  '</div>';

  var infowindow = new google.maps.InfoWindow({
      content: contentString
  });

  for (var city in citymap) {

    var populationOptions = {
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 6,
      fillColor: '#669999',
      fillOpacity: 0.45,
      map: map,
      center: citymap[city].center,
      radius: citymap[city].population / 200
    };
    cityCircle = new google.maps.Circle(populationOptions);
  }

  google.maps.event.addListener(populationOptions,'click', function() {
      alert("i am here in this infowindow");
      infowindow.open(map,populationOptions );
    });
}

    google.maps.event.addDomListener(window, 'load', initialize);
</script>

</head>
<body>
    <div id="map_canvas"></div>
</body>
</html> 
```

当我单击圆形标记时，它没有响应，并且我没有得到任何信息窗口。在上面的代码中，我试图在位置周围创建一个动态圆圈，其中 infowindow 显示单击圆形区域的一些细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:54:11.713

您传递给事件侦听器的对象似乎不正确。请使用以下代码在“cityCircle”上附加 onClick 事件。

```
google.maps.event.addListener(cityCircle,'click', function() {
      alert("i am here in this infowindow");
      infowindow.open(map,populationOptions );
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:42:43.060

请使用以下代码创建信息窗口。在 Loc 变量中，通过传递信息窗口需要打开的经度和纬度参数来生成位置。

```
var Loc = new google.maps.LatLng(latitude,longitude);
        var INFO_WINDOW_WIDTH = 352;                                
        var infowindow = new google.maps.InfoWindow({
        position :Loc,
        maxWidth: INFO_WINDOW_WIDTH
        });
        google.maps.event.addListener(cityCircle,'click', function() {
                                                infowindow.close();
    infowindow.setContent(contentString);
                                                infowindow.setOptions({pixelOffset: new google.maps.Size(0,0)});
                                                infowindow.open(map,this);
             }); 
```

# sql-server - 为什么在没有数据要插入的情况下调用插入触发器？

> ID：15380305
> 
> 赞同：5
> 
> 时间：2013-03-13T08:31:56.163
> 
> 标签：sql-server, sql-server-2005

我注意到一种对我来说非常奇怪的行为。如果我做了一个插入选择语句并且选择部分没有返回数据，插入部分仍然执行，甚至调用插入触发器（在插入触发器中，插入的伪表中有 0 行）。

例子：

```
insert into table1 column1
select column1 from table2 where condition = 'Never met' 
```

输出：

```
(0 row(s) affected) // 0 rows inserted
(1 row(s) affected) // log from trigger 
```

可能是由“通用”触发器引起的（同时声明为 FOR INSERT、UPDATE、DELETE）？我知道这更像是假设性问题，我必须接受这种行为。但是为什么会这样呢？对我来说完全是无稽之谈。我正在使用 SQL Server 2005。

——奎蒂

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T08:37:16.827

因为他们有[记录](http://msdn.microsoft.com/en-gb/library/ms189799.aspx)这样做？

> DML 触发器在用户尝试通过数据操作语言 (DML) 事件修改数据时执行。DML 事件是表或视图上的 INSERT、UPDATE 或 DELETE 语句。这些触发器在任何有效事件被触发时触发，**无论是否有任何表行受到影响。**

（**我的重点**）

也许这没有什么意义，但微软可能会花费更多的时间和开发精力来创建一个特殊的代码路径，当事实证明没有受影响的行时抑制触发器。

这只是另一个示例，您需要仔细设计触发器以处理`inserted`并`deleted`可能包含 0、1 或许多行。

* * *

（此外，从关系的角度来看，不包含元组的集合有时仍然很有趣）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:48:27.020

每当发生与表相关联的事件（例如，插入、更新或删除而不是 select 语句）时，就会执行或触发 SQL 触发器。重写触发器以确保表已更新、插入或删除。

问候， sa.va3feb

# android - android中httppost和httpget方法的区别？

> ID：15380311
> 
> 赞同：-6
> 
> 时间：2013-03-13T08:32:22.360
> 
> 标签：android, json, https

谁能告诉我`Httpost`和`Httpget` `method.Httpclient`可以执行 POST 和 GET 方法的区别。请解释 1 和 2 方法之间的区别

1.)`httpclient.execute(httppost)`

和另一个

2.)`httpclient.execute(httpget)`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T08:54:05.683

在 Http Get Method 中，用户发送到服务器的所有值都嵌入了我们作为请求发送的 URL，第三方可以轻松地看到它。如果我说更技术性的话，通过使用 HTTP GET 方法，我们在请求的标头部分而不是在正文中发送用户详细信息。

[来源](http://anujarosha.wordpress.com/2012/01/20/handling-http-get-method-in-android/)

在 Http Post 方法中，我们使用 HTTP 将机密数据传输到不同的位置。原因是内容进入正文，而不是 GET 方法中的标题。

[来源](http://anujarosha.wordpress.com/2012/01/27/handling-http-post-method-in-android/)

也可以参考[安卓开发者网站](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:58:24.247

Apache HTTP 客户端支持 HTTP 支持的所有命令，例如 GET、PUT、POST、DELETE、TRACE、OPTIONS 和 HEAD。

最著名的是 GET 和 POST，其中 GET 用于从 URL 获取资源，而 POST 用于在 URL 中存储数据。在如何使用不同的方法方面有官方的方法，尤其是在创建 REST API 时，但在现实生活中，大多数归结为 GET 和 POST。

有关不同方法的完整讨论，您可以阅读描述 HTTP 的 RFC2616：http: [//www.faqs.org/rfcs/rfc2616.html](http://www.faqs.org/rfcs/rfc2616.html)

# c++ - 使用 C 字符串时出错

> ID：15380312
> 
> 赞同：0
> 
> 时间：2013-03-13T08:32:27.317
> 
> 标签：c++, c-strings

我有一个来自 C++ 教科书的简单示例，它定义了一个 C 字符串，然后循环以用 X 替换所有不是 \0 字符的元素。

```
char ourString[5] = "Hi";
int index = 0;
while(ourString[index] != "\0")
{
    ourString[index] = "X";
    index++;
}

cout << ourString[] << endl; 
```

但是，当我编译并运行时，出现以下错误：

```
C:\Users\Ben\Dropbox\Learning Programming\C++\Strings\Strings.cpp||In function 'int main()':|
C:\Users\Ben\Dropbox\Learning Programming\C++\Strings\Strings.cpp|17|error: ISO C++ forbids comparison between pointer and integer [-fpermissive]|
C:\Users\Ben\Dropbox\Learning Programming\C++\Strings\Strings.cpp|19|error: invalid conversion from 'const char*' to 'char' [-fpermissive]|
C:\Users\Ben\Dropbox\Learning Programming\C++\Strings\Strings.cpp|23|error: expected primary-expression before ']' token|
||=== Build finished: 3 errors, 0 warnings (0 minutes, 0 seconds) ===| 
```

我不明白为什么它不让我（据我了解错误）将作为字符的元素与字符 \0 进行比较的问题。我不认为我正在尝试将指针与整数进行比较......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:35:31.493

您需要在两个地方使用单引号。

```
while(ourString[index] != '\0')
{
    ourString[index] = 'X';
    index++;
} 
```

由于您有双引号，因此它被视为字符串文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:34:51.160

更改`"\0"`为`'\0'`。第一个是衰减为指针的字符串文字，正如编译器告诉您的那样，您不允许将指针与整数进行比较。后者是一个普通的旧字符文字。

同理，`ourString[index] = "X";`改成`"X"`。`'X'`

最后一行应该是`cout << ourString << endl;`;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:35:08.603

您将字符与字符串混淆了。您需要切换`"\0"`to`'\0'`和`"X"`to `'X'`。此外，您不应该`[]`在`cout`声明中使用 - 结合这些给出：

```
char ourString[5] = "Hi";
int index = 0;
while(ourString[index] != '\0')
{
    ourString[index] = 'X';
    index++;
}

cout << ourString << endl; 
```

请注意，您可以将其写成更简洁的形式：

```
for( char* c = ourString; *c ; ++c) // *c is the same as *c!='\0'
{
  *c='X';
}
cout << ourString << endl; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T08:39:10.970

`replace while(ourString[index] != "\0")`

和

`while(ourString[index] != '\0')`

将双刻度替换为单刻度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T10:09:56.643

您使用了空运算符，它不与双引号 "" 一起使用，它始终与单引号 '\0' 一起使用

尝试这个，，

```
 while(ourString[index] != '\0') 
```

# c++ - 是否使用分配提示？

> ID：15380318
> 
> 赞同：10
> 
> 时间：2013-03-13T08:32:36.310
> 
> 标签：c++, allocator

我在阅读[为什么 C++ 分配器中没有重新分配功能？](https://stackoverflow.com/q/3105001/961353)是否可以在运行时在堆上创建一个数组，[然后在需要时分配更多空间？](https://stackoverflow.com/q/15379903/961353)，这清楚地表明重新分配对象的动态数组是不可能的。

但是，在Josuttis*的 C++ 标准库*中，它声明了一个分配器，具有以下语法`allocator`的函数`allocate`

```
pointer allocator::allocate(size_type num, allocator<void>::pointer hint = 0) 
```

其中`hint`具有实现定义的含义，可用于帮助提高性能。

有没有利用这一点的实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-03T02:24:34.927

我在我的[plf::colony](http://www.plflib.org) c++ 容器中使用带有 std::allocator 的提示在 Visual Studio 2010-2013 下（迭代速度提高了约 21%）的小标量类型的迭代时间获得了显着的性能优势，并且在 GCC 下的加速比小得多5.1。所以可以肯定地说，使用这些编译器和 std::allocator，它会有所作为。但差异将取决于编译器。我不知道提示忽略分配器与提示观察分配器的比例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:09:14.310

我不确定具体的实现，但请注意分配器在传递给`deallocate`. 所以这不能用作形成`reallocate`.

标准说提示必须是由先前的调用返回的`allocate`。它说“[提示]的使用未指定，但它旨在帮助本地化。” 因此，如果您在一个线程上分配和释放一系列大小相似的块，您可能会传递先前释放的值以避免微处理器缓存之间的缓存争用。

否则，当 CPU B 发现您仍在使用 CPU A 的缓存中的内存地址时（即使该内存包含根据 C++ 销毁的对象），它必须通过总线转发垃圾数据。最好让 CPU A 和 B 各自重用各自的缓存地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:06:33.303

C++11 状态，在**20.6.9.1 分配器成员**中：

> 4 - [*注意：*在容器成员函数中，相邻元素的地址通常是传递`hint`参数的好选择。—*尾注*]
> [...]
> 6 - [...]`hint`未指定使用，但如果实现需要，则旨在作为对局部性的帮助。

在内存中分配与现有元素相邻或接近的新元素可以通过提高局部性来提高性能；因为它们通常被缓存在一起，所以附近的元素往往会一起沿着内存层次向上移动，并且不会相互驱逐。

# sql - 如何通过 MS 访问在 VB 中编写代码

> ID：15380322
> 
> 赞同：0
> 
> 时间：2013-03-13T08:32:57.750
> 
> 标签：sql, database, vb.net

在 MS Access 中处理此数据库并尝试将其放入 VB.net..

在我的 MS 中，按预期的方式访问“替换”工作。但是当我在 vb.net 中尝试时，“替换”功能不起作用.. 他们给出的一些建议是使用 LEFT 和 RIGHT 功能以及 LEN 来解决它.. 我该怎么做？我试过了，但失败了。这在 MS ACCESS 中：我怎么能用 VB 编写？

```
 Replace(Replace(Trim([f_7Synonyms].[SynSpecies]),"var. ",""),"f. ","") AS Speciest 
```

# html - css下拉菜单第二级消失

> ID：15380324
> 
> 赞同：0
> 
> 时间：2013-03-13T08:33:05.917
> 
> 标签：html, css, drop-down-menu

我正在制作一个仅 CSS 的下拉菜单。
这是一个例子。
[http://jsfiddle.net/DEK8q/8/](http://jsfiddle.net/DEK8q/8/)
现在我想把这个菜单居中。所以我像这样添加相对位置：

```
#nav-container {
    position: relative;
    float: left;
    left: 50%;
}

#nav {
    ***position: relative;***
    float: left;
    left: -50%;
    font: bold 12px SimHei, Arial, Helvetica, Sans-serif;
    border: 1px solid #121314;
    overflow: hidden;
} 
```

我发现如果我相对导航定位，第二级菜单无法显示！
这是因为相对定位的 div 有一个显示绑定。
我只想将其设为 css 并对齐中心。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:31:52.727

我认为您在这里使用了很多定位。这不是必需的，并且 position:static; 是位置的默认值，所以你不需要定义它。你只需要使用相对/绝对。检查这个[小提琴](http://jsfiddle.net/LrmUS/3/)。对于另一个 ul，您也可以在这个小提琴中减少更多定位，当鼠标悬停在第二个菜单项上时会显示。

检查小提琴并使用以下代码。

```
#nav-container {
  float: left;
  width:100%; 
}
#nav {
float: left;
margin-left:25%;
font: bold 12px SimHei, Arial, Helvetica, Sans-serif;
border: 1px solid #121314;
overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:45:21.047

我刚刚找到了解决方案，使用 position static 和 margin-left 而不是 left。

```
#nav {
    position: static;
    float: left;
    margin-left: -50%;
    font: bold 12px SimHei, Arial, Helvetica, Sans-serif;
    border: 1px solid #121314;
    overflow: hidden;
} 
```

[http://jsfiddle.net/LrmUS/1/](http://jsfiddle.net/LrmUS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:46:14.510

这是为您提供的解决方案：http: [//jsfiddle.net/DEK8q/36/](http://jsfiddle.net/DEK8q/36/)

使用的一些关键 CSS 样式是：

```
#nav-container {
    position: relative;
    left: 50%;
}

#nav {
    position:absolute;
    left: -50%;
    font: bold 12px SimHei, Arial, Helvetica, Sans-serif;
    border: 1px solid #121314;
}

#nav ul{
    list-style:none;
}

#nav > ul{
    margin:0px;
    padding:0px;
}

#nav li{
    float:left;
    position:relative;
}

#nav li ul{
    display:none;
    position:absolute;
    left:0px;
    top:30px;
    padding:0px;
    margin:0px;
}

#nav li li ul{
    left:100%;
    top:0px;
}

#nav li:hover > ul{
    display:block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:48:45.573

这个也可以试试

```
#nav {
    border: 1px solid #121314;
    font: bold 12px SimHei,Arial,Helvetica,Sans-serif;
    margin: 0 auto;
    overflow: hidden;
    width: 500px;
} 
```

[http://jsfiddle.net/DEK8q/29/](http://jsfiddle.net/DEK8q/29/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T08:50:16.970

您可以使用不同的方法

```
#nav-container {
    position: relative;
    float: left;
    width:100%;
}

#nav {
    position: absolute;
    left:50%;
    margin-left:-160px; /* This is the width of your menu / 2       */
    font: bold 12px SimHei, Arial, Helvetica, Sans-serif;
    border: 1px solid #121314;
    overflow: hidden;
} 
```

看看：http: [//jsfiddle.net/DEK8q/8/](http://jsfiddle.net/DEK8q/8/)

# android - 如何在Android中获取Item on Click的位置

> ID：15380327
> 
> 赞同：0
> 
> 时间：2013-03-13T08:33:24.900
> 
> 标签：android, list, shopping-cart

大家好！！我正在制作一个示例购物车，在该购物车中，我需要获取点击的商品位置，并在从购物车中选择图片时获取页面上显示的图片。但无论我有没有，这里我只获取第一个商品的图片单击另一个..它总是显示列表的第一个图像...

这是我的 ProductAdapter.java 代码

```
public class ProductAdapter extends BaseAdapter {

private List<Product> mProductList;
private LayoutInflater mInflater;
private boolean mShowQuantity;

public ProductAdapter(List<Product> list, LayoutInflater inflater, boolean showQuantity) {
    mProductList = list;
    mInflater = inflater;
    mShowQuantity = showQuantity;
}

@Override
public int getCount() {
    return mProductList.size();
}

@Override
public Object getItem(int position) {
    return mProductList.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    final ViewItem item;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.item, null);
        item = new ViewItem();

        item.productImageView = (ImageView) convertView
                .findViewById(R.id.ImageViewItem);

        item.productTitle = (TextView) convertView
                .findViewById(R.id.TextViewItem);

        item.productQuantity = (TextView) convertView
                .findViewById(R.id.textViewQuantity);

        convertView.setTag(item);
    } else {
        item = (ViewItem) convertView.getTag();
    }

     Product curProduct = mProductList.get(position);

    item.productImageView.setImageDrawable(curProduct.productImage);
    item.productTitle.setText(curProduct.title);

    // Show the quantity in the cart or not
    if (mShowQuantity) {
        item.productQuantity.setText("Quantity: "
                + ShoppingCartHelper.getProductQuantity(curProduct));
    } else {
        // Hid the view
        item.productQuantity.setVisibility(View.GONE);
    }

    return convertView;
}

private class ViewItem {
    ImageView productImageView;
    TextView productTitle;
    TextView productQuantity;
}} 
```

这是我的购物车文件

```
public class ShoppingCartActivity extends Activity {

private List<Product> mCartList;
private ProductAdapter mProductAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.shoppingcart);

    mCartList = ShoppingCartHelper.getCartList();

    // Make sure to clear the selections
    for (int i = 0; i < mCartList.size(); i++) {
        mCartList.get(i).selected = false;
    }

    // Create the list
    final ListView listViewCatalog = (ListView) findViewById(R.id.ListViewCatalog);
    mProductAdapter = new ProductAdapter(mCartList, getLayoutInflater(),
            true);
    listViewCatalog.setAdapter(mProductAdapter);

    listViewCatalog.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Intent productDetailsIntent = new Intent(getBaseContext(),
                    ProductDetailsActivity.class);
            productDetailsIntent.putExtra(ShoppingCartHelper.PRODUCT_INDEX,
                    position);
            startActivity(productDetailsIntent);
        }
    });

}

@Override
protected void onResume() {
    super.onResume();

    // Refresh the data
    if (mProductAdapter != null) {
        mProductAdapter.notifyDataSetChanged();
    }

    double subTotal = 0;
    for (Product p : mCartList) {
        int quantity = ShoppingCartHelper.getProductQuantity(p);
        subTotal += p.price * quantity;
    }

    TextView productPriceTextView = (TextView) findViewById(R.id.TextViewSubtotal);
    productPriceTextView.setText("Subtotal: $" + subTotal);
} 
```

}

ProductActivity.java

```
public class CatalogActivity extends Activity {

private List<Product> mProductList;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.catalog);

    // Obtain a reference to the product catalog
    mProductList = ShoppingCartHelper.getCatalog(getResources());

    // Create the list
    ListView listViewCatalog = (ListView) findViewById(R.id.ListViewCatalog);
    listViewCatalog.setAdapter(new ProductAdapter(mProductList, getLayoutInflater(), false));

    listViewCatalog.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            Intent productDetailsIntent = new Intent(getBaseContext(),ProductDetailsActivity.class);
            productDetailsIntent.putExtra(ShoppingCartHelper.PRODUCT_INDEX, position);
            startActivity(productDetailsIntent);
        }
    });

    Button viewShoppingCart = (Button) findViewById(R.id.ButtonViewCart);
    viewShoppingCart.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent viewShoppingCartIntent = new Intent(getBaseContext(), ShoppingCartActivity.class);
            startActivity(viewShoppingCartIntent);
        }
    });

} 
```

}

ProductDetailsActivity.java 的代码

```
public class ProductDetailsActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.productdetails);

    List<Product> catalog = ShoppingCartHelper.getCatalog(getResources());

    int productIndex = getIntent().getExtras().getInt(
            ShoppingCartHelper.PRODUCT_INDEX);
    final Product selectedProduct = catalog.get(productIndex);

    // Set the proper image and text
    ImageView productImageView = (ImageView) findViewById(R.id.ImageViewProduct);
    productImageView.setImageDrawable(selectedProduct.productImage);
    TextView productTitleTextView = (TextView) findViewById(R.id.TextViewProductTitle);
    productTitleTextView.setText(selectedProduct.title);
    TextView productDetailsTextView = (TextView) findViewById(R.id.TextViewProductDetails);
    productDetailsTextView.setText(selectedProduct.description);

    TextView productPriceTextView = (TextView) findViewById(R.id.TextViewProductPrice);
    productPriceTextView.setText("$" + selectedProduct.price);

    // Update the current quantity in the cart
    TextView textViewCurrentQuantity = (TextView) findViewById(R.id.textViewCurrentlyInCart);
    textViewCurrentQuantity.setText("Currently in Cart: "
            + ShoppingCartHelper.getProductQuantity(selectedProduct));

    // Save a reference to the quantity edit text
    final EditText editTextQuantity = (EditText) findViewById(R.id.editTextQuantity);

    Button addToCartButton = (Button) findViewById(R.id.ButtonAddToCart);
    addToCartButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            // Check to see that a valid quantity was entered
            int quantity = 0;
            try {
                quantity = Integer.parseInt(editTextQuantity.getText()
                        .toString());

                if (quantity < 0) {
                    Toast.makeText(getBaseContext(),
                            "Please enter a quantity of 0 or higher",
                            Toast.LENGTH_SHORT).show();
                    return;
                }

            } catch (Exception e) {
                Toast.makeText(getBaseContext(),
                        "Please enter a numeric quantity",
                        Toast.LENGTH_SHORT).show();

                return;
            }

            // If we make it here, a valid quantity was entered
            ShoppingCartHelper.setQuantity(selectedProduct, quantity);

            // Close the activity
            finish();
        }
    });

} 
```

请大家帮忙，我们将不胜感激。

提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:36:12.093

`int position`in`onItemClick`给出了您提供给适配器的数组/列表中单击项目的位置。你也可以做 getItemAtPosition(); 在您的列表视图上，如果您对原始列表没有简单的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:42:40.953

将此代码添加到您的项目中：

```
 mProductList.setOnItemClickListener(new OnItemClickListener() 

        {
        public void onItemClick(AdapterView<?> parent, 
        View v, int position, long id) 
        {                

            int  h = parent.getPositionForView(v);

            Toast.makeText(getBaseContext(), 
                    "pic" + (position + 1) + " selected" + h, 
                    Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:51:50.480

只是 geussig 你在读取索引值的地方有一个有问题的代码。以下是编写和读取 int extra 的示例代码：

输入 int 值：

```
productDetailsIntent.putExtra(ShoppingCartHelper.PRODUCT_INDEX,
                    position); 
```

以下代码应用于在另一个中读取此值`Activity`

```
int index = getIntent().getExtras().getInt(ShoppingCartHelper.PRODUCT_INDEX); 
```

希望能帮助到你...

# curl - cURL 跟随位置无法正常工作

> ID：15380328
> 
> 赞同：0
> 
> 时间：2013-03-13T08:33:27.447
> 
> 标签：curl, php

我目前正在编写用户必须填写用户名和密码的脚本。然后，当用户登录时，脚本会检查他/她的用户名是否已在我的数据库中注册。如果是这种情况，用户登录我的外部网站（使用 cURL），如果没有，用户登录我无权访问数据库的其他网站。

```
if($count==1){
    $curl = curl_init('http://www.myownwebsite.com/');
    curl_setopt ($curl, CURLOPT_POSTFIELDS, "gebruikersnaam=$myusername&wachtwoord=$mypassword");
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_exec($curl);
}
else {
    $curl = curl_init('http://www.differentwebsite.com/');
    curl_setopt ($curl, CURLOPT_POSTFIELDS, "username=$myusername&password=$mypassword");
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
    curl_exec($curl);
} 
```

如您所见，我的脚本将行数存储在一个计数变量中，如果查询结果为 1 行，它会登录我的站点，如果不是，它会登录另一个站点。用户名和密码检查是在用户登录的实际网站上完成的。

现在我的问题是，我希望它“跟随位置”，或者可以这么说。就像现在一样，该脚本将（？）重定向到例如`http://www.myownwebsite.com/checklogin.php`（checklogin.php 是我在其中使用 cURL 的脚本）。

我尝试通过使用 followlocation cURL 函数来解决这个问题，但这样做会给我一个警告：

> 警告：curl_setopt(): CURLOPT_FOLLOWLOCATION 在启用安全模式或在 ----- 中设置 open_basedir 时无法激活

我使用 phpinfo(); 检查了我的 php.ini function 和 safemode 被关闭，open_basedir 没有值，所以我认为这不是问题。我查找了一些其他可能的解决方案，但到目前为止没有任何帮助我解决这个问题。

如果有任何不清楚的地方，请随时询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:01:51.703

您无法通过*使用服务器*向登录页面发送 POST 请求来登录*用户*。发生的情况是您登录了您的服务器，而不是用户。

 *此外，您不能使用 PHP 使用 POST 数据重定向用户。您所能做的就是制作一个带有隐藏字段`method="POST"`和的表单，该表单将在页面加载时通过 JavaScript 提交。这是您可以输出的页面的简单示例。`action="http://www.differentwebsite.com/"``username``password`

```
<html>
<head>
<script type="text/javascript">
function submit_form()
{
    document.myform.submit();
}
</script>
</head>
<body onload="submit_form();">
    <form method="POST" name="myform" action="http://www.google.com/">
        <input type="hidden" name="username" value="someusername"/>
        <input type="hidden" name="password" value="somepassword"/>
    </form>
</body>
</html> 
```

至于为什么您会重定向用户，这是因为您跳过了：

```
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
```

所以输出直接发送给用户。*

# android - 对多个包裹使用相同的 Google Maps 密钥

> ID：15380336
> 
> 赞同：0
> 
> 时间：2013-03-13T08:34:06.060
> 
> 标签：android, package, google-maps-android-api-2

为 Google Maps 版本 2 创建密钥时，必须指定包的名称。我的问题是，生成的密钥以后可以用于不同的包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:35:41.443

您提供有关您的应用程序的信息以获取密钥。

它可用于 1 个“证书”。根据谷歌：

> “使用相同证书的应用程序可以使用相同的 API 密钥。但是，建议的做法是使用不同的证书对每个应用程序进行签名，并为每个应用程序获取不同的密钥。”

# crystal-reports - 水晶报表中的求和字段

> ID：15380341
> 
> 赞同：1
> 
> 时间：2013-03-13T08:34:27.267
> 
> 标签：crystal-reports, sum, field, formula

我在水晶报表中有两个文本字段，`textA`并且`textB`. 如果我想通过公式编辑器（而不是通过 c# 代码）设置第三个名为`textTot = textA + textB`.

什么是正确的水晶报表语法？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:23:37.987

最简单的公式是：`ToNumber({TableName.TextA}) + ToNumber({TableName.TextB})`。

但是，最好先测试数据是否为数字（以避免运行时错误）：

```
Local NumberVar numericA;
Local NumberVar numericB;

If IsNumeric(Trim({textA})) 
    Then numericA = ToNumber(Trim({textA}))
    Else numericA = 0;

If IsNumeric(Trim({textB})) 
    Then numericB = ToNumber(Trim({textB}))
    Else numericB = 0;

numericA + numericB; 
```

# android - android 上的 Netty ObjectEncoders/ObjectDecoders 导致 StreamCorruptedException

> ID：15380344
> 
> 赞同：1
> 
> 时间：2013-03-13T08:34:39.807
> 
> 标签：android, netty

我想在 android 手机上编写一个客户端并将一个对象发送到在我的 windows PC 上运行的服务器（使用 ObjectDecoderInputStream ），但是有这些异常

例外

```
java.io.StreamCorruptedException: unexpected end of block data
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.access$300(Unknown Source)
at java.io.ObjectInputStream$GetFieldImpl.readFields(Unknown Source)
at java.io.ObjectInputStream.readFields(Unknown Source)
at java.net.InetSocketAddress.readObject(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at org.jboss.netty.handler.codec.serialization.ObjectDecoderInputStream.readObject(ObjectDecoderInputStream.java:115)
at MainActivity.main(MainActivity.java:30) 
```

但是当我在手机上使用 CompatibleObjectEncoder/Decoder 并在 PC 上使用 ObjectInputStream 时，它工作正常。如果我将 android 代码更改为 Java 代码，并在我的 PC 上运行客户端以使用 ObjectEncoder 及其相关的 InputStream 向我自己发送对象，它工作正常。

顺便说一句，我使用netty 3.6.3 final，我的android设备是2.3.7姜饼（使用jre 1.5或1.6），我的PC是jre 1.7，这可能有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:11:40.350

听起来与我的问题[很](https://stackoverflow.com/questions/10028894/netty-objectdecoder-throws-java-io-streamcorruptedexception-unexpected-end-of-b)相似 - 我从来没有深入了解它，但是更改 JVM 以便两端运行相同的版本停止了错误

# jquery - fancybox - 点击图片时页面跳转到顶部

> ID：15380358
> 
> 赞同：2
> 
> 时间：2013-03-13T08:35:27.180
> 
> 标签：jquery, fancybox, fancybox-2

我在我的网络上使用fancybox，当我点击图片时- 页面升到顶部，然后图片打开良好。如何防止页面上升？

呼吁

```
 $('.fancybox-buttons').fancybox({
            openEffect: 'fade',
            closeEffect: 'fade',

            prevEffect: 'fade',
            prevSpeed  : 550,
            nextEffect: 'fade',
            nextSpeed: 550,

            closeBtn: true,

            helpers: {
                title: {
                    type: 'inside'
                },
                buttons: {}
            }
        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T09:31:43.960

没关系，我解决了问题，我按照 jquery.fancybox.js 中的代码进行操作。当它到达第 897 行时

```
F.trigger('onReady'); 
```

页面上升到页面顶部。我取消了它的标记（删除它），现在它工作正常。

```
/*F.trigger('onReady');*/ 
```

谢谢

# mongodb - MongoDB 中的嵌套集合是否提供任何附加功能？或更少？

> ID：15380370
> 
> 赞同：0
> 
> 时间：2013-03-13T08:36:19.320
> 
> 标签：mongodb

如果我有集合 db.posts 和 db.posts.activity，与拥有 db.posts 和 db.post-activity 相比，这是否为我提供了在两个集合中使用的任何其他功能？...还是只是将其命名为功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:29:07.160

没有附加功能。的用法。仅用于视觉命名空间。最后有两个集合。

# image - 在 DIcom 中使用重新缩放斜率和重新缩放截距转换原始像素

> ID：15380371
> 
> 赞同：1
> 
> 时间：2013-03-13T08:36:20.063
> 
> 标签：image, image-processing, dicom

我在这篇文章中使用了[Dicom Image 的窗口宽度和中心计算](https://stackoverflow.com/a/8759043/1455335)的解决方案来转换原始像素，它对大多数图像都有效，但我遇到了一些图像的问题。具有像素值“24”、重新缩放斜率“1.0”和重新缩放截距“-1024”的图像。当我应用上述解决方案时，我得到了负值（-1000）的新像素值。

我在使用窗口级别和窗口宽度创建的查找表中找不到这个新像素值的值，因为查找表只有正值（0 到 65536）。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:00:07.193

您可能正在处理 CT 图像。CT 的 RescaleIntercept 标记通常设置为 -1024。您获得的负值 -1000 非常有意义，它对应于以 Hounsfield 为单位的空气（正如安德斯所说）。现在，如果您想可视化图像，您必须应用一个传递函数，例如将 HU 比例映射到 RGB。

# assembly - 编写 .com 程序的环境 (NASM)

> ID：15380374
> 
> 赞同：0
> 
> 时间：2013-03-13T08:36:33.447
> 
> 标签：assembly, x86, nasm, dos

我在编写 .com 程序的环境时遇到问题。我知道，当 es 指向 psp 的开头时，它位于 es:2ch。这是我的代码：

```
 org 100h
    mov cx,256
    mov ah,2

    xor si, si  ; si = 0
    mov si,[es:si]  ; si = begining of the psp
    sub si, 2ch ; adding 2ch offset to si
    mov si, [si]    ; making si point to com environement

loop1:   ; output chars until '0'
    mov dl, [si]
    inc si      
    cmp dl, '0' 
    je end_of_program           
    int 21h

loop loop1

end_of_program:
    mov ah, 0
    int 16h 

    mov ah, 4ch
    int 21h 
```

输出：

```
R♥˙{  T♥ |      `♦­☺Ç☻  ▼ ţ☺  IT
♦☻  NLł☻  PO┬☺  NO×☻  CFÓ☻  SV┤☻  SU╩☻  LA▲♥  DV4♥  RU÷☻  BRJ♥
HUĘ♥  ISż♥  PLď♥  ROŕ♥  SL ♦  YU▬♦  TRB♦  ETn♦  JPX♦  USä♦ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:11:33.017

我记得，PSP:2Ch 的“环境”是一个段地址。虽然我们不能用立即数或寄存器加载一个隔离，但我们可以从内存中加载一个......

```
mov ds, [2Ch] 
```

然后从偏移量 0 开始执行循环。这只会打印您的第一个环境变量。当该循环结束时，检查另一个 0。如果没有，请再次运行您的循环（可能需要输入 CR/LF）。当你到达双零时，还有另一个词（？），然后是程序名称。当然，此时我们已经失去了 ds……但 cs 和 es 仍然指向我们原来的 PSP，因此如果需要，它可以很容易地恢复……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:51:55.363

请参阅 Wikipedia 上的[Program_Segment_Prefix](http://en.wikipedia.org/wiki/Program_Segment_Prefix)条目。

> PSP 的段地址在程序执行时传入 DS 寄存器。
> ...
> 或者，在偏移量 100h 加载的 .COM 程序中，可以直接使用上面列出的偏移量来寻址 PSP。偏移量 000h 指向 PSP 的开头，0FFh 指向结尾，依此类推。

因此，您可以例如读取用于从偏移量 81h 及以后启动程序的命令。

# c# - 根据枚举值返回 ObservableCollection

> ID：15380388
> 
> 赞同：0
> 
> 时间：2013-03-13T08:37:22.003
> 
> 标签：c#, interface, observablecollection, generic-collections

我的 C# 应用程序定义了以下枚举：

```
public enum ItemTypes {
  REQUIREMENTS,
  TEST_CASES
} 
```

现在我想定义一个接口，它获取与其中一个匹配的所有项目`ItemTypes`并将它们作为`ObservableCollection`. 因为我不知道传递了什么枚举值，所以我认为使用泛型`T`将是可行的方法。但是，以下内容不起作用，因为`T`无法识别：

```
interface IDataSourceService {
  ObservableCollection<T> GetItems(Enums.ItemTypes itemType);
} 
```

实现类应该看起来像这样（或多或少的伪代码）：

```
ObservableCollection<T> GetItems(Enums.ItemTypes itemType) {
  // Define an ObservableCollection which could hold "anything".
  ObservableCollection<T> result = null;
  switch (itemType) {
    case Enums.ItemTypes.REQUIREMENTS:
      // Get all requirements from the data source
      ObservableCollection<CRequirement> result = new ObservableCollection<CRequirement>();
      result = foo();
      break;

    case Enums.ItemTypes.TEST_CASES:
      // Get all test cases from the data source
      ObservableCollection<CTestCase> result = new ObservableCollection<CTestCase>();
      result = bar();
      break;
  }      
  return result;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:44:58.620

你打算如何使用你的函数的结果？

如果你想通过一个公共接口来使用它`CRequirement`并`CTestCase`共享，那么你需要分离这个公共接口`IMyCommonInterface`，例如让你的两个类都实现它。

然后你可以使用`ObservableCollection<IMyCommonInterface>`.

另一方面，如果您必须测试函数的结果并根据类型分叉代码，那么您可以简单地定义您的函数以返回一个 pure `object`，您稍后将测试正确的类型。

# iphone - 如何将 Facebook-ios-sdk 集成到 SenTestCase 类

> ID：15380392
> 
> 赞同：1
> 
> 时间：2013-03-13T08:37:53.167
> 
> 标签：iphone, ios, objective-c, ipad, unit-testing

如何将 facebook-ios-sdk 集成到 Targets senTesting 中

我创建了一个项目，让它成为 DemoProject 并集成了 facebook-ios-sdk 运行该项目，一切正常。现在我正在尝试为我的 DemoProject 编写测试用例，我需要将 Facebook-ios-sdk 集成到 DemoProjectTest。如何将 facebook-ios-sdk 配置为 DemoProjectTest Target。所以我可以为 Facebook 创建对象。

我无法将`#import "facebook-ios-sdk/Facebook.h"`类的 DemoProjectTest 目标包含在我的类中`FacebookTest.h.` 如果我确实导入了，`Facebook.h`那么我可以为 Facebook 创建对象。

是否可以将 Facebook-ios-sdk 集成到 DemoProjectTest Target 中？

@所有人都建议我的情况。

# asp.net - (System.Web.UI.HtmlControls.HtmlAnchor) 与控件类型 (System.Web.UI.HtmlControls.HtmlGenericControl) 不兼容

> ID：15380395
> 
> 赞同：2
> 
> 时间：2013-03-13T08:37:55.137
> 
> 标签：asp.net, c#-2.0

当我尝试将我的 .net 2.0 代码加载到我们的一台服务器时出现此错误。

```
The base class includes the field 'imageDescription', but its type 
(System.Web.UI.HtmlControls.HtmlAnchor) is not compatible with the type of control 
(System.Web.UI.HtmlControls.HtmlGenericControl).
         ...         at   
System.Web.Compilation.BaseTemplateCodeDomTreeGenerator.BuildFieldDeclaration(
                                       ControlBuilderbuilder) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:06:37.120

也许两个命名空间之间存在冲突。尝试删除（或添加）：

```
using System.Web.UI.HtmlControls.HtmlGenericControl; 
```

# c - Solaris 音频 API

> ID：15380398
> 
> 赞同：2
> 
> 时间：2013-03-13T08:38:05.127
> 
> 标签：c, api, audio, solaris

如何编写一个`c`函数来录制和播放语音`Solaris`。Solaris 中通常使用哪个 api 来播放和录制语音，就像我们在 Windows中的`WaveIn`/ API 一样。`WaveOut`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:00:41.880

Solaris 和 UNIX 必须使用 OSS（尽管在 linux 上也可以使用 ALSA，Darwin 和往常一样特别）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:27:09.300

部分取决于所讨论的 Solaris 版本。Solaris 11.1 及更高版本现在包括[PulseAudio](http://www.freedesktop.org/wiki/Software/PulseAudio)，但对于较旧的版本，主要是[低级音频设备 API](http://docs.oracle.com/cd/E26505_01/html/816-5177/audio-7i.html#scrolltoc)，没有太多捆绑高级 API 的方式（尽管您可能可以在它们之上构建一些开源库，例如 PulseAudio） .

# entity-framework - SQL - Server + Entity Framework orderby

> ID：15380403
> 
> 赞同：0
> 
> 时间：2013-03-13T08:38:18.823
> 
> 标签：entity-framework

我想按最后生成的时间戳对我的项目进行排序：

```
var projectsOrderd  = projects.OrderBy(r => r.Timestamps.Select(t => t.End)); 
```

但有一个错误：“DbSortClause 表达式必须具有可比顺序的类型”

结束类型：日期时间

有什么解决办法吗？

ps：在 SQL-Server 上运行语句可以正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:56:25.160

您不能按集合排序（EG a .Select()）

也许你想要类似的东西

```
var projectsOrderd  = projects.OrderBy(r => r.Timestamps.Max(t => t.End)); 
```

或者

```
var projectsOrderd  = projects.OrderBy(r => r.Timestamps.FirstOrDefault(t => t.End)); 
```

# html - 适用于 ipad 和 ipad mini 的 phonegap 应用程序

> ID：15380411
> 
> 赞同：0
> 
> 时间：2013-03-13T08:38:50.960
> 
> 标签：html, css, cordova

我正在为 ipad 和 ipad mini 制作应用程序。我是 phonegap 新手，对 html css 有一些基本知识。我被应用程序的图像比例、宽度和高度所困扰。

我想让它泛化代码，这样它就可以在 ipad mini 的高度和宽度上正常工作。任何入门链接或帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:37:08.323

iPad（1 和 2）、iPad Retina（3 和 4）和 iPad mini 具有相同的逻辑像素，这在 css 上很重要，因此您不必担心物理像素，相同的应用程序看起来在所有 iPad 上都一样。不过，您应该查看有关 RWD（响应式网页设计）的信息，如果您决定将 iPad 应用程序移植到 Android，它可以为您提供帮助。

# javascript - 确定用户何时滚动到 DIV 的末尾

> ID：15380412
> 
> 赞同：0
> 
> 时间：2013-03-13T08:38:52.197
> 
> 标签：javascript, jquery

我的页面有一个带有溢出的 DIV，我在 div 的两侧放置了两个按钮作为辅助滚动方法。

按下左键时，会运行以下脚本并且似乎运行良好：

```
 function slideLeft() {
        if ($("#divfieldWidgets").scrollLeft() == 0) {
            $('#divScrollWidgetsLeft').animate({ opacity: 0.1 }, 250);
            window.clearInterval(animationHandler);
        }
        $('#divfieldWidgets').animate({ scrollLeft: "-=100px" }, 250);
    } 
```

但是，当向右滚动时，我似乎无法找到一种方法来确定 DIV 何时达到其限制。

我很确定我需要一些基于 $("#divfieldWidgets").scrollLeft() 和 $("#divfieldWidgets").width() 的计算，但是我对这两个值执行的所有算术计算都不需要产生任何与宽度、最大值等有任何关系的结果。

我想到了一个最终选项，即将当前的 scrollLeft 值存储在一个临时变量中并比较新值；如果没有变化，那么它已经到了尽头，但我相信必须有一种更清洁的方式来实现这一点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:34:36.417

你可以使用类似的东西

```
$(function() {
    $('#lorem').scroll( function() {
        if ( $('#lorem').scrollLeft() == ($('#lorem p').width() - $('#lorem').width())) {
            alert('end!');
        }
    });
}); 
```

[如此处](http://jsfiddle.net/cNmhR/24/)所示

我建议存储`width`在事件`ready`内部可访问的变量中`scroll`

```
a = $('#lorem p').width();
b = $('#lorem').width(); 
```

并在函数中使用它们

```
if ( $('#lorem').scrollLeft() == (a - b)) {
    // rest of the code
} 
```

这样，您将在`scroll`. 因为这是一个非常昂贵的事件，只有在没有其他解决方案的情况下才应该使用。

[理想情况下，您应该像这样](https://stackoverflow.com/a/10395354/1520671)使用节流函数调用。这将延迟函数调用并节省大量资源。

# c - 有效地查找元素是否存在于链表中

> ID：15380416
> 
> 赞同：0
> 
> 时间：2013-03-13T08:39:12.450
> 
> 标签：c, singly-linked-list

假设有一个包含信息的链表。我的程序架构依赖于能够查明某些信息是否已经存在于此链接列表中的单个节点中。

（即，查看子整数值`int example`是否在某个节点中已经具有值 5。）

之后，就可以对每个节点进行系统的操作了。

我可以想到各种方法来做到这一点，但我希望更有经验的人可以展示一些相当有效的东西。

另外，这是一种好的做法，还是应该有另一种更合适的数据结构？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:41:44.690

如果`O(N)`还不够，排序数组和二进制搜索，或者[BST](http://en.wikipedia.org/wiki/Binary_search_tree)会给你`O(log(N))`. 或者，您可以查看[hashmap 数据结构](http://en.wikipedia.org/wiki/Hash_table)。这种结构将为您提供基于键的几乎恒定的时间查找，但比其他选项更复杂。问题是[没有 std 库实现 one](https://stackoverflow.com/questions/1138742/looking-for-a-good-hash-table-implementation-in-c)。

否则，搜索每个元素是您希望使用链表做的最好的事情。

# asp.net - asp.net 会话状态模式“SQLServer”

> ID：15380423
> 
> 赞同：15
> 
> 时间：2013-03-13T08:39:40.590
> 
> 标签：asp.net, sql-server, session, session-state, session-timeout

“我的网站是实时的。这个问题与在实时服务器上配置会话超时有关，而不是在本地主机中。”

我有一个会话过期太快的问题。仅在 2-5 分钟内链接。我尝试了很多东西，最后决定将会话存储在“SQL Server”模式

在我的 web.config 文件中，我有以下编码：

```
<sessionState mode="SQLServer" cookieless="false" timeout="45"
sqlConnectionString="data source=xxx.xx.xx.xxx;uid=xxxxxxx;pwd=xxxxxxxx"/> 
```

我拥有服务器上 ASPState 表中所需的所有表。您可以从下图中看到它。

![在此处输入图像描述](../Images/bb497ee3710b5a2dc16bc407c6de11af.png)

但是当我运行我的应用程序时，它会引发以下错误：

“无法使用 SQL Server，因为 SQL 服务器上没有安装 ASP.NET 2.0 版会话状态，或者 ASP.NET 没有运行 dbo.TempGetVersion 存储过程的权限。如果 ASP.NET 会话状态架构没有已安装，请安装 ASP.NET 会话状态 SQL Server 2.0 或更高版本。如果已安装架构，请将 dbo.TempGetVersion 存储过程的执行权限授予 ASP.NET 应用程序池标识或 Sql Server 用户在 sqlConnectionString 属性中指定。”

错误图片：

![在此处输入图像描述](../Images/4107da44f315ba3aaaca73c7ad24f371.png)

我无法理解确切的问题以及如何解决它。任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-04-30T14:27:11.710

为了让它对我有用，我使用以下选项运行了命令。

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regsql.exe -S . -E -ssadd -sstype p 
```

我相信`-ssadd`选项（“添加对 SQL Server 模式会话状态的支持。”）是导致它正确设置存储过程的原因。请参阅此[链接](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.80%29.aspx)以获取完整的选项列表。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-12-20T13:35:30.440

所有这些信息都非常有价值，但根据您的情况，还有一些更有价值的说明。

如果您运行向导，它不会使用 -ssadd 标志运行。-ssadd 标志是创建 dbo.TempGetVersion 过程和其他过程的原因。

如果您要使用自定义服务器/数据库，您将需要按如下方式运行程序...

```
aspnet_regsql.exe -S YourServerName -d YourDatabaseName -ssadd -E -sstype c 
```

*   -S 是您的服务器名称标志
*   -D 是您的数据库名称标志
*   -ssadd 添加对 SQLServerm 模式会话状态的支持。如果需要删除程序，请运行 -ssremove。
*   -E 使用当前的 Windows 凭据连接到目标数据库以进行设置。
*   -sstype c 表示这是一个自定义数据库名称。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T09:13:40.410

在树中打开“可编程性”并首先检查 dbo.TempGetVersion 是否存在。可能您没有安装正确的架构。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-13T19:29:47.453

也许你的 web.config 中有一个错误的标签

一个正确的例子应该是：

```
<sessionState 
allowCustomSqlDatabase="true" 
mode="SQLServer" 
sqlConnectionString="data source=localhost;initial catalog=YourAspStateDatabase;user id=yourLogin;password=yourpassword" cookieless="false" timeout="30"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-10T22:36:02.547

我被困住了，没有一个答案对我有用，以防万一其他人有这个问题，这就是解决我的问题的原因，我在 cmd 中运行：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regsql.exe -C "Data Source=.\SQL2012;Integrated Security=True" -ssadd 
```

以防万一其他人陷入与我相同的情况。

# c# - MVVM NotifyPropertyChanged

> ID：15380426
> 
> 赞同：0
> 
> 时间：2013-03-13T08:39:43.390
> 
> 标签：c#, mvvm

我想问你，当我更改源时，如何在 View 上反映更改。这是我的代码。**模型：**

```
public class ExecutionMode
{
    private List<DayItem> _dayItems = new List<DayItem>();

    public enum TypeMode
    {
        None,
        Once,
        Daily,
        Weekly
    }

    public TypeMode Mode { get; set; }
    public DateTime? ExecutionTime { get; set; }
    public DateTime? ExecutionDate { get; set; }
    public List<DayItem> DayItems { get { return _dayItems; } set { _dayItems = value; } }
}
public class ProfileRecord
    {
        private ExecutionMode _mode = new ExecutionMode();
        public ExecutionMode ExecutionMode { get { return _mode; } set { _mode = value; } }
    } 
```

**视图模型**

```
 public class NewProfileViewModel : INotifyPropertyChanged
    {private ProfileRecord _record = new ProfileRecord();
public ProfileRecord Record { get{return _record; } set{_record=value; OnPropertyChanged("Record")}} 
```

XAML：

```
<toolkit:TimePicker Header="Time of execution:" Margin="12,0,70,0" Value="{Binding ProfileRecord.ExecutionMode.ExecutionTime, Mode=TwoWay}" Visibility="{Binding ElementName=lpickerExecutionModes, Path=SelectedItem, Converter={StaticResource VisibilityConvert}, ConverterParameter=Once|Daily|Weekly}" /> 
```

当我在代码 Record.ExecutionTime = Time 中设置某处时，它不会反映在 View 上。所以我在问。我也应该在模型中实现 NotifyPropertyChanged 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:43:20.907

有2种解决问题的方法：

1.  `INotifyPropertyChanged`在您的模型类上实现

2.  将模型对象中的所有必要属性映射为其中的属性`ViewModel`并`INotifyPropertyChanged`在这些属性上实现。

我更喜欢第一种方法，尤其是当模型非常大，有很多属性，并且所有这些属性都在 View 中使用时。

# ruby-on-rails - RVM 项目特定的 gem

> ID：15380427
> 
> 赞同：1
> 
> 时间：2013-03-13T08:39:46.823
> 
> 标签：ruby-on-rails, rvm, bundler

我已经建立了一个 RVM 环境并安装了 Bundler 和 Rake。在我的项目中，我有一个 Gemfile，当我运行`bundle install`gem 时，它们会安装在我指定的项目文件夹中。但是当我运行时，`gem list`我没有看到 Bundler 安装的 gem。这是为什么？谢谢你的帮助

编辑：而且我在项目 Gemfile 中定义了 rails gem 和它的版本，所以我从来没有运行 gem install rails

编辑2：我跑了`gem install rails`。当我`rails -v`在项目外运行时，我得到 3.2.12，在我的项目文件夹中，我得到 3.2.11，这是我的 Gemfile 中定义的版本。但为什么？为什么我必须全局安装 Rails？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:04:31.770

在您`.rvmrc`编写以下代码中：

`rvm use <ruby_version>@<project_name> --create`

在我的情况下`ruby_version`是`ruby-1.9.3-p194`

导航到项目路径后，运行`bundle install`以安装特定于项目的所有 gem。

# java - 从 Eclipse 调试 Ant 任务

> ID：15380429
> 
> 赞同：14
> 
> 时间：2013-03-13T08:39:51.667
> 
> 标签：java, eclipse, ant

我正在eclipse ide中用java开发一个自定义的ant任务。

是否可以调试它？那是在java行上放一个断点，当ant被执行时，它会停在那里，我可以单步执行代码吗？

编辑：由于这个问题已作为重复问题关闭，我想详细说明为什么它完全不同。

我希望调试构成 ant 任务的 java 代码，而不仅仅是 ant 构建的步骤。答案已经部分帮助了我，但我仍然需要弄清楚为什么我的 Eclipse 没有调试远程 Java 应用程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-13T09:22:03.967

在运行 ANT 之前，您需要在启用远程调试的情况下启动 ANT，方法是输入以下内容。

```
set ANT_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005 
```

这将导致运行 ANT 的 JVM 暂停，直到您附加调试器。

接下来，您需要修改 ANT 正在使用的类路径，以便拾取构成您正在编写的自定义任务的类。我不认为有一种方法可以使用环境变量轻松地做到这一点，所以最快的方法就是编辑`ant.bat`文件。

现在，当您的自定义任务运行时，它将在您的 IDE 中的任何断点处停止。

# security - 缓冲区溢出漏洞，覆盖函数参数，包括返回地址

> ID：15380431
> 
> 赞同：2
> 
> 时间：2013-03-13T08:39:58.227
> 
> 标签：security, buffer-overflow, exploit

假设我们有一个函数

```
foo(char *name,int id)
{  
 printf ("%s%d",name,id);
} 
```

使用缓冲区溢出，我们将堆栈上的返回地址替换为 foo 函数地址。我能够做到这一点。

我如何也溢出函数参数？foo 有两个参数，有人可以帮我理解如何使用缓冲区溢出来溢出这些参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:05:41.080

理论上是的，当函数被调用时，参数被压入堆栈，但随后是否成功覆盖取决于堆栈的布局。同样，从您的目标来看，您必须以一种不会破坏其间数据的方式进行操作。

上面的代码还有一个漏洞，想想看。

# jqplot - jQplot仪表设置画布颜色透明

> ID：15380433
> 
> 赞同：0
> 
> 时间：2013-03-13T08:40:18.480
> 
> 标签：jqplot

我正在使用 jQplot 仪表。

我想将仪表的背景设置为透明。默认情况下，它设置为白色（背景色）。

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-17T00:51:39.420

我遇到了同样的问题，并且根据您编辑 jqplot gaugemeter js 的提示，我实际上找到了一种简单的方法。当您创建仪表时，只需传入一个具有透明背景的网格 - 这对我有用：

```
 fuelMeter = $.jqplot('fuel_level',[s3],{
       grid: {
           background: "transparent"
       },
       seriesDefaults: {
           renderer: $.jqplot.MeterGaugeRenderer,
           rendererOptions: {
               label: 'Fuel %',
               // ...
           }
       }
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T01:19:56.627

不确定它是否适用于仪表，但对于 jqPlot PieChart，我为网格背景定义了一个 rgba 配色方案，以防浏览器不支持 rgba，见下文。这至少适用于 Mozilla 和 IE 8。

迟到的答案，但希望仍然可以帮助某人。

```
function createChartOptions() {
    var optionsObj = {seriesColors : [ 'green', 'purple', 'yellow' ],
        grid : {
            drawBorder : false,
            drawGridlines : false,
            background : 'rgb(255, 255, 255)',  /* fallback */
            background : 'rgba(255, 255, 255, 0)',
            shadow : false, 
        },
        seriesDefaults : {
            // Make this a pie chart.
            renderer : jQuery.jqplot.PieRenderer,
            rendererOptions : {
                showDataLabels : false,
                startAngle : -90,
                shadow : false, 
            }
        }, 
    }
    return optionsObj;
} 
```

# php - php。安全写入文件

> ID：15380436
> 
> 赞同：0
> 
> 时间：2013-03-13T08:40:23.187
> 
> 标签：php, flock

我想知道下面的代码是否正确编写。我正在尝试编写一个安全的关键部分，该部分写入文件并尝试预测可能出现的任何问题。

有什么我应该注意的吗？我的意思是，我写了 try-catch 语句以防羊群中出现问题，因此它设法关闭文件并释放锁。还有什么需要注意的吗？

```
 /*
         * Write to file
         */
        if ( file_exists($sPath) )
        {
            //CRITICAL PART (start)
            $oFile = fopen($sPath, "a");

            //If could not open file then just return
            if ( $oFile == false ) return;

            try{
                //Acquire lock
                if ( flock($oFile, LOCK_EX) )
                {
                    //Append a new line
                    fwrite($oFile, "\n"."sometext");
                }
            }catch(Exception $e){
                //Release lock before exiting
                fclose($oFile);
                return;
            }
            //Release lock
            fclose($oFile);
            //CRITICAL PART (end)
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:49:18.330

```
file_put_contents($sPath,"\n"."sometext", FILE_APPEND); 
```

我相信附加不需要锁定。文件系统会处理得很好。
但是，我可能是错的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:49:14.850

原生 php 函数不会抛出异常（至少绝大多数**不会**抛出异常`DateTime`...... `try/catch`您需要检查所有函数的返回值并检查它是否不是`false`. 除此之外，我认为你管理得很好。

附带说明一下，文件锁定在 linux 中是建议性的（我不知道在其他平台上），因此您没有获得文件的真正锁定。我的意思是，其他进程可能会修改/覆盖/删除您“锁定”的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:51:35.787

由于该`fopen`函数在成功或`FALSE`错误时返回文件指针资源，因此可以使用三元比较 ===，即：

```
if ( $oFile === false ) return; 
```

# session - 重定向后无法访问会话数据

> ID：15380440
> 
> 赞同：1
> 
> 时间：2013-03-13T08:41:03.130
> 
> 标签：session, symfony, symfony-2.1

我使用 FOSUserBundle 注册新用户。

用户回答了一些保存到会话中的问题。如果答案正确，则将用户重定向到注册操作。注册后，用户被重定向到 finalAction。在 finalAction 中，我无法访问会话中的数据，但是当我重新加载页面时，数据就在那里。

有谁知道出了什么问题？

我的 registerAction() 中的一部分代码

```
 $formHandler = $this->container->get('project_user.form.handler.registration');
        $process = $formHandler->process(false);
        if ($process)
        {

            $user = $form->getData();
            $url = $this->container->get('router')->generate('project_user_check_register', array(
                'url' => urlencode($pLink . '?from_register=1')
            ));

            $response = new RedirectResponse($url, 301);

            $authenticate = $this->authenticateUser($user, $response, true);

            return $authenticate;
        } 
```

这是 authenticateUser 方法

```
protected function authenticateUser(UserInterface $user, Response $response, $registration = false)
    {         
        $expires = time() + 31536000;
        $secret = $this->container->getParameter('secret');
        $userClass = get_class($user);

        $value = base64_encode(implode(':', array(
            $userClass,
            base64_encode($user->getUsername()),
            $expires,  
            hash('sha256', $userClass.$user->getUsername().$expires.$user->getPassword().$secret)
            )));

        $response->headers->setCookie(
            new Cookie(
                'REMEMBERME',
                $value,
                $expires
            )
        );   

        try
        {
            $this->container->get('fos_user.security.login_manager')->loginUser(
                    $this->container->getParameter('fos_user.firewall_name'), $user, $response);

        }
        catch (AccountStatusException $ex)
        {
            // We simply do not authenticate users which do not pass the user
            // checker (not enabled, expired, etc.).
        }

        if($registration)
        {
            /*
             * remove the recommendation cookie
             */
            if ($this->container->get('request')->cookies->get('recommendCookie'))
            {
                $cookie = new Cookie('recommendCookie', '_______', time() - 100);

                $response->headers->setCookie($cookie);
            }            

        }
        return $response;
    } 
```

# ios - 如何在 GMSMapView 中显示一个圆圈

> ID：15380441
> 
> 赞同：13
> 
> 时间：2013-03-13T08:41:04.797
> 
> 标签：ios, google-maps, google-maps-sdk-ios

我需要在 GMSMapView 上显示一个圆圈（与 MKCircle 一样）。这在使用 MKMapView 和 MKCircle 时很容易，但不能将 MKCircle 与 GMSMapView 一起使用。有任何想法吗？

更新：
这是当前（18.03.2013）选项：
1\. 包含圆形图像的地面标记。
2\. 一个由几段组成的圆（折线）。

**编辑：**
**3\. 谷歌添加了 GMSCircle (23.04.2013)**

```
 GMSGroundOverlayOptions *overlayOptions = [GMSGroundOverlayOptions options];
    overlayOptions.icon = [UIImage imageNamed:@"circle"];
    overlayOptions.position = touchMapCoordinate;
    overlayOptions.bearing = 0;
    overlayOptions.zoomLevel = 14.3;
 [mapView addGroundOverlayWithOptions:overlayOptions]; 
```

对于 40x40 像素的圆形图像，它看起来不错。（半径约为 100 m）

小分段路径解决方案：

```
 GMSPolylineOptions *circle = [GMSPolylineOptions options];
    CGPoint touchPoint = [mapView.projection pointForCoordinate:touchMapCoordinate];
    GMSMutablePath *path = [GMSMutablePath path];

    CGPoint circlePoint;

    for (int i = 0; i < 360; i++)
    { 
        circlePoint.x = touchPoint.x + radius * cos(i*M_PI/180);
        circlePoint.y = touchPoint.y + radius * sin(i*M_PI/180);

        CLLocationCoordinate2D aux = [mapView.projection coordinateForPoint:circlePoint];
        [path addCoordinate:aux];
    }

    circle.path = path;
    circle.width = 1;

    [mapView addPolylineWithOptions:circle]; 
```

编辑：08.05.2013

**GMSCircle 解决方案：**

```
 CLLocationCoordinate2D circleCenter = CLLocationCoordinate2DMake(latitude, longitude);
     GMSCircle *circ = [GMSCircle circleWithPosition:circleCenter
                                     radius:1000];

     circ.fillColor = [UIColor blueColor];
     circ.strokeColor = [UIColor redColor];
     circ.strokeWidth = 5;
     circ.map = mapView; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-30T21:41:20.407

因为这个问题已经有一年多了，所以有点晚了，但是谷歌搜索把我带到了这里，所以我想我会更新这个。后人4TW！

`GMSCircle`据我所知，现在有一个可以做的事情，几乎可以做任何事情`MKCircle`。
[Google 关于 GMSCircle 的文档](https://developers.google.com/maps/documentation/ios/reference/interface_g_m_s_circle)。

```
// Build a circle for the GMSMapView
GMSCircle *geoFenceCircle = [[GMSCircle alloc] init];
geoFenceCircle.radius = 130; // Meters
geoFenceCircle.position = SOME_CLLOCATION.coordinate; // Some CLLocationCoordinate2D position
geoFenceCircle.fillColor = [UIColor colorWithWhite:0.7 alpha:0.5];
geoFenceCircle.strokeWidth = 3;
geoFenceCircle.strokeColor = [UIColor orangeColor];
geoFenceCircle.map = mapView; // Add it to the map. 
```

//更新 Swift 5.3 的代码

```
 let circle = GMSCircle(position: position, radius:10)
 circle.fillColor = .clear
 circle.strokeWidth = 3
 circle.strokeColor = .black
 circle.map = mapView 
```

它的行为与 MKCircle（覆盖）非常相似，因为它会根据地图的缩放级别等调整大小。请忽略中心的蓝色圆圈；那是地图视图上显示的用户位置，我只是将相同的坐标用于 GMSCircle 的中心点。

超级容易。查看图片：

一种缩放级别： ![在此处输入图像描述](../Images/f3873453f980e56077969dde88ac6b2e.png)

在这里，我们缩小了一点： ![在此处输入图像描述](../Images/97750b79fff63293b60797f9c044e0b8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T23:36:20.137

目前SDK不支持圈子，但是这里有一个添加圈子的功能请求：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=4971](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4971)

同时，您可以通过绘制一条多段线来伪造一个圆圈，并带有几个短线段？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-26T17:39:10.870

```
func mapView(_ mapView: GMSMapView, didChange position: GMSCameraPosition) {
    // Make sure cicle is a GMSCircle Object  and it is a class variable
    circle.map = nil

    let point = mapView.center
    circle.position = mapView.projection.coordinate(for: point)
    circle.radius = 130.0
    circle.fillColor = .clear
    circle.strokeColor = .black
    circle.strokeWidth = 3.4
    circle.map = mapView
} 
```

# oracle - Oracle 的整理条款不起作用

> ID：15380442
> 
> 赞同：0
> 
> 时间：2013-03-13T08:41:09.590
> 
> 标签：oracle, oracle10g

我尝试使用带有 COLLATE 子句的查询，但我得到一个 ORA-00933。

```
SELECT *
 FROM t1
 WHERE _latin1 'Müller' COLLATE latin1_german2_ci = k; 
```

链接到文档[http://docs.oracle.com/cd/E17952_01/refman-5.0-en/charset-collat​​e.html](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/charset-collate.html)

我需要先安装一些东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:45:03.570

该链接来自 MySQL 参考手册。MySQL 恰好归 Oracle Corporation 所有，这就是文档可在 oracle.com 链接上获得的原因。但它与 Oracle 公司所拥有的数据库是完全不同的产品。（只是为了增加乐趣，Oracle Corporation 还拥有一些其他数据库产品，例如 RDB，它们也与 Oracle 数据库完全不同）。

假设您使用的是 Oracle 而不是 MySQL，那么您要完成什么？

# git - 如何忽略 gitignore 中的一些特殊文件？

> ID：15380443
> 
> 赞同：0
> 
> 时间：2013-03-13T08:41:10.270
> 
> 标签：git

我想忽略 .gitignore 中的一些特殊文件。例如symTbl.c，编译器会生成一些此类文件，它们位于不同的子目录中。同时我需要接受所有其他 .c 文件。

所以我的 .gitignore 将如下所示：

```
*
!*/
!*.c
symTbl.c 
```

但仍然不能忽略 symTbl.c。那怎么办？谢谢！

**注意**：我还有其他一些不应该被跟踪的文件，例如 .lzs .bin... 所以我需要先忽略 * 然后使用 !*.c 来跟踪 *.c。通过这样做，我不能简单地将 symTbl.c 放入 .gitignore。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:44:53.187

你只需要放

```
symTbl.c 
```

在`.gitignore`项目根目录中的文件中。已经跟踪的文件不能被忽略。检查`git ls-files | grep symTbl.c`您是否已经提交并删除它（`git ls-files | grep symTbl.c | xargs -d'\n' rm`直接删除它们）

编辑

我做了一个新的回购并将这些文件放入其中

```
# show all files, excluding those in the .git directory
$ tree -a -I .git
.
├── bla.bin
├── bla.c
├── foo
│   ├── bla.bin
│   ├── bla.c
│   └── symTbl.c
├── .gitignore
└── symTbl.c

1 directory, 7 files 
```

我的 .gitignore 包含你所拥有的：

```
$ cat .gitignore
*
!*/
!*.c
symTbl.c 
```

并且运行`git add .`只是`bla.c`在根目录和`foo/`目录中添加了不同的文件：

```
$ git add .
$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#   new file:   bla.c
#   new file:   foo/bla.c
# 
```

所以可能你已经提交了你的`symTbl.c`文件？如果是这样，`git rm`他们和他们将从现在开始被适当地忽略。

# codeigniter - Codeigniter：不会加载控制器页面

> ID：15380447
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:41:18.817
> 
> 标签：codeigniter

我有一个用 codeigniter 制作的网页，一切正常，但是当我尝试添加另一个控制器时，它给了我一个：“404 Page Not Found” - “找不到您请求的页面。” 为什么？我添加的控制器是教程中的控制器（我正在练习）：

```
<?php
class Blog extends CI_Controller {

    public function index()
    {
        echo 'Hello World!';
    }
}
?> 
```

我正在使用 Ubuntu，如果它有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:54:26.970

最好检查一下

```
// FILE NAME : blog.php
 class Blog extends CI_Controller(){
       function Blog(){
           parent::__construct();
       }
       function index(){
           echo 'Helloworld';
       }
    } 
```

1.  您的控制器文件名应该与您创建的类控制器名称相同或相同。
2.  尝试像这样在索引之前放置一个构造函数。

# air - Adobe Air 是否支持 RTMFP？

> ID：15380449
> 
> 赞同：0
> 
> 时间：2013-03-13T08:41:29.083
> 
> 标签：air, flash-builder, p2p, rtmfp

我开发了一个在浏览器上运行的点对点视频会议应用程序，现在我需要导出与 Android 应用程序相同的应用程序。我尝试使用 Adob​​e flash builder，它确实连接到 Cumulus 服务器，但没有触发 Netgroup 事件。Adobe Air 是否支持 RTMFP 或任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:02:58.213

Adobe AIR 1.5（或更高版本）支持 RTMFP

# objective-c - 为什么这段代码不断出现错误。代码 4.6

> ID：15380453
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:41:37.793
> 
> 标签：objective-c, xcode

```
NSImageCell *imageFromBundle;     
NSData *imageData;     
NSURL *imageURL = [NSURL URLWithString:@"http://www.greatwhatsit.com/wp-content/uploads/2012/03/jeremiah1.jpg"];     
NSLog(@"url");     
NSLog(@"data");     
NSImage *imageFromBundle = [[NSImage alloc] initWithData:imageData]; 
```

为什么这段代码不起作用。代码 4.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:46:05.263

您还需要初始化 imageData：

```
imageData = [NSData dataWithContentsOfURL:imageURL];
NSImage *imageFromBundle = [[NSImage alloc] initWithData:imageData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:47:47.743

您的定义和初始化必须具有相同的类型`imageFromBundle`

```
NSImageCell *imageFromBundle;
NSImage *imageFromBundle = [[NSImage alloc] initWithData:imageData]; 
```

改成：

```
NSImage *imageFromBundle;
NSImage *imageFromBundle = [[NSImage alloc] initWithData:imageData]; 
```

此外，作为 zakhej sais，您需要初始化`imageData`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:17:54.547

正如已经指出的那样，imageFromBundle 是第一个问题。但是存在其他问题，例如不是 imageData 仅被声明但没有被赋予任何数据。

您也可以直接在 NSImage中*initWithContentsOfURL 。*

```
 NSURL *imageURL = [NSURL URLWithString:@"http://i.stack.imgur.com/Zjno3.jpg?s=32&g=1"];
    NSImage * aImage = [[NSImage alloc] initWithContentsOfURL:imageURL];
    [_imageWellOutlet setImage: aImage]; //-- declared in .h header file
                                            //--  ( @property  (weak) IBOutlet NSImageView *imageWellOutlet;) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:51:22.397

尝试

```
NSURL *imageURL = [NSURL URLWithString:@"http://www.greatwhatsit.com/wp-content/uploads/2012/03/jeremiah1.jpg"];    
NSData *imageData = [NSData dataWithContentsOfURL:imageURL];  
NSLog(@"url");     
NSLog(@"data");     
NSImage *imageFromBundle = [[NSImage alloc] initWithData:imageData]; 
```

# fpga - 使用 RS 232 接口将 32 位数据连接到 spartan3E 套件

> ID：15380454
> 
> 赞同：0
> 
> 时间：2013-03-13T08:41:39.173
> 
> 标签：fpga

我有 2000 个 32 位长度的数据。我想将这些数据从系统连接到 spartarn 3E 套件。我认为使用 RS 232 我可以将数据连接到 spartarn 3E 套件。

如果有人知道如何将数据从 pc 连接到 spartarn 3E 套件，请回答。并说明我应该遵循哪些步骤将数据连接到 spartarn 3E 套件。

提前感谢那些试图回答的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:43:06.297

在 FPGA 中创建一个 UART 外设——要么写一个，要么下载一个。

从该外设获取数据并将其发送到 FPGA 中的其余代码。

您可以使用终端程序将数据从 PC 发送到串行端口，它将（假设一切设置正确）在连接到您创建的 UART 的信号上一个接一个地出现在 FPGA 内部。

# java - Android JSON Parsing 问题：似乎将其分成 2 个单独的对象并且只识别一个

> ID：15380456
> 
> 赞同：0
> 
> 时间：2013-03-13T08:41:43.857
> 
> 标签：java, php, android, sql, json

它的作用：这是一个 android 应用程序，它将模仿我的团队正在创建的网站 apdata.info。这是第二页，它将显示适合他们请求的搜索的 airpoprts。

**PHP**

...

```
$sql = "SELECT apname,apcity,apstate,apcountry,IATA FROM airports WHERE MATCH(apname,apcity,apstate,apcountry,IATA) AGAINST (? IN BOOLEAN MODE)";
$link = connectToDB();
if($stmt = $link->prepare($sql))
{
    $stmt->bind_param('s', $search);

    if($stmt->execute())
    {
        $stmt->store_result();
        if($stmt->num_rows >= 1)
        {
            $resultSet = array();

            $stmt->bind_result($apname, $apcity, $apstate, $apcountry, $IATA);
            $search_rows = $stmt->num_rows;
            if($search_rows > 0){
            while($stmt->fetch())
            {
                $resultSet[] = array('apname' => $apname, 'apcity' => $apcity, 'apstate' => $apstate, 'apcountry' => $apcountry, 'IATA' => $IATA);
                //echo "Your search returned $search_rows results";
                //echo "<a href='/Airports/airport.php?IATA=".$IATA."'>".$apname."</a><br>";
    print(json_encode($resultSet));
... 
```

**爪哇：**

```
private void fetchResults(String searchfor){
            String result = "";
            //the year data to send
            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            nameValuePairs.add(new BasicNameValuePair("search", searchfor));

            //http post
            try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://apdata.info/results/androidresult.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                entity = response.getEntity();
                is = entity.getContent();
                //System.out.println("------------looks good here");
            }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
            }
            //convert response to string
            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();

                result=sb.toString();
                //System.out.println(result);
            }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
            }

            System.out.println(result);
            //parse json data
            try{
                JSONArray jArray = new JSONArray(result);
                System.out.println();
                results = new ApResult[jArray.length()];
                for(int i=0;i<jArray.length();i++){
                    System.out.println("-----------jArray.length");
                        JSONObject json_data = jArray.getJSONObject(i);
                        results[i] = new ApResult(
                                json_data.getString("IATA"),
                                json_data.getString("apname"),
                                json_data.getString("apcity"),
                                json_data.getString("apstate"),
                                json_data.getString("apcountry")
                        );
                }
            }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
            }
        } 
```

结果打印出我的结果字符串的结果：

```
03-13 07:40:06.985: I/System.out(220):  [{"apname":"Bismarck Municipal Airport","apcity":"Bismarck","apstate":"North Dakota","apcountry":"United States","IATA":"BIS"}][{"apname":"Bismarck Municipal 
Airport","apcity":"Bismarck","apstate":"North Dakota","apcountry":"United States","IATA":"BIS"},{"apname":"Hector International Airport","apcity":"Fargo","apstate":"North Dakota","apcountry":"United 
States","IATA":"FAR"}][{"apname":"Bismarck Municipal Airport","apcity":"Bismarck","apstate":"North Dakota","apcountry":"United States","IATA":"BIS"},{"apname":"Hector International 
Airport","apcity":"Fargo","apstate":"North Dakota","apcountry":"United States","IATA":"FAR"},{"apname":"Cologne Bonn Airport","apcity":"Cologne \/ Bonn","apstate":"North Rhine-Westphalia","apcountry":"Germany","IATA":"CGN"}][{"apname":"Bismarck Municipal Airport","apcity":"Bismarck","apstate":"North 
Dakota","apcountry":"United States","IATA":"BIS"},{"apname":"Hector International Airport","apcity":"Fargo","apstate":"North Dakota","apcountry":"United States","IATA":"FAR"},{"apname":"Cologne Bonn Airport","apcity":"Cologne \/ Bonn","apstate":"North Rhine-Westphalia","apcountry":"Germany","IATA":"CGN"},
{"apname":"Dusseldorf International Airport","apcity":"Dusseldorf","apstate":"North Rhine-Westphalia","apcountry":"Germany","IATA":"DUS"}] 
```

问题是，jArray.length = 到 1，即使我收到的远不止这些。正如您在我的输出中看到的那样，该字符串似乎分为两部分，第一部分是 [{"apname":"Bismarck Municipal Airport","apcity":"Bismarck","apstate":"North Dakota" ,"apcountry":"United States","IATA":"BIS"}] 而所有其他的都用逗号分隔。

为了解决这个问题，我添加了一个修复这个错误的函数：

```
private String fixBug(String result) {
        result = result.replace("][", ",");
            return result;
        } 
```

但我想知道为什么它甚至会首先发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:50:17.953

您不应该为每个结果创建单独的 json。您应该将所有结果包含在一个 json 中。将数据保存在变量中，在 while 循环之外，您可以将其编码为有效的 json。尝试使用[http://jsonlint.com/](http://jsonlint.com/)进行验证。

现在你有

```
while() {
    $resultSet[] = array('apname' => $apname, 'apcity' => $apcity, 'apstate' => $apstate, 'apcountry' => $apcountry, 'IATA' => $IATA);
    print(json_encode($resultSet));
} 
```

应该是哪个

```
while() {
    $resultSet[] = array('apname' => $apname, 'apcity' => $apcity, 'apstate' => $apstate, 'apcountry' => $apcountry, 'IATA' => $IATA);
}
print(json_encode($resultSet)); 
```

# android - 如何从 Android 的 Table 中获取选定的行对象？

> ID：15380457
> 
> 赞同：0
> 
> 时间：2013-03-13T08:41:44.230
> 
> 标签：android, tablelayout

我正在使用以下代码创建一个包含 3 行的表。现在，我需要的是每当用户选择一行时，我只想 Toast 所选行的值。这是一个示例应用程序，实际上我有一个向量，并且我以表格格式显示向量值。每当用户在 tablerow 上选择我需要获取该对象时，我想实现一些 onItemSelected 或一些东西。

任何人都可以帮助解决这个问题。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TableLayout table = (TableLayout) findViewById(R.id.TableLayout01);
       table.removeAllViews();

       String[] valuesList = {"1","2","3"};
       for(int i=0;i<3;i++)
       {
            TableRow row = new TableRow(this);
            // count the counter up by one
            row.setLayoutParams(new LayoutParams(100,100));
            // create a new TextView
            TextView t = new TextView(this);
            t.setTextColor(Color.BLACK);
            // set the text to "text xx"     
            String value = valuesList[i];
            t.setText(value);
            row.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                    view.setBackgroundColor(Color.DKGRAY);
                }
                });

            View v = new View(this);
            v.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
            v.setBackgroundColor(Color.rgb(51, 51, 51));

            // add the TextView and the CheckBox to the new TableRow

            TableLayout.LayoutParams tableRowParams=
                      new TableLayout.LayoutParams
                      (TableLayout.LayoutParams.FILL_PARENT,200);

                    int leftMargin=10;
                    int topMargin=5;
                    int rightMargin=10;
                    int bottomMargin=5;

            tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

            row.setLayoutParams(tableRowParams);
            row.addView(t);

            // add the TableRow to the TableLayout
            table.addView(row);//,new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            table.addView(v);
       }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:47:48.097

您可能需要这样做：

```
 row.setOnClickListener(new View.OnClickListener() {
                public void onClick(View view) {
                 Toast.makeText(getApplicationContext(), "value was "+value, 
                  Toast.LENGTH_LONG).show();
                    view.setBackgroundColor(Color.DKGRAY);
                }
                }); 
```

# django - 我应该使用 django-gunicorn 集成还是 wsgi？

> ID：15380460
> 
> 赞同：6
> 
> 时间：2013-03-13T08:41:49.503
> 
> 标签：django, gunicorn, django-wsgi

我正在使用 gunicorn + django 设置一个 Web 服务器。有两种部署选项：要么使用常规 WSGI，要么使用 gunicorn 的 django-integration。我很想使用后者，因为它简化了配置，但是[django 文档](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/gunicorn/)是这样说的：

```
If you are using Django 1.4 or newer, it’s highly recommended to simply run your
application with the WSGI interface using the gunicorn command as described above. 
```

他们没有给出任何解释，所以我想知道为什么“强烈推荐”使用 WSGI？有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:32:06.767

从 Django 1.4 开始，您的项目将已经有一个 wsgi.py，它可以与任何 wsgi 服务器一起使用（其中有很多，gunicorn 只是其中之一）。

本质上，gunicorn 的旧 Django 集成只是为了让您更快地启动和运行，但它不再需要，因为所有 Django 项目现在都有 wsgi.py

# jquery - Javascript 原型继承与 jQuery 扩展

> ID：15380461
> 
> 赞同：0
> 
> 时间：2013-03-13T08:42:07.693
> 
> 标签：jquery, backbone.js, underscore.js, marionette, prototypal-inheritance

我正在使用以下代码从 Marionette 的 Item View 类继承：

```
Base.ItemView = function (options) {

    var baseItemViewConstructor = function () {

        this._itemViewVent = new Marionette.EventAggregator();

        this._itemViewController = null;

        this._data = null;

        Marionette.ItemView.apply(this, [options]);                
    };   

// inherit from Marionette's Item view
    baseItemViewConstructor.prototype = new Marionette.ItemView();

    baseItemViewConstructor.prototype = {
        constructor: baseItemViewConstructor,                

        getData: function () {
            return this._data;
        }
// , many other functions go here.
 };    

    return baseItemViewConstructor;
}();

Base.ItemView.extend = Marionette.ItemView.extend; 
```

使用 jQuery 扩展或下划线扩展的代码是：

```
jQuery.extend(EY.ATF.Tool.Common.Base.ItemView.prototype, Marionette.ItemView.prototype, {

    getData: function () {
        return this._data;
    }
});

Base.ItemView.extend = Marionette.ItemView.extend; 
```

当我在派生类中使用从 Marionette 的 Item 视图继承的 Base.ItemView 类时，

```
 View.CreateMyOwnView = Base.ItemView.extend({ 
```

我使用原型继承得到一个错误，说渲染不是一个函数。当我使用原型继承检查我的基类的实例时，render、serializeData 和许多其他原型方法并没有从 Marionette 类中复制。但是 JQuery 扩展很好地做到了这一点。

那么，如何在原型链中模仿 jQuery 扩展行为呢？

谢谢，曼达卡特。

# php - ZF2：应用程序级别的 bootstrap() 和 run() 有什么区别？

> ID：15380462
> 
> 赞同：2
> 
> 时间：2013-03-13T08:42:07.653
> 
> 标签：php, zend-framework2, zend-framework-mvc

这个问题与[Zend Framework 2 相关](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.intro.html)。

经过相当多的（重新）阅读和谷歌搜索后，我想出了以下几点：

*   对于 ZF2 应用程序，**bootstrap() 和 run() 之间的实际区别是什么**？

*   为什么要使用一个而不是另一个？

*   为什么 ZF2 Skeleton 在任何地方都使用 run() 而没有提及 bootstrap()？

*   那么，如果在使用 run() 时一切正常，那么何时会使用 bootstrap()？

*   run() 是否隐式调用 boostrap()？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T08:53:22.250

我不知道你为什么想知道这个深度的细节。如果更改，差异不会真正影响。

**对于 ZF2 应用程序，bootstrap() 和 run() 之间的实际区别是什么？**

`bootstrap()`是一个独立的类结构。`run()`是应用程序类的一部分。

**为什么要使用一个而不是另一个？**

Bootstrap 先于其他任何东西运行。它还初始化各种类的init函数（不在抽象中）。之后运行。换句话说，Bootstrap 会填满枪，Run 就像扣动扳机一样。

**为什么 ZF2 Skeleton 在任何地方都使用 run() 而没有提及 bootstrap()？**

Skeleton 是一个基本的骨架应用程序，它在框架的引导程序已经被调用之后被调用！

**那么，如果在使用 run() 时一切正常，那么何时会使用 bootstrap()？**

不，正如我所说，Bootstrap 就像装枪，而 Run 就像扣动扳机。如果您没有要加载的内容，则无法运行任何内容。如果没有隐式调用，则 Run 调用 Bootstrap。

**run() 是否隐式调用 boostrap()？**

理想情况下，它应该。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:52:15.787

是的，在运行 Mvc 之前，run() 会调用 bootstrap()。然而，不同之处在于 ZF2 具有事件驱动架构，不再需要在引导文件中准备引导。现在每个模块都可以为事件提供侦听器——在引导的情况下，事件是“引导”或方法 onBootstrap()。

[本文](http://phpmaster.com/whats-new-in-zend-framework-2/)可以向您介绍 ZF1 和 ZF2 之间最显着的区别。

# c# - 在 C# 中允许用户定义的字符串

> ID：15380463
> 
> 赞同：1
> 
> 时间：2013-03-13T08:42:08.223
> 
> 标签：c#, string, parsing, variables, parameterized

我在问一个非常常见的功能，我找不到任何信息。我想允许我的程序的用户使用程序中的变量创建自定义字符串。

例子：

我有一个清单：

```
ID   Name     Description       Value      Status
0    name 0   beschreibung 0    Wert 0     Status 0
1    name 1   beschreibung 1    Wert 1     Status 1
2    name 2   beschreibung 2    Wert 2     Status 2
3    name 3   beschreibung 3    Wert 3     Status 3
4    name 4   beschreibung 4    Wert 4     Status 4
5    name 5   beschreibung 5    Wert 5     Status 5
6    name 6   beschreibung 6    Wert 6     Status 6
7    name 7   beschreibung 7    Wert 7     Status 7
8    name 8   beschreibung 8    Wert 8     Status 8
9    name 9   beschreibung 9    Wert 9     Status 9 
```

现在用户应该能够定义自定义字符串，例如：

*ID 为 {ID} 的项目的名称是 {Name}。它的描述是{描述}。它具有值 {Value} 和状态 {Status}。*

我可以为这些字符串编写一个自定义解析例程，但我希望为该任务找到一个标准解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:44:55.250

C#（以及一般的 .NET）中字符串格式化的标准解决方案是使用[String.Format 方法](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)。所以你可以例如做：

```
string reult = string.Format("The Name of the Item with the Id {0} is {1}. It's Description is {2}. It has the Value {3} and the Status {4}.",
       id, name, description, value, status); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:47:24.617

我怀疑你想用你的对象列表中的值替换占位符，例如`{ID}`和。`{Name}`您可以使用带有模式的正则表达式，例如

```
\{(?<key>[A-Za-z]+)\} 
```

它将找到所有实例`{something}`并允许您提取`something`以从列表中获取值。

[`Regex.Match`](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)使用带有输入字符串和委托的重载`MatchEvaluator`，可以让您获得正确的值：

```
var myObject = new Dictionary<string,string>(){
    {"ID","1"},  
    {"Name","Bob Jones"},
    {"Description","A very nice man"},
    {"Value","1000"},
    {"Status","New"},
};
var regex = new Regex(@"\{(?<key>[A-Za-z]+)\}");
var input = "The Name of the Item with the Id {ID} is {Name}. It's Description is {Description}. It has the Value {Value} and the Status {Status}.";
string result = regex.Replace(input, m => myObject[m.Groups["key"].Value]);

Console.WriteLine(result); 
```

现场示例：[http ://rextester.com/FLGTQW95860](http://rextester.com/FLGTQW95860)

该示例中的字典只是为了演示正则表达式的用法 - 没有理由不能是`DataRow`自定义对象或属性的任何其他容器。

当然，此解决方案不包含任何错误处理（例如属性不存在的占位符），我怀疑如果您允许用户指定字符串，您将希望包含这些错误处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:45:28.817

你只是说：

```
var x = String.Format("The Name of the Item with the Id {0} is {1}. It's Description is {2}. It has the Value {3} and the Status {4}.",object.Id, object.Name, object.Description, object.Value, object.Status); 
```

还是我错过了重点？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:59:07.313

您可以定义自己的类并覆盖 ToString：

```
public class Program
{
    static void Main(string[] args)
    {
        var aString = new MyString() {Description = "desc", Id = 1, Name = "Ja", Status = "st", Value = "Val"};

        var myStrings = new List<MyString>() {aString};

        foreach (MyString myString in myStrings)
        {
            //The Name of the Item with the Id 1 is Ja. It's Description is desc. It has the Value val and the Status st.
            var outputStringVal = myString.ToString();
            //
        }
    }
}

public class MyString 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Value { get; set; }
    public string Status { get; set; }

    public override string ToString()
    {
        return String.Format("The Name of the Item with the Id {0} is {1}. It's Description is {2}. It has the Value {3} and the Status {4}.", this.Id, Name, Description, Value, Status);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T09:01:45.283

您可以允许用户在字符串中使用指定的“变量”。例如：

```
var userstring = "The Name of the Item with the Id {ID} is {Name}. It's Description is {Description}. It has the Value {Value} and the Status {Status}.";
var result = userstring.Replace("{ID}", Id).Replace("{Name}", Name).Replace("{Description}", Description).Replace("{Value}", Value).Replace("{Status}", Status); 
```

# java - 为什么我在使用同步块时需要传递这个？

> ID：15380464
> 
> 赞同：0
> 
> 时间：2013-03-13T08:42:16.083
> 
> 标签：java, synchronized

为什么我在使用同步块时需要传递“this”？同步部分的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:45:01.110

因为`synchronized`需要一个对象来锁定。`this`和其他任何东西一样方便，或者您可以说`Object lock = new Object()`并在 .sync 上同步`lock`。

或者，您可以将您的方法标记为`synchronized`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:47:00.170

Java 同步块构造采用括号中的对象。“this”是调用哪个方法的实例。同步构造中括号中的对象称为监视器对象。据说代码在监视器对象上是同步的。同步实例方法使用它所属的对象作为监控对象。

只有一个线程可以在同一个监视器对象上同步的 Java 代码块内执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:47:16.543

同步将在您指定的对象上完成，这意味着如果两个线程在同一个对象上同步，一次只能运行一个代码块。

它可以是任何对象，尽管它通常是`this`.

例如，这使您可以在同一类中的不同对象上进行同步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T08:48:38.840

syntex`synchronized(objectLock) { }` 不是`this`必需的，我们需要传递一个对象，在多个线程试图运行同一个同步块的情况下，我们希望对其进行独占访问。这样，如果在任何时间点，有 2 个或多个线程尝试访问同步块，则传递的对象（`this`在这种情况下为“”）将拥有该块的独占访问权，除非该块执行完成，否则没有其他人可以访问该块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T08:53:54.480

Synchronize 使用对象引用来锁定一个监视对象。您想要防止同时访问的每个资源都应该有自己的监视器对象。最简单的方法是经常使用`this`.

# c# - Xaml：在 DataTemplate 中绑定集合

> ID：15380466
> 
> 赞同：1
> 
> 时间：2013-03-13T08:42:28.933
> 
> 标签：c#, xaml, binding, datatemplate

我对 xaml 和数据绑定非常陌生，所以请不要吃我。我正在使用 Windows 8 Store Project atm 并且确实对嵌套数据绑定有一些理解问题。我将尝试尽可能清晰地构建我的帖子，如果需要，我非常愿意提供进一步的投入。

假设我有一个这样的类结构：

```
public class Hotels
{
    public Collection<Hotel> HotelCollection { get; set; }
}

public class Hotel
{
    public string Name { get; set; }
    public string Town { get; set; }
    public string ImageUrl { get; set; }
    public Collection<Room> RoomCollection { get; set; }        
}

public class Room
{        
    public string Name { get; set; }
    public string OccupancyMax { get; set; }
    public string OccupancyMin { get; set; }
} 
```

我想将这些数据绑定到 GridView（本身不需要是网格视图），如下所示： ![在此处输入图像描述](../Images/41bcd02ea91b990b398df68ae123e907.png)

我正在将数据加载到我的页面中（在 HotelPageViewModel 中，我确实有一个 ObservableCollection 的 'Hotel's -> HotelResults）：

```
 var viewModel = new HotelPageViewModel();
  this.DataContext = viewModel; 
```

所以到目前为止我尝试的是向我的 CustomStyles.xaml 添加一个数据模板。我可以发布此代码，但这就是我需要帮助的地方。**我不知道如何处理 Room-Collection。**我能够在我的输出中显示基本的酒店数据（我的草图的红色部分），但是我如何在我的 DataTemplate（蓝色部分）中管理多个房间？

HotelPage.xaml 的代码：

```
<GridView x:Name="HotelResults" HorizontalAlignment="Left" VerticalAlignment="Top"
          ItemsSource="{Binding HotelResults}"
          ItemTemplate="{StaticResource HotelPageTemplate}"         
</GridView> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T08:48:15.487

您将使用集合控件，例如将`ItemsControl`设置`ItemTemplate`为 another 的实例`DataTemplate`。

```
<DataTemplate x:Key="{HotelPageTemplate}">
    <StackPanel>
       <TextBlock Text="{Binding Name"} />
       ...
       <ItemsControl ItemsSource="{Binding RoomCollection}">
          <ItemsControl.ItemTemplate>
             <DataTemplate>
                <TextBlock Text="{Binding OccupancyMax}" />
                ...
             </DataTemplate>
          </ItemsControl.ItemTemplate>
       </ItemsControl>
    </StackPanel>
</DateTemplate> 
```

# c - dll代码转C源代码

> ID：15380469
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:42:42.717
> 
> 标签：c, dll

我有一个 Dll 文件。这是使用 C 编写的。如何将其转换为 C 源文件。
我从 java 调用这个 Dll 文件。当我调用其中一个函数时，它给了我 NaN 返回
值。我发现这个问题的原因可能在 C 函数中。所以我需要得到那个
函数定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:45:09.633

您不能轻易地将 DLL“转换”为源代码。如果 DLL 是开源项目的一部分，或者您可以从供应商、内部开发团队等处获得它的原始源代码，那么您可能会继续这样做。除了尝试使用反汇编程序对其进行逆向工程（丑陋，而不是您所要求的）之外，没有简单的方法可以满足您的要求。

# c++ - 如何使用 c++ 驱动程序将两个客户端 IP 连接到同一个 mongodb

> ID：15380470
> 
> 赞同：1
> 
> 时间：2013-03-13T08:42:42.920
> 
> 标签：c++, mongodb, nginx, ip

我正在尝试使用 mongo c++ 驱动程序创建一个客户端以连接到数据库。我成功地测试了本地主机的客户端。我使用的代码如下。

现在我想在不同的机器上拥有数据库和客户端，例如 IP 10.1.2.56 上的客户端和 IP 10.1.2.57 上的 mongodb

我应该在代码中进行更改以实现这一目标。我试图改变线路

```
c.connect("localhost"); //"192.168.58.1"); 
```

到

```
 c.connect("10.1.2.57"); //"192.168.58.1"); 
```

但这不起作用错误说“caught can't connect to server 10.1.2.57:27017” 我试图 ping IP 10.1.2.57，它也给了我响应。

```
#include <iostream>
#include "mongo/client/dbclient.h"

// g++ src/mongo/client/examples/tutorial.cpp -pthread -Isrc -Isrc/mongo -lmongoclient -lboost_thread-mt -lboost_system -lboost_filesystem -L[path to libmongoclient.a] -o tutorial
//g++ tutorial.cpp -L[mongo directory] -L/opt/local/lib -lmongoclient -lboost_thread-mt -lboost_filesystem -lboost_system -I/opt/local/include  -o tutorial

using namespace mongo;

void printIfAge(DBClientConnection& c, int age) {
    auto_ptr<DBClientCursor> cursor = c.query("tutorial.persons", QUERY( "age" << age ).sort("name") );
    while( cursor->more() ) {
        BSONObj p = cursor->next();
        cout << p.getStringField("name") << endl;
    }
}

void run() {
    DBClientConnection c;
    c.connect("localhost"); //"192.168.58.1");
    cout << "connected ok" << endl;
    BSONObj p = BSON( "name" << "Joe" << "age" << 33 );
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Jane" << "age" << 40 );
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Abe" << "age" << 33 );
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Methuselah" << "age" << BSONNULL);
    c.insert("tutorial.persons", p);
    p = BSON( "name" << "Samantha" << "age" << 21 << "city" << "Los Angeles" << "state" << "CA" );
    c.insert("tutorial.persons", p);

    c.ensureIndex("tutorial.persons", fromjson("{age:1}"));

    cout << "count:" << c.count("tutorial.persons") << endl;

    auto_ptr<DBClientCursor> cursor = c.query("tutorial.persons", BSONObj());
    while( cursor->more() ) {
        cout << cursor->next().toString() << endl;
    }

    cout << "\nprintifage:\n";
    printIfAge(c, 33);
}

int main() {
    try {
        run();
    }
    catch( DBException &e ) {
        cout << "caught " << e.what() << endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:32:07.520

我找到了上述问题的答案

早些时候，mongod 在 Mongodb 服务器端定义的端口和路径上运行

所以我通过以下命令停止了 Mongodb

```
$ sudo stop mongodb 
```

并通过以下命令再次使用默认定义的路径启动服务器

```
$ sudo mongod --dbpath /data/db --port 27017 
```

然后在c++中尝试了上面的代码，这次它连接到了远程服务器。

# ruby-on-rails - rails：如何在下一个视图中检查值

> ID：15380479
> 
> 赞同：0
> 
> 时间：2013-03-13T08:43:17.473
> 
> 标签：ruby-on-rails, ruby, view, controller

我正在尝试制作一个测验应用程序。这样问题表中的每个问题都具有以下字段：

qn，正确，选项 1，选项 2，选项 3

到目前为止，这是我的 questions_controller.rb ......

```
def show
  @question = Question.find(params[:id])
end

def answer
  #not working
  @answered = Question.find(params[:id])
end 
```

这是我来自的页面......

```
Shuffled from question
<ul>
<% [@question.correct, @question.option1, @question.option2, @question.option3].shuffle.each do |b| %>
  <li><%= link_to b, answer_path %></li>
<% end %>
</ul> 
```

单击链接会将其带到 answer.html.erb 页面 ok，但是一旦我在那里，我怎么知道单击了哪个链接？或者，我如何将其从控制器中取出。

我不能使用 find(params...) 因为它们来自不同的领域，而且我也不想查找问题...

我知道你们在翻白眼，但我看过一些类似的问题，但不能完全放在一起。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:57:35.963

您可以通过将属性值`answer`传入`params`

```
<%= link_to b, answer_path(:id => @question.id, :option => b) %> 
```

并在控制器动作中得到它`params[:option]`

**编辑**

如果您想知道单击了哪个选项，那么您可以

```
<% %w(correct option1 option2 option3).shuffle.each do |b| %>
  <li><%= link_to @question.try(b), answer_path(:id => @question.id, :option => b) %></li>
<% end %> 
```

并在控制器中

```
question = Question.find(params[:id])
option_value = question.try(params[:option]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:54:23.913

试试这个

```
<%= link_to b, answer_path(:id => @question.id) %> 
```

# python - Pyglet，播放器，下一首歌曲

> ID：15380488
> 
> 赞同：1
> 
> 时间：2013-03-13T08:44:10.250
> 
> 标签：python, python-3.x, tkinter, audio, pyglet

我正在尝试通过 pyglet 在 Python 3 中播放歌曲。我可以播放和停止一首歌曲，但是当我尝试播放下一首歌曲时，它会产生错误。[我按照这些说明进行操作。](http://www.pyglet.org/doc/programming_guide/controlling_playback.html)我将在 tkinter 中执行该程序。

我的代码：

```
import pyglet
import glob
from tkinter import Tk, Button
songs=glob.glob("*.mp3")
player=pyglet.media.Player()
def play_song():
    global player
    for i in range(len(songs)):
        source=pyglet.resource.media(songs[i])
        player.queue(source)
    player.play()
def pause_song():
    player.pause()
def next_song():
    player.next()

window=Tk()
play_=Button(text="play", command=play_song)
play_.pack()
pause_=Button(text="pause", command=pause_song)
pause_.pack()
next_=Button(text="next", command=next_song)
next_.pack()
window.mainloop() 
```

错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
   File "C:\Python33\lib\tkinter\__init__.py", line 1442, in __call__
   return self.func(*args)
  File "C:\Documents and Settings\Fany\Dokumenty\Hudba\Sabaton\2012 - Carolus Rex\py.py", line 15, in next_song
    player.next()
 AttributeError: 'Player' object has no attribute 'next' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-16T04:34:10.277

您可以使用 os 模块，或者只是查看播放下一首歌曲的过程，我认为这可能对许多可能使用 os 模块或其他任何人，使用全局变量播放下一首歌曲有所帮助，这很重要

```
from tkinter import *
import os

root = Tk()
root.geometry("500x500")
root.title("music player ")
Label(root, text="MUSIC PLAYER").pack()
i=0

def prev():
   pass
def paly():
    music_dir = 'D:\songs'
    songs = os.listdir(music_dir)
    print(songs)
    os.startfile(os.path.join(music_dir, songs[0]))
def nxt():
    global i
    music_dir = 'D:\songs'
    songs = os.listdir(music_dir)
    print(songs)
    os.startfile(os.path.join(music_dir, songs[i]))
    i=i+1
f1=Frame(root).pack()
Button(f1,text="prev",command=prev).pack(side=LEFT,padx=30)
Button(f1,text="play/pause",command=paly).pack(side=LEFT,padx=30)
Button(f1,text="next",command=nxt).pack(side=LEFT,padx=30)

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T05:51:35.003

尝试对 next_song() 进行以下更改

```
def next_song():
    player.next_source() 
```

**原因**
请参阅此页面
[https://pyglet.readthedocs.org/en/pyglet-1.2-maintenance/api/pyglet/media/pyglet.media.Player.html#pyglet.media.Player.time](https://pyglet.readthedocs.org/en/pyglet-1.2-maintenance/api/pyglet/media/pyglet.media.Player.html#pyglet.media.Player.time)

您会发现*next()*已“弃用”，建议使用*next_source()*而不是

高温高压

**PS**当我在我的机器上测试你的片段时，它起作用了。

# jquery - jquery函数不起作用

> ID：15380489
> 
> 赞同：2
> 
> 时间：2013-03-13T08:44:18.737
> 
> 标签：jquery, css

我正在使用 jquery + css3 创建手风琴菜单一切正常期望菜单在页面加载时总是打开并且隐藏它的代码不起作用这是我创建的小提琴

这是我的jQuery代码

```
 $(document).ready(function() {

    //ACCORDION BUTTON ACTION (ON CLICK DO THE FOLLOWING)
    $('.zero_menu_title_collapse').click(function() {

        //REMOVE THE ON CLASS FROM ALL BUTTONS
        $('.zero_menu_title_collapse').removeClass('on');

        //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
        $('.zero_menu_content').slideUp('normal');

        //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
        if($(this).next().is(':hidden') == true) {

            //ADD THE ON CLASS TO THE BUTTON
            $(this).addClass('on');

            //OPEN THE SLIDE
            $(this).next().slideDown('normal');
         } 

     });

    /*** REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

    //ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
    $('.').mouseover(function() {
        $(this).addClass('over');

    //ON MOUSEOUT REMOVE THE OVER CLASS
    }).mouseout(function() {
        $(this).removeClass('over');                                        
    });

    /*** END REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

    /********************************************************************************************************************
    CLOSES ALL S ON PAGE LOAD
    ********************************************************************************************************************/   
    $('.zero_menu_content').hide();

}); 
```

这是完整的小提琴

[http://jsfiddle.net/YU6nZ/](http://jsfiddle.net/YU6nZ/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T08:46:52.120

添加此 CSS 规则以使您的手风琴内容默认隐藏：

```
.zero_menu_content {
    display: none;
} 
```

UPD。此版本还将修复代码中的语法错误：

[http://jsfiddle.net/dfsq/YU6nZ/15/](http://jsfiddle.net/dfsq/YU6nZ/15/)

如果您使用 CSS 解决方案，我还删除`$('.zero_menu_content').hide();`了不需要的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:49:55.723

了解如何打开浏览器的 JavaScript 控制台。我的显示此错误：

> 语法错误，无法识别的表达式：。

...由此代码触发：

```
$('.').mouseover(function() {
  ^^^ 
```

不确定该代码的外观，但如果您删除完整的块，手风琴可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:52:28.127

你也有一个错误。

```
$('.').mouseover(function() {
    $(this).addClass('over');
}).mouseout(function() { $(this).removeClass('over'); }); 
```

你会得到**未定义的表达式。**在控制台中。所以代码的执行在那里终止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T08:52:48.593

您有以下 JavaScript 错误：

```
Uncaught Error: Syntax error, unrecognized expression: . 
```

搬家时：

```
$('.').mouseover(function() {
    $(this).addClass('over');

//ON MOUSEOUT REMOVE THE OVER CLASS
}).mouseout(function() {
    $(this).removeClass('over');                                        
}); 
```

应该：

```
//ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
$('.zero_menu_content_row').mouseover(function() {
    $(this).addClass('over');

//ON MOUSEOUT REMOVE THE OVER CLASS
}).mouseout(function() {
    $(this).removeClass('over');                                        
}); 
```

正确的小提琴：http: [//jsfiddle.net/YU6nZ/12/](http://jsfiddle.net/YU6nZ/12/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T08:48:38.007

```
//ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
$('.').mouseover(function() {
    $(this).addClass('over');

//ON MOUSEOUT REMOVE THE OVER CLASS
}).mouseout(function() {
    $(this).removeClass('over');                                        
}); 
```

这会创建一个 JS 错误，因此`$('.zero_menu_content').hide();`不会被触发。看看控制台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T08:59:23.697

试试这个，

```
 $(document).ready(function() {
/********************************************************************************************************************
CLOSES ALL S ON PAGE LOAD
********************************************************************************************************************/   
$('.zero_menu_content').hide();

//ACCORDION BUTTON ACTION (ON CLICK DO THE FOLLOWING)
$('.zero_menu_title_collapse').click(function() {

    //REMOVE THE ON CLASS FROM ALL BUTTONS
    $('.zero_menu_title_collapse').removeClass('on');

    //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
    $('.zero_menu_content').slideUp('normal');

    //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
    if($(this).next().is(':hidden') == true) {

        //ADD THE ON CLASS TO THE BUTTON
        $(this).addClass('on');

        //OPEN THE SLIDE
        $(this).next().slideDown('normal');
     } 

 });

/*** REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

//ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
$('.').mouseover(function() {
    $(this).addClass('over');

//ON MOUSEOUT REMOVE THE OVER CLASS
}).mouseout(function() {
    $(this).removeClass('over');                                        
});

/*** END REMOVE IF MOUSEOVER IS NOT REQUIRED ***/

}); 
```

我刚刚把你的 hide() 放在开头，

```
$(document).ready(function(){

}); 
```

# java - OpenGL 和 OpenGLES 中的 glVertexAttribPointer

> ID：15380491
> 
> 赞同：10
> 
> 时间：2013-03-13T08:44:33.653
> 
> 标签：java, opengl, opengl-es

我正在阅读有关 OpenGL 和 OpenGLES 的教程，我对`glVertexAttribPointer`在这两个 API 中使用该函数有点困惑。

在**OpenGL**教程中，此函数使用数字偏移作为最后一个参数（通过转换为 const GLVoid*），我认为顶点直接取自当前数组缓冲区。

```
glVertexAttribPointer(vs_position, 2, GL_FLOAT, GL_TRUE, 5 * sizeof(GLfloat), (const GLvoid*) (3*sizeof(GLfloat)) ); 
```

在**OpenGLES**教程中，最后一个参数直接指向表示顶点的结构：

```
GLFloat vertices[] = {...definition};
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices); 
```

我不明白这两个功能是如何工作的。它们是完全不同的功能吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T09:04:16.397

它们是以两种不同的方式使用的相同功能。我会解释为什么它会这样工作，但你不会在乎，这是出于非常愚蠢和不相关的原因。

重要的是他们在做什么。他们在做什么取决于你没有展示的东西：*什么是`GL_ARRAY_BUFFER`.*

看，`glVertexAttribPointer` *变化*的行为取决于它。如果在`GL_ARRAY_BUFFER`调用时没有绑定缓冲区对象`glVertexAttribPointer`，则函数将假定最终值是一个*指针*（如函数名称所示： glVertexAttrib **Pointer**）。具体来说，它是指向客户端拥有的内存的指针。

渲染时，顶点属性数据将来自先前提供的指针。因此，第二个示例只是使用以标准 C 样式声明的客户端数据数组作为源数据。不涉及缓冲区对象。

注意：OpenGL 3.1+ 的核心配置文件移除了使用客户端内存的能力；在那里，您*必须*使用缓冲区对象，如下所述。

如果一个缓冲区对象被绑定到`GL_ARRAY_BUFFER`when`glVertexAttribPointer`被调用，那么就会发生一些特殊的事情。OpenGL 将假装指针（就 C/C++ 而言，这是最终参数）实际上是*绑定*到`GL_ARRAY_BUFFER`. 它将指针转换为整数，然后存储该整数偏移量和当前绑定到的缓冲区对象`GL_ARRAY_BUFFER`。

因此，上面的代码采用`3*sizeof(GLfloat)`字节偏移量，并将其转换为指针。OpenGL 将获取指针并将其转换回偏移量，`3*sizeof(GLfloat)`再次产生。

当需要渲染时，OpenGL 将使用之前给定的偏移量从之前给定的缓冲区对象中读取。

第一个示例将顶点数据放入 GPU 内存中的缓冲区对象中。第二个示例将顶点数据放在 CPU 内存中的常规 C/C++ 数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T18:14:03.417

[GL 规范](https://www.khronos.org/opengles/sdk/docs/man/xhtml/glVertexAttribPointer.xml)清楚地提到了这一点：

情况 1：如果一个非零命名缓冲区对象绑定到 GL_ARRAY_BUFFER 目标，同时指定了一个通用顶点属性数组，则指针被视为缓冲区对象数据存储的字节偏移量。

情况 2：指定指向数组中第一个通用顶点属性的第一个组件的指针。

# ruby - 如何使用 ruby 显示轻量级 Web 客户端窗口

> ID：15380492
> 
> 赞同：1
> 
> 时间：2013-03-13T08:44:39.343
> 
> 标签：ruby, webkit, raspberry-pi, archlinux, xorg

我需要在 PAL 7" 显示器上使用没有用户控件的 Raspberry Pi 显示网页（没有键盘，没有鼠标，只是显示）。

上下文是：

*   树莓派平台
*   7" PAL液晶显示器
*   archlinux ARM
*   没有桌面环境
*   xorg 或最终是一个简约的窗口管理器（openbox、pekwm 等）
*   Ruby 语言（1.9.3 或最终 2.0.0）
*   webkit 或其他 web 引擎但 html5 兼容（我想使用 websocket）

在这种情况下显示网页的最佳方式是什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:05:14.573

我想你正在寻找这个：

[Ruby 最好/最简单的 GUI 库是什么？](https://stackoverflow.com/questions/260905/whats-the-best-easiest-gui-library-for-ruby)

Ruby 的真正问题是对 GUI 工具包的支持真的很差。而且，如果您想使用 websocket，我认为没有正确的选择（可能是带有 webkit 浏览器的 Ruby QT - 不确定）。

为什么需要用 Ruby 编写这个应用程序？我建议你在“kiosk”模式下生成一个普通的浏览器，比如 Firefox 或 Opera（Opera 内置了 kiosk 模式，而 Firefox 有一个插件），这样你就可以将你的应用程序编码为普通的 Web 应用程序并让火狐在那里连接。

# php - 计数查询在 codeigniter 中不起作用

> ID：15380494
> 
> 赞同：0
> 
> 时间：2013-03-13T08:44:46.667
> 
> 标签：php, mysql, codeigniter

我在 codeigniter 中有一个自定义查询来计算结果。

```
return $this->db->query("SELECT COUNT(*) FROM post WHERE MATCH (title, description)     AGAINST ('+$search_string*' IN BOOLEAN MODE)", NULL, TRUE); 
```

但这仅生成 1 行，但如果我在 phpmyadmin 中运行此查询，那么它会显示正确的结果。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:48:59.390

```
 $q = $this -> db -> query($your_custom_query);
 return $q -> num_rows(); 
```

这应该对你有用，但你必须用**表中的任何字段或 * 替换 COUNT(*)**，我建议一个字段。就像说..标题。

您的查询不起作用，因为 $this->db->query 返回了需要转换为数组的对象，例如`foreach ($q->result() as $row) {}`..

**你也可以试试** `return $this -> db -> query($your_custom_query)->result();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:18:27.803

```
$query =  $this->db->query("SELECT COUNT(*) as totalCounnt FROM post WHERE 
MATCH (title, description) 
AGAINST ('+$search_string*' IN BOOLEAN MODE)", NULL, TRUE);

$result = $query->row();

return $result->totalCount; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:57:17.830

我不认为`query()`... [docs](http://ellislab.com/codeigniter/user-guide/database/queries.html) here中有额外的参数

但是`but if i run this query in phpmyadmin then it shows correct results`通过..您可以尝试打印最后一个查询以检查它是否正确...您可以通过..

```
 $test=$this->db->query("SELECT COUNT(*) FROM post WHERE MATCH (title, description)     AGAINST ('+$search_string*' IN BOOLEAN MODE)"); //no need of other parameters
 echo $this->db->last_query();exit; 
```

查询完成后，您必须生成结果...

在你的情况下，那将是..

```
 return $this->db->query("SELECT COUNT(*) FROM post WHERE MATCH (title, description)     AGAINST ('+$search_string*' IN BOOLEAN MODE)")->row_array(); 
```

产生结果的[方法](http://ellislab.com/codeigniter/user-guide/database/results.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T08:51:04.133

这是使用 CI 活动记录类完成计数的方式

```
 $this->db->where('name', $name);
    $this->db->where('id !=', $artist_id);
    $this->db->from('artists');

    return $this->db->count_all_results(); 
```

# javascript - 在打印时隐藏 svg 部分

> ID：15380495
> 
> 赞同：5
> 
> 时间：2013-03-13T08:44:48.550
> 
> 标签：javascript, jquery, highcharts, media-queries, highstock

是否有可能在打印布局中隐藏部分 svg。

特别是我喜欢隐藏 highstock *rangeSelector*和*navigator*将打印页面。

这应该在没有 js triggert 按钮的情况下工作。它应该在使用浏览器打印按钮时工作。

是否有可能使用 css media=print 显示/隐藏元素并将此事件与 jquery 绑定？

需要隐藏在打印布局上的黄色部分：http: [//i49.tinypic.com/24mbxop.png](http://i49.tinypic.com/24mbxop.png)

对于这个例子：

```
$(function() {

    $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
        // Create the chart
        window.chart = new Highcharts.StockChart({
            chart : {
                renderTo : 'container'
            },

            rangeSelector : {
                selected : 1
            },

            title : {
                text : 'AAPL Stock Price'
            },

            series : [{
                name : 'AAPL',
                data : data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });
    });

}); 
```

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T11:49:27.060

@邦迪说了什么。

创建一个类似的类

```
@media print {
    .unprintable {
        visibility: hidden;
    }
} 
```

并将该类应用于您不想打印的 svg 元素

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <circle cx="50"  cy="50"  r="40" fill="red" />
   <circle cx="150" cy="50"  r="40" fill="red" />
   <circle cx="50"  cy="150" r="40" fill="blue" class="unprintable" />
   <circle cx="150" cy="150" r="40" fill="red" />
</svg> 
```

而你尝试打印，蓝色圆圈将不可见。

[http://jsfiddle.net/EqDGQ/](http://jsfiddle.net/EqDGQ/)

如果`visibility: hidden;`对您不起作用，请尝试`display: none;`。

# 已编辑

如果在绘制时无法添加类，请在页面加载后使用 Javascript 添加该类。

您不能使用 hide()，因为它也会从屏幕上删除元素。您必须打开一个新选项卡/窗口并调用 hide()，但正如问题中提到的，用户可以使用浏览器菜单进行打印。然后，您没有机会打开新的选项卡/窗口并调用 hide() 。

因此，您必须在页面加载时添加 .unprintable 类。然后，屏幕上会显示所有内容，但在打印时，不会打印 .unprintable 元素。

如果您发布该网站的链接，并告诉我您想隐藏什么，我可以帮助您编写 JS 代码，但它会类似于：http: [//jsfiddle.net/EqDGQ/1/](http://jsfiddle.net/EqDGQ/1/)

```
$(function() {
    $('svg circle[fill="blue"]').attr('class', 'unprintable');
}); 
```

# ----------------

# 再次编辑！:)

我编写了这个 JS 函数（需要 jQuery），它将“.unprintable”类添加到矩形区域内的所有 svg 元素中：

```
setUnprintableArea = function(id, xMin, yMin, xMax, yMax, rightAligned) {
    if (rightAligned) {
        svgWidth = $('#'+id+' .highcharts-container svg')[0].getBoundingClientRect().width;
        xMin += svgWidth;
        xMax += svgWidth;
    }
    $('#'+id+' .highcharts-container svg *').filter(function() {
        rect = this.getBoundingClientRect();
        return (xMin <= rect.left && rect.right  <= xMax &&
                yMin <= rect.top  && rect.bottom <= yMax);
    }).attr('class', 'unprintable');
}; 
```

你可以像这样调用这个函数：

```
setUnprintableArea('container', 15, 45, 240, 70); // Zoom
setUnprintableArea('container', -55, 15, 0, 40, true); // Top-right Buttons
setUnprintableArea('container', 0, 430, Number.MAX_VALUE, Number.MAX_VALUE); // Horiz Scroll Bar 
```

如果您需要隐藏右对齐的内容，请将`rightAligned`参数`true`设置为将 y 轴设置为 svg 的右边缘（表示右边缘的 x=0）并相应地调整 xMin 和 xMax。

我把它放在小提琴上：http: [//jsfiddle.net/DXYne/1/](http://jsfiddle.net/DXYne/1/)

这可以是一个解决方案吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:59:47.237

以上是正确的，但对于不引入新的 css 类、Javascript（即使我喜欢它）或运行时逻辑的方法：

```
@media print {
    svg circle[fill="blue"] { 
       display:none; 
    }
} 
```

希望能帮助到你。

# excel - Excel：针对同一工作表中的一组值返回第一次出现的值的单元格索引

> ID：15380500
> 
> 赞同：-2
> 
> 时间：2013-03-13T08:44:58.640
> 
> 标签：excel, excel-formula

![在此处输入图像描述](../Images/98d6a5e1908b8ce6eb7b9814710de198.png)

我刚刚完成了这项工作，我有一些 75000 个值需要对照我拥有的这些数据进行检查。我手头的工作是这样的。

1.  我得到了一个包含一组值的文本文件，我必须对照这个 Excel 表进行检查。
2.  我必须返回第一次出现的行号，最好是单元格索引

所以我想出了这个..我会将文本文件中的值粘贴到同一张 Excel 表中，就像我在红色标记旁边的图像中所做的那样，并在相邻的列中应用一些“神奇”公式，你们我希望对我有帮助”，它将返回您在图像上方看到的值范围内的索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:05:58.630

假设您的红色标记在 C80000 中并且没有隐藏列，那么根据需要复制以下内容可能会适合：

在 C80000 中：`=IFERROR(MATCH(B80000,$B$1:$B$75000,0),"")`
在 D80000 中：`=IF(ISNUMBER(C80000),"B"&C80000,"")`

未经我测试，不能在早期版本的 Excel 中工作。

# python - 矩阵数组绘制与我想要的 matplotlib 相反

> ID：15380504
> 
> 赞同：1
> 
> 时间：2013-03-13T08:45:00.610
> 
> 标签：python, matrix, matplotlib

我创建了一个矩阵

```
arr_n = np.ones((N,N), dtype = 'bool')
arr_n[arr_d[:,1], arr_d[:,0]] = 0
arr_d = np.array(data)       
self.ax.imshow(arr_n, cmap=plt.cm.spectral_r) 
```

我选择`spectral_r`了之后我想为这些点添加颜色。但是，我遇到了一个问题。它不是绘制我想要的数据（黑色），而是绘制我不想要的东西。所以我留下了与我想要的相反的东西。即我想要绘制的数据是白色的，而我没有绘制的部分（黑色）。 `data = [(14,64),(23,45),(12,34)]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:07:26.900

您可以使用颜色图的倒数：

```
self.ax.imshow(arr_n, cmap=plt.cm.spectral) 
```

或绘制布尔矩阵的逆矩阵。

```
self.ax.imshow(np.invert(arr_n), cmap=plt.cm.spectral) 
```

# php - 使用条件函数停止 PHP while 循环

> ID：15380507
> 
> 赞同：3
> 
> 时间：2013-03-13T08:45:07.733
> 
> 标签：php, while-loop, infinite-loop

我正在使用以下函数从一系列重定向中获取最终 URL...

[https://stackoverflow.com/a/4102293/1183476](https://stackoverflow.com/a/4102293/1183476)

它在 99.8% 的时间里都很好用。我无法真正确定异常，但我相信它与另一端的服务器为每次访问生成一个新的随机 URL 有关。因此，该脚本陷入无限循环。

要复制问题，请将`get_redirect_url`函数替换为...

```
function get_redirect_url($url){
    return $url.'x';
} 
```

**问题**

如何设置时间或迭代限制？

我觉得我什么都试过了。我尝试在查找下一个 URL 的 while 循环中放置一个基于时间的条件，但它不起作用，我不知道为什么。像这样...

```
function get_all_redirects($url){
    $redirects = array();
    $start = time();
    while ($newurl = get_redirect_url($url) && time()-$start < 10 ){
        if (in_array($newurl, $redirects)){
            break;
        }
        $redirects[] = $newurl;
        $url = $newurl;
    }
    return $redirects;
} 
```

我也尝试过计算这样的迭代......

```
function get_all_redirects($url){
    $redirects = array();
    $i = 0;
    while ($newurl = get_redirect_url($url) && $i < 10 ){
        if (in_array($newurl, $redirects)){
            break;
        }
        $redirects[] = $newurl;
        $url = $newurl;
        $i++;
    }
    return $redirects;
} 
```

上面的例子只是许多失败尝试中的 2 次。我准备好寻求帮助了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:59:20.387

我假设，您所说的循环是一个真正的循环，因此迭代将不起作用，因为如果 url 已经在数组中，则此处的中断会在递增之前中断。

```
if (in_array($newurl, $redirects)){
    break;
} 
```

为什么计时器不起作用，我不知道。但是通过将其放在循环的顶部来修复增量`$i++;`应该至少可以改善您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:54:32.650

只是扫描（一秒钟）您的代码不会显示任何明显的问题，但我想提出一些建议。

每当我在使用分配结果的控制流语句中看到条件时，它总是闻起来很腥（好吧，可以说这不是我的风格）：

```
while ($newurl = get_redirect_url($url) ... 
```

我可以打赌，通过取消该分配/条件或任何您想调用的名称，您的代码将变得更具可读性和可维护性，并且很高兴有机会解决您所看到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T08:59:20.507

*期间*有一个问题：

```
while ($newurl = get_redirect_url($url) && time()-$start < 10 ) 
```

并且应该在周围添加一些括号`$newurl = get_redirect_url($url)`

```
while ( ($newurl = get_redirect_url($url)) && time()-$start < 10 ) 
```

相反，since`&&`的优先级高于`=`. 否则`$newurl`得到条件表达式的结果，`get_redirect_url($url) && time()-$start < 10`即`1`.

# dojo - dojo 1.8 - 这次虽然是服务器，但每次选择更改时都无法初始化和更新 ComboBox

> ID：15380509
> 
> 赞同：0
> 
> 时间：2013-03-13T08:45:11.593
> 
> 标签：dojo

在获得帮助后，我能够使其工作，尽管我无法让 ComboBox 显示所选选项。

这次我想通过连接到服务器来即兴创作我的[jsfiddle](http://jsfiddle.net/clementyap/2CvU2/2/)，以获取列表。我想知道为什么它没有工作，虽然我是根据我以前的 jsfiddle 制作的。

当我在启用 firebug 和 firephp 的情况下运行它时。我可以看到我设法获取列表但无法启动 ComboBox。FireBug 或 FirePhp 没有产生任何错误。请看我的[jsfiddle](http://jsfiddle.net/clementyap/9tNhN/11/)。

```
meter_Select.on('change', function()
            {
                    console.debug('Selected Card = '+ meter_Select.value);
                    request.post('listofcards.php',{ //'CALL listmfg_codes()'
                    data:{cardX : meter_Select.value},
                    handleAs:"json"
                    }).then(
                    function(response)
                        {
                            var memoStore2 = new Memory({data:response});//ok
                            var card_Select = registry.byId('node_cardSelect');//ok
                            //console.debug('response ='+ memoStore2); 
                            console.debug('card Select(1A) ='+card_Select);//ok

                            if(card_Select)
                            {
                                card_Select.store = memoStore2;
                                console.debug('card Select(1C) ='+card_Select);
                            }//if
                            else
                            {
                                card_Select = new ComboBox({
                                store : memoStore2,
                                searchAttr : "mfg_code"
                                //style:{width:'200px'},
                                },"node_cardSelect");
                                console.debug('card Select(1B) ='+card_Select);
                            }//else

                            //card_Select.startup();
                        },//function(response)

                    function(error)//ok
                        {
                            alert('Getting a list of cards = '+error);
                        }//function(error)
                    )//then
            });//meter_Select.on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:06:09.377

出于某种原因，您的 ComboBox 需要一个明确的 ID。我猜某处发生了一些 ID 冲突：http: [//jsfiddle.net/9tNhN/13/](http://jsfiddle.net/9tNhN/13/)

这是相关的变化：

```
 combx = new ComboBox({
            store: memoStore2,
            searchAttr: "mfg_code",
            id: "some_unique_id"
        }, "node_cardSelect"); 
```

**更新**： ID 字段是您需要在 registry.byId(); 中使用的字段。构造函数参数之后的 ID 是它在 DOM 中的放置位置。更新了 jsfiddle：http: [//jsfiddle.net/9tNhN/14/](http://jsfiddle.net/9tNhN/14/)

# perl - 带有 perl dbi 模块的关系表

> ID：15380511
> 
> 赞同：2
> 
> 时间：2013-03-13T08:45:24.990
> 
> 标签：perl, foreign-keys, dbi

我想在这两个表之间用 perl 创建一个关系表并在其中插入数据：

```
$create_query = qq{
    create table article(
        id_article int(10) auto_increment NOT NULL,
        url MEDIUMTEXT COLLATE utf8_general_ci,
        html_extr_text TEXT COLLATE utf8_general_ci,
        concord_file TEXT COLLATE utf8_general_ci,
        sys_time VARCHAR(50),
        primary key (id_article)
        )
};
$dbh->do($create_query);

 $create_query = qq{
     create table event(
         id_event int(10) auto_increment NOT NULL,
         event MEDIUMTEXT COLLATE utf8_general_ci,
         primary key (id_event)
         )
};
$dbh->do($create_query); 
```

现在关系表如下所示：

```
$create_query = qq{
    create table article_event_index(
        id_article int(10) NOT NULL,
        id_event int(10) NOT NULL,
        primary key (id_article, id_event),
        foreign key (id_article) references article (id_article),
        foreign key (id_event) references event (id_event)
        )
};
$dbh->do($create_query); 
```

有人知道要填充“article_event_index”表的 perl 语句应该是什么吗？对于其他表，我为每个表使用数组，它看起来像这样：

```
my $i_event;
my $id_event = 0;
my @event_index;
for ($i_event = 0; $i_event < @event_prepare; $i_event++){
    $dbh->do("
        INSERT INTO `event`(`id_event`, `event`)
        VALUES ('$id_event', '$event_prepare[$i_event]')
        ") || die $dbh->errstr;
    push @event_index, $i_event;
}
$id_event++; 
```

在这种情况下，'id_event' 是由 $id_event 的增量生成的。如果我想在索引表中重用这个 id，这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:10:45.683

除了 Dave Sherohman 的回复之外，这里还有一些对您的代码的评论：

您应该考虑为您的插入使用准备好的语句：

```
my $sth = $dbh->prepare("INSERT INTO `event`(`id_event`, `event`) VALUES (?,?)"); 
```

然后在您的循环中，您可以对需要插入的每一行执行此操作：

```
$sth->execute($id_event, $event_prepare[$i_event]); 
```

这更简单（它为您处理引用）、更安全（防止 SQL 注入）和更快。

此外，您永远不需要使用 C 风格的 for 循环来遍历数组。您可以使用以下形式之一：

```
for my $i_event (0..$#event_prepare){
    #if you need the array index.
}

for my $event (@event_prepare) {
    #if you don't need the array index.
} 
```

此外，这只是一个偏好，但我不喜欢`{ ... }` 作为字符串分隔符，因为它们看起来太像代码块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:04:09.493

由于该`id_event`字段定义为`auto_increment`，您可以让数据库为您生成 id 值，这是我通常这样做以避免任何竞争条件的方式。（即，如果两个单独的用户/进程尝试同时插入行并且都生成相同的 id 值，则第二个提交的用户/进程将失败。）

插入一行后，`last_insert_id`如果需要在另一个表中用作外键，可以使用 DBI 的方法获取新行的自动生成的 id 值：

```
my $id = $dbh->last_insert_id(undef, undef, 'event', 'id_event'); 
```

# imagemagick - Imagemagick转换使缩略图大于框

> ID：15380522
> 
> 赞同：0
> 
> 时间：2013-03-13T08:46:09.743
> 
> 标签：imagemagick, thumbnails, imagemagick-convert

我正在尝试制作比盒子更大的缩略图。想法是显示缩略图并在鼠标悬停时显示正确的纵横比。

例子

```
Box size: 100x100 (min size)

If image is 3000x2000, i need 150x100
If image is 2000x3000, i need 100x150 
```

我可以在外部执行代码中的逻辑，但最好使用 imagemagick。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:34:01.980

将最大输出尺寸设置为 150×150 像素应该可以满足您的要求：

```
convert input.jpg -resize 150x150 output.jpg 
```

[默认情况下](http://www.imagemagick.org/script/command-line-processing.php#geometry)，传递给的几何图形`-resize`是最大尺寸。纵横比被保留。

您还可以像这样指定最小尺寸：

```
convert input.jpg -resize 100x100^ output.jpg 
```

# php - Yii 场景不工作

> ID：15380534
> 
> 赞同：0
> 
> 时间：2013-03-13T08:46:53.350
> 
> 标签：php, validation, yii, scenarios

我正在尝试在 Yii 中设置一个场景。我有一个名为 File 的模型，用于文件上传。现在，我想使用相同的模型来创建目录。目录没有文件属性，所以我在模型中设置了这样的场景：

```
public function rules()
{
  return array(
    array('file', 'file', 'types'=>'jpg, gif, png, jpeg, bmp', 'maxSize'=>1024 * 1024 * 10, 'tooLarge'=>'Bestand moet kleiner dan 10MB zijn.'),
    array('file', 'file', 'on'=>'makefolder', 'allowEmpty'=>true),
  );
} 
```

在控制器中，我触发了场景，`$model = new File("makefolder");`即使现在我总是收到“文件不能为空白”的错误。我[将此页面](http://www.yiiframework.com/wiki/266/understanding-scenarios/)用作文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:46:13.917

只是一个猜测（因为您的原始代码对我来说似乎很好）但您可以尝试设置第一个规则对所有场景都有效，除了`makefolder`：

```
public function rules()
{
  return array(
    array('file', 'file', 'types'=>'jpg, gif, png, jpeg, bmp', 'maxSize'=>1024 * 1024 * 10, 'tooLarge'=>'Bestand moet kleiner dan 10MB zijn.', 'except'=>'makefolder'),
    array('file', 'file', 'on'=>'makefolder', 'allowEmpty'=>true),
  );
} 
```

有了这些规则，错误还在吗？

但是上传文件和创建文件夹不是一回事，你应该使用 2 个不同的模型！

# arrays - 在 MATLAB 中将 txt 文件（带有字符和数字）读入数值数组/矩阵的最简单方法？

> ID：15380537
> 
> 赞同：0
> 
> 时间：2013-03-13T08:46:57.750
> 
> 标签：arrays, matlab, text-files

对这一问题感到非常沮丧。基本上有一个 txt 文件，其中包含代码行，代码是字母和数字（不同长度）的混合，它们之间没有逗号和空格，即：txt 文件中的一个代码是 X32W21039A23

我需要将它读入一个数字数组/矩阵，以便我可以轻松地操作它，并且我必须用表格中的相应数字替换字母。这是我目前拥有的

```
fid = fopen('upcs.txt');
mat = [];
if fid == -1
disp('File open was not successful')
else 
while feof(fid) == 0
    % Read contents of file and store into a matrix
    aline = fgetl(fid);
    [P] = sscanf(aline, '%s');
    if length(A) == 12
        mat = [mat P];
    end
end
codes =reshape(mat, length(mat)/12, 12) 
```

基本上我已经从 txt 文件中删除了所有不是 12 位数长的行（我可以这样做），并将剩余的行转移到字符数组“mat”中。但是，mat 是一个字符数组，而不是数字数组。我已经尝试过诸如 cell2mat 和 str2num 之类的函数，但无济于事，因为我相信这些代码被视为单元格或字符串，而不是数字。我相信我需要在数组中的字符串之间放置空格。

总而言之，任何人都可以帮助我轻松地将 txt 文件中的代码转换成一种我可以像数字向量一样轻松操作它的方式，即：[1 2 3] 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:55:54.243

我不确定这是否能回答您的问题，但您可以通过将矩阵转换为 a 来强制 MATLAB 将矩阵存储为数字`double`：

```
codes = double(codes) 
```

但是，您仍然可以使用字符执行算术和索引操作等，所以我不确定这是否可以满足您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:58:07.973

我认为这就是你要找的：

```
fid = fopen('upcs.txt');
mat = [];
if fid == -1
    disp('File open was not successful')
else 
    while feof(fid) == 0
        % Read contents of file and store into a matrix
        aline = fgetl(fid);
        P = sscanf(aline, '%d');
        if length(A) == 12
            mat = [mat; P];
        end
    end
end

codes = mat 
```

`sscanf`将格式更改为`%d`. 也改变了`mat`附加。那样`mat`已经是你的结果了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-27T05:07:47.487

您可以使用从文件中读取的 ASCII 字符与所需值之间的对应表：

```
table = [zeros(1,'0'-1) , 0:9 , zeros(1,'A'-'9'-1) , ('A':'Z')-'A' + 10];
                                                   %// 10 -> 35
                                                   %// or whatever values for 'A' to 'Z'

table('0123456789ABCDWXYZ')
%// = [0  1  2  3  4  5  6  7  8  9  10  11  12  13  32  33  34  35]

table('X32W21039A23')
%// = [33  3  2  32  2  1  0  3  9  10  2  3] 
```

# ios - 根据单击的按钮更改内容？

> ID：15380543
> 
> 赞同：1
> 
> 时间：2013-03-13T08:47:12.917
> 
> 标签：ios, objective-c, cocoa-touch

我有两个`UIViewControllers`链接在一起。

第一个`UIViewController`有 4 个`UIButtons`，所有这些都带我到第二个`UIViewController`。

但是，内容应该根据我点击的按钮而改变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T08:50:21.353

给每个按钮一个唯一的标签，并使用`prepareForSegue:sender:`您可以检查单击的按钮标签的方法，然后相应地更改您的内容。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   UIButton *buttonSender = (UIButton *)sender;
   NSLog(@"Tag of the button tag selected = %d", buttonSender.tag);

   switch (buttonSender.tag) {
        case 1:
            // Content if button 1 was clicked.
            break;
        case 2:
            // Content if button 2 was clicked.
            break;
        case 3:
            // Content if button 3 was clicked.
            break; 
        case 4:
            // Content if button 4 was clicked.
            break;   
        default:
            break; 
   }
} 
```

# php - 织物 js 或 imagick 从图像中删除白色

> ID：15380547
> 
> 赞同：3
> 
> 时间：2013-03-13T08:47:20.020
> 
> 标签：php, javascript, imagemagick, transparency, fabricjs

我遇到了这种情况，我很难在谷歌上搜索并解释。

我们公司在铝上打印照片，我们给客户两种选择。

1.  第一种选择是将他们的图片打印在铝上，就像他们给我们的图片一样，所以如果图片有白色背景，则图片会以白色背景打印。就这么轻松。

2.  第二个选项是我们可以在不使用白色的情况下打印他们的图片。而不是打印所有“白色值”（<-我能想到的最好的解释），我们让它保持透明。

我知道织物 JS 中有这个 removeWhite 过滤器，它可以用透明区域替换白色区域。但这不是我需要的。我需要一个 Fabric JS 过滤器、ImageMagick 东西或任何其他可以将像素的“白色值”变为透明的 PHP 或 JS 解决方案。我知道这些东西对你们来说可能听起来很模糊，但让我试着用这种方式解释：

*   如果我遇到一个白色像素，我需要让它透明。

*   如果我遇到一个灰色像素，我需要将它从白色和黑色的组合变成透明和黑色的组合。

*   如果我穿过一个彩色像素，我还需要将“白色值”转为透明。

这是我尝试完成的过滤器/效果的前后示例：

前：

![](../Images/665dedc0cd96af58e66eed8487bb4c6e.png)

后：

![](../Images/5970759cd600ca79902247d181247813.png)

如果您不明白我的要求，请随时问我任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-21T09:21:52.927

我让它工作。通过使用[YUV](http://en.wikipedia.org/wiki/YUV)颜色空间中的因素，我可以创建一个 Fabric JS 图像过滤器。

得到我正在寻找的结果需要大量的反复试验。因此，我没有（详细）描述它是如何工作的。据我所知，我使用 YUV 因子来获得（RGB）颜色的亮度。

```
for (i = 0; i < iLen; i++) {
    for (j = 0; j < jLen; j++) {
      index = (i * 4) * jLen + (j * 4);
      var yuv = {};
      yuv.r = data[index] / 255 * 1 * 0.299;     
      yuv.g = data[index + 1] / 255 * 1 * 0.587; //we use the yuv formula constants
      yuv.b = data[index + 2] / 255 * 1 * 0.114; //to try to catch the Y (brightness)
      yuv.y = yuv.r + yuv.g + yuv.b;             //you can tweak this
      data[index + 3] = 350 - (yuv.y / 1 * 255); //by changing the first number after the "=" on this line!
    }
} 
```

不知何故，通过弄乱最后一行的 350，您可以更改透明度因子。

很抱歉无法解释有关此 Fabric 过滤器如何工作的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T22:12:38.860

所以 Fabric.js 中有一个过滤器可以做到这一点。

[http://fabricjs.com/docs/fabric.Image.filters.RemoveWhite.html](http://fabricjs.com/docs/fabric.Image.filters.RemoveWhite.html)

```
var filter = new fabric.Image.filters.RemoveWhite({
  threshold: 40,
  distance: 140
});
image.filters.push(filter);
image.applyFilters(canvas.renderAll.bind(canvas)); 
```

# windows - 在 Windows 命令提示符下粘贴但不执行命令

> ID：15380551
> 
> 赞同：1
> 
> 时间：2013-03-13T08:47:25.670
> 
> 标签：windows, cmd

我的目标是显示 Windows 命令提示符并在命令行上显示命令而不执行它。因此，如果我想显示命令`echo Hello`，我希望启动命令提示符并显示：

`C:\Windows\System32>echo Hello_`

... 其中 _ 是等待用户按键的闪烁光标。

为此，我尝试创建 Windows 命令提示符可执行文件的快捷方式，将其“目标”更改为： `C:\Windows\System32\cmd.exe ...`

或包含以下内容的 bat 文件：

`cmd.exe /k ...`

... 其中 /k 代表：

> /k ：执行字符串指定的命令并继续

这使得命令提示符继续存在并且不会终止 /c 开关的作用方式。

知道如何达到这个结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:30:38.367

一个人无法实现你想要的`cmd`。不过，它可以用 VBScript 来完成。

```
Set sh = CreateObject("WScript.Shell")

sh.Run "%COMSPEC% /k @title MyCmd"
sh.AppActivate "MyCmd"
sh.SendKeys "echo Hello" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:48:03.347

我进行了测试，结果成功。但不知道这是你搜索的..

1.  做一个记事本然后写

设置 /p id=你好

1.  以 .bat 格式保存记事本
2.  做一个快捷方式，选择你之前保存的记事本
3.  运行快捷方式。

那是你想要的吗？

# magento - Magento中的自定义邮件

> ID：15380553
> 
> 赞同：0
> 
> 时间：2013-03-13T08:47:30.630
> 
> 标签：magento

我正在向管理员发送一封自定义电子邮件，它工作正常，但是当我刷新页面时出现以下错误：

```
Fatal error: Call to a member function send() on a non-object app/design/frontend/default/default/template/custom/custom.phtml on line 457   my code is 

$emailadminTemplate  = Mage::getModel('core/email_template')->loadDefault('custom_email_template_to_admin_customproduct');
$emailadminTemplate->setSenderName($salesData['name']);
$emailadminTemplate = array();
$emailadminTemplate['name'] = $salesData['name'] ;
$emailadminTemplate['productname'] = $auction->getProductName();
$emailadminTemplate['totalbidder'] = $auction->getTotalBidder();
$emailadminTemplate['startdate']= $gdate ;$emailadminTemplate['starttime']=$ttime ;
$emailadminTemplate->send($salesData['email'],$salesData['name'],$emailadminTemplate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:53:54.433

您覆盖了 var "$emailadminTemplate"。模型对象变成了一个参数数组！

```
$emailadminTemplate  = Mage::getModel('core/email_template')->loadDefault('custom_email_template_to_admin_customproduct');
$emailadminTemplate->setSenderName($salesData['name']);
$emailadminTemplateParams = array();
$emailadminTemplateParams['name'] = $salesData['name'] ;
$emailadminTemplateParams['productname'] = $auction->getProductName();
$emailadminTemplateParams['totalbidder'] = $auction->getTotalBidder();
$emailadminTemplateParams['startdate'] = $gdate ;
$emailadminTemplateParams['starttime'] = $ttime ;
$emailadminTemplate->send($salesData['email'],$salesData['name'],$emailadminTemplateParams); 
```

# unix - 用于 ％？在Unix中

> ID：15380561
> 
> 赞同：1
> 
> 时间：2013-03-13T08:47:52.540
> 
> 标签：unix

我是 unix 新手，有人可以告诉我 '%' 的用途吗？在下面的命令中：

```
-bash-3.2$ sample=test123
-bash-3.2$ sample=${sample%?}
-bash-3.2$ echo $sample
test12 
```

我可以看到它正在删除最后一个字符，但我可以删除任意数量的字符，例如 3 个字符等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:58:17.537

这是一个模式匹配运算符，意思是“如果模式匹配变量值的末尾，则删除匹配的最短部分并返回其余部分”。由于`?`匹配“任何单个字符”，最后一个字符将被删除。

因此，如果要删除三个字符，则需要将 替换为`?`匹配三个字符而不是一个字符的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:01:07.260

`%`是从最短后部移除的 bash 参数替换运算符

```
${var%pattern} 
```

`?`表示任何单个字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T08:57:39.760

第一：man 1 bash

语法： ${varname%word} 其中 word 是“匹配后缀模式”，因此您可以：

*仅删除“123”：*

```
echo ${sample%123}
test 
```

*删除任何 3 个字符：*

```
echo ${sample%???}
test 
```

ETC

# c - 计算正实数的乘法倒数

> ID：15380564
> 
> 赞同：2
> 
> 时间：2013-03-13T08:48:05.387
> 
> 标签：c, algorithm, math

我想在不使用除法的情况下计算正实数的乘法逆。在阅读了 Newton Raphson 方法的各个页面后，我实现了以下代码来计算逆：

```
#define PRECISION 0.1e-5
double inverse(double num) {
    double ans = num;
    while (ans * num > 1 + PRECISION || ans * num < 1 - PRECISION) {
        ans = ans * (2 - num * ans);
    }
    return ans;
} 
```

现在，问题是，我实际上没有得到反值。循环无限进行。

所以，我注意到的**第一**`ans`件事是：变得负数的值，我添加了一个声明
`if (ans < 0) ans *= -1;`
，以便`ans`始终保持正数。

**需要注意的第二**点：如果我的初始化，`ans = 0.5`那么我得到了几个`num`=值的正确答案`(1, 2, 3, 5)`。

所以，我的假设是，由于变量初始化不当，实现无法正常工作`ans`。

所以，最后我的问题是：
**1**。这种方法实际上可以用来计算所有正实数的倒数吗？
**2** .如果是，那么在使用牛顿拉夫森法时，假设的初始值有什么条件吗？
**3** .有没有其他更好的方法来计算倒数而不使用除法？

## **编辑：**

感谢你的回答。因此，如答案中所述，我将初始值更改为`ans`to`PRECISION`并且它有效！此外，现在由于初始值适用于特定的最大限制`num`，`ans`因此永远不会变为负数，因此不需要我最初添加的否定检查条件。

所以，这是工作代码（至少适用于我给出的输入。）

```
double inverse(double num) {
    // Added to make it valid for all inputs.
    // For a too large number under the precision constraint, the answer is 0.
    if (num > 999999)
        return 0;
    double ans = PRECISION;
    while (ans * num > 1 + PRECISION || ans * num < 1 - PRECISION) {
        ans = ans * (2 - num * ans);
    }
    return ans;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:39:19.817

您应该从 (0, 2/num) 中选择初始近似值。如果您从 2/num 的另一侧选择它，该方法可能不会收敛：近似值将超过 0，并且序列将趋于 -∞。

为了得出区间，让我们看看`ans*(2-num*ans)`符号变化的地方：当 2-num*ans < 0 或 ans > 2/num 时，它变为负数。所以最初`ans`应该小于 2/num。

为了能够选择一个好的初始近似值，您必须对浮点数的表达方式有所了解。通常计算机使用 x = s*m*2 ^e，其中 s 是符号，m（“尾数”）在 (0.5, 1) 中，e（“指数”）是整数。现在 1/x = s*1/m * 2 ^(-e)，所以问题被简化为计算范围 (0.5, 1) 中数字的倒数，在该范围内，您可以使用例如 1 作为初始猜测。显然，该范围内的最佳初始猜测是[48/17 - 32/17*m](http://en.wikipedia.org/wiki/Division_algorithm#Newton.E2.80.93Raphson_division)。

^(一个应该适用于所有数字 s*m*2 e)的初始猜测是 s*2 ^(-e)。在 C 中，这可以计算为：

```
double ans = num;
// Initial guess: ans = 2**(-floor(log num))
long int *t = (long int*)(&ans);
*t = (*t & (0x1l<<63)) | (~*t & (0x3FFl << 52)) - (0x1l << 52);
      /* sign */              /* negative exponent */ 
```

（注意：我没有检查边缘条件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:11:43.867

要近似 x 的倒数，只使用乘法和减法，可以猜出一个数字 y，然后用 2y - xy^2 重复替换 y。一旦 y 的变化变得（并保持）足够小，y 就是 x 的倒数的近似值。

ans = (2*ans)- (num*ans*ans);

请添加括号并尝试

在建设性数学中，要使实数 x 有倒数，x ≠ 0 是不够的。必须给定一个有理数 r，使得 0 < r < |x|。就上一段的逼近算法而言，这需要证明y的变化最终会变得任意小。 **=> 此方法不能扣除所有实数的乘法逆**

每个非零元素都具有乘法逆元的环是除法环；同样地，它成立的代数是除法代数。

你想使用模数吗？在模算术中，还定义了 a 的模乘逆：它是满足 ax ≡ 1 (mod n) 的数 x。当且仅当 a 和 n 互质时，这种乘法逆存在。

****_编辑*_ _* ____****

 **刚刚注意到最初 ans = num; ans = 2*ans-num*ans*ans; => ans = 2 * ans - 3 * ans = -1 * ans

所以它总是会是一个负值。相信初始化为num并不是一个好主意。尝试将ans设置为1**

# wso2 - apache common-vfs 线程池配置

> ID：15380566
> 
> 赞同：1
> 
> 时间：2013-03-13T08:48:08.440
> 
> 标签：wso2, wso2esb, synapse, apache-commons-vfs

有没有common-vfs的配置来设置ThreadPool？我在 WSO2 ESB apache Synapse 中使用这个 vfs。我已经在寻找文档等，但我没有发现关于 vfs 中的 ThreadPool 的任何内容。那么我该如何配置呢？谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:36:18.843

`bin/wso2server.bat`我在第 158 行添加了以下配置：

```
-Dsnd_t_core=120 -Dsnd_t_max=600 
```

这将适用于相当多的 vfs 代理。但我发现创建的线程与配置核心一样多。[请参阅此处的错误。](https://stackoverflow.com/q/15361501/583513)

# iphone - 在 iOS 中选择 Tabbar 项

> ID：15380572
> 
> 赞同：-2
> 
> 时间：2013-03-13T08:48:31.450
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller, uitabbarcontroller

我的应用程序有可以选择的#hashtags。

我们的 TabBar、MainVC、ProfileVC 和 TagVC 中只有 3 个选项卡。TagDetailVC 通常通过 TagVC 访问。

当用户选择一个标签时，她将被定向到 TagDetailViewController。

**编辑**我在故事板上连接了一个 tabbarController。

现在我有这个：

```
TagDetailViewController *dest = [[TagDetailViewController alloc] init];
UINavigationController *nav = [self.tabBarController.viewControllers objectAtIndex:2];
[nav pushViewController:dest animated:YES]; 
```

但是，我现在看到的只是 TagVC。我在 TagDetailVC 的 viewDidLoad 中放置了一条日志语句，但它没有显示。

作为记录，这是我的故事板的组织方式：

```
TabBarController -> NavigationVC -> MainVC ... 
                 -> NavigationVC -> ProfileVC ...  
                 -> NavigationVC -> TagVC -> TagDetailVC 
```

我有兴趣让 tabBar 选择 TagVC，然后将 TagDetailVC 推送到 TagVC 的 navigationController 上。当用户按下标签时，我期望的行为是： 1\. 在 TagVC 上选择了选项卡 2\. TagDetailVC 被推送到 TagVC 的 NavigationVC 上。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:53:50.550

您可以使用以下方法`UITabbarController`：

```
 [tabBarController setSelectedIndex:2]; 
```

根据我的理解，这将是：`NavigationVC -> TagVC`

现在使用`NSNotification`, 并将视图控制器推送到`TagDetailVC`.

希望这可以帮助您实现您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:02:17.477

我会尝试这样的事情（伪代码）：

```
on tagTapped
    tagDetailViewController = (alloc, config TagDetailVC)
    (tab controller).viewControllers[2].viewControllers = @[ new TagVC, tagDetailViewController ] ;
    (tab controller).selectedIndex = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:13:45.167

不知何故，这是有效的。

```
self.tabBarController.selectedIndex = TAB_INDEX_TAGS;
UINavigationController *nav = [self.tabBarController.viewControllers objectAtIndex:2];
[nav pushViewController:dest animated:YES]; 
```

# android-intent - 如何以编程方式从子活动返回选项卡活动

> ID：15380574
> 
> 赞同：2
> 
> 时间：2013-03-13T08:48:35.510
> 
> 标签：android-intent, android-tabhost, android-tabs

我在我的应用程序中使用 tabHost 创建了 4 个选项卡，当我单击第一个 tabActivity(Request.class) 中的按钮时，它将转到另一个名为 Edit.class 的类，我想从 Edit.class 返回到 Request.class我试图从一项活动传递到另一项活动

```
 Intent intent = new Intent(Edit.this,Request.class);
 startActivity(intent); 
```

它工作，但它不显示请求类中的选项卡，它只加载对应于Request.class 的xml。如何解决这个问题？

```
 |Tab1|Tab2|Tab3|Tab4|

                     |
                Edit.class 
```

这里Tab1是Request.class，我需要从Edit.class回到Request.class，怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:42:07.960

试试下面的代码：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {

         Intent i = new Intent(Activity1.this,Activity2.class);
             startActivity(i);  

        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# java - 错误转换结果HttpPost android

> ID：15380582
> 
> 赞同：1
> 
> 时间：2013-03-13T08:48:56.250
> 
> 标签：java, android, eclipse, url, http-post

我一直在开发一个从服务器中提取一些 JSON 字符串的应用程序。要访问 JSON，我需要使用密钥和秘密进行发布。否则我会收到一条错误消息，提示缺少密钥和/或秘密。

我的 JSONfunctions.java

```
package com.spxc.ssa.streaming.task;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONfunctions {

    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);

            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("key", "12345"));
                nameValuePairs.add(new BasicNameValuePair("secret", "AndDev is Cool!"));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }

                //mhfgpammv9f94ddayh8GSweji

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{

            jArray = new JSONObject(result);            
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
    }
} 
```

我的活动：

```
package com.spxc.ssa.streaming;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

import com.actionbarsherlock.app.SherlockListActivity;
import com.actionbarsherlock.view.MenuItem;
import com.spxc.ssa.streaming.task.JsonAsync;
import com.spxc.ssa.streaming.task.JsonAsync.JsonListener;

public class ListMoviesController extends SherlockListActivity implements
        OnClickListener {

    private ProgressDialog mDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // getWindow().setFormat(PixelFormat.TRANSLUCENT);
        setContentView(R.layout.dblist);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setTitle("Movies");

        JsonAsync asyncTask = new JsonAsync();
        // Using an anonymous interface to listen for objects when task
        // completes.
        asyncTask.setJsonListener(new JsonListener() {
            @Override
            public void onObjectReturn(JSONObject object) {
                handleJsonObject(object);
            }
        });
        // Show progress loader while accessing network, and start async task.
        mDialog = ProgressDialog.show(this, getSupportActionBar().getTitle(),
                getString(R.string.loading), true);
        asyncTask.execute("http://sirsmokealot.ch/api/video/movies/");

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            finish();
            break;
        }
        return false;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    private void handleJsonObject(JSONObject object) {
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        try {

            JSONArray shows = object.getJSONArray("items");

            for (int i = 0; i < shows.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = shows.getJSONObject(i);

                map.put("video_id", String.valueOf(i));
                map.put("video_title", "" + e.getString("video_title"));
                map.put("video_channel", "" + e.getString("video_channel"));
                map.put("video_location", "" + e.getString("video_location"));
                mylist.add(map);
            }
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.dbitems,
                new String[] { "video_title", "video_location" }, new int[] { R.id.item_title,
                        R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv
                        .getItemAtPosition(position);

                Intent myIntent = new Intent(ListMoviesController.this,
                        TestVideoController.class);
                myIntent.putExtra("video_title", o.get("video_title"));
                myIntent.putExtra("video_channel", o.get("video_channel"));
                myIntent.putExtra("video_location", o.get("video_location"));
                startActivity(myIntent);
            }
        });

        if (mDialog != null && mDialog.isShowing()) {
            mDialog.dismiss();
        }
    }

} 
```

我的日志猫说：

```
Error converting result java.lang.NullPointerException: lock == null
Error parsing data org.json.JSONException: End of input at character 0 of 
```

任何帮助深表感谢！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:54:25.690

从服务器获得响应后，您错过了这两行

// 执行 HTTP Post 请求

```
 HttpResponse response = httpclient.execute(httppost);
 HttpEntity httpEntity = httpResponse.getEntity();
 is = httpEntity.getContent(); 
```

# c++ - 迭代 boost::shared_array

> ID：15380589
> 
> 赞同：3
> 
> 时间：2013-03-13T08:49:18.800
> 
> 标签：c++, boost, c++98

您将如何迭代 a 中的项目`boost::shared_array`？你会`get()`在上面做 a 并使用原始指针作为迭代器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:01:38.947

由于您已经在使用 boost，可能是这样的：

```
#include <boost/shared_array.hpp>
#include <boost/range.hpp>
#include <iostream>

int main()
{
    boost::shared_array<int> arr(new int[10]());

    int* ptr = arr.get();
    for (int i : boost::make_iterator_range(ptr, ptr+10))
    {
        std::cout << i << ',';
    }
} 
```

在任何情况下，您都需要自己记录数组的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:54:06.047

看到您已经知道数组的大小，因为它必须在创建之前分配`boost::shared_array`，我看到迭代它的唯一方法是使用普通`for`循环，然后使用`operator[i]`on`boost::shared_array`来获取元素。

# eclipse - Tomcat 启动但 Eclipse 似乎无法检测到

> ID：15380590
> 
> 赞同：0
> 
> 时间：2013-03-13T08:49:23.037
> 
> 标签：eclipse, tomcat

我在 Eclipse Helios 中运行 Tomcat v5.0.30，安装了“Server->New...”。

Tomcat 正确启动，但 Eclipse 似乎无法检测到服务器已启动，因此“正在启动 Tomcat”状态栏一直在旋转，直到达到启动超时并关闭 Tomcat。

作为一种解决方法，我将 Tomcat 启动超时设置为一个非常大的值，但显然我想正常工作。

正如其他问题中所建议的那样，我使用 netstat -ano 来查找服务器端口是否正在被另一个进程使用，但该端口导致空闲。无论如何，我也尝试将 Tomcat 端口更改为其他值，但并没有解决问题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-20T09:12:25.723

在我的情况下遇到同样的问题，它有助于从

```
<Connector port="8080" protocol="org.apache.coyote.http11.Http11Nio2Protocol" ...> 
```

至

```
<Connector port="8080" protocol="HTTP/1.1" ...> 
```

# javascript - HREF的替代方法是什么，除了OnClientClick调用内联div？

> ID：15380591
> 
> 赞同：1
> 
> 时间：2013-03-13T08:49:35.393
> 
> 标签：javascript, asp.net, html, css, href

我在同一页面上创建了一个隐藏`<div>`并调用它`href="#"`并且它工作完美，但是当我在 ASP.net 中使用相同的代码时，由于一些 JavaScript 或者不确定它为什么不工作。第一次加载页面时它正在工作，但之后由于一些不良副作用它无法正常工作，这很奇怪......！！！

是否有任何其他/替代方式来调用同一页面上的隐藏 div 有或没有 # 而不是 href。我也尝试了两种方式：

```
OnClientClick="location.href='#inline_content2"
OnClientClick="#inline_content2;" 
```

但是，它可以工作，但它显示没有内容的 div :(

以下是仅在纯 HTML 中正常工作的原始代码：

```
href="#inline_content" 
```

那么如何在没有href的#inline_content的同一页面上调用我的div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:54:50.190

设置 href="javascript:void(0);"
并保持其他的东西像往常一样。

# knockout.js - 是否可以将 KO 视图模型中的值注入到模板中？

> ID：15380594
> 
> 赞同：1
> 
> 时间：2013-03-13T08:49:40.017
> 
> 标签：knockout.js, knockout-2.0

想了解是否可以在不使用 Knockout JS 的“数据绑定”的情况下将视图模型中的值注入到模板中。

例如，如果我有以下视图模型；

```
var myViewModel = {
    var self = this;
    self.firstName = ko.observable("ABC");
    self.lastName = ko.observable("XYZ");
}; 
```

我需要创建如下模板；

```
<script id="myInjectTemplate" type="text/html">
    <h3 id="header_${firstName}">${firstName} - ${lastName}</h3>
</script> 
```

我可以在哪里将视图模型中的值注入占位符，就像我们在 Apache Velocity 中所做的那样？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:56:42.657

您需要为此使用小胡子：github.com/janl/mustache.js

```
 var view = {
       title: "Joe",
       calc: function () {
           return 2 + 4;
       }
    };

var output = Mustache.render("{{title}} spends {{calc}}", view); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:18:19.303

你也可以使用数据绑定来设置 id，你知道的，所以你可以同时做：

```
<h3 data-bind="attr: { id: 'header_$' + firstName() }, text: firstName() + ' - ' + lastName()"></h3> 
```

虽然我会考虑使用计算的 observable 从名字和姓氏 observables 创建一个全名。

# python - 无论如何可以避免在mongodb中锁定

> ID：15380595
> 
> 赞同：0
> 
> 时间：2013-03-13T08:49:52.307
> 
> 标签：python, mongodb

我正在尝试将一些数据从一个集合迁移到 mongodb 中同一数据库中的另一个集合。我有大约 5 万条记录。插入 mongodb 时被锁定，它正在影响应用程序。有没有办法处理 mongodb 中的锁定系统？

谢谢，普拉茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:57:50.707

根据这篇文章：[再见全局锁 - MongoDB 2.0 与 2.2](http://blog.serverdensity.com/goodbye-global-lock-mongodb-2-0-vs-2-2/)[已知会影响](http://ethangunderson.com/blog/two-reasons-to-not-use-mongodb/)mongoDB的全局锁定在使用版本 >=2.2 时应该消失了。

如果您有一个旧实例，并且升级超出了范围，我会尝试将迁移分成较小的批次（一次最多 100 个文档，如果它们足够小），并等待少量时间（50 毫秒左右) 在每批运行之间。这是一个丑陋且缓慢的解决方法，但可能允许您继续，同时当时在线......

**编辑** 嗯，奇怪，您的版本应该不受全局写锁定情况的影响。我可能会尝试小批量的方法......

**EDIT2** 并且 Sammaye 是对的：这也可能是一个很好的旧 IO 瓶颈问题......尝试看看你的磁盘在这方面的表现如何，以确保。

# facebook - 发布到 facebook 新设计时未显示 fb.ui 提要图片

> ID：15380598
> 
> 赞同：1
> 
> 时间：2013-03-13T08:49:56.897
> 
> 标签：facebook

我认为这是一个常见问题，可能由多种原因引起，但我不确定情况是否如此。我在用户墙上发布的 js 代码非常简单直接，并且到目前为止一直工作没有问题（使用大约 6 个月）：

```
FB.ui(
      {
          method: 'feed',
          name: 'some text',
          link: 'https://apps.facebook.com/myapp',
          picture: 'http://mydomain.com/content/images/theimage.png?v=123',
          caption: 'my caption',
          actions: [
            { 'name': 'Play now' , 'link': 'https://apps.facebook.com/myapp' }],
          description: 'my description',
          ref: 'my ref'
      },
      function (response) {
      }
    ); 
```

我最近将我的 Facebook 帐户切换为新设计（2013 年），在我的提要上，这些发布的内容没有图像。从运行先前设计的另一个帐户检查，这些发布以正确的图像正确显示。

所以，它不是 Facebook 缓存，也可能不是我的代码。它是 Facebook 的错误吗？还有其他想法吗？

谢谢！

# php - 如何在 PHP 中将日期 YYYY-MM-DD 转换为纪元

> ID：15380599
> 
> 赞同：18
> 
> 时间：2013-03-13T08:49:57.627
> 
> 标签：php, date, time, epoch

根据标题：如何在 PHP 中将字符串日期（YYYY-MM-DD）转换为纪元（自 01-01-1970 以来的秒数）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-13T08:52:07.800

也许这回答了你的问题

[http://www.epochconverter.com/programming/functions-php.php](http://www.epochconverter.com/programming/functions-php.php)

以下是链接的内容：

有很多选择：

1.  使用'strtotime'：

strtotime 将大多数英语日期文本解析为纪元/Unix 时间。

```
echo strtotime("15 November 2012");
// ... or ...
echo strtotime("2012/11/15");
// ... or ...
echo strtotime("+10 days"); // 10 days from now 
```

检查转换是否成功很重要：

```
// PHP 5.1.0 or higher, earlier versions check: strtotime($string)) === -1
if ((strtotime("this is no date")) === false) {
   echo 'failed';
 } 
```

2\. 使用 DateTime 类：

PHP 5 DateTime 类更好用：

```
// object oriented
$date = new DateTime('01/15/2010'); // format: MM/DD/YYYY
echo $date->format('U'); 

// or procedural
$date = date_create('01/15/2010'); 
echo date_format($date, 'U'); 
```

日期格式“U”将日期转换为 UNIX 时间戳。

3.  使用“mktime”：

这个版本比较麻烦，但适用于任何 PHP 版本。

```
// PHP 5.1+ 
date_default_timezone_set('UTC');  // optional 
mktime ( $hour, $minute, $second, $month, $day, $year );

// before PHP 5.1
mktime ( $hour, $minute, $second, $month, $day, $year, $is_dst );
// $is_dst : 1 = daylight savings time (DST), 0 = no DST ,  -1 (default) = auto

// example: generate epoch for Jan 1, 2000 (all PHP versions)
echo mktime(0, 0, 0, 1, 1, 2000); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T08:52:57.687

试试这个 ：

```
$date  = '2013-03-13';

$dt   = new DateTime($date);
echo $dt->getTimestamp(); 
```

参考：[http ://www.php.net/manual/en/datetime.gettimestamp.php](http://www.php.net/manual/en/datetime.gettimestamp.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T08:52:30.373

使用`strtotime()`它为您提供从 01-01-1970 开始的 Unix 时间戳

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T08:53:19.980

使用[strtotime()](http://php.net/strtotime)函数：

```
strtotime('2013-03-13'); 
```

# libevent - 无法安装 libevent-devel

> ID：15380601
> 
> 赞同：0
> 
> 时间：2013-03-13T08:50:02.880
> 
> 标签：libevent

我正在尝试安装**libevent-devel**，但由于依赖关系而失败，如下所示。

我还尝试安装 libevent-devel 所需的依赖项，但它也失败了，因为它需要 libevent-devel，如下所示。

我该如何解决这个问题？希望得到您的帮助。

[root@box1 opt]# rpm -ivh libevent-devel-1.4.13-4.el6.x86_64.rpm

警告：libevent-devel-1.4.13-4.el6.x86_64.rpm：标头 V3 RSA/SHA1 签名，密钥 ID c105b9de：NOKEY 错误：依赖项失败：

```
libevent-doc = 1.4.13-4.el6 is needed by libevent-devel-1.4.13-4.el6.x86_64
libevent-headers = 1.4.13-4.el6 is needed by libevent-devel-1.4.13-4.el6.x86_64 
```

[root@box1 选择]#

[root@box1 opt]# rpm -ivh libevent-doc-1.4.13-4.el6.noarch.rpm

警告：libevent-doc-1.4.13-4.el6.noarch.rpm：标头 V4 DSA/SHA1 签名，密钥 ID 192a7d7d：NOKEY 错误：依赖项失败：

```
libevent-devel = 1.4.13-4.el6 is needed by libevent-doc-1.4.13-4.el6.noarch 
```

[root@box1 选择]#

[root@box1 opt]# rpm -ivh libevent-headers-1.4.13-4.el6.noarch.rpm

警告：libevent-headers-1.4.13-4.el6.noarch.rpm：标头 V3 RSA/SHA1 签名，密钥 ID c105b9de：NOKEY 错误：依赖项失败：

```
libevent-devel = 1.4.13-4.el6 is needed by libevent-headers-1.4.13-4.el6.noarch 
```

[root@box1 选择]#

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T09:30:40.083

[从http://libevent.org/](http://libevent.org/)下载 libevent 包并编译它。

```
wget "https://github.com/downloads/libevent/libevent/libevent-1.4.14b-stable.tar.gz"
tar -xzvf libevent-1.4.14b-stable.tar.gz
cd libevent-1.4.14b-stable
./configure
make
sudo make install 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-23T16:09:36.507

在同一命令行上给出`rpm` *所有*相互依赖的包，它会识别出依赖关系得到满足：

```
rpm -ivh libevent-devel-1.4.13-4.el6.x86_64.rpm libevent-doc-1.4.13-4.el6.noarch.rpm libevent-headers-1.4.13-4.el6.noarch.rpm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T12:25:11.550

我还发现了这种循环依赖。只需使用 --nodeps 选项解决它。

```
[root@box1 opt]# rpm -ivh libevent-devel-1.4.13-4.el6.x86_64.rpm --nodeps 
```

安装后，您现在可以毫无问题地安装 libevent-doc 和 libevent-headers。

# python - 如何使 PyQt webkit 快速进行现代浏览？

> ID：15380603
> 
> 赞同：3
> 
> 时间：2013-03-13T08:50:12.043
> 
> 标签：python, browser, pyqt, pyside, qtwebkit

我一直在玩 PyQt4，并意识到它没有达到我的期望。考虑代码

```
import sys
from PyQt4.QtCore import Qt
from PyQt4.QtGui import QPalette, QGraphicsScene, QGraphicsProxyWidget, QGraphicsView, QPainter
from PyQt4.QtOpenGL import QGLWidget
from PyQt4.QtCore import QObject, pyqtSlot, QUrl
from PyQt4.QtGui import QApplication
from PyQt4.QtWebKit import QWebView, QWebSettings
from batchq.pipelines.interpreters import PythonTerminal
from PyQt4 import QtCore, QtGui, QtWebKit
import PyQt4

class WithConsole(QtWebKit.QWebPage):
    def javaScriptConsoleMessage(self, msg, line, source):
        print '%s line %d: %s' % (source, line, msg)

if __name__ == '__main__':
    app = QApplication(sys.argv)

    webview = QWebView()
    webview.setAttribute(Qt.WA_X11NetWmWindowTypeDesktop)
    webview.setAttribute(Qt.WA_OpaquePaintEvent, True)
    settings=webview.settings()
    settings.setAttribute(QWebSettings.LocalContentCanAccessRemoteUrls, True)
    settings.setAttribute(QWebSettings.LocalContentCanAccessRemoteUrls, True)
    settings.setAttribute(QWebSettings.LocalContentCanAccessFileUrls, True)
    settings.setAttribute(QWebSettings.LocalStorageEnabled, True)
    settings.setAttribute(QWebSettings.AutoLoadImages, True)

    page = WithConsole()
    webview.setPage(page)
    frame = webview.page().mainFrame()
    palette = webview.palette()
    palette.setBrush(QPalette.Base, Qt.transparent)
    webview.page().setPalette(palette)

    scene = QGraphicsScene()
    proxy = QGraphicsProxyWidget()
    proxy.setWidget(webview)
    rect = proxy.boundingRect()
    proxy.setPos(rect.width(), rect.height())
    proxy.show()
    scene.addItem(proxy)

    scene.setSceneRect(scene.itemsBoundingRect())
    view = QGraphicsView()
    view.setScene(scene)
    view.setViewport(QGLWidget())

    view.setRenderHints(QPainter.Antialiasing | QPainter.SmoothPixmapTransform)
    view.setCacheMode(QGraphicsView.CacheBackground)
    view.setViewportUpdateMode(QGraphicsView.BoundingRectViewportUpdate)
    view.show()

    webview.setUrl(QUrl("http://bartaz.github.com/impress.js/#/bored"))
#    webview.setUrl(QUrl("http://gridster.net/"))
    view.show()
    app.exec_() 
```

这实现了一个最小的网络浏览器，它只显示一个启用了 GL 以进行转换等的页面。但是，在几个网页上对其进行测试后，人们立即注意到交互远远落后于其他浏览器，如 Chrome 或 Safari。特别是，在 gridster.net 上，与“网格”的交互并不像预期的那样工作，而对于 impress.js，转换速度非常慢（没有 GL，它们甚至更慢）。最后，这似乎是独立的。PySide 也很慢。Qt 是 4.8.1 版。

我的问题是，是否有可能使 QtWebkit 与 gridster.js 兼容，以及如何提高转换的性能？

# slick - Slick 1.0 Lifted - 投影子对象

> ID：15380605
> 
> 赞同：4
> 
> 时间：2013-03-13T08:50:13.757
> 
> 标签：slick

我正在尝试使用 slick 实现securesocial（Play2的身份验证插件）。

我遇到的问题是我想将所有内容存储在同一个表中，但是有几个实体是案例类，应该是用户的子实体。查看问题：[https ://github.com/leon/securesocial/blob/slick-demo/samples/scala/slick/app/models/User.scala#L63-L96](https://github.com/leon/securesocial/blob/slick-demo/samples/scala/slick/app/models/User.scala#L63-L96)

我的问题是我应该如何进行列的映射，以便它们正确地转换为它们各自的案例类，其中案例类嵌套在另一个案例类下？

将单个列转换为案例类时也会出现同样的问题[https://github.com/leon/securesocial/blob/slick-demo/samples/scala/slick/app/models/User.scala#L61](https://github.com/leon/securesocial/blob/slick-demo/samples/scala/slick/app/models/User.scala#L61)

我在哪里使用它，`MappedTypeMapper.base`但我不确定这是否是正确的方法。 [https://github.com/leon/securesocial/blob/slick-demo/samples/scala/slick/app/models/User.scala#L61](https://github.com/leon/securesocial/blob/slick-demo/samples/scala/slick/app/models/User.scala#L61)

任何建议，将不胜感激！

# mysql - SQL：寻找商店的唯一客户的问题

> ID：15380613
> 
> 赞同：0
> 
> 时间：2013-03-13T08:50:26.413
> 
> 标签：mysql, sql, group-by, subquery, having-clause

我是 SQL 新手，我想编写一个查询来查找任何特定商店的唯一客户。例如： SH1 店有 10 位顾客注册，其中 10 - 3 位顾客也注册到其他一些商店。我想要一个查询，它将返回唯一的 7 个客户到 SH1 商店。

`ShopId`和都`CustomerId`存储在同一个表中，所以我想需要一个子查询。

谢谢，马尤尔

样本数据：

**ShopId CustomerId**

*   Shop1 Cust001
*   Shop1 Cust002
*   Shop1 客户003
*   Shop2 Cust002
*   Shop3 Cust004
*   Shop4 Cust002

在上面的示例中，如果我对商店 ID Shop1 运行查询，我应该得到 Cust001、Cust003 作为回报，它们是 Shop1 独有的，而不是 Cust002，因为它与其他商店 ID 相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:59:55.980

我想你可以这样做

```
select distinct customerId from tablename where shopId = 'SH1' and customerId not in (select customerId from tablename where shopId<>'SH1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:12:26.777

如果您也想知道他们注册的商店

```
SELECT CustomerID, 
    ShopID
    FROM shop
    WHERE CustomerID IN (
        SELECT CustomerID
            FROM shop 
            GROUP BY CustomerID 
            HAVING COUNT(ShopID) = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:06:59.767

您需要独特的客户

```
SELECT CUSTID FROM SHOP GROUP BY CUSTID HAVING( COUNT(SHOPID) = 1) 
```

# paypal - 发布 discount_amount 时，Paypal Standard 未重定向到移动结帐

> ID：15380615
> 
> 赞同：1
> 
> 时间：2013-03-13T08:50:26.937
> 
> 标签：paypal

我正在测试以下内容`iPhone`。如果我没有设置值`discount_amount`并单击`Buy`按钮，我会转到`Paypal mobile checkout`但当我添加值时，`discount_amount`我会进入标准网络结帐。有谁知道为什么以及如何解决这个问题？

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>
<title></title>
</head>
<body>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="form1" class="panel">
  <input type="hidden" name="cmd" value="_xclick">
  <input type="hidden" name="business" value="paypal@mysite.com">
  <input type="hidden" name="currency_code" value="GBP">
  <input type="hidden" name="notify_url" value="http://www.mysite.com/paypal_ipn">
  <input type="hidden" name="return" value="http://www.mysite.com/success">
  <input type="hidden" name="cancel_return" value="http://www.mysite.com/">
  <input type="hidden" name="custom" value="1708|288|18|app">
  <input type="hidden" name="item_name" value="Sticker">
  <input type="hidden" name="item_number" value="STICKER">
  <input type="hidden" name="option_index" value="0">
  <input type="hidden" name="shipping" id="mc_shipping" value="0">
  <input type="hidden" name="discount_amount" id="discount_amount" value="2">
  <fieldset>
    <label>Sticker Size:</label>
      <input id='on0' type='hidden' name='on0' value='Size'>
      <select name='os0' id='print_item'>
        <option value='42cm'>42cm - £27.99</option>
      </select>
      <input type="hidden" id="option_tube0" value="small" />
      <input type="hidden" id="option_select0" name="option_select0" value="42cm" />
      <input type="hidden" item-price="27.99" id="option_amount0" name="option_amount0" value="27.99" />
      <br />
      <label>Quantity: </label>
      <select name="quantity" id="quantity">
        <option value="1">1</option>
      </select>
  </fieldset>
  <input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="" id="buy_now">
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:14:30.483

Mobile 流程并不支持所有可以使用的变量。当您传递不受支持的变量时，您将通过常规 Web 流获得指导。以下是移动流程不支持的一些自定义项。

1.  即时更新 API
2.  买方提供的价格、描述、数量
3.  折扣
4.  付款方式：授权、订单
5.  库存管理

# uiview - UIScrollView 覆盖 UIView 但启用其触摸事件？

> ID：15380617
> 
> 赞同：0
> 
> 时间：2013-03-13T08:50:50.810
> 
> 标签：uiview, uiscrollview, scroll, touch, overlay

是否可以同时处理 UIScrollView 的滚动事件和 UIView 背后的触摸事件？我发现 UIView 仅在 UIScrollView 禁用其自己的用户交互时处理其触摸事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:19:35.440

首先在您的视图中添加滚动视图和 in.h 文件写入委托`<UIGestureRecognizerDelegate,UIScrollViewDelegate>`

在你看来DidLoad 写

```
 UITapGestureRecognizer *singleFingerTap =
    [[UITapGestureRecognizer alloc] initWithTarget:self
                                            action:@selector(handleSingleTap:)];
    [self.view addGestureRecognizer:singleFingerTap];
    [singleFingerTap release];

    scrl.scrollEnabled = YES; // scrl is my UIScrollView
    scrl.delegate = self;
    scrl.contentSize=CGSizeMake(320, 680);
    [self.view addSubview:scrl]; 
```

并在 handleSingleTap 方法中编写您的代码。它也会滚动，如果您点击视图，则会调用 handleSingleTap 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T15:33:43.140

在使 UIScrollView 覆盖 SpriteKit 视图时，我遇到了类似的问题，以便用户可以滚动大型游戏内菜单。滚动视图“窃取”所有点击，我无法按下滚动视图后面的按钮，例如我的“后退按钮”。我在滚动视图中也有按钮，我在我的原始精灵套件场景中有处理程序 - 并且不愿意移动到我的可滚动视图中。

所以，我通过简单地将我所有的触摸事件发送到超类和超视图来解决这个问题。我不确定是否还有什么大的缺点，但我现在可以触摸和滚动。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.superview touchesBegan:touches withEvent:event];
    [super touchesBegan:touches withEvent:event];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.superview touchesMoved:touches withEvent:event];
    [super touchesMoved:touches withEvent:event];
}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.superview touchesCancelled:touches withEvent:event];
    [super touchesCancelled:touches withEvent:event];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self.superview touchesEnded:touches withEvent:event];
    [super touchesEnded:touches withEvent:event];
} 
```

# asp.net-mvc-3 - @Html.EditorFor(model => model.ID) 无法显示正确的值

> ID：15380622
> 
> 赞同：0
> 
> 时间：2013-03-13T08:51:09.617
> 
> 标签：asp.net-mvc-3

我有一个模型包含文件 XSID（Guid）和 ID（nvarchar），现在我想用 @Html.EditorFor(model => model.ID) 编辑 ID 值但它无法获得正确的值，它也得到XSID 的值。但是 @Html.DisplayFor(model => model.ID) 可以获得正确的值。我不知道为什么？

```
@using Student.Resource;
@using M = Student.Model;
@model M.Stu_XS

    <ul class="cur">
          <li class="line">
               <label>
                     @Stu_XS.ID：
                </label>
               <span>
                @Html.HiddenFor(model => model.XSID)
                @Html.DisplayFor(model => model.ID)
                @Html.EditorFor(model => model.ID)
                @Html.ValidationMessageFor(model => model.ID)
               </span>
        </li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:05:28.907

如果您的路线中有 ID，则将使用该值，而不是模型中的值。

例如，假设您有以下模型：

```
public class Stu_XS
{
    public int ID { get; set; }
    public Guid XSID { get; set; }
} 
```

以及以下控制器操作：

```
public ActionResult SomeAction(int id)
{
    var model = new Stu_XS();
    model.ID = 123;
    return View(model);
} 
```

你会这样要求：

```
/somecontroller/someaction/456 
```

将`Html.EditorFor`显示`456`来自路线而不是`123`来自模型的。这是设计使然。如果要更改此行为，则必须`ID`从 中删除 ，`ModelState`以便使用模型中的值：

```
public ActionResult SomeAction(int id)
{
    var model = new Stu_XS();
    model.ID = 123;
    ModelState.Remove("id");
    return View(model);
} 
```

# html - html 在每个表格行旁边放置一个链接

> ID：15380623
> 
> 赞同：0
> 
> 时间：2013-03-13T08:51:14.633
> 
> 标签：html, css

我有一个表，每行包含三列，我希望每行在它旁边添加一个链接。

```
<table>
    <th>
        Name:
    </th>
    <th>
        Price:
    </th>
    <th>
        Description
    </th>

    <?php while ($row = $foods->fetch()) { ?>
        <tr>
            <td>
                <?php echo $row['Name']; ?>
            </td>
            <td>
                <?php echo $row['foodPrice']; ?>
            </td>
            <td>
                <?php echo $row['foodDescription']; ?>
            </td>
        <a class="editLink">roma</a>
        </tr>
    <?php } ?>
</table> 
```

我试图`a`在最后一个链接之后添加一个链接，`td`但链接变成了表格的顶部，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:52:44.897

您需要添加一个表格单元格以包含该链接。标签也`th`应该用`tr`标签包围。

```
<table>
    <tr>
        <th>
            Name:
        </th>
        <th>
            Price:
        </th>
        <th>
            Description
        </th>
        <th>
        </th>
    </tr>

    <?php while ($row = $foods->fetch()) { ?>
        <tr>
            <td>
                <?php echo $row['Name']; ?>
            </td>
            <td>
                <?php echo $row['foodPrice']; ?>
            </td>
            <td>
                <?php echo $row['foodDescription']; ?>
            </td>
            <td class="link"><!-- Your missing this -->
                <a class="editLink">roma</a>
            </td><!-- and this -->
        </tr>
    <?php } ?>
</table> 
```

要设置与其他链接单元格不同的样式，您需要使用 CSS。将 CSS 类添加`link`到`td`包含您的`a`标签。然后定义样式如下：

**CSS**

```
table{
    text-align: center;
}

td{
    width: 200px;
}

td.link{
    width: 50px;
} 
```

**工作示例：http:** [//jsfiddle.net/y9C3G/](http://jsfiddle.net/y9C3G/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:57:38.847

`<a>`直接在类似的内部放置标签是无效的`<tr>`。通过将链接放在其自己的单元格中，将另一列添加到表中。您可能还想`<th>`在第一行添加另一个，或者`colspan="2"`向描述添加一个属性。

此外，需要一个表格来包含一个`<tbody>`元素，我建议将您`<th>`的 s 放在 a 中`<thead>`：

```
<table>
  <thead>
    ...
  </thead>
  <tbody>
    ...
  </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:08:56.757

```
<tr>
    <td>Your Content</td>
    <td>Your Content</td>
    <td>Your Content</td>
    <td class="myLinkClass"><a href=""></a></td>
</tr>

<style>
    .myLinkClass {
        width: 100px; /* This will give width for only the td with this class */ 
    }
</style> 
```

# python - 如何根据用户输入制作列表列表？

> ID：15380625
> 
> 赞同：3
> 
> 时间：2013-03-13T08:51:18.057
> 
> 标签：python, python-3.x

这就是我所做的-

```
grid_len = input("Enter Grid Length: ") #Assuming grid_length to be 3
s = []
while True:
    s.append(input())
    if len(s) == int(grid_len)**2: #grid_length^2 will be 9
        print(s)
        break 
```

例如，当 Input 在第一个循环中为 1，在第二个循环中为 2，在第三个循环中为 3，依此类推直到 9；它创建一个这样的列表：

```
['1','2','3','4','5','6','7','8','9'] 
```

但我想要这样的东西：

```
[[1,2,3],[4,5,6],[7,8,9]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T09:07:54.867

基于列表理解的版本。

```
s = [[input("Enter number: ") for _ in range(grid_len)] for _ in range(grid_len)]
print s 
```

注意：两个正斜杠“//”不是有效的python注释标识符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:09:22.247

我从这个问题中发现了一些东西：[如何将列表分成大小均匀的块？](https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python)

```
>>> mylist = [1,2,3,4,5,6,7,8,9]
>>> def chunks(l, n):
...    return [l[i:i+n] for i in range(0, len(l), n)]
>>> chunks(mylist,3)
[[1, 2, 3], [4, 5, 6], [7, 8, 9]] 
```

集成到您的代码中：

```
def chunks(l, n):
    return [l[i:i+n] for i in range(0, len(l), n)]
grid_len = input("Enter Grid Length: ")
s = []
while True:
    s.append(int(input())) # Notice I put int() around input()
    if len(s) == int(grid_len)**2:
        s = chunks(s,grid_len)
        print(s)
        break 
```

编辑：将块中的第二个参数更改为 match `grid_len`。这现在不仅适用于 3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:57:05.700

这是我的代码：

```
grid_len = input("Enter Grid Length: ")
s = []
for i in range(grid_len):         #looping to append rows
    s.append([])                  #append a new row
    for j in range(grid_len):     #looping to append cells
        s[-1].append(input())     #append a new cell to the last row, or you can also append to `i`th row 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-01T15:07:50.767

尝试这个：

```
arr = [list(map(int, input().split())) for i in range(int(input()))] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-15T12:07:09.913

我有你的问题，非常简单的解决方案是

```
grid_length = int(input())
s = []
for i in range(grid_length):
     b = list(map(int, input().split()))
     s.append(b)
print(s) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T10:04:37.500

尝试这个：

```
x = [[int(input()) for c in range(grid_len)] for r in range(grid_len)] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T08:59:25.760

`grid_length`您应该为每个元素创建一个新的子列表：

```
grid_len = int(input("Enter Grid Length: "))
s = []
for _ in range(grid_length):
    sub_list = []
    for _ in range(grid_length):
        sub_list.append(input())
    s.append(sub_list)
print(s) 
```

请注意，通常，您应该使用`for`每次必须对对象进行顺序迭代或者您知道重复循环多少次的时间。`while`通常更好地处理难以考虑迭代次数或迭代迭代的“奇怪”条件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T09:08:50.237

使用嵌套列表推导：

```
>>> grid_len = input("Enter Grid Length: ")
Enter Grid Length: 4
>>> incrementer = iter(xrange(1, grid_len ** 2 + 1))
>>> s = [[next(incrementer) for x in xrange(grid_len)] for y in xrange(grid_len)]
>>> print s
[[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-16T15:55:54.247

尝试这个：

```
grid_len = int(input()) #just one input
grid = [[input(),input(),input()] for _ in range(grid_len)] #grid_len * 3 inputs
print(grid) 
```

# c++ - 在我的图表访问者完成后访问属性

> ID：15380628
> 
> 赞同：2
> 
> 时间：2013-03-13T08:51:33.180
> 
> 标签：c++, boost, destructor, boost-graph

我在使用 boost 图形库中的广度优先搜索时遇到问题。在我的图表访问完成后，我想获取我的访问者类的属性。

```
// init my visitor
BfsVisitor bv;
// auto like in C++-0x
BOOST_AUTO (visit, boost::visitor(bv));
// launch search
boost::breadth_first_search (graph, vertex, visit);
// get result ("typedef pair<string, int*> result")
result res = bv.getResult();
// print res: SegFault, `res.second' is NULL
std::cout << *(res.second) << std::endl; 
```

我的 BfsVisitor 定义如下：

```
class BfsVisitor : public boost::default_bfs_visitor
{
public:
  BfsVisitor()
  {
    std::cout << boost::this_thread::get_id()
          <<" ~~ CONSTRUCTOR" << std::endl;
  }
  BfsVisitor(const BfsVisitor& b)
    : boost::bfs_visitor<>(),
      _res (b._res),
      _arg (b._arg)
  {
    std::cout << boost::this_thread::get_id()
              <<" ~~ COPY" << std::endl;
  }
  ~BfsVisitor()
  {
    std::cout << boost::this_thread::get_id()
              <<" ~~ DESTRUCTOR" << std::endl;
  }

  /// Visitor methods
  void discover_vertex(const vertex_t& s,
                       const Graph& g)
  {
    std::cout << boost::this_thread::get_id()
              << " -> Discover vertex: " << g[s]._id << std::endl;
    Executive exec* = g[s]._executive;
    _arg.insert(_res);
    exec->setArguments(_arg);
    // other process
  }
  void examine_vertex(const vertex_t& s,
                      const Graph& g)
  {
    std::cout << boost::this_thread::get_id()
              << " -> Examine vertex: " << g[s]._id << std::endl;
    Executive exec* = g[s]._executive;
    exec->launch(&_res);
    // other process
  }

  /// Getter
  result getResult() const
  {
    std::cout << boost::this_thread::get_id()
              << " ~~ Get Result" << std::endl;
    return _res;
  }

private:
  result _res;
  argument _arg; // typedef std::map
} 
```

我想我的问题来自在此过程中访问者的组合复制/破坏：这里是一个仅使用一个线程的小图（ [1] -> [2] -> [3] ）上的输出示例

```
b7495b40 ~~ COPY
b7495b40 ~~ COPY
b7495b40 ~~ DESTRUCTOR
b7495b40 ~~ COPY
b7495b40 ~~ COPY
b7495b40 ~~ COPY
b7495b40 ~~ COPY
b7495b40 -> Discover vertex: 1
b7495b40 -> Examine vertex: 1
b7495b40 -> Discover vertex: 2
b7495b40 -> Examine vertex: 2
b7495b40 -> Discover vertex: 3
b7495b40 -> Examine vertex: 3
b7495b40 ~~ DESTRUCTOR
b7495b40 ~~ DESTRUCTOR
b7495b40 ~~ DESTRUCTOR
b7495b40 ~~ DESTRUCTOR
b7495b40 ~~ Get Result
Segmentation fault (core dumped) 
```

我只想在检查_vertex 方法中执行的所有过程结束时访问我的属性。我检查了 boost graph visitor 文档，但没有找到任何关于我的问题的解决方案。希望你有想法可以提出建议。

# ios - 在 iOS 中，Core Location 和 Core Motion 框架中的磁场值有什么区别？

> ID：15380632
> 
> 赞同：65
> 
> 时间：2013-03-13T08:51:41.260
> 
> 标签：ios, core-location, core-motion, magnetometer

我有两种使用 iOS 设备的磁力计获取磁场（强度、x、y 和 z）的方法。

1）核心位置
使用`CLLocationManagerDelegate`方法的CLHeading `locationManager:didUpdateHeading:`。这类似于 Apple 的 Teslameter 示例应用程序。

2) 核心运动从's
使用。 `CMMagneticField``CMMotionManager``magnetometerData.magneticField`

问题：
a) 两者有什么区别？我从两者中得到不同的价值观。我期待他们会返回相同的值。
当我从静止位置（面朝上放在桌子上）启动应用程序，然后将设备举到空中时，差异最为显着。
b) 如果有差异，我应该什么时候使用 Core Location 航向的磁场，什么时候应该使用 Core Motion 的磁场？

注意：我也不确定核心位置和核心运动的“磁场”是否指不同的磁场概念。
注意：对于这两种方法，我将强度计算为 (x^2 + y^2 + z^2) 的平方根。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-03-18T05:59:43.470

为了解决这个问题，我花了太多时间研究 Apple 文档。

获取磁力计数据的三种方式

1/ [Core Motion框架](https://developer.apple.com/documentation/coremotion)
CMMotionManagers的[`CMMagnetometer`](https://developer.apple.com/documentation/coremotion/cmmagnetometerdata)类

2/核心运动框架
[CMDeviceMotion](https://developer.apple.com/documentation/coremotion/cmdevicemotion) `CMCalibratedMagneticField`属性

3/[核心位置框架](https://developer.apple.com/documentation/corelocation/cllocation)
CLLocationManager的`CLHeading`

1/ 提供来自磁力计的“原始”数据。
2/ 和 3/ 返回“派生”数据。两种情况下的数字相似（尽管不完全相同）。

**Core Motion 的 CMMagnetometer 和 CMCalibratedMagneticField 的区别**

1/ 和 2/ - 都来自 Core Motion 框架 - 不同之处如下：

CMDeviceMotion 类参考

```
@property(readonly, nonatomic) CMCalibratedMagneticField magneticField 
```

> 讨论
> 此属性返回的 CMCalibratedMagneticField 为您提供了设备附近的总磁场，没有设备偏差。与 CMMagnetometer 类的磁场属性不同，这些值反映了地球磁场加上周围磁场，减去设备偏置。

CMMagnetometer 给我们原始数据，CMCalibratedMagneticField 是调整后的数据。

**Core Motion 的 CMCalibratedMagneticField 和 Core Location 的 CLHeading 的区别**

文档并不清楚 2/ 和 3/ 之间的区别，但它们确实生成了不同的数字，所以让我们进行一些挖掘……。

**核心位置框架**
**CLHeading**

来自[位置感知编程指南](https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/LocationAwarenessPG/GettingHeadings/GettingHeadings.html#//apple_ref/doc/uid/TP40009497-CH5-SW1)

> 获取与标题相关的事件
> 
> 在包含磁力计的设备上运行的应用程序可以使用航向事件。磁力计测量从地球发出的附近磁场，并使用它们来确定设备的精确方向。尽管磁力计可能会受到局部磁场的影响，例如来自音频扬声器、电机和许多其他类型电子设备中的固定磁铁的磁场，但 Core Location 足够智能，可以过滤掉随设备移动的磁场。

以下是相关`CLHeading`的“原始”属性

```
@property(readonly, nonatomic) CLHeadingComponentValue x
@property(readonly, nonatomic) CLHeadingComponentValue y
@property(readonly, nonatomic) CLHeadingComponentValue z 
```

> [x|y|z] 轴的地磁数据（以微特斯拉计）。（只读）
> 此值表示 [x|y|z] 轴与设备正在跟踪的磁力线的偏差。（*旧版本的文档添加*：）此属性报告的值被标准化为 -128 到 +128 的范围。

我不清楚如何将微特斯拉测量值“标准化”（压缩？剪裁？）到 +/-128 的范围内，并且仍然代表它声称要测量的单位。也许这就是从文档中删除该句子的原因。iPad mini 上的单位似乎确实符合这种范围，但 iPhone4S 提供更高范围的*CMMagnetometer*读数，例如 200-500。

API 显然希望您使用派生属性：

```
@property(readonly, nonatomic) CLLocationDirection magneticHeading
@property(readonly, nonatomic) CLLocationDirection trueHeading 
```

它以度为单位提供稳定的 N/SE/W 罗盘读数（0 = 北，180 = 南等）。对于真航向，需要其他核心定位服务（地理定位）来获得磁与真北的偏差。

这是`CLHeading`头文件的一个片段

```
/*
 *  CLHeading
 *  
 *  Discussion:
 *    Represents a vector pointing to magnetic North constructed from 
 *    axis component values x, y, and z. An accuracy of the heading 
 *    calculation is also provided along with timestamp information.
 *  
 *  x|y|z
 *  Discussion:
 *    Returns a raw value for the geomagnetism measured in the [x|y|z]-axis. 
```

**核心运动框架**
**CMDeviceMotion** **CMCalibratedMagneticField**

```
/*
 *  magneticField
 *  
 *  Discussion:
 *          Returns the magnetic field vector with respect to the device for devices with a magnetometer.
 *          Note that this is the total magnetic field in the device's vicinity without device
 *          bias (Earth's magnetic field plus surrounding fields, without device bias),
 *          unlike CMMagnetometerData magneticField.
 */
@property(readonly, nonatomic) CMCalibratedMagneticField magneticField NS_AVAILABLE(NA,5_0); 
```

**CM磁力计**

```
 *  magneticField
 *  
 *  Discussion:
 *    Returns the magnetic field measured by the magnetometer. Note
 *        that this is the total magnetic field observed by the device which
 *        is equal to the Earth's geomagnetic field plus bias introduced
 *        from the device itself and its surroundings.
 */
@property(readonly, nonatomic) CMMagneticField magneticField; 
```

*CMMagneticField*
这是保存向量的结构。
的`CMDeviceMotion`校准磁场和`CMMagnetometer`未校准的版本相同：

```
/*  CMMagneticField - used in 
 *  CMDeviceMotion.magneticField.field
 *  CMMagnetometerData.magneticField
 *  
 *  Discussion:
 *    A structure containing 3-axis magnetometer data.
 *
 *  Fields:
 *    x:
 *      X-axis magnetic field in microteslas.
 *    y:
 *      Y-axis magnetic field in microteslas.
 *    z:
 *      Z-axis magnetic field in microteslas. 
```

* * *

这里暗示了 2/ 和 3/ 之间的区别：

核心位置*CLHeading*

> 表示由轴分量值 x、y 和 z 构成的指向磁北的向量
> 
> 核心位置足够智能，可以*过滤掉随设备移动的字段*

Core Motion *CM校准磁场*

> [表示] 地球磁场*加上周围磁场*，没有设备偏差

所以 - 根据文档 - 我们有：

1/ *CMMagnetometer*
来自磁力计的原始读数

2/ *CMDeviceMotion (CMCalibratedMagneticField*) 磁场*
磁力计读数针对设备偏差进行了校正（板载磁场）

3/ *CLHeading [x|y|z]*
磁力计读数针对设备偏差进行了校正，并经过过滤以消除局部外部磁场（通过设备移动检测到 - 如果磁场随设备移动，则忽略它；否则测量它）

**测试理论**

![在此处输入图像描述](../Images/0f97e4e1e582d3ba17bafd9711105327.png)

我[在 gitHub 上放了一个 Magnet-O-Meter 演示应用程序，](https://github.com/foundry/MagnetoMeter)它显示了其中一些差异。当应用程序运行并观察各种 API 的反应时，在您的设备周围挥动磁铁非常有启发性：

*CMMagnetometer*对任何东西都没有太大反应，除非你拉近稀土磁铁。机载磁场似乎比局部外部磁场或地球磁场重要得多。在我的 iPhone 4S 上，它始终指向设备的左下角；在 iPad mini 上，它通常指向右上角。

*CLHeading.[x|y|z]* 对本地外部场最脆弱（响应），无论是相对于设备移动还是静态。

（CMDevice）*CMCalibratedMagneticField*在面对变化的外部场时是最稳定的，但在其他方面它的核心位置对应物*CLHeading.[x|y|z]*非常接近。

*CLHeading.magneticHeading* - Apple 推荐的磁罗盘读数 - 比任何这些都稳定。它使用来自其他传感器的数据来稳定磁力计数据。但是你没有得到 x,y,z 的原始分解

```
 influenced by
             onboard fields    local external fields   earth's field
yellow               X                   X                 X
green                _                   X                 X
blue                 _                   _                 X
red                  _                   _                 X 
```

黄色*CMMagnetometer*
绿色CLHeading *.[x|y|z]*
蓝色*CMCalibratedMagneticField*
红色*CLHeading.magneticHeading*

这似乎与文档相矛盾，这表明*CLHeading.[x|y|z]*应该比*CMCalibratedMagneticField*受本地外部场的影响更小。

你应该采取什么方法？根据我有限的测试，我建议……<br> *如果您想要一个罗盘读数*
CLHeading 的`magneticHeading`，`trueHeading`它将为您提供最准确和最稳定的罗盘读数。
*如果您需要避免核心位置，*
CMDeviceMotion`CMCalibratedMagneticField`似乎是下一个最理想的位置，尽管它的稳定性和准确性远不如`magneticHeading`.
*如果您对局部磁场感兴趣，*
CLHeading 的“原始”xy 和 z 属性似乎对局部磁场更敏感。
*如果您想要包括板载磁场在内的所有数据*
来自 CMMagnetometer 的原始磁力计数据。除非您准备进行大量过滤，否则使用它实际上没有多大意义，因为它受到设备本身产生的磁场的巨大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:39:56.147

此答案基于我对以下文档链接的解释

[http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLHeading_Class/Reference/Reference.html#//apple_ref/doc/c_ref/CLHeading](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLHeading_Class/Reference/Reference.html#//apple_ref/doc/c_ref/CLHeading)

[http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMagnetometerData_Class/Reference/Reference.html#//apple_ref/doc/c_ref/CMMagnetometerData](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMagnetometerData_Class/Reference/Reference.html#//apple_ref/doc/c_ref/CMMagnetometerData)

a) CLHeading 是“与设备跟踪的磁场线的**偏差”，而磁力计Data.magneticField“是设备观察到的****总磁场**，等于地球的地磁场加上设备本身及其周围环境引入的偏置” .

因此 CLHeading 为您提供过滤值，**参考框架是**地球现有的磁场。而磁力计数据为您提供未经过滤的值，**参考框架**是设备。

b）如果您在想知道磁北或真北的位置做任何事情，我建议您使用 CLHeading。如果您想创建一个响应设备附近磁场的应用程序，或者您想要执行一些特定的传感器融合，可以尝试创建一个 AHRS，然后使用 CMMagneticField。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T13:55:59.637

使用 CLHeading.[x|y|z] 值计算局部磁场强度时要记住的重要一点是 CLLocationManagerDelegate 方法

*   (BOOL)locationManagerShouldDisplayHeadingCalibration:(CLLocationManager *)manager

应设置为返回 YES。我发现如果关闭此校准警告，则永远不会校准磁力计读数，因此当设备的方向改变时，计算出的场强非常不稳定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:15:20.817

我认为磁力计Data.magneticField 它告诉您加速度，而不是位置（因此为什么您会得到从静止到移动的大值），而位置管理器则提供有关设备指向的方向的数据。

# visual-studio - Rockscroll 之类的记事本 ++ 插件？

> ID：15380636
> 
> 赞同：9
> 
> 时间：2013-03-13T08:51:49.653
> 
> 标签：visual-studio, notepad++

是否有类似 Rockscoll for VisualStudio for notepad++ 的插件？至少有什么接近它的吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T09:00:50.363

它是内置的：

`View -> Document Map`

![截屏](../Images/f0c099a54848968305ff8bb25eb1c8e5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-23T21:15:59.863

您可以使用`SmartHighlighter`. 这个答案来自[https://github.com/notepad-plus-plus/notepad-plus-plus/issues/3116](https://github.com/notepad-plus-plus/notepad-plus-plus/issues/3116)

**脚步**

1.  [从https://github.com/sieukrem/jn-npp-plugin/releases](https://github.com/sieukrem/jn-npp-plugin/releases)下载最新版本的插件

    *   如果notepad++文件夹在`C:\Program Files (x86)\Notepad++`下载`_x86.zip`后缀的文件

    *   如果notepad++文件夹在`C:\Program Files\Notepad++`下载`_x64.zip`后缀的文件

        > 从这里开始，如果您的安装`C:\Program Files (x86)\Notepad++`只是更换`C:\Program Files\Notepad++`. 两种情况下的程序相同。

2.  `C:\Program Files\Notepad++\plugins`使用名称创建一个新文件夹`jN`
3.  将下载的 zip 文件的内容解压到`C:\Program Files\Notepad++\plugins\jN`
4.  可选地，jN 插件还包括其他组件。因此，要禁用除 Smart Highlighter 之外的 jN 插件的所有组件，请转到`C:\Program Files\Notepad++\plugins\jN\includes`并仅保留以下文件：

    ```
    Dialog.js  
    MenuCmds.js  
    SmartHighlighter.js 
    ```

    并将其余的 .js 文件移动到`disabled`文件夹中。
    `C:\Program Files\Notepad++\plugins\jN\includes\disabled`

5.  现在关闭并重新打开您的 Notepad++。
6.  现在尝试选择一个重复的单词并检查滚动条旁边的栏。就是这样。

# php - php isset 和 is_null：php 条件下的 notset 值和空值问题

> ID：15380645
> 
> 赞同：1
> 
> 时间：2013-03-13T08:52:22.737
> 
> 标签：php, null, isset

这是为 mysql 查询准备一个字符串。问题是关于NULL。我只希望“d”列为 NULL（如果在数据数组中设置为 null）。问题是'isset'如果为空则为假，如果未设置'is_null'也为真..

*那么我该如何解决呢？*

我在php中有以下内容：

```
<?
$data = array(
    array('id' => 1, 'c' => '', 'd' => NULL, 'e' => '', 'f' => '', 'i' => 'ciao', 'j' => '', 'k' => ''),
    array('id' => 2, 'b' => '', 'c' => '', 'd' => NULL, 'e' => '', 'f' => 'hello', 'g' => '', 'h' => '', 'i' => ''),
);

$col = array('id', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k');
$insert = $update = array();

foreach (array_values($data) as $key => $val){
    $val_stack = array();
    $insert[$key] = "(";

    foreach ($col as $c){
        if (isset($val[$c]) && is_null($val[$c])) $val_stack[] = 'NULL';
        else if (isset($val[$c])) $val_stack[] = "'".$val[$c]."'";
        else $val_stack[] = "''";
    }

    $insert[$key] .= implode(', ', $val_stack).")";
}

foreach (array_diff($col, array('id')) as $v){
    $update[] = $v == 'd' ? "$v=COALESCE(VALUES($v), $v)" : "$v=VALUES($v)";
}

echo "INSERT INTO table (".implode(', ', $col).") VALUES ".implode(', ', $insert)." ON DUPLICATE KEY UPDATE ".implode(', ', $update);
?> 
```

这个输出：

> INSERT INTO table (id, b, c, d, e, f, g, h, i, j, k) VALUES ('1', '', '', '', '', '', '', '', 'ciao', '', ''), ('2', '', '', '', '', '你好', '', '', '', '', '')重复键更新 b=VALUES(b), c=VALUES(c), d=COALESCE(VALUES(d), d), e=VALUES(e), f=VALUES(f), g=VALUES(g) , h=值(h), i=值(i), j=值(j), k=值(k)

如果我在内部“foreach”（`if (/* isset($val[$c]) && */is_null($val[$c]))`）中评论“isset”，它会输出：

> 插入表（id，b，c，d，e，f，g，h，i，j，k）值（'1'， **NULL**，''，**NULL**，''，''，**NULL，NULL**，' ciao', '', ''), ('2', '', '', **NULL** , '', 'hello', '', '', '', **NULL, NULL** ) ON DUPLICATE KEY UPDATE b=VALUES (b), c=值(c), d=合并(值(d), d), e=值(e), f=值(f), g=值(g), h=值(h) , i=值(i), j=值(j), k=值(k)

我想要的输出：

> INSERT INTO table (id, b, c, d, e, f, g, h, i, j, k) VALUES ('1', '', '', **NULL** , '', '', '', ' ', 'ciao', '', ''), ('2', '', '', **NULL** , '', 'hello', '', '', '', '', '') 重复关键更新 b=VALUES(b), c=VALUES(c), d=COALESCE(VALUES(d), d), e=VALUES(e), f=VALUES(f), g=VALUES(g), h =VALUES(h), i=VALUES(i), j=VALUES(j), k=VALUES(k)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:57:37.977

您可以使用**array_key_exists($c,$val)**代替**isset($val[$c])**。它的工作方式非常一致。我用这种方式解决了同样的问题。

# sql - 更高效的选择

> ID：15380653
> 
> 赞同：0
> 
> 时间：2013-03-13T08:52:34.553
> 
> 标签：sql, sql-server, sql-server-2008

在 SQL Server 2008 中，我有一个表格，其中包含来自我们网站上的下载活动的数据。我制作了一个工具，可以手动将 Web 下载表中的每家公司与我们客户数据库中的帐户进行匹配。并非所有下载者实际上都属于客户公司。这些非客户与默认帐户相匹配。

下载表中的公司名称可能有多种拼写方式，因此许多不同的名称与同一个帐户匹配。

公司可能存在于不同的国家。每家公司在客户数据库中为每个国家/地区都有自己的帐户，但只有一个默认帐户（不是每个国家/地区一个）。更复杂的是，下载者不需要指定国家（对此无所谓）。在这些情况下，将匹配最可能的帐户。在这种情况下，国家/地区字段将包含一个空格。到现在为止还挺好。

当我想从 webDownloadTable 列出那些与现有帐户（或默认帐户）不匹配的公司时，问题就来了，即：在 accountMatchingTable 中不存在。

webDownloadTable 中最重要的列是：

```
webDownloadTable(
ID int not null
webCompanyName varchar(200), 
webCountryName varchar(200), 
item integer(8),
......,
...
); 
```

主键是`ID`.

匹配表如下所示：

```
accountMatchingTable(
AccountID int(8),
matchedCompanyName varchar(200),
matchedCountryName varchar(200),
......,
...
); 
```

主键是`(AccountID, matchedCompanyName, matchedCountryName)`.

这些表似乎以一种很好的方式被索引。

我做了一个实际有效的 SQL 选择，但是随着行数的增加，它会变得非常慢。它选择公司名称 + 国家不匹配的前 15 行：

```
SELECT  DISTINCT TOP 15 webCompanyName, webCountryName
FROM    webDownloadTable
WHERE   (webCompanyName + webCountryName NOT IN
        (SELECT matchedCompanyName + matchedCountryName FROM accountMatchingTable)  /*The combination of name and country from the matching table*/
)
    AND
    (webCompanyName + ' ' NOT IN
        (SELECT matchedCompanyName + matchedCountryName FROM accountMatchingTable)  /*The combination of name and an empty space from the matching table (see §. below)*/
    )
ORDER BY webCompanyName, webCountryName; 
```

§。需要这部分来选择开放国家/地区字段的情况（请参阅上面的解释）。

有没有人可以帮助我创建更有效的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:05:21.217

如何删除两个子查询，如下所示：

```
SELECT  DISTINCT TOP 15 a.webCompanyName, a.webCountryName
FROM    webDownloadTable a
  LEFT OUTER JOIN accountMatchingTable b
    ON a.webCompanyName + a.webCountryName = b.webCompanyName + b.webCountryName
    OR a.webCompanyName + ' ' = b.webCompanyName + b.webCountryName
WHERE b.webCompanyName IS NULL
ORDER BY webCompanyName, webCountryName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:08:09.107

我认为这可以解决问题：

```
SELECT DISTINCT TOP 15 webCompanyName,
                       webCountryName
FROM   webDownloadTable
       LEFT OUTER JOIN accountMatchingTable
         ON webDownloadTable.webCompanyName = accountMatchingTable.matchedCompanyName
            AND (webDownloadTable.webCountryName = accountMatchingTable.matchedCountryName
                  OR accountMatchingTable.matchedCountryName = ' ')
WHERE  accountMatchingTable.matchedCompanyName IS NULL
ORDER  BY webCompanyName,
          webCountryName; 
```

我不相信`DISTINCT TOP 15`这一点 - 在子查询中执行不同的操作然后从中进行选择可能会更好`TOP 15`，或者使用按您的两个值划分的排名函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:13:33.223

您可以尝试使用`NOT EXISTS`子句，如下所示：

```
SELECT  DISTINCT TOP 15 webCompanyName, webCountryName
FROM    webDownloadTable d
WHERE NOT EXISTS
(SELECT 1
 FROM accountMatchingTable m
 WHERE m.matchedCompanyName = d.webCompanyName AND
       m.matchedCountryName in (d.webCountryName, ' ')
)
ORDER BY webCompanyName, webCountryName; 
```

*通过分别*连接公司名称和国家名称（而不是作为单个连接字符串），应该可以使用任何合适的现有索引。

# php - php & js 组合框触发事件

> ID：15380658
> 
> 赞同：1
> 
> 时间：2013-03-13T08:52:56.503
> 
> 标签：php, javascript

我在创建一个脚本时遇到问题，该脚本将`combobox`根据另一个中选择的内容填充一个`combobox`。

我是 PHP / JS 领域的新手，所以请耐心等待。这是我到目前为止所做的：

点击事件中的js脚本

```
<script type="text/javascript">
    function selectDropdown(){
        var dropdownValue=document.getElementById("dropdown").value;
        $field=dropdownValue;
    }
</script> 
```

用数据库中的值填充的基本组合框：

```
<select id="dropdown" name="dropdown" onchange="selectDropdown()">
    <option value="dd">--take an option--</option>
    <?
    $standard = Env::value('standard');
    if (!$status)
        $statement = "select code from standard";
    foreach ($db->query($statement )->fetchall() as $row)
        echo "<option".($row == $standard ? ' selected ' : '').">$row[0]</option>";

    ?>
</select> 
```

现在我想将选定的选项放入其他组合框中 - 实际上我将使用之前选择的值执行另一个 SQL 查询，但事实上我将在变量中具有值这一事实足以让我完成任务。

```
<select name='st' class='txt'>
  <option value="st"><? echo $field; ?></option>
</select> 
```

发布的代码是根据我找到的一篇文章创建的，我已根据需要对其进行了重新制作，但这不起作用。谁能指出我在哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:01:38.127

您不能从 javascript 设置 php 变量，这将不起作用

```
var dropdownValue=document.getElementById("dropdown").value;
$field=dropdownValue;
...
<option value="st"><? echo $field; ?></option> 
```

你可以做两件事使用 ajax 生成其他选择或使用纯 javascript，使用 jQuery 它将是这样的：

```
$('option[value=st]').text(dropdownValue); 
```

# c++ - 不知道为什么代码只打印出第一部电影

> ID：15380661
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:53:06.683
> 
> 标签：c++, vector

嗨，我正在尝试使用向量来存储电影列表，但是当我尝试计算电影时，我只得到第一部。我不确定为什么代码会这样做。如果有人可以帮助它会非常感谢。

```
Movies::Movies(string fn){loadMovies(fn);}

 int Movies::getMovieCount() const {return movies.size();}

 const Movie * Movies::getMovie(string mc) const {
Movie* p = *movies.data();
for(unsigned int i = 0; i < movies.size(); i++)
{
    if(p->getTitle().find(mc) ==string::npos)
    {
        cout<<string::npos;
        printf("test:%d\n",i);
        return p;
    }
    p++;
}
return NULL;
}

 Movies::~Movies() {
for(std::vector<Movie*>::const_iterator ptr = movies.begin(); ptr != movies.end(); ptr++)
{
    delete *ptr;
}
}

void Movies::loadMovies(string fn) {
ifstream iS(fn);  // technically should be c_str
string s;
getline(iS, s); // skip heading
getline(iS, s);
while(!iS.eof()) {
    Movie* m = new Movie(s);
    movies.push_back(m);
    getline(iS, s);
}
iS.close();
sort(movies.begin(), movies.end());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:06:27.143

该行`Movie* p = *movies.data();`从向量中获取第一个指针（以一种奇怪的方式）。但是，`p++`不会让您获得下一个指针，而是更改`p`为指向 第一部电影*之后*的空间，而不是下一个电影。

`p`我认为如果您只是跳过指针并使用它会更好

```
for(unsigned int i = 0; i < movies.size(); i++)
{
    if(movies[i]->getTitle().find(mc) ==string::npos)
    {
        cout<<string::npos;
        printf("test:%d\n",i);
        return movies[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:05:42.357

这行不通

```
Movie* p = *movies.data(); 
```

递增此指针不会将其移动到向量的下一个元素，而是移动到某个随机位置。除了直接使用向量的表示之外是一个非常糟糕的主意。

如果它没有找到任何东西也会`find`返回，所以你需要改变你的条件。`npos`

这是实现搜索的正确方法

```
const Movie * Movies::getMovie(string mc) const
{
  for(auto I = moves.begin(); I != movies.end(); ++I)
  {
      if((*I)->getTitle().find(mc) != string::npos)
      {
          return *I;
      }
  }
return nullptr;
} 
```

# c# - C# 从 NATIVE C 线程更新 WinForms

> ID：15380663
> 
> 赞同：0
> 
> 时间：2013-03-13T08:53:16.003
> 
> 标签：c#, .net, pinvoke, native, multithreading

我将本机 C DLL 与 C# 互操作一起使用。我将委托作为函数指针传递给本地 DLL，当本地 DLL 想要通知我某些事件时，我的方法在 C# 中调用。然后我想更新我的表单上的文本框。这会导致在正常的仅 .NET 跨线程操作期间未遇到的意外问题。如何从 C DLL 的本机线程更新表单上的 TextBox？

我试过：

```
// Dumb approach
// causes Exception - Cross Thread Operation on GUI - expected
textBox1.Text = "some text"; 

// Invoke approach
// causes Exception (Cross Thread Operation on GUI)
textBox1.Invoke(new AddTextDelegate(AddText), new object[] { text }); 

// SynchronizationContext approach
// causes unhandled win32 exception with no call stack an no way to debug
context.Post(new SendOrPostCallback(delegate { eventHandler(this, args); }), null); 

// My own .NET thead approach
// causes unhandled win32 exception with no call stack an no way to debug
Thread thread = new Thread(new ParameterizedThreadStart(LogMethod));
thread.Start(text); 
```

如果涉及 .NET 线程，上述所有操作都可以正常工作，但如果涉及来自本机 DLL 的线程则失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:00:35.460

你可以看看这个链接：

[http://www.codeproject.com/Articles/16726/Cross-thread-calls-in-native-C](http://www.codeproject.com/Articles/16726/Cross-thread-calls-in-native-C)

这听起来像你正在寻找的东西。我没有仔细阅读，因为它有点长。您也可以使用锁定队列来放入请求。然后你可以在你的代码端有一个计时器，它检查队列中是否有新的项目来操作。如果我有很多来自其他线程的数据，我有时会这样做。调用也需要一些时间。最好不要在 gui 线程中进行所有计算，而只在 GUI 线程中进行 GUI 更新。但我想你已经知道这些方面了。

# jquery - 多个 jquery 效果在我的 html 脚本中不起作用

> ID：15380664
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:53:17.400
> 
> 标签：jquery, html, css

在我的 html 设计中，我有一个 jquery 菜单栏和一个滑块......我需要在我的页面中使用一个图片库和一个 jquery 日历......但是当我使用图库和日历时，它不起作用......什么原因？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:00:01.057

我认为您正在加载 jQuery 库两次。也许你有一个 jquery 冲突。

也许你可以给我们一个链接，这样我们就可以看到有什么问题？

# css - 当元素改变位置时动画元素（响应式布局）

> ID：15380669
> 
> 赞同：0
> 
> 时间：2013-03-13T08:53:27.113
> 
> 标签：css, animation, responsive-design, positioning

[这是用于布局的代码笔： http](http://codepen.io/justdade/pen/hDzAv) ://codepen.io/justdade/pen/hDzAv

我希望“.small”元素漂浮在“#big”元素下，而不是仅仅跳出那里。这是否可以仅使用 CSS 来实现，或者你能给我一个想法，我应该如何使用 JS/jQuery 来实现它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:19:20.073

据我所知，你不能单独使用 css 来实现这一点——你需要布置元素并使用 javascript 改变它们的位置。

由于从头开始编写这将是一项乏味的任务，我建议查看为您执行此操作的库/插件。

查看砌体插件： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T06:32:03.603

看看这个：[http](http://css-tricks.com/animated-media-queries/) ://css-tricks.com/animated-media-queries/ ，

`transition`您可以使用 css 的属性创建比 masonry 插件更少滞后的动画（至少在 safari 上）

# html - img 元素周围的空间从何而来？

> ID：15380670
> 
> 赞同：1
> 
> 时间：2013-03-13T08:53:29.620
> 
> 标签：html, css

我需要使用十个 16 像素方形透明 PNG 文件创建图像精灵。因此，我将一个简单的 HTML 页面与我的 10 个图像放在一个带有背景颜色的 div 中。我添加了一些简单的 CSS 以使 div 适合内容并删除填充、边距等。

在使用 Firebug 的 Firefox 中，我检查了 div 的宽度，发现它的尺寸为 196 x 21 像素。我可以清楚地看到图像之间的空白。据我所知，我没有边距、填充或边框。

相反，如果我将图像浮动在 div 内，那么我会得到 160 x 16 像素的测量值（这是我最初的预期）。

我也在 Chrome 和 IE 中查看了这个页面并得到了相同的结果。所以我想行为必须在某处的标准中描述？

我很好奇图像周围的额外空白来自哪里？

（抱歉，如果这已在其他地方得到回答）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:01:02.400

`<img />`这听起来就像您的标签之间的空白。

如果您的 HTML 是：

```
<img src="/path/to/image/1.png" />
<img src="/path/to/image/2.png" />
<img src="/path/to/image/3.png" /> 
```

然后你会得到你的图像之间的空格，就像你在不同的行上写它们时你的单词之间的空格一样。

如果您按如下方式编写 HTML：

```
<img src="/path/to/image/1.png" /><img src="/path/to/image/2.png" /> 
```

这样图像之间就没有空白了。

这是`inline`和`inline-block`元素（`img`元素是`inline-block`）的“预期”行为。

有几种方法可以解决这个问题，如 Chris Coyer 的文章[Fighting the space between inline block elements](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:00:57.467

你是说底部空间吗？如果是这样，我有一个类似问题的答案

[https://stackoverflow.com/a/15357037/1061567](https://stackoverflow.com/a/15357037/1061567)

如果我们在谈论其他问题，请通过在 [http://jsfiddle.net上向我们展示一些示例来更清楚地说明](http://jsfiddle.net)

# c# - 根据内容删除项目

> ID：15380672
> 
> 赞同：1
> 
> 时间：2013-03-13T08:53:34.787
> 
> 标签：c#, .net, wpf, user-interface, combobox

我有一个组合框，想根据 ComboBoxItem 的内容删除一个项目。我应该怎么做？像这样的东西：

```
string contentToRemove = "ItemX";
combo.Items.Remove(combo.Where(x.Content.Equals(contentToRemove))); 
```

请注意，代码不会编译 - 我只是代表伪代码来尝试解释我想要什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:58:36.570

试试这个。

```
foreach (var item in combo.Items)
{
    if (item.Name == contentToRemove) // Check item.Name or something similar property.
        combo.Items.Remove(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:24:19.023

尝试使用这个

```
string contentToRemove = "Mac2";

mycombo.Items.Add("Mac1");
mycombo.Items.Add("Mac2");
mycombo.Items.Remove(contentToRemove); 
```

您正在使用的表达式将返回`bool`(`true`或`false`) 但不是被接受的字符串`combo.items.remove("String")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:45:55.360

> 使用此代码

```
combo.Items.Remove({string}); 
```

[http://msdn.microsoft.com/en-us/library/aa983551(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa983551(v=vs.71).aspx)

# openerp - 在 openerp 中展开帐户视图图表？

> ID：15380673
> 
> 赞同：0
> 
> 时间：2013-03-13T08:53:41.113
> 
> 标签：openerp

有谁知道如何使帐户的字符或任何列表视图默认显示为展开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:25:34.283

在以前的版本 (v5) 中，此功能需要很长时间（每个帐户的余额计算），以至于 OpenERP 删除了该功能。

# actionscript-3 - 自定义事件侦听器回调失败

> ID：15380681
> 
> 赞同：1
> 
> 时间：2013-03-13T08:54:10.013
> 
> 标签：actionscript-3, apache-flex, events, listeners

我有一个 Flex 4.6 移动项目，并且我创建了一个自定义事件，我可以从各种跟踪中看到该事件正在按预期发送，但无论我做什么，我都无法让听众工作，他们只是坐在那里，什么都没有发生，请看一下并告诉我可能出了什么问题。

自定义事件：

```
package classes.events
{
import flash.events.Event; 
public class cartLoaded extends Event
{
  public static const CART_LOAD_SUCCESS:String = "cartLoadSuccess";
  public function cartLoaded(type:String, bubbles:Boolean=true, cancelable:Boolean=false)
  {
   trace("event_dispatched");
   super(type, bubbles, cancelable);
  }
  override public function clone():Event
  {
   trace("event_cloned");
   return new cartLoaded(type, bubbles, cancelable);
  }
}
} 
```

在来自 web 服务调用的 ResultEvent 之后，该事件是从一个类调度的，所以在 ResultEvent 回调中我有：

```
var cl:cartLoaded = new cartLoaded(cartLoaded.CART_LOAD_SUCCESS);
e.currentTarget.dispatchEvent(cl); 
```

当我的结果回来时，我会在控制台中看到“event_dispatched”。所以我知道事件被触发了。在调用我的类的 ItemRenderer 的父列表中：

```
lst_cart.addEventListener(cartLoaded.CART_LOAD_SUCCESS,loadData);
function loadData(e:cartLoaded):void
{
    trace("set data provider");
} 
```

我从来没有见过“设置数据提供者”，现在我明白必须在调度事件之前注册监听器，在我的情况下它肯定是：

请帮忙，因为这严重阻碍了我前进，我需要能够捕捉到这个事件，我已经尝试了一切。

如下所述，我确实忘记在进行 web 服务调用的类中发布代码的一部分，我在包内但在类外有这一行：

```
[Event(name="cartLoadSuccess", type="classes.events.cartLoaded")] 
```

我相信只有在将气泡设置为 false 时才需要它，它是，但现在不是。

# python - python datetime对象的时区处理

> ID：15380691
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:54:35.833
> 
> 标签：python, datetime

我不明白为什么下面的代码减去一个小时的 UNIX 纪元时间戳（在时区 UTC+1 中）：

```
import datetime
import pytz
start_dt = datetime.datetime.fromtimestamp( 1362268800 , pytz.utc )
print start_dt
# prints datetime.datetime(2013, 3, 3, 0, 0, tzinfo=<UTC>)
print int( start_dt.strftime("%s") )
# prints: 1362265200 (which is 2013-03-02T23:00Z ) <--- I expected 1362268800
print start_dt.strftime("%Y-%m-%dT%H:%M:%SZ")
# prints: 2013-03-03T00:00:00Z 
```

我已经通过使用解决了我的问题`calendar.timegm( start_ts.timetuple() )`，但我从根本上想知道上面的代码有什么问题，以及如何创建 UTC 格式的 datetime 对象以及 strftime 将在哪里打印纪元时间戳。

根据 python 文档，不允许使用“%s”。如果它导致令人困惑的结果，是否应该明确禁止（即引发异常？）？

使用 python 2.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:51:28.910

> 根据 python 文档，不允许使用“%s”。如果它导致令人困惑的结果，是否应该明确禁止（即引发异常？）？

从[文档](http://docs.python.org/2.7/library/datetime.html#strftime-strptime-behavior)：

> 支持的全套格式代码因平台而异，因为 Python 调用平台 C 库的 strftime() 函数，并且平台变化很常见。

Python 错误跟踪器[“datetime.strftime('%s') 应该尊重 tzinfo”](http://bugs.python.org/issue12750)中存在一个未解决的问题，以添加对以下内容的明确支持`"%s"`：

> > 看来问题在于 strftime()
> 
> 是的， strftime('%s') 目前忽略 tzinfo。这不是错误。对“%s”格式代码的支持是偶然的，没有在 Python 中记录。

# java - 如何继承组件？

> ID：15380692
> 
> 赞同：0
> 
> 时间：2013-03-13T08:54:46.867
> 
> 标签：java, eclipse, swing, inheritance, multiple-inheritance

是否可以在不同的类中继承 jTextField、jComboBox 等组件？

```
if(!(jButton7.isEnabled()))
        {

            if((getTotal==enterPounds))
            {
                JOptionPane.showMessageDialog(null,"\n"+jTextPane1.getText());

                int x = jList1.getSelectedIndices()[0];
                int i = Integer.parseInt(stringssssss[x]);
                int oook= Integer.parseInt(seats);

                i=i-oook;
                stringssssss[x]= stringssssss[x]= ""+i;
                jTextField8.setText(""+ stringssssss[x]);           
            } 
```

上面的代码在 g.java 中，我可以将它转移到另一个类并调用 g.java 中的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:59:12.780

您可以从另一个类调用此代码，例如，如果您将代码包装在如下方法中。

```
public void setText() {
if(!(jButton7.isEnabled()))
        {

            if((getTotal==enterPounds))
            {
                JOptionPane.showMessageDialog(null,"\n"+jTextPane1.getText());

                int x = jList1.getSelectedIndices()[0];
                int i = Integer.parseInt(stringssssss[x]);
                int oook= Integer.parseInt(seats);

                i=i-oook;
                stringssssss[x]= stringssssss[x]= ""+i;
                jTextField8.setText(""+ stringssssss[x]);           
            }
}
} 
```

然后在另一个班级做

```
private R r = new R();
r.setText(); 
```

如果您想实际从 R 继承变量，请在 R 中使它们受到保护，然后编写一个扩展 R 的新类。这些变量随后将可用于这个新类。

# c# - 使用 LINQ 从 xml 创建实体对象的最佳方法

> ID：15380694
> 
> 赞同：1
> 
> 时间：2013-03-13T08:54:50.210
> 
> 标签：c#, .net, xml, linq

我有以下代码用于从 source 创建对象列表`XML`。我可以在`var query`变量中得到要求的结果。`List<Video>`从这个结果中创建一个的最佳方法是什么？

注意：`Method Chaining`如果可能，首选方法。

**代码**

```
class Program
{
    static void Main(string[] args)
    {
        string xmlStringInput = @"<videoShop>
                                  <video title=""video1"" path=""videos\video1.wma""><Director>Speilberg</Director></video>
                                  <video title=""video2"" path=""videos\video2.wma""/>
                                </videoShop>";

        XDocument myDoc = XDocument.Parse(xmlStringInput);

        var videoElements = (from video in myDoc.Descendants("video") select video).ToList();
        foreach (var videoEle in videoElements)
        {
            //System.Xml.XPath namespace for XPathSelectElement
            var directorName = videoEle.XPathSelectElement(@"Director");
        }

        var query = from video in myDoc.Descendants("video")
                    select new
                    {
                        MyTitle = video.Attribute("title").Value,
                        MyPath = video.Attribute("path").Value
                    };

        //IEnumerable<XElement> elements = (IEnumerable<XElement>)query;
        //List<Video> videoLibrary = (List<Video>)query.ToList<Video>();

        Console.WriteLine(query);
        Console.ReadLine();

    }

} 
```

**实体**

```
 public class Video
 {
     public string MyTitle { get; set; }
     public string MyPath { get; set; }
 } 
```

**参考**：

1.  [在 XDocument 中定位和设置元素值的最有效方法是什么？](https://stackoverflow.com/questions/299747/whats-the-most-efficient-way-to-locate-and-set-element-values-in-an-xdocument)
2.  [如何从 XDocument 对象中获取子元素列表？](https://stackoverflow.com/questions/2542184/how-do-i-get-a-list-of-child-elements-from-xdocument-object)
3.  [从 XML 创建对象](https://stackoverflow.com/questions/1601911/creating-objects-from-xml)
4.  [带有 XML 的 C# LINQ，无法将多个具有相同名称的字段提取到对象中](https://stackoverflow.com/questions/1980263/c-sharp-linq-with-xml-cannot-extract-multiple-fields-with-same-name-into-object?rq=1)
5.  [如何获取 XElement 的值而不是所有子节点的值？](https://stackoverflow.com/questions/4251215/how-to-get-xelements-value-and-not-value-of-all-child-nodes)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T08:56:03.617

```
var query = from vin myDoc.Descendants("video")
            select new Video
            {
                MyTitle = (string)v.Attribute("title"),
                MyPath = (string)v.Attribute("path")
            };

// var means List<Video> here
var results = query.ToList(); 
```

或没有`query`变量：

```
// var means List<Video> here
var results = (from vin myDoc.Descendants("video")
               select new Video
               {
                   MyTitle = (string)v.Attribute("title"),
                   MyPath = (string)v.Attribute("path")
               }).ToList(); 
```

基于方法的查询：

```
var results = myDoc.Descendants("video")
                   .Select(v => new Video()
                                {
                                    MyTitle = (string)v.Attribute("title"),
                                    MyPath = (string)v.Attribute("path")
                                 }).ToList(); 
```

# c# - windows mobile客户端和winforms应用程序之间的通信抛出wcf

> ID：15380699
> 
> 赞同：0
> 
> 时间：2013-03-13T08:55:14.737
> 
> 标签：c#, winforms, wcf, visual-studio-2008, windows-mobile-6

我创建了一个 wcf 服务来从 windows mobile 6 客户端接收 gps 坐标并将它们保存到数据库中。一切正常，但我正在尝试将一些配置从 winforms 应用程序发送到 windows mobile 客户端。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:51:47.760

WCF 服务需要在一个正在运行的 Web 服务上（本地主机是可以的）。

在您的 PC 上创建并运行 WCF 服务后，右键单击并将 Web 引用添加到您的项目。

![网络参考](../Images/f3b7411951eaacf8094b9c69daa7bf13.png)

完成后，创建服务的客户端实例，以便调用在其中创建的公共方法。

运行 Web 服务的 PC 必须能够“看到”您的设备。查看是否可以 PING 设备：

![平](../Images/3b005f08abce3c455a09673747497fed.png)

# sql - 制作简单的 sql 查询计数

> ID：15380700
> 
> 赞同：1
> 
> 时间：2013-03-13T08:55:16.867
> 
> 标签：sql, database, sql-server-2005

我有这样的数据库结构>

```
ID |  Party_Code |  Trade_Qty | Market_Rate
-------------------------------------------    
 1     8070            5           10.50
 2     8745            15          80.35
 3     8070            6           45.60 
```

这只是示例数据。实际上这个表包含 40000 行。

从这个示例中，我们可以看到`Party_Code`列可以有重复的值。

我正在尝试查找派对代码`count`。`distinct`

为此，我尝试了以下两个失败的查询：

```
select count(distinct(Party_Code)) from tradeFile 
```

和

```
select distinct(count(Party_Code)) from tradeFile 
```

这两个查询都失败了。

我想知道我在哪里犯错？

编写此类查询的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:03:13.833

```
select count(distinct Party_Code) from tradeFile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:11:26.553

使用 Count 函数时，最好将其与 Group By 子句一起使用：

`select count(*) as Quantity from tradeFile Group By Party_Code`

# sockets - 为什么我的服务器的套接字是 SYN_RECV

> ID：15380701
> 
> 赞同：0
> 
> 时间：2013-03-13T08:55:19.733
> 
> 标签：sockets, client, connect, apache

环境：操作系统：centos 服务器：apache 2.2.22

问题是服务器无法完成三次握手。客户端可以接收到SYN-ACK包和响应ACK，但是服务端收不到。

客户端代码：

int main() {

```
struct sockaddr_in srvaddr;
srvaddr.sin_family = AF_INET;
srvaddr.sin_port = htons(80);
int32_t sockfd;
srvaddr.sin_addr.s_addr = inet_addr("10.200.33.201");//httpd ip
sockfd = socket(AF_INET,SOCK_STREAM,0);

if(connect(sockfd,(struct sockaddr*) &srvaddr,sizeof(struct sockaddr)) < 0)
  printf("connect error!\n");
//close(sockfd);

pause();
return 0; 
```

}

执行客户端后，使用'netstat -natp'，发现连接套接字是SYN_RECV状态。如果使用wireshark抓包，我发现客户端多次重新发送ACK。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:39:20.557

#include int timeout=1; setsockopt(listen_fd, IPPROTO_TCP, TCP_DEFER_ACCEPT, &timeout, sizeof(int))

因为 apache 2.1.5 默认使用 TCP_DEFER_ACCEPT；

# android - Android - 访问 Mysql 数据库 - 通信异常

> ID：15380703
> 
> 赞同：0
> 
> 时间：2013-03-13T08:55:23.117
> 
> 标签：android, mysql, jdbc, android-4.2-jelly-bean, android-2.2-froyo

我正在开发的应用程序有问题。我正在尝试使用我在 android 上的应用程序连接到 WIFI 网络中本地的 Mysql 中的数据库。为此，我使用 mysql-connector-java 5.1.23 的直接方法。该应用程序在我的nexus one（Android 2.3）上运行良好。但不在我的nexus 7（Android 4.2）上。
我有错误：`"com.mysql.jdbc.exceptions.jdbc4.communicationsexception communications link failure"`

但是，使用我的nexus 7 上的市场应用程序（connect2sql），我可以轻松访问数据库。我猜（但我不明白）该错误与 Android 的版本有关（2.3 与 4.2）。有人已经遇到过这个问题吗？

非常感谢您在该主题上提供的任何帮助。

（我用Eclipse用JDK 1.6开发——目标API是17，对应Android 4.2）

这是代码：

```
package fr.apln.Rocketry_Challenge;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
import java.sql.Connection;  
import java.sql.DriverManager;  
import java.sql.ResultSet;  
import java.sql.Statement; 
import java.sql.SQLException;

public class testdirectmysql extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.screen_testphpmysql);

        try {  
        Class.forName("com.mysql.jdbc.Driver").newInstance();  
        Connection con = DriverManager.getConnection("jdbc:mysql://192.168.1.50:3306/Rocketry_Challenge_1", "android", "XXXXX");  

        Statement st = con.createStatement();  
        st.executeQuery("USE Rocketry_Challenge_1;");
        Toast.makeText(this,  "C'est passé", Toast.LENGTH_LONG).show();
        ResultSet rs = st.executeQuery("SELECT * FROM projets;");  
        while(rs.next()) {  
        Toast.makeText(this, "Projet : "+rs.getString(2)+" / Club : "+rs.getString(3), Toast.LENGTH_LONG).show();

        }  
        } catch (Exception e) { 
            Toast.makeText(this,  String.valueOf(e), Toast.LENGTH_LONG).show();
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:00:22.337

我昨天看到另一个开发人员，我可以解决我的问题。我的函数在主线程中，所以 Android 4.2 阻止了它，因为它太慢了……Android 2.3 不是这种情况。我尝试在 Asynctask 中创建我的函数并且它工作正常。

谢谢您的回答。

# c++ - 两个值之间的 C++ 时间差

> ID：15380709
> 
> 赞同：1
> 
> 时间：2013-03-13T08:55:35.927
> 
> 标签：c++, time, counter

我试图捕捉一个数字的旋转速度。我有一个程序，计数器从 0 开始。
每次用户单击“加 1”按钮时。它将计数器增加 1。
计数器最大值为 255。在 255 之后，它返回到 0。
现在我想显示从 0 增加到最大值并返回到 0 所需的秒数。完整旋转的时间。用户单击按钮的速度会有所不同。

我需要知道的是如何为此使用计时器？该程序完成只是我需要编码的数字的完整旋转之间的计时器。

我在用着

```
#include <time.h>    //* clock_t, clock, CLOCKS_PER_SEC 
```

请指教。谢谢你。

```
int counter;
counter = pkt[0];

cout << endl;

cout << counter << endl;

if(counter == 1)
{
    cout << "revolution" << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:00:29.267

如果您可以使用 C++11，[`<chrono>`](http://www.cplusplus.com/reference/chrono/)可能是一个不错的选择。

它包含：

**持续时间**

它们测量时间跨度，例如：一分钟、两小时或十毫秒。在这个库中，它们用持续时间类模板的对象来表示，它结合了计数表示和周期精度（例如，十毫秒有十作为计数表示，毫秒作为周期精度）。

**时间点**

对特定时间点的引用，例如某人的生日、今天的黎明或下一趟火车经过的时间。在这个库中，time_point 类模板的对象通过使用相对于纪元的持续时间（这是使用同一时钟的所有 time_point 对象共有的固定时间点）来表达这一点。

**时钟**

将时间点与实际物理时间相关联的框架。该库提供了至少三个时钟，它们提供了将当前时间表示为 time_point 的方法：system_clock、steady_clock 和 high_resolution_clock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:59:23.367

`difftime`可用于获取两个时间实例之间的差异。[difftime](http://www.cplusplus.com/reference/ctime/difftime/)页面上的示例代码给出了您正在寻找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:06:05.570

```
#include <ctime>
time_t start = time(NULL); 
```

将为您提供自 1970 年 1 月 1 日 00:00 UTC 以来经过的秒数。如果将其放在要跟踪的代码的开头，则只需再次获取时间即可计算执行完整旋转所需的时间。然后得到差异。`difftime`可以帮助您获得差异。不要将其视为真正运行的计时器。您只是在革命前后获得时间并找到差异。

# php - 如何在 PHP 中从 Google Maps Direction API 解码折线

> ID：15380712
> 
> 赞同：3
> 
> 时间：2013-03-13T08:55:49.827
> 
> 标签：php, json, directions, google-directions-api

我有来自以下 URL 的 json 响应：

[http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los%20Angeles,CA&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los%20Angeles,CA&sensor=false)

JSON路径`routes[x].legs[y].steps[z].polyline.points`：

> "azq~Fhc{uOAlB?jB?^?P?P?B@V@|J@fA?xA@xA?h@?B?F?@?tA@xD?h@BnA@|A@rB@ f@?d@@v@AxB?d@AZEzA?BIjB?@Cx@?@EzAAlC?F?F?T?B?f@DhHBhD?@?R?l@?R?|CCpDAj@E|DGnDKzCCb @OtBa@rFGfAAb@?@?FAp@? `ADbJD|F@bF@@@fERhd@BrEFdDBtBAvBAx@@l@?n@@^@bANnQ?rABnM?jC?hH@fA?@B`F?vC?hB?@BpM?@?j@@p@@|KB~Q@pFBbHBvF@z@?f@@jB?nA@z@DzD@VJ ~CLfC\|E?B?@HnANtAVpDRpCLbB^dFTxC@LZvDF^HrALLlCH `EB|H?DBpEB~V?^BhDJ`R?@@\?~A?nABrL?@?jD@vD@vA?h@?BLx[?x@?B?\?F@ pA?h@D~H?@Bz@Dr@RbCLfA\rBPv@@@T~@t@bCPf@z@xBd@rAf@dB\zAN~@PjAT~BFrADxAH `X?z@?@HfW?x@?F?@@dD@^F|Y@v@D|JBzH?rB@tAApABxB?bA@dBBxABlAJ~CJrBDfANhBNjCLlCLpBHlBFnB@`C?|A?v@AlBCdA?r @EjEC|BItemdGEtAIfEI|BKzDOzGEjCCl@?@MnDW `HSrFSlFAd@?@qA|[Ct@Cj@At@AbA?hBAdBClBQjFQnECr@E`AYjFIzAWxDQpCYpEAFItACt@S~C]|GSlEMnCMtCGdAKlBQxDg@bLAT?BKrCAn@Ad@?x@?p@?J?|@@lA@z@BbABn@Bt@@ `@HnAPxB@LB^L`AT `BP`AP~@ Z~ALn@?@@Fd@|BjAfGd@dDd@|D\bFDf@D~@@f@B|@@xCJ `P?dBB`EDtE@bADlAR `EJlABh@Dp@F`@ `@xEJdBHlCF~C@nA?@?@DfG?`ADhLBbD@x@?F@~C?dCNbTDrIBxDLbO@~AV `Y?@DfHEvDGlC]fHGhD?lHPlP?@?B?R?@BfBNbRBpENfQDrGBvCDrEBtEBzABfABx@B~@^`FHx@ H|@ `@bDPxAZpCTbDN`DBlC@j@@j@BhAHhLBvC?p@BlB?jAAfAAx@C`@MzDM|B_@tDq@pF]fB]zAo@fCc@~Am@jBo@dBoCxG?@?@Sd@g@vAY~@St@W|@_@bBUhA_@zBWhBK`AOpAKfAEp@Gz@Cb@GpACZAVAh@Ad@AX?f@At@CpB"

我想使用 PHP 将折线点字符串解码为上述 URL 返回的 lat long 值。

我在 Java 和 Objective C 中找到了一些结果，但我在 PHP 中需要它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-06T00:45:35.350

# Python 实现

这不在 PHP 中，但如果您要从 Google 地图中解码折线字符串，则此线程位于搜索结果的顶部附近。如果其他人需要它（就像我一样），这里有一个用于解码折线字符串的 Python 实现。这是从 Mapbox JavaScript 版本移植过来的；[在我的回购页面](https://github.com/mgd722/decode-google-maps-polyline)上找到更多信息。

```
def decode_polyline(polyline_str):
    index, lat, lng = 0, 0, 0
    coordinates = []
    changes = {'latitude': 0, 'longitude': 0}

    # Coordinates have variable length when encoded, so just keep
    # track of whether we've hit the end of the string. In each
    # while loop iteration, a single coordinate is decoded.
    while index < len(polyline_str):
        # Gather lat/lon changes, store them in a dictionary to apply them later
        for unit in ['latitude', 'longitude']: 
            shift, result = 0, 0

            while True:
                byte = ord(polyline_str[index]) - 63
                index+=1
                result |= (byte & 0x1f) << shift
                shift += 5
                if not byte >= 0x20:
                    break

            if (result & 1):
                changes[unit] = ~(result >> 1)
            else:
                changes[unit] = (result >> 1)

        lat += changes['latitude']
        lng += changes['longitude']

        coordinates.append((lat / 100000.0, lng / 100000.0))

    return coordinates 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T09:38:06.640

你可以在 Github 上查看这个 repo：[Google Maps Polyline Encoding Tool](https://github.com/emcconville/google-map-polyline-encoding-tool)

> 一个简单的 PHP 类，用于将折线转换为谷歌地图的编码字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-10T15:37:33.273

```
<?php

# Do steps 1-11 given here 
# https://developers.google.com/maps/documentation/utilities/polylinealgorithm
# in reverse order and inverted (i.e. left shift -> right shift, add -> subtract)

$string = "udgiEctkwIldeRe}|x@cfmXq|flA`nrvApihC";
# Step 11) unpack the string as unsigned char 'C'
$byte_array = array_merge(unpack('C*', $string));
$results = array();

$index = 0; # tracks which char in $byte_array
do {
  $shift = 0;
  $result = 0;
  do {
    $char = $byte_array[$index] - 63; # Step 10
    # Steps 9-5
    # get the least significat 5 bits from the byte
    # and bitwise-or it into the result
    $result |= ($char & 0x1F) << (5 * $shift);
    $shift++; $index++;
  } while ($char >= 0x20); # Step 8 most significant bit in each six bit chunk
    # is set to 1 if there is a chunk after it and zero if it's the last one
    # so if char is less than 0x20 (0b100000), then it is the last chunk in that num

  # Step 3-5) sign will be stored in least significant bit, if it's one, then 
  # the original value was negated per step 5, so negate again
  if ($result & 1)
    $result = ~$result;
  # Step 4-1) shift off the sign bit by right-shifting and multiply by 1E-5
  $result = ($result >> 1) * 0.00001;
  $results[] = $result;
} while ($index < count($byte_array));

# to save space, lat/lons are deltas from the one that preceded them, so we need to 
# adjust all the lat/lon pairs after the first pair
for ($i = 2; $i < count($results); $i++) {
  $results[$i] += $results[$i - 2];
}

# chunk the array into pairs of lat/lon values
var_dump(array_chunk($results, 2));

# Test correctness by using Google's polylineutility here:
# https://developers.google.com/maps/documentation/utilities/polylineutility

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-16T08:44:26.743

> 解决这个问题的最简单的方法..

这是Github 存储库的[链接，其中包括编码/解码类。](https://github.com/dyaaj/polyline-encoder)它还具有最简单的使用说明。

> **注意：**我必须稍微更改类以解码函数 decodeValue 中的折线，这是 while 循环中的最后一行。我不得不用 1000000 替换 100000

```
$points[] = array('x' => $lat/1000000, 'y' => $lng/1000000); 
```

# sql - 从每组中选择前 1 行

> ID：15380718
> 
> 赞同：11
> 
> 时间：2013-03-13T08:56:01.007
> 
> 标签：sql, sql-server-2012, group-by, greatest-n-per-group

我有一张表格，列出了已安装的软件版本：

```
id  | userid | version | datetime
----+--------+---------+------------------------
111 | 75     | 10075   | 2013-03-12 13:40:58.770
112 | 75     | 10079   | 2013-03-12 13:41:01.583
113 | 78     | 10065   | 2013-03-12 14:18:24.463
114 | 78     | 10079   | 2013-03-12 14:22:20.437
115 | 78     | 10079   | 2013-03-12 14:24:01.830
116 | 78     | 10080   | 2013-03-12 14:24:06.893
117 | 74     | 10080   | 2013-03-12 15:31:42.797
118 | 75     | 10079   | 2013-03-13 07:03:56.157
119 | 75     | 10080   | 2013-03-13 07:05:23.137
120 | 65     | 10080   | 2013-03-13 07:24:33.323
121 | 68     | 10080   | 2013-03-13 08:03:24.247
122 | 71     | 10080   | 2013-03-13 08:20:16.173
123 | 78     | 10080   | 2013-03-13 08:28:25.487
124 | 56     | 10080   | 2013-03-13 08:49:44.503 
```

我想显示每个记录的所有字段，`userid`但只显示最高版本（版本也是 a `varchar`）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T09:04:22.760

如果您使用 SQL-Server（最低 2005 年），您可以使用 a `CTE`with`ROW_NUMBER`函数。您可以使用`CAST`for version 来获得正确的顺序：

```
WITH cte 
     AS (SELECT id, 
                userid, 
                version, 
                datetime, 
                Row_number() 
                  OVER ( 
                    partition BY userid 
                    ORDER BY Cast(version AS INT) DESC) rn 
         FROM   [dbo].[table]) 
SELECT id, 
       userid, 
       version, 
       datetime 
FROM   cte 
WHERE  rn = 1 
ORDER BY userid 
```

[**演示**](http://www.sqlfiddle.com/#!3/d9639/4/0)

[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)即使有多个用户使用相同（顶级）版本，也始终返回一条记录。如果要返回所有“顶级版本用户记录”，则必须替换`ROW_NUMBER`为`DENSE_RANK`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T09:09:15.893

您没有指定要如何处理关系，但如果您希望显示重复项，则可以这样做；

```
SELECT a.* FROM MyTable a
LEFT JOIN MyTable b
  ON a.userid=b.userid
 AND CAST(a.version AS INT) < CAST(b.version AS INT)
WHERE b.version IS NULL 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!6/b1da4/4)。

如果你想消除重复并且如果它们存在选择最新的，你将不得不稍微扩展查询；

```
WITH cte AS (SELECT *, CAST(version AS INT) num_version FROM MyTable)
SELECT a.id, a.userid, a.version, a.datetime 
FROM cte a LEFT JOIN cte b
  ON a.userid=b.userid
 AND (a.num_version < b.num_version OR 
     (a.num_version = b.num_version AND a.[datetime]<b.[datetime]))
WHERE b.version IS NULL 
```

[另一个 SQLfiddle](http://sqlfiddle.com/#!6/3892c/3)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-13T08:58:53.383

```
WITH records
AS
(
    SELECT  id, userid, version, datetime,
            ROW_NUMBER() OVER (PARTITION BY userID
                                ORDER BY version DESC) rn
    FROM    tableName
)
SELECT id, userid, version, datetime
FROM    records
WHERE   RN =1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/febfe/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:17:33.033

我认为这可能会解决您的问题：

```
 SELECT id,
       userid,
       Version,
       datetime FROM (
           SELECT id,
                  userid,
                  Version,
                  datetime , 
                  DENSE_Rank() over (Partition BY id order by datetime asc) AS Rankk
           FROM [dbo].[table]) RS 
WHERE Rankk<2 
```

我使用 RANK 函数来满足您的要求....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T09:07:12.930

```
select l.* from the_table l
left outer join the_table r
on l.userid = r.userid and l.version < r.version
where r.version is null 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-19T14:40:21.707

以下代码将显示您想要的内容，并且非常适合性能！

```
select * from the_table t where cast([version] as int) = 
(select max(cast([version] as int)) from the_table where userid = t.userid) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-01T17:31:39.003

如果我的调优经验教会了我什么，那么笼统是很糟糕的。

但是，如果您获得的表格`Top X`很大（即数十万或数百万）。`CROSS APPLY`几乎是普遍最好的。事实上，如果你对它进行基准测试，交叉应用在较小的规模（数以万计）上也表现**一致且令人钦佩，并且永远涵盖****了**潜在的需求。

就像是：

```
select
    id
    ,userid
    ,version
    ,datetime
from
    TheTable t
cross apply
(
    select top 1 --with ties
        id
    from
        TheTable
    where
        userid = t.userid
    order by
        datetime desc
) 
```

# php - Joomla 自定义组件

> ID：15380719
> 
> 赞同：1
> 
> 时间：2013-03-13T08:56:03.587
> 
> 标签：php, joomla, joomla2.5, joomla-component

我已经成功地从头开始构建了自己的自定义 joomla 组件，但我被困在一个可能相对简单的问题上。

为了这个例子的目的，让我们说：

A 等于主页

B 等于 Player(Multiple) 列表页

C等于播放器（个人）页面

到目前为止，我已经完成了 A 部分和 C 部分的工作。我可以通过在 url 中输入他们的 id 来访问我的个人玩家页面。

[C部分示例](http://i.stack.imgur.com/vlJAG.png)

我现在不确定的是在此之前创建一个视图，当您单击播放器菜单按钮时，它会将您定向到显示所有播放器列表的视图。我已经在模型中创建了一个函数，该函数返回数据库中的所有玩家以用于此视图。如果需要，我可以上传我的组件或将我的任何代码粘贴到这篇文章中。

我确实关注了[Joomla 组件](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)如何创建组件，所以我认为我的组件具有默认设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:29:43.673

你可以在你的控制器中的一个额外的公共函数中，这个函数可以作为“任务”使用，并且可以像这样访问：

/index.php?option=com_name-of-component&view=view-to-load&format=raw&task=name-of-function

如果这个函数变得很大，你可以创建一个多控制器组件。我无法比这更好地解释：

[在 Joomla 组件开发中使用多个控制器](https://stackoverflow.com/questions/6606010/using-multiple-controllers-in-joomla-component-development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T14:10:21.383

如果您在[Joomla 的组件创建器](http://www.component-creator.com)中构建组件，您可能只使用它为您制作的组件，或者您可以查看它生成的代码并从生成的代码中复制粘贴（或至少学习）。

# javascript - 调整左上角的大小搞砸了我的 X 和 Y 位置

> ID：15380724
> 
> 赞同：0
> 
> 时间：2013-03-13T08:56:16.090
> 
> 标签：javascript, html, canvas, kineticjs

我正在使用我发现的 KineticJS 调整大小并对其进行微调以满足我的需求（[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images /](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/) )

其中一个需求是我的用户可以将其图像的位置重置为特定的 X 和 Y 位置，并使图像适合绘图框（由脚本定义。它是中心/中心的框，是部分保存时剪切）。然而; 当我在左上角调整图像大小时，X 和 Y 变为负数。因此，如果我希望我的用户能够将他们的图像重置为 0、0。在他们使用 topLeft 锚调整大小后，0、0 线将关闭。

有没有办法通过其他方式锻炼到 0、0 线。或者也许使用它所在的图像作为基线的组或图层？

舞台初始化（它在边框周围绘制 4 个矩形以匹配绘图框。除了中心/中心的一个框外，所有内容都将被覆盖，这将是保存时图像的切口。

```
function initStage(image) {
    stage = new Kinetic.Stage({
        container: 'container',
        width: workspaceWidth,
        height: workspaceHeight
    });

    //Get the top, bottom, left and right square sized. used for X/y positioning and the creation of the ovelray
    var top_bottom_sides = (workspaceHeight-drawboxHeight)/2;
    var left_right_sides = (workspaceWidth-drawboxWidth)/2;

    imageGroupX = left_right_sides;
    imageGroupY = Math.ceil(top_bottom_sides);
    imgGroup = new Kinetic.Group({
        /*x: (workspaceWidth/2)-(image.width/2),
        y: (workspaceHeight/2)-(image.height/2),*/
        x: imageGroupX,
        y: imageGroupY,
        draggable: true,
        dragOnTop: false
    })

    layer = new Kinetic.Layer();
    //add the imgGroup to the layer and the layer to the stage.
    imageImg = new Kinetic.Image({
        /*x: left_right_sides-imgGroup.getX(),
        y: Math.ceil(top_bottom_sides)-imgGroup.getY(),*/
        x: 0,
        y: 0,
        image: image,
        width: image.width,
        height: image.height,
        name: 'image',
    });

    imgGroup.add(imageImg);
    layer.add(imgGroup);

    addAnchor(imgGroup, 0, 0, 'topLeft');
    addAnchor(imgGroup, image.width, 0, 'topRight');
    addAnchor(imgGroup, image.width, image.height, 'bottomRight');
    addAnchor(imgGroup, 0, image.height, 'bottomLeft');

    //Create 4 rectangles and place them around the borders to create an overlay which matches the drawing box
    //Ceil the height to avoid 0.5 pixel overlap on some dimensions
    rect1 = new Kinetic.Rect({  //top
        x: 0,
        y: 0, 
        width: workspaceWidth,
        height: Math.ceil(top_bottom_sides),
        fill: '#000000',
        opacity: 1,
        listening: false
    });

    //Floor the height to not have a 0.5 pixel overlap on some dimensions
    rect2 = new Kinetic.Rect({   // bottom
        x: 0,
        y: Math.ceil(workspaceHeight-top_bottom_sides), 
        width: workspaceWidth,
        height: Math.floor(top_bottom_sides),
        fill: '#000000',
        opacity: 1,
        listening: false
    });

    rect3 = new Kinetic.Rect({ //right
        x: rect1.getWidth()-left_right_sides,
        y: rect1.getX()+rect1.getHeight(), 
        width: left_right_sides,
        height: drawboxHeight,
        fill: '#000000',
        opacity: 1,
        listening: false
    });

    rect4 = new Kinetic.Rect({  //left
        x: rect1.getX(),
        y: rect1.getX()+rect1.getHeight(), 
        width: left_right_sides,
        height: drawboxHeight,
        fill: '#000000',
        opacity: 1,
        listening: false
    });

    layer.add(rect1);
    layer.add(rect2);
    layer.add(rect3);
    layer.add(rect4);

    layer.on('mouseover', function() {
        rect1.setOpacity(0.5);
        rect2.setOpacity(0.5);
        rect3.setOpacity(0.5);
        rect4.setOpacity(0.5);
        layer.draw();
    });

    layer.on('mouseout', function() {
        rect1.setOpacity(1);
        rect2.setOpacity(1);
        rect3.setOpacity(1);
        rect4.setOpacity(1);
        layer.draw();
    });

    stage.add(layer);

    stage.draw();
    fitImage();
} 
```

我的更新锚拖动调整大小：

```
function update(activeAnchor, optionalX, optionalY) {
    //var group = activeAnchor.getParent();
    var group = imgGroup;
    var topLeft = group.get('.topLeft')[0];
    var topRight = group.get('.topRight')[0];
    var bottomRight = group.get('.bottomRight')[0];
    var bottomLeft = group.get('.bottomLeft')[0];

    var image = group.get('.image')[0];
    if (optionalX && optionalY) {
        var anchorX = optionalX;
        var anchorY = optionalY;
    } else {
        var anchorX = activeAnchor.getX();
        var anchorY = activeAnchor.getY();
    }

    var activeHandleName = activeAnchor.getName();
    // update anchor positions
    switch (activeHandleName) {
        case 'topLeft':
            topRight.setY(anchorY);
            bottomLeft.setX(anchorX);
        break;
        case 'topRight':
            topLeft.setY(anchorY);
            bottomRight.setX(anchorX);
        break;
        case 'bottomRight':
            bottomLeft.setY(anchorY);
            topRight.setX(anchorX);
        break;
        case 'bottomLeft':
            bottomRight.setY(anchorY);
            topLeft.setX(anchorX); 
        break;
    }

    if (jQuery('#keep_ratio:checked').val() != undefined) {
        // Calculate new dimensions. Height is simply the dy of the handles.
        // Width is increased/decreased by a factor of how much the height changed.
        newHeight = bottomLeft.getY() - topLeft.getY();
        newWidth = image.getWidth() * newHeight / image.getHeight();

        // Move the image to adjust for the new dimensions.
        // The position calculation changes depending on where it is anchored.
        // ie. When dragging on the right, it is anchored to the top left,
        //     when dragging on the left, it is anchored to the top right.
        if(activeHandleName === "topRight" || activeHandleName === "bottomRight") {
            image.setPosition(topLeft.getX(), topLeft.getY());
        } else if(activeHandleName === "topLeft" || activeHandleName === "bottomLeft") {
            image.setPosition(topRight.getX() - newWidth, topRight.getY());
        }

    } else {
        var newWidth = topRight.getX() - topLeft.getX();
        var newHeight = bottomLeft.getY() - topLeft.getY();
        if(activeHandleName === "topRight" || activeHandleName === "bottomRight") {
            image.setPosition(topLeft.getX(), topLeft.getY());
        } else if(activeHandleName === "topLeft" || activeHandleName === "bottomLeft") {
            image.setPosition(topRight.getX() - newWidth, topRight.getY());
        }

    }

    imageX = image.getX();
    imageY = image.getY();

    // Update handle positions to reflect new image dimensions
    topLeft.setPosition(imageX, imageY);
    topRight.setPosition(imageX + newWidth, imageY);
    bottomRight.setPosition(imageX + newWidth, imageY + newHeight);
    bottomLeft.setPosition(imageX, imageY + newHeight);

    var width = newWidth;
    var height = newHeight;

    if(width && height) {
        width = Math.round(width);
        height = Math.round(height);

        image.setSize(width, height);
    }
} 
```

fitImage 函数和 setSizeManually：

```
function fitImage() {
if (imageImg) {
    var widthDifference = (imageImg.getWidth() > drawboxWidth) ? imageImg.getWidth()-drawboxWidth : drawboxWidth-imageImg.getWidth();
    var heightDifference = (imageImg.getHeight() > drawboxHeight) ? imageImg.getHeight()-drawboxHeight : drawboxHeight-imageImg.getHeight();

    var ratio = imageImg.getWidth()/imageImg.getHeight();

    if (widthDifference > heightDifference) {
        //Fit the image horizontally and scale it vertically
        var newHeight = Math.ceil(drawboxWidth / ratio);
        var newWidth = drawboxWidth+1;
    } else {
        //Fit the image vertically and scale it horizontally
        var newWidth = Math.round(drawboxHeight * ratio);
        var newHeight = drawboxHeight+1;
    }

    imageImg.setWidth(newWidth);
    imageImg.setHeight(newHeight);
    setSizeManually(newWidth, newHeight);
}
}

function setSizeManually(width, height, isSlider) {
    var stage = imgGroup.getStage();
    update(imgGroup.get('.bottomRight')[0], width, height, isSlider);
    stage.draw();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:34:27.307

我不能完全说出你想做什么，但这里有：

如果要将对象移动到某个位置，可以执行以下操作：

```
 object.setPosition(0,0); 
```

在您的情况下，您的图像包含在一个组中，所以我会采取这种方法（带注释）

```
 function resetImage(imageGroup, resetToX, resetToY){ // give the group and the x,y you want it moved to
     var groupChildren = imageGroup.getChildren(); // get image and anchors
     // in your code, the first item added is an image, then four anchor points, from top left clockwise
     var currentImageWidth = groupChildren[0].getWidth(); // will need this to calculate anchor points position
     var currentImageHeight = groupChildren[0].getHeight(); // same as above
     groupChildren[0].setPosition(resetToX, resetToY); // reset the image to this position, you could also do .setAbsolutePosition(resetToX, resetToY);
     groupChildren[1].setPosition(resetToX, resetToY); //reset topLeft anchor
     groupChildren[2].setPosition(resetToX+currentImageWidth, resetToY); //reset topRight anchor
     groupChildren[3].setPosition(resetToX+currentImageWidth, resetToY+currentImageHeight); // reset bottomRight anchor
     groupChildren[4].setPosition(resetToX, resetToY+currentImageHeight); // reset bottomLeft anchor
     imageGroup.getLayer().draw(); //redraw layer once everything resets
 } 
```

# javascript - CanJS findOne 按名称

> ID：15380725
> 
> 赞同：2
> 
> 时间：2013-03-13T08:56:23.173
> 
> 标签：javascript, canjs, canjs-model

我正在将 CanJS 用于 Web 应用程序。我想知道如何实现搜索。我已经实现了 findAll，但我想根据名称而不是 id 来实现 findOne。

```
var Library = can.Model({
    findAll:    "GET /libraries",
    findOne:    "GET/libraries/{id}",
    create:     'POST /libraries',
    update:     'PUT /libraries/{id}',
    destroy:    'DELETE /libraries/{id}'
}, {}); 
```

我想根据名称而不是 ID 实现 findOne。有人能帮我吗。我遇到了 Underscore.js。根据名称查找的其他替代方法是什么。

`{ "id" : 1, "name" : "CanJS", "web" : "http://canjs.us", "logo": "img/can.png" },`

这就是图书馆里的物品的样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T09:52:53.237

您可以在不重写 findOne 函数的情况下使用它：

```
MyModel.findOne({id:15,name:'canjs'}) 
```

请求将是 mayendpoint?id=15&name=canjs

如果您想保留它，则 Id 对于 RESTFUL 资源是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:39:14.930

您可以根据需要实现 findOne，例如`findOne: 'GET /libraries/name/{name}'`. 请参阅[API 文档](http://donejs.com/docs.html#!can.Model.static.findOne)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T16:45:05.407

您可以使用您自己的功能实现 findOne，如此处[所写](http://canjs.com/docs/can.Model.findOne.html#section_ImplementwithaFunction)

# google-maps - 将地理编码结果附加到信息窗口内容

> ID：15380729
> 
> 赞同：0
> 
> 时间：2013-03-13T08:56:34.820
> 
> 标签：google-maps, jquery, google-maps-api-3

我想问如何将地理编码结果附加/显示到信息窗口内容中。在这种情况下，我有多个标记。我尝试在 infowindow 内容上使用 div 并在获取地理编码结果（使用回调）后更新 div 内容，但它不起作用。如何解决这个，，，

```
<html>
<head>
<title>Reverse Geocoding v3 Example</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3&amp;sensor=false"></script>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="markerwithlabel.js"></script>   
<script type="text/javascript">
    var locations = [
        {"name":"A","lat":"25.113787","lon":"-102.233276"}, {"name":"B","lat":"25.798243","lon":"-102.96936"}, {"name":"C","lat":"27.033032","lon":"-103.974609"}, {"name":"D","lat":"26.370545","lon":"-103.112183"},
        {"name":"E","lat":"26.636002","lon":"-100.794067"}, {"name":"F","lat":"25.699288","lon":"-98.827515"}, {"name":"G","lat":"24.805019","lon":"-100.332642"}, {"name":"H","lat":"24.285358","lon":"-101.705933"}
    ];
    var geocoder;
    var map;
    var marker;
    var lat_longs = new Array();
    var infoWindow = null;
    var markers = new Array();
    var poi = new Array();
    var fitMap = 0;
    var timer = null;
    totUpdateOld = new Array();
    streetLocation = new Array();
    ident = 0;
    function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(26.291773,-100.914917);
        var mapOptions = {
            zoom: 8,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        infoWindow = new google.maps.InfoWindow();
        updatetimer(function() {
            fitMapToBounds();
        });
    }       
    var updatetimer = function showCarPosition(){
        if (markers.length>0){
            ident = 2;
        }
        for (var i = 0; i < locations.length; i++) {
            var coordinate = new google.maps.LatLng(locations[i].lat, locations[i].lon);
            var windowContent =[
                  '<div class="windowcontent"><ul class="nav infowindow nav-pills nav-stacked">',
                    '<li><div id="pos'+i+'"></div><li>'].join('');
            if (ident == 0){
                codeLatLng(function(addr, divid){
                    streetLocation.push(addr);
                    console.log(divid+'-'+addr);
                    $("#"+divid).html(addr);
                }, coordinate, "pos"+i);
                var marker = createMarker({
                    map: map,
                    position: coordinate,
                    labelContent: (locations[i].name),
                    labelAnchor: new google.maps.Point(32, 0),
                    labelClass: "unitlabel",
                    labelStyle: {opacity: 1.0}
                });
                bindInfoWindow(marker, 'click', windowContent);
                google.maps.event.addListener(infoWindow, 'domready', function(){ 
                    $('.viewlog').click(function() {
                        $.history.load($(this).attr('href'));
                        return false;
                    });
                });
            }
        }
        fitMapToBounds();
    };

    function codeLatLng(callback, coordinate, divid) {
        if (geocoder) {
            geocoder.geocode({'latLng': coordinate}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    if (results[1]) {
                        callback(results[1].formatted_address, divid);
                    }else {
                        callback("unknown", divid);
                    }
                }else {
                    return "Geocoder failed due to: " + status;
                }
            });
        }
    }       
    function createMarker(markerOptions) {
        var marker = new MarkerWithLabel(markerOptions);
        markers.push(marker);
        lat_longs.push(marker.getPosition());
        return marker;
    }
    function updateMarker(markerOptions,id) {
        var marker = new MarkerWithLabel(markerOptions);
        markers[id] = marker;
        lat_longs[id] = marker.getPosition();
        return marker;
    }       
    function fitMapToBounds() {
        var bounds = new google.maps.LatLngBounds();
        if (fitMap == 0){
            if (lat_longs.length>0) {
                for (var i=0; i<lat_longs.length; i++) {
                    bounds.extend(lat_longs[i]);
                }
                map.fitBounds(bounds);
                fitMap = 1;
            }
        }
    }

    function bindInfoWindow(marker, event, windowContent) {
        google.maps.event.addListener(marker, event, function() {
            infoWindow.setContent(windowContent);
            infoWindow.open(map, marker);
        });
    }       
    function loadScript() {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyDAT9KcSpQ7RNfg5iQHsivb4-72lNLanH0&sensor=false&callback=initialize";
        document.body.appendChild(script);
    }

    $(document).ready(function() {
        initialize();
    });

</script>
</head>
<body>
<div id="map_canvas" style="height:400px; border:1px 00f solid;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:50:09.733

我只会在单击标记时对点进行反向地理编码，并在从地理编码器返回数据时将其附加到信息窗口。像这样的东西：

```
function bindInfoWindow(marker, event, windowContent) {
    google.maps.event.addListener(marker, event, function() {
      infoWindow.setContent(windowContent);
      geocoder.geocode({latLng: marker.getPosition()}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {
          infoWindow.setContent(infoWindow.getContent()+"<br>"+results[1].formatted_address+"<br>status="+status);
          infoWindow.open(map, marker);
        }
      } else {
        infoWindow.setContent(infoWindow.getContent()+"<br>revere geocode failed:"+status);
    infoWindow.open(map, marker);
      }
    });                       
  });
} 
```

[工作示例](http://www.geocodezip.com/v3_SO_geocode2infowindowA.html)

您可以通过存储反向地理编码的结果来提高效率，如果之前单击过该点，则不再对该点进行反向地理编码，[就像这样](http://www.geocodezip.com/v3_SO_geocode2infowindowB.html)。

# c# - Foreach 菜单条中的每个子项

> ID：15380730
> 
> 赞同：6
> 
> 时间：2013-03-13T08:56:36.510
> 
> 标签：c#, visual-studio, foreach, menustrip

我想得到我所有的`SubItems`，`MenuStrip`所以我可以一次改变它们。

我正在尝试以下方法，但它们不起作用：

```
foreach (ToolStripMenuItem toolItem in menuStrip1.DropDownItems)
{
      //Do something with toolItem here
} 
```

有人可以帮我编写一个好的代码`foreach loop`来获得所有`SubMenuItems(DropDownItems)`的东西`MenuStrip`吗？

编辑现在尝试使用以下内容`Recursive method`：

```
private void SetToolStripItems(ToolStripItemCollection dropDownItems)
        {
            try
            {
                foreach (object obj in dropDownItems)
                {
                    if (obj.GetType().Equals(typeof(ToolStripMenuItem)))
                    {
                        ToolStripMenuItem subMenu = (ToolStripMenuItem)obj;

                        if (subMenu.HasDropDownItems)
                        {
                            SetToolStripItems(subMenu.DropDownItems);
                        }
                        else
                        {

                        }
                    }
                }
            }
            catch
            {

            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T09:58:06.773

尝试这个：

```
List<ToolStripMenuItem> allItems = new List<ToolStripMenuItem>();
foreach (ToolStripMenuItem toolItem in menuStrip.Items) 
{
    allItems.Add(toolItem);
    //add sub items
    allItems.AddRange(GetItems(toolItem));
}  
private IEnumerable<ToolStripMenuItem> GetItems(ToolStripMenuItem item) 
{
    foreach (ToolStripMenuItem dropDownItem in item.DropDownItems) 
    {
        if (dropDownItem.HasDropDownItems) 
        {
            foreach (ToolStripMenuItem subItem in GetItems(dropDownItem))
                yield return subItem;
        }
        yield return dropDownItem;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-08T21:04:36.380

修改淡水河谷的答案。分隔符不会使这个版本崩溃，它们也会被返回（menuStripItems 是 ToolStripItemCollection。即：this.MainMenuStrip.Items）：

```
 /// <summary>
    /// Recursively get SubMenu Items. Includes Separators.
    /// </summary>
    /// <param name="item"></param>
    /// <returns></returns>
    private IEnumerable<ToolStripItem> GetItems(ToolStripItem item)
    {
        if (item is ToolStripMenuItem)
        {
            foreach (ToolStripItem tsi in (item as ToolStripMenuItem).DropDownItems)
            {
                if (tsi is ToolStripMenuItem)
                {
                    if ((tsi as ToolStripMenuItem).HasDropDownItems)
                    {
                        foreach (ToolStripItem subItem in GetItems((tsi as ToolStripMenuItem)))
                            yield return subItem;
                    }
                    yield return (tsi as ToolStripMenuItem);
                }
                else if (tsi is ToolStripSeparator)
                {
                    yield return (tsi as ToolStripSeparator);
                }
            }
        }
        else if (item is ToolStripSeparator)
        {
            yield return (item as ToolStripSeparator);
        }
    } 
```

填充列表：

```
 List<ToolStripItem> allItems = new List<ToolStripItem>();
    foreach (ToolStripItem toolItem in menuStripItems)
    {
       allItems.Add(toolItem);
       //add sub items
       allItems.AddRange(GetItems(toolItem));
    } 
```

循环列表：

```
 foreach(ToolStripItem toolItem in allItems)
     {
          if(toolItem is ToolStripMenuItem)
          { 
             ToolStripMenuItem tsmi = (toolItem as ToolStripMenuItem);
             //Do something with it
          }
          else if(toolItem is ToolStripSeparator)
          {
             ToolStripSeparator tss = (toolItem as ToolStripSeparator);
             //Do something with it
          }
     } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T09:21:54.333

看来你不能用直接的“foreach”方法来做到这一点。我想我想通了。

```
List<ToolStripMenuItem> l = new List<ToolStripMenuItem> { };
        l.Add(menuItem1);
        l.Add(menuItem2);

        foreach (ToolStripMenuItem m in l)
        {
            m.Text = "YourTextHere";
        } 
```

手动将菜单项添加到列表中有点野蛮，但使用“foreach”或“for”或其他循环给了我同样的错误。关于枚举的东西。似乎他们无法自己计算所有菜单项：P 另一方面，如果您有分隔符和其他东西之类的项目，那不太像一个简单的菜单项，将它们全部放在一个列表中并尝试重命名会提出另一个问题。

这是用于更改菜单项上显示的文本，但您可以使用此方法对它们进行任何您想要的操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:08:36.977

你实际上弄错了类型，`DropDownItems`包含一个集合而`ToolStripItem` **不是**一个集合`ToolStripMenuItem`。

试试这个：

```
foreach (ToolStripItem toolItem in menuStrip1.DropDownItems)
{
    //do your stuff
} 
```

或者在你的函数中：

```
private void SetToolStripItems(ToolStripItemCollection dropDownItems)
{
    foreach (ToolStripItem item in dropDownItems)
    {
        if (item.HasDropDownItems)
        {
            SetToolStripItems(item.DropDownItems);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-16T18:29:29.477

对于 .net 4.5 及更高版本，我使用它来获取特定工具条菜单项的下拉项。

```
foreach (var genreDropDownItem in this.toolStripMenuItem_AddNewShowGenre.DropDownItems)
    {
        if (genreDropDownItem is ToolStripMenuItem) //not a ToolStripSeparator
        {
            ToolStripDropDownItem genreItem = (genreDropDownItem as ToolStripDropDownItem);

            genreItem.Click += toolStripMenuItem_Genre_Click; //add the same click eventhandler to all dropdownitems of parent item this.toolStripMenuItem_AddNewShowGenre
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-05T11:23:41.373

下面是一个获取所有`ToolStripMenuItem`s 的扩展类。这里的优点是所有代码都在一个递归方法中。如果需要其他菜单项类型，可以轻松地将其转换为通用方法。

```
public static class ToolStripItemCollectionExt
{
    /// <summary>
    /// Recusively retrieves all menu items from the input collection
    /// </summary>
    public static IEnumerable<ToolStripMenuItem> GetAllMenuItems(this ToolStripItemCollection items)
    {
        var allItems = new List<ToolStripMenuItem>();
        foreach (var item in items.OfType<ToolStripMenuItem>())
        {
            allItems.Add(item);
            allItems.AddRange(GetAllMenuItems(item.DropDownItems));
        }
        return allItems;
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-13T09:05:52.237

请注意，“不工作”是一个非常低效的描述。您应该发布错误消息或行为。

```
foreach(var item in menuStrip1.Items)
{
 // do something with item... maybe recursively   
} 
```

[这里](http://www.codeproject.com/Tips/377155/Iterating-through-menustrip-items)有一个很好的解释

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-08-28T07:54:40.297

这是一个非常简单的解决方案

```
foreach (Control Maincontralls in MDIParent1.ActiveForm.Controls) //start it from the form - in this example i started with MDI form
{
    if (Maincontralls.GetType() == typeof(MenuStrip)) // focus only for menu strip
    {
        MenuStrip ms = (MenuStrip)Maincontralls; //convert controller to the menue strip contraller type to access its unique properties

        foreach (ToolStripMenuItem subitem in ms.Items ) // access each items
        {

            if (subitem.Name == "loginToolStripMenuItem") subitem.Text = "Change text in loginToolStripMenuItem";
            //focus controller by its name and access its properties or whatever you wants
        }
        break; //break out the loop of controller of the form coz u don't need to go through other controllers
    }

} 
```

# c# - 在 DataTable 单元格中显示时更改 C# String 的颜色

> ID：15380731
> 
> 赞同：0
> 
> 时间：2013-03-13T08:56:45.267
> 
> 标签：c#, string, winforms

我在 C# windows 窗体应用程序中工作，我想更改我在网格中显示的字符串的颜色。

```
//dtRList is a DataTable  
dtRList.Rows.Add(something + "This should be red"); 
```

基本上我需要更改我在此处附加的字符串的颜色。像这样的东西，

```
String str = "This should be red"; 
```

现在将 str 的颜色更改为红色和

```
dtReconList.Rows.Add(something + str); 
```

我认为这是不可能的，可能我将不得不去寻找标签或其他东西。任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:23:19.867

`DataTable`与 UI 无关。它不是一个控件。它只是一个数据持有者。如果您询问`DataGridView`控制或其他**显示**数据的方式，问题将是有意义的。但是字符串是一个字符序列。字符串包含文本，仅此而已。字符串不知道您将如何使用它（例如显示字符串）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T09:14:08.357

您不能更改为字符串的颜色。因为它一开始就没有颜色，所以正如您所说，您想要的是更改代表您的字符串值的组件的颜色。

一个快速的代码给你一个大致的想法，这里是你如何设置颜色的`DataGridViewCell`

```
DataGridViewCellStyle style = new DataGridViewCellStyle();
style.ForeColor = Color.Red;

dgVenta.Rows[0].Cells[0].Style = style; 
```

当然，您需要设置您想要的单元格的样式，而不一定是第一个单元格。这取决于你。请记住，如果您更改的行被选中，它可能不会反映您设置的颜色，以解决该`SelectionForeColor`属性的外观。

当然，您可以尽一切可能更改您需要的所有内容并执行任何条件逻辑，例如，如果值为正或负，则使用绿色或红色。

# php - 使用 PHP 将数组附加到 csv 行

> ID：15380734
> 
> 赞同：-1
> 
> 时间：2013-03-13T08:57:04.257
> 
> 标签：php, arrays, csv

我有一个函数用来从我的博客中抓取缩略图列表。

```
function scrapeThumbs($title,$link){

    $html = file_get_html($link);

        $arrayImg= array();

        foreach($html->find('.ad-thumb-list') as $item1)
        {

            foreach($item1->find('a') as $image)
            $imgP= $image->href;
            array_push($arrayImg, $imgP);

        }

        //write on csv file
        $fp = fopen('products.csv', 'a') or die("Can't open file");

        $list =array(array ($title,$arrayImg));

        foreach ($list as $fields) {
            fputcsv($fp, $fields);
        }

        fclose($fp);

        // clean up memory
        $html->clear();
        unset($html);

} 
```

当生成 csv 文件时，我确实有我想要的标题。但不是有一个带有缩略图网址的数组 - 在 csv 我有“数组”。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:00:20.780

你`$list`是一个多维数组；

尝试这样的事情：`fputcsv($fp, $fields[0]);`，请参见下面的代码。

$list =array(array ($title,$arrayImg));

```
 foreach ($list as $fields) {
        fputcsv($fp, $fields[0]);
    } 
```

查看数组的结构使用`print_r($list);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:12:59.170

您没有`$list`在正确的格式中创建。`$arrayImg`已经是一个数组，所以正确的格式是这样的：

```
$list =array(array($title),$arrayImg); 
```

# c - 由于我是嵌入式编程的新手，我无法理解什么是 "%s\xC2\xB0" ？我知道 %s 用于字符串

> ID：15380738
> 
> 赞同：1
> 
> 时间：2013-03-13T08:57:15.460
> 
> 标签：c, embedded, embedded-fonts

```
(void)sprintf(Thermo_Buff,"%s\xC2\xB0""",a); //to add to buffer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:01:07.673

在字符串文字中，反斜杠`\`用作特殊字符的前缀。例如，我确定您知道换行符 ( `"\n"`)。

如果反斜杠后面的特殊字符是an，`x`则表示接下来的两个字符是十六进制数字，而这两个数字被编译器翻译成一个字符。

在您的示例中，该`sprintf`调用添加了一个字符串，然后添加了两个基于十六进制数字的单独字符`0xc2`和`0xb0`，这是度字符的 UTF-8（例如，请参见[this reference](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=176&htmlent=1)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:00:44.317

这是一个度数符号，编码为 UTF-8 unicode。

[您可以在此处](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=128&number=128&utf8=string-literal&unicodeinhtml=hex)查看更完整的字符列表以及它们在 UTF-8 中的样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:01:16.093

在 C 中，`\x???`字符串文字中的格式（其中`???`是数字）是*Unicode 转义*。它是一种输入 Unicode 字符的方法，无法用键盘输入。在这种情况下，如果您查看[此表](http://www.utf8-chartable.de/)，您将看到转义序列`c2 b0`（`\xC2\xB0`在您的代码中编写的编码一个**度数符号**- 这就是它的意思。

# javascript - Adobe Edge Commons Javascript 错误

> ID：15380739
> 
> 赞同：2
> 
> 时间：2013-03-13T08:57:17.097
> 
> 标签：javascript, adobe-edge

我正在使用来自 Adob​​e Edge Commons 示例 MixitBaby 的以下代码参考，但我在 Chrome 和 IE10 上不断收到此错误，但这在 Firefox 上运行良好。

“未捕获的 ReferenceError：EC 未定义”

```
function soundSetup()
{
    var assetsPath = "sound/";
    EC.Sound.setup(
         [
              {src: assetsPath + "introsound.mp3|" + assetsPath + "introsound.ogg", id: "intro"}
         ],
         function(){ EC.info("Sound setup finished", "DEMO"); }
    );
}

yepnope({
    load: "js/EdgeCommons-0.7.1.min.js",
    complete: function() 
    {
        if(EC == undefined)
            yepnope({load: "js/EdgeCommons-0.7.1.min.js", complete: soundSetup});
        else
            soundSetup();
    } //complete
}); 
```

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T20:05:24.973

您是否在本地网络服务器环境（XAMPP、MAMPP、Apache...）中测试此场景？否则，在从不同文件夹加载外部资产时，您可能会遇到沙盒安全错误。是的：子文件夹有不同的沙箱。

而且您绝对不必两次加载 Edge Commons。我的网站 www.edgecommons.org 中的示例脚本应该可以在 Chrome 和 IE10 中运行。如果您仍然遇到问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T11:16:15.967

如果您在本地工作，则应下载文件并将其包含在本地。我认为加载文件存在一些问题（当您将一些 js 文件存储在本地和一些在线时）。

# java - 递归技术

> ID：15380743
> 
> 赞同：0
> 
> 时间：2013-03-13T08:57:19.557
> 
> 标签：java, recursion

我试图让一种方法使用递归，我的方法如下：

```
public int recursion(int start) {

if(start >= 1)
    recursion(start-1);

return start;

} 
```

但是，我收到一条错误消息，告诉我找不到“递归”方法。有什么建议么？:)

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T09:00:13.880

您的代码的唯一问题是您无法返回`recursion(start - 1)`. 即使这样，这也是一个逻辑问题，而不是编译错误。

以下编译对我来说很好：

```
public int recursion(int start) {
    if (start >= 1)
        return recursion(start - 1);
    return start;

} 
```

因此问题出在其他地方。

如果您遇到您描述的错误，则可能是您`recursion()`在尝试调用它时拼写错误，或者您已在一个类中定义它但试图在另一个类的上下文中调用它。

**编辑**这是您评论中的代码：

```
public class recursion1 {
    public int rec1(int start) {
        if (start >= 1)
            return recl(start - 1);
        return start;
    }

    public static void main(String[] args) {
        recursion1 test = new recursion1();
        System.out.println(test.recl(5));
    }
} 
```

该方法称为“rec1”（rec- *one*），您将其称为“recl”（rec- *ell*）。

# c# - Nadio .net 使用 MP3

> ID：15380745
> 
> 赞同：0
> 
> 时间：2013-03-13T08:57:28.963
> 
> 标签：c#, .net

如何使用 Naudio 播放嵌入式资源？因为这个库中包含的方法接受文件的字符串路径......而且由于我是一个新手，我无法编辑这些方法，我想知道是否有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:15:39.203

`Mp3FileReader`有一个构造函数，它接受你应该能够使用的流。流确实需要可搜索。

# iphone - 如何避免使用 xcode 下载应用程序数据

> ID：15380747
> 
> 赞同：3
> 
> 时间：2013-03-13T08:57:35.550
> 
> 标签：iphone, ios, objective-c, xcode, macos

我开发了一个 iPad 应用程序，可以在应用程序的 Document 和 Cache 文件夹中保存用户日期。缓存文件夹中的数据高度敏感。我的问题是保护用户数据。我注意到的一件事是任何人都可以将 iPad 插入 Mac 并使用 XCode 下载包含 Document 文件夹和 Cache 文件夹的 .xcappdata 文件。有什么办法可以阻止这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:31:46.367

你甚至不需要 XCode。您可以使用 iFunBox 之类的软件来访问应用程序的 Document 文件夹。

我建议不要将您的应用程序转而使用 Web 服务，而是使用`NSKeyedArchiver`.

编码是这样完成的：

```
- (void)encodeWithCoder:(NSCoder *)coder 
```

解码：

```
- (id)initWithCoder:(NSCoder *)coder 
```

这样，您的 Documents 文件夹中就会有一个加密文件。我经常使用它，而且很容易实现。

您可以在这里阅读更多相关信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)

# sql - 加快这个过程

> ID：15380753
> 
> 赞同：0
> 
> 时间：2013-03-13T08:57:41.403
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我的表有超过 10 万条记录，并且已经存在适当的索引。这是我的存储过程，需要将近 1.2 秒，目前是不可接受的：

```
ALTER PROCEDURE [dbo].[GetNextAndPreviousInsturmentID]
(
    @AccountID      int,
    @JurisdictionID int,
    @InstrumentID   varchar(14),
    @PreviousInstrumentID   varchar(14) OUT,
    @NextInstrumentID   varchar(14) OUT,
    @PreviousDocumentID int OUT,
    @NextDocumentID int OUT,
    @ShowPublicPageForPreviousInstrumentID  bit OUT,
    @ShowPublicPageForNextInstrumentID  bit OUT
)
AS
BEGIN
    Declare @RowNum int = 0
    Declare @PreviousCreatedByAccountID         int = 0
    Declare @PreviousBelongsToJurisdictionID    int = 0
    Declare @NextCreatedByAccountID             int = 0
    Declare @NextBelongsToJurisdictionID        int = 0

    Select @RowNum = RowNum
    From
    (
        Select ROW_NUMBER() Over (Order by RecordingDateTime) as RowNum, InstrumentID
                From Documents Where RecordingDateTime IS NOT NULL
    ) v where v.InstrumentID = @InstrumentID

    ;With normal As
    (   
        Select  ROW_NUMBER() Over (Order by RecordingDateTime) as RowNum, 
                DocumentID, 
                CreatedByAccountID, 
                JurisdictionID,
                InstrumentID            
            From Documents  Where RecordingDateTime IS NOT NULL
    )
    SELECT
        @PreviousInstrumentID            = MAX(CASE RowNum WHEN @RowNum - 1 THEN InstrumentID       END),
        @PreviousDocumentID              = MAX(CASE RowNum WHEN @RowNum - 1 THEN DocumentID         END),
        @PreviousCreatedByAccountID      = MAX(CASE RowNum WHEN @RowNum - 1 THEN CreatedByAccountID END),
        @PreviousBelongsToJurisdictionID = MAX(CASE RowNum WHEN @RowNum - 1 THEN JurisdictionID     END),
        @NextInstrumentID                = MAX(CASE RowNum WHEN @RowNum + 1 THEN InstrumentID       END),
        @NextDocumentID                  = MAX(CASE RowNum WHEN @RowNum + 1 THEN DocumentID         END),
        @NextCreatedByAccountID          = MAX(CASE RowNum WHEN @RowNum + 1 THEN CreatedByAccountID END),
        @NextBelongsToJurisdictionID     = MAX(CASE RowNum WHEN @RowNum + 1 THEN JurisdictionID     END)
    FROM normal
    WHERE RowNum IN (@RowNum - 1, @RowNum + 1)

    if @JurisdictionID > 0 
    Begin
        If @NextBelongsToJurisdictionID = @JurisdictionID
        Begin
            Set @ShowPublicPageForNextInstrumentID = 0
        End
        Else
        Begin
            Set @ShowPublicPageForNextInstrumentID = 1
        End

        If @PreviousBelongsToJurisdictionID = @JurisdictionID
        Begin
            Set @ShowPublicPageForPreviousInstrumentID = 0
        End
        Else
        Begin
            Set @ShowPublicPageForPreviousInstrumentID = 1
        End

    End
    Else If @AccountID > 0
    Begin

        If @NextCreatedByAccountID = @AccountID
        Begin
            Set @ShowPublicPageForNextInstrumentID = 0
        End
        Else
        Begin
            Set @ShowPublicPageForNextInstrumentID = 1
        End

        If @PreviousCreatedByAccountID = @AccountID
        Begin
            Set @ShowPublicPageForPreviousInstrumentID = 0
        End
        Else
        Begin
            Set @ShowPublicPageForPreviousInstrumentID = 1
        End

    End
    Else
    Begin
        Set @ShowPublicPageForNextInstrumentID = 1
        Set @ShowPublicPageForPreviousInstrumentID = 1
    End

    Set @PreviousInstrumentID = IsNull(@PreviousInstrumentID,'')
    Set @NextInstrumentID = IsNull(@NextInstrumentID,'')
    Set @PreviousDocumentID = IsNull(@PreviousDocumentID,0)
    Set @NextDocumentID = IsNull(@NextDocumentID,0)
    Set @ShowPublicPageForPreviousInstrumentID = ISNULL(@ShowPublicPageForPreviousInstrumentID,0)
    Set @ShowPublicPageForNextInstrumentID = IsNull(@ShowPublicPageForNextInstrumentID,0)
END 
```

这是我的表定义以及索引：

```
CREATE TABLE [dbo].[Documents](
    [DocumentID] [int] IDENTITY(1000001,1) NOT NULL,
    [IGroupID] [int] NOT NULL,
    [ITypeID] [int] NOT NULL,
    [IDate] [smalldatetime] NOT NULL,
    [JudgementTypeID] [smallint] NULL,
    [JurisdictionID] [int] NOT NULL,
    [DocumentDate] [smalldatetime] NULL,
    [Remarks] [varchar](256) NULL,
    [UserID] [int] NOT NULL,
    [CreatedByAccountID] [int] NULL,
    [CreatedByJurisdictionID] [int] NULL,
    [InternalNotes] [varchar](250) NULL,
    [ParentDocumentID] [int] NULL,
    [DocumentStatusID] [tinyint] NULL,
    [FilingNumber] [int] NULL,
    [EfileDate] [datetime] NULL,
    [EfiledByUserID] [int] NULL,
    [ACEfileCreditCardID] [int] NULL,
    [ACEfileBankAccountID] [int] NULL,
    [StampData] [varchar](1024) NULL,
    [InstrumentID] [varchar](14) NULL,
    [ApprovedBy] [int] NULL,
    [RecordingDateTime] [datetime] NULL,
    [Receipt] [varchar](8000) NULL,
    [ReceiptNo] [varchar](50) NULL,
    [IsReEfiled] [bit] NOT NULL,
    [OldInstrumentID] [varchar](14) NULL,
    [LastStatusChangedDateTime] [datetime] NULL,
    [ImportedFromInstrumentID] [varchar](14) NULL,
    [IsChanged] [bit] NOT NULL,
    [IsUpdatedAfterChanged] [bit] NOT NULL,
 CONSTRAINT [PK_Documents] PRIMARY KEY CLUSTERED 
(
    [DocumentID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY],
 CONSTRAINT [UQ_Documents] UNIQUE NONCLUSTERED 
(
    [DocumentID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_ACEfileBankAccountID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_ACEfileBankAccountID] ON [dbo].[Documents]
(
    [ACEfileBankAccountID] ASC
)
INCLUDE (   [ApprovedBy],
    [JurisdictionID],
    [DocumentStatusID],
    [DocumentID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [StampData],
    [InstrumentID],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_ACEfileCreditCardID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_ACEfileCreditCardID] ON [dbo].[Documents]
(
    [ACEfileCreditCardID] ASC
)
INCLUDE (   [ACEfileBankAccountID],
    [ApprovedBy],
    [JurisdictionID],
    [DocumentStatusID],
    [DocumentID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [StampData],
    [InstrumentID],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_ApprovedBy]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_ApprovedBy] ON [dbo].[Documents]
(
    [ApprovedBy] ASC
)
INCLUDE (   [JurisdictionID],
    [DocumentStatusID],
    [DocumentID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [InstrumentID],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_CreatedByAccountID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_CreatedByAccountID] ON [dbo].[Documents]
(
    [CreatedByAccountID] ASC
)
INCLUDE (   [InstrumentID],
    [DocumentStatusID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_CreatedByJurisdictionID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_CreatedByJurisdictionID] ON [dbo].[Documents]
(
    [CreatedByJurisdictionID] ASC
)
INCLUDE (   [CreatedByAccountID],
    [InstrumentID],
    [DocumentStatusID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_DocumentDate]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_DocumentDate] ON [dbo].[Documents]
(
    [DocumentDate] ASC
)
INCLUDE (   [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [ApprovedBy],
    [JurisdictionID],
    [DocumentStatusID],
    [DocumentID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [Remarks],
    [UserID],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [StampData],
    [InstrumentID],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_DocumentStatusID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_DocumentStatusID] ON [dbo].[Documents]
(
    [DocumentStatusID] ASC
)
INCLUDE (   [DocumentID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [InstrumentID],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_EfileDate]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_EfileDate] ON [dbo].[Documents]
(
    [EfileDate] ASC
)
INCLUDE (   [UserID],
    [RecordingDateTime],
    [ApprovedBy],
    [ACEfileBankAccountID],
    [LastStatusChangedDateTime],
    [ACEfileCreditCardID],
    [EfiledByUserID],
    [ITypeID],
    [IGroupID],
    [InstrumentID],
    [OldInstrumentID],
    [CreatedByJurisdictionID],
    [CreatedByAccountID],
    [DocumentStatusID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [StampData],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_EfiledByUserID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_EfiledByUserID] ON [dbo].[Documents]
(
    [EfiledByUserID] ASC
)
INCLUDE (   [ITypeID],
    [IGroupID],
    [InstrumentID],
    [OldInstrumentID],
    [CreatedByJurisdictionID],
    [CreatedByAccountID],
    [DocumentStatusID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

/****** Object:  Index [IX_FilingNumber]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_FilingNumber] ON [dbo].[Documents]
(
    [FilingNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_IDate]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_IDate] ON [dbo].[Documents]
(
    [IDate] ASC
)
INCLUDE (   [EfileDate],
    [UserID],
    [RecordingDateTime],
    [ApprovedBy],
    [ACEfileBankAccountID],
    [LastStatusChangedDateTime],
    [ACEfileCreditCardID],
    [EfiledByUserID],
    [ITypeID],
    [IGroupID],
    [InstrumentID],
    [OldInstrumentID],
    [CreatedByJurisdictionID],
    [CreatedByAccountID],
    [DocumentStatusID],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [StampData],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_IGroupID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_IGroupID] ON [dbo].[Documents]
(
    [IGroupID] ASC
)
INCLUDE (   [UserID],
    [DocumentDate],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [ApprovedBy],
    [JurisdictionID],
    [DocumentStatusID],
    [DocumentID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [Remarks],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [StampData],
    [InstrumentID],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_ImportedFromInstrumentID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_ImportedFromInstrumentID] ON [dbo].[Documents]
(
    [ImportedFromInstrumentID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_InstrumentID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_InstrumentID] ON [dbo].[Documents]
(
    [InstrumentID] ASC
)
INCLUDE (   [OldInstrumentID],
    [CreatedByJurisdictionID],
    [CreatedByAccountID],
    [DocumentStatusID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_ITypeID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_ITypeID] ON [dbo].[Documents]
(
    [ITypeID] ASC
)
INCLUDE (   [IGroupID],
    [UserID],
    [DocumentDate],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [ApprovedBy],
    [JurisdictionID],
    [DocumentStatusID],
    [DocumentID],
    [IDate],
    [JudgementTypeID],
    [Remarks],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [StampData],
    [InstrumentID],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_JurisdictionID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_JurisdictionID] ON [dbo].[Documents]
(
    [JurisdictionID] ASC
)
INCLUDE (   [DocumentStatusID],
    [DocumentID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [InstrumentID],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_LastStatusChangedDateTime]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_LastStatusChangedDateTime] ON [dbo].[Documents]
(
    [LastStatusChangedDateTime] ASC
)
INCLUDE (   [ACEfileBankAccountID],
    [ACEfileCreditCardID],
    [EfiledByUserID],
    [ITypeID],
    [IGroupID],
    [InstrumentID],
    [OldInstrumentID],
    [CreatedByJurisdictionID],
    [CreatedByAccountID],
    [DocumentStatusID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [StampData],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_OldInstrumentID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_OldInstrumentID] ON [dbo].[Documents]
(
    [OldInstrumentID] ASC
)
INCLUDE (   [CreatedByJurisdictionID],
    [CreatedByAccountID],
    [InstrumentID],
    [DocumentStatusID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [StampData],
    [ApprovedBy],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

/****** Object:  Index [IX_ParentDocumentID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_ParentDocumentID] ON [dbo].[Documents]
(
    [ParentDocumentID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_RecordingDateTime]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_RecordingDateTime] ON [dbo].[Documents]
(
    [RecordingDateTime] ASC
)
INCLUDE (   [ApprovedBy],
    [ACEfileBankAccountID],
    [LastStatusChangedDateTime],
    [ACEfileCreditCardID],
    [EfiledByUserID],
    [ITypeID],
    [IGroupID],
    [InstrumentID],
    [OldInstrumentID],
    [CreatedByJurisdictionID],
    [CreatedByAccountID],
    [DocumentStatusID],
    [IDate],
    [JudgementTypeID],
    [JurisdictionID],
    [DocumentDate],
    [Remarks],
    [UserID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [StampData],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO

SET ANSI_PADDING ON

GO

/****** Object:  Index [IX_UserID]    Script Date: 3/13/2013 5:17:53 AM ******/
CREATE NONCLUSTERED INDEX [IX_UserID] ON [dbo].[Documents]
(
    [UserID] ASC
)
INCLUDE (   [DocumentDate],
    [ACEfileCreditCardID],
    [ACEfileBankAccountID],
    [ApprovedBy],
    [JurisdictionID],
    [DocumentStatusID],
    [DocumentID],
    [IGroupID],
    [ITypeID],
    [IDate],
    [JudgementTypeID],
    [Remarks],
    [CreatedByAccountID],
    [CreatedByJurisdictionID],
    [InternalNotes],
    [ParentDocumentID],
    [FilingNumber],
    [EfileDate],
    [EfiledByUserID],
    [StampData],
    [InstrumentID],
    [RecordingDateTime],
    [Receipt],
    [ReceiptNo],
    [IsReEfiled],
    [OldInstrumentID],
    [LastStatusChangedDateTime],
    [ImportedFromInstrumentID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
GO 
```

有什么办法可以加快这个查询？基本上我正在尝试获取下一个和上一个。所以如果我传入一些仪器 ID，我会尝试找到它的上一个和下一个记录。

这是我的滞后/领先查询（新功能 - 性能缓慢 :()

```
;With normal As
    (   
        Select  Top 100 Percent
                InstrumentID, 
                Lead(d.InstrumentID) Over (Order By RecordingDateTime) as LeadInstrumentID, 
                Lag(d.InstrumentID) Over (Order By RecordingDateTime) as LagInstrumentID,
                DocumentID,
                Lead(d.DocumentID) Over (Order By RecordingDateTime) as LeadDocumentID, 
                Lag(d.DocumentID) Over (Order By RecordingDateTime) as LagDocumentID, 
                CreatedByAccountID,
                Lead(d.CreatedByAccountID) Over (Order By RecordingDateTime) as LeadCreatedByAccountID, 
                Lag(d.CreatedByAccountID) Over (Order By RecordingDateTime) as LagCreatedByAccountID, 
                JurisdictionID,
                Lead(d.JurisdictionID) Over (Order By RecordingDateTime) as LeadJurisdictionID, 
                Lag(d.JurisdictionID) Over (Order By RecordingDateTime) as LagJurisdictionID

        From Documents d Where RecordingDateTime IS NOT NULL
            Order by RecordingDateTime
    )
    SELECT
        @PreviousInstrumentID            = LagInstrumentID,
        @PreviousDocumentID              = LagDocumentID,
        @PreviousCreatedByAccountID      = LagCreatedByAccountID,
        @PreviousBelongsToJurisdictionID = LagJurisdictionID,
        @NextInstrumentID                = LeadInstrumentID,
        @NextDocumentID                  = LeadDocumentID,
        @NextCreatedByAccountID          = LeadCreatedByAccountID,
        @NextBelongsToJurisdictionID     = LeadJurisdictionID
    FROM normal n
        Where n.InstrumentID = @InstrumentID 
```

现在我已经有一个关于 InstrumentID 的索引，但是这个查询比我之前在 SSMS 中花费 2 秒的查询更糟糕。

这就是我最终得到的 - 3个单独的查询：

```
Declare @RecordingDateTime  datetime

    Select @RecordingDateTime = RecordingDateTime
        From Documents d Where d.InstrumentID = @InstrumentID

    Select  Top 1   @PreviousInstrumentID          =  InstrumentID ,
                    @PreviousDocumentID            = DocumentID  ,
                    @PreviousCreatedByAccountID    =  CreatedByAccountID,
                    @PreviousBelongsToJurisdictionID = JurisdictionID 
        From Documents d 
            Where d.RecordingDateTime < @RecordingDateTime
                Order By d.RecordingDateTime Desc

    Select  Top 1   @NextInstrumentID          =  InstrumentID ,
                    @NextDocumentID            = DocumentID  ,
                    @NextCreatedByAccountID    =  CreatedByAccountID,
                    @NextBelongsToJurisdictionID = JurisdictionID 
        From Documents d 
            Where d.RecordingDateTime > @RecordingDateTime
                Order By d.RecordingDateTime 
```

此查询的持续时间`25`与 SQL 探查器中的说明相同

# ruby-on-rails - Rails 3：无法为遗留代码添加正确的路由

> ID：15380755
> 
> 赞同：1
> 
> 时间：2013-03-13T08:57:49.997
> 
> 标签：ruby-on-rails, routes, erb, legacy-code

相信你能帮到我。

我正在尝试向遗留代码（错字）添加新功能。但似乎路由有一些问题。

在项目中路由是通过以下方式生成的：

```
%w{advanced cache categories comments content profiles feedback general pages
resources sidebar textfilters themes trackbacks users settings tags redirects seo post_types }.each do |i|
match "/admin/#{i}", :to => "admin/#{i}#index", :format => false
match "/admin/#{i}(/:action(/:id))", :to => "admin/#{i}", :action => nil, :id => nil, :format => false
end 
```

我的功能是关于合并文章。为此，我在**/admin/content**控制器中添加了新操作：

```
def merge
#some code here
end 
```

我添加的一部分视图（_form.html.erb）：

```
 <% if current_user.admin? and !@article.id.nil?%>
    <div class=''>  
      <h4><%= _("Merge Articles") %></h4>
      <%= label_tag :merge_with, 'Article ID' %><%= text_field_tag :merge_with, nil, :size => 20 %>
      <%= button_to 'Merge', admin_content_merge_path(:id => @article.id) %>
    </div>
  <%end%> 
```

此部分由另一个部分 (_edit.html.erb) 呈现

```
<%= form_tag(form_action, :id => "#{form_type}_form", :enctype => "multipart/form-data", :class => className) do %>

  <%= render :partial => "form" %>

<% end %> 
```

最后 _edit.html.erb 由视图 new.html.erb 渲染

```
<%= render "admin/shared/edit", { :form_type => "article", :form_action => { :action => "new", :id => @article.id , :class => ('autosave')} } %> 
```

问题是如何为上面的控制器操作编写正确的路由，这将允许我呈现包含新合并文章的编辑页面。我写：

```
 match "/admin/content/merge/:id" => "admin/content#merge",:as => 'admin/content/merge' 
```

**耙路线**输出：

```
admin_content_merge        /admin/content/merge/:id(.:format) {:controller=>"admin/content", :action=>"merge"} 
```

但正如我所见，正在调用新的或编辑操作。

显然，我的路线是错误的，不是吗？

你能帮我解决这个问题吗？

提前致谢！

**更新**

最新的**new.html.erb**：

```
<% @page_heading = _('New article') %>

<%= render "admin/shared/edit", { :form_type => "article", :form_action => { :action => "new", :id => @article.id , :class => ('autosave')} } %>
<% if current_user.admin? and !@article.id.nil?%>
<%= form_tag "/admin/content/merge/#{@article.id}" do %>
  <h4><%= _("Merge Articles") %></h4>
  <%= label_tag :merge_with, 'Article ID' %>:
  <%= text_field_tag :merge_with %><br />
  <%= submit_tag "Merge" %>
<% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:17:18.393

阅读课程中的提示：

***提示：嵌套在 HTML 中无效。***

这意味着您不能嵌套表单标签，不要将表单标签放在另一个表单标签中，您的嵌套表单将无法执行正确的操作。

由于您必须将代码放在页面末尾，因此请尝试查看如何将合并表单标签放在主编辑文章表单标签下方。所以基本上你可以找到大表单标签的结束位置并将其放在它的下方。

试试看你能不能弄明白，如果不能，不要犹豫，问:)

顺便提一句。我想每个人都有这个问题

# opengl - Opengl上一个对象消失

> ID：15380761
> 
> 赞同：1
> 
> 时间：2013-03-13T08:58:15.987
> 
> 标签：opengl, opengl-es

当我创建 2 个或更多 TestLine 类实例并将其添加到渲染类中时，仅渲染最后一个。先前的对象不会渲染或消失

测试线类：

```
void update(){
    glEnableClientState(GL_VERTEX_ARRAY);
    glBindBuffer(GL_VERTEX_ARRAY, xbo);
    glVertexPointer(2, GL_FLOAT, 0, 0);

    glDrawArrays(GL_LINES, 0, verts.size());
    glDisableClientState(GL_VERTEX_ARRAY);
}

void set(float x, float y, float x2, float y2){
    verts.push_back(x);
    verts.push_back(y);
    verts.push_back(x2);
    verts.push_back(y2);

   glGenBuffers(1, &xbo);
   glBindBuffer(GL_ARRAY_BUFFER, xbo);
   glBufferData(GL_ARRAY_BUFFER, verts.size() * sizeof(GLfloat), &verts[0], GL_STATIC_DRAW);
} 
```

渲染类中的函数

```
void draw(){
    int size = lines.size();
    for(int i = 0; i < size; i++)
        lines[i]->update();
}
void add(TestLine* d){
    lines.push_back(d);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:31:48.850

```
glBindBuffer(GL_VERTEX_ARRAY, xbo); 
```

`GL_VERTEX_ARRAY`不是 的有效参数[`glBindBuffer()`](http://www.opengl.org/sdk/docs/man2/xhtml/glBindBuffer.xml)：

> `target`: 指定缓冲区对象绑定的目标。符号常数**必须是** `GL_ARRAY_BUFFER`、`GL_ELEMENT_ARRAY_BUFFER`、`GL_PIXEL_PACK_BUFFER`或`GL_PIXEL_UNPACK_BUFFER`。

`GL_ARRAY_BUFFER`在您的其他调用中使用like。

* * *

```
glDrawArrays(GL_LINES, 0, verts.size()); 
```

`set()`只指定*两个*顶点，而不是四个。如果`verts`包含某种多浮点数`struct`（例如：）`struct Vertex { float x, y; };`而不是 raw `float`s，这将起作用。

试试这个：

```
glDrawArrays(GL_LINES, 0, verts.size() / 2); 
```

# php - 如何访问 JQuery 中的 php 数据？

> ID：15380768
> 
> 赞同：1
> 
> 时间：2013-03-13T08:58:25.993
> 
> 标签：php, jquery

在下面的 PHP 代码中，我想从我的 jQuery 脚本访问存储在我的 $val 变量中的值，以便能够发送一个 ajax 调用。对于每个表行，$val 将包含唯一值，我需要访问唯一值才能发送到我的发布请求。

```
 <?php 
                if($batch_query != null){
                  $i = 0;  
                  foreach($batch_query->result_array() as $row){
                    $val = "'".$row['course_id'].",".$row['center_id'].",".$row['batch_id']."'";//These values are coming from the server side and I need to send it to the controller for the Ajax. 
                    echo "<tr>";
                      echo "<td>".$row['course_name']."</td>";
                      echo "<td>".$row['center_name']."</td>";
                      echo "<td>".$row['batch_name']."</td>";
                      echo "<td>"."<button id= \"btnnumber_$i\"  class='btn info toggler' value=$val>Show Info  <i class='icon-arrow-down'></i></button>"."</td>";// here I am using the value attribute and assigning it the value $val.
                  }
                 } 
                   ?> 
```

这是我的 jQuery

```
 $(function(){
          $.post('/path /to/ my /controller', {value: $val}).done(function(data){ 

        }); 
       });

        How to get those values in the $val ? 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T09:04:03.273

jquery中更好的方法是..

```
$(function(){ 
  var btnvalue=$('button.info').attr('value');
   $.post('/path /to/ my /controller', {value: btnvalue}).done(function(data){ 

    }); 
}); 
```

最简单的（如果你有单独的 .js 文件，这是不可能的）......

```
var btnvalue= <?php echo $val ?>
 $.post('/path /to/ my /controller', {value: btnvalue}).done(function(data){ 

    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:18:42.460

我会更改按钮，以便将其`$val`放入数据属性中，如下所示：

```
"<button id=\"btnnumber_" + $i +"\"  class=\"btn info toggler\" data-value=\"" + $val + "\">Show Info  <i class=\"icon-arrow-down\"></i></button>" 
```

然后我会将您的 jquery 更改为类似

```
$('button').click(function() {
  $.post('/path /to/ my /controller', 
     {value: $(this).data('value')}).done(function(data){ 

  }); 
}); 
```

这是按钮单击获取数据值属性的小提琴示例：http: [//jsfiddle.net/T7cJR/](http://jsfiddle.net/T7cJR/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:00:59.013

将它们作为 javascript 变量写在页面上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:04:23.037

如果您的 jquery 在同一页面中，则可以使用以下内容。

```
 $(function(){
        $.post('/path /to/ my /controller', 
         {value: <?php echo   $val?>}).done(function(data){ 

     }); 
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T09:04:29.183

像这样使用它：`<?php echo $val; ?>`

```
$.post('/path /to/ my /controller', {value: <?php echo $val; ?>}).done(function(data){ 
```

您需要在此行之前为该变量赋值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T09:05:15.883

编写代码以获取 $var 变量中的所有值。然后在脚本标签内的页面末尾，写下这个

```
$(function(){
          $.post('/path /to/ my /controller', {value: <?php echo $val ?>}).done(function(data){ 

          }); 
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-13T09:09:46.147

您可以将数据保存为 tr 属性，然后使用 jquery 访问它：

```
<?php 
 if($batch_query != null){
    $i = 0;  
    foreach($batch_query->result_array() as $row){
       $val = "'".$row['course_id'].",".$row['center_id'].",".$row['batch_id']."'";//These values are coming from the server side and I need to send it to the controller for the Ajax. 
       echo "<tr id='".$val."'>";
        ... 
```

# c# - 乘以 lambda 表达式的值

> ID：15380769
> 
> 赞同：1
> 
> 时间：2013-03-13T08:58:27.533
> 
> 标签：c#, asp.net-mvc, razor, lambda

我试图从这个表达式（ProductPrice * x）中倍增值：

```
@Html.DisplayFor(model => model.ProductPrice) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:04:08.027

最干净的方法是在模型中拥有另一个属性，例如`TotalPrice`：

```
public decimal TotalPrice { get { return ProductPrice * x; } } 
```

然后做：

```
@Html.DisplayFor(model => model.TotalPrice) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:08:16.300

```
@Html.DisplayFor(model => (model.ProductPrice * x)) 
```

# c# - 忽略 ASP.NET MVC 中的路由

> ID：15380770
> 
> 赞同：13
> 
> 时间：2013-03-13T08:58:35.563
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我刚刚学习在[ASP.NET MVC](http://en.wikipedia.org/wiki/ASP.NET_MVC_Framework)中使用路由，并试图了解 IgnoreRoute 方法。

我试图阻止用户访问`"Content/{filename}.html"`. 我已将此作为我的 RegisterRoutes 方法中的第一个调用。这是我的代码：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("Content/{filename}.html");
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute("MyRoute", "{controller}/{action}/{id}/{*catchall}",
                    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                    new { controller = "^.*", action = "^Index$|^About$" },
                    new[] { "UrlsAndRoutes.AditionalControllers" });
    routes.MapRoute("MyRoute2", "{controller}/{action}/{id}/{*catchall}",
                   new { controller = "Home", action = "Index", id = UrlParameter.Optional },
                    new { controller = "^.*", action = "^Index$|^About$" },
                   new[] { "UrlsAndRoutes.Controllers" });
    routes.MapRoute("ShopSchema2", "Shop/OldAction", new { controller = "Home", action = "Index" });
    routes.MapRoute("ShopSchema", "Shop/{action}", new { controller = "Home" });
    routes.MapRoute("", "X{controller}/{action}");

    routes.MapRoute(
       name: "",
       url: "{controller}/{action}",
       defaults: new { controller = "Home", action = "Index" }
   );
} 
```

如果我尝试访问 localhost:53907/Content/Static.html 之类的链接，它不应该允许我根据我目前所了解的内容显示该文件，但它确实会显示它。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T09:20:06.197

忽略 MVC 中的路由将告诉 MVC 框架不要选择这些 URL。

这意味着它将让底层的 ASP.NET 处理请求，这将愉快地向您显示一个静态文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:22:23.770

如果您真的想阻止对该文件夹的访问，为什么不在 web.config 中定义它呢？

在该文件夹中放置一个 web.config。

内容应该是：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
          <!-- <allow roles="admin" /> --> //In case you want to give access to admin only.
          <deny users ="*" />
        </authorization>
    </system.web>
</configuration> 
```

# c# - 在 LINQ 查询的 where 子句中传递 int 数组

> ID：15380774
> 
> 赞同：6
> 
> 时间：2013-03-13T08:58:58.910
> 
> 标签：c#, linq, generics

有一堂课

```
Public class Student
{
  int id;
  int rollNum;
  String Name;
} 
```

一个方法

```
Public List<Student> GetAllStudents()
{
  var studentList = GetMeAll(); // Simple select * query to get all students
  //unfortunately i can't make changes in this method so have to write a linq query to       //filter data.
  //getting int array ids correctly from some method
   var filterList = FilterStudentsByID(ids,StudentList);
} 
```

我想编写一个将 int 数组作为输入并返回 List 的方法

```
Public List<Student> FilterStudentsByID(int[] ids,List<student> studentList)
{
  //There should be a linq query , but I am new to linq so don't know how to write this.
  Var list = from  studentList in ..... don't know much;
} 
```

编写查询的任何帮助。谢谢大家的回答，我也在寻找保持大量记录的表演？？如果您可以添加我对查询的简单解释将在内部工作，那就太好了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T09:00:30.280

如果您要从列表中查找其 id 存在于`ids`数组中的学生，则：

```
var list = from s in stundentList
           where ids.Contains(s.ID)
           select s; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T09:01:57.683

尝试

```
Var list = studentList.Where(s=>ids.Contains(s.id)).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T09:27:07.693

I think the answers already given will be fast enough, but *just in case* after testing you find that it's too slow: You can try converting the student list to a dictionary before doing the searching.

*You should only use this after careful timing tests*, since it is likely to be a lot slower for most cases!

```
public static List<Student> FilteredStudents(int[] targetIds)
{
    var allStudents = GetAllStudents().ToDictionary(student => student.id);
    var result = new List<Student>();

    foreach (int id in targetIds)
    {
        Student student;

        if (allStudents.TryGetValue(id, out student))
        {
            result.Add(student);
        }
    }

    return result;
} 
```

# ruby-on-rails - Zeus + FactoryGirl::Syntax::Methods。未定义的方法“创建”

> ID：15380775
> 
> 赞同：16
> 
> 时间：2013-03-13T08:59:00.143
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot, zeus

我有：

```
RSpec.configure do |config|
  config.include FactoryGirl::Syntax::Methods
end 
```

可以正常使用 simple `rspec spec/model/user_spec.rb`（允许我使用`create(:user)`，而不是`FactoryGirl.create(:user)`）。但是如果我`zeus rspec spec/model/user_spec.rb`用来加快我的规格，它会给我一个错误：

```
Failure/Error: @user = create(:user)
     NoMethodError:
       undefined method `create' for #<RSpec::Core::ExampleGroup::Nested_2::Nested_1:0x007fc8618e4960> 
```

我如何将这种语法与 zeus 一起使用？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-05T00:14:32.710

如果存在，请删除 spec/spec_helper.rb 中的这些行：

```
require 'rspec/autorun'
require 'rspec/autotest' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T16:59:02.170

你以前在这个项目中使用过 spork 吗？如果是这样，您必须删除 Spork 在您的`spec_helper`. 就像@ilake-chang 说的那样，你必须删除`require 'rspec/autorun'`and 你还想删除`Spork.prefork`and `Spork.each_run`。

在 Spork 上查看[Zeus wiki](https://github.com/burke/zeus/wiki/Spork)

# cucumber - 使用“--tags”运行黄瓜时出现“无效选项”错误

> ID：15380784
> 
> 赞同：1
> 
> 时间：2013-03-13T08:59:30.797
> 
> 标签：cucumber, capybara, testunit

我已经和 Cucumber 一起玩了大约三个星期了，一切都很好，除了这里的这个小东西。

每当我使用 eg 运行测试时`cucumber checkout.feature --tags @monthly`，测试成功运行后，我都会在控制台上看到以下内容：

```
invalid option: --tags
Test::Unit automatic runner.
Usage: /Users/myusername/.rvm/gems/ruby-2.0.0-p0/bin/cucumber [options] [-- untouched arguments]
    -r, --runner=RUNNER              Use the given RUNNER.
                                     (c[onsole], e[macs], x[ml])
        --collector=COLLECTOR        Use the given COLLECTOR.
                                     (de[scendant], di[r], l[oad], o[bject]_space)
    -n, --name=NAME                  Runs tests matching NAME.
                                     (patterns may be used).
        --ignore-name=NAME           Ignores tests matching NAME.
                                     (patterns may be used).
    -t, --testcase=TESTCASE          Runs tests in TestCases matching TESTCASE.
                                     (patterns may be used).
        --ignore-testcase=TESTCASE   Ignores tests in TestCases matching TESTCASE.
                                     (patterns may be used).
        --location=LOCATION          Runs tests that defined in LOCATION.
                                     LOCATION is one of PATH:LINE, PATH or LINE
        --attribute=EXPRESSION       Runs tests that matches EXPRESSION.
                                     EXPRESSION is evaluated as Ruby's expression.
                                     Test attribute name can be used with no receiver in EXPRESSION.
                                     EXPRESSION examples:
                                       !slow
                                       tag == 'important' and !slow
        --[no-]priority-mode         Runs some tests based on their priority.
        --default-priority=PRIORITY  Uses PRIORITY as default priority
                                     (h[igh], i[mportant], l[ow], m[ust], ne[ver], no[rmal])
    -I, --load-path=DIR[:DIR...]     Appends directory list to $LOAD_PATH.
        --color-scheme=SCHEME        Use SCHEME as color scheme.
                                     (d[efault])
        --config=FILE                Use YAML fomat FILE content as configuration file.
        --order=ORDER                Run tests in a test case in ORDER order.
                                     (a[lphabetic], d[efined], r[andom])
        --max-diff-target-string-size=SIZE
                                     Shows diff if both expected result string size and actual result string size are less than or equal SIZE in bytes.
                                     (1000)
    -v, --verbose=[LEVEL]            Set the output level (default is verbose).
                                     (important-only, n[ormal], p[rogress], s[ilent], v[erbose])
        --[no-]use-color=[auto]      Uses color output
                                     (default is auto)
        --progress-row-max=MAX       Uses MAX as max terminal width for progress mark
                                     (default is auto)
        --no-show-detail-immediately Shows not passed test details immediately.
                                     (default is yes)
        --output-file-descriptor=FD  Outputs to file descriptor FD
        --                           Stop processing options so that the
                                     remaining options will be passed to the
                                     test.
    -h, --help                       Display this help.

Deprecated options:
        --console                    Console runner (use --runner). 
```

我可能不需要把所有这些都放在这里，但我想给你一个印象，每次测试后我的屏幕上出现了多少文本，这可能会让人分心。

这是我的设置：

**宝石文件**

```
source 'https://rubygems.org'

gem "rspec"
gem "cucumber"

gem "capybara"
gem "capybara-webkit"

gem "selenium"
gem "selenium-client"
gem "selenium-webdriver" 
```

**环境.rb**

```
require_relative '../../../config.rb'

require 'capybara/cucumber'
require 'capybara/rspec'

Capybara.app_host = AT_ROOT
Capybara.default_driver = :selenium
Capybara.javascript_driver = :webkit
Capybara.default_wait_time = DEFAULT_WAIT_TIME
Capybara.ignore_hidden_elements = IGNORE_HIDDEN_ELEMENTS

# Define window size of the browser here
Capybara.current_session.driver.browser.manage.window.resize_to(DEFAULT_WINDOW_HEIGHT, DEFAULT_WINDOW_WIDTH) 
```

我在控制台输出中找不到任何连接`Test::Unit automatic runner`，但显然它与它有关。

你知道那可能是什么吗？我发现了一些与此问题相关的线程，但不幸的是它们并没有帮助我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:00:12.167

尝试

```
cucumber features -t @monthly 
```

# r - 将“const Rcpp::CharacterVector&”的元素转换为“std::string”

> ID：15380785
> 
> 赞同：2
> 
> 时间：2013-03-13T08:59:33.743
> 
> 标签：r, rcpp

我想知道是否有`Rcpp`办法将元素或迭代器转换为`const CharacterVector&`to `std::string`。如果我尝试以下代码

```
void as(const CharacterVector& src) {
    std::string glue;
for(int i = 0;i < src.size();i++) {
        glue.assign(src[i]);
}
} 
```

将发生编译器时错误：

```
no known conversion for argument 1 from ‘const type {aka SEXPREC* const}’ to ‘const char*’ 
```

到目前为止，我使用 C API 进行转换：

```
glue.assign(CHAR(STRING_ELT(src.asSexp(), i))); 
```

我的 Rcpp 版本是 0.10.2。

顺便说一句，我知道有一个`Rcpp::as`.

```
glue.assign(Rcpp::as<std::string>(src[i])); 
```

上面的代码会产生一个运行时错误：

```
Error: expecting a string 
```

另一方面，以下代码运行正确：

```
typedef std::vector< std::string > StrVec;
StrVec glue( Rcpp::as<StrVec>(src) ); 
```

但是，在我的情况下，我不想创建一个时间长的字符串向量。

谢谢回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:00:54.247

我对您想要的感到困惑- CharacterVector 是字符串的*向量*（如在 R 中），因此您只能将其映射到`std::vector<std::string> >`. 这是一个非常简单，非常手动的示例（我认为我们有自动转换器，但可能没有。或者没有。

```
#include <Rcpp.h>  

// [[Rcpp::export]] 
std::vector<std::string> ex(Rcpp::CharacterVector f) {  
  std::vector<std::string> s(f.size());   
  for (int i=0; i<f.size(); i++) {  
    s[i] = std::string(f[i]);  
  }  
  return(s);     
} 
```

它在这里起作用：

```
R> sourceCpp("/tmp/strings.cpp")
R> ex(c("The","brown","fox"))  
[1] "The"   "brown" "fox" 
R> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-14T11:49:42.537

在 Rcpp 0.12.7 中，我可以使用`Rcpp::as<std::vector<std::string> >`. 以下函数返回`test`数组的第二个元素：

```
std::string test() {
  Rcpp::CharacterVector test = Rcpp::CharacterVector::create("a", "z");
  std::vector<std::string> test_string = Rcpp::as<std::vector<std::string> >(test);
  return test_string[1];
} 
```

# symfony - FOSUserBundle 推进

> ID：15380787
> 
> 赞同：1
> 
> 时间：2013-03-13T08:59:41.510
> 
> 标签：symfony, propel, fosuserbundle, symfony-2.2

我将 FosUserBundle 与 Symfony2 (2.2) 和 ORM Propel (1.6) 一起使用。

我最近更新了我的项目（sf2.1 => 2.2），但我遇到了 FOSUser 异常问题：

```
UserQuery not found
BaseUser not found 
```

经过一番搜索，我发现推进命令“propel:build”或“propel:model:build”没有读取 FOSUserBundle 的“schema.xml”。

**我的问题是 FOSUserBundle 不会生成基本的 Propel 类**（“om”和“map”目录）；我找不到为什么以及如何解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:47:32.017

我不知道确切原因，但这个技巧解决了这个问题：

1.  删除 vendor/friendsofsymfony 文件夹
2.  重新启动“作曲家更新”命令

现在推进找到模式并可以生成基类。

感谢站在[https://github.com/propelorm/PropelBundle/issues/215](https://github.com/propelorm/PropelBundle/issues/215)

# regex - Python：re.sub 列表中的单个项目与多个项目

> ID：15380789
> 
> 赞同：1
> 
> 时间：2013-03-13T08:59:45.553
> 
> 标签：regex, list, python-2.7

我是 Python 新手，并尝试使用 re.sub 或其他方法在列表中查找单个项目并替换为多个项目。例如：

```
import re
list = ['abc', 'def']
tolist = []
for item in list:
    a = re.sub(r'^(.)(.)(.)$', '\\1\\2', '\\2\\3', item)
    tolist.append(a)
print tolist  # want: ['ab', 'bc', 'de', 'ef'] 
```

'\1\2', '\2\3' 部分显然不起作用，只是为了简单地说明这个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:06:57.783

您可以在没有正则表达式的情况下配对字符：

```
lst = ['abc', 'def']
result = [a+b for chars in lst for a, b in zip(chars, chars[1:])]
print(result)
# -> ['ab', 'bc', 'de', 'ef'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:12:40.033

这是一种相当通用的方法，您可以在其中列出要对每个项目进行的所有替换的元组：

```
In [1]: import re

In [2]: subs = [(r'^(.)(.)(.)$', r'\1\2'), (r'^(.)(.)(.)$', r'\2\3')]

In [3]: inlist = ['abc', 'def']

In [4]: [re.sub(*sub, string=s) for s in inlist for sub in subs]
Out[4]: ['ab', 'bc', 'de', 'ef'] 
```

每个元组中的第二个元素也可以是一个函数，因为`re.sub`它允许。我重命名了您的初始列表，因为`list`它是一个内置类型名称，不应该用于变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:19:59.723

```
>>> res = []
>>> m = re.compile('(..)')
>>> for items in list:
...   for p in range(0,len(items)):
...     r = m.search(items[p:])
...     if r != None:
...        res.append(r.group()) 
```

制作一个匹配两个字符并将它们分组的正则表达式

第一个for循环，迭代列表

第二个for循环，每个列表项中的字符索引

搜索从偏移量开始的字符对

存储找到的任何东西

# node.js - 使用 node.js、mongoose、gridfs-stream 读取文件

> ID：15380793
> 
> 赞同：6
> 
> 时间：2013-03-13T08:59:54.347
> 
> 标签：node.js, mongodb, mongoose, gridfs

我正在使用 mongoose 和 gridfs-stream 从 mongodb 存储和读取文件。我在这里遵循示例：[https ://github.com/aheckmann/gridfs-stream](https://github.com/aheckmann/gridfs-stream)

将文件写入数据库工作正常，但我在读取文件时遇到了问题。

mongodb 的外观（显示集合）

```
fs.chunks
fs.files 
```

文件索引的外观 (db.fs.files.find())

```
{ "_id" : ObjectId("5140392659851df70b000001"), 
"filename" : "cover", 
"contentType" : "binary/octet-stream", 
"length" : 85734, 
"chunkSize" : 262144, 
"uploadDate" : ISODate("2013-03-13T08:30:30.299Z"), 
"aliases" : null, 
"metadata" : null, 
"md5" : "4476b26067daa0677978ba501308a35d" } 
```

然后我使用此代码获取名为“cover”的文件

```
...
var gfs = Grid(mongoose.connection.db, mongoose.mongo)
var readstream = gfs.createReadStream('cover') 
```

发生错误：

```
Error: cover does not exist
at self.collection.self.fileId (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/gridfs/gridstore.js:198:26)
at Cursor.nextObject (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/cursor.js:654:35)
at Cursor.close (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/cursor.js:960:5)
at Cursor.nextObject (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/cursor.js:654:17)
at Cursor.nextObject.commandHandler (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/cursor.js:631:14)
at Db._executeQueryCommand (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/db.js:1702:5)
at g (events.js:185:14)
at EventEmitter.emit (events.js:115:20)
at Server.Base._callHandler (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/base.js:130:25)
at Server.connect.connectionPool.on.server._serverState (/mypath/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:517:20) 
```

我用谷歌搜索并找到了一些可能的相关链接：

[https://github.com/mongodb/node-mongodb-native/issues/621](https://github.com/mongodb/node-mongodb-native/issues/621)

[为什么gridfs get不能仅通过文件名处理文件ID（ObjectId）](https://stackoverflow.com/questions/13777974/why-gridfs-get-isnt-working-on-file-id-objectid-only-by-filename?rq=1)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-15T03:42:28.597

GitHub 上的示例代码有点误导；我最初收到了与您相同的错误消息。就我而言，这是因为我试图在写入流完成之前读取文件。我通过在事件处理程序中读取来解决这个问题`"close"`：

```
var fs = require("fs"),
    mongo = require("mongodb"),
    Grid = require("gridfs-stream"),
    gridfs,
    writeStream,
    readStream,
    buffer = "";

mongo.MongoClient.connect("mongodb://localhost/gridfs_test", function (err, db) {
    "use strict";
    gridfs = Grid(db, mongo);

    // write file
    writeStream = gridfs.createWriteStream({ filename: "test.txt" });
    fs.createReadStream("test.txt").pipe(writeStream);

    // after the write is finished
    writeStream.on("close", function () {
        // read file, buffering data as we go
        readStream = gridfs.createReadStream({ filename: "test.txt" });

        readStream.on("data", function (chunk) {
            buffer += chunk;
        });

        // dump contents to console when complete
        readStream.on("end", function () {
            console.log("contents of file:\n\n", buffer);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-29T21:21:18.050

什么是封面给文件格式而不是写入或读取

```
const express = require("express");
const routes = express.Router();
const mongoose = require('mongoose');
mongoose.connect("mongodb://localhost:27017/gridfs");
var conn = mongoose.connection;
var path = require("path");
var Grid = require("gridfs-stream");
var fs = require("fs");
Grid.mongo = mongoose.mongo;

var datapath = path.join(__dirname, "../public/1.jpg");

conn.once("open",() =>{
    console.log('connections is opened ');
    console.log(conn.db + "wahab this is running");
    var gfs = Grid(conn.db);
    var filestream = gfs.createWriteStream({
      filename: "wahab.jpg"
    });
    fs.createReadStream(datapath).pipe(filestream);
    filestream.on("close",(file) =>{
      console.log(file.filename  + " Write to DB");
    });

 });

 }); 
```

# iphone - 全屏模式视图无法在 iPad iOS 6 上旋转

> ID：15380796
> 
> 赞同：0
> 
> 时间：2013-03-13T09:00:03.460
> 
> 标签：iphone, ios, ipad, cocoa-touch

代码：

```
HDComposeViewController *vc = [[HDComposeViewController alloc] init];
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:vc];
nav.modalPresentationStyle = UIModalPresentationFullScreen;
[self presentModalViewController:nav animated:YES]; 
```

当前的模态视图在设备旋转时无法旋转。如果我更改`modalPresentationStyle`为`UIModalPresentationFormSheet`，它的工作原理！

HDComposeViewController 已经实现了旋转委托：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

有什么不对的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:36:50.560

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
    }

-(BOOL)shouldAutorotate
{
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:35:27.880

您需要为导航控制器添加一个类别才能在 ios 6 中旋转。

```
@interface UINavigationController (RotationAll)
    -(NSUInteger)supportedInterfaceOrientations;
@end

@implementation UINavigationController (RotationAll)
-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}
@end 
```

# r - 使用因子的水平将 corr 函数应用于矩阵？

> ID：15380797
> 
> 赞同：3
> 
> 时间：2013-03-13T09:00:05.570
> 
> 标签：r, correlation, weighted, tapply

我正在尝试使用 corr() 函数来计算加权思考。它的工作方式是第一个参数应该是一个矩阵，其中两列对应于我们希望计算其相关性的两个变量，第二个参数是要应用于每对观察值的权重向量。

这是一个例子。

```
> head(d)
 Shade_tolerance htot
1            4.56 25.0
2            2.73 23.5
3            2.73 21.5
4            3.97 17.0
5            4.00 25.5
6            4.00 23.5

> head(poids)
[1] 5.200440e-07 5.200440e-07 1.445016e-06 1.445016e-06 1.445016e-06 1.445016e-06

> corr(d,poids)
[1] 0.1357279 
```

所以我得到了它，我可以在我的矩阵上使用它，但我想根据一个因子的水平计算不同的相关性。假设我正在使用 tapply() 函数。

```
> head(d2)
  Shade_tolerance htot idp
1            4.56 25.0  19
2            2.73 23.5  19
3            2.73 21.5  19
4            3.97 17.0  18
5            4.00 25.5  18
6            4.00 23.5  18 
```

所以我的梦想是做这样的事情：

```
tapply(as.matrix(d2[,c(1,2)]), d2$idp, corr) 
```

除了您在 tapply() 中知道的第一个元素需要是向量而不是矩阵。

有人会对我有什么解决方案吗？

非常感谢你的帮助。

编辑：我刚刚意识到我在向您展示的数据框部分中缺少加权相关性的权重。所以它会有一些如何根据因子的水平同时采用矩阵和权重。

```
> head(df)
  Shade_tolerance htot idp        poids
1            4.56 25.0  19 5.200440e-07
2            2.73 23.5  19 5.200440e-07
3            2.73 21.5  19 1.445016e-06
4            3.97 17.0  19 1.445016e-06
5            4.00 25.5  19 1.445016e-06
6            4.00 23.5  19 1.445016e-06 
```

我希望很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:04:28.247

如果您有一个“巨大的”data.frame，那么使用`data.table`可能会有所帮助：

```
require(data.table)
dt <- as.data.table(df)
setkey(dt, "idp")
dt[, list(corr = corr(cbind(Shade_tolerance, htot), poids)), by=idp]

#    idp      corr
# 1:  18 0.9743547
# 2:  19 0.8387363 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:11:28.337

这是使用`ddply()`库中的函数的解决方案`plyr`。

```
ddply(df,.(idp),
   summarise,kor=corr(cbind(Shade_tolerance, htot),poids))
  idp       kor
1  18 0.9743547
2  19 0.8387363 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:12:55.817

使用`by`和`cbind`,

```
 library(boot)
 by(dat,dat$idp,FUN=function(x)corr(cbind(x$Shade_tolerance,x$htot),x$poids))
dat$idp: 18
[1] 0.9743547
--------------------------------------------------------------------------------------- 
dat$idp: 19
[1] 0.7474093 
```

# coldfusion - 变量数据源未定义

> ID：15380807
> 
> 赞同：1
> 
> 时间：2013-03-13T09:00:43.513
> 
> 标签：coldfusion, oracle11g, coldfusion-9

我在 ColdFusion Admin 的管理控制台中定义了一个数据源。我已经在 set_datasource_util 文件中声明了具有相同数据源名称的配置。我有一个使用给定数据源连接到 DB(Oracle) 的网页，它在大多数情况下都能正常工作。但是最近我开始看到诸如“变量数据源名称（我的应用程序名称）未定义”之类的异常。我无法确定根本原因，因为我无法重新创建它，因为它大部分时间都在工作。我可以说平均 1000 次点击页面，它失败了 1 次，但有例外。任何人都可以帮助确定可能的问题，以便我可以朝那个方向进行调查。

我已经在 CFAdmin 中配置了 WOCD080P_ABC。

下面是来自 Application.cfm 的代码

```
<cfif client.securityLevel NEQ ''>
    <cfinvoke component="#siteroot#.CFC.Set_Data_Source_Util" method="fnSetABCDataSource" returnvariable="ABCDataSourceDefinition">
        <cfinvokeargument name="Environment" value="#variables.thisServerType#" />
    </cfinvoke>
    <cfif ABCDataSourceDefinition.DataSource NEQ 'Error'>
        <cfset DATASOURCE_ABC = ABCDataSourceDefinition.DataSource />
        <cfset DBUSER_ABC = ABCDataSourceDefinition.DBUser />
        <cfset DBPASSWORD_ABC = ABCDataSourceDefinition.DBPassword />
    </cfif>
</cfif> 
```

下面是来自 Set_datasource_UTil 的代码：

```
<cffunction name="fnSetABCDataSource" access="public" returntype="struct">
    <cfargument name="Environment" type="string" required="yes">

    <cfset ReturnParameters = StructNew() />

    <cfif Environment IS 'prod'>
        <cfset ReturnParameters.DataSource = 'WOCD080P_ABC' />
        <cfset ReturnParameters.DBUser = ''/>
        <cfset ReturnParameters.DBPassword = '' />
    <cfelse>
        <cfset ReturnParameters.DataSource = 'WOCD080T_ABC'/>
        <cfset ReturnParameters.DBUser = ''/>
        <cfset ReturnParameters.DBPassword = '' />
    </cfif>

    <cfreturn ReturnParameters>
</cffunction> 
```

下面是我从 HTML 文件执行的代码。

```
<cfinvoke component="#siteroot#.cfc.ABC_UTIL" method="GetRegion" returnVariable = "USregion" >
    <cfinvokeargument name="dbSource" value=#DATASOURCE_ABC# />
    <cfinvokeargument name="dbUser" value=#DBUSER_ABC# />
    <cfinvokeargument name="dbPass" value=#DBPASSWORD_ABC# />
</cfinvoke> 
```

HTML 文件中的代码大部分时间都可以工作，但有时会因未定义错误变量 DATASOURCE_ABC 而中断。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:56:54.083

请确保您对 CFC 函数内的局部变量使用 var 关键字：

```
<cfset var ReturnParameters = StructNew() /> 
```

CF9+ 局部作用域可以用来代替 var：

```
<cfset local.ReturnParameters = StructNew() /> 
```

为了获得额外的保护，请在您的 application.cfm 中改进此语句：

```
<cfif isDefined("ABCDataSourceDefinition.DataSource") 
    AND ABCDataSourceDefinition.DataSource NEQ 'Error'>
    <cfset DATASOURCE_ABC = ABCDataSourceDefinition.DataSource />
    <cfset DBUSER_ABC = ABCDataSourceDefinition.DBUser />
    <cfset DBPASSWORD_ABC = ABCDataSourceDefinition.DBPassword />
</cfif> 
```

此外，这可能是未定义数据源的另一个原因。我假设您有一个拦截器，可以在此数据源错误发生之前捕获它并将它们发送到登录页面或其他东西。

# charts - 支持图表选择和JQchart最大可视化优化

> ID：15380809
> 
> 赞同：0
> 
> 时间：2013-03-13T09:00:47.187
> 
> 标签：charts, highcharts, jqchart

我有一个需要图表的大项目，我需要在这两个图表选择之间做出决定：

JQchart - 在 MVC 支持下看起来最动态且易于使用，问题是它在数据可视化方面看起来不如 Highcharts。

Highcharts - DotNet 支持依赖于第 3 部分 api 库，它可能不像 JQcharts 那样动态，但看起来比它好得多。

如果可以向 JQchart 库添加一些“魔术”以使其看起来更好，我需要一些指导（我知道 Trirand 插件还不够），任何具有优化可视化的示例都将受到欢迎，也欢迎对其他一些插件提出任何建议。

# c++ - CUDA 内存不返回主机

> ID：15380812
> 
> 赞同：0
> 
> 时间：2013-03-13T09:00:53.037
> 
> 标签：c++, cuda, gpu, gpgpu, nvidia

好的，所以我正在尝试为我以 15 美元购买的“新”FX 570 学习 CUDA；D 现在代码中没有错误，array1_host 以正确的值开始，但是当我将内存从设备复制到主机值保持不变。如果我取消第二个内核调用（在这个项目中尝试多个内核），也会发生同样的事情我很困惑，所以感谢您提供的任何帮助：）

```
#include <cuda_runtime.h>
#include <iostream>

#pragma comment (lib, "cudart")

#define N 5000

__global__ void addArray(float* a, float* b)
{
   a[threadIdx.x] += b[threadIdx.x];
}
__global__ void timesArray(float* a, float* b)
{
   a[threadIdx.x] *= b[threadIdx.x];
}

int main(){
   float array1_host[N];
   float array2_host[N];

   float *array1_device;
   float *array2_device;

   cudaError_t err;

   for(int x = 0; x < N; x++){
       array1_host[x] = (float) x * 2;
       array2_host[x] = (float) x * 6;
   }

   err = cudaMalloc((void**)&array1_device, N*sizeof(float));
   err = cudaMalloc((void**)&array2_device, N*sizeof(float));

   err = cudaMemcpy(array1_device, array1_host, N*sizeof(float),   cudaMemcpyHostToDevice);
   err = cudaMemcpy(array2_device, array2_host, N*sizeof(float), cudaMemcpyHostToDevice);

   dim3 dimBlock( N );
   dim3 dimGrid ( 1 );

   addArray<<<dimGrid, dimBlock>>>(array1_device, array2_device); 
   timesArray<<<dimGrid, dimBlock>>>(array1_device, array2_device);

   err = cudaMemcpy(array1_host, array1_device, N*sizeof(float), cudaMemcpyDeviceToHost);

   cudaFree(array1_device);
   cudaFree(array2_device);

   std::cout << cudaGetErrorString(err) << "\n\n\n\n\n\n";
   std::cout << array1_host;

   cudaDeviceReset();

   system("pause");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:08:24.350

您有一个错误，因为 N 是 5000，但是块中的 threds 有限制 - 它取决于 Compute Capability[链接到 wiki 上的功能](http://en.wikipedia.org/wiki/CUDA#Version_features_and_specifications)。
试试这个代码：

```
#define K 200

....

dim3 dimBlock( K );
dim3 dimGrid ( N/K ); 
```

要调试您的代码，您可以在每次调用内核或其他函数后使用，以了解[关于 CUDA 错误](http://www.visualization.hpc.mil/wiki/Handling_CUDA_error_messages)`cudaGetLastError()`的错误位于何处。

# java - 属性文件作为 web.xml 中的 init-param

> ID：15380817
> 
> 赞同：1
> 
> 时间：2013-03-13T09:01:01.297
> 
> 标签：java, jakarta-ee, servlets, servlet-filters, web.xml

我正在将托管在 websphere 中的基于 Jsp-servlet 的 Java 项目迁移到 tomcat。下面的 init-param 位于过滤器定义中的 web.xml 中。我移动了作为类路径的属性文件 src 文件夹。如何更改 web.xml 中的以下内容。我可以将属性文件定义为 init-param，因为我看到的大多数答案都使用 context-param 来定义属性文件。我不认为它对我来说是一个选项，因为现有应用程序需要属性文件是 init-param。

```
<init-param>
    <param-name>configPath</param-name>
    <param-value>/pws/WebSphere/AppServer/properties/fyp/filterConfig/filter.properties</param-value>
</init-param> 
```

我试过

```
<init-param>
      <param-name>configPath</param-name>
      <param-value>classpath:filter.properties</param-value>
</init-param> 
```

它没有工作。提前谢谢你，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:20:20.583

检查您的 servlet 实现，您会发现类似以下内容：

1.  从 ServletContext 获取上下文根路径；
2.  附加从 init-param 获取的属性文件路径；
3.  做一些文件操作

如您所问，您可以将 servlet 配置为：

```
 <init-param>
      <param-name>configPath</param-name>
      <param-value>filter.properties</param-value>
   </init-param> 
```

然后将您的代码更改为

1.  从 init-param 获取文件名
2.  打开流 this.getClass().getClassLoader().getResourceAsStream("fileName");
3.  做一些文件操作

# html - X-UA-兼容 IE8 的 Intranet

> ID：15380818
> 
> 赞同：0
> 
> 时间：2013-03-13T09:01:01.227
> 
> 标签：html, css, internet-explorer, cross-browser

我有一些用于样机设计的静态 HTML 页面。HTML 页面在 ie8、ie9、chrome、mozila 和 safari 中完美独立。

当我将它们部署到服务器（WCS）上进行 Intranet 开发时，它仅在 IE8 中没有正确对齐，但它们在包括 ie9 在内的其他浏览器中正确显示。

我有两个问题：

1.  如果我有 CSS 问题，我认为我没有 CSS 问题，它在 ie8 的独立页面中也不起作用。我对么？
2.  我是否需要从服务器端为 IE=edge 提供任何 X-UA 兼容设置？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:30:16.160

我总是会选择一个`X-UA-Compatible`值`IE=edge,chrome=1`

这样，如果您明智的话，您总是可以在 IE 中获得最新的渲染引擎，并且可以在未来保存。

如果您看到某些东西在 IE8 中不起作用，您应该使用modernizr 和/或polyfills。你必须谷歌这些，因为我不能在这里详细描述它们。

在你的情况下会有很多可能的答案

1.  有时浏览器在显示本地文件（协议文件：//）或网络服务器文档（协议 http://）时表现不同
2.  您的网络服务器上是否有默认设置 X-UA-Compatible 作为 HTTP 标头（使用 Firefox Firebug、Net 选项卡检查）
3.  兼容模式是否损坏（查看您的 IE8/9 地址字段中是否有撕裂的页面符号，请参见此处： http: [//windows.microsoft.com/en-us/internet-explorer/products/ie-9/功能/兼容性视图](http://windows.microsoft.com/en-us/internet-explorer/products/ie-9/features/compatibility-view)）

否则，您将遇到 CSS 问题。

# php - 如何在 php mysql 中对过滤后的结果进行分页？

> ID：15380819
> 
> 赞同：0
> 
> 时间：2013-03-13T09:01:01.813
> 
> 标签：php, mysql

如何在 php mysql 中对过滤后的结果进行分页？

我的分页只显示存储在数据库中的所有文件，但是当我想搜索例如所有采访的评论记录时，它会显示所有采访评论的文件，然后在第二页它仍然显示过滤结果。

我的问题是当我单击分页时，第二页将再次检索存储在数据库中的所有文件。我想要的第二页是过滤后的结果。

```
 `<?php 
    include 'functions.php';
    ob_start();

    if(!loggedin())
    { header("Location:login.php");
    exit();
     }

    if(isset($_POST['edit']))
     {

    $_SESSION['id']=$_POST['id'];
     header("Location:edit.php");
    }

     if(isset($_POST['BOOK']))
        {
    $_SESSION['id']=$_POST['id'];
    header("Location:booking_edit.php");}

        if($_POST['types'] == 'name' || $_POST['types'] == 'mobile' || $_POST['types'] ==       'OccasionType')
    {
    $_SESSION['filter']=$_POST['filter'];
     }

     ?>
     <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   "http://www.w3.org/TR/html4/loose.dtd">
    <html>
     <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
     <title>Manorama Party Plot</title>
      <link href="css/style.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="css/flexigrid.css" media="all" />

    <script type="text/javascript" src="js/prototype.js"></script>
        <script type="text/javascript" src="js/jquery.min.js"></script>

        <script type="text/javascript" src="js/jquery-ui-1.8.16.custom.min.js">           </script>

        <script type="text/javascript">
    $(function(){

    // Datepicker
        $('#From,#To').datepicker({
    inline: true
    });

                //hover states on the static widgets
                $('#dialog_link, ul#icons li').hover(
                    function() { $(this).addClass('ui-state-hover'); }, 
                    function() { $(this).removeClass('ui-state-hover'); }
                );

            });
        </script>        
        <script type="text/javascript">     
       $(document).ready(function() {     
       $('#types').change(function(){     
      if($('#types').val() === 'InquiryDate' || $('#types').val() === 'OccasionDate')     
     {     
     $('#From').show();
      $('#To').show(); 
      $('#filter').hide();     
     }     
      else    
     {
    $('#filter').show();         
     $('#From').hide();
     $('#To').hide();        
     }     
      });     
     });     
      </script> 

      <script type="text/javascript" src="js/flexigrid.js"></script>

     </head>
     <body>

      <div class="wrapper filter_wrapper">
     <div id="header">
       <?php include 'header.php'; ?>
    </div>
    <div id="content"></div></div>
    <div class="fillter_con">
     <div class="flexigrid fillter">
             <div class="pDiv">
                <div class="pDiv2 axport">
                <h2>Filter :</h2>  

       <form action='<?php echo $_SERVER['PHP_SELF']; ?>' method='post' name='form_filter'> 
       <select class="filter_select" id="types" name="types">
                <option value="none">none</option>
                    <option value="name">name</option> 
                    <option value="mobile">mobile</option> 
                    <option value="OccasionType">OccasionType</option>
                    <option value="InquiryDate">InquiryDate</option>
                    <option value="OccasionDate">OccasionDate</option> 
             </select> 
              <input class="filter_input" name="filter" id="filter" type="text" > 
          <input type="text" class="filter_input" id="From" name="From" style="display:  none;" va  lue="From" onblur="this.value==''?this.value='From':this.value=this.value"  onfocus="this.value=='From'?this.value='':this.value=this.value" /> 
          <input type="text" class="filter_input" id="To" name="To" style="display: none;" value="To" onblur="this.value==''?this.value='To':this.value=this.value" onfocus="this.value=='To'?this.value='':this.value=this.value" />  
                  <input class="filter_button" type='submit' value = 'Go'> 
                </form>
                </div>
            </div>
        </div>

        <?php

        $tbl_name="visitor_detail"; $adjacents = 3;

    if($_POST['types'] == 'name') {  
    $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE    name='".$_SESSION['filter']."' ORDER BY id DESC";
    }  
       elseif($_POST['types'] == 'mobile') { 
      $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE mobile='".$_SESSION['filter']."' ORDER BY id DESC";
    } 
       elseif($_POST['types'] == 'OccasionType') {  
     $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE OccasionType='".$_SESSION['filter']."' ORDER BY id DESC";
     } 

       elseif($_POST['types'] == 'InquiryDate') { 
       $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE TodayDate between '".$_POST['From']."' and '".$_POST['To']."' ORDER BY id DESC"; 
       }

       elseif($_POST['types'] == 'OccasionDate') {  
         $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE date between '".$_POST['From']."' and '".$_POST['To']."' ORDER BY id DESC";
         }

    else { 
         $query = "SELECT COUNT(*) as num FROM $tbl_name ORDER BY id DESC";
    }

    $total_pages = mysql_fetch_array(mysql_query($query));
    $total_pages = $total_pages['num'];

    /* Setup vars for query. */
    $targetpage = "all_inquiry.php";    //your file name  (the name of this file)
    $limit = 10;

     $page = $_GET['page'];

    if($page) 
        $start = ($page - 1) * $limit;          //first item to display on       this page
    else
        $start = 0;                             //if no page var is given, set start to 0

     if($_POST['types'] == 'name') {  

      $que = "SELECT * FROM visitor_detail WHERE name='".$_SESSION['filter']."' ORDER BY id   DESC LIMIT $start, $limit";  
       }  
      elseif($_POST['types'] == 'mobile') {  

       $que = "SELECT * FROM visitor_detail WHERE mobile='".$_SESSION['filter']."' ORDER BY id  DESC LIMIT $start, $limit ";  
      } 
       elseif($_POST['types'] == 'OccasionType') {  

      $que = "SELECT * FROM visitor_detail WHERE OccasionType='".$_SESSION['filter']."'   ORDER BY id DESC LIMIT $start, $limit";  
       } 

      elseif($_POST['types'] == 'InquiryDate') {  
      $que="SELECT * FROM visitor_detail WHERE TodayDate between '".$_POST['From']."' and   '".$_POST['To']."' ORDER BY id DESC LIMIT $start, $limit" ;  
     }

       elseif($_POST['types'] == 'OccasionDate') {  
      $que="SELECT * FROM visitor_detail WHERE date between '".$_POST['From']."' and '".$_POST['To']."' ORDER BY id DESC LIMIT $start, $limit" ;  
     }

       else {  
       $que = "SELECT * FROM visitor_detail ORDER BY id DESC LIMIT $start, $limit";  
    } 

      $sql = mysql_query($que);

    if ($page == 0) $page = 1;                  //if no page var is   given, default to 1.
    $prev = $page - 1;                          //previous   page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items  per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\"><div class=\"pPrev pButton pGroup\">
                <span></span>
                </div></a><div class=\"btnseparator\"></div>";

        else
            $pagination.= "<div class=\"pPrev pButton pGroup\">
                <span></span>
                </div><div class=\"btnseparator\"></div>";  

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<div    class=\"pGroup\">$counter</div>";
                else
                    $pagination.= "<a href=\"$targetpage?  page=$counter\"><div class=\"pGroup\">$counter</div></a>";                   
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<div  class=\"pGroup\">$counter</div>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\"><div class=\"pGroup\">$counter</div></a>";                 
                }
                $pagination.= "<div class=\"pGroup\">...</div>";
                $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage? page=$lpm1\">$lpm1</a></div>";
                $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage? page=$lastpage\">$lastpage</a></div>";      
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents  * 2))
            {
                $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage? page=1\">1</a></div>";
                $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage?page=2\">2</a></div>";
                $pagination.= "<div class=\"pGroup\">...</div>";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= " <div class=\"pGroup\">$counter</div>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\"><div class=\"pGroup\">$counter</div></a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "<div class=\"pGroup\">...</div>";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<div class=\"pGroup\">$counter</div>";
                    else
                        $pagination.= "<a href=\"$targetpage? page=$counter\"><div class=\"pGroup\">$counter</div></a>";                    
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\"><div   class=\"pNext pButton pGroup\">
                     </div></a><div class=\"btnseparator\"></div>";
        else
            $pagination.= "<div class=\"pNext pButton pGroup\"></div><div class=\"btnseparator\"></div>";
        $pagination.= "</div>\n";       
    }
        if ($page == 0) $page = 1;                  //if no  page var is given, default to 1.
    $prev = $page - 1;                          //previous  page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\"><div class=\"pPrev pButton pGroup\">
                <span></span>
                </div></a><div class=\"btnseparator\"></div>";

        else
            $pagination.= "<div class=\"pPrev pButton pGroup\">
                <span></span>
                </div><div class=\"btnseparator\"></div>";  

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<div class=\"pGroup\">$counter</div>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\"><div class=\"pGroup\">$counter</div></a>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<div class=\"pGroup\">$counter</div>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\"><div class=\"pGroup\">$counter</div></a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a><div class=\"btnseparator\"></div>";     
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= " <div class=\"pGroup\">$counter</div>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\"><div class=\"pGroup\">$counter</div></a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a><div class=\"btnseparator\"></div>";     
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<div class=\"pGroup\">$counter</div>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\"><div class=\"pGroup\">$counter</div></a>";                 
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\"><div class=\"pNext pButton pGroup\">
                     </div></a><div class=\"btnseparator\"></div>";
        else
            $pagination.= "<div class=\"pNext pButton pGroup\"></div><div class=\"btnseparator\"></div>";
        $pagination.= "</div>\n";       
    }?>  

  <div id="flexme1"><table>
            <thead>
                   <tr>

                    <th width="100"><strong>Name</strong></th>
                    <th width="90"><strong>Mobile</strong></th>
                    <th width="75"><strong>Occasion Type</strong></th>
                    <th width="80"><strong>Occasion Date</strong></th>
                    <th width="70"><strong>Approx Gust</strong></th>
                    <th width="150"><strong>Description</strong></th>
                    <th width="150"><strong>Address</strong></th>
                    <th width="120"><strong>Email</strong></th>
                    <th width="75"><strong>Other Contact</strong></th>

                    <th width="70"><strong>Enquiry Date</strong></th>
                    <th width="80"><strong>Author</strong></th>
                    <th width="100"><strong>Action</strong></th>

                </tr>
            </thead></table>

           <?php while($data = mysql_fetch_array($sql)){?>

     <form name="form" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="POST"> 

            <table border="0" cellspacing="0" cellpadding="0" >
            <tbody> 

                 <tr>   <input name="id" type="hidden" value="<?php echo $data['0']; ?>" >
                    <td><?php echo $data['2']; ?></td>
                    <td><?php echo $data['3']; ?></td>
                    <td><?php echo $data['8']; ?></td>
                    <td><?php echo $data['9']; ?></td>          
                    <td><?php echo $data['10']; ?></td>
                    <td><?php echo $data['11']; ?></td>
                    <td><?php echo $data['4']; ?></td>
                    <td><?php echo $data['5']; ?></td>
                    <td><?php echo $data['6']; ?></td>
                    <td><?php echo $data['12']; ?></td>
                    <td><?php echo $data['13']; ?></td>
                    <td><input name="edit" type="submit" value="Edit">
                    <input  name="BOOK" type="submit" value="Book" style="color:#d90f0f">

                    </td>
                    </tr>

            </tbody>
             </table>
             </form>
             <?php } ?></div>

            <div class="flexigrid">
            <div class="pDiv">
            <div class="pDiv2">

              <div class="pGroup">
              <select name="rp" id="rp"  >
              <option value="10">10&nbsp;&nbsp;</option>
              <option value="15">15&nbsp;&nbsp;</option>
              <option value="20">20&nbsp;&nbsp;</option>
              <option value="30">30&nbsp;&nbsp;</option>
              <option value="50">50&nbsp;&nbsp;</option>
              </select>
              </div> 
              <div class="btnseparator"></div>
               <?=$pagination?>

                      <div class="axport">
                      <h2>Export</h2>
                        <div class="pGroup">
                            <div class="pdf_button  pButton">PDF</div>
                        </div>
                        <div class="btnseparator"></div>
                        <div class="pGroup">
        <?php 
         $types = $_POST['types'];
       $filter = $_POST['filter'];
       $from = $_POST['From'];
        $to = $_POST['To'];
        ?>
                            <div class="excel_button pButton">
                            <form action="excel.php"   method="POST">
                            <input name="types" type="hidden"     value="<?php echo $types;?>">
                            <input name="filter" type="hidden" value="<?php echo $filter;?>">
                            <input name="from" type="hidden" value="<?php echo $from;?>">
                            <input name="to" type="hidden" value="<?php echo $to;?>">                           
                            <input type="submit" value="Excel"> 
                            </form>
                            </div>
                        </div>
                        </div>
                          </div>
                          </div>
                          </div>

        <script type="text/javascript">
        //<![CDATA[
        jQuery(document).ready(function($) {
            $('#flexme1').flexigrid();
        });
        //]]>
        </script>
        </div>
         </div>
        <div id="footer">
         <p>Copyright © <span><a href="#">Aum Digital Marketing</a></span> , All rights    reserved</p>
    </div>
    </body>
    </html>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:06:13.553

没有阅读问题正文，但您需要的魔杖称为[http_build_query()](http://php.net/http_build_query)

只需使用它来形成您的分页链接以保留所有过滤选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:06:19.263

更新代码

```
`<?php 
                           include 'functions.php';
                           ob_start();

                           if(!loggedin())
                           { header("Location:login.php");
                           exit();
                            }

                           if(isset($_REQUEST['edit']))
                            {

                           $_SESSION['id']=$_REQUEST['id'];
                            header("Location:edit.php");
                           }

                            if(isset($_REQUEST['BOOK']))
                               {
                           $_SESSION['id']=$_REQUEST['id'];
                           header("Location:booking_edit.php");}

                               if($_REQUEST['types'] == 'name' || $_REQUEST['types'] == 'mobile' || $_REQUEST['types'] ==       'OccasionType')
                           {
                           $_SESSION['filter']=$_REQUEST['filter'];
                            }

                            ?>
                            <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   "http://www.w3.org/TR/html4/loose.dtd">
                           <html>
                            <head>
                           <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
                            <title>Manorama Party Plot</title>
                             <link href="css/style.css" rel="stylesheet" type="text/css">
                           <link rel="stylesheet" type="text/css" href="css/flexigrid.css" media="all" />

                           <script type="text/javascript" src="js/prototype.js"></script>
                               <script type="text/javascript" src="js/jquery.min.js"></script>

                               <script type="text/javascript" src="js/jquery-ui-1.8.16.custom.min.js">           </script>

                               <script type="text/javascript">
                           $(function(){

                           // Datepicker
                               $('#From,#To').datepicker({
                           inline: true
                           });

                                       //hover states on the static widgets
                                       $('#dialog_link, ul#icons li').hover(
                                           function() { $(this).addClass('ui-state-hover'); }, 
                                           function() { $(this).removeClass('ui-state-hover'); }
                                       );

                                   });
                               </script>        
                               <script type="text/javascript">     
                              $(document).ready(function() {     
                              $('#types').change(function(){     
                             if($('#types').val() === 'InquiryDate' || $('#types').val() === 'OccasionDate')     
                            {     
                            $('#From').show();
                             $('#To').show(); 
                             $('#filter').hide();     
                            }     
                             else    
                            {
                           $('#filter').show();         
                            $('#From').hide();
                            $('#To').hide();        
                            }     
                             });     
                            });     
                             </script> 

                             <script type="text/javascript" src="js/flexigrid.js"></script>

                            </head>
                            <body>

                             <div class="wrapper filter_wrapper">
                            <div id="header">
                              <?php include 'header.php'; ?>
                           </div>
                           <div id="content"></div></div>
                           <div class="fillter_con">
                            <div class="flexigrid fillter">
                                    <div class="pDiv">
                                       <div class="pDiv2 axport">
                                       <h2>Filter :</h2>  

                              <form action='<?php echo $_SERVER['PHP_SELF']; ?>' method='post' name='form_filter'> 
                              <select class="filter_select" id="types" name="types">
                                       <option value="none">none</option>
                                           <option value="name">name</option> 
                                           <option value="mobile">mobile</option> 
                                           <option value="OccasionType">OccasionType</option>
                                           <option value="InquiryDate">InquiryDate</option>
                                           <option value="OccasionDate">OccasionDate</option> 
                                    </select> 
                                     <input class="filter_input" name="filter" id="filter" type="text" > 
                                 <input type="text" class="filter_input" id="From" name="From" style="display:  none;" va  lue="From" onblur="this.value==''?this.value='From':this.value=this.value"  onfocus="this.value=='From'?this.value='':this.value=this.value" /> 
                                 <input type="text" class="filter_input" id="To" name="To" style="display: none;" value="To" onblur="this.value==''?this.value='To':this.value=this.value" onfocus="this.value=='To'?this.value='':this.value=this.value" />  
                                         <input class="filter_button" type='submit' value = 'Go'> 
                                       </form>
                                       </div>
                                   </div>
                               </div>

                               <?php

                               $tbl_name="visitor_detail"; $adjacents = 3;

                           if($_REQUEST['types'] == 'name') {  
                           $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE    name='".$_SESSION['filter']."' ORDER BY id DESC";
                           }  
                              elseif($_REQUEST['types'] == 'mobile') { 
                             $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE mobile='".$_SESSION['filter']."' ORDER BY id DESC";
                           } 
                              elseif($_REQUEST['types'] == 'OccasionType') {  
                            $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE OccasionType='".$_SESSION['filter']."' ORDER BY id DESC";
                            } 

                              elseif($_REQUEST['types'] == 'InquiryDate') { 
                              $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE TodayDate between '".$_REQUEST['From']."' and '".$_REQUEST['To']."' ORDER BY id DESC"; 
                              }

                              elseif($_REQUEST['types'] == 'OccasionDate') {  
                                $query = "SELECT COUNT(*) as num FROM $tbl_name WHERE date between '".$_REQUEST['From']."' and '".$_REQUEST['To']."' ORDER BY id DESC";
                                }

                           else { 
                                $query = "SELECT COUNT(*) as num FROM $tbl_name ORDER BY id DESC";
                           }

                           $total_pages = mysql_fetch_array(mysql_query($query));
                           $total_pages = $total_pages['num'];

                           /* Setup vars for query. */
                           $targetpage = "all_inquiry.php";    //your file name  (the name of this file)
                           $limit = 10;

                            $page = $_GET['page'];

                           if($page) 
                               $start = ($page - 1) * $limit;          //first item to display on       this page
                           else
                               $start = 0;                             //if no page var is given, set start to 0

                            if($_REQUEST['types'] == 'name') {  

                             $que = "SELECT * FROM visitor_detail WHERE name='".$_SESSION['filter']."' ORDER BY id   DESC LIMIT $start, $limit";  
                              }  
                             elseif($_REQUEST['types'] == 'mobile') {  

                              $que = "SELECT * FROM visitor_detail WHERE mobile='".$_SESSION['filter']."' ORDER BY id  DESC LIMIT $start, $limit ";  
                             } 
                              elseif($_REQUEST['types'] == 'OccasionType') {  

                             $que = "SELECT * FROM visitor_detail WHERE OccasionType='".$_SESSION['filter']."'   ORDER BY id DESC LIMIT $start, $limit";  
                              } 

                             elseif($_REQUEST['types'] == 'InquiryDate') {  
                             $que="SELECT * FROM visitor_detail WHERE TodayDate between '".$_REQUEST['From']."' and   '".$_REQUEST['To']."' ORDER BY id DESC LIMIT $start, $limit" ;  
                            }

                              elseif($_REQUEST['types'] == 'OccasionDate') {  
                             $que="SELECT * FROM visitor_detail WHERE date between '".$_REQUEST['From']."' and '".$_REQUEST['To']."' ORDER BY id DESC LIMIT $start, $limit" ;  
                            }

                              else {  
                              $que = "SELECT * FROM visitor_detail ORDER BY id DESC LIMIT $start, $limit";  
                           } 

                             $sql = mysql_query($que);

                             if(isset($_REQUEST))
                             {
                               unset($_REQUEST['page']);
                               $queryString = http_build_query($_REQUEST);
                             }

                           if ($page == 0) $page = 1;                  //if no page var is   given, default to 1.
                           $prev = $page - 1;                          //previous   page is page - 1
                           $next = $page + 1;                          //next page is page + 1
                           $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items  per page, rounded up.
                           $lpm1 = $lastpage - 1;                      //last page minus 1

                           /* 
                               Now we apply our rules and draw the pagination object. 
                               We're actually saving the code to a variable in case we want to draw it more than once.
                           */
                           $pagination = "";
                           if($lastpage > 1)
                           {   
                               $pagination .= "<div class=\"pagination\">";
                               //previous button
                               if ($page > 1) 
                                   $pagination.= "<a href=\"$targetpage?page=$prev&$queryString\"><div class=\"pPrev pButton pGroup\">
                                       <span></span>
                                       </div></a><div class=\"btnseparator\"></div>";

                               else
                                   $pagination.= "<div class=\"pPrev pButton pGroup\">
                                       <span></span>
                                       </div><div class=\"btnseparator\"></div>";  

                               //pages 
                               if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
                               {   
                                   for ($counter = 1; $counter <= $lastpage; $counter++)
                                   {
                                       if ($counter == $page)
                                           $pagination.= "<div    class=\"pGroup\">$counter</div>";
                                       else
                                           $pagination.= "<a href=\"$targetpage?  page=$counter&$queryString\"><div class=\"pGroup\">$counter</div></a>";                   
                                   }
                               }
                               elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
                               {
                                   //close to beginning; only hide later pages
                                   if($page < 1 + ($adjacents * 2))        
                                   {
                                       for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                                       {
                                           if ($counter == $page)
                                               $pagination.= "<div  class=\"pGroup\">$counter</div>";
                                           else
                                               $pagination.= "<a href=\"$targetpage?page=$counter\"><div class=\"pGroup\">$counter</div></a>";                 
                                       }
                                       $pagination.= "<div class=\"pGroup\">...</div>";
                                       $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage? page=$lpm1&$queryString\">$lpm1</a></div>";
                                       $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage? page=$lastpage&$queryString\">$lastpage</a></div>";      
                                   }
                                   //in middle; hide some front and some back
                                   elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents  * 2))
                                   {
                                       $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage? page=1&$queryString\">1</a></div>";
                                       $pagination.= "<div class=\"pGroup\"><a href=\"$targetpage?page=2&$queryString\">2</a></div>";
                                       $pagination.= "<div class=\"pGroup\">...</div>";
                                       for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                                       {
                                           if ($counter == $page)
                                               $pagination.= " <div class=\"pGroup\">$counter</div>";
                                           else
                                               $pagination.= "<a href=\"$targetpage?page=$counter&$queryString\"><div class=\"pGroup\">$counter</div></a>";                 
                                       }
                                       $pagination.= "...";
                                       $pagination.= "<a href=\"$targetpage?page=$lpm1&$queryString\">$lpm1</a>";
                                       $pagination.= "<a href=\"$targetpage?page=$lastpage&$queryString\">$lastpage</a>";       
                                   }
                                   //close to end; only hide early pages
                                   else
                                   {
                                       $pagination.= "<a href=\"$targetpage?page=1&$queryString\">1</a>";
                                       $pagination.= "<a href=\"$targetpage?page=2&$queryString\">2</a>";
                                       $pagination.= "<div class=\"pGroup\">...</div>";
                                       for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                                       {
                                           if ($counter == $page)
                                               $pagination.= "<div class=\"pGroup\">$counter</div>";
                                           else
                                               $pagination.= "<a href=\"$targetpage? page=$counter&$queryString\"><div class=\"pGroup\">$counter</div></a>";                    
                                       }
                                   }
                               }

                               //next button
                               if ($page < $counter - 1) 
                                   $pagination.= "<a href=\"$targetpage?page=$next\&$queryString"><div   class=\"pNext pButton pGroup\">
                                            </div></a><div class=\"btnseparator\"></div>";
                               else
                                   $pagination.= "<div class=\"pNext pButton pGroup\"></div><div class=\"btnseparator\"></div>";
                               $pagination.= "</div>\n";       
                           }
                               if ($page == 0) $page = 1;                  //if no  page var is given, default to 1.
                           $prev = $page - 1;                          //previous  page is page - 1
                           $next = $page + 1;                          //next page is page + 1
                           $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
                           $lpm1 = $lastpage - 1;                      //last page minus 1

                           /* 
                               Now we apply our rules and draw the pagination object. 
                               We're actually saving the code to a variable in case we want to draw it more than once.
                           */
                           $pagination = "";
                           if($lastpage > 1)
                           {   
                               $pagination .= "<div class=\"pagination\">";
                               //previous button
                               if ($page > 1) 
                                   $pagination.= "<a href=\"$targetpage?page=$prev&$queryString\"><div class=\"pPrev pButton pGroup\">
                                       <span></span>
                                       </div></a><div class=\"btnseparator\"></div>";

                               else
                                   $pagination.= "<div class=\"pPrev pButton pGroup\">
                                       <span></span>
                                       </div><div class=\"btnseparator\"></div>";  

                               //pages 
                               if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
                               {   
                                   for ($counter = 1; $counter <= $lastpage; $counter++)
                                   {
                                       if ($counter == $page)
                                           $pagination.= "<div class=\"pGroup\">$counter</div>";
                                       else
                                           $pagination.= "<a href=\"$targetpage?page=$counter&$queryString\"><div class=\"pGroup\">$counter</div></a>";                 
                                   }
                               }
                               elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
                               {
                                   //close to beginning; only hide later pages
                                   if($page < 1 + ($adjacents * 2))        
                                   {
                                       for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                                       {
                                           if ($counter == $page)
                                               $pagination.= "<div class=\"pGroup\">$counter</div>";
                                           else
                                               $pagination.= "<a href=\"$targetpage?page=$counter&$queryString\"><div class=\"pGroup\">$counter</div></a>";                 
                                       }
                                       $pagination.= "...";
                                       $pagination.= "<a href=\"$targetpage?page=$lpm1&$queryString\">$lpm1</a>";
                                       $pagination.= "<a href=\"$targetpage?page=$lastpage&$queryString\">$lastpage</a><div class=\"btnseparator\"></div>";     
                                   }
                                   //in middle; hide some front and some back
                                   elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
                                   {
                                       $pagination.= "<a href=\"$targetpage?page=1&$queryString\">1</a>";
                                       $pagination.= "<a href=\"$targetpage?page=2&$queryString\">2</a>";
                                       $pagination.= "...";
                                       for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                                       {
                                           if ($counter == $page)
                                               $pagination.= " <div class=\"pGroup\">$counter</div>";
                                           else
                                               $pagination.= "<a href=\"$targetpage?page=$counter&$queryString\"><div class=\"pGroup\">$counter</div></a>";                 
                                       }
                                       $pagination.= "...";
                                       $pagination.= "<a href=\"$targetpage?page=$lpm1&$queryString\">$lpm1</a>";
                                       $pagination.= "<a href=\"$targetpage?page=$lastpag&$queryStringe\">$lastpage</a><div class=\"btnseparator\"></div>";     
                                   }
                                   //close to end; only hide early pages
                                   else
                                   {
                                       $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                                       $pagination.= "<a href=\"$targetpage?page=2&$queryString\">2</a>";
                                       $pagination.= "...";
                                       for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                                       {
                                           if ($counter == $page)
                                               $pagination.= "<div class=\"pGroup\">$counter</div>";
                                           else
                                               $pagination.= "<a href=\"$targetpage?page=$counter&$queryString\"><div class=\"pGroup\">$counter</div></a>";                 
                                       }
                                   }
                               }

                               //next button
                               if ($page < $counter - 1) 
                                   $pagination.= "<a href=\"$targetpage?page=$next&$queryString\"><div class=\"pNext pButton pGroup\">
                                            </div></a><div class=\"btnseparator\"></div>";
                               else
                                   $pagination.= "<div class=\"pNext pButton pGroup\"></div><div class=\"btnseparator\"></div>";
                               $pagination.= "</div>\n";       
                           }?>  

                         <div id="flexme1"><table>
                                   <thead> 
```

# java - 使用 DII 动态调用 .NET 和 java Web 服务

> ID：15380831
> 
> 赞同：1
> 
> 时间：2013-03-13T09:01:35.743
> 
> 标签：java, .net, web-services, dynamic, web

我编写了一个使用 DII 动态调用 java 和 .net Web 服务的 java 程序。Java Web 服务是使用 netbeans 和 .Net 使用 Visual Studio 2008 创建的。我使用了 org.apache.axis.client.Call 和 org.apache.axis.client.Service。在以下代码中，如果我包含参数的 Qname，则对 .NEt 服务的调用成功。

```
 call.addParameter(**new QName("http://tempuri.org/","b"),//** b is parameter name
                         new QName("http://www.w3.org/2001/XMLSchema","int"),
                         java.lang.Integer.class,// parameter XML type QName
                         ParameterMode.IN); 
```

但是以上方法在 java web 服务的情况下不起作用，java 采用默认命名空间提供并要求参数在 addParameter() 方法中不合格，如下所示

```
call.addParameter(b,// b is parameter name,
                     new QName("http://www.w3.org/2001/XMLSchema","integer"),
                     java.lang.Integer.class,// parameter XML type QName
                     ParameterMode.IN); 
```

有没有办法改变 java web 服务的这种行为，使其理解合格的参数或让 .Net 服务理解不合格的参数。

基本上我试图从一个方法动态地调用 java 和 .net 服务。

感谢和问候阿克沙亚

# sql-server-2008-r2 - 无法在更新语句中绑定多重标识符

> ID：15380833
> 
> 赞同：0
> 
> 时间：2013-03-13T09:01:38.217
> 
> 标签：sql-server-2008-r2

我正在尝试在 sql server 2008r2 上执行此查询-

```
SELECT @lUpd1 = 'UPDATE ts1cust.dbo.t_grgr_xwalk 
SET    xwalk.WEB = info.WEB,xwalk.AVIVIA = info.AVIVIA,xwalk.MSP = info.MSP,xwalk.QO   =    info.QO
FROM   ts1cust.dbo.t_plan_mspqo_info info, ts1cust.dbo.t_grgr_xwalk xwalk
WHERE  info.PLANID = xwalk.ID_471' 
```

但得到以下提到的错误-

```
 Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "xwalk.WEB" could not be bound. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:06:18.020

您将表别名`t_grgr_xwalk`为`xwalk`，因此对于第一个表达式，`Update Table`您也应该使用`xwalk`。

```
SELECT @lUpd1 = 'UPDATE xwalk
SET    WEB = info.WEB,
       AVIVIA = info.AVIVIA,
       MSP = info.MSP,
       QO = info.QO
FROM   ts1cust.dbo.t_plan_mspqo_info info, ts1cust.dbo.t_grgr_xwalk xwalk
WHERE  info.PLANID = xwalk.ID_471' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:07:02.963

您可以在下面尝试： SELECT @lUpd1 = 'UPDATE ts1cust.dbo.t_grgr_xwalk xwalk SET xwalk.WEB = info.WEB,xwalk.AVIVIA = info.AVIVIA,xwalk.MSP = info.MSP,xwalk.QO = info.QO FROM ts1cust.dbo.t_plan_mspqo_info info WHERE info.PLANID = xwalk.ID_471'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:08:08.393

您不能在`SET`子句中的列的赋值侧使用多部分标识符。

```
SELECT @lUpd1 = 'UPDATE xwalk
SET    WEB = info.WEB, --<-- no xwalk. here
       AVIVIA = info.AVIVIA,
       MSP = info.MSP,
       QO   =    info.QO
FROM   ts1cust.dbo.t_plan_mspqo_info info
   INNER JOIN
       ts1cust.dbo.t_grgr_xwalk xwalk
         ON  info.PLANID = xwalk.ID_471' 
```

我还冒昧地将表引用替换为您在顶部使用的别名`UPDATE`，并切换到使用 ANSI`JOIN`而不是`,`

# linux - 简单的 RSync EXCLUDE 选项？

> ID：15380838
> 
> 赞同：5
> 
> 时间：2013-03-13T09:01:48.500
> 
> 标签：linux, rsync

我想在我的命令中有一个简单且有效的（多个）`exclude`选项。`rsync`可以说我将排除`a file`和`a directory`：

*   /var/www/html/test.txt
*   /var/www/html/images/

我所做的是：

`rsync -avz --exclude="/var/www/html/test.txt" --exclude="/var/www/html/images/" /var/www/html root@xx.xx.xx.xx:/var/www`

或者

`rsync -avz --exclude=/var/www/html/test.txt --exclude=/var/www/html/images/ /var/www/html root@xx.xx.xx.xx:/var/www`

或者

`rsync -avz --exclude /var/www/html/test.txt --exclude /var/www/html/images/ /var/www/html root@xx.xx.xx.xx:/var/www`

..

但是，这`--exclude`是行不通的！
一切都会过去！

*   请问如何以这种简单的格式进行操作？

*注意：我也不想使用外部排除列表文件。只需一个简单的命令即可。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T07:57:19.143

经过多次学习和测试，我自己解决了。真正的问题是（对我而言）可以理解的`--exclude`选项使用格式。

我不知道其他人的情况如何，但我刚刚发现：

*   **“--exclude”路径不能是完整的绝对路径！**

因为我使用的是这样的路径：`--exclude /var/www/html/text.txt`这导致事情不起作用。所以我像这样使用：

```
--exclude text.txt --exclude images/ 
```

..它有效！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-14T12:35:55.300

我个人喜欢这种`--exclude={text.txt,images/}`格式。

*   请记住，使用 rsync，所有以 / 开头的排除（或包含）路径都锚定到**传输的根目录**，在您的示例中将是`/var/www/html`目录！！，因此如果您指定`/text.txt`它只是 @ 根目录的文件您的传输目录不在树的上方。[您可以在此处](http://www.thegeekstuff.com/2011/01/rsync-exclude-files-and-folders/)找到更多信息和示例

# sencha-touch-2 - 管理一个组件上的点击事件而不是另一个组件

> ID：15380844
> 
> 赞同：4
> 
> 时间：2013-03-13T09:02:10.883
> 
> 标签：sencha-touch-2, listener

我有一个带有点击监听器（红色方块）的面板，在它上面还有一个按钮（绿色）。像这样的东西：

![在此处输入图像描述](../Images/a6d3cb42a060aa1ea4521b8236c4236f.png)

当按下按钮时，我想避开红色方块的点击监听器，但我找不到这样做的方法。你可以帮帮我吗？

这个例子不完全是我的代码（我使用控制器、数据项等）但同样的问题：http: [//jsfiddle.net/6ah6U/](http://jsfiddle.net/6ah6U/)

```
Ext.Viewport.add({
    xtype: 'panel',
    height: 300,
    width: 300,
    style: 'background: #ff0000',
    items: [{
        xtype: 'panel',
        height: 50,
        width: 50,
        style: 'background: #00ff00',
        listeners: {
            tap: function() {
                console.log('green tapped');
            },
            element: 'element'
        },
    }],
    listeners: {
        tap: function() {
            console.log('red tapped');
        },
        element: 'element'
    },
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:43:03.503

只需在绿色面板上处理点击事件的函数中停止事件的传播：

```
tap: function(btn, e) {
  alert('green tapped');
  e.stopPropagation();
}, 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:08:07.573

首先，你可以给你的绿色方块一个 id：

```
.......
height: 50,
width: 50,
id: 'green'
....... 
```

然后在`listeners`你的父元素的红色方块内，你可以检查`target`你的`tap event`，看看它是否是绿色方块：

```
listeners: {
    tap: function(e, node) {
        if(node.parentNode.id !== 'green') {
            console.log('red tapped');
        }
     },
     element: 'element'
} 
```

请注意，在这种情况下，我使用[parentNode](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1060184317)来正确遵循 Sencha Touch 的 HTML 结构。您可以使用检查元素工具来更好地了解它。

更新演示：http: [//jsfiddle.net/6ah6U/1/](http://jsfiddle.net/6ah6U/1/)

# c# - 动态操作链接

> ID：15380846
> 
> 赞同：2
> 
> 时间：2013-03-13T09:02:26.737
> 
> 标签：c#, asp.net, asp.net-mvc

我正在使用 asp.net mvc 4，我有以下场景

```
Cities           Places     Events
------           ------------------
City 1          |                  
City 2          |
                | 
```

左侧导航（城市）列出了数据库中的所有城市。地点和事件也是动作方法的链接。

```
<li>@Html.ActionLink("Places", "Places", null, new{id="placeslink"})</li>
<li>@Html.ActionLink("Events", "Events", null, new{id="eventslink"})</li> 
```

我正在使用以下脚本（jQuery）异步加载地点和事件

```
$('#placeslink').click(function (event) {
    event.preventDefault();

    var url = $(this).attr('href');
    $('#content').html(ajax_load).load(url);
});

$('#eventslink').click(function (event) {
    event.preventDefault();

    var url = $(this).attr('href');
    $('#content').html(ajax_load).load(url);
}); 
```

它工作正常，并在单击地点和事件链接时从数据库中填充页面上的所有地点（不是特定城市）和事件。

现在我想要实现的是，当用户在查看地点时单击一个城市，只显示该城市中的地点，如果选择了事件，同一个城市链接应该显示该城市中的事件。类似地，如果选择了城市（例如城市 1）并且用户单击地点，则显示所选城市中的地点，并且如果她单击事件，则显示所选城市的事件。

我有以下操作方法

```
public ActionResult Places()
{
  if (Request.IsAjaxRequest())
  {
     ....  
     return PartialView(model);               

  }
  return View();
} 
```

它非常令人困惑，我想不出一种方法来为城市、地点和事件生成适当的链接并实现上述结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:49:54.863

试一试，我会制作这样的视图模型

```
public class PlacesAndEventsViewModel
{
    public string LocationOption { get; set; }  //places or events

    public List<Place> Places { get; set; }

    public List<Event> Events { get; set; }

    public int? CityID { get; set; }
} 
```

还有我的控制器

```
//this is get
public ActionResult  ShowLocations()
{
    var model = new PlacesAndEventsViewModel();

    model.CityID = null; //or any default value
    model.LocationOption = "places"; //or any default value
    model.Places = new List<Place>(); //or GetAllPlacesFromDB();
    //You can do the same for events but I think you need one at a time

    return View("ViewPlaces", model);
}

[HttpPost]
public ActionResult  ShowLocations(PlacesAndEventsViewModel model)
{
    if(model.LocationOption == "places")
    {
        model.Places = GetAllPlacesByCity(model.CityID);
        return View("ViewPlaces", model);   //All these could be partial view
    }
    else if(model.LocationOption == "cities")
    {
        model.Events = GetAllEventsByCity(model.CityID);
        return View("ViewEvents", model);  //All these could be partial view
    }
    else
    {
        return View("ViewPlaces", model);  //All these could be partial view
    }
} 
```

您可能需要将 Ajax 更改为 $.ajax()

```
 $.ajax({
     url: '@Url.Action("ShowLocation"),
     data: { LocationOption: '@Model.LocationOption', CityID: @Model.CityID }
  }); 
```

# javascript - 从 javascript 调用按钮的事件处理程序时引发参数计数不匹配异常

> ID：15380849
> 
> 赞同：1
> 
> 时间：2013-03-13T09:02:44.287
> 
> 标签：javascript, asp.net, modal-dialog

我在页面上有几个文本框，其值是从这样的模式窗口的返回值中填充的，并且我有一个 javascript 方法，它以下列方式调用按钮的事件处理程序。值被正确返回，文本框被正确填充，但我得到一个异常参数计数不匹配。

```
 res = window.showModalDialog('frm_VisitorSearchPopUp.aspx', "", "dialogWidth:1024px;dialogHeight:600px");
getElementById('<%=AddVisitorID.ClientID %>').click(); 
```

当我使用 window.open() 方法时不会出现这个问题，谁能告诉我为什么会出现这个问题。我的代码

```
function openup() {
    var left = screen.width / 2 - 1024 / 2;
    var tops = screen.height / 2 - 600 / 2;
    var d = new Date();
    var res;
    res = window.showModalDialog('frm_VisitorSearchPopUp.aspx', "", "dialogWidth:1024px;dialogHeight:600px");
    setvalues(res.PersonName, res.Address, res.CompanyName, res.ContactNumber, res.Email);
}

function setvalues(PersonName, Address, CompanyName, ContactNumber, Email) {
    var RowId = $("#<%= VisitorDetailsGrid.ClientID%>").getDataIDs();
    for (i = 0; i < RowId.length; i++) {
        rowData = $("#<%= VisitorDetailsGrid.ClientID%>").getRowData(RowId[i]);
        if (rowData.PersonName == PersonName && rowData.ContactNumber == ContactNumber && rowData.CompanyName == CompanyName && rowData.Email == Email && rowData.Address == Address) {
            alert("The visitor \"" + PersonName + "\" has already been added to the visitor's list.");
            document.getElementById('<%=PersonNameID.ClientID%>').value = "";
            document.getElementById('<%=AddressID.ClientID%>').value = "";
            document.getElementById('<%=CompanyNameID.ClientID%>').value = "";
            document.getElementById('<%=ContactNumberID.ClientID%>').value = "";
            document.getElementById('<%=EmailID.ClientID%>').value = "";
            return;
        }
    }
    document.getElementById('<%=PersonNameID.ClientID%>').value = PersonName;
    document.getElementById('<%=AddressID.ClientID%>').value = Address;
    document.getElementById('<%=CompanyNameID.ClientID%>').value = CompanyName;
    document.getElementById('<%=ContactNumberID.ClientID%>').value = ContactNumber;
    document.getElementById('<%=EmailID.ClientID%>').value = Email;
    elem = document.getElementById('<%=AddVisitorID.ClientID %>').click();        

} 
```

# java - mongo-db 聚合查询在 mongo shell 上工作，但不在 java 程序中

> ID：15380852
> 
> 赞同：0
> 
> 时间：2013-03-13T09:02:55.320
> 
> 标签：java, mongodb

我正在做一个项目，其中我的 mongo 数据库中有大量集合。现在我必须从 mongo db 中获取一些细节，这些细节非常类似于 SQL group by 子句。我在 mongo shell 上成功执行了查询：

```
 > db.votes.aggregate(
    ... { $group : {
    ... _id : "vote_post_id",
    ... votesPerId : { $sum : 1 }
    ... }}
    ... );
    {
"result" : [
            {
                    "_id" : "vote_post_id",
                    "votesPerId" : 27371750
            }
    ],
    "ok" : 1

    }
    > 
```

现在，在从 java 程序执行查询时，我面临以下错误：

```
 Exception in thread "main" com.mongodb.CommandResult$CommandFailure: command 
    failed [aggregate]: { "serverUsed" : "localhost/127.0.0.1:27017" , 
    "errmsg" : "exception: aggregation result exceeds maximum document size (16MB)"
     , "code" : 16389 , "ok" : 0.0}
    at com.mongodb.CommandResult.getException(CommandResult.java:88)
    at com.mongodb.CommandResult.throwOnError(CommandResult.java:134)
    at com.mongodb.DBCollection.aggregate(DBCollection.java:1311)
    at main.Connetion.CheckConnection.GetNoOfVotesForAType(CheckConnection.java:210)
    at main.DAO.Votes.VoteDAO.findKeyWord(VoteDAO.java:109)
    at main.DAO.Votes.VoteDAO.main(VoteDAO.java:139) 
```

我已经调试了我的 java 程序，它正在生成我在 mongo shell 上写的确切查询：

```
 { "$group" : { "_id" : "$vote_post_id" , "count" : { "$sum" : 1}}} 
```

对于这个问题，我已经经历了很多答案，但似乎没有一个能解决这个问题。

我用于创建聚合函数的 java 代码：

// 创建我们的管道操作，首先使用 $match DBObject match = new BasicDBObject("$match", new BasicDBObject("vote_type_id", "1") );

```
 // build the $projection operation
    DBObject fields = new BasicDBObject("vote_post_id", 1);
    fields.put("_id", 0);
    DBObject project = new BasicDBObject("$project", fields );

    // Now the $group operation
    DBObject groupFields = new BasicDBObject( "_id", "$vote_post_id");
    groupFields.put("count", new BasicDBObject( "$sum", 1));
    DBObject group = new BasicDBObject("$group", groupFields);

    // run aggregation
    AggregationOutput output = votesCollection.aggregate( match, project, group );

    System.out.println(output.getCommandResult()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T21:24:35.280

要使您的查询与 shell 中的查询相同，请执行以下操作：

```
// $group operation
DBObject groupFields = new BasicDBObject( "_id", "vote_post_id");
groupFields.put("votesPerId", new BasicDBObject( "$sum", 1));
DBObject group = new BasicDBObject("$group", groupFields);

// run aggregation
AggregationOutput output = votesCollection.aggregate( group );

System.out.println(output.getCommandResult()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T21:13:41.643

在你的 shell 查询中，你正在做

```
_id : "vote_post_id", 
```

但是在你的 Java 查询中你正在做

```
"_id", "$vote_post_id" 
```

区别在于美元符号。 `$vote_post_id`替换该字段的值以用作存储桶键，而`vote_post_id`仅使用该文字值（因此只有一个存储桶）。

# css - 是否可以将本地 css 文件加载到某些域的浏览器？

> ID：15380859
> 
> 赞同：1
> 
> 时间：2013-03-13T09:03:35.450
> 
> 标签：css, browser, stylesheet, developer-tools

使用开发人员工具，我可以修改我当前在浏览器中查看的网站的 css 文件。

我想有效地做同样的事情——但不是修改css文件，而是加载一个本地css文件，只是为了那个特定的域。

另一种表述方式：“当加载 stackoverflow.com 的任何页面时，将 C:\test.css 加载到浏览器”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:13:47.647

是的，这是可能的。看看[http://userstyles.org](http://userstyles.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T15:43:02.233

Userstyles.org 提供 CSS 文件以使用扩展名“Stylish”，而 Stylish 最近宣布它们正在变得邪恶（[https://forum.userstyles.org/discussion/comment/109966/#Comment_109966](https://forum.userstyles.org/discussion/comment/109966/#Comment_109966)）因此不能使用了。

可以将样式与greasemonkey一起使用，但随后对各种网站的激活不再起作用（CSS被转换为JS文件，并且应该应用它的网站列表被硬编码在该脚本的if语句中）。即，为了在使用dokuwiki 但不是[http://dokuwiki.org](http://dokuwiki.org)的站点上使用例如“dokuwiki 突出显示和全宽” ，您必须编辑该if 语句并重新加载。

# javascript - 如何使评论出现在 Rails 3 的弹出窗口中？

> ID：15380862
> 
> 赞同：0
> 
> 时间：2013-03-13T09:03:52.920
> 
> 标签：javascript, ruby, ruby-on-rails-3

**更新**

我有弹出窗口工作，但我遇到了代码问题。如何在该弹出窗口中仅显示与帖子关联的评论？请参阅下面的代码，我已经拥有该视图。

我决定使用弹出窗口将是解决当前格式问题的最简单方法。基本上，我在每个帖子下都有“评论”。我不想让它们显示在帖子下方，而是在单击“X 评论”链接时让它们出现在弹出窗口中。原因是，当我试图让它们出现在下面时，我无法正确格式化。

这是我在视图中的评论数的链接，将点击弹出窗口

```
<a href="#" id="comment_count"><%= micropost.comments.count.to_s %> Comment </a> 
```

稍后我将实现文本的复数化。

这是与每个帖子相关的评论的代码。

```
<div class ="ItemComments"><% if post.comments.exists? %>
    <% post.comments.each do |comment| %>

   <%= image_tag("http://www.gravatar.com/avatar.php?gravatar_id=#{Digest::MD5::hexdigest(comment.user.email)}") %> <!-- Retrieves Gravatar -->

    <%= link_to comment.user.name, comment.user %>
            <span class="timestamp"><%= time_ago_in_words(comment.created_at) %> ago</span>
    <span class="content2"><%= comment.comment_content %></span>
    <% end %></div> 
```

上面的视图被渲染到 _post.html.erb 中

```
 <%= render 'shared/comment_form', post: post %> 
```

单击每个帖子下的链接时，如何弹出相关的“评论”？

# java - Switch 案例中的 Java 7 新功能字符串数据类型

> ID：15380863
> 
> 赞同：0
> 
> 时间：2013-03-13T09:03:53.513
> 
> 标签：java, string, switch-statement, java-7

是否需要覆盖 equals() 方法以在 Switch 案例中使用 String 数据类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:05:48.197

不仅您不需要这样做，而且您根本不能（`String`是`final`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:10:38.823

如果您的意图是`String`在您的`Switch`语句中使用，那么最好使用 [ENUM TYPE](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

# xaml - 如何从 xaml windows 8 App 中网格控件内的组合框中选择一个项目？

> ID：15380871
> 
> 赞同：0
> 
> 时间：2013-03-13T09:04:17.417
> 
> 标签：xaml, windows-8, microsoft-metro, devexpress

我正在开发一个 Windows 8 应用程序，其中我在 dev express windows8 网格控件中放置了一个组合框。我可以填充组合框的日期，我可以将选择项保存在数据库中。但是当我再次加载它时，组合框中先前选择的值不会被默认。

```
<DataTemplate >
   <ComboBox x:Name="cNumber" SelectedValuePath="id" DisplayMemberPath="value"
   SelectedValue="{Binding Path=AreaSeq, Mode=TwoWay}" Loaded="cNumber_Loaded_1" 
   Height="30" Width="60" Tag="{Binding AreaId}" 
   Style="{StaticResource ComboBoxStyle1}"
   SelectionChanged="ComboBox_SelectionChanged_1" />
</DataTemplate> 
```

在 Loaded 函数中，我正在填充我的网格，在 selectionchanged 中，我正在存储它的值。

# javascript - 仅使用 JavaScript 和 HTML5 的邮件脚本

> ID：15380874
> 
> 赞同：0
> 
> 时间：2013-03-13T09:04:21.280
> 
> 标签：javascript, html, contact

*是否可以创建一个仅*使用 HTML5 和 JavaScript通过电子邮件发送答案的联系表单？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:11:09.057

在表单的 action 字段中，将 action 设置为“mailto:yourremailaddress”，例如：

```
 <form action="mailto:myforms@mydomain.com"> 
```

如果您想以纯文本形式发送表单数据，您可以使用以下内容

在表单属性中添加“enctype=text/plain”。表单代码变为：

```
 <form action="mailto:myforms@mydomain.com" enctype="text/plain" > 
```

提交此表单后，您将收到可读格式的电子邮件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:16:00.010

我认为不可能通过`mail`函数直接从 JavaScript 执行此操作，因为不能假定用户的本地计算机正在运行邮件服务器。没有任何东西可以发送电子邮件。

我不确定这是多么“符合标准”，但是您可以导航到（通过使用链接或`document.location`）到`mailto:user@example.com`或左右，这将开始在用户的标准电子邮件客户端中撰写电子邮件，允许他们直接向您发送电子邮件。尽管这会暴露他们和您的电子邮件地址。

# python - 如何在大型 Python 代码库中用一个制表符替换四个空格？

> ID：15380886
> 
> 赞同：3
> 
> 时间：2013-03-13T09:04:35.357
> 
> 标签：python, tabs, coding-style, space

我已经下载了一个 python 代码并想对其进行编辑。问题是我曾经使用制表符进行缩进，但文件使用四个空格，如果使用空格和制表符的组合，视觉上看起来不错，但代码会产生错误。

我的问题是是否有一种简单的方法可以用制表符替换空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:05:50.527

获得理解模拟选项卡的编辑器。然后它将使用 4 个空格模拟制表符。现在大多数编辑都可以做到这一点。它们感觉就像制表符，但却是空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:08:46.943

使用`reindent.py`. 它应该在您系统上的工具/脚本中。在某些情况下，它可能不会默认安装，并且需要添加额外的包，例如：python-examples 或 python-tools。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:15:54.220

你有几个选择：

1.  使用可以配置为使用制表符或空格缩进的编辑器，并根据需要重新配置。[Vim](http://www.vim.org/)、[Eclipse](http://www.eclipse.org/)、[TextMate](http://macromates.com/)、[GEdit](http://projects.gnome.org/gedit/)或任何其他甚至是中等程度的代码编辑器都可以做到这一点。
    此外，如果您的编辑器支持它，请打开显示初始空白。
2.  在 linuxes/unice 上，您有多个命令行工具来帮助您进行转换。只需查看[此 SO 问题的答案](https://stackoverflow.com/questions/1424126/replace-whitespaces-with-tabs-in-linux)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:30:06.670

在 Vim 中有命令 retab。我的 vimrc 中有这行：

```
nnoremap <F7> :set noexpandtab!<CR> 
```

所以，任何时候我需要从制表符恢复到空格，反之亦然，我按 F7 并在 vim 中调用命令：

```
:retab! 
```

如果您使用 vim - **spacehi.vim** ，这是非常有用的插件。该插件将突出显示一行上的制表符和尾随空格，并能够打开和关闭突出显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-15T10:03:44.050

如果您在 bash 中使用 GNU/Linux 或 MacOSX，那么您可以在命令行中使用它：

```
find . -type f -name '*.py' | while read file; do
     grep '    ' $file > /dev/null && sed -ie 's/    /\t/g' $file
done 
```

# android - 如何停止动画

> ID：15380894
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:05:04.593
> 
> 标签：android, animation

我创建了一个弹跳球的动画（通过下面的代码）。

我想知道如何在特定条件下停止此动画，例如 10 秒后或当球到达特定坐标时。

编码：

```
public class MyDemoView extends ImageView{
    private Context mContext;

    int x = -1;
    int y = -1;
    private int xVelocity = 10;
    private int yVelocity = 5;
    private Handler h;
    private final int FRAME_RATE = 30;

    public MyDemoView(Context context, AttributeSet attrs)  {
        super(context, attrs);
        mContext = context;
        h = new Handler();
    }

    private Runnable r = new Runnable() {
        @Override
        public void run() {
            invalidate();
         }
    };

    protected void onDraw(Canvas c) {
        BitmapDrawable ball = (BitmapDrawable) mContext.getResources().getDrawable(R.drawable.ball);

        if (x<0 && y <0) {
            x = this.getWidth()/2;
            y = this.getHeight()/2;
        } else {
            x += xVelocity;
            y += yVelocity;

            if ((x > this.getWidth() - ball.getBitmap().getWidth()) || (x < 0)) {
                xVelocity = xVelocity*-1;
            }

            if ((y > this.getHeight() - ball.getBitmap().getHeight()) || (y < 0)) {
                yVelocity = yVelocity*-1;
            }
        }

        c.drawBitmap(ball.getBitmap(), x2, y2, null);
        h.postDelayed(r, FRAME_RATE);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:11:29.833

要停止动画，请使用以下代码：

```
object.clearAnimation(); 
```

或者

```
animation.cancel(); 
```

后者可能不适用于2.1，不记得了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:08:47.277

根据您的代码，只需调用`h.removeCallbacks(r)`?

# matlab - 在 MATLAB 中打开多个名称相似的文件：importdata 无法打开 strcat 或 dir 给定名称的文件

> ID：15380895
> 
> 赞同：-2
> 
> 时间：2013-03-13T09:05:11.567
> 
> 标签：matlab, file-io, filenames

正如[Shai 和 CTZStef 建议](https://stackoverflow.com/questions/15366374/how-can-i-load-100-files-with-similar-names-and-or-string-in-just-one-step-in-ma/15366423#15366423)的那样，当我必须在 MATLAB 中打开多个具有相似名称的文件时，我必须这样做

```
for k=1:size(fls)
    fileName = strcat('int_',num2str(k),'.ASC');
    A(k) = importdata(fileName, ' ', 9);
    x(k) = A(k).data(:,1);
    y(k) = A(k).data(:,2);
end 
```

或者也

```
fls = dir('int_00_*.ASC');
for fi=1:numel(fls)
    A(fi) = importdata(fls(fi).name, ' ',9);
end 
```

好吧，问题是它们都不起作用。我应该怎么办？我的 MATLAB 版本有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:19:08.123

您需要更仔细地遵循您得到的答案：

1.  `strcat`解决方案不能处理文件名的零填充。您必须**手动**将所有文件从 重命名`'int_001.ASC'`为 `'int_1.ASC'`.
    **更新**（由于@DedekMraz 的评论）：您需要将`strcat`输入字符串修改为`strcat('int_', num2str( k, '%03d' ), '.ASC');`

2.  您可以使用与[此类](https://stackoverflow.com/questions/14213442/matlab-file-name-with-zero-padded-numbers?lq=1)似的策略。查看您已经得到的[答案的更新。](https://stackoverflow.com/a/15366423/1714410)

3.  你给你的`dir`函数的输入是**错误**的，它必须是`dir('int_*.ASC')`而不是`dir('int_00_*.ASC')`。

# ruby-on-rails - Faye 服务器未由工头启动

> ID：15380898
> 
> 赞同：4
> 
> 时间：2013-03-13T09:05:16.897
> 
> 标签：ruby-on-rails, faye, foreman

我正试图从工头开始 faye。我的 procfile 看起来像这样：

```
web: bundle exec rails server thin -p $PORT -e $RACK_ENV
worker: bundle exec sidekiq
redis: bundle exec redis-server
faye: bundle exec rackup faye.ru -s thin -E production 
```

当我跑`bundle exec foreman start`

web、worker 和 redis 服务器都正确启动，但 faye 服务器不正确。

在控制台中我得到：`10:53:56 faye.1 | started with pid 10907`

然后faye就没有更多了。

如果我使用 procfile: 中的命令运行 faye 服务器`bundle exec rackup faye.ru -s thin -E production`，faye 将正确启动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:38:56.190

当您在本地运行时：

```
bundle exec rackup faye.ru -s thin -E production 
```

`rackup`将使用它的默认端口，即 9292。

当它在 Herkou 上运行时，如果该端口已在使用中，它可能无法启动。`$PORT`据我所知，Heroku 动态地将变量分配给一个有效的空闲端口。

我的猜测是，Faye 要么从不同的端口开始，要么根本没有开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:38:37.153

看起来 faye 运行良好。尝试访问`http://localhost:{PORT}/faye.js`以查看它是否有响应。它应该与 JS 一起返回。确保调用faye服务器时使用正确的端口。一旦您开始提出请求，您应该会看到工头正在吐出 faye 日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:29:21.400

这是工头[缺少输出](https://github.com/ddollar/foreman/wiki/Missing-Output)的问题。

> 如果您没有看到程序的任何输出，则很可能它正在缓冲`stdout`。许多语言，例如 Ruby 和 Python`stdout`默认缓冲区。

Faye 没有设置`$stdout.sync = true`，因此它的输出丢失。

我前段时间遇到过同样的问题并试图解决它，但我的[拉取请求](https://github.com/ddollar/foreman/pull/202)被拒绝了。

# python - 将图像添加到 Tkinter

> ID：15380901
> 
> 赞同：3
> 
> 时间：2013-03-13T09:05:23.370
> 
> 标签：python, tkinter

我已经在 tkinter 中的代码中添加了一个图像文件，但它基本上填满了我的整个框架，所以如果可能的话，你能推荐一个教程来展示或解释如何做到这一点......除非你可以在这里给我看。

我还没有添加我的完整代码，但是一旦你将它保存在 python 目录中，下面的代码应该会显示一个测试图像。

我想创建一个“下一步”按钮，它会打开一个带有另一个图像的新框架。

```
from Tkinter import *

root = Tk()
ButtonImage = PhotoImage(file='test.gif')
testButton = Button(root, image=ButtonImage)
testButton.pack()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:20:46.260

你可以尝试这样的事情：

```
from Tkinter import *
from glob import glob

class ImageFrame(Frame):

    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.images = glob("*.gif")
        self.cur = 0
        # label showing the image
        self.image = PhotoImage()
        imagelabel = Label(self, image=self.image)
        imagelabel.grid(row=1, column=1)
        # button cycling through the images
        button = Button(self, text="NEXT", command=self.show_next)
        button.grid(row=2, column=1)
        # layout and show first image
        self.grid()
        self.show_next()

    def show_next(self):
        self.cur = (self.cur + 1) % len(self.images)
        self.image.configure(file=self.images[self.cur])

ImageFrame().mainloop() 
```

一些解释：

*   `glob`用于获取当前目录中匹配某个模式的所有文件的列表
*   `grid`是一个简单但非常灵活的 Tkinter 布局管理器（参见[Tkinter 参考](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/grid.html)）
*   绑定到按钮的`show_next`方法循环浏览图像并将新图像绑定到`PhotoImage`使用`configure`

结果是一个简单的框架，显示一个大图像和一个按钮，循环浏览`gif`当前目录中的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-30T02:22:46.757

有许多模块可以帮助您解决这个问题。您可以使用 PIL 模块。通常，在像您这样的情况下，我会使用 PIL 模块将图像加载并粘贴到框架上。这就是你这样做的方式。

```
from Tkinter import *
from PIL import Image, ImageTk
root = Tk()
Image       = Image.open(path).resize((300, 300)), Image.ANTIALIAS
ButtonImage = ImageTk.PhotoImage(Image)
# If you are using image by itself. Without it being a button. 
#Image_Label = Label(image = self.HomeImage, borderwidth=0, highlightthickness=0)
# Otherwise 
testButton = Button(root, image=ButtonImage)
testButton.pack()
root.mainloop() 
```

我相信这肯定会帮助您调整图像大小并将图像作为按钮加载到屏幕上。我们使用 PIL 将图像加载到框架上并调整图像大小。这也是您之前要求的。我在 Image.open() 函数上使用了 resize 方法。这会将图像调整为您想要的大小。标准是该图像的实际尺寸。

# php - 如何在 admin.php 中创建类似 yii 高级搜索的链接？

> ID：15380902
> 
> 赞同：0
> 
> 时间：2013-03-13T09:05:25.110
> 
> 标签：php, hyperlink, yii

如何在 Yii admin.php 中创建类似于高级搜索的链接？我喜欢制作另一个链接以在同一页面上打开表单。与高级搜索链接完全相同。

# java - 将两个数组放入 Jtable 行

> ID：15380909
> 
> 赞同：1
> 
> 时间：2013-03-13T09:05:41.503
> 
> 标签：java, arrays, swing, for-loop, jtable

我有两个数组，它们的元素数量相等。我想把它放在 JTable 行中（就像下面的 ascii 表示例）。我对两个数组都使用了表模型和循环，但我存档了其他东西（见打印屏幕）。注意：我想保持两个数组元素之间的对应关系，就像在 ascii 表示例中一样。

```
 Integer[] intArray = new Integer[stringArray.length];
                    for (int i = 0; i < stringArray.length; i++) {
                        intArray[i] = Integer.parseInt(stringArray[i]);
                    }

                    System.out.println(Arrays.toString(intArray)); //output [285, 715, 1437, 1749]

                    Integer[] intArray1 = new Integer[stringArray1.length];
                    for (int i = 0; i < stringArray1.length; i++) {
                        intArray1[i] = Integer.parseInt(stringArray1[i]);
                    }

                    System.out.println(Arrays.toString(intArray1)); //output [0, 0, 1087, 0]

                    DefaultTableModel modelPeaks = new DefaultTableModel();
                    JTable table = new JTable(modelPeaks);

                    modelPeaks.addColumn("1st Column");
                    modelPeaks.addColumn("2nd Column");

                    for (int i = 0; i < intArray.length; i++) {
                        for (int j = 0; j < intArray1.length; j++) {

                            modelPeaks.addRow(new Object[]{intArray[i], intArray1[j]});
                        }
                    } 
```

输出是：

![在此处输入图像描述](../Images/77b33abd419e1c7a54d75734954dbb56.png)

但我想存档这个：

```
+--------------------+--------------------+
+   1st Column       +    2nd Column      +
+--------------------+--------------------+
+    285             +      0             +
+    715             +      0             +
+    1437            +     1087           +
+    1749            +      0             +
+--------------------+--------------------+ 
```

我认为这是来自循环，但我不知道如何解决它。有人可以帮助我吗？并提前感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:16:40.420

最后一个循环应该是

```
 for (int i = 0; i < intArray.length; i++) {
    modelPeaks.addRow(new Object[]{intArray[i], intArray1[i]});
 } 
```

始终确保两个数组具有相同的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T09:14:22.513

如果数组的长度相同，则可以对两者使用相同的迭代器：

```
for (int i = 0; i < intArray.length; i++) {
    modelPeaks.addRow(new Object[]{intArray[i], intArray1[i]});
} 
```

# ajax - IE 中导致无法加载所有页面组件的安全设置

> ID：15380918
> 
> 赞同：0
> 
> 时间：2013-03-13T09:05:57.730
> 
> 标签：ajax, security

情况是这样的：站点在 IE 中被添加为受信任的，我可以打开它，但网页中的所有组件都不是可见的。该页面包含多个选项卡（使用 AJAX），默认为一个选项卡。尝试访问其他选项卡时，它们显示为空（未加载选项卡内容）。因此，始终只有默认选项卡会打开加载内容，而其他选项卡则不会。
IE 中的哪些安全设置会导致此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:23:32.377

您必须启用“活动脚本”并允许浏览器在旧版本的 IE 中运行安全的 ActiveX 模块。通常的解决方法是为 IE 使用 iframe，因为大多数人不会将域添加到受信任的域列表并处理 IE 关于安全性降低的所有警告（或者他们无权访问其工作站中的这些设置，因为由 IT 设置的组策略）。

在 IE 6 之后，他们开始使用标准方法...查看[Microsoft 关于 XMLHTTP object 的参考](http://msdn.microsoft.com/en-us/library/ms537505%28VS.85%29.aspx)。

此外，您实际上必须能够在您的实例中按名称调用其他窗口（因为没有可用窗口和选项卡的主要 DOM 可访问列表），这意味着您需要从初始窗口打开它们，这样您可以将 Javascript 引用设置为可重用变量。

```
var Window1 = window.open(); 
```

# jquery - Jquery - 克隆选择值动态生成的表单

> ID：15380946
> 
> 赞同：0
> 
> 时间：2013-03-13T09:07:49.027
> 
> 标签：jquery, forms, select, clone, option

我正在尝试克隆动态生成表单的所有表单字段。此表单可以有一个或多个选择项。唯一的问题是，在用户选择不同的值后，我无法克隆所选项目的值。

我尝试了以下代码：

```
//Arguments: "name"s of forms to submit.
//First argument: the form which according to its "action" all other forms will be submitted.
//Example: mergeForms("form1","form2","form3","form4")    
function mergeForms() {
        var forms = [];
        $.each($.makeArray(arguments), function(index, value) {
            forms[index] = document.forms[value];
        });
        var targetForm = forms[0];
        $.each(forms, function(i, f) {
            if (i != 0) {
                $(f).find('input, select, textarea')
                    .clone()
                    .hide()
                    .appendTo($(targetForm));
            }
        }); 
```

希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T21:53:05.817

我找到了一个更好的方法来做到这一点。我正在克隆表单，因为我想将所有组合表单作为数据进行 AJAX 发布。我找到的解决方案是对多个表单进行序列化。这由 Jquery 支持。

现在我的代码如下所示：

```
$.ajax({
  type: "POST",
  url: "submitorder.cfm",
  data: $('#form1, #form2, #form3').serialize(), 
```

容易得多，而且我的选择值也已提交！

# javascript - 如何访问关于值的选择标签的文本？

> ID：15380955
> 
> 赞同：0
> 
> 时间：2013-03-13T09:08:17.053
> 
> 标签：javascript, html

假设我在某个变量“var”中有值“v”，现在我想显示 Valvo（文本尊重值 v）。有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:42:27.580

可能这会帮助你：

```
//array of varables
var names = ['apple','banana','valvo','blahblahblah']
//this is your variable
var variable = 'v'
//code to display names starting with the character in your variable
for(i=0;i<names.length;i++)
    if(names[i][0] == variable)
        alert(names[i]) 
```

这个答案是为了我对你的问题的解释。请享用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:24:19.013

HTML

```
<select id="sel">
  <option value="Volvo">Volvo</option>
  <option value="BMW">BMW</option>
</select> 
```

JS

```
var myvar = 'b';

var elem = document.querySelector('#sel option[value^='+myvar.toUpperCase()+']');
if (typeof elem != 'undefined') {
  elem.selected = true;
} 
```

在这里你可以测试-> [http://jsbin.com/ehayav/1](http://jsbin.com/ehayav/1)

mz

# vim - Vim - 每次关闭缓冲区时停止缓冲区编号自动增加

> ID：15380956
> 
> 赞同：1
> 
> 时间：2013-03-13T09:08:23.217
> 
> 标签：vim

例如，我有缓冲区`foo.c`。`b6`当我关闭它`bd`并打开时，`bar.c`我想`bar.c`在`b6`而不是`b7`.

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:18:34.410

那是不可能的；缓冲区编号在内部按顺序递增；当前实现中没有“数字重用”的概念。这将需要更改代码。反对这一点的论点：一些插件也将缓冲区相关信息与缓冲区编号相关联。如果该数字可以指向不同的缓冲区，那么这些插件就会混淆。

获得“干净”缓冲区编号的唯一方法是写入*viminfo*或会话文件，重新启动 Vim，然后重新加载这些缓冲区。

# tfs - TFS 团队资源管理器“BackgroundWorker 当前很忙，无法同时运行多个任务。”

> ID：15380958
> 
> 赞同：3
> 
> 时间：2013-03-13T09:08:32.483
> 
> 标签：tfs

有没有人遇到过这个错误信息？我不再能够将代码签入到 TFS。我尝试重新启动计算机，但没有帮助。

[图片](http://i45.tinypic.com/2gumybk.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:37:50.703

你可能有一个悬而未决的冲突。您需要先解决这些问题，然后才能继续。

在 vS2012 中，到 Team Explorer 窗口并选择 Actions -> Resolve Conflicts 并解决您的冲突。

# php - 如何从使用 ajax 的 javascript 函数中获取价值

> ID：15380962
> 
> 赞同：2
> 
> 时间：2013-03-13T09:08:44.147
> 
> 标签：php, javascript, jquery, ajax

我正在调用一个使用 ajax 获取值的函数，如何将此值返回给调用函数：
我的 ajax 调用函数是：

```
function getStatusOfAdv(advID){
   $.ajax({
      url:baseURL+"/admin/advertisers/get.adv.status.php",
      data:"param="+escape(advID),
      dataType:"html",
      cache:"false",
      success:function(result){
         return result;
      }
   });
} 
```

我必须将此结果值返回给调用函数，即：

```
function setAdvDetail(advID){
var status = getStatusOfAdv(advID);
alert(status);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:10:05.783

`$.ajax`是`async`调用，getStatusOfAdv 函数将在成功之前返回，您可以从成功调用函数并将结果传递给它。

```
function getStatusOfAdv(advID){
   $.ajax({
      url:baseURL+"/admin/advertisers/get.adv.status.php",
      data:"param="+escape(advID),
      dataType:"html",
      cache:"false",
      success:function(result){
         callYourFunction(result);
      }
   });
}

function callYourFunction(result)
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:10:08.923

`$.ajax()`调用是异步的，因此`getStatusOfAdv()`在 ajax 调用完成之前返回。因此，您将不得不重组您的代码，以便所有使用异步函数结果的代码要么在 ajax 成功处理程序中，要么从该处理程序调用。

您不能制作像 一样的同步函数`getStatusOfAdv()`，在其中使用异步调用，然后在返回时`getStatusOfAdv()`返回值。它无法完成，因为`getStatusOfAdv()`在异步 ajax 调用完成之前很久就返回了，因此返回值何时返回尚不清楚。

javascript 中的典型设计模式是在异步操作完成且数据可用时调用的回调函数中完成需要答案的工作：

```
function getStatusOfAdv(advID, fn){
   $.ajax({
      url:baseURL+"/admin/advertisers/get.adv.status.php",
      data:"param="+escape(advID),
      dataType:"html",
      cache:"false",
      success:function(result){
         fn(result);
      }
   });
}

function setAdvDetail(advID){
    getStatusOfAdv(advID, function(status) {
        alert(status);
        // any other code that uses the status goes here
    });
    // the status is NOT known here because the asynch function has
    // not yet completed
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:13:05.313

试试这个

```
 function getStatusOfAdv(advID){
   $.ajax({
      url:baseURL+"/admin/advertisers/get.adv.status.php",
      data:"param="+escape(advID),
      dataType:"html",
      cache:"false",
      success:function(result){
         alert(result);
      }
   });
} 
```

毕竟这是你在ajax函数调用之后所做的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:24:40.433

你可以使异步为假..

尝试

```
function getStatusOfAdv(advID){
var Result;
$.ajax({
  url:baseURL+"/admin/advertisers/get.adv.status.php",
  data:"param="+escape(advID),
  dataType:"html",
  cache:"false",
  async:"false"
  success:function(result){

     Result=result;
  }
});
return Result;
} 
```

但是将 async 设置为 false 并不是一个好习惯。

# php - ZFCUser 和 bjyauthorize - 如何省略登陆页面的授权

> ID：15380963
> 
> 赞同：1
> 
> 时间：2013-03-13T09:08:45.310
> 
> 标签：php, authentication, zend-framework2, zfcuser, bjyauthorize

我正在建立一个封闭的网站，每个人都有一个登陆页面。

我正在使用[`ZfcUser`](https://github.com/ZF-Commons/ZfcUser)和[`BjyAuthorize`](https://github.com/bjyoungblood/BjyAuthorize/)。现在一切正常，但我想知道如何排除我的应用程序的`Application\Controller\Index::index`操作。

在我的`module.bjyauthorize.global.php`我告诉我的行动不需要身份验证：

```
'BjyAuthorize\Guard\Controller' => array(
    array(
        'controller' => 'Application\Controller\Index',
        'action' => 'index',
        'roles' => array()
    ),
    // ... 
```

但我仍然被转发到`ZFCUser`登录页面。

知道我错过了什么吗？

**编辑：**

我尝试了这个`guest`角色，但到目前为止没有运气：

```
 'default_role'          => 'guest',
 'BjyAuthorize\Provider\Role\Config' => array(
     'guest' => array(),
     'user'  => array(
         'children' => array(
             'admin' => array(),
         ),
     ),
 ), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:10:58.133

***注意***：在[BjyAuthorize中有效`1.2.*`](https://github.com/bjyoungblood/BjyAuthorize/tree/1.2.1)

您必须允许`guest`用户访问索引页面：

```
'BjyAuthorize\Guard\Controller' => array(
    array(
        'controller' => 'Application\Controller\Index',
        'action' => 'index',
        'roles' => array('guest', 'user')
    ),
    // ... 
```

您在问题中定义的是全部拒绝。

由于 BjyAuthorize 的控制器保护配置充当[白名单](http://en.wikipedia.org/wiki/Whitelist)，因此目前无法同时允许访问所有角色。

# r - 如何使用包含 R 支持但终端不支持的字符的代码构建 R 包

> ID：15380967
> 
> 赞同：1
> 
> 时间：2013-03-13T09:08:50.230
> 
> 标签：r, terminal

作为我在 RI 中创建的包的一部分，它有一个函数可以计算一组肽序列的值。科学协议是将这些值命名为`yº3`、`bº6`、`xº13`等，因此我想遵循这一点。在 R GUI 中（至少在 Mac 上）`'º'`是一个可接受的字符，可以在字符串等中使用。这意味着我可以成功地创建一个函数，输出一个包含所需名称的列的数据框。

当我尝试构建包含该函数的包时，问题就来了。终端不理解此字符，并`\xbc`在从构建包运行相同功能时将其替换...

无论如何规避包生成器/终端的这个缺点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:48:42.460

[我遇到了这个解决方案，因为我在这里](https://stackoverflow.com/a/15308648/1478381)询问了一个不同的应用程序。Unicode 是要走的路。正如 Andrie 指出的那样，您可以使用 unicode

*   [U+00BA](http://en.wikipedia.org/wiki/Ordinal_indicator#)用于阳性序数指示符
*   [U+00B0](http://en.wikipedia.org/wiki/Degree_symbol)度数符号

将它们包括在表格`\uxxxx`中，即小`u`而不带`+`.

# forms - 为什么 Smartform 的功能模块名称会更改（有时）？

> ID：15380969
> 
> 赞同：3
> 
> 时间：2013-03-13T09:08:58.187
> 
> 标签：forms, code-generation, abap, sap-smart-forms

不是很关键的问题，但我很好奇

我正在处理一个表单，有时生成的函数名称是`/1BCDWB/SF00000473`，有时是`/1BCDWB/SF00000472`. 这是来回的。

有谁知道这背后的想法是什么？因为我很确定这不是一个错误（或者我可能错了）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:42:22.570

这不是一个错误。您始终必须使用`SSF_FUNCTION_MODULE_NAME`来确定实际的功能模块名称并使用`CALL FUNCTION l_function_module`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:55:19.320

Smartform FM 通过内部编号进行跟踪，并保存在表 STXFADMI 中。如果您删除了任何现有的表单，您总是会注意到开发系统中的不同数字。同样，您还会注意到质量系统中的不同编号，具体取决于表单在 QAS 中导入的顺序以及表单（因为测试表单未迁移到 QAS.

Adobe Form 生成的 FM 也有类似的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:36:52.390

您需要了解每个智能表单都有不同的接口，因此自动生成的功能模块需要具有不同的导入参数。

由于这个原因，“SSF*”FM 会为您的 smartform 生成一个特定的 FM。当您从一个系统迁移到另一个系统时，“生成的”FM 的名称会发生​​变化。这就是为什么您应该在调用“生成的”fm 时使用变量而不是对其进行硬编码的原因。

正如有人在此线程中正确所说的那样，Adobe 表单也是如此。

# android - 在边界中拖动图像

> ID：15380972
> 
> 赞同：3
> 
> 时间：2013-03-13T09:09:03.900
> 
> 标签：android, touch, drag

![在此处输入图像描述](../Images/91469bd36a17b129bbcc43995b5cf2e2.png)

我希望该图像仅被拖动到其父视图中。当用户尝试将其拖到视图之外时，它将返回其原始位置。基本上我正在实现android解锁类型功能。请帮帮我。它是我的主要课程。

```
public class MainActivity extends Activity {

@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    findViewById(R.id.myimage1).setOnTouchListener(new MyTouchListener());
    findViewById(R.id.topleft).setOnDragListener(new MyDragListener());
  }

  private final class MyTouchListener implements OnTouchListener {
    public boolean onTouch(View view, MotionEvent motionEvent) {
      if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
        ClipData data = ClipData.newPlainText("", "");
        DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
        view.startDrag(data, shadowBuilder, view, 0);
        view.setVisibility(View.INVISIBLE);
        return true;
      } else {
        return false;
      }
    }
  }

  class MyDragListener implements OnDragListener {
    Drawable enterShape = getResources().getDrawable(R.drawable.shape_droptarget);
    Drawable normalShape = getResources().getDrawable(R.drawable.shape);

    @Override
    public boolean onDrag(View v, DragEvent event) {
      //int action = event.getAction();
      switch (event.getAction()) {
      case DragEvent.ACTION_DRAG_STARTED:
        // Do nothing
        break;
      case DragEvent.ACTION_DRAG_ENTERED:
        v.setBackgroundResource(R.drawable.shape_droptarget);
        break;
      case DragEvent.ACTION_DRAG_EXITED:
        v.setBackgroundResource(R.drawable.shape);
        setFinishOnTouchOutside(true);
        break;
      case DragEvent.ACTION_DROP:
        // Dropped, reassign View to ViewGroup
        View view = (View) event.getLocalState();
        ViewGroup owner = (ViewGroup) view.getParent();
        owner.removeView(view);
        LinearLayout container = (LinearLayout) v;
        container.addView(view);
        view.setVisibility(View.VISIBLE);
        break;
      case DragEvent.ACTION_DRAG_ENDED:         
        v.setBackgroundResource(R.drawable.shape);
      default:
        break;
      }
      return true;
    }
  }
} 
```

主xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<RelativeLayout
    android:id="@+id/topleft"
    android:layout_width="match_parent"
    android:layout_height="100dp"
    android:layout_centerInParent="true"       
    android:background="@drawable/shape" >

    <ImageView
        android:id="@+id/myimage1"
        android:layout_width="wrap_content"
        android:layout_height="80dp"
        android:layout_centerVertical="true"
        android:src="@drawable/ic_launcher" />
</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T12:05:54.313

您可以通过在 OnTouch() 方法中使用它来实现移动控制。

```
//Some global variables
    float oldX=0,oldY=0;
    public boolean onTouch(View view, MotionEvent motionEvent) {
    if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
        oldY=motionEvent.getY();
        oldX=motionEvent.getX();
        ClipData data = ClipData.newPlainText("", "");
        DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
        view.startDrag(data, shadowBuilder, view, 0);
        view.setVisibility(View.INVISIBLE);
        return true;
       } else if(motionEvent.getAction()==MotionEvent.ACTION_MOVE) {
        if((motionEvent.getY()>oldY+10 || motionEvent.getY()<oldY-10))//The value 10 is controlling sensitivtiy of y axis greater than 10 or less than 10 the below code will be fired.
          {
             view.setEnabled(false);
                  RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams)            view.getLayoutParams();
            layoutParams.leftMargin = oldX;
            layoutParams.topMargin = oldY;
            layoutParams.rightMargin = -250;
            layoutParams.bottomMargin = -250;
            view.setLayoutParams(layoutParams);
            view.setEnabled(true);
          }
      }
      } 
```

# php - 无法获取 $_POST 值（php、html）

> ID：15380973
> 
> 赞同：2
> 
> 时间：2013-03-13T09:09:05.343
> 
> 标签：php, forms, post, include, scope

我无法获取从我的 php 文件中的 html 表单发送的 $_POST['name'] 值。我见过很多类似的问题，但没有任何帮助。我有很多包含，所以我认为这是一个范围问题，但我无法弄清楚。

索引.php

```
print_r($_POST); //Returns nothing, tried other ways too

//lot's of variables being defined

include 'sql_data_handlers.php';
//instantiating some things 
```

sql_data_handlers.php

```
//some functions retrieving data from sql db and finally:
include($DOCUMENT_ROOT . "page.html"); 
```

page.html

```
//html stuff
<?php
//Some conditions
include($DOCUMENT_ROOT . "comment_form.html");
?> 
```

comment_form.html

```
<form action="index.php" name="comment_form" id="comment_form" method="post">
    <input type="text" name="name" value="Anonymous" required><br>
    //lot's of inputs
    <input type="submit">
</form> 
```

我曾经有，`action="send_comment.php"`但我意识到它可以变成一个函数，所以我 ctrl+c 并适应`send_comments.php`了一个函数`sql_data_handlers.php`。问题是，现在我无法获取要在函数 on （包含在 中）中使用的`$_POST`值。`index.php``sql_data_handlers.php``index.php`

如果可能的话，我会使用`action="my_php_function_from_data_handlers.php($args)"`，但我想不是。顺便说一句，我已经试过了`action=""`。这可能看起来很混乱，但这样我只需要一个 .html 来进行站点布局，页面在 sql 上，而 .php 文件完成所有工作。

所有文件的完整来源（相当大，仍在处理中）： http: [//pastebin.com/2nRuCpNx](http://pastebin.com/2nRuCpNx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T13:48:52.113

确保您没有任何类型的重定向，因为您使用 index.php 来保存数据，您可能正在重新加载页面以显示更新的评论。如果你正在重新加载，$_POST 上将没有数据要由 print_r() 打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:14:33.550

尝试将输入名称属性的值更改为不同于“名称”的值。某些配置存在问题，尤其是 wordpress。

例如：

```
<input type="text" name="user_name" value="Anonymous" required> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:33:07.320

你介意改变你的

**.html**文件名到**.php**文件名

您的代码在我的本地服务器中运行，因为有时不同之处在于您的 Web 服务器的配置方式。

在 Web 服务器中运行时，最好在文件中使用 .php

# css - 响应式 Web 中的粘滞页脚 - 调整窗口大小时重叠内容

> ID：15380978
> 
> 赞同：2
> 
> 时间：2013-03-13T09:09:17.860
> 
> 标签：css, css-float, responsive-design, sticky-footer, window-resize

我正在制作一个液体页面，并且我有一个水平菜单栏（ul）绝对定位到底部（粘性页脚）。

![预期行为](../Images/896ffd88cd9a7c3ec8684c1698292bc9.png)

这东西没问题，但是当我调整浏览器大小时，显然菜单中的内部元素相互堆叠，使菜单太高并与主要内容重叠。

![重叠的问题](../Images/f9f9fa764c973c24ba39fb190c45c145.png)

有没有办法（以下任何一种）

*   让绝对定位菜单“向下”增长？
*   还是将与底部对齐的边缘设置为某个高度（使其从该点向底部增长）？
*   或为菜单提供布局使其推送上述元素（我试过玩`overflow`但对我不起作用）？

* * *

那是html：

```
<div class="container">
    <div class="izda">
        Foo
    </div>
    <div class="dcha">
        <p>Lorem ipsum dolor</p>
        <p>Lorem ipsum dolor</p>
        <p>Lorem ipsum dolor</p>

        <p>Lorem ipsum dolor LAST</p>
        <ul>
            <li>Item</li>
            <li>Another</li>
            <li>More</li>
            <li>Item</li>
        </ul>
    </div>
</div> 
```

和CSS：

```
.container {position:relative}
.izda {background:red;
       height:20em; 
       display:inline-block; 
       width:20%; 
       vertical-align:top;
}
.dcha {background:gold; 
       display:inline-block; 
       width:78%; 
       margin-bottom:3em;
}
ul {position:absolute;
    bottom:0;
    background:pink;
    margin:0;
    padding:0;
    max-width:100%;
}
ul li {float:left; 
       list-style:none;
       border:1px solid black;
       margin:0 1em;
       padding:1em;
} 
```

* * *

这里有一个工作示例：http: [//jsfiddle.net/KQhLs/2/](http://jsfiddle.net/KQhLs/2/)

如果你写了更多的段落，菜单会正常下降，这要归功于他父亲的边缘底部。

![粘性页脚正确下推](../Images/afd4960e10b75fc3ed4d6d1c3d39c391.png)

但是在调整框架大小时，您可以看到重叠效果。

提前致谢。网络应该只在现代浏览器中工作，如果可能的话，使用纯 css（无 JS）。

* * *

**编辑：**我认为风是这样吹的： [如何避免固定元素悬停页面内容？](https://stackoverflow.com/questions/15487692/how-to-avoid-fixed-element-from-hovering-page-contents) 到此结束： [响应式网站的粘滞页脚](https://stackoverflow.com/questions/11747983/sticky-footer-for-responsive-site?rq=1)

但是没有有用的答案...

好吧，实际上我可以通过*mediaqueries*来防止这种行为，这很简单。但我想知道是否有“一劳永逸”的解决方案。

* * *

**EDIT2：**我刚刚阅读[了 A list Apart - Exploring footers](http://alistapart.com/article/footers)。除了 JS 解决方案我尝试了所有方法，但问题仍然存在 - 如果您将浮动元素放在页脚内，它会与主要内容重叠。

另外，我已经阅读了[CSS Sticky Footer](http://www.cssstickyfooter.com/)，它似乎也有同样的问题。

我想不出这用纯 CSS 是不可能实现的……我应该放弃吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:55:37.130

**让绝对定位菜单“向下”增长？**

在您的 <ul> 页脚元素上，替换`bottom:0`为`top: 83%`

或者，如果您想按像素控制它，请替换`bottom:0`为`top: 100%; margin-top: -54px;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T14:31:30.500

确保您的包装器/容器是相对的。在它下面将您的页脚作为相对位置并添加 top:100%

# java - Java中存储大对象时的ArrayList

> ID：15380979
> 
> 赞同：2
> 
> 时间：2013-03-13T09:09:22.290
> 
> 标签：java

遇到了这个关于java中arraylist的面试题，觉得挺有意思的，但是不知道怎么回答：

```
What attention should be paid when using arrayList to store large object? 
```

我想知道我们是否应该在时间/空间复杂性方面回答这个问题？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T09:14:37.647

Java 中的所有对象都存储为引用、容器和变量等，因此在 C++ 术语中，**所有容器仅存储指向对象的指针**。在这种情况下，对象的大小应该与大多数用例（如果不是所有用例）**无关**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:24:36.247

ArrayList 内部使用 Object[]。一旦达到最大容量，它会创建一个大小为原始数组 1.5 倍的新数组，并将从旧数组复制到新数组。可能是面试官想检查这个带有大对象的副本的成本

[ArrayList：大小如何增加？](https://stackoverflow.com/questions/4450628/arraylist-how-does-the-size-increase)

检查 ensureCapacity() - [http://www.docjar.com/html/api/java/util/ArrayList.java.html](http://www.docjar.com/html/api/java/util/ArrayList.java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:51:47.180

ArrayList 支持可以根据需要增长的动态数组。在 Java 中，数组具有固定长度，这意味着在创建数组后，它们不能增长或缩小，这意味着您必须事先知道一个数组将包含多少个元素。但是，有时，您可能直到运行时才知道大小，因此在这种情况下我们使用了 ArrayList。ArrayList 可以动态增加或减少大小。数组列表是使用初始大小创建的。当超过这个大小时，集合会自动放大。移除对象后，数组可能会缩小。另外，请注意 Arraylist 仅存储对象。

# extjs4 - 将rowIndex传递给extjs 4中的窗口

> ID：15380982
> 
> 赞同：0
> 
> 时间：2013-03-13T09:09:32.497
> 
> 标签：extjs4

我有一个商店、一个网格、一个窗口和窗口中的几个文本框。我需要的是，在单击网格中的 actioncolumn 时，我需要获取单击行的 rowIndex 并将其作为参数传递给窗口。在那里，我需要加载商店并获取值并将其设置在适当的文本框中。我不确定如何在单击时将 rowIndex 从网格传递到窗口。文我试着在警戒值中`a`，`testfunction`出现了`undefined`。请帮助，下面是我的代码。

.js文件：

```
Ext.onReady(function() {
    var rIx;
    Ext.create('Ext.data.Store', {
        storeId:'employeeStore',
        fields:['firstname', 'lastname', 'senority', 'dep', 'hired'],
        data:[
            {firstname:"Michael", lastname:"Scott", senority:7, dep:"Manangement", hired:"01/10/2004"},
            {firstname:"Dwight", lastname:"Schrute", senority:2, dep:"Sales", hired:"04/01/2004"},
            {firstname:"Jim", lastname:"Halpert", senority:3, dep:"Sales", hired:"02/22/2006"},
            {firstname:"Kevin", lastname:"Malone", senority:4, dep:"Accounting", hired:"06/10/2007"},
            {firstname:"Angela", lastname:"Martin", senority:5, dep:"Accounting", hired:"10/21/2008"}
        ]
    });

    Ext.create('Ext.grid.Panel', {
        title: 'Employee Data',
        store: Ext.data.StoreManager.lookup('employeeStore'),
        columns: [
            { text: 'First Name',  dataIndex: 'firstname' },
            {
                header: 'Button',
                xtype: 'actioncolumn',
                icon : 'test.png',
                handler: function(grid, rowIndex, colIndex, item, e , record) {
                    rIx=rowIndex;
                    //var rec = grid.getStore().getAt(rowIndex);
                    //alert("Edit " + rec.get('firstname'));
                    Ext.create('MyWindow').show();
                }
            }

        ],

        width: 500,
        renderTo: Ext.getBody()
    });

    var testFunction = function(a){alert("a= "+a);

         var r = Ext.data.StoreManager.lookup('employeeStore').getAt(a);
         var firstname = r.get('firstname');
         Ext.getCmp('fname').setValue(firstname);   
     };

    Ext.define('MyWindow', {
        extend: 'Ext.window.Window',
        store : Ext.data.StoreManager.lookup('employeeStore'),
        height: 250,
        width: 250,
        title: 'My Window',
        items: [
                     {
                        xtype: 'textfield',           
                        id : 'fname',
                        fieldLabel:'Name'
                     }

                 ],
        listeners: {
                      afterrender: Ext.Function.pass(testFunction, [rIx])
                }
        });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:29:31.090

`Ext.Function.pass(testFunction, [rIx])``rIx`取执行时 的当前值`pass`。该方法在很久以前就被调用过，并且`rIx`被设置为任何有意义的东西。Javascript 是一种按值传递的语言。最终将 rIx 设置为行索引并不重要。到那时 Ext.Function.pass 已经被执行并且它传入的参数是未定义的。

另一种方法是将 rowIndex 作为属性推送到您的窗口中。

```
Ext.create('Ext.grid.Panel', {
    title: 'Employee Data',
    store: Ext.data.StoreManager.lookup('employeeStore'),
    columns: [
        { text: 'First Name',  dataIndex: 'firstname' },
        {
            header: 'Button',
            xtype: 'actioncolumn',
            icon : 'test.png',
            handler: function(grid, rowIndex, colIndex, item, e , record) {
                Ext.create('MyWindow', {rIx: rowIndex}).show();
            }
        }

    ],
    width: 500,
    renderTo: Ext.getBody()
});

Ext.define('MyWindow', {
    extend: 'Ext.window.Window',
    store : Ext.data.StoreManager.lookup('employeeStore'),
    height: 250,
    width: 250,
    title: 'My Window',
    items: [
        {
            xtype: 'textfield',           
            id : 'fname',
            fieldLabel:'Name'
        }
    ],
    listeners: {
        afterrender: function(win){
            alert("idx= " + win.rIx);
            var r = Ext.data.StoreManager.lookup('employeeStore').getAt(win.rIx);
            var firstname = r.get('firstname');
            Ext.getCmp('fname').setValue(firstname);   
        }
    }
}); 
```

另一种选择是`afterrender`在您的处理函数中设置窗口的侦听器，而不是将其添加到窗口的类定义中。在我看来，这种方法更干净一些。我不喜欢向组件添加不相关的状态属性。

```
Ext.create('Ext.grid.Panel', {
    title: 'Employee Data',
    store: Ext.data.StoreManager.lookup('employeeStore'),
    columns: [
        { text: 'First Name',  dataIndex: 'firstname' },
        {
            header: 'Button',
            xtype: 'actioncolumn',
            icon : 'test.png',
            handler: function(grid, rowIndex, colIndex, item, e , record) {
                var win = Ext.create('MyWindow');
                // add the listener after to avoid bashing any listener config
                // that may already exist for the window.
                win.on('afterrender', function() {
                    // rowIndex is available in the closure
                    alert("idx= " + rowIndex);
                    var r = Ext.data.StoreManager.lookup('employeeStore').getAt(rowIndex);
                    var firstname = r.get('firstname');
                    Ext.getCmp('fname').setValue(firstname);
                });
                win.show();
            }
        }

    ],
    width: 500,
    renderTo: Ext.getBody()
}); 
```

# java - 在 Java 中获取特定日期范围的 SVN 日志

> ID：15380983
> 
> 赞同：2
> 
> 时间：2013-03-13T09:09:36.273
> 
> 标签：java, svn, svnkit

我正在尝试使用 SVNKit 从 SVN 存储库中获取日志。

```
public static void svnLogTest() {
    final SvnOperationFactory svnOperationFactory = new SvnOperationFactory();
    final SvnLog log = svnOperationFactory.createLog();
    SVNURL url = null;
    try {
        url = SVNURL
                .parseURIEncoded("https://svn-repo");
    } catch (SVNException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    log.setSingleTarget(SvnTarget.fromURL(url));
    log.addRange(SvnRevisionRange.create(SVNRevision.create(111),
            SVNRevision.create(222)));
    log.getRevisionRanges();
    SVNLogEntry logEntry = null;
    try {
        logEntry  = log.run();
        System.out.println(logEntry.getAuthor() + " " + logEntry.getRevision() + " " 
                + logEntry.getDate());

    } catch (SVNException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但它只会给我第一次修订，我应该如何迭代打印特定日期范围的日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:57:42.727

这是因为

```
log.run(); 
```

总是只返回一个日志条目（其他 SvnOperation#run 方法也是如此）。要获取所有条目，请使用接收器：

```
 log.setReceiver(new ISvnObjectReceiver<SVNLogEntry>() {
        @Override
        public void receive(SvnTarget target, SVNLogEntry logEntry) throws SVNException {
            //process logEntry here
        }
    });
    log.run(); 
```

# php - php unserialize 序列化数组

> ID：15380987
> 
> 赞同：0
> 
> 时间：2013-03-13T09:09:46.987
> 
> 标签：php, sql, serialization

我有一个存储序列化值的 SQL 列。我想查询表，获取所有列值，对它们进行反序列化，然后处理结果数组中的数据。

```
 $g1 = mysql_query("SELECT q4 FROM qa");
 $g2 = (mysql_fetch_array($g1)); 
```

但 $g2 不会返回所有列值。另外，在我得到 $g2 数组中的所有值之后，我应该如何反序列化结果数组？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:13:13.503

试试这个 ：

```
$g1   = mysql_query("SELECT q4 FROM qa");
$val  = array();
while($g2   = mysql_fetch_array($g1)){
    $val[]  = unserialize($g2['q4']);
}

echo "<pre>"; 
print_r($val); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T09:13:29.470

如果 q4 是使用[serialize](http://www.php.net/serialize)函数序列化的字符串，那么您需要使用 unserialize 函数。

```
$g2 = array();
foreach(mysql_fetch_array($g1) as $row) {
    $g2[] = unserialize($row[0]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:14:53.497

您需要遍历行

像：

```
$g1 = mysql_query("SELECT q4 FROM qa");
$g2 = Array();

while($row = (mysql_fetch_array($g1))) {
    $g2[] = $row;
} 
```

假设您使用 PHP 序列化数据，答案是[`unserialize()`](http://www.php.net/manual/en/function.unserialize.php)方法

# sql - SQL 语句中的重复行

> ID：15380988
> 
> 赞同：1
> 
> 时间：2013-03-13T09:09:57.327
> 
> 标签：sql, sql-server, sql-server-2008

下面的 SQL 语句生成一个数据透视表，所有这些都正常工作。但是，在代码的底部，我试图显示另一个表（可用性注释）中的值 - 在下面的这个示例中，注释将是“A/P”。每一天都会有 0 或 1 个音符。当存在注释时，将显示注释。如果不存在注释，则会显示 COALESCE 值。但是，如果在星期一设置了 1 位教师的注释，而在星期三设置了注释，则会返回重复的行。如何将其设置为在一行上返回所有值？

```
 WITH Bookings AS
(   SELECT  TeacherID,
            [WeekDay] = DATENAME(WEEKDAY, BookingDate),
            [Status] = CASE WHEN [2] > 0 THEN 'XXX'
                            WHEN [0] > 0 AND [1] > 0 THEN 'XXX'
                            WHEN [0] > 0 THEN 'PM'
                            WHEN [1] > 0 THEN 'AM'
                            WHEN [3] > 0 AND CONVERT(time(0), EndTime) <= CONVERT(time(0), '12:00:00') and CONVERT(time(0), StartTime) < CONVERT(time(0), '12:00:00') THEN 'PM'
                            WHEN [3] > 0 AND CONVERT(time(0), StartTime) >= CONVERT(time(0), '12:00:00') THEN 'AM'
                            WHEN [3] > 0 AND CONVERT(time(0), StartTime) <= CONVERT(time(0), '12:00:00') AND CONVERT(time(0), EndTime) >= CONVERT(time(0), '12:00:00') THEN 'XXX'
                        END

    FROM    (   SELECT  TeacherID, BookingDate, BookingDuration, StartTime, EndTime, [X] = 1
                FROM    BookingDays where (Status = 0 or Status IS NULL)
            ) BookingDays
            PIVOT
            (   SUM(X)
                FOR BookingDuration IN ([0], [1], [2], [3])
            ) pvt
             WHERE BookingDate >= DATEADD(ww, DATEDIFF(ww,0,@Date), 0) AND BookingDate <= DATEADD(ww, DATEDIFF(ww,0,@Date), 6)

), PivotedBookings AS
(   SELECT  *
    FROM    Bookings
            PIVOT
            (   MAX([Status])
                FOR [WeekDay] IN ([Monday], [Tuesday], [Wednesday], [Thursday], [Friday])
            ) pvt

)
SELECT  t.ID, 
        t.Firstname, 
        t.Surname, 
        CASE WHEN t.Nursery > 0 THEN 'NUR' WHEN t.Reception > 0 THEN 'REC' WHEN t.Year1 > 0 THEN 'Y1' WHEN t.Year2 > 0 THEN 'Y2' WHEN t.Year3 > 0 THEN 'Y3' WHEN t.Year4 > 0 THEN 'Y4' WHEN t.Year5 > 0 THEN 'Y5' WHEN t.Year6 > 0 THEN 'Y6' WHEN t.Year7 > 0 THEN 'Y7' WHEN t.Year8 > 0 THEN 'Y8' WHEN t.Year9 > 0 THEN 'Y9' WHEN t.Year10 > 0 THEN 'Y10' WHEN t.Year11 > 0 THEN 'Y11' WHEN t.ALevel > 0 THEN 'ALevel' END + ' - ' + CASE WHEN t.ALevel > 0 THEN 'ALevel' WHEN t.Year11 > 0 THEN 'Y11' WHEN t.Year10 > 0 THEN 'Y10' WHEN t.Year9 > 0 THEN 'Y9' WHEN t.Year8 > 0 THEN 'Y7' WHEN t.Year6 > 0 THEN 'Y6' WHEN t.Year5 > 0 THEN 'Y6' WHEN t.Year4 > 0 THEN 'Y4' WHEN t.Year3 > 0 THEN 'Y3' WHEN t.Year2 > 0 THEN 'Y2' WHEN t.Year1 > 0 THEN 'Y1' WHEN t.Reception > 0 THEN 'REC' WHEN t.Nursery > 0 THEN 'NUR' ELSE '' END as 'KeyStage',

        Monday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,@Date), 0) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Monday, '') END,
        Tuesday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,@Date), 1) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Tuesday, '') END,
        Wednesday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,@Date), 2) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Wednesday, '') END,
        Thursday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,@Date), 3) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Thursday, '') END,
        Friday = CASE WHEN an.Date = DATEADD(ww, DATEDIFF(ww,0,@Date), 4) AND an.TeacherID = t.ID THEN an.Text WHEN t.Status = 0 THEN 'XXX'  ELSE COALESCE(pb.Friday, '') END
FROM    Teachers t

        LEFT JOIN PivotedBookings pb
            ON pb.TeacherID = t.ID
        LEFT JOIN TeacherBands tb
            ON tb.ID = t.Band
        LEFT JOIN AvailabilityNotes an 
            ON t.ID = an.TeacherID
            WHERE t.Active = 0 and (t.Status = 1 or t.Status = 0) and t.PrimarySchool = 1
            ORDER BY t.Surname, t.Firstname asc 
```

这会生成以下输出 -

```
ID | Firstname | Surname | Mon | Tue | Wed | Thu | Fri 
1    Steve       Smith     XXX   PM    AM    A/P   NULL   
1    Steve       Smith     XXX   PM    AM    NULL   A/P 
```

当我需要它时——

```
ID | Firstname | Surname | Mon | Tue | Wed | Thu | Fri 
1    Steve       Smith     XXX   PM    AM    A/P   A/P 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:26:10.883

您需要每天的有效值，如果存在，它将大于 NULL。

```
select   ID, Firstname, Surname
       , max(Monday) as Monday, -- etc
from ( your giant query ) as Q
group by ID, Firstname, Surname 
```

应该做的伎俩。

# java - 如何停止 HttpURLConnection.getInputStream()？

> ID：15380993
> 
> 赞同：10
> 
> 时间：2013-03-13T09:10:09.137
> 
> 标签：java, android, httpurlconnection

下面是我的代码：

```
private HttpURLConnection connection;
private InputStream is;

public void upload() {
    try {
        URL url = new URL(URLPath);
        connection = (HttpURLConnection) url.openConnection();
        connection.setConnectTimeout(30000);
        connection.setReadTimeout(30000);
        connection.setDoInput(true);
        connection.setUseCaches(false);
        connection.connect();
        is = connection.getInputStream();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void stopupload() {
    connection = null;
    is = null;
} 
```

当我上传文件时，该行将`is = connection.getInputStream();`花费大量时间来获得回复。所以我想实现一个停止功能为`stopupload()`. 但是如果我`stopupload()`在代码在 line 处理时调用`is = connection.getInputStream();`，它仍然需要等待它的回复。

我想在执行时立即停止等待`stopupload()`。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:39:53.763

> 但是如果我`stopupload()`在代码在 line 处理时调用`is = connection.getInputStream();`，它仍然需要等待它的回复。

从*HoneyComb*开始，所有的网络操作都不允许在主线程上执行。为避免[出现 NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，您可以使用`Thread`或`AsyncTask`。

> 我想在实现 stopupload() 时立即停止等待。我该怎么做？

下面的代码让用户在 2 秒后停止上传，但您可以相应地修改睡眠时间（应小于 5 秒）。

**上传**：

```
public void upload() {
    try {
        URL url = new URL(URLPath);
        connection = (HttpURLConnection) url.openConnection();
        connection.setConnectTimeout(30000);
        connection.setReadTimeout(30000);
        connection.setDoInput(true);
        connection.setUseCaches(false);
        connection.connect();
        // run uploading activity within a Thread
        Thread t = new Thread() {
            public void run() {
                is = connection.getInputStream();
                if (is == null) {
                    throw new RuntimeException("stream is null");
                }
                // sleep 2 seconds before "stop uploading" button appears
                mHandler.postDelayed(new Runnable() {
                    public void run() {
                        mBtnStop.setVisibility(View.VISIBLE);
                    }
                }, 2000);
            }
        };
        t.start();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (is != null) {
            try {
                is.close();
            } catch (IOException e) {
            }
        }
        if (connection != null) {
            connection.disconnect();
        }
    }
} 
```

**创建：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // more codes...
    Handler mHandler = new Handler();
    mBtnStop = (Button) findViewById(R.id.btn_stop);
    mBtnStop.setBackgroundResource(R.drawable.stop_upload);
    mBtnStop.setOnClickListener(mHandlerStop);
    mBtnStop.setVisibility(View.INVISIBLE);

    View.OnClickListener mHandlerStop = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            stopUpload(); // called when "stop upload" button is clicked
        }
    };

    // more codes...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:19:19.877

```
private HttpURLConnection connection;
private InputStream is;

   public void upload() {
       try {
    URL url = new URL(URLPath);
    connection = (HttpURLConnection) url.openConnection();
    connection.setConnectTimeout(30000);
    connection.setReadTimeout(30000);
    connection.setDoInput(true);
    connection.setUseCaches(false);
    connection.connect();

    Thread t = new Thread() {
        public void run() {
             is = connection.getInputStream();                
        }
    };
    t.start()
} catch (Exception e) {
    e.printStackTrace();
}catch (InterruptedException e) {
        stopupload(connection ,is, t);
    }      
}

public void stopupload(HttpURLConnection connection ,InputStream  is,Thread t) {
  if(connection != null ){
    try {
           t.interupt();
               running = false;
               connection=null;
           is=null;
        } catch (Exception e) {

        }      
     }   
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T14:24:34.703

将使用的代码包装`HttpURLConnection`在 a中，如此[处](https://stackoverflow.com/a/26489077/145173)`Future`所述。

# paypal - 贝宝：贝宝开发者账户的替代品

> ID：15380994
> 
> 赞同：3
> 
> 时间：2013-03-13T09:10:14.103
> 
> 标签：paypal, payment-gateway, paypal-sandbox

去年，我使用我的[PayPal 开发人员帐户使用 Paypal Sandbox 测试交易。](https://developer.paypal.com)

我上周刚检查过我无法访问我的旧帐户，所以我决定注册一个新帐户。但是，您现在需要注册一个企业帐户。企业帐户仅适用于美国企业（我来自美国以外）。

![Paypal - 开发者注册表单](../Images/bc65e3a06757fed6473bb298504c87fe.png)

我希望您能推荐一个替代的免费开发者帐户（类似于 PayPal），但使用不同的支付网关。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:18:12.897

条纹呢？

## [条纹](https://stripe.com)

*   使用基于 JavaScript 的 API 来完成交易。
*   更容易与多个平台集成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T09:37:15.453

您无需美国企业帐户即可使用 developer.paypal.com。
只需通过[https://www.paypal.com/](https://www.paypal.com/)注册一个实时 PayPal 帐户，无论是 Premier 还是 Business，您就可以使用它登录 developer.paypal.com。

但请注意，[新的 REST API](https://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/)目前仅适用于美国商业账户，但这不会影响其他 Sandbox 产品或功能的可用性。

我会调查为什么消息说你这样做，因为那是不正确的。感谢您指出了这一点！

# asp.net - 如何使用 open xml 将数据表单数据库绑定到 powerpoint 中的现有表

> ID：15380999
> 
> 赞同：2
> 
> 时间：2013-03-13T09:10:47.020
> 
> 标签：asp.net, openxml, openxml-sdk, presentationml

我使用openxml从Web应用程序创建一个PowerPoint。我创建了一个带有图表的ppt并在openxml sdk生产力工具和生成的代码中打开了ppt，我修改了来自数据库的图表数据，我创建的代码将图表数据修改为

为 sdk 中的代码创建了一个类，在 CreatePart() 中我添加了这些链接

```
 ChartPart chartPart1 = slidePart1.AddNewPart<ChartPart>("rId3");
        GenerateChartPart1Content(chartPart1);
       // This is below code added
        #if true    // Injects the chart part modification process
                    var chartModifier1 = new ChartPartModifier();
                    chartModifier1.UpdateSecondChartPart(chartPart1);
        #endif

        EmbeddedPackagePart embeddedPackagePart1 = chartPart1.AddNewPart<EmbeddedPackagePart>("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "rId2");
        GenerateEmbeddedPackagePart1Content(embeddedPackagePart1); 
```

并为 ChartPartModifier() 创建了一个类

```
public void UpdateSecondChartPart(ChartPart chartPart)
    {
        // Searchs SeriesText and its Values to replace them with your dynamic data
        var seriesLabels = chartPart.ChartSpace.Descendants<SeriesText>().ToList();
        var seriesValues = chartPart.ChartSpace.Descendants<Values>().ToList();
        var categoryAxis = chartPart.ChartSpace.Descendants<CategoryAxisData>().ToList();

        for (int i = 0; i < this._lineSecCharts.Count; ++i)
        {
            var yourLine = this._lineSecCharts[i];

            var label = seriesLabels[i].Descendants<NumericValue>().FirstOrDefault();
            var values = seriesValues[i].Descendants<NumericValue>().ToList();
            var categories = categoryAxis[i].Descendants<NumericValue>().ToList();

            // Replaces the label of the series
            label.Text = yourLine.Label;
            // Replaces the values of the series
            for (int valIdx = 0; valIdx < values.Count(); ++valIdx)
            {
                values[valIdx].Text = yourLine.Plots[valIdx].Value.ToString();
                categories[valIdx].Text = yourLine.Plots[valIdx].Category;
            }
        }
    } 
```

像这样有什么方法可以修改表中的数据，如果可以的话，任何人都可以为我提供解决方案，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T05:02:30.377

经过研究，我找到了答案，我可以使用 openxml 更新数据库中的表值

下面的代码（如果条件）在附加行的表和附加的图形数据之间添加

```
table1.Append(tableProperties1);
        table1.Append(tableGrid1);
        table1.Append(tableRow1);
        table1.Append(tableRow2);
        table1.Append(tableRow3);
        table1.Append(tableRow4);
        table1.Append(tableRow5);
        table1.Append(tableRow6);
        table1.Append(tableRow7);

 #if true    // Injects the table modification process
        TableModifier tableModifier = new TableModifier();//Create a class
        tableModifier.UpdateTable(table1);//Send the table object of which you wanted to update
 #endif
        graphicData1.Append(table1);

        graphic1.Append(graphicData1); 
```

在 TableModifier 类中

```
using DocumentFormat.OpenXml.Drawing;
using DocumentFormat.OpenXml.Packaging;

public class TableModifier
{
    public TableModifier()
    {
        this.SetupDataSource();
    }

    public void UpdateTable(Table table)
    {
        var rows = table.Descendants<TableRow>().ToList();

        for (int r = 0; r < rows.Count(); ++r)
        {
            var yourRow = this._rows[r];
            var cells = rows[r].Descendants<TableCell>().ToList();

            for (int c = 0; c < cells.Count(); ++c)
            {
                var yourCell = yourRow.Cells[c];
                var text = cells[c].Descendants<Text>().FirstOrDefault();
                if (text != null)
                {
                    text.Text = yourCell.Value;
                }
            }
        }
    }

    private void SetupDataSource()
    {
        this._rows.Add(new Row()
        {
            Cells = new List<Cell>()
            {
                new Cell(){ Value = "Products" },
                new Cell(){ Value = "2010" },
                new Cell(){ Value = "2011" },
                new Cell(){ Value = "2012" },
            }
        });

        for (int i = 0; i < 6; ++i)
        {
            var productName = string.Format("Product {0}", (char)(i + 'A'));

            this._rows.Add(new Row()
            {
                Cells = new List<Cell>()
                {
                    new Cell(){ Value = productName },
                    new Cell(){ Value = "10%" },
                    new Cell(){ Value = "20%" },
                    new Cell(){ Value = "30%" },
                }
            });
        }
    }

    #region Private Data Structure

    private class Row
    {
        public List<Cell> Cells { get; set; }
    }

    private class Cell
    {
        public string Value { get; set; }
    }

    #endregion

    private List<Row> _rows = new List<Row>();
} 
```