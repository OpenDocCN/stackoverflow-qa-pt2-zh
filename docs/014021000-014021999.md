# StackOverflow 问答 14021000-14021999

# redirect - 重定向通配符子域 ISAPI 2

> ID：14021001
> 
> 赞同：0
> 
> 时间：2012-12-24T11:48:03.053
> 
> 标签：redirect, isapi-rewrite, wildcard-subdomain

我正在尝试通过 ISAPI Rewrite 2 将所有通配符子域重定向到 example.com。

例如 qqqq.example.com 301 重定向到 example.com

使用 Stack 上的其他信息，我有以下将 www 重定向到非 www：

```
RewriteEngine on
RewriteCond %{HTTPS} (on)?
RewriteCond %{HTTP:Host} ^(?!www\.)(.+)$ [NC]
RewriteCond %{REQUEST_URI} (.+)
RewriteRule .? http(?%1s)://www.%2%3 [R=301,L] 
```

对于需要什么其他条件/规则的任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:51:04.563

v2 语法应该有点不同：

```
RewriteCond Host: (?!www\.)[^.]+\.[^.]+\.[^.]+
RewriteRule (.*) http\://www.example.com$1 [RP] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:54:13.767

对于 ISAPI_Rewrite 2，您必须使用不同的语法：

```
RewriteCond %HTTPS (on)?|.*
RewriteCond Host: (?!www\.)(.+)
RewriteRule (.*) http(?1s:)\://www.$2$3 [I,RP] 
```

# c - 在 C 项目中使用 C++ 代码

> ID：14021002
> 
> 赞同：8
> 
> 时间：2012-12-24T11:48:06.027
> 
> 标签：c, linux

我有一个客户提供了一个 C++ 代码，我迫切需要在一个用 C 编写的**非常大**的项目中使用它。

问题是：我无法将 C++ 代码重写为 C ......这太容易了，我没有这段代码的 IP，客户端必须维护代码。

我也无法使用 g++ 在 C 中链接我**真正的大**项目：这会破坏事情！

我试图将 C++ 代码转换为库，导出 C 样式接口（使用 extern "C"，将类封装到结构中）但是在将这个库链接到我的项目时遇到问题......（记住，不能使用 g++ 链接）：我最终得到了对几乎所有 STL 的未定义引用 绝望中，我将 STL 静态链接到我制作的 C/C++ 包装器库，但这并没有改变任何东西。

我对 C++ 了解不多，但我不想为这个特定的用例编写 C++ STL/C 包装器。

现在，我已经从 C++ 代码制作了一个二进制文件，并在我的 C 代码中使用 fork/exec 调用它……这是一个非常糟糕的解决方案，我想避免。

如果有人有线索/方向/提示，那将不胜感激。

谢谢，纪尧姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:09:51.397

除了 Azzy 的回答之外，这个问题的真正答案实际上是一个关于调用 c++ 代码需要做什么的问题。

使用 fork 可能是个好主意，但总的来说，我会说这不是正确的解决方案，除非 C++ 代码首先需要花费大量时间来执行 [在这种情况下，fork/exec 开销足够小没关系]。

一般来说，正确的解决方案是在程序和 C++ 代码之间编写一个小接口，使用 C 接口（和`extern "C"`包装器 - 不要忘记`#ifdef __cplusplus`在定义接口的标头中使用，`extern "C"`以便您可以在 C++ 接口实现和调用 C 代码中使用相同的头文件）。

还要注意例外情况。你不能调用从 C 中抛出异常的 C++ 代码——它们必须在 C++ 中处理，否则会发生坏事（究竟什么样的坏事是无法确定的——可能会执行随机代码，或者系统崩溃，或者一些随机错误输出发生等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:00:48.253

您可以使用 链接共享 C++ 库`g++`并将其与您的程序链接，`gcc`例如：

```
 g++ -Wall -O -c -fPIC lib++/src1.cc -o lib++/src1.pic.o
 g++ -Wall -O -c -fPIC lib++/src2.cc -o lib++/src2.pic.o
 ## etc, compile each C++ file of the library
 ##
 ## then link the library with standard C++ library, etc...
 g++ -shared lib++/src*.pic.o -lstdc++ -o lib++/libpp.so 
```

然后在您的 C 项目中使用该共享库：

```
 gcc -Wall -O -c src/file1.c -o src/file1.o
 gcc -Wall -O -c src/file2.c -o src/file2.o
 ## link your program with lib++/libpp.so
 gcc src/fil*.o -L lib++ libpp.so  -lotherlibs -o yourprog 
```

请记住，您可以将共享库与其他共享库链接。

^(当然，您需要修改您的构建系统，例如您的`Makefile`-s，以执行上述命令。)

还要记住，一些函数具有`constructor` [函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)（C++ 编译经常使用它来构造静态 C++ 实例）。这些函数之前运行过`main`；对称地，具有`destructor`属性的函数在`main`. 对于由 加载的动态加载库`dlopen`，构造函数在 期间运行，`dlopen`而析构函数在`dlclose`.

^(正如其他几个人所指出的那样，请注意跨 C 边界抛出的 C++ 异常)

# c# - 获取所有元素都包含来自命名空间的属性

> ID：14021018
> 
> 赞同：1
> 
> 时间：2012-12-24T11:49:31.587
> 
> 标签：c#, xml, linq, linq-to-xml

[我希望从命名空间http://www.my.com/](http://www.my.com/)中获取所有包含属性的元素

编码：

```
 IEnumerable<XElement> list1 =
                    from el in RootElement.DescendantsAndSelf()
                    //where it contains attributes from http://www.my.com/ - how?
                    select el; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:58:41.513

验证属性名称的[命名空间部分：](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.namespace.aspx)

```
XNamespace my = "http://www.my.com/";
IEnumerable<XElement> list1 =
        from el in xdoc.Root.DescendantsAndSelf()
        where el.Attributes().Any(attr => attr.Name.Namespace == my)
        select el; 
```

# iphone - ios6 中的 SQLCipher 架构 armv7s 的未定义符号（架构已更改）

> ID：14021019
> 
> 赞同：2
> 
> 时间：2012-12-24T11:49:44.023
> 
> 标签：iphone, ios, ios6, sqlcipher

我在使用**xcode 4.5.2构建****sqlcipher**时遇到问题。基本上我遵循了[http://mobileorchard.com/tutorial-iphone-sqlite-encryption-with-sqlcipher/](http://mobileorchard.com/tutorial-iphone-sqlite-encryption-with-sqlcipher/)和[http://sqlcipher.net/ios-tutorial/](http://sqlcipher.net/ios-tutorial/)上的示例。不幸的是，我最终收到一条消息，告诉我 ssl 库和 sqlcipher 库不是为 armv7s 构建的。

 **错误信息：

```
ld: warning: ignoring file /Users/jeven/Library/Developer/<...>/Debug-iphoneos/libsqlcipher.a, file was built for archive which is not the architecture being linked (armv7s): /Users/jeven/Library/Developer/<...>/Debug-iphoneos/libsqlcipher.a
ld: warning: ignoring file /Users/jeven/Library/Developer/<...>/Debug-iphoneos/libcrypto.a, file was built for archive which is not the architecture being linked (armv7s): /Users/jeven/Library/Developer/<...>/Debug-iphoneos/libcrypto.a

Undefined symbols for architecture armv7s:
      "_sqlite3_prepare_v2", referenced from:
... 
```

我知道这已经发布了几次，但我已经更改了 openssl 和 sqlcipher 项目的目标架构，正如您在以下屏幕截图中看到的那样。

**openssl：** ![在此处输入图像描述](../Images/bcf8e6683478ed911bec87425561acc7.png) **sqlcipher**： ![在此处输入图像描述](../Images/a365b13c7bdec986e9bcf7e536d0b36b.png)

我真的有点卡在这里:(有人对我有提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T04:56:59.223

尝试将仅调试的构建活动架构设置为 NO！ [更改 openssl 和 sqlcipher 的任一配置](http://i.stack.imgur.com/fGfeJ.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T12:04:27.907

我之前遇到过非常相似的问题，尝试删除 armv7s 并只保留 armv7

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-27T14:07:45.717

将**libsqlite3.dylib**添加到**Build Phases**的 Liraries 列表中。

选择您的项目目标 -> 构建阶段：

添加**libsqlite3.dylib**以将**二进制文件与库链接****

# javascript - Dart 应用和跨域策略

> ID：14021021
> 
> 赞同：2
> 
> 时间：2012-12-24T11:50:01.947
> 
> 标签：javascript, dart, chromium, cross-domain-policy

在 Dart VM 中运行 dart 应用程序时，是否可以在 Chromium 中禁用跨域安全检查？

问题是它在自己的端口上运行，因此我的应用程序无法向运行在另一个端口上的后端发送异步请求。

是的，我知道我可以将 dart 文件复制到我的后端，它会运行得很好，但是我无法调试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:14:54.887

添加`Access-Control-Allow-Origin: *`到后端的响应标头应该足以进行跨域异步请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:12:38.703

如果您正在寻求权宜之计解决方案，仅用于调试，您可以使用标志在 chrome 中将其关闭。

```
[chromium executable] --disable-web-security 
```

这取自这篇文章[Disable same origin policy in Chrome](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy)。

否则，响应中的附加标头是正确的方法。当然，如果您想提高安全性，可以将星号换成 IP 地址列表。

有关详细信息，请参阅[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS 。](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

# android-webview - webview中的视频没有播放

> ID：14021025
> 
> 赞同：0
> 
> 时间：2012-12-24T11:50:20.417
> 
> 标签：android-webview

嘿伙计们，我是 Android 新手。我在 webview 中的视频无法在移动设备上播放。但它确实可以在平板电脑上播放。会有什么问题？下面是我的代码。请帮我解决一下这个。

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.text.Html;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.animation.AnimationUtils;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.webkit.WebSettings.PluginState;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.Toast;

public class WebViewActivity extends Activity {

    WebView web;
    ImageView img,bckimg,share_btn;
    String content,shareUrl;
    String movYear, movName, movImage, movDirector, movAwards; 
    String movProducer, movActedAs, movAnecdotes, movSynopsis; 
    boolean thisUrl = false;
    ImageView showProgress;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_web_view);

        Bundle bundle=getIntent().getExtras();
        showProgress=(ImageView)findViewById(R.id.showProgress);

        img = (ImageView)findViewById(R.id.header);
        bckimg = (ImageView) findViewById(R.id.wbview_bckbtn);
        share_btn = (ImageView) findViewById(R.id.share_btn);

        web=(WebView)findViewById(R.id.webview);
        web.getSettings().setJavaScriptEnabled(true);
        web.getSettings().setPluginsEnabled(true);
        web.getSettings().setPluginState(PluginState.ON);
        web.getSettings().setAllowFileAccess(true);
        web.getSettings().setBuiltInZoomControls(true);
        web.getSettings().setBlockNetworkLoads(false);
        web.getSettings().setUserAgentString("Mozilla/5.0 (Linux; U; Android 2.0; en-us; Droid Build/ESD20) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17");

        web.setWebViewClient(new MyWebViewClient());

        if(bundle!=null)
        {
            int tab_value = bundle.getInt("tab_value");

            if(tab_value==1){
                img.setImageResource(R.drawable.bar_latest);

                thisUrl = false;
            }else if(tab_value==2){
                img.setImageResource(R.drawable.bar_dance);
                thisUrl = false;
            }else if(tab_value==3){
                img.setImageResource(R.drawable.bar_movies);
                thisUrl = true;
            }else if(tab_value==4){
                img.setImageResource(R.drawable.bar_fashion);
                thisUrl = false;
            }else if(tab_value==5){
                img.setImageResource(R.drawable.bar_health);
                thisUrl = false;

            }else if(tab_value==6){
                img.setImageResource(R.drawable.bar_art);
                thisUrl = false;
            }

            if(!thisUrl){
                share_btn.setVisibility(View.VISIBLE);
                content =   bundle.getString("content");
                web.loadData("<!DOCTYPE html><head><meta charset=\"UTF-8\"/><meta name=\"viewport\" content=\"width=device-width\" /><title>Madhuri Dixit-Nene</title><link rel=\"stylesheet\" type=\"text/css\" media=\"all\" href=\"http://madhuridixit-nene.com/wp/wp-content/themes/twentyeleven/style.css\" /><style type=\"text/css\">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style><style type=\"text/css\">p {padding:5px !important;margin:5px !important;}</style></head><body class=\"single single-post postid-1606 single-format-standard single-author singular two-column right-sidebar\"><div class=\"entry-content\">"+content+"</div></body></html>","text/html; charset=UTF-8", null);
                shareUrl=bundle.getString("shareUrl");
            }else{
                share_btn.setVisibility(View.GONE);
                movYear     =   bundle.getString("movieYear");
                movName     =   bundle.getString("movieName");
                movImage        =   bundle.getString("movieImage");
                movAwards       =   bundle.getString("movieAwards");
                movDirector =   bundle.getString("movieDirector");
                movProducer =   bundle.getString("movieProducer");
                movActedAs  =   bundle.getString("movieActedAs");
                movAnecdotes    =   bundle.getString("movieAnecdotes");
                movSynopsis =   bundle.getString("movieSynopsis");

                web.loadData("<p style='text-align:center'><img class='aligncenter size-full wp-image-1607' title='' src="+movImage+" alt='' width='240px' height='180px' /></p><p><center><U><H2>"+movName+"("+movYear+")</H2></U></center></p><p><strong>Director : </strong>"+movDirector+"</p><p><strong>Producer : </strong>"+movProducer+"</p><p><strong>Character : </strong>"+movActedAs+"</p><p><strong>Summary : </strong>"+movAnecdotes+"</p><p><strong>Synopsis : </strong>"+movSynopsis+"</p>\n","text/html; charset=UTF-8", null);
                shareUrl=bundle.getString("shareUrl");
            }
        }

        bckimg.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
                overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);
            }
        });

        share_btn.setOnClickListener(new OnClickListener() {

            @Override

            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
                sharingIntent.setType("text/plain");
                sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Madhuri");
                sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareUrl);
                startActivity(Intent.createChooser(sharingIntent, "Share via"));
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_web_view, menu);
        return true;
    }

    class MyWebViewClient extends WebViewClient {
        @Override
        // show the web page in webview but not in web browser
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            view.getSettings().setJavaScriptEnabled(true);
            view.getSettings().setPluginsEnabled(true);
            view.getSettings().setPluginState(PluginState.ON);
            view.getSettings().setAllowFileAccess(true);
            view.getSettings().setBuiltInZoomControls(true);
            view.getSettings().setBlockNetworkLoads(false);
            view.getSettings().setUserAgentString("Mozilla/5.0 (Linux; U; Android 2.0; en-us; Droid Build/ESD20) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17");
            view.loadUrl(url);

            return true;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);
            showProgress.clearAnimation();
            showProgress.setVisibility(View.GONE);
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);
            showProgress.startAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.rotate));

            showProgress.setVisibility(View.VISIBLE);
        }
    }

    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        finish();
        overridePendingTransition(R.anim.slide_out_left,R.anim.slide_out_right);
        /*  super.onBackPressed();*/

    }
} 
```

并向我解释 WebViewClient 和 WebViewChromeClient 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:10:21.763

请在您的 android 清单文件中添加硬件加速设置为 true。android 3.0+ 我们必须启用此功能，然后只有视频支持。您当然可以同时使用两者，它们只是具有不同的功能。设置自己的自定义 WebViewClient 让你处理 onPageFinished、shouldOverrideUrlLoading 等，WebChromeClient 让你处理 Javascript 的 alert() 和其他功能。

# border - SSRS 2005 上的矩形边框

> ID：14021027
> 
> 赞同：0
> 
> 时间：2012-12-24T11:50:43.540
> 
> 标签：border, reportingservices-2005

我正在编写一份关于 SSRS 2005 的报告，我需要为我的矩形设置边框。一个婴儿可以在 SSRS 2008 上做到这一点，但在 2005 年看起来是不可能的。

我试图查看“矩形属性”对话框，但没有关于边框的内容。我还尝试使用标签：

```
<Style>
  <Border>
    <Style>Solid</Style>
  </Border>
</Style> 
```

但是没有用。

那么，是否可以在 SSRS 2005 元素“矩形”上显示边框？

我知道我的问题不是最好的问题之一，但我没有找到直接而明确的答案。

我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:00:07.263

正如我所说，我的问题不是一个聪明的问题。好吧，在矩形属性对话框上没有边框选项，但在 Visual Studio 的属性窗口中有。

在“属性”窗口中有几个选项可以设置为矩形边框，因此您需要做的就是根据您的需要更改它们。

# php - PHP - 从面包屑列表的多维关联数组返回父数组

> ID：14021028
> 
> 赞同：2
> 
> 时间：2012-12-24T11:50:44.547
> 
> 标签：php, arrays, breadcrumbs, associative, multidimensional-array

我正在尝试从数组创建动态面包屑。所以我可以添加到数组中，而不必手动更新面包屑。

好的，这是我的数组的一个片段：（不会更深入）

```
$menu = array(
    'Dashboard' => array(
        'Projects' => array(
            'Project 1' => array(
                'Project settings' => 'projects/project_1/settings',
                'Issue Tracker' => 'projects/project_1/issue_tracker',
                'Customize page' => 'projects/project_1',
                'Manage files' => 'projects/project_1/files',
            ),
            'Project 2' => array(
                'Project settings' => 'projects/project_2/settings',
                'Issue Tracker' => 'projects/project_2/issue_tracker',
                'Customize page' => 'projects/project_2',
                'Manage files' => 'projects/project_2/files',
            ),
        ),
        'Logout' => '#',
    )
); 
```

我希望能够以以后可以迭代的方式返回任何键的所有父项。例如，对于“项目设置”：

```
'Dashboard','Projects','Project 1'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:10:35.923

在您的示例中，实际上有两种可能的路径：

```
Key 'Project settings' found: 'Projects' -> 'Project 1'
Key 'Project settings' found: 'Projects' -> 'Project 2' 
```

您可以使用递归迭代器轻松解决此问题（查看[`RecursiveIteratorIterator`](http://php.net/RecursiveIteratorIterator)它提供了您所需要的一切）。我选择它是因为它可以让您更轻松地搜索和获取父级别键：

```
$search = 'Project settings';
$it     = new ParentKeysIterator($menu);
foreach ($it as $key) {
    if ($key !== $search) continue;
    printf("Key '%s' found: '%s'\n", $key, implode("' -> '", $it->key()));
} 
```

和`ParentKeysIterator`：

```
class ParentKeysIterator extends RecursiveIteratorIterator
{
    public function __construct(array $array) {
        parent::__construct(new  RecursiveArrayIterator($array));
    }

    public function current() {
        return parent::key();
    }

    public function key() {
        return $this->getParentKeys();
    }

    public function getParentKeys() {
        $keys = [];
        for ($depth = $this->getDepth() - 1; $depth; $depth--) {
            array_unshift($keys, $this->getSubIterator($depth)->key());
        }
        return $keys;
    }
} 
```

# ruby - :environment 可以用作 sinatra 中路由语句中的条件吗？

> ID：14021035
> 
> 赞同：2
> 
> 时间：2012-12-24T11:51:15.843
> 
> 标签：ruby, sinatra, url-routing

我试图创建一条仅适用于 :development 的路线，例如：

```
get '/logs', :environment => :development do
    #dump logs
end 
```

这不起作用，有什么想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:59:43.157

您可以创建自己的条件来检查环境：

```
set(:check_env) {|value| condition{value == settings.environment}}

get '/logs', :check_env => :development do
  #dump logs
end 
```

另一个可能更简单的选择是仅在开发中创建路线：

```
configure :development do
  get '/logs' do
    #dump logs
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:57:35.237

```
get '/logs' if ENV['RACK_ENV'] == 'development' 
```

应该管用

# java - Android 滚动监听器

> ID：14021037
> 
> 赞同：2
> 
> 时间：2012-12-24T11:51:24.520
> 
> 标签：java, android

需要帮助，我不知道该怎么办。

我使用[android-verticalpager 库](https://github.com/grantland/android-verticalpager)

需要在滚动到下一个屏幕时捕捉到这一刻。

下面你可以看到

```
pager.addOnScrollListener(new VerticalPager.OnScrollListener() {
    public void onScroll(int scrollX) {
        //Log.d("TestActivity", "scrollX=" + scrollX);
    }

    public void onViewScrollFinished(int currentPage) {
        //Log.d("TestActivity", "viewIndex=" + currentPage);
    }
}); 
```

而且，（[这里是](https://github.com/grantland/android-verticalpager/blob/master/src/com/grantlandchew/view/VerticalPager.java)）

```
int adjustedScrollY = getScrollY() + pageHeightPadding();
mListener.onScroll(adjustedScrollY);
if (adjustedScrollY % pageHeight == 0) {
    mListener.onViewScrollFinished(adjustedScrollY / pageHeight);
} 
```

问题是 onViewScrollFinished 只有在我们看到第一个屏幕时才会出现。

据我了解页面高度方面的问题。

我请求您的帮助，我将不胜感激！如何捕捉动画完成的瞬间？

对不起，我的英语很差。

# joomla - 自定义代码中的编辑器不起作用

> ID：14021040
> 
> 赞同：2
> 
> 时间：2012-12-24T11:51:53.707
> 
> 标签：joomla, joomla-extensions

我继承了一些在 Joomla 3.0.2 中运行的自定义代码——我们实际上是一些使用 Sourcerer 运行的独立 php/javascript（即不是一个适当的组件）。

我需要它来显示富文本编辑器，所以我尝试使用 joomla 附带的标准编辑器。我已经根据[本教程](http://docs.joomla.org/Using_the_editor_in_a_component)编写了一些 PHP ：

```
 $document =& JFactory::getDocument();
    $document->addScript('includes/js/joomla.javascript.js');

    $editor =& JFactory::getEditor();
    echo $editor->display('content', 'some content', '550', '400', '60', '20', false); 
```

然而，我得到的只是一个没有工具栏的标准文本区域。我已经尝试将所有预安装的编辑器（CodeMirror、TinyMCE）设置为默认编辑器，此外我还尝试了 JCE 和 JoomlaCK 插件——结果都一样。

我想问题是代码示例适用于旧版本的 Joomla，因为 includes/js/joomla.javascript.js 不存在。但是我在任何地方都找不到更新的示例……请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:27:49.877

尝试使用以下内容：

```
$document = JFactory::getDocument();
$document->addScript(JURI::root() . 'includes/js/joomla.javascript.js');

$editor = JFactory::getEditor();
echo $editor->display('content', 'some content', '550', '400', '60', '20', false); 
```

# vim - 映射和取消映射运算符

> ID：14021052
> 
> 赞同：1
> 
> 时间：2012-12-24T11:52:31.043
> 
> 标签：vim

我想在 vim 中定义我自己的键绑定（覆盖默认键）：

1）如何映射运算符？例如，我想将删除运算符映射到“l”键，因此 ll 将删除整行并 lw 当前单词。

2）如何取消映射操作员？我想从 d 键中取消映射删除运算符，所以我可以将此键 (d) 用于另一件事，我试图简单地将“d”键重新映射到另一个操作（例如 nmap dk），但这会导致一个延迟第二次按下“d”（因为vim正在等待动作）。

这样做的一个主要原因是我的键盘有一个数字键盘，我不想每次输入数字时都将右手从 hjkl 切换到数字键盘（这种情况经常发生），我更喜欢改变hjkl 到 asdf，将我的左手固定在动作和特殊键（crtl、shift、esc）上，并将我的右手用于其他命令。这样我的工作效率就大大提高了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:38:42.287

您无法取消映射 d 以将其释放以用于其他用途。你甚至不需要：做

```
nnoremap l d 
```

将映射`l`做同样的事情`d`（注意：这不会允许`ll`）。

```
nnoremap d {some-other-thing} 
```

将映射`d`做一些其他的事情，你不需要在这里释放一些东西。更多，完成以上所有操作后

```
nnoremap l c 
```

将使 make具有与没有任何取消映射`l`相同的含义：命令覆盖现有映射，除非它们被赋予参数。`c``*map``<unique>`

* * *

为了让`ll`您有一些选择：

```
nnoremap ll dd 
```

或者

```
onoremap l d 
```

. 请注意，不幸的是，我不知道与重复字符具有相同含义但不依赖于操作员的动作。因此`ll`将在最后一种情况下工作，但`cl`同样会失败`cd`。

* * *

但是，如果您经常在别人的机器上工作，那么它是可能的这一事实并不是一个好主意。如果你知道你不知道，这也不是一个坏主意。如果每个人都关心使用别人的机器，那么您将使用记事本，没有`++`.

# c# - R 脚本形式 C#。传递参数、运行脚本、检索结果

> ID：14021055
> 
> 赞同：6
> 
> 时间：2012-12-24T11:52:46.690
> 
> 标签：c#, r

我想知道是否可以在传入值列表的同时运行 Rscript，让该 R 脚本运行，然后将值的重新排序列表输出回 c#。

我见过人们说 R.NET 很好，但我只看到过使用它直接创建值、操作它们、访问它们等的例子，而我想要做的是运行已经创建的脚本来接收数据，处理它并返回数据。我也知道我可以用 csv 文件来做到这一点，但关键是我想去掉中间人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-22T21:45:15.290

[这个问题大约有 5 年的历史，这里](https://stackoverflow.com/questions/4485943/executing-r-script-programmatically)有一些可用的答案。我将使用一个非常简单的`R`脚本来完成它。

最好从这个[链接开始](http://tuxette.nathalievilla.org/?p=1696)

在这个简单的示例中，我将 3 传递给 R，将其与 5 相加并返回结果 (8)。

**脚步**

1.  `name.r`使用您的 r 代码创建一个文本文件，如下所示。我将其命名为`rcodeTest.r`

    ```
    library(RODBC) # you can write the results to a database by using this library
    args = commandArgs(trailingOnly = TRUE) # allows R to get parameters
    cat(as.numeric(args[1])+5)# converts 3 to a number (numeric) 
    ```

然后像下面一样创建 ac# 类（随便叫什么，我叫它`RScriptRunner`），也可以在[这里找到](http://www.jakemdrew.com/blog/RScriptRunner.htm)。这是一个简单的类，它只调用一个过程（一个 exe 文件）

```
 using System;
    using System.Collections.Generic;
    using System.Diagnostics;
    using System.IO;
    using System.Linq;
    using System.Web;

    /// <summary>
    /// Summary description for RScriptRunner
    /// </summary>
    public class RScriptRunner
    {
        public RScriptRunner()
        {
            //
            // TODO: Add constructor logic here
            //
        }
        // Runs an R script from a file using Rscript.exe.
        /// 
        /// Example: 
        ///
        ///   RScriptRunner.RunFromCmd(curDirectory +         @"\ImageClustering.r", "rscript.exe", curDirectory.Replace('\\','/'));
        ///   
        /// Getting args passed from C# using R:
        ///
        ///   args = commandArgs(trailingOnly = TRUE)
        ///   print(args[1]);
        ///  
        ///   
        /// rCodeFilePath          - File where your R code is located.
        /// rScriptExecutablePath  - Usually only requires "rscript.exe"
        /// args                   - Multiple R args can be seperated by spaces.
        /// Returns                - a string with the R responses.
        public static string RunFromCmd(string rCodeFilePath, string         rScriptExecutablePath, string args)
        {
            string file = rCodeFilePath;
            string result = string.Empty;

            try
            {

                var info = new ProcessStartInfo();
                info.FileName = rScriptExecutablePath;
                info.WorkingDirectory =         Path.GetDirectoryName(rScriptExecutablePath);
                info.Arguments = rCodeFilePath + " " + args;

                info.RedirectStandardInput = false;
                info.RedirectStandardOutput = true;
                info.UseShellExecute = false;
                info.CreateNoWindow = true;

                using (var proc = new Process())
                {
                    proc.StartInfo = info;
                    proc.Start();
                    result = proc.StandardOutput.ReadToEnd();

                }

                return result;
            }
            catch (Exception ex)
            {
                throw new Exception("R Script failed: " + result, ex);
            }
        }
    } 
```

然后调用并传递参数，如

```
 result = RScriptRunner.RunFromCmd(path + @"\rcodeTest.r", @"D:\Programms\R-3.3.3\bin\rscript.exe", "3"); 
```

`rscript.exe`位于您的 R 目录中，并且`path`是您的 r 脚本 ( `rcodeTest.r`)的位置

现在您可以得到结果 8=5+3 作为输出，如下所示。 [![在此处输入图像描述](../Images/561061853ffed2d53f2346db4afcd484.png)](https://i.stack.imgur.com/0euwQ.jpg)

# android - 如何修改android“强制关闭”窗口的样式？

> ID：14021061
> 
> 赞同：8
> 
> 时间：2012-12-24T11:53:13.287
> 
> 标签：android, styles, forceclose

有人知道如何修改“强制关闭”窗口（*FC 对话框*）的样式吗？我在对话框中找到了一个带有漂亮图片的自定义 ROM。在什么地方可以找到弹窗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:59:26.513

尝试覆盖 uncaughtException，

```
@Override
public void uncaughtException(Thread thread, Throwable e) {
e.printStackTrace();    

   try {    

      // create your custom dialog
      displayErrorMessageToast();

      Thread.sleep(3500);    
   } catch (Exception e1) {    
      Log.e(TAG, "Error: ", e1);    
   } 
   finally 
   {    
      killApplicationProcess(e);    
   }
} 
```

欲了解更多信息： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/2iUH1Knz8gw](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/2iUH1Knz8gw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:04:29.357

尝试此[博客中给出的方法](http://iamvijayakumar.blogspot.in/2012/09/android-uncaughtexceptionhandler.html)

复制此处以供快速参考：

安卓`UncaughtExceptionHandler`

由想要处理线程被未捕获的异常终止的情况的对象实现。在这样的终止时，处理程序被通知终止线程和因果异常。如果没有设置显式处理程序，则线程组是默认处理程序。

下面我写了代码用户可以在应用程序崩溃时向开发人员发送一些错误报告。

活动代码

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.ViewFlipper;
/**
*
* @author vijayakumar
*
*/
public class AndroidMADQAActivity extends Activity {
ViewFlipper flipper;
TextView textView = null;
Throwable throwable;
UnCaughtException un = null;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
Thread.setDefaultUncaughtExceptionHandler(new UnCaughtException(AndroidMADQAActivity.this));
Integer[] items = { R.drawable.a, R.drawable.e,R.drawable.d,R.drawable.c};
setContentView(R.layout.main);
textView.setText("Helloo Error Welcome");
}
} 
```

**UnCaughtException.java**

```
package com.madqa;
import java.io.File;
import java.io.PrintWriter;
import java.io.StringWriter;
import java.io.Writer;
import java.lang.Thread.UncaughtExceptionHandler;
import java.util.Date;
import java.util.Locale;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.os.Environment;
import android.os.Looper;
import android.os.StatFs;
import android.util.Log;
/**
* {@link UncaughtExceptionHandler} send an e-mail with
* some debug information to the developer.
*
* @author VIJAYAKUMAR
*/
public class UnCaughtException implements UncaughtExceptionHandler {
private static final String RECIPIENT = "iamvijayakumar@gmail.com";
private Thread.UncaughtExceptionHandler previousHandler;
private Context context;
private static Context context1;
public UnCaughtException(Context ctx) {
context = ctx;
context1 = ctx;
}

private StatFs getStatFs() {
File path = Environment.getDataDirectory();
return new StatFs(path.getPath());
}
private long getAvailableInternalMemorySize(StatFs stat) {
long blockSize = stat.getBlockSize();
long availableBlocks = stat.getAvailableBlocks();
return availableBlocks * blockSize;
}
private long getTotalInternalMemorySize(StatFs stat) {
long blockSize = stat.getBlockSize();
long totalBlocks = stat.getBlockCount();
return totalBlocks * blockSize;
}
private void addInformation(StringBuilder message) {
message.append("Locale: ").append(Locale.getDefault()).append('\n');
try {
PackageManager pm = context.getPackageManager();
PackageInfo pi;
pi = pm.getPackageInfo(context.getPackageName(), 0);
message.append("Version: ").append(pi.versionName).append('\n');
message.append("Package: ").append(pi.packageName).append('\n');
} catch (Exception e) {
Log.e("CustomExceptionHandler", "Error", e);
message.append("Could not get Version information for ").append(
context.getPackageName());
}
message.append("Phone Model: ").append(android.os.Build.MODEL).append(
'\n');
message.append("Android Version: ").append(
android.os.Build.VERSION.RELEASE).append('\n');
message.append("Board: ").append(android.os.Build.BOARD).append('\n');
message.append("Brand: ").append(android.os.Build.BRAND).append('\n');
message.append("Device: ").append(android.os.Build.DEVICE).append('\n');
message.append("Host: ").append(android.os.Build.HOST).append('\n');
message.append("ID: ").append(android.os.Build.ID).append('\n');
message.append("Model: ").append(android.os.Build.MODEL).append('\n');
message.append("Product: ").append(android.os.Build.PRODUCT).append(
'\n');
message.append("Type: ").append(android.os.Build.TYPE).append('\n');
StatFs stat = getStatFs();
message.append("Total Internal memory: ").append(
getTotalInternalMemorySize(stat)).append('\n');
message.append("Available Internal memory: ").append(
getAvailableInternalMemorySize(stat)).append('\n');
}
public void uncaughtException(Thread t, Throwable e) {
try {
StringBuilder report = new StringBuilder();
Date curDate = new Date();
report.append("Error Report collected on : ").append(curDate.toString()).append('\n').append('\n');
report.append("Informations :").append('\n');
addInformation(report);
report.append('\n').append('\n');
report.append("Stack:\n");
final Writer result = new StringWriter();
final PrintWriter printWriter = new PrintWriter(result);
e.printStackTrace(printWriter);
report.append(result.toString());
printWriter.close();
report.append('\n');
report.append("**** End of current Report ***");
Log.e(UnCaughtException.class.getName(),
"Error while sendErrorMail"+report);
sendErrorMail(report);
} catch (Throwable ignore) {
Log.e(UnCaughtException.class.getName(),
"Error while sending error e-mail", ignore);
}
// previousHandler.uncaughtException(t, e);
}
/**
* This method for call alert dialog when application crashed!
* @author vijayakumar
*/
public void sendErrorMail(final StringBuilder errorContent) {
final AlertDialog.Builder builder= new AlertDialog.Builder(context);
new Thread(){
@Override
public void run() {
Looper.prepare();
builder.setTitle("Sorry...!");
builder.create();
builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
@Override
public void onClick(DialogInterface dialog, int which) {
System.exit(0);
}
});
builder.setPositiveButton("Report", new DialogInterface.OnClickListener() {
@Override
public void onClick(DialogInterface dialog, int which) {
Intent sendIntent = new Intent(Intent.ACTION_SEND);
String subject = "Your App crashed! Fix it!";
StringBuilder body = new StringBuilder("Yoddle");
body.append('\n').append('\n');
body.append(errorContent).append('\n').append('\n');
// sendIntent.setType("text/plain");
sendIntent.setType("message/rfc822");
sendIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { RECIPIENT });
sendIntent.putExtra(Intent.EXTRA_TEXT, body.toString());
sendIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
sendIntent.setType("message/rfc822");
// context.startActivity(Intent.createChooser(sendIntent, "Error Report"));
context1.startActivity(sendIntent);
System.exit(0);
}
});
builder.setMessage("Unfortunately,This application has stopped");
builder.show();
Looper.loop();
}
}.start();
}
} 
```

# view - 隐藏 IntelliJ Idea 问题视图

> ID：14021062
> 
> 赞同：0
> 
> 时间：2012-12-24T11:53:15.160
> 
> 标签：view, intellij-idea

有没有办法隐藏问题视图选项卡？

我在工具窗口中选择了它，但找不到任何方法再次隐藏它。即使编辑项目 XML 也无济于事。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:56:46.490

只需单击问题窗口右上角的向下箭头，或在聚焦时单击 shift+escape。您还可以删除工具栏 -`view > and un tick.`

# delphi - 如何从delphi 7中的资源文件中读取？

> ID：14021066
> 
> 赞同：1
> 
> 时间：2012-12-24T11:53:52.277
> 
> 标签：delphi, delphi-7, embedded-resource

我已经制作了资源文件，并已将其编译并与我的 delphi 单元链接。但是从该资源文件中读取时我遇到了问题。

```
implementation

{$R *.dfm}
{$R 'stuff.res' 'stuff.rc'}

procedure TForm1.FormCreate(Sender: TObject);
  var vExeFile: string;
  RS: TResourceStream;
begin
  RS := TResourceStream.Create(HInstance, 'ExeTest', RT_RCDATA);
  try
    vExeFile := ExtractFilePath(ParamStr(0)) + 'tmp.exe';
    RS.SaveToFile(vExeFile);
  finally
    RS.Free;
 end;
end; 
```

我已经尝试了上面的代码，但它显示**Resource ExeTest not found**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:24:38.030

如果您想导出 RCDATA，您的 rc 文件必须如下所示：

```
ExeTest RCDATA YourDataFileName 
```

# mysql - mysqldump：错误 1317：运行数据库备份时查询执行被中断

> ID：14021070
> 
> 赞同：3
> 
> 时间：2012-12-24T11:54:01.510
> 
> 标签：mysql, mysqldump, cloud-foundry

在服务器（CloudFoundry）中运行数据库备份运行命令时，出现此错误：

```
mysqldump: Error 1317: Query execution was interrupted when dumping table `attac
hment` at row: 26 
```

为什么它给出这样的错误？是因为mysql杀死了一些需要太多时间的进程..？还是因为其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:15:33.903

CF 确实杀死查询进程花费了超过 3 秒。请尝试以下步骤，看看是否可以解决：

1) vmc 隧道服务名称

2) 为隧道命令选择“无”

3) 启动一个单独的 mysqldump 进程，其中包含一些调整选项，例如 --where

看看能不能通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T13:17:41.677

我正在使用一个 ~140GB 的数据库，并得到了同样的错误。

```
$ mysql --version
mysql  Ver 14.14 Distrib 5.6.51, for Linux (x86_64) using  EditLine wrapper 
```

就我而言，我想将数据库移动到另一台服务器，因此我首先启用了这些设置`/etc/my.cnf`以设置复制过程。

```
log-bin=mysql-bin
server-id=1 
```

我重新启动了服务器，以便主服务器开始记录复制。
然后我添加了这些设置以防止`Error 1317`超时。特别是对于大型表查询，读/写超时以前太低了。

```
net_read_timeout=9999
net_write_timeout=9999
net_retry_count=999 
```

然后我使用这个命令来获取转储，利用“时间点”。
由于“服务器 2”尚未启动，它将转储所有内容。
在我为服务器 2 打开复制后，它将提取自此转储以来的所有新记录。如果您不进行复制，则
可以省略。`--master-data=2`

`sudo mysqldump --compress --max-allowed-packet=1G --master-data=2 --single-transaction --databases ${dbname} -r ${backupname}`
大约花了4个小时才完成。

这是我的完整`/etc/my.cnf`供参考-

```
$ cat /etc/my.cnf
[mysqld]
innodb_file_per_table=1
default-storage-engine=MyISAM
performance-schema=0
max_allowed_packet=268435456
open_files_limit=10000
innodb_buffer_pool_size=1G
bulk_insert_buffer_size=20971520
query_cache_type=1
query_cache_size=16777216
log-bin=mysql-bin
server-id=1
net_read_timeout=9999
net_write_timeout=9999
net_retry_count=999 
```

# java - 如何设置 JAX-WS 客户端超时？

> ID：14021072
> 
> 赞同：2
> 
> 时间：2012-12-24T11:54:15.520
> 
> 标签：java, web-services, jakarta-ee, jboss, jax-ws

我正在 Jboss 5.1.0 GA 上开发 Jax-ws 客户端。我想设置 Web 服务客户端超时。

我试过**StubExt.PROPERTY_CLIENT_TIMEOUT**。

```
int timeoutMillisecond=3000;
bp.getRequestContext().put(StubExt.PROPERTY_CLIENT_TIMEOUT, timeoutMillisecond); 
```

它可以工作，但仅在**3*timeoutMillisecond**后（9000 毫秒后）才抛出异常，但 3000ms 写入日志文件。

```
2012-12-24 15:42:40,053 DEBUG Sending request
2012-12-24 15:42:49,057 ERROR WebServiceException returned: 
javax.xml.ws.WebServiceException: org.jboss.ws.core.WSTimeoutException: Timeout after: 3000ms 
```

* * *

我还尝试了许多其他方式

```
bp.getRequestContext().put("com.sun.xml.ws.connect.timeout", 100);
bp.getRequestContext().put("com.sun.xml.ws.request.timeout", 100);
// from com.sun.xml.ws.developer.JAXWSProperties
bp.getRequestContext().put(JAXWSProperties.CONNECT_TIMEOUT, 100);
bp.getRequestContext().put(JAXWSProperties.REQUEST_TIMEOUT, 100); 
```

但是在 Jboss 5.1 上没有任何效果

* * *

你能告诉我如何正确设置客户端超时吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T12:07:19.690

我做了以下步骤并**解决了问题**：

1.  升级**jbossws-native**库，请[点击此链接](http://www.jboss.org/jbossws/downloads)。
    jbossws-native-3.4.0 是 Jboss 5.1.0GA 的最新支持版本。你可以看到[JBossWS - Supported Target Containers](https://community.jboss.org/wiki/JBossWS-SupportedTargetContainers)

2.  用过的`StubExt.PROPERTY_CLIENT_TIMEOUT`

    ```
    int timeoutMillisecond=3000;
    bp.getRequestContext().put(StubExt.PROPERTY_CLIENT_TIMEOUT, timeoutMillisecond); 
    ```

顺便说一句，在这个版本中`StubExt.PROPERTY_CONNECTION_TIMEOUT`也可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:29:53.660

您可以将[这些](http://docs.oracle.com/javaee/5/api/javax/xml/ws/BindingProvider.html)设置用于您的服务端口。

```
BindingProvider bindingProvider = (BindingProvider) YOUR_SERVICE_PORT;
Map<String, Object> context = bindingProvider.getRequestContext();
context.put(BindingProviderProperties.CONNECT_TIMEOUT, 3*1000);
context.put(BindingProviderProperties.REQUEST_TIMEOUT,3*1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T13:25:34.377

你完全错过了点检出代码：

URL url = 新 URL(" [http://tst.com:9990/ws/hello?wsdl](http://tst.com:9990/ws/hello?wsdl) ");

```
 //1st argument service URI, refer to wsdl document above
//2nd argument is service name, refer to wsdl document above
    QName qname = new QName("http://tstsoap/", "HelloWorldImplService");

    Service service = Service.create(url, qname);

   HelloWorld hello = service.getPort(HelloWorld.class); 
```

如您所见，如果不先创建服务，您将无法获得端口。
所以超时总是发生在服务创建时。所以为端口设置时间是没有意义的......有人需要发布一些关于服务超时......而不是端口超时......除非有人能证明我错了......

# database - 在数据库设计中尽量减少外键的数量是一种好习惯吗

> ID：14021073
> 
> 赞同：0
> 
> 时间：2012-12-24T11:54:17.887
> 
> 标签：database, database-design

我几乎没有后端和数据库设计的经验，所以我想知道，尽量减少数据库中的外键数量是一种好习惯吗？

例如，让我们考虑登录搜索网站：

```
USER --hasA--> SESSION --makes--> QUERY 
```

在这种情况下，用户和会话之间是一对多的关系，而会话和查询之间是一对多的关系。session 有一个 user_id 的外键和 query 有一个 session_id 的 foreign_key 是有意义的，但是查询表是否应该有 user_id 的外键？为什么或者为什么不？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:00:07.973

添加`user_id`to`QUERY`会使数据库变得多余。这就是为什么这主要是不好的做法。在极端情况下（很少），它可能是必要的性能优化。

最小化外键的数量通常不是设计目标，因为它没有任何帮助。

典型的设计目标是拥有一个最自然地为业务领域建模的干净数据库。从这个意义上说，不要添加`user_id`to `QUERY`。但绝对*要*添加所有有意义的 FK。这确实为开发成本和应用程序可靠性提供了明显的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:58:01.837

让我们考虑一个极端的例子来展示这种方法的后果。如果将此解决方案应用于模型中的所有表会发生什么？让我们用一些额外的表格来扩展你的模型，看看它带来了什么：

![草案](../Images/534eeb303c1d3e5b25223606ec696cfd.png)

现在是否清楚它与正确的数据库模式有何关系？

# shell - 仅当使用 shell 脚本存在时才删除目录

> ID：14021075
> 
> 赞同：6
> 
> 时间：2012-12-24T11:54:46.750
> 
> 标签：shell

我有一个 shell ( `ksh`) 脚本。我想确定某个目录是否存在于 中`/tmp`，如果存在，则必须将其删除。我的脚本是：

**测试**

```
#!/usr/bin/ksh
# what should I write here?
if [[ -f /tmp/dir.lock ]]; then
    echo "Removing Lock"
    rm -rf /tmp/dir.lock
fi 
```

我该如何进行？我没有得到想要的结果：当我执行脚本时目录没有被删除并且我没有`Removing Lock`在我的屏幕上得到输出。

我手动检查并且锁定文件存在于该位置。锁定文件`set MUTEX_LOCK "/tmp/dir.lock"`由 TCL 程序创建。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T12:21:30.823

除了`-f`vs`-d`注意`[[ ]]`不是 POSIX，while`[ ]`是。您多次使用的任何字符串或路径都应该在变量中以避免输入错误，尤其是当您使用`rm -rf`which deletes 时带有极大的偏见。最便携的解决方案是

```
DIR=/tmp/dir.lock
if [ -d "$DIR" ]; then
    printf '%s\n' "Removing Lock ($DIR)"
    rm -rf "$DIR"
fi 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T12:14:59.947

对于目录检查，您应该使用`-d`：

```
if [[ -d /tmp/dir.lock ]]; then
    echo "Removing Lock"
    rm -rf /tmp/dir.lock
fi 
```

# javascript - 如何用动画添加数字

> ID：14021076
> 
> 赞同：0
> 
> 时间：2012-12-24T11:54:53.540
> 
> 标签：javascript, jquery

我想在现有数字中添加数字，如秒表，我的功能是完美地添加数字，但我想添加像秒表这样的动画，我试过但我没有任何线索来完成它。这是一个[工作演示](http://jsfiddle.net/uyG92/)

```
$('a').click(function() {
    var val = parseInt($(this).text());
    var currentVal = parseInt($('#price').text())
    var cal = parseInt(val-currentVal)
    var club = parseInt($('#price').text()) + cal
    var bb = $('#price').text(club)
})
})​ 
```

HTML

```
<a href="#">10000</a>
<a href="#">12000</a>
<a href="#">15000</a>
<div id="price">10000</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:59:37.533

当您设置 .text 时，请考虑您可以在此处应用 JQuery 动画作为回调字符串。例如，这样的事情可能会奏效。将函数的最后一行更改为：

```
$('#price').fadeOut('fast', function() { this.text(club); this.fadeIn('fast');}) 
```

[这里](https://stackoverflow.com/questions/6305667/change-text-html-with-animate)有一个工作示例的 JSFiddle 链接的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:16:39.420

使用 javascript 函数`setInterval`做您选择的动画。
[查看 jsfiddle](http://jsfiddle.net/vusan/uyG92/1/)
了解[javascript 动画](http://javascript.info/tutorial/animation)`setInterval`，供初学者在不使用任何框架的情况下推进 javascript 动画。

# joomla - 使用joomla组件更新mysql中的时间戳字段

> ID：14021078
> 
> 赞同：3
> 
> 时间：2012-12-24T11:55:04.507
> 
> 标签：joomla, joomla2.5, joomla-extensions

我正在开发 joomla 组件**(com_book) 3.0 版**。我正在尝试使用*表单*将书籍插入*数据库*，在数据库中我有`updated_at`我正在使用的那一列的列`timestamp datatype`。当我使用数据库插入和更新书籍并使用表单插入书籍时，这里`updated_at`的列工作正常，那么它工作正常，但是当我尝试使用时间`update_at`列不更新的表单更新书籍时。

谁能解释我在这个过程中犯了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:06:28.450

另一种方法是为此创建一个自定义字段，

在您的 book.xml 表单文件中使用此域代码

```
<fieldset
addfieldpath="/administrator/components/com_book/models/fields"
>
..
..
<field name="timestamp" type="lastmodified"
label="" description="" />
..
..
</fieldset> 
```

并在 /administrator/components/com_book/models/fields 文件夹中创建一个名为 lastmodified.php 的文件

```
<?php

defined('JPATH_BASE') or die;

jimport('joomla.form.formfield');

/**
 * Supports an HTML form field
 */
class JFormFieldLastModified extends JFormField
{
    /**
     * The form field type.
     *
     * @var        string
     * @since    1.6
     */
    protected $type = 'lastmodified';

    /**
     * Method to get the field input lastmodified.
     *
     */
    protected function getInput()
    {
        // Initialize variables.
        $html = array();
        $old_time_updated = $this->value;
        if ($old_time_updated) {
            $jdate = new JDate($old_time_updated);
            $pretty_date = $jdate->format(JText::_('DATE_FORMAT_LC2'));
        }
        $time_updated = date("Y-m-d H:i:s");
        $html = '<input type="hidden" name="'.$this->name.'" value="'.$time_updated.'" />';

        return $html;
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:09:13.423

将此函数粘贴到您的表的表文件中，例如 Joomla-Root/Administrator/com_book/table/book.php 如果已经有一个存储函数，然后编辑它并单独添加这些行，这样就可以完成工作，

```
 public function store($updateNulls = false)
{
    $date   = JFactory::getDate();
               // this is your primary key maybe id or book_id
    if ($this->book_id) {
        // Assigning the last modified date to your timestamp field
        $this->timestamp    = $date->toSql();
    }

    // Attempt to store the user data. - just leave the rest to parent function
    return parent::store($updateNulls);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T08:40:45.560

Joomla 组件创建器可以构建 Joomla 3.0 组件，让您免于处理此类简单的事情。

看看：[http ://www.notwebdesign.com/joomla-component-creator/](http://www.notwebdesign.com/joomla-component-creator/)

一张桌子是免费的。如果没有别的，你可以从那里复制粘贴代码或峰值，看看如何开发自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T07:09:15.583

在数据绑定后的保存功能中，您可以设置`updated_at`

```
// Bind the data to the table
if (!$table->bind($post))
{
//display error
}
//after binding write this line-
$table->updated_at  = date('Y-m-d H:i:s'); 
```

如果这不起作用，请告诉我。

# setup-deployment - 在安装过程中运行另一个设置

> ID：14021086
> 
> 赞同：1
> 
> 时间：2012-12-24T11:56:17.847
> 
> 标签：setup-deployment

我正在使用 Visual Studio 安装和部署。我已经建立了一个安装项目，我想在安装我的主要设置期间运行另一个安装文件。请告知如何去做。

谢谢

# c - 完美平衡二叉搜索树

> ID：14021088
> 
> 赞同：8
> 
> 时间：2012-12-24T11:56:22.230
> 
> 标签：c, algorithm, linked-list, binary-search-tree, avl-tree

我有一个关于`Balanced BST`.

我想构建`Perfect Balanced Tree`具有`2^k - 1`节点的常规`unbalanced BST`. 我能想到的最简单的解决方案是使用排序`Array/Linked list`并递归地将数组划分为子数组，并`Perfect Balanced BST`从中构建。

但是，在 Tree 大小非常大的情况下，我需要创建一个`Array/List`相同大小的树，因此这种方法会消耗大量内存。

另一种选择是使用`AVL`旋转函数，逐个元素插入并根据树平衡因子（左右子树的三个高度）通过旋转平衡树。

我的问题是，我的假设是否正确？有没有其他方法可以`BST`从不平衡创造完美`BST`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:54:04.710

AVL 和类似的树不是*完全*平衡的，所以我不确定它们在这种情况下如何有用。

`left`您可以使用和`right`指针代替`forward`和指针，从树节点构建双向链表`backward`。对该列表进行排序，并从下往上递归地构建树，从左到右使用该列表。

构建大小为 1 的树很简单：只需咬掉列表中最左边的节点即可。

现在，如果您可以构建一棵大小的树`N`，那么您也可以构建一棵大小的树`2N+1`：构建一棵大小的树`N`，然后咬掉一个节点，然后构建另一棵大小的树`N`。单个节点将是大树的根，两个较小的树将是它的左右子树。由于列表已排序，因此该树自动成为有效的搜索树。

这很容易修改其他尺寸`2^k-1`。

更新：由于您是从搜索树开始的，因此您可以在`O(N)`时间和`O(log N)`空间上直接从它构建一个排序列表（也许甚至在空间中有点巧思），并在时间和（或）空间`O(1)`中自下而上构建树.`O(N)``O(log N)``O(1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:57:17.643

我还没有找到一个非常好的需要完美平衡的搜索树的情况。如果您的情况确实需要它，我想听听。通常，拥有几乎平衡的树会更好更快。

如果您有一个大型搜索树，丢弃所有现有结构通常不是一个好主意。使用旋转函数是获得更平衡的树同时保留大部分现有结构的好方法。但通常你使用合适的数据结构来确保你永远不会有一个完全不平衡的树。所谓的自平衡树。

例如，有一个 AVL 树、一个红黑树或一个展开树，它们使用稍微不同的旋转变体来保持树的平衡。

如果你真的有一棵完全不平衡的树，你可能会遇到不同的问题。- 在您的情况下，旋转 AVL 方式可能是修复它的最佳方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T23:45:59.173

如果您的内存受限，那么您可以使用可以在 O(log n) 时间内在 AVL 树上完成的拆分和连接操作，并且我相信空间不变。

如果您还能够维护订单统计信息，那么您可以按中位数拆分，使 LHS 和 RHS 完美，然后加入。

伪代码（用于递归版本）将是

```
void MakePerfect (AVLTree tree) {

    Tree left, right;
    Data median;

    SplitOnMedian(tree, &left, &median, &right);
    left = MakePerfect(left);
    right = MakePerfect(right);
    return Join(left, median, right);
} 
```

我相信这可以在 O(n) 时间和 O(log n) 空间中实现。

# objective-c - 减少 objc_msgSend 和保留/释放调用

> ID：14021105
> 
> 赞同：1
> 
> 时间：2012-12-24T11:57:55.227
> 
> 标签：objective-c, ios, cocoa-touch

在 Objective-C 中调用方法/属性的性能开销正在扼杀我的 iOS 应用程序的性能；Xcode 分析器（又名 Instruments）将 70% 的延迟归因于`objc_msgSend`、`_retain`和`_release`.

到目前为止，在我的代码中，我对`XROpenGL`类的实例方法进行了大约 1100 次调用，`renderSprite(XRSprite)`该方法是一个重载方法，`renderSprite(XRSprite,int,int,int)`该方法又调用不少于五个其他方法，其中许多方法从`XRSprite`. 你可以想象，有很多消息被发送。

除了用 C++ 重写代码的关键部分之外，我还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T17:14:40.550

那是每帧 6,600 次调用吗？为了便于讨论，我假设为 60 FPS，总调用次数为 396,000，仅用于显式方法调用。如果您假设悲观的情况，objc_msgSend 的开销（相对于 C 函数调用）仍然只有 O(100) 个周期。因此，在现代 iDevice 上，您正在查看大约 4% 的 CPU 时间，非常粗略。没什么大不了的。您可能会为每个调用获得一个或两个保留和相应的发布，但保留/发布相对较快，因此我们将再次谈论个位数的百分比。这种高达约 10% 的“运行时开销”通常不会被认为是过分的，尽管它不是最佳的。

所以，我要问你的问题是：

1.  你可以发布你的代码吗？
2.  您能否发布更详细的配置文件信息（例如，各种前 10 种方法之间的确切细分，以及主要方法的调用堆栈）？
3.  你确定时间真的花在了 objc_msgSend 等人身上，而不仅仅是花在它的孩子身上吗？
4.  你真的打了多少电话？如实测，未假设。
5.  您可以使用 ivars 代替 @properties 来删除一些方法调用吗？
6.  沿着这些思路，您是否缓存了在一种方法中多次使用它们时访问的属性？
7.  你可以重构以减少方法调用的数量，和/或在某些事情上使用 vanilla C 函数吗？

显然是的，你可以用 C++ 重写关键代码。但是对于中级绘图代码，您不必这样做；C++ 通常留给低级构造，如向量和四元数以及其他此类原语。

# php - 表单模型绕过验证

> ID：14021107
> 
> 赞同：0
> 
> 时间：2012-12-24T11:58:17.323
> 
> 标签：php, validation, symfony, doctrine-orm

我有一个`MyProject\SecurityBundle\Entity\User`带有验证约束的用户模型。对于我的注册，我创建了`MyProject\SecurityBundle\Form\Model\Registration`：

```
namespace MyProject\SecurityBundle\Form\Model;

use MyProject\SecurityBundle\Entity\User;

class Registration
{
    private $user;

    private $termsAccepted;

    public function setUser(User $user)
    {
        $this->user = $user;
        return $this;
    }

    public function getUser()
    {
        return $this->user;
    }

    public function setTermsAccepted($termsAccepted)
    {
        $this->termsAccepted = (boolean)$termsAccepted;
        return $this;
    }

    public function getTermsAccepted()
    {
        return $this->termsAccepted;
    }
} 
```

经验证：

```
MyProject\SecurityBundle\Form\Model\Registration:
    properties:
        user:
            - Type: { type: MyProject\SecurityBundle\Entity\User }
        termsAccepted:
            - NotBlank: ~
    getters:
        termsAccepted:
            - "True": ~ 
```

此验证有效，但用户实体的验证被此绕过。有没有办法可以将验证传输到我的注册模型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:17:56.627

如果我在**正确**的地方进行了搜索，我会在文档中找到[http://symfony.com/doc/2.0/reference/constraints/Valid.html](http://symfony.com/doc/2.0/reference/constraints/Valid.html)并提供解决方案：

```
MyProject\SecurityBundle\Form\Model\Registration:
    properties:
        user:
            - Type: { type: MyProject\SecurityBundle\Entity\User }
            - Valid: ~ 
```

# python - 关于 datetime.strptime()

> ID：14021108
> 
> 赞同：1
> 
> 时间：2012-12-24T11:58:20.670
> 
> 标签：python

我对 python 中的 datetime 相当陌生，我使用的是 Python 2.7.3

在 python 控制台中：

```
>>>import datetime
>>>datetime.datetime.strptime("2012-3-12 10:10:10", "%Y-%m-%j %H:%M:%S") 
```

为什么结果如下？

```
datetime.datetime(2012, 1, 12, 10, 10, 10) 
```

而不是

```
datetime.datetime(2012, 3, 12, 10, 10, 10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:01:03.617

因为您使用`%j`的是“一年中的一天”，因此它会弄乱您的日期时间。这有点像试图同时将汽车的方向盘转向两个方向——这是行不通的……

你想要`%d`：

```
>>> datetime.datetime.strptime("2012-03-12 10:10:10", "%Y-%m-%d %H:%M:%S")
datetime.datetime(2012, 3, 12, 10, 10, 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:01:14.143

它是`%j`您的格式，来自[文档](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)：

> 以十进制数表示的一年中的日期 [001,366]。

一年中的第 12 天是 1 月 12 日。

改用`%d`：

```
>>> datetime.datetime.strptime("2012-03-12 10:10:10", "%Y-%m-%d %H:%M:%S")
datetime.datetime(2012, 3, 12, 10, 10, 10) 
```

# html - div ID 使用上一个属性

> ID：14021109
> 
> 赞同：1
> 
> 时间：2012-12-24T11:58:24.023
> 
> 标签：html, rollover

我遇到的问题是我指定了一些翻转按钮和一些 div id 来控制我的图像位置。但是，当我创建一个名为 Text 的新 div 并放入一些内容时，这似乎也触发了我的翻转按钮？就像它使用上面 div 中的代码一样，即使我使用了`<div>`标签：

[http://jsfiddle.net/bq5MR/2/](http://jsfiddle.net/bq5MR/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:09:32.297

你没有关闭你的第二个'a'标签。尝试关闭它，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:10:17.477

您的示例不显示图像。

您还没有关闭`<a>`标签，这可能会导致效果区域比您预期的要大。

[http://validator.w3.org/](http://validator.w3.org/) - 一个免费的 HTML 验证器，可以帮助查明无效的 HTML 和潜在问题。

# hibernate - 休眠会话中的持久数据变得陈旧，有时休眠会生成重复的 ID

> ID：14021112
> 
> 赞同：3
> 
> 时间：2012-12-24T11:58:36.917
> 
> 标签：hibernate, session, tomcat, liferay

我正在为我的应用程序使用休眠。有时休眠会生成重复的 ID，而我使用的策略是增量，它从表中执行 max(ID) 并添加一个。我不知道它为什么会发生并且它突然发生，之后对该表插入操作的所有后续请求都失败了。解决方法是重新启动 tomact 服务器。

这是申请的详细信息

**1.**部署在liferay-tomcat.each上的3个应用程序都有自己的abstraction-impls.jar。这个JAR包含了使用Hibernate与oracle交互的类。我可能怀疑这是导致此问题的一种可能情况。

**2.**所有3个应用程序都有hibernate相关的JAR

我进行了以下测试以确认问题是否是由于多线程导致的， **1）**创建了 3 个线程，其中每个线程运行一个 for 循环 20 次以插入同一个表> 我没有发现任何问题。一切顺利。

这是上面的示例代码。

```
public class ThreadTest implements Runnable{
@Override
public void run() {
    // TODO Auto-generated method stub
    for(int i=0;i<20;i++){
        UserManagement userManagement = new UserManagementImpl(-1);
        Context context = new Context();
        context.setUserId("testUser");
        context.getUserContextMap().put("password", "shiva123");
        try{
        int sessionId = userManagement.login(context);
        System.out.println("thread<<"+Thread.currentThread().getName() + ">>    "+sessionId);
        }catch(Exception e){
            e.printStackTrace();
        }

    }
}

public static void main(String[] args) {
    Thread t1 = new Thread(new ThreadTest());
    Thread t2 = new Thread(new ThreadTest());
    Thread t3 = new Thread(new ThreadTest());
    t1.setName("t1");
    t2.setName("t2");
    t3.setName("t3");
    t1.start();
    t2.start();
    t3.start();
} 
```

}

**如何获得正确的 ID 是问题或如何避免生成重复的 ID？**

这是给我带来问题的代码。

下面是hibernate映射类。

```
import javax.persistence.Column;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;
import javax.persistence.UniqueConstraint;

@javax.persistence.Entity
@Table(name="entities",
uniqueConstraints = {@UniqueConstraint(columnNames={"id"})})
@org.hibernate.annotations.GenericGenerator(
    name = "test-increment-strategy",
    strategy = "increment")
public class EntityImpl extends Entity {

/**
 * Serial Version UID for this class
 */
private static final long serialVersionUID = -9214466697134157251L;
@Override
public String toString() {
    return "EntityImpl [entityId=" + entityId + ", entityName="
            + entityName + ", entityType=" + entityType
            + ", parentEntityId=" + parentEntityId + ", entityHierarchy="
            + entityHierarchy + "]";
}

private int entityId;
private String entityName;
private String entityType;
private int parentEntityId;
private String entityHierarchy;

@Id
    @GeneratedValue(generator = "test-increment-strategy")
@Column(name = "ID", nullable = false, updatable = false)
public int getEntityId() {
    return entityId;
}
/** Sets the Entity ID for this instance */
public void setEntityId(int entityId) {
    this.entityId = entityId;
}
/** Retrieves the name of this Entity instance */
@Column(name = "entity_name", nullable = false)
public String getEntityName() {
    return entityName;
}
/** Sets the name of this Entity instance */
public void setEntityName(String entityName) {
    this.entityName = entityName;
}
/** Retrieves the type of this Entity instance */
@Column(name = "entity_type", nullable = false, updatable = false)
public String getEntityType() {
    return entityType;
}
/** Sets the type of this Entity instance */
public void setEntityType(String entityType) {
    this.entityType = entityType;
}
/** Retrieves the Parent Entity ID for this instance */
@Column(name = "parent_id")
public int getParentEntityId() {
    return parentEntityId;
}
/** Sets the Parent Entity ID for this instance */
public void setParentEntityId(int parentEntityId) {
    this.parentEntityId = parentEntityId;
}

@Column(name = "ENTITY_HIERARCHY", nullable = false, updatable = false)
public String getEntityHierarchy() {
    return entityHierarchy;
}

public void setEntityHierarchy(String entityHierarchy) {
    this.entityHierarchy = entityHierarchy;
} 
```

}

下面是保存实体的方法

```
private boolean save (Serializable object, Session session) throws EntityNotFoundException, InternalSystemException {
    logger.debug("save() - start"); 
    Transaction tx = null;
    boolean successful = false;
    boolean localInit = false;
    try {
        if (session == null) {
            session = createSession();
            tx = session.beginTransaction();
            //session.save(object);
            localInit = true;
        }
        session.save(object);
        logger.debug("**********************************");
        logger.debug("object: "+object);
        logger.debug("**********************************");
        if (localInit == true) {
            tx.commit();
        }
        successful = true;
    } catch(HibernateException ex) {
        logger.error("error in saving entity "+ ex);
        if (localInit == true && tx !=null)
            tx.rollback();
        ex.printStackTrace();
        throw new InternalSystemException("error in saving entity "+ ex);
    } catch(Exception ex) {
        logger.error("error in saving entity "+ex);
        if (localInit == true && tx !=null)
            tx.rollback();
        new InternalSystemException("error in saving entity "+ ex);
    }finally {
        if (localInit && session != null) {
            session.flush();
            session.clear();
            session.close();
        }
    }
    if (logger.isDebugEnabled()) {
        logger.debug("save() - end"); 
    }
    return successful;
} 
```

错误不会一直发生，但一旦发生，同样会继续，测试的oracle环境是Oracle RACK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T08:08:08.433

在这种情况下不应使用增量策略。它包括将最大值加载到内存中的计数器中，然后在每次请求新 ID 时递增它。由于您部署了 3 个应用程序，因此您有 3 个这样的计数器，每个都初始化为相同的初始值，因此它们将返回相同的 ID。

这显然是有[记录](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e5294)的：

> 增量
> 
> 生成 long、short 或 int 类型的标识符，这些标识符仅在没有其他进程将数据插入同一个表时才是唯一的。*不要在集群中使用*。

（强调不是我的）

序列生成器不会出现同样的问题。如果是这样，那么要么您在配置中缺少某些内容，要么三个应用程序之一继续使用增量策略，要么您从外部插入 ID，或者数据库中序列的初始值错误。不看代码，不看ID的最大值，不看序列的定义，很难说。

# ios - 从原生 iOS 联系人应用程序获取钛的联系方式

> ID：14021114
> 
> 赞同：1
> 
> 时间：2012-12-24T11:58:47.293
> 
> 标签：ios, titanium, contacts, appcelerator, titanium-mobile

我是钛的新手。目前我正在开发一个项目，用户需要使用 iOS 联系人应用程序中的联系人详细信息。

我的`app.js`长相是这样的

```
Window = require('ui/handheld/ApplicationWindow');
var win = Window();
win.open();
var button = Ti.UI.createButton({
    title : 'Show Contacts',
    width : 100,
    height: 50,
});
win.add(button);
button.addEventListener('click',function(e){
    Titanium.Contacts.showContacts({ });
}); 
```

当我单击一个按钮时，将显示以下代码：

![联系人列表](../Images/9e24a9990d431ca1d2a562d74f115b9c.png)

当我选择一个联系人时，详细信息会显示在另一个屏幕上：

![联系方式](../Images/24fe1624e35e0c01034d46fe8684c493.png)

但我不希望这样，当用户选择个人联系人时，详细信息应传递到我的`app.js`文件中。并且无需进入详细信息页面。

有没有办法做到这一点？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:12:41.947

似乎您缺少选择一个人时要调用的函数声明：

```
Titanium.Contacts.showContacts({/*missing selectedPerson callback object*/}); 
```

[您可以在此处](http://docs.appcelerator.com/titanium/latest/#!/api/showContactsParams)阅读有关可以将哪些参数传递给`showContacts`方法的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:32:32.760

终于我明白了。

我使用了以下代码：

```
button.addEventListener('click',function(e){
    Titanium.Contacts.showContacts(values);
});
var values = {cancel:function(){}};
values.fields = ['firstName', 'lastName', 'phone'];

values.selectedProperty = function(e) {
                var cn = e.person.firstName; 
                var sn = e.person.lastName;
                alert('Name'+cn+' '+sn);
}; 
```

参考 :[钛触点](http://developer.appcelerator.com/question/81741/titaniumcontactsperson-sorting-on-android-and-iphone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T07:44:29.347

```
var parms = {
animated : true,
selectedPerson : function(e) {
    alert(e.person);
} 
```

`}; Titanium.Contacts.showContacts(parms);`

您将获得`e.person`对象中所选人员的详细信息。可以根据您的要求传递给 app.js 等。我只是在警报中显示它。

# jenkins - 詹金斯从团队城市喂食

> ID：14021124
> 
> 赞同：1
> 
> 时间：2012-12-24T11:59:43.863
> 
> 标签：jenkins

我真的很喜欢使用 jenkins 来编排构建的部署和测试的想法，但是我目前仍坚持使用团队城市进行编译。

有没有办法让詹金斯监控团队城市项目，并且当团队城市中的新构建完成时，将输出文物作为新詹金斯周期的触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T03:49:01.027

安装 Jenkins 后，您可以使用以下方法之一：

1.  [监控外部作业](https://wiki.jenkins-ci.org/display/JENKINS/Monitoring+external+jobs)
2.  [FSTrigger 插件](https://wiki.jenkins-ci.org/display/JENKINS/FSTrigger+Plugin)
3.  [XTrigger 插件](https://wiki.jenkins-ci.org/display/JENKINS/XTrigger+Plugin)

[这里](https://wiki.jenkins-ci.org/display/JENKINS/Plugins#Plugins-Buildtriggers)还有更多。

# jquery - 我的链接不起作用，当使用 ajax 和 jquery 打开它时

> ID：14021127
> 
> 赞同：1
> 
> 时间：2012-12-24T11:59:48.200
> 
> 标签：jquery, ajax

我的页面上有一些`div`元素。在 main`div`中，当单击链接时，使用 jQuery 通过 AJAX 加载内容。当我单击不在 main 中的链接时，这非常有效`div`。但是当我有一个`div`通过 AJAX 加载的主链接时，它们就不起作用了。我不知道为什么。这是一个例子：

我有一个链接。我给了它这个类`products`，所以 jQuery 知道要加载哪些内容。所以我的链接看起来像这样：

```
<a href="javascript:;" class="products">products</a> 
```

我已经放`href="javascript:;"`了，因为对我来说`href="#"`不起作用，我需要一个`href`所以一些 CSS 可以工作。

可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:04:12.697

我猜测没有看到您的实际代码，但更多情况下不是这样的问题是因为您在加载时分配处理程序，而不是在将新元素附加到页面`click`时重新分配它们。`div`

要解决此问题，请使用委托事件处理程序，如下所示：

```
$('#parentDiv').on('click', 'a', function() {
    // do your thing in here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:07:42.613

好吧，当您放置`href="#"`时，页面实际上是重新加载的，其中 url 被 # 符号颠倒了。您需要**`return false`**在点击事件结束时停止重新加载，一切都会正常工作。否则你也可以这样做`href`。
怎么样，你需要知道我猜它必须像`href="javascript:return false;"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:21:40.047

JQuery API 官方建议所有用户使用`.live()`此案例，

像这样的语法：

```
$('a.products').live('click',function() {
   // do what you want
}); 
```

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T11:32:01.917

.live 的解决方案对我有用。

这是我现在使用的 jquery 代码：

这是我的代码。对不起，我忘了张贴！

```
 <script>
$(document).ready(function() {
    $('.sofas').live('click',function() {
    $('#content-shown , #pics').animate({opacity:0},250,function() {

    $('.content-loading').fadeIn(250, function() {
    $('#navigation_all , #content-shown').css("height","6600px");
    $('#pics').load('content.html #sofas-bild').animate({opacity:1},250);
    $('#content-shown').load('content.html #sofas', function() {
    $('.content-loading').fadeOut(250, function() {

        $('#content-shown').animate({opacity:1},250);

    });
    });
    });
    });
            });
            });

</script> 
```

在此之前，我得到了 .click(function() { 而不是 .live....

# python - 如何在写入 INI 文件时删除空格 - Python

> ID：14021135
> 
> 赞同：5
> 
> 时间：2012-12-24T12:00:42.550
> 
> 标签：python, python-2.7, configparser

我正在使用一个文件，我有一个名为 DIR 的部分，其中包含路径。前任：

```
[DIR]
DirTo=D:\Ashish\Jab Tak hai Jaan
DirBackup = D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\Backup
ErrorDir = D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\Error

CombinerDir = D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\Combiner
DirFrom=D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\In
PidFileDIR = D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\Pid
LogDir = D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\Log   
TempDir = D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\Temp 
```

现在我想替换我已经完成的路径，但是当我替换它时，在新写入的`.ini`文件中的分隔符之前和之前给我空格。例如：`DirTo = D:\Parser\Backup`。我如何删除这些空间？

代码：

```
def changeINIfile():
    config=ConfigParser.RawConfigParser(allow_no_value=False)
    config.optionxform=lambda option: option
    cfgfile=open(r"D:\Parser\ERICSSON_CSCORE_STANDARD_VMS\Windows\opx_PAR_GEN_660_ERICSSON_CSCORE_STANDARD_PM_VMS_MALAYSIA.ini","w")
    config.set('DIR','DirTo','D:\Ashish\Jab Tak hai Jaan')
    config.optionxform=str
    config.write(cfgfile)
    cfgfile.close() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-01T15:52:19.777

我遇到了这个问题，我想出了一个额外的解决方案。

*   我不想替换该函数，因为 Python 的未来版本可能会更改 RawConfigParser 的内部函数结构。
*   我也不想在文件写入后立即重新读取文件，因为这似乎很浪费

相反，我在文件对象周围编写了一个包装器，它只是在通过它编写的所有行中将“=”替换为“=”。

```
class EqualsSpaceRemover:
    output_file = None
    def __init__( self, new_output_file ):
        self.output_file = new_output_file

    def write( self, what ):
        self.output_file.write( what.replace( " = ", "=", 1 ) )

config.write( EqualsSpaceRemover( cfgfile ) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-11T13:03:47.727

我知道这是一个非常古老的问题，但最新版本的`Configparser`解决方案很简单。只需使用：

> parser.write(file_pointer, space_around_delimiters=Fasle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T15:25:25.453

这是 的定义`RawConfigParser.write`：

```
def write(self, fp):
    """Write an .ini-format representation of the configuration state."""
    if self._defaults:
        fp.write("[%s]\n" % DEFAULTSECT)
        for (key, value) in self._defaults.items():
            fp.write("%s = %s\n" % (key, str(value).replace('\n', '\n\t')))
        fp.write("\n")
    for section in self._sections:
        fp.write("[%s]\n" % section)
        for (key, value) in self._sections[section].items():
            if key != "__name__":
                fp.write("%s = %s\n" %
                         (key, str(value).replace('\n', '\n\t')))
        fp.write("\n") 
```

如您所见，`%s = %s\n`格式被硬编码到函数中。我认为你的选择是：

1.  使用等号周围带有空格的 INI 文件
2.  用你自己`RawConfigParser`的方法覆盖`write`
3.  写文件，读文件，去掉空格，再写

如果您 100% 确定选项 1 不可用，这里有一种方法来执行选项 3：

```
def remove_whitespace_from_assignments():
    separator = "="
    config_path = "config.ini"
    lines = file(config_path).readlines()
    fp = open(config_path, "w")
    for line in lines:
        line = line.strip()
        if not line.startswith("#") and separator in line:
            assignment = line.split(separator, 1)
            assignment = map(str.strip, assignment)
            fp.write("%s%s%s\n" % (assignment[0], separator, assignment[1]))
        else:
            fp.write(line + "\n") 
```

# apache2 - apache 不重写 index.php 等

> ID：14021147
> 
> 赞同：1
> 
> 时间：2012-12-24T12:01:34.790
> 
> 标签：apache2, rewrite

我的重写规则有问题，我想要`http://example.com/b/abc`调用`banner.php?b=abc`，它有效。但是当我输入`http://example.com/index.php?mode=mybanners`它会调用`banner.php?b=index.php?mode=mybanners`（或类似的东西）。我的`.htacces`文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule b/?(.+)$ ./banner.php?b=$1
    RewriteRule i/?(.+)$ ./banner.php?bi=$1
</IfModule> 
```

一些让`/index.php`交互正常的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:32:57.367

尝试以下规则：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !^/index.php
    RewriteRule b/?(.+)$ ./banner.php?b=$1
</IfModule> 
```

# pentaho - 使用 olap4j QueryDimension 计算测量值进行查询

> ID：14021148
> 
> 赞同：1
> 
> 时间：2012-12-24T12:01:38.507
> 
> 标签：pentaho, olap4j

我正在使用 olap4j 来查询我的 rolap 立方体（底层实现是 pentaho）。

在使用 org.olap4j.query 包时，我找不到任何方法将即时计算的测量值添加到查询中。（使用 org.olap4j.mdx 包中的低级 api 时有一种方法）

对我缺少的计算测量有 olap4j 的支持吗？

约西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:21:57.710

到目前为止，计算成员不是查询模型支持的概念。还有其他可用的查询模型；有些人可能会支持他们。

如果您有兴趣在该领域工作，或者只是想了解更多信息，我建议您加入 olap4j[邮件列表](https://lists.sourceforge.net/lists/listinfo/olap4j-devel)。

# java - Eclipse - 我应该在导出 APK 之前清理项目吗？

> ID：14021149
> 
> 赞同：6
> 
> 时间：2012-12-24T12:02:20.243
> 
> 标签：java, android, eclipse, apk

经过几次深夜调试噩梦后，我不知何故陷入了每次要导出已签名/未签名的 .APK 以上传到 App Store 时在 Eclipse 中单击“项目->清理...”的偏执习惯. 我只能假设，在遥远的过去的某个时候，在调试一些外部 JAR 或其他方式时，它似乎是一种必要的保护措施。

这为整个导出过程增加了数分钟的繁琐时间，尤其是对于多个构建和/或应用程序。

这是一个必要的步骤，还是只是偏执狂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:26:53.080

清理项目重新编译所有类，它可能会解决 R.java 类在资源 id 已更改但已编译的引用这些 id 的类不再存在或更改时导致的一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:42:02.810

我会考虑使用 Maven、Ant 或即将推出的 Gradle 构建系统。这避免了工作空间损坏的问题，并让您轻松集成自动化测试；例如 UnitTests 或简单的问题“它在 Android 版本 XY 上运行吗？”
我更喜欢 Jenkins/Hudson 作为构建服务器。

特别是当您有多个针对不同目标的应用程序时，手动运行所有导出可能会很麻烦。

使用 Jenkins 的基于 Ant 的构建系统：[这个](http://blackriver.to/2012/02/android-continuous-integration-with-ant-and-jenkins-part-1/)和[这个](http://blackriver.to/2012/08/android-continuous-integration-with-ant-and-jenkins-part-2-2/)
基于 Gradle 的新构建系统：[这个](http://tools.android.com/tech-docs/new-build-system)

# android - 从列表视图中的 json url 加载图像

> ID：14021155
> 
> 赞同：0
> 
> 时间：2012-12-24T12:02:53.390
> 
> 标签：android, json

在做了很多研究后发布了这个问题。将包含这些图像的 url 的 json 数据中的图像添加到 listview 中。我已经包含了以下代码，但不确切知道要实现哪些代码来加载图像。

```
 public class MainActivity extends ListActivity {

   // url to make request
    private static String url = "http://website/?json=get_recent_posts";

    // JSON Node names
   private static final String TAG_POSTS = "posts";
   private static final String TAG_ID = "id";
   private static final String TAG_TITLE = "title";
   private static final String TAG_DATE = "date";
   private static final String TAG_CONTENT = "content";
   private static final String TAG_AUTHOR = "author";
   private static final String TAG_NAME = "name";
   private static final String TAG_IMAGES = "images";
   private static final String TAG_THUMBNAIL = "thumbnail";

   // contacts JSONArray
    JSONArray posts = null;

    @Override
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new   ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        posts = json.getJSONArray(TAG_POSTS);

        // looping through All Contacts
        for(int i = 0; i < posts.length(); i++){
            JSONObject c = posts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String title = c.getString(TAG_TITLE);
            String date = c.getString(TAG_DATE);
            String content = c.getString(TAG_CONTENT);
            // to remove all <P> </p> and <br /> and replace with ""
             content = content.replace("<br />", "");
             content = content.replace("<p>", "");
             content = content.replace("</p>", "");

            // Author is agin  JSON Object
            JSONObject author = c.getJSONObject(TAG_AUTHOR);
            String name = author.getString(TAG_NAME);

            JSONObject images = c.getJSONObject(TAG_IMAGES);
            String thumbnail = images.getString(TAG_THUMBNAIL);
            // creating new HashMap
             HashMap<String, String> map = new HashMap<String,  String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_TITLE, title);
            map.put( TAG_DATE, date);
            map.put( TAG_NAME, name);
            map.put( TAG_CONTENT, content);
            // adding HashList to ArrayList
            contactList.add(map);
        }   
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_row,
            new String[] { TAG_TITLE, TAG_DATE, TAG_NAME, TAG_CONTENT }, new int[] {
                    R.id.name, R.id.email,R.id.mobile, R.id.content });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView)    view.findViewById(R.id.name)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.mobile)).getText().toString();
            String content = ((TextView)  view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),  SampleDesp.class);
            in.putExtra(TAG_TITLE, title);
            in.putExtra(TAG_DATE, date);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_CONTENT, content);
            startActivity(in);

        }
    });

} 
```

JSON数据格式

```
 { "status": "ok","count": 10,"count_total": 429,"pages": 43,"posts": [ {       "id": 2512,"title": "Sansui Eq Sound Processor 2 Mic option in a single unit.","content": "<p>Sansui Eq Sound Processor 2 Mic option in a single unit For sale .<br />\nFor more details contact<br />\n9886673699</p>\n", "date": "2012-12-24 09:39:53",
"author": {"name": "sales" }, "attachments": [{  "images": {"thumbnail": {
"url": "http://site/wp-content/uploads/2012/12/372967-50x37.jpg"
 } } }}],....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:35:58.903

要实现的代码`Load image`：

```
private Bitmap DownloadImage(String URL)
    {        
//      System.out.println("image inside="+URL);
        Bitmap bitmap = null;
        InputStream in = null;        
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
//        System.out.println("image last");
        return bitmap;                
    }
    private InputStream OpenHttpConnection(String urlString)
            throws IOException
            {
                InputStream in = null;
                int response = -1;

                URL url = new URL(urlString);
                URLConnection conn = url.openConnection();

                if (!(conn instanceof HttpURLConnection))                    
                    throw new IOException("Not an HTTP connection");

                try{
                    HttpURLConnection httpConn = (HttpURLConnection) conn;
                    httpConn.setAllowUserInteraction(false);
                    httpConn.setInstanceFollowRedirects(true);
                    httpConn.setRequestMethod("GET");
                    httpConn.connect();

                    response = httpConn.getResponseCode();                
                    if (response == HttpURLConnection.HTTP_OK) 
                    {
                        in = httpConn.getInputStream();                                
                    }                    
                }
                catch (Exception ex)
                {
                    throw new IOException("Error connecting");            
                }
                return in;    
    } 
```

# asp.net-mvc - 如何修复 System.Net.Sockets.SocketException

> ID：14021157
> 
> 赞同：6
> 
> 时间：2012-12-24T12:02:58.990
> 
> 标签：asp.net-mvc, windows-server-2008

我在一个 ASP.NET MVC 网站上工作，它已经安装在三个不同的服务器上（相同的代码版本），它在两个服务器上工作，即用户可以登录，但在用户提交他们的服务器后在一个服务器上用户名和密码，浏览器中显示以下服务器错误：

```
Security Exception

System.Security.SecurityException: Token not found 
```

发生错误的环境的事件查看器在用户尝试登录时显示以下两条错误消息：

```
Could not init pool.
System.Net.Sockets.SocketException (0x80004005): 
A connection attempt failed because the connected party did not properly
respond after a period of time, or established connection failed because 
connected host has failed to respond (server ip address) 
```

而这个错误：

```
Error: System.Security.SecurityException: Token not found 
```

这是浏览器中显示的服务器错误。过去已通过删除身份验证 cookie 解决了此问题，但这不适用于此错误。

我尝试将 web.config 中的信任级别设置为 full，但没有成功。我已经尝试重新启动 IIS。

有没有其他人遇到过类似的问题？这个问题可能是因为某种服务没有运行而引起的吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T17:05:28.790

大多数情况下，这些是由于尝试通信的两台服务器/计算机之间的不同 IP 协议 (IPV4/IPV6) 或在其中一台计算机上设置用于传出或传入连接的额外身份验证规则而导致的连接超时。解决问题的方法：

1.  查看 IIS 日志
2.  查看事件日志
3.  尝试调整注册表中的 TCP/IP 参数以增加允许连接的时间

[http://msdn.microsoft.com/en-us/library/aa560610(d=printer,v=bts.20).aspx](http://msdn.microsoft.com/en-us/library/aa560610(d=printer,v=bts.20).aspx)

尽管上面的文章引用了 Windows 2003，但我发现它适用于某些 2008 环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T12:40:36.007

我得到 0x80004005 & The requested name is valid，但没有找到所请求类型的数据。[我的完整错误](http://www.asptricks.net/2016/02/solved-cannot-connect.html)

检查您的机器上是否有正确的互联网连接。并且您是否能够ping 远程服务器。我通过检查两者来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T21:46:45.163

当托管在我们的服务器（Azure）上的第三方 API 之一无法与另一台机器（iNetU）上的我们的一个 Web 服务通信时，我们收到此错误。选项是打开端口以便这些机器可以交谈或将 Web 服务移动到托管第三方 API 的机器上。

# objective-c - 以编程方式获取 iPhone 上的已用空间和可用空间

> ID：14021158
> 
> 赞同：0
> 
> 时间：2012-12-24T12:03:02.330
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何检测 iPhone/iPad 设备上的总可用/可用磁盘空间？](https://stackoverflow.com/questions/5712527/how-to-detect-total-available-free-disk-space-on-the-iphone-ipad-device)

我想在 iOS 应用程序中获取 iOS 设备的以下详细信息。我在谷歌上搜索过，但我没有得到任何关于这些的想法：

1.  格式化空间
2.  已用空间
3.  可用空间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:06:58.980

对 statfs 进行 C 系统调用。

请参阅：[https ://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/statfs.2.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/statfs.2.html)

这个答案是： [在下载文件之前检查 iphone 设备上的足够空间](https://stackoverflow.com/questions/5310445/check-enough-space-on-iphone-device-before-downloading-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:07:36.343

对于总空间和可用空间，此方法将返回 freeSpace

```
- (uint64_t)freeDiskspace{
    uint64_t totalSpace = 0;
    uint64_t totalFreeSpace = 0;

    __autoreleasing NSError *error = nil;  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
    NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

   if (dictionary) {  
       NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
       NSNumber *freeFileSystemSizeInBytes = [dictionary objectForKey:NSFileSystemFreeSize];
      totalSpace = [fileSystemSizeInBytes unsignedLongLongValue];
      totalFreeSpace = [freeFileSystemSizeInBytes unsignedLongLongValue];
      NSLog(@"Memory Capacity of %llu MiB with %llu MiB Free memory available.", ((totalSpace/1024ll)/1024ll), ((totalFreeSpace/1024ll)/1024ll));
   }
   else {  
      NSLog(@"Error Obtaining System Memory Info: Domain = %@, Code = %d", [error domain], [error code]);  
   }  

   return totalFreeSpace;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:07:15.440

您可以使用[uidevice-extension](https://github.com/erica/uidevice-extension)获得这些 您需要的是以下功能：

```
- (NSNumber *) totalDiskSpace;
- (NSNumber *) freeDiskSpace; 
```

来自 UIDevice-Hardware.h

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T12:09:22.210

你也可以使用 NSFileManager 和方法

```
- (NSDictionary *)attributesOfFileSystemForPath:(NSString *)path error:(NSError **)error 
```

在您要发送数据的路径上。此方法使用 statfs （在其他答案中提到）。

# jakarta-ee - 正确编译后，Maven项目不执行

> ID：14021159
> 
> 赞同：1
> 
> 时间：2012-12-24T12:03:07.147
> 
> 标签：jakarta-ee, maven, jpa

我正在按照“使用 Glassfish_3 开始 Java_EE_6”一书的教程来创建实体。我一一按照步骤并检查谷歌，但在执行时我仍然有错误。

所以，实体类是：

```
package com.apress.javaee6.chapter02;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.NamedQuery;

@Entity
@NamedQuery(name = "findAllBooks", query = "SELECT b FROM Book b")
public class Book {

    @Id
    @GeneratedValue
    private Long id;
    @Column(nullable = false)
    private String title;
    private Float price;
    @Column(length = 2000)
    private String description;
    private String isbn;
    private Integer nbOfPage;
    private Boolean illustrations;

   //Here I put the constructor and getters and setters
   } 
```

持久性单位是：

```
<?xml version="1.0" encoding="UTF-8"?>

<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

<persistence-unit name="chapter02PU" transaction-type="RESOURCE_LOCAL">

<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>

<class>com.apress.javaee6.chapter02.Book</class>

<properties>
    <property name="eclipselink.target-database" value="DERBY"/>
    <property name="eclipselink.ddl-generation" value="create-tables"/>
    <property name="eclipselink.logging.level" value="INFO"/>
    <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
    <property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/chapter02DB;create=true"/>
    <property name="javax.persistence.jdbc.user" value="APP"/>
    <property name="javax.persistence.jdbc.password" value="APP"/>
</properties>   
</persistence-unit>

</persistence> 
```

操纵实体的主类是：

```
package com.apress.javaee6.chapter02;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

    public class Main {
        public static void main(String[] args) {
        // Creates an instance of book
        Book book = new Book();
        book.setTitle("The Hitchhiker's Guide to the Galaxy");
        book.setPrice(12.5F);
        book.setDescription("Science fiction comedy book");
        book.setIsbn("1-84023-742-2");
        book.setNbOfPage(354);
        book.setIllustrations(false);

        // Gets an entity manager and a transaction
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("chapter02PU");
        EntityManager em = emf.createEntityManager();

        // Persists the book to the database
        EntityTransaction tx = em.getTransaction();
        tx.begin();
        em.persist(book);
        tx.commit();
        em.close();
        emf.close();
            }
} 
```

maven项目的POM文件是：

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.apress.javaee6</groupId>
 <artifactId>chapter02</artifactId>
 <version>2.0</version>

<name>chapter02</name>
<properties>
    <project.build.sourceEncoding>UTF-8 </project.build.sourceEncoding>
    <eclipselink.version>2.4.0</eclipselink.version>
  </properties>
<repositories>
        <repository>
            <id>EclipseLink</id>
            <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
        </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>javax.persistence</artifactId>
        <version>2.0.0</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>eclipselink</artifactId>
        <version>2.4.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.derby</groupId>
        <artifactId>derbyclient</artifactId>
        <version>10.8.1.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.derby</groupId>
        <artifactId>derby</artifactId>
        <version>10.8.1.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.0</version>
          <configuration>
              <source>1.6</source>
              <target>1.6</target>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>

</project> 
```

当我编译一切都是正确的，但执行 main ：

```
mvn exec:java -Dexec.mainClass="com.apress.javaee6.chapter02.Main" 
```

我得到这个例外：

```
Exception in thread "main" javax.persistence.PersistenceException: No Persistence provider for EntityManager named chapter02PU 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:25:22.917

代表着

```
org.eclipse.persistence.jpa.PersistenceProvider 
```

在您的运行时类路径中不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T01:56:13.150

我们需要将`classpathScope`参数值、[默认值`runtime`](http://www.mojohaus.org/exec-maven-plugin/java-mojo.html#classpathScope)更改为`compile`.

```
mvn exec:java -Dexec.mainClass=com.apress.javaee6.chapter02.Main -Dexec.classpathScope=compile 
```

# c# - 使用 Microsoft Moles 模拟抛出异常

> ID：14021160
> 
> 赞同：0
> 
> 时间：2012-12-24T12:03:18.313
> 
> 标签：c#, unit-testing, exception-handling, mocking, moles

> **可能重复：**
> [如何抛出 SqlException（需要模拟）](https://stackoverflow.com/questions/1386962/how-to-throw-a-sqlexceptionneed-for-mocking)

我想模拟`SqlException`什么时候`ExecuteNonQuery`执行的抛出；

```
System.Data.SqlClient.Moles.MSqlCommand.AllInstances.ExecuteNonQuery =
            (command) =>
                {
                    throw new MSqlException();
                }; 
```

这不起作用，因为编译器抱怨`MSqlException`不是从`Exception`. 我是否以错误的方式进行此操作，是否需要包含`ExecuteNonQuery`在我的代码中才能实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:07:37.417

如果您要抛出 a`SqlException`我希望这会起作用。它继承自`DbException`，继承自`ExternalException`，继承自`ExternalException`。

如果您编写自定义异常（我假设`MSqlException`是一个），您仍然应该从异常类继承...

```
public class MSqlException: SqlException { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:22:13.570

在另一个问题中找到了答案。痣需要铸造。

stackoverflow.com/a/3795751/771698

# php - 来自其他页面的值 $_POST 无法通过 isset 表单

> ID：14021162
> 
> 赞同：0
> 
> 时间：2012-12-24T12:03:49.623
> 
> 标签：php

我在将值`$result`从不同页面传递到另一个页面时遇到问题。

当我`POST`进入`$result`这个页面的时候。它工作正常，我回应它。

但是如果我尝试将其传递`$result`给`isset()`表单并将其发回给自己。
该值将成为未定义的索引。

第 1 页

```
<?PHP
$connect=mysql_connect('localhost', 'root', '');
$db=mysql_select_db('survey', $connect);
$SQL="SELECT * FROM question";
$data=mysql_query($SQL);
$num=mysql_num_rows($data);

$start=0;
?>

<style type="text/css">
#survey{
    width:100%; height:50px;
    background:#e6e6e6; border-bottom:solid 1px white;
    }

#survey form{
    position:relative;
    left:320px; top:15px;
    float:left;
    }

#survey form a{
    text-decoration:none;
    color:black;
    }

.submit{
background-color: transparent;
border: none;
cursor: pointer;
}

</style>

<html>
<div id="container">

<?PHP
if($num<3){
    echo "
    <div id='create'><a href='question.php'>+ Create a Survey</a></div>
    ";
}
?>

<?PHP 
while($start<$num){
    $result=mysql_result($data, $start, 'ID');
    $list_num=$start+1;

        $ID=$result['ID'];

        $list="
            <div id='survey'>
                <span style='font-size:24px; color:gray; position:relative; float:left; left:10px; top:13px;'>
                SURVEY 0$list_num
                </span>

                <form action='survey.php' method='POST'>
                    <input class='submit' type='submit' name='submit1' value='View' />
                    <input type='hidden' name='result' value='$ID'/>
                </form>

                <form action='update.php' method='POST'>
                    <input class='submit' type='submit' name='submit2' value='Edit' />
                    <input type='hidden' name='result' value='$ID'/>
                </form>             

                <form action='delete.php' method='POST'>
                    <input class='submit' type='submit' name='submit3' value='&#10005 Delete' />
                    <input type='hidden' name='result' value='$ID'/>
                </form>

            </div>  
        ";

    echo $list;
    $start++;
    }
?>

</div>
</html> 
```

第2页

```
 <?PHP
    $result=$_POST['result'];

    $error="";
    if(isset($_POST['submit'])){
        $question=$_POST['question'];
        $answer_a=$_POST['a'];
        $answer_b=$_POST['b'];
        $answer_c=$_POST['c'];

        if($question && $answer_a && $answer_b && $answer_c){
            $connect=mysql_connect("localhost", "root", "");
            $db=mysql_select_db("survey", $connect) or die("");

            $SQL="UPDATE question SET question='$question', answer_a='$answer_a', answer_b='$answer_b', answer_c='$answer_c'
            WHERE ID='$result'";
            mysql_query($SQL);
            $SQL="UPDATE answer SET question='$question', answer_a='0', answer_b='0', answer_c='0'
            WHERE ID='$result' ";
            mysql_query($SQL);
            header("location:create.php");
        }
        else{$error="<div style='color:white; background:gray; width:200px; height:20px; text-align:center; line-height:20px;'>" 
        . "Please fill all the field." . "</div>";}
    }

    ?>
<style>
body{
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    }

</style>

<html>
<form action="update.php" method="POST">
Question<br /><input type="text" name="question" placeholder=" Enter your question here" maxlength="50" /><br/><br/>Answer<br/>
a<input type="text" name="a" placeholder=" Answer a" maxlength="50"/>
b<input type="text" name="b" placeholder=" Answer b" maxlength="50"/>
c<input type="text" name="c" placeholder=" Answer c" maxlength="50"/>
<input type="submit" name="submit" value="SAVE"/>
</form>
<?PHP echo $error; ?>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:15:24.400

尝试在第 2 页上编辑这个

```
<html>
<form action="update.php" method="POST"> 
```

对此

```
<html>
<form action="" method="POST"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T23:51:11.920

大家好，非常感谢您的帮助我找到了解决方案我认为问题是当我将值传递给 2nd form 时，我需要再次重新发送值。这就是我所做的。第一个来自上一页，第二个是表单发布到自身 if(isset($_POST['result'])){ $result=$_POST['result']; 回显$结果；}

```
if(isset($_POST['data'])){
    $ID=$_POST['data'];
    echo $ID;
    } 
```

添加另一个隐藏在表单中并重新发送值

```
<input type="hidden" name="data" value="<?PHP echo $result;?>"/> 
```

更改mysql值

```
WHERE... ID='$ID'"; 
```

# math - 数学符号：x ◁ y

> ID：14021164
> 
> 赞同：-1
> 
> 时间：2012-12-24T12:04:05.130
> 
> 标签：math, computer-science

我用谷歌搜索了◁的含义，但无济于事。

谁能给我解释一下 x ◁ y 是什么意思？例如：

z ⊢ x ◁ y

这是否意味着我们可以从 z 推导出 x 和 y 之间的一致性？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:06:12.723

我查看了 Wikipedia [List of Mathematical Symbols](http://en.wikipedia.org/wiki/List_of_mathematical_symbols)，似乎这个符号定义了一个[normal subgroup](http://en.wikipedia.org/wiki/Normal_subgroup)。

# xcode - gmp-chudnovsky.c 和 xcode 4.5

> ID：14021165
> 
> 赞同：0
> 
> 时间：2012-12-24T12:04:11.120
> 
> 标签：xcode, gmp

当我尝试使用 xcode 编译和运行[此处](http://gmplib.org/pi-with-gmp.html)找到的 gmp-chudnovsky.c 文件时，出现以下错误：

```
Undefined symbols for architecture x86_64:
  "_fac_clear", referenced from:
      _main in main.o
  "_fac_compact", referenced from:
      _fac_remove_gcd in main.o
  "_fac_init", referenced from:
      _main in main.o
  "_fac_mul", referenced from:
      _bs in main.o
  "_fac_mul_bp", referenced from:
      _bs in main.o
  "_fac_resize", referenced from:
      _fac_remove_gcd in main.o
  "_fac_set_bp", referenced from:
      _bs in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我知道[gmp 库](http://gmplib.org/)安装正确，因为我有另一个链接到它的 xcode 项目正在正确编译。关于为什么会发生这种情况的任何想法？

忘了说我已经为 GMP 添加了头文件和库的路径，并在 Other Linker Flags 下添加了 -lgmp 标志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:10:46.653

已解决：请参阅[此答案](https://stackoverflow.com/questions/3514413/objective-c-inline-function-symbol-not-found)。

我认为 xcode 首先在 Debug 配置中运行，其中不执行优化，也不执行内联。这意味着任何`inline`功能也必须完成`static`。

# datatable - vb.net 中的字符串生成器附加格式

> ID：14021170
> 
> 赞同：0
> 
> 时间：2012-12-24T12:04:29.560
> 
> 标签：datatable, stringbuilder

让字符串生成器从数据表中接收到值。datatable 包含名为 ename 的列，并包含如下值

```
abc
abc
abc

in stringbuilder stored this value in the following format abcabcabc.

code

 Do While (i < dt.Rows.Count)

        sb.Append(dt.Rows(i)("ename").ToString)
                   i = (i + 1)
   Loop

Expected output abc,abc,abc .how to do this? 
```

# python - CherryPy：如何启动单线程服务器？

> ID：14021176
> 
> 赞同：4
> 
> 时间：2012-12-24T12:05:13.380
> 
> 标签：python, multithreading, cherrypy

我在 webfacional 上运行cherrypy。我有一个严重的内存泄漏问题，我想找出它的原因。如何在单个线程/进程上运行cherrypy？

上下文：访问分配大量数据的页面会增加 python 进程的内存使用量。内存使用量永远不会再下降。我怀疑cherrypy使用多个执行线程的事实是问题所在，但我无法禁用该功能以隔离我的问题。

我的 site.py 文件的相关部分现在：

```
cherrypy.config.update({
    'environment': 'production',
    'log.screen': False,
    'log.error_file':'cperror.log',
    'server.socket_host': '127.0.0.1',
    'server.socket_port': 31266,
})

cherrypy.quickstart(Root()) 
```

我在谷歌上搜索了很多解决我的问题的方法，但我一无所获。我还浏览了 CherryPy 官方文档，但无济于事。

我正在使用cherrypy 3.2和python 2.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T12:20:39.407

你可以在你的配置文件中试试这个：

```
[global]
server.thread_pool = 1 
```

# html - 旋转和移动球图像 Html 5

> ID：14021177
> 
> 赞同：1
> 
> 时间：2012-12-24T12:05:35.533
> 
> 标签：html, css, animation

现在图像将被移动但不会旋转。我正在实现移动功能。但只支持IE10。

这是我的剧本，

```
var ball = new Image;
window.onload = function () {
var c = document.getElementsByTagName('canvas')[0];
var w = c.width = 800;
var h = c.height = 600;
var ctx = c.getContext('2d');
var dx = -1, dy = 0;
var x = 400, y = 200, a = 0;
var deg2rad = Math.PI / 180;
var da = 10 * deg2rad;
var bw = ball.width;
var bh = ball.height;
setInterval(function () {
    ctx.clearRect(0, 0, w, h);
    ctx.translate(x, y);
    ctx.rotate(a);
    ctx.drawImage(ball, -bw, -bh);
    ctx.rotate(-a);
    ctx.translate(-x, -y);
    x += dx;
    y += dy;
    if ((x - bw < 0) || (x + bw > w)) {
        dx *= -1; da *= -1;
    }
    if ((y - bh < 0) || (y + bh > h)) {
        dy *= -1; da *= -1;
    }
}, 30);
}
ball.src = 'images/beachball.png'; 
```

而且，这是我的 Html 设计，

```
<canvas id="canvas" width="300" height="300"></canvas> 
```

任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:20:21.617

您忘记增加旋转变​​量：

```
x += dx;
y += dy; 
```

还应该有：

```
a += da; 
```

请注意，尽管以您正在做的方式旋转它不会围绕图像的中心旋转；它会在拐角处旋转。您将需要通过更改行来调整位置：

```
ctx.drawImage(ball, -bw, -bh); 
```

至

```
ctx.drawImage(ball, -bw/2, -bh/2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:21:49.210

检查您的轮换方法...这是我之前回答的相同问题的链接，

[HTML5画布图像向左旋转向右旋转](https://stackoverflow.com/questions/12912818/html5-canvas-image-rotate-left-rotate-right/12913818#12913818)

# telerik - 将图像绑定到 RadMosaicTile

> ID：14021180
> 
> 赞同：0
> 
> 时间：2012-12-24T12:06:07.910
> 
> 标签：telerik, windows-store-apps

我在我的 Windows 商店应用程序中使用 RadMosaicTile。我想用它绑定图像。我试过这个

```
RadMosaicHubTile tile = new RadMosaicHubTile();
tile.ImageSources.Add("Image1.jpg");
tile.ImageSources.Add("Image2.jpg"); 
```

但它不工作。图像未绑定。谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:21:08.297

[在Telerik 论坛](http://www.telerik.com/community/forums/windows-phone/hubtile/binding-radmosaichubtile-imagesources.aspx)上有这个代码示例- 这对你有用吗？

```
Collection<object> imageSources = new Collection<object>();
ImageSource image = GetImageFromWeb();
imageSources.Add(image);

RadMosaicHubTile hubTile = new RadMosaicHubTile();
hubTile.CreateImageSource = (source) =>
{
    return (ImageSource)source;
};
hubTile.ImageSources = imageSources; 
```

# charts - 拉斐尔饼图颜色

> ID：14021183
> 
> 赞同：2
> 
> 时间：2012-12-24T12:06:17.310
> 
> 标签：charts, raphael, pie-chart

有没有办法在拉斐尔的饼图中添加颜色前缀？我需要能够展示例如黄色的金色和灰色的铂金。我目前遇到的问题是，如果铂金具有更高的价值，例如 60% 和黄金 40%，则铂金显示为黄色。

```
var r = Raphael("pieChartHolder");
var pie = r.piechart(155, 100, 50, [30, 60, 5, 5], {
    colors: ['#FFDE7B', '#CFD0C6', '#E0DED9', '#93948C'],
    legend: ['%%gold', '%%silver', '%%palladium', '%%platinum'],
    legendpos: 'west'
});

pie.hover(function() {
    this.sector.stop();
    this.sector.scale(1.1, 1.1, this.cx, this.cy);

    if (this.label) {
        this.label[0].stop();
        this.label[0].attr({
            r: 7.5
        });
        this.label[1].attr({
            "font-weight": 800
        });
    }
}, function() {
    this.sector.animate({
        transform: 's1 1 ' + this.cx + ' ' + this.cy
    }, 500, "bounce");

    if (this.label) {
        this.label[0].animate({
            r: 5
        }, 500, "bounce");
        this.label[1].attr({
            "font-weight": 400
        });
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-08T10:24:57.177

只需添加`matchColors : true`

opts.matchColors 强制它将颜色数组的顺序与值数组的顺序相匹配。我在这里看到了：

[https://stackoverflow.com/a/14349559](https://stackoverflow.com/a/14349559)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T20:48:21.580

为什么要为颜色添加前缀？如果图书馆忽略项目的顺序并自行排序，那么您应该传递已经排序的项目。

我包含了[underscore.js](http://underscorejs.org)库并按降序对您的项目进行了排序。

```
<script type="text/javascript" src="http://underscorejs.org/underscore-min.js"></script>
<script type="text/javascript" src="raphael-min.js"></script>
<script type="text/javascript" src="g.raphael-min.js"></script>
<script type="text/javascript" src="g.pie-min.js"></script>
<script type="text/javascript">
function drawChart() {
    var r = Raphael("pieChartHolder");

    var items = [
        { value: 30, color: '#FFDE7B', title: '%%gold' },
        { value: 60, color: '#CFD0C6', title: '%%silver' },
        { value: 5, color: '#E0DED9', title: '%%palladium' },
        { value: 5, color: '#93948C', title: '%%platinum' }
    ];

    items = _.sortBy(items, function(item){ return -item.value; }); // sort by descending

    var pie = r.piechart(155, 100, 50, _.pluck(items, "value"), {
        colors: _.pluck(items, "color"),
        legend: _.pluck(items, "title"),
        legendpos: 'west'
    });

    pie.hover(function() {
        this.sector.stop();
        this.sector.scale(1.1, 1.1, this.cx, this.cy);

        if (this.label) {
            this.label[0].stop();
            this.label[0].attr({
                r: 7.5
            });
            this.label[1].attr({
                "font-weight": 800
            });
        }
    }, function() {
        this.sector.animate({
            transform: 's1 1 ' + this.cx + ' ' + this.cy
        }, 500, "bounce");

        if (this.label) {
            this.label[0].animate({
                r: 5
            }, 500, "bounce");
            this.label[1].attr({
                "font-weight": 400
            });
        }
    });
}

window.onload = drawChart;
</script>
<div id="pieChartHolder"></div> 
```

# vim - 如何更改 VIM 切换窗口的默认键盘快捷键？

> ID：14021184
> 
> 赞同：0
> 
> 时间：2012-12-24T12:06:17.480
> 
> 标签：vim

在 vim 中， switch-window-key `<C-w><C-w>`（按 2 次）对我来说不舒服，所以我想将其更改为`<C-Tab>`. 我做什么：添加`map <C-w><C-w> <C-Tab>`到配置文件`~/.vimrc`，但它不起作用，好像使用了快捷方式一样`<C-Tab>`。我也不确定`<C-w><C-w>`切换窗口命令是否正确。那么我怎样才能让它工作`<C-Tab>`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:39:54.167

首先，您的映射顺序错误，您应该这样做：

```
<map command> <desired shortcut> <action> 
```

所以，你应该这样写你的映射：

```
map <C-Tab> <C-w><C-w> 
```

并且最肯定使用`nnoremap`而不是`map`.

但是`<C-Tab>`这是一个不可靠的捷径，在许多情况下都不起作用，所以你应该避免它。我建议您使用`<leader>`( `:help mapleader`) 或其他一些更受支持的快捷方式。

请注意，这`<C-w><C-w>`还不错：您只需按下`Ctrl`并点击`ww`。这没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T18:43:36.943

最好以这种方式映射它，这样您就可以更灵活地在窗口之间切换：

```
map <c-j> <c-w>j "move up                                                      
map <c-k> <c-w>k "down                                                                 
map <c-l> <c-w>l "right                                                                  
map <c-h> <c-w>h "left 
```

# php - 使用 Zend Router 时，其他链接（未定义为路由的链接）损坏

> ID：14021185
> 
> 赞同：1
> 
> 时间：2012-12-24T12:06:31.780
> 
> 标签：php, zend-framework, url-routing, zend-route, zend-router

我正在使用 Zend Framework 1.12。

我想添加一些路由器。我的系统中有用户和管理员，我添加了一个路由器供管理员查看用户页面。

我添加了

```
// meant to create the usage "xxx.com/userview/someusername"
    $route = new Zend_Controller_Router_Route(
            'userview/:username',
            array('controller' => 'user',
                'action' => 'viewone',
                'username' => 'someusernamedefault')
            );
    $router = $frontController->getRouter();
    $router->addRoute('userview', $route); 
```

到我的 Bootstrap.php 文件。我的侧边栏中有一些链接，其中包含指向（另一个控制器的）操作的链接。我在 .phtml 文件中添加了他们的链接作为

```
echo $this->url(array('controller'=>'somecontroller', 'action'=>'someaction' ), null, true); 
```

此侧边栏包含许多来自多个控制器的链接。

在我添加路线之前，这些工作正常。在我向 Bootstrap 添加新路由（并向从 rooter 指向的控制器（用户）添加新操作（viewall）后，效果很好（我可以用作“xxx.com/userview/someusername”）。但我的其他链接在侧边栏全部变成“xxx.com/userview”。他们都失去了控制器和动作的价值......

我究竟做错了什么？？我应该更好地定义我的 url，还是更好地定义我的路由器？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:16:08.767

URL 助手的第二个参数应该是您要使用的路由的名称。通过传递 null 您告诉它使用当前路由，这就是链接出错的原因。将侧边栏链接调用更改为：

```
$this->url(array('controller'=>'somecontroller', 'action'=>'someaction'), 'default'); 
```

然后它应该可以正常工作。

# objective-c - 以编程方式在 self.view 中捕获动画 CAShapeLayer

> ID：14021187
> 
> 赞同：1
> 
> 时间：2012-12-24T12:06:46.920
> 
> 标签：objective-c, ios, cabasicanimation, cashapelayer

希望你会很好。

我的视野中有一个圆圈。我在上面应用了动画。所以它以逆时针方向动画。现在，当我使用以下几行捕获视图图像时

```
UIGraphicsBeginImageContext(self.view.frame.size);
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

它显示的是原始图层而不是动画部分，简单来说它不捕获动画。

我还有更多的词来描述我的问题，即我还有半圈（动画后），在捕获图像后它将是完整的圈而不是半圈。

我想我不是很清楚，但我尽力做到了。如果您对我的问题有任何疑问，请询问我。

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:06:55.747

我在互联网上搜索了大约 2 个小时，最后我找到了解决问题的方法。再次解释场景。我有一个逆时针动画的圆圈，在按钮上，我必须拍摄屏幕图像，发生的问题是当我按下按钮时它显示完整的圆圈，（但实际上它应该显示一半或圆的剩余部分）。

所以我找到了一个非常简单的解决方案，只需替换这些行

```
 UIGraphicsBeginImageContext(self.view.frame.size);
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

用这些

```
CGImageRef screen = UIGetScreenImage();
UIImage *shareImage = [UIImage imageWithCGImage:screen];
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

# android - 如何在我的 android gridview 中显示来自互联网的图像图像并显示完整图像？

> ID：14021200
> 
> 赞同：2
> 
> 时间：2012-12-24T12:07:51.130
> 
> 标签：android, image, gridview, swipe

如何在android应用程序中显示从互联网到gridview的图像。在gridview中显示clicl om任何图像后，它会在从左向右和向右tp left滑动后显示全屏图像。我已经实现了一些代码，有一个错误。显示填充图像后如何滑动这些图像。

**图像适配器**

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

// Keep all Images in array
public Integer[] mThumbIds = {
        R.drawable.img_2, R.drawable.img_3,
        R.drawable.img_4
};

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
     return mThumbIds[position];
}

@Override
public long getItemId(int position) {

    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  
     imageView = new ImageView(mContext);
    //imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
    } else {
        imageView = (ImageView) convertView;
    }
    imageView.setImageResource(mThumbIds[position]);
    return imageView;
}
} 
```

全图：

```
public class FullImageActivity extends Activity {

 private static final String LOGID = "CHECKTHISOUT";

private static final int SWIPE_MIN_DISTANCE = 160;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_image);

     // get intent data
    Intent i = getIntent();

    // Selected image id
    int position = i.getExtras().getInt("id");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageResource(imageAdapter.mThumbIds[position]);

    gestureDetector = new GestureDetector(new MyGestureDetector());
}
private class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            // right to left swipe
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                next();
            } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                previous();
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }
    public void next()
    {

    }
    public void previous()
    {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:31:18.020

您可以在 gridview 中显示图像，然后您可以使用 viewpager 通过滑动显示全屏图像。我建议您重复使用图像，而不是每次都从 Internet 下载它们。您可以利用[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)等可用库，它会为您处理缓存机制.

# .htaccess - 如何在 Windows 服务器上的 html 文件中运行 php 代码？

> ID：14021203
> 
> 赞同：0
> 
> 时间：2012-12-24T12:08:11.503
> 
> 标签：.htaccess

我已经使用 .htaccess 文件和下面的代码
AddType application/x-httpd-php .html .htm

它在本地工作正常，但是当我将文件上传到服务器上时，它不能正常工作。我的所有页面都有 html 扩展名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:11:41.280

您需要为`html`扩展添加到 PHP exe 的映射。

IIS 有一个扩展列表，并且基于文件扩展名将基于此列表选择服务器端处理器。

如果您在 IIS 中右键单击“网站”并选择“属性”，您可以更改您的 ISAPI 扩展。

找到 htm 和 html 扩展名并将可执行文件更改为与 .php 相同

# c# - MVC3 razor 中的 CheckboxList 事件

> ID：14021204
> 
> 赞同：0
> 
> 时间：2012-12-24T12:08:28.853
> 
> 标签：c#, asp.net-mvc-3

我正在为 MVC3 剃须刀中的通信类型创建一个复选框列表我的问题是当我单击复选框时只有它正在选择但我想单击文本也将被选中

我的控制器代码：

```
 IEnumerable<M_TblCommunicationType> communicationlList = (from x in db.M_TblCommunicationType select x).ToList();
   ViewBag.communication = communicationlList.Select(c => new SelectListItem
   {
      Text = c.Communication.ToString(),
      Value = c.Communication_Type.ToString()
   }); 
```

我的查看代码：

```
@Html.LabelFor(model => model.Communication_Type)<span class="mandatory">
                * </span></li>
            <li class="input">
                <div class="other">
                    @{IEnumerable<SelectListItem> comminicationType = ViewBag.communication;
                      foreach (var item in comminicationType)
                      { 
                        <input type="checkbox" name="Communication_Typeids" value="@item.Value" id='communicationtype'/>
                        <label for="@item.Value">@item.Text</label>
  @Html.ValidationMessageFor(model => model.Communication_Type) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:14:49.060

`for`标签的属性应该与`id`要绑定的元素的属性一起使用

尝试这个 ：

```
<label for="communicationtype">@item.Text</label> 
```

希望这可以帮助。

# java - java/spring-在 org.springframework.context.support.AbstractApplicationContext 获取 NoClassDefFoundError

> ID：14021208
> 
> 赞同：1
> 
> 时间：2012-12-24T12:09:09.513
> 
> 标签：java, spring, rmi

我正在尝试初始化一个使用 Spring 的 RMI 客户端。

现在，应用程序的 RMI 上下文存储在 file= rmiClientAppContext.xml

使用上述文件的相关代码如下——

```
 //RMI Client Application Context is started...
     ApplicationContext context = new ClassPathXmlApplicationContext("rmiClientAppContext.xml"); 
```

但是，当我尝试运行该程序时，这是我得到的错误 -

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
at org.springframework.context.support.AbstractApplicationContext.<init>(AbstractApplicationContext.java:164)
at org.springframework.context.support.AbstractRefreshableApplicationContext.<init>(AbstractRefreshableApplicationContext.java:90)
at org.springframework.context.support.AbstractRefreshableConfigApplicationContext.<init>(AbstractRefreshableConfigApplicationContext.java:59)
at org.springframework.context.support.AbstractXmlApplicationContext.<init>(AbstractXmlApplicationContext.java:61)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:136)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83) 
```

在进一步调查上述第一行错误消息时，我发现

```
"164 is not a valid line number in org.springframework.context.support.AbstractApplicationContext" 
```

我在这里做错了什么？我正在使用 Spring v3.1.3 如何解决上述错误？另外，我必须为 RMI 客户端包含哪些 JAR？是否有任何特定的顺序应该将这些 JAR 添加到 Eclipse 中的 Java 构建路径中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:55:09.513

在这种特殊情况下，您应该在客户端类路径中包含 commons-logging-1.1.1.jar。Spring-Core 依赖于它。

一般来说，我建议您使用[Maven](http://maven.apache.org/)或类似工具来管理您的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T21:24:20.420

听起来您缺少非常重要的 spring-web jar 文件。将此添加到您的 pom 文件以解决此问题。

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.2.6.RELEASE</version>
    </dependency> 
```

# java - 两个版本的代码中类对象的语法高亮不同

> ID：14021214
> 
> 赞同：1
> 
> 时间：2012-12-24T12:09:33.530
> 
> 标签：java, eclipse, object

继上一个[问题](https://stackoverflow.com/questions/14020824/nullpointerexception-with-connection-object-creating-sql-statement)之后，我发现代码中的罪魁祸首是这个对象

我在 Java 中的 Connection 类中有一个名为“conn”的对象。

在我的旧代码中，没有突出显示对象名称。正如你在下面看到的。

![在此处输入图像描述](../Images/532e584adb675a4867ec5b8149e490f9.png)

但是，在我在 Eclipse 上的较新版本的代码中，由于该对象始终为空，因此该对象一直被突出显示。

![在此处输入图像描述](../Images/05ca72cbd19f24aac5ffa16d69356daf.png)

我的**DatabaseLogic**类

```
 package org.ari;

//class dependencies
import java.io.IOException;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;

public class DatabaseLogic
{
    private static Connection conn;

    public static String openDatabase() throws IOException, SQLException,
            NamingException
    {

        // context class gives naming standards of the surrounding environment
        // of the servlet i.e. the web server ,
        // allowing the servlet to interface with the web servers resources
        Context initialContext = new InitialContext();
        Context envContext = (Context) initialContext.lookup("java:comp/env");
        // servlet looks up for a connection pool called "jdbc/POOL"
        DataSource ds = (DataSource) envContext.lookup("jdbc/POOL");
        // connection is then made/requests to connection pool

        String result = ds.toString();

        try
        {
            conn = ds.getConnection();
        }
        catch (SQLException e)
        {
            System.out.println( e.toString());          
        }

        return result;
    }

    public static void closeDatabase()
    {
        try
        {
            conn.close();
        }
        catch (SQLException e)
        {

        }
    }

    // queryId is the parameter to be used for querying for relevant records
    // - possibly change name to make it less specific e.g. recordid
    public static String getData(String queryId, int requestNumber)
            throws SQLException
    {
        String result = "";
        if (queryId != null)
        {
            try
            {

                if (conn == null)
                { 
                    //result = "We are in here";
                    result = openDatabase(); 
                }

                // prepare a statement for use in query

                Statement stmt = conn.createStatement();
                // query parameratised with queryId
                String qry = "SELECT RECORD_ID, USER_ID, OPERATION_CD, BUSCOMP_NAME, OPERATION_DT, FIELD_NAME, OLD_VAL, NEW_VAL, AUDIT_LOG, ROW_ID, BC_BASE_TBL FROM S_AUDIT_ITEM WHERE RECORD_ID='"
                        + queryId + "'";
                ResultSet results = stmt.executeQuery(qry);
                result = XMLBuilder.xmlBuilder(results, queryId,
                        requestNumber);
                // close the connection
                stmt.close();
                results.close();
            }
            catch (Exception e)
            {
                // log.error("Cannot connect to database :" + e);

            }
        }
        else
        {
            // not sure if ever reached
            result = "The query parameter  is a null value";
        }
        return result;
    }

} 
```

这个突出显示是什么意思，我猜 Eclipse 正在以不同的方式处理这个对象，这就是为什么这个对象不再正常运行的原因。

我该如何解决这个问题，有什么想法吗？我已尝试恢复旧版本的代码，但此突出显示仍然相同。

我猜这是IDE中某处的一些设置。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:36:16.070

因此，执行时会收到 NullPointerException

```
conn.createStatement(); 
```

这意味着它`conn`是空的。

在哪里`conn`初始化？就在之前，在调用`openDatabase()`.

如何`openDatabase()`初始化变量？

```
 try
    {
        conn = ds.getConnection();
    }
    catch (SQLException e)
    {
        System.out.println( e.toString());          
    } 
```

abobe 表示要么`ds.getConnection()`返回一个连接，并且`conn`不能为空（但它是），要么`conn`为空，因为`ds.getConnection()`抛出了一个 SQLException，但你继续好像什么也没发生，只是显示抛出的异常的 toString()。以上应改写为：

```
conn = ds.getConnection(); 
```

这样，您就不会忽略 SQLException。它将传播给调用者，并被识别为 SQLException，并带有明确的错误消息，指示代码中问题的来源，而不是稍后发生的晦涩的 NullPointerException，并且更难诊断。

让异常传播，或者至少将代码替换为：

```
try {
    conn = ds.getConnection();
}
catch (SQLException e) {
    throw new RuntimeException("Something really bad happened, and it makes no sense to continue further, so I'll throw a runtime exception wrapping the original cause", e);
} 
```

现在您只需要获取由 抛出的 SQLException 的堆栈跟踪`ds.getConnection()`，并了解它的错误消息的含义。

* * *

请注意，我怀疑该异常不是由 引发的`conn.createStatement()`，而是由您在以下内容中也忽略的其他一些异常引发的：

```
catch (Exception e)
{
    // log.error("Cannot connect to database :" + e);
} 
```

再一次，不要捕获异常。让它传播。通过抓住它，您很难自己注意到问题，并且无法诊断它。

如果您无法处理异常，请不要捕获它。

# html - 应用程序缓存

> ID：14021222
> 
> 赞同：0
> 
> 时间：2012-12-24T12:10:31.320
> 
> 标签：html, html5-appcache

我尝试执行 w3schools 中已经存在的以下一组编码

**index.html 具有以下编码**

```
<!DOCTYPE html>
     <html manifest="demo_html.appcache">
          <body>
             <script src="demo_time.js"></script>
                  <p id="timePara"><button onclick="getDateTime()">Get Date and Time</button></p>
                  <p><img src="logo.jpeg" width="336" height="69"></p>
                  <p>Try opening <a href="index.html" target="_blank">this page</a>, then go offline, and reload the page. The script and the image should still work.</p>
            </body>
      </html> 
```

**demo_time.js 包含以下内容**

```
 function getDateTime()
 {
       var d=new Date();
       document.getElementById('timePara').innerHTML=d;
 } 
```

**demo_html.appcache 包含以下内容**

```
 CACHE MANIFEST

 CACHE:
 /index.html
 /demo_time.js
 /logo.jpeg 
```

**“.htaccess”文件包含以下内容**

```
 AddType text/cache-manifest .appcache 
```

请指出此代码中的错误。当我在浏览器中执行代码时，firefox 提示我此网站要求将数据存储在您的计算机上以供离线使用。允许，永远不要为这个网站或现在不。我选择了允许，但即使在那时，提示也没有消失。

当我在 w3schools.com 中尝试相同操作时，单击“允许”后提示消失了。请指出上面代码中的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:13:56.203

离线缓存仅适用于远程文件。当您在本地运行页面时，它实际上不会使文件脱机。

如果您通过服务器访问您的页面，您应该会看到离线缓存正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:24:40.807

我将**demo_html.appcache**更改 为更简单的

```
CACHE MANIFEST
index.html
demo_time.js
logo.jpeg 
```

这在 Firefox 和 chrome 中都适用于我

Chrome 的“资源”选项卡对于调试 appcache 非常有帮助：

![chrome 资源选项卡的屏幕截图](../Images/e5548a7f6eafdc3d54e3cd473aac0af5.png)

# c# - 在桌面应用程序中检测 Windows 7 和 8 中的 3G 连接

> ID：14021224
> 
> 赞同：2
> 
> 时间：2012-12-24T12:10:35.313
> 
> 标签：c#, windows, network-programming, desktop-application, 3g

我正在开发云备份软件。该应用程序是使用 C# 开发的桌面应用程序。

如果计算机连接到 3G 网络，我需要添加一个选项来停止/暂停备份，以节省用户的成本。

我似乎无法找到任何关于如何实现这一点的示例，有一些适用于 Windows Phone 和 Windows Store 应用程序的示例，但我找不到任何可以检查连接类型是 WiFi/以太网还是 3G 的东西，后者是我的主要关注点。

我尝试了一个测试应用程序来枚举网络：

```
Console.WriteLine("checking network interfaces\n");

NetworkInterface[] interfaces =  NetworkInterface.GetAllNetworkInterfaces();

foreach (var networkInterface in interfaces)
{
   Console.WriteLine("Interface Detected");
   Console.WriteLine("Description: "+networkInterface.Description);
   Console.WriteLine("ID: " + networkInterface.Id);
   Console.WriteLine("Name: " + networkInterface.Name);
   Console.WriteLine("Interface Type: " + networkInterface.NetworkInterfaceType);
   Console.WriteLine("Operational Status: " + networkInterface.OperationalStatus.ToString());
   Console.WriteLine("Speed: " + networkInterface.Speed.ToString());
   Console.WriteLine("Supports Multicast: " + networkInterface.SupportsMulticast.ToString());
   Console.WriteLine("#########################################################\n");
} 
```

上面的代码将我的 3G 连接列为 PPP，可以是 ADSL 或 3G。我不确定是否可以使用其他一些选项或 API 进行区分

我需要一种清晰的方法来区分这些网络，但到目前为止我找不到这样做的方法。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:46:13.053

使用原生 WiFi 函数获取 WiFi 接口（WlanEnumInterfaces），使用 Mobile Broadband API 获取 3G 接口（IMbnInterfaceManager.GetInterfaces）。较新的 3G 调制解调器应支持移动宽带 API。

# android - 用于播放 .ts 文件的 Android NDK 示例代码不起作用

> ID：14021227
> 
> 赞同：0
> 
> 时间：2012-12-24T12:10:38.113
> 
> 标签：android, android-ndk, multimedia

嗨，我正在使用最新的 Android NDK 修订版 r8d。我正在尝试运行 Android NDK 示例中给出的示例代码，即本机媒体。示例代码工作正常并且可以完美播放 .flv 文件，但是当我尝试播放 .ts 格式文件时，示例应用程序无法播放。

正如他们所说（在 README.txt 中），示例应用程序可以播放 .ts 文件，并且他们还提供了一个示例 .ts 文件。

但是示例应用程序也无法播放该文件。

基本上我想在我的应用程序中播放 .ts 文件，到目前为止我还没有找到任何工作方式。

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:31:22.927

实际上问题出在 ts 文件上。有些 ts 文件运行良好，有些则没有。在项目 native-media 中，给定的示例 ts 文件 NativeMedia.ts 在我的情况下不起作用。但代码有效。

# android - Android：如何为每个项目调用 ActionBar.OnNavigationListener？

> ID：14021233
> 
> 赞同：1
> 
> 时间：2012-12-24T12:11:16.193
> 
> 标签：android, android-actionbar, actionbarsherlock

在我的应用程序中，我想使用 ActionBar Spinner 进行导航，尽管我知道这并不是 Spinner 的真正用途。我的问题是，菜单列表中的第一项是在活动启动时自动选择的，只要第一项是“活动的”，点击第一项就不会触发监听器。实现与操作栏的 Spinner 菜单完全相同的完全正常工作的导航菜单的最佳和最简单的方法是什么？（即右下角的这个小箭头等）

# php - 为 Google Maps API 标记错误创建 XML 文件

> ID：14021236
> 
> 赞同：1
> 
> 时间：2012-12-24T12:11:40.687
> 
> 标签：php, google-maps, google-maps-markers

我一直在尝试生成一个包含我的谷歌地图标记的 XML 文档，为此我使用了谷歌的开发者 [示例](https://developers.google.com/maps/articles/phpsqlajax_v3)。

我的代码：

```
<?php
// Start XML file, create parent node

$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node); 

// Opens a connection to a MySQL server

$connection=mysql_connect('localhost','root');
if (!$connection) {  die('Not connected : ' . mysql_error());} 

// Set the active MySQL database

$db_selected = mysql_select_db('maplocations', $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
} 

// Select all the rows in the markers table

$query = "SELECT * FROM location WHERE 1";
$result = mysql_query($query);
if (!$result) {  
  die('Invalid query: ' . mysql_error());
} 

header("Content-type: text/xml");

// Iterate through the rows, adding XML nodes for each

while ($row = @mysql_fetch_assoc($result)){  
  // ADD TO XML DOCUMENT NODE  
  $node = $dom->createElement("marker");  
  $newnode = $parnode->appendChild($node);   
  $newnode->setAttribute("name",$row['name']);
  $newnode->setAttribute("address", $row['address']);  
  $newnode->setAttribute("lat", $row['lat']);  
  $newnode->setAttribute("lng", $row['lng']);  
  $newnode->setAttribute("type", $row['type']);
} 

echo $dom->save('google.xml');

?> 
```

我在执行此操作时遇到的错误如下：

```
error on line 1 at column 1: Document is empty 
```

我已经将标题设置为输出文本以进行调试，它不再产生任何错误。请帮忙？

# javascript - JW 播放器 6 中的 Flashvars

> ID：14021237
> 
> 赞同：1
> 
> 时间：2012-12-24T12:11:44.597
> 
> 标签：javascript, jwplayer, akamai

我正在从 JW 播放器 5 迁移到 JW 播放器 6。在 5 中，我使用 flashvars 使用 swfobject 集成 akamai 提供程序，但在 6 中不支持使用 swfobject 嵌入。Akamai 提供了新插件，但不确定如何在版本 6 中传递这些.

有没有人成功集成或知道如何在版本 6 中传递这些 flashvars？akamai 的用户指南中未提及任何相关内容。

**更新**

看到 Ethan 的回答后，我正在这样做，现在我得到“找不到可播放的资源”错误，

```
jwplayer('content_video').setup({
    'file': video_file_url,
    'controlbar': 'bottom',
    'width': '674',
    'height': '451',
    'primary': 'flash',
    'provider': 'http://players.edgesuite.net/flash/plugins/jw/v2.11/jw6/AkamaiAdvancedJWStreamProvider.swf'
}); 
```

这`video_file_url`是 akamai 给出的 url，它类似于以下内容：

```
http://domain.akamaihd.net/i/me/1988,_240p,.mp4.csmil/master.m3u8?hdnea=st=1356418433~exp=1356420233~acl=/*~hmac=e534f60717c8b710dfdkfjkdfkvmffgklbb8844dc9d2cbce22c816 
```

如果我在这里遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:39:29.540

您仍然可以在 V6 中使用 flashvars/variables，但您必须使用 JW Embedder (jwplayer.js) 而不是使用 swfobject。

基本上，在 V6 中，格式如下：

变量名：'变量值'，

他们的供应商在这里 - [http://mediapm.edgesuite.net/jw/](http://mediapm.edgesuite.net/jw/)

我们这里还有一个 V5 到 V6 迁移文档 - [http://www.longtailvideo.com/support/jw-player/28834/migrating-from-jw5-to-jw6](http://www.longtailvideo.com/support/jw-player/28834/migrating-from-jw5-to-jw6)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:12:42.423

联系 Akamai 并使其正常工作，下面是直接从他们的示例文件中获取的示例。

```
jwplayer("player").setup({
    playlist: [{
        file: 'http://multiformatlive-f.akamaihd.net/demostream_1_,300~300,800~800,1200~1200,@2131.usmil',
        provider: "AkamaiAdvancedJWStreamProvider.swf",
        type:'mp4'
    }],
    width:640,
    height:360,
    primary: "flash",

    //<----------------- RTMP CONFIG TAGS ---------------------------->
    //, retryLive:true
    //, retryInterval:5
    //, liveTimeout:5
    //, connectionAttemptInterval:5
    //, connectAuthParams:'connectionAuthToken'
    //, streamAuthParams:'auth=livestreamAuthToken'
    //<----------------- Works on all network types ---------------------------->
    //  clipBegin:30
    //, clipEnd:60
    //, autoRewind:false
    //, mbrStartingBitrate:3500
    //, mbrStartingIndex:2
    //, akamaiMediaType:'akamai-hdn-single-bitrate'
    //<----------------- HDN 1.0 CONFIG TAGS ---------------------------->
    // , startingBufferTime:5
    // , forceNoSubclip:true
    // , useMBRStartupBandwidthCheck:5
    //, primaryToken:'1336218178_ee70588889d6e859ffcd58c49c3872be'
    //<----------------- HDN 2.0 CONFIG TAGS ---------------------------->  
    //, addManifestQueryArgsToFragmentRequests:false
    //, enableLogStringOnFragments:false                    
    //, enableLargeBuffersForLongFormContent:false
    //, fragmentRetryAttemptsForLostConnectivity:120
    //, liveBufferProfile:'livelowlatency' // OR 'livestable'               
    //, useNetSession:true
    //, netsessionMode:'opportunistic'  //OR 'never'                                        
    //, enableNetSessionDiscovery:false
    //, playerVerificationChallenge:'salt'
    //<----------------- HDN 1.0 & 2.0 CONFIG TAGS ---------------------------->
    //, enableAlternateServerMapping:false
    //, enableEndUserMapping:false
}); 
```

# matlab - 如何对单元格的元素进行排序？

> ID：14021238
> 
> 赞同：5
> 
> 时间：2012-12-24T12:11:45.457
> 
> 标签：matlab, sorting, cell-array

我有一个这样的单元格：

```
A{1,1}=[ 1 ;2; 3;];
A{2,1}=[ 4 ;2;];
A{3,1}=[ 3 ;2; 5; 4; 6;];
...
A{N,1}=[ 10 ;2;5; 7;];   %N is very large. 
```

换句话说，这个单元格的每个元素中的列数是不同的，没有明确的模式。

**现在，我想根据第一列**的元素对这些元素进行排序。我的意思是，我希望结果是这样的：

```
Asorted{1,1}=[ 1 ;2; 3;];
Asorted{2,1}=[ 3 ;2; 5; 4; 6;];
Asorted{3,1}=[ 4 ;2;];
...
Asorted{N,1}=[ 10 ;2;5; 7;]; 
```

目前我使用这个功能：

```
function Asorted = sortcell(A)
B=[];
nrows = size(A,1);

for i=1:nrows            % this for-loop is slow
    st=A{i,1};
    B(i,1) = st(1,1);
end
[sorted,indices] = sort(B);
Asorted = A(indices,:);
end 
```

它有效，但需要很多时间。实际上 for 循环部分非常慢。
我读过 cat 函数，但我不知道如何使用它。我用过`B = cat(1,A{:}(1,1));`，但是有这个错误：`??? Bad cell reference operation.`

**我想知道是否有更快的方法来做到这一点？**

谢谢。

**更新** 让我们做一个实验：

```
A={};
for i=1:1e3
    A{i,1} = ones(4,1) * randn;
end

N=1000;sum1=0;sum2=0;sum3=0;sum4=0;
for t=1:N

    % # Solution with for loop and no prealocation
    tic
    B = [];
    for i = 1:size(A, 1)
        B(i, 1) = A{i,1}(1,1);
    end
    [Y, I] = sort(B);
    Asorted = A(I,:);
    a=toc;sum1=sum1+a;

    % # Solution with for loop and Prealocation
    tic
    B = zeros(size(A,1), 1);
    for i = 1:size(A, 1)
        B(i, 1) = A{i,1}(1,1);
    end
    [Y, I] = sort(B);
    Asorted = A(I,:);
    a=toc;sum2=sum2+a;

    % # Solution with cellfun
    tic
    [Y, I] = sort( cellfun( @(x) x(1), A ) );
    Asorted = A(I);
    a=toc;sum3=sum3+a;
    tic

    % # Solution with for loop and ???
    for i = 1:size(A, 1)
        B(i, 1) = A{i}(1);
    end
    [Y, I] = sort(B);
    Asorted = A(I);
    a=toc;sum4=sum4+a;
end 
```

结果是
**sum1=2.53635923001387
sum2=0.629729057743372
sum3=4.54007401778717
sum4=0.571285037623497**

** 这意味着每次分配更快，但第 4 种方法是什么。我认为它值得在一个单独的问题中讨论。看[Matlab Pre-allocation vs. no allocation，第二个更快，为什么？](https://stackoverflow.com/questions/14022979/matlab-pre-allocation-vs-no-allocation-the-second-one-is-faster-why)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T12:15:26.427

你的循环很慢，因为`B`它在里面增长；你应该预先分配内存`B`，它应该运行得更快。为此，请在`for`循环之前插入以下行：

```
B = zeros(nrows, 1); 
```

您可以像这样进一步缩短循环：

```
B = zeros(size(A,1), 1);
for i = 1:size(A, 1)
    B(i, 1) = A{i}(1);
end
[Y, I] = sort(B);
Asorted = A(I); 
```

### 编辑

我决定将此解决方案与采用的更短的解决方案`cellfun`（我之前提出的）进行比较：

```
A = {[1; 2; 3], [4; 2], [3; 2; 5; 4; 6], [10; 2; 5; 7]};

% # Solution with a for loop
tic
for jj = 1:1e3
    B = zeros(size(A,1), 1);
    for i = 1:size(A, 1)
        B(i, 1) = A{i}(1);
    end
    [Y, I] = sort(B);
    Asorted = A(I);
end
toc

% # Solution with cellfun
tic
for jj = 1:1e3
    [Y, I] = sort( cellfun( @(x) x(1), A ) );
    Asorted = A(I);
end
toc 
```

结果是：

```
Elapsed time is 0.028761 seconds.
Elapsed time is 0.253888 seconds. 
```

循环的运行速度比`cellfun`! 对于大型数组，这种差异可能非常明显，因此我建议`for`在此问题中使用循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T13:00:43.483

您可以使用`cellfun`

```
[~, I] = sort( cellfun( @(x) x(1), A ) );
Asorted = A(I); 
```

# java - 应用程序执行终止

> ID：14021240
> 
> 赞同：0
> 
> 时间：2012-12-24T12:12:05.713
> 
> 标签：java, android

我的应用程序生成这个

`<terminated, exit value: 1>C:\Program Files\Java\jre7\bin\javaw.exe (Dec 24, 2012 5:01:04 PM)`

这是什么错误？我不明白如何解决它，以便我可以执行、运行和调试我的应用程序。请指导

LogCat 是：

```
 12-24 17:33:06.012: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4011bca8,-1,0,-1,0)
12-24 17:33:06.022: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@400e4430,-1,0,-1,0)
12-24 17:33:06.032: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4011bca8,-1,0,-1,0)
12-24 17:33:06.032: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@400e4430,-1,0,-1,0)
12-24 17:33:06.032: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4011bca8,-1,0,-1,0)
12-24 17:33:06.032: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@400e4430,-1,0,-1,0)
12-24 17:33:06.042: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4011bca8,-1,0,-1,0)
12-24 17:33:06.042: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$START@400e4430,-1,0,-1,0)
12-24 17:33:06.042: I/[POST_RESELECT](7761): [spanChange] (o, oldStart, newStart, oldEnd, newEnd)=(android.text.Selection$END@4011bca8,-1,0,-1,0)
12-24 17:33:07.212: W/KeyCharacterMap(7761): Can't open keycharmap file
12-24 17:33:07.212: W/KeyCharacterMap(7761): Error loading keycharmap file '/system/usr/keychars/cy8c-touchscreen.kcm.bin'. hw.keyboards.65537.devname='cy8c-touchscreen'
12-24 17:33:07.212: I/KeyCharacterMap(7761): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-24 17:33:08.242: W/IInputConnectionWrapper(7761): showStatusIcon on inactive InputConnection
12-24 17:33:08.242: W/IInputConnectionWrapper(7761): InputConnection = android.widget.AbsListView$3@40531ac8, active client = false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:17:06.137

这不是错误 Javaw.exe 是由您的代码终止的 java VM

# java - 如果窗口最大化，如何在 JFrame 的主面板中调整组件的大小

> ID：14021241
> 
> 赞同：0
> 
> 时间：2012-12-24T12:12:05.567
> 
> 标签：java, swing, window, layout-manager, absolutelayout

我使用由主面板（JPanel）组成的 Swing 包开发了一个窗口。这个主面板被添加到 JFrame 并且主面板再次包含多个 JPanel。我使用 componentListener 来查找窗口是否已调整大小并将新大小设置为所有面板。如果我调整窗口大小，它工作正常，但是当我直接最大化窗口时，主面板内的组件不会立即调整大小。如果窗口最大化，要查找的侦听器是什么。

# c++ - 同一翻译单元中的模板类和相应的外部模板类

> ID：14021243
> 
> 赞同：3
> 
> 时间：2012-12-24T12:12:26.497
> 
> 标签：c++, templates, c++11, extern

这是 C++11 中外部模板的正确用法吗？（可以在同一个翻译单元中看到`extern template class`和 各自的吗？）`template class`

```
// example.hpp:
#pragma once
template< typename T >
class C {
    void f(T);
};
// question is about the next two lines
extern template class C< float >;
extern template class C< double >;
// example_def.hpp:
#include "example.hpp"
template< typename T >
void C< T >::f(T) {
    //... smth. practicable
}
// example.cpp:
#include "example_def.hpp"
template class C< float >;
template class C< double >;
// other.hpp:
#pragma once
void g();
// other.cpp:
#include "other.hpp"
#include "example.hpp"
// maybe those two lines should be here instead?
void g() {
    C< float >();
    C< double >();
}
// main.cpp:
#include "example.hpp"
#include "other.hpp"
// ...and here?
int main() {
    C< float >();
    C< double >();
    g();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:23:40.427

是的，如果定义（不带）遵循声明（带），则规范（标准`extern template class`称为*显式实例化**声明***）和`template class`规范（标准称为*显式实例化**定义***）都可以在同一个翻译单元中：`extern``extern`

> （§14.7.2/11）**如果一个实体是同一翻译单元中显式实例化声明和显式实例化定义的主体，则定义应遵循声明。**一个实体是显式实例化声明的主体，并且其使用方式也会导致翻译单元中的隐式实例化（14.7.1），应成为程序中某处显式实例化定义的主体；否则程序格式错误，不需要诊断。[注意：这个规则确实适用于内联函数，即使这样一个实体的显式实例化声明没有其他规范效果。这需要确保如果内联函数的地址在实现选择抑制外联体的翻译单元中获取，则另一个翻译单元将提供该体。— 结束注释] 显式实例化声明不应命名具有内部链接的模板的特化。

（强调我的）。术语*显式实例化声明*和*显式实例化定义*在这里定义：

> （§14.7.2/2）显式实例化的语法是：
> 
> 显式实例化：
> `extern`[选择] `template` *声明*
> 
> 显式实例化有两种形式：显式实例化定义和显式实例化声明。显式实例化声明以 extern 关键字开头。

* * *

**这些显式实例化的效果**如下：

1.  显式实例化声明（with `extern`）阻止所有*隐式*实例化生效（内联函数和类模板*专业化*，§14.7.2/10 除外）。

2.  显式实例化定义（不带`extern`）导致实例化*无论如何*都会发生，即它覆盖显式实例化声明（这也遵循 §14.7.2/10）。

* * *

**一般评论**
您的显式实例化声明位于定义模板的头文件中这一事实意味着，为了使用模板而包含头文件的*任何人都必须同时添加显式实例化**定义*，或者，需要链接到`.cpp`包含此类显式实例化定义的另一个文件的代码。

当您期望许多不同的用户为许多不同的类型实例化模板时，这可能会令人困惑并且可能不是一个好主意。但是，如果不同类型的实例化数量很少并且您可以预料到它们，这可能是明智的。当然，您必须确保有一个（或多个）`.cpp`文件包含所有所需实例化的显式实例化*定义，并且其对应的目标文件在构建时与项目链接。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T13:02:44.593

模板的基本思想`extern`是支持常用实例的显式实例化，同时也支持不常用参数的隐式实例化。例如，`std::basic_string<char>`可以显式实例化但`std::basic_string<signed char>`可以留给隐式实例化（实际的激励示例是 IOStreams，它需要大量时间来实例化，但实际上只使用了两个实例化）。

为了允许隐式实例化，所用模板的定义需要在使用模板的每个翻译单元中可见。如果模板定义可见，则编译器默认假定它需要隐式提供实例化。使用`extern`模板声明告诉编译器特定的模板实例化将由某个翻译单元提供。

尽管您的案例有效，但甚至不需要声明`extern`模板：当编译器使用实例化并且找不到它的定义时，它将假定在某个翻译单元中找到了实例化。

# c++ - 在 C++ 项目中使用 tinyXml2

> ID：14021244
> 
> 赞同：1
> 
> 时间：2012-12-24T12:12:28.110
> 
> 标签：c++, tinyxml2

我是**tinyXml2**的新手。我正在尝试解析`xml`文件并打印根标记中的文本。这是我的代码。

```
#include<stdio.h>
#include "tinyxml2.h"

using namespace std;

int main()
{
    XMLDocument doc;
    doc.LoadFile("input.xml");
    const char *title = doc.FirstChildElement("root")->GetText();
    printf("%s\n", title);
    return 0;
} 
```

在构建这个我得到一个错误说`XMLDocument was not declared in this scope`。

问题是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T12:18:11.263

您必须指定命名空间。要么添加

```
using namespace tinyxml2; 
```

到代码的开头，在`#include`指令之后，或者在声明时明确指定`doc`：

```
tinyxml2::XMLDocument doc; 
```

等等

# node.js - node.js 中的模块初始化并在请求之间保持其状态

> ID：14021245
> 
> 赞同：1
> 
> 时间：2012-12-24T12:12:32.550
> 
> 标签：node.js, module, initialization

我的场景：我将上传一些少量的配置数据，并且很少更改数据库中的数据来表示`exports.config`，我想使用它而不是配置文件，以便应用程序管理员（不是系统管理员 :) 可以通过网络配置应用程序接口，我想确保每次这个模块被`require`“d”时都不会重新加载这些数据。

我是否可以假设我在 node.js 模块（函数定义之外）中拥有的任何 [初始化] 代码在每个进程生命周期中只会执行一次，而不管我`require`这个模块多少次？

可能是一个愚蠢的问题，但我很难理解 node.js 如何运作的某些方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:18:53.530

## 是的。

每个进程生命周期可能需要多次文件/模块，但只会执行一次。至少默认情况下。

这对您很有效，因为您可以`config`在应用程序初始化时简单地查询您的表，并且导出的值将保持不变，直到应用程序重新启动。

* * *

从[nodejs 模块缓存文档](http://nodejs.org/api/modules.html#modules_caching)

> 模块在第一次加载后被缓存。这意味着（除其他外）每次调用都**`require('foo')`**将返回完全相同的对象，如果它会解析为同一个文件。
> 
> 多次调用**`require('foo')`**可能不会导致模块代码被多次执行。这是一个重要的特点。有了它，可以返回“部分完成”的对象，从而允许加载传递依赖项，即使它们会导致循环。
> 
> 如果你想让一个模块多次执行代码，那么导出一个函数，然后调用那个函数。

# java - 点击形状的边框

> ID：14021248
> 
> 赞同：0
> 
> 时间：2012-12-24T12:12:53.280
> 
> 标签：java, shape

有没有办法简单地检查鼠标点击是否在形状的边框上？

我实际上正在使用该`contains`方法，但如果单击 Shape 边框，则它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:25:26.957

使用`BasicStroke`. 定义厚度（比如说 5 个像素）并使用`yourShape.getStrokedShape().contains(yourPoint)`

# refinerycms - 在炼油厂页面显示记录

> ID：14021251
> 
> 赞同：0
> 
> 时间：2012-12-24T12:13:47.490
> 
> 标签：refinerycms

我需要从数据库中获取记录，并且我想在主页上显示该记录值。我的表名是`refierny_about`. 我有一个模型。它是在我生成引擎时创建的。

感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:17:28.977

我的猜测是“关​​于”是您的自定义扩展执行此操作。这里的语法是：`Refinery Namespace::Your Extension Namespace::Extension Model Name`

所以你可以使用控制器是`Refinery::Abouts::About.all`

`app\decorators\controllers\refinery\pages_controller_decorator.rb`过去这段代码

```
Refinery::PagesController.class_eval do
  def home  
    @posts = Refinery::Abouts::About.all
  end
end 
```

及其您的html代码。

```
<% @posts.each do |a| %>
<p><%= link_to about.title, refinery.abouts_about_path(a) %></p>
<% end %> 
```

# c++ - 运行 QT4 程序时抑制控制台窗口

> ID：14021255
> 
> 赞同：0
> 
> 时间：2012-12-24T12:14:02.200
> 
> 标签：c++, qt, codeblocks

我正在尝试使用代码块使用 QT for C++ 制作应用程序。每次我运行应用程序时，都会弹出一个命令提示符窗口，然后是我的应用程序的 gui。

如何抑制命令提示符窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:30:03.467

这里可能的[答案](http://qt-project.org/forums/viewthread/20168)

只需删除

> 配置 += 控制台

从您的 .pro 文件中

Code::Blocks 的另一个选项。在 IDE 菜单中

> 项目-> 属性-> 构建目标：将类型从“控制台应用程序”更改为“GUI 应用程序”。

[在这里](http://forums.codeblocks.org/index.php?topic=8251.0;prev_next=prev)和[这里](http://www.codeblocks.org/docs/main_codeblocks_en.html)找到

# javascript - 如何将 JSON 响应存储到 JavaScript 中

> ID：14021259
> 
> 赞同：0
> 
> 时间：2012-12-24T12:14:19.760
> 
> 标签：javascript, json, jquery

我正在尝试将 JSON 响应存储到变量中，以便稍后处理它，我尝试了以下但得到 null，

```
function go(){
   var jsonObj = getJson(url);
   alert(JSON.stringify(jsonObj));
  }

function getJson(){
    return JSON.parse($.ajax({
        type: 'POST',
        url: 'url',
        dataType: 'json',
        global: false,
        async: false,
        success: function(data){
        return data;
        }
    }).responseText);
} 
```

同时，我可以看到 JSON 内容打印在我的服务器控制台上。

**编辑**

谢谢摆脱..！解决了这个问题。您的解决方案在 IE8 中运行良好，但对于 Chrome 和 FireFox 在警报弹出窗口中仍然显示为“null”。我不认为它的浏览器特定修复..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:19:28.847

```
$.ajax({
        type: 'POST',
        url: 'url',
        dataType: 'json',
        global: false,
        async: false,
        success: function(data){
         // do some stufs or assign data to a var
         window.myVar = data;
        }
   }); 
```

Ajax 是异步的，因此您需要将响应存储在回调中的变量中。在这个例子中，window.myVar 是一个包含响应数据的全局变量。在响应返回之前您无法访问该变量，您需要编写异步代码。

# java - 为什么tomcat不知道在eclipse中重构包名

> ID：14021263
> 
> 赞同：0
> 
> 时间：2012-12-24T12:14:42.687
> 
> 标签：java, refactoring, tomcat6, renaming

我在我的 JAVA 项目中更改了几个包名称，但是在更改后再次启动 tomcat 时，它会尝试获取旧的包名称。（抛出 java.lang.ClassNotFoundException）

尝试重新构建我的应用程序时出现以下异常：

```
org.apache.catalina.loader.StandardClassLoader@6eb38a
 com.project.linkedin.LinkedInService
java.lang.ClassNotFoundException: com.project.linkedin.LinkedInService
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

我究竟做错了什么？是否还需要更改 tomcat 属性中的某些内容？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:08:19.053

修复你的 web.xml，可能它引用了旧包名的 LinkedInService

# jquery - 可变数量的水平步进滚动

> ID：14021272
> 
> 赞同：1
> 
> 时间：2012-12-24T12:15:34.300
> 
> 标签：jquery, html, scroll

我的页面有两个按钮（向左滚动和向右滚动），点击时，页面必须按 div 宽度左右移动（每个 div 都有不同的宽度）。这可以用 jQuery 完成吗？我不知道如何读取当前 div id（靠近边框左侧的一个），以及如何按上一个/下一个 div 的宽度定义滚动（左或右）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:10:25.810

单击时增加，减少 Counter `var c`。
这将帮助我们定位所需的 DIV`.eq( c )`
比我们需要的只是获取所需的 DIV`.offset().left`并将页面移动到该位置：

## *[jsBin 演示](http://jsbin.com/otadex/43/edit)*

HTML（将 .box 添加到您的 DIV）：

```
<div class="box" id="01" style="width:200px; height:100px; border:solid 1px; float:left">div01</div> 
```

jQuery：

```
$(function(){

  var c = 0;
  var boxN = $('.box').length;

  $('#left, #right').on('click', function( e ){

    e.preventDefault();

    c = this.id=='right' ? ++c%boxN : --c ;
    if(c<0){ c=boxN-1; }
    var boxL = $('.box').eq( c ).offset().left;

    $('html, body').stop().animate({scrollLeft: boxL});

  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:55:36.053

如果您在谈论某种滑块，那么您有一个 containerdiv 和一个 innerdiv，其中包含项目的总长度。

containerdiv 将隐藏溢出

接下来你控制 div 的位置

这只是一种思维方式...

# android - 在 ICS 设备上，屏幕锁定时当前活动消失

> ID：14021274
> 
> 赞同：0
> 
> 时间：2012-12-24T12:15:51.260
> 
> 标签：android, android-manifest

在活动清单文件中，我将其标记为 android:noHistory="true" 因为我不希望将屏幕添加到活动堆栈中。当我锁定屏幕并解锁时。活动消失并出现上一个屏幕。这不应该发生。请任何人都可以建议我，我如何在 ICS 设备上处理这个问题。但是它在 Gingerbread 设备上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:19:55.323

在 android 清单文件中删除 android:noHistory="true" 并在您移出该 Activity 时调用完成。这将从堆栈中完全删除活动，并且不会显示在您的后台堆栈中。我希望这对你有用

# c# - 用户控件 c# 动态添加

> ID：14021275
> 
> 赞同：2
> 
> 时间：2012-12-24T12:15:52.437
> 
> 标签：c#, controls, picturebox

我在代码中动态创建用户控件

```
UserControl myobject = new UserControl(); 
```

当我将此控件添加到我的图片框时，myObject 包含一个按钮等

```
picturebox.Controls.Add(myobject); 
```

我的图片框的背景图像消失了。

为什么？

注意：但是可以看到按钮。我也想看到图片框

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T12:21:38.127

设置用户控件的透明背景颜色。这将使图片框可见：

```
UserControlDisplay myobject = new UserControlDisplay();
myobject.BackColor = Color.Transparent;
picturebox.Controls.Add(myobject); 
```

顺便说一句，我相信您有不同的用户控件名称。是的，正如@samjudson 所说，PictureBox 不应该这样使用：尝试使用`Panel`背景图像代替（方法将保持不变 - 使用透明颜色查看父控件）：

```
panel.BackgroundImage = // your image
UserControlDisplay myobject = new UserControlDisplay();
myobject.BackColor = Color.Transparent;
panel.Controls.Add(myobject); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T12:30:19.037

试试这个：

```
UserControl myobject = new UserControl();
Button but = new Button();
but.BackColor = Color.Gray
pic.BackColor = Color.Green;
myobject.Controls.Add(but);
pic.Visible = true;
pic.Controls.Add(myobject); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T12:23:16.230

PictureBox 控件不打算用作容器。尝试添加父面板或类似的，并将 PictureBox 和您的自定义控件添加到面板控件。

# objective-c - NSProxy 类有用的真实例子，为什么？

> ID：14021281
> 
> 赞同：16
> 
> 时间：2012-12-24T12:16:13.207
> 
> 标签：objective-c, ios, cocoa, proxy, nsproxy

我一直想知道为什么 NSProxy 类如此重要。为什么一个对象需要将其实例变量保存在其他对象中？我需要示例来了解何时使用它。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-08-23T07:13:41.890

NSProxy 在需要代理拦截时很有用，假设您的应用程序中有一些样式化的 UISearchBar，当用户开始输入时您会在其中删除搜索图标，这意味着您需要侦听 UISearchBarDelegate 方法`-searchBar:textDidChange:`但此方法已被侦听ViewController 执行搜索，以避免代码重复，您不想在每个 ViewController 中复制粘贴隐藏图标逻辑。要解决此问题，您可以创建`NSProxy`将 ViewController 引用为**originalDelegate**并将隐藏搜索图标助手引用为**middleMan**，然后在您的 NSProxy 实例中，您需要实现以下方法：

```
- (void)forwardInvocation:(NSInvocation *)invocation
{
    if ([self.middleMan respondsToSelector:invocation.selector])
    {
        //Note: probably it's better to provide a copy invocation
        [invocation invokeWithTarget:self.middleMan];
    }

    if ([self.originalDelegate respondsToSelector:invocation.selector])
    {
        [invocation invokeWithTarget:self.originalDelegate];
    }
}

- (NSMethodSignature *)methodSignatureForSelector:(SEL)sel
{
    id result = [self.originalDelegate methodSignatureForSelector:sel];
    if (!result) {
        result = [self.middleMan methodSignatureForSelector:sel];
    }

    return result;
} 
```

并将您的代理实例设置为 searchBar 委托：`searchBar.delegate = proxy`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-02T23:14:17.117

示例 A：假设您正在编写一个对象持久层（如 CoreData，但当然要好得多；））。

假设您只需查看索引树就可以非常快速地完成对数据库中数千个项目的查询，而无需读取和初始化完整项目的成本。您可以使用 NSProxy 来实现延迟加载。使用您的索引表来定位对象的主键，但不是创建该对象，而是返回一个知道真实对象主键的 NSProxy。

只有当需要另一个数据库查找时，代理对象才会创建该项目并将所有未来的消息重定向到它。调用代码只会处理 NSProxy 项，而现在永远不会处理后台执行的延迟加载。

示例 B（这是 OS X，抱歉）：当大纲层次结构中有两次相同的项目时，NSOutlineView 的行为非常奇怪。当您的应用程序中有智能组功能时，这是非常常见的问题。解决方案：在大纲视图中使用不同的代理，指向同一个对象。

# vim - 在 Vim 中提高生产力的手指位置

> ID：14021283
> 
> 赞同：5
> 
> 时间：2012-12-24T12:16:16.180
> 
> 标签：vim, touch-typing

我绝对是`vim`. 现在我正在学习 vim `vimtutor`。为了提高工作效率，使用 H、J、K、L 键时我的手指应该放在哪里。任何图表都足够了。我想第一次正确地学习它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T12:38:35.170

你应该把你的手指放在本垒上。

![在此处输入图像描述](../Images/a59aa7554c44e0161aa8d6ca6d2a09e0.png)

Vim 键定位试图利用这一点，并将常用功能定位在主行周围。通过这样做，您可以在导航和版本之间快速切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T14:15:12.657

你应该学习[触摸打字](http://en.wikipedia.org/wiki/Touch_typing)。那里有很多教程。

一旦你这样做了，你将更有效率，不仅使用 vim，而且使用任何其他需要输入的应用程序。

# ruby-on-rails-3 - 限制对 Paperclip 的访问：S3 中的原始文件

> ID：14021289
> 
> 赞同：4
> 
> 时间：2012-12-24T12:16:41.167
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip, restriction

如何限制对`:original`S3 中样式文件的任何访问，但保留对存储桶中其余样式文件夹的访问权限？

我看到了有关如何限制所有访问然后检查模型属性的实现。我只想限制对`:original`样式的访问

我确实注意到回形针中的[这条线](https://github.com/thoughtbot/paperclip/blob/master/lib/paperclip/storage/s3.rb#L119)，我只是不知道如何使用（如果可能的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:57:08.283

您可以通过控制器的操作访问文件来限制文件。通过这种方式，您可以控制用户可以访问哪些文件，哪些不能访问。

如果您只是制作一个 privat s3 存储桶，这对您没有帮助。作为具有有效密钥的用户可以访问存储桶中的任何文件。如果您确实有需要保护的文件，那么您只能查看方法（我认为）：

*   限制对存储桶的访问并通过控制器的操作提供文件（没有真正的解决方法）
*   将特定文件重命名为不易预测（例如 32 个或更多字符的数字和字母）。这很容易实现，您仍然可以直接从 s3 提供文件
*   将文件保存在其他地方（可能在其他 s3 存储桶中），因此没有人可以预测它们

对于重命名文件，您可以使用这个 stackoverflow 问题：[Paperclip renaming files after they're save](https://stackoverflow.com/questions/2708115/paperclip-renaming-files-after-theyre-saved)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T20:39:07.153

我正在寻找的答案（我认为，尚未测试）可以在这里找到

[http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Storage/S3](http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Storage/S3)

```
s3_permissions: This is a String that should be one of the "canned" access policies that S3 provides (more information can be found here: docs.amazonwebservices.com/AmazonS3/latest/dev/index.html?RESTAccessPolicy.html) The default for Paperclip is :public_read.
You can set permission on a per style bases by doing the following:
:s3_permissions => {
  :original => :private
}
Or globaly:
:s3_permissions => :private 
```

# html - 如何从 IIS 部署 HTML 网页？

> ID：14021291
> 
> 赞同：1
> 
> 时间：2012-12-24T12:16:54.703
> 
> 标签：html, iis-7

我已经开发了一些网页，所有网页都运行良好，现在我需要部署在我的`localhost`. 我怎样才能做到这一点？

我尝试通过创建一个虚拟目录并将 HTML 页面、CSS、JS 和图像复制到虚拟目录中，但这不起作用，它显示

> Internet Explorer无法显示该网页

我的默认网页名称是“index.html”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:21:44.203

您需要将 IIS 虚拟目录指向站点文件的物理位置。这可以在您机器上的任何位置。

网站通常位于其自己目录下的 disk:\inetpu\websites\ 中。

虚拟目录就是这样，它实际上并不存在于您的机器上。

然后，您应该能够按如下方式浏览到您的站点：

```
http://localhost/virtualdirectory/index.html 
```

# vb.net - 简单的VB，处理许多按钮

> ID：14021293
> 
> 赞同：1
> 
> 时间：2012-12-24T12:17:02.917
> 
> 标签：vb.net, events, button, event-handling

在我的 VB 解决方案中，我有很多按网格排列的按钮。加载程序时，其中一个按钮被随机设置为正确的按钮（您必须单击该按钮才能获胜）。谁能指出我正确的方向？因为必须有比手动编码每个按钮并为每个按钮创建事件处理程序更好的方法。

您不必给我一个工作示例，只需大致了解如何完成即可。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:54:05.907

首先，你说你想要一个按钮网格，所以你必须`FlowLayoutPanel`在表单中有一个控件，以便让你想要添加的按钮自动排列。其次，您必须使用 for 循环，r 任何类型的外观，以便将要添加的按钮添加到先前添加的“FlowLayoutPanel”。class Answers Dim strAnswerText as string Dim AnswerFlag as Boolean End Class

```
Sub LoadForm(byval a_Answers as Answer())        
    Dim i as Integer = 0
    Dim b as Button 
    For(i=0;i<NUM_OF_BUTTONS;i++)
       b = New Button()
       b.Text = "Choice -" & i & "- " & a_Answers(i).strAnswerText 
       b.Tag = a_Answers(i).AnswerFlag

       'Supposing that the FlowLayoutPanel control name is fl
       AddHandler b.Click, Addressof Clicked
       fl.controls.Add(b)   
    End For 
End Sub

Sub Button Clicked(sender as object, e as EventArgs)
    if sender.Tag = True
       'True answer
    else
       'Wrong answer
    end if

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:24:19.847

如果要在网格中排列按钮，请使用 TableLayoutPanel 或将按钮直接添加到表单并计算它们的位置。如果您想在表单调整大小时自动排列按钮，这`TableLayoutPanel`很有用，否则直接添加按钮对我来说似乎更容易。

将按钮添加到在表单级别定义的数组中，以使其易于访问

```
Public Const NColumns As Integer = 5, NRows As Integer = 4

Private buttons As Button(,) = New Button(NColumns - 1, NRows - 1) {} 
```

您可以在循环中轻松添加按钮

```
For ix As Integer = 0 To NColumns - 1
    For iy As Integer = 0 To NRows - 1
        Dim btn = New Button()
        btn.Text = String.Format("{0:d2}{1:d2}", ix, iy)
        btn.Location = New Point(leftMargin + ix * xDistance,
                                 topMargin + iy * yDistance)
        btn.Size = New Size(buttonWidth, buttonHeight)
        AddHandler btn.Click, Addressof Button_Clicked
        buttons(ix, iy) = btn
        Controls.Add(btn)   
    Next
Next 
```

您可以使用随机生成器确定获胜按钮。将其定义为表单成员，而不是局部变量。

```
Private randomGenrator As System.Random = New System.Random() 
```

确定坐标

```
Dim xWins = randomGenrator.Next(NColumns) 'Returns a number between 0 and NColumns-1
Dim yWins = randomGenrator.Next(NRows) 
```

点击处理程序看起来像这样

```
Private Sub Button Button_Clicked(sender As Object, e As EventArgs)
    If sender = buttons(xWins, yWins) Then
       'You win
    Else
       'You loose
    End
End Sub 
```

# java - 列表框中的 ZK 重新排序

> ID：14021298
> 
> 赞同：3
> 
> 时间：2012-12-24T12:17:44.790
> 
> 标签：java, zk

我想在 zk 中使用**listitem**的重新排序当我们在**zul**文件中定义标签（listitem，listcell）时，我们该怎么做。我不想使用 **ListitemRenderer**。[在这里](http://zk.datalite.cz/examples)我发现了一些东西，但可能是他们没有更新东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:40:14.077

## 列表框重新排序列

下面的例子也可以在[zk fiddle](http://zkfiddle.org/sample/4k499d/1-Reorder-Columns-in-Listbox#source-4)上找到。

### 通过拖放

首先是我们稍后扩展到弹出方式的 dnd 示例。
简单的观点：

```
<window apply="test.LboxViewCtrl">
        <listbox id="lbox">
            <listhead id="lHead">
                <listheader draggable="head" droppable="head" label="Col A" />
                <listheader draggable="head" droppable="head" label="Col B" />
                <listheader draggable="head" droppable="head" label="Col C" />
            </listhead>
            <auxhead>
                <auxheader colspan="3">
                    <button id="reorderBtn" label="Reorder" />
                </auxheader>
            </auxhead>
            <listitem>
                <listcell label="A1" />
                <listcell label="B1" />
                <listcell label="C1" />
            </listitem>
            <listitem>
                <listcell label="A2" />
                <listcell label="B2" />
                <listcell label="C2" />
            </listitem>
        </listbox>  
    </window> 
```

控制器通过评论解释：

```
public class LboxViewCtrl extends SelectorComposer<Component> {

    @Wire
    private Listbox lbox;
    @Wire
    private Listhead lHead;
    @Wire
    private Panel menu;
    @Wire
    private Listbox box;

    @Listen("onDrop = #lbox > #lHead > listheader")
    public void onDroplHead(DropEvent ev) {
        // get the dragged Listheader and the one it is dropped on.
        Listheader dragged = (Listheader) ev.getDragged();
        Listheader droppedOn = (Listheader) ev.getTarget();
        // then get their indexes.
        int from = lHead.getChildren().indexOf(dragged);
        int to = lHead.getChildren().indexOf(droppedOn);

        // swap the positions
        lHead.insertBefore(dragged, droppedOn);

        // swap related Listcell in all Listitem instances
        for (Listitem item : lbox.getItems()) {
            item.insertBefore(item.getChildren().get(from), item.getChildren().get(to));
        }

    }

} 
```

现在我们可以 dnd 列了。

### 随着弹出

首先，如果我们单击 Listbox 中的按钮，我们添加一个打开菜单的方法。

```
@Listen("onClick = #reorderBtn")
public void onEditorOpen(Event e) {
    Window win = (Window) Executions.createComponents("/lbMenu.zul", this.getSelf(), null);
    win.doModal();
} 
```

当然，我们需要一个弹出窗口的视图：

```
<window id="menu" visible="false" closable="true" position="center" width="400px" height="150px" border="normal" title="Reorder" apply="test.MenuViewCtrl">
    <listbox id="box">
        <template name="model">
            <listitem label="${each.label}" draggable="move" droppable="move" />
        </template>
    </listbox>
</window> 
```

以及控制器：

```
 @Wire
    private Window menu;
    @Wire
    private Listbox box;

    private Listhead lHead;

    @Override
    public void doAfterCompose(Component comp) throws Exception {
        super.doAfterCompose(comp);
        // get the Listboxhead in which we like to change the the col order
        lHead = (Listhead) menu.getParent().query("#lbox > #lHead");
        // set the model for Listbox box in the pop up
        box.setModel(new ListModelList<>(lHead.getChildren()));
    }

    @Listen("onDrop = listitem")
    public void onDropInMenu(DropEvent ev) {
        // get the draged and dropped again
        Listitem dragged = (Listitem) ev.getDragged();
        Listitem droppedOn = (Listitem) ev.getTarget();

        // then get their indexes.
        int from = box.getItems().indexOf(dragged);
        int to = box.getItems().indexOf(droppedOn);

        // swap the positions
        lHead.insertBefore(lHead.getChildren().get(from), lHead.getChildren().get(to));

        // swap related Listcell in all Listitem instances
        for (Listitem item : lHead.getListbox().getItems()) {
            item.insertBefore(item.getChildren().get(from), item.getChildren().get(to));
        }

        // swap the items in pop up Lisbox as well
        box.insertBefore(dragged, droppedOn);
    } 
```

如果你想用上/下按钮而不是 dnd，看看这个[zk 演示。](http://www.zkoss.org/zkdemo/listbox/dual_listbox)

## 列表框重新排序行

它非常简单，可以在[ZK 文档](http://books.zkoss.org/wiki/ZK_Component_Reference/Data/Listbox#The_SortAscending_and_SortDescending_Properties)和[ZK Demosite](http://www.zkoss.org/zkdemo/listbox/sort_by_comparator)中快速找到。
只需添加

```
sortAscending="XXX" sortDescending="XXX" 
```

到`Listhead`您的 .zul 中的 zks 组件，其中通过[数据绑定](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding)、[el 表达式](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Composing/ZUML/EL_Expressions)或在您的[作曲家](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/MVC/Controller/Composer)`XXX`中设置来评估。
`java.lang.Comparator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:18:21.487

我已经在 ZUL 中重新排序了，你可以[在这里查看](http://zkframeworkhint.blogspot.in/2013/01/zk-listbox-with-column-reordering-in-zul.html)

# android - ExpandableListView 打开时清除动画

> ID：14021301
> 
> 赞同：0
> 
> 时间：2012-12-24T12:18:02.123
> 
> 标签：android, animation, expandablelistview

我在 Facebook 应用程序中开发了两个菜单。其中之一包含可扩展列表视图。 *用例：* 我打开菜单，然后打开一个部分。现在，我的翻译被重绘关闭了，所以它隐藏了我的菜单。

要打开我的菜单，我应用翻译，然后将其删除并使用 offsetLeftAndRight 保持打开状态：

```
mainlayout.clearAnimation();

mainlayout.offsetLeftAndRight(pxTranslateMenu); 
```

我试图创建自己的视图来解决这个问题。但是当我的项目从 GONE 变为 VISIBLE 时，我得到了相同的结果。当项目从 INVSIBLE 变为 VISIBLE 时一切正常，但我的渲染错误（放置我的项目的可用空间）。

有没有做我想做的事：点击部分后保持我的菜单打开？

谢谢。

我尝试使用其他一些组件来避免手风琴。但是当 EditText 获得焦点或当我在 AlertDialog 中选择一个项目时，我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:40:37.940

我刚刚找到了解决这个问题的方法。我只是创建一个具有半透明部分的新活动。这样，我就可以为所欲为。

我希望我能够通过这种方式解决所有需求。

# objective-c - 从另一个视图控制器中删除视图控制器

> ID：14021309
> 
> 赞同：1
> 
> 时间：2012-12-24T12:18:37.167
> 
> 标签：objective-c, ios, uiviewcontroller

我对 iPhone 应用程序开发非常陌生。
我正在使用 Objective-C++ 和 std CPP 为 iPhone 模拟器开发一个示例应用程序。

我的应用程序中有两个视图，在来自 CPP 代码的一些事件上，我使用来自第一个视图控制器的以下代码显示第二个视图。

```
// Defined in .h file 
secondViewScreenController *mSecondViewScreen;

// .mm file Code gets called based on event from CPP (common interface function between Objective-C++ and CPP code)
mSecondViewScreen = [[secondViewScreenController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:mSecondViewScreen animated:YES]; 
```

我能够在屏幕上看到第二个视图，但问题是我无法从第一个视图控制器结束/删除第二个视图控制器。

如何使用第二个视图控制器的指针或使用任何其他方法从第一个视图控制器中删除第二个视图控制器。

要删除第二个视图，我在第二个视图控制器文件中有以下代码，该代码在第二个视图的按钮单击事件中被调用。

```
// In .mm of second view controller. 
- (IBAction)onEndBtnClicked:(UIButton *)sender
{
   [self dismissModalViewControllerAnimated:NO];
   [self.navigationController popViewControllerAnimated:YES];
} 
```

上面的代码完美运行，当我单击秒视图的结束按钮时，它会从屏幕中删除第二个视图控制器并导航到第一个视图，我如何使用相同的代码从第一个视图控制器中删除第二个视图。

我绑定用于`NSNotificationCenter`将事件从第一个视图发送到第二个视图以调用该函数`onEndBtnClicked`，但它不起作用。

正确的做法是什么？

OSX 版本：10.5.8 和 Xcode 版本：3.1.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:53:24.913

在 secondViewController 中创建一个协议，如：

```
@protocol SecondViewScreenControllerDelegate <NSObject>

- (void)secondViewScreenControllerDidPressCancelButton:(UIViewController *)viewController sender:(id)sender;

// Any other button possibilities

@end 
```

现在您必须在 secondViewController 类中添加一个属性：

```
@property (weak, nonatomic) id<SecondViewScreenControllerDelegate> delegate; 
```

你在 secondViewController 实现中合成它：

```
@synthesize delegate = _delegate; 
```

最后，您所要做的就是在您的 firstViewController 中实现协议，并在展示它之前正确设置 secondViewController：

```
@interface firstViewController : UIViewController <SecondViewScreenControllerDelegate> 
```

...

```
@implementation firstViewController

    - (void)secondViewScreenControllerDidPressCancelButton:(UIViewController *)viewController sender:(id)sender
    {
         // Do something with the sender if needed
         [viewController dismissViewControllerAnimated:YES completion:NULL];
    } 
```

然后从第一个呈现 secondViewController 时：

```
UIViewController *sec = [[SecondViewController alloc] init]; // If you don't need any nib don't call the method, use init instead
sec.delegate = self;
[self presentViewController:sec animated:YES completion:NULL]; 
```

并准备好了。每当您想从第一个关闭 secondViewController 时，只需调用：（在 secondViewController 实现中）

```
[self.delegate secondViewScreenControllerDidPressCancelButton:self sender:nil]; // Use nil or any other object to send as a sender 
```

所发生的一切就是你发送一个 secondViewController 的指针，你可以从第一个使用它。然后你可以毫无问题地使用它。不需要 C++。在 Cocoa 中，您将不需要 C++。几乎所有事情都可以用 Objective-C 完成，而且它更具动态性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:38:25.623

如果您的应用程序中只有两个视图，则使用

```
- (IBAction)onEndBtnClicked:(UIButton *)sender
{
   [self dismissModalViewControllerAnimated:NO];
} 
```

删除下面的行：

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

因为您正在取消第二个视图，那么为什么要从第一个视图中删除它。

# c# - 如何确定asp.net c#中的用户注销？

> ID：14021314
> 
> 赞同：0
> 
> 时间：2012-12-24T12:19:13.983
> 
> 标签：c#, asp.net, usersession

我必须在数据库中维护用户登录和注销时间。`Application_End ()`如果我使用in进行登录，则登录很容易，但对于 logout `global.asax`。它给了我例外。

我在 asax 文件中的代码：

```
Application_End()
{
  HttpCurrent.Context.Session.Abandon();
  LogUserLogoutTimeToDatabase();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:22:35.170

你是最好的，第一个赌注是应用程序中的注销按钮。之后，您可以使用会话时间非常短的会话超时事件。

Application_End 在应用程序关闭时触发，而不是在服务器崩溃期间触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:26:42.487

您将需要使用 Session_End()。用户可以简单地关闭他们的浏览器，对他们来说，他们现在已经“注销”了——但是除非他们在关闭浏览器之前单击“注销”按钮，否则没有任何东西会提醒服务器他们已经注销。因此，一旦他们的会话超时，将触发 Session_End() 事件，您可以在其中捕获您的注销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T12:36:10.980

实现这一点的最佳方法是使用*注销按钮*`onClick`事件。

 *当用户单击注销按钮时，将该时间存储在`database`...*

# c# - 如何从对象中找到字符串的所有引用？

> ID：14021315
> 
> 赞同：1
> 
> 时间：2012-12-24T12:19:18.820
> 
> 标签：c#, .net, string, object, reference

> **可能重复：**
> [跟踪 C# 中的所有对象引用](https://stackoverflow.com/questions/707421/track-all-object-references-in-c-sharp)

字符串是*引用类型*。它们有两个部分；一个`object`和一个`reference to object`。例如;

```
string str1 = "Soner";
string str2 = str1; 
```

`str1`并且`str2`是对同一个对象的引用，`"Soner"`是一个对象。有没有办法找到所有引用指向同一个对象？在这种情况下，我尝试查找`str1`并`str2`仅使用`"Soner"`对象？

当然，我也不知道如何在`string`没有任何引用的情况下访问对象。我想知道有没有办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:33:16.333

没有任何内置方法可以在运行时在 CLR 进程中获取对对象的所有引用。[GC](http://msdn.microsoft.com/en-us/library/a0fwz4wc(v=vs.80).aspx)不提供有关对象引用的 任何信息。

您所能做的就是构建自定义“跟踪器”，在明确添加对象后保留对对象的引用。[Jon Skeet 描述了这里的基本思想](https://stackoverflow.com/a/5704035/808723)。

# list - 如何从包含交通线的文件构建图表？

> ID：14021319
> 
> 赞同：1
> 
> 时间：2012-12-24T12:19:34.027
> 
> 标签：list, prolog, graph-theory

我正在为我在 Prolog 中的项目而苦苦挣扎。我的问题是，给定一个包含`line(NameOfLine, Type, ListOfStations)`. 例如：

```
line(m1, train, [a,b,c,d,e])
line(m2, train, [h,e,j,i])
... 
```

其中e是两条线的交叉站（实际的线文件非常复杂，包含十几条线，数百个站）。我必须做经典的图形问题，比如查找路由、计算成本等。

我知道我必须在开始之前构建一个无向图，所以我尝试了这样的事情：

```
adjacent(X,Y,[X,Y|_]).
adjacent(X,Y,[_|T]) :- adjacent(X,Y,T).

find_edge(LArret) :- forall(adjacent(X, Y, LArret), assert(edge(X,Y))).

connected(X,Y) :- edge(X,Y) ; edge(Y,X).

graph :-
    forall(ligne(_,_,L),  find_edge(L)). 
```

但我没有得到预期的所有优势。你们能给我一些建议吗？还是我一开始解决此类问题时错了？

* * *

**补充问题：** 感谢提出的解决方案，我终于成功定义了边缘。然后我尝试了这个经典算法来找到 A 和 B 之间的路径，但有时搜索似乎没有结束，有时程序卡在搜索中。

```
connected(X,Y) :- edge(X,Y) ; edge(Y,X).

path(A,B,Path) :-
       travel(A,B,[A],Q), 
       reverse(Q,Path).

travel(A,B,P,[B|P]) :- 
       connected(A,B).
travel(A,B,Visited,Path) :-
       connected(A,C),           
       C \== B,
       \+member(C,Visited),
       travel(C,B,[C|Visited],Path). 
```

我认为原因可能是图表中的循环或搜索中的无限循环，我怎样才能避免这种问题但仍然找到所有可能的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:45:43.563

我能够将以下代码与您的`line/3`定义一起使用来创建您的`edge/2`定义列表：

```
adjacent(X,Y, [X,Y|_]).
adjacent(X,Y, [_|T]) :- adjacent(X,Y, T).

adjacent_lines(X,Y) :- line(_,_,L), adjacent(X,Y, L).

:- forall(adjacent_lines(X, Y), assert(edge(X, Y))). 
```

`edge/2`它创建了事实指定的所有适用且有效的`line/3`事实。
（至少，使用 SWI-Prolog）

# android - Android：AsyncTask - 似乎没有异步运行

> ID：14021320
> 
> 赞同：1
> 
> 时间：2012-12-24T12:19:41.877
> 
> 标签：android, android-asynctask

我正在尝试使用 AsyncTask 使任务与主线程分开运行，从而防止在任务运行时锁定线程。我是否误解了 AsyncTask 的用途？

主线程调用代码：

```
public void onClick(View view) {
    int input = Integer.parseInt(editInput.getText().toString());
    String out = "";

    try {
        out = new RunAsyncTask().execute(Integer.toString(input)).get();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    } 
```

从 AsyncTask 类：

```
protected String doInBackground(String... params) {
    long start, stop;
    long result;
    String out = "";
    int input = Integer.parseInt(params[0]);

    // Dalvik (Java) - Recursive:
    start = System.currentTimeMillis();
    result = FibLib.fibJR(input);
    stop = System.currentTimeMillis(); 
    out += String.format("Dalvik (Java) recursive: %d (%d msec)", result, stop - start);

    // Dalvik (Java) - Iterative:
    start = System.currentTimeMillis();
    result = FibLib.fibJI(input);
    stop = System.currentTimeMillis();
    out += String.format("\nDalvik (Java) iterative: %d (%d msec)", result, stop - start);

    return out 
```

从 FibLib 类（由 AsyncTask 调用）：

```
public class FibLib {
    public static long fibJR(long n) {  // 
        if (n <= 0) {
            return 0;
        }
        if (n == 1) {
            return 1;
        }

        return fibJR(n - 1) + fibJR(n - 2);
    }

    // Java implementation - iterative:
    public static long fibJI(long n) { // 
        long previous = -1;
        long result = 1;

        for (long i = 0; i <= n; i++) {
            long sum = result + previous;
            previous = result;
            result = sum;
        }

        return result;
    } 
```

然而，当运行它时，如果任务不仅仅是一个小而快的任务，主 GUI 线程仍然被锁定并崩溃。我在这里有什么误解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:30:14.730

您正在调用`AsyncTask`'s get() 方法，它实际上将异步调用转换为同步调用，因为它等待操作的结果。将结果返回`AsyncTask`给调用的更好方法`Activity`是使用回调接口。创建一个简单的`interface`，例如：

```
interface OnTaskCompletedListener {
    void onTaskCompleted(Object result);
} 
```

`Activity`现在在您的类中实现该接口：

```
public class MainActivity extends Activity implements OnTaskCompletedListener {} 
```

现在您应该将 传递`MainActivity`给`AsyncTask`对象：

```
AsyncTask task = new RunAsyncTask(onTaskCompletedListener).execute(); 
```

在里面`AsyncTask's onPostExecute()`你将结果返回给监听器：

```
onTaskCompletedListener.onTaskCompleted(result); 
```

现在您可以在您`Activity`的`onTaskCompleted()`方法中使用结果。

希望解释足够清楚，它将对您有所帮助。

# iphone - 我应该如何将我的 ios 应用程序安装到公司的设备上？

> ID：14021323
> 
> 赞同：0
> 
> 时间：2012-12-24T12:19:46.213
> 
> 标签：iphone, ios, ipad

我想为我工作的公司编写应用程序。它只适用于内部资源并且只能通过身份验证。员工应如何安装此应用程序，何时完成？人们通常如何做到这一点（例如餐厅的 ios soft）？我的意思是他们应该使用越狱来安装它吗？我认为苹果不会将我的应用程序添加到存储库，因为它无法检查它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:39:29.580

我知道基本上有两种不同的**官方**iPhone[应用程序分发方法：](http://developer.apple.com/iphone/program/distribute.html)

**- 特别指定**

您可以使用 ad hoc 分发应用程序，而无需通过应用商店，但您最多只能使用 100 台设备。使用这种方法，您可以从网站、电子邮件等分发您的应用程序。您可以通过在配置文件中添加要共享应用程序的所有设备 UDID 来上传应用程序，然后在[testflightapp.com/上生成一个链接](http://testflightapp.com/)

**- 企业**

该方法适用于员工人数超过 500 人的公司的**内部分配。**Apple 没有提供我可以找到的有关此方法的任何更多公开细节。

# perl - 专门搜索和替换脚本

> ID：14021330
> 
> 赞同：-2
> 
> 时间：2012-12-24T12:20:29.940
> 
> 标签：perl, shell, unix

您能否在 perl 或 shell 中提供一个脚本来搜索并将字符串“windows”替换为“android”，仅在某些特定文件夹中，并且字符串应该只在文件中替换，而不是在文件夹名称中替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:44:27.233

```
find . -type f|xargs perl -pi -e 's/windows/android/g' 
```

-type f -this 只会找到文件而不是目录。

管道后的剩余部分将在 teh find 命令返回的所有文件中搜索并用 android 替换 windows

# php - 在 wordpress 中点击多个 JavaScript 函数

> ID：14021332
> 
> 赞同：2
> 
> 时间：2012-12-24T12:20:46.830
> 
> 标签：php, javascript, wordpress

我正在开发一个 wordpress 插件，需要两个函数在不同 ID 上的 onClick 函数上发生。我有这样的代码。

```
echo "<div id='cnote_open'><a id='show-note' onclick='document.getElementById(&quot;website-link-          box&quot;).style.top=&quot;10%&quot;;return false;' >Show Notification</a></div>"; 
```

我想在上面包含以下功能`onClick`。我不想调用一个函数`onClick`并将这两个函数包含在其中。我只想在上面的代码中包含这个函数。

```
onClick='document.getElementById(&quot;dvs_env&quot;).style.display=&quot;block&quot;;return false;' 
```

有没有办法通过单击在不同的 id 上包含多个 JavaScript 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:37:06.593

使用代表的“字符串”定义手动执行此类操作听起来不太好。您应该考虑使用像[jQuery](http://api.jquery.com/category/Events/)这样的 Javascript 库，然后您应该考虑使用[事件链](https://stackoverflow.com/questions/451795/jquery-event-chaining)。

提供的两个链接都应该为您提供实现目标所需的所有信息。

希望这可以帮助。

# wix - Can we set dynamic value to Key attribute of RegistryKey element in WIX?

> ID：14021337
> 
> 赞同：0
> 
> 时间：2012-12-24T12:21:11.323
> 
> 标签：wix

I need to set Key attribute value at run time.

```
<RegistryKey Root="HKLM" Key="Software\ApplicationName"> 
```

I will get application name from the user. I want to append application name with default key.

For example: if the application name is test then key should be "Software\Test"

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:11:12.450

This can be achieved in 2 simple steps:

1.  Declare your `<RegistryKey>` element like this:

    `<RegistryKey Root="HKLM" Key="Software\[APPLICATIONNAME]"> ... </RegistryKey>`

2.  Save the user input to the `APPLICATIONNAME` property

# magento - 如何根据域限制 magento 扩展的使用？

> ID：14021343
> 
> 赞同：0
> 
> 时间：2012-12-24T12:21:47.277
> 
> 标签：magento

我正在研究我需要限制到特定域的 magento 扩展。意味着如果客户购买了单个域的扩展，那么他不能将相同的代码用于未向我们注册的另一个域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:25:02.623

在我的脑海中，我认为你应该选择一个观察者`controller_action_predispatch`来持续监控当前的基本 URL，然后在模块没有使用正确的基本 URL 时禁用它。

[http://gabrielsomoza.com/magento/disabling-a-module-and-its-output-programmatically/](http://gabrielsomoza.com/magento/disabling-a-module-and-its-output-programmatically/)

但是，您还需要一种机制来拥有一个唯一的分发 ID，然后将其与远程服务进行比较，然后执行上述操作。有很多方法可以做到这一点，我更喜欢 RESTful 接口或 XML-RPC 服务来做到这一点。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:37:15.990

这是无法实现的。

有几种方法可以实现 DRM 之类的东西，但一切都很糟糕。您可以随时致电您的服务器以检查序列号。可以肯定的是，买家不会删除您的支票，您必须加密您的代码。

所有这些都很糟糕，并使处理速度变慢。出售您的扩展程序，但不要像音乐行业那样打扰您的客户。

# c++ - Wireshark 不会检测到任何发送的数据包。发送返回 0

> ID：14021347
> 
> 赞同：0
> 
> 时间：2012-12-24T12:22:07.537
> 
> 标签：c++, c, sockets, wireshark, raw-sockets

我一直在尝试在以下代码中使用原始套接字发送数据包。我在互联网的某个地方找到了这段代码。我创建了自己的 ipheader 和 udp 标头。整个数据包使用原始套接字上的 sendto() 函数发送。sendto() 返回 0。这意味着从其中发送了一个长度为 0 的数据包，因此即使是 Wireshark 也没有检测到任何数据包。我的错误在哪里？

```
// Must be run by root lol! Just datagram, no payload/data
#include <unistd.h>
#include <stdio.h>
#include <string.h>
#include <cstdlib>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <netinet/ip.h>
#include <netinet/udp.h>

// The packet length
#define PCKT_LEN 35

// Can create separate header file (.h) for all headers' structure
// The IP header's structure
struct ipheader {
    unsigned char      iph_ihl:4, iph_ver:4;
    unsigned char      iph_tos;
    unsigned short int iph_len;
    unsigned short int iph_ident;
    unsigned char      iph_flag;
    unsigned short int iph_offset;
    unsigned char      iph_ttl;
    unsigned char      iph_protocol;
    unsigned short int iph_chksum;
    unsigned int       iph_sourceip;
    unsigned int       iph_destip;
};

// UDP header's structure
struct udpheader {
    unsigned short int udph_srcport;
    unsigned short int udph_destport;
    unsigned short int udph_len;
    unsigned short int udph_chksum;
};
// total udp header length: 8 bytes (=64 bits)

// Function for checksum calculation. From the RFC,
// the checksum algorithm is:
//  "The checksum field is the 16 bit one's complement of the one's
//  complement sum of all 16 bit words in the header.  For purposes of
//  computing the checksum, the value of the checksum field is zero."
unsigned short csum(unsigned short *buf, int nwords)
{       //
    unsigned long sum;
    for(sum=0; nwords>0; nwords--)
        sum += *buf++;
    sum = (sum >> 16) + (sum &0xffff);
    sum += (sum >> 16);
    return (unsigned short)(~sum);
}

// Source IP, source port, target IP, target port from the command line arguments
int main(int argc, char *argv[])
{
    int sd;
    // No data/payload just datagram
    char buffer[PCKT_LEN];
    // Our own headers' structures
    struct ipheader *ip = (struct ipheader *) buffer;
    struct udpheader *udp = (struct udpheader *) (buffer + sizeof(struct ipheader));
    // Source and destination addresses: IP and port
    struct sockaddr_in sin, din;
    int one = 1;
    const int *val = &one;

    memset(buffer, 0, PCKT_LEN);

    if(argc != 5)
    {
        printf("- Invalid parameters!!!\n");
        printf("- Usage %s <source hostname/IP> <source port> <target hostname/IP> <target port>\n", argv[0]);
        exit(-1);
    }

    // Create a raw socket with UDP protocol
    sd = socket(PF_INET, SOCK_RAW, IPPROTO_UDP);
    if(sd < 0)
    {
        perror("socket() error");
        // If something wrong just exit
        exit(-1);
    }
    else
        printf("socket() - Using SOCK_RAW socket and UDP protocol is OK.\n");

    // The source is redundant, may be used later if needed
    // The address family
    sin.sin_family = AF_INET;
    din.sin_family = AF_INET;
    // Port numbers
    sin.sin_port = htons(atoi(argv[2]));
    din.sin_port = htons(atoi(argv[4]));
    // IP addresses
    sin.sin_addr.s_addr = inet_addr(argv[1]);
    din.sin_addr.s_addr = inet_addr(argv[3]);

    // Fabricate the IP header or we can use the
    // standard header structures but assign our own values.
    ip->iph_ihl = 5;
    ip->iph_ver = 4;
    ip->iph_tos = 16; // Low delay
    ip->iph_len = sizeof(struct ipheader) + sizeof(struct udpheader);
    ip->iph_ident = htons(54321);
    ip->iph_ttl = 64; // hops
    ip->iph_protocol = 17; // UDP
    // Source IP address, can use spoofed address here!!!
    ip->iph_sourceip = inet_addr(argv[1]);
    // The destination IP address
    ip->iph_destip = inet_addr(argv[3]);

    // Fabricate the UDP header. Source port number, redundant
    udp->udph_srcport = htons(atoi(argv[2]));
    // Destination port number
    udp->udph_destport = htons(atoi(argv[4]));
    udp->udph_len = htons(sizeof(struct udpheader));
    // Calculate the checksum for integrity
    ip->iph_chksum = csum((unsigned short *)buffer, sizeof(struct ipheader) + sizeof(struct udpheader));
    // Inform the kernel do not fill up the packet structure. we will build our own...
    if(setsockopt(sd, IPPROTO_IP, IP_HDRINCL, val, sizeof(one)) < 0)
    {
        perror("setsockopt() error");
        exit(-1);
    }
    else
        printf("setsockopt() is OK.\n");

    // Send loop, send for every 2 second for 100 count
    printf("Trying...\n");
    printf("Using raw socket and UDP protocol\n");
    printf("Using Source IP: %s port: %u, Target IP: %s port: %u.\n", argv[1], atoi(argv[2]), argv[3], atoi(argv[4]));

    int count;
    int i;
    for(count = 1; count <=20; count++)
    {
        if(i = sendto(sd, buffer, PCKT_LEN, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)
        // Verify
        {
            perror("sendto() error");
            exit(-1);
        }
        else
        {
            printf("Count #%u - sendto() is OK. Data Length#%d\n", count,i);
            sleep(2);
        }
    }
    close(sd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T12:32:26.377

啊哈！我至少得到了一部分。

`i = sendto(sd, buffer, PCKT_LEN, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0` 是相同的 `i = (sendto(sd, buffer, PCKT_LEN, 0, (struct sockaddr *)&sin, sizeof(sin)) < 0)`

你可能想要： `(i = sendto(sd, buffer, PCKT_LEN, 0, (struct sockaddr *)&sin, sizeof(sin))) < 0`

您可能想要：

1.  在你的编译器中打开警告——至少如果你使用 gcc，那应该会给你一个警告，以便在同一个 if 语句中进行比较和分配。
2.  使用固定代码重试。

我敢肯定您的代码中也可能存在其他问题-我不是网络专家。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T12:29:16.570

真的很难阅读这段代码并理解你在做什么以及为什么要这样做。所以我可以推荐你看看我的一段代码：[dhcp client implementation](https://github.com/fycth/DHCP-server-scanner/blob/master/src/dhcpd-detector.c)

查看函数 getSock() 以了解如何创建套接字，并查看函数 talker() 以了解如何形成和发送完成的数据包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T16:15:11.060

本地 IP 标头结构错误...我的建议是包含您的发行版提供的 IP 标头（您使用的是 linux 吗？不是吗？）。

我所做的只是包含 linux/ip.h，将 ipheader 结构引用重命名为 iphdr，并根据后一个文件中描述的结构重命名 ip 标头字段。

我试图用 tcpdump 嗅探数据包，它现在可以工作（我没有尝试使用 wireshark，但它也必须工作）

试试这个固定代码：

```
// Must be run by root lol! Just datagram, no payload/data
#include <unistd.h>
#include <stdio.h>
#include <string.h>
#include <arpa/inet.h>
#include <sys/socket.h>
#include <netinet/udp.h>
#include <linux/ip.h>

// The packet length
#define PCKT_LEN 35

// UDP header's structure
struct udpheader {
    unsigned short int udph_srcport;
    unsigned short int udph_destport;
    unsigned short int udph_len;
    unsigned short int udph_chksum;
};
// total udp header length: 8 bytes (=64 bits)

// Function for checksum calculation. From the RFC,
// the checksum algorithm is:
//  "The checksum field is the 16 bit one's complement of the one's
//  complement sum of all 16 bit words in the header.  For purposes of
//  computing the checksum, the value of the checksum field is zero."
unsigned short csum(unsigned short *buf, int nwords)
{       //
    unsigned long sum;
    for(sum=0; nwords>0; nwords--)
        sum += *buf++;
    sum = (sum >> 16) + (sum &0xffff);
    sum += (sum >> 16);
    return (unsigned short)(~sum);
}

// Source IP, source port, target IP, target port from the command line arguments
int main(int argc, char *argv[])
{
    int sd;
    // No data/payload just datagram
    char buffer[PCKT_LEN];
    // Our own headers' structures
    struct iphdr *ip = (struct iphdr *) buffer;
    struct udpheader *udp = (struct udpheader *) (buffer + sizeof(struct iphdr));
    // Source and destination addresses: IP and port
    struct sockaddr_in sin, din;
    int one = 1;
    const int *val = &one;

    memset(buffer, 0, PCKT_LEN);

    if(argc != 5)
    {
        printf("- Invalid parameters!!!\n");
        printf("- Usage %s <source hostname/IP> <source port> <target hostname/IP> <target port>\n", argv[0]);
        exit(-1);
    }

    // Create a raw socket with UDP protocol
    sd = socket(PF_INET, SOCK_RAW, IPPROTO_UDP);
    if(sd < 0)
    {
        perror("socket() error");
        // If something wrong just exit
        exit(-1);
    }
    else
        printf("socket() - Using SOCK_RAW socket and UDP protocol is OK.\n");

    // The source is redundant, may be used later if needed
    // The address family
    sin.sin_family = AF_INET;
    din.sin_family = AF_INET;
    // Port numbers
    sin.sin_port = htons(atoi(argv[2]));
    din.sin_port = htons(atoi(argv[4]));
    // IP addresses
    sin.sin_addr.s_addr = inet_addr(argv[1]);
    din.sin_addr.s_addr = inet_addr(argv[3]);

    // Fabricate the IP header or we can use the
    // standard header structures but assign our own values.
    ip->ihl = 5;
    ip->version = 4;
    ip->tos = 16; // Low delay
    ip->tot_len = sizeof(struct iphdr) + sizeof(struct udpheader);
    ip->id = htons(54321);
    ip->ttl = 64; // hops
    ip->protocol = 17; // UDP
    // Source IP address, can use spoofed address here!!!
    ip->saddr = inet_addr(argv[1]);
    // The destination IP address
    ip->daddr = inet_addr(argv[3]);

    // Fabricate the UDP header. Source port number, redundant
    udp->udph_srcport = htons(atoi(argv[2]));
    // Destination port number
    udp->udph_destport = htons(atoi(argv[4]));
    udp->udph_len = htons(sizeof(struct udpheader));

    // Calculate the checksum for integrity
    ip->check = csum((unsigned short *)buffer, sizeof(struct iphdr) + sizeof(struct udpheader));

    // Inform the kernel do not fill up the packet structure. we will build our own...
    if(setsockopt(sd, IPPROTO_IP, IP_HDRINCL, val, sizeof(one)) < 0)
    {
        perror("setsockopt() error");
        exit(-1);
    }
    else
        printf("setsockopt() is OK.\n");

    // Send loop, send for every 2 second for 100 count
    printf("Trying...\n");
    printf("Using raw socket and UDP protocol\n");
    printf("Using Source IP: %s port: %u, Target IP: %s port: %u.\n", argv[1], atoi(argv[2]), argv[3], atoi(argv[4]));

    int count;
    int i;
    for(count = 1; count <=20; count++)
    {
        if((i = sendto(sd, buffer, PCKT_LEN, 0, (struct sockaddr *)&sin, sizeof(sin))) < 0)
        // Verify
        {
            perror("sendto() error");
            exit(-1);
        }
        else
        {
            printf("Count #%u - sendto() is OK. Data Length# %d\n", count,i);
            sleep(2);
        }
    }
    close(sd);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-08T05:44:29.610

我猜你是基于[这个示例代码](https://www.tenouk.com/Module43a.html)，它有多个致命的错误。它浪费了我生命中的许多小时。

但是为了回答这个特定的问题（并帮助任何不幸尝试使用该代码的人），阻止您在wireshark中看到数据包的错误在这里：

```
sin.sin_addr.s_addr = inet_addr(argv[1]); 
```

这会将用于发送数据包的地址设置为`sentdo()`源*地址*。因此，数据包通过环回接口发送，并且无处可去。（如果您捕获 /loopback 接口，Wireshark 或其他捕获工具*将*能够看到数据包`lo`，fwiw。）

所以这个特定程序的更正行是：

```
sin.sin_addr.s_addr = inet_addr(argv[3]); 
```

# .net - 无法更改 ServiceDefinition 文件

> ID：14021348
> 
> 赞同：4
> 
> 时间：2012-12-24T12:22:12.577
> 
> 标签：.net, visual-studio-2010, azure

在我安装了**最新的 Azure SDK for .Net - 2012 年 10 月**之后，我无法更改`ServiceDefinition.csdef`文件。

B'cos 我需要注释掉这一`<!--<Binding name="HttpsIn" endpointName="HttpsIn" hostHeader="www.pawloyalty.com" />-->`行。

**编译后**它给出了下面提到的消息。即使消息说文件已在源编辑器之外进行了修改。实际上**我在源代码编辑器中做了**（withing **vs 2010**）。

![在此处输入图像描述](../Images/cf83a8f234ae9f47e35cecf51de5c69b.png)

**ServiceDefinition.csdef**文件如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  **********************************************************************************************

  This file was generated by a tool from the project file: ServiceDefinition.csdef

  Changes to this file may cause incorrect behavior and will be lost if the file is regenerated.

  **********************************************************************************************
-->
<ServiceDefinition name="PawLoyalty.Web.Azure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
    <WebRole name="PawLoyalty.Web" vmsize="Medium">
        <Startup priority="-2">
            <Task commandLine="startuptasks/settime.cmd" executionContext="elevated" taskType="simple" />
            <Task commandLine="Microsoft.WindowsAzure.Caching\ClientPerfCountersInstaller.exe install" executionContext="elevated" taskType="simple" />
            <Task commandLine="Microsoft.WindowsAzure.Caching\ClientPerfCountersInstaller.exe install" executionContext="elevated" taskType="simple" />
        </Startup>
        <Sites>
            <Site name="Web">
                <Bindings>
                    <Binding name="HttpIn" endpointName="HttpIn" hostHeader="www.pawloyalty.com" />
                    <Binding name="HttpsIn" endpointName="HttpsIn" hostHeader="www.pawloyalty.com" />
                </Bindings>
            </Site>
        </Sites>
        <ConfigurationSettings>
            <Setting name="Blob" />
            <Setting name="CDN" />
            <Setting name="ConnectionString" />
            <Setting name="Microsoft.WindowsAzure.Plugins.Caching.ClientDiagnosticLevel" />
        </ConfigurationSettings>
        <Endpoints>
            <InputEndpoint name="HttpIn" protocol="http" port="80" />
        </Endpoints>
        <Certificates></Certificates>
        <Imports>
            <Import moduleName="Diagnostics" />
            <Import moduleName="RemoteAccess" />
            <Import moduleName="RemoteForwarder" />
            <Import moduleName="Caching" />
        </Imports>
        <LocalResources>
            <LocalStorage name="ExcelStorage" cleanOnRoleRecycle="false" sizeInMB="250" />
            <LocalStorage name="Microsoft.WindowsAzure.Plugins.Caching.FileStore" sizeInMB="1000" cleanOnRoleRecycle="false" />
            <LocalStorage name="DiagnosticStore" sizeInMB="20000" cleanOnRoleRecycle="false" />
        </LocalResources>
    </WebRole>
</ServiceDefinition> 
```

为什么？

如何更改 `ServiceDefinition.csdef`文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T13:12:15.370

文件顶部的大警告是您的第一个提示。

```
<!--
  **********************************************************************************************

  This file was generated by a tool from the project file: ServiceDefinition.csdef

  Changes to this file may cause incorrect behavior and will be lost if the file is regenerated.

  **********************************************************************************************
--> 
```

基本上这个文件是在构建过程中基于其他东西为你生成的。在 Windows Azure 的情况下，它的角色配置设置。

1）关闭该文件选项卡（您永远不会直接更改该文件）
2）展开“角色”文件夹
3）双击要更改的角色
4）在新属性对话框中，单击端点
5）删除你不想。

![在此处输入图像描述](../Images/1ea3ff258409100373d6083a27c4b827.png) ![在此处输入图像描述](../Images/cec5880c965c3e36692168177195fa42.png)

# javascript - 两个随机数

> ID：14021351
> 
> 赞同：1
> 
> 时间：2012-12-24T12:22:43.280
> 
> 标签：javascript, random

> **可能重复：**
> [生成 0 - 9 之间的随机数，但不是 6](https://stackoverflow.com/questions/14017124/generate-random-between-0-9-but-not-6)

```
var ifanse=Math.floor(Math.random()*4)+1; 

var ifanse2=Math.floor(Math.random()*3)+1 
```

这是 2 个随机数。有时它们相等，但是如果`ifanse`等于，有什么办法`ifanse2`，它将重新生成 3-1 之间的随机数，但不包括`ifanse2`。或者有什么办法可以避免一开始就等于？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:25:47.613

你可以循环，直到你选择一个不同的数字：

```
var ifanse=Math.floor(Math.random()*4)+1; 
var ifanse2=Math.floor(Math.random()*3)+1;
while (ifanse2 == ifanse)
{
   ifanse2=Math.floor(Math.random()*3)+1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T12:46:48.353

例如，您可以编写一个通用函数，它为您提供一个随机数数组

*   用您的范围内的数字填充和排列*这将消除重复的数字*
*   改组数组
*   返回一个长度的数组，其中包含您想要的随机数的计数

* * *

```
 function genRand(min, max, cnt) {
      var arr = [];
      for (var i = min, j = 0; i <= max; j++, i++)
      arr[j] = i
      arr.sort(function () {
          return Math.floor((Math.random() * 3) - 1)
      });

      return arr.splice(0, cnt)
  }

console.log(genRand(0, 3, 2)) // e.g [0,3] 
```

然后你可以将它们存储在你的 var 中，或者直接从`rands`

```
var rands = genRand(0,3,2);
var ifanse = rands[0]
var ifanse2 = rands[1] 
```

你永远不会得到 2 个相等的数字，如果你需要的话，你可以生成超过 2 个不同的兰特。

这是一个[Jsbin](http://jsbin.com/avovox/1/edit)

# php - php shell exec 与直接运行命令不同

> ID：14021352
> 
> 赞同：2
> 
> 时间：2012-12-24T12:22:52.890
> 
> 标签：php, bash, svn

我有一个 php 脚本，它试图从目录结构中删除所有文件，但将所有内容保留在 svn 中。我在网上找到了这个命令，如果你直接将它插入 shell，它就可以完美地完成工作

```
find /my/folder/path/ -path \'*/.svn\' -prune -o -type f -exec rm {} + 
```

不幸的是，如果我在 php 中对该命令执行 shell_exec，如下所示：

```
$cmd = 'find $folderPath -path \'*/.svn\' -prune -o -type f -exec rm {} +';
shell_exec($cmd); 
```

然后，我调用 php 脚本的当前目录中的所有文件也将被删除。

有人可以解释为什么，以及如何解决这个问题，以便我可以修复 php 脚本，使其像预期的那样运行，只删除指定文件夹中的那些文件

完整的源代码如下，以防万一我错过了一个愚蠢的错误：

```
<?php

# This script simply removes all files from a specified folder, that aren't directories or .svn 
# files. It will see if a folder path was given as a cli parameter, and if not, ask the user if they 
# want to remove the files in their current directory.

$execute = false;

if (isset($argv[1]))
{
    $folderPath = $argv[1];
    $execute = true;
}
else
{
    $folderPath = getcwd();
    $answer = readline("Remove all files but not folders or svn files in $folderPath (y/n)?" . PHP_EOL);

    if ($answer == 'Y' || $answer == 'y')
    {
        $execute = true;
    }
}

if ($execute)
{
    # Strip out the last / if it was given by accident as this can cause deletion of wrong files
    if (substr($folderPath, -1) != '/')
    {
        $folderPath .= "/";
    }

    print "Removing files from $folderPath" . PHP_EOL;
    $cmd = 'find $folderPath -path \'*/.svn\' -prune -o -type f -exec rm {} +';
    shell_exec($cmd);
}
else
{
    print "Ok not bothering." . PHP_EOL;
}

print "Done" . PHP_EOL;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:46:47.390

你的命令看起来不错。至少在外壳中。如果你真的想用一个简单的方法来解决你在 PHP 中的问题

```
var_dump($cmd); 
```

你会看到你的错误在哪里：

```
$cmd = 'find $folderPath -path \'*/.svn\' -prune -o -type f -exec rm {} +'; 
```

仔细看。提示：[一美元不能赚双倍](http://php.net/string)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:47:28.893

这一切都归结为：

```
$cmd = 'find $folderPath -path \'*/.svn\' -prune -o -type f -exec rm {} +';
shell_exec($cmd); 
```

由于您使用的是单引号，因此变量`$folderPath`不会更改。所以你正在执行

```
find $folderPath -path '*/.svn' -prune -o -type f -exec rm {} + 
```

代替

```
find /my/folder/path/ -path \'*/.svn\' -prune -o -type f -exec rm {} + 
```

使用双引号或`$cmd = 'find '.$folderPath.' -path \'*/.svn\' -prune -o -type f -exec rm {} +';`

# java - 仅打印一次 arrayList 中的重复项

> ID：14021357
> 
> 赞同：0
> 
> 时间：2012-12-24T12:23:13.383
> 
> 标签：java

我有一个arrayList（名为error_dub）我只想打印一次重复这是我的代码

```
for(x=0 ; x<=error_dub.size()-1 ; x++){

     for(int h=x+0 ; h<=error_dub.size() ; h++){

            if(error_dub.get(x).equals(error_dub.get(h) && x!=h){

                 System.out.println(error_dub.get(x)+" is duplicated ");
              }
       }
  } 
```

在这里，这条线被打印了不止一次，那么我怎么能只打印一次呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T12:26:25.680

使用两组（假设`X`是您的对象的类）：

```
// Returns a set of all duplicates in a list
public Set<X> getDuplicates(final List<X> list)
{
    final Set<X> dups = new HashSet<X>();
    final Set<X> set = new HashSet<X>();

    /*
     * Cycle through all elements in the original list. Add it to "set":
     *
     * - if the .add() method returns true, this is the first time the element is seen;
     * - if it returns false, then this is not the first time, it is a duplicate:
     *   add it to "dups".
     */
    for (final X element: list)
        if (!set.add(element))
            dups.add(element);

    return dups;
} 
```

*如果操作未修改*集合，则集合`.add()`将返回 false ，这意味着元素是否已经存在。

 *将该函数复制/粘贴到您现有的代码中，并将上面的代码段替换为：

```
for (final X dup: getDuplicates(error_dub))
    System.out.println(dup + " is duplicated"); 
```

**重要说明**：`getDuplicates()`编写的函数不会尊重元素顺序。如果顺序对您很重要，请`dups`用 a`LinkedHashSet`而不是 a替换`HashSet`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:31:12.497

您可以使用`.add()`set 方法检查重复项。下面发布的方法将列表元素添加到 set1。如果元素是重复的（`.add()`返回 true），则将元素添加到`setToReturn`

```
public Set<Integer> findDuplicates(List<Integer> listContainingDuplicates)
{
    final Set<Integer> setToReturn = new HashSet();
    final Set<Integer> set1 = new HashSet();

    for (Integer yourInt : listContainingDuplicates)
    {
        if (!set1.add(yourInt))
        {
            setToReturn.add(yourInt);
        }
    }
    return setToReturn;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:00:07.073

```
 ArrayList<String> ar=new ArrayList<String>();
    ArrayList<String> ar2=new ArrayList<String>();

    ar.add("1");
    ar.add("2");
    ar.add("3");
    ar.add("4");
    ar.add("5");
    ar.add("1");
    ar.add("2");
    ar.add("1");

    for(int x=0;x<ar.size();x++)
    {
        if(!ar2.contains(ar.get(x)))
        {
             for(int y=x+1;y<ar.size()-1;y++)
            {

                  if((ar.get(y).equals(ar.get(x))))
                {
                    System.out.print("repeating "+ar.get(x));
                    ar2.add(ar.get(x));
                    break;

                }  

            } 

        } 

    } 
```

你可以这样做。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-05T05:29:56.690

```
//method to identify the duplicate elements in array list
import java.util.ArrayList;
import java.util.HashSet;
import java.util.Scanner;
public class Dup 
{
public static void main(String[] args)
{
ArrayList<Integer> a=new ArrayList<Integer>();
System.out.println("enter elements");
int g;
Scanner b= new Scanner(System.in);
for(int i=0;i<10;i++)
{
g=b.nextInt();   
a.add(g);
}
HashSet<Integer> c=new HashSet<Integer>();
ArrayList<Integer> d=new ArrayList<Integer>();
for (Integer y : a)
{
if (c.contains(y))
{
d.add(y);
}
else
c.add(y);
}
System.out.println("original elements are:"+c);
System.out.println("duplicate elements are:");
for(Integer h:d)
{
System.out.println(h);
}
}
} 
```*

# web-applications - 类似于 Web 开发的“旧”视觉基础

> ID：14021359
> 
> 赞同：0
> 
> 时间：2012-12-24T12:23:27.317
> 
> 标签：web-applications, language-agnostic

你还记得以前的“好”时代，当你制作一个应用程序时，你基本上只使用一种语言？嗯，这并不完全正确，因为你总是需要到处挤一些 sql，但基本上 90% 的时间你的应用程序只有一种语言。无论是 Visual Basic、Delphi、PowerBuilder 还是 C++，我喜欢桌面应用程序的恰恰是：在我看来，一个坏的抽象胜过五个好的抽象。好吧，你可以同意也可以不同意，但事实是，要制作一个 web 应用程序，你需要 sql、php（或 c#、java、ruby 或其他任何语言）、javascript、HTML 和 CSS。我想知道是否存在抽象所有这些语言的东西，并让我们将 Web 应用程序创建为桌面应用程序。你知道这样的技术吗？如果是开源且稳定的，则加分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:37:51.023

我相信您所要求的可以使用 Clojure 生态系统中的库来构建。基本构建块将包括

*   [一个围绕 HTTP 的包装器](https://stackoverflow.com/questions/9950056/noir-vs-compojure)，
*   [一个负责与关系数据库交互的库](https://stackoverflow.com/questions/294802/use-a-database-with-clojure)，
*   [HTML 生成器或模板引擎](https://stackoverflow.com/questions/6474926/clojure-web-framework-for-designers-front-end-devs)，
*   [一个 DSL 抽象出 CSS 的噩梦](https://stackoverflow.com/questions/11272262/clojure-dsl-for-css)，并且
*   [ClojureScript](https://github.com/clojure/clojurescript)，它将 Clojure 编译为 JavaScript。

因此，您的问题中列出的所有语言都将隐藏在用 Clojure 编写的抽象后面，包括应用程序的后端和前端。

我无法向您指出任何可以完全解决您所描述问题的完整 Web 应用程序堆栈。原因是在 Clojure 生态系统中，构建和发布专注于单个问题的小型库是常规做法。因此，您可以自由选择最适合您的用例的工具子集。你没有得到[大猩猩和丛林](http://www.johndcook.com/blog/2011/07/19/you-wanted-banana/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:59:49.317

我相信[GWT](https://developers.google.com/web-toolkit)可能是您正在寻找的东西。您使用为您生成的 JavaScript 编写 Java 代码。它也[比 Clojure 得到更广泛的支持](http://googlefight.com/index.php?lang=en_GB&word1=gwt&word2=clojure)。

# clojure - Leiningen 是否有“本机依赖项”插件？

> ID：14021360
> 
> 赞同：3
> 
> 时间：2012-12-24T12:23:37.947
> 
> 标签：clojure, leiningen

我的意思是一个表现得像[这个 maven 插件](http://code.google.com/p/mavennatives/)。我使用的几个库都遵循该插件的约定，尽管可能，手动扫描依赖图以查找本机依赖项并手动解包它们是相当烦人的。

或者，如果它不存在，我可能会自己编写（似乎并不难做到），但是这样做的一些指示会很棒 - 我想我必须在这里使用石榴？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:49:58.297

Leiningen 支持开箱即用的原生依赖项，只需根据规范打包它们，

[http://nakkaya.com/2010/04/05/managing-native-dependencies-with-leiningen/](http://nakkaya.com/2010/04/05/managing-native-dependencies-with-leiningen/)

# extjs - extjs中的无限滚动

> ID：14021364
> 
> 赞同：1
> 
> 时间：2012-12-24T12:23:45.100
> 
> 标签：extjs

我正在使用 extjs 4.1 无限滚动，其中数据动态来自服务器。但问题是它不能正常工作。数据之后会显示一些空白，并且在加载符号出现一段时间后。

我猜这背后的原因是未获取的数据等于商店中定义的页面大小。从服务器获取的记录是随机的，但不会跨越页面大小。

请建议我必须使用哪些配置来解决此问题。

```
pageSize: 200,
leadingBufferZone: 400,
buffered: true,
remoteGroup: true,
purgePageCount: 5, 
```

谢谢，萨钦

# google-drive-api - 谷歌驱动器公用文件夹网站托管错误页面

> ID：14021368
> 
> 赞同：0
> 
> 时间：2012-12-24T12:24:13.503
> 
> 标签：google-drive-api

我已将我的小型静态网站从 Google Apps Engine 移动到我的 Google Drive 的公共文件夹中。

目前，如果发生 404 错误，我会找不到标准页面，但如果可能的话，我希望显示我自己的错误页面。

有没有办法自定义错误页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:31:46.510

抱歉，不支持自定义错误页面。

# javascript - 在 JavaScript 中从高位和低位 32 位部分创建 64 位整数时如何防止值过大？

> ID：14021369
> 
> 赞同：0
> 
> 时间：2012-12-24T12:24:21.170
> 
> 标签：javascript, integer, 64-bit, precision, sanity-check

因此 JavaScript 整数是 64 位浮点值，因此可以精确地支持从 -2 ^(53)到 +2 ^(53)（-9,007,199,254,740,992 到 +9,007,199,254,740,992）的值。

您可以在我们非常有趣的主题中阅读所有相关信息：[什么是 JavaScript 的 Max Int？Number 可以达到的最高 Integer 值是多少而不会丢失精度？](https://stackoverflow.com/questions/307179)

在我的项目中，我需要 64 位偏移到非常大的文件中。我可以通过组合一对高低 32 位值来制作这些。我不需要完整的 64 位范围，所以 JavaScript 的限制很好。

但我不知道该怎么做是如何健全地检查给定的一对 32 位值不会导致超出 JavaScript 范围的数字。

我怎么能检查这个？我认为对于超出此范围的数字可能是最棘手的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:34:29.200

我们只需要检查是否有任何高于第 53 位的 ON 位，或高于高 32 位部分的第 21 位。

只需取高 32 位和`&`with `~((1 << 21) - 1)`（这将清除 32 位的所有低 21 位）来检查是否有任何位超过限制。如果结果为 0，则该数字将在限制范围内。

# android - 使用 android facebook SDK 获取好友兴趣

> ID：14021370
> 
> 赞同：0
> 
> 时间：2012-12-24T12:24:24.007
> 
> 标签：android, facebook, facebook-android-sdk

在我的应用程序中，我的目的是获得朋友的一些兴趣，例如音乐、书籍、电视。此信息是公开的。为此，我认为我不需要发送许可。基于 facebook (poor) 文档，主要是这个链接： [Field Expansion](http://developers.facebook.com/docs/reference/api/field_expansion/) to get friend interest 我只需要在扩展的朋友字段中传递朋友 ID。在 GraphExplorer 上做一些测试，我看到它创建了以下查询来从某个朋友那里获取电影：

```
MY_ID?fields=friends.uid(FRIEND_ID).fields(movies) 
```

我使用它并在 Request.newMyFriendRequest 上异步执行此代码：

```
Session activeSession = Session.getActiveSession();
    if(activeSession.getState().isOpened()){
        Request request = Request.newMyFriendsRequest(activeSession, 
            new GraphUserListCallback(){
                @Override
                public void onCompleted(List<GraphUser> users, Response response){
                    GraphUser user = users.get(0);
                    JSONObject friendLikes = user.getInnerJSONObject();
                    try {
                        JSONArray data = friendLikes.getJSONObject("friends").getJSONArray("data");
                        Log.i("JSON", friendLikes.toString());
                        addInterests(data, 0);
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
        });
        Bundle bundle = new Bundle();
        bundle.putString("fields", "friends.uid("+friendID+").fields(movies)");
        request.setParameters(bundle);
        request.executeAsync(); 
```

每次执行此代码时，我都会从 JSON 收到以下错误：W/System.err(694): org.json.JSONException: No value for friends。如果这不是使用 GraphAPI 获得朋友兴趣的方法，我需要做什么才能获得这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:30:12.577

**[编辑]**解决了在登录时发布friends_likes 权限的问题。权限不在请求内发送。我修改了一些我的解决方案。如果有人感兴趣：

```
String fqlQuery = "SELECT music, books, movies FROM user where uid ="+friendID;
        Bundle bundle = new Bundle();
        bundle.putString("q", fqlQuery);
        Request request = new Request(activeSession, "/fql", bundle, HttpMethod.GET, 
            new Request.Callback() {
                @Override
                public void onCompleted(Response response) {
                    // TODO Auto-generated method stub
                    Log.i("INFO", response.toString());
                }
            });
        Request.executeBatchAsync(request); 
```

# python - 为什么我在服务器上部署 django 时无法打开任何端口，但我的测试程序可以在我自己的机器上运行

> ID：14021373
> 
> 赞同：1
> 
> 时间：2012-12-24T12:24:35.190
> 
> 标签：python, django, web

我正在学习django做一个测试网站，我可以在自己的笔记本上运行网站，用浏览器访问 127.0.0.1 ，就可以了

但是当我在我的服务器上做同样的事情时，我买了一个vps和一个域，我就是无法telnet端口，浏览器也无法连接，我不知道为什么

我执行以下操作

```
python manage.py runserver 8080 
```

在我的笔记本电脑上，8080端口可以通过telnet连接，但在我的服务器上，它不能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:39:42.487

两件事情。

首先，正如[文档](https://docs.djangoproject.com/en/1.4/ref/django-admin/#runserver-port-or-address-port)所解释的，默认情况下 runserver 只绑定到 localhost 接口，这意味着它只能在同一台机器上运行的浏览器上使用。为了让它在本地机器之外可见，你需要绑定到一个外部可见的地址，或者 0.0.0.0 用于所有地址：

```
python manage.py runserver 0.0.0.0:8080 
```

其次，正如文档还解释的那样，无论如何您都不应该尝试在生产环境中使用开发服务器。使用适当的网络服务器，例如 Apache + mod_wsgi。

# javascript - 转换字符串（算术运算）

> ID：14021375
> 
> 赞同：2
> 
> 时间：2012-12-24T12:24:48.760
> 
> 标签：javascript

我需要转换`"100% - 1"`到`300 - 1`哪里 300 - 画布宽度？如何评估（批处理）此操作？

```
//for example:
var value = batch("100% - 1", canvas.width); //Must 299, because canvas.width is 300
var secondary = batch("50% + 10", canvas.width); //Must 160
//where first argument - arithmetic operation, second - relativity value. 
```

这个问题不属于科幻小说的范畴，而是一个非常严肃和现实的问题。

**更新！**但如果只需要转换百分比？

```
var value = hack("75%", 300); //Must 255
var operation = hack("30%", 100) + 10; //Must 40
var end = hack("1em", somearg); //EM? 
```

**更新2！**什么意志，如果我使用`new Function("a", "b", "return (%%Expression%%)")`而不是`eval`？

例如：

```
var operation = "90% - 10"; 
```

至：

```
new Function("a", "return ((a * 90 / 100) - 10)"); 
```

怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:35:39.200

如果*批次*中有两个部分，第一个总是一个百分比，第二个是一个值，那么你可以这样做

```
function batch(operation, value){
    var values = operation.match(/\d+|[+-/*]/g),
        percent = parseFloat(values[0])/100,
        relative = parseFloat(values[2]),
        math = values[1],
        applied = percent*value;

     switch(math){
         case '+': return applied + relative; 
         case '-': return applied - relative;
         case '/': return applied / relative;
         case '*': return applied * relative;
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:32:37.267

您可以使用替换和简单的垫子规则，

100% 的宽度实际上是 (100 / 100 * width) 所以你可以做以下事情。

```
function batch(calcStr, objWidth)
{
calcStr = calcStr.replace("%", "/100*" + objWidth);
var newWidth = eval(calcStr); 
// The + 10 or -1 are already there...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:05:44.973

如果你真的想计算它，你可以使用正则表达式来搜索所有出现的数字，后跟百分号：

```
expression = "30% + 10";
m = /(\d+)%/.exec( expression ); 
```

这将为您提供整个匹配（30%）为 m[0] 和数字（30）为 m [1](http://jsfiddle.net/bjelline/XMhRQ/19/)。

您可以使用它来计算新值

```
v = width_100_percent * parseInt(m[1]) / 100; 
```

然后将其替换为真实的，并评估生成的数学表达式。

有关工作示例，请参阅[此 jsfiddle 。](http://jsfiddle.net/bjelline/XMhRQ/19/)

**但！**

在某些时候可能是用户输入的评估和表达打开了整个安全主题......所以你应该认真考虑如何避免这种情况。

**我猜**

您将遇到所有这些麻烦，因为您想对 CSS 布局进行一些计算。所以这是我对如何避免计算的建议：

**1) box-sizing: 边框框**

经典的盒子模型几乎不可能做到“将这个 div 分成三个相等的列，每个列的边框为 1px”。

看看新的“边框框”，它使这变得非常简单：使用边框框，填充+边框计为宽度的一部分，所以

```
 width: 30%
  border: 1px; 
```

实际上加起来是100%。

有关更详细的解释，请参阅[Paul Irish 的文章。](http://paulirish.com/2012/box-sizing-border-box-ftw/)

**2) CSS 预处理器，如 SASS 或 LESS**

如果你想在你的 CSS 中进行计算，你可以使用预处理器来为你做这件事。[SASS](http://sass-lang.com/)和[LESS](http://lesscss.org/)都 支持变量和数学表达式，语法略有不同：

```
 padding: $x / 2;

  padding: (@x / 2); 
```

所以你有：一种实现你想要的方法，以及两种避免它的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T12:31:20.200

例如，

```
expr = expr.replace(/(\d+)%/g, function($0, $1) { return width * parseInt($1) / 100 })
result = eval(expr) 
```

如果你的表达总是 if form`xxx% + yyy`你也可以在没有`eval`:

```
expr = expr.replace(/(\d+)%/g, function($0, $1) { return width * parseInt($1) / 100 })
result = expr.replace(/(\d+)\s*([+-*/])\s*(\d+)/g, function($0, $1, $2, $3) { 
    $1 = parseInt($1);
    $3 = parseInt($3);
    switch($2) {
        case '+': return $1 + $2;
        etc..... 
```

# python - PyQt4 x64 未从网络位置导入

> ID：14021379
> 
> 赞同：0
> 
> 时间：2012-12-24T12:24:59.393
> 
> 标签：python, network-programming, pyqt

我想从网络位置使用 PyQt4。

我在客户端中安装了 Python 2.6.4 x32 并将 PyQt4 x32 模块保存在网络共享中（例如：“\share\Pyton_Modules\x32”）。

当打开python时，我如下所示，它工作

```
import sys
sys.path.append(r'\\share\Pyton_Modules\x32')

from PyQt4 import QtGui 
```

一切正常。但是我在客户端中测试了相同的方式为 python 2.6.4 x64 并将 PyQt4 x64 保留在网络共享中（例如：“\share\Pyton_Modules\x64”）

打开python时，我做了如下操作，但没有用

```
import sys
sys.path.append(r'\\share\Pyton_Modules\x64')

from PyQt4 import QtGui 
```

我得到以下错误

```
Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    from PyQt4 import QtGui
ImportError: DLL load failed: The specified module could not be found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T05:48:14.853

我找到了克服我的情况的解决方案。

我将所有文件从 移动`PyQt4\bin`到`PyQt4`并且它没有任何问题...

希望这可以帮助某人。

# matlab - Matlab，生成并绘制分布在三角形内的点云

> ID：14021381
> 
> 赞同：6
> 
> 时间：2012-12-24T12:25:03.070
> 
> 标签：matlab, random, uniform

我正在尝试生成（均匀地）分布在三角形内的二维点云。到目前为止，我已经实现了以下目标：

![Matlab 绘图](../Images/baf4f3b083b48e513342f985e5cb58df.png)

我使用的代码是这样的：

```
N = 1000;
X = -10:0.1:10;
for i=1:N
    j = ceil(rand() * length(X));
    x_i = X(j);
    y_i = (10 - abs(x_i)) * rand;

    E(:, i) = [x_i y_i];
end 
```

但是，这些点并不是均匀分布的，左右角可以清楚地看到。我怎样才能改善这个结果？我也一直在尝试寻找不同的形状，但没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T13:34:45.357

您应该首先问自己，什么会使三角形内的点均匀分布。

长话短说，给定三角形的所有三个顶点，您需要转换两个均匀分布的随机值，如下所示：

```
N = 1000;                    % # Number of points
V = [-10, 0; 0, 10; 10, 0];  % # Triangle vertices, pairs of (x, y)
t = sqrt(rand(N, 1));
s = rand(N, 1);
P = (1 - t) * V(1, :) + bsxfun(@times, ((1 - s) * V(2, :) + s * V(3, :)), t); 
```

这将产生一组均匀分布在指定三角形内的点：

```
scatter(P(:, 1), P(:, 2), '.') 
```

![在此处输入图像描述](../Images/e78737632f640621f016aae02cfa7125.png)

请注意，此解决方案不涉及对随机数的重复条件操作，因此它不可能陷入无限循环。

如需进一步阅读，请查看[这篇文章](https://math.stackexchange.com/q/15624)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T12:45:33.717

从您构建积分的方式可以预期积分的集中。您的点沿 X 轴均匀分布。在三角形的两端，三角形中心的点数量大致相同，但它们分布在一个小得多的区域。

我能想到的第一个也是最好的方法：*蛮力*。将点平均分布在更大的区域周围，然后删除您感兴趣的区域之外的点。

```
N = 1000;
points = zeros(N,2);
n = 0;
while (n < N)
    n = n + 1;
    x_i = 20*rand-10; % generate a number between -10 and 10
    y_i = 10*rand; % generate a number between 0 and 10
    if (y_i > 10 - abs(x_i)) % if the points are outside the triangle
       n = n - 1; % decrease the counter to try to generate one more point
    else % if the point is inside the triangle
       points(n,:) = [x_i y_i]; % add it to a list of points
    end
end

% plot the points generated
plot(points(:,1), points(:,2), '.');
title ('1000 points randomly distributed inside a triangle'); 
```

我发布的代码的结果： ![上面代码生成的绘图](../Images/9e19b57a8b6c24ed126c545838bbe8bd.png)

**一个重要的免责声明**：随机分布并不意味着“均匀”分布！如果您从均匀分布中随机生成数据，这*并不*意味着它将沿三角形“均匀分布”。实际上，您会看到一些点簇。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T15:19:48.867

您可以想象三角形被垂直分成两半，然后移动其中一半，使其与另一半一起形成一个矩形。现在您在矩形中均匀采样，这很容易，然后将半三角形向后移动。

此外，使用单位长度（矩形变成正方形）更容易，然后将三角形拉伸到所需的尺寸。

```
x = [-10 10]; % //triangle base
y = [0 10]; % //triangle height
N = 1000; %// number of points

points = rand(N,2); %// sample uniformly in unit square
ind = points(:,2)>points(:,1); %// points to be unfolded 
points(ind,:) = [2-points(ind,2) points(ind,1)]; %// unfold them
points(:,1) = x(1) + (x(2)-x(1))/2*points(:,1); %// stretch x as needed
points(:,2) = y(1) + (y(2)-y(1))*points(:,2); %// stretch y as needed
plot(points(:,1),points(:,2),'.') 
```

![在此处输入图像描述](../Images/f40e025e74e92b2f00ebe5ee0e16e6a2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T17:21:46.853

我们可以概括这种情况。如果您想从欧几里得空间中的某些 (n - 1) 维单纯形中均匀采样点（不一定是三角形 - 它可以是任何凸多面体），只需从参数为 1 的对称 n 维 Dirichlet 分布中采样一个向量 -这些是相对于多面体顶点的凸（或重心）坐标。

# ios - .app 文件没有被拖入 Itunes 文件夹

> ID：14021388
> 
> 赞同：0
> 
> 时间：2012-12-24T12:25:39.127
> 
> 标签：ios, xcode, ios6, itunes

我想为 App 下载生成 .ipa 文件。我在 xcode 4.5.2 中执行代码，构建成功后，将 .app 文件拖到 iTunes 文件夹中。但是，阻力本身并没有发生。我的设备有 IOS 5.1。我需要将设备操作系统升级到 IOS6 还是任何其他原因。谁能告诉我，为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:02:01.560

据我所知，您不能将 .app 文件拖到 iTunes 中。但是，您可以拖动 .ipa 文件。

在 Xcode 中创建 .ipa 文件：

1.  运行产品/存档。如果成功，它会切换到管理器窗口。

2.  单击“分发...”，选择“为企业或临时部署保存”并继续向导，直到系统要求您保存 .ipa 文件。

然后可以将保存的 .ipa 文件拖到 iTunes 并同步到您的设备。

要将应用程序上传到 Apple 的 App Store，您无需显式创建 .ipa 文件。您可以使用相同的“分发...”按钮直接从管理器窗口上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:29:31.357

有关从 .app 文件生成 .ipa 文件的方法，请参阅我对这个问题的回答：

[iOS App loader - 应该上传什么文件类型](https://stackoverflow.com/questions/13986710/ios-app-loader-what-file-type-should-be-uploaded/13986830#13986830)

# objective-c - NSSplitView 控制器：如何以编程方式从一个视图控制器移动到另一个视图控制器

> ID：14021389
> 
> 赞同：1
> 
> 时间：2012-12-24T12:25:38.050
> 
> 标签：objective-c, nsviewcontroller, nssplitview

我是mac开发的新手。我习惯于`NSSplitView`分裂我的观点。当我从拆分视图左侧选择字段时，所选视图已显示在拆分视图的右侧。

现在的问题是，当我按下右侧所选视图控制器上的按钮以从该视图控制器转到另一个时，未执行操作。

```
- (IBAction)newProductAction:(id)sender {
    [self replaceViewWithCurrentView:@"nP" productImageValue:0 andProductId:([ItemModel getMaxValueOfItemIdFromItemBit:[appDelegate getDBPath]] + 1)];
}

#pragma mark - Replace Current View To Product View

- (void)replaceViewWithCurrentView:(NSString *)actionInfo productImageValue:(int)pIV andProductId:(int)itemIde {
    ProductDataIMViewController *pDIMVC = [[ProductDataIMViewController alloc] initWithNibName:@"ProductDataIMViewController" bundle:nil];
    pDIMVC.senderInfo = actionInfo;
    pDIMVC.itemIdentity = itemIde;
    float frameWidth = [pDIMVC view].frame.size.width;
    float frameHeight = [pDIMVC view].frame.size.height;
    [[pDIMVC view] setFrame:CGRectMake(0, 0, frameWidth, frameHeight)];
    [self.view.superview replaceSubview:self.view with:pDIMVC.view];
} 
```

我该如何解决这个问题？

# openerp - 如何在 OpenERP 6.1 中共享“高级过滤器”？

> ID：14021390
> 
> 赞同：2
> 
> 时间：2012-12-24T12:25:39.603
> 
> 标签：openerp

如何在 OpenERP 6.1 中共享“高级过滤器”？有没有办法让每个人都可以使用 GLOBAL 高级过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T12:14:41.920

他们没有直接的方法可以做到这一点，但替代方法是：

创建过滤器并转到“设置/自定义/低级对象/操作/过滤器”现在复制过滤器并更改新重复过滤器的用户

但这确实适用于您需要的 OpenERP 7.0。

谢谢你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T07:40:51.370

在 OpenERP 6.1 中，进入“过滤器”下拉列表并选择“管理过滤器”。然后单击您要全局共享的那个以显示其表单视图。然后，清空“用户”字段。这将使该过滤器可供所有用户使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T15:59:45.330

在类 ir_filters(osv.osv) 中：

将此函数更改为读取。

```
def get_filters(self, cr, uid, model):
    act_ids = self.search(cr,uid,[('model_id','=',model),'|',('user_id','=',uid),('user_id','=',False)])
    my_acts = self.read(cr, uid, act_ids, ['name', 'domain','context'])
    return my_acts 
```

然后将用户留空

# liquibase - liquibase 从数据库更改日志中删除行

> ID：14021393
> 
> 赞同：1
> 
> 时间：2012-12-24T12:25:52.417
> 
> 标签：liquibase, delete-row

从 Databasechangelog 中手动删除行可以吗？

顺便说一句，在我的情况下，回滚到 TAG 不是一个选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T19:02:47.000

从表中删除行将模拟回滚而不实际执行回滚.... 使您的数据库处于未知状态（重点是 liquibase 为您管理模式）。

为什么不直接回滚指定数量的变更集呢？

```
liquibase rollbackCount 5 
```

# ios - 如何在静音模式下使用 OutputAudioQueue 播放音频？

> ID：14021397
> 
> 赞同：1
> 
> 时间：2012-12-24T12:26:14.470
> 
> 标签：ios, audio, xamarin.ios

> **可能重复：**
> [如何在 iPhone 的静音模式下使用 AVAudioPlayer 播放声音](https://stackoverflow.com/questions/10322040/how-to-play-a-sound-using-avaudioplayer-when-in-silent-mode-in-iphone)

是的，我知道，那个用户要求保持沉默，但在这个应用程序中它确实是必要的，而且它对用户来说是可以预测的。

那么，是否可以在静音模式下播放声音？

声音被编码，因此它使用音频数据解码和填充队列缓冲区（如果需要 - 可以在此处复制代码）。通常，正如我所知道的那样，`AVAudioSession`正在使用，但是否可以使用它来播放不是“完整”文件，而是分段（包）文件。

# git - 如何设置 .gitignore 以忽略所有 .jars 但不在预期的文件夹中

> ID：14021400
> 
> 赞同：6
> 
> 时间：2012-12-24T12:26:32.820
> 
> 标签：git, gitignore

我有一个这样的项目结构：

```
/proj/a/file.jar
/proj/a/1/file.jar
/proj/b/file.jar
/proj/b/1/file.jar
/proj/b/2/1/file.jar
/proj/c/file.jar
/proj/c/1/file.jar
/proj/c/2/1/file.jar 
```

等等

我试图忽略所有 jar 文件，除了**c**文件夹中的那些和所有嵌套的。我应该如何在 .gitignore 中设置它？

```
*.jar
!c/*.jar 
```

不起作用。这个也是：

```
*.jar
!c/*/*.jar 
```

还有这个：

```
*.jar
!/proj/c/*/*.jar 
```

还有这个：

```
*.jar
!/proj/c/**/*.jar 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T15:36:58.317

Git 不支持`**`-style 通配符，因此您可以使用完整路径（即`/whatever/*/*/*.jar`等）来反映正确的目录级别数量，或者您可以简单地将`.gitignore`包含文件`!*.jar`的文件放在要取消忽略 JAR 文件的文件夹中。

# watir-webdriver - 无法通过索引获取 TD 的文本

> ID：14021403
> 
> 赞同：1
> 
> 时间：2012-12-24T12:26:39.680
> 
> 标签：watir-webdriver

我有以下代码：

```
<table id="table1" class="class1">
    <thead>...<thead>
    <tbody>
        <tr id="1">
            <td class>cell1</td>
            <td class>cell2</td>
            <td class>cell3</td>
            <td class>cell4</td>
        </tr>
        <tr id="2">
            ....
        <\tr>
        ... 
```

我需要检查所有行并检查单元格 3 是否有 "cell3" 作为文本。（对于初学者）然后在我找到它之后，我需要继续检查单元格 3 中不同字符串的行

我试过了：

```
string="cell3"
rows=browser.table.rows
rows.each {|tr| 
    if tr.td( :index =>2).text ==string
        puts " Found #{string}" 
        string="cellK"
    end
} 
```

我在循环中执行此操作，因为我需要找到几个字符串。

但我得到了休闲错误：

```
 unable to locate element, using {:index=>2, :tag_name=>"td"} 
```

有什么建议吗？如何获取 td 的文本？为什么我不能按索引找到 td ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:17:30.277

我猜问题出在`thead`. 表头可能是这样的：

```
<thead>
    <tr id="0">
        <th class>heading1</th>
        <th class>heading2</th>
        <th class>heading3</th>
        <th class>heading4</th>
    </tr>
<thead> 
```

请注意，有一个`tr`. `table.rows`因此将包括标题行。另请注意，它正在使用`th`而不是`td`单元格。这里很可能 watir 找不到索引为 2 的 td，因为这一行中根本没有 td。

假设这是问题所在，您有几个解决方案。

**解决方案 1 - 使用单元格使 th 和 td 等效**

在循环内部，使用`cell`代替`td`：

```
rows.each {|tr| 
    if tr.cell( :index =>2).text == string    #Note the change here
        puts " Found #{string}" 
        string="cellK"
    end
} 
```

`Table#cell`匹配`td`和`th`单元格。这意味着`cell(:index, 2)`它将匹配第三个`td`或`th`在行中。当 Watir 检查标题行时，它现在会找到一个值。

**解决方案 2 - 忽略前导**

获取要检查的行时，将行集合限制为仅包含 tbody 中的行：

```
rows = browser.table.tbody.rows 
```

然后，这将忽略导致问题的标题中的 riws。

# android - 如何在 Honeycomb 及更高版本中使用选项菜单到 GingerBread 和操作栏？

> ID：14021404
> 
> 赞同：2
> 
> 时间：2012-12-24T12:26:41.240
> 
> 标签：android, android-actionbar, android-optionsmenu

我见过一些应用程序，当它们安装在具有 GingerBread 及以下版本 os 的设备中时，它们会显示选项菜单。相同的应用程序在具有 HoneyComb 及更高版本操作系统的设备中显示操作栏。现在我的应用程序有相同的要求。我怎样才能做到这一点？

这是一个[例子。](https://play.google.com/store/apps/details?id=com.nxp.nfc.tagwriter)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:47:22.757

告别菜单按钮！

这个[博客](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)可能会对你有所帮助

**更新 1：**

您仍然可以在上面的 Froyo 或 Honeycomb 中使用菜单。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

当用户从操作栏或选项菜单中选择一个项目时，该回调仍然可以被 Honeycomb 及以上使用

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    return super.onOptionsItemSelected(item);
} 
```

# activemq - 创建activemq队列列表

> ID：14021407
> 
> 赞同：3
> 
> 时间：2012-12-24T12:26:51.890
> 
> 标签：activemq

我使用 BlockingQueue 的现有代码创建了一个 BlockingQueue 列表（如私有列表>队列；），我可以在其中放置要处理的消息。然而，由于持久性问题，我们计划转移到 activemq。如果我们能得到一个activemq队列列表（在java程序中不是来自配置文件），任何人都可以帮助我。我知道我可以在会话上使用 createQueue 来创建队列的单个实例，但我想要像 BlockingQueue 那样完成的队列列表。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T12:56:50.593

您可以使用 DestinationSource 从您的连接中获取可用队列的列表。

```
ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
ActiveMQConnection connection = (ActiveMQConnection)connectionFactory.createConnection();
DestinationSource ds = connection.getDestinationSource();
Set<ActiveMQQueue> queues = ds.getQueues(); 
```

编辑：创建队列看一下 ActiveMQ Hello world 示例[链接](http://activemq.apache.org/hello-world.html)代码的作用是创建与嵌入在 jvm 中的 activeMQ-broker 的连接

```
// Create a ConnectionFactory
ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("vm://localhost");

// Create a Connection
Connection connection = connectionFactory.createConnection();
connection.start();

// Create a Session
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

// Create the destination (Topic or Queue)
Destination destination = session.createQueue("TEST.FOO"); 
```

上面的代码可能不明显的是这一行：

```
ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("vm://localhost"); 
```

不仅会建立与代理的连接，而且如果还没有代理，还会在连接中嵌入代理。[在本页](http://activemq.apache.org/how-do-i-embed-a-broker-inside-a-connection.html)底部解释

可以使用该功能（您需要一个代理，但如果您想以其他方式设置它）：

```
ActiveMQConnectionFactory cf = new ActiveMQConnectionFactory("vm://localhost?create=false"); 
```

我真的很喜欢 ActiveMQ，但它提供的不仅仅是持久性，所以在做简单的事情时事情可能看起来有点过于复杂。但希望这不会吓到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:48:17.807

要创建队列列表，您必须创建该列表，然后从会话对象单独创建每个队列。

`Queue q = session.createQueue("someQueueName")`

然而，从这个意义上说，这并没有真正“创建”队列，因为队列是 ActiveMQ 进程/服务器中的持久“事物”。这只会创建对给定标识符/名称的 ActiveMQ 队列的引用。

我不知道为什么你需要十个队列。通常，每种事件类型或用例（或类似情况）都有一个队列，然后使用并发消费者并行处理。

但是，当然，您总是可以通过一个简单的 for 循环来做类似的事情，一次创建一个队列并将它们附加到一个数组列表。请注意，您无法获得仅`Event`包含对象的类型安全队列。

不过，您可以发送`ObjectMessage`带有事件的 s。只需创建一个：

```
Event event = createEvent(..); // Given "Event" is serializable (need to be able to persist it).
Message m = session.createObjectMessage(event);
// Send message as usual in ActiveMQ. 
```

从 BlockingQueues 转换为持久 ActiveMQ 队列时，您可能需要重新考虑代码中的一件事或几件事。

# android - Android：文本颜色不变

> ID：14021408
> 
> 赞同：0
> 
> 时间：2012-12-24T12:26:52.450
> 
> 标签：android

我正在编写一个测验应用程序，它向用户提供一个问题和 4 个选择。当用户单击一个选项时，应用程序应将正确选项的颜色更改为绿色，将错误选项的颜色更改为红色。然后它应该在显示下一个问题之前等待一秒钟。

问题是它不会改变颜色（最后一个问题除外），我不明白为什么。我知道我`android.os.SystemClock.sleep(1000)`和它有关系。

如果您能告诉我哪里出了问题，或者我的做法不正确，我将不胜感激。谢谢 ：）

```
public void onClick(View v) {
    setButtonsEnabled(false);
    int answer = Integer.parseInt(v.getTag().toString());
    int correct = question.getCorrectAnswer();

    if(answer == correct)
        numCorrect++;
    highlightAnswer(answer,correct,false);
    android.os.SystemClock.sleep(1000);

    MCQuestion next = getRandomQuestion();
    if(next != null) {
        question = next;
        highlightAnswer(answer,correct,true);
        displayQuestion();
        setButtonsEnabled(true);
    }
    else {
        float percentage = 100*(numCorrect/questionsList.size());
        QuizTimeApplication.setScore(percentage);
        Intent scoreIntent = new Intent(QuestionActivity.this,ScoreActivity.class);
        startActivity(scoreIntent);
    }
}

private void setButtonsEnabled(boolean enable) {
    for(Button b: buttons)
        b.setEnabled(enable);
}

private void highlightAnswer(int answer, int correct, boolean undo) {
    if(undo) {
        for(Button button : buttons) {
            button.setTextColor(getResources().getColor(R.color.white));
            button.setTextSize(FONT_SIZE_NORMAL);
        }
        return;
    }
    buttons[correct].setTextColor(getResources().getColor(R.color.green));
    buttons[correct].setTextSize(FONT_SIZE_BIG);
    if(answer!=correct) {
        buttons[answer].setTextColor(getResources().getColor(R.color.red));
        buttons[answer].setTextSize(FONT_SIZE_BIG);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:34:58.937

```
SystemClock.sleep(1000); 
```

会产生意想不到的行为，并且可能无法满足您的要求。最好使用 Handler 延迟如下。

```
Handler h = new Handler();
h.postDelayed(new Runnable(){

@Override
public void run()
{
//your code that has to be run after a delay of time. in your case the code after SystemClock.sleep(1000);
},YOUR_DELAY_IN_MILLISECONDS
); 
```

# git - 将原始 git 存储库中的新修订与修改后的存储库合并

> ID：14021411
> 
> 赞同：0
> 
> 时间：2012-12-24T12:27:04.277
> 
> 标签：git, version-control, version-control-keywords

对不起，解释起来有点棘手，但本质上……我正在尝试创建现有存储库的副本。但是是否有可能仍然从原始存储库获取更新而不会破坏我自己对修改后的存储库的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:38:52.257

这完全没有问题。

您使用 创建某个存储库的副本`git clone`，这将创建一个新存储库和一个包含所有远程分支的远程。

您可以使用 . 查看本地（可能已修改）分支，`git branch`使用`git branch -r`. 您可以使用 更新远程分支`git fetch`。

这应该是您所要求的几乎所有内容。- 很可能您还希望将您的更改与来自上游的更改集成。假设您有一个本地分支（例如 master）跟踪远程分支（例如 origin/master），您可以使用`git merge`或`git rebase`获取您的更改和原始存储库的更改的组合。

# android - Jquery Mobile 点击 img 标签和 Android 4.1 移动保存对话框？

> ID：14021412
> 
> 赞同：0
> 
> 时间：2012-12-24T12:27:08.603
> 
> 标签：android, jquery, jquery-mobile

我正在使用以下代码，

```
$(document).delegate('div[data-role*="page"]', 'pageshow', function () {
    $(document).delegate('#imageId', 'taphold', function (evt) {
    });
}); 
```

它有效，但也向我显示了保存对话框提示。试过了，

```
img  {
  -webkit-touch-callout: none !important; 
} 
```

并返回 false 但没有任何效果。在 Android 4.1 Google Chrome 和默认浏览器上测试

# c++ - 为什么要使用静态和动态链接的显式参数

> ID：14021416
> 
> 赞同：3
> 
> 时间：2012-12-24T12:27:55.943
> 
> 标签：c++, visual-studio, gnu

我主要在 Windows 中工作，最近我开始在 Linux 中工作。我有个疑问。我在 Windows 中使用 Visual Studio 作为 IDE，在 Linux 中使用 Makefile。

Windows 中有两种类型的库（VC++），静态库（.lib）和 DLL。很明显（不是吗？）如果我与 lib 文件链接，我使用的是静态链接，否则是动态链接。

现在当我使用 g++ 编译器时，为什么我需要明确提及`-Bstatic/-static`或`Bdynamic/-dynamic`标记。因为如果文件是 .a 文件，那么我必须使用静态链接，如果文件是 .so 我使用动态链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:38:47.530

有时您想“强制”编译器执行通常不会执行的操作。特别是，当您针对您希望运行代码的另一台机器上可能未安装[或未安装相同版本]的库进行构建时，-static 非常有用。

如果您希望静态链接一个库，而不是代码使用的每个库，则 -Bdynamic 很有用。

例如`gcc -o myprog myprog.o -Wl,-Bstatic -lspecial -Wl,-Bdynamic` ，将`myprog`使用静态链接进行链接`libspecial`（这可能是未广泛分布的东西，例如您自己构建的东西）

对于一般的本地开发，您也不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:21:57.283

> 因为如果文件是 .a 文件，那么我必须使用静态链接，如果文件是 .so 我使用动态链接。

这些文件名“扩展名”只是人类的约定——没有理由它们*必须*分别是`.a`和`.so`。GCC 不强迫我们参加该公约是完全正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:41:50.830

在 GNU 工具链和其他 Unix 编译器中，您通常不指定库的完整路径；你给链接器一个标志，比如

```
-lfoo 
```

并让它弄清楚它是否应该链接`libfoo.a`, `libfoo.so`, 以及这些文件的位置。当只有一个静态库可用时，它将与之链接。

`-Bstatic`因此，除了少数特定情况外，您实际上不需要指定。动态链接是默认设置，如果您不希望动态链接自定义库，那么就不要构建`.so`它。

此外，您*可以*通过将完整文件名提供给链接器来显式链接静态库

```
gcc -o some_binary main.o libfoo.a 
```

获取`libfoo`静态链接的动态链接二进制文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T12:46:23.703

我认为你已经把它弄反了。无论我是链接动态库还是静态库，在 Windows 下，我都需要一个`.lib`文件；它们只是不是以相同的方式生成的，并且不包含相同的东西。在 Unix 下，当我与共享对象链接时，我直接链接到`.so`文件，而不是链接到同时生成的一些附加文件。

选项`-Bstatic`and仅在 a和 a都存在`-Bdynamic`时才起作用，在同一目录中；他们告诉链接器为使用该选项指定的库选择哪一个。在 Windows 中，这种情况不会发生；由于您需要 a ，因此您不能将 a 静态链接到同一目录中。`.so``.a``-l``.lib``.dll``.lib`

# objective-c - 在哪里声明和初始化 NSUserDefaults 之类的？

> ID：14021417
> 
> 赞同：-1
> 
> 时间：2012-12-24T12:28:42.793
> 
> 标签：objective-c, cocoa

我正在编写我的第一个 Cocoa 应用程序。

现在，每次我需要 时`NSUserDefaults`，我都会初始化该类的一个对象并在本地范围内使用它。

这有点乏味。所以我想知道我应该把`NSUserDefaults`声明和初始化放在哪里，以便它可以用于我的所有`Application Delegate`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:32:33.367

尝试使用用户默认值时，您应该简单地使用此单例

```
[NSUserDefaults standardUserDefaults]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:31:19.863

在需要的地方调用默认值并没有错。无论如何，它是一个单身人士。

如果您将其放入您的应用程序委托中，您将只是以相同的方式调用以获取 NSUserDefaults。

如果您想为您的应用程序初始化默认值 - 可以在`+initialize`您的应用程序委托的方法中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:38:08.830

`I'm initialising an object of the class and use it in the local scope.`

根本不需要。如果你想在 UserDefaults 中保存一些东西，可可为你提供了一个共享实例/单例。

每当您需要更新保存的值时，您调用`[NSUserDefaults standardUserDefaults]`并使用它，只会为您保存一个实例。

```
[[NSUserDefaults standardUserDefaults] setObject:yourObject forKey:@"yourKey"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T12:47:47.007

进行用户默认值的一个好方法是创建自己的`PFXDefaults`类（替换`PFX`为您喜欢的前缀），该类具有访问和改变您关心的值的方法。这允许你写

```
[[PFXDefaults sharedDefaults] setUserName:@"Nate"]; 
```

而不是

```
[[NSUserDefaults] setObject:@"Nate" forKey:@"userName"]; 
```

将此类设置为前缀通常很方便，或者，除非`.h`在您的应用程序委托上使用可见（在文件中声明）属性，否则会很方便。

界面`PFXDefaults`看起来像

```
@interface PFXDefaults : NSObject

@property (nonatomic) NSString *userName;

@end 
```

并且实现看起来像

```
static NSString * const PFXDefaultUserNameKey = @"PFXDefaultUserNameKey";

@implementation PFXDefaults

- (void)setUserAge:(NSString *)userName
{
    [[NSUserDefaults standardUserDefaults] setObject:userName forKey:PFXDefaultUserNameKey];
}

- (NSInteger)userAge
{
    return [[NSUserDefaults standardUserDefaults] stringForKey:PFXDefaultUserNameKey];
}

@end 
```

# c# - 密码框验证

> ID：14021418
> 
> 赞同：2
> 
> 时间：2012-12-24T12:28:55.307
> 
> 标签：c#, wpf, validation

元素的 Password 属性`PasswordBox`不是一个`DependencyObject`所以不能绑定（没有 Text 属性）。通过将消息附加到`PasswordChanged`事件，传递源并在视图模型中获取它，可以在用户键入时捕获密码。然而，缺乏绑定意味着没有机会设置`ValidatesOnDataErrors=True`，因此`IDataErrorInfo`永远不会调用方法，这意味着永远不会激活任何错误模板。有谁知道如何解决这个问题？也就是说，是否有另一种方法可以让元素调用`IDataErrorInfo`索引器的视图模型？

一个合理的问题可能是您为什么要验证密码。

两个原因：

1) 让用户知道密码是必需的。

2）让用户知道密码和密码确认是否相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:48:35.230

这也是一个很好的回答：[http](http://wpftutorial.net/PasswordBox.html) ://wpftutorial.net/PasswordBox.html 但是，如果您这样做，密码将作为纯文本存储在内存中。

也许最好将示例中的附加属性“Password”更改为“IsEmpty”和“PasswordHash”之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T15:30:41.663

除了下面 Alex 的回答之外，我也使用了本文中的信息；

[http://wpftutorial.net/PasswordBox.html](http://wpftutorial.net/PasswordBox.html)

我做了以下允许验证的地方；

**XAML：**

```
<Grid Grid.Row="2" Grid.Column="1">
    <TextBox x:Name="plain1" Text="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True,NotifyOnValidationError=True}" Visibility="Hidden" />
    <PasswordBox x:Name="PasswordHelperBox" w:PasswordHelper.Attach="True" w:PasswordHelper.Password="{Binding Text, ElementName=plain1, Mode=TwoWay}" TabIndex="2" Margin="0,2,30,2"/>
</Grid> 
```

其中“密码”是要绑定的属性。

**助手类；**

```
public static class PasswordHelper
{
    public static readonly DependencyProperty PasswordProperty =
        DependencyProperty.RegisterAttached("Password",
        typeof(string), typeof(PasswordHelper),
        new FrameworkPropertyMetadata(string.Empty, OnPasswordPropertyChanged));

    public static readonly DependencyProperty AttachProperty =
        DependencyProperty.RegisterAttached("Attach",
        typeof(bool), typeof(PasswordHelper), new PropertyMetadata(false, Attach));

    private static readonly DependencyProperty IsUpdatingProperty =
       DependencyProperty.RegisterAttached("IsUpdating", typeof(bool), 
       typeof(PasswordHelper));

    public static void SetAttach(DependencyObject dp, bool value)
    {
        dp.SetValue(AttachProperty, value);
    }

    public static bool GetAttach(DependencyObject dp)
    {
        return (bool)dp.GetValue(AttachProperty);
    }

    public static string GetPassword(DependencyObject dp)
    {
        return (string)dp.GetValue(PasswordProperty);
    }

    public static void SetPassword(DependencyObject dp, string value)
    {
        dp.SetValue(PasswordProperty, value);
    }

    private static bool GetIsUpdating(DependencyObject dp)
    {
        return (bool)dp.GetValue(IsUpdatingProperty);
    }

    private static void SetIsUpdating(DependencyObject dp, bool value)
    {
        dp.SetValue(IsUpdatingProperty, value);
    }

    private static void OnPasswordPropertyChanged(DependencyObject sender,
        DependencyPropertyChangedEventArgs e)
    {
        PasswordBox passwordBox = sender as PasswordBox;
        passwordBox.PasswordChanged -= PasswordChanged;

        if (!(bool)GetIsUpdating(passwordBox))
        {
            passwordBox.Password = (string)e.NewValue;
        }
        passwordBox.PasswordChanged += PasswordChanged;
    }

    private static void Attach(DependencyObject sender,
        DependencyPropertyChangedEventArgs e)
    {
        PasswordBox passwordBox = sender as PasswordBox;

        if (passwordBox == null)
            return;

        if ((bool)e.OldValue)
        {
            passwordBox.PasswordChanged -= PasswordChanged;
        }

        if ((bool)e.NewValue)
        {
            passwordBox.PasswordChanged += PasswordChanged;
        }
    }

    private static void PasswordChanged(object sender, RoutedEventArgs e)
    {
        PasswordBox passwordBox = sender as PasswordBox;
        SetIsUpdating(passwordBox, true);
        SetPassword(passwordBox, passwordBox.Password);
        SetIsUpdating(passwordBox, false);
    }
} 
```

# jquery - 如何使用 jquery 向 ckeditor 添加额外数据？

> ID：14021424
> 
> 赞同：0
> 
> 时间：2012-12-24T12:29:20.140
> 
> 标签：jquery

我正在研究 MVC3 CKeditor，当我单击提交按钮时，我需要在 CKeditor 中插入一些额外的数据。我怎样才能做到这一点？到目前为止，我的代码如下：这是我的 html 页面

```
 <div id="div-child-Cat-Desc-Long" class="CKEditor-child-DIV">
                    @Html.TextAreaFor(m => m.Message, new { Class = "input-xlarge", @id = "txtAreasocial",@rows="3" })
                </div>

$(document).ready(function () {
    //Passing the Text Area reference to get the CK Editor
    var editor = CKEDITOR.editor.replace('txtAreasocial');
});

 $('#btnadd').click(function () {
    alert('hi');

    var data = "Hello. This is a new node.";
    alert(data);
    CKEDITOR.editor.setData(data);

    editor.setData(data)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:36:05.497

我不太确定你有多少个 CKeditor 实例。您需要获取编辑器的实例并使用`setData`方法将数据添加到特定实例。例如：

```
CKEDITOR.instances['editor1'].setData(data) 
```

或者

```
CKEDITOR.instances.editor1.setData(data) 
```

检查[文档](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html)`setData`中的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-17T04:37:20.063

> 使用“insertHtml”或“insertText”函数将数据附加到 CKEDITOR。像这样：

```
CKEDITOR.instances['input-text-area-ID'].insertHtml(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:45:57.553

*   创建一个新的子元素

    ```
    var txtNode = document.createTextNode("Hello. This is a new node."); 
    ```

*   然后将其附加到您的编辑器中..

    ```
    txtNode.appendTo($('#editor')); 
    ```

# magento-1.7 - 如何使用自定义模块在 magento 中设置 Cron Job？

> ID：14021429
> 
> 赞同：1
> 
> 时间：2012-12-24T12:29:41.947
> 
> 标签：magento-1.7, magento-1.5, magento-1.6, magento

我想在 Magento 中为我的自定义模块使用 cron 作业或调度。我对此进行了研究，但找不到对我有帮助的合适答案。

我创建了一个表单，允许用户选择天、小时、分钟、秒等。我将所有这些值存储在数据库中。我想要做的是它从数据库中获取价值并根据那个时间运行一些计划（定义 php 脚本）。我不知道我该怎么做。所以，请帮我解决这个问题。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:09:49.247

Magento Cron 系统的设计方式并不是真正允许用户指定的调度，而是开发人员指定的调度（即任务的频率在模块 XML 配置中设置，不能通过 GUI 更改）。话虽如此，您可以通过将 Cron 设置为在 XML 中以最频繁的时间间隔运行并将代码包装在实际的 cron 函数中来解决这个问题，并使用代码将当前时间与数据库配置进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:41:33.467

您也可以尝试使用`config_path`

```
<crontab>
    <jobs>                
        <company_export_send_order>
            <schedule>
                <config_path>export/order/cron_settings</config_path>
            </schedule>
            <run>
                <model>company_export/observer::exportOrderData</model>
            </run>
        </company_export_send_order>
    </jobs>
</crontab> 
```

在后端配置中阅读更多@ [magento cron](https://stackoverflow.com/questions/6446934/magento-cron-in-backend-configuration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:06:04.033

一种方法是创建一个每“x 间隔”运行一次的 cronjob，以检查您的数据库以查看是否有任何计划。如果某事已安排好，则执行 else 什么也不做

请参阅[如何设置 Cron 作业](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job)

# c# - 动态设置Sqldatasource参数

> ID：14021435
> 
> 赞同：0
> 
> 时间：2012-12-24T12:30:05.307
> 
> 标签：c#, parameters, sqldatasource

我创建了 a`gridview`和 a `SqlDataSource`，它在 where 子句中有参数，在下拉菜单中有一个源。这很好用。

我也有一个输入文本字段。我希望它的值将参数设置为相同`SqlDataSource`，当`onclick`事件发生时，然后刷新`gridview`.

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:39:06.563

是的，如下所示，您将其作为参数添加到 sql 数据源：-

```
<SelectParameters>
   //...existing paramaters
    <asp:ControlParameter Name="SprocArgName" ControlID="txtBoxName" PropertyName="Text" Type="String" />
</SelectParameters> 
```

只需将空字符串视为 sql 中的无过滤器。否则，您必须添加一个复选框来表示您要使用文本框过滤器，然后您可以向 sqldatasource 添加第二个控制参数并检查该布尔值。

# android - ActionBar 主要部分的选项卡

> ID：14021440
> 
> 赞同：5
> 
> 时间：2012-12-24T12:30:24.660
> 
> 标签：android, android-actionbar, actionbarsherlock

如何在 Android 中存档这样的选项卡布局？Tab Navigation 是 Main ActionBar 的一部分，不在下方。PS：我正在使用 ActionBar Sherlock

目前只是做：

```
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

![当前操作栏](../Images/f4142608443ba16ced705a3bb034a6ad.png)

但我想要一个这样的：

![动作条设计](../Images/9bdd55755f8c4ae6120254a046b3466d.png)

感谢您的帮助，风筝冲浪者

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:44:12.057

我不建议这样做，但您可以覆盖 ActionBar 和 ABS 样式：

```
<bool name="abs__action_bar_embed_tabs">false</bool> //for ActionBarSherlock
<bool name="action_bar_embed_tabs">false</bool> //for default ActionBar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T12:37:20.147

选项卡将显示在操作栏中，但前提是操作栏有空间。当您处于横向模式时，您的选项卡将移动到操作栏，因为在横向模式下，操作栏有更多空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:55:01.203

从[这个](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/hmmB1JqDeCk)线程。关于覆盖操作栏选项卡功能的主题。

> 杰克·沃顿
> 
> 我有义务告诉你这可能是个坏主意™，我不推荐它。当您与平台作战时，您几乎总是以失败告终。

我倾向于同意与平台作斗争。相反，我选择放弃库存选项卡导航（来自 android 平台和 ABS 库），而是编写了一个看起来与选项卡基本相同的布局，并将其用作自定义视图，使用[`ActionBar.setCustomView(View)`](http://developer.android.com/reference/android/app/ActionBar.html#setCustomView%28android.view.View%29)和[`ActionBar.setDisplayShowCustomEnabled(true)`](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowCustomEnabled%28boolean%29)方法应用它。

这以标准方式使用 ActionBar api（即不与平台对抗），并且正如该线程中所指出的那样，选项卡视图只是一个`LinearLayout`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T22:21:39.897

试试[这个](https://stackoverflow.com/questions/13581155/how-does-action-bar-embed-tabs-exactly-work-in-android)。这实现了一种方法，使您可以选择是否要将选项卡放在单独的行或顶行中，而不管屏幕方向如何。

对于那些在本机 ActionBar 中使用此代码的人，只需省略其`if (actionBar instanceof ActionBarWrapper)`下方的 和 块即可。

但是请记住，这有点像黑客攻击，可能会在未来的 Android 版本中中断。

# sql - 加入/在哪里概念

> ID：14021445
> 
> 赞同：5
> 
> 时间：2012-12-24T12:31:01.377
> 
> 标签：sql, sql-server, oracle, tsql, plsql

这两条sql语句有什么区别

一种）`select * from T1,T2 where T1.A=T2.A ;`

b)`select * from T1,T2 where T2.A=T1.A ;`

我在两种情况下都得到相同的输出，两种语句之间有什么区别吗？

C）`select * from T1 inner join T2 on T1.A=T2.A ;`

语句 C 和 a 之间有什么区别？在这种情况下，也得到与 a 和 b 相同的输出......

Inner Joins也可以写成sql语句吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T12:33:09.940

它们都是使用相同连接条件连接两个表的本质不同的方法。

在 1 和 2 之间，就数据库而言，绝对没有区别。

最后一个选项是标准化的连接语法——这是你应该使用的，以确保你的 SQL 是可读的——这是阅读你的 SQL 的人在你连接表时期望看到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:32:56.817

SQL 就像数学那样。平等是对称的。如果 A = B，则 B = A。*应该*没有区别。

JOIN/ON 表示法只是编写相同内容的另一种方式。符号不同以在视觉上强调连接。

输出比任何数量的 SO 用户都更能告诉你答案。为什么不相信自己的眼睛？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T12:33:03.073

都一样没有区别

这些是不同的方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:37:25.347

(a) 和 (c) 是相同的，除了第二个是 ANSI-92 SQL 语法，第一个是不包含连接子句的旧 SQL 语法。它们应该产生完全相同的内部查询计划，尽管您可能想检查一下。

您应该使用 ANSI-92 语法有几个原因

*   JOIN 子句的使用将关系逻辑与过滤器逻辑（WHERE）分开，因此更清晰、更易于理解。
*   这个特定查询无关紧要，但在某些情况下，旧的外部连接语法（使用 + ）不明确，因此查询结果取决于实现 - 或者根本无法解析查询。ANSI-92 不会出现这些情况
*   这是一种很好的做法，因为现在大多数开发人员和 dba 都将使用 ANSI-92，您应该遵循该标准。当然，所有现代查询工具都会生成 ANSI-92。

# javascript - 如何为 table.rows.length 函数排除 html 表中的标题行？

> ID：14021456
> 
> 赞同：2
> 
> 时间：2012-12-24T12:32:05.583
> 
> 标签：javascript, html

**Java 脚本中的table.rows.length**返回表中的行数，包括`<thead>`标记中的行。我需要的是，如果有一个`<thead>`只有`<th>`元素的标题行（内部），我想忽略该行，我只需要其中包含数据的行数而不是标题元素。

注意：我不能使用`table.rows.length - 1`，因为我不能修改 Javascript。我只能在 HTML 端进行修改。这是代码示例片段。在这里，我需要计数为 4 而不是 5。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Sample</title>
<script type="text/javascript">
function call(){    
    alert(document.getElementById('tab').rows.length);
}
</script>
</head>
<body onload="call()">
<table id="tab" border="1">
    <thead>
        <th>
          header 1
         </th>
         <th>
            header 2
         </th>           
    </thead>
    <tbody>
        <tr>
             <td> data1</td>
             <td> data1</td>
        </tr>
        <tr>
             <td> data2</td>
             <td> data2</td>
        </tr>
        <tr>
             <td> data3</td>
             <td> data3</td>
        </tr>
        <tr>
             <td> data</td>
             <td> data4</td>
        </tr>
    </tbody>    
  </table>  
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:41:28.220

重新分配`id`给`<tbody>`元素：

```
<table border="1">
    <tbody id="tab">
    ... 
```

由于这个元素是`<HTMLTableSectionElement>`一个，它也有`rows`(HTMLCollection) 属性，所以你根本不需要在你的 JS 中做任何改变。

# file - 将文件复制到每个文件夹及其子文件夹中

> ID：14021457
> 
> 赞同：2
> 
> 时间：2012-12-24T12:32:13.157
> 
> 标签：file, batch-file, copy, directory, subdirectory

```
"Here I am"-folder
  |
  |--- mainfolder 1
  |          |
  |          |--- subfolder 1
  |          |--- subfolder 2
  |
  |--- mainfolder 2
  |          |
  |          |--- subfolder 1
  |          |--- subfolder 2 
```

我想将一个批处理文件放入“我在这里”文件夹并从那里执行它。它应该将一个名为*text.txt*的文件复制到所有主文件夹及其子文件夹中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:02:56.710

使用以下脚本：

```
@echo off
    for /r "%CD%" %%f in (.) do (
      copy "Text.txt" "%%~ff" > nul
    ) 
```

信用：[https ://stackoverflow.com/a/1321539/1756941](https://stackoverflow.com/a/1321539/1756941)

**编辑：**

```
@echo off
    Setlocal EnableDelayedExpansion
    cls
    set currentDirectory=%CD%
    FOR /D %%g IN ("*") DO (
        Pushd %CD%\%%g
        FOR /D %%f IN ("*") DO (
            copy "%currentDirectory%\Text.txt" "%%~ff"
        )
    Popd
    )
pause 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-24T13:39:48.150

使用 xcopy 命令（适用于 Windows）：

[http://www.computerhope.com/xcopyhlp.htm](http://www.computerhope.com/xcopyhlp.htm)

xcopy c:\temp\1 c:\temp\2 /E

# caching - 需要一致性缓存示例/教程

> ID：14021459
> 
> 赞同：3
> 
> 时间：2012-12-24T12:32:22.430
> 
> 标签：caching, oracle-coherence

我必须在我的 Spring Web 应用程序中实现 Coherence Cache。我对缓存一无所知。我也尝试从谷歌获取教程或示例代码，但我失败了。

你们中的任何人都可以为我提供 Web 应用程序中 Coherence 缓存的教程或示例吗？

我需要一个起点来开始我对 Coherence 缓存的学习。我也找不到来自 Oracle 的好的教程。

# java - 发送带有多个附件和 html 正文的电子邮件，其中可能包含 java 中的图像

> ID：14021460
> 
> 赞同：0
> 
> 时间：2012-12-24T12:32:23.590
> 
> 标签：java, sendmail

我想将带有多个附件的电子邮件发送给多个收件人/多个抄送收件人/密件抄送收件人，其中包含可能包含图像的格式化 html 内容男孩。

怎么做？

请建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T12:42:49.237

这是从我的本地计算机向任何其他 id 发送 yahoo id 的电子邮件的工作示例。

```
package myWorkingFiles;

import org.apache.commons.mail.DefaultAuthenticator;
import org.apache.commons.mail.EmailAttachment;
import org.apache.commons.mail.HtmlEmail;
import org.apache.commons.mail.MultiPartEmail;

/**
 *
 * @author xyz
 */
public class YahooEmailWorkingWithAttachment {

    public static void main(String[] args) {
        String myEmailId = "zz@yahoo.com";
        String myPassword = "myPass";
        String senderId = "sfdsdf@gmail.com";
        String ccId = "dddd@yahoo.com";
        String bccId = "ffff@yahoo.com";
        try {
            MultiPartEmail email = new HtmlEmail();
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator(myEmailId, myPassword));
            email.setDebug(true);
            email.setHostName("smtp.mail.yahoo.com");
            email.addTo(senderId);
            email.addCc(ccId);
            email.addBcc(bccId);
            email.setFrom(myEmailId);
            email.setSubject("Test Email");
            email.setMsg("<font face='verdana' size='3'>Here is the test email in HTML format "
                    + "<table>"
                    + "<tr><th>id</th><th>Name</th></tr>"
                    + "<tr><th>1</th><th>Name 1</th></tr>"
                    + "<tr><th>2</th><th>Name 2</th></tr>"
                    + "<tr><th>3</th><th>Name 3</th></tr>"
                    + "<tr><th>4</th><th>Name 4</th></tr>"
                    + "</table>"
                    + "</font>");

            // add the attachment
            EmailAttachment attachment = new EmailAttachment();
            attachment.setPath("/Users/alkandari/Desktop/SMART/Fahim/test_small.pdf");
            attachment.setDisposition(EmailAttachment.ATTACHMENT);
            email.attach(attachment);

            attachment = new EmailAttachment();
            attachment.setPath("/Users/alkandari/Desktop/SMART/Fahim/test.png");
            attachment.setDisposition(EmailAttachment.ATTACHMENT);
            email.attach(attachment);
            System.out.println("EmailAttachment.ATTACHMENT==" + EmailAttachment.ATTACHMENT);

            // send the email
            email.send();
            System.out.println("email=====" + email + "==");
            System.out.println("Mail sent!");
        } catch (Exception e) {
            System.out.println("Exception :: " + e);
        }
    }
} 
```

如果您想从其他任何地方发送，您需要在以下两个地方进行更改

```
email.setSmtpPort(587);
email.setHostName("smtp.mail.yahoo.com"); 
```

* * *

## 编辑 1

我不确定，但是如果您想将图像设置为电子邮件的背景，那么我相信您需要在服务器上实时拍摄图像，然后提供服务器路径`<img src="server.com/images/myImage.png" />`

* * *

## 编辑 2

要添加更多 cc，您需要添加 N 个 cc 语句，如下所示。

```
email.addCc("id1@test.com");
email.addCc("id2@test.com");
email.addCc("id3@test.com");
email.addCc("id4@test.com"); 
```

我不确定`email.addCc("id1@test.com, id2@test.com, id3@test.com");`。我认为这行不通。你可以试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:47:15.567

通过使用 java 邮件 API，您可以实现这一点。

[http://www.tutorialspoint.com/java/java_sending_email.htm](http://www.tutorialspoint.com/java/java_sending_email.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:00:24.090

[这里](http://tutorial4java.blogspot.in/2012/07/java-mail-api-tutorial.html)提供了非常清晰和简单的示例。最大化它足以解决问题...... :)

# unit-testing - 跟踪被测方法的最佳方法

> ID：14021467
> 
> 赞同：0
> 
> 时间：2012-12-24T12:32:41.987
> 
> 标签：unit-testing, mstest

我们有一个现有的大型应用程序，我们将为此返回并创建单元测试。我们从我们的一些核心方法开始，然后将其扩展到包括大多数内部和公共方法。

是否有跟踪我们应用程序中哪些方法包含单元测试（或不包含）的最佳实践？也许是一个属性或其他方式？换句话说，我们希望能够查看代码中的方法并知道该方法是否在单元测试中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:40:03.953

我认为您正在寻找**代码覆盖率**。

检查这些链接：

[单元测试代码覆盖率 - 什么是好的数字？](http://james.newtonking.com/archive/2008/06/14/unit-test-code-coverage-what-is-a-good-number.aspx)

[代码覆盖率](http://en.wikipedia.org/wiki/Code_coverage)

[单元测试的合理代码覆盖率是多少（为什么）？](https://stackoverflow.com/questions/90002/what-is-a-reasonable-code-coverage-for-unit-tests-and-why)

# mysql - 从备份 .SQL 源文件创建新的 MySql 架构会重置自动增量 id 列？

> ID：14021475
> 
> 赞同：1
> 
> 时间：2012-12-24T12:33:26.630
> 
> 标签：mysql, schema, auto-increment

我正在开发一个`database schema`我希望向客户提供的大型产品。

我是`MySql`数据库管理的新手。如何恢复`.sql`架构文件，以便它还将所有自动增量 id 列重置回`0`或`Null`再次重置。

我实际上恢复到一个新的模式名称并插入了一条测试记录，发现自动 id 列从它们在最后一个模式名称中停止的位置开始递增。

我如何在`MySql`数据库建模中解决这个问题？

我希望始终能够为付费客户“分拆”我当前版本数据模型的精确副本。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T20:25:37.647

您可以只转储架构，而无需通过这种方式转储数据：

```
$ mysqldump -d databasename > databasename-schema.sql 
```

如果您使用 InnoDB 表（您应该这样做），则每次重新启动 MySQL 实例时都会重置自动增量值。它在每个表中重置的值等于当前存储在表中的最大值加 1。因此，如果您的表为空，则该值将为 1。

如果您不想在恢复后重新启动 MySQL 实例，您可以在恢复之前在 CREATE TABLE 语句中去除自动增量子句：

```
$ mysqldump -d databasename | sed -e 's/AUTO_INCREMENT=[0-9][0-9]*//' 
  > databasename-schema.sql 
```

否则，您可以 ALTER TABLE 以在恢复后重置自动增量值。这必须在每个表的基础上完成，但您可以从 INFORMATION_SCHEMA 查询具有自动增量键的表的列表：

```
$ mysql -N -B -e "SELECT CONCAT('ALTER TABLE \`', table_schema, '\`.\`', 
  table_name, '\` AUTO_INCREMENT=1;') AS ddl FROM INFORMATION_SCHEMA.TABLES 
  WHERE table_schema = 'test' AND AUTO_INCREMENT IS NOT NULL" | mysql -v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T19:13:20.330

您可以使用它来转储表结构，并且您会发现所有从头开始的自动增量主键，就像您之前定义的那样，它不会执行插入查询，而是会创建您所有的`stored procedure`,`views`和`tables`:

```
cat backup.sql | grep -v ^INSERT | mysql -u $USER -p 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-23T22:17:55.640

AUTO_INCREMENT 后重置

```
TRUNCATE `table` 
```

并且当您`INSERT`之后运行批量查询（从您的数据备份）时，该`AUTO_INCREMENT`值将自动更新为正确的值（插入的记录+1）。

因此，您不需要手动更新`AUTO_INCREMENT`值（这是一种不好的做法）。

当您想从备份中恢复多于一个受外键约束的表时，您可以在 TRUNCATE+INSERT 之前禁用 FK 检查，并在完成后重新启用它。可以在此处找到详细信息：[截断所有表（其中大部分有约束）。如何暂时放下它们](https://stackoverflow.com/questions/1499568/truncate-all-tables-most-of-which-have-constraints-how-to-temporarily-drop-t)

# java - 共享首选项未保存 android App 的确切实例状态

> ID：14021477
> 
> 赞同：0
> 
> 时间：2012-12-24T12:33:49.407
> 
> 标签：java, android

我正在使用 Java 创建一个简单的 Click Counter Android 应用程序。我是 Java 新手。我正在尝试保存应用程序退出时的计数，无论是按下后退按钮还是应用程序关闭或崩溃等。这是我到目前为止的代码：

```
public class wazeefa extends Activity  {

//Count Button  
TextView txtCount;
Button btnCount;
int count; 
Button wmute;
Button wreset;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wazeefa);

    //SAVE COUNT
    SharedPreferences app_preferences = 
       PreferenceManager.getDefaultSharedPreferences(this);

    count = app_preferences.getInt("count", 0);

    txtCount = (TextView)findViewById(R.id.wcount);
    txtCount.setText("This app has been started " + count + " times.");

    SharedPreferences.Editor editor = app_preferences.edit();
    editor.putInt("count", ++count);
    editor.commit();

    //Button SOUND AND COUNT
    final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.bubble);

    txtCount = (TextView)findViewById(R.id.wcount); 
    txtCount.setText(String.valueOf(count));
    btnCount = (Button)findViewById(R.id.wclick);   

    btnCount.setOnClickListener(new OnClickListener() {
        public void onClick(View V) {
        final ImageView image = (ImageView) findViewById(R.id.imageview);
           count++; 
           if (count > 50) count = 0; image.setImageResource(R.drawable.duroodimage);
           if (count > 0) image.setImageResource(R.drawable.duroodimage);
           if (count > 9) image.setImageResource(R.drawable.zikrimage); 
           if (count > 39) image.setImageResource(R.drawable.duroodimage);
           txtCount.setText(String.valueOf(count));
           mpButtonClick.start(); 

    //RESET Button
    wreset = (Button)findViewById(R.id.wreset);       
    wreset.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            count = 0; 
            image.setImageResource(R.drawable.duroodimage);;
               txtCount.setText("0");

    } 
```

我的应用程序有 2 个问题。

首先，计数没有保存到应用程序关闭然后再次打开时的状态。例如，如果计数为“20”并且我点击了后退按钮，则返回到同一页面，计数将显示为“3”。- 有趣的是，每次我尝试上述方法并在点击后退按钮后返回应用程序时，计数都会增加 1 个计数。

第二个问题是，当我返回应用程序并且计数显示为“5”时，重置按钮不再起作用 - 它什么也不做。但是当我继续计数然后点击重置按钮时，它再次将计数更改为零。

请任何人都可以协助解决上述2个问题？

建议后的新代码：

```
public class wazeefa extends Activity  {

//Count Button  
TextView txtCount;
Button btnCount;
Button wmute;
Button wreset;
public static int count=0;
SharedPreferences app_preferences;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wazeefa);

    //SAVE COUNT
    SharedPreferences app_preferences = 
            PreferenceManager.getDefaultSharedPreferences(this);

    count = app_preferences.getInt("count", 0);

    txtCount = (TextView)findViewById(R.id.wcount);
    txtCount.setText("This app has been started " + count + " times.");}

protected void onPause() {
     super.onPause();

    // save count value here
   SharedPreferences.Editor editor = app_preferences.edit();
   editor.putInt("count", count);
   editor.commit();

    //SOUND and COUNT
    final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.bubble);

    txtCount = (TextView)findViewById(R.id.wcount); 
    txtCount.setText(String.valueOf(count));
    btnCount = (Button)findViewById(R.id.wclick);   

    btnCount.setOnClickListener(new OnClickListener() {
        public void onClick(View V) {
        final ImageView image = (ImageView) findViewById(R.id.imageview);
           count++; 
           if (count > 50) count = 0; image.setImageResource(R.drawable.duroodimage);
           if (count > 0) image.setImageResource(R.drawable.duroodimage);
           if (count > 9) image.setImageResource(R.drawable.zikrimage); 
           if (count > 39) image.setImageResource(R.drawable.duroodimage);
           txtCount.setText(String.valueOf(count));
           mpButtonClick.start(); 

    //RESET Button
    wreset = (Button)findViewById(R.id.wreset);       
    wreset.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            count = 0; 
            image.setImageResource(R.drawable.duroodimage);;
               txtCount.setText("0");

    } 
```

我的代码的最后一部分：

```
 protected void onPause() {
         super.onPause();

    // save count value here

      SharedPreferences.Editor editor = app_preferences.edit();
      editor.putInt("count", count);
      editor.commit();

         };
     });
      }});
  };} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T12:38:53.767

在类级别声明计数为静态：

```
public static int count=0;
SharedPreferences app_preferences ; 
```

并`onPause`用于将计数值保存 `SharedPreferences`为：

```
 protected void onPause() {
     super.onPause();

    // save count value here
   SharedPreferences.Editor editor = app_preferences.edit();
   editor.putInt("count", count);
   editor.commit();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:36:04.200

如果您希望它在退出时保存，请将此代码发布在 onDestroy() 而不是 onCreate()

```
SharedPreferences.Editor editor = app_preferences.edit();
editor.putInt("count", ++count);
editor.commit(); 
```

# linux - 如何使用linux命令删除新行

> ID：14021478
> 
> 赞同：0
> 
> 时间：2012-12-24T12:34:07.433
> 
> 标签：linux

我有一个包含如下数据的文件：

```
text1, text2, text3,
text4
text5, text6, text7,
text8 
```

我需要将 text4、text8 带到以逗号结尾的上一行。请问我怎样才能做到这一点？

**编辑：**请注意，我有数千行。我需要自动化这个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:41:15.857

尝试以下`perl`命令：

```
$ perl -p -e 's/,\n/, /g' file
text1, text2, text3, text4
text5, text6, text7, text8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:42:11.677

```
> perl -pe 'if(/,\n/){$_=~s/\n//g}' temp
text1, text2, text3,text4
text5, text6, text7,text8 
```

就地做：

```
perl -pi -e 'if(/,\n/){$_=~s/\n//g}' temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:02:02.420

Perl 可能是最简单的工具：

```
perl -wpe 'chomp if /,$/' file 
```

这说：打印“文件”的所有行，但如果该行以逗号结尾，则省略换行符。

# iphone - iOS系统状态栏中/上的消息

> ID：14021482
> 
> 赞同：0
> 
> 时间：2012-12-24T12:34:35.260
> 
> 标签：iphone, ios, user-interface, statusbar

如何在 iOS 应用程序的状态栏中/上添加自定义消息（见图）？

![http://jonathangurebo.tumblr.com/post/38709179103](../Images/1409feca44dede117a7775a0b3d5eccd.png)

这是我图片的另一个链接：http: [//jonathangurebo.tumblr.com/post/38709197648](http://jonathangurebo.tumblr.com/post/38709197648)
这是[应用程序链接](http://www.itunes.apple.com/se/app/skolmaten/id416550379?mt=8)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T12:41:30.783

您可以隐藏默认状态栏并创建一个与状态栏高度相同的自定义栏并将其显示在视图上。Apple 不允许您自定义状态栏，只能更改其颜色（灰色/黑色）、不透明度（不透明/半透明）和可见性（隐藏/可见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:03:11.793

为此，您需要自定义状态栏。

还有另一个替代品。基本上，我们不会对状态行为进行任何更改。因为它反对苹果的指导方针和规则。所以，保持状态栏不变。您可以像屏幕截图一样显示状态消息。

请看下面的演示类，它将满足您的要求。

[https://github.com/ecstasy2/toast-notifications-ios](https://github.com/ecstasy2/toast-notifications-ios)

它就像一个Android消息。

希望对您有所帮助。

干杯。

# multithreading - 在基于事件驱动/事件循环的程序中为每个回调设置截止日期

> ID：14021490
> 
> 赞同：0
> 
> 时间：2012-12-24T12:35:19.147
> 
> 标签：multithreading, callback, libevent, event-loop

在典型的 ASIO 或 libevent 等基于事件的编程库中，有没有办法为每个回调设置截止日期？

我担心回调中可能出现无限循环。有没有办法优雅地检测它们，从任务队列中删除行为不端的回调并继续处理队列中的其他任务？

我可以想办法通过外部线程来检测它并杀死事件循环线程并创建一个不同的线程，但我想看看是否有其他常用的方法。我相信这是某人在某个时间点遇到过并通过解决方案思考的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:43:24.597

没有它的合作，没有一般的方法可以解除线程的粘连，无论它是否正在运行回调。如果线程以某种方式被强制从外部停止，线程可能持有关键锁，或者可能已经获得永远不会被释放的资源。

如果您确实需要此功能，那么所有可能被中断的代码都必须设计为支持某些特定的中断方法。您可以在输入回调时启动截止时间计时器，并在完成后取消它。截止时间计时器必须触发线程的中断机制。您至少需要一个运行 I/O 服务的其他线程，以便某个线程在另一个线程中运行回调时运行计时器处理程序。

您还可以使用某种包装器将代码隔离在其自己的进程中。然后，如果代码无法终止，您可以从外部终止该进程。

# asp.net - nopCommerce 示例数据删除

> ID：14021496
> 
> 赞同：0
> 
> 时间：2012-12-24T12:36:02.810
> 
> 标签：asp.net, sql-server, sql-server-2008, nopcommerce

我想清理[nopCommerce](http://www.nopcommerce.com) 2.65 的样本数据。我不想重新安装它。如果有人有一些想法或脚本，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T22:21:45.303

这对我有用 - 它基于我从另一个用户那里找到的旧脚本。我也很享受在开发过程中使用示例数据的能力，但我需要一种方法来删除所有产品/订单/等。在上线之前。重新创建新数据库的问题是我丢失了所有设置、自定义文本/语言/等。我想保留。我只想摆脱产品和订单。

这是我在 NopCommerce 板上的帖子： [http ://www.nopcommerce.com/boards/t/23464/delete-sample-data.aspx#103867](http://www.nopcommerce.com/boards/t/23464/delete-sample-data.aspx#103867)

*如果我错过了什么，请随时发表评论！*

# clearcase - 查找在特定交付中交付了哪些开发人员活动

> ID：14021499
> 
> 赞同：1
> 
> 时间：2012-12-24T12:36:06.733
> 
> 标签：clearcase, cleartool

在 ClearCase 中，我如何找到在特定交付中交付了哪些开发人员活动？

正在做

> lscat -long

在任何一项活动中都不会透露此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:54:20.503

见[`lsact`（`cleartool lsactivity`）](https://stackoverflow.com/questions/769786/vendor-branches-in-git)：

> 列出促成集成活动变更集的活动或基线：

```
lsact/ivity -contrib activity-selector [...] 
```

活动选择器必须是：

```
activity:anActivityName@\aPVob      # Windows
activity:anActivityName@/vobs/aPVob # Unix 
```

交付活动将被命名为“ `deliver.xxx`”，并且是记录在交付期间修改的所有文件的活动的名称。

![交付](../Images/a029afe8c00af7e2676138f98ff9e2e9.png)

这将允许您`Activity1`在上图中找到第一次交付的“”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:49:03.027

尝试

```
cleartool lsact -contrib activity-name 
```

while`activity-name`是一个交付活动

# php - Zend Framework 2 - 模块中的内部服务器错误

> ID：14021503
> 
> 赞同：0
> 
> 时间：2012-12-24T12:36:28.107
> 
> 标签：php, zend-framework2, internal-server-error

我刚刚创建了一个带有子模块的模块，例如`Backend\Entity1`. 我检查了每个路径和命名空间，它们似乎都还可以。

我一个一个地取出了代码块，但我还是通过 Firebug 得到了一个

> “网络错误：500 内部服务器错误”

有什么想法可以找到错误吗？

我只是不知道可能出了什么问题。老实说，为什么框架自己解释正在发生的事情？它现在只是在黑暗中钓鱼......

顺便说一句：error.log 也没有显示任何内容......

**编辑：**

我猜这个错误是因为我的应用程序找不到`phtml`文件而引发的。也许我错了，但通常当我遇到这种愚蠢的错误时，它与丢失的文件有关......

我的配置代码如下所示：

```
'view_manager' => array(
    'template_path_stack' => array(
        'entity' => __DIR__ . '/../view',
    ),
), 
```

我的命名空间是`MasterData\Entity`，我的 add/edit/delete/index.phtml 位于`view\masterdata\entity`.

有什么想法可以告诉我`TemplatePathStack`如何在这个目录中查找我的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T15:36:25.197

如果您希望访问您的子模块，请在父模块中创建正确的路由，以便访问您的子模块。

我恕我直言，如果您需要创建子模块，创建为模块并将模块放在应用程序的模块文件夹下，如果您有组件或第三方模块，请将其放在供应商文件夹下。

这将在后期更容易管理，您的网址也会更简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T17:17:58.607

In my case, I created the new model in another way but I had the same error when I tried to see the result in the explorer. The problem (in my situation) was the access to files from the explorer, It resolves by changing files's permissions in linux's terminal.

# javascript - 使用javascript将html转换为xml？

> ID：14021505
> 
> 赞同：1
> 
> 时间：2012-12-24T12:36:31.253
> 
> 标签：javascript, xml, json, html

是否可以使用 JavaScript 将所有 div 子信息转换为 XML 或 JSON？

```
$("#droppable").droppable({
drop : function(event, ui) {
    var id = $(ui.draggable).attr("id");
    var cloneObj = $((ui.draggable).clone());
    $(cloneObj).removeClass("draggable ui-draggable");
    if (id === "txt") {
        inputOBj = document.createElement("input");
        inputOBj.setAttribute("id", "txt" + i);
        $("#droppable").append(inputOBj);
    } else if (id == "combo") {
        inputOBj = document.createElement("select");
        inputOBj.setAttribute("id", "select" + i);
        console.log("");
    }
  }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T12:46:53.590

我相信你可以使用 XMLSerializer 来做到这一点。

```
var yourString = new XMLSerializer().serializeToString(cloneObj[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T04:15:57.460

有一个名为outerHTML 的属性。它在 HTML 中设置或检索对象及其内容。你可以通过以下方式使用它。例如：

```
$(document).ready(function() {  
    $('#p').click(function() {
        alert($('#p')[0].outerHTML);
    }); 
}); 
```

提示：p 是您在页面正文中的任何标签 ID。

# android - 在自定义警报对话框内的文本视图中显示搜索栏的进度

> ID：14021511
> 
> 赞同：3
> 
> 时间：2012-12-24T12:37:15.157
> 
> 标签：android, android-alertdialog

我有一个自定义警报对话框，其中包含一个搜索栏和一个文本视图。当用户与搜索栏的拇指交互时，我想在该文本视图中以百分比显示搜索栏的进度。

这是我的代码..

```
AlertDialog.Builder builder = new AlertDialog.Builder(PrefsActivity.this);
LayoutInflater inflater = getLayoutInflater();
View layoutFromInflater = inflater.inflate(R.layout.dialog_fragment_sensitivity_layout, null);      
builder.setView(layoutFromInflater)
    .setPositiveButton("Ok", new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {

        }
    }).setNegativeButton("Cancel", new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        }
    });

    final AlertDialog dialog = builder.create();
    dialog.show();

    TextView progress_tv = (TextView) dialog.findViewById(R.id.seekbar_progress_tv2);           
    progress_tv.setText("sdf"); 
    SeekBar seekBar = (SeekBar) dialog.findViewById(R.id.seekBar1); 
    seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) { 
        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {                             
            System.out.println("progress... " + progress);      
            progress_tv.setText(progress);  // Exception...
        }
    }); 
```

不幸的是，每当我尝试拖动拇指时，应用程序都会崩溃，给我一个

onSeekBarChangeListener 中的 ResourceNotFound 异常，我将 seekbar 的进度设置为该文本视图。

两个我都试过了。。

```
TextView progress_tv = (TextView) dialog
                .findViewById(R.id.seekbar_progress_tv2); 
```

和

```
TextView progress_tv = (TextView) layoutFromInflater
                    .findViewById(R.id.seekbar_progress_tv2); 
```

但问题仍然存在..

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T15:09:18.953

`TextView`期望得到`charSequence`并且你将一个 int 传递给它。解决这个问题的一种方法是`Integer.toString(progress)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:03:21.920

而不是将 null 作为父级添加您的根布局作为父级，同时膨胀对话框布局，如下所示。

```
View layoutFromInflater = inflater
                           .inflate(R.layout.dialog_fragment_sensitivity_layout,
                           (ViewGroup) findViewById(R.id.yourLayoutRoot)); 
```

并仅通过查找视图`layoutFromInflater`。

希望这对你来说应该很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:11:31.470

```
Dialog yourDialog = new Dialog(this);
LayoutInflater inflater = (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
View layout = inflater.inflate(R.layout.your_dialog,(ViewGroup)findViewById(R.id.your_dialog_root_element));
yourDialog.setContentView(layout); 
```

因此，您可以对元素进行如下操作：

```
TextView yourDialogTextView = (TextView)layout.findViewById(R.id.your_dialog_tv);
SeekBar yourDialogSeekBar = (SeekBar)layout.findViewById(R.id.your_dialog_seekbar);
// ... 
```

等等，为 seekbar 设置侦听器。

编辑：seekbar onchangelistener 应如下所示：

```
OnSeekBarChangeListener yourSeekBarListener = new OnSeekBarChangeListener() {
@Override
public void onStopTrackingTouch(SeekBar seekBar) {
        //add code here
}

@Override
public void onStartTrackingTouch(SeekBar seekBar) {
        //add code here
}

@Override
public void onProgressChanged(SeekBar seekBark, int progress, boolean fromUser) {
        //add code here
yourDialogTextView.setText(progress);
    }
 };
 yourDialogSeekBar.setOnSeekBarChangeListener(yourSeekBarListener); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-25T14:38:45.593

我知道这是一个很老的问题，但实际上很容易。只需输入这个

```
progress_tv.setText("" + progress + "%"); 
```

# android - 如何访问片段中存在的视图

> ID：14021513
> 
> 赞同：0
> 
> 时间：2012-12-24T12:37:18.557
> 
> 标签：android, android-fragments

我有一个 带有一个**editText的****片段**

 **```
<EditText
    android:id="@+id/textViewName"

/> 
```

我想在运行时更改它的文本。

如何访问编辑文本以便更改其文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:42:57.253

在里面`onCreateView()`，你可以通过扩展你的布局来找到特定的视图。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.myFragmentLayout, container, false);
    EditText editText = (EditText) view.findViewById(R.id.textViewName);
    return view;
} 
```

## 或者

`getView()`如果你不想膨胀，你可以使用它，它会返回片段的根视图。

```
EditText editText = (EditText) getView().findViewById(R.id.textViewName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:54:02.413

假设您有一个类 EditFragment

```
public class EditFragment extends Fragment
{
    private EditText edit;
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
          View view = inflater.inflate(R.layout.myFragmentLayout, container, false);
          edit = (EditText) view.findViewById(R.id.textViewName);
          return view;
    }
} 
```

你可以做一个吸气剂来访问`EditText`这个`Fragment`

```
public EditText getEditText()
{

    return edit;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T14:11:12.417

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        EditText e = (EditText) view.findViewById(R.id.textViewName);

    ....
} 
```**

# ruby-on-rails - jQuery Mobile 应用程序显示监视器尺寸而不是手机屏幕尺寸

> ID：14021518
> 
> 赞同：0
> 
> 时间：2012-12-24T12:37:38.720
> 
> 标签：ruby-on-rails, jquery-mobile

我正在按照[Railscast#199](http://railscasts.com/episodes/199-mobile-devices)调整我的移动博客应用程序，但使用的是[JQuery Mobile](http://jquerymobile.com/demos/1.2.0/)而不是 jQTouch。

在我的显示器上，我的应用程序看起来不错，但由于笔记本电脑屏幕的尺寸比手机的尺寸更宽，所以它的宽度很大。如果我将浏览器窗口调整到笔记本电脑屏幕宽度的三分之一左右，它看起来很完美，这是我希望在手机 (iPhone 4S) 上看到的视图。但是，当我在手机上查看页面时，我得到的比例与笔记本电脑屏幕上的相同。澄清一下，这意味着标题非常细，所有的按钮和字体都很小。

我当然可以把一切都做得更大，但根据我所看到的资源，这似乎不是正确的方法。毕竟，标题在监视器上正确呈现但在手机上不正确呈现是没有意义的。

是什么导致了这个问题？似乎我可能以某种方式在页面上“强制”了一个固定宽度，但我不确定这是怎么回事，因为我实际上在 jQuery Mobile 之外没有任何 CSS。任何输入/提示将不胜感激。

**应用程序.mobile.erb**

```
<!DOCTYPE html>
<html>
<head>
<%= stylesheet_link_tag "mobile" %>
<%= javascript_include_tag "mobile" %>
<body>
  <div data-role="page">
    <%= render "layouts/header" %>
    <div>
      <% flash.each do |name, msg| %>
        <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
          <a class="close" data-dismiss="alert">×</a>
          <%= msg %>
        </div>
      <% end %>
    </div>
    <div>
      <%= yield %>
      <%= link_to "Full Site", :mobile => 0 %>
      <%= render "layouts/footer" %>   
    </div>
  </div>
</body> 
```

**资产/javascripts/mobile.css.scss**

```
/*
 *= require_self
 *= require jquery.mobile-1.2.0.min.css
 */ 
```

**资产/javascripts/mobile.js**

```
//= require jquery
//= require jquery.mobile-1.2.0.min.js 
```

**查看/布局/_header.mobile.erb**

```
<div data-role="header">
  <h1>Home</h1>
  <% if user_signed_in? %>
    <%= link_to "logout", destroy_user_session_path, :method => :delete %>
  <% else %>
    <%= link_to "login", new_user_registration_path %>
  <% end %>
</div> 
```

如果可能还有其他相关文件，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:00:15.933

尝试将`viewport`元添加到`head`application.mobile.erb 部分

```
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= stylesheet_link_tag "mobile" %>
  <%= javascript_include_tag "mobile" %> 
```

# tsql - Groovy (Java) 在 TransactSQL 数据库 (Microsoft SQL Server 2008 R2) 中以毫秒为单位存储时间

> ID：14021519
> 
> 赞同：1
> 
> 时间：2012-12-24T12:37:48.637
> 
> 标签：tsql, datetime, grails, groovy, java.util.date

您好，我有一个 Grails 应用程序，它使用 java.util.Date 将计时值存储到 Microsoft SQL Server 数据库中。

我从具有该格式的 .csv 文件中加载日期值：

```
java.util.Date send_date = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS").parse(data[1]); 
```

`send_date`如果我用调试器观察 var ，毫秒字段的值是正确的`millis = 241`

`send_date` 作为一种类型的变量在我的数据库中`java.util.Date`创建了一个`Data Type = datetime`列，但是数据库中的值是`2007-10-04 10:10:53.240`这意味着毫秒是错误的。它总是随机出现，有时它是正确的毫秒数，有时是 +1 或 -1。

有人知道与我的数据库兼容的其他数据类型吗，我已经尝试过`java.sql.Date`，但是我没有构造函数来添加这种格式`"yyyy-MM-dd HH:mm:ss.SSS"`如果有人知道如何使用这种输入格式创建另一个日期对象，请告诉我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:03:59.990

SQL Server 的 DATETIME 数据类型具有 3 毫秒的分辨率。如果您需要更高的分辨率，请使用 DATETIME2 数据类型。它具有 100 ns 的分辨率。

# spring - 如何存储静态字段？

> ID：14021521
> 
> 赞同：0
> 
> 时间：2012-12-24T12:37:53.883
> 
> 标签：spring, static

在redis java客户端中，我发现了这个：

```
To use it, init a pool:

JedisPool pool = new JedisPool(new JedisPoolConfig(), "localhost");
You can store the pool somewhere statically, it is thread-safe. 
```

我只是想知道，使用 spring，我怎样才能静态存储 JedisPool。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:40:51.377

你没有。

在春季，最好定义一个 JedisPool bean 并在必要时自动装配它。

例如，使用 xml 配置：

```
 <bean id="jedisPool" class="redis.clients.jedis.JedisPool">
      <constructor-arg>
           <bean class="redis.clients.jedis.JedisPoolConfig" />
      </consrtuctor-arg>
      <constructor-arg value="localhost" />
 </bean> 
```

然后，在你的豆子里面：

```
@Autowire
JedisPool jedisPool; 
```

如果你使用[spring java config](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-java)会更简单——你可以完全使用你发布的代码来定义池 bean：

```
@Configuration
public class Configuration {

    @Bean
    public JedisPool createJedisPool() { 
        return new JedisPool(new JedisPoolConfig(), "localhost");
    }
} 
```

此外，您可能想看看[spring-data - redis](http://www.springsource.org/spring-data/redis)

# javascript - JS/AJAX：单击按钮刷新页面的一部分

> ID：14021526
> 
> 赞同：0
> 
> 时间：2012-12-24T12:38:09.370
> 
> 标签：javascript, jquery, ajax

我目前正在创建一个从 .txt 文件中回显随机行的生成器。一切都很好，但是我需要让页面的这个特定部分在单击按钮时与随机行刷新相呼应。我尝试了多种方法都无济于事，而且我的想法已经不多了——我对 JavaScript/AJAX 还是很陌生，不知道如何去做。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:51:43.560

使用 Jquery Ajax 从文件中获取内容并将内容显示到 div

```
$.ajax({
  type: "GET",
  url: "yourfilename.txt"
  }).done(function( msg ) {
  $("#YOURDIVID").html(msg.d);
}); 
```

绑定按钮的点击事件

```
$(function(){
  $("#YOURBUTTONID").on("click",function(){
    //do your work
  });
}); 
```

刷新逻辑可以包装到一个函数中并在单击按钮时调用，或者您可以使用 javascript settimeout 方法。

# webserver - 站点镜像的优缺点是什么

> ID：14021531
> 
> 赞同：2
> 
> 时间：2012-12-24T12:38:38.900
> 
> 标签：webserver, mirroring

## 问题一：

当站点被镜像时，它们各自服务器的内容是同步的（可能是自动的（实时镜像）或手动的）。 **这是真的？**所有服务器是否“平等”，或者是否存在主服务器？然后将其更改发送到其他“子服务器”？所以所有的更改都必须发生在主服务器上，而子服务器不允许更改？

## 问题2：

**预期优势：**

*   全球优势：当最初托管在美国的网站镜像到伦敦的服务器时，欧洲人将从中受益。他们将有更好的响应时间，并且由于下载者的数量被分成两部分（美国和欧洲服务器），他们的下载速度可以更高。
*   安全性：当一台服务器崩溃或被黑客入侵时，另一台服务器可以继续正常运行。

**预期的缺点：**

*   如果不使用*实时镜像*，一些用户将不得不等待更新的内容。
*   更多的服务器等于更高的维护成本。

哪些其他项目可以添加到这些列表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T22:11:52.920

> 当站点被镜像时，它们各自服务器的内容是同步的。这是真的？

是的，镜像站点应始终与其主站点同步，即使由于多种原因（例如更新传播时间、网络故​​障等）它们可能不同步。
有几种方法可以实现这一点；例如，一个简单的方法是在 cron 作业中使用[rsync](http://en.wikipedia.org/wiki/Rsync)命令；一个更好的解决方案是Debian 和 Ubuntu Linux 发行版使用的“[推送镜像”技术。](http://www.debian.org/mirror/push_mirroring)

> 所有服务器是否“平等”，或者是否存在主服务器，然后将其更改发送到其他“子服务器”？

不，并非所有服务器都是平等的；通常，内容提供者更新一个或多个主服务器，而这些主服务器又将更新的内容提供给其他镜像。
例如，在[Fedora 基础架构](https://fedoraproject.org/wiki/Infrastructure/Mirroring/Tiering)中，有主服务器、第 1 层服务器（最快的镜像）和第 2 层服务器。

> 所以所有的更改都必须发生在主服务器上，而子服务器不允许更改？

是的，在镜像上下文中，内容只能在主服务器（一个或多个）上更新。

> 预期优势

也许可以在[Wikipedia](http://en.wikipedia.org/wiki/Mirror_%28computing%29)上找到最全面的镜像原因列表：

*   保留网站或页面，尤其是在关闭或即将关闭时。
*   允许特定地理位置的用户更快地下载。
*   抵制审查并促进信息自由。
*   提供对其他不可用信息的访问。
*   保存历史内容。
*   来平衡负载。
*   以抵消突然的、暂时的流量增加。
*   提高网站在搜索引擎中的排名。
*   作为绕过防火墙的一种方法。

> 预期的缺点

*   成本：您必须购买额外的服务器并花费时间来操作它们。
*   不一致：当一个或多个镜像未与主同步时（这不仅可能发生在手动同步中，也可能发生在实时同步中）。

作为进一步的参考，由于镜像是 Web 分布式系统的一种简单形式，您也可能对[本文](http://www.aosabook.org/en/distsys.html)感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:46:07.167

此外，对于流行下载的文件，镜像有助于减少网络流量，确保网站或文件更好的可用性，或者使站点或下载的文件能够更快地到达靠近镜像站点的用户。镜像是创建和维护镜像站点的实践。

镜像站点是原始站点的精确副本，通常会经常更新以确保它反映原始站点的内容。当原始站点可能在地理上相距遥远时，镜像站点用于加快访问速度（例如，德国的一个常用网站可能会安排在美国拥有一个镜像站点）。在某些情况下，原始站点（例如，在小型大学服务器上）可能没有与 Internet 的高速连接，并且可能会在更大的站点上安排一个镜像站点，该站点具有更高的连接速度，并且可能更接近于广大观众。

除了镜像网站，您还可以镜像可以从文件传输协议服务器下载的文件。Netscape、Microsoft、Sun Microsystems 和其他公司都有镜像站点，您可以从中下载他们的浏览器软件。

镜像可以被认为是一种静态的内容交付形式。

# xhtml - 页面中间的文字 epub

> ID：14021545
> 
> 赞同：0
> 
> 时间：2012-12-24T12:39:18.270
> 
> 标签：xhtml, epub

我正在 epub 中写一本书，问题是我希望文本位于页面中间。我试过`style="top:50%"`了，它适用于 Sigil，但不适用于我的阅读器应用程序。我听说索尼使用了一种特殊类型的 epub，所以如果您对此有所了解，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:46:29.170

我不了解索尼的具体情况，但总的来说，您不能指望这种定位逻辑适用于所有电子书阅读器。任何涉及具有静态（默认值）以外的值的 CSS“位置”属性的任何内容都可能有问题，尤其是对于 EPUB2 阅读器。我猜这在 iBooks 或 Readium 中可以正常工作，你尝试过吗？

最安全的选择是图像。

如果您等待 3-18 个月，大多数电子书阅读器都会升级，您可以期望他们中的绝大多数都支持您正在尝试做的事情。

# ios - iPhone 5 模拟器返回错误的屏幕尺寸

> ID：14021548
> 
> 赞同：1
> 
> 时间：2012-12-24T12:39:42.943
> 
> 标签：ios, ios6, ios-simulator

> **可能重复：**
> [iPhone 5 + iOS6 将如何决定应用程序是否必须在信箱模式下运行](https://stackoverflow.com/questions/12404699/how-iphone-5-ios6-will-decide-if-an-app-must-be-run-in-letterbox-mode)

我在用着：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds]; 
```

获得屏幕尺寸。

iOS 模拟器上 iPhone 5 的返回值为 {0,0,320,480}。因此，我的 OpenGL 视口比屏幕小，而且我有 2 个黑色条纹。我目前无法尝试设备上的代码。

是否有一些解决方法来获得正确的屏幕尺寸？

我必须提到我使用同一个项目好几年了（从 iPhone 3G 开始）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T12:43:34.503

您需要在项目中添加 Default-568h@2x.png。

# java - 无法在android中更改TextView的文本

> ID：14021549
> 
> 赞同：1
> 
> 时间：2012-12-24T12:39:43.973
> 
> 标签：java, android, textview

我有一个视图，从自定义布局膨胀，其中包含一个`TextView`. 我尝试`TextView`通过字符串资源从 xml 设置文本，并在布局膨胀后以编程方式设置文本 - 我仍然只得到`android.widget.RelativeLayout@4166f2d8`而不是普通文本。我究竟做错了什么？

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layers_list_item_root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="10dp" >

    <CheckBox
        android:id="@+id/layers_list_item_switch"
        blablabla... />

    <TextView
        android:id="@+id/layers_list_item_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_toLeftOf="@id/layers_list_item_switch"
        android:selectAllOnFocus="true"
        android:text="@string/layers_list_default_text"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:singleLine="true"
        android:scrollHorizontally="true"
        android:textColor="@android:color/black"
        android:textSize="16sp"
        android:textStyle="bold"
        android:typeface="serif"
        android:clickable="true" />

</RelativeLayout> 
```

查看充气方式：

```
public View createLayerListItem (String text) {
    View v = View.inflate(this, R.layout.layers_list_item, null);
    TextView text_view = (TextView) v.findViewById(R.id.layers_list_item_text);
    text_view.setText(text);
    return v;
} 
```

这个视图用于填充一些`ListView`：

```
ListView layers_list = (ListView)layers_dialog.findViewById(R.id.layers_list);
ArrayAdapter<View> adapter = new ArrayAdapter<View>(this, R.layout.layers_list_item, R.id.layers_list_item_text);

adapter.add(createLayerListItem("Test 1"));
adapter.add(createLayerListItem(""));
adapter.add(createLayerListItem("Very very very very very very long line")); 
```

我`TextViews`都错了，显示`android.widget.RelativeLayout@4166f2d8`。我还尝试使用 xml 中的默认文本，而不是从代码中更改它——我仍然没有从资源中获取文本，只有地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:46:21.827

因此，数组适配器将您的视图转换为字符串数组，它将 textview 文本设置为其类名。所以你应该像下面这样使用，

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.layer_list_item, R.id.layers_list_item_text);

adapter.add(createLayerListItem("Test 1"));
adapter.add(createLayerListItem("Test 2"));
adapter.add(createLayerListItem("Test 3"));

public String createLayerListItem(String text) {
        View v = View.inflate(this, R.layout.layer_list_item, null);
        TextView text_view = (TextView) v
                .findViewById(R.id.layers_list_item_text);
        text_view.setText(text);
        return text_view.getText().toString();
    } 
```

# ios - 无法使用 regionDidChangeAnimated MapKit 停止 UIActivityIndi catorView

> ID：14021551
> 
> 赞同：0
> 
> 时间：2012-12-24T12:39:57.763
> 
> 标签：ios, mapkit, uiactivityindicatorview

基本上，我显示了一个 UIActivityIndi​​catorView，它是一个属性并且是合成的，并且在它自己的开始动画方法中。我初始化此指标并将其添加为子视图，如下所示

```
-(void)startLoader{
//regionChange is the ivar for UIActivitiyIndicatorView
self.regionChange = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
self.regionChange.frame = CGRectMake(145.0f, 180.0f, 40.0f, 40.0f);
[self.view addSubview:self.regionChange];
[self.regionChange startAnimating];
 } 
```

并在使用地图套件调用以下方法时启动动画。

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated{

//This calls the activity start method
[self startLoader];

} 
```

指示器正确显示并开始动画。当地图区域发生变化时，它会向服务器发出 post 请求，并在使用 NSXMLParser 解析的响应中接收 XML。当解析停止时，它会更新地图，这是我为指标调用 stop 方法的时候，但它永远不会触发停止它。这是我的停止方法中的内容。

```
-(void)stopLoader{    

[self.regionChange stopAnimating];
[self.regionChange removeFromSuperView];
 NSlog (@"IS THIS EVER CALLED");

} 
```

我也尝试过 hidesWhenStopped 但是从来没有调用过这个和上面的？

# ios - 使用 Xcode 中的库（即 ImageMagick、AdMob）包括在项目或链接中？

> ID：14021552
> 
> 赞同：3
> 
> 时间：2012-12-24T12:40:02.683
> 
> 标签：ios, xcode, static-libraries

*（这可能已经被问过很多次了，但我没有在建议的问题/搜索中看到它）*

假设我有可能在多个 iOS 项目中使用的 ImageMagick 和 AdMob 之类的第三方代码库，链接到它们或将它们包含在项目中是“更好”吗？

我正在将 XCode 与 git 一起使用。在一个项目中，我将它们包括在内，因此它们都处于源代码控制之下。在另一个项目中，它们是链接的，我得到“？” 所有库文件旁边的（问号）图标。令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:49:18.230

我对使用 3rd 方库的诚实建议是尽可能多地使用 CocoaPods。很有可能所有人都可以使用。

包含 CocoaPod 更好的原因：

*   易于从项目中添加和删除
*   自动链接到您的项目
*   包含后易于更新

使用 CocoaPod 的缺点：

*   如果不包含您的库，则对您没有帮助
*   您不想使用新创建的 xcworkspace 而不是 xcodeproj

不使用它们的理由很薄弱，我承认对它们有偏见。我不得不使用许多静态库和框架，其中大部分是在内部创建的。CocoaPods 使共享、维护和安装库变得轻而易举。所以请考虑在你的项目中使用它们。

如果 CocoaPods 不是你的东西或不是一个选项，那么链接到库或框架可能是第二好的。如果您拖放到您的项目中（虽然很容易），那么以后更新会很痛苦。动态链接允许您将它们从文件目录中交换出来，而无需更改 Xcode 项目中的任何内容。设置需要更多技巧，但从长远来看，最终会更好。无论如何，海事组织。

# repeater - asp.net 嵌套中继器

> ID：14021555
> 
> 赞同：0
> 
> 时间：2012-12-24T12:40:12.533
> 
> 标签：repeater, invisible

我对嵌套中继器有一些问题。我有以下标记

```
<asp:UpdatePanel ID="upSupportDownloads" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <div class="five-col">
            <asp:Repeater ID="rep1" runat="server">
                <ItemTemplate>
                    <asp:Repeater ID="rep2" runat="server">
                        <ItemTemplate></ItemTemplate>
                    </asp:Repeater>
                </ItemTemplate>
            </asp:Repeater>  
... 
```

这不是一个工作代码，它是理解我的结构的一个例子。我无法从后面的代码访问 rep2。我可以打电话给rep1。但是 rep2 对我来说是不可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:47:55.930

您需要在主中继器的 OnItemDataBound 事件中找到嵌套中继器。像这样：

```
if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
{
     DataRowView row = (DataRowView)e.Item.DataItem;

     Repeater nestedRepeater = e.Item.FindControl("NestedRepeater") as Repeater;
     nestedRepeater.DataSource = getMyData();
     nestedRepeater.DataBind();
 } 
```

# continuous-integration - 使用 buildbot 批量重建

> ID：14021558
> 
> 赞同：0
> 
> 时间：2012-12-24T12:40:31.143
> 
> 标签：continuous-integration, buildbot

我已经使用 buildbot 几个月了，我真的很满意。它与 github 连接。

我正在开发图像处理软件，处理时间非常重要。直到最近，我还在进行自动构建 + 测试，现在我正在监控测试所花费的时间。

因为最近才实施了对处理时间的监控，所以我想构建几个月以来的所有先前提交，所以我可以看到一些潜在的处理时间缺陷。

[我可以使用ForceScheduler](http://buildbot.net/buildbot/docs/latest/developer/cls-forcesched.html)在特定提交上触发手动构建，但有没有一种简单的方法可以在最后 500 次提交上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:17:22.390

假设您已将 PBSource 配置为更改源，您可以简单地编写一个脚本以`buildbot sendchange`在命令行上调用。

```
buildbot sendchange --master {MASTERHOST}:{PORT} --auth {USER}:{PASS}
    --who {USER} {FILENAMES..} 
```

见：[http ://buildbot.readthedocs.org/en/latest/manual/cmdline.html](http://buildbot.readthedocs.org/en/latest/manual/cmdline.html)

# .htaccess - .htaccess：替换部分网址

> ID：14021563
> 
> 赞同：0
> 
> 时间：2012-12-24T12:41:02.763
> 
> 标签：.htaccess, redirect, replace

我有一些重复的内容，想重定向到正确的 url（删除部分 url 并重定向）

例子：

```
http://www.domain.com/en/url/1-url
http://www.domain.com/es/url/1-url
http://www.domain.com/fr/url/1-url
.... 
```

个别应重定向到：

```
http://www.domain.com/en/url
http://www.domain.com/es/url
http://www.domain.com/fr/url
.... 
```

因为我必须对很多 url 执行此操作，所以我不能手动重定向它们，并且需要一个规则来检测 url 是否包含“/1-url”，如果是，则从 url 中删除这部分 - 但只有这部分.

如果一个mod-rewrite英雄可以帮助我，那就太好了。我正在通过重写规则寻找 .htaccess 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:55:40.760

检查这个：

```
RewriteRule (\w{2})/([^/]+)/\d+-[^/]+$ /$1/$2 [R=301,L]
RewriteRule ([^/]+)/\d+-[^/]+$ /$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:44:53.123

如果您对每个 1-url 页面使用导入的文件，则只需将重定向方法添加到导入的文件。

例如，您的每个 1-url 页面都有 header.php，将重定向功能添加到 header.php

# php - 如何管理厚框 tb_show 函数中的参数？

> ID：14021564
> 
> 赞同：4
> 
> 时间：2012-12-24T12:41:02.603
> 
> 标签：php, thickbox

我在表单上使用下面的脚本`(say, form-A)`来加载厚盒中的另一个表单`(form-B)`，值由控制器传递。首先，在 中`form-A`，我从下拉“customerID”中选择一个选项，然后“添加项目”按钮（ID 为“addProject”）变为可见，单击该按钮时，会出现一个带有 form-B 的厚框。在这里，在表格 B 中，我想传递选定的客户。我怎样才能做到这一点？我尝试了下面的代码，并尝试访问`$_GET['custID']`控制器的`manage_project`功能，但它显示为空白。但是当我提醒 url1（我在下面评论过）时，ID 就来了。下面的代码在表单-A 视图文件中。

```
('#addProject').click(function(){
        var url1='<?php echo SITEURL ?>/xome/invoice/manage_project?TB_iframe=true&height=800&width=700&inlineId=innerDiv&class=thickbox&custID='+$('#customerID').val();

        //alert(url1);
        tb_show('Add More Project',url1,'');
    }) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T13:09:08.987

根据 (http://thickbox.net/) 的文档：

> 重要提示：在 TB_iframe 参数之前添加所有其他查询参数。“TB”之后的所有内容都从 URL 中删除。

因此，请尝试在 TB_iframe 之前添加 custID。然后您将能够在脚本中使用变量进行操作，例如通过`$_GET['custID']`. 例如：

```
var url1='<?php echo SITEURL ?>/xome/invoice/manage_project?custID='+$('#customerID').val() + '&TB_iframe=true&height=800&width=700&inlineId=innerDiv&class=thickbox'; 
```

# matlab - 控制图中绘图中标记之间的间距

> ID：14021565
> 
> 赞同：1
> 
> 时间：2012-12-24T12:41:07.753
> 
> 标签：matlab, matlab-figure

如何控制绘图中标记之间的空间，以便虽然我正在绘制 100,000 个点，但它仅在样本点显示标记，并且当绘图在两点之间下降时不显示标记

示例如下图所示： ![在此处输入图像描述](../Images/3f4bda00528a736e30a09b1ba73f3488.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:50:21.987

这样做的最粗略的方法是将每条线绘制两次：一次没有标记，但有所有点。第二次只绘制没有线的点样本，但只绘制标记。

# ios5 - 是否有可能动态更改字段

> ID：14021575
> 
> 赞同：0
> 
> 时间：2012-12-24T12:42:14.307
> 
> 标签：ios5, ios4

当用户单击编辑按钮更改字段时，是否有可能将文本字段等字段更改为文本视图....请告诉我任何可能性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T12:46:21.227

在我的脑海中 - 编辑时动态切换到文本视图，完成编辑后将文本放入文本字​​段并将其放回视图中。

尝试一下，如果您在编码时遇到任何问题，请再回来。

# php - 电子邮件中的 HTML 表格

> ID：14021576
> 
> 赞同：2
> 
> 时间：2012-12-24T12:42:26.163
> 
> 标签：php, html, html-table, html-email

我制作了以下电子邮件模板，但不是以表格格式显示数据；它在电子邮件正文中显示了完整的 Html 代码。请帮我解决这个问题。

```
 <table style="font-family: Lucida Sans Unicode, Lucida Grande, Sans-Serif; font-size: 12px; background: #fff; margin: 45px; width: 480px; border-collapse: collapse; text-align: left;" summary="Website Uptime Statistics">
<thead>
    <tr>
        <th style="font-size: 14px; font-weight: normal; color: #039; padding: 10px 8px; border-bottom: 2px solid #6678b1;" scope="col">#S.No.</th>
        <th style="font-size: 14px; font-weight: normal; color: #039; padding: 10px 8px; border-bottom: 2px solid #6678b1;" scope="col">Website</th>
        <th style="font-size: 14px; font-weight: normal; color: #039; padding: 10px 8px; border-bottom: 2px solid #6678b1;" scope="col">Status</th>
    </tr>
</thead>
<tbody>

    <tr>
        <td style="border-bottom: 1px solid #ccc; color: #669; padding: 6px 8px;">1</td>
        <td style="border-bottom: 1px solid #ccc; color: #669; padding: 6px 8px;">http://google.com</td>
        <td style="border-bottom: 1px solid #ccc; color: #669; padding: 6px 8px;">Up</td>
    </tr>
    <tr>
        <td style="border-bottom: 1px solid #ccc; color: #009; padding: 6px 8px;">2</td>
        <td style="border-bottom: 1px solid #ccc; color: #009; padding: 6px 8px;">http://google.com</td>
        <td style="border-bottom: 1px solid #ccc; color: #009; padding: 6px 8px;">Down</td>
    </tr>
    <tr>
        <td style="border-bottom: 1px solid #ccc; color: #669; padding: 6px 8px;">$300</td>
        <td style="border-bottom: 1px solid #ccc; color: #669; padding: 6px 8px;">$300</td>
        <td style="border-bottom: 1px solid #ccc; color: #669; padding: 6px 8px;">$300</td>
    </tr>

</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:09:34.103

您是否设置了电子邮件的内容类型，以便接收电子邮件应用程序知道它包含 HTML 并因此可以正确显示它？

`Content-Type: text/html; charset=UTF-8`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-24T13:09:45.503

```
$html = '';
$html .= ' <table style="font-family: Lucida Sans Unicode, Lucida Grande, Sans-Serif; font-size: 12px; background: #fff; margin: 45px; width: 480px; border-collapse: collapse; text-align: left;" summary="Website Uptime Statistics"><thead>';
.....
echo $html; 
```

试试这个

# playframework - Play Framework 2 & requirejs - 在 dist 构建中不尊重路径

> ID：14021578
> 
> 赞同：7
> 
> 时间：2012-12-24T12:42:48.393
> 
> 标签：playframework, playframework-2.0, requirejs

我在 Play 2.0 中的 requirejs 实现遇到了一些问题，在开发模式下可以找到所有模块，但是在运行 dist 时似乎不尊重我设置的路径。

这是设置：

/assets/javascripts/templates/template1/main.js：

```
require.config({
   baseUrl: "/assets/javascripts",
   paths : {
           jquery : [ 'core/lib/jquery/jquery-1.8.3' ],
           can : [ 'core/lib/canjs/can' ]
   }
});

require([ "jquery", "can", "core/global/moduleloader" ], function($, can, ml) {
   //do stuff

}); 
```

在我调用的模板中：

```
@helper.requireJs(core = routes.Assets.at("javascripts/require.js").url, 
    module = routes.Assets.at("javascripts/templates/template1/main").url) 
```

在我的 build.scala 中，我告诉它要优化哪些文件，如下所示：

```
val main = play.Project(appName, appVersion, appDependencies).settings(
    requireJs += "templates/template1/main"
) 
```

客户端所有依赖项都已解决，但是当使用 dist 进行优化时，我得到：

```
[info] RequireJS optimization has begun...
[info] app.build.js:
[info] ({appDir: "javascripts",
[info]           baseUrl: ".",
[info]           dir:"javascripts-min",
[info]           modules: [{name: "templates/template1/main"}]})
model contains 41 documentable templates

Tracing dependencies for: templates/template1/main
JavaException: java.io.FileNotFoundException:       /Users/paulsmith/Projects/Experiments/play/Moduluar/target/scala-2.10/classes/public/javascripts-min/jquery.js (No such file or directory)
In module tree:
    templates/template1/main 
```

从我所见，路径配置被忽略，因此它解析路径不正确..这似乎是由于 app.build.js 覆盖了 main.js 中的配置。

有没有人遇到过这个问题？

谢谢，

保罗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T20:27:54.077

我遇到了同样的问题，将 requireJsShim 键添加到我的 Build.scala 解决了这个问题：

```
val main = play.Project(appName, appVersion, appDependencies).settings( 
    requireJs += "main.js",
    requireJsShim += "main.js"
} 
```

**requireJsShim**告诉 play 使用 main.js 中的设置，例如路径和垫片，而不是 play app.build.js 中的默认值

我正在使用 Play 2.1.0；此功能直到 2012 年 12 月 12 日才添加，所以我不确定它包含在哪些 2.1 候选版本中

参考：
[https ://play.lighthouseapp.com/projects/82401-play-20/tickets/945-allow-specifying-your-own-requirejs-build-file#ticket-945-4](https://play.lighthouseapp.com/projects/82401-play-20/tickets/945-allow-specifying-your-own-requirejs-build-file#ticket-945-4)
[https://github.com /playframework/Play20/commit/ba71f3967c3001cc0db8a4a7b4f9a31c8eebbc45](https://github.com/playframework/Play20/commit/ba71f3967c3001cc0db8a4a7b4f9a31c8eebbc45)

# html - 叠加/重叠元素

> ID：14021581
> 
> 赞同：0
> 
> 时间：2012-12-24T12:42:53.323
> 
> 标签：html, css

查看我的代码：

```
<table id="preview_table">
<thead>
<tr>
  <th class="not_mapped_style" style="display: none; text-align: center;">id</th>
  <th init_value="Name" style="text-align: center;" class="">
      <div class="mapped_col">mapped!</div>
      <div class="col_name">DisplayName</div>
      <div class="user_def_col">(user defined)</div>
  </th>
  <th init_value="Email" style="text-align: center;" class="">
      <div class="mapped_col">mapped!</div>
      <div class="col_name">PrimaryEmail</div>
      <div class="user_def_col">(user defined)</div>
  </th>
  <th init_value="Age" style="text-align: center;" class="">
      <div class="mapped_col">mapped!</div>
      <div class="col_name">Age</div>
      <div class="user_def_col">(user defined)</div>
  </th>
</tr>
</thead>
<caption>List</caption>
<tbody>
<tr>
  <td style="display: none;" property_value="0" property_name="id" align="center">0</td>
  <td class="" property_value="user" property_name="DisplayName" align="center">user</td>
  <td class="" property_value="admin@domain.com" property_name="PrimaryEmail" align="center">admin@domain.com</td>
  <td class="" property_value="69" property_name="Age" align="center">69</td>
  <td class="" property_value="+722616807" property_name="Hand_Phone" align="center">+722616807</td>
</tr>  
</tbody> 
```

这是CSS：

```
#preview_table .user_def_col {
color: gray;
font-size: .8em;
}

#preview_table .mapped_col {
color: green;
font-size: .6em;
float: right;    
position: relative;
top: -10px;    
} 
```

目前我的**映射！**文本损坏列标题名称的居中。我想知道是否可以叠加**映射！**标题列名称（例如**Age**）上的文本，而列名称仍以单元格宽度为中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:05:01.007

请检查以下代码。我更改了字体大小并为行添加了颜色，以便 UI 正确可见..

```
<table id="preview_table">
<caption>List</caption>
<thead>
<tr>
  <th class="not_mapped_style" style="display: none; text-align: center;">id</th>
  <th init_value="Name" style="text-align: center;" class="">
      <div class="col_name">DisplayName</div>
      <div class="user_def_col">(user defined)</div>
      <div class="mapped_col">MAPPED!!!!</div>
  </th>
  <th init_value="Email" style="text-align: center;" class="">
      <div class="col_name">PrimaryEmail</div>
      <div class="user_def_col">(user defined)</div>
      <div class="mapped_col">MAPPED!!!!</div>
  </th>
  <th init_value="Age" style="text-align: center;" class="">
      <div class="col_name">Age</div>
      <div class="user_def_col">(user defined)</div>
      <div class="mapped_col">MAPPED!!!!</div>
  </th>
</tr>
</thead>
<tbody>
<tr>
  <td style="display: none;" property_value="0" property_name="id" align="center">0</td>
  <td class="" property_value="user" property_name="DisplayName" align="center">user</td>
  <td class="" property_value="admin@domain.com" property_name="PrimaryEmail" align="center">admin@domain.com</td>
  <td class="" property_value="69" property_name="Age" align="center">69</td>
  <td class="" property_value="+722616807" property_name="Hand_Phone" align="center">+722616807</td>
</tr>  
</tbody>
</table​&gt; 
```

**CSS：**

```
#preview_table .user_def_col {
color: gray;
font-size: 15px;
}

#preview_table .mapped_col {
color: green;
font-size: 12px;
position: relative;
    margin-top: -20px;
    opacity: 0.5;
}
tr
{
    border: 1px solid red;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:46:19.917

你可以把“映射！” 进入`span`并使用[绝对定位](http://www.w3schools.com/cssref/pr_class_position.asp)（父单元格需要有`position:relative`）

# android - 谷歌电视流协议 Android

> ID：14021582
> 
> 赞同：0
> 
> 时间：2012-12-24T12:42:53.743
> 
> 标签：android, streaming, protocols, google-tv

我正在使用 Visio 设备开发 google tv 的应用程序，我想知道其中哪些流协议可用于 google tv。任何机构都可以在回复中给我参考。HTTP、RTMP、PNM、RTSP、彩信、RTSPU、RTSPT、MMSU、MMST。

请帮助任何形式的帮助将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T23:11:42.630

在易于设置和开发的情况下，HTTP 将是您在 Vizio 上的最佳选择。您可以使用 VLC 来试验不同的流原型。您应该密切注意的是您传输媒体的编解码器 - [https://developers.google.com/tv/android/docs/gtv_media_formats](https://developers.google.com/tv/android/docs/gtv_media_formats)

# c# - 在 Asp.Net 中登录的用户的 FisrtName 和 LastName

> ID：14021593
> 
> 赞同：-8
> 
> 时间：2012-12-24T12:43:45.067
> 
> 标签：c#, asp.net, authentication

如何获取登录 asp.net 站点的用户的名字和姓氏？我必须在注销按钮旁边的母版页上的标签中显示名字和姓氏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:51:35.510

你没有。

即使您的网站设置为需要登录才能访问（即文件访问，而不是网站本身的软件登录），创建用户帐户也不需要名字和姓氏，并且甚至不是名字和姓氏的单独字段。

如果您的网站有软件登录，那么您可能已经让用户输入了此类信息，但您是回答您自己问题的最佳人选，因为其他人不会知道您将信息存储在哪里，或者如何访问它。

# python - UnboundLocalError：局部变量

> ID：14021596
> 
> 赞同：1
> 
> 时间：2012-12-24T12:44:03.687
> 
> 标签：python, urllib2

我的代码如下：

```
search_request = urllib2.Request(url,data=tmp_file_name,headers={'X-Requested-With':'WoMenShi888XMLHttpRequestWin'})
#print search_request.get_method()
try:
    search_response = urllib2.urlopen(search_request)
except urllib2.HTTPError:
    pass
html_data = search_response.read()
print html_data 
```

但是当我运行它时，我得到了这个：

```
Traceback (most recent call last):
  File "G:\MyProjects\python\lfi_tmp.py", line 78, in <module>
    print hello_lfi()
  File "G:\MyProjects\python\lfi_tmp.py", line 70, in hello_lfi
    html_data = search_response.read()
UnboundLocalError: local variable 'search_response' referenced before assignment 
```

我尝试添加

```
global search_response 
```

再次运行，我得到一个这样的异常

```
Traceback (most recent call last):
  File "G:\MyProjects\python\lfi_tmp.py", line 78, in <modul
    print hello_lfi()
  File "G:\MyProjects\python\lfi_tmp.py", line 70, in hello_
    html_data = search_response.read()
NameError: global name 'search_response' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:46:53.510

如果你得到`HTTPError`你没有`search_response`变量。所以这一行：

```
html_data = search_response.read() 
```

引发您的错误，因为您正在尝试访问`search_response`未声明的内容。我认为您应该`html_data = search_response.read()`像这样替换该行，例如：

```
search_request = urllib2.Request(url,data=tmp_file_name,headers={'X-Requested-With':'WoMenShi888XMLHttpRequestWin'})
    #print search_request.get_method()
try:
    search_response = urllib2.urlopen(search_request)
    html_data = search_response.read()  #New here
except urllib2.HTTPError:
    html_data = "error" #And here

print html_data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:54:41.743

代码将转到`exception`下面的代码中，其中`search_response`未设置变量。

```
try:
    search_response = urllib2.urlopen(search_request)
except urllib2.HTTPError:
    pass
html_data = search_response.read()
print html_data 
```

而不是使用`pass`，引发错误或将`search_response`变量设置为`None`.

也许是这样的：

```
try:
    search_response = urllib2.urlopen(search_request)
except urllib2.HTTPError:
    raise SomeError
html_data = search_response.read()
print html_data 
```

或者

```
try:
    search_response = urllib2.urlopen(search_request)
except urllib2.HTTPError:
    search_response = None
if html_data:
    html_data = search_response.read()
    print html_data
else:
    # Do something else 
```

# google-apps-script - 如何使用 Google Apps 脚本下载创建的 csv 文件？

> ID：14021597
> 
> 赞同：6
> 
> 时间：2012-12-24T12:44:04.527
> 
> 标签：google-apps-script

我在 Google Apps 脚本中创建了一个文件，如下所示

```
DocsList.createFile(
   "test.csv", 
   "Row1Col1,Row1Col2 \r\n Row2Col1,RowCol2 \r\n Row3Col1,Row3Col2"); 
```

如何以编程方式下载它（例如通过弹出下载对话框）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:02:57.690

尝试使用[ContentService](https://developers.google.com/apps-script/class_contentservice)，您可以触发下载，甚至可以通过[TextOutput.downloadAsFile 方法](https://developers.google.com/apps-script/class_textoutput#downloadAsFile)设置文件名。您还可以设置返回数据的内容 mime 类型，但只能设置为[预定义的枚举常量](https://developers.google.com/apps-script/class_contentservice_mimetype)。见[他们的例子](https://developers.google.com/apps-script/content_service)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-12T19:11:16.380

要使用应用程序脚本下载文件，您需要发布应用程序并使用 doGet() 方法（否则“downloadFileAs”将不起作用）

或者...

在 Drive 中创建文件，并在对话框 ui 中提供链接。这里有两个链接选项，一个需要用户登录，另一个不[取自这里](https://stackoverflow.com/questions/20281272/initiate-a-download-from-google-apps-script "取自这里")

```
 var dat=getFileDataFromAnotherFunction();
  var file = DriveApp.createFile('name.csv',dat);
  var t = HtmlService.createTemplateFromFile('DownloadDialog');
  t.url1 = getDlUrl(file);
  t.url2 = file.getDownloadUrl().replace('&gd=true','') 
  rt =  t.evaluate().setSandboxMode(HtmlService.SandboxMode.IFRAME);
  uia.showModalDialog(rt,'Download the csv') 
```

其中“下载对话框.html”

是以下文件（也在脚本编辑器中）

```
<div>
<a target="_blank" href="<?= url1 ?>">  l1 </a>
<br>
<hr>
<a target="_blank" href="<?= url2 ?>"> link 2 </a> 
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-14T17:19:18.870

如果您想在客户端显示下载对话框，则以下代码有效。这是 CSV 文件的示例。

```
return ContentService.createTextOutput("bbb,aaa,ccc").downloadAsFile("MyData.csv")
    .setMimeType(ContentService.MimeType.CSV); 
```

# android - 在 onStart 中恢复 Fragment ViewState？

> ID：14021600
> 
> 赞同：8
> 
> 时间：2012-12-24T12:44:13.083
> 
> 标签：android

当方向改变时，片段`viewState`仅在`onStart`. 之后`onAttach`，，甚至之后。`onCreateView`_ 为什么？这为时已晚。`onViewCreated``onActivityCreated``onCreate`

我需要根据一些 TextView 值将数据库查询结果填充到 ListView。目前我尝试在`onViewCreated`. 但是在这一步不会恢复视图状态。

我可以强制提前恢复吗？或者如何克服这个问题？请有任何想法。

PS：我使用actionbarsherlock和依赖的android support-v4 r7库

PS2：如果我要加载数据，`onStart`那么它会在片段恢复后执行额外的查询`onStop`（我可以通过添加一些布尔值来解决这个问题`isLoaded`——但这不是最好的解决方案）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T15:45:36.680

在 Android API >= 17 (Android 4.2 Jelly Beans) 中有一个方法： `public void onViewStateRestored (Bundle savedInstanceState)`

[如文档](http://developer.android.com/reference/android/app/Fragment.html#onViewStateRestored%28android.os.Bundle%29)中所述，它在之前`onStart()`和之后被调用。`onActivityCreated()`

在 Android API < 17 中没有这样的方法。但是有两种解决方案：

1.  初始化时不要依赖视图状态`Fragment`，并将所有必需的初始化状态保存为`Fragment`状态（即覆盖`Fragment#onSaveInstanceState()`）。稍后您可以在或`onCreate()`中恢复片段状态。`onCreateView()``onViewCreated()`
2.  `onStart()`按照相关规定执行初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T12:56:30.780

[编辑 1 - - - - - - -]

// 检查 Fragment 回栈是否已被填充

// 如果不是，则创建并填充布局。

// 所以你的片段不会重新创建

```
 YourFragment yourFragment = (YourFragment )fm.findFragmentById(R.id.fragment_container);

  if (yourFragment == null) {
       FragmentTransaction ft = fm.beginTransaction(); 
       ft.replace(R.id.fragment_container, new YourFragment ());       
       ft.commit();
  } 
```

[编辑 1 - - - - - - -]

![在此处输入图像描述](../Images/0fb59f56067c9f63b90920ba59ea450b.png)

```
/**
 * Listing 4-4: Fragment skeleton code
 * Listing 4-5: Fragment lifecycle event handlers
 */
package com.paad.fragments;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class MySkeletonFragment extends Fragment {

  // Called when the Fragment is attached to its parent Activity.
  @Override
  public void onAttach(Activity activity) {
    super.onAttach(activity);
    // Get a reference to the parent Activity.
  }

  // Called to do the initial creation of the Fragment.
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Initialize the Fragment.
  }

  // Called once the Fragment has been created in order for it to
  // create its user interface.
  @Override
  public View onCreateView(LayoutInflater inflater, 
                           ViewGroup container,
                           Bundle savedInstanceState) {
    // Create, or inflate the Fragment's UI, and return it. 
    // If this Fragment has no UI then return null.
    return inflater.inflate(R.layout.my_fragment, container, false);
  }

  // Called once the parent Activity and the Fragment's UI have 
  // been created.
  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    // Complete the Fragment initialization Ğ particularly anything
    // that requires the parent Activity to be initialized or the 
    // Fragment's view to be fully inflated.
  }

  // Called at the start of the visible lifetime.
  @Override
  public void onStart(){
    super.onStart();
    // Apply any required UI change now that the Fragment is visible.
  }

  // Called at the start of the active lifetime.
  @Override
  public void onResume(){
    super.onResume();
    // Resume any paused UI updates, threads, or processes required
    // by the Fragment but suspended when it became inactive.
  }

  // Called at the end of the active lifetime.
  @Override
  public void onPause(){
    // Suspend UI updates, threads, or CPU intensive processes
    // that don't need to be updated when the Activity isn't
    // the active foreground activity.
    // Persist all edits or state changes
    // as after this call the process is likely to be killed.
    super.onPause();
  }

  // Called to save UI state changes at the
  // end of the active lifecycle.
  @Override
  public void onSaveInstanceState(Bundle savedInstanceState) {
    // Save UI state changes to the savedInstanceState.
    // This bundle will be passed to onCreate, onCreateView, and
    // onCreateView if the parent Activity is killed and restarted.
    super.onSaveInstanceState(savedInstanceState);
  }

  // Called at the end of the visible lifetime.
  @Override
  public void onStop(){
    // Suspend remaining UI updates, threads, or processing
    // that aren't required when the Fragment isn't visible.
    super.onStop();
  }

  // Called when the Fragment's View has been detached.
  @Override
  public void onDestroyView() {
    // Clean up resources related to the View.
    super.onDestroyView();
  }

  // Called at the end of the full lifetime.
  @Override
  public void onDestroy(){
    // Clean up any resources including ending threads,
    // closing database connections etc.
    super.onDestroy();
  }

  // Called when the Fragment has been detached from its parent Activity.
  @Override
  public void onDetach() {
    super.onDetach();
  }
} 
```

> 来源：Professional Android Development 4 - Reto Meier

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:30:35.520

您始终可以自己处理方向更改`onConfigurationChanged()`。在这里查看一个很好的例子[http://alexfu.tumblr.com/post/13926762386/android-dev-handling-fragment-recreation-manually](http://alexfu.tumblr.com/post/13926762386/android-dev-handling-fragment-recreation-manually)

# java - 在克隆中使用协变返回类型真的会破坏兼容性吗？

> ID：14021601
> 
> 赞同：1
> 
> 时间：2012-12-24T12:44:18.310
> 
> 标签：java

我最近遇到了[为什么 Java 5+ API 不利用协变返回类型？](https://stackoverflow.com/questions/3751160/why-doesnt-java-5-api-take-advantage-of-covariant-return-types).

我同意这个问题，在 Java 5 JDK 开发人员可以使用协变返回类型进行克隆并更改现有类，以便我们可以编写

```
ArrayList<String> list = new ArrayList<String>();
ArrayList<String> clone = list.clone(); 
```

代替

```
ArrayList<String> clone = (ArrayList<String>)list.clone(); 
```

但由于某些原因，他们没有这样做。

我做了一些实验，将我的`test.ArrayList.clone`返回类型从 Object 更改为 ArrayList 以查看“以前编译的类无法找到具有新返回类型的方法”但无法重现该问题。在字节码中，对 old 的调用`test.ArrayList.clone`看起来像

```
 INVOKEVIRTUAL test.ArrayList.clone()Ljava/lang/Object; 
```

也就是说，方法签名包含返回类型，所以在我更改后它的签名更改为`test.ArrayList.clone()Ltest.ArrayList`. 所以看起来老类会坏，但实际上它不会因为test.ArrayList.class中有2个克隆方法

```
 public clone()Ltest.ArrayList;
  public bridge clone()Ljava/lang/Object; 
```

第二个是桥，它所做的只是调用协变版本

```
 ...
 INVOKEVIRTUAL ArrayList.clone()Ltest.ArrayList;
 ... 
```

所以老班继续工作没有问题。

谁能解释更改克隆的返回类型如何破坏字节码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:35:43.470

[这个对链接问题的答案](https://stackoverflow.com/a/3751291/396730)确实包含原因：它会破坏`ArrayList`覆盖该`clone`方法并指定`Object`为返回类型的所有子类。

# matlab - 找到三角形内一个点的位置，以使每个部分都有特定的区域（2D）

> ID：14021602
> 
> 赞同：0
> 
> 时间：2012-12-24T12:44:21.650
> 
> 标签：matlab, math, optimization, system, equations

考虑一个具有 3 个边缘点 (1,2,3) 的平面内三角形（黑色）。这个三角形的面积被认为是 A。然后对于三角形内的任意点并将该点连接到每个边，我们将有 3 个小三角形，（区域 A12、A23、A13​​）。如果我知道大小三角形之间的面积比为：

*   n1 = A12 / A
*   n2 = A23 / A
*   n3 = A13 / A

我想找到任意点（x0，y0）的位置。

* * *

*注意：给定三角形的三个边，面积可以计算为： (x1,y1) , (x2,y2) , (x3,y3)

A = 0.5 * det([x1 y1 1 ; x2 y2 1 ; x3 y3 1]);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:30:39.343

这可以用重心坐标简单地解决。给定一个点 p 和三角形点 t1, t2, t3，点 p 可以表示为

```
p = s1 * t1 + s2 * t2 + s3 * t3 
```

其中 s1-s3 是重心坐标。这些可以解释为与三角形点相对的三角形的相对面积。这正是 n1-n3 给你的。

所以你可以用上面的公式计算你的任意点。

# mongodb - mongodb：如何查看聚合命令的执行时间？

> ID：14021605
> 
> 赞同：30
> 
> 时间：2012-12-24T12:44:27.287
> 
> 标签：mongodb

我在 mongo shell 中执行以下 mongodb 命令

```
db.coll.aggregate(...) 
```

我看到了结果列表。但是可以看到查询执行时间吗？聚合查询的解释方法是否有任何等效功能。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-24T13:47:56.230

```
var before = new Date()
#aggregation query
var after = new Date()
execution_mills = after - before 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-12-09T10:16:50.663

您可以向文件中添加一个`time`函数[`.mongorc.js`](https://docs.mongodb.com/manual/mongo/#mongorc-js-file)（在您的主目录中）：

```
function time(command) {
    const t1 = new Date();
    const result = command();
    const t2 = new Date();
    print("time: " + (t2 - t1) + "ms");
    return result; 
} 
```

然后你可以像这样使用它：

```
time(() => db.coll.aggregate(...)) 
```

* * *

**警告**

这种方法没有给出相关的结果`db.collection.find()`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-29T18:05:17.860

我看到在 mongodb 中可以使用这两个命令：

*   db.setProfilingLevel(2)

*   因此查询后您可以使用 db.system.profile.find() 查看查询执行时间和其他

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-29T09:05:46.123

或者您可以安装出色的[mongo-hacker](https://github.com/TylerBrock/mongo-hacker)，它会自动为每个查询计时、执行查询、`pretty()`对输出进行着色、对键进行排序等等：

![在此处输入图像描述](../Images/5abdf33b64358acdd69fd0090546e9d0.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-12-24T14:20:08.807

我会写一个答案来更好地解释这一点。

基本上，聚合框架还没有 explain() 功能：[https ://jira.mongodb.org/browse/SERVER-4504](https://jira.mongodb.org/browse/SERVER-4504)

然而，有一种方法可以衡量客户端，但并非没有缺点：

*   您没有测量数据库
*   您正在测量应用程序
*   关于中间部分的未知数太多，无法获得准确的读数，即您不能说 MongoDB 服务器制定文档结果、序列化、通过网络发送、de 花费了 0.04 毫秒- 由应用程序序列化，然后存储到哈希中，允许您从总数中减去该总和以获得聚合基准。

但是话虽如此，您可以通过在与`mongos`/相同的服务器上的 MongoDB 控制台中执行此操作来获得稍微准确的结果`mongod`。这将在中间创建很少的内容，仍然太多但足以获得您可以大致信任的读数。因此，您可以在该位置使用@Zagorulkin 的答案。

# android - Android C# HtmlAgilityPack

> ID：14021606
> 
> 赞同：2
> 
> 时间：2012-12-24T12:44:43.123
> 
> 标签：android, html-agility-pack

如何将 HtmlAgilityPack 与 Android 一起使用（Mono for Android - C#）？我已添加参考，但我不断收到此错误：

> 错误 CS0012：在未引用的程序集中定义了类型“System.Xml.XPath.IXPathNavigable”。您必须添加对程序集 'System.Xml, Version=2.0.0.0 的引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T08:22:44.160

我已将 HtmlAglilityPack 合并到我在所有 MonoDroid 项目中使用的基本库程序集中，并取得了巨大成功。我什至没有尝试以预编译的形式使用它们，只是将它的源代码添加到我的项目中。

然后我无耻地编辑了 HtmlWeb.cs 以丢弃 Windows 的东西：

第 893 到 903 行（可能有所改变，看看附近）：

```
 if (!helper.GetIsDnsAvailable())
        {
        #if Android
            contentType = def;
        #else
            //do something.... not at full trust
            try
            {
                RegistryKey reg = Registry.ClassesRoot;
                reg = reg.OpenSubKey(extension, false);
                if (reg != null) contentType = (string)reg.GetValue("", def);
            }
            catch (Exception)
            {
                contentType = def;
            }
        #endif
        } 
```

第 934 到 946 行（可能有些变化，看看附近）：

```
 if (helper.GetIsRegistryAvailable())
        {
        #if Android
            ext = def;
        #else
            try
            {
                RegistryKey reg = Registry.ClassesRoot;
                reg = reg.OpenSubKey(@"MIME\Database\Content Type\" + contentType, false);
                if (reg != null) ext = (string)reg.GetValue("Extension", def);
            }
            catch (Exception)
            {
                ext = def;
            }
        #endif
        } 
```

然后我添加`Android`到我的项目的条件编译符号中。

我的参考资料是：

```
Microsoft.CSharp
Mono.Android
System
System.Core
System.Data
System.Xml
System.Xml.Linq 
```

请添加评论，告诉您是否可以现在编译它，或者您是否需要更多信息。

# ios - 在 sqlite 中更改日期格式

> ID：14021609
> 
> 赞同：1
> 
> 时间：2012-12-24T12:45:21.580
> 
> 标签：ios, sqlite, ios6

更改 sqlite db 中的此日期格式`12/10/11 to 12-10-11 (mm-dd-yy)`我无法这样做。我是 sqlite 中的菜鸟，必须解析此值`SELECT strftime('%d-%m-%Y',Date) from report`，但我得到 null，因为 sqlite db 中的值除外，`mm-dd-yy`所以如何转换格式`12/10/11 to 12-10-11 (mm-dd-yy)`。提前致谢。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:47:28.790

**简短的回答：**

如果您有一个文本字符串存储为`"12/10/11"`您希望报告为`"12-10-11"`，您应该使用该[`replace(X,Y,Z)`](http://www.sqlite.org/lang_corefunc.html#replace)函数将出现的`Y`in`X`替换为`Z`。因此：

```
SELECT replace('12/24/11','/','-'); 
```

将返回：

```
12-10-11 
```

* * *

**长答案：**

首先，日期实际上并不作为 SQLite 中的正确数据类型存在。它们存储为 TEXT、REAL 或 INTEGER 值。请参阅[SQLite 中的日期和时间数据类型](http://www.sqlite.org/datatype3.html#datetime)。所以这取决于你的日期是如何存储在数据库中的。

其次，您似乎暗示您以“ `mm/dd/yy`”格式存储日期。这不是`TEXT`存储日期/时间值的有效/有用格式（因为日期无法排序，不能用于“大于”和“小于”操作，不能用于 SQLite 日期函数等）。[您确实希望以日期和时间函数](http://www.sqlite.org/lang_datefunc.html)文档的“时间字符串”部分中列出的格式之一存储日期时间值。

因此，通常您应该以其中一种格式存储您的日期/时间值，在您从数据库中检索它时`NSDateFormatter`将其转换为 a 。`NSDate`当您想在应用程序中显示日期值时，请使用您想要的任何输出格式。

但是，如果您不关心日期存储为文本字符串并且不能有效地用作 SQLite 中的日期，那么只需将其视为普通的旧`TEXT`字符串并使用`TEXT`函数，例如`replace(X,Y,Z)`替换出现的`"/"`with `"-"`，如上所述.

# c - 将整数值转换为十六进制值

> ID：14021610
> 
> 赞同：0
> 
> 时间：2012-12-24T12:45:23.113
> 
> 标签：c, hex, decimal, fpga, xilinx

我在 xilinx 中有这个功能，用于将输出提供给七段。

```
int result;
    XIo_Out32(XPAR_SSG_DECODER_0_BASEADDR,  result); 
```

该函数获取 int 结果并将输出作为十六进制值放入七段。所以基本上，如果我给结果 = 11; 我会在七段中看到 A。要查看 sseg 上的十进制值，一种方法是更改​​其背后的 verilog 代码并更改 sseg 的整个概念。另一种方法是编写一个将十进制值更改为十六进制值的函数。我一直在为此寻找一个好的代码块，但似乎它们中的每一个都使用循环逐位打印值。我需要整个价值作为一个块。不幸的是，我不能使用 C++ 库，所以我有原始的 C 代码。是否有任何已知的转换算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:51:28.320

显然，您希望将符号代码从 ASCII 转换为 7 段显示字符集中的符号代码。如果是这样，您可以创建一个简单的映射，可能是一个由 ASCII 字符 id 索引的代码数组。然后，您将能够像这样调用您的函数：

```
XIo_Out32(XPAR_SSG_DECODER_0_BASEADDR,  'A'); 
```

小心为整个 ASCII 范围实现映射表。

**编辑**

对不起，我把你的问题搞错了。您必须手动将十六进制数转换为十进制符号数组。您可以通过增加 10 的幂（10^0、10^1、10^2 等）除以您的数字，从而得到一个余数数组，这是您的数字的十进制表示。您可以按照 H2CO3 的建议使用 snprintf，但我建议在一些 RAM 有限的嵌入式应用程序中不要使用它；您甚至可能根本无法使用类似 sprintf 的功能。

# google-chrome - Charles 代理 - 如何在 Chrome 中使用 Map Local 工具

> ID：14021611
> 
> 赞同：2
> 
> 时间：2012-12-24T12:45:27.570
> 
> 标签：google-chrome, charles-proxy

我在 Firefox 中使用 Charles，现在我决定迁移到 Chrome。在 Firefox 中，Charles 自动配置扩展可用并且工作正常，但在 Chrome Map Local 中不起作用。如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:50:43.603

您应该在 Chrome 中手动将代理设置为 127.0.0.1 和 8888 端口，以通过 Charles 发送请求。

# .htaccess - 使用 GET 变量在 htaccess 中使用 301 移动

> ID：14021620
> 
> 赞同：0
> 
> 时间：2012-12-24T12:46:16.593
> 
> 标签：.htaccess

我究竟做错了什么？我有

```
http://www.site.com/shop/viewmy/?ASIN=234FhK3
http://www.site.com/shop/viewmy/?ASIN=423ZH3 
```

试图转换为

```
http://www.site.com/shopping/234FhK3/moved
http://www.site.com/shopping/423ZH3/moved 
```

在获得有关产品 234FhK3 的一些信息后，我将使用内部重定向更改“已移动”部分，这是一个更改的变量。

我试过了

```
RewriteCond %{QUERY_STRING} ASIN=([^&]+) [NC]
RewriteRule ^[^/]+/(shopping/)/?$ $1.(/moved)? [L,R=301,NC] 
```

我不太擅长 htaccess 重写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:49:32.857

试试这个：

```
RewriteCond %{QUERY_STRING} ASIN=([^&]+) [NC]
RewriteRule ^shop/viewmy/$ /shopping/%1/moved/? [L,R=301,NC] 
```

# android - 覆盖没有在正确的位置绘制

> ID：14021625
> 
> 赞同：0
> 
> 时间：2012-12-24T12:46:26.217
> 
> 标签：android, google-maps, overlay, mapactivity

我有一个非常奇怪的问题。

首先，当我放大和缩小 MapView 时，标记（覆盖）移动到不正确的位置（不适用于缩放）。

其次，市场被拉错了位置！

我将在下面发布代码，但首先听听这个：

我在伊斯兰堡。GeoCoder 还告诉我我在伊斯兰堡。但是当我使用叠加层在我的位置周围画一个圆圈时，它会在 100 公里外的城市中绘制它。

请帮助我解决这两个问题。

这是活动：

```
public class LocatePickup extends MapActivity implements LocationListener {
    Geocoder gc;

    MapView mapView;
    MapController mc;
    GeoPoint p;

    double lat = 0;
    double lng = 0;

    LocationManager lm;

    WebMethods wm;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.locate_pickup);

        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
        mapView.setStreetView(true);

        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000L, 500.0f, this);

        Location l = new Location(LocationManager.NETWORK_PROVIDER);
        l = lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

        mc = mapView.getController();
        p = new GeoPoint((int) (l.getLatitude()), (int) (l.getLongitude()));
        mc.setCenter(p);
        mc.setZoom(14);

        MapOverlay myLocationOverlay = new MapOverlay();
        List<Overlay> list = mapView.getOverlays();
        list.add(myLocationOverlay);

        gc = new Geocoder(this);
        try {
            List<Address> address = gc.getFromLocation(l.getLatitude(), l.getLongitude(), 1);
            Toast.makeText(this, ""+address.get(0).getAddressLine(1), 1).show();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    class MapOverlay extends com.google.android.maps.Overlay {
        Paint paint = new Paint();
        @Override
        public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
            super.draw(canvas, mapView, shadow);

            Point myScreenCoords = new Point();
            mapView.getProjection().toPixels(p, myScreenCoords);

            paint.setStrokeWidth(1);
            paint.setARGB(255, 218, 28, 28);
            paint.setStyle(Paint.Style.STROKE);

            //Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pin);

            canvas.drawCircle(myScreenCoords.x, myScreenCoords.y, 15, paint);
            //(bmp, myScreenCoords.x, myScreenCoords.y - 256, paint);
            canvas.drawText("Hey!", myScreenCoords.x, myScreenCoords.y, paint);
            return true;
        }
    }

    @Override
    public void onLocationChanged(Location arg0) {
        if(arg0 != null) {
            Log.d("New Location: ", arg0.getLatitude() + " - " + arg0.getLongitude());
            lat = arg0.getLatitude();
            lng = arg0.getLongitude();

            p = new GeoPoint((int) lat * 1000000, (int) lng * 1000000);
            mc.animateTo(p);
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // empty
    }

    @Override
    public void onProviderEnabled(String provider) {
        // empty
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        //empty
    }
} 
```

代码完成后，我希望用户能够点击地图上的某个位置并获取其地址（标记也应该移动到该位置）。但应该是准确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T22:35:59.213

要将地图动画到给定的地理点，请使用 animateTo() 方法，

所以在你的方法中实现一个 zoomListener ，并添加这一行，

```
mapController.animateTo(geoPoint); 
```

还有，试试`mapview.invalidate()`

顺便说一句，如果您不知道如何实现缩放监听器，请参阅 [如何在 MapView 上实现 OnZoomListener](https://stackoverflow.com/questions/4729255/how-to-implemennt-onzoomlistener-on-mapview)。

对于第二个问题，您只使用了`NETWORK_PROVIDER`比使用 GPS 获取位置值更不准确的方法。因此，请尝试使用`GPS_PROVIDER`. 一个有效且正确的实现，可以让您获得更准确的值。

并获得地图上所触及地点的经纬度，在`mapOverlay`类中实现一个`onTouchEvent`

```
 @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) 
    {   
        //---when user lifts his finger---
        if (event.getAction() == 1) {                
            GeoPoint p = mapView.getProjection().fromPixels(
                (int) event.getX(),
                (int) event.getY());
                Toast.makeText(getBaseContext(), 
                    p.getLatitudeE6() / 1E6 + "," + 
                    p.getLongitudeE6() /1E6 , 
                    Toast.LENGTH_SHORT).show();
        }                            
        return false;
    } 
```

您可以通过使用从纬度和经度获取地址`GeoCoder`

```
Geocoder geoCoder = new Geocoder(
                getBaseContext(), Locale.getDefault());
try {
    List<Address> addresses = geoCoder.getFromLocation(latitude/1E6, 
                    longitude / 1E6, 1);
                String add = "";
                if (addresses.size() > 0) 
                {
                    for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); 
                         i++)
                       add += addresses.get(0).getAddressLine(i) + "\n";
                }

                Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
  }catch (IOException e) {                
                e.printStackTrace();
   } 
```

如果要向该点添加标记，请为该点添加`overlayItem`并将其添加到叠加层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T05:54:41.257

由于没有人正确回答这个问题..

出于某种原因，普通的 Overlay 课程并没有按应有的方式为我工作。我切换到 ItemizedOverlay，现在一切都很完美。

我不是 Android 专家，所以我希望有更好经验的人对此发表评论，但我觉得 ItemizedOverlay 比简单的 Overlay 要好得多。使用 itemizedoverlay，放大和缩小地图视图并在固定点绘制对象以应有的方式工作，图钉（对象）准确地停留在它应该停留的位置（以前不是这种情况）。

这里有一些代码供那些正在寻找它的人使用。这当然是不完整的，并且是针对特定目的的，但是您会得到大致的想法。

`class CustomOverlay 扩展 com.google.android.maps.ItemizedOverlay { private ArrayList mOverlays = new ArrayList(); 上下文 mContext;

```
 public CustomOverlay(Drawable defaultMarker)
    {
        super(defaultMarker);

    }

    public void addOverlay(OverlayItem overlay)
    {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i)
    {
        return mOverlays.get(i);
    }

    @Override
    public int size()
    {
        return mOverlays.size();
    }

    public CustomOverlay(Drawable defaultMarker, Context context)
    {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView)
    {
        if (event.getAction() == 1)
        {
            p = mapView.getProjection().fromPixels((int) event.getX(),
                    (int) event.getY());

            gc = new Geocoder(getBaseContext(), Locale.getDefault());
            try
            {
                address = gc.getFromLocation(
                        (double) p.getLatitudeE6() / 1E6,
                        (double) p.getLongitudeE6() / 1E6, 1);

                addressfound = true;
            }
            catch (IOException e)
            {
                addressfound = false;
                e.printStackTrace();
            }

            if (address.size() != 0)
            {
                l1 = address.get(0).getAddressLine(0);
                l2 = address.get(0).getAddressLine(1);
                l3 = address.get(0).getAddressLine(2);
            }

            OverlayItem point = new OverlayItem(p, "Location", l1 + ", "
                    + l2 + ", " + l3);
            List<Overlay> mapOverlays = mapView.getOverlays();
            Drawable drawable = getBaseContext().getResources()
                    .getDrawable(R.drawable.androidmarker);
            CustomOverlay itemizedoverlay = new CustomOverlay(drawable,
                    getBaseContext());

            itemizedoverlay.addOverlay(point);
            mapOverlays.clear();
            mapOverlays.add(itemizedoverlay);

            mapView.invalidate();
        }` 
```

# python-3.x - 在 python 上滚动条目小部件

> ID：14021627
> 
> 赞同：0
> 
> 时间：2012-12-24T12:46:33.517
> 
> 标签：python-3.x

我尝试在 python 中的条目上滚动。当我运行程序时没有任何反应。请任何人帮助我？

这是我的代码：

```
self.scrollbar = tk.Scrollbar(self,orient="horizontal")
self.e3 =tk.Entry(self,xscrollcommand=self.scrollbar.set)
self.e3.focus()
self.e3.pack(side="bottom",fill="x")
#self.e3.grid(row=10, column=7)
self.scrollbar.pack(fill="x")
self.scrollbar.config(command=self.e3.xview)
self.e3.config() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:25:47.233

您的代码有效，只需删除所有“自我”。“self”这个词通常用在课堂上（可以用任何东西代替，比如“bananas”）。在这里你可以找到一些解释：

[自我的目的是什么？](https://stackoverflow.com/questions/2709821/python-self-explained)

工作代码：

```
import tkinter as tk
scrollbar = tk.Scrollbar(orient="horizontal")
e3 =tk.Entry(xscrollcommand=scrollbar.set)
e3.focus()
e3.pack(side="bottom",fill="x")
#e3.grid(row=10, column=7)
scrollbar.pack(fill="x")
scrollbar.config(command=e3.xview)
e3.config() 
```

@EDIT：最后一行 (e3.config()) 是不必要的 - 它什么都不做。

# search - 搜索容器列jsp在liferay中不起作用

> ID：14021628
> 
> 赞同：2
> 
> 时间：2012-12-24T12:46:42.560
> 
> 标签：search, liferay, include-path

搜索容器列 jsp 在 liferay 中不起作用。

我试图在文档类型的 Liferay 搜索容器中包含一个 jsp，用于显示给定字符串的搜索结果。

下面是在页面中显示搜索容器的代码片段：

```
<liferay-ui:search-container searchContainer="<%=tagsearchContainer%>"> 
    <liferay-ui:search-container-results>
            results="<%= hits.toList() %>"
            total="<%= hits.getLength() %>"
    </liferay-ui:search-container-results>

    <liferay-ui:search-container-row
        className="com.liferay.portal.kernel.search.Document"
        escapedModel="<%= false %>"
        keyProperty="UID"
        modelVar="document"
        stringKey="<%=true %>"
        >

        <liferay-ui:search-container-column-jsp path="/html/search_tag_result_form.jsp"/>

     </liferay-ui:search-container-row>

</liferay-ui:search-container> 
```

搜索容器只显示文档中的所有字段，全部混搭，没有任何错误。它不显示来自jsp的内容（实际上不包含它，即使存在错误的jsp路径也不会抛出）。混搭up 结果从 container-row 显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:57:44.070

我认为您缺少`<liferay-ui:search-iterator />`end-tag 之前的内容`</liferay-ui:search-container>`。

这`<liferay-ui:search-iterator />`用于实际显示`<liferay-ui:search-container-row>`标签内的列表和内容。

这是对大多数常用标签的一个很好的[解释](http://www.liferay.com/en/community/wiki/-/wiki/Main/SearchContainer "Liferay Wiki：搜索容器")`search-container`。

# spring - 非 Web 应用程序中的 OpenSessionInViewInterceptor

> ID：14021637
> 
> 赞同：1
> 
> 时间：2012-12-24T12:47:19.463
> 
> 标签：spring, hibernate, open-session-in-view

我必须在非 Web 应用程序中使用 OpenSessionInViewInterceptor。我已将 OSV 拦截器配置如下，

```
<bean id="openSessionInViewInterceptor" class="org.springframework.orm.hibernate3.support.OpenSessionInViewInterceptor">
  <property name="sessionFactory"><ref bean="sessionFactory"/></property>   
</bean> 
```

我得到一个延迟加载异常。任何指向我哪里出错的指针？配置是否正确？

还是非 Web 应用程序需要 OpenSessionInViewFilter 而不是拦截器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:00:23.650

从第一行 Java Doc 的`OpenSessionInViewInterceptor`

> Spring Web 请求拦截器，将 Hibernate Session 绑定到线程以完成请求的整个处理。

因此，如果您因为没有 Web 应用程序而没有 Web 请求，那么这个 Interceptor 对您没有帮助。

这`OpenSessionInViewFilter`也仅适用于 Web 应用程序。

因此，您将需要“手动”启动会话/事务，例如使用`@Transactional`.

# javascript - 在我的手机上检测互联网连接类型

> ID：14021638
> 
> 赞同：2
> 
> 时间：2012-12-24T12:47:19.790
> 
> 标签：javascript, jquery, mobile

我需要在他们的手机上向我的客户发送视频，但是每个客户端以不同的方式连接到互联网，连接速度很慢，速度很快，我有 2 个来自视频的版本，所以我可以将小的发送到慢速连接，将大的发送到快.

```
setInterval(function(){
    if(navigator.onLine){
        $("body").html("Connected.");
    }else{
        $("body").html("Not connected.");
    }
},1000); 
```

上面的代码返回是否连接。

现在的问题是：

有没有办法在我的手机上检测互联网连接类型？比如3G、WIFI……等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:50:17.323

如果平台公开了一些特定的 API，那么您只能这样做，但它不是公开给 JavaScript 的常规浏览器 API 的一部分。所以简短的回答是：不。

另一种方法是向已知大小的文件发出请求，并查看传输需要多长时间，从中可以推断出连接速度，但这意味着额外的流量，因此请务必选择好文件（它应该很小，以免产生过多的移动流量，但也不能太小，以至于您无法从下载中获得任何有用的信息）。

不幸的是，这可能不会告诉你太多，因为作为移动客户端，客户端很可能随时从一个连接切换到一个完全不同的连接。更重要的是，在完全相同的连接上，从服务器接收数据所需的时间可能会从一秒到下一秒大不相同，这取决于影响移动客户端的许多因素。所以如果这是一个视频应用程序，这真的应该由服务器控制，如果服务器发现发送的数据包太少，它应该决定降低视频质量。有媒体服务器可以做到这一点，例如[Red5](http://www.red5.org/)、[Wowza](http://www.wowza.com/)或[Adob​​e Media Server](http://www.adobe.com/products/adobe-media-server-family.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T13:00:44.500

您可以编写与[此类](http://jsfiddle.net/yahavbr/tEFpC/2/)似的代码。

```
var imageAddr = "http://www.tranquilmusic.ca/images/cats/Cat2.JPG" + "?n=" + Math.random();
    var startTime, endTime;
    var downloadSize = 5616998;
    var download = new Image();
    download.onload = function () {
        endTime = (new Date()).getTime();
        showResults();
    }
    startTime = (new Date()).getTime();
    download.src = imageAddr;

    function showResults() {
        var duration = (endTime - startTime) / 1000; //Math.round()
        var bitsLoaded = downloadSize * 8;
        var speedBps = (bitsLoaded / duration).toFixed(2);
        var speedKbps = (speedBps / 1024).toFixed(2);
        var speedMbps = (speedKbps / 1024).toFixed(2);
        alert("Your connection speed is: \n" + 
               speedBps + " bps\n"   + 
               speedKbps + " kbps\n" + 
               speedMbps + " Mbps\n" );
    }​ 
```

您可以使用此代码来检测客户端的互联网速度。您无法检测到连接类型。256+ kb 的文件足以检测速度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T12:54:56.083

一种方法是请求文件并查看下载需要多长时间。请参阅[此](http://www.ehow.com/how_5804819_detect-connection-speed-javascript.html)示例。

如果您的客户在移动设备上，您的网站下载的每个额外字节都可能会花费他们。此外，影响下载文件所需时间的因素有很多，“连接类型”只是其中之一。

然而，这个方法应该给你一个很好的近似值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-10T21:31:12.450

最初的问题没有区分（A）下载和（B）上传的连接速度（是的，他需要将视频发送给最终用户，但也许这是用户刚刚上传的视频）。接受的答案对于测量下载速度很有用。

对于上传速度，您可以考虑在隐藏表单的隐藏表单字段中嵌入 base64 编码的图像。还要制作一个隐藏的 iframe，并将隐藏的表单定位到隐藏的 iframe。通过 javascript 提交隐藏表单，将当前时间存储在 JS 变量中。在结果页面上，当 onload 触发时，通过 javascript 在 iframe 与其父窗口之间进行通信，发送 onload 事件触发的时间。比较开始时间和结束时间，然后除以传输的字节数。

您需要使 iframe 中的文档与包含 iframe 的窗口中的文档位于同一域中，以遵守浏览器的同源策略。

# cakephp - CakePHP：测试-> ValidationException

> ID：14021640
> 
> 赞同：0
> 
> 时间：2012-12-24T12:47:22.537
> 
> 标签：cakephp, testing, phpunit

我是编程和测试的新手。我被困在这个测试中，它抛出了一个异常。请帮助我，因为我真的不明白我应该如何处理这个问题。

我的测试方法：

```
public function saveNewInstitution($institutionData, $user) {
    $institutionData[$this->alias]['isActive'] = 1;
    $institutionData[$this->alias]['users_id'] = $user['User']['id'];
    $this->create();
    $this->set($institutionData);
    if ($this->validates()) {
        return $this->save();
    } else {
        throw new ValidationException('Not all fields are filled out correct');
    }
} 
```

我的测试课：

```
public function testSaveNewInstitution() {
    $result = array(
        'Institution' => array(
            'id' => 2,
            'name' => 'Spitex',
            'address' => 'Hauptweg 4',
            'postcode' => '1234',
            'city' => 'huuh',
            'phone_number' => '123 456 78 90',
            'email' => 'staufen@tsdy.huuh',
            'comment' => '',
            'isActive' => TRUE,
            'users_id' => 2,
            'institution_types_id' => 5
        ),
        'Users' => array(
            'id' => 2,
            'email' => 'herbert@xyz.ch',
            'password' => AuthComponent::password('12345678'),
            'isMale' => TRUE,
            'first_name' => 'Herbert',
            'last_name' => 'Müller',
            'address' => 'Hauptstrasse 1',
            'postcode' => '1234',
            'city' => 'Zürich',
            'phone_number' => '123 456 78 90',
            'isActive' => FALSE,
            'institutions_id' => 2,
            'groups_id' => 4
        ),
        'InstitutionTypes' => array(
            'id' => 5,
            'name' => 'Spitex'
        ),
        'Assignee' => array('0' => array(
                'id' => 2,
                'email' => 'herbert@xyz.ch',
                'password' => AuthComponent::password('12345678'),
                'isMale' => TRUE,
                'first_name' => 'Herbert',
                'last_name' => 'Müller',
                'address' => 'Hauptstrasse 1',
                'postcode' => '1234',
                'city' => 'Zürich',
                'phone_number' => '123 456 78 90',
                'isActive' => FALSE,
                'institutions_id' => 2,
                'groups_id' => 4
        ))
    );

    $expected = $this->Institution->saveNewInstitution($result, 2);
    $this->assertEqual($result, $expected);
}

public function testSaveNewInstitutionException() {
    $this->setExpectedException('ValidationException');
    $expected = array(
        'Institution' => array(
            'id' => 2,
            'name' => 'Spitex',
            'address' => 'Hauptweg 4',
            'postcode' => '1234',
            'city' => 'huuh',
            'phone_number' => '123 456 78 90',
            'email' => 'staufen@xyz.huuh',
            'comment' => '',
            'isActive' => TRUE,
            'users_id' => 2,
            'institution_types_id' => 5
        ),
        'Users' => array(
            'id' => 2,
            'email' => 'herbert@xyz.ch',
            'password' => AuthComponent::password('12345678'),
            'isMale' => TRUE,
            'first_name' => 'Herbert',
            'last_name' => 'Müller',
            'address' => 'Hauptstrasse 1',
            'postcode' => '1234',
            'city' => 'Zürich',
            'phone_number' => '123 456 78 90',
            'isActive' => FALSE,
            'institutions_id' => 2,
            'groups_id' => 4
        ),
        'InstitutionTypes' => array(
            'id' => 5,
            'name' => 'Spitex'
        ),
        'Assignee' => array('0' => array(
                'id' => 2,
                'email' => 'herbert@mueller.ch',
                'password' => AuthComponent::password('12345678'),
                'isMale' => TRUE,
                'first_name' => 'Herbert',
                'last_name' => 'Müller',
                'address' => 'Hauptstrasse 1',
                'postcode' => '1234',
                'city' => 'Zürich',
                'phone_number' => '123 456 78 90',
                'isActive' => FALSE,
                'institutions_id' => 2,
                'groups_id' => 4
        ))
    );
    $this->Institution->saveNewInstitution($expected, 2);
} 
```

我的例外：

```
**VALIDATIONEXCEPTION**
Not all fields are filled out correct
Test case: InstitutionTest(testSaveNewInstitution)
Stack trace:
/app/Test/Case/Model/InstitutionTest.php : 148
InstitutionTest::testSaveNewInstitution
/usr/lib/php/PHPUnit/Framework/TestCase.php : 969
/usr/lib/php/PHPUnit/Framework/TestCase.php : 824
/usr/lib/php/PHPUnit/Framework/TestResult.php : 648
/usr/lib/php/PHPUnit/Framework/TestCase.php : 769
/lib/Cake/TestSuite/CakeTestCase.php : 78
/usr/lib/php/PHPUnit/Framework/TestSuite.php : 775
/usr/lib/php/PHPUnit/Framework/TestSuite.php : 745
/usr/lib/php/PHPUnit/TextUI/TestRunner.php : 346
/lib/Cake/TestSuite/CakeTestRunner.php : 57
/lib/Cake/TestSuite/CakeTestSuiteCommand.php : 111
/lib/Cake/TestSuite/CakeTestSuiteDispatcher.php : 242
/lib/Cake/TestSuite/CakeTestSuiteDispatcher.php : 99
/lib/Cake/TestSuite/CakeTestSuiteDispatcher.php : 116
/app/webroot/test.php : 92
9/9 test methods complete: 8 passes, 0 fails, 12 assertions and 1 exceptions. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:02:16.547

正如评论中所述，这个问题非常简单。您的验证失败，因此抛出异常（如您的代码所期望的那样）。

如果你想调试它，试着确定什么

```
$this->validationErrors 
```

包含在 save() 之后（在/而不是抛出异常之前）。那么你知道为什么验证失败了。

# jsp - JSF 1 gridpanel getter 方法在第二次加载时不会被调用

> ID：14021643
> 
> 赞同：1
> 
> 时间：2012-12-24T12:47:29.103
> 
> 标签：jsp, jsf, session, tomahawk

[Tomahawk](http://myfaces.apache.org/tomahawk/index.html)库已在旧版 J2EE Web 应用程序中使用。jsf 页面包含以下行（gridpanel 控件）：

```
 <h:panelGrid binding="#{BasicUnavailability.gridPanel1}" id="gridPanel1" border="0" columns="8" width="100%"/> 
```

在 gridpanel 中有组合框，这些组合框将由 getter 方法动态生成，该方法进行处理并将组合框添加到 gridpanel 并返回它：

```
 public HtmlPanelGrid getGridPanel1()
{
    //some processing 
    //add comboboxes to grid
   return gridpanel1;
} 
```

和二传手：

```
public void setGridPanel1(HtmlPanelGrid gridPanel1) {
        this.gridPanel1 = gridPanel1;
    } 
```

> 当此页面第一次加载时，调用 gridpanel1 getter 方法并填充组合框。它也使用一些会话范围的 bean 进行处理。当我们离开此页面并返回此页面时，不会调用此 getter 方法，并且将显示之前填充的网格面板。

这个问题似乎与[这个 SO 线程](https://stackoverflow.com/questions/2101755/im-getting-duplicate-id-error-after-adding-binding-attribute/2101768#2101768)有关。但我无法弄清楚 JSF1.0 的问题。请提供您宝贵的建议。

# c# - C# SMTP 无法在 Outlook.com 端口 587 上进行身份验证。“服务器响应为：5.7.1 客户端未通过身份验证”

> ID：14021649
> 
> 赞同：21
> 
> 时间：2012-12-24T12:48:34.930
> 
> 标签：c#, smtp, ssl, smtpclient, outlook.com

我正在尝试发送自动电子邮件（真正需要的商业原因 - 不是垃圾邮件！）。与下面类似的代码曾经与另一家邮件服务提供商合作，但客户已转移到“outlook.com”，他们现在得到：

```
 The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.1 Client was not authenticated 
```

当然，这个（C#）代码应该可以工作：

```
 private void Send_Click(object sender, EventArgs e)
    {
        MailMessage message = null;
        try
        {
            message = new MailMessage(From, To);
            message.Subject = "Update Request Session from " + From;
            message.CC.Add(Cc);
            message.Body = "Test message: please ignore.";
            message.IsBodyHtml = false;

            SmtpClient client = new SmtpClient("smtp.outlook.com", 587);
            client.Credentials = new System.Net.NetworkCredential(From, Password);
            client.UseDefaultCredentials = false;
            client.DeliveryMethod = SmtpDeliveryMethod.Network;
            client.EnableSsl = true;

            client.Send(message);
        }
        catch (Exception ex)
        {
            Status.Text = ex.Message;
        }

        if (message != null)
        {
            message.Dispose();
        }
    } 
```

请注意 DeliveryMethod 和 EnableSsl 正在设置并且端口是 587。

我在 Outlook 客户端（桌面程序，而不是 Web 服务）上创建了另一个测试帐户来测试上面代码使用的参数：

*   用户名
*   密码
*   smtp.outlook.com
*   587
*   TLS

Outlook 中的“测试帐户设置”显示参数正确（“任务：发送测试电子邮件 - 状态：已完成”）。所以我认为用户名和密码一定是正确的。

我已经打开详细登录，如下所述：http: [//social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/28b5a576-0da2-42c9-8de3-f2bd1f30ded4/](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/28b5a576-0da2-42c9-8de3-f2bd1f30ded4/)。这产生了大量的输出，太多了，无法在此处发布。这是最后几行：

```
System.Net Information: 0 : [6312] SecureChannel#28756230 - Remote certificate was verified as valid by the user.
System.Net.Sockets Verbose: 0 : [6312] Socket#59109011::Send()
System.Net.Sockets Verbose: 0 : [6312] Data from Socket#59109011::Send
System.Net.Sockets Verbose: 0 : [6312] 00000000 : 17 03 01 00 30 4B BC 72-D3 A8 D7 EC FB 3C 21 0F : ....0K.r.....<!.
System.Net.Sockets Verbose: 0 : [6312] 00000010 : D7 BA A2 1F 72 1D D0 E6-4B DB 9A EC 9E 70 FD BC : ....r...K....p..
System.Net.Sockets Verbose: 0 : [6312] 00000020 : 73 B9 CC 6A 11 9E 32 E0-B2 47 D7 35 C0 BA CD DE : s..j..2..G.5....
System.Net.Sockets Verbose: 0 : [6312] 00000030 : 38 CA F6 93 8E                                  : 8....
System.Net.Sockets Verbose: 0 : [6312] Exiting Socket#59109011::Send()  -> 53#53
System.Net.Sockets Verbose: 0 : [6312] Socket#59109011::Receive()
System.Net.Sockets Verbose: 0 : [6312] Data from Socket#59109011::Receive
System.Net.Sockets Verbose: 0 : [6312] 00000000 : 17 03 01 00 D0                                  : .....
System.Net.Sockets Verbose: 0 : [6312] Exiting Socket#59109011::Receive()   -> 5#5
System.Net.Sockets Verbose: 0 : [6312] Socket#59109011::Receive()
System.Net.Sockets Verbose: 0 : [6312] Data from Socket#59109011::Receive
System.Net.Sockets Verbose: 0 : [6312] 00000005 : 4D 6F 22 3C B8 A4 39 14-B0 FC B9 58 23 9A 26 70 : Mo"<..9....X#.&p
System.Net.Sockets Verbose: 0 : [6312] 00000015 : 89 52 B4 E1 8D 74 D6 23-5C 2B 7C 44 6E EB 1A F7 : .R...t.#\+|Dn...
System.Net.Sockets Verbose: 0 : [6312] 00000025 : 7A 56 3D 18 0E 93 9C C5-C6 43 28 25 AA 3D DF 89 : zV=......C(%.=..
System.Net.Sockets Verbose: 0 : [6312] 00000035 : 46 78 9B 69 ED FA 51 65-29 D9 DF A6 3F 9F 9F 25 : Fx.i..Qe)...?..%
System.Net.Sockets Verbose: 0 : [6312] 00000045 : 22 18 99 13 6A AA FB 49-BE 9C 53 F2 96 3C 5A 5A : "...j..I..S..<ZZ
System.Net.Sockets Verbose: 0 : [6312] 00000055 : 60 E1 23 FA CA 92 B9 4A-75 9D 87 D5 66 4D FB 84 : `.#....Ju...fM..
System.Net.Sockets Verbose: 0 : [6312] 00000065 : 99 63 D1 27 C9 41 90 C8-3D BE 82 E6 A2 62 EB 56 : .c.'.A..=....b.V
System.Net.Sockets Verbose: 0 : [6312] 00000075 : 5E D0 ED 67 B3 67 FD 6A-B0 99 34 07 DA 88 3D 02 : ^..g.g.j..4...=.
System.Net.Sockets Verbose: 0 : [6312] 00000085 : 2E E6 E5 DB 4F E7 C0 EF-A9 AD 01 C0 5D FE 94 19 : ....O.......]...
System.Net.Sockets Verbose: 0 : [6312] 00000095 : 92 0A 0E 6F C3 C7 F5 62-E4 15 F2 6D 56 A4 5B 74 : ...o...b...mV.[t
System.Net.Sockets Verbose: 0 : [6312] 000000A5 : C0 7A 2F 16 A7 F2 C0 F8-F4 90 00 EB DB 52 90 85 : .z/..........R..
System.Net.Sockets Verbose: 0 : [6312] 000000B5 : ED FA C6 91 5A 32 49 4A-9F F9 1D 11 62 97 C7 DC : ....Z2IJ....b...
System.Net.Sockets Verbose: 0 : [6312] 000000C5 : 96 11 67 E0 95 D2 95 0C-D9 41 C9 81 F8 4C 58 0F : ..g......A...LX.
System.Net.Sockets Verbose: 0 : [6312] Exiting Socket#59109011::Receive()   -> 208#208
System.Net.Sockets Verbose: 0 : [6312] Socket#59109011::Send()
System.Net.Sockets Verbose: 0 : [6312] Data from Socket#59109011::Send
System.Net.Sockets Verbose: 0 : [6312] 00000000 : 17 03 01 00 40 45 FD 20-1F 27 A1 B3 50 A3 99 5D : ....@E. .'..P..]
System.Net.Sockets Verbose: 0 : [6312] 00000010 : F3 DA 03 7E 47 C4 8C 91-21 7F 25 7C 09 CC E4 68 : ...~G...!.%|...h
System.Net.Sockets Verbose: 0 : [6312] 00000020 : 27 95 BE C7 FB 9E BC 65-67 64 CE C7 BE 4A BB 48 : '......egd...J.H
System.Net.Sockets Verbose: 0 : [6312] 00000030 : 89 36 A4 A4 90 B4 7B B4-C0 B5 DB 5B 18 3F 4A C3 : .6....{....[.?J.
System.Net.Sockets Verbose: 0 : [6312] 00000040 : A2 DB 51 B5 46                                  : ..Q.F
System.Net.Sockets Verbose: 0 : [6312] Exiting Socket#59109011::Send()  -> 69#69
System.Net.Sockets Verbose: 0 : [6312] Socket#59109011::Receive()
System.Net.Sockets Verbose: 0 : [6312] Data from Socket#59109011::Receive
System.Net.Sockets Verbose: 0 : [6312] 00000000 : 17 03 01 00 40                                  : ....@
System.Net.Sockets Verbose: 0 : [6312] Exiting Socket#59109011::Receive()   -> 5#5
System.Net.Sockets Verbose: 0 : [6312] Socket#59109011::Receive()
System.Net.Sockets Verbose: 0 : [6312] Data from Socket#59109011::Receive
System.Net.Sockets Verbose: 0 : [6312] 00000005 : 43 8E E7 44 71 B3 84 BC-5F 08 39 CE B1 3A A4 F9 : C..Dq..._.9..:..
System.Net.Sockets Verbose: 0 : [6312] 00000015 : F4 92 BE B3 D7 10 81 14-B9 5B BA E3 35 93 34 12 : .........[..5.4.
System.Net.Sockets Verbose: 0 : [6312] 00000025 : AF 32 F1 69 82 BD B9 8B-4C 2F 47 5F 8B 95 7E 52 : .2.i....L/G_..~R
System.Net.Sockets Verbose: 0 : [6312] 00000035 : 94 4C A6 79 6A F6 E2 84-D1 9E A5 D3 16 98 44 E1 : .L.yj.........D.
System.Net.Sockets Verbose: 0 : [6312] Exiting Socket#59109011::Receive()   -> 64#64
System.Net Error: 0 : [6312] Exception in the SmtpClient#44419000::Send - The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.1 Client was not authenticated
System.Net Error: 0 : [6312]    at     System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at     System.Net.Mail.MailCommand.Send(SmtpConnection conn, Byte[] command, String from)
   at     System.Net.Mail.SmtpTransport.SendMail(MailAddress sender, MailAddressCollection recipients, String deliveryNotify, SmtpFailedRecipientException& exception)
   at     System.Net.Mail.SmtpClient.Send(MailMessage message)
System.Net.Sockets Verbose: 0 : [6312] Socket#59109011::Dispose()
System.Net Verbose: 0 : [6312] Exiting SmtpClient#44419000::Send() 
```

这些行中的第一行向我表明 SmtpClient 和 outlook.com 已就要使用的加密协议达成一致，但其余部分对我来说意义不大，除非“5.7.1 客户端未通过身份验证”行。

有没有人在连接到 Outlook.com 时遇到过类似的问题？

提前致谢。

罗斯

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-24T12:52:53.610

我知道这听起来很奇怪，但 AFAI 记得你应该使用`UseDefaultCredentials = false`before 设置`Credentials`。将您的代码更改为：

```
client.UseDefaultCredentials = false;    
client.Credentials = new System.Net.NetworkCredential(From, Password); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-30T21:22:06.620

注释掉 UseDefaultCredentials 对我有用，请参阅 Microsoft Bug： [https ://connect.microsoft.com/VisualStudio/feedback/details/725279/smtp-tls-authentication-usedefaultcredentials-bug-using-office365-server-as-smart-host](https://connect.microsoft.com/VisualStudio/feedback/details/725279/smtp-tls-authentication-usedefaultcredentials-bug-using-office365-server-as-smart-host)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-04T14:00:29.183

如果您的 Microsoft 帐户已启用两步验证，还请确保您使用**应用密码**（可在[此处创建）。](https://account.live.com/proofs/AppPassword)

# c# - 如何编写检查 TextBlock 是否包含 windows phone 7 XAML 中的特定字符串？

> ID：14021651
> 
> 赞同：4
> 
> 时间：2012-12-24T12:48:48.750
> 
> 标签：c#, windows-phone-7, xaml

我有一个文本块和一个文本框，我需要检查文本块是否包含文本框值，如果是，那么该特定值应该以某种颜色突出显示。. .

例如，

TextBlock.Text="只是一个测试"

如果我们在 TextBox 中键入“te”，则文本块中的值应突出显示为“Just a * *Te* *st”

在xml中。

如果有人知道意味着请说！

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-25T11:51:10.343

嗨，我发现这里的解决方案是在 MVVM 模式中设计的底层代码：编辑：** Pages -> MainPage.xaml.cs 和 ListViewModal 已根据您的需要进行了更改。

** 在视图模式中绑定数据时遇到一些问题，因此通过在后面的代码中进行快速响应

主页.xaml

```
<phone:PhoneApplicationPage 
x:Class="FirstAppInCSharp.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" Width="Auto" Height="Auto"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True" d:DesignHeight="768" d:DesignWidth="480">

<Grid Name='LayoutRoot'>
    <ListBox Height='500' Width='500' Background='Red'
        Name="ContactList"
        Margin="14,85,14,28" Loaded='ContactList_Loaded'
        Foreground="Black"
        ItemsSource='{Binding ListOftext}'
        >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel
                    Background='AliceBlue' Height='100' Width='500'
                    Orientation="Horizontal">
                    <TextBlock 
                        FontSize='30'
                        Height='70'
                        Foreground='Black'
                        Text='{Binding DisplayName}' Width='300'
                         />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <TextBox
        Height='72'
        HorizontalAlignment='Left'
        Margin='8,27,0,0'
        Name='textBox1'
        TextChanged='textBox1_TextChanged'
        VerticalAlignment='Top'
        Width='460' />
</Grid> 
```

现在 MainPage.xaml.cs

```
public partial class MainPage : PhoneApplicationPage
{
    TextBlock textBlock1 = null;
    List<TextBlock> listText = null;
    // Constructor
    public MainPage()
    {
        InitializeComponent();

        Contacts contact = new Contacts();
        contact.SearchAsync("", FilterKind.DisplayName, null);
        contact.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(contact_SearchCompleted);
    }
    void contact_SearchCompleted(object sender, ContactsSearchEventArgs e)
    {
        ContactList.DataContext = new ListViewModal(e.Results);
    }

    private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
    {
        SearchVisualTree(ContactList);

    }

    private void SearchVisualTree(DependencyObject targetElement)
    {

        var count = VisualTreeHelper.GetChildrenCount(targetElement);

        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(targetElement, i);
            if (child is TextBlock)
            {
                textBlock1 = (TextBlock)child;
                HighlightText();
                break;
            }
            else
            {
                SearchVisualTree(child);
            }
        }
    }

    private void HighlightText()
    {
        if (textBlock1 != null)
        {
            string text = textBlock1.Text;
            textBlock1.Text = text;
            textBlock1.Inlines.Clear();

            int index = text.IndexOf(textBox1.Text);
            int lenth = textBox1.Text.Length;

            if (!(index < 0))
            {
                Run run = new Run() { Text = text.Substring(index, lenth), FontWeight = FontWeights.ExtraBold };
                run.Foreground = new SolidColorBrush(Colors.Orange);
                textBlock1.Inlines.Add(new Run() { Text = text.Substring(0, index), FontWeight = FontWeights.Normal });
                textBlock1.Inlines.Add(run);
                textBlock1.Inlines.Add(new Run() { Text = text.Substring(index + lenth), FontWeight = FontWeights.Normal });

                textBlock1.FontSize = 30;
                textBlock1.Foreground = new SolidColorBrush(Colors.Black);
            }
            else
            {
                textBlock1.Text = "No Match";
            }
        }

    }

    private void ContactList_Loaded(object sender, RoutedEventArgs e)
    {

    }
} 
```

**现在是列表的视图模式（我手动添加了数据）**

```
public class ListViewModal : INotifyPropertyChanged
{
    public List<CheckList> ListOftext { get; set; }

    public ListViewModal(IEnumerable<Contact> iEnumerable)
    {
        ListOftext = new List<CheckList>();
        foreach (var list in iEnumerable) 
        {
            ListOftext.Add(new CheckList(){DisplayName = list.DisplayName});
        }
        RaisePropertyChanged("ListOftext");
    }

    /// <summary>
    /// Property changed method
    /// Executes when a property changes its value
    /// </summary>
    /// <param name="propertyName"></param>
    public void RaisePropertyChanged(string propertyName)
    {
        // this is the property changed method 
        //to detect property change
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private IEnumerable<Contact> iEnumerable;
} 
```

**现在是数据绑定类（模型类）**

```
public class CheckList
{
    public string DisplayName { get; set; }

} 
```

谢谢 :) 如果您愿意或有任何疑问，您可以提出更多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:49:21.660

这是要放入文本框`TextChange`事件的示例代码

```
private void textBox1_TextChanged(object sender, TextChangedEventArgs e)
    {
        string text = "this is a TextBlock";
        textBlock1.Text = text;
        textBlock1.Inlines.Clear();

        int index = text.IndexOf(textBox1.Text);
        int lenth = textBox1.Text.Length;

        if (!(index < 0))
        {
            Run run = new Run() { Text = text.Substring(index, lenth), FontWeight = FontWeights.ExtraBold };
            run.Foreground = new SolidColorBrush(Colors.Orange);
            textBlock1.Inlines.Add(new Run() { Text = text.Substring(0, index), FontWeight = FontWeights.Normal });
            textBlock1.Inlines.Add(run);
            textBlock1.Inlines.Add(new Run() { Text = text.Substring(index + lenth), FontWeight = FontWeights.Normal });

            textBlock1.FontSize = 30;
            textBlock1.Foreground = new SolidColorBrush(Colors.White);
        }
        else 
        {
            textBlock1.Text = "No Match";
        }
    } 
```

这将突出显示文本并返回 no match is no match is found。

**注意**：此代码段区分大小写。

# c# - EntityFramework 的验证框架

> ID：14021652
> 
> 赞同：3
> 
> 时间：2012-12-24T12:48:52.627
> 
> 标签：c#, .net, entity-framework, validation

> **可能重复：**
> [实体框架验证](https://stackoverflow.com/questions/191143/entity-framework-validation)

**EntityFramework**有没有好的灵活的验证框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:11:14.883

Entity Framework 提供了各种各样的验证功能，这些功能可以馈送到用户界面进行客户端验证或用于服务器端验证。

首先使用代码时，您可以使用数据注释或流畅的 API 配置来指定验证。

可以在代码中指定额外的和更复杂的验证，无论您的模型来自代码优先、模型优先还是数据库优先，它们都将起作用。

以下是更多详细信息的一些链接：使用 Fluent API和[实体框架验证](http://msdn.microsoft.com/en-us/data/gg193959.aspx)[配置属性和类型](http://msdn.microsoft.com/en-US/data/jj591617)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T16:10:05.683

您可以查看 Fluent 验证框架。它不是 EF 特定的，但意味着您也可以在视图模型上使用它。

您还可以查看万无一失的验证，它会在客户端验证诸如如果另一个属性为真则需要一个属性等。例如，如果选中已婚复选框，则必须添加娘家姓

还可以在 nuget 上查找数据注释扩展，它扩展了 EF 提供的内容

# c++ - C++ HLSL 缓冲区变量

> ID：14021655
> 
> 赞同：0
> 
> 时间：2012-12-24T12:49:25.243
> 
> 标签：c++, buffer, shader, hlsl, directx-11

所以大家好，

现在我只是想将一个值传递给 hlsl 着色器。现在是着色器中的常量缓冲区：

```
cbuffer ConstantBuffer
{
    float4x4 final;
    float4x4 rotation;    // the rotation matrix
    float4 lightvec;      // the light's vector
    float4 lightcol;      // the light's color
    float4 ambientcol;    // the ambient light's color
    float3 SPACE;
    float alpha;  // <-- Variable trying to recieve, the first 5 works!
} 
```

在 C++ 中：

```
struct CBUFFER
{
    public:
        D3DXMATRIX Final;
        D3DXMATRIX Rotation;
        D3DXVECTOR4 LightVector;
        D3DXCOLOR LightColor;
        D3DXCOLOR AmbientColor;
        D3DXVECTOR3 SPACE;
        float Alpha;
}; 
```

因此，我尝试对齐变量，以便能够以 16 位的形式发送它们。但由于某种原因，它不起作用，因为着色器中的变量 alpha 未设置。

那么我做错了什么？（PS.我在shader的初始化中设置bufferwidth为：192）

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-10T16:53:16.103

这里的问题是*bufferwidth*应该是**208**而不是**192**。在这种情况下，计算 cbuffer 大小的总和是：

> **64** (float4x4 final) + **64** (float4x4 rotation) + **16** (float4 lightvec)+ **16** ( float4 lightcol) + **16** ( float4ambientcol) + **16** (float3 SPACE) + **16** (float alpha) = **208 字节**

cbuffer 的变量以 16 字节为一组进行分组，这意味着变量的最小大小为 16 字节。这就是为什么*“float3 SPACE”*和*“float alpha”*分别代表 16 个字节的原因。

*“ConstantBuffer”*占用13包16字节（13 * 16 = 208）。

* * *

变量可以**打包**。关键字***“packoffset”***允许您在一个 16 字节包中打包 2、3 或 4 个变量。在这种情况下，打包*'float3 SPACE'*和*'float alpha'*将 cbuffer 大小减少到**192**：

```
cbuffer ConstantBuffer
{
    float4x4 final : packoffset(c0);
    float4x4 rotation : packoffset(c4);
    float4 lightvec : packoffset(c8);
    float4 lightcol : packoffset(c9);
    float4 ambientcol : packoffset(c10);
    float3 SPACE : packoffset(c11); // 'SPACE' is mapped to the first 12 bytes of the 12th pack.
    float alpha : packoffset(c11.w); // 'alpha' is mapped to the last 4 bytes of the 12th pack.
} 
```

现在计算 cbuffer 大小的总和是：

> **64** (float4x4 final) + **64** (float4x4 rotation) + **16** (float4 lightvec)+ **16** ( float4 lightcol) + **16** (float4ambientcol) + **12** (float3 SPACE) + **4** (float alpha) = **192 bytes**

而*“ConstantBuffer”*占用12包16字节（12 * 16 = 192）。

最后应该修改结构*“CBUFFER” ：*

```
struct CBUFFER
{
    public:
        D3DXMATRIX Final;
        D3DXMATRIX Rotation;
        D3DXVECTOR4 LightVector;
        D3DXCOLOR LightColor;
        D3DXCOLOR AmbientColor;
        D3DXVECTOR4 SPACE_and_alpha; // SPACE_and_alpha.xyz = SPACE, SPACE_and_alpha.w = alpha

}; 
```

更多包装信息：[https ://msdn.microsoft.com/en-us/library/windows/desktop/bb509632(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/bb509632(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:49:10.217

检查 de Dave awnser，编译器可能在 struct 的变量中创建了一个偏移量，以使所有这些都更快地用于 CPU 获取。如果 pragma 不起作用，请检查您是否在像素着色器阶段直接使用 alpha 值并设置正确的常量缓冲区（如果您不使用效果，则在顶点着色器中设置的常量缓冲区不会在像素着色器中共享）。

# tfs - TFS 2010：移动文件夹后历史记录丢失

> ID：14021657
> 
> 赞同：27
> 
> 时间：2012-12-24T12:49:34.310
> 
> 标签：tfs, label, history

为了清理我的项目结构，我通过 TFS Power Tools Shell-Extension（重命名/移动）将一个文件夹移动到另一个（新）文件夹中。

在新地点检查历史后，移动是唯一的条目。（我尝试了一个文件夹向上，向下，甚至在移动文件夹中的单个文件上。结果相同。）

在移动之前，我还在文件夹的版本上贴了一些标签，因为我想回到代码的一些重要状态。

那么.. 出了什么问题，我怎样才能获得历史记录或至少再次找出标签名称并检查这些版本？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-11T14:09:18.197

事实证明这很容易。

在 Visual Studio 2010 中，转到“工具”->“选项”。在那里您可以找到显示“已删除”项目的选项（大约在对话框的中间）。旧文件夹在移动过程中被删除 - 激活该选项后它将再次显示。（它们会带有一个灰色的红十字。）

不过，标签似乎已经消失了，所以我不得不按版本进行。

![在此处输入图像描述](../Images/a7db9fea9c3ef59ff1dceb0063899fd2.png)

在 Source Explorer 中，您可以再次进行正常操作 - 例如查看历史记录或获取。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-25T12:07:37.803

**免责声明**：对于来到这里的每个人的参考，这个答案并没有解决@Andreas 问题，只是提供了一些关于为什么会发生这种情况的上下文并提供了一些解决方法。

似乎在 TFS 2010 中移动文件夹时丢失历史记录不是错误，而是“功能”。（仍在 TFS2012 中发生。从此 MSDN[链接](https://connect.microsoft.com/VisualStudio/feedback/details/538032/tfs-2010-does-not-display-history-for-a-renamed-folder#details)您可以阅读**Microsoft 官方答案**：

> 感谢您在这里的反馈。**先前关于这是设计使然的评论是正确的**，并且在命令行上有一个选项。在 UI 中，文件夹的历史是递归的 - 总是。这是因为大多数时候，用户关心文件夹内容的历史。另一方面，文件没有递归历史的概念——你总是看到文件本身的历史。现在，从命令行，有一个显示递归历史记录 (/r) 的选项，如果您在没有递归选项的文件夹上运行 tf history，您将看到文件夹本身的更改。这将包括更改，例如文件夹本身的重命名。

*   **丢失历史的解决方法**：如您所见，您有一个使用**tf history的****解决方法**。
***   **避免丢失历史记录的解决方法**：如果您想避免丢失文件夹中的历史记录而不是使用移动功能，您可以使用**TFS 集成工具**将代码从一个文件夹迁移到另一个保留历史记录，从**$/TFSCode/FolderA**迁移到**$/TFSCode/文件夹 B**。这有点矫枉过正，但是如果历史记录对您来说非常重要，那么比在已删除的文件夹中查找要好得多**

 *** * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-11T00:47:27.050

文件夹历史记录确实丢失了，但单个文件历史记录实际上并没有丢失。它隐藏在文件历史记录行最左侧的小“展开我”箭头下。在文件最旧的历史记录条目上展开它，或在您看到它的任何地方展开，您还将从不再存在的旧位置看到该单个文件的历史记录。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-26T16:02:45.103

在历史记录窗口的顶部，您可以编辑源位置，输入旧名称并获取移动之前的完整历史记录。

[![历史窗口，可编辑的源位置字段](../Images/4561a0721765faf26b9cce7c30be4a43.png)](https://i.stack.imgur.com/yVTES.png)

另外，值得一提的是，您可以通过将分支移动/重命名回旧位置/名称来获取完整的历史记录。**

# python - Python 遗留伯克利数据库

> ID：14021658
> 
> 赞同：3
> 
> 时间：2012-12-24T12:49:35.467
> 
> 标签：python, berkeley-db, obsolete

我正在使用一个用 Python 编写的程序，该程序最后一次更新是在 2003 年。我现在一切正常，除了一个导入：

```
from BDBStorage.BerkeleyBase import BerkeleyConfig 
```

这看起来像是一个非常旧的 berkeley 数据库模块版本，将在 Python 3 中弃用。我能找到的唯一参考是：http: [//buildbot.zope.org/Packages/BDBStorage/BerkeleyBase。 py?graph=1.8&only_with_tag=bsddb3Storage_1_0beta4](http://buildbot.zope.org/Packages/BDBStorage/BerkeleyBase.py?graph=1.8&only_with_tag=bsddb3Storage_1_0beta4)。

不幸的是，该软件没有文档，并且构建它的团队无法联系到。

有没有人见过类似的东西？

用法如下：

```
berkeley_config = BerkeleyConfig()
berkeley_config.logdir = os.path.join(base_dir, "bdb_log")
berkeley_config.frequency = 3600
db_retriever = BerkeleyDatabaseRetriever(
    database_dir = os.path.join(base_dir, "dating_db"),
    config = berkeley_config) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:08:37.390

[`794bb3cfcd04dcd309c28ae214a59003be49d0a5`Zope repo中的结帐](https://github.com/zopefoundation/Zope/tree/794bb3cfcd04dcd309c28ae214a59003be49d0a5/lib/python/BDBStorage)包含您正在寻找的 BDBStorage 模块，

```
$ python -c 'from BDBStorage.BerkeleyBase import BerkeleyConfig'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "BDBStorage/BerkeleyBase.py", line 31, in <module>
    from ZODB.lock_file import LockFile
ImportError: No module named ZODB.lock_file 
```

它需要单独安装[ZODB 模块。](http://pypi.python.org/pypi/ZODB3/3.8.2)ZODB 模块仍在积极开发中，但我怀疑旧的 BDBStorage 模块可能需要 2003 年左右的旧版本（据我所知，上次修改 BDBStorage 模块时）

看起来工作不会很有趣..

# class - 函数可以是 Haskell 中类的实例吗

> ID：14021659
> 
> 赞同：0
> 
> 时间：2012-12-24T12:49:43.080
> 
> 标签：class, function, haskell, types, instance

```
class A a
instance A (Int -> Float) 
```

不起作用并且

```
class B b
instance B Int 
```

工作如果 Haskell 中的函数被视为第一个类，并且 (Int -> Float) 无疑是一种类型，尽管它不是 (*) 具体类型，为什么函数不能是类的实例

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T13:08:48.140

是的，函数类型在 Haskell 中并不是很特别：

```
module Test where

instance Show (a -> b) where
    show _ = "(function)" 
```

正如 shk 在他的回答中指出的那样，如果您想修复域或范围的类型，您将需要像 FlexibleInstances 这样的扩展——但这与函数类型无关，并且对于其他类型的构造函数应用程序来说是必需的，例如`Maybe Int`也是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T12:58:19.063

使用 FlexibleInstances 扩展，您可以这样做：

```
{-# LANGUAGE FlexibleInstances #-}

module TestFlexibleInstances where

class A a

instance A (Int -> Float) 
```

# c# - 如何在c#中对数字进行四舍五入

> ID：14021661
> 
> 赞同：-9
> 
> 时间：2012-12-24T12:49:59.440
> 
> 标签：c#, .net, math, rounding

我怎样才能把这样的值四舍五入：

```
1.001 => 2
3.3 => 4 
```

表示如果数字的小数部分比我想要的最小整数大于数字？

我用过`Math.Ceiling()`但没有帮助。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T12:52:23.783

Math.Ceiling 将起作用。你能告诉它什么不起作用吗？就任何错误或返回结果而言。

```
var returnVal=Math.Ceiling(yourValue); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T12:56:31.623

使用[`Math.Ceiling(`](http://msdn.microsoft.com/en-us/library/system.math.ceiling.aspx)) 方法。

> **返回大于或等于**指定数字的最小整数。

```
 var i = Math.Ceiling(1.001);
    var j = Math.Ceiling(3.3);

    Console.WriteLine(i);
    Console.WriteLine(j); 
```

输出：

> 2
> 
> 4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T12:56:37.740

```
Math.Ceiling(value); 
```

应该管用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T12:59:52.203

```
double x;
x = Math.Ceiling(5.2)   ;//Result; 6
x = Math.Ceiling(5.7)   ;//Result; 6
x = Math.Ceiling(-5.2)  ;//Result;-5
x = Math.Ceiling(-5.7)  ;//Result;-5 
```

这是一个简单的例子。你怎么不能用？也许您错过了将变量分配给

```
Math.Ceiling(); 
```

# ruby-on-rails - Ransack：使用年龄而不是出生日期

> ID：14021662
> 
> 赞同：4
> 
> 时间：2012-12-24T12:50:12.737
> 
> 标签：ruby-on-rails, ruby, ransack

我想使用 ransack 为带有`Users`. 我有一个从出生日期计算年龄的小方法：

```
def age(dob)
  now = Time.now.utc.to_date
  now.year - dob.year - ((now.month > dob.month || (now.month == dob.month && now.day >= dob.day)) ? 0 : 1)
end 
```

这适用于正常显示 ( `as in age(@user.date_of_birth)`)

但是当使用 search_form_for 我不能做同样的事情：

```
<%= search_form_for @search, url: search_users_path, method: :post do |f| %>
    <div class="field">
        <%= f.label :date_of_birth_gteq, "Age between" %>
        <%= f.text_field :date_of_birth_gteq %>
        <%= f.label :date_of_birth_gteq, "and" %>
        <%= f.text_field :date_of_birth_lteq %>
    </div>
<div class="actions"><%= f.submit "Search" %></div>
 <% end %> 
```

我的问题是：如何在搜索中使用年龄而不是出生日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T13:06:47.903

添加如下所示的范围以查找给定年龄的日期。

```
scope :age_between, lambda{|from_age, to_age|
  if from_age.present? and to_age.present?
    where( :date_of_birth =>  (Date.today - to_age.to_i.year)..(Date.today - from_age.to_i.year) )
  end
} 
```

对于洗劫语法：

```
ransacker :age, :formatter => proc {|v| Date.today - v.to_i.year} do |parent|
  parent.table[:date_of_birth]
end 
```

在视图中

```
<%= f.text_field :age_gteq %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-26T02:14:06.170

我个人并不了解 ransacker 并尝试使用 ransacker 但找不到任何可以检查传入谓词的东西。因此我认为最好使用范围来执行此操作。

```
def self.age_lteq(age)
  start_birth_year = Date.today.year - age
  where('date_of_birth >= ?', Date.new(start_birth_year))
end

def self.age_gteq(age)
  birth_year = Date.today.year - age
  end_of_birth_year = Date.new(birth_year + 1) - 1
  where('date_of_birth <= ?', end_of_birth_year)
end

private

def self.ransackable_scopes(auth_object = nil)
  %i(age_lteq age_gteq)
end

# In views just do the following (ransack default grouping queries is by AND)
# https://github.com/activerecord-hackery/ransack#grouping-queries-by-or-instead-of-and
<%= f.input :age_lteq %>
<%= f.input :age_gteq %> 
```

@siddick 的回答很酷，但行为的逻辑`lteq`就像`gt`和`gteq`行为一样`lt`。我自己最近开始使用 ruby​​ 和 rails。所以，如果我做错了什么，请告诉我。：） 谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-26T09:15:39.247

只是@siddick 答案的更新（效果很好）。您现在需要将 ransack 提供的范围列入白名单。对于@siddick 的回答，您需要这样做：

```
def self.ransackable_scopes(auth_object = nil)
  %i(age_between)
end 
```

有关更多信息，请参阅文档 - [https://github.com/activerecord-hackery/ransack#using-scopesclass-methods](https://github.com/activerecord-hackery/ransack#using-scopesclass-methods)

# node.js - NodeJS Express - 自动渲染页面更新

> ID：14021664
> 
> 赞同：1
> 
> 时间：2012-12-24T12:50:38.130
> 
> 标签：node.js, express, ejs

我有一个后端 NodeJS 代码，我从生成的进程中收集输出：

```
 schild.stdout.on('data', function (data) {
    var result = data.toString().split("\n");
    for(var i = 0; i < result.length; i++)
    {
            var n = result[i].split("|");
            if(n.length == 4)
            {
                    var date = n[0];
                    var category = n[1];
                    var component = n[2];
                    var condition = n[3];
                    response.push({Date : date, Category : category, Component : component, Condition : condition});
            }
    }
    logger.info('Rendering : ' + response.length);
    res.render('viewpage', {status:0, msg:'Success', responsedata:response}); 
```

});

我的 viewpage.ejs 文件有以下代码：

```
var oTable = $('#example').dataTable({"bDestroy" : true, "bUseRendered": false, "bSort" : false, "bPaginate" : true, "bDeferRender": true, "iDisplayLength" : 27});
var status = <%= status %>;
if(status == 2)
{
alert( '<%= msg %>' );
}
if(status == 0)
{
<% for(var i =0; i < responsedata.length; i++){ %>
        $('#example').dataTable().fnAddData(['<%= responsedata[i].Date %>', '<%= responsedata[i].Category %>' , '<%= responsedata[i].Component %>', '<%= responsedata[i].Condition %>']);
<% } %>
        oTable.fnDraw();
}
        } ); 
```

问题是该页面仅在第一次调用“res.render”时才呈现，但我希望使用“schild.stdout.on”事件中捕获的进一步输出来更新页面。我确实在我的记录器语句中看到第一次响应数组的长度为 0，这是正确的，但随后我获得了有效数据并呈现到视图 - 但页面没有使用最新数据进行更新。页面只加载一次并且页面上没有进一步的更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T18:19:10.063

所以你需要一个不同的设计来完成这项工作。[socket.io](http://socket.io/)之类的东西可以帮助将数据从服务器流式传输到浏览器，但您需要按照以下方式进行操作：

1.  使用空数据和 javascript 渲染一个基本的 HTML 页面来处理 socket.io
2.  从浏览器中的 javascript，建立一个 socket.io 连接并请求您的数据流
3.  使用与您所拥有的代码类似的代码，将服务器子进程的输出`data`事件转换为 socket.io 消息，因为单个数据单元是可用的
4.  在浏览器中，当每个数据单元从服务器到达时，将其格式化为 HTML 并将其附加到您的表格中。

# c# - 检查焦点是否设置为excel单元格

> ID：14021665
> 
> 赞同：7
> 
> 时间：2012-12-24T12:50:38.057
> 
> 标签：c#, excel, vsto, vba

我正在从事 VSTO 项目。我需要检测 Excel vsto 项目中的输入焦点。

我想检查焦点是在 excel 单元格上还是在其他 excel 组件上，如查找对话框、文档操作窗格或任何其他 excel 内置对话框。

这可以检测吗？

![请参考屏幕截图](../Images/570923cfd38c1cd26bc176b311ef57ff.png)

如屏幕截图所示，我想知道输入焦点是否设置为 Excel 单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:54:48.633

这将获得活动窗口的标题（vba）

```
Option Explicit

Private Declare Function GetActiveWindow Lib "User32.dll" () As Long
Private Declare Function GetWindowText Lib "user32" Alias "GetWindowTextA" _
(ByVal hWnd As Long, ByVal lpString As String, ByVal cch As Long) As Long

Function ActiveWindowName()
Dim hWnd As Long
Dim lngRet As Long
Dim strText As String

hWnd = GetActiveWindow()
strText = String(100, Chr(0))
lngRet = GetWindowText(hWnd, strText, 100)
ActiveWindowName=strText
End Function 
```

它将返回活动窗口上的标题，但我假设 100 个字符的长度就足够了。

此代码应提供一个返回当前标题并正确调整长度的函数。（我目前没有安装 c#，所以无法测试）：

```
[DllImport("user32.dll")]
static extern IntPtr GetActiveWindow();

[DllImport("user32.dll", SetLastError=true, CharSet=CharSet.Auto)]
static extern int GetWindowTextLength(IntPtr hWnd);

[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);

public static string GetActiveWindowText()
{
    IntPtr hWnd = GetActiveWindow();  
    // Allocate correct string length first
    int length = GetWindowTextLength(hWnd);
    StringBuilder sb = new StringBuilder(length + 1);
    GetWindowText(hWnd, sb, sb.Capacity);
    return sb.ToString();
} 
```

然后，您应该能够测试该字符串以查看它包含的内容。在 VBA 示例中，`=ActiveWindowName()`输入**A1**返回`Microsoft Excel - Book1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:02:15.010

你需要做这样的事情：

```
private bool CheckInputisinExcelCell()
{
    Microsoft.Office.Core.CommandBarControl cmdEdited;
    cmdEdited=YourExcelApplicationobject.CommandBars.FindControl(Microsoft.Office.Core.MsoControlType.msoControlButton, 23, System.Reflection.Missing.Value, System.Reflection.Missing.Value);
    return cmdEdited.Enabled;
} 
```

# iphone - 单击主页按钮时，部分卷曲消失

> ID：14021667
> 
> 赞同：0
> 
> 时间：2012-12-24T12:50:50.457
> 
> 标签：iphone, ios, calayer

我正在使用 CATransition 进行部分卷曲，它工作正常，但是在页面弯曲并尝试恢复时单击主页按钮后，弯曲的页面会消失。

这是我的代码

```
self.animation = [CATransition animation];
[self.animation setDelegate:self]; [animation setDuration:1.00];
[self.animation setTimingFunction:UIViewAnimationCurveEaseInOut];

if (!curled){
    self.animation.type = @"pageCurl"; 
    self.animation.fillMode = kCAFillModeForwards;
    self.animation.endProgress = 0.50; 
}

[self.animation setRemovedOnCompletion:NO];

[[self view] exchangeSubviewAtIndex:0 withSubviewAtIndex:1];

[[[self view] layer] addAnimation:self.animation forKey:@"pageCurlAnimation"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:12:56.177

这可能会帮助你

```
-(void)viewWillDisappear:(BOOL)animated{

[self.view.layer removeAllAnimations];
[super viewWillDisappear:YES];
} 
```

# prolog - 为什么这个 Prolog Fibonacci 函数会导致“instantiation_error”？

> ID：14021668
> 
> 赞同：4
> 
> 时间：2012-12-24T12:50:54.670
> 
> 标签：prolog, logic, fibonacci, declarative, clpfd

我正在尝试使用以下函数计算[斐波那契数列：](http://en.wikipedia.org/wiki/Fibonacci_series)

```
fib(0,A,_,A).
fib(N,A,B,F) :-
    N1 is N-1, Sum is A+B, fib(N1, B, Sum, F).
fib(N, F) :- fib(N, 0, 1, F). 
```

这旨在像这样工作：

```
| ?- fib(20,Result).

Result = 6765 ? 
```

但是当我尝试这个时，它抱怨：

```
| ?- fib(What,6765).
uncaught exception: error(instantiation_error,(is)/2) 
```

有谁明白为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:00:36.773

在第二条中：

```
fib(N,A,B,F) :-
    N1 is N-1, Sum is A+B, fib(N1, B, Sum, F). 
```

`N`是一个要递减的变量，并且在您调用：

```
fib(What, 6765). 
```

该变量尚未定义，因此您会在`N1 is N - 1`.

在 swipl 我什至得到了错误：

```
?- fib(W, 6765).
ERROR: fib/4: Arguments are not sufficiently instantiated 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T17:30:51.510

既然您知道这是一个错误，您介意知道它是否真的可以回答您的查询吗？

你会如何处理这个问题？你的功能没问题吧？确切地说，因为它是一个*函数*，而*不是*一个*关系*，所以你会得到错误。

解决它有点复杂，但 CLP 可以！

请参阅 CLP(FD)[文档](http://www.swi-prolog.org/pldoc/doc/swi/library/clp/clpfd.pl)中的这个引人入胜的示例（在此处引用）

```
:- use_module(library(clpfd)).

n_factorial(0, 1).
n_factorial(N, F) :-
        N #> 0, N1 #= N - 1, F #= N * F1,
        n_factorial(N1, F1). 
```

我们需要这样的东西，但对于斐波那契。看看它是多么容易：

```
:- [library(clpfd)].

fib(0,A,_,A).
fib(N,A,B,F) :-
    N #> 0,
    N1 #= N-1,
    Sum #= A+B,
    fib(N1, B, Sum, F).
fib(N, F) :- fib(N, 0, 1, F). 
```

即用`is`/2替换/ `#=`2，我们得到

```
?- fib(20,Result).
Result = 6765 .

?- fib(X,6765).
X = 20 ;
^C 
```

注意，在第一次响应后程序循环！你有办法纠正它吗？或者另一个问题可能值得......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:08:02.740

更清晰、更自然的谓词定义可能是：

```
//The two base steps
fib1(0,0). 
fib1(1,1).
//the recursive step
fib1(N,F) :- 
        N >= 0, M is N-2, O is N-1, fib1(M,A), fib1(O,B), F is A+B. 
```

它也是一个只有一个谓词的定义：fib/2

# iphone - UIPinchGestureRecognizer 和 UIImageView 的问题

> ID：14021669
> 
> 赞同：0
> 
> 时间：2012-12-24T12:50:58.210
> 
> 标签：iphone, objective-c, ios, ipad

我试图通过`UIPinchGestureRecognizer`但是捏图像，问题是我的代码无法正常工作，实际上它无法缩放我的图像

```
-(void) pinching: (UIPinchGestureRecognizer *) sender {

    CGAffineTransform myTransformation =
    CGAffineTransformMakeScale(sender.scale, sender.scale);
    sender.view.transform = myTransformation;
}

- (void)viewDidLoad
{
  UIPinchGestureRecognizer *pinch =
    [[UIPinchGestureRecognizer alloc]
     initWithTarget:self
     action:@selector(pinching:)];

    pinch.delegate = self;

    [imageBG addGestureRecognizer:pinch];

    [imageBG setUserInteractionEnabled:YES];
    [imageBG setMultipleTouchEnabled:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:00:26.673

尝试使用`UIScrollView`.

为此，创建它

```
self.scrollView = [[UIScrollView alloc] initWithFrame:...];
self.scrollView.delegate = self;
self.scrollView.maximumZoomScale = 2.0; // adjust as you need
self.scrollView.minimumZoomScale = 0.5; // adjust as you need
[self.scrollView addSubview:self.imageView]; 
```

并添加委托方法：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return self.imageView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:00:36.213

只需在`.h`文件中取一个变量，如下所示..

```
CGFloat lastScale; 
```

并使用这种类型的代码...

在`viewWillAppear:`方法中添加它..

```
- (void)viewWillAppear:(BOOL)animated
{
     UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
        [pinchRecognizer setDelegate:self];
        [yourImageView addGestureRecognizer:pinchRecognizer];
}

-(void)scale:(id)sender {
    if([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

            lastScale = 1.0;
            return;
        }

        CGFloat scale = 1.0 - (lastScale - [(UIPinchGestureRecognizer*)sender scale]);

        CGAffineTransform currentTransform = [(UIPinchGestureRecognizer*)sender view].transform;
        CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);

        [[(UIPinchGestureRecognizer*)sender view] setTransform:newTransform];
        yourImageView.transform = newTransform

        lastScale = [(UIPinchGestureRecognizer*)sender scale];
} 
```

也试试这个代码..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T13:05:18.377

您需要添加一个滚动视图以启用缩放。将您的 imageView 添加为滚动视图的子视图。将委托设置为`UIScrollViewDelegate`自己。实现委托方法。

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView

{
    //return the imageview here
    return self.imageView;

} 
```

在此处缩放您的图像视图：

```
- (CGRect)zoomRectForScrollView:(UIScrollView *)scrollView withScale:(float)scale withCenter:(CGPoint)center 
```

你可以参考[Apple 的这个例子](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/UIScrollView_pg/ZoomZoom/ZoomZoom.html)。

# r - 如何将标题添加到R中的数据集？

> ID：14021675
> 
> 赞同：27
> 
> 时间：2012-12-24T12:51:53.550
> 
> 标签：r, dataset, statistics

我需要阅读以下数据文件夹中的“wdbc.data”：http: [//archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/](http://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/)

使用命令 read.csv 在 R 中执行此操作很容易，但由于缺少标题，我该如何添加它？我有信息，但不知道如何执行此操作，我宁愿不要编辑数据文件。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-24T13:38:35.657

您可以执行以下操作：

加载数据：

```
test <- read.csv(
          "http://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.data",
          header=FALSE) 
```

请注意，`header`参数 for的默认`read.csv`值为`TRUE`so 为了获取您需要将其设置为的所有行`FALSE`。

将名称添加到 data.frame 中的不同列

```
names(test) <- c("A","B","C","D","E","F","G","H","I","J","K") 
```

或据我了解的替代方法和更快（不重新加载整个数据集）：

```
colnames(test) <- c("A","B","C","D","E","F","G","H","I","J","K") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T11:14:30.803

如果您`colnames`有`data.frame`或`matrix`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-25T09:59:36.013

您还可以通过创建一个值数组并分配该数组来解决此问题：

```
newheaders <- c("a", "b", "c", ... "x")
colnames(data) <- newheaders 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-18T11:59:57.937

如果您有兴趣从`.txt`文件中读取一些数据并且只将该文件的几列提取到具有*自定义标头*`.txt`的新文件中，则以下代码可能有用：

 *```
# input some data from 2 different .txt files:
civit_gps <- read.csv(file="/path2/gpsFile.csv",head=TRUE,sep=",")
civit_cam <- read.csv(file="/path2/cameraFile.txt",head=TRUE,sep=",")

# assign the name for the output file:
seqName <- "seq1_data.txt"

#=========================================================
# Extract data from imported files
#=========================================================
# From Camera:
frame_idx <- civit_cam$X.frame
qx        <- civit_cam$q.x.rad.
qy        <- civit_cam$q.y.rad.
qz        <- civit_cam$q.z.rad.
qw        <- civit_cam$q.w

# From GPS:
gpsT      <- civit_gps$X.gpsTime.sec.
latitude  <- civit_gps$Latitude.deg.
longitude <- civit_gps$Longitude.deg.
altitude  <- civit_gps$H.Ell.m.
heading   <- civit_gps$Heading.deg.
pitch     <- civit_gps$pitch.deg.
roll      <- civit_gps$roll.deg.
gpsTime_corr <- civit_gps[frame_idx,1]

#=========================================================
# Export new data into the output txt file
#=========================================================
myData <- data.frame(c(gpsTime_corr),
                     c(frame_idx),
                     c(qx),
                     c(qy),
                     c(qz),
                     c(qw))
# Write :
cat("#GPSTime,frameIdx,qx,qy,qz,qw\n", file=seqName)
write.table(myData, file = seqName,row.names=FALSE,col.names=FALSE,append=TRUE,sep = ",") 
```

当然，您应该根据自己的应用程序**修改此示例脚本。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-18T10:05:16.453

这应该可以解决，

```
 kable(dt) %>%
      kable_styling("striped") %>%
      add_header_above(c(" " = 1, "Group 1" = 2, "Group 2" = 2, "Group 3" = 2))
#OR
kable(dt) %>%
  kable_styling(c("striped", "bordered")) %>%
  add_header_above(c(" ", "Group 1" = 2, "Group 2" = 2, "Group 3" = 2)) %>%
  add_header_above(c(" ", "Group 4" = 4, "Group 5" = 2)) %>%
  add_header_above(c(" ", "Group 6" = 6)) 
```

有关更多信息，您可以查看[链接](https://haozhu233.github.io/kableExtra/awesome_table_in_html.html#grouped_columns__rows)*

# android - 我的安卓应用程序的根是什么？

> ID：14021678
> 
> 赞同：-1
> 
> 时间：2012-12-24T12:52:17.650
> 
> 标签：android

我正在尝试开发一个简单的 android 应用程序。我想知道我的应用程序文件夹中是否存在图像，但我不知道我的应用程序的根目录是什么。我试过了...

```
File nomeFile = new File("res/drawable-hdpi/imagename.jpg")
File nomeFile = new File("myappanem/res/drawable-hdpi/imagename.jpg") 
```

...但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:54:52.103

尝试这个 ：

```
File YourFile = new File(Environment.getExternalStorageDirectory(), "/Android/data/....yourfile.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:05:09.007

您是否考虑应用程序缓存目录的内部存储器//将其用于内部存储器

```
 String path =Environment.getDataDirectory().getAbsolutePath();
    File myImage=new File(path,"your file name.extension");

     //use this for cache directory     

    String path=getApplicationContext().getDir("" , Context.MODE_PRIVATE);
    File myImage=new File(path,"your file name.extension") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:57:39.267

不，您无法在打包后访问可绘制对象或清单。因为根本没有“可绘制”文件夹或清单文件。安装后，您的所有可绘制对象都打包在 APK 文件中。你无法接触到他们。但是您可以像这样在您的应用程序中访问手机的任何文件夹。

首先制作目录。

```
File directory = new File(Environment.getExternalStorageDirectory()+File.separator  
+"Your folder");
  directory.mkdirs(); 
```

像这样访问您的文件夹。

```
 String fileUrl = "/Your folder/a.png";

 String file = android.os.Environment.getExternalStorageDirectory().getPath() +  
 fileUrl;
File f = new File(file); 
```

# c++ - OpenCV 线性混合和空间加法

> ID：14021681
> 
> 赞同：0
> 
> 时间：2012-12-24T12:52:37.340
> 
> 标签：c++, image-processing, opencv

我目前正在尝试编写一个 C++ 程序，该程序能够从图像的 Y 分量中提取 ROI 并为该特定 ROI 加水印。我目前被困在水印技术的实施上。经过进一步研究，我在 OpenCV 中看到了 addweighted 函数，我知道它是线性混合的一种实现。

我想问的是，alpha混合是否被认为是原始图像的像素和水印之间的空间加法？如果没有，谁能解释两个图像之间的 alpha 混合和空间添加之间的区别？

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:39:19.903

在这种情况下，我不是 100% 的“空间加法”（谷歌并不是特别有帮助），但我确实理解 alphablending。

如果我们有两个图像`A`和`B`，那么`R`当与 alpha 混合时得到的图像`a`： `r[x, y] = a * A[x, y] + (1-a) * B[x,y];`

因此，基本上，将像素颜色加在一起，并混合每个图像的一部分。在这里我们谈论的是 RGB 颜色，我完全不知道如果你在 YUV 颜色中这样做会发生什么——我相信有一些方法可以实现同样的事情——它甚至可以被称为“空间加法”。但是我从事的所有使用 alpha 混合的图形项目都使用 RGB 作为中间项 [至少在我接触过的部分中]。

我希望通过描述这个过程，它可以帮助您理解 alphablending，并由此了解您需要做什么，无论是 RGB 还是其他格式。

# ios - glGetIntegerv(GL_VIEWPORT, &rect) 在 iOS 上返回 GL_INVALID_ENUM

> ID：14021682
> 
> 赞同：1
> 
> 时间：2012-12-24T12:52:41.233
> 
> 标签：ios, opengl-es

我想在`glkView:drawInRect:`调用之前获取 OpenGL 窗口的大小。我决定使用`glGetIntegerv(GL_VIEWPORT, &rect)`（而不是`self.bounds`或类似）更加独立于平台，但它有`GL_INVALID_ENUM`错误。

这是测试代码：

```
#define SHOW {\
  struct { GLint x, y, w, h; } rect;\
  glGetIntegerv(GL_VIEWPORT, (GLint*)&rect);\
  printf("%s %d %d\n", __FUNCTION__, rect.w, rect.h);\
}

...

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { SHOW; ... }
- (void)viewDidLoad { SHOW; ... }
- (void)viewWillAppear:(BOOL)animated { SHOW; ... }
- (void)viewDidAppear:(BOOL)animated { SHOW; ... }
- (void)viewDidLayoutSubviews { SHOW; ... }
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect { SHOW; ... } 
```

这是输出：

```
-[ViewController viewDidLoad] 0 0
-[ViewController viewWillAppear:] 0 0
-[ViewController application:didFinishLaunchingWithOptions:] 0 0
-[ViewController viewWillLayoutSubviews] 0 0
-[ViewController viewDidLayoutSubviews] 0 0
-[ViewController glkView:drawInRect:] 1024 768
-[ViewController viewDidAppear:] 1024 768
-[ViewController glkView:drawInRect:] 1024 768 
```

为什么`glGetIntegerv(GL_VIEWPORT, &rect)`在 glkView:drawInRect: 之前不可用？应该`GL_VIEWPORT`以某种方式初始化？

# assembly - 我需要特定的 Shellcode 顺序吗？将其转换为 shellcode 时我做错了什么？

> ID：14021684
> 
> 赞同：0
> 
> 时间：2012-12-24T12:52:48.263
> 
> 标签：assembly, shellcode

我今天开始组装以创建 shell 代码。ASM 很好，过了一会儿我创建了这个：

```
[SECTION .text]

global _start

_start:

        call ender

        starter:
        mov al, 4
        mov bl, 1
        pop ecx
        mov dl, 21
        int 0x80

        xor eax, eax
        mov al, 1
        xor ebx,ebx
        int 0x80

        ender:
        call starter
        db 10,'Shellcode forever!',10 ,10 
```

效果很好：

```
Shellcode forever!

root@root:~/Desktop# clear;nasm -f elf test.asm;ld -s -o test test.o;./test 
```

所以我然后使用'objdump -d test'并得到了这个：

```
test:     file format elf32-i386

Disassembly of section .text:

08048060 <.text>:
 8048060:   e8 11 00 00 00          call   0x8048076
 8048065:   b0 04                   mov    $0x4,%al
 8048067:   b3 01                   mov    $0x1,%bl
 8048069:   59                      pop    %ecx
 804806a:   b2 15                   mov    $0x15,%dl
 804806c:   cd 80                   int    $0x80
 804806e:   31 c0                   xor    %eax,%eax
 8048070:   b0 01                   mov    $0x1,%al
 8048072:   31 db                   xor    %ebx,%ebx
 8048074:   cd 80                   int    $0x80
 8048076:   e8 ea ff ff ff          call   0x8048065
 804807b:   0a 53 68                or     0x68(%ebx),%dl
 804807e:   65                      gs
 804807f:   6c                      insb   (%dx),%es:(%edi)
 8048080:   6c                      insb   (%dx),%es:(%edi)
 8048081:   63 6f 64                arpl   %bp,0x64(%edi)
 8048084:   65 20 66 6f             and    %ah,%gs:0x6f(%esi)
 8048088:   72 65                   jb     0x80480ef
 804808a:   76 65                   jbe    0x80480f1
 804808c:   72 21                   jb     0x80480af
 804808e:   0a 0a                   or     (%edx),%cl 
```

但是当我把它变成 shellcode 时：

```
char code[] = "\xe8\x11\x00\x00\x00\xb0\x04\xb3\x01\x59\xb2\x15\xcd\x80\x31\xc0\xb0\x01\x31\xdb\xcd\x80\xe8\xea\xff\xff\xff\x0a\x53\x68\x65\x6c\x6c\x63\x6f\x64\x65\x20\x66\x6f\x72\x65\x76\x65\x72\x21\x0a\x0a"; 
```

它没有用。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:22:07.517

这就是问题：

```
nasm -f elf test.asm 
```

ELF 是一种二进制格式，可以很好地生成可执行文件，这也是您的独立测试工作的原因，但 shellcode 以原始格式出现，而不是具有诸如标题、节等之类的好东西。

要获得所说的原始字节，您需要做的就是替换`elf`为`bin`：

```
nasm -f bin test.asm 
```

这将使用您指定的助记符生成一个原始对象。为了让自己的生活更轻松，我通常包括：

```
[bits 32] 
```

或者

```
[bits 64] 
```

在汇编文件中以获得正确的体系结构。

更改为直接二进制输出*将*破坏您的链接可执行测试，因为链接器链接 ELF 兼容对象，而不是原始二进制块。没有解决方法 - 但没有理由不能同时生成此编译版本和二进制版本。

在 Linux 系统上，我通常不会直接链接，而是使用如下所示的小型测试平台：

```
#include <stdio.h>
#include <stdint.h>

#include <sys/types.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <unistd.h>

#define PAGE_SIZE 4096U

uint8_t buffer[] = { 
    0xeb, 0x01, 0x90, ...
};

typedef int (* func)();

int main(int argc, char** argv)
{
    func f;
    mprotect((void*)((size_t)&buffer[0] & ~(PAGE_SIZE -1)), 
             2*PAGE_SIZE, PROT_READ | PROT_EXEC);
    f = (func) &buffer[0];
    f();
    return 0;
} 
```

我有时会针对不同的情况进行修改，例如我介绍了相关的复制环境。要开始使用它，请编译：

```
gcc -z execstack -fno-stack-protector -std=gnu99 -o testshell testshell.c 
```

这运行`execstack`以启用二进制文件中的可执行堆栈，这不是一个现实的目标环境，但嘿，这*是*一个测试，并关闭堆栈保护器，它再次出现在目标上，但会妨碍基本开发。

# c - 静态缓冲区分配在哪里？

> ID：14021687
> 
> 赞同：5
> 
> 时间：2012-12-24T12:53:14.847
> 
> 标签：c, static

假设我有一个文件 test.c 包含：

```
char buffer1[1024];

int somefunction()
{
      char buffer2[1024];
      // do stuff
} 
```

现在我知道 buffer2 是在属于 somefunction 调用的帧上的堆栈上分配的，但是 buffer1 分配在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T12:55:50.513

这些变量通常位于[BSS](http://en.wikipedia.org/wiki/.bss)（在源代码中没有显式初始化的变量，因此默认情况下它们的值为 0）或[数据段](http://en.wikipedia.org/wiki/Data_segment)（初始化数据）。在这里，`buffer1`是未初始化的，因此它可能会分配在 BSS 段上，该段从数据段的末尾开始。

来自[勇敢的](http://www.bravegnu.org/gnu-eprog/c-startup.html)网站：

![在此处输入图像描述](../Images/f019cfc067e7100fbcbe72cca62e5899.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:56:52.027

`buffer1`在程序的静态（bss/data）内存部分中保留了内存。这就是所有静态变量和全局变量存在的地方。

它是第三个内存段，就像堆栈和堆一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:57:21.890

静态声明的数组与本地声明的数组具有不同的存储规范。正如您所说，本地数组`buffer2`将（通常）在堆栈上创建，而静态数组`buffer1`将（通常）在`./bss`或`./data`段上创建。

# django - Django：通用外键转储数据：无法解析依赖项

> ID：14021703
> 
> 赞同：5
> 
> 时间：2012-12-24T12:54:51.640
> 
> 标签：django, generics, foreign-key-relationship, natural-key, dumpdata

我使用通用外键将不同的配置文件与`Users`继承自`auth.User`. `dumpdata`尽管通过了`--natural`选项，但我无法做到。它说，

*错误：无法解析序列化应用列表中 myproject.AdminProfile、myproject.TeacherProfile、myproject.Users 的依赖关系。*

根据[文档](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericForeignKey)，据说我们需要实现[natural_key 方法](https://docs.djangoproject.com/en/dev/topics/serialization/#topics-serialization-natural-keys)来获取和闪烁涉及泛型关系的固定装置。我怎么能用这里展示的模型做到这一点？

```
class Users(User):
    location = models.TextField('Location', blank=True)
    created_by = models.ForeignKey('self', null=True, blank=True, related_name='created_by_user')

    # Generic foreign key setup to hold the extra attributes
    profile_contenttype = models.ForeignKey(ContentType, null=True, blank=True)
    profile_object_id = models.PositiveIntegerField('Extra ID', null=True, blank=True)
    profile_object = generic.GenericForeignKey('profile_contenttype', 'profile_object_id')

class AdminProfile(models.Model):
    organization = models.CharField('Organization', max_length=100)

    # profile reverse relation to get the user
    users_link = generic.GenericRelation('Users', content_type_field='profile_contenttype',
                                         object_id_field='profile_object_id')

class TeacherProfile(models.Model):
    designation = models.CharField('Designation', max_length=100)

    # profile reverse to get the user
    users_link = generic.GenericRelation('Users', content_type_field='profile_contenttype',
                                         object_id_field='profile_object_id') 
```

使用 Django 1.4.3 和 Postgres。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T04:09:17.553

您的问题似乎与缺少自然键方法无关。我使用 SQLite 在 Django 1.4 和 1.2.5 上按原样测试了您的 [原始] 代码，并且能够使用自然键转储数据而没有错误。

经过一番搜索，我发现当模型之间存在循环依赖（包括具有自引用的模型）时，就会出现此问题。正如您更新的代码所示，`Users`模型中有一个自我引用，所以这就是问题所在。这个错误是在 Django 1.3 中引入的，尽管[已经修复](https://code.djangoproject.com/ticket/16317)，但它在稳定版本中仍然不可用 AFAIK（测试到 1.4.3）。但是，在 beta 版本 (1.5b2) 中，您的代码可以正常工作。

如果无法选择使用 beta 版本（或降级到 1.2），那么您唯一的解决方案可能确实是创建另一个模型。就像是：

```
class CreatedBy(models.Model):
    creator = models.ForeignKey(Users, related_name="created_by_user")
    created = models.ForeignKey(Users, unique=True, related_name="created_by") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-01T23:24:22.677

更普遍的问题（涉及自然键的循环依赖，而不仅仅是使用自然键的自引用）是一个开放的错误，并在此处报告：[https ://code.djangoproject.com/ticket/31051](https://code.djangoproject.com/ticket/31051)

# android - tesseract 训练 - 给出“无法打开输入文件”错误

> ID：14021705
> 
> 赞同：0
> 
> 时间：2012-12-24T12:55:00.870
> 
> 标签：android, windows, pdf, ocr, tiff

我正在阅读[本](http://michaeljaylissner.com/blog/adding-new-fonts-to-tesseract-3-ocr-engine)教程以向 tesseract 添加新字体，到目前为止，我已经为我的 pdf 创建了 tiff 文件。我正在尝试运行命令：
`tesseract eng.impact.exp0.tiff eng.impact.exp0 batch.nochop makebox`
但它只显示：
Tesseract Open Source OCR Engine v3.02 with Leptonica
无法打开输入文件：eng.impact.exp0.tiff
我只是不知道为什么！

我运行以下命令来创建 tiff 文件：
`convert -density 300 -depth 4 eng.impact.exp0.pdf eng.impact.exp0.tif`

**编辑：**嗯，将 -depth 选项更改为 8 而不是 4 有效。._.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T05:44:26.723

您的图像文件名中似乎有错字。它应该是：

```
tesseract eng.impact.exp0.tif eng.impact.exp0 batch.nochop makebox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:43:13.317

试试这个命令来重命名你的 TIFF 文件：

```
mv  eng.impact.exp0.tif  eng.impact.exp0.tiff 
```

然后才运行tesseract：

```
tesseract eng.impact.exp0.tiff eng.impact.exp0 batch.nochop makebox 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-17T09:45:37.257

我有这个问题并解决它。

您必须首先复制 tesseract.exe 旁边的图像文件，然后转到该目录并打开命令提示符并运行您的命令。只是这个。

注意：在命令提示符下，您必须在 tesseract 的路径中，并且图像文件必须在此路径中。

# scala - 避免在函数式编程中重新分配 - 不好的例子？

> ID：14021709
> 
> 赞同：3
> 
> 时间：2012-12-24T12:55:31.230
> 
> 标签：scala, functional-programming, variable-assignment, concurrent-programming

在许多网络文章中，函数式编程被描述为避免各种变量重新分配，因此至少只推广“最终”变量，尤其是为了更好地阅读。

它们中的大多数都是以计数器变量递增的不良循环为例。（就像著名的`i++`or `x = x + 1`。这里有一篇 Bob 叔叔的文章说明了它：[FP Episode 1](http://blog.8thlight.com/uncle-bob/2012/12/22/FPBE1-Whats-it-all-about.html)

因此，这些文章表明，依赖可变变量通常会导致副作用，尤其是会阻止我们所谓的“引用透明”，因此更难构建在多线程或更好的多处理器上运行的程序。

我的问题是：众所周知，`i++`通常是线程本地变量，因此即使并发处理也不会出现问题。

**为什么要选择像带有局部变量的循环这样的例子作为赋值的缺点，并允许直接得出并发编程有风险的结论？**这两件事都与我完全无关。

为什么不呢，为了更清楚，选择全局变量（或字段对象）的重新分配，这显然`enemy`是并发编程的一种，而不会像 Java 那样过度使用所有的锁样板。

我真的认为这个循环示例并不是将函数式编程的好处传递给命令式程序员的最佳例证。

此外，它会导致与“noob”函数式程序员的混淆，因为 Scala 例如在`List`.scala 类中使用了很多 while 循环模式：

```
override def take(n: Int): List[A] = {
    val b = new ListBuffer[A]
    var i = 0
    var these = this
    while (!these.isEmpty && i < n) {  
      i += 1   // reassignment here
      b += these.head
      these = these.tail
    }
    if (these.isEmpty) this
    else b.toList
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T13:16:05.923

我认为 Odersky 本人说过他们的目标是使 API 具有功能性，但内部代码对于特定实现来说是最优化的。因此，您可能不应该在 Scala 库内部搜索“对 Scala 的良好使用”或“FP 的出色示例”。

使用可变状态来保存索引（例如）也很容易出错。因此，您的目标应该是对整个集合（filter/map/flatMap 等）使用操作，这样您就不必担心诸如“索引越界”之类的事情。尽管如此，这些操作通常会导致创建大量临时/中间集合，因此它们会导致额外的垃圾收集。这通常对 99% 的程序无关紧要，但同样，这些都在 Scala 库内部进行了尽可能多的优化。

所以，是的，除了练习以尽可能少的可变状态“生存”之外，对于单线程程序来说，这也是很好的做法，因为错误的可能位置更少，更容易测试，可读性更好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T13:25:44.867

在一个简单的循环中，没有问题——它*从来*都不是并发问题，您可能可以跟踪变量。也许。

```
// Take the first n items that pass p
def takeGood(n: Int)(p: A => Boolean): List[A] = {
  val b = new ListBuffer[A]
  var these = this
  var i = 0
  while (!these.isEmpty && i < n) {
    i += 1
    if (p(these.head)) b += these.head
    these = these.tail
  }
  b.toList
} 
```

嗯，除了这不起作用——我们`i`在*每个*循环上都增加了，而不仅仅是我们采取的那些。

如果你使用递归，至少你在做什么会变得更加明显：

```
def takeGood[A](these: List[A], n: Int)(p: A => Boolean)(b: ListBuffer[A] = new ListBuffer[A]): List[A] = {
  if (these.isEmpty || n <= 0) b.toList
  else if (p(these.head)) takeGood(these.tail, n-1)(p)({ b += these.head; b })
  else takeGood(these.tail, n)(p)(b)
} 
```

因此，即使在没有并发的情况下，使用函数式风格也有好处：有时（尤其是循环）它会使循环更加明确，从而减少出错的机会。

并发带来了额外的优势，因为*一致但过时*通常比*不一致*或*死锁*要好得多。但这不是带有迭代器的 while 循环中显示的内容。

# c# - IPAddress 上的奇怪 .Net 行为等于

> ID：14021710
> 
> 赞同：3
> 
> 时间：2012-12-24T12:55:34.583
> 
> 标签：c#, .net

> **可能重复：**
> [如何比较 IP 地址](https://stackoverflow.com/questions/1016471/how-to-compare-ip-addresses)

请告诉我，为什么这个代码（.Net 4.0）：

```
IPAddress ip = IPAddress.Parse("0.0.0.0");
if (ip == IPAddress.Any) Console.WriteLine("any"); 
else Console.WriteLine("Not any");
Console.WriteLine(IPAddress.Any.ToString()); 
```

在控制台中显示下一个结果：Not any 0.0.0.0

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T12:58:25.633

使用`Equals`方法。

`if (ip.Equals(IPAddress.Any))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:07:17.840

[http://msdn.microsoft.com/ru-ru/library/ms173147(v=vs.80).aspx](http://msdn.microsoft.com/ru-ru/library/ms173147(v=vs.80).aspx)

根据 MSDN（请参阅**覆盖运算符 ==**部分）：

> 默认情况下，操作符 == 通过确定两个引用是否指示同一个对象来测试引用是否相等，因此引用类型不需要实现操作符 == 来获得此功能。

看起来，IPAddress 不会覆盖 == 运算符，您可以比较两个不同实例的引用。正如已经提到的，您应该使用`.Equals()`函数来比较两个`IPAdress`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:03:04.463

[`IPAddress.Any`](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.any.aspx)是一个静态只读字段。`IPAddress`是一个类，因此当您尝试检查相等性时，他们会通过*引用*进行检查。这就是为什么你有一个错误。试试智慧`Equals()`的方法。

> 提供一个 IP 地址，指示服务器必须侦听所有网络接口上的客户端活动。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-24T13:19:12.573

由于 Microsoft 最了解的原因，`IPAddress.Parse("0.0.0.0")`当您要求进行对象级比较时，该框架使用它们的 objectID 而不是它们的值进行评估。也就是说，您要问的是两者是否是同一个对象（即指向存储值的内部指针）而不是同一个*值*。

但是，您可以使用以下方法执行您想要的操作`Equals()`：

```
IPAddress ipMine = IPAddress.Parse("0.0.0.0");
IPAddress ipAny = IPAddress.Any;

Console.WriteLine(ipMine == ipAny);         // will output false
Console.WriteLine(ipMine.Equals(ipAny));    // will output true 
```

框架在适当的时候将基本对象（int、float、string 等）作为基元的内置隐式处理有时会破坏我们，并且总是值得记住的是，对于复杂类型，.NET 默认情况下会将它们作为引用处理，除非作者明确地实现了运算符方法。在上述情况下，MS 认为默认行为通过 ref 比较更有用，但`Equals`应该始终进行基于值的比较，所以你们都很好。

# ruby-on-rails - `find_by_*_id` 没有按预期工作

> ID：14021712
> 
> 赞同：0
> 
> 时间：2012-12-24T12:55:39.140
> 
> 标签：ruby-on-rails, ruby

我正在关注《[使用 Rails 进行敏捷 Web 开发》（第 4 版）](http://pragprog.com/book/rails4/agile-web-development-with-rails)这本书，但我遇到了一个失败的测试用例的麻烦。

我写了一个测试，检查当您将重复的商品添加到购物车时，商品的数量没有变化，但数量会发生变化

```
 test 'adding duplicate products to cart' do
    cart = Cart.new

    ruby_book = products(:ruby)
    cart.add_product ruby_book.id

    assert cart.line_items.length == 1
    assert cart.total_price == ruby_book.price

    p '-------start--------'
    p 'outside add_product'
    p "line_items: #{cart.line_items}"
    cart.add_product ruby_book.id

    assert cart.line_items.length == 1  # TEST FAILS HERE with length == 2
    assert cart.total_price == ruby_book.price * 2 
  end 
```

它基本上测试了`add_product`方法，即：

```
class Cart < ActiveRecord::Base
  has_many :line_items, dependent: :destroy

  def add_product(product_id)
    p 'inside add_product'
    p "line_items: #{line_items}"
    p "product_id: #{product_id}"
    current_item = line_items.find_by_product_id(product_id)
    p "current_item: #{current_item}"
    p '---------end---------'
    if current_item
      current_item.quantity += 1
      current_item.price += current_item.product.price
    else
      current_item = line_items.build(product_id: product_id)
      current_item.price = current_item.product.price
    end 
    current_item
  end 

  def total_price
    line_items.to_a.sum { |item| item.price }
  end 
end 
```

为了调试测试，我添加了一些打印调用（如您所见）。输出是：

```
"-------start--------"
"outside add_product"
"line_items: [#<LineItem id: nil, product_id: 207281424, cart_id: nil, created_at: nil, updated_at: nil, quantity: 1, price: #<BigDecimal:7fa491744fe0,'0.4999E2',18(45)>>]"
"inside add_product"
"line_items: [#<LineItem id: nil, product_id: 207281424, cart_id: nil, created_at: nil, updated_at: nil, quantity: 1, price: #<BigDecimal:7fa491744fe0,'0.4999E2',18(45)>>]"
"product_id: 207281424"
"current_item: "
"---------end---------" 
```

我可以看到`line_items`有一个项目，`product_id: 207281424`但由于某种原因，调用`line_items.find_by_product_id(product_id)`不会返回项目，而是返回`nil`. 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:42:02.517

### 迪默是正确的。您没有将商品保存到购物车中。

`current_item = line_items.find_by_product_id(product_id)`如果您不保存，将返回`nil`并导致您构建另一个。`line_item`导致您的测试返回 2 而不是 1。

### 然后是你的`total_price`方法的问题。

```
line_items.to_a.sum { |item| item.price } 
```

在您的场景中（保存到数据库）只会总结**1 个**行项目，因为您要添加两次相同的产品。如果不保存（到 db），数学将是正确的，因为每个行项目将充当 1 个数量。

由于数量是按行项目定义的，因此您需要确保将数量应用于计算。

```
line_items.to_a.sum { |item| item.price * item.quantity } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:05:37.913

问题出在你的`add_cart`方法上。在 else 块中，您只是在构建一个`line_item`对象，但您没有将其保存在任何地方。将您的其他阻止更改为，

```
else
  current_item = line_items.build(product_id: product_id)
  current_item.price = current_item.product.price
  current_item.save
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:07:32.677

`add_product`方法不将行项目保存在数据库中，尝试调用`save`返回的项目

```
...
ruby_book = products(:ruby)
item = cart.add_product ruby_book.id
item.save

assert cart.line_items.length == 1
assert cart.total_price == ruby_book.price

item = cart.add_product ruby_book.id
item.save

assert cart.line_items.length == 1
... 
```

# ios - 导航到翻转视图

> ID：14021716
> 
> 赞同：0
> 
> 时间：2012-12-24T12:56:13.243
> 
> 标签：ios, uibarbuttonitem, uianimation

我使用以下代码作为 infolight 按钮（感谢 [https://stackoverflow.com/users/630145/ankit-bhardwaj](https://stackoverflow.com/users/630145/ankit-bhardwaj)）

```
// This will create ur info button in center.
    UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
    UIBarButtonItem *infoButtonItem = [[UIBarButtonItem alloc] initWithCustomView:infoButton];
    [infoButton addTarget:self action:@selector(goToRechercherView) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *flexibleLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    toolBar.items = [NSArray arrayWithObjects:flexibleLeft,infoButtonItem,flexibleLeft, nil]; 
```

这是动画，我得到了它如何翻转但翻转到同一页面的部分。

```
//This is for swipe animation. add your view inside.
-(void)goToRechercherView{
    [UIView beginAnimations:@"flipview" context:nil];
    [UIView setAnimationDuration:1];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft
                           forView:self.view cache:YES];
    [UIView commitAnimations]; 
```

所以我已经将flipviewcontroller.h .m .xib 文件添加到项目中，我想在flipanimation 中打开那个xib/页面。

有人建议我的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:44:09.213

试试这个代码可能对你有帮助

```
-(void)goToRechercherView{

      RechercherView *info3 = [[RechercherView alloc]initWithNibName:@"RechercherView" bundle:nil];
        UINavigationController * nvc = [[UINavigationController alloc] initWithRootViewController:info3];

        info3.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
        [self.navigationController presentModalViewController:nvc animated:YES];

//  if you using latest Version of iOS Just Change the following

  [self.navigationController presentViewController:nvc animated:YES completion:nil];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:19:08.150

有两种方法可以做到这一点...

第一个是……

```
newView setFrame:CGRectMake( 0.0f, 480.0f, 320.0f, 480.0f)]; //notice this is OFF screen!
[UIView beginAnimations:@"animateView" context:nil];
[UIView setAnimationDuration:0.4];
[newView setFrame:CGRectMake( 0.0f, 0.0f, 320.0f, 480.0f)]; //notice this is ON screen!
[UIView commitAnimations]; 
```

第二种选择是使用内置动画作为翻转和卷曲：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight
                           forView:newView
                            cache:YES];

[self.navigationController.view addSubview:settingsView.view];
[UIView commitAnimations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:02:08.663

如果您不介意新的视图控制器在演示期间从右侧而不是左侧翻转，我建议您以模态方式演示新的控制器。这很简单：

```
UIViewController *mySecondViewController = [[self storyboard] instantiateViewControllerWithIdentifier:@"someID"];
[mySecondViewController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[self presentViewController:mySecondViewController animated:YES completion:nil]; 
```

# ruby-on-rails - 获取工作人员每个任务的 id

> ID：14021719
> 
> 赞同：1
> 
> 时间：2012-12-24T12:56:32.747
> 
> 标签：ruby-on-rails

这些是我的模型：

`worker.rb:`

```
class Worker < ActiveRecord::Base
  has_many :tasks
  attr_accessible :name
end 
```

`task.rb:`

```
class Task < ActiveRecord::Base
  belongs_to :worker
  attr_accessible :done, :name
end 
```

我有：`views/workers/index.html.erb`所有工作人员的列表，并在每个工作人员附近：“显示任务”。此链接将用户发送到：`views/tasks/index.html.erb`。

在 中`tasks_controller`，我有：

```
def index
    @task = Worker.where(:name => params[:worker_id])
    @worker_name = params[:worker_id]
    respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @worker }
    end
end 
```

这是我的: `views/tasks/index.html.erb`:

```
<center>Task of <%= @worker_name %></center><br>
<table>
   <% @task.each do |task| %>
      <tr>
        <td><%= task.name %></td>
        <td><%= task.task %></td>
        <td><%= task.done %></td>
      </tr>
    <% end %>
</table> 
```

我想添加`<td>`每个任务的 id。就像是：

```
<td><%= task.id %></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:46:45.713

如果我理解正确，我想你想要这样的东西：

### 控制器.rb

```
@worker = Worker.find_by_name(params[:worker_id]) # might want to eager load tasks
@tasks  = @worker.tasks
# @worker_name = params[:worker_id] # don't need this anymore
... 
```

### 视图.html.erb

```
<center>Task of <%= @worker.name %></center>
<table>
  <% @tasks.each do |task| %>
  <tr>
    <td><%= task.id %></td>
    <td><%= task.name %></td>
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T15:38:02.263

```
1.9.3-p194 :043 > Worker.all.each do |worker|
1.9.3-p194 :044 >   puts "workerID: "+worker.id.to_s
1.9.3-p194 :045?>   worker.tasks.each do |task|
1.9.3-p194 :046 >     puts "taskID: "+task.id.to_s
1.9.3-p194 :047?>   end
1.9.3-p194 :048?> end 
```

控制器：添加 `@workers = Worker.all`

看法：

```
<table>
   <% @workers.each do |worker| %>
      <tr>
        <td>Worker:</td>
        <td><%= worker.id %></td>
        <td><%= worker.name %></td>
        <td></td>
      </tr>
     <% worker.tasks.all
       <tr>
          <td><%= task.id %></td>
          <td><%= task.name %></td>
          <td><%= task.task %></td>
          <td><%= task.done %></td>
      </tr>
    <% end %>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T14:31:01.120

如果你想在每个任务中显示 id，你有很多方法， - 你可以在迭代时将 count 变量打印出来，然后循环 - 第二个是你可以使用 ruby​​ 方法 each_with_index 如下；

```
<center>Task of <%= @worker_name %></center><br>
<table>
   <% @task.each_with_index do |task, i| %>
      <tr>
        <td><%= i %></td>
        <td><%= task.name %></td>
        <td><%= task.task %></td>
        <td><%= task.done %></td>
      </tr>
    <% end %>
</table> 
```

我希望它能回答你的问题

# java - 在 Linux 上运行 javafx 和 swing jar

> ID：14021720
> 
> 赞同：1
> 
> 时间：2012-12-24T12:56:34.350
> 
> 标签：java, linux, javafx

我想知道 linux 是否支持带有 javafx 的 java swing 或不支持。如果是，那么我如何运行从 windows jdk 创建的 jar 文件。
我可以像windows一样在linux上运行设置吗？我应该在 linux java 编译器中编译 java 文件吗？当我试图编译它们时，它给出了很多错误。

# javascript - 在 Javascript 中从 Datatables.Net 获取 ID 列表

> ID：14021727
> 
> 赞同：0
> 
> 时间：2012-12-24T12:57:43.900
> 
> 标签：javascript, jquery, json, asp.net-mvc-3, datatables

我有一个 ASP.NET MVC 3 网站 - 在特定页面上，我使用了 datatables.net 插件作为表格。我在我的标记中包含了表格左侧的复选框，单击该复选框将突出显示该行。用户可以选择多行。当用户单击按钮时，我想将单击的所有行的 ID 传递回我的控制器，然后在数据库中做一些工作。

我想以 JSON 格式传回 id，以便轻松反序列化控制器中的数据。

到目前为止，这也是我所拥有的。

```
$('#UseCars').click(function (event) {

    var cars = new Array();

    carsTable.find("tr input:checkbox").each(function () {

        var car = new Object();
        //alert($(this).attr("CarID"));
        car.ID = $(this).attr("CarID");
        //alert(car.ID);

        cars.push(car);

    });

    var jsonstring = $.toJSON(cars);

    $('#CarsList').val(jsonstring);

}); 
```

所以在我的cshtml上，我有一个隐藏的 CarsList ，它是我模型上的一个字符串。当我在 UseCars 按钮调用的控制器中的方法上设置断点时，我可以看到 model.CarsList 的值是一个 jstrong 字符串，但它正在查找表中的所有复选框而不是特定的复选框，并且它没有拉行的 id 值也可以。

谁能看到我在这里缺少的东西？

**编辑包括 CSHTML 标记**

所以这是我在我的页面上的表格标记。

```
 <table id="carsTable" style="margin-left: 2px; width: 200px">
                            <thead>
                                <tr>
                                    <th class="ui-widget-header">
                                        <input id="SelectAll" type="checkbox" />
                                    </th>
                                    <th class="ui-widget-header table-header">
                                    </th>
                                    <th class="ui-widget-header table-header">
                                        Age of Car (Years)
                                    </th>
                                    <th class="ui-widget-header table-header">
                                        Car Name
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.CarList)
                                {
                                    <tr>
                                        <td class="table-data">
                                            <input id="SelectIndividual" name="Select" type="checkbox" />
                                        </td>
                                        <td id="InvoiceId">
                                            @Html.DisplayFor(modelItem => item.CarID)
                                        </td>
                                        <td class="table-data">
                                            @Html.DisplayFor(modelItem => item.CarAge)
                                        </td>
                                        <td class="table-data">
                                            @Html.DisplayFor(modelItem => item.CarName)
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table> 
```

然后在我为 DataTable 表配置页面的 js 文件中，将 ID 列设置为 bvisible: false 所以它实际上并没有显示给用户。我更改了 Daniel 提到的 id 选择，所以它现在看起来像 - car.ID = $(this).next("CarId");

在控制器的断点中，我可以看到现在返回了信息，但并不完全符合我的预期 - 即我希望我的字符串类似于 [{123}, {124}] 但我得到的输出如下：

```
"[{\"ID\":{\"length\":0,\"prevObject\":{\"0\":{\"jQuery183036556275907670765\":227},\"context\":{\"jQuery183036556275907670765\":227},\"length\":1},\"context\":{\"jQuery183036556275907670765\":227},\"selector\":\".next(CarId)\"}}]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:13:40.153

尝试使用以下选择器`$("td input:checked")`

```
$("td input:checked").each(function (index, para) {
    var car = new Object();
    //alert($(this).attr("CarID"));
    car.ID = $(this).attr("CarID");
    //alert(car.ID);

    cars.push(car);
}); 
```

更好的是也使用表ID，比如`$("#myTableId td input:checked").each...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:14:48.333

代替

```
carsTable.find("tr input:checkbox").each(function () { 
```

和

```
carsTable.find("tr input:checked").each(function () { 
```

jquery/js 调试器不可靠使用 console.log() 代替

# iphone - 如何知道 ui TableView 中滚动的（顶部隐藏单元格/行数）单元格计数

> ID：14021728
> 
> 赞同：0
> 
> 时间：2012-12-24T12:57:58.987
> 
> 标签：iphone, objective-c, sqlite, uitableview

在我的应用程序**中，我需要在表格视图中显示 1000 多个联系人。**

**滚动表格视图非常困难，应用程序变慢**

所以为此*我只想在表格视图中显示一些有限的（10）行*

为此我想使用

**`SELECT * FROM ContactTitles order by CT_Title desc LIMIT 10 OFFSET HiddenCellsCount;`**

```
 SELECT * FROM  ContactTitles order by CT_Title desc  LIMIT 10 OFFSET 0;
 SELECT * FROM  ContactTitles order by CT_Title desc  LIMIT 10 OFFSET 1;
 SELECT * FROM  ContactTitles order by CT_Title desc  LIMIT 10 OFFSET 2;
 SELECT * FROM  ContactTitles order by CT_Title desc  LIMIT 10 OFFSET 990; 
```

这里每次偏移量都需要根据顶部隐藏/滚动的单元格计数进行更改

```
how to get the count of scrolled rows count in a table view.?. 
```

是否有任何替代方法可以减少我的应用程序的减速

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:04:03.463

您可以使用

```
tableView.visibleCells.count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:05:33.653

您可以先只加载几个单元格，然后在用户向下滚动时获取更多单元格。为此，您可以使用：

```
 - (void)scrollViewDidScroll:(UIScrollView *)scrollView {

        NSInteger currentOffset = scrollView.contentOffset.y;
        NSInteger maximumOffset = scrollView.contentSize.height + scrollView.frame.size.height;

        if (maximumOffset-currentOffset==maximumOffset)// is at the last row
        {
// your code here
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:09:07.160

与其用 SQLITE 做这个，不如用 Core Data 和 setBatchSize 20 或其他东西做这个，它不会减慢你的应用程序的速度。

# javascript - 丰富的文本输入框 - 溢出问题

> ID：14021731
> 
> 赞同：3
> 
> 时间：2012-12-24T12:58:19.173
> 
> 标签：javascript, jquery, css, syntax-highlighting

我创建了一个富文本输入框，其目的是突出显示匹配或不匹配的括号等。基本上简单的突出显示`()`'s。这一切都非常适合我正在做的事情，到目前为止我遇到的唯一问题是当您溢出输入时，底层的 html 元素保持不变，这会使事情变得混乱。

现场示例：http: [//jsfiddle.net/Axvgf/](http://jsfiddle.net/Axvgf/)

只需在输入中输入一堆字母，您就会发现问题。

任何帮助，将不胜感激！

提前致谢。

编辑：如果我的方法不起作用或缺陷太大，我接受不同的建议和/或解决方案。

Edit2：我尝试了一种新方法，`contenteditable`但每次都会遇到插入符号位置的一堆问题。这是我的尝试：http: [//jsfiddle.net/Axvgf/25/](http://jsfiddle.net/Axvgf/25/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:49:14.977

我不确定这是否能满足您的需求，但我会看看这个问题的解决方案中引用的项目，[该问题](https://stackoverflow.com/questions/1619167/textarea-that-can-do-syntax-highlighting-on-the-fly)关于 textarea 中的语法突出显示。其中许多是开源的，看看其他人如何成功解决这个问题可能会给你的项目一些想法。

# android - OpenGLRenderer中的onTouchEvent？

> ID：14021734
> 
> 赞同：0
> 
> 时间：2012-12-24T12:58:35.580
> 
> 标签：android, opengl-es

我创建了一个 OpenGL 渲染器

```
public class OpenGLRenderer implements Renderer { 
```

现在我想从 onTouchEvent 中获取数据。不幸的是，它不起作用：

```
public boolean onTouchEvent(MotionEvent event){
    //eyeX += 0.2f;
    //eyeY = 0.2f;
    eyeZ -= 0.2f;
    Log.v("OpenGLRenderer", "TouchEvent works");
    return true;
} 
```

当我将班级更改为：

```
public class OpenGLRenderer extends GLSurfaceView implements Renderer { 
```

和我的 onTouchEvent 函数：

```
@Override
public boolean onTouchEvent(MotionEvent event){
    //eyeX += 0.2f;
    //eyeY = 0.2f;
    eyeZ -= 0.2f;
    Log.v("OpenGLRenderer", "TouchEvent works");
    return true;
} 
```

还是不行：/怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:09:52.543

来自 GLSurfaceView[文档](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)：“在处理事件时，您可能需要与在渲染线程中运行的 Renderer 对象进行通信。”

用于`queueEvent(Runnable)`将事件传递给渲染线程：

```
@override
public boolean onTouchEvent(MotionEvent event){
queueEvent(new Runnable() {
                 // This method will be called on the rendering
                 // thread:
                 public void run() {
                     eyeZ -= 0.2f;
    Log.v("OpenGLRenderer", "TouchEvent works");
                 }});
return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T10:18:57.283

这是针对 MyGLSurfaceview 类的。当您触摸屏幕时，您将获得该位置 x,y 位置范围。

```
@Override
public boolean onTouchEvent(MotionEvent ev) {

    // Normal touch
    xPosition = ev.getX();
    yPosition = ev.getY();

    switch (ev.getAction()) {

        case MotionEvent.ACTION_DOWN:{
            dx = ev.getX();
            dy = ev.getY();
        }

        return ;
    }
} 
```

# git - 将 Magento 模块提取到单独的存储库中

> ID：14021735
> 
> 赞同：2
> 
> 时间：2012-12-24T12:58:37.960
> 
> 标签：git, magento

我们有一个 git 存储库，该存储库当前拥有一个工作的 Magento 站点。该存储库包含所有核心 Magento 文件以及一些自定义和社区模块。我想做的是获取一些自定义模块并将它们移到自己的存储库中。

不幸的是，熟悉 Magento 目录结构的人都知道，Magento 中的模块并不是完全自包含在单个目录中，而是文件分布在多个目录中，例如`app/code/local/{namespace}/{module}/`，`app/design/frontend/base/{namespace}_{module}/`等等。我想要实现的是存储库，仅包含一个模块的所有文件，与它们当前具有的目录结构相同。在这一点上，我将能够创建只需解压缩到 Magento 站点目录的可分发存档（尽管我可能会在我自己的项目中使用 modman，以保持分离）。

我可以想到两种简单的方法：

1.  克隆存储库，删除与相关模块无关的所有文件，并将源远程更改为新的空白存储库。
2.  在空白文件夹中初始化一个新存储库，并将文件复制/粘贴到正确的目录层次结构中。提交他们。

这两种方法的缺点是我会丢失文件上的所有提交历史记录，这将是一种耻辱。我对如何保留这一点进行了一些研究，进行子树拆分似乎很有希望，但事实证明文件并不都在同一个目录中，这超出了我的能力范围。有没有人有做这种事情的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:33:58.927

我找到了你想要的（希望如此）： [https ://help.github.com/articles/splitting-a-subpath-out-into-a-new-repo](https://help.github.com/articles/splitting-a-subpath-out-into-a-new-repo)

旧答案：看看：[https](https://github.com/colinmollenhour/modman) ://github.com/colinmollenhour/modman我更喜欢它。

但是我还没有尝试过第二件事： [https ://github.com/jreinke/modgit](https://github.com/jreinke/modgit)

# php - 如何使用php将文本解析为超链接

> ID：14021737
> 
> 赞同：0
> 
> 时间：2012-12-24T12:59:02.127
> 
> 标签：php, string, parsing, url

我在 php 脚本中使用 mysqli 查询从 mysql 数据库表中提取数据并将其显示在网站上。

一些数据包括链接，但它们以特定格式格式化。链接格式为`#Link Name#http://www.link.com`

所以首先`#`设置名称，第二个`#`设置超链接。

我需要我的 php 脚本来解析它并在网站上显示为正常的超链接。

这是php脚本：

```
<?php
include('mysql_connection.php');

$c = mysqlConnect();

$locale = $_GET['locale'];
$last_news_id = $_GET['news_id'];

sendQuery ("set character_set_results='utf8'"); 
sendQuery ("set collation_connection='utf8_general_ci'"); 

if (strcmp($locale,"en") != 0)
    $locale = "en";

$result = sendQuery("SELECT * FROM news WHERE id > ".$last_news_id." and locale = '" . $locale . "' ORDER BY id DESC LIMIT 10");

echo '<table width=\"100%\">';
while($row = mysqli_fetch_array($result, MYSQL_NUM))
{
    echo '<tr><td width=\"100%\"><b>Date: </b>'.$row[2].'</td></tr>';
    echo '<tr><td width=\"100%\">'.nl2br($row[3]).'</td></tr>';
    echo '<tr><td width=\"100%\"><hr style="height: 2px; border: none; background: #515151;"></td></tr>';
}
echo '</table>';

mysqliClose($c);
?> 
```

编辑：我添加了这一行，它有助于解决一个问题：

```
echo '<tr><td width=\"100%\">'.preg_replace('/#([^#]*)#.*/', '<a href="$2" target="_blank">$1</a>', $row[3]).'</td></tr>'; 
```

它仍然打开现有页面而不是超链接。我猜 $2 应该是超链接，第二个 # 之后的值。但是，我不完全确定如何将其编码到 php.ini 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:07:43.723

我假设 $row[3] 是数据包括链接，通过使用正则表达式，

```
preg_replace('/#([^#]*)#(.*)/', '<a href="$2">$1</a>', $row[3]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:12:41.643

正则表达式会更好 - 但你可以这样做：

假设您的链接是“ `$row[3]`”，并且它只包含一种格式为“#Link Name#http://www.link.com”的信息，除此之外，正则表达式就是要走的路。

```
$temp_data = explode("#",$row[3]);
$linkname = $temp_data[1];
$url = $temp_data[2];

echo "<a href='".$url."'>".$linkname."</a>"; 
```

# spring - 春季 Facebook 模板

> ID：14021738
> 
> 赞同：1
> 
> 时间：2012-12-24T12:59:07.303
> 
> 标签：spring, facebook, authentication, spring-social

我正在尝试开发一个 Android 应用程序。它需要使用 Facebook 身份验证。我使用 Spring 作为后端。有一个名为 Spring Social 的不错的 Spring 扩展，但我无法以我想要的方式使用它。

我在 Android 设备中进行身份验证并将其发送到我的后端。然后在控制器中执行此操作：

```
Facebook facebook = new FacebookTemplate(authToken);
String facebookId = facebook.userOperations().getUserProfile().getId(); 
```

我收到错误消息：

> org.springframework.social.MissingAuthorizationException: 操作需要授权，但是API绑定是未经授权创建的。

我认为 Spring 正在执行此 GET 调用：

[https://graph.facebook.com/me](https://graph.facebook.com/me)

当它应该做类似的事情时：

[https://graph.facebook.com/me?access_token=ACCESS_TOKEN](https://graph.facebook.com/me?access_token=ACCESS_TOKEN)

我已经用一个有效的令牌试过了，什么也没有。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:44:06.847

如果有人遇到同样的错误，请检查 Maven 中的依赖项，我错了

# java - 如何从扩展同一类的多个类中调用函数

> ID：14021740
> 
> 赞同：0
> 
> 时间：2012-12-24T12:59:24.080
> 
> 标签：java, oop

我在结构上遇到了一些问题。

我有几个扩展实体类的类对象，其中一些类覆盖了实体类中的函数 A()，需要一定的输入（例如 A(int input)）。

有什么方法可以同时调用所有对象的函数 A() （意思是，每个类都没有单独的列表）？

我现在使用 arrayList(entities) 来存储所有对象并将它们类型转换到 for 循环中。这看起来相当混乱，我很确定我误解了 OOP 的一些基本原则。

```
 for (int i=0;i<entities.size();i++) {           
        Entity entityPre = (Entity) entities.get(i);

        if (entityPre instanceof subClass) { 
            subClass entity= (subClass) entityPre;
            entity.A(int Input);
        }else{
            entityPre.A();
        }
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:07:22.437

`A()`当您更改方法参数因此更改方法签名时，您并没有真正覆盖。

因此，您不能使用“常规”覆盖机制，并且您会被当前的实现所困。

如果您将方法参数添加到您的基类（即使它没有使用它），您可以正确地覆盖该方法并简化您的循环内容。但就个人而言，我只会执行此修改，因为附加参数*对*基类有意义！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:19:52.590

我实际上并没有得到你想要的，在上面的描述中什么是“A”它是一个函数或类，如果它是一个函数那么你怎么能这样写'if（entityPre instanceof A）{A entity =（A）实体前; entity.doLogic(int Input); }' 首先你必须阅读“instanceOf”方法，JB 的答案会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:05:22.370

如果`A(int)`是基实体类的方法，在子类中被覆盖，那么您不需要任何类型转换。这就是多态性的全部意义：

```
for (Entity entity : entities) {           
    entity.A(input);
} 
```

旁注：您应该为您的方法和变量选择更好的名称，并尊重 Java 命名约定：方法以小写字母开头，而类以大写字母开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:05:40.737

你现在做的是正确的。

> 有什么办法可以同时调用所有对象的函数 A()

不，一个方法只能使用**一个**对象来调用，除非它被声明为`static.`

# python - Django Select Option 选择的问题

> ID：14021741
> 
> 赞同：6
> 
> 时间：2012-12-24T12:59:37.503
> 
> 标签：python, html, django

我尝试在 stackoverflow 上按照选择列表中选择的选项的一些示例进行操作，但仍然无法正常工作。

这是我的代码片段

```
<select name="topic_id" style="width:90%">
    {% for t in topics %}
        <option value="{{t.id}}" {% if t.id == topic_id %} selected="selected" {% endif %}>{{t.title}}{{t.id}}</option>
    {% endfor %}
</select> 
```

我从 views.py 中的 param['topic_id'] 中获取了 topic_id。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T13:10:50.313

而不是`selected="selected"`仅仅使用`selected`.

```
<option value="{{t.id}}"{% if t.id == topic_id %} selected{% endif %}>{{t.title}}{{t.id}}</option> 
```

如果它不起作用，可能有两个原因：

*   在主题中没有这样的主题`id`等于`topic_id`
*   `t.id`并且`topic_id`可能是不同的类型。转换`topic_id`为`int`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-05T16:19:07.313

这对我有用

```
<select class="form-control" id="exampleSelect2" name="nivel">
                {% for key, value in types %}
                    <option value="{{ key }}" {% if institution.nivel == key %} selected {% endif %}>{{ value }}</option>
                {% endfor %}
</select> 
```

# c++ - *& 如何在 C++ 中被解析为函数参数？

> ID：14021749
> 
> 赞同：1
> 
> 时间：2012-12-24T13:00:06.427
> 
> 标签：c++, pointers, parameters, reference

我试图了解将引用传递给指针的不同方式。一种实现涉及传递指针引用，另一种实现涉及传递指针。

我试图了解`*&`后者是如何在 C++ 中解析 " " 的。

假设我想更改指针 P 指向的内容。我可以传递指针或指针的引用。如果我传递对指针的引用，我的实现将是这样的

```
void changePointer(int ** pp){

    //stuff that changes P from main();

}

//...

int main(){

    int a = 7;
    int * P = &a;
    changePointer(&P);
    return 0;

} 
```

上面，changePointer 中的参数被解析为：

```
void changePointer(int ** pp){
//int ** pp = &P; //where P is the integer pointer being passed by main
... 
```

但是，如果我想传递指针，而不是它的引用，那么主要我会说：

```
//...
changePointer(P);
//... 
```

在 changePointer 中，我会将参数更改为：

```
void changePointer(int *& pp) 
```

现在我不知道它是如何工作的或如何阅读它。这是否被解析为：

整数 * pp = &P?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:03:42.330

这就像任何其他对象一样通过引用传递指针。从右到左阅读语法：*对指针的引用*。这与对简单整数`int *&pp = P`的操作相同。`int &j = i`

```
void f(int *& ptr) {
    // f(pointer) is the same as
       int *& ptr = pointer
} 
```

创建参数的方式与解析它的方式相同；您只是在参数中创建一个变量，该变量将等于您传递给它的参数。引用在函数内部的工作方式与它们在外部的工作方式相同。例如：

```
int main() {

    int a = 7,
        b = 5,
       *P = &a; // *P == 7

    int *&pp = P;

    pp = b; // *P == 5

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:03:22.593

```
int * & pp 
```

发音为“pp 是对指向 int 的指针的引用”。这意味着指针参数是通过引用传递的，这意味着在函数中应用于它的任何更改都将反映在传递的对象中，而不是它的副本中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T13:03:03.060

这个

```
void changePointer(int ** pp) 
```

不通过引用传递指针 - 它通过值传递指向指针的指针。

这个

```
void changePointer(int *& pp) 
```

通过引用传递指针 - 更改函数内部的指针将更改外部的指针本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:04:55.543

它被解析为`(int *) (&) (pp)`.

这`int *`就是它的本质，一个指向整数的指针。表示“`&`引用”，`pp`是变量的名称。

编译器在具有引用参数时所做的是实际传递变量的地址[或类似于地址的东西 - 这是编译器中的实现细节]。所以最终，编译器会做与你的第一个代码片段完全相同的事情`&P`——唯一的区别是你不能成为一个白痴并将 a 传递`NULL`给函数，从而导致系统可能崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T13:03:02.020

`int*&``&`是对指向 的指针 ( `*`)的引用 ( ) `int`。

# facebook - 如何将 Unity 网络播放器游戏上传/集成到 Facebook 应用程序？

> ID：14021761
> 
> 赞同：1
> 
> 时间：2012-12-24T13:00:54.467
> 
> 标签：facebook, unity3d

我已经构建了网络播放器，我想将它上传/与 Facebook 集成，这怎么可能？任何指南或教程都会对我很有帮助，我尝试过以下操作：

[http://forum.unity3d.com/threads/150831-Unity-webplayer-into-Facebook-with-Dropbox](http://forum.unity3d.com/threads/150831-Unity-webplayer-into-Facebook-with-Dropbox)

[http://forum.unity3d.com/threads/7812-Unity3D-meet-Facebook!/page4](http://forum.unity3d.com/threads/7812-Unity3D-meet-Facebook!/page4)

[画布 URL/安全画布 URL 错误消息](https://stackoverflow.com/questions/8034356/canvas-url-secure-canvas-url-error-message)

虽然没有什么对我有用.. :( 它要求我安装统一网络播放器，即使我已经安装了它。

任何指南或教程都会对我很有帮助。任何帮助将不胜感激..！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-29T02:38:04.433

**Facebook-Unity 集成：**

[这里](http://www.paladinstudios.com/2011/11/15/facebook-and-unity-tutorial-part-one/)有一个很棒的教程，概述了如何将 Facebook 集成到 Unity3d 中，例如，如果您想检索一个人的朋友、帖子等，并在 Unity 中使用该数据。在这个特定的示例中，他们通过使用 JavaScript 网页并从 Unity 外部链接到它来执行此操作。

**这种方法更适用于 WebPlayer 类型的分发。**

这是该教程的介绍：

> 开始前的注意事项：这是一个关于在 Unity 项目中实现 Facebook 的 Unity 教程。它是为希望在其网络应用程序中使用 Facebook Connect 的 Unity 开发人员提供的技术操作指南。I 在这个由 3 部分组成的系列中，我们将学习如何将我们的 Unity 应用程序与 Facebook 连接，展示我们朋友的高分以及如何保护我们的应用程序。

然而，*还有另*一种在 Unity 中访问 FaceBook 的方法，那就是在 Unity 中使用 JSON。有关这方面的示例，请参阅[本](http://www.ifc0nfig.com/accessing-facebook-within-unity/)教程。

**这种方法更有可能用于桌面类型的发行版。**

> 如果您正在为网络播放器构建游戏，有很多方法可以访问 Facebook，但如果您的游戏是基于桌面的，则很难，因为您必须以某种方式让用户登录 Facebook 并授权您的应用程序，这在 Unity 中很困难因为它的 WWW 类没有足够的控制权，启动应用程序也没有。我找不到存在的解决方案，所以我想出了一些完美的东西，可能不那么优雅，但它是一个很好的权衡。

至于您关于使用 Unity 创建 Facebook 应用程序的问题，有几种方法。

**Flash Player Facebook 集成：**

第一条路线，如果可以的话，在[这里](https://store.unity3d.com/)的商店为 Unity 购买 400 美元的 Adob​​e Flash 插件。虽然这很昂贵，但将来分发给 Facebook 肯定会更容易，因为 Facebook 更喜欢应用程序在 Adob​​e Flash 中。您可以将现有的网络播放器应用程序转换为 Flash，然后上传到 Facebook。

**网络基础集成：**

这基本上只是将您托管的 Unity3D 网络播放器嵌入到 Facebook 画布中。这种类型的集成是最简单的，因为基本上只是将您的 Unity3D 网络播放器嵌入到 Facebook 页面中，这样人们就可以在那里播放它。为此，您需要将 Unity3D 网络播放器托管并运行在可公开访问的某个地方。步骤超级简单：

1.  前往 Facebook 开发者
2.  设置一个新的应用程序
3.  用您想要的应用名称填写画布页面文本字段
4.  使用您的统一网络播放器的 URL 填写 Canvas URL 文本字段

一旦你这样做了，你就完成了，你的应用程序将已经在 Facebook 中运行。

如果这有帮助，请升级并接受！如果您有任何问题，我很乐意为您提供帮助！

# c - C 乘法或加法浮点结果 NaN

> ID：14021763
> 
> 赞同：1
> 
> 时间：2012-12-24T13:01:14.047
> 
> 标签：c, gcc, floating-point, nan

我在程序中使用 libresample。一段时间后（大约 50 分钟），它在一个工作站的 lib 函数 lrsFilterUD() 中崩溃。

```
float lrsFilterUD(float Imp[],  /* impulse response */
              float ImpD[], /* impulse response deltas */
              UWORD Nwing,  /* len of one wing of filter */
              BOOL Interp,  /* Interpolate coefs using deltas? */
              float *Xp,    /* Current sample */
              double Ph,    /* Phase */
              int Inc,    /* increment (1 for right wing or -1 for left) */
              double dhb)
{
   float a;
   float *Hp, *Hdp, *End;
   float v, t;
   double Ho;

   v = 0.0; /* The output value */
   Ho = Ph*dhb;
   End = &Imp[Nwing];
   if (Inc == 1)        /* If doing right wing...              */
   {                      /* ...drop extra coeff, so when Ph is  */
      End--;            /*    0.5, we don't do too many mult's */
      if (Ph == 0)      /* If the phase is zero...           */
         Ho += dhb;     /* ...then we've already skipped the */
   }                         /*    first sample, so we must also  */
                        /*    skip ahead in Imp[] and ImpD[] */

   if (Interp)
      while ((Hp = &Imp[(int)Ho]) < End) {
         t = *Hp;       /* Get IR sample */
         Hdp = &ImpD[(int)Ho];  /* get interp bits from diff table*/
         a = Ho - floor(Ho);      /* a is logically between 0 and 1 */
         t += (*Hdp)*a; /* t is now interp'd filter coeff */
         t *= *Xp;      /* Mult coeff by input sample */
         v += t;            /* The filter output */
         Ho += dhb;     /* IR step */
         Xp += Inc;     /* Input signal step. NO CHECK ON BOUNDS */
      }
   else 
      while ((Hp = &Imp[(int)Ho]) < End) {
         dprintf("while begin: Hp = %p, *Hp = %a, (int)Ho = %d, Imp[(int)Ho] = %a, &Imp[(int)Ho] = %p", Hp, *Hp, (int)Ho, Imp[(int)Ho], &Imp[(int)Ho]);
         t = *Hp;       /* Get IR sample */
         dprintf("before t = %a, *Xp = %a, Xp = %p", t, *Xp, Xp);
         t *= *Xp;      /* Mult coeff by input sample */
         dprintf("after2 t = %a, v = %a", t, v);
         v += t;            /* The filter output */
         dprintf("v = %a", v);
         Ho += dhb;     /* IR step */
         Xp += Inc;     /* Input signal step. NO CHECK ON BOUNDS */
      }

   return v;
} 
```

我在乘法之前和之后记录了 t、*Xp、Xp 的值：

```
while begin: Hp = 0xaf5daa8, *Hp = -0.009034, (int)Ho = 16384, Imp[(int)Ho] = -0.009034, &Imp[(int)Ho] = 0xaf5daa8
before multiplication t = -0.009034, *Xp = 0.000000, Xp = 0xaebe9b8
after multiplication t = nan 
```

此代码运行多次，崩溃前有相同的 t 和 Xp 值：

```
before multiplication t = -0.009034, *Xp = 0.000000, Xp = 0xaebe9c8
after multiplication t = -0.000000, v = 282.423676 
```

或另一种情况：

```
before addition t = -460.799988, v = 0.000000
after addition v = nan 
```

什么可能导致nan？这是在 Linux 上使用 gcc 4.1.2 编译的。

**更新：**将变量打印为 %a。结果：

```
//t = 0x1.2806bap+2
//Hp = 0xb3bb870
t = *Hp;
//t = nan 
```

**更新 2：**如果代码由 icpc 编译，则不存在此类问题。那么有编译器特定的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T13:20:06.187

显然，-0.009034•0.000000 不应产生 NaN。因此，要么问题中呈现的代码和数据不能准确表示实际计算，要么计算实现存在缺陷。

如果我们假设硬件和基本计算实现没有缺陷，那么需要调查的一些可能性包括：

*   记录`t`和`*Xp`未能记录乘法之前的正确值`t`和乘法之后的正确值或乘法之后的正确值。`*Xp``t`
*   `t`或的值显示`*Xp`不正确。例如，用于显示的格式`*Xp`显示“0.000000”，即使`*Xp`有一些其他值，例如 NaN。
*   `Xp`指向不合适的地方，导致`*Xp`不可靠（例如，被外部操作更改）。
*   显示的代码不准确。例如，它来自已更改的旧源，或者它是新源但正在执行先前编译的代码。

注意：使用浮点对象进行调试时，不应**使用**诸如“%f”之类的格式进行打印，尤其是不要使用位数的默认值。您应该使用“%a”打印，它使用十六进制表示打印浮点值的精确值。您也可以在许多情况下使用“%.99g”，前提是您的 C 实现提供了浮点值到十进制的良好转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T14:35:51.810

**Eric Postpischil**的其他出色答案没有提到第五种可能性：

*   乘法是在 x87 寄存器中执行的，并且由于程序执行中的（可能不相关的）早期操作而发生了浮点堆栈溢出。当处理器处于这种故障状态时，在 x87 寄存器上执行的*所有计算都会产生 NaN 结果。*

造成这种情况的两个最常见原因是调用函数返回的浮点结果在范围内没有原型（使用许多调用约定，这将导致调用者无法将结果从 FP 堆栈中弹出），以及不正确的手- 编写的（可能是内联的）程序集。

故障仅在经过一段时间后才发生的事实为这种可能性提供了一些证据；如果有一个很少使用的代码路径泄漏了浮点堆栈的一个元素，则需要在故障出现之前使用它一定次数，这可能让它直到现在才被注意到。

要诊断或排除这种可能性，您需要查看浮点状态寄存器 (FPSR) 的第 6 位 (SF)。根据您使用的编译器，检查 FPSR 的确切方法可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T13:10:03.570

从[Wiki](http://en.wikipedia.org/wiki/NaN)中，可以返回 NaN 的操作有以下三种：

```
1\. Operations with a NaN as at least one operand.
2\. Indeterminate forms
      The divisions 0/0 and ±∞/±∞
      The multiplications 0×±∞ and ±∞×0
      The additions ∞ + (−∞), (−∞) + ∞ and equivalent subtractions
      The standard has alternative functions for powers:
      The standard pow function and the integer exponent pown function define 0pow(0), 1pow(∞),
      and ∞pow(0) as 1.
      The powr function defines all three indeterminate forms as invalid operations and 
      so returns NaN.
3\. Real operations with complex results, for example:
      The square root of a negative number.
      The logarithm of a negative number
      The inverse sine or cosine of a number that is less than −1 or greater than +1. 
```

现在这应该可以帮助您自己解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:17:55.567

您必须为每个计算打印子结果 - 或使用该`isnan()`功能在常规位置检查，并追踪它的来源。这要么是一些“糟糕”的数学，要么是你一开始就在喂垃圾（未初始化的变量很可能是 NaN 的）

# android - 如何在Android中删除自动启动任务

> ID：14021765
> 
> 赞同：4
> 
> 时间：2012-12-24T13:01:47.863
> 
> 标签：android, android-intent

一旦 Android 启动，我需要避免启动特定任务（我不是在谈论受保护的系统任务）。

一旦我获得了自动启动任务列表，有没有办法从自动启动例程中删除选定的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:31:17.657

> 我需要避免在 android 启动时启动特定任务

如果用户愿意，用户可以卸载具有该“特定任务”的应用程序。

> 一旦我获得了自动启动任务列表，有没有办法通过自动启动例程删除这些选择？

您无法阻止`ACTION_BOOT_COMPLETED`接收器运行。如果用户愿意，用户可以卸载具有该“特定任务”的应用程序。

# php - PHP无限循环阻止访问其他脚本？

> ID：14021766
> 
> 赞同：7
> 
> 时间：2012-12-24T13:01:52.107
> 
> 标签：php, loops, infinite

在 Apache 上的 PHP 中运行无限循环时，其他页面/脚本会挂起（需要永远加载），直到我中断脚本的执行。但是，其他页面仍将在不同的用户会话或浏览器上执行。这可以解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T13:45:35.520

这是一个竞争条件问题。

`session_start()`会话后，附加到会话 ID 的文件会以限制性权限打开（锁定为读取和写入）。如果另一个`session_start()`被调用，它将等待会话文件被解锁，以避免第二个脚本异步修改会话。

看看[这篇文章](http://thwartedefforts.org/2006/11/11/race-conditions-with-ajax-and-php-sessions/)，它比我更能解释发生了什么。

# json - ajax 调用后无法为动态数据应用 jQuery 移动样式

> ID：14021773
> 
> 赞同：0
> 
> 时间：2012-12-24T13:02:33.233
> 
> 标签：json, jquery, jquery-mobile

我有一个带有 data-role="content" 的 div。最初我正​​在解析 JSON 并用内容填充这个 div，一切正常。这个 div 基本上由可折叠集组成。因为它需要更多时间，所以我想移动“content” div 下的整个 html（从 Chrome 浏览器复制）到 HTML 文件并使用 ajax 调用并将其附加到“content” div 。但不幸的是，可折叠集中的可折叠标签没有出现。

```
$(document).ready(function () {
        $.ajax({
            url: '@Url.Content("~/HTMLPage1.htm")',
            dataType: 'html',
            success: function (result) {
                $("#content").html(result);
                $("#content").hide();
                $('#content').trigger("create");
            },
            complete: function() {
             $("#content").listview("refresh");
            }

        }); 
    }); 
```

谁能告诉我为什么会这样。提前致谢。

最好的问候， Sajesh Nambiar

# oracle - 如何在单行结果中选择非空列？

> ID：14021779
> 
> 赞同：1
> 
> 时间：2012-12-24T13:02:59.367
> 
> 标签：oracle

有没有办法在 oracle 中连续选择所有非空值？

假设`table A (id, aa, ab, ac)`有`(1, 12, '', '')(2, '', 3, 4);`

```
select * from A where id = 1; 
```

给出整行。

但我想选择所有不为空的字段。

在这种情况下->

```
where id = 1 should return (1, 12)
and where id = 2 should return (2, 3, 4) 
```

编辑 ：

我为什么要这个？想象一下有一个包含大约一百个字段的表。他们中的大多数几乎每一行都为空。我想要一个只显示非空字段的视图。我知道这不能为一组行完成。那将是不一致的。但是，每当我可以使用它的主键来挑出一行时，这不应该是可能的吗？（无需使用案例/其他构造明确排除空值字段）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T18:49:15.623

恕我直言，这样的结构违反了[*关系数据模型*](http://en.wikipedia.org/wiki/Relational_model)，因为您在同一个投影中要求不同的元组。

因此，常规的 sql 结果集可能不是保存此类数据的最佳方式......
而是使用 XML：

```
select xmlElement
           (
             "Row",
             XMLForest(id, aa, ab, ac)
           )
 from A 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/3f162/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T14:10:46.380

这是假的。同一个查询将根据数据的内部状态返回不同的结果集，而不是查询本身。客户端程序应该如何确定投影中的第二列是否是`A.aa`或`A.ab` 什至`A.ac`？

有多种可能的解决方案，使用动态 SQL、管道函数或引用游标的某种组合。但这实际上取决于调用程序将如何使用结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T13:17:21.540

找出哪些字段没有`null`值的一种方法`UNPIVOT`是数据。 *但是，这会将数据显示为列而不是行*

```
select id, col, value
from
(
  select id, aa value, 'aa' col
  from tablea
  union all
  select id, ab value, 'ab' col
  from tablea
  union all
  select id, ac value, 'ac' col
  from tablea
) src
where id = 2
  and value is not null; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/59d5d/9)

如果您的样本数据是：

```
create table tableA
(
  id number,
  aa number,
  ab number,
  ac number
);

insert into tablea values(1, 12, null, null);
insert into tablea values(2, null, 3, 4); 
```

而你搜索`id = 1`的结果会显示为：

```
| ID | COL | VALUE |
--------------------
|  1 |  aa |    12 | 
```

如果你搜索`id=2`那么结果是：

```
| ID | COL | VALUE |
--------------------
|  2 |  ab |     3 |
|  2 |  ac |     4 | 
```

# twitter-bootstrap - Bootstrap - 改变导航栏的方向

> ID：14021784
> 
> 赞同：19
> 
> 时间：2012-12-24T13:03:16.083
> 
> 标签：twitter-bootstrap, right-to-left, direction

我一直在使用 Twitter 引导程序并尝试将导航栏的文本向右对齐，即 - “品牌”将出现在右侧，而其他所有内容将出现在左侧。（对于从右到左的网站）。

任何想法如何实现？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-26T06:57:31.750

pull-right 和 pull-left 是默认的引导类，可以帮助您实现这一目标，而无需编写自己的 css。例如，

```
 <div class="navbar pull-right"></div> [equivalent to float:right]
    <div class="navbar pull-left"></div>  [equivalent to float:left] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-24T13:12:35.583

应用于`float:right`类为的 div`navbar-inner`

```
<div class="navbar-inner" style="float:right"> 
```

像

```
<div class="navbar">
    <div class="navbar-inner">    
        <div style="float:right">
        <a class="brand" href="#">Title</a>
        <ul class="nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
        </ul>
    </div>
</div> 
```

[**现场演示**](http://jsfiddle.net/9LFV5/10/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T13:19:37.990

在 bootstrap.css 文件中更新这些类

```
.navbar .nav {
    display: block;
    float: right;
    left: 0;
    margin: 0 10px 0 0;
    position: relative;
}

.navbar .brand {
    color: #777777;
    display: block;
    float: right;
    font-size: 20px;
    font-weight: 200;
    margin-left: -20px;
    padding: 10px 20px;
    text-shadow: 0 1px 0 #FFFFFF;
}

.navbar .nav > li {
    float: right;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-09T07:27:24.950

更好的解决方案是更改标签`dir`中的值：`body`

```
<body dir="rtl">
...
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-07T23:48:31.217

只改变...浮动：右浮动：左

```
.navbar-toggle {
  position: relative;
  float: left;
  padding: 9px 10px;
  margin-top: 8px;
  margin-right: 15px;
  margin-bottom: 8px;
  background-color: transparent;
  background-image: none;
  border: 1px solid transparent;
  border-radius: 4px;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-11T14:08:21.673

将 float:right 应用于 ul，类为 .navbar-nav

```
.navbar-nav{float:right;margin:0}.navbar-nav>li{float:right} 
```

# java - 导入 org.apache.commons.net.telnet.TelnetClient；

> ID：14021789
> 
> 赞同：1
> 
> 时间：2012-12-24T13:03:22.873
> 
> 标签：java, apache, jar

我收到错误“无法解析为类型”的语句

`import org.apache.commons.net.telnet.TelnetClient;`

我需要在构建路径中添加哪个 jar 文件以避免此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:04:50.163

该课程来自[Apache Commons Net](http://commons.apache.org/net/) ( `commons-net-<VERSION>.jar`)

我想你应该下载最新版本（3.2）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:05:39.473

这属于 Apache commons-net.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:06:04.230

您需要将 Apache Commons Net API 添加到您的构建路径。[更多信息](http://commons.apache.org/net/api-3.2/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:09:09.153

该类存在于 Apache commons-net.jar 中。[下载](http://www.java2s.com/Code/JarDownload/apache-commons/apache-commons-net.jar.zip) 您需要将其添加到您的类路径中

# sql-server - SQL Server 2008 同时分发数据的最佳方式

> ID：14021792
> 
> 赞同：0
> 
> 时间：2012-12-24T13:03:50.953
> 
> 标签：sql-server, sql-server-2008, triggers

我们有一个中央数据库和两个临时数据库用于其他目的。当某些列更新到两个数据库时，我们只想发送一些数据。最初我们在更新触发器后做了两个，但是当触发器启用时数据输入失败。因此，我们想知道获取所需数据并发送到目标数据库的最佳方式是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:33:20.057

触发器很糟糕 - 不要误会我的意思，我喜欢它们。但是您的问题是您正在越来越多的机器之间创建硬链接。一个失败并且（a）触发器引发错误并且（b）其中一个数据库不同步。这在修补时变得复杂。

您需要做的是摆脱同时要求并使用队列，这样您就可以将数据库解耦。复制也有效。但是当你同时这样做时，你真的会伤害你的正常运行时间。

# c# - 正则表达式.替换匹配

> ID：14021800
> 
> 赞同：0
> 
> 时间：2012-12-24T13:04:48.773
> 
> 标签：c#, regex, json

我在使用 Json 反序列化器时遇到了一些问题。返回的 Json 中的值之一太大并且正在引发异常。我实际上不需要它返回的信息，所以我想忽略它。我认为最好的方法是在 json 字符串中搜索属性，然后将值设置为 null。

这是返回的 Json 示例，它给了我错误。

```
 "attributes": [
                {
                    "defindex": 143,
                    "value": 2111522248,
                    "float_value": 364329070052570260000000000000
                }, 
```

我想`36432907005257026000000000`用空值或 nill 替换“float_value”属性（即），以便在 Json 反序列化期间不会引发异常。

我在用着`Regex.Replace(json, "\"float_value\": \\d+", String.Empty);`

但它似乎没有删除它，并且仍在抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:09:56.357

~~当你说`\\d+`你实际上是在逃避第二个`\`，而不是表示你想要一个`\d`. 试试这个：~~

 ~~```
Regex.Replace(json, "\"float_value\": \d+", String.Empty); 
```~~ 

~~这是您之前所拥有的内容的细分。注意文字`d`：[http ://www.regex101.com/r/wQ6jD5](http://www.regex101.com/r/wQ6jD5)~~

编辑：Nvm，这不适用，因为您使用的是普通字符串而不是逐字字符串。正如 Jj' 指出的那样，我认为问题在于`,`您没有删除上一行的 a 。

# io - 在 FreeBSD 上查找具有大量磁盘 I/O 的进程

> ID：14021810
> 
> 赞同：15
> 
> 时间：2012-12-24T13:05:23.963
> 
> 标签：io, operating-system, freebsd

我想知道如何监控哪个进程占用了我所有的 I/O 带宽。我知道的唯一命令是`gstat`，但它显示累积信息。有什么工具可以用来检查正在运行的进程的 I/O 使用情况吗？系统是 FreeBSD 8.3。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T05:16:49.550

答案是使用`top`then hit`m`来显示每个进程/线程的 IO 百分比。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-10T03:11:32.210

[iotop](http://guichaz.free.fr/iotop/)就是你想要的。大多数 linux 发行版都有一个包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T13:14:57.177

如果要跟踪单个进程，可以使用 ktrace：

```
$ ktrace -ti -p PID 
```

请阅读[ktrace 手册，](http://www.gsp.com/cgi-bin/man.cgi?section=1&topic=ktrace)以便了解如何在使用前禁用 ktrace。就像是：

```
$ ktrace -p PID -f debug.txt  
$ ktrace -C
$ kdump -f debug.txt 
```

kdump，因为输出不是人类可读的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:14:04.597

根据快速研究，对于网络分析：您可以使用`lsof -i`或`sockstat`（http://www.freebsd.org/cgi/man.cgi?query=sockstat&sektion=1）来识别特定进程打开的套接字，然后您可以用于`tcpdump`检查该连接的详细信息 (http://www.thegeekstuff.com/2010/08/tcpdump-command-examples/#more-5676)。您也可以尝试`trafshow`和`iftop`.

对于磁盘 I/O：在我使用的 Linux 上`sar -q`，一定有类似的东西。

# android - android listview没有填充

> ID：14021811
> 
> 赞同：3
> 
> 时间：2012-12-24T13:05:27.163
> 
> 标签：android, listview

我正在做的是从 facebook 获取朋友列表并尝试使用朋友姓名和他的个人资料图片填充列表视图，但没有异常和错误出现在 logcat 列表中的大小为 56 并且数据在数组列表中但不填充 UI 不要不知道为什么请给我建议解决方案，这是我的活动 getFriendList 函数代码：

```
public List<Friend> getFriendList(){

        Request request = Request.newMyFriendsRequest(Session.getActiveSession(), new Request.GraphUserListCallback() {

            @Override
            public void onCompleted(List<GraphUser> users, Response response) {
                // TODO Auto-generated method stub
                for(int i=0; i<users.size();i++)
                {
                GraphUser user =    users.get(i);
                Friend objFriend = new Friend();
                objFriend.setFriendID(user.getId());
                objFriend.setFriendName(user.getName());
                //objFriend.setFriendPic(user.g)
                //objFriend.setFriendPic("http://graph.facebook.com/" + objFriend.getFriendID() + "/picture");
                friendsList.add(objFriend);
                Log.d("Friend's Id", objFriend.getFriendID());
                Log.d("Friend's Name", objFriend.getFriendName());
                //Log.d("Friend's Pic", objFriend.getFriendPic());
                Log.d("Friend's List Count", Integer.toString(friendsList.size()));
                }
            }
        });
        Request.executeBatchAsync(request);
        return friendsList;
} 
```

这是我的 onCreate 函数：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.friends_list);
        list = (ListView)findViewById(R.id.listview_friends);
        friendsList = getFriendList();
        friendAdapter = new FriendAdapter(this, R.layout.activity_friends, friendsList);
        list.setAdapter(friendAdapter);
    } 
```

这是我的自定义适配器代码：

```
public class FriendAdapter extends ArrayAdapter<Friend>
    {
        Context context;
        Friends holder;
        int layoutResourceId;
        List<Friend> friendList;
        Bitmap profilePhoto;

        public FriendAdapter(Context context, int layoutResourceId,List<Friend> friendList)
        {
            super(context, layoutResourceId, friendList);           
            this.context=context;
            this.layoutResourceId=layoutResourceId;
            this.friendList=friendList;
        }

        @Override
        public View getView(int position,View convertView,ViewGroup parent)
        {
            View row=convertView;

            if(row==null)
            {
                LayoutInflater inflater=((Activity)context).getLayoutInflater();
                row=inflater.inflate(layoutResourceId, parent,false);

                holder=new Friends();
                //holder.friendProfilePic=(ImageView)row.findViewById(R.id.ImageViewfriendProfilePic);
                holder.friendName = (TextView)row.findViewById(R.id.textViewFriendsName);

                row.setTag(holder);
            }
            else
            {
                holder=(Friends)row.getTag();
            }
//      
            holder.friendName.setText(friendList.get(position).getFriendName());
            //holder.friendProfilePic.setImageBitmap(profilePhoto);

            return row;
        } 
```

这是我的 xml 布局friends_list.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listview_friends"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

这是activity_friends.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageView
        android:id="@+id/ImageViewfriendProfilePic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:src="@drawable/com_facebook_button_grey_focused" />

    <TextView
        android:id="@+id/textViewFriendsName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="100dip"
        android:layout_marginTop="20dip"
        android:text="TextView" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:21:31.677

不要以这种方式使用列表。

**朋友列表 = 获取朋友列表（）；**

由于请求已发送并且您得到了结果，因此可能需要一些时间，所以像这样声明您的列表对象

```
List<Friends> friendList = new ArrayList<Friends>(); 
```

只需在适配器中将此数组列表作为空传递并将适配器设置为列表

```
friendAdapter = new FriendAdapter(this, R.layout.activity_friends, friendsList);
list.setAdapter(friendAdapter); 
```

现在使用 AsyncTask 类在后台从 web 获取数据，因此 UI 不会停止，它将在后台获取

**更新**

```
AsyncTask FetchFriendList = new AsyncTask<Void,Void,Void>(){
    private List<Friends> list;
    public void doInBackground(Void... param){
         list = getFriendList(); // call here your request
    }

    public void onPostExecution(Void result){
           friendList.addAll(list);
           friendAdapter.notifyDatasetChanged();

    }
}; 
```

在适配器设置后在 onCreate 中调用它

```
FetchFriendList ffl = new FetchFriendList();
ffl.execute(); 
```

**当您在列表中添加/编辑/删除项目时，还有一件事必须调用 notifyDatasetChanged(); 并且不要在 UI 中添加/删除太多，它可能会强制关闭大数据**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T16:03:59.780

只需将您的适配器更改为

```
if(row==null)
{
  LayoutInflater inflater=((Activity)context).getLayoutInflater();
  row=inflater.inflate(layoutResourceId, null);
  holder=new Friends();
  holder.friendName = (TextView)row.findViewById(R.id.textViewFriendsName);
  row.setTag(holder);
} 
```

并覆盖适配器中的getCount（）方法以返回friedns列表的大小..我也遇到过这个..

# xml - 如何在 Ubuntu 中指定默认的 log4j2 配置文件

> ID：14021823
> 
> 赞同：1
> 
> 时间：2012-12-24T13:06:09.807
> 
> 标签：xml, logging, log4j2

我正在使用 log4j2 进行日志记录，但我只收到错误消息，我认为这是默认配置。我创建`log4j2.xml`为：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <appenders>
   <Console name="Console" target="SYSTEM_OUT">
     <PatternLayout pattern=" %msg%n"/>
   </Console>
  </appenders>
   <loggers>
    <logger name="log4jExample" level="trace">
      <appender-ref ref="Console"/>
    </logger>
   <root level="error">
     <appender-ref ref="Console"/>
   </root>
   </loggers>
 </configuration> 
```

并在文件中的`CLASSPATH`变量中提到了它的路径。`~/.bashrc`但它仍然没有选择这个 XML 文件。我是否只需要在运行时提及配置文件。`~/.bashrc`文件内容：

```
 export CLASSPATH=$CLASSPATH:/home/user/Pradi/config/log4j2.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:39:42.300

根据您的应用程序，类路径配置可能会有很大差异。它是 Java SE 应用程序吗？如果您的应用程序打包在一个 jar 文件中，您可以在 META-INF 文件中定义您的类路径。如果它只是您从控制台运行的一个简单类，您可以尝试将此 log4j2.xml 放在包结构的根目录中。

您用于运行此类的文件夹结构是什么？

编辑：通常配置文件放在不同的目录中，但不是完全不同的文件夹结构。通常有一个源文件夹，如 src/main/java 和另一个 src/main/resources。编译后，通常他们将文件放在同一个根文件夹中，例如目标/类。在您的简单测试中，我会将文件放在同一个文件夹中，如果您从 /home/user/Pradi 运行该类，则命令将是“java -classpath /home/user/Pradi log4jExample”。如果你告诉我你是如何编译你的类的，我可以给你更多关于如何组织这些文件的指导。

# javascript - 按类调用CKEditor

> ID：14021825
> 
> 赞同：11
> 
> 时间：2012-12-24T13:06:25.443
> 
> 标签：javascript, jquery, ckeditor

我需要自动调用 CKEditor 的多个实例...实际上我使用该功能：

```
CKEDITOR.replace( 'editor1'); 
```

其中“editor1”是我想要显示我的 CKEditor 的 div 的 id 名称。

我正在使用 jQuery 来自动化这个过程，我需要使用“class”标签而不是 id。

特别是我有这个html：

```
<div class="CKEditor">
    <div class="text">
            mytext
    </div>

    <p style="text-align:center" class="buttons">
        <input type="button" value="edit" class="button_edit">
        <input type="button" value="preview" class="button_preview" style="display:none">
    </p>

    <div class="editor" >
    </div>

</div> 
```

和这个 jQuery 脚本：

```
$(function() 
{
    $('.CKEditor').each(function()
    {
        var __main = $(this);
        var __buttons = __main.children('.buttons');
        var __text = __main.children(".text");
        var editor;

        __buttons.children('.button_edit').click(function()
        { 
            __text.hide();
            if (editor) return;

            editor = CKEDITOR.replace("editor");
            editor.setData(__text.html());

            if(editor)
            { 
                __buttons.children('.button_edit').hide(); 
                __buttons.children('.button_preview').show(); 
            }
        });

        __buttons.children('.button_preview').click(function()
        {
            __text.show();
            __text.html(editor.getData());

            if ( !editor ) return;

            editor.destroy();
            editor = null;
            __buttons.children('.button_edit').show(); 
            __buttons.children('.button_preview').hide(); 
            __main.children("#editor").html("");
        });
    });
}); 
```

是否可以不修改CKEDITOR的来源？

* * *

**编辑**

我找到了解决方案：

1）html变成：

```
<div class="editor" id="edt1"></div> 
```

2）在jQuery中：

```
var __editorName = __main.children('.editor').attr('id'); 
```

我打电话给CKEditor：

```
editor = CKEDITOR.replace(__editorName); 
```

=) =)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-01-19T12:42:23.090

```
<!DOCTYPE HTML>
<html>
	<head>
		<script src="ckeditor.js"></script>
		<script>
			$(document).ready(function() {
				CKEDITOR.replaceClass = 'ckeditor';
			});
		</script>
	</head>
	<body>
		<div>
			<textarea class="ckeditor" cols="80" name="content"></textarea>
		</div>
		<div>
			<textarea class="ckeditor" cols="80"  name="content"></textarea>
		</div>			 
	</body>
</html>
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-14T15:13:46.860

CKEditor 中已经内置了一个类替换器。应用了类的任何文本区域`ckeditor`都将自动应用编辑器**而无需初始化**。

代码在**ckeditor.js**中并使用`CKEDITOR.replaceClass="ckeditor";`

* * *

**按类初始化** *（不需要额外的 JavaScript）*

将类添加`ckeditor`到文本区域

**HTML**

```
<textarea class="ckeditor" rows="4" cols="50"></textarea> 
```

**。网**

```
<asp:TextBox ID="txt" CssClass="ckeditor" runat="server" TextMode="MultiLine" /> 
```

* * *

**自定义类初始化**

如果你想使用你自己的类，你可以简单地在ckeditor.js**之后用你自己的初始化覆盖这个类**

利用：

```
CKEDITOR.replaceClass="MyClass"; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-01-29T02:06:40.153

使用全部替换。

[使用类替换文本区域](https://ckeditor.com/docs/ckeditor4/latest/api/CKEDITOR.html#method-replaceAll)

在页面中：

```
<textarea class="myClassName"></textarea> 
```

在 JS 代码中

```
CKEDITOR.replaceAll( 'myClassName' ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-02T08:35:47.887

现在有可能，请检查： http: [//nightly.ckeditor.com/latest/standard/ckeditor/samples/old/replacebyclass.html](http://nightly.ckeditor.com/latest/standard/ckeditor/samples/old/replacebyclass.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-24T13:13:09.020

我个人使用这样的功能：

```
function loadEditor(id){
    var instance = CKEDITOR.instances[id];
    if(instance){
        CKEDITOR.destroy(instance);
    }
    var editor = CKEDITOR.replace(id);
} 
```

我将它与许多动态配置一起使用，我相信它可以很好地更改以满足您的需求。玩一玩，让我们知道你有什么！

如您所见，无论如何我都在使用 id，但看不到使用类的问题

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-06T05:26:15.167

```
<!DOCTYPE HTML>
<html>
	<head>
		<script src="ckeditor.js"></script>
		<script>
			$(document).ready(function() {
				CKEDITOR.replaceClass = 'ckeditor';
			});
		</script>
	</head>
	<body>
		<div>
			<textarea class="ckeditor" cols="80" name="content"></textarea>
		</div>
		<div>
			<textarea class="ckeditor" cols="80"  name="content"></textarea>
		</div>			 
	</body>
</html>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-01T10:02:07.780

...这有点奇怪，因为**Replace by Class**示例包含以下代码：

```
<textarea class="ckeditor" cols="80" id="editor1" name="editor1" rows="10"> 
```

*它工作得很好*。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-04T13:27:20.497

实例化多个 ckeditor4 实例的最佳方法是使用 ckeditor-jquery 适配器。

那么只有

```
$( 'textarea.ckeditor' ).ckeditor(); 
```

拥有多个 ckeditor 实例就足够了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-22T15:34:51.503

这是一个极简主义示例，它基于[http://nightly.ckeditor.com/latest/standard/ckeditor/samples/old/replacebyclass.html](http://nightly.ckeditor.com/latest/standard/ckeditor/samples/old/replacebyclass.html)`ckeditor`的精简版本，说明了在文本区域上使用该类：

```
<script src="https://cdn.ckeditor.com/4.5.11/standard/ckeditor.js"></script>

<textarea id="something" class="ckeditor">
    &lt;p&gt; Hello world! &lt;/p&gt;
</textarea> 
```

在我的测试中，我发现`<textarea>`标签需要有`ckeditor`类，并且需要有一个`id`or`name`字段。

# excel - 正在为 ArrayList 对象运行排序方法

> ID：14021826
> 
> 赞同：-1
> 
> 时间：2012-12-24T13:06:29.187
> 
> 标签：excel, vbscript, vba

我在下面写了一个代码，我将 ArrayList 对象分配为字典项。但是当我运行 Sort 方法时没有发生任何事情。我在下面做错了什么吗？

```
 Set Dic = CreateObject("Scripting.Dictionary")
    Set ArrListChildDetails = CreateObject("System.Collections.ArrayList")

    For Row=3 to ob1.Range.Rows.Couny

      For I=2 to ob1.Range.Columns.Count

      ArrListChildDetails.Add(ob.Cells(Row,I))  

      Next

      Dic(ob.Cells(Row,1))=ArrListChildDetails

    Next

    For Each D in Dic.Keys

       Dic(d).Sort() 'It is not working whereas Dic items are ArrayList object

    Next 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T14:21:21.230

根据我的评论，如果您真的希望对项目进行排序，那么您有两个级别的排序要做。目前尚不清楚您需要排序什么或在**哪个级别。**

1.  在每个内排序`ArrayList`

尝试：

```
For Row=3 to ob1.Range.Rows.Couny
    Set ArrListChildDetails = CreateObject("System.Collections.ArrayList")

    For I=2 to ob1.Range.Columns.Count     
       ArrListChildDetails.Add(ob.Cells(Row,I))  
    Next

    arrListChildDetails.Sort()
    Dic(ob.Cells(Row,1))=ArrListChildDetails

    '-- didn't use .Clear() so data & old Capacity will get wiped off as well
    Set arrListChildDetails = Nothing 
```

2.要对字典级别进行排序，`dictionary`请使用您自己的 sort() 函数进行排序：

`Dic(d).SortUserBuilt()`

**笔记：**

并且**每个 ARRAYLIST 都不是字典项**，如果是这样，为什么 MSDN 会创建两种不同的对象类型？...[参考](http://msdn.microsoft.com/en-us/library/8k6e334t.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)。还有[数组/列表 vs 字典（为什么我们把它们放在第一位）](https://stackoverflow.com/questions/2695024/array-list-vs-dictionary-why-we-have-them-at-first-place)？

# java - 在java中扩展类并实现接口

> ID：14021827
> 
> 赞同：36
> 
> 时间：2012-12-24T13:06:34.130
> 
> 标签：java, oop, extends, implements

```
interface Bouncable{ } 
interface Colorable extends Bouncable{ } 
class Super implements Colorable{ } 
class Sub extends Super implements Colorable {} // Ok (case -1) 
```

但，

```
class Sub implements Colorable extends Super {} // error (case -2) 
```

为什么**case-2**显示编译错误`{ expected`。为什么 ？？虽然，**case-1**执行没有错误。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-24T13:07:17.100

`extends`应该先去`implements`：

```
class Sub extends Super implements Colorable {} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-30T10:38:53.507

我有一个例子来说明为什么在类声明中extends先于implements，

界面：

```
public interface IParent {
    void getName();
    void getAddress();
    void getMobileNumber();
} 
```

抽象类：

```
public abstract class Parent {
    public abstract void getAge();
    public void getName(){
        System.out.print("the parent name");
    }
} 
```

儿童班：

```
public class Child extends Parent implements IParent {

    @Override
    public void getAddress() {
       System.out.print(" Child class overrides the Parent class getAddress()");
    }

    @Override
    public void getMobileNumber() {
        System.out.print(" Child class overrides the Parent class getMobileNumber()");
    }

    @Override
    public void getAge() {
        //To change body of implemented methods use File | Settings | File Templates.
    }
} 
```

如果您观察到接口和抽象类中都有相同的方法 getName()，那么在抽象类中该方法具有实现。

当您尝试实现时，类必须重写接口的所有抽象方法，然后我们尝试扩展已经具有方法 getName() 实现的抽象类。

当您创建 Child 类的实例并将方法 getName() 称为

```
Child child = new Child();
child.getName(); 
```

孩子调用哪个方法实现会有冲突，因为同一个方法 getName() 会有两个实现。

为了避免这种冲突，他们强制先扩展并稍后实现接口。

因此，如果抽象类具有与接口中相同的方法，并且如果抽象类已经实现了该方法，那么对于子类，则无需重写该方法

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-13T15:43:17.877

java中有一个规则，如果要实现一个接口并扩展一个类，我们必须先扩展一个类，然后再实现一个接口

```
interface A{}
class super{}

class sub extends super implements A {} 
```

当 Java 编译器将类转换为字节码时，它必须首先查找父类。那是因为类的底层实现是指向父类的字节码——它包含相关的方法和字段。然后它添加指向子类函数代码的指针——其中一些是由'implements'关键字强制执行的。

因为父类必须是可编译的，所以如果编译器预先知道该类是什么会更容易。此外，您只能扩展一个类，但可以实现任意数量的接口。如果可以在任意数量的实现指令中混合使用 extends 关键字，则编译时间会增加。编译器希望尽快失败以减少开发时间，因此这种选择是合乎逻辑的。此外，出于同样的原因，它可以帮助您清楚地思考课程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T13:13:27.800

这是因为*JLS*中的规范。当您尝试在 Java 中声明一个类时，元素的顺序是一定的：

*   修饰符，例如`public`,`private`等。
*   类名，首字母按约定大写。
*   类的父类（超类）的名称（如果有），前面带有关键字`extends`。一个类只能扩展（子类）一个父类。
*   由类实现的接口的逗号分隔列表（如果有），前面带有关键字`implements`。一个类可以实现多个接口。
*   类主体，被大括号包围，`{ }`.

参考：

[http://docs.oracle.com/javase/tutorial/java/javaOO/classdecl.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classdecl.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T13:20:18.937

[JLS Syntax Page](http://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html)的类定义语法是

```
NormalClassDeclaration: 
    class Identifier [TypeParameters] [extends Type] [implements TypeList] ClassBody 
```

我认为为了简化语法规则，他们并没有使其可互换。

为了使可互换，您可能需要类似的东西：

```
NormalClassDeclaration: 
    class Identifier [TypeParameters] [ExtendsImplements] ClassBody

ExtendsImplements:
    [extends Type] [implements TypeList] | [implements TypeList] [extends Type] 
```

或者更糟糕的是，您可能需要声明`Extends`并`Implements`使用`OR`.

我想把解析规则弄得乱七八糟并不重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T13:19:27.833

你必须这样做。您只能扩展一个类，但可以通过逗号分别实现多个接口。在实施之前先进行扩展会更便于读者阅读

```
class Sub extends Super implements Colorable 
```

# asp.net-mvc-3 - 如何将 asp.net mvc3 dataannotations 用于对象列表

> ID：14021828
> 
> 赞同：1
> 
> 时间：2012-12-24T13:06:33.207
> 
> 标签：asp.net-mvc-3, razor, data-annotations

这是我的模型

```
public class ContractsViewModel
    {
        public int Id { get; set; }
        public string Code { get; set; }
        public List<ContractProductItemViewModel> Products { get; set; }
        public ContractsViewModel()
        {
            this.Products = new List<ContractProductItemViewModel>();
        }
    }

    public class ContractProductItemViewModel
    {
        public int Id { get; set; }
        [Required]
        public int? ProductId { get; set; }
        [Required]
        public double Price { get; set; }
        [Required]
        public int Quantity { get; set; }
    } 
```

这是合约视图：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <div class="fieldset">
        <div class="editor-label">
            @Html.LabelFor(model => model.Code)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Code)
            @Html.ValidationMessageFor(model => model.Code)
        </div>
        <div class="new-detailitem">
            <div class="new-icon"></div>
            <div>Crear Nuevo</div>
        </div>
        <div>
            <table class="tblindex detail">
                <thead>
                    <td class="quantity">Cantidad</td>
                    <td>Grupo</td>
                    <td>Articulo</td>
                    <td class="price">Precio</td>
                    <td>SubTotal</td>
                    <td></td>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>
} 
```

这是 productDetail 视图

```
@{
    Layout = null;
    if (this.ViewContext.FormContext == null)
    {
        this.ViewContext.FormContext = new FormContext();
    }
}

<tr>
    <td class="quantity">
        @Html.TextBoxFor(model => model.Quantity)
        @Html.ValidationMessageFor(model => model.Quantity)
    </td>
    <td class="category"></td>
    <td class="product">
        <div>
            <span style="float:left"></span>
            @Html.HiddenFor(model => model.ProductId)
            <div class="getitem"></div>
            <div style="clear: both"></div>
        </div>
        @Html.ValidationMessageFor(model => model.ProductId)
    </td>
    <td class="price">
        @Html.EditorFor(model => model.Price)
        @Html.ValidationMessageFor(model => model.Price)
    </td>
    <td>0.00</td>
    <td><div class="removeicon"/></td>
</tr> 
```

我正在使用 jquery ajax 以编程方式添加每个项目详细信息行。

我有一个问题，productdetail 视图中的 html.EditorFor 和 ValidationMessageFor 为每一行生成相同的 id，并且在客户端中，事件的处理方式不正确。

我在这里做错了什么？解决这个问题的最佳方法是什么？

谢谢

# java - 如何使用 Selenium Webdriver 在浏览器中读取 XML 内容？

> ID：14021829
> 
> 赞同：1
> 
> 时间：2012-12-24T13:06:42.873
> 
> 标签：java, selenium, automated-tests, selenium-rc, selenium-webdriver

我有一个链接，点击它会打开一个新的浏览器，里面只有 XML 内容。我需要验证此 XML 中的某些标签。

请让我知道我该怎么做。

尝试了 getBodyText、getHtmlSource 和 getText - 没有任何帮助......！

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T09:11:05.847

尝试获取要验证的标签的 xpath，然后使用 getText。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:56:16.190

您可以使用`getPageSource()`. 然后，您可以使用任何 XML 处理器（不确定哪一个是 Java 中最好的）解析源代码并为处理过的 XML 执行断言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T10:32:05.790

首先下载 xml 并根据需要使用 xml 解析器来解析 xml。

我正在使用**jdom** ( [http://www.jdom.org/](http://www.jdom.org/) ) 来解析我的 xml 文件。

要了解 IE 如何呈现 XML，请浏览：-

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms757841(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757841(v=vs.85).aspx)

如果您需要任何进一步的帮助，请告诉我。

# android - 自定义 Android ActionBar

> ID：14021836
> 
> 赞同：3
> 
> 时间：2012-12-24T13:07:26.493
> 
> 标签：android, styles, android-actionbar

我搜索了很多，无法解决我的问题。我想自定义我的应用的操作栏。

我这样称呼actiong：

```
public boolean onCreateOptionsMenu(Menu menu) {
 super.onCreateOptionsMenu(menu);
 /*
  *  menu.add(int groupId, int itemId, int order, CharSequence title);
  */
 MenuItem menu0 = menu.add(0, 0, 0, "Action Item 0");
 {
  menu0.setIcon(R.drawable.ic_launcher);
  menu0.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
 }
 return true;
} 
```

还有我的 style.xml：

```
<resources>

<style name="AppBaseTheme" parent="android:Theme.Light">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="AppTheme" parent="AppBaseTheme">

</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:textColor">#CCCCCC</item>
</style> 
```

但是 textcolor 保持默认状态（# FFF），已经尝试了所有方法并且不知道我哪里出错了，我感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:14:50.703

试试这个：

```
<style name="AppBaseTheme" parent="android:Theme.Light">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="actionBarStyle">@style/MyActionBar</item>
</style>

<style name="AppTheme" parent="AppBaseTheme">

</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:textColor">#CCCCCC</item>
    <item name="textColor">#CCCCCC</item>
</style> 
```

有时由于您使用的 API，删除**android:**有效

也尝试定义颜色`color.xml`并使用这种方式：

```
 <style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
        <item name="android:textColor">@color/mColor</item>
        <item name="textColor">@color/mColor</item>
 </style> 
```

**编辑：**

```
<style name="MyActionBar"parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:titleTextColor">@style/MyTheme.ActionBar.TitleTextColor</item>
</style>

<style name="MyActionBar.TitleTextColor" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">@color/mColor</item>
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T13:59:01.900

谢谢你们，我按照本教程做了我想要的：http: [//shreymalhotra.me/blog/tutorial/android/android-create-custom-themes-for-your-apps/](http://shreymalhotra.me/blog/tutorial/android/android-create-custom-themes-for-your-apps/)

在 onCreate() 上添加了这个：

```
final ActionBar bar = getActionBar(); 
```

要更改标题颜色，我的 style.xml 如下所示：

```
 <style name="Theme.MyAppTheme" parent="android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/Theme.MyAppTheme.ActionBar</item>
</style>

<style name="Theme.MyAppTheme.ActionBar" parent="android:style/Widget.Holo.ActionBar">
    <item name="android:titleTextStyle">@style/Theme.MyAppTheme.ActionBar.TitleTextStyle</item>
</style>

<style name="Theme.MyAppTheme.ActionBar.TitleTextStyle" parent="android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">#ccc</item>
</style> 
```

Obs：我不确定，但我认为我的第一个样式将适用于 oncreate() 方法中的那一行。

# sql-server - 如何保护 SQL Server Management Studio

> ID：14021840
> 
> 赞同：0
> 
> 时间：2012-12-24T13:07:53.523
> 
> 标签：sql-server, security, authentication, authorization, sql-server-2008r2-express

我在客户端系统上安装了 SQL Server 2008 R2 Express。我们得到的信息是，有些人只是打开了 Management Studio 并更改了数据。

我们如何才能阻止这种情况的发生，我们能否记录他们正在改变的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:08:44.057

> 我们怎样才能阻止这种情况发生

更改 SQL Server 上的登录名。用户只能连接到他们拥有凭据的数据库和服务器。

如果您使用 Windows 登录进行身份验证，您将需要使用其自己的登录名（使用[`runas`](http://technet.microsoft.com/en-us/library/bb490994.aspx)或类似）运行任何需要数据库的应用程序，再次仅授予对应用程序的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T06:02:50.853

我无法理解。`runas` 但我使用了@Martin Smith 的想法并构建了下面的解决方案。

它将用于禁用在任何登录中执行任何活动的所有**非 sa 用户。**我没有在活动目录中测试它。

1.  拒绝写
2.  拒绝阅读
3.  拒绝任何数据库
4.  拒绝 Sql 连接。

    ```
    Create TRIGGER DisableSMSSEntry_trigger
    ON ALL SERVER  WITH EXECUTE AS 'sa'
    FOR LOGON

    AS

        BEGIN
        DECLARE @NtUserName AS NVARCHAR(100)

        IF ( (SELECT DISTINCT RTRIM(LTRIM(nt_user_name)) AS LogedUser  FROM sys.dm_exec_sessions WHERE is_user_process = 1 AND login_name !='sa') >0 )
        BEGIN
        SET @NtUserName= (SELECT DISTINCT RTRIM(LTRIM(nt_domain+'\'+nt_user_name)) AS LogedUser  FROM sys.dm_exec_sessions WHERE is_user_process = 1 AND login_name !='sa')

        DECLARE @membername  AS varchar(100),@rolename AS varchar(100)
        SET @membername=@NtUserName
        set @rolename ='DB_DenyDataWriter'
        EXEC sp_addrolemember @membername,@rolename
        set @rolename = 'DB_DenyDataReader'
        EXEC sp_addrolemember @membername,@rolename

        exec  (' DENY VIEW ANY DATABASE TO '+ @NtUserName )
        exec  ('DENY SQL CONNECT ' + @NtUserName )
        ROLLBACK
        END

    END 
    ```

# android - Android：OAuth 签名请求

> ID：14021848
> 
> 赞同：2
> 
> 时间：2012-12-24T13:08:54.093
> 
> 标签：android, oauth, tumblr

构建简单的 Tumblr 客户端。

已经通过浏览器完成了用户认证，得到了token和tokenSecret。但坚持获取[用户信息](http://www.tumblr.com/docs/en/api/v2#user-methods)。是否有任何方便的方法来构建签名的 oauth 请求？

一些库使用示例将非常有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T01:14:24.260

[使用oauth-](http://code.google.com/p/oauth-signpost/) signpost 库很容易。

# java - OpenGL 转换键输入

> ID：14021849
> 
> 赞同：2
> 
> 时间：2012-12-24T13:08:57.383
> 
> 标签：java, opengl, lwjgl

我决定随机启动一个小型 OpenGL 2D 游戏，但问题是，我的键盘输入不起作用。没有错误或任何东西，但是，我创建的小方块拒绝移动。这是我的播放器类：

```
public class Player {

 public int x = 0;
 public int y = 0;
 static int walkSpeed = 2;

 private InputHandler input;

 public Player() {
    render();
    update();

 }

 public void update(){
    input = new InputHandler();

    if (input.up) y--;
    if (input.down) y++;
    if (input.left) x--;
    if (input.right) x++;
 }

 public void render() {
    glTranslatef(x, y, 0);

    glBegin(GL_QUADS);
    glVertex2i(300, 300);// upper left
    glVertex2i(350, 300);// upper right
    glVertex2i(350, 350);// bottom right
    glVertex2i(300, 350);// bottom left
    glEnd();
 }
} 
```

我的输入处理程序：

```
public class InputHandler implements KeyListener{

private boolean[] keys = new boolean[120];  
public boolean up, down, left, right, exit;

public void update(){
    up = keys[KeyEvent.VK_W];
    down = keys[KeyEvent.VK_S];
    left = keys[KeyEvent.VK_A];
    right = keys[KeyEvent.VK_D];
    exit = keys[KeyEvent.VK_ESCAPE];
}

public void keyPressed(KeyEvent e) {
    keys[e.getKeyCode()] = true;
}

public void keyReleased(KeyEvent e) {
    keys[e.getKeyCode()] = false;
}

public void keyTyped(KeyEvent e) {

}} 
```

我在主类中调用 keylistener，如下所示：

```
public class Main extends Canvas{
long lastFrame;
long fps;
long lastFps;
private InputHandler key;

public Main(){
    try {
        Display.setDisplayMode(new DisplayMode(800, 600));
        Display.setTitle("OpenGL Platformer");
        Display.create();
    }catch (LWJGLException e){
        e.printStackTrace();
    }

    getDelta();

    lastFps = getTime();
    key = new InputHandler();
    addKeyListener(key); 
```

具体来说，这段代码添加了监听器：

```
 addKeyListener(key); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:10:32.130

处理完输入事件后，您必须发出重绘事件，以便实际绘制。

# wordpress - Wordpress 媒体库问题不上传图片

> ID：14021856
> 
> 赞同：1
> 
> 时间：2012-12-24T13:09:25.627
> 
> 标签：wordpress

在媒体库中上传图像后，它会上传，但当我在媒体库中编辑此图像时不显示缩略图，它会引发错误

> 图像数据不存在。请重新上传图片

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T21:59:27.537

我也有这个问题。正在修复它`chmod -r 777`。`uploads`这`-r`将使其递归，更改对内部所有目录的权限。

# c++ - SDL 与 OpenGL 启动

> ID：14021868
> 
> 赞同：1
> 
> 时间：2012-12-24T13:10:35.200
> 
> 标签：c++, opengl, sdl, sfml

如果我想制作性能更好的游戏，我应该将 SDL 与 OpenGL 一起使用吗？或者我必须制作没有 SDL 的纯 OpenGL 代码。

为什么带有 SDL 的 OpenGL 比纯 SDL 或纯 OpenGL 更好？

或者最好的选择是用SDL做窗口管理和输入处理，用OpenGL做绘图？

我发现了关于 OpenGL 的非常好的教程（http://www.opengl-tutorial.org/）

我可以将本教程与 SDL 结合使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:20:41.823

[这个](http://lazyfoo.net/)网站有你正在寻找的答案。巧合的是，它也有 SDL 和 OpenGL 教程。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:24:24.180

> 我的问题是，如果我想制作性能更好的游戏，我应该将 SDL 与 OpenGL 一起使用吗？

没关系，其实。

> 或者我必须制作没有 SDL 的纯 OpenGL 代码。

您必须以某种方式为您的 OpenGL 创建一个窗口。如果你自己做或使用框架对 OpenGL 没有任何影响。很可能新手的窗口管理不会像正确编写的框架那样优雅。

我的建议：使用框架。在性能方面，哪一个并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:22:16.043

请阅读 ：

[http://www.sdltutorials.com/sdl-opengl-tutorial-basics](http://www.sdltutorials.com/sdl-opengl-tutorial-basics) [http://www.libsdl.org/docs/html/guidevideoopengl.html](http://www.libsdl.org/docs/html/guidevideoopengl.html)

对于开发，我推荐任何平台的“CodeLite”，或 Windows 的 Visual Studio

# zend-framework2 - zf2：如何在映射器中获取服务管理器

> ID：14021870
> 
> 赞同：6
> 
> 时间：2012-12-24T13:11:03.423
> 
> 标签：zend-framework2

在 Zend Framework 1 中，我有几个映射器，它们从父 Mapper 类继承了 setDbTable 和 getDbTable。

现在在 ZF2 中，我面临一个问题，即我需要模型中的服务管理器，但我不知道如何获得它：

```
 class Mapper
    {
        protected $tableGateway;
        protected $module = 'application';

        public function setTableGateway($table)
            {
                if (is_string($table)) {
                    $class = $this->module . '\Model\DbTable\\' . ucfirst($table);
                    $sm = $this->getServiceLocator(); <= Fatal error: Call to undefined method Mapper::getServiceLocator()
                    $tableGateway = (class_exists($class)) ? $sm->get($class) : $sm->get(new TableGateway($table));
                } else {
                    $tableGateway = $table;
                }

                if (!$tableGateway instanceof Zend\Db\TableGateway\AbstractTableGateway) {
                    throw new \Exception('Invalid table data gateway provided');
                }
                $this->tableGateway = $tableGateway;
                return $this;
            }

        // more code 
```

该行：

```
$sm = $this->getServiceLocator(); 
```

给出一个致命错误：

```
Call to undefined method Application\Model\Mapper\Doc::getServiceLocator() 
```

如何在我的模型中获取服务管理器？还是我不是按照 ZF2 的方式做事？我知道如何在我的控制器中获取服务管理器并将 tableGateway 传递给映射器，但这对我来说似乎有很多重复的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:33:30.540

首先，我认为您的意思是要从映射器类而不是模型访问服务管理器。我会避免做后者。有关更多详细信息，请参阅我对 Raj 回答的评论。

其次，有很多方法可以解决这个问题。在这个答案中，我将为您提供一种方法的示例，并仅提及另一种方法。

查看[服务管理器的文档](http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.quick-start.html#module-returning-an-array)（向下滚动一点），它声明默认初始值设定项已添加为默认值。此初始化程序检查从服务管理器检索的对象是否实现了`Zend\ServiceManager\ServiceLocatorAwareInterface`. 如果是，则将服务管理器注入到对象中。因此，如果您只是在映射器类中实现接口，这可能会自动发生。您可以使用抽象基类来避免为每个映射器类重写它。也许像下面这样。

基本映射器类：

```
namespace User\Mapper;

use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class AbstractMapper implements ServiceLocatorAwareInterface {
    protected $service_manager;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->service_manager = $serviceLocator;
    }

    public function getServiceLocator()
    {
        return $this->service_manager;
    }
} 
```

映射器类：

```
namespace User\Mapper;

use User\Mapper\AbstractMapper;

class UserMapper extends AbstractMapper {
    public function doSomething() {
        $sm = $this->getServiceLocator();
        $sm->get('something');
    }
} 
```

由于服务管理器是在初始化程序运行时注入的，因此应该从服务管理器中检索映射器。如果您不想/必须将任何东西注入您的映射器类，那么一个可调用的就足够了。它们可以添加到键下`invokables`，该键嵌套在 中的`service_manager`键下`module_name/config/module.config.php`。或者，可以在模块类的`getServiceConfig`方法中配置。但是，您的映射器类现在或将来很可能会有一些依赖项，因此您可能希望使用工厂来代替。这样，您可以让服务管理器将表网关注入映射器类。

```
// Remember to include the appropriate namespaces
return array(
    'factories' => array(
        'User\Mapper\UserMapper' => function($service_manager) {
            $table_gateway = $service_manager->get('User\Model\DbTable\UserGateway');
            return new UserMapper($table_gateway);
        },
    ),
); 
```

以上内容可以添加`getServiceConfig`到模块`Module.php`文件中的方法中 -或者`factories`在. 您仍然需要添加一个创建数据库网关的工厂；以上只是一个例子。`service_manager``module_name/config/module.config.php`

这就是我将如何去做。当然，可以简单地在映射器类中为服务管理器提供一个 getter 和 setter 方法，然后从控制器访问它们（控制器有一个`getServiceLocator`方法）并像这样注入它。不过，我自己不会采用这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T15:56:34.743

**注意：正如 Jurian Sluiman 和 andy124 在他们的评论中指出的那样，永远不要在特定领域的模型/对象中注入服务管理器并依赖服务管理器，这不是一个好的做法，因为这会使特定领域的对象变得僵化并影响可移植性。下面的解决方案更具体到所问的问题**

我按照以下步骤在我的班级、模型等中获取服务定位器（服务管理器）
~~1.创建实现ServiceMangerAwareInterface的类~~
2\. 像这样在 Module.php 中定义 serviceconfig 中的条目

```
    公共函数 getServiceConfig(){
    返回数组（
        '工厂' => 数组（
                    /* 楷模 */
            'MyModule\MyModel' => 函数（$sm）{
                返回新模型\MyModel($sm);
            },
                    /* 实体 */
            'MyModule\MyEntity1' => 函数（$sm）{
                返回新实体\MyEntity1($sm);
            },
            'MyModule\MyEntity2' => 函数（$sm）{
                返回新实体\MyEntity2($sm);
            },
        .
        .
        .
        ),
    );
`
```

1.  使用如下服务管理器访问您的模型或类（例如在控制器下）

    ```
    $model = $this->getServiceLocator()->get('MyModule\MyModel');

    ```

~~您还可以在 module.config.php 中进行服务管理器配置

```
    'service_manager' => 数组（
        '工厂' => 数组（
             'MyModel' => 'MyModule\Models\MyModel',
             'MyEntity' => 'MyModule\Entity\MyEntity',
         ),
    ),

```

4\. 使用如下服务管理器访问您的模型或类（例如在控制器下）

```
    $model = $this->getServiceLocator()->get('MyModel');

```~~

# php - 在PHP中将图像分为三种尺寸

> ID：14021871
> 
> 赞同：4
> 
> 时间：2012-12-24T13:11:04.287
> 
> 标签：php, image, storage

我实际上是在尝试将图像制作成三种尺寸，然后将它们以不同的名称存储在服务器文件夹中。我通过移动客户端以[Base64编码格式获取此图像数据。](http://en.wikipedia.org/wiki/Base64)这是我试图将图像转换为三个图像的代码。

这是我接收数据的 PHP 文件。

```
$uploadPath  = 'C:/xampp/htdocs/OSFiles/of-images/images/';

if(!is_dir($uploadPath))
    mkdir($uploadPath,true) or trigger_error("Can't Create Folder");

$file   = tempnam($uploadPath, 'image');
$fp     = fopen($file, 'wb');
fwrite($fp, $binary);   //$binary is--> I am reading the image in binary as I am getting the photo data in base64 encoded format through mobile client side. So I decoded it to binary.

fclose($fp);

$result1 = mysql_query("INSERT INTO oc_t_item_resource(fk_i_item_id, s_name,s_extension,s_content_type, s_path)
        VALUES('$lastid','$s_name','$extension','$s_content_type','$imagepath')");

$imagelastid = mysql_insert_id();

// Create normal size
$normal_path = $path = $uploadPath . $imagelastid . '.jpg' ;
$size = explode('x', '640x480') ;

ImageResizer::fromFile($file)->resizeTo($size[0], $size[1])->saveToFile($path) ;

// Create preview
$path = $uploadPath . $imagelastid . '_preview.jpg' ;
$size = explode('x', '480x340') ;
ImageResizer::fromFile($file)->resizeTo($size[0], $size[1])->saveToFile($path) ;

// Create thumbnail
$path = $uploadPath . $imagelastid . '_thumbnail.jpg' ;
$size = explode('x', '240x200') ;
ImageResizer::fromFile($file)->resizeTo($size[0], $size[1])->saveToFile($path) ; 
```

这是我在 ImageResizer.php 文件中的**ImageResizer类。**

```
<?php
    class ImageResizer {

        public static function fromFile($imagePath) {
            return new ImageResizer($imagePath);
        }

        private $im;

        private function __construct($imagePath) {
            if(!file_exists($imagePath)) throw new Exception("$imagePath does not exist!");
            if(!is_readable($imagePath)) throw new Exception("$imagePath is not readable!");
            if(filesize($imagePath)==0) throw new Exception("$imagePath is corrupt or broken!");

            if(osc_use_imagick()) {
                $this->im = new Imagick($imagePath);
            } else {
                $content = file_get_contents($imagePath);
                $this->im = imagecreatefromstring($content);
            }

            return $this;
        }

        public function __destruct() {
            if(osc_use_imagick()) {
                $this->im->destroy();
            } else {
                imagedestroy($this->im);
            }
        }

        public function resizeTo($width, $height) {
            if(osc_use_imagick()) {
                $bg = new Imagick();
                $bg->newImage($width, $height, 'white');

                $this->im->thumbnailImage($width, $height, true);
                $geometry = $this->im->getImageGeometry();

                $x = ( $width - $geometry['width'] ) / 2;
                $y = ( $height - $geometry['height'] ) / 2;

                $bg->compositeImage( $this->im, imagick::COMPOSITE_OVER, $x, $y );
                $this->im = $bg;
            } else {
                $w = imagesx($this->im);
                $h = imagesy($this->im);

                if(($w/$h)>=($width/$height)) {
                    //$newW = $width;
                    $newW = ($w > $width)? $width : $w;
                    $newH = $h * ($newW / $w);
                } else {
                    //$newH = $height;
                    $newH = ($h > $height)? $height : $h;
                    $newW = $w * ($newH / $h);
                }

                $newIm = imagecreatetruecolor($width,$height);//$newW, $newH);
                imagealphablending($newIm, false);
                $colorTransparent = imagecolorallocatealpha($newIm, 255, 255, 255, 127);
                imagefill($newIm, 0, 0, $colorTransparent);
                imagesavealpha($newIm, true);
                imagecopyresampled($newIm, $this->im, (($width-$newW)/2), (($height-$newH)/2), 0, 0, $newW, $newH, $w, $h);
                imagedestroy($this->im);

                $this->im = $newIm;
            }
            return $this;
        }

        public function saveToFile($imagePath) {
            if(file_exists($imagePath) && !is_writable($imagePath)) throw new Exception("$imagePath is not writable!");
            if(osc_use_imagick()) {
                $this->im->setImageFileName($imagePath);
                $this->im->writeImage($imagePath);
            } else {
                imagejpeg($this->im, $imagePath);
            }
        }

        public function show() {
            header('Content-Disposition: Attachment;filename=image.jpg');
            header('Content-type: image/jpg');
            if(osc_use_imagick()) {
            } else {
                imagepng($this->im);
            }
        }
    }
?> 
```

图像根本没有存储在图像文件夹中。我哪里错了？

带有更正的代码片段将不胜感激。

（我是[PHP](http://en.wikipedia.org/wiki/PHP)新手，所以请温柔。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:04:01.387

我建议`error_reporting( -1 )`在搜索错误时使用。然后，您只需按照消息并修复所有错误。

您跳过了[mkdir](http://php.net/manual/en/function.mkdir.php)的一个参数。$mode 在 Windows 上被忽略，但无论如何都应该传递它以获取 $recursive 参数：`mkdir( $uploadPath, 0777, true )`。

此外，您应该在`osc_use_imagick`某处包含一个功能。我没有它，所以我不得不将条件从 更改`if( osc_use_imagick() )`为`if( function_exists( 'osc_use_imagick' ) && osc_use_imagick() )`。

顺便说一句，您忘记在所有调整大小后删除您的临时文件。添加`unlink( $file )`到脚本的末尾。

# c# - “Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。”

> ID：14021874
> 
> 赞同：0
> 
> 时间：2012-12-24T13:11:15.793
> 
> 标签：c#, asp.net

我在 GridView 中有 5 个下拉列表。我将网格与 ObjectDataSource 绑定，并将属于 GridView 的 DropDownLists 与 5 个 ObjectDataSource 绑定。每件事都运行良好。我在 C# 中捕获了第一个 DropDownList SelectedIndexChanged 事件，我想绑定第二个 DropDownList。这是我用来绑定第二个下拉列表的代码：

```
protected void Level1DropdownList_SelectedIndexChanged(object sender, EventArgs e)
        {
            DropDownList level1List = sender as DropDownList;
            if (level1List != null)
            {
                if (level1List.SelectedValue != "0")
                {
                    // Bind Level 2 List
                    GridViewRow currentRow = AnnouncementLevelsGrid.Rows[AnnouncementLevelsGrid.EditIndex];
                    if (currentRow != null)
                    {
                        DropDownList level2List = currentRow.FindControl("Level2DropdownList") as DropDownList;
                        if (level2List != null)
                        {
                            level2List.DataSource = AnnouncementHelper.GetLevel2(level1List.SelectedValue, EmployerHelper.EmployerID);
                            level2List.DataTextField = "Level2";
                            level2List.DataValueField = "Level2Value";
                            level2List.DataBind();
                        }
                    }
                }
            }
        } 
```

这是 asp.net 代码示例。

```
<asp:GridView ID="AnnouncementLevelsGrid" runat="server" Width="99%" DataSourceID="AnnouncementLevelsDataSource"
                                                    CssClass="Grid" AutoGenerateColumns="False" GridLines="None" DataKeyNames="AnnouncementLevelID,AnnouncementId"
                                                    ViewStateMode="Enabled" OnRowCommand="AnnouncementLevelsGrid_RowCommand" OnRowDataBound="AnnouncementLevelsGrid_RowDataBound"
                                                    OnRowUpdating="AnnouncementLevelsGrid_RowUpdating">
                                                    <HeaderStyle CssClass="GridHeader" />
                                                    <RowStyle CssClass="GridRow" />
                                                    <AlternatingRowStyle CssClass="GridAlternating" />
                                                    <Columns>
                                                        <asp:TemplateField HeaderText="Level 1">
                                                            <ItemTemplate>
                                                                <asp:Label ID="Level1Label" runat="server" Text='<%# Eval("Level1").ToString() == "0" ? "ALL" : Eval("Level1") %>'></asp:Label>
                                                            </ItemTemplate>
                                                            <EditItemTemplate>
                                                                <asp:DropDownList ID="Level1DropdownList" runat="server" AppendDataBoundItems="True"
                                                                    DataTextField="Level1" DataValueField="Level1Value" SelectedValue='<%# Eval("Level1") %>'
                                                                    AutoPostBack="True" DataSourceID="Level1DataSource" OnSelectedIndexChanged="Level1DropdownList_SelectedIndexChanged">
                                                                    <asp:ListItem Text="All" Value="0"></asp:ListItem>
                                                                </asp:DropDownList>
                                                            </EditItemTemplate>
                                                            <HeaderStyle HorizontalAlign="Center" Width="18%" />
                                                            <ItemStyle HorizontalAlign="Center" Width="18%" />
                                                        </asp:TemplateField>
                                                        <asp:TemplateField HeaderText="Level 2">
                                                            <ItemTemplate>
                                                                <asp:Label ID="Level2Label" runat="server" Text='<%# Eval("Level2").ToString() == "0" ? "ALL" : Eval("Level2") %>'></asp:Label>
                                                            </ItemTemplate>
                                                            <EditItemTemplate>
                                                                <asp:DropDownList ID="Level2DropdownList" runat="server" AppendDataBoundItems="True"
                                                                    DataTextField="Level2" DataValueField="Level2Value" SelectedValue='<%# Eval("Level2") %>'
                                                                    AutoPostBack="True" DataSourceID="Level2DataSource" OnSelectedIndexChanged="Level2DropdownList_SelectedIndexChanged">
                                                                    <asp:ListItem Text="All" Value="0"></asp:ListItem>
                                                                </asp:DropDownList>
                                                            </EditItemTemplate>
                                                            <HeaderStyle HorizontalAlign="Center" Width="18%" />
                                                            <ItemStyle HorizontalAlign="Center" Width="18%" />
                                                        </asp:TemplateField>
                                                        <asp:TemplateField HeaderText="Level 3">
                                                            <ItemTemplate>
                                                                <asp:Label ID="Level3Label" runat="server" Text='<%# Eval("Level3").ToString() == "0" ? "ALL" : Eval("Level3") %>'></asp:Label>
                                                            </ItemTemplate>
                                                            <EditItemTemplate>
                                                                <asp:DropDownList ID="Level3DropdownList" runat="server" AppendDataBoundItems="True"
                                                                    DataTextField="Level3" DataValueField="Level3Value" SelectedValue='<%# Eval("Level3") %>'
                                                                    AutoPostBack="True" DataSourceID="Level3DataSource" OnSelectedIndexChanged="Level3DropdownList_SelectedIndexChanged">
                                                                    <asp:ListItem Text="All" Value="0"></asp:ListItem>
                                                                </asp:DropDownList>
                                                            </EditItemTemplate>
                                                            <HeaderStyle HorizontalAlign="Center" Width="18%" />
                                                            <ItemStyle HorizontalAlign="Center" Width="18%" />
                                                        </asp:TemplateField>
                                                        <asp:TemplateField HeaderText="Level 4">
                                                            <ItemTemplate>
                                                                <asp:Label ID="Level4Label" runat="server" Text='<%# Eval("Level4").ToString() == "0" ? "ALL" : Eval("Level4") %>'></asp:Label>
                                                            </ItemTemplate>
                                                            <EditItemTemplate>
                                                                <asp:DropDownList ID="Level4DropdownList" runat="server" AppendDataBoundItems="True"
                                                                    DataTextField="Level4" DataValueField="Level4Value" SelectedValue='<%# Eval("Level4") %>'
                                                                    AutoPostBack="True" DataSourceID="Level4DataSource" OnSelectedIndexChanged="Level4DropdownList_SelectedIndexChanged">
                                                                    <asp:ListItem Text="All" Value="0"></asp:ListItem>
                                                                </asp:DropDownList>
                                                            </EditItemTemplate>
                                                            <HeaderStyle HorizontalAlign="Center" Width="18%" />
                                                            <ItemStyle HorizontalAlign="Center" Width="18%" />
                                                        </asp:TemplateField>
                                                        <asp:TemplateField HeaderText="Level 5">
                                                            <ItemTemplate>
                                                                <asp:Label ID="Level5Label" runat="server" Text='<%# Eval("Level5").ToString() == "0" ? "ALL" : Eval("Level5") %>'></asp:Label>
                                                            </ItemTemplate>
                                                            <EditItemTemplate>
                                                                <asp:DropDownList ID="Level5DropdownList" runat="server" AppendDataBoundItems="True"
                                                                    DataTextField="Level5" DataValueField="Level5Value" SelectedValue='<%# Eval("Level5") %>'
                                                                    DataSourceID="Level5DataSource">
                                                                    <asp:ListItem Text="All" Value="0"></asp:ListItem>
                                                                </asp:DropDownList>
                                                            </EditItemTemplate>
                                                            <HeaderStyle HorizontalAlign="Center" Width="18%" />
                                                            <ItemStyle HorizontalAlign="Center" Width="18%" />
                                                        </asp:TemplateField>
                                                        <asp:TemplateField ShowHeader="False">
                                                            <ItemTemplate>
                                                                <asp:LinkButton ID="EditLink" runat="server" CausesValidation="False" CommandName="Edit"
                                                                    Text="Edit" ToolTip="Edit"><img src="images/edit.png" alt="Edit" style="border-width: 0px;" /></asp:LinkButton>
                                                            </ItemTemplate>
                                                            <EditItemTemplate>
                                                                <asp:LinkButton ID="UpdateLink" runat="server" CausesValidation="True" CommandName="Update"
                                                                    Text="Update" ToolTip="Update"><img src="images/Update-Grd.png" alt="Update" style="border-width: 0px;" /></asp:LinkButton>
                                                                &nbsp;<asp:LinkButton ID="CancelLink" runat="server" CausesValidation="False" CommandName="Cancel"
                                                                    Text="Cancel" ToolTip="Cancel"><img src="images/Cancel-Grd.png" alt="Cancel" style="border-width: 0px;" /></asp:LinkButton>
                                                            </EditItemTemplate>
                                                            <HeaderStyle HorizontalAlign="Center" Width="10%" />
                                                            <ItemStyle HorizontalAlign="Center" Width="10%" />
                                                        </asp:TemplateField>
                                                    </Columns>
                                                    <EmptyDataTemplate>
                                                        No Announcements Found.
                                                    </EmptyDataTemplate>
                                                </asp:GridView>
                                                <asp:ObjectDataSource ID="AnnouncementLevelsDataSource" runat="server" SelectMethod="GetAnnouncementLevels"
                                                    TypeName="LinkManagement.DataAccess.AnnouncementHelper" OnSelecting="AnnouncementLevelsDataSource_Selecting">
                                                    <SelectParameters>
                                                        <asp:Parameter Name="announcementID" DbType="Int64" />
                                                    </SelectParameters>
                                                </asp:ObjectDataSource>
                                                <asp:ObjectDataSource ID="Level1DataSource" runat="server" SelectMethod="GetLevel1"
                                                    TypeName="LinkManagement.DataAccess.AnnouncementHelper" OnSelecting="Level1DataSource_Selecting">
                                                    <SelectParameters>
                                                        <asp:Parameter Name="employerID" DbType="Int64" />
                                                    </SelectParameters>
                                                </asp:ObjectDataSource>
                                                <asp:ObjectDataSource ID="Level2DataSource" runat="server" SelectMethod="GetLevel2"
                                                    TypeName="LinkManagement.DataAccess.AnnouncementHelper" OnSelecting="Level2DataSource_Selecting">
                                                    <SelectParameters>
                                                        <asp:Parameter Name="employerID" DbType="Int64" />
                                                        <asp:Parameter Name="cc1" DbType="String" />
                                                    </SelectParameters>
                                                </asp:ObjectDataSource>
                                                <asp:ObjectDataSource ID="Level3DataSource" runat="server" SelectMethod="GetLevel3"
                                                    TypeName="LinkManagement.DataAccess.AnnouncementHelper" OnSelecting="Level3DataSource_Selecting">
                                                    <SelectParameters>
                                                        <asp:Parameter Name="employerID" DbType="Int64" />
                                                        <asp:Parameter Name="cc2" DbType="String" />
                                                    </SelectParameters>
                                                </asp:ObjectDataSource>
                                                <asp:ObjectDataSource ID="Level4DataSource" runat="server" SelectMethod="GetLevel4"
                                                    TypeName="LinkManagement.DataAccess.AnnouncementHelper" OnSelecting="Level4DataSource_Selecting">
                                                    <SelectParameters>
                                                        <asp:Parameter Name="employerID" DbType="Int64" />
                                                        <asp:Parameter Name="cc3" DbType="String" />
                                                    </SelectParameters>
                                                </asp:ObjectDataSource>
                                                <asp:ObjectDataSource ID="Level5DataSource" runat="server" SelectMethod="GetLevel5"
                                                    TypeName="LinkManagement.DataAccess.AnnouncementHelper" OnSelecting="Level5DataSource_Selecting">
                                                    <SelectParameters>
                                                        <asp:Parameter Name="employerID" DbType="Int64" />
                                                        <asp:Parameter Name="cc4" DbType="String" />
                                                    </SelectParameters>
                                                </asp:ObjectDataSource> 
```

当我在网格视图中单击编辑按钮时，所有下拉列表都会以编辑模式呈现它们。他们也正确地填充数据。现在，当我更改第一个下拉列表项以填充第二个时，它会引发以下异常：

**Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。**

任何人都可以告诉我如何摆脱这个问题。我是否需要处理另一个网格事件才能正确绑定下拉列表？我还希望在绑定下拉列表后网格行仍处于编辑模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:27:15.690

最后我能够找到问题所在。我删除了围绕 GridView 的 UpdatePanel 并调试了代码。我发现我的更新函数正在获取除 id 值之外的空值。然后我看到了gridview，发现我已经使用Eval函数选择了网格中的每个下拉列表值，该函数用于单向数据绑定（只读）。我用 Bind 函数替换它，它开始正常工作。

# c# - 当有人按下退出按钮时我如何控制

> ID：14021875
> 
> 赞同：0
> 
> 时间：2012-12-24T13:11:16.763
> 
> 标签：c#, c#-4.0, jquery, asp.net-ajax

我如何控制当有人按下 firefox、chrome、IE、safari 上的退出按钮或控制何时按下风扇关闭按钮然后从数据库中删除它们，实际上我知道。我遇到的唯一问题是如何抓住按钮按下。

我得到了一些代码，但它似乎不起作用。我得到的代码看起来像这样

在我的 default.aspx.cs

```
public partial class _Default : System.Web.UI.Page, System.Web.UI.ICallbackEventHandler

string callBackReference = Page.ClientScript.GetCallbackEventReference(this, "arg", "LogOutUser", "");
        string logOutUserCallBackScript = "function LogOutUserCallBack(arg, context) { " + callBackReference + "; }";
        Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "LogOutUserCallBack", logOutUserCallBackScript, true);

void System.Web.UI.ICallbackEventHandler.RaiseCallbackEvent(string eventArgument)

     _callBackStatus = "failed";

     // log out the user by deleting from the LoggedInUser table
     DataClassesDataContext db = new DataClassesDataContext();

     var loggedInUser = (from l in db.BrugerOnlines
                         where l.BrugerId == Convert.ToInt32(Session["ChatUserID"])
                         && l.RumId == lb
                         select l).SingleOrDefault();

     db.BrugerOnlines.DeleteOnSubmit(loggedInUser);
     db.SubmitChanges();

     var besvarer = (from p in db.Rums where p.FK_Bruger == Session["SupportAdd"].ToString() select p).SingleOrDefault();
     db.Rums.DeleteOnSubmit(besvarer);
     db.SubmitChanges();
     // insert a message that this user has logged out
     this.sendbesked("Bruger har lukket siden " + DateTime.Now.ToString());

     _callBackStatus = "success";
 }
string  System.Web.UI.ICallbackEventHandler.GetCallbackResult()
 {
     return _callBackStatus;
 } 
```

在我的 default.aspx 上，它看起来像这样。

在页面顶部的 javascript 中，它看起来像这样

```
function LogOutUser(result, context) {
        // don't do anything here
    }

    function LogMeOut() {
        LogOutUserCallBack();
    }

<div onload="SetScrollPosition()" onunload="LogMeOut()">
</div> 
```

我使用的库是[http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.js) 我不知道这段代码是它的一部分

```
 $(function () {
    var timeout = 60000;
    $(document).bind("idle.idleTimer", function () {
        // function you want to fire when the user goes idle
        $.timeoutDialog({ timeout: 1, countdown: 60, logout_redirect_url: 'http://www.aspdotnet-suresh.com', restart_on_yes: true });
    });
    $(document).bind("active.idleTimer", function () {
        // function you want to fire when the user becomes active again
    });
    $.idleTimer(timeout);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:23:19.483

在页面正文的**onBeforeUnload**上调用您的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:23:38.570

如果您只想在用户关闭浏览器时执行一些操作。

我看不出有任何理由捕捉按钮事件。

按下`X`按钮将导致`Session_End`

只是处理`global.aspx Session_End`

就像在这个例子中：

[如何处理 global.asax 中的会话结束？](https://stackoverflow.com/questions/621744/how-to-handle-session-end-in-global-asax)

**注意：当用户退出但看到超时时，这不会发生在同一时刻**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:26:59.120

1.  您正在使用的[jQuery idleTimer 插件](http://paulirish.com/2009/jquery-idletimer-plugin/)用于检测页面的空闲时间并根据您重定向用户的超时。

2.  您可以使用：[jQuery 卸载事件](http://api.jquery.com/unload/)：

当用户离开页面时，unload 事件被发送到窗口元素。这可能意味着许多事情之一。用户可以单击链接离开页面，或者在地址栏中输入新的 URL。前进和后退按钮将触发事件。**关闭浏览器窗口将导致事件被触发。**即使是页面重新加载也会首先创建一个卸载事件。

# java - 如何在遍历 XML 中的节点时检查当前节点？

> ID：14021878
> 
> 赞同：0
> 
> 时间：2012-12-24T13:11:28.723
> 
> 标签：java, xml

我必须根据 xml 中的值在组合框中加载值。

当我要加载组合框时，方法

```
public static List<String> getVariableNames(Element thisElement, String type) {

    if (thisElement == null) {
        return new ArrayList<String>();
    }
    List<String> variableNames = new ArrayList<String>();
    List<Element> variableElements = thisElement.elements();
    for (Element nextElement : variableElements) {
        if (thisElement.equals(nextElement)) {
            break;
        } else if (isVariable(nextElement)) {
            String iteratedType = nextElement.attributeValue("TYPE");
            if (type.equals(iteratedType)) {
                variableNames.add(nextElement.attributeValue("VARIABLENAME"));
            }
        }
    }
    return variableNames;
} 
```

叫做。

但这不起作用。

这个实现有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:29:01.527

根据您的评论， thisElement.equals(nextElement) 始终返回 false。

**可能的原因：**

`thisElement`并且`nextElement`可能是对不同对象的引用（尽管具有相同的内容）， .equals() 的默认实现比较在这种情况下可能不同的对象的地址。

请确保该`equals()`方法实际上是由 Element 类实现的，并比较所需的字段，以便它为相等/相同的对象返回 true。

# php - 表中的列可以既是主键又是外键？

> ID：14021880
> 
> 赞同：2
> 
> 时间：2012-12-24T13:11:34.720
> 
> 标签：php, mysql

有人可以告诉我是否可以将外键用作表中的主键？

例如，我有一个作为主键的`PATIENT`表，我还希望有一个外键作为表的主键（其中包含患者的生命体征）。没问题还是会产生问题？`PATIENT_ID``PATIENT_ID``ASSESSMENT`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T13:15:21.030

只要你能保持一对一的关系就可以了。数据库端没有限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:17:21.620

是的，外键可以作为表中的主键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T13:17:40.170

> 没问题还是会产生问题？

我会说没关系。这产生的一个小问题可能是它让你需要问这个问题。因此，如果你真的想了解更多，你应该问问自己为什么不确定，这样你才能真正学到一些东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T15:58:14.530

这称为一对一关系。

> 没问题还是会产生问题？

只要您有充分的理由将数据保存在两个表中，就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T15:58:22.307

外键的先决条件是作为外键的列必须是两个表中的键。所以从这个角度来看，你是绝对安全的。唯一可能出现的问题是应用程序的未来发展，当您可能需要在 2 个表之间建立一对多关系时，在这种情况下使用这种方法非常糟糕。稍后在数据库级别更改此行为并不难，但在应用程序级别可能会非常棘手。

老实说，我非常怀疑您是否需要在两张表之间实际使用外键，因为 id 将始终相同，这违背了外键的目的。此外，大多数主键通常是自动递增的，这对您而言并非如此，这可能会导致未来开发中的其他问题。

# c++ - 使用 QXmlQuery 从 url 读取 xml（没有临时文件）

> ID：14021881
> 
> 赞同：0
> 
> 时间：2012-12-24T13:11:38.853
> 
> 标签：c++, xml, qt

我从服务器下载了一个 xml 文件。如果将其写入文件，我可以使用 QXmlQuery 对其进行解析，但是如何从“回复”（QNetworkReply）中解析它？

有一个 QXmlStreamReader 但我似乎没有找到连接阅读器和查询的方法

*编辑*我不知道如何在 QIODevice 中回复，

```
reply->open(QIODevice::ReadOnly);
QXmlQuery query1;
QXmlNamePool namePool(query1.namePool());
query1.bindVariable(QXmlName(namePool, QString("kmlFile")),reply->readAll()); 
```

但我得到错误

```
QXmlQuery::bindVariable(const QXmlName &,const QXmlItem &)' : cannot convert parameter 2 from 'QByteArray' to 'const QXmlItem &' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:42:12.417

```
QNetworkAccessManager *manager = new QNetworkAccessManager( this );
QNetworkReply* reply = QNetworkAccessManager::get( manager->get( QNetworkRequest( QUrl("http://www.foo.com/example.xml") ) ) ;
//QXmlStreamReader reader( reply );
QXmlQuery query;
query.setQuery(reply); 
```

还有一种方法
`void QXmlQuery::setQuery ( const QUrl & queryURI, const QUrl & baseURI = QUrl() )`

# binary - 当我尝试以二进制表示法给出数字时，为什么 Visual C++ 会给出意外的值？

> ID：14021882
> 
> 赞同：0
> 
> 时间：2012-12-24T13:11:42.353
> 
> 标签：binary, numbers, integer, bit-manipulation, decimal

在 VC++ 9 中尝试这样的东西：

```
int base = 0010; 
```

然后在调试器中我看到它等于十进制的 8。我不明白。

我认为如果我在数字前明确使用 000，VC++ 会将其解释为二进制格式的数字。

二进制中的 0010 是十进制中的 2（像我们往常一样从右到左读取数字基数）。

0 -> 0

0 -> 1

10 -> 2

那么为什么在这样的定义之后 VC++ 告诉我 0010 是十进制的 8 呢？

如果十进制的 8 等于 bin 中的 1000？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:15:10.437

0010 是八进制文字（因为它以 0 开头）。它是八进制的 10，即十进制的 8

# objective-c - UIBezierPath 绘制的视图的模糊屏幕截图

> ID：14021883
> 
> 赞同：1
> 
> 时间：2012-12-24T13:11:47.423
> 
> 标签：objective-c, ios, uiimage, core-graphics, uibezierpath

我正在使用`UIBezierPath`方法和核心文本绘制我的图形视图。我使用 `addQuadCurveToPoint:controlPoint:`方法在图形上绘制曲线。我还`CATiledLayer`用于在 x 轴上使用大型数据集渲染图形。我在图像上下文中绘制我的整个图表，并在`drawrect:`我的视图中我在我的整个视图中绘制这个图像。以下是我的代码。

```
- (void)drawImage{

        UIGraphicsBeginImageContextWithOptions(self.frame.size, NO, 0.0);

        // Draw Curves 
        [self drawDiagonal];

        UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
        [screenshot retain];
        UIGraphicsEndImageContext();
}
- (void)drawRect:(CGRect)rect{

    NSLog(@"Draw iN rect with Bounds: %@",NSStringFromCGRect(rect));
    [screenshot drawInRect:self.frame];
} 
```

然而，在屏幕截图中，两点之间绘制的曲线并不平滑。我还在我的信息列表中将带有抗锯齿的渲染设置为“是”。请看截图。 ![在此处输入图像描述](../Images/6feb9faaf231d4f39a1aa642d572ec0d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:35:14.927

我们必须看看你是如何构造 的`UIBezierPath`，但根据我的经验，对于平滑曲线，关键问题是曲线的控制点和曲线特定段的端点之间的直线斜率是否等于曲线起点的下一段与其控制点之间的斜率。我发现使用`addCurveToPoint`而不是更容易绘制一般平滑曲线`addQuadCurveToPoint`，因此我可以调整起点和终点控制点以更普遍地满足此标准。

为了说明这一点，我通常绘制`UIBezierPath`曲线的方式是在曲线上有一个点数组，以及曲线在该点应该采取的角度，然后是`addCurveToPoint`控制点的“权重”（即距离控制点应该是）。因此，我使用这些参数来指示 a 的第二个控制点`UIBezierPath`和`UIBezierPath`. 因此，例如：

```
@interface BezierPoint : NSObject
@property CGPoint point;
@property CGFloat angle;
@property CGFloat weight;
@end

@implementation BezierPoint

- (id)initWithPoint:(CGPoint)point angle:(CGFloat)angle weight:(CGFloat)weight
{
    self = [super init];

    if (self)
    {
        self.point  = point;
        self.angle  = angle;
        self.weight = weight;
    }

    return self;
}

@end 
```

然后，我如何使用它的一个例子：

```
- (void)loadBezierPointsArray
{
    // clearly, you'd do whatever is appropriate for your chart.
    // this is just a unclosed loop. But it illustrates the idea.

    CGPoint startPoint = CGPointMake(self.view.frame.size.width / 2.0, 50);

    _bezierPoints = [NSMutableArray arrayWithObjects:
            [[BezierPoint alloc] initWithPoint:CGPointMake(startPoint.x, startPoint.y) 
                                         angle:M_PI_2 * 0.05
                                        weight:100.0 / 1.7],
            [[BezierPoint alloc] initWithPoint:CGPointMake(startPoint.x + 100.0, startPoint.y + 70.0) 
                                         angle:M_PI_2
                                        weight:70.0 / 1.7],
            [[BezierPoint alloc] initWithPoint:CGPointMake(startPoint.x, startPoint.y + 140.0)
                                         angle:M_PI
                                        weight:100.0 / 1.7],
            [[BezierPoint alloc] initWithPoint:CGPointMake(startPoint.x - 100.0, startPoint.y + 70.0)
                                         angle:M_PI_2 * 3.0
                                        weight:70.0 / 1.7],
            [[BezierPoint alloc] initWithPoint:CGPointMake(startPoint.x + 10.0, startPoint.y + 10)
                                         angle:0.0
                                        weight:100.0 / 1.7],
            nil];
}

- (CGPoint)calculateForwardControlPoint:(NSUInteger)index
{
    BezierPoint *bezierPoint = _bezierPoints[index];

    return CGPointMake(bezierPoint.point.x + cosf(bezierPoint.angle) * bezierPoint.weight,  
                       bezierPoint.point.y + sinf(bezierPoint.angle) * bezierPoint.weight);
}

- (CGPoint)calculateReverseControlPoint:(NSUInteger)index
{
    BezierPoint *bezierPoint = _bezierPoints[index];

    return CGPointMake(bezierPoint.point.x - cosf(bezierPoint.angle) * bezierPoint.weight,  
                       bezierPoint.point.y - sinf(bezierPoint.angle) * bezierPoint.weight);
}

- (UIBezierPath *)bezierPath
{
    UIBezierPath *path = [UIBezierPath bezierPath];
    BezierPoint *bezierPoint = _bezierPoints[0];

    [path moveToPoint:bezierPoint.point];

    for (NSInteger i = 1; i < [_bezierPoints count]; i++)
    {
        bezierPoint = _bezierPoints[i];

        [path addCurveToPoint:bezierPoint.point
                controlPoint1:[self calculateForwardControlPoint:i - 1] 
                controlPoint2:[self calculateReverseControlPoint:i]];
    }

    return path;
} 
```

* * *

当我将其渲染为`UIImage`（使用下面的代码）时，我看不到图像有任何软化，但不可否认，图像并不相同。（我正在将`capture`通过同时按下物理设备上的电源和主页按钮手动捕获的图像与我手动捕获的图像进行比较。）

如果您看到一些软化，我会建议`renderInContext`（如下所示）。我想知道您是否将图像写为 JPG（有损）。如果您使用 JPG，也许可以尝试 PNG。

```
- (void)drawBezier
{
    UIBezierPath *path = [self bezierPath];

    CAShapeLayer *oval = [[CAShapeLayer alloc] init];
    oval.path = path.CGPath;
    oval.strokeColor = [UIColor redColor].CGColor;
    oval.fillColor = [UIColor clearColor].CGColor;
    oval.lineWidth = 5.0;
    oval.strokeStart = 0.0;
    oval.strokeEnd = 1.0;
    [self.view.layer addSublayer:oval];
}

- (void)capture
{
    UIGraphicsBeginImageContextWithOptions(self.view.frame.size, NO, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];
    UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // save the image

    NSData *data = UIImagePNGRepresentation(screenshot);
    NSString *documentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *imagePath = [documentsPath stringByAppendingPathComponent:@"image.png"];
    [data writeToFile:imagePath atomically:YES];

    // send it to myself so I can look at the file

    NSURL *url = [NSURL fileURLWithPath:imagePath];
    UIActivityViewController *controller = [[UIActivityViewController alloc] initWithActivityItems:@[url]
                                                                         applicationActivities:nil];
    [self presentViewController:controller animated:YES completion:nil];
} 
```

# javascript - 如果最初没有设置显示属性，则 jQuery 切换无法正常工作

> ID：14021891
> 
> 赞同：0
> 
> 时间：2012-12-24T13:12:53.903
> 
> 标签：javascript, jquery, coffeescript

我正在使用 jQuery v1.8.3 和 jQuery UI v1.9.2。

在 a`click`上，`button`我希望菜单（通过 a `ul`）在打开时隐藏，或者在关闭时显示，所以我选择以最基本的形式使用[切换](http://api.jquery.com/toggle/)`click`功能， on ，`toggle()`。就这么简单，例如

```
button.click =>
  autocomplete = input_field.data("ui-autocomplete")
  menu = autocomplete.menu
  ul = menu.element
  ul.toggle() 
```

（这是咖啡脚本，但你明白了要点）

实际发生的是，当第`ul`一次显示（而不是通过按钮）时，它的~~display 属性设置~~为 display 属性`display: block`。

然后，如果我在单击功能中检查显示属性的当前状态，则在第一次单击按钮时：

```
console.log "display = #{ul.css('display')}"
ul.toggle()
console.log "display = #{ul.css('display')}" 
```

输出是：

> 显示 = 无
> 显示 = 块

因此，由于某种原因，该物业最初被错误地拾取。

~~它将显示属性添加为`display: block`，然后在下一次单击时设置`display: none`。~~

我无法直接控制它，因为它是由[自动完成小部件](http://docs.jquery.com/UI/Autocomplete)`ul`呈现的，我并不热衷于摆弄它。

这是预期的行为，解决此问题的最佳方法是什么？我正在考虑传递一个函数来`click`检查是否有显示属性集，然后根据它显示或隐藏，但如果有更简单的方法或更好的功能，也许是更新版本的切换，那么请告诉我。在我看来，jQuery 文档是所有技术项目中最糟糕的，所以我认为我很可能完全使用了错误的功能。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:40:28.357

你是说你在页面第一次加载时看到了 li ，如果这是预期的行为，那就太好了 - 无论哪种方式都无关紧要。我创建了这个 JS fiddle [http://jsfiddle.net/r0k3t/Rcpet/](http://jsfiddle.net/r0k3t/Rcpet/)去那里尝试一下，当您第一次加载页面时，CSS 是否将显示属性设置为阻止或无，切换工作正常。如果您发布了更多代码，则更容易看到您想要完成的任务，但仅从您的描述中很难知道问题出在哪里，您可能会遇到简单的语法错误，但我们看不到。无论如何 - 这是与 JS fiddle 相同的代码。

```
<a href="#" id="toggleButton">Toggle li element</a>
    <ul>
        <li>You can see me now</li>
    </ul>

//Here is the JS wired up in document load
function toggleLi() {
    $("ul li").toggle();
}

$("#toggleButton").click(toggleLi);

/* Here is the CSS */
ul li {
 display: block;  /*change to none and test - works as well */  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:18:06.440

在页面加载时设置显示属性。就像是

```
$(function(){
  $("ul").hide();
}); 
```

一旦呈现自动完成。

这将设置 display:none 使用`.show()`它`display:block`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:18:43.697

`toggle`即使您的元素没有显式设置显示属性，也应该可以工作。有关示例，请参[见此 jsfiddle](http://jsfiddle.net/zSbN5/1/)。要检查的一件事是您正在执行点击处理程序`$(function() { ... });`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T14:00:19.890

检查此代码

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("#show").click(function(){
    $("ul").toggle();
  });

});
</script>
<style>
ul {display:none;}

</style>
</head>
<body>
<button id="show">Show</button>
<ul>
<li>aaaa </li>
<li>bbbb </li>
<li>ccccccc </li>
</ul>

</body>
</html> 
```

# wpf - 取消选中单选按钮 wpf

> ID：14021895
> 
> 赞同：3
> 
> 时间：2012-12-24T13:13:20.653
> 
> 标签：wpf, radio-button

我有一个单选按钮，我想代表真值和假值。

*   当它为假（取消选中）时，单击它使其为真（选中）
*   当它为真（选中）时，单击它使其为假（取消选中）

我怎样才能用 WPF 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T13:19:25.897

您可以使用`ToggleButton`which has`IsChecked`属性表示*真*值和*假*值。

# linux - 我可以使用 awk 将所有小写字母转换为大写吗？

> ID：14021899
> 
> 赞同：50
> 
> 时间：2012-12-24T13:13:33.170
> 
> 标签：linux, bash, awk

我有一个混合了小写字母和大写字母的文件，我可以使用`awk`该文件中的所有字母转换为大写字母吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-24T13:16:15.597

试试这个：

```
awk '{ print toupper($0) }' <<< "your string" 
```

使用文件：

```
awk '{ print toupper($0) }' yourfile.txt 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-24T13:17:31.230

您可以使用`awk`，但`tr`它是更好的工具：

```
tr a-z A-Z < input 
```

或者

```
tr [:lower:] [:upper:] < input 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T13:16:25.973

就像是

```
< yourMIXEDCASEfile.txt awk '{print toupper($0)}' > yourUPPERCASEfile.txt 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-24T13:18:41.060

试试这个：

```
$ echo mix23xsS | awk '{ print toupper($0) }'
MIX23XSS 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-24T13:15:33.253

你的意思是像这个线程解释： [http](http://www.unix.com/shell-programming-scripting/24320-converting-file-names-upper-case.html) ://www.unix.com/shell-programming-scripting/24320-converting-file-names-upper-case.html （好的，它是关于文件名，但同样的原则适用于文件)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T00:47:40.820

如果 Perl 是一个选项：

```
perl -ne 'print uc()' file 
```

*   `-n`循环输入文件，不自动打印行

*   `-e`在引号中执行 perl 代码

*   `uc()`= 大写

打印全部小写：

```
perl -ne 'print lc()' file 
```

# python - 字符串模板 4 和 Python

> ID：14021900
> 
> 赞同：3
> 
> 时间：2012-12-24T13:13:37.917
> 
> 标签：python, python-3.x, stringtemplate, stringtemplate-4

我刚刚发现了 StringTemplate 并想在 python 中对其进行测试。v4 是否适用于 Python (2.7/3)？Wiki 是空的，我找不到任何有关 v4 版本的 python 端口的信息。v3 是唯一的工作版本（在 ofc Python 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:21:49.427

即使在[文档](http://www.antlr.org/wiki/display/ST4/Introduction)中使用 python 端口作为状态*doru*，似乎在本文发布时，该端口仍不可用。

[strintemplate 4 下载页面](http://www.stringtemplate.org/download.html) 仅提及 Java 和 C#，并且[下载存储库只有](http://www.stringtemplate.org/download/)*PyStringTemplate*的第3 版，您[也可以在 pypi 中找到它](https://pypi.python.org/pypi/stringtemplate3/)。我在网上看到，python 端口的作者和维护者 Benjamin Niemann 接受了在 v4 端口上工作，但没有更多！

# java - 如何在窗口 azure 中运行 java tcp 服务器？

> ID：14021901
> 
> 赞同：3
> 
> 时间：2012-12-24T13:13:38.490
> 
> 标签：java, azure

如何在窗口 azure 中运行 java tcp 服务器？天蓝色的窗口可以做到吗？

我找到了很多关于window azure的java应用程序的文章，它们是在eclipse中打开一个JSP web项目，而不是使用worker角色在window azure中发布它，但是我的tcp服务器是一般的java项目，所以如何将它发布到window天蓝色？

我的 tcp 服务器：

```
public class test {

    private static int serverport = 12345;
    private static ServerSocket serverSocket;

    public static void main(String[] args) {
        try {
            serverSocket = new ServerSocket(serverport);
            System.out.println("Server is start.");
            while (!serverSocket.isClosed()) {
                System.out.println("Wait new clinet connect!");
                waitNewPlayer();
            }
        } catch (IOException e) {
            System.out.println("Server Socket ERROR");
        }
    }

    public static void waitNewPlayer() {
        try {
            Socket socket = serverSocket.accept();  
            System.out.println(socket.getInetAddress().getHostAddress()+"'s socket is connected now!"); 
            createNewUser(socket);
        } catch (IOException e) {
        }
    }

    public static void createNewUser(final Socket socket) {

        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    PrintWriter out = new PrintWriter( new BufferedWriter( new OutputStreamWriter(socket.getOutputStream())),true); 

                    out.println("nangnang");
                } catch (IOException e) {
                    System.out.println("Socket is closed!");
                }   
                System.out.println("This socket is removed form the player array!");
            }
        });
        t.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:50:52.573

您可能还想尝试同样支持 Azure Java 项目的 AzureRunMe。[http://azurerunme.codeplex.com/](http://azurerunme.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:32:08.443

您应该能够在 Azure 中运行这样的应用程序，但您需要注意以下几点：

*   为您的工作人员角色打开一个*输入端点*- 这将打开通往外部世界的端口。然后，您需要在内部将其映射到完全相同的端口，或者让 Azure 为您选择一个端口（然后您可以询问角色环境为您分配了哪个端口，并在您的代码中打开该端口而不是 12345）
*   对于您的所有`println`'s，您需要远程桌面才能查看它们，或者您需要将它们推送到诊断日志记录，以便您可以通过 Cerebrata 的诊断管理器等外部工具查看这些调试语句。

至于发布：它与您看到的 jsp 示例相同：您构建一个 Azure 项目以配合您的 Java 项目，您设置角色大小和实例计数，创建输入端点，可选地创建缓存，设置设置存储帐户的配置设置，创建要在模拟器或云中运行的包等。

# c# - 使用实体框架和嵌入式 firebird 创建应用程序

> ID：14021904
> 
> 赞同：1
> 
> 时间：2012-12-24T13:13:50.643
> 
> 标签：c#, entity-framework, firebird

**信息**
我正在使用 VS 2012 开发桌面 WPF 应用程序（应该在 win 7 和 8 上运行，稍后它将获得一个 win 8 应用程序），
带有嵌入式 Firebird 服务器，并与实体框架通信。
我在 VS2012 中都使用 win 7/8 进行开发。

**问题**
应用程序应与客户 PC 上的嵌入式 firebird 一起使用（未安装 FB）。

我确实为 Visual Studio(3.0.0.0) 安装了 DDEX 提供程序，就其工作而言。我可以添加一个新的 firebird 连接（但找不到错误 fbembed.dll）。所以我无法创建 edmx 文件。

1.  我是否需要安装 firebird 服务器（Superclassic/Classic 或 Superserver），还是仅在我的开发人员 PC 上使用嵌入式服务器就足够了？如果嵌入就足够了，我需要在 gac 上注册 firebird 客户端吗？

2.  到目前为止，我没有找到任何有用的信息如何安装和使用它，以及如何部署它。你们有一些好的信息链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:36:14.023

对于嵌入式服务器，您只需将 Firebird 文件与您的应用程序一起部署，并将 dll 文件放在可供它访问的位置，例如，在同一文件夹中。

要使 Firebird 正常工作，您必须部署的最少文件是：

*   FbEmbed.dll
*   icudt30.dll
*   icuin30.dll
*   icuuc30.dll
*   火鸟.msg
*   火鸟.conf

此信息以及更多使用说明可在文件 doc\README_embedded.txt 中找到。

> 1.  用法
>     
>     
>     
>     只需将 fbembed.dll、icudt30.dll、icuin30.dll 和 icuuc30.dll 复制到您的应用程序所在的目录中。然后根据您的数据库连接软件将 fbembed.dll 重命名为 fbclient.dll 或 gds32.dll。然后启动您的应用程序，它将使用嵌入式服务器作为客户端库，并能够访问本地数据库。您还应该将 firebird.msg 和 firebird.conf（如有必要）复制到同一目录。
>     
>     
>     
>     如果您的应用程序需要外部库，那么您应该单独拥有它们。最有可能的是 INTL 支持（fbintl.dll 和 fbintl.conf）或 UDF 库。为了能够使用它们，您应该将它们放入模拟 Firebird 服务器的目录树中，即具有 /intl 或 /udf 之类的子目录：

# vim - cygwin中的vim有些奇怪的下划线，如何解决这个问题？

> ID：14021905
> 
> 赞同：2
> 
> 时间：2012-12-24T13:13:52.320
> 
> 标签：vim, cygwin, underline

![在此处输入图像描述](../Images/775b7dde62c8c76924ca23408589ac6c.png) ![在此处输入图像描述](../Images/b1ff6d2612ec25d2c3f1d00403b03c34.png)

我在 windows7 上使用 cygwin，语法在 ~/.vimrc 中。

当我尝试编写一个测试shell文件时，有这么多下划线，很无聊，我怎样才能摆脱它？我尝试让html_no_rendering=1，但它在这里不起作用，而且这些文件不是html文件。

这是我的 ~/.vimrc：

```
set nu
hi LineNr       term=NONE cterm=NONE
set ts=4
set fenc=4
set fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936
set nocp
set ai
set si
if &term != "cygwin"
    set ruler
endif
set incsearch
set showmatch
set backspace=indent,eol,start
syntax on
set shiftwidth=4
set expandtab
set encoding=utf8
set fileencodings=utf8,gbk

set nocompatible 
set history=50 
set autoindent 
set smartindent 
set showmatch 
set showcmd
set wildmenu
set fo=cqrt
set laststatus=2
set textwidth=78
filetype on
filetype plugin on
filetype indent on
set nobackup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T11:09:42.847

下划线在您的配色方案中定义。打开它并搜索单词`underline`。您可以将该值更改为：

```
bold
undercurl
reverse
inverse
italic
standout
NONE 
```

# android - 如何访问Android中的属性资源文件来解析Maven项目信息？

> ID：14021908
> 
> 赞同：3
> 
> 时间：2012-12-24T13:14:41.507
> 
> 标签：android, maven, resources, classpath

在我的（非 Android 测试）测试中，我将**src/main/resources**中名为 common.properties 的资源放入我的 Android 项目中，以从中读取**Maven 项目版本**：

```
@Test
public void testReadVersion() throws IOException {      
    Properties props = new Properties();
    props.load(FileUtils.openInputStream(FileUtils.toFile(this.getClass().getResource("/common.properties"))));

    String version = props.getProperty("version");

    assertNotNull(version);
    assertTrue(!"".equals(version));
} 
```

这行得通。但是当我尝试在生产代码中访问相同的资源时，我总是在访问资源时得到 NullPointerExceptions：

```
 Properties props = new Properties();
    final StringBuilder versionBuilder = new StringBuilder();

    try {
        props.load(FileUtils.openInputStream(FileUtils.toFile(this.getClass().getResource("/common.properties"))));

        versionBuilder.append(props.getProperty("version"));
    } 
    catch (IOException e) {
        // will be ignored.
    } 
```

我调试了它。它是空的，因为它没有找到资源。我应该如何解决这个问题？当我将文件放入**res/raw**以读取它时

```
props.load(getResources().openRawResource(R.raw.common)); 
```

文件访问有效，但无法从我的文件内容中转换值：**version=${project.version}**。结果将是值字符串本身**${project.version}**而不是**版本 1.0**或其他东西。我有哪些选择？

**[更新]**
下面接受的解决方案不再适用于我的最新项目。我总是得到 ${project.version} 而不是价值。不知道为什么会这样。甚至 AssetManager 的解决方案都不适合我。我找到了一个很好的解决方法，它也不太方便。我获取并显示 android:versionName (AndroidManifest) 的信息。

```
String versionName = this.getPackageManager().getPackageInfo(this.getPackageName(), 0).versionName;

TextView version = (TextView)findViewById(R.id.version);
version.setText(" " + versionName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:53:00.637

首先，我建议使用更简单的方法：

```
InputStream resourceAsStream = this.getClass().getResourceAsStream("/common.properties");
Properties prop = new Properties();
prop.load(resourceAsStream); 
```

如果您在测试或生产代码中运行，这将起作用。此外，要从资源中替换的 pom 中获取值，您必须设置过滤：

```
<project>
  ...
  <build>
    ...
    <resources>
      <resource>
        <directory>src/main/resources</directory>
        <filtering>true</filtering>
      </resource>
      ...
    </resources>
    ...
  </build>
  ...
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:38:57.053

@khmarbaise 解决方案对我不起作用，因此我结合了资源过滤（[Dmitriy Tarasov](https://stackoverflow.com/a/10909923/1156739)示例）和使用 AssetManager 加载资产（[在此处](http://myossdevblog.blogspot.com/2010/02/reading-properties-files-on-android.html)描述）。

# django - Django注销不起作用

> ID：14021913
> 
> 赞同：13
> 
> 时间：2012-12-24T13:15:08.000
> 
> 标签：django, logout

我似乎和这个问题有同样的问题：[Django logout problem](https://stackoverflow.com/questions/2074980/django-logout-problem)

我的有点奇怪，它可以在 google chrome 中运行……但在 Firefox 中不行……

这是我的注销功能：（在views.py中）

```
def my_logout(request):
    logger.debug("Logout called by user")
    try:
        # Here I do some custom stuff, like logging this action in a database and so on
        # For this question it shouldn't matter... because in a try catch
        # so whatever goes wrong here, logging out should work anyway
    except Exception, e:
        logger.info("Logging logout action error: %s" % e)
    logout(request)
    return HttpResponseRedirect("/") 
```

在 settings.py 我有：

```
LOGIN_URL = '/desktop/login/'
LOGOUT_URL = '/desktop/logout/'
LOGIN_REDIRECT_URL = '/' 
```

在应用程序iamapps 的urls.py 中（包括在项目url 中为/desktop/）：

```
url(r'^login/$', 'iamapps.views.my_login', name='iamapps.login'),
url(r'^logout/$', 'iamapps.views.my_logout', name='iamapps.logout'), 
```

更多信息：

*   django 1.4.3（刚刚从 1.3 更新到 1.4 ....）
*   蟒蛇2.7
*   适用于 Chrome 但不适用于 Firefox 17.0.1、Linux

它在 google chrome 中工作但在 firefox 中不工作的事实最让我困惑。似乎它与firefox不断记住用户登录有关......

**编辑：** 我的管道坏了……但我似乎不是在注销时得到它……而是在注销后进入主视图……

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 86, in run
    self.finish_response()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 127, in finish_response
    self.write(data)
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 210, in write
    self.send_headers()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 268, in send_headers
    self.send_preamble()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 192, in send_preamble
    'Date: %s\r\n' % format_date_time(time.time())
  File "/usr/lib/python2.7/socket.py", line 324, in write
    self.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 58684)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/media/storage/django/sites/iamfloraservice/parts/django/django/core/servers/basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "/usr/lib/python2.7/SocketServer.py", line 641, in __init__
    self.finish()
  File "/usr/lib/python2.7/SocketServer.py", line 694, in finish
    self.wfile.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
----------------------------------------
[24/Dec/2012 14:33:25] "GET / HTTP/1.1" 200 48247 
```

**编辑 2** 它在注销并被重定向后进入此视图：

```
def home(request, template='iamfloraservice/home.html'):

    logger.debug("Home view called by user %s" % request.user)
    return render_to_response(template,{},context_instance=RequestContext(request)) 
```

我认为请求重定向到这个视图会导致问题....在日志中它仍然是用户'michel'（因为视图使用来自重定向的请求，并且有用户michel）......但是.. . 用户 michel 正在同时注销....

**编辑 3**

由于建议是由于记录器。取消记录日志并没有帮助它是默认记录器：

```
import logging
logger = logging.getLogger(__name__) 
```

**编辑 4** (30-12-2012)

我的注销来自一个主窗口，当用户登录时我会显示一个注销链接，如果用户注销，我会显示一个登录链接。它还包含一个工具栏，根据用户及其组成员身份填充哪些工具。

我认为问题是，它正在重新加载这个主窗口，而缓存和它的请求中的用户还没有被清除。不知何故，Chrome 知道如何处理这个问题，而 Firefox 会导致管道损坏错误。在浏览器中手动清除缓存会导致重新加载后的正确视图....

一个解决方案可能是重定向到一个没有任何包含用户的页面......或者找出在我自己的正确时刻清除缓存......

这个问题描述的可能相同......但我不能指望用户在浏览器中做任何事情只是为了注销？请参阅[django 1.4 将 GET 缓存到 /login/](https://stackoverflow.com/questions/10903809/django-1-4-caching-get-to-login)

**编辑 5** (31-12-2012)

似乎这是一个缓存问题....但不知道如何解决这个问题。

这些是我的缓存设置：

```
if not DEBUG:
    CACHES = {
        'default': {
            'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
            'LOCATION': '127.0.0.1:11211',
        }
    }
else:
    CACHES = {
        'default': {
            'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
        }
    } 
```

但我也试过没有 dummycache

**编辑 6**（2013 年 1 月 4 日）仍然没有解决方案....我将注销方式更改为 django 方式，现在我正在使用信号...请参阅下面的我自己的答案。

但它仍然给出了brokenpipe错误，导致firefox停止注销。这不是缓存问题。如果我转到另一个页面，或者更糟糕的是......管理页面。我仍然登录。注销的唯一方法是通过管理页面上的注销......如果它不是管理员用户......没有办法让我在 firefox 浏览器上注销。

使用管理界面注销时，信号工作正常...

我通过关闭信号进行了检查....仍然无法在Firefox中注销。

结论：回到主页（）是导致问题的原因。

**编辑 7**（2013 年 1 月 4 日）我为测试制作了一个简单的注销视图，这个模板：

```
<html>
<head>
<title>
Logged out
</title>
</head>
<body>
You are succesfully logged out.<br>
<br>
<a href="/">Go back to the main page</a>
or<br>
<a href="/desktop/login/?next=/">log in again</a>
</body>
</html> 
```

和注销的视图：

```
class LoggedOutView(TemplateView):
    template_name = "iamapps/logged_out.html" 
```

并将网址更改为：

```
url(r'^logout/$', 'django.contrib.auth.views.logout',  {'next_page': '/desktop/loggedout/'}, name='iamapps.logout'),
#url(r'^logout/$', 'django.contrib.auth.views.logout_then_login',  name='iamapps.logout'),
url(r'^loggedout/$', LoggedOutView.as_view(),name='iamapps.loggedout'), 
```

而且，为了简单起见……我已经关闭了信号。

它仍然无法在 Firefox 中运行......但它在 chrome 中运行

在 Firefox 中，它不会转到已注销的页面

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-25T17:03:13.213

我通常只使用贡献视图来注销用户。只需将其添加到您的根`urls.py`文件中：

```
# Would be nice to use settings.LOGIN_URL for `next_page` here, too
url(r'^logout/$', 'django.contrib.auth.views.logout', {'next_page': '/login'}), 
```

你会很高兴的。

快乐的姜戈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-12T08:32:40.460

最后我完全切换到几乎回到 django 默认值...使用：

在views.py中：

```
from django.contrib.auth.forms import AuthenticationForm
from django.views.generic.edit import FormView

class LoginView(FormView):
    """
    This is a class based version of django.contrib.auth.views.login.

    """
    form_class = AuthenticationForm
    redirect_field_name = REDIRECT_FIELD_NAME
    template_name = 'iamapps/login.html'

    @method_decorator(csrf_protect)
    @method_decorator(never_cache)
    def dispatch(self, *args, **kwargs):
        return super(LoginView, self).dispatch(*args, **kwargs)

    def form_valid(self, form):
        """
        The user has provided valid credentials (this was checked in AuthenticationForm.is_valid()). So now we
        can check the test cookie stuff and log him in.
        """
        self.check_and_delete_test_cookie()
        login(self.request, form.get_user())
        return super(LoginView, self).form_valid(form)

    def get_context_data(self, **kwargs):
        context = super(LoginView, self).get_context_data(**kwargs)
        apps_settings=iamapps_settings()
        if apps_settings[LOGON_BASE_APP_NAME]:
            self.extend_template="%s/base.html" % apps_settings[LOGON_BASE_APP_NAME]
        else:
            self.extend_template="iamapps/base.html"
        context['extend_template']=self.extend_template
        return context    

    def form_invalid(self, form):
        """
        The user has provided invalid credentials (this was checked in AuthenticationForm.is_valid()). So now we
        set the test cookie again and re-render the form with errors.
        """
        self.set_test_cookie()
        return super(LoginView, self).form_invalid(form)

    def get_success_url(self):
        if self.success_url:
            redirect_to = self.success_url
        else:
            redirect_to = self.request.REQUEST.get(self.redirect_field_name, '')

        netloc = urlparse.urlparse(redirect_to)[1]
        if not redirect_to:
            redirect_to = settings.LOGIN_REDIRECT_URL
        # Security check -- don't allow redirection to a different host.
        elif netloc and netloc != self.request.get_host():
            redirect_to = settings.LOGIN_REDIRECT_URL
        return redirect_to

    def set_test_cookie(self):
        self.request.session.set_test_cookie()

    def check_and_delete_test_cookie(self):
        if self.request.session.test_cookie_worked():
            self.request.session.delete_test_cookie()
            return True
        return False

    def get(self, request, *args, **kwargs):
        """
        Same as django.views.generic.edit.ProcessFormView.get(), but adds test cookie stuff
        """
        self.set_test_cookie()
        return super(LoginView, self).get(request, *args, **kwargs) 
```

和网址：

```
url(r'^login/$', LoginView.as_view(), name='login'), 
```

这解决了我所有的麻烦......关于登录和注销......

登录和注销信号工作正常：

```
from django.contrib.auth.signals import user_logged_out, user_logged_in

# Note, these login and logout signals are registered in imamstats views
def iam_logged_out_actions(sender, user, request, **kwargs):
    try:
        # ... do my logging out actiosn (stats etc.)
    except Exception, e:
        logger.error("Logging logout action error: %s" % e)

# Note, these login and logout signals are registered in imamstats views
def iam_logged_in_actions(sender, user, request, **kwargs):
    try:
        # ... do my log in stats etc. things
    except Exception, e:
        logger.error("Logging login action error: %s" % e) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T19:45:48.313

浏览到stackoverflow ...（又搜索了一次）

我找到了这个：.. 参见[Django 中的 django.contrib.auth.logout](https://stackoverflow.com/questions/11241080/django-contrib-auth-logout-in-django) ..

但更糟糕的是......我发现这......很惊讶......但解释了一切： [Django，Logout_URL doesn't redirect well](https://stackoverflow.com/questions/11933361/django-logout-url-doesnt-redirect-well)

我发现这是一个无法修复的错误 (@##$%%) 不允许在平安夜诅咒....

所以做我的自定义东西的解决方案是在信号中，而不是使用我自己的视图。执行默认视图和重定向...并使用此文档创建信号.. [https://docs.djangoproject.com/en/dev/topics/auth/#login-and-logout-signals](https://docs.djangoproject.com/en/dev/topics/auth/#login-and-logout-signals)

添加信号很容易，我把它放在我的主应用程序（iamapps）的models.py中：

```
import logging
from django.contrib.auth.signals import user_logged_out
from django.contrib.auth.signals import user_logged_in
logger = logging.getLogger(__name__)

def iam_logged_out_actions(sender, user, request, **kwargs):
    #whatever...
    logger.debug("Logging out: user = %s" % user)

user_logged_out.connect(iam_logged_out_actions)

def iam_logged_in_actions(sender, user, request, **kwargs):
    #whatever...
    logger.debug("Logging in: user = %s" % user)

user_logged_in.connect(iam_logged_in_actions) 
```

这有效....但是它不能解决我认为可能导致注销失败的损坏管道...所以在 Firefox 中注销仍然失败...在 chrome 中它可以工作...从 django 注销管理页面在 Firefox 中工作。信号还有另一个优点：同样从管理界面中注销，信号被调用......

为了注销，我现在使用这个 urls.py：

```
 url(r'^logout/$', 'django.contrib.auth.views.logout',  {'next_page': '/'}, name='iamapps.logout'), 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-25T23:49:12.893

我的怀疑是原始注销视图返回一个清除 cookie 或类似内容的响应，而您正在丢弃该响应。您可以尝试像这样简单地将其响应返回给用户吗？

```
def my_logout(request):
    # something...
    return logout(request) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-29T07:53:13.817

经过验证的答案适用于上述版本，但它不再适用于 django 2.2 版本。因此，为了在注销后成功重定向，您必须定义属性。

```
from django.contrib import admin
from django.urls import path, include
from dark_bot import views
from django.contrib.auth import views as v
urlpatterns = [
    path('admin/', admin.site.urls),
    path('', views.index, name="index"),
    path('contact/', views.contact, name="contact"),
    path('search/', include('search.urls')),
    path('user/', include('accounts.urls')),
    path('dashboard/', include('dashboard.urls')),
    path('accounts/login/', v.LoginView.as_view(), name="login"),
    path('accounts/logout/',v.LogoutView.as_view(next_page='/'),name="logout")
    # path('dashboard/', include('dashboard.urls')),
] 
```

这就是你可以看到我将 next_page 属性传递给类 LogoutView 的方式，它将告诉在成功注销后重定向或去哪里。希望这可以帮助某人。快乐编码！

# wcf - 在 vs2012 中运行单元测试之前启动/部署最新版本的 WCF 服务

> ID：14021928
> 
> 赞同：0
> 
> 时间：2012-12-24T13:16:56.953
> 
> 标签：wcf, unit-testing, visual-studio-2012

我希望 VS 在每次运行测试时部署最新版本的 WCF。

目前，我必须手动部署或运行​​ WCF 服务才能部署它。

我正在寻找类似于在调试时启动多个项目的功能。

也许要指定我现在缺少的行为。我无法在 web 服务中设置断点，因为它不是在调试模式下运行的。

*   @codespike 在 VS2012 中使用标准单元测试
*   @codespike 使用 Deploy 我的意思是“将最新版本复制到本地 IIS，以便它可以响应 Web 上的调用。
*   @mayo 是的！这是一个绝妙的建议。绕过编码和解码（webtransport）阶段，直接进入处理数据的类。

# xml - XML xsi:noNamespaceSchemaLocation 路径

> ID：14021931
> 
> 赞同：2
> 
> 时间：2012-12-24T13:17:11.543
> 
> 标签：xml

我有以下 XML：

```
<products xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
          xsi:noNamespaceSchemaLocation='/var/www/html/products.xsd'>
     <product>
          ...
     </product>
</products> 
```

我想用变量'path'替换/var/www/html，例如，它的值是：'/var/www/html'，这样我就可以随时更改它并且仍然拥有xsd文件。那可能吗？它是如何完成的？

# objective-c - Goerzel 算法 - 幅度下降，以及其他问题

> ID：14021935
> 
> 赞同：3
> 
> 时间：2012-12-24T13:17:39.513
> 
> 标签：objective-c, c, math

我正在使用 Goerzel 来识别某个频率。我看到的是它工作得很好——但以一种奇怪的方式——当我输入样本（±500/1024）时，我得到了正确的值——但它们变得越来越低直到零——而频率仍然在那里。所以我得到前：700，而不是缓慢下降..另外，我想让它更具指数 - 所以噪音和频率之间的差异会更高。

什么会导致这个问题，我该如何改进我的代码？谢谢。

```
float goertzel_mag(int16_t* data ,int SAMPLING_RATE ,double TARGET_FREQUENCY,int numSamples )
{
    int     k,i;
    float   floatnumSamples;
    float   omega,sine,cosine,coeff,q0,q1,q2,magnitude,real,imag;

    float   scalingFactor = numSamples / 2.0; // -2

    floatnumSamples = (float) numSamples;
    k = (int) (0.5 + ((floatnumSamples * TARGET_FREQUENCY) / SAMPLING_RATE));
    omega = (2.0 * M_PI * k) / floatnumSamples;
    sine = sin(omega);
    cosine = cos(omega);
    coeff = 2.0 * cosine;
    q0=0;
    q1=0;
    q2=0;

    for(i=0; i<numSamples; i++)
    {
        q0 = coeff * q1 - q2 + data[i];
        q2 = q1;
        q1 = q0;
    }

    real = (q1 - q2 * cosine) / scalingFactor;
    imag = (q2 * sine) / scalingFactor;

    //double theta = atan2 ( imag, real); //PHASE
    magnitude = sqrtf(real*real + imag*imag);
    return magnitude;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T14:29:21.080

经过对Goerzel的大量研究，我发现问题不是他。当我将纯正弦波输入到 mac 并打印出缓冲区时：

```
int16_t *q = (int16_t *)(&bufferList)->mBuffers[0].mData; 
```

它的值变高了，但 5 秒后 - 信号越来越低到零！移动信号源，会使它再次变高，然后再次下降。

对于我所阅读的内容，香奈儿可能会进入饱和状态，这可能会导致问题。

这个 Goerzel 算法非常好。

# java - Java 中的 Active Directory 实现

> ID：14021942
> 
> 赞同：1
> 
> 时间：2012-12-24T13:18:18.720
> 
> 标签：java, active-directory

我想在 java 中执行 Active Directory 身份验证，其中用户名和密码是通过登录屏幕输入的。我们有一个根目录，里面有很多子目录。如何执行身份验证，以便在整个层次结构中搜索用户并执行 LDAP 绑定。如何在 root 内的所有子目录中自动查看用户？

请在下面找到代码片段：

```
 Hashtable<String, String> ldapEnv = new Hashtable<String, String>(11);
                  ldapEnv.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
                  //ldapEnv.put(Context.PROVIDER_URL,  "ldap://127.0.0.1:10389");
                  ldapEnv.put(Context.PROVIDER_URL,  prop.getProperty("ldapServer"));
                  ldapEnv.put(Context.SECURITY_AUTHENTICATION, "simple");
                  ldapEnv.put(Context.SECURITY_PRINCIPAL, "cn="+userName+",ou=Users,ou=ACN,ou=Peterborough,dc=xyz,dc=com");
                  //ldapEnv.put(Context.SECURITY_PRINCIPAL, "uid=admin,ou=system");                
                  ldapEnv.put(Context.SECURITY_CREDENTIALS,password);
                  ldapContext = new InitialDirContext(ldapEnv); 
```

我遇到的问题是因为 Context.SECURITY_PRINCIPAL 是硬编码的，所以搜索只发生在这个不符合我要求的硬编码目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:50:16.590

我见过的大多数实现，使用只读的 Active Directory 来搜索用户的上下文，然后尝试使用用户的完整上下文和提供的密码登录。[这样](https://stackoverflow.com/questions/2172831/how-do-a-ldap-search-authenticate-against-this-ldap-in-java)的事情将帮助您开始搜索部分。

# ember.js - EmberJs：包装 Bootstrap 组件（timepicker）

> ID：14021944
> 
> 赞同：3
> 
> 时间：2012-12-24T13:18:34.337
> 
> 标签：ember.js

我已经在使用 ember-bootstrap 插件（干得好！！）但是我需要在这个 Bootstrap 插件中添加一个时间选择器（https://github.com/jdewit/bootstrap-timepicker）。我还不是 EmberJs 专家...有人可以帮助我用 ember-bootstrap 包装这个时间选择器吗？

**更新：** 我找到了这个没有 ember-bootstrap 插件的解决方案，它可以工作。它是正确的处理方式吗？

```
Bootstrap.TimePicker = Em.ContainerView.create({
  classNames: 'input-append bootstrap-timepicker-component',
  childViews: ['inputView', 'iconView'],
  inputView: Em.TextField.create({
    type: 'text',
    valueBinding: 'App.PassController.storeCard.relevantDate',
    classNames: 'timepicker-default input-small'
  }),
  iconView: Em.View.create({
    tagName: 'span',
    classNames: 'add-on',
    template: Ember.Handlebars.compile('<i class="icon-time"></i>')
  }),
  didInsertElement: function() {
    $('.timepicker-default').timepicker({showSeconds: true, defaultTime: 'value'});
  }
}).append(); 
```

# android - 屏幕底部的 ActionBarSherlock

> ID：14021950
> 
> 赞同：4
> 
> 时间：2012-12-24T13:19:13.073
> 
> 标签：android, menu, android-actionbar, actionbarsherlock

我已经搜索了很多如何将 ActionBarSherlock 定位到屏幕底部，感谢上帝，它可以使用此代码

```
<activity
   android:name=".MyActivity"
   android:uiOptions="splitActionBarWhenNarrow" >
</activity> 
```

但是有一个小问题，标题仍然存在，我也想删除它，所以任何人都可以帮我删除 ActionBarSherlock 的标题

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:23:31.380

splitActionBarWhenNarrow 表示它将被拆分，不会移动到任何地方，并且仅在变窄时。因此，如果您在纵向或宽屏幕中，菜单选项将始终显示在顶部。您不能强制在底部绘制 ActionBar。相反，您可能希望完全禁用 ActionBar，并使用带有 actionButtonStyle 的 ImageButtons 将您自己的自定义视图放在底部

```
<style name="NoActionBar" parent="@android:style/Theme.Holo.Light">
    <item name="android:windowActionBar">false</item>
    <item name="android:windowNoTitle">true</item>
</style> 

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/title"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_toLeftOf="@+id/buttons_holder"
        android:ellipsize="end"
        style="@style/TextAppearance.Sherlock.Widget.ActionBar.Title"/>

    <LinearLayout
        android:id="@+id/buttons_holder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_alignParentRight="true" >

        <ImageButton
            android:id="@+id/acion_add"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_add"
            style="?attr/actionButtonStyle" />

        <ImageButton
            android:id="@+id/action_prev"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_prev"
            style="?attr/actionButtonStyle" />

        <ImageButton
            android:id="@+id/action_next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/menu_label_next"
            style="?attr/actionButtonStyle" />

    </LinearLayout>

</RelativeLayout> 
```

# django - 在 django 中返回单个对象的建议

> ID：14021954
> 
> 赞同：-1
> 
> 时间：2012-12-24T13:19:29.267
> 
> 标签：django

我正在开发在线食品订购服务，并且我已经开发了大部分功能。在请求的那一刻，我希望应用程序能够根据用户的请求返回给定餐厅的菜单。我认为逻辑与主键有关，但我不知道该怎么做。提前谢谢你，祝你圣诞节快乐。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:57:28.010

如果您知道它的 id（或主键） ，则可以使用该`get()`方法从模型中获取单个对象。查看有关如何[使用 get 检索单个对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-a-single-object-with-get)的文档。

# 例如

```
#models.py

class Menu(models.Model):
    title = models.CharField(max_length=50)

#views.py

def get_menu(request, menu_id):
    menu = get_object_or_404(models.Menu, pk=menu_id)
    data = {'menu' : menu}
    return render_to_response('menu.html', data, context_instance=RequestContext(request))

#urls.py

url(r'^menu/(?P<menu_id>\d+)/$', 'yourappname.views.get_menu') 
```

# php - codeigniter 中 url 中的控制器名称大于一个

> ID：14021964
> 
> 赞同：0
> 
> 时间：2012-12-24T13:20:53.633
> 
> 标签：php, codeigniter, url-routing

我有 3 个控制器，分别是家庭、食物和饮料。家庭控制器我想制作默认控制器。我在 routes.php 文件中这样写：

```
 $ route ['default_controller'] = "home";

 $ route ['404_override '] =''; 
```

然后我在每个控制器中编写了如下代码：

控制器 home.php

```
class Home extends CI_Controller{
    public function __construct() {
        parent::__construct();
    }

    public function index(){

    }

    public function info(){

    }
} 
```

控制器 food.php

```
class Food extends CI_Controller{
    public function __construct() {
        parent::__construct();
    }

    public function index(){

    }

    public function foodMenu(){

    }
    public function foodJenis(){

    }

} 
```

控制器drink.php

```
class Drink extends CI_Controller{
    public function __construct() {
        parent::__construct();
    }

    public function index(){

    }

    public function drinkMenu(){

    }
    public function drinkJenis(){

    }

} 
```

我想让这个网址像 www.mydomain.com/home、www.mydomain.com/food、www.mydomain.com/food/foodmenu、www.mydomain.com/food/foodjenis、www.mydomain.com/drink , www.mydomain.com/drink/drinkmenu, www.mydomain.com/drink/drinkjenis。

但是当我在网址 www.mydomain.com/food/foodmenu 上时，我前往 www.mydomain.com/food/foodjenis，但出现的网址是 www.mydomain.com/food/food/foodjenis。**“食物”**控制器名称在 url 中一分为二。如何处理它。请帮我。谢谢你 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:39:38.267

一种解决方法是通过使用`base`标签。

在文档头部的某个地方（在包含任何 css 或 js 之前）放置

```
<base href='http://mysite.com'> 
```

之后，您可以在 CI 应用程序中自由使用相关链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:40:59.793

你怎么做你的链接？

我认为您尝试进行相对链接存在问题，而 html 将食物视为一个文件夹，因此当您将链接设为

```
<a href="food/foodjenis"></a> 
```

它会在你写 www.mydomain.com/food/food/foodjenis 时建立链接

但是如果你使用 CI url

```
 <a href="<? php echo site_url('food/foodjenis') ?>"></a> 
```

它应该像你想要的那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T14:53:06.970

您是否在 CI 的配置文件中设置了基本 url？如果是。尝试使用相对路径。像食物/foodjenis

```
<a href="<? php echo base_url('food/foodjenis') ?>"></a> 
```

# common-lisp - 通用 lisp 中的 #'

> ID：14021965
> 
> 赞同：16
> 
> 时间：2012-12-24T13:21:13.473
> 
> 标签：common-lisp, quote

在 Practical Common Lisp 一书的第 3 章中，有一个类似 SQL 的 select 和 where 函数的示例。这是它的简化版本：

```
(defun where (x) 
   #'(lambda (item)
     (> item x))) 
```

它是这样使用的：

```
(remove-if-not (where 2) (list 1 2 3 4)) 
```

本书前面曾解释过，该`#'`序列用于说明它后跟一个函数名称，而不是需要评估的变量。我不明白为什么这里需要它。我尝试在`where`没有它的情况下实现该功能，并且效果也很好：

```
(defun where (x) 
   (lambda (item)
     (> item x))) 
```

我试着用谷歌搜索它，你可以想象，对于这样一个字符序列，它不是一个很有成效的搜索。而且我不知道这东西的名字。上面的代码中需要它有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T13:42:22.877

这是[Hyperspec](http://clhs.lisp.se/Body/02_dhb.htm)中处理标准宏字符“尖锐”后跟“单引号”的精确页面。

为简单起见，此阅读器宏扩展为将以下形式包含在`(function <form>)`s 表达式中。这有效地告诉解析器该表单是可调用的。

`lambda`是一个宏，它生成的代码已经包含`(function <form>)`，但从历史上看，为了保持一致性，也经常使用从 reader 宏中获得的另一种形式。

这是[在 common lisp 中编写 lambda 表达式](https://stackoverflow.com/questions/13213611/writing-lambda-expressions-in-common-lisp)（另一个 StackOverflow 问题），它深入介绍了`(lambda <form>)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T14:50:28.607

注意：`*print-pretty*`适用`NIL`于这些示例。

```
(defun where (x) 
  #'(lambda (item)
      (> item x))) 
```

在上面的函数`where`中，您正在创建一个匿名函数，并将其作为闭包返回（函数加上变量绑定`X`）。由于您将其作为值返回，因此您必须编写`(FUNCTION (LAMBDA ...))`. `#'(lambda ...)`是一个更短的符号，但结果相同 - 使用阅读器宏`#'`：

```
CL-USER 74 > (read-from-string "#'(lambda (foo) (1+ foo))")
(FUNCTION (LAMBDA (FOO) (1+ FOO))) 
```

你也可以写：

```
(defun where (x) 
  (lambda (item)
    (> item x))) 
```

在 Common Lisp 的定义过程中添加了它以便能够编写上述代码。它也与`(function (lambda ...))`表格相同。在 Common Lisp`LAMBDA`中是宏，它扩展到它：

```
CL-USER 75 > '(lambda (foo) (1+ foo))
(LAMBDA (FOO) (1+ FOO))

CL-USER 76 > (macroexpand '(lambda (foo) (1+ foo)))
(FUNCTION (LAMBDA (FOO) (1+ FOO)))
T 
```

因此，`LAMBDA`是一个宏，当评估者看到它时`(lambda ...)`，它会将表单扩展为一个`(function (lambda ...))`表单，然后对其进行评估。

`FUNCTION`是一种特殊形式，当评估者看到它时，它会返回一个函数对象 - 在`(function (lambda (foo) (1+ foo)))`它返回匿名函数作为对象的情况下：

```
CL-USER 77 > (function (lambda (foo) (1+ foo)))
#<anonymous interpreted function 406000761C> 
```

所以你看到这`(function (lambda ...))`是获取函数对象的真正的 s-expression 符号，并且`#'(lambda ...)`（通过阅读器宏）或`(lambda ...)`（通过宏）都是 Lisp 源代码中的较短符号。程序员使用长格式是不寻常的。大多数（99.999%）在源代码中使用较短的符号之一。

顺便说一句：如果评估器看到`function`包含这样的函数名称`(function sin)`，那么它会查找函数绑定并返回相应的函数对象：

```
CL-USER 78 > (function sin)
#<Function SIN 4110083C6C> 
```

# iis - 在 iis 中写入 xml 时拒绝访问路径

> ID：14021972
> 
> 赞同：0
> 
> 时间：2012-12-24T13:21:58.493
> 
> 标签：iis, access-denied, folder-permissions

```
System.UnauthorizedAccessException: Access to the path 'C:\Inetpub\wwwroot\Spicee    Webservice\App_Data\Employee.xml' is denied.
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32   rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
at System.Xml.XmlTextWriter..ctor(String filename, Encoding encoding)
at ResturantService.InsertDatabaseXML(String servername, String dbusername, String dbpassword, String dbname, String port) 
```

当我尝试编写 xml 文件时出现上述错误。当我从 VS2008 运行代码时，它运行良好。

我知道这与为 iis 文件夹设置的权限有关。但我不想做权限设置手册，因为我们的计划是通过网站部署包分发应用程序，用户不会有手动设置权限的想法。

此外，当我尝试使用以下 iisuser 代码设置文件夹的权限时。

```
 Directory.CreateDirectory(sPathName);
        DirectoryInfo info = new DirectoryInfo(sPathName);
        DirectorySecurity security = info.GetAccessControl();

        security.AddAccessRule(new FileSystemAccessRule(@"TAG1\IUSR_TAG1", FileSystemRights.FullControl, InheritanceFlags.ContainerInherit, PropagationFlags.None, AccessControlType.Allow));
        security.AddAccessRule(new FileSystemAccessRule(@"TAG1\IUSR_TAG1", FileSystemRights.FullControl, InheritanceFlags.ObjectInherit, PropagationFlags.None, AccessControlType.Allow));

        info.SetAccessControl(security); 
```

我得到这个错误。

```
System.UnauthorizedAccessException: Attempted to perform an unauthorized operation.
at System.Security.AccessControl.Win32.SetSecurityInfo(ResourceType type, String name, SafeHandle handle, SecurityInfos securityInformation, SecurityIdentifier owner, SecurityIdentifier group, GenericAcl sacl, GenericAcl dacl)
at System.Security.AccessControl.NativeObjectSecurity.Persist(String name, SafeHandle handle, AccessControlSections includeSections, Object exceptionContext)
at System.Security.AccessControl.NativeObjectSecurity.Persist(String name, AccessControlSections includeSections)
at System.Security.AccessControl.FileSystemSecurity.Persist(String fullPath)
at System.IO.Directory.SetAccessControl(String path, DirectorySecurity directorySecurity)
at System.IO.DirectoryInfo.SetAccessControl(DirectorySecurity directorySecurity)
at ResturantService.InsertDatabaseXML(String servername, String dbusername, String dbpassword, String dbname, String port) 
```

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:40:18.383

好吧，您需要更改用于部署站点的任何内容，以授予用于执行此代码的任何帐户的写入权限，或者您需要将其放在其他地方，或者您需要设置另一个可以执行此操作的帐户，所以你不会把许可发给每个人和他的狗。

这与系统手动工作的方式没有什么不同。如果您以低权限用户身份登录，您不能只为自己分配更高的权限。您必须获得更高级别的授权才能执行此操作。这就像 UAC 命中或 SUDO。

# php - 在 PHP 中检测 Android 浏览器（从 v.1 到 2.3 固件）

> ID：14021976
> 
> 赞同：0
> 
> 时间：2012-12-24T13:22:17.400
> 
> 标签：php, regex, preg-match, browser-detection

我需要检测浏览器是否为 Android（仅从 1 到 2.3 版本），这行得通吗？

```
if(preg_match('/Android [1-2.3]/', $_SERVER['HTTP_USER_AGENT'])) {
 echo 'something';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:37:30.383

以下 Regex 可以完全匹配`Android [1-2.3]`。

`Android ([1](?:\.[0-9])?|[2](?:\.[0-3])?$)`

为了`MSIE [6-8] Android [1-2.3]`

`MSIE [6-8] Android ([1](?:\.[0-9])?|[2](?:\.[0-3])?)$`

[在这里运行正则表达式](http://gskinner.com/RegExr/?337qg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:31:39.987

我真的不知道这些设备的 UserAgent 是什么样的，但是您拥有的模式不太可能是您想要的。我怀疑你想要更多的东西：

```
'/Android (1\.\d|2\.[012])/' 
```

有很多不同的方法可以编写模式，但基本上这个说`Android`需要遵循`1.{any number}`或者`2.0, 2.1 or 2.2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:43:33.290

我想建议您使用 Browscap 进行浏览器检测。

`get_browser`函数文档[http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php)

“实际”browscap .ini 文件下载[http://tempdownloads.browserscap.com](http://tempdownloads.browserscap.com/)

应该注意的是，该项目目前已关闭，并且正在进一步更新有问题的浏览器数据库。

在您的情况下使用示例：

```
$browser = get_browser(null, true);
if (array_key_exists('Platform', $browser) && array_key_exists('Platform_Version', $browser) && $browser['Platform'] == 'Android' && $browser['Platform_Version'] <= 2.3) {
    echo 'Android <2.3 version';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T16:35:19.987

您可以使用以下正则表达式来获取 Android 浏览器版本，无论是 xxx 格式还是 xx 我有一个正则表达式来确定设备是否使用我支持的版本之一（2.3.x +）：

```
/Android ([2].?[3-9].?[0-9]?|[3].?[0-9].?[0-9]?|[4].?[0-9].?[0-9]?)/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-12T20:22:58.263

从 github 我发现这段代码非常有用：[https ://gist.github.com/Abban/3939726](https://gist.github.com/Abban/3939726)

```
if(is_old_android('2.3')) {
  echo 'This device has Android 2.3 or lower';
}

function is_old_android($version = '4.0.0'){
   if(strstr($_SERVER['HTTP_USER_AGENT'], 'Android')){

     preg_match('/Android (\d+(?:\.\d+)+)[;)]/', $_SERVER['HTTP_USER_AGENT'], $matches);

     // $matches[0]= Android 4.1.2;
     // $matches[1]= 4.1.2

        return version_compare($matches[1], $version, '<=');
    }
} 
```

非常有用的功能：[version_compare](http://php.net/version_compare)

# iphone - iOS 本地化 (Localizable.strings) 不起作用

> ID：14021978
> 
> 赞同：6
> 
> 时间：2012-12-24T13:22:20.970
> 
> 标签：iphone, ios, localization

我有一个带有“错误”消息的应用程序。我想翻译这个错误信息。

好的，首先我创建了一个名为“Localizable.strings”的文件。在我写的文件中：

```
"ERR" = "Error"; 
```

然后在我的 .m 文件中我写道：

```
self.label1.text = NSLocalizedString(@"ERR", nil); 
```

这行不通。我还尝试（当然）使文件本地化并添加更多语言。但它不会起作用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-24T13:25:22.963

按照以下[教程](http://www.daveoncode.com/2010/05/15/iphone-applications-localization/)创建语言文件，而不是在填充它们后执行以下操作：

1.  做超清（功能键+shift+k）
2.  重建
3.  删除您的应用
4.  再次安装您的应用

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T18:09:43.370

我有同样的问题。我盯着它看了好几天，直到我偷看应用程序包，发现我的 .strings 文件都没有被复制......

解决方案是创建一个构建阶段来复制字符串文件：（改编自[此处](http://fullscreensoftware.blogspot.co.il/2011/09/xcode-4-and-localizablestrings-issue.html)）

1.  转到目标\构建阶段
2.  单击“添加构建阶段”按钮并选择“复制文件”
3.  在“复制文件”阶段选择“资源”
4.  在项目中添加 Localizable.strings 和任何其他字符串文件。

多田！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-15T16:27:11.917

如果未显示本地化字符串，则 pod 中可能还有另一个 Localizable.strings ，因此：

1 - 将“Localizable.strings”名称更改为 Localized.strings

2 - 将其指定为 tableName 参数

```
let myStr = NSLocalizedString("key", tableName: "Localized", comment: "comment") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-16T10:14:36.390

下面提到的步骤可能会对您有所帮助：

1.  通过右键单击 Xcode 左侧窗格中的文件选择“新建文件”
2.  出现一个窗口，如屏幕截图 1 所示
3.  选择“字符串”文件
4.  将文件重命名为“Localizable.strings”，如屏幕截图 2 所示
5.  以以下格式将所需文本添加到文件中：“newStringItem”=“这是新的字符串项”；

6.  现在文件内容可以用作返回相应字符串的 NSLocalizedString(@"newStringItem", @"") 。

沃拉！完成本地化！

![截图 1](../Images/b8171357618af8f4693b9bb076347e49.png)

![截图 2](../Images/d4268a64922ca10e2358306fa1f2f91b.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T18:01:56.387

如果您按以下方式使用它会发生什么。

```
self.label1.text = [NSString stringWithFormat:@"%@",NSLocalizedString(@"ERR", nil)]; 
```

# c - 两个函数 - 获取字符并处理指针

> ID：14021980
> 
> 赞同：0
> 
> 时间：2012-12-24T13:23:25.450
> 
> 标签：c, pointers, char

在 C 中：我尝试编写 2 个函数，一个是从用户那里获取一行（字符串）并将其发送到另一个函数，该函数从字符串的开头删除（如果存在）空格。

我试图使“remove_space”函数在指针上工作，通过使其指向没有空格的字符串的继续来改变它。

例如：假设用户键入：“hi123”，我将此字符串保存在某个指针中，我想将此指针发送到“remove_space”函数并使指针指向“hi123”而不开始间距...

现在..我对我所看到的指针有一些问题。这就是我写的：

```
void remove_space(char** st1)/**function to remove space**/
{
    char* temp_st = strtok(st1, " ");
    strcpy(st1, temp_st);
}

void read_comp(void)
{
    printf("read_comp FUNCTION\n");
    char* st1; /**read the rest of the input**/ 
    fgets(st1,30,stdin);
    remove_space(st1);
    printf("%s\n",st1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:24:19.210

您尚未分配内存来将字符串存储在`st1`.

```
char st1[30]; 
```

另外，这里不需要`char**`。

```
void remove_space(char *st1)
{
    char *temp_st = strtok(st1, " ");
    strcpy(st1, temp_st);
} 
```

# scala - 如何使用无形拆分Scala列表

> ID：14021983
> 
> 赞同：6
> 
> 时间：2012-12-24T13:23:46.993
> 
> 标签：scala, shapeless

我正在尝试在 N 处拆分大小为 S 的列表，其中已知 N，M 总和为 S。这不会编译：

```
def splitIt[N <: Nat,
            M <: Nat,
            S <: Nat](u: Sized[List[Int], N] {type A = N},
                      v: Sized[List[Int], M] {type A = M},
                      t: Sized[List[Int], S] {type A = S})(implicit sum: SumAux[N, M, S]): Unit = {
  val z = t.splitAt[N]
} 
```

**错误**

```
No implicit view available from List[Int] => scala.collection.GenTraversableLike[S,List[Int]].

not enough arguments for method sizedOps: (implicit evidence$2: List[Int] => scala.collection.GenTraversableLike[S,List[Int]])shapeless.SizedOps[S,List[Int],S]. Unspecified value parameter evidence$2. 
```

**最终正确版本**

```
def splitIt[N <: Nat,
            M <: Nat, S <: Nat](u: Sized[List[Int], N] {type A = Int},
                                v: Sized[List[Int], M] {type A = Int},
                                t: Sized[List[Int], S] {type A = Int})(implicit sum: DiffAux[S, N, M], toInt: ToInt[N]): Unit = {
  val z = t.splitAt[N]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T14:04:32.990

`type` `A`需要是*list 元素的类型*，而不是 size 参数。这就是为什么它试图转换为`GenTraversableLike[A, List[Int]]`. 您需要在每种情况下设置`A`为。`Int`

# linux - 如何使用 awk 在文本文件中显示某些特定字段？

> ID：14021986
> 
> 赞同：3
> 
> 时间：2012-12-24T13:24:06.323
> 
> 标签：linux, bash, awk

我有一个这样的文本文件：

```
1 http 2 3 4 5 
2 dns 3 4 
3 ftp 3 4 5 6 8 
```

我希望输出是这样的：

```
http 2 3 4 5 
dns 3 4 
ftp 3 4 5 6 8 
```

我只想省略该文件中的第一列并且某一行中的字段编号不固定的节点。

我可以使用来实现这个目标`awk`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:29:14.600

你也可以使用 cut: `cut -d' ' -f2-`。

编辑：如果您必须使用 awk，请尝试`awk '{$1=""; print $0}'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T08:27:10.910

```
sed 's/^..//g' your_file 
```

以上应该基于第一个字段始终为单个字符的条件工作。

或在 perl 中：

```
perl -pe 's/^[^\s]*\s//g' your_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:37:31.493

如果您不关心剩余的字段分隔符，您可以这样做：

```
awk '{$1=""}1' filename 
```

（假设文件名是您存储数据的位置）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T17:09:59.450

Drats，我打算给你一个 Awk 解决方案，然后推荐`cut`. 看起来其他人已经打败了我。

但是，我还没有看到`sed`解决方案！

```
$ sed -n `s/^[^ ][^ ]*//p` yourfile.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T13:33:25.380

像这样的东西？

```
awk '{$1 =""; print }' file 
```

# python - Tornado - 如何实现长轮询客户端

> ID：14021987
> 
> 赞同：3
> 
> 时间：2012-12-24T13:24:14.030
> 
> 标签：python, comet, tornado, long-polling

我正在尝试在 Tornado 中实现长拉客户端，它与异步 Tornado 服务器交互。

发生的事情是两件事之一：

1.  客户端超时，或
2.  客户端在完成整个后台进程后立即接收所有消息，类似于阻塞消息

这是我使用的客户端：

```
from tornado import ioloop
from tornado import httpclient

print "\nNon-Blocking AsyncHTTPClient"
import tornado.ioloop

def async_call(response):
        if response.error:
                response.rethrow()
        print "AsyncHTTPClient Response"
        ioloop.IOLoop.instance().stop()

http_client = httpclient.AsyncHTTPClient()
http_client.fetch("http://localhost:9999/text/", async_call)
ioloop.IOLoop.instance().start() 
```

这是编写长轮询/彗星客户端的正确方法吗？

对于那些回答在 Tornado 中提供示例异步服务器的人，我也将不胜感激，因为可能是我错误地编写了彗星 Tornado 服务器......我对整个长轮询过程有点陌生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T16:52:19.430

Tornado 本身有一个很好的聊天示例，建立在长轮询机制之上

[https://github.com/facebook/tornado/tree/master/demos/chat](https://github.com/facebook/tornado/tree/master/demos/chat)

它对我理解一切有很大帮助，它同时具有服务器和客户端。

# jquery - 如何通过标题获取表格上的特定单元格？

> ID：14021989
> 
> 赞同：2
> 
> 时间：2012-12-24T13:24:30.850
> 
> 标签：jquery, jquery-selectors

我想获取我的表格单元格的 .html() 抛出 jQuery 只知道它的 data-col 和 data-row 属性。这是表格：

```
<table>
    <tr>
        <td></td>
        <th data-col="A">Mon</th><th data-col="B">Tue</th>
        <th data-col="C">Wen</th>
    </tr>
    <tr>
        <th data-row="1">Mon</th>
        <td>Something</td>
        <td>Something</td>
        <td>Somthing</td>
    </tr>
    <tr>
        <th data-row="2">Mon</th>
        <td>Something</td>
        <td>Something</td>
        <td>Somthing</td>
    </tr>
    <tr>
        <th data-row="3">Mon</th>
        <td>Something</td>
        <td>Something</td>
        <td>Somthing</td>
    </tr>
</table> 
```

我不知道如何构建这个 jQuery 选择器，例如：`$('table>tbody>tr[data-row=2] td')`但我不知道

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:51:54.280

***[jsBin 演示](http://jsbin.com/ohenat/5/edit)***

```
function getTD(col, row){

   var rowIdx = $('[data-row='+row+']').parent('tr').index() ;
   var colIdx = $('[data-col='+col+']').index() -1;

   return $('tr:eq('+rowIdx+') td:eq('+colIdx+')').html() ; 
}

alert(   getTD('A', '2')    ); 
```

或者你也可以这样做：

**[演示](http://jsbin.com/ohenat/7/edit)**

```
function getTD(c,r) {

  var col = {A:1, B:2, C:3}; // add more if needed

  var colLen = $.map(col, function(n, i) { return i; }).length;
  var cc =  colLen*(r-1) + col[c]; 
  return $('table').find('td').eq(cc).html();

}

alert(   getTD('B', 3)   ); 
```

如果您也使用 Numbers 来检索 COL，那么第二种解决方案的巧妙之处可能会更有趣：

```
function getTD(col,row) {     
  var ind =  (row-1)*3 + col; // 3 is the max N of Cols
  // 'ind' holds the exact index number of our desired TD from our .find() collection
  return $('table').find('td').eq( ind ).html();     
}

// getTD( COL, ROW )
alert(   getTD(2, 3)   ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:39:46.233

解决方案的快速草图：

```
// Param table: the <table> DOM element,
// Param col: the string identifying the column,
// Param row: the string identifying the row
function(table, col, row) {
  col_number = $(table).find("tr").first().find("th[data-col=" + col + "]").index(); 
  row_number = $(table).find("th[data-row=" + row + "]").parent().index(); 
  return $(table).find("tr").eq(row_number).find("td").eq(col_number).val();
} 
```

未经测试，并且可能以各种方式出现错误。尽管如此，在 jQuery 文档的帮助下，总体思路应该是清晰易懂的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:50:31.660

如果您用索引标记 cols，则该解决方案可能比 Confusion 的答案更小更快。

```
/**
 param table - DOM element of table
 param row - row index
 param col - col index
*/
function getData(table, row, col) {
    return $(table).find('tr:nth-child('+(row+1)+')').find('td:nth-child('+(col+1)+')').html();
} 
```

此功能将满足您的需求。

[JS Bin 演示](http://jsbin.com/agadin/1/edit)

# java - 如何转换HashMap > 到数组列表 在java中？

> ID：14021995
> 
> 赞同：0
> 
> 时间：2012-12-24T13:25:18.103
> 
> 标签：java

我用谷歌搜索过，但没有转换`HashMap<String, ArrayList<Class>>`为`ArrayList<Class>`. 有人可以帮我吗？

基本上，我想将下面的方法 getStudentLst 从调用构造函数中更改，并将哈希映射转换为 arrayList，如下所示。我已经尝试了很多次，但它一直在产生错误。我哪里出错了？

```
 ArrayList<Student> arrStudLst = new ArrayList<Student>(hmpStudent.keySet());
  Collectoins.sort(arrStudLst, new Comparator());
  return arrStudLst; 
```

**但它不起作用并生成错误“构造函数 ArrayList(Set) 未定义**

非常感谢任何帮助！亚当

```
/* works well but i want to avoid calling constructor */
public ArrayList<Student> getStudentLst(HashMap<String, ArrayList<Student>> hmpStudent)
{
     ArrayList<Student> arrStudLst = new ArrayList<Student>();   
     Set<String> keylst = hmpStudent.keySet();
     Student student;
     for(String keys: keylst)
     {         
        for(Student f: hmpStudent.get(keys))
        {       
         student = new Student(f.getName(),f.getGrade(), f.getTeacher());                arrStudLst.add(student);
        }
     }
     Collections.sort(arrStudLst,new StudentComparator());
     return arrStudLst;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:30:04.523

您尝试使用地图的键初始化列表。但是键是字符串，它们不是学生。

您需要返回一个列表，其中包含地图每个值中的每个学生。所以代码是：

```
Set<Student> allStudents = new HashSet<Student>(); // use a set to avoid duplicate students
for (List<Student> list : map.values()) {
    allStudents.addAll(list);
}
List<Student> allStudentsAsList = new ArrayList<Student>(allStudents); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:43:11.900

键是一个字符串，所以 `hmpStudent.keySet()`会返回一个`List<String>`而不是一个`List<Student>`

```
 new ArrayList<Student>(hmpStudent.keySet()); 
```

因此，上述语句将失败。您可以使用下面提到的方法

```
public List<Student> getAllStudents(Map<String, ArrayList<Student> map){
   List<Student> allStudents = new ArrayList<Student>();
   for (List<Student> list : map.values()) {
       allStudents.addAll(list);
   }
   return allStudents;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T17:32:15.157

如果您`ArrayList`的地图很大但地图中的元素较少，那么您可以尝试这样做。

```
public ArrayList<Student> getStudentLst(HashMap<String, ArrayList<Student>> hmpStudent)
{
   List<Student> arrStudLst = new ArrayList<Student>();
   for(ArrayList<Student> studentLst : hmpStudent.values()) {
       arrStudLst.addAll(studentLst);
   }
     Collections.sort(arrStudLst,new StudentComparator());
     return arrStudLst;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:30:15.010

我可以试试

```
ArrayList<MyClass> list = new ArrayList<>();
for (ArrayList<MyClass> l : map.values()) {
    list.addAll(l);
} 
```

# postgresql - SSL模式下使用psql连接PostgreSQL

> ID：14021998
> 
> 赞同：99
> 
> 时间：2012-12-24T13:25:31.090
> 
> 标签：postgresql, ssl, ssl-certificate, postgresql-8.4

我正在尝试为 PostgreSQL 服务器配置 ssl 证书。我在数据目录中创建了一个证书文件（server.crt）和密钥（server.key），并将参数 SSL 更新为“on”以启用安全连接。

我只希望服务器在客户端使用服务器证书进行身份验证，并且不需要服务器端客户端的真实性。我使用 psql 作为客户端来连接和执行命令。

我正在使用 PostgreSQL 8.4 和 Linux。我尝试使用以下命令连接到启用 SSL 的服务器

```
 psql "postgresql://localhost:2345/postgres?sslmode=require" 
```

但我得到

```
 psql: invalid connection option "postgresql://localhost:2345/postgres?sslmode" 
```

这里做错了什么？我尝试连接到启用 SSL 模式的服务器的方式是否正确？只验证服务器而不验证客户端是否可以？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-12-24T14:17:21.803

`psql`9.2 以下的选项不接受这种类似 URL 的语法。

SSL 的使用可以通过`sslmode=value`命令行上的选项或[PGSSLMODE](http://www.postgresql.org/docs/8.4/static/libpq-connect.html#LIBPQ-CONNECT-SSLMODE)环境变量来驱动，但默认情况下`prefer`，SSL 连接将首先自动尝试，无需指定任何内容。

带有 conninfo 字符串的示例（**针对 psql 8.4 更新**）

```
psql "sslmode=require host=localhost dbname=test" 
```

阅读[手册页](http://www.postgresql.org/docs/8.4/static/app-psql.html)以获取更多选项。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-05-13T15:07:36.693

```
psql --set=sslmode=require -h localhost -p 2345 -U thirunas \
-d postgres -f test_schema.ddl 
```

另一个安全连接到 Azure 托管 Postgres 数据库的示例：

```
psql --file=product_data.sql --host=hostname.postgres.database.azure.com --port=5432 \
--username=postgres@postgres-esprit --dbname=product_data \
--set=sslmode=verify-full --set=sslrootcert=/opt/ssl/BaltimoreCyberTrustRoot.crt.pem 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-10-03T08:11:08.953

发现以下选项可用于为自签名 postgres 实例提供所有文件

```
psql "host={hostname} sslmode=prefer sslrootcert={ca-cert.pem} sslcert={client-cert.pem} sslkey={client-key.pem} port={port} user={user} dbname={db}" 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-07-08T09:20:14.297

在 psql 客户端 v12 上，我无法在 psql 客户端中找到激活`sslmode=verify-full`.

我最终使用了环境变量：

```
PGSSLMODE=verify-full PGSSLROOTCERT=server-ca.pem psql -h your_host -U your_user -W -d your_db 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-01-03T18:45:28.053

好吧，如果连接需要在 SSL 模式下，您可以在 CLI 中使用以下命令提供所有信息：

```
psql "sslmode=verify-ca sslrootcert=server-ca.pem sslcert=client-cert.pem sslkey=client-key.pem hostaddr=your_host port=5432 user=your_user dbname=your_db" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-10T11:34:20.687

> `psql "sslmode=require host=localhost port=2345 dbname=postgres" --username=some_user`

根据[postgres psql 文档](http://www.postgresql.org/docs/8.4/static/app-psql.html)，只有连接参数应该放在 conninfo 字符串中（这就是为什么在我们的示例中，--username 不在该字符串中）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-06T16:41:10.737

```
psql -h <host> -p <port> -U <user> -d <db> 
```

并更新`/var/lib/pgsql/10/data/pg_hba.conf`以将 auth 方法更改为`cert`. 检查以下链接以获取更多信息：

[https://www.postgresql.org/docs/9.1/auth-pg-hba-conf.html](https://www.postgresql.org/docs/9.1/auth-pg-hba-conf.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-16T21:35:17.920

另一个适用于 v8 的模式是

> psql -h 主机名 -p 端口 -U 用户名 "dbname=db sslmode=require"

# java - 以 $ 开头的 hasmap 键上的 replaceAll

> ID：14021999
> 
> 赞同：0
> 
> 时间：2012-12-24T13:25:35.870
> 
> 标签：java, regex, hashmap

我将值存储在键/值哈希图中。当键的值以 $ 开头时，我执行了一个正则表达式 replaceAll 调用，会引发异常。知道为什么以及如何防止这种异常吗？当值包含/以“普通”文本开头时没有错误

```
public static String ReplaceVariables(String argumentValue){
    Pattern p = Pattern.compile("\\$\\{.*?\\}"); // find any text surrendered by "${" and "}"
    while (true)
    {
        Matcher m = p.matcher(argumentValue);
        if (!m.find()){
            break; // no match found
        }
        String varName = m.group();
        String varValue = GlobalUtilities.getVariable(varName); //get the hashmap value of the "varName" key
        argumentValue = m.replaceAll(varValue); // replace all ${....} found by its hashmap value
    }
    return argumentValue; // return the new string
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T14:19:40.873

我必须在以 $ 开头时将“\”添加到返回的键值中，并将 .replaceAll 更改为 .replaceFirst :)

谢谢各位的提示！