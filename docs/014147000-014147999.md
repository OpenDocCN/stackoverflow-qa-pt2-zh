# StackOverflow 问答 14147000-14147999

# java - Joda - DateTimeFormat - 根据默认区域设置切换“MM”和“dd”的位置

> ID：14147000
> 
> 赞同：1
> 
> 时间：2013-01-03T20:47:27.320
> 
> 标签：java, android, jodatime, datetime-format

我有 LocalDate，我想以 2 位数字、全年和“-”作为分隔符打印日期。

当然我可以这样使用：

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("dd-MM-yyyy");
dtf.print(localDate); 
```

它显示：

```
17-09-2012
18-09-2012
19-09-2012 
```

但这仅适用于我的语言环境，其他人呢？例如美国应该是：

```
09-17-2012
09-18-2012
09-19-2012 
```

这个怎么做？

有

```
DateTimeFormatter dtf = DateTimeFormat.shortDate(); 
```

它会自行切换日期和月份的位置。但它只打印：

```
(my locale):
17/9/12
18/9/12
19/9/12
(USA locale):
9/17/12
9/18/12
9/19/12 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T20:53:55.733

从[DateTimeFormatter API](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html)：

> // 使用默认值打印（默认区域设置、日期时间的年表/区域）
> String dateStr = formatter.print(dt);
> // 使用法语语言环境进行打印
> String dateStr = formatter.withLocale(Locale.FRENCH).print(dt);
> // 使用 UTC 区域进行打印
> String dateStr = formatter.withZone(DateTimeZone.UTC).print(dt);

因此，您可以将 Locale 或 DateTimeZone 与 DateTimeFormatter 一起使用。

但是，由于设置了模式，输出仍然是相同的。

您可以`DateTimeFormatter`改为使用样式定义您的：

```
DateTimeFormatter dtf = DateTimeFormat.forStyle("M-"); 
```

并使用语言环境打印。

# java - 对 EJB 缓存满异常进行故障排除

> ID：14147004
> 
> 赞同：0
> 
> 时间：2013-01-03T20:47:51.367
> 
> 标签：java, ejb, weblogic, ejb-2.x, weblogic8.x

参考问题：： [EJB weblogic.ejb20.cache.CacheFullException](https://stackoverflow.com/questions/11882509/ejb-weblogic-ejb20-cache-cachefullexception?rq=1)

我试图了解 EJB 容器如何管理实体 bean，我知道对 EJBHome 对象的 create/finder 方法调用会导致 Bean 实例加载到缓存中，但是是否有任何其他操作/配置导致加载 bean缓存（例如：容器管理的关系）？

我还在 weblogic 控制台中看到了非常高的缓存访问计数（百万）值。如何将这些值追溯到代码？

我将 max-beans-in-cache 设置为 8000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:14:23.443

这个链接解释了一点，但我可能已经知道这个[http://docs.oracle.com/cd/E11035_01/wls100/perform/EJBTuning.html#wp1143320](http://docs.oracle.com/cd/E11035_01/wls100/perform/EJBTuning.html#wp1143320)

需要注意的是，每个实体 bean 都映射到数据库中的一条记录，因此使用 8000 的 max-beans-in-cache 可以有效地存储最多 8000 条不同的记录。根据您选择的并发策略，您甚至可以拥有少于 8000 个唯一记录，因为允许缓存存储具有相同主键的多个 ejb 实例。

从代码的角度来看，我认为对 ejbActivate() 的调用将使用缓存中的现有 bean 或将池中的 bean 放入缓存中。因此，您可以在 ejbactivate 中尝试一些日志记录方法来计算它被访问的次数。不过我不确定。

如果您的缓存访问计数以百万计，但是缓存命中和未命中计数呢？使用 8000 作为 Cache 值，Cache Hits 是否足够成功。

# ftp - PureFtpd 被动端口范围不向客户端提供侦听地址

> ID：14147007
> 
> 赞同：-1
> 
> 时间：2013-01-03T20:47:57.943
> 
> 标签：ftp, nat, ftps, passive-mode

我正在尝试在防火墙后面配置我的 pureftpd 以充当被动 ftp/TLS 服务器。代理机器：

*   服务器：192.168.3.220（内部网络，默认路由到路由器192.168.3.1） 配置：pureftpd with PassivePorts 64000 64300，MasqueradeAddress ww.xx.yy.zz（这个在路由器上配置）
*   路由器：内部：192.168.3.1，DNAT 规则（PREROUTING 链）ww.xx.yy.zz tcp/21,64000:64300 NAT 到地址 192.168.3.220，FORWARD 链双向接受这些数据包。
*   Client1：固定公网IP的外部服务器
*   Client2：某处经过 NAT 的机器 - 在 192.168.5.x 网络上

**场景1：**

```
- Client1: connect OK, login OK, command 'ls':
gets OK, after PASV:

---> PASV
GNUTLS: REC[0x28ecce0]: Sending Packet[9] Application Data(23) with length: 6
GNUTLS: REC[0x28ecce0]: Sent Packet[10] Application Data(23) with length: 37
GNUTLS: ASSERT: gnutls_buffers.c:322
GNUTLS: ASSERT: gnutls_buffers.c:322
GNUTLS: REC[0x28ecce0]: Expected Packet[9] Application Data(23) with length: 65536
GNUTLS: REC[0x28ecce0]: Received Packet[9] Application Data(23) with length: 64
GNUTLS: REC[0x28ecce0]: Decrypted Packet[9] Application Data(23) with length: 31
<--- 200 Protection set to Private
---> LIST
---> ABOR 
```

有趣的事情：来自服务器的 227，我在 pureftpd 的偏执日志中看到，我在客户端上没有看到 - 只有 200 保护设置为 Private ...等待 cca 30 秒并使用 ACTIVE(!!) 模式重新连接 -> ls

**场景2**：

```
- using Client2 (sorry for czech locales):
---> USER xxxxxx
<--- 331 Password required for xxxxxx
---> PASS XXXX
<--- 230 User xxxxxx logged in    
---> PWD
<--- 230 Ls oi a:2013-01-03 21:19:00
---> PBSZ 0
<--- 257 "/" is the current directory
---> PROT P
<--- 200 PBSZ 0 successful
---> PASV
<--- 200 Protection set to Private
---> LIST
---> ABOR
---- Přerušený datový socket bude uzavřen (means closing data socket)
---- Řídicí socket bude uzavřen (means closing control socket)
---- Pasivní režim bude vypnut (means Passive will be turned off)
---- dns cache hit                                    
---- Navazuje se spojení na ftp1.xxxxxxxxx.cz (ww.xx.yy.zz) port 21
<--- 220 ww.xx.yy.zz FTP server ready 
```

...

```
---> USER xxxxxx
<--- 331 Password required for xxxxxx
---> PASS XXXX
<--- 230 User xxxxxx logged in    
---> PWD
<--- 230 Ls oi a:2013-01-03 21:19:22
---> PBSZ 0
<--- 257 "/" is the current directory
---> PROT P
<--- 200 PBSZ 0 successful
---> PORT 192,168,5,xx,185,136
<--- 200 Protection set to Private
---> LIST
<--- 500 Illegal PORT command
---- Closing data socket
---> QUIT
ls: Nepřekonatelná chyba: 500 Illegal PORT command
<--- 425 Unable to build data connection: Connection refused 
```

NAT 机器上的 iptables 不会增加我在端口 64000:64300 上的记帐计数器，所以我希望根本没有被动连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:22:22.620

所以......真正的问题是第二个 230 回复：

```
 ---> PWD
 <--- 230 Ls oi a:2013-01-03 21:19:22 
```

这是 PureFTPd 1.3.3a（默认 debian 压缩）的一个已知问题 解决方案是从 wheezy (1.3.4a-2) 编译 PureFTPd，现在一切正常。谢谢大家，谁试图弄清楚发生了什么。病毒学

# php - 将参数传递给新窗口php

> ID：14147011
> 
> 赞同：1
> 
> 时间：2013-01-03T20:48:08.623
> 
> 标签：php, javascript, window

我正在使用 js 从我的主页打开一个新的 php 页面：

```
window.open ('second.php','_self',false); 
```

我在父页面上有一个字符串`tmpstr`，如何访问`tmpstr`second.php 的值？我不能使用`GET`，因为字符串很大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T20:49:55.417

您可以将其存储在 $_SESSION 变量中。

```
$_SESSION["passedParameter"] = $hugeString; 
```

然后，在第二页上，您可以使用

```
$hugeString = $_SESSION["passedParameter"]; 
```

只是不要忘记`session_start();`在两个页面的开头添加，以使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:00:07.930

`window.opener`在 javascript 中使用该属性

在第一页

```
window.tmpstr = tmpstr;
window.open ('second.php','_self',false); 
```

在 second.php 中

```
alert(window.opener.tmpstr) 
```

我假设您想在 javascript 中访问它，而不是在 php 中。

# r - R中的自定义na.action

> ID：14147014
> 
> 赞同：4
> 
> 时间：2013-01-03T20:48:35.970
> 
> 标签：r

我目前正在尝试在包含一些缺失 ( `NA`) 值的数据集上构建 LDA 模型。例如，我想估算值的平均值`NA`。据我了解，我可以设置and函数，`na.action=na.omit`这些函数将在构建模型时删除观察结果，并在进行预测时强制返回。`lda``predict``NA`

```
my.dat <- as.data.frame(cbind(
    c(0, 1, 0, 1, 1, 0),
    c(5, 8, 9, 1, -1, NA),
    c(-2.4, -4.0, -4.4, -0.5, 0.7, -0.3)
))
mod <- lda(my.dat[,-1], my.dat[,1], na.action=na.omit)
predict(mod, my.dat[,-1], na.action=na.omit) 
```

但我现在想估算我`NA`有价值的手段。所以，我可以定义自己的`na.impute`功能。但是，我无法理解传递给此函数的内容以及需要返回的内容。

```
na.impute <- function (object) {
    print(object)
    object
} 
```

这给了我输出：

```
[1] g x
<0 rows> (or 0-length row.names) 
```

这对我来说没有多大意义。我在文档中找不到任何指导。究竟是什么`object`，我应该如何操作它来覆盖 NA 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:54:46.963

这是找出什么是的第一种方法`object`：

```
na.impute <- function (object) {
  browser()
  print(object)
  object
}

lda(my.dat[,-1], my.dat[,1], na.action=na.impute)
# Called from: na.action(structure(list(g = grouping, x = x), class = "data.frame"))
Browse[1]> str(object)
# 'data.frame': 0 obs. of  2 variables:
#  $ g: num  0 1 0 1 1 0
#  $ x: matrix [1:6, 1:2] 5 8 9 1 -1 NA -2.4 -4 -4.4 -0.5 ...
#   ..- attr(*, "dimnames")=List of 2
#   .. ..$ : NULL
#   .. ..$ : chr  "V2" "V3"
Browse[1]> object$g
# [1] 0 1 0 1 1 0
Browse[1]> object$x
#      V2   V3
# [1,]  5 -2.4
# [2,]  8 -4.0
# [3,]  9 -4.4
# [4,]  1 -0.5
# [5,] -1  0.7
# [6,] NA -0.3
# attr(,"class")
# [1] "matrix" 
```

所以它确实是一个不寻常的对象：`structure(list(g = grouping, x = x), class = "data.frame")`。另一种看待这一点的方式，让我们检查函数`lda`：

```
lda
# function (x, ...) 
# UseMethod("lda")
# <bytecode: 0x0e3583fc>
# <environment: namespace:MASS>
methods(lda)
# [1] lda.collapsed.gibbs.sampler lda.data.frame*             lda.default*               
# [4] lda.formula*                lda.matrix*                
# 
#    Non-visible functions are asterisked 
```

在这种情况下，我们对`lda.data.frame`. 由于它带有星号，我们必须使用或者`MASS:::lda.data.frame`查看`getAnywhere("lda.data.frame")`源代码：

```
function (x, ...) 
{
    res <- lda(structure(data.matrix(x), class = "matrix"), ...)
    cl <- match.call()
    cl[[1L]] <- as.name("lda")
    res$call <- cl
    res
}
<bytecode: 0x067c3248>
<environment: namespace:MASS> 
```

现在我们可以看到这`lda.matrix`是需要的，所以再次使用两个函数之一：

```
function (x, grouping, ..., subset, na.action) 
{
    if (!missing(subset)) {
        x <- x[subset, , drop = FALSE]
        grouping <- grouping[subset]
    }
    if (!missing(na.action)) {
        dfr <- na.action(structure(list(g = grouping, x = x), 
            class = "data.frame"))
        grouping <- dfr$g
        x <- dfr$x
    }
    res <- lda.default(x, grouping, ...)
    cl <- match.call()
    cl[[1L]] <- as.name("lda")
    res$call <- cl
    res
}
<bytecode: 0x067bf7b8>
<environment: namespace:MASS> 
```

最后在这里我们找到了`na.action`我们所期望的调用。现在这是一个`NA`用列手段替换值的函数：

```
na.impute <- function (object) {
  temp <- object$x
  k <- which(is.na(temp), arr.ind = TRUE)
  temp[k] <- colMeans(temp, na.rm = TRUE)[k[, 2]]
  structure(list(g = object$g, x = as.matrix(temp)), class = "data.frame")
}
lda(my.dat[,-1], my.dat[,1], na.action=na.impute)
# Call:
# lda(my.dat[, -1], my.dat[, 1], na.action = na.impute)
#
# Prior probabilities of groups:
#   0   1 
# 0.5 0.5 
#
# Group means:
#         V2        V3
# 0 6.133333 -2.366667
# 1 2.666667 -1.266667
#
# Coefficients of linear discriminants:
#           LD1
# V2 -0.8155124
# V3 -1.1614265 
```

现在考虑`predict`它`na.action`是不可用的选项：请参阅`getAnywhere("predict.lda")`，没有使用此参数。

# .htaccess - .htaccess 单变量 url 重写

> ID：14147015
> 
> 赞同：3
> 
> 时间：2013-01-03T20:48:38.627
> 
> 标签：.htaccess, mod-rewrite

我正在尝试使用 htaccess将[http://test.pearlsquirrel.com/explore_all?u=hiphop](http://test.pearlsquirrel.com/explore_all?u=hiphop)重定向到[http://test.pearlsquirrel.com/explore_all/hiphop 。](http://test.pearlsquirrel.com/explore_all/hiphop)但是，它一直在这里重定向：[http](http://test.pearlsquirrel.com/explore_all/?u=site_error.php) ://test.pearlsquirrel.com/explore_all/?u=site_error.php 。我在 Stackoverflow 上到处寻找答案，但我似乎找不到它。我真的很感激在解决这个问题方面的一些帮助，谢谢！

这是我的 .htaccess 文件

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.pearlsquirrel.com$ [NC]
RewriteRule ^(.*)$ http://pearlsquirrel.com/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php

RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+) explore_all?u=$1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:01:18.097

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING}  [^=]+=([^=]+)
RewriteRule .* /%1? [L] 
```

将映射此：

`http://test.pearlsquirrel.com/explore_all?u=hiphop`

对此：

`http://test.pearlsquirrel.com/explore_all/hiphop`

用这个替换 .htaccess 文件中的相应代码。

我没有检查您的 .htaccess 文件中的规则。

**选项**

现在，如果它是相反的方式，我认为是这样，并且想法是映射这个传入的 URL：

`http://test.pearlsquirrel.com/explore_all/hiphop`

到这个资源：

`http://test.pearlsquirrel.com/explore_all?u=hiphop`

用这个替换上面的规则集：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  .*/([^/]+)/?
RewriteRule .* http://test.pearlsquirrel.com/explore_all?u=%1 [L] 
```

# asp.net - 总结历史正常运行时间数据

> ID：14147017
> 
> 赞同：4
> 
> 时间：2013-01-03T20:48:41.423
> 
> 标签：asp.net, sql-server, sql-server-2012

我正在完成我的第一个 asp.net 网络应用程序，但遇到了一个难题。该网络应用程序旨在测试全国各地的网络设备并记录响应时间。Windows 服务会定期检查这些设备，通常每 1-10 分钟一次。然后将每次检查的结果记录在采用这种设计的 SQL Server 表中。（当设备关闭时，ResponseTime 为 NULL。）

```
CREATE TABLE [dbo].[DeviceStatuses] (

[DeviceStatusID] INT      IDENTITY (1, 1) NOT NULL,
[DeviceID]       INT      NOT NULL,
[StatusTime]     DATETIME NULL,
[ResponseTime]   INT      NULL,
CONSTRAINT [PK_DeviceStatuses] PRIMARY KEY CLUSTERED ([DeviceStatusID] ASC),
CONSTRAINT [FK_DeviceStatuses_Devices] FOREIGN KEY ([DeviceID]) REFERENCES [dbo].[Devices] ([DeviceID])
); 
```

该服务已经运行了几个月，设备数量最少，表有大约 500,000 行。客户希望能够访问每台设备的 3 个月滚动停机时间摘要。类似于以下内容：

停机时间：
12/11/2012 3:20 PM - 3:42 PM
12/20/2012 1:00 AM - 9:00 AM

据我所知，我需要获取每个 NULL ResponseTimes 块的开始和结束的 StatusTime，当然对于特定的 DeviceID。我在 Google 和 StackOverflow 上进行了多次搜索，但没有找到任何类似于我正在尝试做的事情。（也许我没有使用正确的搜索词。）我的兄弟，一个更有经验的程序员，建议我可以在 SQL Server 中使用 CURSOR，尽管他承认 CURSOR 性能很糟糕，需要一个计划任务。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:10:19.720

```
declare  @DeviceStatuses table(

[DeviceStatusID] INT      IDENTITY (1, 1) NOT NULL,
[DeviceID]       INT      NOT NULL,
[StatusTime]     DATETIME NULL,
[ResponseTime]   INT      NULL)

Insert into @DeviceStatuses([DeviceID],[StatusTime],[ResponseTime])
Values
(1,'20120101 10:10',2),(1,'20120101 10:12',NULL),(1,'20120101 10:14',2),
(1,'20120102 10:10',2),(1,'20120102 10:12',NULL),(1,'20120102 10:14',2),
(2,'20120101 10:10',2),(2,'20120101 10:12',NULL),(2,'20120101 10:14',2),
(2,'20120101 10:19',2),(2,'20120101 10:20',NULL),(2,'20120101 10:21',NULL),(2,'20120101 10:22',2),
(2,'20120102 10:10',2),(2,'20120102 10:12',NULL),(2,'20120102 10:14',2);

Select [DeviceID],MIN([StatusTime]) as StartDown,MAX([StatusTime]) as EndDown
from
(
Select [DeviceID],[StatusTime]
,(Select MAX([StatusTime]) from @DeviceStatuses s2 where s2.DeviceID=s1.DeviceID and s2.StatusTime<s1.StatusTime and s2.ResponseTime is not null) as gr
from @DeviceStatuses s1
where s1.ResponseTime is null
)a
Group by [DeviceID],gr
order by [DeviceID],gr 
```

# c++ - ::new 是什么意思？

> ID：14147029
> 
> 赞同：8
> 
> 时间：2013-01-03T20:49:18.787
> 
> 标签：c++, new-operator, scope-resolution

检查 MS directX 11 DXUT 示例时，出现以下代码：

```
template<typename TYPE> HRESULT CGrowableArray <TYPE>::SetSize( int nNewMaxSize )
{
int nOldSize = m_nSize;

if( nOldSize > nNewMaxSize )
{
    assert( m_pData );
    if( m_pData )
    {
        // Removing elements. Call dtor.

        for( int i = nNewMaxSize; i < nOldSize; ++i )
            m_pData[i].~TYPE();
    }
}

// Adjust buffer.  Note that there's no need to check for error
// since if it happens, nOldSize == nNewMaxSize will be true.)
HRESULT hr = SetSizeInternal( nNewMaxSize );

if( nOldSize < nNewMaxSize )
{
    assert( m_pData );
    if( m_pData )
    {
        // Adding elements. Call ctor.

        for( int i = nOldSize; i < nNewMaxSize; ++i )
            ::new ( &m_pData[i] ) TYPE;
    }
}

return hr;
} 
```

这可以在我的 DXSDK 版本（2010 年 6 月）的第 428 行的 DXUTmisc.h 中找到。我想知道**::new**的事情....我正在尝试谷歌并搜索堆栈溢出，但是当我在搜索栏中键入“::new”时，搜索引擎似乎正在丢弃两个冒号... .

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T20:54:03.327

The `::new` call means that the program is trying to use the global `new` operator to allocate space, rather than using any `new` operator that was defined at class or namespace scope. In particular, this code is trying to use something called *[placement `new`](http://en.wikipedia.org/wiki/Placement_syntax)* in which the object being created is placed at a specific location in memory. By explicitly calling back up into the global scope, the function ensures that this correctly uses placement new and doesn't accidentally call a different allocation function introduced somewhere in the scope chain.

Hope this helps!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T20:53:22.410

::new 确保调用全局的 new 运算符，即标准的 new 运算符。注意:: 之前的 new 表示全局范围。

# javascript - 如何轮询 Javascript Windows 8 应用程序中的后退按钮？

> ID：14147032
> 
> 赞同：0
> 
> 时间：2013-01-03T20:49:33.163
> 
> 标签：javascript, windows-8, navigation

我正在尝试将页面导航合并到我的 Windows 8 应用程序中。我现在有两个页面，我可以从主页转到开始页面。两个页面都有不同的背景。当我从主页导航到开始页面时，背景会发生变化，但是当我按下后退按钮时，背景仍然是开始页面背景而不是主页背景。我需要能够轮询 Windows 8 内置的后退按钮，以便我可以重新加载我拥有的 home.html 文件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:57:41.660

命名空间有`WinJS.Navigation`一个`canGoForward`并`canGoBack`允许您检测此状态。

您还可以更新导航实现的实现以更改该背景。

# javascript - 淘汰验证自定义消息模板的问题

> ID：14147034
> 
> 赞同：11
> 
> 时间：2013-01-03T20:49:45.840
> 
> 标签：javascript, knockout-validation

我没有使用 Knockout Validation，我正在尝试了解可以用它做什么。

我试图弄清楚当出现错误时是否可以在输入标签的右侧显示图标而不是错误消息。而且，如果用户将鼠标悬停在图标上，则会显示错误消息。

有没有人这样做或知道如何做到这一点？

谢谢。

编辑：（我正在尝试做的更详细的示例）

假设我的视图模型中有以下内容：

```
var firstName = ko.observable().extend({required: true}); 
```

我的 HTML：

```
<input data-bind="value: firstName" /> 
```

我的理解是，如果名字文本框留空，那么（默认情况下）一些文本将显示在文本框的右侧，说明该字段是必需的。

我想了解的是如何将在右侧显示错误**文本**的默认行为更改为在右侧显示一个**图标**，当将鼠标悬停在该图标上时，将弹出错误消息。

所以，开始会是这样的：

```
<div data-bind="validationOptions: {messageTemplate: 'myCustomTemplate'}">    
    <input data-bind="value: firstName" />
    <input data-bind="value: lastName" /> //also required
</div>
<div id='myCustomTemplate'>
    //This icon should only display when there is an error
    <span class="ui-icon ui-icon-alert" style="display: inline-block"/>

    //css/javascript would display this when user hovers over the above icon
    <span data-bind="validationMessage: field"  />  
</div> 
```

我不知道我是否正确使用了 messageTemplate 功能。我也不知道在 customTemplate 中将文本绑定到什么，以便为每个错误显示正确的错误消息。IOW、firstname 和 lastname 可能有自定义错误消息。如果他们都使用相同的模板，模板如何容纳自定义错误消息？

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T14:03:11.820

可以显示图标并在悬停时显示错误消息。

在一个项目中，我们正在做类似的事情。我们显示带有错误编号的标记，但我们使用 decorateElement 突出显示字段，并使用 errorsAsTitleOnModified 来显示悬停在输入上时的错误。

要创建错误消息模板，您应该将模板包装在脚本标记中。它的工作方式类似于[ko 模板绑定](http://knockoutjs.com/documentation/template-binding.html)的模板。

在模板中，您可以通过引用“字段”来访问经过验证的 observable。错误消息存储在 observable 的属性 'error' 中。

```
<script type="text/html" id="myCustomTemplate">
    <span data-bind="if: field.isModified() && !field.isValid(), 
                     attr: { title: field.error }">X</span>
</script> 
```

我创建了一个小提琴来展示这一点：http: [//jsfiddle.net/nuDJ3/180/](http://jsfiddle.net/nuDJ3/180/)

# json - 使用 JSONP 技术从 Geonames API 加载国家标志

> ID：14147041
> 
> 赞同：16
> 
> 时间：2013-01-03T20:50:08.563
> 
> 标签：json, web-services, api, jsonp, country-codes

这个`Request.JSON` [http://mootools.net/demos/?demo=Request.JSON](http://mootools.net/demos/?demo=Request.JSON)以这样的方式使用 JSON 数据，

```
var data = {"previews":[
  {"Countrycode":"us", "src":"us.jpg", "description":"desc will be here"},
  {"Countrycode":"uk", "src":"uk.jpg", "description":"desc will be here"},
]}; 
```

在上面的方法中，我们使用`Countrycode`&`images`通过写我们自己的每个图像的名称。

我正在寻找一种`Geonames`通过[http://api.geonames.org/export/geonamesData.js?username=orakzai](http://api.geonames.org/export/geonamesData.js?username=orakzai)检索`Countrycode`和`CountryFlags`通过[http://www.geonames.org/flags/x/xx.gif](http://www.geonames.org/flags/x/xx.gif)使用的方法其中 xx 是 2 个字母的 ISO 国家代码

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-03T21:07:13.770

标志作为 GIF 文件而不是任何类型的 JSON 返回。你会用

```
<img id='myImage' src="http://www.geonames.org/flags/x/??.gif" /> 
```

但是填?? 使用 geonames 使用的国家/地区代码。

您可以将标签放在页面中的某处并使用一些 javascript 将 URL 更改为您计算的 URL，或者您可以在服务器上计算 URL 并在创建 HTML 页面时将其插入。

如果您想在 javascript 中执行此操作，例如，在 jQuery 中，您将有类似这样的内容来更改已加载的 id='myImage' 图像标签上的 URL

```
 $("#myImage").attr('src', "http://www.geonames.org/flags/x/" + countryCode + ".gif") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-27T04:52:16.737

类似的服务，例如 geonames.org：

```
var country_code = 'uk',
  img_uri = 'https://flagpedia.net/data/flags/normal/' + country_code + '.png';
```

# java - SetWebViewClient 错误

> ID：14147044
> 
> 赞同：1
> 
> 时间：2013-01-03T20:50:20.993
> 
> 标签：java, android, webview, android-webview, webviewclient

当我使用

`webview.setWebViewClient(new HelloWebViewClient());`

在Android中，有一个错误：

> WebView 类型中的方法 setWebViewClient(WebViewClient) 不适用于参数 (WebViewSampleActivity)

它说“将 setWebViewClient 更改为 setWebChromeClient”，但是当我这样做时，它说“将 setWebChromeClient 更改为 setWebViewClient”。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:30:30.400

试试这个：（示例代码）

```
public class SinaActivity extends Activity {
private WebView myWebView;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    myWebView = (WebView) findViewById(R.id.webview);
    myWebView.setWebChromeClient(new WebChromeClient());
    myWebView.setWebViewClient(new SinaActivityClient());

} } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T20:55:41.007

要使用：

```
webview.setWebViewClient(new HelloWebViewClient()); 
```

HelloWebViewClient 必须是 WebViewClient 的子类：

```
public class HelloWebViewClient extend WebViewClient { 
```

目前您的 HelloWebViewClient 正在扩展 WebViewSampleActivity，如果此类命名正确，则它是 Activity 子类而不是 WebViewClient。

# jquery - Chrome 在 document.ready 上加载 jQuery 脚本时可能存在错误

> ID：14147047
> 
> 赞同：2
> 
> 时间：2013-01-03T20:50:26.257
> 
> 标签：jquery, google-chrome

我想执行以下脚本

```
$('html, body').animate({
    scrollTop: $('#deckblatt').offset().top
}, 1) 
```

Deckblatt 是我页面上的第一个 content-div。

Chrome 不会这样做，但 FF 会。

令人困惑的部分是我在第二页上运行了相同的方法，这在 Chrome 和 FF 上都可以正常工作。

我错过了什么或者可能有更好的方法来做我想要实现的目标，防止浏览器在之前向下滚动时自动跳转到页面的一部分？

先感谢您。

**编辑：**

这是第一个项目的完整代码，它运行不正确

[斯普滕韦尔斯](http://sprottenwels.net/Bewerbung/)

这是第二个的代码，效果很好

[#2](http://antaw.de/RM/scroll.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:51:12.643

这不是 Chrome 错误。您的[原始代码](http://jsfiddle.net/uKcQG)包含一些奇怪的东西。

*   您没有任何具有`scroll-top`类的元素，应该在向下滚动时显示，并且用户可以单击以滚动到顶部。
*   您没有任何具有`top`或`bottom`id 的元素，如另一个元素。
*   您从其他工作示例中的 JSFiddle 代码中遗漏了一些[需要的 CSS 代码。](http://antaw.de/RM/stylesheets/scroll.css)
*   但是**最**重​​要的错误之一是：`target`变量在 JavaScript 代码中未定义，并且您检查它与“#top”字符串的相等性。这会导致 ReferenceError 异常。我想你想检查点击事件的目标元素的 id 是否等于`"#top"`字符串。为此，您应该`event`在事件处理程序中声明例如参数，并使用`event.target.id`. 所以代替这个：

    ```
    $('.scroll').click(function(){

        $('html, body').animate({
            scrollTop: $(this.id).offset().top
        }, 500);

        setTimeout("$('.scroll-top').fadeIn();",510 );

        if (target == "#top"){$('.scroll-top').hide() ;}

    }); 
    ```

    您应该使用以下代码：

    ```
    $('.scroll').click(function(event) { // declaring event variable as an argument
        $('html, body').animate({
            scrollTop: $(this.id).offset().top
        }, 500);

        // inspecting the id of the click event's target element
        if (event.target.id == "#top") {
          $('.scroll-top').hide();
        } 
        else {
          setTimeout(function () {
            $('.scroll-top').fadeIn();
          }, 510);
        }

    }); 
    ```

我修改了你的[原始代码](http://jsfiddle.net/uKcQG)，取消了很多不需要的东西，但还有很多：

[http://jsfiddle.net/uKcQG/3/](http://jsfiddle.net/uKcQG/3/)

它仍然有点问题，但现在滚动似乎可以正常工作。

但正如我在评论中建议的那样，**您绝对应该使用 Ariel Flesler 的*jQuery scrollTo 插件*来完成此任务：[http ://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)**

# jquery - 在使用 jqplot 绘制图表时需要帮助 - 显示负值

> ID：14147048
> 
> 赞同：1
> 
> 时间：2013-01-03T20:50:26.243
> 
> 标签：jquery, jquery-ui, jquery-plugins, jqplot

我正在绘制一些销售数据。我需要在此屏幕截图中绘制图表：![所需图表](../Images/b776f14147267bbadcecf8a8ab71bd5c.png).

我已经能够完成这么多： ![能完成这么多](../Images/dafb583523a06f974f6e110b3cea6d56.png)

用于此的 jquery 代码是：

```
plot = $.jqplot('SalesChart2',
            [
                [[1,5]],
                [[1,10]],
                [[1,15]],
                [[1,20]],
                [[2,-25]],
                [[3,10]],
                [[4,10]],
                [[5, 6]]
            ]
            , {
                // Tell the plot to stack the bars.
                stackSeries: true,
                series: [
                                { label: 'Cash' },
                                { label: 'CreditCard' },
                                { label: 'DebitCard' },
                                { label: 'StoreCredit' },
                                { label: 'Discount' },
                                { label: 'AverageTransaction', xaxis: 'xaxis', yaxis: 'y2axis', disableStack: true },
                                { xaxis: 'xaxis', yaxis: 'y2axis', label: 'ItemsPerTransaction', disableStack: true },
                                { xaxis: 'xaxis', yaxis: 'y2axis', label: 'CustomerCount', disableStack: true }
                            ],
                animate: !$.jqplot.use_excanvas,
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    rendererOptions: {
                        highlightMouseDown: true,
                        barWidth: 50
                    },
                    pointLabels: { show: true }
                },
                axes: {
                    xaxis: {
                        renderer: $.jqplot.CategoryAxisRenderer,
                        ticks: [1,2,3,4,5]
                    },
                    yaxis: {
                        min: -25,
                        tickOptions: {
                            formatString: "$%'d"
                        }
                    },
                    y2axis: {
                        autoscale: true,
                        min: 0
                    }
                },
                legend: {
                    show: true,
                    location: 'e',
                    placement: 'outside'
                },
                grid: {
                    drawGridlines: false
                }
            }); 
```

但是，似乎我在 jqplot 的文档中遗漏了一些东西。

首先，如果 y 轴上有负轴值，则正值也从 y 轴上最负的点开始。

其次，最后一个系列 - “客户数量”在 x 轴上遥遥领先，当我删除容器 DIV 的宽度限制时可见。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:37:11.233

尝试这个...

```
var plot = $.jqplot('SalesChart2',
        [
            [[1,5]],
            [[1,10]],
            [[1,15]],
            [[1,20]],
            [[2,-25]],
            [[3,10]],
            [[4,10]],
            [[5,6]]
        ]
        , {
            // Tell the plot to stack the bars.
            stackSeries: true,
            series: [
                            { label: 'Cash' },
                            { label: 'CreditCard' },
                            { label: 'DebitCard' },
                            { label: 'StoreCredit' },
                            { label: 'Discount'},
                            { label: 'AverageTransaction', xaxis: 'xaxis', yaxis: 'y2axis', disableStack: true},
                            { xaxis: 'xaxis', yaxis: 'y2axis', label: 'ItemsPerTransaction', disableStack: true},
                            { xaxis: 'xaxis', yaxis: 'y2axis', label: 'CustomerCount', disableStack: true }
                        ],
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                rendererOptions: {
                    highlightMouseDown: true,
                    barWidth: 50,
                    fillToZero: true
                },
                pointLabels: { show: true }
            },
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: [1,2,3,4,5,6,7,8],
                    showTicks: false
                },
                yaxis: {
                    min: -25,
                    tickOptions: {
                        formatString: "$%'d"
                    }
                },
                y2axis: {
                    autoscale: true,
                    min: 0
                }
            },
            legend: {
                show: true,
                location: 'e',
                placement: 'outside'
            },
            grid: {
                drawGridlines: false
            }
        }); 
```

[http://jsfiddle.net/pabloker/jdmq7/](http://jsfiddle.net/pabloker/jdmq7/)

# c++ - 如何将索引顶点位置和索引顶点法线从波前 .obj 文件获取到 OpenGL 顶点着色器中？

> ID：14147055
> 
> 赞同：2
> 
> 时间：2013-01-03T20:51:47.623
> 
> 标签：c++, opengl, glsl, .obj

我试图在顶点数组对象 (VAO) 中使用两个顶点缓冲区对象 (VBO) 和两个索引缓冲区对象 (IBO) 来渲染来自包含 3D 模型的波前 .Obj 文件的数据。.obj 文件使用[顶点/法线定义](http://en.wikipedia.org/wiki/Wavefront_.obj_file#Vertex.2Fnormal)：

```
f v1//vn1 v2//vn2 v3//vn3 
```

我意识到我不能使用两个 IBO 来对 OpenGL 的 VAO 进行索引，因为（一次）只能将一个缓冲区对象绑定到 GL_ELEMENT_ARRAY_BUFFER 绑定目标。这意味着我不能只定义顶点位置索引和顶点法线索引，当我需要两者作为 GLSL 顶点着色器的输入时，这是一个问题。

我考虑过使用“顶点”结构来封装顶点位置和顶点法线，但我不知道如何将数据作为一个长数组提供给 OpenGL，并且当我在不同对象中拥有所有顶点位置数据时。我想我可以使用一些循环将数据复制到包含所有位置数据的新数组中。

加载 .obj 文件时，我想我可以处理数据，以便法线与相应的顶点位置值匹配。

我应该如何解决这个问题？

我正在使用带有 OpenGL 3.3 的 C++ 和 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T23:30:35.947

您必须了解的一件事是，“顶点”不是“位置”的同义词。一个顶点是整个属性集；位置、法线、纹理坐标等。OpenGL 一次处理一个图元，其中一个图元由 1 个（点）、2 个（线）或 3 个顶点（三角形）组成。您不能单独处理位置和正常，它们总是必须一起处理。

在 OpenGL 中处理它之前，您必须扩展 .obj 文件中的数据。对于每个唯一的属性元组，引入一个带有新索引的新顶点，并将 .obj 中的索引属性替换为 OpenGL 所需的索引顶点。

# doctrine-orm - select() 方法中 expr() 的 QueryBuilder 别名

> ID：14147065
> 
> 赞同：7
> 
> 时间：2013-01-03T20:52:30.173
> 
> 标签：doctrine-orm

在 Doctrine2 查询生成器的 select() 方法中是否有任何选项可以为 $qb->expr()->avg('e.value') 设置别名？

我有例如这个查询：

```
$qb->select($qb->expr()->avg('e.value'), 'e someAlias')->from('Entity', 'e'); 
```

但是平均值在结果中以整数为索引，如下所示：

```
array(
  0 => array(
   'someAlias' => Entity {},
   1 => 2.5255,
  ),
); 
```

是否可以将平均值的键更改为定义的字符串值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T21:25:29.007

尝试以下设置别名：

```
$qb->select(array(
                 $qb->expr()->select()->avg('e.value').' AS aveAlias')
                ,'e someAlias')
           )->from('Entity', 'e'); 
```

# c# - Windows 8 App Store 开发 - 库参考行为

> ID：14147067
> 
> 赞同：1
> 
> 时间：2013-01-03T20:52:40.660
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5

我是 Windows 8 App Store 开发的新手，遇到了一些奇怪的事情。

如果我创建一个普通的 .net 库（签名库）并尝试将其添加到我的 Windows 应用商店应用程序中，Visual Studio 2012 抱怨我无法添加此项目。两个项目都在同一个解决方案中。

这个项目包含对 System.Net 程序集的引用，因为我使用了那里的一些类型。我知道 System.Net 不是完全支持的命名空间。TcpClient、NetworkStream 等都已被删除。我也知道 Windows.Networking 命名空间中的 StreamSocket、DataReader 和 DataWriter 是替代方案。

在我失去你之前，让我进入正题。我没有从这个项目中添加已编译的程序集作为对 Windows Store 应用程序的项目引用，而是在我的硬盘驱动器上浏览已编译的程序集并直接引用该程序集。

令我惊讶的是，这奏效了！这导致我提出以下问题：

*   为什么？这对我来说没有意义。有人请解释一下。
*   另外，如果我使用这个库，Windows 应用商店会拒绝我的申请吗？**自己回答第二个问题......答案是肯定的！如果引用了提到的库，Windows 认证应用程序将不再将其识别为 Windows 应用商店应用程序。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:25:36.783

有几种方法可以将程序集引用添加到项目中：

将程序集引用添加到同一解决方案中的项目。浏览硬盘驱动器上某处的程序集。

在 Visual Studio 2012 中，如果将不兼容的 WinRT 程序集引用添加到 WinRT 项目，Visual Studio 2012 将不允许这样做。

但是，如果您通过浏览硬盘驱动器将相同的程序集添加到 WinRT 项目，则该程序集被成功引用。这仅在引用的程序集使用强密钥签名时才有效。我不确定这是产品的缺陷还是故意的。

稍后，当您的 Windows Store 应用程序通过认证时，Microsoft 会弥补这个缺陷（如果它确实存在的话）。认证失败，因为它识别出项目中引用了不适合 Windows App Store 产品的程序集。

因此，总而言之，您不能在 WinRT 项目中引用 WinRT 程序集。这样做的缺点是您的应用程序将无法通过 Windows App Store 验证。这样做的好处是，如果您不开发 Windows App Store 产品，您可以重复使用您已经完成的工作。

# javascript - 倒数计时器对象 - Javascript

> ID：14147069
> 
> 赞同：3
> 
> 时间：2013-01-03T20:52:55.757
> 
> 标签：javascript, object, counter

我想用 Javascript 创建一个简单的计时器，它从给定时间倒计时直到它达到 0。我发现这个[教程](http://forum.codecall.net/topic/51639-how-to-create-a-countdown-timer-in-javascript/#axzz2GwCO9y00)效果很好。我的问题是我需要在同一页面上放置多个计时器。本教程显然不会这样做，因为它使用全局变量（我是 JS/Programming 的新手，所以我可能没有使用正确的术语）。我试图重新创建相同的东西，只创建每个计时器作为它自己的对象，这样它们就不会相互干扰。这就是我所拥有的。

```
function taskTimer(name, startTime) {
  this.timer = name;
  this.totalSeconds = startTime;
  this.tick = function() {
    if (this.totalSeconds <= 0) {
      return;
    }
    this.totalSeconds -= 1;
    this.updateTimer();
    // window.setTimeout("this.tick()", 1000);
  };
  this.updateTimer = function(){
    this.seconds = this.totalSeconds;

    this.hours = Math.floor(this.seconds / 3600);
    this.seconds -= this.hours * (3600);

    this.minutes = Math.floor(this.seconds / 60);
    this.seconds -= this.minutes * (60);

    this.timeString = this.leadingZero(this.hours) + ":" + this.leadingZero(this.minutes) + ":" + this.leadingZero(this.seconds);
    return this.timeString;
  };
  this.leadingZero = function(time){
    return (time < 10) ? "0" + time : + time;
  };
}
var testTimer = new taskTimer("timer", 30);
testTimer.tick(); 
```

我在最后创建了一个。运行 `testTimer.updateTimer();`返回`00:00:30`正确，但运行`testTimer.tick();`没有返回值。这部分代码显然有问题，我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:56:37.183

你有几个问题。

1.  你在`updateTimer()`你的方法内部调用`tick`，所以除非你返回它，否则它永远不会到达那里。
2.  使用您当前的设置，`tick`每次您想要更新时钟时都必须手动调用，如果您不准确地每秒钟执行一次，则计时器将不准确。
3.  要使用＃2，您不应该`totalSeconds`像现在这样递减，因为不能保证在您的超时触发之间恰好是一秒。请改用日期。

这就是我要做的：http: [//jsfiddle.net/R4hnE/3/](http://jsfiddle.net/R4hnE/3/)

```
// I added optional callbacks. This could be setup better, but the details of that are negligible. 
function TaskTimer(name, durationInSeconds, onEnd, onTick) {
    var endTime,
        self = this, // store a reference to this since the context of window.setTimeout is always window
        running = false;
    this.name = name;
    this.totalSeconds = durationInSeconds;

    var go = (function tick() {
        var now = new Date().getTime();
        if (now >= endTime) {
            if (typeof onEnd === "function") onEnd.call(self);
            return;
        }
        self.totalSeconds = Math.round((endTime - now) / 1000); // update totalSeconds placeholder
        if (typeof onTick === "function") onTick.call(self);
        window.setTimeout(tick, 1000 / 12); // you can increase the denominator for greater accuracy. 
    });

    // this is an instance method to start the timer
    this.start = function() {
        if (running) return; // prevent multiple calls to start

        running = true;
        endTime = new Date().getTime() + durationInSeconds * 1000; // this is when the timer should be done (with current functionality. If you want the ability to pause the timer, the logic would need to be updated)
        go();
    };
}
// no reason to make this an instance method :)
TaskTimer.prototype.toTimeString = function() {
    var hrs = Math.floor(this.totalSeconds / 60 / 60),
        min = Math.floor(this.totalSeconds / 60 - hrs * 60),
        sec = this.totalSeconds % 60;

    return [hrs.padLeft("0", 2), min.padLeft("0", 2), sec.padLeft("0", 2)].join(" : ");
};

var task = new TaskTimer("task1", 30, function() {
    document.body.innerHTML = this.toTimeString();
    alert('done');
}, function() {
    document.body.innerHTML = this.toTimeString();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T20:58:32.950

我总是遇到问题，`this`在一种情况下，在函数中，我不得不重新定义它：

```
this.tick = function() {
  self=this;
  if (self.totalSeconds <= 0) {
    return;
  }
  self.totalSeconds -= 1;
  self.updateTimer();
   // window.setTimeout("self.tick()", 1000);
}; 
```

这是另一篇关于此的帖子：[var self = this?](https://stackoverflow.com/questions/337878/js-var-self-this)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T01:24:24.607

我的版本，你可以看到： http: [//fiddle.jshell.net/hmariod/N7haK/4/](http://fiddle.jshell.net/hmariod/N7haK/4/)

```
var tmArray = new Array();
var timerRef, timerId=0;

function newTimer(){
    try{
        if(tmArray.length > 4) throw "Too much timers";
        var countDown = parseInt(document.getElementById("tCountown").value,10);
        if(isNaN(countDown)) throw "tCountown is NaN";
        var tmName = document.getElementById("tName").value;
        var nt = new taskTimer(++timerId, tmName, countDown);
        createTmElement(timerId, tmName);
        tmArray.push(nt);
        if(!timerRef) timerRef = setInterval(timerFn, 1000);
        showTimers();
    }catch(er){
        alert("newTimer:" + er);
    }
}

function taskTimer(id, name, tCountown) {
    this.id = id;
    this.tName = name;
    this.tCountown = tCountown;
}

function timerFn(){
    try{
        var i;
        killTimer = true;
        for(i = 0; i < tmArray.length; i++){
           tmArray[i].tCountown--;
            if(tmArray[i].tCountown < 0){
                tmArray[i].tCountown = 0;
            }else{
                killTimer = false;
            }
        }
        if(killTimer) clearInterval(timerRef);
        showTimers();
    }catch(er){
        clearInterval(timerRef);
        aler("timerFn: " + er);
    }
} 
```

# c# - 向 App Config C# 添加多个自定义部分？

> ID：14147080
> 
> 赞同：2
> 
> 时间：2013-01-03T20:53:31.240
> 
> 标签：c#, asp.net, configuration

我想做一个看起来像的 app.config

```
<configuration>

<SQLconneciton>
  <add key=name/>
  <add key= otherStuff/>
</SQLconnection>
<PacConnection>
  <add key=name/>
  <add key= otherStuff/>
</PacConnection>

</configuration> 
```

我已经阅读了许多人们制作一个自定义部分并添加内容的示例，我需要允许用户添加多个部分、阅读、删除。我真的不需要花哨的元素，只需要简单的添加和键值。部分组值得使用还是我缺少一些简单的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:29:08.527

当然 - 没有什么能阻止您创建任意数量的自定义配置部分！

尝试这样的事情：

```
<?xml version="1.0"?>
<configuration>
  <!-- define the config sections (and possibly section groups) you want in your config file -->
  <configSections>
    <section name="SqlConnection" type="System.Configuration.NameValueSectionHandler"/>
    <section name="PacConnection" type="System.Configuration.NameValueSectionHandler"/>
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
  <!-- "implement" those config sections as defined above -->
  <SqlConnection>
    <add key="abc" value="123" />
  </SqlConnection>
  <PacConnection>
    <add key="abc" value="234" />
  </PacConnection>
</configuration> 
```

`System.Configuration.NameValueSectionHandler`是用于包含`<add key="...." value="....." />`条目（如`<appSettings>`）的配置部分的默认类型。

要获取值，只需使用以下内容：

```
NameValueCollection sqlConnConfig = ConfigurationManager.GetSection("SqlConnection") as NameValueCollection;
string valueForAbc = sqlConnConfig["abc"]; 
```

如果您自己定义了其中一些，您可以完全混合和匹配 .NET 定义的现有部分处理程序类型以及您自己的自定义配置部分 - 只需使用您需要的任何内容！

# c# - C# - 按属性排序

> ID：14147082
> 
> 赞同：0
> 
> 时间：2013-01-03T20:53:43.590
> 
> 标签：c#, list, sorting, collections

我正在尝试通过自定义属性对 C# 中的对象集合进行排序。（对于上下文，我正在使用 Twitterizer 库处理 Twitter API，将直接消息排序到对话视图中）

假设一个自定义类有一个名为 的属性`label`，其中`label`是`string`在类构造函数时分配的。

我有一个`Collection`（或一个`List`，没关系）所述类，我想根据 的值将它们全部分类为单独`List`的 s（或`Collection`s）`label`，并将它们组合在一起。

目前，我一直在通过使用`foreach`循环并以这种方式检查值来做到这一点——我知道这是对 CPU 时间的可怕浪费和糟糕的编程。我为此感到羞耻。

基本上我知道我拥有的所有数据都是给我的，而且我也知道它应该很容易排序。人类用几张纸就可以很容易地做到这一点，但我只是不知道如何在 C# 中做到这一点。

有没有人可以解决这个问题？如果您需要更多信息和/或上下文，请询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T20:55:21.123

您尝试过[OrderBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)吗`Linq`？

```
var mySortedList = myCollection.OrderBy(x => x.PropertyName).ToList(); 
```

这仍然会循环遍历要排序的值 - 没有办法解决这个问题。这至少会清理您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:26:27.897

您说排序，但听起来您正在尝试根据共同值划分事物列表。为此，您需要[GroupBy](http://msdn.microsoft.com/en-us/library/bb534334.aspx)。

您还希望[ToDictionary](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)从[IGrouping](http://msdn.microsoft.com/en-us/library/vstudio/bb344977%28v=vs.100%29.aspx)切换，因为您可能想要基于键的查找。

我假设每个输出集中的元素都需要排序，因此请查看[OrderBy](http://msdn.microsoft.com/en-us/library/bb534966%28v=VS.95%29.aspx)。由于您无疑会多次访问每个列表，因此您希望将其折叠为列表或数组（您提到列表），所以我使用了[ToList](http://msdn.microsoft.com/en-us/library/vstudio/bb342261%28v=vs.110%29.aspx)

```
//Make some test data
var labels = new[] {"A", "B", "C", "D"};
var rawMessages = new List<Message>();

for (var i = 0; i < 15; ++i)
{
    rawMessages.Add(new Message
    {
        Label = labels[i % labels.Length],
        Text = "Hi" + i,
        Timestamp = DateTime.Now.AddMinutes(i * Math.Pow(-1, i))
    });
}

//Group the data up by label
var groupedMessages = rawMessages.GroupBy(message => message.Label);

//Convert to a dictionary for by-label lookup (this gives us a Dictionary<string, List<Message>>)
var messageLookup = groupedMessages.ToDictionary(
            //Make the dictionary key the label of the conversation (set of messages)
            grouping => grouping.Key, 
            //Sort the messages in each conversation by their timestamps and convert to a list
            messages => messages.OrderBy(message => message.Timestamp).ToList());

//Use the data...
var messagesInConversationA = messageLookup["A"];
var messagesInConversationB = messageLookup["B"];
var messagesInConversationC = messageLookup["C"];
var messagesInConversationD = messageLookup["D"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:34:16.183

在我看来，mlorbetske 对您的问题的解释是正确的。听起来您想要进行分组而不是排序。我只是回答有点不同

```
var originalList = new[] { new { Name = "Andy", Label = "Junk" }, new { Name = "Frank", Label = "Junk" }, new { Name = "Lisa", Label = "Trash" } }.ToList();

var myLists = new Dictionary<string, List<Object>>();

originalList.ForEach(x =>
    {
        if (!myLists.ContainsKey(x.Label))                
            myLists.Add(x.Label,new List<object>());
        myLists[x.Label].Add(x);

    }); 
```

# database - File Maker Pro 12：可以从单独的表中标记/删除匹配的字段吗？

> ID：14147083
> 
> 赞同：2
> 
> 时间：2013-01-03T20:53:48.260
> 
> 标签：database, filemaker, mailing-list

*大家好。我在这里的第一个问题（经过大量谷歌搜索/搜索）。*

我正在使用 File Maker 将大量邮件列表电子表格迁移到一个简单的数据库。一个绊脚石是 - 我需要能够根据记录的地址是否存在于单独的表中来将它们标记为不活动。

IE。为了简单起见：

*   **table1**有名称、地址和 zip。
*   **table2**有地址和邮编。
*   **如果table1**中的地址/zip 组合也存在于**table2**中，则需要在**table1**中将其标记为不活动。

*提前致谢。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:29:46.133

您可以执行子查询来获取 table1 id 并使用 IN 子句进行更新。这也可以通过 UPDATE FROM 来完成，但我认为这种方法更容易理解。您可以开始执行子查询以检查它，然后将其包含在更新中。

```
UPDATE
    table1
SET
    flaged = 1
WHERE
    id IN(
          SELECT
            t1.id
          FROM
            table1 t1, table2 t2
          WHERE
            t1.address = t2.address AND t1.zip = t2.zip
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:22:18.233

首先，我将创建一个名为 addressZIP 的计算字段，它将地址和 ZIP 组合成一个字符串。

然后，在表 1 中，创建一个计算字段。

输入这个

If (IsEmpty ( FilterValues ( List ( table2::addressZIP ) ; addressZIP )),"","FLAG")。

我认为这会奏效，但我并不积极。我现在不在有 FM 的电脑前，所以我无法测试它。

# c# - 用户无法忽略的 C# .NET 和消息框

> ID：14147086
> 
> 赞同：0
> 
> 时间：2013-01-03T20:53:56.913
> 
> 标签：c#, .net, controls, message, messagebox

所以我找不到任何有用的东西......

但是我想要一个不允许用户做任何事情的消息框，直到他或她点击确定。

因此，如果他们说...在消息框外单击。它会向他们发出哔哔声并闪烁，直到单击“确定”。

这是通过主父表单左侧的属性完成的吗？还是这一切都是通过编程完成的？

谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T20:56:52.167

使用 .ShowDialog() 方法显示窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T20:57:59.663

这个问题已经在这篇[文章](https://stackoverflow.com/questions/1154181/c-net-messagebox-is-not-modal)中得到解答，但简而言之，您需要将 MessageBoxOwner 属性设置为主 UI 窗口。

# postgresql - 如何管理 PostgreSQL 复制服务器上的 wals 目录？

> ID：14147090
> 
> 赞同：2
> 
> 时间：2013-01-03T20:54:05.797
> 
> 标签：postgresql, postgresql-9.1, rails-postgresql

我有两台 PostgreSQL 9 服务器在 Amazon EC2 上运行。一个是主服务器，另一个是备用的复制服务器。

随着硬盘驱动器被填满，复制服务器继续出现故障。以下目录似乎在不断增长：

```
/usr/local/pgsql/wals 
```

有成千上万的文件，例如：

```
-rw------- 1 pgsql users 16777216 Jan  3 20:36 000000010000001B000000A2
-rw------- 1 pgsql users 16777216 Jan  3 20:40 000000010000001B000000A3
-rw------- 1 pgsql users 16777216 Jan  3 20:46 000000010000001B000000A4 
```

你如何设置它不会导致失败？您需要自动旋转 wal 文件吗？或者？真的可以使用你的建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:33:19.230

您应该`archive_cleanup_command`在`recovery.conf`文件中配置一个。退房[`pg_archivecleanup`](http://www.postgresql.org/docs/9.2/static/pgarchivecleanup.html)；它是为此目的而制作的。

WAL 文件也可以用作备份和恢复目的的存档，因此如果您只是进行复制，它们不会自动删除。

（或者，您可以使用任何您喜欢的手工制作方法来清理存档，但这可能有点困难且容易出错。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:06:51.570

**postgresql.conf**文件中有一个名为的设置，`wal_keep_segments=`我`checkpoint_segments=`的设置为`wal_keep_segments=128`复制`checkpoint_segments=128`正常。

`wal_keep_segments`是目录中的最小 wal_files。 `checkpoint_segments`是最大值。

我都设置了。

# arrays - 连接 m 大小数组的前 n 个元素

> ID：14147091
> 
> 赞同：2
> 
> 时间：2013-01-03T20:54:40.377
> 
> 标签：arrays, string, powershell

给定：`$array = ("a0", "a1", "b0", "b1")`

我如何**只** `array[0]`加入& `array[1]`; 这样：

> $a = "a0a1"
> # 好像： >$a = $a[0]$a[1]

同样，
得到：`$b = "b0b1"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:35:14.377

您可以选择数组中的元素，然后使用`-join`运算符：

```
$array = ("a0", "a1", "b0", "b1")
$a = $array[0..1] -join ''
$b = $array[2..3] -join '' 
```

您可以使用逗号来选择不连续的元素。

```
$array = ("a0", "a1", "b0", "b1")
$c = $array[0,1,3] -join '' 
```

如果您想要加入的元素有一些标准，您可以对数组进行分组，然后加入组。

```
# Joins all elements that start with the same character.
$array = ("a0", "a1", "b0", "b1")
$a = $array| group {$_[0]}| foreach {$_.group -join ''} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T03:08:12.757

替代解决方案：

```
$array= ("a1", "a0", "b0", "b1")
$a,$b = &{$ofs='';[string[]]($array[0,1],$array[2,3])} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:04:12.683

未经测试，但我认为它应该可以工作：

```
$array | % {
 switch -Regex ($_)
  {
    ('a\d') {$a = "$($a)$($_)"}
    ('b\d') {$b = "$($b)$($_)"}
  }

} 
```

# java - 更改字符串值与 if 语句的性能

> ID：14147092
> 
> 赞同：1
> 
> 时间：2013-01-03T20:54:46.827
> 
> 标签：java, performance

[我在这里](https://stackoverflow.com/questions/3395286/remove-last-character-of-a-stringbuilder)查看约翰的答案，并认为它非常巧妙。我想知道是否可以使用 if 语句进一步改进它，但我不确定 if 语句是否会表现得更好。

if 语句是否比更改字符串的值“花费更多”？

```
String prefix = "";
for (String serverId : serverIds) {
  sb.append(prefix);
  prefix = ",";
  sb.append(serverId);
} 
```

**VS。**

```
String prefix = "";
for (String serverId : serverIds) {
  sb.append(prefix);
  if( prefix.equals( "" ) {
      prefix = ",";
  }
  sb.append(serverId);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:08:46.730

第二个版本肯定会更慢。它不仅仅是一个 if，也是一个 equals 调用，而且大多数情况下，两个比较的字符串是不同的，因此 equals 方法不会提前返回 - 相反它比简单的赋值工作更多（查看源代码String 中的 equals 方法的详细信息）。

当然，大多数时候可读性比速度更重要，而 Guava Joiner 可以帮助您编写非常清晰的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T00:44:39.430

更多版本

```
boolean addPrefix = false;
for (String serverId : serverIds) {
  if (addPrefix) {       // it's better than String.equals
      sb.append(',');    // append char is faster than append String
  } else {
      addPrefix = true;  
  }
  sb.append(serverId);
} 
```

假设 serverIds 永远不会为空，这可能是一个替代方案

```
for (String serverId : serverIds) {
     sb.append(serverId).append(',');
}
sb.deleteCharAt(sb.length() - 1); 
```

如果 serverIds 是 List 则不要使用 for-each - 它创建 Iterator (Object) 并且 Iterator.next 检查并发修改

```
for (int i = 0; i < serverIds.size(); i++) {
  if (i > 0) {
      sb.append(',');
  }
  sb.append(serverId.get(i));
} 
```

对于数组，它是

```
for (int i = 0; i < serverIds.length; i++) {
  if (i > 0) {
      sb.append(',');
  }
  sb.append(serverId[i]);
} 
```

# c# - 在 ASP.NET 站点上制作向导

> ID：14147094
> 
> 赞同：1
> 
> 时间：2013-01-03T20:54:48.410
> 
> 标签：c#, asp.net, wizard

我是 ASP.NET 的新手。

我有一个在 umbraco cms (ASP.NET) 下运行的网站。我需要创建一个简单的向导：用户将使用简单的控件（复选框、下拉列表、单选按钮、文本框等）逐步回答问题。有些步骤取决于以前的答案，有些则没有。

所以，我对此有两个问题：

1.  在 ASP.NET 网站上创建向导的最佳做法是什么？[我在这里](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.wizard.aspx)查看了 System.Web.UI.WebControls.Wizard 类，但我不确定将 asp.net 控件和 html 标记混合在一起是否是一种好方法，特别要注意这样一个事实，即描述了向导的每一步在一个巨大的标记文件中。

2.  我有向导步骤的 html 标记示例（静态 aspx 页面）。这就是为什么我要划分html和逻辑。我希望将来能够应用新的设计和标记，而不是更改代码。最好的方法是什么 - 划分 html 和 c# 代码？

欢迎举例。提前致谢。

# amazon-web-services - 如何同步 EC2 实例

> ID：14147107
> 
> 赞同：0
> 
> 时间：2013-01-03T20:55:42.443
> 
> 标签：amazon-web-services, amazon-ec2, ec2-ami, autoscaling, amazon-cloudformation

我使用 AWS 的 Cloudformation 模板创建了一个 Web 集群。该脚本安装 Drupal 7。我通过 ssh 连接一个实例，删除 Drupal 7 并安装 Drupal 6。我希望其他实例（以及将来创建的实例）继承此修改。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:08:12.123

此链接解决了我的问题： [https ://forums.aws.amazon.com/message.jspa?messageID=321548](https://forums.aws.amazon.com/message.jspa?messageID=321548)

# php - 同域上传慢

> ID：14147108
> 
> 赞同：0
> 
> 时间：2013-01-03T20:55:47.273
> 
> 标签：php, ftp

我正在运行`CENTOS 6.3`，并且`PHP 5.4.9`使用`PHP FTP commands`. 我正在使用它来将大文件从一个域上传到同一服务器上的 FTP 帐户。

我注意到即使是小文件的上传也需要很长时间才能上传：大约 10 到 15 秒。他们最终会上传。如果我使用相同的脚本上传到不同的服务器，它会快速上传：不到一秒钟。

我可以在不同的服务器上使用相同的 FTP 凭据，并且它们上传速度很快。为什么来自同一服务器上的一个域的 FTP 速度很慢？

用脚本更新：

```
$ftp_server = "HOST NAME";
$ftp_user_name = "USERNAME";
$ftp_user_pass = "PASSWORD";
$ftp_folder = "/FTP DIRECTORY";
$path = "/testing/";
$file_name = $_FILES["theFile"]["name"];
$source_file = $_FILES["theFile"]["tmp_name"];
$destination_file = $ftp_folder.$path.$file_name;
$destination_path = $ftp_folder.$path;

function uploadFTP($ftp_server, $ftp_user_name, $ftp_user_pass, $source_file, $destination_file, $destination_path) {
    $conn_id = @ftp_connect($ftp_server); // set up basic connection
    $login_result = @ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); // login with username and password
    if ((!$conn_id) || (!$login_result)) { // check connection 
        return false;
    } else {
        $check = @ftp_chdir($conn_id, $destination_path); //check to see if folder is there
        if ($check) { 
            $upload = ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY); // upload the file
            if (!$upload) { // check upload status
                return false;
            } else {
                return true;
            }
        } else { 
            $check = @ftp_mkdir($conn_id, $destination_path); //make new folder
            if ($check) {
                $upload = @ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY); // upload the file
                if (!$upload) { // check upload status
                    return false;
                } else {
                    return true;
                }
            } else {
                return false;
            }
        }

    }
    @ftp_close($conn_id); //close ftp
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:02:05.433

如果它们在同一台服务器上，为什么不直接复制文件而不是将它们发送出去，然后再将它们带回？我认为您正在使用出站和入站连接阻塞端口 21 (FTP)。

**：：编辑：：**

我知道这不是代码审查，但这里有一些小的改进：

```
$ftp_server = "HOST_NAME";
$ftp_user_name = "USERNAME";
$ftp_user_pass = "PASSWORD";
$ftp_folder = "/FTP_DIRECTORY";
$path = "/testing/";
$file_name = $_FILES["theFile"]["name"];
$source_file = $_FILES["theFile"]["tmp_name"];

/**
 * OLD CODE:
 * $destination_file = $ftp_folder . $path . $file_name;
 * $destination_path = $ftp_folder . $path;
 * 
 * NEW CODE:
 * $destination_path = $ftp_folder . $path;
 * $destination_file = $destination_path . $file_name;
 * 
 * REASON FOR CHANGE: Saves you 1 concat, also, 1 less use of ftp_folder and path
 */
$destination_path = $ftp_folder . $path;
$destination_file = $destination_path . $file_name;

function uploadFTP($ftp_server, $ftp_user_name, $ftp_user_pass, $source_file, $destination_file, $destination_path) {
    /**
     * OLD CODE: 
     * $conn_id = @ftp_connect($ftp_server); # set up basic connection
     * 
     * REASON FOR CHANGE: There are times to suppress errors, this is not one of them.
     */ 
    $conn_id = ftp_connect($ftp_server) or die('Couldn\'t connect to ' . $ftp_server); # set up basic connection

    /**
     * REASON FOR NO CHANGE: ftp_login throws a warning on failure.
     */
    $login_result = @ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); # login with username and password

    if (empty($conn_id) || empty($login_result)) { # check connection 
        return false;
    } else {
        /**
         * OLD CODE:
         * $check = @ftp_chdir($conn_id, $destination_path)
         * 
         * REASON FOR CHANGE: $check is redundant
         */
        if (@ftp_chdir($conn_id, $destination_path)) { # check to see if folder is there
            /**
             * OLD CODE:
             * $upload = @ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY);
             * 
             * REASON FOR CHANGE: $upload is redundant
             */
            if (ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY)) { # upload the file & check upload status
                return true;
            } else {
                return false;
            }
        } else { 
            /**
             * OLD CODE:
             * $check = @ftp_mkdir($conn_id, $destination_path);
             * 
             * REASON FOR CHANGE: $check is redundant
             */
            if (@ftp_mkdir($conn_id, $destination_path)) { # make new folder
                /**
                 * OLD CODE:
                 * $upload = @ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY);
                 * 
                 * REASON FOR CHANGE: $upload is redundant
                 */
                if (@ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY)) { # upload the file & check upload status
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

    }
    ftp_close($conn_id); # close ftp
} 
```

版本 2：

```
$ftp_server = "HOST_NAME";
$ftp_user_name = "USERNAME";
$ftp_user_pass = "PASSWORD";
$ftp_folder = "/FTP_DIRECTORY";
$path = "/testing/";
$file_name = $_FILES["theFile"]["name"];
$source_file = $_FILES["theFile"]["tmp_name"];
$destination_path = $ftp_folder . $path;
$destination_file = $destination_path . $file_name;

function uploadFTP($ftp_server, $ftp_user_name, $ftp_user_pass, $source_file, $destination_file, $destination_path) {
    $conn_id = ftp_connect($ftp_server) or die('Couldn\'t connect to ' . $ftp_server); # set up basic connection
    $login_result = @ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); # login with username and password

    if (empty($conn_id) || empty($login_result)) { # check connection 
        return false;
    } else {
        if (@ftp_chdir($conn_id, $destination_path)) { # check to see if folder is there
            /**
             * OLD CODE:
             * if (ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY)) { # upload the file & check upload status
             *    return true;
             * } else {
             *    return false;
             * }
             * 
             * REASON FOR CHANGE: DRY (Don't Repeat Yourself). Abstracted code above to function.
             */
             return uploadFTP_ftpPut($conn_id, $destination_file, $source_file);
        } else {
            if (@ftp_mkdir($conn_id, $destination_path)) { # make new folder
                /**
                 * OLD CODE
                 * ...
                 * 
                 * REASON FOR CHANGE: See above.
                 */
                return uploadFTP_ftpPut($conn_id, $destination_file, $source_file);
            } else {
                return false;
            }
        }

    }
    ftp_close($conn_id); # close ftp
}

function uploadFTP_ftpPut($conn_id, $destination_file, $source_file){
    # upload the file & check upload status
    if (@ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY)) return true;
    else return false;
} 
```

没有评论的版本 3：

```
$ftp_server = "HOST_NAME";
$ftp_user_name = "USERNAME";
$ftp_user_pass = "PASSWORD";
$ftp_folder = "/FTP_DIRECTORY";
$path = "/testing/";
$file_name = $_FILES["theFile"]["name"];
$source_file = $_FILES["theFile"]["tmp_name"];
$destination_path = $ftp_folder . $path;
$destination_file = $destination_path . $file_name;

function uploadFTP($ftp_server, $ftp_user_name, $ftp_user_pass, $source_file, $destination_file, $destination_path) {
    $conn_id = ftp_connect($ftp_server) or die('Couldn\'t connect to ' . $ftp_server); # set up basic connection
    $login_result = @ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); # login with username and password

    if (empty($conn_id) || empty($login_result)) return false; # check connection 

    if (@ftp_chdir($conn_id, $destination_path)) { # check to see if folder is there
         return uploadFTP_ftpPut($conn_id, $destination_file, $source_file);
    } else {
        if (@ftp_mkdir($conn_id, $destination_path)) { # make new folder
            return uploadFTP_ftpPut($conn_id, $destination_file, $source_file);
        } else {
            return false;
        }
    }

    # BTW - you never get here :) 
    ftp_close($conn_id); # close ftp
}

function uploadFTP_ftpPut($conn_id, $destination_file, $source_file){
    # upload the file & check upload status
    if (@ftp_put($conn_id, $destination_file, $source_file, FTP_BINARY)) return true;
    else return false;
} 
```

# php - 将所有数组元素传递给codeigniter中的控制器查看

> ID：14147110
> 
> 赞同：1
> 
> 时间：2013-01-03T20:55:51.170
> 
> 标签：php, codeigniter

我想将数组从控制器传递给视图。我尝试使用下面的代码。我知道这是错误的，但想不出该用什么。**find()**函数从表中获取所有行，然后我想将这些行作为数组传递给视图。我该怎么做？

```
<?php
    class Blog extends CI_Controller{

        public function __construct(){
            parent::__construct();
            $this->load->model('blog_model');
        }

        public function index(){

             $data = $this->blog_model->find(); //which gets all entries from table
            $this->load->view('template/header');
            $this->load->view('template/content', $data);
            $this->load->view('template/footer');

        }

        public function create(){
            $this->blog_model->create();

        }

        public function delete(){

        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:03:06.257

```
$data = $this->blog_model->find(); //which gets all entries from table
$this->load->view('template/header');
$this->load->view('template/content', $data);
$this->load->view('template/footer'); 
```

应该：

```
$data = array('myvar' => $this->blog_model->find());
$this->load->view('template/header');
$this->load->view('template/content', $data);
$this->load->view('template/footer'); 
```

然后在您的视图中访问它：

```
$myvar 
```

请参阅[此](https://stackoverflow.com/a/14122060/1592648)以获得详尽的解释。

# string - 使用部分查询字符串重定向 URL

> ID：14147111
> 
> 赞同：0
> 
> 时间：2013-01-03T20:56:09.423
> 
> 标签：string, redirect, joomla, partial

在我们使用 Joomla 的网站上，Google 网站管理员工具发现了同一页面的重复 URL。例如，以下 URL 会转到我们网站上的同一页面：

1.  /lawson-设备/辅助设备/poly-pro-sinks?option=com_content&view=article&id=75&Itemid=74
2.  /lawson-equipment/pre-press/poly-pro-sinks/index.php?option=com_content&view=article&id=75&Itemid=74
3.  /technical-support/digital-learning?option=com_content&view=article&id=75&Itemid=74
4.  /劳森设备/纺织设备/烘干机/安可烘干机

第四个 URL 是我想要的实际路径。我将如何制定一个重写规则，该规则将抓取任何 URL 查询字符串并`"&id=75"`定向到 SEF URL，而不为每个不正确的 URL 执行重定向 301？这种情况经常发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:38:38.527

成功！使用`RewriteCond`带有来自非 SEF 地址的公共片段的`RewriteRule`命令，以及使用正则表达式的目标地址命令，我为我的 .htaccess 文件提供了以下内容：

```
RewriteCond %{QUERY_STRING} ^.*com_content&view=article&id=75&Itemid=74$
RewriteRule ^index\.php$ http\:\/\/www\.mysite\.com\/lawson\-equipment\/textile\-equipment\/dryers\/encore\-dryer? [R=301,L] 
```

到目前为止，这似乎是有效的，并且没有影响我能看到的任何其他内容。如果有更好的方法，请随时发表评论或添加另一个答案！

# ruby-on-rails - Rails 3 - 带有参数的 link_to 是否安全？

> ID：14147113
> 
> 赞同：1
> 
> 时间：2013-01-03T20:56:21.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

作为一般经验法则，您不应该信任来自用户的任何数据输入。如果您有一个带有参数的简单 link_to：

```
link_to "Click me", test_path(:my_param => "test") 
```

路线可能如下所示：example.com/test?my_param=test

我如何知道参数或任何注入的数据是否被正确过滤？Rails 3 API 没有指定它过滤传递给控制器​​的数据，但我想确保在使用 params 数据之前在控制器中安全地过滤 params[:my_param]。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:56:43.670

默认情况下，Rails 框架不会为`GET`请求提供保护。link_to 标记正在发送一个 http 获取请求。

如果是`POST/PUT/DELETE`请求，则 Rails`protect_from_forgery`用于验证数据发送 url

但是，在您的情况下，编写一个简单的方法来验证您的 get 请求数据并不难，

您可以编写一个`before_filter`来检查 GET 请求的发送参数

高温高压

# c# - 在 XNA 中创建墙

> ID：14147114
> 
> 赞同：0
> 
> 时间：2013-01-03T20:56:30.437
> 
> 标签：c#, xna, collision

所以我正在使用 C# 在 XNA 中创建一个游戏，并且我在随机位置创建了墙壁，我试图阻止它们穿过它们/当它们击中它们时被传送到屏幕上的点。（注意，左右现在有效，只是顶部和底部）

```
if (collision(wallRect[k], wallColours, pacmanRect, pacmanColor, 0))
//Collision works, not an issue here
{
    if (pacmanRect.Bottom > wallRect[k].Top && pacmanRect.Top < wallRect[k].Bottom)
    {
        if (pacmanRect.Right >= wallRect[k].Left  
            && pacmanRect.Right < wallRect[k].Right)
        {
            pacmanPos.X = wallRect[k].X - frameSize.X; 
            //frameSize is the size of the pacman sprite
        }                                
        else if (pacmanRect.Left <= wallRect[k].Right 
                  && pacmanRect.Left > wallRect[k].Left)
        {
            pacmanPos.X = wallRect[k].X + frameSize.X / 8;
        }
    }
    else if (pacmanRect.Right > wallRect[k].Left && pacmanRect.Left < wallRect[k].Right)
    {
        if (pacmanRect.Bottom >= wallRect[k].Top)
        {
            pacmanPos.Y = wallRect[k].Y - frameSize.Y / 8;
        }                  
        else if (pacmanRect.Top <= wallRect[k].Bottom)
        {
             pacmanPos.Y = wallRect[k].Y + frameSize.Y / 8;
        }
   }
   playSound(collisionSoundInstance);
} 
```

这是游戏循环中 pacmanPos 更新的最后一点。那么我将如何使墙壁成为真正的墙壁，而您不能穿过它们呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:12:05.887

```
if (pacmanRect.Bottom > wallRect[k].Top && pacmanRect.Top < wallRect[k].Bottom) 
```

这有意义吗？我认为 Pacman 不可能在墙的顶部上方，但同时在墙的底部下方（除非您的 y 坐标系在向下方向上为正，即使这样，逻辑仍然看起来很可疑）

我建议在纸上画出其中一个状态，然后根据你在纸上看到的内容逐行在脑海中检查你的代码。例如，绘制 Pacman 的最底部边缘与墙的最顶部边缘重叠的状态。然后浏览您的代码，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:17:10.773

如果你有一个仅限于二维的游戏，你应该使用[Box2D](http://box2dxna.codeplex.com/)，这会让你的生活更轻松。

*如果您想保留自己的代码，请参阅评论*

# google-apps-script - 如何从电子表格加载特定工作表

> ID：14147115
> 
> 赞同：15
> 
> 时间：2013-01-03T20:56:32.230
> 
> 标签：google-apps-script, google-sheets

我有一个包含很多工作表的电子表格，我需要加载其中一个工作表，我该怎么做？

这是我的电子表格中的表格照片 ![床单](../Images/1b27be759398b7ad65167fb8a14d3fc0.png)

这是我的想法如何做到这一点：

```
var sheet = SpreadsheetApp.openById(index).getSheetByName('Geração de Demanda'); 
```

那应该工作吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-03T21:16:18.763

你快到了......你想要的是让这张纸“活跃”，所以试试这个：

```
var sheet = SpreadsheetApp.getActiveSpreadsheet();
SpreadsheetApp.setActiveSheet(sheet.getSheetByName('Geração de Demanda')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-19T13:39:09.873

希望你最后一切都好

您还可以创建一个包含所有工作表名称的下拉列表并在脚本下方运行以自动转到指定工作表。

```
function goto () {

var ss = SpreadsheetApp.getActiveSpreadsheet();
var nameRange = ss.getActiveSheet().getRange(2, 2);//the drop down is in B2 cell
var nameValue = nameRange.getValue();

ss.setActiveSheet(ss.getSheetByName(nameValue));

} 
```

希望这也会有所帮助

祝你有个好的一天

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T01:06:23.570

我知道这是一个老问题。但仍然... var ss = SpreadsheetApp.getActiveSpreadsheet();

var sheet = ss.getSheets()[1];

我想这是最方便的方法，因为您不必处理名称，只需指明工作表编号... [1] 表示第二张工作表.​​..您可能会猜到编号从 0 开始...

# linux - gdb如何退出wh模式

> ID：14147117
> 
> 赞同：6
> 
> 时间：2013-01-03T20:56:35.750
> 
> 标签：linux, debugging, gdb

gdb 中的“wh”模式对我来说效果不佳。当我转储一些数据时，命令窗口和程序文本窗口会重叠，看起来很乱。我想退出 wh 模式而不退出调试器并且不杀死正在运行的程序。我已经设置了几个断点，所以我不想退出调试器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T05:10:00.853

Cx Ca
Cx a
Cx A

```
 Enter or leave the TUI mode. 
```

文档[在这里](http://sourceware.org/gdb/current/onlinedocs/gdb/TUI-Keys.html#TUI-Keys)。

# doctrine - 一个简单的 innerJoin Doctrine 查询

> ID：14147121
> 
> 赞同：0
> 
> 时间：2013-01-03T20:56:43.277
> 
> 标签：doctrine, dql

我试图生成一个简单的 SQL 选择：

```
SELECT c.com_id, c.pro_id, c.com_nombre 
FROM bd_fn.fn_comuna c  
inner join bd_fn.fn_provincia p 
on (c.pro_id = p.pro_id) 
where p.pro_nombre = 'namepro'; 
```

但 DQL 抛出此错误：

> 带有消息“未知关系别名 fn_provincia”的 Doctrine_Table_Exception。

教义版本是 1.XX，持久性是由 Visual Paradigm 创建的。DQL 是这样的：

```
$q = Doctrine_Query::create()
    ->select('c.com_id')
    ->from('fn_comuna c')
    ->innerJoin('c.fn_provincia p')
    ->where('p.pro_nombre=?',$namepro); 
```

fn_comuna.php 类

```
<?php
/**
 * "Visual Paradigm: DO NOT MODIFY THIS FILE!"
 * 
 * This is an automatic generated file. It will be regenerated every time 
 * you generate persistence class.
 * 
 * Modifying its content may cause the program not work, or your work may lost.
 */

class Fn_comuna extends Doctrine_Record {
  public function setTableDefinition() {
    $this->setTableName('bd_fn.fn_comuna');
    $this->hasColumn('com_id', 'integer', 4, array(
        'type' => 'integer',
        'length' => 4,
        'unsigned' => false,
        'notnull' => true,
        'primary' => true, 
        'autoincrement' => false,
      )
    );
    $this->hasColumn('pro_id', 'integer', 4, array(
        'type' => 'integer',
        'length' => 4,
        'unsigned' => false,
        'notnull' => true,
      )
    );
    $this->hasColumn('com_nombre', 'string', 100, array(
        'type' => 'string',
        'length' => 100,
        'fixed' => false,
        'notnull' => true,
      )
    );
  }

  public function setUp() {
    parent::setUp();
    $this->hasOne('Fn_provincia as pro', array(
        'local' => 'pro_id', 
        'foreign' => 'pro_id'
      )
    );
    $this->hasMany('Fn_institucion as fn_institucion', array(
        'local' => 'com_id', 
        'foreign' => 'com_id'
      )
    );
    $this->hasMany('Fn_replegal as fn_replegal', array(
        'local' => 'com_id', 
        'foreign' => 'com_id'
      )
    );
  }

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:04:48.813

从模型类中可以看出，`fn_comuna`&之间的关系`fn_provincia`称为`pro`。

```
$this->hasOne('Fn_provincia as pro', array(
    'local' => 'pro_id', 
    'foreign' => 'pro_id'
  )
); 
```

所以你在处理join时必须使用这个名字：

```
$q = Doctrine_Query::create()
    ->select('c.com_id')
    ->from('fn_comuna c')
    ->innerJoin('c.pro p')
    ->where('p.pro_nombre=?', $namepro); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:17:47.763

改变：

```
p.pro_id = (SELECT p2.pro_id FROM etc.. 
```

至：

```
p.pro_id IN(SELECT p2.pro_id FROM etc.. 
```

不知道为什么你首先需要子查询，为什么不把它弄松并替换为：

```
where pro_nombre = 'namepro' 
```

# c# - 使用 c# 正则表达式解析多行

> ID：14147127
> 
> 赞同：-1
> 
> 时间：2013-01-03T20:57:05.743
> 
> 标签：c#, regex

我在正则表达式方面遇到了一些问题。

我有以下类型的字符串，我需要从中解析/获取数据

```
'Account'.Search = "[Id] is NULL OR NAME = ""0%"""
'Account'.Sort = "NAME, Address"
'Bank Objectives'.Search = "[Active Flg] = "Y""
'Bank'.Search = "[Id] is NULL"
'Bank'.Sort = "Transit"
'Bank Goals'.Search = "[Active Flg] = 'Y'"
....... 
```

以下表达式似乎有效

```
\s*(?:(?<search>(?:(=['"])?(?:.*)\1|.*)\.Search[^"']*(?:(=['"])?(?:.*)\1|.*))\s*$?(?<sort>(?:(=['"])?(?:.*)\1|.*)\.Sort[^"']*(?:(=['"])?(?:.*)\1|.*))?\s*$?) 
```

我可以得到像

```
search: 'Account'.Search = '[Id] is NULL OR NAME = ''0%'''
sort: 'Account'.Sort = "NAME, Address"
search: 'Bank Objectives'.Search = "[Active Flg] = "Y""
search: 'Bank'.Search = "[Id] is NULL"
sort: 'Bank'.Sort = "Transit"
search: 'Bank Goals'.Search = "[Active Flg] = 'Y'" 
```

但是，如果输入字符串没有换行符，那么我开始得到

```
search: 'Account'.Search = '[Id] is NULL OR NAME = ''0%''''Account'.Sort = "NAME, Address" 
```

我基本上从输入字符串中得到的是

```
Account
  Search = "[Id] is NULL OR NAME = ""0%"""
  Sort = "NAME, Address"
Bank Objectives 
  Search = "[Id] is NULL OR NAME = ""0%"""
  Sort = ""
..... 
```

也`(=['"])?(?:.*)\1|.*)`假设匹配引号，但它似乎也不起作用。

最终目标是将字符串传递`[Id] IS NULL or Name =""0%"""`给表达式编辑器，允许用户进行更改，然后只更新整个字符串的搜索部分，所以如果用户想要以 开头的帐户名`bob`，我需要生成

```
'Account'.Search = "Name like 'bob%'"
'Account'.Sort = "NAME, Address"
'Bank Objectives'.Search = "[Active Flg] = "Y""
'Bank'.Search = "[Id] is NULL"
'Bank'.Sort = "Transit"
'Bank Goals'.Search = "[Active Flg] = 'Y'"
....... 
```

我已经构建了那块，它正在解析这个可以有多个条目的字符串。字符串也可以只包含

```
"Name like 'bob%'" 
```

所以我要弄清楚它实际上是

'Account'.Search = "名字像'bob%'"

所以我需要知道输入字符串是否与正则表达式匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:21:56.383

使用正则表达式不太可能获得 100% 的解决方案。如果您的语法非常复杂并且可能接收到不符合要求的输入，您希望生成一个词法解析器。有很多关于如何为 .Net 做到这一点的资源。

以下是一些入门链接：

*   http://stackoverflow.com/questions/1669/learning-to-write-a-compiler
*   http://blogs.microsoft.co.il/blogs/sasha/archive/2010/10/06/writing-a-compiler-in-c-lexical-analysis.aspx
*   http://www.antlr.org/

更新：

如果你必须使用正则表达式，为什么不把它分解成几个小问题呢？首先，按换行符拆分并单独解析每一行。然后，使用一组更简单的正则表达式来分解字符串。

例如，将每一行解析为 [obj].[verb] = [rule] ：
`/'(?<obj>[^']+)'.(?<verb>[^\w=]+\)\s*=\s*"(?<rule>.+)"/`

然后将规则解析为具有以下内容的字段：
`/\[[^\]+\]/`

# java - 在tomcat 5.x上运行的jsp页面中getParameter文本字段返回null

> ID：14147128
> 
> 赞同：0
> 
> 时间：2013-01-03T20:57:06.847
> 
> 标签：java, javascript, forms, jsp, tomcat5.5

我收到一个奇怪的页面错误，页面在每次提交表单时在 nullpointerexception 到实际执行之间不断波动。我正在编写一个简单的 jsp 页面并在 tomcat 5.x 服务器上运行它。我正在从表单的文本字段中获取数据并在表单提交时对其进行处理。这是我正在尝试的代码：

```
form id="mainForm" method=POST action="index.jsp">

<input type="text" name="reportName" size=20> 

<a class="btnBlue btnBlueRight" href="#" onclick="document.getElementById('mainForm').submit();" > 

            <% 
            if(request.getParameter("reportName")!=null){
            //do things
            else
            //print message
            %> 
```

对于此代码，地址栏中的页面地址是 localhost:8080/# 或 localhost:8080/index.jsp 用于每个表单提交。我是 jsp 新手，所以无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:08:55.123

这是因为reportName没有设置**第一次**页面加载的位置！例如尝试导航

> 本地主机：8080/index.jsp?reportName=all

# api - 将IOS app服务调用重定向到不同的环境服务

> ID：14147133
> 
> 赞同：0
> 
> 时间：2013-01-03T20:57:43.687
> 
> 标签：api, redirect

我的 iPad 应用程序是由第三方开发的，它正在调用我的 restful 服务进行注册和登录。现在我想从指向旧服务 URL 的 XCode 项目启动 iPad 应用程序并重定向服务调用以调用新服务 URL 而无需修改代码。

例如：登录请求来自[http://xx.com/login](http://xx.com/login)并通过解释一些工具重定向到[http://xx.com/services/login 。](http://xx.com/services/login)

请给我建议或让我知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:08:48.593

我使用 MapRemote 在 Charles 中重定向 url。已设置 Map from 和 Map to 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:02:16.090

[http://www.charlesproxy.com/](http://www.charlesproxy.com/)是你想要的。这可以让你断点、转发和对你的请求做任何疯狂的事情。安装在你的mac上，把它和你的手机放在同一个wifi下，并使用你的mac的ip作为代理。

# logging - 更改现有 categorySource 的名称，然后在运行时设置为 defaultCategory（Ent Lib 5）

> ID：14147134
> 
> 赞同：2
> 
> 时间：2013-01-03T20:57:44.027
> 
> 标签：logging, runtime, enterprise-library

我有一个名为 appName 的值，在存储应用程序名称的应用程序配置中定义。应用程序通过数据库跟踪侦听器将日志写入数据库。我想要做的是让应用程序获取它的 appName 值并将 defaultCategory 设置为在运行时具有相同的值。我假设我还必须将现有类别重命名为 appName 的值。除了该类别的名称和对 defaultCategory 的更改（重命名的类别）之外，我不想影响任何其他内容。

这是配置部分， TESTING 是我想在运行时更改的值：

```
<loggingConfiguration name="" tracingEnabled="true" defaultCategory="TESTING">

...

<categorySources>

 ...

 <add switchValue="All" name="TESTING">
  <listeners>
    <add name="Database Trace Listener" />
  </listeners>
 </add>
</categorySources> 
```

我已经尝试查找解决方案/示例，但最接近我发现的内容重写了整个部分，我宁愿避免这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T06:37:48.520

企业库支持单个应用程序块的运行时编程配置或设计时声明性配置。但是开箱即用，您不能真正为同一个应用程序块轻松混合这两种方法。

您提到了一种方法，即修改配置并将其写回。

另一种方法是在运行时以编程方式设置所有配置。

如果您使用外部配置文件（例如，指向实际企业库配置的 app.config/web.config 中的 FileConfigurationSource），另一种可行的方法是加载配置信息，然后在内存中对其进行修改。使用外部配置文件的原因是为了避免在尝试修改配置信息时出现只读配置异常。

文章[Enterprise Library Programmatic Configuration](http://randylevy.wordpress.com/2012/10/02/enterprise-library-programmatic-configuration/)中介绍了最后一种方法。

# html - 图片未在 IE9 中加载

> ID：14147135
> 
> 赞同：1
> 
> 时间：2013-01-03T20:57:45.083
> 
> 标签：html, internet-explorer-9

在我的测试 facebook 页面的应用程序中，我显示的图像在 Chrome/Firefox 上加载正常，但在 IE9 上加载失败，我得到的只是 304。我一直在浏览类似的 IE9 问题，但没有找到满意的答案来解决这个问题. 我还清除了 IE9 中的 TIF，它已删除所有 304，但将图像文件的状态更改为“（中止）”。附件是 Chrome 和 IE9 的屏幕截图。

在铬-

![在此处输入图像描述](../Images/edf2ab01602638c156dd5f4924803b7d.png)

在 IE9-

![在此处输入图像描述](../Images/216bd821349517600bdf8e06c8532e9f.png)

IE9中的状态-

![在此处输入图像描述](../Images/5d5841cc8e6ac1d594d1f5e62cb8e0c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:08:00.117

在 img src 字段中添加“http://”在 jfiddle 上的 ie9 中对我来说很好...

# c++ - 将生成的进程的输出捕获到字符串

> ID：14147138
> 
> 赞同：11
> 
> 时间：2013-01-03T20:57:51.760
> 
> 标签：c++, logging, parallel-processing

**背景：**

* * *

我正在开发一个程序，该程序需要能够捕获程序的`stdout`,`stderr`和返回值。理想情况下，我想将这些捕获在一个字符串中，该字符串存储在我的对象中，该对象包含过程的详细信息。我目前有一些代码可以通过使用一些（在我看来）古老的 C 文件句柄魔法将输出保存到文件中来工作。每当我想输出结果时，我都会打开该文件并打印内容。

有时（当我生成的进程继续运行时）我的可执行文件的下一次执行会中断，因为它无法打开文件进行写入。

**问题陈述：**

* * *

我正在寻找一种方法，将`stdout`Windows 中创建的进程的输出保存到一个字符串，然后`stderr`以更安全、更现代的方式保存到另一个字符串。这样我就可以在我想输出每个创建过程的结果的任何时候打印这些内容。

**我丑陋的代码：**

* * *

**主要块-**

```
 int stdoutold = _dup(_fileno(stdout)); //make a copy of stdout
    int stderrold = _dup(_fileno(stdout)); //make a copy of stderr
    FILE *f; 

    if(!fopen_s(&f, "name_of_my_file", "w")){ //make sure I can write to the file
        _dup2(_fileno(f), _fileno(stdout)); //make stdout point to f
        _dup2(_fileno(f), _fileno(stderr)); //make stderr point to f

        fork("command_I_want_to_run", &pi); //run my fake fork (see below)
    }
    else{
        ...//error handling
    }
    _close(_fileno(stdout)); //close tainted stdout
    _close(_fileno(stderr)); //close tainted stderr
    _close(_fileno(f)); //close f
    _dup2(stdoutold, _fileno(stdout)); //fix stdout
    _dup2(stderrold, _fileno(stderr)); //fix stderr 
```

**fork-**（您可以将其视为 CreateProcess，但以防万一有人需要查看此处发生的情况）

```
int fork(std::string s, PROCESS_INFORMATION* pi){
char infoBuf[INFO_BUFFER_SIZE];
int bufCharCount = 
    ExpandEnvironmentStrings(s.c_str(), infoBuf, INFO_BUFFER_SIZE ); 
...
    STARTUPINFO si;
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( pi, sizeof(*pi) );
    LPSTR str = const_cast<char *>(infoBuf);
    if(!CreateProcess(NULL,
        str,
        NULL,
        NULL,
        TRUE,
        0,
        NULL,
        NULL,
        &si,
        pi)
    ){
        int err = GetLastError();
        printf("CreateProcess failed (%d).\n", err);
        CloseHandle((*pi).hProcess);
        CloseHandle((*pi).hThread);
        return err;
    }
return 0;
} 
```

**笔记：**

* * *

*   我正在使用 VS 2010
*   我想继续使用多个进程，而不是线程，因为我需要运行的内容才能拥有自己的进程的自由

**编辑：**

* * *

额外说明：我还尝试在调用运行给定代码的函数后立即等待该过程完成，因此当时我可以使用`stdout`和的结果`stderr`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-03T23:55:32.690

Eddy Luten 的回答让我有了一个好的方向，但是 MSDN 文档（虽然很详细）有一些问题。主要是，您需要确保关闭所有不使用的句柄。此外，它只是有希望用户理解的代码。

所以相反，这是我希望人们理解的代码墙：D

```
#include <string>
#include <iostream>
#include <windows.h> 
#include <stdio.h>
#pragma warning( disable : 4800 ) // stupid warning about bool
#define BUFSIZE 4096
HANDLE g_hChildStd_OUT_Rd = NULL;
HANDLE g_hChildStd_OUT_Wr = NULL;
HANDLE g_hChildStd_ERR_Rd = NULL;
HANDLE g_hChildStd_ERR_Wr = NULL;

PROCESS_INFORMATION CreateChildProcess(void); 
void ReadFromPipe(PROCESS_INFORMATION); 

int main(int argc, char *argv[]){ 
    SECURITY_ATTRIBUTES sa; 
    printf("\n->Start of parent execution.\n");
    // Set the bInheritHandle flag so pipe handles are inherited. 
    sa.nLength = sizeof(SECURITY_ATTRIBUTES); 
    sa.bInheritHandle = TRUE; 
    sa.lpSecurityDescriptor = NULL; 
    // Create a pipe for the child process's STDERR. 
    if ( ! CreatePipe(&g_hChildStd_ERR_Rd, &g_hChildStd_ERR_Wr, &sa, 0) ) {
        exit(1); 
    }
    // Ensure the read handle to the pipe for STDERR is not inherited.
    if ( ! SetHandleInformation(g_hChildStd_ERR_Rd, HANDLE_FLAG_INHERIT, 0) ){
        exit(1);
    }
    // Create a pipe for the child process's STDOUT. 
    if ( ! CreatePipe(&g_hChildStd_OUT_Rd, &g_hChildStd_OUT_Wr, &sa, 0) ) {
        exit(1);
    }
    // Ensure the read handle to the pipe for STDOUT is not inherited
    if ( ! SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0) ){
        exit(1); 
    }
    // Create the child process. 
    PROCESS_INFORMATION piProcInfo = CreateChildProcess();

    // Read from pipe that is the standard output for child process. 
    printf( "\n->Contents of child process STDOUT:\n\n", argv[1]);
    ReadFromPipe(piProcInfo); 

    printf("\n->End of parent execution.\n");

    // The remaining open handles are cleaned up when this process terminates. 
    // To avoid resource leaks in a larger application, 
    //   close handles explicitly.
    return 0; 
} 

// Create a child process that uses the previously created pipes
//  for STDERR and STDOUT.
PROCESS_INFORMATION CreateChildProcess(){
    // Set the text I want to run
    char szCmdline[]="test --log_level=all --report_level=detailed";
    PROCESS_INFORMATION piProcInfo; 
    STARTUPINFO siStartInfo;
    bool bSuccess = FALSE; 

    // Set up members of the PROCESS_INFORMATION structure. 
    ZeroMemory( &piProcInfo, sizeof(PROCESS_INFORMATION) );

    // Set up members of the STARTUPINFO structure. 
    // This structure specifies the STDERR and STDOUT handles for redirection.
    ZeroMemory( &siStartInfo, sizeof(STARTUPINFO) );
    siStartInfo.cb = sizeof(STARTUPINFO); 
    siStartInfo.hStdError = g_hChildStd_ERR_Wr;
    siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;
    siStartInfo.dwFlags |= STARTF_USESTDHANDLES;

    // Create the child process. 
    bSuccess = CreateProcess(NULL, 
        szCmdline,     // command line 
        NULL,          // process security attributes 
        NULL,          // primary thread security attributes 
        TRUE,          // handles are inherited 
        0,             // creation flags 
        NULL,          // use parent's environment 
        NULL,          // use parent's current directory 
        &siStartInfo,  // STARTUPINFO pointer 
        &piProcInfo);  // receives PROCESS_INFORMATION
    CloseHandle(g_hChildStd_ERR_Wr);
    CloseHandle(g_hChildStd_OUT_Wr);
    // If an error occurs, exit the application. 
    if ( ! bSuccess ) {
        exit(1);
    }
    return piProcInfo;
}

// Read output from the child process's pipe for STDOUT
// and write to the parent process's pipe for STDOUT. 
// Stop when there is no more data. 
void ReadFromPipe(PROCESS_INFORMATION piProcInfo) {
    DWORD dwRead; 
    CHAR chBuf[BUFSIZE];
    bool bSuccess = FALSE;
    std::string out = "", err = "";
    for (;;) { 
        bSuccess=ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &dwRead, NULL);
        if( ! bSuccess || dwRead == 0 ) break; 

        std::string s(chBuf, dwRead);
        out += s;
    } 
    dwRead = 0;
    for (;;) { 
        bSuccess=ReadFile( g_hChildStd_ERR_Rd, chBuf, BUFSIZE, &dwRead, NULL);
        if( ! bSuccess || dwRead == 0 ) break; 

        std::string s(chBuf, dwRead);
        err += s;

    } 
    std::cout << "stdout:" << out << std::endl;
    std::cout << "stderr:" << err << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-01T00:25:34.673

Shawn Blakesley 代码是对 Microsoft 示例代码的良好改造，但是当存在大量无序的 stdout 和 stderr 交错流时，它会出现一些问题。并且一些句柄被泄露（这对于示例代码来说是可以的）。拥有后台线程和 PeekNamedPipe() 调用确保代码的行为更类似于 POSIX 系统调用：

```
#include <windows.h> 
#include <stdio.h>
#include <malloc.h>

#ifdef __cplusplus
#define BEGIN_C extern "C" {
#define END_C } // extern "C"
#define null nullptr
#else
#define BEGIN_C
#define END_C
#define null ((void*)0)
#endif

BEGIN_C

int system_np(const char* command, int timeout_milliseconds, 
              char* stdout_data, int stdout_data_size, 
              char* stderr_data, int stderr_data_size, int* exit_code);

typedef struct system_np_s {
    HANDLE child_stdout_read;
    HANDLE child_stderr_read;
    HANDLE reader;
    PROCESS_INFORMATION pi;
    const char* command;
    char* stdout_data;
    int   stdout_data_size;
    char* stderr_data;
    int   stderr_data_size;
    int*  exit_code;
    int   timeout; // timeout in milliseconds or -1 for INIFINTE
} system_np_t;

static char stdout_data[16 * 1024 * 1024];
static char stderr_data[16 * 1024 * 1024];

int main(int argc, char *argv[]) { 
    int bytes = 1;
    for (int i = 1; i < argc; i++) {
        bytes += (int)strlen(argv[i]) + 1;
    }
    char* command = (char*)alloca(bytes);
    command[0] = 0;
    char* p = command;
    for (int i = 1; i < argc; i++) {
        int n = (int)strlen(argv[i]);
        memcpy(p, argv[i], n); p += n;
        *p = (i == argc - 1) ? 0x00 : 0x20; 
        p++;
    }
    int exit_code = 0;
    if (command[0] == 0) {
        command = (char*)"cmd.exe /c \"dir /w /b\"";
    }
    int r = system_np(command, 100 * 1000, stdout_data, sizeof(stdout_data), stderr_data, sizeof(stderr_data), &exit_code);
    if (r != 0) {
        fprintf(stderr, "system_np failed: %d 0x%08x %s", r, r, strerror(r));
        return r;
    } else {
        fwrite(stdout_data, strlen(stdout_data), 1, stdout);
        fwrite(stderr_data, strlen(stderr_data), 1, stderr);
        return exit_code;
    }
}

static int peek_pipe(HANDLE pipe, char* data, int size) {         
    char buffer[4 * 1024];
    DWORD read = 0;  
    DWORD available = 0;
    bool b = PeekNamedPipe(pipe, null, sizeof(data), null, &available, null);
    if (!b) {
        return -1;
    } else if (available > 0) {
        int bytes = min(sizeof(buffer), available);
        b = ReadFile(pipe, buffer, bytes, &read, null);
        if (!b) {
            return -1;
        }
        if (data != null && size > 0) {
            int n = min(size - 1, (int)read);
            memcpy(data, buffer, n);
            data[n + 1] = 0; // always zero terminated
            return n;
        }
    } 
    return 0;
}

static DWORD WINAPI read_from_all_pipes_fully(void* p) {
    system_np_t* system = (system_np_t*)p;
    unsigned long long milliseconds = GetTickCount64(); // since boot time
    char* out = system->stdout_data != null && system->stdout_data_size > 0 ? system->stdout_data : null;
    char* err = system->stderr_data != null && system->stderr_data_size > 0 ? system->stderr_data : null;
    int out_bytes = system->stdout_data != null && system->stdout_data_size > 0 ? system->stdout_data_size - 1 : 0;
    int err_bytes = system->stderr_data != null && system->stderr_data_size > 0 ? system->stderr_data_size - 1 : 0;
    for (;;) {
        int read_stdout = peek_pipe(system->child_stdout_read, out, out_bytes);
        if (read_stdout > 0 && out != null) { out += read_stdout; out_bytes -= read_stdout; } 
        int read_stderr = peek_pipe(system->child_stderr_read, err, err_bytes);
        if (read_stderr > 0 && err != null) { err += read_stderr; err_bytes -= read_stderr; } 
        if (read_stdout < 0 && read_stderr < 0) { break; } // both pipes are closed
        unsigned long long time_spent_in_milliseconds = GetTickCount64() - milliseconds;
        if (system->timeout > 0 && time_spent_in_milliseconds > system->timeout) { break; }
        if (read_stdout == 0 && read_stderr == 0) { // nothing has been read from both pipes
            HANDLE handles[2] = {system->child_stdout_read, system->child_stderr_read};
            WaitForMultipleObjects(2, handles, false, 1); // wait for at least 1 millisecond (more likely 16)
        }
    }
    if (out != null) { *out = 0; }
    if (err != null) { *err = 0; }
    return 0;
}

static int create_child_process(system_np_t* system) {
    SECURITY_ATTRIBUTES sa = {0}; 
    sa.nLength = sizeof(SECURITY_ATTRIBUTES); 
    sa.bInheritHandle = true; 
    sa.lpSecurityDescriptor = null; 
    HANDLE child_stdout_write = INVALID_HANDLE_VALUE;
    HANDLE child_stderr_write = INVALID_HANDLE_VALUE;
    if (!CreatePipe(&system->child_stderr_read, &child_stderr_write, &sa, 0) ) {
        return GetLastError(); 
    }
    if (!SetHandleInformation(system->child_stderr_read, HANDLE_FLAG_INHERIT, 0) ){
        return GetLastError(); 
    }
    if (!CreatePipe(&system->child_stdout_read, &child_stdout_write, &sa, 0) ) {
        return GetLastError(); 
    }
    if (!SetHandleInformation(system->child_stdout_read, HANDLE_FLAG_INHERIT, 0) ){
        return GetLastError(); 
    }
    // Set the text I want to run
    STARTUPINFO siStartInfo = {0};
    siStartInfo.cb = sizeof(STARTUPINFO); 
    siStartInfo.hStdError = child_stderr_write;
    siStartInfo.hStdOutput = child_stdout_write;
    siStartInfo.dwFlags |= STARTF_USESTDHANDLES | STARTF_USESHOWWINDOW;
    siStartInfo.wShowWindow = SW_HIDE;
    bool b = CreateProcessA(null, 
        (char*)system->command,
        null,               // process security attributes 
        null,               // primary thread security attributes 
        true,               // handles are inherited 
        CREATE_NO_WINDOW,   // creation flags 
        null,               // use parent's environment 
        null,               // use parent's current directory 
        &siStartInfo,       // STARTUPINFO pointer 
        &system->pi);       // receives PROCESS_INFORMATION
    int err = GetLastError();
    CloseHandle(child_stderr_write);
    CloseHandle(child_stdout_write);
    if (!b) {
        CloseHandle(system->child_stdout_read); system->child_stdout_read = INVALID_HANDLE_VALUE;
        CloseHandle(system->child_stderr_read); system->child_stderr_read = INVALID_HANDLE_VALUE;
    }
    return b ? 0 : err;
}

int system_np(const char* command, int timeout_milliseconds, 
              char* stdout_data, int stdout_data_size, 
              char* stderr_data, int stderr_data_size, int* exit_code) {
    system_np_t system = {0};
    if (exit_code != null) { *exit_code = 0; }
    if (stdout_data != null && stdout_data_size > 0) { stdout_data[0] = 0; }
    if (stderr_data != null && stderr_data_size > 0) { stderr_data[0] = 0; }
    system.timeout = timeout_milliseconds > 0 ? timeout_milliseconds : -1; 
    system.command = command;
    system.stdout_data = stdout_data;
    system.stderr_data = stderr_data;
    system.stdout_data_size = stdout_data_size;
    system.stderr_data_size = stderr_data_size;
    int r = create_child_process(&system);
    if (r == 0) {
        system.reader = CreateThread(null, 0, read_from_all_pipes_fully, &system, 0, null);
        if (system.reader == null) { // in theory should rarely happen only when system super low on resources
            r = GetLastError();
            TerminateProcess(system.pi.hProcess, ECANCELED);
        } else {
            bool thread_done  = WaitForSingleObject(system.pi.hThread, timeout_milliseconds) == 0;
            bool process_done = WaitForSingleObject(system.pi.hProcess, timeout_milliseconds) == 0;
            if (!thread_done || !process_done) {
                TerminateProcess(system.pi.hProcess, ETIME);
            }
            if (exit_code != null) {
                GetExitCodeProcess(system.pi.hProcess, (DWORD*)exit_code);
            }        
            CloseHandle(system.pi.hThread);
            CloseHandle(system.pi.hProcess);
            CloseHandle(system.child_stdout_read); system.child_stdout_read = INVALID_HANDLE_VALUE;
            CloseHandle(system.child_stderr_read); system.child_stderr_read = INVALID_HANDLE_VALUE;
            WaitForSingleObject(system.reader, INFINITE); // join thread
            CloseHandle(system.reader);
        }
    }
    if (stdout_data != null && stdout_data_size > 0) { stdout_data[stdout_data_size - 1] = 0; }
    if (stderr_data != null && stderr_data_size > 0) { stderr_data[stderr_data_size - 1] = 0; }
    return r; 
} 

END_C 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T22:10:46.503

您必须使用管道来捕获进程的标准输出流的内容。MSDN上有一个详细的例子来说明如何做到这一点：

[MSDN：创建具有重定向输入和输出的子进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.85%29.aspx)

# php - 插入在第一个瑞典 UTF-8 字符处被切断

> ID：14147142
> 
> 赞同：2
> 
> 时间：2013-01-03T20:58:03.290
> 
> 标签：php, mysql, utf-8

当我尝试将一些 html 代码插入到我的 mysql 数据库中时，文本在第一次出现 å、ä 或 ö（瑞典字母）时被剪切。我不知道为什么会这样。

我运行以下命令以确保为 UTF-8 设置了 mysql 连接：

`if(!mysql_set_charset('utf8', $link)) die(mysql_error());`

`$result = mysql_query("set names 'utf8'");`

我所有的 php 文档都以 UTF-8 编码。我在我的字符串上运行 mb_detect_encoding() 并返回“UTF-8”。我的数据库有 UTF-8 作为默认编码，我的表是排序规则中的 utf8_swedish_ci（我也尝试过 utf8_unicode_ci）。

mysql不返回错误。在我的表格中，我得到了从 0 开始到第一次出现瑞典字符的插入字符串的一部分。

我的插入功能：

```
function mysql_insert($table, $inserts) {
    $values = array_map('mysql_real_escape_string', array_values($inserts));
    $keys = array_keys($inserts);

    return mysql_query('INSERT INTO `'.$table.'` (`'.implode('`,`', $keys).'`) VALUES (\''.implode('\',\'', $values).'\')');
} 
```

如果我删除瑞典字母，整个字符串就会正确插入。

为什么会这样？

更新：

@david berra：查询很长，但我把它贴在这里。

```
INSERT 
    INTO `content` 
    (
        `text`,
        `added`,
        `updated`,
        `ref`,
        `headers`,
        `ID`,
        `groups`
    ) 
    VALUES 
    (
        '\r\n<div style=\"width: 1078.1568px;height: 785.8944px;\">\r\n <div style=\"vertical-align: top;position: absolute;z-index: -244;left: 1px;top: 0px;width: 1075px;height: 29px;\" id=\"page1block0\" class=\"building_block\">\r\n     <p>\r\n         <span>\r\n              Sida\r\n            </span>\r\n         <span>\r\n              1\r\n           </span>\r\n         <span>\r\n              . Copyright Erik Boberg\r\n         </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 6;left: 0px;top: 7px;width: 1075px;height: 34px;\" id=\"page1block1\" class=\"building_block\">\r\n        <h1 style=\"text-align: center;\">\r\n          <span>\r\n              Hjärtmuskelischemi\r\n          </span>\r\n     <a name=\"Hjrtmuskelischemi\"></a>\r\n      </h1>\r\n   </div>\r\n  <div style=\"position: absolute;z-index: 8;left: 153px;top: 120px;width: 443px;height: 252px;\" id=\"page1block2\" class=\"building_block\">\r\n        <img width=443 height=252 src=\"images/akuta_coronara_syndrom/image298.png\" />\r\n </div>\r\n  <div style=\"position: absolute;z-index: 9;left: 116px;top: 113px;width: 192px;height: 62px;\" id=\"page1block3\" class=\"building_block\">\r\n     <img width=192 height=62 src=\"images/akuta_coronara_syndrom/image299.png\" />\r\n  </div>\r\n  <div style=\"position: absolute;z-index: 10;left: 288px;top: 165px;width: 154px;height: 106px;\" id=\"page1block4\" class=\"building_block\">\r\n       <img width=154 height=106 src=\"images/akuta_coronara_syndrom/image300.png\" />\r\n </div>\r\n  <div style=\"position: absolute;z-index: 11;left: 227px;top: 267px;width: 72px;height: 73px;\" id=\"page1block5\" class=\"building_block\">\r\n     <img width=72 height=73 src=\"images/akuta_coronara_syndrom/image304.png\" />\r\n   </div>\r\n  <div style=\"position: absolute;z-index: 12;left: 417px;top: 225px;width: 69px;height: 73px;\" id=\"page1block6\" class=\"building_block\">\r\n     <img width=69 height=73 src=\"images/akuta_coronara_syndrom/image308.png\" />\r\n   </div>\r\n  <div style=\"position: absolute;z-index: 13;left: 437px;top: 171px;width: 69px;height: 72px;\" id=\"page1block7\" class=\"building_block\">\r\n     <img width=69 height=72 src=\"images/akuta_coronara_syndrom/image312.png\" />\r\n   </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 14;left: 120px;top: 39px;width: 216px;height: 71px;\" id=\"page1block8\" class=\"building_block\">\r\n     <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Kranskärl (stora epikardiella artärer)<br />\r\n            </span>\r\n         <span>\r\n              - Utgör ej någon signifikant källa till flödesresistens sålänge de ej ockluderats av aterosklerotiska plack.\r\n            </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 15;left: 340px;top: 40px;width: 251px;height: 126px;\" id=\"page1block9\" class=\"building_block\">\r\n        <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Prearteriolära kärl samt Arterioler och intramyokardiella kapillärer<br />\r\n          </span>\r\n         <span>\r\n              - Utgör huvudsakliga resistensen till flödet i hjärtats cirkulation hos den friska individen.<br />\r\n  - De kan dilateras som svar på metabola stimuli och autoreglering vid ökat syrebehov och kan på så sätt kraftigt minska sin resistens och därmed öka blodflödet till den behövande hjärtmuskeln.\r\n           </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"position: absolute;z-index: 16;left: 185px;top: 116px;width: 42px;height: 12px;\" id=\"page1block10\" class=\"building_block\">\r\n        <img width=42 height=12 src=\"images/akuta_coronara_syndrom/image318.png\" />\r\n   </div>\r\n  <div style=\"position: absolute;z-index: 17;left: 237px;top: 219px;width: 144px;height: 153px;\" id=\"page1block11\" class=\"building_block\">\r\n      <img width=144 height=153 src=\"images/akuta_coronara_syndrom/image319.png\" alt=\"Text Box: \" />\r\n  </div>\r\n  <div style=\"position: absolute;z-index: 18;left: 202px;top: 122px;width: 68px;height: 101px;\" id=\"page1block12\" class=\"building_block\">\r\n       <img width=68 height=101 src=\"images/akuta_coronara_syndrom/image320.png\" />\r\n  </div>\r\n  <div style=\"position: absolute;z-index: 19;left: 119px;top: 219px;width: 118px;height: 68px;\" id=\"page1block13\" class=\"building_block\">\r\n       <img width=118 height=68 src=\"images/akuta_coronara_syndrom/image321.png\" alt=\"Text Box: \" />\r\n   </div>\r\n  <div style=\"position: absolute;z-index: 20;left: 114px;top: 121px;width: 27px;height: 100px;\" id=\"page1block14\" class=\"building_block\">\r\n       <img width=27 height=100 src=\"images/akuta_coronara_syndrom/image322.png\" />\r\n  </div>\r\n  <div style=\"position: absolute;z-index: 21;left: 392px;top: 220px;width: 191px;height: 169px;\" id=\"page1block15\" class=\"building_block\">\r\n      <img width=191 height=169 src=\"images/akuta_coronara_syndrom/image323.png\" alt=\"Text Box: \" />\r\n  </div>\r\n  <div style=\"position: absolute;z-index: 22;left: 42px;top: 93px;width: 73px;height: 59px;\" id=\"page1block16\" class=\"building_block\">\r\n      <img width=73 height=59 src=\"images/akuta_coronara_syndrom/image324.png\" />\r\n   </div>\r\n  <div style=\"position: absolute;z-index: 23;left: 0px;top: 136px;width: 121px;height: 231px;\" id=\"page1block17\" class=\"building_block\">\r\n        <img width=121 height=231 src=\"images/akuta_coronara_syndrom/image325.png\" alt=\"Text Box: \" />\r\n  </div>\r\n  <div style=\"position: absolute;z-index: 24;left: 871px;top: 44px;width: 119px;height: 115px;\" id=\"page1block18\" class=\"building_block\">\r\n       <img width=119 height=115 src=\"images/akuta_coronara_syndrom/image326.png\" />\r\n </div>\r\n  <div style=\"position: absolute;z-index: 25;left: 604px;top: 44px;width: 119px;height: 115px;\" id=\"page1block19\" class=\"building_block\">\r\n       <img width=119 height=115 src=\"images/akuta_coronara_syndrom/image333.png\" />\r\n </div>\r\n  <div style=\"position: absolute;z-index: 26;left: 604px;top: 200px;width: 120px;height: 115px;\" id=\"page1block20\" class=\"building_block\">\r\n      <img width=120 height=115 src=\"images/akuta_coronara_syndrom/image337.png\" />\r\n </div>\r\n  <div style=\"position: absolute;z-index: 27;left: 653px;top: 168px;width: 26px;height: 26px;\" id=\"page1block21\" class=\"building_block\">\r\n        <img width=26 height=26 src=\"images/akuta_coronara_syndrom/image343.png\" />\r\n   </div>\r\n  <div style=\"position: absolute;z-index: 28;left: 733px;top: 251px;width: 126px;height: 24px;\" id=\"page1block22\" class=\"building_block\">\r\n       <img width=126 height=24 src=\"images/akuta_coronara_syndrom/image344.png\" />\r\n  </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 29;left: 743px;top: 34px;width: 109px;height: 72px;\" id=\"page1block23\" class=\"building_block\">\r\n        <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Lipid-ackumulering i intima:\r\n            </span>\r\n         <span>\r\n              Börjar under första 10 levnadsåren\r\n          </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 30;left: 710px;top: 175px;width: 172px;height: 69px;\" id=\"page1block24\" class=\"building_block\">\r\n       <p style=\"text-align: center;\" class=Brödtext>\r\n            <span style=\"font-weight: bold;\">\r\n             Inducering av inflammation, aktivering av SMCs:\r\n         </span>\r\n         <span>\r\n              Ger bildning av aterosklerotiska plack. Börjar efter 30 års ålder.\r\n          </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"position: absolute;z-index: 31;left: 868px;top: 199px;width: 120px;height: 115px;\" id=\"page1block25\" class=\"building_block\">\r\n      <img width=120 height=115 src=\"images/akuta_coronara_syndrom/image347.png\" />\r\n </div>\r\n  <div style=\"position: absolute;z-index: 32;left: 913px;top: 167px;width: 26px;height: 26px;\" id=\"page1block26\" class=\"building_block\">\r\n        <img width=26 height=26 src=\"images/akuta_coronara_syndrom/image353.png\" />\r\n   </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 33;left: 977px;top: 137px;width: 97px;height: 104px;\" id=\"page1block27\" class=\"building_block\">\r\n       <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Fissurbildning eller ruptur med efterföljande trombos:\r\n          </span>\r\n         <span>\r\n              Sker vanligen efter 40 års ålder.\r\n           </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"position: absolute;z-index: 34;left: 662px;top: 70px;width: 79px;height: 115px;\" id=\"page1block28\" class=\"building_block\">\r\n        <img width=79 height=115 src=\"images/akuta_coronara_syndrom/image355.png\" />\r\n  </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 35;left: 1px;top: 401px;width: 269px;height: 368px;\" id=\"page1block29\" class=\"building_block\">\r\n        <h4>\r\n            <span>\r\n              Hjärtmuskelischemi\r\n          </span>\r\n     </h4>\r\n       <p>\r\n         <span>\r\n              - Inträffar när hjärtats näringsbehov inte kan mötas av dess näringstillförsel.<br />\r\n  - Ökade behov: Takykardi, ökad väggtension (pga ökad pre-/afterload), ökad kontraktilitet<br />\r\n  - Minskad syretillförsel: Anemi, minskat CPP, förkortad diastole, kranskärlssjukdom, trombogenes<br />\r\n  - Ofta samverkar flera faktorer för att skapa ischemin, tex en begynnande ocklusion av kränskärlen med ateroskleros + ett ökat behov till följd av hypertrofi.<br />\r\n  - Anemi är sällan ensam utlösare av ischemi, men kan vara den tuva som stjälper lasset om den näringsgivande förmågan är nedsatt till följd av andra faktorer.<br />\r\n  - I början av sjukdomen fås oftast besvär endast vid fysisk ansträngning då detta ställer krav på förmågan hos hjärtats cirkulation att leverera näring till den arbetande muskulaturen.\r\n            </span>\r\n     </p>\r\n        <h4>\r\n            <span>\r\n              Ischemi pga ateroskleros\r\n            </span>\r\n     </h4>\r\n   </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 36;left: 271px;top: 401px;width: 269px;height: 369px;\" id=\"page1block30\" class=\"building_block\">\r\n      <p>\r\n         <span>\r\n              - När en stenos minskar lumen i ett kranskärl med 50% begränsas förmågan att öka flödet för att möta ett ökat behov hos hjärtmuskulaturen.<br />\r\n  - När stenosen minskar lumen med 80% kan blodflödet begränsas även i vila.<br />\r\n  - En stenos kan utvecklas gradvis till följd av långsam placktillväxt. När ischemin på detta sätt börjar bli kritisk stimuleras angiogenes och kollateralkärl bildas i området. Dessa kan ofta försörja den nedströms muskulaturen i vila, trots stenosen, men kan sällan möta de krav som ställs vid fysisk ansträngning. Patienten får stabil angina.<br />\r\n  - Stenoser kan även utvecklas plötsligt till följd av att ett mindre plack eroderar i sin yta varpå trombogena substanser exponeras för blodet som passerar. Trombocyter ansamlas då och koagulationskaskaden startar så att en trombos bildas som snabbt kan täppa till kärllumen.Då kollateraler i dessa fall saknas utvecklas en kritisk ischemi av nedströms försörjd hjärtmuskulatur och en infarkt kan uppstå.<br />\r\n           </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 37;left: 539px;top: 401px;width: 269px;height: 368px;\" id=\"page1block31\" class=\"building_block\">\r\n      <p style=\"text-indent: 0pt;\">\r\n         <span>\r\n              - Den subendokardiella hjärtmuskulaturen är sämst kärlförsörjd och drabbas oftast hårdast av ischemi.\r\n           </span>\r\n     </p>\r\n        <p>\r\n         <span>\r\n              - Långt ifrån alla med ischemi får symptom. Det beräknas att 25% av hjärtinfarkter aldrig får någon uppmärksamhet av sjukvården.\r\n            </span>\r\n     </p>\r\n        <h4>\r\n            <span>\r\n              Effekter av ischemi\r\n         </span>\r\n     </h4>\r\n       <p>\r\n         <span style=\"font-weight: bold;\">\r\n             - Stör ventrikelns kontraktilitet lokalt\r\n            </span>\r\n         <span>\r\n              (ischemi till följd av ateroskleros har ett distinkt utbredningsområde motsvarande det område som försörjs av den stenoserade artären).<br />\r\n  -\r\n            </span>\r\n         <span style=\"font-weight: bold;\">\r\n             Störning av kontraktilitet leder till akinesi\r\n           </span>\r\n         <span>\r\n              eller dyskinesi (väggen buktar utåt) av hjärtmuskelväggen\r\n           </span>\r\n         <span style=\"font-weight: bold;\">\r\n             efter bara några minuter\r\n            </span>\r\n         <span>\r\n              . Försämrar hjärtats kontraktilitet.<br />\r\n  - Om\r\n            </span>\r\n         <span style=\"font-weight: bold;\">\r\n             papillarmuskulaturen\r\n            </span>\r\n         <span>\r\n              involveras kan patienten få\r\n         </span>\r\n         <span style=\"font-weight: bold;\">\r\n             mitralisinsufficiens\r\n            </span>\r\n         <span>\r\n              .<br />\r\n         </span>\r\n         <span style=\"font-weight: bold;\">\r\n             - Ischemin kan vara övergående\r\n          </span>\r\n         <span>\r\n              och enbart ge angina pectoris, eller\r\n            </span>\r\n         <span style=\"font-weight: bold;\">\r\n             mer långvarig\r\n           </span>\r\n         <span>\r\n              och då leda till en\r\n         </span>\r\n         <span style=\"font-weight: bold;\">\r\n             infarkt\r\n         </span>\r\n         <span>\r\n              . <br />\r\n            </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 38;left: 808px;top: 401px;width: 269px;height: 368px;\" id=\"page1block32\" class=\"building_block\">\r\n      <p style=\"text-indent: 0pt;\">\r\n         <span style=\"font-weight: bold;\">\r\n             - Efter 15 minuter\r\n          </span>\r\n         <span style=\"font-weight: bold;\">\r\n             av ischemi\r\n          </span>\r\n         <span>\r\n              utan kollateralflöde\r\n            </span>\r\n         <span style=\"font-weight: bold;\">\r\n             blir myokardet ischemiskt\r\n           </span>\r\n         och\r\n         <span style=\"font-weight: bold;\">\r\n             efter 20-40\r\n         </span>\r\n         minuter tycks\r\n           <span style=\"font-weight: bold;\">\r\n             irreversibla skador\r\n         </span>\r\n         börja uppstå\r\n            <span>\r\n              (hjärtmuskelcellerna börjar gå i nekros)\r\n            </span>\r\n         .\r\n           <span>\r\n              <br />\r\n  - Ischemin\r\n          </span>\r\n         <span style=\"font-weight: bold;\">\r\n             hämmar betaoxidation av fettsyror\r\n           </span>\r\n         <span>\r\n              (vilken kräver syre), varpå hjärtmuskelcellerna övergår till\r\n            </span>\r\n         <span style=\"font-weight: bold;\">\r\n             anaerob glykolys\r\n            </span>\r\n         <span>\r\n              . Detta  ger laktatproduktion och pH sjunker. ATP-nivåer minskar. <br />\r\n  -\r\n         </span>\r\n         <span style=\"font-weight: bold;\">\r\n             Cellernas membranpumpar fungerar sämre\r\n          </span>\r\n         <span>\r\n              och joner börjar läcka över deras membran (K läcker ut, Na läcker in). Dessutom ökar cytosolens [Ca].<br />\r\n         </span>\r\n         <span style=\"font-weight: bold;\">\r\n             - Viabelt myokradium som kan räddas med reperfusion\r\n         </span>\r\n         kvarstår dock  i flera timmar efter den initiala ocklusionen.\r\n       </p>\r\n        <h4>\r\n            <span>\r\n              Mekanismer\r\n          </span>\r\n     </h4>\r\n       <p>\r\n         <span>\r\n              - Både instabil angina pectoris, NSTEMI och STEMI är oftast resultatet av ruptur av ett plack med efterföljande trombbildning i kranskärlet. <br />\r\n  - Små subendokardiella infarkter kan dock uppstå enbart till följd av svår diffus ateroskleros av\r\n          </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 237;left: 0px;top: 136px;width: 119px;height: 252px;\" id=\"page1block33\" class=\"building_block\">\r\n       <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Blodflöde till hjärtat:\r\n         </span>\r\n         <span>\r\n              Blod strömmar till ffa under diastole.\r\n          </span>\r\n     </p>\r\n        <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             - Kortare  diastole\r\n         </span>\r\n         <span>\r\n              pga högre HR eller\r\n          </span>\r\n         <span style=\"font-weight: bold;\">\r\n             sämre relaxation av hjärtmuskeln\r\n            </span>\r\n         <span>\r\n              under diastole till följd av\r\n            </span>\r\n         <span style=\"font-weight: bold;\">\r\n             ischemi eller hypertrofi\r\n            </span>\r\n         <span>\r\n              försämrar blodflödet till hjärtat.<br />\r\n            </span>\r\n         <span style=\"font-weight: bold;\">\r\n             - Anemi\r\n         </span>\r\n         <span>\r\n              minskar blodets syrebärande förmåga och försämrar syretillförseln.\r\n          </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 238;left: 118px;top: 217px;width: 118px;height: 70px;\" id=\"page1block34\" class=\"building_block\">\r\n      <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Aortit:\r\n         </span>\r\n         <span>\r\n              Minskar kranskärlsostiernas storlek och hämmar därmed flödet\r\n            </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 239;left: 237px;top: 221px;width: 147px;height: 152px;\" id=\"page1block35\" class=\"building_block\">\r\n     <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Ateroskleros:\r\n           </span>\r\n         <span>\r\n              Minskar lumen i kranskärlen och ökar därmed kraftigt motståndet mot flöde ut i hjärtats cirkulation<br />\r\n  - Samma effekt har embolier och spasm i kranskärlen (”Prinzmetals angina”).\r\n          </span>\r\n     </p>\r\n    </div>\r\n  <div style=\"vertical-align: top;position: absolute;z-index: 240;left: 395px;top: 223px;width: 187px;height: 165px;\" id=\"page1block36\" class=\"building_block\">\r\n     <p class=Brödtext>\r\n          <span style=\"font-weight: bold;\">\r\n             Vänsterkammarhypertrofi:\r\n            </span>\r\n         <span>\r\n              Försämrar näringsflöde till muskulaturen genom att öka vävnadstrycket så att perfusionen försämras. Dessutom kräver ett hypertrofierat hjärta mer syre, samtidigt som nybildning av cirkulation oftast inte hinner med.\r\n         </span>\r\n     </p>\r\n        <p class=Brödtext>\r\n          <span>\r\n               \r\n           </span>\r\n     </p>\r\n        <p class=Brödtext>\r\n          <span>\r\n              CPP = DBP—LVEDP\r\n         </span>\r\n     </p>\r\n    </div>\r\n</div>',
        '1357250251',
        '1357250251',
        '',
        'Hjrtmuskelischemi=>\r\nHjärtmuskelischemi',
        '1121',
        '-1'
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:12:04.103

也许您的问题出在 php/html 文件中，而不是在数据库设置中。

检查您是否保存了**UTF-8 编码**的 php 文件（没有 BOM 标头），因此它将生成一个 UTF-8 编码的 HTML 文件。这是您的代码编辑器的工作。

然后将正确的**编码声明**添加到 HTML/PHP 页面的顶部，紧跟在开始标记之后：

```
HTML 4:  <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
XHTML:   <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
HTML 5:  <meta charset="UTF-8"> 
```

在这里你可以[阅读更多](http://www.martinstoeckli.ch/php/php.html#utf8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:29:03.480

用 UTF-8 编码 PHP 文档不会影响您的 PHP 引擎，除非您有用您的母语（在该文档中）编写的纯 HTML 数据。如果不是这样，对您的 .php 文档进行 UTF-8 处理与 UTF-8 驱动的网站无关。很高兴知道这一点。

无论如何，这是`$_POST[]`（不是 MySql）问题。您需要转换您的`$value`(s) -characters - 在他们使用 mysql 之前。你会在[这里找到答案](http://php.net/manual/en/function.html-entity-decode.php)。

ps：我和你有同样的问题，但是有“引号”字符（同样被截断）。

我很累，但你可以试试这个：P

改这个..

```
$values = array_map('mysql_real_escape_string', array_values($inserts)); 
```

进入这个

```
$values = array_map('mysql_real_escape_string', array_values($inserts));
$values = html_entity_decode($values, ENT_HTML401); 
```

或（以防 html_entity_decode 无法正常工作或网站上的其他功能正在清理数据）与此

```
$values = array_map('mysql_real_escape_string', array_values($inserts));
$values = htmlspecialchars($values, ENT_HTML401); 
```

**编辑：** 然后试试这个

```
$values = htmlspecialchars($values); 
```

# php - 如何将数据从网页发送到串行端口？

> ID：14147144
> 
> 赞同：2
> 
> 时间：2013-01-03T20:58:06.227
> 
> 标签：php, c++, curl, serial-port

我有一个包含基本内容的网页。我可以尝试它的格式，但现在是 PHP。我想将此数据发送到我计算机的一个串行端口（作为 PHP 页面的访问者）。

我需要一个用于将这些数据从互联网传输到其中一个串行端口的代码。它可以是 C++、javascript、C# 或其他任何东西。

我正在使用 Windows（作为网页的访问者）。所以，我需要将数据发送到访问者计算机的串行端口而不是服务器的。阅读不是必需的。

哪个程序和流程是正确执行此操作的最佳选择？我需要它们工作得很好的示例代码部分！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:03:58.800

有一个支持写入串口的 PHP 库。

见[这里](http://code.google.com/p/php-serial/)。

更多的：

[http://php.net/manual/en/function.fopen.php#20935](http://php.net/manual/en/function.fopen.php#20935)

有关更多讨论，请参阅此问题： [如何像这个 QBasic 程序一样在 PHP 中读取 RS232 串行端口](https://stackoverflow.com/questions/3226979/how-to-read-rs232-serial-port-in-php-like-this-qbasic-program)

**更新：**

要在 Windows 上执行此操作，请参阅本教程： [http ://blog.950buy.com/article/php-use-rs232-serial-communication-to-send-file/](http://blog.950buy.com/article/php-use-rs232-serial-communication-to-send-file/)

还有这个问题：[Serial comm with PHP on Windows](https://stackoverflow.com/questions/627965/serial-comm-with-php-on-windows)

# c#-4.0 - 将对象拖动到错误的位置并在 C# 中滚动面板

> ID：14147146
> 
> 赞同：0
> 
> 时间：2013-01-03T20:58:13.657
> 
> 标签：c#-4.0

我正在为 C# 中的一个应用程序工作，其中我必须在面板中显示一些控件。控件可以拖动。一切正常，除了一件事，如下所述

*   假设我在主面板中有一个面板（控件容器）。主面板具有 AutoScroll 属性 true。因此，当内部面板（控件容器）的高度大于主面板的高度时，主面板显示滚动条。
*   假设由于高度比主面板大，内面板显示在两个区域中。当我在内面板中添加图片框时，图片框显示在上部区域，因为我在开始时设置了位置 10,10。
*   当我尝试将这个图片框向下拖动时，它会随着鼠标的移动而移动。如果图片框进入内部面板的下部区域，主面板的滚动条会自动下降，鼠标位置会根据当前位置自动下降，图片框也会下降下降到那个位置。但这不是理想的位置。我的代码对于移动物体很简单。

    ```
    public static void Init(Control control, Control container, Direction direction)
    {
        bool Dragging = false;
        Point DragStart = Point.Empty;
        control.MouseDown += delegate(object sender, MouseEventArgs e)
        {
        Dragging = true;
            DragStart = e.Location;
            control.Capture = true;
            HoldOn.Invoke(sender, e);

        };

        control.MouseUp += delegate(object sender, MouseEventArgs e)
        {
            Dragging = false;                               
            control.Capture = false;

        };

        control.MouseMove += delegate(object sender, MouseEventArgs e)
        {
            if (Dragging)
            {

                control.Location =  new Point(e.X - DragStart.X + control.Location.X,
                e.Y - DragStart.Y + control.Location.Y);

            }
        };
    } 
    ```

我添加了一张图片来显示我的问题。希望对您理解有所帮助。 ![在此处输入图像描述](../Images/a62e1bf63741722c63b747235e661a5f.png)

# android - 我是否需要每个布局资源的菜单资源

> ID：14147148
> 
> 赞同：1
> 
> 时间：2013-01-03T20:58:31.203
> 
> 标签：android, android-layout

我有一个带有操作栏和菜单资源文件夹的应用程序，其中有一个 menu_main.xml 文件，我想我假设每个资源文件都应该有一个活动是正确的？

如果没有，有没有办法将 android:visible="false" 动态更改为 android:visible="true"？还是我走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:03:07.113

菜单用于活动，而不是布局。

要回答您的问题，有一种方法可以动态更改可见性。在您的`onCreateOptionsMenu (Menu menu)`方法中，您可以将各个菜单组件设置为可见/不可见。

例如。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
  getMenuInflater().inflate(R.menu.activity_main, menu);
  menu.findItem(R.id.myMenuItem1).setVisible(false);
} 
```

但是，我会坚持为每个 Activity 制作一个单独的菜单 xml——它很小（毕竟它只是文本），它有助于确保你不会混淆。

# javascript - 页面刷新时jquery按钮集恢复为单选按钮列表

> ID：14147152
> 
> 赞同：0
> 
> 时间：2013-01-03T20:58:45.760
> 
> 标签：javascript, jquery, jquery-ui

基本上我有下面的代码，每次页面刷新时，按钮集都会恢复到看起来像单选按钮。难道我做错了什么？

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
    $( ".filter_type" ).buttonset();
});
</script>

<asp:RadioButtonList ID="rbtnTimeRange" class="filter_type" name="filter_type"   RepeatDirection="Horizontal" 
                AutoPostBack="true" runat="server"  OnSelectedIndexChanged="TimeRange" >
            <asp:ListItem Value="1" Selected="True">Today</asp:ListItem>
            <asp:ListItem Value="5">MTD</asp:ListItem>
        </asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:13:57.797

修改你的asp代码如下（注意标签`style="display:none"`）

```
<asp:RadioButtonList ID="rbtnTimeRange" class="filter_type" Style="display:none" name="filter_type"   RepeatDirection="Horizontal" AutoPostBack="true" runat="server"  OnSelectedIndexChanged="TimeRange" >
    <asp:ListItem Value="1" Selected="True">Today</asp:ListItem>
    <asp:ListItem Value="5">MTD</asp:ListItem>
</asp:RadioButtonList> 
```

然后`$( ".filter_type" ).show();`在jQuery中使用如下

```
<script>
$(function() {
    $( ".filter_type" ).buttonset();
    $( ".filter_type" ).show();
});
</script> 
```

# parameters - SSRS 2008：创建订阅时一些多值参数为空白/不可选择

> ID：14147154
> 
> 赞同：2
> 
> 时间：2013-01-03T20:58:54.787
> 
> 标签：parameters, ssrs-2008, subscriptions, multivalue

我有一个设置了 9 个不同的多值参数的报告。当我去为报告创建订阅并指定这些参数的值时，其中只有 4 个允许我单击下拉列表以展开和选择选项。其他 5 个默认显示空白文本框（即使默认情况下应该已经选择了多个值），单击它们什么也不做。

它们的属性无处不在——有些是整数，有些是文本，有些具有我指定的硬编码值，而另一些则从数据集中获取它们的值。但是，我在那些不起作用的那些和那些起作用的之间找不到任何一致性。

这是订阅设置页面的屏幕截图 - 所有显示空白文本框的多值都是不可点击的。

![SSRS 2008 订阅](../Images/752ed8ed5a6239dc2578f2e1c3f54785.png)

我使用的是 Internet Explorer 9，到目前为止，报告系统导航器的所有 Web 界面功能都对我有用。

只是在寻找一些东西来帮助我朝着正确的方向寻找问题的根源。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:43:13.027

在这里找到解决方案：[http ://social.msdn.microsoft.com/forums/en-us/sqlreportingservices/thread/6E11EC25-E205-469E-8C35-B73B4478BCF0?prof=required](http://social.msdn.microsoft.com/forums/en-us/sqlreportingservices/thread/6E11EC25-E205-469E-8C35-B73B4478BCF0?prof=required)

如果多值参数的值的标签之一是空白字符串，则会发生 JavaScript 错误。如果您有任何空白标签，请将标签更改为“（空白）”之类的东西，一切都应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:35:46.690

看起来您有级联参数，例如产品状态取决于产品类型？在这种情况下，您必须：

1.  为每个子参数设置默认值，或
2.  删除父参数上的“使用默认值”复选框并选择所需的值。这将允许 SSRS 生成子参数的选择列表。

# c# - 为什么要签名 String.Length？

> ID：14147157
> 
> 赞同：1
> 
> 时间：2013-01-03T20:59:10.097
> 
> 标签：c#, .net, unsigned, signed, string-length

> **可能重复：**
> [为什么 .Net Framework 不使用无符号数据类型？](https://stackoverflow.com/questions/3935165/why-does-net-framework-not-use-unsigned-data-types)

在[C# 编程语言（涵盖 C# 4.0）（第 4 版）](https://rads.stackoverflow.com/amzn/click/com/0321741765)中，1.3 类型和变量，第 9 页。

[乔恩斯基特](https://stackoverflow.com/users/22656/jon-skeet)说；

> 万岁字节是无符号类型！在 Java 中，一个字节是有符号的（并且没有无符号的等价物）这一事实使得很多毫无意义的位旋转容易出错。很可能我们都应该比我们更多地使用 uint，请注意：我相信许多开发人员在需要整数类型时会默认使用 int。框架设计者当然也属于这一类：为什么要对 String.Length 进行签名？

当我反编译[String.Length](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)时；

```
/// <summary>
    /// Gets the number of characters in the current <see cref="T:System.String"/> object.
    /// </summary>
    /// 
    /// <returns>
    /// The number of characters in the current string.
    /// </returns>
    /// <filterpriority>1</filterpriority>
    [__DynamicallyInvokable]
    public int Length { [SecuritySafeCritical, __DynamicallyInvokable, MethodImpl(MethodImplOptions.InternalCall)] get; } 
```

也在[MSDN](http://msdn.microsoft.com/en-us/library/system.string.length.aspx)中；

> Length 属性返回此实例中 Char 对象的数量，**而不是 Unicode 字符的数量**。原因是一个 Unicode 字符可能由多个 Char 表示。

它返回当前字符串中字符对象的数量。为什么当已经有一个类型时`String.Length`返回？和的意义何在？`Int32``UInt32``signed-unsigned byte``String.Length`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T21:02:31.827

因为所有 .NET 核心对象都符合 CLS。CLS 没有无符号数据类型。

查看

[为什么 unsigned int 不符合 CLS？](https://stackoverflow.com/questions/6325/why-are-unsigned-ints-not-cls-compliant)

详情。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T21:01:31.300

`Int32`被广泛认为是 .NET 框架中的“通用”整数。如果您需要一个非小数的一般数字，那么您首先需要的是`Int32`。如果您有特定的理由，您只会使用其中一种无符号类型。

对所有 Count 属性使用`int`会创建一致的 API，并允许使用 -1 作为标志值（框架中的某些 API 会这样做）。

来自[http://blogs.msdn.com/b/brada/archive/2003/09/02/50285.aspx](http://blogs.msdn.com/b/brada/archive/2003/09/02/50285.aspx)：

> *我们许多人的普遍感觉是，绝大多数编程都是使用有符号类型完成的。每当您切换到无符号类型时，您都会强制转换心智模型（以及丑陋的演员表）。在最糟糕的情况下，您构建了一个采用无符号类型的 API 的整个并行世界。*

# c++ - Shape.SetAsBox() 中的断言失败？

> ID：14147160
> 
> 赞同：1
> 
> 时间：2013-01-03T20:59:24.110
> 
> 标签：c++, box2d, game-engine, sfml

因此，我正在尝试制作一个与 SFML 精灵、Box2D 主体和夹具相关联的 Human 实体。但是，我收到此错误：

```
Assertion failed: area > 1.19209289550781250000e-7F, file ...b2PolygonShape.cpp, line 352 
```

所以我做了一些快速的谷歌搜索，发现我的问题在于我的形状制作了不正确的顶点。但我不明白如果我使用这个`Shape.SetAsBox()`功能怎么可能......

这是我的代码：

```
#include "../../include/entity/Human.hpp"

Human::Human(unsigned int id, b2World& world, sf::Vector2f pos, sf::Texture* texture)
    : AnimatedEntity(id, world, pos, sf::Vector2i(32, 32), texture)
{
    b2PolygonShape shape;
    shape.SetAsBox((32/2)/SCALE, (32/2)/SCALE);     // Set the size; Box2D takes the half-width/height as params, and then scale.

    b2FixtureDef fixtureDef;
    fixtureDef.density = .8f;
    fixtureDef.friction = .4f;
    fixtureDef.restitution = .2f;
    fixtureDef.shape = &shape;

    e_body->CreateFixture(&fixtureDef);     // Assuming: shape and density are set
} 
```

FTR，`SCALE`是`static const int`一个值为`30`(30px/1m) 的值。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:15:10.643

我认为 billz 的意思是：

```
(32/2) = 16
16 / 30 = 0 
```

您只需要为 SCALE 使用浮点数而不是 int ...

# css - OTF Web 字体在 Windows 上的 Webkit/Chrome 中呈现错误

> ID：14147162
> 
> 赞同：0
> 
> 时间：2013-01-03T20:59:31.677
> 
> 标签：css, windows, google-chrome, webkit, font-face

有人遇到过这个问题吗？ **Windows 7 Chrome 网络字体 OTF 问题**：

我有一个网络字体并用 css3 添加它...在 FF/IE（或备份）/Safari 中看起来很棒，但在**Chrome（Windows）**中它看起来很糟糕：

我试过这个：`-webkit-font-smoothing: antialiased;`

...它在 Safari 而不是 Chrome 中修复了它，并在这里看到 Mac 应该可以工作： [-webkit-font-smoothing 是否仅适用于 Mac 浏览器，而不适用于 Windows？](https://stackoverflow.com/questions/8519768/does-webkit-font-smoothing-only-work-on-mac-browsers-not-windows)

我也检查了这个：http: [//maxvoltar.com/archive/-webkit-font-smoothing](http://maxvoltar.com/archive/-webkit-font-smoothing)

这是我所拥有的：

```
@font-face { font-family: SeravekBasic; src: url('/fonts/SeravekBasic-Regular.otf'); font-weight: normal; font-style: normal; -webkit-font-smoothing: antialiased;}

html { font-size: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; -webkit-font-smoothing: antialiased;}
html, button, input, select, textarea {font-family: SeravekBasic, Arial, Helvetica, sans-serif; color: #000; } 
```

最后，我尝试了 Mozilla 的文本渲染，看看这是否有助于 webkit，但没有任何帮助： [https ://developer.mozilla.org/en-US/docs/CSS/text-rendering](https://developer.mozilla.org/en-US/docs/CSS/text-rendering)

....不确定是否还有其他可以解决此问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T20:59:14.273

我不建议将 OTF 用于 webfonts。它会给使用 Windows XP 的人带来一些渲染问题。您将不得不在媒体查询中使用防弹字体语法，并为 chrome 指定 SVG。

PT Sans 的示例

```
@font-face {
font-family: "PT Sans";
src: url("ptsans.eot");
src: url("ptsans.eot?#iefix") format("embedded-opentype"),
     url("ptsans.woff") format("woff"),
     url("ptsans.ttf")  format("truetype"),
     url("ptsans.svg") format("svg");
font-weight: normal;
font-style: normal
}

@media screen and (-webkit-min-device-pixel-ratio:0) {
@font-face {
    font-family: "PT Sans";
    src: url("ptsans.svg") format("svg")
}
} 
```

Chrome 使用较旧的字体渲染系统，因此无法清楚地显示字体。Chrome 字体在 SVG 上看起来最好，所以你必须指定一个媒体查询来只为 Chrome 提供 SVG 文件。您可以在此处找到有关语法的更多信息：[http](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax) ://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax 。

您应该在 @font-face 语法中包含 ttf、eot、woff 和 svg 格式。浏览器不会下载每一个，它只会下载它需要的那个。它还添加了适当的后备。这应该可以解决您的大部分字体渲染问题。您可以使用 fontsquirrel 生成器为您的 @font-face 规则获取适当的文件：[http](http://www.fontsquirrel.com/tools/webfont-generator) ://www.fontsquirrel.com/tools/webfont-generator 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:14:39.893

所以我的解决方案是将其转换为嵌入式 Open Type：

.eot 并添加 .woff 以支持其他浏览器。

这实际上很棒，因为它在 IE9（甚至 IE8）中运行良好

:)

`src: url('/fonts/SeravekBasic-Regular.eot'); src: url('/fonts/SeravekBasic-Regular.eot?#iefix') format('embedded-opentype'), url('/fonts/SeravekBasic-Regular.woff') format('woff');`

# mysql - Href - 取自 mysql 数据库的文件名

> ID：14147163
> 
> 赞同：0
> 
> 时间：2013-01-03T20:59:41.927
> 
> 标签：mysql, pdf, unique-id

我目前有一个通过 PHP 将数据上传到 PDF 表单的表单，该表单会生成并保存在我的 ftp 服务器上。数据也发布到 mysql 数据库，pdf 的文件名是 mysql 记录的唯一 ID（例如 85124.pdf）

我想设置一个链接，用户可以在其中打印生成的 PDF 文件作为收据，但无法弄清楚如何让链接调用该特定记录的特定文件。

例如：

[pdf](/filename.pdf) - 文件名与唯一的 mysql id 相同（例如 85124）。这可能吗？

* * *

我看到我可能没有正确地说明我正在尝试做什么以及在什么环境中。

我设置了一个页面，用户/客户可以在线预订他们的货物（我在一家小型航运公司工作）。用户输入他们的送货地址等，一旦他们点击提交按钮，就会发生以下情况：

数据被发送到我的主机（godaddy）上的 mysql 数据库，并且该表填充了该特定记录。唯一 ID 成为货件的跟踪号。

```
$tracking=mysql_insert_id; 
```

数据也作为 FDF 文件发送到我的 ftp 并存储在文件夹中。FTP的名称是由它放入mysql数据库后的tracking number决定的。

```
$fdf_file=$tracking().'.fdf';
$fdf_dir=dirname(__FILE__).'/results'; 
```

然后将数据放入我的 ftp 上的 PDF 表单中。

```
$pdf_doc='https://www.mysite.com/shipformrso.pdf'; 
```

提交表单后，客户会在屏幕上收到确认信息，确认他们的发件人已正确填写，并获得了他们的跟踪号码。

```
echo "<font color='red' size='+1'><b>" . 'Your tracking number is '.$tracking() . '. <n\> PLEASE PROCEED TO THE SERVICE DESK TO RECOVER YOUR LABELS.' ."</b></font>"; 
```

我想做的是有另一个链接，用户可以单击该链接并让浏览器打开为他们的特定货物生成的 FDF/PDF 文件。这就是我遇到问题的地方。我似乎无法弄清楚如何创建刚刚生成的链接特定文件。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:27:08.300

据我了解，您不想向您的用户显示 pdf 打印链接？至少，在 db 中明确保存的 pdf 文件的 id？然后，您可以`hash`将您的 id`POST`发送到服务器并在服务器端对其进行解密，然后继续进行 pdf 显示/打印页面。这样，任何用户都无法理解哈希数据，以及如何解密它。只有您的服务器端脚本可以。;)

例如：

当用户在这里输入时：

```
blabla.com/?id=SOME_HASHED_VALUE 
```

在服务器端：您将其解密，并使其`SOME_HASHED_VALUE`看起来像这样：45869 - 这是数据库中保存的唯一 ID。然后进行正常流程。;)

# php - jquery .serialize() 为正在编码的数组选择多个标签名称

> ID：14147165
> 
> 赞同：1
> 
> 时间：2013-01-03T21:00:20.490
> 
> 标签：php, jquery, url-encoding

我有一个带有名称的选择多个标签`city[]`。括号应该表示稍后 PHP 的 url 查询字符串中的`[]`一个数组。

我正在使用 jQuery .serialize() 获取表单值来为 AJAX 调用构建查询字符串。但是，看起来 .serialize() 正在对 URL 进行编码而不是写括号

我应该得到

```
index.php?city[]=METROPLOIS&city[]=GOTHAM 
```

相反，我得到

```
index.php?city%5B%5D=METROPLOIS&city%5B%5D=GOTHAM 
```

有没有办法让它停止仅对名称进行编码？在某些情况下，城市名称可能有空格，所以我仍然需要它来对其进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:19:45.103

我想你只是有点困惑，因为你可能不熟悉 URL 转义。

但是，这在 PHP 中完美运行。例如，`print_r($_GET)`将输出：

```
Array
(
    [city] => Array
        (
            [0] => METROPLOIS
            [1] => GOTHAM
        )

) 
```

被`city`正确解释为数组并包含预期值。因为，`city%5B%5D`是一个有效的 URL 编码字符串`city[]`。

# ruby - 尝试在 Jekyll 中打印发布日期失败，未定义方法“strftime”

> ID：14147167
> 
> 赞同：4
> 
> 时间：2013-01-03T21:00:49.313
> 
> 标签：ruby, jekyll

我一直在使用[Liquid 扩展](https://github.com/mojombo/jekyll/wiki/liquid-extensions)来重新格式化我基于 Jekyll 的网站上的日期，例如：

```
<p>{{ post.date | date_to_string }}</p> 
```

这在我的`index.html`页面中运行良好，它只获取五个最近的帖子，然后逐个帖子地迭代它们。但是，当我尝试在`_layouts/base.html`模板中呈现这样的日期时，这会失败。

我试过了：

```
{{ page.date | date_to_string }} 
```

`{{ page.title }}`没有问题地工作，`{{ page.date}}`当我在没有液体过滤器的情况下使用它时渲染，例如输出`2012-03-12 00:00:00 +0000`.

为什么`date_to_string`过滤器会因提供的输入而失败`{{ page.date }}`。我收到以下错误：

```
Liquid Exception: undefined method `strftime' for nil:NilClass in base 
```

并且构建失败。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T23:02:48.073

在我的网站上我使用

```
{{ page.date | date: "%d %B %Y" }} 
```

它从降价文件中获取日期。并呈现如下：

`26 December 2012`

请参阅这些链接以获取更多阅读内容：

[Jekyll 日期格式如何工作？](https://stackoverflow.com/questions/7395520/jekyll-date-format)

[http://liquid.rubyforge.org/classes/Liquid/StandardFilters.html#M000012](http://liquid.rubyforge.org/classes/Liquid/StandardFilters.html#M000012)

编辑：在评论部分回答您的问题：

如果你想使用 date_to_string 你必须这样称呼它：

```
{{ site.time | date_to_string }} 
```

还有`{{ site.time | date_to_long_string }`哪个将以完整的形式写出月份，例如。十一月不是十一月

来源

[https://github.com/mojombo/jekyll/wiki/Liquid-Extensions](https://github.com/mojombo/jekyll/wiki/Liquid-Extensions)

# mysql - MySQL 优化 UNION 查询

> ID：14147172
> 
> 赞同：1
> 
> 时间：2013-01-03T21:01:05.773
> 
> 标签：mysql, sql, optimization, union, explain

我正在尝试优化查询。

我的问题似乎与[MySQL、Union ALL 和 LIMIT](https://stackoverflow.com/questions/4008486/mysql-union-all-and-limit)相似，答案可能相同（恐怕）。但是，在我的情况下，有更严格的限制 (1) 以及日期时间列上的索引。

所以我们开始：

为简单起见，让我们只有一个包含三个列的表：

*   md5 (varchar)
*   值（varchar）。
*   最后更新（日期时间）

(md5, updated) 上有一个索引，因此在 md5 键上选择，按更新排序并限制为 1 将得到优化。

搜索应返回最多与 10 个 md5 键之一匹配的记录。键具有优先级。因此，如果有 prio 1 的记录，它将优先于 prio 2、3 等的任何记录。

目前使用 UNION ALL：

```
select * from

(

(
select 0 prio, value
from mytable
where md5 = '7b76e7c87e1e697d08300fd9058ed1db'
order by lastupdated desc 
limit 1
)

union all

(
select 1 prio, value
from mytable
where md5 = 'eb36cd1c563ffedc6adaf8b74c259723'
order by lastupdated desc 
limit 1
)

) x

order by prio
limit 1; 
```

它有效，但如果提供 10 个键，UNION 似乎会执行所有 10 个查询。

但是，从业务角度来看，按顺序运行选择并在第一次匹配后停止是可以的。

这可能是普通的 SQL 吗？

或者唯一的选择是存储过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:15:09.917

优化器`UNION ALL`无法弄清楚你在做什么。

我不知道您是否可以这样做，但假设您有一个 md5prio 表，其中包含您知道要查找的哈希码列表。例如。

```
prio   md5
0      '7b76e7c87e1e697d08300fd9058ed1db'
1      'eb36cd1c563ffedc6adaf8b74c259723'
etc 
```

在里面。

那么您的查询可能是：

```
 select mytable.*
      from mytable
      join md5prio on mytable.md5 = md5prio.md5
  order by md5prio.prio, mytable.lastupdated desc
     limit 1 
```

这可能会保存重复的查询。您肯定需要 mytable.md5 上的索引。我不确定您在 lastupdated 上的复合索引是否会有所帮助；你需要尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:14:18.370

有一种更好的方法可以做到这一点，不需要 UNION。您真的想要每个键的分组最大值，并具有自定义排序。

[分组最大值](http://dev.mysql.com/doc/refman/5.0/en//example-maximum-column-group-row.html)

[按 FIELD() 排序](http://jonahellison.com/mysql-order-by-field-group_concat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:21:56.580

在您的情况下，最有效的解决方案可能是在`(md5, lastupdated)`. 该索引应该用于非常有效地解析每个子查询（查找索引中的值，然后查找一个数据页）。

不幸的是，当有重复的 lastupdated 值时，Gavin 引用的 groupwise max 将产生多行（诚然，在您的情况下可能不是问题）。

实际上，有一种 MySQL 方法可以得到这个答案，使用`group_concat`and `substring_index`：

```
select p.prio,
       substring_index(group_concat(mt.value order by mt.lastupdated desc), ',', 1)
from mytable mt join
     (select 0 as prio, '7b76e7c87e1e697d08300fd9058ed1db' as md5 union all
      select 1 as prio, 'eb36cd1c563ffedc6adaf8b74c259723' as md5 union all
      . . .
     ) p
     on mt.md5 = p.md5 
```

# c - recv 只获取包的前 4 个字节

> ID：14147173
> 
> 赞同：3
> 
> 时间：2013-01-03T21:01:09.740
> 
> 标签：c, linux, sockets, udp

我正在用 C++ 编写一个客户端应用程序以通过 UDP 广播接收二进制数据，但是无论缓冲区大小如何，我都无法接收前 4 个字节以外的任何内容。我检查了 Wireshark 中的数据包，我可以看到我的机器正在接收大约 1200 字节的数据。当我将此与我的客户端接收的内容进行比较时，我可以看到我正在获取数据包，但是剩余的数据丢失了。这是我的代码：

```
#define BUFFERSIZE 4096
int main()
{
    struct addrinfo hints, *servinfo, *p;
    int sockfd, i, nbyt;

    int *buf = (int*) malloc(BUFFERSIZE);

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_INET;
    hints.ai_socktype = SOCK_DGRAM;
    hints.ai_flags = AI_PASSIVE;

    getaddrinfo(NULL, "9011", &hints, &servinfo);

    sockfd = socket(servinfo->ai_family, servinfo->ai_socktype, servinfo->ai_protocol);
    bind(sockfd, servinfo->ai_addr, servinfo->ai_addrlen);

    FILE *file;
    file = fopen("file.txt", "w+");

    for (i=0;i<=45;i++)
    {
        nbyt = recv(sockfd, buf, BUFFERSIZE, 0);            
        fprintf(file, "%s %d; %s %x\n", "Bytes received:", nbyt, "Message:", *buf);
    }

    fclose(file);
    close(sockfd);
    free(buf);

    printf("%s\n", "Execution ended.");

    return 0;
} 
```

我收到的一些数据的示例：

```
Bytes received: 1131; Message: 5b0
Bytes received: 1131; Message: 5b3
Bytes received: 1131; Message: 5b6
Bytes received: 1092; Message: 4e0 
```

我尝试使用标志将套接字设置为非阻塞`MSG_DONTWAIT`，因为这解决了类似 Python 应用程序的问题，但是这只返回错误：

```
Bytes received: -1; Message: 0 
```

我对 C++ 和套接字比较陌生，所以可能有一些我没有看到的东西。希望有人可以帮助我找出问题所在？如有必要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:05:48.660

你收到它就好了。您的调试代码并没有按照您的想法执行。

以十六进制打印 unsigned int 参数的`x`说明符。`printf`您平台上的整数可能是 32 位的。所以你只打印前 4 个字节。

如果要以十六进制打印整个缓冲区，则需要自己编写循环来执行此操作（当然，也可以使用库）。

例如，我警告你我的 C 有点生疏（这不是目前执行此操作的最佳方法）......此外，这假设你的缓冲区始终是 sizeof(int) 的倍数，或者它'会丢失一些数据：

```
nbyt = recv(sockfd, buf, BUFFERSIZE, 0);            
fprintf(file, "%s %d; %s\n", "Bytes received:", nbyt, "Message:");
for (offset = 0; offset < nbyt/sizeof(int); ++offset) {
    fprintf(file, "%x ", buf[offset]);
}
fprintf(file, "\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:13:27.160

`*buf`在您的代码中表示*接收数据数组中的第一个整数*，因此您只打印接收到的 UDP 有效负载的前四个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T21:55:27.403

尽管已经提到了格式错误，但如果您收到一个 '\0' 字符，则带有 %s 的格式化打印将在那里剪切字符串，而不管收到的实际字符数是多少。

为了调试明文，我使用了以下代码：

```
char escaped_char(char c)
{
    char escapable[12] =    {'\a','\b','\f','\n','\r','\t','\v','\\','\'','\"','\?','\0'};
    char escaped[12]   =    { 'a', 'b', 'f', 'n', 'r', 't', 'v','\\','\'','\"', '?', '0'};

    const char* escapable_end = escapable + 12;
    const char* ec;

    for(ec = escapable;ec != escapable_end;++ec)
    {
        if(c == *ec) return escaped[ec-escapable];
    }
    return 0;
}

/**
 * @param   buf     input buffer to escape
 * @param   len     length of contents in buf
 * @param   outlen  pointer to an integer, which receives the length of the returned string
 * @return          A newly allocated, C style escaped string, NULL on error
 * @warning         A returned string must be freed with free()
 */
char* aescape(const char* buf,size_t len,size_t* outlen)
{
    const char* buf_end = buf + len;
    const char* c;
    char ec;
    char* result;

    assert(buf && outlen);

    (*outlen) = len;

    for(c = buf;c != buf_end;++c)
    {
        if(escaped_char(*c))
        {
            ++*outlen;
        }
    }
    result = malloc((*outlen)+1);
    assert(result != NULL);
    if(result)
    {
        if((*outlen) > len)
        {
            char* out = result;
            for(c = buf;c != buf_end;++c)
            {
                ec = escaped_char(*c);
                if(ec)
                {
                    *out++ = '\\';
                    *out++ = ec;
                }
                else
                {
                    *out++ = *c;
                }
            }
        }
        else
        {
            memcpy(result,buf,len);
        }
        result[(*outlen)] = '\0';
    }
    else
    {
        (*outlen) = 0;
    }
    return result;
} 
```

# python - python：递归列表处理更改原始列表

> ID：14147175
> 
> 赞同：9
> 
> 时间：2013-01-03T21:01:11.893
> 
> 标签：python, list, recursion

我想要做的是递归处理一个列表。我是 python 新手，所以当所有代码都被编写并发送执行时，我遇到了一个奇怪的问题：调用递归函数后列表返回发生了变化。为了测试这一点，我写道：

```
def recur(n):
    n.append(len(n))
    print '>',n
    if n[-1]<5: recur(n)
    print '<',n 
```

并调用函数：

```
recur([]) 
```

结果如下：

```
> [0]
> [0, 1]
> [0, 1, 2]
> [0, 1, 2, 3]
> [0, 1, 2, 3, 4]
> [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4, 5] 
```

我期望看到的是

```
> [0]
> [0, 1]
> [0, 1, 2]
> [0, 1, 2, 3]
> [0, 1, 2, 3, 4]
> [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4, 5]
< [0, 1, 2, 3, 4]
< [0, 1, 2, 3]
< [0, 1, 2]
< [0, 1]
< [0] 
```

，因为它是简单的整数变量：

```
def recur(n):
    n=n+1
    print '>',n
    if n<5: recur(n)
    print '<',n

recur(0)
> 1
> 2
> 3
> 4
> 5
< 5
< 4
< 3
< 2
< 1 
```

我该如何解决这种情况，我理解错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T21:03:14.777

函数的所有递归调用都在同一个列表上运行。你需要复制一份：

```
def recur(n):
    n.append(len(n))
    print '>',n
    if n[-1]<5: recur(n[:])  # <<<< Note the [:]
    print '<',n 
```

[How do I pass a variable by reference?](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)的答案中有一些很好的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T21:08:07.013

正如其他答案所示，您正在更改列表。您可以制作列表的副本和/或使用不可变的数据结构，例如元组：

```
def recur(n=()):
    if len(n) > 4:
         return n
    return recur(n + (len(n),)) 
```

# android - 尝试将折线/标记添加到 GoogleMap 时出现 NullPointerException

> ID：14147176
> 
> 赞同：0
> 
> 时间：2013-01-03T21:01:16.510
> 
> 标签：android, nullpointerexception, polyline, supportmapfragment

我有一个带有 GoogleMap 对象的 SupportMapFragment（我已经使用 GoogleMapOptions 对其进行了操作）并且它显示/运行良好，直到我调用 getMap().addPolyline(...) 时我得到一个 NullPointerException。

这是我的 Activity 布局 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/tripSummary"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="@string/trip_summary"
    tools:context=".Start" />

<TextView
    android:id="@+id/tripDetails"
    android:layout_below="@id/tripSummary"
    android:layout_alignParentLeft="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="@string/awaiting_location"
    tools:context=".Start" />

 <fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_below="@id/tripDetails"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    map:cameraZoom="13"
    android:name="com.google.android.gms.maps.SupportMapFragment"  />
</RelativeLayout> 
```

这是我的 Activity 中的 createMap 方法（它扩展了 android.support.v4.app.FragmentActivity），它在 onCreate(...) 中调用

```
private void createMap(List<LatLng> latLngs) {

    float zoom = 13;
    PolylineOptions poly = new PolylineOptions()
    .color(Color.RED);
    MarkerOptions startMarker = new MarkerOptions()
    .position(latLngs.get(0))
    .title("Start");
    MarkerOptions endMarker = new MarkerOptions()
    .position(latLngs.get(latLngs.size() - 1))
    .title("End");
    LatLng startLatLng = latLngs.get(0);
    GoogleMapOptions mapOptions = new GoogleMapOptions();
    CameraPosition cameraP = new CameraPosition(startLatLng, zoom, 0, 0);

    if (mMap == null) {

        // instantiate map
        mMapFragment = SupportMapFragment.newInstance(mapOptions);
        FragmentTransaction fragmentTransaction = getSupportFragmentManager()
                .beginTransaction();
        fragmentTransaction.add(R.id.map, mMapFragment);
        fragmentTransaction.commit();
        Log.d("Map", "fragment transaction complete");

        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

        // check it has been instantiated
        if (mMapFragment != null) {

            mapOptions.mapType(GoogleMap.MAP_TYPE_SATELLITE)
            .camera(cameraP)
            .compassEnabled(true);

            //Add LatLngs to a polyline
            for(LatLng latLng : latLngs){
                poly.add(latLng);
            }

            mMapFragment.getMap().addPolyline(poly);
            mMapFragment.getMap().addMarker(startMarker);
            mMapFragment.getMap().addMarker(endMarker);
        }
    }
} 
```

日志猫：

```
01-03 20:42:42.737: E/AndroidRuntime(18116): FATAL EXCEPTION: main
01-03 20:42:42.737: E/AndroidRuntime(18116): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.project.locationapp/com.project.locationapp.TripSummary}: java.lang.NullPointerException
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.os.Looper.loop(Looper.java:130)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.app.ActivityThread.main(ActivityThread.java:3701)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at java.lang.reflect.Method.invokeNative(Native Method)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at java.lang.reflect.Method.invoke(Method.java:507)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at dalvik.system.NativeStart.main(Native Method)
01-03 20:42:42.737: E/AndroidRuntime(18116): Caused by: java.lang.NullPointerException
01-03 20:42:42.737: E/AndroidRuntime(18116):    at com.project.locationapp.TripSummary.createMap(TripSummary.java:113)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at com.project.locationapp.TripSummary.onCreate(TripSummary.java:38)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-03 20:42:42.737: E/AndroidRuntime(18116):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
01-03 20:42:42.737: E/AndroidRuntime(18116):    ... 11 more 
```

我已经测试了用于获取 LatLng 值的数据源，它可以很好地检索这些值。关于为什么我`NullPointerException`在尝试从 获取地图时得到的任何建议`SupportMapFragment`？

提前致谢。

埃德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:11:46.377

如果将*SupportMapFragment*添加到布局文件中，则不必手动创建新实例。您只需要通过调用获取参考

```
SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);
GoogleMap map = mapFragment.getMap(); 
```

您可能会得到 NPE，因为新实例化的片段尚未创建 GoogleMap 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T21:48:48.583

我在最新的 Google Maps V3 中发现的一个奇怪情况是，您必须在开始添加折线等之前设置地图边界。

# r - 遍历目录中的所有文件

> ID：14147178
> 
> 赞同：-3
> 
> 时间：2013-01-03T21:01:18.050
> 
> 标签：r, loops

这是这里帖子的后续[：](https://stackoverflow.com/questions/14112739/how-to-calculate-the-difference-between-different-data-frames-with-common-column/14113113#comment19592656_14113113)。

这是@Arun 提供的代码：此代码在不同目录的文件上运行以比较不同的数据帧。

```
f1 <- list.files("<path1>", full.names = TRUE) 
f2 <- list.files("<path2>", full.names = TRUE) 
f3 <- list.files("<path3>", full.names = TRUE)

get_idx <- function(in_df) { 
sapply( 1:nrow(in_df), function(idx) 
which(df1[idx, 2:4] > df1[idx, 1])) 
}

get_result <- function(idx.v, in_df2, in_df3) { 
sapply(1:length(idx.v), function(ix) { 
col.idx <- idx.v[[ix]] 
len.idx <- length(col.idx) 
if (len.idx > 0) { 
res <- sum(in_df2[ix, col.idx] - in_df3[ix, col.idx]) 
} else { 
res <- NA 
} 
}) 
} 
```

那么最后一部分是：

```
out <- lapply(1:length(f1), function(f.idx) { 
df1 <- read.table(f1[f.idx], header = T) 
df2 <- read.table(f2[f.idx], header = T) 
df3 <- read.table(f3[f.idx], header = T) 

idx.v <- get_idx(df1) 
result <- get_result(idx.v, df2, df3) 
transform(df3, result = result) 
}) 
```

运行此代码会产生错误消息：

```
Error in which(df1[idx, 2:4] > df1[idx, 1]) : object 'df1' not found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:22:10.197

这是一个非常简单的错误。将行更改`which(df1[idx, 2:4] > df1[idx, 1]))`为`which(in_df[idx, 2:4] > in_df[idx, 1]))`

# button - tv.ui.button 仅响应页面加载时的鼠标点击

> ID：14147179
> 
> 赞同：1
> 
> 时间：2013-01-03T21:01:23.020
> 
> 标签：button, keyboard, google-tv, google-closure

此 tv.ui.button 仅在最初加载时响应 mouseclick，但在至少单击一次后响应键盘 ENTER 或 mouseclick。我这里有什么问题吗？

HTML

```
<div class="tv-button alert-button" id="test-button">Alert button</div> 
```

JS

```
decorateHandler.addClassHandler('alert-button', function(button) {
goog.events.listen(button, tv.ui.Button.EventType.ACTION,
      function() {
        alert('Button clicked.');
        var elementToFocus = goog.dom.getElement('tab1');
        var componentToFocus = tv.ui.getComponentByElement(elementToFocus);
        tv.ui.Document.getInstance().setFocusedComponent(componentToFocus);;
      });
}); 
```

编辑：这似乎是一个关于 javascript 的问题，而不是专门的闭包。我在适当的标签下发布了一个新问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:53:35.760

你确定按钮有光标焦点吗？如果不是，那么“Enter”键事件将被交给默认处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:00:45.623

好吧，我用半破解修复了它。我在 $(document).ready 中使用了 $('target').click 按钮，这似乎将焦点设置为好像实际发生了单击事件

# firefox - 某些页面页脚下方的无法解释的空间（仅在 Firefox 中）

> ID：14147182
> 
> 赞同：0
> 
> 时间：2013-01-03T21:01:30.277
> 
> 标签：firefox, footer

这个问题完全让我难以置信。我有一个新网站，有 5 个主页，除了其中一个页面之外，所有页面的页脚下方都有无法解释的间隙，但仅在 Firefox 中。我说无法解释是因为我使用 firebug 来确定它不是元素或任何元素的填充/边距。

我验证了 HTML 和 CSS3 中的所有页面，并且它们都已检出，所以我不认为这是一个损坏的标签。

如果有人可以用萤火虫四处寻找并检查一下，我会很高兴...

带有无法解释的空格的页面：[http](http://www.smorecreative.com/about/) : //www.smorecreative.com/about/ 没有无法解释的空格的页面：[http ://www.smorecreative.com/work/](http://www.smorecreative.com/work/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:20:18.813

我将您的问题跟踪到以下代码 - 如果您删除这段代码，神秘的差距就会消失......但我不知道为什么 Firefox 不喜欢这段代码，其他浏览器对此感到满意。

```
<script type="text/javascript">
// Pretty Checkboxes
jQuery(document).ready(function(){
    jQuery('input[type=checkbox]').prettyCheckboxes();
});

</script> 
```

# swingworker - SwingWorker.done() 是否保证在工人最后一次调用 SwingWorker.process() 之后执行？

> ID：14147191
> 
> 赞同：2
> 
> 时间：2013-01-03T21:02:33.033
> 
> 标签：swingworker

这是 SwingWorker 的文档所说的：
-`doInBackground()`在工作线程中执行
-`process()`在事件调度线程 (AWT EDT) 上异步执行。`publish()`就工作线程中的调用而言，它的执行是不可预测的
-完成`done()`后在 AWT EDT 中执行`doInBackground()`

我看不到任何说最后一次调用`process()`总是**在**之前执行的东西`done()`（它们都在同一个线程上运行）。

我有多个电话`publish()`来自`doInBackground()`；发布的对象被拾取`process()`并用于更新带有进度报告的 GUI。对文档的字面解释可能意味着*可以*`done()`在最后一次执行之前在 EDT 上安排，`process()`因为`done()`保证在工作线程之后执行，但`process()`记录为不可预测。

我所有的测试都表明它`done()`在最后一个之后运行`publish()`（这是有道理的，这就是我想要的），但是有没有人看过文档或挖掘代码来验证 SwingWorker 是否旨在保证这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:52:10.523

答案是不。请参阅下面链接的 DSquare 的答案。

> `publish()`不直接调度，它设置一个计时器，该计时器将在之后`process`触发`process()`块的调度。`EDT``DELAY`

# php - 防止客户在magento中被删除

> ID：14147194
> 
> 赞同：0
> 
> 时间：2013-01-03T21:02:47.873
> 
> 标签：php, magento

防止客户在 Magento 中被删除的最佳方法是什么？我想保留相同的功能，但不是从系统中删除客户数据，而是应该简单地禁用他们的帐户。

Magento 是否提供开箱即用的此功能，还是我必须编写一些代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:12:02.277

您可以使用这个简单的扩展来做到这一点：http: [//www.magentocommerce.com/magento-connect/customer-activation.html](http://www.magentocommerce.com/magento-connect/customer-activation.html)

# c# - 扩展应用程序时如何防止 Winforms 控件重叠？

> ID：14147195
> 
> 赞同：5
> 
> 时间：2013-01-03T21:02:50.530
> 
> 标签：c#, winforms, controls, overlapping

我有一个非常简单的 winforms 应用程序。它包含一个丰富的编辑框、嵌入式浏览器、进度条、一些按钮等。

我将控件上的锚点设置为向各个方向扩展。

然而，当向上和向下扩展时，控件将彼此重叠。我该如何防止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T21:14:07.163

您最好的选择是在`TableLayoutPanel`您的表单中添加一个包含“布局网格”的表单，这应该停靠在表单上，​​然后您可以将控件添加到表格中的单元格中（它们可以覆盖多行和多列，因此您可以获得你想要的布局）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:09:35.060

您必须在每个控件上设置属性`Autosize=true`，尤其是在主窗体上。

请注意，某些控件（例如）`TabControl`具有此属性，但您无法使用智能感知（属性`Browseable=false`）看到它。

# c++ - 在 opencv 中使用 cvVideoWriter 时出错？

> ID：14147208
> 
> 赞同：0
> 
> 时间：2013-01-03T21:03:46.570
> 
> 标签：c++, video, opencv, codec

此代码片段应该保存范围由`start`和定义的视频的一部分`end`。有一个结构数组 ( `data[i]`) 保存原始视频中拍摄的视频的开始和结束帧。一共有8个镜头。

```
for (int i = 0; i < finalCount-1; ++i) {
    capture = cvCaptureFromAVI("Stats\\Shots\\Cricketc1.avi");
    assert(capture);

    int frame_number = 0;
    int start = data[i].start_frame;
    int end   = data[i].end_frame;

    char shotname[100];
    strcpy_s(shotname, "shot_");
    char shot_id[30];
    _itoa_s(data[i].shot_no, shot_id, 10);
    strcat_s(shotname, shot_id);
    strcat_s(shotname, ".avi");

    IplImage* image = NULL;

    CvVideoWriter* writer = NULL;
    writer = cvCreateVideoWriter (shotname, CV_FOURCC('i','Y','U','V'), fps, cvSize(width, height), 1);
    assert(writer);
    while (frame_number >= start && frame_number < end) {
        image = cvQueryFrame(capture);
        assert(image);
        cvWriteFrame(writer, image);
    }
    cvReleaseImage(&image);
    cvReleaseVideoWriter(&writer);
    cvReleaseCapture(&capture);
    cout << shotname << " saved ..." << endl;
} 
```

运行该程序后，将创建 8 个大小为 6kb 且不运行的视频文件。我尝试了各种编解码器，如 divx、mjpg、mpg2、iyuv 等，但都给出了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:20:53.740

在你的`while`循环中，`frame_number`永远不会增加。既然你说程序实际执行并创建文件，这意味着你的`while`循环中没有任何东西运行......否则你会陷入无限循环，因为`frame_number`将永远是`0`.

我建议您初始化`frame_number`为，`start`而不是`0`它没有理由存在于循环范围之外，因此 a`for`似乎更合适：

```
int start = data[i].start_frame;
int end   = data[i].end_frame;

...

for (int frame_number = start; frame_number < end; frame_number++) {
    image = cvQueryFrame(capture);
    assert(image);
    cvWriteFrame(writer, image);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:14:50.187

如果 Gunther Fox 的回答无助于尝试使用不同的编解码器 - 这很奇怪，但在我的情况下，iyuv 根本不工作，其他一些编解码器工作正常，但我在调试时无法阅读它们......对我来说 - ms video 和 radius cinepak 总是可以正常工作（写和读），iyuv 根本不工作，其他代码 - 写和读，但在调试时不行。

# android - 我应该如何制作一个简单的移动应用程序？钛还是原生？

> ID：14147212
> 
> 赞同：0
> 
> 时间：2013-01-03T21:04:11.357
> 
> 标签：android, ios, mobile, titanium, titanium-mobile

我有一个非常简单的应用创意，我想在空闲时间制作。我的技能都是 LAMP 堆栈 Web 开发，所以我想我会使用 Appcelerator 的 Titanium 为这两种移动操作系统制作应用程序。

但是，在启动 Titanium 之后，我遇到了很多奇怪的错误。例如，Android 模拟器无法正常工作，无法获取用户的位置。我也无法让 ajax 请求工作。

Titanium 似乎比仅使用 Objective-c 或 Java 开发更麻烦。我想知道我是否值得与 Titanium 斗争，或者只是学习如何为每个操作系统单独开发。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:09:23.400

如果您的应用程序想法真的“非常简单”，那么我强烈建议您学习每个开发平台的基础知识并开始为每个开发平台制作它。即使这样做，您也会更好地了解 Titanium 下发生的事情。这些错误和问题会更有意义，您可能知道在哪里寻求帮助。

这只是我的意见。此刻，我正在做一些 iOS 教程，这样我至少可以熟悉 iOS 应用程序的工作原理。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:04:31.847

每种方法都有优点和缺点。我通常是这样向客户解释的：

您可以选择使用第三方、跨平台的SDK（如Titanium、Unity、Phone Gap等）进行开发，可能会减少开发时间。但是，这样做是有代价的——该应用程序的下载量会更大，因为它包括为您的应用程序编写的代码和跨平台工具的代码。此外，代码可能比本机编写的代码慢（性能不如本机代码）（取决于跨平台套件的工作方式，它可能具有同样的性能，但它永远不会比本机代码快）。

从 Titanium 的网站（参见[http://developer.appcelerator.com/question/91121/reducing-the-size-of-titanium-based-application](http://developer.appcelerator.com/question/91121/reducing-the-size-of-titanium-based-application)）：

问题 ：`How can we reduce the size of a Titanium based Application? My Application whose Resources Files are just about 800 Kb, generates around 5.7 MB sized App in Debug mode and 5.2 MB in Release mode?`

回答 ：`The Titanium build scripts try and analyze your source code and optimize the generated binary to only include the Titanium modules that are necessary. However, it does remain the case that our binaries are much larger than native binaries, since we need to ship our platform code and a JavaScript interpreter with the application.`

最终，问题归结为——哪个对您的项目更重要：(1) 开发的简易性和速度，或 (2) 应用程序的性能和大小？

如果您正在构建一个跨平台游戏，那么原生开发可能并不意味着需要几天的额外开发时间，而是可能需要几个月或几年。此外，其中一些工具（尤其是 Unity）可能已经为您在本地编写时遇到的问题提供了预先打包的解决方案（例如可以为您节省大量时间的物理引擎）。在这种情况下，您最好使用跨平台的 SKD 创建您的应用程序。

（你还有一个好处是用户更容易理解这个应用程序是如此之大，因为它毕竟是一款游戏，而且用户对这类游戏的长时间下载很熟悉。）

但是，如果您正在创建一个相当简单的应用程序，或者一个用于商业、媒体等的应用程序，其中下载大小很重要（也许用户可能不愿意等待很长时间来下载和使用您的应用程序）和/或性能最重要，请使用本机编写。

在您的情况下，正如您提到您正在尝试制作“一个非常简单的应用程序”，最好在本地编写它。最终，这是您必须权衡两种选择的利弊的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:45:59.620

如果应用程序很简单，请使用本机。1 个月前，我的技能也是 LAMP，但由于为 android 开发有很多文档和教程，我可以轻松掌握它。任何有编程概念的人都能达到同样的效果。

但正如我所说，很大程度上取决于你的情况。例如，我的应用程序基于“webview”，那么我为什么不追求非本地平台。

# javascript - 在 Uint8Array 中搜索多字节模式

> ID：14147213
> 
> 赞同：5
> 
> 时间：2013-01-03T21:04:12.433
> 
> 标签：javascript, typed-arrays

我有一个 nodejs 脚本，我想在其中解析 MP3 帧。这些帧很容易检测，因为每个帧都以两个字节开头`0xff 0xfb`。

我正在使用 a`Uint8Array`来访问该文件的字节。使用`[].indexOf.call(data, 0xff)`I 可以轻松搜索单个字节，但不能搜索两个字节。显然我可以手动检查第二个字节，但我想知道是否有一种干净的方法来获取某个字节序列的索引。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T18:59:35.280

显然，如果不编写自定义代码，没有很好的方法可以做到这一点，所以这就是我所做的：

```
Uint8Array.prototype.indexOfMulti = function(searchElements, fromIndex) {
    fromIndex = fromIndex || 0;

    var index = Array.prototype.indexOf.call(this, searchElements[0], fromIndex);
    if(searchElements.length === 1 || index === -1) {
        // Not found or no other elements to check
        return index;
    }

    for(var i = index, j = 0; j < searchElements.length && i < this.length; i++, j++) {
        if(this[i] !== searchElements[j]) {
            return this.indexOfMulti(searchElements, index + 1);
        }
    }

    return(i === index + searchElements.length) ? index : -1;
}; 
```

# iphone - 您可以向您的 iphone 消息应用程序添加功能吗？

> ID：14147216
> 
> 赞同：-1
> 
> 时间：2013-01-03T21:04:17.657
> 
> 标签：iphone, messages

好的，所以我很好奇您是否可以向您的 iphone 消息应用程序添加功能？如果您打开右上角的消息应用程序，您可以点击编辑，然后您可以删除和转发选定的消息。有没有办法为此添加另一个功能？甚至可以通过另一个应用程序访问这些消息的方式（例如一个程序，然后通过它运行消息）。

我基本上是想拥有一个应用程序，用户可以通过选择他们希望其他用户看到的消息来向其他人发送消息。这基本上就像截取手机的屏幕截图，但截取屏幕截图然后发送它太复杂了，并且可能包含您不希望其他用户看到的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:12:07.077

我 100% 确定没有越狱，就无法更改 iOS 设备上内置消息应用程序的行为。

我 99% 确信 Apple 没有提供任何挂钩来从用户的 Messages 应用程序中获取信息。

# ruby-on-rails - 在 Rails 中使用 CkEditor 如何启用从本地文件系统上传图像？

> ID：14147221
> 
> 赞同：0
> 
> 时间：2013-01-03T21:04:34.537
> 
> 标签：ruby-on-rails, ckeditor

我有一个使用带有 CKEditor 3.7 版的 PaperClip 的 rails 应用程序。

我想启用从本地文件系统上传图像。我知道我可以使用 FCKEditor，但我只能看到它适用于 PHP 和 ASP.Net。

这是另一种选择还是我需要进行自定义集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:38:31.137

您可以将 elfinder 集成到 ckeditor 中。

*   [http://elfinder.org/](http://elfinder.org/)
*   [https://github.com/Studio-42/elFinder/wiki/Integration-with-CKEditor](https://github.com/Studio-42/elFinder/wiki/Integration-with-CKEditor)
*   [https://github.com/phallstrom/el_finder](https://github.com/phallstrom/el_finder)
*   [https://github.com/phallstrom/el_finder-rails-example](https://github.com/phallstrom/el_finder-rails-example)

免责声明 - 我编写了 Rails 连接器。它适用于 1.x elfinder，但可以使用翻译器与 2.x 一起使用（但并非所有内容都受支持）。我现在正在研究纯 2.x 支持。

# eclipse - Eclipse/EGit：添加新文件时将项目标记为已修改

> ID：14147222
> 
> 赞同：0
> 
> 时间：2013-01-03T21:04:45.753
> 
> 标签：eclipse, egit

添加新文件时是否可以在包资源管理器中将项目标记为“已修改”（带有“>”符号），而不仅仅是在修改旧文件时？根据[这个问题和答案](https://stackoverflow.com/questions/6677318/egit-automatically-add-new-files)，不可能自动提交新文件，但收到有关它们的通知也很有用。

可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T22:04:38.570

这实际上应该已经起作用了。

您使用的是旧版本的 EGit 吗？请从以下更新站点安装 2.2：

[http://download.eclipse.org/egit/updates](http://download.eclipse.org/egit/updates)

# iphone - Xcode 4.2 和 Facebook SDK 3.0 教程

> ID：14147223
> 
> 赞同：1
> 
> 时间：2013-01-03T21:04:51.543
> 
> 标签：iphone, ios, facebook, osx-snow-leopard, facebook-ios-sdk

我的 ios 应用程序需要 facebook 集成。我在 OS X Snow Leopard 上，此时无法升级我的 OS/Xcode。网络上的所有教程似乎都集中在 Facbook SDK 3.1 集成（这需要我升级我的 Xcode）。

我尝试了本[教程](http://xcodenoobies.blogspot.com/2012/09/how-to-upload-photo-and-update-status.html)，（是的，我为 FacebookSDK.framework 和 Accounts.framework “链接二进制文件”。

`But I get the error "FacebookSDK/FacebookSDK.h" file not found`

有人可以指出我**在 Xcode 4.2 上将****Facebook SDK 3.0**与ios 应用程序集成的文档/教程吗？我需要登录/验证和邀请朋友功能。

 **谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T06:22:08.480

FacebookSDK/FacebookSDK.h 是已弃用标头的一部分。将 Deprecated Headers 添加到您的项目并重建您的应用程序。它应该可以正常工作。**

# spring-mvc - 在 DisplayCode 中有哪些使用复选框的好代码示例？

> ID：14147228
> 
> 赞同：0
> 
> 时间：2013-01-03T21:05:10.963
> 
> 标签：spring-mvc, displaytag

任何人都可以向我发送显示标签示例。

我正在使用 displaytag 进行分页。在分页中，一旦用户选择所需的复选框并提交页面，我就会得到行和复选框。我想在我的控制器中获取所选框的数据。如何做到这一点，谁能给我jsp和控制器代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:09:44.837

[http://demo.displaytag.org/displaytag-examples-1.2/example-checkboxes.jsp](http://demo.displaytag.org/displaytag-examples-1.2/example-checkboxes.jsp) 这说明了如何使用 DisplayTag 复选框。

还要查看这个先前的问题。 [displaytag，如何集成复选框？](https://stackoverflow.com/questions/2362009/displaytag-how-to-integrate-checkboxes)

这是关于如何专门从他们那里获取信息。 [http://deepeshdarshan.wordpress.com/2011/01/29/how-to-get-checkbox-values-from-displaytag-using-struts2/](http://deepeshdarshan.wordpress.com/2011/01/29/how-to-get-checkbox-values-from-displaytag-using-struts2/)

# c# - c# 在托管和非托管资源中使用关键字用法

> ID：14147229
> 
> 赞同：0
> 
> 时间：2013-01-03T21:05:13.460
> 
> 标签：c#

using 关键字用于正确处理托管和非托管资源。

我对何时使用 using 关键字感到困惑。

例如 using 用于托管资源，例如 Connection 对象。

它用于非托管资源，例如：

```
 using (Font font1 = new Font("Arial", 10.0f)) 
   {
       byte charset = font1.GdiCharSet;
   } 
```

何时使用 using 关键字有一般的经验法则吗？是否应该将其用于所有对象，以便正确处理它们？您如何判断哪些对象是 using 关键字的主要候选对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:07:13.147

> 何时使用 using 是否有一般的经验法则？

`IDisposable`无论资源是托管还是非托管，您都应该在任何实现 的类上使用它。

来自[MSDN](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)：

> 通常，当您使用 IDisposable 对象时，您应该在 using 语句中声明和实例化它。using 语句以正确的方式调用对象的 Dispose 方法，并且（当您如前所示使用它时）它还会导致对象本身在调用 Dispose 时立即超出范围。在 using 块中，对象是只读的，不能修改或重新分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:09:35.600

**通常**，您应该在类实现时使用它`IDisposable`。但是，有一些边缘情况需要避免，例如当您使用[WCF 时，如此处所述](http://msdn.microsoft.com/en-us/library/aa355056.aspx)。此外，如果您需要在类中的其他位置访问该对象，则不能使用`using`，因为它限制了对象的范围，因此您应该显式处理您的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:08:50.257

我的一般经验法则：如果可以使用，请使用它。

什么时候可以使用？简而言之，当对象实现`IDisposable`并且您在方法结束时完成使用它时。

一个值得注意的例外是 Web 服务客户端（例如 WCF 服务）——默认实现可能导致真正的错误消息丢失。（例如参见[http://www.codeproject.com/Tips/197531/Do-not-use-using-for-WCF-Clients](http://www.codeproject.com/Tips/197531/Do-not-use-using-for-WCF-Clients)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T21:13:09.510

上面描述的 using 关键字将在 font1 超出范围时简单地调用 Dispose 。

尽管可能会有例外，但我认为您可以安全地假设当一个类实现 IDisposable 时，您应该在完成对象后调用 Dispose。

上面显示的结构将为您做到这一点。在其他情况下，您可能无法使用 using，因为对象的生命周期超过了创建它的函数的生命周期。在这种情况下，明智的做法是手动处置它。

亲切的问候，马尔维恩。

# jquery - jQuery Post 对象

> ID：14147235
> 
> 赞同：2
> 
> 时间：2013-01-03T21:06:10.957
> 
> 标签：jquery, object, post

我将如何将以下代码转换为对象帖子而不是字符串帖子？

```
var dataSend =   "uniqueID="+uniqueID
        +"&date="+date
        +"&mealNum="+mealNum
        +"&mealName="+mealName
        +"&foodID="+foodID
        +"&amount="+amount;

$.post("updatefood.php", dataSend, function(data){
    $("#errorSpan").html(data);
}); 
```

IE 大致如下：

```
var dataSend =   {uniqueID: uniqueID},
                {date: date};

$.post("updatefood.php", dataSend, function(data){
    $("#errorSpan").html(data);
    //location.reload();
}); 
```

但这显然不起作用，我无法弄清楚这些对象的格式。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:08:21.043

试试这个作为数据发送：

```
var dataSend= {
    'uniqueID': uniqueID,
    'date': date,
    'mealNum': mealNum,
    'mealName': mealName,
    'foodID': foodID,
    'amount': amount
};

$.post("updatefood.php", dataSend, function(data){
    $("#errorSpan").html(data);
    //location.reload();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:08:22.887

您可能需要在数据中的对象周围加上引号：

```
var dataSend =  {'uniqueID' : uniqueID, 'date' : date, ... };

//POST remains the same
$.post("updatefood.php", dataSend, function(data){
    $("#errorSpan").html(data);
    //location.reload();
}); 
```

*（您也可以在一组大括号中包含所有对）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T21:08:29.540

```
var dataSend =   {uniqueID: uniqueID, date: date}; 
```

你快到了。

# sql - 为每个左连接行匹配重复所有基表行

> ID：14147248
> 
> 赞同：2
> 
> 时间：2013-01-03T21:07:12.927
> 
> 标签：sql, left-join, sql-server-2012

我无法简明扼要地描述我需要的内容，因此感谢您对编辑标题的任何帮助！

我有 3 张桌子：

1.  `Jobs`（有`JobID`PK）
2.  `JobsDetail`（有`JobID`FK和`DepartmentsID`FK）
3.  `Departments`（有`DepartmentsID`PK）

`Departments`将有少量记录（~10）

如果我有 10 个部门行，我需要为每条`Jobs`记录重复所有 10 行。不在`JobsDetail`Job 记录中的 DepartmentID 将在 Job 列中显示一个`NULL`值。一张`Jobs`唱片，一个典型的`LEFT JOIN`作品就像我想要的那样：

```
Select d.Department, jobs.JobIdentifier
From    Departments d 
LEFT JOIN (Select Distinct j.JobID, j.JobIdentifier, DepartmentID, 
           From   Jobs j
           Join   JobsDetail jd on j.JobID = jd.JobID) jobs on d.DepartmentID = jobs.DepartmentID 
```

产生这些结果：

```
Department  JobIdentifier
310         NULL
320         NULL
430         NULL
450         NULL
460         NULL
500         NULL
530         1000
533         1000
534         1000
535         NULL 
```

当然，当添加另一个 Jobs 记录时，我会看到：

```
Department  JobIdentifier
310         2000
320         NULL
430         NULL
450         NULL
460         2000
500         NULL
530         1000
533         1000
534         1000
534         2000
535         NULL 
```

我需要的是这样的：

```
Department  JobIdentifier
310         NULL
320         NULL
430         NULL
450         NULL
460         NULL
500         NULL
530         1000
533         1000
534         1000
535         NULL
310         2000
320         NULL
430         NULL
450         NULL
460         2000
500         NULL
530         NULL
533         NULL
534         2000
535         NULL 
```

如何实现？

以下是表格中的一些测试数据：

```
JobID                SubPlantID  JobIdentifier                                      PartFamilyID OrderDate               OrderedBy                                          OrderQuantity DueDate                 SpecialInstructions                                                                                                                                                                                                                                              PrintDate               PrintedBy                                          StartDate               StartedBy                                          ProducedQuantity ReprintNumber CompletedDate           Location
-------------------- ----------- -------------------------------------------------- ------------ ----------------------- -------------------------------------------------- ------------- ----------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------------------- -------------------------------------------------- ----------------------- -------------------------------------------------- ---------------- ------------- ----------------------- --------------------------------------------------
2                    1           1000                                               1            2012-12-21 13:20:00.000 Keith                                              1             2012-12-28 00:00:00.000                                                                                                                                                                                                                                                                 NULL                    NULL                                               2012-12-28 00:00:00.000 NULL                                               NULL             0             NULL                    NULL
3                    1           2000                                               1            2013-01-03 00:00:00.000 Jon                                                10            2013-01-10 00:00:00.000 NULL                                                                                                                                                                                                                                                             NULL                    NULL                                               NULL                    NULL                                               NULL             0             NULL                    NULL

JobsDetailID         JobID                Operation FirstStartDate          OperationQuantity OperationStatusTypeID OperationDescription                                                                                                                                                                                                                                           DepartmentID WorkCenterID UserName
-------------------- -------------------- --------- ----------------------- ----------------- --------------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ------------ ------------ --------------------------------------------------
1                    2                    10        NULL                    1                 2                     Weld                                                                                                                                                                                                                                                           1            2            keith
2                    2                    20        NULL                    1                 3                     Punch                                                                                                                                                                                                                                                          1            1            keith
3                    2                    30        NULL                    1                 2                     Form                                                                                                                                                                                                                                                           3            5            jon
4                    2                    40        NULL                    1                 3                     Paint                                                                                                                                                                                                                                                          2            4            jon
6                    2                    50        NULL                    1                 3                     Glue                                                                                                                                                                                                                                                           2            4            jwood
9                    2                    60        NULL                    1                 2                     Eat                                                                                                                                                                                                                                                            3            5            jon
10                   3                    20        NULL                    10                1                     Punch                                                                                                                                                                                                                                                          10           18           Jon Wrye
11                   3                    30        NULL                    10                0                     Form                                                                                                                                                                                                                                                           15           29           Jon Wrye
12                   3                    40        NULL                    10                0                     Weld                                                                                                                                                                                                                                                           13           24           Jon Wrye
13                   3                    10        NULL                    10                2                     Start                                                                                                                                                                                                                                                          1            1            jwrye
14                   3                    50        NULL                    10                0                     Finish                                                                                                                                                                                                                                                         1            2            jwrye

DepartmentID Department
------------ --------------------------------------------------
1            534
2            533
3            530
4            535
5            500
6            450
7            430
8            200
9            240
10           232
11           220
12           300
13           460
14           320
15           310 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:26:18.270

您应该从作业和部门之间的交叉连接开始，然后从那里构建查询：

```
Select d.Department, jobs.JobIdentifier
From    Departments d cross join
        (select distinct JobIdentifier from Jobs j) ji LEFT JOIN
        (Select Distinct j.JobID, j.JobIdentifier, DepartmentID, 
         From Jobs j Join
              JobsDetail jd
              on j.JobID = jd.JobID
        ) jobs
        on d.DepartmentID = jobs.DepartmentID and
           ji.jobidentifer = jobs.jobIDentifier 
```

我对 JobId 和 JobIdentifier 之间的区别有点不清楚，所以这可能不太正确。

如果将 ji.JobIdentifier 添加到列表中，即使没有匹配项`select`，您也会看到该部门*应该属于哪个工作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:19:57.097

您将需要划掉目录（使用交叉连接）、部门和工作，然后对您的关系表进行左连接

[http://sqlfiddle.com/#!6/277ec/30](http://sqlfiddle.com/#!6/277ec/30)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:17:17.370

这是怎么做的？

`select d.Department, CASE WHEN d.DepartmentId = jj.DepartmentID THEN jj.JobID ELSE NULL END`

`from Department d, (SELECT j.JobID, jd.DepartmentID FROM Jobs j left outer join JobDetail jd on j.JobID = jd.JobID) as jj`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T21:24:35.150

我不确定我是否完全理解你想要做什么，所以让我们从头开始。以下陈述在哪些方面被证明是不充分的？

```
Select 
    d.Department,
    j.JobIdentifier
From
    Departments d
    Left Join JobDetails jd On d.Id = jd.DepartmentId
    Left Join Jobs j On jd.JobId = j.Id 
```

# c - 复合语句是 C 中的左值（或右值）吗？

> ID：14147250
> 
> 赞同：4
> 
> 时间：2013-01-03T21:07:19.030
> 
> 标签：c, compound-assignment

当我检查`container_of`Linux Kernel 中宏的定义时，我看到一个复合语句作为宏定义，

```
#define container_of(ptr, type, member) ({                      \
    const typeof( ((type *)0)->member ) *__mptr = (ptr);    \
    (type *)( (char *)__mptr - offsetof(type,member) );}) 
```

但是，在我看来，不清楚的问题是哪个语句被视为右值。显然最后一条语句的结果被用作右值，但为什么呢？

```
(type *)( (char *)__mptr - offsetof(type,member) ); 
```

例如，下面的代码示例在 C 中是否合法？

```
int g_count = 0xFF;

#define GLOBAL_COUNT do {g_count;} while(0)

int main(int argc, char *argv[])
{
    int local;
    local = GLOBAL_COUNT;
    local = 0;
    GLOBAL_COUNT = local;
    return 0;
} 
```

复合语句中变量的赋值规则是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T21:09:19.273

`({})`是 C 的 GNU 扩展，称为*语句表达式*：

[http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)

在 C 中，复合语句是一个语句，并且语句不能在表达式中使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T21:12:37.097

您看到的是*语句表达式*，而不是复合语句。*语句表达式*是标准 C 语言中不存在的 GCC 扩展。

在 GCC*语句中，表达式*“按值”返回它们的结果，这意味着它们的结果是右值。这实际上与 C 语言的一般“哲学”一致：在 C 中，几乎任何对左值对象的操作都会使它们迅速失去左值性并变成右值。（在这方面，C 与 C++ 几乎相反。C++ 试图尽可能长时间地保持左值性。）

# javascript - MediaElement.js - 视频在 mac/FF17 上的新选项卡中打开

> ID：14147251
> 
> 赞同：0
> 
> 时间：2013-01-03T21:07:39.510
> 
> 标签：javascript, mediaelement.js

我正在对使用 mediaelement.js 的应用程序进行维护。播放器在 mac/chrome、pc/ie8、pc/ff17 上运行良好，但在 mac/ff17 上，视频在新选项卡中打开并在那里播放。

我对 mac 不是很熟悉，但是我的浏览器有一个新的 flash 插件，我检查了文件扩展名关联，它都是在 quicktime 上设置的。

在新标签中打开是一种后备行为吗？这就是我的猜测：如果由于某种原因无法启动播放器，那么 mediaelement.js 会尝试让浏览器下载文件，并且由于文件关联，quicktime 在新选项卡中播放它。

我在测试站点上有这种行为，但在 mediaelementjs.com 上，示例视频在 mac/ff17 上播放良好。那会是由于视频的不同类型（文件扩展名）吗？

# java - Java Swing 插入键助记符

> ID：14147252
> 
> 赞同：1
> 
> 时间：2013-01-03T21:07:53.877
> 
> 标签：java, windows, swing

我有一个复杂的 Java Swing GUI 应用程序，它为“插入”按钮定义了一个助记键：

```
insertButton.setMnemonic( KeyEvent.VK_INSERT ); 
```

但是，当我键入`Alt`+时，`Insert`此应用程序的文件菜单获得焦点。我更改了助记键代码：

```
insertButton.setMnemonic( KeyEvent.VK_0 ); 
```

`Alt`当我键入+时，不会发生这种行为`0`。

如何`Insert`以消耗`Alt` `KeyEvent`? （或者助记键绑定只对生成`KEY_TYPED`事件的键有效？）

# java - 如何在 IntelliJ IDEA 12 中查看方面受影响的 Java 类？

> ID：14147255
> 
> 赞同：4
> 
> 时间：2013-01-03T21:08:06.367
> 
> 标签：java, spring, ide, intellij-idea, aspectj

有什么方法可以查看 IntelliJ IDEA 中影响（建议）Java 方法的方面？

像Eclipse 中的[外部参照？](http://www.eclipse.org/ajdt/xref/)

![外部参照](../Images/23f932a6f85029557769dd45394fb5de.png)

**编辑：**

@Xiujun_Ma 显示该功能存在，但我不知道什么不起作用。我在项目中使用库和方面。

**库：**

![库](../Images/f5b4c71f676a41ead2e2c129b8bb72f5.png)

**方面：**

![刻面](../Images/b3408e0d55bf13ac556c92b13b303518.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T05:43:24.647

在您的方面类中，您将看到如下所示： ![在此处输入图像描述](../Images/69cae69f9aba599eb136f18359904b31.png)

单击行号后的球（导航到建议的方法），

然后，您将看到方面受影响的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:29:01.037

是的，正如您从@XiujunMa 的回答中看到的那样。它也适用于 11.1.3。用于导航到 Spring 中受事务影响的方法。

> 为了能够在 IntelliJ IDEA 中使用 AspectJ 支持，您必须确保启用了以下插件：
> 
> ```
> Spring-AOP and @AspectJ Support.
> AspectJ Support. 
> ```
> 
> 除此之外，您还应该为 aspectjrt.jar 创建一个库。

您可能需要`<aop:config>`在 spring 配置中使用来定义`<aop:pointcut`. 然后用于`<aop:advisor`映射该切入点和建议参考。你也可以把它放在`<aop:aspect`那里。

# java - 会话未得到维护，再次重定向到登录页面

> ID：14147256
> 
> 赞同：0
> 
> 时间：2013-01-03T21:08:07.547
> 
> 标签：java, apache, unix, webserver

我在 apache 上有我的 Web 服务器配置，而我登录到应用程序并重定向到所需的页面。当我在同一个浏览器上再次复制并粘贴 URL 时，我被重定向到登录页面。因此而不是维护session < 我必须重新登录。如果我的网络服务器配置有任何更改，请告诉我？

# objective-c - sessionStateChanged ios 6 facebook sdk 3.1

> ID：14147257
> 
> 赞同：0
> 
> 时间：2013-01-03T21:08:10.577
> 
> 标签：objective-c, ios, facebook, ios6, facebook-login

我正在实现以下代码来检查应用程序中我的 Facebook 会话的状态

```
 - (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
                    if (!error) {
                        // We have a valid session
                        NSLog(@"User session found");

                        [self reautorizarPermisos:self ];
                    }

        break;
        case FBSessionStateClosed:
                    NSLog(@"sesion close");
                    [self    loginFB:self  ];

        break;
        case FBSessionStateClosedLoginFailed:

                    NSLog(@"sesssion failed");

                    [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter]
     postNotificationName:UIDocumentStateChangedNotification
     object:session];

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

此代码是从此处访问 [facebook 文档](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

我正在调用方法如下

```
- (IBAction)login:(id)sender {

        FBSession *sesion;
        FBSessionState state;
        NSError *error;

        [self sessionStateChanged:sesion state:state error:error];
        NSLog(@"loginnnnnnn");
    } 
```

问题是状态没有进入任何案例，显然会话既没有打开也没有关闭或失败非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:30:34.527

根据[文档](https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#FBSessionState+enum)`FBSessionState`，可能的值为

```
typedef enum {
    FBSessionStateCreated = 0,
    FBSessionStateCreatedTokenLoaded = 1,
    FBSessionStateCreatedOpening = 2,
    FBSessionStateOpen = 1 | FB_SESSIONSTATEOPENBIT,
    FBSessionStateOpenTokenExtended = 2 | FB_SESSIONSTATEOPENBIT,
    FBSessionStateClosedLoginFailed = 1 | FB_SESSIONSTATETERMINALBIT,
    FBSessionStateClosed = 2 | FB_SESSIONSTATETERMINALBIT,
} FBSessionState; 
```

在你的`switch`你失踪

`FBSessionStateCreated`
`FBSessionStateCreatedTokenLoaded`
`FBSessionStateCreatedOpening`
`FBSessionStateOpenTokenExtended`

所以你的`state`价值很可能就是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:40:15.800

如果您只想获取会话的当前状态，例如是否处于活动状态，那么这种方法是错误的。因为这是一个委托，只有当 Fbsession 发生变化时才会触发。

为了检查 fbsession 的状态，只需执行以下代码。

```
if (FBSession.activeSession.isOpen)
{
     //Write code to send any message. Here Facebook Session is active
}
else
{
    //Call the Facebook Login page to login into the Facebook and start new session.
} 
```

或者您也可以使用`FBSession.activeSession.accessToken == nil`

# android - Phonegap Android 上的 Javascript JSON 和 WCF 网络服务

> ID：14147259
> 
> 赞同：0
> 
> 时间：2013-01-03T21:08:16.143
> 
> 标签：android, json, wcf, cordova

我正在尝试运行此代码以从 Android 上的 phonegap 应用程序调用 WCF 函数

我使用 firefox 的 POSTER 测试了 web 服务，并且可以正常通过，并返回正确的值（实际上它只返回 true 或 false）

```
function verifyAccount(username, password){
   $.ajax({
    type: "post",
    url:  "http://50.63.174.229/banknoteservice/service1.svc/verifyAccount",
    data:  JSON.stringify("{'username' : 'test' , 'password' : 'test'}"),
    contentType: "application/json",
    dataType: "json",
    success: function(msg) {    
        $("#myDiv").html(msg);
    },
    error: function(e){
        $("#myDiv").html('error');              
    }
}); 
```

}

每次我尝试在手机上运行它时，它都会在 div 中显示错误消息

# html - ie8 登录链接中的 css 错误出现在导航栏中

> ID：14147263
> 
> 赞同：0
> 
> 时间：2013-01-03T21:08:22.490
> 
> 标签：html, jquery-ui, css, internet-explorer-8

ie8导航栏的登录链接掉下来了怎么解决这个bug

[http://jsfiddle.net/48y2Q/5/embedded/result/](http://jsfiddle.net/48y2Q/5/embedded/result/)

[http://jsfiddle.net/48y2Q/5/](http://jsfiddle.net/48y2Q/5/)

在下面提供我的代码

```
<li id="eMli" style="padding-left: 146px;">
<a id="eMlia" href="#about" style="background-color: #cba25e;">Login</a>
</li> 
```

# visual-studio-2010 - MsBuild 从命令提示符链接库

> ID：14147271
> 
> 赞同：4
> 
> 时间：2013-01-03T21:08:52.073
> 
> 标签：visual-studio-2010, msbuild, static-linking

我可以在命令提示符下使用 MSBuild 构建我的 VS2010 解决方案。我想编写一个批处理文件，在执行时构建一个解决方案。唯一的变化是链接到项目的静态库。我不能在这里使用动态库。我尝试了以下方法：

msbuild test.sln /p:AdditionalDependencies=test.lib

由于库未链接到解决方案，因此导致错误。有没有办法从命令提示符链接库？

# php - 为什么我在 directadmin 中的 cron 工作不起作用？

> ID：14147277
> 
> 赞同：1
> 
> 时间：2013-01-03T21:09:16.700
> 
> 标签：php, cron, crontab

我有以下 php 文件，它在浏览器和命令行中运行良好。

```
<?php

    $ch = curl_init ('http://www.domain.com/test_if_script_runs.php');
    $output = curl_exec ($ch);

?> 
```

文件 test_if_script_runs.php 仅在数据库中添加一个数字，以便我可以看到脚本运行。

我在 directadmin 中设置了一个 cron 作业。在输入字段中，我只添加了 10 分钟，并为所有其他字段留下了星号。

所以问题是，为什么directadmin 中的cron 工作不起作用？

更新 1：

我在 /var/log/cron 中检查了该文件的路径。该文件中没有错误消息。似乎 cron 工作正常。但是没有输出，因为当我从命令行或浏览器运行 cron 时，我检查了文件是否提供了所需的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:02:21.910

为了让 php 处理文件，我必须将 php 放在命令前面。我有如下内容：

```
php /home/admin/domain.com/public_html/script.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-16T22:17:05.397

我就是这样做的：

```
cd /home/user/public_html/any/folder; /usr/local/bin/php -f file.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-11T05:45:25.947

这对我有用：

```
/usr/local/bin/php /home/<USER>/domains/<DOMAIN>/public_html/script.php 
```

# html - css中的响应式文本大小

> ID：14147278
> 
> 赞同：0
> 
> 时间：2013-01-03T21:09:18.470
> 
> 标签：html, css, responsive-design, fullscreen

我正在使用表格（100% 宽度）开发一个简单的网站。该网站将在 30 英寸和 47 英寸电视上观看，因此表格中的文本需要适应屏幕尺寸。我应该在字体大小上应用 100% 吗？或者另一种方法？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:10:42.047

我会调查媒体查询。

[http://mediaqueri.es/](http://mediaqueri.es/)

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:43:18.097

I guess [this](http://www.netmagazine.com/tutorials/handling-typography-responsive-design) tutorial will help you.

You can also find few links at the bottom of the tutorial that will provide you with additional insights..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:18:16.373

您可能想考虑使用[Responsive-Measure](https://github.com/jbrewer/Responsive-Measure)。

**“用于生成响应式理想度量的 jQuery 插件。”**

基本上它会放大字体以匹配其父 dom 项的宽度。如果您坐在离电视较远的地方，那就太好了。

# python - 如何在搅拌机中标记最后导入的 *obj

> ID：14147287
> 
> 赞同：3
> 
> 时间：2013-01-03T21:09:37.723
> 
> 标签：python, object, import, blender

（可能写得不太好）问题是：有没有办法在通过 bpy.import_scene.obj 函数加载对象数据后立即获取它？

我的意思是当我用这个函数导入一个 obj 文件时，我需要为它做更多的转换。当我通过名称“网格”（导入后对象的默认名称）选择一个对象时，所有这些功能都适用于我场景中名为“网格”的其他对象。我试图从场景中的对象列表中获取最后一个对象，但它们是按字母顺序排列的，所以效果不佳。当我尝试更改 object.name 并对其应用下一个功能时，它仅适用于一个。导入对象的所有早期实例都恢复为默认值。

如何解决这个问题？是否可以从场景最后添加的对象中获取？或者，在导入 *obj 对象之后，在应用下一个函数之前，有什么方法可以“标记”它？或者也许有一种方法可以将 *obj 数据直接导入到之前创建的空白对象中。

干杯，雷格

PS：使用 Blender 2.63

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T02:39:11.303

操作员不会返回他们加载的数据，但您可以通过这种方式使用标记...

```
for obj in bpy.data.objects:
    obj.tag = True

bpy.import_scene.obj(filepath="somefile.obj")

imported_objects = [obj for obj in bpy.data.objects if obj.tag is False] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T17:12:39.237

从我在导入东西后看到的情况来看，所有对象（包括场景中已经存在的对象）的默认标签都是 true。所以似乎为了标记对象，您必须为它们分配一个 false 值，然后导入，如果它们的标记为 True，则将它们添加到导入的对象中。反过来不行。所以我不确定这个答案是否准确。

# c# - 如何为 EpiServer 页面文件添加有效的 aws S3 虚拟路径提供程序？

> ID：14147288
> 
> 赞同：1
> 
> 时间：2013-01-03T21:09:41.310
> 
> 标签：c#, asp.net, amazon-s3, episerver, virtualpathprovider

我正在运行一个 EpiServer 项目，我想在其中使用 Amazon S3、托管图像等...... pagefiles 目录中将存在很多图像。

我已经下载了 NuGet for Visual Studio 并添加了 AWSSDK 和 Geta.AmazonS3 库，以便能够将 Amazon S3 添加为虚拟路径提供程序。

我在 EpiServer.config 中添加了这一行：

```
<add showInFileManager="true" virtualName="AWS Global Files" virtualPath="~/AWS-S3/" bucketName="s3bucket" verticalDir="CS" bypassAccessCheck="true" hostName="xxxxxxxxx.cloudfront.net" maxVersions="5" name="AWSSiteGlobalFiles" type="Geta.AmazonS3.Hosting.AmazonS3VirtualPathProvider,Geta.AmazonS3" awsAccessKey="xxxxxxxxxxxxx" awsSecretKey="xxxxxxxxxxxxxxxx" physicalPath="" /> 
```

它适用于全局文件。

但是当我尝试为页面文件添加相同的内容时，我收到消息：

**“配置为处理页面文件的 VirtualPathProvider 必须返回实现 IPageDirectory 的目录”。**

```
<siteSettings
enableScheduler="true"
 pageFolderVirtualPathProvider="AWSSitePageFiles" />

<add showInFileManager="true" virtualName="AWS Page Files" virtualPath="~/AWS-S3/" bucketName="bucketpage" name="AWSSitePageFiles" verticalDir="CS" bypassAccessCheck="true" hostName="xxxxxxx.cloudfront.net" maxVersions="5" type="Geta.AmazonS3.Hosting.AmazonS3VirtualPathProvider,Geta.AmazonS3" awsAccessKey="xxxxxxxxxxxxxxxxxxx" awsSecretKey="xxxxxxxxxxxxx" physicalPath="" /> 
```

任何人都知道什么可能是错的，或者需要做什么？

通过查看该库，它看起来像是实现了 IPageDirectory（或至少是统一文件系统）。 [Geta.AmazonS3 库](https://www.coderesort.com/p/epicode/browser/Geta.AmazonS3/Geta.AmazonS3/Hosting/AmazonS3Directory.cs?rev=2099)

# javascript - 如何通过 Javascript 设置循环 iMacros？

> ID：14147290
> 
> 赞同：2
> 
> 时间：2013-01-03T21:09:46.777
> 
> 标签：javascript, imacros

1) 我无法通过 javascript 添加设置循环 imacros，我该如何添加它？

```
var macro;
    macro =  "CODE:";
    macro +=  "VERSION BUILD=8011895" + "\n"; 
    macro +=  "TAB T=1" + "\n"; 
    macro +=  "SET !ERRORIGNORE YES" + "\n"; 
    macro +=  "SET !EXTRACT_TEST_POPUP NO" + "\n"; 
    macro +=  "SET !TIMEOUT 3" + "\n"; 
    macro +=  "SET !EXTRACT NULL" + "\n"; 
    //macro +=  "SET !LOOP 1" + "\n"; 
    macro +=  "TAG POS={{loop}} TYPE=A ATTR=CLASS:twitter-timeline-link EXTRACT=TXT" + "\n"; 
    macro +=  "SAVEAS TYPE=EXTRACT FOLDER=* FILE=twitter.csv" + "\n"; 
    var extractedtext=iimGetLastExtract();
    iimPlay(macro); 
```

2) 我如何在没有 javascript 的情况下在 imacros 上使用该代码？（关于 iim）

```
var extractedtext=iimGetLastExtract(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:32:57.267

将您的 imacros 代码指定为 javscript 字符串并以**CODE 为前缀：**

```
var urls = ['http://google.com', 'http://yahoo.com'];

for (var i in urls) {
  var url = urls[i];
  var returnCode = iimPlay('CODE: URL GOTO='+url);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T01:37:26.837

你必须像这样写宏

```
var macro;

macro ="CODE:";
macro +="TAG POS={{i}} TYPE=SPAN ATTR=TITLE:link"+"\n";

///The triggering part

for (var i=1;i<10;i++)
{

iimSet("i",i)
iimPlay(macro)
} 
```

因为你的例子有点不清楚，我不得不说这个命令可能不起作用。

```
TAG POS={{i}} TYPE=SPAN ATTR=TITLE:link 
```

而不是 word 链接用 * 替换它，这意味着任何字符，然后它可以工作

```
TAG POS={{i}} TYPE=SPAN ATTR=TITLE:* 
```

同样在宏中你可以这样写

```
TAG POS={{variable}} TYPE=SPAN ATTR=TITLE:* 
```

但是在 iimSet 部分它是这样的。

```
iimSet("variable",i) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:27:49.970

1) 要循环 javascript 代码，您可以添加`for`如下语句：

```
for (i=1;i<=n;i++){
iimPlay(macro);
} 
```

其中 n 是要执行的循环数

2）在 iim 你不需要它，因为`!extract`参数已经提取了值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:47:57.577

我了解如何使用 javascript 为 firefox 循环制作 imacros，但问题是变量如何转移到此处调用的宏中：

```
iimPlay(macro); 
```

第一次假设你想点击链接 pos=1

然后第二次链接 pos=2

如果您调用的 iim 脚本是：

```
TAG POS=1 TYPE=SPAN ATTR=TITLE:link 
```

脚本如何知道下一次如何查看位置 2 (POS=2) 以及下一次查看位置 2 (POS=3)？

输入以下内容是否正确？

```
TAG POS=i TYPE=SPAN ATTR=TITLE:link 
```

# windows-phone-7 - 在wp7中提示消息“按两次返回按钮返回应用程序”

> ID：14147293
> 
> 赞同：0
> 
> 时间：2013-01-03T21:10:09.593
> 
> 标签：windows-phone-7, youtube, navigation, back-button

我正在开发 WP7 应用程序。

在此我在 Yotube 应用程序中启动 youtube url。

要从 YouTube 用户返回我的应用程序，必须**单击两次后退按钮**，根据我的研究，这是一个已知问题。

每当他按下返回按钮时，我需要向用户显示一条消息（在 youtube 内），例如“再次按下返回按钮返回”。

我怎样才能做到这一点？

欢迎大家评论！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:17:11.607

如果我理解正确，您想在另一个应用程序中显示一个弹出窗口吗？在你的情况下，一个 Youtube 应用程序？

不幸的是，您无法更改另一个应用程序的行为。您自己的应用程序中的其他应用程序没有任何挂钩。

这是不可能的。

# java - Java - 创建一个将数组作为参数传递的对象

> ID：14147294
> 
> 赞同：0
> 
> 时间：2013-01-03T21:10:10.920
> 
> 标签：java

我想从我的班级创建一个对象。我的类有一个数组属性，如何通过括号传递它？

这是我的课：

```
private String Description;
private int[] Data = {0, 0, 0, 0, 0, 0, 0, 0, 0};
    public Key(String Desc, int[] d)
{
    Description = Desc;
    Data = d;
} 
```

这就是我创建对象的方式：

```
Key k1 = new Key("Shoham's Key", {0, 5 , 6, 4, 3, 2, 7, 1, 9}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T21:11:09.347

```
Key k1 = new Key("Shoham's Key", new int[] {0, 5 , 6, 4, 3, 2, 7, 1, 9}); 
```

注意：`new int[] {0, 5 , 6, 4, 3, 2, 7, 1, 9}`声明称为匿名数组声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:17:32.020

除了**GanGnaMStYleOverFlow**说的

[Java 语言规范 - 10.6。数组初始化器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)说：

*数组初始值设定项可以**在声明**中指定，或者作为数组创建表达式（第 15.10 节）的一部分，创建数组并提供一些初始值*

**因此，当作为参数传递时，您无法初始化数组。**

所以不允许使用底部语句：

```
Key k1 = new Key("Shoham's Key", {0, 5 , 6, 4, 3, 2, 7, 1, 9}); 
```

# wcf - ClientBaseAddress 似乎无法访问

> ID：14147298
> 
> 赞同：0
> 
> 时间：2013-01-03T21:10:46.680
> 
> 标签：wcf, .net-4.5, endpoint, wsdualhttpbinding

我正在使用 wsDualHttpBinding，服务器是自托管的。我遇到了一个问题，在我看来，我的客户端的 ClientBaseAddress 无法访问。我不知道如何解决这个问题。

这是我的服务配置：

```
<system.serviceModel>
<services>
  <service name="GuiEndpoint.GuiService">
    <endpoint address="" 
              binding="wsDualHttpBinding"
              bindingConfiguration="GuiEndpoint" 
              name="dualHttpBinding" 
              contract="Common.IGuiService">
      <!--<identity>
        <dns value="localhost"/>
      </identity>-->
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" name="mex" contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add baseAddress="http://192.168.1.199:8733/Design_Time_Addresses/GuiEndpoint/IGuiService/"/>
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="True"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <wsDualHttpBinding>
    <binding name="GuiEndpoint">
      <security mode="None">
        <message clientCredentialType="None"/>
      </security>
    </binding>
  </wsDualHttpBinding>
</bindings>
<diagnostics>
  <messageLogging logEntireMessage="true"
                  maxMessagesToLog="300"
                  logMessagesAtServiceLevel="true"
                  logMalformedMessages="true"
                  logMessagesAtTransportLevel="true" />
</diagnostics> 
```

在我的客户端上，我以编程方式连接此代码：

```
WSDualHttpBinding binding = new WSDualHttpBinding();

binding.Security.Mode = WSDualHttpSecurityMode.None;
binding.Security.Message.ClientCredentialType = MessageCredentialType.None;
binding.ClientBaseAddress = new Uri("192.168.1.189:8080/TempUri");

EndpointAddress endpoint = new EndpointAddress(Helper.CreateUri(client.Connection.ServerAddress));

context = new InstanceContext(this);

serviceClient = new GuiServiceClient(context, binding, endpoint);
serviceClient.InnerDuplexChannel.Faulted += InnerChannelOnFaulted;

try
{
    if (serviceClient.Subscribe())
    {
        startKeepAliveTimer();
    }
}
catch (EndpointNotFoundException)
{
    this.Error("Couldn't Connect!");
} 
```

现在，使用 Fiddler 我可以看到消息来回传递。

服务器： ![在此处输入图像描述](../Images/2ec8f8b5572ad41b1c39f622777adfce.png)

客户： ![在此处输入图像描述](../Images/5bb30125c67735ad36fcf3089be5c8b1.png)

如您所见，客户端可以与服务器通信，但服务器似乎无法与客户端通信。

我还在客户端上注册了命名空间：

![在此处输入图像描述](../Images/0b0f4b608ee929b70af934528e8a3251.png)

客户端端口也可以访问：

```
Starting Nmap 6.25 ( http://nmap.org ) at 2013-01-03 14:05 Mountain Standard Time

Nmap scan report for 192.168.1.189

Host is up (0.10s latency).

PORT     STATE SERVICE

8080/tcp open  http-proxy

MAC Address: xx:0B:A9:57:xx:xx (Intel Corporate)

Nmap done: 1 IP address (1 host up) scanned in 13.42 seconds 
```

这里的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T01:29:24.877

微软未能在任何文档中添加的是：

您在 ClientBaseAddress 中指定的 IP 地址必须可解析为主机名。换句话说，如果服务器无法通过其 HOST NAME ping 客户端，那么您将永远无法建立连接。

正如您所发现的那样，它只是行不通！

尝试将 192.168.1.189 替换为客户端 PC 的主机名，如下所示：

```
 http://ClientHostName:8080/TempURI 
```

另外作为提示，如果您不想注册任何端口，只需使用地址

```
http://MyClientHostName/Temporary_Listen_Addresses/TempUri 
```

因为您可以注册任何以

```
http://+80/Temporary_Listen_Addresses/ 
```

# entity-framework - 用于 DbGeography 的 JSON.Net JsonConverter

> ID：14147299
> 
> 赞同：10
> 
> 时间：2013-01-03T21:10:52.340
> 
> 标签：entity-framework, asp.net-mvc-4, asp.net-web-api, json.net, spatial

长期与这个斗争...

基本上我有一个具有`DbGeography`属性的模型优先 EF5 对象。我想应用一个`JsonConverter`让它作为简单的纬度/经度值往返。我正在使用 WebAPI。

像这样寻找 JSON 输出和输入：

```
{
    "location":
    {
        "geopoint":
        {
            "latitude":40.770712,
            "longitude":-73.962011
        }
    }
} 
```

这是我的类定义和 JsonConverter：

```
[MetadataType(typeof(QueryLocationMetadata))]
partial class Location
{
}

public class QueryLocationMetadata
{
    [JsonConverter(typeof(DbGeographyConverter))]
    public virtual DbGeography GeoPoint { get; set; }
}

public class DbGeographyConverter : JsonConverter
{
    private const string LATITUDE_KEY = "latitude";
    private const string LONGITUDE_KEY = "longitude";

    public override bool CanConvert(Type objectType)
    {
        return objectType.Equals(typeof(DbGeography));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        if (reader.TokenType == JsonToken.Null)
            return default(DbGeography);

        var jObject = JObject.Load(reader);

        if (!jObject.HasValues || (jObject.Property(LATITUDE_KEY) == null || jObject.Property(LONGITUDE_KEY) == null))
            return default(DbGeography);

        string wkt = string.Format("POINT({1} {0})", jObject[LATITUDE_KEY], jObject[LONGITUDE_KEY]);
        return DbGeography.FromText(wkt, DbGeography.DefaultCoordinateSystemId);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var dbGeography = value as DbGeography;

        serializer.Serialize(writer, dbGeography == null || dbGeography.IsEmpty ? null : new { latitude = dbGeography.Latitude.Value, longitude = dbGeography.Longitude.Value });
    }
} 
```

因此，使用它我能够成功地序列化甚至正确反序列化对象，但在我`ApiController`采取行动之前，我收到以下错误：

```
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at System.Data.SqlTypes.SqlDouble.get_Value()
   at GetValueFromSqlDouble(Object )
   at System.Web.Http.Metadata.Providers.AssociatedMetadataProvider`1.<>c__DisplayClass3.<GetMetadataForPropertiesImpl>b__0()
   at System.Web.Http.Metadata.ModelMetadata.get_Model()
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateProperties(ModelMetadata metadata, ValidationContext validationContext)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateProperties(ModelMetadata metadata, ValidationContext validationContext)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateProperties(ModelMetadata metadata, ValidationContext validationContext)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateProperties(ModelMetadata metadata, ValidationContext validationContext)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateElements(IEnumerable model, ValidationContext validationContext)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateProperties(ModelMetadata metadata, ValidationContext validationContext)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateElements(IEnumerable model, ValidationContext validationContext)
   at System.Web.Http.Validation.DefaultBodyModelValidator.ValidateNodeAndChildren(ModelMetadata metadata, ValidationContext validationContext, Object container)
   at System.Web.Http.Validation.DefaultBodyModelValidator.Validate(Object model, Type type, ModelMetadataProvider metadataProvider, HttpActionContext actionContext, String keyPrefix)
   at System.Web.Http.ModelBinding.FormatterParameterBinding.<>c__DisplayClass1.<ExecuteBindingAsync>b__0(Object model)
   at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass36`1.<>c__DisplayClass38.<Then>b__35()
   at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass49.<ToAsyncVoidTask>b__48()
   at System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken) 
```

在玩弄和谷歌搜索各种东西之后，我完全不知所措。我知道一般来说它正在尝试验证属性但是 SqlDouble？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-14T14:35:49.213

`JsonConverter`Youssef 提到的错误已得到修复，但我在创建自定义for时仍然遇到问题，`DbGeography`因为在验证过程中的某个地方`DefaultBodyModelValidator`陷入了循环。我的解决方案不是完全禁用模型验证，而是将默认验证器替换为`DbGeography`从深度验证中排除该类型的派生验证器。

为了不重复自己，[您可以在此处查看完整的解决方案。](https://stackoverflow.com/questions/19941808/exclude-a-type-from-model-validation/19964146#19964146)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T21:46:32.717

问题不在于您的转换器。这是一个已知的验证错误，当公共属性的 getter 抛出对象图中时会发生这种错误。此工作项跟踪问题：

[http://aspnetwebstack.codeplex.com/workitem/740](http://aspnetwebstack.codeplex.com/workitem/740)

同时，您应该能够通过禁用验证来绕过它：

```
config.Services.Clear(typeof(ModelValidatorProvider)); 
```

带来不便敬请谅解。

# sql - 在 Rails 数据库查询上应用两个单独的过滤器

> ID：14147301
> 
> 赞同：0
> 
> 时间：2013-01-03T21:11:03.810
> 
> 标签：sql, ruby-on-rails, ruby

我正在尝试将两个过滤器应用于 Rails 3 中的数据库查询。第一个过滤器仅显示图像类型的媒体。第二个过滤器显示了最受好评的故事。过滤器本身可以正常工作，但是当我尝试组合两个过滤器时，出现错误。

涉及3张桌子。故事、回忆和致敬。敬礼表记录某人“敬礼”记忆的次数。每个故事都由多个记忆组成。一个故事的总敬礼是那个故事的记忆敬礼的总和。我想按敬礼从高到低的顺序检索仅图像故事的记录。

**模型/story.rb**

```
def self.where_contains_image()
  joins(
    'INNER JOIN memories AS wci_memories ON wci_memories.story_id = stories.id'
  )
  .where(
    'wci_memories.media_type_cd = ?', Memory.image
  ).uniq
end 
```

**控制器/story_controller.rb**

```
if params[:filter_content] == 'image'
  stories = stories.where_contains_image
end

if (params[:filter_trends] == 'most_saluted')
  stories = stories.order("(SELECT COUNT(1) FROM salutes
    LEFT JOIN memories AS ms_memories ON salutes.content_id = ms_memories.id
    LEFT JOIN stories AS ms_stories ON ms_stories.id = ms_memories.story_id
    WHERE ms_stories.id = stories.id AND salutes.content_type = 'Memory')
    DESC");
end 
```

就其本身而言，当设置了 'most_saluted' 参数时，查询会按预期工作。当设置了“most_saluted”参数和“image”参数时，我得到一个错误：

```
for SELECT DISTINCT, ORDER BY expressions must appear in select list 
```

我明白错误是什么，但我不知道如何重写查询，以便它只能返回按最敬礼的顺序排列的图像。

当我在数据库上运行这个 SQL 查询时，它会返回我正在寻找的记录。但我无法弄清楚如何让 rails 返回相同的记录。此外，此查询结合了两个过滤器（仅图像和最高敬礼）。我想将它们分开，以便我可以单独应用一个过滤器，或同时应用两者。

```
SELECT DISTINCT stories.*, (SELECT COUNT(1) FROM salutes
    LEFT JOIN memories AS ms_memories ON salutes.content_id = ms_memories.id
    LEFT JOIN stories AS ms_stories ON ms_stories.id = ms_memories.story_id
    WHERE ms_stories.id = stories.id AND salutes.content_type = 'Memory') 
AS total_salutes FROM stories INNER JOIN memories AS wci_memories 
ON wci_memories.story_id = stories.id WHERE wci_memories.media_type_cd = 0
ORDER BY total_salutes DESC 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:00:30.163

您可以使用范围来实现这一点，实际上 Activerecord 范围是链接条件的更清洁/模块化的方式

[在此处阅读有关范围的信息](http://guides.rubyonrails.org/active_record_querying.html#scopes)

高温高压

# c++ - 如何检测我的应用程序在 Qt 中失去焦点？

> ID：14147304
> 
> 赞同：9
> 
> 时间：2013-01-03T21:11:15.650
> 
> 标签：c++, qt, qt4, qt5, qevent

当鼠标光标位于某个小部件上时，我会显示一个弹出窗口，并且我想在鼠标离开小部件时隐藏此弹出窗口。

为此，我重新实现了`leaveEvent()`. 这似乎在所有情况下都有效，除非通过`Alt+Tab`. 我发现我可能需要捕捉另一个事件，但不知何故我找不到合适的。你能推荐一个吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T21:15:51.460

您要查找的事件是`QEvent::ApplicationDeactivate`：“应用程序已暂停，用户无法使用”。

您可以在您的实例上安装事件过滤器`QApplication`来捕获此事件。[`QObject::installEventFilter(QObject*)`](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)有关其工作原理的更多详细信息，请参阅文档。

自 Qt 5.2 起，该`QEvent::ApplicationDeactivate`事件已被弃用。在 Qt 5.2（或更高版本）中识别应用程序何时停用的正确方法是使用[`QGuiApplication::applicationStateChanged(Qt::ApplicationState state)`](http://doc.qt.io/qt-5/qguiapplication.html#applicationStateChanged)信号。

# spring - spring-data-neo4j 的 Maven 问题

> ID：14147305
> 
> 赞同：0
> 
> 时间：2013-01-03T21:11:21.267
> 
> 标签：spring, maven, neo4j, spring-data-neo4j

spring-data-neo4j 工件在获取资源时会导致对 tinkerpop 域的访问被拒绝警告。

我的 pom.xml 文件具有以下相关依赖项：

```
 <dependency>
                    <groupId>org.neo4j</groupId>
                    <artifactId>neo4j-cypher</artifactId>
                    <version>1.6.2</version>
            </dependency>

            <dependency>
                    <groupId>org.springframework.data</groupId>
                    <artifactId>spring-data-neo4j</artifactId>
                    <version>2.0.2.RELEASE</version>
            </dependency> 
```

运行 maven 时，我收到以下错误（仅提供前几行）：

```
Downloading: http://maven.springframework.org/milestone/org/springframework/data/spring-data-neo4j/2.0.2.RELEASE/spring-data-neo4j-2.0.2.RELEASE.pom
Downloading: http://go-build.local/nexus/content/groups/public/org/springframework/data/spring-data-neo4j/2.0.2.RELEASE/spring-data-neo4j-2.0.2.RELEASE.pom
Downloaded: http://go-build.local/nexus/content/groups/public/org/springframework/data/spring-data-neo4j/2.0.2.RELEASE/spring-data-neo4j-2.0.2.RELEASE.pom (8 KB at 17.5 KB/sec)
Downloading: http://maven.springframework.org/milestone/org/springframework/data/spring-data-neo4j-parent/2.0.2.RELEASE/spring-data-neo4j-parent-2.0.2.RELEASE.pom
Downloading: http://go-build.local/nexus/content/groups/public/org/springframework/data/spring-data-neo4j-parent/2.0.2.RELEASE/spring-data-neo4j-parent-2.0.2.RELEASE.pom
Downloaded: http://go-build.local/nexus/content/groups/public/org/springframework/data/spring-data-neo4j-parent/2.0.2.RELEASE/spring-data-neo4j-parent-2.0.2.RELEASE.pom (27 KB at 42.2 KB/sec)
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-beans/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-beans/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-beans/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-beans:3.0.8.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-parent/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-parent:3.0.8.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-parent/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-core/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-core:3.0.8.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-core/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-asm/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-asm:3.0.8.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-asm/3.0.8.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-beans:3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-parent/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-parent:3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-parent/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-core/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-core:3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-core/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-asm/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-asm:3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-asm/3.1.0-SPR7420.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-beans:3.1.0.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-parent/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-parent:3.1.0.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-parent/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-core/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-core:3.1.0.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-core/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-asm/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-asm:3.1.0.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-asm/3.1.0.BUILD-SNAPSHOT/maven-metadata.xml
Downloading: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.1.1.BUILD-SNAPSHOT/maven-metadata.xml
[WARNING] Could not transfer metadata org.springframework:spring-beans:3.1.1.BUILD-SNAPSHOT/maven-metadata.xml from/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/spring-beans/3.1.1.BUILD-SNAPSHOT/maven-metadata.xml 
```

等等等等

我尝试了几件事，但运气不佳，例如：

*   将 spring-data-neo4j pom 中列出的 3 个 tinkerpop 项目的排除项添加到依赖项
*   添加请求的 spring 库的依赖项（例如 spring-beans、spring-tx 等）
*   为 springframework.org 添加存储库

在我的任何 pom 文件或 maven 设置中都没有引用任何 repo（包括 tinkerpop），除非我尝试直接包含对 neo4j 或 springsource 的 repos 的引用以尝试调试此问题。

下面是 pom.xml 和 settings.xml 文件的精简版本，它们仍然表现出相同的行为：

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.test</groupId>
    <artifactId>example</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <properties>
            <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
           <dependency>
                    <groupId>org.springframework.data</groupId>
                    <artifactId>spring-data-neo4j</artifactId>
                    <version>2.0.2.RELEASE</version>
            </dependency>
    </dependencies>

</project> 
```

**设置.xml**

```
<settings>
   <localRepository>/Users/ian/.m2/repository</localRepository>
</settings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:29:24.120

只需为所有存储库添加镜像，这将避免到达 lib pom 中指向的存储库。

```
<mirror>
  <id>all</id>
  <name>all</name>
  <url>http://repo.maven.apache.org/maven2</url>
  <mirrorOf>*</mirrorOf>
</mirror> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:49:28.930

你为什么要尝试访问一个不寻常的 maven 存储库而不是[maven central](http://repo.maven.apache.org/maven2/)，因为[sping 和 neo4 的工件在 maven Central 中可用](http://search.maven.org/#search%7Cga%7C1%7Cspring-data-neo4j)。此外，导致问题的问题当然是：

```
..rom/to tinkerpop-repository (http://tinkerpop.com/maven2): Access denied to: http://tinkerpop.com/maven2/org/springframework/s... 
```

# perl - Perl 过去日期如何？

> ID：14147306
> 
> 赞同：3
> 
> 时间：2013-01-03T21:11:22.837
> 
> 标签：perl, date, posix, localtime

我有一个 perl 脚本，它正在获取当前时间，但我也希望获取当前时间前 45 天的日期。这是我所拥有的：

*已经尝试使用 date::calc DHMS，这就是为什么第二个按原样格式化但它不断返回错误的原因

```
# get the current time stamp
use POSIX qw( strftime );
my $current_time = strftime("%Y-%m-%d %H:%M:%S", localtime);

print "\n$current_time\n";

# get the date 45 days ago
my $time = strftime("%Y, %m, %d, %H, %M, %S", localtime);

print "\n$time\n\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:15:49.820

你试过[DateTime](http://search.cpan.org/~drolsky/DateTime/lib/DateTime.pm)吗？

```
my $now = DateTime->now( time_zone => 'local' );
my $a_while_ago = DateTime->now( time_zone => 'local' )->subtract( days => 45 );
print $a_while_ago->strftime("%Y, %m, %d, %H, %M, %S\n"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T23:35:45.097

最好使用 DateTime、DateManip 或 Date::Calc，但您也可以：

```
use POSIX 'strftime', 'mktime';

my ($second,$minute,$hour,$day,$month,$year) = localtime();
my $time_45_days_ago = mktime($second,$minute,$hour,$day-45,$month,$year);
print strftime("%Y-%m-%d %H:%M:%S", localtime $time_45_days_ago), "\n"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T21:17:15.530

```
use DateTime;

my $now = DateTime->now( time_zone=>'local' );
my $then = $now->subtract( days => 45 );
print $then->strftime("%Y, %m, %d, %H, %M, %S"); 
```

设置time_zone，这里很重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T21:16:42.427

这是一个简单的解决方案，使用[`DateTime`](https://metacpan.org/module/DateTime)：

```
use strict;
use warnings;
use DateTime;

my $forty_five_days_ago = DateTime->now(time_zone=>"local")->subtract(days => 45);

my $output = $forty_five_days_ago->ymd(", ");

$output .= ", " . $forty_five_days_ago->hms(", ");

print "$output\n"; 
```

# c# - 替换 CSV 文件中的特殊字符

> ID：14147312
> 
> 赞同：2
> 
> 时间：2013-01-03T21:12:02.400
> 
> 标签：c#, ssis

在阅读[了这篇](https://stackoverflow.com/questions/2785805/hyphen-vs-dash-replace-dash-with-hyphen)StackOverflow 文章后，我意识到我的 CSV 文件遇到了同样的问题，即有人将破折号/连字符 (-) 字符从 Word 复制并粘贴到 Excel 中。

我正在使用从 Excel 电子表格中读取的数据创建自己的 CSV 文件，并且我注意到奇怪的字符，例如出现在 Excel 中，而在记事本中查看时没有出现。当我使用 SSIS 将 CSV 文件传输到 SQL Server 表时，奇怪的 â€ 也持续存在。在检查了每个 ASC 值之后，我决定将 ASC 150（破折号）替换为 ASC 45（连字符）字符，这纠正了问题，并且在 Excel 中查看时连字符也正常。

这让我质疑可能还需要替换哪些其他字符，以及是否可以使用通用例程来保护我的 CSV 文件不会出现类似问题。

这就是我目前对要写入 CSV 文件的每个值所做的事情。请注意，我的 getCharacterString 函数在返回与 ASCII 值关联的 ASC 字符方面类似于 VB 的 CHR 函数。

```
 /// <summary>
    /// Locates occurrences of targeted special characters found in the input string and replaces each with a space.
    /// </summary>
    /// <param name="inputString">The input string.</param>
    /// <returns>The updated inputString.</returns>
    private string ReplaceSpecialCharacters(string inputString)
    {
        StringBuilder stringBuilder = new StringBuilder(inputString);

        const string doubleQuoteCharacter = "\"";

        stringBuilder.Replace("\r\n", " "); // Carriage Return/Line Feed characters replaced with single space
        stringBuilder.Replace("\r", " "); // Carriage Return replaced with one space if only \r is found
        stringBuilder.Replace("\n", " "); // Likewise, Line Feed with a single space           
        stringBuilder.Replace(this.columnSeparator, " "); // Tab            
        stringBuilder.Replace(Character.GetCharacterString(150), Character.GetCharacterString(45)); // Replace Dash with Hypen
        stringBuilder.Replace(Character.GetCharacterString(147), doubleQuoteCharacter); // Replace angled left quote, “, with simple double quote, ".
        stringBuilder.Replace(Character.GetCharacterString(148), doubleQuoteCharacter); // Replace angled left quote, “, with simple double quote, ".

        return stringBuilder.ToString();
    } 
```

以下是我找到的转换函数：

```
// -----------------------------------------------------------------------
// <copyright file="Character.cs" company="Joes bar and grill">
// TODO: Update copyright text.
// </copyright>
// -----------------------------------------------------------------------

namespace JoesBarAndGrill.FinanceIT.HhsSweeper
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    /// <summary>
    /// TODO: Update summary.
    /// </summary>
    public static class Character
    {
        /// <summary>
        /// See http://bytes.com/topic/c-sharp/answers/273734-c-chr-asc-function-equivalents-undocumented-truth.
        /// </summary>
        /// <param name="asciiValue"></param>
        /// <returns></returns>
        public static string GetCharacterString(int asciiValue)
        {
            if ((asciiValue < 0) || (asciiValue > 255))
            {
                throw new ArgumentOutOfRangeException("asciiValue", asciiValue, "Must be between 0 and 255.");
            }
            byte[] bytBuffer = new byte[] { (byte)asciiValue };
            return Encoding.GetEncoding(1252).GetString(bytBuffer);
        }

        public static int GetAsciiValue(string character)
        {
            if (character.Length != 1)
            {
                throw new ArgumentOutOfRangeException("character", character, "Must be a single character.");
            }
            char[] chrBuffer = { Convert.ToChar(character) };
            byte[] bytBuffer = Encoding.GetEncoding(1252).GetBytes(chrBuffer);
            return (int)bytBuffer[0];
        }
    }
} 
```

同样，我的问题是：

我必须做些什么才能提出一种通用方法来识别可能最终出现此类转换问题的所有字符？我想我可能只识别了常见的。我也有兴趣让人们帮助我想出一个更完整的目标字符列表来替换和建议的替换字符。

我不确定这是否相关，但如果有人建议我在 CSV 文件中使用文本分隔符，我没有使用文本限定符，因为我确信 SSIS 2008 不能正确处理它们（请参阅[之前的问题我的](https://stackoverflow.com/questions/13239530/using-excel-to-create-a-csv-file-with-special-characters-and-then-importing-it-i)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T02:51:43.297

删除所有脚本代码。编辑平面文件的 Connection 对象。将代码页更改为 65001 (UTF-8)。

# php - 如何在 Yii 中输入 CWebUser 对象

> ID：14147318
> 
> 赞同：0
> 
> 时间：2013-01-03T21:12:28.137
> 
> 标签：php, yii

我希望能够拥有`Guest`和`User`类都扩展`CWebUser`. 某处的应用程序是否可以根据用户是否登录来确定要加载的类？

我的目标是`Yii::app()->user->getMyStuff()`根据用户是访客还是登录用户来做不同的事情。我看不到任何明显的方法来实现这一点。

我总能做到...

```
function getMyStuff() {
   if ($this->isGuest){
       .....
   } else {
       .....
   }
} 
```

但我不想用所有这些重载一个类......

# hibernate - 使用 Oracle 11g 和 Hibernate 3 得到错误 0972 标识符太长

> ID：14147320
> 
> 赞同：2
> 
> 时间：2013-01-03T21:12:39.437
> 
> 标签：hibernate, oracle11g

我的 log4j 中有 Hibernate 的调试输出，这是堆栈跟踪

```
127946 DEBUG org.hibernate.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
127962 DEBUG org.hibernate.hql.internal.ast.QueryTranslatorImpl - HQL: select distinct u from edu.harvard.fas.aurora.datagrid.domain.UserPreferenceDatagrid u where u.userId = :userId and u.d
atagridName = :datagridName
127962 DEBUG org.hibernate.hql.internal.ast.QueryTranslatorImpl - SQL: select distinct userprefer0_.ID as ID26_, userprefer0_.CREATED_BY as CREATED2_26_, userprefer0_.CREATED_DATE as CREATED
3_26_, userprefer0_.UPDATED_BY as UPDATED4_26_, userprefer0_.UPDATED_DATE as UPDATED5_26_, userprefer0_.DATAGRID_NAME as DATAGRID6_26_, userprefer0_.USER_ID as USER7_26_ from AURORA_DATA.USE
R_PREFERENCE_DATAGRID userprefer0_ where userprefer0_.USER_ID=? and userprefer0_.DATAGRID_NAME=?
127962 DEBUG org.hibernate.hql.internal.ast.ErrorCounter - throwQueryException() : no errors
129724 DEBUG org.hibernate.SQL -
    select
        distinct userprefer0_.ID as ID26_,
        userprefer0_.CREATED_BY as CREATED2_26_,
        userprefer0_.CREATED_DATE as CREATED3_26_,
        userprefer0_.UPDATED_BY as UPDATED4_26_,
        userprefer0_.UPDATED_DATE as UPDATED5_26_,
        userprefer0_.DATAGRID_NAME as DATAGRID6_26_,
        userprefer0_.USER_ID as USER7_26_
    from
        AURORA_DATA.USER_PREFERENCE_DATAGRID userprefer0_
    where
        userprefer0_.USER_ID=?
        and userprefer0_.DATAGRID_NAME=?
129724 DEBUG org.hibernate.loader.Loader - Result set row: 0
129740 DEBUG org.hibernate.loader.Loader - Result row: EntityKey[edu.harvard.fas.aurora.datagrid.domain.UserPreferenceDatagrid#3350]
129740 DEBUG org.hibernate.engine.internal.TwoPhaseLoad - Resolving associations for [edu.harvard.fas.aurora.datagrid.domain.UserPreferenceDatagrid#3350]
129740 DEBUG org.hibernate.engine.internal.TwoPhaseLoad - Done materializing entity [edu.harvard.fas.aurora.datagrid.domain.UserPreferenceDatagrid#3350]
129740 DEBUG org.hibernate.engine.internal.StatefulPersistenceContext - Initializing non-lazy collections
129740 DEBUG org.hibernate.loader.Loader - Loading collection: [edu.harvard.fas.aurora.datagrid.domain.UserPreferenceDatagrid.columns#3350]
129755 DEBUG org.hibernate.SQL -
    select
        columns0_.USER_PREFERENCE_DATAGRID_ID as USER1_26_2_,
        columns0_.columns_ID as columns2_2_,
        userprefer1_.ID as ID29_0_,
        userprefer1_.CREATED_BY as CREATED2_29_0_,
        userprefer1_.CREATED_DATE as CREATED3_29_0_,
        userprefer1_.UPDATED_BY as UPDATED4_29_0_,
        userprefer1_.UPDATED_DATE as UPDATED5_29_0_,
        userprefer1_.COLUMN_NAME as COLUMN6_29_0_,
        userprefer1_.SORT_ORDER as SORT7_29_0_,
        userprefer1_.USER_PREFERENCE_DATAGRID_ID as USER8_29_0_,
        userprefer2_.ID as ID26_1_,
        userprefer2_.CREATED_BY as CREATED2_26_1_,
        userprefer2_.CREATED_DATE as CREATED3_26_1_,
        userprefer2_.UPDATED_BY as UPDATED4_26_1_,
        userprefer2_.UPDATED_DATE as UPDATED5_26_1_,
        userprefer2_.DATAGRID_NAME as DATAGRID6_26_1_,
        userprefer2_.USER_ID as USER7_26_1_
    from
        AURORA_DATA.USER_PREFERENCE_DATAGRID_USER_PREFERENCE_DATAGRID_COL columns0_
    inner join
        AURORA_DATA.USER_PREFERENCE_DATAGRID_COL userprefer1_
            on columns0_.columns_ID=userprefer1_.ID
    left outer join
        AURORA_DATA.USER_PREFERENCE_DATAGRID userprefer2_
            on userprefer1_.USER_PREFERENCE_DATAGRID_ID=userprefer2_.ID
    where
        columns0_.USER_PREFERENCE_DATAGRID_ID=?
129771 DEBUG org.hibernate.engine.jdbc.spi.SqlExceptionHelper - ORA-00972: identifier is too long
 [n/a]
java.sql.SQLSyntaxErrorException: ORA-00972: identifier is too long

        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)
        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)
        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
        at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:884)
        at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1167)
        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1289)
        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)
        at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3628)
        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1493)
        at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
        at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
        at sun.reflect.GeneratedMethodAccessor45.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
        at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
        at $Proxy50.executeQuery(Unknown Source)
        at org.hibernate.loader.Loader.getResultSet(Loader.java:1962)
        at org.hibernate.loader.Loader.doQuery(Loader.java:829)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
        at org.hibernate.loader.Loader.loadCollection(Loader.java:2159)
        at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:61)
        at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:622)
        at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:82)
        at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1718)
        at org.hibernate.collection.internal.AbstractPersistentCollection.forceInitialization(AbstractPersistentCollection.java:489)
        at org.hibernate.engine.internal.StatefulPersistenceContext.initializeNonLazyCollections(StatefulPersistenceContext.java:930)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:294)
        at org.hibernate.loader.Loader.doList(Loader.java:2447)
        at org.hibernate.loader.Loader.doList(Loader.java:2433)
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2263)
        at org.hibernate.loader.Loader.list(Loader.java:2258)
        at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
        at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
        at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:196)
        at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1161)
        at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
        at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:252)
        at edu.harvard.fas.aurora.userpreferencedatagrid.dao.UserPreferenceDatagridDAOJpaImpl.storeUserPreferenceDataGrid(UserPreferenceDatagridDAOJpaImpl.java:37)
        at edu.harvard.fas.aurora.userpreferencedatagrid.service.UserPreferenceDatagridServiceImpl.storeUserPreferenceDatagrid(UserPreferenceDatagridServiceImpl.java:25)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy34.storeUserPreferenceDatagrid(Unknown Source)
        at edu.harvard.fas.aurora.arrangedlist.controller.ArrangedListController.saveArngDlgData(ArrangedListController.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:306)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:323)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1719)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
129787 WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 972, SQLState: 42000
129787 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - ORA-00972: identifier is too long 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:42:20.470

我可以在您的错误中看到：

```
from
        AURORA_DATA.USER_PREFERENCE_DATAGRID_USER_PREFERENCE_DATAGRID_COL 
```

该表名超过 30 个字符（在 oracle 上，表 + 列不能超过 30 个字符）

```
SQL> select * from
  2   AURORA_DATA.USER_PREFERENCE_DATAGRID_USER_PREFERENCE_DATAGRID_COL
  3  /
        AURORA_DATA.USER_PREFERENCE_DATAGRID_USER_PREFERENCE_DATAGRID_COL
                    *
ERROR at line 2:
ORA-00972: identifier is too long 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T14:50:37.740

该错误具有误导性，或者我还没有找到完全识别问题的方法。好吧，当我在父表上放置 @JoinColumn 时它就消失了，孩子有一个 @JoinColumn 但父母没有。

# ruby-on-rails-3 - 除了查看迁移文件之外，rake db:migrate 还能做什么？

> ID：14147321
> 
> 赞同：0
> 
> 时间：2013-01-03T21:12:44.693
> 
> 标签：ruby-on-rails-3, rake

我正在尝试调试我在迁移数据库时遇到的问题。

我让我的应用程序运行没有问题，并将其推送到 heroku，然后运行`rake db:migrate`并收到错误

```
PG::Error: 错误：关系“地点”不存在
第 4 行：在哪里 a.attrelid = '"places"'::regclass
^
: 选择 a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
FROM pg_attribute a LEFT JOIN pg_attrdef d
在 a.attrelid = d.adrelid 和 a.attnum = d.adnum
WHERE a.attrelid = '"places"'::regclass
AND a.attnum > 0 AND NOT a.attisdropped
由 a.attnum 订购

```

我发现迁移在本地很好，但在服务器上迁移时却不行，这很奇怪。我发现其他一些人也有类似的问题，但从未发现有人有解决方案。我在 StackOverflow 上找到的答案没有被接受。在尝试了几个小时不同的事情之后，我想我会尝试从头开始创建一个新的 heroku 应用程序并将我的应用程序推送到它（对其他人有用），基本上是重新开始。

当我这样做时，我得到了同样的错误，但现在在`wineries`.

奇怪的是，在 Heroku 的推荐下，我尝试在本地创建一个新的数据库，并运行我的迁移。

现在在本地，我得到了同样的错误，但是在 table 上`admin_users`。

我很确定实际的迁移文件没有任何问题，因为每次运行迁移时，我都会得到一个不同的表，因此在某些方面会影响到不同的迁移。

我试过删除一些宝石，但仍然出现同样的错误。

rake:db 是否在迁移文件以外的任何文件之外查找？这可能是关系问题吗？

关于如何解决这个问题的任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:35:37.110

您是否在迁移中访问/使用任何模型来进行任何数据更新？您是否在配置/初始化程序中使用任何模型？rake db:migrate 加载 Rails 环境，因此如果您尝试访问尚不存在的模型，它将吐出此错误...

# excel - 使用excel计算csv中的唯一实例

> ID：14147322
> 
> 赞同：-1
> 
> 时间：2013-01-03T21:12:44.880
> 
> 标签：excel, vba, count, unique

在 Excel 中，我需要获取依赖于另一个变量的变量的唯一出现次数。

例如：如果根据正在拨打或接听的电话跟踪唯一的蜂窝基站。显示起始蜂窝站点和终止蜂窝站点的列是静态的，但是调用的方向（每行的另一个单独变量）从用户的角度决定了哪一个是相关的。

1.  当呼叫由用户发起时，我需要始发单元，而当用户接收呼叫时，我需要终止单元。
2.  我还需要从该产量中计算独特细胞的数量。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:34:55.877

你看过公式/公式审计吗？这显示了先例和依赖。

# windows - *nix head 和 tail 命令的 Windows/DOS 等效项是什么？

> ID：14147324
> 
> 赞同：1
> 
> 时间：2013-01-03T21:13:04.103
> 
> 标签：windows, windows-7, dos, command-prompt

> **可能重复：**
> [寻找与 unix tail 命令](https://stackoverflow.com/questions/187587/looking-for-a-windows-equivalent-of-the-unix-tail-command)
> [等效的 Windows 等效于“tail”命令的 Windows](https://stackoverflow.com/q/1295068)

我需要存储一个巨大（数千兆字节）XML 文件的前 100 行和最后 100 行。在 *nix 上，我会这样做：

```
head -n 100 foo.xml > foo.txt
tail -n 100 foo.xml >> foo.txt 
```

如何从 Windows/DOS 命令提示符执行相同操作？

注意：我宁愿不必安装任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:17:13.330

一种选择是安装[cygwin](http://www.cygwin.com/)，它带有所有基本的 Unix 命令行工具，例如`head`和`tail`.

# requirejs - 使用 RequireJS 配置文件作为构建文件？

> ID：14147326
> 
> 赞同：9
> 
> 时间：2013-01-03T21:13:23.517
> 
> 标签：requirejs, minify, web-deployment

我在 require-config.js 中配置了一些路径，如下所示：

```
var require = {
    baseUrl: '/javascript',
    paths: {
        'jquery': 'jquery/jquery-1.8.1.min'
        // etc. -- several paths to vendor files here
    },
} 
```

我正在尝试使优化适用于部署。[文档](http://requirejs.org/docs/optimization.html)说我应该有一个看起来像这样的 build.js ：

```
({
    baseUrl: 'javascript',
    paths: {
        'jquery': 'jquery/jquery-1.8.1.min'
    },
    name: 'main',
    out: 'main-build.js'
}) 
```

**有没有办法让优化器读取我的配置文件**而不是（或除了）build.js？如果它们发生变化，我不想手动保持两个文件中配置的路径相同。

我试图运行 `node r.js -o path/to/require-config.js`，但它抛出了一个错误，“格式错误：SyntaxError: Unexpected token var”

*编辑*：为澄清起见，我的 require-config.js 文件只是配置，而不是我的主模块。我这样做是为了在单元测试时可以使用相同的配置但加载不同的主模块。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T22:59:02.887

您需要调整配置选项的定义方式。取自RequireJS[文档](http://requirejs.org/docs/optimization.html)：

> 在优化器的 1.0.5+ 版本中，mainConfigFile 选项可用于指定运行时配置的位置。如果使用主 JS 文件的路径指定，则在该文件中**找到的第一个 requirejs({})、requirejs.config({})、require({}) 或 require.config({}) 将被解析**并用作传递给优化器的配置选项的一部分：

所以基本上你可以将你的`r.js`构建文件指向你的配置选项，这些选项也将与浏览器共享。

您将需要使用[mainConfigFile 选项](https://github.com/jrburke/r.js/blob/master/build/example.build.js#L35)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T19:51:22.063

供他人参考：

[https://github.com/jrburke/r.js/blob/master/build/example.build.js](https://github.com/jrburke/r.js/blob/master/build/example.build.js)

构建设置（无需在此处重复您的 config.js 库包含）：

```
baseUrl: 'app',
name: 'assets/js/lib/almond', // or require

// Read config and then also build it into the app
mainConfigFile: 'app/config.js',
include: ['config'],

// Needed for almond (and does no harm for require)
wrap: true, 
```

# php - 在使用 php date 函数时，日期被转换为 1969

> ID：14147329
> 
> 赞同：0
> 
> 时间：2013-01-03T21:13:38.653
> 
> 标签：php, php4

为什么我将以下日期转换为 Ymd 格式时会得到 1969。

```
$date1="01/02/2012";
echo date('Y-m-d',$date1); 
```

注意：这是 php4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:18:54.623

您需要将日期字符串转换为时间戳：

```
echo date('Y-m-d', strtotime($date1)); 
```

# java - JVM上的汇编编程？

> ID：14147332
> 
> 赞同：1
> 
> 时间：2013-01-03T21:13:44.613
> 
> 标签：java, scala, assembly, clojure, jvm

我很好奇是否可以以在 C 中使用 NASM 的类似方式进行汇编编程。

经过快速谷歌搜索，看看是否可以在 JVM 上进行汇编语言编程，并惊讶地发现了一些结果。

有没有人尝试过做这样的事情？

我还想知道是否有对 Clojure 或 Scala 的任何支持程序集支持。

[从 Java 调用汇编语言编程](http://today.java.net/pub/a/today/2006/10/19/invoking-assembly-language-from-java.html)

[minijavac](http://code.google.com/p/minjavac/)：不是英文的，但看起来它使用了某种 NASM 支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:37:03.790

用 C 语言编写一个带有内联汇编的 JNI 库。

*理论上，您可以在纯*汇编中编写一个符合 JNI 的库，但何必费心呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:18:57.523

汇编通常在 C 中使用，以便 a）您可以访问 C 不生成的指令或 b）较低级别的性能调整。

由于字节码是为 Java 设计的，

*   它不会生成任何有用的字节码指令
*   JVM 在编译器生成的字节码中寻找常见模式并针对这些模式进行优化。这意味着如果您自己编写字节码，它更有可能优化得更少，即更慢，除非它与编译器生成的相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T12:44:25.977

我想指出另一个解决方案：在运行时从您的 java 程序生成汇编代码。很久以前，有一个名为softwire 的项目，用c++ 编写，正是这样做的。它（ab）使用（方法和运算符）重载来创建某种与 x86 ASM 非常相似的 c++ DSL，并在幕后组装相应的程序集。主要目标是能够动态组装为特定配置定制的组装例程，同时消除几乎所有的分支（如果配置发生更改，该例程将重新编译）。这是一个优秀的库，并且作者过去习惯于实现具有着色支持的软件渲染器（着色器在运行时动态转换为 x86 程序集和组装），因此这不仅仅是一个疯狂的想法。

今天，要遵循这样的路线，您可以创建一个与[DynAsm](http://luajit.org/dynasm.html)的 JNI 绑定（仅此一项可能不是小任务）并在运行时使用它来组装。如果您愿意在 java 上使用 scala，您甚至可以相对轻松地创建一个 DSL ala 软线，它将在后台生成汇编源代码并将其传递给 DynASM。听起来很有趣:-) 没有理由再无聊了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T21:26:44.060

你在寻找像 jasmin 项目这样的东西吗？因为，出于某种原因，minijava 总是让我想起 jasmin 解析器......

# php - 取消设置数组键，并恢复排序

> ID：14147333
> 
> 赞同：0
> 
> 时间：2013-01-03T21:13:51.863
> 
> 标签：php

> **可能重复：**
> [PHP 删除数组的第一个索引并重新索引](https://stackoverflow.com/questions/3003259/php-remove-the-first-index-of-an-array-and-re-index)
> [如何删除数组元素然后重新索引数组？](https://stackoverflow.com/questions/5217721/how-to-remove-array-element-and-then-re-index-array)

```
$arr = array(1, 2, 3);

unset($arr[0]);

print_r($arr);

//Array ( [1] => 2 [2] => 3 ) 
```

调用的函数是什么，因此输出将是：

```
//Array ( [0] => 2 [1] => 3 ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:16:45.610

您想使用以下方法创建一个新数组[`array_values`](http://php.net/array_values)：

```
$arr = array(1, 2, 3);
unset($arr[0]);
$arr = array_values($arr);

print_r($arr);
//Array ( [0] => 2 [1] => 3 ) 
```

# php - 将 PHP 变量从一个动态页面传递到另一个动态页面

> ID：14147335
> 
> 赞同：0
> 
> 时间：2013-01-03T21:13:52.440
> 
> 标签：php, session, variables, session-variables

我正在尝试使用 SESSION 将一些变量从一个 PHP 页面传递到下一个页面。

第一个页面包含此代码，用户单击提交后，它转到第 2 页：

```
<!--SESSIONS TO PASS ON VARIABLES-->
<?php $_SESSION['file'] = $file; ?>
<?php $_SESSION['linecount'] = $linecount; ?>
<?php $_SESSION['priceperpost'] = $priceperpost; ?>
<?php $_SESSION['totalcost'] = $totalcost; ?>
<!--//SESSIONS TO PASS ON VARIABLES--> 
```

这就是我在提交表单后在下一页第 2 页上的内容：

```
<!--VARIABLES FROM PREVIOUS PAGE-->
<?php $file = $_SESSION['file']; ?>
<?php $linecount = $_SESSION['linecount']; ?>
<?php $priceperpost = $_SESSION['priceperpost']; ?>
<?php $totalcost = $_SESSION['totalcost']; ?>
<!--//VARIABLES FROM PREVIOUS PAGE--> 
```

但它没有得到代码，因为我试图在第 2 页上回显变量：

```
 <u>Number of Posts:</u> <?php echo ($linecount); ?><br>
  <br>
  <u>Price Per Post:</u> $<?php echo ($priceperpost); ?> <br>
  <u>Total Cost:</u> $<?php echo ($totalcost); ?><br>
  <br> 
```

请帮助，因为我不知道我做错了什么，任何帮助将不胜感激。

是的，我也调用了 session_start

这是更新的代码：

```
 <?php 
session_start(); 
$_SESSION['file'] = $file;
$_SESSION['linecount'] = $linecount;
$_SESSION['priceperpost'] = $priceperpost;
$_SESSION['totalcost'] = $totalcost; 
?> 
```

在下一页

```
<?php
session_start();
$file = $_SESSION['file'];
$linecount = $_SESSION['linecount'];
$priceperpost = $_SESSION['priceperpost'];
$totalcost = $_SESSION['totalcost']; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:25:51.423

您确定您的变量已设置，即 $totalcost 吗？对您的代码的评论。除非，您正在进出 PHP 和 HTML，否则您不需要在每一行都打开和关闭 PHP。

这可以重写：

```
<!--SESSIONS TO PASS ON VARIABLES-->
<?php $_SESSION['file'] = $file; ?>
<?php $_SESSION['linecount'] = $linecount; ?>
<?php $_SESSION['priceperpost'] = $priceperpost; ?>
<?php $_SESSION['totalcost'] = $totalcost; ?>
<!--//SESSIONS TO PASS ON VARIABLES--> 
```

作为：

```
<?php
// SESSIONS TO PASS ON VARIABLES
session_start();
$_SESSION['file'] = $file;
$_SESSION['linecount'] = $linecount;
$_SESSION['priceperpost'] = $priceperpost;
$_SESSION['totalcost'] = $totalcost; 
// SESSIONS TO PASS ON VARIABLES
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:17:26.107

确保在创建变量之前和回调它们之前开始会话：

```
session_start(); 
```

# c# - 不可变类与结构

> ID：14147340
> 
> 赞同：25
> 
> 时间：2013-01-03T21:14:07.267
> 
> 标签：c#, class, struct, immutability

以下是类与 C# 中的结构不同的唯一方式（如果我错了，请纠正我）：

*   类变量是引用，而 struct 变量是值，因此 struct 的整个值在赋值和参数传递中被复制
*   类变量是存储在堆栈上的指针，指向堆上的内存，而结构变量作为值存储在堆上

假设我有一个不可变结构，即具有一旦初始化就无法修改的字段的结构。每次我将此结构作为参数传递或在分配中使用时，该值将被复制并存储在堆栈中。

然后假设我使这个不可变结构成为一个不可变类。此类的单个实例将被创建一次，并且仅对该类的引用将被复制到赋值和参数传递中。

如果对象是可变的，这两种情况下的行为会有所不同：当一个人改变对象时，在第一种情况下结构的副本将被修改，而在第二种情况下，原始对象将被改变。但是，在这两种情况下，对象都是不可变的，因此对于该对象的用户来说，这实际上是一个类还是一个结构没有区别。

既然复制引用比复制结构便宜，为什么要使用不可变结构呢？

此外，由于[可变结构是邪恶](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)的，看起来根本没有理由使用结构。

我哪里错了？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-03T21:17:56.603

> 既然复制引用比复制结构便宜，为什么要使用不可变结构呢？

这并不总是正确的。在 64 位操作系统上复制引用将是 8 个字节，这可能比许多结构大。

另请注意，创建类可能更昂贵。创建结构通常完全在堆栈上完成（尽管[有很多例外](http://blogs.msdn.com/b/ericlippert/archive/2010/09/30/the-truth-about-value-types.aspx)），这非常快。创建一个类需要创建对象句柄（用于垃圾收集器），在堆栈上创建引用，并跟踪对象的生命周期。这会增加 GC 压力，这也是有实际成本的。

话虽如此，创建一个*大*的不可变结构可能不是一个好主意，这就是为什么[在类和结构之间选择的指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229017%28v=vs.100%29.aspx)建议总是使用一个类，如果你的结构将超过 16 个字节，如果它会被装箱，以及其他使差异变小的问题。

话虽如此，我通常更多地根据所讨论类型的预期用途和含义做出决定。值类型应该用于引用单个值（同样，请参阅指南），并且通常具有与类不同的语义和预期用法。在类或结构之间进行选择时，这通常与性能特征一样重要。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-04T06:13:51.183

里德的回答非常好，但只是补充几点：

> 如果我错了，请纠正我

你在这里基本上是在正确的轨道上。您犯了将*变量*与*值*混淆的常见错误。变量是存储位置；值存储在变量中。而且您正在与“值类型在堆栈上”的普遍说法调情；相反，*变量*要么进行*短期*存储，要么*进行长期*存储，因为*变量是存储位置*。变量是进行短期存储还是长期存储取决于其*已知的生命周期*，而不是其*类型*。

但是所有这些都与您的问题并不特别相关，归结为要求驳斥这种三段论：

*   可变结构是邪恶的。
*   引用复制比结构复制便宜，所以不可变结构总是更糟。
*   因此，结构永远没有任何用处。

我们可以通过多种方式驳斥三段论。

首先，是的，可变结构是邪恶的。但是，它们有时非常有用，因为在某些有限的场景中，您可以获得性能优势。我不推荐这种方法，除非已经用尽了其他合理的途径并且存在真正的性能问题。

其次，引用复制不一定比结构复制便宜。引用通常实现为 4 或 8 字节托管指针（尽管这是一个实现细节；它们可以实现为不透明句柄）。复制一个引用大小的结构既不比复制一个引用大小的引用便宜也不昂贵。

第三，即使引用复制比结构复制便宜，引用也*必须取消引用*才能获取它们的字段。取消引用不是零成本！不仅需要机器周期来取消引用引用，*这样做可能会弄乱处理器缓存*，这会使未来的取消引用变得更加昂贵！

第四，即使引用复制比结构复制便宜，谁在乎呢？如果这不是产生不可接受的性能成本的瓶颈，那么哪个更快是完全无关紧要的。

第五，引用在内存空间中比结构要昂贵得多。

第六，引用增加了费用，因为引用网络必须由垃圾收集器定期跟踪；垃圾收集器可能会完全忽略“blittable”结构。垃圾回收是一笔大开销。

第七，与引用类型不同，不可变值类型不能为空。你知道每一个价值都是一个很好的价值。正如 Reed 指出的那样，为了获得引用类型的良好值，您必须同时*运行分配器和构造器*。那可不便宜。

第八，值类型*代表值*，程序通常是关于值的操作。在一种语言中“烘焙”“价值”和“参考”的隐喻是有意义的，无论哪个“更便宜”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T21:20:50.017

来自[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/ms229017%28v=vs.100%29.aspx)；

> 类是引用类型，结构是值类型。引用类型在堆上分配，内存管理由垃圾收集器处理。值类型在堆栈或内联上分配，并在超出范围时被释放。通常，值类型的分配和解除分配成本更低。但是，如果在需要大量装箱和拆箱的场景中使用它们，则与引用类型相比，它们的性能较差。

**除非类型具有以下所有特征，否则不要定义结构：**

*   它在逻辑上表示单个值，类似于原始类型（整数、双精度等）。

*   它的实例大小小于 16 字节。

*   它是不可变的。

*   它不必经常装箱。

因此，如果您的结构超过 16 个字节，您应该始终使用类而不是结构。另请阅读[http://www.dotnetperls.com/struct](http://www.dotnetperls.com/struct)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T01:01:18.520

结构有两种用例。不透明结构对于可以使用不可变类实现的事物很有用，但足够小，即使在最好的情况下，使用类也不会有太多（如果有的话）好处，特别是如果它们的频率被创建和丢弃是它们被简单复制的频率的很大一部分。例如，`Decimal`是一个 16 字节的结构，因此保存一百万个`Decimal`值将占用 16 兆字节。如果它是一个类，对`Decimal`实例的每个引用将占用 4 或 8 个字节，但每个不同的实例可能会占用另外 20-32 个字节。如果有许多大型数组，其元素是从少数不同的`Decimal`实例，类可能会胜出，但在大多数情况下，更可能有一个数组，其中有一百万个引用指向一百万个不同的实例`Decimal`，这意味着结构会胜出。

以这种方式使用结构通常只有在 MSDN 引用的指南适用的情况下才是好的（尽管不变性指南主要是由于尚无任何方式可以指示它们修改底层结构的结构方法）。如果最后三个准则中的任何一个不适用，那么使用不可变类可能比使用结构更好。但是，如果第一个准则不适用，则意味着不应该使用*不透明*的结构，而不是应该使用类。

在某些情况下，数据类型的目的只是将一组变量用胶带固定在一起，以便它们的值可以作为一个单元传递，但它们在语义上仍然作为不同的变量保留。例如，许多方法可能需要传递代表 3d 坐标的三个浮点数组。如果要画一个三角形，传递三个`Point3d`参数比传递九个浮点数要方便得多。在许多情况下，此类类型的目的不是赋予任何特定于域的行为，而是简单地提供一种方便地传递事物的方法。在这种情况下，如果使用得当，结构可以提供优于类的主要性能优势。应该表示三个类型变量的结构`double`用胶带固定在一起的应该简单地具有三个公共字段类型`double`。这样的结构将允许有效地执行两种常见的操作：

1.  给定一个实例，对其状态进行快照，以便可以在不干扰快照的情况下修改实例
2.  给定一个不再需要的实例，以某种方式想出一个稍微不同的实例

不可变类类型允许第一个以固定成本执行，而不管该类持有的数据量如何，但它们在第二个方面效率低下。变量应该表示的数据量越大，执行第一个操作时不可变类类型相对于结构的优势就越大，执行第二个操作时暴露字段结构的优势就越大。

可变类类型在第二个操作占主导地位的情况下可能很有效，并且很少需要第一个操作，但是对象很难在可变类对象中公开当前值而不将对象本身暴露给外部修改。

请注意，根据使用模式，大型暴露字段结构可能比不透明结构或类类型更有效。大于 17 字节的结构通常比较小的结构效率低，但它们仍然比类更有效。此外，将结构作为`ref`参数传递的成本不取决于其大小。如果通过属性而不是字段访问大型结构，通过不必要的值传递它们等，则大型结构效率低下。但如果小心避免冗余的“复制”操作，则存在类与类没有盈亏平衡点的使用模式。结构——结构只会表现得更好。

有些人可能会对类型具有暴露字段的想法感到恐惧，但我建议我所描述的结构不应被视为其自身的实体，而应被视为所读内容的扩展或写下来。例如：

```
public struct SlopeAndIntercept
{
   public double Slope,Intercept;
}
public SlopeAndIntercept FindLeastSquaresFit() ... 
```

将对一堆点执行最小二乘拟合的代码必须做大量工作才能找到结果线的斜率或 Y 截距；找到两者都不会花费更多。调用该`FindLeastSquaresFit`方法的代码可能希望在一个变量中具有斜率，而在另一个变量中具有截距。如果这样的代码：

```
var resultLine = FindLeastSquaresFit(); 
```

结果将是有效地创建两个变量`resultLine.Slope`，并且`resultLine.Intercept`该方法可以根据需要对其进行操作。的领域`resultLine`不真正属于`SlopeIntercept`，也不属于`FindLeastSquaresFit`；它们属于声明的代码`resultLine`。如果将该方法用作以下情况，情况几乎没有什么不同：

```
double Slope, Intercept;
FindLeastSquaresFit(out Slope, out Intercept); 
```

在这种情况下，很明显，在函数调用之后，这两个变量具有由方法分配的含义，但它们在任何其他时间的含义将取决于方法对它们的其他作用。对于上述结构的字段也是如此。

在某些情况下，使用不可变类而不是透明结构返回数据可能会更好。除此之外，使用类将使返回 a 的函数的未来版本更容易返回`Foo`包含附加信息的内容。另一方面，在许多情况下，代码会期望处理一组特定的离散事物，而改变这组事物将从根本上改变客户必须处理的事情。例如，如果有一堆处理 (x,y) 点的代码，添加“z”坐标将需要重写该代码，并且“点”类型无法缓解这种情况。

# python - 如何返回具有最小值的列的键

> ID：14147343
> 
> 赞同：0
> 
> 时间：2013-01-03T21:14:23.413
> 
> 标签：python

我有这本字典：

```
d= {'1': {         '2': 1,  '3': 0,  '4': 0, '5': 1,  '6': 29 }
   ,'2': {'1': 13,          '3': 1,  '4': 0, '5': 21, '6': 0  }
   ,'3': {'1': 0,  '2': 0,           '4': 1, '5': 0,  '6': 1  }
   ,'4': {'1': 1,  '2': 17, '3': 1,          '5': 2,  '6': 0  }
   ,'5': {'1': 39, '2': 1,  '3': 0,  '4': 0,          '6': 14 }
   ,'6': {'1': 0,  '2': 0,  '3': 43, '4': 1, '5': 0           }
   } 
```

我想编写一个函数，它返回所有值都<2（小于2）的列。

到目前为止，我已经把字典变成了一个列表，然后尝试了很多没有用的东西……我知道答案是第 4 列。

这是我最近的尝试：

```
 def findFirstRead(overlaps):
        e= [[d[str(i)].get(str(j), '-') for j in range(1, 7)] for i in range(1, 7)]
        nested_list = e
        for i in map(itemgetter(x),nested_list):
            if i<2:
                return x+1
            else:
                continue 
```

...这是非常错误的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:16:01.227

以下集合和列表推导列出了该列的最大值为 2 的列：

```
columns = {c for r, row in d.iteritems() for c in row}

[c for c in columns if max(v.get(c, -1) for v in d.itervalues()) < 2] 
```

这返回`['4']`。

# .net - 具有存储过程的数据集与实体框架

> ID：14147344
> 
> 赞同：9
> 
> 时间：2013-01-03T21:14:24.390
> 
> 标签：.net, entity-framework, visual-studio-2012, dataset, strongly-typed-dataset

整个问题已被重写以更清楚..

新项目设计：

1.  数据库服务器 2012
2.  视觉工作室 2012 .Net 4.5
3.  业务逻辑将在存储过程中实现
4.  ASP.Net 网络表单
5.  WCF SOAP XML Web 服务使用 DBA 提供的存储过程与数据库进行通信
6.  实体框架或数据集

在这里我可以使用 Dataset - 没问题，但我想在更详细的解释中了解 Entity Framework 相对于 Dataset 的优势。我一直在阅读有关实体框架的文章，并且由于以下原因，我看到人们在数据集上使用 EF 的体验更好。

**我想知道这些是否仍然是在我的案例中使用 EF 可以获得的优势 - 与数据库相关的操作总是通过存储过程完成：**

1.  EF 更干净，更容易维护和编程。针对 EF ObjectContext 的查询始终针对数据库执行

2.  因为您的对象和数据库之间的映射是通过声明而不是在代码中指定的，所以如果您需要更改数据库模式，您可以最大限度地减少对您必须在应用程序中修改的代码的影响——因此系统提供了一个级别抽象有助于将应用程序与数据库隔离。因此，EF 可以替换您必须自己编写和维护的大量代码。（如果存储过程设计已更改怎么办？）

3.  EF 专门用于将映射查询/塑造结果的过程与构建对象和跟踪更改分开。

4.  数据集很糟糕，尤其是在 WCF 场景中（它们为处理内存中的数据操作增加了很多开销）-> 意味着带有 WCF 的 EF 性能更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T22:38:05.300

**1\. EF 更干净，更容易维护和编程 ->> 你能详细说明一下吗？.. 这是因为下面的 #2 吗？**

EF 是一个对象关系映射器 (ORM)，它将自动生成与您的数据库模式相关的对象，如 #2 中所述。EF 是数据访问层的开箱即用抽象，在当前版本中实现了存储库模式。这为您带来了一些好处，例如 LINQ、对象图 CRUD 操作以及 EF 团队认为通过 .NET 访问数据的最佳实践。

开箱即用的功能和与数据库（特别是 SQL Server）的轻松集成可以提供更容易维护和编程。但是，在某些情况下，使用 ORM 可能不是最佳选择，您应该谨慎判断。以下是一些不使用 ORM 的场景（尤其是当您的团队缺乏当前的 EF 知识时）：有限的数据查询、不复杂的应用程序、舒适的编写或使用数据访问层、您的应用程序截止日期很紧迫等。请参阅我在下面提到的其他选项。

**2\. 如果你需要改变你的数据库模式，你可以尽量减少对你在应用程序中修改的代码的影响->> 如果存储过程的参数和返回字段改变了怎么办？EF还是把影响降到最低？**

是的，EF 根据 EDMX 文件生成，该文件只是数据库模式的 XML 文件。这包括更新映射到您的存储过程的对象（注意：如果在 EF6 发布之前先使用代码，这不适用）。您可以更改存储过程，EF 可以采用更新后的架构并更新您的代码。但是，您将不得不修复调用 EF 存储过程方法并且参数已更改的代码。如果您对 EF 感到不舒服，您也可以使用 LINQ to SQL，它将提供存储过程调用作为对象方法。

**3\. 数据集很糟糕，尤其是在 WCF 场景中（它们为处理内存中的数据操作增加了很多开销）->> 你能解释更多吗？**

“DataSets 很烂”显然是一个通用的说法。您将 DataSet 用于它们的用途，即使用 .NET 处理内存中的数据。由于 DataSet 在内存中，因此在执行简单的 CRUD 操作时它们被认为是低效的。建议使用存储过程和数据读取器（完成读取数据后务必关闭它们），以便使用 SQL 数据库进行高效的数据读取。

**除了 EF，还有其他选择：**

1.  自己动手——编写存储过程、使用数据读取器并映射到 POCO 对象

2.  使用动态库 - Dapper、ServiceStack ORM Lite、Simple POCO、Simple Data、Massive

3.  使用 LINQ to SQL - 轻量级数据访问层（仅适用于 SQL Server）

4.  其他 ORM - NHibernate 是首选。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-07T21:19:49.037

这是为了回应乔纳森关于 DataSet 的回答。因为评论允许内容太短，所以我把它作为答案。

这是旧的，但直到现在，使用 EF6 和 EF dotnet core ，我发现争论这一点仍然有效。

我正在寻找有关此主题的意见并最终到达此帖子。老实说，我完全不同意 Jonathan 关于 DataSet 的看法。

为了回应“由于数据集在内存中，因此在执行简单的 CRUD 操作时它们被认为效率低下”，我相信 EF 的 DbContext 也在内存中，并且离线数据处理不仅适用于 DataSet，还适用于 LinQ2SQL 和 EF。使用 DataTableAdapter 和 CommandBuilder 即可完成简单的 CRUD 操作，无需编写单个 SQL 语句。DataSet是ADO.NET的一部分，不能说ADO.NET推荐存储过程什么的，它必须支持所有访问数据库的方式，实际上DataSet不访问数据库，DataTableAdapter、DataReader、DbCommand可以。

如果你使用 Visual Studio 的 Typed DataSet，你会发现它在存储过程映射和批处理操作上远远优于 EF。我的项目有 5000 个存储过程，映射到 EF 很痛苦，如果 EF 不支持声明，EF 会引发多种错误。另一方面，Typed DataSet 允许控制存储过程映射的非常小的细节，可以根据需要进行调整。关于批处理操作，Table adapters可以让你控制一次可以发送多少条语句，EF呢？1 by 1，想象一下你需要导入 10000 条记录，我对这个场景做了一个比较，没有办法用 EF 方式让它快速。如果更改了存储过程，请给我 30 秒的时间来修复 DataSet，要么重新生成它，要么手动修复它。你会发现它在 EF 中没有更快的速度。

EF 不可能比使用 DataSet 的 ADO.NET 更快。EF 在使用 ADO.NET 更新数据库之前增加了解析 ExpressionTree、评估它、生成 SQL 语句的大量开销，EF 的底层是 ADO.NET。

我发现 DataSet 唯一不方便的是 DataRow 不是 POCO。很难序列化它们，当你必须将它映射到 DataContract 时，它会被 WCF 吸收，你可以直接使用 EF 的 POCO 作为数据契约。

对于需要处理大量数据、批量更新、存储过程的项目，远离 EF。我对 EF 进行了太多尝试来处理企业项目，但最终我不得不对它们都使用 Typed DataSet。我仍在寻找意见，因为我仍然希望 EF 能够满足我的需求。我确实喜欢 EF 方法的简单性，但与 Typed DataSet 相比它还太年轻。

# javascript - Google Map API 请求新密钥

> ID：14147346
> 
> 赞同：2
> 
> 时间：2013-01-03T21:14:27.477
> 
> 标签：javascript, google-maps, google-maps-api-2

我将 google maps API v2 添加到我目前正在开发的网站中。我的地图没有任何问题，但其他用户收到一条错误消息，要求为此 API 提供新密钥。我已经尝试生成一个新密钥，但用户仍然收到此错误。我确保允许任何推荐人确保它不会引起任何问题。
除了 API 密钥之外，还有其他东西可能导致此错误吗？*在这一点上，我很确定钥匙应该可以工作，因为我没有问题*。
是否有可能需要在用户端删除缓存来纠正这个问题？

谢谢你。

# php - 迭代 PDO 查询的结果

> ID：14147348
> 
> 赞同：4
> 
> 时间：2013-01-03T21:14:50.913
> 
> 标签：php, mysql, pdo

我想根据 URL 参数中的数据使用 PDO 运行查询（是的，我知道这很容易受到攻击，但它是实用程序的内部代码）。

```
$user = 'USER';
$pass = 'PASSWORD';
$dsn = 'mysql:dbname=PRODUCTS;host=HOST'; 

try {
    $productDB = new PDO($dsn, $user, $pass); 
    $productDB->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
catch(PDOException $e) {
    $msg = 'PDO ERROR' . $e->getFile() . ' L.' . $e->getLine() . ' : ' . $e->getMessage();
    die($msg);
}
if(isset($_GET['cat'])) 
{
    $cat = $_GET['cat'];
    print "cat = $cat <br>";
    $products = $productDB->prepare('SELECT * FROM products WHERE cat_id LIKE ?');
    $products->execute(array($cat));
    $rows = $products->rowCount();
    print "$rows rows returned";
?>
<table border="1">
<tr>
    <td>product_id</td>
    <td>product_name</td>
</tr>
<?php
foreach ($products->fetchAll() as $row) {
    $id = $row['product_id'];
    $product_name = $row['product_name'];
    print "<tr>";
    print "<th scope=\"row\"><b>$id</b></th>";
    print "<td> $product_name </td>";
    print "<tr>";
    }
print "</table>";
}
?> 
```

当我运行此代码时，它会根据查询打印正确的行数，但不会填充表。

我还尝试将`prepare`and`execute`行替换为：

```
$products = $productDB->query("SELECT * FROM products WHERE cat_id LIKE $cat"); 
```

它返回正确的行数，但没有其他帮助。

最后，我尝试将 foreach 行替换为：

```
$rows = $products->fetchAll();
foreach ($rows as $row) { 
```

我尝试对固定查询执行相同操作都可以正常工作，但是我无法弄清楚如何在查询中放置变量元素，然后遍历结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:18:50.207

您没有做任何事情来存储结果：

```
$products->execute(array($cat)); 
```

需要进入一个变量：

```
$result = $products->execute(array($cat)); 
```

然后，而不是调用`$products->fetchAll()`，使用`$results->fetchAll()`：

```
foreach ($result->fetchAll() as $row) 
```

`$query`我发现使用变量（for`prepare`等）更容易，然后将结果转换为`$result`or之类的东西`$product`。使代码更易于阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:18:29.247

试试这个（如果我理解正确的话）：

```
$products = $productDB->prepare("SELECT * FROM products WHERE cat_id LIKE :cat");

// Now, you can either do this :
$products->bindParam('cat', '%'.$cat.'%');
$products->execute();

// or you can call execute with an associative array of your parameterized query.
$products->execute(array('cat' => '%'.$cat.'%'));

// Then, get all the results like this :
$rows = $products->fetchAll();
foreach ($rows as $row) {
    // Do work here ..
}

// Or, like this :
while ($row = $products->fetch(PDO::FETCH_ASSOC)) {
    // Do work here ..
} 
```

我个人更喜欢 while，因为您不会在一个 var 中获取整个查询，从而减少了所需的内存量。

我还建议您使用[FETCH_*](http://php.net/manual/fr/pdostatement.fetch.php)参数，仅获取您想要的数组类型。

顺便说一句，您需要知道[rowCount](http://php.net/pdostatement.rowCount)不应该用于计算 SELECT 返回的行数。正如 php.net 所说：

> 如果关联 PDOStatement 执行的最后一条 SQL 语句是 SELECT 语句，则某些数据库可能会返回该语句返回的行数。但是，不能保证所有数据库都具有此行为，并且不应依赖于可移植应用程序。

# sql-server - 如何记录特定时间段内数据库的所有更新和插入

> ID：14147352
> 
> 赞同：1
> 
> 时间：2013-01-03T21:14:59.130
> 
> 标签：sql-server, sql-server-2008-r2

我有一个远程数据库，我想在接下来的几个小时内记录所有更改（更新和插入）。如有必要，我也喜欢还原所有更改。请注意，所有更改都可能来自多个用户/应用程序。

db 相当小（几 GB），更新次数也应该很小（< 1000）。

我将如何使用 SQL Server 2008 R2 做到这一点？

如果您需要更多信息，请与我们联系。

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:52:47.737

有很多选择，具体取决于您的确切需求和可用的资源：

*   当数据库处于“之前”状态时进行完整备份。使用数据比较工具来确定发生了什么变化。

*   创建[数据库快照](http://msdn.microsoft.com/en-us/library/ms176061%28v=sql.105%29.aspx)（仅限企业版引擎）。这将让您始终查看之前的状态，并且您可以手动合并/回滚/所做的任何更改，或恢复到与恢复基本相同的快照。使用数据比较工具来确定发生了什么变化。

*   使用[变更数据捕获 (CDC)](http://msdn.microsoft.com/en-us/library/bb522489%28v=SQL.105%29.aspx)（仅限企业版引擎）。这将捕获对启用它的表所做的所有更改。这是一种非常精细的方法。结合备份或快照进行回滚。

*   在所有可能受到影响的表上设置触发器，并引导数据更改您自己创建的跟踪表。结合备份或快照进行回滚。

# c - 如何调试嵌入式应用程序中的内存问题

> ID：14147353
> 
> 赞同：6
> 
> 时间：2013-01-03T21:15:01.413
> 
> 标签：c, debugging, memory, gdb, embedded

我是嵌入式编程的新手，但我必须调试在嵌入式平台上运行的相当复杂的应用程序。我通过 JTAG 接口使用 GDB。

我的程序在某些时候以一种意想不到的方式崩溃。我想这是由于一些与内存相关的问题而发生的。GDB 是否允许我在系统崩溃后检查内存，从而完全没有响应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T21:19:23.013

这取决于您的设置。特别是，由于您使用的是 JTAG，您可以将调试器设置为在检测到异常时停止处理器（例如非法访问受保护的内存等）。如果没有，您可以用无限循环替换您的异常处理程序。然后您可以手动展开异常以查看导致崩溃的处理器正在执行的操作。通常，在这种情况下您仍然可以访问内存，您可以使用 GDB 直接环顾四周，或者将所有内容转储到文件中以便稍后查看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T22:17:04.533

这取决于发生了什么崩溃。如果系统只是无响应（在某些无限循环、死锁或类似情况下），那么它通常会响应 GDB，您将能够看到回溯（调用堆栈）等。如果系统/总线/cpu 实际上已经崩溃（在较低级别），那么它可能不会响应。在这种情况下，您可以尝试在可疑位置/变量处设置断点并观察发生了什么。模拟器（ISS，RTL - 如果适用）也可以派上用场，将行为与硬件进行比较。

# android - 无法从其他用户帐户访问 Facebook 应用程序

> ID：14147354
> 
> 赞同：0
> 
> 时间：2013-01-03T21:15:05.360
> 
> 标签：android, facebook, oauth, access-token

我已经成功开发了一个在 facebook 上创建事件的 android facebook 应用程序。我以管理员身份运行它运行顺利，一切正常。问题是当我尝试以其他用户身份运行应用程序时（我从我创建的虚拟帐户运行它）。虽然我可以获得诸如用户名和用户 ID 之类的信息并且可以成功地创建一个事件，但是当我运行一个 fql 请求（或任何一个图形 api）时，例如

从 eid IN 的事件中选择 eid、名称、开始时间、结束时间、位置、创建者、描述、主持人、图片、出席人数、更新时间、地点（从 uid = me() 的事件成员中选择 eid）

什么都不返回。我在 facebook 应用程序设置中添加了这个帐户作为管理员同样的问题。然后我尝试了其他方法，在图形资源管理器上，我尝试以用户身份运行 fql 查询。它返回用户参加的事件。当我尝试代表应用程序运行相同的查询时，它会返回响应数据：[]。（与android实现相同）。我怀疑虚拟帐户可能是问题所在（它只有两个朋友），但我已将其添加为管理员。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:28:20.167

这里有很多东西可以发挥作用。据我所知，您要求的不仅仅是基本（公共）信息。

*   **用户是否授权应用程序查询您想要的信息？**

    在您开始询问信息之前，您是否确保用户已通过 Facebook 和您的应用程序进行身份验证？

    一个好的开始是在浏览器中简单地测试您的查询，看看您是否在某个地方犯了错误。您可以在查询中添加 accessToken 参数，以模拟用户已通过您的应用程序进行了良好的身份验证。有一个工具可以为您的每个应用程序获取新的访问令牌（[访问令牌工具](https://developers.facebook.com/tools/access_token/)）->确保您使用正确的帐户登录。

*   **活动是否允许您查询信息？**

    您的案例似乎提到了 Facebook 活动和与会者......您是否有足够的权利从活动中查询信息。

*   **也许您的帐户已被 Facebook 捕获**

    Facebook 提供了虚拟账户的替代方案，并且根本不鼓励这种做法。

    你可以使用测试用户（参见角色面板），或者你可以在你的应用程序中设置一些条件......你会发现什么最适合你。

    作为减缓这种做法的一种手段，Facebook 搜索潜在的虚拟账户并执行各种“削减”。这些“削减”从关闭通道到关闭所述账户不等。任何不符合 Facebook 使用条款的开放图形元素（事件、应用程序等）也是如此。

总而言之，这些都是假设和假设...我想为您提供更多帮助...但是您在这里并没有给我们很多工作。

您能否用更具体的场景（和更好的格式）更新您的问题

# ruby-on-rails - ActionView::Template::Error（blueprint/screen.css 未预编译）：

> ID：14147360
> 
> 赞同：0
> 
> 时间：2013-01-03T21:15:33.410
> 
> 标签：ruby-on-rails, asset-pipeline

让我从我是新手开始。我正在关注 Michael Hartl 的“Ruby on Rails 3 教程：通过示例学习 Rails”。我在电子书第 7 章中的位置 4503。

我正在尝试将我的 rails 应用程序推送到 heroku，然后查看相应的网页。当我访问 heroku 网页时，我看到的只是错误消息“我们很抱歉，但出了点问题”。

```
chad@chad-HP-Pavilion-dv6500-Notebook-PC:~/rails/sample_app$ git push heroku master
Counting objects: 423, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (300/300), done.
Writing objects: 100% (423/423), 171.76 KiB, done.
Total 423 (delta 193), reused 239 (delta 91)
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.2
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
   Fetching gem metadata from https://rubygems.org/.........
   Fetching gem metadata from https://rubygems.org/..
   Installing rake (10.0.2)
   Installing i18n (0.6.1)
   Installing multi_json (1.4.0)
   Installing activesupport (3.2.8)
   Installing builder (3.0.4)
   Installing activemodel (3.2.8)
   Installing erubis (2.7.0)
   Installing journey (1.0.4)
   Installing rack (1.4.1)
   Installing rack-cache (1.2)
   Installing rack-test (0.6.2)
   Installing hike (1.2.1)
   Installing tilt (1.3.3)
   Installing sprockets (2.1.3)
   Installing actionpack (3.2.8)
   Installing mime-types (1.19)
   Installing polyglot (0.3.3)
   Installing treetop (1.4.12)
   Installing mail (2.4.4)
   Installing actionmailer (3.2.8)
   Installing arel (3.0.2)
   Installing tzinfo (0.3.35)
   Installing activerecord (3.2.8)
   Installing activeresource (3.2.8)
   Installing coffee-script-source (1.4.0)
   Installing execjs (1.4.0)
   Installing coffee-script (2.2.0)
   Installing rack-ssl (1.3.2)
   Installing json (1.7.5)
   Installing rdoc (3.12)
   Installing thor (0.16.0)
   Installing railties (3.2.8)
   Installing coffee-rails (3.2.2)
   Installing gravatar_image_tag (0.1.0)
   Installing jquery-rails (2.1.4)
   Installing pg (0.14.1)
   Using bundler (1.3.0.pre.2)
   Installing rails (3.2.8)
   Installing sass (3.2.3)
   Installing sass-rails (3.2.5)
   Installing uglifier (1.3.0)
   Your bundle is complete! It was installed into ./vendor/bundle
   Post-install message from rdoc:
   Depending on your version of ruby, you may need to install ruby rdoc/ri data:
   <= 1.8.6 : unsupported
   = 1.8.7 : gem install rdoc-data; rdoc-data --install
   = 1.9.1 : gem install rdoc-data; rdoc-data --install
   >= 1.9.2 : nothing to do! Yay!
   Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Detected manifest.yml, assuming assets were compiled locally
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 8.9MB
-----> Launching... done, v6
       http://fast-caverns-8821.herokuapp.com deployed to Heroku

To git@heroku.com:fast-caverns-8821.git
 * [new branch]      master -> master
chad@chad-HP-Pavilion-dv6500-Notebook-PC:~/rails/sample_app$ 
```

$heroku 日志

```
chad@chad-HP-Pavilion-dv6500-Notebook-PC:~/rails/sample_app$ heroku logs    
2013-01-03T21:48:06+00:00 heroku[api]: Release v2 created by chadfaling@gmail.com
2013-01-03T21:48:06+00:00 heroku[api]: Enable Logplex by chadfaling@gmail.com 
2013-01-03T21:48:35+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:48:36+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/favicon.ico host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:48:36+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/favicon.ico host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:49:17+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:49:19+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:49:20+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:49:21+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:49:23+00:00  heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:50:44+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:50:45+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:50:45+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:54:27+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=109.150.198.176 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T21:54:28+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/favicon.ico host=fast-caverns-8821.herokuapp.com fwd=109.150.198.176 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T22:11:25+00:00 heroku[router]: at=info code= desc="Blank app" method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno= queue= wait= connect= service= status=502 bytes= 
2013-01-03T22:17:11+00:00 heroku[slugc]: Slug compilation  started 
2013-01-03T22:17:44+00:00 heroku[api]: Attach HEROKU_POSTGRESQL_IVORY resource by chadfaling@gmail.com 
2013-01-03T22:17:44+00:00 heroku[api]: Release v3 created by chadfaling@gmail.com 
2013-01-03T22:17:44+00:00 heroku[api]: Add DATABASE_URL config by chadfaling@gmail.com 
2013-01-03T22:17:44+00:00 heroku[api]: Release v4 created by chadfaling@gmail.com 
2013-01-03T22:17:49+00:00 heroku[api]: Add  config by chadfaling@gmail.com 
2013-01-03T22:17:49+00:00 heroku[api]: Release v5 created by chadfaling@gmail.com 
2013-01-03T22:17:50+00:00 heroku[api]: Scale to web=1 by chadfaling@gmail.com 
2013-01-03T22:17:50+00:00 heroku[api]: Release v6 created by chadfaling@gmail.com 
2013-01-03T22:17:50+00:00 heroku[api]: Deploy 4c02e8a by chadfaling@gmail.com 
2013-01-03T22:17:51+00:00 heroku[slugc]: Slug compilation finished 
2013-01-03T22:17:53+00:00 heroku[web.1]: Starting process with command `bundle exec rails server-p 18935` 
2013-01-03T22:17:54+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 53518` 
2013-01-03T22:17:57+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5) 
2013-01-03T22:17:57+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5) 
2013-01-03T22:17:59+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5) 
2013-01-03T22:17:59+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5) 
2013-01-03T22:17:59+00:00 app[web.1]: => Booting WEBrick 2013-01-03T22:17:59+00:00 app[web.1]: => Call with -d to detach 
2013-01-03T22:17:59+00:00 app[web.1]: Connecting to database specified by DATABASE_URL 
2013-01-03T22:17:59+00:00 app[web.1]: => Ctrl-C to shutdown server 
2013-01-03T22:17:59+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:53518 2013-01-03T22:18:00+00:00 app[web.1]: [2013-01-03 22:18:00] INFO  ruby1.9.2 (2011-07-09) [x86_64-linux] 
2013-01-03T22:18:00+00:00 app[web.1]: [2013-01-03 22:18:00] INFO  WEBrick 1.3.1 
2013-01-03T22:18:00+00:00 app[web.1]: [2013-01-03 22:18:00] INFO  WEBrick::HTTPServer#start: pid=2 port=53518 
2013-01-03T22:18:02+00:00 app[web.1]: Connecting to database specified by DATABASE_URL 2013-01-03T22:18:02+00:00 app[web.1]: => Booting WEBrick 
2013-01-03T22:18:02+00:00 app[web.1]: => Call with -d to detach 
2013-01-03T22:18:02+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:18935 
2013-01-03T22:18:02+00:00 app[web.1]: => Ctrl-C to shutdown server 
2013-01-03T22:18:03+00:00 app[web.1]: [2013-01-03 22:18:03] INFO  WEBrick 1.3.1 
2013-01-03T22:18:03+00:00 app[web.1]: [2013-01-03 22:18:03] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux] 
2013-01-03T22:18:03+00:00 app[web.1]: [2013-01-03 22:18:03] INFO  WEBrick::HTTPServer#start: pid=2 port=18935 
2013-01-03T22:18:03+00:00 heroku[web.1]: Stopping all processes with SIGTERM 
2013-01-03T22:18:03+00:00 heroku[web.1]: State changed from starting to up 
2013-01-03T22:18:04+00:00 app[web.1]: [2013-01-03 22:18:04] ERROR SignalException: SIGTERM 
2013-01-03T22:18:04+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select' 
2013-01-03T22:18:14+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL 
2013-01-03T22:18:14+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM 
2013-01-03T22:18:16+00:00 heroku[web.1]: Process exited with status 137 
2013-01-03T22:18:18+00:00 app[web.1]: Started GET "/" for 71.203.9.123 at 
2013-01-03 22:18:18 +0000 2013-01-03T22:18:18+00:00 app[web.1]:  
2013-01-03T22:18:18+00:00 app[web.1]:  2013-01-03T22:18:18+00:00 app[web.1]: Processing by PagesController#home as HTML 
2013-01-03T22:18:18+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (7.6ms) 
2013-01-03T22:18:18+00:00 heroku[router]: at=info method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno=web.1 queue=0 wait=2ms connect=3ms service=227ms status=500 bytes=643 
2013-01-03T22:18:18+00:00 app[web.1]: Completed 500 Internal Server Error in 73ms 
2013-01-03T22:18:18+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (13.6ms) 
2013-01-03T22:18:18+00:00 app[web.1]:  2013-01-03T22:18:18+00:00 app[web.1]: ActionView::Template::Error (blueprint/screen.css isn't precompiled): 
2013-01-03T22:18:18+00:00 app[web.1]:     2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> 
2013-01-03T22:18:18+00:00 app[web.1]:     1: <!--[if it IE 9]> 
2013-01-03T22:18:18+00:00 app[web.1]:     6: <!--[if it IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]--> 
2013-01-03T22:18:18+00:00 app[web.1]:  2013-01-03T22:18:18+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___3224471283117236114_42422900' 
2013-01-03T22:18:18+00:00 app[web.1]:  2013-01-03T22:18:18+00:00 app[web.1]:     7: <%= stylesheet_link_tag 'custom', :media => 'screen' %> 
2013-01-03T22:18:18+00:00 app[web.1]:   app/views/layouts/_stylesheets.html.erb:4:in `_app_views_layouts__stylesheets_html_erb__1641714469046479695_41334620' 
2013-01-03T22:18:18+00:00 app[web.1]:     3: <![endif]--> 
2013-01-03T22:18:18+00:00 app[web.1]:     4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %> 
2013-01-03T22:18:18+00:00 app[web.1]:     5: <%= stylesheet_link_tag 'blueprint/print', :media=> 'print' %> 
2013-01-03T22:27:21+00:00 app[web.1]:  2013-01-03T22:27:21+00:00 app[web.1]: Started GET "/" for 71.203.9.123 at 
2013-01-03 22:27:21 +0000 2013-01-03T22:27:21+00:00 app[web.1]:  
2013-01-03T22:27:21+00:00 app[web.1]: Processing by PagesController#home as HTML 
2013-01-03T22:27:21+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.3ms) 
2013-01-03T22:27:21+00:00 app[web.1]:   Rendered layouts/_stylesheets.html.erb (0.7ms) 
2013-01-03T22:27:21+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms 
2013-01-03T22:27:21+00:00 app[web.1]:     5: <%= stylesheet_link_tag 'blueprint/print', :media => 'print' %> 
2013-01-03T22:27:21+00:00 app[web.1]:  
2013-01-03T22:27:21+00:00 app[web.1]:     7: <%= stylesheet_link_tag 'custom', :media => 'screen' %> 
2013-01-03T22:27:21+00:00 app[web.1]:     2: <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script> 
2013-01-03T22:27:21+00:00 app[web.1]:     1: <!--[if it IE 9]> 
2013-01-03T22:27:21+00:00 app[web.1]: ActionView::Template::Error (blueprint/screen.css isn't precompiled): 
 2013-01-03T22:27:21+00:00 app[web.1]:     3: <![endif]--> 
2013-01-03T22:27:21+00:00 app[web.1]:  4: <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen' %> 
2013-01-03T22:27:21+00:00 app[web.1]:   app/views/layouts/_stylesheets.html.erb:4:in `_app_views_layouts__stylesheets_html_erb__1641714469046479695_41334620' 
2013-01-03T22:27:21+00:00 app[web.1]:   app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___3224471283117236114_42422900' 
2013-01-03T22:27:21+00:00 app[web.1]:     6: <!--[if it IE 8]><%= stylesheet_link_tag 'blueprint/ie' %><![endif]--> 
2013-01-03T22:27:21+00:00 app[web.1]:  2013-01-03T22:27:21+00:00 app[web.1]:  
2013-01-03T22:27:21+00:00 heroku[router]: at=info method=GET path=/ host=fast-caverns-8821.herokuapp.com fwd=71.203.9.123 dyno=web.1 queue=0 wait=0ms connect=2ms service=23ms status=500 bytes=643 
```

任何人都可以帮忙吗？请 ：）

注意：我已经阅读了其他类似问题的帖子并尝试了以下建议：

1.  在您的 config/environments/production.rb 中，您设置

config.assets.precompile += %w( blueprint/screen.css blueprint/print.css )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:18:37.600

运行并重`rake assets:precompile`试

# css - 所有文本的 CSS 通用字体

> ID：14147363
> 
> 赞同：1
> 
> 时间：2013-01-03T21:15:47.030
> 
> 标签：css, font-family

我有一个这样的 HTML：

```
<div id="footer">
    <p> Copyright 2013 </p>
</div> 
```

像这样的CSS：

```
#footer {
    clear: both;
    position: relative;
    width: 980px;
    font-size: 0.85em;
    text-align: center;
    margin: 0 auto;
    padding: 20px 0 0 0;
    border-top: 1px solid #E9E6D9;
} 
```

我希望我的文本`<p>`具有 Arial 字体，但我不想在 #footer 中添加字体，而是使 Arial 字体对网站中的所有文本（没有分配特定字体）通用。

我怎么能做到这一点？我尝试添加一个`* { font-family:arial; }`，但它没有帮助......

- - - - - - - - - 更新

这是我所拥有的：

```
body {
font-size: 11px;
font-family: Arial,Helvetica,Verdana,Sans-serif;
color: black;
font-weight: normal;
}

#footer {
    clear: both;
    position: relative;
    width:980px;
    font-size: 0.85em;
    text-align: center;
    margin: 0 auto;
    padding: 20px 0 0 0;
    border-top: 1px solid #E9E6D9;
} 
```

但是页脚仍然会在没有继承正文样式的情况下出现...... :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:18:13.810

将该规则应用于`body`

```
body {
    font-family: arial;
} 
```

然后任何其他元素都可以覆盖它：

```
.someClass {
    font-family: verdana;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:19:08.510

您可以使用类似的方式在正文上声明字体。

```
body {
    font: 16px/18px Arial, sans-serif;
} 
```

您将为站点的所有字体设置大小、行高和字体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T23:17:32.040

您`style`的 css 中有一个无效的标签。

删除它可以解决字体问题等。

[jsfiddle](http://jsfiddle.net/LZz8z/1/)

# sockets - 在 Tomcat/Jetty 上设置套接字发送缓冲区大小

> ID：14147364
> 
> 赞同：0
> 
> 时间：2013-01-03T21:15:47.793
> 
> 标签：sockets, tomcat, jetty

有没有办法可以为 Tomcat 或 Jetty 创建的 HTTP 侦听器/响应套接字设置发送缓冲区大小？（即 SO_SNDBUF）。抱歉，如果我弄错了术语。

**更新：**

在谷歌搜索并在@Joakim 的帮助下，我发现了这个：

[http://wiki.eclipse.org/Jetty/Howto/Configure_Connectors](http://wiki.eclipse.org/Jetty/Howto/Configure_Connectors)

和

[Jetty 中的慢速传输，具有特定缓冲区大小的分块传输编码](https://stackoverflow.com/questions/9031311/slow-transfers-in-jetty-with-chunked-transfer-encoding-at-certain-buffer-size)

那么问题是 Jetty.xml 配置以及 HttpServletResponse.setBufferSize() 引用的“缓冲区大小”是否与套接字“发送缓冲区大小”相同？

**更新 2：**

阅读更多我认为这既不会影响套接字缓冲区的大小，也不会影响 servlet 容器在将其发送到套接字之前使用的另一个缓冲区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-13T14:00:59.350

在带有弹簧的 Jetty 9 中，可以通过以下方式完成：

```
@Configuration 
```

公共类 CustomJettyConfiguration {

```
@Bean
public EmbeddedServletContainerCustomizer customizer() {
    return new EmbeddedServletContainerCustomizer() {

        @Override
        public void customize(ConfigurableEmbeddedServletContainer container) {
            if (container instanceof JettyEmbeddedServletContainerFactory) {
                customizeJetty((JettyEmbeddedServletContainerFactory) container);
            }
        }

        private void customizeJetty(JettyEmbeddedServletContainerFactory jetty) {
            jetty.addServerCustomizers(new JettyServerCustomizer() {

                @Override
                public void customize(Server server) {
                    for (Connector connector : server.getConnectors()) {
                        if (connector instanceof ServerConnector) {
                            HttpConnectionFactory connectionFactory = ((ServerConnector) connector)
                                    .getConnectionFactory(HttpConnectionFactory.class);
                            connectionFactory.getHttpConfiguration()
                                    .setResponseHeaderSize(16 * 1024);
                        }
                    }
                }
            });
        }
    };

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:42:09.200

Jetty 在任何版本的 Jetty 中都不支持 Socket.setSendBufferSize()。

但是，您可以提供自己的[连接器](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/Connector.html)实现来做到这一点。

首先扩展[SocketConnector](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/bio/SocketConnector.html)，您可以在其中提供自己的[.configure(Socket)](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/AbstractConnector.html#configure%28java.net.Socket%29)实现来执行[Socket.setSendBufferSize(int)](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#getSendBufferSize%28%29)。

# java - 将 int[] 转换为字节数组，将字节数组转换为图像

> ID：14147366
> 
> 赞同：-3
> 
> 时间：2013-01-03T21:15:49.947
> 
> 标签：java, image

试图存储到图像。bt 是字节数组

```
InputStream is = new ByteArrayInputStream(bt);
Image img = ImageIO.read(is);
ImageIO.write(img,"jpg",new File("C:\\home_loan.jpg") ); 
```

， 请帮我，

错误 - : 找不到符号

符号：方法 write(java.awt.Image,java.lang.String,java.io.File)

位置：类 javax.imageio.ImageIO

ImageIO.write(img,"jpg",new File("C:\home_loan.jpg") );

```
 ^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:27:17.600

首先，您需要知道映射是一个 int 到一个字节还是一个 int 到多个字节（以及多少个）。然后，如果是后者，您需要知道是大端还是小端。

对于图像，您还需要了解图像格式是什么（JPG 实际上有几个变体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:29:46.020

使用[BufferedImage](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)。那是一个由内存支持的图像，有两种`setRGB`方法。

以此来定制您的数据；否则您需要转换数据结构，处理一个 BufferedImage。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T05:49:29.687

您可以使用以下方法-

```
/**
 * @param path full path of image
 * @return image file for supplied path
 */
private BufferedImage getImage(String path) {
    BufferedImage image = null;
    File file = new File(path);
    try {
        image = ImageIO.read(file);
    } catch(Exception e) {
        e.printStackTrace();
    }
    return image;
}

/**
 * @param userSpaceImage 
 * @return byte array of supplied image
 */
private byte[] getByteData(BufferedImage userSpaceImage) {
    WritableRaster raster = userSpaceImage.getRaster();
    DataBufferByte buffer = (DataBufferByte) raster.getDataBuffer();
    return buffer.getData();
}

/**
 * @param image image-file to save
 * @param file to save image to
 * @param extension of image file
 * @return full path of saved image
 */
private String saveImage(BufferedImage image, File file, String extension) {
    try {
        ImageIO.write(image, extension, file);
    } catch(Exception e) {
        e.printStackTrace();
    }
    return file.getAbsolutePath();
} 
```

# python - 根据输入值在 Python 中创建字典

> ID：14147369
> 
> 赞同：11
> 
> 时间：2013-01-03T21:16:00.557
> 
> 标签：python, dictionary

似乎很简单，但难以捉摸，想要从 [key,value] 对的输入构建一个字典，该对用空格分隔，只使用一个 Python 语句。这是我到目前为止所拥有的：

```
d={}
n = 3
d = [ map(str,raw_input().split()) for x in range(n)]
print d 
```

输入：

```
A1023 CRT
A1029 Regulator
A1030 Therm 
```

期望的输出：

```
{'A1023': 'CRT', 'A1029': 'Regulator', 'A1030': 'Therm'} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-05T04:50:34.417

这就是我们最终使用的：

```
n = 3
d = dict(raw_input().split() for _ in range(n))
print d 
```

输入：

```
A1023 CRT
A1029 Regulator
A1030 Therm 
```

输出：

```
{'A1023': 'CRT', 'A1029': 'Regulator', 'A1030': 'Therm'} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T21:20:28.743

使用`str.splitlines()`和`str.split()`：

```
strs="""A1023 CRT
        A1029 Regulator
        A1030 Therm"""

dict(x.split() for x in strs.splitlines()) 
```

结果：

```
{'A1023': 'CRT', 'A1029': 'Regulator', 'A1030': 'Therm'} 
```

更多信息：

> str.splitlines([keepends]) -> 字符串列表
> 
> 返回 S 中的行列表，在行边界处中断。换行符不包含在结果列表中，除非给出了 keepends 并且为真。

> str.split([sep [,maxsplit]]) -> 字符串列表
> 
> 返回字符串 S 中的单词列表，使用 sep 作为分隔符字符串。如果给出了 maxsplit，则最多完成 maxsplit 拆分。如果 sep 未指定或为 None，则任何空白字符串都是分隔符，并从结果中删除空字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-06T09:05:13.190

```
n = int(input("enter a n value:"))
d = {}

for i in range(n):
    keys = input() # here i have taken keys as strings
    values = int(input()) # here i have taken values as integers
    d[keys] = values
print(d) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-30T18:52:53.613

```
for i in range(n):
    data = input().split(' ')
    d[data[0]] = data[1]
for keys,values in d.items():
    print(keys)
    print(values) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-08T15:46:11.053

```
n = int(input())          #n is the number of items you want to enter
d ={}                     
for i in range(n):        
    text = input().split()     #split the input text based on space & store in the list 'text'
    d[text[0]] = text[1]       #assign the 1st item to key and 2nd item to value of the dictionary
print(d) 
```

输入：

```
3

A1023 CRT

A1029 Regulator

A1030 Therm 
```

注意：我为每个输入添加了一个额外的行，以便在此站点的各个行上获取每个输入。因为放置没有额外的线会创建一条线。

输出：

```
{'A1023': 'CRT', 'A1029': 'Regulator', 'A1030': 'Therm'} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T21:21:27.027

假设您在变量中有文本`s`：

```
dict(map(lambda l: l.split(), s.splitlines())) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-06T19:24:38.947

```
n=int(input())
pair = dict()

for i in range(0,n):
        word = input().split()
        key = word[0]
        value = word[1]
        pair[key]=value

print(pair) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-09T16:21:05.813

```
record = int(input("Enter the student record need to add :"))

stud_data={}

for i in range(0,record):
    Name = input("Enter the student name :").split()
    Age = input("Enter the {} age :".format(Name))
    Grade = input("Enter the {} grade :".format(Name)).split()
    Nam_key =  Name[0]
    Age_value = Age[0]
    Grade_value = Grade[0]
    stud_data[Nam_key] = {Age_value,Grade_value}

print(stud_data) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-07T03:08:58.440

我将一个空字典作为 f 并将 f 中的值更新为名称、密码或余额是键。

```
f=dict()
f.update(name=input(),password=input(),balance=input())
print(f) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-29T15:28:10.660

**从用户那里获取输入**：

```
input = int(input("enter a n value:"))

dict = {}

    name = input() 

    values = int(input()) 

    dict[name] = values
print(dict) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-08T04:21:24.517

```
d = {}
count = 0
data = int(input("How many data do you want to enter?(numbers only): "))
while count < data:
    count = count + 1
    print("Enter a key")
    key = input()
    print("Enter a value")
    value = input()
    d[key] = value
    if count >= data:
        break

print(d)
```

# django - 需要订购表格的建模帮助

> ID：14147372
> 
> 赞同：1
> 
> 时间：2013-01-03T21:16:26.343
> 
> 标签：django, django-models, django-forms

我想为我公司的采购部门创建一个 Django 项目。这将是我在 Django 中的第一个项目，如果这只是初步的，很抱歉。工作流程如下所示：

用户注册帐户 > 登录 > 可以创建、编辑、查看或删除采购订单。

我被建模绊倒了。大概我可以使用 django.contrib.auth 创建和验证用户。此外，由于这主要是一个表单保存/打印应用程序，我将使用 ModelForm 根据我的模型生成表单，因为用户将对需要保存的表单数据进行更改。有问题的采购订单表格的简化版本如下所示：

```
| Vendor | Date  | Lead Time | Arrival Date | Buyer_Name |
+--------+-------+-----------+--------------+------------+
| FooBar |1-1-12 | 30        | 2-1-12       | Mr. Bar    |
+--------+-------+-----------+--------------+------------+
+--------+-------+-----------+--------------+------------+
| SKU    | Description | Quantity | Price | Dimensions   |
+--------+-------------+----------+-------+--------------+
|12345   | Soft Bar    | 38       | 5.75  | 16 X 5 X 8   |
+--------+-------------+----------+-------+--------------+
|12346   | Hard Bar    | 12       | 5.75  | 16 X 5 X 8   |
+--------+-------------+----------+-------+--------------+
|12347   | Medium Bar  | 17       | 5.75  | 16 X 5 X 8   |
+--------+-------------+----------+-------+--------------+ 
```

如您所见，主采购订单表单有一个标题，其中标识了订购的供应商、当前日期、交货时间、到达日期以及填写表单的买家姓名。下面是三个不同 SKU 的逐行订单详细信息。理想情况下，每个 PurchaseOrder 应该能够添加许多 SKU。

建模这样的东西的最佳方法是什么？我要创建用户、购买订单和 SKU 模型吗？然后将 FK 添加到指向 PurchaseOrder 模型的 PK 的 SKU 模型，或者是否有其他更正确的方法来做这样的事情？提前感谢您的帮助。

[编辑]

Django 拥有我一直在寻找的东西。因为这本质上是一个嵌套表单，所以我可以使用 Formsets。

以下是两个有用的入门链接：

[https://docs.djangoproject.com/en/1.4/topics/forms/formsets/](https://docs.djangoproject.com/en/1.4/topics/forms/formsets/) https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#model-formsets

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:08:29.373

使用 django 的内置用户模型（您可以查看源代码以查看定义，但它类似于以下其他模型的代码）。除此之外，我会为您提到的每个对象建议一个模型。

不要将 FK 添加到 SKU 模型，因为 SKU 可以在没有出现在采购订单中的情况下存在（如果我正确理解问题的话）。

## 模型.py

```
from django.contrib.auth.models import User
class Vendor(models.Model):
     name = models.CharField(max_length=200)
     #other fields

class SKU(models.Model):
     description = models.CharField(max_length=200)
     #other fields

class PurchaseOrder(models.Model):
     purchaser = models.ForiegnKey(User)
     name = models.CharField(max_length=200)
     skus = models.ManyToManyField(SKU) #this is the magic that allows 1 purchase order to be filled with several SKUs
     #other fields 
```

# c++ - 在 Linux 中链接动态共享库 - 未定义的函数引用

> ID：14147376
> 
> 赞同：1
> 
> 时间：2013-01-03T21:16:36.793
> 
> 标签：c++, linux, reference, export, dynamic-library

我知道有很多与 Linux 上的共享库相关的问题，但可能是因为我厌倦了在 Linux 上创建一个简单的动态库（在 Windows 上只需不到 10 分钟）我找不到在这种情况下会发生什么。因此，我正在尝试创建一个在构建时链接并在运行时使用的库（不是静态库，也不是要嵌入到可执行文件中的库，换句话说）。现在它包含一个简单的功能。这些是我的文件：

1.

```
// gugulibrary.cpp
// This is where my function is doing its job

#include "gugulibrary.h"

namespace GuGu {
    void SayHello() {
        puts("Hello!");
    }
} 
```

2.

```
// gugulibrary.h
// This is where I declare my shared functions
#include <stdio.h>

namespace Gugu {
    void SayHello();
} 
```

3.

```
// guguapp.cpp
// This is the executable using the library
#include "gugulibrary.h"

int main() {
    GuGu::SayHello();
    return 0;
} 
```

这就是我尝试构建项目的方式（我认为这是错误的）：

```
gcc -Wall -s -O2 -fPIC -c gugulibrary.cpp -o gugulibrary.o
ld -shared -o bin/libGugu.so gugulibrary.o
gcc -Wall -s -O2 guguapp.cpp -o bin/GuGu -ldl
export LD_LIBRARY_PATH=bin 
```

这被保存为 .sh 文件，我在终端中单击并执行该文件。尝试链接库时出现的错误是：

```
/tmp/ccG05CQD.o: In function `main':
guguapp.cpp:(.text.startup+0x7): undefined reference to `SayHello'
collect2: ld returned 1 exit status 
```

这就是我迷路的地方。我希望库现在与可执行文件位于同一文件夹中，也许我需要一些符号/定义文件或其他东西，我不知道如何创建。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:40:39.470

在您的 C++ 文件中，`GuGu::SayHello`被声明为 C++ 符号。在您的标题中，您将其包装在一个`extern "C"`块中。这实际上是未定义的，因为不允许`namespace`在该上下文中使用 C++ 语法 ( )。但我的猜测是编译器正在做的是忽略命名空间并生成一个 C 符号名称“SayHello”。显然，您的库从未定义过这样的函数。取出这些`extern "C"`位，因为无论如何都不能从 C 中使用您定义的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:30:16.210

你和你的咕咕不一致，也有咕咕跑来跑去的，这个需要统一，然后就可以了（至少我的电脑上现在有一些咕咕的）

# matplotlib - 不使用补丁的 Matplotlib imshow 选择性模式

> ID：14147377
> 
> 赞同：1
> 
> 时间：2013-01-03T21:16:40.727
> 
> 标签：matplotlib, graphing

有没有办法将模式放置到 imshow 图表上的选定区域？准确地说，我需要做到这一点，除了带有数字数据的彩色方块之外，我在其他方块中也有不同的图案，表示实验的不同故障模式（并且还生成一个解释这些含义的密钥不同的图案）。一个有用的模式示例是各种类型的交叉影线。我需要能够在不破坏图表上主要颜色-数字数据关系的情况下做到这一点。

由于我正在为包含图形的 GUI 工作的后端，我无法使用补丁（它们无法腌制并通过多处理包从后端到前端）。我想知道是否有人知道另一种方法来做到这一点。

```
grid = np.ma.array(grid, mask=np.isnan(grid))
ax.imshow(grid, interpolation='nearest', aspect='equal', vmax = private.vmax, vmin = private.vmin)
# Up to here works fine and draws the graph showing only the data with white spaces for any point that failed
if show_fail and faildat != []:
    faildat = faildat[np.lexsort((faildat[:,yind],faildat[:,xind]))]
    fails = []
    for i in range(len(faildat)):  #gives coordinates with failures as (x,y)
        fails.append((faildat[i,1],faildat[i,0]))
    for F in fails:
         ax.FUNCTION NEEDED HERE
ax.minorticks_off()
ax.set_xticks(range(len(placex)))        
ax.set_yticks(range(len(placey)))
ax.set_xticklabels(placex)        
ax.set_yticklabels(placey, rotation = 0)
ax.colorbar()
ax.show() 
```

# wordpress - 修改 WooTabs 热门帖子以处理综合浏览量而不是评论计数

> ID：14147394
> 
> 赞同：0
> 
> 时间：2013-01-03T21:17:45.467
> 
> 标签：wordpress, woothemes

woo 标签小部件根据评论计数而不是页面浏览量显示热门帖子。小部件中的代码可以实现这一点

$popular = get_posts(array('suppress_filters' => false, 'ignore_sticky_posts' => 1, 'orderby' => 'comment_count', 'numberposts' => $posts ) ); foreach($popular as $post) : setup_postdata($post); ?>

谁能帮我修改 thsi 使其适用于页面浏览量而不是评论计数？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:22:22.293

我遇到了同样的问题，经过一番研究后得出以下结论：

我将此片段添加到我的 functions.php 文件中：

[**使用帖子元跟踪没有插件的帖子视图**](http://wpsnipp.com/index.php/functions-php/track-post-views-without-a-plugin-using-post-meta/)

然后从该链接的**第 2 步**开始，我将此代码片段粘贴到小部件代码上方：

```
<?php setPostViews(get_the_ID()); ?> 
```

最后将 'orderby' => 'comment_count' 更改为 'orderby' => 'post_views' 如下：

```
$popular = get_posts( array( 'suppress_filters' => false, 'ignore_sticky_posts' => 1, 'orderby' => 'post_views', 'numberposts' => $posts ) );
    foreach($popular as $post) : setup_postdata($post); 
```

希望这可以帮助 ：）

# php - Preg 匹配方括号和@strings 内的字符串

> ID：14147399
> 
> 赞同：2
> 
> 时间：2013-01-03T21:17:52.103
> 
> 标签：php, regex, preg-match

我想得到里面的字符串`[square] [brackets]`和那些`@like @this`。以下适用于`[tags]`但不适用于`@users`.

```
$query = "[tag1] [tag2] @user1 @user2 ignoreme";

// check for tags e.g. [tag1] [tag2]
preg_match_all("/\[([^\]]+)\]/", $query, $tags);

// check for users e.g. @username
preg_match_all("/\B@[^\B]+/", $query, $users);

print_r($tags);
print_r($users); 
```

输出：

```
(
    [0] => Array
        (
            [0] => [tag1]
            [1] => [tag2]
        )
        [1] => Array
        (
            [0] => tag1
            [1] => tag2
        )
    )
Array
(
    [0] => Array
        (
            [0] => @user1 @user2 ignoreme
        )
    ) 
```

该标签`preg_match`正在工作，但@user 只是抓住了它之后的所有东西（甚至忽略了第二个@user2）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:20:57.330

如果您查看以下说明：[http](http://regex101.com/r/fH4lG4) ://regex101.com/r/fH4lG4 ，您会发现您的正则表达式被破坏的原因。

您正在匹配除文字之外的所有内容`B`。

你应该做的是要么`[^@]+`，`[^@ ]+`要么`\S+`

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:56:02.267

这是一个简单的正则表达式中的解决方案

```
/((?<=\[)\w*(?=\])|(?<=@)\w*)/ 
```

在这里自己尝试一下：[http ://www.regex101.com/r/iH8iJ5](http://www.regex101.com/r/iH8iJ5)

# php - 使用 basename() 获取文件路径的一部分

> ID：14147400
> 
> 赞同：0
> 
> 时间：2013-01-03T21:17:54.157
> 
> 标签：php, regex

继续我在过去一个月左右的一系列问题，我又被一件事困住了。就在我认为自己掌握了 RegEx 并且现在可以更好地处理事情时，我遇到了一个新问题。我有相同的文本文件。

快速浏览一下：

```
================================================
Header of File with time and date
================================================
Loaded options from XML file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/ID2PDF_options.xml
extendedPrintPDF started
Postfix '3.0' was append from file 'ESQ030112ELAM_lo-metadata.xml' for file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.indd
    printPDF started
    PDF Export Preset: Some preset
    PDF file created: ''/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.pdf'.
File someFileName.xml removed
postprocessingDocument started
INDD file removed: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.indd
================================================
Header of File with time and date
================================================
Loaded options from XML file: ''/Thisis/some/Users/sumuser/Desktop/SM_Folder/COS/Contract_Proof_COS/processing/ID2PDF_options.xml
extendedPrintPDF started
Postfix '8.1' was append from file 'ESQ030112Politics_Russia_lo-metadata.xml' for file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/COS/Contract_Proof_COS/processing/oneMoreFile.indd
    printPDF started
    PDF Export Preset: Hearst PDF 1.6_1_16_08
    PDF file created: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/COS/Contract_Proof_COS/processing/oneMoreFile.pdf'.
File oneMoreFile.xml removed
postprocessingDocument started
INDD file removed: /Thisis/some/Users/sumuser/Desktop/SM_Folder/COS/Contract_Proof_COS/processing/oneMoreFile.indd 
```

我正在使用以下正则表达式，但它似乎不起作用：

```
/^Loaded options from XML file: '/Thisis/some/Users/.*/SM_Folder/([a-zA-Z]{3})/Contract_Proof_\1/processing/ID2PDF_options.xml'$/im 
```

给出错误“未知修饰符 T”。

我想从数组中每个条目的第一行捕获 ESQ 和 COS。PS 似乎很容易，但这是问题所在，也可能不是。

```
1\. The username may change. So, I can't create a RegEx relying on username.
2\. The COS, ESQ, etc. would repeat further in the entries. But, I only need to catch the FIRST occurrence in each entry. 
```

我可以对我如何做到这一点有任何提示/建议吗？！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:42:47.777

您需要转义，`/`因为`/`分隔正则表达式的结尾。

`le: '/Thisis/`这就是你遇到问题的地方，在`/`你得到 a`T`并且它不是正则表达式的已知修饰符之后。

您使用转义特殊含义的字符，`\`因此如果您想转义`/`必须使用`\/`

# delphi - 使用 Delphi 7 从 MP3 文件中删除或编辑 ID3Tag 版本 2

> ID：14147402
> 
> 赞同：2
> 
> 时间：2013-01-03T21:18:04.110
> 
> 标签：delphi, audio, mp3, delphi-7, id3

我正在使用旧的好的`MPGTools`和自己的，在我的 MP3 文件中设置 ID3 标签的简单方法。但是这两种方法都太旧了，无法支持 ID3Tag 版本 2。我正在寻找任何解决方案，允许我的应用程序（用 Delphi 7 编写）从它处理的每个文件中删除 ID3Tag 或将其设置为与 ID3Tag 完全相同的值版本 1 已设置。

目前我正在使用 Winamp 中的快速键盘组合手动删除 ID3Tagv2。

我不使用 v2 或专辑封面或所有这些“新”添加，因此摆脱 ID3Tagv2（如果它存在于特定文件中）的最快方法将是我所需要的。

当然，我曾尝试使用 Google 搜索互联网，但要么我遇到了糟糕的一天，要么我问错了问题，因为我在上述问题上得到的所有结果都是来自搜索引擎窃取者（如 Software）的虚假结果告密者等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T06:22:17.113

碰巧的是，我坐在这里的一个项目正在等待完成（大约 80%，当谈到 Delphi 时，我更像是一个业余爱好者，并且有更多紧迫的事情出现，然后我找到了一个可以下载的程序正是我的要求）是一个完整的 MP3 文件 ID3 标签编辑器。虽然 v1 超级简单，但 v2 更难。您可以在此处参考[v2.3 的标准文档](http://id3.org/id3v2.3.0)。但我将仅限于这里提到的几点。

您可能需要 ID3v2 标签，具体取决于应用程序。我的便携式 MP3 播放器只接受 v2 标签，这是促使我首先做这个项目的原因。

ID3v2 标签以可变长度方式写入文件的开头，其中可能存在或不存在可变数量的标签。幸运的是，如果它是一个 ID3v2 标记文件，则数据的全长应该在第一条记录中。因此，读取文件找到 ID3v2 数据的长度，然后重写没有 ID3v2 数据的文件并删除标签。在一开始就拥有数据使得这很有必要，而且确实令人沮丧。我将来对代码所做的任何事情都将涉及尝试更改数据。下面是一些非常脏的代码，AFAIR 工作，但如果你使用，你将需要清理（我相信这里有一些内容会明确指出*如何*我应该）。但为了确定，好好测试一下。还请务必询问我是否遗漏了您需要的单元中的任何内容（这是一个 19.3KB 的 pas 文件）：

```
type
  sarray = array[0..3] of byte;
  psarray = ^sarray;

  ID3v2Header = packed record
     identifier: array[0..2] of char;
     major_version: byte;
     minor_version: byte;
     flags: byte;
     size: DWord;
  end;

 function size_decodeh(insize: DWord): DWord;
   { decodes the size headers only, which does not use bit 7 in each byte,
     requires MSB conversion as well }
   var
     outdval: DWord;
     outd, ind: psarray;
     tnext2, pnext2: byte;

   begin
     outdval := 0;
     outd := @outdval;
     ind := @insize;
     tnext2 := ind^[2] shr 1;
     pnext2 := ind^[1] shr 2;

     outd^[0] := ind^[3] or ((ind^[2] and $01) shl 7);
     outd^[1] := tnext2 or ((ind^[1] and $03) shl 6);
     outd^[2] := pnext2 or ((ind^[0] and $07) shl 5);
     outd^[3] := ind^[0] shr 3;
     Result := outdval;
   end;

procedure ID3v2_LoadData(filename: string; var memrec: pointer;
                       var outsize: integer);
  { procedure loads ID3v2 data from "filename".  Returns outsize = 0 if
    there is no ID3v2 data }

var
  infile: file;
  v1h: ID3V2Header;
begin
  assign(infile, filename);
  reset(infile, 1);
// read main header to get id3v2 size
  blockread(infile, v1h, sizeof(v1h));
// detect if there is id3v2 data
  if v1h.identifier = 'ID3' then
    begin
      outsize := size_decodeh(v1h.size);
      // read ID3v2 header data
      getmem(memrec, outsize);
      blockread(infile, memrec^, outsize);
      Close(infile);
    end
  else
    outsize := 0;
  end;

 function id3v2_erase(infilestr: string): boolean;
  { erase all ID3v2 data.  Data are stored at the beginning of file, so file
    must be rewritten }
   const
     tempfilename = 'TMp@!0X.MP3';
   var
     memrec: pointer;
     outsize, dataread: integer;
     IsID3v2: boolean;
     databuffer: array[1..32768] of byte;
     newfile, origfile: file;
   begin
  // reuse service routine to get information
     Id3v2_loaddata(infilestr, memrec, outsize);
  // is there ID3v2 data?
     if outsize > 0 then
       begin
        // need to clean up after the service routine
         freemem(memrec);
        // get amount of data to erase
        outsize := outsize + sizeof(Id3v2Header);
        writeln('Data to delete is: ', outsize, ' bytes.');
        // now rewrite the file
        AssignFile(origfile, infilestr);
        reset(origfile, 1);
        AssignFile(newfile, tempfilename);
        rewrite(newfile, 1);
        Seek(origfile, outsize);
        repeat
          blockread(origfile, databuffer, sizeof(databuffer), dataread);
          blockwrite(newfile, databuffer, dataread);
        until dataread = 0;
        CloseFile(origfile);
        CloseFile(newfile);
       // rename temp file and delete original
        DeleteFile(infilestr);
        RenameFile(tempfilename, infilestr);
        IsID3v2 := true;
      end
  else
     IsID3v2 := false;
  Result := IsID3v2;
end; 
```

适用于大多数情况的完整编辑功能显然比这更难攀登，但所有细节都在我链接到的那个文档中。希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T04:06:22.320

很少有库可以与 ID3V2 一起正常工作。早在 2006 年，我进行了一项大型研究，以找到支持 Delphi 7 的大部分 Id3V2 规范的 Delphi 库。我发现了以下两个：

1.  [音频工具库](http://sourceforge.net/projects/mac/)（当时是最好的）。我认为它甚至可以用 Unicode 读/写标签。这是单位[Id3V2.pas](http://mac.cvs.sourceforge.net/viewvc/mac/unstable/Units/ID3v2.pas?view=markup)
2.  [JVCL](http://sourceforge.net/projects/jvcl/)具有使用 Id3V2 标记的组件。但它在 2006 年没有对非 unicode Delphi 的 Unicode 支持。

顺便说一句，如果您还没有使用 JVCL，那么为了获得 Id3V2 支持而安装超过 600 个组件是不值得的。所以，看看**音频工具库**。

# javascript - 使用 javascript 更改一组元素的宽度

> ID：14147406
> 
> 赞同：1
> 
> 时间：2013-01-03T21:18:20.833
> 
> 标签：javascript, html, css

我正在编写 HTML CSS JS 代码，并且正在尝试更改一组元素的样式。我已经知道 document.getElementById(id).style.something = 'somevalue'; 但这将需要我写其中的 25 个并且有 25 个不同的 ID。我想知道是否有办法更改类中的样式属性。例如：

CSS 代码：

```
div.text
{
width: 100px;
} 
```

HTML 代码：

```
<div class="text">Some Text</div> <!-- and bunch of other divs like it !> 
```

JavaScript 代码：

```
function changeWidth() {
document.getElementsByClass('text').width = '200px'; 
// I know getElementByClass doesn't exist I wanna know if there is something that would do that.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:21:17.230

“document.getElementsByClass”可能不存在，但[“document.getElementsByClassName”确实存在](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

[这里](http://www.quirksmode.org/dom/w3c_core.html#fivemethods)的所有现代浏览器都很好地支持它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:21:31.200

没有`getElementsByClass`，但有`getElementsByClassName`：

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

# objective-c - 两个 UICollectionView 实例共享同一个 UICollectionViewFlowLayout 实例？

> ID：14147407
> 
> 赞同：2
> 
> 时间：2013-01-03T21:18:22.967
> 
> 标签：objective-c, ios, cocoa-touch, ios6, uicollectionview

我不确定这是一个特性还是一个错误，但是当我在一个视图控制器上有两个使用相同实例的集合视图时`UICollectionViewFlowLayout`，会发生一件有趣的事情。请注意，我没有为此使用 Interface Builder / XIB；我将所有内容都放在代码中。

第一个`UICollectionView`有 12 个单元格，但第二个有 20 个单元格。当我重新加载两个集合视图时，*两者都*表现得好像它们的`contentSize`属性中有 20 个单元格。这意味着当我滚动到第`UICollectionView`一个（也是唯一的）12 个单元格时，我的应用程序崩溃（因为我从一个只有 12 个单元格的数据的数组中提取数据）。

为了暂时解决这个问题，我实例化了两个相同`UICollectionViewFlowLayout`的对象并将每个对象分配给它自己的集合视图。这是正常行为吗？

我才刚刚开始用 编写代码`UICollectionViews`，所以如果我散发出任何东西，请原谅我的无知！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:05:41.393

不要这样做。集合视图和布局对象应该是 1:1 的关系。布局对象有一个属性 ，`collectionView`它显然只能保存对一个集合视图的引用。

当集合视图随后询问布局的大小等时，布局对象将基于您分配布局的第二个集合视图，因为这将保存在`collectionView`属性中。

我在文档中找不到明确声明不在集合视图之间共享布局对象，但上面讨论的属性应该清楚地表明这不是预期用途。

# sql - PostgreSQL 上的日期减法

> ID：14147412
> 
> 赞同：-3
> 
> 时间：2013-01-03T21:18:51.037
> 
> 标签：sql, database, postgresql

`我有一个表（workers），它有一个 startdate 列（s_date），表示员工何时开始工作。所以我想创建一个触发器，如果​​它的工作时间少于一年（365 天），我会给出一个例外。但是代码有问题。任何帮助_？

```
CREATE OR REPLACE FUNCTION control_func() RETURNS TRIGGER AS '
declare 
int1 integer;
tt  Date;
begin 
select now()::date into tt;
select s_date from workers; 
if(tt-s_date<365) then
RAISE EXCEPTION ''A message'';
end if;
RETURN NULL;
END;
' LANGUAGE  'plpgsql'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:11:11.897

你有几个问题。首先，不要使用单引号来引用函数体，这只会弄得一团糟，请改用[美元引号](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)：

```
create or replace function f() returns trigger as $$
    ...
$$ language plpgsql; 
```

接下来，这没有任何用处：

```
select s_date from workers; 
```

这将尝试从中获取所有`s_date`值`workers`，然后将它们全部丢弃。您想查看触发器的当前行，该行位于[`NEW`](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html)：

> `NEW`
> 数据类型`RECORD`；为行级触发器中的`INSERT`/操作保存新数据库行的变量。`UPDATE`这个变量`NULL`在语句级触发器和`DELETE`操作中。

所以你可以看看`new.s_date`你感兴趣的日期：

```
select now()::date into tt;
if tt - new.s_date < 365 then
    raise exception 'A message';
end if; 
```

这可能是一个行级`before insert or update`触发器，所以您不需要`return null;`在这里；来自[精美手册](http://www.postgresql.org/docs/current/interactive/trigger-definition.html)：

> 在操作之前触发的行级触发器有以下选择：
> 
> *   它可以返回`NULL`以跳过当前行的操作。这指示执行程序不执行调用触发器的行级操作（插入、修改或删除特定表行）。
> *   仅对于行级`INSERT`和`UPDATE`触发器，返回的行将成为将被插入或替换正在更新的行的行。这允许触发器函数修改正在插入或更新的行。

因此，您的`return null;`意思是“如果新记录有效，则跳过此 INSERT 或 UPDATE”，这不是您想要的。你想`return new;`。

您还有一个未使用的变量。你可以使用[`current_date`](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)而不是你的`tt`.

您的函数应该看起来更像这样：

```
create or replace function control_func() returns trigger as $$
begin
    if current_date - new.s_date < 365 then
        raise exception 'A message'; 
    end if;
    return new;
end;
$$ language plpgsql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:28:38.577

编辑：初始语法应该是`datediff`. 然而，它是一种 MYSQL 语法。因此，您最好使用上述详细而正确的答案。;-)

在你的代码中输入这个，添加另一个变量来保存`s_date`说`ss`，

`If Datediff(days, tt, ss) < 365 then`

# android - Android - 将字符数组值移动到相同的字符数组

> ID：14147419
> 
> 赞同：0
> 
> 时间：2013-01-03T21:19:09.760
> 
> 标签：android, arrays, eclipse, porter-stemmer

我如何将 char 数组的值移动到同一个 char 数组？这是一个代码：

假设 ctr_r1=1 ，

```
for(int ctr_x = (ctr_r1 + 2) ; ctr_x < letters.length - 2 ; ctr_x++)
 {
  letters[ctr_x] = letters[ctr_x];
 }

sb.append(letters);
char[] lettersr1 = sb.toString().toCharArray();
sb1.append(lettersr1); 
```

附加“字母”，然后将其转换为字符串，然后将其转换为 char 数组，然后将其设为“lettersr1”值。

我想要完成的是给了 EUCHARIST 这个词，我需要把 HARIST 这个词取出并将它放在另一个数组上并称之为区域 1（Porter2 词干算法）。

代码“ctr_X = (ctr_r1 + 2)”从 H 开始，直到 T。问题是我不能直接传递值，这就是为什么我试图更新现有的 char 数组然后附加它。

我试过这样做：

```
char[] lettersr1 = null;
for(int ctr_x = (ctr_r1 + 2) ; ctr_x < letters.length - 2 ; ctr_x++)
 {
   lettersr1[ctr_x] = letters[ctr_x];
 }

sb.append(lettersr1); 
```

但是当我这样做时，我的应用程序崩溃了。请提供任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:26:43.170

我不明白您要做什么，但我可以评论您的代码：

```
letters[ctr_x] = letters[ctr_x]; 
```

这是一个 noop：它将数组元素值设置为它已经拥有的值。

```
char[] lettersr1 = null;
for(int ctr_x = (ctr_r1 + 2) ; ctr_x < letters.length - 2 ; ctr_x++) {
    lettersr1[ctr_x] = letters[ctr_x]; 
```

这显然会导致 NullPointerException，因为您试图访问一个为空的数组。您必须先初始化数组，然后才能对其进行修改：

```
char[] lettersr1 = new char[someLength]; 
```

附加说明：您应该为变量选择更好的名称。名称应该说明变量代表什么，并且它们应该遵守 Java 命名约定（变量名称中没有下划线，camelCase）。`ctr_x`，`ctr_r1`并`lettersr1`没有任何意义。

编辑：

我仍然不确定你想做什么，以及为什么你不简单地使用`substring()`，但这里是如何将 EUCHARIST 转换为 HARIST：

```
 char[] eucharist = "EUCHARIST".toCharArray();
    char[] harist = new char[6];
    System.arraycopy(eucharist, 3, harist, 0, 6);
    String haristAsString = new String(harist);
    System.out.println(haristAsString);

    // or

    char[] harist2 = new char[6];
    for (int i = 0; i < 6; i++) {
        harist2[i] = eucharist[i + 3];
    }
    String harist2AsString = new String(harist2);
    System.out.println(harist2AsString);

    // or

    String harist3AsString = "EUCHARIST".substring(3);
    char[] harist3 = harist3AsString.toCharArray();
    System.out.println(harist3AsString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:43:44.800

可能是这样：

```
String str = "EUCHARIST";
str = str.substring(3); 
```

在 toCharArray() 或其他之后

# powershell - 在 Powershell 选择字符串中使用上下文

> ID：14147420
> 
> 赞同：4
> 
> 时间：2013-01-03T21:19:19.457
> 
> 标签：powershell

我有一个脚本，可以在目录中的文件内容中搜索一系列字符串（存储在 txt 文件中）。我想修改它以列出找到的字符串周围的文本（这些是常规字符串，而不是正则表达式）。我玩了很多，似乎我需要使用 -Context，但我不确定如何从中获取文本。

另外，我正在搜索的文件可能没有换行符，所以如果它可以在搜索词之前和之后获取 xx 字符，那就更好了。

这是我到目前为止所拥有的（我省略了文件部分的循环）：

```
$result = Get-Content $file.FullName | Select-String $control -quiet  
If ($result -eq $True) 
{ 
  $match = $file.FullName 
  "Match on string :  $control  in file :  $match" | Out-File $output -Append 
  Write-host "Match on string :  $control  in file :  $match"
} 
```

如果它可以写上下文，那将是完美的。好像我需要使用 $_Matches，但不确定如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:48:22.283

如果`$control`只是一个正则字符串，你能把它变成一个正则表达式吗？

```
$n  = 3
$re = "(.{0,$n})(" + [Regex]::Escape($control) + ")(.{0,$n})"

$result = (Get-Content $file.FullName) -match $re 
```

有了这个，`$matches`哈希表应该让您可以访问`$n`匹配前后的字符：

```
if ($result.Length -gt 0) {
  echo "Before: $($matches[1])"
  echo "After:  $($matches[3])"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:09:12.287

这是我现在拥有的，它似乎有效：

```
 $regex = "[\s\S]{0,$ContextChars}$SearchTerm[\s\S]{0,$ContextChars}"
  $results = Get-Content $file.FullName | Select-String -Pattern $regex -AllMatches | % { $_.Matches } | % { $_.Value }      

  if ($results)
  {
    foreach($result in $results)
    {
      $display = $result
      "File: $file   Match ---$display---"  
    }
  } 
```

我唯一希望我拥有但不知道如何获得它是找到匹配项的行号。

# r - 用标签绘制空间坐标

> ID：14147422
> 
> 赞同：1
> 
> 时间：2013-01-03T21:19:23.237
> 
> 标签：r, plot, ggplot2, spatial

我在 R 中很新。我有很多坐标，我想在 R 中以适当的方式绘制它们，同时也显示标签。此外，轴应呈现纬度和经度。我尝试了 ggplot 但我无法将数据拟合到代码中。

```
 id      lon      lat
1   2 7.173500 45.86880
2   3 7.172540 45.86887
3   4 7.171636 45.86924
4   5 7.180180 45.87158
5   6 7.178070 45.87014
6   7 7.177229 45.86923
7   8 7.175240 45.86808
8   9 7.181409 45.87177
9  10 7.179299 45.87020
10 11 7.178359 45.87070
11 12 7.175189 45.86974
12 13 7.179379 45.87081
13 14 7.175509 45.86932
14 15 7.176839 45.86939
15 17 7.180990 45.87262
16 18 7.180150 45.87248
17 19 7.181220 45.87355
18 20 7.174910 45.86922
19 25 7.154970 45.87058
20 28 7.153399 45.86954
21 29 7.152649 45.86992
22 31 7.154419 45.87004
23 32 7.156099 45.86983 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:22:03.900

为此，请使用[`geom_text`](http://docs.ggplot2.org/0.9.2.1/geom_text.html)几何：

```
ggplot(aes(x = lon, y = lat), data = df) + geom_text(aes(label = id)) 
```

这会将列中的文本绘制在`id`由列`lon`和指定的位置上`lat`。数据存储在`data.frame` `df`.

或使用：

```
ggplot(aes(x = lon, y = lat), data = df) + geom_text(aes(label = id)) + 
    geom_point() 
```

如果要同时添加点和标签。使用`hjust`和`vjust`参数`geom_text`更改标签相对于点的方向。另外，`var`使用美学`color`中的参数，根据列给每个点一个颜色：`geom_point`

```
ggplot(aes(x = lon, y = lat), data = df) + geom_text(aes(label = id)) + 
    geom_point(aes(color = var)) 
```

请注意，`ggplot2`不能处理包`Spatial`提供的类`sp`。用于`as.data.frame`将点 (SpatialPoints) 和网格集 (SpatialPixels/SpatialGrid) 转换为 data.frame。此外，用于`fortify`将多边形数据集 (SpatialPolygons) 转换为`data.frame`.

# javascript - 用于“json-in-script”的 Youtube API 回调传递

> ID：14147424
> 
> 赞同：0
> 
> 时间：2013-01-03T21:19:40.353
> 
> 标签：javascript, jquery, youtube-api, getjson, gdata-api

我正在使用 Youtube Data API，并遵循 JSON 指南。Youtube 建议您使用“脚本”标签来调用服务并指定回调函数。此处提供的说明：[https](https://developers.google.com/youtube/2.0/developers_guide_json) ://developers.google.com/youtube/2.0/developers_guide_json 。

**例子**

```
<script type="text/javascript" 
    src="http://gdata.youtube.com/feeds/users/GoogleDevelopers/uploads?callback=showMyVideos&v=2&alt=json-in-script&format=5">
</script> 
```

哪个会调用：

```
function showMyVideos(data) {...} 
```

请注意，脚本标签中的查询字符串指定了参数“callback=showMyVideos”。

**问题**

我的问题是是否可以将变量传递给我手动指定的回调函数？

我想做的是像“callback=showMyVideos(id,data)”

这将调用：

```
function showMyVideos(id,data){...} 
```

其中“id”由我在标签中设置，“data”是调用 youtube 返回的内容。

我需要这样做的原因是，我可以将从 Youtube API 返回的 Youtube 视频插入到带有我正在传递的 id 的 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:35:38.883

创建一个包装函数，它使用指定的变量调用您的正常回调。然后将您的包装函数作为 YouTube 回调。

```
<script type="text/javascript">
    function showMyVideos123() {
       showMyVideos(1, 23);
    }
</script>

<script type="text/javascript" 
    src="http://gdata.youtube.com/feeds/users/GoogleDevelopers/uploads?callback=showMyVideos123&v=2&alt=json-in-script&format=5"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:30:55.733

而是使用带有回调的 youtube API 使用它通过 AJAX 搜索视频。这是一个显示两个选项的示例：http: [//acuriousanimal.com/blog/2011/11/02/using-youtube-api-to-embed-videos-on-your-web-site/](http://acuriousanimal.com/blog/2011/11/02/using-youtube-api-to-embed-videos-on-your-web-site/)

# blogger - 无法向博主添加赞框

> ID：14147425
> 
> 赞同：1
> 
> 时间：2013-01-03T21:19:42.920
> 
> 标签：blogger, facebook-social-plugins

我一直在尝试在我的博客上添加一个赞。我进入了 facebook 开发者网站并获得了 url 代码。当我在模板中添加一个小工具时，它告诉我小工具坏了。我错过了什么吗？这是我输入的代码

[http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fsunflowerfluff&width=292&height=590&show_faces=true&colorscheme=light&stream=true&border_color&header=true](http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fsunflowerfluff&width=292&height=590&show_faces=true&colorscheme=light&stream=true&border_color&header=true)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:02:57.917

当您按下**Get Code**按钮时，它会给您四个选项，即 HTML5、XFBML、IFrame 和 URL。

复制**IFRAME**代码。

转到博客，**添加小工具**并粘贴整个代码。

# java - 如何使用 cxf:proxy-service 公开 Web 服务

> ID：14147427
> 
> 赞同：1
> 
> 时间：2013-01-03T21:19:50.673
> 
> 标签：java, proxy, cxf, mule, callable

我正在尝试在 mule 中使用“cxf:proxy-service”公开一个简单的问候 Web 服务。下面给出的是我的流程。

```
<flow name="WS_In">
    <http:inbound-endpoint address="http://localhost:8080/HelloService" exchange-pattern="request-response">
        <cxf:proxy-service  wsdlLocation="classpath:HelloService.wsdl" namespace="http://example.org/HelloService"/>
    </http:inbound-endpoint>        
    <component>             
        <prototype-object class="com.example.ServiceProxy">
        </prototype-object>
    </component>

    <echo-component></echo-component>
    <logger level="INFO"        />
</flow> 
```

但它给了我如下错误：

```
2013-01-03 16:13:35,569 ERROR [main] construct.AbstractFlowConstruct (AbstractFlowConstruct.java:180) - Failed to stop service: WS_In
org.mule.api.lifecycle.LifecycleException: Lifecycle Manager 'WS_In.stage1' phase 'start' does not support phase 'dispose' 
```

我的 ServiceProxy 类如下

```
public class ServiceProxy implements Callable, Initialisable 
```

请帮助我了解我缺少路径的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:32:18.683

代替`<cxf:proxy-service>`元素中的属性“名称”，使用属性“服务”来指定服务名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:51:55.507

试试这个...

1.  从您的 WSDL 中获取服务名称并在 cxf:proxy-service 中使用它
2.  在组件中直接使用类。

……

```
<flow name="WS_In">
    <http:inbound-endpoint address="http://localhost:8080/HelloService" exchange-pattern="request-response">
        <cxf:proxy-service  wsdlLocation="classpath:HelloService.wsdl" namespace="http://example.org/HelloService" service="HelloService"/>
    </http:inbound-endpoint>        
    <component class="com.example.ServiceProxy" />
    <echo-component></echo-component>
    <logger level="INFO"        />
</flow> 
```

# vb.net - 有没有更好的方法来检索我的设置？

> ID：14147430
> 
> 赞同：4
> 
> 时间：2013-01-03T21:19:53.413
> 
> 标签：vb.net

我不是 IT 专业人士，如果我遗漏了一些明显的东西，我深表歉意。

在编写程序时，我添加了一个`SettingsIni`读取键和值的文本文件的类。我发现这种方法非常灵活，因为可以在不更改任何代码的情况下添加或更改设置，无论我将它附加到什么应用程序。这是主要代码。

```
Public Shared Sub Load()

    Using settingsReader As StreamReader = New StreamReader(System.AppDomain.CurrentDomain.BaseDirectory & "settings.ini")
        Do While settingsReader.Peek > -1
            Dim line As String = settingsReader.ReadLine
            Dim keysAndValues() As String = line.Split("="c)  
            settingsTable.Add(keysAndValues(0).Trim, keysAndValues(1).Trim)

            Loop
    End Using
End Sub

Public Shared Function GetValue(ByVal key As String)
    Dim value As String = settingsTable(key)
    Return value
End Function 
```

这允许您通过调用该`SettingsIni.GetValue`方法在代码中使用设置。

例如：

```
watcher = New FileSystemWatcher(SettingsIni.GetValue("inputDir"), "*" & SettingsIni.GetValue("extn")). 
```

我发现这使我的代码易于阅读。我的问题是在这种情况下的值`inputDir`和`extn`, 是徒手输入的，而不是由智能感知检查。我总是担心我可能会在应用程序的不常用分支中打错字并在测试期间错过它。是否有检索设置的最佳实践方法？或绕过这些未经检查的徒手输入值的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:24:31.127

如果它是一个数字，你可以做这三件事：

1.  检查是否为数字 - 使用 IsNumeric 函数
2.  检查它是否是整数 - 使用 Int 函数，例如： if Int(number)=number
3.  检查有效范围，例如：if number>=lowerbound 和 number<=upperbound

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:26:06.467

我假设您使用的是 VB.NET？如果是这样，“我的项目”下有方便的“设置”菜单。它提供了一种存储程序设置并通过“my.settings.YOURKEY”检索它们的方法。优点是，类型安全性在此级别上强制执行。此外，您还可以以几乎相同的方式存储“资源” - 但资源更适合字符串/图片等。但如果您想翻译您的程序，它们会特别好。

至于您当前的问题：将路径存储在设置中，这样您就不需要立即更改所有代码，但您可以使用您的系统并且永远不会拼错任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:31:07.600

这完全取决于你。您是检查引号内几乎所有内容的人，而不是智能感知。

但是您仍然使用`Try-Catch`块：

```
Try
  Dim value As String = settingsTable(key)
  Return value
Catch ex As Exception
  MsgBox(ex.ToString)
  Return ""
End Try 
```

因此，如果您尝试访问您可能输入错误的不存在设置，您将收到一个消息框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T22:46:28.367

您的代码示例的最佳做法是将常量用于可能的设置。

```
Class Settings
    Const inputDir as String = "inputDir"
    Const extn as String = "extn"
End Class

watcher = New FileSystemWatcher(SettingsIni.GetValue(Settings.inputDir), "*" & SettingsIni.GetValue(Settings.extn)) 
```

# python - 销毁 PyGTK 窗口时挂起时间过长

> ID：14147434
> 
> 赞同：0
> 
> 时间：2013-01-03T21:20:03.087
> 
> 标签：python, gtk

我的 PyGTK 应用程序创建了一个辅助弹出窗口，用于显示结果的预览。这个窗口相当精致，表格小部件嵌套三层，并由 HBox 填充，每个 HBox 在最低级别包含一个标签。标签的总数可以是数千个。我注意到，当我关闭此窗口时，GTK 变得非常忙于处理某些事情（使用 gobject.idle_add 添加的函数在 >10 秒内无法解析），并且我的应用程序的主窗口此时变得无响应。即使有这么多的小部件，我觉得关闭窗口需要这么长时间，甚至比设置和显示时间还要长，这让我感到很奇怪。有什么办法可以减轻这种情况吗？（我尝试在另一个线程中创建和显示窗口，但显然使用 GTK 这是一个禁忌）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:04:35.340

该窗口需要多长时间才能出现？显示时是否一次创建所有小部件？

您的问题可能是由于您的数千个小部件同时被破坏而引起的。或者通过对这些小部件的破坏执行长时间的操作。但是如果没有一些代码可以查看，可能有成千上万的原因，所以一个番茄说，使用分析器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:53:23.003

显然，这是由于我试图更改表格的背景颜色造成的——我正在设置每个 HBox（和标签）的背景颜色，这几乎是所有过度拆卸时间的原因。我所要做的就是设置包含表格的视口的背景颜色。

# c# - 用 .net “打开”一个 MSMQ

> ID：14147437
> 
> 赞同：4
> 
> 时间：2013-01-03T21:20:20.670
> 
> 标签：c#, .net, msmq

我有一个电话来获取失败的 MSMQ 的计数。

经过一番研究，我发现了这个问题：[Reading MSMQ message count with ruby](https://stackoverflow.com/questions/8914813/reading-msmq-message-count-with-ruby)

那里的答案表明，如果队列为空且已关闭，则您无法获得“性能指标”（包括消息计数）。

**所以我现在的问题是，如何使用.NET 和C# 以编程方式“打开”（即“取消关闭”）MSMQ？**

* * *

更新：如果它是相关的，这是我获取消息计数的代码：

```
private static int GetMessageCount(string queueName, string machine)
{
    MSMQManagement queue = new MSMQManagement();

    string formatName = @"DIRECT=OS:" + machine + @"\PRIVATE$\" + queueName;
    queue.Init(machine, null, formatName);
    return queue.MessageCount;
} 
```

错误发生在`queue.Init`。错误消息是：“队列未打开或可能不存在。”

此代码在另一个设置相同（但不为空）的队列上工作得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-14T19:25:53.570

要解决“队列未打开”错误，您可以使用标准 msmq 调用打开队列，并在稍稍超时的情况下查看消息。您必须捕获超时异常“请求的操作的超时已过期”。但在超时后，您可以使用 MSMQManagement 对象查询队列，即使它有 0 条消息：

```
 MSMQ.MSMQApplication q = new MSMQ.MSMQApplication();
        object obj = q.ActiveQueues;
        foreach (object oFormat in (object[])q.ActiveQueues)
        {
            object oMissing = Type.Missing;
            object oMachine = System.Environment.MachineName;
            MSMQ.MSMQManagement qMgmt = new MSMQ.MSMQManagement();
            object oFormatName = oFormat; // oFormat is read only and we need to use ref
            qMgmt.Init(ref oMachine, ref oMissing, ref oFormatName);
            outPlace.Text += string.Format("{0} has {1} messages queued \n", oFormatName.ToString(), qMgmt.MessageCount.ToString());
        }
        foreach (object oFormat in (object[])q.PrivateQueues)
        {
            object oMissing = Type.Missing;
            object oMachine = System.Environment.MachineName;
            MSMQ.MSMQManagement qMgmt = new MSMQ.MSMQManagement();
            queue = new MessageQueue(oFormat.ToString());
            object oFormatName = queue.FormatName; // oFormat is read only and we need to use ref
            TimeSpan timeout=new TimeSpan(2);
           try
           {
                Message msg = queue.Peek(timeout);
            }
            catch
            {// being lazy and catching everything for this example
            }
            qMgmt.Init(ref oMachine, ref oMissing, ref oFormatName);
              outPlace.Text += string.Format("{0}  {1} {2}\n", oFormat.ToString(), queue.FormatName.ToString(), qMgmt.MessageCount.ToString());
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:05:24.053

获取队列中消息数量的另一种方法可能是使用 MessageQueue 类的 GetAllMessages 方法。它返回一个 Message[] ，它是队列中所有消息的静态快照。之后，您可以读取 Length 参数以获取消息数。

这是 msdn 链接：http: [//msdn.microsoft.com/en-gb/library/system.messaging.messagequeue.getallmessages.aspx](http://msdn.microsoft.com/en-gb/library/system.messaging.messagequeue.getallmessages.aspx)

# selenium - 美汤也能打网页事件吗？

> ID：14147441
> 
> 赞同：1
> 
> 时间：2013-01-03T21:20:36.997
> 
> 标签：selenium, python-2.7, beautifulsoup, selenium-webdriver

Beautiful Soup 是一个 Python 库，用于从 HTML 和 XML 文件中提取数据。我将使用它来提取网页数据，但我没有找到任何方法来单击按钮，`anchor label`这些按钮在我的情况下用于页面导航。所以为此我必须使用任何其他或 `beautiful soup`具有我不知道的能力。

请给我建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:13:15.243

要回答您的标签/评论，是的，您可以将它们一起使用（Selenium 和 BeautifulSoup），不，您不能直接使用 BeautifulSoup 来执行事件（单击等）。尽管我自己从未在相同的情况下将它们一起使用，但假设情况可能涉及使用 Selenium 通过特定路径导航到目标页面（即`click()`这些选项，然后`click()`是按钮到下一页），然后使用 BeautifulSoup阅读`driver.page_source`（`driver`您为“驱动”浏览器而创建的 Selenium 驱动程序在哪里）。由于`driver.page_source`是页面的 HTML，因此您可以按照习惯使用 BeautifulSoup，解析出您需要的任何信息。

简单的例子：

```
from bs4 import BeautifulSoup
from selenium import webdriver

# Create your driver
driver = webdriver.Firefox()

# Get a page
driver.get('http://news.ycombinator.com')

# Feed the source to BeautifulSoup
soup = BeautifulSoup(driver.page_source)

print soup.title  # <title>Hacker News</title> 
```

主要思想是，无论何时您需要阅读页面的源代码，您都可以传递`driver.page_source`到`BeautifulSoup`以阅读您想要的任何内容。

# asp.net-mvc-3 - JQGrid 编辑链接的 MVC3 AD 基于角色的授权

> ID：14147443
> 
> 赞同：1
> 
> 时间：2013-01-03T21:20:48.573
> 
> 标签：asp.net-mvc-3, jqgrid, active-directory

我对 JQgrid 和 mvc3 很陌生。我有一个非常基本的带有编辑功能的 jQgrid。

我想在 JqGrid 加载时为某些用户（由 AD 验证）禁用 jqgrid.navgrid 中的编辑链接，并为具有不同角色的其他用户启用它。

我可以限制用户编辑网格数据，但这还不够。我希望用户甚至看不到 JqGrid 中的可编辑链接。

这是我在视图中的 JqGrid（index.cshtml）：

```
 jQuery(document).ready(function () {
             jQuery('#list').jqGrid({
             colNames: ['id', 'CountryCode','Node','EligFactor'],
             colModel: [
                       { name: 'id', index: 'id', width: 150, height: 100, align: 'left' },
                       { name: 'CountryCode', index: 'CountryCode', width: 150, align: 'left' },
                       {name: 'Node', index: 'Node', width: 150, height: 100, align: 'left' },
                       {name: 'EligFactor', index: 'EligFactor', width: 150, height: 100, align: 'left', editable: true, edittype: 'text' }
                       ],
            url: '@Url.Action("DynamicGridData")',
            datatype: 'json',
            mtype: 'POST',
            pager: jQuery('#pager'),
            rowNum: 10,
            rowList: [5, 10, 15, 20, 25],
            sortname: 'Id',
            sortorder: "asc",
            viewrecords: true,
            imgpath: '',
            caption: 'Eligibility Factor Grid',
            imgpath: '/Content/images',
            height: '210px'

             }).navGrid('#pager', { edit: true, add: false, del: false, search: false, refresh: true },
                 { url: '@Url.Action("EditRecord")', closeAfterEdit: true },
                 {},

                 {});
         }); 
```

2，这是用户尝试编辑网格数据时使用的控制器中的编辑方法：

```
 [Authorize(Roles=@"MyDomain\SecurityLists\User1")]
        public ActionResult EditRecord(int id, string eligFactor)
        {
            bool success = false;
            var context = new EligibilityFactorDataContext();
            EligibilityControl eg = context.EligibilityControls.Single(p => p.id == id);

            eg.EligFactor = Convert.ToSingle(eligFactor);

            try
            {
                context.SubmitChanges();
                success = true;
                return Json(success);
            }
            catch (Exception e)
            {
                success = false;
                return Json(success);
                            }

        } 
```

有人可以吗？帮助我实现这一目标。非常感激 ！

```
var context = new EligibilityFactorDataContext();

            var isAuth = true;
            int pageIndex = Convert.ToInt32(page) - 1;
            int pageSize = rows;
            int totalRecords = context.EligibilityControls.Count();
            int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);
            var eligibilitycontrols = context.EligibilityControls.OrderBy(sidx + " " + sord).Skip(pageIndex * pageSize).Take(pageSize);
            var jsonData = new
            {
              total = totalPages,
              page =   page,
              records = totalRecords,
              userdata = isAuth,
              rows = (
                      from eligibilitycontrol in eligibilitycontrols
                      select new
                      {
                        id = eligibilitycontrol.id,
                        cell = new string[]  {
                                               eligibilitycontrol.id.ToString() ,
                                               eligibilitycontrol.CountryCode, 
                                               eligibilitycontrol.Node.ToString(), 
                                              Convert.ToSingle(eligibilitycontrol.EligFactor).ToString()}

                                             }).ToArray()
             };
          return Json(jsonData);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:32:06.593

添加检查用户是否已通过身份验证，如果用户已通过身份验证，则将视图模型中的布尔值传递给您的视图，并根据此修改导航寻呼机。

前任

```
var userIsAuth = '@Model.UserIsAuth' == 'true';
jQuery('#list').jqGrid().navGrid('#pager', { edit: (userIsAuth ? true : false), add: false, del: false, search: false, refresh: true },
      { url: '@Url.Action("EditRecord")', closeAfterEdit: true },
      {},    
      {}); 
```

所以在控制器中你需要以类似的方式定义 UserData Ex

```
 userdata = new {ExampleName = ExampleValue}, 
```

然后在你的 loadComplete: function()

```
var myPassedUserData = $(this).getGridParam('userData');
var ExampleVariable = myPassedUserData.ExampleName 
```

编辑 - 使用三元运算来简化代码。可能该`url:`属性也可以通过 userIsAuth 布尔值禁用。

# xcode - 确定给定年份阵亡将士纪念日的 NSDate

> ID：14147450
> 
> 赞同：2
> 
> 时间：2013-01-03T21:20:58.860
> 
> 标签：xcode, macos, cocoa, nsdate, nsdatecomponents

有没有更好的方法来确定给定年份的阵亡将士纪念日（5 月的最后一个星期一）的 NSDate？

```
NSInteger aGivenYear = 2013 ;

NSCalendar* calendar = [NSCalendar currentCalendar] ;
NSDateComponents* firstMondayInJuneComponents = [NSDateComponents new] ;
firstMondayInJuneComponents.month = 6 ;
// Thanks, Martin R., for pointing out that `weekOfMonth` is wrong for returning the first Monday in June.
firstMondayInJuneComponents.weekOfMonth = 1 ;
firstMondayInJuneComponents.weekday = 2 ; //Monday
firstMondayInJuneComponents.year = aGivenYear ;
NSDate* firstMondayInJune = [calendar dateFromComponents:firstMondayInJuneComponents] ;

NSDateComponents* subtractAWeekComponents = [NSDateComponents new] ;
subtractAWeekComponents.week = 0 ;
NSDate* memorialDay = [calendar dateByAddingComponents:subtractAWeekComponents toDate:firstMondayInJune options:0] ; 
```

*编辑*

我现在看到，`firstMondayInJune`在上面的例子中并不适用于所有年份。它返回 2012 年的 5 月 28 日。

谢谢，[马丁](https://stackoverflow.com/users/1187415/martin-r)R。`weekdayOrdinal`正是我所希望的，它返回了阵亡将士纪念日，代码行数减少了 3 行：

```
NSInteger aGivenYear = 2013 ;

NSDateComponents* memorialDayComponents = [NSDateComponents new] ;
memorialDayComponents.year = aGivenYear ;
memorialDayComponents.month = 5 ;
memorialDayComponents.weekday = 2 ; //Monday
memorialDayComponents.weekdayOrdinal = -1 ; //The last instance of the specified weekday in the specified month & year.
NSDate* memorialDay = [calendar dateFromComponents:memorialDayComponents] ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:05:32.353

要获得一个月中的第一个星期一，请设置`weekdayOrdinal = 1`而不是`weekOfMonth = 1`：

```
NSInteger aGivenYear = 2012 ;

NSCalendar* calendar = [NSCalendar currentCalendar] ;
NSDateComponents* firstMondayInJuneComponents = [NSDateComponents new] ;
firstMondayInJuneComponents.month = 6 ;
firstMondayInJuneComponents.weekdayOrdinal = 1 ;
firstMondayInJuneComponents.weekday = 2 ; //Monday
firstMondayInJuneComponents.year = aGivenYear ;
NSDate* firstMondayInJune = [calendar dateFromComponents:firstMondayInJuneComponents] ;
// --> 2012-06-04

NSDateComponents* subtractAWeekComponents = [NSDateComponents new] ;
subtractAWeekComponents.week = -1 ;
NSDate* memorialDay = [calendar dateByAddingComponents:subtractAWeekComponents toDate:firstMondayInJune options:0] ;
// --> 2012-05-28 
```

从`NSDateComponents`文档中：

> 工作日序数单位表示工作日在下一个较大日历单位（例如月份）中的位置。例如，***2是该月******第二个***星期五的工作日顺序单位。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T22:02:07.577

我可能会做的是获取每月第一天的星期几（可能使用 NSDateFormatter），然后计算第一个星期一/星期二/星期四/该月的任何一天的日期，然后添加 (week# - 1 ) x 7 到该日期以获得第 N 个星期一/每月的任何时间。

对于阵亡将士纪念日，您首先要检查第 5 个星期一是否还在 5 月，如果不是则使用第 4 个星期一。（或者登记入住，知道如果阵亡将士纪念日是 31 日，那么第一个星期一必须是 3 日或更早。）

# jquery - Jquery - 突出显示 div / 使页面的其余部分变灰

> ID：14147451
> 
> 赞同：3
> 
> 时间：2013-01-03T21:20:59.283
> 
> 标签：jquery, fadeout

我正在尝试突出显示页面的其余部分的 div / 灰色。我的代码是：

```
jQuery(document).ready(function ($) {
$('.entry-content').mouseover(function(e) {
$('.expose').mouseover(function(e){
    $(this).css('z-index','99999');
    $('#overlay').fadeIn(300);
});
});

$('.entry-content').mouseleave(function(e) {
$('.expose').mouseleave(function(e){
    $('#overlay').fadeOut(0, function(){
        $('.expose').css('z-index','1');
});});});}); 
```

HTML看起来像

```
<div id="overlay">
<div class="entry-content">
  <div class="expose">something</div>
  <div class="expose">something</div>
  <div class="expose">something</div>
</div>

#overlay {
background:rgba(0,0,0,0.3);
display:none;
width:100%; height:100%;
position:absolute; top:0; left:0; z-index:99998;
} 
```

我所追求的是只要用户将鼠标悬停在 entry-content div 上，将页面保持为灰色并突出显示他悬停的 div。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T21:23:40.847

A`z-index`是相对于堆栈上下文，而不是相对于文档。如果您希望`expose`元素出现在叠加层上，它们必须是同级元素，或者您必须`.expose`使用显式定位`position:*`。

通常，元素必须是同一堆叠上下文的一部分，才能比较它们的 z-index 值。[您可以在此处](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)了解有关堆叠上下文的更多信息。

一些额外的点：

1.  您应该使覆盖对指针事件透明。您可以使用`pointer-events:none;`
2.  `.expose`当容器被鼠标悬停时，您不需要绑定到。将处理程序与处理程序并行绑定以显示/隐藏覆盖

这是更正后的代码。[你可以在这里](http://jsfiddle.net/sMw5D/)看到一个工作演示：

**CSS：**

```
#overlay {
    background:rgba(0,0,0,0.3);
    display:none;
    width:100%;
    height:100%;
    position:absolute;
    top:0;
    left:0;
    z-index:99998;
    pointer-events:none
}
.expose{
    background-color:red;
    position:relative;
} 
```

**JS：**

```
$('.entry-content').hover(function() {
    $('#overlay').fadeIn(300);
}, function() {
    $('#overlay').fadeOut(300);
});

$('.expose').hover(function(e) {
    $(this).css('z-index', '99999');
},function(e) {
    $(this).css('z-index', '1');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:47:48.760

您可以在没有叠加层并使用 CSS3 的情况下模拟此行为

[示例 jsfiddle](http://jsfiddle.net/QN7pM/4/)

```
<div class="wrapper">
    <div class="entry-content">
      <div class="expose">something</div>
      <div class="expose">something</div>
      <div class="expose">something</div>
    </div>
</div>​ 
```

```
html, body, .wrapper {
    padding:0;
    margin:0;
    height:100%;
    width:100%;
}

.wrapper {
    -webkit-transition:all 300ms;
    -moz-transition:all 300ms;
    -ms-transition:all 300ms;
    -o-transition:all 300ms;
    transition:all 300ms;
}

.wrapper:hover {
    background:rgba(0,0,0,.3);
}

.wrapper:hover .expose {
    background:#ddd;
}

.entry-content {
    padding:6px;
}

.expose {
    margin-bottom:6px;
    padding:12px;
    border-radius:3px;
    background:#eee;
}

.expose:hover {
    background:#fff!important;
}
​ 
```

# java - Orika 映射器异常

> ID：14147453
> 
> 赞同：5
> 
> 时间：2013-01-03T21:21:14.757
> 
> 标签：java, exception, orika

我使用 Orika 映射器将 Hibernate 实体映射到 Web 服务实体。它工作完美，但有时会引发以下异常。我不知道如何解决它。我用tomcat。

```
ma.glasnost.orika.MappingException: ma.glasnost.orika.impl.generator.CompilerStrategy$SourceCodeGenerationException: class com.example.hibernate.Product$$EnhancerByCGLIB$$b9465553 is not accessible
    at ma.glasnost.orika.impl.generator.MapperGenerator.build(MapperGenerator.java:95)
    at ma.glasnost.orika.impl.DefaultMapperFactory.buildMapper(DefaultMapperFactory.java:1046)
    at ma.glasnost.orika.impl.DefaultMapperFactory.registerClassMap(DefaultMapperFactory.java:880)
    at com.example.mapping.EntityMapper.map(EntityMapper.java:50)
    at com.example.mapping.EntityMapper.map(EntityMapper.java:69)
    at com.example.ws.helpers.store.ProductHelper.getAll(ProductHelper.java:53)
    at com.example.ws.StoreWebService.getProducts(StoreWebService.java:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.xml.ws.api.server.InstanceResolver$1.invoke(InstanceResolver.java:246)
    at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:146)
    at com.sun.xml.ws.server.sei.EndpointMethodHandler.invoke(EndpointMethodHandler.java:257)
    at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:95)
    at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:629)
    at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:588)
    at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:573)
    at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:470)
    at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:295)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:515)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:285)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:143)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:155)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:189)
    at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:76)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1571)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: ma.glasnost.orika.impl.generator.CompilerStrategy$SourceCodeGenerationException: class com.example.hibernate.Product$$EnhancerByCGLIB$$b9465553 is not accessible
    at ma.glasnost.orika.impl.generator.JavassistCompilerStrategy.assureTypeIsAccessible(JavassistCompilerStrategy.java:178)
    at ma.glasnost.orika.impl.generator.MapperGenerator.build(MapperGenerator.java:55)
    ... 43 more
Caused by: orika_shaded.javassist.NotFoundException: com.example.hibernate.Product$$EnhancerByCGLIB$$b9465553
    at orika_shaded.javassist.ClassPool.get(ClassPool.java:450)
    at ma.glasnost.orika.impl.generator.JavassistCompilerStrategy.assureTypeIsAccessible(JavassistCompilerStrategy.java:176)
    ... 44 more 
```

# magento - Magento中的自定义顶级类别登录页面

> ID：14147456
> 
> 赞同：0
> 
> 时间：2013-01-03T21:21:21.730
> 
> 标签：magento, magento-1.7

在我们的 magento 站点中，我们有商店的根类别（这只是“默认类别”）。在此之下，我们设置了一些顶级类别（例如，我们称这些为“电子产品”和“家具”），以及一堆子类别。

例如，我们的类别结构可能是

*   电子产品
    *   DVD播放器
    *   MP3 播放器
    *   电脑
*   家具
    *   3片
    *   扶手椅
    *   表
    *   沙发床

我设法编辑了“子类别”（例如“dvd 播放器”）的布局/模板，以便我们显示自定义产品列表视图。

现在我们要做的是，对于顶级类别（根类别下的第一个类别），显示所有子类别及其相关缩略图的自定义网格，而不是产品列表！

我如何为那些顶级类别分配完全不同的模板？

如果有人可以提供有关如何执行此操作以及我们需要采取的步骤的见解（我应该对代码本身没问题，它只是如何实现它，例如自定义模块和模板）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:28:17.307

听起来您想要一个可以应用于顶级类别的自定义页面布局。页面布局本质上是一个命名的页面模板，您可以在下拉列表中选择它以应用于产品或类别。

要定义布局，请将其添加到`global/page/layouts`模块的节点中`config.xml`，如下所示：

> ```
> <global>
>     <page>
>         <layouts>
>             <my_custom_layout_name translate="label">
>                 <label>My Custom Layout</label>
>                 <template>page/my-custom-layout.phtml</template>
>                 <layout_handle>my_custom_layout</layout_handle>
>             </my_custom_layout_name>
>         <layouts>
>     <page>
> <global> 
> ```

然后，您只需要`page/my-custom-layout.phtml`在应用程序/设计模板回退链中的某处创建模板文件。

`layout_handle`节点指定将添加到使用此布局的任何页面的新布局句柄的名称，允许您在具有节点的布局 XML 文件中定位它`<my_custom_layout>`。

`.phtml`您引用的文件将是整个 HTML 页面的模板，因此它应该包含`<html>`、`<head>`、`<body>`标记以及您在默认`page/*.phtml`模板之一（1column、空、2columns-left 等）中可以找到的任何其他内容。在此和目标布局 XML 之间，您可以从头开始完全自定义此页面。

最后一步是在编辑目录->管理类别中的每个父类别时，在“自定义设计”选项卡下选择这个新布局。如果您没有在下拉列表中看到您的布局，请确保您的 XML 配置正确（请参阅`app/code/core/Mage/Page/etc/config.xml`参考资料）并刷新您的缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:13:01.837

一种方法是创建一个新模板，该模板将作为您的类别网格，然后将该模板作为您选择的类别的静态块调用，您将通过 CMS 进行选择。见下文。

**创建类别网格模板**

1.  导航到“app/design/frontend/default/TEMPLATE/catalog/navigation”</li>
2.  在这个路径中，我们将创建一个文件调用 category_listing.phtml
3.  该文件将包含以下代码：

    ```
    <?php $_maincategorylisting=$this->getCurrentCategory()?>
    <?php $_categories=$this->getCurrentChildCategories()?>
    <h2><?php echo $this->__('Browse Products') ?> </h2>
    <div class="subcat-listing">
    <ul class="subcat-products">
    <? foreach ($_categories as $_category):?>
    <? if($_category->getIsActive()): ?>
    <?php $cur_category=Mage::getModel('catalog/category')->load($_category->getId()); ?>
    <?php $layer = Mage::getSingleton('catalog/layer'); ?>
    <?php $layer->setCurrentCategory($cur_category); ?>
    <? if($_imageUrl=$this->getCurrentCategory()->getImageUrl()):?>
    <li> <a href="<?php echo $this->getCategoryUrl($_category) ?>" title="<?php echo $this->htmlEscape($_category->getName()) ?>">
    <img src="<?php echo $_imageUrl ?>" width="auto" alt="<?php echo $this->htmlEscape($_category->getName()) ?>" />
    </a>
    <h3><?php echo $this->htmlEscape($_category->getName()) ?></h3>
    <? if($_description=$this->getCurrentCategory()->getDescription()):?>
    <p class="category-description">
    <?php echo $_description ?></</p>
    <?php endif; ?>
    <? endif; ?>
    <? endif; ?>
    <?php endforeach; ?>
    </ul>
    </div>
    <?php $layer->setCurrentCategory($_maincategorylisting); ?> 
    ```

**在静态块中调用此模板**

1.  转到菜单“CMS/静态块”并创建新块。

2.  将此添加到 CMS 块的内容部分：
    `{{block type="catalog/navigation" name="catalog.categories" template="catalog/navigation/category_listing.phtml"}}`. 然后保存块。

**在类别页面上使用此静态块。**

1.  转到菜单目录/管理类别

2.  现在我们需要找到要在其上显示新网格的类别

3.  选择您想要的类别，并在选项卡“显示设置”中设置以下信息：

    显示模式：静态块 CMS 块：类别列表（我们之前创建的块）是锚：否

4.  单击保存。请记住，在“自定义设计”选项卡中，您可能需要选择您的模板。还要记住，该类别有很多分配给它的图像。

# ios - 从情节提要更改条形按钮项的文本颜色

> ID：14147459
> 
> 赞同：0
> 
> 时间：2013-01-03T21:21:34.583
> 
> 标签：ios, ios6

我已将情节提要中的条形按钮项拖放到情节提要创建的导航栏上。
我想知道如何从情节提要中更改条形按钮项的文本颜色？
我尝试为条形按钮项目创建一个出口然后尝试：
`[myBackButton.titleLabel.textColor = [UIColor blackColor]];`

甚至尝试过 barbuttonItem ：

```
[myButton setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; 
```

但我收到一个错误。我尝试更改背景颜色更改的色调，但文本颜色仍然是白色如何将文本颜色更改为黑色？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:25:47.603

[您可以使用Attributes](http://developer.apple.com/library/ios/documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40006893-CH3-SW43)更改文本颜色。例如，

```
NSDictionary *attributes = @{UITextAttributeTextColor : [UIColor redcolor]};
[myButton setTitleTextAttributes:attributes
                      forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T06:19:00.363

我认为这会有所帮助

```
[[UIBarButtonItem appearance] setTintColor:[UIColor yellowColor]]; 
```

# c# - 使用 FormView 更新带有 Telerik RadPanelBar 的 ObjectDataSource 时的空参数

> ID：14147464
> 
> 赞同：0
> 
> 时间：2013-01-03T21:21:52.650
> 
> 标签：c#, asp.net, linq-to-sql, objectdatasource

问题：当通过 FormView 调用更新方法时，ObjectDataSource 正在发送（基本上）空数据对象。唯一具有值的字段是 FormView 的 DataKeyNames 属性中列出的字段。

注意：我在 FormView 中使用 Telerik RadPanelBars。

当我打破 FormView 的 ItemUpdating 事件时，我看到：

*   Keys 列表有两个项目，就像 DataKeyNames 属性一样。这看起来不错。
*   OldValues 和 NewValues 字典为空。他们什么都没有。不是具有空值的字段名称 - 它们实际上是具有零项的空列表。

当我们到达 ObjectDataSource 的 Updating 事件时，我们看到一个 ProjectTask 对象只有两个值（与 DataKeyNames 字段匹配）——所有其他字段都为空。

这是我正在使用的更新方法：

```
 public static void UpdateProjectTask(ProjectTask projectTask)
    {
        var dc = new PrbDataContext();
        dc.ProjectTasks.Attach(projectTask, true);
        dc.SubmitChanges();
    } 
```

这是 ObjectDataSource 和 FormView 的标记：

```
 <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" DataObjectTypeName="ProjectBilling.Business.Data.ProjectTask"
        SelectMethod="GetProjectTask" TypeName="ProjectBilling.Business.Data.ProjectTask" UpdateMethod="UpdateProjectTask" OldValuesParameterFormatString="original_{0}" OnUpdating="ObjectDataSource1_Updating">
        <SelectParameters>
            <asp:Parameter DefaultValue="0" Name="projectTaskId" Type="Int32" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <asp:FormView ID="FormView1" runat="server" DataSourceID="ObjectDataSource1" DefaultMode="Edit"
        DataKeyNames="Id,Timestamp" OnItemUpdated="FormView1_ItemUpdated" Width="600px"> 
```

**重要提示：**我正在使用 Telerik 控件，它们需要一个奇怪的绑定。

```
 DataBinder.Eval(FormView1.DataItem, "TaskTemplateId") 
```

我也尝试了这种方法，但没有产生更好的结果：

```
 ((ProjectBilling.Business.Data.ProjectTask)(Container.DataItem ?? new ProjectBilling.Business.Data.ProjectTask())).BillNarrative 
```

控件正在检索数据就好了；我只是无法更新它。

先生们，一如既往地感谢您的帮助。

这家伙似乎遇到了类似的问题：[Can't get FormView values from ObjectDataSource on update](https://stackoverflow.com/questions/3145378/cant-get-formview-values-from-objectdatasource-on-update)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:33:40.607

Telerik 的 RadPanelBar 不支持标记中的数据绑定。这就是导致 empy OldValues 和 NewValues 集合的原因。

注意：把这个问题留在这里是因为我花了很长时间才弄清楚这一点，而且互联网上几乎没有关于它的信息。Telerik 支持最终不得不承认数据绑定在 RadPanelBar 中不起作用的事实。

# android - 切换活动后如何终止 Toast 对话框

> ID：14147472
> 
> 赞同：0
> 
> 时间：2013-01-03T21:22:12.033
> 
> 标签：android, toast

我在整个应用程序中经常使用 Toast 对话框。但是，我注意到在切换活动后，对话框将继续保持可见，直到其计时器用完。

```
Toast.makeText( getApplicationContext(), R.string.toast_need_bt, Toast.LENGTH_LONG ).show(); 
```

我使用`Toast.LENGTH_LONG`是因为消息很长，如果用户决定阅读它，则需要更长的时间选项。然而，一旦用户使用了应用程序一次或两次，他们将不需要阅读 toast 消息，并且他们会快速地从一个活动转移到另一个活动。但是，即使从活动切换到活动，这些 toast 对话框也会保留在屏幕上。

如果当前 Activity 终止，有没有办法结束所有 Toast 对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:26:16.627

完成/离开活动时调用`cancel()`toast 对象 这是[Toast文档的链接](http://developer.android.com/reference/android/widget/Toast.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:25:09.197

`Toast.makeText`返回一个`Toast`对象。调用`cancel()`此对象以取消它。查看此帖子以获取有关此主题的更多答案[如何取消 Toast](https://stackoverflow.com/questions/4395062/how-to-cancel-toast)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T21:29:54.127

尽管已经有一些关于如何使用 .cancel() 方法的答案，但我想为这个用例添加一些选项：

1) 在此处创建布局通知[Cyril Mottier 的文章](http://android.cyrilmottier.com/?p=773)

2) 只显示前 X 次吐司

3) 创建一个带有“显示通知”复选框的对话框，以允许用户选择退出。

# bash - 用于自动化 SonicWall 防火墙 SSH 会话的 Shell 脚本不起作用

> ID：14147473
> 
> 赞同：2
> 
> 时间：2013-01-03T21:22:17.553
> 
> 标签：bash, shell, ssh, expect, heredoc

我正在尝试编写一个 shell 脚本 (Bash) 以登录到 SonicWall 防火墙设备并发出命令来执行设备规则集的自动备份。我更喜欢在 Bash 中执行此操作，但我会接受 python、perl、except 或 applescript 解决方案。如果不能在 bash 中完成，请提及。

问题：

1.) 防火墙上的 SSH 服务器是自定义的，用户名和密码必须在发出后指定

```
$ ssh server.com 
```

所以无论你发出什么用户名，例如

```
$ ssh admin@server.com 
```

SSH 服务器在之后仍然显示用户名和密码框

2.) SSH 服务器很小，我不能使用公钥

我尝试使用here-document，但它不起作用，并导致立即“连接被远程主机关闭”。

我需要执行的命令采用以下形式：

```
export preferences ftp "ftp.server.com" "user1" "mypassword" "output.exp" 
```

连接给了我这个：

```
$ ssh admin@server.com

Copyright (c) 2010 SonicWALL, Inc. 

User: 
```

发出用户名后，它会显示密码提示：

```
User:user1
Password: 
```

我尝试了here-document无济于事。

```
$ ssh server <<+
user1
mypassword
export preferences ftp "ftp.server.com" "user1" "mypassword" "output.exp"
exit
+ 
Pseudo-terminal will not be allocated because stdin is not a terminal.
Connection to 10.1.1.1 closed by remote host. 
```

我也尝试使用 echo 来输入命令，但这也不起作用。

手动输入命令就可以了。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:43:12.607

正如其他人所建议的那样，`expect`这可能是您想要在这里使用的。

这是一个简短的示例，说明如何使用它`bash`来帮助您入门：

```
login=root
IP=127.0.01
password=helloworld
# +whatever variables you need to use

# Run the expect script from bash
expect_sh=$(expect -c "
spawn ssh $login@$IP
expect \"password:\"
send \"$password\r\"
expect \"#\"
send \"cd $dest_dir\r\"
expect \"#\"
send \"chmod +x $server_side_script $other_script\r\"
expect \"#\"
send \"./$device_side_script\r\"
expect \"#\"
send \"cat results_file\r\" 
expect \"#\"
send \"exit\r\"
")

# Output or do something with the results
echo "$expect_sh" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:28:43.237

您可以使用原始的 ssh 会话自动化`expect`，这里有一篇很好的文章详细讨论它：http: [//solar1.net/drupal/automating%20SSH%20with%20expect](http://solar1.net/drupal/automating%20SSH%20with%20expect)或 Python 模块`pexepect`：[http://linux.byexamples。 com/archives/346/python-how-to-access-ssh-with-pexpect/](http://linux.byexamples.com/archives/346/python-how-to-access-ssh-with-pexpect/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:30:13.840

我不是 BASH 专家，但我不得不做一些交互式密码提示给我带来问题的事情。

基本上，您的脚本需要等待被要求输入登录凭据，并在提示登录时传递它们，一旦登录，您就可以发出命令。

我建议查看产生“预期”会话。基本上在您的脚本中，您使用的期望基本上是说“我希望看到密码：在响应中，当我这样做时，我需要传递以下数据”。

这是帮助解释它的维基页面[http://en.wikipedia.org/wiki/Expect](http://en.wikipedia.org/wiki/Expect)

如果你在周围搜索一下，你会发现很多帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-02T02:23:46.937

那对我不起作用。

我必须在启动时将变量传递给脚本。

示例启动脚本 login2.sh，带有三个参数：

-bash-4.1$ ./login2.sh Jan2**** HIE_SUPER 10.244.112.182

# java - 重构序列化对象

> ID：14147475
> 
> 赞同：1
> 
> 时间：2013-01-03T21:22:31.723
> 
> 标签：java, deserialization

我试图重建一个序列化对象并从中访问数据。

这就是我发送对象的方式。

```
 Socket socket = new Socket ("localhost", port);
    ObjectOutputStream out = new ObjectOutputStream (socket.getOutputStream());
    Tester t = new Tester("test");
    out.writeObject(t);
    out.flush(); 
```

这就是我收到它的方式

// 这就是服务器的构建方式

```
 private ServerSocket server;
    server = new ServerSocket(port);
    newsocket = server.accept(); 
```

// 这就是我实际获取对象的方式

```
 ObjectInputStream input = new ObjectInputStream(newSocket.getInputStream());
    Tester obj = (Tester) input.readObject();
    System.out.println(obj.getText()); 
```

但是我只得到以下输出

```
[Ljava.lang.StackTraceElement;@237360be 
```

我希望得到的是我在对象“Test”中发送的字符串。有什么我做错了吗？

* * *

我的 Tester 类看起来像这样

```
public class Tester implements Serializable {
    private String theMessage = "";

    public Tester(String message) {
        theMessage = message;
    }

    public String getText() {
         return theMessage;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:27:40.467

试试这个

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream();
Tester tester0 = new Tester("test")
oos.writeObject(tester0);
oos.close();
System.out.println(tester0.getText());

ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(baos.toByteArray()));
Tester tester = (Tester) ois.readObject();
System.out.println(tester.getText()); 
```

如果这不起作用，您的序列化代码中可能存在错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:05:32.047

看来，您已将套接字侦听器的代码块包装到`try...catch`语句中，其中您`catch`以不正确的方式部分使用了某些记录器：它打印堆栈跟踪而不是打印错误原因。这是最可能的解释，为什么您会收到`[Ljava.lang.StackTraceElement;...`.

实际上，您的套接字侦听器代码捕获了一些`Exception`，您必须以适当的方式打印它们。

# javascript - 调试 Closure-compiler 编译的 Javascript

> ID：14147479
> 
> 赞同：4
> 
> 时间：2013-01-03T21:22:57.630
> 
> 标签：javascript, dojo, google-closure-compiler

我有一个复杂的 dojo 应用程序，可以在未编译的情况下正常工作，但是在使用 Google 的[Closure Compiler 编译](https://developers.google.com/closure/compiler/)后，我在某些行为上发现了细微的差异。

事实上，调试起来非常困难，而且我无法找到任何关于使用 Google Closure 编译和未编译的 Javascript 之间可能存在的功能差异的信息。

谁能指出我已知差异的方向，或分享任何类似的经验以及从哪里开始寻找的一些想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T21:46:09.247

# 通用闭包编译器调试技巧

*   使用`VERBOSE`警告级别。这将打开所有检查。
*   使用`debug`旗帜。它使重命名的符号长得可笑，但它们的命名方式使您可以找到原始符号。如果代码使用该`debug`标志但不能没有它，那几乎肯定是一个重命名问题。
*   绝对使用`formatting=PRETTY_PRINT`. 没有它，调试压缩代码会很痛苦。
*   使用[源映射](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)
*   使用 禁用基于类型的优化`--use_types_for_optimization false`。不正确的类型注释会导致编译器做出无效的假设。

*更新：从 20150315 编译器版本开始，默认启用基于类型的优化。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:55:05.563

在乍得的回答的帮助下，我发现了一个错误，我的工作代码如下：

```
a = [b, b = a][0]; // swap variable values 
```

被编译为：

```
a = b; 
```

它可能会在以后的版本中得到修复，因为使用在线 Closure 编译器应用程序进行的测试不会显示相同的错误。通过不试图变得聪明来修复它，并在交换值时使用第三个变量来保存旧值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:00:28.280

我在 dojo 1.3（关闭前）中看到的几个问题：

*   如果您有一个名为 class 的类属性，则需要引用它。所以 {class: "css"} 需要写成 {"class": "css"} 这包括任何小部件字段。
*   确保删除任何调试器语句。

# c# - 使用 OLEDB 导入 Excel 不引入折叠组

> ID：14147482
> 
> 赞同：2
> 
> 时间：2013-01-03T21:23:14.963
> 
> 标签：c#, excel

我创建了一个程序来挖掘和导入来自大约 75 个电子表格的数据到一个 oracle 表中。我能够连接、遍历工作表并抓取看起来不错的单元格和行。问题是，如果 Excel 工作表是在分组行折叠的情况下保存的，它会跳过这些行。如果有扩展属性或 reg 设置允许我在进入时扩展组，我在任何地方都找不到？不知道如何绕过折叠组（未合并单元格，我可以毫无问题地处理这些组）。

代码位：

```
//Starting where I iterate through a particular sheet

var connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0; data source={0};    Extended Properties=\"Excel 12.0;HDR=NO;IMEX=1;ReadOnly=0\"", fileName);
OleDbConnection objConn = new OleDbConnection(connectionString);

try
{   
objConn.Open();
System.Data.DataTable dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

if (dt != null)
{
    foreach (DataRow row in dt.Rows)
    {
        var adapter = new OleDbDataAdapter("SELECT F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12 FROM [" + row["TABLE_NAME"].ToString() + "]", connectionString);
        var ds = new DataSet();
        try
        {
            adapter.Fill(ds, "anyname");
        }
        catch
        {
            break;
        }
        DataTable data = ds.Tables[0];
        int rownum = 0; 

        // <a bunch of variable declarations>

        foreach (DataRow row_b in data.Rows)
        {
            // start slogging through the rows
            rownum = rownum++;
            // <reset some variables>
            if (rownum == 1) // Catch valid scripts that contain a number
            {
                foreach (DataColumn column in data.Columns)
                {
                    if (column.ToString() == "F1")
                    {
                    // <processing code for this column>
                    }
                    if (column.ToString() == "F2")
                    {
                    //  <processing code for this column>
                    }
                    if (column.ToString() == "F3")
                    {
                    //  <you get the picture>
                    }
                }
        }
            if (rownum == 3)
            {
                // <moving along through the rows...different processing>
            }
                // <..rows 4-11..>

            if (rownum > 12 )
            {
                // <more value assignment>
            }

            string allvals = APPLICATION + E_USER + STEP_DESC + VARIATIONS + STATUS + STOPS_TESTING + ISSUE_NUM + ISSUE_COMMENTS + ADDITIONAL_INFO;
            allvals = allvals.Trim();

            //Don't want sheets that come across as Print Area this shouldn't affect the row processing 
            isPrintArea = 0;
            if (BOOKSHEET.Contains("Print_Area"))
            {
                isPrintArea = 1;
            }

            Boolean addornot=false;
            if (cb_forallscripts.Checked == true) 
            {
                addornot = (STEP_NUM != 0 &&
                allvals != "" &&
                isPrintArea == 0 &&
                SCRIPT_NUM != 0);
            }
            else
            {
                addornot = (STEP_NUM != 0 &&
                allvals != "" &&
                isPrintArea == 0 &&
                SCRIPT_NUM != 0 &&
                runScripts.Contains(SCRIPT_NUM.ToString()));
            }
            if (addornot)
            {
                //<connect to our Oracle db, I set up oCmd outside this> 
                OracleCommand oCmd = new OracleCommand();
                oCmd.Connection = oConn;
                oCmd.CommandType = CommandType.Text;
                oCmd.Parameters.Add("STEP_NUM", STEP_NUM);
                // <... bunch of parameters ...>
                oCmd.Parameters.Add("script", SCRIPT);
                oCmd.CommandText = "<My insert statement> ";
                oCmd.ExecuteNonQuery();
               }
            }
        }
    }
}
catch ( <error processing>)
{ } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:33:41.707

Rows.OutlineLevel 应该是您要查找的 VBA 属性。可以读取或设置。有关 Microsoft 相当简洁的描述，请参阅[此页面](http://msdn.microsoft.com/en-us/library/office/aa174260%28v=office.11%29.aspx)。Range.ClearOutline 正如它所说，将清除指定范围的轮廓，如此[处](http://msdn.microsoft.com/en-us/library/office/aa223831%28v=office.11%29.aspx)所述。

# javascript - 带有 d3 的动态图表给出了数组中重复元素的问题

> ID：14147483
> 
> 赞同：1
> 
> 时间：2013-01-03T21:23:22.507
> 
> 标签：javascript, d3.js

我正在动态加载一个数组，其中包含与某些数据相对应的数字。另一个数组带有关联的名称。所以加载时看起来像这样：

```
var dataArray = [10, 150, 206];
var nameArray = [A, B, C]; 
```

然后它的图形如下：

```
var xI = d3.scale.linear()
      .domain([0, 206])
      .range([0, 270]);
var yI = d3.scale.ordinal()
        .domain([0,1,2])
        .rangeBands([0,40]);
var chart1 = d3.select('#chart')
      .append('svg')
        .attr('width', '300px')
        .attr('height', '40px')
      .append('g')
        .attr('class', 'chart')
        .attr('transform', 'translate(25,5)');

    chart1.selectAll('rect')
        .data(dataArray)
      .enter().append("rect")
        .attr('y', yI)
        .attr("width", xI)
        .attr("height", 5);

    chart1.selectAll('text')
        .data(nameArray)
      .enter().append('text')
        .attr('x', 0)
        .attr('y', function(d){ return yI(d) + yI.rangeBand()/2.5; })
        .attr('dx', -24)
        .attr('dy', '0.25em')
        .attr('text-anchor', 'start')
        .text(String); 
```

希望你还在继续。只要说它运行良好并且这些数组没有任何问题就足够了。

当我在每个数组中有重复的元素时，就会出现问题，如下所示：

```
var dataArray = [10, 206, 206];
var nameArray = [A, C, C]; 
```

可能是由于重复的元素，整个图表呈现不正确。

我觉得我一直盯着它太久了，一直没能想出一个解决方案。如果您需要更多信息，请告诉我。欢迎任何和所有想法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:16:07.633

当您映射矩形的 y 坐标时，实际上您想要使用索引时，您正在使用带有 y 轴的数据。尝试这个：

```
chart1.selectAll('rect')
    .data(dataArray)
  .enter().append("rect")
    .attr('y', function(d,i) { return yI(i); } )
    .attr("width", xI)
    .attr("height", 5); 
```

# service - 无法使用 angular-seed 在具有 angularjs 的控制器中识别工厂或服务

> ID：14147486
> 
> 赞同：3
> 
> 时间：2013-01-03T21:23:33.830
> 
> 标签：service, controller, angularjs, factory

调用工厂时，我不断收到“未定义不是函数”。我使用 angular-seed 作为我的设置框架。出于某种原因，它不会将“GetFormVals”识别为有效的工厂。

在 app.js 中：

```
var app = angular.module('myApp', ['myApp.filters',
'myApp.services', 'myApp.directives'], function($routeProvider, $locationProvider) {
    //route declarations
    $routeProvider.when('/fsr', {
        templateUrl: 'partials/fsr.html',
        controller: ctrlFSR
    });

    $locationProvider.html5Mode(true);
}); 
```

在 controllers.js 中：

```
function ctrlFSR($scope, $http, $location, GetFormVals) {
    $scope.test = GetFormVals();
}
ctrlFSR.$inject = ['$scope','$location']; 
```

在 services.js 中：

```
'use strict';

/* Services */

angular.module('myApp.services', []).
    factory('GetFormVals', function(){
    return "test";
}); 
```

我必须缺少一些简单的东西。

jsfiddle：http: [//jsfiddle.net/wUjw5/11/](http://jsfiddle.net/wUjw5/11/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:38:44.880

You need to list all the dependencies to be injected into your controller:

```
function ctrlFSR($scope, $http, $location, GetFormVals) {
    $scope.test = GetFormVals();
}
ctrlFSR.$inject = ['$scope', '$http', '$location', 'GetFormVals']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:29:48.143

将您的服务更改为此

```
'use strict';

/* Services */

angular.module('myApp.services', []).
    factory('GetFormVals', function(){
            return {
                exampleValue: "test5"
            }
    }); 
```

然后在您的控制器中，您将其更新为：

```
function ctrlFSR($scope, $http, $location, GetFormVals) {
    $scope.test = GetFormVals.exampleValue;
}
ctrlFSR.$inject = ['$scope','$location']; 
```

我认为混淆是因为您将 GetFormVals 称为函数，而实际上它是一项服务。

**jsfiddle**：http: [//jsfiddle.net/rtCP3/49/](http://jsfiddle.net/rtCP3/49/)

* * *

**你的 js fiddle 修改了** [http://jsfiddle.net/wUjw5/12/](http://jsfiddle.net/wUjw5/12/)

Don't inject with ctrlFSR.$inject = ['$scope','$location'];. You already are.

# ruby-on-rails - 从查询中保存新对象

> ID：14147498
> 
> 赞同：1
> 
> 时间：2013-01-03T21:24:46.620
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord, bigdecimal

我有一个带有 PostgreSQL 数据库的 Rails 应用程序，其中包含过去 10 年的每小时价格数据，我需要将每天的每日平均价格保存在一个新的数据库表中。此查询按天对记录进行分组并返回每天的平均价格：

```
averages = Sale.average(:price, :group => "DATE_TRUNC('day', date)") 
```

Rails 控制台响应如下所示（2 天数据样本）：

```
{"2013-01-03 00:00:00"=>#<BigDecimal:7fcc7c2e4a28,'0.1752888888 88888889E2',27(27)>, "2013-01-02 00:00:00"=>#<BigDecimal:7fcc7c2e4848,'0.2547086956 52173913E2',27(27)>} 
```

谁能建议如何编写一些代码来将这些返回的日期和平均价格值保存到一个名为 DailyAverage 的新对象中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:29:39.327

你的回复是这样的：

```
{
  'date' => BigDecimal,
  'date2' => BigDecimal,
  'date2' => BigDecimal,
} 
```

因此，您可以像这样访问每个日期的每个平均值：

```
averages = Sale.average(:price, :group => "DATE_TRUNC('day', date)")

averages.each do |date, avg|
  DailyAverage.create(date: date, average: avg.to_f)
end 
```

此代码假定您有一个`DailyAverage`具有`date`和`average`属性的模型。

您可能必须`to_date`在每个循环中使用 a ：

```
averages.each do |date, avg|
  DailyAverage.create(date: date.to_date, average: avg.to_f)
end 
```

# c# - 如何在c#中等待点击

> ID：14147500
> 
> 赞同：2
> 
> 时间：2013-01-03T21:24:49.940
> 
> 标签：c#, events, click

我目前正在上 C# 的初学者课程。我们连续错过了两节课，因为老师不能在那里。所以我们并没有真正看到我们需要做什么。他说去 MSDN 上看看，但这对我来说通常太复杂了。所以这是我的问题：

我必须创建一个“Simon Says”程序。这是我当前的代码（对不起法语变量）：

```
public partial class Form1 : Form
{
    const byte LIMITE = 255;
    const byte LIMITEBOUTON = 5;
    byte[] _abyBouton = new byte[LIMITE];
    Random _rand = new Random();

    public Form1()
    {
        InitializeComponent();
    }

    //Blinks the Button. Works correctly.
    void AnimerBouton(Button btnBouton, Color Cocoleur)
    {
        btnBouton.BackColor = Color.Black;
        btnBouton.ForeColor = Color.White;
        Update();
        System.Threading.Thread.Sleep(500); // C'est inscrit en miliseconde
        btnBouton.BackColor = Cocoleur;
        btnBouton.ForeColor = Color.Black;
        Update();
        System.Threading.Thread.Sleep(500); // C'est inscrit en miliseconde
    }

    private void btnDémarrer_Click(object sender, EventArgs e)
    {
        //Creates an array with the 255 eventual moves.
        for (byte byIndex = 0; byIndex <= LIMITE - 1; byIndex++)
        {
            _abyBouton[byIndex] = (byte)_rand.Next(1, LIMITEBOUTON);
        }

        for (byte byIndex = 0; byIndex <= LIMITE - 1; byIndex++)
        {
            //Takes care of the current progress in the game.
            for (byte byIndex2 = 0; byIndex2 <= byIndex; byIndex2++)
            {
                switch (_abyBouton[byIndex2])
                {
                    case 1:
                        {
                            AnimerBouton(btn1, Color.Green);
                        }
                        break;
                    case 2:
                        {
                            AnimerBouton(btn2, Color.Red);
                        }
                        break;
                    case 3:
                        {
                            AnimerBouton(btn3, Color.Yellow);
                        }
                        break;
                    case 4:
                        {
                            AnimerBouton(btn4, Color.Cyan);
                        }
                        break;
                }
                //Wait to see if the click is correct. No idea how to do this.
            }
        }  
    }
} 
```

所以我必须等待用户点击一个按钮，看看它是否是正确的。我环顾四周，它正在谈论事件，但我无法理解我需要做什么。对于如何做到这一点，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T21:29:19.127

在设计器的属性窗口中，单击闪电图标。您将获得所选控件的事件列表。确保`btnBouton`选中该控件，然后在列表中找到该`Click`事件。您应该`btnDemarrer_Click`在下拉列表中看到。选择它。现在，当单击按钮时，它应该调用您的`btnDemarrer_Click`处理程序。

当您还没有编写处理程序时，您可以双击列表中的事件，它会自动为您生成方法骨架。您还可以双击控件本身以生成该控件的默认事件处理程序。（在按钮的情况下，我认为默认事件是点击事件。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T21:57:38.087

如果您希望特定方法等到某些工作完成，您可以查看[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.autoresetevent.aspx). 一个*极其*简化的示例可能会帮助您走上正轨：

```
using System.Threading;

public static AutoResetEvent arEvent = new AutoResetEvent(false);

static void Main()
{
    DoWork();
    arEvent.WaitOne();  //WaitOne() "pauses" Main and waits for some work to be done.
    DoWork();
    arEvent.WaitOne();
}

static void DoWork();
{
    //Some work is done here.
    arEvent.Set(); //This lets Main() continue where it left off.
} 
```

使用它，您可以`btnDémarrer_Click`等待用户输入，然后在用户完成点击后继续。

# jquery - 从异步加载的插件附加DOM事件处理程序？

> ID：14147503
> 
> 赞同：-2
> 
> 时间：2013-01-03T21:25:05.950
> 
> 标签：jquery

我有一个 jQuery 插件，它异步加载并在页面加载时将事件附加到 DOM 元素。

DOM 元素间歇性地没有附加来自插件的事件 - 这是由于通过另一个 javascript 文件加载这些 DOM 元素而发生的。

有没有办法确保事件处理程序始终附加到 DOM 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:29:32.320

这里的主要答案是，如果您正在编写*插件*，则在页面加载时（或在任何其他时间）将其附加到正确的元素不是您的问题。那是你的插件的*用户来做的。*它不在您的问题域中。

但是，如果您想尝试处理它：

您可以使用 jQuery 处理程序确保页面完全加载，该[`ready`](http://api.jquery.com/ready)处理程序具有快捷方式（只需将函数传递给`jQuery`），例如：

```
jQuery(function($) {
    // ...here, all page elements defined by the main HTML have been created
}); 
```

如果您需要处理页面完全加载*后添加的元素，请查看使用**事件委托*。当事件冒泡到它们时，您不是在元素本身上而是在它们的祖先元素上处理事件。例如，这将处理`click`具有类的元素上的任何事件，`foo`除非该事件被靠近该元素的处理程序取消：

```
$(document.body).delegate(".foo", "click", function() {
    // An element matching ".foo" was clicked
}); 
```

什么[`delegate`](http://api.jquery.com/delegate)是将事件挂在您调用它的元素上（`document.body`在这种情况下），但只有在实际点击在从实际发生点击的元素到其父级的祖先路径中具有匹配元素时才触发处理程序，到*它的*父级，依此类推，直到你调用的元素`delegate`。

使用最新版本的 jQuery，您还可以使用超重载[`on`](http://api.jquery.com/on)函数来做同样的事情（注意 args 的顺序不同）：

```
$(document.body).on("click", ".foo", function() {
    // An element matching ".foo" was clicked
}); 
```

为了清楚起见，我更喜欢`delegate`。

但同样，这真的不是你的问题。插件的用户知道何时何地连接它是由插件的用户决定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:27:40.927

插件中的事件（是你的）必须委托。

查看有关[委托](http://api.jquery.com/delegate/)的 jQuery 文档，或者更好[的是](http://api.jquery.com/on/)

具体来说，您将您的事件绑定到一个存在且将始终存在的 dom 元素（将接收异步加载数据的内容的 dom 元素），并指定一个与您的具体元素匹配的选择器来监听：

```
jQuery('#my_container_for_ajax')
    .on ('click', '.my_future .elements .tolisten', function () {}); 
```

# css - 浮动图像下的 P 标签内容渗出

> ID：14147507
> 
> 赞同：0
> 
> 时间：2013-01-03T21:25:22.563
> 
> 标签：css

我有一个列表，每个 li 都有一个图像，然后是一些文本。

```
<div style="width:500px;">
<ul >
   <li>
       <img src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcTyBPzjBIU0gCSFH7mLEVMuQ6d69KYfe14YCsJcLXCbHzhqJZ2p" width="100px" style ="float:left; ">

        <p>First line......<br/>Second: Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries</p>
   </li>

</ul>
</div> 
```

问题是：如果`p`内容超出图像的高度，它会流到图像下方的左侧。我怎样才能阻止这个？我想要图像下方的任何内容（每个`<li>`）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:09:11.913

设置`overflow: hidden;`在`P`标签上。这种方法的好处是您不需要知道图像标签的宽度。

```
li p {
  overflow: hidden;
} 
```

见**[演示](http://jsfiddle.net/6zamg/10/)**。我在图像和段落文本之间添加了 5 个像素的空白，尽管这是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:30:23.707

您可以将 p 标签向右浮动并赋予其 400px 的宽度，而不是浮动图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:33:25.360

您可以为`p`元素添加左边距：

```
​li p {
    margin-left: 105px;  /* width of your images */
}​ 
```

[**演示**](http://jsfiddle.net/6zamg/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T21:36:09.517

只需在段落上加一个边距。像这个`p{margin-left:105px;}`工作示例[http://jsfiddle.net/xSbmn/](http://jsfiddle.net/xSbmn/)

保持 img 向左浮动，并在段落中添加等于或大于 img 的边距。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T21:36:16.247

您可以向左浮动宽度为 100px 的图像，向右浮动宽度为 400px 的段落。

否则，创建 css 文件、插入样式而不是将其写入 html 会非常有效。

# c# - 使用 VS 进行分析时出错：无法打开分析器驱动程序

> ID：14147508
> 
> 赞同：19
> 
> 时间：2013-01-03T21:25:23.017
> 
> 标签：c#, visual-studio-2010, windows-8, profiling

我正在运行*完全禁用*UAC 的 Windows 8，这可以通过更改[注册表设置](http://www.eightforums.com/system-security/2434-disable-uac-completely.html)来实现（将其设置为“从不通知”不再在 Windows 8 中完全禁用它）。

当我尝试通过 Visual Studio 分析 C# 代码时，出现以下错误（单击“是”不能解决问题）：

> 无法打开分析器驱动程序，您要升级 [用户名] 的凭据吗？

`vsperfcmd /Admin:Driver,START`从命令行运行说：

> 错误 VSP1449：无法启动 VSPerfDrv100。此驱动程序已被阻止加载尝试在提升的环境中使用 VSPerfCmd 的 /Admin 开关。

我显然正在使用提升的环境，因为完全禁用了 UAC，我不再有两个安全令牌，而只有管理员安全令牌。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-13T16:50:38.727

此处的博文“ [Windows 8 上的 Visual Studio Profiler](http://blogs.msdn.com/b/profiler/archive/2012/12/10/the-visual-studio-profiler-on-windows-8.aspx) ”指出：

> Windows 8 添加了逻辑以防止启动所有不兼容版本的分析驱动程序（2010、2008 和 2005）。
> 
> 这意味着当您尝试使用不兼容的版本开始分析时，您将收到消息“<em>错误 VSP1398：监视器无法启动 VS 性能驱动程序。访问被拒绝。考虑在提升的环境中使用 VSPerfCmd 的 /Admin:Driver、Start 和 /Admin:Security 选项。”</p>
> 
> 在 Windows 8 上运行 Visual Studio 2010（或更早版本）时，这将导致以下行为。
> 
> *   CPU 采样、.NET 内存分配和并发分析将无法在 Windows 8 上启动。Windows 8 上的唯一解决方法是使用 Visual Studio 2012 Professional 或更高版本，或者在 Windows 7 上进行分析。
>     
>     
> *   可以启动检测分析，但应用程序和运行时间将完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T15:00:09.360

尝试将“完全控制”权限添加到驱动程序“VSPerfDrv100.sys”所在的目录。

您可以使用`"sc qc VSPerfDrv100"`.

对于 x64 PC，它应该是`"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Team Tools\Performance Tools\x64"`

# gruntjs - 仅当我正在创建的文件存在时，如何让 grunt-init 发出警告？

> ID：14147509
> 
> 赞同：0
> 
> 时间：2013-01-03T21:25:27.157
> 
> 标签：gruntjs

在 grunt 文档中有很多关于“warnOn”的例子：

```
exports.warnOn = 'grunt.js';        // Warn on a grunt.js file.
exports.warnOn = '*.js';            // Warn on any .js file.
exports.warnOn = '*';               // Warn on any non-dotfile or non-dotdir.
exports.warnOn = '.*';              // Warn on any dotfile or dotdir.
exports.warnOn = '{.*,*}';          // Warn on any file or dir (dot or non-dot).
exports.warnOn = '!*/**';           // Warn on any file (ignoring dirs).
exports.warnOn = '*.{png,gif,jpg}'; // Warn on any image file. 
```

但是我只看到了一些示例，这些示例会在提示中提出或回答任何问题之前向您发出警告。只有当我创建的文件已经存在于项目中（或指定路径中）时，我才需要在填写答案后收到警告。就像是：

```
**Please answer the following:**
Project name: example 
```

假设一个名为“example”的文件已经存在，我想在那时得到警告，以便我可以将名称更改为其他名称。我想它会是这样的：

```
warnOn = '{%= name %}';     // File being created already exists in project 
```

但我不知道如何实现这一点，因此它只会在我输入值后发出警告。

希望这是有道理的，我很高兴澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:13:11.623

不可能，因为`warnOn`检查只[在提示之前](https://github.com/gruntjs/grunt-init/blob/master/tasks/init.js#L69-L72)完成。

但是它只是 Node.js，因此您可以轻松地自己实现检查：

```
if (grunt.file.expand(name).length) {
    grunt.warn('Existing files may be overwritten!');
} 
```

# jquery - 为什么我的 jquery 导航菜单在 Internet Explorer 中不起作用？

> ID：14147511
> 
> 赞同：0
> 
> 时间：2013-01-03T21:25:33.787
> 
> 标签：jquery, internet-explorer, asp-classic

好的，这就是交易，我正在为一个用 asp 构建的网站实现一个新的导航菜单和页脚。大多数页面在 Doctype html 标记之前的页面顶部都有一个包含。当我为我的头标签添加我的包含文件（有我的 css 链接）并包含以添加新的导航/页脚时，页眉和页脚在 Internet Explorer 中不起作用。所以基本上这就是页面的样子。

```
<!-- #include file='includes/pageincludes/namesearch_top.asp'-->
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->

<head>

<title>State Index Searching - Plat Index&nbsp;<%=txtTitle%></title>
<script LANGUAGE="JavaScript" SRC="/includes/cookie.js"></script>
<!-- #include file='myHeadContent.asp' -->      
</head>
<body>
<!-- #include file='top_Nav.asp' -->
<!-- #include file='pageContent.asp' -->
<!-- #include file='footer.asp' -->
</body>

</html> 
```

namesearch_top.asp 文件包含更多包含验证用户登录信息、日期等的脚本。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:41:56.230

您在 DOCTYPE 声明之前包含 namesearch_top.asp，如果按照您的描述添加 CSS 和 JavaScript 链接，这将迫使 IE 进入怪异模式。将其移动到 head 元素内。

# java - Java中的数值求解

> ID：14147512
> 
> 赞同：0
> 
> 时间：2013-01-03T21:25:36.687
> 
> 标签：java, numerical-methods, algebra, newtons-method

我正在寻找在Java中为线性代数解决方案合并某种数值求解的实现，如下所示：

5x + 4 = 2x + 3

理想情况下，我希望尽可能少地解析，并避免使用传统的“人类”解决方案方法（即组合类似的术语等）。我一直在研究牛顿法并插入 x 的值来近似解决方案。

我很难让它工作。

***有谁知道最好的通用方法，以及应该如何在代码中完成（最好是 Java）？***

**额外的**

在 Netwon 方法中，您进行迭代直到近似值达到可接受的精度。公式如下所示：

x1 = x0 - (f(x0) / (f'(x0))

其中 x1 是迭代中 x 的下一个值，而 x0 是当前值（或者如果在第一次迭代时开始猜测）。

f素数是什么？假设 f(x0) 是您当前 x 估计的函数，那么 f'(x0) 代表什么表达式？

**澄清**

*这仍然是一个如何编程这个数学评估的问题，而不仅仅是如何做数学。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:39:15.780

f'(x0) 是在 x0 处计算的 f 的*导数*。您可以通过评估来计算 f' 的近似值：

```
f'(x0) ~ (f(x0+epsilon) - f(x0))/epsilon 
```

对于一个适当的小值`epsilon`（因为`f`是线性的，任何合理的值`epsilon`都会给出基本相同的结果；对于更一般的函数`f`，选择`epsilon`要使用的商品的微妙之处完全太微妙了，无法在 SO 帖子中讨论——注册上-师本科数值分析课程）。

但是，由于您要避免“人为”方法，我应该指出，对于线性方程组的特定情况，牛顿法总是在一次迭代中收敛，实际上本质上等同于通常的代数求解技术。

为了说明这一点，请考虑您的示例。要使用牛顿法，需要对方程进行变换，使其看起来像 f(x) = 0：

```
5x + 4 = 2x + 3
5x + 4 - (2x + 3) = 0 
```

所以`f(x) = 5x + 4 - (2x + 3)`。的导数`f(x)`是`f'(x) = 5 - 2 = 3`。如果我们从一个初始的猜测开始`x0 = 0`，那么牛顿的方法会给我们：

```
x1 = x0 - f(x0)/f'(x0)
   = 0 - (5*0 + 4 - (2*0 + 3))/3
   = 0 - (4-3)/3
   = -1/3 
```

这实际上与人类求解方程所使用的操作完全相同，只是经过了巧妙的伪装。取导数隔离`x`项 ( `5x - 2x = 3x`)，并在零处求值隔离没有`x`( `4-3 = 1`) 的项。然后我们将常数系数除以线性系数并取反得到`x`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:29:02.037

假设您不想使用一些新算法或重写旧算法，您可以使用[equation solver](http://code.google.com/p/equation-solver/)。

# java - 以像素为单位的 Android 定位有效，但不应该

> ID：14147515
> 
> 赞同：0
> 
> 时间：2013-01-03T21:25:46.717
> 
> 标签：java, android, pixel

我一直在使用像素在表面视图上定位事物（位图、文本）。例如，为了使某些东西居中，我将取代表屏幕的矩形宽度和高度的一半。屏幕宽度和高度按预期返回。我的手机 (480*800) 报告可用屏幕为 442*800，密度为 1.5，在 240*320 模拟器上运行，可用屏幕报告为 221*320，密度 0.75。一切如预期。

但是这些值当然是像素，所以为了使某些东西居中，我应该首先乘以密度因子，然后再减半。奇怪的是，在低分辨率模拟器和我的高分辨率手机上，一切都完美地居中。这对我来说没有意义。

在两个屏幕上，为了使文本看起来相同，我使用密度缩放值设置大小，正如我所期望的那样，这很有效。

在清单中，我宣布支持所有屏幕尺寸（尽管在我这样做之前我也看到了相同的“正确”行为）

为什么没有我调整它们的密度像素值“工作”？我现在很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:35:06.997

一个像素就是一个像素就是一个像素！

它是屏幕和尺寸的最小公分母。

密度是将多少像素打包成一个度量单位，通常是一英寸。在物理显示器上。

例如，物理宽度为 5 英寸，分辨率为 500x1000，密度为 200dpi（5 英寸中 1000 个像素）。具有相同分辨率的 4 英寸物理宽度产生 250dpi 的密度（4 英寸中 1000 个像素）。

x=500（宽度的一半）是两者的屏幕中心，与密度无关。事实上，以像素为单位的宽度的一半是任何尺寸和任何密度的屏幕的中心。

# ember.js - 使用 Ember 路由器的多个有状态组件

> ID：14147518
> 
> 赞同：2
> 
> 时间：2013-01-03T21:25:56.713
> 
> 标签：ember.js

我正在编写一个 Ember 应用程序，它由一些复杂的、有状态的组件组成。我很难理解 Ember 如何处理这种应用程序，因为它不是传统的 CRUD 应用程序。

它是一个高度交互的单页应用程序。一些示例组件是 Xmpp 文本聊天、多方音频、Xmpp 共享白板和弹出通知

有一个全局状态（我可以看到通过路由器处理）设置用户上下文（我在音频/白板上与谁一起工作）。我不太明白的是，如果路由器在设置与音频和白板无关但仍然有状态的聊天上下文中扮演什么角色。我无法想象来自路由器的 URL 字符串如何同时反映所有这些组件的状态。

这是我完全跳过使用路由器的情况吗？如果是这样，我如何链接我的应用程序的视图/控制器？到目前为止，我一直在使用路由器的 connectOutlets 方法来链接我的视图和控制器。如果不调用此方法，那么执行此绑定的另一种（结构化和有组织的）方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:50:15.913

好问题！

*   **全局状态**：使用路由器
*   **应用程序状态**：在与您的应用程序组件关联的控制器单例中

作为一般规则，我建议使用路由器来管理用户可以添加书签或使用浏览器前进/后退按钮与之交互的状态。只是猜测，但对于可能包含白板 ID 的应用程序。

聊天、音频和通知等组件通常会独立于路由器而存在并维护状态。在某些情况下，这些组件的行为可能会根据路由而有所不同（例如，聊天可能会根据显示的白板绑定到特定频道），但聊天小部件本身的状态会作为属性存储在 ChatController 单例中。

ember 指南尚未完成，但您可能会发现控制器指南的最后一部分“存储应用程序属性”很有帮助[http://emberjs.com/guides/controllers/](http://emberjs.com/guides/controllers/)

# python - Python PLY Lex 歧义

> ID：14147529
> 
> 赞同：3
> 
> 时间：2013-01-03T21:26:36.043
> 
> 标签：python, lex, ambiguity, ply

我对令牌级别的歧义有疑问。

问题看起来像这样。我的代码看起来像这样，因此令牌 t_UN1 具有更高的优先级。

```
t_ignore = ' \t\v\r' # whitespace 

....

def t_UN1(t): #NS_
    r'NS\_'
    return t
def t_IDENTIFIER(t):
    r'[a-zA-Z][a-zA-Z0-9_]*'
    return t

.... 
```

我想实现这一点，例如。字符串：NS_XYZ 被标识为“IDENTIFIER”，被空格包围的单个 NS_ 被标识为“UN_1”。

我该如何处理？目前字符串 NS_XYZ 被简单地分成两个标记 UN1 和 IDENTIFIER

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:16:43.683

如果您希望获得“被空格包围的单个 NS_”，则可以将空格字符类添加到令牌字符串中：

```
def t_UN1(t): #NS_
    r'\s+NS\_\s+'
    return t 
```

旁注：对于 PLY 问题，[ply-hack google 小组](https://groups.google.com/forum/?fromgroups=#!forum/ply-hack)是询问 PLY 相关问题的好地方。

# java - Java：抛出检查异常的*能力*会减慢速度吗？

> ID：14147530
> 
> 赞同：1
> 
> 时间：2013-01-03T21:26:39.877
> 
> 标签：java, performance, exception

...或者必须*抛出*异常才能影响性能？

[请参阅此处](https://stackoverflow.com/questions/2619429/c-sharp-to-java-where-t-new-syntax)接受的答案。这是我想要实现的东西，如果以这种方式创建实例不会使事情变得非常慢的话。（我每秒要创建数千个对象，粒子系统等。所以不，考虑到在 Java 中使用检查异常时存在的性能影响，这不是过早的优化。谢谢。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:30:28.077

您每秒可以创建数千万个对象。除非您在分析器中看到问题，否则我不会担心性能数千人。我还会担心首先使代码清晰和正确，然后再考虑对其进行分析。

在您的代码中包含异常几乎没有影响（除了让您的代码稍大一些） 抛出异常是昂贵的，但您每秒可以抛出数千个异常并且仍然​​不会严重影响您的应用程序性能。（错误的代码同样不是一件好事）

```
public static void main(String... args) {
    long start = System.nanoTime();
    int runs = 10000000;
    for (int i = 0; i < runs; i++) {
        try {
            throwsException();
        } catch (Exception ignored) {
        }
    }
    long time = System.nanoTime() - start;
    System.out.printf("Took an average of %.3f micro-second per exception%n", time / runs / 1e3);
}

private static void throwsException() throws Exception {
    throw new Exception("Ignored");
} 
```

这个测试每秒抛出超过一百万`new Exception`秒

```
Took an average of 0.744 micro-second per exception 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:39:37.243

Try..catch 块的差异可以忽略不计。抛出异常有一个很小的惩罚（可能可以忽略不计，但在一些旧的或功率不足的硬件上可能不会）。

如果 GC 是一个问题，并且您出于流控制的原因想要抛出异常，但对异常的细节不感兴趣，除了它的类型，您可以*重用*异常对象。将它们创建为常量一次，然后在需要时将它们扔掉。

但是说了这么多，我会等到你知道你有性能问题，然后分析如何解决它。通常不是你认为的那样。

# windows-phone-7 - 我可以在 Windows Phone 7、7.5 和 8 上运行没有 GUI 的应用程序吗？

> ID：14147534
> 
> 赞同：2
> 
> 时间：2013-01-03T21:26:42.980
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

在 WP 7 和 WP 7.5 上，我必须在 C# 上开发应用程序，但是，在 WP8 上，我可以在本机 C++ 上开发应用程序

假设相应的编程语言，我想知道是否可以在 Windows Phone 7、7.5 和 8 上运行没有 GUI 的进程或应用程序。

是否可以？我该怎么做？网上有什么例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:11:08.377

应用程序需要在 windows phone 上具有 UI。您不能只部署直接服务。但是带有 UI 的应用程序可以启动后台进程。过去，我在关于全后台多任务处理@How [to run application in background in Windows Phone?](https://stackoverflow.com/questions/13514064/how-to-run-application-in-background-in-windows-phone/13520869#13520869)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:31:45.140

如果没有 GUI，您将无法运行 Windows Phone 应用程序。您可以使用 GUI 运行应用程序，然后从此应用程序后台进程或后台任务运行。

# php - 使用 var_dump() 时，$_SESSION 变量不显示其值

> ID：14147540
> 
> 赞同：0
> 
> 时间：2013-01-03T21:27:12.430
> 
> 标签：php

我在下面有一段代码，其中包含`$_SESSION`变量：

```
if (isset($_POST['id'])) {

$_SESSION['id'] = $_POST['id'];

}

if(isset($_SESSION['sessionNum'])){
            //Declare my counter for the first time

            $_SESSION['initial_session'] = $_SESSION['sessionNum'];
            $_SESSION['sessionNumber'] = intval($_SESSION['sessionNum']);
            $_SESSION['sessionCounting'] = 1;

    } 
```

...

```
ASSESSMENT: (<?php echo $assessment ?>) TOTAL ASSESSMENTS: <?php echo $_SESSION['initial_session'] ?> 
```

上面的语句显示了这一点：

```
ASSESMENT: (WESSF)  TOTAL ASSESSMENTS: 2 
```

但是接下来的两页（completesession.php）我想使用其中的几个`$_SESSION`变量。但问题是，如果我只做 a `var_dump($_SESSION['sessionNum'])`then it`int(1)`而不是 value `2`。但它确实输出`(WESSF)`. `var_dump($_SESSION['id'])`为什么是这样？

下面是完整的session.php) 页面：

```
<?php

ini_set('session.gc_maxlifetime',12*60*60);
ini_set('session.gc_divisor', '1');
ini_set('session.gc_probability', '1');
ini_set('session.cookie_lifetime', '0');
require_once 'init.php'; 

error_reporting(E_ALL);
ini_set('display_errors', 1);

session_start();

  var_dump($_SESSION['id']);
  var_dump($_SESSION['sessionNum']);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:02:36.613

您可能在这里查看了错误的会话密钥。采用：

```
var_dump($_SESSION); 
```

显示所有会话密钥。

此外，您发布的代码没有计算任何数字，因此数字`1`看起来是正确的（我可以看到少数），并且`2`不会是正确的。

最后一点：因为您可以成功地看到`int(1)`它表明您的 PHP 设置中的会话功能实际上正在工作。所以你可能只是在某个地方犯了一些错误来设置正确的键/值。

# python - Numpy：将散点图变成二维数组

> ID：14147541
> 
> 赞同：4
> 
> 时间：2013-01-03T21:27:14.783
> 
> 标签：python, numpy, matplotlib, scipy

说我有以下内容：

```
import pyplot as plt
import numpy as np
'''array([[29, 13, 11,  4,  5], #dataMag
       [19, 16, 25,  9, 10],
       [16, 22, 14, 18, 26],
       [ 9, 17,  8,  9, 777]])

array([[205, 338, 380, 428, 228], #dataX
       [199, 546, 430,  95, 374], 
       [418,  85, 260, 236, 241],
       [308, 481, 133, 136,  83]])

array([[ 0.48,  0.83,  0.71,  0.12,  0.],   #dataY
       [ 0.09,  0\.  ,  0.7 ,  0.43,  0.54],
       [ 0.58,  0\.  ,  0.56,  0.18,  0.25],
       [ 0.96,  0.26,  0.57,  0\.  ,  0.82])'''

plt.scatter(x=dataX.flat, y=dataY.flat, c=dataMag.flat, vmin=np.min(dataMag),
            vmax=np.max(dataMag), marker='s', cmap='hot')
plt.show() 
```

这给了我以下结果： ![随机生成的图像](../Images/c85421b91784709bd7178d1f9eddbc84.png)

Numpy（或Scipy等）中是否有办法将它们表示为（a，b）二维数组，而不是使用三个数组来获取二维图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:35:24.280

**编辑**我在下面保留我的原始答案，但深入研究您之前关于同一主题的问题，代码执行您所追求的。请注意，它不处理重复值，因此如果您将多个值分配给同一位置，则只会保留其中一个。此外，这会弄乱散点图的比例，所以像我原来的答案这样的东西可能更适合你所追求的。但无论如何，这是代码：

```
x_, x_idx = np.unique(np.ravel(dataX), return_inverse=True)
y_, y_idx = np.unique(np.ravel(dataY), return_inverse=True)
newArray = np.zeros((len(x_), len(y_)), dtype=dataMag.dtype)
newArray[x_idx, y_idx] = np.ravel(dataMag)
>>> newArray
array([[  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 777,   0,   0],
       [ 22,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   9,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   8,   0,   0,   0,   0,   0,   0],
       [  9,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,  19,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,  29,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  5,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,  18,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,  26,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,  14,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   9],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  13,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,  10,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  11,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  16,   0,   0,   0,   0,   0],
       [  0,   0,   4,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  25,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,  17,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [ 16,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0]]) 
```

**原始答案**

如果`dataX`和`dataY`where 两个整数数组，实现将非常简单。但由于它们似乎不一定是，您需要进行一些舍入，为此您需要首先为每个方向的数组选择一个步长，然后您可以执行以下操作：

```
from __future__ import division

x_step, y_step = 25, 0.10
x = np.round(dataX / x_step).astype(int)
y = np.round(dataY / y_step).astype(int)
x_m, x_M = np.min(x), np.max(x)
y_m, y_M = np.min(y), np.max(y)
newArray = np.zeros((x_M - x_m + 1, y_M - y_m + 1), dtype=dataMag.dtype)
newArray[x - x_m, y - y_m] = dataMag

>>> newArray
array([[ 22,   0,   0,   0,   0,   0,   0,   0, 777,   0,   0],
       [  0,   0,   0,   0,   9,   0,   0,   0,   0,   0,   0],
       [  9,   0,   0,   0,   0,   0,   8,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,  19,   0,   0,   0,  29,   0,   0,   0,   0,   0],
       [  5,   0,  18,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,  26,   0,   0,   0,  14,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   9],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,  13,   0,   0],
       [  0,   0,   0,   0,   0,  10,   0,  11,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   4,   0,   0,   0,   0,  16,  25,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,  17,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0],
       [ 16,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0]]) 
```

执行此操作时必须小心，确保舍入步长足够小，以免两个值舍入到数组中的同一位置，否则会丢失信息。例如：

```
x_step, y_step = 50, 0.10
...
>>> newArray
array([[ 22,   0,   0,   0,   9,   0,   0,   0, 777,   0,   0],
       [  9,   0,   0,   0,   0,   0,   8,   0,   0,   0,   0],
       [  0,  19,   0,   0,   0,  29,   0,   0,   0,   0,   0],
       [  5,   0,  26,   0,   0,   0,  14,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   9],
       [  0,   0,   0,   0,   0,  10,   0,   0,  13,   0,   0],
       [  0,   0,   0,   0,   0,   0,  16,  11,   0,   0,   0],
       [  0,   4,   0,   0,   0,   0,   0,  25,   0,   0,   0],
       [  0,   0,   0,  17,   0,   0,   0,   0,   0,   0,   0],
       [ 16,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0]]) 
```

并且在位置上`[3, 2]`仅显示 26，而不是前面示例中相应单元格中的 18 和 26。

# css - CSS 媒体查询和图像大小

> ID：14147545
> 
> 赞同：2
> 
> 时间：2013-01-03T21:27:28.640
> 
> 标签：css, media-queries

我目前正在我的 WordPress 博客中实现 CSS 媒体查询，我想知道是否有任何已知方法可以调整宽度为 400-600 像素的博客图像以适应 iTouch、iPhone 和其他具有小屏幕的智能手机。

我的想法是添加这个 CSS：

```
.blogpost img {
    width:55%;
    height:55%;
} 
```

这样它就会自动调整我博客中**所有图像的大小。**我需要这件事的帮助。我对我的方法不满意，因为我听说它会扭曲图像。有什么专业建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T21:43:16.443

如果同时指定宽度和高度，它会扭曲图像，为什么不只指定一个呢？然后你可以添加一个最小宽度以确保它不会变得太小。只要您不指定，高度就会随宽度调整。

```
.blogpost img {
width:55%;
min-width:220px;
} 
```

或者您可以稍微不同地处理它，而是将图像设为 100% 宽度，然后确保它不会超出其实际宽度（因此您不会扭曲它）。如果您的所有图像尺寸相同，这将很有效。

```
.blogpost img {
width:100%;
max-width:600px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:31:11.817

尝试使用 CSS`max-height`和`max-width`属性：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-28T21:44:49.853

您可以使用 css **min-width/height**属性来做到这一点。这真的是一件简单而直接的事情。

# javascript - 解析多态 XML

> ID：14147550
> 
> 赞同：3
> 
> 时间：2013-01-03T21:27:41.717
> 
> 标签：javascript, jquery, xml, xml-parsing

如果标记根据成功发生变化，我将如何解析来自 USPS 地址验证的 xml 返回？
例如，如果返回有效，我得到`A)`，如果不是，我得到`B)`。在`A)`节点`<Error>`中不存在并且如果有错误我想输出那个错误。
在`PHP`那里`isset()`，但我从来没有听说过类似的解析 XML 的东西。

一个）

```
<?xml version="1.0"?>
<AddressValidateResponse>
    <Address ID="0">
        <Address2>123 MAIN ST</Address2>
        <City>SPRINGFIELD</City>
        <State>NY</State>
        <Zip5>11111</Zip5>
        <Zip4>1111</Zip4>
    </Address>
</AddressValidateResponse> 
```

二）

```
<?xml version="1.0"?>
<AddressValidateResponse>
    <Address ID="0">
        <Error>
            <Number>-45DF6S45F</Number>
            <Source>API_AddressCleancAddressClean.CleanAddress2;SOLServer.CallAddressDll</Source>
            <Description>Address Not Found.  </Description>
            <HelpFile></HelpFile>
            <HelpContext>1000440</HelpContext>
        </Error>
    </Address>
</AddressValidateResponse> 
```

目前我正在使用 jquery 解析 xml，例如：

```
$.ajax({
    type: "POST",
    url: "usps_xml_verify.php",
    data: {<PASS IN VARIABLES>},
    dataType: "xml",
    success: function(xml) {
        $(xml).find('Address').each(function(){
            var Address2 = $(this).find('Address2').text();
            var Zip5 = $(this).find('Zip5').text();
            //etc...
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T00:20:00.197

不要盲目地迭代解决方案，而是先再次使用 find find 方法检查是否存在错误节点：

```
var addr = $(xml).find('Address')

var err = addr.find('Error');
if(err.length > 0){
    //found at least one error node, process them here
}else{
    //no error nodes, continue normally:
    addr.each(function(){
        var Address2 = $(this).find('Address2').text();
        var Zip5 = $(this).find('Zip5').text();
        //etc...
    });
} 
```

这可能不是最惯用的解决方案，但这样的事情应该可行。不要忘记 jQuery 只是一个 Javascript 库！您可以调用方法并将内容放入变量中，就像常规的 Javascript 代码一样。

# sqlite - SQLite 插入在 iOS 中不起作用

> ID：14147551
> 
> 赞同：0
> 
> 时间：2013-01-03T21:27:45.430
> 
> 标签：sqlite, ios6

我无法让这段代码通过 iOS 将数据实际插入我的 SQLite 数据库：

```
 NSString* inssql = [NSString stringWithFormat:@"INSERT OR IGNORE INTO roomData VALUES ('%@', '%i', '%@', '%@', '%@', '%@'); UPDATE roomData SET roomNumber='%@', roomName='%@', roomDesc='%@', roomHash='%@' WHERE roomID = '%@'", [row objectAtIndex:0],property,[row objectAtIndex:1],[row objectAtIndex:2],[row objectAtIndex:3],[row objectAtIndex:4],[row objectAtIndex:1],[row objectAtIndex:2],[row objectAtIndex:3],[row objectAtIndex:4],[row objectAtIndex:0]];
        sql = [inssql UTF8String];

        if (sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK) {
            NSLog(@"MESSAGE: Could not prepare this insert, %s", sqlite3_errmsg(db));
        } else {
            if (sqlite3_step(sqlStatement) == SQLITE_DONE)
            {
                NSLog(@"MESSAGE: Successful insert, %@, %d", [row objectAtIndex:0], sqlite3_step(sqlStatement));
            } else {
                NSLog(@"MESSAGE: Failed insert, %s", sqlite3_errmsg(db));
            }
        } 
```

我得到“成功插入”，但数据库中没有数据。知道怎么了？这是我第一次使用 SQLite。

编辑＃1：

我还尝试了以下语法：

```
 sql = "INSERT INTO roomData VALUES (?)";
        sqlite3_prepare(db, sql, -1, &sqlStatement, NULL);
        sqlite3_bind_int(sqlStatement, 1, 2);
        if(sqlite3_step(sqlStatement)) { NSLog(@"DONE!"); } else { NSLog(@"FAIL: %s",sqlite3_errmsg(db)); } 
```

我得到“完成！”，但数据库仍然是空的。

编辑＃2：

我最初试图修改数据库，因为它存储在应用程序包中。一个错误，对吧？所以我安装了一个脚本，将数据库复制到库目录并使用该副本。但脚本仍然不会将记录插入数据库。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:13:41.973

我设法解决了这个问题。最初的问题肯定是数据库文件必须在 Library 文件夹中。解决这个问题后，它只是因为我的 sql 语句没有正确插入正确数量的字段而无法正常工作。在更正我的陈述后，这个过程非常顺利。不知道为什么它没有产生错误。

# php - 使用 curl 登录网站的问题

> ID：14147552
> 
> 赞同：0
> 
> 时间：2013-01-03T21:27:45.680
> 
> 标签：php, curl, login

我需要登录一个网站来废弃数据，但我无法登录。下面是我的代码

我需要输入值的形式

```
<FORM id=form1 style="BACKGROUND-COLOR: #ffffff" name=form1 action="http://120.146.143.32/cgi-bin/APWPW.EXE" method=post>
<SPAN style="WIDTH: 715px; POSITION: relative; HEIGHT: 295px">
<SPAN id=text1 style="FONT-SIZE: 40px; LEFT: 130px; WIDTH: 490px; POSITION: absolute; TOP: 30px; HEIGHT: 20px">
<P>Welcome to Online Ordering</P></SPAN>
<SPAN id=text2 style="LEFT: 130px; WIDTH: 110px; POSITION: absolute; TOP: 110px; HEIGHT: 20px">
<P>Your Account #</P></SPAN>
<SPAN id=text3 style="LEFT: 130px; WIDTH: 110px; POSITION: absolute; TOP: 150px; HEIGHT: 20px">
<P>Password</P></SPAN>
<SPAN name=account style="LEFT: 260px; WIDTH: 166px; POSITION: absolute; TOP: 110px; BACKGROUND-COLOR: #ffff00"> APW146 </SPAN>
<INPUT id=password1 style="LEFT: 260px; WIDTH: 168px; POSITION: absolute; TOP: 150px; BACKGROUND-COLOR: #ffff00" type=password value="" name=password1>
<SPAN id=text4 style="LEFT: 10px; WIDTH: 300px; POSITION: absolute; TOP: 260px; HEIGHT: 20px">
<P>Keyin your Password then press enter</P></SPAN>
<INPUT id=inputimage1 style="LEFT: 460px; WIDTH: 200px; POSITION: absolute; TOP: 90px; HEIGHT: 170px" type=image src="http:/cobol/APW.JPG" name=inputimage1>
<INPUT type=hidden name=hpath value=\APW\>
<INPUT type=hidden name=haccount value=APW146>
</SPAN>
</FORM> 
```

这是我的 Curl 登录功能

```
 function login(){
    $ch = curl_init();
    //curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
   //  curl_setopt($ch, CURLOPT_URL, 'http://120.146.143.32/cgi-bin/APWPW.EXE');
   curl_setopt($ch, CURLOPT_URL, 'http://120.146.143.32/cgi-bin/APW.EXE'); //login URL

    curl_setopt ($ch, CURLOPT_POST, 1);
     curl_setopt($ch, CURLOPT_USERAGENT, "MozillaXYZ/1.0");
    //curl_setopt ($ch, CURLOPT_REDIRECT_URL,'http://120.146.143.32/cgi-bin/APW.EXE');

   $user = array(
        'account' => 'APW146',
        'haccount'=>'APW146',
        'password1'=>'',
        'inputimage1.x' => '0',
        'inputimage1.y' => '0',
        'hpath' =>'\APW\\'

    );

   print_r($user);
   //echo "\APW\\";
   // echo $postData;
    //exit();
   // curl_setopt($ch,CURLOPT_POSTFIELDS, array('password1=XXXXXXXX&inputimage1.x=0&inputimage1.y=0&hpath=%5CAPW%5C&haccount=APW146')); 
  curl_setopt ($ch, CURLOPT_POSTFIELDS, $user);
    curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    $store = curl_exec ($ch);
   // header("Set-Cookie:__utma=176595493.25749725.1353988994.1353988994.1353988994.1");
    header("Set-Cookie:__utmz=176595493.1353988994.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none);Set-Cookie:__utma=176595493.25749725.1353988994.1353988994.1353988994.1");

  // print_r($store);

   var_dump(curl_getinfo($ch));
  //  echo $store;
  //exit();

    return $ch;

} 
```

我做 var_dump 时得到的输出

```
array (size=22)
  'url' => string 'http://120.146.143.32/cgi-bin/APW.EXE' (length=37)
  'content_type' => string 'text/html' (length=9)
  'http_code' => int 200
  'header_size' => int 197
  'request_size' => int 226
  'filetime' => int -1
  'ssl_verify_result' => int 0
  'redirect_count' => int 0
  'total_time' => float 0.187
  'namelookup_time' => float 0
  'connect_time' => float 0.062
  'pretransfer_time' => float 0.062
  'size_upload' => float 659
  'size_download' => float 1703
  'speed_download' => float 9106
  'speed_upload' => float 3524
  'download_content_length' => float 1703
  'upload_content_length' => float 659
  'starttransfer_time' => float 0.109
  'redirect_time' => float 0
  'certinfo' => 
    array (size=0)
      empty
  'redirect_url' => string '' (length=0) 
```

var_dump($store) 的输出；

```
string '<HTML>

<HEAD>

<TITLE></TITLE>

<META http-equiv="Content-Type" content="text/html">

<META NAME="GENERATOR" CONTENT="FUJITSU NetCOBOL">

<SCRIPT LANGUAGE=JavaScript>

function body1_onload_func()

{

if (document.form1.hbalances.value=="Y")

document.form1.submit5.style.visibility="visible"

else

document.form1.submit5.style.visibility="hidden"

}

function onclick_func_b1()

{

document.form1.hchoice.value="SA"

}

function onclick_func_b2()

{

document.form1.hchoice.value="OS"

}

function oncli'... (length=2710) 
```

出于安全原因，我无法提供该帐户的密码。

谢谢抗体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:41:51.163

服务器的实际 html 输出应该在这里：

```
 $store = curl_exec ($ch); 
```

做一个**var_dump($store)**看看你得到了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T09:43:07.383

试试下面的代码。

```
$cookie_file_path = getcwd() . '/cookie.txt';
//Emulating Chrome Browser:
$agent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/A.B (KHTML, like Gecko) Chrome/X.Y.Z.W Safari/A.B.";

/*  Login part of the code -- start */

//First, get and write session cookie:
$ch = curl_init(); 

curl_setopt($ch, CURLOPT_URL,'http://3dstats.com/cgi-bin/edit2.cgi');
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
curl_setopt($ch, CURLOPT_COOKIEJAR,  $cookie_file_path);

$loginpage_html = curl_exec ($ch);

curl_close ($ch);

//Now, use the session cookie to actually log in:
$POSTFIELDS = "type=44&usr=". $your_username ."&UsrPass=". $your_password;  

$ch = curl_init(); 

curl_setopt($ch, CURLOPT_URL,'http://3dstats.com/cgi-bin/edit2.cgi');
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch, CURLOPT_POST, 1); 
curl_setopt($ch, CURLOPT_POSTFIELDS,$POSTFIELDS); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_REFERER, 'http://3dstats.com/cgi-bin/edit2.cgi');
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
curl_setopt($ch, CURLOPT_COOKIEJAR,  $cookie_file_path);

$logon_result = curl_exec ($ch);
curl_close ($ch); 
```

[在此处](https://stackoverflow.com/questions/6333005/help-with-login-to-site-with-php-curl)查看详细信息

# vb.net - 动画 GIF 不会停止循环 Winforms

> ID：14147553
> 
> 赞同：3
> 
> 时间：2013-01-03T21:27:51.463
> 
> 标签：vb.net, winforms, visual-studio-2010

我的表单上的 PictureBox 中有一个动画 gif，但它总是循环播放，我怎样才能让它只播放一次？

在另一个程序（例如浏览器）中查看 gif 时，它只播放一次，这是应该的。然而，在我的表单中，它一直在循环，动画循环之间只有很短的停顿。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:12:54.113

这花了我一段时间......在这里我获得了帧数并为 gif 设置动画直到帧结束。

```
Public Class Form1

    Dim animatedImage As New Bitmap("a.gif")
    Dim currentlyAnimating As Boolean = False
    Dim framecounter As Integer = 0
    Dim framecount As Integer
    Dim framdim As Imaging.FrameDimension
    Private Sub OnFrameChanged(ByVal o As Object, ByVal e As EventArgs)
        PictureBox1.Invalidate()
    End Sub

    Sub AnimateImage()
        If Not currentlyAnimating Then
            ImageAnimator.Animate(animatedImage, New EventHandler(AddressOf Me.OnFrameChanged))
            currentlyAnimating = True
        End If
    End Sub

    Private Sub PictureBox1_Paint(sender As Object, e As System.Windows.Forms.PaintEventArgs) Handles PictureBox1.Paint
        If framecounter < framecount Then
            AnimateImage()
            ImageAnimator.UpdateFrames()
            e.Graphics.DrawImage(Me.animatedImage, New Point(0, 0))
            framecounter += 1
        End If
    End Sub

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        framdim = New Imaging.FrameDimension(animatedImage.FrameDimensionsList(0))
        framecount = animatedImage.GetFrameCount(framdim)
    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T00:58:01.350

这是一个相当简单的解决方案。我为动画 gif 的一个循环的总组合时间创建了一个计时器。当计时器停止时，它会将图像更改为图片框中的静止图片。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    PictureBox1.Image = Image.FromFile("c:\GIF\AnimatedGif.gif")
    Timer1.Enabled = True
End Sub

Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    PictureBox1.Image = Image.FromFile("c:\GIF\StillImage.gif")
    Timer1.Enabled = False
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T21:33:44.467

如果您可以确定周期有多长，您可以通过在适当的时间后禁用图片框来停止动画。

编辑：查看 PictureBox 源代码后，看起来没有办法在 PictureBox 本身中修改此行为。

然而，似乎有一个可行的替代方案：[ImageAnimator](http://msdn.microsoft.com/en-us/library/system.drawing.imageanimator.animate.aspx)类，它是 PictureBox 内部使用的。MSDN 文章有一个很好的示例，说明如何制作一次动画。

# python - 添加素数和斐波那契数

> ID：14147554
> 
> 赞同：0
> 
> 时间：2013-01-03T21:27:51.800
> 
> 标签：python, numbers, fibonacci

> **可能重复：**
> [找出第 20、30、n 个素数。（我得到第 20 名但不是第 30 名？）[Python]](https://stackoverflow.com/questions/1995890/find-out-20th-30th-nth-prime-number-im-getting-20th-but-not-30th-python)
> [在 python 中列出 N 以下所有素数的最快方法](https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python)

质数 ：

```
P=[2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, …] 
```

斐波那契数：

```
F=[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, …] 
```

我希望用户在（1,100000）和程序之间给出一个随机数来总结结果`(F[n]+P[n])`，例如，如果`n=3` `F[3]+P[3]=7+2=9`

我写了以下代码：

```
import math
def F(n):
    return int(((1+math.sqrt(5))**n-(1-math.sqrt(5))**n)/(2**n*math.sqrt(5)))
L=[]
L.append(2)
L=[]
for n in range(2, 10000):
    for x in range(2, n):
        if n % x == 0:
            break
    else:
        # loop fell through without finding a factor
        L.append(n)

while True:
    x = raw_input().strip()
    if x == "END" or x == "end":
        break
    else:
        num = int(x)
        print F(num)+L[num] 
```

我很容易从 def F(n) 中找到 Fib 数字，但是创建素数列表确实令人头疼，因为随着数字的增加，创建列表需要一些时间，并且几乎不可能到达n 成那些巨大的数字..我试图做一个定义而不是创建列表，而只是为用户提供的 n 计算素数。有什么想法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:42:06.347

对于素数，您可以实现几个[素性测试。](http://en.wikipedia.org/wiki/Primality_test)我喜欢幼稚的方法，检查到 sqrt(n)，正如 Marcus Stuhr 指出的那样，还有 Erathostenes 的筛子。如果你只检查奇数的素数，你可以稍微优化一下。

# excel - 如何使用 VBA Excel 对 BASE64 和 SHA1 HMAC 加密进行编码

> ID：14147555
> 
> 赞同：2
> 
> 时间：2013-01-03T21:27:59.273
> 
> 标签：excel, vba, google-maps-api-3

我一直在整个互联网上进行搜索，此外还就这个主题与谷歌的服务台人员保持联系。到目前为止没有运气。

我正在尝试通过 VBA 中的 Web 服务调用使用 Google API for Directions。我的代码工作得非常好，它从 web 服务中给出了正确的结果。但是，如果我想发送超过几千个每日请求，他们要求我在将数据发送给他们之前对其进行加密。

他们在下面有一个代码，但与 VBA 无关，仅适用于 VB.net。

这里有人熟悉 VBA 中的代码可用性吗？VBA 是否具有所需的库，可以对代码进行一些小的调整，或者？

```
Option Explicit On
Option Strict On

Imports System
Imports System.Security.Cryptography
Imports System.Text

Namespace SignUrl
    Public Module GoogleUrlSigner
        Public Function Sign(ByVal url As String, ByVal keyString As String) As String
            Dim encoding As ASCIIEncoding = New ASCIIEncoding()
        'URL-safe decoding
        Dim privateKeyBytes As Byte() = Convert.FromBase64String(keyString.Replace("-", "+").Replace("_", "/"))

        Dim objURI As Uri = New Uri(url)
        Dim encodedPathAndQueryBytes As Byte() = encoding.GetBytes(objURI.LocalPath & objURI.Query)

        'compute the hash
        Dim algorithm As HMACSHA1 = New HMACSHA1(privateKeyBytes)
        Dim hash As Byte() = algorithm.ComputeHash(encodedPathAndQueryBytes)

        'convert the bytes to string and make url-safe by replacing '+' and '/' characters
        Dim signature As String = Convert.ToBase64String(hash).Replace("+", "-").Replace("/", "_")

        Add the signature to the existing URI.
        Return objURI.Scheme & "://" & objURI.Host & objURI.LocalPath & objURI.Query & "&signature=" & signature
    End Function
End Module

Public Module Program
    Sub Main()
        Const keyString As String = "vNIXE0xscrmjlyV-12Nj_BvUPaw="

        'The URL shown here is a static URL which should be already
        'URL-encoded. In practice, you will likely have code
        'which assembles your URL from user or web service input
        'and plugs those values into its parameters.
        Dim urlString As String = "http://maps.google.com/maps/api/geocode/json?address=New+York&sensor=false&client=clientID"

        Console.WriteLine(GoogleUrlSigner.Sign(urlString, keyString))
    End Sub
End Module
End Namespace 
```

# lucene.net - 使用 MultiFieldQueryParser 对特定术语进行通配符搜索

> ID：14147558
> 
> 赞同：0
> 
> 时间：2013-01-03T21:28:23.537
> 
> 标签：lucene.net, wildcard

我正在利用 Lucene.net 3.0 版 API 为我的项目创建和搜索索引。我的索引中的每个文档都有三个字段：

*   交易 ID
*   代理人
*   贷方

我的要求是这样的：

1.  如果搜索词与**TransactionId**的文档值的*第一部分*匹配，我想要一个命中。例如，如果我搜索“ab”，则**TransactionId**等于“ab-1”或“ab-2”的文档将被命中。

*****   *当完整的搜索词*匹配**Agent**和**Lender**时，我只想要命中。搜索“ab”*不会*返回 Lender 值为“ab-1”或“ab-2”的文档。**** 

 ****到目前为止，我有以下代码块：

```
var searcher = new IndexSearcher(FSDirectory.Open(path));
var parser = new MultiFieldQueryParser(Version.LUCENE_30, 
 new[] {"TransactionId", "Agent", "Lender"},
 new StandardAnalyzer(Version.LUCENE_30));

var query = parser.Parse(queryText);
var hits = searcher.Search(query, 200); 
```

如果`queryText`是 "ab" 那么查询的值是`{TransactionId:ab Agent:ab Lender:ab}`

我知道我正在寻找类似的东西`{TransactionId:ab* Agent:ab Lender:ab}`

有什么办法可以做到这一点`MultiFieldQueryParser`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:24:14.643

您可能可以通过继承`MultiFieldQueryParser`.

以下似乎可行，也许您可​​以在此基础上进行构建。请注意，解析 BooleanQuery 应该是递归的，因为您最终可能会遇到嵌套查询。

**免责声明：这段代码并不优雅，可能很容易破坏，它的目的是作为一个简单的例子**

```
 public class WildCardForFieldQueryParser : MultiFieldQueryParser
    {
        public WildCardForFieldQueryParser(Lucene.Net.Util.Version version, 
                                           string [] fields, 
                                           Analyzer analyzer, 
                                           HashSet<string> wildcardFields)
            :base(version, fields, analyzer)
        {
            this._wildcardFields = wildcardFields;
        }

        public override Query Parse(string query)
        {
            // clause replacement should be recursive
            Query q = base.Parse(query);
            if (q is BooleanQuery)
            {
                foreach (var clause in q as BooleanQuery)
                {
                    if (clause.Query is TermQuery && this._wildcardFields.Contains(((TermQuery)clause.Query).Term.Field))
                    {
                        clause.Query = new PrefixQuery(new Term(((TermQuery)clause.Query).Term.Field, ((TermQuery)clause.Query).Term.Text));
                    }
                }
            }
            return q;
        }
        private HashSet<string> _wildcardFields;
    } 
```****

# pthreads - 所有线程都可用的互斥锁

> ID：14147559
> 
> 赞同：0
> 
> 时间：2013-01-03T21:28:23.617
> 
> 标签：pthreads, mutex

我的问题是我有这段代码：

```
#include<stdio.h>
#include<semaphore.h>
#include<pthread.h>
    int number;
   pthread_mutex_t mutex[number];
   pthread_t threads[number];

void *dosomething(void *num)
{
   int *i=num;
   pthread_mutex_lock(&mutex[i]);
    //dosomething
   pthread_mutex_unlock(&mutex[i]);
}

int main(int argc, char *argv[]) //<-- main
{

    printf("How many threads do you want?");
     scanf("%d",&number);

     int rc,t;
   for(t=1;t<number;t++){
     pthread_mutex_init(&mutex[t],NULL);
     printf("In main: creating thread %d \n", t);
     rc = pthread_create(&threads[t], NULL, philospher,(void *)t);
            }

     if (rc){
       printf("ERROR; return code from pthread_create() is %d\n",rc);

      exit(0);
            }

   pthread_exit(NULL);
} 
```

当我尝试编译它时，它说：在文件范围内可变地修改了“互斥锁”/在文件范围内可变地修改了“线程”。我只希望它创建许多用户将定义的互斥锁和线程，并且可以从所有创建的线程中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:14:08.240

这是部分答案。请注意，您发布的代码中还有其他错误（例如使用指针作为索引），并且以下代码仅具有最小可能的错误处理。我会让你理清这些细节。

```
// ...

int number;
pthread_mutex_t* mutex;  // declare as pointers instead of arrays
pthread_t* threads;      //    so they can be dynamically sized

void alloc_thread_info(int number)
{
    int i;

    // allocate the arrays with the requested size

    mutex = calloc( number, sizeof(*mutex));
    threads = calloc(number, sizeof(*threads));

    if (!mutex || !threads) {
        abort();
    }

    for (i = 0; i < number; ++i) {
        pthread_mutex_init( &mutex[i]);
    }

    return;    
} 
```

# java - 如何禁用 Quartz 更新尝试？

> ID：14147564
> 
> 赞同：26
> 
> 时间：2013-01-03T21:28:38.743
> 
> 标签：java, quartz-scheduler

我在用：

```
 <dependency>
        <groupId>org.quartz-scheduler</groupId>
        <artifactId>quartz</artifactId>
        <version>1.8.0</version>
    </dependency> 
```

当应用程序出现时，我一直得到：

```
2013-01-03 15:25:34 UpdateChecker [DEBUG] Checking for available updated 
                        version of Quartz...
2013-01-03 15:25:43 UpdateChecker [DEBUG] Quartz version update check failed:
                        java.io.IOException: Server returned HTTP response 
                        code: 503 for URL: long url here 
```

**我怎样才能消除这些？（消息和尝试更新）**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-03T21:32:25.547

在`quartz.properties`中，您可以添加

```
org.quartz.scheduler.skipUpdateCheck=true 
```

在代码中，这看起来像：

```
Properties props = new Properties();
props.setProperty("org.quartz.scheduler.skipUpdateCheck","true");

// set other properties ...such as
props.setProperty("org.quartz.jobStore.class", "org.quartz.simpl.RAMJobStore");
props.setProperty("org.quartz.threadPool.class", "org.quartz.simpl.SimpleThreadPool");
props.setProperty("org.quartz.threadPool.threadCount", "4");

SchedulerFactory schdFact = new StdSchedulerFactory(props); 
```

*编辑：*

从下面@Stephan202 的评论中，您可以使用常量[PROP_SCHED_SKIP_UPDATE_CHECK](http://quartz-scheduler.org/api/2.0.0/org/quartz/impl/StdSchedulerFactory.html#PROP_SCHED_SKIP_UPDATE_CHECK)

这种情况下的代码是

```
props.setProperty(StdSchedulerFactory.PROP_SCHED_SKIP_UPDATE_CHECK,"true"); 
```

# cocoa - 如何将 GCD 对象放入 CF 集合（CFArray、CFDictionary）？

> ID：14147565
> 
> 赞同：0
> 
> 时间：2013-01-03T21:28:39.670
> 
> 标签：cocoa, grand-central-dispatch, core-foundation

部署目标是 10.6，因此需要手动管理内存。该集合应该负责保留/释放 GCD 对象。

我相信 CFDictionary 的 CFArray 的自定义回调会有所帮助，但是我正在寻找一个插入式、经过良好测试的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T10:20:46.180

回调和集合创建很简单：

```
static const void * dispatchObjectRetainCallBack(CFAllocatorRef allocator, const void *value)
{
    if (value) {
        dispatch_retain(value);
    }
    return value;
}

static void dispatchObjectReleaseCallBack(CFAllocatorRef allocator, const void *value)
{
    if (value) {
        dispatch_release(value);
    }
}

CFMutableArrayRef CreateDispatchHoldingArray()
{
    CFArrayCallBacks callBacks = {
        0,
        dispatchObjectRetainCallBack,
        dispatchObjectReleaseCallBack,
        NULL,
        NULL
    };
    return CFArrayCreateMutable(kCFAllocatorDefault, 0, &callBacks);
}

CFMutableDictionaryRef CreateDispatchHoldingDictionary()
{
    CFDictionaryValueCallBacks valueCallBacks = {
        0,
        dispatchObjectRetainCallBack,
        dispatchObjectReleaseCallBack,
        NULL,
        NULL
    };
    return CFDictionaryCreateMutable(kCFAllocatorDefault, 0, &kCFTypeDictionaryKeyCallBacks, &valueCallBacks);
} 
```

稍微棘手的部分是让`dispatch_object_t`s 进出集合。您不能简单地将类型变量强制`dispatch_object_t`转换为 a `void *`，因为`dispatch_object_t`它是联合的 typedef。编译器给出错误：

```
Operand of type 'dispatch_object_t' where arithmetic or pointer type is required 
```

您必须通过其中的一种联合类型`dispatch_object_t`，如下所示：

```
void AddDispatchObjectToArray(CFMutableArrayRef array, dispatch_object_t obj)
{
    void* voidPtrObj = obj._do;
    CFArrayAppendValue(array, voidPtrObj);
}

dispatch_object_t GetDispatchObjectAtIndex(CFMutableArrayRef array, CFIndex index)
{
    dispatch_object_t result;
    result._do = (struct dispatch_object_s *)CFArrayGetValueAtIndex(array, index);
    return result;
} 
```

# ios - 如何确定 AdMob 是否加载了广告？

> ID：14147573
> 
> 赞同：5
> 
> 时间：2013-01-03T21:29:04.890
> 
> 标签：ios, cocoa-touch, error-handling, admob, iad

我正在`AdMob`用作 的备份`iAd`，但我无法确定是否`AdMob`交付..`iAd`我可以检查`isBannerLoaded`或检查什么，但不能检查`AdMob`.. 无论如何，我现在一切正常，除非没有互联网连接！当`iAd`无法加载广告并调用`didFailToReceiveAdWithError`时，我会启动`AdMob`. 对此进行测试时，我使用的错误原因是“没有互联网连接”，但 AdMob 并不称其为自己的`didFailToReceiveAdWithError`. 对于 AdMob 而言，没有互联网连接似乎不是错误 ( `GADBannerView*`)

如何判断 GADBannerView 是否失败？

**编辑**

好的，所以这里基本上是我的代码：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    [self initiAdBanner];
    [self initAdMobBanner];
}

-(void)initAdMobBanner{}//initiates variable adMobBannerView(GADBannerView)
-(void)initiAdBanner{}//initiates variable iAdBannerView(ADBannerView)

-(void)hideBanner:(UIView*)banner{} //hides banner if visible
-(void)showBanner:(UIView*)banner{} //shows banner if hidden

//blah blah

-(void)adView:(GADBannerView*)banner didFailToReceiveAdWithError:(GADRequestError*)error
{
    //Never gets called, should be called when both iAd and AdMob fails.
    NSLog(@"AdMobBanner failed.");
    [self hideBanner:banner];
}

-(void)bannerView:(ADBannerView*)banner didFailToReceiveAdWithError:(NSError*)error
{
    //If iAd fails, due to no internet connection or whatever, then it calls this.
    [self adMobRequest];
    [self hideBanner:iAdBannerView];
    [self showBanner:adMobBannerView];
} 
```

当 iAd 失败并调用 时`(ADBannerView*)didFailToReceiveAdWithError`，我启动了 AdMob，但是当没有互联网连接时，AdMob 不会调用`(GADBannerView*)didFailToReceiveAdWithError`. 为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T23:59:22.307

`didFailToReceiveAdWithError`如果没有互联网连接，AdMob 将调用。确保您注册了委托以侦听回调方法：

`[bannerView_ setDelegate:self];`

您还应该考虑使用[AdMob 中介](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation)，而不是尝试推出自己的中介解决方案。您只需在 AdMob 用户界面中创建一个中介展示位置，将[iAd 适配器](https://developers.google.com/mobile-ads-sdk/ad-network-mediation)添加到您的项目中，然后请求一个具有中介展示位置 ID 的广告，就会为您完成通过不同网络展示的广告。

# ios - whatsapp url 方案 ios dev

> ID：14147579
> 
> 赞同：4
> 
> 时间：2013-01-03T21:29:37.667
> 
> 标签：ios, url, url-scheme, whatsapp

在新版本中，whatsapp 实现了 url 方案，如

```
NSURL *whatsAppURL = [NSURL URLWithString:@"Whatsapp://"];

if ([[UIApplication sharedApplication] canOpenURL:whatsAppURL]) {

    [[UIApplication sharedApplication] openURL:whatsAppURL];

} 
```

任何人都知道是否有任何相关的行动？喜欢创建一条新消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-17T09:18:57.560

随着新 iPhone v2.10.1 的发布，WhatsApp 现在公开支持自己的 url 方案。例如，要使用文本“Hello World”打开一个新的聊天作曲家，您必须这样做：

```
NSURL *whatsappURL = [NSURL URLWithString:@"whatsapp://send?text=Hello%20World!"];
 if ([[UIApplication sharedApplication] canOpenURL: whatsappURL]) {
    [[UIApplication sharedApplication] openURL: whatsappURL];
 } 
```

更多信息可以在他们网站上的这个常见问题解答中找到：http: [//www.whatsapp.com/faq/en/iphone/23559013](http://www.whatsapp.com/faq/en/iphone/23559013)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T21:38:56.360

WhatsApp 已根据[此答案](https://stackoverflow.com/a/10439662/846273)`whatsapp://`注册 URL 方案，您也许可以启动 WhatsApp 应用程序。

不幸的是，目前还没有可用的文档，因此不知道是否有与之相关的有用操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-18T19:03:01.783

三天前，它成为可能[http://www.whatsapp.com/faq/en/iphone/23559013](http://www.whatsapp.com/faq/en/iphone/23559013)

# tfs - 可以将 Team Foundation 服务与 CodePlex 一起使用吗？

> ID：14147584
> 
> 赞同：0
> 
> 时间：2013-01-03T21:29:52.553
> 
> 标签：tfs, codeplex, azure-devops

我不喜欢内置 CodePlex TFS 版本控制中的有限（默认）团队协作和敏捷规划功能（没有积压、没有板、没有用户故事、没有迭代等）。

理想情况下，我希望将项目保留在功能齐全的基于云的 Team Foundation Service 中，并将其直接连接到我的 CodePlex 项目。

是否可以？也许有一些技巧？

![在此处输入图像描述](../Images/6224db08c716d59308c3970953a71126.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:02:54.773

尽管 Codeplex 团队已升级到 TFS 服务。团队协作功能尚未启用。

此处列出了当前启用的 TFS 2012 功能集[http://blogs.msdn.com/b/bharry/archive/2012/10/02/codeplex-upgraded-to-tfs-2012.aspx](http://blogs.msdn.com/b/bharry/archive/2012/10/02/codeplex-upgraded-to-tfs-2012.aspx)

我将与产品团队核实，看看是否有任何更新要分享。

问候， 塔伦

# android - Android 自定义身份验证器允许访问屏幕

> ID：14147588
> 
> 赞同：4
> 
> 时间：2013-01-03T21:30:03.800
> 
> 标签：android, accountmanager

通过 Google 的身份验证器登录时，每个应用程序 (uid) 的每个帐户都会提示一次允许访问屏幕 (GrantPermissionActivity)，但是没有记录可以选择在哪里为自定义 3rd 方身份验证器显示该屏幕。

任何人都知道是否有办法做到这一点？

我尝试插入自定义检查并模仿 GrantPermissionActivity，但问题是 AuthToken 已缓存，因此我无法弄清楚如何在第三方应用程序上强制执行此操作，因为 getAuthToken 将简单地通过缓存令牌的自定义代码。

请注意，这与以下问题不同：[在用户已经允许访问之后，您如何强制 AccountManager 显示“访问请求”屏幕？](https://stackoverflow.com/questions/6852256/how-do-you-force-accountmanager-to-show-the-access-request-screen-after-a-user)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T16:41:11.063

我想我已经找到了一个很好的解决方案，但这可能不是 Google 允许屏幕的工作方式。

在 Authenticator 中，你得到了调用包，由于 AccountManager 验证了应用程序的 UID/PID，因此无法被欺骗。您使用调用包作为令牌类型的一部分以及应用程序的安装日期（可选，通过使用包管理器找到），这样每个应用程序的令牌将被单独缓存。

如果token类型中不包含调用包的包名，则不返回token。

对于每种身份验证令牌类型，您还验证客户端密钥是否与客户端密钥有关。如果这是客户第一次要求每个自定义帐户类型的每个帐户的密钥，您将只返回允许访问屏幕意图。

请注意，如果您想将应用列入白名单，也可以基于每个帐户令牌类型进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:37:29.513

我没有完整的答案给你，但也许我可以在你的路上帮助你。

查看[getAuthToken](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/accounts/AccountManagerService.java#1032)实现时，您可以看到如果身份验证器使用[customTokens](http://developer.android.com/reference/android/accounts/AuthenticatorDescription.html#customTokens) ，则会自动授予权限。[AuthenticationDescription](http://developer.android.com/reference/android/accounts/AuthenticatorDescription.html)的文档还提到，如果使用自定义令牌，“Authenticator 会处理自己的令牌缓存和权限屏幕”。因此，如果您是这种情况，我认为不可能出现此屏幕。

> 我试图插入自定义检查并模仿 GrantPermissionActivity，但问题是 AuthToken 被缓存...

如果您使用 invalidateAuthToken 使令牌[无效](http://developer.android.com/reference/android/accounts/AccountManager.html#invalidateAuthToken%28java.lang.String,%20java.lang.String%29)，则应将其从缓存中清除。只需记住将要使其无效的令牌传递给方法（请参阅[AccountManager：invalidateAuthToken 不会使令牌无效](https://stackoverflow.com/questions/12523471/accountmanager-invalidateauthtoken-does-not-invalidate-the-token/13579281#13579281)）。

# jquery - jquery分页添加内容容器ID

> ID：14147598
> 
> 赞同：0
> 
> 时间：2013-01-03T21:30:32.440
> 
> 标签：jquery

我找不到在哪里为我的内容添加 ID 以使这个分页工作？

基于：[jQuery 分页 + Twitter Bootstrap](https://stackoverflow.com/questions/8400804/jquery-pagination-twitter-bootstrap)

寻呼机有效，但我认为它需要找到我的内容容器，以便知道要分页哪些内容？

小提琴：http: [//jsfiddle.net/infatti/LQbwT/](http://jsfiddle.net/infatti/LQbwT/)

插件：[jQuery 分页 + Twitter Bootstrap](https://stackoverflow.com/questions/8400804/jquery-pagination-twitter-bootstrap)

```
<ul id="myContent">
    <li>Lorem ipsum dolor sit amet.</li>
    <li>Lorem ipsum dolor sit amet.</li>
    <li>Lorem ipsum dolor sit amet.</li>
    <li>Lorem ipsum dolor sit amet.</li>
    <li>Lorem ipsum dolor sit amet.</li>
    <li>Lorem ipsum dolor sit amet.</li>
    <li>Lorem ipsum dolor sit amet.</li>
    <li>Lorem ipsum dolor sit amet.</li>
</ul>

<!-- pagination -->
<div id="pager2" class="pagination"></div>

$('#pager2').pagination(100,{callback:function(page,component){
    console.info(page);
}}); 
```

# input - J 的命令行输入

> ID：14147601
> 
> 赞同：3
> 
> 时间：2013-01-03T21:30:43.440
> 
> 标签：input, j

我正在尝试阅读此链接后的命令行输入（[http://www.jsoftware.com/help/user/hashbang.htm](http://www.jsoftware.com/help/user/hashbang.htm)）

```
0".>,.2}.ARGV 
```

我可以理解**2}.ARGV**删除了“jconsole”和程序名称部分。

**0"。**把字符串变成数字

为什么我们需要**，。**

这似乎不必要地为输入参数增加了额外的等级，以防万一

```
'a b c d' =: 0".>,.2}.ARGV
 $a
 1 
```

为什么不只是

```
'a b c d' =: 0".> 2}.ARGV
$a 
```

另一个警告：

```
'a' =: 0".> 2}.ARGV
$a
1 
```

因此，如果您只有一个参数传入，`'a'`则成为排名为 1 的列表，而不是输入列表的一个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T21:16:57.777

不同之处在于，如果没有`,.`，结果并不总是“编号”( `".`) 项的列表，每个参数一个。Ravelling 保证`0".`将分别适用于每个参数。

例如，如果您的 ARGV 是字符列表：

```
]in =: 2 }. ARGV
┌─┬─┬─┬─┐
│1│2│3│4│
└─┴─┴─┴─┘
> ,. in
1
2
3
4 
```

但

```
> in
1234 
```

所以

```
0". > ,. in
1 2 3 4 
```

但

```
0". > in
1234 
```

单独应用于`0".`每个参数的其他方法包括`(0". >)"0 in`和`> 0". &.> in`。在这三个中，使用ravel 的那个是最有效的。

# arrays - 在字典数组中搜索布尔值

> ID：14147604
> 
> 赞同：0
> 
> 时间：2013-01-03T21:30:56.920
> 
> 标签：arrays, dictionary, vb6

我有这样的结构

```
Private wells() As Dictionary 
```

我需要知道每个字典中存在的键“活动”是否至少一次设置为真。

有没有办法在不循环的情况下存档它？就像是

```
dim hasActive as boolean
hasActive = wells()["active"] = true 
```

现在我正在循环，但应用程序是 15 年前编写的，并且每个记录都添加了更多的记录和更多的字典键，因此循环开始花费的时间比等待的时间更长。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:32:47.840

简短的回答：没有。

听起来你现在应该考虑另一种数据结构甚至数据库。像 Dictionary 这样简单的单键/值对技术有其局限性。“字典数组”刚开始就感觉很奇怪。

虚构的 ADO 记录集创建了一个方便的“超级集合”对象，该对象可以具有多个值/列，并且您可以通过“优化”动态属性索引需要频繁用作键的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:10:47.203

您不能直接执行此操作，但您可以轻松编写一个类模块来包装您的字典数组，并提供让您操作这些项目的方法。然后，包含类还可以跟踪项“活动”为 True 的字典计数。这些方法会在“活动”项设置为 True 时增加计数，并在活动项设置为 False 时减少计数。然后，您可以检查计数以了解当前是否有任何字典具有设置为 True 的“活动”项。

在 Class_Initialize 中实例化数组和字典，并将计数设置为零。提供添加和删除项目的方法（以及您可能需要的任何其他方法），以及告诉您是否有任何字典将其“活动”项目设置为 True 的属性。

当然，这确实意味着您必须更改项目中的所有代码才能使用您的类，而不是直接访问数组和字典。不过，我认为这不应该那么困难。

# c# - mvvmcross 导航问题，出现异常：找不到 [ViewModelName] 的视图

> ID：14147614
> 
> 赞同：3
> 
> 时间：2013-01-03T21:31:35.980
> 
> 标签：c#, mvvmcross

我似乎对如何让 MvvmCross 检测与 Mono for Android 中的视图相关联的 ViewModel 感到困惑。我试图按照 TwitterSearch 来实现导航，但它不起作用。

```
RequestNavigate<LoginViewModel>(); 
```

这是我的看法：

```
[Activity(Label = "Login")]
public class LoginActivity : MvxBindingActivityView<LoginViewModel>
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        App.InitializeRestConnection(this);
    }

    protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.LoginBindable);
    }

} 
```

这是一个例外：

```
I/ActivityManager(  307): Displayed com.desco.pendulum/pendulum.androidapp.SplashScreenActivity: +1s373ms (total +4s420ms)
I/Navigation( 8643):   0.50 Navigate to LoginViewModel with args
I/mono-stdout( 8643): Navigation:Diagnostic:  0.50 Navigate to LoginViewModel with args
I/MonoDroid( 8643): UNHANDLED EXCEPTION: System.Collections.Generic.KeyNotFoundException: Could not find view for dESCO.Mobile.ViewModels.LoginViewModel
I/MonoDroid( 8643): at Cirrious.MvvmCross.Views.MvxViewsContainer.GetViewType (System.Type) <0x001a4>
I/MonoDroid( 8643): at Cirrious.MvvmCross.Droid.Views.MvxAndroidViewsContainer.GetIntentFor (Cirrious.MvvmCross.Views.MvxShowViewModelRequest) <0x00023>
I/MonoDroid( 8643): at Cirrious.MvvmCross.Droid.Views.MvxAndroidViewPresenter.Show (Cirrious.MvvmCross.Views.MvxShowViewModelRequest) <0x00037>
I/MonoDroid( 8643): at Cirrious.MvvmCross.Droid.Views.MvxAndroidViewDispatcher/<>c__DisplayClass1.<RequestNavigate>b__0 () <0x0002f>
I/MonoDroid( 8643): at Java.Lang.Thread/RunnableImplementor.Run () <0x0003f>
I/MonoDroid( 8643): at Java.Lang.IRunnableInvoker.n_Run (intptr,intptr) <0x00037>
I/MonoDroid( 8643): at (wrapper dynamic-method) object.7060b187-418d-4bca-ad4f-8b9cae936501 (intptr,intptr) <0x0003b> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T21:55:36.760

我看不出您的设置有任何明显错误。

默认的 Droid 框架设置使用以下逻辑在 ExecutingAssembly 中查找实现 IMvxAndroidView 的类：[https ://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/Platform/MvxBaseSetup.cs#L200](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/Platform/MvxBaseSetup.cs#L200)

因此，我看不出您的 LoginActivity 视图没有被拾取的任何明显原因。

您可以做的一件快速的事情是向您的 Setup.cs 添加一些调试代码，以查看正在检测哪些视图：

```
 protected override IDictionary<Type, Type> GetViewModelViewLookup()
  {
      var toReturn = base.GetViewModelViewLookup();
      MvxTrace.Trace("Tracing viewModels and views");
      foreach (var kvp in toReturn)
      {
          MvxTrace.Trace("Seen pair {0} : {1}", kvp.Key.Name, kvp.Value.Name);
      }
      return toReturn;
  } 
```

如果这表明列表为空或缺少您的活动，那么恐怕我们需要逐步检查反射逻辑以找出它为什么没有拾取您的活动。

* * *

在真正绝望的情况下，您也可以伪造结果：

```
 protected override IDictionary<Type, Type> GetViewModelViewLookup()
  {
      return new Dictionary<Type,Type>() { { typeof(LoginViewModel), typeof(LoginActivity) } };
  } 
```

但这可能不是适合您的长期解决方案

* * *

如果这是由某种“解决方案设置”差异引起的 - 例如，如果您以某种方式将 Setup.cs 放在与您的视图不同的项目中 - 那么可能以某种方式覆盖默认约定会对您有所帮助。

为此，在您的 Setup.cs 中，覆盖代码：

```
 public virtual Assembly ExecutableAssembly
    {
        get { return GetType().Assembly; }
    }

    protected override IDictionary<System.Type, System.Type> GetViewModelViewLookup()
    {
        return GetViewModelViewLookup(ExecutableAssembly, typeof (IMvxAndroidView));
    } 
```

在基本设置类中 - [https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Platform/MvxBaseAndroidSetup.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Droid/Platform/MvxBaseAndroidSetup.cs)

这可以通过覆盖 ExecutingAssembly 属性（尽管这似乎有点错误，因为它的名称）或覆盖 GetViewModelViewLookup 方法来完成。例如，如果您想查看几个单独的程序集，您可以使用：

```
 public List<Assembly> MyViewAssemblies { get; set; }

    protected override IDictionary<System.Type, System.Type> GetViewModelViewLookup()
    {
        var toReturn = new Dictionary<Type, Type>();

        foreach (var assembly in MyViewAssemblies)
        {
            var contributions = base.GetViewModelViewLookup(assembly, typeof (IMvxAndroidView));
            foreach (var kvp in contributions)
            {
                toReturn[kvp.Key] = kvp.Value; 
            }
        }

        return toReturn;
    } 
```

# iphone - 异步加载从 UIImagePickerController 相机拍摄的照片

> ID：14147619
> 
> 赞同：0
> 
> 时间：2013-01-03T21:31:47.797
> 
> 标签：iphone, ios, cocoa-touch, uiimagepickercontroller, alassetslibrary

最初，我认为我可以使用`UIImagePickerControllerReferenceURL`来获取`ALAsset`，然后使用它来生成并使用 GCD 异步`aspectRatioThumbnail`加载。`ALAsset`但是，从照片中拍摄照片`UIImagePickerController`似乎不会产生照片，`ALAsset`因为它没有存储在照片库中，仅存储在内存中。

我仍然想以某种方式制作一个，这样我就可以像使用照片库一样`ALAsset`访问`aspectRatioThumbnail`并加载它。`UIImagePickterController`是否可以在不将照片保存到照片库的情况下执行此操作？

否则，除了使用之外还有其他好的方法来完成这个`ALAsset`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:27:58.717

以下是如何做到这一点，制作缩略图并没有什么意义，因为这样做可能会花费太多的性能：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self dismissModalViewControllerAnimated:YES];
    self.photoImageView.image = nil;
    [self.activityIndicatorView startAnimating];

    dispatch_async(dispatch_get_global_queue(0, 0), ^
    {
        UIImage *image = [[info objectForKey:@"UIImagePickerControllerOriginalImage"] retain];
        dispatch_async(dispatch_get_main_queue(), ^
        {
            self.photoImageView.image = image;
            [self.activityIndicatorView stopAnimating];
            [image release];
        });

    });
} 
```

# java - 使用硬编码坐标缩放游戏以适应任何屏幕？

> ID：14147622
> 
> 赞同：1
> 
> 时间：2013-01-03T21:32:11.147
> 
> 标签：java, scale, resolution, scaling, pixels

我已经在一个非常基本的java游戏上工作了大约一个月，我遇到了一个巨大的问题。它可以在任何显示器上正常工作，只要该显示器的分辨率高于 1280 x 720，这是我设置游戏运行时的分辨率。直到我在我朋友的电脑上运行它并且它并不完全适合他的屏幕时，我才意识到这是一个问题。这里真正的问题是，我正在制作一种 2D 自上而下的射击游戏，每个关卡中的墙壁和道具都有硬编码的坐标。我无法将所有内容都与屏幕尺寸相关，因为这不仅会非常困难，而且还会使游戏的难度甚至可能随着屏幕分辨率而变化。我想一种解决方案是让它在 800 x 600 中运行，只是让所有的关卡更小，但那不是

我想知道是否有办法让我扩展我的程序以适应显示器。例如，如果我在 4:3 显示器上运行，例如我朋友的 1024x768，我希望程序按比例适合屏幕，（因此它的顶部和底部会有黑条，就像宽屏视频一样4:3 显示器），但我也希望我的所有墙壁和电源都放置在相对于新缩放屏幕的位置。

是否有某种方法可以在程序中“拉伸”或“缩小”像素，以便所有内容都显示在窗口中并缩放？即使不是字面意思。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:41:16.090

假设您使用标准 Graphics/Graphics2D，您可以缩放绘画：

```
private static final double SCALE = 0.75;
private static final double INV_SCALE = 1.0 / SCALE;

@Override
public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D)g;
    g2.scale(SCALE, SCALE);
    ...
    g2.scale(INV_SCALE, INV_SCALE); 
```

}

比例因子（这里是 SCALE）当然更难设置。

鼠标坐标必须自己缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:34:27.630

在代码中使用逻辑分辨率并在输出时对其进行缩放。

# php - 获取活动菜单 URL

> ID：14147627
> 
> 赞同：0
> 
> 时间：2013-01-03T21:32:46.603
> 
> 标签：php, url, joomla, seo, canonical-link

因为没有提供规范 URL 的 Joomla 2.5 工作插件（除了 SEF404），我将尝试“破解”我的模板并在需要时包含规范 URL。

因为每个菜单项都可以通过不同的 URL 和 GET 参数访问，所以我想在需要时包含规范的 URL。

我认为最简单的解决方案是获取活动菜单项的 URL，如果访问的 url 与此不同，则将 canonical-tag 包含在标题中（模板的 index.php 的）。

我有基本的 PHP 知识，但我不知道如何获取活动菜单项的 URL 和访问的 URL。谁能告诉我如何获取这些信息？如果我有这个，那么我可以简单地比较它，如果它不同，请添加标签。

请发布一些示例代码如何获取此信息。

编辑：这是一些基本信息（仅与“主页”有关），但对我来说，这段代码不起作用。[http://writenowdesign.com/joomla-tutorials/joomla-trips-and-tricks/add-canonical-url-link-to-joomla-home-page/](http://writenowdesign.com/joomla-tutorials/joomla-trips-and-tricks/add-canonical-url-link-to-joomla-home-page/)

EDIT2：例如：

```
<?php

// Source: http://www.php.de/php-einsteiger/91123-erledigt-aktuelle-browser-url-ausgeben-funktion-zweckdienlich-2.html
function getUrl($arrAddParam = false, $xhtmlValid = false, $anchor = false, $dropCalledArgs = false) { 

    $url  = !empty($_SERVER['HTTPS']) ? 'https://' : 'http://'; 
    $url .= $_SERVER['SERVER_NAME']; 
    $url .= $_SERVER['SCRIPT_NAME']; 

    // merge input and user param arrays 
    $arrParam = is_array($arrAddParam) ? $arrAddParam : array(); 
    if ($dropCalledArgs === false) $arrParam = array_merge($_GET,$arrParam); 

    if (!empty($arrParam)) { 
        $arg_separator = $xhtmlValid ? '&amp;' : '&'; 
        $url .= "?". http_build_query($arrParam, '', $arg_separator); 
    } 

    // anchor 
    if ($anchor !== false) { 
        $url .= '#'.$anchor; 
    }     

    return $url; 
}

// Get the application object
$app = JFactory::getApplication();
// Get's the menu object
$menu = $app->getMenu();
// Current URL
$activeUrl = getUrl();
// SHOULD get the active menu target as string, but it's an object
// THIS is my question how to get the URL of the current active menu item
$menuUrl = $menu->getActive();

?> 
```

编辑3：[这](http://www.khawaib.co.uk/blog/menu-item-properties/)是获取此网址的可能性。但我需要 SEO 网址而不是“普通网址”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T20:38:23.910

与此同时，我找到了解决方案。也许这可以帮助其他人在我的情况下：

```
<?php

// Get SEO Page URL
$pageUrl = JURI::current();
// Get URI Object
$uri = & JFactory::getURI();
// Get URI String
$pageUri = $uri->toString();

// Check if there is a difference
if ($pageUrl != $pageUri){
    // Insert canonical tag when needed
    echo '<link rel="canonical" href="'.$pageUrl.'" />';
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:24:33.063

你的意思是这样，还是我错过了什么？

```
var loc = window.location.href;
$("ul.nav li a").each(function() {
  if(this.href == loc) {
     // If the current URL is the same as the active menu url
     // Do something
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:26:39.277

这是官方书籍记录的获取当前网址的方法

JURI::getInstance();

我将测试你的代码似乎是一个很好的开始。

# session - Symfony 2.1 中的会话

> ID：14147631
> 
> 赞同：0
> 
> 时间：2013-01-03T21:32:59.770
> 
> 标签：session, symfony

我在 Symfony 2.1 中为 Symfony 中的一个站点（在一个控制器中）进行会话时遇到问题。我这样设置会话：

```
 $this->get("session")
 ->set('UserMongoId', $this->get('security.context')->getToken()->getUser()->getId()); 
```

之后在 symfony 2.1 之外的另一个文件中（在 Symfony 的 web 文件夹中），我这样做：

```
use Symfony\Component\HttpFoundation\Request;

$loader = require_once __DIR__.'/../app/bootstrap.php.cache';
require_once __DIR__.'/../app/AppKernel.php';

$kernel = new AppKernel('rpod', true);
$kernel->loadClassCache();
$request = Request::createFromGlobals();

$session = new \Symfony\Component\HttpFoundation\Session\Session();
$session->start();
var_dump ($session);

$user_id = $session->get("UserMongoId"); 
```

但是我收到了 null，我不知道如何使它工作，有什么想法吗？

现在我尝试 MongoDbSessionHandler 并使用 mongo 将会话存储在数据库中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:18:35.503

尝试更换

```
$session = new \Symfony\Component\HttpFoundation\Session\Session();
$session->start(); 
```

和

```
$session = $request->getSession(); 
```

因为您需要获取使用 Request::createFromGlobals(); 创建的会话对象，而不是一个新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:45:43.153

您的第二个代码块创建了一个新的 $session 变量。显然它的值将为空。您需要通过以某种方式检索 $session 在第二个块中分配它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T23:40:04.167

我用 mongo 将会话存储在 db 中：

1.-服务.yml

```
parameters:
    mongo.session.options:
        database: quorra_session
        collection: session
services:
    mongo.connection:
        class: MongoDoctrine\MongoDB\Connection
        factory_service: doctrine.odm.mongodb.document_manager
        factory_method: getConnection
        calls:
           - [initialize, []]
    mongo:
        class: Mongo
        factory_service: mongo.connection
        factory_method: getMongo

    session.handler.mongo:
          class: Symfony\Component\HttpFoundation\Session\Storage\Handler\MongoDbSessionHandler
          arguments: [@mongo, %mongo.session.options%] 
```

2.- confing.yml 添加：

```
 framework:
        session:
            handler_id: session.handler.mongo 
```

3.- 之后，如果我们要使用不同的服务器，带有 MongoDbSessionHandler 的学说mongo db 将自动将所有会话保存在完美的数据库中。会是这样的：

```
{ "_id" : ObjectId("50e60da9893ad520a11a7fd7"), "sess_data" : BinData(2,"pAMAAF9zZjJfYXR0cmlidXRlc3xhOjM6e3M6MTI6ImFjY2Vzc190b2tlbiI7czo1MDoiMTYzNDQzODUtYW52OVF6WmFQVDF0bHJ1ejk5OWdlU0w4U2Q1THdMQUxUSnA2V1lFaE0iO3M6MTk6ImFjY2Vzc190b2tlbl9zZWNyZXQiO3M6NDI6IlB4MDg1SWFEWktaUFBucHQ0UkRNbDRtV29VdGtQeFc0YkF4dmZzdkI2NCI7czoxNDoiX3NlY3VyaXR5X21haW4iO3M6NjMxOiJDOjY0OiJGT1NcVHdpdHRlckJ1bmRsZVxTZWN1cml0eVxBdXRoZW50aWNhdGlvblxUb2tlblxUd2l0dGVyVXNlclRva2VuIjo1NTM6e2E6Mjp7aTowO047aToxO3M6NTI4OiJhOjQ6e2k6MDtDOjMxOiJRdW9ycmFcQ29yZUJ1bmRsZVxEb2N1bWVudFxVc2VyIjoxODU6e2E6Mjp7aTowO047aToxO3M6MTYwOiJhOjk6e2k6MDtzOjA6IiI7aToxO3M6MzE6ImpkZWRyYnY4bmxzMDRvYzh3d2M0c29zb2MwazhzZzAiO2k6MjtzOjY6ImZhbmp1bCI7aTozO3M6NjoiZmFuanVsIjtpOjQ7YjowO2k6NTtiOjA7aTo2O047aTo3O2I6MTtpOjg7czoyNDoiNTBlNjBkYTlkNGMzOGVlOWMyMDAwMDAwIjt9Ijt9fWk6MTtiOjE7aToyO2E6Mjp7aTowO086NDE6IlN5bWZvbnlcQ29tcG9uZW50XFNlY3VyaXR5XENvcmVcUm9sZVxSb2xlIjoxOntzOjQ3OiIAU3ltZm9ueVxDb21wb25lbnRcU2VjdXJpdHlcQ29yZVxSb2xlXFJvbGUAcm9sZSI7czoxMjoiUk9MRV9UV0lUVEVSIjt9aToxO086NDE6IlN5bWZvbnlcQ29tcG9uZW50XFNlY3VyaXR5XENvcmVcUm9sZVxSb2xlIjoxOntzOjQ3OiIAU3ltZm9ueVxDb21wb25lbnRcU2VjdXJpdHlcQ29yZVxSb2xlXFJvbGUAcm9sZSI7czo5OiJST0xFX1VTRVIiO319aTozO2E6MDp7fX0iO319Ijt9X3NmMl9mbGFzaGVzfGE6MDp7fV9zZjJfbWV0YXxhOjM6e3M6MToidSI7aToxMzU3MjU0MTU0O3M6MToiYyI7aToxMzU3MjUzOTgzO3M6MToibCI7czoxOiIwIjt9"), "sess_id" : "f9a98866cd99a33d61204413b68d6ca5", "sess_time" : { "t" : 1357254155000, "i" : 3 } } 
```

4.- 在 symfony 2.1 之外的一个文件中（我现在在 web 中有该文件，因为不加载组件）

```
use Symfony\Component\ClassLoader\ApcClassLoader;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\Security\Core\SecurityContext;
use Symfony\Component\HttpFoundation\Session\Storage\Handler\MongoDbSessionHandler;

$loader = require_once __DIR__.'/../app/bootstrap.php.cache';
require_once __DIR__.'/../app/AppKernel.php';

//$kernel = new AppKernel('prod', false);
$kernel = new AppKernel('dev', true);
$kernel->loadClassCache();

$mongo = new Mongo();

$options["database"] = "quorra_session";
$options["collection"] = "session";

$mongoSession = new MongoDbSessionHandler($mongo,$options);
$data = $mongoSession->read($_COOKIE["PHPSESSID"]); 
```

并且变量数据具有该用户的所有会话。

5.- 现在，下一步是将 access_token_secret 发送到最后一个文件，并在 $data = $mongoSession->read($_COOKIE["PHPSESSID"]); 的结果中检查它

为我工作，我正在等待您的评论

# model-view-controller - 淘汰赛嵌套的foreach不起作用

> ID：14147632
> 
> 赞同：0
> 
> 时间：2013-01-03T21:33:03.017
> 
> 标签：model-view-controller, knockout.js, knockout-mvc

我正在使用以下代码来显示用户及其角色。

我正在使用淘汰赛，我的 viewModel 中有两个 ObservableArray：成员和角色。

我找不到将用户名和角色名发送到嵌套 foreach 循环内的 Roles.IsUserInRole(username, role) 方法的方法。

我可以做些什么来将这些角色发送给我的模型中的每个成员？

```
 <table>
<thead>
    <tr>
        <th>Username

        </th>

            <th data-bind="foreach: roles">
                <span data-bind="text: roleName"></span>
            </th>
    </tr>

</thead>
<tbody data-bind="foreach: members">
        <tr>
            <td data-bind="text: userName">
            </td>
                <td data-bind="foreach: roles">

                    @using (Html.BeginForm("UserToRole", "Main"))
                    {
                        <input type="hidden" data-bind="value: members().userName" name="username" />
                        <input type="hidden" data-bind="value: roleName" name="rolename" />

                        <input type="checkbox" name="ischecked" onclick="this.form.submit();" value="true" checked="@System.Web.Security.Roles.IsUserInRole(username.value, rolename.value)" />

                    }

                </td>

        </tr>  

</tbody> 
```

问题是：@System.Web.Security.Roles.IsUserInRole(username.value, rolename.value)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:11:50.453

您可以向模型添加其他属性并在获取该数据期间通过在服务器端调用 IsUserInRole 来填充它：

```
public ActionResult GetData()
{
    var data = ...

    foreach (var role in data.Roles)
    {
        role.HasRole = Roles.IsUserInRole(username, role.RoleName);
    }

    return Json(data);
} 
```

# c# - 如何对 ASP.NET MVC 视图进行 Web 测试？

> ID：14147633
> 
> 赞同：5
> 
> 时间：2013-01-03T21:33:04.317
> 
> 标签：c#, asp.net-mvc, testing, web-testing

在 ASP.NET WebForms 中，我使用 Selenium 在多个项目中记录和运行我的 Web 和 UI 测试。

我知道我们可以很容易地在 ASP.NET MVC 中对控制器和模型进行单元测试。

视图呢？

你还会测试视图吗？如果不是，如何确保由控制器操作呈现的视图包含预期的逻辑和行为？

我猜 WebForms 中使用的相同 Web 测试工具，例如 WatiN 和 Selenium，也可以在这里使用，不确定？

如果是这样，WebForms 中的 WebTesting 和 MVC 中的 WebTesting 有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T21:34:25.767

> 视图呢？

Erm、硒和 WatiN。

真的，就集成测试而言，是什么让您认为 ASP.NET MVC 视图与经典 ASP.NET WebForms 有什么不同？我的意思是他们都在一天结束时吐出 HTML。这就是浏览器和像 Selenium 这样的东西所理解的。谁吐出这个 HTML 并不重要。您在集成测试中关心的是，当用户 lambda 在 gamma 文本字段中输入 beta 后单击按钮 alpha 时`Welcome User Phi`，您会在生成的 HTML 页面上得到这个，不是吗？您真的不关心诸如 ASP.NET MVC 之类的东西，甚至更不关心诸如 ASP.NET MVC 视图之类的东西。

顺便说一句，您可以将 Selenium 和 WatiN 与 PHP 一起使用。或者如果你是 Java Servlets 的粉丝的话。您使用的服务器端技术并不重要。集成测试中重要的是您之前定义的场景。

> 如果是这样，WebForms 中的 WebTesting 和 MVC 中的 WebTesting 有什么区别？

没有任何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:59:30.517

我认为 ASP.NET MVC 和 WebForms 在浏览器驱动的集成测试方面存在差异，因为这些框架的不同服务器端方面导致了不同的测试方法。

采用一个可以帮助解决此问题的框架，例如[Seleno](https://github.com/TestStack/TestStack.Seleno)。它在引擎盖下使用 Selenium，但将所有浏览器交互抽象为 C# 页面对象，然后您可以在 C# 测试中非常流畅地使用它。

有许多扩展和约定可以帮助许多常见的浏览器自动化操作，例如单击按钮或从表中提取数据。

但是我为什么要提出这个作为这个问题的答案呢？Seleno 对于 .NET MVC 来说特别方便，因为页面对象可以是通用的，为特定视图（或部分视图）键入到 ViewModel 中，在为该视图编写相应的页面对象时创建强类型关联。

正是 MVC 的 ViewModel 方面开启了这种方法。我认为用 WebForms 来做这件事会比较棘手。

# java - 尝试释放内存时的 EXCEPTION_ACCESS_VIOLATION (0xc0000005)

> ID：14147639
> 
> 赞同：0
> 
> 时间：2013-01-03T21:33:50.817
> 
> 标签：java, opencl, lwjgl

通过 LWJGL 使用 opencl 时，我收到以下错误消息：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000002201971, pid=8476, tid=8920
#
# JRE version: 7.0_03-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (22.1-b02 mixed mode windows-amd64     compressed oops)
# Problematic frame:
# C  [OpenCL.dll+0x1971]
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of    Windows
#
# An error report file with more information is saved as:
# V:\Documents\NetBeansProjects\LWJGL\hs_err_pid8476.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

我正在使用的源代码：

```
import java.awt.*;
import java.awt.image.*;
import java.io.*;
import java.net.URISyntaxException;
import java.net.URL;
import java.nio.*;
import java.util.List;
import java.util.concurrent.*;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.vecmath.Point3f;
import org.lwjgl.*;
import static org.lwjgl.opencl.CL10.*;
import org.lwjgl.opencl.*;

public class RayTracer {
    public static void main(String[] args) throws Exception {
        LoadSource();
        RayTracer rayTracer = new RayTracer();
        rayTracer.CLRender();
    }
    JFrame frame;
    BufferedImage scene;
    Sphere sphere;
    static final float SAMPLES = 4f;
    Graphics graphics;
    BufferStrategy bufferSrategy;
    final AtomicBoolean redraw = new AtomicBoolean();
    IntBuffer temp;
    static String source = "";

RayTracer() throws LWJGLException {
    frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
    frame.setVisible(true);

    frame.createBufferStrategy(2);
    bufferSrategy = frame.getBufferStrategy();

    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();
    GraphicsConfiguration gc = gd.getDefaultConfiguration();

    scene = gc.createCompatibleImage((int) (frame.getWidth()), (int) (frame.getHeight()));
    sphere = new Sphere();
    sphere.location = new Point3f(0, 0, -5);
    startDrawThread();

}

void CLRender() throws LWJGLException {

        // initialization
        CL.create();
        CLPlatform platform = CLPlatform.getPlatforms().get(0);
        List<CLDevice> devices = platform.getDevices(CL_DEVICE_TYPE_GPU);
        CLContext context = CLContext.create(platform, devices, null, null, null);
        CLCommandQueue queue = clCreateCommandQueue(context, devices.get(0), CL_QUEUE_PROFILING_ENABLE, null);

        // program/kernel creation

        CLProgram program = clCreateProgramWithSource(context, source, null);
        try {
            Util.checkCLError(clBuildProgram(program, devices.get(0), "", null));
            //check for problem
        } catch (OpenCLException e) {
            ByteBuffer buffer = BufferUtils.createByteBuffer(1024 * 40);
            buffer.rewind();
            PointerBuffer pb = PointerBuffer.allocateDirect(1);
            Util.checkCLError(clGetProgramBuildInfo(program, devices.get(0), CL_PROGRAM_BUILD_STATUS, buffer, null));
            switch (buffer.get(0)) {
                case CL_BUILD_NONE:
                    System.out.println("build none");
                    break;
                case CL_BUILD_ERROR:
                    System.out.println("build error");
                    break;
                case CL_BUILD_IN_PROGRESS:
                    System.out.println("build in progress");
                    break;
                case CL_BUILD_SUCCESS:
                    System.out.println("build successful");
                    break;
            }
            buffer.rewind();
            Util.checkCLError(clGetProgramBuildInfo(program, devices.get(0), CL_PROGRAM_BUILD_LOG, buffer, pb));
            print(buffer, pb.get());
            System.exit(1);
        }
        // set kernel
        CLKernel kernel = clCreateKernel(program, "trace", null);
        final int width = scene.getWidth();
        final int height = scene.getHeight();
        FloatBuffer sphereRadius, sphereLocation, light, imageDim, samples;
        IntBuffer color;
        Light movingLight = new Light(new Point3f(), Color.ORANGE);
        movingLight.activate();
        try {
            for (float z = 0;; z += .01f) {
                //set Ligh Poition
                movingLight.position = new Point3f(-.5f, (float) (10 * Math.cos(z)), (float) (10 * Math.sin(z)));

                //Put data in Buffers
                float[] lights = Light.getLights();
                sphereRadius = toFloatBuffer(new float[]{sphere.radius.x, sphere.radius.y, sphere.radius.z});
                sphereLocation = toFloatBuffer(new float[]{sphere.location.x, sphere.location.y, sphere.location.z});
                light = toFloatBuffer(lights);
                imageDim = toFloatBuffer(new float[]{width, height, -1f});
                samples = toFloatBuffer(new float[]{SAMPLES});
                color = toIntBuffer(new int[width * height]);

                // send to open CL
                CLMem sphereRadiusMem = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, sphereRadius, null);
                clEnqueueWriteBuffer(queue, sphereRadiusMem, 1, 0, sphereRadius, null, null);
                CLMem lightMem = clCreateBuffer(context, CL_MEM_READ_WRITE | CL_MEM_COPY_HOST_PTR, light, null);
                clEnqueueWriteBuffer(queue, lightMem, 1, 0, light, null, null);
                CLMem imageDimMem = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, imageDim, null);
                clEnqueueWriteBuffer(queue, imageDimMem, 1, 0, imageDim, null, null);
                CLMem samplesMem = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, samples, null);
                clEnqueueWriteBuffer(queue, samplesMem, 1, 0, samples, null, null);
                CLMem sphereLocationMem = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, sphereLocation, null);
                clEnqueueWriteBuffer(queue, sphereLocationMem, 1, 0, sphereLocation, null, null);
                CLMem colorMem = clCreateBuffer(context, CL_MEM_WRITE_ONLY | CL_MEM_COPY_HOST_PTR, color, null);

                // execution
                PointerBuffer kernel1DGlobalWorkSize = BufferUtils.createPointerBuffer(2);
                kernel1DGlobalWorkSize.put(0, width);
                kernel1DGlobalWorkSize.put(1, height);
                kernel.setArg(0, sphereRadiusMem);
                kernel.setArg(1, sphereLocationMem);
                kernel.setArg(2, lightMem);
                kernel.setArg(3, imageDimMem);
                kernel.setArg(4, samplesMem);
                kernel.setArg(5, colorMem);
                clEnqueueNDRangeKernel(queue, kernel, 2, null, kernel1DGlobalWorkSize, null, null, null);

                // read the results back
                clEnqueueReadBuffer(queue, colorMem, 1, 0, color, null, null);

                //transfer to Image
                setScene(color);

                //clean up memory
                clReleaseMemObject(colorMem);
                clReleaseMemObject(imageDimMem);
                clReleaseMemObject(lightMem);
                clReleaseMemObject(samplesMem);
                //clReleaseMemObject(sphereLocationMem);    //uncomenting results in nasty error
                clReleaseMemObject(sphereLocationMem);
                clReleaseMemObject(sphereRadiusMem);

            }
        } finally {
            // teardown
            clFinish(queue);
            clReleaseKernel(kernel);
            clReleaseProgram(program);
            clReleaseCommandQueue(queue);
            CL.destroy();
        }
    }
} 
```

在底部附近，您会看到一条已注释的`clReleaseMemObject(sphereLocationMem);`注释。如果没有注释，我会收到错误消息。如果我留下评论，它工作正常。所有其他调用都可以`clReleaseMemory()`正常工作，为什么这个会引发错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:22:12.043

`SphereLocationMem`当指示的行未注释时被释放两次，在：

```
//clReleaseMemObject(sphereLocationMem);    //uncomenting results in nasty error
clReleaseMemObject(sphereLocationMem); 
```

导致指示的访问冲突。对该行进行评论后，它很可能正常工作。

# xcode - 我的“目标”是什么？如何向其中添加文件以进行单元测试？

> ID：14147640
> 
> 赞同：17
> 
> 时间：2013-01-03T21:33:58.257
> 
> 标签：xcode, unit-testing

我正在尝试将我的 parser.m 文件添加到我的单元测试的目标（或者，我的单元测试文件？），但我不知道如何。

下面是一个页面示例，表明使用目标的必要性：

[架构 i386“_OBJC_CLASS_$_Appirater”的未定义符号](https://stackoverflow.com/questions/8953966/undefined-symbols-for-architecture-i386-objc-class-appirater)

...这是该页面的部分答案：

> 我认为，您只将文件添加到项目中，但没有添加到目标中。单击 Project Navigator 中的 Appirater.m 文件，然后在 File Inspector 的 Target 成员资格中设置靠近目标名称的复选框。

我没有从那个答案中得到什么是“什么复选框？”。另外，我怎么知道我的目标名称？我在哪里可以找到“目标会员”？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-01-03T22:04:47.070

在 Xcode 中，目标通常是一个应用程序——您正在创建的应用程序！有时它是一个库或框架。（您可以创建其他类型的目标，但不必担心。）

您可以使用文件检查器将文件添加到目标，或从目标中删除文件，或者仅检查文件是否是目标的成员。只需`.m`在编辑器窗格中打开文件或资源文件（如图像或 xib），然后在 Xcode 窗口的右侧窗格中选择文件检查器并找到检查器的“目标成员”部分。选中或取消选中目标旁边的框。（您通常**不想**将`.h`文件添加到目标。）这是一个演示：

[![将 MyObject.m 添加到 addToTargetDemo 目标](../Images/a8de3ace1c3c18d69dacc448e22d5050.png)](https://i.stack.imgur.com/Kcy2g.gif)

如果项目中有多个目标，则每个目标都会出现在“目标成员资格”部分中。每个源文件都可以是目标任意组合的成员，具体取决于您的需要。例如，如果您正在创建共享大部分代码和资源的单独 iPhone 和 iPad 应用程序（而不是通用应用程序），您可以创建一个具有两个目标的项目。一个目标是 iPhone 应用程序，另一个目标是 iPad 应用程序。您将公共源文件添加到两个目标。您仅将 iPhone 特定`.m`文件和资源文件添加到 iPhone 应用程序目标。您仅将 iPad 特定`.m`文件和资源文件添加到 iPad 应用程序目标。

# knockout.js - 创建后可以更改淘汰赛油门延长器吗？

> ID：14147654
> 
> 赞同：3
> 
> 时间：2013-01-03T21:35:22.760
> 
> 标签：knockout.js, throttling

我希望我的油门是一个可以随意更改的动态数字，但这似乎不可能。这是油门延长器的限制吗？

就我而言，我有一个正在节流的网格过滤器。如果我在网格中只有几个项目，我想要一个非常低的油门。但是，如果网格行数变得非常大，我想更改它（可能最多约 300 毫秒）。例如：

```
this.filter = ko.observable("").extend({ throttle: 1 }); 
```

然后稍后我想做类似的事情：

```
this.filter.extend.throttle = 300; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T16:48:54.467

这不适用于内置油门方法。

自己构建这个并不难。例如，这里有一些代码可以让你在任何 observable 上调用 .throttle ，传递一个可以随意更改的节流时间 observable ：

```
ko.subscribable.fn.throttle = function(throttleTimeObservable) {
    var subscribable = this;
    var throttledObservable = ko.observable();
    var timeoutHandle = null;

    if (ko.isObservable(throttleTimeObservable)) {
       throttletimeObservable.subscribe(function() { clearTimeout(timeoutHandle) });
    }

    subscribable.subscribe(function(val) {
        clearTimeout(timeoutHandle);
        throttleTime = ko.utils.unwrapObservable(throttleTimeObservable);
        timeoutHandle = setTimeout(function() { throttledObservable(val); }, throttleTime);
    });

    return throttledObservable;
} 
```

使用它很简单：

```
// Usage:
var existingObservable = ...;
var throttleTime = ko.observable(500);
var throttled = existingObservable.throttle(throttleTime);

// Change the throttle willy nilly!
throttleTime(1000); 
```

如果你正在做很多这样的事情（节流，将不同的 observable 组合在一起），你可能会对[Rx.js](http://reactive-extensions.github.com/RxJS/)感兴趣。

# r - 是否有一个 R 函数用于对存储为单个列表对象中的元素的矩阵进行元素求和？

> ID：14147655
> 
> 赞同：11
> 
> 时间：2013-01-03T21:35:23.067
> 
> 标签：r

> **可能重复：**
> [对矩阵列表求和 将矩阵](https://stackoverflow.com/questions/11641701/sum-a-list-of-matrices)
> [列表逐个元素相加](https://stackoverflow.com/questions/13826983/add-together-a-list-of-matrices-element-by-element)

我有一个 R 列表对象。列表的每个元素都包含 3 x 3 矩阵。我想按元素对所有矩阵求和。那是：

```
 myList <- list();
 myList[[1]] <- matrix(1:9,3,3)
 myList[[2]] <- matrix((1:9)*10,3,3) 
```

然后我想要最终的输出输出

```
myList[[1]]+myList[[2]]

      [,1] [,2] [,3]
 [1,]   11   44   77
 [2,]   22   55   88
 [3,]   33   66   99 
```

当然，我可以为此计算编写一个循环，但 R 中的循环非常慢。R 中是否有内置函数来完成这项业务？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T21:37:46.057

见`?Reduce`。

从例子：

```
## A general-purpose adder:
add <- function(x) Reduce("+", x) 
```

那么你就可以

```
add(myList) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T21:44:12.000

或者，您可以将数据放在多维数组而不是列表中，然后使用`apply`它。

```
require(abind)
m = abind(matrix(1:9,3,3), matrix((1:9)*10,3,3), along = 3) 
```

产生一个三维数组。然后使用`apply`：

```
apply(m, 1:2, sum) 
```

免责声明：我没有测试此代码，因为我现在没有可用的 R。但是，我确实希望您了解此选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T14:35:14.800

对于那些感兴趣的人：

```
ffoo<-function(jloop){
barlist<-matrix(nr=25,nc=40)
for (jj in 1:jloop) barlist<-barlist+foolist[[jj]]
}

baradd <- function(x) Reduce("+", x) 
```

导致：

```
Rgames> foo<-matrix(1:1000,25)
Rgames> for (jj in 1:5e5) foolist[[jj]]<-foo
Rgames> system.time(baradd(foolist))
   user  system elapsed 
    1.7     0.0     1.7 

Rgames> system.time(ffoo(1e5))
   user  system elapsed 
    0.3     0.0     0.3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T21:53:20.117

```
> do.call("+", myList)
     [,1] [,2] [,3]
[1,]   11   44   77
[2,]   22   55   88
[3,]   33   66   99 
```

但它失败了两个以上，这就是我为什么赞成 GSee 的答案。

# doxygen - 如何在 Doxygen 生成的文档中只包含一些源文件？

> ID：14147656
> 
> 赞同：4
> 
> 时间：2013-01-03T21:35:24.360
> 
> 标签：doxygen

在我的项目中，我想扫描***所有***源文件以获取文档，但只在生成的文档中包含***某些***源文件的完整源代码（例如示例代码）。

目前我已经设置`SOURCE_BROWSER`and `VERBATIM_HEADERS`to `NO`，所以不包含源文件。

尽管有这些设置，有什么方法可以提供我想包含的源文件列表吗？

或者，如果我重新打开这些选项，是否有某种方法可以提供要排除的源文件列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T09:17:51.650

无法仅指定需要`SOURCE_BROWSER`启用处理的特定文件列表。

但是，您可以包含示例，请参阅[snippet](http://www.doxygen.nl/manual/commands.html#cmdsnippet)、[example](http://www.doxygen.nl/doxygen/manual/commands.html#cmdexample)、[dontinclude](http://www.doxygen.nl/manual/commands.html#cmddontinclude)或[verbinclude](http://www.doxygen.nl/manual/commands.html#cmdverbinclude)以了解执行此操作的各种方法。

# iphone - 如何隐藏 UITableView Header 然后让它重新出现？

> ID：14147658
> 
> 赞同：7
> 
> 时间：2013-01-03T21:35:31.810
> 
> 标签：iphone, ios, ipad, uitableview, header

我偶尔会在 UITableView 的一部分中没有包含任何单元格。在这种情况下，由于上部没有单元格，因此有两个相互重叠的标题。我试图弄清楚如何暂时隐藏该上部标题，然后在我稍后返回页面时让它重新出现。

我可以返回零`-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section`，然后以某种方式强制在 viewWillAppear 中再次调用它吗？

另外，如果我使用 重新加载数据`[self.tableView reloadData]`，你如何返回 UITableView Header 的标准高度？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T06:21:16.433

当您必须隐藏标题时

```
[tableView setContentOffset:CGPointMake(0, 44) animated:YES]; 
```

当您必须显示标题时

```
[tableView setContentOffset:CGPointMake(0, 0) animated:YES]; 
```

# r - 根据 2 个匹配的列值将值从一个 data.frame 添加到另一个

> ID：14147661
> 
> 赞同：2
> 
> 时间：2013-01-03T21:35:40.717
> 
> 标签：r, dataframe

我有两个具有相同 3 列的数据框：WeekNum、Year 和 Number。

```
A <- data.frame(WeekNum=c(1,2,3,4,5,1,2,3,4,5), 
                Year=c(2000,2000,2000,2000,2000,2001,2001,2001,2001,2001), 
                Number=c(0,0,0,0,0,0,0,0,0,0))

B <- data.frame(WeekNum=c(1,2,3,4,1,2,6), 
                Year=c(2000,2000,2000,2000,2001,2001,2001), 
                Number=c(0,1,0,1,2,5,6)) 
```

我想使用 A 中的所有 WeekNum 和 Year 组合创建一个具有相同 3 列的新数据框（并且只有 B 中也存在于 A 中的那些）。当 B 中也存在 WeekNum 和 Year 组合时，我想使用 B 中的 Number 值。如果 B 中不存在该组合，我想将 Number 值保留为 0。最终，我应该有一个数据框好像：

```
> C
   WeekNum Year Number
1        1 2000      0
2        2 2000      1
3        3 2000      0
4        4 2000      1
5        5 2000      0
6        1 2001      2
7        2 2001      5
8        3 2001      0
9        4 2001      0
10       5 2001      0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T21:44:51.893

一种简单的方法是`id`为两个 data.frames 创建一个列`A`，`B`然后使用`match`：

```
A$id <- paste(A$WeekNum, A$Year, sep=":")
B$id <- paste(B$WeekNum, B$Year, sep=":")

m1 <- match(A$id, B$id)
m2 <- which(!is.na(m1))
A$Number[m2] <- B$Number[m1[!is.na(m1)]]
subset(A, select=-c(id)) 
```

输出：（`Edit:`我看到你改变了你的输入`data.frame`）

```
 WeekNum Year Number
1        1 2000      0
2        2 2000      1
3        3 2000      0
4        4 2000      1
5        5 2000      0
6        1 2001      2
7        2 2001      5
8        3 2001      0
9        4 2001      0
10       5 2001      0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:41:57.760

以前@Arun 的答案的变体：

根据需要将数据绑定在一起：

```
result <- rbind(
 A[!(paste(A$WeekNum, A$Year, sep=":") %in% paste(B$WeekNum, B$Year, sep=":")),],
 B[paste(B$WeekNum, B$Year, sep=":")   %in% paste(A$WeekNum, A$Year, sep=":"),]
) 
```

排序以获得正确的顺序：

```
result <- result[order(result$Year,result$WeekNum),]

    WeekNum Year Number
51        1 2000      0
6         2 2000      1
7         3 2000      0
81        4 2000      1
5         5 2000      0
91        1 2001      2
101       2 2001      5
8         3 2001      0
9         4 2001      0
10        5 2001      0 
```

# python - 如何在 Python 中运行 TCL 脚本？

> ID：14147665
> 
> 赞同：2
> 
> 时间：2013-01-03T21:36:04.593
> 
> 标签：python, tcl

> **可能重复：**
> [知道将 Python 与 Tcl 接口的任何创造性方法吗？](https://stackoverflow.com/questions/1004434/know-any-creative-ways-to-interface-python-with-tcl)

在 python 中，我需要将一些值作为输入放入 TCL 脚本中，让它运行，然后使用它的输出。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:40:56.200

您可以使用[subprocess](http://docs.python.org/2/library/subprocess.html#module-subprocess) Python 模块来完成。

# macos - clang 和 libc++ istream::peek() 没有设置 eof 标志

> ID：14147667
> 
> 赞同：3
> 
> 时间：2013-01-03T21:36:08.953
> 
> 标签：macos, clang, eof, libc++, peek

我正在使用 Mac OSX 10.8.1 (Mountain Lion) 和：Apple clang 版本 4.1 (tags/Apple/clang-421.11.66) (基于 LLVM 3.1svn) - 最新可用。

关于 eof 检测，使用 libc++ std::istream::peek() 的 Clang 似乎工作不正确。libstdc++ 没有出现问题。

下面的简单示例根据标准库版本给出不同的结果：

测试.cpp：

```
#include <iostream>
#include <sstream>

void printstat(std::istream& data) {
  std::cout << "flags:  eof: " << data.eof() << ";  good: " << data.good() << ";  bad: " << data.bad() << "  fail: " << data.fail() << std::endl;
}

int main() {
  std::stringstream data("a"); 
  printstat(data);

  while (data.good()) {
    char a = data.get();
    std::cout << "get(): " << a << std::endl;
    printstat(data);

    data.peek();
    std::cout << "peek()" << std::endl;
    printstat(data);
    std::cout << std::endl;
  }

  return 0;
} 
```

使用“clang++ -stdlib=libstdc++ test.cpp”编译的文件的输出（这看起来正确）：

```
flags:  eof: 0;  good: 1;  bad: 0  fail: 0
get(): a
flags:  eof: 0;  good: 1;  bad: 0  fail: 0
peek()
flags:  eof: 1;  good: 0;  bad: 0  fail: 0 
```

使用“clang++ -stdlib=libc++ test.cpp”编译的文件的输出（这对我来说看起来不正确）：

```
get(): a
flags:  eof: 0;  good: 1;  bad: 0  fail: 0
peek()
flags:  eof: 0;  good: 1;  bad: 0  fail: 0

get(): ?
flags:  eof: 1;  good: 0;  bad: 0  fail: 1
peek()
flags:  eof: 1;  good: 0;  bad: 0  fail: 1 
```

此问题的最简单解决方法似乎是使用 libstdc++ 而不是 libc++。不幸的是，我需要使用一些 c++11 特性，所以 libc++ 是唯一的解决方案。

我在那里发现了一些帖子，它们报告了 libc++ 和 libstdc++ 在 eof 位行为中的差异，但与我的不同。

有没有人遇到和我一样的问题。有没有通用的解决方案来解决它？我可以想象一些肮脏的解决方法，但我宁愿不使用它。

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T04:04:05.747

我很抱歉。这是 libc++ 中的一个错误。它已在 libc++ svn 公共主干中修复，但修复需要重新编译的 libc++.dylib，这是可以理解的，它在 OS X 10.8.y 上不存在。

llvm svn 服务器目前已关闭，但我相信解决方法是简单地检查 eof in `basic_istream<_CharT, _Traits>::peek()`：

```
+            if (traits_type::eq_int_type(__r, traits_type::eof()))
+                this->setstate(ios_base::eofbit); 
```

正如您已经推测的那样，解决方法是不依赖于 peek 后的准确 eof 检查。

# javascript - 格式化秒表计时器

> ID：14147671
> 
> 赞同：0
> 
> 时间：2013-01-03T21:36:40.517
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用一个 jQuery 秒表，它以以下格式输出时间：`02:45:03`. 但是，我需要将数据库中的值保存为分钟。谁能告诉我如何将这样的值转换为分钟？或者，您是否知道我可以使用的任何秒表以分钟为单位显示时间，并且我可以切换它（暂停/恢复）并完全删除实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:58:58.937

您可以使用假日期将时间字符串解析为`Date`对象；然后使用`Date`对象的方法提取小时和分钟并将它们加在一起：

```
var time = "02:45:03",
    date = new Date( "1/1/1970 " + time ),
    minutes = date.getHours() * 60 + date.getMinutes();

alert( minutes ); 
```

# cocoa - Mac App Store 可接受的 CGSPrivate API 窗口转换的替代方案

> ID：14147672
> 
> 赞同：0
> 
> 时间：2013-01-03T21:36:43.803
> 
> 标签：cocoa, animation, window, core-graphics

我编写了一些代码，利用 CGSPrivate API 在两个窗口之间进行转换。这是一个私有 API，因此 Apple 不会在 App Store 上接受它。

是否有合适的 Apple 接受的替代方法来完成窗口转换，例如“翻转”或“立方体旋转”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:19:35.560

事实证明，我最近开源了一个库，可以让您将窗口作为图层动画。希望它可以帮助你。

[https://github.com/jwilling/JNWAnimatableWindow](https://github.com/jwilling/JNWAnimatableWindow)

# javascript - ie9 & Firefox 专注mousedown输入

> ID：14147673
> 
> 赞同：1
> 
> 时间：2013-01-03T21:36:47.177
> 
> 标签：javascript, internet-explorer-9, focus, onmousedown

我有一个网页，它使用可拖动元素来安排应用程序以符合用户的规范。用户可以拖动（onmousedown）一个框并将其与其他框内联。

这些框内是输入、文本区域、单选和复选框类型的输入。

一切都在 IE8 中完美运行 IE9、Firefox 17.0.1 和 Firefox 14.0.1 的问题（只是我测试过的版本）

问题是当我单击输入框或文本框时，onmousedown 事件会触发并窃取焦点。一旦我释放鼠标，没有任何反应将焦点释放回输入框。收音机和复选框工作得很好。

有多个输入和多个元素。

有人有想法么？我真的没有一个开放的例子可以玩，因为它是在一个登录受限的环境中。

我整天都在寻找这个问题，任何方向都会很棒！

```
function initdragableElements()
{
    dragableElementsParentBox = document.getElementById('dragableElementsParentBox');
    insertionMarkerDiv = document.getElementById('insertionMarker');
    insertionMarkerLine = document.getElementById('insertionMarkerLine');
    dragableAreaWidth = dragableElementsParentBox.offsetWidth;

    if(!useRectangle){
        dragDropMoveLayer = document.createElement('DIV');
        dragDropMoveLayer.id = 'dragDropMoveLayer';     
        document.body.appendChild(dragDropMoveLayer);   
    }

    var subDivs = dragableElementsParentBox.getElementsByTagName('*');
    var countEl = 0;
    for(var no=0;no<subDivs.length;no++){
        var attr = subDivs[no].getAttribute('dragableBox');
        if(opera)attr = subDivs[no].dragableBox;
        if(attr=='true'){
            subDivs[no].style.cursor='move';    
            subDivs[no].onmousedown = initDrag;

            var index = dragableObjectArray.length;
            dragableObjectArray[index] = new Array();
            ref = dragableObjectArray[index];
            ref['obj'] = subDivs[no];
            ref['width'] = subDivs[no].offsetWidth;
            ref['height'] = subDivs[no].offsetHeight;
            ref['left'] = getLeftPos(subDivs[no]);
            ref['top'] = getTopPos(subDivs[no]);
            ref['index'] = countEl;
            countEl++;
        }
    }

    /* Creating rectangel indicating where item will be dropped */
    rectangleDiv = document.createElement('DIV');
    rectangleDiv.id='rectangle';
    rectangleDiv.style.display='none';
    dragableElementsParentBox.appendChild(rectangleDiv);

    document.body.onmousemove = moveDragableElement;
    document.body.onmouseup = stop_dragDropElement;
    document.body.onselectstart = cancelSelectionEvent;
    document.body.ondragstart = cancelEvent;
    window.onresize = repositionDragObjectArray; 

    documentHeight = document.documentElement.clientHeight;
}

function initDrag(e)
{
    if(document.all)e = event;
    mouse_x = e.clientX;
    mouse_y = e.clientY;
    if(!documentScrollHeight)documentScrollHeight = document.documentElement.scrollHeight + 100;
    el_x = getLeftPos(this)/1;
    el_y = getTopPos(this)/1;
    dragObject = this;
    if(useRectangle){
        rectangleDiv.style.width = this.clientWidth - (rectangleBorderWidth*2) +'px';
        rectangleDiv.style.height = this.clientHeight - (rectangleBorderWidth*2) +'px';
        rectangleDiv.className = this.className;
    }else{
        insertionMarkerLine.style.width = '6px';
    }
    dragDropTimer = 0;
    dragObjectNextObj = false;
    if(this.nextSibling){
        dragObjectNextObj = this.nextSibling;
        if(!dragObjectNextObj.tagName)dragObjectNextObj = dragObjectNextObj.nextSibling;
    }
    initDragTimer();
    return false;
} 
```

# python - Python 中的 nargout

> ID：14147675
> 
> 赞同：26
> 
> 时间：2013-01-03T21:37:00.407
> 
> 标签：python, multiple-variable-return

Python 在 MATLAB 中有任何等价的 nargout 吗？如果我们想保持返回参数的数量灵活，我发现 nargout 是一种非常简洁的方法。有没有办法可以找出请求了多少输出参数？类似于以下伪python代码：

```
def var_returns_func(a):
  """
  a is a 1D numpy array
  """
  if nargout==1: return a.sum()
  elif nargout==2: return a.sum(),a.std() 
```

因此，如果我将此函数称为`mean = var_returns_func(someNumPyarray)`，它应该返回一个值。但如果我称它为`mean,std = var_returns_func(someNumPyarray)`，它应该返回 2 个值。

有没有一种 Pythonic 的方式来做到这一点？还是一种骇人听闻的方式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T21:42:04.010

该函数无法知道返回值将要做什么，因此它无法知道需要多少个。您可以做的是将`nargout`作为参数传递给您的函数并使用它来决定返回什么：

```
def f(a, nargout=1):
    if nargout == 1:
        return "one value"
    elif nargout == 2:
        return "two", "values"
    else:
        raise ValueError, "Invalid nargout!" 
```

这是作为 Python 哲学的“显式优于隐式”的示例。如果你想要两个论点，你必须明确地说你想要两个论点。在 Python 中不鼓励基于对未来的展望来隐含地做出决定以查看将要对结果做什么。完全有可能做`a = f(x)`并且*想要*在 a 中获得一个二元素元组。

对于像你这样的例子，有很多更好的方法。一种是刚做`mean, std = a.mean(), a.std()`的，或者更一般`x, y = someFunc(a), otherFunc(a)`的。如果通常需要这种特定的值组合，并且您不想复制两个操作共享一些昂贵的计算，请创建第三个函数，该函数清楚地返回和 do `x, y = funcThatReturnsTwoThings(a)`。如果它们做不同的事情，所有这些都是保持函数分离的显式方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-03T22:20:43.460

我不能`nargout`在 MATLAB 中说话，因为我不知道它，我无法想象它应该如何正确使用。但是，您可能希望将视图更改为 Python 函数（或方法）的真正作用）。

实际上，Python 总是只返回一个值。或者它是 None，或者它是某个特定类型的单个值，或者它是该`tuple`类型的单个对象。

如果没有`return`命令，`None`则函数体结束则函数返回。这与您`return`在正文末尾或正文末尾不带参数显式编写相同`return None`。

如果使用`return None`（`None`可以存储在变量中）或`return`不使用参数，`None`则返回给调用者。

如果你`return single`，`single`对象将返回给调用者。

如果你`return v1, v2, v3`，你实际上返回一个元组`(v1, v2, v3)`。它只是一个语法糖，你不需要写括号。

在`result1, result2, result3 = f()`这种情况下，只是另一种语法糖。`f()`返回元组及其元素被自动提取到给定的变量。你实际上是这样做的：

```
result1, result2, result3 = (v1, v2, v3) 
```

或者

```
t = f()                           # where t is the (v1, v2, v3)
result1, result2, result3 = t 
```

实际上，Python 不允许像在其他语言中那样定义输出参数。你可以认为你正在传递参数对象的地址，如果传递的对象允许修改，你可以修改它。但是，例如，您永远无法为具有初始`None`值的传递参数获得新结果。您不能通过函数的输出参数分配 Python 变量——在 Python 中没有类似的机制。

从函数内部返回新创建的值（对象）的唯一自然而直接的方法是使用`return`命令。但是，Python 函数不会限制您可以返回多少个参数。（好吧，如果它是一个元组，则总是一个可以在以后分解为元素的元素。）

如果您想在调用者代码中测试实际返回的内容，您可以编写自己的函数，在返回以下值的情况下执行一些特殊操作：`None`, `single`，一定长度的元组 (`len(t)`可用于获取元素的数量在返回的元组中`t`）。您的函数还可以测试`single`每个元组元素的类型或类型并相应地工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-26T22:13:22.600

我倾向于做的是让我的函数返回所有内容（作为元组的元素），然后只解压缩我需要的那些：

```
def my_func():
    # do stuff...
    return mean, stddev, otherstat, a, b

mu, sig, _, a, _ = myfunc() 
```

在这里，我返回所有内容，但仅将第一个、第二个和第四个变量分配给我将在调用范围中使用的变量。该`_`变量是作为我不想要/不需要的变量的占位符的一次性使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-22T09:45:59.227

在 Matlab 中，输出参数的数量实际上是函数的输入之一。在 Python 中情况并非如此，因此您已设置函数的接口以不同方式反映这一点。

例如，这是一个将 upper() 应用于一组字符串的函数，用户可以期望输入的数量等于输出的数量。语法也非常类似于 Matlab 的。

```
>>> def var_returns_f(*args):
...     return [str.upper() for str in args]
... 
>>> 
>>> a, b = var_returns_f('one', 'two')
>>> 
>>> a
'ONE'
>>> b
'TWO' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-13T20:49:10.617

我有一个奇怪的想法...

```
def nargout():
   import traceback
   callInfo = traceback.extract_stack()
   callLine = str(callInfo[-3].line)
   split_equal = callLine.split('=')
   split_comma = split_equal[0].split(',')
   return len(split_comma)

def fun():
   this = nargout()
   if this == 1:
       return 3
   else:
       return 3, 4

a = fun()
a, b = fun() 
```

我现在真的很想念 Matlab :D

* * *

通过以下方式改进：

```
def nargout(*args):
   import traceback
   callInfo = traceback.extract_stack()
   callLine = str(callInfo[-3].line)
   split_equal = callLine.split('=')
   split_comma = split_equal[0].split(',')
   num = len(split_comma)
   return args[0:num] if num > 1 else args[0]

def fun(nparray):
   return nargout(np.mean(nparray), np.std(nparray))

arr = np.array([3, 4, 5])
mean = fun(arr)
mean, std = fun(arr) 
```

# internet-explorer - Internet Explorer 和 Firefox 上的 YouTube IFrame API

> ID：14147677
> 
> 赞同：23
> 
> 时间：2013-01-03T21:37:10.080
> 
> 标签：internet-explorer, firefox, youtube-api, youtube-iframe-api

更多的是“答案”而不是“问题”，但在其他地方没有找到这个我把它贴在这里。

我在所有版本的 IE 和 Firefox 中初始化 iFrame API 时都遇到了困难，并且有一些自定义的实现。基本上，它会加载 API，但不会创建播放器对象。

经过一番反复试验，我终于发现它不起作用，因为`div`我传递给对象的 ID 将其 CSS 可见性设置为`'none'`. 一旦它被设置为`'visible'`整个事情工作。之后，我尝试将`div`CSS 设置为`'display:none'`（应用程序要求在用户请求之前隐藏视频），这也导致 iFrame API 静默失败（从不回调`'onPlayerReady'`）。

因此，长话短说，当使用 YouTube iFrame API 初始化一个`div`您希望稍后保持隐藏的内容时，请使用绝对定位等 CSS 技术将其推离屏幕，直到您以后需要它为止。此外，发现一旦播放器对象被初始化`'onPlayerReady'`并被调用，您就可以整天打开和关闭显示，一切仍将按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T09:55:32.897

您应该将播放器容器留空，例如

```
<div class="myPlayerContainer"></div> 
```

当您想显示它时，只需将其附加到容器中：

```
$('#showVideoBtn').click(function(){
    $('.myPlayerContainer').show().append('~ code of youtube iframe ~');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T16:33:51.477

Yotam 是对的，请看以下内容：

HTML：

```
<button onclick="toggleYoutube();">show / hide</button>
<div id="youtube"></div> 
```

JS（使用 jQuery）：

```
var visible = false;
function toggleYoutube() {
    visible = !visible;
    if ( visible ) {
        $("#youtube").append( '<iframe id="video" width="640" height="360" src="http://www.youtube-nocookie.com/embed/cjvIeNt93nc?rel=0" frameborder="0" allowfullscreen></iframe>' );
    } else {
        $("#video").remove();
    }
} 
```

[请参阅http://jsfiddle.net/wFVhT/2/](http://jsfiddle.net/wFVhT/2/)上的完整代码

# javascript - 使用 window.opener javascript 传递变量

> ID：14147680
> 
> 赞同：0
> 
> 时间：2013-01-03T21:37:20.033
> 
> 标签：javascript, window, window.opener

在第一页我有

```
window.tmpstr = 'aaaaaa';
window.open ('second.php','_self',false); 
```

在 second.php 中

```
alert(window.opener.tmpstr) 
```

这会提醒“未定义”。当我将“_self”更改为“_blank”时，它可以工作。当我希望新窗口在同一个窗口中打开时，如何传递变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:41:05.787

你不能，不是那样的。通过调用`window.open`using `_self`，您只需将页面重定向到`second.php`url。

您可以使用的选项是：

*   使用哈希标记将其添加为参数 (second.php#tmpstr=aaaaaa
*   使用 cookie（有一个不错的 jQuery cookie 插件）
*   将整个页面移动到 iFrame（不推荐）并仅重定向主框架。

# html - 使设计错误消息出现

> ID：14147681
> 
> 赞同：0
> 
> 时间：2013-01-03T21:37:20.980
> 
> 标签：html, ruby-on-rails, ruby, devise, erb

在我的 application.html.erb 文件中，我有

```
<% flash.each do |key,msg| %>
  <div class="message">
      <%= content_tag :div, msg %>
  </div>
<% end %> 
```

有没有办法让设计在那里显示它的错误消息？

当我添加时，`<%= devise_error_messages! %>`我得到一个`undefined local variable or method 'resource'`错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:50:59.073

只需尝试将 form_for 与 url 放在一起，以便设计能够检查它所指的资源..

例如：<%form_for :post,:url=>post_path(@post) do |f|%>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:36:09.670

在 application.html.erb 文件中

```
<% [:notice,:error,:info,:success,:alert].each do |key| %>
  <div class="message">
    <%= flash[key] %>
  </div>
<% end %> 
```

# jquery - jQuery Mobile 滑动到“无”

> ID：14147682
> 
> 赞同：0
> 
> 时间：2013-01-03T21:37:21.337
> 
> 标签：jquery, ipad, jquery-mobile, touch, responsive-design

我发现另一个 SO question 与我正在尝试做的事情具有类似的功能。而不是刷到一个新的 div 但是我想简单地把 div 从屏幕上滑下来

[http://jsfiddle.net/yxzZf/4/](http://jsfiddle.net/yxzZf/4/)

```
$("#listitem").swiperight(function() {
    $.mobile.changePage("#page1");
}); 
```

有问题的 div 实际上是一个 jQuery UI 对话框，$("#div").dialog({...});。我想简单地把它从屏幕上滑下来然后关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:35:12.793

像这样的东西：

```
$('#home').live('pagebeforeshow',function(e,data){    
    $("#listitem").bind('swiperight',function(event, ui){
        $.mobile.changePage("#page1", { transition: "slide", reverse: true});
    });
}); 
```

示例：http: [//jsfiddle.net/Gajotres/UaupV/](http://jsfiddle.net/Gajotres/UaupV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:26:14.293

假设您正在谈论一个弹出窗口，您可以执行以下操作：

```
$("#listitem").swiperight(function() {
    var t = $(this);
    t.animate({
        right: '-999px'
    }, 'slow', function() {
        t.remove();
    })
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:49:56.050

用这个：

```
$("#listitem").swiperight(function() {
$.mobile.changePage("#page2"); 
```

});

​并将 page 指向空白页

[检查这个小提琴](http://jsfiddle.net/yxzZf/2810/)

# python - 将数据结构从元组字典切换到字典字典

> ID：14147685
> 
> 赞同：0
> 
> 时间：2013-01-03T21:37:30.637
> 
> 标签：python

```
#Queries
espanol_3d_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1, gtmax=1, xd=None, vip=None)
espanol_3d = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1, gtmax=None, xd=None, vip=None)
espanol_3d_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1, vip=1, gtmax=None, xd=None)
espanol_3d_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1, xd=1, gtmax=None, vip=None)
espanol_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", gtmax=1, tipo_3d=None, vip=None, xd=None)
espanol = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", gtmax=None, tipo_3d=None, vip=None, xd=None)
espanol_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", vip=1, gtmax=None, tipo_3d=None, xd=None)
espanol_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", xd=1, vip=None, gtmax=None, tipo_3d=None)
subtitulada_3d_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1, gtmax=1, xd=None, vip=None)
subtitulada_3d = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1,  gtmax=None, xd=None, vip=None)
subtitulada_3d_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1, vip=1, gtmax=None, xd=None)
subtitulada_3d_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1, xd=1, vip=None, gtmax=None)
subtitulada_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", gtmax=1, tipo_3d=None, xd=None, vip=None)
subtitulada = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", gtmax=None, tipo_3d=None, vip=None, xd=None)
subtitulada_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", vip=1, gtmax=None, tipo_3d=None, xd=None)
subtitulada_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", xd=1, vip=None, gtmax=None, tipo_3d=None)

#Creating a dictionary of all types of funciones querysets
func_tags = ['espanol', 'subtitulada', 'espanol_3d', 'subtitulada_3d', 'espanol_3d_gtmax', 'espanol_vip', 'espanol_xd', 'subtitulada_3d_gtmax', 'subtitulada_3d_vip',
 'espanol_3d_vip', 'espanol_3d_xd', 'espanol_gtmax', 'subtitulada_3d_xd', 'subtitulada_gtmax', 'subtitulada_vip', 'subtitulada_xd']
func_all = [espanol, subtitulada, espanol_3d, subtitulada_3d, espanol_3d_gtmax, espanol_vip, espanol_xd, subtitulada_3d_gtmax, subtitulada_3d_vip, espanol_3d_vip, espanol_3d_xd,
espanol_gtmax, subtitulada_3d_xd, subtitulada_gtmax, subtitulada_vip, subtitulada_xd]

funciones = dict(zip(func_tags, func_all))

#Removing empty element from funciones dictionary
for x in list(funciones.keys()):
    if not (funciones[x]).exists():
        del funciones[x]

cine_tags = []

for key, value in funciones.iteritems():
    for item in value:
        cine_tags.append(item.idcine.nombre)

cine_tags_unique = list(set(cine_tags))
horarios = {}

for cine in cine_tags_unique:
    horarios[cine] = []

#Appending func_tags and funciones to the horarios dictionary organized by cine
for key, value in funciones.iteritems():
    for item in value:
        for in_key, value in horarios.iteritems():
            if in_key == item.idcine.nombre:
                horarios[in_key].append((key, item)) 
```

* * *

附加信息：

功能：一个 django 查询集，表示电影院中电影的放映时间。

功能选项的类型：

```
['espanol', 'subtitulada', 'espanol_3d', 'subtitulada_3d', 'espanol_3d_gtmax', 'espanol_vip', 'espanol_xd', 'subtitulada_3d_gtmax', 'subtitulada_3d_vip','espanol_3d_vip', 'espanol_3d_xd', 'espanol_gtmax', 'subtitulada_3d_xd', 'subtitulada_gtmax', 'subtitulada_vip', 'subtitulada_xd'] 
```

电影院选项：

```
[u'Cinemark Plaza de las Americas', u'Cineplex', u'Multicines CCI', u'Supercines Quicentro Sur', u'Supercines San Luis', u'Multicines Recreo', u'Multicines Scala', u'Mis Cines', u'Multicines Condado'] 
```

现在我有一个结构如下的元组字典：

```
'Movie theather': [(type_of_funcion, funcion_object), (type_of_funcion, funcion_object)], 'Another Movie Theater': [(type_of_funcion, funcion_object)],... 
```

我现在拥有的带有 dict 的示例数据如下所示：

```
{u'Cinemark Plaza de las Americas': [('subtitulada_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #540: The Hobbit: An Unexpected Journey>), ('subtitulada_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #541: The Hobbit: An Unexpected Journey>), ('subtitulada_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #542: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #548: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #549: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #550: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Cinemark Plaza de las Americas, Funcion #530: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Cinemark Plaza de las Americas, Funcion #531: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Cinemark Plaza de las Americas, Funcion #532: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Cinemark Plaza de las Americas, Funcion #533: The Hobbit: An Unexpected Journey>), ('subtitulada', <Funcion: Cinemark Plaza de las Americas, Funcion #508: The Hobbit: An Unexpected Journey>), ('subtitulada', <Funcion: Cinemark Plaza de las Americas, Funcion #509: The Hobbit: An Unexpected Journey>), ('subtitulada', <Funcion: Cinemark Plaza de las Americas, Funcion #510: The Hobbit: An Unexpected Journey>), ('subtitulada', <Funcion: Cinemark Plaza de las Americas, Funcion #511: The Hobbit: An Unexpected Journey>)], u'Cineplex': [('subtitulada_3d', <Funcion: Cineplex, Funcion #454: The Hobbit: An Unexpected Journey>), ('subtitulada_3d', <Funcion: Cineplex, Funcion #455: The Hobbit: An Unexpected Journey>), ('subtitulada_3d', <Funcion: Cineplex, Funcion #456: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Cineplex, Funcion #451: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Cineplex, Funcion #452: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Cineplex, Funcion #453: The Hobbit: An Unexpected Journey>)], u'Multicines CCI': [('espanol_3d', <Funcion: Multicines CCI, Funcion #158: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Multicines CCI, Funcion #160: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Multicines CCI, Funcion #165: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Multicines CCI, Funcion #166: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Multicines CCI, Funcion #168: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Multicines CCI, Funcion #431: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Multicines CCI, Funcion #434: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Multicines CCI, Funcion #436: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Multicines CCI, Funcion #438: The Hobbit: An Unexpected Journey>), ('espanol', <Funcion: Multicines CCI, Funcion #439: The Hobbit: An Unexpected Journey>)]} 
```

这个问题是我有这样的“重复”类型的funciones：

```
{u'Cinemark Plaza de las Americas': [('subtitulada_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #540: The Hobbit: An Unexpected Journey>), ('subtitulada_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #541: The Hobbit: An Unexpected Journey>), ('subtitulada_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #542: The Hobbit: An Unexpected Journey>), ('espanol_3d', <Funcion: Cinemark Plaza de las Americas, Funcion #548: The Hobbit: An Unexpected Journey>), 
```

相反，我想按属于电影院的功能类型进行分组，如下所示：

```
{u'Cinemark Plaza de las Americas': { {'subtitulada': Funcion1, Funcion2, Funcion3}, {'subtitulada_3d': Funcion4, Fucion5} }, next_movie_theather: {},...} 
```

关于如何做到这一点的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:44:21.050

您可以使用简单的字典理解在一行中进行这样的转换：

```
d = {"a": [(1, "x"), (2, "y")], "b": [(10, "w"), (1, "z")]}

new_d = {k: dict(v) for k, v in d.items()}

print new_d
# {'a': {1: 'x', 2: 'y'}, 'b': {1: 'z', 10: 'w'}} 
```

# ios - 如何从照片的资产 url 中获取元数据

> ID：14147686
> 
> 赞同：0
> 
> 时间：2013-01-03T21:37:30.460
> 
> 标签：ios, metadata, photo, exif, alassetslibrary

我正在为 iOS 制作一个包含照片元数据的相机应用程序。我使用资产库来编写元数据。“writeImageDataToSavedPhotoAlbum”方法有一个返回资产 URL 的完成块。我假设我需要保存此 URL，以便检索元数据和图像。但是，我似乎无法弄清楚如何处理assetURL，以便获取我的信息。

我的代码：

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
if ([mediaType isEqualToString:(__bridge NSString *)kUTTypeMovie]){
    NSURL *urlOfVideo = [info objectForKey:UIImagePickerControllerMediaURL];
} else if ([mediaType isEqualToString:(__bridge NSString *)kUTTypeImage]) {

    CLLocation *location = [[CLLocation alloc] init];

    NSDictionary *metadata = [self getGPSDictionaryForLocation:location];

    UIImage *theImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];

    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(theImage)];
    [library writeImageDataToSavedPhotosAlbum:imageData metadata:metadata completionBlock:^(NSURL *assetURL, NSError *error){
        if (error) {
            NSLog(@"error");
        } else {

////what do I do with the assetURL?

            self.imageURL = assetURL;
            NSLog(@"url %@", self.imageURL);

        }
    } ];

}

[picker dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:02:43.147

您可以使用以下代码使用 ALAsset URL 加载图像

```
 UIImage *myImage = nil;

 ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
 {

    CGImageRef iref = [myasset aspectRatioThumbnail];         

   dispatch_sync(dispatch_get_main_queue(), ^{

       myImage = [UIImage imageWithCGImage:iref];

   });//end block

};
ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
{
    NSLog(@"Cant get image - %@",[myerror localizedDescription]);
};
NSURL *asseturl = //assign your ALAsset URL here
ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];
[assetslibrary assetForURL:asseturl 
               resultBlock:resultblock
              failureBlock:failureblock]; 
```

# codeigniter - VM上的codeigniter 404

> ID：14147696
> 
> 赞同：1
> 
> 时间：2013-01-03T21:38:37.190
> 
> 标签：codeigniter, http-status-code-404

我只是在我的计算机上设置了一个带有 ssh 和 git 以及所有好东西的 VM 服务器......它工作得很好......除了这个该死的 404 ......

我已经启用`mod_rewrite`，所以它按预期工作..

我创建了我的 codeigniter 目录，在这个例子中我们称之为`testsite`

当我访问:`http://192.168.*.*/testsite`时，它会将我重定向到`http://192.168.*.*/testsite/login`应有的位置..

但是，这样做时我得到一个 404 Not Found 错误......但是，当我创建一个`VirtualHost`并将其设置`ServerAlias`为`testsite`-- 然后在我的主机文件中的开发机器设置上`192.168.*.* testsite.dev`并转到`http://testsite.dev`它时，它可以完美地工作..

我已经尝试添加`RewriteBase`到我`.htaccess`的无济于事...

我不知道为什么当它明显存在时它会给我一个 404 ......任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:38:56.503

显然，当您尝试访问您的虚拟机*（它不是您的本地主机）*时，服务器不会让您看到带有**403**错误的页面。但只要你得到**404**，那么 VM 服务器就不会理解你的请求，同时它也不能认为你没有正确的权限。所以它给你**404**而不是**403**。是的，通过添加你让虚拟机了解情况的虚拟主机。

# javascript - 当运行 WebMatrix 的站点访问时，是否有任何受保护的文件类型会返回 404？

> ID：14147699
> 
> 赞同：3
> 
> 时间：2013-01-03T21:38:56.487
> 
> 标签：javascript, jquery, ajax, json, webmatrix

例如，在一个外部 JavaScript 文件中，我在一个简单的 $(document).ready 函数中有这个：

```
$.getJSON("/aTest.json", function (jsonObj) {
    $("#testJSONBtn").click(function () {
        var val = "";
        for (var i = 0; i <= jsonObj.events.length; ++i) {
            val += jsonObj.events[i].title + ", " + jsonObj.events[i].date + ", " + jsonObj.events[i].explanation + "<br/>";
        }
        $("#JSONOutput").append(val);
    });
}); 
```

JavaScript 控制台一直告诉我服务器返回 404（未找到），但是该文件绝对是那个名称，并且正好在那个路径上。该站点可以正常访问所有其他资源。我试过移动文件并重命名它，还有很多其他的东西，所以我觉得这可能与 WebMatrix、它运行的 IIS 版本（是 8 吗？）或文件有关我正在使用的扩展名（.json）。外部 json 文件不应该存储在扩展名为 .json 的文件中吗？

**附加特性：**

我曾经有两个同名的文件，一个是.json文件，另一个是.cshtml，它们在同一个目录下。在这段时间里，上面的函数没有返回 404，事实上，它什么也没返回……它什么也没做，但它没有返回任何错误。

如果重要的话，所有的 id 和选择器都已经过五重检查（甚至更远）。

上述函数是否有问题，或者外部 .js 文件（或 WebMatrix 的 IIS）不会像这样访问另一个外部 .json 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:44:53.093

**您需要将 .json 文件的有效 MIME 类型添加到网站或目录。** 为此，请执行以下步骤

1.  在 IIS 管理器中，右键单击要为其添加 MIME 类型的网站或网站目录，然后单击“属性”。
2.  单击 HTTP 标头选项卡。
3.  单击 Mime 类型。
4.  单击新建。
5.  在“扩展名”框中，键入文件扩展名。（即`.json`）
6.  在 MIME 类型框中，键入与计算机上定义的文件类型完全匹配的描述。如果您定义了已在更高级别定义的 MIME 类型，系统将提示您选择 MIME 类型应驻留的级别。请注意，您可以将 mime 类型用作`text/plain`.
7.  单击确定。

**如果您在 IIS Express 上使用 WebMatrix，请按照以下步骤操作**

1.  打开具有管理员权限的控制台应用程序。
2.  导航到 IIS Express 目录。这位于 Program Files 或 Program Files (x86) 下
3.  运行命令 appcmd set config /section:staticContent /+[fileExtension='json',mimeType='text/plain']

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T21:45:28.007

听起来您需要在 applicationHost.config 中为 *.json 文件添加静态映射。这篇文章很好地解释了如何向 IIS Express 添加 mime 类型：

[http://www.tomasmcguinness.com/2011/07/06/adding-support-for-svg-to-iis-express/](http://www.tomasmcguinness.com/2011/07/06/adding-support-for-svg-to-iis-express/)

您还可以查看 IIS Express 日志以查看日志中是否有更多详细信息。它们通常位于 ~\Documents\IISExpress\Logs

快乐编码！

# c# - C# 应用程序无明显原因退出

> ID：14147701
> 
> 赞同：1
> 
> 时间：2013-01-03T21:39:06.380
> 
> 标签：c#, winforms

我有一个非常可重复的情况，如果我在我的 C# WinForms 应用程序中单击一个按钮，该应用程序总是会意外关闭，但也会正常关闭。优雅地说，我的意思是我在 app_FormClosing 事件中放置了一个断点，它在那里中断。问题是，我不知道是什么导致应用程序关闭！我在我能找到的每个 Environment.Exit、Application.Exit、this.Close 上都设置了中断，但调试器中没有一个被击中。该应用程序此时不应关闭，但它非常可重复且干净地关闭。

在 VS2010 中，我启用了所有异常类型的中断，并且没有发生异常。

如何找出导致我的应用关闭的原因？有没有办法追踪它？

编辑：在 FormClosing 事件期间，e.CloseReason 设置为 CloseReason.None。我不明白这是如何发生或为什么会发生的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:42:42.513

在创建主窗体之前挂钩以下事件：

```
 AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
    Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);
    Application.ThreadException += Application_ThreadException; 
```

将输出发送到 MessageBox、文件或其他地方，以查看您是否收到任何未知异常。

# sqlite - SQLite级联增量，保持唯一性（对于有序列表）

> ID：14147703
> 
> 赞同：0
> 
> 时间：2013-01-03T21:39:07.937
> 
> 标签：sqlite

我想将条目移动到有序列表的中间，其中的顺序由唯一列“orderby”维护。当将值移动到列表的中间时，我指定 orderby 值，如果该值已被采用，则旧行的 orderby 应增加或减少 1，具体取决于移动的方向。

出于测试目的，我有这张表：

```
CREATE TABLE test(
orderby integer,
UNIQUE(orderby) ) 
```

我目前有以下触发器：

```
CREATE TRIGGER [test_insert] 
BEFORE UPDATE OF [orderby]  
ON [test] 
FOR EACH ROW 
BEGIN 

UPDATE test
SET orderby = orderby + 1
WHERE NEW.orderby = orderby;

END 
```

但是，这仅在触发器创建的 orderby 值未使用时才有效。

即，如果我运行`UPDATE test SET orderby = 2 WHERE orderby = 1`，它将使用具有 orderby 值 {1; 2}，但不适用于具有值 {1; 的表；2；3}

我该如何解决这个问题？或者也许完全不同？

编辑：如果我不能让它工作，我想我总是可以选择增加一个范围内的所有 orderby-s，但是，我仍然想让它工作，这将允许我使用值或 orderby 中的间隙并获得更高的效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:01:56.780

编辑：现在已经澄清了愿望，替换了原始答案。

您不能将该字段定义为唯一的，因为即使是 BEFORE 触发器也会在违反唯一性之后触发。因此，使用更安全的 AFTER。

这是我认为您想要的代码，然后是一些测试更新。

```
CREATE TABLE test(pk char primary key,
                  orderby integer);

CREATE TRIGGER test_insert 
  AFTER UPDATE OF orderby ON test 
  BEGIN
    UPDATE test
       set orderby = orderby + 1
     where test.orderby >= NEW.orderby
       and test.pk != NEW.pk;
  END;

insert into test (pk, orderby) values ("a", 1);
insert into test (pk, orderby) values ("b", 2);
insert into test (pk, orderby) values ("c", 3);

select * from test;

update test set orderby=1 where pk='c';
select * from test order by orderby";
update test set orderby=2 where pk='b';
select * from test order by orderby;
update test set orderby=4 where pk='a';
select * from test order by orderby; 
```

# c++ - Cholesky 分解 ScaLapack 错误

> ID：14147705
> 
> 赞同：15
> 
> 时间：2013-01-03T21:39:12.483
> 
> 标签：c++, fortran, blas, scalapack

我收到以下错误，我不知道为什么。

```
{    1,    1}:  On entry to PDPOTRF parameter number    2 had an illegal value
{    1,    0}:  On entry to PDPOTRF parameter number    2 had an illegal value
{    0,    1}:  On entry to PDPOTRF parameter number    2 had an illegal value
{    0,    0}:  On entry to PDPOTRF parameter number    2 had an illegal value

 info < 0:  If the i-th argument is an array and the j-entry had an illegal value, then INFO = -(i*100+j), if the i-th argument is a scalar and had an illegal value, then INFO = -i. 
```

我知道错误消息的含义，但我尽可能地遵循了网络上可用的过时文档，并尝试从网络上的工作示例代码中拼凑出一个并行的 Cholesky 分解。我不确定我哪里出错了。

有人可以解释我在下面的代码中哪里出错了吗？这是代码功能的概述，我正在使用 4 个处理器进行测试，并将 8x8 矩阵划分为 2 x 2 处理器块网格从文件中加载矩阵，这是一个示例 8 x 8 matrixfile ，

```
182   147   140   125   132    76   126   157
147   213   185   150   209   114   166   188
140   185   232   129   194   142   199   205
125   150   129   143   148    81   104   150
132   209   194   148   214   122   172   189
76   114   142    81   122   102   129   117
126   166   199   104   172   129   187   181
157   188   205   150   189   117   181   259 
```

我按照示例将矩阵分配到 4 个单独的 4x4 本地阵列，每个阵列分别位于 4 个节点上。然后我运行并调用产生上述错误`descinit_`的相关例程。`pdpotrf_`我不知道我哪里出错了，并尽可能地遵循文档。Fortran 中并行 Cholesky 分解的工作示例也将有很大帮助

**函数调用参考**

[pdpotrf_](http://www.netlib.org/scalapack/explore-html/d5/d9e/pdpotrf_8f_source.html)

[descinit_](http://www.netlib.org/scalapack/explore-html/dd/d22/descinit_8f_source.html)

**运行参数**

```
code name - Meaning = Value
N - Global Rows = 8
M - Global Cols = 8
Nb - Local Block Rows = 2
Mb - Local Block Cols = 2
nrows - Local Rows = 4
ncols Local Cols= 4
lda - Leading dimension of local array = 4 (i've tried 2,4,8)
ord - Order of Matrix = 4   (i've also tried many different things here as well) 
```

我在每个节点上都打印了上述参数，它们是相同的

```
#include <mpi.h>
#include <iostream>
#include <iomanip>
#include <string>
#include <fstream>
#include <iostream>
#include <stdlib.h>
#include <sstream>
using namespace std;

/*
  To compile:
  mpic++ test.cpp -o test -L/home/admin/libs -lscalapack -lrefblas -ltmg -lreflapack -lgfortran -Wall -O2
  To run:
  mpirun -np 4 ./test matrixfile 8 8 2 2

*/

extern "C" {
  /* Cblacs declarations */
  void Cblacs_pinfo(int*, int*);
  void Cblacs_get(int, int, int*);
  void Cblacs_gridinit(int*, const char*, int, int);
  void Cblacs_gridinfo(int, int*, int*, int*,int*);
  void Cblacs_pcoord(int, int, int*, int*);
  void Cblacs_gridexit(int);
  void Cblacs_barrier(int, const char*);
  void Cdgerv2d(int, int, int, double*, int, int, int);
  void Cdgesd2d(int, int, int, double*, int, int, int);

  int numroc_(int*, int*, int*, int*, int*);

  void pdpotrf_(char*, int*, double*,
        int*, int*, int*, int*);

  void descinit_( int *, int *, int *, int *, int *, int *, int *,
          int *, int *, int *);

}

int main(int argc, char **argv){
  /* MPI */
  int mpirank,nprocs;
  MPI_Init(&argc, &argv);
  MPI_Comm_rank(MPI_COMM_WORLD, &mpirank);
  MPI_Comm_size(MPI_COMM_WORLD, &nprocs);
  double MPIelapsed;
  double MPIt2;
  double MPIt1;

  /* Helping vars */
  int iZERO = 0;
  int verbose = 1;
  bool mpiroot = (mpirank == 0);

  if (argc < 6) {
    if (mpiroot)
      cerr << "Usage: matrixTest matrixfile N M Nb Mb"
       << endl
       << " N = Rows , M = Cols , Nb = Row Blocks , Mb = Col Blocks "
       << endl;

    MPI_Finalize();
    return 1;
  }
  /* Scalapack / Blacs Vars */
  int N, M, Nb, Mb;
  int descA[9];
  int info = 0;
  //  int mla = 4;
  int ord = 8;

  double *A_glob = NULL, *A_glob2 = NULL, *A_loc = NULL;

  /* Parse command line arguments */
  if (mpiroot) {
    /* Read command line arguments */
    stringstream stream;
    stream << argv[2] << " " << argv[3] << " " << argv[4] << " " << argv[5];
    stream >> N >> M >> Nb >> Mb;

    /* Reserve space and read matrix (with transposition!) */
    A_glob  = new double[N*M];
    A_glob2 = new double[N*M];
    string fname(argv[1]);
    ifstream file(fname.c_str());
    for (int r = 0; r < N; ++r) {
      for (int c = 0; c < M; ++c) {
    file >> *(A_glob + N*c + r);
      }
    }

    /* Print matrix */

      if(verbose == 1) {
    cout << "Matrix A:\n";
    for (int r = 0; r < N; ++r) {
      for (int c = 0; c < M; ++c) {
        cout << setw(3) << *(A_glob + N*c + r) << " ";
      }
      cout << "\n";
    }
    cout << endl;
      }

  }

  /* Begin Cblas context */
  int ctxt, myid, myrow, mycol, numproc;
  //<TODO> make dynamic
  int procrows = 2, proccols = 2;
  Cblacs_pinfo(&myid, &numproc);
  Cblacs_get(0, 0, &ctxt);
  Cblacs_gridinit(&ctxt, "Row-major", procrows, proccols);
  Cblacs_gridinfo( ctxt, &procrows, &proccols, &myrow, &mycol );
  /* process coordinates for the process grid */
  // Cblacs_pcoord(ctxt, myid, &myrow, &mycol);

  /* Broadcast of the matrix dimensions */
  int dimensions[4];
  if (mpiroot) {
    dimensions[0] = N;//Global Rows
    dimensions[1] = M;//Global Cols
    dimensions[2] = Nb;//Local Rows
    dimensions[3] = Mb;//Local Cols
  }
  MPI_Bcast(dimensions, 4, MPI_INT, 0, MPI_COMM_WORLD);
  MPI_Bcast(&ord, 1, MPI_INT, 0, MPI_COMM_WORLD);
  N = dimensions[0];
  M = dimensions[1];
  Nb = dimensions[2];
  Mb = dimensions[3];

  int nrows = numroc_(&N, &Nb, &myrow, &iZERO, &procrows);
  int ncols = numroc_(&M, &Mb, &mycol, &iZERO, &proccols);

  int lda = max(1,nrows);

  MPI_Bcast(&lda, 1, MPI_INT, 0, MPI_COMM_WORLD);

  /* Print grid pattern */
  if (myid == 0)
    cout << "Processes grid pattern:" << endl;
  for (int r = 0; r < procrows; ++r) {
    for (int c = 0; c < proccols; ++c) {
      Cblacs_barrier(ctxt, "All");
      if (myrow == r && mycol == c) {
    cout << myid << " " << flush;
      }
    }
    Cblacs_barrier(ctxt, "All");
    if (myid == 0)
      cout << endl;
  }

  if(myid == 0){
    cout <<"Run Parameters"<<endl;
    cout <<"Global Rows = " << M <<endl;
    cout <<"Global Cols = " << N <<endl;
    cout <<"Local Block Rows = " << Mb <<endl;
    cout <<"Local Block Cols = " << Nb <<endl;
    cout << "nrows = "<<nrows<<endl;
    cout << "ncols = "<<ncols<<endl;
    cout << "lda = "<<lda<<endl;
    cout <<"Order = "<<ord<<endl;
  }

  for (int id = 0; id < numproc; ++id) {
    Cblacs_barrier(ctxt, "All");
  }
  A_loc = new double[nrows*ncols];
  for (int i = 0; i < nrows*ncols; ++i) *(A_loc+i)=0.;

  /* Scatter matrix */
  int sendr = 0, sendc = 0, recvr = 0, recvc = 0;
  for (int r = 0; r < N; r += Nb, sendr=(sendr+1)%procrows) {
    sendc = 0;
    int nr = Nb;
    if (N-r < Nb)
      nr = N-r;

    for (int c = 0; c < M; c += Mb, sendc=(sendc+1)%proccols) {
      int nc = Mb;
      if (M-c < Mb)
    nc = M-c;

      if (mpiroot) {
    Cdgesd2d(ctxt, nr, nc, A_glob+N*c+r, N, sendr, sendc);
      }

      if (myrow == sendr && mycol == sendc) {
    Cdgerv2d(ctxt, nr, nc, A_loc+nrows*recvc+recvr, nrows, 0, 0);
    recvc = (recvc+nc)%ncols;
      }

    }

    if (myrow == sendr)
      recvr = (recvr+nr)%nrows;
  }

  /* Print local matrices */
  if(verbose == 1) {
  for (int id = 0; id < numproc; ++id) {
    if (id == myid) {
    cout << "A_loc on node " << myid << endl;
    for (int r = 0; r < nrows; ++r) {
      for (int c = 0; c < ncols; ++c)
        cout << setw(3) << *(A_loc+nrows*c+r) << " ";
      cout << endl;
    }
    cout << endl;
      }
      Cblacs_barrier(ctxt, "All");
    }
  }

  for (int id = 0; id < numproc; ++id) {
    Cblacs_barrier(ctxt, "All");
  }

  /* DescInit */
  info=0;
  descinit_(descA, &N, &M, &Nb, &Mb,&iZERO,&iZERO,&ctxt, &lda, &info);

  if(mpiroot){
    if(verbose == 1){
      if (info == 0){
    cout<<"Description init sucesss!"<<endl;
      }
      if(info < 0){
    cout <<"Error Info < 0: if INFO = -i, the i-th argument had an illegal value"<< endl
         <<"Info = " << info<<endl;
      }
    }
    // Cblacs_barrier(ctxt, "All");
  }

  //psgesv_(n, 1, al, 1,1,idescal, ipiv, b, 1,1,idescb,  info) */
  //    psgesv_(&n, &one, al, &one,&one,idescal, ipiv, b, &one,&one,idescb,  &info);
  //pXelset http://www.netlib.org/scalapack/tools/pdelset.f

  /* CHOLESKY HERE */
  info = 0;
  MPIt1=MPI_Wtime();

  pdpotrf_("L",&ord,A_loc,&Nb,&Mb,descA,&info);

  for (int id = 0; id < numproc; ++id) {
    Cblacs_barrier(ctxt, "All");
  }

  MPIt2 = MPI_Wtime();
  MPIelapsed=MPIt2-MPIt1;
  if(mpiroot){
    std::cout<<"Cholesky MPI Run Time" << MPIelapsed<<std::endl;

    if(info == 0){
      std::cout<<"SUCCESS"<<std::endl;
    }
    if(info < 0){

      cout << "info < 0:  If the i-th argument is an array and the j-entry had an illegal value, then INFO = -(i*100+j), if the i-th argument is a scalar and had an illegal value, then INFO = -i. " << endl;
      cout<<"info = " << info << endl;
    }
    if(info > 0){
      std::cout<<"matrix is not positve definte"<<std::endl;
    }
  }

  //sanity check set global matrix to zero before it's recieved by nodes
  if(mpiroot){
    for (int r = 0; r < N; ++r) {
      for (int c = 0; c < M; ++c) {
    A_glob2[c *N + r]  = 0; 
      }
    }
  }

  /* Gather matrix */
  sendr = 0;
  for (int r = 0; r < N; r += Nb, sendr=(sendr+1)%procrows) {
    sendc = 0;
    // Number of rows to be sent
    // Is this the last row block?
    int nr = Nb;
    if (N-r < Nb)
      nr = N-r;

    for (int c = 0; c < M; c += Mb, sendc=(sendc+1)%proccols) {
      // Number of cols to be sent
      // Is this the last col block?
      int nc = Mb;
      if (M-c < Mb)
    nc = M-c;

      if (myrow == sendr && mycol == sendc) {
    // Send a nr-by-nc submatrix to process (sendr, sendc)
    Cdgesd2d(ctxt, nr, nc, A_loc+nrows*recvc+recvr, nrows, 0, 0);
    recvc = (recvc+nc)%ncols;
      }

      if (mpiroot) {
    // Receive the same data
    // The leading dimension of the local matrix is nrows!
    Cdgerv2d(ctxt, nr, nc, A_glob2+N*c+r, N, sendr, sendc);
      }
    }
    if (myrow == sendr)
      recvr = (recvr+nr)%nrows;
  }
  /* Print test matrix */
  if (mpiroot) {
    if(verbose == 1){
      cout << "Matrix A test:\n";
      for (int r = 0; r < N; ++r) {
    for (int c = 0; c < M; ++c) {
      cout << setw(3) << *(A_glob2+N*c+r) << " ";
    }
    cout << endl;
      }
    }
  }

  /* Release resources */
  delete[] A_glob;
  delete[] A_glob2;
  delete[] A_loc;
  Cblacs_gridexit(ctxt);
  MPI_Finalize();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T20:55:11.550

对 - 我解决了这个问题。这是你必须做的（我检查了修改后的 MPI 程序的结果与 Octave 中矩阵的 Cholesky 解压缩 - 它有效。）。

我发现 IBM 的以下 LAPACK 参考比您链接中的参考更有帮助：http: [//publib.boulder.ibm.com/infocenter/clresctr/vxrx/index.jsp?topic=%2Fcom.ibm.cluster。 pessl.v4r2.pssl100.doc%2Fam6gr_lpotrf.htm](http://publib.boulder.ibm.com/infocenter/clresctr/vxrx/index.jsp?topic=%2Fcom.ibm.cluster.pessl.v4r2.pssl100.doc%2Fam6gr_lpotrf.htm)

`PDPOTRF( UPLO, N, A, IA, JA, DESCA, INFO )`

你正在传递`Mb`和`Nb`作为`IA`和`JA`。但是，这些参数旨在在更大的矩阵中提供全局矩阵的起始行和列。仅当您有一个大矩阵并且只想要子矩阵的 Cholesky 分解时，它们才相关。在你的情况下，`IA`两者`JA`都必须是`1`！

所以你需要做的就是：

```
int IA = 1;
int JA = 1;
pdpotrf_("L",&ord,A_loc,&IA,&JA,descA,&info); 
```

您可能还想更改硬编码`int ord = 8;`，使其取决于从命令行读取的值，否则您稍后会遇到问题。

如上所述修改程序的输出：

```
Cholesky MPI Run Time0.000659943
SUCCESS
Matrix A test:
13.4907 147 140 125 132  76 126 157 
10.8964 9.70923 185 150 209 114 166 188 
10.3775 7.4077 8.33269 129 194 142 199 205 
9.26562 5.0507 -0.548194 5.59806 148  81 104 150 
9.78449 10.5451 1.72175 0.897537 1.81524 122 172 189 
5.63349 5.41911 5.20784 0.765767 0.0442447 3.63139 129 117 
9.33974 6.61543 6.36911 -2.22569 1.03941 2.48498 1.79738 181 
11.6376 6.30249 4.50561 2.28799 -0.627688 -2.17633 7.27182 0.547228 
```

用于比较的八度输出：

```
octave:1> A=dlmread("matrixfile4")
A =

   182   147   140   125   132    76   126   157
   147   213   185   150   209   114   166   188
   140   185   232   129   194   142   199   205
   125   150   129   143   148    81   104   150
   132   209   194   148   214   122   172   189
    76   114   142    81   122   102   129   117
   126   166   199   104   172   129   187   181
   157   188   205   150   189   117   181   259

octave:2> C=chol(A)
C =

   13.49074   10.89636   10.37749    9.26562    9.78449    5.63349    9.33974   11.63761
    0.00000    9.70923    7.40770    5.05070   10.54508    5.41911    6.61543    6.30249
    0.00000    0.00000    8.33269   -0.54819    1.72175    5.20784    6.36911    4.50561
    0.00000    0.00000    0.00000    5.59806    0.89754    0.76577   -2.22569    2.28799
    0.00000    0.00000    0.00000    0.00000    1.81524    0.04424    1.03941   -0.62769
    0.00000    0.00000    0.00000    0.00000    0.00000    3.63139    2.48498   -2.17633
    0.00000    0.00000    0.00000    0.00000    0.00000    0.00000    1.79738    7.27182
    0.00000    0.00000    0.00000    0.00000    0.00000    0.00000    0.00000    0.54723 
```

（我之前关于矩阵被错误地复制到节点的评论 - 现在已删除 - 不适用，你的程序的其余部分对我来说似乎很好。）

# delphi - 玻璃区域上的组件

> ID：14147707
> 
> 赞同：8
> 
> 时间：2013-01-03T21:39:25.037
> 
> 标签：delphi, components, delphi-xe2, aero-glass

如何在窗口窗体的玻璃区域中放置控件（按钮、面板、页面控件、标签）？

![玻璃区控制](../Images/c19337520c74fc6d42a3b8f4af30442b.png)

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T22:18:43.503

Chris Rolliston 在他的文章中解释了如何做到这一点：http: [//delphihaven.wordpress.com/2010/04/22/setting-up-a-custom-title-bar-reprise/](http://delphihaven.wordpress.com/2010/04/22/setting-up-a-custom-title-bar-reprise/)。

演示项目可以在这里下载：http: [//cc.embarcadero.com/Item/27688](http://cc.embarcadero.com/Item/27688)

# android - Android 解析： <layer><irial... as="" xml<="" h1="">> ID：14147716
> 
> 赞同：0
> 
> 时间：2013-01-03T21:40:13.673
> 
> 标签：android, xml, xml-parsing

我有这个带有`&lt;`和`&gt;`作为字符串变量的xml。现在我需要像 XML 一样解析它，最好使用 SAX 解析器。

我不知道该怎么做。如果我`SAX`用这个字符串调用解析器，它不会给我任何东西。</irial...></layer>

# sql - 关于 SQL 语法区分大小写的说明

> ID：14147725
> 
> 赞同：1
> 
> 时间：2013-01-03T21:40:55.923
> 
> 标签：sql, sql-server

我看过一些关于关键字区分大小写的文章，但我对某些事情有点困惑，不想死帖我决定在这里发布。

我正在使用 SQL Server Management Studio，并且看到如下 SQL 代码：

```
SELECT * from custTable as A
INNER JOIN custTable as a
ON A.custID = a.custID 
```

然后我也看到了这样的 SQL 代码

```
SELECT A.CustID FROM custTable A 
INNER JOIN
(SELECT a.CustID FROM custTable a
    JOIN
    (SELECT A.CustID FROM custTable A
        JOIN 
        (SELECT CustID FROM custTable
        WHERE  [CustID] = 1
        GROUP BY [CustID] ) ap ON A.CustID = ap.CustID  
        GROUP BY A.[CustID] ) m ON A.CustID = m.CustID ) AP ON ap.CustID = A.CustID 
```

显然，SQL 代码在别名方面是区分大小写的。但是，已经看到与上面类似的代码是这样写的：

```
SELECT A.CustID FROM custtable A 
INNER JOIN
(SELECT a.CustID FROM CustTable a
    JOIN
    (SELECT A.CustID FROM CUSTTABLE A
        JOIN 
        (SELECT CustID FROM Custtable
        WHERE  [CustID] = 1
        GROUP BY [CustID] ) ap ON A.CustID = ap.CustID  
        GROUP BY A.[CustID] ) m ON A.CustID = m.CustID ) AP ON ap.CustID = A.CustID 
```

显然，SQL 代码在表名方面被认为是不区分大小写的。

这是因为表名基本上是字符串常量，而别名就像局部变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:51:47.673

通常，SQL Server 对关键字、别名或表名不区分大小写。

在您的示例中，“a”和“A”的别名是等效的。但是，它们属于不同的范围。请注意，这些`on`子句总是有不同的别名“ap”和“A”，“A”和“m”，等等。

如果需要，您可以*使*SQL Server 实例区分大小写（请参阅[此处](http://msdn.microsoft.com/en-us/library/ms175874.aspx)）。根据文档，SQL Server 保留保留字的大写和小写版本。不知道是不是也保留了大小写混合的保留字。

# php - 条件子域

> ID：14147730
> 
> 赞同：-1
> 
> 时间：2013-01-03T21:41:07.587
> 
> 标签：php, codeigniter

> **可能重复：**
> [自定义域名映射到用户配置文件。](https://stackoverflow.com/questions/8515644/custom-domain-name-mapping-to-user-profile)

我正在做一个新项目，想知道这是否可以使用 codeigniter 以及如何实现。在这个应用程序中，访问者可以开设一个帐户，现在当他们的帐户打开时，要访问他们的仪表板，他们应该去他们的用户名点域名，就像这样`username.domain.com`，我在一个网站上看到这个并且非常喜欢它所以我想知道如果我可以对 codeigniter 和如何做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:01:29.313

`username.domain.com`不是基于**codeigniter**的部分*用户名。*称为**子域**，由主机提供。它有自己的 CGI 脚本，可以被视为能够托管代码的文件夹。

因此，如果您的主机有一个**API**可以让您控制*域*的子域。然后是编码问题。所以无论是使用 codeigniter 还是其他框架都没有区别。

希望这会有所帮助。

# c# - 防止多个组合框之间的重复选择

> ID：14147732
> 
> 赞同：2
> 
> 时间：2013-01-03T21:41:14.017
> 
> 标签：c#, combobox, verification

我的 WinForms 应用程序中有一个 groupBox。这个 groupBox 中有大约 25 个组合框，用于选择各种选项/设置。它们都共享相同的项目集合（下拉项目）。默认情况下，它们都设置为不同的项目（没有 2 个组合框具有相同的文本）。

但是，我的应用程序的可定制性允许用户将设置更改为其他内容。我想要做的是当用户将 comboBoxSA 的选择索引更改为 3 并且已经选择 3 的另一个组合框（这将导致 2 个组合框显示相同的文本）以某种方式标记用户说设置不能重复。

当用户更改 selectionIndex 时，当用户尝试关闭表单时，这可能会立即发生，等等。我现在看到实现这一点的唯一方法是为每个组合框设置不同的 selectionIndex 更改函数，并将该组合框的文本与其他组合框中的每一个进行比较。

关于缩短这个的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:48:14.313

好吧，我将从一个简单的方法开始，该方法确定任意数量的 ComboBoxes 是否包含任何重复项：

```
public static bool containsDuplicates(IList<ComboBox> boxes)
{
    return boxes.Count != 
        boxes.Select(box => box.SelectedValue) //TODO cast if needed, or use some other property
        .Distinct()
        .Count();
} 
```

如果不同值的数量小于总数，则其中至少两个必须具有相同的值。

只需构建所有组合框的列表（可能排除任何尚未选择任何值的组合框）并将它们传递给此方法。

您可以在每个选定的索引更改事件中调用它（如果您有所有这些事件的集合，只需在开始时循环并将其添加到每个事件中）或在提交表单时调用它。（或两者。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:45:18.223

这个怎么样？将其设置为所有框的 SelectedIndexChanged 事件处理程序。

```
Dictionary<int, List<ComboBox>> indexToBoxes
Dictionary<ComboBox, int> boxToIndex 

void ComboBox_SelectedIndexChanged(object sender, EventArgs e)
{
    var box = (ComboBox)sender;
    var prevIndex = boxToIndex[box];
    boxToIndex[box] = box.SelectedIndex;

    if (indexToBoxes[prevIndex].Count == 2)
        //set boxes in set to normal
    indexToBoxes[prevIndex].Remove(box);

    indexToBoxes[box.SelectedIndex].Add(box);
    if (indexToBoxes[box.SelectedIndex].Count > 1)
        foreach (var box in indexToBoxes[box.SelectedIndex])
            //set boxes to alert indication, like background to red
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:45:54.150

这就是我所做的：

创建了一个组合框列表：

`List<ComboBox> toolParameterComboBoxes = new List<ComboBox>();`

将所有组合框添加到该列表中：

`toolParameterComboBoxes.Add(countcomboBox);`（重复...）

更改了所有组合框的 selectionIndexChanged 事件以使用它：

```
private void validateComboBox(object sender, EventArgs e)
{
  ComboBox thisCB = sender as ComboBox;
  if (thisCB.Text != "")
  {
       foreach (ComboBox cb in toolParameterComboBoxes)
       {
           if (thisCB.Name != cb.Name && thisCB.Text == cb.Text && thisCB.Text != "" && cb.Text != "")
           {
               MessageBox.Show("You cannot duplicate tool parameters." + "\r\n" + "\r\n" 
                            + "That option has been selected in " + cb.Name.Replace("comboBox", ""), "Error");
                        thisCB.SelectedIndex = 0;
                        break;
           }
        }
  }
} 
```

这处理空的组合框。由于某种原因`thisCB.Text = "";`不起作用，所以我在他们的每个集合中添加了一个空的组合框项目，并简单地将选定的索引更改为 0，因此永远无法选择重复的项目。

# android - Android：Scrollview中的RelativeLayout全部当场堆砌

> ID：14147739
> 
> 赞同：0
> 
> 时间：2013-01-03T21:41:59.767
> 
> 标签：android, android-ui

我目前正在尝试创建一个嵌入在 Scrollview 中的 RelativeLayout（因此可以垂直滚动 RelativeLlayout 的内容）。我的布局文件如下所示：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/label_first_day_of_budget_cycle"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_margin="10dp"
            android:text="@string/first_day_of_budget_cycle"
            android:textSize="20sp" />

        <include
            android:id="@+id/settings_divider_one"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/label_first_day_of_budget_cycle"
            layout="@layout/w_divider" />

        <TextView
            android:id="@+id/label_monthly_income"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/settings_divider_one"
            android:layout_margin="10dp"
            android:text="@string/monthly_income"
            android:textSize="20sp" />

        <include
            android:id="@+id/settings_add_income"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/label_monthly_income"
            layout="@layout/w_add" />

        <include
            android:id="@+id/settings_divider_two"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/settings_add_income"
            layout="@layout/w_divider" />

        <TextView
            android:id="@+id/label_monthly_expenses"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/settings_divider_two"
            android:layout_margin="10dp"
            android:text="@string/monthly_expenses"
            android:textSize="20sp" />

        <include
            android:id="@+id/settings_add_expenses"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/label_monthly_expenses"
            layout="@layout/w_add" />

        <include
            android:layout_alignParentLeft="true"
            android:layout_below="@id/settings_add_expenses"
            layout="@layout/w_divider" />
    </RelativeLayout>

</ScrollView> 
```

这就是它在我手机上的样子：

![在此处输入图像描述](../Images/5ac34f32d61d6d73bfeb06636624e878.png)

我尝试了我能想到/在网络或 stackoverflow 上找到的所有可能的变体，但到目前为止都没有成功。我不确定我还能尝试什么或我在这里缺少什么。

我尝试改变 RelativeLayout 和 Scrollview 的 layout_width 和 layout_height 值，但没有成功。任何关于我做错了什么的提示将不胜感激。

**更新**

按照本的建议，我删除了包含，然后布局正确呈现。我提交了一个错误报告*[点击](http://code.google.com/p/android/issues/detail?id=42287&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)*，因为我认为，其中包括应该与嵌入在 Scrollviews 中的 RelativeLayouts 一起使用。至少我看不出他们不应该这样做的理由。如果我的布局包含另一个阻止包含正常工作的错误，我想/希望我会在票证中得到相应的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:53:31.790

`include`据我记得，在带有 ScrollViews 的 xml 中存在某种问题。您可以尝试用实际的 xml 替换包含吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:57:29.567

尝试使用`LinearLayout`带有宽度和高度的 a`fill_parent`而不是`RelativeLayout`.

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent" >
    <LinearLayout android:orientation="vertical"
            android:layout_width="fill_parent" android:layout_height="fill_parent" >
          ... your content here 
```

用于`RelativeLayout`垂直对齐元素是一个坏主意（性能较慢 + 不易阅读）。如果您确实需要相对布局，可以将其添加到 LinearLayout 元素中。确保宽度和高度是`fill_parent`.

# android - 隐藏应用名称和它的栏

> ID：14147751
> 
> 赞同：4
> 
> 时间：2013-01-03T21:42:47.693
> 
> 标签：android, eclipse

我一直在尝试删除此栏（无法热链接图像，但请查看下一个链接）：

[http://i.imgur.com/fRvMW.png](http://i.imgur.com/fRvMW.png)

但我无法实现。

尝试了以下方法：

添加到清单以下：

```
android:theme="@android:style/Theme.NoActionBar" 
```

但结果是崩溃。可能是因为我没有这个“主题”。我不知道我应该在这里写什么。

还尝试通过图形布局手动删除每个片段，选择“无操作栏”，它没有显示在“预览”上，但它显示在应用程序中，可能是因为它的配置位置错误。

请注意，它带有片段。我搜索了通过代码执行此操作，但我只是找到了为活动执行此操作的选项。

所以，我的问题是：如何隐藏应用操作栏？

编辑：

# 解决了

在我的代码上，我有这个：

```
final ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE); 
```

所以，刚刚补充：

```
bar.hide(); 
```

一切正常。即使未显示选项卡名称，导航仍然有效（左右交换以交换片段。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:47:54.553

你试过这个吗？

```
ActionBar actionBar = getActionBar();
actionBar.hide(); 
```

# ruby-on-rails - Rails 从视图表的列名和选择值中获取

> ID：14147752
> 
> 赞同：0
> 
> 时间：2013-01-03T21:42:51.370
> 
> 标签：ruby-on-rails, ruby, haml

我现在，这个问题可能不好，但需要帮助：在我的 rails haml 视图中，我有这样的代码：

```
%table.table.table-striped
  = form_tag :admin_other_price_upload do
    %tr    
      - @csv.first.length.times do |n|
        %th
          = n + 1
          %br/
          =select_tag "s"+(n+1).to_s, options_for_select([["Брэнд", "Brand"], ["Артикул","Article"], ["Наименование","Descr"], ["Цена","Price"], ["Количество","Quantity"], ["Дополнительно","Other"], ["Поле кроссов","Cross"]]), :prompt => 'Все', :id => "select-value"
********************************* 
```

如您所见，我正在设置所有选择的名称，例如 s(n+1) 和列表中的值一。但是我怎样才能在控制器方法中同时获得它们呢？我需要它，因为我有动态表。我将举例说明：

所以我有选择的表

```
name = s1 (value = Brand) | name = s2 (value = Price) 
```

所以我需要在控制器中不仅获得 s1 => Brand，还需要从 s1 获得这个 1 所以如果参数看起来像 [ s1 => {Brand} ] 我需要获得我的计算 s1 不是值，而是 s1 作为字符串（**很简单，我需要在参数中找到哪个值具有品牌并将其选择为值**）所以对于品牌，我需要选择 s1，并将 s1 值设置为 s1，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:16:24.533

我可能理解你，但不确定。

```
# let's say your params hash is like:
params = { :action => 'show', :controller => 'articles', 
           :s1 => 'Article', :s2 => 'Brand', :s3 => 'Price', ... }

brand_param = params.select{ |key, value| value == 'Brand' }
# => { :s2 => 'Brand' }
which_s_is_brand = brand_param.keys.first.to_s
# => 's2' 
```

# javascript - 数组中带有 Javascript 的图片

> ID：14147754
> 
> 赞同：0
> 
> 时间：2013-01-03T21:43:03.917
> 
> 标签：javascript, image

编辑：我听从了 Happy 和 Bart Friederichs 的建议，这真的很有帮助。我没有使用 php，而是使用 javascript，代码现在可以工作，但我仍然有问题。当我单击页面上的按钮时，它会显示我想要的图片，但按钮会消失，所以我无法循环查看数组中的其余图片。怎么了？任何帮助，将不胜感激。

```
<html>
<head>
<script type="text/javascript"> 
var picArray=["images.jpg","customLogo.gif.png"];
var count=0;

function changePic(){
    document.write("<img src='"+ picArray[count] +"' />");
    count++;
}
</script>
</head>

<body>
    <button type="button" onclick="changePic()">Click Me!</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:46:01.863

您需要使用 ajax 来处理 onClick 事件，这反过来会在后台运行一个 PHP 页面，该页面可能会返回一个 filenmae。

然后 ajax / jQuery 会改变实际的图片

这是一个使用 php 覆盖 ajax 的教程： [http ://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php](http://www.tizag.com/ajaxTutorial/ajaxxmlhttprequest.php)

或者，您可以将所有文件名输出到 java 脚本数组：

```
echo '<script> var picarray = array() ;';
foreach($arrayPic as $pic) ... 
```

然后只需使用 js 访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:53:44.670

您的 changePic() 函数是一个 PHP 函数，但是当您调用 onclick="changePic()" 时，您正在使用 HTML 来调用 Javascript 函数。如果您在浏览器中查看调试窗口，您会看到一条错误消息，指出 changePic 不存在。

您不能使用 html 的 onClick 来调用 PHP，而不需要重定向或调用 JS 中的“包装器”函数，该函数通过 AJAX 等加载带有参数的 PHP 文件。

您在这里有几个选项.. 将您的图像放入 Javascript 数组并使用 onclick 调用从中获取它们，如果您这样做，您甚至不需要您的 iframe，您可以使用直接将图像打印到页面*文件*。写。或者，为什么不使用数组索引的参数将 iframe 的源设置为 PHP 脚本。所以你在哪里

```
src=$picArray[count] 
```

改成

```
src=whatever.php?image=1 
```

例如。这种方式只需要呈现 iframe 一次，而不是像您试图知道的那样在每次点击时呈现，您只需更改 iframe 内容。

有很多方法可以做你正在尝试的事情，如果上述任何一个建议对你有用，请告诉我。

# ruby-on-rails - 使用不同的发件人发送电子邮件

> ID：14147757
> 
> 赞同：1
> 
> 时间：2013-01-03T21:43:17.190
> 
> 标签：ruby-on-rails, email, actionmailer

我有一个应用程序可以让卖家向他的客户发送电子邮件。如何将邮件的发件人设置为卖家的邮箱？

例子：

> 电子邮件 A：{来自：“steve@domain.com”，至：“client@whatever.com”} 电子邮件 B：{来自：“andrew@other-domain.com”，至：“blabla@client” .com }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:48:51.353

如果您使用的是 ActionMailer：

[http://api.rubyonrails.org/classes/ActionMailer/Base.html](http://api.rubyonrails.org/classes/ActionMailer/Base.html)

您会看到，在该`mail`方法中，您可以提供 to、bcc、from、subject、body 等参数！

使用他们的例子：

```
class ApplicationMailer < ActionMailer::Base
  def welcome(recipient, sender) # where sender is a String like "an-email@address.com"
    mail(:to => recipient, :from => sender, :subject => "Here is what we look like")
  end
end 
```

# matlab - matlab中的c++ mex文件

> ID：14147759
> 
> 赞同：2
> 
> 时间：2013-01-03T21:43:29.053
> 
> 标签：matlab, external, symbols, mex

我正在尝试使用文件调用`c++`函数。在编译文件夹中给出的任何示例 mex 程序时，我得到了同样的错误：`matlab``mex``<root>\extern\examples\mex`

```
Creating library C:\USERS\SONY\APPDATA\LOCAL\TEMP\MEX_AA~1\templib.x and object C:\USERS\SONY\APPDATA\LOCAL\TEMP\MEX_AA~1\templib.exp 
arrayProduct.obj : error LNK2001: unresolved external symbol _fltused 
LINK : error LNK2001: unresolved external symbol _DllMainCRTStartup 
arrayProduct.mexw64 : fatal error LNK1120: 2 unresolved externals 
```

我正在使用 matlab 7.8(2009a) 和编译器 microsoft visual studio express 2008。

有人可以帮帮我吗？

谢谢。

# eclipse - egit 不显示标签装饰

> ID：14147760
> 
> 赞同：5
> 
> 时间：2013-01-03T21:43:32.727
> 
> 标签：eclipse, git, egit

我是一个 git 初学者。

我创建了一个包含 4 个 eclipse 项目的 git 存储库。

有一段时间我正在使用 git 命令提交和推送。

之后，我为 Eclipse 安装了 EGit。在“Git 存储库探索”透视图中，我添加了一个“现有本地存储库”，并且能够从该透视图提交和推送更改。

问题是，在任何 persective 中，eclipse 都不会根据 Window -> Preferences -> Team -> Git -> Label Decorations 来装饰标签。或者更直接地说——我在项目树中看不到未提交的更改。

有什么建议么？
谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T21:48:29.433

好的，我刚刚在这里看到了答案： [Eclipse and EGit](https://stackoverflow.com/questions/8055048/eclipse-and-egit?rq=1)

我必须手动添加每个 Eclipse 项目右键单击 -> 团队 -> 共享 -> Git -> 完成。

为什么刚问完这些答案就会出现？:-)

# algorithm - 生成最小/不可约数独

> ID：14147761
> 
> 赞同：7
> 
> 时间：2013-01-03T21:43:35.223
> 
> 标签：algorithm, sudoku

如果数独谜题具有唯一解，则它是最小的（也称为不可约解），但删除任何数字都会产生具有多个解的谜题。换句话说，每个数字都是确定解决方案所必需的。

我有一个生成最小数独的基本算法：

*   生成一个完整的谜题。
*   以随机顺序访问每个单元格。对于每个访问的单元格：
    *   暂时去掉它的数字
    *   使用递归回溯算法两次解决难题。一个求解器以正序尝试数字 1-9，另一个以相反的顺序尝试。从某种意义上说，求解器正在遍历包含所有可能配置的搜索树，但来自相反的两端。这意味着**如果拼图有唯一解，则这两个解将匹配**。
    *   如果谜题有唯一解，则永久删除该数字；否则，将其放回原处。

这种方法可以保证产生一个最小的谜题，但它很慢（我的电脑上 100 毫秒，智能手机上几秒钟）。我想减少解决的次数，但我能想到的所有明显方法都是不正确的。例如：

*   **添加数字而不是删除它们。** 这样做的好处是，由于最小的谜题至少需要 17 个填充数字，所以前 17 个数字保证没有唯一的解决方案，减少了解决的数量。不幸的是，由于单元格是按随机顺序访问的，因此会在“锁定”唯一解决方案的一个重要数字之前添加许多不必要的数字。例如，如果添加的前 9 个单元格都在同一列中，则那里有大量冗余信息。
*   **如果没有其他数字可以替代当前的数字，请将其保留，不要解决难题。**因为检查一个展示位置是否合法比解决两次难题要快数千倍，这可以节省大量时间。但是，仅仅因为现在没有其他合法数字并不意味着一旦我们删除其他数字就不会再有。
*   **由于我们生成了原始解决方案，因此每个单元格只解决一次，看看它是否与原始解决方案匹配。**这不起作用，因为原始解决方案可能位于可能解决方案的搜索树中的任何位置。例如，如果原始解决方案靠近树的“左侧”，并且我们从左侧开始搜索，我们将错过树右侧的解决方案。

我还想优化求解算法本身。困难的部分是确定解决方案是否是唯一的。我可以进行微优化，例如为每个单元格创建合法位置的位掩码，如[这篇精彩的帖子](http://webcache.googleusercontent.com/search?q=cache:www.byteauthor.com/2010/08/sudoku-solver/)中所述。然而，更高级的算法，如 Dancing Links 或模拟退火，并非旨在确定唯一性，而只是为了找到*任何*解决方案。

**如何优化我的最小数独生成器？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:52:48.757

我有一个想法`on the 2nd option`，如果您为第一个 17 号码添加 3 次额外检查，您的建议会更好

*   查找 1-9 之间的 17 个随机数的列表
*   在提供的随机位置添加每个项目

    1.  这些新添加的数字不符合数独的 3 个基本标准

        *   同一行没有相同的数字
        *   同一列中没有相同的数字
        *   相同的 3x3 矩阵中没有相同的数字
    2.  如果条件 1 失败，则移至下一列或下一行并再次检查 3 个基本条件。

    3.  如果没有下一行（即在第 9 列或第 9 行），则在填充 17 个字符后添加到第 1 列，在此运行您的求解器逻辑并寻找您的唯一解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:23:01.637

以下是我通过（高度近似的）速度提高百分比实现的主要优化：

*   使用位掩码来跟踪每个单元格中满足哪些约束（行、列、框）。这使得查找展示位置是否合法的速度更快，但制作展示位置的速度更慢。使用位掩码生成谜题而不只是解决它们的一个复杂因素是可能必须删除数字，这意味着您需要将三种类型的约束作为不同的位来跟踪。一个小的进一步优化是将每个数字和每个约束的掩码保存在数组中。 **40%**
*   如果需要太长时间，则将生成超时并重新启动。见[这里](https://stackoverflow.com/questions/14267619/timing-out-randomized-algorithm)。最佳策略是在每次失败生成后增加超时时间，以减少无限期继续的机会。 **30%**，主要来自减少最坏情况的运行时间。
*   mbeckish 和 user295691 的建议（请参阅原始帖子的评论）。 **25%**

# .net - 使用 ws-trust 从客户端访问 SignalR 集线器

> ID：14147765
> 
> 赞同：2
> 
> 时间：2013-01-03T21:43:39.973
> 
> 标签：.net, signalr, federated-identity

我在使用联合身份验证保护的网站上有一个信号器集线器。

无论如何我可以在我的客户端应用程序上附加一个 saml 令牌以允许与信号器集线器进行通信？我在网上找不到任何例子。

谢谢

罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:59:38.227

After speaking to David Fowler on twitter there is currently no way to add the token to the request so this isn't possible yet. Hopefully this will save someone some time!

# java - 在“finally”语句中返回

> ID：14147768
> 
> 赞同：2
> 
> 时间：2013-01-03T21:43:46.050
> 
> 标签：java, file, stream

我正在尝试从文件中读取 ObjectOutputStream 并将其转换为数组列表。整个事情发生在一个应该读取文件并返回数组列表的方法中：

```
public static List<Building> readFromDatabase(){
    String fileName="database.txt";
    FileInputStream fileIStream=null;
    ObjectInputStream in=null;
    List<Building> buildingsArr=null;
    try
     {
        fileIStream = new FileInputStream(fileName);
        in = new ObjectInputStream(fileIStream);
        buildingsArr=(ArrayList<Building>)in.readObject();
     }
     catch(IOException e)
     {
        e.printStackTrace();
     }
     catch(ClassNotFoundException e)
     {
        Console.printPrompt("ArrayList<Building> class not found.");
        e.printStackTrace();
     }
    finally{
        Console.printPrompt("Closing file...");
        close(in);
        close(fileIStream);
        return buildingsArr;
    }
} 
```

Java 告诉我这很危险。有哪些替代方案？我不能将 return 放在“try”块中，因为它不会这样做/它不会关闭“finally”块中的文件。我需要确保文件将被关闭，并返回我创建的数组列表。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T21:44:56.223

> 我不能将 return 放在“try”块中，因为它不会这样做/它不会关闭“finally”块中的文件。

错了，如果你把 return 放在 try 块中，finally 块仍然会执行。因此，您可以在 try 块中返回。

```
try
     {
        //your code
        return buildingsArr;
     }
     catch(IOException e)
     {
        e.printStackTrace();
     }
     catch(ClassNotFoundException e)
     {
        Console.printPrompt("ArrayList<Building> class not found.");
        e.printStackTrace();
     }
    finally{
        Console.printPrompt("Closing file...");
        close(in);
        close(fileIStream);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T21:50:50.943

我建议开始使用 Java 7 和 try with resources 子句。[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

前任：

```
static String readFirstLineFromFile(String path) throws IOException {
    try (BufferedReader br = new BufferedReader(new FileReader(path))) {
        return br.readLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T16:39:45.457

### 您必须抛出异常或返回值：

`return "File Not Found"`您需要证明这一点的只是在块之后注释掉`finally`它并查看它不会编译。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;

public class ReturnFinallyExample
{
    public static void main(final String[] args)
    {
        returnFinally();
    }

    private static String returnFinally()
    {
        try
        {
            final File f = new File("that_does_not_exist!");
            final FileInputStream fis = new FileInputStream(f);
            return "File Found!";
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        finally
        {
            System.out.println("finally!");
        }
        return "File Not Found!";
    }
} 
```

你必须有`return`之后`finally`或者你必须：

声明方法`throws FileNotFoundExceptoin`并重新抛出`FileNotException`。

或者

`FileNotFoundException`用_`throw new RuntimeException(e)`

# gwt - CachingActivityMapper 似乎不起作用

> ID：14147769
> 
> 赞同：0
> 
> 时间：2013-01-03T21:43:46.303
> 
> 标签：gwt, caching, android-activity, gwt-mvp

我将 MVP 模式用于 GWT 应用程序。我有一个过滤视图和搜索结果视图。如果修改了搜索条件，搜索结果将得到更新。

但是，当我刷新浏览器时，选定的标准会丢失。所以我想保留搜索条件并尝试在我的 onModuleLoad() 中使用 CachingActivityMapper

```
 CachingActivityMapper cached = new CachingActivityMapper(new AppActivityMapper(clientFactory));
 FilteredActivityMapper.Filter filter = new FilteredActivityMapper.Filter() {
      @Override
      public Place filter(Place place) {
        return place;
      }
    };

 final ActivityManager activityManager = new ActivityManager(activityMapper,
            eventBus);      
 activityManager.setDisplay(filterDisplayView); 
```

但我看不出有什么区别。

请告诉我的代码出了什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:34:15.127

[CachingActivityMapper](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/activity/shared/CachingActivityMapper.html)的文档中没有任何内容表明它能够在页面重新加载之间存储任何内容。这不是您的代码错误，而是假设 a`CachingActivityMapper`具有重新加载弹性 - 它不是。重新加载页面意味着重新启动您的应用程序并丢失其所有运行时状态，包括`CachingActivityMapper`可能已缓存的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:16:17.287

研究这个以实现[Local Storage](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5Storage)。这可以解决你的问题。

# javascript - Jade 复选框选中属性未选中基于条件（如果）

> ID：14147772
> 
> 赞同：25
> 
> 时间：2013-01-03T21:44:07.347
> 
> 标签：javascript, node.js, express, pug

如何让玉根据条件呈现复选框的选中属性？就像这两个版本的 HTML 复选框标记一样：

这似乎是 unchecked 的唯一有效版本：

> ```
> >  <input type="checkbox" name="vehicle" value="Bike"> 
> ```

检查时：

> ```
> > <input type="checkbox" name="vehicle" value="Car" checked="checked"> 
> ```

这是我迄今为止尝试过的：

这个翡翠不错：

```
 input(type="checkbox", name="completed", checked=(true===true ? "checked" : "")).checkbox 
```

因为它呈现了这个：

```
<input type="checkbox" name="completed" checked="checked" class="checkbox"> 
```

但这翡翠不好：

```
 input(type="checkbox", name="completed", checked=(false===true ? "checked" : "")).checkbox 
```

因为它呈现了这个：

> `<input type="checkbox" name="completed" checked="" class="checkbox">`

而不是这个：

> `<input type="checkbox" name="completed" class="checkbox">`

如何让 Jade 呈现整个检查属性，而不仅仅是检查属性的值？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-03T21:47:34.997

您可以使用：

```
input(type="checkbox", name="completed", checked=(true===false ? "checked" : undefined)) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-07-20T11:59:19.090

无需指定值：

```
input(type="checkbox", name="completed", checked=(condition)) 
```

如果条件为假，则不会添加选中的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T06:29:38.557

做同样事情的另一种方法是通过“如果”条件：

```
if(#{data.refrigerated} == '1')
   input(type='checkbox', name='refrigerated', checked)
else
   input(type='checkbox', name='refrigerated') 
```

当条件为真时，您将在 DOM 上选中复选框，否则您将获得未选中的复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T05:37:53.920

你可以试试这样

```
 option(value='man' selected = profile.sex ==='man') man
  option(value='female' selected = profile.sex ==='female') female 
```

# javascript - 切换复选框仅选中，不取消选中

> ID：14147777
> 
> 赞同：0
> 
> 时间：2013-01-03T21:44:25.270
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 切换一些复选框，并且我正在使用在搜索切换复选框时经常推荐的代码，但它似乎只检查它们而不是切换。

这是一个jsfiddle：

[http://jsfiddle.net/wgHpG/](http://jsfiddle.net/wgHpG/)

的HTML：

```
<button id="priority-categories" class="btn">Priority</button>

<input type="checkbox" name="category" value="1" id="1">
<input type="checkbox" name="category" value="2" id="2">
<input type="checkbox" name="category" value="3" id="3">​ 
```

js：

```
$('#priority-categories').click(function(){

    var categories = [1, 3];

    $.each(categories, function(key, value) {
        $('#' + value).prop('checked', !$('#' + value).checked);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:46:33.417

`.checked`不是表示复选框元素的 jquery 对象的属性。

`.is(':checked')`改为使用

[http://jsfiddle.net/wgHpG/1/](http://jsfiddle.net/wgHpG/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T21:46:47.407

jQuery 对象没有`.checked`属性，只有 DOM 元素有。
`$('#' + value).checked`将永远是`undefined`，因此`!$(..).checked`永远是`true`。

您可以[将回调传递给`.prop`](http://api.jquery.com/prop/#prop2)：

```
$('#' + value).prop('checked', function(i, checked) {
    return !checked;
}); 
```

* * *

请注意，以数字开头的 ID 在 HTML4 中无效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T21:47:33.947

jQuery 元素没有“已检查”属性。您需要使用 jQuery 方法检查是否已检查或将其转换回 DOM 元素

```
!$('#' + value)[0].checked 
```

或者

```
!$('#' + value).prop('checked') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T21:47:12.490

改成

```
$('#' + value).prop('checked', !$('#' + value).is(":checked")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T21:46:59.110

```
 $('#' + value).prop('checked', !$('#' + value).attr("checked")) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T21:50:30.220

这段代码虽然有点冗长，但会按照您的预期切换 - [http://jsfiddle.net/wgHpG/2/](http://jsfiddle.net/wgHpG/2/)

```
$('#priority-categories').click(function(){

    var categories = [1, 3];

    $.each(categories, function(key, value) {
        if($('#'+value).is(':checked')) {
            $('#' + value).prop('checked', false);
        } else {
            $('#' + value).prop('checked', true);
        }
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T22:06:14.463

稍微不同的方法可能是使用 jQuery 来选择节点，然后只需打开本机 DOM 复选框：

```
var categories = [1, 3];

$('#' + categories.join(',#')).each(function() {
   this.checked = !this.checked;
}); 
```

# c# - 将自定义参数传递给事件处理程序

> ID：14147779
> 
> 赞同：1
> 
> 时间：2013-01-03T21:44:50.573
> 
> 标签：c#, .net, wpf, .net-4.0, event-handling

> **可能重复：**
> [将参数传递给事件处理程序](https://stackoverflow.com/questions/12293471/passing-arguments-to-event-handler)

我正在尝试处理从`MenuItem.Click`. 问题是，我需要一些方法来传递一些自定义参数（特别是代表行和列的两个整数）。

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    ...
    MenuItem froNewChild = new MenuItem();
    froNewChild.Header = "Insert new box";
    froNewChild.Click += new RoutedEventHandler(froNewChild_Click);
    // froNewChild.Click += new RoutedEventHandler(froNewChild_Click, column, row);
    FlowRectangleOptions.Items.Add(froNewChild);
    ...
}

private void froNewChild_Click(object sender, RoutedEventArgs e) //+column & row
{
    FlowDocument.allColumns[column-1].AddFlowRectangle(column, row);
    FlowDocument.ReRenderAll(canvas1);
} 
```

这个答案将[参数传递给事件处理程序](https://stackoverflow.com/questions/12293471/passing-arguments-to-event-handler)似乎可以满足我的要求，但不能按原样工作，因为`sender`已在此范围内定义。可悲的是，我还没有足够的知识来解决这个问题 - 非常感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:54:53.670

假设在您加载的方法中创建了“列”和“行”，您可以只使用 Lambda 事件处理程序，以便您可以传入变量。

```
 void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        //Assumming "column" and "row" are in this block somewhere.
        ...
        MenuItem froNewChild = new MenuItem();
        froNewChild.Header = "Insert new box";
        froNewChild.Click += (s, eArgs) =>
        {
            FlowDocument.allColumns[column - 1].AddFlowRectangle(column, row);
            FlowDocument.ReRenderAll(canvas1);
        };
        FlowRectangleOptions.Items.Add(froNewChild);
        ...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:51:53.307

传递给 evant 处理程序的参数取决于提升类的设计方式，它们作为派生类`EventArgs`作为第二个参数传递。除非您是引发事件的类的设计者，否则无法增强此功能。在这种特殊情况下，我们正在谈论一个框架类，因此根本不可能。

作为一种解决方法，您可以在类中定义一些状态成员变量并使用它们将信息传递给处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:06:51.173

sa_ddam213 已经回答了你，但只是为了澄清一下：lambda 表达式中的参数名称没有语义含义，可以是你想要的任何东西。名称 sender 和 eventArgs 仅用于在您链接的问题中清晰。在这种情况下，重要的是有两个参数，编译器自己推断其余的。

column 和 row 的值将在您定义 lambda 时被捕获，并且在事件处理程序执行时可用，即使 MainWindow_Loaded 早已返回并且原始变量已销毁。

有关 C# 中 lambda 表达式的更多信息：http: [//msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

# java - 如何设置TChart透明度？

> ID：14147785
> 
> 赞同：0
> 
> 时间：2013-01-03T21:45:16.160
> 
> 标签：java, android, teechart

我希望我的`TChart`系列充满半透明渐变。以下适用于饼图，但不适用于条形图和区域：

```
// Works:
pie.setTransparency(30);

// Does not work:
area.setTransparency(30);
area.getGradient().setTransparency(30);

// Not present: bar.setTransparency(30);
// Does not work:
bar.getGradient().setTransparency(30); 
```

我在这里想念什么？如何使我的栏和区域系列半透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:43:39.493

通过画笔，区域和条形透明度对我来说很好用：

```
area.getBrush().setTransparency(30);

bar.getBrush().setTransparency(30); 
```

对我来说似乎不太适合的是渐变的透明度，所以我已将其添加到希望列表中，以便为将来的版本进行修改 (TJ71016474)。

# ios - 根据今天的日期自定义 UIPickerWheel

> ID：14147788
> 
> 赞同：0
> 
> 时间：2013-01-03T21:45:33.687
> 
> 标签：ios, xcode, uipickerview

每次在不同日期打开应用程序时，我的应用程序都会添加一个报价。因此，您今天打开它会显示第 1 天报价，然后如果您明天或一周后打开，它会添加第 2 天报价。由于各种原因，我无法使用 iCloud 来确保用户的设备在同一天保持同步。所以，我想添加一个设置，用户可以选择他们在哪一天。我在想的是在那天之前的所有日子里填充 UIPickerWheel。为什么？好吧，报价来自我正在构建的 XML，所以现在可能没有 12 月可用的日子，所以我不希望用户选择第 365 天而没有任何事情发生。因此，在 5 日，我希望 UIPickerWheel 显示第 1 天、第 2 天...、第 5 天。我可以使用以下方法获取一年中的当前日期：

```
NSCalendar *currentCalendar = [NSCalendar currentCalendar];
NSDate *today = [NSDate date];
NSInteger dc = [currentCalendar  ordinalityOfUnit:NSDayCalendarUnit
                                                  inUnit:NSYearCalendarUnit
                                                 forDate:today]; 
```

我想知道的是如何让 UIPickerWheel 显示所有数字，以及 Day 一词。所以每一行都表示第 1 天，直到当前日期。有什么想法吗？

更新：这是我到目前为止所拥有的。在 viewWillAppear 中，我评论了我希望每一行看起来像什么。

这是我到目前为止所拥有的：

```
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {
    NSCalendar *currentCalendar = [NSCalendar currentCalendar];
    NSDate *today = [NSDate date];
    NSInteger dc = [currentCalendar  ordinalityOfUnit:NSDayCalendarUnit
                                               inUnit:NSYearCalendarUnit
                                              forDate:today];

    return dc;
}
-(NSInteger)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return [options objectAtIndex:row];
}
-(void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    NSString *string = [NSString stringWithFormat:@"%@", [options objectAtIndex:row]];

   }

- (void)viewWillAppear:(BOOL)animated
{
    self.title = @"Settings";
    explain.font = [UIFont fontWithName:@"Papyrus" size:24];
    options = [[NSMutableArray alloc]init];
   //here is where I'm not sure how to add one item for each day in the year it is.  For example, today is the 4th day of the year, so I would like the items in the array to be Day:1, Day:2, Day:3, Day:4.

    [super viewWillAppear:YES];

} 
```

# javascript - 使用 mediaelement.js 在画布中嵌入 youtube 视频

> ID：14147792
> 
> 赞同：3
> 
> 时间：2013-01-03T21:45:55.253
> 
> 标签：javascript, html, canvas, youtube, mediaelement.js

我正在尝试根据[此页面使用](http://johndyer.name/html5-video-wrapper-for-youtube-and-vimeo-api-mediaelement-js/)[mediaelement.js](http://mediaelementjs.com/)将 youtube 视频嵌入画布中。但是，视频没有加载，控制播放器全黑。有人可以给我一些提示吗？这是我的代码，主要遵循页面（添加以确保来自 youtube 的 html5 播放器）：`html5=true`

编辑：检查了[github repo](https://github.com/johndyer/mediaelement/)下的演示。Youtube 演示是唯一不起作用的。猜猜这是这个库中的一个问题。但是，任何解决方法仍将受到赞赏。我想这样做的原因是将 youtube 流提供给 html5 画布。

```
<!DOCTYPE html>
<html>

<head>
  <title>youtube in canvas</title>
  <script src="jquery.js"></script>
  <script src="mediaelement-and-player.js"></script>
  <link rel="stylesheet" href="mediaelementplayer.css" />
</head>

<body>
  <video width="640" height="360" id="player1" preload="none">
    <source type="video/youtube" src="http://www.youtube.com/watch?v=nOEw9iiopwI&html5=true" />
  </video>
  <script>
    jQuery(document).ready(function($) {
      $('#player1').mediaelementplayer();
    });
  </script>
</body>

</html> 
```

# python - pythonic方式在dict列表上进行groupby（并且有效？）

> ID：14147796
> 
> 赞同：1
> 
> 时间：2013-01-03T21:46:14.867
> 
> 标签：python, algorithm

我正在努力寻找一种令人信服的 pythonic 方式在 dict 列表上进行分组，下面似乎具有良好的可读性，但不是最有效的方式：我必须先排序（groupby 的先决条件）然后进行分组by （这里的另一个问号是关于如何实现 itertools 中的 groupby ..）。

一个明显的选择是使用 collections.defaultdict 但我将不得不做很多 list.append （和更少的pythonic？）。你认为哪个是更好的选择？还是有其他更好的分组方式？谢谢

```
from itertools import groupby
from operator import itemgetter

data = [ {'x':1, 'y':1},
         {'x':2, 'y':2},
         {'x':3, 'y':2},
         {'x':4, 'y':1}, ]

sortedData = sorted(data, key=itemgetter('y'))

for y, d in groupby( sortedData, itemgetter('y')):
    print y, list(d)

1 [{'y': 1, 'x': 1}, {'y': 1, 'x': 4}]
2 [{'y': 2, 'x': 2}, {'y': 2, 'x': 3}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:49:51.677

如您所知`defaultdict`，这是一种选择。我不确定“pythonicness”，但它似乎快两倍（正如你问的效率）：

```
from collections import defaultdict
def f(l):
    d = defaultdict(list)
    for i in data: 
        d[i.get('y')].append(i)
    return d

%timeit f(data)
100000 loops, best of 3: 3.7 us per loop

%timeit {y:list(d) for y, d in groupby(sorted(data, key=itemgetter('y')),
                                                        itemgetter('y'))}
100000 loops, best of 3: 8.33 us per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:52:03.927

要对无序列表进行分组，您需要检查列表中的每个对象，并将其放入一个组中：

```
def groupby(iterable, keyfunc=id):
    result = []
    groups = {}
    for item in iterable:
        key = keyfunc(item)
        group = groups.get(key)
        if group is None:
            groups[key] = group = []
            result.append((key,group))
        group.append(item)
    return result 
```

# mysql - 成员动作表数据模型建议

> ID：14147797
> 
> 赞同：0
> 
> 时间：2013-01-03T21:46:21.800
> 
> 标签：mysql, sql, database, database-design

我正在尝试添加一个操作表，但我目前对于如何解决这个问题存在分歧。

在我详细介绍之前。

我们的会员可以在我们的网站上执行不同的操作

*   添加图像
*   更新图像
*   评价图像
*   在图片上发表评论
*   添加博客文章
*   更新博客文章
*   评论博客文章
*   等等等等

操作表允许我们的用户“观看”其他成员的活动，如果他们想将他们添加到他们的观察列表中。

我目前创建了一个名为**member_actions**的表，其中包含以下列

```
[UserID] [actionDate] [actionType] [refID] 
```

[refID] 可以是对数据库中的图像 ID 或博文 ID 的引用，也可以是另一个可操作表的 id 列（例如事件）

[actionType] 是一个 Enum 列，具有操作名称，例如 (imgAdd,imgUpdate,blogAdd,blogUpdate, etc...)

[actionDate] 将决定每 90 天删除哪些记录...因此我们不会永远保留这些操作

我提出的当前 mysql 查询是

```
SELECT act.*, 
        img.Title, img.FileName, img.Rating, img.isSafe, img.allowComment AS allowimgComment,
        blog.postTitle, blog.firstImageSRC AS blogImg, blog.allowComments AS allowBlogComment,
        event.Subject, event.image AS eventImg, event.stimgs, event.ends,
        imgrate.Rating
    FROM member_action act
    LEFT JOIN member_img img ON (act.actionType="imgAdd" OR act.actionType="imgUpdate")
                     AND img.imgID=act.refID AND img.isActive AND img.isReady
    LEFT JOIN member_blogpost blog ON (act.actionType="blogAdd" OR act.actionType="blogUpdate")
                    AND blog.id=act.refID AND blog.isPublished AND blog.isPublic
    LEFT JOIN member_event event ON (act.actionType="eventAdd" OR act.actionType="eventUpdate")
                    AND event.id=act.refID AND event.isPublished
    LEFT JOIN img_rating imgrate ON act.actionType="imgRate" AND imgrate.UserID=act.UserID AND imgrate.imgID=act.refID
    LEFT JOIN member_favorite imgfav ON act.actionType="imgFavorite" AND imgfav.UserID=act.UserID AND imgfav.imgID=act.refID
    LEFT JOIN img_comment imgcomm ON (act.actionType="imgComment" OR act.actionType="imgCommentReply") AND imgcomm.imgID=act.refID
    LEFT JOIN blogpost_comment blogcomm ON (act.actionType="blogComment" OR act.actionType="blogCommentReply") AND blogcomm.blogPostID=act.refID
    ORDER BY act.actionDate DESC
    LIMIT XXXXX,20 
```

* * *

好的，基本上，考虑到我将每周删除超过 90 天左右的操作...使用此查询来显示成员操作历史记录是否有意义？

**或者我应该在member_actions**表中添加一个名为 [actionData] 的新文本列，我可以在其中以 json 或 xml 格式存储一些详细信息，以便快速查询 member_action 表。

它增加了表的大小并降低了查询的复杂性，但该表将定期从旧条目中清除。

假设最终我们将拥有不超过 100k 的成员，所以我会担心 member_action 表的表大小，它的文本 [actionData] 列将包含一些特定的细节。

我倾向于 [actionData] 模型，但任何建议或考虑将不胜感激。

另一个考虑因素是 img 或 blog 的表条目可能会被删除......所以我可以采取行动但没有参考记录......这确实会增加问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:28:00.107

我会警惕这种方法 - 当您添加要监视连接的各种操作时，连接将继续增长（以及 select 语句中的稀疏额外列）。

我不认为在这个表中有几个额外的列会那么可怕——而且这个查询听起来会相当频繁地运行，所以让它变得高效似乎是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:30:45.893

因为您正在处理用户界面问题，所以性能是关键。所有的连接都需要时间，即使有索引。而且，查询数据库可能会锁定所有表（或索引）中的记录，这会减慢插入速度。

因此，我倾向于通过维护记录中的文本来对数据进行非规范化。

但是，一个关键的考虑因素是文本是否可以在事后更新。也就是说，您将在创建数据时加载数据。那么它可以改变吗？根据更改（可能涉及触发器和存储过程）维护数据的问题可能会带来很多额外的复杂性。

如果数据是静态的，这不是问题。至于桌子的大小，我认为您不必担心太多。数据库旨在管理内存。它在页面缓存中维护表，该表应包含当前活动成员的页面。您总是可以增加内存大小，尤其是对于 100,000 个用户，这在当今服务器的范围内。

# c# - 为什么我在进行 DNS 查找时会收到套接字异常或错误的数据？

> ID：14147813
> 
> 赞同：0
> 
> 时间：2013-01-03T21:47:41.877
> 
> 标签：c#, .net, url, dns, ip-address

当我打开 Firefox 并输入“209.191.122.70”作为 URL 并按 Enter 时，它立即解析为“http://failsafe.fp.yahoo.com/404.html”

我的目标是以编程方式检索相同的信息。

当我使用下面的代码时，要么我得到一个 SocketException，要么我得到一个看起来不像我使用 firefox 时得到的 url 的 HostName。

```
 static void Main(string[] args)
    {
        IPHostEntry entry = Dns.GetHostByAddress("209.191.122.70");
        Console.WriteLine(entry.HostName); //ir1.fp.vip.mud.yahoo.com
        Console.Read();
    } 
```

当`System.Net.Sockets.SocketException`我尝试其他一些地址时得到的信息显示“请求的名称有效，但未找到请求类型的数据”，堆栈跟踪如下所示：

```
 at System.Net.Dns.InternalGetHostByAddress(IPAddress address, Boolean includeIPv6, Boolean throwOnFailure)
 at System.Net.Dns.GetHostByAddress(String address)
 at reverseIP.Program.Main(String[] args) in C:\test\Program.cs:line 15 
```

一些给我例外的地址在 Firefox 中解决得很好。

除了将 Firefox 作为一个单独的进程启动并使用 Windows API 检索地址栏中的文本之外，我如何检索我正在寻找的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:57:33.633

IP 地址的反向查找*不是*Firefox 在这里所做的。

Firefox 只是简单地向该 IP 发出 http get。

在伪代码中（因为我目前无法访问编译器）相当于 Firefox 正在做的事情是

```
try {
 var request = WebClient.CreateRequest("http://209.191.122.70");
 request.GetResponse();
}
catch(WebException ex) {
 // handle 404 exception here.. You can access the response URL too.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:58:36.263

System.Windows.Forms.WebBrowser 类帮助我获得了我正在寻找的信息。

# c# - 试图循环遍历对象列表c#

> ID：14147820
> 
> 赞同：-7
> 
> 时间：2013-01-03T21:48:34.547
> 
> 标签：c#, object, foreach

尝试使用 foreach 循环遍历对象列表，但遇到编译器错误时遇到了麻烦

> Foreach 语句不能对变量对象进行操作，因为它不包含`GetEnumerator`.

我将文件解析为匿名列表，然后在方法中使用该列表。

```
 var list = (from s in File.ReadAllLines(path).Select(a => a.Split(new[] { '|' }, StringSplitOptions.None))
                     select new
                     {
                         Nbr = s[0].Trim(),
                         Name = s[1].Trim(),
                         Phone = s[2].Trim(),
                         Addr = s[3].Trim()
                     }).ToList();
 findmatch(list);
}
  Public static void findmatch(object list)
 {
  foreach(var entry in list) 
```

我还尝试像这样更改代码：

```
foreach(var entry in list.GetType().GetProperties()) as I still get this error 
```

抱歉，是的，我进行了编辑以识别我正在将列表转移到另一种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:00:12.563

问题与描述的完全一样：您不能在类型变量上调用迭代器`object`，因为它没有。你的方法需要一个`object`，所以你不能这样做。

显然，您使用 的原因是`object`因为您正在`select`进入匿名类型，因此您没有任何东西可以声明`List<T>`为。

你需要做的是定义一个具体的类型，而不是让你的方法接受`List<MyType>`或`IEnumerable<MyType>`而不是`object`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T22:01:39.207

好吧，既然你已经展示了你的真实代码，那么问题出在哪里就很清楚了。匿名对象不能离开本地上下文。您不能循环遍历`object`. 并且您不能在定义此匿名对象的上下文之外的任何地方使用此匿名对象。

所以从定义一个模型开始：

```
public class MyModel
{
    public string Nbr { get; set; }
    public string Name { get; set; }
    public string Phone { get; set; }
    public string Adr { get; set; }
} 
```

然后调整您的 LINQ 查询以返回此模型的 IEnumerable 而不是某些匿名对象：

```
var list = 
    from s in File.ReadAllLines(path).Select(a => a.Split(new[] { '|' }, StringSplitOptions.None))
    select new MyModel
    {         
        Nbr = s[0].Trim(),
        Name = s[1].Trim(),
        Phone = s[2].Trim(),
        Addr = s[3].Trim()
    };
findmatch(list); 
```

最后调整您的`findmatch`方法以采用模型的 IEnumerable 而不是一些您无论如何都无法迭代的弱类型对象：

```
public static void findmatch(IEnumerable<MyModel> list)
{
    foreach(var entry in list)
    {
        // do whatever you intended to do with the entry previously
    }
} 
```

# java - Java中的标记语句块？

> ID：14147821
> 
> 赞同：11
> 
> 时间：2013-01-03T21:48:36.963
> 
> 标签：java, syntax

当我发现一段被`scan: {}`块包围的代码时，我正在浏览一些基本的 Java 对象。以下代码来自 String 类中的 toLowerCase() 方法。

```
scan: {
            for (firstUpper = 0 ; firstUpper < len; ) {
                char c = value[firstUpper];
                if ((c >= Character.MIN_HIGH_SURROGATE)
                        && (c <= Character.MAX_HIGH_SURROGATE)) {
                    int supplChar = codePointAt(firstUpper);
                    if (supplChar != Character.toLowerCase(supplChar)) {
                        break scan;
                    }
                    firstUpper += Character.charCount(supplChar);
                } else {
                    if (c != Character.toLowerCase(c)) {
                        break scan;
                    }
                    firstUpper++;
                }
            }
            return this;
        } 
```

有人可以解释一下该`scan:{}`块的用途以及该语法的来源吗？除非在三元运算符中使用，否则我还没有在 Java 中看到像这样的单词之后的冒号。

谢谢！

编辑：更新标题以正确匹配已回答的问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T21:50:18.453

这里，`scan:`只是一个[标签](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)。该`break <label>`语法允许人们跳出外部循环，并模拟某些形式的`goto`语句。语法记录在[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15)中：

> `break`带有标签的语句`Identifier`试图将控制转移到`Identifier`与其标签相同的封闭标签语句（第 14.7 节）；此语句称为中断目标，然后立即正常完成。在这种情况下，break 目标不必是`switch`, `while`, `do`, 或`for`语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T21:50:00.893

这是一个`labeled block.`where **scan:**是一个**标签**。它通常在中断/继续时使用，以防您有多个循环。在这种情况下，执行时`break scan;`只需断开**标记的块**（扫描）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T21:50:35.727

您可以将标签设置为从多个循环深处中断/或继续。

例子

```
 outer:
 for(int i=...){
   for(int j=..){
     ...
     break outer; // leaves both loops   

   } 

 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T21:51:52.563

它是一个`label`. 它是流量控制的指标。

如果您查看您的代码，您会在下面看到

```
 break scan; 
```

发生这种情况时，流完全退出`scan`块。

顺便说一句，它可以是任何标识符，`scan`根本不是关键字。

# javascript - 在 Chrome 中删除 cookie 的 Javascript

> ID：14147824
> 
> 赞同：1
> 
> 时间：2013-01-03T21:48:49.293
> 
> 标签：javascript, google-chrome, cookies

我有一个用于创建、保存和删除 cookie 的 JS 文档，但是它不会在 Chrome 中删除它们？我在这里查看了其他问题，但找不到解决方案。另外，我注释掉的删除cookies功能不起作用，所以我使用了拆分，我不知道为什么！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
x=x.replace(/^\s+|\s+$/g,"");
if (x==c_name)
 {
 return unescape(y);
 }
 }
 }

 function setCookie(c_name,value,exdays)
 {
 var exdate=new Date();
 exdate.setDate(exdate.getDate() + exdays);
 var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
 document.cookie=c_name + "=" + c_value;
 }

function checkCookie()
{
 var username=getCookie("username");
 var password=getCookie("password");

 if (username!=null && username!="" && password!=null && password!="")
 {
  document.getElementById("username").value=username;
  document.getElementById("password").value=password;
  }
  }

function storeValues()  
{
var username= document.getElementById("username").value;
var password= document.getElementById("password").value;

   setCookie("username",username,365);
 setCookie("password",password,365);

 alert("Cookies stored!")

 }

 //function deleteCookies()

//{
 //setCookie("username", "",-1);
 //setCookie("password", "",-1);

 //alert("Deleted!");
 //}    

 function deleteallcookies()  
 {  
var cookie = document.cookie;  
var arr = cookie.split("; ");  
var i;  
for(i=0;i<arr.length;i++)  
{  
   temp = arr[i].split("=");  
   setCookie(temp[0]);  
 }  

  checkCookie();

  alert("Deleted");  
} 

function show()
{
 var username= document.getElementById("username").value;
 var password= document.getElementById("password").value;

 alert("username:" + username  + "\npassword:" + password);

}

 </script>
 </head>

 <body onload="checkCookie()">
 <form>Name: 
 <input name="Name" type="text" id="username" /><p>
  Password: 
 <input name="Name" type="text" id="password" />
  <p>  
  <p>
  </form>
 <input name="Submit" value="submit" type="button" onclick="storeValues();"/>
 <input name="Show" value="show" type="button" onclick="show();"/>
 <input name="Delete" value="delete" type="button" onclick="deleteallcookies();"/>
 </body>
 </html> 
```

# php - 从图像中读取所有颜色以将其转换为 CSS

> ID：14147831
> 
> 赞同：-1
> 
> 时间：2013-01-03T21:49:49.817
> 
> 标签：php, image, css

我正在尝试制作一个在 PHP 中工作的图像到 CSS 转换器。

我尝试在以下位置查看 javascript 转换器： [http ://codepen.io/blazeeboy/pen/bCaLE](http://codepen.io/blazeeboy/pen/bCaLE)

我看到它变成了一个画布元素并扫描每个像素的颜色，这在 PHP 中不会以同样的方式实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:53:17.553

您可以使用 PHP 的 GD2 函数，例如[`imagecreatefrompng`](http://php.net/imagecreatefrompng)和[`imagecolorat`](http://php.net/imagecolorat)。

# c++ - 如何使用 WIC API 读取/写入自定义 EXIF 数据？

> ID：14147833
> 
> 赞同：1
> 
> 时间：2013-01-03T21:49:55.963
> 
> 标签：c++, exif, wic, jpeg-xr

我浏览了以下文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee719799 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee719799(v=vs.85).aspx)

作为上下文，我正在尝试以 JPEG-XR 格式进行编码，并且我想模拟 GDI+ 的`SetPropertyItem`功能`GetPropertyItem`。

我基本上有3个问题：

1.  如果我想向 exif 标头添加自定义属性，正确的查询路径是什么？
2.  我可以使用自定义 ID`{ushort=1111}`来识别它吗？如何验证 ID 是否已定义？
3.  这是否与`id`GdiPlus::PropertyItem 的字段相同？

例如，以下是否有效：

```
PROPVARIANT    value;
value.vt = VT_LPWSTR;
value.pwszVal= L"Metadata Test";
hr = piFrameQWriter->SetMetadataByName(L"/ifd/exif/{ushort=1111}"); 
```

此代码块成功，但是当我尝试使用以下方法读回相同的元数据时：

```
IWICMetadataQueryReader *pQueryReader = NULL;
if(SUCCEEDED(hr))
{
    hr = piFrame->GetMetadataQueryReader(&pQueryReader);
}
if (SUCCEEDED(hr))
{
    PROPVARIANT value;
    hr = pQueryReader->GetMetadataByName(L"/ifd/exif/{ushort=1111}", &value);        
} 
```

这将返回 E_INVALIDARG 错误。

我很感激能帮助我理解它是如何工作的。我觉得我没有正确理解文档。

谢谢你。

# html - 滚动条防止点击图标（在图标顶部）

> ID：14147844
> 
> 赞同：0
> 
> 时间：2013-01-03T21:50:44.560
> 
> 标签：html, css, scrollbar

这是一个屏幕截图：

![在此处输入图像描述](../Images/20b8b3d3bcbb96c3ef9246c1388dfcf2.png)

我花了很长时间才弄清楚发生了什么。我的删除按钮不起作用，因为滚动条单击区域位于图标顶部。

我希望有一种方法可以在没有滚动条的情况下获得垃圾桶的点击/悬停功能。我宁愿不必把所有东西都推进去。

我可以完全删除滚动条并且它可以工作，但我应该能够处理这两种情况。

任何线索都会很棒。

谢谢！马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:52:32.347

您应该简单地向元素添加一些填充，以便滚动不会与图标重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T21:56:13.003

您可以添加一些填充，但使用自定义滚动条可能是最好的（虽然很烦人）。

# android - 没有调用 Service 的 onDestroy() 方法的情况？

> ID：14147846
> 
> 赞同：9
> 
> 时间：2013-01-03T21:50:54.827
> 
> 标签：android, android-service, ondestroy

我知道服务的 onDestroy() 方法可能永远不会被调用，但有人可以告诉我什么时候可能会发生这种情况吗？我特别感兴趣的是服务是否有可能被杀死，但它的 VM 会继续运行。

我问是因为我有一个服务，它在服务的 onStartCommand() 方法中注册 ContentObservers 并在 onDestroy() 中取消注册它们。如果服务的 onDestroy() 方法因为整个 VM 被杀死（连同它创建的观察者）而从未被调用，那很好。但我想知道服务是否有可能在不调用 onDestroy() 的情况下“消失”，而它创建的观察者将继续存在并继续接收更改。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T21:57:30.270

> 我知道服务的 onDestroy() 方法可能永远不会被调用，但有人可以告诉我什么时候可能会发生这种情况吗？

以下是我脑海中浮现的三个：

*   如果用户从“设置”应用中强制阻止您

*   如果 Android 急需 RAM（例如，处理来电）并选择终止您的进程以释放 RAM

*   您从 DDMS 终止进程

此外，如果您的服务因某处未处理的异常而崩溃，Android 可能会认为该服务已失效并跳过`onDestroy()`。我不确定这个，因为我没有专门尝试过。

> 但我想知道服务是否有可能在不调用 onDestroy() 的情况下“消失”，而它创建的观察者将继续存在并继续接收更改。

除了我上面提到的未处理异常的可能性之外，我有理由确定如果该进程将在`onDestroy()`未调用的条件下终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T21:55:38.910

此外，如果应用程序被重新安装/更新，则永远不会调用 ondestroy()。

# dll - 如何通过cmd/bat替换程序文件中的dll文件

> ID：14147849
> 
> 赞同：0
> 
> 时间：2013-01-03T21:51:08.243
> 
> 标签：dll, replace, windows-xp, cmd, program-files

我正在尝试做 bat 文件来替换程序文件\文件下的一些 dll 文件...

我只是找不到解决方案来做到这一点。我有一些 win xp 和 windows 7 计算机来运行这个 bat，我正在使用 xcopy 命令。

如果目的地不是程序文件下的东西，我的文件复制命令可以正常工作。

请问有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:00:59.843

您的批处理文件需要运行[提升](http://www.bleepingcomputer.com/tutorials/windows-elevated-command-prompt/)的 . 在较旧的 Windows 版本中，您还可以使用该`runas`命令以管理员身份运行它。

# javascript - 如何检测文本区域的任何更改？

> ID：14147857
> 
> 赞同：3
> 
> 时间：2013-01-03T21:51:59.610
> 
> 标签：javascript, jquery, events, jquery-events

我目前已将我的 textarea 绑定到几个似乎有效的事件。但是，问题在于事件会重叠并触发多次，这反过来又会大大降低性能。

我想要做的是几乎捕捉到文本区域的任何更改：单击、粘贴、keyup、keydown、右键单击上下文菜单编辑（右键单击、剪切/删除/粘贴）、拖放等。这必须交叉-浏览器，至少到 IE8。当您使用箭头键或类似键在文本区域中移动插入符号时，必须触发事件（我根据插入符号位置处理更改等）。

我不能使用任何重大延迟。一旦你对 textarea 做了一些事情，事件必须立即触发并执行我在那里的任何代码。

我目前正在使用 jQuery 来绑定事件，但我可以使用纯 javascript 解决方案，只要它可以跨浏览器工作并执行我想要的操作。

这是我目前使用的代码：

```
var deadKeycodes = [16, 17, 18, 19, 20, 
                    27, 33, 34, 35, 36,
                    38, 40, 44, //37 = left arrow and 39 = right arrow removed, it needs to trigger on those
                    45, 112, 113, 114, 115,
                    116, 117, 118, 119, 120,
                    121, 122, 123, 144, 145];

$(original).bind('propertychange keyup keydown input click', function(e) { 
    if (!Array.prototype.indexOf || deadKeycodes.indexOf(e.keyCode) == -1) { // prevent execution when pressing a 'dead' key
         //do stuff here
    }
}); 
```

如果有任何不清楚的地方，请询问，我会为您澄清:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:58:48.570

我认为你不能真正“解决”这个问题，即阻止多个事件触发。Keyup 和 keydown 确实是不同的事件，并且发生在不同的时间。如果您想对两者都做出响应（您可能会这样做，因为按下键和向上键都可能会更改文本区域），则需要包含这两个事件。但是，在大多数情况下，它们几乎会同时触发（并且连续多次触发），正如您所指出的那样，这可能会造成性能问题。

相反，您可能应该考虑触发一个*节流*或*去抖动*的回调。受限制的回调只会每*n*毫秒触发一次（适用于可能被调用过多的函数）。去抖回调只会在事件流完成后触发；自上次回调以来经过*n*毫秒后。

[您可以使用 underscore 的debounce](http://underscorejs.org/#debounce)和[throttle](http://underscorejs.org/#throttle)功能轻松完成此操作。

就像是：

```
debouncedFn = _.debounce(function(e) { 
    if (!Array.prototype.indexOf || deadKeycodes.indexOf(e.keyCode) == -1) { // prevent execution when pressing a 'dead' key
         //do stuff here
    }
}, 100);

$(original).bind('propertychange keyup keydown input click', debouncedFn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T23:13:37.533

你的原作太过分了。所有你需要的是`input`和`propertychange`事件。

**2016 更新**

原来链接的页面现在已经消失了。这是它的一个稍微次优的快照：

[http://web.archive.org/web/20140810185102/http://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript](http://web.archive.org/web/20140810185102/http://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript)

这是一个演示使用`input`事件并回退到`propertychange`IE <= 8 的答案：

[只捕捉改变输入的按键？](https://stackoverflow.com/questions/6488171/catch-only-keypresses-that-change-input)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:15:19.563

这似乎在 IE7-9 和 Chrome 中解决了它，其余的还没有测试。无论更改是什么，每次更改只会发生一个 console.log。如果没有更改，则不会记录任何内容：http: [//jsfiddle.net/SJN6J/2/](http://jsfiddle.net/SJN6J/2/)

```
var timer;
$("textarea").on("keydown paste cut", function(){
    clearTimeout(timer);
    var origvalue = this.value, self = this;
    timer = setTimeout(function(){
        if ( origvalue !== self.value ) {
            console.log("it changed!");
            // do stuff because content changed
        }
    },0);
}); 
```

*注意：我的 IE7-8 测试是用 IE9 更改浏览器模式，所以你可能想做真正的 IE7-8 测试。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T22:18:01.677

为防止事件重叠，您可以存储上次调用的时间。在你执行一个事件的回调之前，你要测试是否有足够的时间来再次触发。

```
$(original).bind('propertychange keyup keydown input click', (function () {
    var lastCallTime = 0;

    return function (e) {
        if (Date.now() - lastCallTime < 50) { return; } // Too little time has passed--exit

        if (!Array.prototype.indexOf || deadKeycodes.indexOf(e.keyCode) == -1) {
            lastCallTime = Date.now();

            // your code...
        }
    };
}())); 
```

# modelica - 如何为在 Modelica/Dymola 中建模的 MIMO 热液系统设计一个/多个控制器

> ID：14147859
> 
> 赞同：4
> 
> 时间：2013-01-03T21:52:15.370
> 
> 标签：modelica

我目前正在使用 Francesco Casella 教授的 ThermoPower 库在 Modelica/Dymola 环境中开发一个大型复杂的热液压系统。目前，我已经完成了我们的系统模型（包含几个闭环液压回路）的构建，并专注于为开发的模型设计控制器。鉴于系统的复杂性，我有大约 25 个 PI 控制器来控制各种阀门开度、泵、冷凝器和锅炉。在这个阶段，我正在使用一些明智的试错法来调整控制器的增益。我试图查阅文献，看看是否有任何正式的设计方法或任何经验法则来为这种多输入多输出 (MIMO) 热液压系统设计控制器。最后，我想问是否有人可以提供一些处理此类系统的控制器设计的指针或文献/论文。因为我在控制器设计（滑动模式、线性控制、根轨迹等）方面的知识对我没有帮助，因为这些方法中的大多数都是基于可用的模型方程。

此外，对于这样一个大型热工水力系统，如何设置系统的初始条件？是否只需要提供一些合理的猜测值并期望 Dymola 负责其余部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:58:10.147

好吧，我必须通过指出我不是控制工程师来限定我的回答，所以我所说的一切都持保留态度。

在某种程度上，这实际上取决于您使用的工具，因为不同的工具专注于不同的分析功能并提供不同的功能。例如，如果您使用的是 Dymola，则可以使用“线性化”功能来线性化您的系统。这将使您进入您熟悉的正式控制器设计方法。当然，问题是您的系统可能是高度非线性的，因此您必须制定策略来确定需要控制的状态空间范围，然后可能制定策略来相应地调整增益。

另一方面，如果您使用诸如 SystemModeler（来自 Wolfram）或 MapleSim（来自 Maplesoft）之类的工具，我很确定您可以选择将 Modelica 模型详细说明为方程的符号系统。因此，您可以再次重温需要模型方程可用的经典技术。由于这些不是线性化的，因此您将对符号形式的非线性具有完全的可见性，并且您可以采取任何可能的措施来解决它们。

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:03:03.163

我会在您的情况下尝试模型预测控制（只要您的系统将仅在近似线性区域中处于活动状态，或者可以使其近似线性）。

这是一些信息： http: [//www.stanford.edu/class/archive/ee/ee392m/ee392m.1056/Lecture14_MPC.pdf](http://www.stanford.edu/class/archive/ee/ee392m/ee392m.1056/Lecture14_MPC.pdf)

但我建议您购买一本好的控制工程师书籍，以更详细地描述这一点。

几年前我已经做了一个例子，所以这个建议现在可能已经过时了。

请注意，当您在 Modelica/Dymola 中实现此功能时，您必须使用固定时间步长求解器来模拟模型。

# ios - 通讯录应该如何成为一个类的属性？

> ID：14147861
> 
> 赞同：1
> 
> 时间：2013-01-03T21:52:36.323
> 
> 标签：ios

我有一个访问地址簿的类，如果我有以下代码，那么我会从分析器中收到警告，一个是 init 方法中的泄漏，另一个是说该类在释放对象时不拥有该对象释放。

我认为第二个警告是由于将通讯簿引用声明为分配？但它不可能使它变得强大，因为这会产生一个编译警告。将通讯簿作为财产处理的正确方法是什么？

```
@property (assign, nonatomic)   ABAddressBookRef                addressBook;

..
- (id) init
{
    self = [super init];
    if (self)
    {
        if (ABAddressBookCreateWithOptions)
        {
            // iOS 6 onwards
            self.addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
        }
        else
        {
            // < iOS 6
            self.addressBook = ABAddressBookCreate();
        }
    }
    return self;
}

- (void) dealloc
{
    if (self.addressBook)
    {
        CFRelease(self.addressBook);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:10:51.323

这是一个误报，您正确地平衡了初始 +1`retainCount`与 dealloc 方法中的`CFRelease`调用。

您可以通过使用 ivar 而不是属性来初始化和释放指针来消除警告。

```
- (id) init {
    // ...
    _addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
    //...
}

- (void)dealloc { 
    CFRelease(_addressBook); //assuming that _addressBook is your synthesized ivar
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:07:15.517

从技术上讲，您不拥有地址簿是正确的，因为`assign`属性不应该拥有引用。您班级的客户可能会覆盖地址簿参考，而您会泄露它。

完全修复它的一种方法是为您的地址簿明确声明一个字段并为其创建一个只读属性，然后只处理类内部的字段，而不是属性。由于无法分配只读属性，因此毫无疑问它们是否拥有引用。

`retain`我不在我的 Mac 前，所以我无法对此进行测试，但即使这不是 Objective-C 对象，也可以使用ed 属性。许多Core Foundation 对象以Objective-C 标头开头并响应多种`NSObject`方法。如果您无法使其与`@synthesize`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:16:12.100

这是我使用的解决方案

```
@synthesize addressBook = _addressBook;
- (ABAddressBookRef)addressBook{
    if (_addressBook == nil){
        if (ABAddressBookCreateWithOptions != NULL){
            _addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
        }
        else {
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated"
            _addressBook = ABAddressBookCreate();
#pragma GCC diagnostic pop
        }

        if (![self requestAddressBookAuthorizationWithAddressBook:_addressBook]){
            _addressBook = nil;
        }

    }
    return _addressBook;
}
- (void)setAddressBook:(ABAddressBookRef)addressBook{
    if (_addressBook != addressBook){
        if (_addressBook != nil){
            CFRelease(_addressBook);
        }

        _addressBook = nil;

        if ([self requestAddressBookAuthorizationWithAddressBook:addressBook]){
            _addressBook = addressBook;
        }
        if (_addressBook != nil){
            CFRetain(_addressBook);
        }
    }
} 
```

此时您可以将属性设置为 nil 并且 setter 将处理摆脱保留

# xml - 在 SQL Server 的 xquery 中拆分字符串

> ID：14147863
> 
> 赞同：1
> 
> 时间：2013-01-03T21:53:01.007
> 
> 标签：xml, tsql, sql-server-2005, xquery

有没有办法在 SQL Server 中执行类似（不支持的）xquery tokenize 之类的操作？

我有：

```
<WITS:foo>
 <WITS:bars>
  <bar details="name=theName;value=theValue" other="false" stuff="true">
  </bar>
 </WITS:bars>
 <WITS:bars notThis="oneIdontwant">
  <bar></bar>
 </WITS:bars>
</WITS:foo> 
```

我想拔出来`theName`。我能来的最接近的是`name=theName;value=theValue`通过

```
SELECT
 x.query('
  distinct-values(
   for $name in data(//WITS:foo/WITS:bars[not (@notThis)]/WITS:bar[@details="name"))
   return $name
  )'
)
FROM (SELECT CAST(xmlColumn AS XML) x FROM blah Where blahblah) y 
```

到目前为止，看起来我很不走运，因为这一切都在 SQL Server 2005 上运行，并且从[msdn](http://msdn.microsoft.com/en-US/library/ms178064%28v=sql.90%29.aspx)看来，唯一可以使用字符串的是列出的四个函数（没有索引或其他选项）。

现在我在事后进行解析，但我想知道是否还有其他方法可以完成服务器端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:41:29.163

前提是您能够获得`name=theName;value=theValue`. 您可以使用 TSQL XML 将项目拆分为行。使用下面的查询。

```
declare @xml xml
SET @xml = N'<root><r>' + replace('name=theName;value=theValue',';','</r><r>') + '</r></root>'
SELECT t.value('.','NVARCHAR(20)') AS [delimited items] FROM @xml.nodes('//root/r') AS a(t) 
```

从这里，您可以重做相同的过程来拆分`name=theName`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:05:29.803

您需要使用以下字符串操作：

[SUBSTRING](http://msdn.microsoft.com/en-us/library/ms187748%28v=sql.90%29.aspx) - 返回字符、二进制、文本或图像表达式的一部分。

[CHARINDEX](http://msdn.microsoft.com/en-us/library/ms186323%28v=sql.90%29.aspx) - 返回字符串中指定表达式的起始位置。

请注意，这些链接指的是 SQL Server 2005 函数。

我相信使用 CHARINDEX 和 SUBSTRING 将是最简单的解决方案。另一种方法是使用正则表达式，但即使在最新版本中也不能很好地支持它们，您将需要使用 CLR 过程 - 对于这样的示例任务来说太复杂了。

# java - 编译复杂化，扩展一个类

> ID：14147869
> 
> 赞同：-2
> 
> 时间：2013-01-03T21:54:09.753
> 
> 标签：java

我在一个名为 beginthings 的包中有两个类。FirstClass 编译得很好（当然，它没有扩展任何东西），但是 SecondClass 扩展了第一个，编译器说它在其中找不到 FirstClass。我试图通过转到目录并键入 javac beginthings/SecondClass.java 来进行编译，我做错了什么吗？

**错误：**

```
beginsthings/SecondClass.java:6: cannot find symbol
symbol: class FirstClass
public class SecondClass extends FirstClass { 
```

^它不会找到正在扩展的 FirstClass。我知道里面的代码可以工作，因为它是一个库中的示例，而包 beginthings 是 src 文件夹中的一个文件夹。

**开始事物/FirstClass.java：**

```
package beginsthings;

//bunch of gui imports
public class FirstClass {

//some code for drawing a circle

} 
```

**开始事物/SecondClass.java：**

```
package beginsthings;

import java.awt.Color;
import java.awt.Graphics2D;

public class SecondClass extends FirstClass {

   //code for the drop goes here, but extending FirstClass already doesn't work.
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:01:14.277

您需要一次编译两个 java 文件，或者在 SecondClass 编译时在类路径中为 FirstClass 提供 .class 文件。尝试

```
javac beginsthings/*.java 
```

# java - 如何在 TeeChart 中设置标题的阴影颜色？

> ID：14147872
> 
> 赞同：0
> 
> 时间：2013-01-03T21:54:51.473
> 
> 标签：java, android, teechart

`TChart`在安卓中使用。我正在尝试为图表标题添加阴影，但我无法设置它的颜色。永远是白色的！

```
// chart.getHeader().getFont().getShadow().setColor(Color.fromArgb(0xffff0000));
chart.getHeader().getFont().getShadow().getBrush().setVisible(true);
chart.getHeader().getFont().getShadow().getBrush().setColor(Color.fromArgb(0xffff0000));
chart.getHeader().getFont().getShadow().setSize(2);
chart.getHeader().getFont().getShadow().setSmooth(false); 
```

我还需要什么才能获得不同颜色的阴影？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:05:54.617

对。似乎标题字体阴影总是以与标题相同的颜色绘制，如果您尝试更改阴影的颜色，它不适用。我已将其添加到缺陷列表中，以便为将来的版本进行修订 (TJ71016479)。

我建议您通过以下渠道了解新发布公告及其实施的内容：

*   [支持论坛](http://www.teechart.net/support/index.php)
*   [RSS 新闻提要](http://www.steema.com/rss)
*   [推特](http://twitter.com/SteemaSoftware)
*   [Facebook](http://www.facebook.com/SteemaSoftware)

# jquery - 使用 Jquery 删除 Gridview 行

> ID：14147874
> 
> 赞同：2
> 
> 时间：2013-01-03T21:55:00.050
> 
> 标签：jquery, asp.net

```
<asp:CommandField ShowDeleteButton="True" /> 
```

如果用户确定要删除gridview中的记录，我如何将一个简单的jquery方法链接到只要求用户确认并返回（真或假）的删除按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:00:21.607

您捕获该网格视图的删除按钮，并添加确认。此外，请注意不要覆盖现有命令。

```
jQuery(document).ready(function() 
{
  // note: the `Delete` is case sensitive and is the title of the button
  var DeleteButtons = jQuery('#<%= GridViewName.ClientID %> :button[value=Delete]');
  DeleteButtons.each(function () {
    var onclick = jQuery(this).attr('onclick');
    jQuery(this).attr('onclick', null).click(function () {
        if (confirm("Delete this record? This action cannot be undone...")) {
            return onclick();
        }
        else
        {
            return false;
        }
    });
  });   
}); 
```

如果您将 GridView 放在 UpdatePanel 中，则需要将 GridView`pageLoad()`用于更新（版本 4+）：

```
function pageLoad()
{
      var DeleteButtons = jQuery('#<%= GridViewName.ClientID %> :button[value=Delete]');
      DeleteButtons.each(function () {
        var onclick = jQuery(this).attr('onclick');
        jQuery(this).attr('onclick', null).click(function () {
            if (confirm("Delete this record? This action cannot be undone...")) {
                return onclick();
            }
            else
            {
                return false;
            }
        });
      });   
} 
```

在`pageLoad()`页面加载时运行，但也在 UpdatePanel 的每个 ajax 更新上运行。

# macos - 带剥离符号的 NIB

> ID：14147875
> 
> 赞同：0
> 
> 时间：2013-01-03T21:55:00.903
> 
> 标签：macos, cocoa, nib, debug-symbols

有人告诉我，确保在发布应用程序时删除应用程序中的所有符号是个好主意。但是，如果您从 OS X 应用程序的二进制文件中去除所有符号，那么 nib 怎么知道它所引用的方法在二进制文件中的位置？从笔尖里面看，里面没有地址。所以我很惊讶地发现，如果我从应用程序中删除符号，我的应用程序仍然可以运行。笔尖到底是怎么知道函数的位置的？此外，如果从 nib 中的符号到二进制文件中的地址的映射只是存储在其他地方（尽管我在任何地方都找不到它们），那么剥离二进制文件有什么意义呢？

# android - Android 如何使用 facebook 3.0 sdk 点赞帖子

> ID：14147877
> 
> 赞同：6
> 
> 时间：2013-01-03T21:55:21.320
> 
> 标签：android, facebook, facebook-graph-api, android-facebook

我想在我的 Android 应用程序中实现“喜欢”选项，但我不知道要使用哪个请求。

我打开了一个有效的 facebook 会话和我想要的 ID 帖子。

我该如何实现这个功能？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T13:34:02.507

我找到了解决方案。

为了喜欢帖子，我使用 Facebook 帖子 ID 的点赞连接实现了一个简单的 POST 请求。

这是代码：

```
Request likeRequest = new Request(Session.getActiveSession(), fBPostId + "/likes", null, HttpMethod.POST, new Request.Callback() {

         @Override
         public void onCompleted(Response response) {
                Log.i(TAG, response.toString());
         }
});
Request.executeBatchAndWait(likeRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:12:11.397

粗略的搜索（[1](https://stackoverflow.com/questions/5285574/is-it-possible-to-like-a-fan-page-using-the-facebook-sdk)、[2](https://stackoverflow.com/questions/5935034/integrate-facebook-with-like-button-in-android-and-iphone)、[3](https://developers.facebook.com/docs/reference/plugins/like/)）似乎表明，出于安全/垃圾邮件的原因，不可能通过 Graph API 以用户身份直接“喜欢”事物。传统上，一种普遍建议的替代方法是在 WebView 中显示 Facebook 控制的“Like”按钮，并将其包含在您的应用程序中。

然而，最近，Facebook 开发人员指南提供了[一种可能的解决方案](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/likes/)，说明在代表用户发布故事时如何在应用程序中实现“喜欢”风格的功能，尽管它与您看起来并不完全相同被要求。

# android - 在android中设置paint / fontmetrics的领先

> ID：14147883
> 
> 赞同：3
> 
> 时间：2013-01-03T21:55:50.133
> 
> 标签：android, text, canvas

我正在使用自定义字体并将文本添加到带有 android 中的 Paint 对象的画布中，例如：

```
Paint paint = new Paint();
paint.setARGB(255, 255, 255, 255);

paint.setTextSize(29);
paint.setAntiAlias(true);
paint.setTypeface(font);
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OVER)); // Text Overlapping Pattern

final TextPaint tp = new TextPaint(paint);
final TextPaint tpStroke = new TextPaint(strokePaint);

// canvas.translate(15, 5);
canvas.translate(20, 5);

StaticLayout sl = new StaticLayout(textOne.getText().toString(), tp, (finalBitmapOne.getWidth()-10), Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false);

sl.draw(canvas); 
```

我对前导/行高不满意，我该如何调整它？

我可以通过以下方式*获得*领先：

```
FontMetrics fmPaint = paint.getFontMetrics();
fmPaint.leading; 
```

但是我该如何调整呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T01:02:06.060

从[`getFontMetrics`](http://developer.android.com/reference/android/graphics/Paint.html#getFontMetrics%28android.graphics.Paint.FontMetrics%29)（强调我的）的文档中：

> 返回字体**推荐**的行间距，给定 Paint 的字体、textSize 等设置。如果 metrics 不为 null，则返回其中的 fontmetric 值。

您没有设置它来更改间距，您阅读它以确定推荐的间距应该是什么。您必须自己手动重新定位坐标，即在绘制每条线之间再次平移画布。

# c# - 在c#中无法计算出这个公式

> ID：14147885
> 
> 赞同：2
> 
> 时间：2013-01-03T21:55:54.093
> 
> 标签：c#, winforms, for-loop, formula, generic-list

抱歉，我是编码新手，在尝试了一切之后我无法弄清楚！我有 6 个屏蔽文本框，用户输入分贝值，应该将它们保存到列表中，将每个输入到公式中并输出总分贝值，但它只是将添加的变量作为 6，这是计数列表而不是实际值。当我尝试一个 foreach 循环时，它使它成为一个无限循环。

```
private void dBAddButton_Click(object sender, EventArgs e)
    {         
        List<double> addDBList = new List<double>();
        double final;
        double added = 0;

        addDBList.Add(double.Parse((dB1.Text)));
        addDBList.Add(double.Parse((dB2.Text)));
        addDBList.Add(double.Parse((dB3.Text)));
        addDBList.Add(double.Parse((dB4.Text)));
        addDBList.Add(double.Parse((dB5.Text)));
        addDBList.Add(double.Parse((dB6.Text))); 

            for (int i = 0; i < addDBList.Count; i++)
           {
            added += Math.Pow(10, (i / 10));
           }

        final = 10 * Math.Log10(added);

        totaldB.Text = final.ToString();                  
    } 
```

}

公式基本上是`10log[10^(first value/10)+10^(second value/10)...+10^(nth value/10)]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T21:57:23.203

```
added += Math.Pow(10, (addDBList[i] / 10)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T21:57:55.700

```
added += Math.Pow(10, (i / 10)); 
```

这是你的问题。`i`是数组的索引位置，而不是实际值。你想用这个：

```
added += Math.Pow(10, (addDBList[i] / 10)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T21:58:55.540

i 是一个整数，范围从 0 到 5。您将该整数除以 10，众所周知，整数除法没有分数，因此 i / 10 始终为 0。本质上，您的内部循环是这样的：

```
added += Math.Pow(10, 0); 
```

这是 1。这就是为什么添加的结果是 6。

你可能是这个意思：

```
added += Math.Pow(10, addDBList[i] / 10); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T21:59:10.200

您可以（并且应该）使用`foreach`这样的：

```
foreach (double decibel in addDBList)
{
   added += Math.Pow(10, (decibel / 10));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T21:58:51.093

要访问数组或列表中的值，您必须使用索引和标识符：

```
added += Math.Pow(10, (addDBList[i] / 10)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-03T21:59:13.407

改变

```
added += Math.Pow(10, (i / 10)); 
```

到

```
added += Math.Pow(10, addDBList[i] / 10); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-03T22:01:24.723

您的 for 循环是问题...将其替换为

```
 for (int i = 0; i < addDBList.Count; i++)
       {
        added += Math.Pow(10, ( addDBList[i] / 10));
       } 
```

# python - 为什么 shutil.copy2 不完全复制文件的统计信息？

> ID：14147886
> 
> 赞同：0
> 
> 时间：2013-01-03T21:55:54.513
> 
> 标签：python, linux, copy

## 首先：

代码：

```
src = 'src'
open(src, 'w')
dst = 'dst'
open(dst, 'w')
print repr(os.path.getmtime(src))
print repr(os.path.getmtime(dst))
print 
shutil.copy2(src, dst)
print repr(os.path.getmtime(src))
print repr(os.path.getmtime(dst)) 
```

输出：

```
1357249388.8798938
1357249388.8798938

1357249388.8798938
1357249388.879893 
```

我希望之后：

```
shutil.copy2(src, dst) 
```

这是真的：

```
 repr(os.path.getmtime(src)) == repr(os.path.getmtime(dst)) 
```

，但**不是**。

## 第二：

另一个奇怪的事情是：

```
print os.path.getmtime(src) == os.path.getmtime(dst) 
```

有时给出*True*，有时给出*False*

# matlab - 在matlab中将char转换为整数

> ID：14147888
> 
> 赞同：5
> 
> 时间：2013-01-03T21:56:01.570
> 
> 标签：matlab, type-conversion

> **可能重复：**
> [在matlab中将字符串转换为数字数组](https://stackoverflow.com/questions/12046605/convert-string-to-number-array-in-matlab)

我有一个包含值`'1' '2' '3'`char 值的向量 y，我想将其转换为相应的整数向量。如果我使用`str2num`它会给出`49 50 51`类似的数字。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T21:59:47.067

```
y - '0' 
```

`'0'`利用数字的 ASCII 值是连续的这一事实，从每个向量元素中减去 ASCII 值。

# windows - 在 Win32 中显示“打印首选项”对话框

> ID：14147892
> 
> 赞同：1
> 
> 时间：2013-01-03T21:56:24.777
> 
> 标签：windows, printing

目前，我正在使用 PrintDlg 显示打印对话框。我已经创建了自己的版本，需要知道如何只显示打印机特定的“打印首选项”对话框，您可以通过单击 PrintDlg 中的“首选项”按钮来访问该对话框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:15:45.310

我在这里找到了我想要的东西：http: [//msdn.microsoft.com/en-us/library/dd183350](http://msdn.microsoft.com/en-us/library/dd183350(v=vs.85).aspx) (v=vs.85).aspx AdvancedDocumentProperties

# c - AES128/CBC 测试不工作

> ID：14147894
> 
> 赞同：1
> 
> 时间：2013-01-03T21:56:35.090
> 
> 标签：c, aes, libgcrypt

这是我的代码（为了代码的可读性，故意省略了错误检查）：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <gcrypt.h>

#define GCRYPT_VERSION "1.5.0"
#define GCRY_CIPHER GCRY_CIPHER_AES128

int main(void){
    if(!gcry_check_version(GCRYPT_VERSION)){
        fputs("libgcrypt version mismatch\n", stderr);
        exit(2);
    }
    gcry_control(GCRYCTL_SUSPEND_SECMEM_WARN);
    gcry_control(GCRYCTL_INIT_SECMEM, 16384, 0);
    gcry_control(GCRYCTL_RESUME_SECMEM_WARN);
    gcry_control (GCRYCTL_INITIALIZATION_FINISHED, 0);

    int algo = -1;
    size_t i;
    const char *name = "aes128";
    char plain_text[16] = {0x80};
    char key[16] = {0};
    char iniVector[16] = {0};
    size_t txtLenght = strlen(plain_text);
    char *encBuffer = malloc(txtLenght);
    gcry_cipher_hd_t hd;
    algo = gcry_cipher_map_name(name);
    size_t blkLength = gcry_cipher_get_algo_blklen(GCRY_CIPHER);
    size_t keyLength = gcry_cipher_get_algo_keylen(GCRY_CIPHER);

    gcry_cipher_open(&hd, algo, GCRY_CIPHER_MODE_CBC, 0);
    gcry_cipher_setkey(hd, key, keyLength);
    gcry_cipher_setiv(hd, iniVector, blkLength);
    gcry_cipher_encrypt(hd, encBuffer, txtLenght, plain_text, txtLenght);

    printf("encBuffer = ");
    for(i = 0; i < txtLenght; i++){
        printf("%02x", (unsigned char) encBuffer[i]);
    }
    printf("\n");

    gcry_cipher_close(hd);
    free(encBuffer);
    return 0;
} 
```

**预期结果：**
KEY = 00000000000000000000000000000000
IV = 00000000000000000000000000000000 PLAINTEXT
= 80000000000000000000000000000000
密文= 3ad78e726c1ec02b7ebfe92b23d9ec34

**我的结果：**
KEY = 00000000000000000000000000000000
IV = 00000000000000000000000000000000 PLAINTEXT
= 80000000000000000000000000000000
密文= 42

，为什么我得到这个输出？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:18:55.183

您使用的是 ASCII 值，但 AES 测试向量以十六进制值给出。

尝试使用十六进制值（数组的其余值`0`在 C 中初始化）：

```
char plain_text[16] = {0x80}; 
char key[16] = {0};
char iniVector[16] = {0};

size_t txtLenght =  sizeof plain_text; 
```

# c# - 如何在控制台应用程序中使用 Actionmailer.Net.Standalone？

> ID：14147897
> 
> 赞同：3
> 
> 时间：2013-01-03T21:56:55.310
> 
> 标签：c#, web-applications, razor, console-application, actionmailer.net

是否可以`Actionmailer.Net.Standalone`在控制台应用程序中使用？我不断收到一个错误：

> 在路径 [EmailTemplates] 中找不到任何名为 [CRD.html.cshtml] 的 CSHTML 或 VBHTML 视图。确保在文件名中指定格式（即：CRD.html.cshtml.txt.cshtml 或 CRD.html.cshtml.html.cshtml）

## 代码

```
 public class Mailer : RazorMailerBase
{
    public override string ViewPath
    {
        get { return "EmailTemplates"; }
    }

    public RazorEmailResult Processed(string f)
    {

        From = group;
        To.Add(user);
        Subject = "CRD Process Server has processed file: " + f;
        return Email("CRD.html.cshtml");
    }
} 
```

![在此处输入图像描述](../Images/3c08c6522f90b439cd514093550565ed.png)

我是否需要在`RazorViewEngine`某个地方实现，因为它不是控制台应用程序的标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T11:02:22.430

有点晚了，但也许它仍然有帮助：

尝试改变

```
return Email("CRD.html.cshtml"); 
```

至

```
return Email("CRD"); 
```

扩展是自动附加的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-03T22:00:40.843

有一个开源项目作为通用模板引擎，称为[RazorEngine](http://razorengine.codeplex.com/)

> 基于 Microsoft 的 Razor 解析技术构建的模板引擎。RazorEngine 允许您使用 Razor 语法来构建强大的模板。

简单地;

```
string template = "Hello @Model.Name! Welcome to Razor!";
string result = Razor.Parse(template, new { Name = "World" }); 
```

在 NuGet 中也可用；

> 安装包 RazorEngine

# sql - 将一列中的值解析为另一表中的多列

> ID：14147899
> 
> 赞同：2
> 
> 时间：2013-01-03T21:57:02.680
> 
> 标签：sql, sql-server, sql-server-2008, tsql

微软 SQL 服务器 2008

我有两张桌子。其中有一列，其中包含`_`分隔的数据

例子：

```
Y_21_CA
<BR>
such that:
Yes/No_Age_State 
```

我需要解析该列中的数据并将其插入到另一个表中，该表中每个值都有单独的列。假设表 A 包含一列，如上面的示例，但表 B 包含三列，`YesOrNo, Age, usState`.

最简单的方法是什么？我试过做类似的事情：

```
UPDATE TableA
SET YesOrNo = SUBSTRING (TableB.Column1, 1, 1) 
```

但`SUBSTRING`只需要一个表达式。我真的只需要一些指导，因为我不是 SQL 专家，所以我一直在努力解决这个问题。我可以弄清楚语法没有问题，但也许我不知道存在一些方法。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:16:14.187

一个通用的解决方案，使用`Charindex`'_'而不对其进行硬编码

```
declare @s varchar(10) = 'Y_21_CA'   

SELECT LEFT(@s, CHARINDEX('_',@s,1)-1) YN, 
       SUBSTRING(@s, CHARINDEX('_',@s,1)+1,  
                 CHARINDEX('_',@s,CHARINDEX('_',@s,1)) ) Age,
       RIGHT(@s, CHARINDEX('_',reverse(@s),1)-1) State 

--Results
Y   21   CA 
```

如果您希望在其他查询中经常使用此逻辑，您可以使 SELECT 语句成为内联 TVF。然后您就可以将它与您的更新一起使用，如下所示：

```
UPDATE b
SET YesOrNo = x.YN,
    Age = x.Age,
    State = x.State
FROM TableB b
INNER JOIN TableA a ON b.ID = a.ID
CROSS APPLY ThreeColumnSplit(a.S) x; 
```

这是[SQL Fiddle 的“现场”演示](http://sqlfiddle.com/#!6/ed90f/1)。（请不要介意它使用 SQL Server 2012 引擎。那只是因为 Fiddle 的 2008 实例目前似乎已关闭并且无法使用。脚本中没有特定于 SQL Server 2012 的内容。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T22:09:24.403

您应该能够使用以下内容，我认为您想要一个`INSERT`而不是`UPDATE`.

`SELECT`获取数据的语句是：

```
select substring(yourCol, 1, 1) YesOrNo,
  substring(yourcol, 3, len(yourcol)-5) Age,
  right(yourCol, 2) usState
from tableA; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/49ce7/11)

那么`INSERT`声明是：

```
insert into tableB (YesOrNo, Age, usState)
select substring(yourCol, 1, 1) YesOrNo,
  substring(yourcol, 3, len(yourcol)-5) Age,
  right(yourCol, 2) usState
from tableA; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/49ce7/12)

*注意：*这假定`YesOrNo`列总是只有一个字符，并且`usState`总是有 2 个字符。

# javascript - 从表单外的字段发送数据

> ID：14147904
> 
> 赞同：1
> 
> 时间：2013-01-03T21:57:20.097
> 
> 标签：javascript, html

我有输入字段和一些表单，我想将输入字段中的信息添加到以表单形式发送的数据中。如果输入字段位于表单之外，是否有可能？

所以问题是：是否可以从第一种形式获取数据并将其附加到第二种形式的数据中？

有我的表格：

```
<form name="phoneForm">
    Mobile phone: <input type="text" name="phone"><br>
</form>

<form name="submitForm" method="POST" action="buy">
    <a href="javascript:;" onclick="parentNode.submit();"><%=j%></a>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_HALL%>" value="<%=hallId%>"/>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_SEANCE%>" value="<%=seanceId%>"/>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_ROW%>" value="<%=i%>"/>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_PLACE%>" value="<%=j%>"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:02:09.110

您需要在 submitForm 中添加一个额外的隐藏字段。在提交表单之前，将 phoneForm.phone 的值复制到该隐藏字段中。

```
<script>
function handleSubmit() {
    document.forms.submitForm.phone.value = document.forms.phoneForm.phone.value;
    document.forms.submitForm.submit();
}
</script>

<form name="phoneForm">
    Mobile phone: <input type="text" name="phone"><br>
</form>

<form name="submitForm" method="POST" action="buy">
    <a href="javascript:;" onclick="handleSubmit()"><%=j%></a>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_HALL%>" value="<%=hallId%>"/>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_SEANCE%>" value="<%=seanceId%>"/>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_ROW%>" value="<%=i%>"/>
    <input type="hidden" name="<%=Consts.HTTP_REQUEST_PLACE%>" value="<%=j%>"/>

    <input type="hidden" name="phone" />
</form> 
```

# javascript - jQuery：定位一个 div 以用溢出填充容器 div 的可见部分

> ID：14147906
> 
> 赞同：1
> 
> 时间：2013-01-03T21:57:25.880
> 
> 标签：javascript, jquery, css, positioning

我无法让覆盖显示在另一个 div 的可见部分之上。问题是，容器 div 溢出了，如果用户在该 div 内滚动，则覆盖不会覆盖滚动部分。我的问题是：如何定位一个 div 以使用 jQuery 填充另一个 div 的可见部分 - 或者，有没有办法只使用 CSS 来完成这个？

[这是一个 jsFiddle 演示](http://jsfiddle.net/burlesona/p6k2Z/)，这是标记：

HTML

```
<div class="container">
    <div class="overlay"></div>
    <div class="content">
        <p>Content here</p>
        <p>Overflow content here</p>        
    </div>
</div> 
```

CSS

```
div.container { position: absolute; height: 100px; width: 100px; overflow-y: auto; }
div.overlay { display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: #F00; opacity: 0.5; }
div.content p { margin-bottom: 100px; } 
```

和 JS（在 DOM Ready 上加载）

```
$('div.container').click(function(){
    $('div.overlay').toggle();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:45:21.857

为了实现你所要求的，我做了以下

**CSS**

```
.container {
    /* setting this to relative means 
       overlay is positioned relative to its parent */
    position: relative; 
}
.overlay {
    /* element taken out of normal flow */
    position: absolute;
    /* removed bottom and right properties otherwise
       updating top property has no effect */
    height: 100px;
    /* When scrollbar appears width decreases to less than
       100px hence having to set to 100% to allow automatic calculation */
    width: 100%;
} 
```

**JavaScript**

使用 jQuery，我现在适当地设置了 top 属性

```
$(".container").scroll( function( ) {
    $(".overlay").css({ top: $(this).scrollTop( ) });
}); 
```

[**在这里**](http://jsfiddle.net/p6k2Z/2/)提琴[](http://jsfiddle.net/p6k2Z/2/)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:48:53.837

假设您真的只想覆盖可见部分：

[http://jsfiddle.net/GNCaT/1/](http://jsfiddle.net/GNCaT/1/)

```
<style type="text/css">
div.overlay { 
    display: none; 
    position: absolute; 
    top: 0; 
    left: 0; 
    right: 0; 
    height:100px; /* fixed height, set by CSS or javascript, no bottom */
    background: #F00; 
    opacity: 0.5; 
}
</style>

<script>
$('div.container').click(function(){
    $('div.overlay').css('top', $('div.container').scrollTop() + 'px').toggle();
});​
</script> 
```

这会将叠加层定位到容器可见部分的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:10:04.830

您可以使用 DOM 属性`scrollHeight`：

```
$('div.container').click(function(){
    $('div.overlay').css("height", this.scrollHeight).toggle();
}); 
```

[http://jsfiddle.net/p6k2Z/1/](http://jsfiddle.net/p6k2Z/1/)

* * *

**编辑 ：**

为了只覆盖可见部分，您可以使用：

```
$('div.container').click(function(){
    $('div.overlay').css({
        top: this.scrollTop,
        height: $('div.container').css("height")})
    .toggle();
}); 
```

[http://jsfiddle.net/p6k2Z/3/](http://jsfiddle.net/p6k2Z/3/)**

# c# - Toggle MVC 用户登录方式：Forms + AD Account

> ID：14147911
> 
> 赞同：3
> 
> 时间：2013-01-03T21:57:33.170
> 
> 标签：c#, asp.net-mvc, login, active-directory, forms-authentication

如果我正在使用 MVC 创建 Intranet Web 应用程序，并且在管理的访问面板中，我需要为用户提供一种通过 AD 帐户或简单的 Windows 表单登录密码组合登录的方式。

**我看到**实现这一点的唯一方法是以某种方式即时切换 web-config 文件，允许或禁止匿名登录，因此要么检查推断的 Windows 帐户名，要么不检查。

这里实际上有两个问题：是否有**更正确的方法**，如果没有，动态更改 web.config 文件的最佳方法是什么，它真的适合实现我的目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:12:53.683

> 我认为实现这一目标的唯一方法是以某种方式即时切换 web-config 文件

哦不，你真的离真相很远。

您的情况实际上很常见。[`WIF`](http://msdn.microsoft.com/en-us/security/aa570351.aspx)您可以使用(Windows Identity Foundation)将身份验证外部化到单独的服务。这里有一些[`introductory slides`](http://www.slideshare.net/manz1234/wif)。这个想法是通过单点登录提供者来联合身份验证。这是[`similar question`](https://stackoverflow.com/questions/12958364/username-and-password-authentication-for-wif-windows-identity-foundation-in-as)你的。

# php - PHP exec查找不起作用

> ID：14147914
> 
> 赞同：1
> 
> 时间：2013-01-03T21:57:46.393
> 
> 标签：php

我正在尝试使用 php 递归地对所有目录进行 chmod，并使用：

```
find /path/to/dir -type d -exec chmod 777 {} \; 
```

在命令行中效果很好，但在服务器上使用它：

```
exec('find /path/to/dir -type d -exec chmod 777 {} \;'); 
```

什么也没做。有任何想法吗？和权限有关吗？路径是真正的路径服务器级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:51:21.207

当您在命令行上运行它时，您是以您的用户身份运行它，该用户可能是路径的所有者。当您从 PHP 执行 exec() 时，是 Apache 用户在执行此操作。只有所有者 aa 文件/目录才能对其进行 chmod。要确认是这种情况，请尝试从[PHP CLI 交互式 Shell](http://php.net/manual/en/features.commandline.interactive.php)运行您的 exec() 脚本。在交互式 Shell 中，您可以运行 PHP 代码，但它将以您的用户身份执行。

如果事实证明这是原因，您必须首先 chown 目录及其子文件/目录由 Apache 用户拥有。

# reporting-services - 在 SQL Server 2008 R2 上安装 Reporting Services 出错

> ID：14147916
> 
> 赞同：1
> 
> 时间：2013-01-03T21:57:49.417
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008

我第一次在 SQL Server 2008 R2 Enterprise 版本的实例上安装了报告服务。创建了两个数据库，一切似乎都是完美的安装。但是，当我浏览报告站点 ( `http://SQLserverName:80/ReportServer_InstanceName`) 时，我只得到一些 html 呈现的标记代码，如标题和版本，但没有用户界面，如按钮、颜色、概述、菜单等。

以下是从该 url 返回的 HTML 代码：

```
<html>
<head>
<meta name="Generator" content="Microsoft SQL Server Reporting Services Version 10.0.1600.22">
<title>SQLserverName/ReportServer_InstanceName - /</title>
</head>
<body><H1> SQLserverName /ReportServer_ InstanceName - /</H1><hr>
<pre></pre><hr>
Microsoft SQL Server Reporting Services Version 10.0.1600.22 
</body>
</html> 
```

我怀疑安装时出了点问题，但我不知道究竟是什么。我在身份验证方面没有任何问题（即使对于 SQL，也是在域管理员帐户下完成的，...这只是一个测试用例设置，所以我可以使用它）。我也是这个菜鸟。

有人可以指出我或给我一些关于这种现象的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:10:39.077

试着去`http://sqlservername/reports`。报表服务器 url（您列出的那个）是 Web 服务 url。

欲了解更多信息，请参阅：

*   报告管理器：http: [//msdn.microsoft.com/en-us/library/ms157147.aspx](http://msdn.microsoft.com/en-us/library/ms157147.aspx)
*   报告服务器：http: [//msdn.microsoft.com/en-us/library/ms157231.aspx](http://msdn.microsoft.com/en-us/library/ms157231.aspx)

# python - 使用“re.sub”剥离python中的代码

> ID：14147917
> 
> 赞同：1
> 
> 时间：2013-01-03T21:57:50.343
> 
> 标签：python, regex, string, formatting

我读到这个： [从 Python 中的字符串中剥离除字母数字字符之外的所有内容](https://stackoverflow.com/questions/1276764/stripping-everything-but-alphanumeric-chars-from-a-string-in-python)

还有这个： [Python：去除除空格和字母数字之外的所有内容](https://stackoverflow.com/questions/2779453/python-strip-everything-but-spaces-and-alphanumeric)

不太明白，但我尝试了一下自己的代码，现在看起来像这样：

```
import re

decrypt = str(open("crypt.txt"))

crypt = re.sub(r'([^\s\w]|_)+', '', decrypt)

print(crypt) 
```

当我运行脚本时，它会返回这个答案： *C:\Users\Adrian\Desktop\python>python tick.py **ioTextIOWrapper namecrypttxt moder encodingcp1252***

我试图从文档中删除所有额外的代码，只保留数字和字母，在文档中可以找到以下文本：http: [//pastebin.com/Hj3SjhxC](http://pastebin.com/Hj3SjhxC)

我正在尝试解决这里的任务：http: [//www.pythonchallenge.com/pc/def/ocr.html](http://www.pythonchallenge.com/pc/def/ocr.html)

任何人都知道“ioTextIOWrapper namecrypttxt 现代编码cp1252”是什么意思？我应该如何格式化代码以正确地将其从除字母和数字之外的所有内容中剥离出来？

真挚地

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:00:15.653

`str(open("file.txt"))`不做你认为它做的事。 `open()`返回一个文件对象。 `str`为您提供该文件对象的字符串表示形式，*而不是*文件的内容。如果要读取文件的内容，请使用`open("file.txt").read()`.

或者，更安全的是，使用以下`with`语句：

```
with open("file.txt") as f:
    decrypt = f.read()
crypt = ... 
# etc. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T22:00:41.747

您可以只搜索字母数字字符。像这样：

```
print ''.join(re.findall('[A-Za-z]', decrypt)) 
```

你还想要：

```
decrypt = open("crypt.txt").read() 
```

# ruby-on-rails - activerecord 模型测试的性能

> ID：14147921
> 
> 赞同：2
> 
> 时间：2013-01-03T21:58:10.150
> 
> 标签：ruby-on-rails, ruby, performance, model, rspec

作为 TDD 和 Rails 世界的新手，我试图弄清楚如何减少我的规范的运行时间。

我放弃了 Rails 框架的加载，只加载了 ActiveRecord 部分。这有很大帮助（-8s），尽管我仍然想知道是否还有更多我可以做的。

spec 文件有 5 个示例，运行它`time rspec path_to_spec.rb`需要 1.7 秒。当我删除 FactoryGirl 并`Project.create`改为使用时，我达到了 1.4 秒。

我要测试的是模型的范围和查询组合是否正常。我不确定在这种情况下是否可以使用模拟/存根。

1.  有没有办法可以利用模拟/存根功能来测试`next_project`的行为？
2.  我怎么知道 ActiveRecord 交互时间的限制是多少？我的意思是，在测试 ActiveRecord 模型时，我必须处理 1-2 秒的执行时间吗？
3.  关于如何加快速度的任何其他建议？

我正在使用 ruby​​ 1.9.3、rspec 2.1.12、ActiveRecord 3.2.9

我的模型文件：

```
class Project < ActiveRecord::Base
  default_scope where(:is_enabled => true).order(:position)

  def self.by_slug(slug)
    where(:slug => slug).first
  end
  def find_neighbors
    Neighbors.new(previous_project, next_project)
  end

private
  def previous_project
    Project.where("position < ?", position).last
  end
  def next_project
    Project.where("position > ?", position).first
  end
end

Neighbors = Struct.new(:previous, :next) 
```

我的规格文件：

```
require 'active_record'
require 'yaml'
require 'factory_girl'
require './app/models/project'
dbconfig = YAML::load(File.open('./config/database.yml'))
ActiveRecord::Base.establish_connection(dbconfig["test"])

FactoryGirl.define do
  factory :project do
    slug { name.parameterize }
    sequence(:position, 1)
    is_enabled true
  end
end

describe Project do
  before(:all) do
    @first_project           = FactoryGirl.create(:project, name: "First Project")
    @second_project_disabled = FactoryGirl.create(:project, name: "Second Project", is_enabled: false)
    @third_project           = FactoryGirl.create(:project, name: "Third Project")
    @fourth_project_disabled = FactoryGirl.create(:project, name: "Fourth Project", is_enabled: false)
    @fifth_project           = FactoryGirl.create(:project, name: "Fifth Project")
  end
  after(:all) do
    projects = [@first_project, @second_project_disabled, @third_project, @fourth_project_disabled, @fifth_project]
    projects.each { |p| p.delete }
  end

  context "when requesting a project by URL slug" do
    it "should return that project if it is enabled" do
      Project.by_slug(@third_project.slug).should eql(Project.find(@third_project.id))
    end
    it "should not return the project if it is not enabled" do
      Project.by_slug(@fourth_project_disabled.slug).should be_nil
    end
  end
  context "when getting first project" do
    it "should have a reference only to the next project enabled" do
      neighbors = @first_project.find_neighbors
      neighbors.previous.should be_nil
      neighbors.next.should eql(Project.find(@third_project.id))
    end
  end

  # 2 more examples similar to the last one
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:12:06.713

除了调整您的数据库以尝试使其运行得更快之外，由于许多附带严重次优的默认配置，这只是您必须处理的事情之一。不过，有一些事情可以提供帮助。

Ruby 1.9.3 在初始化 Rails 环境方面比以前的版本快很多，所以你使用它很好。过去，在某些机器上，仅仅为了调出控制台就需要大约 20 秒。由于一些内部优化，最近有所改善。

不过，不要指望您的单元测试会立即运行。几秒钟通常没什么大不了的。如果可以，运行*重点*测试，即一次一种测试方法，然后是整个测试模块，然后是整个测试套件。有许多流行编辑器的插件可以帮助解决这个问题。

好消息是 Rails 4 正在做一些工作以建立[更持久](https://twitter.com/dhh/status/281878921602031617)的测试过程，但尚不清楚这是否会在发布版本中。

# google-maps - 我的谷歌地图看起来很奇怪

> ID：14147922
> 
> 赞同：-2
> 
> 时间：2013-01-03T21:58:10.580
> 
> 标签：google-maps

我在这里有这个页面，谷歌地图看起来很奇怪，当我说奇怪时，地图上的信息太大而被切断（看起来像方形单词气泡中的信息，类似于你在漫画中看到的内容书。）

我的问题是，我将如何移动地图以查看完整信息

可以在地图上设置位置吗？

这是我的谷歌地图代码：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.ca/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=672+Brant+Street,+Burlington,+ON&amp;aq=0&amp;oq=672+Brant+Street&amp;sll=43.447946,-79.624382&amp;sspn=0.456129,0.876846&amp;ie=UTF8&amp;hq=&amp;hnear=672+Brant+St,+Burlington,+Ontario+L7R+2G6&amp;t=m&amp;z=14&amp;ll=43.330828,-79.805332&amp;output=embed"></iframe><br /><small><a href="http://maps.google.ca/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=672+Brant+Street,+Burlington,+ON&amp;aq=0&amp;oq=672+Brant+Street&amp;sll=43.447946,-79.624382&amp;sspn=0.456129,0.876846&amp;ie=UTF8&amp;hq=&amp;hnear=672+Brant+St,+Burlington,+Ontario+L7R+2G6&amp;t=m&amp;z=14&amp;ll=43.330828,-79.805332" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

谢谢，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:12:52.603

你需要把它往下移一点。

1.  打开“查看更大的地图”链接
2.  将其调整为您将使用的大小
3.  向下移动地图，以便标记上方的信息窗口有空间。
4.  捕获“在电子邮件或 IM 中粘贴链接”
5.  将该链接粘贴到地址栏中
6.  获取“嵌入代码”（“粘贴 HTML 以嵌入网站”）
7.  将嵌入代码放入您的 HTML 中。

[调整后的jsfiddle](http://jsfiddle.net/ExWHU/4/)

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.ca/maps?q=672+Brant+Street,+Burlington,+ON&amp;hl=en&amp;sll=43.447946,-79.624382&amp;sspn=0.456129,0.876846&amp;oq=672+Brant+Street&amp;hnear=672+Brant+St,+Burlington,+Ontario+L7R+2G6&amp;t=m&amp;ie=UTF8&amp;hq=&amp;z=14&amp;iwloc=A&amp;ll=43.337602,-79.802628&amp;output=embed"></iframe><br /><small><a href="http://maps.google.ca/maps?q=672+Brant+Street,+Burlington,+ON&amp;hl=en&amp;sll=43.447946,-79.624382&amp;sspn=0.456129,0.876846&amp;oq=672+Brant+Street&amp;hnear=672+Brant+St,+Burlington,+Ontario+L7R+2G6&amp;t=m&amp;ie=UTF8&amp;hq=&amp;z=14&amp;iwloc=A&amp;ll=43.337602,-79.802628&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

# javascript - `return false;` 对自定义事件有什么影响？

> ID：14147923
> 
> 赞同：1
> 
> 时间：2013-01-03T21:58:13.653
> 
> 标签：javascript, javascript-events

[与关于 jQuery custom events 的这个问题类似](https://stackoverflow.com/questions/10463218/jquery-custom-events-return-value)，我试图找出效果`return false;`是什么，但我没有使用 jQuery。我正在通过以下方法触发自定义事件：

```
var event = document.createEvent('Event');
event.initEvent('CustomName', false, true);
element.dispatchEvent(event); 
```

这被包装在一个函数中，我在调度事件后返回事件对象。现在，我在触发代码中寻找一种方法来查看是否有一个侦听器返回`false`，以便我可以阻止进一步执行。我如何能够检测其中一个侦听器是否`false`以跨浏览器的方式返回（IE 7+）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:19:42.103

它指定创建的事件是否会冒泡

（编辑）考虑以下示例：

```
var evt = document.createEvent('Event');
evt.initEvent('myevent', true, true); // the third argument here specifies whether the event can be cancelled
var elem = document.getElementById('mydiv');
elem.addEventListener('myevent', function(e){
    e.preventDefault();
}, true);
console.log(elem.dispatchEvent(evt)); //Here you will get return value of false because in the event handler you called e.preventDefault() 
```

问题是您希望它与 IE 7+ 一起使用，但 IE 7 和 8 首先不支持 document.createEvent

# javascript - iPad 上的响应式设计有效，但只有一次

> ID：14147925
> 
> 赞同：0
> 
> 时间：2013-01-03T21:58:24.400
> 
> 标签：javascript, jquery, html, css, responsive-design

这是完整的相关代码示例： http: [//pastebin.com/b7P5Hjt1](http://pastebin.com/b7P5Hjt1)

（请参阅此帖子下方的评论以获取屏幕截图的链接；所以只让我有两个链接）

然后，在第一次转弯后，所有横向方向都被不正确地缩放/缩放。我终其一生都无法弄清楚问题所在。我认为这可能是在完全调整方向之前发生的百分比计算，但我不知道如何测试它，更不用说修复它了。

我在 StackOverflow 上发现了 onOrientationChange 函数，并链接到了 Apple 文档。但是，那是一个多星期前的事了，我只有帖子中的代码，没有 URL。我已经搜索过它以再次链接，但我找不到它。

感谢任何帮助、问题或澄清！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:11:06.750

TL;DR：您需要将 updateOrientation 函数绑定到窗口的方向更改事件，而不是文档的正文。

在第 201 行，您设置 onorientationchange 事件来触发您的 updateOrientation 函数。相反，您应该将窗口的方向更改绑定到您的函数。

```
window.onorientationchange = function() { updateOrientation(); } 
```

此处提供了一个示例： [如何在 IOS 中使用 javascript 和 Phonegap 正确检测方向变化？](https://stackoverflow.com/questions/5284878/how-do-i-correctly-detect-orientation-change-using-javascript-and-phonegap-in-io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T00:36:29.197

我解决了这个问题。我做了以下事情：

改变了

> 初始规模=1.0，用户可扩展=否

至

> 用户可扩展=否

显然，初始比例，加上用户可缩放，不允许它调整大小。然后，我在 updateOrientation 函数的末尾添加了以下内容：

> $(".container").css('width', $(window).width()+'px');

我不知道是否需要两者，但两者都有效。希望能帮助到你！

# java - 为什么 ArrayList 通过特定公式扩展 elementData 数组？

> ID：14147928
> 
> 赞同：2
> 
> 时间：2013-01-03T21:58:37.977
> 
> 标签：java, arrays, collections, arraylist

就在五分钟前，我发现了它的`ArrayList`工作原理。它具有`elementData`特定类型的数组字段，如果我们添加元素并且`elementData`数组已满，则集合在内部通过以下公式创建另一个数组：

```
(oldCapacity * 3) / 2 + 1 
```

并将数据从旧数组复制到新数组。我只是想知道，这是为什么呢？为什么不把最后一码加倍？通过描述此公式，我在哪里可以获得有关 ArrayList 集合的内部表示的更多理论信息。PS对不起我的英语，它不是我的母语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:02:40.110

实际上，增长策略是未指定的，只是它[保证](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)添加一个元素具有恒定的摊销成本。

您提出的方案和 JDK 使用的方案都提供了这样的保证。事实上，*任何*乘法增长方案都是合规的。其他语言/库将大小增加了两倍，因此这也是一种常见的方案。不同的 Java 实现可以选择遵循该方案，并且仍然符合规范。

请参阅[Amortized analysis of std::vector 插入](https://stackoverflow.com/questions/6550509/amortized-analysis-of-stdvector-insertion)的讨论——它是关于 C++ 但同样适用于 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:04:37.917

可能没有客观的衡量标准。我们可以通过浪费更多内存来避免复制，或者我们可以通过更频繁地复制来节省内存。这两个不能在一个目标函数中客观地衡量。

# android - 如果位置管理器无法使用 GPS_Provider 获取位置，请切换到 NETWORK_Provider

> ID：14147941
> 
> 赞同：0
> 
> 时间：2013-01-03T21:59:40.707
> 
> 标签：android, geolocation, location, locationmanager, locationlistener

我想使用 GPS_Provider 作为获取用户当前位置的主要方法，但是，在某些情况下 GPS 不起作用。如果我的应用无法通过 GPS 获取用户位置，我想切换到 NETWORK_PROVIDER。我该如何实施？

```
lm = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);

//setting up criteria (biased toward GPS)
Criteria criteria = new Criteria(); 
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setHorizontalAccuracy(Criteria.ACCURACY_HIGH);
String providerName = lm.getBestProvider(criteria, true);

//requesting location updates (if app cant use GPS, switch to requestLocationUpdates.NETWORK_PROVIDER)
lm.requestLocationUpdates(providerName, 180000, 0, ll); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:09:10.363

一种解决方案是异步请求 GPS 和 NETWORK 的更新。GPS 和 NETWORK 都需要两个单独的侦听器。无论哪个侦听器首先返回，您都将停止获取其他提供者的更新。*（即，如果您首先从网络获得结果，请停止获取网络和 gps 的更新。）*

让我知道您是否感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T23:07:35.397

对于我的实施。我首先检查 gps 位置，如果它返回 null。然后检查网络位置。

```
Location locationGps = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
Location locationNetwork = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

        if (locationGps != null) {
            //set location as gps
            hasFix = true;
        }

        else if (locationNetwork != null) {
            //set location as network
            hasFix = true;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:53:03.790

可能是也可能不是一个好主意，

我所做的，我注册了网络和 GPS 提供商......一旦我开始获取 GPS 坐标，然后我将使用 location.getProvider() 使用布尔变量获取正在获取的网络提供商的坐标。

# iphone - iPhone剩余电池不刷新

> ID：14147950
> 
> 赞同：1
> 
> 时间：2013-01-03T22:00:06.953
> 
> 标签：iphone, battery

在阅读了很多其他问题和答案并尝试了不同的解决方案后，我仍然无法获得电池水平。第一次调用我得到了正确的值，但接下来的调用我得到了与第一次调用相同的电池值。我错过了什么？

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];

UIDevice *myDevice = [UIDevice currentDevice];

[myDevice setBatteryMonitoringEnabled:YES];

double batLeft = (float)[myDevice batteryLevel] * 100; 
```

# node.js - node.js 如何参与移动？

> ID：14147954
> 
> 赞同：7
> 
> 时间：2013-01-03T22:00:18.950
> 
> 标签：node.js

现在，我的目标是开始学习使用 node.js 进行开发。

我希望我的问题很清楚 - 当您谈论 node.js 和移动设备时，您是什么意思？到由 node.js 开发的 web 应用程序，用户通过简单的 web 浏览器或纯移动应用程序（例如带有 java 的 android）和 node.js 以某种方式参与这个过程（如何？）。

我问它是因为我看到Linkedin 开发了一个基于node.js 的移动应用程序，但我不明白他们在哪里集成了node.js - 在Web 应用程序上？安卓应用？iOS 应用程序？对我来说不清楚（我的假设是 Web 应用程序，但我真的很困惑）。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T22:04:08.867

NodeJS 是一个服务器后端组件，它响应各种网络请求，但最常见的是 HTTP 请求。在移动应用程序的情况下，它可能用于与数据库交互并解释 JSON HTTP 调用、获取和/或插入数据，并将 JSON 数据返回给移动客户端。

在大多数情况下，iOS、Android 和移动 Web 客户端将通过 HTTP 连接到 NodeJS，以通过各种 API发送`GET`和请求。`POST`

NodeJS 还可以与每个平台上可用的各种推送通知系统进行交互，或者使用诸如[SocketIO](http://socket.io/)之类的东西来提供客户端和服务器之间的实时通信。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T13:37:20.187

关于 LinkedIn 如何使用 Node.js 技术的文章可以在这里找到：http:
[//venturebeat.com/2011/08/16/linkedin-node/](http://venturebeat.com/2011/08/16/linkedin-node/)

在 LinkedIn 使用该技术的最大原因是速度和使用更少的资源。

> 该应用程序在客户端比其前身快 2 到 10 倍，而在服务器端，由于从 Ruby on Rails 切换到 Node.js，它使用了一小部分资源

新的移动应用程序可能使用了一点浏览器沙盒和原生应用程序代码。

> “HTML5 Web 应用程序和原生应用程序之间存在着这场战斗。但是我们在原生应用程序中散布了 HTML5，其中基于 Web 的内容表现出色。HTML5 中难以做到的事情是无限滚动列表，因此我们采用了原生方式。”</p>

和

> 我们的移动网络应用程序的工作方式是它全部呈现在浏览器端。

LinkedIn 选择 Node 的更多原因：

> BlockquoteOne 的原因是规模。第二个是，如果您查看 Node，它最擅长做的事情就是与其他服务通信。

希望其中一些有助于回答您的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-03T06:52:00.533

`Node.js (Node) is a scalable, event-driven I/O environment built on top of Google Chrome's JavaScript runtime—essentially, a server-side implementation of JavaScript. Google V8 actually compiles JavaScript into native machine code prior to execution, resulting in extremely fast runtime performance—something not typically associated with JavaScript. As such, Node enables you to rapidly build network apps that are lightning fast and highly concurrent.`

它真正的意思是 Node.js 不是一个将主宰 Web 开发世界的灵丹妙药的新平台。**相反，它是一个满足特定需求的平台。**理解这一点是绝对必要的。您绝对不想将 Node.js 用于 CPU 密集型操作；事实上，将它用于繁重的计算将消除它几乎所有的优势。Node 真正闪耀的地方在于构建快速、可扩展的网络应用程序，因为它能够以高吞吐量处理大量同时连接，这等同于高可扩展性。

**它是如何在引擎盖下工作的非常有趣。**与每个连接（请求）产生一个新线程、占用系统 RAM 并最终最大化可用 RAM 量的传统 Web 服务技术相比，Node.js 在单线程上运行，使用非阻塞 I/ O调用，使其支持支持数万并发连接

快速计算：假设每个线程可能附带 2 MB 内存，在具有 8 GB RAM 的系统上运行，我们理论上最多可以有 4000 个并发连接，加上线程之间的上下文切换成本。这就是您在传统 Web 服务技术中通常处理的场景。通过避免所有这些，Node.js 实现了超过 1M 并发连接的可伸缩性级别

继续阅读 .. [http://www.toptal.com/nodejs/why-the-hell-would-i-use-node-js](http://www.toptal.com/nodejs/why-the-hell-would-i-use-node-js)

黄金时段的公司依赖 Node.js 来提供移动解决方案。

[LinkedIn](http://venturebeat.com/2011/08/16/linkedin-node/)是一个杰出的用户。他们的整个移动堆栈都建立在 Node.js 之上。他们从在每台物理机上运行 15 个服务器和 15 个实例变为仅运行 4 个实例——这可以处理双倍的流量！

[eBay](http://www.ebaytechblog.com/2011/11/30/announcing-ql-io/)推出了 ql.io，这是一种用于 HTTP API 的 Web 查询语言，它使用 Node.js 作为运行时堆栈。他们能够调整常规的开发人员质量的 Ubuntu 工作站，以处理每个 node.js 进程超过 120,000 个活动连接，每个连接消耗大约 2kB 内存！

[沃尔玛](http://venturebeat.com/2012/01/24/why-walmart-is-using-node-js/)重新设计了其移动应用程序以使用 Node.js，并将其 JavaScript 处理推送到服务器。

阅读更多：[http ://www.pixelatingbits.com/a-closer-look-at-mobile-app-development-with-node-js/](http://www.pixelatingbits.com/a-closer-look-at-mobile-app-development-with-node-js/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T22:04:45.027

他们指的是服务器后端的 node.js。

例子是：

*   具有 node.js 服务器后端的任务管理应用程序，用于存储任务和约会，并推送警报。
*   带有 node.js 服务器后端的聊天应用程序，用于路由和传递消息

# c# - protobuf-net：如何序列化 EventHandler

> ID：14147962
> 
> 赞同：4
> 
> 时间：2013-01-03T22:00:53.147
> 
> 标签：c#, serialization, protobuf-net

我正在尝试使用以下代码使用 protobuf-net 使用 EventHandler 序列化一个类：

```
 [ProtoContract]
    class Thing
    {
        [ProtoMember(5, AsReference = true)]
        public EventHandler _DoSomething;

        public event EventHandler DoSomething
        {
            add { _DoSomething += value; }
            remove { _DoSomething -= value; }
        }

        public void PerformSomething(object sender, EventArgs args)
        {
        }
    }

    [TestMethod]
    public void SerializingAClassWithAnEvent_Deserializes()
    {
        var Guy1 = new Thing() {};
        var Guy2 = new Thing() {};
        Guy2.DoSomething += Guy1.PerformSomething;
        Assert.IsNotNull(Guy2._DoSomething);

        MemoryStream buffer = new MemoryStream();
        Serializer.Serialize(buffer, Guy2);
        MemoryStream afterStream = new MemoryStream(buffer.ToArray());
        var outGuy = Serializer.Deserialize<Thing>(afterStream);

        Assert.IsNotNull(outGuy._DoSomething);
    } 
```

此代码编译并运行良好，但第二个断言失败，因为 _DoSomething EventHandler 仍然为空。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:13:07.663

从[这里](http://code.google.com/p/protobuf-net/wiki/GettingStarted)的文档中不支持 EventHandlers

```
custom classes that:
   are marked as data-contract;
   have a parameterless constructor;
   for Silverlight: are public
many common primitives etc
single dimension arrays: T[]
List<T> / IList<T>
Dictionary<TKey,TValue> / IDictionary<TKey,TValue>
any type which implements IEnumerable<T> and has an Add(T) method 
```

# java - mysql 准备好的语句 java

> ID：14147963
> 
> 赞同：2
> 
> 时间：2013-01-03T22:00:56.210
> 
> 标签：java, mysql, prepared-statement

我正在使用我生成的准备好的语句，并且在 java 抛出的语句上出现语法错误。然而，当我将 PS 的 toString 复制并粘贴到数据库的 phpmyadmin 中时，它完美地执行。任何想法可能是错的，我很困惑？

编辑：更改为 ps.executeUpdate(query); 还是不行。

```
public int addOrder(Order order){
    int rs=false;
    try {
        String query = "INSERT INTO `orders`(`orderNumber`, `productNumber`, `quantity`, `orderer`, `assembler`, "
                + "`meshType`, `beadType`, `beadCount`, `notes`, `dateCompleted`, `dateSubmitted`, `isComplete`) "
                +"VALUES (?,?,?,?,?,?,?,?,?,?,?,?)";
        PreparedStatement ps = con.prepareStatement(query);
        ps.setString(1, order.getOrderNumber());
        ps.setInt(2, order.getProductNumber());
        ps.setInt(3, order.getQuantity());
        ps.setString(4, order.getOrderer());
        ps.setString(5, order.getAssembler());
        ps.setString(6, order.getMesh());
        ps.setString(7, order.getBeadType());
        ps.setInt(8, order.getBeadCount());
        ps.setString(9, order.getNotes());
        ps.setLong(10, order.getDateCompleted().getTime());
        ps.setLong(11, order.getDateSubmitted().getTime());
        ps.setBoolean(12, order.getIsComplete());
        System.out.println(ps.toString());
        rs = ps.executeUpdate(query);

    } 
    catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return rs;
} 
```

我收到的错误消息，前面是 addOrder 的 ps.toString()。就像我说的那样，如果我将 toString 的相关部分复制粘贴到 phpmyadmin 中并执行它就可以正常工作。关于我做错了什么的任何想法？

```
 com.mysql.jdbc.JDBC4PreparedStatement@40378309: INSERT INTO
 `orders`(`orderNumber`, `productNumber`, `quantity`, `orderer`,
 `assembler`, `meshType`, `beadType`, `beadCount`, `notes`,
 `dateCompleted`, `dateSubmitted`, `isComplete`) VALUES
 ('',251,1,'Mark','','Other','LBB',150,'this is a
 test',1357249393009,1357249393010,0) 
```

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 sun.reflect 的第 1 行的 '?,?,?,?,?,?,?,?,?,?,?,?)' 附近使用正确的语法.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.mysql .jdbc.Util.handleNewInstance(Util.java:411) 在 com.mysql.jdbc.Util.getInstance(Util.java:386) 在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053) 在 com。 mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096) 在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T04:19:52.193

@TheCapn 删除的答案几乎是正确的。更改`executeQuery(query)`为`executeUpdate()`，不带参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T00:07:39.830

如果您将查询放入其中，它将执行两次。对于您的情况，您不应该在其中输入查询。你所需要的就是这样；

```
ps.executeUpdate(query); <-- remove 'query'

//should be like this
ps.executeUpdate(); 
```

* * *

```
executeQuery(); //Generally this use for select statement. The output will be in Resultset. 

executeUpdate(); //Generally this use for insert, update, delete and drop table.

execute(); //If you don't know which method to be used for executing your SQL statements, you can use this. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:25:25.470

```
String query = "INSERT INTO `orders`(`orderNumber`, `productNumber`, `quantity`, `orderer`, `assembler`, "
            + "`meshType`, `beadType`, `beadCount`, `notes`, `dateCompleted`, `dateSubmitted`, `isComplete`) "
            +"VALUES (?,?,?,?,?,?,?,?,?,?,?,?)"; 
```

应该读

```
String query = "INSERT INTO orders(orderNumber, productNumber, quantity, orderer, assembler, "
            + "meshType, beadType, beadCount, notes, dateCompleted, dateSubmitted, isComplete) "
            +"VALUES (?,?,?,?,?,?,?,?,?,?,?,?)"; 
```

即没有引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T04:27:53.727

我认为错误可能来自数据类型转换。您可以尝试不使用参数并直接设置值吗？我之前在 ADO.NET 中遇到过类似的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T16:50:47.570

我终于找到了我的解决方案，由于某种原因它不喜欢我的 setStrings，所以我设置了很长的路并让它工作。谢谢你！

# .net - WindowForms 中的 .NET WebBrowser 控件

> ID：14147971
> 
> 赞同：-1
> 
> 时间：2013-01-03T22:01:34.090
> 
> 标签：.net, vb.net, winforms, c#-4.0

我目前`System.Windows.Forms.WebBrowser`在我的程序中使用 a 。当我尝试通过 https 访问某些网站时，出现“您的网站安全证书有问题”的消息。有什么方法可以让 WebBrowser 忽略这些类型的警告？

我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:06:08.783

最简单的方法是：

```
System.Net.ServicePointManager.ServerCertificateValidationCallback = 
  (sender, certificate, chain, errors) => true; 
```

但这确实使客户端容易受到攻击（即无法验证服务器的身份）。

更好的方法是实现一种实际验证证书的方法，或者如果证书无法验证，则向用户提供是否应该继续的选择。

# objective-c - 在 Mac XCode 项目中使用 libmediainfo

> ID：14147973
> 
> 赞同：0
> 
> 时间：2013-01-03T22:01:40.297
> 
> 标签：objective-c, xcode, cocoa

我正在尝试在 Xcode 项目中使用[libmediainfo](http://sourceforge.net/projects/mediainfo/files/binary/libmediainfo0/0.7.61/)，但无法使其正常工作。

我已将 dylib 添加到项目的 Frameworks 文件夹中，并确保将其添加到目标构建设置中的“Link Binary with Libraries”部分。

每次我尝试构建应用程序时，它都会说：

```
dyld: Library not loaded: /usr/lib/libmediainfo.0.dylib
  Referenced from: ...... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:41:32.677

签出加载器路径：otool -L libmediainfo.dylib

如果它有@loader_path，用 install_name_tool 把它改成@rpath

install_name_tool -id @rpath/libmediainfo.dylib libmediainfo.dylib

或者，您可以将 dylib 放在 MacOS 文件夹中并使用 @executable_path 而不是 @rpath。

# mysql - MySQL分页排名

> ID：14147975
> 
> 赞同：0
> 
> 时间：2013-01-03T22:02:03.213
> 
> 标签：mysql, sql, ranking

我有一个如下所示的 SQL 查询：

```
SELECT member_id, Count(*) AS '# of Rounds'
FROM   score,cup_point
WHERE  session_id =?
       AND tour_id =?
       AND cup_point_id = `cup_point`.id
GROUP  BY member_id
ORDER  BY Sum(points) DESC
LIMIT  50 offset 0 
```

如何在查询中包含排名，以便：

1.  我得到一个返回列，其中包含一个基于分数的数字 ie `SUM(points)`，因此最高分数的排名为 1，依此类推。
2.  使用偏移量和限制进行分页时，甚至当我按成员 ID 过滤时，我仍然可以获得该成员的正确排名 ( `member_id`) 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:20:52.553

也许有一个子查询和一个正在运行的计数器

```
SET @x = 0;
SELECT member_id,NumRounds AS '# of Rounds',@x:=(@x+1) Rank FROM
(
SELECT member_id, Count(*) AS NumRounds
FROM   score,cup_point
WHERE  session_id =?
       AND tour_id =?
       AND cup_point_id = `cup_point`.id
GROUP  BY member_id
ORDER  BY Sum(points) DESC
LIMIT  50 offset 0 
) A; 
```

[我在 2012 年 6 月 8 日的 DBA StackExchange 中解决了类似的问题](https://dba.stackexchange.com/a/18990/877)

试试看 ！！！

# iphone - 将图像用于没有文本的 backBarButtonItem

> ID：14147981
> 
> 赞同：2
> 
> 时间：2013-01-03T22:02:38.727
> 
> 标签：iphone, ios, uinavigationcontroller, uibarbuttonitem

我只是想将我的导航控制器的 backBarButtonItem 设置为此图像

![在此处输入图像描述](../Images/186e5089a0cf0e73b86bcca2a0b57053.png)

而不是 Apple 默认的箭头按钮，其标题与前一个视图控制器的标题相同。到目前为止，我得到的最接近的是上面水平拉伸的图像，标题仍然重叠。为此，我在 AppDelegate 中使用了此代码。

```
UIImage *backButtonImage = [UIImage imageNamed:@"back-button.png"];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImage
                                                  forState:UIControlStateNormal
                                                barMetrics:UIBarMetricsDefault]; 
```

我怎样才能摆脱标题（并防止按钮被拉伸）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:20:00.133

当您使用外观时，您正在设置应用程序的后栏按钮项的背景图像。他们有背景图像的事实与他们是否显示标题无关。要使用自定义栏按钮项而不是默认的后退项，请查看[此问题](https://stackoverflow.com/questions/1449339/how-do-i-change-the-title-of-the-back-button-on-a-navigation-bar)。

在您的情况下，您可能根本不想使用外观，而是像上面的链接一样创建一个条形按钮项目，但使用`-initWithImage:style:target:action:`而不是`-initWithTitle:style:target:action:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T05:26:21.683

您可以设置 BarbuttonItem 的自定义图像，例如：-

```
- (void)viewDidLoad 
{
    UIImage* imageRight = [UIImage imageNamed:@"Home_btn.png"];
    CGRect frameimgRight = CGRectMake(100, 100, 50, 30);

    RightBtn = [[UIButton alloc] initWithFrame:frameimgRight];
    [RightBtn setBackgroundImage:imageRight forState:UIControlStateNormal];
    [RightBtn addTarget:self action:@selector(ActionhomeBtn)
                       forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *btnRight = [[UIBarButtonItem alloc]initWithCustomView:RightBtn];
    self.navigationItem.leftBarButtonItem = btnRight;

  [super viewDidLoad];

} 
```

看起来像：-

![在此处输入图像描述](../Images/ca5f3ff7f26a44b94dd84df4046808fb.png)

希望它是你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:10:47.853

我知道这个方法有效，应该在 ViewDidLoad 中调用：

```
UIBarButtonItem *backButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"back-button.png"] style:UIBarButtonItemStyleBordered target:nil action:@selector(methodName)]; 
```

然后必须将其分配给导航栏：

```
item.rightBarButtonItem = backButtonItem; 
```

然后推：

```
[self.navBar pushNavigationItem:item animated:NO]; 
```

# linker - 预定义的 ELF 代码段

> ID：14147983
> 
> 赞同：2
> 
> 时间：2013-01-03T22:02:47.557
> 
> 标签：linker, elf, codewarrior

可以在 ELF 链接器命令文件中引用的预定义代码段是什么？除了任何其他可用的之外，我特别想知道这些：

*   。文本
*   .rodata
*   .sdata
*   .sbss
*   .bss
*   。数据

事实证明，查找文档是最困难的。如果有人也能告诉我在这种情况下 ELF 的首字母缩写词代表什么，那将是一个加分项。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:12:54.683

不知道你说的找不到文档是什么意思。[维基百科](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)有大量关于可执行和可链接格式的链接。其中一个链接描述了您感兴趣的 ELF[部分（以及许多其他内容）。](https://web.archive.org/web/20121126063759/http://www.acsu.buffalo.edu/~charngda/elf.html)[此处的](http://refspecs.linuxfoundation.org/LSB_3.1.1/LSB-Core-PPC64/LSB-Core-PPC64/specialsections.html)另一个链接描述了其他 ELF 特殊部分 (.sbss/.sdata)。

# django - 通过 get_flatpages 模板标签从其 url 而不是页面标识符检索平面页面不是很粗糙吗？

> ID：14147984
> 
> 赞同：0
> 
> 时间：2013-01-03T22:02:48.550
> 
> 标签：django, templates, django-templates, django-flatpages

正如您可以阅读[django 参考资料](https://docs.djangoproject.com/en/dev/ref/contrib/flatpages/#std:templatetag-get_flatpages)或稍微修改一下，`get_flatpages`可以按如下方式使用：

```
{% get_flatpages as flatpages %}
{% get_flatpages for someuser as flatpages %}
{% get_flatpages '/about/' as about_pages %}
{% get_flatpages prefix as about_pages %}
{% get_flatpages '/about/' for someuser as about_pages %} 
```

所以，如果我想获得一个特定的页面，我需要通过它的 url 或前缀来完成，这有点粗糙，因为我的模板代码变得依赖于数据，我的意思是，如果我更改某个平面页面的 url，那么它是也有必要更改我的模板代码。

一个更灵活的想法是为每个页面添加一个标识符，可以通过例如“高级选项”部分添加，以便可以通过其标识符引用该页面，因此我们可以执行以下操作：

```
{% get_flatpages 'about' as about_pages %} 
```

哪个更灵活，数据依赖更少，无论页面有什么 url，注意我们可以在不更改模板代码的情况下更改页面的 url。

框架中有类似的东西吗？当然我可以自定义这个应用程序或使用第三方应用程序，但这不是重点;-)

你还有其他想法要处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T02:29:40.597

不，我不相信目前您在 Django 中要求的内容有任何支持。您链接到平面页面的文档说：

> 平面页面是具有 URL、标题和内容的简单对象。将它用于一次性的特殊情况页面，例如“关于”或“隐私政策”页面，您希望将其存储在数据库中，但您不想为其开发自定义 Django 应用程序。

我对此的解读是“这是我们提供的最低限度，如果你想要更多，你必须自己编写代码”。我同意您允许通过符号名称（可能默认为其 URL）引用页面的建议更灵活，但您最好[提出问题](https://code.djangoproject.com/newticket)或在[邮件列表中](http://groups.google.com/group/django-users)讨论而不是希望开发人员发生在您在 StackOverflow 上的问题上。

在短期内，您可以查看一些预先构建的类似 CMS 的 Django 应用程序。[Django-page-cms](https://github.com/batiste/django-page-cms)相对轻量级（它本身是一个相对较小的应用程序，但确实有一堆依赖项），你可以完成你所追求的：每个页面都由它的 slug（又名 url / 名称）引用，但是你可以为任意 URL 定义别名/重定向到给定页面。

# cassandra - Cassandra 将 UUID 转换为字符串并返回

> ID：14147986
> 
> 赞同：5
> 
> 时间：2013-01-03T22:02:51.473
> 
> 标签：cassandra, phpcassa

如果我使用 UUID1 作为列名，然后用 php 检索它们，我如何将该 UUID 转换为可读字符串，以便我可以将该字符串插入 HTML，然后稍后通过将该字符串转换回 UUID 来使用它来选择同一列? 这甚至可能吗？

我可以使用 UTF8 或其他东西，但我想避免冲突并获得有序的宽行，我真的需要将这些列名存储到 HTML，我看不到任何其他方式来做到这一点。

我正在使用`phpcassa`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:29:06.813

您可以将 UUID 对象转换为字符串以获得漂亮的可打印版本。可以使用相同的字符串`UUID::import()`再次创建相同的 UUID 对象：

```
use phpcassa\UUID;

$uuid = UUID::uuid1();
$pretty_uuid = (string)$uuid;
echo("Printable version: " . $pretty_uuid . "\n");
$uuid_copy = UUID::import($pretty_uuid);
assert ($uuid == $uuid_copy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:28:03.183

假设您将 UUID 作为字节 [] 获取，您可以使用如下内容：

```
 public Object convertFromNoSqlImpl(byte[] value) {
        byte[] timeArray = new byte[8];
        byte[] clockSeqAndNodeArray=new byte[8];
        System.arraycopy(value,0,timeArray,0,8);
        System.arraycopy(value,8,clockSeqAndNodeArray,0,8);
        long time = StandardConverters.convertFromBytes(Long.class, timeArray);
        long clockSeqAndNode = StandardConverters.convertFromBytes(Long.class, clockSeqAndNodeArray);
        UUID ud = new UUID(time,clockSeqAndNode);
        return ud;
    } 
```

# mongodb - Grails 2和mongodb不工作

> ID：14147989
> 
> 赞同：2
> 
> 时间：2013-01-03T22:03:05.480
> 
> 标签：mongodb, grails, runtime-error

我正在使用 Grails 2.2.0 和 MongoDB。我已将 Grails 配置为针对 MongoDB 而不是内存数据库中的默认 H2 运行。尽管我认为我删除了它，但似乎涉及到错误消息 h2。

我的 DataSource.groovy：

```
grails { 
    mongo { 
        host = "localhost" 
        port = 27017 
        databaseName = "physicians" 
    } 
} 
```

我的 BuildConfig.groovy：

```
plugins { 
   runtime ":hibernate:$grailsVersion" 
   runtime ":jquery:1.8.0" 
   runtime ":resources:1.1.6" 

   // Uncomment these (or add new ones) to enable additional resources capabilities 
   //runtime ":zipped-resources:1.0" 
   //runtime ":cached-resources:1.0" 
   //runtime ":yui-minify-resources:0.1.4" 

   build ":tomcat:$grailsVersion" 

   runtime ":database-migration:1.1" 

   compile ':cache:1.0.0' 
   compile ':mongodb:1.1.0.GA' 
} 
```

当我想保存域对象 Artist 时出现的错误是：

```
| Error 2013-01-03 22:33:18,881 [http-bio-9090-exec-1] ERROR util.JDBCExceptionReporter  - Table "ARTIST" not found; SQL statement: 
insert into artist (id, version, artist_name, birth_name) values (null, ?, ?, ?) [42102-164] 
| Error 2013-01-03 22:33:19,050 [http-bio-9090-exec-1] ERROR errors.GrailsExceptionResolver  - JdbcSQLException occurred when processing request: [GET] /musicstack/artist/ 
Table "ARTIST" not found; SQL statement: 
insert into artist (id, version, artist_name, birth_name) values (null, ?, ?, ?) [42102-164]. Stacktrace follows: 
Message: Table "ARTIST" not found; SQL statement: 
insert into artist (id, version, artist_name, birth_name) values (null, ?, ?, ?) [42102-164] 
    Line | Method 
->>  329 | getJdbcSQLException in org.h2.message.DbException 
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    169 | get                 in     '' 
|    146 | get . . . . . . . . in     '' 
|   4753 | readTableOrView     in org.h2.command.Parser 
|   4731 | readTableOrView . . in     '' 
|    954 | parseInsert         in     '' 
|    375 | parsePrepared . . . in     '' 
|    279 | parse               in     '' 
|    251 | parse . . . . . . . in     '' 
|    217 | prepareCommand      in     '' 
|    415 | prepareLocal . . .  in org.h2.engine.Session 
|    364 | prepareCommand      in     '' 
|   1121 | prepareCommand . .  in org.h2.jdbc.JdbcConnection 
|     71 | <init>              in org.h2.jdbc.JdbcPreparedStatement 
|    267 | prepareStatement .  in org.h2.jdbc.JdbcConnection 
|   1051 | prepareStatement    in     '' 
|    508 | prepareStatement .  in org.apache.commons.dbcp.DelegatingConnection 
|    400 | prepareStatement    in org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper 
|      7 | index . . . . . . . in musicstack.ArtistController 
|    195 | doFilter            in grails.plugin.cache.web.filter.PageFragmentCachingFilter 
|     63 | doFilter . . . . .  in grails.plugin.cache.web.filter.AbstractFilter 
|    886 | runTask             in java.util.concurrent.ThreadPoolExecutor$Worker 
|    908 | run . . . . . . . . in     '' 
^    680 | run                 in java.lang.Thread 
```

我在这里想念什么？

最好的问候/Lasse

=====================================

得到它的工作。

首先我必须删除线

```
runtime ":hibernate:$grailsVersion" 
```

来自 BuildConfig.groovy

当我这样做时，我得到了这个：

```
| Error Fatal error during compilation org.apache.tools.ant.BuildException: 
java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
(NOTE: Stack trace has been filtered. Use --verbose to see entire trace.) 
```

然后我删除了这条线

```
runtime ":database-migration:1.1" 
```

来自 BuildConfig.groovy

搜索解决此问题时未找到最后一部分。这是它应该做的方式吗？

/拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T01:49:21.267

要在您的项目中单独使用 mongodb gorm，您需要注释掉

```
compile ':cache:1.0.0' 
```

在您的 BuildConfig 中，因为缓存插件依赖于休眠。您可以在[源代码](https://github.com/grails-plugins/grails-cache/blob/master/grails-app/conf/BuildConfig.groovy)中找到它：

```
 plugins {
        ....
        runtime(":hibernate:$grailsVersion") {
            export = false
        }
            ....
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:13:14.347

我也必须从 application.properties 中删除 Hibernate 插件才能使其正常工作。我不确定为什么在 application.properties 中配置了休眠插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:00:22.617

你已经卸载了hibernate，所以你需要另一个关于mongodb的插件。你可以加一行

```
compile ':mongodb:1.0.0.GA' 
```

从 BuildConfig.groovy 而不是

```
runtime ":hibernate:$grailsVersion" 
```

# python - 为什么 python 需要 __init__.py 将目录视为包含包？

> ID：14147990
> 
> 赞同：3
> 
> 时间：2013-01-03T22:03:20.583
> 
> 标签：python

[在浏览python 手册](http://docs.python.org/2/tutorial/modules.html)的 6.4 Packages 部分时，我遇到了以下行：

> 需要这些`__init__.py`文件才能使 Python 将目录视为包含包；这样做是为了防止具有通用名称（例如字符串）的目录无意中隐藏了稍后出现在模块搜索路径上的有效模块。

我知道`__init__.py`将目录标记为包含包是必需的，但我不明白`prevent directories with a common name...from unintentionally hiding valid modules...`.

有人可以解释为什么`__init__.py`需要吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T22:05:35.627

假设您有一个项目，其中包含一个名为的目录`math`，其中包含一些数字数据。如果`__init__.py`不需要，那么当你这样做时`import math`，它会尝试导入该目录而不是真正的`math`模块。但是由于您的目录只包含数据而不是实际的 Python 代码，因此导入会失败。因此，即使您的目录根本不包含 Python 代码，您的`math`目录也会阻止您从标准库中导入真正的模块。`math``math`

这`__init__.py`就像一个确认，目录说“是的，我真的是一个 Python 包，而不仅仅是一个充满文件的目录。导入我是有意义的。” 任何不以这种方式“宣布”自己的目录都会被跳过，因为 Python 知道它们不能被导入。这很好，因为 Python 标准库的模块有很多通用名称（操作系统、数学、时间、符号、资源等）。如果没有这个`__init__.py`要求，您将永远无法将这些名称中的任何一个用于Python 路径上的*任何*目录——甚至无法存储与 Python 无关的数据或文件。

`string`在这种情况下，实际上并不是最好的例子。有一个名为的模块，`string`但现在它并不那么有用，因为它的大部分功能都可以作为`str`类型上的方法使用。但是，就像我提到的那样，还有许多其他具有通用名称的模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T22:06:29.707

您的源代码树中可能有一个名为 string/ 的文件夹，其中包含本地化数据，但是当您尝试`import string`在代码中不使用`__init__.py`时，Python 将尝试导入此目录而不是标准库模块。虽然在某些情况下您可能想要隐藏标准库模块，但如果您碰巧使用名称为 http/、string/、os/ 等的目录，则意外发生这种情况将是有问题的。

# c# - Selenium WebDriver：从 KendoUI DropDownList 中选择值

> ID：14147992
> 
> 赞同：2
> 
> 时间：2013-01-03T22:03:42.597
> 
> 标签：c#, selenium, kendo-ui

我无法从 Kendo 的下拉列表中选择值，这是代码（C#）：

```
var wannabeSelect = FindElement(By.Id("Type"));
wannabeSelect.SelectByValue("HouseHold"); 
```

那不是 selenium raw api，我把它包起来了。在这种情况下，FindElement() 返回一个 SelectElement，但是当我尝试选择一个值时，我的目标 Web 应用程序上没有任何反应（我没有收到任何代码异常，测试成功）。我相信 Selenium 不支持这个 Kendo UI 控件，有没有推荐的方法来处理像这样不支持的 UI 元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:44:38.860

我们使用 Selenium 的 JS 执行器实现了它：

```
ScriptExecutor.Execute(string.Format("$('#{0}').data('kendoDropDownList').value('{1}')", "Type", value)); 
```

# c++ - 将 Objective C“代码块”转换为 C++ 中的等价物

> ID：14147993
> 
> 赞同：3
> 
> 时间：2013-01-03T22:03:43.050
> 
> 标签：c++, objective-c

我需要帮助将一些 Objective C“代码块”方法转换为 C++ 中的等效方法。请指教。

A 被用作代码块...

在文件中定义`.h`..

```
typedef void (^A)(void*); //argument is ptr to B 
```

在一个`.mm`文件中使用..

```
[[hello getInstance] getB]->queueLoadImageWithBlock([self.str UTF8String], (A 
```

)^(void* img) { //一些代码...

```
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:55:53.077

最直接的比喻是`std::function`。这是一个被赋予签名的值类型（例如`std::function<int(int)>`，可以是适当签名的任何函数对象。可以在调用站点使用 lambda 代替块。

```
obj->queueLoadImageWithBlock(self.url, [](void* img)
{
    UIImage* img2 = (UIImage*)img;
    UIImageView* iv = [[UIImageView alloc] initWithImage:img2];
    iv.backgroundColor = [UIColor clearColor];
    [self.iconSlot addSubview:iv];
    iconLoaded(iv);
    [iv release];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T00:18:59.077

使用 Apple 的 clang 版本，您可以使用 C 和 C++ 以及 Objective-C 中的块。这显然是非标准的 C++，但它确实有效。

您可以在不更改被调用函数的情况下使用 C++ lambda，因为 lambda 可以分配给块（但不能反过来）。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/4148242/is-it-possible-to-convert-a-c0x-lambda-to-a-clang-block)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T22:49:44.043

只要一个块的要求是你的而不是系统的。

就像我说的，有几种方法。函数指针需要最少的样板文件，但它们需要一个额外的参数来从调用者传递上下文（`self`在你的情况下）。函子和指向成员的指针通常需要模板机制才能工作，我们不要去那里。因此，使用函数指针，它的运行方式如下：

```
//Let's define a callback datatype
typedef void (*ResourceLoadObjFuncPtr)(void *, void*);
//argument 1 is ptr to ResourceLoadDescriptor, argument 2 is iconSlot, whatever it is

//Function that implements that type:
void MyLoad(void *img, void *iconSlot)
{
    UIImage* img2 = (UIImage*)img;
    UIImageView* iv = [[UIImageView alloc] initWithImage:img2];
    iv.backgroundColor = [UIColor clearColor];
    [(TheTypeOfIconslot*)iconSlot addSubview:iv];
    iconLoaded(iv);
    [iv release];
} 
```

而且您必须修改 的原型`queueLoadImageWithBlock`以接受`ResourceLoadObjFuncPtr`参数而不是`ResourceLoadObjCBlockCB`，以及上下文的另一个参数（仅`iconSlot`在我们的例子中）。

并调用：

```
[[GameViewController getInstance] getResourceLoadMediator]->
    queueLoadImageWithFunction([self.url UTF8String], MyLoad, self.iconSlot); 
```

块是闭包——它们捕获声明它们的函数的变量。C++ 不提供 iOS 上的 GCC 支持的闭包（除了块）。因此，您必须手动将变量从函数范围传递给函数参数。在我们的例子中，如果我的假设是正确的，那么只有一个变量；在更复杂的情况下，您必须将它们包装在一个结构中并传递一个指向其中的指针。

另一种方法是使用抽象基类和通过其构造函数捕获上下文的具体实现。这将是这样的：

```
//Callback type
class ResourceLoader
{
public:
    virtual void Load(void *) = 0;
};

//A callback implementation - not a function, but a class

class MyResourceLoader : public ResourceLoader
{
    IconSlotType *iconSlot;

    void Load(void *img)
    {
        //Same loader stuff as above
    }
public:
    MyResourceLoader(IconSlotType *isl)
    :iconSlot(isl)
    {}
 }; 
```

`queueLoadImageWithBlock`等效项现在将采用类型的第二个参数，并且`ResourceLoader*`没有第三个参数。至于调用，存在回调对象生命周期的问题。是`queueLoadImageWithBlock`异步的——也就是说，它是否在调用回调之前返回？如果是这样，那么 MyResourceLoader 的本地实例将无法使用，您必须动态创建一个并以某种方式处置它。假设它是同步的（即在它返回后不调用回调）：

```
MyResourceLoader ResLoader(self.iconSlot);
[[GameViewController getInstance] getResourceLoadMediator]->
    queueLoadImageWithLoader([self.url UTF8String], &ResLoader); 
```

如果不是：

```
[[GameViewController getInstance] getResourceLoadMediator]->
    queueLoadImageWithLoader([self.url UTF8String], new MyResourceLoader(self.iconSlot)); 
```

# c++ - 在哪里可以在 C++ 中声明变量？

> ID：14147994
> 
> 赞同：2
> 
> 时间：2013-01-03T22:03:45.167
> 
> 标签：c++, c++11

我正在阅读 C++ 常见问题解答。在第 16 章，使用静态它说：

> “一个 const 静态数据成员在类中声明，通常在源文件中定义（和初始化），例如 .cpp 文件。但在某些情况下，它可以在适当的类主体中初始化。”

然后继续提到可以声明整数和非整数类型的位置（尽管我认为这在 C++11 中改变了积分）。

**我的问题是，上述内容是否仅适用于 const 静态数据成员而不适用于非 const 静态数据成员？**

我开始变得非常困惑，不明白为什么会有这些限制？volatile、mutable 和其他关键字变量是否有这些规则？有人怎么能轻松学习这个（除了 24/7 全天候编程）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T22:11:05.270

*C++ 2011 在声明*变量方面没有任何改变！但是，您可以在类定义的主体中*初始化*所有成员变量。构造对象时，类定义中声明的值是默认使用的值。但是，如果成员初始值设定项列表提及成员，则初始值设定项列表优先。

静态数据成员一般需要定义。但是，`static`成员`const`可能会在类主体中进行声明和初始化：如果成员未绑定到引用或获取其地址，则声明就足够了，您不需要提供定义。但是，如果您使用地址，它仍然需要定义。

以下是如何设置成员初始化默认值的几个示例：

```
class foo
{
private:
    int i{5};
    int j = 6;
    std::vector<int> v{ 1, 2, 3, 4 };
    std::vector<int> w = std::vector<int>(2, 10);
    std::vector<int> z = decltype(z)(2, 10);

    // ...
}; 
```

请注意，使用括号不起作用。因此，可能需要使用上述最后两种形式之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T22:07:47.207

一般的推理是，如果它需要存储，它必须在源文件中定义。如果它是静态 const 整数，则不需要存储 - 编译器可以在您使用该变量的任何地方替换一个文字整数。如果它是非静态的，则它是一个需要存储在每个对象中的成员变量。如果它是非常量的，你需要一个地方来保存更新时的值。

# php - 如何将图像路径插入数据库？

> ID：14147995
> 
> 赞同：0
> 
> 时间：2013-01-03T22:03:53.470
> 
> 标签：php

如何将图片路径存入数据库并在上传后显示？

```
<?php
$sub=0;
ini_set( "display_errors", 0);
if(isset($_REQUEST['submited'])) {
// your save code goes here

$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2097152)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "";
if (file_exists("images/" . $_FILES["file"]["name"]))
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload already exists.</b></font>";
  }

else
{
move_uploaded_file($_FILES["file"]["tmp_name"],
"images/" . $_FILES["file"]["name"]);
$sub= 1;
echo "<font size='7' color='white'><b> Success! Your photo has been uploaded.</b></font>";

}

}
}
else
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload is not an image or it exceeds 2MB in size.</b></font><br><font color='blue'><i>Only images under size of 2MB are allowed</i></font>.";
}
}

?>
<form action="" method="post" enctype="multipart/form-data">
<input type="hidden" name="submited" value="true" />

<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?> 
<label size="16" for="file">Choose Photo:</label>
<input id="shiny" type="file" name="file" onchange="file_selected = true;">
<input id="shiny" type="submit" value="Upload" name="submit">
<?php
}
?>

</form> 
```

这是数据库信息...在将图像路径插入数据库后如何显示图片？我试过`VALUES ('$_FILES["file"]["name"]')";`了，但这似乎不起作用..

```
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("simple_login", $con);

$sql="INSERT INTO photo (photo)
VALUES
('$_FILES["file"]["name"]')";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:09:31.803

```
"INSERT INTO photo (photo) VALUES ('{$_FILES["file"]["name"]}')" 
```

那应该行得通。要在字符串中使用关联数组，您必须将其包裹在大`{` `}`括号 ( ) 中。

* * *

我想说的 3 点与*具体*问题无关：

**1**：在放入数据库之前，您应该始终清理用户输入。所以你应该做的是：

```
"INSERT INTO photo (photo) VALUES ('" . mysql_real_escape_string($_FILES["file"]["name"]) . "')" 
```

或使用带有 mysqli 或 pdo 的准备好的语句。

**2**：如果你只是在数据库中存储一个文件列表，那有什么意义呢？为什么不只遍历存储它们的目录呢？

**3**：`mysql_*`功能贬值，应考虑使用[`mysqli`](http://php.net/manual/en/book.mysqli.php)或[`pdo`](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:02:41.560

我刚刚使用 Mysqli 解决了它，所以我也可以防止 sql 注入.....谢谢你们的帮助......

```
<?php
$sub=0;
ini_set( "display_errors", 0);
if(isset($_REQUEST['submited'])) {

// your save code goes here

$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 2097152)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "";
if (file_exists("images/" . $_FILES["file"]["name"]))
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload already exists.</b></font>";
  }

else
{
move_uploaded_file($_FILES["file"]["tmp_name"],
"images/" . $_FILES["file"]["name"]);
$sub= 1;
$mysqli = new mysqli("localhost", "root", "", "simple_login");

// TODO - Check that connection was successful.

$photo= $_FILES["file"]["name"];

$stmt = $mysqli->prepare("INSERT INTO photo (photo) VALUES (?)");

// TODO check that $stmt creation succeeded

// "s" means the database expects a string
$stmt->bind_param("s", $photo);

$stmt->execute();

$stmt->close();

$mysqli->close();

echo "<font size='7' color='white'><b> Success! Your photo has been uploaded.</b></font>";
}

}
}
else
{
echo "<font size='4' color='red'><b>We are sorry, the file you trying to upload is not an image or it exceeds 2MB in size.</b></font><br><font color='blue'><i>Only images under size of 2MB are allowed</i></font>.";
}
}

?>
<form action="" method="post" enctype="multipart/form-data">
<input type="hidden" name="submited" value="true" />

<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?> 
<label size="16" for="file">Choose Photo:</label>
<input id="shiny" type="file" name="file" onchange="file_selected = true;">
<input id="shiny" type="submit" value="Upload" name="submit">
<?php
}
?>

</form>
</div> 
```

# android - Apache FTPClient 在我的程序中并非无处不在

> ID：14147997
> 
> 赞同：0
> 
> 时间：2013-01-03T22:04:16.040
> 
> 标签：android, apache, ftp

我正在编写一个包含 jDroidlib 库的 Android 游戏。我想上传一个写在我的 SD 卡上的文件。我下载了适用于 Java 的 Apache FTPClient，我发现这段代码可以将其上传到我的服务器上：

```
FTPClient ftpClient = new FTPClient();
try {
    ftpClient.connect(InetAddress.getByName("server"));
    ftpClient.enterLocalPassiveMode();
    ftpClient.login("username", "password");
    ftpClient.changeWorkingDirectory("android");
    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
    BufferedInputStream buffIn=null;
    buffIn=new BufferedInputStream(new FileInputStream("storage/sdcard0/Labyrinthal Quest/Scores.txt"));
    ftpClient.enterLocalPassiveMode();
    ftpClient.storeFile("Scores.txt", buffIn);
    buffIn.close();
    ftpClient.logout();
    ftpClient.disconnect(); 
} 

catch (Exception e) {
    Context context = getApplicationContext();
    CharSequence text = "Well, that failed!";
    int duration = Toast.LENGTH_SHORT;

    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
} 
```

问题是：如果我在其中一个 jDroidLib-Activities 中运行此代码，它可以完美运行，但在正常的 Android Activity 中它不起作用（显示 Toast “嗯，失败了！”）。

我还在清单中为应用程序访问 Internet 设置了权限。

我真的不知道该怎么办。它适用于一个活动，但不适用于另一个......

我还需要设置其他设置吗？
有什么我必须设置的，因为它只能在一个特殊的子线程中执行吗？但是这段代码创建了一个子线程，不是吗：

```
FTPClient ftpClient = new FTPClient(); 
```

**- - 更新 - -**

323go 说，我可能得到了 NetworkOnMainThreadException，这一定是问题所在。网络线程必须是子级的。所以我只是用一个新线程包围了我的代码，它现在可以工作了：

```
new Thread(new Runnable() {
                public void run() {
                    FTPClient ftpClient = new FTPClient();
                     try {
                         ftpClient.connect(InetAddress.getByName("server"));
                            ftpClient.enterLocalPassiveMode();
                            ftpClient.login("username", "password");
                            ftpClient.changeWorkingDirectory("android");
                            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
                            BufferedInputStream buffIn=null;
                            buffIn=new BufferedInputStream(new FileInputStream("file directory"));
                            ftpClient.enterLocalPassiveMode();
                            ftpClient.storeFile("filename", buffIn);
                            buffIn.close();
                            ftpClient.logout();
                            ftpClient.disconnect(); 
                    } 

                     catch (Exception e) {

                         Context context = getApplicationContext();
                         CharSequence text = "wurde net hochjeladn!";
                         int duration = Toast.LENGTH_SHORT;

                         Toast toast = Toast.makeText(context, text, duration);
                         toast.show();
                    }
                }
              }).start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:30:59.083

323go 说，我可能得到了 NetworkOnMainThreadException，这一定是问题所在。网络线程必须是子级的。所以我只是用一个新线程包围了我的代码，它现在可以工作了：

```
new Thread(new Runnable() {
                public void run() {
                    FTPClient ftpClient = new FTPClient();
                     try {
                         ftpClient.connect(InetAddress.getByName("server"));
                            ftpClient.enterLocalPassiveMode();
                            ftpClient.login("username", "password");
                            ftpClient.changeWorkingDirectory("android");
                            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
                            BufferedInputStream buffIn=null;
                            buffIn=new BufferedInputStream(new FileInputStream("file directory"));
                            ftpClient.enterLocalPassiveMode();
                            ftpClient.storeFile("filename", buffIn);
                            buffIn.close();
                            ftpClient.logout();
                            ftpClient.disconnect(); 
                    } 

                     catch (Exception e) {

                         Context context = getApplicationContext();
                         CharSequence text = "wurde net hochjeladn!";
                         int duration = Toast.LENGTH_SHORT;

                         Toast toast = Toast.makeText(context, text, duration);
                         toast.show();
                    }
                }
              }).start(); 
```