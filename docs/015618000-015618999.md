# StackOverflow 问答 15618000-15618999

# ios - 如何禁用 Burstly 的控制台日志记录？

> ID：15618002
> 
> 赞同：2
> 
> 时间：2013-03-25T14:55:04.400
> 
> 标签：ios, logging, burstly

如何在 iOS 上禁用 Burstly 的（过度）垃圾邮件控制台日志记录？鉴于设备只存储前 X 行日志，并且突然填充了大约 80%，我不能总是得到我自己为其他事情添加的日志。由于我为burstly lib获得的所有内容都是二进制文件，因此我无法自己删除日志记录语句，而且我在文档中也没有看到任何关于我可以传入的标志的内容......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:47:49.773

[BurstlyAdUtils setLogLevel:BurstlyLogLevelNone];

# jquery - jQuery - 正则表达式选择和 removeClass()？

> ID：15618005
> 
> 赞同：9
> 
> 时间：2013-03-25T14:55:07.497
> 
> 标签：jquery, regex

我收到了几个自动生成的 HTML 文档，这些文档长达数千行，我需要清理源代码。主要需要删除“table-col-##”之类的类名。这是一个两步问题：

1.  选择具有 table-col-## 的所有类，其中 ## 是 0-999 之间的整数
2.  从元素中移除匹配的类，而不移除任何其他类

所以它归结为：如果可能的话，我需要一种方法在 $() 选择器中使用正则表达式，然后在 each() 中获取选定的类 - 或者将正则表达式应用于 $.removeClass()。谁能指出我正确的方向？

**更新**：是否有任何类型的 $.removeClass([selected]) 功能？这似乎是解决第二部分的最简单方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T15:10:21.850

如果只有数字是可以接受的，但也可以有其他字符，我会从这样的东西开始（未经测试，但在评论的帮助下编辑）：

```
$("[class^='table-col-']").removeClass( function() { /* Matches even table-col-row */
     var toReturn = '',
         classes = this.className.split(' ');
     for(var i = 0; i < classes.length; i++ ) {
         if( /table-col-\d{1,3}/.test( classes[i] ) ) { /* Filters */
             toReturn += classes[i] +' ';
         }
     }
     return toReturn ; /* Returns all classes to be removed */
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-01T16:41:53.203

您可以这样做，而无需将类名拆分为数组。让正则表达式完成所有工作。

对于找到的每个元素，删除与正则表达式匹配的所有类。

```
$("[class^='table-col-']").removeClass( function() {
    return (this.className.match(/\b(table-col-\d{1,3})\b/g) || []).join(' ');
})
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T15:32:23.937

# 试试这个：

**[http://jsfiddle.net/aidioo7/AmK4a/1/](http://jsfiddle.net/adiioo7/AmK4a/1/)**

JS：-

```
$(function () {
    $("div").filter(function() {
        return this.className.match(/table-col-\d{0,3}/);
    }).each(function(){
        var classToRemove=this.className.match(/table-col-\d{0,2}/)[0];
        $(this).removeClass(classToRemove);
    });
}); 
```

示例 HTML：-

```
<div class="table-col-0 temp">Test0</div>
<div class="table-col-99">Test99</div>
<div class="table-col-999">Test999</div> 
```

输出 HTML：-

```
<div class="temp">Test0</div>
<div class="">Test99</div>
<div class="table-col-999">Test999</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-27T17:16:54.100

尝试这个：

```
$.fn.removeClassRegExp = function (regexp) {
    if(regexp && (typeof regexp==='string' || typeof regexp==='object')) {
        regexp = typeof regexp === 'string' ? regexp = new RegExp(regexp) : regexp;
        $(this).each(function () {
            $(this).removeClass(function(i,c) { 
                var classes = [];
                $.each(c.split(' '), function(i,c) {
                    if(regexp.test(c)) { classes.push(c); }
                });
                return classes.join(' ');
            });
        });
    }
    return this;
}; 
```

直播：http: [//jsfiddle.net/Z3D6P/](http://jsfiddle.net/Z3D6P/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T21:59:45.920

这个问题现在很老了，但如果其他人遇到它......

我创建了一个简单的插件[jquery.classMatch](https://github.com/ronen/jquery.classMatch)它提供

```
$(selector).hasClassMatch(regexp)
$(selector).removeClassMatch(regexp) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T15:03:44.403

try

```
var className = 'table-col-';
$('[class^='+className+']').removeClass(function(index, class) {
    return class.indexOf(className) == 0;
}); 
```

see [http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/) and [http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

**edited:**

```
var className = 'table-col-';
$('[class^='+className+']').removeClass(function(index, c) {
    var elem = $(this);
    $(c.split(' ')).each(function() {
        var c = this.trim();
        if(this.indexOf(className)==0) {
            elem.removeClass(c);
        }
    });
}); 
```

# c - Openmp 并行部分与并行部分

> ID：15618008
> 
> 赞同：4
> 
> 时间：2013-03-25T14:55:21.577
> 
> 标签：c, parallel-processing, openmp

我有这两段代码

```
#pragma omp parallel
#pragma omp sections
  {
#pragma omp section
    printf("H");
#pragma omp section
    printf("e");
#pragma omp section
    printf("l");
#pragma omp section
    printf("l");
#pragma omp section
    printf("o");
#pragma omp section
    printf(" ");
#pragma omp section
    printf("W");
#pragma omp section
    printf("o");
#pragma omp section
    printf("r");
#pragma omp section
    printf("l");
#pragma omp section
    printf("d");
#pragma omp section
    printf("!");
  } 
```

和

```
char word[] = "Hello World!";
int n;

#pragma omp parallel for
  for(n=0; n<12; n++)
  {
  printf("%c", word[n]);
  } 
```

而第一个总是打印`Hello World!`第二个有时打印`Hello World!`有时打印`Helld!lo Wor`

为什么第一个看起来是确定性的，而另一个却不是？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T15:43:52.233

首先，官方的 GCC 4.1.2*不*支持 OpenMP。可能您有一个源自 RedHat 的 Linux 发行版（RHEL、Fedora、CentOS、Scientific Linux 等），它具有从某个较新版本向后移植到 GCC 4.1.2 的 OpenMP 支持。RH 曾经维护该反向移植很长一段时间，直到他们最终切换到更新的 GCC 版本。

写入共享流会导致 OpenMP 部分和并行循环中的行为不确定。您在此处观察到的是`sections`GCC 中实现的动态调度性质的结果。`libgomp`（GCC OpenMP 运行时）在团队中的线程之间以先到先得的方式分配部分。在您的情况下可能发生的情况是，部分的大小非常短，因此执行时间非常短，以至于在并行区域开始时退出停靠屏障的第一个线程在其他线程甚至赶上之前消耗了所有工作项，导致在所有部分的串行执行中。

至于并行`for`循环，您观察到的是默认循环调度的结果`libgomp`，`static`即 12 次迭代以线性方式平均分配给线程。我猜你的情况有 6 个线程（基于加扰输出中的文本段），所以线程 0 的迭代从 0 到 1，线程 1 的迭代从 2 到 3，依此类推。同样，每个线程中迭代的执行都非常明确，但不能保证线程本身执行的顺序。

请注意，此行为非常特定于 GCC。OpenMP 标准说：

> 在团队中的线程之间调度结构化块的方法是实现定义的。

例如，英特尔的编译器以循环方式分配这些部分，即，将部分`n`分配给线程`n % num_threads`，这很像`for`具有静态调度和块大小为 1 的并行循环所做的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T09:23:43.833

如果您希望 for 循环执行相同的操作，请在您的 for 循环中使用“ordered”，如下所示：

```
#pragma omp parallel for ordered 
for(n=0; n<12; n++) {
    #pragma omp ordered
    printf("%c", word[n]);
} 
```

见这个例子： [http ://bisqwit.iki.fi/story/howto/openmp/#ExampleCalculatingTheMandelbrotFractalInParallel](http://bisqwit.iki.fi/story/howto/openmp/#ExampleCalculatingTheMandelbrotFractalInParallel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T15:11:32.203

`omp parallel for`不是确定性的。您应该使用此子句来实现算法，这些算法在数组中具有**独立的数据。**如果要打印一些文本，则字母应按顺序一个接一个，但`omp parallel for`以随机顺序执行代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T22:55:59.537

部分不是确定性的，并行 fors 也不是。[这里](http://www.openmp.org/mp-documents/OpenMP3.1.pdf)的 OpenMP 规范 没有说明部分是确定性的。

我用 2 个线程运行了你的部分代码并得到了`Hllo World!e`

您的代码按顺序生成字母只是偶然的。

# ajax - 使用 Ajax 的 Spring 安全性——记录的用户详细信息

> ID：15618010
> 
> 赞同：1
> 
> 时间：2013-03-25T14:55:35.067
> 
> 标签：ajax, spring-security, user-data, logged

我已经使用 AuthenticationEntryPoint 和 SimpleUrlAuthenticationSuccessHandler 通过 Ajax 实现了用户身份验证。

现在我需要将登录的用户名输入到我的脚本变量中。

谁能帮我解决这个问题？

**MyAuthenticationSuccessHandler**

```
public class MyAuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {

    private Log log = LogFactory.getLog(MyAuthenticationSuccessHandler.class);

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
            Authentication authentication) throws IOException, ServletException {

        log.info("point-2-->"+authentication.getName()); //this prints what I need.

        // This is actually not an error, but an OK message. It is sent to avoid redirects.
        response.sendError(HttpServletResponse.SC_OK);

    }
} 
```

**我的 JavaScript 函数**

```
$("#login").on('click', function(e) {
        e.preventDefault();
        $.ajax({url: getHost() + "/j_spring_security_check",
            type: "POST",
            beforeSend: function(xhr) {
                xhr.withCredentials = true;
            },
            data: $("#loginForm").serialize(),
            success: function(response, options) {
                    // We get a success from the server
                    //I need to get user name here
            },
            error: function(result, options) {
                    // We get a failure from the server...
                $(".error").remove();
                $('#j_username').before('<div class="error">Login failed, please try again.</div>');
        }

        });
    }); 
```

我已经为不同的问题附上了所有相关文件。请访问下面的链接进行检查。

[弹簧安全；自定义过滤器和用户服务引用不一起工作](https://stackoverflow.com/questions/15349507/spring-security-custom-filter-and-user-service-ref-not-working-together)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:30:18.110

我找到了解决方案。

只需我进行了另一个 Ajax 调用，我就捕获了登录用户。

**我的 JavaScript 函数**

```
success: function(response, options) {
                    // We get a success from the server
                    //I need to get user name here

    $.post('/api/loggeduser', function(data) {
           $('#loggeduser').html(data);
        }); 
}, 
```

**登录用户控制器**

```
@RequestMapping(value = "/api/loggeduser", method = RequestMethod.POST)
       public String printWelcome(ModelMap model, Principal principal ) {

        try {

            String name = null;

            if (principal!=null) {

           name = principal.getName();

          }

                model.addAttribute("username", name);

    } catch (Exception e) {
        e.printStackTrace();
    }
  } 
```

# ios - iOS：使用 AFNetworking 上传 ZIP 文件

> ID：15618011
> 
> 赞同：0
> 
> 时间：2013-03-25T14:55:36.993
> 
> 标签：ios, nsurlconnection, afnetworking

我必须将 ZIP 文件上传到服务器，我正在使用以下代码：

```
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:methode parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"data.xml"];

        ZipArchive  *zip1 = [[ZipArchive alloc] init];
        BOOL ret = [zip1 CreateZipFile2:[documentsDirectory stringByAppendingPathComponent:@"data.zip"]];

        ret = [zip1 addFileToZip:databasePath newname:@"data.xml"];

        [formData appendPartWithFileData:[NSData dataWithContentsOfFile:[documentsDirectory stringByAppendingPathComponent:@"data.zip"]]
                                    name:@"FILE"
                                fileName:@"data.zip"
                                mimeType:@"application/zip"];
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
 [operation start]; 
```

ZIP 文件很好。请求很好。但服务器响应显示文件在传输途中已损坏。服务器只接收 855 字节的 ZIP 文件，而不是 931 字节。

服务器管理员告诉我（没有 iOS 经验）我必须设置正确的上传类型（就像在 HTML 中一样）：

```
enctype="multipart/form-data" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:52:31.297

在尝试将其附加到请求之前，您不应该关闭 zip 文件的句柄吗？您无法确定它是否已完全写入存储，因此您可能会遇到这种行为。

```
[zip1 CloseZipFile2]; 
```

# spring-mvc - Java web applcation - 从代码中访问war文件

> ID：15618013
> 
> 赞同：0
> 
> 时间：2013-03-25T14:55:44.020
> 
> 标签：spring-mvc

我正在使用 Spring MVC 为一项服务开发简单的 REST 接口。

作为其中一种方法返回对象的 xml 表示，我决定使用它`JAXB`来将我的类映射到 xml 文件。

我注释了我的类，但我发现为了进行任何验证，我需要将模式传递给我的编组器对象。

因为我们使用`maven`的是 bulding，所以我将`JAXB`插件添加到我的`pom.xml`. 我可以看到架构文件是在构建阶段生成的，但现在我在运行时读取这些文件时遇到了问题。

因为我计划在我的应用程序中只有一个控制器，所以我想在 Spring Framework 创建控制器时加载模式文件。

我尝试使用`context.getResourceAsStream("schema.xsd");`但没有运气，我得到了`null`返回值。

我的架构文件正在部署到

```
<outputDirectory>${project.build.directory}/Open311/WEB-INF/classes</outputDirectory> 
```

Spring 框架是否提供了在启动时读取一些静态文件的任何替代方法，以便我可以从我的代码中以某种方式访问​​它们？

另外我想指出，我`Tomcat`从 Eclipse 级别的服务器视图进行部署，也许这也很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:13:26.157

看到这个问题：

[Spring 3.0 将文件作为资源注入](https://stackoverflow.com/questions/7484594/spring-3-0-inject-files-as-resources)

还有这个：

[将文件资源注入 Spring bean](https://stackoverflow.com/questions/7280115/inject-a-file-resource-into-spring-bean?rq=1)

它描述了如何注入一个`Resource`.

如果这不起作用，请打开 Eclpse 的 Navigator 视图并确保 XSD 文件实际上位于 classes 目录中。如果没有，您可能需要进行`clean`构建。

# sql - 如何从视图中取回列名但将名称更改为这些列？

> ID：15618014
> 
> 赞同：0
> 
> 时间：2013-03-25T14:55:46.237
> 
> 标签：sql, sql-server, views

您好我目前正在使用以下查询从我的视图中恢复列名：

```
 select column_name as Description, column_name as Value
 from INFORMATION_SCHEMA.COLUMNS
 where TABLE_NAME = 'vw_document_main' 
```

这将从我的表中返回所有列名，但是例如我希望 system_status 读取为系统状态，我如何在不实际更新视图本身的情况下实现这一点？

我假设我可以在某处使用 AS 子句，只是不确定在哪里。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:58:02.530

如果您想在列名上有空格，请用括号括起来来分隔它，例如

```
SELECT system_status AS [System Status], ... 
```

# php - 以编程方式创建订单时库存不会减少

> ID：15618015
> 
> 赞同：1
> 
> 时间：2013-03-25T14:55:55.733
> 
> 标签：php, magento, stock

我有一个与来宾客户一起创建订单的脚本（请参阅下面的代码）。此脚本工作正常，但不会减少创建订单中产品集的库存。

任何解释或解决方案？

谢谢

```
private $_storeId = '1';
public function create($customerInfos, $orderInfos, $itemsInfos) {
    $quote = Mage::getModel ( 'sales/quote' );

    // adding guest customer
    $quote->setIsMultiShipping ( false );
    $quote->setCheckoutMethod ( 'guest' );
    $quote->setCustomerId ( null );
    $quote->setCustomerEmail ( $customerInfos ['email'] );
    $quote->setCustomerIsGuest ( true );
    $quote->setCustomerGroupId ( Mage_Customer_Model_Group::NOT_LOGGED_IN_ID );
    $quote->setStoreId ( $this->_storeId );

    // adding addresses
    $quote->getBillingAddress ()->addData ( $customerInfos ['address'] );
    $quote->getBillingAddress ()->implodeStreetAddress ();
    $quote->getShippingAddress ()->addData ( $customerInfos ['address'] );
    $quote->getShippingAddress ()->implodeStreetAddress ();

    $shippingCost = 0;
    foreach ( $itemsInfos as $item ) {
        $shippingCost += $item ['shippingAmount'];
    }

    $quote->getShippingAddress ()->setShippingMethod ( $orderInfos ['shippingMethod'] );
    $quote->getShippingAddress ()->collectShippingRates ();
    $quote->getShippingAddress ()->removeAllShippingRates ();

    $rate = $this->createShippingRate($orderInfos ['shippingMethod']) ->setMethodTitle($orderInfos['marketPlace'])->setPrice($shippingCost);    

    $quote->getShippingAddress ()->addShippingRate($rate)
    ->setShippingMethod($orderInfos ['shippingMethod'])
    ->setShippingDescription($orderInfos['marketPlace']);
    $quote->reserveOrderId ();

    // adding products
    $productModel = Mage::getModel ( 'catalog/product' );
    foreach ( $itemsInfos as $item ) {
        $productId = $productModel->getIdBySku ( $item ['sku'] );
        $product = Mage::getModel ( 'catalog/product' )->load ( $productId );
        // changing price of my product
        $unitPrice = $item ['priceAmount'] / $item ['qtyOrdered'];
        $product->setData ( 'price', $unitPrice );

        $buyInfo = array ('qty' => $item ['qtyOrdered'] );
        $quote->addProduct ( $product, new Varien_Object ( $buyInfo ) );
    }

    $quote->collectTotals ();
    $quote->save ();

    //adding payment infos
    $quotePayment = $quote->getPayment ();
    $quotePayment->setMethod ( $orderInfos ['paymentMethod'] );
    $quote->setPayment ( $quotePayment );

    $convertQuote = Mage::getSingleton ( 'sales/convert_quote' );
    $order = $convertQuote->addressToOrder ( $quote->getShippingAddress () );
    $order->setStoreId ( $this->_storeId );
    $orderPayment = $convertQuote->paymentToOrderPayment ( $quotePayment );

    $order->setBillingAddress ( $convertQuote->addressToOrderAddress ( $quote->getBillingAddress () ) );
    $order->setShippingAddress ( $convertQuote->addressToOrderAddress ( $quote->getShippingAddress () ) );
    $order->setPayment ( $convertQuote->paymentToOrderPayment ( $quote->getPayment () ) );

    foreach ( $quote->getAllItems () as $item ) {
        $orderItem = $convertQuote->itemToOrderItem ( $item );
        if ($item->getParentItem ()) {
            $orderItem->setParentItem ( $order->getItemByQuoteItemId ( $item->getParentItem ()->getId () ) );
        }
        $order->addItem ( $orderItem );
    }

    $order->setCanShipPartiallyItem ( false );
    $order->setAtMkOrderName($orderInfos['marketPlace']);
    $order->setAtMkOrderId($orderInfos['marketPlaceOrderId']);

    $totalDue = $order->getTotalDue ();
    $order->place ();
    $order->save ();
    $order->setState(Mage_Sales_Model_Order::STATE_PROCESSING, true)->save();
    $orderId = $order->getId ();

    return $orderId;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:09:20.837

你应该尝试添加

```
Mage::getSingleton('cataloginventory/stock')->registerItemSale($orderItem) 
```

后

```
$order->addItem ( $orderItem ); 
```

# linux - 终端命令 - 递归遍历文件夹，在应用程序中打开所有 *.php，例如 Dreamweaver

> ID：15618018
> 
> 赞同：0
> 
> 时间：2013-03-25T14:55:57.130
> 
> 标签：linux, terminal

标题说明了一切。我想获取给定文件夹（和子文件夹）中的所有 php 文件，然后在 Dreamweaver 中打开所有这些文件。

我觉得我需要使用 find 命令并打开和循环它。抱歉，还在学习linux命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:28:23.507

您可以在 Mac 或 Linux 中执行此操作

```
find . -type f -name "*.php" -exec PATH_TO_APP {} + 
```

# c++ - 使用 GL_TRIANGLE_STRIP 或索引 GL_TRIANGLES 绘制动态数量的四边形是否更有效

> ID：15618019
> 
> 赞同：7
> 
> 时间：2013-03-25T14:55:57.837
> 
> 标签：c++, opengl, sdl, gl-triangle-strip

我正在用 C++ 开发一个简单的基于 sprite 的 2D 游戏，它使用 OpenGL 进行硬件加速渲染，使用 SDL 进行窗口管理和用户输入处理。由于它是 2D 游戏，我只需要绘制四边形，但由于精灵的数量是动态的，所以我永远不能依赖于恒定数量的四边形。因此，我需要通过我的 VBO 每帧重新缓冲所有顶点数据（因为可能有比上一帧更多或更少的四边形，因此缓冲区的大小可能不同）。

到目前为止，我的原型程序创建了一个窗口，并允许用户使用向上和向下箭头键在对角线行中添加和删除四边形。现在我正在绘制的四边形是简单的、无纹理的白色方块。这是我正在使用的代码（在 OS X 10.6.8 和带有 OpenGL 2.1 的 Ubuntu 12.04 下编译并正常工作）：

```
#if defined(__APPLE__)
    #include <OpenGL/OpenGL.h>
#endif
#if defined(__linux__)
    #define GL_GLEXT_PROTOTYPES
    #include <GL/glx.h>
#endif

#include <GL/gl.h>
#include <SDL.h>
#include <iostream>
#include <vector>
#include <string>

struct Vertex
{   
    //vertex coordinates
    GLint x;
    GLint y;
};

//Constants
const int SCREEN_WIDTH = 1024;
const int SCREEN_HEIGHT = 768;
const int FPS = 60; //our framerate
//Globals
SDL_Surface *screen;                    //the screen
std::vector<Vertex> vertices;           //the actual vertices for the quads
std::vector<GLint> startingElements;    //the index where the 4 vertices of each quad begin in the 'vertices' vector
std::vector<GLint> counts;              //the number of vertices for each quad
GLuint VBO = 0;                         //the handle to the vertex buffer

void createVertex(GLint x, GLint y)
{
    Vertex vertex;
    vertex.x = x;
    vertex.y = y;
    vertices.push_back(vertex);
}

//creates a quad at position x,y, with a width of w and a height of h (in pixels)
void createQuad(GLint x, GLint y, GLint w, GLint h)
{
    //Since we're drawing the quads using GL_TRIANGLE_STRIP, the vertex drawing
    //order is from top to bottom, left to right, like so:
    //
    //    1-----3
    //    |     |
    //    |     |
    //    2-----4

    createVertex(x, y);     //top-left vertex
    createVertex(x, y+h);   //bottom-left vertex
    createVertex(x+w, y);   //top-right vertex
    createVertex(x+w, y+h); //bottom-right vertex

    counts.push_back(4);    //each quad will always have exactly 4 vertices
    startingElements.push_back(startingElements.size()*4);

    std::cout << "Number of Quads: " << counts.size() << std::endl; //print out the current number of quads
}

//removes the most recently created quad
void removeQuad()
{
    if (counts.size() > 0)  //we don't want to remove a quad if there aren't any to remove
    {
        for (int i=0; i<4; i++)
        {
            vertices.pop_back();
        }

        startingElements.pop_back();
        counts.pop_back();

        std::cout << "Number of Quads: " << counts.size() << std::endl;
    }
    else
    {
        std::cout << "Sorry, you can't remove a quad if there are no quads to remove!" << std::endl;
    }
}

void init()
{
    //initialize SDL
    SDL_Init(SDL_INIT_VIDEO | SDL_INIT_TIMER);

    screen = SDL_SetVideoMode(SCREEN_WIDTH, SCREEN_HEIGHT, 0, SDL_OPENGL);

#if defined(__APPLE__)
    //Enable vsync so that we don't get tearing when rendering
    GLint swapInterval = 1;
    CGLSetParameter(CGLGetCurrentContext(), kCGLCPSwapInterval, &swapInterval);
#endif

    //Disable depth testing, lighting, and dithering, since we're going to be doing 2D rendering only
    glDisable(GL_DEPTH_TEST);
    glDisable(GL_LIGHTING);
    glDisable(GL_DITHER);
    glPushAttrib(GL_DEPTH_BUFFER_BIT | GL_LIGHTING_BIT);

    //Set the projection matrix
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, SCREEN_WIDTH, SCREEN_HEIGHT, 0, -1.0, 1.0);

    //Set the modelview matrix
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    //Create VBO
    glGenBuffers(1, &VBO);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
}

void gameLoop()
{   
    int frameDuration = 1000/FPS;   //the set duration (in milliseconds) of a single frame      
    int currentTicks;       
    int pastTicks = SDL_GetTicks();
    bool done = false;  
    SDL_Event event;

    while(!done)
    {   
        //handle user input
        while(SDL_PollEvent(&event))
        {
            switch(event.type)
            {
                case SDL_KEYDOWN:
                    switch (event.key.keysym.sym)
                    {
                        case SDLK_UP:   //create a new quad every time the up arrow key is pressed
                            createQuad(64*counts.size(), 64*counts.size(), 64, 64);
                            break;
                        case SDLK_DOWN: //remove the most recently created quad every time the down arrow key is pressed
                            removeQuad();
                            break;
                        default:
                            break;
                    }
                    break;
                case SDL_QUIT:
                    done = true;
                    break;
                default:
                    break;
            }           
        }

        //Clear the color buffer
        glClear(GL_COLOR_BUFFER_BIT);

        glBindBuffer(GL_ARRAY_BUFFER, VBO);
        //replace the current contents of the VBO with a completely new set of data (possibly including either more or fewer quads)
        glBufferData(GL_ARRAY_BUFFER, vertices.size()*sizeof(Vertex), &vertices.front(), GL_DYNAMIC_DRAW);

        glEnableClientState(GL_VERTEX_ARRAY);

            //Set vertex data
            glVertexPointer(2, GL_INT, sizeof(Vertex), 0);
            //Draw the quads
            glMultiDrawArrays(GL_TRIANGLE_STRIP, &startingElements.front(), &counts.front(), counts.size());

        glDisableClientState(GL_VERTEX_ARRAY);

        glBindBuffer(GL_ARRAY_BUFFER, 0);

        //Check to see if we need to delay the duration of the current frame to match the set framerate
        currentTicks = SDL_GetTicks();
        int currentDuration = (currentTicks - pastTicks);   //the duration of the frame so far
        if (currentDuration < frameDuration)
        {
            SDL_Delay(frameDuration - currentDuration);
        }
        pastTicks = SDL_GetTicks();

        // flip the buffers
        SDL_GL_SwapBuffers();
    }
}

void cleanUp()
{   
    glDeleteBuffers(1, &VBO);

    SDL_FreeSurface(screen);
    SDL_Quit();
}

int main(int argc, char *argv[])
{
    std::cout << "To create a quad, press the up arrow. To remove the most recently created quad, press the down arrow." << std::endl;

    init();
    gameLoop();
    cleanUp();

    return 0;
} 
```

目前我正在使用 GL_TRIANGLE_STRIPS 和 glMultiDrawArrays() 来渲染我的四边形。这很有效，而且在性能方面似乎相当不错，但我想知道是否将 GL_TRIANGLES 与 IBO 结合使用以避免重复顶点是一种更有效的渲染方式？我做了一些研究，有些人认为索引 GL_TRIANGLES 通常优于 GL_TRIANGLE_STRIPS，但他们似乎也假设四边形的数量将保持不变，因此 VBO 和 IBO 的大小不必每帧都重新缓冲. 这是我对索引 GL_TRIANGLES 最大的犹豫：如果我确实实现了索引 GL_TRIANGLES，除了每帧重新缓冲整个 VBO 之外，我还必须重新缓冲每个帧的整个索引缓冲区，这也是因为四边形的动态数量。

所以基本上，我的问题是：鉴于由于四边形的动态数量，我必须在每帧将所有顶点数据重新缓冲到 GPU，切换到索引 GL_TRIANGLES 来绘制四边形会更有效吗？坚持我目前的 GL_TRIANGLE_STRIP 实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:17:17.587

`GL_QUADS`使用未索引的/`GL_TRIANGLES`和`glDrawArrays()`调用可能会很好。

* * *

```
SDL_Surface *screen; 
...
screen = SDL_SetVideoMode(SCREEN_WIDTH, SCREEN_HEIGHT, 0, SDL_OPENGL);
...
SDL_FreeSurface(screen); 
```

[不要那样做](http://www.libsdl.org/cgi/docwiki.fcg/SDL_SetVideoMode#line-54)：

> 返回的表面由调用者释放，`SDL_Quit`并且**不能由调用者释放**。此规则还包括对（即调整大小或分辨率更改）的连续调用，`SDL_SetVideoMode`因为现有表面将自动释放。

* * *

**编辑：**简单的顶点数组演示：

```
// g++ main.cpp -lglut -lGL
#include <GL/glut.h>
#include <vector>
using namespace std;

// OpenGL Mathematics (GLM): http://glm.g-truc.net/
#include <glm/glm.hpp>
#include <glm/gtc/random.hpp>
using namespace glm;

struct SpriteWrangler
{
    SpriteWrangler( unsigned int aSpriteCount )
    {
        verts.resize( aSpriteCount * 6 );
        states.resize( aSpriteCount );

        for( size_t i = 0; i < states.size(); ++i )
        {
            states[i].pos = linearRand( vec2( -400, -400 ), vec2( 400, 400 ) );
            states[i].vel = linearRand( vec2( -30, -30 ), vec2( 30, 30 ) );

            Vertex vert;
            vert.r = (unsigned char)linearRand( 64.0f, 255.0f );
            vert.g = (unsigned char)linearRand( 64.0f, 255.0f );
            vert.b = (unsigned char)linearRand( 64.0f, 255.0f );
            vert.a = 255;
            verts[i*6 + 0] = verts[i*6 + 1] = verts[i*6 + 2] =
            verts[i*6 + 3] = verts[i*6 + 4] = verts[i*6 + 5] = vert;
        }
    }

    void wrap( const float minVal, float& val, const float maxVal )
    {
        if( val < minVal )
            val = maxVal - fmod( maxVal - val, maxVal - minVal );
        else
            val = minVal + fmod( val - minVal, maxVal - minVal );
    }

    void Update( float dt )
    {
        for( size_t i = 0; i < states.size(); ++i )
        {
            states[i].pos += states[i].vel * dt;
            wrap( -400.0f, states[i].pos.x, 400.0f );
            wrap( -400.0f, states[i].pos.y, 400.0f );

            float size = 20.0f;
            verts[i*6 + 0].pos = states[i].pos + vec2( -size, -size );
            verts[i*6 + 1].pos = states[i].pos + vec2(  size, -size );
            verts[i*6 + 2].pos = states[i].pos + vec2(  size,  size );
            verts[i*6 + 3].pos = states[i].pos + vec2(  size,  size );
            verts[i*6 + 4].pos = states[i].pos + vec2( -size,  size );
            verts[i*6 + 5].pos = states[i].pos + vec2( -size, -size );
        }
    }

    struct Vertex
    {
        vec2 pos;
        unsigned char r, g, b, a;
    };

    struct State
    {
        vec2 pos;
        vec2 vel;       // units per second
    };

    vector< Vertex > verts;
    vector< State > states;
};

void display()
{
    // timekeeping
    static int prvTime = glutGet(GLUT_ELAPSED_TIME);
    const int curTime = glutGet(GLUT_ELAPSED_TIME);
    const float dt = ( curTime - prvTime ) / 1000.0f;
    prvTime = curTime;

    // sprite updates
    static SpriteWrangler wrangler( 2000 );
    wrangler.Update( dt );
    vector< SpriteWrangler::Vertex >& verts = wrangler.verts;

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    // set up projection and camera
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    double ar = w / h;
    glOrtho( -400 * ar, 400 * ar, -400, 400, -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glEnableClientState( GL_VERTEX_ARRAY );
    glEnableClientState( GL_COLOR_ARRAY );

    glVertexPointer( 2, GL_FLOAT, sizeof( SpriteWrangler::Vertex ), &verts[0].pos.x );
    glColorPointer( 4, GL_UNSIGNED_BYTE, sizeof( SpriteWrangler::Vertex ), &verts[0].r );
    glDrawArrays( GL_TRIANGLES, 0, verts.size() );

    glDisableClientState( GL_VERTEX_ARRAY );
    glDisableClientState( GL_COLOR_ARRAY );

    glutSwapBuffers();
}

// run display() every 16ms or so
void timer( int extra )
{
    glutTimerFunc( 16, timer, 0 );
    glutPostRedisplay();
}

int main(int argc, char **argv)
{
    glutInit( &argc, argv );
    glutInitWindowSize( 600, 600 );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE );
    glutCreateWindow( "Sprites" );

    glutDisplayFunc( display );
    glutTimerFunc( 0, timer, 0 );
    glutMainLoop();
    return 0;
} 
```

仅使用顶点数组即可获得不错的性能。

理想情况下，您的大多数/所有`dt`s 应该 <= 16 毫秒。

# php - 我可以像使用 Java 中的 .properties 文件一样在 PHP 中读取和写入 ini 文件中的键/值吗？

> ID：15618020
> 
> 赞同：1
> 
> 时间：2013-03-25T14:55:59.850
> 
> 标签：php, ini

```
 Properties prop = new Properties();
    prop.load(new FileInputStream("my.properties"));
    prop.setProperty("name", "my name");
    prop.getProperty("name"); 
```

在 Java 中设置和获取属性看起来很简单。我在 PHP 中搜索了相同的内容，但没有找到与此相关的任何有用信息。

我在某处读过

> PHP 可以使用 .ini 本地加载和解析 .ini 文件`parse_ini_file()`。

由于我刚开始学习 PHP，我找不到任何可以像在 Java 中使用 .properties 文件那样简单地从 .ini 文件中读取写入键/值对的代码。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T16:14:20.457

尝试这个 ...

php 中的 ini 文件包含您的配置.....

示例文件 ini 看起来像 .

```
 [first_section]
    db = testdb
    host = myhost

    [second_section]
    path = "/usr/local/bin"
    URL = "http://www.example.com/~username" 
```

现在您可以通过以下方式获取此文件的内容

```
 <?php
      $config_array  = parse_ini_file('sample.ini');
      echo "<pre>";
      print_r($config_array);
      echo "</pre>";
      ?> 
```

输出将类似于

```
Array
 (
[db] => testdb
[host] => myhost
[path] => /usr/local/bin
[URL] => http://www.example.com/~username
) 
```

您还可以通过在 parse_ini_file 中将第二个参数作为“TRUE”传递来获取部分名称

```
$config_array  = parse_ini_file('sample.ini',true); 
```

那么输出将是

```
 Array
 (
   [first_section] => Array
    (
        [db] => testdb
        [host] => myhost
    )

   [second_section] => Array
      (
        [path] => /usr/local/bin
        [URL] => http://www.example.com/~username
    )

) 
```

您还可以按照 kingkero 的建议将配置保存在数组中，以便在后期使用...

在这里阅读更多[http://www.php.net/manual/en/function.parse-ini-file.php#78221](http://www.php.net/manual/en/function.parse-ini-file.php#78221)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:10:21.757

在 PHP 中，我认为使用返回带有配置的数组的文件更为常见（参见[php.net/include](http://php.net/manual/en/function.include.php#example-130)）

配置文件

```
<?php
return array(
    'key1' => 'val1',
    //etc.
); 
```

其他文件：

```
<?php
$config = include 'config.php'; 
```

# protege - Protege 3.2 RDF 文件

> ID：15618021
> 
> 赞同：0
> 
> 时间：2013-03-25T14:56:09.990
> 
> 标签：protege

我下载 Protege 3.2 只是为了能够在 RDF 文件上运行 Sparql 查询，现在 Protege 3.2 没有加载 rdf 文件。当我尝试打开现有文件时，它说支持 .pprj、.owl 文件但不支持 rdf，有什么建议吗？

**我的问题是我下载 Protege 3.2 只是为了运行有一个好的 IDE 来运行 sparql 但我没有看到其中的界面** ![在此处输入图像描述](../Images/6f14c156c8592bc30751cc7d03ed631f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:12:55.373

Protégé 首先是一个本体编辑器。它适用于 Protégé 项目文件和 OWL 本体文件。

如果您的 RDF 文件包含 OWL 本体，您可以将文件的扩展名更改为*.owl*，它将在*Open Project*对话框中可见。

# android - 如何在 PhoneGap 中加载动态内容？

> ID：15618029
> 
> 赞同：2
> 
> 时间：2013-03-25T14:56:42.783
> 
> 标签：android, ios, cordova, dynamic

我希望使用 PhoneGap 作为我将为 iOS 和 Android 开发的应用程序的框架。

客户端的 CMS 已经配备了 Web 服务，允许我们生成包含内容的干净 HTML 页面。（文字和图像）

我们的目标是允许客户使用他的 CMS 更新他的应用程序。我们认为最好的方法是加载由我们的 CMS Web 服务生成的 HTML 并将其注入指定的 PhoneGap 页面。这将允许客户拥有一个动态应用程序，他可以通过他的 CMS 管理某些页面。

我已阅读 Apple 不接受使用 Web 视图，因此请考虑我们显然希望该应用程序在您的回复中获得批准。

我们将如何获得一个 Web 服务来将动态内容加载到 PhoneGap 应用程序并获得 Apple 的批准？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:48:27.460

加载整个 HTML 页面不是明智之举。最好让 web 服务输出 JSON，然后您可以使用您的应用程序读取。Phonegap 是基于 html 的，因此您可以从 json 构建 DOM。

如果你想在服务器上生成一个完整的 HTML 页面，那么你可以将服务的结果添加到你的 DOM 中。

# python - Gtk.ScrolledWindow 没有水平滚动条

> ID：15618030
> 
> 赞同：3
> 
> 时间：2013-03-25T14:56:43.917
> 
> 标签：python, gtk3, pygobject, scrolledwindow

使用 Python 和 Gtk3，我创建了一个`Gtk.TreeView`并将其放在一个`Gtk.ScrolledWindow`. 我不喜欢水平滚动条，所以我使用 删除了它`Gtk.PolicyType.NEVER`，但现在我无法在那个方向调整窗口大小。

所以问题是：我怎样才能驾驭水平滚动条，同时能够水平调整窗口大小？

任何帮助表示赞赏！

**Obs：**这就是我创建 ScrolledWindow 的方式：

```
 self.scrolledwindow = Gtk.ScrolledWindow()
    self.scrolledwindow.set_policy(Gtk.PolicyType.NEVER,
                                   Gtk.PolicyType.AUTOMATIC)
    self.add(self.scrolledwindow) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T20:16:05.897

**解决方案：**

问题是窗口不能比 中更宽的行更窄`Gtk.TreeView`，而且我还希望我的窗口没有水平滚动条。解决我的问题的最终代码是这样的：

```
self.scrolledwindow = Gtk.ScrolledWindow()
self.scrolledwindow.set_policy(Gtk.PolicyType.NEVER,
                               Gtk.PolicyType.AUTOMATIC)

...

renderer_text = Gtk.CellRendererText(weight=600)
renderer_text.set_fixed_size(200, -1)
column_text = Gtk.TreeViewColumn('Name', renderer_text, text=1) 
```

这样，它`Gtk.CellRendererText`具有最小大小，并且可以在打开窗口后重新调整大小。

# java - Android 测试：什么都没有 id 怎么办？

> ID：15618031
> 
> 赞同：1
> 
> 时间：2013-03-25T14:56:48.327
> 
> 标签：java, android, robotium, android-testing

我正在尝试为我拥有的应用程序编写一些自动化脚本。我已经完成了 Robotium 网站上的教程，并对如何实现自动化有了基本的了解。但是，从我正在测试的应用程序的情况来看，通过使用 android 层次结构查看器，我看到所有视图都没有明确定义的 id。![样本层次结构](../Images/426b0b4d0146366cab02e3424a8a7d0c.png)

正如您从屏幕截图中看到的那样，嵌套视图上有视图。它们的 ID 读起来像 0x17e0 或 0x17de。我怎样才能引用这些，特别是在robotium脚本中？最终结果是我试图让它即使在文本切换器视图之一上也能触发点击。到目前为止，我只能让它工作，如果我给它一个像素点，或者如果我给它按钮中出现的文本（但文本是动态的并且会导致糟糕的测试）。

我是否必须使用 getCurrentViews() 过滤到文本切换器？还是我必须想办法从 FrameLayout>RelativeLayout>FrameLayout>LinearLayout>TextSwitcher 遍历整个树？

如果我必须遍历整棵树，我如何才能看到一个又一个的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:27:38.820

虽然我无法让 ViewGroup() 和 getChildAt() 方法为我工作，但我最终做了一些不同的事情：

```
// Grabbing all the LinearLayout views found under view with with id of 'content' 
ArrayList<LinearLayout> linearLayouts = solo.getCurrentViews(LinearLayout.class, solo.getView(R.id.content));

// The 4th item in the linearLayouts list is the one I need
View pickerList = linearLayouts.get(3);

// Grabbing the buttons in the pickerList
ArrayList<TextSwitcher> buttons = solo.getCurrentViews(TextSwitcher.class,pickerList);

// Now I can click on the buttons
solo.clickOnView(buttons.get(0)); 
```

我会说这很慢。第一次单击按钮触发大约需要 10 秒。但是一旦它飞了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:04:49.553

我会投票说你真的很可能想要在层次结构中添加一些 ID，这是一个单行更改，会让你的生活变得更轻松。

但是，如果由于某种原因您无法完成此操作，我并非没有帮助，要做到这一点，您将不得不步行整个才能到达您想要的视图。

获得顶级视图，您将能够将其转换为 ViewGroup。ViewGroups 有一个名为 getChildAt() 的方法，然后您可以使用该方法在给定索引处获取子项，该索引基于 0 并且将匹配您在层次结构查看器中看到的内容，因此您可以将这些命令链接在一起以访问您的视图想与之互动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:11:04.370

我没有使用过 Robodtium，但我知道[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient)完全符合您的要求。这是一个转储主视图 ID 的代码片段：

```
ViewClient(*ViewClient.connectToDeviceOrExit()).traverse(transform=ViewClient.TRAVERSE_CIT) 
```

这是结果转储：

```
com.android.launcher2.CellLayout id/cell3 None
     com.android.launcher2.ShortcutAndWidgetContainer NO_ID None
         com.android.launcher2.BubbleTextView NO_ID Email
         com.android.launcher2.LauncherAppWidgetHostView NO_ID None
             android.widget.AnalogClock id/0x7f0f0014 None
         com.android.launcher2.BubbleTextView NO_ID Camera
         com.android.launcher2.BubbleTextView NO_ID Settings
         com.android.launcher2.BubbleTextView NO_ID Gallery
         com.android.launcher2.LauncherAppWidgetHostView NO_ID None
             android.widget.LinearLayout id/0x7f080167 None 
```

# jquery - Fancybox iFrame 请求被取消

> ID：15618033
> 
> 赞同：0
> 
> 时间：2013-03-25T14:56:49.517
> 
> 标签：jquery, fancybox, frontend

全部，

[问这个问题我有点不好意思，但是当你点击这里](http://infirmaryhealth.mdidev.com/home)的特色视频时，谁能帮我弄清楚为什么视频没有呈现？

检查员只是告诉请求被取消，我找不到比这更多的信息。我以前用过fancybox一百次都没问题。也许我在设置代码中的某个地方出现了问题，但我现在已经对其进行了两次和三次检查，似乎找不到任何问题。

感谢您的任何帮助-

* * *

**编辑#1**

情节变厚了。我在 Media Center 图像周围扔了`<a>`应该调用 fancybox 和精选视频上的 YT 视频，*它在那里工作*。这是一个复制和粘贴。现在我真的很挠头！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:39:04.087

您已经为此选择器初始化了 fancybox ：

```
$('.featured-video').fancybox({
   type : 'iframe'
}); 
```

但在您的 html 代码的这一部分：

```
<div class='featured-video'>
    <h3 class="blocked">Featured Video</h3>
    <div class="gray-box">
        <a class="fancybox.iframe featured-video" href="http://www.youtube.com/embed/fdn3ZTiFNaM" data-fancybox-href="http://www.youtube.com/embed/fdn3ZTiFNaM"><img src="sites/all/themes/blithely/assets/images/placeholders/featured-video.jpg" /></a>
        <p><a href="#">Family birthing center tour</a></p>
    </div><!--/graybox-->
</div><!--/featured-video--> 
```

您与锚`<div>`具有**相同的类**( )。`.featured-video`Fancybox 正在尝试从第一个选择器（`<div>`）中获取内容，该选择器不提供任何`href`信息

```
The requested content cannot be loaded.
Please try again later. 
```

删除或重命名父容器的类。

# exchange-server - 电子邮件管道与 Exchange 服务器？

> ID：15618034
> 
> 赞同：1
> 
> 时间：2013-03-25T14:56:52.023
> 
> 标签：exchange-server

我正在使用 Exchange 2007，并希望将到达某个邮箱的电子邮件通过管道传输到 PHP 脚本。到目前为止，我阅读的所有内容都建议在不同的域（POP3 或 IMAP）上创建一个单独的电子邮件帐户，并将我的 Exchange 电子邮件转发到另一个帐户。然后使用 cPanel 将其通过管道传输到 PHP 脚本。

Exchange 中是否有本机功能让我可以通过管道传输电子邮件，这样我就不必设置额外的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:23:48.490

Exchange 2007 无法做到这一点，这不是 Exchange 2007 中的选项。

# spring - Spring 3.2.2：MockMVC，返回 Empty 结果

> ID：15618037
> 
> 赞同：3
> 
> 时间：2013-03-25T14:56:57.603
> 
> 标签：spring, testing, junit, modelandview

我有以下 REST 控制器

```
@Controller
@RequestMapping("/rest/transceptors")
public class TransceptorRestController
{
    @Autowired
    private TransceptorDao transceptorDao;  

    @RequestMapping(value="/get/{idTransceptor}", method=RequestMethod.GET)
    public @ResponseBody Transceptor getOne(@PathVariable("idTransceptor") Long idTransceptor)
    {
        return transceptorDao.searchByIdTransceptor(idTransceptor);
    }
} 
```

此控制器在 JBoss 中运行时工作正常，结果符合预期。我使用 Postman（Google Chrome 的 REST 测试扩展），我可以在 XML 和 JSON 中得到正确的结果。

但是，我在使用 MockMVC 进行测试时遇到了问题。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(
locations={
    "classpath:test-servlet-context.xml"
})
@WebAppConfiguration
public class TransceptorRestControllerTest {

@Autowired
private WebApplicationContext wac;

private MockMvc mockMvc;

@Before
public void setup() 
{
    mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
}

@Test
public void testRoot() throws Exception 
{
    mockMvc.perform(get("/")).
    andExpect(status().isOk()); 
}

@Test
public void testGet() throws Exception
{
    mockMvc.perform(get("/rest/transceptors/get/1"))
    .andExpect(status().isOk())
    .andDo(print())
    .andExpect(model().attribute("name", equals("Test_Name_1")));
} 
```

TestRoot 测试工作正常。但是，当我尝试使用 andExpect(model()... 我收到消息“No ModelAndView Found”

当为 XML 或 JSON 的特定期望替换 model() 部分时，XML 和 JSON 字符串始终返回空。

我花了几天时间试图理解这一点，而且我对 Java 还是比较陌生，对 Spring 还是比较陌生。你能告诉我在哪里可以解决这个问题吗？

作为附加信息，我已将日志消息（使用 sfj4l）放在任何地方，但是当使用 Junit 运行时，DAO 中的日志消息有效，测试模块中的日志消息本身有效，但我的 REST 控制器内的日志消息没有出现.

就像 GET 函数被匹配了，但是函数的内容从不执行，并且得到空响应。尽管如此，我对 isOk() 的调用还是成功的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T11:30:56.927

我的问题与您的问题几乎相同，并且似乎找到了导致问题的原因。

我在下面的评论之一中解释了我的情况，但这应该更完整。

我正在使用 Spring Roo 1.2.4、Spring 3.2.3。当我运行我的应用程序时，我可以卷曲所有控制器并且它们都工作得很好。但是，我的一个控制器在 mockmvc 测试中返回空 json，没有抛出错误。

我在 Roo 生成的 AspectJ 控制器代码（那些说你不应该编辑它们的文件）中发现了尝试捕获问题的问题，并发现序列化代码（.toJsonArray）失败了

`org.hibernate.LazyInitializationException: failed to lazily initialize a collection...`

它会被默默地忽略，并且不会自动喷出任何堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:15:37.513

“未找到 ModelAndView”是对的。使用@ResponseBody，返回值直接写入响应正文。没有模型，没有视图分辨率等。

更一般地说，理想情况下，专注于从客户端的角度测试请求的结果。这包括响应标头、正文和响应状态。测试其他通常对客户端不可见的结果，例如更谨慎地测试模型属性。

# php - ZF2 更改供应商模块核心类的最佳实践？

> ID：15618038
> 
> 赞同：2
> 
> 时间：2013-03-25T14:56:59.930
> 
> 标签：php, zend-framework2, zfcuser

我确实读过这个答案[ZF2，使用供应商模块的表单类的最佳实践是什么？](https://stackoverflow.com/questions/8783873/zf2-whats-the-best-practice-for-working-with-vendor-modules-form-classes). 所以主要清楚如何更改供应商模块的可配置部分，但是如果在 zfcUser 模块中我想向实体/用户添加新功能该怎么办？

简而言之，我想检查用户角色，我已添加到 DB 字段，最好的方法是什么？也许我应该在其他地方做而不是在 zfcUSer 如果是这样的话在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:47:10.060

看一眼`ZfcUser/config/zfcuser.global.php.dist`

在那里你会看到这个

```
/**
 * User Model Entity Class
 *
 * Name of Entity class to use. Useful for using your own entity class
 * instead of the default one provided. Default is ZfcUser\Entity\User.
 * The entity class should implement ZfcUser\Entity\UserInterface
 */
//'user_entity_class' => 'ZfcUser\Entity\User', 
```

指示很简单，将文件复制到`./config/autoload/zfcuser.global.php`，确保您的实体类实现`ZfcUser\Entity\UserInterface`，取消注释该行并更改 FQCN 以匹配您要使用的实体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T21:13:11.777

我不会声称这是最佳实践，但这就是我设法处理这种情况的方式！首先非常感谢回答这个问题[ZF2: Custom user mapper for ZfcUser module](https://stackoverflow.com/questions/13186809/zf2-custom-user-mapper-for-zfcuser-module)。

所以我做了：

1.  `zfcUser/Entity`在自动加载中添加了配置`zfc-user.global.php`：

    ```
    'zfcuser' => 数组（
        'tableName' => '用户',
        'user_entity_class' => '应用程序\实体\用户'
    ),

    ```

2.  将我的类添加到我的`Entity\User`Entity和 Mapper 子文件夹中`Mapper\User`。`Mapper\Hydrator``src/Application`
3.  将这些类命名空间更新为我的`Application\Entity`和`Application\Mapper`
4.  将此配置添加到`getServiceConfig`my 的功能中`Module.php`：

    ```
    'factories' => [
        'zfcuser_user_mapper' => function ($sm) {
            $mapper = new Mapper\User();
            $mapper->setDbAdapter($sm->get('Zend\Db\Adapter\Adapter'));
            $mapper->setEntityPrototype(new Entity\User());
            $mapper->setHydrator(new Mapper\UserHydrator());
            return $mapper;
        },
    ] 
    ```

5.  更新了我的类依赖项以使用`ZfcUSer`并启动我`Entity\User`的 as `extends \ZfcUser\Entity\User implements \ZfcUser\Entity\UserInterface`。

# nginx - 如何在 nginx 中访问 /cygdrive/c？

> ID：15618039
> 
> 赞同：0
> 
> 时间：2013-03-25T14:57:00.283
> 
> 标签：nginx, winginx

我正在尝试在 Windows 下使用 Nginx；它需要位于 /cygdrive/c 中的文件。

如果我安装了 cygwin，那么一切都是文件。我想知道我是否可以在没有 cygwin 的情况下使用 Nginx？如何在 c:\nginx 等位置指定文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T13:26:42.100

您可以尝试以下代码：

```
location / {

 root  /cygdrive/d/www/; # '/cygdrive/d/' equal to  'D:\' in Nginx under Cygwin
            index  index.html index.htm;            
} 
```

如果我们想设置`D:\www\newsB\`for `http://www.#yours.com/newsA/`，那么我们最好使用Nginx 的`alias`or指令，例如：`rewrite`

```
location /newsA/ {

alias /cygdrive/d/www/newsB/;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:00:39.283

是的，您可以在没有 Cygwin 的情况下使用 nginx。请参阅[http://wiki.nginx.org/Install#Official_Win32_Binaries](http://wiki.nginx.org/Install#Official_Win32_Binaries)

# sql - SQL 逻辑运算符——试图得到正确的结果

> ID：15618043
> 
> 赞同：1
> 
> 时间：2013-03-25T14:57:16.447
> 
> 标签：sql, sql-server

我想知道我对这些运营商做错了什么。

我最终试图获得一份缺少 p.TEST 或 p.DL 之一的人的名单，但不是他们都在同一个人身上。

```
 select ....
  from ....

    WHERE

 ((p.TEST is null OR p.DL is null) OR
 (p.TEST = 0 or p.DL = 0) OR
 (p.TEST = 1 or p.DL = 0) OR
 (p.TEST = 0 or p.DL = 1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:58:56.707

> 但不是他们两个在同一个人身上。

您的陈述中不保证这一点。

```
 ((p.TEST is null OR p.DL is null) OR  // if both are null this is true
 (p.TEST = 0 or p.DL = 0) OR           // if both are zero this is true
 (p.TEST = 1 or p.DL = 0) OR
 (p.TEST = 0 or p.DL = 1)) 
```

您必须明确检查：

```
((a is null) and (b is not null)) OR
((b is null) and (a is not null))
// etc. for zero values:
((a = 0) and (b  <> 0)) OR
((b = 0) and (a <> 0))
//... 
```

即使这样，您也会得到类似的结果，`a = 0`但是`b = null`您可能也需要过滤这些结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:00:07.750

```
select ..
from ..
where 
    -- one missing 
    (isnull(p.test,0) = 0 or isnull(p.dl,0) = 0
    and 
    -- but not both
    not (isnull(p.test,0) = 0 and isnull(p.dl,0) = 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:59:22.930

我认为应该是

```
 ( 
   (p.TEST is null AND p.DL is not null) OR 
   (p.TEST is not null AND p.DL is null)
 ) 
```

...等等

这是因为您想知道一个人何时出现而另一个人何时失踪

# c# - Web Api 响应版本控制解决方案？

> ID：15618051
> 
> 赞同：9
> 
> 时间：2013-03-25T14:57:49.097
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

在您认为这是重复之前，请稍等片刻。当我研究 Web Api 关于版本控制的问题时，一切都关注版本控制控制器和在 url 与 headers 中指定版本的最佳实践。

我想弄清楚的是什么是版本输出响应的最佳方式，所以当我推出版本 2 时，我不会破坏版本 1 客户端。

假设我有一个不断变化的 DAL，用于为网站和其他服务提供服务的网站套件。我正在开发一个新的 Web Api 项目，该项目应该具有符合版本化模式的响应。

我的问题是，在经过版本控制的控制器和未版本控制的 DAL 之前，在 Web Api 项目中实施版本控制的行之有效的解决方案/最佳实践是什么？

我想出了一个解决方案，它涉及一个额外的版本化存储库层和一个额外的版本化模型层，因此版本化控制器使用使用版本化模型的版本化存储库。我已经设置 Automapper 在未版本化的域模型（来自 DAL）和版本化模型之间进行映射。但是这个设置的继承缺陷是，我必须为每个新版本更新所有地图；一个呈指数增长的问题。

一定有更好的方法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T18:08:43.267

根据我的经验，我们发现的最干净（但不是最简单）的解决方案分为 5 个部分：

1.  拥有权威的数据模型和始终保持最新的后端：DAL/数据库/服务。
2.  具有系统可以理解的特定于版本的数据：多数据模型。
3.  确保正确识别和跟踪版本之间的更改，并且更改是可逆的。必须明确定义规则以处理该问题（这可能更难）：转换器。
4.  让客户端明确告诉您他们使用哪个版本：查询字符串/标题。
5.  拥有始终保持最新但知道如何在不同数据版本之间移动的权威业务逻辑 - 向后兼容：控制器。

例如，我们拥有的数据模型是供应商。

**(1)**后端（即 DAL/数据库）在 V5。业务逻辑（即服务）也在 V5 中。

**(2)**但是，我们需要同时为 V1、V2、V3、V4 上的客户供应商和 V5 上的最新客户提供服务。让我们将数据模型从 V1 到 V5：SupplierV1、SupplierV2...（您可以使用命名空间或其他方式来区分它们）

**(3)**您需要定义转换器并对其进行管理。它们必须处理数据模型版本之间的向前和向后兼容性。这可以通过策略模式、lambdas、具有 DI 转换器的管理器等来完成。您需要处理*V1->V2->V3->V4->V5*但还需要处理 V5- *>V4->V3->V2 ->V1*。

转换器中的规则是最难的部分。有时很容易 - 新字段的默认值。在其他时候，您需要运行一些业务逻辑。有时您需要转换/合并现有数据；你必须确保它是可逆的！例如，如果值在 V1 中是大小写混合的，而您在 V2 中将其转换为大写...您将无法将其恢复为 V1，因为您不知道哪些字符是大写和小写。您可以通过两种方式处理：

*   对于 V1，保持大写。毕竟，只有 V2 需要它，V1 可能适用于所有大写字母（显然不适用于键）。
*   将旧值保留在 V2 中的字段中。例如，如果您决定将 State 字段大写，您可以保留一个混合大小写的 OriginalState，并在返回 V1 时将其复制到 State。

如您所见，您需要认真考虑这些问题，而且这通常很重要。

**(4)**然后，在控制器中，您需要知道客户端使用哪个版本，以便在需要时进出控制器进行转换。为此，您可以使用查询字符串、标头（例如 X-API-Version 或 Accept，但要注意一些主机/代理会删除其中的一些）、post 参数等。

**(5)**最后，当控制器收到数据模型时，需要检查客户端发送的版本（比如说V2）并将其升级到后端的最新版本（V5）。然后正常使用，之后如果需要发回数据，需要降级到客户端版本（V2）。为此，您可以进行自定义绑定、自定义请求操作、自定义操作结果等。例如（请自动执行）：

```
public IHttpActionResult DoSomethingWithSupplier(JToken supplier) // Receiving Json Supplier
{
   // TODO: Get the client version type, for example in the X-API-Version header/query strings
   // (beware, some proxy/hosts strips some headers)
   // Type clientType = ...

   var clientSupplier = JsonConvert.DeserializeObject(supplier.ToString(), clientType);

   // You should probably detect latest version automatically (instead of typeof)
   var latestSupplier = VersionManager.Upgrade(clientSupplier, clientType, typeof(SupplierV5));

   outputSupplier = DoSomething(latestSupplier);

   // You should probably detect latest version automatically (instead of typeof)
   var clientOutputSupplier = VersionManager.Downgrade(outputSupplier, typeof(SupplierV5), clientType);

   return Ok(clientOutputSupplier);
} 
```

这是向您展示这个想法的一种非常粗略的方式。这是我们在其中一个系统中所做的事情。您可以拥有检测类型和版本并自行处理转换的管理器，您可以使用依赖注入动态加载程序集/转换器，您可以在自定义绑定/请求操作中自动执行大部分转换，等等。

*注意：*您可能还需要考虑第**(6)**部分。要将数据库中的客户端数据实际更新到 V5，您可以在迁移到 V5（数据的批量迁移）时执行此操作，或者在运行时执行此操作。当您收到 SupplierV1 时，您从数据库中加载它（仍然是 V1 数据），升级到 V5，然后保存更新的数据，所有这些都在 Converter 中。这意味着您现在可以即时迁移后端。显然，这并不像听起来那么容易，因为您需要在同一个数据库中支持这两个版本，但根据您拥有的更改或数据的类型，它可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:21:37.023

我建议对您的模型进行版本控制。您可以通过命名空间来做到这一点，以保持简单。事实上，NServiceBus 为它的消息传递做了类似的事情。这是他们的例子：http: [//support.nservicebus.com/customer/portal/articles/894151-versioning-sample](http://support.nservicebus.com/customer/portal/articles/894151-versioning-sample)

# ruby-on-rails - 如何按过去 20 天分组并执行聚合函数？

> ID：15618053
> 
> 赞同：1
> 
> 时间：2013-03-25T14:57:54.660
> 
> 标签：ruby-on-rails, postgresql

我似乎无法弄清楚这一点。我正在尝试获取过去 20 天的列的标准偏差。这是我所拥有的

```
Model.where('date < ?','2013-03-25')
     .group('date')
     .order('date DESC')
     .limit(20)
     .select('stddev_samp(percent_change) as stdev') 
```

然而，我得到的只是 20 个 Nil 条目。我期待 1 个标准偏差条目。

将 stddev_samp 切换为 sum 后，我看到我得到了 nil，因为您不能在 1 个条目上获得标准偏差。即它没有像我预期的那样对 20 进行分组，而是计算每个日期的标准偏差。

所以我的问题是，我如何获得过去 20 天的 stddev？我知道可以简单地选择`select percent_change`然后计算 ruby​​ 中的标准偏差，但我认为聚合函数 stddev_samp 在这种情况下应该是可用的。

我正在使用 rails 3.2 和 Postgresql 9.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:16:11.080

无需“分组依据”、“排序依据”或子选择。只需获取过去 20 天的记录并对其运行聚合函数即可。

红宝石：

```
Model.where('date >= ?', Date.today - 20.days).select('stddev_samp(percent_change) as stdev').first['stdev'] 
```

SQL：

```
select stddev_samp(percent_change) as stdev 
from <table> 
where date >= now() - interval 20 day; 
```

如果您想使用最近 20 条记录，而不是过去 20 天：

红宝石：

```
Model.order('date desc').limit(20).select('stddev_samp(percent_change) as stdev').first['stdev'] 
```

SQL：

```
select stddev_samp(percent_change) as stdev 
from <table> 
order by date desc
limit 20; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:13:33.277

我不是 Ruby 人，所以我会用普通的 SQL 来解释它：

你正在做的是：

```
SELECT stddev_samp(percent_change) as stdev
FROM tbl
WHERE date < '2013-03-25'
GROUP BY date
ORDER BY date DESC
LIMIT 20; 
```

这会分别计算每一天的偏差，而不是它们的总和，当您尝试仅获得一个元素的偏差时，您会得到`NULL`. 删除`GROUP BY`将修复它，但也会返回整个表的结果，而不仅仅是最后 20 个条目，所以我们需要一个子查询：

```
SELECT stddev_samp(percent_change) as stdev
FROM
(SELECT percent_change
FROM tbl
WHERE date < '2013-03-25'
ORDER BY date DESC
LIMIT 20) AS q 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:22:04.207

您不需要 group by，因为您不希望每个日期都有一个值。

如果您有多个日期值或缺少日期，您的限制也可能不起作用

尝试这个：

```
SELECT stddev_samp(percent_change) as stdev
FROM
(SELECT percent_change
FROM tbl
WHERE date > now() - interval '20 days') AS q 
```

# sql - 从一年中的每个月获取计数的更有效方式

> ID：15618056
> 
> 赞同：1
> 
> 时间：2013-03-25T14:58:01.590
> 
> 标签：sql, tsql, pivot

我想知道除了我目前正在做的方式之外，是否有一种更有效的方法可以从一年中的每个月中获取计数。目前，我正在使用单个 select 语句来获取 Jan、Mar 等的计数，然后将它们全部加入单个 select 语句中。

```
Select distinct
    count(item1 + item2) as 'Count of Items',
    month(sub_date) as 'month'

from table1
where month(sub_date)='1'
and year(sub_date)='2012' 
```

我会从第 1 个月到第 12 个月重复一遍，然后加入 12 选择语句以获得类似这样的表格

```
jan feb mar apr may jun july aug sept oct nov dec
1   2   2   1   3   5   5    2    6   7   2   1 
```

任何有关如何重做我的查询的信息将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:00:37.780

您应该能够`GROUP BY`在`month(sub_date)`和上使用 a `year(sub_date)`：

```
Select 
    count(item1 + item2) as 'Count of Items',
    month(sub_date) as 'month',
    year(sub_date) as year
from table1
group by month(sub_date), year(sub_date) 
```

结果将在多行中。和`GROUP BY`都将允许您返回多年`month`，`year`如果您只想返回 2012 年，那么您可以包含`WHERE year(sub_date) =2012`类似于此的原始条款：

```
Select 
    count(item1 + item2) as 'Count of Items',
    month(sub_date) as 'month'
from table1
where year(sub_date) = 2012
group by month(sub_date) 
```

然后，如果您希望每一年的数据在一行中，那么您可以应用*数据透视*函数。

```
select *
from
(
    Select item1 + item2 Items,
        month(sub_date) as 'month'
    from table1
    where year(sub_date) =2012
) src
pivot
(
    sum(Items)
    for month in ([1], [2])
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b9a67/4)。该`PIVOT`函数将数据从行转换为列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:01:14.657

`GROUP BY`是你想要的：http: [//msdn.microsoft.com/en-us/library/ms177673.aspx](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

```
SELECT MONTH(sub_date) AS [month],
       COUNT(item1 + item2) AS [Count of Items]
  FROM table1
 WHERE YEAR(sub_date) = 2012
 GROUP BY MONTH(sub_date) 
```

正如我从您的帖子中推测的那样，这假设您只需要 12 行，一个用于给定年份的每个月（在本例中为 2012 年）。如果您想包括所有年份，那么您可以将其添加到您的`GROUP BY`子句中，如下所示：

```
 GROUP BY YEAR(sub_date), MONTH(sub_date) 
```

# vb.net - 我的（WinForms）应用程序的许可系统。这足够安全吗？（在合理范围内）

> ID：15618060
> 
> 赞同：-1
> 
> 时间：2013-03-25T14:58:10.540
> 
> 标签：vb.net, security, encryption, licensing, copy-protection

我已经研究了我愿意为我即将成为应用程序的通用软件许可系统实施的每个元素或系统（无关紧要，因为这应该可以工作，或者可用于我的所有应用程序）。

我创建了一个 DLL，其中包含我的许可类。如下：

* * *

## **(1)**

我已经应用了**`InternalsVisibleTo()`**属性主类（带有子类），它使所有内部类及其声明的方法**`Friend`**对具有特定 PublicKey 的外部程序集可见。

我已经引用了应用程序名称，它是 PublicKey。（许可和外部程序集都使用相同的密钥（***.snk***文件）签名

## **(2)**

所有（在可能的情况下）成员、属性等都被 delcared**`Friend`**或**`Private`**或只是**`Dim`**...ed 。

## **(3)**

我的许可类别有一个**`String`**变量；宣布：

```
Private Shared _Key As String = "H58N2-00V93"
```

如果您愿意，这个变量是我的 DLL 的特殊密码，并且是访问我的 DLL 中的方法所必需的。

还有一个**`Public String`**变量（我们称之为“ *`AccessKey`*”），它应该用主类初始化，如下所示：

```
Dim licDLL As New LicensingAssemblyName.LicensingMainClass With {.AccessKey="H58N2-00V93"}
```

## **(4)**

然后，我有一个**`Function`**（我们称之为“ *`CheckKey`*”），它检查**`Public`**初始化变量（“ *`AccessKey`*”）是否等于预定义的**`Friend`**键（“ *`_Key`*”），如果它们不相等，则会抛出异常-防止方法继续/使用。

## **(5)**

在 every 等的每一行**`Sub`**，**`Function`**我都插入了对该函数的调用。

* * *

这些只是我为防止外部程序集在另一个应用程序中使用我的 DLL 以利用系统或生成密钥而采取的“安全”措施。

现在是许可措施。

* * *

## **(1)**

我有一个密钥生成器（非常基本），它生成给定格式的代码（比如：“ `#-$`”代表一个数字，一个破折号，后跟一个字母。）

我在这个程序中包含了一个加密类，它使用`Rijndaenal`并应用了 salt。

我已将密钥生成器设置为在生成时加密每个单独的密钥，然后将其附加到文件的新行中，我们将其称为“ **my_licenses.txt** ”。

我为每个人使用相同的密码（显然）。它很长，并且包含许多不同的字符（如果这有什么不同的话）。我认为这是一种安全的方式，因为我不认为任何人都可以在没有密码的情况下解密字符串，直到另一位程序员告诉我，他建议不要使用纯文本加密作为保护这些密钥的方法。请帮我解决一下这个。

## **(2)**

在我的许可 DLL 中，我有一个声明：

```
Friend Shared Function IsKeyValid(ByVal KeyDB As String, ByVal Key As String) As Boolean
```

此函数解密文件中的每个密钥（指定的数据库，使用在密钥生成程序中加密它们时使用的相同密码）。

然后我执行一个循环`For Each`，`Next`确定指定的“ *`Key`*”值是否等于键“数据库”、“ **my_licenses.txt** ”中的任何值。但这就是问题所在。

我有一个**`Function`**返回运行它的计算机的唯一代码（使用硬件 ID 等）。这**`Function`**可以帮助我防止在多台计算机上使用相同的密钥（除非我实现了一个允许这样做的系统，有限的时间），并且需要作为“密钥”的最后 5 个字符。

检查后，此函数返回结果值（**`True`**或**`False`**）。

* * *

最后（呸），每个程序集（许可程序，以及任何使用它的外部程序）都被**CodePlex 的 Confuser** ***（***免费且高度**.NET**的推荐混淆器）。

 ****我希望这不是太长/不够详细/难以理解。（如果是这样，请告诉我你不明白的地方）。

这是我的第一篇文章/任何类型的问题，所以要友善。也感谢您的阅读。

我希望你能帮忙。

为了确认一下，我的问题是：这个系统是否足够安全以防止普通黑客？

PS我只是一个初学者，所以初学者的答案将特别感激;）

****更新***：我实际上减少了这个问题的长度，并提高了它的可理解性（信不信由你）。所以这是我能做的最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:21:18.793

那是一堵疯狂的文字墙，所以你有点迷失了我。而且，老实说，当我看到您计划分发的二进制文件中有一个硬编码的密钥时，我就不再认真阅读了……但是您应该问自己两个问题：

1.  您的应用程序是否可能如此成功以至于对它有足够的需求，以至于具有适当技能的人会倾向于扭转它并发布注册机和/或盗版版本？

2.  将时间花在为应用程序添加酷炫的*功能*而不是授权代码上，这对改进应用程序本身没有任何帮助，难道不是更好吗？

不要误会我的意思。我完全赞成人们为他们的工作获得报酬，我不反对人们许可他们的软件；事实上，我参与的一个项目是一个自定义许可引擎，我上次检查时它正在跟踪超过 100,000 个许可。但请确保如果您决定实施许可，您投入的努力不会超过您投入许可的实际软件的努力。

* * *

说了这么多，这就是我要做的：

*   生成大量许可密钥（使用您想要的任何格式）
*   使用 SHA-256 或 SHA-512 之类的方法对这些密钥进行哈希处理。
*   创建一个包含键哈希的数组（使用适合您选择的语言的任何语法）。
*   在应用程序中包含数组。

使用该设置，要验证许可证，您需要做的就是：

*   使用与以前相同的算法对输入进行哈希处理。
*   迭代数组，将其与哈希结果进行比较。如果它们匹配，则密钥被许可。如果他们不这样做，请继续。
*   如果您到达表的末尾，则该密钥未获得许可。
*   如果密钥未获得许可，请勿立即退出应用程序。而是设置一个标志来阻止使用重要命令（例如“保存”）或设置一个 60 秒的计时器加上一个随机数来退出应用程序。

编译然后使用 Authenticode 对您的应用程序进行数字签名。让应用程序本身验证签名以尝试阻止随意篡改。

如果您愿意，您甚至可以加密哈希，尽管这不太可能有助于防止有人针对此方案发起的那种攻击。

需要明确的是：这**不是**万无一失的（同样，没有许可机制），并且有足够技能的人有可能以多种方式破解它。但几乎可以肯定，它对您的项目来说已经足够好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:11:39.213

安全性没有绝对价值，它必须根据收益来衡量。如果您的应用程序包含一些核代码，我会说为此支付专业顾问费用。如果您要存储祖母的秘方 - 您可以开始使用。

我阅读了整篇文章，但仍然不清楚硬编码密钥的用途或您如何管理每个许可证的各个加密密钥：加密不仅仅是您使用的算法有多强或密码有多长；它还涉及如何隐藏密码、如何传输密码、在边缘情况下做什么（连接中断、解密失败等）以及许多其他事情。

从外观上看，我会说你属于“好去”类别，只是因为你的应用听起来不像是一个高调的破解目标，而且你主要想阻止沮丧的开发人员随意破解尝试谁不喜欢您的许可方案（：在对您的代码进行逆向工程时，单独的混淆最能阻止您的代码。我不熟悉您的代码以判断是否有任何其他更简单的方法来绕过许可，例如如果许可文件未绑定到机器或用户配置文件，则复制许可文件本身的流行方法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T17:51:23.537

网上有很多解决方法，但只有这里描述的散列系统或基于公钥加密的东西才能足够安全以提供许可。

我个人更喜欢和使用商业产品：**[http](http://www.treekslicensinglibrary.com) ://www.treekslicensinglibrary.com - Treek 的许可库**。它便宜、易于设置且非常安全，因为它使用以前的公钥加密技术与许可证一起工作。

编辑：与序列号的哈希值进行比较 - 此解决方案不需要预定义接受的序列号。应用程序中的 1000 个哈希 = 1000 个许可证，您需要更新应用程序才能获得更多。基于公钥加密的许可系统没有这个缺点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-06T08:52:41.673

您可以使用 .NET Obfuscate 应用程序来保护它。所有 .NET 应用程序都可以使用 .NET Reflector 进行反编译，因此请在浏览器中搜索应用程序以混淆 .NET 应用程序。据我所知，这将起作用，想要反编译您的应用程序的每个人都会通过混淆来阻止****

# java - 未找到 Java 类 java.util.ArrayList...和 MIME 媒体类型 text/xml 的消息正文编写器

> ID：15618061
> 
> 赞同：19
> 
> 时间：2013-03-25T14:58:11.833
> 
> 标签：java, xml, rest, jaxb, jersey

我使用 Jersey 来构建一个 REST 服务并希望以`Collection<String>`XML 形式返回。

```
@GET
@Produces(MediaType.TEXT_XML)
@Path("/directgroups")
public Response getDirectGroupsForUser(@PathParam("userId") String userId) {
    try {
        Collection<String> result = service.getDirectGroupsForUser(userId, null, true);

//      return result; //first try
//      return result.toArray(new String[0]); //second try
        return Response.ok().type(MediaType.TEXT_XML).entity(result).build(); //third try
    } catch (UserServiceException e) {
        LOGGER.error(e);
        throw new RuntimeException(e.getMessage());
    }
} 
```

但我的尝试失败了，但有以下例外：

> javax.ws.rs.WebApplicationException：com.sun.jersey.api.MessageException：Java 类 java.util.ArrayList 和 Java 类型类 java.util.ArrayList 和 MIME 媒体类型 text/xml 的消息正文编写器不是成立

并且我通过谷歌找到的那个异常的所有结果都处理了返回 text/json 而不是 text/xml ，就像我的情况一样。

谁能帮我？我想，如果我使用响应，那将是我在 XML 中的根元素，而我的集合是其中的字符串元素列表。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-08-14T19:28:11.443

利用

```
List<String> list = new ArrayList<String>();
GenericEntity<List<String>> entity = new GenericEntity<List<String>>(list) {};
Response response = Response.ok(entity).build(); 
```

通用实体包装器用于在使用响应构建器时获取输出。

[参考](http://jackson.codehaus.org/javadoc/jax-rs/1.0/javax/ws/rs/core/GenericEntity.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-28T09:27:44.620

**注意：**虽然这个答案有效，[但 anar 的答案](https://stackoverflow.com/a/18240578/1818625)更好。

您应该尝试使用带有 JAXB 注释的类来解决您的问题。您可以将方法更改为：

```
@GET
@Produces(MediaType.TEXT_XML)
@Path("/directgroups")
public Groups getDirectGroupsForUser(@PathParam("userId") String userId) {
    try {

        Groups groups = new Groups();
        groups.getGroup().addAll(service.getDirectGroupsForUser(userId, null, true));
        return groups;
    } catch (UserServiceException e) {
        LOGGER.error(e);
        throw new RuntimeException(e.getMessage());
    }
} 
```

然后为您的组创建一个带有 JAXB 注释的类。我使用[此答案](https://stackoverflow.com/a/15552881/1818625)中描述的过程为您包含了一个生成的类。以下是它将生成的文档示例：

```
<groups>
  <group>Group1</group>
  </group>Group2</group>
</groups> 
```

这是生成的类：

```
package example;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

/**
 * <p>Java class for anonymous complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType>
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element ref="{}group" maxOccurs="unbounded"/>
 *       &lt;/sequence>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "group"
})
@XmlRootElement(name = "groups")
public class Groups {

    @XmlElement(required = true)
    protected List<String> group;

    /**
     * Gets the value of the group property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the group property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getGroup().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link String }
     * 
     * 
     */
    public List<String> getGroup() {
        if (group == null) {
            group = new ArrayList<String>();
        }
        return this.group;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T15:02:40.710

**到目前为止，唯一对我有用的是创建我自己的 Wrapper 对象。**

不要忘记***@XmlRootElement***注释来解释 JAXB 如何解析它。

请注意，这适用于任何类型的对象 - 在此示例中，我使用了 String 的 ArrayList。

例如

Wrapper 对象应如下所示：

```
import java.util.ArrayList;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class ArrayListWrapper {
    public ArrayList<String> myArray = new ArrayList<String>();
} 
```

REST 方法应如下所示：

```
@GET
@Produces(MediaType.TEXT_XML)
@Path("/directgroups")
public ArrayListWrapper getDirectGroupsForUser(@PathParam("userId") String userId) {
    try {
        ArrayListWrapper w = new ArrayListWrapper();
        w.myArray = service.getDirectGroupsForUser(userId, null, true);
        return w;
    } catch (UserServiceException e) {
        LOGGER.error(e);
        throw new RuntimeException(e.getMessage());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-17T12:37:37.433

将 @XmlRootElement(name = "class name") 添加到我要返回的对象中，解决了我的问题

# javascript - 检查值是否是 10 的倍数

> ID：15618062
> 
> 赞同：1
> 
> 时间：2013-03-25T14:58:12.937
> 
> 标签：javascript

我想检查一个值是否是某个数字的倍数，例如 10 的倍数，但我也希望能够将其更改为我想要的任何值。

```
if (directWinner == 10){

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T14:59:02.003

您将为此使用模数运算符：

```
if (directWinner % 10 === 0){
    directWinner = 20;
} 
```

毫无理由地添加了少量的 jQuery 吗？

```
$.modu = function(check, against) {
    return check % against === 0;
}

if ( $.modu(directWinner, 10) ) {
    directWinner = 20;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:03:24.387

您将为此使用[模](http://en.wikipedia.org/wiki/Modulo_operation)运算符[`%`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.25_.28Modulus.29)：

```
var certainNumber = 10;
if (directWinner % certainNumber === 0) {
    // directWinner is a multiple of certainNumber
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:59:21.107

使用模运算符（假设为正整数）：

```
if (directWinner % 10 === 0) {
    ...
} 
```

# c# - 在 asp.net MVC 中从控制器创建超链接

> ID：15618068
> 
> 赞同：2
> 
> 时间：2013-03-25T14:58:46.760
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个控制器，它创建面包屑如下：

```
Software > Windows 7 > Outlook 2007 
```

创建它的代码是：

```
ViewBag.breadcrumbs = string.Join(" > ", cbh.Select(i => i.Title)); 
```

有没有一种直接的方法来制作面包屑超链接，它指向（i.ParentID），即：

```
Software -> forum/index/12
Windows 7 -> forum/index/19
Outlook 2007 -> forum/index/23 
```

或者我应该只循环**cbh**并手动构建**<a href=...>**字符串，然后将它们传递给视图？

谢谢，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:02:27.227

您最好的选择是将所需的项目放入模型中，然后循环遍历它们。

尝试这样的事情：

**模型**

```
public class Model
{
    public struct BreadCrumb
    {
        public string Title;
        public string Url;
    }

    public List<BreadCrumb> Breadcrumbs { get; set; }
} 
```

**看法**

```
@{ int index = 0; }
@foreach(var crumb in this.Model.Breadcrumbs)
{
    <a href="@(crumb.Url)" title="@(crumb.Title)">@(crumb.Title)</a>

    if(index < this.Model.Breadcrumbs.Count - 1)
    {
        <span>&gt;</span>
    }

    index++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:00:11.670

是的，您应该在视图中构建您的面包屑链接。如果有帮助，您可以创建一个`BreadCrumbModel`课程（如果您还没有课程）。

```
ViewBag.breadcrumbs = cbh.Select(i => new BreadCrumbModel() 
                                      {
                                          Id = i.Id, 
                                          Title = i.Title 
                                      });

@{ 
    var printSeparator = false;
}
@foreach(BreadCrumbModel bc in ViewBag.breadcrumbs)
{
    @if(printSeparator)
    {
        <span class="breadcrumb-separator">&nbsp;&gt;&nbsp;</span>
    }
    <span class="breadcrumb">
      @Html.ActionLink(bc.Title, "index", "forum", new { id = bc.Id });
    </span>
    @{
        printSeparator = true;
    }
} 
```

如果你想在不同的控制器和动作（不仅仅是论坛/索引）之间有面包屑，然后将它们添加为你的`BreadCrumbModel`.

# c# - 当数据模板不是当前正在使用的模板时，为什么会引发 ArgumentOutOfRangeException

> ID：15618073
> 
> 赞同：2
> 
> 时间：2013-03-25T14:59:02.080
> 
> 标签：c#, wpf, xaml, data-binding, datatemplate

我正在使用数据模板选择器，如下所示：-

```
public class ExampleTemplateSelector : DataTemplateSelector
{
    public DataTemplate Foo { get; set; }
    public DataTemplate Bar { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        var foo = item as FooType;
        return foo != null ? Foo : Bar;
    }
} 
```

使用它的 XAML 是：-

```
<mtf:DetailTemplateSelector
  Foo="{StaticResource foo}"
  Bar="{StaticResource bar}"
  x:Key="baz" /> 
```

foo 的数据模板是：-

```
<DataTemplate x:Key="foo">
    <TextBox Text="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},
                            Path=DataContext.DetailItems[2].Field.Value" />
</DataTemplate> 
```

使用以下选择模板： -

```
<ContentControl Content="{Binding Set}" ContentTemplateSelector="{StaticResource baz}" /> 
```

bar 的数据模板适用于我知道 detailItems[2] 超出范围的情况，因此我使用模板选择器返回一个没有任何参数并返回的数据模板，比如 Text="qux"。

显示没有问题，功能工作正常，我只关心调试输出中提供给我的信息，这是我看到异常的地方。

为什么即使没有返回使用索引的数据模板，也会抛出这个异常？

如有必要，我可以提供更多信息，但我希望给定的信息就足够了，而无需查看数据源。

# r - Base R 中带有颜色填充和阴影线的图例

> ID：15618079
> 
> 赞同：12
> 
> 时间：2013-03-25T14:59:15.953
> 
> 标签：r, plot, legend, base

在我的情节中，我有两个相交的多边形，一个是彩色的，一个是带有阴影线的。在图例中，我希望正确表示两个多边形和相交数组。这是我所拥有的：

```
plot(1:4, 1:4, type="n", xaxt="n", xlab="", yaxt="n", ylab="")
polygon(c(2,4,2), c(1,3,3), col="gray")
polygon(c(3,3,1), c(1,3,2), col="red", density=10)
legend("topleft", legend=c("A", "B", "AB"), fill=c("gray", "red", "gray"),
           density=c(NA, 10, NA), bty="n") 
```

![相交多边形，图例问题](../Images/5756bba405e1b3ee458b8c59fb300e80.png)

是否可以将 B 图例中的边框颜色更改为红色，并为 AB 的符号添加红色阴影线？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-25T15:07:58.373

您应该添加参数`border=`以`legend()`更改小框的边框颜色，然后添加另一个调用以`legend()`使用您的颜色将阴影覆盖到 AB 框。在第二`legend()`行中，我将`density=`AB 设置为 10，并将`fill=`同一个框也更改为红色。

```
plot(1:4, 1:4, type="n", xaxt="n", xlab="", yaxt="n", ylab="")
polygon(c(2,4,2), c(1,3,3), col="gray")
polygon(c(3,3,1), c(1,3,2), col="red", density=10)
legend("topleft", legend=c("A", "B", "AB"), fill=c("gray", "red", "gray"),
       density=c(NA, 10, NA), bty="n",border=c("black", "red", "black")) 
legend("topleft", legend=c("A", "B", "AB"), fill=c("gray", "red", "red"),
       density=c(NA, 10, 10), bty="n",border=c("black", "red", "black")) 
```

![在此处输入图像描述](../Images/6ca3ce87a87bca72a444d97df768585e.png)

# java - 对于 N 个大小相同且整数按升序排列的数组，如何选择数组共有的数字？

> ID：15618086
> 
> 赞同：7
> 
> 时间：2013-03-25T14:59:37.473
> 
> 标签：java, algorithm

我今天在一次采访中被问到一个算法问题，我很想得到 SO 成员的意见。问题如下；

给定大小相同的 N 个数组，整数按升序排列，你将如何选择所有 N 个数组共有的数字。

起初，我的想法是从第一个数组开始迭代元素，一直到其他数组。但是，如果我是对的，那将导致 N 次幂 N 次迭代。因此，我想出了一个解决方案，通过将元素作为键并将值作为计数器来将计数添加到地图中。这样我相信时间复杂度只是N。以下是我的方法在Java中的实现

```
public static void main(String[] args) {

    int[] arr1 = { 1, 4, 6, 8,11,15 };
    int[] arr2 = { 3, 4, 6, 9, 10,16 };
    int[] arr3 = { 1, 4, 6, 13,15,16 };
    System.out.println(commonNumbers(arr1, arr2, arr3));
}

public static List<Integer> commonNumbers(int[] arr1, int[] arr2, int[] arr3) {
    Map<Integer, Integer>countMap = new HashMap<Integer, Integer>();

    for(int element:arr1)
    {
        countMap.put(element, 1);
    }

    for(int element:arr2)
    {
        if(countMap.containsKey(element))
        {
            countMap.put(element,countMap.get(element)+1);
        }
    }

    for(int element:arr3)
    {
        if(countMap.containsKey(element))
        {
            countMap.put(element,countMap.get(element)+1);
        }
    }

    List<Integer>toReturn = new LinkedList<Integer>();

    for(int key:countMap.keySet())
    {
        int count = countMap.get(key);
        if(count==3)toReturn.add(key);
    }

    return toReturn;
} 
```

我只是为三个数组做了这个，看看它是如何工作的。问题谈论 N Arrays 虽然我认为这仍然存在。

我的问题是，考虑到时间复杂度，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T15:03:49.783

Treat as 3 queues. While values are different, "remove" (by incrementing the array index) the smallest. When they match, "remove" (and record) the matches.

```
int i1 = 0;
int i2 = 0;
int i3 = 0;

while (i1 < array1.size && i2 < array2.size && i3 < array3.size) {
    int next1 = array1[i1];
    int next2 = array2[i2];
    int next3 = array3[i3];

    if (next1 == next2 && next1 == next3) {
        recordMatch(next1);
        i1++;
        i2++;
        i3++;
    }
    else if (next1 < next2 && next1 < next3) {
        i1++;
    }
    else if (next2 < next1 && next2 < next3) {
        i2++;
    }
    else {
        i3++;
    }
} 
```

Easily generalized to N arrays, though with N large you'd want to optimize the compares somehow (NPE's "heap").

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T15:08:29.800

我认为这可以通过对 N 数组和 N 元素[min-heap](http://en.wikipedia.org/wiki/Binary_heap)进行一次并行迭代来解决。在堆中，您将保留 N 个输入数组中的每一个的当前元素。

这个想法是，在每个步骤中，您都将沿着其元素位于堆顶部（即最小）的数组前进。

您需要能够检测堆何时完全由相同的值组成。只要您跟踪已添加到堆中的最大元素，这可以在恒定时间内完成。

如果每个数组包含 M 个元素，则最坏情况下的时间复杂度将是`O(M*N*log(N))`并且需要`O(N)`内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T15:20:27.020

这可以`O(M * N)`用 M 作为数组的长度来解决。

让我们看看会发生什么`N = 2`，这将是一个排序列表交集问题，它有一个经典的类似合并的解决方案`O(l1 + l2)`及时运行。（l1 = 第一个数组的长度，l2 = 第二个数组的长度）。（了解有关[合并算法](http://en.wikipedia.org/wiki/Merge_algorithm)的更多信息。）

现在，让我们在归纳问题中重新迭代算法 N 次。（例如，第 i 次我们将得到第 i 个数组，以及上一步的交集结果）。这将产生一个整体`O(M * N)`算法。

您还可以观察到，这个最坏情况的上限是最好的，因为任何有效算法都必须考虑所有数字。因此，不可能建立具有更严格上限的确定性算法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T15:14:27.167

尝试

```
public static Set<Integer> commonNumbers(int[] arr1, int[] arr2, int[] arr3) {
    Set<Integer> s1 = createSet(arr1);
    Set<Integer> s2 = createSet(arr2);
    Set<Integer> s3 = createSet(arr3);
    s1.retainAll(s2);
    s1.retainAll(s3);
    return s1;
}

private static Set<Integer> createSet(int[] arr) {
    Set<Integer> s = new HashSet<Integer>();
    for (int e : arr) {
        s.add(e);
    }
    return s;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T15:14:28.950

这就是我在算法课上学习的方式。不确定它是否“更好”，但它使用更少的内存和更少的开销，因为它直接遍历数组而不是先构建地图。

```
public static List<Integer> commonNumbers(int[] arr1, int[] arr2, int[] arr3, ... , int[] arrN) {
    List<Integer>toReturn = new LinkedList<Integer>();

    int len = arr1.length;
    int j = 0, k = 0, ... , counterN = 0;
    for (int i = 0; i < len; i++) {
        while (arr2[j] < arr1[i] && j < len) j++;
        while (arr3[k] < arr1[i] && k < len) k++;
        ...
        while (arrN[counterN] < arr1[i] && counterN < len) counterN++;
        if (arr1[i] == arr2[j] && arr2[j] == arr3[k] && ... && arr1[i] == arrN[counterN]) {
            toReturn.add(arr1[i]);
        }
    }

    return toReturn;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-25T15:14:11.397

好的 - 这里可能有点天真，但我认为线索是数组是按升序排列的。我的 java 生锈了，但这里有一些伪代码。我还没有测试过它，所以它可能并不完美，但它应该是一种快速的方法：

```
I = 1
J = 1
K = 1

While I <= Array1Count and J <= Array2Count and K <= Array3Count

   If Array1(I) = Array2(J)
      If Array1(I) = Array3(K)
         === Found Match
         I++
         J++
         K++
      else
         if Array1(I) < Array3(K)
            I++
         end if
      end if
   else
      If Array1(I) < Array2(J)
         I++
      else
         if Array2(J) < Array3(K)
            J++
         else
            K++
         end if
      end if
   end if
Wend 
```

这是 Option Base 1 - 您必须重新编码才能执行 option base 0（就像 java 和其他语言一样）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T15:15:09.543

您的解决方案是可以接受的，但它使用 NxM 空间。您可以使用 O(N) 空间（其中 N 是数组的数量）或 O(1) 空间来执行此操作。

**解决方案 #1（由 Luigi Mendoza 提供）**

假设有许多小数组（M << N），这可能很有用，导致 O(M*N*Log M) 时间和恒定空间（不包括输出列表）。

**解决方案#2**

按升序扫描数组，维护一个大小为 N 的最小堆，其中包含数组的最新访问值（和索引）。每当堆包含相同值的 N 个副本时，将该值添加到输出集合中。否则，删除最小值并使用相应的列表前进。

这个解的时间复杂度是 O(M*N*Log N)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-25T15:14:21.827

我认为另一种方法是做类似于我们在 Mergesort 中所做的事情：同时遍历所有数组，得到相同的数字。这将利用数组按排序顺序的事实，并且除了输出数组之外不会使用额外的空间。如果您只需要打印常见的数字，则不会使用额外的空间。

```
public static List<Integer> commonNumbers(int[] arrA, int[] arrB, int[] arrC) {
   int[] idx = {0, 0, 0};

   while (idxA<arrA.length && idxB<arrB.length && idxC<arrC.length) {
      if ( arrA[idx[0]]==arrB[idx[1]] && arrB[idx[1]]==arrC[idx[2]] ) {
          // Same number
          System.out.print("Common number %d\n", arrA[idx[0]]);
          for (int i=0;i<3;i++)
              idx[i]++;
      } else {
          // Increase the index of the lowest number
          int idxLowest = 0; int nLowest = arrA[idx[0]];
          if (arrB[idx[1]] < nLowest) {
             idxLowest = 1;
             nLowest = arrB[idx[1]];
          }
          if (arrC[idx[2]] < nLowest) {
             idxLowest = 2;
          }
          idx[idxLowest]++;
      }
   }
} 
```

为了使这更通用，您可能需要采用整数数组的数组，这将使您的代码更漂亮。数组索引必须存储在数组中，否则很难编写“递增指向最小数字的索引”代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-25T17:21:24.110

```
public static List<Integer> getCommon(List<List<Integer>> list){
    Map<Integer, Integer> map = new HashMap<Integer, Integer>();

    int c=0;
    for (List<Integer> is : list) {
        c++;
        for (int i : is) {
            if(map.containsKey(i)){
                map.put(i, map.get(i)+1);
            }else{
                map.put(i, 1);
            }
        }
    }
     List<Integer>toReturn = new LinkedList<Integer>();
    for(int key:map.keySet())
    {
        int count = map.get(key);
        if(count==c)toReturn.add(key);
    }
    return toReturn;
} 
```

# c++ - 从 C 数组移动到 std::map 运算符 `-` 陷阱

> ID：15618091
> 
> 赞同：-1
> 
> 时间：2013-03-25T14:59:42.497
> 
> 标签：c++, c

我有一个包含一些值的 C 样式数组。我需要它成为内存经济的映射（不是一次全部分配并保留而是根据需要分配）......它可以制成一个集合或进一步优化一个向量。但是我遇到了一个痛苦的陷阱：`val * v; auto val_index = v - val_collection`曾经给项目ID......现在这样的代码将无法编译。它会在 std::vector 的情况下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:14:05.190

`std::distance`可以为您提供与容器（或其他序列）开头的距离：

```
std::vector<val>::iterator v = whatever();
size_t val_index = std::distance(val_collection.begin(), v); 
```

对于随机访问容器（包括`vector`，但不包括`map`），如果您愿意，也可以使用`-`：

```
size_t val_index = v - val_collection.begin(); 
```

# javascript - jquery动态定位

> ID：15618093
> 
> 赞同：0
> 
> 时间：2013-03-25T14:59:45.677
> 
> 标签：javascript, jquery, html, css

我有一个嵌套在 div 中的动态文本区域。div 是可调整大小和可拖动的。我为 div 创建了一个删除图标，但希望删除图标位于 div 的 NE 角并在调整 div 大小时移动。

我用这段代码创建了 div、textarea 和 icon

```
 function NewTextArea(id)
    {   

    id=id+i;
    var newdiv = document.createElement('div');
    newdiv.setAttribute('id', id);
    newdiv.setAttribute('class', 'dragbox');
    newdiv.setAttribute('iterate',i);
    newdiv.style.position = "relative";
    newdiv.style.top = p;
    newdiv.style.left = p;
    newdiv.style.cursor='move';
    newdiv.innerHTML = "</div><br><textarea id='"+i +"'  onDblClick='editor1("+i+")' name='textarea["+i +"]' class='textarea1' style='position:absolute; top:10px;left:0px;overflow-y: auto;background-color:transparent;border: 2px dashed #000; '>some text here"+i+"</textarea>";
    newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='"+i+"' name='id["+i+"]'><br><input name='box_type["+i+"]' type='hidden' value='text'/>"; 
    newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='300' name='width["+i+"]' id='width"+i+"'><br><input type='hidden' value='300' name='height["+i+"]' id='height"+i+"'>";               
    newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='0' name='left["+i+"]' id='left"+i+"'><br><input type='hidden' value='0' name='top["+i+"]' id='top"+i+"'>"; 

    document.getElementById("frmMain").appendChild(newdiv); 

    var but=document.createElement('input');
    but.setAttribute('type','button');
    but.setAttribute('class','removebutton');       

    but.onclick=function(){
        if(confirm('Really delete?'))
        {
        document.getElementById("frmMain").removeChild(newdiv);
        document.getElementById(id).removeChild(but);
        document.getElementById(id).removeChild(newbr);
        }       
    }

    newbr=document.createElement('BR');
    document.getElementById(id).appendChild(newbr);
    document.getElementById(id).appendChild(but);

    $(function()
    {
        $("#"+i).resizable({autoHide:true})
        $("#"+id).hover(function () {
            $("#"+i).css('border', '2px dashed #000');         
        });
        $("#"+id).mouseleave(function () {
            $("#"+i).css('border', '0px dashed #000');         
        });
        $("#"+i).resizable(
            {
                stop: function(event, ui)
                {
                    var width = ui.size.width;
                    var height = ui.size.height;
                    // alert("width="+width+"height="+height);
                    ValProportions(width,height,ui.element.context.id);           
                }
            });

        $( "#"+id ).draggable(
            {
                stop: function(event, ui)
                {
                    Stoppos = $(this).position();
                    $("div#stop").text("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
                    // alert("left="+Stoppos.left+"top="+Stoppos.top);
                    ValPostion(Stoppos.left,Stoppos.top,$(this).attr('iterate'));   
                }
            }); 
        $("#"+i).draggable({handle:"#handle"}); 
    });  

    function ValProportions(defaultwidth, defaultheight,id)  { 
        $('#width'+id).val(defaultwidth);
        $('#height'+id).val(defaultheight);
    }

   function ValPostion(defaultleft,defaulttop,id)  {  
        $('#left'+id).val(defaultleft);
        $('#top'+id).val(defaulttop);
    }

    p=p+25;     
    i++; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:02:47.290

添加样式

```
.dragbox {
    position: relative;
}

.removebutton {
    position: absolute;
    top: 5px;
    right: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:29:26.147

在按钮上使用样式。

```
float:right 
```

将您的按钮放在 div 的右侧。只需确保将按钮作为 div 内的第一个元素。

# c# - 从其他计算机调试 C# 应用程序

> ID：15618094
> 
> 赞同：0
> 
> 时间：2013-03-25T14:59:47.227
> 
> 标签：c#, debugging, remote-debugging

我知道有很多关于它的主题，但我没有在那里找到帮助。

我有一个 C# 应用程序，它对我来说就像是一种魅力，但对其他客户却不是，并且异常没有说明它，因为它对我有用。所以我想看看其他客户端上打开的应用程序的代码，它没有 Visual Studio。我找到了类似远程调试器的东西，它可以连接，可以调试，但如果我有异常，代码如下所示：

```
6E93BE84  cmp         dword ptr [ecx],ecx  
6E93BE86  call        6E93D430 
6E93BE8B  pop         ecx  
6E93BE8C  pop         ebx  
6E93BE8D  pop         esi  
6E93BE8E  pop         edi 
```

我不是专业人士，我还没有读过这样的东西 :D 是否有可能调试带有断点等的真实代码？

非常感谢您提供的所有提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:02:25.413

从您为该客户端创建应用程序的那一刻起，如果您拥有 PDB 和源代码文件，则可以进行远程调试。更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/vstudio/bt727f1t (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bt727f1t(v=vs.100).aspx)

# ruby-on-rails - Rails：在该集合中的对象验证失败后呈现集合

> ID：15618095
> 
> 赞同：0
> 
> 时间：2013-03-25T14:59:47.610
> 
> 标签：ruby-on-rails

假设我有以下模型

**模型/用户.rb**

```
class User
  has_many :degrees
end 
```

**型号/degree.rb**

```
class Degree
  attr_accessible :name

  belongs_to :user

  validates :name, :presence => true
end 
```

`Users#show`我想在其中显示用户学位并提供用于创建新学位的表单。

**意见/用户/show.html.erb**

```
...

Your current degrees:
<%= render @user.degrees %>

Add a new degree:
<%= form_for Degree.new do |f| %>
  <%= f.text_field :name %>
  <%= f.submit "Submit" %>
<% end %>

... 
```

**意见/度/_degree.html.erb**

```
...
<%= degree.name %> 
```

所以在degrees_controller.rb里面我们有

**控制器/degrees_controller.rb**

```
class DegreesController < ApplicationController

  # ...

  def create
    degree = current_user.degrees.build(params[:degree])

    if degree.save
      redirect_to # somewhere with a flash message
    else
      render "users#show"
    end
  end
end 
```

问题在于在学位验证失败后对`render @user.degrees`内部的调用。`views/users/show.html.erb`如果我在不提供名称的情况下提交表单，则在调用该方法后度数对象会保留在内存中`render`，并将呈现`views/degrees/_degree.html.erb`无效对象的部分。此部分调用该`name`方法，该方法引发 Nil 错误。

我可以在视图中抛出条件（即，`unless degree.name.nil?`），但这对我来说很臭。如果程度对象上的属性增长，该部分将包含太多的条件逻辑。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:10:28.950

尝试这个，

```
<%= render @user.degrees.delete_if(&:new_record?) %> 
```

这将通过将未保存的记录从`degrees`.

把它移到你的控制器中会更干净，

```
@user_degrees = current_user.degrees.delete_if(&:new_record?) 
```

那么在你看来，

```
<%= render @user_degrees %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:07:07.940

我会看看 best_in_place gem。允许您从 #show 页面进行内联编辑，并且比提交到不同的控制器、清理集合等要干净得多。检查一下：[https ://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place)

# sql-server-2005 - 使用 Dapper 检索具有最少 DB 命中的父对象和子对象

> ID：15618096
> 
> 赞同：1
> 
> 时间：2013-03-25T14:59:47.943
> 
> 标签：sql-server-2005, dapper

对象层次结构可能类似于客户和订单，我希望所有客户的订单都作为 List 属性。通常，在 ado.net 中，我们遍历每个客户并加载他们的订单，这可能会导致 N 个客户的 N 个 DB 命中。那么，有没有办法直接在 Dapper 中实现这一点，如果没有，有没有更好的方法来实现这一点。

**编辑**

我想使用 join 一次检索所有记录，但客户会重复。同样，我需要从生成的 DTO 构造所需的对象。但我不知道这是否是最好的方法，或者可能还有其他我可能会错过的方法。wrt Dapper。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:07:16.550

您可以编写一个查询来连接客户和订单表。这将减少对 DB 的调用次数，但会增加从 db 获取的重复数据量。但这取决于您从客户表中获取的列数。

# c# - 注释命名空间不会影响 ToString() 方法

> ID：15618097
> 
> 赞同：1
> 
> 时间：2013-03-25T14:59:55.507
> 
> 标签：c#

今天有人给我看了一个代码片段，我想知道它是如何工作的：

```
//using System;
//using System.Collections.Generic;
//using System.Text;

namespace ConsoleApplication1
{
    class Test
    {
        int i = 0;
    }

    class Program
    {
        static void Main(string[] args)
        {
            Test obj = new Test();
            obj.ToString();
        }
    }
} 
```

我的问题是，如果我们已经注释了上述命名空间，那么该`ToString()`方法如何仍然与对象关联`obj`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T15:01:47.020

C#中的每个类都继承Object类，其中定义了ToString

# cvs - CVS 命令获取文件的当前修订号

> ID：15618098
> 
> 赞同：2
> 
> 时间：2013-03-25T15:00:00.060
> 
> 标签：cvs

我需要一种简单的方法来使用 cvs 获取文件的修订版本。我可以使用该`CVS/Entries`文件获取它。这不安全，我认为必须有另一种方法。`cvs log`打印的比我需要的多。如何使用 cvs 命令仅获取某些文件的修订号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:26:40.837

`cvs log -h`仅显示标题信息。要获得版本，很容易通过 sed、awk 或 Perl 过滤它。

这为您提供了存储库中的版本。如果您想要签出文件的版本，您可以使用`ident`（RCS 的一部分）——但前提是您在文件中包含了正确的关键字。（这不适用于二进制文件。）

例如，如果您在签入文件之前将以下内容添加到文件中：

```
# $Id:$
# $Source:$ 
```

然后`ident foo.txt`将打印如下内容：

```
foo.txt:
     $Id: foo.txt,v 1.3 2011/10/17 22:49:45 kst Exp $
     $Source: /path/to/repo/sandbox/foo.txt,v $ 
```

您可以使用许多其他关键字。有关详细信息，请参阅 CVS 手册的[关键字替换](http://ximbiot.com/cvs/manual/cvs-1.11.23/cvs_12.html)部分。

这可能会以各种方式出错；例如，如果您在签出文件后对其进行编辑，则扩展关键字不一定反映任何有意义的内容。您可以`cvs diff`在签出后确定文件是否已被修改。

正如我所提到的，如果您尝试对二进制文件执行此操作，它可能会损坏文件（这就是为什么如果您告诉 CVS 文件是二进制文件，它不会进行关键字替换）。

该`ident`命令是 RCS 的一部分，而不是 CVS，因此如果系统上还没有 RCS，则必须在系统上安装它。（有一个`cvs ident`命令是有意义的；我不确定为什么它不存在。）

更“现代”的源代码控制系统往往不提供这种功能。

# ruby-on-rails - 启动同一个作业的多个延迟作业进程

> ID：15618099
> 
> 赞同：8
> 
> 时间：2013-03-25T15:00:00.713
> 
> 标签：ruby-on-rails, ruby, jobs, delay

我在运行多个工作人员的设置中使用延迟作业。就我的问题而言，这并不重要，但假设我运行 10 个工人（目前在开发模式下这样做）。

我遇到的问题是两个不同的工作人员有时会开始从事同一个工作，在我的工作对象上调用 perform 方法。

据我所知，延迟作业正在使用悲观锁定来防止这种情况发生，但似乎有时在第一个工作人员有时间实际锁定它之前仍有足够的时间来锁定窃取作业。

我只是想看看其他人是否遇到过这个问题，或者是否是我的设置行为不端。我正在使用 Postrgres，这既发生在我的开发机器上，也发生在我托管它的 Heroku 上。

我会尝试在我的工作中解决它，但发生这种情况仍然有点问题。理想情况下，延迟的工作永远不会发生在两个进程的同一个工作上。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-02T21:20:21.163

我们通过 12 名工人的延迟工作运行了大约 6000 万个工作岗位，但从未收到过相关报告。您的延迟作业工作者正在运行的 SQL 是什么？您是否正在使用改变 postgres 锁定行为的 gem？

这是 DJ sql 对我来说的样子：

```
UPDATE "delayed_jobs" SET locked_at = '2014-05-02 21:16:35.419748', locked_by =
'host:whatever.local pid:4729' WHERE id IN (SELECT id FROM "delayed_jobs" 
WHERE ((run_at <= '2014-05-02 21:16:35.415923' 
AND (locked_at IS NULL OR locked_at < '2014-05-02 17:16:35.415947') 
OR locked_by = 'host:whatever.local pid:4729') AND failed_at IS NULL) 
ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING * 
```

您是否有任何其他代码的锁定问题？您能否尝试运行两个 Rails 控制台会话并执行以下操作：

控制台会话 1：

```
User.find(1).with_lock do sleep(10); puts "worker 1 done" end 
```

控制台会话 2：

```
User.find(1).with_lock do sleep(1); puts "worker 2 done" end 
```

同时启动这两个，如果 2 在 1 之前结束，你就会遇到比延迟工作更普遍的锁定问题。

# vaadin - Vaadin 中没有上传按钮的上传

> ID：15618101
> 
> 赞同：0
> 
> 时间：2013-03-25T15:00:05.200
> 
> 标签：vaadin

我想选择要上传的文件，然后让用户做一些其他的事情，然后当他点击提交按钮时，我想执行实际的上传。

如何在不使用上传按钮的情况下执行/开始上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:50:07.103

这就是`submitUpload()`诀窍`Upload`。

# database - Sparx Enterprise Architect Oracle XE 存储库：将列宽增加到 50 个字符以上

> ID：15618102
> 
> 赞同：0
> 
> 时间：2013-03-25T15:00:06.647
> 
> 标签：database, oracle, repository, enterprise-architect

我们正在使用 Sparx Enterprise Architect (EA 9.2) 和数据库支持的存储库（Oracle XE 11，使用 Windows OLE / ODBC 驱动程序）。我们所有人都在使用 Windows Vista 32 位。

我们在导入模型时反复遇到以下 EA 错误：

```
OraOLEDB
ORA-12899: value too large for column "REPOUSER"."T_CONNECTOR"."BTM_MID_LABEL" 
  (actual: 52, maximum: 50) 
```

似乎某些列的宽度只有 50 个字符。我想增加这个尺寸。因此，问题是：

1.  EA 9.2 是否支持更宽的列？有没有人成功地在实际项目中尝试过这个？
2.  如果“是”：EA 9.2 将如何应对 DB 端值的增加？我需要重新创建连接吗？
3.  如果这两个问题的答案都是“是”：有没有人*在运行时*“扩大”Oracle XE 11 的列而不转储并重新导入新模式的经验？

非常感谢，

米库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-18T01:30:49.460

此导入错误仅在 Oracle 中发生，可能是由于 Oracle 处理扩展字符范围的方式。

您必须解决其他三个选项： 1\. 如果有问题的连接器是 Stateflow，则运行 Enterprise Architect 的项目数据完整性检查：项目 -> 数据管理 -> 项目完整性检查

2.  如果它不是 StateFlow，那么您可以尝试在 Oracle NLS_LENGTH_SEMANTICS ='CHAR'上设置选项；但是我会先在非生产数据库上测试这个！！

3.  如果您清除数据库中的 TOP_MID_LABEL 字段，当 Enterprise Architect 再次加载图表时，它将用元素名称动态填充它（如果该字段为空）。

我相信 Sparx Systems 的开发人员在工作中有一种更简洁的方式来处理这个问题，所以了解他们，在不久的将来可能会有一些东西可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:41:32.193

要回答 yopur 问题的 Oracle 部分，加宽列很容易。Oracle 允许我们增加列大小，即使它们包含数据。（如果我们想减小列大小，这不是真的：那么我们必须使用空列并重新填充数据。）

所以语法是：

```
 alter table REPOUSER.T_CONNECTOR modify BTM_MID_LABEL varchar2(60) ; 
```

...或者您认为足够大的任何值。

# linux - 将 flex 的命令行参数作为搜索字符串

> ID：15618107
> 
> 赞同：1
> 
> 时间：2013-03-25T15:00:12.370
> 
> 标签：linux, flex-lexer

我使用 flex（不是 Adob​​e 类型的 linux/unix）来生成小型扫描仪。过去我一直使用静态搜索字符串。我现在想通过 getopt 提供一个字符串，然后能够使用它进行搜索，从而提供一个命令行提供的搜索字符串。

旧的搜索方式是：

```
.*"_"\n      ECHO; 
```

查找以下划线结尾的行。

现在我想这样搜索：

```
.*<arbitrary string>.*\n    ECHO; 
```

我不知道如何让 flex 接受`<arbitrary string>`. 我可以通过 getopt 获得它，但我无法让 flex 接受我的语法。

我正在做的是针对我遇到的特殊问题的特殊用途非常有限的 grep。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:52:35.160

```
.*\n { if(strstr(yytext, "arbitrary string")) ECHO; else REJECT; } 
```

如果 yytext 不包含“任意字符串”，则 REJECT 语句将跳到下一条规则。这当然不会提供与在编译时已知搜索字符串相同的性能。如果您正在实现自己的 grep 程序，glibc 中的 regcomp()/regexec() 可能比 flex 更快。

# c# - 导入 DLL 时，为什么方法必须声明为静态和外部？

> ID：15618113
> 
> 赞同：3
> 
> 时间：2013-03-25T15:00:33.097
> 
> 标签：c#

正如标题所问，当您导入诸如 User32.dll 之类的 DLL 并声明调用该 DLL 上的方法的方法时，为什么需要将这些方法声明为静态和外部。

IE，这是取自另一个 StackOverflow 答案，但演示了我的要求。

```
[DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
public static extern void mouse_event(uint dwFlags, uint dx, uint dy, uint cButtons, UIntPtr dwExtraInfo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:05:43.227

`static`- 由于它们不需要类的实例，这些方法是对系统 API 的调用，不需要任何初始化，可以在静态/非静态块中使用

`extern`- extern 修饰符用于声明在外部实现的方法。由于 API 方法未在类文件本身中声明，因此 extern 告诉编译器该方法在 else-where 中声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:06:18.823

虽然我真的不知道这是否有技术细节，但我想说的原因是：

**驻留在外部 DLL 中的静态**
方法不能绑定到任何对象实例。如果它们被绑定到一个对象实例，DLL 将不得不跟踪每次调用该方法的实例。

**extern**
我猜这只是一个关键字，告诉编译器插入用于绑定 DLL 的代码，而不是期望该方法在 C# 中实现。

# java - 对第二个单词进行排序

> ID：15618116
> 
> 赞同：0
> 
> 时间：2013-03-25T15:00:36.247
> 
> 标签：java, arrays

我想将输入作为名字和姓氏。之后，将根据姓氏进行排序并显示名字和姓氏。. 例如。

输入：-

```
John smith 
Albert kennedy
John dsouza 
```

输出

```
John dsouza
Albert kennedy
John smith 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:25:34.013

您需要创建自己的`Comparator`并`List`根据给定的`Comparator`. 这是演示：

```
import java.util.*;
class  SortLastName
{
    public static void main(String[] args) 
    {
        List<String> list= new ArrayList<String>();
        list.add("John smith");
        list.add("Albert kennedy");
        list.add("John dsouza");
        System.out.println("Before sorting :"+list);
        Collections.sort(list,new myComparator());
        System.out.println("After sorting :"+list);
    }
    static class myComparator implements Comparator<String>
    {
        public int compare(String str1,String str2)
        {
            String[] tokens1 = str1.split("\\s+");
            String[] tokens2 = str2.split("\\s+");
            int i = tokens1[1].compareTo(tokens2[1]);
            return i;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:07:31.333

您可以使用自定义字符串比较器来实现此目的：

```
public class LastNameComparator implements Comparator<String>{

    public int compare(String object1, String object2) {

        String name1 = object1.split("\\s+")[1].toUpperCase();
        String name2 =  object1.split("\\s+")[1].toUpperCase();

        return name1.compareTo(name2);

    }

} 
```

然后使用Collections排序方法

```
Collections.sort(namesList, new LastNameComparator()); 
```

请注意，您需要确保您的输入匹配：“FirstName LastName”格式以避免任何**ArrayOutofBoundException**，如果名称没有空格，或者如果名称有多个部分，则会出现意外结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:01:09.917

```
String[] names = { "John smith", "Albert kennedy", "John dsouza" };
Arrays.sort(names, new Comparator<String>() {

    @Override
    public int compare(String firstName, String lastName) {
        return firstName.split("\\s+")[1].compareTo(lastName.split("\\s+")[1]);
    }

});
System.out.println(Arrays.toString(names)); 
```

或创建一个为您执行此操作的方法，如下所示

```
private static Object[] sortLastName(Object[] a) {
    Object[] temp = new Object[a.length];

    for (int i = 0; i < temp.length - 1; i++) {
        if (a[i].toString().split("\\s+")[1].compareTo(a[i + 1].toString()                  .split("\\s+")[1]) < 0) {
            temp[i] = a[i];
            temp[i + 1] = a[i + 1];
        }
     }

    return temp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:03:48.393

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

/**
 *
 * @author pramod
 */
public class SortNames {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    String name1 = "John Smith";
    String name2 = "Albert kennedy";
    String name3 = "John dsouza";
    String name4 = "John Dsouza";
    String name5 = "Mark Smith";
    String name6 = "john Kennedy";

    ArrayList<String> inputStringList = new ArrayList<String>();
    inputStringList.add(name1);
    inputStringList.add(name2);
    inputStringList.add(name3);
    inputStringList.add(name4);
    inputStringList.add(name5);
    inputStringList.add(name6);
    System.out.println(inputStringList);
    System.out.println("\n\n\n");
    ArrayList<Name> nameList = sortByLastNames(inputStringList);
    System.out.println(nameList);

}

public static class Name implements Comparator<Name> {

    String fname;
    String lname;

    public Name() {
    }

    public Name(String fname, String lname) {
        this.fname = fname;
        this.lname = lname;
    }

    @Override
    public String toString() {
        return fname + " " + lname;
    }
    /*
     * Writing custom comparator to compare both the names. Code will
     * compare based on last name and then first name (ignores cases).
     */

    @Override
    public int compare(Name o1, Name o2) {
        return o1.lname.compareToIgnoreCase(o2.lname) != 0
                ? o1.lname.compareToIgnoreCase(o2.lname)
                : o1.fname.compareToIgnoreCase(o2.fname);
    }
}

/**
 * Code will split based on the first space.
 * Uses trim to remove the leading and ending spaces. Then,
 * Considers the string before first space as fname and string after first space as lname.
 * @param inputStringList - ArrayList<String> - input list of Strings that
 * needs to be sorted as names
 * @return - ArrayList<Name> - output List of Names that are sorted.
 */
public static ArrayList<Name> sortByLastNames(ArrayList<String> inputStringList) {
    if (inputStringList == null) {
        return null;
    }
    ArrayList<Name> nameList = new ArrayList<Name>();
    for (String fullName : inputStringList) {
        if (fullName != null && fullName.trim().equalsIgnoreCase("")) {
            int firstSpace = fullName.trim().indexOf(' ');
            String fname = "";
            String lname = "";
            if (firstSpace != -1) {
                fname = fullName.substring(0, firstSpace).trim();
                lname = fullName.substring(firstSpace, fullName.length()).trim();
            } else {
                fname = fullName;
                lname = "";
            }
            Name name = new Name(fname, lname);
            nameList.add(name);
        }
    }
    Collections.sort(nameList, new Name());
    return nameList;
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T15:02:16.597

Try looking into these, they should help

String Split [http://javarevisited.blogspot.co.uk/2011/09/string-split-example-in-java-tutorial.html](http://javarevisited.blogspot.co.uk/2011/09/string-split-example-in-java-tutorial.html)

Collections Sort [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T15:04:33.813

实现你自己的[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)，并使用[Collections.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)

# python - 如何覆盖 Django 的信号处理程序？

> ID：15618119
> 
> 赞同：2
> 
> 时间：2013-03-25T15:00:39.850
> 
> 标签：python, django, satchmo

在 Django 商店应用程序中，注册信号处理程序以执行某些操作，例如将商品添加到购物车。

我想用我自己的版本替换这个处理程序`localsite/models.py`，即。不触及原始来源。

如果只是调用`connect`方法

```
signals.satchmo_cart_add_verify.connect(my_veto_out_of_stock) 
```

自定义处理程序附加到当前接收者列表中，原始处理程序仍会执行操作：

```
print signals.satchmo_cart_add_verify.receivers
"""
[((140073113515864, 140073319632416), <weakref at 0x7f65502c1aa0;
to 'function' at 0x7f65502c7758 (veto_out_of_stock)>),
((140073114981632, 140073319632416), <weakref at 0x7f65504295d0;
to 'function' at 0x7f655042d500 (my_veto_out_of_stock)>)]
""" 
```

我可以提前删除原始处理程序

```
for hnd in signals.satchmo_cart_add_verify.receivers:
    del hnd 
```

但发现它丑陋和骇人听闻。

那么替换信号处理程序的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:10:58.687

你试过了[`Signal.disconnect`](https://docs.djangoproject.com/en/dev/topics/signals/#disconnecting-signals)吗？

```
signals.satchmo_cart_add_verify.disconnect(
    signals.satchmo_cart_add_verify.receivers[0][1]()) 
```

这种方式很清楚IMO。

# c# - EpiServer Web service 6.0，使用webservice时认证问题

> ID：15618120
> 
> 赞同：0
> 
> 时间：2013-03-25T15:00:42.013
> 
> 标签：c#, .net, web-services, episerver, episerver-6

我正在做一个控制台应用程序，它将告诉 EpiServer 网络服务添加一个页面。我的问题是我无法让认证工作。我在 Epi 后台创建了一个 web 服务用户。我可以使用我的帐户通过浏览器登录网络服务。

控制台应用程序的代码示例如下。

```
var client2 = new ContentChannel.ContentChannelServiceSoapClient();
client2.ClientCredentials.UserName.UserName = "username";
client2.ClientCredentials.UserName.Password = "password";
client2.Open();

client2.ImportPage1(null, "Pagename", null, null, "sv", newGuid, parentGuid, "pagetype");
client2.Close(); 
```

我得到的错误信息是

> System.Web.Services.Protocols.SoapException：服务器无法处理请求。
> ---> EPiServer.Core.EPiServerException：对于 EPiServer.WebServices.DataFactoryService.ValidateWebServiceAccess()的 EPiServer.WebServices.ContentChannelService的用户，用户没有访问远程站点上 Web 服务的“Permission.WebServiceAccess”访问权限.ValidateWebServiceAccess() at EPiServer.WebServices.ContentChannelService.ImportPage(String channelId, String pageName, String[] propertyKeys, String[] propertyValues, StringcultureName, Guid pageId, Guid parentPageId, String pageTypeName) --- 内部异常堆栈跟踪结束---

我不知道我是否需要在配置文件中展示我是如何完成的，但如果我应该添加它，请告诉我。如果有人知道如何从这里出发，请回答。提前致谢！

编辑

我收到名称错误，我收到登录提示，而不是表单身份验证，我可以使用一些 webservice-methods，例如

```
ContentChannel.GetMaxRequestLength() 
```

但每当我尝试正确使用网络服务或调用 ValidateWebServiceAccess()

```
System.Web.Services.Protocols.SoapException: Server was unable to
process request. ---> EPiServer.Core.EPiServerException: The user does
not have the 'Permission.WebServiceAccess' access right to access web
services on the remote site, for user andreas 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:08:52.003

首先，点击此链接设置和配置 Web 服务：[http ://world.episerver.com/Documentation/Items/Tech-Notes/EPiServer-CMS-6/EPiServer-CMS-60/Web-Services/](http://world.episerver.com/Documentation/Items/Tech-Notes/EPiServer-CMS-6/EPiServer-CMS-60/Web-Services/)

然后进入 EPIServer 管理模式，单击配置选项卡，然后单击安全子组中功能的权限，然后单击“允许用户充当 Web 服务用户”附近的编辑。添加您的用户，单击保存。

之后打开IE，然后打开你的本地网址`http://<yourlocalsite>/WebServices/ContentChannelService.asmx`

确保您没有被重定向到登录屏幕，而是接收浏览器登录/通过弹出窗口。尝试使用您的网络服务用户登录。

还要确保在您的代码中完成此操作：

> 使用 .NET soap 客户端与 EPiServer CMS 通信时，将属性 SoapHttpClientProtocol.PreAuthenticate 设置为 true 以确保在每次请求时将用户名和密码发送到服务器

# android - Android Widget Prev 和 Next 不起作用

> ID：15618124
> 
> 赞同：0
> 
> 时间：2013-03-25T15:00:59.827
> 
> 标签：android, android-widget

我正在为我的项目创建小部件。在该小部件中，上一个和下一个按钮可用。在同一小部件​​中，在主页中创建两次。如果我单击第一个小部件的 prev，则第二个小部件也会发生变化。我不想换另一个。

我的代码：

```
Intent WidgetIntent = new Intent(this, UpdateService.class);
PendingIntent NextIntent = PendingIntent.getService(this, 1, WidgetIntent.putExtra("dir", 1), PendingIntent.FLAG_UPDATE_CURRENT);
WidgetIntent.setData(Data);
WidgetIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);

Intent PrevIntent = new Intent(this, UpdateService.class);
PrevIntent.setData(Data);
PrevIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
PendingIntent PrevPIntent = PendingIntent.getService(this, 2, PrevIntent.putExtra("dir", -1), PendingIntent.FLAG_UPDATE_CURRENT); 
```

如果有人知道在这里分享。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:40:06.850

在这里查看我的答案 [如何知道点击的小部件 ID？](https://stackoverflow.com/questions/15551679/how-to-know-clicked-widget-id/15557194#15557194)

# eclipse - 严重：向 org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap 类的侦听器实例发送上下文破坏事件的异常

> ID：15618125
> 
> 赞同：0
> 
> 时间：2013-03-25T15:01:01.357
> 
> 标签：eclipse, maven, tomcat, eclipse-plugin, m2eclipse

我正在尝试为作业配置开发环境。我已经安装了 Apache Maven、Apache Tomcat 和 Eclipse Juno (Java EE)，以及所需的插件。我已经按照项目代码提供的 wiki 进行了操作。源是通过 SVN 导入的。我已经安装了所有缺少的库并设置了类路径。但是，当我选择在服务器上运行时，我总是会收到此错误：

```
Mar 25, 2013 3:32:18 PM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.22.
Mar 25, 2013 3:32:18 PM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].
Mar 25, 2013 3:32:18 PM org.apache.coyote.http11.Http11AprProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Mar 25, 2013 3:32:18 PM org.apache.coyote.ajp.AjpAprProtocol init
INFO: Initializing Coyote AJP/1.3 on ajp-8009
Mar 25, 2013 3:32:18 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1153 ms
Mar 25, 2013 3:32:18 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Mar 25, 2013 3:32:18 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.32
Mar 25, 2013 3:32:18 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor ephemere.xml
Mar 25, 2013 3:32:19 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class  org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
java.lang.NoClassDefFoundError: org/scannotation/AnnotationDB$CrossReferenceException
at      org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap.contextInitialized(ResteasyBootstrap.java:26)   at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.ClassNotFoundException:  org.scannotation.AnnotationDB$CrossReferenceException
at  org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
... 25 more
ServletContextListener started
Mar 25, 2013 3:32:19 PM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
Mar 25, 2013 3:32:19 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [/ephemere] startup failed due to previous errors
ServletContextListener destroyed
Mar 25, 2013 3:32:19 PM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class  org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap
java.lang.NullPointerException
at org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap.contextDestroyed(ResteasyBootstrap.java:38)
at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4244)
at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4879)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4749)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Mar 25, 2013 3:32:19 PM org.apache.catalina.loader.WebappClassLoader  clearReferencesThreads
SEVERE: The web application [/ephemere] appears to have started a thread named [pool-1-thread-1] but has failed to stop it. This is very likely to create a memory leak.
Mar 25, 2013 3:32:19 PM org.apache.coyote.http11.Http11AprProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Mar 25, 2013 3:32:19 PM org.apache.coyote.ajp.AjpAprProtocol start
INFO: Starting Coyote AJP/1.3 on ajp-8009
Mar 25, 2013 3:32:19 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 670 ms 
```

我已经安装了 scannotation 库，但似乎没有任何改变。另外，我猜 pom.xml 和 ephemere.xml 都没有问题，因为其他同学都没有遇到过这个问题。

# twitter-bootstrap - Twitter Bootstrap 模态加载和快速消失

> ID：15618129
> 
> 赞同：9
> 
> 时间：2013-03-25T15:01:11.720
> 
> 标签：twitter-bootstrap, modal-dialog

我不确定我在这里做错了什么，但我想将登录表单加载到模式窗口中。一旦我将隐藏添加到我的模式窗口的类中，它就会消失，当我点击我的按钮时，什么也没有发生。我将淡入淡出类添加到我的模态窗口中，窗口出现几秒钟然后消失。我不确定我做错了什么，但这是我正在使用的代码。任何帮助总是非常感谢。

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>

<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/custom.css" rel="stylesheet">

</head>

<body>
<a href="#myModal" data-toggle="modal">Login</a>

<div class="modal hide fade" id="myModal" aria-hidden="true">
<div class="modal-header">
    <h3>The Sports Freak Login</h3>
</div>
<div class="modal-body">
        <form>
            <label>Email</label>
            <input type="email" class="span4">
            <br>
            <label>Password</label>
            <input type="text" class="span4">
            <br><br>

            <button type="submit" class="btn btn-success">Logn</button>
            <button type="reset" class="btn">Clear</button>
        </form>
</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
</div>
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/bootstrap.js"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:43:57.233

当您还应该加载常规引导 css 文件（在响应之前）时，您只加载引导响应 css 文件，然后最后您应该加载自定义 css 文件。

此外，如果您正在加载最新的 bootstrap.js 文件，它包含所有引导 javascript 元素，因此您无需加载单独的 modal.js 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-31T07:38:44.413

对我来说，这不是 CSS 或双重加载的 JS 问题。我正在使用CDN。

对我来说，在没有其他解决方案的情况下，通过 onClick 调用模态是有效的。

```
onClick="$('#myModal').modal() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T05:40:04.363

我遇到了这个问题，因为我有两个“bootstrap/min.js”引用，一个是cdn，另一个是脚本文件引用，这两个评论中的一个让我无法使用某些下拉菜单

我刚刚从 Nuget Packet Manager 更新了“jQuery Validate Unobtrusive for Bootstrap 3”，它解决了我的问题

# c++ - 如何使用 openssl 或任何其他在智能卡上签名的库创建 PKCS7 signedData 结构？

> ID：15618132
> 
> 赞同：4
> 
> 时间：2013-03-25T15:01:20.310
> 
> 标签：c++, openssl, smartcard, pkcs#7

我需要创建 PKCS7 signedData 结构并在智能卡上执行签名。这几乎是 openssl 函数 PKCS7_sign 所做的，除了签名。也许有人可以为这个问题提供一些建议，即如何使用 openssl 或任何其他 c/c++ 跨平台库来做到这一点。至于 openssl，PKCS7_sign 函数的标志 PKCS7_PARTIAL 或 PKCS7_STREAM 似乎很有用。如果我使用这些标志中的任何一个，我可以获得几乎完整的 PKCS7 结构。在这种情况下，结构是完整的，只是它不包含“数据”和“符号”。所以我只需要添加这些元素。但我没有找到如何做到这一点的方法。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T08:59:45.063

You generally do not want (or are technically blocked) from extracting the private key from a smartcard. As this is sort of the very point of a smartcard - a tamper proof bit of crypto memory and connected CPU that will never divulge your private key.

So instead you need to ask the chipcard nicely to do the signing for you.

OpenSSL can do this - but needs to know how to talk to the chipcard. That is generally done with an 'engine'. Most commonly a pkcs#11 of #15 is used for this - in conjunction with the vendors chipcard (reader) driver.

You then typically need to get the slot and key identifiers:

```
# Extracting slot, auth ids and key id's for later use/reference
#
set `pkcs11-tool --module /usr/lib/opensc-pkcs11.so --list-slots | grep Slot | grep SCM`
SLOT=$2
set `pkcs15-tool --list-keys | grep ID`
AID=$4
KID=$7 
```

After which you can do 'things' on the card:

```
/usr/bin/openssl << EOM
engine dynamic -pre SO_PATH:/Library/OpenSC/lib/engines/engine_pkcs11.so  -pre ID:pkcs11 -pre LIST_ADD:1 -pre LOAD -pre MODULE_PATH:opensc-pkcs11.so
XXX -engine pkcs11 -b-key slot_$SLOT-id_$KID -keyform engine  ....
EOM 
```

One such thing can be signing a pkcs7\. From code - pretty much do the same thing. I usually use the app/util convenience stuf from openssl it's apps directory to make live a bit easier.

# smalltalk - 使用 Gemstone/S 分享海边会议

> ID：15618134
> 
> 赞同：3
> 
> 时间：2013-03-25T15:01:23.557
> 
> 标签：smalltalk, seaside, visualworks, gemstone

我正在使用 VisualWorks Smalltalk、Seaside 和 Gemstone/S 编写一个 Web 应用程序。

目前，只有当客户端始终返回相同的图像时，才能维持客户端的会话状态（尽管如果会话到期，客户端可以使用任何图像重新启动）。

我想了解使用 Gemstone/S 数据库共享会话状态是否可行。这意味着可以使用直接的 http 负载平衡，并且我不需要担心大量用户的图像亲和力。

我可以看到这一切都是通过 Seaside 的 Gemstone 实现“免费”完成的，但我想使用 Visualworks，因为它有一个更强大的 IDE，而且我已经熟悉它了。我可以在 Google 上找到的所有参考资料都假设使用 Gemstone smalltalk 和 Seaside 的 Gemstone 实现。

有人做过吗？如果是这样，是否有任何我可以遵循的发现或教程的记录？如果我在搜索中错过了一个明显的链接，但我真的看不到它，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:20:44.027

据我所知，没有简单的方法可以做到这一点。非常简化，忽略了 Seaside 进行的许多优化，Seaside 会话是等待恢复的执行堆栈的快照。将冻结的执行堆栈迁移到另一个映像并在那里重新启动它并非易事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:52:39.940

我们的应用程序使用相同的堆栈（Seaside、VW、GS），但我们没有使用 VW 和 GS 之间的完整 GBS 接口，它允许一个 VW 图像服务多个 Seaside 会话。然而，即使在这种组合中，也需要对每个大众图像的会话亲和性。

您在大众中开发 Seaside 应用程序的原因是有道理的。它确实是一个更好的开发环境，但是您可以考虑将开发和部署分开：在 VW 中编写代码并在 GLASS 中部署。这是使用 GLASS 的传统方式，尽管使用 Pharo 进行开发。

# jquery - 从 jquery ui datepicker maxDate 选项获取日期对象

> ID：15618135
> 
> 赞同：3
> 
> 时间：2013-03-25T15:01:24.173
> 
> 标签：jquery, jquery-ui, date, datepicker, maxdate

通过使用以下

```
var maxDate = $( ".selector" ).datepicker( "option", "maxDate" ); 
```

输出可以是“+1M”、“+20Y”、“12/12/2013”​​或更多。

'+1M' 和 '+20Y' 示例是否可以与本机 javascript 一起使用以添加到当前日期，以便我能够获得实际的日期对象？

我想用它来验证一组预设（当前周、月、日等）使用的以下功能

```
function SetDate(dateFrom, dateTo) {
        $('.dateFrom').attr('value', dateFrom);
        $('.dateTo').attr('value', dateTo);
    } 
```

[参考](http://api.jqueryui.com/datepicker/#option-maxDate)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:27:06.247

经过一番搜索后，我找到[了“jQuery datepicker getMinDate '+1d'”的答案](https://stackoverflow.com/a/2886384/151625)

我决定使用用户发布的第二个示例：

```
var minDateAttr = $(elem).datepicker("option", "minDate");
var inst = $(elem).data("datepicker");
var minDateObj = $.datepicker._determineDate(inst, minDateAttr, new Date()); 
```

# php - 使用 regexp + concat 准备好的语句中的 MySql 查询语法问题

> ID：15618138
> 
> 赞同：0
> 
> 时间：2013-03-25T15:01:37.740
> 
> 标签：php, mysql, regex, prepared-statement, concat

我正在重新审视我的旧时尚 mysql 相关代码并将它们转换为准备好的语句形式。
下面的查询工作正常。

```
$sorgu = "SELECT * FROM tb_yazilar WHERE kolon_etiketler REGEXP '[[:<:]]".$adres_get_elemanlari[2]."[[:>:]]' ORDER BY kolon_sno DESC"; 
```

## 更新准备好的语句后，我的整个代码是

```
$sorgum = "SELECT kolon_yazar, kolon_baslik, kolon_ytarihi FROM tb_yazilar WHERE kolon_etiketler REGEXP CONCAT('[[:<:]]"', ?, '"[[:>:]]') AND kolon_statu = ? ORDER by kolon_onaytarihi DESC";

if ($beyan = $db_baglanti->prepare($sorgum)) 
{
    /* bind parameters */
    $beyan -> bind_param("ss", $bindparametre1, $bindparametre2);

    /* assign values to bind parameters */
    $bindparametre1 = tire_bosluk_olsun($_GET['rd_ozne']);
    $bindparametre2 = 'onay';

    /* execute statement */
    $beyan->execute();

    /* bind result variables */
    $beyan->bind_result($yazar, $baslik, $ytarihi);

echo "\t".'<div class="sol-icerik-kapsar">'."\r\n";
echo "\t\t".'<h1>'.$_GET['rd_ozne'].'İLE ETİKETLENDİRİLMİŞ YAZI(LAR)</h1>'."\r\n";
echo "\t\t".'<ul>'."\r\n";
    /* fetch values */
    while ($beyan->fetch()) 
    {
        echo "\t\t\t".'<li>'.'<a href="'.sitenin_koku.'yazılar/'.bosluklar_tire_olsun($yazar).'/'.bosluklar_tire_olsun(noktalamasiz($baslik)).'">'.$baslik.'</a>'.' - '.turkcetarih('j F Y',$ytarihi).'</li>'."\r\n";
    }
echo "\t\t".'</ul>'."\r\n";
echo "\t".'</div>'."\r\n";  
    /* close statement */
    $beyan->close();
}
else {echo "Hazırlama hatası: (" . $db_baglanti->errno . ") " . $db_baglanti->error;} 
```

## 错误信息

解析错误：语法错误，第 2 行中的意外 ''、?、'' (T_CONSTANT_ENCAPSED_STRING)

需要您的帮助，因为我无法通过堆栈溢出或谷歌搜索来解决我的问题。

谢谢

BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:03:45.573

A syntax-highlighting text editor would help you out here.

You have `"` nested inside `"`. They need to be escaped like `\"`.

```
$sorgum = "SELECT kolon_yazar, kolon_baslik, kolon_ytarihi FROM tb_yazilar WHERE kolon_etiketler REGEXP CONCAT('[[:<:]]\"', ?, '\"[[:>:]]') AND kolon_statu = ? ORDER by kolon_onaytarihi DESC"; 
```

# ios - 底部UITableView隐藏时如何让UIScrollView占据屏幕高度？

> ID：15618143
> 
> 赞同：0
> 
> 时间：2013-03-25T15:01:50.853
> 
> 标签：ios, objective-c, uitableview, uiscrollview

我有一个`UIView`有两个子元素的a：`UIScrollView`上半部分（包含两个`UILabel`s）和`UITableView`底部的a。这基本上是一个字典，滚动视图的目的是显示单词和定义，以及显示相关单词的表格视图。并非字典中的所有单词都有与之关联的相关单词数组，因此我隐藏了`UITableView`该数组为空的情况。

但是，当隐藏时，我无法`UIScrollView`填充整个父视图。`UITableView`这是我到目前为止所尝试的：

```
- (void)updateUIWithWord:(NSString *)theWord
           andDefinition:(NSString *)theDefinition
    andRelatedWordsArray:(NSArray *)theRelatedWordsArray {
    self.navigationItem.title = theWord;
    self.word.text = theWord;
    self.definition.text = theDefinition;
    self.relatedWordsArray = theRelatedWordsArray;

    if (![relatedWordsArray count]) {
        relatedWordsTableView.hidden = YES;

        // set the UITableView's width and height to 0 just to be sure
        // I feel this isn't needed though
        CGRect relatedWordsTableViewFrame;
        relatedWordsTableViewFrame.size = CGSizeMake(0, 0);
        relatedWordsTableView.frame = relatedWordsTableViewFrame;

        // then make the scroll view occupy the remaining height;
        // that is, the self.view's actual height
        CGRect scrollViewFrame;
        scrollViewFrame.origin = CGPointMake(0, 0);
        scrollViewFrame.size = CGSizeMake(self.view.frame.size.width, self.view.frame.size.height);
        scrollView.frame = scrollViewFrame;
    }
} 
```

简单地说，这是行不通的。对于任何没有相关词且定义很长的词，滚动视图仅占据相同的高度，即使表格视图消失。帮助？

**添加**：我尝试修复 中的约束`UIScrollView`以使其相对于顶部`UITableView`而不是具有固定高度，但这似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:08:33.753

你有一个“if”和一个“else”。只有*其中一个*会执行。因此，当“if”部分运行并`relatedWordsTableView.hidden`设置为 YES 时，表格视图被隐藏，但没有其他任何事情发生。“其他”部分没有运行，所以什么也没有发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:40:42.147

以不同的方式解决问题。我把它`UIScrollView`占据了整个屏幕并将它放在`UITableView`里面，在我的两个标签下面，禁用滚动。现在我可以隐藏和显示它。

# ember.js - 类型错误：对象# has no method 'set' once a certain process is done I need to set a boolean to true in order to update the template. I can easily get the object, but setting a property seems to be more difficult. What I use to ge 问问题 问问题 2013-03-25T15:02:02.160 1211 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. once a certain process is done I need to set a boolean to true in order to update the template. I can easily get the object, but setting a property seems to be more difficult. What I use to get the object is var found = self.get('content').findProperty('id', self.datasetid); If I do that in the chrome console I can clearly see that I get an ember object back: Object {id: 1, active: true} __ember1364221685101_meta: Meta active: true get data_set: function () { id: 1 set data_set: function (value) { __proto__: Object When I do: found.set('data_set.fully_geocoded', true); I do get the error mentioned in title. I've tried as many different flavours as I could think of, but all with the same result. Could somebody shine a light on this? Login to craigslist to retrieve account page using Delphi and Indy and SSL I am trying to log into craigslist using Delphi, and retrieve my account page (in order to gather a listing of all my posts) However, I can't seem to get the login to work, what Am I doing wrong? function TfrmMain.Login: string; var IdHTTP: TIdHTTP; Request: TStringList; Response: TMemoryStream; begin Result := ''; try Response := TMemoryStream.Create; try Request := TStringList.Create; try Request.Add('op=login'); Request.Add('redirect=http://newyork.craigslist.org/'); Request.Add('login=' + myEmail); Request.Add('password=' + myPassword); IdHTTP := TIdHTTP.Create; try IdHTTP.AllowCookies := True; IdHTTP.HandleRedirects := True; IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded'; IdHTTP.Post('https://accounts.craigslist.org/login', Request, Response); Result := IdHTTP.Get('https://accounts.craigslist.org/'); finally IdHTTP.Free; end; finally Request.Free; end; finally Response.Free; end; except on E: Exception do ShowMessage(E.Message); end; end; I get a exception class EIdIOHandlerPropInvalid with message 'IOHandler value is not valid' on the line: IdHTTP.Post('https://accounts.craigslist.org/login', Request, Response); thanks ember.js 4 1 回答 1 This answer is useful 2 AnObject不是 Ember.Object 的实例，而是基 Javascript 类Object，因此它不会有getandset方法。 您可以通过使用Ember.getandEmber.set直接传入对象来获得许多相同的功能，如下所示： Ember.set(found, 'data_set.fully_geocoded', true) Ember.get(found, 'data_set.fully_geocoded') 计算属性和观察者也可以基于使用Ember.set这种方式触发。 于 2013-03-25T16:19:28.477 回答 Related 2 ruby-on-rails - 在 Rails Create Action 中控制执行顺序 3 c - How to assign a value to an enum member at runtime? 3 android - How to check thread completed in android? 3 javascript - jquery : How to unbind dynamically created elements? 0 multithreading - fds的对称线程和公平处理 0 python - 各种 Python 脚本偶尔崩溃：“XXX 歧义！” 4 android - viewpager 中的垂直滚动 1 bash - ${!arr[*]} is different in bash and ksh? 5 html - 如何在没有项目符号的文本下划线 2 shell - shell脚本中scen$i的含义 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15618147
> 
> 赞同：1
> 
> 时间：
> 
> 标签：ember.js

once a certain process is done I need to set a boolean to true in order to update the template.

I can easily get the object, but setting a property seems to be more difficult. What I use to get the object is

```
var found = self.get('content').findProperty('id', self.datasetid); 
```

If I do that in the chrome console I can clearly see that I get an ember object back:

```
Object {id: 1, active: true}
__ember1364221685101_meta: Meta
active: true
get data_set: function () {
id: 1
set data_set: function (value) {
__proto__: Object 
```

When I do:

```
found.set('data_set.fully_geocoded', true); 
```

I do get the error mentioned in title. I've tried as many different flavours as I could think of, but all with the same result.

Could somebody shine a light on this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:19:28.477

An`Object`不是 Ember.Object 的实例，而是基 Javascript 类`Object`，因此它不会有`get`and`set`方法。

您可以通过使用`Ember.get`and`Ember.set`直接传入对象来获得许多相同的功能，如下所示：

```
Ember.set(found, 'data_set.fully_geocoded', true)
Ember.get(found, 'data_set.fully_geocoded') 
```

计算属性和观察者也可以基于使用`Ember.set`这种方式触发。

# delphi - 使用 Delphi 和 Indy 和 SSL 登录到 craigslist 以检索帐户页面

> ID：15618148
> 
> 赞同：0
> 
> 时间：2013-03-25T15:02:08.323
> 
> 标签：delphi, http, delphi-2010, indy

我正在尝试使用 Delphi 登录 craigslist，并检索我的帐户页面（以收集我所有帖子的列表）

但是，我似乎无法让登录工作，我做错了什么？

```
function TfrmMain.Login: string;
var
  IdHTTP: TIdHTTP;
  Request: TStringList;
  Response: TMemoryStream;
begin
  Result := '';
  try
    Response := TMemoryStream.Create;
    try
      Request := TStringList.Create;
      try
        Request.Add('op=login');
        Request.Add('redirect=http://newyork.craigslist.org/');
        Request.Add('login=' + myEmail);
        Request.Add('password=' + myPassword);
        IdHTTP := TIdHTTP.Create;
        try
          IdHTTP.AllowCookies := True;
          IdHTTP.HandleRedirects := True;
          IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded';
          IdHTTP.Post('https://accounts.craigslist.org/login', Request, Response);
          Result := IdHTTP.Get('https://accounts.craigslist.org/');
        finally
          IdHTTP.Free;
        end;
      finally
        Request.Free;
      end;
    finally
      Response.Free;
    end;
  except
    on E: Exception do
      ShowMessage(E.Message);
  end;
end; 
```

我得到一个异常类 EIdIOHandlerPropInvalid 并在行上显示消息“IOHandler 值无效”：

```
IdHTTP.Post('https://accounts.craigslist.org/login', Request, Response); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:29:54.547

请参阅[(Indy) TIdHTTP EIdSocketError Socket Error # 0 下载文件时的异常](https://stackoverflow.com/questions/13233648/indy-tidhttp-eidsocketerror-socket-error-0-exceptions-when-downloading-files)和评论中的建议。看来您应该升级到更新版本的 Indy。

# ios - Core Data - Multiple entities

> ID：15618149
> 
> 赞同：-3
> 
> 时间：2013-03-25T15:02:11.277
> 
> 标签：ios, core-data, entities

Fellows!

I have an app using Core Data where I created one Entity (let's call "Entity1") and one attribute. I implemented it and the app was running perfectly. It was reading, writing and deleting datas.

So, I created a second entity ("Entity2") and I didn´t implement any code related to "Entity2". However, neither "Entity1" nor "Entity2" was running anymore.

After that, I deleted "Entity2" and the app started working perfectly again.

Could you tell me if there is any secret to create multiple entities in Core Data.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:28:17.577

这是因为您的模型文件（xcdatamodel）和您现有的数据库不匹配。尝试在模拟器或开发设备中删除您的应用程序，然后再次构建并运行，应该可以了。

而且，这只是为了开发。当你发布了你的应用程序，然后想要更改数据库模型时，不可能要求你的用户“删除你的应用程序并重新安装”。这个时候，你需要一个[核心数据模型版本控制和数据迁移](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEkQFjAC&url=http://developer.apple.com/library/ios/documentation/cocoa/Conceptual/CoreDataVersioning/&ei=C2xQUb6-GcmhkwXp7oCIDA&usg=AFQjCNHPrDr-VP90NH8pf1t2uqH6XciMPw&sig2=hZWmNSYku-ydRBcVV__CXQ)。不过那是另一回事了。

我认为你应该从核心数据的基础开始。请参阅[本教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)以熟悉它。:)

# go - 从 2d 数组中转到 lang 切片列？

> ID：15618155
> 
> 赞同：9
> 
> 时间：2013-03-25T15:02:26.367
> 
> 标签：go, multidimensional-array, slice

我很好奇，你如何从二维数组创建列切片？

我有一个用于井字游戏棋盘的数组，我正在尝试创建一个列切片，但我的切片结果相同。

```
/* Just trying to get rows and columns working first */

func() isWin() bool {
  win := make([]char, SIZE*2)
  for i:= range BOARD {
    fmt.Println("Row")
    win[i] = check(BOARD[i][0:SIZE])
    fmt.Println("Column")
    win[i+SIZE] = check(BOARD[0:SIZE][i])
  }
return false
}

func() check(slice []char) (char) {
  fmt.Println(slice)
  return "-"
} 
```

我给它以下输入：

```
[E E E E]
[E E E E]
[X O E E]
[X O E E] 
```

我得到了回报

```
Row
[X O E E]
Column
[X O E E] 
```

但我想要一个回报

```
Row
[X O E E]
Column
[E E X X] 
```

我怎么做这个切片？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T15:33:31.080

切片语法无法实现您想要做的事情。您认为这`x[i][0:n]`将使您获得 row 的所有列`i`。它实际上所做的是将列返回`0`到`n`from row `i`。

您必须使用循环来获取一列：

```
func boardColumn(board [][]char, columnIndex int) (column []char) {
    column = make([]char, 0)
    for _, row := range board {
        column = append(column, row[columnIndex])
    }
    return
} 
```

您用“行”标记的代码实际上是我期望提供列的代码：

```
win[i] = check(BOARD[0:SIZE][i]) 
```

从语义上讲，切片索引表示：将`i`所有元素中的第 th 个元素从零变为 SIZE。但是，如前所述，Go 切片的工作方式不同。[自己试试](http://play.golang.org/p/OqNalVfjlq)：

```
x := [][]int{{1,2,3},{4,5,6}}
fmt.Println(x[0:2]) // [[1,2,3],[4,5,6]]
fmt.Println(x[0:2][0]) // [1,2,3] 
```

正如您在上面示例的第二行中看到的那样，`x[0:2]`返回完整的二维切片。因此，获取第一个元素会返回该 2d 切片的第一行。

# python - python类/子类继承背后的基本原理

> ID：15618158
> 
> 赞同：3
> 
> 时间：2013-03-25T15:02:32.150
> 
> 标签：python, class, inheritance, subclass

当我创建如下所示的父类和子类时，为什么父类的参数不会自动被子类拉入？

我知道显式更好，但我想知道这段代码在什么情况下......

```
class testParent(object):
    def __init__(self,testParentParam1,testParentParam2):
        pass

class testChild(testParent):
    def __init__(self,testParentParam1,testParentParam2,testChildParam1,testChildParam2):
        pass 
```

比这段代码好...

```
class testParent(object):
    def __init__(self,testParentParam1,testParentParam2):
        pass

class testChild(testParent):
    def __init__(self,testChildParam1,testChildParam2):
        pass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:07:33.347

派生类扩展基类。这意味着他们可能在施工时需要更多/更少/不同的信息来进行扩展。考虑：

```
class BaseTextDocument(object):
    def __init__(self, content):
        self.content = content

class WordDocument(object):
    def __init__(self, path, word_version="guess_from_file"):
        content = parse_word_document(path, word_version)
        super(WordDocument, self).__init__(content) 
```

# django - 更改表单集的表单初始值 Django 基于类的视图

> ID：15618159
> 
> 赞同：2
> 
> 时间：2013-03-25T15:02:35.227
> 
> 标签：django, django-forms

大家早上好。问题是我想在给定条件的情况下通过另一个表单值更改字段值。我正在使用 django-extra-views 包来显示一个表单集：

```
def get_context_data(self, **kwargs):
    context = super(MyView, self).get_context_data(**kwargs)
    formset = context['formset']
    if self.object.bool_field: 
        for frm in formset:
            frm.fields['another_field'].initial = frm.instance.value
    context['formset'] = formset
    return context 
```

条件很好，我记录了一些信息并且工作正常。但是在呈现表单时， another_field 字段的值不正确。我猜表单集是不可变的（没有给出错误），我在这里遗漏了什么？

提前致谢

# c# - WebRequest.Create 抛出 IOException “指定的注册表项不存在。”

> ID：15618163
> 
> 赞同：6
> 
> 时间：2013-03-25T15:03:01.007
> 
> 标签：c#, .net, registry, webrequest, ioexception

我正在调用这行代码来访问 azure 服务器：

```
var request = (HttpWebRequest)WebRequest.Create(uri); 
```

并收到此异常。有谁知道如何管理它？

```
mscorlib.dll!Microsoft.Win32.RegistryKey.Win32Error(int errorCode, string str) + 0x189 bytes    
mscorlib.dll!Microsoft.Win32.RegistryKey.GetValueKind(string name) + 0x7f bytes 
System.dll!System.Net.HybridWebProxyFinder.InitializeFallbackSettings() + 0xb8 bytes    
System.dll!System.Net.HybridWebProxyFinder.HybridWebProxyFinder() + 0x1e bytes  
[Native to Managed Transition]  
[Managed to Native Transition]  
System.dll!System.Net.HybridWebProxyFinder.HybridWebProxyFinder(System.Net.AutoWebProxyScriptEngine engine) + 0x37 bytes    
System.dll!System.Net.AutoWebProxyScriptEngine.AutoWebProxyScriptEngine(System.Net.WebProxy proxy, bool useRegistry) + 0x190 bytes  
System.dll!System.Net.WebProxy.UnsafeUpdateFromRegistry() + 0x67 bytes  
System.dll!System.Net.WebProxy.WebProxy(bool enableAutoproxy) + 0x44 bytes  
System.dll!System.Net.Configuration.DefaultProxySectionInternal.DefaultProxySectionInternal(System.Net.Configuration.DefaultProxySection section) + 0x3d9 bytes 
System.dll!System.Net.Configuration.DefaultProxySectionInternal.GetSection() + 0xbe bytes   
System.dll!System.Net.WebRequest.InternalDefaultWebProxy.get() + 0x7e bytes 
System.dll!System.Net.HttpWebRequest.HttpWebRequest(System.Uri uri, System.Net.ServicePoint servicePoint) + 0x18d bytes 
System.dll!System.Net.HttpRequestCreator.Create(System.Uri Uri) + 0x50 bytes    
System.dll!System.Net.WebRequest.Create(System.Uri requestUri, bool useUriBase) + 0x2ec bytes   
System.dll!System.Net.WebRequest.Create(string requestUriString) + 0xa3 bytes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-10T12:46:55.290

这个解决方案帮助[HttpClient 请求抛出 IOException](https://stackoverflow.com/questions/13141434/httpclient-request-throws-ioexception/13745641#13745641)，尽管我们有不同的调用堆栈。

您需要在注册表中创建这些键。

路径：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework

钥匙：

名称：“LegacyWPADSupport”类型：“dword”数据：00000000

路径：HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework

钥匙：

名称：“LegacyWPADSupport”类型：“dword”数据：00000000

# c# - 插入 ms 访问数据库

> ID：15618165
> 
> 赞同：-2
> 
> 时间：2013-03-25T15:03:03.640
> 
> 标签：c#, ms-access

我使用以下代码将记录从一个数据库插入到另一个数据库，但它不起作用。我在 MS-ACCESS 2007 中尝试了查询，它工作正常，但是从我的 C# 代码以编程方式调用时它不起作用？

```
string query_insert = "INSERT INTO Questionnaires_Table(BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees) "
+ "SELECT BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees "
+ "FROM Questionnaires_Table IN '" + dialog.FileName + "' Where Branch_ID = " + textBox1.Text ;

dbConnDest.Open();

OleDbDataAdapter dAdapter = new OleDbDataAdapter();
OleDbCommand cmd_insert = new OleDbCommand(query_insert, dbConnDest);

dAdapter.InsertCommand = cmd_insert;

textBox2.Text = query_insert.ToString();

dbConnDest.Close(); 
```

当我获取`query_insert`in ms 访问的内容时，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:06:38.577

我认为你需要使用

```
cmd_insert.executeNonQuery() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:17:35.600

删除列表中最后一个字段名称后的逗号`SELECT`。

```
"SELECT BranchName,Factor,Region,Branch_ID,Current_Date,No_Employees" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:12:15.620

dAdapter.Update(); 应该做的伎俩

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T18:25:56.007

这似乎很可疑：

```
 " Where Branch_ID = " + textBox1.Text ; 
```

是否`textBox1`包含数字 ID？输入的 ID 是否存在于源数据库中？

我会 1) 检查 ID 是否存在，如果不存在则警告用户，以及 2) 更改查询以使用参数而不是连接 SQL。

如果您的公司使用 ID 开设分支机构会发生什么情况

```
"1; DROP TABLE Branches" 
```

# cronexpression - 8点到9点30的每5分钟怎么表达？

> ID：15618172
> 
> 赞同：5
> 
> 时间：2013-03-25T15:03:23.367
> 
> 标签：cronexpression

是否可以通过单个表达式安排作业从周一到周五从 8 点到 9.30 点每 5 分钟运行一次？我唯一想到的就是把它分成两部分，8-9 和 9-9.30。然后会有两个表达式：* */5 8 * * MON-FRI 和 * 5-30/5 9 * * MON-FRI。

# android - Android 中的内存不足错误 - 为什么 GC 不起作用？

> ID：15618176
> 
> 赞同：0
> 
> 时间：2013-03-25T15:03:35.087
> 
> 标签：android, user-interface, garbage-collection, out-of-memory

我正在开发一个由不同屏幕组成的应用程序，我将其设计为具有不同布局的不同活动。对于每个屏幕，有两个大 (1536x2048) png 文件，用作覆盖背景（它们是 alpha 混合的）。目前，活动的布局 xml 文件是这样的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/backgroundPic0" 
tools:context=".TakvimActivity" >

    <ImageView
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="@drawable/backgroundPic1" 
     />

</RelativeLayout> 
```

目前，我能够从主要活动前往三个不同的活动。我只是简单地这样做

```
 Intent intent = new Intent(this, TakvimActivity.class);
    startActivity(intent); 
```

我知道每次启动新活动并`setContentView`调用该方法时，背景图像都会消耗大约 24 MB 的内存。当我第一次前往新屏幕时，返回主屏幕并前往第二个新活动时，应用程序由于内存不足异常而崩溃，并显示“在 blabla-byte 分配上内存不足”。（请注意，它不会完全在第二个 Activity 转换时崩溃，有时在第三个转换时会崩溃。）在我看来，当我从一个活动。我检查了当前活动是否通过覆盖`onDestroy`方法，我看到它被正确调用。GC 不应该在 Activity 被销毁时清除所有与 UI 相关的内存，因为对其视图层次结构的引用被删除了吗？是否有我遗漏的东西，例如，是否有明确的方法来清除我的代码中没有包含的 Activity 的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-26T10:24:17.613

如果 imageview 本身是 GC 的，那么问题对我来说就消失了。在 imageview 本身上调用 unbindDrawables 是不够的。

另请参阅我的答案here

[PagerAdapter Android Lollipop 上的 unbindDrawables 不起作用](https://stackoverflow.com/questions/33497315/unbinddrawables-at-pageradapter-android-lollipop-dont-work/35011567#35011567)

和我的类似但 Android Studio 集中的问题在这里

[泄漏的未引用字节 [] 最初来自位图，但被回收（）导致内存泄漏（直到活动停止）](https://stackoverflow.com/questions/34999781/leaked-unreferenced-byte-originally-from-bitmap-but-recycled-causing-memory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:13:35.947

尝试将以下方法添加到您的应用程序并从您的活动中调用它：

```
private void unbindDrawables(View view) {
    try
    {
        if (view.getBackground() != null) {
               view.getBackground().setCallback(null);
               }
        if (view instanceof ViewGroup) {
             for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                 unbindDrawables(((ViewGroup) view).getChildAt(i));
             }
             ((ViewGroup) view).removeAllViews();
          }         
        }
    catch(Exception e)
    {
        e.printStackTrace();            
    }

}

@Override
protected void onDestroy()
{
super.onDestroy();
//R.id.LayoutId is the id of the root layout of your activity   
unbindDrawables(findViewById(R.id.LayoutId)); 
    System.gc();

} 
```

# powershell - PowerShell、Office365：设置邮箱参数引发错误

> ID：15618178
> 
> 赞同：0
> 
> 时间：2013-03-25T15:03:39.053
> 
> 标签：powershell, office365

我正在使用 PowerShell 来管理我的 Office365 帐户。当我尝试为现有邮箱设置参数时，PowerShell ISE 引发错误。当我将“RetentionComment”、“LitigationHoldEnabled”、“RetentionUrl”或“MaxSendSize”指定为 Set-Mailbox 函数时，会发生以下错误：

> 找不到接受参数“-maxsendsize”的位置参数。
> + CategoryInfo : InvalidArgument: (:) [Set-Mailbox], ParameterBindingException
> + FullyQualifiedErrorId : PositionalParameterNotFound,Set-Mailbox`

这些参数记录在 TechNet 文档库中， 网址为[http://technet.microsoft.com/en-en/library/bb123981(v=exchg.150).aspx](http://technet.microsoft.com/en-en/library/bb123981(v=exchg.150).aspx)

例如，我使用以下带有参数的命令：

> Set-Mailbox -Identity "my.mailbox" -MaxSendSize 12345
> Set-Mailbox "my.mailbox" -RetentionComment "Hello World!"
> Set-Mailbox -Identity "my.mailbox" -LitigationHoldEnabled:$False

任何想法？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:22:34.587

MaxSendSize 仅在 Exchange 2013 或 Exchange Online 2013 中受支持。如果您的租户尚未升级到第 15 波（2013 套件），您将无法使用此命令。此外，如果您设置了 ADFS，您也可能无法运行此命令，因为它必须在 AD 中设置，而不是在 Exchange 中。希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-05T14:19:50.130

对于`-MaxSendSize 12345B`我认为您必须在末尾添加一个单位，以便`-MaxSendSize 12345B`可用单位为 B/MB/GB/TB。

*只有在RetentionHoldEnabled*参数设置为 $true时`-RetentionComment`才能设置此注释。所以先检查一下。

 *因为`-LitigationHoldEnabled`你不需要那个：在那里`-LitigationHoldEnabled $false`*

# python - CamShift + Face detection in OpenCv

> ID：15618183
> 
> 赞同：6
> 
> 时间：2013-03-25T15:03:48.577
> 
> 标签：python, opencv, image-processing, face-detection, video-tracking

I'm currently combing two examples from OpenCv which let you detect your face and track object. The purpose is to first detect the face and then track it.

My code currently :

```
import numpy as np
import cv2
import cv2.cv as cv
import video
import math

cascade = 0
counter = 0

class App(object):
    def __init__(self, video_src):
        self.cam = video.create_capture(video_src)
        ret, self.frame = self.cam.read()
        cv2.namedWindow('camshift')

        self.selection = None
        self.drag_start = None
        self.tracking_state = 0
        self.show_backproj = False

    def show_hist(self):
        bin_count = self.hist.shape[0]
        bin_w = 24
        img = np.zeros((256, bin_count*bin_w, 3), np.uint8)
        for i in xrange(bin_count):
            h = int(self.hist[i])
            cv2.rectangle(img, (i*bin_w+2, 255), ((i+1)*bin_w-2, 255-h), (int(180.0*i/bin_count), 255, 255), -1)
        img = cv2.cvtColor(img, cv2.COLOR_HSV2BGR)
        cv2.imshow('hist', img)

    '''
    @param: img the image for the face detection
    @param: cascade the cascade of the ViolaJones face detection
    @return: rects, an array of the cornors of the detected face. [x1 y1 x2 y2]
    '''
    def detect(self,img, cascade):

        # Detect the faces
        rects = cascade.detectMultiScale(img, scaleFactor=1.1, minNeighbors=3, minSize=(150, 150), flags = cv.CV_HAAR_SCALE_IMAGE)

        # Check if any faces are detected
        if len(rects) == 0:

            # return empty array
            return []
        else:
            # Get the correct x and y values
            rects[:,2:] += rects[:,:2]

            # loop over the recs and shrink the width with 40%
            for rec in rects:
                rec[0] = rec[0] + int(math.floor(((rec[2] - rec[0])*0.4)/2))
                rec[2] = rec[2] - int(math.floor(((rec[2] - rec[0])*0.4)/2))

            return rects

    def draw_rects(self,img, rects, color):
        for x1, y1, x2, y2 in rects:
            cv2.rectangle(img, (x1, y1), (x2, y2), color, 2)

    def getFace(self,img):
        gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
        gray = cv2.equalizeHist(gray)

        rects = self.detect(gray, cascade)
        self.rects = rects
        img = self.draw_rects(img, rects, (0, 255, 0))

        if len(rects) != 0:
            self.selection = rects[0][1], rects[0][0], rects[0][3], rects[0][2]

        return rects

    def run(self):
        counter= 0
        rects = None
        while True:
            counter +=1;
            ret, self.frame = self.cam.read()
            vis = self.frame.copy()

            if counter % 150 == 0:
                rects = self.getFace(vis);

            hsv = cv2.cvtColor(self.frame, cv2.COLOR_BGR2HSV)

            mask = cv2.inRange(hsv, np.array((0., 60., 32.)), np.array((180., 255., 255.)))
            if rects is not None:
                self.draw_rects(vis, rects, (0, 255, 0))

            if self.selection:
                print 'test0'
                x0, y0, x1, y1 = self.selection
                self.track_window = (x0, y0, x1-x0, y1-y0)
                hsv_roi = hsv[x0:x1,y0:y1]
                mask_roi = mask[x0:x1,y0:y1]
                hist = cv2.calcHist( [hsv_roi], [0], mask_roi, [16], [0, 180] )
                cv2.normalize(hist, hist, 0, 255, cv2.NORM_MINMAX);
                self.hist = hist.reshape(-1)
                self.show_hist()

                vis_roi = vis[x0:x1,y0:y1]
                cv2.bitwise_not(vis_roi, vis_roi)
                vis[mask == 0] = 0
                self.tracking_state = 1
                self.selection = None

            if self.tracking_state == 1:
                self.selection = None
                prob = cv2.calcBackProject([hsv], [0], self.hist, [0, 180], 1)
                prob &= mask
                term_crit = ( cv2.TERM_CRITERIA_EPS | cv2.TERM_CRITERIA_COUNT, 10, 1 )
                track_box, self.track_window = cv2.CamShift(prob, self.track_window, term_crit)

                if self.show_backproj:
                    vis[:] = prob[...,np.newaxis]
                try: cv2.ellipse(vis, track_box, (0, 0, 255), 2)
                except: print track_box
            cv2.imshow('camshift', vis)

            ch = 0xFF & cv2.waitKey(5)
            if ch == 27:
                break
            if ch == ord('b'):
                self.show_backproj = not self.show_backproj
        cv2.destroyAllWindows()

if __name__ == '__main__':
    import sys, getopt

    args, video_src = getopt.getopt(sys.argv[1:], '', ['cascade=', 'nested-cascade='])
    try: video_src = video_src[0]
    except: video_src = 0
    args = dict(args)
    cascade_fn = args.get('--cascade', "haarcascade_frontalface_alt.xml")
    cascade = cv2.CascadeClassifier(cascade_fn)

    App(video_src).run() 
```

Currently I show where the face was initially (in a green rectangle) and what is tracked at the moment (in a red oval). I am able to detect the face, but the face tracker keeps tracking all other stuff except for my face (always on one or two shoulders). I suspected it had something to do with the coordinates, but I've checked them and they seem fine (mask_roi, hsv_roi, vis_roi). An example : ![enter image description here](../Images/da46cc82d9944ae33f840f3f5b070fc4.png)

Can anybody point out my mistake ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:15:14.143

我无法运行您的代码（没有名为 video 的模块）。我正在使用 OpenCV 2.4.4，我对您的问题的解决方案如下：

1.  确保你的脸被正确照亮（没有阴影，明亮的自然肤色，深色背景有很大帮助）
2.  使用 , 中的`hsv`值。我正在使用那些：，`mask = cv2.inRange(hsv, np.array((0., 60., 32.))``np.array((180., 255., 255.)))``np.array((0., 51., 89.))``np.array((17., 140., 255.))`

**小费：**

你可以为你的面具制作一个窗口，这样你就可以看到它的效果如何

之后：`cv2.namedWindow('camshift')`放`cv2.namedWindow('mask')`

之后：`mask = cv2.inRange...`放`cv2.imshow('mask', mask)`or `mask_roi`。

# sql - SQL 优化器/执行计划 - 重复子查询

> ID：15618187
> 
> 赞同：0
> 
> 时间：2013-03-25T15:03:59.760
> 
> 标签：sql, sqlite, query-optimization

**注意：**我目前正在一个 sqlite3 数据库上运行我的查询，尽管来自任何其他 DBMS 专业知识的答案将是受欢迎的见解......

我想知道查询优化器是否尝试识别重复的查询/子查询，如果是，则只运行一次。

这是我的示例查询：

```
SELECT *
  FROM table1 AS t1
 WHERE t1.fk_id =
 (
    SELECT t2.fk_id
      FROM table2 AS t2
     WHERE t2.id = 1111
 )
 OR t1.fk_id =
 (
    SELECT local_id 
      FROM ID_MAP
     WHERE remote_id =
     (
        SELECT t2.fk_id
          FROM table2 AS t2
         WHERE t2.id = 1111
     )
 ); 
```

将嵌套查询

```
SELECT t2.fk_id
  FROM table2 AS t2
 WHERE t2.id = 1111 
```

只运行一次（并将其结果缓存以供进一步访问）？

在这个例子中没什么大不了的，因为它是一个只执行两次的简单查询，但是我需要它在我的实际程序中再运行大约 4-5 次（x2，每个子记录两次，所以真的是 8-10） （它抓取与父记录（table2）关联的所有子记录（table1），由外键绑定。它还检查id映射表以确保它查询本地生成的id以及真实/更新的id /新密钥）。

我真的很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:33:02.827

当您要求其他数据库提供见解时....

在 Oracle DBMS 中，任何独立的子查询都只会执行一次。

```
SELECT t2.fk_id
  FROM table2 AS t2
 WHERE t2.id = 1111  -- The result will be the same for any row in t1. 
```

当然，依赖子查询需要重复执行。

依赖子查询示例：

```
SELECT t2.fk_id
  FROM table2 AS t2
 WHERE t2.id = t1.t2_id  -- t1.t2_id will have different values for different rows in t1. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:50:16.647

SQLite 有一个非常简单的查询优化器，甚至不会尝试检测相同的子查询：

```
> create table t(x);
> explain query plan
  select * from t
  where x in (select x from t) or
        x in (select x from t);
0|0|0|SCAN TABLE t (~500000 rows)
0|0|0|EXECUTE LIST SUBQUERY 1
1|0|0|SCAN TABLE t (~1000000 rows)
0|0|0|EXECUTE LIST SUBQUERY 2
2|0|0|SCAN TABLE t (~1000000 rows) 
```

这同样适用于 CTE 和视图；如果性能确实很重要，最好的办法是为子查询的结果创建一个临时表。

# sql - 无法在 Visual Studio Express 2012 中创建新的 SQL 数据表

> ID：15618188
> 
> 赞同：2
> 
> 时间：2013-03-25T15:04:04.967
> 
> 标签：sql, asp.net

我在我的 Visual Studio Express 2012 网站中创建了一个新的 SQL 数据库。这出现在 AppData 文件夹中。我可以在数据库资源管理器中打开数据库，现在我想添加一些空数据表。

我右键单击表文件夹并选择添加新表。我得到了屏幕（下）。当我完成后，我单击更新，它似乎做了一些事情，但是表格没有出现在 Tables 文件夹中。

我也尝试过单击保存按钮，并将表格手动保存在 AppData 文件夹中，但它仍然没有出现在 Tables 文件夹中。

请问我做错了什么？

![VS Express 2012 中的表创建窗口的屏幕截图](../Images/a4836d5b22981bef40bf5630bdc316cb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-10T17:07:26.417

这是解决方案-

[https://www.youtube.com/watch?v=HwA-tNvU3hw](https://www.youtube.com/watch?v=HwA-tNvU3hw)

步骤 1-更改表的名称 [dbo].[table---(change this)]

第 2 步 - 创建表后不要保存表，而是选择选项更新表，然后更新数据库。

第 3 步-在刷新表格时，您将能够看到您的表格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-07T14:44:10.267

就我而言，Visual Studio 将表格保存到我的文档中。它应该将表写入 MDF 文件。我使用设计器生成 T-SQL，然后复制 T-SQL，右键单击表文件夹，选择“新建查询”粘贴 T-SQL 命令，如图所示设置目标数据库并运行查询. 最后！

在 VS 2012 Express 的“新查询”窗口中，有一个“可用数据库”下拉菜单。选择作为解决方案一部分的数据库并执行 T-SQL

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T15:13:04.207

您是否尝试过刷新右侧的表格列表？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T13:04:56.613

我在 Visual Studio 2013 社区中遇到了同样的问题。解决方案是转到工具 -> 扩展和更新，然后下载 SQL server compact / sql lite 工具箱。VS2013 会提示你重新启动以使新扩展生效。

重新启动后，您的数据库将有一个红色的“x”。右键单击它们，选择修改连接，然后采用默认值。

然后，Visual Studio 会将其头部从其后部拉出，而您一直保存的那些以前从未出现在表文件夹中的表将自动神奇地出现在那里。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-25T18:00:40.433

进行以下更改： CREATE TABLE [dbo][ **change_this_name** ]
单击左上角的更新按钮。

# c++ - C++：sqlite3 是否使用 errno 代码？

> ID：15618189
> 
> 赞同：3
> 
> 时间：2013-03-25T15:04:07.250
> 
> 标签：c++, sqlite, errno

我正在使用 sqlite3 C++ api。运行后

`int rc = sqlite3_exec(db, pSQL, 0, 0, 0);`

它返回的`rc`结果`SQLITE_OK`。

此外，我已经测试了`errno != 0`. 结果`cout << strerror(errno) << endl`是一致的：没有这样的文件或目录

换句话说，我知道 sqlite3 有自己的一组“返回代码”（即 SQLITE_OK）。但是，sqlite3 是否正确/一致地使用 errno 代码？也就是说，如果我的应用程序的另一部分正在使用全局 errno 变量，我是否应该在每次调用后重置它`sqlite3_exec`？

谢谢。

* * *

我的代码的更完整示例：

```
 const int errno_start = errno;
    if (errno_start > 0) {
        std::cout << "errno=" << strerror(errno) << std::endl;
        std::cout << "errno_start=" << strerror(errno_start) << std::endl;
    }
    // prepare sql statement
    const char *pSQL;
    pSQL = "CREATE TABLE "
            "IF NOT EXISTS "
            "test1"
            "("
            "id INTEGER,"
            "field VARCHAR(32),"
            "value DOUBLE,"
            "timestamp DATETIME"
            ")";

    //int rc = sqlite3_exec(db, pSQL, callback, 0, &szErrMsg);
    int rc = sqlite3_exec(db, pSQL, 0, 0, 0);
    const int errno_here1 = errno;
    if (errno_here1 > 0) {
        std::cout << "errno_start=" << strerror(errno_start) << ", errno_here1="
                << strerror(errno_here1) << std::endl;
    }
    if (rc != SQLITE_OK) {
        std::cout << "SQL Error: " << szErrMsg << std::endl;
        sqlite3_free(szErrMsg);
    } else {
        std::cout << "initialize successful" << std::endl;
    } 
```

此片段的结果是：

> errno_start=成功，errno_here1=没有这样的文件或目录
> 
> 初始化成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:22:56.887

您*永远*不应依赖 in 的值`errno`在下一次操作系统调用之后持续存在，因为几乎所有可能失败的操作系统调用（即几乎所有调用）都可能设置它。至少有一件事：`errno`现在通常是幕后的线程本地化。尽管如此，`errno`当您调用一个库时，它可能会很好地设置，因此明智的做法是在系统调用失败后立即保存该值，否则忽略它。

SQLite 在自身内部进行操作系统调用（当然，当它访问数据库文件时），因此它可以很好地设置`errno`为几乎任何东西。它遇到的错误在里面处理；如果有问题，它会使用自己的记录错误机制告诉您。这从不包括`errno`发生时的任何信息（事实上这将是不可移植的；SQLite 也可以在 Windows 上运行，并且使用不同的错误代码报告机制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:08:13.957

[sqlite3 返回一个结果代码，该代码对应于sqlite3 API](http://www.sqlite.org/c3ref/c_abort.html)中列出的一组 DEFINES ：

```
#define SQLITE_OK           0   /* Successful result */
/* beginning-of-error-codes */
#define SQLITE_ERROR        1   /* SQL error or missing database */
#define SQLITE_INTERNAL     2   /* Internal logic error in SQLite */
#define SQLITE_PERM         3   /* Access permission denied */
#define SQLITE_ABORT        4   /* Callback routine requested an abort */
#define SQLITE_BUSY         5   /* The database file is locked */
#define SQLITE_LOCKED       6   /* A table in the database is locked */
#define SQLITE_NOMEM        7   /* A malloc() failed */
#define SQLITE_READONLY     8   /* Attempt to write a readonly database */
#define SQLITE_INTERRUPT    9   /* Operation terminated by sqlite3_interrupt()*/
#define SQLITE_IOERR       10   /* Some kind of disk I/O error occurred */
#define SQLITE_CORRUPT     11   /* The database disk image is malformed */
#define SQLITE_NOTFOUND    12   /* Unknown opcode in sqlite3_file_control() */
#define SQLITE_FULL        13   /* Insertion failed because database is full */
#define SQLITE_CANTOPEN    14   /* Unable to open the database file */
#define SQLITE_PROTOCOL    15   /* Database lock protocol error */
#define SQLITE_EMPTY       16   /* Database is empty */
#define SQLITE_SCHEMA      17   /* The database schema changed */
#define SQLITE_TOOBIG      18   /* String or BLOB exceeds size limit */
#define SQLITE_CONSTRAINT  19   /* Abort due to constraint violation */
#define SQLITE_MISMATCH    20   /* Data type mismatch */
#define SQLITE_MISUSE      21   /* Library used incorrectly */
#define SQLITE_NOLFS       22   /* Uses OS features not supported on host */
#define SQLITE_AUTH        23   /* Authorization denied */
#define SQLITE_FORMAT      24   /* Auxiliary database format error */
#define SQLITE_RANGE       25   /* 2nd parameter to sqlite3_bind out of range */
#define SQLITE_NOTADB      26   /* File opened that is not a database file */
#define SQLITE_ROW         100  /* sqlite3_step() has another row ready */
#define SQLITE_DONE        101  /* sqlite3_step() has finished executing */
/* end-of-error-codes */ 
```

API 中没有任何内容表明它们使用 Errno.h 中定义的相同错误代码。这只是一个巧合。

[sqlite3 API](http://www.sqlite.org/c3ref/errcode.html)已经提供了一个接口来打印错误代码的字符串表示。我建议您多学习一下 API。

**编辑**：根据您的评论，我查看了[sqlite3 的源代码](http://www.sqlite.org/src/doc/trunk/src/os_unix.c)，它使用了设置的 OS 函数`errno`。这可能就是您看到`errno`变化的原因。[SQLITE 结果代码和 errno 之间没有关系。](http://sqlite.1065341.n5.nabble.com/two-question-1-sqlite3-s-select-2-errno-and-the-sqlite3-s-result-code-td51489.html)

# ember.js - 选择 Ember js 中的默认值

> ID：15618194
> 
> 赞同：0
> 
> 时间：2013-03-25T15:04:32.770
> 
> 标签：ember.js

大家好，我有模特`Currency`。我有字段`name:string`，`default:boolean`. 在我的数据库中，只有一条记录可以具有默认值，我希望在选择标签中选择这条记录。

例子：

```
name: Eur default:false

name: USD default: true

name: RUR default: false 
```

**我希望有 ：**

```
<selected>
  <option>Eur</option
  <option selected=selected>USD</option
  <option>RUR</option
</selected> 
```

**路由.js**

```
EmberMoney.IncomesRoute = Ember.Route.extend
  model: ->
    EmberMoney.Income.find()
  setupController: (controller) ->
    controller.set('currencies', EmberMoney.Currency.find()); 
```

**收入.车把**

```
// Some output with Incomes records

{{view Ember.Select
       contentBinding="controller.currencies"
       optionLabelPath="content.name"
       optionValuePath="content.id"}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:28:22.177

您可以这样子类化`Ember.Select`和覆盖`selection`：

```
EmberMoney.Select = Ember.Select.extend({
    selection: Ember.computed(function (key) {
      var content = this.get('content');
      if (!content || !content.length) return null;

      return content.findProperty('default', true)
    }).property('content.[]')
}); 
```

因为`selection`在您的子类中没有`value`参数，所以一旦更改选择，计算属性将被永久替换为该实例。

请注意，如果您为 , 设置绑定`selection`，`selection`将几乎立即被覆盖，您将不得不在源对象上定义此属性或变得更复杂：

```
EmberMoney.Select = Ember.Select.extend({
    selection: Ember.computed(function (key, value) {
      if (value === undefined || Ember.isNone(value)) {
          var content = this.get('content');
          if (!content || !content.length) return null;

          return content.findProperty('default', true)
      } else {
        return value;
      }
    }).property('content.[]')
}); 
```

# jsp - UTF 16 撇号代码显示为问号

> ID：15618195
> 
> 赞同：0
> 
> 时间：2013-03-25T15:04:32.970
> 
> 标签：jsp, special-characters, utf-16

在我部署在门户服务器内部的 jsp 文件中，需要显示一个特殊字符（撇号）。该字符将从属性文件中读取。所以我挖掘了撇号的 UTF-16 代码。它是\u2019。在我的本地机器上它工作正常。但在 SIT 机器上，它显示为“？” （问号）。

我可以从哪里开始我的调查？我在我的 proeprties 文件中也尝试了撇号本身 (')。它在我的本地和 SIT 中都显示为 /'。即..前面有一个斜线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:27:26.210

问号表示要么

1.  属性文件采用 UTF-16 编码并按原样显示，但用于显示 UTF-16 文本的字体不支持 Unicode 代码点 U+2019。

2.  在显示解码数据之前，将属性文件解码为不支持 Unicode 代码点 U+2019 的字符集。

# computational-geometry - 给定一个 DCEL，其中孪生等于边的下一个，细分可以有多少个面？

> ID：15618197
> 
> 赞同：1
> 
> 时间：2013-03-25T15:04:35.317
> 
> 标签：computational-geometry, doubly-linked-list

我正在尝试解决“计算几何 - 算法和应用”一书中的练习 2.7（由 Berg 等人撰写），它说

> 给定一个细分的双连接边列表表示，其中 Twin(e) = Next(e) 对于每个半边 e 成立，那么细分最多可以有多少个面？

我认为解决方案是只连接两个顶点的边，下一个可能是双子。所以，唯一的脸可能是无限脸。它们可以是由一条边连接的更多对顶点，但前提是它们在每个顶点上是不相交的。还有其他可能性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:54:52.940

我会说你是对的。

假定对于所有半边 e，Next(e) 等于 Twin(e)，则 IncidentFace(Next(e)) 等于 IncidentFace(Twin(e))。并且由于我们知道 IncidentFace(e) 始终等于 IncidentFace(Next(e))，因此我们可以得出结论，对于所有半边， IncidentFace(e) 等于 IncidentFace(Twin(e))。所以没有边位于两个不同面的边界上。如果没有边限定两个不同的面，则不能有多个面。

# ruby-on-rails - 在 Centos 上安装 Redmine

> ID：15618201
> 
> 赞同：2
> 
> 时间：2013-03-25T15:04:51.063
> 
> 标签：ruby-on-rails, apache, centos, redmine

我正在按照本指南在 CentOS 上安装 Redmine。我已经遵循了每一步。Redmine 目前在 WebBrick 上运行，但不在 Apache 上。

我已经成功安装了乘客。我收到了这条消息：

```
Please edit your Apache configuration file, and add these lines:

LoadModule passenger_module /usr/lib64/ruby/gems/1.8/gems/passenger-4.0.0.rc4/libout/apache2/mod_passenger.so
PassengerRoot /usr/lib64/ruby/gems/1.8/gems/passenger-4.0.0.rc4
PassengerRuby /usr/bin/ruby

After you restart Apache, you are ready to deploy any number of Ruby on Rails
applications on Apache, without any further Ruby on Rails-specific
configuration! 
```

当我重新启动 Apache 服务器时，我收到此消息。

```
[root@localhost httpd]# service httpd restart
Stopping httpd:                                            [  OK  ]
Starting httpd: httpd: Could not reliably determine the server's fully qualified domain name, using localhost.localdomain for ServerName
[Mon Mar 25 08:02:58 2013] [warn] NameVirtualHost *:80 has no VirtualHosts
                                                           [  OK  ] 
```

也许这与它为什么不起作用有关。

这是配置文件：

```
[root@localhost conf.d]# cat redmine.conf 
# Loading Passenger
LoadModule passenger_module /usr/lib64/ruby/gems/1.8/gems/passenger-4.0.0.rc4/libout/apache2/mod_passenger.so
PassengerRoot /usr/lib64/ruby/gems/1.8/gems/passenger-4.0.0.rc4
PassengerRuby /usr/bin/ruby

<VirtualHost *:80>
   ServerName localhost.localdomain
   DocumentRoot /var/www/html/redmine/public
   <Directory /var/www/html/redmine/public>
      # This relaxes Apache security settings.
      AllowOverride all
      # MultiViews must be turned off.
      Options -MultiViews
      allow from all
   </Directory>

   ErrorLog "|/usr/sbin/rotatelogs /etc/httpd/logs/redmine-error.%Y-%m-%d.log 86400"
   CustomLog "|/usr/sbin/rotatelogs /etc/httpd/logs/redmine-access.%Y-%m-%d.log 86400" "%h %l %u %t %D \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\""

</VirtualHost> 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-06T17:59:43.693

您的 apache 网络服务器的版本是什么？我猜这个问题可能来自apache版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:17:42.073

这是我的虚拟主机配置。

```
<VirtualHost my.url.de:80>

   ServerName my.url.de:80

   ServerAdmin mail@url.de

   DocumentRoot /var/www/redmine/redmine-2.0.3/public

   <Directory /var/www/redmine/redmine-2.0.3/public>
       AllowOverride All
       Options -MultiViews
       allow from all
   </Directory>

   ErrorLog /var/log/redmine-2.0.3/error_log
   CustomLog /var/log/redmine-2.0.3/access common

</VirtualHost> 
```

这行得通，也许不使用`<VirtualHost *:80>`？然后错误消息`service httpd restart`应该就消失了。

如果这不能解决它：
我遇到的一个问题是您需要正确访问日志：

*   它们必须存在并且
*   你的 apache 用户必须有 RW。

由于我使用了一个特殊的 Apache 设置，每个虚拟主机都有一个专用用户（此处省略了 conf 行），这对您来说可能不是问题。仍然提到它，以防万一，因为我花了很长时间才找到这个错误，所以在任何地方都没有关于这个问题的消息。

在您的情况下，请尝试更基本的日志文件以排除它们成为错误原因。

# javascript - 动画导航栏

> ID：15618202
> 
> 赞同：0
> 
> 时间：2013-03-25T15:04:52.063
> 
> 标签：javascript, jquery

是否可以调整以下脚本以动画导航的高度，目前它暂停然后从一种尺寸跳转到另一种尺寸，我知道 jQuery 中的动画功能，但只是在此处了解如何以及在何处实现它。该脚本还将导航的高度计算为宽度的四分之一。

```
$(function() {
var pause = 200; // will only process code within delay(function() { ... }) every 100ms.

$(window).resize(function() {

    delay(function() {

        var width = $(window).width();

        if( width >= 600 ) {
            // code for tablet view

                var cw = $('nav a').width()/4; // calculation here
                $('nav, nav ul, nav a').css({'height':cw+'px'}) // target
                $('nav, nav ul, nav a').css({'line-height':cw+'px'}) //   target

        } else if( width <= 600 ) {
            // code for mobile portrait

                var cw = $('nav a').width()/4; // calculation here
                $('nav, nav ul, nav a').css({'height':cw+'px'}) // target
                $('nav, nav ul, nav a').css({'line-height':cw+'px'}) //      target
        }

    }, pause );

});

$(window).resize();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:08:41.520

尝试更改`.css`为`.animate`. jQuery 的 animate 函数可以在不同的 css 值之间平滑动画，例如边距和高度。可以为更改动画持续时间等事情提供其他参数。完整的文档可以在[这里找到。](http://api.jquery.com/animate/)

并非所有属性都可以使用 jQuery`.animate`命令进行动画处理，因此有时可能需要一些工作才能确定如何以一种可以按照您想要的方式对其进行动画处理的方式来设置文档样式。

# asp.net - 如何对包括所有条件在内的多个条件进行选择查询？

> ID：15618205
> 
> 赞同：0
> 
> 时间：2013-03-25T15:05:01.523
> 
> 标签：asp.net, sql, sql-server

我在存储过程中有一个查询，如下所示

```
select empid 
from tblname 
where place = @place 
and category = @category 
```

我想使用相同的过程来获取 place = 'calicut' 的所有结果（类别可以是任何）。通过这样做，我可以避免`query`在我的`dropdownlist`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:07:42.937

```
SELECT empid 
FROM tblname 
WHERE place = @place 
AND (category = @category OR @category = 'all'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:07:42.670

您应该能够检查 NULL - 这假设您在选择默认的“all”值时传递 NULL。如果不是，请将 NULL 替换为您传递给 SP 的所有值或任何值：

```
select empid 
from tblname 
where place=@place and 
    (@category IS NULL OR category=@category) 
```

这会检查@category 参数——如果它为NULL，那么它会选择任何类别。否则它会搜索该特定类别。

如果您只关心 where place = 'calicut'，请改用它：

```
select empid 
from tblname 
where place='calicut' and 
    (@category IS NULL OR category=@category) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T15:15:09.310

您可以做的另一件事是`@category`在编写`stored procedure`.

```
ALTER PROCEDURE yourProcName 
   @place VARCHAR(100), 
   @category VARCHAR(50) = ''
AS
BEGIN

  select empid 
  from tblname 
  where place = @place 
  and 
  (@category = '' OR category  = @category)

END 
```

# r - 向量化 head(which(t > x), n=1) 对于 x 的许多值

> ID：15618211
> 
> 赞同：2
> 
> 时间：2013-03-25T15:05:30.220
> 
> 标签：r

我在 R 中有类似以下的情况：

```
t <- (1:100) * 15
x <- c(134, 552, 864, 5000) 
```

我想为 x 中的每个值找到 t 中 t > x 的第一个索引是什么。以下工作使用循环：

```
y <- numeric(length(x))
for (i in 1:length(x))
    y[i] <- which(t > x[i])[1]

# y
# [1]  9 37 58 NA 
```

我被告知 R 中的循环是“糟糕而缓慢的”，虽然运行一个相当大的 x 所花费的时间并不是什么大问题，但我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:29:57.077

如果对象不是太大（因此 RAM 不受限制），则不需要`*apply`函数，它们只是隐藏循环。

```
temp <- outer(x,t,'<')
y <- length(t) - (rowSums(temp)-1)
y[y>length(t)] <- NA
#[1]  9 37 58 NA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:11:53.593

```
fun <- function(x){
    which(t > x)[1]
}

R > sapply(x, fun)
[1]  9 37 58 NA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T15:19:11.057

差不多一样：

```
require(functional)
apply(matrix(t > rep(x, each=length(t)), length(t)), 2, Compose(which, Curry(append, Inf), min))
## [1]   9  37  58 Inf 
```

# grails - 在 grails 中为 neo4j 导入插件失败

> ID：15618212
> 
> 赞同：0
> 
> 时间：2013-03-25T15:05:31.007
> 
> 标签：grails, neo4j

我创建了一个 grails 项目，但它似乎无法识别我安装的插件：

```
import grails.plugins.neo4j.Neo4jEntity
@Neo4jEntity
class Author {
  String name
  Date dob

  static hasMany = [ books: Book ]
} 
```

这是改成别的了吗？

我最初是这样做的：

```
grails create-app neo4jtest; cd neo4jtest
grails install-plugin neo4j
grails create-domain-class Author
grails create-domain-class Book
grails create-controller Author
grails create-controller Book 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:52:53.520

`Neo4jEntity`1.x 系列的插件不再支持。这是不符合 GORM 的 0.x 版本的方法。如果您使用多个数据存储，则可以使用

```
static mapWith = "neo4j" 
```

表示在 Neo4j 中持久化的域。如果只有一个数据存储，则没有必要。

# angularjs - 如何为 2 个不同的视图重用一个控制器？

> ID：15618213
> 
> 赞同：26
> 
> 时间：2013-03-25T15:05:40.257
> 
> 标签：angularjs, angularjs-controller

我已经定义了一个控制器，并将其应用于 2 个差异很小的视图。

角代码：

```
app.controller('MyCtrl', function($scope) {
   $scope.canSave = false;
   $scope.demo = {
      files : [{
         filename: 'aaa.html',
         source: '<div>aaa</div>'
      }, {
         filename: 'bbb.html',
         source: '<div>bbb</div>'
      }]
   }
   $scope.newFile = function(file) {
       $scope.demo.files.push(file);
   }
   $scope.$watch("demo.files", function(val) {
       $scope.canSave = true;
   }, true);
}); 
```

视图 1：

```
<div ng-controller="MyCtrl"></div> 
```

视图 2：

```
<div ng-controller="MyCtrl"></div> 
```

示例代码很简单，但是在我的实际项目中代码和逻辑很多。

View 1 和 View 2 具有几乎相同的功能，只有一些差异，但我确实需要在控制器中为它们中的每一个编写一些代码。

我不想为它们创建 2 个不同的控制器，因为它们具有大部分相同的逻辑。我不想将逻辑移动到服务中以在 2 个控制器之间共享它，因为作为服务的逻辑并不常见。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T15:30:25.600

在给定的条件下，我可能会做类似的事情

```
function MyCommonCtrl(type){
    return function($scope, $http) {
        $scope.x = 5;

        if(type = 't1'){
            $scope.domore = function(){
            }
        }

        ....
        ....
    }
}

angular.module('ng').controller('Type1Ctrl', ['$scope', '$http', MyCommonCtrl('t1')]);
angular.module('ng').controller('Type2Ctrl', ['$scope', '$http', MyCommonCtrl('t2')]); 
```

然后

```
<div ng-controller="Type1Ctrl"></div> 
```

和

```
<div ng-controller="Type2Ctrl"></div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T09:11:09.833

我不知道您的具体设置，但您的 2 个控制器可以从一个共同的祖先继承。

```
Type1Ctrl.prototype = new MyCtrl();
Type1Ctrl.prototype.constructor = Type1Ctrl;

function Type1Ctrl() {
  // constructor stuff goes here
}

Type1Ctrl.prototype.setScope = function() {
  // setScope
};

Type2Ctrl.prototype = new MyCtrl();
Type2Ctrl.prototype.constructor = Type2Ctrl;

function Type2Ctrl() {
  // constructor stuff goes here
}

Type2Ctrl.prototype.setScope = function() {
  // setScope
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-20T00:35:03.290

我也遇到了类似的问题，范围继承解决了我的问题。我想“重用”控制器来继承公共状态/模型（$scope）和功能（附加到 $scope 的控制器函数） 如 [“范围继承示例”](http://docs.angularjs.org/guide/controller)中所述，我将父控制器附加到外部 DOM 元素和子控制器内在。父控制器的范围和功能无缝地“合并”到子控制器中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-30T19:18:07.780

这是另一种选择。[从这篇博](http://blog.omkarpatil.com/2013/02/controller-inheritance-in-angularjs.html)文稍作修改

```
app.factory('ParentCtrl',function(){
    $scope.parentVar = 'I am from the parent'
  };
});

app.controller('ChildCtrl', function($scope, $injector, ParentCtrl) {
  $injector.invoke(ParentCtrl, this, {$scope: $scope});
}); 
```

[这是一个笨蛋](http://plnkr.co/edit/8IwENt?p=preview)

# unix - 如何在将文件插入vim中的另一个文件之前插入文件名

> ID：15618218
> 
> 赞同：0
> 
> 时间：2013-03-25T15:06:03.050
> 
> 标签：unix, vim, vim-plugin

有没有办法在将文件内容插入另一个文件之前插入文件名

我知道如何将一个文件插入另一个文件——：r

但是如何插入我们之前插入的文件名

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:34:38.970

如果您在寄存器中有文件名（例如系统剪贴板），您可以使用`<C-r>+`. 这也适用于 Vim 变量：`<C-r>=g:filename<CR>`.

但通常，您只需输入`:r filename`; 然后，避免再次键入的唯一快捷方式是文件名完成 ( `:help i_CTRL-X_CTRL-F`)：在插入模式下，键入文件名的开头，然后尝试完成：`filen<C-x><C-f>`.

如果以相反的顺序执行，*则可以避免*键入：由于`:read`命令设置了*备用文件*，您可以通过特殊寄存器插入它`#`：

```
:read filename
'[OI just added <C-r># 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:54:15.200

您可以编写一个小函数在读取内容之前插入文件名：

```
fun! ReadwithFn(fname)
    let fn = expand(a:fname)
    if !filereadable(fn)
        echohl Error 
        echom fn." cannot be read!"
        echohl NONE
    else
        execute "put ='".fn."'"
        execute 'read '.fn
    endif   
endf 
```

添加定义您自己的命令：

```
command! -nargs=1 R call ReadwithFn(<q-args>) 
```

如果您获取上述代码，则可以键入

```
:R fileToRead 
```

该函数将首先插入文件的路径，然后是内容。如果文件不可读（例如不存在），则会出现错误消息。

这只是基本脚本，您可以稍微调整一下。

# xcode - 使用 .pbx 工作区文件 svn 本地副本收到阻碍警告。

> ID：15618219
> 
> 赞同：1
> 
> 时间：2013-03-25T15:06:04.600
> 
> 标签：xcode, svn

我正在使用 svn server 将我更新的文件上传到服务器。但是最后，当我当时将最新副本上传到服务器时，我在下面给定的 Xcode 项目文件中收到了**阻碍**警告。我不知道该怎么做，请帮我把它弄出来。

以下是我的文件，它给了我**阻碍**警告。

1.  用户界面状态.xuserstate。
2.  dat0b55.00f

当我在 finder 中搜索此文件时，它会给出 xproject workspace.path 的位置，如下所示：MyProject.xcodeproj/project.xcworkspace/xcuserdata/myworkspace.xcuserdatad/UserInterfaceState.xcuserdatad。

我不明白如何删除此警告。我无法删除项目并上传新副本，因为它位于客户端服务器上。所以，如果可能的话，请帮我在不删除项目的情况下手动解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:37:33.333

我已经通过替换备份中的所有必需文件解决了这个问题。您可以从 .pbx 中获取上述文件，并在包内容中使用显示提取您的项目文件并替换它。这对我来说很好。

# firefox - 是否可以通过单击在 Firefox 中启动 Selenium 测试用例？

> ID：15618224
> 
> 赞同：1
> 
> 时间：2013-03-25T15:06:19.573
> 
> 标签：firefox, selenium, firefox-addon, selenium-ide

是否可以在 Firefox 中使用加载项栏中的按钮单击运行 Selenium 测试用例？还是我必须先打开 Selenium UI，加载测试用例并运行它？

毕竟 Selenium 的想法是自动化浏览器导航。在我看来，能够将测试用例放在单击按钮上将是一个巨大的进步。

如果这是不可能的，有没有办法打开 Selenium UI，加载了上次关闭时加载的 TestSuite？Selenium 默认情况下不这样做，我真的很想知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:25:23.940

您正在寻找的附加组件是 Selnium IDE Favroites。

您可以从[这里](https://addons.mozilla.org/en-us/firefox/addon/favorites-selenium-ide/)安装它。

** 编辑 ** 设置它的实际步骤

*   单击收藏夹工具栏按钮将当前测试套件添加到收藏夹。
*   单击最喜欢的工具栏按钮上的下拉箭头以查看最喜欢的测试套件列表。
*   单击其中一个测试套件以打开它们。
*   Ctrl + 单击其中一个测试套件以打开并执行它们。
*   您还可以使用收藏夹菜单。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T06:03:48.093

如果您从 Selenium IDE 迁移到 Selenium WebDriver，您将在自动化方面拥有更大的灵活性。您只需单击一下即可自动化测试套件。

# c# - TeamCity - 重新运行特定的构建步骤

> ID：15618225
> 
> 赞同：7
> 
> 时间：2013-03-25T15:06:26.167
> 
> 标签：c#, teamcity

为了争论，如果您配置了 3 个构建步骤并且您想单独重新运行第 3 步（而不是运行前面的 2 个步骤），您将如何实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:53:06.300

不，不可能....除非您暂时禁用管理员中的早期步骤，然后再次运行构建。

[http://confluence.jetbrains.com/display/TCD7/Configuring+Build+Steps](http://confluence.jetbrains.com/display/TCD7/Configuring+Build+Steps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:06:39.153

您可以将 3 个构建步骤拆分为 2 个构建配置，并在两者之间建立快照依赖关系。第一个构建配置将包含前两个构建步骤。依赖项应设置为`'Run build on the same agent'`and `'Do not run new build if there is a suitable one'`。这会将两个配置链接在一起，但如果源代码没有任何变化，您可以选择只运行第二个配置。

根据您的设置，这可能是也可能不是合适的解决方案。如果您的第三个构建步骤正在运行一些只需要重新运行而不重新编译代码的测试，这可能会正常工作。

# c++ - 在 PropertyPage 上的控件上显示工具提示。返回 TRUE 到 ON_NOTIFY_EX(TTN_NEEDTEXT...) 时崩溃

> ID：15618235
> 
> 赞同：0
> 
> 时间：2013-03-25T15:07:08.630
> 
> 标签：c++, mfc, tooltip

我有一堂课

> 类 CCfgUserPage : 公共 CPropertyPage

它还拥有各种控件，从复选框到文本区域。我想为每个控件添加工具提示，并且似乎遇到了问题。

在 CCfgUserPage 中，我将此添加到消息映射中

> ON_NOTIFY_EX(TTN_NEEDTEXT, 0, OnToolTipText )

当此对象捕获该消息时​​，它会调用函数 OnToolTipText，如下所示

```
BOOL CCfgUserPage::OnToolTipText( UINT id, NMHDR * pNMHDR, LRESULT * pResult )
{
    TOOLTIPTEXT *pTTT = (TOOLTIPTEXT *)pNMHDR;
    UINT nID = pNMHDR->idFrom;
    CString ttStr;

    int partOrient = GetDlgItem(IDC_PARTORIENT_CHECK)->GetDlgCtrlID();

    if (pTTT->uFlags & TTF_IDISHWND)
    {
        // idFrom is actually the HWND of the tool
        nID = ::GetDlgCtrlID((HWND)nID);
        if( nID == partOrient ) // Only Display TT for The buttons with these ID's
        {
            if( nID == partOrient )
                ttStr = "Part Orient";
            pTTT->lpszText = (LPTSTR)(LPCTSTR)ttStr;
            pTTT->hinst = AfxGetResourceHandle();
            return TRUE;
        }
    }
    return FALSE;
} 
```

我还启用了工具提示

> CCfgUserPage::OnInitDialog

每当 OnToolTipText 返回 TRUE 时，应用程序就会崩溃并通知我

> 访问冲突读取位置

我正在尝试遍历堆栈框架，但要深入 MFC 才能了解发生了什么问题。我可能会错过什么会导致这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:48:08.747

看看你在 MSDN 上的提示：

> 当您处理 TTN_NEEDTEXT 通知消息时，指定要以下列方式之一显示的字符串：
> 
> *   将文本复制到 szText 成员指定的缓冲区。
> *   将包含文本的缓冲区的地址复制到 lpszText 成员。
> *   将字符串资源的标识符复制到 lpszText 成员，并将包含该资源的实例的句柄复制到 hinst 成员。

所以不要这样做：

```
 CString ttStr;
        // ...
        if( nID == partOrient )
            ttStr = "Part Orient";
        // Below is the unsafe part: you initialize lpszText with something
        //       expected to be valid after you return from the handler
        //       effectively, this is internal buffer of local ttStr valriable
        //       which is to be freed and lpszText would keep point to undefined
        //       memory
        pTTT->lpszText = (LPTSTR)(LPCTSTR)ttStr;
        pTTT->hinst = AfxGetResourceHandle(); 
```

你宁愿：

```
 if(nID == partOrient)
        {
            // NOTE: Here instead you don't create any dynamic instances (strings)
            //       and the value resides directly in the notification structure
            _tcsncpy_s(pTTT->szText, _T("Part Orient"), _TRUNCATE);
            pTTT->lpszText = pTTT->szText; // Just a safety, it's already pointing there
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-21T16:32:15.200

问题是 ttStr 在函数末尾超出范围，您正在返回指向它的指针。指针现在无效，应用程序在尝试引用它时崩溃。

如果工具提示总是很小（少于 80 个字符），则使用提供的缓冲区，或者使用成员变量来存储工具提示文本。

# .net - 如何克服错误#2146233079：自动化错误？

> ID：15618242
> 
> 赞同：0
> 
> 时间：2013-03-25T15:07:24.110
> 
> 标签：.net, c#-3.0, com-interop, com+

我们有一个由 VB 组件通过 COM+ 服务使用的 .NET 3.5 组件。我们按照以下步骤注册 dll 和

1.  为主 dll 及其依赖 dll 执行了 Regasm.exe /tlb 和 Regasm.exe /tlb /codebase。
2.  在 COM+ 中使用 .NET dll 的已注册 VB 组件 dll。
3.  使用步骤 1 注册 SEAC 的 dotnet dll。
4.  IIS重置

我们有 3 台具有相同设置的服务器。它们是开发服务器、测试服务器、阶段服务器。它在开发和测试服务器中运行良好，并且在阶段服务器中给出了以下异常。

```
Error#2146233079: Automation error 
```

为了解决这个问题，我们做了以下事情。但没有运气。

1.  从开发服务器获取应用程序的所有 dot net 和 vb dll，然后我们将其部署到 Stage 服务器，并按照我们在 dev 中部署任何其他 dll 的过程进行部署，但我们面临同样的问题。
2.  通过使用测试服务器重复相同的过程。但仍然面临同样的问题
3.  检查注册表以确认 .net 框架 2.0、3.5 的可用性（我们在这里唯一能想到的是框架是否正确安装）。似乎它们已正确安装
4.  重新启动 Stage 服务器一次，以便清除所有旧注册表项，然后我们重新注册 dll。仍然没有运气
5.  制作一个 .Net 3.5 exe 并在 217 服务器上运行它以检查 .Net 3.5 是否正确安装。似乎它安装得很完美。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:25:02.877

我已经破解了这个问题。

**根本原因和解决方案：**
该机器中缺少一个 .NET dll。通常开发和测试我们已经安装了 .NET 框架和 Visual Studio。然而，在舞台和制作中，我们只安装了 .NET 框架，而不是整个 Visualstudio 套件。我们怀疑这就是原因。我们已经在舞台和生产机器的 GAC 中注册了该组件，问题得到了解决。

**我是如何破解**
的（1）我们已经确定问题发生在什么操作上，并将日志放在 VB 组件创建.NET 组件实例和 VB 调用 .NET 组件函数的界面上，并识别出哪个函数给出错误

(2) 在该函数中，我们放置了 try catch 并将异常消息记录在某个外部文件中。

(3) 通过异常消息我们已经确定了特定的 dll 已丢失

# c# - C# 存储泛型状态

> ID：15618244
> 
> 赞同：0
> 
> 时间：2013-03-25T15:07:28.747
> 
> 标签：c#, generics, fsm

```
public abstract class State<T>
{
    public virtual Enter(T item)
    {
            // an empty method
    }
}

public class ChaseState : State<FieldPlayer>
{
    public override Enter(Player pl)
    {
        // ...
        pl.Fsm.CurrentState = ChaseState.Instance;
        //...
    }
}

public class TendGoal : State<Goalkeeper>
{
   public override Enter(Goalkeeper gk)
   {
       // ...implementation
       gk.Fsm.CurrentState = TendGoal.Instance;
       // ...implementation
   }
}

public class DefendState : State<Team>
{
    public override Enter(Team team)
    {
        // ....    
        team.Fsm.CurrentState = DefendState.Instance;
        //.....
    }
} 
```

“Goalkeeper”和“FieldPlayer”继承自一个抽象类“Player”，而“Team”继承自另一个类。

```
public class FSM
{
    public /*some type*/ owner;         // PROBLEM 1
                                        // OWNER CAN BE TEAM, GOALKEEPEEPER
                                        // OR FIELD PLAYER
    public /*some type*/ globalState;
    public /*some type*/ currentState;
    public /*some type*/ previousState;
    public void Update()
    {
        if (globalState != null)
        {
            globalState.Execute(owner);  // PROBLEM 2
                                         // IF GLOBAL STATE'S TYPE
                                         // IS AN OBJECT, CANT CALL EXECUTE
                                         // OBJECTS TYPE WILL BE KNOWN ONLY
                                         // DURING RUNTIME
        }
     }
} 
```

“Goalkeeper”、“FieldPlayer”和“Team”类型的每个对象都有一个状态机实例。问题是..泛型不能是属性。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:19:33.057

在阅读了您的代码之后，这里不需要抽象类。您应该将 State 转换为接口，例如：IState 并从中删除通用签名。那么你的 FSM 对象中的属性都可以是 public IState globalState 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:35:41.247

如果您将 State 设为普通接口，而不是通用接口，并让其 Enter 方法采用您的球队、守门员、球员等都实现的另一个接口（它甚至可以是空的），它应该可以工作。

```
public interface IOwner {}

public interface IState
{
    void Enter(IOwner item);
}
public class ChaseState : IState
{
    public void Enter(IOwner pl)
    {
        // ...
        //...
    }
}
public class Player :IOwner { }
public class Something {
    IOwner owner = new Team();
    IState globalState = new ChaseState();
    IState currentState = new DefendState();

    public void Update()
    {
        if (globalState != null)
        {
            globalState.Enter(owner); 
        }
        else if (currentState != null)
        {
            currentState.Enter(owner);
        }
     }
} 
```

# azure - 如何创建云服务包（.cspkg）和云服务配置文件（.cscfg）

> ID：15618251
> 
> 赞同：22
> 
> 时间：2013-03-25T15:07:50.080
> 
> 标签：azure

我已经在本地创建了一个网络角色，但是我很难用 windows azure sdk 来做到这一点，手册似乎没有给出明确的说明如何？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T15:21:57.283

在 Visual Studio 中，进入*解决方案资源管理*器面板，右键单击您的*Azure 项目*，然后单击*包*功能。一个进程将生成 cspkg 和 cscfg 文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-22T21:40:53.410

要通过 MSBuild 参数创建 .cspkg 和 .cscfg：

```
/t:Publish /p:TargetProfile=Local /p:AutomatedBuild=True 
```

或者

```
/p:DeployOnBuild=true /p:TargetProfile=Local /p:AutomatedBuild=True 
```

请记住将 TargetProfile 替换为您实际所需的配置文件。这将自动选择正确的`ServiceDefinition.profile.csdef`文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T17:06:25.013

Azure 有两种选择：

**[构建您的包并通过 Azure 门户https://manage.windowsazure.com/](https://manage.windowsazure.com/)**上传它****

 **1.  在 Visual Studio 的云项目中，右键单击并选择“包”。
2.  选择要打包的服务配置和构建配置（Release、Debug）。然后点击包。这将为您的云解决方案构建所有必要的项目。完成后，它将弹出一个包含 2 个文件的窗口：一个 cspkg 和一个 cscfg。顺便说一下，cspkg 可以用任何 zip 软件打开。
3.  转到 Azure 门户。选择“云服务”。选择您的云服务名称。单击“上传新的生产部署”。从步骤 2 中选择您的 cspkg 和 cscfg 文件。为您的部署命名。

你完成了。

**从 Visual Studio 发布。** 要节省麻烦，请右键单击您的云项目并选择“发布”。应用必要的设置（云服务-这将自动填充-，环境，发布...如前所述。确保您转到高级设置以选择正确的存储帐户，如果您有多个。点击下一步，然后发布.Visual Studio 会为你做所有的辛苦工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-09T18:06:32.410

从 GUI（Azure 门户和 Visual Studio 右键单击​​“发布...”）发布就可以开始了。

最终（迟早会更好）您将需要一个可重现的可编写脚本的一键式制造商。

在 Powershell 脚本中，命令**Publish-AzureServiceProject**用于构建 .cspkg 并上传它。（我不愿多说；通过审查他们的文档，你会得到更好的结果，唉！）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-14T23:05:25.353

在 Visual Studio Team Services 中，您可以按如下方式生成包：[![在此处输入图像描述](../Images/f6e1773fdfcde619c8710c4ca6b27c79.png)](https://i.stack.imgur.com/tEuz9.png) 在此示例中，服务配置文件称为“ServiceConfiguration.Cloud.cscfg”。当然，您始终可以使用 $(BuildConfiguration) 之类的变量。作为平台我需要使用没有空格的“anycpu”，我无法通过使用“any cpu”让它工作。**

# jquery - 如何使用jquery检查多个元素是否没有焦点

> ID：15618254
> 
> 赞同：0
> 
> 时间：2013-03-25T15:07:56.817
> 
> 标签：jquery

如何检查 2 个元素是否没有焦点？

我有一个文本框和下拉列表。如果它们都不是焦点，我想隐藏下拉菜单。

我可以检查以下代码吗？

```
if (!$("#dropdown,#textbox").is(":focus")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:12:39.660

```
if ($("#dropdown,#textbox").is(":focus")) //its valid it will validate any
{
    $("#dropdown").show();
}else{
    $("#dropdown").hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:11:05.097

[document.activeElement](https://developer.mozilla.org/en-US/docs/DOM/document.activeElement)将返回当前聚焦的元素，然后您所要做的就是检查 ID 是否不匹配，`dropdown`或者`textbox`，不需要 jQuery！

```
var focused = document.activeElement.id;

if ( focused != 'dropdown' && focused != 'textbox') {
   document.getElementById('dropdown').style.display = 'none';
} 
```

或 jQuery 版本：

```
$('#dropdown').toggle( !$("#dropdown, #textbox").is(":focus") ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:14:08.313

尝试：

```
if ( !$('#dropdown').is(':focus') && !$("#textbox").is(':focus') ) { your function here } 
```

# objective-c - 索引 1 越界

> ID：15618259
> 
> 赞同：0
> 
> 时间：2013-03-25T15:08:08.893
> 
> 标签：objective-c, xcode

我将字符串拆分为数组中的字符，具体取决于执行操作的字符。如果文本字段为空白或其中包含 1 个字符，则应用程序因 NSRangeException 而崩溃。如果有 2 个或更多字符，则它可以正常工作，部分代码如下：

```
-(IBAction) text: (id) sender{

    //labelText.text = [[NSString alloc] initWithFormat:@"%@",textField1];
    labelText.text = textField1.text;
    NSString *myString = textField1.text;

    NSMutableArray *characters = [[NSMutableArray alloc] initWithCapacity:[myString length]];
    for (int i=0; i < [myString length]; i++) {
        NSString *ichar  = [NSString stringWithFormat:@"%c", [myString characterAtIndex:i]];
        [characters addObject:ichar];
    }

    //NSLog (@"%@", [characters objectAtIndex:1]);
    //NSLog (@"%@", [characters objectAtIndex:2]);

    one1.text = (@"%@", [characters objectAtIndex:1]);

    if ([textField1.text length] == 0) {
        UIAlertView *myAlert = [[UIAlertView alloc] initWithTitle:@"Please enter number in the box above." message:@"" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [myAlert show];
        [myAlert release];

    }

    else if ([textField1.text length] == 1){
        NSString *char1 = [characters objectAtIndex:0];
        Charr1 = char1;

    }

    else if ([textField1.text length] == 2){
        NSString *char1 = [characters objectAtIndex:0];
        NSString *char2 = [characters objectAtIndex:1];
        Charr1 = char1;
        Charr2 = char2;

    }else if ([textField1.text length] == 3){
        NSString *char1 = [characters objectAtIndex:0];
        NSString *char2 = [characters objectAtIndex:1];
        NSString *char3 = [characters objectAtIndex:2];
        Charr1 = char1;
        Charr2 = char2;
        Charr3 = char3;

    }else if ([textField1.text length] == 4){
        NSString *char1 = [characters objectAtIndex:0];
        NSString *char2 = [characters objectAtIndex:1];
        NSString *char3 = [characters objectAtIndex:2];
        NSString *char4 = [characters objectAtIndex:3];
        Charr1 = char1;
        Charr2 = char2;
        Charr3 = char3;
        Charr4 = char4;

    }else if ([textField1.text length] == 5){
        NSString *char1 = [characters objectAtIndex:0];
        NSString *char2 = [characters objectAtIndex:1];
        NSString *char3 = [characters objectAtIndex:2];
        NSString *char4 = [characters objectAtIndex:3];
        NSString *char5 = [characters objectAtIndex:4];

        Charr1 = char1;
        Charr2 = char2;
        Charr3 = char3;
        Charr4 = char4;
        Charr5 = char5; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:17:40.107

您的代码中的这一行会使您的应用程序崩溃，因为如果您的字符串中有 0 或 1 个字符，那么您的字符串您无法在 location:1 访问

```
one1.text = (@"%@", [characters objectAtIndex:1]); 
```

解决将整个代码放在 for 循环之后的 if 条件

```
if([characters count] > 0)
{
   // your code after for loop write here 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:17:17.737

您只是忘记删除此行：

```
one1.text = (@"%@", [characters objectAtIndex:1]); 
```

# qt - 如何更改 QTableWidget 中空白单元格的背景颜色

> ID：15618260
> 
> 赞同：28
> 
> 时间：2013-03-25T15:08:09.583
> 
> 标签：qt, qt4, qtablewidget, qt4.8, qtablewidgetitem

如果一个单元格有一些数据，使用

```
tableWidget->item(8,0)->setBackgroundColor(Qt::red); 
```

更改背景颜色将起作用，但如果单元格为空白，它将失败。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-25T15:57:48.533

您不能设置单元格的背景颜色，除非它包含 a `QTableWidgetItem`（因为背景颜色是项目的属性）。

所以你需要先`QTableWidget`用空项目填充你的。在您的示例中，在尝试设置背景颜色之前创建项目。

```
tableWidget->setItem(8, 0, new QTableWidgetItem);
tableWidget->item(8, 0)->setBackground(Qt::red); 
```

另请注意，您应该使用`setBackground`而不是，`setBackgroundColor`因为后者已被弃用。

# sql - Oracle 左连接规则

> ID：15618264
> 
> 赞同：-2
> 
> 时间：2013-03-25T15:08:24.587
> 
> 标签：sql, oracle, oracle11g, left-join

我有一个问题，也许我的搜索技能不够，所以请随时关闭它并指出我的问题的副本。

Oracle 11g 如何解决不明确的左连接？模棱两可的意思是假设左连接将连接表上的两行与源表上的一行相匹配。将加入哪一行？它是确定性的吗？如果是这样，歧义解决规则是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:21:22.103

没有歧义。基本上，行会根据需要重复：

```
create table a(
  a_id number,
  a_name varchar2(10)
);

create table b(
  b_id number,
  b_name varchar2(10)
);

insert into a (a_id, a_name) values (1, 'A');
insert into a (a_id, a_name) values (2, 'B');
insert into a (a_id, a_name) values (3, 'C');

insert into b (b_id, b_name) values (1, 'X');
insert into b (b_id, b_name) values (1, 'Y');
insert into b (b_id, b_name) values (2, 'Z');

select *
from a
left join b on a.a_id=b.b_id
order by a.a_id, a.a_name, b.b_id, b.b_name 
```

```
A_ID   A_NAME B_ID   B_NAME
1      A      1      X
1      A      1      Y
2      B      2      Z
3      C      (null) (null) 
```

您可以将左连接视为带有过滤器的一般交叉连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:09:37.697

如果一个连接条件匹配多行，无论它是内连接还是外连接，所有这些行都将出现在结果集中。对于左（外）连接，如果未找到匹配项，则其字段将为空。

# php - usort() 在数组后不起作用

> ID：15618266
> 
> 赞同：0
> 
> 时间：2013-03-25T15:08:31.190
> 
> 标签：php, usort

我的代码如下

```
$results = array();
$results[] = json_decode("json api response url", true);
$results[] = json_decode("json api response url 2", true);
$results[] = json_decode("json api response url 3", true);
foreach($results as $result) {
     $decoded = $result['Info'];
     usort($decoded, function($a, $b) { return $a['price'] > $b['price'] ? 1 : -1; });
     foreach($decoded as $row) {
         echo $row['price'];
     } 
} 
```

JSON数组返回如下

```
["Info"]=>
[0]=>
array(13) {
  ["price"]=>  
    int(3000)
} 
[1]=>
array(13) {
  ["price"]=>
     int(5000) 
```

它`usort`为每个`json_decode`响应而不是所有响应都做一个，他们是否可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:24:43.660

您正在对数组中的每个项目执行排序。在遍历结果之前尝试进行排序。我不知道这是否可行，但它应该为您指明正确的方向。

```
$results = array();
$results[] = json_decode("json api response url", true);
$results[] = json_decode("json api response url 2", true);
$results[] = json_decode("json api response url 3", true);

usort($results, function($a, $b) {
  return $a['Info']['price'] > $b['Info']['price'] ? 1 : -1;
});

foreach($results as $result) {
   // do your looped stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:12:57.740

我认为您想要做的是连接所有 JSON 响应并将它们放在一起，而不是在 results[]; 中创建 3 个不同的数组元素；查看array_merge（）：

```
$result = array();
$arr1 = json_decode("json api response url", true);
$arr2 = json_decode("json api response url 2", true);
$arr3 = json_decode("json api response url 3", true);

$result = array_merge($arr1['Info'], $arr2['Info'], $arr3['Info']);

$decoded = $result;
usort($decoded, function($a, $b) { return $a['price'] > $b['price'] ? 1 : -1; });
foreach($decoded as $row) {
  echo $row['price'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:34:24.870

```
$results = array();
$results[] = json_decode("json api response url", true);
$results[] = json_decode("json api response url 2", true);
$results[] = json_decode("json api response url 3", true);

function cmp($a, $b)
{
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

usort($results, "cmp");

foreach($results as $row) {
   echo $row['price'];
} 
```

# mysql - MYSQL：如何创建一个触发器，根据不同表中的值计算字段值？

> ID：15618271
> 
> 赞同：3
> 
> 时间：2013-03-25T15:08:45.583
> 
> 标签：mysql, sql, triggers

在*表 A 中，*我有字段`CENA`（价格）、`cena_za_kus`（价格每件）、`mnozstvi`（数量）。
在*表 B 中*，我有字段`DPH`（增值税）。

我想添加一个更新/插入之前的触发器，它将计算`PRICE`字段的值，如下所示：

```
price = (price_per_piece * count) + (price_per_piece * count * tableB.vat) 
```

这可能吗？谢谢你。

编辑：*表*A 中的行有一个 foreign_key`dph_id`指向*表 B*中的相应行。

```
 CREATE TABLE `polozky` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `objednavka_id` int(11) NOT NULL,
  `dph_id` int(11) NOT NULL,
  `polozka` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `cena` float NOT NULL,
  `mnozstvi` int(11) NOT NULL,
  `cena_za_kus` float NOT NULL,
  PRIMARY KEY (`id`),
  KEY `IdObjednavka` (`objednavka_id`,`dph_id`),
  KEY `objednavka_id` (`objednavka_id`),
  KEY `dph_id` (`dph_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=63663 ;

ALTER TABLE `polozky`
  ADD CONSTRAINT `polozky_ibfk_7` FOREIGN KEY (`objednavka_id`) REFERENCES `objednavky` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  ADD CONSTRAINT `polozky_ibfk_8` FOREIGN KEY (`dph_id`) REFERENCES `dph` (`id`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

和

```
CREATE TABLE `dph` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sekce` varchar(64) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'nastaveni',
  `popis` varchar(8) COLLATE utf8_unicode_ci NOT NULL,
  `DPH` int(11) unsigned NOT NULL,
  `poradi` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `DPH_2` (`DPH`),
  UNIQUE KEY `popis` (`popis`),
  KEY `DPH` (`DPH`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=9 ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:26:25.193

尝试这个：

```
DELIMITER $$

CREATE TRIGGER `yourDB_polozky`
   BEFORE INSERT
   ON `yourDB`.`polozky`
   FOR EACH ROW
BEGIN
   DECLARE vat_rate   float;

   SELECT DPH
     INTO dph_rate
     FROM `yourDB`.`dph`
    WHERE id = new.dph_id;

   SET new.cena = (1 + dph_rate) * (new.cena_za_kus * new.mnozstvi);
END
$$ 
```

# jquery-mobile - 使用 jquery mobile datebox (mobiscroll) 验证 jquery

> ID：15618274
> 
> 赞同：1
> 
> 时间：2013-03-25T15:08:48.647
> 
> 标签：jquery-mobile, jquery-validate, datepicker, mobiscroll

使用 jQuery 移动日期框时，我遇到了 jQuery 验证问题。

我将验证设置为：

```
onkeyup: false 
```

我相信这会触发对焦点/模糊（选项卡）事件的验证。

问题是，当我使用日期框选择器设置日期时，它似乎不会触发此事件，所以如果我有一个日期框，其日期为“必需”并且已填写，错误消息仍会显示...

编辑：

这是我的小提琴：

[http://jsfiddle.net/3v2ZV/](http://jsfiddle.net/3v2ZV/)

HTML

```
<form id="my_form" method="post">
    <input name="name" id="full-name" data-theme="a" placeholder="Name" class="required">
    <input name="athlete_datebox" id="athlete_datebox" data-theme="a" placeholder="Date of Birth" class="required">
    <input type="submit" value="submit">
</form> 
```

JS

```
$(document).ready(function () {
    $('#my_form').validate({
        onkeyup: true
    });
    $('#athlete_datebox').mobiscroll().date({
        theme: 'jqm',
        display: 'modal',
        mode: 'clickpick',
        dateOrder: 'mmD ddyy',
        dateFormat: 'yy-M-dd',
        endYear: 2034
    });
    $('#my_form').on('submit', function (event) {
        event.stopPropagation();
        event.preventDefault();
        if ($('#my_form').valid()) {
            alert('is valid');
        }
    });
}) 
```

如果您在填写任何内容之前点击“提交”，您会看到这两个字段都是必需的。但是，在使用 mobiscroll 日期选择器填写日期后，该字段仍列为必填字段，即使它不为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:49:39.803

> *“我的验证设置为：*
> 
> `onkeyup: false`
> 
> *我相信这会触发对焦点/模糊（选项卡）事件的验证。”*

您只是关闭了该`onkeyup`事件。该`onfocusout`事件是一个完全不同的选项，默认情况下“打开”，除非您也将其关闭。

由于您没有提供代码，因此我无法为您提供更详细的解决方案。

但是，您描述的问题可能可以通过使用日期选择器中内置的回调函数（哪个？）来解决。像“on change”或“on select”之类的东西，如果它有这些可用的话。

然后在回调函数中，您需要调用[jQuery Validate 插件的`.element()`方法](http://docs.jquery.com/Plugins/Validation/Validator/element#element)，该方法以编程方式触发仅对该特定元素的验证测试。

```
$('#myform').validate().element('#myelement'); 
```

如果它没有回调函数，你可以尝试这样的事情，它利用元素的[jQuery`change`事件](http://api.jquery.com/change/)。

```
$('#myelement').on('change', function() {
    $('#myform').validate().element('#myelement');
}); 
```

* * *

**编辑**：

关于您的 jsFiddle 中的代码。

1）不要在选项后放置分号`validate`。这会破坏插件。

2）不要使用`submit`处理程序来检查表单是否有效。内置`submitHandler`回调已经这样做了。

3) 你的`</form>`标签是拼写的`</for>`

OP 的修改：http: [//jsfiddle.net/3v2ZV/4/](http://jsfiddle.net/3v2ZV/4/)

# python - Python - 在函数中更改全局变量

> ID：15618287
> 
> 赞同：2
> 
> 时间：2013-03-25T15:09:27.493
> 
> 标签：python, global-variables

我在python中有以下代码：

```
board = 0

def Board1():
    global board
    board = 1

def Board2():
    global board
    board = 2

def Board3(board):
    board = 3
    print board

def ReadBoard():
    print board 
```

我认为函数 Board1 和 Board2 应该改变全局变量 board 的值。但这是发生的情况：当我调用板时，它返回 0。如果我调用 Board1，全局板值不会改变，但如果我调用 ReadBoard，它会给出 Board1 分配的值。例如（在 python 控制台中）：

```
>>> board  
0  
>>> Board1()  
>>> board  
0  
>>> ReadBoard()  
1  
>>> Board3(board)
3  
>>> board  
0  
>>> board = 4
>>> ReadBoard()
1 
```

我不明白为什么我不能全局更改全局变量以及为什么要在 ReadBoard 函数中读取更改后的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:19:23.063

你有一个 Python 模块，它定义了`board`. 在您的控制台中，您有另一个您命名的不同对象`board`。当您`board`从控制台输出时，您将获得该对象。当包含函数的模块 print`board`时，它会打印该模块中定义的对象。

所以根本的问题是你有两个你叫的东西`board`。

我希望您像这样导入模块：

```
from MyModule import * 
```

这样做后，您将无法区分这两个`board`对象。所以改为使用：

```
import MyModule 
```

然后就可以用`MyModule.board`来引用`board`模块中定义的全局了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:14:46.443

将全局变量`board`导入 Python 控制台一次后，它不会改变。尝试将该代码放入您的文件（作为打印语句）而不是在控制台中执行它，它应该可以工作。

# groovy - 导入其他 groovy 脚本——出现错误

> ID：15618289
> 
> 赞同：3
> 
> 时间：2013-03-25T15:09:36.730
> 
> 标签：groovy

我正在尝试构建一个包含常用方法的 groovy 类。收到此错误，不知道如何解决

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Compilation incomplete: expected to find the class pages.manage.Common in file:/Users/jsmithers/groovy/Development/groovy/automation/qa-automation/pages/manage/Common.groovy, but the file contains the classes: Common 
```

这是我的其他脚本中的导入行

```
import pages.manage.* 
```

想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T15:14:55.917

您需要在包含的脚本中指定包，例如“package pages.manage”。

# c# - 在外部站点使用 Orchard 登录

> ID：15618293
> 
> 赞同：1
> 
> 时间：2013-03-25T15:09:52.930
> 
> 标签：c#, .net, orchardcms

我正在用 C# 开发一个名为“ProjectX”的 Web 应用程序和一个 Orchard Site (1.6)。我想在“ProjectX”中使用 Orchard 用户和角色。这个想法是将登录管理器集中在一个站点（Orchard）中。

基本上，用户在 Orchard Site 上进行登录，他将重定向到“ProjectX”，之后我需要将角色用于某些过程，例如：

```
if (role == "customer") 
 call method1();
else
 call method2(); 
```

我们想要一个相当简单的解决方案来做到这一点，我注意到 Orchard 在登录过程之后创建了两个 Cookie，但我不知道它是否可以帮助我进行验证。

有可能吗？有人可以帮我出主意吗？

谢谢！

# c# - 使用 Datagridview，获取现有列并使它们成为超链接

> ID：15618299
> 
> 赞同：1
> 
> 时间：2013-03-25T15:10:06.820
> 
> 标签：c#, datagridview, hyperlink

我的第五列是从我们的 SQL 服务器`DataGridView`中提取信息。`resumelink`文件的名称是 resumelink 记录中唯一的东西，例如。**DOC100.pdf**或**Name12.pdf**。我需要将它们链接到计算机上的映射驱动器，因此，如果文件名是**DOC100.pdf**，则它必须是`//nt/resume/DOC100.pdf`. 我需要存储`//nt/resume`零件，然后只需添加 resumelink 字段中的内容。我有一个字段，`dataGridView1_CellContentClick`但它目前是空的。我不关心 pdf 的打开方式，无论是在 IE 还是 Adob​​e 中。

这是程序外观的图片。

![在此处输入图像描述](../Images/003bbdb9fe5618de46e8f2fa5b8cdfa4.png)

```
namespace ResumeTest
{
public partial class Resume : Form
{
    SqlConnection conn = new SqlConnection();

    public Resume()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'iHBAPPSDataSet.HRresume' table. You can move, or remove it, as needed.
       this.hRresumeTableAdapter.Fill(this.iHBAPPSDataSet.HRresume);
       this.dataGridView1.RowsDefaultCellStyle.BackColor = Color.White;
       this.dataGridView1.AlternatingRowsDefaultCellStyle.BackColor = Color.Aquamarine;
    }

    private void button1_Click(object sender, EventArgs e)
    {
       bindingSource1.Filter = "name LIKE '%" + name.Text + "%' AND skillset LIKE '%" + skillset.Text + "%'";
    }

    public void ClearTextBoxes(Control control)
    {
        foreach (Control c in control.Controls)
        {
            if (c is TextBox)
            {
                if (!(c.Parent is NumericUpDown))
                {
                    ((TextBox)c).Clear();
                }
            }
            else if (c is NumericUpDown)
            {
                ((NumericUpDown)c).Value = 0;
            }
            else if (c is ComboBox)
            {
                ((ComboBox)c).SelectedIndex = 0;
            }

            if (c.HasChildren)
            {
                ClearTextBoxes(c);
            }
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        ClearTextBoxes(this);
        bindingSource1.Filter = "name LIKE '%" + name.Text + "%'";
    }

    private void button3_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void button4_Click(object sender, EventArgs e)
    {
        Add f2 = new Add();
        f2.Show();
    }

    private void button6_Click(object sender, EventArgs e)
    {
        Delete f3 = new Delete();
        f3.Show();
    }

    private void refreshButton_Click(object sender, EventArgs e)
    {
        this.hRresumeTableAdapter.Fill(this.iHBAPPSDataSet.HRresume);
    }

    private void quitToolStripMenuItem_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:53:29.740

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
      // set the part of filename You have to add to some constant
      // or save it in some external file and read here to be able to edit this value
      // without rebuilding of the project
      const string filePreName = @"//nt/resume/";

      // get the clicked filename value
      string filename = dataGridView1[e.ColumnIndex, e.RowIndex].Value.ToString();

      // combine file pre name and file name
      string finalFilePath = filePreName + filename;

      // this function will start default program, which is configured in your system
      // to handle pdf files and will open selected pdf file in this program
      // to get access to this function you should reference to

      // using System.Diagnostics;

      // at the top of current class file
      Process.Start(finalFilePath);
} 
```

或者将所有内容放在一行中：

```
Process.Start(@"//nt/resume/" + dataGridView1[e.ColumnIndex, e.RowIndex].Value); 
```

PS 这不会改变数据网格中文件名的显示（我认为这甚至比`//nt/resume/DOC100.pdf`在一个单元格中显示长字符串更好），但会正确处理文件打开。

# c++ - 模板类关系

> ID：15618301
> 
> 赞同：0
> 
> 时间：2013-03-25T15:10:19.437
> 
> 标签：c++, class, templates

```
template<class Rawr>
class TestContains;

template <class T>
class TestStore//: public TestContains
{
public:
    TestStore(T first, T second, T W, T H)
    {
        x = first;
        y = second;
        Width = W;
        Height = H;

        TestContains<T> a(x, y, Width, Height);

        *b = a;
    }
    ~TestStore() {};

    T x;
    T y;
    T Width;
    T Height;

TestContains<T>* GetRect();

protected:
private:
TestContains<T> *b;
}; 
```

共产党

```
template<class T>
TestContains<T>* TestStore<T>::GetRect()
{
    return &b;
} 
```

测试包含

```
template<class Rawr>
class TestContains
{
    public:
        TestContains(Rawr first, Rawr second,  Rawr W, Rawr H)
        {
            x = first;
            y = second;
            Width = W;
            Height = H;
        }

        ~TestContains(){};

    template <class T>
    bool Contains(T Mx, T My)
    {
       if (Mx >= x && Mx <= x + Width && My >= y && My <= My + Height)
       return true;

       return false;
    }

Rawr x;
Rawr y;
Rawr Width;
Rawr Height;

///friend?
template<class T>
friend class TestStore;

    protected:
    private:
}; 
```

执行

```
TestStore<int> test(0, 0, 100, 100);

if (test.GetRect().Contains(mouseX, mouseY))
{
    std::cout << "Within 0, 0, 100, 100" << std::endl;
} 
```

无论如何......所以我无法编译这个

> /home/chivos/Desktop/yay/ShoeState.cpp||在成员函数'virtual void ShoeState::GameLoop(GameEngine*)':| /home/chivos/Desktop/yay/ShoeState.cpp|51|错误：在'test.TestStore::GetRect with T = int'中请求成员'Contains'，它是非类类型'TestContains*'| ||=== 构建完成：1 个错误，0 个警告 ===|

我已经搞砸了很长时间，它开始困扰我！大声笑，有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:11:49.640

错误告诉你`test.GetRect()`返回一个指针。要通过指向对象的指针访问成员，您应该使用`->`而不是`.`：

```
//                ▾▾
if (test.GetRect()->Contains(mouseX, mouseY))
{
    std::cout << "Within 0, 0, 100, 100" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:18:58.320

两个问题：一个是 sftrabbit 在他/她的回答中指出的。另一种是你试图在`GetRect`函数中返回一个指向指针的指针：使用address-of`&`操作符会使return语句返回指针的地址，即指向指针的指针。

你有一个比编译错误更严重的问题，一个*未定义的行为*，很可能最终导致崩溃：在类`TestStore`中，你有一个成员变量`b`，它是一个指针。在构造函数中，您分配给它指向的内容，但当时它实际上并没有指向任何东西，并且您覆盖了随机内存。

在使用解引用运算符分配指针指向的位置之前分配指针，或者根本不使用指针（我的建议）。

# c# - 从 2 个 Vector3D 中检索 3 个欧拉角

> ID：15618304
> 
> 赞同：2
> 
> 时间：2013-03-25T15:10:25.950
> 
> 标签：c#, .net, vb.net, robotics

如何从 2 vector3D 中检索 3 个欧拉角？

谢谢

雪松

```
dim vector1 = new Vector3D(0, 0, 1);

dim vector2 = new Vector3D(0.33, 0.45, 0.49);

dim myEuler = GetEulerFrom2Vector(vector1,vector2); // ????? 
```

我在直角坐标系中工作，我使用 ZYX 欧拉约定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:34:38.163

我使用旋转矩阵：

```
R11 R12 R13
R21 R22 R23
R31 R32 R33 
```

R = Rz Ry Rx

```
if (R31 <> ±1)
    y1 = -sin-1(R31)
    y2 = pi + sin-1(R31)

    x1 = atan2 (R32/cos y1,R33/cos y1)
    x2 = atan2 (R32/cos y2,R33/cos y2)

    z1 = atan2( R21/cos y1,R11/cos y1)
    z2 = atan2( R21/cos y2,R11/cos y2)
        Else
    z= anything; can set to 0
    if (R31 = -1)
        y = -pi / 2
        x = z  + atan2(R12,R13)
     Else
         y = -pi / 2
         x  = -z + atan2(-R12,-R13)     
    End If
End If 
```

[https://truesculpt.googlecode.com/hg-history/38000e9dfece971460473d5788c235fbbe82f31b/Doc/rotation_matrix_to_euler.pdf](https://truesculpt.googlecode.com/hg-history/38000e9dfece971460473d5788c235fbbe82f31b/Doc/rotation_matrix_to_euler.pdf)

或一个简单的版本

```
 result.X = Math.Atan2(R32, R33) * (180.0 / Math.PI)
    result.Y = Math.Atan2(-1 * R31, Math.Sqrt(R32 * R32 + R33 * R33)) * (180.0 / Math.PI)
    result.Z = Math.Atan2(R21, R11) * (180.0 / Math.PI) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:47:16.863

我们可以假设这两个向量相互垂直`vector1.Dot(vector2)==0`吗？如果是，则找到第三个向量以形成坐标系

```
vector1 = vector1.Normalized();
vector2 = vector2.Normalized();
vector3 = VectorCross(vector1,vector2).Normalized(); 
```

其中`VectorCross`是 3D 向量叉积，并`Normalized()`返回一个单位向量。

现在你的旋转矩阵`E`是

```
 | vector1.x   vector2.x   vector3.x |
 | vector1.y   vector2.y   vector3.y |
 | vector1.z   vector2.z   vector3.z | 
```

[现在您可以使用此处](http://www.geometrictools.com/Documentation/EulerAngles.pdf)的说明从旋转矩阵转到欧拉角。

PS。如果`vector2`不垂直则可以通过计算后`vector1`使其垂直。`vector2 = CrossProduct(vector3, vector1).Normalized()``vector3`

这是我用来从两个轴转到旋转矩阵的代码：

```
 public static mat3 AlignZX(vec3 unit_z, vec3 unit_x)
    {
        unit_x=unit_x.Normalized();
        unit_z=unit_z.Normalized();
        vec3 unit_y=unit_z.Cross(unit_x);
        unit_x=unit_y.Cross(unit_z);
        return mat3.Combine(unit_x, unit_y, unit_z);
    }
    public static mat3 AlignXY(vec3 unit_x, vec3 unit_y)
    {
        unit_x=unit_x.Normalized();
        unit_y=unit_y.Normalized();
        vec3 unit_z=unit_x.Cross(unit_y);
        unit_y=unit_z.Cross(unit_x);
        return mat3.Combine(unit_x, unit_y, unit_z);
    }
    public static mat3 AlignYZ(vec3 unit_y, vec3 unit_z)
    {
        unit_y=unit_y.Normalized();
        unit_z=unit_z.Normalized();
        vec3 unit_x=unit_y.Cross(unit_z);
        unit_z=unit_x.Cross(unit_y);
        return mat3.Combine(unit_x, unit_y, unit_z);
    } 
```

# ruby-on-rails - 使用 ajax 调用和远程渲染 rails 部分 => true

> ID：15618307
> 
> 赞同：3
> 
> 时间：2013-03-25T15:10:31.153
> 
> 标签：ruby-on-rails, ajax

我有一个页面，taxons#show，列出了一堆产品，当你点击一个产品时，它会带你到 products#show，这是单个产品页面。此页面显示部分 _cart_form.html.erb，它具有将产品添加到购物车、选择尺寸、颜色等的一系列功能。

在 Taxons#show 上，当您单击产品时，我想在 taxons#show 上显示一个灯箱，而不是转到单个产品页面，其中 _cart_form.html.erb 部分位于其中。我有灯箱工作，当您单击图像时，它会正确显示灯箱，而不是转到 products#show 页面，但我不确定如何渲染其中的部分内容。这是我到目前为止的链接：

```
<div class="main-image" id="single_<%= product.id %>" data-productid="<%= product.id %>">
      <%= link_to large_image(product, :itemprop => "image", :class => "product-image", :id => product.id), product_path(product), :remote => true, :html => {:class => "product_popup"}  %>
</div><!-- main-image--> 
```

灯箱代码是一个 div，它是 display: none 直到点击它，看起来像这样：

```
<%# ******LIGHTBOX******* %>
<div id="product_popup_<%= product.id %>" class="product_popup" data-popid="<%= product.id %>">
        <div class="related-products">
          <ul class="related_products_list" id="related_products_list_<%= product.id %>" data-listid="<%= product.id %>">
         <% @related_products.each do |related_product| %>
         <li class="related_products_item"><%= link_to large_image(related_product, :itemprop => "image", :data => {:imageid => related_product.id}, :id => "related_" + related_product.id.to_s, :class => "related_products_image dimmed"), url_for(related_product) %></li>
         <% end %>
    </ul>
        </div>
        <div class="popup-image">
        <%= large_image(product, :itemprop => "image", :class => "product-image-popup") %>
</div><!-- popup-image --> 
```

谁能告诉我在灯箱内单击该链接时如何渲染部分内容？谢谢！

编辑**

当我尝试直接在 taxons#show 内的灯箱中渲染部分时，我收到以下 NoMethod 错误：

```
 NoMethodError in Spree/taxons#show

 Showing    /home/telegraph/telegraph1/pants.telegraphbranding.com/app/views/spree/shared/_cart_form.html.erb where line #4 raised:

undefined method `has_variants?' for nil:NilClass
Extracted source (around line #4):

1: <%= form_for :order, :url => populate_orders_path do |f| %>
2:   <div id="inside-product-cart-form" data-hook="inside_product_cart_form"     itemprop="offers" itemscope itemtype="http://schema.org/Offer">
3: 
4:     <% if @product.has_variants? %>
5:       <div id="product-variants" class="columns five alpha">
6:         <h6 class="product-section-title"><%= t(:variants) %></h6>
7:         <ul> 
```

[2013 年 9 月 24 日更新]

标记的解决方案解决了上述问题，但导致了一个可怕的堆栈级别太深的错误，导致我放弃了该功能。但我认为这是一个很好的解决方案：

[渲染部分时找不到“堆栈级别太深”错误的根源](https://stackoverflow.com/questions/15669022/cant-find-root-of-stack-level-too-deep-error-when-rendering-partial/18446806?noredirect=1#comment27111396_18446806)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:28:08.563

我会这样做的方式是让您的应用程序以 AJAX 方式呈现灯箱

**products_controller.rb**

```
def show
  @product = Product.find params[:id]
  respond_to :js
end 
```

**显示.js.erb**

```
$("[id^='product_popup_']").remove();
$(body).append("<%= escape_javascript(render 'product_lightbox', product: @product) %>"); 
```

**_product_lightbox.html.erb**

```
<%# ******LIGHTBOX******* %>
<div id="product_popup_<%= @product.id %>" class="product_popup" data-popid="<%= @product.id %>">
  <div class="related-products">
      <ul class="related_products_list" id="related_products_list_<%= @product.id %>" data-listid="<%= @product.id %>">
     <% @related_products.each do |related_product| %>
     <li class="related_products_item"><%= link_to large_image(related_product, :itemprop => "image", :data => {:imageid => related_product.id}, :id => "related_" + related_product.id.to_s, :class => "related_products_image dimmed"), url_for(related_product) %></li>
     <% end %>
</ul>
    </div>
    <div class="popup-image">
    <%= large_image(product, :itemprop => "image", :class => "product-image-popup") %>
<%= render 'shared/cart_form' %>
</div><!-- popup-image --> 
```

但是在您的问题中，您实际上并没有明确说明您遇到了什么问题。您是否尝试过仅在灯箱代码中渲染部分内容？：/

**编辑**- 根据您的错误，`@product`为零。因此，在渲染部分购物车之前，请设置`<% @product = product %>`，因为您的灯箱代码看起来像使用`product`. 否则，只需`@product`从控制器向下使用，然后您就可以拥有呈现全部使用的局部视图的视图`@product`。

**再次编辑**- 或者，将产品对象作为本地对象传递给您的部分，例如：`<%= render 'bla', :product => product %>`并编辑为部分以使用`product`而不是`@product`.

# iphone - 如何验证在 iPhone 应用程序中输入的帐户（例如 Apple ID）用户？

> ID：15618308
> 
> 赞同：1
> 
> 时间：2013-03-25T15:10:36.727
> 
> 标签：iphone, ios

我为 Android 编写了一个应用程序，它使用在手机中注册的 Google 帐户。应用程序列出帐户并让用户选择一个作为用户 ID。原因如下：

*   无需询问密码。
*   我想要唯一的用户 ID。别人不知道密码就不能使用别人的id。
*   用户 ID 应该是人类可读的。所以谷歌账号很合适。

该方案在 Android 中运行良好。现在我正在研究如何在 iPhone 中做类似的事情。

首先，我搜索了在 iPhone 中列出 Apple ID 的方法。我很快就知道在 iOS 中这是不可能的。现在我想知道如何验证用户输入的某些帐户（Apple ID 会很好）。

用例如下：

*   运行应用程序。
*   应用程序要求用户输入 Apple ID，但没有密码。
*   应用程序验证 Apple ID 是否有效并将其用作用户 ID，并将其发送到服务器。
*   其他用户可以通过引用该 ID 进行通信。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:15:51.637

iOS 不支持在您自己的应用程序中使用 Apple ID 对用户进行身份验证。

[在 iOS 6 中，您可以通过Accounts.framework](https://developer.apple.com/library/prerelease/mac/documentation/Accounts/Reference/AccountsFrameworkRef/index.html)使用 Facebook 和 Twitter（以及在中国，新浪微博）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:14:59.170

Apple 不提供可访问的 SDK 来与 Apple ID 交互。至少据我所知。我认为您无法在 iOS 中复制您在 Android 上拥有的功能。

# javascript - 向所有函数添加一行代码

> ID：15618309
> 
> 赞同：0
> 
> 时间：2013-03-25T15:10:39.250
> 
> 标签：javascript, class, coffeescript

所以我在 JS 中工作了很多，并且我在事件上工作了很多（尽量保持模块化）。当前我`Event.fire('eventName')`在每个函数结束时调用。我正在寻找一种方法让我的对象/类中的任何函数在`Event.fire([function name])`所有函数的末尾自动调用

例子：

```
function MyClass(){
   this.on('someFunc', this.funcTwo);
   this.someFunc();
}
MyClass.prototype.on = function( event ){
   // the event stuff //
}
MyClass.prototype.someFunc = function(){
   console.log('someFunc');
}
MyClass.prototype.funcTwo = function(){
   console.log('funcTwo');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:15:18.027

您可以尝试这样的事情，动态修改您的功能：

```
var obj = MyClass.prototype;
for (var prop in obj)
    if (typeof obj[prop] == "function") // maybe also prop != "on" and similar
        (function(name, old) {
            obj[prop] = function() {
                var res = old.apply(this, arguments);
                Event.fire(name);
                return res;
            };
        })(prop, obj[prop]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:22:43.927

您可以创建一个函数来构建始终具有该功能的函数：

```
var eventFunctionFactory = function(fn, e) {
  if (typeof fn != 'function' || typeof e != 'function') {
    throw new TypeError('Invalid function!');
  }

  return function(/* arguments */) {
    // Convert arguments to array
    var args = Array.prototype.slice.call(arguments);

    // Fire event
    Event.fire(e);

    // Call the function with the applied arguments
    // Return its result
    return fn.apply(fn, args);
  };
};

var myClass = function() {
  this.someFunction = eventFunctionFactory(
                        // Function
                        function(a, b) {
                          return a + b;
                        },

                        // Event
                        function() {
                          console.log('someFunction fired!');
                        }
                      );
};

var myObj = new myClass();

// Outputs:
// someFunction fired!
// 3
console.log(myObj.someFunction(1, 2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:40:36.923

最简单的方法是拥有一个代理类。假设您的常规类是 A 类，代理类是 B 类。B 类在内部有一个 A 类的实例。B 类还为每个 A 类函数都有一个存根，该函数将其内部类称为实例。然后，您可以通过简单地将代码添加到关联的存根（在对类 A 的函数调用之前或之后）将任何您想要的代码添加到原始类。

为了能够使用增强的类，您需要做的就是修改应用程序的其余部分以实例化 B 类而不是 A 类。这种方法的优点是您的原始类保持不变。

# sql - 使用表、字段和模式名称查找引用的表名称

> ID：15618312
> 
> 赞同：1
> 
> 时间：2013-03-25T15:11:00.233
> 
> 标签：sql, postgresql, foreign-keys, constraints

我有一个要求，我需要使用此字段名、表名（此字段所在的位置）和架构名称（其中表，因此该字段驻留）

例如：

```
Schema1.TableA
  Id (Integer, PK)  
  Name varchar

Schema2.TableB
  Id (integer, PK)  
  A_Id (integer, FK referencing TableA.Id)  
  Name varchar 
```

我需要将`A_Id`,`TableB`和传递`Schema2`给一个函数并得到`Schema1.TableA`结果。

我正在使用 Postgres 8.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:22:47.580

如果您不需要将其移植到另一个 RDBMS，则使用目录表而不是标准信息模式*会更快、更简单：*`pg_catalog`

```
SELECT c.confrelid::regclass::text AS referenced_table
     , c.conname AS fk_name
     , pg_get_constraintdef(c.oid) AS fk_definition
FROM   pg_attribute a 
JOIN   pg_constraint c ON (c.conrelid, c.conkey[1]) = (a.attrelid, a.attnum)
WHERE  a.attrelid = '"Schema2"."TableB"'::regclass   -- table name
AND    a.attname  = 'A_Id'                           -- column name  
AND    c.contype  = 'f'
ORDER  BY conrelid::regclass::text, contype DESC; 
```

回报：

```
 referenced_table | fk_name  |  fk_definition
------------------+-------------------------+----------------------------------------------
 Schema1.TableA   | b1_fkey  | FOREIGN KEY ("B_id") REFERENCES "Schema1"."TableA"("A_id") 
```

### 笔记

*   额外的两列仅用于定位。根据您的 Q，您只需要第一列。

*   这将通过涉及给定列名的所有外键返回*所有*引用的表 - 包括多个列上的 FK 约束。

*   根据当前[`search_path`](http://www.postgresql.org/docs/current/interactive/runtime-config-client.html#GUC_SEARCH_PATH). 名称也会在需要的地方（非法或大写字符、保留字等）自动转义。

查看手册[`pg_constraint`](http://www.postgresql.org/docs/current/interactive/catalog-pg-constraint.html)中[`pg_attribute`](http://www.postgresql.org/docs/current/interactive/catalog-pg-attribute.html)的详细信息。还有更多关于[对象标识符类型](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)的信息。

有关的：

*   [PostgreSQL 删除约束未知名称](https://stackoverflow.com/questions/12395466/postgresql-drop-constraint-with-unknown-name/12396684#12396684)
*   [检索所有 PK 和 FK](https://dba.stackexchange.com/questions/36979/retrieving-all-pk-and-fk-with-pgadmin/37068#37068)

# mysql - 即使我使用的是 ON DUPLICATE KEY UPDATE，也会出现“重复条目”错误

> ID：15618313
> 
> 赞同：2
> 
> 时间：2013-03-25T15:11:01.343
> 
> 标签：mysql, sql, node.js

我目前正在做一个项目，我正在处理数千个数据包。现在，我记录每个数据包的 IP 和 MAC 地址以及其他一些信息。为了存储所有这些，我使用 MySQL，我的脚本是用 Node.js 编写的。目前我每秒处理的数据包超过 40k，因此数据库流量非常大。现在，棘手的部分是 IP 和 MAC 地址应该链接在一起，以便它们在表中只存在一次。因此，我将它们都设置为 UNIQUE。但是，当我查询数据库时出现错误：

```
Error: ER_DUP_ENTRY: Duplicate entry 'ff:ff:ff:ff:ff:ff' for key 'mac_UNIQUE' 
```

即使我正在使用`ON DUPLICATE KEY UPDATE`，它也会吐出错误。我的数据库是这样设置的：

```
delimiter $$

CREATE TABLE `hosts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ip` varchar(45) NOT NULL DEFAULT '',
  `mac` varchar(45) NOT NULL DEFAULT '',
  `method` varchar(45) DEFAULT NULL,
  `netbiosName` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ip_UNIQUE` (`ip`),
  UNIQUE KEY `mac_UNIQUE` (`mac`)
) ENGINE=InnoDB AUTO_INCREMENT=1862 DEFAULT CHARSET=latin1$$ 
```

这是我在 Node.js 中使用 node_mysql 库的查询：

```
mysqlConnection.query('INSERT INTO ' + mysqlTable + ' (ip, mac, method) VALUES(?, ?, ?) ON DUPLICATE KEY UPDATE ip=?, mac=?, method=?',
                    [ipAddress, macAddress, method, ipAddress, macAddress, method]); 
```

我真的想不出办法让它发挥作用。

**更新：**出于多种原因，我认为使用 IP 地址作为唯一键可能会更好。但问题仍然存在，这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T15:24:04.730

基于这篇文章[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

*通常，您应该尽量避免对具有多个唯一索引的表使用 ON DUPLICATE KEY UPDATE 子句。*

插入尝试用您当前的 IP 替换现有 IP，但由于您已经在数据库中拥有它，因此无法放置 MAC。例如，您有一条 IP 为 127.0.0.1 的记录。并且您有一条 MAC 地址为 'ff:ff:ff:ff:ff:ff' 的记录您插入一条带有此 IP 和 MAC 地址 'ff:ff:ff:ff:ff:ff' 的新记录。MySQL 将使用 IP 的记录更新为相同的 IP - 127.0.0.1，但由于该 MAC 地址已存在于数据库中，因此无法完成更新。

希望我能很好地解释它:)

如果 IP 地址与 MAC 地址的关系是 1:1，他们应该使用复合密钥，然后您可以执行 ON DUPLICATE KEY UPDATE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:33:11.110

不确定我是否正确理解了您的问题：

如果您希望**每对**ip/mac 都是唯一的（这是有道理的），您必须拥有一个组合的唯一键，而不是像您拥有的**两个唯一键。**

在 DHCP 环境中，随着时间的推移，每个 MAC 地址可以/将拥有多个 IP。

# java - 如果可能，使用 ByteIterator 的新 Akka I/O (Java) TCP 数据处理需要一个 java 示例

> ID：15618314
> 
> 赞同：0
> 
> 时间：2013-03-25T15:11:03.333
> 
> 标签：java, tcp, io, akka

我正在尝试使用新的 Akka I/O 实现 Tcp 服务器，不幸的是文档还没有完成，我在 java 中实现它时遇到了一些问题 :(。我设法创建了一个客户端和服务器并发送从客户端到服务器的消息，但是您如何使用 ByteIterator 读取接收到的字节？我的方法有误吗？也许这不是您处理数据的方式。

当我非常快速地发送大量消息时会发生一些奇怪的事情，它们都排队到 bi，并且在我创建 it.getInt() 后数据永远不会重置事件

```
 if (msg instanceof Tcp.Received) {
   final Tcp.Received recv = (Tcp.Received) msg;
   final ByteString data = recv.data();
   ByteIterator bi = data.iterator();
   while(bi.hasNext()) {
      ....
   }
 } else if (msg instanceof Tcp.CommandFailed) {
   final Tcp.CommandFailed failed = (Tcp.CommandFailed) msg;
   final Tcp.Command command = failed.cmd();
   // react to failed connect, bind, write, etc.
 } else if (msg instanceof Tcp.ConnectionClosed) {
   final Tcp.ConnectionClosed closed = (Tcp.ConnectionClosed) msg;
   if (closed.isAborted()) {
      // handle close reasons like this
 } 
```

解决方案：哦！现在我明白我的错误了，我在客户端缓存了 byteStringBuilder，却忘了清除它-_- 多么愚蠢！

对于那些想要Java实现示例的人来说，我是这样做的：

如果你们有任何优化我正在接受他们！:)

```
 int packetSize = 0;
   if (msg instanceof Tcp.Received) {
        final Tcp.Received recv = (Tcp.Received) msg;
        final ByteString data = recv.data();
        ByteIterator bi = data.iterator();
        while (bi.hasNext()) {
            packetSize = bi.getInt(ByteOrder.LITTLE_ENDIAN);
            Message m = Message.fromByteIterator(bi);
            getContext().parent().tell(m, null);
        }

    } 
```

Message.fromByteIterator(bi) 将通过从 BI 获取 Ints、Floats、Bytes Arrays ... 来初始化一个新的消息对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:32:50.307

我不完全确定我理解这个问题，但这里有两个问题可能导致了这个问题。

您收到的 ByteString 包含由 Tcp 传递的块。你得到的迭代器只会迭代那个块。它不是一个流，只是一个块。此外，Tcp 可以决定将您的字节流拆分到任何它想要的地方，因此您获得的块可能与您的消息边界不一致。你必须自己处理框架。

如果您发送太快并且网络跟不上，则可能会发生第二个问题。Akka IO 为此内置了流控制机制。最简单的情况是在每个 Write 上附加一个 Ack 对象，并且仅在前一个已被确认时才发送下一个写入。

# plugins - 关闭 QuickLook 时如何删除生成的临时文件？

> ID：15618317
> 
> 赞同：2
> 
> 时间：2013-03-25T15:11:05.110
> 
> 标签：plugins, temporary-files, ogg, quicklook, flac

我正在编写一个 Quick Look 插件，它可以生成一些音频文件的预览，例如`ogg`，`flac`通过将它们转换为 AIFF，`ffmpeg`然后返回一个带有`<video>`引用转换后的 AIFF 文件的标签的简约网页。

一切运行良好，除了我需要在临时文件夹中创建那些临时 AIFF 文件。我一直在寻找一种在用户关闭“快速查看”窗口以删除我的 AIFF 文件时获得回调的方法，但我找不到。

我有什么好方法可以删除我的 Quick Look 插件生成的那些临时文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-18T02:30:23.933

我只是花了一些时间尝试自己解决这个类似的问题，试图创建一个插件来读取各种不受支持的图像格式。据我所知，当视图关闭时，您无法真正得到回调来告诉您，因为您将数据交给 Quick Look，因此您以后无法真正删除它们。如果可能，尝试将其转换为 NSData 对象，然后在 HTML 中对其进行编码。该示例以[动态生成预览 > 生成丰富的 HTML](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Articles/QLDynamicGeneration.html)的形式提供。对于您的情况，您只需要替换该部分：

```
[html appendString:@"<img src=\"cid:tabs.png\"><br>"]; 
```

用你的标签。*cid:* URL 是访问临时数据的重要调用。在你的情况下，它会是这样的：

```
[html appendString:@"<audio src=\"cid:converted.aiff\" controls autoplay><br>"]; 
```

然后设置：

```
NSMutableDictionary *audioProps = [[NSMutableDictionary alloc] init];
[audioProps setObject:@"audio/aiff" forKey:(NSString *)kQLPreviewPropertyMIMETypeKey];
[audioProps setObject:audioData forKey:(NSString *)kQLPreviewPropertyAttachmentDataKey];
[props setObject:[NSDictionary dictionaryWithObject:audioProps forKey:@"converted.aiff"] forKey:(NSString *)kQLPreviewPropertyAttachmentsKey]; 
```

其中*props*是主要的属性引用，*audioData*是代表您的 aiff 文件的 NSData 等。如果您在 tmp 中有来自其他处理的数据，一旦您使用 NSData 将数据加载到内存中，您应该删除 tmp 文件（参见[NSData dataWithContentsOfFile：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)）。

# assembly - 装配引导加载程序在虚拟 PC 上工作，而不是在真实 PC 上

> ID：15618322
> 
> 赞同：3
> 
> 时间：2013-03-25T15:11:35.000
> 
> 标签：assembly, x86, bootloader, osdev

我的代码在 virtualbox 中完美运行，但在真正的 PC 上启动时（从 BIOS 检测为 USB 硬盘驱动器的 USB 笔式驱动器）无法正常运行。

在虚拟盒中；代码将磁盘的第 2 和 3 扇区读取到内存，打印前 128 个字节（作为调试步骤），然后执行存储在这些扇区中的代码。

在我的真实 PC 上，它成功地将正确的字节打印到屏幕上（显然是正确读取磁盘，并将其写入内存中的预期位置），但随后停止执行而不是跳转。

为什么会有所不同，我可能做错了什么？

```
ORG 0x7C00;

; Load Sector 2&3 from disk to 0x1000

mov bx , 0x1000             
mov ah , 0x02   
mov al , 0x02   
mov ch , 0x00   
mov dh , 0x00   
mov cl , 0x02   
int 0x13;

;Print 0x1000 + 128 bytes

mov ah, 0x0e        
mov bx ,0x1000;
loop2:          

mov al, [bx]        
cmp bx, 0x1000+128  

je end2
int 0x10        
add bx , 1;     
jmp loop2;

end2:

; Run our code

call 0x1000

jmp $;

TIMES 510 - ($ - $$) DB 0
DW 0xAA55 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T16:35:59.967

您可能会在真实硬件上发现此代码存在很多问题：

1.  当您进入引导加载程序时，大多数寄存器的状态是未定义的——但是当您调用中断例程时，这些寄存器必须是有效的。确保在启动引导扇区时立即设置段寄存器。例如，如果 ES != CS，你跳到第二阶段的地方会出错。

2.  在调用中断例程之前确保您有一个有效的堆栈。

3.  不要依赖可用的中断例程。许多硬件供应商认识到构建他们的硬件以适用于 Windows 和 Linux（因为这是 99.999% 的客户想要的），并且不会费心实施他们知道 Windows 和 Linux 不会调用的中断例程。

4.  在进行磁盘访问之前，尝试做一些更简单的事情，比如将字符串打印到视频显示器上。接下来，编写一种将寄存器打印到屏幕的方法。只有这样，您才能开始以可以调试的方式编写引导加载程序。

# python - 删除python中的列

> ID：15618330
> 
> 赞同：1
> 
> 时间：2013-03-25T15:11:55.737
> 
> 标签：python, csv

拥有一个包含大约 50 列和几行的逗号分隔文件，我需要删除所有始终为 0 的列（即该列中的所有值都为零）。

使用以下代码读取该文件：

```
with open('data.txt', 'rb') as f:
    reader.csv.reader(f, delimiter=',')
    for row in reader:
        print row

0 0.1 0.3 0.4 0
0 0.2 0.5 0.3 0
0 0.7 0.9 0.2 0 
```

如何从这个内存结构中准确地删除列（即 0）。如果没有重写和重新读取另一个临时 csv 文件来实现这一点，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:17:51.880

读取所有行（将所有值映射到浮点数），使用 转换为列`zip(*rows)`，使用 仅保留任何具有非零值`any()`的行，使用 转换回行`zip(*columns)`：

```
with open('data.txt', 'rb') as f:
    rows = list(map(float, row) for row in csv.reader(f, delimiter=','))

rows = zip(*[col for col in zip(*rows) if any(col)]) 
```

后一步作为演示：

```
>>> rows = [[0, 0.1, 0.3, 0.4, 0], [0, 0.2, 0.5, 0.3, 0], [0, 0.7, 0.9, 0.2, 0]]
>>> zip(*[col for col in zip(*rows) if any(col)])
[(0.1, 0.3, 0.4), (0.2, 0.5, 0.3), (0.7, 0.9, 0.2)] 
```

# c# - Web API RouteUrl 在测试中返回空异常

> ID：15618335
> 
> 赞同：1
> 
> 时间：2013-03-25T15:12:10.737
> 
> 标签：c#, unit-testing, asp.net-web-api

我有点新的单元测试，并试图在 Visual Studio 2012 中使用 Moq 和 MSTest 为我的一个应用程序创建一个方法测试。该应用程序可以正常工作，但是当我运行测试时，出现以下情况的空引用异常：

```
var fooURL = Url.RouteUrl("MyApi", new { httproute = string.Empty, controller = "MyController", id = id }, Request.Url.Scheme); 
```

我已经尝试阅读并围绕[ASP.NET MVC：使用 UrlHelper 的单元测试控制器](https://stackoverflow.com/questions/674458/asp-net-mvc-unit-testing-controllers-that-use-urlhelper)，但这些似乎与测试 url 本身有关。我更关心测试我的功能后面的内容。

上面链接中提到的设置是否太少（或太多）而无法让我的测试正常工作？还是我看错了方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:10:05.507

根据您的评论，它似乎`Request`是空的。我建议使用谷歌搜索[如何模拟请求](https://www.google.ca/search?q=asp.net%20mvc%20unit%20testing%20request&aq=f&oq=asp.net%20mvc%20unit%20testing%20request&aqs=chrome.0.57j0l2j62l3.4884&sourceid=chrome&ie=UTF-8)。

我个人喜欢 Ninject/Moq。这是一个非常易于使用、功能强大的组合。您可以执行以下操作：

*   使用您需要模拟的任何内容创建一个 IHttpRequest 接口（在这种情况下，只是`Url`属性）
*   使用 Ninject 将您的生产应用程序（在 global.asax 的 app-start 事件中）绑定到真正的请求 ( `Kernal.Bind<IHttpRequest>().To(HttpRequest)`)
*   在您的测试用例中，有一个基测试类或一个全局测试运行类来绑定到您的模拟类（或`new Mock<IHttpRequest>()`实例）

您可能必须让您的接口从真实`HttpRequest`类中复制必要的方法/签名。如果这不起作用，您将需要创建一个实现接口并将调用委托给真实`HttpRequest`实例的包装类。

# opengl - GL_ALPHA、GL_LUMINANCE

> ID：15618343
> 
> 赞同：9
> 
> 时间：2013-03-25T15:12:57.650
> 
> 标签：opengl, textures, formats

我正在尝试绑定要解释为 Alpha、亮度或强度的纹理。我正在使用 OpenGL 4.0。我可以毫无问题地将它们绑定为 GL_RED OK，即：

```
glTexImage2D(   GL_TEXTURE_2D,
                i,
                GL_RED,
                mipSizeX,
                mipSizeY,
                0,
                GL_RED, 
                GL_UNSIGNED_BYTE, 
                nullptr); 
```

但是，每当我尝试绑定为 GL_ALPHA、GL_LUMINANCE 或 GL_INTENSITY 时，我都会收到错误 1280。这些格式是否已在 GL 4.0 中被弃用，或者我做错了什么？例如，这失败了：

```
glTexImage2D(   GL_TEXTURE_2D,
                i,
                GL_ALPHA8
                mipSizeX,
                mipSizeY,
                0,
                GL_ALPHA, 
                GL_UNSIGNED_BYTE, 
                nullptr); 
```

编辑：好的，因为这些格式已被弃用，[此页面](http://www.opengl.org/sdk/docs/man/xhtml/glTexImage2D.xml)包含显示实际有效格式的表格。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T15:24:50.263

> GL 4.0 是否已弃用这些格式

对，他们是。

# xamarin - Xamarin：简单的跨平台报警应用

> ID：15618349
> 
> 赞同：11
> 
> 时间：2013-03-25T15:13:11.803
> 
> 标签：xamarin

目标：使用 Xamarin 工作室开发一个跨平台移动应用程序，在特定日期和时间显示一条消息。

问题：

a）如果我想开发这样的应用程序，平台之间将/可以共享什么东西。（将不胜感激具有可能类的结构设计）

b) 使用 Timer 或 AlarmManager 更好吗？

c) 应该为共享核心项目（可移植类库/平台特定库/普通 C# 项目）创建什么类型的项目？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-11T12:51:15.477

在过去的几周里，我一直专注于如何在 Android 和 iOS 之间最好地共享代码，以下是根据我的经验提出的建议：

a) 通常，您可以在平台之间共享任何非平台特定的东西。

我倾向于使用对由接口定义的视图进行引用的演示者或调解者。例如，如果我有一个登录视图，我会让我的 iOS UIViewController 和我的 Android Activity 都实现一个 ILoginView 接口。该接口将定义以下内容：

*   用户名和密码的获取器
*   一个名为 LoginSubmitted 的事件
*   ShowLoginFailed 和 GoNextScreen 两种方法

演示者/中介者将负责监听正在提交的登录，获取用户名/密码，并将这些内容传递给服务调用或命令。每当中介收到命令/服务的结果时，它将负责调用 ShowLoginFailed 或 GoNextScreen。

我还使用接口来定义我的 SQLite 管理器 ( [https://github.com/praeclarum/sqlite-net/tree/master/src](https://github.com/praeclarum/sqlite-net/tree/master/src) )，或负责进行实际 Web API 服务调用的委托。我发现我必须这样做，因为 SQLite 管理器和 RestSharp 需要进行一些特定于平台的编译。

长话短说，接口是你的朋友，尤其是当你将它们与某种依赖注入系统结合时。

b) 如果您希望您的用户在设备处于睡眠模式或在另一个应用程序中时收到警报提示，我会使用 AlarmManager for Android 和 LocalNotification for iOS。

c) 您可以将 PCL 与 Xamarin.Android 和 Xamarin.iOS 一起使用。问题是 PCL 还没有得到 100% 的支持。但是，您可以对开发环境进行一些调整，希望能将您带到您想要的位置：

*   在 Xamarin Studio 中切换到 Beta 或 Alpha 通道：“Xamarin Studio”->“检查更新”->在弹出的对话框左上角的组合框中更改通道->选择“重启并安装更新” 。” 这将让您让 Android 和 iOS 项目能够在同一个解决方案中链接到同一个 PCL。

*   更新 XS 后，关闭 XS 并按照本文中的说明修改您的 Mono 安装，以便 PCL 正确编译：[MonoDevelop：是否可以切换 PCL 的编译器？](https://stackoverflow.com/questions/12041290/monodevelop-is-it-possible-to-switch-pcls-compiler/12062589#12062589)

*   为了让代码提示在您的 PCL 项目中更好地发挥作用，您需要从 Mono 安装中获取 mscorlib.dll 并将其放在项目目录的 DLLs 文件夹中，并在您的 PCL 项目中添加对它的引用。您可以在此处找到 dll：/Library/Frameworks/Mono.framework/Versions/3.0.10/lib/mono/4.0

一旦你完成了所有这些，你应该可以很好地让你的 PCL 工作。我发现这值得额外的工作，因为我现在可以在 XS 中创建一个单元测试项目，将其链接到 PCL 并从 IDE 中运行测试。此外，我可以使用像 Moq 这样的库来模拟我的视图并进行集成测试。

Xamarin 承诺将“很快”提供完整的 PCL 支持，我们不必为这些黑客行为而烦恼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T10:49:11.147

到目前为止，Xamarin 可以帮助您共享业务逻辑。即数据库、Web 服务或任何此类代码，它们不依赖于您正在使用的平台。你用 c# 编码。因此，您可以访问基本的 c# 功能，或者准确地说，是您可以使用的单声道特定功能。

作为结论，我可以总结的是：您可以为工作的后端创建一个单独的项目，并为 UI 及其背后的代码创建一个单独的项目。（显然两者都在同一个工作空间中）。然后，您可以在 IOS 应用程序、android 应用程序以及默认情况下在 WP8 应用程序（甚至是 Mac 和 Windows 应用程序）中使用这种中央核心类型的后端项目。因此，除了核心之外，您需要在所有平台上分别针对 UI、其处理程序和代码背后进行一些额外的编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-14T16:47:27.980

我知道这是一篇旧文章，但现在任何想要这样做的人都应该看看今年早些时候推出的 Xamarin.Forms，它是一组真正的跨平台控件，因此您只需创建一个 UI

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T17:20:07.933

查看 Xamarin 团队的本指南以开始使用： http: [//docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications](http://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications)

这是在 C 部分解决您的问题的第四部分。 [http://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications/part_4_-_platform_divergence_abstraction_divergent_implementation](http://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications/part_4_-_platform_divergence_abstraction_divergent_implementation)

此外，右侧的 Xamarin Studio 仪表板/主屏幕 (?) 有 2 个应用程序可供您下载，这些应用程序可以完全工作并面向 2-3 个平台，因此您可以在项目之间共享代码时查看它们如何构建应用程序。

他们的网站上有更多的指南和教程，不需要太多时间来阅读和练习。

# c# - AjaxFileUpload : 获取 RadioButtonList 的选定值

> ID：15618366
> 
> 赞同：0
> 
> 时间：2013-03-25T15:14:24.800
> 
> 标签：c#, asp.net, file-upload, asp.net-ajax, ajaxcontroltoolkit

**使用 autoPostBack = true 创建的**两个单选按钮列表（semesterList 和 sem1course） 。 ![在此处输入图像描述](../Images/2e4ad8ccfccdb0c12cc4cccca26f3f05.png)

当我单击一个学期列表项目时，相应的 sem1course 项目变为可见。

现在

```
 protected void UploadComplete(Object sender,   AjaxControlToolkit.AjaxFileUploadEventArgs      e)
   {

   string sem = semesterList.SelectedValue;
   string course = sem1course.SelectedValue;
   string path = Server.MapPath("~/MCA/" + sem+ "/" +course +"/")+e.FileName;
   AjaxFileUpload1.SaveAs(path);
   } 
```

字符串 sem 和 course 没有获得选定的值，这就是为什么所有文件都上传到 ~/MCA/ 文件夹而不是进入相应的文件夹..

上传的文件应该去**“ MCA\Sem1\MCA101\ ”** [我已经设计了目录结构但文件上传到了MCA文件夹]..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:51:00.893

问题是`Request.Form["__VIEWSTATE"] = null`何时调用 AjaxFileUpload OnUploadComplete 事件。

**修复此问题**（C# 代码）：

在页面加载时在会话中设置 RadioButtonList 选定值。

```
protected void Page_Load(object sender, EventArgs e)
{
 if (Request.Form["__VIEWSTATE"] != null)
    Session["Path"] = "//" + semesterList.SelectedValue + "//" + sem1course.SelectedValue + "//";
} 
```

使用会话值创建文件路径：

```
protected void upload(Object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
        string path = string.Empty;
        if (Session["Path"] != null)
            path = Server.MapPath("~//MCA" + (string)Session["Path"]) + e.FileName;
} 
```

# java - Web 浏览器中的图像与 Java 中的图像之间的区别

> ID：15618368
> 
> 赞同：4
> 
> 时间：2013-03-25T15:14:27.013
> 
> 标签：java, spring, spring-mvc, browser

我有一个来自 URL（我公司内部）的 PNG 图像。当我在网络浏览器中导航到该 URL 时，我正确地看到了图像（透明）。我可以从 Chrome 的网络工具中看到，它按预期以图像/png mime 类型返回。我可以将浏览器中的图像保存到本地硬盘驱动器，最终大小约为 32kb。

我编写了一个简单的 Java 程序来拉下图像并以编程方式保存它。保存图片的代码很简单，如下图：

```
 public static void saveImage(String imageUrl, String destinationFile) throws IOException {
        URL url = new URL(imageUrl);
        InputStream is = url.openStream();
        OutputStream os = new FileOutputStream(destinationFile);

        byte[] b = new byte[2048];
        int length;

        while ((length = is.read(b)) != -1) {
            os.write(b, 0, length);
        }

        is.close();
        os.close();
    } 
```

但是，每当我运行此程序时，保存的图像都会失真。除了失去透明度之外，它最终看起来大致相同。它的大小只有大约 4kb。除此之外，只看字节我可以看到前 3 个字节是“GIF”。

任何人都可以帮助我了解导致差异的原因吗？

（注意：我在这两种情况下使用的图像 URL 实际上都指向一个 Java Web 应用程序，该应用程序使用 ImageIO.read 从真实图像 URL 返回一个 BufferedImage。

```
@RequestMapping(value="/{id}", method={RequestMethod.GET,RequestMethod.POST})
public @ResponseBody BufferedImage getImage(@PathVariable String id) {
    try {
        //Modified slightly to protect the innocent
        return ImageIO.read((new URL(IMAGE_URL + id)).openStream());
    } catch (IOException io) {
        return defaultImage();
    }
} 
```

在我的春季上下文文件中，我有：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="order" value="1" />
    <property name="messageConverters">
        <list>
            <!-- Converter for images -->
            <bean class="org.springframework.http.converter.BufferedImageHttpMessageConverter">
                <property name="defaultContentType" value="image/png"/>
            </bean>
            <!-- This must come after our image converter -->
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
        </list>
    </property>
</bean> 
```

不确定这个额外的层是否会有所作为，但我认为最好提一下。）

任何想法/建议将不胜感激。

谢谢， BJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:32:36.967

当你使用 ImageIO.read 时，你会得到一个 BufferedImage 对象，它是 Java 的内部格式，而不是 PNG 格式。如果你把它写到一个文件中，你就是在写那个内部表示。我有点惊讶它的可读性。

# c# - Tcp客户端在WIN8下无法断开连接，但在WIN7下完美断开连接

> ID：15618370
> 
> 赞同：0
> 
> 时间：2013-03-25T15:14:28.237
> 
> 标签：c#, tcplistener

我使用此代码与 tcp 客户端进行通信。在 WIN7 上一切正常，但在 WIN8 上，tcp 客户端无法与服务器断开连接。我使用 Hercules 软件来测试功能。所有 tcp 客户端在线断开与服务器的连接

```
DisconnectDevice(idx, devType, ip, port); 
```

但是在WIN8上，软件就不属于这一行了。等待你的想法！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Net;
using System.Net.NetworkInformation;
using System.Net.Sockets;
using System.Threading;
using Microsoft.Win32;

namespace OperationService.Comm
{
public sealed class Communication
{
    #region variables

    private static readonly Communication _instance = new Communication();

    #region low level communication

    private class _message
    {
        public const byte PACKET_START_CHAR = 0x23;
        public const int DATA_LENGTH_BYTE_NUM = 2;
        public const int EPOCH_BYTE_NUM = 4;
        public const byte PACKET_END_CHAR = 0x24;

        public enum State : int
        {
            Start,
            DataLength,
            Epoch,
            CmdType,
            Data,
            ChkSum,
            End
        }

        public byte Start { get; set; }
        public UInt16 DataLength { get; set; }
        public UInt32 Epoch { get; set; }
        public byte CmdType { get; set; }
        public byte[] Data { get; set; }
        public byte ChkSum { get; set; }
        public byte End { get; set; }

        public int DataLenCtr { get; set; }
        public int EpochCtr { get; set; }
        public int DataCtr { get; set; }
        public int CurrentChkSum { get; set; }

        public State MsgState { get; set; }

        public _message()
        {
            this.MsgState = State.Start;
            this.DataLenCtr = 0;
            this.EpochCtr = 0;
            this.DataCtr = 0;
            this.CurrentChkSum = 0;
        }
    }

    #endregion

    #region threading

    private const int MAX_TCP_BUFFER_LENGTH = 8192;
    private const int CLIENT_COMM_TASK_SLEEP_VALUE = 1000;
    private static bool _threadStartFlag;
    private static Thread _pmcListeningThread;
    private static Thread _pmdListeningThread;
    private static Thread _guiListeningThread;
    private static Thread _mobileListeningThread;
    private const int PMC_LISTENING_PORT = 1234;
    private const int PMD_LISTENING_PORT = 1233;
    private const int GUI_LISTENING_PORT = 1232;
    private const int MOBILE_LISTENING_PORT = 1231;
    private static string _localIp;
    private static string _mobileEntryIp;

    #endregion

    #endregion

    #region ctor

    private Communication()
    {
        _threadStartFlag = false;
        _localIp = Program.GetLocalIp();
        _mobileEntryIp = _localIp;
    }

    #endregion

    #region methods

    public static bool Initialize()
    {
        bool RetSt = false;

        try
        {
            if (!RunTasks())
                return false;

            RetSt = true;
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
        }

        return RetSt;
    }

    public static bool Send(TcpClient tcpClient, List<byte> data)
    {
        Program.DebugWrite(tcpClient.ToString());
        for (int i = 0; i < data.Count; i++)
            Program.DebugWrite(data[i].ToString());
        return true;
    }

    private static bool RunTasks()
    {
        bool RetSt = false;

        try
        {
            if (!_threadStartFlag)
            {
                _pmcListeningThread = new Thread(() => ListeningTask(PMC_LISTENING_PORT));
                _pmcListeningThread.IsBackground = true;
                _pmcListeningThread.Start();

                _pmdListeningThread = new Thread(() => ListeningTask(PMD_LISTENING_PORT));
                _pmdListeningThread.IsBackground = true;
                _pmdListeningThread.Start();

                _guiListeningThread = new Thread(() => ListeningTask(GUI_LISTENING_PORT));
                _guiListeningThread.IsBackground = true;
                _guiListeningThread.Start();

                _mobileListeningThread = new Thread(() => ListeningTask(MOBILE_LISTENING_PORT));
                _mobileListeningThread.IsBackground = true;
                _mobileListeningThread.Start();

                _threadStartFlag = true;
            }

            RetSt = true;
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
        }

        return RetSt;
    }

    private static void ListeningTask(int ListeningPort)
    {
        TcpListener tcpListener;

        try
        {
            tcpListener = new TcpListener(IPAddress.Any, ListeningPort);
            tcpListener.Start();
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
            return;
        }

        Program.DebugWrite(string.Format("Tcp listener is active on Port:{0}.", ListeningPort));

        while (true)
        {
            try
            {
                TcpClient newTcpClient = tcpListener.AcceptTcpClient();
                string ip = ((IPEndPoint)newTcpClient.Client.RemoteEndPoint).Address.ToString();
                string port = ((IPEndPoint)newTcpClient.Client.RemoteEndPoint).Port.ToString();

                int idx = -1;
                DeviceType devType;
                bool isOnline = false;
                bool isAllowed = false;

                if (ListeningPort == PMC_LISTENING_PORT)
                {
                    devType = DeviceType.Controller;

                    idx = Program.Topology.Controllers.FindIndex(c => c.Ip == ip);
                    if (idx >= 0)
                    {
                        if (!object.ReferenceEquals(Program.Topology.Controllers[idx], null))
                        {
                            isAllowed = true;
                            if (Program.Topology.Controllers[idx].Runtime.IsOnline)
                                isOnline = true;
                        }
                    }
                }
                else if (ListeningPort == PMD_LISTENING_PORT)
                {
                    devType = DeviceType.Display;

                    idx = Program.Topology.Displays.FindIndex(d => d.Ip == ip);
                    if (idx >= 0)
                    {
                        if (!object.ReferenceEquals(Program.Topology.Displays[idx], null))
                        {
                            isAllowed = true;
                            if (Program.Topology.Displays[idx].Runtime.IsOnline)
                                isOnline = true;
                        }
                    }
                }
                else if (ListeningPort == GUI_LISTENING_PORT)
                {
                    devType = DeviceType.Gui;

                    if (ip == _localIp)
                    {
                        isAllowed = true;
                        if (Program.Topology.Gui.IsOnline)
                            isOnline = true;
                    }

                }
                else if (ListeningPort == MOBILE_LISTENING_PORT)
                {
                    devType = DeviceType.Mobile;

                    if (ip == _mobileEntryIp)
                    {
                        isAllowed = true;
                        isOnline = false;
                    }
                }
                else
                    return;

                if (isAllowed)
                {
                    if (!isOnline)
                    {
                        CreateTcpClient(idx, devType, newTcpClient);
                        ConnectDevice(idx, devType, ip, port);

                        Thread ClientCommThread = new Thread(() => ClientCommTask(idx, devType, newTcpClient, ip, port));
                        ClientCommThread.IsBackground = true;
                        ClientCommThread.Start();
                    }
                    else
                    {
                        Program.WriteEventLog(string.Format("Tcp client from IP:{0} and Port:{1} is already online.", ip, port), EventLogEntryType.Warning);
                        newTcpClient.Close();
                    }
                }
                else
                {
                    Program.WriteEventLog(string.Format("Unauthorized connection attempt from IP:{0} and Port:{1}.", ip, port), EventLogEntryType.Warning);
                    newTcpClient.Close();
                }
            }
            catch (SocketException ex)
            {
                Program.WriteEventLog(ex, EventLogEntryType.Error);
            }
            catch (Exception ex)
            {
                Program.WriteEventLog(ex, EventLogEntryType.Error);
            }
        }
    }

    private static void ClientCommTask(int idx, DeviceType devType, TcpClient tcpClient, string ip, string port)
    {
        NetworkStream ClientDataStream = tcpClient.GetStream();
        _message msg = new _message();

        byte[] Data = new byte[MAX_TCP_BUFFER_LENGTH];
        int DataLen;

        while (true)
        {
            try
            {
                try
                {
                    DataLen = ClientDataStream.Read(Data, 0, Data.Length);
                }
                catch
                {
                    // network stream data is not avaliable in urgent case use
                    DataLen = 0;
                }

                if (DataLen == 0)
                {
                    // the client has disconnected from the server
                    DisconnectDevice(idx, devType, ip, port);
                    break;
                }
                else
                {

                }

                Thread.Sleep(CLIENT_COMM_TASK_SLEEP_VALUE);
            }
            catch (Exception ex)
            {
                Program.WriteEventLog(ex, EventLogEntryType.Error);
            }
        }

        DisposeTcpClient(idx, devType, tcpClient);
    }

    private static void ParseMsg(_message msg)
    {
        try
        {
            switch (msg.CmdType)
            { 
                case 0x00:
                    if (Program.Topology.Gui.IsOnline)
                        Console.WriteLine("gui on");
                    else
                        Console.WriteLine("gui off");
                    break;
            }
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
        }
    }

    private static void ConnectDevice(int idx, DeviceType devType, string ip, string port)
    {
        try
        {
            if (devType == DeviceType.Controller)
            {
                Program.WriteEventLog(string.Format("Controller device from IP:{0} and Port:{1} connected.", ip, port), EventLogEntryType.Information);
                Program.Topology.Controllers[idx].Runtime.IsOnline = true;
                Program.Topology.Controllers[idx].Runtime.Port = int.Parse(port);
                Program.Topology.Controllers[idx].Runtime.Ip = ip;
            }
            else if (devType == DeviceType.Display)
            {
                Program.WriteEventLog(string.Format("Display device from IP:{0} and Port:{1} connected.", ip, port), EventLogEntryType.Information);
                Program.Topology.Displays[idx].Runtime.IsOnline = true;
                Program.Topology.Displays[idx].Runtime.Port = int.Parse(port);
                Program.Topology.Displays[idx].Runtime.Ip = ip;
            }
            else if (devType == DeviceType.Gui)
            {
                Program.WriteEventLog(string.Format("Gui device from IP:{0} and Port:{1} connected.", ip, port), EventLogEntryType.Information);
                Program.Topology.Gui.IsOnline = true;
                Program.Topology.Gui.Port = int.Parse(port);
                Program.Topology.Gui.Ip = ip;
            }
            else if (devType == DeviceType.Mobile)
            {
                Program.WriteEventLog(string.Format("Mobile device from IP:{0} and Port:{1} connected.", ip, port), EventLogEntryType.Information);
            }
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
        }
    }

    private static void DisconnectDevice(int idx, DeviceType devType, string ip, string port)
    { 
        try
        {
            if (devType == DeviceType.Controller)
            {
                Program.WriteEventLog(string.Format("Controller device from IP:{0} and Port:{1} disconnected.", ip, port), EventLogEntryType.Warning);
                Program.Topology.Controllers[idx].Runtime.IsOnline = false;
                Program.Topology.Controllers[idx].Runtime.Port = -1;
                Program.Topology.Controllers[idx].Runtime.Ip = string.Empty;
            }
            else if (devType == DeviceType.Display)
            {
                Program.WriteEventLog(string.Format("Display device from IP:{0} and Port:{1} disconnected.", ip, port), EventLogEntryType.Warning);
                Program.Topology.Displays[idx].Runtime.IsOnline = false;
                Program.Topology.Displays[idx].Runtime.Port = -1;
                Program.Topology.Displays[idx].Runtime.Ip = string.Empty;
            }
            else if (devType == DeviceType.Gui)
            {
                Program.WriteEventLog(string.Format("Gui device from IP:{0} and Port:{1} disconnected.", ip, port), EventLogEntryType.Warning);
                Program.Topology.Gui.IsOnline = false;
                Program.Topology.Gui.Port = -1;
                Program.Topology.Gui.Ip = string.Empty;
            }
            else if (devType == DeviceType.Mobile)
            {
                Program.WriteEventLog(string.Format("Mobile device from IP:{0} and Port:{1} disconnected.", ip, port), EventLogEntryType.Warning);
            }
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
        }
    }

    private static void CreateTcpClient(int idx, DeviceType devType, TcpClient client)
    {
        try
        {
            if (devType == DeviceType.Controller)
            {
                Program.Topology.Controllers[idx].Runtime.TcpClient = client;
            }
            else if (devType == DeviceType.Display)
            {
                Program.Topology.Displays[idx].Runtime.TcpClient = client;
            }
            else if (devType == DeviceType.Gui)
            {
                Program.Topology.Gui.TcpClient = client;
            }
            else if (devType == DeviceType.Mobile)
            {
            }
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
        }
    }

    private static void DisposeTcpClient(int idx, DeviceType devType, TcpClient client)
    {
        try
        {
            if (devType == DeviceType.Controller)
            {
                Program.Topology.Controllers[idx].Runtime.TcpClient.Client.Close();
                Program.Topology.Controllers[idx].Runtime.TcpClient = null;
            }
            else if (devType == DeviceType.Display)
            {
                Program.Topology.Displays[idx].Runtime.TcpClient.Client.Close();
                Program.Topology.Displays[idx].Runtime.TcpClient = null;
            }
            else if (devType == DeviceType.Gui)
            {
                Program.Topology.Gui.TcpClient.Client.Close();
                Program.Topology.Gui.TcpClient = null;
            }
            else if (devType == DeviceType.Mobile)
            {
                client.Client.Close();
                client = null;
            }
        }
        catch (Exception ex)
        {
            Program.WriteEventLog(ex, EventLogEntryType.Error);
        }
    }

    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:29:26.170

我在下面找到了链接。当我从另一台不是本地主机的计算机上尝试时，它起作用了！

[Windows 8 中的 TCP 连接问题](https://stackoverflow.com/questions/14237913/tcp-connection-problems-in-windows-8)

[无法使用 StreamSocket 连接到 TcpListener](https://stackoverflow.com/questions/13410186/cant-use-streamsocket-to-connect-to-a-tcplistener/13410326#13410326)

[http://msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx)

# algorithm - 存储错误 - 第一深度搜索算法

> ID：15618373
> 
> 赞同：0
> 
> 时间：2013-03-25T15:14:31.760
> 
> 标签：algorithm, storage, ada

我目前正在研究一种应该解决 3D 难题的算法。但是我遇到了一个问题，我使用的算法是第一搜索深度，它似乎运行良好，直到我得到“引发 STORAGE_ERROR：EXCEPTION_STACK_OVERFLOW”。我不太确定为什么它不起作用。任何猜测为什么这不起作用？

我希望这个算法做什么：它需要一个列表、一个数字和一个目标。对于此示例，列表长 7 个部分。它试图进入第一个坐标中的部分。如果它不适合，它会旋转直到它适合，然后它会自己调用其余部分（6 个部分）。如果零件旋转了所有 24 种方式（旋转 3D 零件的所有可能方式），那么它会移动到另一个坐标并重新开始尝试拟合。当所有部件都消失或没有任何工作时，它应该退出，我有另一个算法在同一个列表中发送另一个顺序到这个算法。

我还希望算法查看最后一个坐标是否与目标不匹配，那么它应该只是回溯并尝试找到另一个解决方案。

这是一些代码：

```
procedure Pseudo(Parts : in out List_Type; Figure : in out Figure_Type; Goal : in out Figure_Type; LastCoord : in out Integer) is
        Unchanged : Part_Type := Parts.Data;
        Next : boolean := False;
        UnchangedFigure : Figure_Type;
    begin
    UnchangedFigure := Figure;
        if Empty(Parts) then
            raise Finished;
        else
            for I in 1..24 loop 
                RotNumber(Parts.Data,I); -- rotera
                if Check(Parts.Data,Figure) then -- test om den platsar
                    Maincheck(Parts.Data,Figure,Goal,Next);
                    if Next then
                        Unchanged := Parts.Data;
                        Append_Part(Parts.Data,Figure);
                        Remove_First(Parts);
                        Next := False;
                        Pseudo(Parts,Figure,Goal,LastCoord);
                        Next := False;
                        Figure := UnchangedFigure;
                        Insert_First(Unchanged,Parts);
                        Figure.CoordX := 0;
                        Figure.CoordY := 0;
                        Figure.CoordZ := 0;
                    end if;
                end if;
                Parts.Data := Unchanged;
            end loop;
        end if;
        -- if LastCoord /= 7 then --(Original 
            -- if To_String(Figure.Data)(LastCoord) /= To_String(Goal.Data)(LastCoord) then
                -- Put("over");
                -- return;
            -- end if;
        -- end if;
        LastCoord := Figure.CoordZ*Figure.X*Figure.Y + (Figure.Y-Figure.CoordY-1)*(Figure.X) + Figure.CoordX +1;
        if Figure.CoordY < Figure.Y-1 then
            Figure.CoordY := Figure.CoordY +1;
            Pseudo(Parts,Figure,Goal,LastCoord);
        elsif Figure.CoordY = Figure.Y-1 then
            if Figure.CoordX < Figure.X-1 then
                Figure.CoordX := Figure.CoordX +1;
                Figure.CoordY := 0;
                Pseudo(Parts,Figure,Goal,LastCoord);
            elsif Figure.CoordX = Figure.X-1 then
                if Figure.CoordZ < Figure.Z-1 then
                    Figure.CoordZ := Figure.CoordZ +1;
                    Figure.CoordX := 0;
                    Figure.CoordY := 0;
                    Pseudo(Parts,Figure,Goal,LastCoord);
                elsif Figure.CoordZ = Figure.Z-1 then
                    return;
                end if;
            end if;
        end if;
    end Pseudo; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:32:55.760

首先，不要使用异常来控制程序流程，这是不好的做法。考虑使用附加`out`参数而不是`raise Finished`.

我认为将所有参数声明为`in out`. 查看`Parts`：在您的循环中，将图形附加到其`Data`成员，然后删除列表的第一个元素。之后，您调用`Pseudo`which 将再次与列表混淆，如果它不成功，`Parts`则可能具有与调用之前完全不同的内容。在那之后你恢复了第一个元素，但无论`Append_Part`做什么都是永久的。我无法确定这是否真的是一个问题。调用后恢复列表和图形的努力`Pseudo`也是一个明显的迹象，表明您不希望这些参数成为`in out`.

另一件看起来很可疑的事情是，在循环之后，您更改了图形的坐标，然后`Pseudo`再次调用 - 这将在第一次迭代结束时将坐标重置为 0（如果条件匹配）。一个可能的控制流程是：

*   `Pseudo`开始，`Parts`不为空。循环开始。假设该图形的`Coord`值最初为 0。
*   没有循环迭代导致`Finished`. 循环结束。
*   该算法改变了一些坐标并调用`Pseudo`。现在让我们假设它仍然具有与第一次调用`Parts`时相同的值。`Pseudo`正如我所写，情况似乎并非如此，但如果我正确理解您的描述，应该是这样。
*   第二次调用`Pseudo`它与第一次调用相同，只是图形的某些坐标不同（并且可能`Last_Coord`，这似乎无关紧要）。
*   `Parts`不能为空，循环开始。
*   现在让我们假设在循环中的某个时刻，条件匹配，但调用`Pseudo`失败（如“不引发 Finished”）。坐标将重置为 0。
*   从那里开始，执行与第一次`Pseudo`调用的执行相同，因为它操作的数据现在是相同的。所以 no`Finished`将在循环中引发，之后`Pseudo`将使用与之前完全相同的参数第三次调用。

如您所见，这将导致无限递归。我无法确定这是否会发生，因为我对您的类型或您调用的子程序一无所知。

在当前情况下，您的代码很难理解，因为它具有非常复杂的控制流。如果您消除了代码的一些复杂性，则更容易追踪错误。我建议使用循环来迭代坐标而不是递归。这可能会解决您的问题。

# macos - 为什么我的 /var 目录在运行 mv var var 后消失了？

> ID：15618378
> 
> 赞同：2
> 
> 时间：2013-03-25T15:14:46.973
> 
> 标签：macos, bash, mv

我不小心运行了命令“mv var var”（而不是“mv var var.bak”）。现在我的 var 目录已经消失了。它不再在“/”中。有谁知道输入此命令时会发生什么。我的 var 目录在哪里？

我会说它会将 var 重命名为 var，但事实并非如此。也许它试图将 var 移入自身或其他什么？

**问题已解决**：“mv var var”是我运行的。OSX 通常有一个指向 /private/var 的符号链接。不知何故，该命令删除了到 /private/var 的符号链接，所以我以单用户模式重新启动（因为我不能再使用 sudo），并使用 ln -s /private/var /var 恢复了符号链接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:42:27.170

在 Darwin Mac OS X 上，/var 实际上是 /private/var 的符号链接，所以只需`ln -s /private/var /var`

附加说明：您实际上将符号链接 mv 到 /private/var 中，所以如果您`ls /private/var`会在里面看到`var -> private/var`符号链接。

# mobile - 移动应用程序可扩展后端

> ID：15618379
> 
> 赞同：1
> 
> 时间：2013-03-25T15:14:46.990
> 
> 标签：mobile, cloud, backend, scalable

TL;DR：您将如何为没有云的移动应用程序托管可扩展的后端（如果可能，除非它是迄今为止最好的方式），并保持其最便宜的方式。

我即将完成一个移动应用程序（首先是 Android，后来是 Iphone/Windows），它与 RESTFull Node.JS 后端交互，后面有 PostgreSQL。我目前正在使用 VPS 进行开发，但随后，我开始考虑生产。我显然不知道我的应用程序是否只会被 10 个朋友或数百万人使用（至少，这是秘密目标）。几点：

*   我不富有，有工作和家庭可以照顾，我显然不想在托管上花很多钱。最高 300 美元/月（至少在开始时）（如果申请是一场灾难，这是我能承受的损失）
*   我的应用通过网络传输内容（mp3、图片、视频）。他们中的大多数将是自托管的。这个内容应该是“可流式的”，我的意思是，我可以等待 2 秒到 5 秒让声音开始播放，但它应该在没有“跳跃”的情况下播放。
*   我显然害怕亚马逊云，因为我不知道我会从应用程序中赚到多少，而且如果我一无所获，我不想拥有 10K 美元的账单。
*   我知道如何拥有多个负载平衡的数据库和 Node.JS 服务器，我从未做过的是将一个集群复制到世界上的另一个集群以提高时间访问。

问题是：您将如何扩展这样的应用程序？只做一个集群并添加与负载进度匹配的数据库/NAS和前端服务器（我即将做的解决方案，因为它是我所知道的唯一一个（亚马逊AWS appart），但我害怕在外国大陆延迟或者你会去有多个位置集群,如果是,你会怎么做.我的意思是,我看不到,例如,你怎么能有一个 URL (例如: myapplication.com/api/mymethod) 知道如何去最近的簇。

我不想要的： - 如果有嗡嗡声并且服务器无法处理负载，则应用程序损坏。如果发生这种情况，用户将不会使用应用程序，因为它已损坏并且嗡嗡声会很快消失。- 意想不到的巨额账单。- 云这是此类应用程序的最佳方式。但实际上，它对我来说似乎是一个黑匣子，一旦获得流量就非常昂贵。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T01:20:26.777

您可以通过迁移到精确解决您描述的所有问题的 MBaaS 来使其扩展（可扩展性压力测试是 MBaaS 的关键）。此外，大多数 MBaaS 提供商提供的免费套餐非常慷慨，因此当您的应用程序不是很受欢迎时，您不会花一分钱。

免责声明：我为[Kii Cloud](http://www.kii.com) MBaaS 工作，并会推荐它的运营商级可扩展性，但我的评论一般适用于主要的 MBaaS 提供商

# c# - 实体框架上的强制条款 Where

> ID：15618380
> 
> 赞同：1
> 
> 时间：2013-03-25T15:14:47.127
> 
> 标签：c#, entity-framework, timestamp

我必须让我的应用程序[无能为力](http://en.wikipedia.org/wiki/Idempotence)。为了使我的更新如此，我在我的实体中实现了一个时间戳字段，因为如果给定的操作恰好被执行两次，“其中 id=10 和时间戳=0x008787”将匹配零结果，并且不会在数据库中更新任何内容.

问题是：我怎样才能让 EF 包含“附加条款”？因为到目前为止，基础查询始终是“其中 id=10”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:28:34.600

在代码优先中，您可以在`[ConcurrencyCheck]`属性上放置一个属性以将其包含在 WHERE 子句中。

对于键，这是隐含的，对于特殊的 TimeStamp 属性也是如此。不清楚你的财产适合在哪里。

# visual-studio-2010 - 在 ReSharper for Visual Studio 中完全禁用格式化和完成

> ID：15618381
> 
> 赞同：48
> 
> 时间：2013-03-25T15:14:47.513
> 
> 标签：visual-studio-2010, formatting, resharper, intellisense, resharper-6.0

我喜欢 ReSharper 提供的许多功能，但我绝对无法忍受它所做的格式化和代码完成。每一步都让我绊倒。在 javascript 中，它不断窃取大括号，试图重新格式化我的代码，使其无法正常工作，并且很难找到丢失的部分。

我想禁用与 ReSharper 的格式化和代码完成有关的所有内容，同时仍能从它所拥有的酷炫导航功能中受益。

反正有选择性安装 ReSharper 吗？我试过在选项中禁用这些东西，但它似乎没有任何好处。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-25T23:04:17.817

转到 ReSharper | 选项。更改以下选项：

在页面环境 | 编辑器：关闭从“自动格式化”或“自动插入”开始的选项。这不会完全禁用 ReSharper 格式化功能，但至少在键入时不会自动调用它们。

在页面 Intellisense | 常规：更改为“Visual Studio”。或者，如果您只不喜欢 JavaScript 中的代码完成，请更改为“Limited ReSharper Intellisense”并关闭 JavaScript。

PS你能否用例子描述一下，当ReSharper“偷大括号”时你会输入什么。谢谢！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-25T14:05:49.707

这对某些人来说是异端，但我不喜欢 Resharper 的自动完成功能和其他智能感知项目。我关闭了它们，但这样做使我的正常 VisualStudio Intellisense 和 ParameterInfo 完全不活动。我认为这会导致人们回到 Resharper，因为比坏更糟糕的是什么都不是。

如果您需要关闭 Resharper 部分，它非常简单：

Resharper > 选项 > IntelliSense >**选择 V​​isual Studio 单选按钮**

由于我不喜欢这种（可能是无意的）强制，我决定在这里回答如何重新激活正常的 Visual Studio 智能感知和参数信息，这是如何取回它的方法。

工具 > 选项... > 文本编辑器 > C#（例如）> 常规 >**自动列表成员**

工具 > 选项... > 文本编辑器 > C#（例如）> 常规 >**勾选参数信息**

工具 > 选项... > 文本编辑器 > C#（例如）> IntelliSense**勾选在输入字符后显示完成列表**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-22T17:42:47.170

在 ReSharper 的选项 (2018.1.3) 中找不到有问题的设置后，我在 Visual Studio 的 (2017) 选项中找到了它：

*   文本编辑器
    *   所有语言
        *   一般，自动支撑完成

# jquery - 更改谷歌地图信息框中单击按钮的状态

> ID：15618385
> 
> 赞同：0
> 
> 时间：2013-03-25T15:15:04.393
> 
> 标签：jquery, button, google-maps-api-3, onclick

单击时更改信息框按钮的状态时遇到问题。信息框菜单中的六个按钮中的每一个都具有三种状态：未单击、悬停和单击。按钮更改为单击状态，但由于某种原因，再次单击时它们不会变回来。因此，我将问题定位在每次单击时调用的 buttonState() 函数中的 if 语句。一旦我解决了这个问题，我将为每个按钮的 onClick 添加另一个函数，告诉信息框要显示哪条动态信息。我还必须弄清楚如何确保一次只有一个按钮处于“单击”状态。对此的任何帮助也会很棒。

如您所见，我是 jquery 和 javascript 的新手。任何帮助，将不胜感激。非常感谢。

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link href="styles.css" rel="stylesheet" type="text/css">
    <script type="text/javascript"src="https://maps.googleapis.com/maps/api/js?        key=MY_KEY&sensor=true"></script>
    <script type="text/javascript" src="jquery191.js"></script>
    <script type="text/javascript" src="infobox.js"></script>
    <script type="text/javascript">

var mapstyle = [styles removed for space]

var icon = 'mapicon.png';
var map = null;

//<![CDATA[

function mapload() {
    map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(40,-95),
    zoom: 4,
    minZoom: 4,
    disableDefaultUI: true,
    styles: mapstyle,
    mapTypeId: 'roadmap'
    });

downloadUrl("genxml.php", function(data) {
    var xml = data.responseXML;
    var places = xml.documentElement.getElementsByTagName("place");
        for (var x = 0; x < places.length; x++) {
        var name = places[x].getAttribute("name");
        var logopath = places[x].getAttribute("logopath");
        var number = places[x].getAttribute("number");
        var street = places[x].getAttribute("street");
        var city = places[x].getAttribute("city");
        var website = places[x].getAttribute("website");
        var phone = places[x].getAttribute("phone");
        var point = new google.maps.LatLng(
            parseFloat(places[x].getAttribute("lat")),
            parseFloat(places[x].getAttribute("lng")));
        createMarker(name, logopath, number, street, city, website, phone, point);
        }

});
}

function createMarker(name, logopath, number, street, city, website, phone, point) {
  var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon,
        title: name
  });

  var boxContent = "<div id=box><div id=leftside><img id=logo src=" + 
                    logopath + " /><h1>" + number + "<br />" + street + 
                    "<br />" + city + "</h1><h2>" + phone + 
                    "<br /><a target=_blank href=" + website + 
                    ">visit website</a></h2></div><div id=menu>" +
                    "<button id=photos onClick=buttonState(this.id)>" +
                    "</button><button id=comments onClick=buttonState(this.id)>" +
                    "</button><button id=games onClick=buttonState(this.id)></button>" +
                    "<button id=ed onClick=buttonState(this.id)></button>" +
                    "<button id=stay onClick=buttonState(this.id)></button>" +
                    "<button id=fly onClick=buttonState(this.id)></button>" +
                    "</div><div id=display><button id=next></button><button id=prev></button></div></div>";
  var myOptions = {
        content: boxContent,
        disableAutoPan: false,
        pixelOffset: new google.maps.Size(-400, -173),
        closeBoxMargin: "-12px -12px 0px 0px",
        closeBoxURL: "close.png",
        infoBoxClearance: new google.maps.Size(1, 1),
        pane: "floatPane",
        enableEventPropagation: false
   };

  var ib = new InfoBox(myOptions);

  google.maps.event.addListener(marker, 'click', function(e) {
        map.setZoom(13);
        map.setCenter(this.getPosition());                      
        ib.open(map, this);
  });

}

function buttonState(buttonid){

if ($('#' + buttonid).css('background-image') === 'url(infomenu/' + buttonid + '-click.png)') {
    $('#' + buttonid).css('background-image','url(infomenu/' + buttonid + '.png)')
 }   
 else {
    $('#' + buttonid).css('background-image','url(infomenu/' + buttonid + '-click.png)'); 
     }  
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
  new ActiveXObject('Microsoft.XMLHTTP') :
  new XMLHttpRequest;

  request.onreadystatechange = function() {
        if (request.readyState == 4) {
            request.onreadystatechange = doNothing;
            callback(request, request.status);
        }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script>

</head>
<body onload="mapload()">
   <div id="map" style="width:100%; height:100%"></div>
   <div id="logosearch"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:50:35.357

谢谢克里斯

```
function buttonState(buttonid){

    $('button').not(buttonid).removeClass('down');
    $('button#'+ buttonid).toggleClass('down'); 
```

# unix - 在文件 Unix 中全局查找 2 个字符串之间的文本

> ID：15618387
> 
> 赞同：0
> 
> 时间：2013-03-25T15:15:07.550
> 
> 标签：unix, design-patterns, sed, full-text-search

我有多个包含 DDL 和 DML 的 .sql 文件。

1）在一组文件中有一个 DDL（创建表 ...），然后是一个 DML（合并到 ....），然后是一个 DDL（删除表 ...），如下所示：

```
 CREATE TABLE T1 (col1 ...);
    Merge into T2 using T1.....;
    Drop table T1; 
```

2）在第二组中，上述模式有多个重复：

```
 CREATE TABLE T1 (col1 ...);
    Merge into T2 using T1.....;
    CREATE TABLE T3 (col1 ...);
    Merge into T4 using T1 and T3.....;
    Drop table T1;
    Drop table T3; 
```

我需要从每个源文件创建 2 个文件：一个包含所有 DDL，另一个包含所有 DML。我尝试过 sed 首先在 CREATE 和分号之间搜索并定向到 DDL 文件，然后在 Merge 和分号之间搜索并定向到 DML 文件，最后在 Drop 和分号之间搜索并附加到上面的 DDL 文件。

```
 sed -n '/CREATE/,/;/p' $SRCFILE > $TGTDDLFILE
    sed -n '/Merge/,/;/p' $SRCFILE > $TGTDMLFILE
    sed -n '/Drop/,/;/p' $SRCFILE >> $TGTDDLFILE 
```

它适用于第 1 组，但不适用于第 2 组。有没有一种方法可以缩放它以应用于每一次出现，以便它也涵盖第 2 组。如果没有，还有其他方法吗？

感谢你的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:23:44.790

你可以使用类似的东西

```
 sed -n '/CREATE/p' $SRCFILE > $TGTDDLFILE
    sed -n '/Merge/p' $SRCFILE > $TGTDMLFILE
    sed -n '/Drop/p' $SRCFILE >> $TGTDDLFILE 
```

如果您所引用的文件在一行上有一条 SQL 语句，这将满足您的需求。在一行中有多个 SQL 语句和在多行中有一个 SQL 语句的情况下，它将失败。

如果是这种情况，您也可以使用`grep`.

```
 cat $SRCFILE | grep 'CREATE' > $TGTDDLFILE
    cat $SRCFILE | grep 'Merge' > $TGTDMLFILE
    cat $SRCFILE | grep 'Drop' >> $TGTDDLFILE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:21:38.720

原始 sed 脚本中的一个问题是，您告诉 sed 查找以 CREATE 开头并以 ';' 结尾的一系列行。- 当您要求匹配时，sed 不会将单行视为范围，因此它看不到 ';' 当它与 CREATE 在同一行时。

试试这个版本，看看效果更好：

```
sed -ne 'H;/CREATE/h;/;/{s/.*//;x;/^CREATE/p;}' $SRCFILE > $TGTDDLFILE 
```

第一个命令 (H) 将当前行放入保存空间，无论我们是否需要它（它处理 CREATE 和 ';' 之间的行）。如果该行包含 CREATE，我们用它覆盖保存空间，因此那里的行以 CREATE 开头。现在如果该行包含';' 我们清除当前行并将其与保持空间交换。如果保留空间内容以 CREATE 开头，我们打印它。这里可以清理冗余，但代价是向脚本添加更多内容，所以我没有打扰。除非你有大文件，否则没关系。

# curl - wamp 中的 cURL - 415 AdWords 不受支持的媒体类型

> ID：15618392
> 
> 赞同：1
> 
> 时间：2013-03-25T15:15:17.433
> 
> 标签：curl, wamp, media, google-ads-api

我正在使用 201302 版的 Adwords API。我已经安装了 WAMP Server 2.2 版，并且由于 curl 无法正常工作，我还从[http://www.anindya.com/php-5-4-3-and-php-5-3-13安装了 curl -x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)。cURL 开始正常工作，但是每当我尝试从 Adwords API 库运行示例时，我都会收到 Unsupported Media Type 错误。我尝试运行的示例是库文件中的报告/GetCampaignStats.php 中的示例。我将相同的示例放在远程服务器中，它在那里运行完美，所以它必须在我的本地环境中，但我找不到它可能是什么。有没有人遇到过这个问题并且知道该怎么做才能解决它？

PHP版本：5.4.3

提前非常感谢！

# javascript - 一个浏览器窗口中的两个 Web 应用程序 - 一个不需要刷新，而第二个是

> ID：15618394
> 
> 赞同：0
> 
> 时间：2013-03-25T15:15:22.153
> 
> 标签：javascript, jquery, html, ajax, asp.net-mvc

我有一个网站，它是一个普通的网站，如 stackoverflow 等。现在，我需要为其添加一个底部条，其中将包含聊天等。我需要这个底部条根本不刷新！那么我该怎么做才能让这个底部条充当独立的 Web 应用程序（Web 应用程序内部的 Web 应用程序？）？我知道ajax请求，但是当我有这样的事情时：

```
<html>
 <head></head>
 <body>
    //somecode
    <div id="hereIsMyBottomStrip"></div>
 </body>
</html> 
```

我会调用 ajax 请求，然后无论如何它都会删除页面上的所有代码。如果我只调用 ajax 来更改`body`底部条上方的部分，那么它将在该部分粘贴整个新页面，并且不会编译。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:19:04.233

您的结构将需要一个额外的容器：

```
<html>
 <head></head>
 <body>
    <div id="theRestOfThePage">
      //somecode
    </div>
    <div id="hereIsMyBottomStrip"></div>
 </body>
</html> 
```

然后您获取您的内容并仅替换“theRestOfThePage”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:18:27.890

在您的 ajax 代码中，您将要更新页面另一部分的内容，而不是整个正文。这是一个可能的 html 结构的示例，您将在其中使用 ajax 来更新`stuffToUpdate`div：

```
<html>
 <head></head>
 <body>
    <div id="stuffToUpdate>
        //somecode
    </div>
    <div id="hereIsMyBottomStrip"></div>
 </body>
</html> 
```

# android - 如何清除“应用内计费服务”缓存

> ID：15618397
> 
> 赞同：17
> 
> 时间：2013-03-25T15:15:29.620
> 
> 标签：android, in-app-purchase

在应用内计费 (v3) 的文档中，它说：“成功购买后，用户的购买数据由 Google Play 的应用内计费服务在本地缓存。”

我现在想彻底测试我的应用程序的计费代码并希望清除该缓存。这很重要，因为如果没有数据在缓存中，收集数据可能需要更长的时间 - 或者根本无法访问。我想测试我的应用程序是否可以处理这些情况。

那么有没有办法清除该缓存？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-01-20T12:18:54.807

您可以使用 adb 执行此操作（也适用于非 root 用户）：

```
adb shell pm clear com.android.vending 
```

就这么简单！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-28T08:20:10.030

这应该可以工作，尽管您可能需要再次在 Play Store 上进行身份验证：

![在此处输入图像描述](../Images/d05f019a1fae91d0f43c4b23eca25070.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-03T07:20:48.117

重新启动您的设备。每次都对我有用！如果您在谷歌钱包中取消了订单，您还必须在那里等待它被取消。它应该说“取消：订单将不会被交付”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T23:36:54.510

> 那么有没有办法清除该缓存？

据我所知，没有。开发人员无法清除 Google Play 的 IAB 缓存。

您会发现这很有用：[Testing In-app Billing](http://developer.android.com/google/play/billing/billing_testing.html)，来自 Android 官方文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-14T13:49:00.110

如果 Par Nils 回答不起作用 - 尝试删除应用程序并执行

```
adb shell am clear-debug-app 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-03T18:28:07.777

难道你不能从android开发工具包创建一个新的模拟android安装......然后在你登录之前将其保存为“快照”并创建所有计费缓存？然后，您可以启动该 VM 的新实例并运行您的代码，而无需计费缓存。

编辑：如果你不能用模拟器这样做，我建议你有一部植根和 rom'ed 的手机。使用 Rom Manager (Nandroid Backup) 拍摄完整的系统快照，然后测试您的应用程序。当您希望重置时，通过 Rom Manager 恢复您的备份，您将回到登录市场之前（并激活计费缓存）。老实说，您的手机重新启动比实际恢复数据需要更长的时间......所以它非常快（我一直这样做，因为我是一个狂热的 root/rom-er。

# c# - 强制用户仅从自动完成文本框中的集合中选择结果

> ID：15618403
> 
> 赞同：0
> 
> 时间：2013-03-25T15:15:53.513
> 
> 标签：c#, autocomplete

在 C# WinForms 应用程序中，我有一个字符串集合，并且希望强制用户只能从我提供的选项中进行选择，因此他们实际上不能在我正在使用 SuggestAppend 的文本框控件中键入自由文本，但是当当前用户我需要限制结果的类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:18:10.413

我认为在这种情况下，ComboBox 会更好。在那里您可以设置项目，并且不允许用户输入任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:18:41.117

始终使用`ComboBox`

如果您不想让他们输入，则要将`DropDownStyle`属性设置为`DropDownList`

如果你想让他们输入你设置的`AutoCompleteMode`to`SuggestAppend`和`AutoCompleteSource`to的东西`ListItems`。

A`TextBox`具有相同的性质。因此，您可以设置`AutoCompleteMode`并`SuggestAppend`在您的代码中执行此操作，例如： `textBox1.AutoCompleteSource = yourStringArray;`

# c# - 无法从 Process.StandardOutput 读取

> ID：15618406
> 
> 赞同：0
> 
> 时间：2013-03-25T15:15:55.550
> 
> 标签：c#, process

我正在尝试使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)来检查使用“-version”命令行参数安装的 Java 版本。但是，当我尝试从 java 应用程序读取命令行输出时，我得到一个空值。

我的代码相当简单：

```
Process java = new Process();
java.StartInfo.RedirectStandardOutput = true;
java.StartInfo.CreateNoWindow = true;
java.StartInfo.UseShellExecute = false;
java.StartInfo.FileName = "java";
java.StartInfo.Arguments = "-version";
java.Start();

// version comes out null
string version = java.StandardOutput.ReadLine();

// There are probably better ways to extract this data but
// I want to get it working before I cross that bridge.
string versionNumber = version.Substring(16, 1);
hasJava = int.Parse(versionNumber) < 7;

java.Close(); 
```

这可能是一件小而容易的事情，但我看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:36:30.430

您也可以从注册表中读取当前安装的 Java 版本。以下文件包含方法`TryGetJavaHome`，它支持特定供应商/安装组合的 32 位和 64 位虚拟机。

```
bool TryGetJavaHome(
    RegistryView registryView,
    string vendor,
    string installation,
    out string javaHome) 
```

供应商：

*   “JavaSoft”（热点）
*   “JRockit”

安装：

*   “Java运行时环境”
*   “Java 开发工具包”

如果您查看该方法的代码，您会发现获取当前版本的以下行。

```
object currentVersion = javaKey.GetValue("CurrentVersion"); 
```

这将返回一个类似“1.7”或“1.6”的值。如果想要更完整的版本号，*一些*安装提供以下内容。

```
object familyVersion6 = javaKey.GetValue("Java6FamilyVersion");
object familyVersion7 = javaKey.GetValue("Java7FamilyVersion"); 
```

对于某些安装，家庭版本不存在，但对于标准运行时安装，我看到值“1.6.0_38”和“1.7.0_13”。

**参考：** [Antlr4ClassGenerationTaskInternal.cs](https://github.com/sharwell/antlr4cs/blob/master/runtime/CSharp/Antlr4BuildTasks/Antlr4ClassGenerationTaskInternal.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:40:21.027

经过一些测试，我发现您正在寻找的信息，出于某种原因，可以在`standardError`流中找到。

尝试以下。

```
Process java = new Process();
java.StartInfo.RedirectStandardError = true;
java.StartInfo.CreateNoWindow = true;
java.StartInfo.UseShellExecute = false;
java.StartInfo.FileName = "java";
java.StartInfo.Arguments = "-version";
java.Start();

// version comes out null
string version = java.StandardError.ReadLine();

// There are probably better ways to extract this data but
// I want to get it working before I cross that bridge.
string versionNumber = version.Substring(16, 1);

java.Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:25:11.293

如果你删除`java.CreateNoWindow = true;`，它的工作原理。

# scala - 对象定义中的私有[this]

> ID：15618412
> 
> 赞同：5
> 
> 时间：2013-03-25T15:16:14.523
> 
> 标签：scala

我想知道`private[this]`在对象定义中声明是什么意思？在类定义中对我来说是有意义的，但在对象中？

如：

```
object Test {
  private[this] val t: Int = 5
} 
```

与以下相比有什么区别：

```
object Test {
  private val t: Int = 5
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T15:20:20.950

当对象是类的伴生对象时，这一点很重要。在这种情况下，声明的成员`private[this]`可以被对象访问，但不能被相应类的实例访问。

# html - 如何在页面加载时自动滚动到 div？

> ID：15618413
> 
> 赞同：1
> 
> 时间：2013-03-25T15:16:14.827
> 
> 标签：html, internet-explorer, dom, vbscript, hta

我正在为在线应用程序编写基于 .hta vbscript 的安装程序。该应用程序需要安装最新的 JDK，我无法使用我的安装程序分发 .exe。

理想情况下，jdk的下载和安装应该是自动的，即

1 - 用户运行我的 .hta 安装程序 -> 点击**安装**

2 - 用户接受 Oracle 的条款并开始下载

**问题**

在下载页面[http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)在ID= **agreementdiv的****license div**中，用户需要点击 * *ACCEPT* * 才允许下载 jdk . 单击 Accept 后，您甚至可以将此热链接粘贴到 URL 窗口[http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-x64.exe](http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-x64.exe)中的 exe和下载

 ***我该如何解决这个问题？理想情况下，我想显示一个小的弹出窗口，该窗口导航到下载页面并**自动向下滚动**到**agreementdiv**，用户单击 Accept，jdk 的下载开始（使用热链接），然后页面自动关闭。

由于明显的法律原因，我不想（理想情况下）绕过接受许可证的要求。

这是我用来导航到 jdk 页面的代码的一部分

```
Set objWshShell = Wscript.CreateObject("Wscript.Shell")
Set IE = CreateObject("InternetExplorer.Application")

With IE
  .Visible = True
  .Navigate "http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html"

'Wait for Browser
  Do While .Busy
    WScript.Sleep 100
  Loop
  //somehow scroll to the agreementDiv in the line below
  //.Document.getElementById("agreementDiv")        

End With 
```

如果有更好的解决方案，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:43:48.967

```
document.location.hash = 'agreementDiv'; 
```***

# r - ifelse() 在 TRUE 测试中返回单个值而不是 arg 1

> ID：15618414
> 
> 赞同：0
> 
> 时间：2013-03-25T15:16:15.297
> 
> 标签：r

也许我误解了 ifelse 的工作方式......我有一些看起来像这样的表格（但更长）：

```
 Lean Turned Turn attempts
 [1,]   11      1             2
 [2,]   16      2             2
 [3,]   41      2             2
 [4,]   38      2             2
 [5,]   17      2             2
 [6,]   43      4             4 
```

一个称为 X，它是未排序的，一个称为 L1LLwhole，它等于 X，但按“精益”列排序

```
 L1LLwhole <-X[order(X[,1]),] 
```

现在我正在制作一个名为 goForL1 的列表，它是该列表的子集，其中转弯尝试为 2 或 4。我检查以确保至少有一个是 2 或 4，否则我们会收到错误。

```
 ifelse(any((X[order(X[,1]),3]==2) | (X[order(X[,1]),3]==4)),
         L1LLwhole[(X[order(X[,1]),3]==2) | 
         (X[order(X[,1]),3]==4),],0)->goForL1 
```

现在奇怪的是，即使测试评估为 TRUE，并且参数 1 评估为表格，整个语句的结果也只是“11”

ifelse 不应该按原样返回确切的参数吗？

# c++ - const XX 丢弃限定符 [- fpermissive]

> ID：15618415
> 
> 赞同：4
> 
> 时间：2013-03-25T15:16:17.823
> 
> 标签：c++, c++11

在下面的代码片段 1 中，mKnownSRList 定义如下：

```
std::vector<EndPointAddr*> mKnownSRList; 
```

我收到代码片段 2 中显示的编译错误。您能告诉我这段代码有什么问题吗？getTipcAddress() 和 compareTo 函数的内容如下面的代码片段 3 和 4 所示。

**CODE SNIPPET 1（标记编译错误）**

```
void 
ServiceRegistrarAPI::removeKnownSR(EndPointAddr & srEndPointAddr)
{
   auto last = 
   std::remove_if(mKnownSRList.begin(),
                  mKnownSRList.end(),
                 [srEndPointAddr]( EndPointAddr* o )
                 { 
                    //LINE 355 is the following
            EndPointTipcAddr myTipcAddress = srEndPointAddr.getTipcAddress();
                EndPointTipcAddr otherTipcAddress = o->getTipcAddress();

            return (myTipcAddress.compareTo(otherTipcAddress));
         });

    if(*last != nullptr)
    {
     delete *last;
    }

    mKnownSRList.erase(last, mKnownSRList.end());    
} 
```

**片段 2（编译错误）**

```
 ServiceRegistrarAPI.cpp:355:72: error: passing ‘const EndPointAddr’ as ‘this’   argument of ‘EndPointTipcAddr& EndPointAddr::getTipcAddress()’ discards qualifiers [-  fpermissive] 
```

**代码片段 3（getTipcAddress 函数）**

```
EndPointTipcAddr & getTipcAddress() { return mTipcAddress; } 
```

**CODE NIPPET 4（比较功能）**

```
 bool

  EndPointTipcAddr::compareTo(EndPointTipcAddr &rhs) 
  {     
      if( (mType == rhs.getType()) && (mInstanceNo == rhs.getInstanceNo()) )
      {
        return true;
      } 

      return false;
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T18:58:07.590

见 S5.1.2.5：

> lambda 表达式的闭包类型具有公共内联函数调用运算符 (13.5.4)，其参数和返回类型分别由 lambda 表达式的参数声明子句和尾随返回类型描述。当且仅当 lambda 表达式的 parameter-declaration-clause 后面没有 mutable 时，此函数调用运算符才被声明为 const (9.3.1)。它既不是虚拟的，也不是声明为 volatile 的。默认参数 (8.3.6) 不应在 lambda 声明符的参数声明子句中指定。在 lambda 表达式上指定的任何异常规范都适用于相应的函数调用运算符。lambda-declarator 中的属性说明符序列属于相应函数调用运算符的类型。[ 笔记：在 lambda-declarator 中引用的名称在 lambda-expression 出现的上下文中查找。——尾注]

基本上，这意味着默认情况下生成的函子的 operator() 是`const`按值捕获的，并且这个捕获的变量是生成的函子的成员。

所以，你有两个选择：

1.  通过引用而不是按值捕获。
2.  将您的 lambda 更改为以下内容（注意`mutable`以下参数声明子句）：

    `[srEndPointAddr](EndPointAddr* o) mutable { ... }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:27:37.763

谓词函数（的第三个参数`std::remove_if`）不允许修改对象。迭代器上调用的所有方法都必须是`const`. 请参阅[此文档](http://www.cplusplus.com/reference/algorithm/remove_if/)：

> 该函数不得修改其参数。

如果要返回值或指针的副本，则可以设置`getTipcAddress`为。`const``const`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:21:32.963

简而言之，您会收到此错误，因为在这种情况下您在 const 实例上调用了非常量方法：`srEndPointAddr`is const 但您`getTipcAddress`在其上调用了非常量方法。您的解决方案是声明此方法 const ，因为它似乎是一个简单的 getter 并且可能不会修改对象。

# oracle - Oracle 累积总和数据库性能与大量代码

> ID：15618416
> 
> 赞同：1
> 
> 时间：2013-03-25T15:16:19.820
> 
> 标签：oracle, cumulative-sum

我有 53 列和 100 万行左右的表 x。第一列是标识符，接下来的 52 列是从特定日期开始每周发生的货币交易。

例如。

```
id,w1,w2,w3,w4,w5..w52
a1,0,5,1,4,0..43
a2,7,0,6,9,4..27 
```

我需要每个 id 的所有这些周交易的累积总和。我发现的一种解决方案是使用 unpivot 获取每个 id 的 52 行，然后应用聚合总和。

```
sum(transaction) over (partition by id order by week asc) 
```

我的问题是我现在有一个包含 6000 万行的表，而 Oracle 通过获取总和进行排序的速度非常慢（令人望而却步）。

另一种选择是我将每一列手动添加在一起，如下所示。

```
select 
 id,
 w1,
 w1+w2,
 w1+w2+w3,
 w1+w2+w3+w4,
 w1+w2+w3+w4+w5,
 ..
 w1+w2+w3+w4+w5..w49+w50+w51+w52

from x 
```

这里的问题是要获得一个简单的公式需要大量的代码（写出来很痛苦！）。

无论如何我可以调整我的表（索引/分区）以加快这么多行的聚合总和，或者我可以与原始表一起使用的任何代码以最少的努力实现这些结果？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:30:47.430

创建一个视图来隐藏“大量代码”。例如：

```
SQL> desc tester;
 Name                                      Null?    Type
 ----------------------------------------- -------- ---------------
 ID                                                 NUMBER
 W1                                                 NUMBER
 W2                                                 NUMBER
...
 W49                                                NUMBER
 W50                                                NUMBER
 W51                                                NUMBER
 W52                                                NUMBER 
```

然后运行类似的 SQL（在 11g 中，您可以使用`listagg`而不是达到`wm_concat`相同的效果）：

```
select 'create or replace view v_tester as select id ' from dual
union all
select * 
  from (select ','||replace(wm_concat(column_name) over (order by column_id), ',', '+') || ' as col' || rownum
  from user_tab_columns
 where table_name = 'TESTER'
   and column_id >= 2
 order by column_id)
union all
select ' from tester;' from dual; 
```

生成 DDL，如：

```
create or replace view v_tester as select id 
,W1 as col1
,W1+W2 as col2
,W1+W2+W3 as col3
,W1+W2+W3+W4 as col4
,W1+W2+W3+W4+W5 as col5 
```

等等......然后运行它。现在您的代码被视图隐藏了，并且易于生成。

# ios - 游戏中心问题：iTunes Connect？配置文件？还有什么？

> ID：15618418
> 
> 赞同：6
> 
> 时间：2013-03-25T15:16:30.877
> 
> 标签：ios, cocoa, app-store-connect, game-center, gamekit

我遇到了一些严重令人困惑的 Game Center 问题。

我的应用程序仅在 iOS 6 及更高版本上运行，并且我一直在使用标准代码通过 Game Center 进行身份验证：

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
localPlayer.authenticateHandler = ^(UIViewController *viewController, 
                                    NSError *error) {
    // Respond to authentication (failure or success) here!
} 
```

使用此代码，该应用程序在开发过程中和大约 10-15 位临时分发版中的 beta 测试人员都可以运行良好且没有问题数周。

对于大部分时间和大多数用户来说，应用程序的行为与您预期的一样：如果您在应用程序启动时没有登录 Game Center，或者登录到生产 Game Center 帐户，应用程序会提示您（使用模态Game Center 主题的视图控制器）使用沙盒帐户登录。您登录到您的沙盒帐户，一切正常。

然而，对于少数用户来说，一些非常奇怪的事情已经开始发生。

`authenticateHandler`代码被称为is `error`，`nil`但是`[GKLocalPlayer localPlayer].authenticated`is `NO`，并且用户没有登录到 Game Center。最重要的是，*没有*提示用户登录的模式游戏中心对话框。应用程序只是启动，`authenticateHandler`代码被调用，但没有进行身份验证。我认为如果 Game Center 应用程序允许我使用我的沙盒帐户登录，该应用程序将工作，但它不能：登录或退出我的生产 Game Center 帐户，没有沙盒登录选项。

由于这只发生在*某些*用户身上，而且只是在我的开发设备上才开始发生，我非常怀疑这是我的代码有问题，我猜这是 iTunes Connect、配置文件、Game Center 的设置和设备上的历史记录等。

Game Center 在我们的 App ID 和 iTunes Connect（以及两者匹配的 App ID）中启用。

帮助！

# 编辑

我的问题*可能*类似于[iOS Development: Strange question with authentication Game Center user](https://stackoverflow.com/questions/4576032/ios-development-strange-problem-with-authenticating-game-center-user)。针对该问题提出的解决方案是在 Game Center 应用程序中手动登录。这似乎是一个明智的解决方案，但我需要登录沙盒环境，并且我找不到在 Game Center 应用程序中获取沙盒 Game Center 登录提示的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:54:58.430

我刚刚在我的设备上尝试了如果用户禁用了 Game Center 会发生什么：用户无法再从应用程序内部访问 Game Center 登录视图控制器。您需要发布一些说明以供用户手动登录。

我还手动访问了 Game Center 并登录到我的帐户（我的常规帐户和我的常规 iTunes 帐户），在返回我的应用程序后，我自动获得了身份验证，没有额外的提示。我敢打赌，如果您有一个单独的电子邮件/帐户用于沙盒 GC 帐户，您将再次获得身份验证对话框。

TL；DR：如果您无法获得模态对话框，请输入一些指导性文本用户应该做什么。查看[GameKit 编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)（PDF 第 36 页，清单 3-1）中的 Apple 代码。您需要在`else`零件中执行此代码。

# java - 系统设置意图后无法返回活动

> ID：15618423
> 
> 赞同：2
> 
> 时间：2013-03-25T15:17:00.770
> 
> 标签：java, android, android-intent, settings

在我的应用程序中，我需要转到手机的设置活动以激活 GPS，并希望使用以下代码返回我的应用程序：

`Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS); startActivityForResult(intent);`

但是当我使用它时，我无法返回我的应用程序。当我按下后，我尝试了这个：

```
 Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivityForResult(intent, 0); 
```

然后我在这段代码中调用了所有类型的结果

```
 public void onActivityResult(int requestCode, int resultCode, Intent x){
    if(requestCode == 0){
        if(resultCode == RESULT_CANCELED){
            Button b = (Button)findViewById(R.id.button1);
            b.setText("ON");
            b.setTextColor(0xff2d9ede);
            Intent k = new Intent(getApplicationContext(), serve.class);
            startService(k);    
        }
    }

    if(resultCode == RESULT_FIRST_USER){
        Button b = (Button)findViewById(R.id.button1);
        b.setText("ON");
        b.setTextColor(0xff2d9ede);
        Intent k = new Intent(getApplicationContext(), serve.class);
        startService(k);    
    }

    if(resultCode == RESULT_OK){
        Button b = (Button)findViewById(R.id.button1);
        b.setText("ON");
        b.setTextColor(0xff2d9ede);
        Intent k = new Intent(getApplicationContext(), serve.class);
        startService(k);    
    }
}
} 
```

但这也不起作用..同样的事情发生了（没有回到我的应用程序）.​​.任何想法？？... 提前致谢

这是整个活动的代码：

```
public class Layout2Activity extends Activity {
static String username4 ;
private static final int DIALOG_ALERT = 10;
private static final int DIALOG_ALERT2 = 8;
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (event.getAction() == KeyEvent.ACTION_DOWN) {
    switch (keyCode) {
    case KeyEvent.KEYCODE_BACK:
        showDialog(DIALOG_ALERT);

        return true;
    }

}
return super.onKeyDown(keyCode, event);
}
boolean isGPSEnabled = false;

boolean isNetworkEnabled = false;
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);
     ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(false);

    SharedPreferences name = getSharedPreferences("user", MODE_PRIVATE);
    username4 = name.getString("name"+Passwardentry.usernomain,"Admin");

    SharedPreferences p = getSharedPreferences("user", MODE_PRIVATE);
    String number = p.getString("mob"+Passwardentry.usernomain, "please assign no.");

    SharedPreferences last = getSharedPreferences("user", MODE_PRIVATE);
    SharedPreferences.Editor edit = last.edit();
    edit.putString("last number", number);
    edit.commit();

    TextView k = (TextView) findViewById(R.id.textView2);
    k.setText(username4);

    TextView t = (TextView) findViewById(R.id.textView4);
    t.setText(number);
    if (serve.isStarted) {
        Button b = (Button)findViewById(R.id.button1);
        b.setText("ON");
        b.setTextColor(0xff2d9ede);
        //TextView n = (TextView) findViewById(R.id.textView5);
        // n.setTextColor(0x7fff00); leh el 2alwan mesh zahra ??
        //n.setText("  On  ");

    } else {
        //TextView n = (TextView) findViewById(R.id.textView5);
        // n.setTextColor(0xff0000);
        //n.setText("  Off  ");
        Button b = (Button)findViewById(R.id.button1);
        b.setText("OFF");
        b.setTextColor(Color.rgb( 139,137,137   ));
    }

}

  public void userchange(View v) {
    Intent i = new Intent(getApplicationContext(), setuserc.class);
    startActivity(i);

}

   public void servicebutton(View V) {

      if (serve.isStarted) {
        //TextView n = (TextView) findViewById(R.id.textView5);
        // n.setTextColor(0xff0000);
        //n.setText("  Off  ");
        Button b = (Button)findViewById(R.id.button1);
        b.setText("OFF");
        b.setTextColor(Color.rgb( 139,137,137   ));
        Intent i = new Intent(getApplicationContext(), serve.class);
        stopService(i);

    } else {
        //TextView n = (TextView) findViewById(R.id.textView5);
        // n.setTextColor(0x7fff00);
        //n.setText("  On  ");

        LocationManager locationManager = (LocationManager)    getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if(isGPSEnabled && isNetworkEnabled){

        Button b = (Button)findViewById(R.id.button1);
        b.setText("ON");
        b.setTextColor(0xff2d9ede);
        Intent k = new Intent(getApplicationContext(), serve.class);
        startService(k);}
            else {
                showDialog(DIALOG_ALERT2);

            } 

    }

}

  public void readingsbutt(View V) {
    Intent i = new Intent(getApplicationContext(), Readings.class);
    startActivity(i);
}

    public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_intro, menu);
    super.onCreateOptionsMenu(menu);
    // int group1 = 1;
    // MenuItem infoBtn = menu.add(group1,1,1,"About");
    // MenuItem mn = menu.add(group1, 2, 2, "arm");
    // mn.setIcon(R.drawable.set);
    // infoBtn.setIcon(R.drawable.set);

     //int group2=2; 
    // MenuItem appSettings = menu.add(group2,3,2,"Application Settings");
    // appSettings.setIcon(R.drawable.set);

     return true;
}

  public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == R.id.menu_settings) {
        Intent i = new Intent(getApplicationContext(), settings.class);
        startActivity(i);
        overridePendingTransition(R.anim.slide_in, R.anim.slide_out);
    }
    if (item.getItemId() == R.id.help) {
        Intent i = new Intent(getApplicationContext(), help.class);
        startActivity(i);
    }
    if (item.getItemId() == R.id.about) {
        Intent i = new Intent(getApplicationContext(), Info.class);
        startActivity(i);
    }
     //switch(item.getItemId()) {
    // case 1:
    //    break;
    //  case 2:
    //    break;
    // }

    return true;
}

   @Override
    protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_ALERT:
      // Create out AlterDialog
      Builder builder = new AlertDialog.Builder(this);
      builder.setMessage("Are you sure you want to Quit ?");
      builder.setCancelable(true);
      builder.setPositiveButton("NO", new OkOnClickListener());
      builder.setNegativeButton("Yes", new CancelOnClickListener());
      AlertDialog dialog = builder.create();
      dialog.show();

    case DIALOG_ALERT2:
          // Create out AlterDialog
          Builder builder2 = new AlertDialog.Builder(this);
          builder2.setMessage("No location service available please activate network and satellite GPS ");
          builder2.setCancelable(true);
          builder2.setPositiveButton("Cancel", new OkOnClickListener2());
          builder2.setNegativeButton("Settings", new CancelOnClickListener2());
          AlertDialog dialog2 = builder2.create();
          dialog2.show();
    }
    return super.onCreateDialog(id);
  }

    private final class CancelOnClickListener implements
      DialogInterface.OnClickListener {
    public void onClick(DialogInterface dialog, int which) {

        setResult(0);
        finish();
        System.exit(0);// /el 2aaady

    }}
    private final class OkOnClickListener implements
     DialogInterface.OnClickListener {
     public void onClick(DialogInterface dialog, int which) {

  }
    }

    private final class CancelOnClickListener2 implements
    DialogInterface.OnClickListener {
  public void onClick(DialogInterface dialog, int which) {
     Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivityForResult(intent, 0);

   }}
  private final class OkOnClickListener2 implements
 DialogInterface.OnClickListener {
public void onClick(DialogInterface dialog, int which) {

}
}

public void onActivityResult(int requestCode, int resultCode, Intent x){
    if(requestCode == 0){
        if(resultCode == RESULT_CANCELED){
            Button b = (Button)findViewById(R.id.button1);
            b.setText("ON");
            b.setTextColor(0xff2d9ede);
            Intent k = new Intent(getApplicationContext(), serve.class);
            startService(k);    
        }
    }

    if(resultCode == RESULT_FIRST_USER){
        Button b = (Button)findViewById(R.id.button1);
        b.setText("ON");
        b.setTextColor(0xff2d9ede);
        Intent k = new Intent(getApplicationContext(), serve.class);
        startService(k);    
    }

    if(resultCode == RESULT_OK){
        Button b = (Button)findViewById(R.id.button1);
        b.setText("ON");
        b.setTextColor(0xff2d9ede);
        Intent k = new Intent(getApplicationContext(), serve.class);
        startService(k);    
    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:18:33.510

下面对我有用。

```
package com.example.test;

import android.os.Bundle;
import android.provider.Settings;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {
boolean firstTime = true;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.i("test", "onCreate");
    Button button = (Button)findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener(){

        @Override
    public void onClick(View arg0) {
        Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS); 
        startActivity(intent);
        }
    });
}

@Override
protected void onResume(){
    super.onResume();
    Log.i("test", "onResume");
    if (firstTime){
    Log.i("test", "it's the first time");
    firstTime = false;
    }

    else{
    Log.i("test", "it's not the first time");

    }

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-04T09:06:24.660

**我在Android 7.0 Nougat**上遇到了同样的问题。

解决方案是简单地添加到清单：

```
<uses-feature android:name="android.hardware.location.gps" /> 
```

然后在关闭设置活动后，我的呼叫活动又回来了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:49:08.347

我明白你的意思，几天前我也遇到了同样的问题。我也在[这里回答了类似的问题](https://stackoverflow.com/questions/5324608/requestcode-code-is-returning-same-value-either-change-the-you-check-option-for/15558436#15558436)

我只是再次在这里发布我的答案。

在您的情况下，您不应该使用 onActivityResult，因为位置源设置活动永远不会为您设置结果代码。

为了实现你想要的，你应该在你的 onResume() 方法中做一些事情。GPS 位置源设置活动完成后，将调用您的 onResume() 方法。因此，您只需在 onResume 中检查 GPS 的开启或关闭。

注意，当你第一次启动应用程序时，onResume 会在 onCreate 之后被调用。因此，您应该决定在 onCreate 之后或 GPS 设置活动之后调用 onResume。

下面是一个示例代码

```
void onCreate(){
    //do something 
    Intent intent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivity(intent);
 }

void onResume(){
    if (firstTime){
  // do something
    firstTime = false;
    }
    else{ // it's from GPS setting activity
     //check your gps again with your logic here
    }
 } 
```

# php - Facebook PHP SDK - 检查用户 ID

> ID：15618424
> 
> 赞同：0
> 
> 时间：2013-03-25T15:17:13.177
> 
> 标签：php, facebook, facebook-php-sdk

这可能很简单，但我就是不明白。我正在检查 $userID，如果存在则显示注销 url，否则显示登录 url，但它总是绕过对 userID 的条件检查，即使我正在打印它并且它存在！我一直在用头撞它一段时间，我认为不同的观点可能会有所帮助......

```
<?php
    require_once("fb_login/facebook.php");
    $facebook = new Facebook(array(
      'appId' => 'MYAPPID',
      'secret'=> 'MYSECRETID'
    ));
    $userId = $facebook->getUser();
    if ($userID) {
        echo("userID is: $userId");
        // $params = array( 'next' => 'http://localhost/bcbooks-repo/index_new.php' );

        $logoutUrl = $facebook->getLogoutUrl(); // $params is optional. 
        echo '<a href="' . $logoutUrl . '">logout</a>';
        $facebook->destroySession();
    }
    else{
        header("Location: {$loginURL}");
        $userId = $facebook->getUser();
        $accessToken = $facebook->getAccessToken();
        $params = array(
          'scope' => 'read_stream, friends_likes',
          'redirect_uri' => 'http://localhost/bcbooks-repo/index_new.php'
        );

        $loginUrl = $facebook->getLoginUrl($params);
        print_r($_SESSION);
        echo("userID is: $userId");
        echo '<a href="' . $loginUrl . '">login</a>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:21:33.787

根据我上面的评论

```
 $userId = $facebook->getUser();
   if ($userID) { 
    echo("userID is: $userId");
    // $params = array( 'next' => 'http://localhost/bcbooks-repo/index_new.php' );

    $logoutUrl = $facebook->getLogoutUrl(); // $params is optional. 
    echo '<a href="' . $logoutUrl . '">logout</a>';
    $facebook->destroySession();
   } 
```

应该

```
 $userId = $facebook->getUser();
   if ($userId) { // <- notice lowercase d
    echo("userID is: $userId");
    // $params = array( 'next' => 'http://localhost/bcbooks-repo/index_new.php' );

    $logoutUrl = $facebook->getLogoutUrl(); // $params is optional. 
    echo '<a href="' . $logoutUrl . '">logout</a>';
    $facebook->destroySession();
   } 
```

# yii - CGridView 列中的多行

> ID：15618428
> 
> 赞同：0
> 
> 时间：2013-03-25T15:17:16.063
> 
> 标签：yii, multiline, paragraph, cgridview

我一直在互联网上搜索我的问题的答案，但我没有找到答案。我的问题是我的 CGridView 中有一个包含 blob 的列。我的 blob 是一些用户写的评论，可以编辑。评论可以有一个句子，也可以包含许多段落。在这种情况下，我想确保在我的 CGridView 中，段落之间的分隔是可见的。

现在，我的 CGridView 正在显示评论，但不尊重换行符。我怎么做？

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'grid-demande',
'dataProvider'=>$dataProviderDemande,
'emptyText'=>'No data',
'cssFile'=>Yii::app()->request->baseUrl."/css/my_gridview.css",
'columns'=>array
(
    array(            
        'name'=>'ch_comment',
        'type'=>'raw',
        'htmlOptions'=>array('width'=>'21%'),
    ),
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-13T15:05:40.857

您可以使用格式化程序“ntext”：http://www.yiiframework.com/doc/api/1.1/CFormatter#formatNtext-detail

在这种情况下，只需在“列”数组中添加：

```
'ch_comment:ntext',
//short forme
array(
  'name' => 'ch_comment',
  'type' => 'ntext'),
//long forme 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:26:05.647

在gridview中为您的列定义尝试以下操作：

```
array(            
    'name'=>'ch_comment',
    'value'=>'nl2br($data->ch_comment)',
    'type'=>'raw',
    'htmlOptions'=>array('width'=>'21%'),
), 
```

这会将换行符转换为`<br />`标签，这应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:23:32.787

您可以尝试更改`type=>'raw'`为`type=>'html'`

# database - 从数据库 PrimeFaces 构建 TreeNode

> ID：15618433
> 
> 赞同：1
> 
> 时间：2013-03-25T15:17:27.850
> 
> 标签：database, build, primefaces, menubar, treenode

我需要一些示例来从数据库构建 TreeNode，以构建需要 TreeNode 的 PrimeFaces 菜单栏。这是我的菜单视图代码。

我需要使用数据库从我的 ManagedBean 构建一个 TreeNode，我的菜单使用这个 TreeNode 来绘制子菜单和菜单项。

我需要一种方法，允许我从 ManagedBean 处理来自数据库的查询并创建这些 TreeNode 的结构以及有关带有菜单的表结构的一些想法，我只希望存储菜单的标题。请帮忙 ：（

```
 <p:menubar style="width: auto;" autoDisplay="false">
    <c:forEach items="#{treeBean.root.children}" var="nodos">
        <p:submenu label="#{nodos.getData()[0].toString()}" icon="#{nodos.getData()[2].toString()}">
            <c:forEach items="#{nodos.children}" var="hojas">
                <c:if test="#{hojas.isLeaf()==false}">
                    <p:submenu label="#{hojas.getData()[0].toString()}" icon="#{hojas.getData()[2].toString()}">
                        <c:forEach items="#{hojas.children}" var="menus">
                            <c:when test="#{menus.leaf}">
                                <c:if test="#{menus.leaf==false}">
                                    <p:submenu label="#{menus.getData().toString()}">
                                        <c:forEach items="#{menus.children}" var="menus2">
                                            <p:menuitem value="#{menus2.getData()[0].toString()}" action="#{menus2.getData()[1].toString()}"
                                            ajax="false" icon="#{menus2.getData()[2].toString()}" />
                                        </c:forEach>
                                    </p:submenu>
                                </c:if>
                                <c:if test="#{menus.leaf}">
                                    <p:menuitem value="#{menus.getData()[0].toString()}" action="#{menus.getData()[1].toString()}"
                                    ajax="false" icon="#{menus.getData()[2].toString()}" />
                                </c:if>
                            </c:when>
                        </c:forEach>
                    </p:submenu>
                </c:if>
                <c:if test="#{hojas.isLeaf()==true}">
                    <p:menuitem value="#{hojas.getData()[0].toString()}" action="#{hojas.getData()[1].toString()}"
                    ajax="false" icon="#{hojas.getData()[2].toString()}" />
                </c:if>
            </c:forEach>
            <c:if test="#{nodos.getData()[0].toString()=='Favoritos'}">
                <p:menuitem value="Agregar Favorito" action="verPrueba" ajax="false" />
            </c:if>
        </p:submenu>
    </c:forEach>
    <f:facet name="options">
        <p:commandButton value="Cerrar Sesión" icon="ui-icon-cerrarSesion" action="verPrueba"
        />
    </f:facet>
</p:menubar> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:49:08.610

我在这里找到了答案，即从数据库构建 TreeNode 并构建菜单栏的递归方法的代码：

```
public void recursivo(List<Menustab> liste, int id, TreeNode node) {
    subList2 = new ArrayList<Menustab>();
    subList2 = subMenus(id);
    for (Menustab k : subList2) {
        TreeNode childNode = new DefaultTreeNode(k.getTitulo(), node);
        recursivo(subList2, k.getId(), childNode);

    }

}

public static List<Menustab> subMenus(int i) {
    listaHijos = new ArrayList<Menustab>();
    for (Menustab k : getListaMenus()) {
        if (k.getPadre() == i) {
            listaHijos.add(k);
        }
    }
    return listaHijos;
} 
```

我对 menuBar 的看法：

```
<h:form >

        <div id="header" align="left">

            <p:menubar  autoDisplay="false"> 
                <c:forEach items="#{constructorMenuMB.root.children}" var="nodos" >

                    <p:submenu   label="#{nodos.getData().toString()}"   >

                        <c:forEach items="#{nodos.children}" var="hojas">

                            <c:if test="#{hojas.isLeaf()==false}">

                                <p:submenu  label="#{hojas.getData().toString()}"  >

                                    <c:forEach items="#{hojas.children}" var="menus">

                                        <c:when test="#{menus.leaf}">
                                            <c:if test="#{menus.leaf==false}">
                                                <p:submenu  label="#{menus.getData().toString()}" >

                                                    <c:forEach items="#{menus.children}" var="menus2">
                                                        <p:menuitem  value="#{menus2.getData().toString()}"  ajax="false" />
                                                    </c:forEach>
                                                </p:submenu>
                                            </c:if>
                                            <c:if test="#{menus.leaf}">
                                                <p:menuitem value="#{menus.getData().toString()}"  ajax="false" />
                                            </c:if>
                                        </c:when>

                                    </c:forEach>

                                </p:submenu>

                            </c:if>

                            <c:if test="#{hojas.isLeaf()==true}">

                                <p:menuitem value="#{hojas.getData().toString()}"  ajax="false" />

                            </c:if>

                        </c:forEach>

                        <c:if test="#{nodos.getData().toString()=='Favoritos'}">

                            <p:menuitem value="Agregar Favorito" action="verPrueba"  ajax="false"/>
                        </c:if>

                    </p:submenu>

                </c:forEach>

            </p:menubar>

        </div>

    </h:form> 
```

现在我的完整bean：

```
public class ConstructorMenuMB {

private TreeNode root = new DefaultTreeNode("Root", null);
private static List<Menustab> listaMenus;
private static List<Menustab> listaHijos;
private List<Menustab> subList2;

@EJB
public MenuSB sb;

/**
 * Creates una nueva instancia de ConstructorMenuMB
 */
public ConstructorMenuMB() {
}

@PostConstruct
public void construirMenu() {
    listaMenus = new ArrayList<Menustab>();
    listaMenus = sb.consultarArbolMenus();
    recursivo(listaMenus, 1, root);
}

/**
 * Método recursivo para construir un árbol(TreeNode) desde una lista de arreglos de
 * cadenas obtenida desde la base de datos.
 *
 * @param ArrayList<String[]> lista de menus.
 * @return No devuelve ningun valor.
 * @throws No dispara ninguna excepcion.
 */
public void recursivo(List<Menustab> liste, int id, TreeNode node) {
    subList2 = new ArrayList<Menustab>();
    subList2 = subMenus(id);
    for (Menustab k : subList2) {
        TreeNode childNode = new DefaultTreeNode(k.getTitulo(), node);
        recursivo(subList2, k.getId(), childNode);

    }

}

public static List<Menustab> subMenus(int i) {
    listaHijos = new ArrayList<Menustab>();
    for (Menustab k : getListaMenus()) {
        if (k.getPadre() == i) {
            listaHijos.add(k);
        }
    }
    return listaHijos;
}

public static List<Menustab> getListaMenus() {
    return listaMenus;
}

public TreeNode getRoot() {
    return root;
} 
```

}

和我的会话 bean，其中使用实体管理器通过菜单咨询我的表：

```
public class MenuSB {
@PersistenceContext(unitName = "MenuGeneralPU")
private EntityManager em;

 public List<Menustab> consultarArbolMenus(){

    return em.createNamedQuery("Menustab.findAll").getResultList();

} 
```

}

我的菜单实体：

```
public class Menustab implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@Basic(optional = false)
@NotNull
@Column(name = "id")
private Integer id;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 50)
@Column(name = "titulo")
private String titulo;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 50)
@Column(name = "url")
private String url;
@Basic(optional = false)
@NotNull
@Column(name = "padre")
private int padre;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 50)
@Column(name = "icono")
private String icono;

public Menustab() {
}

public Menustab(Integer id) {
    this.id = id;
}

public Menustab(Integer id, String titulo, String url, int padre, String icono) {
    this.id = id;
    this.titulo = titulo;
    this.url = url;
    this.padre = padre;
    this.icono = icono;
}

public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

public String getTitulo() {
    return titulo;
}

public void setTitulo(String titulo) {
    this.titulo = titulo;
}

public String getUrl() {
    return url;
}

public void setUrl(String url) {
    this.url = url;
}

public int getPadre() {
    return padre;
}

public void setPadre(int padre) {
    this.padre = padre;
}

public String getIcono() {
    return icono;
}

public void setIcono(String icono) {
    this.icono = icono;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof Menustab)) {
        return false;
    }
    Menustab other = (Menustab) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "Entidad.Menustab[ id=" + id + " ]";
} 
```

}

最后是我在数据库中的表的结构：

身份证 | 标题 | 网址 | 教士 | 图标

我在我的算法中使用基本的，一个菜单的 id 'ID' 和它的模式 'PADRE' 来构建一个 TreeNode 和标题 'TITULO' 的菜单文本，我正在努力绘制图标。

# arrays - MIPS：用户输入数组大小

> ID：15618436
> 
> 赞同：1
> 
> 时间：2013-03-25T15:17:37.577
> 
> 标签：arrays, input, size, mips

我最近在我的 MIPS 课上得到了一个作业，正在寻求一些帮助。

该问题要求我允许用户输入数字“n”。这个数字将创建一个大小为 n 的数组，然后用户将在其中存储浮点数据。示例运行如下所示：

```
Enter n: 5
Enter a float: 1.2
Enter a float: 3.2
Enter a float: 5.5
Enter a float: 2.99
Enter a float: 4.4 
```

如果 n 为 6，则数组将是 6 并且将输入 6 个浮点数。有没有办法让用户以这种方式创建数组大小？

注意：我不会这么急着问，但是这门课的书已经绝版了，亚马逊上要卖 300 美元（RISC 编程简介），所以我手头没有书就学习了。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:33:37.310

您必须使用操作系统的服务：

*   使用`syscall`4 打印您的字符串（`$a0`指向要打印的 asciiz 字符串）
*   使用`syscall`5 输入一个整数（您的数组的项目数将在 中返回`$v0`）
*   使用`syscall`9 在堆中分配内存（并`$a0`指示要分配的字节数），返回`$v0`已分配缓冲区的地址
*   然后`syscall`根据需要使用 6 次输入浮点数（在 中返回的浮点数`$f0`）

可以在*MARS 模拟器中找到有关如何使用系统调用的最小参考*

# c# - 匹配正则表达式中的字符串

> ID：15618443
> 
> 赞同：1
> 
> 时间：2013-03-25T15:17:56.317
> 
> 标签：c#, regex

这是我要匹配的字符串：

```
"t=0, data=00 00 00 f1 00 00 00 00". 
```

以下作品：

*   `(@"^(t)=[0-9]+,((\s[0-9A-F-a-f]{2}){8})")` 火柴： `"t=0, 00 00 00 f1 00 00 00 00"`

*   `(@"^(t)=[0-9]+,\s\w+=")` 火柴： `"t=0, data="`

以下*不起作用*：

*   `(@"^(t)=[0-9]+,\s\w+=((\s[0-9A-F-a-f]{2}){8})")` 不匹配： `"t=0, data=00 00 00 f1 00 00 00 00"`

这是我目前的代码：

```
Regex rgx = new Regex(@"^(t)=[0-9]+,\s\w+=((\s[0-9A-F-a-f]{2}){8})");
if(rgx.IsMatch(line.Trim())){
  //...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:38:57.380

`^(t)=[0-9]+,\s\w+=([0-9A-Fa-f]{2}(\s|$)){8}`会成功的。您在每两位数字之后放置了一个空格字符，但是由于最后两位数字后面没有空格，因此正则表达式将不匹配。现在正则表达式引擎可以在空白字符或字符串结尾之间进行选择。

编辑：将单词边界更改为字符串结尾

Edit2：另外，看看这个：[http ://www.regular-expressions.info/anchors.html](http://www.regular-expressions.info/anchors.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:25:25.673

如果我很了解您的需求，您可以使用以下正则表达式：

```
Regex rgx = new Regex(@"(^t=[0-9]+,[a-z ]+=([A-Fa-f0-9]{2} ?){8})");
if(rgx.IsMatch(line.Trim())){
    //...
} 
```

所以：

*   `^t=[0-9]+,[a-z ]+=`匹配十六进制数字之前的所有内容。
*   `([A-Fa-f0-9]{2} ?){8}`匹配 8 组 2 个十六进制字符，后跟或不跟空格。

所有内容都包含在`$1`变量中，因为括号匹配整行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:26:12.213

对于 (\s[0-9A-Faf]{2}) 来匹配 = 符号之后的第一对数字，您需要在 = 符号和第一个数字之间有一个空格。但似乎你没有。

(\s[0-9A-Faf]{2}) 也是正确的吗？我认为您需要删除 F 和 a 之间的“-”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:27:48.310

好的，匹配模式：

```
t=0, data=00 00 00 f1 00 00 00 00 
```

我做了一些假设：

*   后面可以有任意数量的数字`t=`
*   后面有 8 组两个十六进制数字`data=`
*   您需要匹配组中的数据

然后这种模式将起作用：

```
^t=[0-9]++,\s*+data=(?<data>(?:[0-9a-f]{2}\s?){8})$ 
```

Java中的测试

```
public static void main(String[] args) throws SQLException {
    final String data = "t=0, data=00 00 00 f1 00 00 00 00";
    final Pattern pattern = Pattern.compile("^t=[0-9]++,\\s*+data=(?<data>(?:[0-9a-fA-F]{2}\\s?){8})$");
    final Matcher matcher = pattern.matcher(data);
    if (matcher.matches()) {
        System.out.println(matcher.group());
        System.out.println(matcher.group("data"));
    }
} 
```

输出：

```
t=0, data=00 00 00 f1 00 00 00 00
00 00 00 f1 00 00 00 00 
```

# android - Android Application 类不保存对象的实例

> ID：15618448
> 
> 赞同：0
> 
> 时间：2013-03-25T15:18:06.333
> 
> 标签：android

我有一个名为 AppVariable 的类，它扩展了 Application 类

这是我的 AppVariable#OnCreate() 方法，以及我要检索的对象的 getter 和 setter：

```
public void onCreate() {
    super.onCreate();
    //set Facebook Manager
    setFacebookManager(new FacebookManager(this));
}

/**
 * Getter for FacebookManager Object
 * @return the FacebookConnectionManager object
 */
public FacebookManager getFacebookManager() {                           
    return this.facebookManager;
}

/**
 * Setter for FacebookManager object
 * @param facebookManager the new FacebookConnectionManager object
 */
public void setFacebookManager(FacebookManager facebookManager) {
    this.facebookManager = facebookManager;
} 
```

在我的 Activity 中，我试图从 AppVariable 对象中获取 FacebookManager 对象 - 但它总是返回 null：

```
 /**
     * Authorize with facebook
     */
    public void facebookAuthorization()
    {
        AppVaiable app = (AppVariables) getApplication();

           //Connecting with Facebook
        loadingStatus.setText("Connecting with Facebook");
        //authorize to Facebook             
        app.getFacebookManager().getFacebook().authorize(this, getResources().getStringArray(R.array.facebookPermissions), new AuthorizeDialogListener(app));       
    } 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:01:02.840

你确定你的空指针出现在“app.getFacebookManager()”。我建议您打印所有方法结果并查看 null 来自何处：

```
 Log.d("YourClass", "Manager: "+ app.getFacebookManager());
  Log.d("YourClass", "FAcebook: "+ app.getFacebookManager().getFacebook()); 
```

# javascript - Javascript数组长度属性未正确输出

> ID：15618450
> 
> 赞同：0
> 
> 时间：2013-03-25T15:18:09.540
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 JQuery 填充标题元素，传入一个应该包含我的数组长度的字符串：

```
$('#headerText').text('Clue #' + clue + ' of ' + treasureHunt.Clues.$values.length); 
```

在运行程序时，长度属性输出为“...”。我不知道为什么。

但是，我可以成功地将长度值输出到控制台，例如

```
console.log(treasureHunt.Clues.$values.length); 
```

所以在这种情况下输出到控制台的结果值是'5'。

那么为什么它不能作为 JQuery 语句中字符串的一部分呢？

我尝试将 String() 包裹在 length 属性周围，看看这是否会导致它正确输出，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:39:12.473

（感谢@Bergi 和@KevinB 为我指明了正确的方向）

问题实际上与数组无关，由于我在项目中使用的默认 JQuery Mobile CSS，字符串在一定数量的字符后被切断，所以为了解决这个问题我不得不覆盖 CSS使用以下 CSS 规则：

```
.ui-header, .ui-title, .ui-footer{

    margin-right: 0 !important;
    margin-left: 0 !important;
} 
```

它恰好是被删除的数组长度属性，因此为什么我错过了实际的问题！

# c# - ADO.NET EF - 使用 LINQ 2 Entity 和 GroupBy 来区分两列

> ID：15618452
> 
> 赞同：0
> 
> 时间：2013-03-25T15:18:16.677
> 
> 标签：c#, entity-framework, linq-to-entities

我知道标题有点混乱，但问题很简单。我正在使用`Entity Framework`和`Code First`接近。我有这两个关系为 1:N 的实体。记录的唯一性来自两列的组合 - `Code`+ `CountryID`。首先，我认为它`Code`本身将是唯一文件，因此我获取不同记录的查询如下所示：

```
IList<SoleColor> soles = SoleColorService.All()
                .GroupBy(x => x.Sole.Code)
                .Select(g => g.FirstOrDefault())
                .ToList(); 
```

但是现在它发生了，这样做我会丢失那些`Code`（或者准确地说 - `Sole.Code`）相同但`CountryID`不同的记录。我需要更改我的查询，使其返回`Code`+`CountryID`唯一的所有记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:20:32.037

您想按匿名类型分组：

```
.GroupBy(x => new { x.Sole.Code, x.Sole.CountryID }) 
```

顺便说一句：`FirstOrDefault`在从 a 返回的组上使用`GroupBy`没有意义。a 返回的每个组`GroupBy`都至少包含一个元素，因此`First`可以保证使用始终成功。

# telerik - Kendogrid destroy() 并在新数据源上重新创建表，为什么旧 表列仍然存在？

> ID：15618467
> 
> 赞同：16
> 
> 时间：2013-03-25T15:19:21.290
> 
> 标签：telerik, kendo-ui, telerik-grid, kendo-grid

在 KendoUI Grid 中调用`destroy()`然后在新的 Grid 上重新创建表时`DataSource`：为什么旧表列仍然存在？

这里唯一可以说的元素是元素。我如何告诉网格读取新的数据源列（它读取其他所有内容正确）。

（如果我制作了 2 个不同的元素，它们都会正确填充，但我宁愿只保留 1 个元素并通过销毁和重新初始化替换元素表）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-25T20:40:11.730

这很可能是因为您没有清除 Grid 容器内的内容。例如

```
$('#gridName').data().kendoGrid.destroy();
$('#gridName').empty(); 
```

或更短的语法

```
$('#gridName').kendoGrid('destroy').empty(); 
```

其他方式 Grid 考虑到留下的旧 html - 不要忘记 Grid 可以像[这里](http://demos.kendoui.com/web/grid/from-table.html)一样从表初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-07T15:50:36.083

只想澄清 Peter Subev 回答的最后一点，因为它帮助了我：

> “不要忘记网格可以从[这里](http://demos.kendoui.com/web/grid/from-table.html)的表中初始化”

这只是说在您的 HTML 中您使用了`<table>`标签而不是`<div>`标签。使用`<table>`标签将 Grid 表数据与 Grid 列分开，因此当您执行 $('#gridName').kendoGrid('destroy').empty() 时，它只会破坏/清空表数据，而不是列信息。

将您的 HTML`<table>`标记切换为`<div>`标记以获得所需的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-29T21:26:30.007

我在角度框架中工作，似乎无法使用新的数据源和新列重新初始化 Kendo 网格。第二个网格初始化没有任何作用。我试过了：

```
 if (vm.mainHierGrid != null) {
            //vm.mainHierGrid.data().kendoGrid.destroy();
            $('#mainGrid').data().kendoGrid.destroy();
            //$('#mainGrid').empty();
            vm.mainHierGrid.destroy();
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-23T10:05:58.080

破坏剑道网格并重新绑定它

```
if ($('#kgCopyEntityGrid').hasClass("k-grid")) {
                    $('#kgCopyEntityGrid').kendoGrid('destroy').empty();
                }

                var kgCopyGrid = $("#kgCopyEntityGrid").kendoGrid({
// your code here
                }).data("kendoGrid"); 
```

# mongodb - ZF2 + DoctrineODM + 教义-mongo-odm-module 分页器教程

> ID：15618469
> 
> 赞同：2
> 
> 时间：2013-03-25T15:19:23.737
> 
> 标签：mongodb, zend-framework2, doctrine-odm

我在**ZF2 + DoctrineODM + dictionary-mongo-odm-module**上有应用程序，但我找不到如何使用这些模块创建分页的示例。有没有例子可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:23:39.447

试试看这里[Doctrine + ZF2 Tips: Pagination](http://blog.loftdigital.com/blog/doctrine-plus-zf2-tips-pagination) 它使用 Doctrine ORM，但它应该与 Doctrine ODM 非常相似。

只需使用 DoctrineMongoODMModule 和[它的分页器](https://github.com/doctrine/DoctrineMongoODMModule/blob/master/src/DoctrineMongoODMModule/Paginator/Adapter/DoctrinePaginator.php)

# javascript - Javascript - 使用 innerHTML 替换 html

> ID：15618470
> 
> 赞同：16
> 
> 时间：2013-03-25T15:19:29.903
> 
> 标签：javascript, innerhtml

我正在尝试使用 innerHTML javascript 替换 html。

从：

```
aaaaaa/cat/bbbbbb 
```

至：

```
<a href="http://www.google.com/cat/world">Helloworld</a> 
```

这是我的代码

```
<html>
<head>
</head>
<body>
<p id="element1">aaaaaa/cat/bbbbbb</p>

<script language="javascript">
var strMessage1 = document.getElementById("element1") ;
strMessage1.innerHTML = strMessage1.innerHTML.replace( /aaaaaa./g,'<a href=\"http://www.google.com/') ;
strMessage1.innerHTML = strMessage1.innerHTML.replace( /.bbbbbb/g,'/world\">Helloworld</a>') ;
</script>
</body>
</html> 
```

当我运行此代码时，它会消失 Helloworld 超链接。我做错了什么。请帮忙。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T15:24:07.287

您应该将 replace() 链接在一起，而不是分配结果并再次替换。

```
var strMessage1 = document.getElementById("element1") ;
strMessage1.innerHTML = strMessage1.innerHTML
                        .replace(/aaaaaa./g,'<a href=\"http://www.google.com/')
                        .replace(/.bbbbbb/g,'/world\">Helloworld</a>'); 
```

见[演示](http://jsfiddle.net/GxMYC/1/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T15:22:58.317

您正在替换起始标记，然后将其放回`innerHTML`，因此代码将无效。在将代码放回元素之前进行所有替换：

```
var html = strMessage1.innerHTML;
html = html.replace( /aaaaaa./g,'<a href=\"http://www.google.com/');
html = html.replace( /.bbbbbb/g,'/world\">Helloworld</a>');
strMessage1.innerHTML = html; 
```

# sql-server - TSQL Union, Max(date) - 有解决方案。想要改进

> ID：15618478
> 
> 赞同：0
> 
> 时间：2013-03-25T15:20:02.960
> 
> 标签：sql-server, tsql, union, max

以下查询有效，但必须有更好的方法将表的值设置为两组数据联合的最大日期。这是我所拥有的：

```
Update stagingTable
Set OverrideFlag = 
(
select total.overrideflag from
    (
    select Customer_SSN as ssn, RequestDateTime as maxdate, overrideflag
    from tableA
    where RequestDateTime > '9/1/2012'
    union
    select ssn, EntryDate as maxdate, overrideflag
    from tableB
    where EntryDate > '9/1/2012'
    )  total
    join
    (
    select ssn, max(maxdate) as maxdate from
        (
        select Customer_SSN as ssn, RequestDateTime as maxdate
        from tableA
        where RequestDateTime > '9/1/2012'
        union
        select ssn, EntryDate as maxdate
        from tableB
        where EntryDate > '9/1/2012'
        ) maxs
        group by ssn
    ) maxdates  on total.ssn = maxdates.ssn and total.maxdate = maxdates.maxdate        where total.ssn = stagingTable.ssn
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:15:06.170

我还找到了一种使用临时表的不同方法。我对这些感到非常自在，但我总是想看到一种不同的方式来做到这一点。没有失望！

```
create table #tOvr(customerID varchar(15), ssn varchar(11), EntryDate datetime, overrideflag varchar(2))
insert into #tOvr
select customer_ID, Customer_SSN, RequestDateTime, overrideflag
from tableA
where RequestDateTime > '9/1/2012'
and Customer_ID in 
    (select contact_ID from stagingTable
    where Location_ID = @Location_ID)
insert into #tOvr
select Customer_ID, ssn, EntryDate, overrideflag
from tableB
where EntryDate > '9/1/2012'
and Customer_ID in 
    (select contact_ID from stagingTable
    where Location_ID = @Location_ID)

Update stagingTable
Set OverrideFlag =
    (select overrideflag from #tOvr
    where EntryDate = (select max(EntryDate) from #tOvr where #tOvr.customerID = stagingTable.contact_ID)
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:04:54.153

看来你做了两次完全相同的事情，所以我不需要定义两次并将其连接回自身，除非其中一个嵌套选择中有不同的东西。您实际上是在两次编写相同的语句，并且冗余可能是一个问题，因为其中一个选择似乎完全冗余。

```
-- this is a CTE and is better for reuse than a nested select as you can reference it
-- is as a base and reuse that, versus having to write the same statement twice.
;with a as 
    (
     select 
         Customer_SSN as ssn, 
         RequestDateTime as maxdate, 
         OverRideFlag,
         -- EDIT, you should be able to use a 'Windowed function' to get the maxDate
         max(RequestDateTime) over(partition by SSN order by RequestDateTime desc) as maxDate
     from tableA
     where RequestDateTime > '9/1/2012'
     union
     select 
          ssn, 
          EntryDate, 
          OverRideFlag, 
          max(RequestDateTime) over(partition by SSN order by RequestDateTime desc) as maxDate
     from tableB
     where EntryDate > '9/1/2012'
    )
Update stagingTable
Set OverrideFlag = total.overrideflag
from a total
   join stagingTable on total.ssn = stagingTable.ssn  
   -- do not know reference here so you need to add that table as a 'join' 
where total.EntryDate = total.maxDate 
```

# sql - Sql过程变量

> ID：15618480
> 
> 赞同：-2
> 
> 时间：2013-03-25T15:20:13.170
> 
> 标签：sql, variables, stored-procedures

我有这个 sql 过程语句，但由于变量而失败：

```
CREATE PROCEDURE iskanje(@iskani_niz)
BEGIN
SELECT A.ime, A.opis, B.kategorija
FROM file as A, cathegory as B
WHERE A.ime LIKE '%'+@iskani_niz+'%' 
OR A.opis LIKE '%'+@iskani_niz+'%' 
OR B.kategorija LIKE '%'+@iskani_niz+'%';
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:33:55.827

我很抱歉那个迟到的答案......我发现sql和mysql中的过程有不同的语法......所以真正的语法应该是这样的：

```
set delimiter //

create procedure iskanje(in naziv varchar(10))

BEGIN
    SELECT A.ime, A.opis, B.kategorija
    FROM file as A, cathegory as B
    WHERE A.ime LIKE concat('%',naziv,'%')
       OR A.opis LIKE concat('%',naziv,'%')
       OR B.kategorija LIKE concat('%',naziv,'%');
END//

set delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:23:01.193

试试这个，而不是向过程声明你的参数：

```
CREATE PROCEDURE iskanje
    @iskani_niz nvarchar(max)
AS BEGIN

SELECT A.ime, A.opis, B.kategorija
FROM file as A, cathegory as B
WHERE A.ime LIKE '%'+@iskani_niz+'%' 
   OR A.opis LIKE '%'+@iskani_niz+'%' 
   OR B.kategorija LIKE '%'+@iskani_niz+'%';

END 
```

请注意，您应该指定一个比 更好的类型`nvarchar(max)`，这是我根据您在`SELECT`语句中的用法假设的。

# ruby-on-rails - 为什么这些代码不能按预期工作？

> ID：15618481
> 
> 赞同：-2
> 
> 时间：2013-03-25T15:20:15.780
> 
> 标签：ruby-on-rails

我写了一个控制器

```
class NotificationsController < ApplicationController
  before_filter :authenticate_user!

  def index
    @notification = current_user.notification
    if @notification.unread == 0
      redirect_to root_path
    else
      @notification.unread == 0
      @notification.save
    end
  end
end 
```

我希望 `@notification.unread`在显示索引页面后为 0。但它实际上无法工作。如何更改这些代码以使其正常工作。

希望你能帮助我，非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:23:42.910

尝试使用`@notification.unread = 0`而不是`@notification.unread == 0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:24:58.873

我不确定我是否完全理解您要执行的操作，但是您调用 == 两次，这是一个比较运算符，我认为在第二部分中您要设置该值，因此您应该仅使用 =

像这样

```
class NotificationsController < ApplicationController
  before_filter :authenticate_user!

  def index
    @notification = current_user.notification
    if @notification.unread == 0
      redirect_to root_path
    else
      @notification.unread = 0
      @notification.save
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:23:45.383

```
 else
      @notification.unread = 0
      @notification.save
    end 
```

@notification.unread == 0 不会改变属性的值。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:29:47.993

将业务逻辑转移到模型总是一个好主意，所以你可以把它写成

```
class Notification < ActiveRecord::Base

  def unread?
    unread == 0
  end

end

class NotificationsController < ApplicationController
  before_filter :authenticate_user!

  def index
    @notification = current_user.notification
    @notification.unread? ? (@notification.update_attributes("unread", 0) : (redirect_to root_path))
  end
end 
```

# javascript - 在函数内调用函数

> ID：15618489
> 
> 赞同：-3
> 
> 时间：2013-03-25T15:20:33.183
> 
> 标签：javascript, function

我有这个脚本，我把它用作学习的东西。在此代码中，我试图拥有它，以便每次单击按钮时，它将运行多个代码。比如每次它会失去 1 点体力，改变 3 件事中的 1 件（金钱、体力或健康），然后更新屏幕上的数字。不幸的是..我的号码没有更新。我以前只调用一个函数就可以运行这个程序，但现在我有多个，它会导致问题。

```
<html>
<head>
<script>
var stam=100;
var cash=0;
var health=100;
var rNumber=Math.random();
function explore(){      //2<- This function gets called and runs two functions
    if(stam>1){
        redStam();
        refresh();
              //<-- will add a function to use a random number later to decide whether health, money or stamina gets changed.
    };
    else{alert("You have no stamina")}}   
    function refresh(){   //3<-This function gets called, which refreshes the current variables
        document.getElementById('number').innerHTML=stam;
    };
    function redStam(){   //3<This function also gets called. 
        stam--;
    };
</script>
<button onclick="explore()">Explore</button>            1<- button gets clicked
</head>
<body>
<p id='number'>100</P>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:28:17.060

您的`if`语句有一个不需要的分号：`if { ... }; else { ... }`.

当您遇到 JavaScript 错误时，请尝试检查浏览器的控制台。它会告诉问题出在哪条线上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:30:45.280

你有一堆语法错误，检查你的控制台，你在`if`.

这个[小提琴](http://jsfiddle.net/mmyNc/)似乎正在工作。

```
function explore() { //2<- This function gets called and runs two functions
    if (stam > 1) {
        redStam();
        refresh(); 
    } else {
        alert("You have no stamina")
    }
} 
```

# python - _init_ 类中要解决的一些问题？

> ID：15618490
> 
> 赞同：0
> 
> 时间：2013-03-25T15:20:40.873
> 
> 标签：python, inheritance

```
from tkinter import *
class App(Frame):
    def __init__(self,master=None):
            Frame._init_(self,master)
            self.pack()

myapp=App()
myapp.master.title("My Do-Nothing Application")
myapp.master.maxsize(1000, 400)
myapp.mainloop() 
```

**错误：**

```
Frame._init_(self,master)
AttributeError: type object 'Frame' has no attribute '_init_' 
```

我写了一个简单的代码，但是有一些错误，我尽力解决它，但我不能。任何人可以帮助我解决它吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:25:30.453

```
class App(Frame):
    def __init__(self,master=None):
            Frame.__init__(self,master)
            self.pack() 
```

和 App 一样`__init__`，Frame 的两边也需要两个 undescores。`__init__`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:25:11.097

您需要调用`__init__`而不是`_init_`，即每边有两个下划线。

# stata - Stata：将值添加到现有值上

> ID：15618494
> 
> 赞同：1
> 
> 时间：2013-03-25T15:20:45.077
> 
> 标签：stata

```
year
  0
  1
  6
....
(omit)
....
 77
 90
....
(omit)
.... 
```

“年”是一个数值变量。我需要在 1 位值之前添加“200”，在 2 位值之前添加“19”。

```
year
2000
2001
2006
....
1977
1990
.... 
```

我怎样才能在Stata中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:27:36.873

小心：变量可能是`byte`并且会咬人。

这应该有效：

```
 gen year2 = cond(year < 10, 2000 + year, 1900 + year) 
 tab year2 
```

如果`year2`好看的话

```
 drop year 
 rename year2 year 
```

# vba - 使用 VBA 仅抓取文件名/文件路径的一部分

> ID：15618499
> 
> 赞同：2
> 
> 时间：2013-03-25T15:21:01.457
> 
> 标签：vba, excel, filenames

我不确定如何解决这个问题。我做了很多研究，但我发现的大多数答案与我需要的有点不同。

我想要完成的是：

1.  手动打开现有工作簿 (wbAI)，
2.  启动宏，
3.  使用 msoFileDialogOpen 查找并打开文件（称为 wb2），
4.  将wb2的**部分**文件名（文件名中有日期）存储为变量或字符串。（我不确定哪个更适合这个目的。也许我不需要全部存储......），
5.  将 wb2 的部分文件名（日期）粘贴到 wb1 的某个单元格中，
6.  从 wb2 复制必要的数据，
7.  将数据粘贴到 wb1 中，
8.  格式化数据，
9.  对粘贴的数据使用 VLOOKUP，
10.  关闭 wb2 而不保存
11.  结束宏。

我的宏可以完成上面列出的每一步，除了数字四和五。一方面，我想知道我需要如何追求这一点，另一方面，我想知道这将适合我当前的代码中的什么位置。

举一个我正在谈论的例子：假设在第三步中我打开了一个名为“01.31.13 Group Names”的工作簿。文件路径来自 Sharepoint 站点，因此看起来像这样：

“ [https://company.com/team/teamone/_layouts/xlviewer.aspx?01.31.13%20Group%20Names%20.xlsm&Source=https](https://company.com/team/teamone/_layouts/xlviewer.aspx?01.31.13%20Group%20Names%20.xlsm&Source=https) ......”

如何仅选择文件名/文件路径中的日期？

这是我的代码的开头：

```
Sub Test()

Dim lastRow As Long, i As Long
Dim ws As Worksheet
Dim wbSource As Workbook
Dim wbAI As Workbook
Dim vrtSelectedItem As Variant

Set wbAI = ActiveWorkbook
Application.ScreenUpdating = False 

With Application.FileDialog(msoFileDialogOpen)
    .InitialFileName = https://company.com/team/teamone & "\"
    .AllowMultiSelect = False
    .Show
    '  ******  Is this where the new code could be inserted? *******
   For Each vrtSelectedItem In .SelectedItems
   Set wbSource = Workbooks.Open(vrtSelectedItem)
   Next
   End With
   ' Check if the first cell contains data. If not then close file
   If Range("Profile!H9") = "" Then
        ActiveWorkbook.Close savechanges:=False
        ActiveWorkbook.Saved = False 
```

欢迎任何建议！感谢您的时间！

编辑：这就是我的代码在 Philip 的建议之后的样子：

```
Sub Test()

Dim lastRow As Long, i As Long
Dim ws As Worksheet
Dim wbSource As Workbook
Dim wbAI As Workbook
Dim vrtSelectedItem As Variant

Set wbAI = ActiveWorkbook
Application.ScreenUpdating = False 

With Application.FileDialog(msoFileDialogOpen)
    .InitialFileName = https://company.com/team/teamone & "\"
    .AllowMultiSelect = False
    .Show

   For Each vrtSelectedItem In .SelectedItems
   Set wbSource = Workbooks.Open(vrtSelectedItem)
   Next
   End With
   dateVar = Left(wbSource.Name, 8) '<~~~~ New code
   ' Check if the first cell contains data. If not then close file
   If Range("Profile!H9") = "" Then
        ActiveWorkbook.Close savechanges:=False
        ActiveWorkbook.Saved = False
   Else
        Sheets("Profile").Activate
        Range("H9:I" & Cells(Rows.Count, "H").End(xlUp).Row).Select
        Selection.Copy
        Windows("wbName").Activate
        Sheets("Sheet1").Activate
        Range("A2").Select
        Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
        :=False, Transpose:=False
        Range("E1").Value = dateVar '<~~~ New code 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:41:30.197

从文件名中，您将使用**LEFT** FUNCTION 返回日期的 LEFT *8 个字符*：

```
dateVar=left(wbSource.name, 8) 
```

然后你可以把它放在你的单元格中：

```
rangeVar.value=dateVar 
```

希望这能让你继续前进

菲利普

# cuda - CUDA 共享内存广播和 __syncthreads 行为

> ID：15618503
> 
> 赞同：3
> 
> 时间：2013-03-25T15:21:22.043
> 
> 标签：cuda

我遇到了一个奇怪的问题，至少对我来说它看起来很奇怪，我希望有人能够对此有所了解。我有一个 CUDA 内核，它依赖于共享内存进行快速本地访问。据我所知，如果半扭曲中的所有线程都访问同一个共享内存库，那么该值将被广播到扭曲中的线程。此外，从多个 warp 访问同一个 bank 不会导致 bank 冲突，它们只会被序列化。记住这一点，我创建了一个小内核来测试它（在我的原始内核中遇到问题之后）。这是片段：

```
#define NUM_VALUES 16
#define NUM_LOOPS  1024

__global__ void shared_memory_test(float *output)
{
    // Create some shared memory
    __shared__ int dm_delays[NUM_VALUES];

    // Loop over NUM_LOOPS
    float accumulator = 0;
    for(unsigned c = 0; c < NUM_LOOPS; c++)
    {
        // Force shared memory update
        for(int d = threadIdx.x; d < NUM_VALUES; d++)
            dm_delays[d] = c * d;

        // __syncthreads();
        for(int d = 0; d < NUM_VALUES; d++)
            accumulator += dm_delays[d];
}

    // Store accumulated value to global memory
    for(unsigned d = 0; d < NUM_VALUES; d++)
        output[d] = accumulator;
} 
```

我以 16 的块尺寸运行它（半个扭曲，效率不是很高，但仅用于测试目的）。所有线程都应该寻址同一个共享内存库，所以应该没有冲突。然而，事实似乎恰恰相反。我在 Visual Studio 2010 上使用 Parallel Nsight 进行此测试。

对我来说更神秘的是，如果我取消注释`__syncthreads`外循环中的调用，那么银行冲突的数量会急剧增加。

只是一些数字给你一个想法（这是一个包含一个有 16 个线程的块的网格，所以一个半扭曲，NUM_VALUES = 16，NUM_LOOPS = 1024）：

*   没有`__syncthreads`：4个银行冲突
*   with `__syncthreads` : 4,096 银行冲突

我在 GTX 670 上运行它，设置为 compute_capability 3.0

先感谢您

更新：有人指出，`__syncthreads`由于 dm_delays 的值永远不会改变，因此编译器正在优化外部循环中没有 NUM_LOOPS 读取。现在，在这两种情况下，我都会遇到 4,096 次银行冲突，这仍然不能很好地与共享内存的广播行为配合使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:35:51.180

由于 的值`dm_delays`没有改变，这可能是编译器优化掉共享内存的 1024 次读取（如果`__syncthreads`不存在）的情况。有了`__syncthreads`那里，它可能会假设该值可以被另一个线程更改，因此它会一遍又一遍地读取该值。

# openstack - 如何在 openstack 中应用修复

> ID：15618508
> 
> 赞同：1
> 
> 时间：2013-03-25T15:21:35.633
> 
> 标签：openstack, openstack-nova

我需要应用此修复程序：[https ://review.openstack.org/#/c/22305/](https://review.openstack.org/#/c/22305/)

我将以下行复制粘贴到终端中。

```
 root@grid1:/home/username/openstackgeek# git fetch https://review.openstack.org/openstack/glance refs/changes/05/22305/1 && git checkout 
```

答案是：

```
FETCH_HEAD
    warning: no common commits
    remote: Counting objects: 15564, done
    remote: Finding sources: 100% (15564/15564)
    remote: Total 15564 (delta 9487), reused 13155 (delta 9487)
    Receiving objects: 100% (15564/15564), 6.10 MiB | 126 KiB/s, done.
    Resolving deltas: 100% (9487/9487), done.
    From https://review.openstack.org/openstack/glance
     * branch            refs/changes/05/22305/1 -> FETCH_HEAD
    Note: checking out 'FETCH_HEAD'.

    You are in 'detached HEAD' state. You can look around, make experimental
    changes and commit them, and you can discard any commits you make in this
    state without impacting any branches by performing another checkout.

    If you want to create a new branch to retain commits you create, you may
    do so (now or later) by using -b with the checkout command again. Example:

      git checkout -b new_branch_name

    HEAD is now at 12d28c3... Swallow UserWarning from glance-cache-manage 
```

是否还有其他步骤可以完成此修复或仅此而已？我正在做这个修复，因为我得到了下面的错误，我仍然得到它：

```
root@grid1:/home/username/openstackgeek# glance-cache-manage  list-cached
Cache management middleware not enabled on host 0.0.0.0 
```

我希望你们能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:13:47.940

如果您从源代码部署到 openstack 的标记版本而不是打包版本。

尝试这样的事情：

```
mkvirtualenv glance
pip install -r tools/pip-requires
python setup.py build
easy_install dist/glance-xxxxxxx.egg 
```

# c# - 如何通过鼠标单击 C# 中 listView 中的项目来填充 treeView？

> ID：15618509
> 
> 赞同：-1
> 
> 时间：2013-03-25T15:21:38.470
> 
> 标签：c#, listview, ms-access, treeview

如何通过鼠标单击 C# 中 listView 中的项目来填充 treeView？listView 中的数据是从访问数据库中读取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:18:43.110

使用 TreeView 的 BeforeExpand 事件并利用 TreeViewCancelEventArgs。

```
 e.Node.Nodes.Add(...) 
```

# tsql - SRSS 中的百分比

> ID：15618510
> 
> 赞同：0
> 
> 时间：2013-03-25T15:21:41.313
> 
> 标签：tsql, reporting-services

我对 T-SQL 和 SRSS 有以下问题。

情况：电子邮件票务系统。每个传入的邮件都有一个 ID。此外，如果用户是我们数据库中的 VIP，则每封电子邮件都会获得一个“VIP”标志。我现在要做的是获得以下 4 个值。

*   邮件总数
*   VIP邮件总数
*   总百分比/VIP

到目前为止，我有以下声明：

```
WITH T1 AS (
SELECT 
    increcsystem.registrationtime,
    count(*) AS [Total],
    increcsystem.viplevel,
FROM
    increcsystem 
WHERE
GROUP BY increcsystem.registrationtime, increcsystem.viplevel
)
Select 
    (Select count(*) From T1) AS Total,
    (Select count(*) From T1 WHERE viplevel = '100629') AS VIP_Tickets,
    registrationtime AS Date
FROM T1 
```

但我无法得到正确的百分比:(
有人能看到错误吗？

最好的问候， PhiBu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:58:33.833

这是一个应该有效的简单查询：

```
select registrationtime
  , TotalMails = count(1)
  , VIPMails = sum(case when viplevel = '100629' then 1 else 0 end)
  , VIPPercent = sum(case when viplevel = '100629' then 1.0 else 0.0 end) / count(1)
from increcsystem
group by registrationtime
order by registrationtime 
```

这是一个显示工作查询的[SQL Fiddle 演示。](http://sqlfiddle.com/#!3/08939/5)

# asp.net - 将视频放入 SQL 数据库并从 Web 应用程序中检索视频的步骤是什么？

> ID：15618512
> 
> 赞同：0
> 
> 时间：2013-03-25T15:21:47.183
> 
> 标签：asp.net, .net, vb.net, sql-server-2008, file-upload

我正在 VB.Net 中开发一个网站，允许用户提交可以包含视频的表单。在与我们的服务器管理员交谈时，文件没有写入权限，因此我被指示将任何视频放入 MS SQL 数据库。

我知道这是低效的，但他们似乎并不在意。

我*认为*任何类型的文件都可以存储在数据库中，方法是将数据库中的字段指定为 varbinary，然后在上传之前将文件转换为位串。但我不知道如何实际执行此操作，也无法从 MS 站点找到任何不只是上传图像的方向。

所以我需要知道或找到资源的是：

*   访问用户选择的文件并将其转换为可用的数据类型以粘贴在数据库中的步骤。
*   从数据库中拉回该视频并在数据库中为用户显示它所涉及的步骤。

我希望我可以简单地告诉所有用户将其上传到 Youtube，然后使用该链接，但这也不是一个选项。

如果我需要更多说明，我可以尽力而为。

谢谢！

# opengl - 尝试在大位图上使用 OpenGL 纹理压缩 - 得到白色方块

> ID：15618514
> 
> 赞同：0
> 
> 时间：2013-03-25T15:21:48.217
> 
> 标签：opengl, compression, textures

我正在尝试在大图像上使用 OpenGL 的纹理压缩。我的图像是作为学习练习的一部分，我正在屏幕上绘制的一系列 128x128 瓷砖的世界地图。我希望用户能够平移和缩放图像。这是一个相当大的 JPG（20k x 10k 像素），因此我希望压缩每个图块（我平铺图像）以降低程序的内存占用。

当我调用 glTexImage2D 时，我选择了一种任意纹理压缩格式，我的每个图块都变成了白色方块。我对此进行了更深入的研究，并认为“也许我的视频卡不支持所有这些格式。” 显卡是 IBM ThinkPad 笔记本电脑上的 Nvidia NVS 3100M，我做了一个 glGetString 来尝试查看支持的纹理压缩格式是什么，但它没有返回任何内容（GL_COMPRESSED_TEXTURE_FORMATS）。我还检查了支持哪些 GL_EXTENSIONS，它返回了“GL_WIN_swap_hint GL_EXT_bgra GL_EXT_paletted_texture”，看起来并不多。

我的程序在 C# 中使用 SharpGL 库。

我还可以检查哪些其他东西来尝试解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:23:47.570

检查那些纹理缩小过滤设置怎么样？

# java - 用于 REST 服务的 Java 中等效的异步页面

> ID：15618515
> 
> 赞同：0
> 
> 时间：2013-03-25T15:21:48.943
> 
> 标签：java, rest, asynchronous, concurrency, jersey

我们正在使用 Jersey 编写一些 REST 服务。我们的服务进行了一些底层服务调用，这些调用恰好非常慢，这导致每个请求的每个线程都保持 3-4 秒。在调查时，我遇到[了 .Net 中的异步页面，](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)它为来自线程池的每个请求分配一个线程，并在 I/O 操作开始后将线程返回到线程池，并在 I/O 操作完成时获取一个新线程以执行其余操作加工。

泽西岛有没有类似的东西，我们可以提供更多的并发连接，而​​不是为每个连接保留一个线程，直到它完成。我不想发布请求，返回 GUID，然后继续轮询来自客户端的请求状态，因为我不控制客户端代码。

谢谢，GG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:37:40.937

Take a look at the [Atmosphere's Framework](https://github.com/Atmosphere/atmosphere), specifically the atmosphere-jersey module that brings asynchronous annotation to Jersey.

Take a look at one of the [samples](https://github.com/Atmosphere/atmosphere/tree/atmosphere-1.0.x/samples), or read this [quick tutorial](https://github.com/Atmosphere/atmosphere/wiki/Getting-Started-with-The-Atmosphere-Framework-and-WebSocket). Atmosphere's Jersey does exactly what you are looking at, without requiring you to manipulate threads or anything like that. Come to our [mailing list](https://groups.google.com/group/atmosphere-framework?pli=1) in case you need more help.

(I am the Atmosphere Creator and Lead)

# highcharts - Highcharts 在顶部显示 x 轴

> ID：15618516
> 
> 赞同：9
> 
> 时间：2013-03-25T15:21:49.063
> 
> 标签：highcharts

是否可以在图表顶部而不是底部显示 x 轴和相应的标签？

反转或反转数据并不是我在设计方面所寻求的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T15:42:28.717

是的。在您的 xAxis 属性中，设置 'opposite:true'

[http://api.highcharts.com/highcharts#xAxis.opposite](http://api.highcharts.com/highcharts#xAxis.opposite)

# ios - 动画期间未调用 CALayer setPosition

> ID：15618517
> 
> 赞同：0
> 
> 时间：2013-03-25T15:21:49.763
> 
> 标签：ios, cocoa-touch, calayer, caanimation, cakeyframeanimation

我有一个习惯`CALayer`，我使用 a`CAAnimationGroup`来制作动画以跟随路径并在路径的切线处旋转：

```
 // Create the animation path
CAKeyframeAnimation *pathAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
pathAnimation.calculationMode = kCAAnimationPaced;
pathAnimation.fillMode = kCAFillModeForwards;
pathAnimation.removedOnCompletion = NO;

//Setting Endpoint of the animation
CGRect contentBounds = [self contentBounds];
self.boatLayer.bounds = contentBounds;
CGPoint endPoint = CGPointMake(contentBounds.size.width - 150, contentBounds.size.height - 150);

CGMutablePathRef curvedPath = CGPathCreateMutable();
CGPathMoveToPoint(curvedPath, NULL, startPosition.x, startPosition.y);
CGPathAddCurveToPoint(curvedPath, NULL, endPoint.x, 0, endPoint.x, 0, endPoint.x, endPoint.y);
pathAnimation.path = curvedPath;

pathAnimation.duration = 10.0;
pathAnimation.rotationMode = kCAAnimationRotateAuto;
pathAnimation.delegate = self;

// Create an animation group of all the animations
CAAnimationGroup *animationGroup = [[[CAAnimationGroup alloc] init] autorelease];
animationGroup.animations = [NSArray arrayWithObjects:pathAnimation, nil];
animationGroup.duration = 10.0;
animationGroup.removedOnCompletion = NO;

// Add the animations group to the layer (this starts the animation at the next refresh cycle)
[testLayer addAnimation:animationGroup forKey:@"animation"]; 
```

我需要能够在图层沿路径前进时跟踪图层位置和旋转的变化。我已经覆盖了`setPosition`and `setTransform`（调用`super setPosition`and `super setTranform`），然后记录了它们的值。在动画期间似乎都没有设置这些值。

如何在`CALayer`动画制作时从类本身中获取位置和旋转更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:01:13.773

## 核心动画不是这样工作的

对不起。这不是核心动画的工作方式。当您将动画添加到图层时，它不会更改该图层的模型。只有演示文稿。

当您将动画配置为在完成后不自行移除时

```
yourAnimation.fillMode = kCAFillModeForwards;
tourAnimation.removedOnCompletion = NO; 
```

您实际上导致屏幕上显示的内容与该层的模型之间存在不一致。例如，如果您有一个像这样动画的按钮，您会因为它“不再响应触摸”或更有趣的“响应来自它的'旧'位置的触摸”这一事实而感到非常惊讶/愤怒。

## 半解决方案

根据您实际需要更新的内容和频率，您可以`presentationLayer`在动画期间定期检查 的值，或者`CADisplayLink`在屏幕更改时使用 a 运行一些代码。

# mysql - 多个导出-csv而不覆盖

> ID：15618521
> 
> 赞同：-3
> 
> 时间：2013-03-25T15:21:54.317
> 
> 标签：mysql, powershell, csv, datatable

我有一个带有 2 个 export-csv 的 powershell 脚本到同一个文件。

但是第二个 export-csv 会覆盖之前的 csv 文件。

我不想要这个。

对于第二个导出 csv，我想将结果写入 excel 中的 B 列，所以我想导出到同一个 csv 文件中，但导出到第二列。

$dataSet.Tables["Query1"] 返回：

```
COLUMN1
232 
```

$dataSet.Tables["Query2"] 返回：

```
COLUMN2
289 
```

这个怎么做？

有我的脚本：

```
$mysql = New-Object MySql.Data.MySqlClient.MySqlConnection("server=$serv;port=$port;uid=$user;pwd=$password;database=$db;Pooling=False")
$mysql.Open()

$sqlquery1 = Get-Content "C:\query1.txt"
$sqlquery2 = Get-Content "C:\query2.txt"

$req = New-Object Mysql.Data.MysqlClient.MySqlCommand($sqlquery1,$mysql)
$dataAdapter = New-Object MySql.Data.MySqlClient.MySqlDataAdapter($req)
$dataSet = New-Object System.Data.DataSet
$dataAdapter.Fill($dataSet, "Query1") | Out-Null
$dataSet.Tables["Query1"] | Export-Csv -path "C:\result.csv" -NoTypeInformation

$req2 = New-Object Mysql.Data.MysqlClient.MySqlCommand($sqlquery2,$mysql)
$dataAdapter2 = New-Object MySql.Data.MySqlClient.MySqlDataAdapter($req2)
$dataSet = New-Object System.Data.DataSet
$dataAdapter2.Fill($dataSet, "Query2")  | Out-Null

$dataSet.Tables["Query2"] | Export-Csv -path "C:\result.csv" -NoTypeInformation

$mysql.Close() 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:21:40.877

正如@CB 提到的，在 PowerShell 3.0 之前`-Append`不存在。`Export-Csv`您可以在 PowerShell 2.0 及更早版本中执行以下操作：

```
... | ConvertTo-Csv -NoTypeInformation `
    | select -Skip 1 `
    | Out-File "C:\result.csv" -Append 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:31:32.373

看看[`Export-CSV`帮助](http://technet.microsoft.com/library/hh849932.aspx)-`-Append`开关就是你所追求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T10:06:34.630

这就是我解决它的方法

```
$mysql = New-Object MySql.Data.MySqlClient.MySqlConnection("server=$serv;port=$port;uid=$user;pwd=$password;database=$db;Pooling=False")
$mysql.Open()

$sqlquery1 = Get-Content "C:\query1.txt"
$sqlquery2 = Get-Content "C:\query2.txt"

$req = New-Object Mysql.Data.MysqlClient.MySqlCommand($sqlquery1,$mysql)
$dataAdapter = New-Object MySql.Data.MySqlClient.MySqlDataAdapter($req)
$dataSet = New-Object System.Data.DataSet
$dataAdapter.Fill($dataSet, "Query1") | Out-Null
$processrequest1 =  ($dataSet1.Tables["Query1"] | Format-Table -HideTableHeaders) | Out-String
$resultrequest1 = [int]$processrequest1

$req2 = New-Object Mysql.Data.MysqlClient.MySqlCommand($sqlquery2,$mysql)
$dataAdapter2 = New-Object MySql.Data.MySqlClient.MySqlDataAdapter($req2)
$dataSet = New-Object System.Data.DataSet
$dataAdapter2.Fill($dataSet, "Query2")  | Out-Null
$processrequest2 =  ($dataSet1.Tables["Query2"] | Format-Table -HideTableHeaders) | Out-String
$resultrequest2 = [int]$processrequest2

$array1 = @() 
$array1 += New-Object psobject -Property @{Column1=$resultrequest1;Column2=$resultrequest2}
$array1 |  Export-Csv -path "C:\result.csv" -NoTypeInformation -Delimiter ";"

$mysql.Close() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T19:00:51.863

简单的回答：你没有。您的查询返回不同的标题。

如果它们是相同的值但不同的列名，您应该将第二个查询的结果转换为与第一个（ column1 ）具有相同属性名称的对象，并将两个查询的结果保存在一个数组中，当两者都完成时导出。

# php - Jquery .post 然后使用 .show 和 .hide

> ID：15618523
> 
> 赞同：0
> 
> 时间：2013-03-25T15:21:54.953
> 
> 标签：php, jquery

所以我正在学习 JQuery 并且我坚持这个：

我有一个显示 HTML 表格的页面，在该表格内我想要一个可以通过下拉菜单更新的单元格，因此您单击编辑，当前值消失并出现下拉菜单，当值更改时更新数据库并显示新值。（菜单消失）

问题似乎是将 .text 和 .show 放在数据回调函数中 - 如果我提醒数据它正在从 PHP 文件返回正确的数据，并且如果我注释掉 .post 行并将 (data) 替换为("test_text") 它替换了我想要的菜单。

希望我的问题写得足够好，有意义，谢谢。

这是代码

```
$('.cat_color_hide_rep').hide();
$('.act_status_dropD').click(function () {
    var record_id = $(this).parents('tr').find('.record_id').text()
    $(this).parents('tr').find('.cat_color_hide_rep').show();
    $(this).parents('tr').find('.cat_color_show_rep').hide();
});
$('.cat_color_hide_rep').change(function () {
    var record_id = $(this).parents('tr').find('.record_id').text()
    $(this).parents('tr').find('.cat_color_hide_rep').hide();
    $.post('TEST_ajax_rep_list_status.php', {
        ID: record_id
    }, function (data) {
        $(this).parents('tr').find('.cat_color_show_rep').text(data);
        $(this).parents('tr').find('.cat_color_show_rep').show();
        alert(data); // for testing
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:26:24.083

你不能访问`$(this)`里面的`$.post`函数。

您可以在以下操作之前执行此操作`$.post`：

```
var that = this; 
```

在帖子中，执行以下操作：

```
$(that).parents('tr').find('.cat_color_show_rep').text(data);
$(that).parents('tr').find('.cat_color_show_rep').show(); 
```

这将是您的结果代码：

```
$('.cat_color_hide_rep').hide();
$('.act_status_dropD').click(function () {
    var record_id = $(this).parents('tr').find('.record_id').text()
    $(this).parents('tr').find('.cat_color_hide_rep').show();
    $(this).parents('tr').find('.cat_color_show_rep').hide();
});
$('.cat_color_hide_rep').change(function () {
    var record_id = $(this).parents('tr').find('.record_id').text()
    $(this).parents('tr').find('.cat_color_hide_rep').hide();

    /** ADDED LINE **/
    var that = this;

    $.post('TEST_ajax_rep_list_status.php', {
        ID: record_id
    }, function (data) {

        /** CHANGED LINES **/
        $(that).parents('tr').find('.cat_color_show_rep').text(data);
        $(that).parents('tr').find('.cat_color_show_rep').show();

        alert(data); // for testing
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:27:59.963

在回调函数中，`this`已改为引用XHR Object，如果要从回调中访问，则需要从函数外部`backup`引用`this`

```
var $this = $(this);
$.post('TEST_ajax_rep_list_status.php', {
        ID: record_id
    }, function (data) {
        $this.parents('tr').find('.cat_color_show_rep').text(data);
        $this.parents('tr').find('.cat_color_show_rep').show();
        alert(data); // for testing
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:32:23.027

```
//Cache your selectors!

var catColorHide = $('.cat_color_hide_rep');

catColorHide.hide();
$('.act_status_dropD').on('click', function () { //Use the .on() method and save a function call. The .click() simply calls the .on() and passes in the callback.
    var this = $(this), //If you use a selection more than once, you should cache it.
        record_id = this.parents('tr').find('.record_id').text();

    this.parents('tr').find('.cat_color_hide_rep').show();
    this.parents('tr').find('.cat_color_show_rep').hide();
});
catColorHide.on('change', function () {
    var this = $(this),
        record_id = this.parents('tr').find('.record_id').text();

    this.parents('tr').find('.cat_color_hide_rep').hide();

    $.post('TEST_ajax_rep_list_status.php', {
        ID: record_id
    }, function (data) {
        // I don't do the 'var this = $(this)' in here to fix your problem. The 'this' you see me using here refers to the element from the callback.
        this.parents('tr').find('.cat_color_show_rep').text(data);
        this.parents('tr').find('.cat_color_show_rep').show();
        console.log(data); // Use this for testing instead.
    });
}); 
```

# r - 为什么 as.matrix 在将数字转换为字符时会添加额外的空格？

> ID：15618527
> 
> 赞同：30
> 
> 时间：2013-03-25T15:22:08.890
> 
> 标签：r

如果您对具有字符和数字列的 data.frame 上的行使用 apply，则 apply 在内部使用 as.matrix 将 data.frame 转换为仅字符。但是如果数字列由不同长度的数字组成， as.matrix 会添加空格以匹配最高/“最长”的数字。

一个例子：

```
df <- data.frame(id1=c(rep("a",3)),id2=c(100,90,8), stringsAsFactors = FALSE) 
df
##   id1 id2
## 1   a 100
## 2   a  90
## 3   a   8
as.matrix(df)
##      id1 id2  
## [1,] "a" "100"
## [2,] "a" " 90"
## [3,] "a" "  8" 
```

我本来希望结果是：

```
 id1 id2  
[1,] "a" "100"
[2,] "a" "90"
[3,] "a" "8" 
```

为什么要多出空格？

在 data.frame 上使用 apply 时，它们可能会产生意想不到的结果：

```
myfunc <- function(row){
  paste(row[1], row[2], sep = "")
}
> apply(df, 1, myfunc)
[1] "a100" "a 90" "a  8"
> 
```

虽然循环给出了预期的结果。

```
> for (i in 1:nrow(df)){
  print(myfunc(df[i,]))
}
[1] "a100"
[1] "a90"
[1] "a8" 
```

和

```
> paste(df[,1], df[,2], sep = "")
[1] "a100" "a90"  "a8" 
```

是否存在使用 as.matrix 添加的额外空格有用的情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T15:34:01.493

这是因为在方法中转换非数字数据的`as.matrix.data.frame`方式。有一个简单的解决方法，如下所示。

## 细节

`?as.matrix`注意转换是通过 完成的`format()`，并且在这里添加了额外的空格。具体来说，`?as.matrix`在**详细信息**部分中有这个：

```
 ‘as.matrix’ is a generic function.  The method for data frames
 will return a character matrix if there is only atomic columns and
 any non-(numeric/logical/complex) column, applying ‘as.vector’ to
 factors and ‘format’ to other non-character columns.  Otherwise,
 the usual coercion hierarchy (logical < integer < double <
 complex) will be used, e.g., all-logical data frames will be
 coerced to a logical matrix, mixed logical-integer will give a
 integer matrix, etc. 
```

`?format`还指出

> 字符串用空格填充到最宽的显示宽度。

考虑这个说明行为的例子

```
> format(df[,2])
[1] "100" " 90" "  8"
> nchar(format(df[,2]))
[1] 3 3 3 
```

`format`不必像*以前*那样工作`trim`：

```
trim: logical; if ‘FALSE’, logical, numeric and complex values are
      right-justified to a common width: if ‘TRUE’ the leading
      blanks for justification are suppressed. 
```

例如

```
> format(df[,2], trim = TRUE)
[1] "100" "90"  "8" 
```

但是没有办法将此参数传递给`as.matrix.data.frame`方法。

## 解决方法

解决此问题的一种方法是`format()`通过`sapply`. 在那里你可以通过`trim = TRUE`

```
> sapply(df, format, trim = TRUE)
     id1 id2  
[1,] "a" "100"
[2,] "a" "90" 
[3,] "a" "8" 
```

或者，使用`vapply`我们可以说明我们期望返回的内容（这里是长度为 3 [ `nrow(df)`] 的字符向量）：

```
> vapply(df, format, FUN.VALUE = character(nrow(df)), trim = TRUE)
     id1 id2  
[1,] "a" "100"
[2,] "a" "90" 
[3,] "a" "8" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-25T15:37:41.643

似乎有点奇怪。在手册 ( `?as.matrix`) 中，它解释`format`了转换为字符矩阵所需的内容：

> 如果只有原子列和任何非（数字/逻辑/复杂）列，则数据帧的方法将返回字符矩阵，将 as.vector 应用于因子并将*格式*应用于其他非字符列。

您可以看到，如果您`format`直接调用，它会`as.matrix`执行以下操作：

```
format(df$id2)
[1] "100" " 90" "  8" 
```

您需要做的是传递`trim`参数：

```
format(df$id2,trim=TRUE)
[1] "100" "90"  "8" 
```

但是，不幸的是，该`as.matrix.data.frame`功能不允许您这样做。

```
else if (non.numeric) {
    for (j in pseq) {
        if (is.character(X[[j]])) 
            next
        xj <- X[[j]]
        miss <- is.na(xj)
        xj <- if (length(levels(xj))) 
            as.vector(xj)
        else format(xj) # This could have ... as an argument
        # else format(xj,...)
        is.na(xj) <- miss
        X[[j]] <- xj
    }
} 
```

所以，你可以修改`as.data.frame.matrix`. 但是，我认为将其包含在基础中将是一个不错的功能添加。

但是，一个快速的解决方案是简单地：

```
as.matrix(data.frame(lapply(df,as.character)))
     id1 id2  
[1,] "a" "100"
[2,] "a" "90" 
[3,] "a" "8"  
# As mentioned in the comments, this also works:
sapply(df,as.character) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T15:34:54.473

`as.matrix`内部调用`format`：

```
 > format(df$id2)
[1] "100" " 90" "  8" 
```

这就是额外空间的来源。`format`有一个额外的参数`trim`来删除那些：

```
> format(df$id2, trim = TRUE)
[1] "100" "90"  "8" 
```

但是，您不能将此参数提供给`as.matrix`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T19:40:17.937

这种行为的原因已经在之前的答案中解释过，但我想提供另一种规避方法：

```
df <- data.frame(id1=c(rep("a",3)),id2=c(100,90,8), stringsAsFactors = FALSE) 
do.call(cbind,df)
     id1 id2  
[1,] "a" "100"
[2,] "a" "90" 
[3,] "a" "8" 
```

请注意，如果使用`stringsAsFactors = TRUE`，则这不起作用，因为因子级别将转换为数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-03T02:03:55.460

另一个解决方案：如果您不介意下载软件包，trimWhiteSpace(x)（来自 limma R pckg）也可以完成这项工作。

```
source("https://bioconductor.org/biocLite.R")
biocLite("limma")
library(limma)
df <- data.frame(id1=c(rep("a",3)),id2=c(100,90,8), stringsAsFactors = FALSE) 
as.matrix(df)
 id1 id2  
[1,] "a" "100"
[2,] "a" " 90"
[3,] "a" "  8"

trimWhiteSpace(as.matrix(df))
 id1 id2  enter code here
[1,] "a" "100"
[2,] "a" "90" 
[3,] "a" "8" 
```

# postgresql - 如何从 osm2pgsql shema 获得所有道路/方式？

> ID：15618530
> 
> 赞同：1
> 
> 时间：2013-03-25T15:22:11.690
> 
> 标签：postgresql, openstreetmap

我正在尝试创建德国每条道路的列表（包含纬度、经度和街道名称）。

到目前为止，我已经在 osm2pgsql 的帮助下将德语 osm 文件导入到 postgres 数据库中。

所以我正在寻找的是一个允许我查询每条道路的查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:01:13.897

首先，我建议使用该`psql`工具。因此，假设您的数据库名为 gis，请在终端输入以下命令：

```
psql gis 
```

从 psql 工具中，您可以查询数据库，但首先了解 osm2psql 创建了哪些表是一个好主意，请输入：

```
\d 
```

这应该给你这样的输出：

```
 List of relations
 Schema |        Name        | Type  |  Owner   
--------+--------------------+-------+----------
 public | geography_columns  | view  | postgres
 public | geometry_columns   | table | gis
 public | planet_osm_line    | table | user
 public | planet_osm_nodes   | table | user
 public | planet_osm_point   | table | user
 public | planet_osm_polygon | table | user
 public | planet_osm_rels    | table | user
 public | planet_osm_roads   | table | user
 public | planet_osm_ways    | table | user
 public | spatial_ref_sys    | table | gis
(10 rows) 
```

在那里我们可以在planet_osm_roads 中看到一个看起来很可能的候选人，输入：

`\d planet_osm_roads`

这将显示道路表的结构，如下所示：

```
 Table "public.planet_osm_roads"
       Column       |   Type   | Modifiers 
--------------------+----------+-----------
 osm_id             | bigint   | 
 access             | text     | 
 addr:housename     | text     | 
 addr:housenumber   | text     | 
 addr:interpolation | text     | 
 admin_level        | text     | 
 aerialway          | text     | 
 aeroway            | text     | 
 amenity            | text     | 
 ....
 waterway           | text     | 
 wetland            | text     | 
 width              | text     | 
 wood               | text     | 
 z_order            | integer  | 
 way_area           | real     | 
 way                | geometry | 
```

从那里我们可以制定我们的查询。就像是：

```
SELECT osm_id,name,way FROM planet_osm_roads LIMIT 1; 
```

将为您提供列表中的第一条道路。[http://www.postgresql.org/docs/](http://www.postgresql.org/docs/)上的文档将帮助您解码方式几何字符串。

# javascript - 使用函数作为属性初始化对象时，参数是变量的名称而不是其值

> ID：15618531
> 
> 赞同：2
> 
> 时间：2013-03-25T15:22:12.910
> 
> 标签：javascript, object, function-parameter

我正在尝试初始化一个对象的属性，一个是函数。如果我对其进行硬编码，这将有效：

```
subitems = {
   "1" : { "label": "Link1",
           "action": function(obj) {showURL(obj,"http://link1.com")}
   },
   "2" : { "label": "Link2",
           "action": function(obj) {showURL(obj,"http://link2.com")}
   }
} 
```

或者如果我尝试使用变量中的列表动态地执行它

```
subitemdata = [['Link1','http://link1.com'],['Link2','http://link2.com']]; 
```

我用它来填充标签和动作属性并生成对象

```
subitems = {};
for (i=0; i<subitemdata.length;i++) {
    subitems[i] = {};
    subitems[i].label = subitemdata[i][0];
    subitems[i].action = function(obj) {showURL(obj,subitemdata[i][1])};
} 
```

我明白了

```
subitems = {
     0 : { label: "Link1",
           action: (function(obj) {showURL(obj,subitemdata[i][1]);})
     },
     1 : { label: "Link2",
           action: (function(obj) {showURL(obj,subitemdata[i][1]);})
     }
} 
```

如何编写代码，以便在“action”属性中，字符串“subitemdata[i][1]”不会出现在函数“showURL”的参数列表中，而是“subitemdata”列表中的实际值[http://link1.com](http://link1.com) ' 和 ' [http://link2.com](http://link2.com) ' 呢？

使用动态方式初始化对象时，我无法重新创建硬编码的对象版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:32:03.520

```
subitem[i].action = (function makeConstantStr(str){
    //this takes the array, gets the value and returns a new function with
    //the current value in the array as the 2nd argument of the innermost function
    return function(obj) {showURL(obj,str)};
}(subitemdata[i][1])); 
```

如果你将它包装在一个立即调用的函数中并传入值，它应该立即评估它，并且参数将设置为数组内容的值，而不是数组引用本身。

只是为了确保您清楚，只要您不修改子项数据，数组引用将在您使用它时返回相同的内容。除非您想在特定时刻保持数组的值，否则您不需要这样做。

# java - Android 为 Intent.createChooser() 指定应用程序列表

> ID：15618535
> 
> 赞同：0
> 
> 时间：2013-03-25T15:22:36.673
> 
> 标签：java, android, android-intent

我对 Intent.createChooser() 方法很好奇。我已经做了一些研究，但无法找到我正在寻找的具体答案。

我有一个要求，根据用户选择的应用程序（电子邮件或文本），我要以不同的方式格式化文本。我对显示其他应用程序的选择器没问题（我不想删除用户的选项），但是我的应用程序有没有办法知道用户选择了哪个外部应用程序？从那里我可能会重载初始 Intent 并发送格式正确的数据。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:25:58.733

> 我对显示其他应用程序的选择器没问题（我不想删除用户的选项），但是我的应用程序有没有办法知道用户选择了哪个外部应用程序？

不，对不起。

为此，您需要创建自己的选择器对话框，使用`PackageManager`和`queryIntentActivities()`。根据用户在该对话框中选择的内容，您可以在 上设置适当的附加项`Intent`，以及选定的`ComponentName`，并将结果`Intent`与​​ 一起使用`startActivity()`。

（其中一天，我会写其中一个对话框，因为这个问题出现了很多......）

# android - 如何将覆盖视图放在操作栏上 Sherlock

> ID：15618537
> 
> 赞同：9
> 
> 时间：2013-03-25T15:22:47.863
> 
> 标签：android, overlay, actionbarsherlock, menuitem

我想在操作栏上设置一些视图，以显示教程文本（如单击此处并发送电子邮件...）。这可能吗？我问是因为我知道操作栏使用布局的顶部空间，而片段或活动使用剩余空间。
我的第二个问题是如何在操作栏上显示所有操作项。我使用 ActionBarSherlock 库，我发现我还有空间容纳更多操作项，但它没有显示在操作栏上。我在项目的 xml ifRoom 选项中设置...

谢谢！！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-26T13:22:16.177

有多种方法可以实现类似教程的叠加。可能最简单的一种是使用专门准备的具有透明背景且没有暗淡背景的[Dialog窗口。](http://developer.android.com/guide/topics/ui/dialogs.html)

## 使用自定义`Dialog`教程覆盖

首先我们要准备内容`Dialog`。`TextView`在这个例子中，里面会有一个`RelativeLayout`最有用的布局。

文件内容`info_overlay.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@android:color/darker_gray"
        android:padding="3dp"
        android:text="TextView"
        android:textColor="@android:color/white" />

</RelativeLayout> 
```

现在，我们可以使用这个布局来创建我们的`Dialog`：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Dialog overlayInfo = new Dialog(MainActivity.this);
        // Making sure there's no title.
        overlayInfo.requestWindowFeature(Window.FEATURE_NO_TITLE);
        // Making dialog content transparent.
        overlayInfo.getWindow().setBackgroundDrawable(
                new ColorDrawable(Color.TRANSPARENT));
        // Removing window dim normally visible when dialog are shown.
        overlayInfo.getWindow().clearFlags(
                WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        // Setting position of content, relative to window.
        WindowManager.LayoutParams params = overlayInfo.getWindow().getAttributes();
        params.gravity = Gravity.TOP | Gravity.LEFT;
        params.x = 100;
        params.y = 20;
        // If user taps anywhere on the screen, dialog will be cancelled.
        overlayInfo.setCancelable(true);
        // Setting the content using prepared XML layout file.
        overlayInfo.setContentView(R.layout.info_overlay);
        overlayInfo.show();
    } 
```

### 结果

以下是上述解决方案工作的屏幕截图。注意`TextView`结束`ActionBar`。

![在此处输入图像描述](../Images/823afc8a7eb3650e2ee1038e1d5c04e1.png)

### 关于解决方案的一些说明

*   如果您有一个专门的按钮来关闭教程，您可以使用它`setCancelable(false)`来避免意外关闭教程。
*   此解决方案适用于任何主题与任何操作栏解决方案（操作系统提供的、*Android 支持库*或*ActionBar Sherlock*）

## 其他解决方案/帮手

看看[Showcase View 库](https://github.com/Espiandev/ShowcaseView)，因为它专注于以简单的方式创建类似教程的屏幕。但是我不确定它是否可以轻松覆盖操作栏。

# java - Java 在数据存在时更新，如果不存在则插入

> ID：15618539
> 
> 赞同：1
> 
> 时间：2013-03-25T15:22:57.447
> 
> 标签：java, sql, sql-update, prepared-statement, sql-insert

如果数据已经存在，我想更新数据，如果不存在，我想插入数据。我是否必须将这些操作放入单独的方法中，或者是否可以选择在一个数据库调用中执行此操作？

```
public boolean insert_tvShow(TvShow tvShow) {

    java.util.Date myDate = new java.util.Date(tvShow.getReleaseDate());
    boolean success = false;

    try {
        String sqlQuery = "UPDATE tvshows " +
                          "SET title = ?, plot = ?, poster = ?, imdb_rating = ?, imdb_url = ?, imdb_id = ?, release_date = ? WHERE title='?' " +
                          "IF @@ROWCOUNT=0 " +
                          "INSERT INTO tvshows VALUES (title, plot, poster, imdb_rating, imdb_url, imdb_id, release_date) " +
                          "VALUES(?, ?, ?, ?, ?, ?, ?)";
        PreparedStatement ps = connection.prepareStatement(sqlQuery);
        ps.setString(1, tvShow.getTitle()); 
        ps.setString(2, tvShow.getPlot());
        ps.setString(3, tvShow.getPoster());
        ps.setDouble(4, tvShow.getImdb_Rating()); 
        ps.setString(5, tvShow.getImdb_url()); 
        ps.setString(6, tvShow.getImdb_id());
        ps.setDate(7, new java.sql.Date(myDate.getTime()));
        ps.setString(8, tvShow.getTitle());
        ps.setString(9, tvShow.getTitle()); 
        ps.setString(10, tvShow.getPlot());
        ps.setString(11, tvShow.getPoster());
        ps.setDouble(12, tvShow.getImdb_Rating()); 
        ps.setString(13, tvShow.getImdb_url()); 
        ps.setString(14, tvShow.getImdb_id());
        ps.setDate(15, new java.sql.Date(myDate.getTime()));
        ps.executeUpdate();
        success = true;
    } catch(Exception e) {
        //TODO logging
    } finally {
        try {
            connection.close();
        } catch (SQLException e) {}
    }
    return success;
} 
```

# c# - 当两者完全相同时，从对象到类的转换会失败吗？

> ID：15618541
> 
> 赞同：0
> 
> 时间：2013-03-25T15:22:58.667
> 
> 标签：c#

如果我有以下代码

```
object o = new Building(4, "something"); 
```

我尝试以下

```
if(o.GetType() == typeof(Building))
    Building buildingCast = o as Building; 
```

会出什么问题？我想确保`buildingCast`有问题的演员阵容永远不会为空。有什么办法可以使演员失败吗？甚至一些晦涩难懂的东西？

我问的原因是我正在清理一个测试项目，并且我正在尝试清除冗余代码。有针对`buildingCast`可能为空的检查...

```
if(buildingCast == null)
    etc 
```

...但是我们无法访问 if 语句中的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:34:06.047

不要为了重构而重构。如果您连续有以下几行代码

```
object o = new Building(4, "something");
Building c = o as Building; 
```

然后无论如何将其更改为

```
Building o = new Building(4, "something"); 
```

但如果你有类似的东西

```
public void SomeMethod(object o)
{
   //you absolutely need a sanity check here
   Building c = o as Building;
   if( c == null )
      {
         //throw exception perhaps
      }

   //this can also be rewritten as
   Building b = null;
   if(o != null && o is Building)
          b = (Building)o;
   else
       //throw exception or log..etc

} 
```

如果您尝试以下操作

```
if(o.GetType == typeof(Building))
    Building buildingCast = o as Building; 
```

那么你正在创建更多的冗余，事实上这会使代码的可读性降低很多，你必须做类似的事情

```
Building buildingCast = null; //to be able to use outside the if
if(o.GetType() == typeof(Building))
        buildingCast = o as Building;

//you still end up with a null here if cast fails.
//this is the EXACT procedure of the 'as' operator anyway
//which does 
Building buildingCast = o is Building ? (Building)o : (Building)null; 
```

..当然，如果您绝对肯定，通过事先使用检查，类型是相同的，那么演员将永远不会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:26:47.260

`Building buildingCast = o as Building;`

通常，您在转换类时会看到这种代码，`o`但不知道它是否是正确的类型（并且能够转换为`Building`）或是否`o`为空。

然后，通常你会看到一个空检查后缀。

如果你在上面看到这个：

```
Building b  = new Building(4, "something");
object o = new Building(4, "something"); 
```

然后，`as`是多余的。

但是，如果`o`是从系统的其他部分传入，您永远无法确定，因此需要进行检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T15:28:22.027

如果 的 实际类型`o`可分配给`Building`，那么这将起作用。如果实际类型不兼容，您将得到`null`结果。因此，如果`o`来自上述行以外的任何地方，您应该将支票留在那里。

如果您 100% 确定`o`是 type `Building`，则将其声明为`Building`. 如果这不可能，那么您需要将检查留在代码中并尽早将其转换为一个。例如，假设您通过反射实例化它，并且您知道类型，那么您应该立即转换它。

顺便说一句，cast via`as`已经为您执行了类型检查。如果类型不适用，则返回`null`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T16:09:01.703

我通读了答案，似乎没有人真正指出这`as`不是演员表，请查看[http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx](http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx)了解更多信息。

引用重要部分：

> 请注意，as 运算符仅执行引用转换、可为空的转换和装箱转换。as 运算符不能执行其他转换，例如用户定义的转换，而应使用强制转换表达式来执行。

放入一些描述性（但不是 100% 正确）的术语，这意味着`as`尝试更改指针的类型并查看是否可以将其引用为另一种类型，但它永远不会尝试调用强制转换运算符，隐含与否。从低层次的角度来看是巨大的差异。

我还想建议你看看`is`这里[http://msdn.microsoft.com/en-us/library/scekt9xw(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/scekt9xw(v=vs.80).aspx)这基本上是一个类`obj.GetType() == typeof(sometype)`固醇（和你摆脱存在的问题`obj`）`null`。

通常，您`as`在“转换”为界面时使用。`as`不允许强制，因此对象必须是正确类型的实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T15:32:49.723

这三行代码永远不会失败。

但是，在某些情况下，由于程序中其他地方的错误或有人错误地调用函数，可能会使用不期望的参数调用函数。

因此，检查以确保您得到了预期的结果总是好的。

# php - 将变量传递给远程 php 文件以获取 JSON 数据

> ID：15618544
> 
> 赞同：1
> 
> 时间：2013-03-25T15:23:05.300
> 
> 标签：php, javascript, database, titanium

我正在使用 Titanium Studio 构建一个移动应用程序，构建：3.1.1.201303242433，CLI 版本 3.0.24，Titanium SDK 版本 3.0.2.GA，iOS SDK：6.1，iPad 模拟器：MAC OS X10.7.5 上的 6.1。我正在尝试从远程数据库中检索 JSON 数据。数据库有带和不带“sectionid”的记录（sectionid 是数字 1-12）。我想用传递给我的查询的“sectionid”检索记录。以下是我要遵循的步骤：首先，我将“sectionid”分配给 tableViewRow，如下所示：

```
leftImage:'images/advertising.png', 
            title:'Advertising',
            sectionid: '1', 
            color:'#000',
            font: {fontWeight:'bold', fontSize:16},
            height:'44dp', 
            hasChild:true, 
            test:'testcatmenu.js'}, 
```

然后我将 sectionid 传递给另一个文件，如下所示：

```
var section = e.rowData.sectionid;
win.section = section; 
```

在下一个文件中，我得到 sectionid 并将其传递给远程 php 文件，如下所示：

```
var section = Ti.UI.currentWindow.section;
var url = "http://mydomain.com/myfile.php?sectionid='section'"; 
```

最后，在 php 文件中，我 $_GET sectionid 并在我的 MySQL 查询中使用它，如下所示：

```
$result = mysql_query("SELECT name FROM `cms_client` WHERE sectionid = '" .     mysql_real_escape_string($_GET['section']) ."'") or die('Could not query'); 
```

php 文件正在返回没有 sectionid 的记录，所以我在某处丢失了 sectionid？我不知道我的代码语法哪里错了，有人会这么好心地向我展示我需要的正确语法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:35:56.623

在 php 中，您使用的是变量 $_GET['section']，但您传入的 GET 变量称为 sectionid (?sectionid=)。所以要么都更改为section，要么都更改为sectionid。

此外，假设

```
var url = "http://mydomain.com/myfile.php?sectionid='section'"; 
```

是 javascript 那么它应该是这样的：

```
var url = "http://mydomain.com/myfile.php?sectionid="+section; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:25:58.673

```
var url = "http://mydomain.com/myfile.php?sectionid='section'"; 
```

将其更改为

```
var url = "http://mydomain.com/myfile.php?sectionid="+section; 
```

Javascript 允许您使用 + variableName 将变量添加到字符串

喜欢

```
var variableT = "foobar";
var strNew = "This string contains the word: "+variableT+" and it works!"; 
```

# java - 存根 FileOutputStream 时，Powermockito 引发 OutOfMemory 异常

> ID：15618554
> 
> 赞同：0
> 
> 时间：2013-03-25T15:23:50.167
> 
> 标签：java, powermock

我不确定为什么会发生这种情况，但是当我运行测试代码时，我得到了 OutOfMemoryException。

测试：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(UploadBulkRefundAction.class)
public class UploadBulkRefundActionTest {

    @Mock
    private File file;
    @Mock
    private BulkRefundsForm bulkRefundsForm;
    @Mock
    private FormFile spreadsheetFile;
    @Mock
    private InputStream is;
    @Mock
    private FileOutputStream fileOutputStream;

    @Before
    public void setup() throws Exception {
        PowerMockito.mockStatic(File.class);
        PowerMockito.mockStatic(FileOutputStream.class);
        PowerMockito.mockStatic(IOUtils.class);
        PowerMockito.whenNew(FileOutputStream.class).withArguments(file).thenReturn(fileOutputStream);
    }

    @Test
    public void shouldStoreFileIntoTempFile() throws Exception {
        when(File.createTempFile("tomcat-","bulkrefunds.xlsx")).thenReturn(file);
        when(bulkRefundsForm.getSpreadsheetFile()).thenReturn(spreadsheetFile);
        when(spreadsheetFile.getInputStream()).thenReturn(is);
        UploadBulkRefundAction action=new UploadBulkRefundAction();

        action.execute(null, bulkRefundsForm, null, null);

        verify(spreadsheetFile).getInputStream();
        verifyNew(FileOutputStream.class).withArguments(file);

        verifyStatic();
        File.createTempFile("tomcat-", "bulkrefunds.xlsx");

        verifyStatic();
        IOUtils.copy(is, fileOutputStream);
    }

} 
```

被测类：

```
public class UploadBulkRefundAction extends MossoAction {
    @Override
public ActionForward execute(ActionMapping mapping, ActionForm f, HttpServletRequest request, HttpServletResponse response) throws     Exception {
        BulkRefundsForm bulkRefundsForm=(BulkRefundsForm)f;
        File tempFile = storeExcelSheetInATempFile(bulkRefundsForm);
        return null;
    }

    private File storeExcelSheetInATempFile(BulkRefundsForm bulkRefundsForm) throws IOException {
        InputStream inputStream=null;
        FileOutputStream outputStream=null;
        try{
            File tempFile = File.createTempFile("tomcat-", "bulkrefunds.xlsx");
            inputStream = bulkRefundsForm.getSpreadsheetFile().getInputStream();
            outputStream = new FileOutputStream(tempFile);
            IOUtils.copy(inputStream, outputStream);
            return tempFile;
        }finally{
            IOUtils.closeQuietly(inputStream);
            IOUtils.closeQuietly(outputStream);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:30:21.123

[IOUtils.copy](http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/IOUtils.java#IOUtils.copy%28java.io.InputStream,java.io.OutputStream%29)的源代码包含一个循环，如果您`InputStream`未能从其`read()`方法返回值“-1”，该循环将永远不会终止。

我猜想你的模拟默认情况下会从`int`返回类型的方法返回“0”，所以你的测试代码进入一个无限循环，无限循环地将 4k 大小的字节数组写入`OutputStream`.

# registry - 使用“Reg Query”获取安装的软件名称和版本

> ID：15618556
> 
> 赞同：1
> 
> 时间：2013-03-25T15:23:58.553
> 
> 标签：registry

谁能帮我通过“Reg Query”找出机器所有已安装软件的显示名称和版本？

如果我们将“/s”选项与“reg query”一起使用，那么我们将递归获取所有子键和值名称，但我只需要显示每个软件的名称和显示版本。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:35:45.327

执行以下命令“REG QUERY HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall /s”

使用“HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall\”拆分上述命令的输出以获取字符串数组。现在解析软件显示名称和版本的每个字符串。

获取显示名称和版本的正则表达式是：

显示名称："(.*)" + "显示名称" + @"\s+REG_SZ\s+(.*)\s"

显示版本：“(.*)”+“显示版本”+@“\s+REG_SZ\s+(.*)\s”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-03T07:49:03.023

这是一篇旧文章，但这些命令可以为您提供所需的输出。显示名称和版本不能一次获取，但可以一一获取

```
Reg Query HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall /S /v DisplayName

Reg Query HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall /S /v DisplayVersion 
```

另一种方法是将结果与 Find 命令结合起来进行过滤。

# odbc - 配置 odbc.ini 文件

> ID：15618563
> 
> 赞同：0
> 
> 时间：2013-03-25T15:24:15.163
> 
> 标签：odbc

我正在使用开源 odbc 驱动程序连接我的程序。我必须使用 odbc.ini 文件，但问题是我的驱动程序无法读取我的文件的用户定义选项。这是我的疑问。1）我们可以修改odbc.ini文件吗？2) 我们可以从 odbc.ini 中读取哪些内容

在此先感谢，维韦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:12:24.050

不确定您是否说问题是您正在编写的驱动程序无法读取 odbc.ini 文件。读取ini文件的官方方法是SQLGetPrivateProfileString()。

当您说“我们可以修改文件”时，您的意思是您没有权限，还是您不知道如何使用vi？

# php - 如何在不使用 php 再次运行的情况下从 mysql 查询中获取相同的数据？

> ID：15618568
> 
> 赞同：-2
> 
> 时间：2013-03-25T15:24:42.777
> 
> 标签：php, mysql, pdo

有人可以帮我在 php 中找到允许我保存 mysql 查询结果并再次使用它的命令。当我说“保存”时，我并不是说真的将它保存在变量或其他东西中，我也不想再次运行查询，只需再次使用查询的结果。我知道这个命令存在于某处，但不幸的是我找不到它..

也许有人知道那个特定的命令？请帮助我。

编辑：我找到了我寻找的命令：mysql_data_seek()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:13:37.817

您必须将其存储在变量中。就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:46:04.950

从这里[http://php.net/manual/en/function.mysql-data-seek.php](http://php.net/manual/en/function.mysql-data-seek.php)

您需要将指针移动到记录集的开头，然后才能再次获取所有数据。使用 mysql_data_seek($result,0);

# c# - C# DateTime 对象 + 存储过程

> ID：15618572
> 
> 赞同：0
> 
> 时间：2013-03-25T15:24:51.407
> 
> 标签：c#, asp.net, sql, sql-server, datetime

我正在使用代码从我的代码中调用存储过程`SqlCommand`，其中一些参数是`DateTime`类型的，当从 Management Studio 调用过程时，我使用以下格式`yyyy-MM-dd`，`2011-01-01`并相应地返回结果。

在我的 C# 代码中，我正在创建如下`DateTime`对象：

```
DateTime dateFrom = new DateTime(2011,01,01); 
```

当我运行应用程序时，日期被完全忽略，所有数据都被返回。在相应的调试之后，我注意到`DateTime`对象的格式是：`{01/01/2011 00:00:00}`所以这可能是导致问题的原因。

参数被添加到`SqlCommand`这样的：

```
cmd.Parameters.AddWithValue("@DateFrom", SqlDbType.DateTime); 
```

请问有什么想法吗？

复制代码：

```
 using (SqlConnection conn = new SqlConnection(connectionString))
 {
    DateTime dateFrom = new DateTime(2011,01,01);
        DateTime dateTo = new DateTime(2011, 01, 31);

    SqlCommand cmd = new SqlCommand(strStoredProcName, conn);
    cmd.CommandType = System.Data.CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@DateFrom", SqlDbType.DateTime);
        cmd.Parameters.AddWithValue("@DateTo", SqlDbType.DateTime);

    cmd.Parameters["@DateFrom"].Value = dateFrom;
        cmd.Parameters["@DateTo"].Value = dateTo;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:30:04.510

对于日期时间数据类型，从 C# 到 SQL 应该没有格式问题。

可能有两件事导致此问题：

1.  据我记得，您不需要为参数名称添加@

    `cmd.Parameters.AddWithValue("DateFrom", SqlDbType.DateTime);`

2.  AddWithValue 的重载是字符串参数名称和对象值。您已将 SqlDbType.DateTime 作为值传递。改为传递您的 DateTime 变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:31:20.040

您有两个选项可以选择`Add`或`AddWithValue`使用以下格式：

1)`cmd.Parameters.Add("@DateFrom", SqlDbType.DateTime).Value = dateFrom;`

2) `cmd.Parameters.AddWithValue("@DateFrom", dateFrom);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T07:01:06.360

如果存储过程中的 datetime 参数是 DateTime 类型，则本质上不需要将该值作为 datetime 传递。您可以传递简单的字符串值，如下所示：

```
cmd.Parameters.Add("@DateFrom", SqlDbType.DateTime).Value = "23-03-2013"; 
```

# c# - “以管理员身份运行”时，实例化 COM 组件失败并显示“未注册类”

> ID：15618576
> 
> 赞同：5
> 
> 时间：2013-03-25T15:25:00.653
> 
> 标签：c#, com, com-interop

实例化 COM 互操作对象时：

```
var comObj = new ComComponentClass(); 
```

我得到`COMException`：

```
Retrieving the COM class factory for component with CLSID 
{C343ED84-A129-11D3-B799-0060B0F159EF} failed due to the following error: 
80040154 Class not registered 
(Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

**当我使用Run as Administrator**启动我的应用程序时，我**只会**收到此错误。当我正常运行时，不会发生错误。

 **笔记：

*   该应用程序是 64 位应用程序。
*   COM 组件是 64 位 dll 中的 inproc 服务器。

关于我应该从哪里开始调查为什么会出现这种差异的任何想法？

*我试过的：*

我使用 Procmon 来查看它检查的注册表项。

*   在这两种情况下，通过检查密钥来定位适当的 dll`HKCU\Software\Classes\CLSID\{C343ED84-A129-11d3-B799-0060B0F159EF}\InprocServer32`
*   在这两种情况下，它都会查询密钥`HKCR\CLSID\{C343ED84-A129-11D3-B799-0060B0F159EF}`并返回`NAME NOT FOUND`。我觉得很奇怪（因为我可以使用`regedit.exe`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T18:53:03.013

您在没有管理权限的情况下为您的本地用户帐户注册了对象，而不是从管理过程中这样做。因此，COM 组件在注册表的用户特定区域下注册（正如您自己指出的那样： HKC* *U* * ）。

当进程在没有管理权限的情况下运行时，会显示 HKCR 注册表的合并视图，其中包括所有 HKCU\Software\Classes 条目以及 HKLM\Software\Classes 中尚未在 HKCU\Software\Classes 中覆盖的任何内容. 当进程以管理员身份运行时，注册表仅显示 HKLM\Software\Classes 条目。

有关详细信息，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms724498 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724498(v=vs.85).aspx)

奇怪的是，RegSvr32 不会在 HKCU\Classes 键下注册。如果您在没有管理权限的情况下运行它，它只会失败（在 Windows 7 中检查以确保）。COM 组件是如何注册的？**

# ios - GCD串行队列似乎没有串行执行

> ID：15618579
> 
> 赞同：7
> 
> 时间：2013-03-25T15:25:06.170
> 
> 标签：ios, queue, grand-central-dispatch, serial-processing

我有一个方法，有时可以在我的代码中调用。下面是一个非常基本的示例，因为代码处理了 iphone 照片库中的图像和文件，并在使用该方法完成时将它们标记为已处理。

```
@property (nonatomic, assign) dispatch_queue_t serialQueue;

....

-(void)processImages
{
    dispatch_async(self.serialQueue, ^{
        //block to process images
        NSLog(@"In processImages");

        ....

        NSLog(@"Done with processImages");
    });
} 
```

我认为每次调用此方法时，我都会得到以下输出......“在 processImages”“使用 processImages 完成”“在 processImages”“使用 processImages 完成”等......

但我总是得到

“在 processImages” “在 processImages” “用 processImages 完成” “用 processImages 完成” 等等......

我认为串行队列会等到第一个块完成，然后开始。对我来说，它似乎正在启动该方法，然后再次调用它并在第一次调用完成之前启动，创建通常不会被处理的图像副本，因为如果它真的连续执行，该方法会知道它们已经被处理了。也许我对串行队列的理解并不具体。有输入吗？谢谢你。

编辑：下面的更多上下文，这就是块中发生的事情......这会导致问题吗？

```
@property (nonatomic, assign) dispatch_queue_t serialQueue;

....

-(void)processImages
{
    dispatch_async(self.serialQueue, ^{
        //library is a reference to ALAssetsLibrary object 

        [library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop)
        {
            [group enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop)
            {
             ....
             //Process the photos here
            }];
        failureBlock:^(NSError *error) { NSLog(@"Error loading images from library");
        }];

    });
}

-(id)init
{
    self = [super init];
    if(self)
    {
        _serialQueue = dispatch_queue_create("com.image.queue",NULL);
    }
    return self;
} 
```

这个对象只创建一次，据我所知，永远不能根据我的代码再次创建......我将运行测试以确保。

更新 2：我认为正在发生的事情，如果您同意/不同意，请对此发表评论......

显然，我的主要问题是，这块代码似乎正在同时执行，创建重复条目（两次导入同一张照片），而如果它是串行运行的，通常不会这样做。处理照片时，会对其应用“脏”位，以确保下次调用该方法时会跳过该图像，但这不会发生，并且某些图像会被处理两次。这可能是因为我使用 enumerategroupswithtypes: 在那个 serialQueue 中枚举第二个队列中的对象吗？

1.  调用 processImages
2.  枚举对象
3.  立即从 enumerateObjects 返回，因为它本身是异步的
4.  结束对 processImages 的调用

processImages 并没有真正完成，因为 enumerategroups 可能仍在运行，但队列可能已经完成，因为它在 enumerategroups 完成工作之前到达块的末尾。这对我来说似乎是一种可能性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:01:59.743

串行队列绝对会串行执行。但是，不能保证它们在同一线程上执行。

假设您使用相同的串行队列，问题是当从不同线程同时调用时，不能保证 NSLog 以正确的顺序输出结果。

这是一个例子：

1.  SQ 在线程 X 上运行，发送“In processImages”
2.  日志打印“在进程中”
3.  线程 X 上的 SQ，发送“Done with processImages”
4.  SQ 在线程 Y 上运行，发送“In processImages”
5.  日志打印“essImages\n”

5.之后，NSLog不一定知道打印哪个，3.还是4。

如果您绝对需要按时间排序的日志记录，则需要一个专用的日志记录队列。在实践中，我只使用主队列没有问题：

```
dispatch_async(dispatch_get_main_queue(), ^{
    NSLog(@"whatever");
}); 
```

如果所有的 NSlog 调用都在同一个队列上，你就不应该有这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:41:37.960

`enumerateGroupsWithTypes:usingBlock:failureBlock:`它在另一个线程上异步工作，并在完成时调用传入的块（我认为在主线程上）。从另一个角度来看，如果它在方法调用完成时同步完成了所有操作，则它可以只返回组的枚举器对象，例如，对于更简单的 API。

从文档中：

> 此方法是异步的。枚举组时，可能会要求用户确认应用程序对数据的访问；但是，该方法会立即返回。您应该对 enumerationBlock 中的资产执行任何您想要的工作。

我不确定您为什么要尝试使用串行队列来完成，但如果您只是想防止同时访问，那么您可以在某处添加一个变量来跟踪我们当前是否正在枚举并检查首先，如果您不必担心同步问题。（如果你这样做了，也许你应该考虑使用 GCD 组，但在这种情况下它可能有点矫枉过正。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T16:50:03.190

如果问题是“串行队列可以异步执行任务吗？” 那么答案是否定的。如果您认为可以，您应该确保所有任务都在同一个队列上真正执行。您可以在块中添加以下行并比较输出：

```
dispatch_async(self.serialQueue, ^{
    NSLog(@"current queue:%p current thread:%@",dispatch_get_current_queue(),[NSThread currentThread]); 
```

确保将 NSLog 写入在队列上执行的块中，而不是在 enumerateGroupsWithTypes:usingBlock:failureBlock: 中：您也可以尝试像这样创建队列

```
dispatch_queue_create("label", DISPATCH_QUEUE_SERIAL); 
```

但我认为这不会改变任何事情

编辑：顺便说一句，方法

```
enumerateGroupsWithTypes:usingBlock:failureBlock: 
```

是异步的，为什么要在另一个队列上调用呢？

更新2：我可以建议这样的事情：

```
dispatch_async(queue, ^{
    NSLog(@"queue");

    pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER, *pmutex = &mutex;
    pthread_mutex_lock(pmutex);

    ALAssetsLibraryGroupsEnumerationResultsBlock listGroupBlock = ^(ALAssetsGroup *group, BOOL *stop) {
        NSLog(@"block");
        if (group) {
            [groups addObject:group];
        } else {

            [self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
            dispatch_async(dispatch_get_current_queue(), ^{
                pthread_mutex_unlock(pmutex);
            });
        }
        NSLog(@"block end");
    };

    [assetsLibrary enumerateGroupsWithTypes:groupTypes usingBlock:listGroupBlock failureBlock:failureBlock];
    pthread_mutex_lock(pmutex);
    pthread_mutex_unlock(pmutex);
    pthread_mutex_destroy(pmutex);
    NSLog(@"queue end");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-29T14:21:50.690

使用 Swift 和信号量来说明一种序列化方法：

给定：一个具有异步“运行”方法的类，该方法将一次在多个对象上运行，目标是每个对象在完成之前不会运行。

问题是 run 方法分配了大量内存并使用大量系统资源，如果一次运行太多，可能会导致内存压力以及其他问题。

所以想法是：如果使用串行队列，那么一次只会运行一个，一个接一个。

通过类在全局空间创建串行队列：

```
let serialGeneratorQueue: DispatchQueue = DispatchQueue(label: "com.limit-point.serialGeneratorQueue", autoreleaseFrequency: DispatchQueue.AutoreleaseFrequency.workItem)

class Generator {

    func run() {
         asynchronous_method()
    }

    func start() {

        serialGeneratorQueue.async {
            self.run()
        }
    }

    func completed() {
       // to be called by the asynchronous_method() when done
    }
} 
```

将在串行队列上处理将为其创建和运行许多对象的此类的“运行”方法：

```
serialGeneratorQueue.async {
    self.run()
} 
```

在这种情况下，autoreleaseFrequency 是 .workItem，用于在每次运行后清理内存。

run 方法有一些一般的形式：

```
func run() {
   asynchronous_method()
} 
```

这样做的问题：run方法在asynchronous_method完成之前退出，队列中的下一个run方法将运行等等。所以目标没有实现，因为每个asynchronous_method都是并行运行的，毕竟不是串行的。

使用信号量来修复。在类中声明

```
let running = DispatchSemaphore(value: 0) 
```

现在 asynchronous_method 完成它调用“完成”方法：

```
func completed() {
   // some cleanup work etc.
} 
```

通过将 'running.wait()' 添加到 'run' 方法，信号量可用于序列化 asynchronous_method 的链：

```
func run() {
    asynchronous_method()

    running.wait() 
} 
```

然后在 completed() 方法中添加 'running.signal()'</p>

```
func completed() {
   // some cleanup work etc.

    running.signal()
} 
```

'run' 中的 running.wait() 将阻止它退出，直到使用 running.signal() 完成方法发出信号，这反过来又阻止串行队列启动队列中的下一个运行方法。这样，异步方法链确实会串行运行。

所以现在这个类的形式是：

```
class Generator {

    let running = DispatchSemaphore(value: 0)

    func run() {
         asynchronous_method()

         running.wait() 
    }

    func start() {

        serialGeneratorQueue.async {
            self.run()
        }
    }

    func completed() {
       // to be called by the asynchronous_method() when done

       running.signal()
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-05T16:42:46.977

> 我认为串行队列会等待 [直到] 第一个块完成......

确实如此。但是您的第一个块只是调用`enumerateGroupsWithTypes`并且[文档](https://developer.apple.com/documentation/assetslibrary/alassetslibrary/1617900-enumerategroupswithtypes?language=occ)警告我们该方法异步运行：

> 此方法是异步的。枚举组时，可能会要求用户确认应用程序对数据的访问；但是，该方法会立即返回。

（FWIW，每当您看到具有块/闭包参数的方法时，这是一个危险信号，表明该方法可能正在异步执行某些操作。您可以随时参考相关方法的文档并确认，就像我们在这里一样。）

所以，底线，你的队列*是*串行的，但它只是顺序启动一系列异步任务，但显然没有等待那些异步任务完成，违背了串行队列的意图。

所以，如果你真的需要让每个任务等待前面的异步任务，这个问题有很多传统的解决方案：

1.  使用递归模式。即，编写一个`processImage`需要处理图像数组的版本，并且：

    *   检查是否有要处理的图像；
    *   处理第一张图像；和
    *   完成后（即在完成处理程序块中），从数组中删除第一个图像，然后`processImage`再次调用。
2.  [考虑使用操作队列](https://developer.apple.com/documentation/foundation/nsoperationqueue?language=occ)，而不是调度队列。然后，您可以将您的任务实现为“异步”[`NSOperation`](https://developer.apple.com/documentation/foundation/nsoperation?language=objc)子类。这是包装异步任务的一种非常优雅的方式这在[https://stackoverflow.com/a/21205992/1271826](https://stackoverflow.com/a/21205992/1271826)中有说明。

3.  您可以使用信号量使此异步任务同步运行。这也在[https://stackoverflow.com/a/21205992/1271826](https://stackoverflow.com/a/21205992/1271826)中进行了说明。

选项 1 是最简单的，选项 2 是最优雅的，选项 3 是一个脆弱的解决方案，应该尽可能避免。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-13T17:27:16.300

我遇到了这样的问题，我的答案是意识到来自序列化队列上的方法的异步调用会转到另一个队列进行处理——一个未序列化的队列。

因此，您必须使用显式将所有调用包装在 main 方法中，`dispatch_async(serializedQueue, ^{})`以确保一切都以正确的顺序完成......

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-11-21T16:58:53.597

您可能有多个对象，每个对象都有自己的串行队列。分派到任何单个串行队列的任务都是按顺序执行的，但是分派到不同串行队列的任务绝对是交错的。

另一个简单的错误是创建的不是串行队列，而是并发队列......

# javascript - ajax 调用和追加，不能选择追加的内容或做任何事情

> ID：15618582
> 
> 赞同：0
> 
> 时间：2013-03-25T15:25:12.267
> 
> 标签：javascript, jquery, ajax

这段代码有两个问题。

1`$(container + ' meta[data-level="' + level + '"]').length == 0`始终为零我知道这一点，因为我创建了`create_views(1);`不应添加的额外调用，但无论如何它都会被附加。

2 dpUniSlider 不起作用，因为它看不到通过 ajax 调用创建的 li。如果我将它移到成功消息中，它可以正常工作，但外部功能不能。问题是如果我将它包含在 ajax 成功中，它将被调用多次，因为它在循环下

```
//Show levels using ajax, before slider is activated

function create_views(level) {
  $.ajax({
    url: "actions.php",
    type: "GET",
    data: "show_level=" + level,
    cache: false,
    success: function (data) {
      var view = '<li data-level="' + level + '">' + data + '</li>';
      var container = ".slides_container";
      if ($(container + ' meta[data-level="' + level + '"]').length == 0) {
        $(container).append(view);
      } else { //check if element exists, if yes overwrite it.
        //$(container + ' meta[data-level="' + level + '"]').replaceWith(view);
        alert("Exists");
      }
    }
  });
}
 //Loop through all levels and display views
 //level count can be rewritten to come from DB and not be hardcoded like now
var levels = 2;
for (var i = 1; i <= levels; i++) {
  create_views(i);
} // for loop
create_views(1); //test, delete this
 //Activate slide
var unislider = $(".slides_container").dpUniSlider({
  //loop: false,
  draggable: false
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:13:21.740

我相信您可以使用 jQuery 延迟对象来处理多个并行异步 ajax 调用，您希望在它们全部成功完成后执行某些操作。

尝试这个：

```
$(function() {
    var LEVELS = 2,
        $container = $('.slides_container'),
        deferreds = []; // This will hold the deferred objects.

    // This function returns a deferred object.
    function getViewAndReturnDeffered(level) {
        return $.ajax({
            url: 'actions.php',
            type: 'GET',
            data: 'show_level=' + level,
            cache: false,
            success: function(data) {
                var $currentView = $container.find('[data-level="' + level + '"]'),
                    $newView = '<li data-level="' + level + '">' + data + '</li>';
                if ($currentView.length > 0) {
                    $currentView.replaceWith($newView);
                } else
                    $container.append($newView);
                }
            }
        });
    }

    for (var i = 1; i <= LEVELS; i++) {
        // Put the deferred objects in the array.
        deferreds.push(getViewAndReturnDeffered(i));
    }

    // The function passed to `.done()` will execute when all the deferred
    // objects have completed successfully.
    $.when.apply($, deferreds).done(function() {
        var unislider = $container.dpUniSlider({
            //loop: false,
            draggable: false
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:55:51.957

为了处理多个并行异步 ajax 调用，您希望在它们全部完成后执行某些操作，您可以保留一个计数器并检查成功回调以查看最后一个 ajax 调用何时成功。

它看起来像这样：

```
$(function() {
    var TOTAL_TASKS = 2,
        completedTasks = 0;

    function performAjaxTask(taskNumber) {
        $.ajax({
            url: url,
            type: 'GET',
            data: data,
            cache: false,
            success: function(data) {
                // Process the data

                completedTasks++;

                if (completedTasks == TOTAL_TASKS) {
                    // Perform actions that need to wait until all
                    // ajax calls have returned successfully.
                }
            }
        });
    }

    for (var i = 1; i <= TOTAL_TASKS; i++) {
        performAjaxTask(i);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:49:59.853

你有`<meta></meta>`内幕`.container`吗？可能不是。利用

```
$(container + ' li[data-level="' + level + '"]') 
```

# ruby-on-rails-3 - 查找带有文章的标签

> ID：15618583
> 
> 赞同：1
> 
> 时间：2013-03-25T15:25:13.027
> 
> 标签：ruby-on-rails-3, tags, scope

在博客应用程序上，我想显示带有文章的标签列表。

```
class Article < AR::B
  has_and_belongs_to_many :tags
end

class Tag < AR::B
  has_and_belongs_to_many :articles
end 
```

标签范围会是什么样子？

```
Tag.joins(:articles) ... # should return tags associated to at least 1 article 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:40:49.067

用 Ruby/Rails 做到这一点的一种方法是这个。

`Tag.includes(:articles).select { |tag| tag.articles.any? }`

`.includes`确保文章与标签一起加载，这比在迭代每个标签的文章时加载它们更有效。

然后解析该数组以仅选择与文章相关联的那些。

# c# - 无法弄清楚如何在 linq to EF 中进行多个连接

> ID：15618585
> 
> 赞同：0
> 
> 时间：2013-03-25T15:25:14.753
> 
> 标签：c#, sql-server-2008, entity-framework, linq-to-entities

tl；博士版本：我需要这个 sql 语句才能使用 linq to EF

这是 SQL 中的查询：

```
select 
stu.SyStudentId, 
rtrim(stu.StuNum) as StudentNumber, 
stu.SSN,
stu.FirstName, 
stu.LastName, 
Email, 
OtherEmail, 
stu.StartDate,
case 
when (systa.category = 'E') then 'Enrolled'  
    when (systa.category = 'A') then 'Active'  
    else 'This should never happen'
end as StatusCategory,
rtrim(schsta.Code) as SchoolStatusCode,
pic.StudentPicture,
case when (stu.DateLstMod > isnull(pic.DateLstMod,'1900-1-1')) 
then stu.DateLstMod 
    else pic.DateLstMod 
end as DateLstMod
from 
SyStudent stu
inner join syschoolstatus schsta on schsta.syschoolstatusid = stu.syschoolstatusid
inner join SyStatus systa on systa.SyStatusId = schsta.SyStatusId
left outer join cmstudentpicture pic on pic.systudentid = stu.systudentid
where stu.sycampusid = 6
and systa.category in ('E','A') 
```

丑陋的查询，继承自旧系统..

我正在尝试获得一些我们必须利用实体框架的服务。我试图让这个查询使用基于方法的语法来工作。我首先得到我将要加入的所有对象的列表：

```
var students = ctx.syStudents.ToList(); //root
var statusCode = ctx.SySchoolStatus.ToList(); //inner
var status = ctx.syStatus.ToList(); //inner
var picture = ctx.CmStudentPictures.ToList(); //left outer 
```

'ctx' 是我的 dbcontext 类。

到目前为止我的查询是这样的：

```
var query = students
   .GroupJoin(statusCode,
   student => student.SySchoolStatusID,
   statuscode => statuscode.SySchoolStatusID,
   (student, studentStatusCode) => new
   {
      StudentName = student.FirstName
   }); 
```

显然没有完全实现，但我想知道这是否是执行此操作的最佳方法，因为我将有几个内部连接，然后还有一个左外部连接，或者是否有更好、更易读的完成这项工作的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:38:31.757

我肯定会推荐查询语法而不是连接的 lambda 语法。

尝试以下方式：

```
var result = 
from stu in SyStudent
join schsta in syschoolstatus on stu.syschoolstatusid equals schsta.syschoolstatusid //inner
join systa in SyStatus on schsta.SyStatusId equals systa.SyStatusId //innner
from pic in cmstudentpicture.Where(x => x.systudentid = stu.systudentid).DefaultIfEmpty() //outer 
where stu.sycampusid = 6
select new{
    stu,
    schsta,
    systa,
    pic
}; 
```

# android - 使用上下文菜单从列表中获取文本

> ID：15618586
> 
> 赞同：0
> 
> 时间：2013-03-25T15:25:17.810
> 
> 标签：android, android-listview, android-contextmenu

我一直在尝试使用上下文菜单从列表中的一行中获取文本。到目前为止，我能够使用 row.xml 文件中的 id 获取文本名称。但是，当我在列表中选择另一行时，它将在列表的第一行中返回相同的名称，而不是我选择的名称。

```
 public boolean onContextItemSelected(MenuItem item)
 {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo)item.getMenuInfo();

    if(item.getTitle()=="Get")
    {
        TextView textView = (TextView) this.findViewById(R.id.names); 
        String text = textView.getText().toString(); 

        //Then pass value retrieved from the list to the another activity 
    }
 } 
```

行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView 
    android:id="@+id/names"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />

<TextView 
    android:id="@+id/pNumbers"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:32:18.343

这不是正确的做法。您应该使用[AdapterContextMenuInfo.position](http://developer.android.com/reference/android/widget/AdapterView.AdapterContextMenuInfo.html#position)来获取列表中数据的索引，然后将该数据传递给新的 Activity。

```
AdapterContextMenuInfo info = (AdapterContextMenuInfo)item.getMenuInfo();    
switch(item.getItemId()) { // using the id is the proper way to determine the menu item
    case R.id.menu_get:
        Object data = mListAdapter.getItem(info.position);
        // do something interesting with the data
        return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:31:29.727

你测试过 info.position

然后从适配器位置您可以检索所有列表项数据。

# ios - MKMapOverlay CGPath 上的精美效果

> ID：15618591
> 
> 赞同：0
> 
> 时间：2013-03-25T15:25:26.140
> 
> 标签：ios, path, mkmapview, overlay

我正在使用 MKOverlayView 在苹果地图上绘制路径。我想在上面画很多短路径，因为我需要根据其他一些值对轨道进行着色。但是我这样做会得到一些花哨的效果……我的起点和终点也是相连的，但我不知道为什么。放大/缩小后，花式效果图案会发生变化并变大/变小。看来您可以在我的路径上看到苹果地图图块...

这是我的代码，它在我的覆盖视图的 drawMapRect 方法中调用。

```
for(int i = 0; i < tdpoints.pointCount-1; i++ ){
    CGPoint firstCGPoint = [self pointForMapPoint:tdpoints.points[i]];
    CGPoint secCGPoint = [self pointForMapPoint:tdpoints.points[i+1]];

    if (lineIntersectsRect(tdpoints.points[i], tdpoints.points[i+1], clipRect)){            

        double val1 = (arc4random() % 10) / 10.0f;
        double val2 = (arc4random() % 10) / 10.0f;
        double val3 = (arc4random() % 10) / 10.0f;

        CGContextSetRGBStrokeColor(context, val1 ,val2, val3, 1.0f);
        CGContextSetLineWidth(context, lineWidth);

        CGContextBeginPath(context);
        CGContextMoveToPoint(context,firstCGPoint.x,firstCGPoint.y);

        CGContextAddLineToPoint(context, secCGPoint.x, secCGPoint.y);

        CGContextStrokePath(context);
        CGContextClosePath(context);

    }
} 
```

[http://imageshack.us/photo/my-images/560/iossimulatorbildschirmf.jpg/](http://imageshack.us/photo/my-images/560/iossimulatorbildschirmf.jpg/)

[http://imageshack.us/photo/my-images/819/iossimulatorbildschirmf.jpg/](http://imageshack.us/photo/my-images/819/iossimulatorbildschirmf.jpg/)

**我正在像这样添加我的 GPS 点。（来自面包屑苹果示例）**

```
CLLocationCoordinate2D coord = {.latitude = 49.1,.longitude =12.1f}; 
[self drawPathWithLocations:coord];

CLLocationCoordinate2D coord1 = {.latitude = 49.2,.longitude =12.2f}; 
[self drawPathWithLocations:coord1];

CLLocationCoordinate2D coord2 = {.latitude = 50.1,.longitude =12.9f}; 
[self drawPathWithLocations:coord2]; 
```

**这是添加方法：**

```
-(void) drawPathWithLocations:(CLLocationCoordinate2D)coord{
if (!self.crumbs)
{

    // This is the first time we're getting a location update, so create
    // the CrumbPath and add it to the map.
    //
    _crumbs = [[CrumbPath alloc] initWithCenterCoordinate:coord];
    [self.trackDriveMapView addOverlay:self.crumbs];

    // On the first location update only, zoom map to user location
    [_trackDriveMapView setCenterCoordinate:coord zoomLevel:_zoomLevel animated:NO];

}   else
{
    // This is a subsequent location update.
    // If the crumbs MKOverlay model object determines that the current location has moved
    // far enough from the previous location, use the returned updateRect to redraw just
    // the changed area.
    //
    // note: iPhone 3G will locate you using the triangulation of the cell towers.
    // so you may experience spikes in location data (in small time intervals)
    // due to 3G tower triangulation.
    //

    MKMapRect updateRect = [self.crumbs addCoordinate:coord];

    if (!MKMapRectIsNull(updateRect))
    {

        // There is a non null update rect.
        // Compute the currently visible map zoom scale
        MKZoomScale currentZoomScale = (CGFloat)(self.trackDriveMapView.bounds.size.width / self.trackDriveMapView.visibleMapRect.size.width);
        // Find out the line width at this zoom scale and outset the updateRect by that amount
        CGFloat lineWidth = MKRoadWidthAtZoomScale(currentZoomScale);
        updateRect = MKMapRectInset(updateRect, -lineWidth, -lineWidth);
        // Ask the overlay view to update just the changed area.
        [self.crumbView setNeedsDisplayInMapRect:updateRect];
    }
} 
```

**这是 addCoordinate 方法：**

```
 - (MKMapRect)addCoordinate:(CLLocationCoordinate2D)coord
{
   pthread_rwlock_wrlock(&rwLock);

    // Convert a CLLocationCoordinate2D to an MKMapPoint
    MKMapPoint newPoint = MKMapPointForCoordinate(coord);
    MKMapPoint prevPoint = points[pointCount - 1];

    // Get the distance between this new point and the previous point.
    CLLocationDistance metersApart = MKMetersBetweenMapPoints(newPoint, prevPoint);

    NSLog(@"PUNKTE SIND %f METER AUSEINANDER ... ", metersApart);

    MKMapRect updateRect = MKMapRectNull;

    if (metersApart > MINIMUM_DELTA_METERS)
    {
        // Grow the points array if necessary
        if (pointSpace == pointCount)
        {
            pointSpace *= 2;
            points = realloc(points, sizeof(MKMapPoint) * pointSpace);
        }    

        // Add the new point to the points array
        points[pointCount] = newPoint;
        pointCount++;

        // Compute MKMapRect bounding prevPoint and newPoint
        double minX = MIN(newPoint.x, prevPoint.x);
        double minY = MIN(newPoint.y, prevPoint.y);
        double maxX = MAX(newPoint.x, prevPoint.x);
        double maxY = MAX(newPoint.y, prevPoint.y);

        updateRect = MKMapRectMake(minX, minY, maxX - minX, maxY - minY);
    }

    pthread_rwlock_unlock(&rwLock);

    return updateRect;
} 
```

**暗示**

我认为我的刷新算法只刷新屏幕上整个地图的一个图块，因为每次为这个特定区域调用 drawMapRect 方法时，都会生成一个新的随机颜色。（路径的其余部分被剪裁，颜色保持不变......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:27:28.430

您看到的“奇特效果”是 MKMapView 调用 drawMapRect 的方式和您决定每次绘制时使用随机颜色的组合。当用户在 MKMapView 周围平移地图时加快显示速度，会缓存叠加层中的切片。如果一个图块离开屏幕，它可以被丢弃或存储在不同的缓存或其他东西中，但仍在屏幕上的那些只是移动，不需要重绘，这很好，因为绘图可能意味着访问您的数据供应或其他一些长期计算。这就是您调用 的原因`setNeedsDisplayInMapRect`，它只需要获取这些图块而不是重绘所有内容。

这适用于我见过的所有应用程序，并且总体上是一个很好的系统。除非你画的东西每次都不一样，比如你的随机颜色。如果您真的想为这样的路径着色，那么您应该使用散列或看起来随机但实际上基于可重复的东西的东西。也许点所在的索引，乘以点坐标，MD5ed，然后取第 5 个字符等等。无论它被调用多少次，它必须为同一行生成相同的颜色。就我个人而言，我宁愿这条线是一种颜色，也许是虚线。但那是你和你的用户之间的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:28:17.343

因为每当您绘制任何路径时，您都需要关闭它。当您关闭路径时，它会自动在 lastPoint 和 firstPoint 之间画线。

只需删除路径图中的最后一行

```
CGContextClosePath(context); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:29:06.393

的目的`CGContextClosePath`是从字面上关闭路径 - 连接起点和终点。你不需要那个，`StrokePath`已经画好了路径。删除线。也移动`CGContextStrokePath`到你的循环之外，方法是移动/添加线/移动/添加线......然后描边（你可以在这样做时改变颜色，你就是这样）。

对于“花式效果”（斜线连接），调查可能的`CGContextSetLineJoin`和`CGContextSetLineCap`调用参数的效果。

# c# - 二维数组，以奇怪的模式添加它的值

> ID：15618592
> 
> 赞同：0
> 
> 时间：2013-03-25T15:25:28.190
> 
> 标签：c#, arrays

几个月前我开始学习 C# 和编程，但遇到了一些问题。这里的想法是我们创建一个二维数组（行数/列数由用户添加），数字需要在 1 到 10 之间。

然后，当创建数组时，数字序列（ 3-5-7-9-11 等）从第一列开始，在最后一列结束。列中的其余数字由用户从第一行开始通过键盘添加（忽略第 1 列和最后一列，因为我们已经添加了）。

问题是：

*   检查行数/列数是否在 1 到 10 之间的最佳方法是什么？（我在想 IF-else 但没有更好的方法吗？）
*   我将如何使数字序列 3-5-7 等从第一列开始并在最后一列结束？是的，我感到失落。

我现在在哪里：

```
 Console.WriteLine("Add row value of 1-10");
        string s1
        s1 = Console.ReadLine();
        int k = int.Parse(s1);

        Console.WriteLine("Add column value of 1-10");

        string s2;
        s2 = Console.ReadLine();
        int p = int.Parse(s2);
        int[,] M = new int[k, p]; 
```

示例：我们添加了 4 的 k(row) 和 p(coulmn) 值。所以数组应该如下所示：

3×11

5×13

7×15

9×17

然后应该再次手动添加 X 而不会覆盖现有数字。数字的值无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:39:18.100

所以......如果我做对了，你想问用户动态二维数组的“长度和宽度”吗？要检查输入的数字是否在 1 到 10 之间，只有一种方法：

```
int [,] M;

if (k >= 1 && k <= 10 && p >= 1 && p <= 10)
{
    M = new int[k,p];
} 
```

如果用户在此处输入字符而不是数字，则更好的是`int.TryParse()`，否则您可以轻松获得`Exception`.

填写数字：

```
int num = 3;
for (int i = 0; i < k; ++i)
{
    M[i,0] = num;
    num+=2;
}

for (int i = 0; i < k; ++i)
{
    M[i,p] = num;
    num+=2;
} 
```

这会在每行的第一列和最后一列中添加数字。之后手动填充其他单元格，您检查每个单元格，它不在第一列或最后一列。我希望我正确地理解了你。提供的代码可能会被简化，但以这种方式提供以便更好地理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:57:36.130

```
if(k>0 && k<11 && p>0 && p<11)
{
 int i;
 int M[,] = new int[k,p];
 for (i=0;i<k;i++)
 {
  M[i,0]=i*2+3;
  M[i,p-1]=(i+k)*2+3;
 }
} 
```

# capybara - 是否可以与水豚与隐藏元素进行交互？

> ID：15618598
> 
> 赞同：44
> 
> 时间：2013-03-25T15:25:50.223
> 
> 标签：capybara, attachment

我有一个文件字段，它有`opacity: 0`一个假按钮并与一个假按钮重叠。它是一种常见的 css 技术，可以伪造一种在不同浏览器中一致显示的“上传按钮”。

Capybara 不允许我调用`attach_file`该输入。错误是`Selenium::WebDriver::Error::ElementNotVisibleError: Element is not currently visible and so may not be interacted with`。

有人知道有什么方法可以强迫水豚与隐形元素互动吗？

答案仍然没有答案，但我找到了解决方法。没有什么聪明的，只需用一个简单的脚本就可以看到元素

```
 page.execute_script %Q{
    $('#photos').css({opacity: 1, transform: 'none'});
  } 
```

我贴出来记录一下。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-07-22T13:19:16.713

您可以使用 Capybara 中的属性与隐藏元素进行交互`visible: false`。

如果要单击隐藏元素，请使用：

```
find("#photos", visible: false).click 
```

不要`click_button('#photo')`直接使用

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-06-18T17:02:27.600

[Capybara 的作者建议`Capybara.ignore_hidden_elements`](https://github.com/jnicklas/capybara/issues/761#issuecomment-7156472)在需要看到不可见元素之前立即设置，然后再重新设置：

```
Capybara.ignore_hidden_elements = false
click_button 'my invisible button'
Capybara.ignore_hidden_elements = true 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-08T19:14:08.697

一般来说，使用 Capybara 时不应该与不可见元素进行交互（您可以使用`visible: false/hidden`大多数查找器中的选项找到它们，但实际上不会对它们做任何事情）。但是，文件输入是一种特殊情况，因为隐藏元素非常普遍，并且由于安全限制，没有其他方法可以通过与页面可见元素交互来实际添加文件。因此，`attach_file`有一个`make_visible`选项可用于让 Capybara 使元素可见，附加文件，然后将 CSS 重置为原始设置。

```
attach_file('photos', file_path, make_visible: true) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T15:13:00.990

Miquel，感谢您的工作。

我在与 Selenium Webdriver 2.35 和 Firefox 24 的 C# 绑定上的隐藏文件输入交互时遇到了类似的问题。为了使文件选择正常工作，做了类似的技巧：

```
((IJavaScriptExecutor)webdriver).ExecuteScript("$('#fileUploadInput').css({opacity: 1, transform: 'none'});");

IWebElement e = webdriver.FindElement(By.CssSelector("input#fileUploadInput")));

e.SendKeys("c:\\temp\\inputfile.txt"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T20:13:48.763

我最终以不同的方式解决了它。

`execute_script()`给我带来了困难（它会冻结 FireFox 上的测试执行），所以这就是我所做的：

我已经有一个合适的 javascript 文件。我附加了以下内容

```
<% if ENV["RAILS_ENV"] == "test" %>
  $('#photos').show()
<% end %> 
```

我还必须附加`.erb`到我的 javascript 文件以进行正确的 Rails 资产处理。

在我的测试文件中，我已经在设置`ENV["RAILS_ENV"] = "test"`

这样我就可以简化 UI 进行测试，同时保持生产的外观和感觉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-11T21:44:06.067

`display:none;`我已经使用具有 CSS 样式集的元素这样做了：

```
page.execute_script("$('.all-hidden-elements').show();");
all('.all-hidden-elements').first.click 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-22T21:46:33.590

如果隐藏元素嵌套在可见父元素中（例如可见标签内的隐藏输入），则可以改为单击父元素。如果你仍然想通过 ID 找到输入，你可以像这样遍历父级：

```
find('#hidden_input').find(:xpath, '..').click 
```

# java - 我如何设置 Eclipse 以与 tomcat 一起运行

> ID：15618601
> 
> 赞同：0
> 
> 时间：2013-03-25T15:26:00.423
> 
> 标签：java, eclipse, tomcat

我正在尝试遵循[本教程](http://blog.sencide.com/2011/06/create-web-service-using-apache-axis2.html)。它说要转到“转到 Windows –> 首选项并选择服务器 –> 运行时环境。” 我没有看到 Windows Preferences（我在 Mac 上使用 OS X 10.7.5），但是当我单击 Eclipse Preferences 时，我得到了一个非常相似的菜单。（我正在使用 Helios，就像在教程中一样）。尽管我看到的菜单非常相似，但我仍然看不到教程中的“服务器”选项。我应该怎么做才能完成教程中的步骤 1.3？（基本上配置 Eclipse 以使用 tomcat）。

这是我看到的菜单：

![这是我看到的菜单](../Images/6b91cf7664f707288180bf8d3c4b4378.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:34:32.210

看起来你已经下载了`eclipse`eclipse **[for](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)**`javase`**[`javaee`](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)**

# jsp - 在 jsp 页面中禁用 favicon

> ID：15618609
> 
> 赞同：1
> 
> 时间：2013-03-25T15:26:29.203
> 
> 标签：jsp, favicon

如何在特定的 jsp 页面中禁用 favicon.ico，这样就不会有任何流量？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:43:07.610

当物理`favicon.ico`文件放在 webapp 的根文件夹中时，大多数浏览器都会自动使用它，无论你是否在 a 中明确指定它`<link>`。如果您通过将 favicon 文件移动到某个文件夹并使用`<link>`元素来引用它来更改它，如下所示，

```
<link rel="shortcut icon" href="${pageContext.request.contextPath}/somefolder/favicon.ico" /> 
```

甚至将文件重命名为标准以外的其他名称`favicon.ico`，

```
<link rel="shortcut icon" href="${pageContext.request.contextPath}/logo-16x16.png" /> 
```

那么您可以针对特定的 JSP 页面完全删除/跳过整个页面`<link>`。

测试前不要忘记清除浏览器缓存。浏览器非常积极地缓存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:42:54.947

这是不可能的，因为您无法阻止浏览器请求它。引自[雅虎！](http://developer.yahoo.com/performance/rules.html#favicon)

> favicon.ico 是保留在服务器根目录中的图像。这是一个必要的邪恶，因为即使你不关心它，浏览器仍然会请求它

因此，您所能做的就是使该图像尽可能小，并根据您的感觉设置过期标题。

您可以查看这个[SO question](https://stackoverflow.com/questions/5199902/isnt-it-silly-that-a-tiny-favicon-requires-yet-another-http-request-how-to-mak)以获取更多信息。

# linux - 将日期列表传递给linux中的批处理文件

> ID：15618616
> 
> 赞同：0
> 
> 时间：2013-03-25T15:26:47.023
> 
> 标签：linux, unix, batch-file

我有一个运行类似这样的批处理脚本 ./test.sh -d 2013-03-25 ；这里的日期是用户输入；但我需要将日期列表传递给这个批处理脚本；从 2013 年 3 月 1 日到 2013 年 3 月 25 日，我有 25 个连续日期；如何将每个日期动态传递给这个批处理可执行文件。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:32:16.993

一种方法是将日期存储在数组中。这可以从 shell 脚本中很好地工作。

```
dates=(2013-03-01 2013-03-02 etc...)

for date in "${dates[@]}"; do
    ./test.sh -d "$date"
done 
```

另一种方法是将日期存储在文本文件中，每行一个。如果你这样做了，那么你可以像这样传递它们：

```
xargs -a dates.txt -d '\n' ./test.sh 
```

或者，由于日期是连续的并且在同一个月，您可以以编程方式循环它们。

```
for day in 00..25; do
    ./test.sh -d "2013-03-$day"
done

for ((day = 1; day <= 25; ++day)); do
    ./test.sh -d "2013-03-$(printf '%02d' "$day")"
done 
```

# autotools - 如果缺少系统库，请使用本地库

> ID：15618621
> 
> 赞同：1
> 
> 时间：2013-03-25T15:27:09.933
> 
> 标签：autotools, autoconf, automake, gsl

我正在使用 Autoconf 和 A​​utomake 工具，以便开发/分发我的应用程序。

现在一切正常。

我的应用程序依赖于 GSL（GNU 科学库），所以在我的 configure.ac 中，我通过以下方式搜索它：

PKG_CHECK_MODULES([GSL], [gsl])

但如果 GSL 缺失，该过程将无法继续。

我的想法如下：在分发存档中包含 gsl-1.15.tar.gz，如下所示：

*   /
    *   第三方/
        *   gsl-1.15.tar.gz
    *   源/
        *   ...
    *   配置.ac

并且，假设最终用户没有互联网连接或 root 访问权限，如果缺少 GSL，他将无法继续。

是否可以在 configure.ac 中写入如果缺少 GSL，则提取 3rdParty/gsl-1.15.tar.gaz 并指向提取的“include”和“lib”目录。

可能吗 ？

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:54:12.587

由于大多数软件包都是压缩的 tarball，我看不出`gsl`作为另一个 tarball 分发的意义——只需将源代码放在子目录中即可。然后可以通过使用[AC_CONFIG_SUBDIRS](http://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.69/html_node/Subdirectories.html#Subdirectories)在`configure.ac`.

* * *

的默认操作`PKG_CHECK_MODULES`是如果找不到则中止。要改变这一点：

```
PKG_CHECK_MODULES([GSL], [gsl >= 1.15], [gsl_pkg_local=;],
                  [gsl_pkg_local="yes"])

if test "x$gsl_pkg_local" != "xyes" ; then
    AC_CONFIG_SUBDIRS([gsl-1.15])
fi 
```

这假设您有`gsl-1.15`顶级目录。变量名也没有什么特别之处`gsl_pkg_local`——因此您可以更改这些内容以满足您的需要。

# macos - NSFileWrapper 是否支持延迟加载？

> ID：15618628
> 
> 赞同：2
> 
> 时间：2013-03-25T15:27:28.167
> 
> 标签：macos, cocoa, lazy-loading, nsdocument, nsfilewrapper

我正在创建一个`NSDocument`可能包含数百个大文件的包，因此我不想在打开文档时全部阅读。

我花了一些时间搜索，但我找不到明确的答案。大多数人似乎认为`NSFileWrapper`将所有数据加载到内存中，但有些人表示它不会加载数据，直到您调用`-regularFileContents`包装器。（参见[NSFileWrapper 将所有内容加载到内存中吗？](https://stackoverflow.com/questions/13621502/does-nsfilewrapper-load-everything-into-memory)和[Objective-C / Cocoa：上传图像、工作内存和存储](https://stackoverflow.com/questions/2250166/objective-c-cocoa-uploading-images-working-memory-and-storage)示例。）

文档并不完全清楚，但类似的选项`NSFileWrapperReadingImmediate`似乎`NSFileWrapperReadingWithoutMapping`表明它并不总是阅读所有内容。

我收集`NSFileWrapper`支持增量保存，只写出已被替换的子包装器。所以如果它也支持增量加载就好了。

有确定的答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:37:11.877

`NSFileWrapper`默认情况下延迟加载，除非您指定`NSFileWrapperReadingImmediate`选项。它将避免将文件读入内存，直到实际请求它为止。

仅作为**调试帮助**，您可以通过检查以下内容来查看文件是否已加载：

```
[wrapper valueForKey:@"_contents"]; 
```

`NSData`一旦从磁盘读取文件，它就会被填充。

# r - 如何在计算中使用小数放置条件？

> ID：15618635
> 
> 赞同：1
> 
> 时间：2013-03-25T15:27:52.497
> 
> 标签：r, plot, raster

有两个具有相同尺寸的栅格（值是带有 5 位小数的浮点数）。下面给出的代码从两个栅格 r 和 r1 中生成一个文件。如果 r 较大，则放蓝色，否则放红色。

这段代码运行良好，但我被要求添加另一个条件。此代码如何工作：

如果 r 为 0.229 且 r1 为 0.228，则 r 更大（注意小数点后三位）。我需要的是指定前两位小数，例如：

```
 r= 0.228   r1=0.224   put  yellow colour(they are rather similar)
     r= 0.238   r1=0.224   put  blue colour(r is bigger)
     r= 0.128   r1=0.224   put  red colour(r is lower) 
```

1-读取第一个文件 r

```
 conn <- file("C:\\corr.bin","rb")
     corr<- readBin(conn, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

2-读取第二个文件r1：

```
 conne <- file("C:\\cor06.bin","rb")
    over<-readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

计算：

```
 r <-raster(t(matrix((data=corr), ncol=720, nrow=1440)))
 r1 <- raster(t(matrix((data=over), ncol=720, nrow=1440)))
 m <- r > r1 #Compare the two rasters
 image( m , col = c("blue" , "red" ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:00:27.523

您现在想要根据一个大于另一个创建颜色，或者两者之间的差异小于 0.01。您可以像这样简单地执行此操作：

```
# Example data
r <- raster( system.file("external/test.grd", package="raster") )
r1 <- r * rnorm( ncell(r))

# Make new raster
m <- raster( r )

# 3 = Yellow , 2 = "Red" , 1 = "Blue"
values( m ) <- ifelse( abs( r[] - r1[] ) <= 0.01 , 3 , ifelse( r[] > r1[] , 1 , 2 ) )
image( m , col = c( 1 = "Blue" , 2 = "Red" , 3 = "Yellow" ) ) 
```

您可以使用`value = "colour"`参数样式来`col`确保将颜色分配给正确的级别。 ![在此处输入图像描述](../Images/b2dcb9b0fb80a5a16fefeba0808cdda1.png)

# asp.net - ASP.NET 计时器控件不起作用

> ID：15618637
> 
> 赞同：0
> 
> 时间：2013-03-25T15:28:02.367
> 
> 标签：asp.net, timer, asp.net-ajax

我的 ASP.NET 页面中有一个计时器控件，我尝试将其放入 UpdatePanel 中，但结果仍然相同。使用下面的代码滴答事件不会触发。甚至不回发页面。

```
<ajax:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"/>
        <asp:Timer ID="tmrUpdateLocations" runat="server" OnTick="tmrUpdateLocations_Tick" Interval="1000"></asp:Timer>
         <div id="googleMap" style="width:100%;height:500px"></div>
            <asp:Label ID="lbl" runat="server" Text="!!!"></asp:Label> 
```

代码隐藏：

```
 protected void tmrUpdateLocations_Tick(object sender, EventArgs e)
        {
            lbl.Text = "TRYING!!";
        } 
```

顺便说一句，计时器已启用。这是 web.config ：

```
<pages>
      <controls>
        <add tagPrefix="ajax" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit"/>
      </controls>
    </pages> 
```

当然，我从 Nuget 包管理器中添加了 AjaxControlToolkit ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T15:16:44.647

```
<httpHandlers>
<remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>

<httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </httpModules>
</httpHandlers> 
```

在 System.Web 元素中添加上面的代码。代码工作正常..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T16:29:08.720

除了正确的 web 表单和源代码，用 web 扩展的东西填充配置文件很重要。所有设置都可以在[官方页面](http://www.asp.net/ajax/documentation/live/ConfiguringASPNETAJAX.aspx)上找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:52:50.717

好的，我找到了答案。我不知道具体是怎么回事，但它开始起作用了。但我认为这是关于 web.config 文件的。我添加了 httphandler 标签，现在可以了。

# refinerycms - 使用 Refinery CMS 自定义站点布局

> ID：15618649
> 
> 赞同：3
> 
> 时间：2013-03-25T15:28:29.983
> 
> 标签：refinerycms

Rails 和 RefineryCMS 的新功能。我遇到了这个[关于每页布局](https://stackoverflow.com/questions/10827416/refinerycms-trying-to-tweak-layout-per-page)的问题。

它为我指出了[一个非常好的指南](https://github.com/resolve/refinerycms/blob/master/doc/guides/3%20-%20Advanced%20Techniques%20and%20Tips/3%20-%20Using%20Custom%20View%20or%20Layout%20Templates.textile)，在本指南中它说

> 在这种情况下，当我们只自定义页面的呈现，而不是页眉或页脚或实际站点布局时，启用 Refinery 的自定义视图模板是合适的。

我的问题是本指南遗漏的问题：如何使用 Refinery CMS 中的模板自定义页眉和页脚的呈现？这方面的文档在哪里？谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:13:44.137

要自定义页面内容之外的任何内容，您必须覆盖炼油厂视图。

在终端：

```
rake refinery:override view=refinery/_footer 
```

本炼油厂指南对此进行了介绍：[http ://refinerycms.com/guides/overriding-views](http://refinerycms.com/guides/overriding-views)

# jquery - 隐藏溢出的 div 中的特定 li 居中

> ID：15618650
> 
> 赞同：0
> 
> 时间：2013-03-25T15:28:33.580
> 
> 标签：jquery, css, math, center

我有一个 1200px 宽的 div，在那个 div 里面我有另一个隐藏溢出的 div。这个 div 有随机数量的图像，它们彼此相邻。图像的大小也是随机的。这就像一场轮播：1200px div 中间的图像是活动图像；在该图像的侧面，您可以看到另一个图像。如果用户单击其中任何一个图像，我会为图像所在的 UL 元素的边距设置动画，以便单击的图像以 1200px div 为中心。我当前的方法不能完美地将所选图像居中，这里有人有我可以使用的公式吗？

现在，我用它来计算新的 margin-left 值（向左走）：

```
 parseInt($('.images').css('margin-left')) - parseInt((active.width() / 2) + target.width() / 2) 
```

考虑到我的数学能力很差，我希望有人能想出更好的东西。

根据请求，HTML 和 CSS：

```
 <div id="slideshow">
        <div class="inside">
            <ul class="images">
                <li>
                    <img src="img/1.jpg" width="550" height="550" alt="" />
                </li>
                <li class="activeimg">
                    <img src="img/2.jpg" width="550" height="367" alt=""/>
                </li>
                <li>
                    <img src="img/3.jpg" width="370" height="550" alt="" />
                </li>
                <li>
                    <img src="img/4.jpg" width="393" height="550" alt="" />
                </li>
                <li>
                    <img src="img/5.jpg" width="550" height="356" alt="" />
                </li>
            </ul>
        </div>
    </div> 
```

和CSS：

```
#slideshow {
margin: 0 auto;
width: 1200px;
height: 600px;
background-color: #525252;
margin-top: 100px;
border:1px solid black;
overflow: hidden;
text-align: center;
}

#slideshow .inside {
height: 550px;
overflow: hidden;
margin: 25px 0;
}

#slideshow ul {
margin: 0;
padding: 0;
transition: margin 1s;
-moz-transition: margin 1s;
-webkit-transition: margin 1s;
-o-transition: margin 1s;
}
#slideshow li {
list-style-type: none;
float: left;
margin-right: 30px;
position: relative;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:05:38.760

您应该创建一个新类`.c-img`并使用 javascript 从`li`.

```
.c-img {
position:fixed;
margin:(...your calculated margin);
} 
```

尝试在[http://jsfiddle.net](http://jsfiddle.net)中执行此操作并在此处链接结果。

# paypal - 缺少 PayPal 沙盒 IPN 历史记录

> ID：15618653
> 
> 赞同：0
> 
> 时间：2013-03-25T15:28:41.563
> 
> 标签：paypal

PayPal（最新 3/2013）沙盒中的 IPN 历史信息在哪里？在最新的沙盒升级之后，我曾将它视为历史菜单中的子项，但现在我找不到它。历史记录允许重新发送 IPN 消息。目前，我没有从沙箱接收 IPN，并试图确定这是否是另一个 PayPal 沙箱问题，但不知道是否在没有 IPN 历史记录的情况下发送 IPN 消息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:50:05.787

如果 IPN 历史记录超过 28 天，您将无法查看。确保您要查找的 IPN 在过去 28 天内。如果是，但您没有看到，您能否向我提供交易 ID，以便我调查问题。

# svn - 如何在 Jenkins 中标记所有上游项目

> ID：15618654
> 
> 赞同：1
> 
> 时间：2013-03-25T15:28:44.230
> 
> 标签：svn, jenkins, continuous-integration, jenkins-plugins

我们使用 Jenkins 为我们的客户构建一个 ASP.NET 解决方案。我们使用标准的 Subversion 功能作为存储库插件和 MSBuild 来进行构建。我们使用的其他插件有 Copy Artifact、Publish over CIFS

在 Jenkins，我有 5 个工作：

*   第三方 DLLs -在整个项目中使用的一堆第三方 DLLs/程序集。我们这里只有二进制文件
*   服务 - 我们都使用第三方服务的一组项目。“第三方 DLL”的上游。
*   核心 - 一组核心项目，其中包含所有客户端实现使用的所有通用程序集。“第三方 DLL”、“服务”的上游。
*   ClientX - 此解决方案的客户端特定实现。“核心”的上游。
*   ClientX（QA 部署）- 将代码从开发服务器（
    运行单元测试的地方）移动到 QA 服务器，QA 可以在其中进行自己的测试。

每个下游项目都从上游项目中提取工件。一切都运行良好，并且在移动代码方面非常流畅。

我正在寻找的是：当 QA 部署批准要发布的构建时，我想标记 ClientX 颠覆代码、核心代码、服务代码和第三方 DLL，以便我总能得到它如果需要，构建和用于制造它的一切。基本上，我想标记所有上游代码/依赖项。

我查看了几个不同的插件，它们可以为我提供上游信息，以便我可以手动制作标签（上游显示标签）。但是，我正在寻找一种可以让我执行此操作的一键式（或几次单击）解决方案。

有没有我可以利用的东西或我可以利用的任何流程？我用谷歌搜索并没有找到任何似乎适合我需要的东西。

# java - JTable 单元格未通过定期更新进行更新

> ID：15618659
> 
> 赞同：0
> 
> 时间：2013-03-25T15:29:11.503
> 
> 标签：java, swing, jtable

我正在使用 JTable 来显示有关从 JFileChooser 中选择的文件的信息。当我点击上传按钮时，我的实际上传将从表中选取选定的文件开始，它会尝试更新 JTable 中相应文件的文件上传状态。在这里，当我在文件上传过程中尝试更新 JTable 的状态字段中的值时，它只更新了几次。它从 0 开始，直接更新 100，但我看不到其他进度值. 请查看以下代码，

**我的表代码：**

```
uploadTableModel = new UploadTabModel();
uploadTable = new JTable(uploadTableModel);
uploadTable.setAutoResizeMode(JTable.AUTO_RESIZE_NEXT_COLUMN);
uploadTable.setAutoCreateRowSorter(false);
uploadTable.setShowGrid(false);
uploadTable.setVisible(true);
JScrollPane tablePane = new JScrollPane();
tablePane.setViewportView(uploadTable); 
```

**我的表模型：**

```
public class UploadTabModel extends AbstractTableModel {

    private List<String> names = new ArrayList<String>();
    private List<FileDTO> data = new ArrayList<FileDTO>();
    public CMUploadTabModel() {

        names.add("Name");
        names.add("Size");
        names.add("Status");
    }
    private static final long serialVersionUID = 3151839788636790436L;

    @Override
    public int getColumnCount() {
        return names.size();
    }

    @Override
    public int getRowCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getValueAt(int row, int col) {
        FileDTO file = data.get(row);
        switch (col) {
        case 0:
            return file.getFileName();
        case 1:
            return file.getSize();
        case 2:
            return file.getStatus();
        }
        return file.getFileName();
    }

    @Override
    public void setValueAt(Object arg0, int rowIndex, int columnIndex) {
        FileDTO file = data.get(rowIndex);
        switch (columnIndex) {
            case 2:
                file.setStatus((Integer) arg0);
                break;
        }
    }

    public void addRow(FileDTO file) {
        this.data.add(file);
        this.fireTableRowsInserted(data.size() - 1, data.size() - 1);
    }

    public String getColumnName(int columnIndex) {
        return names.get(columnIndex);
    }

    @Override
    public Class<?> getColumnClass(int index) {
        return getValueAt(0, index).getClass();
    }
    public void updateProgress(int index, final int percentage) {

        FileDTO file = data.get(index);
        file.setStatus(percentage);
        data.set(0, file);
        setValueAt(percentage, index, 2);
        fireTableRowsUpdated(index, 2);

    }
} 
```

**我的文件模型组件：**

```
public class FileDTO {

    private String fileName;
    private Long size;
    private Integer status =0;

    public FileDTO(File file) {

        this.fileName = file.getName();
        this.size = file.length();
    }

//setters & getters 
```

**从上传更新表的处理程序：**

```
handler = new IProgressHandler() {

        @Override
        public void update(int index, int percentage) {
            uploadTableModel.updateProgress(index,percentage);

        }
    }; 
```

请建议我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:05:19.997

听起来您的 IProgressHandler 正在 EDT 上执行，因此 GUI 在上传完成之前无法重新绘制自身。

阅读 Swing 教程中有关 Swing 中的[并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的部分。您可能应该使用 SwingWorker 来完成此任务。

# javascript - 如何检测破解的 JS 验证？

> ID：15618664
> 
> 赞同：0
> 
> 时间：2013-03-25T15:29:28.277
> 
> 标签：javascript, security, validation

我有一个网站，上面有一个测验。用户不能直接从测验中获得任何好处，但他们可以在 Facebook 和 Twitter 上分享他们的结果。

问题是我不知道如何检查答案是否正确。在每个问题之后，如果用户答错了，应该能够重新启动或继续，或者如果用户答对了，它将自动继续。

如果检查是在服务器端完成的，则用户必须在提交答案后等待一秒钟，然后才会弹出下一个问题或弹出两个选项。但是，如果我在客户端这样做，不会有任何延迟，用户会更开心。

因此，作弊并没有太多好处，但人们肯定会这样做以在 Facebook 和 Twitter 上炫耀。

那么，有没有办法进行抽查或任何其他检测用户在客户端作弊的方法？还是我只需要决定在哪里进行验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:54:09.883

不，如果您在客户端进行验证，则无法防止作弊。你可以让它变得更难一些，但最终你不能控制用户的浏览器，而且你的代码必须是可执行的。除非你采取额外的步骤，否则很容易通过查看页面源代码并查看正确答案的代码来作弊。如果您关心作弊，请在服务器端进行所有验证。在验证期间使用 AJAX 创建无缝的用户体验。等待 AJAX 请求几秒钟还不错，不会造成糟糕的用户体验。

如果您在客户端验证上死心塌地，那么让攻击者感到痛苦的一个技巧就是混淆 JavaScript 例程。如果您将混淆代码生成器包装到 JS eval 函数调用中，攻击者必须先对其进行去混淆处理，然后才能确定问题的“正确”答案。这很容易使用[SpiderMonkey](https://developer.mozilla.org/en-US/docs/SpiderMonkey)完成，但它会阻止脚本小子和懒惰者。当与混淆配对时，您在这里和那里使用错误答案的想法也可能很好。

不过，归根结底，我根本不会做任何验证客户端。使用 AJAX/服务器端组合为您的用户创造良好的体验，这也是公平的。

# ember.js - 间隔内重新加载 Ember 模型

> ID：15618666
> 
> 赞同：14
> 
> 时间：2013-03-25T15:29:31.960
> 
> 标签：ember.js, ember-data

我有一个用户模型，它具有纬度和经度属性，用于在地图上显示当前用户位置。

```
App.User = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    email: DS.attr('string'),
    jobs: DS.hasMany("App.Job"),
    latitude:   DS.attr('number'),
    longitude: DS.attr('number'),
    measuredAt: DS.attr('date'),
}); 
```

每个给定间隔从服务器自动更新纬度和经度属性的最佳方法是什么？ember-data 是否支持这种用例？我找不到任何具有此功能的示例。我想我需要用 setInterval 覆盖 User 类的 find 方法，这是正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T15:53:10.360

编辑：请参阅 Dmitri Zagidulin 的回答。

所以我想通了。现在我只需要覆盖模型上的 didLoad 方法，将来我可能需要更复杂的解决方案，但这对于现在来说已经足够了。

```
didLoad: function(){
  var self = this;
  setInterval(function() {self.reload()}, 5*60*1000); //every 5 minutes
} 
```

如果有人需要重新加载更多模型，好的解决方案是将其实现为 Mixin。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-29T21:44:43.747

对于那些现在遇到这个问题的人——不要使用`setInterval`，它已被证明会导致严重的内存泄漏。

改用 Ember 自己的[Ember.run.later](https://www.emberjs.com/api/ember/2.15/namespaces/Ember.run/methods/later?anchor=later)。

也可以看看：

*   [SetTimeout 与 Ember.run.later 在 ember 应用程序中的对比？](https://stackoverflow.com/questions/21505332/settimeout-vs-ember-run-later-in-an-ember-app)
*   [http://guides.emberjs.com/v1.12.0/cookbook/working_with_objects/continuous_redrawing_of_views/](http://guides.emberjs.com/v1.12.0/cookbook/working_with_objects/continuous_redrawing_of_views/)
*   [https://www.slideshare.net/yoranbe/presentation-31170160](https://www.slideshare.net/yoranbe/presentation-31170160)

编辑：2019 年 2 月 3 日 - 更新断开的链接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-25T18:16:59.423

该模型`.reload()`现在有一个方法，您可以在`setInterval`回调中使用它。见[https://stackoverflow.com/a/14183507/363073](https://stackoverflow.com/a/14183507/363073)

PS 观看[#545](https://github.com/emberjs/data/issues/545)。

# mercurial - 如何在 Mercurial 中创建一个新的“稳定”分支

> ID：15618668
> 
> 赞同：2
> 
> 时间：2013-03-25T15:29:40.097
> 
> 标签：mercurial, visualhg

我为我的源代码使用 Mercurial（与 VisualHg），我有以下情况。

我目前正在使用默认分支，并希望按照[http://stevelosh.com/blog/2010/05/mercurial-workflows-stable-default/](http://stevelosh.com/blog/2010/05/mercurial-workflows-stable-default/)中显示的过程创建一个新的稳定分支。

以下是我的问题：

1.  我创建了一个版本，标记了它，然后我想将它移动到稳定的分支（目前不存在）。我怎样才能做到这一点？
2.  一个我有那个新分支，如何在我的机器上创建两个文件夹，一个包含默认数据，另一个包含稳定数据？

我不确定这种方法是否适用于 Mercurial：我曾经使用 VisualSVN。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T16:05:04.743

要使用以下步骤创建`stable`分支：`VisualHg`

1.  单击Visual Studio 中的“**更新到修订版”按钮**
2.  在**更新到：**下拉列表中，选择您的标签，然后按**更新**
3.  单击Visual Studio 中的**提交按钮**
4.  单击提交消息上方的**分支：默认按钮**
5.  选择**Open a new named branch**，在`stable`旁边的框中输入，然后按**Ok**
6.  输入相关消息 - 可能是“创建稳定分支”
7.  按**Commit**按钮并确认您要创建新分支。

这已经创建了您的`stable`分支，并且它具有您发布的内容，除了您创建的标签仍在`default`分支上。如果要移动它，可以从工作台执行如下操作：

1.  单击Visual Studio 中的**Repo Browser按钮**
2.  右键单击最后一个修订版，`stable`然后单击弹出菜单上的**标记...**
3.  从下拉列表中选择您的标签
4.  展开选项部分并选中**替换现有标签 (-f/--force)**
5.  单击**移动**，然后单击**关闭**

如果您正在使用中央存储库，那么您需要通过单击TortoiseHg 同步窗口的**选项按钮并勾选****允许推送新分支 (--new-branch)**来指定要推送新分支在你推动改变之前。

将来，当您想要发布另一个版本时，您将合并 from `default`to`stable`然后标记。`stable`要将更改从`default`into合并，`stable`请执行以下操作：

1.  单击Visual Studio 中的**Repo Browser按钮**
2.  找到 中的最新更改`stable`，右键单击，然后单击**更新...**
3.  在 中找到最新的更改`default`，右键单击然后单击**与本地合并...**
4.  单击**下一步**
5.  下一页可能会告诉您需要解决冲突 - 为此，单击带下划线的蓝色已**解决**，并通过在顶部框中选择冲突并按下右侧所需的按钮来解决弹出对话框中的冲突。
6.  下一页应该说“没有合并冲突，准备提交” - 单击**下一步**
7.  接受默认消息或用您自己的消息覆盖，然后按**立即提交**
8.  按**完成**

要以另一种方式合并，请在步骤 1 中更新到并在步骤 3 中`default`合并。`stable`

要在您的机器上有两个文件夹，一个包含`default`另一个`stable`，您只需再次克隆存储库，并将一个更新到`default`分支，另一个更新到`stable`分支。

# iphone - “取消栅格化” UIView 层

> ID：15618672
> 
> 赞同：2
> 
> 时间：2013-03-25T15:29:55.550
> 
> 标签：iphone, ios, objective-c, uiview

我创建了一个带有三个子视图（UIButtons）的 UIView。

然后我将它作为子视图添加到 collectionView 中。（如菜单）

这当然会减慢 FPS。为了不影响滚动性能，我栅格化了 UIView 的图层。这按预期工作，但我现在想在动画停止时“取消栅格化” UIView 层，以便我能够再次使用按钮。

有小费吗？先感谢您！

**编辑：**

我努力了：

```
[myView setNeedsLayout]; 
```

和

```
myView.layer.shouldRasterize = NO;
[myView.layer setNeedsDisplay]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T23:00:23.177

It might be as simple as setting the view's layer property `shouldRasterize` to `NO`.

As pointed out by MightyLeader my suspicion that the fix is in the things you tried turned out to be true. View not layer:

```
[myView setNeedsDisplay]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:57:28.657

不要在图层上调用 setNeedsDisplay，在视图上调用它：[myView setNeedsDisplay]，这应该会导致它重新渲染视图和图层层次结构

# linux - 使用 -Dsvnkit.http.sslProtocols="SSLv3" 选项启动 Jenkins

> ID：15618674
> 
> 赞同：2
> 
> 时间：2013-03-25T15:30:00.763
> 
> 标签：linux, svn, jenkins, tomcat6

我有关于 Jenkins svn sheckout 的问题。我为我的问题找到了可能的解决方案，上面写着“使用 -Dsvnkit.http.sslProtocols="SSLv3" 启动 jenkins ”问题是我不知道该怎么做。Jenkins是tomcat6上的.war文件，在centos上运行。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:18:23.337

You want to add this to CATALINA_OPTS in your tomcat start script. Depending on how your tomcat is installed, this could be a script in init.d or catalina.sh somewhere. I personally use a wrapper script to start Tomcat with Jenkins as a war.

Reference: [https://serverfault.com/questions/139435/where-to-set-java-heap-options-e-g-xmx-for-tomcat-6-under-ubuntu-9-04](https://serverfault.com/questions/139435/where-to-set-java-heap-options-e-g-xmx-for-tomcat-6-under-ubuntu-9-04)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T09:07:47.707

在 CentOS 中，您应该在以下位置添加自定义 JAVA 选项

> /etc/sysconfig/jenkins

把你的参数放在一行：

> JENKINS_JAVA_OPTIONS="-Djava.awt.headless=true **-Dsvnkit.http.sslProtocols='SSLv3'** "

并重启服务

> 服务詹金斯重启

这是最佳实践，您可以修改 catalina 脚本或 /etc/init.d/jenkins 脚本，但在 jenkins 升级后存在丢失更改的风险。

# c++ - 如何初始化可变长度的无符号字符数组？

> ID：15618676
> 
> 赞同：5
> 
> 时间：2013-03-25T15:30:03.193
> 
> 标签：c++, c, arrays, char, unsigned

我通读了这个（[如何初始化一个无符号字符数组？](https://stackoverflow.com/questions/9352043/how-to-initialize-a-unsigned-char-array)），但它并没有完全回答我的问题。

我知道我可以创建一个这样的字符串数组：

```
const char *str[] =
{
  "first",
  "second",
  "third",
  "fourth"
}; 
```

如果我想 write() 这些我可以使用： write(fd, str[3], sizeof(str[3]));

但是如果我需要一个可变长度的无符号字符数组怎么办？我试过这个：

```
const unsigned char *cmd[] =
{
  {0xfe, 0x58},
  {0xfe, 0x51},
  {0xfe, 0x7c, 0x01, 0x02, 0x00, 0x23},
  {0xfe, 0x3d, 0x02, 0x0f}
}; 
```

我得到 gcc 编译警告，例如 *“标量初始化器周围的大括号”*“初始化使指针从整数而不强制转换”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:46:15.527

这是一种方式

```
const unsigned char cmd1[] = {0xfe, 0x58};
const unsigned char cmd2[] = {0xfe, 0x51};
const unsigned char cmd3[] = {0xfe, 0x7c, 0x01, 0x02, 0x00, 0x23};
const unsigned char cmd4[] = {0xfe, 0x3d, 0x02, 0x0f};

const unsigned char *cmd[] =
{
  cmd1,
  cmd2,
  cmd3,
  cmd4
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:30:47.277

这对我有用（使用 clang 和 gcc 编译）：

```
const unsigned char *cmd[] =
{
    (unsigned char[]){0xfe, 0x58},
    (unsigned char[]){0xfe, 0x51},
    (unsigned char[]){0xfe, 0x7c, 0x01, 0x02, 0x00, 0x23},
    (unsigned char[]){0xfe, 0x3d, 0x02, 0x0f}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:48:49.090

使用多维数组时，您必须指定最后一维的大小，以便编译器计算正确的地址算术。您的 cmd 指针数组有两个维度。第二个维度的最大长度为 6 个元素，因此：

```
const unsigned char cmd[][6] =
{
      {0xfe, 0x58},
      {0xfe, 0x51},
      {0xfe, 0x7c, 0x01, 0x02, 0x00, 0x23},
      {0xfe, 0x3d, 0x02, 0x0f}
}; 
```

来自 ANSI C 标准：“如果初始化未知大小的数组，则其大小由具有显式初始化程序的最大索引元素确定。在其初始化程序列表的末尾，数组不再具有不完整的类型。”

[ANSI C 标准草案 C11](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)

# c# - 分配列表 到另一个列表 按价值而非参考

> ID：15618678
> 
> 赞同：2
> 
> 时间：2013-03-25T15:30:07.133
> 
> 标签：c#, list

好的，所以我有从 db 中提取的 List list1，我想将其临时保存到 List list2，在我的 list1 上执行一些操作，将其保存到 db，然后使用 list2 并将其保存到 db。问题是，因为一旦我更改了 list1 中的某些字段，它就会通过引用传递，所以 list2 已经更新。

有没有办法将整个列表作为值而不是参考传递？

这里有一些代码让它更清楚：

```
var CurrentMenuItems = dbContext.menu_items.Where(m => m.optgroup == currentGroup && m.day_id == menuItem.day_id).ToList();

           List<menu_item> MenuItemsToBeEditedAfterSubmitChanges = CurrentMenuItems;// we need to store this by value, so we can update it later

            byte ItemIncrease = 50; // To store temp value so we can avoid duplicate entry for item number 

            foreach (var item in CurrentMenuItems)
            {
                item.optgroup = nextGroup;
                item.item = ItemIncrease;

                ItemIncrease++; 
            }

            var menuItemsToBeReplaced = dbContext.menu_items.Where(m => m.optgroup == nextGroup && m.day_id == menuItem.day_id).ToList(); // we want to move all items within this group

            dbContext.SubmitChanges();

            foreach (var item in menuItemsToBeReplaced)
            {
                item.optgroup = currentGroup;

                item.item = (byte)(item.item - 1);

            }

            dbContext.SubmitChanges();

            // After first save, update the first group of menu items

            foreach (var item in MenuItemsToBeEditedAfterSubmitChanges)
            {

                item.optgroup = nextGroup;
                item.item = (byte)(item.item + 1);

            }

            dbContext.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:32:59.340

您可以尝试使用`List<T>`带有`IEnumerable<T>`. 例子：

```
List<int> originalList = new List<int>() { 0, 1, 2 };
List<int> copiedList = new List<int>(originalList);
copiedList[2] = 3; // originalList[2] still is 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:43:23.430

只是另一个解决方案：

```
IList<string> f = new List<string>();

var t = f.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:38:27.563

我认为给定的答案仅适用于值类型。对于引用类型，您应该实现一个克隆方法，该方法将所有数据复制到同一类的新实例上然后对于列表中的每个元素，您在另一个列表中添加克隆对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:33:36.383

```
List<object> list2 = new List<object>(list1); 
```

这应该会阻止您引用其他列表，因为这些值已被复制。

请参阅：http: [//msdn.microsoft.com/en-us/library/fkbw11z0.aspx](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)

# html - 使用 html5 在饼图中绘制线段

> ID：15618680
> 
> 赞同：0
> 
> 时间：2013-03-25T15:30:18.787
> 
> 标签：html, canvas, html5-canvas

我有以下绘制饼图的函数。`pieValues`是要绘制的一组值。`pieTotal`是所有值的总和，`colors`是填充饼图段的颜色数组

```
function drawPieChart()
{       
    for (var i = 0; i < pieValues.length; i++) 
    {
        ctx.fillStyle = colors[i];
        ctx.beginPath();
        ctx.moveTo(center[0],center[1]);
        // arc(x, y, radius, startAngle, endAngle, anticlockwise)
        ctx.arc(center[0],center[1],radius,lastPosition,lastPosition+(Math.PI*2*(pieValues[i]/pieTotal)),false);
        ctx.lineWidth = 1;     
        ctx.strokeStyle = 'black';
        ctx.stroke();
        ctx.lineTo(center[0],center[1]);
        ctx.fill();
        lastPosition += Math.PI*2*(pieValues[i]/pieTotal);

    }
} 
```

我想从每个段中画一条线，目的是使该段的值在线上。

有没有一种简单的方法可以在每个段上画一条线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:21:03.867

答案是

```
var fChartY = center[1];
var fChartX = center[0];

var fChartYTo = fChartY + (radius +20)*Math.sin(lastPosition + .5);
var fChartXTo = fChartX + (radius +20)*Math.cos(lastPosition + .5);     
drawLine(fChartX, fChartY, fChartXTo, fChartYTo); 
```

`fChartY,fChartX`作为饼图的中心

# wordpress - wp本地化：不查看po文件

> ID：15618681
> 
> 赞同：1
> 
> 时间：2013-03-25T15:30:19.073
> 
> 标签：wordpress, localization

我与客户的 wordpress 页面合作。它是用英语开发的，但现在需要用德语更改。

例如，我对一个特定术语的一种特定翻译感兴趣。我已经设置了配置文件，它将默认语言更改为 de_DE，但没有任何反应。有：

1) wp-content/languages/de_De.mo 文件我不知道里面有什么，我应该关心吗？

2) wp-content/themes/framework/localization/german/de_DE.po 这个文件包含我需要的翻译。例如：

```
#@ default
msgid "Order Number"
msgstr "Order Number2" 
```

所以，我认为这应该把“订单号”改为“订单号2”，对吧？我想知道，为什么 po 文件在“german”文件夹中？是否以这种方式被认可？如何检查这个文件是否真的被加载了？

顺便说一句，我已经尝试将此文件也移动到上一级：

wp-content/themes/framework/localization/de_DE.po

没有改变。

3) wp-content/themes/framework/library/functions/general-functions.php 这个文件加载了我需要翻译的术语。例如：

```
__('Order Number') 
```

但是 wordpress 不会查看我的 *.po 翻译。它应该输出'Order number2'，但它输出'Order number'。

我检查了语言是否设置为 de-DE （我在需要回显术语之前使用 get_bloginfo('language') 选项检查了它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:20:05.863

**1）`wp-content/languages/de_De.mo`**
这个文件包含（大部分）里面所有核心文件的翻译`example.com/wp-includes/`。并且应该有另一个文件 . `admin-de_DE.mo`，其中包含 . 的字符串`example.com/wp-admin/`。

**`define('WPLANG', 'de_DE');`**当您在文件中声明时，这些翻译会为后端接口激活`example.com/wp-config.php`。

**2）`wp-content/themes/framework/localization/german/de_DE.po`**
这个是主题翻译​​（对于网站的前端，`example.com`）。
问题来了*：*文件
**`.po`**是用于翻译字符串的主文件，并且是WordPress**实际读取****`.mo`**的二进制文件。因此，当 a被修改时，您必须基于它生成一个新的。**`.po``.mo`**

 **您需要[PoEdit](http://www.poedit.net/screenshots.php)软件来打开和编辑`po`文件，并且在保存更改时应用程序会自动呈现一个新`.mo`文件。

这些`.mo`是您必须上传到服务器的唯一内容。将主文件的备份保存`.po`在安全的地方，因为如果您更新主题，您将失去主文件。

查看此问答了解更多详情：[**如何通过 .po .mo 翻译插件？**](https://wordpress.stackexchange.com/q/57219/12615)**

# c# - 在asp.net c#中对数据集进行排序

> ID：15618682
> 
> 赞同：1
> 
> 时间：2013-03-25T15:30:19.710
> 
> 标签：c#, asp.net, dataset

我正在尝试对数据进行排序，但是当我从一页跳转到另一页时，名称并没有得到排序。

```
return new dao_StudentGroupStudents().GetNewStudentbyGroup(bureauId, search, groupId, currentPage, pageSize, out totalCount);

    /// <summary>
    /// Get All the students from that Bureau.
    /// </summary>

    public DataSet GetAllStudentGroupByBureau(int? GroupId, int? BureauID)
    {
        DataSet ds = new dao_StudentGroup().GetDataSet(null, null, BureauID);
        ds.Tables[0].DefaultView.Sort = "grouptitle asc";
        return ds;
    } 
```

我正在输入这个，现在我得到找不到列 columnName。

公共数据集 GetAllStudentGroupByBureau(int?GroupId, int? BureauID) { DataSet ds = new dao_StudentGroup().GetDataSet(null, null, BureauID);

```
ds.Tables[0].DefaultView.Sort = "columnName ASC";

DataTable dt = ds.Tables[0].DefaultView.ToTable();

return ds; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:34:25.817

尝试这个：

```
DataSet ds = new dao_StudentGroup().GetDataSet(null, null, BureauID);
ds.Tables[0].DefaultView.Sort = "grouptitle asc";
ds.Tables[0] = ds.Tables[0].DefaultView.ToTable();
return ds; 
```

**更新**

你可以简单地这样做：

```
public DataSet GetAllStudentGroupByBureau(int ? GroupId, int ? BureauID) 
{
    DataSet ds = new dao_StudentGroup().GetDataSet(null, null, BureauID);

    ds.Tables[0].DefaultView.Sort = "grouptitle asc";        
    DataTable dt = ds.Tables[0].DefaultView.ToTable();
    ds.Tables[0].Rows.Clear();
    foreach (DataRow row in dt.Rows)
       ds.Tables[0].Rows.Add(row.ItemArray);

    return ds;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:47:29.407

您可以尝试以下方法。记住，你不能给 ds.Table[] 赋值。因此，您需要创建一个新数据表并将其添加到新的或现有的数据集

```
 ds.Tables[0].DefaultView.Sort = "columnName ASC";

    DataTable dt = ds.Tables[0].DefaultView.ToTable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T06:12:48.003

数据视图 dv = ds.Tables[0].DefaultView;

```
dv.Sort = "grouptitle ASC"; 

ds = dv.ToTable(); 
```

试试这些

默认它来自 ds.table[0] 无需提及它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:51:42.763

你可以试试这个：

```
 //convert DataSet table to DataView  
    DataView dv = ds.Tables[0].DefaultView; 

    //apply the sort   
    dv.Sort = "grouptitle ASC"; 

    //save back into our dataset  
    ds.Tables[0] = dv.ToTable(); 
```

# zend-framework2 - 模块管理器、模块监听器和模块加载器有什么区别？

> ID：15618688
> 
> 赞同：0
> 
> 时间：2013-03-25T15:30:35.800
> 
> 标签：zend-framework2

您能否解释一下，zf2 中的模块管理器、Listners 和 Loader 是如何关联的。

当调用一个模块时，先加载哪个模块，流程是什么。

这3个将如何使用以下代码，

```
 public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:06:18.333

ModuleManager 将一些侦听器附加到 eventmanager 的实例。我们对 AutoloadListener 感兴趣，它以最高优先级 - 9000 附加。这意味着它将首先处理。当 loadModule 事件被触发时，它会创建 AutoloaderFactory 实例，其中自动加载器配置取自 Module 的 getAutoloaderConfig() 方法作为参数。

# c# - 在运行时更改图像控件的 z 顺序 windows phone

> ID：15618689
> 
> 赞同：2
> 
> 时间：2013-03-25T15:30:42.340
> 
> 标签：c#, silverlight, windows-phone-8, z-order

我在画布上放置了几个图像控件。`z order`当用户单击应用栏按钮时，我想更改所选图像控件的。

在`image control`我的课上

```
 public int ImageZOrder 
    { 
        get
        {
            return _imageZOrder;            
        }
        set 
        {
            _imageZOrder = value;
            Canvas.SetZIndex(ImageControl, _imageZOrder);
        }

    } 
```

在应用栏中

```
 private void appBarFront_Click(object sender, EventArgs e)
    {
        currentCharObject.ImageZOrder += 1;
    } 
```

我期待看到所选图像立即被带到其他图像控件的前面。但是上面的代码不起作用。显然我错过了一些东西。我是否必须使用新的 z 顺序值重新绘制画布上的图像控件？

**更新 1**

在 XAML 中，我有以下内容。每个图像都作为孩子添加到`cvsNote`

```
 <Grid x:Name="GridCanvas" Grid.Row="0">
        <Canvas x:Name="cvsNote" />
    </Grid> 
```

**更新 2** 我只想补充一点，“图像控件”包含在一个特定的类中，它只是该类的许多属性之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:00:23.660

您可以在代码中更改 ZIndex。

假设这个 xaml：

```
<Canvas Grid.Row="1" Tap="gridTapped">
    <Image x:Name="ImgA" Source="Assets/A.png" />
    <Image x:Name="ImgB" Source="Assets/B.png" />
    <Image x:Name="ImgC" Source="Assets/C.png" />
</Canvas> 
```

您可以使用以下内容更改位于顶部的图像：

```
private int TopZindex = 10;

private void gridTapped(object sender, GestureEventArgs e)
{
    var rand = new Random();
    switch (rand.Next(0, 3))
    {
        case 0:
            Canvas.SetZIndex(this.ImgA, ++TopZindex);
            break;
        case 1:
            Canvas.SetZIndex(this.ImgB, ++TopZindex);
            break;
        case 2:
            Canvas.SetZIndex(this.ImgC, ++TopZindex);
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:39:27.253

您可以更改画布中子图像的顺序

```
<Canvas>
    <Image Name="a"/> 
    <Image Name="b"/> 
    <Image Name="c"/> 
</Canvas> 
```

更改顺序

```
<Canvas>
    <Image Name="c"/> 
    <Image Name="a"/> 
    <Image Name="b"/> 
</Canvas> 
```

将更改 z 顺序。

如果您想在代码中完成此操作，例如：

```
List<Image> AllImages= new List<Image>();
...
Canvas.Children.Remove(img1); //This will remove img1, 
Canvas.Children.Add(img1);    //This will add img1 to the tail. 
```

# php - 按 rand 和 post_date wordpress 对查询进行排序

> ID：15618695
> 
> 赞同：1
> 
> 时间：2013-03-25T15:30:59.170
> 
> 标签：php, wordpress

我正在编写一个简单的脚本来按 rand 和 post_date 显示帖子顺序。我在下面尝试了这个，但它不起作用：

```
$myposts = get_posts('numberposts=4&orderby=rand post_date&order=ASC); 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:39:30.637

您的代码有效，但添加`post_date`之后`rand`根本没用......

SQL 查询将如下所示：

```
SELECT [...] ORDER BY RAND() ASC, post_date ASC 
```

`RAND()`将返回浮点值，它不太可能返回两次相同的值，因此按 post_date （在 rand 之后）排序是没有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:39:18.323

尝试

```
$myposts = get_posts('numberposts=4&orderby=post_date,rand&order=ASC); 
```

# android - 在 xamarin 中，如何获取 Android 设备的当前语言？

> ID：15618699
> 
> 赞同：10
> 
> 时间：2013-03-25T15:31:18.070
> 
> 标签：android, xamarin

如何在 Xamarin（适用于 Android）中获取设备的当前语言？

得到了语言`context.Resources.Configuration.Locale.Language`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-07-27T14:01:07.730

这是我使用的跨平台版本。显然，您可以从中提取所需的任何属性`CurrentUICulture`。

```
return CultureInfo.CurrentUICulture.TwoLetterISOLanguageName; 
```

也许它会帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:34:50.433

这似乎是您正在寻找的： [http ://androidapi.xamarin.com/?link=T%3aSystem.Globalization.RegionInfo](http://androidapi.xamarin.com/?link=T%3aSystem.Globalization.RegionInfo)

RegionInfo 类似乎可以访问各种方法来读取该语言信息并在您的比较中使用。

基于这个问题，我去 Xamarin 文档寻找答案： [Get the current language in device](https://stackoverflow.com/questions/4212320/get-the-current-language-in-device)

# linux - 在 Linux 启动之前清除 RAM 区域

> ID：15618701
> 
> 赞同：0
> 
> 时间：2013-03-25T15:31:21.203
> 
> 标签：linux, kernel, ram

是否可以在 linux 内核启动之前清除手动指定的 RAM 地址范围？或者也许在启动的早期阶段？

我发现如何排除 RAM 地址，但我想在启动后使用这些地址。

[更新]：我有无法更改的 3d 派对引导加载程序。此引导加载程序使用 RAM 中的一些内存作为帧缓冲区，以在屏幕上显示一些图片。在 initramfs 解压缩阶段启动 linux 内核的过程中，我们重叠了这个内存，假设这个内存没有被使用。所以屏幕上的图片会损坏。

[Update_2]：我将那个 RAM 区域归零，但它没有修复图片损坏。Linux 在启动期间仍然使用此内存并覆盖图片。

也许可以从引导过程中排除这个内存区域（由引导加载程序使用）并稍后添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:05:15.853

从您的更新看来，正在发生的事情是 Linux 认为这个内存区域（我假设您的 LCD 外围设备正在使用 DMA 向显示器发射）只是可以免费使用的常规 RAM。由于 linux 写入该 RAM 区域的任何内容都不是显示数据，它仍然通过 DMA 输出到 LCD，但它现在已损坏。

由于您无法更改第 3 方引导加载程序，因此您可以使用的一种解决方案是制作自己的辅助引导加载程序，并让第 3 方引导加载程序跳转到该引导加载程序而不是 linux。此辅助引导加载程序将保存通常由您的第 3 方引导加载程序传递给 linux 的所有参数。我认为您真正希望此辅助引导加载程序执行的操作是关闭将输出馈送到 LCD 的 DMA，然后您的屏幕应该变为空白。完成后，您可以继续像往常一样跳入 linux。如果辅助引导加载程序也偏移了一些 linux 正在传递的内存位置参数，您可能需要稍微修改 linux 传递的参数。

# c++ - 如何创建发送 HTTP-GET/POST 的应用程序？

> ID：15618707
> 
> 赞同：-4
> 
> 时间：2013-03-25T15:31:33.543
> 
> 标签：c++, html

我正在尝试编写一个与 Web 服务器通信的应用程序。我创建了一个服务器，将其设置为代理，然后我收到以下消息：

```
GET http://SOMETHING.SG/ HTTP/1.1
Host: SOMETHING
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Cookie: [...SOMETHING...]
Connection: keep-alive 
```

1）这些行在说什么？（例如壁虎）

2) 是否可以在没有这些行的情况下创建 GET 消息？

3）有什么东西会随着时间的推移而改变，并且不起作用？

4) 是否可以创建一个 C++ 内置库对我有什么用？

5-8) 与 HTTP-POST 相同的问题

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:41:19.840

这是一个 HTTP/1.1 GET 请求`http://index.hu/`。要完全理解整个请求，您可能应该阅读[HTTP/1.1 规范 (RFC2616)](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。

但是快速总结一下：

*   *Host* - 被请求资源的主机
*   *User-Agent* - 描述用于访问资源的用户代理的字符串。此用户代理建议您使用的是 Firefox。Firefox 的布局引擎称为 Gecko。
*   *接受*- 给出所请求资源的首选 MIME 类型。在这种情况下，请求者希望以 HTML 格式接收资源。
*   *Accept-Language* - 给出所请求资源的首选语言。
*   *Accept-Encoding* - 给出所请求资源的首选编码。
*   *Cookie - 由*[RFC2109](http://www.ietf.org/rfc/rfc2109.txt)定义的用于使用 cookie的扩展标头。
*   *连接*- 指定连接选项。在这种情况下，`keep-alive`请求持久连接。

并非所有这些标题都是必需的，您可能还想使用更多标题。规范中给出了所有标题的描述。

有许多 C++ 库可以为您构造和发送 HTTP 请求。一个流行的是[libcurl](http://curl.haxx.se/libcurl/)。还有[官方教程](http://curl.haxx.se/libcurl/c/libcurl-tutorial.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:39:18.880

[libcurl](http://curl.haxx.se/libcurl/)就是这样做的。它包含允许您以编程方式执行 GET/POST 请求的 HTTP 客户端。

# c - 缓冲区大小和从文件中读取

> ID：15618710
> 
> 赞同：0
> 
> 时间：2013-03-25T15:31:39.053
> 
> 标签：c, linux

我已经问过一个类似的问题，但我认为现在问题不同了。我在 Eclipse 和 Linux 机器上用 C 语言编写。

我需要读取测试文件，并且每次都尝试使用不同的缓冲区大小......我知道如果缓冲区的大小太小，我需要在缓冲区上运行几次，但我不知道该怎么做......

这是我的代码（当我在大小为 67108864 的缓冲区上运行时，我遇到了分段错误。*我编辑了我的代码

```
int main(void)
{   int fd;
    char* buff = malloc (67108864);
    if (buff){
    fd = open("testfile.txt", O_RDONLY);
    if (fd >= 0) {
        while (read(fd,buff,67108864)!=0){}
        close(fd);
    }
    }
free(buff);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:34:12.893

这不是`char[]`：

```
char* buff[67108864]; 
```

但是是一个数组`char*`。改成：

```
char buff[67108864]; 
```

此外，堆栈的大小`buff`可能太大。堆栈的典型大小为 1MB（1048576 字节），但`buff`远远超过（64MB！）会导致堆栈溢出错误的大小。如果您希望使用此缓冲区动态分配它，请使用[`malloc()`](http://en.cppreference.com/w/c/memory/malloc)，并稍后释放它，请使用[`free()`](http://en.cppreference.com/w/c/memory/free)：

```
char* buff = malloc(67108864);
if (buff)
{
    /* Use 'buff' and then release it. */

    free(buff);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T15:33:11.867

Remove `*`，您正在声明一个指针数组，但您需要一个字符数组。

```
 char buff[67108864]; 
```

*我不确定`67108864`它对于堆栈来说太大了。尝试在堆上进行。*

# c# - 未知对象的 JSON API 操作参数

> ID：15618711
> 
> 赞同：1
> 
> 时间：2013-03-25T15:31:44.470
> 
> 标签：c#, asp.net-mvc, json, api, reflection

我正在创建一个通用 JSON API 来处理任何对象，每个对象所需的额外编码很少。这是所有其他控制器（EmployeeController、ProductController 等）继承的 BaseController：

```
public partial class BaseController<T> : Controller where T : ModelBase<T>, new()
{
    [RestHttpVerbFilter]
    public ActionResult Index (long? Id, string Property, long? PropertyId, T Model, string Format, string HttpVerb)
    {            
        switch (HttpVerb)
        {
            case "GET":
                return Json(Get(Id.Value, Property, PropertyId), JsonRequestBehavior.AllowGet);
            case "POST":
                return Json(Post(Id, Property, PropertyId, Model));
            case "PUT":
                return Json(Put(Id.Value, Property, PropertyId, Model));
            case "DELETE":
                return Json(Delete(Id, Property, PropertyId));
        }
        return Json(new { error = "Unknown HTTP verb" });
    }        

    internal object Post (long? Id, string Property, long? PropertyId, T Model)
    {
        if (!Id.HasValue && string.IsNullOrEmpty(Property) && !PropertyId.HasValue && Repository.Add(Model))
        {
            return Get(Model.ID);
        }            
        return new { error = "Unable to save new " + typeof(T).Name };
    }

    internal object Put (long? Id, string Property, long? PropertyId, T Model)
    {
        if (Id.HasValue)
        {
            Model.ID = Id.Value;
            if (string.IsNullOrEmpty(Property) && !PropertyId.HasValue && Repository.Update(Model))
            {
                return Get(Id.Value);
            }
        }
        return new { error = "Unable to update " + typeof(T).Name };
    } 
```

我删除了一些不相关的代码（获取、删除）。现在，我已经设置好了，所以你可以`GET`向类似的东西发出请求`http://example.com/API/Venue/43/Events`，这将返回 ID 为 43 指定的地点的所有事件。你还可以`POST`创建`http://example.com/API/Venue`一个新的地点。我希望能够`POST`为该`http://example.com/API/Venue/43/Events`场地创建一个新活动。

在`Index`动作的参数中，现在`Model`对象在发布时会拾取 Venue。当我`POST`将 Event 对象添加到操作时，`Model`参数仍然会拾取它。我尝试用`T Model`以下内容替换，导致以下问题：

*   `object Model`，然后根据它被`POST`编辑到的 URL 进行转换。这给出了一个`System.InvalidCastException`
*   `dynamic Model`，然后用`(T)Model`. 这也给出了一个`System.InvalidCastException`
*   `dynamic Model`，然后用`Model as T`. `Model`is then `null`，意味着演员阵容失败
*   `IModelBase Model`, 一个接口，它不起作用，因为模型绑定器试图实例化它

我原以为 a`dynamic`会起作用，但我似乎无法避免`InvalidCastException`. 顺便说一句，上面的代码适用于控制器的对象（`POST`ing a Venue to `http://example.com/API/Venue`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:54:42.960

这可能有点含糊，但希望我的解决方案能帮助任何不幸来到这里的人。首先，我`Model`从 Index 操作中删除了参数。然后我创建了以下帮助类：

```
internal static class Deserializer
{
    internal static Dictionary<string, string> Deserialize (System.Web.HttpRequestBase Request)
    {
        Request.InputStream.Position = 0;
        string Json = new StreamReader(Request.InputStream).ReadToEnd();
        return new JavaScriptSerializer().Deserialize<Dictionary<string, string>>(Json);
    }
} 
```

然后我在内部 Post 方法中发现了正在`POST`编辑的 URL，然后使用以下帮助程序类来构造正确的对象：

```
internal static class ModelBuilder
{
    internal static object Build (Dictionary<string, string> Model, Type ModelType)
    {
        var Instance = Activator.CreateInstance(ModelType);
        foreach (var Property in ModelType.GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly))
        {
            var PropertyType = Property.PropertyType;
            if (Model.ContainsKey(Property.Name))
            {
                Property.SetValue(Instance, Convert.ChangeType(Model[Property.Name], PropertyType), null);
            }
        }
        return Instance;
    }
} 
```

这需要重构以处理奇怪的情况，但到目前为止我还没有遇到任何问题。

# javascript - 使用 jquery 验证插件，jquery 验证不起作用

> ID：15618714
> 
> 赞同：0
> 
> 时间：2013-03-25T15:31:54.920
> 
> 标签：javascript, jquery, html, css

我尝试使用 jquery 验证插件进行简单验证，但无法实现。单击提交按钮时没有任何变化，请帮助我

我已经提到了下面的代码，

提前致谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
     <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js" />
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.js" />
    <script type="text/javascript">
        $(document).ready(function () {
            $('#btnSubmit').click(function () { 
            $('#logform').validate({
                rules: {
                    txtUsr: {
                        required: true

                    },
                    txtPass: {
                        required: true

                    }

                },
                messages: {
                    txtUsr: {
                        required: 'Please enter username'
                    },
                    txtPass: {
                        required: 'Please enter password'
                    }
                }

            });

        });

        });

    </script>
</head>
<body>
<div id='LoginDiv' style='width:400px;height:300px;background-color:green;'>
    <form method="post" action="" id='logform'>
        User Name : <input type="text" id='txtUsr' name='txtUsr' style='margin-top:12px'/>
        <br/>
        <br/>
        Password : <input type="text" id='txtPass' name='txtPass' /> 
        <br/>
        <br/>
        <input type="submit" id='btnSubmit' value='Submit' />
    </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:41:14.743

您不应该在 click 事件处理程序中调用 validate ，而是作为初始化步骤：

```
$(document).ready(function () {
    $('#logform').validate({
        rules: {
            txtUsr: {
                required: true
            },
            txtPass: {
                required: true
            }
        },
        messages: {
            txtUsr: {
                required: 'Please enter username'
            },
            txtPass: {
                required: 'Please enter password'
            }
        }
    });
}); 
```

它将自己连接到 keyup 并提交事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:43:57.563

## 问题是由于脚本自闭合标签造成的。

# 试试这个：

**[http://jsfiddle.net/aidioo7/FFTkJ/](http://jsfiddle.net/adiioo7/FFTkJ/)**

利用

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.js"></script> 
```

代替

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js" />
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.js" /> 
```

还要检查一下**[为什么自闭脚本标签不起作用？](https://stackoverflow.com/q/69913/467853)**

# java - java的质数程序

> ID：15618721
> 
> 赞同：2
> 
> 时间：2013-03-25T15:32:12.743
> 
> 标签：java, numbers, primes

我是编程新手，需要有关 java 程序的帮助。我希望我的程序返回 1 到 10 之间的所有质数。

```
 for(int i=1; i<=10; i++){
        int factors = 0;
        int j=1;

        while(j<=i){
            if(i % j == 0){
                factors++;
            }
            j++;
        }
        if(factors==2){
            System.out.println(j);
        }
    } 
```

而不是收到 2,3,5 和 7 我收到 3,4,6 和 8

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T15:35:45.517

您打印`j`而不是`i`，将您的`println()`行更改为：

```
System.out.println(i); 
```

在-loop`j = i + 1`之后，您的结果“太大了” 。`while`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:38:15.787

只打印 i 而不是 j

```
for(int i=1; i<=10; i++){
    int factors = 0;
    int j=1;

    while(j<=i){
        if(i % j == 0){
            factors++;
        }
        j++;
    }
    if(factors==2){
        System.out.println(i);
    }
} 
```

# amazon-web-services - AWS：无法确定流式上传的流大小

> ID：15618722
> 
> 赞同：1
> 
> 时间：2013-03-25T15:32:15.757
> 
> 标签：amazon-web-services, amazon-s3

我正在尝试将图像文件从临时 php 文件存储路径上传到 S3。文件大小约为 100 kb，最大为 500 kb。

上传发生时出现此错误：

```
致命错误：未捕获的异常“RequestCore_Exception”，消息“无法确定流式上传的流大小。” 在 /var/www/project/releases/201303242100/application/libraries/AWS_SDK_1.6.0/lib/requestcore/requestcore.class.php:725
堆栈跟踪：
#0 /var/www/project/releases/201303242100/application/libraries/AWS_SDK_1.6.0/lib/requestcore/requestcore.class.php(843): RequestCore->prep_request()
#1 /var/www/project/releases/201303242100/application/libraries/AWS_SDK_1.6.0/services/s3.class.php(954): RequestCore->send_request()
#2 /var/www/project/releases/201303242100/application/libraries/AWS_SDK_1.6.0/services/s3.class.php(1465): AmazonS3->authenticate(
......
```

我认为我不需要在这里进行分段上传，因为文件不是太大。此外，上传工作从我的本地系统到 S3，但是当我在 AWS 上部署 PHP 实例时，上传给了我错误。任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:25:21.577

I was missing the gd2 library which was being used for the image handling. After installing it everything worked like a charm! Thanks for the help!

# c# - C# 电话号码检查

> ID：15618725
> 
> 赞同：2
> 
> 时间：2013-03-25T15:32:17.310
> 
> 标签：c#, regex

我正在验证 10 位北美电话号码（编码如下）。我只接受数字。我似乎无法弄清楚如何更改它，以便如果输入的数字以 911、411 或 0 开头，则会引发错误。

```
string phoneNum = phoneTextBox.Text;
Regex regex = new Regex(@"^\d{10}$");
Match match = regex.Match(phoneNum);
if (!match.Success)
{
   MessageBox.Show(phoneNum + " is not a valid 10 digit phone number (Ex. 6134561234)");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:39:57.087

尝试这个：

```
Regex regex = new Regex(@"^(?!411|911|0)\d{10}$");
                           +++++++++++++ 
```

它们被称为**否定前瞻断言**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:50:06.560

您可以使用更高级的模式。尝试在这里找到一个 - [http://regexlib.com/DisplayPatterns.aspx?cattabindex=6&categoryId=7](http://regexlib.com/DisplayPatterns.aspx?cattabindex=6&categoryId=7)

我试过运行 Regex Tracer，它找到了正确的数字 4111111111 模式 - ^\d{10}$。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-08T16:05:32.550

另一种选择 - 电话号码解析器： http: [//www.codeproject.com/Articles/31998/Advanced-Phone-Number-Type-Implementation](http://www.codeproject.com/Articles/31998/Advanced-Phone-Number-Type-Implementation)

# php - 在左连接上两次返回同一行

> ID：15618727
> 
> 赞同：0
> 
> 时间：2013-03-25T15:32:18.357
> 
> 标签：php, mysql

我正在运行查询以查找产品的数量是否大于 0 以及其日期是否满足某个参数。这些结果通过一个while循环运行以在页面上列出。我遇到的问题是，由于我的参数，它从每个表中选择了两次相同的 ID……这导致项目显示两次。我当然不想要那个。

这是我的查询。

```
SELECT * 
    FROM `trade_show_inventory` 
    LEFT JOIN `trade_show_reserved` 
    ON `trade_show_inventory`.`ID` = `trade_show_reserved`.`ProductID` 
    WHERE `trade_show_inventory`.`Quantity` > 0  
    OR `trade_show_reserved`.`DateReserved` + INTERVAL 5 DAY <= '2013-03-31' 
    ORDER BY `trade_show_inventory`.`ProductName` 
```

如果我让数量为 1 和 1 的用户签出两次相同的产品，我的查询结果如下图所示。查看 ID 6，您将看到结果。我希望结果是，我希望能够从 DateReserved 查询所有日期，同时检查大于 0 的数量......同时不要两次显示相同的产品。DateReserved 来自不同的表，而不是图片中突出显示的 ID。我将如何实现这个结果？我需要在我的while循环中做些什么吗？任何想法将不胜感激。

这是我的while循环。

```
 while ($results = mysqli_fetch_assoc($query)) {
        echo $results['ProductName'];
        echo
        "<li>
            <img style='width: 200px; height: 200px' src='images/inventory/" . $results['Image'] . "'/>" . 
            "<div class='infoContainer'>" .
            "<a class='productLink' href='/ts/selectItems.php?status=active&id=" . $results['ID'] . "'>" . $results['ProductName'] . "</a>" . 
            "<br />" . 
            "<i>Currently Available </i>" . 
            "<i class='quantity'>" . $results['Quantity'] . "</i>" . 
            "</div>" .
        "</li>";
    } 
```

![查询结果](../Images/781d099fe84e7f58814df91495dd9380.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:48:49.117

```
SELECT [just the columns you need] 
    FROM `trade_show_inventory` 
    LEFT JOIN `trade_show_reserved` 
    ON `trade_show_inventory`.`ID` = `trade_show_reserved`.`ProductID` 
    WHERE `trade_show_inventory`.`Quantity` > 0  
    OR `trade_show_reserved`.`DateReserved` + INTERVAL 5 DAY <= '2013-03-31' 
    ORDER BY `trade_show_inventory`.`ProductName`
    GROUP BY [just the columns you need] 
```

如果从中删除 RID 列，则 GROUP BY 将消除重复项。

# c# - 当 gtk.paned 滑块的位置发生变化时如何通知？（C＃）

> ID：15618731
> 
> 赞同：1
> 
> 时间：2013-03-25T15:32:26.163
> 
> 标签：c#, gtk

这与如何在 gtk.paned 滑块的位置发生变化时得到通知的问题完全相同[？](https://stackoverflow.com/questions/1857255/how-to-be-informed-when-gtk-paned-sliders-position-changed)但在这种情况下，它是关于 GTK#

没有这样的 notify::position 东西。

我试过以下：

```
this.hpaned1.AcceptPosition += new AcceptPositionHandler(Changed); 
```

也

```
this.hpaned1.ButtonReleaseEvent+= new ButtonReleaseEventHandler(Changed); 
```

但两者都不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:17:30.720

Documentation [here](http://docs.go-mono.com/?link=M%3aGLib.Object.AddNotification%28System.String%2cGLib.NotifyHandler%29):

```
this.hpaned1.AddNotification("position", new NotifyHandler(Changed)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:31:19.410

这是GObject 上`notify::position`一种特定类型的信号。`notify`您应该仍然能够连接到该信号并检查它是否适用于该位置。

# c# - 从 C# 程序监控 AWS 服务器性能的最佳方法是什么？

> ID：15618737
> 
> 赞同：2
> 
> 时间：2013-03-25T15:32:51.443
> 
> 标签：c#, performance, amazon-web-services, wmi, snmp

我想在家中通过我自己的 C# 程序、我自己的 AWS 网络进行监控。我已经使用 SNMP 工作并取得了一些进展，但不确定是否是这项工作的最佳工具。

我可以通过几种可能的方式来衡量性能，但不确定哪一种是最好的？（最好我的意思主要是更容易开发和更新）

1.  **开发我自己的 C# 性能监视器**：重新发明轮子？
2.  **SNMP**：我已经尝试过了，但不确定它是否是最好的方法。
3.  **WMI**：不确定是否可能...
4.  **AWS SDK API**：也许可以从这里开始？

所以我的问题是：

**衡量绩效的最佳方法是什么？还有其他选择吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T00:41:51.360

我编写了一份分步指南，以便将 CloudWatch 警报发送到电子邮件地址。当我在 AWS 上的 Cassandra 或 Zookeeper 服务器出现故障时，我使用此过程来设置接收电子邮件。这是链接： [http ://briantarbox.blogspot.com/2013/09/how-to-setup-amazon-cloudwatch-to-send.html](http://briantarbox.blogspot.com/2013/09/how-to-setup-amazon-cloudwatch-to-send.html)

# java - 通过 ByteArray 将图像传递给另一个 Activity - Android

> ID：15618738
> 
> 赞同：0
> 
> 时间：2013-03-25T15:32:56.067
> 
> 标签：java, android

任何想法如何从 JSON 对象中提取图像并通过意图传递给另一个 Activity 到另一个对象？到目前为止，这与我在接收活动中接收字节数组最接近，但 BitmapFactory.decodeByteArray 返回 null。

```
 public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
              DetailFragment fragB = (DetailFragment) getSupportFragmentManager()
                      .findFragmentById(R.id.detail_frag);

                  Row row = (Row)parent.getItemAtPosition(position);
                  JsonNode item = row.getValueAsNode();
                  intent.putExtra("item", item.toString() );

                  JsonNode attachmentText = item.get("_attachments");

                  //hidden code which gets the imgId from the JsonNode

                  byte[] byteArray =  attachmentText.get(imgId).toString().getBytes();

                  intent.putExtra("picture", byteArray);

                  startActivity(intent); 
```

在接收片段中：

```
byte[] byteArray = getArguments().getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) view.findViewById(R.id.imgDetail);

image.setImageBitmap(bmp); 
```

bmp 返回空值

**更新**

我搞砸了，JSON`JsonNode attachmentText = item.get("_attachments");`没有返回图像，而是返回图像元数据。

我尝试过不同的路线并将 ImageView 从视图布局转换为字节数组并将其传递给活动，但这也不起作用，bmp 返回 null：

```
 ImageView image = (ImageView) view.findViewById(R.id.img);

Bitmap bmp = BitmapFactory.decodeResource(getResources(), image.getId());
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray();

//pass Byte Array to intent
intent.putExtra("picture", byteArray); 
```

剩下的唯一事情是再次查询数据库以获取我已经检索到的图像吗？目前它们在一个列表视图中，我试图让选定的列表项图像显示在附加到新活动的详细视图中。

这是最初检索列表视图图像的工作代码：

```
 AttachmentInputStream readAttachment = db.getAttachment(row.getId(), imgId);
 Bitmap bitmap = BitmapFactory.decodeStream(readAttachment);
 img.setImageBitmap(bitmap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:45:10.337

一旦你知道你有图像 JSON 字符串......

```
private Bitmap getBitmapFromString(String jsonString) {
    byte[] decodedString = Base64.decode(stringPicture, Base64.DEFAULT);
    Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
    return decodedByte;
} 
```

# c++ - 是否可以从基类调用派生类的方法？例如; 避免“切片”

> ID：15618740
> 
> 赞同：0
> 
> 时间：2013-03-25T15:32:58.987
> 
> 标签：c++

假设有一些类，都派生自一个名为 Animal 的基类：

```
Cat
Dog
Parrot
EveryAnimalInExistance 
```

每个类都实现了自己的抽象方法，例如：

```
attack()
defend()
hunt()
breed() 
```

然后有一个方法叫

```
observeAnimal(Animal* everyAnimalInExistance) 
```

我如何从成千上万的潜在动物中通过任何潜在动物，然后简单地调用

```
everyAnimalInExistance.hunt(); 
```

据我了解，在 c++ 中，对象将被“切片”，它会尝试调用基类自己的方法，并且需要进行类型转换才能调用正确的方法。

我无法确定 RTTI 是否在项目的每个环境中都可用，因为它庞大且数量众多，有人能告诉我我应该采取的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:36:51.743

您的`observeAnimal(Animal* everyAnimalInExistance)`方法不执行切片，因为参数是通过指针接收的。

在指针或引用的情况下，虚拟函数将在您的动物园中正确调用:)。`everyAnimalInExistance`切片仅在您按值传递时发生。

换句话说：

```
class Animal {
    virtual void hunt() = 0;
}

observeAnimal(Animal* everyAnimalInExistance)
{
    everyAnimalInExistance->hunt(); // correct
}
observeAnimal(Animal everyAnimalInExistance)
{
    everyAnimalInExistance.hunt(); // sliced, incorrect (call into base class)
}
observeAnimal(Animal& everyAnimalInExistance)
{
    everyAnimalInExistance.hunt(); // correct
}

std::vector<Animal> slice_and_dice;
// add animals to vector here (actually this vector will slice the animals
// when you add them)
slice_and_dice[0].hunt(); // incorrect, sliced

std::vector<Animal*> pointer_zoo;
// add animals to vector here
pointer_zoo[0]->hunt(); // correct 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T09:33:36.817

直接回答你的问题......是的，（至少）有一种方法可以从基类调用派生类方法，即[奇怪重复的模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。其实这就是所谓的静态多态

# android - 如何使用后退按钮防止 Activity 的多个实例？

> ID：15618744
> 
> 赞同：3
> 
> 时间：2013-03-25T15:33:03.493
> 
> 标签：android, android-activity

我有一个带有`Activity`. 我希望用户能够使用后退按钮离开应用程序，稍后通过应用程序的图标进行租用，而无需创建`Activity`.

问题是，如果我按下后退按钮并租用 n 次，那么我最终会得到 n 个应用程序实例（如内存分析工具中所观察到的）。

我试过覆盖`onBackPressed()`调用`finish()`。在这种情况下，我可以看到它被调用了，但它仍然在内存中`onDestroy()`留下了多个实例。`Activity`我也尝试了不同`android:launchMode`的 's，包括`"singleTop"`、`"singleTask"`和`"singleInstance"`，但在所有情况下仍然有`Activity`'s 类的多个实例。

`Activity`在这种简单的情况下，如何防止多个实例运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:45:32.233

当您单击后退按钮时，您的活动将被破坏。每次获得焦点时都会重新创建活动，这是很自然的。这就是它的工作原理。

当屏幕方向改变时，活动也会被破坏并重新创建。

[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)。遍历活动生命周期。

[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html.The)。该文档让您了解当用户单击返回按钮和主页按钮时，活动是如何从后台堆栈推送和弹出的。

假设你开始一个新的活动，它被推到后台堆栈并获得焦点。

当当前活动开始另一个活动时，新活动被推到堆栈顶部并获得焦点。前一个活动保留在堆栈中，但已停止。

当您单击后退按钮时，当前活动将从堆栈中弹出并被销毁。因此，后堆栈中的先前活动成为焦点。

注意：可以同时在后台执行多个任务。但是，如果用户同时运行多个后台任务，系统可能会开始销毁后台活动以恢复内存，从而导致活动状态丢失。请参阅以下有关活动状态的部分。

# python - 如何从 Python 执行此命令

> ID：15618746
> 
> 赞同：-2
> 
> 时间：2013-03-25T15:33:06.657
> 
> 标签：python, python-2.7

我有这个在提示符下运行的命令：

`echo "python setHeater.py" | at 16:30`

我如何从 Python 程序中执行它？

在我的程序中，我创建了一个日期，并将其连接到一个字符串，就像这样

```
newtime = createnewtime()
commandToExecute = 'echo "python setHeater.py" | at ' + newtime 
#and then here the code to actually run the command in the command environment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:38:55.290

`subprocess`基本上，您可以使用以下库执行命令：

```
from subprocess import Popen, PIPE

newtime = createnewtime()
p1 = Popen(["echo ", "'python setHeater.py'"], stdout=PIPE)
p2 = Popen(["at", newtime ], stdin=p1.stdout, stdout=PIPE)
output = p2.communicate()[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:53:01.520

您可以使用操作系统库：

```
import os

newtime = createnewtime()
command = 'echo "python setHeater.py" | at ' + newtime
os.system(command) 
```

尽管如果您尝试执行此命令，则不需要使用“echo”。简单地：

```
import os

newtime = createnewtime()
command = "python setHeater.py | at " + newtime
os.system(command) 
```

# javascript - Firefox插件中面板内容脚本和页面内容脚本之间的localStorage

> ID：15618747
> 
> 赞同：1
> 
> 时间：2013-03-25T15:33:06.907
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我正在使用插件构建器创建一个 firefox 插件，我想从页面内容中保存一个值，然后从面板内容脚本中读取它。我想使用 localStorage，但我尝试过，但无法在页面和面板脚本之间共享相同的 localStorage。我也尝试了 self.port.emit ，这个方法运行良好我可以用 port.emit 和 port.on 发送值，但这不是我想要的，因为我需要每秒刷新这个值，如果我使用该方法，然后浏览器会因端口请求而过载，这就是为什么我想使用 localStorage 或可以存储在变量中并可以从面板脚本轻松访问的东西。

这里我附上了面板脚本，它将读取页面脚本保存的值。

```
var panel = require("panel").Panel({
          width: 100,
          height: 100,
          contentScriptFile: data.url("panel_script.js")
    }); 
```

在这里，我附加了页面脚本，它将保存页面内容中的值，面板脚本将读取它。

```
var pageMod = require("page-mod");
pageMod.PageMod({
    include: "*",
    contentScriptFile: self.data.url("page_script.js"),
    contentScriptWhen: 'ready'
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:03:29.627

我相信该`port`系统是与面板页面交互的推荐途径。然而，这里是您如何解决您发布的`localStorage`通过 Firefox 插件访问页面的问题。

```
var chrome = require('chrome');
var data = require('sdk/self').data;

var ios = chrome.Cc["@mozilla.org/network/io-service;1"]
                .getService(chrome.Ci.nsIIOService);
var ssm = chrome.Cc["@mozilla.org/scriptsecuritymanager;1"]
                .getService(chrome.Ci.nsIScriptSecurityManager);
var dsm = chrome.Cc["@mozilla.org/dom/storagemanager;1"]
                .getService(chrome.Ci.nsIDOMStorageManager);

var uri = ios.newURI(data.url('index.html'), "", null);
var principal = ssm.getCodebasePrincipal(uri);
var storage = dsm.getLocalStorageForPrincipal(principal, data.url('index.html')); 
```

有了它，您将能够像在网页中一样`localStorage`使用该`storage`对象访问页面。例如`storage.setItem('key', 'value')`和`storage.getItem('key')`。

# css - 特定的伪类和类 样式无法正常工作

> ID：15618760
> 
> 赞同：0
> 
> 时间：2013-03-25T15:34:00.873
> 
> 标签：css

为什么这会影响具有类图标的 div-... 而仅影响 css 中定义的 li

```
 li [class*=" icon-"]{
  display: inline-block;
  width: 1.25em;
  text-align: center;
 }

<li class="something">
    <div class="insidediv icon-one">test</div>
</li>
<br/>
<br/>
<br/>
<br/>
<div class="insidediv icon-one">test</div> 
```

这是一个示例 [http://jsfiddle.net/65nkm/3/](http://jsfiddle.net/65nkm/3/)

只有带有类图标的 li - ... 应该受到影响，但不会影响 li 中的 div

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:36:54.250

删除`li`选择器中的空格：

```
li[class*=" icon-"] {
   display: inline-block;
   width: 1.25em;
   text-align: center;
} 
```

检查更新的[jsFiddle](http://jsfiddle.net/65nkm/7/)。

# c++ - OpenCV在视频中查找图片（帧）

> ID：15618765
> 
> 赞同：7
> 
> 时间：2013-03-25T15:34:12.707
> 
> 标签：c++, c, opencv, video, image-processing

我正在尝试在 C++ 中创建小型应用程序，它将返回概率值（从 0 到 1 的实数）以识别视频中的两张图片。我的想法是在某些视频材料中找到广告。我正在考虑从商业广告中删除第一帧以及最后一帧。通过这种方式，我可以使用 OpenCV 创建应用程序，该应用程序将加载视频（电视内容），然后它将搜索从广告中筛选的第一帧。如果它找到它（概率超过 SOME_PARAMETER），那么 app 就可以断定广告从那里开始。然后我想搜索最后一帧，如果找到它（再次以超过 SOME_PARAMETER 的概率），应用程序可以得出结论，想要的广告确实存在于给定的视频中。这只是一个想法。我是 C++ 专家，但对 OpenCV 完全是新手。如果有人可以指出我，或举个例子，将不胜感激。当然，我愿意接受有关想法的任何建议。谢谢，

M。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T19:07:47.847

您正在寻找的是 OpenCV 中的**模板匹配**。

要熟悉 OpenCV，您应该开始阅读[一些教程](https://stackoverflow.com/a/5680049/176769)，除了书籍之外，网上还有一些不错的书籍。作为一个 C++ 人，您可能会使用OpenCV**的 C++ 接口**`cv::Mat`，该接口用作表示图像的主要数据结构。如果您看到`IplImage`正在使用的数据类型，就知道它来自 C 接口。

在预备课程之后，您最终将需要学习如何从视频中读取帧：

*   [使用 openCV 阅读视频](https://stackoverflow.com/a/14838999/176769)
*   [使用 openCV 读/写 avi 视频](https://stackoverflow.com/a/14777135/176769)

然后如何单独处理这些帧：

*   [OpenCV每帧处理](https://stackoverflow.com/a/3919216/176769)（C接口）
*   [如何使用 OpenCV 在视频中查找对象](https://stackoverflow.com/a/10788739/176769)
*   [视频文件中的对象跟踪](https://stackoverflow.com/a/9929714/176769)
*   [我的 Opencv 应用程序的处理速度非常慢](https://stackoverflow.com/a/13235942/176769)

最后，您将研究[模板匹配](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)的工作原理：

*   [如何在从 ORIGINAL-IMAGE 提取的 SUB-IMAGE 中执行模板匹配过程并在原始图像中显示结果](https://stackoverflow.com/a/15606231/176769)
*   [如何处理多次出现的模板匹配](http://opencv-code.com/quick-tips/how-to-handle-template-matching-with-multiple-occurences/)

除了模板匹配之外，还有其他方法可以跟踪对象，请查看以下参考：

*   [OpenCV的特征检测算法比较](https://computer-vision-talks.com/2011-07-13-comparison-of-the-opencv-feature-detection-algorithms/)
*   [使用 OpenCV (C++/Python) 进行对象跟踪](https://www.learnopencv.com/object-tracking-using-opencv-cpp-python/)

# c - 您可以将多维数组作为指针传递给 C 函数，然后将它们转换回函数内部的数组吗？

> ID：15618777
> 
> 赞同：1
> 
> 时间：2013-03-25T15:34:38.460
> 
> 标签：c, pointers, multidimensional-array

**问题：**假设您正在尝试用 C 语言编写一个函数，该函数将使用文件中的值填充二维数组。该文件包含按行（记录）排列的值，其中每行包含多个字段。该函数应接收指向二维数组的指针和文件地址并填充数组。重要的是，该函数应该独立于每条记录有多少字段而工作。例如，在一个程序中，您可能会调用该函数从每个记录有四个字段的文件中读取值：

```
int array_of_values[MAX_NUMBER_OF_RECORDS][4];
fill_in_array(array_of_values, "spacetime.csv"); 
```

在另一个程序中，您可能希望在每条记录有 11 个字段时填写值：

```
int array_of_values[MAX_NUMBER_OF_RECORDS][11];
fill_in_array(array_of_values, "M-theory.csv"); 
```

不幸的是，如果你尝试这样做，你就会违反 C 处理多维数组的方式。多维数组在 C 中没有实现为指向数组的指针数组，而是作为一个长的一维数组。这意味着函数需要知道数组的宽度才能从中读取数据。

所以下面的函数定义会给你一个错误：

```
void fill_in_array(int array_of_values[MAX_NUMBER_OF_RECORDS][], char *path) 
```

[请注意，以下内容很好：

```
void fill_in_array(int array_of_values[][MAX_NUMBER_OF_RECORDS], char *path) 
```

因为编译器不需要知道第一维的索引，但假设这是不允许的（例如，如果函数需要处理单个记录，例如`array_of_values[1]`）。]

这是我在我的程序中达到的点。有两种解决方案：

1.  强制函数使用固定数量的字段。我显然不想这样做，但我可以，例如，声明一个常量`MAX_NUMBER_OF_FIELDS`并将未使用的字段留空。
2.  使`fill_in_array`函数接受指针而不是数组，并动态分配包含字段的 Iliffe 向量。这是一个很有吸引力的想法（因为它会阻止我们必须声明最大数量的记录/字段，但这也意味着我们必须创建（并记住使用！）一个函数来释放字段数组。

我还有另一个想法。也就是将函数的声明修改为如下：

```
void fill_in_array(int **array_of_values, int number_of_fields, char *path) 
```

（这里，`number_of_fields`指的是每条记录的字段数，所以我们可以称它为`fill_in_array(array_of_values, 4, "spacetime.csv");`.

请注意，参数`array_of_values`不再是显式数组，而是指针。通常，如果你分配一个双指针指向一个二维数组，结果是没有意义的。我的想法是可以使用`number_of_fields`参数，以便函数知道如何处理表达式，如`array_of_values[i][j]`.

原则上这应该是相当容易的：事实上，如果`a`是一个二维数组，那么`a[i][j]`定义为

```
*(a + (i * n) + j) 
```

其中`n`是数组的长度，所以我们可以替换每次出现的`array_of_values[i][j]`with`*(array_of_values + (i * number_of_fields) + j)`和每次出现的`array_of_values[i]`with `array_of_values + (i * number_of_fields)`。但是，此代码将很难阅读。有没有办法告诉编译器数组的宽度是`number_of_fields`这样我可以使用索引符号来访问数组的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:39:04.963

不，没有这种方法。

一旦您需要进行通用地址计算，您就需要自己实现它。

恭喜您获得了添加描述每条记录的字段数的显式参数的解决方案，这当然应该这样做。

您可以在函数内部使用宏来使地址计算更易于管理，也许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:43:10.237

有几个解决方案。

使用结构：

```
typedef struct {
  // whatever appears in a record
} record_t

void fill_in_array(record_t records[MAX_NUMBER_OF_RECORDS], const char* path); 
```

请注意，这仅在编译时已知记录的大小时才有意义，对于您的示例，它可能不是。

使用大步：

```
void fill_in_array(int *array_of_values, int stride, const char *path)
{
  #define IDX(x, y) (x + (y * stride))

  // get the val at i,j
  int val = array_of_values[IDX(i,j)];

  #undef IDX
} 
```

您已经在您的函数中建议了这种方法，`number_of_fields`它是一个跨步，但是跨步是其他开发人员查看您的代码更有可能识别的术语。

一点无关紧要，如果你不改变的内容`path`，你应该做到`const`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:12:26.987

除非您仅限于 C89（即 MSVC 编译器），否则您可以像这样传递多维数组：

```
#include <stdio.h>

void fill_in_array(size_t m, size_t n, int array_of_values[m][n])
{
  for (size_t i = 0; i < m; ++i) {
    for (size_t j = 0; j < n; ++j) {
      array_of_values[i][j] = ((i == j) ? 1 : 0);
    }
  }
}

void print_array(size_t m, size_t n, int array_of_values[m][n])
{
  for (size_t i = 0; i < m; ++i) {
    for (size_t j = 0; j < n; ++j) {
      printf(" %d", array_of_values[i][j]);
    }
    printf("\n");
  }
}

int main()
{
  {
    int array_of_values[2][4];
    fill_in_array(2, 4, array_of_values);
    print_array(2, 4, array_of_values);
  }
  {
    size_t h = 6, w = 5;
    int array_of_values[h][w];
    fill_in_array(h, w, array_of_values);
    print_array(h, w, array_of_values);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T16:06:34.223

我相信您正在寻找的内容存在于 C++ 中，但不存在于 C 中。在 C++ 中，您可以定义模板函数来处理大小在编译时已知的数组，然后编译器负责其余的工作。在 C 中，有两种方法：

*   显式定义大小
    这是类似函数的情况`memcpy`，您可以在其中指定元素的数量

    ```
    void process_array(int *data[], size_t max_x, size_t max_y)
    .... 
    ```

*   使用无效数字定义大小
    这是函数的情况，例如`strlen`数据以某个值终止（`'\0'`此处）
    因此，如果您想要一个带有矩阵但元素数量可变的函数，您必须定义一种方法如何在数据。

    ```
    #define ARRAY_TERM -1

    void process_array(int *data[])
    {
        size_t i, j;
        for (i = 0; data[i]; i++)
        {
            for (j = 0; data[i][j] != ARRAY_TERM; j++)
            {
               ...
            }
        }
    }
    ... 
    ```

希望你有这个想法。使用起来不是很方便。

还有另一种方法：定义自己的类型。是的，在许多情况下这是一个可行的选择：

```
typedef struct array *array_t;
struct array
{
    size_t max_x, max_y;
    int *data;
}; 
```

使用它的基本功能集：

```
int array_init(array_t *a; size_t max_x, size_t max_y)
{
    array_t res;
    res = malloc(sizeof(*res));
    res->max_x = max_x;
    res->max_y = max_y;
    res->data = calloc(max_x * max_y, sizeof(int));
    *a = res;
    return 0;
}

void array_destroy(array_t *a)
{
    free((*a)->data);
    free(*a);
} 
```

然后您可以定义您的附加功能进行操作。

# java - 在 lucene 中排序提升结果

> ID：15618783
> 
> 赞同：2
> 
> 时间：2013-03-25T15:34:44.427
> 
> 标签：java, lucene

我一直在寻找类似的问题，但似乎没有任何帮助。

我想对查询结果进行排序，但要保持提升顺序。

例如，我创建了一个`orQuery`, 里面有 3 个查询`Occur.SHOULD`，并提升了 2.0、1.0 和 0.2。然后，当我进行排序时，我希望 boost 2.0 的结果保持在顶部但排序，然后 boost 1.0 的结果也排序，最后最后一个查询 (0.2) 的结果也排序。

您可以将结果想象为三组排序结果。

有什么可以用的吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:17:22.463

我看到了几种解决方法：

**1** - 使提升的差异巨大。

如果您在查询中应用的提升因子足够大，它们应该覆盖所有其他影响分数的因子。因此，除了 0.2、1.0 和 2.0，您可以尝试 0.000001、1.0 和 1000000 来尝试一些东西。尝试一下，直到你得到可用的东西。然后，按照相关性（`Sort.RELEVANCE`）排序，这是默认设置，然后您不仅可以得到您想要的排序，还可以在这些子组中维护所有其他有用的评分方面。

**2** - 实际上通过查询提升应用排序

这是您需要严格按照提升因子排序的选项，其次是单个查询中的一些其他排序参数。

Lucene 的[排序](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/Sort.html)不会让您直接看到应用于术语的提升因子（出于充分的理由，想要做这件事有点奇怪。提升是为了影响分数，而不是成为分数）。它给你的最接近的是按相关性排序，当然，这会影响很多其他事情。

如果您需要获得原始提升因子，则需要覆盖[Similarity](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/similarities/Similarity.html)。

需要考虑三个提升：

*   查询提升：作为查询的一部分应用，这将被传递到`Similarity.computeWeight`
*   字段和文档提升：在索引时应用，组合并存储在索引中，同时结合“长度规范”因子。

您似乎有兴趣获得的唯一提升是查询级别提升，这应该是最容易处理的。您可以修改[TFIDFSimilarity](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html)，或者从头开始创建 [Similarity] 的子类。无论哪种方式，您都希望删除大部分逻辑，只返回查询提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:00:40.180

我[认为你不能](https://stackoverflow.com/questions/6899258/solr-date-boost-and-sort-by-relevant-results-not-working-properly)开箱即用地做到这一点。您可以实现自己的`Collector`，但单独运行三个搜索然后合并结果会容易得多。

# java - 如何在计时器上执行命令

> ID：15618789
> 
> 赞同：0
> 
> 时间：2013-03-25T15:35:00.507
> 
> 标签：java, timer

我编写了一个程序，通过用零填充它来创建任何所需大小的文件。我试图通过每隔几秒（让我们用 5 秒）而不是每个循环刷新它来优化它。当我尝试使用 Timer 时，代码`output.flush();`给了我一个错误。

```
public static void main(String[] args) throws IOException
{
    fileMaker fp = new fileMaker();

    Writer output = null;
    File f = new File(args[1]);
    output = new BufferedWriter(new FileWriter(f, true));
    output.write("0");

    long size = fp.getFileSize(args[1]);

    long mem = Long.parseLong(args[0]) * 1073741824; //1 Gigabyte = 1073741824 bytes

    while (size < mem)
    {
        output.write("");

        TimerTask fileProcessTask = new TimerTask()
        {
            @Override
            public void run()
            {
                output.flush();
                processFile();

            }
        };

        Timer tm = new Timer();
        tm.schedule(fileProcessTask, 5000L);

        size = fp.getFileSize(args[1]);

        double avg = (double) size / mem * 100;

        System.out.println(avg + "% complete");
    }
    output.close();
    System.out.println("Finished at " + size / 1073741824 + " Gigabyte(s)");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:56:05.220

出现错误的原因是因为一旦退出循环`output.flush`，您就永远不会取消任务。`while`

`while`您在循环之后做的第一件事是`close`输出，因此下次任务由计时器运行时，它已关闭流，因此您会看到异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:53:56.910

您提供的代码存在一些问题：

*   您在 while 循环的每次迭代中都创建一个新的`TimerTask`和一个新的。`Timer`只需要一个 Timer 即可调度多个 TimerTask
*   您也只需要一个`TimerTask`并使用`Timer.schedule`来重复执行任务（就像这样`timer.schedule(someTimerTask, 5000, 5000);`[start in 5s, loop every 5s]）
*   您可能必须在匿名内部类中访问它时`output`声明`final`
*   你为什么要写`"0"`and `""`？您可能只想写零字节，而不是空字符（并且可能想`FileOutputStream`直接使用 a）

# android - 如何从我的 http 响应 android 中获取字符串？

> ID：15618792
> 
> 赞同：12
> 
> 时间：2013-03-25T15:35:08.900
> 
> 标签：android, string, http, httpresponse

我已经看到一些非常难看的代码，人们编写了自己的将 HttpResponse 转换为字符串以供以后使用的方法，看起来像这样：

```
httppost.setEntity(new UrlEncodedFormEntity(valuePairs));
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
InputStream is = entity.getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF8"),8);
StringBuilder sb = new StringBuilder();
sb.append(reader.readLine() + "\n");
String line="0";
while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
}
is.close();
String result = sb.toString(); 
```

这不仅有点乱，而且真的很丑陋，而且我经常无法分辨代码发生了什么，因为这种混乱在它之前。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-25T15:35:08.900

就在这里！您可以在一条线上完成所有这些！像这样：

```
response = client.execute(post);
String responseStr = EntityUtils.toString(response.getEntity()); 
```

快乐的应用制作

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-16T12:29:31.390

我使用[HttpClient.execute 文档](http://developer.android.com/reference/org/apache/http/client/HttpClient.html#execute%28org.apache.http.client.methods.HttpUriRequest,%20org.apache.http.client.ResponseHandler%3C?%20extends%20T%3E%29)中的响应处理程序完成了它。使用 handler 作为 .execute 方法的第二个参数定义响应应该是什么格式。
我的代码如下：

```
HttpClient client = new DefaultHttpClient();

        HttpGet request = new HttpGet(params[0]);
        ResponseHandler<String> handler = new BasicResponseHandler();
        String response = "";
        try {
            response = client.execute(request, handler);
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

`params[0]`是字符串形式的 URL。说我的服务器以 JSON 格式返回响应可能很重要。所以最后我将我的`response`字符串转换为 JSON。

# pdf - 单个 CID 引用多个 unicode 编码

> ID：15618795
> 
> 赞同：0
> 
> 时间：2013-03-25T15:35:16.137
> 
> 标签：pdf, unicode, encoding, fonts

在解析 pdf 文件时，我遇到了一个预定义的 CMap（UniCNS-UTF16-H，你可以在这里找到它[http://sourceforge.net/projects/cmap.adobe/files/cmapresources_cns1-6.tar.z/download](http://sourceforge.net/projects/cmap.adobe/files/cmapresources_cns1-6.tar.z/download)）。当我查看它时，我发现单个 CID 可以引用到多个 unicode 中。

我的问题是，这样做的目的是什么？我怎么知道我应该将我的角色映射到哪个 unicode ？

cid2code.txt 文件的标题说“可能存在单个 CID 在单个 CMap 文件中的多个编码点中引用的情况。这些情况在同一列中以逗号分隔。” 但它没有说明原因。

我查看了技术说明 #5080“Adobe-CNS1-6 Character Collection for CID-Keyed Fonts”，但没有找到答案。因此，如果有人能指出解释这一点的段落以及如何处理它，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:03:17.513

我不确定是否有详细的段落明确说明*了为什么*CID 规范允许映射多个 CMap 代码，但确实如此。也许更多地了解 CID 字体的设计和使用可能会帮助您了解这种做法的潜在用途。我建议通读[CID 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/font/pdfs/5014.CIDFont_Spec.pdf)。

基本上，CID 被设计为*字形形状*的集合，具有 CMap 机制，可以任意将一个或多个代码与任何这些形状相关联。它们的 CID 本身只是字形，**而不是**Unicode。CMap 专门设计为与 CID 字体数据断开连接，以便在不更改字形数据的情况下轻松更新和添加映射。因此，例如，具有 Japan1-6 排序的 CID 字体可以有许多用于形状集合的映射 (CMap)，并且有许多可供选择（尤其是日语！）。如果你愿意，你甚至可以发明你自己的映射......你只需要分发 CMap 部分并确保它符合所讨论的顺序。

无论如何：*为什么*这是可能的并不重要：它**是**可能的，就是这样。因此，如果您正在开发处理 CID 和/或 CMap 的东西，您应该准备好处理这种情况。它可以而且确实会发生，如果你不准备处理它，你的代码最终会崩溃。

顺便说一句：CID 格式在这方面并不是唯一的。在 OpenType (TrueType) 中做同样的事情是常见的做法，并且可能在其他字体格式中也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:13:31.360

Unicode 本身有[重复的字符](http://en.wikipedia.org/wiki/Duplicate_characters_in_Unicode)。这些重复显然应该映射到同一个字形

编辑：您似乎也有带有 v 后缀代码点的垂直/水平等效项，例如：[FE30](http://www.fileformat.info/info/unicode/char/fe30/index.htm)（垂直两点）和[2025v](http://www.fileformat.info/info/unicode/char/2025/index.htm)（两点领导）

EDIT2：引自[技术说明 5094](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/font/pdfs/5094.CJK_CID.pdf)

> 1.  香港政府还确定了香港 GCCS 中存在的 84 对重复字符。选择这种方法是为了将每一对中的一个实例（通常是第二次或更晚出现）与之前存在的角色“统一”起来。由于向后兼容的原因，以前被消失的“统一”字符占据的代码点仍然保留。同样，出于向后兼容性的原因，用于表示“统一”对的两个字符的 CID 仍保留在字符集合 Adob​​e-CNS1 中。

# delphi - 使用 OSVERSIONINFOEX 的 Windows 版本

> ID：15618804
> 
> 赞同：-1
> 
> 时间：2013-03-25T15:35:45.497
> 
> 标签：delphi, delphi-xe2

我正在尝试在 Delphi XE2 中使用 OSVERSIONINFOEX 确定 Windows 版本，如[如何检查 delphi 操作系统版本中所述的教程？Windows 7 或 Server 2008 R2？](https://stackoverflow.com/questions/1268178/how-to-check-in-delphi-the-os-version-windows-7-or-server-2008-r2)我已经定义了以下代码：

```
unit ApplicationWizard01;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Registry;

type
  TMainForm = class(TForm)
    BitBtn01: TBitBtn;
    Memo01: TMemo;
    procedure BitBtn01Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

_OSVERSIONINFOEX : record
    dwOSVersionInfoSize : DWORD;
    dwMajorVersion      : DWORD;
    dwMinorVersion      : DWORD;
    dwBuildNumber       : DWORD;
    dwPlatformId        : DWORD;
    szCSDVersion        : array[0..127] of AnsiChar;
    wServicePackMajor   : WORD;
    wServicePackMinor   : WORD;
    wSuiteMask          : WORD;
    wProductType        : BYTE;
    wReserved           : BYTE;
  end;
  TOSVERSIONINFOEX : _OSVERSIONINFOEX;

  function GetVersionExA(var lpVersionInformation: TOSVersionInfoEX): BOOL; stdcall; external kernel32;

const
  VER_NT_WORKSTATION    :Integer = 1;
  VER_SUITE_ENTERPRISE  :Integer = 2;
  VER_NT_SERVER         :Integer = 3;
  VER_SUITE_DATACENTER  :Integer = 128;
  VER_SUITE_PERSONAL    :Integer = 512;

const
  PRODUCT_BUSINESS                      = $00000006; {Business Edition}
  PRODUCT_BUSINESS_N                    = $00000010; {Business Edition}
  PRODUCT_CLUSTER_SERVER                = $00000012; {Cluster Server Edition}
  PRODUCT_DATACENTER_SERVER             = $00000008; {Server Datacenter Edition (Full Installation)}
  PRODUCT_DATACENTER_SERVER_CORE        = $0000000C; {Server Datacenter Edition (Core Installation)}
  PRODUCT_ENTERPRISE                    = $00000004; {Enterprise Edition}
  PRODUCT_ENTERPRISE_N                  = $0000001B; {Enterprise Edition}
  PRODUCT_ENTERPRISE_SERVER             = $0000000A; {Server Enterprise Edition (Full Installation)}
  PRODUCT_ENTERPRISE_SERVER_CORE        = $0000000E; {Server Enterprise Edition (Core Installation)}
  PRODUCT_ENTERPRISE_SERVER_IA64        = $0000000F; {Server Enterprise Edition For Itanium Based Systems}
  PRODUCT_HOME_BASIC                    = $00000002; {Home Basic Edition}
  PRODUCT_HOME_BASIC_N                  = $00000005; {Home Basic Edition}
  PRODUCT_HOME_PREMIUM                  = $00000003; {Home Premium Edition}
  PRODUCT_HOME_PREMIUM_N                = $0000001A; {Home Premium Edition}
  PRODUCT_HOME_SERVER                   = $00000013; {Home Server Edition}
  PRODUCT_SERVER_FOR_SMALLBUSINESS      = $00000018; {Server For Small Business Edition}
  PRODUCT_SMALLBUSINESS_SERVER          = $00000009; {Small Business Server}
  PRODUCT_SMALLBUSINESS_SERVER_PREMIUM  = $00000019; {Small Business Server Premium Edition}
  PRODUCT_STANDARD_SERVER               = $00000007; {Server Standard Edition (Full Installation)}
  PRODUCT_STANDARD_SERVER_CORE          = $0000000D; {Server Standard Edition (Core Installation)}
  PRODUCT_STARTER                       = $0000000B; {Starter Edition}
  PRODUCT_STORAGE_ENTERPRISE_SERVER     = $00000017; {Storage Server Enterprise Edition}
  PRODUCT_STORAGE_EXPRESS_SERVER        = $00000014; {Storage Server Express Edition}
  PRODUCT_STORAGE_STANDARD_SERVER       = $00000015; {Storage Server Standard Edition}
  PRODUCT_STORAGE_WORKGROUP_SERVER      = $00000016; {Storage Server Workgroup Edition}
  PRODUCT_UNDEFINED                     = $00000000; {An Unknown Product}
  PRODUCT_ULTIMATE                      = $00000001; {Ultimate Edition}
  PRODUCT_ULTIMATE_N                    = $0000001C; {Ultimate Edition}
  PRODUCT_WEB_SERVER                    = $00000011; {Web Server Edition}
  PRODUCT_UNLICENSED                    = $ABCDABCD; {Unlicensed Product}

implementation

{$R *.dfm}

var
{$EXTERNALSYM GetProductInfo}
  GetProductInfo: function (dwOSMajorVersion, dwOSMinorVersion,
                            dwSpMajorVersion, dwSpMinorVersion: DWORD;
                            var pdwReturnedProductType: DWORD): BOOL stdcall = NIL;

function GetOSInfo: string;
var
  NTBres, BRes: Boolean;
  OSVI: TOSVERSIONINFO;
  OSVI_NT: TOSVERSIONINFOEX;
  tmpStr: string;
  dwOSMajorVersion, dwOSMinorVersion,
  dwSpMajorVersion, dwSpMinorVersion,
  pdwReturnedProductType : DWORD;
begin
  Result := 'Error';
  NTBRes := FALSE;
  try
    OSVI_NT.dwOSVersionInfoSize := SizeOf(TOSVERSIONINFOEX);
    NTBRes := GetVersionExA(OSVI_NT);
    OSVI.dwOSVersionInfoSize := SizeOf(TOSVersionInfo);
    BRes := GetVersionEx(OSVI);
  except
    OSVI.dwOSVersionInfoSize := SizeOf(TOSVersionInfo);
    BRes := GetVersionEx(OSVI);
  end;
  if (not BRes) and (not NTBres) then
    Exit;
  Move( OSVI, OSVI_NT, SizeOf(TOSVersionInfo) );

  case OSVI_NT.dwPlatformId of
     VER_PLATFORM_WIN32_NT:
       begin
         if OSVI_NT.dwMajorVersion <= 4 then
           Result := 'Windows NT ';
         if (OSVI_NT.dwMajorVersion = 5) and (OSVI_NT.dwMinorVersion = 0) then
           Result := 'Windows 2000 ';
         if  (OSVI_NT.dwMajorVersion = 5) and (OSVI_NT.dwMinorVersion = 1) then
           Result := 'Windows XP ';
         if (OSVI_NT.dwMajorVersion = 6) and (OSVI_NT.dwMinorVersion = 0) then
         begin
           Result := 'Windows Vista ';
           if Assigned(GetProductInfo) then
           begin
             GetProductInfo( dwOSMajorVersion, dwOSMinorVersion,
                             dwSpMajorVersion, dwSpMinorVersion,
                             pdwReturnedProductType );
             case pdwReturnedProductType of
               PRODUCT_BUSINESS:
                 tmpStr := 'Business Edition';
               PRODUCT_BUSINESS_N:
                 tmpStr := 'Business Edition';
               PRODUCT_CLUSTER_SERVER:
                 tmpStr := 'Cluster Server Edition';
               PRODUCT_DATACENTER_SERVER:
                 tmpStr := 'Server Datacenter Edition (full installation)';
               PRODUCT_DATACENTER_SERVER_CORE:
                 tmpStr := 'Server Datacenter Edition (core installation)';
               PRODUCT_ENTERPRISE:
                 tmpStr := 'Enterprise Edition';
               PRODUCT_ENTERPRISE_N:
                 tmpStr := 'Enterprise Edition';
               PRODUCT_ENTERPRISE_SERVER:
                 tmpStr := 'Server Enterprise Edition (full installation)';
               PRODUCT_ENTERPRISE_SERVER_CORE:
                 tmpStr := 'Server Enterprise Edition (core installation)';
               PRODUCT_ENTERPRISE_SERVER_IA64:
                 tmpStr := 'Server Enterprise Edition for Itanium-based Systems';
               PRODUCT_HOME_BASIC:
                 tmpStr := 'Home Basic Edition';
               PRODUCT_HOME_BASIC_N:
                 tmpStr := 'Home Basic Edition';
               PRODUCT_HOME_PREMIUM:
                 tmpStr := 'Home Premium Edition';
               PRODUCT_HOME_PREMIUM_N:
                 tmpStr := 'Home Premium Edition';
               PRODUCT_HOME_SERVER:
                 tmpStr := 'Home Server Edition';
               PRODUCT_SERVER_FOR_SMALLBUSINESS:
                 tmpStr := 'Server for Small Business Edition';
               PRODUCT_SMALLBUSINESS_SERVER:
                 tmpStr := 'Small Business Server';
               PRODUCT_SMALLBUSINESS_SERVER_PREMIUM:
                 tmpStr := 'Small Business Server Premium Edition';
               PRODUCT_STANDARD_SERVER:
                 tmpStr := 'Server Standard Edition (full installation)';
               PRODUCT_STANDARD_SERVER_CORE:
                 tmpStr := 'Server Standard Edition (core installation)';
               PRODUCT_STARTER:
                 tmpStr := 'Starter Edition';
               PRODUCT_STORAGE_ENTERPRISE_SERVER:
                 tmpStr := 'Storage Server Enterprise Edition';
               PRODUCT_STORAGE_EXPRESS_SERVER:
                 tmpStr := 'Storage Server Express Edition';
               PRODUCT_STORAGE_STANDARD_SERVER:
                 tmpStr := 'Storage Server Standard Edition';
               PRODUCT_STORAGE_WORKGROUP_SERVER:
                 tmpStr := 'Storage Server Workgroup Edition';
               PRODUCT_UNDEFINED:
                 tmpStr := 'An unknown product';
               PRODUCT_ULTIMATE:
                 tmpStr := 'Ultimate Edition';
               PRODUCT_ULTIMATE_N:
                 tmpStr := 'Ultimate Edition';
               PRODUCT_WEB_SERVER:
                 tmpStr := 'Web Server Edition';
               PRODUCT_UNLICENSED:
                 tmpStr := 'Unlicensed product'
             else
               tmpStr := '';
             end;{ pdwReturnedProductType }
             Result := Result + tmpStr;
             NTBRes := FALSE;
           end;{ GetProductInfo<>NIL }
         end;{ Vista }
         if NTBres then
         begin
           if OSVI_NT.wProductType = VER_NT_WORKSTATION then
           begin
             if OSVI_NT.wProductType = VER_NT_WORKSTATION then
             begin
               case OSVI_NT.wSuiteMask of
                 512: Result := Result + 'Personal';
                 768: Result := Result + 'Home Premium';
               else
                 Result := Result + 'Professional';
               end;
             end
             else if OSVI_NT.wProductType = VER_NT_SERVER then
             begin
               if OSVI_NT.wSuiteMask = VER_SUITE_DATACENTER then
                 Result := Result + 'DataCenter Server'
               else if OSVI_NT.wSuiteMask = VER_SUITE_ENTERPRISE then
                 Result :=  Result + 'Advanced Server'
               else
                 Result := Result + 'Server';
             end;
           end{ wProductType=VER_NT_WORKSTATION }
           else
           begin
             with TRegistry.Create do
               try
                 RootKey := HKEY_LOCAL_MACHINE;
                 if OpenKeyReadOnly('SYSTEM\CurrentControlSet\Control\ProductOptions') then
                   try
                     tmpStr := UpperCase(ReadString('ProductType'));
                     if tmpStr = 'WINNT' then
                       Result := Result + 'Workstation';
                     if tmpStr = 'SERVERNT' then
                       Result := Result + 'Server';
                   finally
                     CloseKey;
                   end;
               finally
                 Free;
               end;
             end;{ wProductType<>VER_NT_WORKSTATION }
           end;{ NTBRes }
         end;{ VER_PLATFORM_WIN32_NT }
     VER_PLATFORM_WIN32_WINDOWS:
       begin
         if (OSVI.dwMajorVersion = 4) and (OSVI.dwMinorVersion = 0) then
         begin
           Result := 'Windows 95 ';
           if OSVI.szCSDVersion[1] = 'C' then
             Result := Result + 'OSR2';
         end;
         if (OSVI.dwMajorVersion = 4) and (OSVI.dwMinorVersion = 10) then
         begin
           Result := 'Windows 98 ';
           if OSVI.szCSDVersion[1] = 'A' then
             Result := Result + 'SE';
         end;
         if (OSVI.dwMajorVersion = 4) and (OSVI.dwMinorVersion = 90) then
           Result := 'Windows Me';
       end;{ VER_PLATFORM_WIN32_WINDOWS }
     VER_PLATFORM_WIN32s:
       Result := 'Microsoft Win32s';
  else
    Result := 'Unknown';
  end;{ OSVI_NT.dwPlatformId }
end;{ GetOSInfo }

procedure TMainForm.BitBtn01Click(Sender: TObject);
begin
  //
end;

initialization
   @GetProductInfo := GetProcAddress(GetModuleHandle('KERNEL32.DLL'),
                                     'GetProductInfo');

end. 
```

但我收到大量错误如下：

```
[DCC Error] ApplicationWizard01.pas(36): E2007 Constant or type identifier expected
[DCC Error] ApplicationWizard01.pas(38): E2005 'TOSVERSIONINFOEX' is not a type identifier
[DCC Error] ApplicationWizard01.pas(96): E2007 Constant or type identifier expected
[DCC Error] ApplicationWizard01.pas(105): E2066 Missing operator or semicolon
[DCC Error] ApplicationWizard01.pas(117): E2029 'OF' expected but identifier 'dwPlatformId' found
[DCC Error] ApplicationWizard01.pas(117): E2029 ',' or ':' expected but 'OF' found
[DCC Error] ApplicationWizard01.pas(120): E2029 'THEN' expected but identifier 'dwMajorVersion' found
[DCC Error] ApplicationWizard01.pas(122): E2029 ')' expected but identifier 'dwMajorVersion' found
[DCC Error] ApplicationWizard01.pas(124): E2029 ')' expected but identifier 'dwMajorVersion' found
[DCC Error] ApplicationWizard01.pas(126): E2029 ')' expected but identifier 'dwMajorVersion' found
[DCC Error] ApplicationWizard01.pas(204): E2029 'THEN' expected but identifier 'wProductType' found
[DCC Error] ApplicationWizard01.pas(206): E2029 'THEN' expected but identifier 'wProductType' found
[DCC Error] ApplicationWizard01.pas(208): E2029 'OF' expected but identifier 'wSuiteMask' found
[DCC Error] ApplicationWizard01.pas(208): E2029 ',' or ':' expected but 'OF' found
[DCC Error] ApplicationWizard01.pas(215): E2029 'THEN' expected but identifier 'wProductType' found
[DCC Error] ApplicationWizard01.pas(217): E2029 'THEN' expected but identifier 'wSuiteMask' found
[DCC Error] ApplicationWizard01.pas(219): E2029 'THEN' expected but identifier 'wSuiteMask' found
[DCC Error] ApplicationWizard01.pas(246): E2029 ':=' expected but ':' found
[DCC Error] ApplicationWizard01.pas(247): E2029 Expression expected but 'BEGIN' found
[DCC Error] ApplicationWizard01.pas(263): E2029 ':=' expected but ':' found
[DCC Error] ApplicationWizard01.pas(264): E2010 Incompatible types: 'Integer' and 'string'
[DCC Error] ApplicationWizard01.pas(270): E2070 Unknown directive: 'TMainForm'
[DCC Error] ApplicationWizard01.pas(275): E2029 Statement expected but 'INITIALIZATION' found
[DCC Error] ApplicationWizard01.pas(275): E2029 ';' expected but 'INITIALIZATION' found
[DCC Error] ApplicationWizard01.pas(13): E2065 Unsatisfied forward or external declaration: 'TMainForm.BitBtn01Click'
[DCC Fatal Error] ApplicationWizard.dpr(5): F2063 Could not compile used unit 'ApplicationWizard01.pas' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:42:10.223

您的问题是您没有从@Ken 的答案中复制代码。我们试图调试您所做的转录错误是没有意义的。正确的解决方案是正确使用答案中的代码。既然@Ken 给了你一个完整的单元，那就用它吧。确保使用剪贴板。选择整个单元并将其粘贴到一个空的编辑器窗口中。然后将其保存到一个名为`GetWinVersionInfo.pas`.

如果您需要编辑该代码，那么我可能会删除现在可以在 Windows 单元中找到的所有声明。它避免了只有这些东西的一份副本的混乱。例如，我认为类型和常量都可以被删除。

# windows - 使用命令窗口定义两个目标

> ID：15618806
> 
> 赞同：0
> 
> 时间：2013-03-25T15:35:51.903
> 
> 标签：windows, command-prompt, target

我想打开一个命令窗口并初始化两个目标：

```
"C:\Program Files (x86)\Intel\Compiler\11.0\061\fortran\Bin\ifortvars.bat" ia32

"c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcvarsall.bat" x86 
```

我可以一次做一个（`C:\Windows\SysWOW64\cmd.exe /k`），但我不知道如何在同一个命令窗口中同时做这两个。有任何想法吗？

# jquery - JQuery 移动应用程序标题中的样式按钮

> ID：15618807
> 
> 赞同：0
> 
> 时间：2013-03-25T15:35:55.490
> 
> 标签：jquery, css, jquery-mobile, markup, jquery-mobile-button

我有一个 JQuery 移动应用程序。我想为“标题”中使用的按钮设置样式。目前，我有以下内容：

```
.my-btn-hdr { text-transform:uppercase; background-color:blue; color:white; min-height:33px; width:93px; }
...

<div id="myPage" data-role="page" data-dom-cache="false">
  <div data-role="header" data-position="fixed">
    <a href="#" data-icon="arrow-l" data-iconpos="notext" data-direction="reverse" class="ui-btn-left jqm-back">Back</a>
    <h1>MyApp</h1>
    <a id="saveButton" href="#" class="ui-btn-right my-btn-hdr">Save</a>
  </div>

  <div data-role="content">        
    ...
  </div>
</div> 
```

我注意到当页面被渲染时，ui-btn、ui-btn-up-a、ui-shadow 和 ui-button-corner-all css 类都被添加了。我还注意到添加了 data-corners="true"、data-shadow="true" 和 data-iconshadow="true" 属性。

如何在 jquery 移动应用程序的标题中自定义按钮的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:42:31.537

你需要知道的一切都可以在官方文档中找到：http: [//api.jquerymobile.com/button/](http://api.jquerymobile.com/button/)

例如，如果您想更改按钮主题，您将使用此功能：

```
$( "a" ).buttonMarkup({ theme: "c" }); 
```

这是一个活生生的例子：http: [//jsfiddle.net/Gajotres/eqLVV/](http://jsfiddle.net/Gajotres/eqLVV/)

如果文档中没有提到某些内容，则需要通过 css 进行更改，这是 jQM 渲染后的按钮结构：

```
<a href="#" data-role="button" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c">
    <span class="ui-btn-inner">
        <span class="ui-btn-text">Anchor</span>
    </span>
</a> 
```

最后一件事，如果您需要手动更改 css，请始终在 css 行的末尾添加 !important 以防万一出现问题。

例如，这可用于更改按钮文本颜色：

```
#btn1 .ui-btn-inner .ui-btn-text {
    color: red;
} 
```

这是一个例子：http: [//jsfiddle.net/Gajotres/k5jty/](http://jsfiddle.net/Gajotres/k5jty/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:38:56.650

您可以为您的按钮提供一个自定义类，然后覆盖您想要更改或删除的任何样式。

```
<a data-role="button" class="my-button"> 
```

CSS：

```
.my-button {
    background-image: url('images/my-button.png') !important;
} 
```

# mysql - 对 mysql 中的列求和，然后在 where 子句中使用结果

> ID：15618812
> 
> 赞同：9
> 
> 时间：2013-03-25T15:36:07.447
> 
> 标签：mysql, sql

我希望能够做到这一点：

```
SELECT dept.id, (invoices.col1 + invoices.col2 + invoices.col3) as sumTotal 
FROM dept 
     INNER JOIN invoices ON invoices.id_dept = dept.id 
WHERE sumTotal > 10000 
```

但是我得到了一个关于使用“sumTotal”的未知专栏。

这可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T15:38:57.050

使用`HAVING`：

```
SELECT dept.id, (invoices.col1 + invoices.col2 + invoices.col3) as sumTotal 
FROM dept 
INNER JOIN invoices
    ON invoices.id_dept = dept.id 
HAVING sumTotal > 10000 
```

问题是`WHERE`子句在语句之前*执行*`SELECT`。因此，该`sumTotal`列尚不可用。

`HAVING`子句在语句之后*执行*`SELECT`。在您选择所有内容后，它会过滤掉结果。但请记住，因为使用`HAVING`速度较慢。它对整组行进行操作。

从[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/select.html)：

> HAVING 子句几乎在最后应用，就在项目发送到客户端之前，没有优化。（LIMIT 在 HAVING 之后应用。）
> 
> SQL 标准要求 HAVING 必须仅引用 GROUP BY 子句中的列或聚合函数中使用的列。但是，MySQL 支持对这种行为的扩展，并允许 HAVING 引用 SELECT 列表中的列和外部子查询中的列。

* * *

> HAVING 子句可以引用聚合函数，而 WHERE 子句不能：

```
SELECT user, MAX(salary)
FROM users
GROUP BY user
HAVING MAX(salary) > 10; 
```

> 不要对应该在 WHERE 子句中的项目使用 HAVING。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T15:46:49.927

或者使用 WHERE...

```
SELECT dept.id, (invoices.col1 + invoices.col2 + invoices.col3) as sumTotal 
  FROM dept 
  JOIN invoices ON invoices.id_dept = dept.id 
 WHERE invoices.col1 + invoices.col2 + invoices.col3 > 10000 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T15:44:41.717

你也可以试试这个：

```
WITH temp AS
(
 SELECT
   dept.id,
   (invoices.col1 + invoices.col2 + invoices.col3) as sumTotal 
 FROM dept INNER JOIN invoices ON invoices.id_dept = dept.id
)
SELECT *
FROM temp
WHERE sumTotal > 10000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T15:44:56.690

您必须使用“拥有”-

```
SELECT dept.id, (invoices.col1 + invoices.col2 + invoices.col3) as sumTotal 
FROM dept 
INNER JOIN invoices ON invoices.id_dept = dept.id 
HAVING sumTotal > 10000 
```

我不确定您是否可以使用您的别名字段，或者您是否必须写 'have (invoices.col1 + invoices.col2 + invoices.col3) > 10000。

'where' 语句与'select' 一起使用：它过滤最初返回的记录。“拥有”然后过滤返回的数据集，通常是因为在“选择”时无法知道“拥有”条件。

引用一个文档，“HAVING 子句被添加到 SQL 中，因为 WHERE 关键字不能与聚合函数一起使用。” 其他地方写着 ' *SQL HAVING 子句与 SQL GROUP BY 子句结合使用。它可以在 SQL SELECT 语句中用于过滤 SQL GROUP BY 返回的记录*。

# xcode - SDL2.0 与 XCode 4.6

> ID：15618813
> 
> 赞同：3
> 
> 时间：2013-03-25T15:36:12.213
> 
> 标签：xcode, macos, opengl, sdl

我已经成功构建了 SDL2.0，并且构建了我的 SDL2.framework 文件夹。不知道我是否将它放在系统上的正确位置。我将 XCode 4.6 与 OS X 10.8 一起使用。我把它放在这里`/System/Library/Frameworks`

当我开始一个新的 XCode 项目时，我选择命令行应用程序。选择添加 OpenGL.framework 然后我尝试添加 SDL2.framework 但它没有出现在搜索列表中。然后我单击添加其他并手动选择位于`/System/Library/Frameworks`. 然后我添加一些简单的 SDL 代码并尝试构建。然后我收到此错误：

```
SDL.h file not found 
```

我可以在我的 XCode 项目中看到 SDL2.framework 在那里，我可以展开它以看到 SDL.h 存在，我什至可以打开它。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T22:30:03.590

我通常将我的框架放在 /Library/Frameworks/ 中，但只要你正确链接它，你就可以把它放在哪里。

如果您已将其正确添加到您的项目中，那么它应该不会导致问题。您可能还想添加 Cocoa.framework，具体取决于您在做什么。

包含 SDL2 的最便携的方法是：

```
#include "SDL.h" 
```

您只需要确保在 IDE 或 makefile 等中相应地配置了其他包含目录，以便列出 SDL.h 所在的文件夹。

# python - 在python中展平RGB图像

> ID：15618815
> 
> 赞同：1
> 
> 时间：2013-03-25T15:36:25.183
> 
> 标签：python, image

我正在阅读如下的 rgb 图像

```
 scipy.misc.imread() 
```

我想通过从每个通道（即像素 0 和像素 1 的 rgb 等）中选择一个元素来展平一维数组。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:43:14.250

看起来[scipy.misc](http://docs.scipy.org/doc/scipy/reference/misc.html)`read`中没有。你的意思是？如果是这样，它将为您提供具有[flatten 方法的 numpy 数组](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html)`imread`

例子：

```
>>> from scipy.misc import imread
>>> img = imread("test.jpg")
0: array([[[135, 130, 136],
        [139, 134, 140],
        [132, 127, 133],
        ...

>>> img.flatten()
1: array([135, 130, 136, ..., 162, 160, 165], dtype=uint8) 
```

# c - 比较 C 中的 2 个字符串数组

> ID：15618817
> 
> 赞同：-1
> 
> 时间：2013-03-25T15:36:26.487
> 
> 标签：c

因此，我将混合字母和数字的字符串数组与带有字母的数组进行比较，然后收集相似的字符（即：只有字母）并将其放入不同的字符串数组中，然后打印出来。

它第一次工作正常。虽然第二次，如果与字母表比较的字符串小于某个大小，它会塞满并显示一些额外的字母，有时还会出现一个不知从何而来的问号。

这是第一次输出：

```
Enter a string (1-40 characters): zxcvbnm,./asdfghjkl;qwertyuiop[]
Output: abcdefghijklmnopqrstuvwxyz 
```

然后第二次：

```
Enter a string (1-40 characters): abcdefg
Output: abcdefgz? 
```

明白了吗？“z？” 不知从何而来。

可能是缓冲区中有一些剩余的字母或再次调用该函数后的任何内容？

```
It turns out that I didn't have a null terminator at the end of the newest 
string before being printed! - Thanks to Mohamed! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:39:47.837

检查您的代码，您的字符串应以 null character 结尾`'\0'`。这是你的问题的原因。

在您的代码中，您必须添加

```
letters[z]= '\0'; 
```

之后`for`

```
 for (x = 0; x < 26; x++){
        for (y = 0; y < strLen1; y++){
            if (alphabet[x] == string[y])
            {
                letters[z]=string[y];
                /* Increment z, to insert anothe letter in an empty space. */
                z++;
            }
        }
    }
    letters[z]= '\0'; // add this line
    printf("Output: %s\n\n", letters); 
```

顺便说一句，您可以优化您的字母检查

小写字母 {a, b, c, ......,z} 用它们的 ASCII 引用。

因此您可以检查 ASCII`string[y]`是否在 ASCII`'a'`和 ASCII之间，`'z'`而不是查看`alphabet[]`数组。它更简单

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:39:22.113

C 中的字符串是 NUL 终止的 您需要在打印之前终止字符数组。

将最后一个字符设置为`'\0'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:57:10.557

你应该只[`isalpha()`](http://linux.die.net/man/3/isalpha)用来检查 a`char`是否是一个字母字符。无需重新发明，也无需手动转换为小写，因为它也可以处理。

# jquery - Rails + AJAX：启动 AJAX 请求时 Spinner 不显示

> ID：15618819
> 
> 赞同：0
> 
> 时间：2013-03-25T15:36:31.683
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, spinner

我有一个用于搜索目的的表格。这种形式是“AJAX-ed”并且运行良好。现在我正在尝试添加微调器功能，如下所示：

### index.html.haml

```
#spinner{:style => 'display: none;'} LOADING...  
= render 'articles/show_data' 
```

### 搜索.js.erb

```
$("#search_form")
    .bind("ajax:beforeSend", function(){
      alert('xx');
      //$("#spinner").show();
    })
    .bind("ajax:complete", function(){
      $("#spinner").hide();
    })
$('.show_articles').html("<%= escape_javascript(render(partial: '/articles/show_data')) %>"); 
```

数据打印正确，问题是，当我发送表单时，微调器没有显示。（表单的 ID 元素实际上称为**search_form**）

显示和隐藏微调器的代码应该放在哪里？我试图放入一个单独的文件，也放入通过 AJAX 呈现数据的 JS 文件（上面的狙击手），但这些都对我不起作用。

我正在使用 jQuery 1.9。

我会很感激能帮助我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:16:41.550

致评论者：使用`.js.erb`. 但是，OP 显然不明白它如何适应请求/响应的概念。

表单已提交，Rails 将提交路由到您的控制器和操作。然后，您的控制器操作会执行任何操作，并进行响应，`search.js.erb`并且浏览器在接收到它时将其作为 javascript 执行。所以，这意味着在表单发送之前你不会告诉`#search_form`它的`beforeSend`钩子。

TLDR；将您的`$('#search_form')..`代码移动到与页面一起加载的 JS 资产文件中。

哦，取消注释实际显示微调器的行...

哦，最后，关于 AJAX 微调器的页面/帖子大约有 400 万个，偶尔搜索一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:13:40.297

在你的表格中，你有`remote: true`吗？尝试 ajax:before 而不是 beforeSend：

```
$("#search_form")
.bind("ajax:before", function(){
  alert('xx');
  //$("#spinner").show();
})
... 
```

这对我行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:19:05.543

由于我无法在超过 2 小时内解决此问题，因此我通过以下方式解决了此问题：

### custom_js.js

```
$(document).ready(function() {
  $("#form_submit_input").click(function(){
    $('#spinner').show();
  });
}); 
```

这将在提交表单时显示微调器。

之后，在**search.js.erb**

```
$('.show_articles').html("<%= escape_javascript(render(partial: '/articles/show_data')) %>");
$('#spinner').hide(); 
```

何时呈现来自数据库的内容，然后隐藏微调器。这可能不是处理微调器的最干净的方法，但它是有效的解决方案。

# java - @XmlAnyElement 和 @XmlElementRefs

> ID：15618820
> 
> 赞同：1
> 
> 时间：2013-03-25T15:36:32.813
> 
> 标签：java, xml, jaxb, eclipselink, moxy

我使用以下带注释的类来解组 MOXy 2.4.0。解组到这个对象工作得很好

```
@XmlElementRefs({
        @XmlElementRef(name = "a", namespace = "http://mynamespace", type = JAXBElement.class),
        @XmlElementRef(name = "b", namespace = "http://mynamespace", type = JAXBElement.class)
})
protected List<JAXBElement<?>> elements; 
```

我现在想允许此列表中的任意元素，所以我附上了`@XmlAnyElement`

```
@XmlAnyElement(lax=true)
@XmlElementRefs({
        @XmlElementRef(name = "a", namespace = "http://mynamespace", type = JAXBElement.class),
        @XmlElementRef(name = "b", namespace = "http://mynamespace", type = JAXBElement.class)
})
protected List<Object> elements; 
```

现在整个列表只包含类型的类，`com.sun.org.apache.xerces.internal.dom.ElementNSImpl`但在这种情况下不应该`lax=true`启用 DOM-Elements 和 JAXBElements 的异构列表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:07:37.120

这是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)中的一个已知问题。您可以使用以下错误来跟踪我们在此问题上的进展：

*   [http://bugs.eclipse.org/401103](http://bugs.eclipse.org/401103)

# python - 禁用 Pmw.ComboBox 小部件的输入字段

> ID：15618821
> 
> 赞同：1
> 
> 时间：2013-03-25T15:36:35.640
> 
> 标签：python, user-interface, combobox, tkinter

我正在寻找一种方法来禁用`Pmw.ComboBox`小部件的直接编辑。`entry_field=DISABLED`使用带有灰显且不可用的 ComboBox的结果的小部件配置。这是我的代码，它允许直接编辑菜单：

```
 dropdownQOS = Pmw.ComboBox(parentWindow,
            label_text = 'QOS: ',
            labelpos = 'w',
            selectioncommand = differentiateSettings,
            scrolledlist_items = ("Selection1", "Selection2", "Selection3"), 
            listheight = 57,  entry_width = 43)
        dropdownQOS.selectitem(0, setentry = 1)
        dropdownQOS.pack(anchor = 'n',fill = 'x', expand = 1, padx = 50, pady=5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:42:03.537

查看此页面：[http](http://www.gossamer-threads.com/lists/python/python/63351) `entryfield_entry_state=DISABLED` ://www.gossamer-threads.com/lists/python/python/63351也为我工作以禁用组合框的条目。

# java - 将二维数组转换为字符串

> ID：15618823
> 
> 赞同：22
> 
> 时间：2013-03-25T15:36:38.847
> 
> 标签：java

我正在尝试将 a 转换`String[][]`为字符串以在 GUI 中显示。这是我的代码：

```
String[][] tableBornes = SearchPropertiesPlugin.FillBornesTable();
String table = tableBornes.toString(); 
```

这是它产生的结果：

> `[[Ljava.lang.String;@19b8858`

我怎样才能得到更具可读性的东西？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-25T15:41:33.830

试试单行版本

```
Arrays.deepToString(tableBornes); 
```

或多行版本

```
StringBuilder sb = new StringBuilder();
for(String[] s1 : tableBornes){
    sb.append(Arrays.toString(s2)).append('\n');
}
String s = sb.toString(); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-25T15:49:02.063

如果要创建数组的单行表示，可以使用`Arrays.deepToString`.

* * *

如果您想创建多行表示，您可能需要遍历所有行并附加`Array.toString(array[row])`类似的结果

```
String[][] array = { { "a", "b" }, { "c" } };

String lineSeparator = System.lineSeparator();
StringBuilder sb = new StringBuilder();

for (String[] row : array) {
    sb.append(Arrays.toString(row))
      .append(lineSeparator);
}

String result = sb.toString(); 
```

由于 Java 8 你甚至可以使用`StringJoiner`with 会自动为你添加分隔符：

```
StringJoiner sj = new StringJoiner(System.lineSeparator());
for (String[] row : array) {
    sj.add(Arrays.toString(row));
}
String result = sj.toString(); 
```

或使用流

```
String result = Arrays
        .stream(array)
        .map(Arrays::toString) 
        .collect(Collectors.joining(System.lineSeparator())); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T15:37:56.100

尝试[`Arrays.toString(Object[] a)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html)

```
for(String[] a : tableBornes) 
      System.out.println(Arrays.toString(a)); 
```

`tableBornes`上面的代码将在换行符中打印二维数组中的每个数组。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-25T15:43:09.630

这个怎么样：

```
StringBuilder sb = new StringBuilder();
for(String[] s1 : tableBornes){
    for(String s2 : s1){
        sb.append(s2);
    }
}
String table = sb.toString(); 
```

如果要在项目之间插入空格或其他字符，只需`append`在内部循环中添加另一个调用。

# amazon-web-services - Amazon EC2 中“预留”的目的是什么

> ID：15618825
> 
> 赞同：45
> 
> 时间：2013-03-25T15:36:44.747
> 
> 标签：amazon-web-services, amazon-ec2

我刚刚开始探索亚马逊 ec2。我想听听一些解释，或者可能是一些简短的例子，说明您在亚马逊 ec2 中如何以及为什么需要“预订”。我正在使用 python 框架`boto`来管理亚马逊服务。到目前为止，我真的没有看到任何理由为什么我们有这个额外的步骤来获取您的实例，例如：

```
reservations = ec2.get_all_instances()
instances = [instance for res in reservations for instance in res.instances] 
```

这就是我获取所有实例的方式，有时我会这样做：

```
reservation = ec2.run_instances(image_id, min_count, max_count, key_name .....)
instance = reservation.instances[0] 
```

而不是我使用这些实例来附加卷，添加标签，添加安全组等等......但是目的是什么`boto.ec2.instance.Reservation`（我不仅询问boto框架，当然它是首选，而是整体意义在 Amazon EC2 中）

```
>>> reservation = reservations[0]
>>> reservation
Reservation:r-74d11509
>>> dir(reservation)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'connection', 'endElement', 'groups', 'id', 'instances', 'item', 'owner_id', 'region', 'startElement', 'stop_all']
>>> reservation.__class__
<class 'boto.ec2.instance.Reservation'> 
```

我找不到任何有用的方法。请解释一下为什么我们需要这个？它在那里的原因是什么？在什么情况下你会使用它？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-25T15:59:59.637

据我了解，预留是启动实例的*行为*。基本上，预订就是你*所做*的，而实例就是你*得到*的。如果您通过`run_instances()`进行一项预订从一张图像启动多个实例，但获得多个实例。

`run_instances`with`Reservation.stop_all()`允许您运行一堆实例，等待它们完成任务然后立即停止它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-31T03:19:02.200

从[boto 文档](http://boto.readthedocs.org/en/latest/ec2_tut.html)：

> 预留对应于启动实例的命令。您可以查看哪些实例与预留相关联：

```
>>> instances = reservations[0].instances
>>> instances
[Instance:i-00000000] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-18T16:43:01.443

这是[Ryan Parman](https://stackoverflow.com/users/228514/ryan-parman "瑞恩·帕曼")和[Rose Perrone](https://stackoverflow.com/users/365298/rose-perrone "玫瑰佩罗内")的一个有趣的主题和评论——我可能会在今年晚些时候（2015 年）向 Mitch 询问 re:Invent 的历史，但如果你做任何正常的事情`aws ec2 describe-instances`（或来自 boto、sdks、等）你会看到所有实例都被枚举为某种一般意义上的“保留”：

```
{
    "Reservations": [
        {
            "OwnerId": "123456789012",
            "ReservationId": "r-9aa12345",
            "Groups": [],
            "Instances": [ 
```

在该数据中是`ReservationId`一个`r-12345bc8`值类型，但它与您为锁定较低费率而支付的预留不对应（计费方便，而不是您启动的实际实例类型）。所以我的预感是，这是他们第一次创建系统时的一个有趣的小残留物——每个实例都需要“保留”一个运行的插槽。直到后来，他们才提出了使用相同术语的定价模型。

但同样，这只是一个猜测。

在这里，这个词的两个含义显然有重叠，似乎彼此没有关联。

# jquery - jQuery - 删除包装标签，但保持文本位置？

> ID：15618827
> 
> 赞同：0
> 
> 时间：2013-03-25T15:36:46.813
> 
> 标签：jquery

假设我有一段这样的代码：

`Lorem ipsum <span>dolor sit amet</span>, lorem ipsum dolor...`

我可以使用 jQuery 选择跨度并将其从 DOM 中删除，但这也会删除包含的文本。有没有办法使用 jQuery 在保留文本的同时删除换行范围？是否可以在原始位置重新注入文本，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:41:04.843

使用`$('span').contents().unwrap()`.

nb：`.unwrap()`从元素（或文本节点）中删除父级，因此您必须深入到的内容中`<span>`然后解开它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:40:43.627

您需要解开跨度内的内容：

```
$("span").contents().unwrap(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T15:38:15.003

使用 .unwrap() 方法。[http://api.jquery.com/unwrap/](http://api.jquery.com/unwrap/)

```
$('span').contents().unwrap(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-27T12:34:11.757

在 IE 浏览器中显示/隐藏下拉选项，这是经过测试的代码

```
$("#PrimaryIndustry").find("select").children("option[value='" + selectedIndustry + "']").wrap('<span>').hide(); // use for hide option

$("#PrimaryIndustry").find("select").children("option[value='" + selectedIndustry + "']").unwrap('<span>').show(); // use for show option. 
```

# windows-runtime - Windows 应用商店应用角半径

> ID：15618831
> 
> 赞同：3
> 
> 时间：2013-03-25T15:36:52.627
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml

我正在尝试开发一个带圆角的 ListView。The rounded corners property is working, however I am having some issue when the top or bottom item is selected. 此时，圆角被替换。

在顶部和底部项目之间选择一些节点是可以的：

![在此处输入图像描述](../Images/bf78f1141976ff23ec5d80c53a49f4a2.png)

然而，这是顶部和底部项目发生的情况：

![在此处输入图像描述](../Images/b9e3c2ce78c8e416efca64d67af91736.png)

*我知道 .Net WPF 应用程序中的技巧，您通常会在其中使用带有圆角的 Clipping。但是，WinRT 似乎不支持剪裁中的圆角。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T20:32:01.067

是的，所以，看...

让我用这个例子来回答这个问题：

```
<Border Width="100" Height="100" Margin="5"
    Background="DimGray" CornerRadius="15">
</Border>

<Border Width="100" Height="100" Margin="5"
    Background="DimGray" CornerRadius="15">
    <Rectangle Height="100" Width="100" Fill="Purple" />
</Border>

<Border Width="100" Height="100" Margin="5" Padding="5"
    Background="DimGray" CornerRadius="15">
    <Rectangle Height="100" Width="100" Fill="Purple" />
</Border>

<Border Width="100" Height="100" Margin="5" Padding="5"
    Background="Purple" CornerRadius="15">
    <Rectangle Height="100" Width="100" Fill="Purple" />
</Border> 
```

看起来像这样：

![在此处输入图像描述](../Images/473eab9fbc813d2a9d140e29565ef7a8.png)

而且，为什么？因为 Windows 8 中的裁剪目前只支持矩形。不是多边形，不是圆角，不是任何东西。样本中的第 4 项实际上是您目前唯一的方法。至少你有一个选择！

祝你好运！

# php - 显示 JavaScript 值问题

> ID：15618839
> 
> 赞同：0
> 
> 时间：2013-03-25T15:37:04.357
> 
> 标签：php, javascript, dom

我已经创建了一个自动完成（建议）字段，因此当您键入时，您会在该字段下方以文本形式获得建议。我重新构建了 javascript，并使文本可点击。因此，当您单击一个模式时（另一个小对话框）。

我想要的只是将建议字段中的文本显示到模式。我正在使用 $.post("thesuggtest.php") 方法，因为我需要获取选择的建议文本（将被单击）并通过 php 和 mysql 在模态中获取有关它的信息。

这是我为此使用的主要 JavaScript，但我遇到了一些问题。

```
function showHint(str)
        {
        if (str.length==0)
          { 
          document.getElementById("txtHint").innerHTML="";
          return;
          }
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            comeon = document.getElementById('comeon');
            document.getElementById('predlozi').innerHTML='<a data-toggle="modal" data-backdrop="static" href="#myMail" class="label ttip_b" title="New messages">' + xmlhttp.responseText + '</a><div class="modal hide fade" id="myMail"><div class="modal-header"><button class="close" data-dismiss="modal">×</button><h3>New messages</h3></div><div class="modal-body"><div id="comeon"></div>' + $.post("thesuggtest.php", { 'suggestion' : xmlhttp.responseText },function(data){comeon.innerHTML(data);console.log('Error:', data);}); + '</div></div>';

            }
          }
        xmlhttp.open("GET","gethint.php?q="+str,true);
        xmlhttp.send();
        } 
```

我正在使用 gethint.php 文件从字段中检索与输入值匹配的建议（我从数组中获取它们）。问题是我无法在模式（对话框）中回显文本。

当我输入 document.write(data) 时，我得到了回显但在空白页上的值。当我输入 comeon.innerHTML(data) 时，我得到了 Uncaught TypeError: Cannot call method 'innerHTML' of null。我知道这种类型的错误是因为它找不到元素 comeon 并且它返回 null。此外，我在应回显文本的模态中得到 [object Object]。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:48:02.770

以下是我可以注意到的一些问题；

```
comeon = document.getElementById('comeon'); 
```

你甚至不使用 comeon div，但你试图在它被创建之前得到它。您在此行下方创建“comeon” div。

```
$.post("thesuggtest.php", { 'suggestion' : xmlhttp.responseText },function(data){comeon.innerHTML(data);console.log('Error:', data);}); 
```

`$.post`也是一个异步请求，因此它永远不会返回您要求的任何文本。你应该称之为可能的其他一些事件点击`<a data-toggle="modal"`。这一次您将能够获得“comeon” div。

希望这可以帮助。

# cordova - 从 Android 和 iOS 中的 Phonegap 应用程序打开链接的一致方式？

> ID：15618840
> 
> 赞同：19
> 
> 时间：2013-03-25T15:37:09.373
> 
> 标签：cordova

我有一个使用 Phonegap 制作的移动应用程序，它显示可能包含链接的新闻文章。我希望这些链接在适当的浏览器中打开，与应用程序分开。**在我从 Phonegap 版本升级到 2.0.0 到 2.1.0 后，我找不到在 Android 和 iOS**中提供相同结果的单一方法（因为在 2.1 之前的 iOS 中您无法旋转屏幕）。

* * *

`<a href="http://blah">`
始终在应用程序中打开，没有浏览器工具栏，并且在不终止应用程序的情况下无法返回应用程序。iOS`<access origin="http://blah" />`在 config.xml 中服从，但 Android 不服从。似乎都不关心该`browserOnly="true"`属性。

`<a href="http://blah" target="_blank">`
`<access>`如果允许（或完全省略）， iPhone 会在 Safari 浏览器中打开它，但 Android 会在应用程序中打开它。

`<preference name="stay-in-webview" value="false" />`
将此添加到 config.xml 完全没有区别。

`<a href="#" onClick="navigator.app.loadUrl('http://blah',{openExternal:true});return false;">`
仅在 Android 中受支持，它会在 Chrome 浏览器中打开链接。iOS 中的错误。

`<a href="#" onClick="window.open('http://blah','_blank','location=yes');return false;">`
在 Phonegap 2.3.0 版中，这将保留在应用程序中，但在顶部/底部显示一个看起来很便宜的浏览器工具栏，并带有一个按钮，可让您返回应用程序。这是一致的......但不是我想要的。（在 2.1.0 版本中，这会导致 Android 在应用程序中打开，而 iOS 在适当的浏览器中打开。）

* * *

我正在使用 Phonegap **Build**，所以[这个解决方案](http://www.rigelgroupllc.com/blog/2012/05/22/opening-links-in-phonegap-apps-in-mobile-safari/)不起作用。
官方文档是参考 1.5.0 版本编写的[这篇博](https://build.phonegap.com/blog/access-tags)文，我的 2.1.0 到 2.3.0 发现与他们的表不匹配。
我真的不想为这么简单的东西添加插件。

**是否有一段代码会导致在设备自己的浏览器中打开链接，在应用程序的 web 视图之外，无论操作系统如何？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-20T14:43:43.493

也许现在还为时不晚。无论如何，这是来自我们的代码库，它适用于两个平台。

```
openURL: function(url) {
    if(device.platform === 'Android') {
        navigator.app.loadUrl(url, {openExternal:true});
    } else {
        window.open(url, '_system');
    }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T16:09:00.547

您需要安装 inAppBrowser 插件并在 jQuerys .on('click') 方法的帮助下运行此函数 onDeviceReady 函数，如下所示

```
function hijack_externalLinks(){

    $(document).on('click', "a[href^='http://']", function (e) {

         window.open( this.href , '_system', 'location=yes' );
         this.href = '/#';

          });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-23T00:57:14.373

我只是想指出，我自己并没有真正做到这一点，但是您是否使用了 inAppBrowser 插件，您是否在 config.xml 中指定了具有必要权限的插件？

根据这个[http://docs.phonegap.com/en/3.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/3.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)你应该使用：

```
var ref = window.open(url, target, options);

target: The target in which to load the URL, an optional parameter that defaults to _self. (String)

_self: Opens in the Cordova WebView if the URL is in the white list, otherwise it opens in the InAppBrowser.
_blank: Opens in the InAppBrowser.
_system: Opens in the system's web browser. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T15:43:32.403

PhoneGap 2.5.0 文档说它支持“_blank”、“_self”、“_system”目标 - 这些中的任何一个都可以满足您的需要吗？我在这里猜测是因为我还没有建立一个合适的测试环境，还不能尝试这个。

# delphi - Delphi / RAD Studio 工具提示扩展视图

> ID：15618841
> 
> 赞同：2
> 
> 时间：2013-03-25T15:37:10.050
> 
> 标签：delphi, tooltip

我目前在我的笔记本电脑上安装了 Delphi 2007 和 Delphi XE。弹出代码洞察工具提示视图在 XE 安装中受到限制。我似乎记得这是在某处的编辑器选项中，但找不到。

有人可以告诉我在哪里打开扩展工具提示视图吗？

见附图 - D2007 在上面，DXE 在下面 ![在此处输入图像描述](../Images/3a477b666cc34aeeb07f350052388eb1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:41:02.897

是的，在 Delphi 2009 中，它被称为“Tooltip Help Insight”，位于

*编辑器选项*/*代码洞察*/*自动功能*：

![截屏](../Images/eb2a101c92e46fba72280f36a1286527.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T04:28:28.573

除了“Tooltip Expression Evaluation”和“Tooltip Help Insight”设置，还要检查你是否加载/安装了这些包：

*   $(BDS)\Bin\dbkdebugideXXX.bpl
*   $(BDS)\bin\dbkdebugproideXXX.bpl

其中 XXX 因您的 Delphi 版本而异。

如果您使用的是 Delphi XE+ 版本，您可以下载 Delphi Distiller 并检查它们。他们叫：

*   Embarcadero DBK 调试器 IDE 包，以及
*   Embarcadero DBK 调试器专业 IDE 包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T18:36:23.937

Andreas 正确回答了我的问题，但这并没有解决我的问题。由 Ctrl-Shift-H 触发时，帮助洞察力正常工作，但在鼠标悬停时不能正常工作，即使勾选了工具提示帮助洞察力。重新启动等没有帮助，但是重新安装 XE Update 1 解决了这个问题。

# ios - UITableView 动态单元格内容

> ID：15618843
> 
> 赞同：0
> 
> 时间：2013-03-25T15:37:13.137
> 
> 标签：ios, objective-c, cocoa-touch

我使用使用创建`UITableView`的标签创建一个`NSArray`。[按照这里](http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/)的教程。现在我正在尝试`UITableView`使用从我的服务器中提取的动态内容进行创建。数据的提取与我这样分配的 JSON 配合得很好：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *responseString1 = [[NSString alloc] initWithData:responseData1 encoding:NSUTF8StringEncoding];

    NSLog(@"%@",responseString1);

    SBJsonParser *parser = [[SBJsonParser alloc] init];
    id sample = [parser objectWithString:responseString1];

    tempholder=[NSMutableArray arrayWithCapacity:[sample count]];

    for (int i = 0; i < [sample count]; i++) {
        [tempholder addObject:[[sample objectAtIndex:i]objectAtIndex:0]];
        //NSLog(@"%@",[sample objectAtIndex:i]);
        NSLog(@"%@",[tempholder objectAtIndex:i]);
    }
} 
```

那么我该如何更换

```
tableData = [NSArray arrayWithObjects:@"Item", @"Item",
            @"Item", @"Item", @"Item", @"Item", @"Item",
            @"Item", @"Item", nil]; 
```

这是在我的

```
- (void)viewDidLoad 
```

与“临时工” `NSMutableArray`？

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:41:08.573

解析完 JSON 后，添加以下内容：

```
self.tableData = [NSArray arrayWithArray:tempholder]; 
```

然后你很可能想要重新你的桌子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:42:00.263

你几乎可以在任何使用 NSArray 的地方使用 NSMutableArray。用 tempholder 替换您的 tableData 引用（或重命名 tempholder 更有意义）。相反，如果确实需要，也可以将 tableData 设置为 tempholder。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T15:42:02.963

将 tempHolder 数组设置为 tableData，然后在 connectionDidFinishLoading: 方法结束时重新加载表视图。

```
tableData = tempholder;
[self.tableView reloadData]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T15:44:11.730

在您的代码中，您已在 viewDidLoad 方法中初始化 NSArray

```
tableData = [NSArray arrayWithObjects:@"Item", @"Item", @"Item", @"Item", @"Item", @"Item", @"Item", @"Item", @"Item", nil]; 
```

而不是 NSArray 使用 NSMutableArray 。

然后当您从服务器接收数据时，只需执行以下操作

```
[tableData removeAllObjects];
tableData = tempholder 
```

# jquery - jQuery将文本推送到数组

> ID：15618846
> 
> 赞同：2
> 
> 时间：2013-03-25T15:37:20.800
> 
> 标签：jquery, html, arrays, push

`li`当我单击添加按钮时，我只是试图推送元素的文本。但是当我点击我的添加按钮时，它会将我列表中的所有项目推送到数组中。我想这是因为我只是在使用一个类。解决这个问题的最好方法是什么？提前致谢！

**HTML**

```
<div id="products">
    <ul>
        <li><p>Lorem 1</p><button class="target">Add</button></li>
        <li><p>Lorem 2</p><button class="target">Add</button></li>
    </ul>
</div> 
```

**jQuery**

```
$(document).ready(function(){
    var array = Array();
    $(".target").click(function() {
        $('p').each(function (i, e) {
              array.push($(e).text());  
        });
        console.log(array);
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:39:56.153

这个怎么样：

```
$(document).ready(function(){

    var array = []; //Use the bracket notation instead.

    $(".target").click(function(e) {
        var p = $(this).closest('li').find('p');
        array.push(p.text());

        console.log(array);
    });
}); 
```

基本上你想找到最接近`li`你的`.target`（被点击的那个），然后找到包含在`li`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:45:19.857

您的 javascript 代码基本上说：

单击“目标”类的元素时，将**每个**段落元素文本推送到数组。

考虑替换这个：

```
$('p').each(function (i, e) {
    array.push($(e).text());    
}); 
```

和：

```
array.push($(this).previousSibling.text()); 
```

这将改为仅从用户单击的按钮之前的段落元素中添加文本值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:41:29.627

```
$(document).ready(function(){

    var array = [];

    $(".target").click(function() {
        array.push($(this).siblings('p').text()); //Replace with this and it will get the text from clicked li only.
        console.log(array);
    });
}); 
```

# autohotkey - 如何区分左键单击和左键单击并拖动动作？

> ID：15618849
> 
> 赞同：0
> 
> 时间：2013-03-25T15:37:40.550
> 
> 标签：autohotkey

我有一个应用程序（Royal TS），它在应用程序的主窗口中嵌入了 PuTTY 会话。但是，如果另一个应用程序的窗口遮挡了嵌入式 PuTTY 会话，并且我单击嵌入式 PuTTY 会话，则 Royal TS 窗口*不会*出现在最前面。

因此，我尝试使用以下 AutoHotKey 脚本解决此问题：

```
LButton::                             ; Detect left mouse button click
MouseGetPos, xpos, ypos, win_id       ; Get mouse position and window ID 
WinGetTitle, title, ahk_id %win_id%   ; Get window title
WinGetClass, class, ahk_id %win_id%   ; Get window class

if class=PuTTY                        ; If clicked in an emmbeded PuTTY window...
{                                     ;
  IfWinExist, Royal TS                ; ...and Royal TS is running...
  {                                   ;
    WinActivate                       ; ...bring Royal TS to the front
  }                                   ;
}                                     ;
else                                  ; Else, it wasn't a PuTTY window clicked...
{                                     ;
  MouseClick, left, xpos, ypos        ; ...just pass mouse button click through
}                                     ;
return                                ; 
```

这工作正常......在一定程度上。当我尝试单击并按住*任何*应用程序的标题栏以拖动它（或调整应用程序窗口的大小）时，会出现问题，脚本运行并拦截我的左键，但由于向脚本的结尾。

如何区分左键单击和左键单击并拖动操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:43:11.553

更改您的`LButton::`to`~LButton::`并删除该`else`语句。

`~`将使鼠标左键像往常一样工作，但仍会运行代码。

# java - Fuse ESB osgi:install 遇到问题

> ID：15618852
> 
> 赞同：0
> 
> 时间：2013-03-25T15:37:44.250
> 
> 标签：java, fuseesb, jbossfuse

早上好，

```
 I downloaded the beta version of jboss fuse (jboss-fuse-6.0.0.redhat-015) and decided to try out the cbr sample.I run maven command "mvn clean install" and then started up the jboss fuse via commad line.At the karaf command line i tried to do the following 
```

osgi:install -s fab:mvn:org.jboss.fuse.examples/cbr/6.0.0.redhat-015

它停留了一段时间，然后抛出一个错误

执行命令时出错：安装包时出错：无法安装包 fab:mvn:org.jboss.fuse.examples/cbr/6.0.0.redhat-015

当我查看日志文件时，我看到以下内容

org.sonatype.aether.resolution.ArtifactDescriptorException：无法读取 org.jboss.fuse.examples:cbr:pom:6.0.0.redhat-015 的工件描述符

原因：org.apache.maven.model.resolution.UnresolvableModelException: 无法从 repos1 传输工件 org.jboss.fuse.examples:project:pom:6.0.0.redhat-015 ( [http://repo.fusesource.com /nexus/content/groups/public](http://repo.fusesource.com/nexus/content/groups/public)）：传输文件时出错：连接超时：连接

```
at org.apache.maven.repository.internal.DefaultModelResolver.resolveModel(DefaultModelResolver.java:119)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally(DefaultModelBuilder.java:819)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

at org.apache.maven.model.building.DefaultModelBuilder.readParent(DefaultModelBuilder.java:670)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:308)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:232)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:299)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

... 32 more 
```

引起：org.sonatype.aether.resolution.ArtifactResolutionException: 无法从 repos1 ( [http://repo.fusesource.com/nexus传输工件 org.jboss.fuse.examples:project:pom:6.0.0.redhat-015 /content/groups/public](http://repo.fusesource.com/nexus/content/groups/public)）：传输文件时出错：连接超时：连接

```
at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:488)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:190)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

at org.apache.maven.repository.internal.DefaultModelResolver.resolveModel(DefaultModelResolver.java:115)[71:org.fusesource.fabric.fab.fab-osgi:7.2.0.redhat-015]

... 37 more 
```

我在非标准位置有我的本地存储库，并且在我的 settings.xml 文件中有值。settings.xml 文件还具有我的公司关系存储库的路径，我希望应用程序从中提取/解决上述问题。我还在“org.ops4j.pax.url.mvn.cfg”文件中更改了以下设置

org.ops4j.pax.url.mvn.settings=file:D:/Maven/settings.xml

我不确定为什么它仍然要通过 fusesource 来解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T14:09:48.313

fusesource maven 存储库中不再提供 6.0.0.redhat-015 的 beta 工件。切换到 jboss-fuse-6.0.0.redhat-024 版本将解决该问题。

[https://www.jboss.org/products/fuse.html](https://www.jboss.org/products/fuse.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T15:02:46.230

Fuse 不会从 Maven 设置文件中读取所有设置。您需要在 etc/org.ops4j.pax.url.mvn.cfg 配置文件中更改其中的一些。

此外，您可能希望使用 Fuse 命令 config:proplist --pid org.ops4j.pax.url.mvn 验证最终结果

# sql - 包含使用整数的查询 - SQL Server 2005

> ID：15618860
> 
> 赞同：1
> 
> 时间：2013-03-25T15:38:25.320
> 
> 标签：sql, sql-server, sql-server-2005, full-text-search

我对使用 ms SQL 服务器相当陌生，想知道是否有办法将整数列值转换为字符串以用于全文包含查询。

例子：

```
Select 
   *, 
   (select count(t2.id) from table2 t2 where contains(t2.text, t.someinteger)) as number 
from table1 t` 
```

由于`t.someinteger`不是字符串，因此查询失败。

我尝试将整数转换为 a`varchar`但它在语法上不正确。有谁知道如何实现这一目标？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:49:47.033

全文包含不会像您期望的那样工作。全文查询有很多技巧。也许你应该看看 like 运算符：

```
select 1 where '1234' like '%' + cast(34 as nvarchar) + '%';

select 1 where '1234' like '%' + cast(35 as nvarchar) + '%'; 
```

全文搜索不适用于搜索子字符串，如本文所示：

[如何让领先的通配符全文搜索在 SQL Server 中工作？](https://stackoverflow.com/questions/3400/how-do-you-get-leading-wildcard-full-text-searches-to-work-in-sql-server)

**全文搜索如何工作？**让它变得简单：它获取您的文本，将其拆分为标记/单词（将其视为标签），并为每个标签/单词编制索引。

所以，如果你寻找一个词/标签，它会非常快。如果您在单词中查找子字符串，它的行为就像“LIKE”查询一样。

根据我自己的经验：如果您从单词的末尾或中间的子字符串中查找，全文搜索将无济于事。如果你寻找词的开头，它会很快。

所以，如果你想找到单词“substring”的一些子串：

1）好的（快速）查询将是“sub*”、“subs*”等 => 将使用索引

2) 真正糟糕的查询将是：“*string”、“ *str* ”等 => 不会使用索引

# php - 如何在页面上显示我的用户名和电子邮件地址？tank_auth 代码点火器

> ID：15618871
> 
> 赞同：0
> 
> 时间：2013-03-25T15:38:56.313
> 
> 标签：php, codeigniter, tankauth

我有一个codeigniter 应用程序。今天我添加了 tank_auth 插件。它很好用，但有一件事我不知道。如何在页面上打印用户名？

在 tank_auth 的文档中，他们说

> get_username：获取经过身份验证的用户的用户名，否则为 FALSE。如果在注册时不使用用户名，则此方法毫无意义（在这种情况下，它为每个用户返回一个空字符串）。\

但是在我看来，用户名是怎么回事？我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:33:44.980

您可以使用`get_username`.

但是，你必须设置用户的用户名，否则`get_username`会返回`FALSE`。

因此，如果您有一个用户，并且该用户已登录，并且该用户设置了用户名（不仅仅是电子邮件地址），您可以通过以下方式显示用户名：

```
echo $this->tank_auth->get_username(); 
```

# php - 如何从 PHP 发送 JSON 格式的对象数组

> ID：15618873
> 
> 赞同：12
> 
> 时间：2013-03-25T15:39:02.757
> 
> 标签：php, json

php新手。我正在尝试以名称-值对的形式将 JSON 数据发送到前端。我尝试了一个我在[这里](http://php.net/manual/en/function.json-encode.php)得到的示例 以下是我的代码片段，它以 JSON 名称值格式发送数据。

```
while($stmt->fetch()){
    $list = array('id' => $fid, 'name' => $fname);
}
$stmt->free_result();
$stmt->close();
echo json_encode($list); 
```

我在前端得到了这个

```
Object {id: 12, name: "Manisha"} 
```

问题是我期待一个对象数组。上面的值是从 SQL 查询中获得的最后一个值。我应该对此代码进行哪些更改，以便我可以获得一组对象。就像是

```
[{"id":"1","name":"Kumari"}, {"id":"2","name":"KM"}, {"id":"3","name":"Manisha"}] 
```

请指教。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T15:40:42.967

$list 需要是一个数组，你可以像下面的代码一样将项目推送到它：

```
$list = array();
while($stmt->fetch()){
    $list[] = array('id' => $fid, 'name' => $fname);
}
$stmt->free_result();
$stmt->close();
echo json_encode($list); 
```

您还可以使用方法[fetch_all()](http://www.php.net/manual/es/mysqli-result.fetch-all.php)一次获取所有行，而不是使用循环进行迭代。尽管在此示例中，您将获得您选择的所有字段，而不仅仅是 id 和 name。

```
$list = $stmt->fetch_all();
$stmt->free_result();
$stmt->close();
echo json_encode($list); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T15:55:10.000

您应该尝试在数组末尾推送每个对象，例如使用`array_push`（相当于`$array[] = $data`, 但使其更具可读性）添加到堆栈中。

```
$list=array(); //instantiate the array 
while($stmt->fetch()){
    $data = new stdClass(); // create a new object
    $data->id=$fid;
    $data->name=$fname;
    array_push($list,$data); // push object to stack array
}
$stmt->free_result();
$stmt->close();
echo json_encode($list); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T15:45:24.340

尝试创建一个对象数组

```
$list = array();
while($stmt->fetch()) {
    // create an object
    $datum=new stdClass();
    $datum->id=$fid;
    $datum->name=$fname;

    $list[] = $datum;
}
$stmt->free_result();
$stmt->close();
echo json_encode($list); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T15:42:09.180

您的列表数组仅存储 1 行。尝试这个：

```
while ($stmt->fetch()) {
    $list[] = array('id' => $fid, 'name' => $fname);
} 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T15:43:14.573

看看这是否适合你：

```
$n = 0;
while($stmt->fetch()){
    $list[$n] = array('id' => $fid, 'name' => $fname);
    $n++;
}
$stmt->free_result();
$stmt->close();
echo json_encode($list); 
```

您正在用数组覆盖`$list`多次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-23T17:50:15.377

假设我们有这个文件结构，里面没有特定的对象：

```
 {
    "Subjects" : []
  }

//Get your Json file and decode it 
$json = file_get_contents('CdStore/Pagetest.json');
$json_data = json_decode($json,true);

   //Specifiy your Objects like this
$NewArray= array( 'Mathematics' => array(),'Physics' => array());
  //Push the new Objects  
array_push($json_data['Pagess'],$NewArray); 
   //Then encode to json
$array = json_encode($json_data); 
  //If you want to get the preview before saving
print_r($array);  

 //Save your file
file_put_contents('CdStore/Pagetest.json', json_encode($json_data)); 
```

结果你有：

```
 {"Subjects":
     [
       {
        "Mathematics":[],

        "Physics":[]

         }
     ]

  } 
```

# python - 重新匹配一个模式

> ID：15618876
> 
> 赞同：3
> 
> 时间：2013-03-25T15:39:06.143
> 
> 标签：python, regex

我有一些来自 CAS 的输出，我想将这些东西分成三部分，这里是一些示例输出：

```
' 1+2;\r\n\r(%o2)                                  3\r\n(%i3) '
'?\r\n\r\n\rpos;\r\n\r(%o1)                                  0\r\n(%i2) ' 
```

我想将输出分成三个部分：

1.  从字符串开头到';'的部分 分号。
2.  从分号之后到最后 *之前的部分*`\r\n\(%i\d+\)`
3.  最后一部分是单独的，即。`\r\n\(%i\d+\)`在最后的部分总是一个人。

我将如何将它们分开？我无法创建代码来做到这一点。

编辑：即使在分隔部分之后，我也希望保留分号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:10:19.590

这应该满足您的要求：

```
re.findall('^([^;]+);(.*)(\r\n\(%i\d+\).+)$', text, re.S) 
```

要在第一组中包含分号，只需将其添加到分组括号中：

```
re.findall('^([^;]+;)(.*)(\r\n\(%i\d+\).+)$', text, re.S) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:45:09.563

我不确定您是否需要正则表达式：

```
In [31]: s = '?\r\n\r\n\rpos;\r\n\r(%o1)                                  0\r\n(%i2) '

In [32]: p1, _, p23 = s.partition(';')

In [33]: p2, _, p3 = p23.rpartition('\r\n')

In [34]: p1, p2, p3
Out[34]: ('?\r\n\r\n\rpos', '\r\n\r(%o1)                                  0', '(%i2) ') 
```

# javascript - 使用 getElementById() 的多个 id；

> ID：15618883
> 
> 赞同：0
> 
> 时间：2013-03-25T15:39:18.270
> 
> 标签：javascript, getelementbyid

当点击链接时，我试图让 javascript 在页面上编写 html。

```
function updatetext(){
    var file = document.getElementById("file").value;
document.getElementById('updated').innerHTML = file;
}
<input id="file" value="text I want to write to the page" type="hidden">
<span id="updated">&nbsp;</span> 
```

这适用于标有“文件”的 ID，但我有多个 ID，例如 file1、file2、file3 ...

我想知道我的 onclick="updatetext()"; 应该有一些参数，比如 onclick="updatetext(1)"; 但这似乎不起作用。我不确定如何通过单击链接获得正确的输入 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T15:42:22.113

```
function updatetext(id){
    var file = document.getElementById("file" + id).value;
    document.getElementById('updated').innerHTML = file;
} 
```

如果你想做我解释的事情，那就应该这样做

# jaxb - 如何将 JBoss AS 7.1 使用的 JAXB 更改为 JDK 6 的 JAXB

> ID：15618886
> 
> 赞同：1
> 
> 时间：2013-03-25T15:39:23.027
> 
> 标签：jaxb, jboss7.x, jdk1.6, docx4j

我在 Jboss AS 7.1 上部署了一个 Spring Web 应用程序并使用 JDK 1.6。也使用 docx4j 来处理 ms office word 文件。

Jboss 强制其自己的 jaxb 实现。然而 docx4j 需要 JDK 1.6 的 jaxb 实现。

我如何使用 jdk 的 jaxb 而不是 jboss 的 jaxb？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:14:09.760

您可以将`jaxb.properties`文件放在与域模型相同的包中，以覆盖使用的默认 JAXB 实现。

**jaxb.properties**

下面的示例是指定 EclipseLink MOXy 作为您的 JAXB 提供程序时文件内容的样子。要指定备用[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)提供程序，您只需更改属性的值：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# django - 动态视图未显示

> ID：15618887
> 
> 赞同：1
> 
> 时间：2013-03-25T15:39:22.913
> 
> 标签：django, python-2.7, django-forms, django-views

我正在尝试进行测验，如果您回答错误的问题，您会看到该问题被添加到错误问题列表中。

问题可以在多个测验中使用，所以我不能硬编码询问 question_1 然后 question_2 等。

当我加载页面时，我看到了第一个问题，但是如果我提交或刷新，我会看到 right.html 模板。它不会问所有的问题。

它应该在呈现 right.html 页面之前询问所有问题

```
for question in quiz.questions.all():
   if question not in asked_questions:
        asked_questions.append(question)
        return answer_question(request, quiz_id, question.id, module_list) 
```

# 模型.py

```
class Choice(models.Model):
    choice = models.CharField(max_length=64)
    def __unicode__(self):
        return self.choice

#create a multiple choice quiz to start
class Question(models.Model):
    question = models.CharField(max_length=64)
    answer = models.CharField(max_length=64)
    choices = models.ManyToManyField(Choice)
    module = models.CharField(max_length=64)

    def __unicode__(self):
        return self.question

class Quiz(models.Model):
    name = models.CharField(max_length=64)
    questions = models.ManyToManyField(Question)

    def __unicode__(self):
        return self.name 
```

# 视图.py

```
asked_questions = []
module_list = []
module_list.append('test')

def take_quiz(request, quiz_id):
    quiz = Quiz.objects.get(id=str(quiz_id))

    for question in quiz.questions.all():
        if question not in asked_questions:
            asked_questions.append(question)
            return answer_question(request, quiz_id, question.id, module_list)
    #quiz is over
    return render (request, 'right.html')

def answer_question(request, quiz_id, question_id, module_list):
    question = Question.objects.get(id=question_id)
    #module_list = []
    if request.method == 'POST':
        form = QuestionForm(request.POST)
        choices = [(i, i) for i in question.choices.all()]
        form.fields['selection'].choices = choices

        if form.is_valid():
            if form.cleaned_data['selection'] != str(question.answer):
                module_list.append(question.module)
            return take_quiz(request, quiz_id)
    else:
        form = QuestionForm()
        choices = [(i, i) for i in question.choices.all()]
        form.fields['selection'].choices = choices

    return render(request, 'answer_question.html', {'question':question, 'form':form, 'module_list':module_list}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:18:06.787

也许你应该试试

```
return HttpResponseRedirect(reverse('answer_question', args=[quiz_id, question_id, module_list])) 
```

将您的视图重定向到另一个视图。

ps：reverse 应该包含你的“answer_question”视图的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:11:30.353

如果您打算托管它并使其在网络上可用，那么您真的应该重新开始。您不应该使用这样的列表来存储东西，而应该使用[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)或[缓存](https://docs.djangoproject.com/en/dev/topics/cache/)。此外，最好使用[FormWizard](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)进行测验，因为它旨在完成您正在尝试做的事情：处理多个表单并处理它们。

# xml - 将嵌套的xml文件转换为R中的数据框

> ID：15618888
> 
> 赞同：2
> 
> 时间：2013-03-25T15:39:23.027
> 
> 标签：xml, r, xml-parsing

我需要使用 R 中的 xml 包将 xml 文件转换为数据框。我的 xml 文件如下所示：

```
<?xml version="1.0"?>
<root>
  <item id="Applications">
    <content>
      <name><![CDATA[IT Applications]></name>
    </content>
    <item id="Web">
      <content>
        <name><![CDATA[Web_IT]]></name>
      </content>
      <item id="1234">
        <content>
          <name><![CDATA[FrontEnd-1234]]></name>
        </content>
      </item>
      <item id="3456">
        <content>
          <name><![CDATA[BackEnd-3456]]></name>
        </content>
      </item>
    </item>
    <item id="Corp">
      <content>
        <name><![CDATA[Corporate]]></name>
      </content>
      <item id="56778">
        <content>
          <name><![CDATA[Exchage-56778]]></name>
        </content>
      </item>
   </item>
</root> 
```

我需要把 thix sml 变成这样的数据框：

```
Web     Web_IT      1234    FrontEnd-1234
Web     Web_IT      3456    BackEnd-3456
Corp   Corpporate   56778   Exchange-56778 
```

有什么想法我会怎么做？有没有人做过这样的事情？

# javascript - JS Intellisense 不适用于 VS2012 中的外部 URL 文件

> ID：15618893
> 
> 赞同：3
> 
> 时间：2013-03-25T15:39:29.903
> 
> 标签：javascript, visual-studio-2012, intellisense

vs 2012 的智能感知不支持外部 JS 文件吗？

作品

```
<reference path="Model.js"/> 
```

不工作

```
<reference path="http://localhost/MyProject/Model.js"/> 
```

Model.js 是通过 http 模块自动创建的，知道我如何让它工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:57:49.697

在通过 JSLint 运行我的代码并修复它现在正确显示的所有问题之后。如果解析器无法处理代码，Intellisense 应弹出警告。

# jsf - Primefaces 数据表过滤记录

> ID：15618895
> 
> 赞同：0
> 
> 时间：2013-03-25T15:39:33.037
> 
> 标签：jsf, primefaces

我有一个用 Primefaces 组件编写的 JSF 页面。我的页面由三个扇区组成，每个扇区包含一个手风琴面板，手风琴的每个选项卡都包含一个数据表。

我希望使用扇区顶部的两个按钮“过滤器”和“重置过滤器”来搜索数据表。一个扇区内的搜索必须独立于其他扇区内的搜索。

我希望了解执行上述搜索/过滤的最佳方法。考虑每次打开手风琴选项卡时，都会从数据库中加载记录。

```
<h:form id="form">
    <p:tabView id="sectors" value="#{multipleSearchBean.sectors}"
        var="sector">
        <p:tab id="sett" title="#{sector.description}">
            <ui:param name="key" value="searchText#{sector.id - 1}" />
            <p:inputText id="searchValue" value="#{multipleSearchBean[key]}" />

            <p:commandButton id="plainSearch" value="Filter"
                action="#{searchBean.plainSearch()}">
            </p:commandButton>

            <p:commandButton id="resetSearch" value="Reset Filters"
                action="#{searchBean.resetSearchFilters}">
            </p:commandButton>

            <p:accordionPanel id="accordion"
                value="#{searchBean.getTabs()}" var="tab" multiple="true"
                dynamic="true" cache="false"
                activeIndex="#{searchBean.activeIndexes}">
                <p:tab id="accordionTab" title="#{tab.title}">
                    <p:dataTable id="table" var="row"
                        value="#{searchBean.getObjects()}"
                        emptyMessage="Empty table" styleClass="#{sector.id - 1}_tableStyle">
                        <p:column headerText="Code">
                            <h:outputText value="#{row.code}" />
                        </p:column>
                        <p:column headerText="Description">
                            <h:outputText value="#{row.description}" />
                        </p:column>
                    </p:dataTable>
                </p:tab>
            </p:accordionPanel>
        </p:tab>
    </p:tabView>
</h:form> 
```

# javascript - 实现骨干列表应用的最佳方式

> ID：15618898
> 
> 赞同：1
> 
> 时间：2013-03-25T15:39:48.340
> 
> 标签：javascript, backbone.js, backbone-boilerplate

我使用backbone.boilerplate 创建一个简单的应用程序。

我想创建可以显示网站集合的模块。每个站点都有 id 和 title 属性（例如`[{ id: 1, title: "github.com" }, { id: 2, title: "facebook.com" }]`.

我的路由器：

```
routes: {
  "": "index",
  "sites": "sites"
},

sites: function () {
  require(['modules/sites'], function (Sites) {
    var layout = new Sites.Views.Layout();
    app.layout.setView('#content', layout);
  });
} 
```

所以，我的网站模块有布局，这样做：

```
Sites.Views.Layout = Backbone.Layout.extend({
  template: "sites/layout",
  className: 'container-fluid',

  initialize: function () {
    _.bindAll(this);

    this.collection = new Sites.Collections.Sites();
    this.collection.fetch({
      success: this.render
    });
  },

  beforeRender: function () {
    var siteList = new Sites.Views.SiteList({
      collection: this.collection
    });

    this.setView('.content', siteList);
  },
});

Sites.Views.SiteList = Backbone.View.extend({
  template: 'sites/list',

  beforeRender: function () {
    this.collection.each(function (model) {
      var view = new Sites.Views.SiteItem({
        model: model
      });
      this.insertView('tbody', view);
    }, this);
  }
});

Sites.Views.SiteItem = Backbone.View.extend({
  template: 'sites/item',
  tagName: 'tr',

  serialize: function () {
    return {
      title: this.model.get('title')
    };
  }
}); 
```

好的。现在我的问题是：当用户单击集合元素时，请帮助我选择呈现一个站点视图的最佳方式。我希望它像 gmail 一样工作：所有字母的一个屏幕和一个字母的所有屏幕（当它选择时）。也许您有类似应用程序示例的链接。我正在等待你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:25:39.083

查看您的 pastebin 代码，您似乎对 Backbone 有了基本的了解，这当然是您入门所需的全部内容。

话虽如此，您可能会发现这篇文章/教程很有帮助。`<select>`它介绍了构建使用 AJAX 更新其值的互连视图（在本教程中它们是相关元素）的过程：

[http://blog.shinetech.com/2011/07/25/cascading-select-boxes-with-backbone-js/](http://blog.shinetech.com/2011/07/25/cascading-select-boxes-with-backbone-js/)

# ios - Core Data keyPathsForValuesAffectingValueForKey 只调用关系，不调用属性

> ID：15618902
> 
> 赞同：5
> 
> 时间：2013-03-25T15:39:59.763
> 
> 标签：ios, core-data, key-value-observing

我正在使用 Core Data 对同时具有属性和关系的实体进行建模。我想让其中一个属性依赖于另外两个关系。

Core Data FAQ 和其他几个示例`+(NSSet *)keyPathsForValuesAffectingValueForKey:(NSString *)key`用于此目的。但是，这似乎只为我的所有关系属性调用，而不是为任何属性调用。此外`keyPathsForValuesAffecting<key>`，我的任何属性都不会被调用。

这是正常行为还是我错过了什么？如何根据其他属性或属性计算一个属性，例如。距离，通过设置 startLocation 和 stopLocation？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T14:04:09.907

几天后似乎找到了解决我自己问题的方法，结果发现我错过了一些东西。

重读[NSKeyValueObserving Protocol Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html%22NSKeyValueObserving%20Protocol%22)`keysPathsForValuesAffectingValueForKey:`中对方法的讨论后，才明白下面这句话的意思：

> 当 key 的观察者注册到接收类的实例时，key-value 观察本身会自动观察同一实例的所有 key 路径，并在其中任何一个的 value 时向观察者发送 key 的更改通知关键路径变化。

简而言之，您的实例应该有一个观察者观察您的属性变化`<key>`：

```
[myInstance addObserver:myObserver forKeyPath:attributeKey options:nil context:nil]; 
```

一旦您注册了观察者，协议就会调用`keysPathsForValuesAffectingValueForKey`您的特定属性键。如果此方法返回一组非空的关键路径，KVO 将为您的属性发出更改通知，如果对这些关键路径中的任何一个进行了更改，除了通知您对属性的任何直接更改。

关系键确实会被自动调用，因为 Core Data 已经使用观察者来保持逆向关系的更新。

在您希望某个属性依赖于同一实体中的另一个属性或关系的特定情况下，您必须：

1.  在 awakeFromInsert: 方法中添加观察者`addObserver:forKeyPath:options:context:`
2.  实施`keyPathsForValuesAffectingValueForKey:`或`keyPathsForValuesAffecting<key>`
3.  为您的属性键路径实施`observeValueForKeyPath:ofObject:change:context`以作用于相关的更改通知，即更新您的属性值。

# c++ - 带有 Boost 的通用函数 bind()

> ID：15618903
> 
> 赞同：-1
> 
> 时间：2013-03-25T15:39:59.997
> 
> 标签：c++, boost, boost-bind

我有一些 C 风格的函数返回`0`以指示成功和`!= 0`错误。
我想将它们“包装”到**`void`函数中，`throw`**而不是返回值。

我写了这个助手：

```
void checkStatus(int status) {
  if (status != 0)
    // throw an error object
} 
```

然后，为了包装一个确定的函数`int tilt(float degrees)`，我使用[`boost::bind`](http://boost.org/libs/bind)：

```
function<void(float)> ntilt = bind(checkStatus, bind(tilt, _1));
ntilt(30); // this will call checkStatus(tilt(30)) 
```

而且效果很好。但我想要一个专用的包装函数，所以我可以这样做：

```
function<void(float)> ntilt = wrap(tilt);
ntilt(30); // this will call checkStatus(tilt(30)) 
```

它应该适用于*任何*返回`int`.
使用 Boost 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:55:03.830

您可以创建多个重载来处理包装函数可能采用的不同数量的参数：

```
// handles 1 parameter functions
template<typename Ret, typename T0>
function<void(T0)> wrap(Ret (*fun)(T0)) {
    return bind(checkStatus, bind(fun, _1));
}

// handles 2 parameters functions    
template<typename Ret, typename T0, typename T1>
function<void(T0, T1)> wrap(Ret (*fun)(T0, T1)) {
    return bind(checkStatus, bind(fun, _1, _2));
}

// ... add more 
```

这是一个 C++11 实现。如果你不想要一个，你可以避免一些东西`std::function`，但是，它有效：

```
#include <functional>
#include <stdexcept>

template<typename Ret, typename... Args>
struct wrapper {
    typedef Ret (*function_type)(Args...);

    void operator()(Args&&... args) {
        if(fun(std::forward<Args>(args)...) != 0)
            throw std::runtime_error("Error");
    }

    function_type fun;
};

template<typename Ret, typename... Ts>
std::function<void(Ts...)> wrap(Ret (*fun)(Ts...)) {
    return std::function<void(Ts...)>(wrapper<Ret, Ts...>{fun});
} 
```

[这](http://liveworkspace.org/code/2by9b0%240)是一个现场演示。

# regex - Vim 正则表达式：为什么反斜杠在 + 之前而不是 * 之前

> ID：15618904
> 
> 赞同：2
> 
> 时间：2013-03-25T15:40:00.557
> 
> 标签：regex, vim

为什么在[vim搜索模式](http://vimregex.com/)中“1或更多”是`\+`（带反斜杠）和“零或更多”是`*`（不带反斜杠）有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:55:12.460

与[Perl 正则表达式相比，](https://stackoverflow.com/a/3867250/430766) Vim 只是有一些语法差异，这使得 Vim 正则表达式与 非常相似`sed`，您还必须用 指定 Kleene-Operator`*`及其一个或多个变体`\+`。

# php - 使用 php 使用 asp.net 网络服务

> ID：15618906
> 
> 赞同：0
> 
> 时间：2013-03-25T15:40:10.933
> 
> 标签：php, asp.net, web-services

我需要创建一个使用 asp.net 网络服务的 php soapclient。我已经阅读了手册页，但我承认我对 PHP 相当陌生。20 年的打字语言可能会让我陷入愚蠢。

我已经尝试过soapvar、数组、类。它们通常都以“调用...的非对象上的成员函数 CreatePurchase() 结束”

ASP.net 代码工作正常，并在使用 Fiddler 时产生此代码。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><CreatePurchase xmlns="http://licensing.mancosoftware.com/webservices/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><axCustomer><Customer Name="Ron Howard" EMail="RH@Anysite.com" FirstName="Ron E" LastName="Howard" Salutation="Mr." Company="RHP" Address="1313 Mockingbird Rd." Address2="1" City="Los Angles" StateCode="CA" CountryISOCode="USA" PostCode="99999-9999" Phone="888.888.8888" Fax="888.888.8888" Comments="Now is time for all good men to come to the aid of their country" xmlns=""><Purchase LicenseID="0" PurchaseDate="9/23/2012" Income="0.00" Comments="AOTC"></Purchase></Customer></axCustomer></CreatePurchase></s:Body></s:Envelope> 
```

那么 CreatePurchase 在我缺少的参数字段中寻找什么？

问候，

PHP 版本 5.3.21 Apache 2.2.22

这是 WSDL：

```
http://www.mancosoftware.com/ActivationService/ActivationService.asmx?WSDL

<s:element name="CreatePurchase"><s:complexType><s:sequence><s:element minOccurs="0" maxOccurs="1" name="axCustomer"><s:complexType><s:sequence><s:any/></s:sequence></s:complexType></s:element><s:element minOccurs="1" maxOccurs="1" name="returnFullSaleInfo" type="s:boolean"/></s:sequence></s:complexType></s:element>

<s:element name="CreatePurchaseResponse"><s:complexType><s:sequence><s:element minOccurs="1" maxOccurs="1" name="CreatePurchaseResult" type="s:boolean"/><s:element minOccurs="0" maxOccurs="1" name="aoUnlockKeyList" type="tns:ArrayOfString"/></s:sequence></s:complexType></s:element>

CreatePurchase { axCustomer axCustomer; boolean returnFullSaleInfo; }" [5]=>  string(36) "struct axCustomer {  any; }"

POST /ActivationService/ActivationService.asmx HTTP/1.1
Host: www.mancosoftware.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://licensing.mancosoftware.com/webservices/CreatePurchase"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
 <soap:Body>
  <CreatePurchase xmlns="http://licensing.mancosoftware.com/webservices/">
   <axCustomer>xml</axCustomer>
   <returnFullSaleInfo>boolean</returnFullSaleInfo>
  </CreatePurchase>
 </soap:Body>
</soap:Envelope>

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
 <soap:Body>
  <CreatePurchaseResponse xmlns="http://licensing.mancosoftware.com/webservices/">
   <CreatePurchaseResult>boolean</CreatePurchaseResult>
   <aoUnlockKeyList>
    <string>string</string>
    <string>string</string>
   </aoUnlockKeyList>
 </CreatePurchaseResponse>
</soap:Body>
</soap:Envelope>

<?php

error_reporting(E_ALL);
ini_set('display_errors', 1);

$params['trace'] = true;
$soapURL = "http://www.mancosoftware.com/ActivationService/ActivationService.asmx?WSDL";
$client = new SoapClient($soapURL, $params);

$result = $client->Login(array(
    "asUserName" => "xxx",
    "asPassword" => "xxx"
));

$name = "Ron Howard";
$email = "rh@abc.com";
$firstname = "Ron";
$lastname = "Howard";
$salutation = "Mr.";
$company = "RHP";
$address = "1313 Mockingbird Lane";
$address2 = "";
$city = "LA";
$statecode = "CA";
$countryISOcode = "USA";
$postcode = "99999";
$phone = "8888888";
$fax = "8888888";
$comments = "test 1";
$purchasedate = date("m/d/Y");

$writer = new XMLWriter();

$writer->openMemory();
$writer->setIndent(4);
$writer->startElement('Customer');
$writer->writeAttribute('Name', $name);
$writer->writeAttribute('EMail', $email);
$writer->writeAttribute('FirstName', $firstname);
$writer->writeAttribute('LastName', $lastname);
$writer->writeAttribute('Salutation', $salutation);
$writer->writeAttribute('Company', $company);
$writer->writeAttribute('Address', $address);
$writer->writeAttribute('Address2', $address2);
$writer->writeAttribute('City', $city);
$writer->writeAttribute('StateCode', $statecode);
$writer->writeAttribute('CountryISOcode', $countryISOcode);
$writer->writeAttribute('PostCode', $postcode);
$writer->writeAttribute('Phone', $phone);
$writer->writeAttribute('Fax', $fax);
$writer->writeAttribute('Comments', $comments);

$writer->startElement('Purchase');

$writer->writeAttribute('LicenseID', '0');
$writer->writeAttribute('PurchaseDate', $purchasedate);
$writer->writeAttribute('Income', '0');
$writer->writeAttribute('Comments', 'Test');

$writer->endElement();
$writer->endElement();

$Customer1 = ($writer->outputMemory(True));

$result = $Client->CreatePurchase(this is where I break down and cry and beg for help)

$result1 = $client->Logout();

?> 
```

# css - 预定义 HTML 时使用 CSS 更改 div 顺序

> ID：15618907
> 
> 赞同：1
> 
> 时间：2013-03-25T15:40:12.107
> 
> 标签：css, xhtml, css-float

想象一下下面的 HTML 代码：

```
 <html>
    ...
    <div id="stuff1">
        barbaz
    </div>

    <div id="stuff2">
        foobar
    </div>
    ...
   </html> 
```

现在，假设我想使用 CSS 以便 `stuff2`出现在上面`stuff1`。有没有办法在不使用`position: absolute`且不更改 HTML 代码的情况下做到这一点？

我试过`float`这样使用：

```
#stuff2 { float: left; }
#stuff1 { clear: left; } 
```

但它没有成功。它与不使用 `float`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:54:38.340

我成功地首先获得了第二个元素，但没有像您期望的那样在下一行中。

```
#stuff1{display:inline-block;/* or display: inline; */}
#stuff2{float:left;} 
```

[**`Working Fiddle`**](http://jsfiddle.net/bCHNh/3/)

**要不然**

您还可以使用`transform`CSS3 属性

```
#stuff1{
    background-color:red;
    transform: translate(0px, 100px);
    -webkit-transform: translate(0px, 100px);
    -moz-transform: translate(0px, 100px);
    -o-transform: translate(0px, 100px);
    -ms-transform: translate(0px, 100px);
}
#stuff2{
    background-color:green;
    transform: translate(0px, 0px);
    -webkit-transform: translate(0px, 0px);
    -moz-transform: translate(0px, 0px);
    -ms-transform: translate(0px, 0px);
    -o-transform: translate(0px, 0px);
} 
```

[**`Working Fiddle`**](http://jsfiddle.net/bCHNh/4/)

还可以查看 paul Irish 网站，了解[翻译和定位](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)之间的性能图表。

如果您不知道高度，请使用[**javascript 或 jQuery**](https://stackoverflow.com/a/15701097/1577396)计算高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:39:17.707

试试下面的css，也许这对我们有帮助

```
#stuff2 { float: left;  margin-top: -40px; }   
#stuff1 { clear: left; margin-top: 30px; } 
```

# sql - 使用另一个表中的 Count() 值对 sql 结果进行排序

> ID：15618909
> 
> 赞同：0
> 
> 时间：2013-03-25T15:40:18.810
> 
> 标签：sql, sql-order-by

假设我们有一个这样的用户表：

```
ID  |  USERNAME  |  STATUS  |
01  |  Aname     |    1     |
02  |  Bname     |    1     |
03  |  Cname     |    2     |
04  |  Dname     |    1     | 
```

还有另外两个表，其中，对于每个用户，记录用户“拥有”的距离、视频和照片的项目，假设视频表是这样的：

```
ID  |  USER      |  VIDEO   |
01  |  01        |   aaaa   |
02  |  01        |   bbbb   |
03  |  02        |   cccc   |
04  |  02        |   dddd   |
05  |  03        |   eeee   |
06  |  03        |   ffff   |
07  |  03        |   gggg   | 
```

照片也一样：

```
ID  |  USER      |  PHOTO   |
01  |  01        |   aaaa   |
02  |  02        |   cccc   |
03  |  02        |   dddd   |
04  |  03        |   eeee   |
05  |  03        |   ffff   |
06  |  03        |   gggg   | 
```

现在，我正在尝试在`STATUS`字段上对第一个表的结果进行排序，因此状态为 2 的用户将在结果的末尾（或开头）进行排序，但我想通过以下事实对其他表进行排序他们有或没有视频或照片。实际上，对于状态为 1 的所有用户，我检查他们是否有视频和照片并显示诸如“警告，您没有视频”之类的消息，我还想根据状态和事实对所有用户进行排序他们有没有照片或视频……比如：

```
SELECT id,username,status,NumOfPhotos,NumOfVideos order by status ASC, numOfPhotos ASC, NumOfVideos DESC 
```

`NumOfPhotos`例如，在哪里`SELECT COUNT(*) FROM PHOTOS WHERE USER = USERS.ID`

那可能吗？这可能在一个声明中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:52:53.530

这是 SQL Server 上的一个示例，但类似的东西应该可以在其他 RDBMS 上运行良好

```
SELECT 
id, username, status, COALESCE(NumOfPhotos,0) AS NumOfPhotos,COALESCE(NumOfVideos,0) AS NumOfVideos 
FROM dbo.Users u 
LEFT JOIN (SELECT [USER], COUNT(*) AS NumOfPhotos FROM dbo.Photos GROUP BY [USER]) ph ON ph.[USER] = u.ID
LEFT JOIN (SELECT [USER], COUNT(*) AS NumOfVideos FROM dbo.Videos GROUP BY [USER]) vd ON vd.[USER] = u.ID
ORDER BY status ASC, numOfPhotos ASC, NumOfVideos DESC 
```

[SQLFiddle](http://sqlfiddle.com/#!6/38d7a/1)

# hibernate - Envers 使用 JoinTable 在双向 OneToMany 中插入空 Id

> ID：15618913
> 
> 赞同：2
> 
> 时间：2013-03-25T15:40:26.603
> 
> 标签：hibernate, hibernate-envers

我在 Postgresql 上使用 Hibernate 和 Envers 3.6.10。我已经`OneToMany`使用实体 A 和 B 之间的 a 映射了一个双向关系`JoinTable`，如下所示。

**A类：**

```
@Entity
@Audited
public class A {
    // Other stuff

    @OneToMany()
    @Cascade(CascadeType.ALL)
    @LazyCollection(LazyCollectionOption.TRUE)
    @JoinTable(name = "A_B", joinColumns = { @JoinColumn(name = "A_ID") }, inverseJoinColumns = { @JoinColumn(name = "B_ID") }) 
    private Set<B> setOfBs;

    // Getters + Setters + HashCode + Equals
} 
```

**B类：**

```
@Entity
@Audited
public class B {
    // Other stuff

    @ManyToOne(optional=true)
    @LazyCollection(LazyCollectionOption.TRUE)
    @JoinTable(name = "A_B", joinColumns = { @JoinColumn(name = "B_ID") }, inverseJoinColumns = { @JoinColumn(name = "A_ID") })
    private A a;

    // Getters + Setters + HashCode + Equals
} 
```

通过 a 持久化具有一组 B 的 A 实体时没有问题`save()`。即使没有明确设置 B 和 A 之间的双向关系。当 Envers 进行插入以将修订保存在`JoinTable`aud 表中时出现此异常：

```
Hibernate: insert into a_b_AUD (a_id, b_id, REV) values (?, ?, ?)
16:27:38,051 TRACE BasicBinder:70 - binding parameter [1] as [BIGINT] - <null>
16:27:38,051 TRACE BasicBinder:82 - binding parameter [2] as [BIGINT] - 2038
16:27:38,051 TRACE BasicBinder:82 - binding parameter [3] as [INTEGER] - 2039
16:27:38,056  WARN JDBCExceptionReporter:233 - SQL Error: 0, SQLState: 23502
16:27:38,056 ERROR JDBCExceptionReporter:234 - ERROR: null value in column «a_id» violates not null restriction 
```

如果我在 Hibernate 中设置完整的调试模式，我可以看到 Envers“知道”该 Id 但没有将其传递给插入。我该如何解决这个问题？关系是否正确映射？Envers 需要一些特殊的配置。管理这个？

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:37:02.037

这可能是 Envers 中的一个错误，因为它是一种非常不典型的映射关系的方式。事实上，从 Hibernate 的角度来看，这是两个单向关系，它们被映射到相同的列。

要建立双向关系，您需要在 @OneToMany 中有“mappedBy”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T07:38:55.443

问题是生成的 DDL：

```
CREATE TABLE public.a_b_aud (
  b_id BIGINT NOT NULL, 
  rev INTEGER NOT NULL, 
  a_id BIGINT NOT NULL, 
  CONSTRAINT a_b_aud_pkey PRIMARY KEY(a_id, rev), 
  CONSTRAINT fk_5689e745b66c4ee2a8822e44079 FOREIGN KEY (b_id, rev)
    REFERENCES public.b_aud(id, rev)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE, 
  CONSTRAINT fk_b5c868c4f5f34d35bdb7a6c1281 FOREIGN KEY (a_id, rev)
    REFERENCES public.a_aud(id, rev)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE
) WITHOUT OIDS; 
```

正如 Envers 所期望的那样，该`b_id`列应该可以为空。就像表中的同一列一样`public.a_b`。我相信问题仅限于 DDL 生成器。

`A`to `B`OneToOne 关系是*双向可选*的并且*`A`是 owner*，这就是为什么`b_id`可以为空以及为什么主键指向`PRIMARY KEY(a_id, rev)`.

# wordpress - 无法获取 buddypress 用户头像 url

> ID：15618917
> 
> 赞同：0
> 
> 时间：2013-03-25T15:40:47.950
> 
> 标签：wordpress, buddypress

我正在开发一个插件，在插件内部，我制作了一个 Javascript 文件，我希望将特定用户 buddypress 头像 url 分配给一个变量。

我在插件文件夹中的 javascript 文件被命名为：myscript.js.php（所以 PHP 可以在这个文件中执行）。

javascript文件中的代码：

```
<?php

   header('Content-type: text/javascript');

   $home_dir = preg_replace('^wp-content/plugins/[a-z0-9\-/]+^', '', getcwd());
   include($home_dir . 'wp-load.php');

$ucurrentid = $current_user->ID;
$member_id = bp_core_get_userid( $ucurrentid );
$uphoto = bp_core_fetch_avatar ( array( 'item_id' => $member_id,'html'=>false ) );

?>

var uid = <?php echo $current_user->ID ?>;
var uphoto = <?php echo $uphoto ?>;

alert(uphoto); 
```

这将返回错误：PHP 致命错误：调用未定义函数 bp_user_avatar()

为什么函数 undefined ，我应该将哪个 buddypress 文件包含到代码中以便函数工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:50:13.200

这对我有用：

[http://viviendoenlaeradelaweb20.blogspot.com/2013/03/buddypress-avatar-url.html](http://viviendoenlaeradelaweb20.blogspot.com/2013/03/buddypress-avatar-url.html)

我希望会有用:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T13:28:46.640

你可以试试 ：

```
$avatar_link = bp_core_fetch_avatar(array('html' =>  false, 'item_id' =>  $user_id));
$avatar = '<img title="admin" src="' . $avatar_link . '"></img>';

// Display image
echo $avatar 
```

您需要用户 ID。在循环内部，您可以执行以下操作：

```
$user_id = bp_get_member_user_id(); 
```

# c# - 在GridView中显示sd卡的图片

> ID：15618918
> 
> 赞同：0
> 
> 时间：2013-03-25T15:40:49.990
> 
> 标签：c#, android, mono, xamarin.android, xamarin

我正在尝试在 Xamarin.Android 应用程序的 GridView 中显示 sd 存储中的一些图片。

我发现的唯一文档是：[http ://docs.xamarin.com/recipes/android/data/files/selecting_a_gallery_image](http://docs.xamarin.com/recipes/android/data/files/selecting_a_gallery_image)

但它只适用于一张图片，打开两张或多张图片会给我一个`Java.Lang.OutOfMemoryError`

在这一行：

```
imageView.SetImageURI (bitmapList [position]); 
```

在 SO 上找到了一些 Android 答案：

[https://stackoverflow.com/a/823966/511299](https://stackoverflow.com/a/823966/511299)

翻译成C#：

```
public static Bitmap DecodeFile (String s)
{
    try
    {
        s = s.Replace ("file://", "");
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options ();
        o.InJustDecodeBounds = true;

        BitmapFactory.DecodeStream (new System.IO.FileStream (s, System.IO.FileMode.Open), null, o);

        //The new size we want to scale to
        int REQUIRED_SIZE = 70;

        //Find the correct scale value. It should be the power of 2.
        int scale = 1;
        while (o.OutWidth/scale/2>=REQUIRED_SIZE && o.OutHeight/scale/2>=REQUIRED_SIZE)
        {
            scale *= 2;
        }

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options ();
        o2.InSampleSize = scale;
        return BitmapFactory.DecodeStream (new System.IO.FileStream (s, System.IO.FileMode.Open), null, o2);

    }
    catch (FileNotFoundException e)
    {
    }
    return null;
} 
```

这给了我一个

```
System.IO.IOException: Sharing violation on path  storage/sdcard0/Pictures/MyAppPhotos/44cdbcf0-a488-40b8-98a9-79f3dc8d9deb.jpg 
```

线上

```
return BitmapFactory.DecodeStream (new System.IO.FileStream (s, System.IO.FileMode.Open), null, o2); 
```

我可以访问该文件两次吗？

或者可能是因为我使用`FileStream`而不是`FileInputStream`. 尝试使用`BitmapFactory.DecodeStream`需要一个`System.IO.Stream`as 参数，而不是需要一个字符串的示例:(

更详细，这里是安卓版本`decodeStream`：

```
public static Bitmap decodeStream (InputStream is, Rect outPadding, BitmapFactory.Options opts) 
```

虽然这是我能为 Xamarin.Android 找到的所有内容：

```
public static Bitmap DecodeStream (System.IO.Stream is, Rect outPadding, BitmapFactory.Options opts) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:10:44.487

解决了。改为使用`BitmapFactory.DecodeFile(String path, BitmapFactory.Options opts)`！

# ios - 如何获取 iOS CPU Core 使用率？

> ID：15618919
> 
> 赞同：0
> 
> 时间：2013-03-25T15:40:50.893
> 
> 标签：ios, cpu-usage, sysctl

有很多相同的问题，但我找不到很好的答案。我查看了[这个](https://stackoverflow.com/questions/6785069/get-cpu-percent-usage)特定帖子中的代码，它给出了每个核心的使用率，但它不准确，即使 Instrument 告诉我一个核心处于满负荷状态（素数测试！），它也总是停留在 14% 左右。

我还阅读[了这个](https://stackoverflow.com/questions/11842513/get-cpu-usage-at-runtime-ios)问题，我实际上从中得到了代码。

我对此知之甚少`sysctl`，这似乎是这类事情的关键。有人可以向我解释如何实现这一点，代码示例将更加感激。谢谢！

这是我当前的代码，它在一个单独的线程上运行，我刚刚意识到这可能是一个问题，有人可以确认吗？（我使用 NSThread 和 NSNotificationCenter 将使用信息发送到主线程。）

```
- (void)updateCPUUsage
{
    NSMutableArray* arrayOfCPUUsage = [NSMutableArray array];
    while ( 1 )
    {
        processor_info_array_t _cpuInfo, _prevCPUInfo = nil;
        mach_msg_type_number_t _numCPUInfo, _numPrevCPUInfo = 0;
        unsigned _numCPUs;
        NSLock *_cpuUsageLock;

        int _mib[2U] = { CTL_HW, HW_NCPU };
        size_t _sizeOfNumCPUs = sizeof(_numCPUs);
        int _status = sysctl(_mib, 2U, &_numCPUs, &_sizeOfNumCPUs, NULL, 0U);
        if(_status)
            _numCPUs = 1;

        _cpuUsageLock = [[NSLock alloc] init];

        natural_t _numCPUsU = 0U;
        kern_return_t err = host_processor_info(mach_host_self(), PROCESSOR_CPU_LOAD_INFO, &_numCPUsU, &_cpuInfo, &_numCPUInfo);
        if(err == KERN_SUCCESS) {
            [_cpuUsageLock lock];
            for(unsigned i = 0U; i < _numCPUs; ++i) {
                Float32 _inUse, _total;
                if(_prevCPUInfo) {
                    _inUse = (
                              (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER]   - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER])
                              + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM])
                              + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE]   - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE])
                              );
                    _total = _inUse + (_cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE] - _prevCPUInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE]);
                } else {
                    _inUse = _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_USER] + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_SYSTEM] + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_NICE];
                    _total = _inUse + _cpuInfo[(CPU_STATE_MAX * i) + CPU_STATE_IDLE];
                }
                [arrayOfCPUUsage addObject:@(_inUse / _total)];
            }

            [_cpuUsageLock unlock];

            if(_prevCPUInfo) {
                size_t prevCpuInfoSize = sizeof(integer_t) * _numPrevCPUInfo;
                vm_deallocate(mach_task_self(), (vm_address_t)_prevCPUInfo, prevCpuInfoSize);
            }

            _prevCPUInfo = _cpuInfo;
            _numPrevCPUInfo = _numCPUInfo;

            _cpuInfo = nil;
            _numCPUInfo = 0U;
        }
        [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:@"CPUUsageUpdate" object:[arrayOfCPUUsage copy]]];
        [arrayOfCPUUsage removeAllObjects];
        usleep(1000);
    }
} 
```

# forms - Symfony2 对表单元素的有效约束不显示自定义错误消息

> ID：15618921
> 
> 赞同：2
> 
> 时间：2013-03-25T15:40:57.787
> 
> 标签：forms, symfony, doctrine-orm

我正在为用户构建一个表单以提交 DMCA 投诉，其中一个设计要求是允许他们输入一个或多个 URL。为此，我创建了一个实体 (DMCAComplaint) 和一个以 Doctrine OneToMany 关系加入 DMCAComplaint 的子实体 (DMCAComplaintURL)。

为了通过正则表达式验证 URL 条目，我设置了以下断言：

```
// src: Bundle/Event/DMCAComplaintURL.php

/**
 * @var string
 *
 * @ORM\Column(name="url", type="string", length=255, nullable=false)
 * @Assert\Regex(
 *     pattern="/(https?:\/\/)?([\w].)*example.com(\/.*)?/"),
 *     message="Please enter a URL within our site"
 * )
 */
protected $url; 
```

在投诉中：

```
// src: Bundle/Entity/DMCAComplaint.php

/**
 * @var \DMCAComplaintURL
 *
 * @ORM\OneToMany(targetEntity="DMCAComplaintURL", mappedBy="dmcaComplaint", cascade={"persist"})
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="id", referencedColumnName="dmca_complaint_id")
 * })
 * @Assert\Valid
 */
protected $urls; 
```

虽然断言有效，但它只给出以下错误：`This value is not valid.`我希望它有一条自定义消息，如`DMCAComplaintUrl $url`属性中所述。有没有办法让这个泡沫达到`Valid`断言？或者我可以用别的东西来得到我需要的东西吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T16:00:09.147

在表单字段中将 error_bubbling 设置为 true：

[http://symfony.com/doc/current/reference/forms/types/text.html#error-bubbling](http://symfony.com/doc/current/reference/forms/types/text.html#error-bubbling)

# google-chrome - 在 Google Chrome 中，更改 UserAgent 和 Device Metrics 的扩展 api 是什么？

> ID：15618923
> 
> 赞同：8
> 
> 时间：2013-03-25T15:41:02.030
> 
> 标签：google-chrome, google-chrome-extension

在谷歌浏览器中，当查看开发者工具时，右下角有一个齿轮图标，可以打开一个额外的设置弹出窗口。Settings 弹出窗口中的页面之一是 Overrides，其中包含 User Agent 和 Device Metrics 设置。我正在尝试找到能够以编程方式设置这些值的扩展 API。这样的 API 存在吗？

我查看了[main apis](https://developer.chrome.com/extensions/api_index.html)和[实验性 apis](http://developer.chrome.com/trunk/extensions/experimental.html)，但似乎找不到任何东西。

[代码](https://developer.chrome.com/extensions/samples.html)示例中的 devtools.panels示例似乎也没有表明如何“探索”现有的开发面板。

具体来说，我正在尝试构建可从浏览器操作中的上下文菜单获得的简单扩展。它就像一个用户代理切换器，在设置弹出窗口中提供来自同一列表的选择，并自动将设备指标设置为所选代理的值。例如 640x960 用于 iPhone 4。

有关如何以编程方式访问“设置”弹出窗口的任何线索

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T22:42:25.343

开发者工具提供的一些高级功能可以通过[`chrome.debugger`](http://developer.chrome.com/extensions/debugger.html)API 访问（将`debugger`权限添加到清单文件）。

可以使用以下[`Network.setUserAgentOverride`](https://developers.google.com/chrome-developer-tools/docs/protocol/tot/network#command-setUserAgentOverride)命令更改用户代理：

```
// Assume: tabId is the ID of the tab whose UA you want to change
// It can be obtained via several APIs, including but not limited to
// chrome.tabs, chrome.pageAction, chrome.browserAction, ...

// 1\. Attach the debugger
var protocolVersion = '1.0';
chrome.debugger.attach({
    tabId: tabId
}, protocolVersion, function() {
    if (chrome.runtime.lastError) {
        console.log(chrome.runtime.lastError.message);
        return;
    }
    // 2\. Debugger attached, now prepare for modifying the UA
    chrome.debugger.sendCommand({
        tabId: tabId
    }, "Network.enable", {}, function(response) {
        // Possible response: response.id / response.error
        // 3\. Change the User Agent string!
        chrome.debugger.sendCommand({
            tabId: tabId
        }, "Network.setUserAgentOverride", {
            userAgent: 'Whatever you want'
        }, function(response) {
            // Possible response: response.id / response.error
            // 4\. Now detach the debugger (this restores the UA string).
            chrome.debugger.detach({tabId: tabId});
        });
    });
}); 
```

支持的协议和命令的官方文档可以在[这里](https://developers.google.com/chrome-developer-tools/docs/debugger-protocol#protocol)找到。在撰写本文时，没有关于更改设备指标的文档。但是，在深入研究 Chromium 的源代码后，我发现了一个文件，其中定义了所有当前已知的命令：

*   chromium/src/out/Debug/obj/gen/webcore/ [InspectorBackendDispatcher.cpp](https://code.google.com/p/chromium/codesearch#search/&q=file:InspectorBackendDispatcher.cpp&sq=package:chromium&type=cs)

当我查看定义列表时，我发现`Page.setDeviceMetricsOverride`. 这个短语似乎符合我们的预期，所以让我们进一步搜索，了解如何使用它：

*   [Chromium 代码搜索：“Page.setDeviceMetricsOverride”](https://code.google.com/p/chromium/codesearch#search/&q=Page.setDeviceMetricsOverride&sq=package:chromium&type=cs)

这会产生[“chromium/src/out/Release/obj/gen/devtools/DevTools.js”](https://code.google.com/p/chromium/codesearch#chromium/src/out/Release/obj/gen/devtools/DevTools.js&q=Page.setDeviceMetricsOverride&sq=package:chromium&l=5150)（数千行）。某处，有一条线定义（美化）：

```
InspectorBackend.registerCommand("Page.setDeviceMetricsOverride", [{
    "name": "width",
    "type": "number",
    "optional": false
}, {
    "name": "height",
    "type": "number",
    "optional": false
}, {
    "name": "fontScaleFactor",
    "type": "number",
    "optional": false
}, {
    "name": "fitWindow",
    "type": "boolean",
    "optional": false
}], []); 
```

怎么读这个？好吧，发挥你的想象力：

```
chrome.debugger.sendCommand({
    tabId: tabId
}, "Page.setDeviceMetricsOverride",{
    width: 1000,
    height: 1000,
    fontScaleFactor: 1,
    fitWindow: false
}, function(response) {
    // ...
}); 
```

我已经使用协议版本 1.0 在 Chrome 25 中对此进行了测试，它可以工作：正在调试的选项卡已调整大小。耶！

# highcharts - Highcharts箱线图线渲染问题：有解决方案吗？

> ID：15618926
> 
> 赞同：1
> 
> 时间：2013-03-25T15:41:04.287
> 
> 标签：highcharts, rendering, boxplot

使用新的 Highcharts 3 箱线图系列类型，在 Firefox 中，线条渲染存在一些重大问题。

该问题在 Highcharts 演示页面上可见：http: [//jsfiddle.net/highcharts/fWN75/](http://jsfiddle.net/highcharts/fWN75/)

```
chart: {
     type: 'boxplot'
} 
```

问题似乎是

1) 中线被画出包含框几个像素

2) 晶须线被画入盒子几个像素，尤其是在下端

3) 胡须线偶尔会超出端线几个像素，尤其是在下端

问题：

1）这是一个已知问题吗？

2）有解决办法吗？

到目前为止，我在 Chrome 中没有看到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:49:14.087

确实它看起来像一个错误，所以我在这里向我们的开发人员报告了它：

[https://github.com/highslide-software/highcharts.com/issues/1638](https://github.com/highslide-software/highcharts.com/issues/1638)

谢谢你的建议

# php - 从不同的表中获取另一个字段的值？CakePHP

> ID：15618932
> 
> 赞同：0
> 
> 时间：2013-03-25T15:41:13.300
> 
> 标签：php, cakephp

我有两张桌子，`departments`和`users`。在 上`users`，我有以下字段：

```
id | username | password | email | department | date_created 
```

现在`departments`，我有以下字段：

```
id | name 
```

`department`表上的字段是`users`，`INT`它指向表`id`上的对应`departments`字段。在网络上呈现时，如何检索相应`name`的字段以显示在字段上？`department`我试过这样做，但它似乎不起作用。

```
class UsersController extends AppController {

    public function index() {
        $this->set('users', $this->User->find('all'));

        $departmentsArray = array();
        $departments = $this->Department->find('all');
        foreach ($departments as $department) {
            $departmentsArray[$department['Department']['id']] = $department['Department']['name'];
        }
        $this->set('departments', $departmentsArray);
    }

} 
```

我应该会用它来检索`View\Users\index.ctp`. 但是，它给了我一个错误：

```
Error: Call to a member function find() on a non-object 
File: D:\server\root\app\Controller\UsersController.php 
Line: 11 
```

第 11 行`$departments = $this->Department->find('all');`来自我上面给出的第一个代码块。

抱歉，如果这看起来太复杂了，如果有更简单的方法来解决这个问题，请告诉我。我想简单地说，我需要通过从另一个表定义的 id 来检索表中的数据。

**编辑：**

**来自Hyarion**的附加信息，而不是使用`find('all')`我使用`find('list')`的所以我将代码行数从 6 减少到 1！:) 这是新代码：

```
class UsersController extends AppController {
    var $uses = array('User', 'Department');

    public function index() {
        $this->set('users', $this->User->find('all'));

        $this->set('departments', $this->Department->find('list'));
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T15:47:47.070

您还需要告诉您的控制器为部门加载模型。默认情况下，它只加载用户。

将此添加到控制器的顶部：

```
var $uses = array('User', 'Department'); 
```

# tfs - 在 TFS 迁移时工作

> ID：15618933
> 
> 赞同：0
> 
> 时间：2013-03-25T15:41:14.560
> 
> 标签：tfs, migration

迁移 TFS 时开发人员是否可以离线工作？他们可以在迁移之前签出代码并在迁移完成后签入吗？

源是 TFS Express，目标是 TFS 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:12:38.110

是的，迁移将继承工作区以及迁移前签出的所有文件。迁移完成后，当用户指向新服务器时，TFS 和 VS 将进行一些自动重新布线，因为数据库具有相同的 GUID。另请注意，您需要确保他们在迁移过程中不想与旧服务器交互。

# android - 活动之间的过渡 - “后退按钮”动画

> ID：15618935
> 
> 赞同：0
> 
> 时间：2013-03-25T15:41:15.687
> 
> 标签：android, android-activity, android-animation, transition

我希望当`view`我的应用程序中的某个被单击时，它会切换到另一个`activity`但具有不同的过渡 - 而不是常规的滑动到右侧的过渡，我希望它完全相反。

现在，我已经设法使用以下代码做到这一点：

```
 @Override
        public void onClick(View view) {
            // TODO Auto-generated method stub
            v.vibrate(50);
            Intent back = new Intent(Course.this, Classes.class);
            back.putExtra("lvl", lvl);
            startActivity(back);
            overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);
            finish();
        } 
```

问题是，当我单击此按钮时`view`，转换按计划进行，但第一次`view`完全变黑。所以，动画正在工作，但我没有看到我想要的动画 - 屏幕向左滑动，因为第一个`activity`在过渡完成之前消失了。当我删除`finish();`命令时也会发生这种情况。

怎么可能做到这一点？谢谢！

# ios - EvernoteSession authenticateWithViewController:completionHandler: 不触发completionHandler

> ID：15618946
> 
> 赞同：1
> 
> 时间：2013-03-25T15:41:34.377
> 
> 标签：ios, ios6, objective-c-blocks, evernote

当我在调试模式下在 iPhone 模拟器中进行身份验证时，`if`运行下面代码中的第一条语句。但是，当我在安装了 Evernote 客户端的 iPhone 上进行调试时，该`if`语句不会出现评估。取而代之的是，Evernote iOS 应用程序会出现片刻，然后直接返回到此 ViewController，而不会在 if 下设置任何断点，也不会触发 segue。

有任何想法吗？

```
[session authenticateWithViewController:self completionHandler:^(NSError *error) {
    if (error || !session.isAuthenticated){
        if (error) {
            NSLog(@"Error authenticating with Evernote Cloud API: %@", error);
        }
        if (!session.isAuthenticated) {
            NSLog(@"Session not authenticated");
        }
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:@"Could not authenticate"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
    } else {
        // We're authenticated!
        EvernoteUserStore *userStore = [EvernoteUserStore userStore];
        [userStore getUserWithSuccess:^(EDAMUser *user) {
            // success
            NSLog(@"Authenticated as %@", [user username]);

            [self performSegueWithIdentifier:@"introductionStepOne" sender:self];
        } failure:^(NSError *error) {
            // failure
            NSLog(@"Error getting user: %@", error);
        } ];
    }
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:01:15.440

确保正确修改 AppDelegate。更多信息在这里：[https ://github.com/evernote/evernote-sdk-ios#modify-your-appdelegate](https://github.com/evernote/evernote-sdk-ios#modify-your-appdelegate)

您需要添加：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:      (NSString *)sourceApplication annotation:(id)annotation {
BOOL canHandle = NO;
    if ([[NSString stringWithFormat:@"en-%@", [[EvernoteSession sharedSession] consumerKey]]     isEqualToString:[url scheme]] == YES) {
    canHandle = [[EvernoteSession sharedSession] canHandleOpenURL:url];
    }
    return canHandle;
} 
```

和

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was     inactive. If the application was previously in the background, optionally refresh the user     interface.
    [[EvernoteSession sharedSession] handleDidBecomeActive];
} 
```

# gps - 检查点是否在多边形内

> ID：15618950
> 
> 赞同：5
> 
> 时间：2013-03-25T15:41:47.130
> 
> 标签：gps, geojson

给定一个[GEO-JSON](http://www.geojson.org/)多边形，如下所示：

```
[
    [15.520376, 38.231155],
    [15.160243, 37.444046],
    [15.309898, 37.134219],
    [15.099988, 36.619987],
    [14.335229, 36.996631],
    [13.826733, 37.104531],
    [12.431004, 37.61295],
    [12.570944, 38.126381],
    [13.741156, 38.034966],
    [14.761249, 38.143874],
    [15.520376, 38.231155]
] 
```

如何检查 GPS 位置是否在多边形区域内？

例如，如果用户位于*Lat 37.387617*，*Long 14.458008*，我将如何搜索数组？

我不需要有人为我编写代码，我只是不明白如何检查的逻辑。如果您有任何示例（任何语言），请指出我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T18:21:00.390

此任务称为`point in polygon`测试。

Gerve 解释了用于此任务的 widley 算法。但这不会帮助您实施它。有脚陷阱，就像平行线一样。

其中一种算法称为 Crossings Multiply test，它是一种优化的变体。

源代码：[CrossingsMultiplyTest](http://www.realtimerendering.com/resources/GraphicsGems//gemsiv/ptpoly_haines/ptinpoly.c)（文件中的最后一个函数）

[“多边形策略中的点”中](http://erich.realtimerendering.com/ptinpoly/)给出了概述

使用经度作为`x`坐标，使用纬度作为`y`坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T16:57:31.180

我找到了一篇关于[Ray-casting algorithm](http://rosettacode.org/wiki/Ray-casting_algorithm)的文章。这里解释得很好，它的要点是（*在伪代码中*）：

```
count ← 0
 foreach side in polygon:
   if ray_intersects_segment(P,side) then
     count ← count + 1
 if is_odd(count) then
   return inside
 else
   return outside 
```

# ruby - 使用 RVM 安装 Ruby 时 gem 的路径（例如 /var/lib/gems/1.8/bin/）？

> ID：15618958
> 
> 赞同：0
> 
> 时间：2013-03-25T15:42:08.973
> 
> 标签：ruby, rubygems, rvm, ubuntu-12.04, jekyll

第一次使用 Ruby，原因是 Jekyll。

首先，我安装了 RVM（在 Ubuntu Server 12.04 64 位上）：

```
\curl -L https://get.rvm.io | bash -s stable 
```

并按照安装过程的指导遵循后续说明（例如添加`source ~/.profile`到`~/.bash_profile`）。**我遵循的[完整说明在这里](https://gist.github.com/anonymous/eacf424d0435e9834010)。**

阅读`rvm requirements`命令的输出，并安装所有必要的二进制文件。

安装 Ruby 1.9.3，配置 RVM 以使用它，然后安装 RubyGems，依次发出以下命令：

```
rvm install 1.9.3
rvm use 1.9.3
rvm rubygems current 
```

跑来`ruby --version`确保我使用的是 Ruby 1.9.3。

然后使用 gem 安装 Jekyll：

```
gem install jekyll 
```

[通过复制官方 Jekyll 存储库提供的](https://github.com/mojombo/jekyll/tree/master/site)[**jekyll/site**](https://github.com/mojombo/jekyll/tree/master/site)的内容来设置基本站点结构，然后对`_config.yml`和进行必要的更改`CNAME`。

**事情就是这样！**当我运行时，`jekyll --server`我得到相同的旧[TCP/Webrick 错误](https://stackoverflow.com/q/10261477/1071413)（但没有一个解决方案有效）。

所以，[正如 Jekyll wiki 所说](https://github.com/mojombo/jekyll/wiki/Usage#running-jekyll)，它可能是这样的：

> 在 Debian 或 Ubuntu 上，您可能需要添加`/var/lib/gems/1.8/bin/`到您的路径。

问题是：

1.  在我的情况下，`/var/lib/gems/...`不存在。可能是因为我安装了 Ruby、RubyGems，都使用 RVM。那么，在我的情况下，路径是什么？

2.  同样，如果我知道路径，我应该如何*“添加`/var/lib/gems/*.*/bin/`到你的路径”*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:36:08.970

首先，你可以忽略这个问题，如果你的意思是

```
[2012-04-21 13:46:40] WARN  TCPServer Error: Address already in use - bind(2) 
```

这是因为 RubyGems 上最新版本的 jekyll 中的一些错误代码，但是，它似乎已[在 github 上的最新代码中](https://github.com/mojombo/jekyll)得到纠正。jekyll 创建的服务器尝试在 IPv4('0.0.0.0') 和 IPv6('::') 上进行绑定，因此第一次绑定成功，在 IPv6 上的绑定失败并记录了警告。

看看你的`~/.rvm`目录中的 jekyll 可执行文件，也许`~/.rvm/gems/ruby-1.9.3-p392/gems/jekyll-0.12.1/bin/jekyll`，大约在第 288 行：

```
s = HTTPServer.new(
  :Port            => options['server_port'],
  :MimeTypes       => mime_types
) 
```

这里`HTTPServer`是`WEBrick::HTTPServer`。jekyll 无需指定`:BindAddress`配置即可创建服务器。并且绑定地址设置`nil`为默认值。

WEBrick 将调用`Socket.getaddrinfo`从指定的绑定地址中获取真实地址，当传入`nil`地址时，会返回 IPv4('0.0.0.0') 和 IPv6('::') 的通配符地址。之后，WEBrick 调用`TCPServer.new(address, port)`创建 TCPServer。这就是`TCPServer Error`出现的地方。

有关更多详细信息，请阅读[`WEBrick::Utils.create_listeners`](https://github.com/nahi/webrick/blob/master/lib/webrick/utils.rb#L71)

# java - 可以生成Java代码的免费Regex工具？

> ID：15618962
> 
> 赞同：0
> 
> 时间：2013-03-25T15:42:11.300
> 
> 标签：java, regex, regexbuddy

虽然在测试正则表达式时，Regex Buddy 有免费的替代品，但在 Java 代码生成方面有什么替代品吗？

感谢您的任何提示:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:56:07.830

您可以使用 notepad++ 正则表达式助手插件。这真的很好，您可以立即测试您的正则表达式。

# android - 如何停止和恢复我实现的 ApplicationListener 类？

> ID：15618964
> 
> 赞同：0
> 
> 时间：2013-03-25T15:42:21.533
> 
> 标签：android, rendering, libgdx, live-wallpaper

我有类 WallpaperAndDream 实现 ApplicationListener。全部由 ligdx（动态壁纸和白日梦）实现。下面是创建和渲染的方法：

```
public void create() {
    camera = new OrthographicCamera(width, height);
    camera.position.set(width / 2, height / 2, 0);
    bg.setFilter(TextureFilter.Linear, TextureFilter.Linear);

    batch = new SpriteBatch();
    Gdx.graphics.setContinuousRendering(false);
}

public void render() {
    GL10 gl = Gdx.graphics.getGL10();

    gl.glClearColor(bg_red, bg_green, bg_blue, 1f);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    camera = new OrthographicCamera(width, height);
    camera.position.set(width / 2, height / 2, 0);
    camera.update();
    camera.apply(Gdx.gl10);
    batch.setProjectionMatrix(camera.combined);

    batch.begin();
    BitmapFont font;
    font = new BitmapFont();
    font.setScale(3.0f);
    font.setColor(Color.RED);

    font.draw(batch, BouncerDaydream.maxLight+" "+BouncerDaydream.thisLight, 100, 100);

    batch.end();
    try {
        Thread.sleep(update_interval);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Gdx.graphics.requestRendering();
} 
```

当我在动态壁纸之后有白日梦时，它会交替绘制，但我需要在这段时间内暂停（或停止）白日梦并在它可见时恢复它，我该怎么做？提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T14:09:01.333

我不确定我是否理解您的问题，但要创建动态壁纸，您应该扩展 AndroidLiveWallpaperService，而对于 Daydreams，应该扩展 AndroidDaydream。

此页面上有更多信息：[https ://github.com/libgdx/libgdx/wiki/Starter-classes-&-configuration](https://github.com/libgdx/libgdx/wiki/Starter-classes-&-configuration)

# java - 尝试从文件中读取整数并将它们复制到数组中时，为什么会出现此错误？

> ID：15618971
> 
> 赞同：-4
> 
> 时间：2013-03-25T15:42:42.477
> 
> 标签：java, arrays

我有一个名为“hours.txt”的文本文件，其中包含我想读取的整数行并将它们复制到数组中。

整数是 8 名员工每周工作的小时数。所以我创建了一个二维数组，其中行是员工，列是星期几。

```
public static void read()
{

    Scanner read = new Scanner(new File("hours.txt"));
    int[][] hours = new int[8][7];

    for(int r=0; r<hours.length; r++)
    {
        for(int c=0; c<hours[0].length; c++)
        {
            while(read.hasNextInt())
            {
                hours[r][c]= read.nextInt();
            }
        }
    }

} 
```

当我尝试编译它时，我收到以下错误：

> EmployeeHours.java:16：错误：未报告的异常 FileNotFoundException；必须被抓住或宣布被扔掉

这是为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T15:43:44.160

因为`FileNotFoundException`是检查异常。您必须要么[`catch` **处理它**](http://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)，要么`throws`在方法声明中处理它。不要只是吞下例外；这几乎不是“处理”它们的正确方法。

更多关于这个主题的阅读可以[在官方 Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:46:47.223

```
try {
   //block of code 
} catch (FileNotFoundException fnfe) { 
} 
```

或者

```
public static void read() throws FileNotFoundException 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:44:31.763

必须将异常`FileNotFoundException`声明为方法签名的一部分，以告诉 Java 编译器您的方法可以抛出该特定异常。您必须将方法定义更改为：

```
public static void read() throws FileNotFoundException
{
    ... code here ...
} 
```

# vb.net - SevenZipSharp - 即时写入流？

> ID：15618974
> 
> 赞同：1
> 
> 时间：2013-03-25T15:42:50.007
> 
> 标签：vb.net, sevenzipsharp

是否可以将 SevenZipSharp 的提取输出即时写入文件而不是写入内存然后写入文件？

我写入流而不是直接写入文件的原因是检查特定位置的字节（以确定正在提取的文件的版本）我想尽快获得这个值，而不是在文件被提取。

示例代码有效，但速度极慢，我无法找到在事件中写入流的方法。将 ms 调暗为新的 MemoryStream

```
Private Sub Test()

    Using tmp = New SevenZipExtractor(FILENAME)

        AddHandler tmp.Extracting, AddressOf SevenZip_Extracting
        AddHandler tmp.ExtractionFinished, AddressOf SevenZip_ExtractionFinished
        tmp.ExtractFile(0, ms)

    End Using

End Sub

Private Sub SevenZip_Extracting(ByVal sender As Object, ByVal e As ProgressEventArgs)

   ' Read Bytes at position 3756  (b * 256 + a)
    If e.PercentDone = 1 Then
       Dim br As BinaryReader = New BinaryReader(ms)
       Dim lngStartPos As Long = 3756
       br.BaseStream.Seek(lngStartPos, SeekOrigin.Begin)
       Dim a As Byte = br.ReadByte()
       Dim b As Byte = br.ReadByte()
       Console.WriteLine(b * 256 + a)
    End If

    Using fs As FileStream = File.OpenWrite("C:\Temp\output.tmp")
        ms.WriteTo(fs)
    End Using

End Sub 
```

# python - 尝试对熊猫使用替换方法

> ID：15618976
> 
> 赞同：3
> 
> 时间：2013-03-25T15:42:57.233
> 
> 标签：python, replace, pandas

我正在尝试用熊猫做一个简单的替换：

```
from pandas import *
In [2]: df = DataFrame({1: [2,3,4], 2: [3,4,5]})

In [4]: df[2]
Out[4]:
0    3
1    4
2    5
Name: 2

In [5]: df[2].replace(4, 17)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
c:\Python27\<ipython-input-5-b4adce9e9b15> in <module>()
----> 1 df[2].replace(4, 17)

AttributeError: 'Series' object has no attribute 'replace' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:05:43.313

该[`replace`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.replace.html)方法是在 0.9.0 版中添加的（请参阅[发行说明](http://pandas.pydata.org/pandas-docs/version/0.9.0/whatsnew.html#other-new-features)）。

*[注意：您可以通过在网页右侧选择](http://pandas.pydata.org/)**特定版本**的 pandas 来检查文档。但请考虑更新到最新的稳定版本。*

# ruby - 设置键和查找通过相等测试时，哈希查找失败

> ID：15618977
> 
> 赞同：0
> 
> 时间：2013-03-25T15:43:05.130
> 
> 标签：ruby, hash

我无法在新代码中重现此问题，但它看起来非常一致。

给定以下数据：

```
[47] pry> t
=> [Fri, 01 Mar 2013 00:00:00 +0000, Sun, 24 Mar 2013 23:59:59 +0000]
[48] pry> time_range
=> [Fri, 01 Mar 2013 00:00:00 +0000, Sun, 24 Mar 2013 23:59:59 +0000]
[49] pry> t == time_range
=> true
[52] pry> hsh
=> {[Fri, 01 Mar 2013 00:00:00 +0000, Sun, 24 Mar 2013 23:59:59 +0000]=> {},
 [Fri, 01 Feb 2013 00:00:00 +0000, Thu, 28 Feb 2013 23:59:59 +0000]=> {},
 [Tue, 01 Jan 2013 00:00:00 +0000, Thu, 31 Jan 2013 23:59:59 +0000]=> {}} 
```

这是我在查找时遇到的问题：

```
[53] pry> hsh[t]
=> {}
[54] pry> hsh[time_range]
=> nil
[55] pry> hsh.assoc(time_range)
=> [[Fri, 01 Mar 2013 00:00:00 +0000, Sun, 24 Mar 2013 23:59:59 +0000],
 {}] 
```

两个时间数组（`t`和`time_range`）通过了相等性测试`==`，但仅在一种情况下（time_range）未能查找值。我曾尝试查看哈希代码（[http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-5B-5D](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-5B-5D)），但仍然很难过。

根据“ [Ruby 的 Hash 在比较键时使用哪个相等性测试？](https://stackoverflow.com/questions/11247000/which-equality-test-does-rubys-hash-use-when-comparing-keys) ”，hash 用于`eql?`确定键相等，但两个有问题的键通过`eql?`：

```
[63] pry> t.eql? time_range
=> true
[64] pry> time_range.eql? t
=> true 
```

任何人都可以提供见解吗？现在我要重新编写代码以利用 assoc 匹配，但我不喜欢做这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:55:22.030

基于这些链接，两个对象的哈希是否相同？

我们在多线程 JRuby 环境中遇到了问题，其中两个单独的运行时中的键满足 == 但由于底层键的不同 object_ids 而无法检索键。这可能是一类类似的问题——满足 A.eql 的两个对象 A 和 B？B 但不满足 A 是 B

# c# - EXE 只是一个带有 main 方法的 DLL 吗？

> ID：15618978
> 
> 赞同：-1
> 
> 时间：2013-03-25T15:43:06.790
> 
> 标签：c#

我偶然发现了一个关于程序集、DLL 和 EXE 文件之间的确切区别的问题。

以下陈述是否正确？

> 如果一个 DLL 有一个 main 方法，那么它会变成一个可执行文件吗？（EXE文件）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T16:04:52.793

> 以下陈述是否正确：如果一个 DLL 有一个 main 方法，那么它就成为一个可执行文件？

这种说法是不正确的。

DLL 和 EXE 文件都使用 PE 文件格式。DLL 和 EXE 之间的区别在于 DLL 在 IMAGE_FILE_HEADER 部分的特性字段中设置了标志 0x2000。

更多详情可在这找到：

[*窥视 PE：Win32 便携式可执行文件格式之旅 作者：* Matt Pietrek](http://msdn.microsoft.com/en-us/library/ms809762.aspx)

# prolog - Prolog 程序的声明式解释，说明列表 S 是否是另一个列表 L 的子列表

> ID：15618980
> 
> 赞同：1
> 
> 时间：2013-03-25T15:43:09.257
> 
> 标签：prolog, declarative

我是 Prolog 的新手，我正在为大学考试学习它，我们使用 SWI Prolog

我有一些问题要理解这个简单的程序如何工作，如果列表 S 是列表 L 的子列表，则说 TRUE **，**否则说谓词是 FALSE。

我有以下解决方案，但我有一些问题要理解它的声明性含义

读这本书，我想我有一些想法，但我不确定......

这是使用连接的解决方案：

```
sublist(S,L) :- conc(L1, L2, L),
            conc(S, L3, L2).

conc([],L,L).

conc([X|L1],L2,[X|L3]) :- conc(L1,L2,L3). 
```

如果第三个列表是第一个和第二个列表的串联，则此解决方案使用另一个响应 TRUE 的小程序。

要说 L 的 S i 子列表是否必须为 TRUE，以下两个条件：

1.  L 必须是一个列表，它是 L1 和 L2 的串联
2.  L2 必须是一个列表，它是**S**（我的子列表，如果存在于 L 列表中）和另一个列表 L3的串联

这是书的解释，但对我来说只是有点晦涩...

我试图对此进行推理并尝试理解真正深刻的含义......

所以我认为，在某种程度上，它就像使用这个其他程序来搜索一个元素是否是列表的成员：

```
member2(X, [X|_]).

member2(X,[_|T]):- member2(X,T). 
```

在这个程序中，我只是说如果 X 是列表顶部的元素（它的头部），那么 X 在列表中并且程序响应为真。否则，如果 X 元素不在列表的顶部（或者它不是我的解决方案），我会尝试在此列表的 TAIL T 中搜索它。

回到子列表程序我认为推理是相似的

**首先，我将 L 列表分解为两个列表 L1 和 L2**（使用 conc 程序）**

**然后我检查 S 和 L3 的串联是否是 L2 列表。**

如果展位这些条件为真，则 S 是 L 的子列表

我认为 L1 列表与我从成员程序中的列表中提取的 X 元素具有相似的作用。

由于子列表 S 可以从列表 L 的开头开始，因此 L1 可以是 [] 并且我可以在 L1=[] 和 L2 的串联中分解 L，并且我可以尝试在 S 和 L3 中分解 L2。

如果我能做最后的分解，那么程序结束，我可以说 S 是原始列表 L 的子列表是真的

如果**conc(S, L3, L2)**不正确，则 ddo 回溯并采用另一个计算分支

我的声明式解释是否正确？

我在这个例子中发现了很大的困难，我也试图找到一个程序解释（使用 Prolog shell 中的操作跟踪）但我有很大的问题，因为计算量对于一个简短的列表来说也是如此之大......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:27:30.947

本书的解释更具说明性，因为它没有调用 Prolog 的搜索机制。我可能会用更多的下划线来写这个：

```
sublist(S, L) :- append(_, Suffix, L), append(S, _, Suffix). 
```

这至少让 S 和 L2（改名为 Suffix）的关系更加清晰了一些。我们想说的是，这很难用声明性英语表达清楚，**如果 L 的后缀名为 Suffix 并且 S 是 Suffix 的前缀，**则 S 是 L 的子列表。命名其他成分只会增加混乱。Prolog 将在内部命名这些变量并与它们统一一些东西，因为它试图统一其他所有东西，但它不会与调用者共享该信息。尽管这些变量在某种意义上需要存在，但它们与您的公式没有密切关系，或者它们不会是单例。每当您收到单例变量警告时，请将变量替换为下划线。它将增加清晰度。

碰巧因为涉及的前缀和后缀可以是空列表，所以 S 可以是 L 的适当前缀或 L 的适当后缀，一切都会好起来的。

的声明性阅读`member/2`，作为参考，**如果 X 是列表的头部或 X 是列表尾部的成员，则 X 是列表的成员**。仔细注意缺少的内容：提到检查、成功或失败，或者实际上是任何操作顺序。**如果X 是尾部的成员或头部的成员，**则同样可以说X 是列表的成员。让计算机执行计算必须按照一定的顺序完成，这只是生活中不可避免的事实，所以你必须以正确的顺序告诉 Prolog 事情，否则它将进入无限循环，但这不是逻辑，只是 Prolog。

正如我们已经多次讨论过的，当您调用 Prolog 的机制时，您不再处于声明式阅读中。因此，当您说“首先我分解...”时，您已经离开了声明性世界并进入了程序性世界。声明性世界没有步骤，即使 Prolog 必须按照特定顺序执行操作才能在现实生活中的计算机上执行计算。同样，在声明式阅读中，您不会*检查*事物，它们只是存在或不存在。*backtrack*这个词也不能作为陈述性阅读的一部分出现。你应该在陈述性阅读中使用的唯一“动词”是“存在”动词“是”。

也就是说，您的 Prolog/程序读数是完全正确的。

# utf-8 - 使用来自 JDBC 的韩语字符连接到 IBM DB2

> ID：15618981
> 
> 赞同：0
> 
> 时间：2013-03-25T15:43:09.713
> 
> 标签：utf-8, db2

我安装了带有代码集 UTF-8 和代码页 1208 的 IBM DB2 10.1 Express 版本。我能够创建带有韩文字符的表和列。

但是当我创建一个韩国用户并尝试使用它登录时，它给了我一个错误“无法将 unicode 字符串转换为 ebcdic 格式”。我尝试使用 db2jcc 和 db2jcc4.jar，也尝试使用 DB2 CLP。

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:20:13.953

DB2[仅支持授权名称中的单字节字符](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0001029.html)。如果您在 ID 中使用的字符是多字节字符，那么我相信 DB2 将无法对其进行身份验证。

# spring - Spring-Wicket：带有资源的 Bean 注入

> ID：15618987
> 
> 赞同：1
> 
> 时间：2013-03-25T15:43:13.493
> 
> 标签：spring, dependency-injection, wicket, wicket-1.6

我正在为我的 wicket 应用程序编写测试，并且需要将 Spring Bean 注入页面（通过注释完成）来执行此操作。考虑以下代码：

```
protected void setUp() {
  tester = new WicketTester();
  scanService = new ScanService();

  ApplicationContextMock appctx=new ApplicationContextMock();
  appctx.putBean("pxGenericService", new PxGenericServiceImpl());

  tester.getApplication().getComponentInstantiationListeners().add(new SpringComponentInjector(tester.getApplication(), appctx));
} 
```

这实际上似乎有效（没有空指针）。问题是：bean 有一个资源（带有@Resource 注释的变量），当我在页面上运行测试时，这个资源结果为空（nullpointer 异常）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:48:16.797

您还必须将 bean 具有的所有依赖项的实例添加到模拟应用程序上下文中。因此，将使用的类的实例添加`PxGenericServiceImpl`到`appctx`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:04:00.570

我认为不`SpringComponentInjector`支持`@Resource`. 唯一受支持的注释是`@SpringBean`和`@Inject`。见`AnnotProxyFieldValueFactory`：

```
@Override
public boolean supportsField(final Field field)
{
    return field.isAnnotationPresent(SpringBean.class) || field.isAnnotationPresent(Inject.class);
} 
```

# image - 带有通用图像加载器的 Gridview 图像加载缓慢

> ID：15618989
> 
> 赞同：0
> 
> 时间：2013-03-25T15:43:17.413
> 
> 标签：image, gridview, loader, universal, auto-populating

我正在使用通用图像加载器将缩略图从资产画廊填充到gridview中，但是图像在向上或向下滚动期间加载缓慢，所以我认为因为图像正在以其当前分辨率加载所以我如何更改图像的分辨率例如我用于`createScaledBitmap`缩小位图这是我的代码：

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;
private List<String> mList;
private int mheight;
private int mwidth;
private InputStream is;
private HomePage homePage;
private ImageLoader imageLoader;

public ImageAdapter(Context context, List<String> list, int height, int width) {
    mContext = context;
    mList = list;
    mheight = height;
    mwidth = width;
    ImageLoader imageLoader = ImageLoader.getInstance();
    this.imageLoader = imageLoader;

}

@Override
public int getCount() {
    return mList.size();
}

@Override
public Object getItem(int position) {
    return mList.get(position).toString();
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {
        imageView = new ImageView(mContext);
    } else {
        imageView = (ImageView) convertView;
    }

    File cacheDir = new File(Environment.getExternalStorageDirectory(),    "UniversalImageLoader/Cache");
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(mContext)
   .threadPoolSize(5)
   .memoryCacheExtraOptions(mwidth/3, mwidth/3)
   .threadPriority(Thread.MIN_PRIORITY )
    .memoryCache(new UsingFreqLimitedMemoryCache(5000000)) // You can pass your own memory cache implementation
    .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
    .build();

    imageLoader.init(config);
 //
 //
    //display options
    DisplayImageOptions options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.loading)
    .showImageForEmptyUri(R.drawable.loading)
    .cacheInMemory()
    .cacheOnDisc() 
    .bitmapConfig(Bitmap.Config.RGB_565)
    .imageScaleType(ImageScaleType.EXACTLY)
    .build();

//        // Create configuration for ImageLoader

    String imString = mList.get(position);
    String imageUria = "assets://"+imString;

   imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
   imageView.setLayoutParams(new GridView.LayoutParams(mwidth/3, mwidth/3));
   imageLoader.displayImage(imageUria, imageView ,options );
     return imageView ; 
```

} }

# mysql - 轮转系统的数据库模型

> ID：15618996
> 
> 赞同：0
> 
> 时间：2013-03-25T15:43:39.497
> 
> 标签：mysql, sql, database, database-design

正在努力为我正在组装的一个相当简单的应用程序正确建模数据库。App只是我用来学习一些框架的一个简单的东西。每周，办公室里的人都必须轮流送啤酒。这是轮流完成的，我们按照特定的顺序轮流进行。偶尔有人不在，他们跳过轮到他们，但必须在接下来的一周（或者实际上他们可以在接下来的第一周）参加。显然，我们也有员工来和员工离开，所以需要考虑到这一点。最初，我根据饮酒者和回合对此进行建模。每次有人买了一个回合，他们就会进入圆桌，谁是第一个回合最少的人下一个。

这是我目前拥有的：

```
CREATE TABLE `rounds` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `drinker_id` int(11) NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`id`)
) 

CREATE TABLE `drinkers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) 
```

有什么想法可以重新建模，让人们来来去去，人们可以跳过他们的轮次吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:14:52.260

你只需要一张桌子

```
CREATE TABLE `drinkers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `is_available` TINYINT(1) NOT NULL DEFAULT 0,
  `last_buy` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`id`),
  INDEX(`last_buy`)
) 
```

你可以得到需要买这种饮料的人

```
SELECT * FROM drinkers
WHERE is_available
ORDER BY last_buy ASC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:03:00.367

我会保留饮酒者（但如果有人生病，请添加一个标志 - 0/1）并像这样放置回合

```
CREATE TABLE `rounds` (
  `drinker_id` int(11) NOT NULL,
  `passed` int(11) NOT NULL,
  `passed_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  UNIQUE KEY (`id`)
) 
```

然后用他的 ID 为每个用户输入一个记录，0 表示通过，0000-00-00 00:00:00 表示通过。当有人购买饮料时，请在“回合”表中标记，通过传递到传递 + 1 并更新日期。如果一些饮酒者离开工作岗位，将他从轮次中移除。如果一个新的来了，将他添加到传递等于最大传递值的回合中（给他们一个新的开始:)）。如果有人生病了，他显然不能买饮料，所以别人应该买。要定义谁应该买饮料，运行这个

```
SELECT r.passed, r.drinker_id
FROM drinkers d
JOIN rounds r ON d.id = r.drinker_id
WHERE d.sick = 0
ORDER BY r.passed DESC, d.id ASC 
```

这将使您以最少的时间购买饮料。

在圆桌会议上，你会有类似的东西

```
drinker id, passed, date_passed
====================================
1           0       0000-00-00
2           1       2013-03-01
3           0       0000-00-00 
```