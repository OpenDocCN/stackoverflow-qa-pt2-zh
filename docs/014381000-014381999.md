# StackOverflow 问答 14381000-14381999

# java - 我应该如何在 jsp/servlet 中注销，因为单击后退按钮后 session.invalidate() 会显示上一页

> ID：14381000
> 
> 赞同：0
> 
> 时间：2013-01-17T14:15:49.257
> 
> 标签：java, jsp, session, servlets

我只是想要帮助我开发了一个 jsp/servlet 项目，我在该项目上创建了名为 LogOut.java @/servlet/Account/LogOut 的注销控制器，代码在这里

```
public static boolean doLogOut(HttpServletRequest request)
{
    boolean Result = false;

    if(request.getSession(false) != null)
    {    
        request.getSession().invalidate();
        Result = true;
    }

    return Result;
} 
```

在servlet中我转发到“/”url所以最常见的问题是注销后如果我在浏览器中按下后退按钮它会显示上一页并且我不想显示它所以我应该在注销之前或之后做什么在小服务程序中

我有一些东西，比如

```
add the following code to all ur .jsp pages :-
<%
response.setHeader("cache-control","no-cache");
response.setHeader("Pragma","no-cache");
response.setDateHeader("Expires",0);
%>
This thing is working for me even with the Back Button 
```

可以吗？我的意思是，如果我不使用监听器，我必须在所有页面中都这样做，或者可以做一些事情......????????????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:24:06.463

要禁用浏览器缓存 JSP 页面，请创建一个映射到 *.jsp 的 url 模式的过滤器

```
HttpServletResponse httpResponse = (HttpServletResponse) response;
httpResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
httpResponse.setHeader("Pragma", "no-cache"); 
httpResponse.setDateHeader("Expires", 0); 
```

# visual-studio-2010 - Silverlight 内容文件未添加到 XAP 文件中

> ID：14381001
> 
> 赞同：0
> 
> 时间：2013-01-17T14:15:59.650
> 
> 标签：visual-studio-2010, visual-studio, silverlight, deployment, xap

我正在开发一个大型解决方案中的 Silverlight 库项目。我在我的项目中添加了一个 XML 文件，并将它的 Build Action 设置为 Content。据我所知，这应该在 XAP 文件中部署 XML。但是当我在 ClientBin 中打开 XAP 时，它就不见了。我已经尝试了几次，我已经清理了解决方案，我已经停止了 VS 开发服务器并再次运行它。没有任何工作。

我注意到，如果我将 Build Action 设置为 Resource，文件实际上会附加到 dll（dll 文件的大小会增加），但 Content 的东西不起作用。

我正在使用 VS 2010 和 Silverlight 4。有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:10:34.063

显然，我已经找到了这种行为的原因。正如我所说，我正在一个大型解决方案中编写一个 dll，该解决方案被其他项目引用。当我构建解决方案时，它会将所有引用的项目打包到主项目的 XAP 中。这就是为什么内容 xml 没有被复制到 XAP 的原因，因为它不是其“父项目”的 XAP，它的父项目只是作为 XAP 中的引用 dll。我只是将所需的 XML 移动到主项目，它修复了所有问题。

无论如何，我认为这是一个 VS 错误。即使项目只是作为 XAP 中的参考，VS 也应该将其资源部署到 XAP。

感谢所有阅读问题并试图提供帮助的人。我希望这对某人有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:12:03.463

当将文件构建操作设置为内容时，您还需要设置属性“复制到输出目录”以复制如果更新或始终复制，默认情况下建立在永远不复制...。

# php - 这个查询有什么问题？psql

> ID：14381003
> 
> 赞同：0
> 
> 时间：2013-01-17T14:16:00.763
> 
> 标签：php, psql

目标：返回给定类型的所有记录，其中不存在相反类型。

问题：当我将 Select Count 用作“AND”时，不返回任何记录

```
SELECT ct.cntrct_id, ar.addr_1, ar.city_nm, ar.st_cd, ar.zip_code, p.phone_nbr, p.frst_nm, p.lst_nm
    FROM addru ad, addrs ar, cntrt ct, persn p, custm cm
    WHERE ad.cntrct_seq = ct.cntrct_seq
    AND ar.addr_seq = ad.addr_seq
    AND p.person_seq = cm.person_seq
    AND cm.clnt_seq = ct.clnt_seq
    AND ad.active_flg = '1'
    AND ad.dist_id = $dist
    AND substring(ct.cntrct_id from 2 for 1) = '$type'
    AND ((SELECT COUNT(*)
            FROM addru ad, addrs ar, cntrt ct, persn p, custm cm
            WHERE ad.cntrct_seq = ct.cntrct_seq
            AND ar.addr_seq = ad.addr_seq
            AND p.person_seq = cm.person_seq
            AND cm.clnt_seq = ct.clnt_seq
            AND ad.active_flg = '1'
            AND ad.dist_id = $dist
            AND substring(ct.cntrct_id from 2 for 1) != '$type') = 0)
    ORDER BY ct.cntrct_id" 
```

复制表定义会占用大量空间，因此如果您需要查看它们，请告诉我哪些（不想因为太多信息而陷入困境）我认为我的错误是合乎逻辑的来自对如何形成sql查询的误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:33:09.633

除非我错过了什么，你为什么不能做

```
SELECT ...
FROM ...
WHERE ...
GROUP BY ...
ORDER BY ...
HAVING COUNT(*) = 0 
```

这应该比运行两次查询更好，这样您就可以在行级别进行“内联”计数过滤。

# android - Android 是否使用 NTP 同步时间？

> ID：14381005
> 
> 赞同：67
> 
> 时间：2013-01-17T14:16:17.260
> 
> 标签：android, time, gps, ntp

Android 设备是否使用网络时间协议 (NTP) 来同步时间？

在我的设备设置中，我看到一个带有以下文本的复选框“与网络同步”，但我不知道他们是否使用 NTP。

我需要这个用于我使用 GPS 的学士论文。为了获得准确的 GPS 信号，接收器应该有一个准确的时钟。

我在网上找到了这个博客条目，但我不确定他是否说实话：[加速 NTP，Android 中的 GPS 锁定](http://kousik.blogspot.de/2012/02/speeding-up-ntp-gps-lock-in-android.html)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-25T13:55:27.443

我知道 Android ICS 使用了一个名为： 的自定义服务[`NetworkTimeUpdateService`](https://android.googlesource.com/platform/frameworks/base.git/+/android-4.2.2_r1/services/java/com/android/server/NetworkTimeUpdateService.java)。该服务还通过[`NtpTrustedTime`](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/util/NtpTrustedTime.java)单例实现 NTP 时间同步。

在`NtpTrustedTime`默认的 NTP 服务器中是从 Android 系统字符串源请求的：

```
final Resources res = context.getResources();

final String defaultServer = res.getString(
                                com.android.internal.R.string.config_ntpServer); 
```

如果系统设置中的自动时间同步选项被选中并且没有 NITZ 时间服务可用，则时间将与 NTP 服务器同步`com.android.internal.R.string.config_ntpServer`。

要获取您的值，`com.android.internal.R.string.config_ntpServer`可以使用以下方法：

```
 final Resources res = this.getResources();
    final int id = Resources.getSystem().getIdentifier(
                       "config_ntpServer", "string","android");
    final String defaultServer = res.getString(id); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-17T14:22:56.170

> 我想问一下Android设备是否使用网络时间协议（ntp）来同步时间。

对于一般时间同步，无线提供商提供[NITZ 信息](http://en.wikipedia.org/wiki/NITZ)的具有电话功能的设备将使用 NITZ。我的理解是 NTP 用于其他情况：无 NITZ 的无线提供商、仅限 WiFi 等。

您引用的博客文章暗示了另一种情况：支持 GPS 的按需时间同步。这当然是可以想象的，虽然不知道有没有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-29T17:15:49.447

我有一个带有 Android 4.1.1 的三星 Galaxy Tab 2 7.0。显然它不会同步到 ntp。我加载了一个应用程序，说我的平板电脑离 ntp 有 20 秒的时间，但除非我根设备，否则它无法设置它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-29T14:56:29.763

不是您问题的确切答案，而是一些信息：如果您的设备*确实*使用 NTP 时间（例如，如果它是没有 3G 或 GPS 功能的平板电脑），则可以配置服务器`/system/etc/gps.conf`- 显然这个文件只能可以使用 root 访问权限进行编辑，但可以在非 root 设备上查看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-06T14:46:26.053

`NTP_SERVER`您可以使用全局变量、属性覆盖 ntp `ro.NTP_SERVER`，或者创建一个名为的文件`ntp.conf`，`/etc`如下所述：
[https ://developers.google.com/time/guides#linux_ntpd_or_chrony](https://developers.google.com/time/guides#linux_ntpd_or_chrony)

Linux 指令适用于 Android。

您始终可以通过代理将来自设备的流量重定向到在同一网络上的另一台计算机上运行的 burp 数据包侦听器，以轻松检查所有流量。无论 NTP 设置如何，您设备中的 SIM 卡都会同步，默认情况下，您的路由器也可以充当网络的 NTP 服务器。

# .htaccess - 多语言网站的 SEO

> ID：14381006
> 
> 赞同：3
> 
> 时间：2013-01-17T14:16:27.970
> 
> 标签：.htaccess, url-rewriting, seo

我有这个网站，我想重写 URL：

> mydomain.com/referinte?lang=en
> 
> mydomain.com/referinte?lang=ro

有没有可能，所以我可以使用 .htaccess 来修改网址，如下所示：

> mydomain.com/en/references
> 
> mydomain.com/ro/referinte

我当前的 .htaccess 是：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:32:45.783

Based on the your input, I would suggest using URL rewriting configuration as follows:

```
RewriteEngine  on
RewriteRule    ^([a-zA-Z-_]+)$  $1.php?lang=en  [R]
RewriteRule    ^([a-z]+)/([a-zA-Z-_]+)$  $2.php?lang=$1  [R] 
```

The first rule rewrites URLs like `/abc` (with no specified language) to `/abc.php?lang=en` and sets English (`en`) as a default language The second rule rewrites URLs like `/xy/abc` (with specified language) to `/abc.php?lang=xy` (language is taken from the first *part* of the request URL)

Examples:

*   `http://mydomain.com/en/references => http://mydomain.com/references.php?lang=en` (RewriteRule #2)
*   `http://mydomain.com/ro/referinte => http://mydomain.com/referinte.php?lang=ro` (RewriteRule #2)
*   `http://mydomain.com/references => http://mydomain.com/references.php?lang=en` (RewriteRule #1)
*   `http://mydomain.com/referinte => http://mydomain.com/referinte.php?lang=en` (RewriteRule #1)

Please note that the rules will ignore requests for specific `PHP` files i.e. requests as follows: `http://mydomain.com/ro/referinte.php` or `http://mydomain.com/referinte.php` will not be rewritten. Also, server response should be the same for non-existing pages as currently i.e. assuming `/referinte.php` does not exist, the requests as follows: `http://mydomain.com/en/referinte` (new rewriting) and `http://mydomain.com/referinte?lang=en` (current rewriting) I presume would return 404.

I hope that will help.

# javascript - 更改/按下所有输入值 onchange 当前输入值

> ID：14381007
> 
> 赞同：0
> 
> 时间：2013-01-17T14:16:31.827
> 
> 标签：javascript, jquery

我有一个动态表单，其中许多输入具有不同的值，当任何输入发生更改时，我希望下一个值向下移动一个位置，以便更改的值成为下一个值，依此类推。

html

```
<form name="top-download-update-edit">
<input name="v1" type="text" value="value1" />
<input name="v2" type="text" value="value2" />
<input name="v3" type="text" value="value3" />
<input name="v4" type="text" value="value4" />
<input name="v5" type="text" value="value5" />
</form> 
```

说输入 v2 更改为 value6 就像

```
<input name="v2" type="text" value="value6" /> 
```

现在我希望下一个所有值都像这样向下移动一个位置。

```
<input name="v1" type="text" value="value1" />
<input name="v2" type="text" value="value6" />
<input name="v3" type="text" value="value2" />
<input name="v4" type="text" value="value3" />
<input name="v5" type="text" value="value4" /> 
```

我正在尝试这种方式

```
$('#nav').on('change', 'form[name=update] input', function(){
    var input = $(this).val();
    $(this).next('input').val(input);
    //and some thing here to shift all next values one place.
}); 
```

这无济于事。请查看并建议任何可能的方法来做到这一点。

谢谢。

**更新**

我的实际代码。

更新.php

```
<div id="update">

<form name="update" action="update-edit.php" method="post">

  <?php $i=1; while($row = mysqli_fetch_assoc($result)):?>
  <label><?php echo $i.'. ' ?><input name="v<?php echo $i; ?>" type="text" value="<?php  echo $row['title'] ?>" /></label>
  <?php $i++; endwhile;?>

  <input type="submit" value="Submit" id="submit" />
</form>

</div> 
```

jQuery

```
$.post('../update.php',{value:value},function(data){
    $('#center-container').html(data);

    var v1 = $('input[name=v1]').val();
    var v2 = $('input[name=v2]').val();
    var v3 = $('input[name=v3]').val();
    var v4 = $('input[name=v4]').val();
    var v5 = $('input[name=v5]').val();
    var v6 = $('input[name=v6]').val();

    $("form[name=update]").data("values", {"v1": v1, "v2": v1, "v3": v3, "v4": v4, "v5": v5, "v6": v6});

    $('form[name=update] input').change(function(){
        var form = $(this).parent().parent();
        var name = $(this).attr('name');
        form.find('input').each(function() {
            var thisName = $(this).attr('name');
            var prevName = $(this).parent().prev('label').children('input').attr('name');
            if($(this).attr('name') > name){
                $(this).val(form.data('values')[prevName]);
            }
        });
        form.find('input').each(function() {
            form.data('values')[$(this).attr('name')] = $(this).val();
        });
    });     

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:07:39.037

好的，我会做这样的事情：因为在`.change()`函数中您无法知道 的先前值，所以`input`您需要将当前值存储在某处以转移所有内容。您可以使用该`.data()`功能。

```
$("form[name=update]").data("values", {"v1": "value1", "v2": "value2", "v3": "value3", "v4": "value4", "v5": "value5"});
$("form[name=update] input").change(function(){
    var form = $(this).parent();
    var name = $(this).attr("name");
    form.find("[name="+name+"] ~ input").each(function() {
        var thisName = $(this).attr("name");
        var prevName = $(this).prev("input").attr("name");
        $(this).val(form.data("values")[prevName]);
    });
    form.find("input").each(function() {
        form.data("values")[$(this).attr("name")] = $(this).val();
    });
}); 
```

这基本上意味着每次更改输入值时，您都会找到所有下一个输入“兄弟”（即`~`css 选择器）并将它们的值替换为您存储的旧值。在此之后，当然，您更新存储的数据。顺便说一句，使用`id`s 而不是 name 属性来识别您的元素可能会更容易。

你可以[在这里找到一个工作小提琴](http://jsfiddle.net/Jy6tt/)。

# scala - 如何在Scala中输出数组

> ID：14381010
> 
> 赞同：0
> 
> 时间：2013-01-17T14:16:48.583
> 
> 标签：scala

我正在尝试实现[Scala for Java](http://blog.scala4java.com/2011/12/matrix-multiplication-in-scala-single.html "用于 Java 的 Scala")中提供的矩阵乘法，但我无法显示数组。

例如，在尝试时，

```
println(singleThreadedMultiplication2(Seq(Array(1, 2),
                                          Array(2, 3)),
                                          Array(Array(11, 8),
                                                Array(2, 6)))) 
```

它会显示`[[I@2c79a2e7`。如何显示数组的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:19:17.360

给定 Array foo 你可以这样做：

```
println(foo.mkString(",")) 
```

*为什么*会这样：数组，不像 Seq 或大多数其他类不重载 .toString 方法，所以Object.toString[将](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString%28%29)被使用。

编辑：

看起来在您的代码中（这取决于 singleThreadedMultiplication2 结果的类型）您必须编写：

```
val result = singleThreadedMultiplication2(
                     Seq(Array(1, 2), Array(2, 3)), 
                     Array(Array(11, 8), Array(2, 6))
             )

println(result
          .map(_.mkString("[",",","]")) // making every inner array readable
          .mkString(",")                // now making outer array
       ) 
```

正确输出结果。

# asp.net - asp:RegularExpressionValidator

> ID：14381011
> 
> 赞同：-2
> 
> 时间：2013-01-17T14:16:49.510
> 
> 标签：asp.net, html, validation, requiredfieldvalidator

因此，用户单击“添加数据”超链接，将他们带到一个新页面，他们必须在 3 个文本框中输入文本，然后单击按钮。单击按钮时（如果其中一个文本框为空，则会显示错误消息）

我试过了

```
 <td>
                <asp:TextBox ID="TextBox1" runat="server" MaxLength="20" />
                <asp:RegularExpressionValidator ID="ValidationTextBox1" runat="server" ControlToValidate="TextBox1" ErrorMessage="Please enter" />
             </td> 
```

但是当我测试这个时，没有将数据清空到文本框中并单击按钮我没有收到错误？？请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:22:23.010

虽然很难理解这个问题，但我认为我知道这个问题。

> 当我对此进行测试时，将没有数据清空到文本框中并单击按钮我没有收到错误

`TextBox`所以当为空时验证器不会触发？

`RequiredFieldValidator`如果要验证空文本，请使用附加。

> RegularExpressionValidator 不对空字符串执行验证。要测试空字符串，请同时使用RequiredFieldValidator 和RegularExpressionValidator 控件。

[`RegularExpressionValidator.ValidationExpression`财产](http://msdn.microsoft.com/en-us/library/system.web.ui.mobilecontrols.regularexpressionvalidator.validationexpression.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:23:03.907

用户必填字段验证器控件，而不是正则表达式控件。

```
 <asp:TextBox id="Text1" 
      Text="Enter a value" 
      runat="server"/>

 <asp:RequiredFieldValidator id="RequiredFieldValidator1"  
      ControlToValidate="Text1"
      Text="Required Field!" 
      runat="server"/> 
```

[MSDN](http://msdn.microsoft.com/en-us/library/5hbw267h%28v=vs.80%29.aspx)

# windows-phone-7 - 广告未在已发布的应用中展示

> ID：14381012
> 
> 赞同：0
> 
> 时间：2013-01-17T14:16:53.323
> 
> 标签：windows-phone-7, ads

我的应用程序在 Windows Phone 商店中发布，但它没有收到任何广告。我使用了一个硬编码的 AdControl，如下所示：

```
<UI:AdControl Name="adControl1"
                          Grid.Row="2"
                          Width="480"
                          Height="80"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          ApplicationId="-----"
                          AdUnitId="-----"
                          IsAutoRefreshEnabled="True" 
                          /> 
```

我使用开发中心创建了所需的广告单元（如此[处](http://msdn.microsoft.com/library/windowsphone/help/jj206730%28v=vs.105%29.aspx)所述）。我还在 WMAppManifest.xml 中声明了这些功能：

```
<Capabilities>
  <Capability Name="ID_CAP_PHONEDIALER" />
  <Capability Name="ID_CAP_MEDIALIB" />
  <Capability Name="ID_CAP_IDENTITY_USER" />
  <Capability Name="ID_CAP_NETWORKING" />
  <Capability Name="ID_CAP_SENSORS" />
  <Capability Name="ID_CAP_WEBBROWSERCOMPONENT" />
</Capabilities> 
```

我从 Windows Phone Store 下载了我自己的应用程序，当我启动该应用程序时得到的是一个带有细长白色边框的矩形，位于为 adUnit 保留的空间中，2 或 3 秒后它消失了，没有任何反应。

如果这有帮助，我的应用程序已于 2 天前发布。

有没有其他人有同样的问题？我很绝望:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T13:28:46.250

最后，订阅了AdControl的error事件后，发现相关的报错信息是“没有可用的广告”。

将手机的区域格式更改为“英语（美国）”并重新启动设备后，广告按预期显示。

# backbone.js - 主干扩展和调用函数

> ID：14381013
> 
> 赞同：1
> 
> 时间：2013-01-17T14:16:53.447
> 
> 标签：backbone.js

我想我误解了一些范围界定问题。我正在运行 TODO 主干应用程序并在“new app.AppView();”之后

我正在尝试这个：app.AppView.render()

以及我认为正在扩展的其他功能，但它们似乎不可用。

第二个问题是..为什么chrome开发者工具在TODORouter和Todos旁边说“child”

编辑待办事项链接 [TODO](http://addyosmani.github.com/todomvc/architecture-examples/backbone/)

这是我主要参考的代码

```
$(function() {

    // Kick things off by creating the **App**.
    new app.AppView();

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:42:29.007

将新的 appview 保存在 var 中，然后从那里使用它。

```
var myAppView = new app.AppView();
// ...
myAppView.render(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:20:54.480

You don't have scoping issues, but kind of 'coping with javascript' -issues.

at `app.AppView` is stored a `Function` -object named `AppView`. In javascript functions are used as 'classes' (don't think about Java classes!) in a system called prototype inheritance. Don't get mixed into that yet.

When you call

```
new app.AppView() 
```

you create a new `instance` of this `AppView` 'class', that IS an object. So when you call

```
app.AppView.render() 
```

you're trying to call the function render of the 'class' (or class-but-not-quite-a-class). Now that isn't right one bit.

So (like in Java or any other oo-language), you have to store the instance you get by calling the constructor to a variable.

```
var appView = new app.AppView(); 
```

Now that you have an instance, you can do whatever you like with it

```
appView.render(); 
```

# python - 从大目录访问文件 Dropbox API

> ID：14381019
> 
> 赞同：0
> 
> 时间：2013-01-17T14:17:20.653
> 
> 标签：python, dropbox, dropbox-api

我正在尝试从 Dropbox 中的目录访问文件子集。该目录有超过 25k 个文件（大约 200k 并且还在增长），因此我最初尝试构建文件名列表的尝试`client.metadata`是不可行的。

如何解决这个问题？

我可以从本地副本访问文件名并定期更新该列表。但是，因为这是我实验室中少数人会使用的脚本，所以我希望得到一些不依赖于我的本地 Dropbox 副本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:17:12.043

根据 dropbox api，/metadata api 调用返回的最大文件数量为 25,000。有一种方法可以限制从 api 调用返回的文件数量，但似乎没有办法列出从 X 到 Y 开始的文件条目（比如获取条目 100 到 200，然后是 200 到 300），这似乎是唯一的方法是将这些大量文件分成文件夹

# django - 如果用户没有帐户，如何在十小时后删除数据？

> ID：14381023
> 
> 赞同：2
> 
> 时间：2013-01-17T14:17:45.440
> 
> 标签：django

```
class Data(models.Model):
    user = models.ForeignKey(User, unique=True)
    other = models.CharField(max_length=255)

class Account(models.Model):
    user = models.ForeignKey(User, unique=True)
    number = models.IntegerField() 
```

`Data`如果用户没有添加十小时后如何删除`Account`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:28:39.253

我过去用过这样的东西。我会在模型数据上添加一个“创建”字段：

```
class Data(models.Model):
    user = models.ForeignKey(User, unique=True)
    other = models.CharField(max_length=255)
    created = models.DateTimeField(auto_now_add=True) 
```

我会设置一个[cron-job](http://code.google.com/p/django-cron/)来验证在过去 10 小时内没有用户关联创建的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:31:43.037

您需要添加以下内容：

```
created = models.DateTimeField(auto_now_add=True) 
```

在您的模型数据上，并在 cronjob 创建过去 10 小时时每小时检查一次，如果用户为 None，请删除。

并打电话给他们，比如：

```
delete_time = datetime.datetime.now()-datetime.timedelta(hours=10)
to_delete = Data.objects.filter(created__lt=delete_time, user=None).delete() 
```

:)

# ios - 相同的故事板在 iPhone 4S 和 iPhone 5 上看起来不同

> ID：14381029
> 
> 赞同：0
> 
> 时间：2013-01-17T14:18:09.137
> 
> 标签：ios, retina-display, xcode-storyboard

我正在使用 XCode 4.5.2 和最新的 SDK 开发 iPhone 应用程序。

在项目设置中，我将 5.0 设置为部署目标。

我是 iPhone 5 开发的新手，我不知道如何为 iPhone 4S 和 iPhone 5 使用相同的故事板。

使用带有 Retina 4 外形尺寸的故事板，当我在具有硬件 -> 设备 -> iPhone（Retina 3.5 英寸）设置的模拟器上运行我的应用程序时，我得到了这个：

![在此处输入图像描述](../Images/1e52ea8a040535ae1151d272b898f7f4.png)

这就是我得到的（我取消选中使用自动布局）。

**如何让它在 iPhone 4S 上看起来不错？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:33:13.833

如果您使用 iOS 6，则可以使用[AutoLayout](http://developer.apple.com/library/ios/#recipes/xcode_help-interface_builder/articles/AutolayoutEditing.html)。

要在 iOS 5 中支持 Retina 屏幕和普通屏幕，您需要为一种屏幕尺寸设计视图，然后在您的代码中以编程方式检查其屏幕尺寸是否正确

```
CGRect screenBound = [[UIScreen mainScreen] bounds];
CGSize screenSize = screenBound.size;  
CGFloat screenWidth = screenSize.width;
CGFloat screenHeight = screenSize.height; 
```

当屏幕尺寸不正确时，您需要通过代码重新排列 UI 元素。这很糟糕，但没有其他方法可以使用 1 个故事板文件来做到这一点。

另一种可能性是为其他屏幕尺寸创建第二个故事板文件，并在应用程序委托中检查屏幕尺寸以确定您将使用哪个故事板文件。（这也可以用一个 iOS 5 的故事板文件和一个 iOS 6 的故事板文件来完成，这样您就可以在 iOS 6 故事板中启用自动布局以支持所有屏幕尺寸）

# c# - 如何正确获取鼠标下的窗口？

> ID：14381032
> 
> 赞同：4
> 
> 时间：2013-01-17T14:18:11.070
> 
> 标签：c#, .net, wpf

正如我所读到的，在鼠标下获取窗口的方法是使用`WindowFromPoint`，这就是我所做的，但是，它总是会返回我窗口的窗口句柄，如果我将鼠标放在其他窗口上，它总是会返回我的窗口句柄！

这是我的代码：

```
NativeMethods.POINT p;

if (NativeMethods.GetCursorPos(out p))
            {

                IntPtr hWnd = NativeMethods.WindowFromPoint(p);
                NativeMethods.GetWindowModuleFileName(hWnd, fileName, 2000);

string WindowTitle= fileName.ToString().Split('\\')[fileName.ToString().Split('\\').Length - 1];
// WindowTitle will never change, it will get my window only!

            }

////////////////////////////////////////////////////////////////////////////////////////

static class NativeMethods
        {

            [DllImport("user32.dll")]
            public static extern IntPtr WindowFromPoint(POINT Point);

            [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
            public static extern uint GetWindowModuleFileName(IntPtr hwnd,
                StringBuilder lpszFileName, uint cchFileNameMax);

            [DllImport("user32.dll")]
            public static extern bool GetCursorPos(out NativeMethods.POINT lpPoint);

            [StructLayout(LayoutKind.Sequential)]
            public struct POINT
            {
                public int X;
                public int Y;

                public POINT(int x, int y)
                {
                    this.X = x;
                    this.Y = y;
                }

                public static implicit operator System.Drawing.Point(POINT p)
                {
                    return new System.Drawing.Point(p.X, p.Y);
                }

                public static implicit operator POINT(System.Drawing.Point p)
                {
                    return new POINT(p.X, p.Y);
                }
            }

            [StructLayout(LayoutKind.Sequential)]
            public struct RECT
            {
                public int Left;
                public int Top;
                public int Right;
                public int Bottom;
            }
        } 
```

编辑

当我在 WPF 中工作时，这是我在 WPF 中使用调用的尝试：

```
void dispatcherOp_Completed(object sender, EventArgs e)
        {

            System.Threading.Thread thread = new System.Threading.Thread(
                new System.Threading.ThreadStart(
                  delegate()
                  {
                      System.Windows.Threading.DispatcherOperation
                        dispatcherOp = this.Dispatcher.BeginInvoke(
                        System.Windows.Threading.DispatcherPriority.Normal,
                        new Action(
                          delegate()
                          {
                              NativeMethods.POINT p;
                              if (NativeMethods.GetCursorPos(out p))
                              {
                                  IntPtr hWnd = NativeMethods.WindowFromPoint(p);
                                  NativeMethods.GetWindowModuleFileName(hWnd, fileName, 2000);

                                  uint processID = 0;
                                  uint threadID = GetWindowThreadProcessId(hWnd, out processID);
                                  string filename= Process.GetProcessById((int)processID).MainModule.FileName;
                              }

                          }
                      ));
                      dispatcherOp.Completed -= new EventHandler(dispatcherOp_Completed);
                      dispatcherOp.Completed += new EventHandler(dispatcherOp_Completed);
                  }
              ));

            thread.Start();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:42:59.577

`GetWindowModuleFileName`仅限于调用过程，如果您[将](http://support.microsoft.com/?id=228469#appliesto)`HWND`一个属于另一个，它将不起作用。

相反，您可以使用`HWND`& p/invoke`GetWindowThreadProcessId()`来获取进程 ID，然后就可以了`Process.GetProcessById(processId).MainModule.FileName;`。

# ruby - 在 Ruby 1.8 中对 IP 地址进行排序

> ID：14381033
> 
> 赞同：0
> 
> 时间：2013-01-17T14:18:13.700
> 
> 标签：ruby, ip-address

我正在尝试使用 ipaddr 按升序对一些 IP 地址进行排序。不知道为什么这不起作用。运行自定义排序后，顺序不受影响。

```
require 'ipaddr'
ip_array = Array.new
ip_array2 = Array.new

ip_array = ["d1.mysite.com",
            "d3.mysite.com",
            "d2.mysite.com",
            "d6.mysite.com",
            "d32.mysite.com",
            "d5.mysite.com",
            "d9.mysite.com",
            "d34.mysite.com"]

 ## First, get IP addresses and push onto ip_array2
 ip_array.each { |x| ip_array2.push(IPSocket::getaddress(x))  }

 ## Let's see the unsorted array contents
 ip_array2.each { |x| puts x }

 ## Now, sort IP addresses in ip_array2
 ip_array2.sort { |a,b| IPAddr.new( a ) <=> IPAddr.new( b ) } 

 ## Let's see the sorted array contents
 ip_array2.each { |x| puts x } 
```

* * *

```
BEFORE SORT (1st 3 octets are identical) 
```

* * *

```
xxx.xx.xx.78
xxx.xx.xx.114
xxx.xx.xx.54
xxx.xx.xx.57
xxx.xx.xx.58
xxx.xx.xx.79
xxx.xx.xx.81
xxx.xx.xx.100 
```

* * *

```
AFTER SORT (1st 3 octets are identical) 
```

* * *

```
xxx.xx.xx.78
xxx.xx.xx.114
xxx.xx.xx.54
xxx.xx.xx.57
xxx.xx.xx.58
xxx.xx.xx.79
xxx.xx.xx.81
xxx.xx.xx.100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:21:34.747

`sort`不到位。调用`sort!`或将结果从 sort 分配给`ip_array2`.

# emacs - Emacs Org-mode - 动态导出到另一个目录？

> ID：14381034
> 
> 赞同：1
> 
> 时间：2013-01-17T14:18:18.540
> 
> 标签：emacs, org-mode

我在 lisp 中构造了这样的函数：

```
(defun set-web-hosting (hosting)
 """ this function sets the hosting of web to specific tramp like target """
(setq org-publish-project-alist
    '(
      ("belohrad.ch-notes"
       :base-directory "~/SVN/fiweb/"
       :base-extension "org"
   :publishing-directory hosting
       :recursive t
       :publishing-function org-publish-org-to-html
       :headline-levels 999
       :table-of-contents nil
       :section-numbers nil
       :auto-preamble t
       :auto-sitemap t
       :auto-postamble nil
       :style ""
       :sitemap-filename "sitemap.org"
       :sitemap-title "Sitemap"
       :sub-superscript nil
       :author "David Belohrad"
       :email "david@belohrad.ch"
       )
      ("belohrad.ch-static"
       :base-directory "~/SVN/fiweb"
       :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf\\|deb"
   :publishing-directory hosting
       :recursive t
       :publishing-function org-publish-attachment
       )
      ("web" :components ("belohrad.ch-static" "belohrad.ch-notes"))
      ))) 
```

想，我可以用

```
(set-web-hosting "~/afs/www/org/") 
```

将我的目标设置到提到的测试目录，以及

```
(set-web-hosting ".ssh:nlanla@nlsnls.org:/public_html/") 
```

将其设置为生活网。

这不起作用，因为函数中的“托管”不被视为变量，而是“其他东西”。调用发布时，它以

```
org-publish-file: Wrong type argument: arrayp, hosting 
```

如何正确设置`:publishing-directory`属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:46:39.620

使用 lisp 代码、反引号和逗号进行操作有一个特殊的习惯用法：

```
`(a ,b c) 
```

看

```
(describe-function '\`) 
```

你的设置是：

```
(defun set-web-hosting (hosting)
  " this function sets the hosting of web to specific tramp like target "
  (eval `(setq org-publish-project-alist
           '(
         ("belohrad.ch-notes"
          :base-directory "~/SVN/fiweb/"
          :base-extension "org"
          :publishing-directory ,hosting
          :recursive t
          :publishing-function org-publish-org-to-html
          :headline-levels 999
          :table-of-contents nil
          :section-numbers nil
          :auto-preamble t
          :auto-sitemap t
          :auto-postamble nil
          :style ""
          :sitemap-filename "sitemap.org"
          :sitemap-title "Sitemap"
          :sub-superscript nil
          :author "David Belohrad"
          :email "david@belohrad.ch"
          )
         ("belohrad.ch-static"
          :base-directory "~/SVN/fiweb"
          :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf\\|deb"
          :publishing-directory ,hosting
          :recursive t
          :publishing-function org-publish-attachment
          )
         ("web" :components ("belohrad.ch-static" "belohrad.ch-notes"))
         )))) 
```

# mysql - 将数据从多行插入一行mysql

> ID：14381041
> 
> 赞同：3
> 
> 时间：2013-01-17T14:18:40.670
> 
> 标签：mysql, select, insert, group-concat

好的，事情就是这样。我需要使用 MySql 将表 A 中的一列中的多行插入表 B 中的一行

这是我试图实现的一个例子：

```
Table A
id | data
1  | name
2  | date
3  | more 
```

从表 A 中，我需要选择数据列中的所有行并将该数据插入到表 B 的“数据”列的一行中，如下所示：

```
Table B 
id | data
1  | name, date, more 
```

这是我当前的代码，但它不起作用并显示错误`subquery returns more than one row`

```
INSERT INTO B (data) values (SELECT data from A) 
```

有什么办法我可以做到这一点？请原谅，因为我是新手：P

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:20:25.670

使用[**GROUP_CONCAT**](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_group-concat)函数

尝试这个：

```
INSERT INTO B (data) 
SELECT GROUP_CONCAT(data) FROM A; 
```

# git - 如何更改 Bitbucket 中的 git 提交消息？

> ID：14381044
> 
> 赞同：72
> 
> 时间：2013-01-17T14:18:50.303
> 
> 标签：git, bitbucket

我需要在 Bitbucket 中更改旧的 git 提交消息。我尝试`git rebase -i`并改写了我的消息，但是当我提取并提交它时，它只是将旧消息保留在 Bitbucket 中并将我的更改合并到。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2016-12-21T00:23:34.273

它基本上是 4 个步骤的过程。但是如果多个团队成员在同一个分支上工作并拥有自己的副本，那就有点冒险了。（如果你是唯一一个工作的人，那就去吧）

这个 git 手册很好地解释了它：[修改旧的或多个提交消息](https://help.github.com/articles/changing-a-commit-message/#amending-older-or-multiple-commit-messages)

1.  `git rebase -i HEAD~X` （X=您要更改的提交消息的数量）
2.  上面的命令将在编辑器中打开 git 文件。将文本“pick”替换为“reword”并保存文件。
3.  它将为每个提交一一打开编辑器，然后您再次更改提交消息。
4.  在末尾：`git push -f`

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2018-03-26T00:29:49.023

如果它是最近的提交，您可以简单地通过 2 个步骤执行此操作：

1.  `git commit --amend -m "modified commit message"`（修改留言）
2.  `git push --progress origin --force`（强制推）

* * *

小心使用`--force`or `-f`！[坏事可能会发生](https://stackoverflow.com/q/13036947/1429387)...

> 强烈建议不要强制推送，因为这会更改存储库的历史记录。如果您强制推送，已经克隆了您的存储库的人将不得不手动修复他们的本地历史记录。

恕我直言，如果您绝对确定没有其他人在您推送之前检查过修改后的提交，您可以强制推送到一个分支。

在这里你可以找到关于[git commit](https://git-scm.com/docs/git-commit)和[git push](https://git-scm.com/docs/git-push)的文档。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-13T15:56:50.953

我不知道您是否可以更改提交消息，但您可以在提交消息下发表评论。我认为这在某种程度上是您评论的更改。您单击提交消息的编号，然后在您的消息下方，您可以发表任何您想要的评论。然后您的消息旁边会出现一个“K1”标志，这意味着您的消息中有一条评论会提醒您更改了消息...希望这对您有所帮助...

# php - 区分变量的更短方法

> ID：14381046
> 
> 赞同：0
> 
> 时间：2013-01-17T14:18:57.670
> 
> 标签：php, ruby, variables

是否`PHP`可以选择将变量标记为实例变量或类变量或类中的局部变量？

`Ruby`有以下选项：

```
Local variable   ->  myvar
Instance variable->  @myvar 
Class variable   ->  @@myvar 
```

`$myvar`除了这个冗长的`$this->myvar`和之外，PHP 中有没有这样的选项`self::$myvar`？

我这样问是因为我来自 ruby​​ on rails 背景。像我上面给出的那样处理变量非常容易。在 PHP 中，变量处理风格并不那么方便。所以我多次参考文档。但是没有找到，所以我问我是否错过了文档中的任何此类选项，其他人可能已经注意到了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:20:48.487

不，PHP 中没有这样的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:21:05.863

```
$this->variable; //class var
ClassName::variable; //static var
$variable; //local var 
```

除了上述之外，没有其他方法可以声明变量（除非您想使用常量`define('VARIABLE', "some constant");`）

# ios - 为什么我不能设置 tableview 的内容插图？

> ID：14381047
> 
> 赞同：0
> 
> 时间：2013-01-17T14:19:01.213
> 
> 标签：ios, uitableview

我在视图中有一个venueListViewController，它已加载但隐藏（frame.origin.y 大于设备的大小）

当我显示这个控制器的视图时，我想设置内容偏移和插入，如下所示：

```
-(void)showVenueList{
    CGRect frame = self.venueListViewController.tableView.frame;
    frame.origin.y = 0;
    [self.venueListViewController.tableView setContentOffset:CGPointMake(self.venueListViewController.tableView.contentOffset.x, -10)];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3];
    [UIView setAnimationDelay:0.0];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
    self.venueListViewController.tableView.frame = frame;
    [self.venueListViewController.tableView setContentInset:UIEdgeInsetsMake(100,0,0,0)];
    [self.venueListViewController.tableView setContentOffset:CGPointMake(0, 100) animated:YES];
    [UIView commitAnimations];
} 
```

但什么也没有发生。我怎样才能做到这一点？我应该在哪里做这个？

# python - 提交前预提交钩子检查源代码

> ID：14381048
> 
> 赞同：1
> 
> 时间：2013-01-17T14:19:01.737
> 
> 标签：python, svn, pre-commit-hook, svn-hooks

我搜索了一个简单的脚本，它在提交之前检查源代码。

我想拒绝所有包含“logging.info(...)”的文件，因为我们现在想使用这个模式：

```
import logging
logger=logging.getLogger(__name__)
del(logging)

#...
logger.info() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:19:01.737

由于找不到解决方案，我自己写了：

```
#!/usr/bin/env python
# scp svn@svnserver:REPOSITORY/hooks/
# ssh svn@svnserver chmod a+rx REPOSITORY/hooks/pre-commit
# Above chmod is important!
import re, sys, subprocess
sys.stdout=sys.stderr
svnlookPath = 'svnlook'

not_allowed=[
    (re.compile(r'^\s*logging\.(error|info|debug).*'), u'use logger!'),
    ]

def main():
    changed=[]

    # sys.argv ['/svn/modwork/hooks/pre-commit', '/svn/modwork', '4508-bm']
    pipe = subprocess.Popen([svnlookPath, 'changed', sys.argv[1], '--transaction', sys.argv[2]], stdout=subprocess.PIPE)
    for line in pipe.stdout:
        change_type, fn = line.split(' ', 1)
        if not change_type[0] in 'AUC':
            continue # skip, not a source code change: delete or meta data update.
        changed.append(fn.strip())
    ret=pipe.wait()
    if ret:
        sys.exit(ret)
    for fn in changed:
        if not fn.endswith('.py'):
            continue
        pipe = subprocess.Popen([svnlookPath, 'cat', sys.argv[1], '--transaction', sys.argv[2], fn], stdout=subprocess.PIPE)
        for line in pipe.stdout:
            for regex, help in not_allowed:
                if regex.match(line):
                    print 'Content in file %s is not allowed: %s: %r' % (fn, help, line.strip())
                    sys.exit(1)
                #print 'OK', fn, repr(line)

        ret=pipe.wait()
        if ret:
            sys.exit(ret)

if __name__=='__main__':
    main() 
```

# c++ - 是否可以让 FORTRAN DLL 每次加载到随机地址？

> ID：14381049
> 
> 赞同：0
> 
> 时间：2013-01-17T14:19:02.863
> 
> 标签：c++, dll, fortran, compiler-options

我一直在搜索，但没有找到一个假定的编译器标志或其他允许我构建 FORTRAN DLL（使用 Intel Visual Fortran Composer XE 2013 编译器）以便加载随机基地址的东西每一次。我在我的 C++ 代码中显式加载我的 FORTRAN DLL 并且它加载/卸载很好，但我只是注意到它每次加载到的地址都是完全相同的位置。我想知道这是否就是为什么我的 FORTRAN DLL 有时会成功加载，而有时当我同时运行我的程序多次时会失败。英特尔 Fortran 编译器是否存在任何随机基地址编译器选项？我已经阅读了它的发行说明，但也没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:24:36.527

回答您的直接问题：是的，可以标记 DLL，以便最近的 Windows 版本将其加载到稍微随机的基地址。这是通过将[/DYNAMICBASE](http://msdn.microsoft.com/en-us/library/bb384887.aspx)选项传递给链接器 ( `link.exe`) 来实现的。阅读链接页面以获取有关如何在 Visual Studio 中启用此功能的信息。如果`ifort`在 makefile 的命令行上使用，则该`/link`选项可用于将标志传递给链接器：

```
ifort.exe ... /link /DYNAMICBASE 
```

请注意，该`/link`选项应该是命令行上的最后一个选项，因为后面的所有内容都会传递给链接器。另请注意，`/DYNAMICBASE`默认情况下为 ON，并且您的 ibrary 应以稍微随机的地址加载（您运行的是 Windows XP 吗？）

但是，这并不是必需的。解释为什么如下。

* * *

只是为了清楚地总结评论。Windows 上的每个进程（不仅在 Windows 上，而且在几乎任何现代操作系统上，如 *BSD、Linux、OS X 等）都有自己的虚拟线性地址空间，并且用户空间中的所有内存都使用这些虚拟地址进行操作. 虚拟内存分为页面，这些页面由物理内存的帧支持。一个物理内存帧可能映射到多个虚拟内存页面，甚至是来自不同进程的地址空间，从而促进进程之间的内存共享。虚拟内存页和物理内存帧之间的映射被维护在所谓的页表中。这些对于进程来说是本地的，因此映射是本地的，这意味着两个不同进程中的相同虚拟内存地址很可能会映射到完全不同的物理内存地址。一些操作系统（包括 Windows）将每个进程的虚拟地址空间分成两部分 - 下部和上部。下半部分属于进程，上半部分在所有进程中映射到操作系统的内核内存区域。这对应用程序开发人员来说没什么兴趣，因为内核内存无法从用户空间访问，因为他们缺乏必要的特权，因此只会表现为可用虚拟内存空间的减少（例如，只能从用户空间访问 2 或 3 GiB在 32 位系统上为 4 GiB）。其他操作系统（其中 OS X 是最流行的桌面操作系统）拥有整个进程专用的虚拟地址空间，内核在其自己独立的虚拟内存空间中运行。

Windows（以及大多数其他实现虚拟内存管理的操作系统）上的可执行文件通常由不同的部分组成，其中部分被分组为段。可执行文件格式被设计成可以通过直接将其部分映射到虚拟地址空间来将其加载到内存中 - 这一过程称为内存映射。通常包含程序指令（通常命名`.text`或类似名称）的可执行文件部分是只读的，因此可以在从相同可执行文件创建或加载相同 DLL 的所有进程之间共享（DLL 也具有相同的结构作为可执行文件但包含不同的部分集并且不能单独运行）以节省物理内存。可能有许多其他部分包含不同的数据，例如`.data`包含初始化静态（也是全局）变量的`.bss`部分，包含未初始化静态变量的部分，带有调试信息的部分，重定位部分，导入和导出表等。读/写（数据）部分通常不会在不同进程之间共享，除非采取了明确的措施。

Fortran COMMON 块通常位于该`.bss`部分中，因为它们只是未初始化的静态数据。如果一个 COMMON 块是使用一个`BLOCK DATA`结构用数据初始化的，那么它就会被放到这个`.data`部分中。无论哪种方式，COMMON 块都以在加载 DLL 的不同进程之间不可共享的部分结束。最后，当两个进程加载 DLL 时，无论是作为其依赖项的一部分隐式加载还是显式使用`LoadLibrary()`，只读部分将在两个进程之间共享，但读写数据部分（包括您的 COMMON 块）会有所不同在每个进程中，对一个进程中的数据的修改在另一个进程中是不可见的，即使在 DLL 在两个进程中加载​​到相同的基地址时也是如此。

Windows DLL 具有称为“首选基地址”的功能。每当操作系统加载此类 DLL 时，它都会尝试将其放置在指定的首选基地址处。如果不能（例如，部分所需的虚拟地址空间已被占用），则它将库重新定位到不同的基地址。这种行为的原因是 DLL 重定位在 Windows 上代价高昂，因为绝对寻址用于访问全局符号，并且每当必须重定位库时，加载程序必须修补（修复）地址。相比之下，许多 Unix 系统将其动态库作为 PIC（与位置无关的代码），并且可以在任何基本虚拟地址处加载。但是 PIC 代码的执行速度比正常的位置相关代码要慢一些。

较旧的 Windows 版本具有最基本的库，例如`USER32.DLL`并且`KERNEL32.DLL`始终加载在相同的基地址。它们的加载器是非常可预测的，如果您在启动和可执行时加载相同的库集并以相同的顺序，通常库在每次运行时加载到相同的基本虚拟地址。自从 Vista 引入了地址空间布局的随机化后，这种情况发生了变化——这是一项*可选*功能，允许在随机虚拟基地址加载特殊标记的可执行文件（和 DLL），以使远程网络攻击更难发现各种操作系统或用户 API 调用的正确地址。

# ios - 未调用 AWS iOS 开发工具包委托方法

> ID：14381063
> 
> 赞同：1
> 
> 时间：2013-01-17T14:19:29.703
> 
> 标签：ios, amazon-web-services, amazon-simpledb

我正在使用 Amazon SimpleDB 进行选择查询，并且我正在尝试使用 AWS `AmazonServiceRequestDelegate`，这里是委托方法（我在 .h 中符合要求）：

```
- (void)request:(AmazonServiceRequest *)request didFailWithError:(NSError *)error {

    NSLog(@"%@", error.localizedDescription);
}

- (void)request:(AmazonServiceRequest *)request didReceiveData:(NSData *)data {

    NSLog(@"recieving data");
}

- (void)request:(AmazonServiceRequest *)request didReceiveResponse:(NSURLResponse *)response {

    NSLog(@"response recieved");
}

- (void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response {

    NSLog(@"Completed");
} 
```

它们都被调用 except `didCompleteWithResponse:`，当整个操作完成并响应时应该调用的方法。`didFailWithError:`也没有被调用，但我看不出我的操作有任何失败的原因。

这是我创建选择查询的代码：

```
 SimpleDBSelectRequest *sReq = [[SimpleDBSelectRequest alloc] initWithSelectExpression:SELECT_STRING andConsistentRead: YES];

    sReq.delegate = self;

    sReq.requestTag = FIND_FRIENDS_SDB;

    [sdbClient select: sReq]; 
```

Where`SELECT_STRING`和`FIND_FRIENDS_SDB`是预定义的并且对上下文字符串有效。

我的问题是什么？谢谢！

更新：

得到委派工作。收到与我的 SimpleDB SELECT 查询相关的错误，显然我的 SELECT 表达式的语法无效。我收到两个错误，因为我正在执行两个查询，以下是每个查询的 SELECT 表达式：

> select * from trvlogue-app where Type = 'account' AND itemName() = 'me%40rohankapur.com-account'

那就是查看“Type”属性和“itemName()”并检查它们是否等于域中的某些内容。

> select * from trvlogue-app where Email in('kate-bell%40mac.com','www.creative-consulting-inc.com','d-higgins%40mac.com','John-Appleseed%40mac.com ','anna-haro%40mac.com','hank-zakroff%40mac.com')

那就是检查这些字符串是否存在于域中的电子邮件属性中。

笔记：

修复了它，显然在使用 SELECT 表达式时，域名不能有破折号。或者破折号似乎以某种方式破坏了请求

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T20:41:14.553

使用时`AmazonServiceRequestDelegate`，[这篇博文](http://mobile.awsblog.com/post/Tx3RYJD3PLLN161/Using-the-AWS-SDK-for-iOS-Asynchronously-Part-II-AmazonRequestDelegate-Best-Prac)可能会有所帮助。基本上，您需要：

1.  避免在后台线程中使用 AmazonServiceRequestDelegate。
2.  保留对客户的强烈参考。
3.  保留对委托的强引用。

另外，你应该确保你打电话`[AmazonErrorHandler shouldNotThrowExceptions]`，因为你没有实现`request:didFailWithServiceException:`. 请查看[此博客文章](http://mobile.awsblog.com/post/Tx2PZV371MJJHUG/How-Not-to-Throw-Exceptions-with-the-AWS-SDK-for-iOS)以了解详细信息。

# email - PHP Mailer & html 中的间距问题仅在 Gmail 中发送

> ID：14381067
> 
> 赞同：0
> 
> 时间：2013-01-17T14:19:49.130
> 
> 标签：email, formatting, gmail, phpmailer

我有一个简单的 PHPMailer 脚本，它从数据库行中获取一些 HTML，然后使用这个 html 作为正文发送一封电子邮件（一个基本的时事通讯脚本）

一切似乎都很好，除了 Gmail 似乎在随机的地方分解了这个字符串，偶尔这会破坏一个有效的 HTML 标记，导致页面格式在 gmail 中看起来有点混乱（但在 Outlook 中还可以）

例如.. 下面的行是 CSS 内联样式的一部分，当我查看源代码时，它破坏了 solid 一词并将其放在下一行。

```
border-width: 0px; border-style: s
olid;" 
```

任何人都可以用 Gmail 提出任何理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:20:13.577

我认为，因为根据我的经验，Gmail 不支持外部或内联样式表，所以您只需要使用样式属性不要使用内联或外部样式，并将所有样式放在样式属性中

例如：<div style='border-width: 0px; 边框样式：实心；"'>

# linux - 使用 linux 命令在电子邮件中嵌入图像

> ID：14381071
> 
> 赞同：10
> 
> 时间：2013-01-17T14:19:58.713
> 
> 标签：linux, email, sendmail

`mutt`有没有办法使用像or这样的 linux 命令将图像嵌入到电子邮件的正文中`sendmail`？

我用这个

```
mutt -e 'set content_type="text/image"' \
   u.mohan@6dtech.co.in -s "TEST" \
    -i image001.jpg < data.txt 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-02-05T14:32:39.823

我编写了一个 shell 脚本来发送`mutt`带有嵌入图像而不是链接图像的 HTML 消息。

几个步骤：

1.  `<img>`下载由原始 HTML 中的标签链接的所有图像文件，
2.  `src`通过将url 更改为 a 来准备 HTML 文件`cid`，
3.  准备一封多部分的电子邮件`(neo)mutt`
4.  修复此电子邮件中的一些内容描述标签
5.  发送`sendmail`

这是将 HTML 文件名作为参数的主脚本（未执行检查，请不要将其视为 alpha 软件）：

```
#!/bin/bash
F=$(basename "$1")
DIR="/tmp/inlinizer-$$/"
mkdir -p $DIR/Img
grep "src=" "$1" | sed -e "s,.*src=\"\([^\"]*/\)*\([^\"/]*\)\".*,wget \1\2 -O $DIR/Img/\2," > $DIR/get_img.sh
bash $DIR/get_img.sh
sed -e 's,src="\([^"]*/\)*\([^"/]*\)",src="cid:\2@example.com",g' < "$1" > "$DIR/$F"
neomutt -e 'set smtp_url=""' -e 'set sendmail="mysendmail"' -e "set content_type=text/html" me@example.com -s "test" -a $DIR/Img/* < "$DIR/$F" 
```

还需要一个自定义的 sendmail 命令（`mysendmail`在上面），它对以下生成的电子邮件文件进行后处理`mutt`：

```
sed -e 's,Content-Disposition: attachment; filename="\([^"]*\)",Content-Disposition: inline; name="\1"\nContent-ID: <\1@example.com>,' < /dev/stdin | sed -e 's,Content-Type: multipart/mixed;,Content-Type: multipart/related;,' | sendmail $* 
```

我已经在 GMail 和其他一些网络邮件中对其进行了测试。欢迎报告邮件客户端或网络邮件的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T23:42:29.453

对于那些希望使用 bash 脚本将带有嵌入图像的电子邮件作为电子邮件的一部分发送的人，我将这段代码拼凑在一起。

电子邮件以以下行开头：

```
EMAILBODY="echo \"Alarm went off! "
EMAILATTACH="" 
```

在定义要附加的每个文件的循环内部：

```
EMAILATTACH=$EMAILATTACH" -a /home/xyz/"$ID"/"$Event"/"$Frame"-capture.jpg"
EMAILBODY=$EMAILBODY"<BR> <IMG Height=150 SRC=\"$Frame-capture.jpg\">" 
```

循环之后，电子邮件通过以下几行完成：

```
EMAILBODY=$EMAILBODY"\" | mutt -e \"set content_type=text/html\" -s \"House Alarm went off!\""
EMAILSTRING=$EMAILBODY$EMAILATTACH" -- user@server.net"
eval $EMAILSTRING 
```

我的最后一个障碍是，当我在我的 android 手机上收到这个（可能在其他浏览器上也一样）时，它不显示图片，只有一个小盒子（即使你已经下载了附件）。但它在 Outlook 中显示良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T00:32:11.000

您可以通过将命令行中的**-i更改为****-a来***附加*图像。这不会嵌入图像本身，但会包含它。如果你想嵌入它，你发送的邮件必须是内容类型，并包含一个标签来显示附加的图像。****`text/html``img`****

 ****请参阅此 SO 页面，了解如何在 HTML 邮件中正确嵌入图像附件。

[在 HTML 电子邮件中嵌入附加图像](https://stackoverflow.com/questions/922898/embedding-attached-images-in-html-emails)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T16:37:55.530

甚至可以使用基本的邮件命令

您想创建一个 mime HTML 电子邮件，例如：

[如何在电子邮件中嵌入图像](https://stackoverflow.com/questions/4312687/how-to-embed-images-in-email/4312865#4312865)

然后获取标题（第一个边界之前的所有行），从该输入中删除它们并在邮件之后使用 -a 命令单独添加它们，例如：

[https://stackoverflow.com/a/12262421/2244213](https://stackoverflow.com/a/12262421/2244213) 或 [使用 shell 脚本发送 HTML 邮件](https://stackoverflow.com/questions/3317174/sending-html-mail-using-a-shell-script/3317304#3317304)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-29T02:26:47.253

我为此目的构建了一个命令行[https://github.com/gonejack/embed-email](https://github.com/gonejack/embed-email)

```
go get github.com/gonejack/embed-email 
```

```
Usage:
  embed-email *.eml [flags]

Flags:
  -v, --verbose   verbose
  -h, --help      help for embed-email 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-12T23:20:24.727

这是[Joce](https://stackoverflow.com/users/1635909/joce)[脚本](https://stackoverflow.com/a/54536691/1483447)的改进版本。

这个不需要自定义`sendmail`命令，因为它会动态创建一个，使用它并在之后将其删除。

它是参数化的，因此您无需针对不同的收件人等更改其代码，并且它还提供了一些其他好处。

前几行代码应该足够清楚解释五个位置参数的含义，但这里举个例子，以防万一：

```
<script.sh> /srv/emailbody.html "Sender's Name" sender@example.com "Embedded images" 'Recipent's name <recipient@example.net>' 
```

这取决于`mktemp`（原始脚本没有），因为我喜欢它而不是 using `$$`，但这只是一个品味问题。

```
#!/bin/bash

HTMLFULLPATH="$1"
SENDER="$2"
SENDEREMAIL="$3"
SUBJECT="$4"
RECIPIENT="$5"

HTML=$(basename "${HTMLFULLPATH}")
SENDERDOMAIN=$(echo "${SENDEREMAIL}" | cut -d@ -f2)

if ! [[ "${RECIPIENT}" == '*<*' ]] ; then
  RECIPIENT="${RECIPIENT}"'<'"${RECIPIENT}"'>' # TO_NO_BRKTS_* SpamAssassin rules
fi

function atexit
{
  rm -rf "${TEMPDIR}" "${NEOMUTTCONFIG}" >/dev/null 2>&1
}

trap atexit INT TERM EXIT

TEMPDIR=$(mktemp -d)
mkdir -p "${TEMPDIR}/img"
grep "src=" "${HTMLFULLPATH}" | sed -e "s,.*src=\"\([^\"]*/\)*\([^\"/]*\)\".*,wget \1\2 -O ${TEMPDIR}/img/\2," > "${TEMPDIR}/getimg.sh"
bash "${TEMPDIR}/getimg.sh" >/dev/null 2>&1
sed -e 's,src="\([^"]*/\)*\([^"/]*\)",src="cid:\2@'${SENDERDOMAIN}'",g' < "${HTMLFULLPATH}" > "${TEMPDIR}/${HTML}"
SENDMAIL="${TEMPDIR}/sendmail.sh"

cat > "${SENDMAIL}" << EOF
#!/bin/bash
sed -e 's,Content-Disposition: attachment; filename="\([^"]*\)",Content-Disposition: inline; name="\1"\nContent-ID: <\1@'${SENDERDOMAIN}'>,' < /dev/stdin | sed -e 's,Content-Type: multipart/mixed;,Content-Type: multipart/related;,' | sendmail \$*
EOF

chmod a+rx "${SENDMAIL}"

NEOMUTTCONFIG=$(mktemp)

echo 'set from="'"${SENDER}"' <'"${SENDEREMAIL}"'>"' >> "${NEOMUTTCONFIG}"
echo 'set smtp_url=""' >> "${NEOMUTTCONFIG}"
echo 'set sendmail="'${SENDMAIL}'"' >> "${NEOMUTTCONFIG}"
echo "set content_type=text/html" >> "${NEOMUTTCONFIG}"

neomutt -F "${NEOMUTTCONFIG}" "${RECIPIENT}" -s "${SUBJECT}" -a "${TEMPDIR}/img/"* < "${TEMPDIR}/${HTML}" 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-09-23T03:05:36.137

```
EMAILBODY="echo \"Alarm went off! "
EMAILATTACH=""
EMAILATTACH=$EMAILATTACH" -a "/home/uat12mgr/XXDBD_AR_INV_PRINT.jpg""
EMAILBODY=$EMAILBODY"<BR> <IMG Height=150 SRC=\""/home/uat12mgr/XXDBD_AR_INV_PRINT.jpg"\">"
EMAILBODY=$EMAILBODY"\" | mutt -e \"set content_type=text/html\" -s \"House Alarm went off!\""
EMAILSTRING=$EMAILBODY$EMAILATTACH" -- myaka@abc.com"
eval $EMAILSTRING 
```****

# c# - 组织抽象层次

> ID：14381073
> 
> 赞同：0
> 
> 时间：2013-01-17T14:20:14.583
> 
> 标签：c#, asp.net

我有一个带有表的 SQL Server 数据库。

最重要的是，我为每个使用 LINQ 并具有添加、删除、获取、更新功能的表设置了一个类。

最重要的是，我希望有更多特定于项目的方法。

例如，我的最高级别功能之一是将任务分配给员工。

我的想法是拥有另一组具有此功能的类，例如，初始 Task 类具有：

```
 public static IEnumerable<Task> GetAll(Schedule schedule)
    {
        KezberPMDBDataContext db = new KezberPMDBDataContext();
        return from p in db.Tasks
               where p.ScheduleID == schedule.ScheduleID
               select p;
    } 
```

例如，要分配任务，我需要 GetUnscheduledTasks。我本可以有：

```
 public static IEnumerable<Task> GetUnscheduled()
    {
       return Data.Tasks.GetAll(emptySchedule);
    } 
```

我基本上是想拥有：低级与中级交换数据，以及顶级与中级交换数据。

我应该如何组织或重构我的代码以保持它的干净和模块化？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:37:55.843

所以你有类似...

SQL > ORM 层 > 业务层。BL有例程的地方：

“给员工分配任务”

如果我们结束您的帖子“试图让 [...] 低级别与中级...和顶级...交换数据...”。我建议你看看 MVC 模式。控制器充当模型和视图之间的中间层。

“另一组具有此功能的类”。我假设您的意思是另一组帮助控制器的类。我倾向于将这些类称为“辅助类”，直到我有足够的关系来定义一个不太抽象的名称。除了我的一般 MVC/MVVM/etc 模式之外，我倾向于包含上述抽象。

# actionscript-3 - AS3 从某个时间点加载 mp3

> ID：14381074
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:20:14.547
> 
> 标签：actionscript-3, mp3

我必须在 as3 (flash) 中制作某种 mp3 播放器。我的问题是从某个起点（在时间线上）加载 mp3。例如，如果我点击 1:15 分钟并且只有 30 秒的视频正在加载，我必须从 1:15 秒开始加载视频。在 Sound 类中是 load(stream, context) 函数，但我还需要一个参数 - startTime。

我很感激任何想法。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:27:12.510

加载声音后调用`Sound.play(startTime:Number = 0, loops:int = 0, sndTransform:flash.media:SoundTransform = null):SoundChannel`[方法](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#play%28%29)，第一个参数就是你需要的。

UPD：Flash 不支持加载带偏移量的 mp3，因此您必须加载所有文件。做到这一点的唯一方法是使用像 FMS 这样的媒体服务器将您的 mp3 打包到不带视频的 mp4 容器并使用 NetStream 类，但这对于播放 mp3 来说是非常复杂的任务:)

# django - 如何在 Django 模板中对这个查询集元素求和？

> ID：14381076
> 
> 赞同：2
> 
> 时间：2013-01-17T14:20:20.610
> 
> 标签：django, django-queryset

我有查看报告的功能：

```
def view_report(request):
    a = Bill.objects.all()
    return render_to_response('report.html', {'a':a}, context_instance=RequestContext(request)) 
```

有一个名为 price 的属性，它具有数字元素。我想总结所有价格并在 Django 模板中显示为一个数字：

```
{% for i in a %}

{{ i.price }}

{% endfor %} 
```

这只是返回所有价格。我想总结所有这些价格并显示为一个。我尝试使用`{{ i.price|sum }}`which 不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T14:24:18.110

不要在模板中这样做。在您的视图中使用[聚合 API ：](https://docs.djangoproject.com/en/1.4/topics/db/aggregation/)

```
from django.db.models import Sum
total_price = Bill.objects.all().aggregate(Sum('price')) 
```

# windows - 批处理脚本 - 查找文件中是否缺少字符串，显示输出

> ID：14381077
> 
> 赞同：0
> 
> 时间：2013-01-17T14:20:20.303
> 
> 标签：windows, batch-file, batch-processing, findstr

我有 10 个文件夹的集群，每个文件夹有 1000 个程序文件。我需要在这些文本文件中搜索 MISSING 字符串。所有文件必须以 $O123456.MIN% 开头（123456 是随机文件名）。我知道如何查找字符串是否存在，但我如何识别字符串是否不存在？

一旦确定，哪个文件缺少字符串，我想要一份报告或该文件的副本，移动到另一个文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:34:38.480

你的要求不清楚。我假设以下内容：

1 - 您的 10 个文件夹的“集群”由某个根文件夹中的所有文件夹组成。

2 - 您的文本文件都有 .txt 扩展名

3 - 您想要报告指定文件夹中第一行不以 开头的所有文件`$O*.MIN%`，其中 * 表示任何 1 个或多个字符，并且`O`区分`MIN`大小写。

```
@echo off
setlocal
set "rootFolder=c:\yourRootPath"
set "fileMask=*.txt"
set "outFile=missing.txt"

>"%outFile%" (
  for /d %%D in ("%rootFolder%") for %%F in ("%%D\%fileMask%") do (
    findstr /nbr "$O..*\.MIN%%" "%%F" | findstr /bl "1:" >nul || echo %%F
  )
) 
```

如果您的实际要求不同，则可能不需要太多代码更改。例如，以下任何更改都将是微不足道的：

*   更改文件掩码
*   使搜索不区分大小写
*   递归处理根文件夹中的所有文件夹
*   处理特定文件夹的列表
*   限制随机文件中可以使用哪些字符和/或多少个字符（您的 0123456）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:07:40.123

这会将所有没有字符串的文件输出到文件中`Missing.txt`。

```
for %%a in (*.*) do (
find "$O123456.MIN%" %%a
if %errorlevel%==1 echo %%a >Missing.txt
) 
```

# android - Leadbolt 横幅屏幕外

> ID：14381078
> 
> 赞同：4
> 
> 时间：2013-01-17T14:20:20.937
> 
> 标签：android, sdk, banner, off-screen, leadbolt

我的横幅有时会从屏幕上消失。我正在使用带有以下代码的 Leadbolt SDK 4.00a 和 Android 4.1：

```
mAdView = new AdController(mActivity, "MY ID", this);
mAdView.setAdditionalDockingMargin(0);
mAdView.setAsynchTask(true);
mAdView.loadAd(); 
```

[图片 1 http://imageshack.us/a/img27/9539/sc20130117140203.png](http://imageshack.us/a/img27/9539/sc20130117140203.png) [图片 2 http://imageshack.us/a/img690/8301/sc20130117140148.png](http://imageshack.us/a/img690/8301/sc20130117140148.png)

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:15:33.230

当 Android 正在布局横幅广告并且当时尚未完全加载时，可能会发生这种情况。

我不知道是否可以绕过该问题，因为我们无法控制该广告视图并且 SDK 不允许预加载广告。

我建议您改用 HTML 横幅广告和插页式广告。您可以更好地控制广告的定位、动画效果，并且您无需使用任何广告 SDK（可能会被某些安全服务列入黑名单）。

如果您在分辨率独立或在本机浏览器中打开 HTML 广告点击时遇到问题，请查看我的帖子：

[http://qa.leadboltads.com/questions/632/how-toandroid-make-html-ad-resolution-independent-and-open-in-native-browser](http://qa.leadboltads.com/questions/632/how-toandroid-make-html-ad-resolution-independent-and-open-in-native-browser)

# c# - 具有 Object 类型的 RavenDB 查询

> ID：14381082
> 
> 赞同：0
> 
> 时间：2013-01-17T14:20:30.990
> 
> 标签：c#, .net, ravendb

我们尝试搜索 stackoverflow 和其他地方，但找不到解决方案。

我们有一堂是这样的。

```
class UserAccountInfo
{
   public String someid;
   public Object needtoqueryobject; //This can store different object types like AccountInfoCustomer, AccountInfoFriend etc.,
} 
```

我们想像下面这样查询这个类。

```
var Result = sess.Query<UserAccountInfo>().Where(x => ((AccountInfoCustomer)x.needtoqueryobject).AccountType == usertype); 
```

但这不受支持，它说无法查询未索引的字段。我们可以理解 RavenDB 无法索引此特定类型，因为它不了解实际类型。有人可以解释如何确保这些类也被索引吗？

添加了 AccountInfoCustomer 类型定义：

```
using System;

namespace Dheutto.Models
{
public enum AccountTypes
    {
        Customer,
        Trader,
        Distributor
    }

    public class AccountInfoCustomer
    {
        //The AccountNumber for the document
        public String FirstName { get; set; }
        public String MiddleName { get; set; }
        public String LastName { get; set; }
        public String Father_spouse_Name { get; set; }
    public AccountTypes AccountType{ get; set; }
    }
} 
```

这个 AccountInfoCustomer 类型是作为对象存储在需要查询对象字段中的。因此，当我使用类型转换进行查询时，我希望它返回一些结果。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:09:01.000

如果您的实体中有一个*对象*，则无法使用 linq 查询该对象。您*可以*使用 LuceneQuery 和无类型语法进行查询。

# iphone - 计数按钮事件

> ID：14381083
> 
> 赞同：0
> 
> 时间：2013-01-17T14:20:31.763
> 
> 标签：iphone, xcode

如何对按钮单击事件执行两项操作。例如，单击一次我执行一项操作，连续两次单击我必须执行另一个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:28:37.670

`UIImageView`在.上使用双击手势..... 不要忘记将`UIImageView's`UserInteractionEnabled 设置为**TRUE**。

```
ImageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:44:02.033

将初始按钮标签设置为 0

然后

```
-(IBAction)yourBtnPress:(id)sender
{
    UIButton *btn = (UIButton*)sender;
    if (btn.tag==0)
    {
        btn.tag=1;
        //singlePress
    }
    else if(btn.tag==1)
    {
        //double tap

        //if you want other action then change tag
        btn.tag=2;

        //if you restart task then
        btn.tag=0;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:32:57.510

这里**tapCount**是在**.h 文件**`int`中声明的变量

 **```
- (void)viewDidLoad
{
  tapCount = 0; // Count tap on Slider 

 UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(ButtonTap:)];
    [button addGestureRecognizer:gr];

}

 - (void)ButtonTap:(UIGestureRecognizer *)g 
    {
/////////////// For TapCount////////////

        tapCount = tapCount + 1;
        NSLog(@"Tap Count -- %d",tapCount);

/////////////// For TapCount////////////

if (tapCount == 1)
{

       // code for first tap
}
else if (tapCount == 2)
{
      // Code for second tap
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:23:31.290

您可以使用条件`setAction:`

如果单击然后调用`selectorSingleTouch`。

否则打电话`selectorDoubleTouch`。

//这不是编译器检查...至少你可以从中得到一些想法

```
UITapGestureRecognizer *singleTap=[[UITapGestureRecognizer alloc] initWithTarget: self action:@selector(doSingleTap)];
singleTap.numberOfTapsRequired = 1; 
[self.view addGestureRecognizer:singleTap];

UITapGestureRecognizer *doubleTap=[[UITapGestureRecognizer alloc] initWithTarget: self action:@selector(doDoubleTap)];
doubleTap.numberOfTapsRequired = 2; 
[self.view addGestureRecognizer:doubleTap]; 
```**

# php - 接收同名文本框

> ID：14381088
> 
> 赞同：0
> 
> 时间：2013-01-17T14:20:43.230
> 
> 标签：php, html, mysql

我一直在接受一系列文本框，所有这些文本框都具有相同的名称。例如，其中一个是这样的：

`<input type=text name="serial[]"> <input type=text name="serial[]"> <input type=text name="serial[]"> <input type=text name="serial[]">`

然后我把它们带进来：

$altSerial = $_POST['serial'];

但我不断收到变量未定义错误。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:22:43.850

表格有问题。您发布的 HTML 是正确的（或者它没有任何明显的问题） - 您应该在其中获取一个数组`$_POST['serial']`

也发布它们，也许你还没有设置`method="POST"`，或者类似的问题。

# python - 如何为变量分配随机数？

> ID：14381091
> 
> 赞同：6
> 
> 时间：2013-01-17T14:20:47.003
> 
> 标签：python, random

在我说别的之前，我想提一下，我对编码几乎是全新的，对 python 的了解也很初步。

既然已经不碍事了，我的问题是我正在（尝试）编写一个文本冒险游戏，沿着 D&D 的路线。我被困在早期阶段 - 即如何将 1 到 18 之间的随机整数分配给变量。

我已经看到了一些这样做的方法，但是每次调用它时变量的值都会改变。这不可能发生。这样做的原因是因为我希望统计数据（力量、智慧、智力、敏捷、魅力和体质）是一个随机生成但固定的数字，可以调用并且每次都相同。

我尝试过`Str = random.randomint(1,18)`使用 random 模块来处理类似的事情。

我最接近的是使用 lambda 函数，因此当我调用变量时，它会生成一个每次都不同的随机数。这些都没有集会奏效，我真的很想知道我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T14:26:31.077

我看到你非常接近你所拥有的：

`Str = random.randomint(1,18)`应该`Str = random.randint(1,18)`

这是将随机 int 分配给变量的行`Str`，当您要求时，`Str`您每次都应该得到相同的数字。

如果你继续打电话，它每次`Str = random.randint(1,18)`都会改变。`Str`所以只做一次。

如果您知道或了解`classes`您应该使用它们来包含您的角色/物品/法术/冒险/怪物等，它们可以具有属性和属性以及库存等，就像在游戏本身中一样，您可以将所有事物分组在不同的类型下.

注意：您提到您使用了 lambda，这可能意味着您已分配`Str`给一个每次返回一个随机变量的函数，这意味着每次您要求`Str`您实际上是要求该函数返回一个随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:00:23.233

欢迎编码。

我已经做了一段时间的 Web 开发人员，最近我也开始钻研比 php 更好的东西（在我看来）。我也会使用：

```
Str = random.randomint(1,18) 
```

你在使用 IDE 吗？由于代码完成，当您第一次学习新语言时，我发现它们很棒。由于不必去各种网站查找语法，它确实可以帮助您更快地了解语言。祝你好运！基于文本的冒险游戏是开始学习的好方法！

# sql - 我可以使用表中的条目创建动态 where 子句吗

> ID：14381095
> 
> 赞同：0
> 
> 时间：2013-01-17T14:20:50.360
> 
> 标签：sql, teradata

我有一个元数据表，如下所示：

```
RULE_NAME      COL_NAME   COL_VAL
RULE_1     COL_1         ABC
RULE_1     COL_5         XYZ
RULE_2     COL_2         123
RULE_2     COL_3         A2d5
RULE_2     COL_8         X0IL
RULE_3     COL_1         PQR
RULE_3     COL_7         9789 
```

我需要使用该表中的数据生成 WHERE 子句。WHERE 子句应该是这样的：

```
WHERE
(COL_1 = 'ABC' AND COL_5 = 'XYZ') --from Rule 1 records
OR
(COL_2 = '123' AND COL_3 = 'A2D5' AND COL_8 = 'X0IL') --From Rule 2 records
OR
(COL_1 = 'PQR' AND COL_7 = '9789') --from Rule 3 records 
```

这可能与普通 SQL（我在 Teradata 上）有关吗？有人可以给我一些关于如何实现这一目标的指示吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:40:46.823

以下将每个子句返回到单独的行：

```
select oreplace(max(case when seqnum = 1 then clause else '' end) ||
                MAX(case when seqnum = 2 then clause else '' end) ||
                MAX(case when seqnum = 3 then clause else '' end)
               ), ')(', ') and (')
from (select t.*, ROW_NUMBER() over (partition by rule_name order by col_name) as seqnum,
             ('(' || COL_NAME || ' = ' || '''' || col_val || ''')') as clause
      from t
     ) t
group by rule_name 
```

够近了吗？

如果您没有“oreplace”功能，您可以执行以下操作：

```
select max(case when seqnum = 1 then clause else '' end) ||
       MAX(case when seqnum = 2 then clause else '' end) ||
       MAX(case when seqnum = 3 then clause else '' end) || ' 1=1 OR'
from (select t.*, ROW_NUMBER() over (partition by rule_name order by col_name) as seqnum,
             ('(' || COL_NAME || ' = ' || '''' || col_val || ''') and') as clause
      from t
     ) t
group by rule_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:39:45.747

您是否尝试过这样的事情（未经测试）？也许你可以提供你想要的结果。

```
SELECT *
FROM TableName
WHERE 
(
   (COL_Name = 'COL_1' AND COL_Val = 'ABC') 
   OR (COL_Name = 'COL_5' AND COL_Val = 'XYZ')
)
OR 
(
   (COL_Name = 'COL_2' AND COL_Val = '123') 
   OR (COL_Name = 'COL_3' AND COL_Val = 'A2D5') 
   OR (COL_Name = 'COL_8' AND COL_Val = 'X0IL')
) 
OR 
(
   (COL_Name = 'COL_1' AND COL_Val = 'PQR') 
   OR (COL_Name = 'COL_7' AND COL_Val = '9789')
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:10:37.960

这是基于 scott.emp 表的一般 Oracle 示例。涵盖 EXECUTE IMMEDIATE 和 REF CURSOR：

```
DECLARE
  v_sql           VARCHAR2(200);
  v_tab_name      VARCHAR2(200):= 'scott.emp';
  v_field_name    VARCHAR2(200):= 'job';
  v_list          VARCHAR2(200):= '''MANAGER'', ''CLERK''';
BEGIN
  v_sql:= 'SELECT * FROM '|| v_tab_name ||' WHERE '||v_field_name ||' IN (:v)';
  EXECUTE IMMEDIATE v_sql USING v_list;
  dbms_output.put_line(v_sql);
END;
/

DECLARE
  emp_cur_rc      SYS_REFCURSOR;
  emp_rec         scott.emp%ROWTYPE;
--
  v_sql           VARCHAR2(200);
  v_tab_name      VARCHAR2(200):= 'scott.emp';
  v_field_name    VARCHAR2(200):= 'job';
  v_list          VARCHAR2(200):= '''MANAGER'', ''CLERK''';
BEGIN
  v_sql:= 'SELECT * FROM '|| v_tab_name ||' WHERE '||v_field_name ||' IN ('||v_list||')';
  EXECUTE IMMEDIATE v_sql;
  dbms_output.put_line('EXECUTE IMMEDIATE example: '||v_sql||chr(13));
--
  OPEN emp_cur_rc FOR v_sql;
  LOOP
    FETCH emp_cur_rc INTO emp_rec;
    EXIT WHEN emp_cur_rc%NOTFOUND;
    dbms_output.put_line('REFCURSOR example: '||emp_rec.empno||chr(9)||emp_rec.ename||chr(9)||emp_rec.job);
  END LOOP;
  CLOSE emp_cur_rc;
END;
/ 
```

# iis - 在 IIS 7.5 中包含 ASP 文件的问题

> ID：14381096
> 
> 赞同：0
> 
> 时间：2013-01-17T14:20:54.483
> 
> 标签：iis, asp-classic

感谢您花时间阅读我的这个问题，我敢肯定这是一个男生的错误，但对于我的生活来说，看不到它。

我有一个包含以下内容的 ASP 页面：

```
<!-- #include file="include.asp" -->
<%
Dim ConfigFile
ConfigFile = Left(Request.ServerVariables("URL"), InStr(Request.ServerVariables("URL"),"/framework/lib/dms/asp/"))
ConfigFile = ConfigFile & "project/config/ConfigDms.inc.asp"

%>
<HTML>
<HEAD>
</HEAD>
<BODY>
<%=ConfigFile%>
</BODY>
</HTML> 
```

当作为独立页面访问或通过 iFrame 调用时（不要问），它可以工作。但是，如果我添加“include ConfigFile”行，页面会在 IIS 中返回 404 错误。ConfigFile 的值为“/cms/project/config/ConfigDms.inc.asp”，如页面正文中打印的那样。

如果我添加“include [https://xxx.xxx.xxx.xxx/cms/project/config/ConfigDms.inc.asp](https://xxx.xxx.xxx.xxx/cms/project/config/ConfigDms.inc.asp) ”行来替换原始的包含语句，它会按预期工作。

现在我确定这是一个配置错误，但是尽管我将 ASP 设置“enableParentPaths”设置为 true 并将“errorsenttobrowser”设置为 true，但我仍然没有得到任何结果。

我在另一台运行旧版本 IIS 的服务器上有相同的代码，它工作正常，但是，我从未设置过原始服务器，也没有设置新服务器的文档。

导致 404 错误的 ASP 脚本如下所示：

```
<!-- #include file="include.asp" -->
<%
Dim ConfigFile
ConfigFile = Left(Request.ServerVariables("URL"), InStr(Request.ServerVariables("URL"),"/framework/lib/dms/asp/"))
ConfigFile = ConfigFile & "project/config/ConfigDms.inc.asp"

include ConfigFile
%>
<HTML>
<HEAD>
</HEAD>
<BODY>
<%=ConfigFile%>
</BODY>
</HTML> 
```

但是这个文件工作正常：

```
<!-- #include file="include.asp" -->
<%
Dim ConfigFile
ConfigFile = Left(Request.ServerVariables("URL"), InStr(Request.ServerVariables("URL"),"/framework/lib/dms/asp/"))
ConfigFile = ConfigFile & "project/config/ConfigDms.inc.asp"

include "https://xxx.xxx.xxx.xxx/cms/project/config/ConfigDms.inc.asp"
%>
<HTML>
<HEAD>
</HEAD>
<BODY>
<%=ConfigFile%>
</BODY>
</HTML> 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:42:04.307

尝试访问特定页面时出现 404 错误的原因确实是正确的。我的一位同事更改了定制错误消息的默认错误消息，但未能将实际的 HTML 错误页面复制到服务器上。

这意味着检测到 500 错误，尝试显示 500.html 页面但找不到它，因此显示 404 错误.....

很抱歉任何花时间阅读本文的人...

# java - 用 Java 管理网页的脚本块/命令输出

> ID：14381097
> 
> 赞同：0
> 
> 时间：2013-01-17T14:21:01.177
> 
> 标签：java, jsp, scriptmanager, server-side-includes, script-tag

我一直在查看 StackOverflow 并进行更广泛的搜索，以找到有关在 JSP 页面中管理 JavaScript 命令输出的一些信息。我不是 Java 开发人员，所以我在这里向专家寻求一些指导。

我不是想在服务器上编译 JavaScript，而是想办法存储代码块或简单的单行命令以在 JSP 页面中输出。主要目标是通过将所有必要的命令和代码块组合到页面底部的一个 SCRIPT 标记中来减少页面内多个内联 SCRIPT 标记的使用。代码块和命令通常用于初始化网页中的各种组件，其中一些将包括来自服务器的数据，这些数据被序列化为 JSON 并直接传递给命令，或用于设置标记化字符串中的值，这些字符串成为脚本块和/或命令。

该对象需要可用于任何 JSP 页面和任何服务器端包含的模块/页面。

我发现了这样一个问题：[Java 脚本引擎在哪里使用？](https://stackoverflow.com/questions/1016128/where-is-java-scripting-engine-used)，但我不想在服务器上编译脚本，我想输出脚本以在网页中使用。我是一名 .Net 开发人员，我熟悉 ScriptManager 对象，该对象用于为 .Net 网站上的内置 AJAX 功能执行此确切任务。在另一个项目中，我扩展了 .Net ScriptManager 来执行此操作。

非常感谢您的想法或建议。

更新：以下面的 JSP 代码为例。我想在 Java 中有一个对象来将这些命令存储在标签内，以便在页面末尾输出。

这就是我现在所拥有的：

```
<html>
<head>
   <script type="text/javascript" src="somelibrarycode.js"></script>
...
</head>
<body>
...
<%
    // server-side code to set a value:
    //   obj is an object with method getBar that returns string
    string foo = obj.getBar(); 
%>
<div id="someComponent"></div>
<script type="text/javascript">
    // client-side code to initialize some page components:
    //    this would be what I consider a JavaScript command:
    someLibraryCode.someComponent.init('<%=foo%>');
</script>
...
...
...
...
<%
    // server-side code that to create instance of someObjectClass that has a  
    //   toJSON serializer method;
    someObjectClass myObject = new someObjectClass();
%>
<div id="anotherComponent"></div>
<script type="text/javascript">
    // more client-side code that takes the result of myObject.toJSON() which is 
    //   a JSON encoded-string value:
    someLibraryCoode.anotherComponent.init(JSON.decode('<%= myObject.toJSON() %>'));
</script>
...
</body>
</html> 
```

这就是我想要做的：

（假设 myScript.add() 接受一个字符串和数组作为参数）

```
<html>
<head>
   <script type="text/javascript" src="somelibrarycode.js"></script>
...
</head>
<body>
...
<%
    // server-side code to set a value:
    //   obj is an object with method getBar that returns string
    string foo = obj.getBar();

    ScriptManager myScript = new ScriptManager();
    string commandString = "someLibraryCode.someComponent.init('{0}');";
    myScript.add(commandString, [foo]);
%>
<div id="someComponent"></div>
...
...
...
...
<%
    // server-side code that to create instance of someObjectClass that has a  
    //   toJSON serializer method;
    someObjectClass myObject = new someObjectClass();
    string myObjectJSON = myObject.toJSON();
    commandString = "someLibraryCoode.anotherComponent.init(JSON.decode('{0}'));";
    myScript.add(commandString, [myObjectJSON]);
%>
<div id="anotherComponent"></div>
...
...
...
<script type="text/javascript">
    // only one script tag within the body element
    // writeScript() outputs all stored script blocks/commands:
    myScript.writeScript();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:33:57.700

Javascript 在客户端加载和运行，因此这与 Java 或 JSP 无关，并且对任何其他 Web 技术同样有效，包括静态 html。我建议在页面末尾加载一个 .js 文件：

```
...
    <script type="text/javascript" src="myscript.js"></script>
</body>
</html> 
```

并在该脚本中做任何需要的事情。它通常会在窗口上放置一个 onload 处理程序来进行一些初始化。如果需要，该脚本还可以动态加载更多脚本。

# wordpress - 使用具有不同 wordpress 主题的两个域相同的数据库

> ID：14381099
> 
> 赞同：3
> 
> 时间：2013-01-17T14:21:05.953
> 
> 标签：wordpress, mobile

我想在我的子目录中使用相同的数据库（内容/用户/评论/元/类别等）安装另一个 wordpress。

我实际上想创建我的网站的移动版本。但我不想使用任何移动检测脚本或 css3 媒体查询。只想创建我的新主题（移动版）

**例如;**

主域也有子域；

```
maindomain.com // root
mobile.maindomain.com // sub directory 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T05:21:45.713

WordPress 的优点之一是代码中的大量钩子允许您扩展或覆盖核心功能。

解决此问题的一种方法是在您的 vhost 文件中为每个站点设置一个 Apache 环境变量，该变量可用于 WordPress 引导过程以覆盖主题和基本 URL 设置。

例如在 Apache vhost 添加：

```
SetEnv WP_CONTEXT main 
```

和

```
SetEnv WP_CONTEXT mobile 
```

（或者如果您使用不同的网络服务器，则等效）。

在 wp-config.php 中：

```
switch ($_SERVER['WP_CONTEXT']) {
    case 'main':
        define('WP_HOME','http://maindomain.com');
        define('WP_SITEURL','http://maindomain.com');
    break;

    case 'mobile':
        define('WP_HOME','http://mobile.maindomain.com');
       define('WP_SITEURL','http://mobile.maindomain.com');
    break;
} 
```

这将根据环境变量设置基本 URL。

然后在插件中添加以下过滤器：

```
add_filter('template', 'change_theme');
add_filter('option_template', 'change_theme');
add_filter('option_stylesheet', 'change_theme');

function change_theme() 
{
    switch ($_SERVER['WP_CONTEXT']) {
        case 'main':
            return 'main';
        break;

        case 'mobile':
           return 'mobile';
        break;
} 
```

这需要在插件中，以便在正常的主题加载过程之前加载（functions.php 是主题的一部分，因此为时已晚）。这些过滤器将拦截并覆盖数据库中的主题设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:25:00.517

您不能直接这样做，因为 WP 将其 url 存储在数据库中。AFAIK 有一种方法可以在 sql 中“链接”表，所以它可能是这种方式 - 例如链接 wp_options 旁边的所有内容，但它仍然是一种棘手的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-07T15:47:41.150

我有同样的问题，它至少对我有用：

1.  将此代码添加到移动主题中的functions.php：

    remove_filter('template_redirect','redirect_canonical');

**[从这里](https://developer.wordpress.org/reference/functions/redirect_canonical/)**阅读更多关于这个钩子的信息

2.  在 wp-config.php 中添加这些：

    定义('WP_HOME','http://mobile.maindomain.com'); 定义('WP_SITEURL','http://mobile.maindomain.com');

**[从这里](https://wordpress.org/support/article/changing-the-site-url/)**阅读更多这些钩子

**在移动版的 wordpress 安装中应用这些更改**

# android - 使用 cursorAdapter 错误过滤列表视图

> ID：14381101
> 
> 赞同：2
> 
> 时间：2013-01-17T14:21:09.417
> 
> 标签：android, listview, simplecursoradapter

我在过滤我的 listView 时遇到问题。每当我尝试在我的 editText 中输入文本时，什么都没有改变。

也许问题是关于这个..我的 mCursor 声明

```
Cursor mCursor = myDatabaseHelper.getDirectoryList(null); 
```

我试图将参数从 null 更改为“Android”，输出在我的 listView 中显示术语 Android .. 但如果参数设置为 null，那么我的字典中的每个术语都会显示在 listView 中。

我在同一个类中有另一个调用 getDirectoryList 的代码片段，但似乎该片段中的参数被忽略了。请帮我..

这是代码

```
 public class SearchActivity extends Activity{

private DatabaseHelper myDatabaseHelper;

  /* Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.search_layout);

      myDatabaseHelper = new DatabaseHelper(this);
      try {
        myDatabaseHelper.createDataBase();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
      myDatabaseHelper.openDataBase();

      Cursor mCursor = myDatabaseHelper.getDirectoryList(null);

      String[] from = new String[]{DatabaseHelper.KEY_CONTENT};
      int[] to = new int[]{R.id.text1};
      SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, mCursor, from, to);
        startManagingCursor(mCursor);

        ListView listContent = (ListView)findViewById(R.id.contentlist);
        listContent.setAdapter(cursorAdapter);

      listContent.setFastScrollEnabled(true);
      listContent.setTextFilterEnabled(true);

      EditText etext=(EditText)findViewById(R.id.editText1);
      etext.addTextChangedListener(new TextWatcher() {
          public void onTextChanged(CharSequence s, int start, int before, int count) {
          }

          public void beforeTextChanged(CharSequence s, int start, int count, int after) {
          }

          public void afterTextChanged(Editable s) {
              ListView listContent = (ListView)findViewById(R.id.contentlist);
              SimpleCursorAdapter filterAdapter = (SimpleCursorAdapter)listContent.getAdapter();
              filterAdapter.getFilter().filter(s.toString());
              //Toast.makeText(getApplicationContext(), s, Toast.LENGTH_SHORT).show();
          }
      });

      myDatabaseHelper = new DatabaseHelper(this);
     cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {
          public Cursor runQuery(CharSequence constraint) {
              //myDatabaseHelper = new DatabaseHelper(this);
              //int x = constraint.toString().length();
              myDatabaseHelper.getDirectoryList(constraint);
              Toast.makeText(getApplicationContext(), constraint, Toast.LENGTH_SHORT).show();

              return myDatabaseHelper.getDirectoryList(constraint);

          }
        });

      myDatabaseHelper.close(); 
```

和我的 getDirectory 类

```
 public Cursor getDirectoryList (CharSequence constraint)  {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(DB_NAME);

    String[] columns = new String[]{KEY_ID, KEY_CONTENT, KEY_DESCRIPTION, KEY_NETWORKING, KEY_HARDWARE, KEY_SOFTWARE, KEY_INTERNET, KEY_TECHNOLOGY};

    if (constraint == null  ||  constraint.length () == 0)  {
        //  Return the full list
        //String[] columns = new String[]{KEY_ID, KEY_CONTENT, KEY_DESCRIPTION, KEY_NETWORKING, KEY_HARDWARE, KEY_SOFTWARE, KEY_INTERNET, KEY_TECHNOLOGY};Toast.makeText(getContext(), constraint, Toast.LENGTH_SHORT).show();

        Cursor cursor = myDataBase.query("MY_TABLE", 
                 columns, KEY_TECHNOLOGY + "='Y'", null, null, null, null);
        return cursor;
    }  else  {
            String value = constraint.toString()+"%";
            Cursor cursor2 = myDataBase.query("MY_TABLE", columns, KEY_CONTENT + " like ?", new String[]{value}, null, null, null);
            return cursor2;
        }
    }

} 
```

# android - 如何获取 Facebook AccessToken？

> ID：14381114
> 
> 赞同：1
> 
> 时间：2013-01-17T14:21:47.830
> 
> 标签：android, facebook

我有一个 Facebook Session。但它没有打开。我试图按如下方式获取 AccessToken

```
Session.getActiveSession().getAccessToken(); 
```

但它不返回任何东西。我怎样才能获得 AccessToken？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:41:20.990

好吧，正如[官方文档](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)中所写的那样，您需要`UiLifecycleHelper`确保为与 Facebook SDK 交互的每个片段创建一个有效的会话。

您应该做的是覆盖片段（或活动）中的生命周期方法，然后`Session.getActiveSession()`如果有会话，则返回会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:57:16.617

您几乎不再需要提取实际的访问令牌。对图形 API 的任何请求都可以使用[Request 类](https://developers.facebook.com/docs/reference/android/3.0/Request)和 Session 对象来完成。

# gwt - 如何使用 JSNI 实现 javascript API？

> ID：14381116
> 
> 赞同：1
> 
> 时间：2013-01-17T14:21:59.397
> 
> 标签：gwt, jsni

我正在尝试使用 GWT 实现 API（SCORM API）。客户端代码需要一个 API 对象，其中包含 Initialize()、getLastError() 等方法......

我尝试将此 api 实现为 Java 对象，但我看到编译的名称已更改，客户端代码无法直接使用。

我看到 gwt-exporter 可以做到这一点（http://code.google.com/p/gwt-exporter/），但我想知道如何使用纯 gwt 和 jsni 来做到这一点。

由于 API 应该是一个对象，名为 API_1484_11 附加到窗口对象，而不是函数，所以我不知道如何使用 $entry() 习语。

这是我当前的失败代码：

```
public final class SCORMApi {

    protected SCORMApi() {}

    public void Initialize(){
        GWT.log("** INITIALIZE CALLED **");
    }

    public static void create(){
        bind(new SCORMApi());
    }

    public static native void bind(SCORMApi api) /*-{
        $wnd.API_1484_11 = api;
    }-*/;

} 
```

所以，在这种情况下，我的问题是：

我怎样才能获得 javascript 调用（例如`window.API_1484_11.Initialize()`）来访问我的 java gwt 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:50:59.167

你的`bind`方法是正确的。但是您还不了解如何从 JSNI 中调用 Java 方法。这是您在 Initialize 方法的情况下执行此操作的方式：

```
public static native void bind(SCORMApi api) /*-{
    $wnd.API_1484_11 = {
        initialize: function() {
            $entry( api.@com.yourpackage.name.SCORMApi::Initialize()() );
        }
    };
}-*/; 
```

需要阅读有关此主题的博客开始真正了解 GWT[第 1](http://googlewebtoolkit.blogspot.co.uk/2008/07/getting-to-really-know-gwt-part-1-jsni.html)部分和[第 2部分。](http://googlewebtoolkit.blogspot.co.uk/2008/08/getting-to-really-know-gwt-part-2.html)

# python - Spyder 找不到 Enthought 包

> ID：14381117
> 
> 赞同：3
> 
> 时间：2013-01-17T14:22:02.687
> 
> 标签：python, enthought, spyder

我是 python 新手，想将 Spyder IDE 与 Enthought 的学术发行版一起使用。我可以让 Spyder 运行，但它找不到 Enthought 发行版附带的 pandas 等软件包。当我从 Spyder 之外的 shell 运行 python 时，我可以导入 pandas。我在 OSX 10.7.5 上使用 Enthought EPD 7.3 64bit，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:33:01.260

为了能够导入 EDP 附带的包，您必须更改您的解释器

`Tools > Preferences > Console > Advanced Settings > Python executable`

选择 EPD 解释器，它应该位于

`/Library/Frameworks/EPD64.framework/Versions/7.3/bin`

但是，现在该应用程序存在一个[错误](http://code.google.com/p/spyderlib/issues/detail?id=1226)，该错误会阻止导入不同解释器的模块。

我会尽快修复它。

# asp.net-mvc - MVC Razor 覆盖属性标题

> ID：14381118
> 
> 赞同：1
> 
> 时间：2013-01-17T14:22:07.120
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我试图覆盖下面两个 MVC 3 Razor 扩展生成的标题。我想显示“已启用”而不是“已启用”。

```
@Html.DisplayFor(modelItem => item.IsEnabled) 
```

和

```
@Html.LabelFor(model => model.IsEnabled) 
```

我的物业装修如下：

```
[DisplayName("Is Enabled")]
public bool IsEnabled { get; set; } 
```

该`LabelFor`方法似乎尊重`DisplayName`属性；它工作得很好。但是，该`DisplayFor`方法**不会**获取该`DisplayName`属性。

关于如何覆盖两种 Razor 方法的属性标题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:27:59.570

您正在混合标题和内容（或属性名称及其值）

`DisplayFor`用于内容（实例属性的值），因此显示布尔值的 true 或 false（或选中或未选中的复选框）。

`LabelFor`是...一个标签（一种标题），因此它将显示属性的名称（如果您没有放置 DisplayName 属性，则为 IsEnabled），以及 DisplayName 属性的值（如果存在）

# c++ - QRegEx 帮助，一般的 RegEx

> ID：14381120
> 
> 赞同：0
> 
> 时间：2013-01-17T14:22:16.207
> 
> 标签：c++, linux, qt

我正在尝试学习 RegEx。我的任务是从数百个 *.png 文件中生成 QPixmap。理想情况下，它将是一个 PixMap 矩阵。

我认为 QRegEx 是执行此操作的最佳方式，因此我可以将像素图插入矩阵而无需排序。

我试图匹配的模式：

```
runner_(int)_(int).png 
```

其中第一个整数的边界为 [-1, 13]，第二个整数的边界为 [00, 20]。第二个整数有一个前导零。

这是我的代码尝试：

```
 // find the png files in the thing
    QDir fileDir(iconPath);        
    QFileInfoList fileList = fileDir.entryInfoList();

    QRegExp rxlen("runner_([^\\_]{1,1}])_([^\\_]{1,1}]).png");        
    foreach (const QFileInfo &info, fileList) {
        qDebug() << info.fileName();
        int pos = rxlen.indexIn(info.fileName());
        if (pos > 1) {
            qDebug() << rxlen.cap(1);
            qDebug() << rxlen.cap(2);
        } else {
            qDebug() << "Didn't find any";
        }
    } 
```

我的问题：请帮助使用 RegEx 表达式。

请温柔，我是 RegEx 的新手（大约一个小时前开始学习它！）

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:05:26.453

`{1,1}`绝对没用，表示使用了 1 到 1 次的东西，即一次。您可以只在字符串中写入元素。

既然你已经把你的模式写得很好，你可以直接从它构建正则表达式：

```
runner_(-1|[0-9]|0+[0-9]|0*1[0123])_([0-9]|0+[0-9]|0*1[0-9]|20)\.png 
```

基本上只是为您范围内的所有数字编写模式。

编辑以逃避点。再次编辑以允许前导零。

# android - Fragment android:fragment 无法实例化片段

> ID：14381121
> 
> 赞同：6
> 
> 时间：2013-01-17T14:22:18.047
> 
> 标签：android

我有问题：

```
android.app.Fragment$InstantiationException: Unable to instantiate fragment ${packageName}.${activityClass}$GeneralPreferenceFragment 
```

xml布局不起作用：

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >

<!-- These settings headers are only used on tablets. -->

<header
    android:fragment="${packageName}.${activityClass}$GeneralPreferenceFragment"
    android:title="@string/pref_header_general" /> 
```

这虽然有效：

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >

<!-- These settings headers are only used on tablets. -->

<header
    android:fragment="com.example.b.SettingsActivity$GeneralPreferenceFragment"
    android:title="@string/pref_header_general" /> 
```

知道为什么吗？谢谢！

示例来自从 Android Eclipse 创建新项目时的 SettingsActivty，它仅在平板电脑大小的 AVD 上中断。

将此添加到 AndroidManifest：

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T22:04:07.813

它不起作用，因为`${packageName}`应该`${activityClass}`用您的包和活动替换。

你现在正在做。从文档中检查此[示例。](http://developer.android.com/guide/components/fragments.html#Example)

# windows-services - 在窗口 7 中将 exe 作为服务打开，但没有“交互式服务检测”消息

> ID：14381127
> 
> 赞同：2
> 
> 时间：2013-01-17T14:22:37.740
> 
> 标签：windows-services, exe

我有一个简单的应用程序，可以监视文件夹中的任何更改，如下所示：

```
 private void Form1_Load(object sender, EventArgs e)

>         {
>             FileSystemWatcher w = new FileSystemWatcher();
>             w.Path = @"C:\temp";
>             w.Changed += new FileSystemEventHandler(OnChanged);
>             w.Created += new FileSystemEventHandler(OnChanged);
>             w.Deleted += new FileSystemEventHandler(OnChanged);
>             w.Renamed += new RenamedEventHandler(OnChanged);
>             // Begin watching.
>             w.EnableRaisingEvents = true; 
```

> ```
>  }
>     // Define the event handlers. 
>     private static void OnChanged(object source, FileSystemEventArgs e)
>     {
>         // Specify what is done when a file is changed, created, or deleted.
>         MessageBox.Show("File: " + e.FullPath + " " + e.ChangeType + Path.GetFileName(e.FullPath));
>     } 
> ```

我从命令提示符添加了与服务相同的内容

```
 sc create <service name> binPath= <path of the exe file> 
```

这在服务中添加了 exe，并在注册表中添加了条目。但是当我尝试启动服务时

```
sc start <service name> 
```

它显示了“交互式服务检测”消息。

我想避免此消息弹出并启动服务。我也需要在 c# 中完成此操作，但如果有人对在 cmd 中执行此操作有任何想法，我可以将其添加为批处理文件并执行相同操作。

**编辑我**

正如@Seva 建议的那样，我创建了一个调用我希望的 exe 的服务。我编写了以下代码以在服务启动时启动 exe：

```
 protected override void OnStart(string[] args)
    {

        base.OnStart(args);
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        bw.RunWorkerAsync();

    }
    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        p.StartInfo.CreateNoWindow = false;
        p.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
        p.StartInfo.WorkingDirectory = @"<my exe path>";
        p.StartInfo.FileName = "<myexe.exe>";
        p.StartInfo.Arguments = @"<my exe path>";
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        p.Start();
        p.WaitForExit();
        base.Stop();
    } 
```

我成功安装了服务，但在启动时没有启动 exe。

**编辑二**

exe启动。必须将服务的属性配置为允许服务与桌面交互，但随后又出现“交互服务检测”消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:29:06.083

您必须将 Windows 服务重新架构为两部分——一个无 GUI 的服务进程和一个在用户桌面上运行的单独的 UI 应用程序。服务可以通过多种方式与 UI 应用程序进行通信。这些 SO 问题将帮助您入门：

*   [GUI和windows服务通信](https://stackoverflow.com/questions/1773046/gui-and-windows-service-communication)
*   [Windows 服务和桌面应用程序之间的通信](https://stackoverflow.com/questions/7791471/communication-between-windows-service-and-desktop-app)

没有其他办法。顺便说一句，您现有的方法已经被打破了——对于非管理员用户和远程桌面会话——即使他们愿意，他们也不会看到来自服务的 UI。

# asp.net-mvc-4 - 禁用迁移 EntityFramework 5

> ID：14381135
> 
> 赞同：2
> 
> 时间：2013-01-17T14:23:07.613
> 
> 标签：asp.net-mvc-4, entity-framework-5

如何完全禁用 EntityFramework 的迁移？我的意思是，当您几乎准备好使用您的网络应用程序时，最好的做法是什么？我担心一些自动脚本会重置我的数据库:)

非常感谢，大卫

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T12:57:48.417

迁移通常用于开发数据库。对于生产，我建议您改为使用 Update-Database -Script 命令导出 SQL 脚本，然后当您需要更新它时，可以在您的实时数据库上运行该脚本。让您的开发应用程序指向实时数据库并直接运行迁移是很危险的。

# c++ - Eclipse：无法解析函数“to_string”

> ID：14381137
> 
> 赞同：14
> 
> 时间：2013-01-17T14:23:19.993
> 
> 标签：c++, eclipse, c++11, eclipse-cdt

> **可能重复：**
> [关闭 Eclipse 错误（这不是真正的错误）](https://stackoverflow.com/questions/14131939/turn-off-eclipse-errors-that-arent-really-errors)

我正面临这个烦人的问题：Eclipse 拒绝识别该`std::to_string`函数，但我的程序编译时没有错误。我错过了什么？

根据[cppreference](http://en.cppreference.com/w/cpp/string/basic_string/to_string)该`std::to_string`函数是在 中定义的`<string>`，因此我将其明确包含在犯罪`.cpp`文件中。我也试过[这个](https://stackoverflow.com/questions/7966976/eclipse-indigo-cdt-function-could-not-be-resolved/10648555#10648555)，[这个](https://stackoverflow.com/questions/7966976/eclipse-indigo-cdt-function-could-not-be-resolved/12632249#12632249)和[这个](https://stackoverflow.com/questions/8148235/eclipse-cdt-shows-semantic-errors-but-compilation-is-ok/10081040#10081040)解决方案，但没有运气。

还有其他建议吗？

编辑：

我在 Linux 下使用 g++ 4.7.2。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-17T14:41:25.817

**更新：** 自从我发布原始答案以来已经很长时间了，它已经过时了。我今天（2014 年 3 月 15 日）仔细检查了：在 Eclipse Kepler（内部版本号 20130614-0229）中，足以

*   在*Project > Properties > C/C++ Build > Settings*然后在*Tool Settings*选项卡 上添加*GCC C++ Compiler > Miscellaneous*`-std=c++11`标志，

*   然后在*Window > Preferences > C/C++ > Build > Settings*在*Discovery*选项卡上选择*CDT GCC Built-in Compiler Settings*并将`-std=c++11`标志添加到*Command 以获取编译器规格*。在我的机器上，更改后它看起来像这样：

    `${COMMAND} -E -P -v -dD -std=c++11 "${INPUTS}"`

*   清理并重建您的项目**和**索引（*Project > C/C++ Index > Rebuild*），因为 Eclipse 倾向于缓存错误消息并显示它们，即使它们在更改设置后消失了。

**这肯定适用于我的机器。**如果它不在你的身上，那么你可能想试一试：[C++11 full support on Eclipse](https://stackoverflow.com/q/22074724/341970)虽然我不确定这种方法的正确性，也没有必要在我的机器上这样做。截至 2014 年 3 月 7 日，用户[声称](https://stackoverflow.com/questions/22074724/c11-full-support-on-eclipse#comment33807529_22074724)它对他们有帮助，而上述方法没有。

* * *

[原来的帖子，现在已经过时了：]

 ~~看来您遇到了 Codan 的常见问题，请[在此处查看我的答案](https://stackoverflow.com/a/14135232/341970)。

* * *

*代码如何*编译并不是 100% 清楚的。在 Eclipse 中？或者从命令行，正确设置标志？所以以防万一：

您正在使用 C++11 函数。您是否将`-std=c++0x`或`-std=c++11`标志传递给编译器（假设 gcc）？

您可能还必须添加`__GXX_EXPERIMENTAL_CXX0X__`到您的定义（再次假设 gcc）并重新启动 Eclipse。

 ~~* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T15:59:45.323

在我的情况下，eclipse 认为`__cplusplus`被定义为，`199711L`但我很确定这应该被定义为类似的东西，`201103L`因为`libstdc++ v3`使用

```
#if __cplusplus < 201103L
# include <bits/c++0x_warning.h>
#else 
```

在大多数新的 C++11 头文件中`<future>`，例如. 虽然在编译时我绝对没有错误。这种奇怪的行为显然使 Eclipse 感到困惑，并使其无法正确地对包含的文件进行措辞。`basic_string.h``<string>``g++ (Built by MinGW-builds project) 4.8.0 20121225 (experimental)`

在包含 C++11 文件之前定义`__cplusplus`一些东西`201103L`应该可以修复虚假的 Eclipse 语法错误，例如`Symbol 'shared_ptr' could not be resolved`.

```
#undef __cplusplus
#define __cplusplus 201900L 
```

重新定义后，您需要右键单击项目`Index -> Rebuild & Freshen all files`，或者更好地重新启动 Eclipse。~~~~

# html - classes falling out of divs

> ID：14381138
> 
> 赞同：0
> 
> 时间：2013-01-17T14:23:20.110
> 
> 标签：html, css, css-float

Sometimes even the most simplest of things can seem impossible... have a look at this if maybe you see what I dont.

[>> LINK](http://33tpm.com/divproblem)

A div (in green) that is divided using classes into to two sides L and R.

For some reason the classes "left-content, right-content" do not want to stay inside the "examples" div.

```
#examples 
{
width:100%;
margin-bottom:45%;
padding-top:10%;
height:auto;
border-top: dashed #CCC 1px;
background-color:#0FC
}

.resize 
{
width:100%; 
height:auto; 
border: solid #CCC 1px;
}

.left-content
{
float:left;
width:60%;
}

.right-content
{
float:right;
width:30%;
padding-left:5%;
}

.title
{
margin-top:0px;
font-family: 'PT Sans Narrow', Arial, sans-serif; font-size: 1.00em; font-weight:300;     letter-spacing: 0.1em; color:#F63
}   

.content
{
font-family: 'PT Sans Narrow', Arial, sans-serif;font-size: 0.80em; font-weight:300; color:#444; text-justify:newspaper
}

.goto, .goto a, .goto a:hover, .goto a:visited
{
margin-top:-5px; font-family: 'PT Sans Narrow', Arial, sans-serif;font-size: 0.95em; font-weight:300; color:#09F; text-decoration:none; letter-spacing: 0.1em;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:26:42.307

If you float elements, the parent element can have a hard time finding out how big they are.

We usually fix this using a so called "clearfix". It's an extra element you append to your DOM after your floated elements. These will allow your parent element to find the size of the inner content.

**HTML**

```
<div class="left"></div>
<div class="right"></div>

<div class="clear"></div> 
```

**CSS**

```
div.clear { clear: both; } 
```

There are other ways to solve this by setting the `clear: both` property on your parent, or setting a height. But I usually use this and it works very well for me ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:26:49.423

That's because the children are floating. Add a div with css `clear:both` beneath the floating children or add `overflow: hidden;` on the parent box.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:28:03.677

add

```
 overflow: hidden; 
```

to #examples

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:26:56.213

You need a `clear: both;` rule on your container div.

Also consider a clearfix like this one: [http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T14:29:59.470

```
#examples 
{
    display:table;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T14:32:33.207

Floated elements are removed from the regular flow. Therefore, the parent container can't calculate the height of the content. To fix this, we need to clear the floats, which essentially means it will be put back into the flow.

Nicholas Gallagher has made a neat little clearfix trick. Basically, you simply add the class to the parent element, and all containing floats will be cleared.

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

```
 /**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

# php - 将 3 个数组合并为一个数组

> ID：14381139
> 
> 赞同：0
> 
> 时间：2013-01-17T14:23:21.597
> 
> 标签：php, arrays

我有以下数组：

```
$front = array("front_first","front_second");
$inside = array("inside_first", "inside_second", "inside_third");
$back = array("back_first", "back_second", "back_third","back_fourth"); 
```

我需要做的是组合它，以便在上述情况下输出看起来像这样。输出顺序总是将它们按顺序排列`back, front, inside`：

```
$final = array(
"back_first",
"front_first",
"inside_first",
"back_second",
"front_second",
"inside_second",
"back_third",
"front_second",
"inside_third",
"back_fourth",
"front_second",
"inside_third"
); 
```

所以基本上它会查看三个数组，无论哪个数组的值较少，它将多次重用最后一个值，直到它循环遍历较长数组中的剩余键。

有没有办法做到这一点？我被难住了/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:41:53.737

```
$front = array("front_first","front_second");
$inside = array("inside_first", "inside_second", "inside_third");
$back = array("back_first", "back_second", "back_third","back_fourth");

function foo() {
  $args = func_get_args();
  $max = max(array_map('sizeof', $args)); // credits to hakre ;)
  $result = array();

  for ($i = 0; $i < $max; $i += 1) {
    foreach ($args as $arg) {
      $result[] = isset($arg[$i]) ? $arg[$i] : end($arg); 
    }    
  }

  return $result;
}

$final = foo($back, $front, $inside);
print_r($final); 
```

演示：[http ://codepad.viper-7.com/RFmGYW](http://codepad.viper-7.com/RFmGYW)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:41:09.917

**演示**

[http://codepad.viper-7.com/xpwGha](http://codepad.viper-7.com/xpwGha)

**PHP**

```
$front = array("front_first", "front_second");
$inside = array("inside_first", "inside_second", "inside_third");
$back = array("back_first", "back_second", "back_third", "back_fourth");

$combined = array_map("callback", $back, $front, $inside);

$lastf = "";
$lasti = "";
$lastb = "";

function callback($arrb, $arrf, $arri) {
    global $lastf, $lasti, $lastb;

    $lastf = isset($arrf) ? $arrf : $lastf;
    $lasti = isset($arri) ? $arri : $lasti;
    $lastb = isset($arrb) ? $arrb : $lastb;

    return array($lastb, $lastf, $lasti);
}

$final = array();

foreach ($combined as $k => $v) {
    $final = array_merge($final, $v);
}

print_r($final); 
```

**输出**

```
Array
(
    [0] => back_first
    [1] => front_first
    [2] => inside_first
    [3] => back_second
    [4] => front_second
    [5] => inside_second
    [6] => back_third
    [7] => front_second
    [8] => inside_third
    [9] => back_fourth
    [10] => front_second
    [11] => inside_third
) 
```

# spring - 我想在jsp中使用内联验证功能

> ID：14381143
> 
> 赞同：0
> 
> 时间：2013-01-17T14:23:29.997
> 
> 标签：spring, jsp

听到是代码

```
<spring:form modelAttribute="commonBean" action="saveStock.htm">
<div class="content" align="center">
            <div class="box"><br>
                <h1>
        <spring:label path=""> Stock  Entry</spring:label>

                </h1><br><hr>
        <table>

    <tr>
    <th align='left'><spring:label path="">Item Name: </spring:label>
                    </th>
    <td colspan='5'><spring:input path="" ></spring:input>
        <span style="font-style: italic;color: red;">
        <spring:errors path="" id="iname" onkeyup="iname()">
        <img src="green.png" class="def" id="iname_true"/>
    <img src="cross.png" class="def" id="iname_false"/>
         </spring:errors></span>
    </td>

       </tr> 
```

及其给出的错误

HTTP 错误：500

/WEB-INF/jsp/corefiles/stock.jsp(19,22) PWC6239：根据 TLD，标签 spring:input 必须为空，但不是

请有人建议我如何实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:28:11.873

Change:

```
<spring:input path="" ></spring:input> 
```

to:

```
<spring:input path="CommonBeanPropertyName" /> 
```

You have to set a path, so that Spring will be able to bind the input field to the corresponding bean property.

Have a look to the [documentation](http://static.springsource.org/spring/docs/2.5.5/reference/spring-form.tld.html#spring-form.tld.input) .

# java - ANTLRWorks 生成 Parser 声明 throws 但在 java 文件中没有其他内容

> ID：14381146
> 
> 赞同：2
> 
> 时间：2013-01-17T14:23:35.107
> 
> 标签：java, antlr, antlrworks

我刚开始研究`ANTLR`，并注意到`ANTLRWorks 1.5`生成了 Java 解析器文件，但抛出声明不完整。

**语法文件：**

```
grammar ASTDemo;

options { 
  output=AST; 
}

parse
    :   orexpr+
    |   andexpr+
    |   TAG ' ' parens
    |   TAG (parens andexpr)+
    |   together+
    ;

parens
    :   '(' TAG ')';

andexpr
    :   TAG (AND^ TAG)+;    

orexpr
    :   '[' TAG (OR^ TAG)+ ']';

together
    :   TAG (' '^ TAG)*
    ;

TAG     : ('FOO' | 'BAR');
OR  :   '|';
AND :   ': ';
WS  :   (' ')+; 
```

这是包含不完整 throws 语句的示例行

```
public final ASTDemoParser.parse_return parse() throws  { 
```

当前用于启动的 JDK 版本`ANTLRWorks`是 1.6x 以前有人见过吗？

不幸的是，这个编译错误`ANTLRWorks`不允许我在其中调试我的语法。每次我想测试时，我都被迫手动修复文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:34:00.640

我刚刚使用`ANTLRWorks 1.5 rc1`and编译了你的语法`JDK 1.7.0.11`。

所有编译良好，并且提到的代码行如下所示：

`public final ASTDemoParser.parse_return parse() throws RecognitionException {`

它可能是任意的错误表现。尝试再次重新编译它，可能你已经尝试使用`JDK 1.7`.

# java - 带有 vaadin 7 的嵌入式码头

> ID：14381147
> 
> 赞同：1
> 
> 时间：2013-01-17T14:23:38.423
> 
> 标签：java, clojure, vaadin

我正在尝试为 vaadin 7 设置 clojure 环境。使用 vaadin 6，我可以使用`AbstractApplicationServlet`它提供应用程序类。然后我可以在 clojure repl`(use 'foo.bar.core :reload) (restart)`中立即重新加载 servlet（无需等待重新编译/重新打包/等待 jvm 启动）。

我现在正尝试对 Vaadin 7 做同样的事情。[从 Vaadin 6 迁移到 7](https://vaadin.com/wiki/-/wiki/Main/Migrating+from+Vaadin+6+to+Vaadin+7)中的迁移指南提到`AbstractApplicationServlet`已被替换为`VaadinServlet`. `VaadinServlet`但是没有提供类似的钩子来提供默认`UI`类。如何在 vaadin 7 中使用嵌入式码头？

# ios - 如何从一个选项卡切换到另一个选项卡并返回？

> ID：14381148
> 
> 赞同：1
> 
> 时间：2013-01-17T14:23:40.353
> 
> 标签：ios, xcode, uinavigationcontroller, interface-builder, uitabbarcontroller

我在浏览我的视图时遇到了一点问题。这是我的配置：我有 1 个 Tabbar 控制器，其中包含 2 个关系 segues 到嵌入在导航控制器中的 2 个简单视图。现在我想从视图控制器 1 导航到视图控制器 3，并且我还想显示在选项卡栏中选择的正确选项卡。如果我来自视图控制器 1，我还希望后退按钮将我重定向到上一个选项卡。我尝试了在这些视图之间连接 segue 的东西，但如果我这样做，它只会将视图控制器推送到导航堆栈上，但不会更改选项卡。所以我现在的问题是，管理这个问题的最佳方法是什么

截屏：

![在此处输入图像描述](../Images/9f00c9145ded3504bdce6c3bf293f0cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:44:17.010

这是一种方法。但我发布这个真的是为了说明为什么你*不应该这样*做。

*   我正在使用 VC2 和 VC3 的视图标记属性来传递导航数据，这具有紧密耦合所有三个对象的效果。
*   我覆盖了 VC1->VC3 上下文的后退栏按钮。你失去了一致性。
*   VC3->VC2 提供后退动画。VC3->VC1 没有动画，因为它从一个选项卡翻转到另一个选项卡。更多的不一致
*   VC1->VC3，点击选项卡项 2 转换到 VC2。用户界面混乱。

无论如何，如果你*仍然*想这样做......

**ViewController1**
有一个“跳转到 VC3”按钮，连接到 jumpToVC3：

```
 //ViewController1.m

#import "ViewController1.h"

@implementation ViewController1

- (IBAction)jumpToVC3:(id)sender {
    NSArray* viewArray = [[[self.tabBarController viewControllers] objectAtIndex:1] viewControllers];
    [[[viewArray lastObject] view] setTag:1];
    [self.tabBarController setSelectedIndex:1];
}
@end 
```

“jumptToVC3”将我们切换到选项卡 2 并将最前面的视图的视图标记属性设置为 1。如果最前面的视图是 VC2，这会立即触发到 VC3 的转场。如果最前面的视图是 VC3，这将正确设置后退按钮。如果其他视图控制器被添加到此堆栈中，此导航将中断。

**ViewController2**
有一个“移动到 VC3”按钮，连接到情节提要到 VC3 “toVC3”

```
 //  ViewController2.m

#import "ViewController2.h"
#import "ViewController3.h"

@implementation ViewController2

    //we use the view.tag property as a switch:
    //0 = do nothing
    //1 = segue to VC3
    //2 = go to tab 0  

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    if (self.view.tag ==1){
        [self performSegueWithIdentifier:@"toVC3" sender:self];
    } else if (self.view.tag == 2){
        [self.tabBarController setSelectedIndex:0];
    }
    self.view.tag = 0;
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if (self.view.tag ==1) {
        [[segue.destinationViewController view] setTag:1];
    } else {
        [[segue.destinationViewController view] setTag:0];
    }
    self.view.tag = 0;
}

- (void) viewWillDisappear:(BOOL)animated
{
    self.view.tag = 0;
}

@end 
```

**ViewController3**
如果 view.tag 设置为 1，则覆盖后退按钮。如果您希望两个上下文的后退按钮保持一致，则还需要覆盖默认行为。您将无法获得标准的后退按钮来查找此覆盖行为。

```
 //  ViewController3.m

#import "ViewController3.h"

@implementation ViewController3

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    if (self.view.tag == 1) {
        self.navigationItem.leftBarButtonItem =
        [[UIBarButtonItem alloc] initWithTitle:@"0.0"
                                         style:UIBarButtonItemStyleBordered
                                        target:self
                                        action:@selector(goBack:)];
    }
    self.view.tag = 0;
}

- (IBAction)goBack:(id)sender {
    [[[[self.navigationController viewControllers]
       objectAtIndex:0] view] setTag:2];
        [self.navigationController popToRootViewControllerAnimated:YES];
}
@end 
```

# sql-server-2008 - SQL Server - 查找收取最高罚款的成员（基于以下情况）

> ID：14381151
> 
> 赞同：0
> 
> 时间：2013-01-17T14:23:48.330
> 
> 标签：sql-server-2008

我有一个场景，其中有 2 个表 tblMember 有 2 列 MemberID 和 MemberName

```
100  Aakash
101  Seema 
```

tblLoanHistory 列 LoanID、MemberID、FineCharged

```
1   100   30
2   100   60
3   101   30 
```

我想找到总罚款最高的会员。

输出应该是

```
100   Aakash   90   (60+30=90) 
```

有人可以帮忙吗

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:27:28.593

```
SELECT TOP 1
   M.MemberID, M.MemberName,
   SUM(LH.FineCharged)
FROM
   tblMember  M
   JOIN
   tblLoanHistory LH ON LH.MemberID=M.MemberID 
GROUP BY
   M.MemberID, M.MemberName
ORDER BY
   SUM(LH.FineCharged) DESC 
```

更新...哎呀！添加了 JOIN 条件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:47:49.117

```
SELECT M.MemberID ,M.MemberName,SUM(LH.FineCharged) FineCharged
FROM tblMember M
INNER JOIN tblLoanHistory LH ON LH.MemberID=M.MemberID 
GROUP BY M.MemberID, M.MemberName 
```

# android - Android AlarmManager 随机调度通知？

> ID：14381165
> 
> 赞同：2
> 
> 时间：2013-01-17T14:24:21.783
> 
> 标签：android, notificationmanager

我正在尝试创建一个在状态栏中弹出提醒的提醒应用程序。据我了解，Android NotificationManager 是用于安排通知的标准工具，但是需要一个 BootService 来重新安排通知，因为安排的事件不会在引导后继续存在。

我拼凑了一个应用程序，它在启动时安排一个提醒，并在状态栏中弹出一个通知。如果您单击通知，它会启动 MainActivity，它在未来将具有添加更多提醒、删除提醒或其他任何选项的选项。

我遇到的问题是提醒第一次正常工作但是它似乎正在重新安排自己并由于某种原因随机再次弹出。我应该启动另一项活动而不是安装 BootAlarmService 的活动吗？

**更新：** 所以我想我在 logcat 中找到了一些线索。显然，服务正在崩溃并被重新启动，这正在重置通知。任何想法为什么会这样？

**更新二：**代码更改为工作模型

```
ActivityManager   I  No longer want com.example.alarm_boot_test (pid 1428): hidden #16
ActivityManager   W  Scheduling restart of crashed service com.example.alarm_boot_test/.BootAlarmService in 5000ms
ActivityManager   W  Scheduling restart of crashed service com.example.alarm_boot_test/.NotificationAlarmService in 15000ms
ActivityManager   I  Start proc com.example.alarm_boot_test for service com.example.alarm_boot_test/.BootAlarmService: pid=2321 uid=10069 gids={}
       dalvikvm   D  Debugger has detached; object registry had 1 entries
        szipinf   D  Initializing inflate state
BootAlarmService  D  oncreate()
BootAlarmService  D  alarm set for Thu Jan 17 08:03:00 CST 2013 
```

*MainActivity.java*

```
package com.example.alarm_boot_test;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity
{

    @Override
    protected void onCreate (Bundle savedInstanceState)
    {
        super.onCreate (savedInstanceState);
        setContentView (R.layout.activity_main);
    }

} 
```

*BootAlarmService.java*

```
package com.example.alarm_boot_test;

import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class BootAlarmService extends Service
{
    private final String TAG = this.getClass ().getName ();

    @Override
    public void onCreate ()
    {
        Log.d (TAG, "oncreate()");
        super.onCreate ();
    }

   @Override
   public int onStartCommand (Intent intent, int flags, int startId)
   {
       Log.d (TAG, "alarm_test: BootAlarmService.onStartCommand() Received start id " + startId + ": " + intent);

       // if intent == null, service has been killed/restarted by system
       if (intent != null)
        createNotificationOnBoot();
       else
        Toast.makeText (getBaseContext (), "Intent was null in BootAlarmService.", Toast.LENGTH_LONG).show();

       return START_STICKY;
    }

    private void createNotificationOnBoot ()
    {
        Intent inotify = new Intent(this , NotificationAlarmService.class);
        inotify.setFlags (Intent.FLAG_ACTIVITY_NEW_TASK);
        AlarmManager amgr = (AlarmManager)getSystemService(ALARM_SERVICE);
        PendingIntent pendingIntent = PendingIntent.getService(this, 0, inotify, 0);

        // go off two mins from now
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MINUTE, calendar.get (Calendar.MINUTE) + 2);

        amgr.set (AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis (), pendingIntent);

        Log.d (TAG, "alarm set for " + calendar.getTime ().toString ());
    }

    @Override
    public IBinder onBind (Intent intent)
    {
        return null;
    }

} 
```

*BootReceiver.java*

```
package com.example.alarm_boot_test;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class BootReceiver extends BroadcastReceiver
{

    @Override
    public void onReceive (final Context context, final Intent bootintent)
    {
        Intent i = new Intent ();
        i.setAction ("com.example.alarm_boot_test.BootAlarmService");
        context.startService (i);
    }

} 
```

*NotificationAlarmService.java*

```
package com.example.alarm_boot_test;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class NotificationAlarmService extends Service
{
    private final String TAG = this.getClass().getName ();

    @Override
    public void onCreate ()
    {
        super.onCreate ();
    }

    @Override
    public int onStartCommand (Intent intent, int flags, int startId)
    {
       Log.d (TAG, "alarm_test: NotificationAlarmService.onStartCommand()");
       if (intent != null)
          createNotification ();
       else
          Toast.makeText (getBaseContext (), "Intent was null in NotificationAlarmService.", Toast.LENGTH_LONG).show();

       return super.onStartCommand (intent, flags, startId);
     }

    private void createNotification()
    {
      NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
      Notification notification = new Notification(android.R.drawable.stat_sys_warning, "Note from AlarmService", System.currentTimeMillis());
      Intent i = new Intent(this, ViewReminder.class);
      PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, i, 0);

      notification.setLatestEventInfo(this, "New Notification", "You have been notified by AlarmService", pendingIntent);
      notificationManager.notify(10001, notification);

   }

    @Override
   public IBinder onBind (Intent intent)
   {
       return null;
   }
} 
```

*activity_main.xml*

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Service started! Reboot!" />

</RelativeLayout> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.alarm_boot_test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="9" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <service android:name="com.example.alarm_boot_test.BootAlarmService" >
            <intent-filter>
                <action android:name="com.example.alarm_boot_test.BootAlarmService" >
                </action>
            </intent-filter>
        </service>

        <receiver android:name="com.example.alarm_boot_test.BootReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" >
                </action>
            </intent-filter>
        </receiver>

        <service android:name="com.example.alarm_boot_test.NotificationAlarmService" >
        </service>

        <activity
            android:name="com.example.alarm_boot_test.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:59:15.610

如果它对其他人有帮助，我想我需要在 BootAlarmService.java 和 NotificationAlarmService.java 的 onStartCommand() 方法中检查传递的 Intent 是否为 NULL。仅对其进行了几天的测试，但如果系统终止/重新启动服务，则 Intent 似乎为 NULL。对此的简单测试允许我仅在启动时启动服务时创建通知（当传递的 Intent 不为空时）。

# iphone - Windows questino re native api 上用于 iphone 开发的 Phonegap

> ID：14381170
> 
> 赞同：0
> 
> 时间：2013-01-17T14:24:45.497
> 
> 标签：iphone, cordova

我花了一天时间在 Windows 上搜索所有关于开发 iphone 应用程序的线索，除了购买 Mac 之外，最合适的路线似乎是 Phonegap。我无法确定 Phonegap 是否可以访问所有本机功能。例如，我想访问和操作通讯录内容。我还希望能够以编程方式发送短信并拦截和检查传入的短信。如果有人可以确认这是否可以通过 Phonegap 完成，那将会很有帮助。

我的理解是 Phonegap 基于 webapps，但我假设使用它开发的应用程序可以离线运行，以进行不需要互联网访问的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:42:34.527

即使使用 Phonegap，您仍然需要访问 Mac 才能真正构建您的 iOS 应用程序。这是 Apple 的限制，据我所知，没有办法绕过它。

Phonegap 使用 UIWebView 来显示使用 HTML、CSS、Javascript 等构建的应用程序，但这并不意味着应用程序需要 Internet 连接才能运行（因此绝对可以使用离线应用程序）。

关于 Phonegap 的功能，可以在他们的网站上找到 Phonegap API 的详细信息。具体到您的需求，我相信 phonegap 通过联系人 API 提供对设备通讯录的访问：

[http://docs.phonegap.com/en/2.3.0/cordova_contacts_contacts.md.html#Contacts](http://docs.phonegap.com/en/2.3.0/cordova_contacts_contacts.md.html#Contacts)

我不认为Phonegap 本身提供发送SMS 消息的能力，但是许多人已经开发了扩展以通过插件向他们的应用程序添加额外的功能。大多数 Phonegap iOS 插件可以在以下 GitHub 存储库中找到。我认为您需要的插件是 SMSComposer：

[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/SMSComposer](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/SMSComposer)

# prolog - Prolog - 将咨询（'文件名'）重新加载到解释器

> ID：14381174
> 
> 赞同：3
> 
> 时间：2013-01-17T14:24:49.413
> 
> 标签：prolog, swi-prolog

在我将**pl**文件加载到**SWI-Prolog**之后，`consult('filename')` 如何使用键盘重新加载它？我读到它可能，`ctr b`但它不起作用。

我使用 SWI-Prolog 版本 6.2.6 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:21:40.657

调用预定义的`make/0`谓词。它将重新加载所有更改的源文件。

```
?- make. 
```

更多信息在这里：[http ://www.swi-prolog.org/pldoc/man?predicate=make/0](http://www.swi-prolog.org/pldoc/man?predicate=make/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:23:37.623

SWI-prolog中的consult/1实际上定义为reconsult/1

但 make 更漂亮。

# javascript - 查找具有没有 id 和类的 textvalue 的 b 标签的父级

> ID：14381177
> 
> 赞同：1
> 
> 时间：2013-01-17T14:24:52.940
> 
> 标签：javascript, jquery, html

这是我的代码：

```
<div templateid="asd">
   <b>SEND</b>
</div> 
```

我正在尝试获取具有 b 标记文本作为 SEND 的父 div。然后将另一个 DOM 绑定到父 div。我不能将 id 类或任何其他属性提供给上面的标记作为我正在尝试的外部 Web 应用程序集成我们的应用程序。

我尝试的是：

```
 $('div').find('b[html="SEND"]');
 $('div').find('b[text="SEND"]'); 
```

任何帮助，将不胜感激。

感谢您的光临...！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:27:31.290

你可以试试

```
$("b:contains('SEND')").parent() 
```

或者是每个人的答案的混合：

```
$('b').filter(':contains("SEND")').closest('div') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:30:37.090

您可以像这样使用“包含”：

```
$("b:contains('SEND')").closest('div') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:36:29.593

使用**[过滤器](http://api.jquery.com/filter/)**

`$('div').find('b').filter(':contains("SEND")').parent();`

# magento - Magento 选择字段禁用相关产品中的行

> ID：14381179
> 
> 赞同：2
> 
> 时间：2013-01-17T14:24:58.643
> 
> 标签：magento, grid, adminhtml

我添加了一个功能类似于相关产品的选项卡，我添加了一个带有如下下拉列表的列：

```
$this->addColumn('mycolumn', array(
        'name' => 'mycolumn',
        'header' => Mage::helper('catalog')->__('Display on current child page'),
        'index' => 'mycolumn',
        'type' => 'select',
        'width' => '1',
        'align' => 'center',
        'options' => array(
        1 => Mage::helper('catalog')->__('Yes'),
        0 => Mage::helper('catalog')->__('No'),
    ),
        'editable' => true
    )); 
```

每次我更改选择时，我的产品都会被取消选中并且该行被禁用。

我发现这一行在 magento 中有注释：

```
 bindFieldsChange : function(){
        if (!$(this.containerId)) {
            return;
        }
 --->  //     var dataElements = $(this.containerId+this.tableSufix).down('.data tbody').select('input', 'select');
        var dataElements = $(this.containerId+this.tableSufix).down('tbody').select('input', 'select');
        for(var i=0; i<dataElements.length;i++){
            Event.observe(dataElements[i], 'change', dataElements[i].setHasChanges.bind(dataElements[i]));
        }
    } 
```

我在 js/mage/adminhtml/grid.js 中找到了这段代码。当我取消注释这条线时，我的下拉菜单就像一个魅力......

我有两个关于这个问题的问题，第一个问题是取消注释是否安全（Magento 一定有理由改变这个）。

我的第二个问题是如何在不调整 grid.js 文件的情况下避免这种行为。我不喜欢以任何方式编辑核心文件，但无法弄清楚如何重写此功能或如何以行为不适用的方式添加我的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T15:32:48.777

行点击事件使用一个名为“openGridRow”的函数

在您的网格中包含一些 javascript，并使用一些自定义代码添加此函数以在满足某些条件时取消事件。然后将复选框设置回选中状态。

示例将是

```
function openGridRow(grid, event){
                var element = Event.findElement(event, 'tr');
                //alert(Event.element(event).tagName.toLowerCase());
                if(Event.element(event).type != 'checkbox'){
                  if(['img', 'a', 'input', 'select', 'option', 'img'].indexOf(Event.element(event).tagName.toLowerCase())!=-1) {
                      // re-enable the checkbox
                      var checkbox = Element.select(element, 'input');
                      if(checkbox[0] && !checkbox[0].disabled){
                          grid.setCheckboxChecked(checkbox[0], true);
                      }
                      return;
                  }
                }
                if(element.title){
                    setLocation(element.title);
                }
    } 
```

上面的例子什么都不做，如果点击的元素类型是 a、input、select 或 option 其他任何东西都会照常继续。

# c++ - 如何检查没有填充的结构的大小？

> ID：14381180
> 
> 赞同：8
> 
> 时间：2013-01-17T14:24:59.217
> 
> 标签：c++, c, gcc

假设我有一个结构：

```
struct A {
  uint16_t a;
  uint64_t b;
}; 
```

有没有办法获得 A w/o padding 的大小？ie：所有成员的sizeof之和（即使它不是递归的）。

通常`sizeof(A) == 16.` 我愿意`__GCC_sizeof__(A) == 10`。

我希望它在一个不影响实际代码的测试代码中，这意味着结构定义中没有`"#pragma"`s 和 no `"__attribute__"`。（虽然可以用 来完成`#ifdef TEST`，但是很丑）。

它不必是便携式的，`GCC`就足够了。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:34:53.000

我认为`sizeof(A::a) + sizeof(A::b)`应该为您解决问题。没有办法获得结构的未填充大小，因为这样的大小可以为程序服务的目的是什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:41:24.270

> 目的是能够从测试内部跟踪新添加的结构成员。

如果你先问这个会更好......

答案是肯定的，有办法，但不是靠`#include`文件；您应该使用能够获取 AST/ABT 结构并列出字段然后将其与预先注册的列表进行比较的东西。例如，Clang 可以做到这一点。

* * *

但是现在，让我们更进一步。你为什么要测试它？它很脆！

最好测试一下*功能*，隐藏的东西是有原因的。

如果每个功能都经过正确测试，那么只要测试通过，您是否知道字段列表就无关紧要了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T14:34:01.927

我会看看这个 Stackoverflow 响应：

[gcc 的 __attribute__((packed)) / #pragma pack 不安全吗？](https://stackoverflow.com/questions/8568432/is-gccs-attribute-packed-pragma-pack-unsafe)

并在此网站上获取 GCC 信息：

[http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html](http://gcc.gnu.org/onlinedocs/gcc/Structure_002dPacking-Pragmas.html)

如果将结构之前的编译指示设置为 1，它应该在字节边界上对齐并且是紧凑的大小，因此您可以使用 sizeof 来获取字节数。

如果只是少量结构，可以在结构声明前启用pragma，之后再禁用。

希望about对您的工作有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T15:27:10.853

在 C 语言中，您可以使用预处理器指令`#pragma`来检查`sizeof`结构而无需填充..

```
#pragma pack(1) 
```

会给你`sizeof`没有填充的结构..

# javascript - 为什么结果显示结果加上循环中的先前结果？

> ID：14381185
> 
> 赞同：0
> 
> 时间：2013-01-17T14:25:05.257
> 
> 标签：javascript, loops

我有一个图像和名称显示在一个新的 div 中。但是，我遇到了一个问题，即下次有人输入姓名和图片并按保存时，他们的 userDiv 会显示他们的姓名加上以前的用户名。例如，有两个用户：用户 1 和用户 2。当我选择所有用户并遍历结果时，名称的记录方式不同。用户 1 显示为“用户 1”，但用户 2 显示为“用户 1 用户 2”。快速浏览一下，我认为这是因为 innerHTML 从父 div 获取所有内容，但我不确定。

```
 var htmlStr="";
  var theID;
  var theName;
  var thePhoto;
  var len = results.rows.length;
  console.log(len);
    for(var i = 0; i < len; i++){
        theID = results.rows.item(i).id;
        console.log(theID);
        theName = results.rows.item(i).username;
            htmlStr += theName;
        console.log(theName);
        thePhoto = results.rows.item(i).imagepath;
        console.log(thePhoto);

        var imageHold= new Image();
        imageHold.src = thePhoto;
        console.log("this is the src:"+imageHold.src);
        var userDiv = document.createElement("div");//Create the div
        userDiv.innerHTML=htmlStr;
        userDiv.appendChild(imageHold);
        document.getElementById('showUsers').appendChild(userDiv);//append it to the document
        userDiv.style.display = 'block'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:28:22.930

`var htmlStr="";`在每次迭代的循环中删除并声明它。所以改变

```
htmlStr += theName; 
```

到

```
var htmlStr = theName; 
```

这应该可以解决您的问题

# tsql - “无效的列名” - 查询失败

> ID：14381186
> 
> 赞同：0
> 
> 时间：2013-01-17T14:25:08.060
> 
> 标签：tsql, select, failover

我有一个在特定数据库上运行的相当大的查询。此查询所做的是从特定表中选择特定列并将它们转储到新表中。稍后在查询中使用和修改新表。

我遇到的问题是，虽然数据库应该来自同一个程序，但一个数据库可能有 email1、email2 和 email3 列，但下一个可能只有 email1。因为 email1-3 用作 select 语句的一部分，所以当缺少这些列之一时，该部分将失败并且永远不会创建表。

我对此仍然很陌生，所以我的问题可能很简单或很愚蠢，但是当这样的列丢失时，有什么方法可以保存结果？我可以很容易地删除查询中缺少的列并再次运行它，但我想知道是否有更正确的方法来做到这一点？

例子：

```
SELECT  Customer.[Name], 
    Customer.AcctKey, 
    SUBSTRING(Customer.LastName,1,25) AS [Last Name], 
    SUBSTRING(Customer.FirstName,1,25) AS [First Name], 
    Customer.Add1 AS Address, 
    Customer.Add2 AS Address2, 
    Customer.City, 
    Customer.State,                 
    Customer.Zip, 
    Location.Add1 AS [Ship Address], 
    Location.Add2 AS [Ship Address2], 
    Location.City AS [Ship City], 
    Location.State AS [Ship State], 
    Location.Zip AS [Ship Zip], 
    Customer.Phone1 AS Phone, 
    Customer.Phone2 AS [Alt Phone],
    Customer.Phone3 AS [Cell Phone],
    Customer.Phone4 AS Fax, 
    Customer.lblPhone1, 
    Customer.lblPhone2, 
    Customer.lblPhone3, 
    Customer.lblPhone4, 
    Customer.Terms, 
    Customer.[Key] AS [Account Number], 
    Location.Notes, 
    Location.TaxCode AS [Tax Item], 
    Location.Zone AS [Map Code], 
    Location.Contact, 
    Location.Email, 
    Location.Email6, --Fails because column(s) Email2-6
    Location.Email5, --don't exist in this database
    Location.Email4, --but they might in another
    Location.Email3, --and I'd like to get the data
    Location.Email2, --if they do
    Location.Phone6, 
    Location.Phone5

INTO [01Parents]
FROM Customer 
INNER JOIN Location ON Customer.[Key] = Location.[Key] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:58:47.693

您可以尝试以下方法。

```
DECLARE @SQL AS NVARCHAR(MAX)

SELECT
    @SQL = COALESCE(@SQL, N'') + CASE WHEN @SQL IS NULL THEN c.name ELSE N', ' + c.name END
FROM
    sys.columns AS c INNER JOIN sys.objects AS o
        ON
            c.object_id = o.object_id
WHERE
    o.name = @table
ORDER BY
    c.column_id

SET @SQL = N'SELECT ' + @SQL +  N' INTO 01Parents FROM Customer INNER JOIN ON Customer.[Key] = Location.[Key]'

EXEC sp_executesql @sql 
```

# antlr4 - 标签 x 分配给不是集合的块

> ID：14381187
> 
> 赞同：14
> 
> 时间：2013-01-17T14:25:07.913
> 
> 标签：antlr4

尝试升级 antlr4，我在语法中有 2 行产生错误消息：

> 标签 tok 分配给不是集合的块

专门针对如下所示的语法行：

```
contextRadius: tok=('radius' 'change-authorize-nas-ip') (IP4_ADDRESS|IP6_ADDRESS) 'encrypted' 'key' ID 'port' INT_TOK 'event-timestamp-window' INT_TOK 'no-reverse-path-forward-check'
    ; 
```

这究竟意味着什么 - 成为“未设置的块”并且有通用解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T14:53:47.710

不正确的标签如下：

```
tok=('radius' 'change-authorize-nas-ip') 
```

在这种情况下，ANTLR 不知道是将令牌`'radius'`还是令牌分配`'change-authorize-nas-ip'`给 label `tok`。从 ANTLR 4 开始，不会生成语义不明确的代码，而是会产生错误。您需要删除标签`tok`或将其移动到预期的项目。换句话说，使用以下三种形式之一。

```
('radius' 'change-authorize-nas-ip')
(tok='radius' 'change-authorize-nas-ip')
('radius' tok='change-authorize-nas-ip') 
```

语法中的块上允许使用标签的原因是为了支持以下项目。这个块是一个*集合*，这意味着内容可以被折叠以匹配一组固定的允许标记中的一个标记。然后将与该集合匹配的特定项目分配给`x`。

```
x=('a' | 'b') 
```

# visual-studio - Windows Azure 存储 - 未找到表

> ID：14381194
> 
> 赞同：0
> 
> 时间：2013-01-17T14:25:21.160
> 
> 标签：visual-studio, azure, azure-storage

我正在尝试实现 Windows azure 表存储...但我得到**“找不到表”**

这是我的连接字符串（如何在这里发布我的 xml？）（对不起链接）

ServiceConfiguration.Cloud.cscfg： http: [//pastebin.com/F9tuckfT](http://pastebin.com/F9tuckfT)

ServiceConfiguration.Local.cscfg：

[http://pastebin.com/XZHEvv6g](http://pastebin.com/XZHEvv6g)

这里有一个来自我的 Windows azure 门户的打印屏幕

[http://s20.postimage.org/nz1sxq7hp/print.png](http://s20.postimage.org/nz1sxq7hp/print.png)

代码（对不起，更长的代码...但是有三页...登录有效，当我登录时，转到调用 grid.aspx 的 main.aspx ...在 grid.aspx 中我收到错误“表不是发现“所有这些代码对于这个问题都很重要.....) [http://pastebin.com/RnuvvqsM](http://pastebin.com/RnuvvqsM)

我试过了

```
private void popula()
    {
        var account = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("Conn"));
        account.CreateCloudTableClient().CreateTableIfNotExist("fiscal");
        var context = new CRUDManifestacoesEntities(account.TableEndpoint.ToString(), account.Credentials);

        Hashtable ht = (Hashtable)ViewState["filtro"];

        if (ht == null)
            GridView1.DataSource = context.SelectConc(ViewState["x"].ToString());
        else
            GridView1.DataSource = context.SelectConc(ht);

        GridView1.DataBind();
    } 
```

但它也不起作用

其他类似的错误是当我尝试在表中添加用户时

```
public string addusr(string nome, string cidade, string cpf, string email, string telefone)
    {
        try
        {
            if (nome.Length == 0)
                return "f:Preencha o campo nome.";

            if (cidade.Length == 0)
                return "f:Preencha o campo cidade.";

            if (cpf.Length == 0)
                return "f:Preencha o campo cpf.";

            if (!Valida(cpf))
                return "f:CPF Invalido.";

            if (email.Length == 0)
                return "f:Preencha o campo email.";

            Regex rg = new Regex(@"^[A-Za-z0-9](([_\.\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\.\-]?[a-zA-Z0-9]+)*)\.([A-Za-z]{2,})$");
            if (!rg.IsMatch(email))
            {
                return "f:Email Invalido";
            }

            List<UserEntity> lst = new List<UserEntity>();
            var _account = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("Conn"));
            _account.CreateCloudTableClient().CreateTableIfNotExist("fiscal");
            var _context = new CRUDUserEntities(_account.TableEndpoint.ToString(), _account.Credentials);

            var account = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("Conn"));
            account.CreateCloudTableClient().CreateTableIfNotExist("fiscal");
            var context = new CRUDUserEntities(account.TableEndpoint.ToString(), account.Credentials);
            UserClientEntity entity = new UserClientEntity() { nome = nome, cidade = cidade, cpf = cpf, email = email, telefone = telefone };
            context.ADDUSociate(entity);
            context.SaveChanges();
            return "k";
        } 
```

我收到此错误： **f：处理此请求时发生错误。| 在 System.Data.Services.Client.DataServiceContext.SaveResult.HandleBatchResponse() 在 System.Data.Services.Client.DataServiceContext.SaveResult.EndRequest() 在 System.Data.Services.Client.DataServiceContext.SaveChanges(SaveChangesOptions 选项) 在 AzureTableLayer .CRUDUserEntities.ADDUSociate(UserClientEntity entity) at mobile.Service1.addusr(String nome, String cidade, String cpf, String email, String telefone)**

我相信这两个问题是相关的

**编辑：**我已调试并发现无法加载 StorageClient 框架...我收到此错误无法加载文件或程序集 Microsoft.WindowsAzure.StorageClient, Version=1.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'

怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:59:09.787

您如何尝试使用表存储？使用 .NET SDK？php？爪哇？节点？...通常，如果您收到此错误，则意味着...该表不存在。

检查您正在使用的 SDK 是否有类似于[CreateIfNotExists](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.cloudtable.createifnotexists.aspx)的方法，以便在开始使用之前创建表。

**编辑：**

问题可能发生在这里：

```
 var account = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("Conn"));
        var context = new CRUDManifestacoesEntities(account.TableEndpoint.ToString(), account.Credentials);

        Hashtable ht = (Hashtable)ViewState["filtro"];

        if (ht == null)
            GridView1.DataSource = context.SelectConc(ViewState["x"].ToString());
        else
            GridView1.DataSource = context.SelectConc(ht); 
```

`account = ...`在 var行之后添加以下代码：

```
 account.CreateCloudTableClient().CreateTableIfNotExist("<name of your table>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:03:02.293

API 已更改。你需要这样做：

```
var key = CloudConfigurationManager.GetSetting("Setting1");
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(key);
var client = storageAccount.CreateCloudTableClient();

CloudTable table = client.GetTableReference(ContactTableName);
table.CreateIfNotExists(); 
```

# java - 在不使用模式对话框的情况下阻止 Swing 输入

> ID：14381196
> 
> 赞同：3
> 
> 时间：2013-01-17T14:25:26.923
> 
> 标签：java, swing, focus

*我想阻止对窗口的输入，但仍然可以移动它。*

如果有一个模态对话框类型允许生成它的窗口移动，那么我会很高兴。

假设我有一个窗口可以打开另一个窗口。然后第二个窗口打开一个模式对话框，它阻止输入到其他两个窗口（很好），但也将这两个窗口锁定在适当的位置（为什么 - Amigas 没有这样做:)？）。

我的问题是我可能需要在第一个窗口中直观地阅读一些内容以在对话框中使用，但这可能是不可能的，因为第二个窗口被锁定到位，覆盖了它。

我想我几乎用玻璃板解决了这个问题。我将下面的类设置为窗口根窗格的玻璃窗格，然后在我想要阻止时调用 setVisible(true) 并在要解锁窗口时调用 setVisible(false)。锁定时，窗口会变灰以表明这一点。

鼠标输入被阻止，除了关闭窗口，这现在很好 - 问题是我仍然可以在被阻止的窗口上的组件周围使用标签，如果我得到一个可编辑的，我可以用键盘编辑它，不管我的空的 KeyListener。

*有没有一种简单的方法可以防止玻璃板后面的组件获得焦点？*

我希望它可以在“InputSink”类本身上完成。

我尝试添加自己的自私焦点遍历策略并在可见时请求焦点，但这没有效果。

我还尝试了一个示例，我发现在其中添加了 FocusListener，如果玻璃窗格可见，其 focusLost 方法请求焦点，但这太过分了，因为窗口总是停留在前面。

有人知道这两个极端之间的解决方案吗？这就是我所拥有的：

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.FocusTraversalPolicy;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.event.KeyAdapter;
import java.awt.event.MouseAdapter;

import javax.swing.JPanel;

public class InputSink extends JPanel {

public InputSink() {
    this(0.2f); //Default opacity.
}
public InputSink(float alpha) {
    setOpaque(false);
    setBackground(new Color(0, 0, 0, alpha)); //Just store it here.
    addMouseListener(new MouseAdapter() {});
    addKeyListener(new KeyAdapter() {});
    setFocusTraversalPolicy(new FocusTraversalPolicy() {
        @Override
        public Component getLastComponent(Container aContainer) {
            return InputSink.this;
        }
        @Override
        public Component getFirstComponent(Container aContainer) {
            return InputSink.this;
        }
        @Override
        public Component getDefaultComponent(Container aContainer) {
            return InputSink.this;
        }
        @Override
        public Component getComponentBefore(Container aContainer, Component aComponent) {
            return InputSink.this;
        }
        @Override
        public Component getComponentAfter(Container aContainer, Component aComponent) {
            return InputSink.this;
        }
    });
}

public void paintComponent(final Graphics gfx) { //Handle grey-out.
    gfx.setColor(getBackground());
    Rectangle rect = gfx.getClipBounds();
    gfx.fillRect(rect.x, rect.y, rect.width, rect.height);
}

@Override
public void setVisible(boolean visible) {
    super.setVisible(visible);
    if (visible)
        requestFocus();
}

} 
```

所以我按照 Guillaume Polet 的建议使用的版本是

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.KeyEventDispatcher;
import java.awt.KeyboardFocusManager;
import java.awt.Rectangle;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class InputSink extends JPanel {

KeyEventDispatcher blockingDispatcher = new KeyEventDispatcher() {
    @Override
    public boolean dispatchKeyEvent(KeyEvent e) {
        return InputSink.this == ((JFrame) SwingUtilities.getWindowAncestor((Component) e.getSource())).getGlassPane(); //Consume!
    }
};

public InputSink) {
    this(0.2f); //Default opacity.
}
public InputSinkfloat alpha) {
    setOpaque(false);
    setBackground(new Color(0, 0, 0, alpha)); //Just store it here.
    addMouseListener(new MouseAdapter() {});
    addKeyListener(new KeyAdapter() {});
}

public void paintComponent(final Graphics gfx) { //Handle grey-out.
    gfx.setColor(getBackground());
    Rectangle rect = gfx.getClipBounds();
    gfx.fillRect(rect.x, rect.y, rect.width, rect.height);
}

@Override
public void setVisible(boolean visible) {
    super.setVisible(visible);
    if (visible)
        KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(blockingDispatcher);
    else
        KeyboardFocusManager.getCurrentKeyboardFocusManager().removeKeyEventDispatcher(blockingDispatcher);
}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:07:17.753

您可以添加一个`KeyEventDispatcher`来`KeyboardFocusManager`阻止键盘输入。

下面的小演示：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.KeyEventDispatcher;
import java.awt.KeyboardFocusManager;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TestGlassPane {

    private static final int COUNTDOWN = 10;

    private static final String CLICK_ME = "Click me";

    private static final Color GRAY = new Color(192, 192, 192, 128);

    private JFrame frame;

    private JButton button;

    private Timer timer;

    private int countdown;

    private KeyEventDispatcher blockingDispatcher;

    private static class GrayPanel extends JComponent {
        @Override
        protected void paintComponent(Graphics g) {
            g.setColor(GRAY);
            g.fillRect(0, 0, getWidth(), getHeight());
        }
    }

    public TestGlassPane() {
        blockingDispatcher = new KeyEventDispatcher() {

            @Override
            public boolean dispatchKeyEvent(KeyEvent e) {
                return true;
            }
        };

    }

    protected void initUI() {
        frame = new JFrame(TestGlassPane.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        button = new JButton(CLICK_ME);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                blockUserInput();
            }
        });
        GrayPanel glassPane = new GrayPanel();
        glassPane.addMouseListener(new MouseAdapter() {
        });
        frame.setGlassPane(glassPane);
        frame.add(button);
        frame.setSize(200, 200);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    protected void blockUserInput() {
        KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(blockingDispatcher);
        frame.getGlassPane().setVisible(true);
        countdown = COUNTDOWN;
        timer = new Timer(1000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                countdown--;
                if (countdown == 0) {
                    timer.stop();
                    frame.getGlassPane().setVisible(false);
                    button.setText(CLICK_ME);
                    KeyboardFocusManager.getCurrentKeyboardFocusManager().removeKeyEventDispatcher(blockingDispatcher);
                } else {
                    button.setText("We will be back in " + countdown + " seconds");
                }
            }
        });
        timer.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestGlassPane().initUI();
            }
        });
    }

} 
```

通常，该按钮可以用`Space`键激活，但您会看到它实际上被阻止了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:53:20.197

> 因为第二个窗口被锁定到位

JDialog 对我来说一直是“可移动的”（使用 Windows）。

阻止输入的另一种可能性：

当您显示非模态对话框时，请包含此行

```
frame.setEnabled(false); 
```

还将一个 windowListener 添加到对话框中，以便在关闭时

```
frame.setEnabled(true); 
```

似乎在 Windows 上工作正常，其他平台未知

# functional-programming - `fun x -> x` 是 OCaml 中唯一具有 'a -> 'a 类型的函数吗？

> ID：14381198
> 
> 赞同：7
> 
> 时间：2013-01-17T14:25:38.253
> 
> 标签：functional-programming, ocaml

题目就是问题，很简单。

恒等函数`fun x -> x`具有类型`'a -> 'a`。

**是否有任何其他具有相同类型的功能`'a -> 'a`？**

我想不出另一个。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T14:31:16.463

不。

```
fun x -> print_endline "foo"; x;;

(failwith "bang" : 'a -> 'a);;

(fun x -> failwith "bang" : 'a -> 'a);;

(fun x -> List.hd [] : 'a -> 'a);;

let rec f (x : 'a) : 'a = f x;;

let counter = ref 0;;
(fun x -> incr counter; x);; 
```

恒等函数是`'a -> 'a`整个编程语言中唯一没有任何副作用的人，包括不终止。OCaml 和 Haskell 都不符合条件，但一些用作证明助手的语言（在这种情况下整体性很重要）可以，特别是 Coq（它具有用于表述这种类型的指示性多态性）。

# camera - 相机、Gps 跨平台

> ID：14381199
> 
> 赞同：1
> 
> 时间：2013-01-17T14:25:40.233
> 
> 标签：camera, gps, cross-platform

是否可以在跨平台上创建一个使用相机和 Gps 并支持所有移动操作系统的应用程序

# excel - Excel 2010 条件格式化单个行

> ID：14381200
> 
> 赞同：3
> 
> 时间：2013-01-17T14:25:41.913
> 
> 标签：excel, excel-2010, rows, conditional-formatting, vba

我正在尝试在 844 个不同的行上使用条件格式（绿色 - 黄色 - 红色刻度）来跟踪过去六年的保费量（年份是列）。这是每个卷列之间的棘手部分是项目数。我想将每一行格式化为优质数量，并保持项目数量不变。

此时，我通过按住 ctrl 然后选择条件格式来选择每个单独的高级卷单元格。

我正在尝试自动执行此操作，因此我不必为 844 行和未来的电子表格继续此过程。

我附上了一张工作表的图片供您参考。

任何帮助是极大的赞赏！！！

谢谢，

布拉德

![在此处输入图像描述](../Images/7b9ae5b5b7fdc7c85cfd148014b2ea97.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:59:53.070

通过运行宏记录器，我得到了一些条件格式的基本代码。我用一个`rng`变量替换了所有出现的选择，并将该`rng`变量设置为子例程的参数，以便可以在循环中调用 Sub：

```
Sub SetRangeCF(rng As Excel.Range)

rng.FormatConditions.AddColorScale ColorScaleType:=3
rng.FormatConditions(rng.FormatConditions.Count).SetFirstPriority
rng.FormatConditions(1).ColorScaleCriteria(1).Type = _
xlConditionValueLowestValue
With rng.FormatConditions(1).ColorScaleCriteria(1).FormatColor
    .Color = 8109667
    .TintAndShade = 0
End With
rng.FormatConditions(1).ColorScaleCriteria(2).Type = _
xlConditionValuePercentile
rng.FormatConditions(1).ColorScaleCriteria(2).Value = 50
With rng.FormatConditions(1).ColorScaleCriteria(2).FormatColor
    .Color = 8711167
    .TintAndShade = 0
End With
rng.FormatConditions(1).ColorScaleCriteria(3).Type = _
xlConditionValueHighestValue
With rng.FormatConditions(1).ColorScaleCriteria(3).FormatColor
    .Color = 7039480
    .TintAndShade = 0
End With
End Sub 
```

然后你在一个循环中调用上面的 sub，在这种情况下，对于任何在 A 列中有值的行调用一次。这假设条件格式从第 2 行开始，并且你在 A 列中有不间断的数据。如果没有，你d 必须调整这个循环代码：

```
Sub SetEachRow()
Dim ws As Excel.Worksheet
Dim LastRow As Long
Dim cell As Excel.Range

Set ws = ActiveSheet    'change as necessary
With ws
    LastRow = .Range("A" & .Rows.Count).End(xlUp).Row
    For Each cell In .Range("A1:A" & LastRow)http://stackoverflow.com/questions/10245638/excel-changes-conditional-formatting-formula?rq=1
        cell.EntireRow.FormatConditions.Delete
        SetRangeCF cell.EntireRow
    Next cell
End With
End Sub 
```

我不知道行数的限制是什么，但 1,000 行对我来说很好。

# java - GWT 无法在现有元素上定义画布

> ID：14381205
> 
> 赞同：1
> 
> 时间：2013-01-17T14:25:51.503
> 
> 标签：java, eclipse, gwt, canvas

我有一个元素定义为`HTML`元素，即`<canvas id = 'foo' width = '25' height = '40'></canvas>`. 我试图像这样吸引它：

```
import com.google.gwt.dom.client.Element;
import com.google.gwt.user.client.DOM;
Canvas canvas2 = Canvas.createIfSupported();
Element el = DOM.getElementById("foo");
canvas2.setElement(el); 
```

最后一行在 Eclipse 中抛出错误，错误消息是**UIObject 类型的方法 setElement(Element) is not visible**。我应该怎么做才能纠正它？这是我要导入的类列表，有什么`JAR`冲突吗？

```
import com.google.gwt.canvas.client.Canvas;
import com.google.gwt.canvas.dom.client.Context2d;
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.dom.client.Element;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.event.dom.client.KeyCodes;
import com.google.gwt.event.dom.client.KeyUpEvent;
import com.google.gwt.event.dom.client.KeyUpHandler;
import com.google.gwt.user.client.DOM;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.DialogBox;
import com.google.gwt.user.client.ui.HTML;
import com.google.gwt.user.client.ui.HorizontalPanel;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.TextBox;
import com.google.gwt.user.client.ui.VerticalPanel; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:49:23.893

不幸的是，目前没有简单的方法可以做到这一点。[问题 #6683](http://code.google.com/p/google-web-toolkit/issues/detail?id=6683)在 GWT 的问题跟踪器中对此开放。建议的解决方法是复制 Canvas 小部件类并失去构造函数的可见性......我承认不是很方便。

# javascript - 如何使用 javascript 显示数据列表建议？

> ID：14381217
> 
> 赞同：12
> 
> 时间：2013-01-17T14:26:33.677
> 
> 标签：javascript, html, html-datalist

我发现新的`<datalist>`通常非常有用，但我认为这些建议不够明显。有没有办法使用javascript触发数据列表建议的显示？

`<input type="number">`例如，我在（[jsFiddle](http://jsfiddle.net/JDe8G/)）上有一个数据列表。

```
<label>
    Enter a Fibonacci number:
    <input type="number" list="fibonacci" min="0" id="myinput">
</label>
<datalist id="fibonacci">
    <option value="0">
    <option value="1">
    <option value="2">
    <option value="3">
    <option value="5">
    <option value="8">
    <option value="13">
    <option value="21">
</datalist>
<button type="button" id="show-suggestions">Show suggestions</button>

<script>
$('#show-suggestions').click(function() {
    // .showSuggestions() does not exist.
    // I'd like it to display the suggested values for the input field.
    $('#myinput').showSuggestions();
});
</script> 
```

在 Chrome 中，仅当输入为空、已获得焦点且用户单击输入时，才会显示完整的建议列表。向下箭头不显示建议 - 它只是减少值。

我想让这些建议更明显。作为一个例子，我添加了一个应该打开建议列表的按钮。我在 onClick 处理程序中放了什么？

在这个示例中，我使用了 Chrome、jQuery 和数字输入，但我更喜欢独立于所有这些的通用解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:01:15.417

如果您删除 type="number" 您的用户可以使用基本的 alt+downarrow 键盘快捷键获取下拉列表。

如果这对你不起作用。我建议使用混合方法，例如[https://github.com/mmurph211/Autocomplete](https://github.com/mmurph211/Autocomplete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-16T15:21:43.190

**从包含 200 多个选项的列表中选择您所在的国家/地区是自动完成控件的理想候选者。直接在 HTML 页面中为每个国家/地区定义一个带有子元素的元素：**

```
 <datalist id="countrydata">
       <option>Afghanistan</option>
       <option>Åland Islands</option>
       <option>Albania</option>
       <option>Algeria</option>
       <option>American Samoa</option>
       <option>Andorra</option>
       <option>Angola</option>
       <option>Anguilla</option>
       <option>Antarctica</option>
       ...etc...
    </datalist> 
```

# php - Codeigniter Datamapper ORM 生成错误查询

> ID：14381220
> 
> 赞同：1
> 
> 时间：2013-01-17T14:26:41.793
> 
> 标签：php, sql, codeigniter, codeigniter-datamapper

我第一次将 Datamapper ORM 与 CRUD 的*数组*和*htmlforms*扩展一起使用。到目前为止，这两个扩展都适用于我的所有模型，但今天我面临一个模型的奇怪问题。

当我尝试保存对象时，我收到此 SQL 错误：

```
A Database Error Occurred
Error Number: 1054
Unknown Column 'orderitems.orderitem_id' in where clause

SELECT COUNT(*) AS `numrows` FROM (`orderitems`) WHERE `orderitems`.`order_id` = 2 AND `orderitems`.`orderitem_id` NOT IN (8, 9)

Filename: libraries/datamapper.php
Line Number: 2526 
```

我认为正确的 SQL 应该是*...AND `orderitems`。`id`NOT IN (...)*因为 Orderitem 模型引用的是自身而不是另一个相关模型。*此错误在 count() 方法内部触发，该方法由数组*DM 扩展的 from_array() 方法触发的 save() 方法触发。

这是我的控制器代码

```
//Get order
$order = new Order(2);

//Fields to render in the form
$fields = array('orderitem');

//Save changes from $_POST
if($post = $this->input->post())
{
$order->trans_begin();
if ( ! $order->from_array($post, $fields, TRUE) OR $order->trans_status() === FALSE)
$order->trans_rollback();
else
$order->trans_commit();
}

//Load view
$data = array(
'order' => $order,
'fields'=> $fields,
);
$this->load->view('order/edit', $data); 
```

这是我的查看代码

```
echo $order->render_form($fields); 
```

这是隐含的模型

```
class Order extends DataMapper {
public $has_one = array('orderstatus', 'place', 'user', 'paymenttype');
public $has_many = array('orderitem');
...
/*SQL:
CREATE TABLE IF NOT EXISTS orders (
id mediumint(4) unsigned NOT NULL auto_increment PRIMARY KEY,
user_id mediumint(1) unsigned, FOREIGN KEY (user_id) REFERENCES users(id) ON UPDATE CASCADE ON DELETE RESTRICT,
orderstatus_id tinyint(1) unsigned, FOREIGN KEY (orderstatus_id) REFERENCES orderstatuses(id) ON UPDATE CASCADE ON DELETE RESTRICT,
place_id tinyint(1) unsigned, FOREIGN KEY (place_id) REFERENCES places(id) ON UPDATE CASCADE ON DELETE SET NULL,
paymenttype_id tinyint(1) unsigned, FOREIGN KEY (paymenttype_id) REFERENCES paymenttypes(id) ON UPDATE CASCADE ON DELETE SET NULL,
total float NOT NULL DEFAULT 0
) ENGINE = InnoDB;
*/ 
```

* * *

```
class Orderitem extends DataMapper {
public $has_one = array('order', 'orderitemstatus');
public $has_many = array('orderitemextra');
...
/*SQL:
CREATE TABLE IF NOT EXISTS orderitems (
id int(1) unsigned NOT NULL auto_increment PRIMARY KEY,
order_id mediumint(1) unsigned, FOREIGN KEY (order_id) REFERENCES orders(id) ON UPDATE CASCADE ON DELETE CASCADE,
orderitemstatus_id tinyint(1) unsigned, FOREIGN KEY (orderitemstatus_id) REFERENCES orderitemstatuses(id) ON UPDATE CASCADE ON DELETE RESTRICT,
name varchar(128) NOT NULL,
price float NOT NULL,
) ENGINE = InnoDB;
*/ 
```

正如我所说，我对其他模型没有任何问题，所以我不知道这是 DM 问题还是我的代码或任何模型定义的问题。

我会很感激任何帮助。

谢谢！

# xpages - XPages - 在预先选择时填充多个字段

> ID：14381229
> 
> 赞同：0
> 
> 时间：2013-01-17T14:27:00.357
> 
> 标签：xpages, xpages-ssjs, typeahead

这可能是一个直截了当的问题，但我现在看不到树木的木材

问题：我有一个预输入附加到一个从视图中查找值的编辑框（[基于 Tim Tripcony 的代码](http://www.timtripcony.com/blog.nsf/d6plinks/ttry-7xd5p9)）。选择一个值后，我希望 XPage 上的其他编辑框填充从相应文档中提取的值。

例如：用户名编辑框有一个从 NAB 查找的预输入。我从预先输入的列表中选择“Joe Bloggs”名称，并希望电子邮件、电话和位置编辑框立即填充来自他的 NAB 条目的值。

我在墙上撞了我的头，因为我确信有一个简单而明显的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T14:49:43.083

从预先输入的值中选择一个值应该触发为编辑框定义的任何 onChange 事件。您可以通过直接从该事件中更新数据源来设置其他字段：

```
var selectedName = currentDocument.getValue("contactName");
currentDocument.setValue("emailAddress", getEmail(selectedName));
currentDocument.setValue("phoneNumber", getPhone(selectedName));
currentDocument.setValue("location", getLocation(selectedName)); 
```

当然，上面的示例假定这些是您的字段名称，并且您在其他地方定义了命名函数。

# android - 单击设置按钮时出错

> ID：14381232
> 
> 赞同：1
> 
> 时间：2013-01-17T14:27:05.473
> 
> 标签：android, android-intent

我是 Android 开发的新手，并试图让设置菜单显示在我的应用程序上。

首选项的 XML 文件在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
android:title="@string/settings">
<SwitchPreference
    android:title="Switch Preference"
    android:key="switchpref"
    android:switchTextOn="ON"
    android:switchTextOff="OFF"
    android:summary="Night Mode"
    android:defaultValue="false"
    android:disableDependentsState="false"
    />

 </PreferenceScreen> 
```

主类文件在这里，我尝试切换到设置活动

```
package com.example.notepad;

import java.util.zip.Inflater;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;

public class HomeScreen extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home_screen);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_home_screen, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId())
    {
    case R.id.menu_settings:
         Intent intent = new Intent(HomeScreen.this,      PreferencesFragment.class);
            startActivity(intent);
            return true;

            default:
                return super.onOptionsItemSelected(item);
    }

}
} 
```

显示设置菜单的 Preferences Java 文件在这里

```
package com.example.notepad;

import android.app.Activity;
import android.os.Bundle;

public class PreferencesFragment extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.xml.preferences);
}

} 
```

我无法弄清楚为什么会发生错误。当我单击“设置”按钮时，它只显示通用的“不幸的是，应用程序已停止”

日志文件在这里

```
01-17 19:49:28.795: E/AndroidRuntime(756): FATAL EXCEPTION: main
01-17 19:49:28.795: E/AndroidRuntime(756): java.lang.RuntimeException: Unable to start    activity ComponentInfo{com.example.notepad/com.example.notepad.PreferencesFragment}:  android.view.InflateException: Binary XML file line #2: Error inflating class  PreferenceScreen
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.os.Looper.loop(Looper.java:137)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.ActivityThread.main(ActivityThread.java:4745)
 01-17 19:49:28.795: E/AndroidRuntime(756):     at java.lang.reflect.Method.invokeNative(Native Method)
01-17 19:49:28.795: E/AndroidRuntime(756):  at java.lang.reflect.Method.invoke(Method.java:511)
01-17 19:49:28.795: E/AndroidRuntime(756):  at      com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-17 19:49:28.795: E/AndroidRuntime(756):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-17 19:49:28.795: E/AndroidRuntime(756):  at dalvik.system.NativeStart.main(Native Method)
01-17 19:49:28.795: E/AndroidRuntime(756): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class PreferenceScreen
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-17 19:49:28.795: E/AndroidRuntime(756):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.Activity.setContentView(Activity.java:1867)
01-17 19:49:28.795: E/AndroidRuntime(756):  at com.example.notepad.PreferencesFragment.onCreate(PreferencesFragment.java:12)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.Activity.performCreate(Activity.java:5008)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-17 19:49:28.795: E/AndroidRuntime(756):  ... 11 more
01-17 19:49:28.795: E/AndroidRuntime(756): Caused by: java.lang.ClassNotFoundException: android.view.PreferenceScreen
01-17 19:49:28.795: E/AndroidRuntime(756):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-17 19:49:28.795: E/AndroidRuntime(756):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
 01-17 19:49:28.795: E/AndroidRuntime(756):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:643)
01-17 19:49:28.795: E/AndroidRuntime(756):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
01-17 19:49:28.795: E/AndroidRuntime(756):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
01-17 19:49:28.795: E/AndroidRuntime(756):  at          android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
01-17 19:49:28.795: E/AndroidRuntime(756):  ... 20 more 
```

编辑 - 我的 AndroidManifest.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.notepad"
android:versionCode="1"
android:versionName="1.0"
  >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.notepad.HomeScreen"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity
        android:name=".PreferencesFragment" />
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:32:45.063

您不能在 Activity 中使用 PreferenceScreen（PreferencesFragment 扩展了 Activity）。阅读文档并正确使用它。

> PreferenceScreen 可以出现在两个地方：
> 
> 当 PreferenceActivity 指向它时，它被用作根并且不显示（仅显示包含的首选项）。
> 
> 当它出现在另一个首选项层次结构中时，它会显示并用作另一个首选项屏幕的网关（通过将另一个首选项屏幕显示为对话框或通过 getIntent() 中的 startActivity(android.content.Intent)）。此 PreferenceScreen 的子项不会显示在显示此 PreferenceScreen 的屏幕中。相反，单击此首选项时将显示一个单独的屏幕。

# php - 通过 TCP 向网页发送实时数据

> ID：14381234
> 
> 赞同：0
> 
> 时间：2013-01-17T14:27:12.247
> 
> 标签：php, tcp, push

我想将实时 XML 数据（比如股票价格）流式传输到 Web 服务器上的 TCP 套接字。然后，我希望用户能够连接到网页并查看最新数据的（更新）版本。我需要做什么？

我对 PHP 最满意，所以：

1.  编写一个在服务器上运行并监听套接字的脚本。
2.  当它接收到新数据（每秒）时，它会将其解析为正确的格式（例如：名称、价格、更改）
3.  ？？？
4.  拥有一个包含最新数据表的网页
5.  使用 pusher.js（或其他东西）来监听数据的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:28:54.977

您可以使用服务器发送事件、Websockets、Comet Iframes、长轮询......

有很多方法可以做你想做的事，这完全取决于**你**想怎么做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:29:30.133

PHP 不是很好的解决方案。看看[node.js](http://nodejs.org/)或[vert.x](http://vertx.io/)。使用 Websockets，您可以传输数据。它比 PHP-Sockets 更高效。

# linux - 制作一个可以循环的计算器 - Bash

> ID：14381237
> 
> 赞同：0
> 
> 时间：2013-01-17T14:27:17.113
> 
> 标签：linux, bash, shell, unix

我正在尝试制作一个计算器。用户输入数字 1，选择和操作，输入数字 2，然后选择另一个操作或显示答案。

例如。1 + 1 = 或 1 + 1 + 2 + 1 =

这两个都应该是可能的。

```
read -p "what's the first number? " n1
PS3="what's the operation? "
select ans in add subtract multiply divide equals; do
case $ans in 
    add) op='+' ; break ;;
    subtract) op='-' ; break ;;
    multiply) op='*' ; break ;;
    divide) op='/' ; break ;;
    *) echo "invalid response" ;;
esac
done
read -p "what's the second number? " n2
ans=$(echo "$n1 $op $n2" | bc -l)
printf "%s %s %s = %s\n\n" "$n1" "$op" "$n2" "$ans"

exit 0 
```

这是我到目前为止所写的内容，但我无法弄清楚如何让用户选择“等于”或循环返回以输入另一个操作。有什么想法可以在这里对我的代码做些什么吗？我整天都被困在这上面。

*   我不希望用户自己输入方程式，我希望他们从列表中进行选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:36:07.260

本质上，您必须在该代码周围放置一个循环，以便它读取一个数字然后重复选择一个操作。建立公式。当用户选择“等于”时，跳出外循环并计算公式。在伪代码中：

```
formula=""
while true; do
  get a number
  formula+="$number"
  select an operation
    case $op in
    ...
    equals) break 2 ;; # need to break out of 2 levels, the select and the while
    esac
  done
  formula+="$op"
done
ans=$(bc -l <<< "$formula")
printf "%s = %s\n" "$formula" "$ans" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:45:58.443

我会让用户一口气输入整个方程式。例如

```
read -p "enter equation" equate
ans=$(bc -l <<< "${equate%%=*})"
echo ${equate%%=*} = $ans 
```

<<< 是这里的字符串，字符串的内容作为标准输入输入到 cmd。

%%=* 在可能已放入的 = 之后的任何事物的等价变量条中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:46:36.807

```
#!/bin/bash

read -p "what's the first number? " n1
PS3="what's the operation? "
select ans in add subtract multiply divide equals; do
case $ans in 
    add) op='+' ; break ;;
    subtract) op='-' ; break ;;
    multiply) op='*' ; break ;;
    divide) op='/' ; break ;;
    *) echo "invalid response" ;;
esac
done
read -p "what's the second number? " n2
ans=$(echo "$n1 $op $n2" | bc -l)
printf "%s %s %s = %s\n\n" "$n1" "$op" "$n2" "$ans"

exit 0 
```

# java - 我可以使用 Jenkins 来测试 VM（服务器）是否已启动并正在运行？

> ID：14381244
> 
> 赞同：4
> 
> 时间：2013-01-17T14:27:45.983
> 
> 标签：java, linux, selenium, jenkins

我可以使用 Jenkins 来测试 VM（服务器）是否已启动并正在运行？我们有很多带有 JBoss、LDAP、MySQL 等的 VM（服务器），我想知道我是否可以让 Jenkins 以某种方式 ping 服务器以查看 SA 是否将其关闭或其他什么..

我正在考虑使用硒测试。我将有一个带有 selenium java 测试的 Maven 项目，以检查服务器是否已启动。但是我怎么能告诉詹金斯每小时运行一次测试，你认为这是正确的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T15:21:29.893

我想说最简单的解决方案是使用[Site Monitor](https://wiki.jenkins-ci.org/display/JENKINS/SiteMonitor+Plugin)插件。

它简单、可靠，还允许重用由 jenkins 实例提供的构建状态通知。唯一的限制是您应该启动并运行一些 http 服务器，但我敢打赌您至少有可用的默认页面。

![在此处输入图像描述](../Images/9d951d423567f4ff6dce52fa3cd0ab3d.png)

配置很简单：

![在此处输入图像描述](../Images/1bbbeef2bfcbfafe2a3ba0a66e97de92.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:46:50.487

Jenkins 没有用于管理（或监控）VM 的插件，AFAIK，但您可以使用 Perl 或 PowerShell 来实现这一点——两者都有一套很好的工具。

当服务器不可用时，让该工具返回错误，您甚至可以使用 API 来启动托管机器。

干杯

# gcc - OpenCL，这是正常的执行时间吗？

> ID：14381247
> 
> 赞同：0
> 
> 时间：2013-01-17T14:27:57.937
> 
> 标签：gcc, ubuntu, opencl, cpu

我正在使用 OpenCL 研究算法，我需要测量它在并行和顺序版本中的执行时间。因此，我使用外部循环来迭代这两个代码并测量它们的时间，但我得到了：

顺序：3.06 段

并行：269 段

我用于并行版本的代码是：

```
t_start=clock();                 /* Start measuring time */

for(i=0;i<=N; i++) // N is really big, around a million, but is the same for both versions
{

fitness = 0;

ret = clEnqueueNDRangeKernel(command_queue, kernel, 1, NULL, &global_item_size, NULL, 0, NULL, NULL);

ret = clEnqueueReadBuffer(command_queue, vdistance, CL_TRUE, 0, siz_mem_distance_code, distance_code, 0, NULL, NULL);

ret = clEnqueueReadBuffer(command_queue, vsumatorio, CL_TRUE, 0,siz_mem_sumatorio, sumatorio, 0, NULL, NULL);

fitness = (1/(*sumatorio)) + (*distance_code/12) + ((pow(*distance_code,2))/4) + ((pow(*distance_code,3))/6);

}

t_finish=clock();                 /* End measuring time */ 
```

在这段代码之前，我已经创建/初始化了使用 OpenCL 运行程序所需的所有东西（平台、设备、上下文、队列、缓冲区、内核……），在这段代码之后，我释放了所有东西。我已经检查过这种时间的增加是由于在每次迭代中都读取了两个变量（distance_code 和 sumatorio），但我必须这样做，因为我必须获得适合度值，这是一个顺序指令，并且只能在内核具有完成了，所以...你能帮帮我吗？我究竟做错了什么？

我希望能正确解释自己，在此先感谢。

注意：我只使用 CPU。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:53:04.017

启动这么多内核的开销超过了仅对 64 个数据项并行化 for 循环的好处。您需要重写您的问题，以便在大批量数据上启动相对较少的内核。在这种情况下，如果 OpenCL 编译器生成了适当的向量化机器代码，您会看到对顺序版本的改进。

此外，如果生成的代码包含任何向量指令，您应该检查[AMD 的 CodeXL](http://developer.amd.com/tools/heterogeneous-computing/codexl/)或 Intel 的[离线编译器。](http://software.intel.com/sites/landingpage/opencl/user-guide/Using_the_Intel_SDK_for_OpenCL_Offline_Compiler_Standalone_Tool.htm)

# javascript - 当第 n 个嵌套数组没有更多嵌套数组时，递归函数停止

> ID：14381253
> 
> 赞同：0
> 
> 时间：2013-01-17T14:28:15.640
> 
> 标签：javascript, jquery, ajax, json

我有 JSON 文档，其中包含一些嵌套数组。如果数组有嵌套数组，我想`function AAA()`每次都调用它。然后在没有更多嵌套数组时停止。

例如。如果我有：

```
 array[AAA,BBB,CCC]
                |
               AAA[AAA,BBB,CCC]
                    |
                   AAA[AAA,BBB,CCC]
                        |
                       etc. 
```

我想`function AAA()`总是在`AAA`有子数组时调用。假设`AAA`有 5 次`subAAA`。我希望`function(AAA)`自己调用 5 次然后停止。如果将来我添加更多子数组来调用更多次。

如果有帮助的话，这是我的`.json`：

```
{
    "navigation" : [

        {
            "name" : "home",
            "href" : "home.html"    
        },

        {
            "name" : "services",
            "href" : "interior.html",
            "navigation" : [
                {
                    "name" : "PROJECT MANAGEMENT",
                    "href" : "interior.html",
                    "navigation" : [
                            {
                                "name" : "PROJECT MANAGEMENT",
                                "href" : "interior.html"
                            },
                            {
                                "name" : "BUSINESS ANALYST",
                                "href" : "interior.html"
                            }
                        ]
                },
                {
                    "name" : "BUSINESS ANALYST",
                    "href" : "interior.html"
                }
            ]
        },

        {
            "name" : "company",
            "href" : "home.html"    
        }

    ]
} 
```

js代码是：

```
function parseJSON(){

        var navigation = new_json['navigation'];
        var nav_html = '';

        for (var i = 0; i < navigation.length; i++) {

            var name = navigation[i]['name'];
            var href = navigation[i]['href'];
            var submenu = navigation[i]['navigation'];

            nav_html += '<li><a href="' + href + '">' + name + '<span class="ddArrow"></span></a>';     

            if( typeof(submenu) != 'undefined' ){
                nav_html += '<ul>';

                for( var j=0; j<submenu.length; j++ ){

                    var submenu_name = submenu[j]['name'];
                    var submenu_href = submenu[j]['href'];

                    nav_html += '<li><a href="' + submenu_href + '">' + submenu_name + '</a></li>';         
                }
                nav_html += '</ul>';
            }
            nav_html += '</li>';
            console.log( nav_html );
            $('#navigation ul').html( nav_html );
        };  
    }; 
```

这样我想创建具有子菜单的导航。现在我有 3 个级别，但如果我决定添加第 4 级和第 5 级。我希望我的代码在不编写更多代码的情况下在 HTML 中解析它们。我有剩下的......我只需要`IF`功能停止时。

我只是不写我尝试过的东西，因为我明白为什么不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:44:58.970

如果我认为它只需要在包含导航属性时再次运行是正确的，您可以使用：

```
// Without using Array.forEach. Array.isArray polyfill may be 
// required to support older browsers.
function getLinks(obj) {
    var i, len;
    if (Array.isArray(obj.navigation)) {
        len = obj.navigation.length;
        for (i = 0; i < len; i += 1) {
            getLinks(obj.navigation[i]);
        }
    }
}

// Using Array.forEach - Polyfill may be required using the 
// forEach method to support older browsers.
function getLinks(obj) {
    if (Array.isArray(obj.navigation)) {
        obj.navigation.forEach(function (link) {
            getLinks(link);
        });
    }
}

// Array.isArray polyfill.
if(!Array.isArray) {
    Array.isArray = function (vArg) {
        return Object.prototype.toString.call(vArg) === "[object Array]";
    };
}

// Array.forEach polyfill.
if (!Array.prototype.forEach) {
    Array.prototype.forEach = function(fn, scope) {
        for(var i = 0, len = this.length; i < len; ++i) {
            fn.call(scope, this[i], i, this);
        }
    }
} 
```

[isArray polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/isArray)
[forEach polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:46:36.150

递归函数的构建非常简单，并且与您已有的代码非常相似：

```
function parseJSON() {
    function makeList(navigation) {
        var nav_html = '';
        for (var i = 0; i < navigation.length; i++) {
            var name = navigation[i]['name'],
                href = navigation[i]['href'],
                submenu = navigation[i]['navigation'];

            nav_html += '<li><a href="' + href + '">' + name + '<span class="ddArrow"></span></a>';     

            if( typeof(submenu) != 'undefined' ){
                nav_html += '<ul>';
                // now here, do not iterate it again!
                // call the function recursively!
                nav_html += makeList(submenu);
                nav_html += '</ul>';
            }
            nav_html += '</li>';
        }
        return nav_html;
    }
    $('#navigation ul').html( makeList( new_json['navigation'] ) );
} 
```

# php - 如何使用 HTML 表单和 PHP 脚本发送电子邮件

> ID：14381254
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:28:15.780
> 
> 标签：php, html

有人请帮助我编写代码，一切似乎都很好，但是，当我单击提交按钮时，浏览器会显示 PHP 脚本，而不是将电子邮件发送到我的邮件帐户。安装了 PHP 我认为这是问题所在。请帮忙？？？？？？这是我的 PHP 脚本

```
 <?php
    if(isset($_POST['submit'])) {

     $email_to = "example@domain.com";
    $email_subject = "Wedding Wishes";

     function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
    }

    // validation expected data exists
    if(!isset($_POST['txtName']) ||
    !isset($_POST['txtSurname']) ||
    !isset($_POST['txtEmail']) ||
    !isset($_POST['txtRegion']) ||
    !isset($_POST['cmbRelation']) ||
    !isset($_POST['txtMessage'])) {
    died('We are sorry, but there appears to be a problem with the form you');                  
 }

$first_name = $_POST['txtName']; // required
$last_name = $_POST['txtSurname']; // required
$email_from = $_POST['txtEmail']; // required
$region = $_POST['txtRegion']; 
$relation = $_POST['txtRelation'];// not required
$message = $_POST['txtMessage']; // required

$error_message = "";
$email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
if(!preg_match($email_exp,$email_from)) {
$error_message .= 'The Email Address you entered does not appear to be valid.<br />';
}
$string_exp = "/^[A-Za-z .'-]+$/";
if(!preg_match($string_exp,$first_name)) {
$error_message .= 'The First Name you entered does not appear to be valid.<br />';
 }
if(!preg_match($string_exp,$last_name)) {
$error_message .= 'The Last Name you entered does not appear to be valid.<br />';
}
if(strlen($message) < 2) {
$error_message .= 'The Comments you entered do not appear to be valid.<br />';
}
if(strlen($error_message) > 0) {
died($error_message);
}
$email_message = "Form details below.\n\n";

function clean_string($string) {
  $bad = array("content-type","bcc:","to:","cc:","href");
  return str_replace($bad,"",$string);
}

$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Last Name: ".clean_string($last_name)."\n";
$email_message .= "Email: ".clean_string($email_from)."\n";
$email_message .= "Region: ".clean_string($region)."\n";
$email_message .= "Relation: ".clean_string($relation)."\n";
$email_message .= "Message: ".clean_string($message)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
mail($email_to, $email_subject, $email_message, $headers);  
    ?> 
```

而我的 Html 形式如下。

```
 <div class="grid_16" style="width:400px;">
  <div class="top-1">
  <form id="form" method="post" action="SendEmail_Wishes.php" style="width: 400px;" >
  <fieldset>
    <p>
      <label><strong>Name:</strong>
        <input type="text" name="txtName" style= "width:300px; height:25px;">
        <strong class="clear"></strong></label>
      <label><strong>Surname:</strong>
        <input type="text" name="txtSurname" style= "width:300px; height:25px;">       
        <strong class="clear"></strong></label>
      <label><strong>Email:</strong>
         <input name="txtEmail" type="text" style= "width:300px; height:25px;">
        <strong class="clear"></strong></label>
      <label><strong>Region:</strong>
        <input name="txtRegion" type="text" id="txtRegion" value="Country & City"  >
        <strong class="clear"></strong></label>
      <label><strong>Relation:</strong>
        <select name="cmbRelation" id="cmbRelation" accesskey="2" tabindex="2">
          <option value="Family">Family</option>
          <option value="Friend" selected>Friend</option>
        </select>
         <br>
       </label>
       <label><strong>Message:</strong>
        <textarea name="txtMessage" id="txtMessage"  style= "width:300px;"></textarea>  
<font size="1"><br />
<br />
<br />
<br />
<br />
<br />
(Maximum characters: 250)<br>
<input name="submit" type="submit" value="submit" style="width:50px;">

<br />
      <strong class="clear"></strong></label>
    </p>

    <script type="text/javascript">
function blank(a) { if(a.value == a.defaultValue) a.value = ""; }
function unblank(a) { if(a.value == "") a.value = a.defaultValue; }
</script> 

<script language="javascript" type="text/javascript">
function limitText(limitField, limitCount, limitNum) {
if (limitField.value.length > limitNum) {
    limitField.value = limitField.value.substring(0, limitNum);
} else {
    limitCount.value = limitNum - limitField.value.length;
}
}
</script>

  </fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:41:21.000

你没有关闭`if(isset($_POST['submit']))`声明。

你`}`最后不见了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T05:54:07.100

下载 SMTP 服务器，在点击提交之前运行服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:32:12.210

您的服务器似乎没有正确配置。我建议在尝试使用 php 发送电子邮件以使工作成为一个 hello world 示例之前：

```
<?php
   echo phpinfo();
?> 
```

在使用任何 html 页面之前，请尝试从浏览器直接调用您的页面。

# lua - 电晕多维表

> ID：14381257
> 
> 赞同：0
> 
> 时间：2013-01-17T14:28:19.563
> 
> 标签：lua, coronasdk

我正在尝试像这样创建一个多维表

```
 answers = {}
for i = 1, #answers do
    answers[i] = { wrong = t[i], wrong2 = t2[i], right = t3[i]}
end

print(answers[1].wrong) 
```

但是当我尝试访问 answers[1].wrong 时，我收到错误：尝试索引字段“？” （零值）但是当我这样做时，它会为我打印它

```
 answers = {
    {wrong = t[1], wrong2 = t2[1],right = t3[1]},
    {wrong = t[2], wrong2 = t2[2],right = t3[2]}
}
print("----------")
print(answers[1].wrong)
print(answers[1].wrong2) 
```

为什么第一种方法不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:29:02.823

```
answers = {}
for i = 1, #answers do 
```

`#answers`为 0。所以循环不会执行。你可能是`#t`什么意思。

# jquery - 列表项的动画高度

> ID：14381259
> 
> 赞同：0
> 
> 时间：2013-01-17T14:28:21.093
> 
> 标签：jquery, jquery-animate, height

我有这个代码来动画高度：

```
$(".color_list").each(function() {  
    oHeight = $(this).height();
    $('.show_color').toggle(function(){
        $(this).parent('.color_list').addClass('open').animate({height:oHeight},200);   
        $(this).delay(200).css({'bottom':5});
        return false;
    },function(){
            $(this).parent('.color_list').removeClass('open').animate({height:112},200);
            $(this).delay(200).css({'bottom':0});
            return false;
    });
    if ($(this).height() > 120) {
        $(this).css({'height':112});
        $(this).children('.show_color').css({'display':'block'});
    }

}); 
```

在 Firefox 中它有效，但在 Safari 和 Chrome 中它有时只有效，有人知道为什么吗？点击“更多颜色”

[这里](http://haupt1.ohost.de/zipups/color/)

# ejb-3.1 - EJB 3.1 和 NIO2：监控文件系统

> ID：14381274
> 
> 赞同：1
> 
> 时间：2013-01-17T14:29:01.503
> 
> 标签：ejb-3.1, nio2

我想我们大多数人都同意，NIO2 是一个很好的利用方式。假设您想监视文件系统的某些部分以获取传入的 xml - 文件，现在这是一项简单的任务。但是，如果我想将这些东西集成到现有的 Java EE 应用程序中，这样我就不必启动另一个服务（应用程序服务器**和**监视文件系统的服务）怎么办？所以我有重量级的应用服务器，包含所有 EJB 3.1 的东西和某种监视文件系统的服务，并在文件出现后采取适当的行动。有趣的是，适当的操作是创建一条消息并通过 JMS 发送它，将两者集成到应用程序服务器中可能会很好。

我尝试了@Startup，但部署冻结了（我知道我不应该在那里使用 I/O，只是尝试一下）。无论如何......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T14:56:37.367

您可以创建一个在启动时加载的单例并将监视委托给异步 bean

```
@Singleton
@Startup
public class Initialiser {

    @EJB
    private FileSystemMonitor fileSystemMonitor;

    @PostConstruct
    public void init() {
        String fileSystemPath = ....;
        fileSystemMonitor.poll(fileSystemPath);
    }

} 
```

然后异步 bean 看起来像这样

```
@Stateless
public class FileSystemMonitor {

    @Asynchronous
    public void poll(String fileSystemPath) {
        WatchService watcher = ....;
        for (;;) {
            WatchKey key = null;
            try {
                key = watcher.take();
                for (WatchEvent<?> event: key.pollEvents()) {
                    WatchEvent.Kind<?> kind = event.kind();
                    if (kind == StandardWatchEventKinds.OVERFLOW) {
                        continue; // If events are lost or discarded
                    }
                    WatchEvent<Path> watchEvent = (WatchEvent<Path>)event;

                    //Process files....

                }
            } catch (InterruptedException e) {
                e.printStackTrace();
                return;
            } finally {
                if (key != null) {
                    boolean valid = key.reset();
                    if (!valid) break; // If the key is no longer valid, the directory is inaccessible so exit the loop.
                }
            }
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:17:52.697

如果您指定了您正在使用的服务器，可能会有所帮助，但您是否考虑过实现基于 JMX 的服务？它比 EJB 更“中性”一点，更适合后台服务并且限制更少。

# php - PHP mysql_connect 设置 wait_timeout

> ID：14381276
> 
> 赞同：1
> 
> 时间：2013-01-17T14:29:10.640
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL 服务器已消失 - 恰好在 60 秒内](https://stackoverflow.com/questions/1644432/mysql-server-has-gone-away-in-exactly-60-seconds)

我们在 PHP 中使用 mysql_connect 方法为守护进程创建数据库句柄。问题是，该连接的使用时间可能不超过 8 小时（有时超过几周。）

我们遇到了 MySQL 将结束会话的问题，因为达到了 wait_timeout。 [http://dev.mysql.com/doc/refman/5.0/en/gone-away.html](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)

我们不想为所有连接增加这个值。有没有办法仅通过 PHP 增加该句柄的超时时间？通过 MySQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:41:35.457

长时间挂在数据库连接上是不好的，因为数据库在任何时候只提供固定数量的连接；如果您使用了很长时间，这意味着您的数据库处理其他请求的能力较小，即使您实际上并没有对该连接做任何事情。

如果程序暂时使用完它，我建议断开连接，并在需要做更多数据库工作时重新连接。

此外，此解决方案将保护您的程序免受可能的数据库停机，即如果您需要重新启动数据库服务器（即使在支持最好的网络中也会发生这种情况）。如果您保持连接处于活动状态（即根据其他答案进行数据库 ping），那么这样的事件将使您遇到与现在完全相同的问题。使用在不需要时断开的适当管理的连接，即使您已计划在数据库上停机，您也可以安全地保持守护程序运行；只要它在一段时间内保持空闲状态，它就不会变得更聪明。

（顺便说一句，我也质疑编写一个连续运行的 PHP 程序的智慧；PHP 是为短期 Web 请求而设计的。它可能能够运行长期的守护程序，但有更好的工具来完成这项工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:34:11.967

对于这个问题，最好的方法是使用 mysql_ping();

[在手动 PHP mysql_ping()](http://php.net/manual/en/function.mysql-ping.php)上查看

# oracle - SQL 加载器：加入其他表

> ID：14381277
> 
> 赞同：0
> 
> 时间：2013-01-17T14:29:25.130
> 
> 标签：oracle, join, sql-loader

我刚刚浏览了在线文档，发现在使用 SQL 加载程序加载平面文件时，如果您希望在另一个表上进行连接以从该表中获取值。这不可能。我们需要在这种方法中使用外部表。请确认这是否属实。使用 SQL 加载器时，有什么方法可以加入另一个表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:17:28.957

是真的。您可以加载到临时表中，然后在加载后运行一个从中选择并连接到另一个表的过程。或者您可以更改为使用外部表，这通常是首选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:59:46.503

对于外键值较少的情况，有一种解决方法。并且值是预定义的 :) 例如，我们有带有记录的参考表

```
ID Color
--------
1  Red
2  Blue
3  Green 
```

并加载一个包含字符串值（红色、蓝色和绿色）的“颜色”列的平面文件。我们想在目标表中创建列“color_id”并使用颜色 ID。

```
color FILLER,
:color_id "decode(:field2, 1, 'Red', 2, 'Blue', 3, 'Green')", 
```

# android - 仅从 Galaxy s2 v 4.0 发送电子邮件时未生成超链接：android

> ID：14381280
> 
> 赞同：1
> 
> 时间：2013-01-17T14:29:31.580
> 
> 标签：android

如果它们低于 v 4.0，我可以在所有设备中发送邮件并共享链接文本，但是当我使用相同的代码发送电子邮件时，我没有从 Galaxy s2 设备的电子邮件中获得可点击的链接，我想知道为什么会这样仅在某些设备上发生。下面给出了用于发送带有超链接文本的电子邮件的代码：

```
 Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        String aEmailList[] = { "" };
        String aEmailCCList[] = { "" };
        String aEmailBCCList[] = { "" };

        emailIntent
                .putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
        emailIntent.putExtra(android.content.Intent.EXTRA_CC, "");
        emailIntent.putExtra(android.content.Intent.EXTRA_BCC, "");
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
            subject);
        emailIntent.setType("text/html");  

        emailIntent.putExtra(
                android.content.Intent.EXTRA_TEXT,
                Html.fromHtml("<a href=\"" + linkUrlhere
                        + "\">Check out what I posted</a>"));
        mainContext.startActivity(emailIntent); 
```

# android - Android Google Maps API v2 从 onResume 调用 getProjection

> ID：14381282
> 
> 赞同：3
> 
> 时间：2013-01-17T14:29:36.010
> 
> 标签：android, onresume, google-maps-android-api-2

我的应用程序启动时需要绑定地图，但是

```
 GoogleMap.getProjection().getVisibleRegion().latLngBounds; 
```

返回边界 0,0,0,0。是否有某种监听器我可以用来查看

```
 Projection 
```

已加载？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T19:58:08.710

注册（临时，如果需要）一个`OnCameraChangeListener`. 每当相机更改时都会调用它，这将包括显示默认地图时的第一次更改。

# javascript - Google Maps v3：如何可靠地检索图标大小和锚点位置？

> ID：14381283
> 
> 赞同：1
> 
> 时间：2013-01-17T14:29:40.383
> 
> 标签：javascript, google-maps-api-3

我正在将一个库从 v2 移植到 v3。开发人员可以使用他们想要的任何自定义图标作为他们的标记，但是，我需要能够获得图标的大小和图标的锚点位置。使用 v2，gmaps 库将计算所有这些并使其可用。在 v3 中，当您从标记中检索图标时，它可能是一个仅包含图像 URL 的字符串。或者，它可以是一个 MarkerImage，它只包含与构造函数中提供的开发人员一样多的信息。使用 v3，如何可靠地获取标记图标的图标大小和锚点位置？

```
// v2 way
var markerImage = new GIcon(G_DEFAULT_ICON);
markerImage.image = '/system/themes/asp/img/gmarkerA.png';

var marker = new GMarker(
    new GLatLng(35.908236, -79.024531),
    {'title':'NC',
    'icon': markerImage
    });

// get info here
var markerIcon = marker.getIcon();
var anchorX = markerIcon.iconAnchor.x
var anchorY = markerIcon.iconAnchor.y
var iconHeight = markerIcon.iconSize.height
var iconWidth = markerIcon.iconSize.width

// v3 way #1
var marker = new google.maps.Marker({
    'position': new google.maps.LatLng(35.908236, -79.024531),
    'title':'NC',
    'icon': new google.maps.MarkerImage('/system/themes/asp/img/markerA.jpg'));

// v3 way #2
var marker = new google.maps.Marker({
    'position': new google.maps.LatLng(35.908236, -79.024531),
    'title':'NC',
    'icon': '/system/themes/asp/img/markerA.jpg');

// v3 way #3
var marker = new google.maps.Marker({
    'position': new google.maps.LatLng(35.908236, -79.024531),
    'title':'NC',
    'icon': { url : '/system/themes/asp/img/markerA.jpg'}
});

var markerIcon = marker.getIcon();
// how to get anchor position and size????? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:07:23.017

`icon.anchor`和`icon.size`

例如

```
var markerIcon = marker.getIcon();
var size = markerIcon.size; 
```

这可能需要您使用第一种方法，而不仅仅是指定 URL 字符串。
**注意：不推荐使用 MarkerImage 对象，请改用 Icon。**

```
var marker = new google.maps.Marker({
    'position': new google.maps.LatLng(35.908236, -79.024531),
    'title':'NC',
    'icon': { url : '/system/themes/asp/img/markerA.jpg'}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:38:23.897

我认为 api v3 不允许您获取该信息，除非您最初将其作为属性提供。我想出了这个给我一些有用的信息。希望其他人觉得它有用：

```
google.maps.Marker.prototype.getIconInfo = function() {
    var icon = this.getIcon();
    var size = null;
    var anchor = null;
    var image;
    var info;

    if (typeof icon == 'string')
    {
        image = new Image(); 
        image.src = icon;

        size = new google.maps.Size(image.width, image.height);
    }
    else
    {
        size = icon.size;   
        anchor = icon.anchor;   

        if (size == null)
        {
            image = new Image(); 
            image.src = icon.url;

            size = new google.maps.Size(image.width, image.height);

        }
    }

    if (anchor == null)
    {
        anchor = new google.maps.Point(Math.floor(size.width / 2 - 1), size.height);
    }

    var infoWindowAnchor = new google.maps.Point(anchor.x, 2);

    info =  {size:size, anchor:anchor, infoWindowAnchor:infoWindowAnchor};

    return info;
} 
```

# java - Swing：如何从其编辑器中获取 JComponent

> ID：14381285
> 
> 赞同：1
> 
> 时间：2013-01-17T14:29:54.537
> 
> 标签：java, swing, jcombobox, jcomponent

一般来说，你会如何`JComponent`从它的编辑那里得到信息？

**例子：**

让我们有可编辑的`JComboBox`。因此，该组合有一个编辑器（`JTextField`默认情况下）。

```
JComboBox b = new JComboBox();
b.setEditable(true); 
```

现在将“全局”键盘监听器添加到 Swing 应用程序。

```
Toolkit.getDefaultToolkit().addAWTEventListener(
        new AWTEventListener() {
            public void eventDispatched(AWTEvent e) {
                JComponent c = (JComponent) e.getSource();
                System.out.println(c); // <- printing the event source
            }
        },
        AWTEvent.KEY_EVENT_MASK); 
```

向组合框输入文本的输出`b`显示，关键事件的来源是`b`的编辑器，而不是组合框`b`本身：

```
javax.swing.plaf.metal.MetalComboBoxEditor$1[,0,0, ...
javax.swing.plaf.metal.MetalComboBoxEditor$1[,0,0, ...
javax.swing.plaf.metal.MetalComboBoxEditor$1[,0,0, ...
... 
```

有没有办法`b`从它的编辑器或关键事件中获取参考？如果没有，如何获得“当前编辑组合框”的参考？

PS：请不要问我“你为什么需要它？”之类的问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:55:15.460

调用`getEditorComponent()`. 此方法在接口中定义`ComboBoxEditor`：

```
public interface ComboBoxEditor {

  /** Return the component that should be added to the tree hierarchy for
    * this editor
    */
  public Component getEditorComponent();
  ................ 
```

所以将它转换为`ComboBoxEditor`第一个：

```
Component component = (ComboBoxEditor)event.getSource()).getEditorComponent(); 
```

# typo3 - 如何在打字稿中获取插件和 flexform？

> ID：14381289
> 
> 赞同：0
> 
> 时间：2013-01-17T14:30:02.750
> 
> 标签：typo3, typoscript

是否可以使用 flexform 值调用插件？

```
temp.whatever = HTML
temp.whatever < plugin.tx_myplugin_pi1 
```

问题是我有一个带有两个不同模板的选择框要显示：

```
$this->pi_getFFvalue($this->cObj->data['pi_flexform'] 
```

例如返回“Template1”或“Template2”

# c# - 媒体播放器 c# 从网络播放

> ID：14381290
> 
> 赞同：2
> 
> 时间：2013-01-17T14:30:06.010
> 
> 标签：c#, networking, location, media-player, windows-media-player

我正在尝试播放位于网络上地址的文件：

```
string filePath = @"\\192.168.xx.xx\folder\folder2\Audio\audio.wav"; 
```

并尝试像这样在 MediaPlayer.MediaPlayer 播放器中播放它：

```
m_player = new MediaPlayer();
m_player.Stop();
m_player.Open(new Uri(path));
m_player.Play(); 
```

它不会返回任何异常，但也不会播放声音。当我将文件复制到本地磁盘并尝试播放时，它工作正常。

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:40:33.307

做一些谷歌说，你应该尝试一个相对的Uri。

```
m_player = new MediaPlayer();
m_player.Stop();
m_player.Open(new Uri(path, UriKind.Relative));
m_player.Play(); 
```

否则请查看此[示例](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/81ceffb9-2d8a-4902-8295-09a2706bd438)，它打开一个流并将流设置为 MediaPlayer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:45:54.240

[SoundPlayer](http://msdn.microsoft.com/en-us/library/w5bfdtza.aspx)类可以做到这一点。看起来您所要做的就是将其 Stream 属性设置为流，然后调用 Play。

# android - 如何在按钮单击时将事件添加到 Android 默认日历？

> ID：14381293
> 
> 赞同：0
> 
> 时间：2013-01-17T14:30:12.053
> 
> 标签：android, events, calendar, cursor, android-contentresolver

```
protected void addToCalendar()
    {
        final ContentResolver cr = this.getContentResolver();
        Cursor cursor = cr.query(Uri.parse("content://com.android.calendar/calendars"), new String[]{ "_id", "displayName" }, null, null, null);

        cursor.moveToFirst();
            String[] calNames = new String[cursor.getCount()];
        final int[] calIds = new int[cursor.getCount()];
        Log.i("Cal Names Length", "Length of Cals:"+calNames.length);
        Log.i("Names of calendar:", "Cal names:"+calNames.toString());
        for (int i=0; i<calNames.length; i++)
        {
            calIds [i] = cursor.getInt(0);
            calNames[i] = cursor.getString(1);
            cursor.moveToNext();
            Log.i("Calendar", "Cal_id:"+calIds[0]);
            Log.i("Calendar", "Cal_Name:"+calNames[0]);
        }
        cursor.close();

        ContentResolver cr = getContentResolver();

        if(calIds.length > 0)
        {
            Log.i("in if condition", "Of calIds.length");
            Calendar cal =  Calendar.getInstance(); 
            Date birth_date = null;
            for (int i = 0; i < final_list.size(); i++)
            {
                    obj = final_list.get(i);
                    String dateFromDB = obj.getmBirthday();

                    SimpleDateFormat parser = new SimpleDateFormat("MM/dd/yyyy");
                    try 
                    {
                         birth_date = parser.parse(dateFromDB);
                    } 

                    catch (java.text.ParseException e)
                    {
                        e.printStackTrace();
                    }

                 // event insert
                    int cal_id = calIds[0];
                    ContentValues values = new ContentValues();
                    values.put("calendar_id", cal_id);
                    Log.i("Calendar", "Cal_ID:"+cal_id);
                    values.put("title", obj.getmName());
                    Log.i("Title", "Title:"+obj.getmName());

                    values.put("dtstart", birth_date.getTime());

                    values.put("dtend",  birth_date.getTime() + 1800*1000);

                    values.put("duration",  1800*1000 );
                    values.put("description", "Birthday Reminder");
                    values.put("allDay", 1);
                    values.put("rrule", "FREQ=YEARLY");
                    values.put("visibility", 0);
                    values.put("hasAlarm", 1);
                    cr.insert(Uri.parse("content://com.android.calendar/events"), values);

            }

        }

    } 
```

我在按钮单击时使用了这种方法。当我单击按钮 ArrayList of Events 时，应将其添加到 Android 设备的默认日历中。但是在这段代码中，我无法看到添加到日历的事件。而且我什至认为该条目没有被添加到日历中。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:39:53.367

这就是我使用的，它适用于我的代码

```
Intent intent = new Intent(Intent.ACTION_EDIT);  
intent.setType("vnd.android.cursor.item/event");
intent.putExtra("beginTime", startDate.getTimeInMillis());
intent.putExtra("endTime", endDate.getTimeInMillis());
intent.putExtra("title", title);
activty.startActivity(intent); 
```

该事件已添加到 android 日历，但未检查是否已存在相同的事件（可能重复该事件）

# java - 像旅行顾问这样的对话框，并在 android 中显示自定义背景或启动画面

> ID：14381295
> 
> 赞同：1
> 
> 时间：2013-01-17T14:30:13.283
> 
> 标签：java, android, webview

我是android开发的初学者。下面我给出我的主要activity.java代码。我的要求，如果互联网连接或 wifi 不能在移动设备上工作，然后执行以下操作

1.  如果互联网连接不起作用，则在应用程序启动时显示我的初始屏幕背景，并提供对话框或警报，如旅行顾问的此屏幕截图[检查此图像和屏幕截图](http://www.grafdom.com/operations/projects/ma/connect.png)。如果取消按钮按下然后对话框消失，只显示启动画面，如果按下再试一次，然后尝试执行连接到互联网。

在我的代码中，我使用代码购买对话框，我不想要购买功能，这不是我的要求。我想要和旅行顾问一模一样。对我来说很容易，如果有人编辑我的代码并显示在哪里进行更改，非常感谢提前

```
package com.example.edarabia;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

@SuppressLint("SetJavaScriptEnabled")

public class MainActivity extends Activity{
WebView mywebview;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     mywebview = (WebView) findViewById(R.id.webview);
    if(isNetworkConnected() == true){
    mywebview.getSettings().setJavaScriptEnabled(true);
    mywebview.setWebViewClient(new myWebClient());
        mywebview.loadUrl("http://www.grafdom.com/operations/projects/ma/edarabiaapp/");        
    mywebview.getSettings().setBuiltInZoomControls(true);
    mywebview.getSettings().setLoadWithOverviewMode(false);
    mywebview.getSettings().setUseWideViewPort(false);
    }else{
    showBuyDialog();
    }
}

//  @Override
//    public boolean onKeyDown(int keyCode, KeyEvent event) {
    // Check if the key event was the Back button and if there's history
//        if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
//          mywebview.goBack();
//            return true;
 //       }

 //       return super.onKeyDown(keyCode, event);

//  }

 // To handle "Back" key press event for WebView to go back to previous screen.
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
        mywebview.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public void onBackPressed() {
    finish();
}

public class myWebClient extends WebViewClient
{
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) { 
        view.loadUrl(url);
        return true;
    }
}

//// This method will retun boolean value if net conect then value will be true otherwise false
private boolean isNetworkConnected() {
    ConnectivityManager connectivity = (ConnectivityManager)     getSystemService(Context.CONNECTIVITY_SERVICE);
    if (connectivity != null) {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null)
            for (int i = 0; i < info.length; i++)
                if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                    return true;
                }
    }
    return false;
}

public void showBuyDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setTitle("just for testing");

    builder.setMessage("Check you net conectivity....");
    builder.setCancelable(false);
    builder.setPositiveButton("Buy", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            Intent browserIntent = new Intent(
                    Intent.ACTION_VIEW,
                    Uri.parse("https://www.google.com"));
            startActivity(browserIntent);
        }
    });
    builder.show();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:43:14.140

这可能会有所帮助： [检测 Android 上是否有可用的 Internet 连接](https://stackoverflow.com/questions/4238921/android-detect-whether-there-is-an-internet-connection-available/4239019#4239019)

或尝试深入研究广播接收器。示例代码：

```
public class InternetConnectionStateReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        _v("Network connectivity change");
        if (intent.getExtras() != null) {
            NetworkInfo ni = (NetworkInfo) intent.getExtras().get(ConnectivityManager.EXTRA_NETWORK_INFO);
            if (ni != null && ni.getState() == NetworkInfo.State.CONNECTED) {
                _v("Network " + ni.getTypeName() + " connected");
                onNetworkConnection(context, true);
            }
        }
        if (intent.getExtras().getBoolean(ConnectivityManager.EXTRA_NO_CONNECTIVITY, Boolean.FALSE)) {
            _v("There's no network connectivity");
            onNetworkConnection(context, false);
        }
    }

    private void onNetworkConnection(Context context, boolean isConnected) {
          //show dialog
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:20:46.320

我得到了解决方案，并在更新的代码下方

```
package com.example.edarabia;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.Bitmap;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

@SuppressLint("SetJavaScriptEnabled")

public class MainActivity extends Activity{
WebView mywebview;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(isNetworkConnected() == true){
    setContentView(R.layout.activity_main);
    mywebview = (WebView) findViewById(R.id.webview);       
    mywebview.getSettings().setJavaScriptEnabled(true);
    mywebview.setWebViewClient(new myWebClient());
    mywebview.loadUrl("http://www.grafdom.com/operations/projects/ma/edarabiaapp/");        
    mywebview.getSettings().setBuiltInZoomControls(true);
    mywebview.getSettings().setLoadWithOverviewMode(false);
    mywebview.getSettings().setUseWideViewPort(false);
    }else{
    setContentView(R.layout.splash);    
    showBuyDialog();
    }
}

//  @Override
//    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Check if the key event was the Back button and if there's history
//        if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
//          mywebview.goBack();
//            return true;
 //       }

 //       return super.onKeyDown(keyCode, event);

//  }

 // To handle "Back" key press event for WebView to go back to previous screen.
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
        mywebview.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public void onBackPressed() {
    finish();
}

public class myWebClient extends WebViewClient
{
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) { 
        view.loadUrl(url);
        return true;
    }
}

//// This method will retun boolean value if net conect then value will be true otherwise false
private boolean isNetworkConnected() {
    ConnectivityManager connectivity = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if (connectivity != null) {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null)
            for (int i = 0; i < info.length; i++)
                if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                    return true;
                }
    }
    return false;
}

public void showBuyDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setTitle("Unable to connect");

    builder.setMessage("You Must have an Internet connection to use Edarabia. Please connect and try again.");
    builder.setCancelable(false);
    builder.setNegativeButton("Close", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            finish(); 
        }
    });
    builder.show();
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T06:22:24.013

尝试替换 showButDialog() 方法，

```
public void showBuyDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setTitle("Unable to connect");   
    builder.setMessage("You must have an Internet connection to use TripAdvisor. Please connect and try again.");
    builder.setCancelable(false);

    builder.setPositiveButton("Try again", new DialogInterface.OnClickListener() {
         @Override
         public void onClick(DialogInterface dialog, int id) {
               isNetworkConnected();
         }
    });
    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {

        }
    });
    builder.show();
} 
```

为了获得与图片中相同的 UI，请在`application`标记前添加以下行，如下所示，

```
<uses-sdk android:targetSdkVersion="15" /> 
```

Android OS 3.0 (Honey Comb) 及更高版本可使用此类对话框。所以你在以前的版本中看不到对话框。

# c++ - 增加 TCP 窗口大小

> ID：14381303
> 
> 赞同：15
> 
> 时间：2013-01-17T14:30:41.603
> 
> 标签：c++, sockets, tcp

我对在应用程序中增加 TCP 窗口大小有一些疑问。在我的 C++ 软件应用程序中，我们使用 TCP/IP 阻塞套接字从客户端向服务器发送大小约为 1k 的数据包。最近我遇到了这个概念 TCP Window Size。所以我尝试使用 和`setsockopt()`将值增加到 64K 。增加此值后，WAN 连接的性能得到了一些改进，但 LAN 连接没有。`SO_SNDBUF``SO_RCVBUF`

根据我对 TCP Window Size 的理解，

客户端将数据包发送到服务器。达到此 TCP 窗口大小后，它将等待确保从服务器接收到窗口大小中第一个数据包的 ACK。在 WAN 连接的情况下，由于 RTT 中大约 100 毫秒的延迟，ACK 会从服务器延迟到客户端。因此在这种情况下，增加 TCP 窗口大小可以补偿 ACK 等待时间，从而提高性能。

我想了解我的应用程序的性能如何提高。

在我的应用程序中，即使`setsockopt`在套接字级别使用 TCP 窗口大小（发送和接收缓冲区）增加了，我们仍然保持 1k 的相同数据包大小（即，我们在单个套接字发送中从客户端发送到服务器的字节）。我们还禁用了 Nagle 算法（将小数据包合并为大数据包的内置选项，从而避免频繁的套接字调用）。

我的疑惑如下：

1.  由于我使用的是阻塞套接字，对于每个 1k 的数据包发送，如果 ACK 不是来自服务器，它应该阻塞。那么仅在 WAN 连接中提高 TCP 窗口大小后性能如何提高呢？如果我误解了 TCP Window Size 的概念，请纠正我。

2.  为了发送 64K 的数据，我相信我仍然需要调用套接字发送函数 64 次（因为我通过阻塞套接字每次发送 1k），即使我将 TCP 窗口大小增加到 64K。请确认。

3.  使用 RFC 1323 算法启用窗口缩放的 TCP 窗口大小的最大限制是多少？

我的英语不太好。如果您无法理解以上任何内容，请告诉我。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-17T14:55:39.227

首先，从您的问题中可以看出一个很大的误解：TCP 窗口大小是由`SO_SNDBUF`and控制的`SO_RCVBUF`。这不是真的。

### TCP 窗口大小是多少？

简而言之，TCP 窗口大小决定了您的网络堆栈在接收尚未确认的最早数据包的确认之前愿意将多少后续数据（数据包）放在网络上。

TCP 堆栈必须忍受并考虑这样一个事实，即一旦确定数据包在传输过程中丢失或损坏*，从该数据包开始发送的每个数据包*都必须重新发送，因为数据包只能按顺序确认由接收器。因此，允许同时存在太多未确认的数据包会*推测性*地消耗连接的带宽：不能保证所使用的带宽实际上会产生任何有用的东西。

另一方面，不允许同时存在多个未确认的数据包只会扼杀具有高[带宽延迟积](http://en.wikipedia.org/wiki/Bandwidth-delay_product)的连接的带宽。因此，TCP 堆栈必须在无益地耗尽带宽和没有足够积极地驱动管道（从而允许其部分容量未被使用）之间取得平衡。

TCP 窗口大小决定了达到这种平衡的位置。

### 做什么`SO_SNDBUF`和`SO_RCVBUF`做什么？

它们控制网络堆栈为服务套接字而保留的缓冲区空间量。这些缓冲区用于累积堆栈尚未能够放在线路上的传出数据和已从线路接收但尚未被您的应用程序分别读取的数据。

如果其中一个缓冲区已满，则在释放一些空间之前，您将无法发送或接收更多数据。请注意，这些缓冲区仅影响网络堆栈如何处理网络接口“近”端的数据（在发送之前或到达之后），而 TCP 窗口影响堆栈如何管理“远”端的数据接口的一侧（即在电线上）。

### 回答您的问题

1.  不。如果是这种情况，那么每个发送的数据包都会产生往返延迟，这将完全破坏具有高延迟的连接的带宽。

2.  是的，但这与 TCP 窗口大小或分配给该套接字的缓冲区大小无关。

3.  根据我能够找到的所有来源（[示例](http://technet.microsoft.com/en-us/magazine/2007.01.cableguy.aspx)），缩放允许窗口达到 1GB 的最大大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:07:35.143

> 1.  由于我使用的是阻塞套接字，对于每个 1k 的数据包发送，如果 ACK 不是来自服务器，它应该阻塞。

错误的。在 TCP 中发送是异步的。send() 只是将数据传输到套接字发送缓冲区并返回。它仅在套接字发送缓冲区已满时阻塞。

> 那么仅在 WAN 连接中提高 TCP 窗口大小后性能如何提升呢？

因为你在它得到 ACK 之前阻塞是错误的。

> 1.  对于发送 64K 的数据，我相信我仍然需要调用 socket 发送函数 64 次

为什么？您可以使用 64k 数据缓冲区调用一次。

> （因为我通过阻塞套接字每次发送 1k）

为什么？或者这是您在（1）下的误解的重复？

> 即使我将 TCP 窗口大小增加到 64K。请确认。

不，您可以一次全部发送。不需要循环。

> 使用 RFC 1323 算法启用窗口缩放的 TCP 窗口大小的最大限制是多少？

比你需要的要大得多。

# php - Symfony 1.4 cookie 问题

> ID：14381306
> 
> 赞同：4
> 
> 时间：2013-01-17T14:30:51.790
> 
> 标签：php, cookies, symfony-1.4, session-cookies

我试图找到 Symfony 设置 cookie 的位置。当我访问我的网站时（我正在使用 sfDoctrineGuard 插件），我得到了登录页面，这是预期的行为。查看已创建的 cookie 时，有一个 'symfony' cookie。我找不到 Symfony 设置此 cookie 的位置...我需要更改过期时间。

我看到使用 setCookie 的唯一地方是“记住我”键，但这完全是一个单独的 cookie。

另一个问题是，出于某种原因，“symfony”cookie 的到期时间在 Safari 中显示为“会话”，而不是日期/时间。

我很确定这与 sfDoctrineGuard 无关，而且 Symfony 总是在用户访问该站点时创建一个 cookie，只需要找到设置此 cookie 的代码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:36:40.400

您可以在`factories.yml`

```
storage:
  class: sfSessionStorage
  param:
    session_name: symfony
    session_cookie_lifetime: 60000 # number of seconds 
```

[文档在这里](http://symfony.com/legacy/doc/reference/1_4/en/05-Factories#chapter_05_sub_session_set_cookie_params_parameters)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T19:05:38.707

在你的`factories.yml`尝试

```
all:
  storage:
    class: sfSessionStorage
    param:
      session_name:            The cookie name (symfony by default)
      session_id:              The session id (null by default)
      auto_start:              Whether to start the session (true by default)
      session_cookie_lifetime: Cookie lifetime
      session_cookie_path:     Cookie path
      session_cookie_domain:   Cookie domain
      session_cookie_secure:   Cookie secure
      session_cookie_httponly: Cookie http only (only for PHP >= 5.2) 
```

# c++ - ostrstream 将常量字符串解释为指针

> ID：14381311
> 
> 赞同：3
> 
> 时间：2013-01-17T14:31:22.163
> 
> 标签：c++, strstream

我在清理旧 C/C++ 应用程序的调试宏时遇到了这个问题：我们有一个 Tracer 类继承自`ostrstream`（我知道它自 C++98 以来已被弃用，但此应用程序是 1998 年编写的！）我们使用像这样：

```
Tracer() << "some" << " message" << " here"; 
```

现在，如果链中的第一个值是上面的常量字符串，则调用`ostrstream::str()`Tracer 的结果（在析构函数中完成，将结果插入队列）包含指向该字符串的指针的十六进制表示，而不是文本。因此，上面的语句会产生类似`"0x401a37 message here"`. 旧的宏不会发生这种情况，因为它们总是将长（线程 ID）作为第一个值，现在已被删除。

使用 gdb 进入它表明，对于第一次插入，这调用`operator<<(void const*)`了 ostrstream，而随后的插入调用`operator<< <...>(basic_ostream<...>&, char const*)`（为了便于阅读而删除了模板）。

有人可以解释这种行为吗？什么是解决这个问题的干净方法？我找到了一个简单的解决方法，它`<< left`用作第一个参数 - 这安全吗？有没有更好的方法来做到这一点？

这是一个最小化的示例：

```
#include <strstream>
#include <iostream>

using namespace std;

class Trace : public ostrstream {
    public:
        Trace();
        virtual ~Trace();
};

Trace::Trace() : ostrstream() {}
Trace::~Trace() {
    static_cast< ostrstream& >(*this) <<ends;
    char * text = ostrstream::str();
    cout << "MESSAGE: "<< text <<endl;
    delete[] text;
}

int main(){
    Trace() << "some" << " text" << " here";
    Trace() << left << "some" << " text" << " here";
    Trace() << 123 << " text" << " here";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:39:35.030

首先请注意，`operator<<`作为`const char*`参数的是非成员函数。并且存在一个`void const*`作为参数的成员函数。

在您的代码中，表达式`Trace() << "xyz"`只能调用成员函数，因为`Trace()`创建了一个临时数组，它不能绑定到非成员`operator<<`函数的第一个参数，因为这些函数将第一个参数作为`std::ostream&`非常量引用。因此`Trace() << "xyz"`解析为以参数为参数的*成员* ，该成员打印地址！`operator<<``void*`

* * *

我的建议：

*   不要从流类继承（无论如何`std::ostrstream`都不**推荐使用）。**
*   而是在流类和重载上编写一个简单的包装器`operator<<`

这是一个例子：

```
#include <sstream> //for std::ostringstream

struct Trace
{
   std::ostringstream ss;

   template<typename T>
   Trace& operator << (T const & data)
   {
        ss << data;
        return *this;
   }
   ~Trace()
   {
       std::cout << ss.str() << std::endl;
   }
}; 
```

现在您可以将其用作：

```
Trace() << "Hello World\n" << 100 << "\nBye\n"; 
```

输出：

```
Hello World
100
Bye 
```

[现场演示](http://ideone.com/gfzUd0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T14:40:12.940

它以这种方式工作是因为`Tracer()`是一个临时（右值），不能绑定到`operator<<(basic_ostream<...>&,`.

但是，您可以调用类似的成员函数`operator<<(void const*)`，因为这不需要左值。

然后，成员函数返回对流对象的引用，该引用*可*用于调用`operator<<`序列中的下一个。

以这种方式调用任何成员函数，例如`Tracer() << left`or `Tracer() << flush`，因此将引用“转换”为左值引用是非常安全的。

如果你碰巧有一个兼容 C++11 的编译器，标准库甚至包含一个`operator<<(basic_ostream<...>&&,`为你做这件事的工具。在这种情况下，您不再需要解决方法。

# java - Netbeans 7.2.1 mac javadoc 未找到 Java Me

> ID：14381312
> 
> 赞同：2
> 
> 时间：2013-01-17T14:31:22.200
> 
> 标签：java, netbeans, java-me, javadoc

由于某种原因，Netbeans 无法访问 Java ME 项目中的 javadoc。Netbeans 确实在 Java 桌面应用程序中找到了 javadoc

附上我的 Java ME javadoc 的图像。 ![在此处输入图像描述](../Images/eb37d6813b2517cf4a31fdf243519b74.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:49:14.053

作为这些 jar 文件的替代方案，您可能希望直接从 JCP 网站[http://www.jcp.org/en/jsr/all](http://www.jcp.org/en/jsr/all)下载规范，然后将它们包含的 javadoc 添加到 Netbeans。

相关的 JSR 应该是 139 和 118。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:28:35.207

您是否检查了您的`.../doc`路径是否不为空并且其他文件是否存在？如果有一个 html 格式的 java 文档，您可以制作一个 zip/jar 并添加它。

还要确保您的路径是完整的：

```
jar:file:/<your path here>/yourdoc.jar!/docs/api/ 
```

*`/docs/api`存档中的路径在哪里*

但如果这不起作用，更好的解决方案是**添加在线 javadoc 的 url**而不是文件。

# android - 错误：类型 FriendsActivity.ListAdapter 的方法 getFilter() 未定义

> ID：14381316
> 
> 赞同：1
> 
> 时间：2013-01-17T14:31:33.517
> 
> 标签：android

尝试在列表视图中实现搜索功能在搜索中有问题，在这里我将代码放置在出现错误的地方

```
 friendsearch.addTextChangedListener(new TextWatcher() {
     public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                    // When user changed the Text
                    FriendsActivity.this.adapter.getFilter().filter(cs);
                    //*in the above line i am getting error.*
       }

         public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:37:17.757

似乎`FriendsActivity.this.adapter`有 type `ListAdapter`。如果它实际上是数组适配器，请尝试：

```
((ArrayAdapter<?>) FriendsActivity.this.adapter).getFilter().filter(cs) 
```

**编辑：**

您有以下课程：`class ListAdapter extends BaseAdapter`在您的资源中。BaseAdapter 没有实现过滤器。所以你需要手动实现它。检查本教程：[http ://www.survivingwithandroid.com/2012/10/android-listview-custom-filter-and.html](http://www.survivingwithandroid.com/2012/10/android-listview-custom-filter-and.html)

# windows-8 - 为什么 navigator.js 与 base.js 分开

> ID：14381322
> 
> 赞同：1
> 
> 时间：2013-01-17T14:31:47.543
> 
> 标签：windows-8, winjs

该类的代码`PageControlNavigator`存储在`navigator.js`（由 VS 中的 Navigation App 模板自动添加），但`PageControl`该类的代码存储在`base.js`. 为代码创建一个完全独立的 JS 文件的原因是什么`PageControlNavigator`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:10:26.193

我怀疑除了微软之外的任何人都可以明确地告诉你，但这种分离很可能是因为 navigator.js 旨在由开发人员修改以满足他们的需求（例如，自定义处理导航事件或更改键盘控制导航的方式），而base.js 不能/不应该被修改。

navigator.js 实际上只是一种处理页面控件的便捷方式。它实际上并没有做任何事情来实现它们。如果您愿意，您可以滚动您自己的 navigator.js，并且页面控件的工作方式完全相同。

# java - Java 快速测试以查看代理是否可用

> ID：14381324
> 
> 赞同：0
> 
> 时间：2013-01-17T14:31:48.200
> 
> 标签：java, network-programming, network-protocols

我有一个代理服务器列表，我必须删除所有不可用或在预设超时内没有响应的代理服务器。我试过：

```
isPinghed=InetAddress.getByName("46.183.162.4").isReachable(10000); 
```

但是 isPinghed 总是错误的，我也意识到这个解决方案依赖于操作系统。有人可能会建议另一种解决方案，从 IP 和端口开始测试代理是否在 java 中可用？

# samsung-smart-tv - 三星智能设备信息

> ID：14381326
> 
> 赞同：0
> 
> 时间：2013-01-17T14:31:56.670
> 
> 标签：samsung-smart-tv

我正在构建一个应用程序，该应用程序需要有关其运行的设备的信息，例如制造商、型号及其支持的内容（例如 3D、外部控件（鼠标、键盘等））等等。

在 LG 电视上，我可以通过引用 DOM 元素并读取它的属性来访问它：http: [//developer.lgappstv.com/TV_HELP/index.jsp ?topic=%2Flge.tvsdk.developing.book%2Fhtml%2FAPI %2FAPI%2FProperties2.htm](http://developer.lgappstv.com/TV_HELP/index.jsp?topic=/lge.tvsdk.developing.book/html/API/API/Properties2.htm)

如何在三星设备上执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:47:23.677

找到了！事实证明必须加载`$MANAGER_WIDGET/Common/af/2.0.0/loader.js`，然后您才能访问该`deviceapis`对象。例如：

```
if (deviceapis)
{
    // ermagad
    deviceId = findKey(deviceapis.tv.info, deviceapis.tv.info.getProduct()) + '; ' +
        deviceapis.platform + '; ' +
        deviceapis.tv.info.getDeviceID() + '; ' +
        deviceapis.tv.info.getModel() + '; ' +
        deviceapis.tv.info.getFirmware() + '; ' +
        deviceapis.tv.info.getCountry() + '; ' +
        deviceapis.tv.info.getLanguage() + '; ' +
        deviceapis.tv.info.getVersion() + '; ' +
        findKey(deviceapis.displaycontrol, deviceapis.displaycontrol.get3DEffectMode()) + '; ' +
        findKey(deviceapis.audiocontrol, deviceapis.audiocontrol.getOutputMode());
} 
```

# sql-server - SSIS - 从工作表中读取数据并将每一行传递给存储过程

> ID：14381329
> 
> 赞同：1
> 
> 时间：2013-01-17T14:32:05.920
> 
> 标签：sql-server, ssis

我需要从 excel 表中读取数据并将每一行作为参数传递给存储过程。我添加了 Ole db Source 以从 Excel 获取数据。但那又如何呢？

关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:40:13.097

为包含存储过程的 SQL 数据库添加连接管理器。

将 Excel 中的结果集输入`OleDB Data Source`到`OleDB Command`, 并在命令的编辑器中：

*   **连接管理**器选项卡 - 选择新的 SQL 连接管理器
*   **组件属性**选项卡 - 将“SQLCommand”设置`EXEC your_stored_proc ?, ?, ?`为要传递给存储过程的每个参数都带有问号。
*   **列映射**选项卡 - 将您的输入字段映射到 ? 占位符。

# permissions - 使用 wix 设置文件夹的权限

> ID：14381333
> 
> 赞同：0
> 
> 时间：2013-01-17T14:32:13.413
> 
> 标签：permissions, wix

我是 wix 安装程序的新手，在构建应用程序后创建 msi。我要创建一个msi。安装该 msi 时，它更喜欢位置为“C:/Program Files(x86)/Folder1/Folder2”。安装后Folder2 将包含应用程序dll、exe 文件等。

**我可以从默认的主管理员用户帐户（例如 user1）启动我的应用程序。**

如果我的系统有另一个具有标准权限的用户帐户（例如 user2），**我无法从该用户帐户启动我的应用程序。**

```
so problem is user2 is not having permission to access "C:/Program Files(x86)/Folder1/Folder2" this path. 
```

我如何在安装前在 wix 中设置它。？是否可以在为我的应用程序创建 msi 安装程序之前进行设置？

提前致谢 ：）

# javascript - 动态创建链接

> ID：14381334
> 
> 赞同：1
> 
> 时间：2013-01-17T14:32:19.027
> 
> 标签：javascript, google-maps

我正在制作基于谷歌地图的应用程序。现在用户输入一些位置。我想创建一个链接，其中包含用户输入的所有位置。用户有 10 个位置的限制。

现在我想动态创建一个请求谷歌这些位置之间的距离。当我不知道用户输入了多少位置时，如何动态创建链接。

这是 Google 文档中两个位置的基本链接：

[http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false](http://maps.googleapis.com/maps/api/distancematrix/json?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Victoria+BC&mode=bicycling&language=fr-FR&sensor=false)

这使：

温哥华到旧金山 温哥华到维多利亚 西雅图到旧金山 西雅图到维多利亚

现在如果我有很多输入，如何使用 javascript 动态创建这个链接？

感谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:40:49.080

您可能会发现使用 google maps api 中的 distanceMatrix 类更容易，它接受 js 对象并处理将结果传递给回调的请求。

谷歌示例的修改版本：

```
var origins = ["Vancouver BC", "Seattle"];
var destinations = ["San Francisco", "Victoria BC"];
var service = new google.maps.DistanceMatrixService();
service.getDistanceMatrix(
{
    origins: [origins],
    destinations: [destinations],
    travelMode: google.maps.TravelMode.BICYCLING,
}, callback);

function callback(response, status) {
// Response contains the same object as the one from the link
} 
```

[https://developers.google.com/maps/documentation/javascript/distancematrix](https://developers.google.com/maps/documentation/javascript/distancematrix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:47:03.700

url 参数似乎由以下元素组成：

```
// Url,
# http://maps.googleapis.com/maps/api/distancematrix/json?

// Origin locations:
# origins=Vancouver+BC|Seattle
// Destinations:
# &destinations=San+Francisco|Victoria+BC
// (And some additional options:)
# &mode=bicycling
# &language=fr-FR
# &sensor=false 
```

现在，如果您有 2 个包含位置的数组，那么构建 url 非常简单：

```
var origins = ["Vancouver BC", "Seattle"];
var destinations = ["San Francisco", "Victoria BC"];

var url = "http://maps.googleapis.com/maps/api/distancematrix/json?"+
    "origins=" +
    origins.join('|').replace(/ /g,'+') +
    "&destinations=" +
    destinations.join('|').replace(/ /g,'+') +
    "&mode=bicycling&language=fr-FR&sensor=false"; 
```

`.join('|')`将数组元素与中间的管道 ( `|`) 字符连接在一起，因此`origins.join('|')`返回`"Vancouver BC|Seattle"`.
然后，用加号 ( )`.replace(/ /g,'+')`替换字符串中的所有空格。`+`

您可以向这些阵列添加任意数量的位置。

# sql - 如何在 SELECT 的一系列 JOIN 中引用“父”表

> ID：14381338
> 
> 赞同：0
> 
> 时间：2013-01-17T14:32:34.267
> 
> 标签：sql, sql-server

我试图修改的现有代码类似于：

```
SELECT * FROM <table1>
JOIN
( SELECT * FROM <table2>
    WHERE GETDATE() BETWEEN <fields from table2> ) 
```

我需要更改 GETDATE() 以引用 table1 中的字段

我宁愿使更改尽可能小和本地化，以免在其他地方引起问题，所以我希望有一些简单的方法可以从初始 SELECT 中引用当前值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:37:38.437

您可以“命名”一个表以在语句的其他地方引用：

```
SELECT * FROM <table1> AS t1
JOIN
( SELECT * FROM <table2>
    WHERE t1.field BETWEEN <fields from table2> ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:34:21.493

给表一个别名，您可以使用该子查询在子查询中引用它。

虽然您应该能够只使用连接：

```
SELECT * FROM <table1> 
INNER JOIN <table2>
    ON <table1>.DateField BETWEEN <fields from table2> 
```

# facebook - Facebook php sdk api('/me')，并不总是响应

> ID：14381340
> 
> 赞同：0
> 
> 时间：2013-01-17T14:32:37.997
> 
> 标签：facebook, yii, facebook-php-sdk

目前我正在尝试获取我登录用户的信息。但是我遇到了一个问题，我在 Yii 的一个函数中构建了它，这确实有效。但有时它不会。

当我转到该功能时，它会执行以下操作：

```
$accesToken = Yii::app()->facebook->getAccessToken();
$results = Yii::app()->facebook->api('/me');
print_r($results); 
```

当我启动它时，我得到了所有信息，但是当我刷新同一页面时，它给出了以下错误：

```
Error 500
An active access token must be used to query information about the current user. 
```

最奇怪的是，当我等待几秒钟并再次刷新时，它会给我用户的信息，就像第一次加载函数时一样。

所以我真的被困在如何解决这个问题上，因为我真的不知道为什么它一次有效，而不是第二次。

整个功能是：

```
public function actionLogin() {
    $facebookID = Yii::app()->facebook->getUser();

    if($facebookID == 0) {

            echo 'No Facebook id.';

    } else {
        $record = Users::model()->findByAttributes(array('FB_id'=>$facebookID));
        if($record===null) {

            echo 'Got facebookID but not in database!';
            echo $facebookID;
        } else {

            $accesToken = Yii::app()->facebook->getAccessToken();
            $results = Yii::app()->facebook->api('/me');
            print_r($results);
            echo '<br><br>';
            echo $accesToken;
            //echo 'Got facebookID and is in database!';
        }
    }
    /*
    echo $facebookID;
    echo '<br>';
    echo $accesToken;
    */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T12:11:18.627

这对我[有用：访问令牌有效，但我们得到 OAuthException：活动访问令牌错误](https://stackoverflow.com/questions/13777181/the-access-token-is-valid-but-we-get-oauthexception-an-active-access-token-erro)

```
public function __construct() {
    $this->facebook = new Facebook(array(
        'appId'  => $this->appId,
        'secret' => $this->appSecret,
    ));
    $this->facebook->setAccessToken(Yii::app()->session['access_token']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:30:29.717

尝试`$results = Yii::app()->facebook->api('/me?access_token=' . $accesToken);`

# java - 如何让 Jenkins 将我的项目部署到 JBoss EAP(AS7)

> ID：14381345
> 
> 赞同：11
> 
> 时间：2013-01-17T14:32:54.987
> 
> 标签：java, maven, jboss, jenkins, jboss7.x

如何让 Jenkins 将我的项目部署到 JBoss EAP(AS7)？

我看到 Jenkins 可以将项目部署到 JBoss 5.x，如果它构建好，但是如果它构建好，我怎样才能让它部署到 AS7 或 EAP？有人可以告诉我这是否可以做到。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T15:16:28.990

您可以使用官方的[JBoss Application Server Maven 插件](https://github.com/jbossas/jboss-as-maven-plugin)。

将其附加到`install`阶段并配置 Jenkins 以执行`mvn clean install`. 如果你不喜欢附加执行，你可以直接调用它：
`mvn jboss-as:deploy`

这是构建设置的示例：

```
 <plugin>
        <groupId>org.jboss.as.plugins</groupId>
        <artifactId>jboss-as-maven-plugin</artifactId>
        <version>7.1.1.Final</version>
        <configuration>
            <hostname>${deploy.jboss.host}</hostname>
            <port>${deploy.jboss.port}</port>
            <username>${deploy.jboss.user}</username>
            <password>${deploy.jboss.password}</password>
            <name>${backend.deployment-name}</name>
            <filename>${project.build.finalName}.war</filename>
            <skip>${skipDeployment}</skip>
        </configuration>
        <executions>
            <execution>
                <id>deploy-jar</id>
                <phase>install</phase>
                <goals>
                    <goal>deploy</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
</plugins>
</build> 
```

**编辑**Jenkins 配置 - 创建 maven 项目后，会设置要执行的目标。搜索**构建**配置，然后在此处搜索标记为**目标和选项**的输入 - 在此输入中输入目标。

配置 Jboss AS 插件 - 请参阅上面**pom**片段`<configuration>`中的部分- 您可以将127.0.0.1 设置为本地测试。**`<hostname>`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:40:48.820

您目前如何将应用程序部署到 jboss？如果您使用的是脚本，则可以让 jenkins 调用该脚本。**

# c++ - 提前申报有什么危险？

> ID：14381348
> 
> 赞同：27
> 
> 时间：2013-01-17T14:33:08.457
> 
> 标签：c++, forward-declaration

我刚刚接受了采访。有人问我什么是“前向声明”。然后我被问到它们是否是与提前声明相关的危险。

我无法回答第二个问题。在网上搜索并没有显示任何有趣的结果。

那么，有人知道与使用前向声明相关的任何危险吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T15:12:22.133

好吧，除了关于重复的问题......

...标准中至少有一个痛点。

如果你调用`delete`一个指向不完整类型的指针，你会得到未定义的行为。在实践中，析构函数可能不会被调用。

我们可以使用以下命令和示例在[LiveWorkSpace上看到：](http://liveworkspace.org/code/fiKs6%242)

```
// -std=c++11 -Wall -W -pedantic -O2

#include <iostream>

struct ForwardDeclared;

void throw_away(ForwardDeclared* fd) {
   delete fd;
}

struct ForwardDeclared {
   ~ForwardDeclared() {
      std::cout << "Hello, World!\n";
   }
};

int main() {
   ForwardDeclared* fd = new ForwardDeclared();
   throw_away(fd);
} 
```

诊断：

```
Compilation finished with warnings:
 source.cpp: In function 'void throw_away(ForwardDeclared*)':
 source.cpp:6:11: warning: possible problem detected in invocation of delete operator: [enabled by default]
 source.cpp:5:6: warning: 'fd' has incomplete type [enabled by default] 
 source.cpp:3:8: warning: forward declaration of 'struct ForwardDeclared' [enabled by default]
 source.cpp:6:11: note: neither the destructor nor the class-specific operator delete will be called, even if they are declared when the class is defined 
```

难道你不想感谢你的编译器警告你；）？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T14:36:26.733

我想说任何危险都被收益所掩盖。不过有一些，主要与重构有关。

*   重命名类会影响所有前向声明。这当然也带有包含，但是错误是在不同的地方产生的，所以更难发现。
*   将类从一个类移动`namespace`到另一个类，再加上`using`指令，可能会造成严重破坏（神秘的错误，难以发现和修复）——当然，`using`指令一开始是不好的，但没有代码是完美的，对吧？*
*   **模板**- 要转发声明模板（尤其是用户定义的模板），您需要签名，这会导致代码重复。

考虑

```
template<class X = int> class Y;
int main()
{
    Y<> * y;
}

//actual definition of the template
class Z
{  
};
template<class X = Z> //vers 1.1, changed the default from int to Z
class Y
{}; 
```

之后该类`Z`被更改为默认模板参数，但原来的前向声明仍然是`int`.

[*我最近遇到了这个：](https://stackoverflow.com/questions/14235780/forward-declarations-cause-errors-after-code-refactor)

### 原来的：

定义：

```
//3rd party code
namespace A  
{
   struct X {};
} 
```

和前向声明：

```
//my code
namespace A { struct X; } 
```

### 重构后：

```
//3rd party code
namespace B
{
   struct X {};
}
namespace A
{
   using ::B::X;
} 
```

这显然使我的代码无效，但错误不在实际位置，并且修复至少可以说是可疑的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-17T08:26:39.667

前向声明是**C++ 缺少模块**（将在 C++17 中修复？）和使用头文件包含的症状，如果 C++ 有模块，则根本不需要前向声明。

前向声明不亚于“合同”，通过使用它，**您实际上承诺**您将提供某些东西的实现（在同一源文件中之后，或通过稍后链接二进制文件）。

**这样做的缺点是你实际上必须遵守你的合同**，这不是什么大问题，因为如果你不遵守你的合同，编译器会以某种方式提前抱怨，但在某些语言中，代码只是被执行而不需要“承诺它自己的存在”（谈到动态类型语言）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-17T14:36:52.760

如果将指向不完整类类型的指针传递给`delete`，则`operator delete`可能会忽略重载。

这就是我所得到的......而且要被咬，你必须这样做，*但源文件中没有其他*会导致“不完整类型”编译器错误的东西。

**编辑：**在其他人的带领下，我想说困难（可能被认为是危险）是确保前向声明实际上与真实声明相匹配。对于函数和模板，参数列表必须保持同步。

并且您需要在删除它声明的东西时删除前向声明，否则它会闲置并破坏命名空间。但即使在这种情况下，如果它妨碍了编译器，编译器也会在错误消息中指向它。

更大的危险是*没有*提前声明。嵌套类的一个主要缺点是它们不能被前向声明（嗯，它们可以在封闭的类范围内，但这只是简短的）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-17T14:38:55.543

前向声明的唯一危险是当您在标头之外或在非共享标头中进行前向声明时，前向声明的签名与前向声明的任何内容的实际签名不同。如果您在 中执行此操作`extern "C"`，则在链接时将不会有名称修改来检查签名，因此当签名不匹配时，您最终可能会出现未定义的行为。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-15T15:00:11.490

我在[Google C++ Style Guide中发现了一个有趣的片段](https://google.github.io/styleguide/cppguide.html#Forward_Declarations)

他们指出的危险来自在不完整类型上实现功能。通常，这编译器会抛出一个错误，但因为这些是指针，它可以通过网络溜走。

> 可能很难确定是否需要前向声明或完整的#include。用前向声明替换 #include 可以默默地改变代码的含义：
> 
> ```
> // b.h:
> struct B {};
> struct D : B {};
> 
> // good_user.cc:
> #include "b.h"
> void f(B*);
> void f(void*);
> void test(D* x) { f(x); }  // calls f(B*) 
> ```
> 
> 如果#include 被替换为B 和D 的前向decls，test() 将调用f(void*)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T15:34:49.143

前向声明的另一个危险是它更容易违反单一定义规则。假设你有 ah 前向声明`class B`（应该在 bh 和 b.cpp 中），但在 a.cpp 中你实际上包含了 b2.h，它声明了一个与`class B`bh 不同的，那么你会得到未定义的行为。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-04T08:57:16.567

前向声明本身并没有那么危险，但它是一种代码味道。如果您需要前向声明，则意味着两个类是紧密耦合的，这通常是不好的。因此，这表明您的代码可能需要重构。

在某些情况下，紧密耦合是可以的，例如，状态模式实现中的具体状态可能是紧密耦合的。我会认为这没问题。但在大多数其他情况下，我会在使用前向声明之前改进我的设计。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-17T15:09:05.000

第一种方法是重新排序我们的函数调用，因此 add 在 main 之前定义：

这样，当 main() 调用 add() 时，它就已经知道 add 是什么了。因为这是一个如此简单的程序，所以这种改变比较容易做到。然而，在一个大型程序中，试图破译哪些函数调用了哪些其他函数以便能够以正确的顺序声明它们将是非常乏味的。

# jquery - 在 fancybox 中显示带有 swf 文件的 iframe

> ID：14381354
> 
> 赞同：1
> 
> 时间：2013-01-17T14:33:16.403
> 
> 标签：jquery, iframe, fancybox, flash

我正在尝试使用 jQuery fancybox 插件（版本 2）解决 IE8 问题

我需要在花式框中显示一个带有一些文本和 iframe 的 div。在 iframe 中加载的页面包含一个 Flash 应用程序。我的代码如下：

```
<a class="fancybox" href="#myDiv">

<div id="myDiv" style="display:none;">
    <iframe width="580" height="420" style="overflow-y: hidden;" scrolling="no" src="http://urlwithflashapp/"></iframe>     
    <div style="width:550px">
        Some text here
    </div>
</div> 
```

JavaScript：

```
$(function () {
    $(".fancybox").fancybox();  
}); 
```

这适用于 IE8 以外的所有其他浏览器。在 IE8 中，flash 应用程序永远不会出现。它只显示一个带有边框的空白框。

有谁知道这方面的解决方法？:-)

提前致谢。

# javascript - knockout.js 可以绑定到 CSS 类吗？

> ID：14381357
> 
> 赞同：2
> 
> 时间：2013-01-17T14:33:28.003
> 
> 标签：javascript, css, knockout.js, refactoring

假设我有一个充满定义的大型 JS 文件，例如：

```
$(document).on('focusin', '.field', function () {
    // some logic
}).on('focusout', '.field', function () {
    // some logic
}); 
```

在选择器引用 的地方`#element`，我可以轻松地将其重构为淘汰视图模型 - 我只需`data-bind`为元素上的操作添加一个属性，并将逻辑移动到视图模型中。
但是在那些“CSS 绑定事件”的接线情况下，我看不出它是如何完成的......

**这里的常见/推荐做法是什么？我应该把它放在我闪亮的淘汰码旁边吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:51:49.270

You can use a custom binding provider to use Knockout bindings without having to define `data-bind` attributes. Here are some examples and further info:

*   [http://www.knockmeout.net/2011/09/ko-13-preview-part-2-custom-binding.html](http://www.knockmeout.net/2011/09/ko-13-preview-part-2-custom-binding.html)
*   [http://jsfiddle.net/StevenSanderson/n7h2A/1/](http://jsfiddle.net/StevenSanderson/n7h2A/1/)
*   [Unobtrusive Knockout](https://stackoverflow.com/q/13451414/1287183)
*   [https://github.com/rniemeyer/knockout-classBindingProvider](https://github.com/rniemeyer/knockout-classBindingProvider)
*   [https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki](https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:40:34.850

我做类似创建自定义绑定的事情。

[http://knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

重点看例子：

```
ko.bindingHandlers.hasFocus = {
    init: function(element, valueAccessor) {
        if(element.hasClass('yourClass') {
            var value = valueAccessor();
            value(true);
        }          
    },
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        if (ko.utils.unwrapObservable(value))
            element.attr('class', 'somethingElse');
        else
            element.toggleClass('somethingToToggle');
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:41:52.067

我认为你所拥有的很好，也许你的问题更多是关于如何组织你的代码。如果是这样，我建议您查看[tekpub 中的此代码示例](https://github.com/tekpub/mvcmusic/tree/master/MvcMusicStore/assets/js)，并了解 Rob Conery 如何构建他的应用程序。

本质上，他使用命名空间来封装与淘汰相关的代码，并使用相同的模式来封装事件的连接。

我要查看的文件是 application.js、order_editor.js 和他实例化他的东西的[这个 html 文件。](https://github.com/tekpub/mvcmusic/blob/master/MvcMusicStore/views/Orders/Edit.cshtml)

您还可以通过使用诸如[requirejs](http://requirejs.org)之类的东西来根据需要加载内容来获得更高级的体验。

# iphone - NSTimer 与 UIScrollView 分页

> ID：14381358
> 
> 赞同：0
> 
> 时间：2013-01-17T14:33:31.380
> 
> 标签：iphone, ios, scrollview

我已经有一个带有图像的滚动视图，并且我将 IB 中的分页设置为打开，所以我没有使用 pageControl。一切正常，我可以在图像之间切换，但我怎样才能让它自动滚动呢？喜欢 App Store 精选页面上的内容吗？

我正在考虑拥有两个 NSTimers - 一个在 0.3 秒内滚动 320 点，另一个在 4 秒内计数，然后触发第一个。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:13:59.567

而不是使用`NSTimer`你可以使用`[self performSelector: withObject: afterDelay:]`

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    // start repeatable method
    [self performSelector:@selector(makeTick) withObject:nil afterDelay:4.0f];
}

- (void) makeTick {

    [self performSelector:@selector(makeTick) withObject:nil afterDelay:0.3f];

    // Calclulate new offset
    CGPoint pt = self.scrollView.contentOffset;
    pt.x += self.scrollView.frame.size.width;
    // If it's a last subview in scrollview return back
    if (!(pt.x < self.scrollView.contentSize.width)) {
        pt.x = 0;
    }
    [self.scrollView setContentOffset:pt animated:YES];
} 
```

但！这是一个简单的例子，如何让你滚动“动画”。如果您想在 AppStore 中进行“不定式”滚动行为，则必须使用另一种解决方案。

检查[本教程](http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html)以制作圆形和不定式滚动视图。

# asp.net-web-api - 使用带有委托的 JWT 令牌 (ActAs)

> ID：14381363
> 
> 赞同：3
> 
> 时间：2013-01-17T14:33:49.333
> 
> 标签：asp.net-web-api, wif, claims-based-identity, jwt

我有一个使用 WIF 和 .NET 4.5 实现的基于声明的身份验证系统的工作实现。它包含通常的部分：

*   具有被动和主动端点的自定义 STS
*   后端 WCF 服务
*   前端 MVC 应用程序
*   前端 WebApi 应用程序

从前端应用程序到后端 WCF 服务的调用使用委托身份验证，因此用户在前端应用程序中进行身份验证，应用程序使用 ActAs=BootstrapToken 请求新令牌，然后调用 WCF 服务。

这一切都与 SAML 令牌一起正常工作。

现在我想使用 JWT 令牌与 WebApi 对话，因此我在我的 STS 和 WebApi 项目中安装[了 Microsoft .Net Framework 4.5 Nuget 包的 JSON Web 令牌处理程序。](https://nuget.org/packages/Microsoft.IdentityModel.Tokens.JWT)

所以我让我的 STS 正确地发出签名的 JWT 令牌，而我的 WebApi 依赖方验证了相同的令牌。一切都好。

**问题：**

如果我在我的 RST 的 ActAs 字段中使用 JWT 令牌，它将在**没有**签名的情况下发送，因此它自然会被 STS 拒绝。似乎 SecurityTokenHandler.ReadToken() 方法返回的令牌返回一个没有任何签名信息的令牌。

现在我的困境是：这是 JWT 令牌支持的场景吗？据我了解，与 SAML 令牌相反，JWT 令牌不携带验证签名的所有信息，那么还有其他限制吗？

另一方面，如果确实支持，那么之前是否有人实施过，或者有什么想法？这是开发人员预览版，所以它可能是一个错误吗？

*编辑*

这是说明问题的示例。该代码在 STS（可以访问签名密钥）和依赖方（可以访问证书的公钥）中运行时产生相同的结果：

```
System.Diagnostics.Debug.WriteLine("Raw Token       : {0}", (object)rawToken);

var readToken = this.identityConfiguration.SecurityTokenHandlers.ReadToken(rawToken);

this.identityConfiguration.SecurityTokenHandlers.ValidateToken(readToken);

var serializedToken = this.identityConfiguration.SecurityTokenHandlers.WriteToken(readToken);

System.Diagnostics.Debug.WriteLine("Serialized Token: {0}", (object)serializedToken); 
```

产生以下

```
Raw Token       : eyJAi(...)x3a9.eyJvYXB(...)DYzWiJ9.y-lT(...)PyBUTw
Serialized Token: eyJAi(...)x3a9.eyJvYXB(...)DYzWiJ9. 
```

因此，很明显，读/写往返会丢失签名信息。我可以理解为什么这会发生在 RP 中，但不会发生在 STS 中。

*编辑 2*

所以这是当前的`JWTSecurityTokenHandler.WriteToken(SecurityToken token)`实现：

```
public override string WriteToken(SecurityToken token)
{
    Utility.VerifyNonNullArgument("token", token);
    JWTSecurityToken jWTSecurityToken = token as JWTSecurityToken;
    if (jWTSecurityToken == null)
    {
        throw new SecurityTokenException(string.Format(CultureInfo.InvariantCulture, "JWT10200: This instance of JWTSecurityTokenHandler can only write SecurityTokens of type '{0}', a SecurityToken of type '{1}' was received.", new object[]
        {
            typeof(JWTSecurityToken),
            token.GetType()
        }));
    }
    string text = string.Empty;
    string text2 = string.Format(CultureInfo.InvariantCulture, "{0}.{1}", new object[]
    {
        jWTSecurityToken.EncodedHeader,
        jWTSecurityToken.EncodedPayload
    });
    if (jWTSecurityToken.SigningCredentials != null)
    {
        text = this.Sign(text2, jWTSecurityToken.SigningCredentials);
    }
    return string.Format(CultureInfo.InvariantCulture, "{0}.{1}", new object[]
    {
        text2,
        text
    });
} 
```

通过研究，很明显，写入的令牌在 RP 中永远不会有其签名，因为我们没有签名凭证。所以这看起来不像是一个错误，而是一个实施决定。我只是不明白为什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:01:11.227

这既不是安全（或任何其他）错误，也不是实现决策。Write 可以生成带有签名的 JWT 的唯一位置是发布点。令牌发行者以外的任何一方都不应该尝试重新创建它（这就是您所说的读写往返）。当您收到签名的 JWT 时，您只能验证和阅读它。您可以按原样自由地重新传输原始 JWT，但您将无法“正确”重建它，因为您不是颁发者并且没有适当的签名密钥。

这就是签署令牌背后的原因：只有原始发行人才能正确签署它。

如果您愿意，我可以尝试帮助您使用安全令牌和 STS 设计正确的场景，但为此，请分享您正在实施的场景的序列图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:14:23.847

如果这是一个错误，我不会感到惊讶 - JWT 处理程序仍处于预览模式。

但也许你不想为 Web API 服务做全面的 ActAs - 看看这里：

[http://blogs.msdn.com/b/vbertocci/archive/2013/01/09/using-the-jwt-handler-for-implementing-poor-man-s-delegation-actas.aspx](http://blogs.msdn.com/b/vbertocci/archive/2013/01/09/using-the-jwt-handler-for-implementing-poor-man-s-delegation-actas.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T17:21:20.963

看看 JWTSecurityToken.RawData。其中包含原始编码令牌。并且应该有原始发行人的签名。

# android - 在哪些情况下，Android 上的文件操作会引发 SecurityException？

> ID：14381368
> 
> 赞同：1
> 
> 时间：2013-01-17T14:34:02.180
> 
> 标签：android, file, securityexception

我使用 File.java 类。它的大部分方法都可以抛出 SecurityException。但我没有找到任何关于它抛出的案例的信息。

我查看 android 源代码并找到以下内容：不同的 File 方法执行此类调用

```
 SecurityManager security = System.getSecurityManager();
    if (security != null) {
        security.e(path);
    } 
```

或 checkWrite() / checkDelete() 在所有这些情况下，SecurityManager 创建 FilePermission 对象并在 Context.checkPermission() 中对其进行验证

```
public void checkRead(String file, Object context) {
    checkPermission(new FilePermission(file, "read"), context);
} 
```

实际上，从这段代码中，我不知道当前上下文何时会拒绝某些文件操作并抛出 SecurityException（除了未在清单权限中声明的琐碎情况）。我想当应用程序尝试访问受保护的目录（如“root”或“date”）时也会抛出它。但还有什么时候？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:41:00.280

SecurityExceptions 适用于当您尝试执行您的应用程序无权执行的操作时。即在清单中列出的没有 WRITE_EXTERNAL 权限的情况下写入 SD 卡。

据我所知，清单中缺少权限是引发 SecurityException 的唯一方法。然而，值得注意的是，无论何时处理文件 i/o，也可能存在其他异常，例如 IOException。

# parallel-processing - 用于并行 Web 服务调用的 Rx 框架

> ID：14381370
> 
> 赞同：0
> 
> 时间：2013-01-17T14:34:07.437
> 
> 标签：parallel-processing, system.reactive

我可以使用 Rx 框架同时运行多个进程而不阻塞 UI 吗？假设我想从我的 WPF UI 同时调用不同的 web 服务 [可能是 1000 或更多]。以及每个 Web 服务调用的结果，我需要将其更新到 UI 中的网格。我使用任务和并行完成了它。但是当我开始这个过程时，Parallel foreach 只从 1000 个服务调用开始。第一次，它需要 15 或 20，之后它会调用下一个 20 或 15，等等。所以这不是我想要的。所有 1000 次调用应该同时发生，每个调用都应该处理它的结果并更新回网格！

这种类型的操作是否可以使用 RX 框架？如果是，可以在这件事上提供任何指导方针吗？我是RX的新手。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:25:18.093

我建议你看看 ForkJoin 方法：[http](http://rxwiki.wikidot.com/101samples#toc3) ://rxwiki.wikidot.com/101samples#toc3 。它在 Rx 实验中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:18:50.287

做你想做的事真的很容易。

以下是查询结构的示例：

```
var query =
    from n in Observable.Range(0, 100)
    from t in webServiceCall(n)
    select new { n, t }; 
```

该`webServiceCall`函数具有以下签名：`Func<int, IObservable<string>>`.

我使用以下方法测试了上述内容：

```
Func<int, IObservable<string>> webServiceCall =
    n =>
        Observable
            .Return(n.ToString() + "!")
            .Delay(TimeSpan.FromSeconds(1.0)); 
```

...并通过此订阅：

```
query.ToArray().Subscribe(results =>
{
    /* array of results here */
}); 
```

我在一秒钟内得到了所有的结果。

我确实尝试过`Observable.Range(0, 1000)`，但在 LinqPad 中出现内存不足错误，因此您可能需要注意环境中的限制。

# php - 根据用户的时区获取时间 - PHP

> ID：14381379
> 
> 赞同：1
> 
> 时间：2013-01-17T14:34:28.013
> 
> 标签：php, time, timezone

我正在开发一个关于体育的问答论坛。我如何获取登录用户的时区，以便根据该时区发布他/她的查询。目前我正在这样做

```
Javascript 
var current_date = new Date(); var clock=current_date.getTimezoneOffset() / 60; gmt= -1 * clock; 
$.post("receive.php",{gmt:gmt});

Receive.php
<?php // set timezone
if(isset($_POST['gmt'])) 
{
    $_SESSION['timezone']=$_POST['gmt']*60*60;        
}
?> 
```

但它不适用于那些禁用 Javascript 的用户。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:39:52.553

一种解决方案可能是：
1.Retrieve the ip of your user

```
$ipaddress = $_SERVER["REMOTE_ADDR"]; 
```

2.使用[地理位置ip数据库](http://ipinfodb.com/ip_location_api.php)分析ip地址。
3.获取该位置的时区

# c++ - 如何使用仿函数为自定义容器创建通用插入函数

> ID：14381380
> 
> 赞同：1
> 
> 时间：2013-01-17T14:34:35.133
> 
> 标签：c++, c++03

在这一点上，我并不担心这是我的问题的正确解决方案（事实上，它不是）但我遇到了这个问题，我无法解决它，所以它一直困扰着我，我不能松手。

我有一个用于 POD 类型的通用容器。这个容器可以通过不初始化内存并且出于性能原因不调用任何构造函数或析构函数来避免复制，以换取让用户对此负责（这对于 pod 和我们的用例来说并不是什么大问题）。

这是一个关于如何使用它的非常简单的演示。

```
template <typename Pod_Type>
class PodContainer
{
public:
   //stl-like iterators for compatibility with stl-algorithms
   Pod_Type* begin();
   Pod_Type* end();
   //special "insertion" function that inserts a non-initialized pod
   Pod_Type* new_empty();

   //This "something" is my problem. I guess this has to be a functor. 
   //More on this later
   Something generic_insert;

private:
    Pod_Type* mStorage; //Allocated space for pods
};

//Simple structure to use as example
struct PodA
{
   int x,y,z;
};

//Function to initialize a pod of type podA with the given params
inline
init_podA( podA* ptr, int a, int b, int c) 
{
   ptr->x = a; ptr->y = b; ptr->z = c;
}

int main()
{
  //Create a buffer
  PodContainer<podA> buff;

  //Insert some elements and intialize them "by hand"
  for (int i=0; i < 10 ; ++i)
  {
     init_podA( buff.new_empty(), 1,2,3);
  }
} 
```

请注意，容器类的所有内存管理问题都已解决（我已经对其进行了广泛的测试），并且容器本身非常适合我的实际问题。

现在是有趣的部分。我想让这个“东西”从容器**内部**调用我的 init_podA 函数。显然，我无法在 Buffer 类中硬连线，因为我什至不知道用户的 pod 类型需要下一个 init_xxx 函数需要多少参数。我开始考虑将第二个参数模板传递给 PodContainer 类的想法，其中第二个是一个特征类，我可以查询包装对真正初始化函数的调用的函子。在 PodContainer 类中，我可以查询特征类并保存将在那里构造的仿函数，该仿函数将由用户调用并给人一种成员函数的印象。

我的想法是我会像这样使用这些特征：

```
template<typename PodType, typename PodTraits = MyPodTraits<PodType> >
class PodContainer
{
 PodContainer():
      generic_insert(PodTraits::get_inserter(this))
 //The rest of the PodContainer definition
 ....    

//And the user of the container would see this
PodContainer<PodA> buffer;
buffer.generic_insert(a,b,c); //Calls buffer->new_empty and initializes a pod 
```

这甚至可能吗？我想我会使用一些 boost::bind 诡计，对吗？函子的类型是什么，所以我可以在容器中接收它？有没有更好的选择？？

谢谢！！

编辑：请注意，我不能使用 c++11 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:14:15.057

只要您不能使用 C++11（和可变参数模板），您就可以始终坚持不懈地为每个可能数量的参数提供重载。像这样：

```
void generic_insert(void (*init)(PodType*)) { init(new_empty()); }

template<typename A1>
void generic_insert(void (*init)(PodType*, A1), A1 a1) { init(new_empty(), a1); }

/* and so on ... */ 
```

# javascript - html5 msie javascript 让 DOM 处理在 MSIE 中工作

> ID：14381382
> 
> 赞同：2
> 
> 时间：2013-01-17T14:34:38.473
> 
> 标签：javascript, html, internet-explorer, dom

我在获取简单的 HTML5 DOM 处理以在 MSIE 9 上工作时遇到问题。它在没有 DOCTYPE 标记的情况下工作。但是由于包含 DOCTYPE html（表示 html5），MSIE 9 不会处理它。有没有另一种方法可以做到这一点，以便它像 html5 一样工作？

该代码尝试通过获取 DOM 节点并通过标签名称从中获取元素来创建 nodeList。简单的测试是显示 nodeList.length。这是我认为正在构建的应用程序中的一个较大问题的一个小示例。但我认为，在这里展示一小段代码要比向您展示我的整个应用程序要好。

以下代码适用于 Chrome、Firefox、Opera 和可能更多...但不适用于 MSIE 9。我也有它在线，所以您只需单击[此链接](http://isr.servequake.com:8080/MopDel/displayListTest2.htm)（只要我正在运行）并尝试它；然后复制地址在其他浏览器中尝试。我还删除了“<！DOCTYPE html>”，然后它可以在 MSIE 中使用。但是没有浏览器会知道它是html5（如果我理解正确的话）。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript">
function setOptions () {

  var ndiv = document.getElementById("products");
  var OptionList = ndiv.getElementsByTagName("option");

 document.getElementById("dump").innerHTML = "OptionList.length " + OptionList.length;

}
</script>
</head>
<body onload="setOptions()">
<br/><br/><br/>
<div id="dump"></div>
<div id="products" style="display:none">
  <option>MOTOR</option>
  <option>CHASSI</option>
  <option>ELECTRIC</option>
  <option>BRAKES</option>
  <option>TIRES</option>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:09:50.457

您正在使用无效标记。选项元素不应该是 div 元素的子元素。如果您将具有产品 ID 的 div 元素改为选择元素，它将按预期工作。

由于 IE9 没有 HTML5 解析器，因此您无法保证无效标记会发生什么，并且可能会发生这样的意外结果。IE10 有一个 HTML5 解析器，因此与其他浏览器一样处理错误情况。

# c# - 如果 sql 查询的输出为空，则将标签值分配为零

> ID：14381383
> 
> 赞同：0
> 
> 时间：2013-01-17T14:34:40.853
> 
> 标签：c#

我是 c# 的新手，我正在研究 winform c#。我有一个查询，结果是列值的总和。总和设置为 label.text 可见性，默认值为 0 即零我的代码是

```
 string interoo = "select sum(charge) from table2 
where datepart(mm,given_schedule)= @yourMonthSelected and 
datepart(yy,given_schedule)= @yourYearSelected"; 
```

问题是当没有搜索结果时意味着输出什么都没有然后营业额.text设置为null意味着在winform中它不可见文本是空白我认为它返回dbnull值但是如果没有如何设置它为0找到搜索结果。如果找到搜索结果，那么它将是相同的，但如果它是空白的，那么我不希望它是空白的，它应该是 0。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:42:39.783

你可以改变很多事情。例如，您的查询可以使用[**ISNULL**强制归零（您可以在此处阅读更多内容）](http://msdn.microsoft.com/en-us/library/ms184325.aspx)`while` ，如果只返回一项，则不需要这样做：

```
string interoo = "SELECT ISNULL(SUM(charge), 0) FROM table2 WHERE datepart(mm,given_schedule)= @yourMonthSelected AND datepart(yy,given_schedule)= @yourYearSelected";

SqlCommand cmdd = new SqlCommand(interoo, conn);
cmdd.Parameters.AddWithValue("yourMonthSelected", comboBox1.Text);
cmdd.Parameters.AddWithValue("yourYearSelected", comboBox2.Text);
SqlDataReader rdrr = cmdd.ExecuteReader();

if (rdrr.Read())
{
    turnover.Text = rdrr[0].ToString();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T14:43:01.863

更改您的代码，例如...

```
if(rdrr.Read())
{
     turnover.Text = rdrr[0].ToString();
}
else 
{
    turnover.text = "0";
} 
```

......试试这个，让我进一步了解......

# css - 过渡不是第一次发生

> ID：14381384
> 
> 赞同：1
> 
> 时间：2013-01-17T14:34:43.107
> 
> 标签：css, transform, transition, translate3d

我有以下CSS：

```
.some-el {
  width: 60%;
  height: 50%;
  position: fixed;
  left: 20%;
  right: 20%;
  top: 0%;
  background-color: black;

  /* All vendor-prefixes */
  transition: transform linear 1s;
  transform: translate3d(0,-100%,0);
}

.some-el.open {
  /* All vendor-prefixes */
  transform: translate3d(0,0%,0);
} 
```

使用这个 html：

```
 <div class="some-el"></div>
  <a id="open" href="#">Toggle</a>
  <script>
    document.getElementById('open').onclick = function() {
      document.querySelector('.some-el').classList.toggle('open');
    };
  </script> 
```

我第一次单击链接时没有过渡，但在所有后续单击（无论是打开还是关闭）时都会发生过渡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:06:07.243

使用上面的代码，转换对我来说根本不起作用。[看到这个小提琴](http://jsfiddle.net/jessekinsman/4d9Pu/1/)。

但是，我认为如果您将过渡更改为全部，就像这样

```
transition: all linear 1s; 
```

那应该行得通。我让它在这个小提琴中工作 在 [此处输入链接描述](http://jsfiddle.net/jessekinsman/d3Csm/1/)

# c# - 使用 POST 请求向 Jira API 发送 JSON 时出现 System.Net.WebException

> ID：14381385
> 
> 赞同：3
> 
> 时间：2013-01-17T14:34:51.793
> 
> 标签：c#, http, rest, windows-phone-8, jira

好吧，伙计们，我已经为这个问题苦苦挣扎了一天左右，但没有明确的解决方案。我将从例外开始：

```
The remote server returned an error: NotFound.
    at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
    at System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 
```

我正在尝试连接到 JIRA rest API 以登录用户。我们的 JIRA 系统当前运行的是 4.4.1，我试图访问的 API 信息记录在这里：[https](https://developer.atlassian.com/static/rest/jira/4.4.1.html) ://developer.atlassian.com/static/rest/jira/4.4.1.html 。（请参阅“/auth/1/session”API 的 POST 请求）

API 调用 POST 请求，并带有用于用户凭据的 JSON 正文。我尝试过手动构建 JSON 以及使用 JSON 库，结果是一样的。我发送的json是：

```
{ 
    "username": "test",
    "password": "test"
} 
```

我试图将内容类型和编码更改为我能想象的任何内容。这包括“text/json”、“application/json”、将Encoding.UTF8添加到stream writer等。所有的结果都是一样的。

也许整个磨难中最令人沮丧的部分是，我能够立即用 Java 为 Android 编写这个，所以我不认为这是一个 API 误解，就像 Windows Phone 8 和/或 C#误解。

最后要指出的几点：

*   如果我将代码更改为使用 GET 请求，指向“http://www.google.com”，然后删除请求回调（直接跳到响应），一切正常，我得到了我期望的结果。
*   我对 HttpWebRequest 的“BeginX”“EndX”方法感到困惑。我了解异步任务，但并不完全了解 C# 是如何管理它的。大多数 MSDN 文档不使用这些，而是​​使用“GetRequest()”和“GetResponse()”的方法，这些方法看起来更直接。我筛选的最新示例也使用这些方法。我假设这些方法已在 Windows Phone 8 SDK 中删除，以确保可以异步运行的所有内容。
*   如果我直接从除 Windows Phone 8 模拟器之外的任何浏览器访问 JIRA URL，我会得到文档中所述的有效 403。但是，如果我直接在模拟器中点击 URL，它会提示我输入登录凭据。这让我认为需要基本身份验证，所以我尝试添加它，但我得到了相同的结果。

下面是我目前拥有的代码。我取出了我的 Jira 主机名

```
class LoginService
{
    public static UserSession login(string aUsername, string aPassword)
    {
        String loginUrl = "http://{myjiraurl}/rest/auth/1/session/";
        HttpWebRequest request = (HttpWebRequest) WebRequest.Create(loginUrl);

        string jsonBody = JsonHelper.GenerateLoginJson(aUsername, aPassword);

        RequestInformation requestInfo = new RequestInformation();
        requestInfo.request = request;
        requestInfo.JsonBody = jsonBody;

        requestInfo.request.Method = "POST";
        requestInfo.request.ContentType = "text/json";
        requestInfo.request.ContentLength = (long)jsonBody.Length;

        request.BeginGetRequestStream(new AsyncCallback(LoginRequestCallback), requestInfo);
        return null;
    }

    private static void LoginRequestCallback(IAsyncResult result)
    {
        RequestInformation requestInfo = (RequestInformation)result.AsyncState;
        HttpWebRequest webRequest = requestInfo.request;

        // End the Asynchronus request.
        Stream requestSream = webRequest.EndGetRequestStream(result);

        StreamWriter requestWriter = new StreamWriter(requestSream);
        requestWriter.Write(requestInfo.JsonBody);
        requestWriter.Flush();
        requestWriter.Close();
        requestSream.Close();

        webRequest.BeginGetResponse(new AsyncCallback(LoginResponseCallback), requestInfo);
    }

    private static void LoginResponseCallback(IAsyncResult result)
    {
        RequestInformation requestInfo = (RequestInformation)result.AsyncState;
        HttpWebRequest webRequest = requestInfo.request;
        try
        {

            HttpWebResponse response = (HttpWebResponse)webRequest.EndGetResponse(result);

            if (response.StatusCode == HttpStatusCode.OK)
            {

                Stream streamResponse = response.GetResponseStream();

                string responseResult = StreamHelper.ReadStreamToString(streamResponse);
                streamResponse.Close();
            }
            response.Close();
        }
        catch (Exception e)
        {
            System.Diagnostics.Debug.WriteLine(e.Message);
            System.Diagnostics.Debug.WriteLine(e.StackTrace);
        }
    }
}

public class RequestInformation
{
    // This class stores the request state of the request and any necessary information for the request body
    public HttpWebRequest request;

    public string JsonBody { get; set; }
    public string Result { get; set; }

    public RequestInformation()
    {
        request = null;
    }
} 
```

编辑：为了澄清一下，尝试在此行上生成响应对象时代码失败...

```
HttpWebResponse response = (HttpWebResponse)webRequest.EndGetResponse(result); 
```

**更新1：**

我发现我可以将 的响应`WebException`转换为`HttpWebResponse`. 这让我可以看到确切的状态码是什么，`HttpStatusCode.UnsupportedMediaType`或者是 415。现在这直接指向了发送到服务器的 JSON 编码的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:11:52.227

你们会认为我是个疯子，但截至下午 3:00 左右，我已经得到了预期的结果。

一旦我稍微重构它，我将使用更新的代码编辑这个答案。

更新的工作代码：

```
public static async Task<HttpWebResponse> SendHttpPostRequest(string url, string content, string contentType, string acceptType)
    {
        HttpWebRequest request = HttpWebRequest.CreateHttp(new Uri(url, UriKind.Absolute));
        HttpWebResponse response = new HttpWebResponse();
        string responseText = "";

        request.Method = "POST";
        request.ContentType = contentType;
        request.Accept = acceptType;

        Task<Stream> requestTask = Task.Factory.FromAsync(request.BeginGetRequestStream, asyncResult => request.EndGetRequestStream(asyncResult), (object)null);
        await requestTask.ContinueWith(t =>
        {
            using (Stream stream = requestTask.Result)
            using (StreamWriter requestWriter = new StreamWriter(stream))
            {
                requestWriter.Write(content);
            }
        });

        Task<WebResponse> responseTask = Task.Factory.FromAsync(request.BeginGetResponse, asyncResult => request.EndGetResponse(asyncResult), (object)null);
        await responseTask.ContinueWith(t =>
        {
            try
            {
                response = (HttpWebResponse)responseTask.Result;
            }
            catch (AggregateException ae)
            {
                foreach (Exception e in ae.InnerExceptions)
                {
                    if (e is WebException)
                    {
                        response = (HttpWebResponse)((WebException)e).Response;
                        System.Diagnostics.Debug.WriteLine(e.Message);
                        System.Diagnostics.Debug.WriteLine(e.StackTrace);
                    }
                }
            }
        });

        return response;
    }
} 
```

# php - 日期（日期）更改时添加新行 - MySQL，PHP

> ID：14381387
> 
> 赞同：0
> 
> 时间：2013-01-17T14:34:58.637
> 
> 标签：php, mysql, date

我需要一些支持，因为我在 PHP 和 MySQL 方面不像这个委员会的所有人那样熟练 :) 所以，提前感谢。

我正在使用 PHP 脚本存储来自外部解析的 XML 提要的数据。此脚本每天两次使用 CRON 作业更新 MySQL 数据库。这是这样的 PHP 脚本的一个片段：

```
mysql_query("UPDATE my_table SET amount=$jackpot->amount WHERE gameId = '".$jackpot->gameId."'")
or die(mysql_error()); 
```

这会更新我数据库中的一个表和一行。该表的结构如下（列）：

游戏ID | 游戏名 | 金额 | 货币 | 日期

其中“日期”列采用 DATE 格式 (dd/mm/yyyy hh:mm)，CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP。

我需要什么...我需要，是的，每天更新此表两次，但我还需要在 DATE 更改时插入具有相同列的新行（每天，新的一天-> 新行）。

我在想类似的东西，用两个词（没有编码）：

```
if today --> update rows
elseif date change (another day, so "tomorrow") --> INSERT new row with updated data (collected from the XML feed) 
```

我怎样才能做到这一点？我是否必须使用 MySQL 查询检查当前数据，然后通过 PHP 插入新行？或者我可以用一堆 PHP 行跳过查询吗？

对不起，但我有点困惑......任何帮助将不胜感激！

再次感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:46:47.967

我建议保持简单：添加一个新`dupedate`字段以仅存储插入日期。在上面放一个唯一的密钥，然后很简单：

```
INSERT INTO (gameID, gameName, ammount, currency, date, dupedate) VALUES (...)
ON DUPLICATE KEY UPDATE amount=xxx 
```

如果您“插入”一条与现有记录具有相同日期的记录，您将获得更新。如果是新日期（例如“明天”），您将获得新记录。

这也有一个优点，那就是不像你最初的“获取/检查/更新|插入”版本那样匆忙。这样的过程留下了一些其他过程可能会在您获取记录和执行插入/更新之间复制逻辑并从您下方偷走您的新记录的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:46:55.997

如果我理解正确，您希望能够每天两次插入/更新数据（尽管次数不应该很重要）并最终在每个唯一日期得到一行数据？

如果您在`date`列上创建唯一索引并为查询使用[INSERT...ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)语法，则可以在单个查询中实现此目的。例如

```
INSERT INTO my_table (amount, currency, date) VALUES (....)
ON DUPLICATE KEY UPDATE amount = '....'; 
```

如果您愿意，您可以轻松地增加列的值，而不是重新分配它们。为此，查询的更新部分将如下所示：`UPDATE amount = amount + ....`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:48:31.940

您应该使用查询来检查是否已经有匹配的行，除非您*绝对确定*没有添加新游戏。

如果您的脚本在凌晨 1 点和下午 1 点运行，并且您只在凌晨 1 点创建新行，那么在凌晨 2 点添加新游戏（在外部 xml、后端或两者中）将导致错误。

# ios - 为IOS截取我屏幕的一半？

> ID：14381388
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:35:02.547
> 
> 标签：ios

我尝试截屏一半屏幕并将其保存到照片库。我使用下面的代码工作得很好，但它捕获了我所有的屏幕。我只需要它一半的屏幕。我正在使用 xcode 4.4。我知道有很多关于这个的问题帖子。但我无法让它工作出现错误。请帮助

```
IGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(newImage, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:37:26.100

在你的行`UIGraphicsBeginImageContext(self.view.bounds.size.width,self.view.bou‌​nds.size.height/2.0);`

替换此行

希望对你有帮助。。

# android - Android：转换图像和插值算法

> ID：14381392
> 
> 赞同：1
> 
> 时间：2013-01-17T14:35:15.517
> 
> 标签：android, image-processing

我目前通过使用矩阵在画布上绘制图像来将图像相互叠加。问题是：在旋转和缩放后，我最终会出现脏/粗糙的边缘。看起来像这样：http: [//i.stack.imgur.com/5pPQJ.png](http://i.stack.imgur.com/5pPQJ.png)

问题不在于图像分辨率低，我的理论是它与android中绘图引擎的插值算法有关。

有人可以在这里给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:03:08.187

Android 默认使用[最近邻插值](http://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)，这就是为什么你会得到像素化图像。您可以强制它使用[双线性](http://en.wikipedia.org/wiki/Nearest-neighbor_interpolation)`FILTER_BITMAP_FLAG`插值。以下所有变体实际上都是相同的：

```
final Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG);

paint.setFlags(paint.getFlags() | Paint.FILTER_BITMAP_FLAG);
paint.setFilterBitmap(true); 
```

# audio - HTML 音频：IE 中的 currentTime

> ID：14381393
> 
> 赞同：5
> 
> 时间：2013-01-17T14:35:15.720
> 
> 标签：audio, windows-phone-8

我正在尝试从声音文件中的某个点开始播放声音（mp3）。我希望它可以在大多数移动设备上工作，并且确实如此，但似乎 Windows Phone 8 存在问题。它在三星 Galaxy 和 iPhone 上工作正常，但在 WP 上，声音总是从头开始，忽略当前时间设置。有任何想法吗？谢谢！

```
var sfile = "test.mp3';
    var myobj;
    function init()
    {

         myobj=document.createElement('audio');
        myobj.style.position="relative"; 
        myobj.style.bottom=0;
        myobj.src = sfile;
        myobj.id='sound';

        document.body.insertBefore(myobj,document.body.lastChild);
        myobj.load();
    }
    //called when pressing a button
    function test()
    {
        myobj.currentTime=30.0;
        myobj.play()
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:12:35.153

得到了更多这方面的信息。原来你不能在调用 play() 之前设置 currentTime。至少在 Windows 手机上没有。所以我必须先调用 play 然后（在 x ms 之后）我可以设置 currentTime。

我现在的想法是在我的声音文件中保持一些静音并不断循环播放该静音。当我想播放声音时，我可以设置 currentTime。当声音部分完成后，我再次启动静音循环。使用多轨会容易得多，但不幸的是我没有这个选项。

因此，可以在 Windows phone 8 上使用 currentTime。但是我遇到了另一个问题。由于我现在一直在播放声音，所以当手机进入睡眠模式时，javascript 似乎会冻结（导致静音循环停止），但无论如何都会播放声音。所以整个 mp3 文件将从头到尾运行。我尝试使用 onfocusout 事件来停止循环并暂停声音，但它不起作用。将继续调查这种相当罕见和错误的行为。

# mysql - 获取 MySQL GROUP 的数量

> ID：14381395
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:35:21.343
> 
> 标签：mysql

返回组数量的最佳方法是什么？我的架构没什么特别的；table2 包括一个 FK 引用 table1。以下似乎有效。有什么问题吗？还有更好的方法吗？谢谢

```
SELECT COUNT(*) FROM (
 SELECT COUNT(*)
 FROM table1 AS t1
 INNER JOIN table2 AS t2 ON t2.t1_id=t1.id
 WHERE t1.x=1 AND t2.y=1
 GROUP BY t2.z
) AS grouping 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:42:57.127

不，您的解决方案很好。

另一种方法是

```
SELECT COUNT(DISTINCT t2.z) 
FROM table1 AS t1
INNER JOIN table2 AS t2 ON t2.t1_id=t1.id
WHERE t1.x=1 AND t2.y=1 
```

这也将包括 NULL。

从[手册](http://dev.mysql.com/doc/refman/5.1/en/problems-with-null.html)：

> COUNT()、MIN() 和 SUM() 等聚合（汇总）函数会忽略 NULL 值。对此的例外是 COUNT(*)，它计算行而不是单个列的值。

# svn - 哈德逊工作区在建造时被锁定

> ID：14381396
> 
> 赞同：3
> 
> 时间：2013-01-17T14:35:25.370
> 
> 标签：svn, jenkins, hudson, polling

我最近在 CI 环境中遇到了问题。

我正在使用**Hudson 版本。1.395.1**和**SVN 版本 1.4.2。**

我的 Hudson 不断地轮询 SVN 是否有任何更改，如果是这样，它就会开始构建。

最近此操作失败并显示以下消息

```
Updating https://MY_SVN_URL/trunk
Workspace appear to be locked, so getting a fresh workspace
Checking out https:/MY_SVN_URL/trunk
ERROR: Failed to check out https://MY_SVN_URL/trunk
org.tmatesoft.svn.core.SVNException: svn: Working copy '/Hudson/workspace/MY_PROJECT_NAME' locked; try performing 'cleanup' 
```

必须注意的是，这只发生在我提交更改并且 Hudson 试图触发构建（通过轮询 SVN）时。当我手动触发构建时，问题不会发生。

在我看来，轮询正在锁定 Hudson 工作区，而更新操作发现工作区被锁定。

以前有人遇到过同样的情况吗？有什么解决办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T08:38:20.440

我会回答我自己的问题，因为这可能对其他人有用。

造成这种情况的根本原因，其实很简单。Hudson 运行的服务器在此事件发生前 3-4 天重新启动。

发现机器上正在运行两个 Hudson 实例。因此，一个实例正在获取并持有锁，从而使另一个实例间歇性地失败。

有趣的是，尽管服务器在 3 天前重新启动，但今天还是出现了问题。

因此，如果有人遇到这种问题，最好先检查一下上述简单的事情，然后再像我一样花费太多时间，以供进一步参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T10:46:42.857

我想说的是，当我在开始操作后**中止操作（例如：添加/更改文件的项目构建......）或中止 Hudson 工作时，这经常发生在我身上。**

如果中止是原因，您可以通过尝试还原在您拥有文件夹**.svn**的工作区级别验证，因此您将收到以下消息：

```
working copy <project_name> locked 
```

所以我们可以说这两个问题是相关的（一个在 Hudson 级别，另一个在 SVN 级别）。

要让它变红，如果您使用 TortoiseSVN ：

1.  右键单击已签出的文件夹
2.  TortoiseSVN
3.  清理
4.  检查这些选项：清理工作副本状态+包括外部

# jquery - .mouseup() 只触发一次

> ID：14381399
> 
> 赞同：1
> 
> 时间：2013-01-17T14:35:35.670
> 
> 标签：jquery, mouseup

当用户在弹出窗口之外单击时，我正在使用 jquery [.mouseup()](http://api.jquery.com/mouseup/)来关闭弹出窗口。我的问题是这只在第一次使用时才有效。我试过这个`.on()`版本，但没有帮助。

```
$(document).ready(function() {
    $(document).mouseup( function(e) {
      var container = $("#mpop-loop");
      if (container.has(e.target).length === 0) {
        container.fadeOut("fast").remove();
      }
    });
}); 
```

和

```
$(document).ready(function() {
    $(document).on("mouseup", function(e) {
      var container = $("#mpop-loop");
      if (container.has(e.target).length === 0) {
        container.fadeOut("fast").remove();
      }
    });
}); 
```

每次触发时，我怎样才能使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:48:56.507

您可以尝试使用“on”函数的委托并使用“:not(.popup-class)”过滤器将点击事件委托给页面上除弹出窗口之外的所有元素吗？只是一个想法，以便单击的弹出窗口也不会触发关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:39:46.513

```
$('body').click(function(){

    $("#mpop-loop").fadeOut("fast");

}); 
```

如果您删除“#mpop-loop”，那么当您再次打开容器时，可能必须再次添加该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:55:33.447

`.has`仅适用于后代，忽略元素本身。试试这个（你不需要`$(document).ready`，因为你将事件绑定到文档）：

```
 $(document).on("mouseup", function(e) {
      var container = $("#mpop-loop");
      if (!container.has(e.target).length && !container.is(e.target)) {
        container.fadeOut("fast");
      }
    }); 
```

[http://jsfiddle.net/mblase75/bWDXH/](http://jsfiddle.net/mblase75/bWDXH/)

# wpf - WPF 编程方法论

> ID：14381402
> 
> 赞同：64
> 
> 时间：2013-01-17T14:35:45.643
> 
> 标签：wpf, entity-framework, mvvm, .net-4.5

在我的应用程序中，我正在使用我的工具正在管理的软件的 API。我有包含 16 个类的 DAL，其中 3 个是单例。我在`.cs`文件中有一些逻辑并且`XAML`偏离了方向。

我的问题是，我看到很多用 WPF 编写的应用程序应该使用 MVVM 的评论，这将使代码更具可用性和可读性，我可以将我的代码转换为 MVVM 吗？MVVM 的实际含义是什么（不是维基百科或手动定义）？

我也使用 SQL 查询并阅读了一篇关于 EF（实体框架）的论文，MVVM 和 EF 可以在同一个项目中共存吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-01-17T15:13:37.243

MVVM 的实际含义是：**UI 不是 Data。数据就是数据，用户界面就是用户界面**。

这意味着您不应该以程序逻辑（通常称为业务逻辑）紧密耦合或依赖于 UI 组件状态的方式开发应用程序，而应使其依赖于数据项的状态（无论是模型，或视图模型）。

例如，在其他框架（如 winforms）中，如果您有一个包含文本框和按钮的屏幕，您通常会为按钮添加一个单击事件处理程序，然后从文本框中读取文本。在 MVVM 中，TextBox 的 Text 属性应该绑定到 ViewModel 中的字符串属性，按钮也应该绑定到 ViewModel 中的 Command。

这允许对 UI（即 ViewModel）进行抽象，因此，正如我之前所说，您的应用程序逻辑可以不依赖于 UI，而是依赖于它的抽象。

这允许 UI 和逻辑的大量可扩展性，并且还允许 UI 行为的几个方面的可测试性，因为大部分 UI 行为是在 ViewModel 中定义的。

MVVM 还有其他方面，但主要的实现是。

**编辑：**

为了答案的完整性，我将添加一个具体的例子：

**1 - 非 MVVM WPF：**

XAML：

```
<StackPanel>
   <TextBox x:Name="txtLastName"/>
   <Button Content="Click Me" Click="Button_Click"/>
</StackPanel> 
```

后面的代码：

```
private void Button_Click(object sender, EventArgs e)
{
    //Assuming this is the code behind the window that contains the above XAML.
    var lastname = this.txtLastName.Text; 

    //Here you do some actions with the data obtained from the textbox
} 
```

**2 - MVVM WPF：**

XAML：

```
<StackPanel>
   <StackPanel.DataContext>
       <my:MyViewModel/>
   </StackPanel.DataContext>
   <TextBox Text="{Binding LastName}"/>
   <Button Content="Click Me" Command="{Binding MyCommand}"/>
</StackPanel> 
```

视图模型：

```
public class MyViewModel
{
    public string LastName { get; set; }

    public Command MyCommand { get; set; }

    public MyViewModel()
    {
        // The command receives an action on the constructor,
        // which is the action to execute when the command is invoked.
        MyCommand = new Command(ExecuteMyCommand); 
    }

    private void ExecuteMyCommand()
    {
        //Only for illustration purposes, not really needed.
        var lastname = this.LastName; 

        //Here you do some actions with the data obtained from the textbox
    }
} 
```

正如您在上面的示例中看到的，ViewModel 根本不包含对 View 的引用。因此，视图可以是任何东西，只要`{Bindings}`它们保持在适当的位置。

神奇地使它们一起工作的`DataContext`粘合剂是 WPF UI 元素的属性，它是所有绑定都将被解析的对象。

还有其他事情，例如 ViewModel 中的属性更改通知以启用双向绑定，但这超出了此答案的范围。

还要记住，MVVM 是一种设计模式，而 WPF 是一种框架。MVVM 目前也被应用于其他技术（目前有很多关于 MVVM 用于 web 的讨论，包括 JavaScript 和类似的东西）

我建议您阅读其他答案中提到的书籍以及[本教程](http://wpftutorial.net/)以了解更多特定于 WPF 的方面。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-17T15:18:10.913

> 我的问题是，我看到很多用 WPF 编写的应用程序应该使用 MVVM 的评论，这将使代码更具可用性和可读性，我可以将我的代码转换为 MVVM 吗？

没有要求您需要使用 MVVM 模式 - 没有。您需要考虑您正在构建的应用程序的复杂性和开发组的技能组合。一般来说，如果它是一个小型或小型/中型应用程序，那么 MVVM*可能*会过度设计。如果团队的技能/才能不适合单独的演示模式，那么 MVVM 可能不是一个好的决定。

如果操作正确，那么 MVVM 将为您提供您所读到的各种好处。相反，如果它做错了，那么它可能是一个开发和维护的噩梦——绝对不是更具可读性和可用性。从个人经验来看，我认为编写糟糕的代码隐藏应用程序比编写糟糕的基于 MVVM 的应用程序更容易。

当然，您可以将当前应用程序重写为 MVVM 模式。只需删除您的代码隐藏并将其放入您的视图模型、帮助程序类、存储库类、商务逻辑类等。不要陷入将所有内容都放入视图模型的陷阱，创建一个 MVVM 美化代码-在后面。

> 我还使用 SQL 查询，并阅读了一篇关于 EF（实体框架）的论文，MVVM 和 EF 可以一起留在同一个项目中吗？

当然，他们可以。请记住，EF 是一种数据访问技术，而 MVVM 是一种设计模式。您可能会在您提到的 DAL 类中使用 EF。

最后一个想法，如果你决定走 MVVM 路线，那么你应该考虑使用一个促进它的框架，比如`Prism`. 哦，准备好接受相当多的学习和挫折。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-14T13:24:49.583

我肯定会使用[Unity 之](https://unity.codeplex.com/)类的框架研究[DependencyInjection](http://www.codeproject.com/Articles/615139/An-Absolute-Beginners-Tutorial-on-Dependency-Inver)。

您的 Singleton 类可以注册到 DependencyInjection 容器并注入到其他类（例如 ViewModels）的构造函数中。其他需要定期实例化并注入类的 DAL 类也可以。

DependencyInjection 是开发大型企业软件应用程序时最重要的单一设计模式，适用于客户端和服务器代码。MVVM 是一个很好的模式，但不会解决与依赖耦合相关的整体应用程序复杂性问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-05T07:20:11.353

**这些是我特定于 MVVM 的**

1) 增加视图的**“混合性”**（使用 Expression Blend 设计视图的能力）。这使得有幸拥有设计师和程序员的团队能够分离职责......每个人都可以独立工作。

2）**“无视”**视图逻辑。视图与在它们后面运行的代码无关，从而使相同的视图逻辑能够在多个视图中重复使用，或者使视图易于重组或替换。区分“行为”和“风格”之间的关注点。

3)**没有重复的代码来更新视图。**在代码隐藏中，您会看到到处都是对“myLabel.Text = newValue”的调用。使用 MVVM，您可以确保仅通过设置底层属性及其所有视图副作用来适当地更新视图。

4)**可测试性。**由于您的逻辑与您的视图完全无关（没有“myLabel.Text”引用），因此单元测试变得容易。您可以在不涉及视图的情况下测试 ViewModel 的行为。这也启用了视图行为的测试驱动开发，这使用代码隐藏几乎是不可能的。

就它们所解决的问题而言，其他两种模式实际上是不同的。您可以将 MVVM 与 MVP 和 MVC 一起使用（大多数优秀的示例都可以做到这一点）。

事实上，在我看来，MVP（带有被动视图，而不是监督控制器）实际上只是 MVVM 的一种变体。

# php - Facebook PHP SDK 未注销用户

> ID：14381403
> 
> 赞同：1
> 
> 时间：2013-01-17T14:35:48.660
> 
> 标签：php, facebook, facebook-php-sdk

这是我一直在试图解决的一个非常令人沮丧的问题（错误？）。似乎很多人抱怨同样的问题，但没有明确的解决方案或教程来解决这个问题。

无论如何，我的问题是我可以让 SDK 很好地登录用户，但是当他们点击 LogOut 时。它将它们重定向到`facebook.com/home.php`（即使“下一个”参数设置为我的站点）并且当我再次访问我的站点时用户仍然没有注销......

这是代码...（Facebook 库是通过 Codeigniter 配置自动加载的）

```
public function DestroySession()
{
        $this->load->helper('url');

if($this->facebook->getUser())
{
    $this->facebook->destroySession();

    $logout = $this->facebook->getLogoutUrl(array("next" => "http://mysite.com/"));

    redirect($logout, 'location', 301);
}
 } 
```

所以我终于让这个工作了。您可以在下面看到新功能。由于某些原因，我不完全确定您必须执行这些步骤。

```
public function DestroySession()
{
    $this->load->helper('url');

//Get User ID
$user = $this->facebook->getUser();

if ($user)
{
    try
    {
        // Proceed knowing you have a logged in user who's authenticated.
       $user_profile = $this->facebook->api('/me');

   //   print_r($user_profile);
    } catch (FacebookApiException $e)
    {

        log_message('eror', $e);

        $user = null;
    }
}

// Login or logout url will be needed depending on current user state.
if ($user)
{
if( session_id() ){} else { session_start() ; }

    $logoutUrl = $this->facebook->getLogoutUrl($params = array('next' => base_url()));
    //echo 'Logout; '.($logoutUrl);
    $this->facebook->destroySession();
    redirect($logoutUrl, 'refresh');

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:10:00.440

我使用这样的链接使用 Javascript：

```
<a href="/logout" onclick="FB.logout();">Logout</a> 
```

这首先调用 onclick 函数并在 facebook 上执行注销，然后调用我网站的正常 /logout 函数。我也更喜欢服务器端解决方案，它将我在两个站点上都注销。

检查[http://developers.facebook.com/docs/reference/javascript/FB.logout/](http://developers.facebook.com/docs/reference/javascript/FB.logout/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:00:22.137

有关更多上下文，请参阅我的原始问题。

```
public function DestroySession()
{
    $this->load->helper('url');

//Get User ID
$user = $this->facebook->getUser();

if ($user)
{
    try
    {
        // Proceed knowing you have a logged in user who's authenticated.
       $user_profile = $this->facebook->api('/me');

   //   print_r($user_profile);
    } catch (FacebookApiException $e)
    {

        log_message('eror', $e);

        $user = null;
    }
}

// Login or logout url will be needed depending on current user state.
if ($user)
{
if( session_id() ){} else { session_start() ; }

    $logoutUrl = $this->facebook->getLogoutUrl($params = array('next' => base_url()));
    //echo 'Logout; '.($logoutUrl);
    $this->facebook->destroySession();
    redirect($logoutUrl, 'refresh');

}
} 
```

# oracle - 如何使用 Sqoop 将特定用户的所有（且仅）表从 Oracle 数据库导入 Hive

> ID：14381404
> 
> 赞同：1
> 
> 时间：2013-01-17T14:35:54.457
> 
> 标签：oracle, hive, sqoop

我有一个包含很多表（超过 600 个）的数据库，并希望使用 sqoop 将它们全部导入 Hive。这就是我使用的命令：

```
./sqoop import-all-tables --connect jdbc:oracle:thin:@//185.2.252.52:1521/orcl --username TEST --password test 
```

导入总是失败，因为 sqoop 尝试导入一些不属于用户的 oracle 系统表。

```
 ./sqoop list-tables --connect jdbc:oracle:thin:@//185.2.252.52:1521/orcl --username TEST --password test 
```

list-tables 列出了与以下 sql 查询相同的表：

```
select * from all_tables; 
```

相反，我想列出并导入（我猜它是相同的表）该查询将使用的相同表：

```
select * from user_tables; 
```

有没有办法通过 sqoop 限制导入表？如果没有，有没有办法以某种方式配置用户权限，这样“select * from all_tables”会给我与“select * from user_tables”相同的表？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:22:16.637

Create a synonym called `ALL_TABLES` in your schema that points to the `USER_TABLES` view.

```
SQL> select count(*) from all_tables;

  COUNT(*)
----------
      2769

SQL> select count(*) from user_tables;

  COUNT(*)
----------
        24

SQL> create synonym all_tables for user_tables;

Synonym created.

SQL> select count(*) from all_tables;

  COUNT(*)
----------
        24

SQL> 
```

That should fool the script, unless it explicitly qualifies the `ALL_TABLES` view with its owner (eg: `SYS.ALL_TABLES`).

# windows-8 - 在 Windows 8 Metro 应用程序中打开 Word 文档

> ID：14381405
> 
> 赞同：0
> 
> 时间：2013-01-17T14:36:01.590
> 
> 标签：windows-8, microsoft-metro

现在我在 Windows 8 Metro 应用程序中打开一个 Word 文档。我不知道这是否可能。但我在 Windows 8 Metro 应用程序中打开了 word 文档。例如：使用 iPad 在 gmail 中打开 word 文档。

这是我的代码，

```
string file = @"Assets\sample.docx";

var getFile = await Windows.ApplicationModel.Package.Current.InstalledLocation.GetFileAsync(file);
        if (getFile != null)
        {
             var success = await Windows.System.Launcher.LaunchFileAsync(getFile);
        } 
```

这是为word文件打开的。但我在 Windows 8 Metro 应用程序中打开了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:14:36.373

您应该能够仅使用[文件激活](http://msdn.microsoft.com/en-us/library/windows/apps/hh452684.aspx)从 Windows 8 Metro/Windows Store 应用程序打开 Word 文件。由于 .docx 或 .doc 文件已经与 Word 程序相关联，因此它应该将 Word 作为单独的进程启动并在 Word 中从您的应用程序中打开该文件。

但是，它不会在您的应用程序内运行 Word。这是不可能的。

# magento-1.7 - Magento 1.7 - 无论我输入什么，运费总是 0

> ID：14381407
> 
> 赞同：1
> 
> 时间：2013-01-17T14:36:10.697
> 
> 标签：magento-1.7, magento

我希望有一个人可以帮助我。

几个月来，我一直在 magento 1.4.1.1 上使用 magento 运输表费率，效果很好。

现在，在更新后，无论产品的成本有多高，magento 的运费总是 0。

无论我使用哪种运输选项，它始终为 0。即使是统一运费选项等。

我不知道该怎么办了。

清除缓存、重新索引、重建平面数据等。

在每个运输选项中，无论我在管理区域输入什么，运输成本都是 0。

我能做些什么？非常感谢你的帮助，

问候:)

# delphi - 如何确定我的项目在哪里引入了我不想使用的模块？

> ID：14381410
> 
> 赞同：2
> 
> 时间：2013-01-17T14:36:15.293
> 
> 标签：delphi, delphi-2007, delphi-5, quickreports

我正在将一个项目从 Delphi 5 转换为 Delphi 2007 并收到编译错误

> 找不到所需的包“qrpt”。

我没有在这个项目中使用快速报告，我尝试在使用子句中注释掉一些单位，看看这是否能解决问题，但它没有。

有没有办法找出哪个单位正在使用快速报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:46:50.110

[Delphi Unit Dependency Scanner](http://www.easy-ip.net/delphi-unit-dependency-scanner.html)可以列出所有使用的单元及其相互依赖关系。寻找未使用的单位也是一种可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:28:20.713

我过去曾使用 Icarus 生成使用报告来清理我自己的 delphi 代码。您可以在[http://www.peganza.com/products_icarus.htm](http://www.peganza.com/products_icarus.htm)找到它。我不隶属于公司，我只是喜欢他们的工具（尤其是 Pascal Analyzer - 很棒的离线分析器）。

# plone - 导入时的 Funnelweb TypeError

> ID：14381417
> 
> 赞同：1
> 
> 时间：2013-01-17T14:36:33.877
> 
> 标签：plone, plone-funnelweb

我试过导入一些这样的页面：

```
bin/funnelweb --crawler:url=http://wiki.scandiatransplant.org --crawler:max=50 --ploneupload=http://admin:localhost:8080/Plone 
```

但我收到此错误消息：

```
Usage: funnelweb [options]

funnelweb: error: ambiguous option: --ploneupload (--ploneupload:debug, --ploneupload:target?) 
```

如果相反，我这样做：（但如果这有效，导入的页面将放置在哪里？）

```
bin/funnelweb --crawler:url=http://wiki.scandiatransplant.org --crawler:max=150 
```

它可以工作，就好像它正在导入一样，但最后我得到了下面的回溯。在底部它说：`TypeError: replace() takes exactly 7 arguments (6 given)`

这是创作者的错误，还是我给出的论据不足？我在本教程中使用了这个网站：http: [//plone.org/products/funnelweb](http://plone.org/products/funnelweb)

```
INFO:typeguess:Document, text/html: 144
INFO:typeguess:Image, image/jpeg: 1
INFO:typeguess:Link, : 1
INFO:template1:extracted 0/144/151
INFO:template2:extracted 0/144/151
INFO:template3:extracted 0/144/151
INFO:template4:extracted 0/144/151
INFO:sitemapper:moved 0/151 from 0 sitemaps
INFO:indexguess:2 folders added. 0 defaultpages set, 149 items sorted
INFO:titleguess:0 folders added. 0 defaultpages set, 149 items sorted
INFO:titleguess:titles=0/148 (id=0,backlinks=0,parent=0)
INFO:attachmentguess:moved 0/154
INFO:urltidy:titles=0, normed=147, total=154
Traceback (most recent call last):
  File "bin/funnelweb", line 116, in <module>
    mr.migrator.runner.runner({},"funnelweb.remote")
  File "/home/magiq/Plone/buildout-cache/eggs/mr.migrator-1.0.1-py2.7.egg/mr/migrator/runner/__init__.py", line 132, in runner
    transmogrifier(pipelineid, **overrides)
  File "/home/magiq/Plone/buildout-cache/eggs/collective.transmogrifier-1.3-py2.7.egg/collective/transmogrifier/transmogrifier.py", line 62, in __call__
    for item in pipeline:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.ploneremote-1.3-py2.7.egg/transmogrify/ploneremote/remoteprune.py", line 116, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.ploneremote-1.3-py2.7.egg/transmogrify/ploneremote/remoteredirector.py", line 25, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.ploneremote-1.3-py2.7.egg/transmogrify/ploneremote/remoteworkflowupdater.py", line 41, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/collective.transmogrifier-1.3-py2.7.egg/collective/transmogrifier/sections/inserter.py", line 19, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.ploneremote-1.3-py2.7.egg/transmogrify/ploneremote/remotenavigationexcluder.py", line 32, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.ploneremote-1.3-py2.7.egg/transmogrify/ploneremote/remoteschemaupdater.py", line 42, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.ploneremote-1.3-py2.7.egg/transmogrify/ploneremote/remoteconstructor.py", line 53, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.siteanalyser-1.3-py2.7.egg/transmogrify/siteanalyser/treeserializer.py", line 51, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/collective.transmogrifier-1.3-py2.7.egg/collective/transmogrifier/sections/inserter.py", line 19, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.siteanalyser-1.3-py2.7.egg/transmogrify/siteanalyser/treeserializer.py", line 51, in __iter__
    for item in self.previous:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.siteanalyser-1.3-py2.7.egg/transmogrify/siteanalyser/urltidy.py", line 83, in __iter__
    for item in self.relinker:
  File "/home/magiq/Plone/buildout-cache/eggs/transmogrify.siteanalyser-1.3-py2.7.egg/transmogrify/siteanalyser/relinker.py", line 155, in __iter__
    item['remoteUrl'] = "./" + replace(link, item, changes, counter, self.missing, bad)
TypeError: replace() takes exactly 7 arguments (6 given) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:41:27.627

你遇到了一个错误，是的。[`transmogrify.siteanalyser`我已在问题跟踪器](https://github.com/collective/transmogrify.siteanalyser/issues)中将此作为问题提交，请参阅[问题 #3](https://github.com/collective/transmogrify.siteanalyser/issues/3)。

该`replace()`方法被[赋予了一个额外的参数](https://github.com/collective/transmogrify.siteanalyser/commit/e7679bfabdd070ce012f82f1f0ab88f471590146)，但第 155 行的调用从未更新以提供该额外参数。

您应该能够通过编辑文件[`Plone/buildout-cache/eggs/transmogrify.siteanalyser-1.3-py2.7.egg/transmogrify/siteanalyser/relinker.py`](https://github.com/collective/transmogrify.siteanalyser/blob/a6e79130a9dc39a5e66ad79e86594ae3e2f24694/transmogrify/siteanalyser/relinker.py#L155)并将第 155 行更改为：

```
item['remoteUrl'] = "./" + replace(link, item, changes, counter, self.missing, bad) 
```

至

```
item['remoteUrl'] = "./" + replace(link, item, changes, counter, self.missing, bad, self.broken_link_normalise) 
```

# ios - 手动打开 Storyboard-view

> ID：14381418
> 
> 赞同：6
> 
> 时间：2013-01-17T14:36:39.483
> 
> 标签：ios, objective-c, storyboard, uialertview

我有一个使用 Storyboard 的应用程序。在视图上有一个 AlertViewDialog。

当用户单击第一个按钮（“是”）时，如何在 Storyboard 上打开另一个视图？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T15:27:13.137

我是这可以帮助：

1.  将视图拖入然后转到身份检查器（快捷方式：option+apple+3）。
2.  选择新拖动的 View 并从标题 Storyboard ID 中的标识检查器中指定唯一名称。//查看图片以供参考 ![在此处输入图像描述](../Images/8e57080629c5fba231bde0105a84642a.png)

创建 viewController 的 SecondViewController 类 (.h &.m) 子类。

然后从警报视图代码（正如您在单击“是”时所说的那样）

粘贴下面提到的代码

```
SecondViewController *svc =[self.storyboard instantiateViewControllerWithIdentifier:@"vinay"];
        [svc setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
        [self presentViewController:svc animated:YES completion:nil]; 
```

如果出现任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T14:41:05.577

愿这有帮助：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ClassNameViewController *viewController = (ClassNameViewController *)[storyboard instantiateViewControllerWithIdentifier:@"viewIdentifierOnStoryboard"];
[self presentModalViewController:viewController animated:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:55:07.243

您需要做的第一件事是将`UIAlertView`委托设置为添加`UIAlertViewDelegate`到您的`@interface`，所以它看起来像

```
 @interface myClass : super <UIAlertViewDelegate>
            // super could be anything like `UIViewController`, etc
      @end 
```

然后`@implementation`你可以添加类似的东西

```
 @implementation myClass

      ........... Some code

      - (IBAction)someActionMethod:(id)sender
      {
            UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:nil
                                                                  message:@"Would you like to move on?"
                                                                 delegate:self
                                                        cancelButtonTitle:@"No"
                                                        otherButtonTitles:@"Yes", nil];
             [myAlertView show];
             // [myAlertView release]; Only if you aren't using ARC
      }

      - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
      {
              switch(buttonIndex) {
                    case 1:
                          SecondViewController *svc =[self.storyboard instantiateViewControllerWithIdentifier:@"secondViewController"];
                          [svc setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
         //  [self presentViewController:svc animated:YES]; // Deprecated in iOS 6.0
                          [self presentViewController:svc animated:YES completion:nil]; // Introduced in iOS 5.0
                          break;
                    default:
                          break;
              }
      }

      @end 
```

请记住在情节提要中设置唯一标识符。您可以通过转到您`.storyboard`的身份检查器（选择第三个）来执行此操作，您可以设置`Storyboard ID`this is what you will need to match in `instantiateViewControllerWithIdentifier`so in the case in above it would be `"secondViewController"`. 就是这么简单。

完成后请记住关闭此视图，您将需要使用

```
 [self dismissModalViewControllerAnimated:YES]; 
```

以上内容实际上已在 iOS 6.0 中被弃用，但您可以使用

```
 [self dismissModalViewControllerAnimated:YES completion:nil]; 
```

除了在最后添加一个完成块之外，它做同样的事情。

希望这可以帮助。

# iphone - 显示可能包含需要填写的字段的字符串。拆分 segues 或更好的解决方案？

> ID：14381422
> 
> 赞同：1
> 
> 时间：2013-01-17T14:36:50.687
> 
> 标签：iphone, ios, cocoa-touch

我正在为 iPhone 编写我的第一个 iOS/Xcode 应用程序，因此缺乏使用工具对我项目中的下一个设计/开发步骤做出正确决定的经验。

我有近 100 个不同长度的问题，它们都是静态字符串，但有几个例外。例外情况需要在字符串中输入单个单词（名称）。例如“[NAME] 喜欢吃什么食物？”

我的问题是在 XCode 4.5 for iPhone（iPad 稍后推出）中实现这一点的最优雅的方式是什么？

我正在使用故事板（非常适合像我这样的初学者）。我是否对 [NAME] 进行 pre-segue 检查并拆分为 2 个不同的可能视图。一个只显示静态字符串问题，另一个使用静态标签和输入文本字段？

或者有没有一种我没有见过的更简单的方法来使用 Cocoa Touch API 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:45:17.520

好吧，您已经知道是否以及在何处必须划分问题。我要做的是在代表缺失部分的每个问题中插入一个符号。在生成 UI 时，我会将问题字符串分成几个部分，为问题部分创建一个 UILabels，并用 UITextFields 替换缺失的部分符号。

我认为这是实现它的最简单和最清晰的方法。

# python - django-1.4.3 如何添加分类？点击分类时如何发帖？

> ID：14381423
> 
> 赞同：0
> 
> 时间：2013-01-17T14:36:51.473
> 
> 标签：python, django, django-models

我正在尝试将类别添加到我的博客中，我有如下模型类。请告诉我是否有任何问题。当用户点击类别时如何显示帖子。先感谢您。

**模型.py**

```
class Posts(models.Model):   
    category=models.ForeignKey('indianapp.Category')
    slug = models.SlugField(max_length=100, unique=True)    

    def get_absolute_url(self):
        return ('blog_post_detail', (),{'slug':self.slug,})

    def save(self,*args, **kwargs):
        if not self.slug:
            self.slug=sluggify(self.title)
        super(Posts,self).save(*args,**kwargs)

class Category(models.Model):
    title = models.CharField(max_length=100, db_index=True)
    slug = models.SlugField(max_length=100, db_index=True)
    def __unicode__(self):
        return '%s' % self.title

    @permalink
    def get_absolute_url(self):
        return ('view_by_category', None, { 'slug': self.slug }) 
```

**视图.py**

```
def view_category(request,slug):
   catego=get_object_or_404(Category,slug=slug)
   category=Category.objects.all()
   posts = Posts.objects.all()
   category_posts = []
   for post in posts:
     if post.category.filter(Posts,slug=slug):
        category_posts.append(post)
   category = Category.objects.filter(slug=slug)
   pagedata.update({'post_list': category_posts})
   return render_to_response('listpage.html',pagedata) 
```

**网址.py**

```
url(r'^blog/category/(?P<slug>[^\.]+)','indianapp.views.view_category',name='view_by_category'), 
```

**View_category.html**

```
{% block title %}{{ category.title }}{% endblock %}

{% block content %}
{% if post_list %}
    <ul>
    {% for post in post_list %}
        <li><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>There are no posts.</p>
{% endif %}
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:48:48.373

你需要的是：

`category_posts = category.posts_set.all()`

或者

`category_posts = Posts.objects.filter(category=category)`

我鼓励你阅读 Django 教程。

# java - Spring @Pattern bean 验证与本地化模式？

> ID：14381430
> 
> 赞同：1
> 
> 时间：2013-01-17T14:37:08.840
> 
> 标签：java, spring, localization

我们的 Spring MVC 应用程序使用视图 bean 上的 @Pattern 注释来限制我们的用户可以输入的字符。

```
@Pattern(regexp = "[a-zA-Z0-9_.]*")
private String username; 
```

我们正在将应用程序本地化为各种欧洲语言（法语、德语等），并希望包含其他字符，例如带有重音和变音符号的字符。

我觉得我们应该集中精力排除我们不想要的角色，还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:06:41.727

我认为`\p{L}`这就是您要寻找的东西。那是 unicode 字符的字符类。另请参阅 Pattern 类的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T13:41:30.427

您也可以将此模式 [\\p{IsL}] 用于 Unicode 字符。它包括重音符号 (á é í ó ú) 和其他欧洲字符 (ñ ...)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T11:58:28.663

考虑使用这种模式：

```
@Pattern(regexp = "^[a-zA-Z0-9_.\u00C0-\u1FFF\u2C00-\uD7FF]*$")
private String username; 
```

请注意，它也包括非欧洲语言。虽然，`\p{L}`也应该可以正常工作：

```
@Pattern(regexp = "^[\\p{L}0-9_.]*$")
private String username; 
```

请参阅[https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

# ios - 使用 Parse 作为我的 BaaS 制作社交照片共享应用程序

> ID：14381438
> 
> 赞同：0
> 
> 时间：2013-01-17T14:37:40.173
> 
> 标签：ios, photo, social

我正在尝试制作一个有点像 Instagram 的应用程序，但以自己的方式独一无二。有没有人在他们的应用程序 Anypic 中使用 Parse 提供的源代码？我想知道是否可以使用它并换掉我自己的元素以使其成为我自己的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:00:20.057

我没有使用 Parse 的源代码，但我想知道本教程是否可以帮助您：

[http://www.raywenderlich.com/19341/how-to-easily-create-a-web-backend-for-your-apps-with-parse](http://www.raywenderlich.com/19341/how-to-easily-create-a-web-backend-for-your-apps-with-parse)

# iphone - iphone拍照时会自动保存坐标吗

> ID：14381440
> 
> 赞同：-2
> 
> 时间：2013-01-17T14:37:40.977
> 
> 标签：iphone, map, gps, photo, coordinate

iPhone/ipad 是否会在用户拍照时自动保存坐标。我问的原因是，当我将照片导入 Mac 中的 iPhoto 时，即使我在没有信号的情况下出国旅行，也可以看到我拍摄这张照片的位置。我认为这是一个非常酷的功能。我正在考虑开发一个类似 iPhoto 的应用程序，用户可以在地图上看到他们在哪里拍照。任何建议和答案将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:40:40.330

> iPhone/ipad 是否会在用户拍照时自动保存坐标。

( `Error: expected '?', found '.'`...)

好吧，这取决于用户是否启用了此功能。如果照片应用无权访问用户的位置，则不会对图像进行地理标记。否则它会。

# java - 问题 java.lang.Exception：超过锁定等待超时；尝试重启事务

> ID：14381444
> 
> 赞同：0
> 
> 时间：2013-01-17T14:37:51.787
> 
> 标签：java, mysql, tomcat, locking

当我尝试运行代码时出现此错误： java.lang.Exception: Lock wait timeout exceeded; 尝试重新启动事务。我看到了 inoodb 状态，我明白了。我怎样才能把它翻译成我知道的语言？如何修改 innodb 变量的时间？

谢谢

```
mysql> show engine innodb status\g

| InnoDB |      |
=====================================
130117 13:25:22 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 19 seconds
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 5, signal count 5
Mutex spin waits 0, rounds 40, OS waits 2
RW-shared spins 6, OS waits 3; RW-excl spins 0, OS waits 0
------------
TRANSACTIONS
------------
Trx id counter 0 46088
Purge done for trx's n:o < 0 45663 undo n:o < 0 0
History list length 5
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 0 0, not started, process no 20582, OS thread id 139811275994880
MySQL thread id 39, query id 169 localhost root
show engine innodb status
---TRANSACTION 0 46087, ACTIVE 8 sec, process no 20582, OS thread id 139811275593472 inserting
mysql tables in use 1, locked 1
LOCK WAIT 5 lock struct(s), heap size 1216, 3 row lock(s), undo log entries 1
MySQL thread id 44, query id 168 172.17.150.33 root update
INSERT INTO albaranes    (id_cuenta_emisora,id_cuenta_receptora,id_pedido,id_formato_documento,descuento,nombre_report,destino_report) VALUES (    19 ,                           23 ,                         1 ,                                   2 ,                        0.0,                                null,null   )
------- TRX HAS BEEN WAITING 8 SEC FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 0 page no 228 n bits 256 index `PRIMARY` of table `cluw`.`pedidos` trx id  0 46087 lock mode S locks rec but not gap waiting
Record lock, heap no 106 PHYSICAL RECORD: n_fields 13; compact format; info bits 0
0: len 4; hex 00000001; asc     ;; 1: len 6; hex 00000000b403; asc       ;; 2: len 7; hex    800000002d0110; asc     -  ;; 3: len 4; hex 00000001; asc     ;; 4: len 4; hex 00000017; asc     ;;   5: len 10; hex 32303132303430303031; asc 2012040001;; 6: len 8; hex 8000124ca5887d00; asc    L  } ;; 7: len 1; hex 80; asc  ;; 8: len 4; hex 00000000; asc     ;; 9: SQL NULL; 10: SQL NULL; 11: SQL NULL; 12: len 4; hex 00000000; asc     ;;

------------------
---TRANSACTION 0 46083, ACTIVE 9 sec, process no 20582, OS thread id 139811275794176
11 lock struct(s), heap size 1216, 9 row lock(s), undo log entries 7
MySQL thread id 43, query id 157 172.17.150.33 root
Trx read view will not see trx with id >= 0 46084, sees < 0 46084
--------
FILE I/O
--------
I/O thread 0 state: waiting for i/o request (insert buffer thread)
I/O thread 1 state: waiting for i/o request (log thread)
I/O thread 2 state: waiting for i/o request (read thread)
I/O thread 3 state: waiting for i/o request (write thread)
Pending normal aio reads: 0, aio writes: 0,
ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
73 OS file reads, 9 OS file writes, 9 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.11 writes/s, 0.11 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2,
0 inserts, 0 merged recs, 0 merges
Hash table size 17393, node heap has 1 buffer(s)
0.00 hash searches/s, 2.53 non-hash searches/s
---
LOG
---
Log sequence number 0 10153404
Log flushed up to   0 10153404
Last checkpoint at  0 10151824
0 pending log writes, 0 pending chkp writes
12 log i/o's done, 0.11 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 20742848; in additional pool allocated 1048576
Dictionary memory allocated 188160
Buffer pool size   512
Free buffers       424
Database pages     87
Modified db pages  14
Pending reads 0
Pending writes: LRU 0, flush list 0, single page 0
Pages read 87, created 0, written 1
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
2 read views open inside InnoDB
Main thread process no. 20582, id 139811124684544, state: sleeping
Number of rows inserted 7, updated 0, deleted 0, read 70
0.37 inserts/s, 0.00 updates/s, 0.00 deletes/s, 2.89 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================

1 row in set (0.00 sec) 
```

这是给我带来问题的代码：

```
public TDatosRetorno sincronizarPedidos(Tdatospedidos pedido,int metodo_facturacion,int proveedor){
        TDatosRetorno resultado = new TDatosRetorno();

        System.out.println("Voy a sincronizar los pedidos ahora mismo");
        //System.out.println("Pedidos"+pedidos);
        System.out.println(pedido.getId_cuenta()+" y pedido es:"+pedido.getId_pedido());
        try {
        this.conexion = conectar();
        this.conexion.setAutoCommit(false);

        int estado_pedido=0;
        Date f_aprobacion=null;
        boolean pedido_provisionado = true;

        Date f_provision=null;
        String unidad_duracion_contrato=" ";
        int duracion_contrato=0;
        Date f_inicio_contrato = new Date();
        Date f_fin_contrato = new Date();
        DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        Calendar cal = Calendar.getInstance();

        //int id_cuenta=buscar_cuentaPedidos_ccis(pedido.getId_cuenta(),proveedor);
        //System.out.println("id_cuenta es:"+id_cuenta);
        SQL="INSERT pedidos (id_pedido,id_estado_pedido,id_cuenta,n_pedido,f_creacion,es_actualizacion,id_pedido_actualizado,f_inicio_contrato,f_fin_contrato,f_aprobacion,estado_envio)"+
        " VALUES(?,?,?,?,?,?,?,?,?,?,?)";
        System.out.println("LA SQL de insertar pedidos es:"+SQL);
        //int key=0;
        this.pstm = this.conexion.prepareStatement(SQL,PreparedStatement.RETURN_GENERATED_KEYS);
        this.pstm.setInt(1, pedido.getId_pedido());
        this.pstm.setInt(2, 1);
        this.pstm.setInt(3, pedido.getId_cuenta());
        this.pstm.setString(4, pedido.getN_pedido());
        Object objPed = pedido.getF_creacion();
        if(objPed!=null){
            System.out.println("Fecha de creación es diferente de nulo");
            java.sql.Date f_creacionAux = new java.sql.Date(pedido.getF_creacion().getTime());  
            this.pstm.setDate(5, f_creacionAux);
        }else{
            System.out.println("Fecha de creación es nulo");
            this.pstm.setDate(5, null);
        }

        this.pstm.setBoolean(6, pedido.isEs_actualizacion());
        this.pstm.setInt(7, pedido.getId_pedido_actualizado());
        this.pstm.setDate(8, null);
        this.pstm.setDate(9, null);
        this.pstm.setDate(10, null);

        this.pstm.setInt(11, 0);

        System.out.println("Vamos a hacer la insercción de pedidos");
         int ejecutado =  this.pstm.executeUpdate();
            if(ejecutado==0){   
               System.out.println("Ejecutado tiene valor 0");
                throw new Exception("Error al grabar Pedidos");

         }

        ResultSet rs = this.pstm.getGeneratedKeys(); 
        int key = 0;
        if (rs != null && rs.next()) { 
            key = rs.getInt(1);

        }   
         System.out.println("El pedido tiene una key de:"+key);     
        System.out.println("Estamos fuera de pedidos ya");
        if(pedido.getDatos_SV()!=null){

            for (int i=0;i<pedido.getDatos_SV().length;i++){
                servID=new int[pedido.getDatos_SV().length];
                SQL="INSERT INTO servidores_virtuales (id_servidor_virtual,id_pedido,nombre_servidor,duracion_contrato,cpu_cant,ram_cant,hdd_cant,hdd_unidad,sv_pvp,cpu_pvp,ram_pvp,hdd_pvp,sv_pvp_dist,cpu_pvp_dist,ram_pvp_dist,hdd_pvp_dist,ip_pvp,ip_pvp_dist,ip_polled_pvp,ip_polled_pvp_dist,ip_custom_pvp,ip_custom_pvp_dist,data_center,cluster,plantilla,estado_aprobacion,f_aprobacion,f_provision,es_actualizacion,f_actualizacion,disco_almacenamiento) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);";
                System.out.println("LA SQL A METER ES:"+SQL);
                System.out.println("El número de servidores a meter es:"+pedido.getDatos_SV().length);

                PreparedStatement pstmSv = this.conexion.prepareStatement(SQL,PreparedStatement.RETURN_GENERATED_KEYS);
                //System.out.println("El virtual server id que voy a meter tiene id de ccis:"+pedido.getDatos_SV()[i].getId_servidor_virtual_ccis());

                pstmSv.setInt(1, pedido.getDatos_SV()[i].getId_servidor_virtual());
                pstmSv.setInt(2, pedido.getId_pedido()); //Last insert id de pedido

                System.out.println("Nombre del servidor:"+pedido.getDatos_SV()[i].getNombre_servidor());
                pstmSv.setString(3, pedido.getDatos_SV()[i].getNombre_servidor());
                pstmSv.setString(4, pedido.getDatos_SV()[i].getDuracion_contrato());
                pstmSv.setInt(5, pedido.getDatos_SV()[i].getCpu_cant());
                pstmSv.setString(6, pedido.getDatos_SV()[i].getRam_cant());
                pstmSv.setString(7, pedido.getDatos_SV()[i].getHdd_cant());
                pstmSv.setString(8, pedido.getDatos_SV()[i].getHdd_unidad());
                pstmSv.setDouble(9, pedido.getDatos_SV()[i].getSv_pvp());
                pstmSv.setDouble(10, pedido.getDatos_SV()[i].getCpu_pvp());
                pstmSv.setDouble(11, pedido.getDatos_SV()[i].getRam_pvp());
                pstmSv.setDouble(12, pedido.getDatos_SV()[i].getHdd_pvp());
                pstmSv.setDouble(13, pedido.getDatos_SV()[i].getSv_pvp_dist());
                pstmSv.setDouble(14, pedido.getDatos_SV()[i].getCpu_pvp_dist());
                pstmSv.setDouble(15, pedido.getDatos_SV()[i].getRam_pvp_dist());
                pstmSv.setDouble(16, pedido.getDatos_SV()[i].getHdd_pvp_dist());
                pstmSv.setDouble(17, pedido.getDatos_SV()[i].getIp_pvp());
                pstmSv.setDouble(18, pedido.getDatos_SV()[i].getIp_pvp_dist());
                pstmSv.setDouble(19, pedido.getDatos_SV()[i].getIp_polled_pvp());
                pstmSv.setDouble(20, pedido.getDatos_SV()[i].getIp_polled_pvp_dist());
                pstmSv.setDouble(21, pedido.getDatos_SV()[i].getIp_custom_pvp());
                pstmSv.setDouble(22, pedido.getDatos_SV()[i].getIp_custom_pvp_dist());
                pstmSv.setString(23, pedido.getDatos_SV()[i].getData_center());
                pstmSv.setString(24, pedido.getDatos_SV()[i].getCluster());
                pstmSv.setString(25, pedido.getDatos_SV()[i].getPlantilla());
                pstmSv.setInt(26, pedido.getDatos_SV()[i].getEstado_aprobacion());
                //Chequear nulos
                Object objAprob = pedido.getDatos_SV()[i].getF_aprobacion();
                if(objAprob!=null){

                    java.sql.Date f_aprobacionAux = new java.sql.Date(pedido.getDatos_SV()[i].getF_aprobacion().getTime());  
                    pstmSv.setDate(27, f_aprobacionAux);

                }else{
                    System.out.println("Nuloooooooooooooooooo");
                    pstmSv.setDate(27, null);
                }
                Object obj=pedido.getDatos_SV()[i].getF_provision();
                if(obj==null){
                        System.out.println("Nulooooooooooooooo");
                        pstmSv.setDate(28, null);
                }else{
                  java.sql.Date f_provisionAux = new java.sql.Date(pedido.getDatos_SV()[i].getF_provision().getTime());
                  pstmSv.setDate(28, f_provisionAux);
                }  

                pstmSv.setBoolean(29, pedido.getDatos_SV()[i].isEs_actualizacion());
                if(pedido.getDatos_SV()[i].getF_actualizacion()!=null){
                    java.sql.Date f_actualizacionAux =new java.sql.Date(pedido.getDatos_SV()[i].getF_actualizacion().getTime());
                    pstmSv.setDate(30, f_actualizacionAux);     
                }else{

                    pstmSv.setDate(30, null);

                }
                pstmSv.setString(31, pedido.getDatos_SV()[i].getDisco_almacenamiento());

                System.out.println("El estado de aprobación del pedido es:"+pedido.getDatos_SV()[i].getEstado_aprobacion());                    
                switch(pedido.getDatos_SV()[i].getEstado_aprobacion()){

                     case 0:{
                         switch(estado_pedido){
                             case 0:{
                                 estado_pedido =1;
                                 break;
                             }
                             case 1:{
                                 estado_pedido =1;
                                 break;
                             }
                             case 2:{
                                 estado_pedido = 1;
                                 break;
                             }

                         }
                         break;
                     }
                     case 1:{
                         switch(estado_pedido){

                            case 0:{
                                estado_pedido = 2;
                                break;
                            }
                            case 1:{
                                estado_pedido =1;
                                break;
                            }
                            case 2:{
                                estado_pedido=2;
                                break;
                            }
                         }
                         break;
                     }

                }

                if(estado_pedido==2){
                    if(f_aprobacion==null){
                        f_aprobacion = pedido.getDatos_SV()[i].getF_aprobacion();
                    }else{
                        if (f_aprobacion.compareTo(pedido.getDatos_SV()[i].getF_aprobacion())<0){

                            f_aprobacion = pedido.getDatos_SV()[i].getF_aprobacion();
                        }

                    }

                    if(pedido.getDatos_SV()[i].getF_provision()==null){
                        pedido_provisionado = false;
                    }
                    if(f_provision == null){
                        pedido.getDatos_SV()[i].getF_provision();
                    }else{
                        if(pedido.getDatos_SV()[i].getF_provision().compareTo(f_provision)>0){
                            f_provision=pedido.getDatos_SV()[i].getF_provision();
                        }
                    }

                }

                String [] duracion = pedido.getDatos_SV()[i].getDuracion_contrato().split("");
                int cant=0;
                if(duracion[0].trim().isEmpty()){
                    cant=0;
                }else{
                    cant = Integer.parseInt(duracion[0].trim());
                }

                String unidad = duracion[1].trim().toUpperCase();

                if(unidad_duracion_contrato ==" "){
                    System.out.println("unidad_duracion_contrato es vacio y se llena");
                    unidad_duracion_contrato = unidad;
                    duracion_contrato = cant;
                    System.out.println("La duración de contrato es:"+cant);
                    System.out.println("La unidad de duracion de contrato es:"+unidad_duracion_contrato);
                }/*else{*/
                    /* if(unidad_duracion_contrato != unidad){
                         System.out.println("Esto es lo que me falla donde unidad_duracion_contrato es:"+unidad_duracion_contrato +" y unidad es:"+unidad);
                     }
                    if (unidad_duracion_contrato != unidad || duracion_contrato != cant){
                        throw new Exception ("Pedido con diferentes duraciones de contrato: "+key);
                    }*/
                /*}*/
                System.out.println("Voy a hacer el insert de los servidores virtuales");    

                int ejecutadoServiVirtual =  pstmSv.executeUpdate();
                System.out.println("ejecutadoServiVirtual es:"+ejecutadoServiVirtual);
                if(ejecutadoServiVirtual==0){                         
                    throw new Exception("Error al grabar Pedidos");

             }
                ResultSet rsServ = pstmSv.getGeneratedKeys(); 

                if (rsServ != null && rsServ.next()) { 
                  int  keyServidorV = rsServ.getInt(1);
                  System.out.println("El keyServidorV es:"+keyServidorV);
                } 

                /*for(int h=0;h< pedido.getDatos_SV().length;h++){

                    System.out.println("h---------->"+h);*/
                    switch (metodo_facturacion){
                        case 1: //DIODE
                        case 2: //DIRECTO 
                        {
                              TDatosRetorno result_coste = insertar_PrecioCoste_SV(pedido.getDatos_SV()[i].getId_servidor_virtual(),pedido.getDatos_SV()[i].getPlantilla(),pedido.getDatos_SV()[i].getDisco_almacenamiento(),proveedor);

                              if(result_coste.getError()==-1){
                                  throw new Exception(result_coste.getDescripcion_error());

                              }
                              break;
                        }
                    }
                /*}*/

                int ind =0;

                /*for(int z =0;z<pedido.getDatos_SV().length;z++){  */ //Meter sa dentro de servidores virtuales

                    if(pedido.getDatos_SV()[i].getDatos_servicios_adicionales()!=null){  

                        SQL="INSERT INTO servicios_adicionales (id_servicio_adicional,id_servidor_virtual,sku,descripcion,cantidad,unidad,pvp,unidad_dist,pvp_dist,base_pvp,base_pvp_dist) VALUES(?,?,?,?,?,?,?,?,?,?,?)";

                           PreparedStatement pstmSA = this.conexion.prepareStatement(SQL,PreparedStatement.RETURN_GENERATED_KEYS);
                           for(int k=0;k<pedido.getDatos_SV()[i].getDatos_servicios_adicionales().length;k++){
                                servID[i]=pedido.getDatos_SV()[i].getId_servidor_virtual();
                                System.out.println("k------------>"+k);

                                pstmSA.setInt(1, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getId_servicios_adicionales());
                                pstmSA.setInt(2, pedido.getDatos_SV()[i].getId_servidor_virtual());  //Nuestro lastinsert
                                System.out.println("SKU----->"+pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getSku());
                                pstmSA.setString(3, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getSku());
                                System.out.println("Descripción---->"+pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getDescripcion());
                                pstmSA.setString(4, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getDescripcion());
                                pstmSA.setInt(5, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getCantidad());
                                pstmSA.setString(6, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getUnidad());
                                pstmSA.setDouble(7, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getPvp());
                                pstmSA.setString(8, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getUnidad_dist());
                                pstmSA.setDouble(9, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getPvp_dist());
                                pstmSA.setDouble(10, pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getBase_pvp());
                                pstmSA.setDouble(11,pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getBase_pvp_dist());

                                ind++;

                               System.out.println("Voy a ejecutandoSA ");
                                int ejecutadoSA =  pstmSA.executeUpdate();
                                if(ejecutadoSA==0){ 
                                   throw new Exception("Error al grabar envíos Servicios Adicionales");
                                }

                                ResultSet rsSA = pstmSA.getGeneratedKeys(); 
                                int  keyServidorA=0;
                                if (rsSA != null && rsSA.next()) { 
                                    keyServidorA = rsSA.getInt(1); 

                                }

                                /*for(int k=0;k<pedido.getDatos_SV()[i].getDatos_servicios_adicionales().length;k++){*/

                                       switch(metodo_facturacion){
                                          case 1:// DIODE
                                          case 2: //DIRECTA 
                                          {

                                              //System.out.println("keyServidorA es:"+keyServidorA);
                                              System.out.println("Sku es------------->"+pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getSku());
                                              TDatosRetorno result_coste = insertar_precioCoste_SA(pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getId_servicios_adicionales(),pedido.getDatos_SV()[i].getDatos_servicios_adicionales()[k].getSku(),1);

                                              if(result_coste.getError() == -1){
                                                  throw new Exception (result_coste.getDescripcion_error());
                                              }
                                              break;
                                          }
                                       }
                                   /*}*/

                           }

                    }
                /*}*/
                System.out.println("He acabado de grabar servicios adicionales");

         }

        }else{
            throw new Exception("Pedido sin servidores virtuales:"+pedido.getId_pedido());  
        }
        System.out.println("El método de facturación es:"+metodo_facturacion);
        switch(metodo_facturacion){

            case 1:{
                System.out.println("Estado_Pedido es_"+estado_pedido);
                if(estado_pedido == 1 || estado_pedido == 2){

                    if(pedido.isEs_actualizacion()){
                        f_inicio_contrato = pedido.getF_creacion();
                        f_fin_contrato = obtener_fecha_fin_contrato(pedido.getId_pedido_actualizado());
                    }else{
                        System.out.println("f_aprobacion es:"+f_aprobacion);
                        if(f_aprobacion == null)
                            f_inicio_contrato = pedido.getF_creacion();
                        else
                            f_inicio_contrato = f_aprobacion;
                        System.out.println("Unidad_duracion_contrato es:"+unidad_duracion_contrato);
                        switch(unidad_duracion_contrato){

                        case "DAY":{
                               Calendar calDays = Calendar.getInstance(); 
                               calDays.setTime(f_inicio_contrato); 
                               calDays.add(Calendar.DATE, duracion_contrato);   
                               f_fin_contrato = calDays.getTime();
                               break;
                           }
                           case "WEEK":{

                               Calendar calDays = Calendar.getInstance(); 
                               calDays.setTime(f_inicio_contrato); 
                               calDays.add(Calendar.DATE, duracion_contrato*7);     
                               f_fin_contrato = calDays.getTime();
                               break;
                           }
                           case "MONTH":{
                               System.out.println("Estoy en mes y la duracion de contrato es:"+duracion_contrato);
                               Calendar calDays = Calendar.getInstance(); 
                               calDays.setTime(f_inicio_contrato); 
                               calDays.add(Calendar.MONTH, duracion_contrato);  
                                f_fin_contrato = calDays.getTime();
                                System.out.println("El fin de contrato es:"+f_fin_contrato);
                               break;
                           }
                           case "YEAR":{
                              Calendar calDays = Calendar.getInstance(); 
                              calDays.setTime(f_inicio_contrato); 
                              calDays.add(Calendar.YEAR, duracion_contrato); 
                              f_fin_contrato = calDays.getTime();
                              break;
                           }
                        }
                    }

                    if(pedido_provisionado){
                        estado_pedido = 3;
                    }
                }
                break;
            } 
            case 2:{
                if(estado_pedido == 2){

                    if(pedido.isEs_actualizacion()){
                        f_inicio_contrato = pedido.getF_creacion();
                        f_inicio_contrato = obtener_fecha_fin_contrato(pedido.getId_pedido_actualizado());
                    }else{
                        System.out.println("f_aprobacion es:"+f_aprobacion);
                        if(f_aprobacion == null){
                            System.out.println("f_aprobacion es nulo entonces hay"+pedido.getF_creacion());
                            f_inicio_contrato = pedido.getF_creacion();
                        }   
                        else
                            f_inicio_contrato = f_aprobacion;

                        switch (unidad_duracion_contrato){
                           case "DAY":{
                               Calendar calDays = Calendar.getInstance(); 
                               calDays.setTime(f_inicio_contrato); 
                                calDays.add(Calendar.DATE, duracion_contrato);  
                               f_fin_contrato = calDays.getTime();
                               break;
                           }
                           case "WEEK":{

                               Calendar calDays = Calendar.getInstance(); 
                               calDays.setTime(f_inicio_contrato); 
                               calDays.add(Calendar.DATE, duracion_contrato*7);     
                               f_fin_contrato = calDays.getTime();
                               break;
                           }
                           case "MONTH":{

                               Calendar calDays = Calendar.getInstance(); 
                               calDays.setTime(f_inicio_contrato); 
                               calDays.add(Calendar.MONTH, duracion_contrato);  
                                f_fin_contrato = calDays.getTime();
                               break;
                           }
                           case "YEAR":{
                              Calendar calDays = Calendar.getInstance(); 
                              calDays.setTime(f_inicio_contrato); 
                              calDays.add(Calendar.YEAR, duracion_contrato); 
                              f_fin_contrato = calDays.getTime();
                              break;
                           }
                        }

                        if(pedido_provisionado){
                            estado_pedido = 3;
                        }
                    }

                }
                break;
              }
            } 

            int id_formato_documento;
            System.out.println("Voy a mandar un albarán a:"+pedido.getId_cuenta());
            Tcuenta cuenta_receptora = buscar_Cuenta(pedido.getId_cuenta());  
            if(cuenta_receptora.getCuenta()!= -1){  //AquÃ­ habÃ­a -1
                System.out.println("Cuenta receptora la cuenta padre es:"+cuenta_receptora.getCuenta_padre());
                Tcuenta cuenta_emisora = buscar_cuenta_emisora(cuenta_receptora.getCuenta_padre());
                while(cuenta_emisora.getCuenta()!=-1){  //AquÃ­ habÃ­a -1

                    if(cuenta_emisora.getNivel()==0){
                        id_formato_documento = 1;
                    }else{
                        id_formato_documento = 2;
                    }

                    TDatosRetorno result1 = grabarAlbaran(pedido.getId_pedido(),cuenta_emisora.getCuenta(),cuenta_receptora.getCuenta(),cuenta_receptora.getDescuento(),id_formato_documento);
                    if(result1.getError()==-1){                  //Nuestro
                        throw new Exception(result1.getDescripcion_error());
                    }
                    cuenta_receptora = cuenta_emisora;

                    cuenta_emisora = buscar_cuenta_emisora(cuenta_receptora.getCuenta_padre()); //Tipo String n_cuenta_padre
                    System.out.println("Cuenta receptora es:"+cuenta_receptora.getCuenta());
                }
            }else{
                throw new Exception("La cuenta del pedido: "+pedido.getId_cuenta()+"no existe");
            }

                TDatosRetorno result;
            for(int x=0;x<servID.length;x++){
                System.out.println(servID[x]);
                if(servID[x]!=0){
                    result = generar_lineas_albaran(pedido,pedido.getId_pedido(),metodo_facturacion,servID[x]);
                    if(result.getError()==-1){
                        throw new Exception(result.getDescripcion_error());
                    }
                }
            } 

                System.out.println("Voy a hacer el update de los pedidos");
                SQL = "UPDATE pedidos SET ";

                if(f_aprobacion != null){

                    SQL=SQL+" f_aprobacion = ?,";
                }

                if((metodo_facturacion == 1)||(metodo_facturacion == 2 && (estado_pedido == 2 || estado_pedido == 3))){

                    SQL = SQL +"f_inicio_contrato = ?,f_fin_contrato=?,";
                }

                SQL = SQL +"id_estado_pedido = ? WHERE id_pedido = ?";
                System.out.println("EL SQL DEL UPDATE ES:"+SQL);
                PreparedStatement pstmAct = this.conexion.prepareStatement(SQL);
                if((f_aprobacion!=null)&&(((metodo_facturacion == 1)||(metodo_facturacion == 2 && (estado_pedido == 2 || estado_pedido == 3))))){
                    System.out.println("Dentro de if de f_aprobacion");

                    java.sql.Date f_aprobacionAux = new java.sql.Date(f_aprobacion.getTime());
                    pstmAct.setDate(1, f_aprobacionAux);

                    java.sql.Date f_inicio_contratoAux = new java.sql.Date(f_inicio_contrato.getTime());
                    pstmAct.setDate(2, f_inicio_contratoAux);
                    java.sql.Date f_fin_contratoAux = new java.sql.Date(f_fin_contrato.getTime());
                    pstmAct.setDate(3, f_fin_contratoAux);
                    pstmAct.setInt(4, estado_pedido);
                    pstmAct.setInt(5, pedido.getId_pedido());  // Pedido mÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â­o?

                }

                if((f_aprobacion==null)&&(((metodo_facturacion == 1)||(metodo_facturacion == 2 && (estado_pedido == 2 || estado_pedido == 3))))){
                    System.out.println("Dentro de if de f_aprobacion");

                    java.sql.Date f_inicio_contratoAux = new java.sql.Date(f_inicio_contrato.getTime());
                    pstmAct.setDate(1, f_inicio_contratoAux);
                    java.sql.Date f_fin_contratoAux = new java.sql.Date(f_fin_contrato.getTime());
                    pstmAct.setDate(2, f_fin_contratoAux);
                    pstmAct.setInt(3, estado_pedido);
                    pstmAct.setInt(4, pedido.getId_pedido());  // Pedido mÃƒÆ’Ã†â€™Ãƒâ€šÃ‚Â­o?

                }

                int ejecutadoPed =  pstmAct.executeUpdate();
                if(ejecutadoPed==0){    
                   throw new Exception("Error al actualizar Pedidos");
                }

                if(pedido.getDatos_cuentas()!=null){

                    for(int i = 0; i <pedido.getDatos_cuentas().length;i++){

                        TDatosRetorno result2 = actualizarCuenta(pedido.getDatos_cuentas()[i], true, false, true);

                        if(result2.getError()==-1){
                            throw new Exception(result2.getDescripcion_error());

                        }
                    }

                }

            this.conexion.commit();
            this.conexion.setAutoCommit(true);
            this.conexion.close();
            resultado.setError(0);
            resultado.setDescripcion_error("");
            return resultado;

        } catch (Exception e) {
        // TODO Auto-generated catch block

                e.printStackTrace();
                resultado.setError(-1);
                resultado.setDescripcion_error(e.getMessage());
                try {
                    this.conexion.rollback();
                    this.conexion.setAutoCommit(true);
                } catch (SQLException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                e.printStackTrace();
                return resultado;

    }

} 
```

怎么了？。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:43:56.587

`uncommitted transactions`数据库锁在挂起时发生。数据库正在等待一个显式的`rollback`or `commit`。

**您在cluw.pedidos**上等待的表似乎有这样的交易。

*   检查是否有其他用户持有未提交的事务打开
*   检查您自己的查询工具是否正在持有未结交易（检查您的查询工具的首选项是否自动提交或类似的东西）
*   检查您的应用程序的代码以查看单独的连接是否仍在保持事务打开

根据受数据库事务影响的行数，数据库引擎可能会引入`row-level-locking`或`table-level-locking`基于任何其他更改，直到`transaction`完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:24:43.873

以下是需要密切关注的 innodb 状态的内容。

`INSERT INTO albaranes (id_cuenta_emisora,id_cuenta_receptora,id_pedido,id_formato_documento,descuento,nombre_report,destino_report) VALUES ( 19 , 23 , 1 , 2 , 0.0, null,null ) ------- TRX HAS BEEN WAITING 8 SEC FOR THIS LOCK TO BE GRANTED: RECORD LOCKS space id 0 page no 228 n bits 256 index`PRIMARY `of table`cluw `.`pedidos`trx id 0 46087 lock mode S locks rec but not gap waiting`

这意味着在插入时正在等待锁定表cluw的主键。

您对表 cluw 有外键约束，并且在另一个事务中创建了该行但未提交，导致该事务等待。

# java - Java eclipse中调用者的条件断点

> ID：14381446
> 
> 赞同：10
> 
> 时间：2013-01-17T14:37:52.437
> 
> 标签：java, eclipse, debugging, conditional-statements, watchpoint

我正在尝试使用 Eclipse 调试器中 Java 程序中的观察点来跟踪值的变化。类层次结构非常复杂，我正在跟踪的值被包装在容器中，该容器在许多地方都使用过。

更具体地说，有一个 container `SizeRequirement`，它有一个 property `minimum`，我正在跟踪它。许多布局管理器在许多地方为许多组件使用此类来定义对组件大小的要求。我需要捕捉确切的调用，其中值更改/设置为一个特定的布局管理器和其中的一个特定组件。是否可以按调用者过滤断点？我将尝试使用一些抽象代码来解释这个问题：

```
class ValueContainer {
  public String value;
}

class A {

  private ValueContainer valueContainer;

  public A () {
    valueContainer = new ValueContainer();
    valueContainer.value = "setByA";
  }

}

class B {

  private ValueContainer valueContainer;

  public B () {
    valueContainer = new ValueContainer();
    valueContainer.value = "setByB";
  }

} 
```

我设置了一个观察点`value`，我只希望断点仅在`value`A 类设置并忽略 B 调用时暂停。

更糟糕的是，类`SizeRequirement`是 Swing 库的一部分，并且深度集成在代码中，所以我不能使用继承在我想要跟踪它的某个确切位置用某个子代替换它。

**编辑**

所以这就是我用作条件断点的条件。信不信由你，它有效。:)

```
 StackTraceElement[] arr = Thread.currentThread().getStackTrace();
    boolean contains = false;
    for(StackTraceElement e : arr) {
        if (e.getClassName().contains("A")) {
            contains = true;
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:02:19.553

这很恶心，可能很慢，但你可以使用

```
Thread.currentThread().getStackTrace()[2].getClassName().contains("A") 
```

作为你的断点条件。

基于这个错误[https://bugs.eclipse.org/bugs/show_bug.cgi?id=72961](https://bugs.eclipse.org/bugs/show_bug.cgi?id=72961)我不认为 Eclipse 会直接支持它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:53:28.250

Eclipse 可以做到这一点。创建一个断点，然后进入 Debug 透视图并进入“Breakpoints”视图。选择断点并

在那里你可以说启用“条件”并选择“值更改时暂停”

然后，您必须在下面的字段中输入您的值，在您的情况下可能是“最小值”。

**编辑：**

我刚刚尝试过，但没有按预期工作，但我找到了另一种可能有效的解决方案：

[java/eclipse中的数据断点](https://stackoverflow.com/questions/4086039/data-breakpoints-in-java-eclipse)

总结：在定义字段的行中创建一个断点，它将成为一个观察点。在“断点属性”中，您可以将其指定为仅在更改时暂停（边缘上的符号将是一支笔），而不是在访问时（符号将是一副眼镜）。

# php - PHP cURL 不获取图像

> ID：14381450
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:38:03.910
> 
> 标签：php, curl

我试图通过 cURL 获取图像来显示图像，但没有显示任何内容。标头已正确发送，所以我接下来应该看哪里？

```
 <?php
    error_reporting(E_ALL);
    ini_set('display_errors', '1');

    //$imgurl = $_GET['img'];

    $query = curl_init();
    $headers[] = 'Cache-Control: maxage=. $cache_expire';
    $headers[] = 'Pragma: public';
    $headers[] = 'Accept-Encoding: None';
    //curl_setopt($query, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($query, CURLOPT_URL, "http://static4.fjcdn.com/comments/3885449+_bf7680ea243464ace7ddb3d912c7c7d6.jpg");
    curl_setopt($query, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
    curl_setopt($query, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($query, CURLOPT_HEADER, 1);
    $ret = curl_exec($query);
    if(!preg_match("/Content-Type\: image(.*)\r\n/i", $ret, $mime))
    die("die potato!");
    header($mime[0]);
    echo substr(strstr($ret, "\r\n\r\n"), 4);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:41:47.880

你为什么要把事情复杂化？这种方式怎么样：

```
$img_url = 'http://static4.fjcdn.com/comments/3885449+_bf7680ea243464ace7ddb3d912c7c7d6.jpg';
$content = file_get_contents( $img_url );
header('Content-Type: image/png');
echo $content; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:42:11.700

`curl_setopt($query, CURLOPT_HEADER, 1);`从您的代码中删除。`CURLOPT_HEADER`在响应中包含响应标头。这将使您的图像格式错误。

以下代码可以正常工作。

```
function curlHeaderCallback($query, $header){
    if(stripos($header, "content-type")!==false){
        header(trim($header));
    }
    return strlen($header); 
}

$query = curl_init("http://bd1.php.net/images/php.gif");
curl_setopt($query, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt($query, CURLOPT_HEADERFUNCTION, 'curlHeaderCallback'); 
curl_setopt($query, CURLOPT_RETURNTRANSFER, 1);
$ret = curl_exec($query);
echo $ret; 
```

# jquery - PhoneGap中ajax调用的同步问题

> ID：14381452
> 
> 赞同：1
> 
> 时间：2013-01-17T14:38:34.203
> 
> 标签：jquery, ios, ajax, web-services, cordova

我在验证方法中调用了一个 web 服务，但是没有完成 web 服务就返回了验证方法，

代码>>

```
jQuery.validator.addMethod("name", function (value, element) {
    var validUsername = false;

    $.ajaxSetup({ "async": false });
    $.getJSON(serverName + '/handlers/qs-user.ashx?callback=?', {
        'username': $("#email").val(), 
        'op': 'GetMobileUser' 
        }, 
        function (data) {
            if (data.UserId == "null") {
                validUsername = true;
            } else {
                validUsername = false;
            }
        });

    $.ajaxSetup({ "async": true });
    var result = this.optional(element) || value == "" || validUsername;
    if (!result) {
        var validator = this;
        setTimeout(function () {
            validator.blockFocusCleanup = true;
            element.focus();
            validator.blockFocusCleanup = false;
        }, 1);
    }
    return result;
}, "That e-mail address has already been used."); 
```

如何同步此 Web 服务调用 .. as

```
$.ajaxSetup({ "async": false }); 
```

不工作 感谢您调查此事。:)

# facebook-graph-api - 将图 api 中 facebook 访问令牌的到期日期延长 2 个月以上

> ID：14381454
> 
> 赞同：8
> 
> 时间：2013-01-17T14:38:53.753
> 
> 标签：facebook-graph-api, facebook-access-token

我正在使用 python 处理 facebook 页面墙贴自动化

***我通过使用facebook graph api post***在我拥有的 fb 页面上自动发布所以我通过向[https://graph.facebook.com/mypagename/feed](https://graph.facebook.com/mypagename/feed) 发送 HTTP POST 请求来做到这一点

使用 access_token 和 message 作为 POST 参数

我通过选择我正在使用的应用程序并授予它**管理我的页面的权限来使用*****图形 api 资源***管理器生成访问令牌

 **最初 access_token 使用将在 2 小时内到期

要将到期日期延长至 2 个月，我向此 url 发送 HTTP GET 请求

> [https://graph.facebook.com/oauth/access_token?client_id=my_app_id&client_secret=my_app_secret&grant_type=fb_exchange_token&fb_exchange_token=old_access_token](https://graph.facebook.com/oauth/access_token?client_id=my_app_id&client_secret=my_app_secret&grant_type=fb_exchange_token&fb_exchange_token=old_access_token)

响应是一个 json 字符串，带有**新的 access_token**和**过期**时间（以秒为单位）

新访问令牌的到期时间现在为 60 天。

现在可以延长有效期超过60天吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-17T06:42:12.047

您可以使用来自 facebook 的以下 api 将令牌寿命刷新到 60 天，并且就在令牌即将到期时，在 60 天内再次调用相同的 api 以从该时间点将其寿命刷新回 60 天令牌过期是存在于 expires 参数中，其值以秒为单位

将 CLIENT_ID 和 CLIENT_SECRET 替换为其实际值

[https://graph.facebook.com/oauth/access_token?client_id=&client_secret=&grant_type=fb_exchange_token&fb_exchange_token=](https://graph.facebook.com/oauth/access_token?client_id=&client_secret=&grant_type=fb_exchange_token&fb_exchange_token=)

在 ACCESS_TOKEN 中，放入实际的令牌值而不附加“access_token=”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-08T18:02:29.587

**短期和长期代币**

用户访问令牌有两种形式：短期令牌和长期令牌。短期通证的寿命通常约为一**两个小时**，而长期通证的寿命通常约为**60 天**。您不应该依赖这些生命周期保持不变 - 生命周期可能会在没有警告的情况下更改或提前到期。在处理错误下查看更多信息。

所以剩下的唯一方法是**在 60 天之前使用代码重新生成。**

向图形 api 发出 GET 请求并从 JSON 响应中过滤掉访问令牌

在此处获取您的用户 ID [http://findmyfacebookid.com/](http://findmyfacebookid.com/)

现在

要求

```
GET /{user-id}/accounts 
```

回复

```
{
  "data": [
    {
      "category": "Product/service",
      "name": "Sample Page",
      "access_token": "{access-token}",
      "id": "1234567890",
      "perms": [
        "ADMINISTER",
        "EDIT_PROFILE",
        "CREATE_CONTENT",
        "MODERATE_CONTENT",
        "CREATE_ADS",
        "BASIC_ADMIN"
      ]
    }, 
} 
```

[https://developers.facebook.com/docs/facebook-login/access-tokens#pagetokens](https://developers.facebook.com/docs/facebook-login/access-tokens#pagetokens)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:46:07.543

您的*页面访问令牌*实际上不会过期。请阅读[文档](https://developers.facebook.com/docs/facebook-login/access-tokens/expiration-and-extension)：

> **扩展页面访问令牌**
> 
> 当应用程序使用 manage_pages 权限进行身份验证时，应用程序可以从页面管理员用户那里检索页面访问令牌。如果用于检索此页面访问令牌的用户访问令牌是短暂的，则页面访问令牌也将是短暂的。
> 
> 要获得一个长期存在的页面访问令牌，请将用户访问令牌交换为一个长期存在的令牌，如上所述，然后请求页面访问令牌。生成的页面访问令牌将没有任何到期时间。

因此，如果您使用长期存在的**用户**访问令牌，您将获得一个无限的**页面**访问令牌。**

# android - 屏幕底部的 Android 操作栏选项卡

> ID：14381455
> 
> 赞同：7
> 
> 时间：2013-01-17T14:38:54.520
> 
> 标签：android, android-actionbar, android-tabs

我事先同意任何想提出选项卡应该位于屏幕顶部的论点的人，但我无法控制我的应用程序的要求:)。我必须在屏幕底部构建一个带有标签的应用程序。我正在使用 SDK 14 和操作栏。这甚至可能吗？我已经在底部构建了一个带有选项卡的布局，但是当我将选项卡添加到 ActionBar 时，它们会自动呈现在屏幕顶部。

任何想法都将不胜感激，并感谢大家花时间阅读这篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:46:34.810

您可以使用 Tabhost 来满足需求，并且在 tab.xml 中您可以编写以下代码。这将正常工作。

```
<?xml version="1.0" encoding="UTF-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout android:orientation="vertical"
        android:layout_width="fill_parent" android:layout_height="fill_parent">
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:layout_weight="1" >
                 </FrameLayout>
          <TabWidget 
             android:id="@android:id/tabs"
            android:layout_width="fill_parent" android:layout_height="wrap_content"
            android:tabStripEnabled="false"
            android:layout_alignBottom="@android:id/tabcontent"
            android:background="#000000" />
          </RelativeLayout>
</TabHost> 
```

# c# - 使用表达式从 Lambda 创建安全的深度属性访问器

> ID：14381458
> 
> 赞同：4
> 
> 时间：2013-01-17T14:39:03.643
> 
> 标签：c#, expression-trees

我的目标是使用 Lambdas 创建一个可以安全检索深层属性值的属性绑定对象。安全起见，如果先前的属性之一为空，它会返回属性类型的默认值，而不是抛出空引用异常。

方法签名：

```
public static Func<TO, TP> BuildSafeAccessor<TO, TP>(this Expression<Func<TO, TP>> propertyExpression) where TO: class
{
} 
```

*编辑：澄清我的问题

所以如果我打电话：

```
var safeAccessor = BuildSafeAccessor<Person>(p => p.Address.Zip); 
```

当调用 safeAccessor 时，其逻辑如下：

```
if (p.Address == null)
    return default(TP);
return p.Address.Zip; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:27:31.807

这里的关键观察是您不需要“已经完全创建的 ifFalse 表达式”，您可以递归地构建它。

代码可能如下所示：

```
public static Func<TO, TP> BuildSafeAccessor<TO, TP>(Expression<Func<TO, TP>> propertyExpression)
{
    var properties = GetProperties(propertyExpression.Body);
    var parameter = propertyExpression.Parameters.Single();
    var nullExpression = Expression.Constant(default(TP), typeof(TP));

    var lambdaBody = BuildSafeAccessorExpression(parameter, properties, nullExpression);
    var lambda = Expression.Lambda<Func<TO, TP>>(lambdaBody, parameter);

    return lambda.Compile();
}

private static Expression BuildSafeAccessorExpression(Expression init, IEnumerable<PropertyInfo> properties, Expression nullExpression)
{
    if (!properties.Any())
        return init;

    var propertyAccess = Expression.Property(init, properties.First());
    var nextStep = BuildSafeAccessorExpression(propertyAccess, properties.Skip(1), nullExpression);

    return Expression.Condition(
        Expression.ReferenceEqual(init, Expression.Constant(null)), nullExpression, nextStep);
}

private static IEnumerable<PropertyInfo> GetProperties(Expression expression)
{
    var results = new List<PropertyInfo>();

    while (expression is MemberExpression)
    {
        var memberExpression = (MemberExpression)expression;
        results.Add((PropertyInfo)memberExpression.Member);
        expression = memberExpression.Expression;
    }

    if (!(expression is ParameterExpression))
        throw new ArgumentException();

    results.Reverse();

    return results;
} 
```

（请注意，此代码使用 LINQ 效率低下，以使其更具可读性。）

如果你在 lambda 上运行它`a => a.B.C.D`，它将创建一个表达式（显示`ToString()`它的结果）：

```
a => IIF((a == null), null, IIF((a.B == null), null, IIF((a.B.C == null), null, a.B.C.D))) 
```

请注意，此访问`a.B`次数最多为 3 次。如果该属性很慢或有副作用，那可能是个问题。如果这对您来说是个问题，我认为您需要将`Block`s 与局部变量一起使用。

# iphone - 使用 UIRoundRectButton 在 iPhone 模拟器中剪切文本 - 与我在情节提要中看到的不同

> ID：14381459
> 
> 赞同：0
> 
> 时间：2013-01-17T14:39:04.987
> 
> 标签：iphone, ios, xcode, ios-simulator

我正在创建一个简单的计算器应用程序，遵循斯坦福大学的教程 -[第一次作业](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)。

实际内容并不相关，唯一的问题是我在情节提要中有一个 UIRoundRectButton，它显示了一个固定的文本（如“sqrt”）。当我在模拟器（iPhone 5、iOS 6）中运行它时，某些按钮中的文本会被截断。

截图：

![在此处输入图像描述](../Images/8dbd866dac3be9b1e1fcd640ade389b5.png) ![在此处输入图像描述](../Images/671fedae25b654f5c4f0320194352b12.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:45:00.850

在我看来，您在 4 英寸 xib 上进行设计，但在 3.5 英寸模拟器上运行，自动布局会将您的下部按钮固定在屏幕底部，它们将被压扁。尝试以下之一：

*   在4寸模拟器上运行（设备-->硬件菜单）
*   在情节提要中切换到 3.5 英寸视图（底部的灰色图标及其上方和下方的三角形
*   关闭自动布局（在故事板的文件检查器上）
*   正确定义约束，使它们都相对于视图的顶部。

这些教程是在自动布局和 4 英寸显示屏之前编写的。在这个阶段你可能只想专注于教程内容，所以最后一个选项可能太多了，但我在[这里](http://commandshift.co.uk/blog/2013/01/18/autolayout-in-interface-builder/)有一篇博文讨论 IB 中的编辑约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T12:00:25.017

请取消选中 XIB 的“显示文件检查器”下的“使用自动布局”选项。

# linux - 解压缩并移动下载的文件 - Linux

> ID：14381460
> 
> 赞同：8
> 
> 时间：2013-01-17T14:39:07.093
> 
> 标签：linux, ubuntu, command-line

令人惊讶的是，我还没有在这里找到这个问题的直接答案。我还在学习Linux。假设我已将 zip 文件下载到我的下载文件夹。现在，我想将它移动到受保护的文件夹中，例如 /opts 或 /var。是否有一个很好的命令可以将文件`sudo move`和`unzip`文件放到我需要它去的地方？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T14:43:43.870

如果您希望执行两个单独的操作（移动和提取），那么您别无选择，只能使用两个命令。

但是，如果您的最终目标是将 zip 文件提取到特定目录，则可以将 zip 文件保留在原处并使用以下`-d`选项指定提取目录：

```
sudo unzip thefile.zip -d /opt/target_dir 
```

从[手册页](http://linux.die.net/man/1/unzip)：

> **[-d exdir]**
> 
> > 提取文件的可选目录。默认情况下，所有文件和子目录都在当前目录中重新创建；-d 选项允许在任意目录中提取（总是假设一个人有权写入该目录）。这个选项不需要出现在命令行的末尾；它也可以在 zipfile 规范之前（使用普通选项）、在 zipfile 规范之后或在文件和 -x 选项之间接受。选项和目录可以连接在一起，它们之间没有任何空格，但请注意，这可能会导致正常的 shell 行为被抑制。特别是，''-d ~''（波浪号）由 Unix C shell 扩展为用户主目录的名称，但 ''-d~'' 被视为文字子目录 ''~''

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:42:12.270

`sudo mv <file_name> /opts && unzip /opts/<file_name>`

您也可以指定解压缩的目标，以便您可以在单个命令中执行此操作。然而，这将与上面的命令有点不同，因为 zip 将保留在其当前位置，只有解压缩的文件将被提取到指定的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:44:16.100

```
unzip -d [target directory] [filename].zip 
```

# visual-c++ - Visual C++ 2008 版的二进制编辑器

> ID：14381465
> 
> 赞同：0
> 
> 时间：2013-01-17T14:39:24.883
> 
> 标签：visual-c++, visual-studio-2008

我在 Visual C++ 2008 版中找不到使用二进制编辑器打开文件的选项。这个是不是不再支持了。我正在使用以下步骤来打开二进制文件。

1) Ctrl+o

2）导航到目录

3) 打开

此时找不到二进制编辑器选项。

有人可以指导我如何在 Visual Studio 中打开二进制文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:47:35.333

迈克尔说过，但快速版中没有二进制编辑器

# php - 从视图中的其他表中检索数据

> ID：14381467
> 
> 赞同：0
> 
> 时间：2013-01-17T14:39:39.320
> 
> 标签：php, codeigniter

我将一组对象传递给视图，包括一些外部 ID 到数据库中的其他表。说具有属性“writer_id”的评论对象，该属性指的是用户的 id。

如何从视图中显示用户的数据（例如名称）？

这是控制器的“评论”：

```
function index() {

    $this->load->model('comment_model');
    $data['comments'] = $this->comment_model->get_comments();
    $this->load->view('comments',$data); } 
```

这是在 comment_model 里面：

```
function get_comments()
{
    $id = $this->uri->segment(3); // ignore this , it's given
    $q = $this->db->query("SELECT * FROM comments WHERE post_id=$id");

    if ($q->num_rows() > 0 ) {
        foreach ($q->result() as $row){
            $data[] = $row;
        }

        return $data;
    }

} 
```

我可以在视图中使用的只是“writer_id”，并且无法显示他的姓名或任何其他数据。

**更新**

这是视图文件

```
 <?php
    if (is_array($comments)){ ?>

    <?php foreach ($comments as $comment) : ?>

    <p>
    <?php echo $comment->text;?> - written by <?php echo $comment->writer_id ?>
    </p>

    <?php endforeach ;?>
    <?php } ?> 
```

这将打印：

> bla bla bla - 由 4 编写

它应该在哪里

> bla bla bla - 由 John 编写（其 id 为 4，在用户表中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:53:14.677

您可以进行简单的连接。

```
SELECT comments.*, users.name as user_name FROM comments INNER JOIN users ON comments.writer_id = users.user_id WHERE post_id=$id 
```

然后您将在结果数组中拥有 user_name。

# swing - 如何使用构造函数调用方法

> ID：14381469
> 
> 赞同：-2
> 
> 时间：2013-01-17T14:39:43.113
> 
> 标签：swing

我正在尝试从数据库中检索数据并使用 java swing 中的标签显示它。这是我的代码：

```
 public void SetUpJTable() {
    // Set Up Database Source
    db.setUp("IT Innovation Project");
    String sql = "Select topic_title,topic_description,topic_by from forumTopics WHERE topic_id = "
            + topicId + "";
    ResultSet resultSet = null;
    // Call readRequest to get the result
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            jLabel_topicTitle.setText(resultSet.getString("topic_title"));
            jLabel_content.setText(resultSet.getString("topic_description"));
            jLabel_topicBy.setText(resultSet.getString("topic_by"));
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

我使用构造函数来调用该方法：

```
 public eForumThreadContent(){
    SetUpJTable();
    }; 
```

但是，当我运行应用程序时，标签没有显示任何内容。那么我该如何解决这个问题呢？我不知道如何在没有主方法的类中调用方法。任何指南？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:45:27.090

从其他类调用方法：

```
 public class Class1
    {
        public static void methodFromClass1()
        {
            // body...
        }
    }

    public class Class2
    {
        Class1.methodFromClass1(); // thats the way you do it.
    } 
```

屁股你可以看到Class2没有主类..你也可以`methodFromClass1()`用同样的方式调用Class1。但这一切都在手册中..

# actionscript-3 - Starling AS3 -- 如何在 SWC 中使用位图对象

> ID：14381480
> 
> 赞同：0
> 
> 时间：2013-01-17T14:40:06.470
> 
> 标签：actionscript-3, bitmap, displayobject, starling-framework

我正在尝试了解 Starling 如何使我使用 as3 构建的应用程序受益。到目前为止，我对 Starling 的了解是它只使用位图对象而不是符号对象。我如何`BitmapData`上课并从中创造八哥`Image`。

*该位图是闪存中的符号，已转换为位图。然后将其属性修改为导出为 as3*

假设 swc 中有一个**Ship BitmapData 类**。根据 Starlings 关于它如何处理其他位图（如 png）的文档，我认为我应该能够做到这一点。

```
 var myShip:Image = Image.fromBitmap(new Ship()); 
```

这当然行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:14:52.523

fromBitmap() 期望接收一个位图对象，但在这里您传入了一个 BitmapData 类。Image 类需要纹理。

此外，您的语法略有不正确。

注意。有 Texture.fromBitmap 和 Texture.fromBitmapData。

虽然我没有尝试从 swc 访问资产，但您可以尝试：

```
var myShip:Image = new Image(Texture.fromBitmapData(new Ship()); 
```

也许在尝试访问 swc bitmapData 之前尝试让图像首先出现

```
var bd:BitmapData = new BitmapData(100, 100, false, 0xFF0000);
var myShip:Image = new Image(Texture.fromBitmapData(bd);
addChild(myShip); //should display a red square 
```

# apache-flex - 移动 flex 应用程序的缩放问题

> ID：14381483
> 
> 赞同：0
> 
> 时间：2013-01-17T14:40:13.093
> 
> 标签：apache-flex, flex-mobile

我有几个想在 flex 移动应用程序中运行的 AS3 游戏。我将我的原始游戏放入一个库中，然后将其添加到我的移动应用程序中。到目前为止，一切都很好。

我遇到的问题是，当游戏开始时，它不会自行缩放到我在游戏中指定的 StageScaleMode.SHOW_ALL。

我开始这样的游戏：

```
var game:MyGame = new MyGame();
var container:UIComponent = new UIComponent();
addElement(container);
container.addChild(game);               
this.actionBarVisible = false; 
```

我尝试在我的 mxml 中为舞台设置相同的比例选项，但它没有改变任何东西。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:40:35.087

移动设备屏幕具有不同的屏幕密度或 DPI（每英寸点数）。您可以将 DPI 值指定为 160、240 或 320，具体取决于目标设备的屏幕密度。当您启用自动缩放时，Flex 会针对每个设备的屏幕密度优化其显示应用程序的方式。

例如，假设您将目标 DPI 值指定为 160 并启用自动缩放。当您在 DPI 值为 320 的设备上运行应用程序时，Flex 会自动将应用程序缩放 2 倍。也就是说，Flex 会将所有内容放大 200%。

要指定目标 DPI 值，请将其设置为主应用程序文件中标记或标记的 applicationDPI 属性：

```
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
xmlns:s="library://ns.adobe.com/flex/spark" 
firstView="views.HomeView" 
applicationDPI="160"> 
```

如果您选择不自动缩放应用程序，则必须根据需要手动处理布局的密度变化。

设备可以有不同的屏幕尺寸或分辨率以及不同的 DPI 值或密度。

分辨率是高像素数乘以宽像素数：即设备支持的总像素数。

DPI 是每平方英寸的点数：即设备屏幕上的像素密度。术语 DPI 可与 PPI（每英寸像素数）互换使用。

applicationDPI（如果已设置）指定应用程序的目标 DPI。Flex 会自动应用比例因子以很好地适应具有不同 DPI 值的其他设备。

Capabilities.screenDPI 是当前设备的具体 DPI 值。

runtimeDPI 类似于 Capabilities.screenDPI。此值是当前设备 DPI，四舍五入为 DPIClassification 类定义的常量之一（160、240 和 320 DPI）。

如果您想知道当前屏幕上组件的实际尺寸（宽度和高度），您需要使用比例因子：

```
var scaleFactor:Number = runtimeDPI / applicationDPI;

var currentComponentSize:int =componentSize.height * scaleFactor; 
```

如果您无法访问 applicationDPI 和 runtimeDPI 值，则可以使用 Capabilities.screenDPI 手动计算 scaleFactor，如下所示：

```
 // Copy the applicationDPI setted in your application. ie:
    var _applicationDPI:int = 160;
    var _runtimeDPI:int;

    if(Capabilities.screenDPI < 200)
         _runtimeDPI = 160;
    else if(Capabilities.screenDPI >=200 && Capabilities.screenDPI < 280)
        _runtimeDPI = 240
    else if (Capabilities.screenDPI >=280)
        _runtimeDPI = 320;

    var scaleFactor:Number = _runtimeDPI / _applicationDPI;

    var currentComponentSize:int =componentSize.height * scaleFactor; 
```

[http://www.francescoflorio.info/?p=234](http://www.francescoflorio.info/?p=234)

# c# - 用于 ASP.NET 灯箱和服务器端控制器的 dhtmlxScheduler

> ID：14381485
> 
> 赞同：0
> 
> 时间：2013-01-17T14:40:20.590
> 
> 标签：c#, asp.net, lightbox

我们在 dhtmlxScheduler 中的自定义灯箱有问题，因为在您的示例中您使用了 HTML 控制器。我们可以在我们的自定义灯箱中使用服务器端控制器吗？顺便说一下，您是否将自定义表单放在用户控制器中

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="uc_taskFrom.ascx.cs" Inherits="Compudata_ProjectManager.userController.uc_taskFrom" %>
<div>
<!-- begin of Content Create TaskForm -->
<!-- Script manager-->
   <asp:ScriptManager ID="ScriptManager1" runat="server">
   </asp:ScriptManager>
   <!-- Validation Summary msg vs_TaskForm-->
   <asp:ValidationSummary ID="vs_TaskForm" runat="server" ForeColor="#CC0000" />
   <asp:UpdatePanel ID="UpdatePanel1" runat="server">
      <ContentTemplate>
      <!-- begin of Content Create TaskForm -->
         <asp:Panel ID="Panel1" runat="server" GroupingText="Create New Task">
            <table>
               <tr>
                  <td>
                     <label>
                        Project:</label>
                  </td>
                  <td>
                     <asp:DropDownList ID="ddl_projectsList" runat="server" DataSourceID="SqlDataSourceProjectList"
                        DataTextField="projectName" DataValueField="projectID" AppendDataBoundItems="True"
                        OnSelectedIndexChanged="ddl_projectsList_SelectedIndexChanged" AutoPostBack="True">
                        <asp:ListItem Value="-1">Select Project</asp:ListItem>
                     </asp:DropDownList>
                     <asp:CompareValidator ID="cv_projectList" runat="server" ControlToValidate="ddl_projectsList"
                        ErrorMessage="Select Project" ForeColor="#FC0000" Operator="NotEqual" ValueToCompare="-1">*</asp:CompareValidator>
                     <asp:SqlDataSource ID="SqlDataSourceProjectList" runat="server" ConnectionString="<%$ ConnectionStrings:Compudata_ProjectManagerConnection %>"
                        SelectCommand="SELECT [projectID], [projectName] FROM [Projects] ORDER BY [projectName]">
                     </asp:SqlDataSource>
                  </td>
               </tr>
               <tr>
                  <td>
                     <label>
                        Task Name:</label><em>*</em>
                  </td>
                  <td>
                     <asp:TextBox ID="txtb_taskName" runat="server"></asp:TextBox>
                     <asp:RequiredFieldValidator ID="rfv_taskName" runat="server" ControlToValidate="txtb_taskName"
                        ErrorMessage="Enter Task Name" ForeColor="#F60000">*</asp:RequiredFieldValidator>
                  </td>
               </tr>
               <tr>
                  <td>
                     Default Tech:
                  </td>
                  <td>
                     <asp:Literal ID="lit_dafaultTech" runat="server"></asp:Literal>
                  </td>
               </tr>
               <tr>
                  <td>
                     <label>
                        Assigned To :</label><em>*</em>
                  </td>
                  <td>
                     <asp:DropDownList ID="ddl_usersList" runat="server" AppendDataBoundItems="True" DataSourceID="SqlDataSourceUserList"
                        DataTextField="UserName" DataValueField="UserId">
                     </asp:DropDownList>
                     <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="ddl_usersList"
                        CssClass="Validator" ErrorMessage="select Tech" InitialValue="-1">*</asp:RequiredFieldValidator>
                     <asp:SqlDataSource ID="SqlDataSourceUserList" runat="server" ConnectionString="<%$ ConnectionStrings:Compudata_ProjectManagerConnection %>"
                        SelectCommand="SELECT [UserId], [UserName] FROM [vw_aspnet_Users]"></asp:SqlDataSource>
                  </td>
               </tr>
               <tr>
                  <td>
                     <label>
                        Status :</label><em>*</em>
                  </td>
                  <td>
                     <asp:DropDownList ID="ddl_status" runat="server" AppendDataBoundItems="True">
                     </asp:DropDownList>
                     <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="ddl_status"
                        ErrorMessage="select Status" InitialValue="-1" CssClass="Validator">*</asp:RequiredFieldValidator>
                     <asp:SqlDataSource ID="status_sqlDS" runat="server" ConnectionString="<%$ ConnectionStrings:Compudata_ProjectManagerConnection %>"
                        SelectCommand="GetAllStatus" SelectCommandType="StoredProcedure"></asp:SqlDataSource>
                  </td>
               </tr>
               <tr>
                  <td>
                     <label>
                        Priorty:</label><em>*</em>
                  </td>
                  <td>
                     <asp:DropDownList ID="ddl_priority" runat="server" AppendDataBoundItems="True">
                     </asp:DropDownList>
                     <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ControlToValidate="ddl_priority"
                        ErrorMessage="Select one" CssClass="Validator" InitialValue="-1">*</asp:RequiredFieldValidator>
                     <asp:SqlDataSource ID="priority_sqlDC" runat="server" ConnectionString="<%$ ConnectionStrings:Compudata_ProjectManagerConnection %>"
                        SelectCommand="GetAllPriority" SelectCommandType="StoredProcedure"></asp:SqlDataSource>
                  </td>
               </tr>
               <tr>
                  <td>
                     <label>
                        Estimate Time eg(1.50):</label>
                  </td>
                  <td>
                     <asp:TextBox ID="txtb_estTime" runat="server" Style="direction: ltr"></asp:TextBox>
                  </td>
               </tr>
               <tr>
                  <td>
                     <label>
                        Description:</label><em>*</em>
                  </td>
                  <td>
                     <asp:TextBox ID="txtb_Description" runat="server" TextMode="MultiLine"
                        Width="600px" Height="300px"></asp:TextBox>
                  </td>
               </tr>
               <tr>
                  <td>

                  </td>
               </tr>
               <tr>
                  <td colspan="2">
                                          <label>
                        Send Email:
                     </label>
                     <asp:CheckBox ID="ch_sendEmail" runat="server" Text="Send Email to assigned Tech"
                        Checked="True" />
                  </td>
               </tr>
                                 <tr>
                  <td>
                     <label>Start Date: </label>
                  </td>
                  <td>
                  <asp:TextBox ID="txtb_startDate" runat="server"></asp:TextBox> 
                  </td>
               </tr>
                  <tr>
                  <td>
                     <label>End Date: </label>
                  </td>
                  <td>
                  <asp:TextBox ID="txtb_endDate" runat="server" CssClass=".datetimepicker"></asp:TextBox> 
                  </td>
               </tr>
                      <tr>
                  <td>
                     <label>show on Calendar </label>
                  </td>
                  <td>
                  <asp:CheckBox ID="chb_calendar" runat="server" Text="show on Calendar"></asp:CheckBox> 
                  </td>
               </tr>
               <tr>
                  <td>
                     &nbsp;
                     <asp:Label ID="lblMessage" runat="server"></asp:Label>
                  </td>
                  <td>
                     <asp:Button ID="btn_createTask" runat="server" Text="Create Task" OnClick="createTask_Click" />
                     <asp:Button ID="Button2" runat="server" Text="Cancel" />
                  </td>
               </tr>

            </table>
            <br />
            <!-- begin of Web template option  -->
            <table class="style1">
   <tr>
      <td>
         <asp:LinkButton ID="lnkb_clientRMA" runat="server" 
            onclick="lnkb_clientRMA_Click" 
            >CLIENT RMA RETURN</asp:LinkButton> </td>

      <td>
         <asp:LinkButton ID="lnkb_LG_SERVICE" runat="server" 
            onclick="lnkb_LG_SERVICE_Click">LG SERVICE</asp:LinkButton>  </td>
      <td>
         <asp:LinkButton ID="lnkb_PHONE_REMOTESUPPORT" runat="server" 
            onclick="lnkb_PHONE_REMOTESUPPORT_Click">PHONE/REMOTE SUPPORT</asp:LinkButton> </td>
      <td>
         <asp:LinkButton ID="lnkb_SEAGATE_RMA_RETURN" runat="server" 
            onclick="lnkb_SEAGATE_RMA_RETURN_Click">SEAGATE RMA RETURN</asp:LinkButton>  </td>
      <td>
         <asp:LinkButton ID="lnkb_ON_SITE_SERVICE" runat="server" 
            onclick="lnkb_ON_SITE_SERVICE_Click"> ON-SITE SERVICE</asp:LinkButton></td>
      <td>
         <asp:LinkButton ID="lnkb_ZEISS_RMA_DIAGNOSTIC" runat="server" 
            onclick="lnkb_ZEISS_RMA_DIAGNOSTIC_Click">ZEISS RMA AND DIAGNOSTIC</asp:LinkButton> </td>
   </tr>
   <tr>
      <td>
         <asp:LinkButton ID="lnkb_LENOVO_SERVICE" runat="server" 
            onclick="lnkb_LENOVO_SERVICE_Click">LENOVO SERVICE</asp:LinkButton></td>
      <td>
         <asp:LinkButton ID="lnkb_MONTHLY_SERVICE" runat="server" 
            onclick="lnkb_MONTHLY_SERVICE_Click">MONTHLY SERVICE</asp:LinkButton> </td>
      <td>
         <asp:LinkButton ID="lnkb_Power_Supply_RMA" runat="server" 
            onclick="lnkb_Power_Supply_RMA_Click">Power Supply RMA</asp:LinkButton></td>
      <td>
         <asp:LinkButton ID="lnkb_IN_SHOP_SERVICE" runat="server" 
            onclick="lnkb_IN_SHOP_SERVICE_Click" >IN-SHOP SERVICE</asp:LinkButton></td>
      <td>
         <asp:LinkButton ID="lnkb_VENDOR_RMA_RETURN" runat="server" 
            onclick="lnkb_VENDOR_RMA_RETURN_Click">VENDOR RMA RETURN</asp:LinkButton></td>
      <td>
         &nbsp;</td>
   </tr>
</table>
            <!-- end  of Web template option  -->
         </asp:Panel>
         <!-- end of Content Create TaskForm -->
      </ContentTemplate>
      <Triggers>
         <asp:AsyncPostBackTrigger ControlID="ddl_projectsList" EventName="SelectedIndexChanged" />
      </Triggers>
   </asp:UpdatePanel>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:19:03.400

您可以将您的 web 表单放在 .aspx 页面中并使用此功能此行将创建 iframe 窗口

```
Scheduler.Lightbox.SetExternalLightboxForm("formName.aspx") 
```

# javascript - Javascript Unicode 转义反斜杠

> ID：14381486
> 
> 赞同：4
> 
> 时间：2013-01-17T14:40:24.380
> 
> 标签：javascript, regex, jsp, unicode, unicode-string

> **可能重复：**
> [如何使用转义的 unicode 解码字符串？](https://stackoverflow.com/questions/7885096/how-do-i-decode-a-string-with-escaped-unicode)

我有一个 javascript 变量，其中存储了一个 unicode 字符。

```
var value = "\\u53d3\\u5f13\\"; 
```

我将上述值动态添加到 div，因为未显示额外的反斜杠（\\u）正确的 unicode 值。但是，如果我将其更改为 \u 而不是 \\u 的单反斜杠。unicode 符号正确显示。

在我的环境中，我无法使用单反斜杠存储值。由于响应来自服务器端..

无论如何用单反斜杠替换双反斜杠以显示正确的unicode？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:59:56.697

这不再是关于反斜杠了，而是关于字符串字面上包含的内容。如果你只是替换了反斜杠，你最终会得到`"u53d3u5f13"`. 不过，您可以轻松地对它们进行转义（如果您不在乎任何 \uXXXX 将被替换）：

```
function unescapeUnicode( str ) {
    return str.replace( /\\u([a-fA-F0-9]{4})/g, function(g, m1) {
         return String.fromCharCode(parseInt(m1, 16));
    });
}

var value = "\\u53d3\\u5f13\\";
unescapeUnicode(value);
"叓弓\" 
```

# python - 格式化输出的缩短代码

> ID：14381488
> 
> 赞同：2
> 
> 时间：2013-01-17T14:40:33.587
> 
> 标签：python

我必须将一个二维数组（比如说数组[100][20]）写入一个文件。这只是我的代码的一个示例：

```
for i in range(0,99):
  print >> file, "%15.9e%24.15e%3d..." % (array[i][0], array[i][1], array[i][2], ... ) 
```

是否可以在“%”符号后用切片或类似符号缩短它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:42:21.133

你可以这样做：

```
print >> file, format_string % tuple(array[i]) 
```

也就是说，我认为我可能会`numpy`在这里使用非 ascii 格式保存数据以提高效率（无论是在执行 IO 和磁盘空间所花费的时间方面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:49:31.983

冒着被否决的风险，你确定你问的是正确的问题吗？我总是发现，如果某些东西很难看或很难，它可能不是最好的方法，尤其是在 Python 中。

您可以查看[csv 模块](http://docs.python.org/2/library/csv.html)--- 您到底想写什么格式？

还有[texttable](http://pypi.python.org/pypi/texttable)模块，它为您制作漂亮的表格，甚至会将它们转储到文本文件中。

最后，如果你愿意的话，还有[Python Excel Utilities](http://www.python-excel.org/)，它将把东西转储到 Excel 电子表格中。我已经在该模块中围绕 excel 读取和 excel 写入接口编写了一些包装器，如果您愿意，我将在此处发布它们——它们没有什么特别之处，但它们可能会为您节省一些时间。

# c# - 将 ILMerge 与 NuGet 一起使用

> ID：14381494
> 
> 赞同：1
> 
> 时间：2013-01-17T14:40:48.947
> 
> 标签：c#, visual-studio-2010, nuget, ilmerge

我们有一个 core.dll，它是一个单独的解决方案，这是在颠覆中。每当我们更新到 svn 时，bamboo 都会为我们创建一个 nupkg。问题是在我们使用核心的项目中，每次nuget将包更新为新的版本号时，csproj文件中的True消失了。有什么办法吗？

```
<ItemGroup>
<Reference Include="Core.Utilities, Version=1.3.0.50, Culture=neutral, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\packages\Core.1.3.0.50\lib\Core.Utilities.dll</HintPath>
  <ILMerge>True</ILMerge>
</Reference> 
```

当我们通过 nuget 更新到版本 51 时，ILMerge 标记将消失。

另一个问题是版本号根本没有更新的 .proj 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:01:26.677

NuGet relies on the the underlying VS layer to add references while installing a package. In this case a work around would be to re-add the ILMerge using the install.ps1 script of the package ( install.ps1 exposes the dte object using which you can access the project object and its references ...)

# macos - 在 kext 的 OSBundleLibraries 中链接哪个版本的库？

> ID：14381495
> 
> 赞同：1
> 
> 时间：2013-01-17T14:40:53.173
> 
> 标签：macos, kernel-extension

我`kextlibs`反对我的 kext，它告诉我使用：

```
com.apple.kpi.bsd = 12.2
com.apple.kpi.libkern = 12.2 
```

这在我的开发机器（10.8）上运行良好。但是当我在另一台机器（运行 10.7）上运行它时，它不会加载，说：

```
Dependency Resolution Failures: 
Only incompatible kexts found for these libraries: 
    com.apple.kpi.bsd
    com.apple.kpi.libkern 
```

如果我想针对一系列 Mac OS 版本（10.6 到 10.8），如何确定要链接的版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:51:28.113

KPI“捆绑包”（com.apple.kpi.*）由内核的 D​​arwin 版本号进行版本控制。

*   达尔文主要数字是 OSX 次要数字加 4 - 所以 OSX 10.8 是达尔文 12，10.7 是 11，10.6 是 10，等等（这至少是真的回到 OSX 10.4，我对 10.3 没有任何经验或更老）
*   Darwin 次要编号是 OSX 修订号 - 所以 OSX 10.8.2 是 Darwin 12.2，OSX 10.6.8 是 Darwin 10.8，OSX 10.7 是 Darwin 11.0 等等（OSX/macOS 修订偶尔会增加一个以上的 Darwin 次要版本，例如 macOS 10.14.1**是**Darwin **18.2.0**。）

IOKit 系列（例如 IOPCIFamily、IOStorageFamily 等）有自己的版本控制方案。处理这些问题的方法是查看您想要支持的最旧 OSX 版本的相关 kext（IOPCIFamily.kext、IOStorageFamily.kext 等）的 Info.plist 中的捆绑版本 (CFBundleVersion) 属性。或者，在运行该 OS 版本的同时运行 kextlibs - kextlibs 将始终打印正在运行的 OSX 版本的 kext/kpi 版本号。

# javascript - 水平滚动时，可操作的虚拟滚动会遮盖所有列

> ID：14381498
> 
> 赞同：2
> 
> 时间：2013-01-17T14:41:00.250
> 
> 标签：javascript, jquery, handsontable

请看一下[jsfiddle](http://jsfiddle.net/uF9JV/)

基本上在上面的代码中，我有一些只读的列，我正在使用渲染器更改背景颜色。但是当您水平滚动时，它会将背景应用于随机单元格。在小提琴中，如果您水平滚动，您可以看到效果。

代码如下

```
 $(document).ready(function () {
    $("#example1").handsontable({
      data: getCarData(),
      minSpareRows: 1,
      colHeaders: ["Car", "Year", "Chassis color", "Bumper color"],
      columns: [{
        data: "car",
        type: {
          renderer: myReadonlyRenderer
        },
        readOnly: true
      }, {
        data: "year"
      }, {
        data: "chassis"
      }, {
        data: "bumper"
      }]
    });
  });

}); 
```

# css - 如何使用引导程序制作类似推特的悬停“关注”按钮？

> ID：14381500
> 
> 赞同：2
> 
> 时间：2013-01-17T14:41:02.597
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

现在我有了一个按钮，我可以用它来关注用户，或者取消关注。
现在，当目标用户已经被关注时。它就像这样显示。

![取消关注](../Images/27bc5bf83b3b3f393249131dace0dddb.png)

那么目标用户没有被关注，就这样显示。

![跟随](../Images/798c9d767ce62a68179ff79be3d1f5db.png)

当目标用户已经被关注时，我希望它显示为“关注”。
然后，当我将鼠标光标移到按钮上时，显示应更改为“取消关注”。

我怎么能用引导程序做到这一点？

**看法**

```
<% if user_signed_in? %>
    <% unless user == current_user %>
      <% if current_user.following?(user) %>
        <%= link_to(unfollow_user_path(user), :remote => true, :class => 'btn') do %>
       <i class="icon-remove"></i>
       Un-Follow
     <% end %>
      <% else %>
        <%= link_to(follow_user_path(user) ,:remote => true, :class => 'btn btn-primary') do %>
        <i class="icon-ok icon-white"></i>
        Follow
        <%end%>
      <% end %>
    <% end %>
<% else %>
        <%= link_to(new_user_session_path , :class => 'btn btn-primary') do %>
        <i class="icon-ok icon-white"></i>
        Follow
        <%end%>
<% end %> 
```

**HTML**

```
<a href="/user/1/follow" class="btn btn-primary" data-remote="true">
    <i class="icon-ok icon-white"></i>
    Follow
</a>

<a href="/user/1/unfollow" class="btn btn-primary" data-remote="true">
    <i class="icon-remove icon-white"></i>
    Un-Follow
</a> 
```

更新：

```
<a href="/user/1/unfollow" class="btn" data-remote="true" onhover="someFunction()">
    <i id="Following" class="icon-remove"></i>
    Following
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:53:55.270

使用 onHover 事件您可以使用 jQuery 来更改要更改文本的按钮的“类”属性。

IE

```
<a href="/user/1/follow"  onHover="someFunction();" class="btn btn-primary" data-remote="true">
    <i id="Following" class="icon-ok icon-white"></i>
    Following
</a>

someFunction() {
  $('i#Following').attr("class", "icon-ok icon-white").innerText("Unfollow");
} 
```

希望你能得到这张照片。

编辑：这是在鼠标悬停时应该在 someFunction 中触发代码的完整代码。

```
<html>

<head>
<script type="text/javascript">

function someFunction()
{
 alert("Hello");
}
</script>
</head>

<body>
<a href="/user/1/unfollow" class="btn" data-remote="true" onmouseover="someFunction();return true;" >
    <i  id="Following" class="icon-remove"></i>
    Following
</a>
</body>

</html> 
```

# javascript - JavaScript 模块、闭包和作用域

> ID：14381501
> 
> 赞同：4
> 
> 时间：2013-01-17T14:41:03.157
> 
> 标签：javascript, module, scope, amd, commonjs

我正在使用以下闭包模式来模块化我的代码：

```
(function(root) {
  // MODULE CODE HERE

  if (typeof module !== 'undefined' && module.exports) { // CommonJS 
    /* var dependencies = require(...) */
    module.exports = myModule;
  } else if (typeof define !== 'undefined' && define.amd) { // AMD
    /* var dependencies...; */
    define([/* dependencies */], function(/* dependencies */) {
      /* Assign closure level vars to respective arguments */
      return myModule;
    });
  } else {
    // Dependencies??
    root.myModule = myModule;
  }
})(this); 
```

即，我们使用特征检测来支持 CommonJS 模块（例如 node.js）、AMD 或基本的全局命名空间实例化。

这在 node.js 中运行良好；~~我还没有测试 AMD 模式，因为我还在阅读它~~（参见编辑 2：AMD 表现出完全相同的效果）；但*如果*模块有任何依赖关系，它会在浏览器中失败。也就是说，如果`myModule`引用了在不同模块中定义的内容：例如，假设我有`super.js`并`child.js`具有相应的模块定义，如上所述，其中`super.js`创建一个名为`root.super`（`root === window`在浏览器中）的函数，如果`child.js`尝试这样做`super()`，我会得到类似的东西`super is not a function`。

这里发生了什么？

为了尝试修复它，我更改了元素的加载顺序`super.js`：`child.js`没有`<script>`运气。然后我尝试使用 jQuery 在文档准备好时强制`child.js`加载：

```
$(document).ready(function() {
  $.getScript('child.js', function() {
    // Do stuff with child, which calls super
  });
}); 
```

...再次，同样的问题。但是，在这两种情况下，如果我进入控制台，`super`它就可用并按我的预期定义。

为什么可能来自不同`super`的`child.js`（即，不是全局的）范围？

* * *

我应该补充一点，如果我删除 CommonJS 导出中的依赖注入位，它会在 node.js 中失败并出现相同的错误（如果有任何依赖项）。

* * *

**编辑**@Amberlamps 的回答解决了这个问题，但它没有回答为什么会发生这种情况的问题。我的模块模式现在是：

```
(function(root) {
  // MODULE CODE HERE

  if (typeof module !== 'undefined' && module.exports) { // CommonJS 
    /* var dependencies = require(...) */
    module.exports = myModule;
  } else if (typeof define !== 'undefined' && define.amd) { // AMD
    /* var dependencies...; */
    define([/* dependencies */], function(/* dependencies */) {
      /* Assign closure level vars to respective arguments */
      return myModule;
    });
  } else {
    if (root.hasOwnProperty(/* dependencies */)) {
      /* var dependencies = root... */
      root.myModule = myModule;
    }
  }
})(this); 
```

这使依赖项在不同环境中具有通用名称。但是，问题仍然存在：为什么全局对象在闭包的范围内不可用？

* * *

**编辑 2**我一直在尝试使用 RequireJS 和 AMD，并在上面更正了我的代码，以便 AMD 工作。在这种情况下也会发生完全相同的事情：您必须将全局对象显式分配给闭包内的变量，以便它在所述闭包中可用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:20:52.933

This pattern works just fine. If you actually tested it with a function called `super` and calling it via `super()`, you might ran into an error, because `super` is a [reserved word](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words). Following code works fine:

```
(function(root) {

    root.super = function() {

        console.log("hello");

    };

}) (window);

(function(root) {

    root.super();

}) (window); 
```

You can call your function using `window.super()`. `super()` however will result in an error.

# wcf - 用于构建代码和调用公共方法进行调试的 Visual Studios 工具？

> ID：14381502
> 
> 赞同：3
> 
> 时间：2013-01-17T14:41:04.823
> 
> 标签：wcf, visual-studio, debugging

使用 WCF 服务有一个方便的测试客户端工具，可让您构建服务并调用公共方法。这在调试过程中非常有用，因为您可以构建代码并通过它。我想知道是否有一个工具可以为非 WCF 项目做类似的事情？

在非 WCF 项目中工作以能够遍历您的代码时，我创建了一个一次性测试，该测试调用我想要调试的任何方法。这样就没有模拟了，因为我想对开发系统进行真正的调用。这不是创建单元测试的替代品，而只是一种跳转到特定公共方法和调试的方法。

另一种选择是创建一个调用我想要调试的方法的一次性应用程序。

这些选项有效，但不如[WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)方便，所以我的问题再次是是否有一些类似于 WCF 测试客户端的工具可以类似地用于非 WCF 项目？

# yii - Yii：在一个视图_view中，何添加一个相关的网格[可排序和可搜索]？

> ID：14381510
> 
> 赞同：0
> 
> 时间：2013-01-17T14:41:22.387
> 
> 标签：yii

我有客户 [1->N] 交付

在客户的 _view 中，我想要与我的客户相关的交付

这是在我的 ClientController

```
public function actionView($id)
{
    $client = $this->loadModel($id);

    $delivery_provider = new CActiveDataProvider(
      'Delivery',
      array (
          'criteria' => array ( 
              'condition' => 'client_id = :c_id',
              'params' => array (':c_id' => $client->id),
          ), // fine dei criteri
      ) // fine array di definizione cactiveprovider
    ); // fine del CActive provider

    $this->render('view',array(
        'model'=> $client,
        'delivery_provider' => $delivery_provider,
    ));
} 
```

然后 modules/admin/views/client/_view.php 我添加了我的 CGridView。...但是...它不可搜索且不可排序（但分页有效...）

如何进行 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:05:40.523

由于 Delivery 是一种模型，因此最好使用该模型`CActiveRecord::search()`。如果您使用过，此方法会自动为您生成`Gii`。

`$this->setAttributes($_GET['Delivery']);`对于搜索，您必须使用假设您的输入具有表单名称来捕获搜索表单/过滤器的结果`Delivery[attribute_name]`。

```
public function actionView($id){
    $client = $this->loadModel($id);

    $delivery = new Delivery('search');
    if(isset($_GET['Delivery']))
        $delivery->setAttributes($_GET['Delivery']);        
    $delivery->client_id=$id;

    $this->render('view',array(
        'model'=> $client,
        'delivery_provider' => $delivery->search(),
    ));
} 
```

# c++ - 如何在 C++ 中使用我的库？

> ID：14381515
> 
> 赞同：2
> 
> 时间：2013-01-17T14:41:46.213
> 
> 标签：c++, eclipse, include, shared-libraries, static-libraries

在 Eclipse 中，我创建了两个库。其中一个是共享的，另一个是静态的。我已经在 Eclipse 中编译了它们，因此创建了一个 Debug 文件夹（用于两个库），这些文件夹包含 make 文件以及目标文件 (*.o) 和依赖项引用文件 (*.d)。除此之外，静态库还包含一个 *.a 文件。

现在我创建一个新项目以及在这个项目中使用这些库的内容。通常，当我使用库时，我会键入`#include <libraryname>`. 但如果我使用`#include <mylibraryname>`它不起作用（我得到未解决的包含）。这并不奇怪，因为 Eclipse 应该以某种方式知道我的库所在的位置。所以，我的问题是如何通知 Eclipse 我的库的位置。

**已添加**按照建议，我执行以下顺序“项目 -> 属性 -> C/C++ 构建 -> 设置 -> 工具设置 -> GCC C++ 链接器 -> 库”。然后，在“库（-l）”文件中添加“StaticList”（因为我有“libStaticList.a”文件）并在“库搜索路径（-L）”文件中给出目录的全名，其中我的“libStaticList.a”位于。然后我点击应用和确定。但这无济于事。Eclipse 不喜欢`#include <StaticList>`。它抱怨：“未解决的包含......”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:48:28.833

`#include`ing headers 只会让编译器知道这些头文件中的函数存在。这些功能的实际*实现*需要由链接器链接。这就是您构建的库 ( `.a`) 文件的来源。查看[此线程](https://stackoverflow.com/questions/1351712/how-to-add-a-library-to-an-eclipse-project)以获取有关如何使用 Eclipse 链接您的库的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:17:23.487

我认为您需要#include“yourlibrary.cpp”（在双引号之间）而不是<>。

# lotus-notes - 同时 Lotus Notes 服务器端代理

> ID：14381518
> 
> 赞同：1
> 
> 时间：2013-01-17T14:41:53.333
> 
> 标签：lotus-notes, lotus-domino, background-agents

在我的 Lotus Notes 工作流应用程序中，我有一个预定的服务器代理（每五分钟一次）。当用户对文档进行操作时，也会触发服务器端代理（该代理修改所述文档，服务器端）。在生产过程中，我们收到很多投诉说加工不完整或有时根本没有加工。我检查了服务器配置，发现只有 4 个代理可以同时运行。作为一个拥有超过 50,000 个用户的全球应用程序，我唯一可以归咎于这些问题的是代理运行的数量，但我不确定我是否正确（我是一名开发人员，对这些东西缺乏了解） . 有人可以帮我找出我的推理是否正确（在同时代理上）并帮助我了解如何解决这个问题吗？你能给我提供参考吗？先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:22:35.347

重要的事情要记住。

## 服务器上的计划代理将在任何给定时间仅从同一数据库运行一个代理！

因此，如果您的数据库 A 带有代理 X（5 分钟）和 Y（10 分钟）。它将首先运行 X。一旦 X 完成，下一个计划（X 或 Y）将运行。如果它们在同一个数据库中，它将永远不会让您同时运行 X + Y。

这是旨在阻止数据库代理中可能出现的死锁的行为。

此外，您还有一个调度队列，该队列将对可以调度的代理数量进行限制。例如，如果您每 5 分钟有一次代理 X，但需要 10 分钟才能完成，您的计划队列将慢慢填满，然后用完空间。

那么如何解决这个问题呢？有几种方法。

**选项 1：使用服务器上的程序文档。**

将代理设置为计划的“从不”，并让程序文档使用命令执行代理。

```
tell amgr run "dir/database.nsf" 'agentName' 
```

**亲：**

1.  您将能够在不到 5 分钟的时间内运行代理。
2.  您可以在同一个数据库中运行多个代理。

**缺点：**

1.  您必须了解代理正在与什么进行交互，并为其编写代码以处理同时运行的其他代理或自身。
2.  这样做可能会对性能产生严重影响。您需要了解服务器中正在发生的事情以及它将如何影响它。
3.  如果您有很多数据库，那么您的程序文档列表就会很混乱并且难以维护。
4.  如果超过服务器上允许的代理执行时间，通过“Tell AMGR”的代理将不会被终止。他们必须被手动杀死。
5.  有一种简单的方法可以确定哪些代理正在运行/运行。

**选项 2：创建一个调用 Web 代理的代理。**

**亲：**

1.  您将能够在不到 5 分钟的时间内运行代理。
2.  您可以在同一个数据库中运行多个代理。
3.  您可以更好地控制通过另一个代理运行的内容。

**缺点：**

1.  您需要在服务器上运行 HTTP。
2.  这样做会影响性能，并且您需要再次了解如果运行多个实例或其他代理，它将如何与系统交互。
3.  如果超过服务器上允许的代理执行时间，代理将不会被终止。
4.  您将需要在服务器上允许并发 Web 代理/Web 服务，否则您可能会挂起服务器。

**选项 3：从预定触发器更改为另一个触发器。**

例如“当新邮件到达时”。总的来说，这是三者中更好的选择。

...

最后，我想说的是，如果可以的话，您应该很少使用“每 5 分钟执行一次”，除非它是一个不会由多个用户跨不同数据库执行的关键代理。

# ruby-on-rails - 输出（显示）从更大的文本列表中随机选择的一段文本 - Ruby On Rails

> ID：14381525
> 
> 赞同：0
> 
> 时间：2013-01-17T14:42:11.783
> 
> 标签：ruby-on-rails, list, html, text, output

我想从保存为 .txt 文件的较大文本列表中输出几行文本，并且我希望它在刷新或只是到达网页时随机输出到选定的 div 中。你们中的任何一个“大师”都对如何做类似或类似的事情有一些想法。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:49:12.720

你可以使用[`readlines`](http://www.ruby-doc.org/docs/ProgrammingRuby/html/ref_c_io.html#IO.readlines)IO的方法：

```
array_of_each_lines = IO.readlines('filename.txt')
random_line = rand(array_of_each_lines.size)
my_random_line_as_string = array_of_each_lines[random_line] 
```

# android - Android with Eclipse：另一个“应用程序已意外停止，请重试”

> ID：14381527
> 
> 赞同：1
> 
> 时间：2013-01-17T14:42:12.737
> 
> 标签：android, eclipse

我在 Eclipse 上使用虚拟 android 设备当我写：

```
 @Override
    protected void onCreate(Bundle savedInstanceState)  {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
            Button but = (Button)findViewById(R.id.button1);
            but.setOnClickListener(this);
} 
```

它有效，我想要出现的内容出现在设备上，但是当我添加

```
EditText taille = (EditText)findViewById(R.id.taille); 
```

在 onCreate 函数中，我收到“应用程序意外停止，请重试”，我经常收到这些消息，并且我知道它来自哪里，因为 logcat 上没有写任何内容，并且控制台没有错误。

# android - 如何在到期日按钮上设置警报？

> ID：14381537
> 
> 赞同：1
> 
> 时间：2013-01-17T14:42:52.827
> 
> 标签：android, android-notifications, android-alarms

我正在尝试构建记事本，我已经完成了所有工作。只是我想在日期选择器按钮上发出警报。我使用了日期选择器按钮。因此，希望在到期日设置警报，并且我们会弹出通知。请建议我需要从哪里开始。谢谢

```
 duedate = (Button)findViewById(R.id.duedate);

    duedatetext = (TextView)findViewById(R.id.duedatetext);

            case R.id.duedate:

            final Calendar duedate = Calendar.getInstance();
            year = duedate.get(Calendar.YEAR);
            month = duedate.get(Calendar.MONTH);
            day = duedate.get(Calendar.DAY_OF_MONTH);

            showDialog(DIALOG_DUE_DATE_ID); 
```

我也在列表项单击布局中设置了列表视图中的日期文本。所以请帮我这样做。谢谢。

# shell - 检查目录中是否存在多个文件

> ID：14381544
> 
> 赞同：0
> 
> 时间：2013-01-17T14:43:10.357
> 
> 标签：shell, unix

我是 UNIX 新手，请帮忙。

我有一个文件有很多行，每一行都是一个文件名。

现在我想检查每个文件是否存在于另一个带有一些前缀的目录中。

例如，我的文本文件内容是

```
abc.def.ghi.jkl
mno.pqr.stu.vwx 
```

我想测试每个文件是否存在于目录中，例如

```
cd <search directory>
ls -ltr *abc.def.ghi.jkl* 
```

如果上述结果为假，则抛出错误。

注意：文件内容是动态的，我正在通过另一个脚本生成这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:46:04.667

假设你的文件是

```
$ cat myList
abc.def.ghi.jkl
mno.pqr.stu.vwx 
```

一个快速的解决方案是

```
 cat myList | xargs ls -ltr 
```

如果找不到文件，则输出`ls`将向标准输出抱怨

```
ls: xxx: No such file or directory 
```

IHTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T07:29:11.557

这是预期的答案

```
`ls -l > temp.cat
for i in $(cat temp.txt)
do
        ls -l *$i*
        if [[ $? -eq 0 ]]
        then
        echo " File found"
        else
         echo " File not found for $i"
        fi
done
rm -f temp.txt` 
```

`

# c# - Windows phone 室内增强现实

> ID：14381547
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:43:35.837
> 
> 标签：c#, windows-phone-7, augmented-reality, indoor-positioning-system

我需要为在建筑物内使用增强现实的 windows phone 制作应用程序。它只适用于一栋建筑。谁能告诉我这是否可能，因为在室内，GPS 无法工作。我正在考虑做一个矩阵，如果我手动放置所有部门和兴趣点等等（我需要应用 dijstrka 或 A*，所以无论如何都需要矩阵）。但是我如何在 Windows Phone 中导航和使用带有该矩阵的 AR？是否可以？如果是这样，任何人都可以提供一些教程或示例吗？或者一些线索可以让我朝着正确的方向前进。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:24:00.453

我已经为 WP 编写了很多 AR 应用程序。这样做有一个主要问题：要在如此小的范围内进行 AR，像建筑物这样的小区域内的兴趣点需要非常高的精度才能使位置和方向有用。正如您所说，您的 GPS 并没有真正在内部工作，即使它在那个规模上工作，您至少需要精确到 ~1 英尺。其次，您需要非常准确的角度精度，但手机中的运动传感器即使在外部环境中也不是那么准确。建筑物内部的情况变得更糟，因为建筑物中的金属可以显着抵消指南针（我经常看到内部误差> 90°）。因此，除非您找到可以在内部以该精度工作的外部位置和方向传感器，否则我会说不可能制造出任何真正有用的东西。

[我在我的博客http://www.sharpgis.net/post/2011/12/07/Building-an-Augmented-Reality-XAML-control.aspx](http://www.sharpgis.net/post/2011/12/07/Building-an-Augmented-Reality-XAML-control.aspx)上确实有一篇文章如何至少在 Windows 手机上进行 AR 渲染但我也不希望在你的情况下会有这么好的结果。

# java - 如何同时提供两个接口（一个“公共”和“扩展”一个）？

> ID：14381548
> 
> 赞同：1
> 
> 时间：2013-01-17T14:43:38.203
> 
> 标签：java, oop

我有块使用函数执行计算`step()`。这些块可以通过 相互连接`connect(Block)`。

```
interface Block {
    void connect(Block b);
    void step();
} 
```

然而，从一个具体的块实现（例如 in `step`）中，应该可以`read`从连接的块中：

```
class ABlockImpl implements Block {
    private Block src; // link to the block this block is connected to
    public void connect(Block b) {
        src = b;
    }

    public void step() {
        double x = src.read(); // XXX src is of type Block and there is no read() in Block
        /* ... */
    }

    public double read() {
        return 3.14;
    }
} 
```

由于没有`read()`in `Block`，因此无法编译。对于客户来说，“公共”块接口就足够了，我`read`只需要在内部。我可以添加`read`到 Block 界面，但对我来说这感觉不对。

由于 Block 有多种不同的实现，我不能`src`在`ABlockImpl`调用`read`.

有没有另一种“隐藏”的方法`read`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:47:14.577

你可以有一个公共接口和一个包本地接口

```
public interface MyPublicInterface {

}

interface MyDirectInterface extends MyPublicInterface {

}

class MyImpl implements MyDirectInterface {

    public void add(MyPublicInterface mpi) {
         MyDirectInterface mdi = (MyDirectInterface) mpi;
         // use mdi
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:46:43.130

您可以在块的具体实现之间创建`abstract`层`interface`并将其命名，例如，`BlockAdapter`.

IE：

```
interface Block {
    void connect(Block b);
    void step();
    double read();
} 
```

...

```
public abstract class BlockAdapter implements Block { 
    double read() {
          return -1; // ? something like that
    }
} 
```

...

```
public class ABlockImpl extends BlockAdapter { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:16:45.500

我不认为有一个解决方案可以为您提供您想要的东西，但可能是接近它的东西：

```
interface Block {
    void connect(Block b);
    void step();
} 
```

```
interface ReadableBlock extends Block {
    double read();
} 
```

方法`read()`仍然需要公开，但是可以让外部代码只通过`Block`接口引用实现，而实现本身来自`ReadableBlock`

```
public cass ABlockImpl implements ReadableBlock {
    ....
} 
```

```
Block b = new ABlockImpl(); 
```

# c# - 如何在 Lucene.Net 中查询最大字段值？

> ID：14381554
> 
> 赞同：0
> 
> 时间：2013-01-17T14:43:54.800
> 
> 标签：c#, .net, lucene.net

我们希望能够返回具有特定字段最大值的单个文档。一个典型的例子是，

```
max(date_time_field:*) 
```

它返回索引中的最新文档。

Lucene.Net 中是否有类似的支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:09:51.087

我不确定您是如何查询索引的，但您当然可以按相关字段排序，然后只需获取顶部文档：

```
var sortBy = new Sort(new SortField("date_time_field", SortField.DOUBLE, true));
var hits = ... IndexSearcher.Search(query, null, 1, sortBy));

...

var doc = searcher.IndexSearcher.Doc(hits.ScoreDocs[0]); 
```

# wordpress - 针对特定设备的 CSS3 媒体查询

> ID：14381556
> 
> 赞同：1
> 
> 时间：2013-01-17T14:44:02.447
> 
> 标签：wordpress, css, responsive-design, media-queries

我的 wordpress 主题带有基本的 CCS，现在我想让这个设计响应下面提到的大多数使用的设备布局。我想以横向和纵向模式定位所有苹果设备：-

```
blackberry(320x240),
iphone3 (320x480),
iphone4 (640x960),
iphone5 (640x1136),
ipad    (1024x768),
large desktop screen above 1280. 
```

如何使用 CSS3 媒体查询来编写我的 CSS 样式表来定位响应式设备？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:55:30.160

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/) 这里只是一个开始。您可以在该博客上阅读更多关于媒体查询和其他有共鸣的设计内容。

这是一个css代码示例：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

# linux - 从文件中从 shell 脚本中的一行中提取子字符串

> ID：14381557
> 
> 赞同：0
> 
> 时间：2013-01-17T14:44:10.020
> 
> 标签：linux, shell, grep, substring

我需要帮助才能从文件中获取子字符串。我有两个变量，IP 源地址和 IP 目标地址。我需要验证文件中包含两个 IP 的行并获取源地址的端口。

这是输入文件：

```
15:29:18.164566 IP (tos 0x0, ttl 1, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.155.58363 > 239.255.255.254.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
15:29:18.164566 IP (tos 0x0, ttl 128, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.131.58363 > 239.255.255.250.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
 15:29:18.164566 IP (tos 0x0, ttl 1, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.155.58363 > 239.255.255.254.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
15:29:18.164566 IP (tos 0x0, ttl 128, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.131.58363 > 239.255.255.250.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
   0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
15:29:18.164566 IP (tos 0x0, ttl 128, id 2394, offset 0, flags [none], proto UDP (17), length 125)
    10.0.0.155.80 > 239.255.255.250.1900: UDP, length 97
    0x0000:  4600 0024 0000 0000 0102 3ad3 0a00 0000  F..$......:.....
    0x0010:  e000 0001 9404 0000 1101 ebfe 0000 0000  ................
    0x0020:  0300 0000 0000 0000 0000 0000 0000       ..............
   0x0020:  0300 0000 0000 0000 0000 0000 0000       .............. 
```

两个变量：

```
ips=10.0.0.155

ipd=239.255.255.254 
```

输出结果必须是：

```
58363 
```

这是 IP 源地址的端口`10.0.0.155.58363`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:04:09.970

使用[环视](http://www.regular-expressions.info/lookaround.html)`grep`：_

```
$ ips=10.0.0.155

$ ipd=239.255.255.254

$ grep -Po "(?<=$ips\.)\d+(?= > $ipd)" file
58363
58363 
```

文件有重复的行，所以管道到`uniq`：

```
$ grep -Po "(?<=$ips\.)\d+(?= > $ipd)" file | uniq
58363 
```

* * *

或使用捕获组`sed`：

```
$ sed -n '/'"$ipd"'/s/.*'"$ips"'\.\([0-9]\+\).*/\1/p' file
58363
58363

$ sed -n '/'"$ipd"'/s/.*'"$ips"'\.\([0-9]\+\).*/\1/p' file | uniq
58363 
```

* * *

或在`awk`：

```
$ awk -v s=$ips -v d=$ipd '$1~s && $3~d {sub(/.*\./,"",$1);print $1}' file
58363
58363

$ awk -v s=$ips -v d=$ipd '$1~s&&$3~d&&!u[$0]++{sub(/.*\./,"",$1);print $1}' file
58363 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:05:28.523

希望对您有所帮助。您可以用您的变量替换 IP。

```
[spatel@mg0008 ~]$ grep 10.0.0.155.58363 /tmp/outputfile.txt
    10.0.0.155.58363 > 239.255.255.254.1900: UDP, length 97
    10.0.0.155.58363 > 239.255.255.254.1900: UDP, length 97 
```

更多修剪...

```
[spatel@mg0008 tmp]$ grep 10.0.0.155.58363 /tmp/outputfile.txt | awk -F'.' '{print $5}' | awk '{print $1}'
58363
58363 
```

# c# - DataAnnotations 命名空间中的枚举值是否有开箱即用的验证器？

> ID：14381564
> 
> 赞同：19
> 
> 时间：2013-01-17T14:44:30.037
> 
> 标签：c#, enums, data-annotations

C# 枚举值不仅限于其定义中列出的值，还可以存储其基类型的任何值。如果未定义基本类型，则使用`Int32`或仅`int`使用。

我正在开发一个 WCF 服务，它需要确信某些枚举具有分配的值，而不是所有枚举的默认值 0。我从一个单元测试开始，以确定是否`[Required]`会在这里做正确的工作。

```
using System.ComponentModel.DataAnnotations;
using Xunit;

public enum MyEnum
{
    // I always start from 1 in order to distinct first value from the default value
    First = 1,
    Second,
}

public class Entity
{
    [Required]
    public MyEnum EnumValue { get; set; }
}

public class EntityValidationTests
{
    [Fact]
    public void TestValidEnumValue()
    {
        Entity entity = new Entity { EnumValue = MyEnum.First };

        Validator.ValidateObject(entity, new ValidationContext(entity, null, null));
    }

    [Fact]
    public void TestInvalidEnumValue()
    {
        Entity entity = new Entity { EnumValue = (MyEnum)(-126) };
        // -126 is stored in the entity.EnumValue property

        Assert.Throws<ValidationException>(() =>
            Validator.ValidateObject(entity, new ValidationContext(entity, null, null)));
    }
} 
```

它没有，第二个测试没有抛出任何异常。

我的问题是：是否有验证器属性来检查提供的值是否在`Enum.GetValues`？

**更新**。确保使用`ValidateObject(Object, ValidationContext, Boolean)`最后一个参数等于`True`而不是`ValidateObject(Object, ValidationContext)`在我的单元测试中使用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-17T15:03:19.373

.NET4+ 中有[EnumDataType](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.enumdatatypeattribute%28v=vs.100%29.aspx) ...

`validateAllProperties=true`确保在调用中设置了第三个参数`ValidateObject`

所以从你的例子中：

```
public class Entity
{
    [EnumDataType(typeof(MyEnum))]
    public MyEnum EnumValue { get; set; }
}

[Fact]
public void TestInvalidEnumValue()
{
    Entity entity = new Entity { EnumValue = (MyEnum)(-126) };
    // -126 is stored in the entity.EnumValue property

    Assert.Throws<ValidationException>(() =>
        Validator.ValidateObject(entity, new ValidationContext(entity, null, null), true));
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-17T14:47:00.050

您正在寻找的是：

```
 Enum.IsDefined(typeof(MyEnum), entity.EnumValue) 
```

**[更新+1]**

进行大量验证的开箱即用验证器称为 EnumDataType。确保将 validateAllProperties=true 设置为 ValidateObject，否则测试将失败。

如果您只想检查枚举是否已定义，则可以使用带有上述行的自定义验证器：

```
 [AttributeUsage(AttributeTargets.Parameter | AttributeTargets.Field | AttributeTargets.Property | AttributeTargets.Method, AllowMultiple = false)]
    public sealed class EnumValidateExistsAttribute : DataTypeAttribute
    {
        public EnumValidateExistsAttribute(Type enumType)
            : base("Enumeration")
        {
            this.EnumType = enumType;
        }

        public override bool IsValid(object value)
        {
            if (this.EnumType == null)
            {
                throw new InvalidOperationException("Type cannot be null");
            }
            if (!this.EnumType.IsEnum)
            {
                throw new InvalidOperationException("Type must be an enum");
            }
            if (!Enum.IsDefined(EnumType, value))
            {
                return false;
            }
            return true;
        }

        public Type EnumType
        {
            get;
            set;
        }
    } 
```

...但我想它不是开箱即用的，是吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-23T08:35:11.967

我只是根据这个网站[https://kristinaalberto.com/making-enum-parameters-required-in-asp-net-core-mvc/解决了我的需求](https://kristinaalberto.com/making-enum-parameters-required-in-asp-net-core-mvc/)

```
 public enum CreatedBySelfOrOthersEnumValues
    {
        Self,
        Others
    }

    public class CampaignRegisterValidationModel
    {
        [Required]
        public string Name { get; set; }

        [Required]
        public CreatedBySelfOrOthersEnumValues CreatedForSelfOrOthers { get; set; }

        [Required]
        public int CountryCode { get; set; }

        public string Phone { get; set; }
        public string Email { get; set; }
    } 
```

然后验证

```
 if (ModelState.IsValid)
     {
     } 
```

# ruby - 关于单元测试 rspec 的建议

> ID：14381567
> 
> 赞同：0
> 
> 时间：2013-01-17T14:44:36.383
> 
> 标签：ruby, rspec

您将如何使用 rspec 测试此方法？

```
def schema
  @schema ||= Schema.new(owner, schedules, hour_interval)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:54:07.900

如果想问“你尝试过什么测试”，但无论如何这是我的答案：如果你在 rspec 中进行单元测试，并且你将方法定义为你的单元，我建议像这样测试它：

```
describe "schema" do
  let(:owner) { mock('owner') }
  let(:schedules) { mock('schedules') }
  let(:hour_interval) { mock('hour_interval') }
  let(:schema) { mock('schema') }
  before(:each) do
    subject.stub! :owner => owner, :schedules => schedules, :hour_interval => hour_interval
  end
  context "unmemoized" do
    it "should instantiate a new schema" do
      Schema.should_receive(:new).with(owner, schedules, hour_interval).and_return schema
      subject.schema.should == schema
    end
  end
  context "memoized" do
    it "should use the instantiated and memoized schema" do
      Schema.should_receive(:new).with(owner, schedules, hour_interval).once.and_return schema
      2.times do
        subject.schema.should == schema
      end
    end
  end
end 
```

像这样，您单独测试该单元及其所有功能。

有关详细信息的说明，请查看[RSpec 文档](http://rspec.info/) 和/或[最佳 RSpec 实践](http://betterspecs.org/)

# seo - XML 站点地图最多可以有 50.000 个 URL。说我有 1 有 2 的。还剩多少？49.999 还是 49.997？

> ID：14381569
> 
> 赞同：3
> 
> 时间：2013-01-17T14:44:44.957
> 
> 标签：seo, xml-sitemap

我有一个非常简单的问题。一个 XML 站点地图最多可以有 50.000 个 URL。假设我有 1 个 < url> 和 2 个 < image:image>。还剩多少？49.999 还是 49.997？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:47:57.293

我们怎么能不看 XML 来判断呢？可能两者兼而有之。取决于 50,000 是否指代父节点，这很可能是，这意味着您还剩下 49,999。但话虽如此，谁知道呢。

编辑...我刚刚意识到也许你在谈论谷歌站点地图。您可以有 50,000 个父节点，内部节点不计算在内。

# php - php网站在exe中运行

> ID：14381571
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:44:52.467
> 
> 标签：php, html, compiler-construction, exe

我已经使用 php、jquery 和 mysql 建立了一个网站。它现在在服务器上运行

我见过一个情侣网站将本地 php 页面转换为 exe 文件。但我正在寻找一个允许我在 exe 中运行我的网站的程序是否可以在 Exe 中的 A 服务器上运行网站。

我正在考虑使用一个，`hta`但它与 Internet Explorer 不太兼容。它改变了网站上元素的外观和位置。

原因是因为我不希望人们查看我网站的来源以及其他一些原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:47:46.867

NuSphere 有一款产品可以满足您的需求。它被称为 PhpDock。我已经使用过它，它的性能与宣传的一样。它带有内置的 Web 服务器，因此您只需将 .exe 分发给用户，然后他们就可以将您的 Web 应用程序作为本机应用程序运行。

[NuSphere PhpDock 产品页面](http://www.nusphere.com/products/phpdock.htm)

# html - 在 Chrome 中使用选中的复选框不起作用

> ID：14381572
> 
> 赞同：1
> 
> 时间：2013-01-17T14:44:55.703
> 
> 标签：html, checkbox

我的页面上有一些复选框。如果我把它写成选中的，它可以在 FF 上工作，但不能在 Chrome 上工作。我试过了`checked=true`，`checked=checked`很`checked`简单。

这是我的复选框之一：

```
<input id="downloadscatids_1" class="input_radio" type="checkbox" checked="true" name="downloadscatids_1" onclick="set_downloadscatids();"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:03:34.123

好的，解决了！

如果您在表格中有（错误输入）表格，则无论您使用什么方法，它都无法在 Chrome 中工作！

# spring - 部署 bean 上的 Jboss 错误

> ID：14381579
> 
> 赞同：0
> 
> 时间：2013-01-17T14:45:16.920
> 
> 标签：spring, jboss, ejb-3.1

我正在尝试在 Jboss 中部署一个使用 @Interceptros 注释的 bean。根据文档，我创建了 beanRefContext.xml，这是 Bean 代码

```
@Stateless
@LocalBean
@Interceptors(SpringBeanAutowiringInterceptor.class)
public class ClienteBean implements ClienteBeanLocal {

public ClienteBean() {
    // TODO Auto-generated constructor stub
}

@Autowired
private IClienteDAO cliente;

@Override
public List<ClienteDTO> selectALL() throws Exception {
    return cliente.selectALL();
} 
```

}

我将它部署在 EAR 中。当我尝试在 Jboss 6 中部署时，出现以下错误：

```
Caused by: java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
    at sun.reflect.annotation.AnnotationParser.parseClassArray(Unknown Source) [:1.7.0_09]
    at sun.reflect.annotation.AnnotationParser.parseArray(Unknown Source) [:1.7.0_09]
    at sun.reflect.annotation.AnnotationParser.parseMemberValue(Unknown Source) [:1.7.0_09]
    at sun.reflect.annotation.AnnotationParser.parseAnnotation(Unknown Source) [:1.7.0_09]
    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(Unknown Source) [:1.7.0_09]
    at sun.reflect.annotation.AnnotationParser.parseAnnotations(Unknown Source) [:1.7.0_09]
    at java.lang.Class.initAnnotationsIfNecessary(Unknown Source) [:1.7.0_09]
    at java.lang.Class.getAnnotations(Unknown Source) [:1.7.0_09]
    at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl.readAnnotations(IntrospectionTypeInfoFactoryImpl.java:610) [jboss-reflect.jar:2.2.0.GA]
    at org.jboss.reflect.plugins.introspection.IntrospectionTypeInfoFactoryImpl.getAnnotations(IntrospectionTypeInfoFactoryImpl.java:126) [jboss-reflect.jar:2.2.0.GA]
    at org.jboss.reflect.plugins.InheritableAnnotationHolder.getDeclaredAnnotations(InheritableAnnotationHolder.java:96) [jboss-reflect.jar:2.2.0.GA]
    at org.jboss.reflect.plugins.ClassInfoImpl.getAnnotations(ClassInfoImpl.java:181) [jboss-reflect.jar:2.2.0.GA]
    at org.jboss.reflect.plugins.AbstractAnnotatedInfo.getUnderlyingAnnotations(AbstractAnnotatedInfo.java:63) [jboss-reflect.jar:2.2.0.GA]
    at org.jboss.scanning.plugins.visitor.ClassHierarchyResourceVisitor.handleClass(ClassHierarchyResourceVisitor.java:76) [:1.0.0.GA]
    at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.doVisit(ReflectResourceVisitor.java:108) [:1.0.0.GA]
    at org.jboss.scanning.plugins.visitor.ReflectResourceVisitor.visit(ReflectResourceVisitor.java:86) [:1.0.0.GA]
    ... 53 more 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:43:11.267

似乎 JBoss 没有看到 SpringBeanAutowiringInterceptor.class。在您的 EAR 文件中，将您的 spring jar 放在 lib 目录中。看看这是否有效。

如果您使用 maven 来组装您的 EAR 文件，您可以执行以下操作： [http ://maven.apache.org/plugins/maven-ear-plugin/examples/customizing-module-location.html](http://maven.apache.org/plugins/maven-ear-plugin/examples/customizing-module-location.html)

# iphone - 关闭模态视图控制器

> ID：14381585
> 
> 赞同：0
> 
> 时间：2013-01-17T14:45:34.423
> 
> 标签：iphone, ios, objective-c, modalviewcontroller

问题：当关闭模态视图控制器时，呈现视图控制器上的标题向上移动（看起来大约 20 像素）。

重新创建的步骤：创建一个标签栏控制器（T），在里面创建一个导航控制器（N）一个根视图控制器（A）。

使用委托设置另一个视图控制器（B）（这是要以模态方式呈现的视图控制器），以便我们可以通知呈现视图控制器（A）何时应该关闭模态（B）。

在导航控制器的根视图控制器（A）中，通过使用其故事板 id 从故事板实例化它来创建（B）的实例，然后使用 [self.tabBarController presentViewController:(B) animated:YES complition:nil] 呈现 (B) ;.

在 (B) 上有一个按钮，按下该按钮会触发委托功能，通过使用 [self.tabBarControllerdismissViewControllerAnimated:YES complition:nil] 通知 (A) 解除 (B)；

到目前为止，一切都按预期工作。但是，一旦模态视图控制器 (B) 被解除。(A) 上的导航标题向上移动了大约 20 像素。

我无法弄清楚为什么当模式被解除时导航标题会向上移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:28:12.770

在呈现的 viewController 中添加以下代码到

`-(void)viewDidAppear:(BOOL)animated`方法：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone]; 
```

# php - 如何编辑和插入动态创建的表单文本框值到 MySQL DB？

> ID：14381586
> 
> 赞同：0
> 
> 时间：2013-01-17T14:45:37.030
> 
> 标签：php, javascript, mysql, submit

我在我的 PHP 项目中的 MySQL DB 中有一堆功能表。我正在通过 php 获取并使用以下代码创建一个表格，其中包含由列名和照片表中记录的 id 命名的文本框：

`functions.php`代码：

```
function m_html_editPhotos($id) {
$result = "<table class=\"tabelka\" id=\"tbl_photos\"><thead><tr><th>Miniaturka</th><th>Duże zdjęcie</th></tr></thead><tbody>";
$mysqli = m_db_Init();
$qry = "SELECT ID, Img_Min, Img_Nrm FROM tbl_Zdjecie WHERE ID_Grzyb = ?";
if($stmt = $mysqli -> prepare($qry)) {
          $stmt -> bind_param("i", $id);
          mysqli_stmt_bind_result($stmt, $img_id, $img_min, $img_nrm);
          $stmt->execute();
          $i =0;
          while (mysqli_stmt_fetch($stmt)) {
              $i = $i+1;
              $result .= "<tr><td><!--<label>Link do miniaturki:<label>--><input type=\"text\" class=\"required\" name=\"photo[$i][min]\" value=$img_min></td><td><!--<label>Link do zdjęcia pełnego rozmiaru:</label>--><input type=\"text\" class=\"required\" name=\"photo[$i][nrm]\" value=$img_nrm></td><td style=\"display:none;\"><input type=\"text\" name=\"photo[$i][id]\" value=$img_id /></td></tr>";
          }
          $stmt -> close();      
}
mysqli_close($mysqli);
$result .= "</tbody></table><div class=\"link\" onclick=\"AddPhotoEditRow();\">Dodaj kolejne zdjęcie</div>";
return $result;
} 
```

现在我想要编辑照片表，遍历生成的每一行如上表，并带有 thumbnail_url ( `img_min`) 和全尺寸链接 ( `img_nrm`) 的文本框此外，我想通过函数从动态创建的行中将新的添加到表中AddPhotoEditRow();

`functions.js`代码：

```
function AddPhotoEditRow(){
 $('#tbl_photos > tbody:last').append('<tr><td><input type="text" name="photo[0][min]"></td><td><input type="text" name="photo[0][nrm]"></td><td style=\"display:none;\"><input type=\"text\" name=\"photo[0][id]\" value=\"0\" /></td></tr>');
} 
```

`edit.php`代码：

```
include 'functions.php';
if(isset($_POST["change"])) m_db_updateAllFeatures($_GET["id"]);
if (m_db_isAdmin("")){
if (!isset($_GET["id"]) || !is_numeric($_GET["id"]))
    header("Location: ../index.php");
else {
if (isset($_POST["Nazwa_PL"]))
    m_db_UpdateName("PL", $_GET["id"],$_POST["Nazwa_PL"]);
if (isset($_POST["Nazwa_Lac"]))
    m_db_UpdateName("Lac", $_GET["id"],$_POST["Nazwa_Lac"]);
render_edit_body();
    }
} 
```

我想以某种方式遍历照片链接并通过解析通过 $_POST 传递的文本框名称来更新现有记录，另外插入新的照片链接（id = 0）也很好。我将新行的 id 设置为 0，因为我需要区分是插入表还是更新，对吗？我假设`0`应该添加所有索引字段，其余的应该插入。我的想法可能是错误的，如果有更好的方法可以对该表“控件”执行全部功能，那么我非常愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:39:10.177

如果您使用`0`所有新创建的 HTML 元素，PHP`$_POST`将只包含**最后**一项的信息。

这是我的解决方案，使用与您相同的方法并进行了一些修改，假设我们有一个`form`wrap outside out 循环并且一个名为的数组`$data`包含播种信息：

创建表的 PHP 代码

```
// the $data array contains a list of picture object, these object will be updated later.
foreach($data as $num => $row)
{
    echo "<tr>\n";
    echo sprintf("<td><input type='text' name='name[%d]' value='%s' /></td>\n", $num, $row['name']);
    echo "</tr>\n";
}
echo "<tr><td>\n";
echo "<a id='add-item'>Add new item</a>\n";
echo "<input type="hidden" name='num-created' value='0' />";
echo "</td></tr>\n" 
```

添加新元素的 JavaScript 代码（使用 jQuery）

```
$(document).ready(function(){
    $('#add-item').click(function(){
        var currentCreatedNum = $("input[name=num-created]").val() * 1;
        var html = "<tr>";
        html += "<td><input type='text' name='newname["+ (currentCreatedNum + 1) +"]' value='' /></td>";
        html += "</tr>";            
        $("input[name=num-created]").val(currentCreatedNum + 1);
    });
}); 
```

用于操作 POST 请求的 PHP 代码

```
# check contrains ...

# update old records
foreach($_POST['name'] as $id => $name)
{
    // get information of existing item and update this record

}

# create new record
foreach($_POST['newname'] as $order => $name)
{
    // get information of new item and create a new record

} 
```

如您所见，`name`手动创建的元素的属性必须与现有元素不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:52:09.673

你已经掌握了基础知识，除了

```
$('#tbl_photo snip snip name="photo[0][min]"> snip snip snip
                                    ^--- 
```

不`0`应该是硬编码的。您告诉 php 在 $_POST 数组中创建一个“照片”值数组，但随后您将所有条目的索引键强制为 0，从而导致后面的条目覆盖较早的条目。

在Javascript中记录您插入的这些字段的数量，并使用该计数来增加索引键，例如

```
$('#tbl_photo snip snip name="photo[' + i + '][min]"> snip snip snip 
```

相反，`i`字段计数在哪里。那么这是一个简单的问题：

```
foreach($_POST['photo'] as $i => $photo) {
    echo $photo['min'];
} 
```

获取每个照片字段的最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:02:47.603

如果我理解，您是否想要访问每个动态创建的表项？您可以通过简单地创建一个动态数组来做到这一点。在生成每个新的 TD 元素（或任何元素）时，将名称设为类似`name=Something[]`（带空括号）。这将自动将生成的每个项目分配为名为“Something”的数组的成员。当然，您也可以通过计数器生成键值。

这是我所做的一个项目的简化示例，其中“更新”按钮（此处未显示）回发到同一页面：

```
echo "<td class='grid'>
<input type='checkbox' name='chkDel[]' />
</td>"; 
```

那么 PHP 将如下所示：

```
if (isset($_POST['chkDel'])) {

    // Make a MySQL Connection
    $con = mysql_connect(host,user,pwd) or die(mysql_error());
    mysql_select_db("db_name"); 

    $rows = 0;

    foreach($_POST['chkDel'] as $chkdel)  {

        //query to delete post
        $delQuery = "DELETE FROM table WHERE ".$chkdel;

        //run the query 
        mysql_query($delQuery) or die(mysql_error());

        //Get rows affected
        $i = mysql_affected_rows();
        $rows = $rows + $i;
    }

    mysql_close($con);
} 
```

那是你要找的吗？

# c++ - 使用weak_ptr的观察者模式

> ID：14381588
> 
> 赞同：16
> 
> 时间：2013-01-17T14:45:43.053
> 
> 标签：c++, c++11, std, smart-pointers

我正在尝试从[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)`Subject`编写一个安全类。我想知道 using是否是以以下方式存储实例的最佳方式：`weak_ptr``IObserver`

*   `IObserver`实例释放后无法使用。
*   该类`Subject`不保留`IObserver`应该释放的引用（[失效的侦听器问题](http://en.wikipedia.org/wiki/Lapsed_listener_problem)）。
*   该类`Subject`必须是线程安全的。

不幸的是，我们的编码标准规定我们不允许使用 boost。我想我前世是个坏人。幸运的是，我被允许使用 C++11（Visual Studio 2012 附带的）。

这是一个示例`Observer`类。

```
// Observer interface that supports notify() method
class IObserver
{
public:
    virtual void notify() const = 0;
    virtual ~IObserver() {}
};

// Concrete observer implementation that prints a message
class Observer : public IObserver
{
public:
    Observer( const std::string& message) : m_message( message ){}

    void notify() const {
        printf( "%s\r\n", m_message.c_str() );
    }

private:
    std::string m_message;
}; 
```

这是`Subject`课程。

```
// Subject which registers observers and notifies them as needed.
class Subject
{
public:
    // Use shared_ptr to guarantee the observer is valid right now
    void registerObserver( const std::shared_ptr<IObserver>& o )
    {
        std::lock_guard<std::mutex> guard( m_observersMutex );
        m_observers.push_back( o );
    }

    void unregisterObserver( const std::shared_ptr<IObserver>& o )
    {
        std::lock_guard<std::mutex> guard( m_observersMutex );
        // Code to remove the observer from m_observersMutex
    }

    // This is a method that is run in its own thread that notifies observers of some event
    void doNotify()
    {
        std::lock_guard<std::mutex> guard( m_observersMutex );
        // Notify any valid observers of events.
        std::for_each( m_observers.cbegin(), m_observers.cend(), 
            []( const std::weak_ptr<IObserver>& o )
        {
            auto observer = o.lock();
            if ( observer ) {
                observer->notify();
            } 
        } );

        // Remove any dead observers.  These are ones which have expired().
        m_observers.erase( std::remove_if( m_observers.begin(), m_observers.end(), 
            []( const std::weak_ptr<IObserver>& o )
        {
            return o.expired();
        } ), m_observers.end() );

    }

private:
    std::vector<std::weak_ptr<IObserver>> m_observers;
    std::mutex m_observersMutex;
}; 
```

这是一些练习的代码`Subject`：

```
int main(int argc, wchar_t* argv[])
{

    Subject subject;
    auto observerHello = std::make_shared<Observer>( "Hello world" );
    subject.registerObserver( observerHello );
    {
        // Create a scope to show unregistration.
        auto observerBye = std::make_shared<Observer>( "Good bye" );
        subject.registerObserver( observerBye );

        subject.doNotify();
    }
    printf( "%s\r\n", "Observer good bye is now be destructed" );
    subject.doNotify();
    return 0;
} 
```

我使用`weak_ptr`线程安全吗？从这里[https://stackoverflow.com/a/2160422/1517648](https://stackoverflow.com/a/2160422/1517648)我*认为*是。

这是解决失效听众问题的合法方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T15:33:56.057

我对你的有点怀疑`doNotify`——假设你解雇的观察者中的某些东西最终会添加或删除观察者？-- 坏事发生（包括崩溃）。或者阻止另一个线程的操作，谁阻止尝试添加观察者？-- 坏事发生（死锁！）

这很难解决。基本上，这是重入的问题。

当您持有锁时，永远不要离开对代码的控制权。在调用回调时持有锁是禁忌。

所以，至少：

锁定然后复制您的列表然后解锁。在执行此副本时，您还可以删除过期的观察者（从原始列表和副本列表中）。

然后从复制的列表中触发观察者。

这留下了一些未解决的问题。比如移除一个观察者并不能保证它以后不会被调用！这只是意味着最终它不会被调用。

这有多重要取决于你如何使用倾听。

一种可能有效的方法是包含添加/删除/通知/killthread 事件的任务队列（使 killthread 成为队列中的任务使得关闭变得不那么烦人）。现在所有同步都在队列中。如果您无法编写非阻塞无锁队列，则通知代码可以简单地锁定`std::move`队列，解锁，然后继续执行它。或者您可以编写一个队列，以便`pop`阻塞直到有要读取的内容，并且`push`不会阻塞。

快速而肮脏的“复制和广播”可能如下所示：

```
std::vector<std::shared_ptr<IObserver>> targets;
{
  std::lock_guard<std::mutex> guard( m_observersMutex );
  m_observers.erase( std::remove_if( m_observers.begin(), m_observers.end(), 
        [&targets]( const std::weak_ptr<IObserver>& o )
    {
      std::shared_ptr<IObserver> ptr = o.lock();
      if (ptr) {
        targets.push_back(ptr);
        return false;
      } else {
        return true;
      }
    } ), m_observers.end() );
}

for( auto& target:targets ) {
  target->notify();
} 
```

# javascript - 喜欢按钮不在我的墙上发布

> ID：14381589
> 
> 赞同：3
> 
> 时间：2013-01-17T14:45:46.100
> 
> 标签：javascript, html, facebook, facebook-like

我只是在我的网站上添加了点赞按钮，但是当我点击这样发布时： ![发布框](../Images/70b56ab38d75385a9ba073f2ce89c75c.png) 帖子没有出现在我的墙上。为什么 ？这是我的按钮的 html 代码：

```
<div class="fb-like" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:04:40.683

```
<div class="fb-like" data-href="###URL | Permalink###" data-send="false" data-width="450" data-show-faces="true"></div> 
```

我想你错过了`data-href="http://www.example.com"`

**演示：http:** [//jsfiddle.net/CqNMG/](http://jsfiddle.net/CqNMG/)

# php - 神秘回声 - 找不到原因

> ID：14381592
> 
> 赞同：0
> 
> 时间：2013-01-17T14:45:58.183
> 
> 标签：php, echo

所以我制作了这个上传脚本，为了让它更安全，我正在找出每个文件的类型。

但是，由于某种原因，文件类型正在回显给我！例如：

> 图像/JPEG；charset=binary 请只上传 SWF 文件！

上传成功时，回显的字符串看起来相同。

编码：

```
 <?php session_start();
defined('IN_SCRIPT') ? NULL : define('IN_SCRIPT', NULL);
require_once 'inc/db_connect.php';
require_once 'styles/import.php';
$style = new style_class(NULL);
if(!isset($_FILES['file']['tmp_name']) || empty($_FILES['file']['tmp_name'])) die($style->upload_no_parameter());

$filetype = system('file -bi '.$_FILES['file']['tmp_name']);
$filetype = explode(';', $filetype, 1);
if ($filetype[0] != 'application/x-shockwave-flash; charset=binary') die($style->upload_wrong_format());

$sha256 = hash_file("sha256", $_FILES['file']['tmp_name']);
$query = $db->prepare('SELECT id FROM swf WHERE hash = :hash');
$result = $query->execute(array(':hash'=>$sha256));

if ($query->rowCount() != 0) die($style->upload_duplicate());

$query = $db->query('SELECT * FROM swf ORDER BY id DESC LIMIT 1;');
$name = $query->fetch(PDO::FETCH_ASSOC);
$new_name = 'uploads/'.($name['id']+1).'.swf';

if(move_uploaded_file($_FILES['file']['tmp_name'], $new_name)) { 
    $query = $db->prepare('INSERT INTO swf (uploader, upload_time, hash) VALUES (:id, NOW(), :hash);');
    $query->execute(array(':id' => $_SESSION['id'], ':hash'=> $sha256));
    echo $style->upload_success();
    }
else
    echo $style->upload_fail();
?> 
```

我不明白为什么脚本会做这样的回声......

谢谢！

编辑：

style_class 是我看的第一个地方。此类包含主要返回 HTML 文本的函数。整个类是从数据库自动生成的。

我在这里从生成的文件中复制了 upload_*，所以你可以看到：

```
class style_class{
    function upload_no_parameter(){
        echo "<b>All parameters must be set!</b>";
    }
    function upload_fail(){
        echo "<b>There was an error, please try again.</b>";
    }
    function upload_success(){
        echo "<b>Your SWF has been uploaded!</b>";
    }
    function upload_duplicate(){
        echo "<b>File already exists!</b>";
    }
    function upload_wrong_format(){
        echo "<b>Please upload only SWF files!</b>";
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:41:58.060

您的代码中有一些非常讨厌的逻辑错误：

1）假设文件上传成功。正确的错误处理如下：

```
if ($_FILES['file']['error'] !== UPLOAD_ERR_OK) {
   die("File upload failed with error code " . $_FILES['file']['error']);
} 
```

检查任何文件上传中的任何其他字段都是不正确的 - 即使上传失败，这些字段仍然可以存在和填充。错误代码记录在这里： http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

2）您正在使用`exec()`和调用`file`来确定 mimetypes。为什么？PHP有用`finfo`于此目的的库：http: [//php.net/manual/en/book.fileinfo.php](http://php.net/manual/en/book.fileinfo.php) 它使用与幻数库相同的幻数库，`file`并且不需要 exec() 调用即可工作。

3）您有一个非常容易出错的方法来获取您的 swf 的 ID 号：

```
$query = $db->query('SELECT * FROM swf ORDER BY id DESC LIMIT 1;');
$name = $query->fetch(PDO::FETCH_ASSOC);
$new_name = 'uploads/'.($name['id']+1).'.swf'; 
```

没有什么说在您获取此 ID 号和您在此处完成任务时，另一个脚本无法执行和完成。正确的方法是启动事务，将骨架记录插入数据库，检索其 auto_increment 主键，然后更新记录并使用该 ID 移动文件。它将保证是唯一的，而在某些时候您的代码将失败并在另一个上传时踩踏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:47:47.060

我敢打赌`die($style->upload_wrong_format())`是造成问题的原因。检查该功能。

# php - 如何从用户上传和检索数据库中的音频文件？

> ID：14381598
> 
> 赞同：1
> 
> 时间：2013-01-17T14:46:04.363
> 
> 标签：php, mysql, upload

我正在用 php 制作网站，我需要上传用户的音频文件并将它们存储在 MySql 数据库中并在需要时检索。

如果我们必须使用 blob 那么如何检查文件是否为音频类型以及如何检测它？

如果这不起作用，请向我建议其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:51:50.507

对您的问题的简单回答是，您不能简单地检查 BLOB 以查看它在 MySQL 中的文件类型。您可以分析 blob 前几个字节的标头，但这非常复杂。

正确的方法是当用户上传文件时，它被存储在一个临时位置，您可以访问它（并将其移动到更合理的位置或您的数据库）。使用 fileinfo 检查文件的 mime 类型：http: [//php.net/manual/en/function.finfo-file.php](http://php.net/manual/en/function.finfo-file.php)

然后将 mime 类型存储在 blob 旁边的新列中。

**更新：**如果您使用的是 PHP < 5.3.0，那么此解决方案允许您使用较旧的（现已弃用）函数检查 mimetype：[https ://stackoverflow.com/a/8225754/775007](https://stackoverflow.com/a/8225754/775007)

# android - 使用 boost 编译 android 应用程序，未定义对“mbtowc”的引用

> ID：14381600
> 
> 赞同：6
> 
> 时间：2013-01-17T14:46:16.757
> 
> 标签：android, boost, android-ndk, cocos2d-x, boost-serialization

我正在尝试使用 boost 1-49 的序列化库编译一个 android 应用程序。具体来说，这个项目有一些方便的脚本来完成工作：[https ://github.com/MysticTreeGames/Boost-for-Android](https://github.com/MysticTreeGames/Boost-for-Android)

使用 gnu-libstdc++ 4.6 for armeabi-v7a，针对官方 ndk-r8 构建的 Boost 没有问题。

至少，它能够创建 libboost_serialization-gcc-mt-1_49.a 而不会遇到任何错误。在构建过程中引发了几个警告，'禁止零大小数组'_pad' [-pedantic]'，'不支持'long long'，'不允许命名可变参数宏'，似乎没有什么严重的，但我没有' t 自称是 gnu 编译器方面的专家。

构建 boost 还创建了 libboost_wserialization-gcc-mt-1_49.a，这看起来很奇怪，但可能无关紧要。我没有将它包含在我的 makefile 中。

无论如何，当我现在尝试使用这个库编译我的代码时，我会收到以下错误：

```
/Users/wespaugh/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libboost_serialization-gcc-mt-1_49.a(xml_iarchive.o): in function boost::archive::xml_iarchive_impl<boost::archive::xml_iarchive>::load(std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >&):./boost/archive/impl/xml_iarchive_impl.ipp:71: error: undefined reference to 'mbtowc'
/Users/wespaugh/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libboost_serialization-gcc-mt-1_49.a(xml_iarchive.o): in function boost::archive::xml_iarchive_impl<boost::archive::xml_iarchive>::load(wchar_t*):./boost/archive/impl/xml_iarchive_impl.ipp:101: error: undefined reference to 'mbtowc'
/Users/wespaugh/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libboost_serialization-gcc-mt-1_49.a(xml_iarchive.o): in function boost::archive::xml_iarchive_impl<boost::archive::naked_xml_iarchive>::load(std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >&):./boost/archive/impl/xml_iarchive_impl.ipp:71: error: undefined reference to 'mbtowc'
/Users/wespaugh/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libboost_serialization-gcc-mt-1_49.a(xml_iarchive.o): in function boost::archive::xml_iarchive_impl<boost::archive::naked_xml_iarchive>::load(wchar_t*):./boost/archive/impl/xml_iarchive_impl.ipp:101: error: undefined reference to 'mbtowc'
/Users/wespaugh/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: ./obj/local/armeabi/libboost_serialization-gcc-mt-1_49.a(xml_oarchive.o): in function boost::archive::iterators::ostream_iterator<char> std::__copy_move<false, false, std::input_iterator_tag>::__copy_m<boost::archive::iterators::mb_from_wchar<boost::archive::iterators::xml_escape<wchar_t const*> >, boost::archive::iterators::ostream_iterator<char> >(boost::archive::iterators::mb_from_wchar<boost::archive::iterators::xml_escape<wchar_t const*> >, boost::archive::iterators::mb_from_wchar<boost::archive::iterators::xml_escape<wchar_t const*> >, boost::archive::iterators::ostream_iterator<char>):./boost/archive/iterators/mb_from_wchar.hpp:91: error: undefined reference to 'wctomb'
collect2: ld returned 1 exit status 
```

**编辑**

好的，我在午餐时间在这方面取得了一些进展。通过实际挖掘 boost 中的那些 src 文件，我发现 mbtowc 及其倒数是 gnu-libstdc++ 的一部分。因此，不知何故，当我构建 boost 时，它一定没有得到正确的参考。午餐时间不能再给它了，但我已经查看了 boost 是如何编译的，并且使用的标志应该适当地链接所有内容。

从构建日志：

```
Building with TOOLSET=gcc-androidR8 CXXPATH=/Users/wespaugh/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi-g++ CXXFLAGS=-I/Users/wespaugh/Development/android-ndk-r8d/platforms/android-14/arch-arm/usr/include -I/Users/wespaugh/Development/android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/4.6/include -I/Users/wespaugh/Development/android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include 
```

**结束编辑**

鉴于我在库中遇到错误，并且它是我在代码中使用的唯一库，我认为 makefile 不会有问题。不过，为了彻底起见，这里有以下内容：Android.mk，包含在我保存已编译的 boost 库的位置：

```
# define module to include serialization static library
LOCAL_PATH:= $(call my-dir)

# serialization
include $(CLEAR_VARS)

LOCAL_CFLAGS += -I$(LOCAL_PATH)/include/boost-1_49

# -L$(LOCAL_PATH)/lib/ 
LOCAL_LDLIBS += -lboost_serialization \
        -L$(NDK_ROOT)/sources/cxx-stl/ gnu-libstdc++/4.6/libs/armeabi-v7a \
        -lgnustl_static

LOCAL_CPPFLAGS += -fexceptions
LOCAL_CPPFLAGS += -frtti

LOCAL_CPP_EXTENSION := .cpp .hpp

LOCAL_C_INCLUDES := $(LOCAL_PATH)/include/boost-1_49 \
                    $(LOCAL_PATH)/include/boost-1_49/boost/archive \
                    $(LOCAL_PATH)/include/boost-1_49/boost/serialization

LOCAL_MODULE:= boost_serialization
LOCAL_SRC_FILES:= lib/libboost_serialization-gcc-mt-1_49.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../../../../Classes
include $(PREBUILT_STATIC_LIBRARY) 
```

Android.mk，在 proj.android/jni/

```
# compile the app
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LDFLAGS= -L$(NDK_ROOT)/sources/crystax/libs/armeabi-v7a/4.6.3 -Lcrystax 

LOCAL_CPPFLAGS += -fexceptions 

LOCAL_CPPFLAGS += -frtti

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := hellocpp/main.cpp \
                   ../../Classes/AppDelegate.cpp \
                   ../../Classes/HelloWorldScene.cpp 

LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes \
        $(LOCAL_PATH)/../../../cocos2dx/platform/third_party/android/prebuilt/libboost/include/boost-1_49 \
        $(LOCAL_PATH)/../../../cocos2dx/platform/third_party/android/prebuilt/libboost/include/boost-1_49/boost/archive \
        $(LOCAL_PATH)/../../../cocos2dx/platform/third_party/android/prebuilt/libboost/include/boost-1_49/boost/serialization

LOCAL_WHOLE_STATIC_LIBRARIES := boost_serialization cocos2dx_static cocosdenshion_static cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx)
$(call import-module,libboost) 
```

我最好的猜测是我没有正确构建提升，但不能肯定地说。什么可能导致这些错误？我什至无法搜索据称在序列化库中引用的文件（“mbtowc”和排列）。它是否试图引用我没有通过 makefile 包含的系统或文件系统提升库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:33:15.967

android-ndk-r8 不支持 Boost 序列化。我将研究crystaX r7，看看情况如何。关键的区别似乎是对 wchar 的支持。这是希望。

编辑：好的，也许确实如此。我不知道了。根据您的要求，您可能会听说官方 ndk*确实*支持 wchars，而这只是管理 boost 的配置文件以充分了解您正在构建的平台的问题。

此外，我还了解到，crystaX 的 NDK 的 boost 崩溃显然存在问题。

期待我下周回到这里说，“不，不，实际上我第二次是对的，第四次是对的”/bitter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T17:19:50.237

我有同样的问题。我正在为使用 boost::serialization 的代码创建一个 android 端口。

我的代码没有在任何地方使用 std::wstring 或 wchar_t 。

我按照此链接上的建议为 android 编译了 boost：http: [//www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/](http://www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/)

我正在使用 boost-1.55_0 和 NDK r9c。我也有同样的错误->

*错误：未定义对“mbtowc”的引用/错误：未定义对“wctomb”的引用*

但是我重新编译了 boost 添加以下标志（通过 jam 配置文件）：

```
<compileflags>-DBOOST_NO_STD_WSTRING 
```

这次生成的库没有使用 mbtowc 并且序列化对我有用。

# jsf-2 - Primefaces 对话框 + 命令按钮

> ID：14381602
> 
> 赞同：8
> 
> 时间：2013-01-17T14:46:28.493
> 
> 标签：jsf-2, dialog, primefaces, commandbutton

我正在尝试将 primefaces`<p:dialog>`与`<p:commandButton>`. 在我的 .xhtml 页面中，我有一个用于显示对话框的选项列表和命令按钮。对话框显示带有来自选择列表的目标值的数据表。对话框有两个按钮：取消和提交。我的问题是提交按钮没有被触发。奇怪的是，commandButton out of dialog 有效。

这是我的.xhtml：

```
<body>
   <ui:composition template="./../resources/mainTemplate.xhtml">
        <ui:define name="content">
            <h:form>
                <p:dialog id="dlg" header="#{messages.chooseSkillLevel}" widgetVar="dlg" modal="true" dynamic="true">
                    <h:dataTable value="#{editSkills.skillsAndLevels}" var="skillslevel">
                        <h:column>
                            #{skillslevel.skill.umiejetnosc}
                        </h:column>
                        <h:column>
                            <p:selectOneMenu value="#{skillslevel.level}" >
                                <f:selectItems value="#{editSkills.levels}" var="level" itemLabel="#{level.stopien}" itemValue="#{level.id}" />
                            </p:selectOneMenu>
                        </h:column>
                    </h:dataTable>
                    <p:commandButton value="#{messages.confirm}" action="#{editSkills.showSkillsAndLevels}" oncomplete="dlg.hide();" />   THIS BUTTON IS NOT FIRED
                    <p:commandButton value="#{messages.cancel}" onclick="dlg.hide()"/>
                </p:dialog>
                <p:pickList value="#{editSkills.skills}" var="skill" effect="none"  
                itemValue="#{skill.id}" itemLabel="#{skill.umiejetnosc}"  
                showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains" 
                addLabel="#{messages.add}" removeLabel="#{messages.remove}" removeAllLabel="#{messages.removeAll}" >  
                    <f:facet name="sourceCaption">#{messages.skillsList}</f:facet>  
                    <f:facet name="targetCaption">#{messages.yourSkills}</f:facet>
                    <p:ajax event="transfer" listener="#{editSkills.onTransfer}" /> 
                    <p:column style="width:100%;">  
                        #{skill.umiejetnosc}  
                    </p:column> 
                </p:pickList>
                <p:commandButton value="#{messages.confirm}" action="#{editSkills.afterSubmit}" update="dlg" oncomplete="dlg.show()" />   THIS BUTTON WORKS FINE
                <p:commandButton value="#{messages.cancel}" action="profile" immediate="true"/>
           </h:form>
        </ui:define>
    </ui:composition>
</body> 
```

我已经标记了工作按钮而不是工作按钮。我必须做些什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-18T06:47:25.440

您可以尝试以下任何一种方法，我投票第一，IMO 设计更简洁

1.  把`<p:dialog/>`将军的外面拿来，把*里面*`<h:form/>`放一个`<h:form/>`

     *```
     <p:dialog id="dlg" header="#{messages.chooseSkillLevel}" widgetVar="dlg" modal="true" dynamic="true">
          <h:form>
                <h:dataTable value="#{editSkills.skillsAndLevels}" var="skillslevel">
                    <h:column>
                        #{skillslevel.skill.umiejetnosc}
                    </h:column>
                    <h:column>
                        <p:selectOneMenu value="#{skillslevel.level}" >
                            <f:selectItems value="#{editSkills.levels}" var="level" itemLabel="#{level.stopien}" itemValue="#{level.id}" />
                        </p:selectOneMenu>
                    </h:column>
                </h:dataTable>
                <p:commandButton value="#{messages.confirm}" action="#{editSkills.showSkillsAndLevels}" oncomplete="dlg.hide();" />   THIS BUTTON IS NOT FIRED
                <p:commandButton value="#{messages.cancel}" onclick="dlg.hide()"/>
               </h:form>
            </p:dialog> 
    ```* 
**   添加`appendToBody="false"`到`<p:dialog/>`以确保对话框在 DOM 中的 html 表单中呈现，而不是自动重新定位到 HTML 正文的末尾。但这可能会导致在各种浏览器中呈现不一致。* 

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-21T17:11:06.150

```
<p:commandButton  value="Cancel" oncomplete="PF('yourDialogWidgedVarName').hide();" process="@this"  /> 
```

当您调用 widgetVar 名称时，请确保使用**' 。**您也可以使用 immediate="true" 或 process="@this"。*

# visual-studio-2012 - Visual Studio 2012 - 如何创建仅资源 DLL

> ID：14381604
> 
> 赞同：3
> 
> 时间：2013-01-17T14:46:33.647
> 
> 标签：visual-studio-2012

我正在寻找有关如何在 Visual Studio 2012 中创建纯资源 DLL 的快速概述。我找到了 Visual Studio 2005 的这篇旧文章，但这似乎不再相关： [http://msdn。 microsoft.com/en-US/library/24b2tcy0(v=VS.80).aspx](http://msdn.microsoft.com/en-US/library/24b2tcy0(v=VS.80).aspx)

目标是我（图形专家，而不是程序员）可以为程序员制作资源 DLL，以便从中提取位图和图标。我可以按照说明进行操作，并且有足够的 Visual Studio 经验来找出至少粗略的说明——如果没有别的，我只是在寻找一个起点。

提前致谢， 比姆斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T14:49:12.873

*   启动一个“类库”类型的新项目。
*   将有一个类，根据您选择的语言，它的名称会有所不同。删除它。
*   将您的资源添加到项目中，将它们的属性更改为“嵌入式资源”
*   编译

# android - Android - 在调试模式下获取应用程序列表

> ID：14381612
> 
> 赞同：3
> 
> 时间：2013-01-17T14:46:45.807
> 
> 标签：android, android-package-managers

我正在尝试开发一个具有以下要求的android应用程序。有没有办法通过代码，我可以在调试模式下获取设备上安装的应用程序列表。

提前致谢。

编辑 - 我尝试了以下代码。

```
 PackageManager pm = getPackageManager();
         List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

        for (int i=0; i < packages.size(); i++)
            {
                if ((packages.get(i).flags & ApplicationInfo.FLAG_SYSTEM) == 1)
                {
                     //This is for System applications
                }
                else
                {

                    boolean isDebuggable =  (0 != ( getApplicationInfo().flags &= ApplicationInfo.FLAG_DEBUGGABLE ) );

                    if((pm.getLaunchIntentForPackage(packages.get(i).packageName)!=null) && (isDebuggable = true) )                 
                    {
                        // Only For Apps with debug mode set true, this line should get executed 
                        // But this does not happens
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:08:43.870

干得好，

```
Intent main = new Intent(Intent.ACTION_MAIN, null);
main.addCategory(Intent.CATEGORY_LAUNCHER);
List pkgAppsList = context.getPackageManager().queryIntentActivities( main, 0); 
```

这应该为您提供足够的信息以启动应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T08:03:23.390

我尝试了各种方法，但据我了解，我们无法单独获取处于调试模式的应用程序列表。

通过使用标志，我们只能获取具有此代码的应用程序，而不是设备上运行的其他应用程序。

无论如何谢谢。如果有人有不同的想法，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-09T03:31:29.520

来自贾斯汀的回答

科特林

```
val allIntent = Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_LAUNCHER)
val allApps = packageManager.queryIntentActivities(allIntent, 0)
val debugApps = arrayListOf<ActivityInfo>()

allApps.forEach {
    val appInfo = (packageManager.getApplicationInfo(
        it.activityInfo.packageName,
        0
    ))
    if (0 != appInfo.flags and ApplicationInfo.FLAG_DEBUGGABLE) {
        debugApps.add(it.activityInfo)
    }
}

debugApps.forEach {
    Log.d("debugApps", it.packageName)
} 
```

可以获取所有处于调试模式的应用程序。在我的设备中，我获得了使用 Android Studio 安装的所有应用程序。

# javascript - javascript caml查询返回所有日期值

> ID：14381616
> 
> 赞同：0
> 
> 时间：2013-01-17T14:46:56.333
> 
> 标签：javascript, sharepoint, sharepoint-2010, caml

我正在使用 CAML 查询从日历中获取两个特定日期之间的事件。但是，当查询运行时，它仍然返回列表中的所有事件。看起来好像它没有正确应用“和”运算符。

我的代码是：

```
camlQuery.set_viewXml('<View><GetListItems><Where><And>' + 
  '<Gt><FieldRef Name="EventDate" /><Value IncludeTimeValue="TRUE" Type="DateTime">' +
  startDate + '</Value></Gt>' + 
  '<Lt><FieldRef Name="EventDate" /><Value IncludeTimeValue="TRUE" Type="DateTime">' +
  endDate + '</Value></Lt></And></Where>' + '
  <ViewFields><FieldRef Name="Title" /><FieldRef Name="EventDate" /></ViewFields>' +
 '<QueryOptions /></GetListItems></View>'); 
```

startDate 和 endDate 转换为 ISO8601 格式，如果我只执行大部分 caml 查询，那么我会返回该日期之后的所有列表项。只是在添加不到 caml 查询的一部分时，我开始收到错误。caml 在 U2U 查询生成器中运行良好。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:22:26.147

我已经将查询评估器从 to 和 to 更改为并删除了标签，这似乎已经成功了

# xmlhttprequest - 了解 chrome 开发者工具中的 http ajax 请求

> ID：14381617
> 
> 赞同：1
> 
> 时间：2013-01-17T14:46:56.130
> 
> 标签：xmlhttprequest, google-chrome-devtools

我不是开发人员，而是互联网营销人员 - 所以请原谅我确信这是一个非常基本的问题。在我的职业生涯中，在查看网站营销以更好地了解所使用的工具（例如 Google Analytics）时很有用。大多数时候这很简单——只需查看源代码，您就会在源代码中看到 javascript 片段。

我使用 ghostery 插件使这更容易一些，但我不了解 http 请求的是 ghostery 如何报告正在使用的技术，例如广告服务器 DoubleClick，但我看不到任何代码引用 Doubleclick 的源代码。这种情况经常发生，但最常见于广告服务器技术。

当我查看使用 Chrome 开发工具时，我确实看到调用是通过查看源选项卡进行的。

我的问题是这样的，这确实是一个普遍的问题，我试图更好地了解浏览器与所有各种服务器和服务之间的调用方式：

如何在 Chrome 工具中找到调用加载资源的代码，例如 DoubleClick。我在源代码中找不到任何东西，这告诉我我不完全理解交互是如何工作的。我认为从搜索 StackOverflow 来看这是一个 xmlhttp 调用，但我不确定，也许是 cookie - 我只是不知道这是如何工作的。归根结底，我不喜欢不理解这一切是如何运作的，所以我希望有人能指出我的写作方向。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:29:19.877

在`Network`面板中，找到您感兴趣的请求。**Initiator**列将包含对已启动加载相关资源的代码的引用。

# shell - 如何搜索字符串并将其放入 shell 脚本中的变量中？

> ID：14381619
> 
> 赞同：1
> 
> 时间：2013-01-17T14:47:01.143
> 
> 标签：shell, sed, grep

只是想知道是否有人可以帮助我。我有一个包含一行的文件：

```
W32i   APP   -     8.0.0.xxxxx shp 6SFE25~1.EXE 
```

xxxxx 是 5 位数字，每次的数字都不同。我希望能够搜索 xxxxx 并将其放入一个变量中，这样我就可以使用这个变量。我使用 grep 和 sed 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:51:26.933

```
#!/bin/sh

read < a.txt
[[ $REPLY =~ 8.0.0.([^\ ]*) ]]
echo ${BASH_REMATCH[1]} 
```

输出

```
xxxxx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:55:19.903

一个.txt

```
W32i   APP   -     8.0.0.xxxxx shp 6SFE25~1.EXE 
```

代码

```
 num=$(< a.txt)
 num=${num#*.0.0.}  # "left" remove everything up to .0.0.
 num=${num%% *}     # "right" remove "all" after " " char
 echo "num=${num}" 
```

输出 xxxxx

您会很高兴花时间了解变量修饰符的`${num#xxx}, ${num##xx}, ${num%x}, ${num%%x}`工作方式的差异。高级 shell 还支持`sed`类似替换，`${num/0/9}`以及`${num//0/9}`.

IHTH

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:49:42.143

```
perl -lne 'm/(\d{5})/g;print $1' 
```

[在这里](http://ideone.com/iwXWXp)测试

# windows - VCbuild 在 XP cygwin/x64 下没有运行“访问损坏的共享库”

> ID：14381621
> 
> 赞同：1
> 
> 时间：2013-01-17T14:47:01.623
> 
> 标签：windows, visual-studio-2008, 64-bit

我正在尝试在 XP 64 位和 Visual Studio 2008 中运行 vcbuild。这个问题相当令人费解，因为它没有什么意义，而且因为我对 Windows 知之甚少。我实际上打算从 cygwin 运行它，但我认为它不相关。标题中的错误消息是我在 cygwin 上得到的，它引发了进一步的研究。

我正在运行 Windows 64 位，安装了 VS2008（使用 x64）并更新了所有内容。当我打开终端并尝试调用 vcbuild 时，我得到了这个

```
C:\Documents and Settings\Administrator\Desktop>"C:\Program Files (x86)\Microsof
t Visual Studio 9.0\VC\bin\amd64\vcbuild.exe"
The system cannot execute the specified program. 
```

还有另一个运行的 vcbuild

```
C:\Documents and Settings\Administrator\Desktop>"C:\Program Files (x86)\Microsof
t Visual Studio 9.0\VC\vcpackages\vcbuild.exe"
Microsoft (R) Visual C++ Project Builder - Command Line Version 9.00.21022
Copyright (C) Microsoft Corporation. All rights reserved. 
```

但据我了解，它是 32 位的。我尝试运行dependency walker，事实上第一个是64位程序（注意64位图标），链接到32位库（？？？）

![在此处输入图像描述](../Images/a11544ae46b4409454b23d67f6578c06.png)

第二个是链接到 32 位库的 32 位程序

![在此处输入图像描述](../Images/5e245fb3372cdcde11a99ba266eba522.png)

我不知道出了什么问题（或错误）。我会说这是一个变量定义问题。我尝试调用 vcvarsall.bat x64

```
C:\Documents and Settings\Administrator>"c:\Program Files (x86)\Microsoft Visual
Studio 9.0\VC\vcvarsall.bat" x64
Setting environment for using Microsoft Visual Studio 2008 Beta2 x64 tools. 
```

但没有运气。任何想法 ？

# asp.net - 需要帮助编写一些简单的条件 ASP 代码

> ID：14381632
> 
> 赞同：0
> 
> 时间：2013-01-17T14:47:27.723
> 
> 标签：asp.net, webforms

以下代码在列内呈现一个文本框，并用`DESCRIPTION`字段的值填充文本框：

```
<asp:TemplateColumn HeaderText="Notes.LBL_LIST_DESCRIPTION" SortExpression="DESCRIPTION" ItemStyle-Width="20%" >
        <ItemTemplate>
                <asp:TextBox ID="DESCRIPTION" BorderWidth="0" BorderStyle="none" ReadOnly="true" CssClass="dataField" Text='<%# Eval("DESCRIPTION") %>' TextMode="MultiLine" Rows="2" Width="200px" TabIndex="11" runat="server" />
        </ItemTemplate>
</asp:TemplateColumn > 
```

`DELETED`如果字段（位字段）的值等于 ，我想用红色文本“[DELETED]”附加描述`1`。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:27:38.403

我没有添加，而是添加了一个跨度：

```
<%# Sql.ToInteger(DataBinder.Eval(Container.DataItem, "DELETED")) == 1 ? "<span style='color: red;'>[Deleted]</span>" : "" %> 
```

# c# - 以编程方式过滤自定义属性

> ID：14381633
> 
> 赞同：0
> 
> 时间：2013-01-17T14:47:27.190
> 
> 标签：c#, wpf, properties, propertygrid

我有一个现有的自定义控件库，其中包含可能包含属性的控件：HeaderStyle、ModalStyle、Collapsable 等...

在用户界面中，程序当前正在显示这些属性的分类列表。我正在尝试更新此代码以隐藏他们通常不使用的属性。我有一个基于按钮单击隐藏/显示的属性列表，但我不确定如何以编程方式隐藏这些字段。

如果再次显示字段，我想在隐藏之前保留输入到字段中的任何值并重新显示这些值。

这是当前存在但希望在切换时隐藏/显示的属性。

```
/// <summary>ModalStyle property for control</summary>
[XmlAttribute]
[DefaultValue(Utility.Common.Enumerations.ModalStyle.None)]
[Category(PropertyCategories.Rendering)]
[Description("Modal dialog style")]
public ModalStyle? ModalStyle
{
get { return control.ModalStyleActive; }
set { control.ModalStyle = value; }
} 
```

我最初的想法是在#if DEBUG 上做一些变体，但使用我自己的条件，但是我无法找到通过按钮/切换更改条件的方法。

谁能帮我解决我的问题？我有 20 到 30 个控件，其中包含 20 到 30 个要过滤的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:46:33.987

我有两个建议，虽然它们可能无法为您提供所需的确切功能，但可以使您的解决方案更加直接。

第一：由于您是库开发人员，您只需决定希望其他开发人员通过 IDE 属性窗口访问哪些属性。如果某个属性很少通过 IDE 使用或不是很有用，那么只需在其上放置 [Browsable(false)] 属性即可。

第二：如果您真的希望所有属性都在 IDE 属性窗口中可见，但想给个人一种隐藏更高级（或较少使用）的方法，只需将它们全部放入“高级”类别。然后，用户可以简单地折叠该类别并忘记它们。

另外：看看奥利弗对这个问题的回答： [[how-to-show-or-hide-properties-dynamically-in-the-propertygrid]](https://stackoverflow.com/questions/5831878/how-to-show-or-hide-properties-dynamically-in-the-propertygrid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:11:22.283

我不确定您要达到的目标。

当您使用属性时，这些属性对于类是静态的。因此，在您的情况下，当您在对象上切换显示/隐藏时，它位于对象的实例上。此外，您不能在运行时更改属性值。

也许您应该尝试另一种解决方案，例如创建全局

```
map<pair<type of object, property name>, is shown> 
```

并从您的编辑器相应地更新。

如果你想使用属性网格之类的东西，你会遇到问题，因为它不会检查你的地图，但可以修复它。您可以在运行时创建一个新类并使其成为当前实例的代理。（在网上查看如何实现这一点，但这很简单。有两种可能性：从字符串编译或使用 ILGenerator。

希望这有帮助。

# jquery - 合并 jQuery Instagram 和 Animated Responsive Grid 插件

> ID：14381634
> 
> 赞同：0
> 
> 时间：2013-01-17T14:47:30.737
> 
> 标签：jquery, jquery-plugins, merge, responsive-design, instagram

我正在尝试从事个人项目。www.blandydoes.co.uk

让我带你快速了解。我在该页面上安装了两个插件。一种叫做 jQuery Instagram...

[https://github.com/potomak/jquery-instagram](https://github.com/potomak/jquery-instagram)

...另一个称为动画响应网格...

[http://tympanus.net/codrops/2012/08/02/animated-responsive-image-grid/](http://tympanus.net/codrops/2012/08/02/animated-responsive-image-grid/)

安装时，两个插件都可以独立运行。

**我所做的是试图合并它们**

我已经启动了 jQuery Instagram 插件来生成图像的 UL 列表（ul.instagram），而不是它本来要做的 div。如果我自己创建一个类名为 instagram 的 UL，这可以正常工作。它生成列表，如果需要，我可以将其设置为网格。检查 Firebug 以查看正在生成的列表。

接下来我安装了 Responsive Grid 插件并创建了名为#ri-grid 的容器 div。

然后启动该插件以查找该 div 并旨在查找内部带有图像的 ul 列表 os 链接，删除图像并将该图像的 src 作为背景图像附加到链接。

正如演示所建议的那样，我再次使用链接标记包围的静态图像的 ul 列表运行该插件，它运行良好。

**但**

尽管 instagram 插件正在生成带有图像的链接的 ul 列表，但由于某种原因，响应式插件也没有将图像 src 附加到链接并删除该图像，而只是“隐藏”名单...

有人知道发生了什么冲突吗？

Firebug 控制台中没有任何内容表明存在错误。

如果您查看该页面，我创建了一个可以正常工作的静态图像列表，并且我还创建了一个单独的自动生成 instagram 列表。

www.blandydoes.co.uk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:04:35.300

我开始认为这可能永远无法解决。不过，我会继续努力。:-)

# javascript - JQuery：删除已添加到 load() 中的 DOM 对象

> ID：14381635
> 
> 赞同：2
> 
> 时间：2013-01-17T14:47:30.337
> 
> 标签：javascript, jquery, html

文件内容如下。我有一个按钮“load_button”，它的点击事件触发了一个 load() 函数。使用该函数加载的 html 文件包含另一个按钮“my_button”。load() 函数的回调为“my_button”的点击事件添加了一个处理程序。问题是，每次按下“load_button”，都会添加一个新的点击事件处理程序，并且事件处理程序中的警报会多次弹出。在创建新的之前，我想用它的事件处理程序删除以前创建的“my_button”。我尝试添加以下命令，在下面的文件描述中将其注释掉。

```
$('#page').empty(); 
```

没运气。我想要一个通用的解决方案，因为我要删除其他 DOM 对象。我怎样才能删除它们？

此外，当我更换它不起作用

```
$('#page').on('click', '#my_button', function () { 
```

和

```
$("#my_button").click(function()    { 
```

为什么它不起作用？load() 的回调函数不是应该在加载完成后运行，并且 DOM 对象可用吗？

main.html

```
<html>
    <head>
        ...
        <script src="main.js"></script>
    </head>
    <body>
        ...
        <a id="load_button">Load!</a>
        <div id="page">
        </div>
    </body>
</html> 
```

1.html

```
<div>
    <a id="my_button">Go!</a>
</div> 
```

main.js

```
$(document).ready(function(){

    $('#load_button').click(function()    {
//      $('#page').empty();
        $("#page").load('1.html', load_scripts());

    });
});

function load_scripts() {
    $.getScript('script.js');
} 
```

脚本.js

```
$(document).ready(function(){

     $('#page').on('click', '#my_button', function () {
//   $("#my_button").click(function()    {
        alert('COWABUNGA!');
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:52:00.457

看起来您根本不需要动态加载脚本。尝试如下所示的 main.js：

```
$(document).ready(function(){

    $('#load_button').click(function()    {
        $("#page").load('1.html');
    });

    $('#page').on('click', '#my_button', function () {
        alert('COWABUNGA!');
    });

}); 
```

# c# - 用javascript填充后文本框为空

> ID：14381636
> 
> 赞同：1
> 
> 时间：2013-01-17T14:47:30.913
> 
> 标签：c#, javascript, asp.net

我通过这段代码创建文本框：

```
<div style="clear:left;">
    <asp:TextBox TextMode="MultiLine" runat="server" ID="selectText" ReadOnly="true" Width="560px" Height="50px"></asp:TextBox>
</div> 
```

我用这段代码填充它：

```
elSelText.value = elSelText.value.substr(0, position) + chosenoption2.value + " "; 
```

然后我尝试将文本框中的值发送到服务器，但它是空的！

```
protected void btnUseSelectClick(object sender, EventArgs e)
    {
        sourceDetails.SelectCommand += " and " + selectText.Text;
        Session["FilterSelectCommand"] = sourceDetails.SelectCommand;
        tableResults.DataBind();
    } 
```

根据我添加 AutoPostBack="true" 的建议：

```
<div style="clear:left;">
    <asp:TextBox TextMode="MultiLine" runat="server" AutoPostBack="true" ID="selectText" ReadOnly="true" Width="560px" Height="50px"></asp:TextBox>
</div> 
```

但这没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:07:31.643

虽然这对我来说是新闻，但该`ReadOnly`属性似乎没有跟踪客户端的更改。如果您想要“只读”功能但仍然在服务器上获取值，请将以下内容放入您的`Page_Load`方法中：

```
selectText.Attributes.Add("readonly", "readonly"); 
```

并删除标签中的`ReadOnly`(and `AutoPostBack`) 属性。`<asp:TextBox>`

（来自：[http](http://aspadvice.com/blogs/joteke/archive/2006/04/12/16409.aspx) ://aspadvice.com/blogs/joteke/archive/2006/04/12/16409.aspx和[http://forums.asp.net/t/1467081.aspx](http://forums.asp.net/t/1467081.aspx) - 这是一个相当快的发现谷歌）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:55:45.397

也许是 ViewState 的问题。`Page.IsPostBack`尝试在页面加载事件中添加检查，如下所示：

```
If(!Page.IsPostBack)
{
    // Data binding for the first call
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:06:59.433

我相信这是由于 ReadOnly: ASP.Net 注册了哪些控件在向您发送页面时是只读的。

这些控件的值在回发时被丢弃，并且被重新获取（我相信来自 ViewState）。

解决方法不是`readonly="true"`在 aspx 页面上设置，而是使用`$(document).ready(your_function_here();)`（如果您使用 jQuery）或 body`onLoad`事件进行设置。

# c++ - const char 中的 C++ 更改值

> ID：14381641
> 
> 赞同：1
> 
> 时间：2013-01-17T14:47:52.450
> 
> 标签：c++, pointers

我有一个 const char

```
const char example[] = "\x4D\x5A\xE8\x00\x00\x00\x00\x5B\x52\x45\x55\x89\xE5\x81\xC3"; 
```

和

```
DWORD* example2 = "\xAA\xBB\xCC\xDD"; 
```

我想用example2上的那些改变example1的最后4个字节我可以在C++中做什么？

我试过了`memcpy`，`strcpy`但`strcpy_s`没有运气

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T14:49:00.907

您不应该修改常量数组！
修改固有的常量对象/变量会导致**未定义的行为**。
只是不要这样做。制作它的副本并修改该副本，或者如果您想修改同一个数组，只需不要将其声明为`const`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T14:55:50.280

1.  不要修改常量字符串。
2.  `const char example[] = "\x4D\x5A\xE8\x00\x00\x00\x00\x5B\x52\x45\x55\x89\xE5\x81\xC3";`在这里，您的字符串有几个 NULL 字符串终止符。这不适用于`<string.h>`（例如 strlen() 和其他）中的函数
3.  而是使用`memcpy`,`memset`函数仅在知道二进制字符串的长度后追加。
4.  将您的结果存储在字符数组中，但不要因为您的数据而假设它会作为常规字符串工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T14:51:00.897

你的`example[]`char 数组被定义为`const` 你不能修改它。

1）如果您以这种方式更改 const char 数组，您应该会在编译中出错

```
example[2] ='R'; 
```

2）如果您通过`memcpy`或通过修改您的 const char 数组，您应该会收到警告`strcpy`

将其更改为

```
char example[] = "\x4D\x5A\xE8\x00\x00\x00\x00\x5B\x52\x45\x55\x89\xE5\x81\xC3"; 
```

而且你不能使用`strcpy`，因为你的字符数组包含`x00`在中间所以这会影响`strcpy`功能。因为在 char 数组中`strcpy`找到时停止`x00`

`example[]`char 数组包含`x00`在中间，因此查找`example[]`with的长度`strlen`将无法正常工作。对于这种情况，我建议`sizeof(example)`改用。

下面介绍如何制作副本：

```
char example[] = "\x4D\x5A\xE8\x00\x00\x00\x00\x5B\x52\x45\x55\x89\xE5\x81\xC3";
DWORD* example2 = "\xAA\xBB\xCC\xDD";

if (sizeof(example)>=sizeof(example2))
     memcpy(example+sizeof(example)-sizeof(example2), example2, sizeof(example2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:50:38.993

你永远不应该修改一个常量，包括一个常量数组。如果您想更改上面的内容，请创建它的副本并更改**副本**。正如 RasmusKaj 指出的那样，strcpy 在这里对您没有帮助，因为源字符串包含零个字符，因此可以使用 memcpy 来创建副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T15:20:32.313

const 变量不能更改。这是设计使然。对于 ac 字符串，您可以拥有字符串 const 的内容或指向字符串 const 的指针。

由于您将其定义为 const 字符数组，因此指针隐式为 const，而内容显式为 const。

```
const char * const mystring = "hello" 
```

在这种情况下，第一个“const”尝试向左应用（什么都没有），所以它向右应用（对 char 类型）。所以字符串内容可能不会改变。第二个 const 尝试向左应用，因此它使指针本身为 const。这意味着 mystring 指针必须始终指向内存中“hello”中的“h”所在的位置。

所以之后如果我尝试：

```
mystring[0] = "y" 
```

或者

```
mystring = "gooodbye!" 
```

他们不会工作。如果您分别删除了第一个或第二个 const，它们可以工作。

const 的目的是让你提前说“这个变量不能被修改”。这意味着，如果它被修改，那么就会有问题。通常，您应该始终将 const 与您不想在实例化后修改的任何变量一起使用。

# list - Scala清空列表

> ID：14381643
> 
> 赞同：7
> 
> 时间：2013-01-17T14:47:58.123
> 
> 标签：list, scala, scala-collections

我在一个类中有一个成员变量：

```
val options = mutable.LinkedList[SelectOption]() 
```

然后我从数据库中填充这个列表。

在某些时候，我想刷新列表。我如何清空它？

在java中：

```
options.clear(); 
```

Scala中是否有等价物？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T14:58:53.340

不要使用`LinkedList`. 那是一个低级集合，它提供了一个可以根据用户的意愿进行操作的数据结构......和责任。

相反，请使用`Buffer`具有该`clear`方法的类之一。顺便说一下，这个方法是从`Clearable`trait 继承的，所以你可以看看扩展的类`Clearable`。

# sql-server - 如何将报告数据从 MSAS 和 TM1 提取到 Cognos？

> ID：14381645
> 
> 赞同：0
> 
> 时间：2013-01-17T14:48:02.113
> 
> 标签：sql-server, business-intelligence, cognos, cognos-bi, cognos-tm1

如何将报告数据从 MSAS 和 TM1 提取到 Cognos？（Cognos 10，甚至是 Cognos 8）

我需要合并来自两个独立多维数据集的数据：一个来自 MSAS，另一个来自 TM1。然后我需要将它提取到一个 cognos 报告中。

谁能帮我？甚至通过 Skype 聊天/gtalk？我将不胜感激。

蒂亚！

问候，玛丽亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T20:52:57.560

我有在 Cognos 8.4 中创建与 MSAS 多维数据集的数据源连接的经验。更高版本的刚果 BI 甚至提供与 MSAS 多维数据集的兼容性。

有一些小故障，例如出现成员名称的描述和其他成员属性混乱。然而，我们可以做一些 Cognos 报告。

我肯定会尝试使用 MSAS 和 TM1 多维数据集创建一个包，因为这是使来自不同数据源的数据在同一个报告上相遇的唯一方法。命名 confomed 尺寸相同以匹配它们。原则上使用 Query Studio 进行测试，就像打开任何数据源一样。

# android - 如何**禁用**互联网？

> ID：14381646
> 
> 赞同：1
> 
> 时间：2013-01-17T14:48:13.293
> 
> 标签：android

我正在开发一个应用程序。其中，我想暂时禁用互联网，特别是如果他有作业。如何**禁用**互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:56:16.590

要以编程方式启用/禁用数据连接，请查看此[帖子](https://stackoverflow.com/questions/11555366/enable-disable-data-connection-in-android-programmatically)

要禁用/启用 wi-fi，请参阅本[教程](http://www.hrupin.com/2012/06/how-to-turn-on-turn-off-wifi-connection-programmatically-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:51:48.687

只要您拥有正确的权限，您就可以在您的应用程序中设置“移动数据”和“wifi 状态”。此外，您可以注册系统范围的 BroadcastListener 以检测设备何时连接到 Internet，并执行您认为需要执行的任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:55:13.190

可以使用飞行模式或通过系统挂钩来执行此操作，但用户仍将保留重新连接的权力。如果您再次断开连接，他可以禁用/删除您的应用程序。

有没有绝对的方法来限制用户？我不相信。仅出于安全原因，向第三方应用程序提供这种能力是非常危险的。

# powershell - 如何从注册表更新 Windows PowerShell 会话环境变量？

> ID：14381650
> 
> 赞同：41
> 
> 时间：2013-01-17T14:48:23.793
> 
> 标签：powershell

这可能是一个简单的问题，但我找不到正确的答案。

如何在当前 Windows PowerShell 会话中更新环境变量而不关闭当前会话？

到目前为止，当我从**Control Panel > System**`PATH`修改环境变量时，我必须关闭当前会话并打开一个新会话，以便刷新变量，或者发出一个很麻烦的问题。**`SetEnviromentVariable`**

 **我来自 Linux 世界，所以我正在寻找类似`source`命令的东西。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-03-26T19:11:16.250

没有必要在注册表中为这些东西去垃圾箱潜水：

```
foreach($level in "Machine","User") {
   [Environment]::GetEnvironmentVariables($level)
} 
```

如果你想让 PATH 变量正常工作，你必须特别对待它们（也就是说，将（可能）新的东西连接到你已经拥有的东西上，而*不是丢失任何东西*，因为你无法确定你的应该删除）。

```
foreach($level in "Machine","User") {
   [Environment]::GetEnvironmentVariables($level).GetEnumerator() | % {
      # For Path variables, append the new values, if they're not already in there
      if($_.Name -match 'Path$') { 
         $_.Value = ($((Get-Content "Env:$($_.Name)") + ";$($_.Value)") -split ';' | Select -unique) -join ';'
      }
      $_
   } | Set-Content -Path { "Env:$($_.Name)" }
} 
```

请注意， Set-Content 实际上在您的**流程**环境中设置变量，与执行类似的操作相同`$env:Temp = Convert-Path ~\AppData\Local\Temp`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-17T15:09:55.250

环境会在进程启动时填充，这就是您需要重新启动进程的原因。

您可以通过从注册表中读取环境来更新环境。也许使用如下脚本：

```
function Update-Environment {
    $locations = 'HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\Environment',
                 'HKCU:\Environment'

    $locations | ForEach-Object {
        $k = Get-Item $_
        $k.GetValueNames() | ForEach-Object {
            $name  = $_
            $value = $k.GetValue($_)

            if ($userLocation -and $name -ieq 'PATH') {
                Env:\Path += ";$value"
            } else {
                Set-Item -Path Env:\$name -Value $value
            }
        }

        $userLocation = $true
    }
} 
```

（未经测试）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-01-18T09:16:20.977

这是一个老问题，但如果你使用[Chocolatey](https://chocolatey.org/)，它还会安装方便的[`refreshenv`](https://github.com/chocolatey/chocolatey/blob/master/src/redirects/RefreshEnv.cmd)命令，这对我来说很好用。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-17T16:03:11.327

如果您只想更新当前 PowerShell 会话的路径，请执行以下操作：

```
$env:Path += ";<new path>" 
```

如果您需要更新 PATH 环境变量，以便它在新的 PowerShell 会话中保持不变，请使用：

```
[Environment]::SetEnvironmentVariable("PATH", $env:Path + ";<new path>", 'User') 
```

如果要更改所有用户的路径，请将“用户”更改为“机器”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-03-26T21:20:48.303

不幸的是，其他答案缺少一些重要的细节。PSModulePath 在 PowerShell 中有一些特殊处理，在更新环境变量时需要考虑这些处理。此外，可以添加、修改或删除变量。并且您需要考虑路径环境变量。

更糟糕的是，根据您在执行此操作时所处的产品/主机，该产品可能有一些自己的特殊环境变量处理应该考虑，除了希望 Path 环境变量（那些包含多个值, 分号分隔）实际上包含“路径”作为其名称的一部分，您可能会错过一些东西（当然，除非这是 Windows 在内部处理这些环境变量的方式，这可能是，我没有深入挖掘兔子洞）。

这是我想出的一个脚本，它与我认为您可以在当前 PowerShell 会话中正确更新环境变量而无需重新启动它一样接近：

```
# Get all environment variables for the current Process, as well as System and User environment variable values
$processValues = [Environment]::GetEnvironmentVariables('Process')
$machineValues = [Environment]::GetEnvironmentVariables('Machine')
$userValues    = [Environment]::GetEnvironmentVariables('User')
# Identify the entire list of environment variable names first
$envVarNames = ($machineValues.Keys + $userValues.Keys + 'PSModulePath') | Sort-Object | Select-Object -Unique
# Now process all of those keys, updating what exists and adding what is new
foreach ($envVarName in $envVarNames) {
    if ($envVarName -eq 'PSModulePath') {
        $pieces = @()
        if ($PSVersionTable.PSVersion -ge [System.Version]'4.0') {
            $pieces += Join-Path -Path ${env:ProgramFiles} -ChildPath 'WindowsPowerShell\Modules'
        }
        if (-not $userValues.ContainsKey($envVarName)) {
            $pieces += Join-Path -Path ([Environment]::GetFolderPath('Documents')) -ChildPath 'WindowsPowerShell\Modules'
        } else {
            $pieces += $userValues[$envVarName] -split ';'
        }
        if ($machineValues.ContainsKey($envVarName)) {
            $pieces += $machineValues[$envVarName] -split ';'
        }
        [Environment]::SetEnvironmentVariable($envVarName,($pieces -join ';'),'Process')
    } elseif ($envVarName -match 'path') {
        $pieces = @()
        if ($userValues.ContainsKey($envVarName)) {
            $pieces += $userValues[$envVarName] -split ';'
        }
        if ($machineValues.ContainsKey($envVarName)) {
            $pieces += $machineValues[$envVarName] -split ';'
        }
        [Environment]::SetEnvironmentVariable($envVarName,($pieces -join ';'),'Process')
    } elseif ($userValues.ContainsKey($envVarName)) {
        [Environment]::SetEnvironmentVariable($envVarName,$userValue[$envVarName],'Process')
    } elseif ($machineValues.ContainsKey($envVarName)) {
        [Environment]::SetEnvironmentVariable($envVarName,$machineValue[$envVarName],'Process')
    }
}
# Lastly remove the environment variables that no longer exist
foreach ($envVarName in $processValues.Keys | Where-Object {$envVarNames -notcontains $_}) {
    Remove-Item -LiteralPath "env:${envVarName}"
} 
```

请注意，这在很大程度上未经测试，但原理是合理的，并且它基于我过去在该领域所做的工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-29T18:26:16.610

谢谢@Joey 的回答（我标记为正确的:)）请注意，鉴于我想在那一刻根据注册表刷新所有变量，我摆脱了 if-else 子句......

我仔细检查了注册表变量位置，根据[Where are environment variables stored in registry?](https://stackoverflow.com/questions/573817/where-are-environment-variables-stored-in-registry)

此处使用的片段只是为了完整性....

```
function Update-Environment {   
    $locations = 'HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\Environment',
                 'HKCU:\Environment'

    $locations | ForEach-Object {   
        $k = Get-Item $_
        $k.GetValueNames() | ForEach-Object {
            $name  = $_
            $value = $k.GetValue($_)
            Set-Item -Path Env:\$name -Value $value
        }
    }
} 
```**

# linux - 期望 telnet 脚本：无法处理“----More---”字符串

> ID：14381653
> 
> 赞同：0
> 
> 时间：2013-01-17T14:48:28.260
> 
> 标签：linux, tcl, telnet, expect

我是期望脚本的新手。我正在尝试使用自动 telnet 脚本备份华为路由器配置。我被困在处理一个字符串“---More---”，就像按任意键继续我想发送“\n”

我的路由器输出如下：

```
--------------------------------
-----------------------
voice-vlan mac-address 00d0-1e00-0000 mask ffff-ff00-0000 description Pingtel phone
voice-vlan mac-address 00e0-7500-0000 mask ffff-ff00-0000 description Polycom phone
voice-vlan mac-address 00e0-bb00-0000 mask ffff-ff00-0000 description 3com phone
#
---- More ---- 
```

我的脚本是：

```
#!/usr/bin/expect
spawn telnet 192.168.xx.xx
expect "Username:"
send "username\n"
expect "Password:"
send "password\n"
expect ">"
# 'dis cur' is like cisco's 'show run'
send "dis cur\n"
expect "---- More ----"
send "\n"
interact 
```

在运行脚本终端时向我抛出此错误：

```
 bad flag "---- More ----": must be -glob, -regexp, -exact, -notransfer, -nocase, -i,      -indices, -iread, -timestamp, -timeout, -nobrace, or --
while executing
"expect "---- More ----"" 
```

任何人都可以帮助解决这个问题吗？...在​​此先感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:27:56.090

快速回答：放在`-ex`以 a 开头的字符串前面，`-`以便期望代码可以确定它不是一个选项。

但是，除了快速回答之外，您还应该做一个更复杂的版本：

```
expect {
    ">" {
        # Found prompt
    }
    -ex "---- More ----" {
        send "\n"    ;# Or maybe \r?
        exp_continue ;# Keep on expecting please
    }
}
interact 
```

这具有允许寻呼机输出出现零次、一次或多次的优点。

# c# - 递归地从文件夹层次结构中的每个文件夹中查找最新文件。

> ID：14381656
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:48:35.800
> 
> 标签：c#

我需要从我的根文件夹下的每个文件夹中找到最近创建的文件。以下代码返回根文件夹中的所有文件：

```
list<string> capturesList = SafeFileEnumerator.EnumerateFiles(pathToSearch, "*.pcap", SearchOption.AllDirectories).ToList(); 
```

该类`SafeFileEnumerator`仅搜索具有权限的位置：

```
public static class SafeFileEnumerator
{
    public static IEnumerable<string> EnumerateDirectories(string parentDirectory, string searchPattern, SearchOption searchOpt)
    {
        try
        {
            var directories = Enumerable.Empty<string>();
            if (searchOpt == SearchOption.AllDirectories)
            {
                directories = Directory.EnumerateDirectories(parentDirectory).SelectMany(x => EnumerateDirectories(x, searchPattern, searchOpt));
            }
            return directories.Concat(Directory.EnumerateDirectories(parentDirectory, searchPattern));
        }
        catch (UnauthorizedAccessException)
        {
            return Enumerable.Empty<string>();
        }
    }

    public static IEnumerable<string> EnumerateFiles(string path, string searchPattern, SearchOption searchOpt)
    {
        try
        {
            var dirFiles = Enumerable.Empty<string>();
            if (searchOpt == SearchOption.AllDirectories)
            {
                dirFiles = Directory.EnumerateDirectories(path).SelectMany(x => EnumerateFiles(x, searchPattern, searchOpt));
            }

            return dirFiles.Concat(Directory.EnumerateFiles(path, searchPattern));
        }
        catch (UnauthorizedAccessException)
        {
            return Enumerable.Empty<string>();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:06:27.603

要从根文件夹下的每个文件夹中获取最近创建的文件，您可以确定：

```
if(Directory.Exists("YourPath"))
foreach (string _tempFiles in Directory.GetDirectories("YourPath","*", SearchOption.AllDirectories)
                       .Select(directory => Directory.GetFiles(directory, "*.*" )
                       .OrderByDescending(File.GetLastWriteTime)
                       .FirstOrDefault()))
{
 MessageBox.Show(_tempFiles);
} 
```

此代码仅检查根文件夹中的文件夹

# java - 计算组合的最小尺寸

> ID：14381657
> 
> 赞同：1
> 
> 时间：2013-01-17T14:48:39.777
> 
> 标签：java, swt

我需要计算 a 的最小或默认大小`Composite`，它可以在不裁剪的情况下显示所有组件。

**我似乎只找到**了计算`Composite`. 这意味着一个`Table`或其他滚动复合将具有显示完整内容而不滚动的首选大小。将`ScrolledComposite`立即进入滚动模式，这不是我想要的。

`GridLayout`设法通过将`GridData`提示视为最小宽度/高度来做到这一点，从而允许抓住任何额外的可用空间。

问题与此有关：[SWT - ScrolledComposite 内的多行文本字段的计算大小](https://stackoverflow.com/questions/12834482/swt-computingsize-for-multi-line-textfield-inside-scrolledcomposite)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:53:24.063

[`Control#computeSize(int, int)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#computeSize(int,%20int))应该是您正在搜索的内容：

```
Point size = comp.computeSize(SWT.DEFAULT, SWT.DEFAULT);
System.out.println(size.x + " " + size.y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:02:51.583

我设法找到了解决方案。

关键是两个不同的东西：

1.  确保在内容（如果添加了 CHILDREN 并调用 layout()）和`ScrolledComposite`（如果从其子项外部调整大小）上设置调整大小侦听器
2.  确保同时设置`GridData.grab`和`GridData.hint`。提示将确保复合材料在您这样做时采用此大小`computeSize()`，而 grab 确保它将抓住任何可用的额外空间。

代码示例如下：

```
public static void main (String [] args) {
  Display display = new Display ();
  Shell shell = new Shell(display);
  ScrolledComposite sc = new ScrolledComposite(shell, SWT.NONE);
  Composite foo = new Composite(sc, SWT.NONE);
  foo.setLayout(new GridLayout(1, false));
  StyledText text = new StyledText(foo, SWT.NONE);
  text.setText("Ipsum dolor etc... \n etc... \n etc....");
  GridDataFactory.fillDefaults().grab(true, true).hint(40, 40).applyTo(text);

  Listener l = new Listener() {
     public void handleEvent(Event e) {
         Point size = sc.getSize();
         Point cUnrestrainedSize = content.computeSize(SWT.DEFAULT, SWT.DEFAULT);
         if(size.y >= cUnrestrainedSize.y && size.x >= cUnrestrainedSize.x) {
           content.setSize(size);
           return;
         }
         // does not fit
         Rectangle hostRect = getBounds();
         int border = getBorderWidth();
         hostRect.width -= 2*border;
         hostRect.width -= getVerticalBar().getSize().x;
         hostRect.height -= 2*border;
         hostRect.height -= getHorizontalBar().getSize().y;
         c.setSize(
           Math.max(cUnrestrainedSize.x, hostRect.width),
           Math.max(cUnrestrainedSize.y, hostRect.height)
         );
     }
  }
  sc.addListener(SWT.Resize, l);
  foo.addListener(SWT.Resize, l);

  shell.open ();
  while (!shell.isDisposed ()) {
    if (!display.readAndDispatch ()) display.sleep ();
  }
  display.dispose ();
} 
```

# java - 比较两个属性文件的 Ant 任务

> ID：14381660
> 
> 赞同：0
> 
> 时间：2013-01-17T14:48:47.583
> 
> 标签：java, ant, file-comparison

有谁知道将比较两个（Java）属性文件的 Ant 任务？我找不到任何东西，但我想在我开始实施它之前确定一下。

*   **输入**：两个属性文件
*   **输出**：在一个文件中但不在另一个文件中的属性键列表。

只是要明确一点：它应该执行属性文件语法感知比较，比较键的存在，但忽略值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-04T12:23:31.253

最好的选择是使用[PropDiff](http://www.baclace.net/java/prop_diff/)实用程序。它具有比较、组合和交叉 Java 属性文件的选项。它是开源的，因此您可以根据需要对其进行修改。

这是 PropDiff 的[文档](http://www.baclace.net/java/prop_diff/PropDiff.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T20:12:04.180

您可以尝试将[groovy ant 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)与[java-diff-utils](http://code.google.com/p/java-diff-utils/wiki/SampleUsage)库结合起来

# 例子

```
├── build.xml
├── file1.properties
└── file2.properties 
```

运行构建会产生以下输出：

```
diff:
   [groovy] [DeleteDelta, position: 1, lines: [two=2]]
   [groovy] [InsertDelta, position: 3, lines: [threeandhalf=3.5]]
   [groovy] [ChangeDelta, position: 4, lines: [five=5] to [five=55555]] 
```

## 构建.xml

```
<project name="demo" default="diff" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:cachepath pathid="build.path">
            <dependency org="org.codehaus.groovy" name="groovy-all" rev="2.1.0-rc-1" conf="default"/>
            <dependency org="com.googlecode.java-diff-utils" name="diffutils" rev="1.2.1" conf="default"/>
        </ivy:cachepath>
    </target>

    <target name="diff" depends="resolve">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

        <groovy>
            import difflib.*

            def original = new File("file1.properties").readLines()
            def revised  = new File("file2.properties").readLines()

            Patch patch = DiffUtils.diff(original, revised)

            patch.getDeltas().each {
                println it
            }
        </groovy>
    </target>

</project> 
```

笔记：

*   使用[Apache ivy](http://ant.apache.org/ivy/)下载依赖项

## 文件1.properties

```
one=1
two=2
three=3
four=4
five=5 
```

## 文件2.properties

```
one=1
three=3
threeandhalf=3.5
four=4
five=55555 
```

# 修订示例

返回第二个文件中缺少的第一个文件中的属性：

```
diff:
   [groovy] Missing keys: [two] 
```

## 构建.xml

```
<project name="demo" default="diff" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:cachepath pathid="build.path">
            <dependency org="org.codehaus.groovy" name="groovy-all" rev="2.1.0-rc-1" conf="default"/>
        </ivy:cachepath>
    </target>

    <target name="diff" depends="resolve">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

        <groovy>
            def source = new Properties()
            def target = new Properties()

            new File("file1.properties").withInputStream { source.load(it) }
            new File("file2.properties").withInputStream { target.load(it) }

            def diff = source.findResults { k,v ->
                k in target ? null : k
            }

            println "Missing keys: ${diff}"
        </groovy>
    </target>

</project> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T12:24:42.147

这是另一种只需要 ant-contrib 库的方法：

```
<target name="checkPropertyFiles">
    <antcall target="ensureTwoFilesHaveSameProperties">
        <param name="file1" value="file1.properties"/>
        <param name="file2" value="file2.properties"/>
    </antcall>
</target>

<target name="ensureTwoFilesHaveSameProperties">
    <loadproperties srcFile="${file1}" prefix="prefixfile1"/>
    <loadproperties srcFile="${file2}" prefix="prefixfile2"/>

    <propertyselector property="file1.list" delimiter="," match="prefixfile1\.(.+)" select="\1"/>
    <propertyselector property="file2.list" delimiter="," match="prefixfile2\.(.+)" select="\1"/>

    <for list="${file1.list}" param="file1.property">
        <sequential>
            <if>
                <not>
                    <matches pattern=",@{file1.property}," string=",${file2.list}," />
                </not>
                <then>
                    <property name="error.encountered" value="true"/>
                    <echo message="Property @{file1.property} is present in ${file1} but not in ${file2}"/>
                </then>
            </if>
        </sequential>
    </for>
    <for list="${file2.list}" param="file2.property">
        <sequential>
            <if>
                <not>
                    <matches pattern=",@{file2.property}," string=",${file1.list}," />
                </not>
                <then>
                    <property name="error.encountered" value="true"/>
                    <echo message="Property @{file2.property} is present in ${file2} but not in ${file1}"/>
                </then>
            </if>
        </sequential>
    </for>

    <fail message="Property files do not have the same set of keys.">
        <condition>
            <isset property="error.encountered"/>
        </condition>
    </fail>

    <echo message="OK: ${file1} has same properties as ${file2}"/>
</target> 
```

# javascript - Javascript匹配正则表达式的JShint未转义'^'错误

> ID：14381665
> 
> 赞同：2
> 
> 时间：2013-01-17T14:48:57.157
> 
> 标签：javascript, regex, jshint

> **可能重复：**
> [有没有办法让 JSLint 对这个正则表达式感到满意？](https://stackoverflow.com/questions/3757697/is-there-a-way-to-make-jslint-happy-with-this-regex)

我只是在使用 JSHint 清理我的代码，并且它为这段代码抛出了一个错误。

```
if (password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,£,(,)]/)) { 
       score++;
    } 
```

错误是`Unescaped '^'.`

基本上我想为更复杂的密码提供更多积分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:50:25.460

在正则表达式中，`^`字符表示**NOT**，因此出于某种原因（可能是为了安全起见）JSHint 要求您对其进行转义（破折号也是如此`-`）：

```
/[!@#$%\^&*?_~\-£(),.]/ 
```

另外您应该注意，在集合中不需要用逗号分隔符号。

[*您可以在MDN*](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-character-set)中阅读有关正则语法的更多信息。

# c# - WSE012：输入不是有效的 SOAP 消息，因为缺少以下信息：操作

> ID：14381667
> 
> 赞同：2
> 
> 时间：2013-01-17T14:49:04.003
> 
> 标签：c#, wcf, faultexception

我们正在尝试访问一个 web 服务（我相信它也是使用 WCF 编码的，但我无法控制它）并且我得到一个异常：

> [System.ServiceModel.FaultException](http://msdn.microsoft.com/en-us/library/system.servicemodel.faultexception(v=vs.100).aspx)：WSE012：输入不是有效的 SOAP 消息，因为缺少以下信息：操作。
> 服务器堆栈跟踪：

```
at System.ServiceModel.Channels.ServiceChannel.HandleReply(
   ProxyOperationRuntime operation, ProxyRpc& rpc)
at System.ServiceModel.Channels.ServiceChannel.Call(String action,
   Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs,
   TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(
   IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

> 在 [0] 处重新抛出异常：

```
at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(
   IMessage reqMsg, IMessage retMsg)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(
   MessageData& msgData, Int32 type)
at ClientName.ProjectName.Services.ServiceName.ServiceNameSoap.CallServiceName(
   Request request)
at ClientName.ProjectName.Scheduler.ThirdPartyName.ProcessServiceName.Execute(
   Object state) in ...\ProcessServiceName.cs:line 65 
```

调用代码`ProcessServiceName.Execute`如下：

```
Request serviceRequest = request.BuildServiceRequest();
Result result = client.CallServiceName(serviceRequest);
LogServiceErrors(db, request.ServiceNameRequestId, result.errors); 
```

异常来自第二行，它直接调用服务引用自动生成的 WCF 代码，调用; 该方法只获取数据库对象并将其转换为 Web 服务所需的对象。[`System.ServiceModel.ClientBase<T>. Channel`](http://msdn.microsoft.com/en-us/library/aa344730(v=vs.100).aspx)`.CallServiceName(request)``BuildServiceRequest`

`App.config`（这在 Windows 服务中调用）的相关部分内容如下：

```
<system.serviceModel>
   <bindings>
      <webHttpBinding>
         <binding name="webBinding">
         </binding>
      </webHttpBinding>
      <wsHttpBinding>
         <binding name="ThirdPartySoap" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00"
          sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false"
          hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288"
          maxReceivedMessageSize="65536" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true">
            <readerQuotas maxDepth="32" maxStringContentLength="8192"
             maxArrayLength="16384" maxBytesPerRead="4096"
             maxNameTableCharCount="16384"/>
            <security mode="Transport">
               <transport clientCredentialType="Basic" proxyCredentialType="None"
                realm="www.serviceprovider.com"/>
               <message clientCredentialType="UserName"
                algorithmSuite="Default"/>
            </security>
         </binding>
      </wsHttpBinding>
   </bindings>
   <client>
      <endpoint name="ServiceNameSoap"
       address="https://www.serviceprovider.com/ServiceName.asmx"
       binding="wsHttpBinding" bindingConfiguration="ThirdPartySoap"
       contract="ServiceName.ServiceNameSoap"/>
   </client>
</system.serviceModel> 
```

鉴于执行实际 web 服务工作的所有代码都来自 WCF，我不太明白问题出在哪里，但大概我需要一些稍微不同的东西`App.config`来防止它。

看过[Google](https://www.google.co.uk/search?q=FaultException%3A+WSE012%3A+)后，我没有找到任何帮助。在 StackOverflow 上，[2011 年 9 月的这个未回答的 WCF 问题](https://stackoverflow.com/q/7570610/205245)没有任何帮助；自定义绑定（[2009 年 11 月的回答](https://stackoverflow.com/a/1676838/205245)和[关于 WSE 的链接](http://social.msdn.microsoft.com/Forums/en/wcf/thread/256455d7-079c-4f09-84eb-202c121a2664)）没有帮助（我几乎不理解它们），[2009 年 11 月的论坛回答和 2009 年](http://www.soapui.org/forum/viewtopic.php?t=2672)10[月的 ColdFusion 事情](http://forums.adobe.com/message/2326727)都无关。我看到的所有其他谷歌点击都是这些链接的副本。

*任何*帮助将不胜感激！

* * *

## 编辑以添加更多细节

[Wiktor Zychla](https://stackoverflow.com/users/941240/wiktor-zychla)正确地指出问题可能（理论上）出在代理类中。但是，这些类是完全未经自动生成的类编辑的；例如：

```
using System.CodeDom.Compiler;
using System.ServiceModel;
using System.ServiceModel.Channels;

namespace ClientName.ProjectName.Services.ServiceName
{
   [GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
   public interface ServiceNameSoapChannel : ServiceNameSoap, IClientChannel {}

   [System.Diagnostics.DebuggerStepThroughAttribute()]
   [GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
   public partial class ServiceNameSoapClient : ClientBase<ServiceNameSoap>,
     ServiceNameSoap
   {
     public ServiceNameSoapClient() { }

     public ServiceNameSoapClient(string endpointConfigurationName) : 
       base(endpointConfigurationName) { }

     public ServiceNameSoapClient(string endpointConfigurationName,
       string remoteAddress) :
       base(endpointConfigurationName, remoteAddress) { }

     public ServiceNameSoapClient(string endpointConfigurationName,
       EndpointAddress remoteAddress) :
       base(endpointConfigurationName, remoteAddress) { }

     public ServiceNameSoapClient(Binding binding,
       EndpointAddress remoteAddress) : base(binding, remoteAddress) { }

     public Result CallServiceName(Request request)
     { return base.Channel.CallServiceName(request); }
   }
} 
```

所有其他代理类同样未从自动生成的代码中编辑（我在此处为空白和命名空间优化进行了编辑，以便它更适合 StackOverflow 中的屏幕；我为其添加`using`语句的三个命名空间在所有方面都是完全合格的类引用，就像我`ClientName.ProjectName.Services.ServiceName`在这些示例中编辑的命名空间一样。

添加[WCF Message Logging](http://msdn.microsoft.com/en-us/library/ms730064(v=vs.100).aspx)后，我在消息日志中得到以下信息。（这是来自与上面代码不同的服务调用，但抛出相同的异常，部分原因是此服务调用更简单，部分原因是由于某种原因并非所有服务调用都被记录。我所做的唯一编辑是错误信息清晰易读，无需水平滚动。）

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
  <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
    <EventID>0</EventID>
    <Type>3</Type>
    <SubType Name="Information">0</SubType>
    <Level>8</Level>
    <TimeCreated SystemTime="2013-01-18T12:00:04.7166250Z" />
    <Source Name="System.ServiceModel.MessageLogging" />
    <Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
    <Execution ProcessName="ClientName.ProjectName.Scheduler" ProcessID="8600" ThreadID="10" />
    <Channel/>
    <Computer>MachineNameRedacted</Computer>
  </System>
  <ApplicationData>
    <TraceData>
      <DataItem>
        <MessageLogTraceRecord Time="2013-01-18T12:00:04.7166250+00:00" Source="TransportSend" Type="System.ServiceModel.Dispatcher.OperationFormatter+OperationFormatterMessage" xmlns="http://schemas.microsoft.com/2004/06/ServiceModel/Management/MessageTrace">
          <s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing">
            <s:Header>
              <a:Action s:mustUnderstand="1">http://www.serviceprovider.com/RedactedActionName</a:Action>
              <a:MessageID>urn:uuid:395d6394-5f4b-4954-8df0-8fb82d17072a</a:MessageID>
              <a:ReplyTo>
                <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
              </a:ReplyTo>
              <a:To s:mustUnderstand="1">https://www.serviceprovider.com/ServiceName.asmx</a:To>
            </s:Header>
            <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
              <RedactedActionName xmlns="http://www.serviceprovider.com">
                <brandId>2</brandId>
              </RedactedActionName>
            </s:Body>
          </s:Envelope>
        </MessageLogTraceRecord>
      </DataItem>
    </TraceData>
  </ApplicationData>
</E2ETraceEvent>
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
  <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
    <EventID>0</EventID>
    <Type>3</Type>
    <SubType Name="Information">0</SubType>
    <Level>8</Level>
    <TimeCreated SystemTime="2013-01-18T12:00:04.7635000Z" />
    <Source Name="System.ServiceModel.MessageLogging" />
    <Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
    <Execution ProcessName="ClientName.ProjectName.Scheduler" ProcessID="8600" ThreadID="10" />
    <Channel/>
    <Computer>MachineNameRedacted</Computer>
  </System>
  <ApplicationData>
    <TraceData>
      <DataItem>
        <MessageLogTraceRecord Time="2013-01-18T12:00:04.7635000+00:00" Source="TransportReceive" Type="System.ServiceModel.Channels.BufferedMessage" xmlns="http://schemas.microsoft.com/2004/06/ServiceModel/Management/MessageTrace">
          <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing">
            <env:Header xmlns:env="http://www.w3.org/2003/05/soap-envelope">
              <wsa:Action>http://schemas.xmlsoap.org/ws/2004/08/addressing/fault</wsa:Action>
              <wsa:MessageID>urn:uuid:b72c6f30-8409-4b55-8c79-056d82f990a5</wsa:MessageID>
              <wsa:To>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>
            </env:Header>
            <soap:Body>
              <soap:Fault>
                <soap:Code>
                  <soap:Value>soap:Sender</soap:Value>
                </soap:Code>
                <soap:Reason>
                  <soap:Text xml:lang="en">
                    WSE012: The input was not a valid SOAP message because
                    the following information is missing: action.
                  </soap:Text>
                </soap:Reason>
              </soap:Fault>
            </soap:Body>
          </soap:Envelope>
        </MessageLogTraceRecord>
      </DataItem>
    </TraceData>
  </ApplicationData> 
```

## 更多细节：ServiceNameSoap 接口

正如[Wiktor Zychla](https://stackoverflow.com/users/941240/wiktor-zychla)所要求的，这里是`ServiceNameSoap`接口声明，来自自动生成的代码，再次编辑只是为了更好地适应屏幕（因此是`using`）并编辑客户机密名称：

```
using System.ServiceModel;

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel","4.0.0.0")]
[ServiceContractAttribute(Namespace="https://www.serviceprovider.com/",
    ConfigurationName="ServiceName.ServiceNameSoap")]
public interface ServiceNameSoap
{
    [OperationContractAttribute(
        Action="https://www.serviceprovider.com/ServiceName",
        ReplyAction="*")]
    [XmlSerializerFormatAttribute(SupportFaults=true)]
    [ServiceKnownTypeAttribute(typeof(ClientRequest))]
    [return: MessageParameterAttribute(Name="result")]
    ClientName.ProjectName.Services.ServiceName.Result CallServiceName(
        ClientName.ProjectName.Services.ServiceName.Request request);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:50:15.297

*（与 OP 共同努力）*

我刚刚看到您的服务暴露在 .asmx 端点上，这表明这不是 wcf 服务，而是旧的 asp.net 服务。与 wcf 相比，Asp.net Web 服务的配置选项非常有限，它们不支持 ws/web 绑定（仅支持基本的 http）。然后我的建议是切换到旧类型代理，使用 wsdl.exe 工具生成它。您不需要任何配置，也不能使用 wsHttpBinding，但至少您应该能够调用该服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:18:41.747

## 我们有一个赢家……</h2>

[Wiktor](https://stackoverflow.com/users/941240/wiktor-zychla)的评论使我查看了[WCF 和 WSE3.0 之间的 Interop](http://devlicio.us/blogs/ziemowit_skowronski/archive/2007/07/18/interoperability-between-wcf-and-wse-3-0.aspx)，并尝试通过覆盖使用[`MessageVersion.Soap12WSAddressingAugust2004`](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.messageversion.soap12wsaddressingaugust2004(v=vs.100).aspx)in a ，以便方法从：[`CustomBinding`](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.custombinding(v=vs.100).aspx)[`Binding.CreateBindingElements`](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.binding.createbindingelements(v=vs.100).aspx)`ClientName.ProjectName.Services. ServiceName.ServiceNameSoapClient.CallServiceName`

```
public Result CallServiceName(Request request)
{
    return base.Channel.CallServiceName(request);
} 
```

（如在原始问题中）到：

```
using System.ServiceModel.Channels;

public Result CallTestDrive(Request request)
{
    BindingElementCollection elements
        = base.Endpoint.Binding.CreateBindingElements();
    elements.Find<MessageEncodingBindingElement>().MessageVersion
        = MessageVersion.Soap12WSAddressingAugust2004;
    base.Endpoint.Binding = new CustomBinding(elements);

    return base.Channel.CallTestDrive(request);
} 
```

（代码改编自[Nicholas Allen 的 WCF 博客](http://blogs.msdn.com/b/drnick/)上[的修改服务绑定](http://blogs.msdn.com/b/drnick/archive/2006/11/16/modifying-the-binding-of-a-service.aspx)）。

这*似乎*解决了我的问题。最后。

非常感谢 Wiktor 和[John Saunders](https://stackoverflow.com/users/76337/john-saunders)；如果没有你的帮助，我不会做到这一点。

* * *

## 编辑：下面的另一个失败尝试

再次为了完整起见，我将包括我尝试过的另一种对我不起作用的途径。我还尝试按照[这个问题 WCF CustomBinding Configuration 的答案中](https://stackoverflow.com/a/830705/205245)的说明，在我的命名空间中创建一个自定义绑定类`ClientName.ProjectName.ServiceName`：

```
using System.ServiceModel;
using System.ServiceModel.Channels;

public class CustomWsHttpBinding : WSHttpBinding
{
    public override BindingElementCollection CreateBindingElements()
    {
        BindingElementCollection elements = base.CreateBindingElements();

        MessageEncodingBindingElement encodingElement
          = elements.Find<MessageEncodingBindingElement>();
        encodingElement.MessageVersion
          = MessageVersion.Soap12WSAddressingAugust2004;

        return elements;
    }
} 
```

并将其添加到配置中：

```
<system.serviceModel>
    <extensions>
        <bindingExtensions>
            <add name="CustomWsHttpBinding"
             type="ClientName.ProjectName.ServiceName.CustomWsHttpBinding, ClientName.ProjectName.ServiceName" />
        </bindingExtensions>
    </extensions>
    <bindings>
        <CustomWsHttpBinding>
            <binding name="ServiceNameSoap" closeTimeout="00:01:00"
             openTimeout="00:01:00" receiveTimeout="00:10:00"
             sendTimeout="00:01:00" allowCookies="false"
             bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
             maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
             messageEncoding="Text" textEncoding="utf-8"
             useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192"
                 maxArrayLength="16384" maxBytesPerRead="4096"
                 maxNameTableCharCount="16384"/>
                <security mode="Transport">
                    <transport clientCredentialType="Basic"
                     proxyCredentialType="None" realm="www.serviceprovider.com"/>
                    <message clientCredentialType="UserName"
                     algorithmSuite="Default"/>
                </security>
            </binding>
        </CustomWsHttpBinding>
    </bindings>
    <!-- ... -->
</system.serviceModel> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-28T20:49:59.540

我知道这是 2 岁，但我想我会给出最简单的解决方案。我可能会重复上述答案。诀窍是要认识到我们预先接受 ws-* 的老式 asmx 服务。WS-Addressing 功能有 2 个版本（可能更多） - 2005 年 8 月和有问题的 2004 年 8 月。您可以在 SOAPUI 中看到这些版本，您必须在测试 .asmx 服务时手动将 WS-A 版本更改为“200408”。所做的只是将 ws-addressing 标头从以下位置更改：

> `<soap:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">`

至

> `<soap:Header xmlns:wsa="http://www.w3.org/2004/08/addressing">`

所以问题是，你将如何在 WCF 中做到这一点？简单地说，如上所述，不使用 wsHttpBinding 而是使用自定义绑定和设置消息版本。没有进一步的再见，相关的 WebConfig：

> `<system.serviceModel> <client> <endpoint address="http://localhost/some_old_school_garbage_service/adapterws.asmx" binding="customBinding" bindingConfiguration="AdapterWSSoap" contract="AdapterWS.AdapterWSSoap" name="LodestarASMX" /> </client> <bindings> <customBinding> <binding name="AdapterWSSoap" > <security authenticationMode="UserNameOverTransport" allowInsecureTransport="True"></security> <textMessageEncoding messageVersion="Soap12WSAddressingAugust2004"></textMessageEncoding> <httpTransport/> </binding> </customBinding>`

# c# - 异步编程和循环等待

> ID：14381668
> 
> 赞同：8
> 
> 时间：2013-01-17T14:49:09.570
> 
> 标签：c#, .net, multithreading, asynchronous, async-await

我开始学习 C# 5 和 .Net 4.5 中的异步编程，但有些东西我不明白。

```
private static int count;

public static void Main()
{
    LoopTest();

    Console.ReadKey(false);
}

static async void LoopTest()
{
    count = 0;

    for (var index = 0; index < 10; ++index)
    {
        Console.WriteLine( "({0}) In Loop before await, Index {1}, Thread: {2}", count++, index, Thread.CurrentThread.ManagedThreadId);
        await Task.Factory.StartNew(() => Thread.Sleep(10));
    }
} 
```

结果是：

```
 (0) In Loop before await, Index 0, Thread: 9  
 (1) In Loop before await, Index 1, Thread: 10    
 (2) In Loop before await, Index 2, Thread: 11   
 (3) In Loop before await, Index 3, Thread: 10  
 (4) In Loop before await, Index 4, Thread: 11  
 (5) In Loop before await, Index 5, Thread: 10  
 (6) In Loop before await, Index 6, Thread: 12  
 (7) In Loop before await, Index 7, Thread: 11  
 (8) In Loop before await, Index 8, Thread: 10  
 (9) In Loop before await, Index 9, Thread: 12 
```

那么是否有不同的线程访问同一个循环？索引变量是否存在竞争条件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T15:01:21.967

不，没有竞争条件。您启动了一项新任务，该任务将在后台运行，但您的代码在该任务完成之前不会继续执行，因此您可以确保您的代码在任何时候都只会在一个线程中执行。

但是，因为这是一个控制台应用程序，所以没有当前的`SyncronizationContext`. （与 Winform、WPF、ASP、Silverlight 等应用程序相反。）这意味着任何`await`调用的延续都将在线程池中运行，而不是在调用线程中。所以是的，您在循环的每次迭代中都在一个线程池线程中运行，并且每次都可能是一个不同的线程，但是您可以确定，除了您在新任务中放入的任何内容之外，您将“在开始处理下一个线程之前，在任何给定线程上运行“完成”，这确保在任何给定时间只有一个线程运行代码（这意味着没有竞争条件）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T14:54:50.990

你在做什么并不是真正的异步

```
await Task.Factory.StartNew(() => Thread.Sleep(10)); 
```

这将创建一个任务，然后等待该任务完成。您也可以在这里调用 Thread.Sleep(10)。

更合适的方法是：

```
Task myTask = Task.Factory.StartNew(() => Thread.Sleep(10));
... do stuff here ...
await myTask; // Now wait for the task to complete 
```

如果你想在一个循环中做一些任务，你应该看看`Parallel.Foreach()`方法。

# android - 带有 AsyncTask 的服务每 X 次执行一次请求

> ID：14381672
> 
> 赞同：1
> 
> 时间：2013-01-17T14:49:15.040
> 
> 标签：android, android-asynctask, android-service

我想放心，我这样做是最佳实践方式：
我有一个列表，服务器上的顺序正在改变，因此，我希望每 20-30 秒一次。执行请求以查看订单是否有任何更改。所以，我创建了一个`Service`绑定到 的`Activity`，`ListView`以及每 20-30 秒的服务。使用`AsyncTask`.
我选择使用 a 执行它是`Service`因为我希望列表不断更新，即使应用程序在后台，`AsyncTask`也是因为我不希望它在主线程上执行。

这是正确的方法吗？

提前谢谢你，
丹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:14:09.303

它会起作用，但你的应用会做很多不必要的工作。这会影响电池寿命。除此之外，根据文档，如果您使用设备无线电，它至少可以保持全功率 20 秒，这对电池也没有好处。您有以下选择：

1.  使用[谷歌云消息](http://developer.android.com/google/gcm/index.html)。它将允许您仅在确实需要时执行更新。
2.  如果您不想或不能使用 GCM，请按照[本指南](http://developer.android.com/training/efficient-downloads/efficient-network-access.html)优化网络访问。从增加更新间隔开始（至少到 4 分钟）。

# eclipse - 如何在 tycho eclipse-repository 的 category.xml 中正确指定 eclipse-plugins？

> ID：14381676
> 
> 赞同：3
> 
> 时间：2013-01-17T14:49:18.730
> 
> 标签：eclipse, maven, eclipse-pde, tycho, p2

我想在 tycho 构建期间创建一些 eclipse 插件的 p2 存储库。

我的`category.xml`样子是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<site>
    <feature url="plugins/<artifact-id>-1.0.0.jar"
        id="<artifact-id>" version="1.0.0.qualifier">
        <category name="cat" />
    </feature>
    <category-def name="cat" label="example category" />
</site> 
```

`<artifact-id>`应该包含在 p2 存储库中的 eclipse-plugin 的 maven 工件 id 在哪里。

执行 Maven 构建时，我收到以下错误消息：

```
[ERROR] Internal error: java.lang.RuntimeException: "No solution found
because the problem is unsatisfiable.": ["Unable to satisfy dependency
from  <repository-module-artifact-id> 1.0.0.qualifier to
<artifact-id>.feature.group[1.0.0,1.0.1).", "No
solution found because the problem is unsatisfiable."] 
```

我已将 eclipse-plugin 包含在存储库模块的依赖项中。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:01:36.770

到目前为止，您只能引用 category.xml 中的功能。

最近有一个补丁允许在未来版本的 tycho 中引用单个包，请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=381377](https://bugs.eclipse.org/bugs/show_bug.cgi?id=381377)

# c# - OdbcDataReader 挂起长查询

> ID：14381680
> 
> 赞同：0
> 
> 时间：2013-01-17T14:49:31.697
> 
> 标签：c#

我正在尝试从 iSeries 数据库中提取数据并从数据中创建 Excel 报告。我正在使用 C# 和 EPPlus 库来执行此操作。以下是用于生成报告的代码：

```
queryString = @"SELECT oacspo, pldesc, obivdt, oainno, obitno, obitd1, obitd2, obqtsh, obaslp, oblnam
              FROM myLib.hshed 
              LEFT JOIN myLib.cusms 
                ON oacsno = cmcsno
              LEFT JOIN myLib.hsdet
                ON oahssq = obhssq
              LEFT JOIN myLib.itemctrl
                ON obitno = icitno
              LEFT JOIN myLib.plinesj
                ON icline = plcode
              WHERE (oaipdt BETWEEN ? AND ?) AND icdlcu = 'Y' AND oacsno = ?
              ORDER BY pldesc, oainno, obitno";
          command = new OdbcCommand(queryString, connection);
          command.CommandTimeout = 0;
          parameter = command.Parameters.Add("@DateStart", OdbcType.Int);
          parameter.Value = startDate;
          parameter = command.Parameters.Add("@DateEnd", OdbcType.Int);
          parameter.Value = endDate;
          parameter = command.Parameters.Add("@CustomerNo", OdbcType.Int);
          parameter.Value = custNo;
          OdbcDataReader readerRpt = command.ExecuteReader(); 
```

那个运行正常，但是当我在 WHERE 子句中再添加一个规范（以缩小到特定部门）时，我收到了一个错误：

```
WHERE (oaipdt BETWEEN ? AND ?) AND icdlcu = 'Y' AND oacsno = ? AND icline = 'O' 
```

> 错误：错误 [HY000] [IBM][iSeries Access ODBC 驱动程序][DB2 UDB]SQL0666 - SQL 查询超出指定的时间限制或存储限制。

我做了一些研究并将 CommandTimeout 属性更改为 0

```
command.CommandTimeout = 0; 
```

但结果程序只是在我执行该行时挂起

```
OdbcDataReader readerRpt = command.ExecuteReader(); 
```

没有很多数据（大约 1,000 行），所以我认为它没有超过存储限制。还是基于我可以在查询字符串中放入多少个字符？（这意味着我不能有很长的 SQL 语句）。

非常感谢有关如何使其发挥作用的一些指导。谢谢

# regex - Oracle 正则表达式中的高代理检测

> ID：14381686
> 
> 赞同：4
> 
> 时间：2013-01-17T14:49:40.513
> 
> 标签：regex, oracle, expression

我有一个从 NCLOB 列中提取文本并通过 XML 返回数据的 Web 服务。NCLOB 列是通过从文档中提取文本来填充的，因此有时会在 XML 中放置无效的 XML 字符，从而导致消费系统失败。

根据[W3C](http://www.w3.org/TR/REC-xml/#charsets)，有效字符的范围是：

```
#x9 | #xA | #xD | [#x20-#xD7FF] | [#xE000-#xFFFD] | [#x10000-#x10FFFF]
/* any Unicode character, excluding the surrogate blocks, FFFE, and FFFF. */ 
```

我们已经尝试了几种不同的 RegExp 模式，我们已经接近了，但我们还没有完全做到。这是我们最近的一次。除高代理项 (DB9B - DBFF) 外，所有无效字符都将被替换。

```
REGEXP_REPLACE(
    TEXT,
    '[^[:print:]' || chr(13) || chr(10) || ']|[' || UNISTR('\FFFE-\FFFF') || ']',
    '*') 
```

我们也试过这个，但没有一个替代品 (D800 - DFFE) 被替换。

```
REGEXP_REPLACE(REPLACE(TEXT, unistr('\0000'), ' '),
      '[' || unistr('\0001-\0008') || ']' 
  || '|[' || unistr('\000B-\000C') || ']'
  || '|[' || unistr('\000E-\001F') || ']'
  || '|[' || unistr('\D800-\DFFF') || ']' 
  || '|[' || unistr('\FFFE-\FFFF') || ']',' ') 
```

我们如何匹配高代理？任何想法或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:02:59.253

您可以编写自己的函数，因为`regex_replace`似乎不适用于高代理。这是一个示例（在 9.2 和 11.2 上测试）：

```
CREATE OR REPLACE FUNCTION replace_invalid(p_clob NCLOB) RETURN NCLOB IS
   l_result NCLOB;
   l_char   NVARCHAR2(1 char);
BEGIN
   FOR i IN 1 .. length(p_clob) LOOP
      l_char := substr(p_clob, i, 1);
      IF utl_raw.cast_to_binary_integer(utl_raw.cast_to_raw(l_char)) 
          BETWEEN to_number('DB9B', 'xxxx') AND to_number('DBFF', 'xxxx') THEN
         l_result := l_result || N'*';
      ELSE
         l_result := l_result || l_char;
      END IF;
   END LOOP;
   RETURN l_result;
END; 
```

它应该与大型 NCLOB 一起运行，这是一个 clob > 32k 个字符的示例：

```
SQL> DECLARE
  2     l_in  NCLOB;
  3     l_out NCLOB;
  4  BEGIN
  5     FOR i IN 1 .. to_number('DBFF', 'xxxx') LOOP
  6        l_in := l_in || nchr(i);
  7     END LOOP;
  8     dbms_output.put_line('l_in length:' || length(l_in));
  9     l_out := replace_invalid(l_in);
 10     dbms_output.put_line('l_out length:' || length(l_out));
 11     dbms_output.put_line('chars replaced:' 
 12                        || (length(l_out) - length(REPLACE(l_out, '*', ''))));
 13  END;
 14  /

l_in length:56319
l_out length:56319
chars replaced:102 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:06:33.407

您可以使用一系列调用 TRANSLATE。例如，

```
SELECT UNISTR('abc\00e5\00f1\00f6') Source FROM DUAL;
SELECT TRANSLATE(UNISTR('abc\00e5\00f1\00f6'), UNISTR('a\00e5\00f1'), 'a') Final FROM DUAL;

Source
------
abcåñö

Final
------
abcö 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/d41d8/6155)

# entity-framework - 删除1:N关系中的相关元素，不仅在外键中插入null

> ID：14381689
> 
> 赞同：1
> 
> 时间：2013-01-17T14:49:53.390
> 
> 标签：entity-framework, entity-framework-4

我有以下课程

```
public class ObjectA{
   private List<ObjectB> list;    
} 
```

`ObjectA`并且`ObjectB`是1：N的关系。

我想删除一些 ObjectB 实例，我使用：

```
 while (objectA.list.Any())
        objectA.list.Remove(objectA.list.First()); 
```

*   列表是关系表 -

    ```
    List<ObjectAobjectB> 
    ```

在数据库中，我将关系定义为可为空的外键，否则我会得到

> *操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。*

所以现在它是 Nullable 外键，
当我运行 sql 分析时，我得到以下信息：

```
exec sp_executesql N'update [Schem].[ClassB]
set [ClassAID] = null
where ([Id] = @0)
',N'@0 uniqueidentifier',@0='092CE959-370A-4785-AF4A-93A0E4952C59' 
```

它只是在关系中输入一个空值，而不是删除对象。
我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:10:00.060

`objectA.list.Remove(objectA.list.First());`正在删除关系，而不是实际实体。如果要从数据库中删除 objectB，则必须将它们从上下文中删除，如下所示：

```
foreach(var item in objectA.list.ToList())
    context.ObjectBs.Remove(item); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T15:33:04.743

我认为这是[Cascade Delete](http://blogs.msdn.com/b/alexj/archive/2009/08/19/tip-33-how-cascade-delete-really-works-in-ef.aspx)的情况。

我不确定，但我认为您可以设置级联删除（在您的应用程序和数据库中）以允许 EF 在级联上进行删除。

也许查看一些文档以找到如何做到这一点。似乎有很多关于SO的相关问题。

*   [例子](https://stackoverflow.com/questions/9005948/entity-framework-on-delete-cascade)
*   [示例 2](https://stackoverflow.com/questions/937140/delete-an-object-and-all-of-its-related-entities-in-entity-framework)
*   [示例 3](https://stackoverflow.com/questions/12038623/entity-framework-cascade-delete)

# c# - 从绑定到我的 XAML 中的事件调用我的 ViewModel 中的命令？

> ID：14381691
> 
> 赞同：1
> 
> 时间：2013-01-17T14:49:55.583
> 
> 标签：c#, .net, xaml, mvvm, mvvm-light

我目前正在编写一个 Windows 8 应用程序。我试图在我的 ViewModel 中调用一个方法。我希望在双击项目时调用此方法。我在我的 XAML 中定义了以下 DataTemplate 来执行此操作：

```
<DataTemplate x:Key="ItemTemplate">
                <StackPanel Orientation="Horizontal">
                    <Image Width="185" Height="185" Stretch="Fill" Source="{Binding Path=Image}" DoubleTapped="{Binding Path=MethodIWishToBindTo}" IsDoubleTapEnabled="True"  />
                    </StackPanel>
            </DataTemplate> 
```

当然，问题是我绑定到的错误消息`MethodIWishToBindTo`：

> “DoubleTapped”的值无效。事件值必须是文本

解决这个问题的最佳方法是什么？我可以在代码隐藏中调用该方法，但是该方法使用我的 ViewModel 中的一个属性，`"SelectedItemInList"`我不相信可以从后面的代码中访问该属性。

谁能给我一些关于这个问题的建议？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:53:45.213

您可以使用`Interactivity`和自定义行为来触发事件。这是一个主题涵盖示例的帖子： [MVVM-Light EventToCommand Behavior for CheckBox Checked/Unchecked in Silverlight](https://stackoverflow.com/questions/4647759/mvvm-light-eventtocommand-behavior-for-checkbox-checked-unchecked-in-silverlight)

MVVM-Light 确实让这变得更容易，但也有可能没有。

这是一个没有的例子：http: [//blog.roboblob.com/2010/01/26/binding-ui-events-from-view-to-commands-in-viewmodel-in-silverlight-4/](http://blog.roboblob.com/2010/01/26/binding-ui-events-from-view-to-commands-in-viewmodel-in-silverlight-4/)

# vb.net - VB.NET DrawImage 到某个位置

> ID：14381693
> 
> 赞同：1
> 
> 时间：2013-01-17T14:50:16.363
> 
> 标签：vb.net, image

我试图在 VB.NET 中重建 BitBlt 函数，它的效果还不错，但我的图像总是在目标位图的 0,0 上进行 blitted/绘制。

有人看到我的错误吗？

正如所见，我试图将源位图中的矩形 (0, 0, 50, 50) 复制到目标位图中的点 (25,25)，但它没有这样做：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    ' Make a Bitmap to hold the result.
    Dim bm As New Bitmap(Me.PictureBox1.Width, Me.PictureBox1.Height)

    CopyBitmap(Me.PictureBox1.Image, bm, 25, 25, 50, 50, 0, 0)

    Me.PictureBox2.Image = bm

End Sub

Public Sub CopyBitmap(ByRef uSource As Bitmap, ByRef uTarget As Bitmap, ByVal uDestX As Integer, ByVal uDestY As Integer, ByVal uSrcWidth As Integer, ByVal uSrcHeight As Integer, ByVal uSrcX As Integer, ByVal uSrcY As Integer)

    Dim nSrc As New Rectangle
    nSrc = Rectangle.FromLTRB(uSrcX, uSrcY, uSrcX + uSrcWidth, uSrcY + uSrcHeight)

    Dim nDst As New Rectangle
    nDst = Rectangle.FromLTRB(uDestX, uDestY, uDestX + uSrcWidth, uDestY + uSrcHeight)

    Using g As Graphics = Graphics.FromImage(uTarget)
        ' Draw the specified section of the source bitmap to the new one
        g.DrawImage(uSource, nSrc, nDst, GraphicsUnit.Pixel)
    End Using

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:23:54.703

Doh，我交换了 nSrc 和 nDst。DrawImage 中的第二个参数应该是 nDst，第三个参数应该是 nSrc。

# android - 为什么 Android 测试运行器报告“空测试套件”？

> ID：14381694
> 
> 赞同：98
> 
> 时间：2013-01-17T14:50:19.073
> 
> 标签：android, intellij-idea

我在这里撞墙，试图弄清楚为什么 IntelliJ/Android 报告“空测试套件”。我有一个带有两个 IntelliJ 模块的小项目（Eclipse 中的“项目”）。单元测试模块有自己的AndroidManifest.xml，我已经粘贴在底部了。我正在尝试运行`ActivityUnitTestCase`，因为测试将取决于`Context`-object。

主模块的包名是`nilzor.myapp`. 测试模块的包名是`nilzor.myapp.tests`

为什么测试运行器不检测`testBlah()`- 方法作为测试？

```
<?xml version="1.0" encoding="utf-8"?>
<!-- package name must be unique so suffix with "tests" so package loader doesn't ignore us -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="nilzor.myapp.tests"
          android:versionCode="1"
          android:versionName="1.0">
    <!-- We add an application tag here just so that we can indicate that
         this package needs to link against the android.test library,
         which is needed when building test cases. -->
    <application>
        <uses-library android:name="android.test.runner"/>
    </application>
    <!--
    This declares that this application uses the instrumentation test runner targeting
    the package of nilzor.myapp.  To run the tests use the command:
    "adb shell am instrument -w nilzor.myapp.tests/android.test.InstrumentationTestRunner"
    -->
    <instrumentation android:name="android.test.InstrumentationTestRunner"
                     android:targetPackage="nilzor.myapp"
                     android:label="Tests for nilzor.myapp"/>
</manifest> 
```

这是我的测试课：；

```
package nilzor.myapp.tests;

public class NilzorSomeTest<T extends Activity> extends ActivityUnitTestCase<T>{
    public NilzorSomeTest(Class<T> activityClass){
        super(activityClass);
    }

    @SmallTest
    public void testBlah(){
        assertEquals(1,1);
    }
} 
```

我已经阅读了[测试基础知识](http://developer.android.com/tools/testing/testing_android.html)、[活动测试文档](http://developer.android.com/tools/testing/activity_testing.html)，并尝试关注这个[Hello world 测试博客](http://wptrafficanalyzer.in/blog/android-testing-example-helloworld-with-activityunittestcase/)，即使它是针对 Eclipse 的。我无法让测试运行器找到并运行我的测试。我究竟做错了什么？

我仍然不确定的一些问题是：

1.  我需要在单元测试方法上方添加注释吗？
2.  我是否需要在该方法前面加上“test”，还是仅用于 JUnit 测试？
3.  我可以在 的子包中进行测试`nilzor.myapp.tests`吗？

但是这篇文章的主要问题是*为什么测试运行者没有检测到我的测试*？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-01-20T12:42:21.317

You need to provide default constructor for your test class, for example:

```
package nilzor.myapp.tests;

public class NilzorSomeTest extends ActivityUnitTestCase<ActivityYouWantToTest>{
    public NilzorSomeTest(){
        super(ActivityYouWantToTest.class);
    }

    @SmallTest
    public void testBlah(){
        assertEquals(1,1);
    }
} 
```

about your other questions:

1.  No. My tests still run without any annotations, but I guess it's a good practice to have them. It allows you to specify size of tests to run. See [What is the purpose of @SmallTest, @MediumTest, and @LargeTest annotations in Android?](https://stackoverflow.com/questions/4671923/what-is-the-purpose-of-smalltest-mediumtest-and-largetest-annotations-in-an) for more detail.

2.  Yes, you need "test" prefix. InteliJ gives "method never used" warning when there's no "test" prefix, and skips that method during test run.

3.  Yes. I have my tests organized into subpackages and it seems to be working well.

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-07-04T18:00:04.943

如果这种情况“突然”发生或“5 分钟前还在工作”，我的解决方案是进入运行/调试配置并删除“Android 测试”下的所有配置。有时，如果我重构被测类（例如通过移动到新包），这些配置会损坏。

[![在此处输入图像描述](../Images/7e5d5c535b8467ee4a58783fd8b92409.png)](https://i.stack.imgur.com/QI1Pw.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-09T18:55:51.273

以上都没有为我解决。有什么帮助是[按照说明进行操作](https://google.github.io/android-testing-support-library/docs/espresso/setup/index.html#running-tests)：

> 创建测试配置
> 
> 在 Android Studio 中：
> 
> *   打开*运行菜单*->*编辑配置*
> *   添加新的*Android 测试* 配置
> *   选择一个模块
> *   添加特定的仪表运行器：
> 
> ```
>   android.support.test.runner.AndroidJUnitRunner
> 
> ```
> 
> 运行新创建的配置。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-09-19T16:54:08.447

我有一个类似的问题。不知道为什么会发生这种情况，但我能够通过转到 Android Studio 中的“文件”>“无效缓存/重新启动”来修复它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-08T01:32:20.147

我在 Android Studio 2.3.1 上遇到了同样的问题，原来这只是 AS 的一个错误。在 2.2.1 版本上运行相同的测试效果很好。

如果你只在 Cannary 频道上运行 Android Studio，我建议你也安装一个稳定版本。[http://tools.android.com/tips/using-multiple-android-studio-versions](http://tools.android.com/tips/using-multiple-android-studio-versions)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-02-14T12:53:10.313

我不知道它是否对 Android Studio 有帮助，但我遇到了某种 Intellij-Gradle 冲突。通过“右键单击”测试文件并点击“编译文件 ...Test.java”来解决它。之后我可以再次运行单个测试。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-05-23T12:49:34.793

`gradle`在升级 android studio之前，我的测试运行良好。

除了向您的测试添加默认构造函数之外，您可能还需要执行其中一些操作才能让您的测试套件正常工作

在`src/`创建下`androidTest/java/<your-package-name>/test`。注意`androidTest`. 其他任何东西都`instrumentTest`行不通。

将此添加到`build.gradle`

```
sourceSets {
    testLocal {
        java.srcDir file('src/androidTest/java')
        resources.srcDir file('src/androidTest/resources')
    }
}

android{
    sourceSets {
       instrumentTest.setRoot('src/androidTest/')
    }
}

dependencies{
     testLocalCompile 'junit:junit:4.11'
}

task localTest(type: Test, dependsOn: assemble) {
    testClassesDir = sourceSets.testLocal.output.classesDir

    android.sourceSets.main.java.srcDirs.each { dir ->
        def buildDir = dir.getAbsolutePath().split('/')
        buildDir = (buildDir[0..(buildDir.length - 4)] + ['build', 'classes', 'debug']).join('/')

        sourceSets.testLocal.compileClasspath += files(buildDir)
        sourceSets.testLocal.runtimeClasspath += files(buildDir)
    }

    classpath = sourceSets.testLocal.runtimeClasspath
}

check.dependsOn localTest 
```

将此添加到`AndroidManifest.xml`

```
 <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:label="Tests for my packaged app"
        android:targetPackage="<my-package-name>.test" /> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-17T20:23:00.467

对于 Intellij 15，我通过以下方式解决了这个问题：

1.  打开“项目结构”设置
2.  单击“模块”（左侧）
3.  “来源”选项卡
    a. 右键单击您的源目录（通常是 src）单击“源”。
    湾。右键单击您的测试目录，单击“测试”
    c。右键单击您的输出目录单击“排除”
4.  转到“路径”选项
    卡 **单击“使用模块编译输出路径”单选按钮**
    b。为“输出路径”选择输出路径目录
    c。为“测试输出路径”选择您的测试路径目录
5.  点击确定

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-12-11T21:12:21.107

我遇到了这个问题，因为我的 build.gradle 中有这个：

```
testOptions {
    execution "ANDROID_TEST_ORCHESTRATOR"
} 
```

即使我没有使用 Android Test Orchestrator（一定是错误地从教程中复制的）。

评论出来为我解决了这个问题。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-04-19T08:22:02.713

显然，您需要一个**目标设备**来运行您的测试，因为它们是仪器化测试。由于某些原因，Android Studio**有时不会要求您指向此目标设备**，而只是提示“Empty Test Suite”消息。有不同的方法来解决这个问题，这里有一些：

*   运行您的主应用程序并选择目标设备或

*   转到运行（运行/运行.../编辑配置）配置并修改**部署目标选项**

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-12-24T19:03:47.913

就我而言，以前的答案都没有奏效。解决方案是简单地**将测试类移动到另一个包**中。

这发生在`androidTest/`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-06-14T11:25:11.340

在我的情况下，问题是由于我的代码中的错误引起的，实际上是在应用程序类中，所以没有打开目标活动并且测试输出打印

> 空测试套件错误

我试过直接从终端运行测试`adb shell am instrument -w -r -e package your.package -e debug false android.support.test.runner.AndroidJUnitRunner`。有了它，它会为您打印更多关于异常的信息。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-01T01:49:49.420

`@BeforeClass`我的问题是由我的测试用例的方法中引发的异常引起的。它是如何导致测试失败的——我只是通过检查 logcat 输出才发现它。

我修复了异常，突然我的测试开始运行了！

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-11-15T22:59:32.913

我有同样的问题，原因是我的测试类在类名末尾没有 Test ！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-02-07T20:51:31.297

今天遇到问题后 - 无法运行带有空套件错误的仪器化 android 测试 - 我发现了一个关于这个问题的 git 问题，感谢 Stephan Linzner，我可以运行测试。

tl; dr**您必须右键单击测试包而不是类才能使测试运行。**

参考：[https ://github.com/googlecodelabs/android-testing/issues/27#issuecomment-219074863](https://github.com/googlecodelabs/android-testing/issues/27#issuecomment-219074863)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-08-03T04:56:58.707

就我而言，我正在从事的项目有几个模块。我为这个错误找到的解决方案都没有帮助我，然后不知何故，我意识到如果我在 build.gradle 文件的两个文件中都添加了测试依赖项，测试就会神奇地开始工作。如果您的测试只存在于其中一个模块中，这并不重要，两个 gradle 文件都必须包含依赖项和 testInstrumentationRunner 值。

因此，如果像我一样，其他答案都没有帮助您，请尝试将这些行添加到每个模块的 build.gradle 文件中：

```
android {    
    ....
    defaultConfig {
        ...
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }  
} 
```

然后还添加：

```
dependencies {
    ...
    // Test
    androidTestCompile 'com.android.support:support-annotations:23.4.0'
    androidTestCompile 'com.android.support.test:runner:0.5'
    androidTestCompile 'com.android.support.test:rules:0.5'

} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-04-01T01:47:55.853

我只是重命名了文件并解决了问题。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-02-10T17:26:48.980

其他解决方案都不适合我，但我只需卸载现有的应用程序或测试套件，然后运行测试就可以让它工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-04-09T17:23:54.333

这篇文章帮助了我：[空测试套件](http://siemprepreguntando.blogspot.com/2013/07/running-tests-test-running-startedtest.html)

基本上我必须在我的 src 目录下创建一个包**——instrumentTest/java**，并将所有测试放在那里。然后我可以单独执行这些测试。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-07-24T02:16:28.843

当我错误地将注释标记为非模拟类变量时，我发生了这种情况`@Mock` 删除注释并且测试成功运行。这发生在 Android Studio 上的 Junit 4.5

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-09-24T05:04:58.147

以下是我在 Android Studio 突然决定停止运行/调试测试时所经历的调试步骤（男孩这种情况经常令人尴尬地发生！）：

*   构建：→ 重建项目
*   重新启动设备：重新启动您的设备/模拟器，然后重试
*   设备切换：如果您同时拥有普通手机和模拟器，请拔下其中一个并尝试仅使用其中一个设备运行它
*   Android Studio: File--> Invalidate caches and restart
*   活动监视器/任务管理器：按名称对进程进行排序，看看是否有一个无名进程正在消耗大量内存，这是一个来自 Android 工作室的“幽灵”进程，必须被杀死
*   git revert：尝试存储/恢复您的最新代码。有时会出现 Android Studio / gradle 遗漏的编译错误，它只会尝试运行不可编译的代码。
*   卸载然后重新安装 Android Studio。

当我遇到它们时，我会添加更多修复！

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-04-11T09:05:50.850

我有以下代码块

```
@get:Rule
lateinit var activityScenario: ActivityScenario<HomeActivity> 
```

因为我需要根据不同的测试用例在活动意图中传递不同的参数。当我删除`@get:Rule`测试开始再次工作。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-06-29T06:19:47.703

测试类可能会从编译中排除。在设置-编译器-排除中修复它。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-11-07T19:21:36.617

不是解决方案，而是一种解决方法，可以让您快速回到正轨：

1.  首先，找到一个有效的测试。我正在编写一个新测试，其中出现“空测试套件”错误。我进行了其他测试，它们照常工作。

2.  复制有效的测试文件。运行它以确保此副本与原始副本一样工作。

3.  删除正文并用新的测试代码替换它。

测试现在应该可以工作了。

我们花了大约两个小时试图找到原因，但无济于事。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-10-20T08:12:47.277

我什么也没做，经过半天的痛苦之后问题就消失了，我多次打开和关闭项目，手动运行每个班级测试，也许这解决了我的问题。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-11-24T17:55:59.140

就我而言，我在 中进行了仪器测试`androidTest/java/<package.name>/MyTestingClass`，但我已将当前的构建变体设置为“预生产”。这就是重点！如[Android Studio 文档](https://developer.android.com/studio/test/index.html#view_the_test_results)中所述：

> 默认情况下，所有测试都针对调试构建类型运行。

该消息`Class not found. Empty test suite.`一直出现，直到我这样做：

1.  将此行添加到我的*build.gradle*：

    ```
    android{
        [...]
        testBuildType "preproduction"
    } 
    ```

2.  同步梯度。
3.  删除我之前的测试配置，因为他们没有考虑到这个 Gradle 同步。

然后我再次执行了测试，这次它们运行得非常完美！！！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-07-18T14:37:14.120

接受的答案并没有解决我的问题。所以我决定复制`ExampleInstrumentedTest`默认在Android Studio中创建并运行没有任何问题，在复制过程中重命名它（复制后没有Refactor->Rename！）并将我的单元测试的内容粘贴到其中。之后错误消失了。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-12-09T08:43:28.923

在带有 spock 框架的 Android 工作室中，我将 gradle 的版本从 2.2.2 更改为 3.2.1，一切顺利。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-04-20T05:12:11.633

我有一个发生这种情况的原始 Java 项目。只需 Java + JUnit4。它肯定存在于您的 .idea/ 或 .iml 文件中。我报废了我的，重新导入，最后测试再次运行。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-12-07T16:18:07.107

我在 @BeforeClass 方法中的数据库中做了一些插入。我意识到我遇到了对象/数据库映射问题。这个数据映射问题是我这个问题的原因。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2017-11-03T11:00:13.810

在我的 Android Studio 3.0 项目中尝试运行本地单元测试时，我遇到了“空测试套件”错误。

在阅读了 Android Developer[文档](https://developer.android.com/training/testing/junit-runner.html)后，我很快意识到问题是由我的 gradle 配置引起的，其中包括以下几行。

```
testImplementation 'com.android.support.test:runner:0.5'
testImplementation 'com.android.support.test:rules:0.5' 
```

AndroidJUnitRunner 类是一个 JUnit 测试运行器，可让您在**Android 设备**上运行 JUnit 3 或 JUnit 4 样式的测试类。

由于我的测试是本地的，因此不需要在任何设备上运行，删除上面的 com.android.support.test... 条目使我能够执行单元测试。

# r - 命名R中向量列表的最后一个元素

> ID：14381696
> 
> 赞同：0
> 
> 时间：2013-01-17T14:50:22.743
> 
> 标签：r

一些数据：

```
reslist <- list()
reslist <- append(reslist,list(c(1,2,3,4)))
names(reslist) <- "name1"
reslist <- append(reslist,list(c(3,4,1,0))) 
```

如何只命名列表的最后一个元素？我的实际列表是可变长度的，所以我不知道最后一个元素的索引。

```
names(reslist[[length(reslist)]]) <- "name2" 
```

不能作为名字 (names(reslist) <- "name1")，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:53:35.047

你只是在索引错误的东西。尝试这个：

```
names(reslist)[length(reslist)] <- 'name2' 
```

# cognos - 这种情况下的错误是什么......when语句？

> ID：14381697
> 
> 赞同：0
> 
> 时间：2013-01-17T14:50:23.027
> 
> 标签：cognos, cognos-8, cognos-bi

谁能说出下面的陈述有什么问题。

目前我在 cognos 10.1.1 工作

```
case     
  when extract(month,_last_of_month (current_date))=1 then ('January')
  when extract(month,_last_of_month (current_date))=2 then ('January','February')  
end 
```

我无法纠正它。

错误代码是***qe-def-0459 cclexception 解析错误***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:51:42.607

它应该只返回一个值，

```
case
   when extract(month,_last_of_month(current_date)) = 1 then 'January'
   when extract(month,_last_of_month(current_date)) = 2 then 'January, February'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:46:56.847

我也相信在 Cognos 中的所有案例语句中，你也必须有一个 else 条件。我面前没有 cognos，也不记得您正在使用的函数的语法，但它看起来不错。

我还记得在某些版本的 cognos 中，您必须将 eval 表达式转换为与返回类型含义相同的值，因为您返回的是文本而不是 expr = 1，您必须 Cast(expre, varchar) = Cast(1, varchar) --- 不确定 10 中是否是这种情况，但它肯定会在最近的 8.3 和 8.4 中引起问题

# ios - iOS 下载自定义推送通知声音

> ID：14381700
> 
> 赞同：1
> 
> 时间：2013-01-17T14:50:49.803
> 
> 标签：ios, apple-push-notifications

所以我在我的应用程序中实现了带有自定义声音的推送通知。

我的应用程序可以毫无问题地播放带有推送通知的那些。

我的问题是是否可以在安装应用程序后下载自定义声音并使用自定义推送通知系统播放它们？

由于它们应该存在于主包中并且是只读的 - 还有另一种方法可以实现这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:53:33.917

我不相信这是可能的。

就我对文档的阅读而言，声音文件必须在只读主包中，就像你说的那样。

# php - 如何在这段代码中打乱三个变量？

> ID：14381703
> 
> 赞同：1
> 
> 时间：2013-01-17T14:51:12.530
> 
> 标签：php, arrays, variables, automated-tests, shuffle

我有一个小问题，我尝试进行在线测试，但我需要洗牌 answare 所以 1 是好的 answare 和 2,3 坏的但一直出现 a = 1 b = 2 c = 3 我想要一些随机化的东西a=2 b=3 c=1 我该怎么做？

代码在这里：

```
$result = mysql_query( "SELECT * FROM questions ORDER BY RAND() LIMIT 0,10");
while ($row = mysql_fetch_array($result)) {
    $rows[] = $row;
    $question_id = $row['question_id'];
    $question = $row['question'];
    $answare_good = $row['answare_good'];
    $answare_badi = $row['answare_badi'];
    $answare_badii = $row['answare_badii'];
    $number += 1;
    echo '<tr>
    <td rowspan="3" width="10">'.$number.'</td>
    <td rowspan="3" width="70%"><p>'.$question.'</p></td>
    <td width="30%" height="33%"><input type="checkbox" name="a1" id="a1">
    '.$answare_good.'</td>
    </tr>
    <tr>
    <td width="30%" height="33%"><input type="checkbox" name="a2" id="a2">
    '.$answare_badi.'</td>
    </tr>
    <tr>
    <td  width="30%" height="33%"><input type="checkbox" name="a3" id="a3">
    '.$answare_badii.'</td>
    </tr>'; 
```

我尝试了一些东西来排列洗牌 $answare_good & $answare_badi & $answare_badii 但我失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:04:05.583

这段代码怎么样：

```
$result = mysql_query("SELECT * FROM questions ORDER BY RAND() LIMIT 0,10");
while ($row = mysql_fetch_array($result)) {
    $rows[] = $row;
    $question_id = $row['question_id'];

    $answers = array(
        array('a1', 'val1', $row['answare_good']),
        array('a2', 'val2', $row['answare_badi']),
        array('a3', 'val3', $row['answare_badii']),
    );
    shuffle($answers);

    $number += 1;

    echo '<tr>
    <td rowspan="3" width="10">'.$number.'</td>
    <td rowspan="3" width="70%"><p>'.$row['question'].'</p></td></tr>';
    foreach($answers as $answer) {
        echo '<tr><td width="30%" height="33%"><input type="checkbox" name="'.$answer[0].'" id="'.$question_id.'-'.$answer[0].'" value="'.$answer[1].'" />'.$answer[2].'</td></tr>';
    }
} 
```

您还必须指定复选框的值才能获得选中答案的值...

也移动到`PDO`或至少`mysqli_*`作为`mysql_*`功能现在已弃用的功能......

**编辑：**还考虑使用`radio`而不是`checkbox`- 假设用户应该只选择一个答案。如果您想让用户选择一个以上（或所有三个答案），那么`checkbox`就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:58:13.673

如果您需要提供可用的变量，您可以在随机播放中额外提取

```
$answers = array(
 'opt1' => 'answer1',
 'opt2' => 'answer2',
 'opt3' => 'answer3'
);

shuffle($answers);
extract($answers); 
```

// 访问变量

```
echo $opt1;
echo $opt2;
echo $opt3; 
```

# antlr4 - 该类型生成一个字符串，需要超过 65535 个字节才能在常量池中以 Utf8 格式编码

> ID：14381704
> 
> 赞同：5
> 
> 时间：2013-01-17T14:51:19.807
> 
> 标签：antlr4

我正在尝试使用在 antlr3 中工作的有点大的语法的 antlr4。完成了所需的 2 个语法更改，现在我有了生成词法分析器和解析器的工具。

但是，词法分析器有一个编译错误：

> 1）该类型在常量池中生成一个需要65535个字节以上的Utf8格式编码的字符串

该错误显示在 Eclipse 中的类名上，因此不确定它正在谈论的是哪个字符串，但我怀疑它是这个非常长的字符串：

```
 public static final String _serializedATN =
        "\1\2\u01c5\u1741\6\uffff\2\0\7\0\2\1\7\1\2\2\7\2\2\3\7\3\2\4\7\4\2\5\7"+
        "\5\2\6\7\6\2\7\7\7\2\b\7\b\2\t\7\t\2\n\7\n\2\13\7\13\2\f\7\f\2\r\7\r\2"+
... etc, etc (few hundred lines of unicode) 
```

看起来像解析器生成器中的一个错误，但可能需要一些我不知道的 antlr4 新设置（？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:23:22.143

这确实是 Java 中的一个限制，而不是 ANTLR 中的错​​误（创建了正确的序列化字符串，但 Java 的编码无法存储它）。上周我们[调整了`_serializedATN`](https://github.com/antlr/antlr4/pull/133)表示来帮助解决这个问题，但我们还没有实现完整的解决方法，包括将序列化的表单分成多个字符串或允许将其存储在运行时加载的单独文件中。

可能有一些方法可以调整语法以减小所需 ATN 的大小，但我需要查看语法来评估它。

**更新：**从 ANTLR 4.1 开始，`_serializedATN`现在根据需要进行拆分，以确保生成的代码中不超过常量池限制。有关详细信息，请参阅[第 76](https://github.com/antlr/antlr4/issues/76)期。

# c# - 如何关闭表格

> ID：14381705
> 
> 赞同：19
> 
> 时间：2013-01-17T14:51:20.437
> 
> 标签：c#, winforms, button, formclosing

好的，所以一个 Windows 窗体类 WindowSettings 和窗体有一个“取消”按钮。当用户单击按钮时，会弹出对话框 DialogSettingsCancel 并询问用户是否确定要执行该操作。该对话框有 2 个按钮，一个“是”按钮和一个“否”按钮。如果用户单击“是”按钮，我希望 DialogSettingsCancel 和 WindowSettings 都关闭。

我在 DialogSettingsCancel 中的 button_Click 事件处理程序：

```
private void button1_Click(object sender, EventArgs e)
{
    //Code to trigger when the "Yes"-button is pressed.
    WindowSettings settings = new WindowSettings();
    this.Close();
    settings.Close();
} 
```

当我运行我的应用程序并转到设置表单并单击“取消”按钮，然后单击“是”按钮时，只有 DialogSettingsCancel 关闭而不关闭 WindowSettings。

为什么它不起作用？

我也试过改变

```
this.Close();
settings.Close(); 
```

至

```
settings.Close();
this.Close(); 
```

但还是一样的结果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T14:54:33.800

您需要打开的实际实例`WindowSettings`，而不是新实例。

目前，您正在创建一个新实例`WindowSettings`并调用`Close`它。这没有任何作用，因为该新实例从未显示过。

相反，在显示时`DialogSettingsCancel`将当前实例设置`WindowSettings`为父级。

像这样的东西：

在`WindowSettings`：

```
private void showDialogSettings_Click(object sender, EventArgs e)
{
    var dialogSettingsCancel = new DialogSettingsCancel();
    dialogSettingsCancel.OwningWindowSettings = this;
    dialogSettingsCancel.Show();
} 
```

在`DialogSettingsCancel`：

```
public WindowSettings OwningWindowSettings { get; set; }

private void button1_Click(object sender, EventArgs e)
{
    this.Close();
    if(OwningWindowSettings != null)
        OwningWindowSettings.Close();
} 
```

这种方法考虑到 a`DialogSettingsCancel`可能在没有 a`WindowsSettings`作为父级的情况下打开。

如果两者始终连接，则应改为使用构造函数参数：

在`WindowSettings`：

```
private void showDialogSettings_Click(object sender, EventArgs e)
{
    var dialogSettingsCancel = new DialogSettingsCancel(this);
    dialogSettingsCancel.Show();
} 
```

在`DialogSettingsCancel`：

```
WindowSettings _owningWindowSettings;

public DialogSettingsCancel(WindowSettings owningWindowSettings)
{
    if(owningWindowSettings == null)
        throw new ArgumentNullException("owningWindowSettings");

    _owningWindowSettings = owningWindowSettings;
}

private void button1_Click(object sender, EventArgs e)
{
    this.Close();
    _owningWindowSettings.Close();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T14:53:19.117

```
new WindowSettings(); 
```

您刚刚关闭了一个最初不可见的表单的全新实例。

您需要通过接受它作为构造函数参数并将其存储在字段中来关闭表单的*原始实例。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-25T19:02:08.230

您也可以关闭应用程序：

```
Application.Exit(); 
```

它将结束进程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T15:02:55.083

为什么不使用 DialogResult 方法来关闭表单呢？

```
if(DialogSettingsCancel.ShowDialog() == DialogResult.Yes)
{
     //this will close the form but will keep application open if your 
     //application type is "console" in the properties of the project
     this.Close();
} 
```

但是，要使其正常工作，您需要在调用 DialogSettingsCancel 表单时在“WindowSettings”表单中执行此操作。与调用 OpenFileDialog 或任何其他 Dialog 表单的方式非常相似。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T14:58:34.070

创建后立即关闭设置窗口的实例。您需要先显示设置窗口，然后等待对话结果。如果它返回为已取消，则关闭窗口。例如：

```
private void button1_Click(object sender, EventArgs e)
{
    Settings newSettingsWindow = new Settings();

    if (newSettingsWindow.ShowDialog() == DialogResult.Cancel)
    {
        newSettingsWindow.Close();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T15:01:37.620

将**WindowSettings**作为**DialogSettingsCancel**的构造函数的参数发送，然后在按下 yes 时在**button1_Click**上调用两者的 close 方法。

```
public class DialogSettingsCancel
{
    WindowSettings parent;

    public DialogSettingsCancel(WindowSettings settings)
    {
        this.parent = settings;        
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //Code to trigger when the "Yes"-button is pressed.
        this.parent.Close();
        this.Close();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-13T15:36:41.813

例如，如果您想在执行操作时关闭窗口窗体，有两种方法可以做到这一点

1.直接关闭

```
Form1 f=new Form1();
f.close(); //u can use below comment also
//this.close(); 
```

2.我们也可以隐藏表单而不关闭它

```
 private void button1_Click(object sender, EventArgs e)
    {
        Form1 f1 = new Form1();
        Form2 f2 = new Form2();
        int flag = 0;
        string u, p;
        u = textBox1.Text;
        p = textBox2.Text;
        if(u=="username" && p=="pasword")
        {
            flag = 1;
        }
        else
        {
          MessageBox.Show("enter correct details");
        }
        if(flag==1)
        {
            f2.Show();
            this.Hide();
        }

    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-29T05:19:25.393

有不同的方法可以打开或关闭 winform。Form.Close() 是关闭 winform 的一种方法。

当 'Form.Close()' 执行时，以该表单创建的所有资源都将被销毁。资源意味着控件及其所有子控件（标签、按钮）、表单等。

其他一些关闭winform的方法

1.  Form.Hide()
2.  应用程序.Exit()

打开/启动表单的一些方法

1.  窗体.Show()
2.  Form.ShowDialog()
3.  Form.TopMost()

他们都有不同的行为，探索他们！

# android - Android TranslateAnimation 背景不起作用

> ID：14381706
> 
> 赞同：0
> 
> 时间：2013-01-17T14:51:25.670
> 
> 标签：android, translate-animation

我使用 TranlateAnimation 来显示和隐藏 EditText。第一个 EditText 的可见性消失了。在它需要可见性并向上翻译之后。当 EditText 获得焦点时，所有应用程序的背景变为黑色。当 EditText 失去焦点时，一切都变得很好。也许是因为我使用了包含所有片段的 ViewPager。这是什么问题？下面是动画代码：

```
private void initAnimationDown() {
    animationDown = new TranslateAnimation(0, 0, 0, height);
    animationDown.setFillAfter(true);
    animationDown.setDuration(500);
    }
private void initAnimationUp() {
    animationUp = new TranslateAnimation(0, 0, height, 0);
    animationUp.setFillAfter(true);
    animationUp.setDuration(500);
    }

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    if (isChecked) {
        initAnimationUp();
        perfectEditText.startAnimation(animationUp);
        perfectEditText.setVisibility(View.VISIBLE);

    } else {
        initAnimationDown();
        perfectEditText.startAnimation(animationDown);
        perfectEditText.setVisibility(View.GONE);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:28:57.893

如果您在隐藏他并开始动画之前尝试取消验证编辑文本怎么办？

```
perfectEditText.setFocusable( false );
perfectEditText.setFocusableInTouchMode( false ); 
```

# c++ - c++ 函数上的 extern "C" 是否允许？

> ID：14381709
> 
> 赞同：8
> 
> 时间：2013-01-17T14:51:32.573
> 
> 标签：c++

> **可能重复：**
> [在 C++ 源代码中，外部“C”的作用是什么？](https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c)

我问这个是因为我正在编写一个使用 C 库的 C++ 程序。该库具有`foreach`接受回调的函数（自然）。显然，该库会将我的回调称为 C 函数。

首先，**这与 C 与 C++ 的链接有什么关系吗？**

如果是这样，**这样的事情是否有效且正确？**

```
extern "C" static bool callback(/*parameters*/)
{
    cout << "C++ thing inside the function" << endl;
    /* etc */
} 
```

# bash - Bash：用文件名中的空格扩展大括号和全局？

> ID：14381711
> 
> 赞同：14
> 
> 时间：2013-01-17T14:51:35.520
> 
> 标签：bash, filenames, glob

我有一些看起来像的文件：

```
/path/with spaces/{a,b,c}/*.gz 
```

而且我需要在`a,b,c`目录子集下与 glob 匹配的所有文件最终作为单个命令的参数：

```
mycmd '/path/with spaces/a/1.gz' '/path/with spaces/a/2.gz' '/path/with spaces/c/3.gz' ... 
```

我关心的目录以命令行参数的形式出现，我将它们放在一个数组中：

```
dirs=( "$@" ) 
```

我想做类似的事情：

```
IFS=,
mycmd "/path/with spaces/{${dirs[*]}}/"*.gz 
```

但这不起作用，因为 bash 在变量之前扩展了大括号。我尝试过使用 and 甚至 (*shudder*) 的技巧，`echo`但`ls`很难`eval`让它们与文件名中的空格一起使用。 `find`似乎没有太大帮助，因为它不做大括号。我可以为数组中的每个目录获取一个单独的 glob：

```
dirs=( "${dirs[@]/#//path/with spaces/}" )
dirs=( "${dirs[@]/%//*.gz}" ) 
```

但随后 bash 在扩展时引用通配符。

那么：有没有一种优雅的方法来获取与变量大括号和 glob 模式匹配的所有文件，正确处理空格，还是我坚持做 for 循环？如果这有所作为，我正在使用 Bash 3。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T15:20:39.240

要在带有空格的路径上执行大括号扩展和通配符，您可以引用路径中包含空格的部分，例如

```
mycmd '/path/with spaces/'{a,b,c}/*.gz 
```

使用来自变量的值列表进行大括号扩展有点棘手，因为大括号扩展是在任何其他扩展之前完成的。除了使用 dreaded 之外，我没有其他办法`eval`。

```
eval mycmd "'/path/with spaces/'{a,b,c}/*.gz" 
```

*PS 然而，在这种情况下，我个人会选择循环来构建参数列表，而不是上面显示的方法。虽然更冗长，但对于初学者来说，循环会更容易阅读，并且可以避免使用`eval`（尤其是当扩展候选者来自用户输入时！）。*

* * *

### 概念证明：

使用打印出参数数量并打印出每个参数的虚拟命令 (x.sh)：

```
[me@home]$ shopt -s nullglob # 处理 globbing 返回不匹配的情况

[me@home]$ ./x.sh '带空格的路径'/{a,b}/*.txt
参数数量 = 3
- 带空格的路径/a/1.txt
- 带空格的路径/b/2.txt
- 带空格的路径/b/3.txt

[me@home]:~/temp$ dirs="a,b"
[me@home]k:~/temp$ eval ./x.sh "'带空格的路径'/{$dirs}/*.txt"
参数数量 = 3
- 带空格的路径/a/1.txt
- 带空格的路径/b/2.txt
- 带空格的路径/b/3.txt

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T15:21:04.150

好的，这是一个使用 bash 作为“大括号”和`find`glob 的方法：

```
find "${dirs[@]/#//path/with spaces/}" -name '*.gz' -print0 | xargs -0 mycmd 
```

如果您需要数组中的结果，[这](https://stackoverflow.com/a/1120952/691611)很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T16:11:44.030

这是[GNU Parallel](https://www.gnu.org/software/parallel/)粉丝的一个：

```
parallel -Xj1 mycmd {}/*.gz ::: "${dirs[@]/#//path/with spaces/}" 
```

# r - 返回一个数据框

> ID：14381722
> 
> 赞同：2
> 
> 时间：2013-01-17T14:52:11.723
> 
> 标签：r, dataframe, sapply

我正在使用以下代码从文件中提取完整案例的数量：

```
complete <- function(directory, id=1:332) {
    sapply(id, fn, directory)}

fn <- function(id, directory) {
    zero <- sprintf("%03d", id)
    name <- paste(directory,"/",zero,".csv",sep="")
    frame <- read.csv(name)
    ok <- complete.cases(frame)
    return(c("nobs"=sum(ok),"id"=id)) } 
```

然后，例如：

```
complete("specdata",1:12) 
```

此代码返回：

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
nobs  117 1041  243  474  402  228  442  192  275   148   443    96
id      1    2    3    4    5    6    7    8    9    10    11    12 
```

但是，我希望它返回以下类型的数据框：

![在此处输入图像描述](../Images/d4b98be8f26e403641d706eb275d52a1.png)

我不确定我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:55:36.317

`sapply`正在返回`matrix`这里。您可以通过以下方式获得所需的形状和类型：

```
as.data.frame(t(complete("specdata",1:12))) 
```

或者把它放在`complete`函数中，围绕对`sapply`. `t`将`matrix`行转换为列，并将`as.data.frame`其强制转换为列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:37:53.370

你的代码没问题。为了获得您想要的结果，请使用

```
t(sapply(id, fun, directory)) 
```

而不是`sapply(id, fun, directory)`.

您的代码应如下所示；

```
complete <- function(directory, id=1:332) {
    t(sapply(id, fn, directory))} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T15:21:22.297

```
complete <- function(directory, id = 1:332) {

 as.data.frame(t(sapply(id, fn, directory)))

}

fn <- function(id, directory){
if(is.numeric(id)){                                                         
id=id
}else{
id = as.numeric(id)
}
fileName  <- paste(paste(directory,'/',sep=''),paste(id,'.csv',sep=''),sep='')
data  <- read.csv(fileName )
tows <- (complete.cases(data))
rowsNum <- nrow(data[tows,])
return(c("id"=as.numeric(id),"nobs"=rowsNum))

} 
```

# html - 正则表达式查找替换 Dreamweaver

> ID：14381723
> 
> 赞同：0
> 
> 时间：2013-01-17T14:52:12.537
> 
> 标签：html, regex, cross-browser, dreamweaver

我正在尝试获取可以执行这些情况的正则表达式：

**情况1：**

```
background: -webkit-linear-gradient(top, #RANDOM_COLOR, #RANDOM_COLOR); 
```

和

```
background: -ms-linear-gradient(top, #RANDOM_COLOR, #RANDOM_COLOR); 
background: -webkit-linear-gradient(top, #RANDOM_COLOR, #RANDOM_COLOR); 
```

**案例2**

```
box-shadow: RANDOM_TEXT; 
```

和

```
-webkit-box-shadow: RANDOM_TEXT;
box-shadow: RANDOM_TEXT; 
```

然后我只想使用 Dreamweaver 中的 Control+F 功能并使用正则表达式替换文本。

![Dreamweaver 替换功能](../Images/f4c31600d638561db13f25d87661706b.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:09:58.627

Dreamweaver 使用的是 Javascript Regex 风格。

## 找到 1：

```
([ \t]*)(background:\s*-webkit-linear-gradient\(top\s*,\s*(#[a-fA-F0-9]{3,6})\s*,\s*(#[a-fA-F0-9]{3,6})\s*\)\s*;)
// assuming these are hexadecimal colors like you indicated with # 
```

## 替换1：

```
$1background: -ms-linear-gradient(top, $3, $4); 
$1$2 
```

## 找到 2：

```
([ \t]*)(box-shadow:\s*([^;]+)\s*;) 
```

## 替换2：

```
$1-webkit-box-shadow: $3;
$1$2 
```

* * *

## 第一个查找模式的解释：

所有空格字符`\s`都是可选的（感谢`*`）。此外，文字括号被转义。在替换中`$1`，`$2`等表示*`[capturingGroup n]`*。

```
(                          # capturing group #1
    [ \t]*                 # 0 or more spaces and/or tabs (could be any number of both)
)
(                          # capturing group #2

    background:\s*-webkit-linear-gradient\(top\s*,\s*
    (                      # capturing group #3
        #[a-fA-F0-9]{3,6}  # a number sign and a string with 3 or 6 digits that's made of a-zA-Z0-9 (aka. hexadecimal characters)
    )
    \s*,\s*
    (                      # capturing group #4
        #[a-fA-F0-9]{3,6}
    )
    \s*\)\s*;
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T14:55:22.163

我不明白正则表达式的原因。

为什么你不能找到：

```
background: -webkit-linear-gradient(top, #BBB, #999); 
```

并替换为：

```
background: -ms-linear-gradient(top, #BBB, #999);background: -webkit-linear-gradient(top, #BBB, #999); 
```

影子也一样……

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T14:55:40.420

你为什么不只是制作“匹配案例”并使用“全部替换”/“替换”，看起来像：

情况1：

“寻找”

```
 background: -webkit-linear-gradient(top, #BBB, #999); 
```

“代替”

```
 background: -ms-linear-gradient(top, #BBB, #999);    
  background: -webkit-linear-gradient(top, #BBB, #999); 
```

# yii - 如何修复更新错误

> ID：14381732
> 
> 赞同：0
> 
> 时间：2013-01-17T14:52:52.803
> 
> 标签：yii

我想用 $id 值更新所有行的替代组。

动作出错：冷链不能为空。

当我在 db 中搜索 pk = $a 时，它的冷链值为 boolen(false)。和 db 是 postgresql

如何在不发布其他值的情况下设置 $q->attributes？

```
public function actionUpdate($id){

    if (isset($_POST['forms'])){

        $arr = explode(',', $_POST['forms']);

        foreach ($arr as $a){

            $q = MedicineDrugform::model()->findbypk($a);
            $q->alternativegroup = $id;
            if ($q->save()){
                echo $q->id."q saved <br />";
            }
            else {
                echo "<pre>";
                print_r($q->getErrors());
            }

            die();

            $qu = MedicineDrugformUpdate::model()->findbyattributes(array('drug_form_id'=>$a));
            $quu = MedicineDrugformUpdate::model()->findbypk($qu->id);
            $quu->alternativegroup = $id;
            if ($quu->save()){
                echo $quu->id."qu saved <br />";
            }

        }
        die();
        $this->render('/site/messages', array('message'=>'formsaved'));

    }

    $this->render('add', array('id'=>$id));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:09:06.170

也许它找不到相应的记录

```
$q = MedicineDrugform::model()->findbypk($a); 
```

# c# - Kinect 相机冻结

> ID：14381734
> 
> 赞同：0
> 
> 时间：2013-01-17T14:52:56.967
> 
> 标签：c#, wpf, kinect

我已经开始在 c# 中为带有 WPF 的 kinect 进行开发。

当我从 Kinect for Windows Developer Toolkit 启动示例程序“colorBasics”时，相机工作正常，但几秒钟后就冻结了。

我复制了相关代码（所以只有查看相机的代码），它也发生在我自己的程序中。

有人知道我在做什么错吗？

我没有收到任何错误。

这是代码

```
namespace Testapp
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    private KinectSensor sensor;

    private WriteableBitmap colorBitmap;

    private byte[] colorPixels;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void WindowLoaded(object sender, RoutedEventArgs e)
    {
        foreach (var potentialSensor in KinectSensor.KinectSensors)
        {
            if (potentialSensor.Status == KinectStatus.Connected)
            {
                this.sensor = potentialSensor;
                break;
            }
        }

        if (null != this.sensor)
        {
            // Turn on the color stream to receive color frames
            this.sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);

            // Allocate space to put the pixels we'll receive
            this.colorPixels = new byte[this.sensor.ColorStream.FramePixelDataLength];

            // This is the bitmap we'll display on-screen
            this.colorBitmap = new WriteableBitmap(this.sensor.ColorStream.FrameWidth, this.sensor.ColorStream.FrameHeight, 96.0, 96.0, PixelFormats.Bgr32, null);

            // Set the image we display to point to the bitmap where we'll put the image data
            this.Image.Source = this.colorBitmap;

            // Add an event handler to be called whenever there is new color frame data
            this.sensor.ColorFrameReady += this.SensorColorFrameReady;

            // Start the sensor!
            try
            {
                this.sensor.Start();
            }
            catch (IOException)
            {
                this.sensor = null;
            }
        }
    }

    private void SensorColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
    {
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (colorFrame != null)
            {
                // Copy the pixel data from the image to a temporary array
                colorFrame.CopyPixelDataTo(this.colorPixels);

                // Write the pixel data into our bitmap
                this.colorBitmap.WritePixels(
                    new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
                    this.colorPixels,
                    this.colorBitmap.PixelWidth * sizeof(int),
                    0);
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:10:42.980

您是使用 USB 电缆的任何类型的扩展，还是直接插入机器？当传感器和机器之间的延迟太长时，我已经看到您所描述的情况。在那种情况下，它是由 Kinect USB 电缆插入延长线引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T11:18:25.150

在这里有同样的问题，相机一直工作到最终只是冻结并关闭电源，几秒钟后回来只是重复冻结循环。

经过多次测试，我的结论是这个问题是由三件事引起的：

*   PC 并不像运行您的代码那样快速/强大。

*   Kinect 太热了。即使您触摸它并且它“不太热”，传感器也对过热非常敏感。

*   Kinect 不知何故受到了“干扰”。这指的是物理上的振动或运动和/或图像中有太多类似于人类的东西，所以软件试图以 30fps 的每一帧计算它，这是很多微积分，这个事实可能导致上面列出的另外两个问题。

这也可能导致 Michal 描述的延迟问题

# java - 使用 Oreilly Multipartrequest 上传 Java 文件

> ID：14381735
> 
> 赞同：0
> 
> 时间：2013-01-17T14:52:56.940
> 
> 标签：java, jsp, tomcat, servlets, multipartform-data

我正在做一个管理在线拍卖的 java web 应用程序。在应用程序的某个时刻，用户可以销售产品，所以我建立了一个页面，其中有一个表单；在这种形式中，我必须使用 Oreilly Multipartrequest 库处理文件上传。当我单击提交按钮时，servlet 应该处理所有参数，将产品添加到数据库中，然后重定向到用户页面，但应用程序没有这样做，而是挂在空白页面中。我正在使用 netbeans，所以我检查了日志，但找不到任何错误；我还检查了 tomcat 文件夹中的日志，但我也没有任何错误。我不知道该怎么做，也不知道在哪里搜索解决方案。

这是处理上传的代码部分：

```
try {

        MultipartRequest multi =
            new MultipartRequest(request, getServletContext().getRealPath("/img"), 10*1024*1024,
            "ISO-8859-1", new DefaultFileRenamePolicy());

        Enumeration files = multi.getFileNames();
        while (files.hasMoreElements()) {
            name = (String)files.nextElement();
            filename = multi.getFilesystemName(name);
            // String originalFilename = multi.getOriginalFileName(name);
            // String type = multi.getContentType(name);
            File f = multi.getFile(name);

            if (f != null) {
                session.setAttribute("success", "file written correctly");
            }
        }
    } catch (IOException IEx) {
        this.getServletContext().log("Error reading saving file");
    } 
```

是我做错了什么，还是我的想法是正确的？

**PS**如果用户决定不上传任何图片，我必须在数据库中放一张默认图片。

# .net - 对条件属性使用编译器指令

> ID：14381743
> 
> 赞同：3
> 
> 时间：2013-01-17T14:53:21.300
> 
> 标签：.net, vb.net, visual-studio-2010, compiler-directives

我希望根据编译模式使属性成为条件。

例如，这`MyFunction()`是用属性装饰的`MyAttribute()`：

```
<MyAttribute()>  
Private Function MyFunction() As Boolean
....
End Function 
```

但是，我*只*希望在 DEBUG 为真时应用该属性，这听起来像是使用[编译器指令](http://msdn.microsoft.com/en-us/library/7ah135z7.aspx)的好地方：

```
#If Debug Then
<MyAttribute()>
#End If
Private Function MyFunction() As Boolean
....
End Function 
```

然而，这似乎需要一个连续字符（_），这反过来会影响`#End If`（意外的标记）。

我将如何实现我想要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:08:02.943

最坏的情况，你可以这样做：

```
#If Debug Then
<MyAttribute()>
Private Function MyFunction() As Boolean
#Else
Private Function MyFunction() As Boolean
#End If 
```

这可能是由于在预处理之前发生了行继续处理。例如，这是有效的：

```
#If 1 = _
  1 Then

#End If 
```

在您的情况下，您期望在预处理之后发生线路延续。

# spring - Spring & Hibernate，找到位，预期 TINYINT(1) DEFAULT 0

> ID：14381749
> 
> 赞同：3
> 
> 时间：2013-01-17T14:53:40.183
> 
> 标签：spring, hibernate, columnmappings

在数据库中：有一个字段，其类型为 TINYINT(1)，默认值为 0。在模型中，它被定义为 TINYINT(1) DEFAULT 0。但是它给出了如下错误：

**错误**

```
[jar:file:/C:/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/NetaCommerceFrameworkAdmin/WEB-INF/lib/NetaCommerceFramework-0.0.1-SNAPSHOT.jar!/com/netasoft/commerce/framework/lang/dao/LangDaoImpl.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type 
[org.hibernate.SessionFactory]: :Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/admin-hibernate.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Wrong column type in kaft.nc_alert_log for column alerted. Found: bit, expected: TINYINT(1) DEFAULT 0; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/admin-hibernate.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Wrong column type in kaft.nc_alert_log for column alerted. Found: bit, expected: TINYINT(1) DEFAULT 0 
```

**模型定义**

```
@Column(name="alerted", columnDefinition = "TINYINT(1) DEFAULT 0")
private int alerted;

public int getAlerted() {
    return alerted;
}

public void setAlerted(int alerted) {
    this.alerted = alerted;
} 
```

**数据库属性**

```
hibernate.hbm2ddl.auto=validate
#hibernate.hbm2ddl.auto=create-drop
hibernate.hbm2ddl.import_files=/import_standard.sql
hibernate.show_sql=false
hibernate.format_sql=true
hibernate.generate_statistics=false
hibernate.use_sql_comments=true
hibernate.query.factory_class=org.hibernate.hql.ast.ASTQueryTranslatorFactory
hibernate.cache.use_query_cache=true
hibernate.cache.region.factory_class=net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory
hibernate.cache.use_second_level_cache=true
#-------------------------------------------------------------------------------
# MySQL Settings

jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/xxx?autoReconnect=true
jdbc.username=xxx
jdbc.password=xxx

# Property that determines which Hibernate dialect / MySQL5Dialect || MySQLDialect
hibernate.dialect=org.hibernate.dialect.MySQL5Dialect 
```

**方言版本：**

```
2013-01-17 08:45:36,920 INFO [org.hibernate.cfg.SettingsFactory] - Database ->
       name : MySQL
    version : 5.0.96-community-nt
      major : 5
      minor : 0
2013-01-17 08:45:36,921 INFO [org.hibernate.cfg.SettingsFactory] - Driver ->
       name : MySQL-AB JDBC Driver
    version : mysql-connector-java-5.1.12 ( Revision: ${bzr.revision-id} )
      major : 5
      minor : 1 
```

它也在服务器和另一台计算机上运行。然而，在我的电脑和安装只是为了尝试它的新电脑中，它给出了同样的错误。我在谷歌上搜索了几天，无法弄清楚是什么导致了这个问题。在模型中尝试了 boolean columnDefinition 并更改了 MySqlDialect 定义，但没有任何变化。甚至错误消息都是一样的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-05-30T05:05:51.643

使用 BIT 作为 columnDefinition

这对我有用：

```
@Column(name = "my_field",columnDefinition = "BIT")
private int myField; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T15:12:52.020

您可以使用 tinyInt1isBit=false mysql 驱动程序参数。即 jdbc:mysql://localhost?tinyInt1isBit=false

[http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

这可以防止驱动程序将 tinyint(1) 列报告为 java.sql.Type.BIT

但是，如果布尔字段在 DB 中也表示为 tinyint(1)，您可能会开始遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T17:20:01.430

将@Type 注解添加到 alerted 字段，如下所示：

```
@org.hibernate.annotations.Type(type="true_false")
@Column(name="alerted", columnDefinition = "TINYINT(1) DEFAULT 0")
private int alerted; 
```

# javascript - 使用 nvd3 为图形的某些部分添加背景

> ID：14381752
> 
> 赞同：0
> 
> 时间：2013-01-17T14:53:47.407
> 
> 标签：javascript, graphics, graph, d3.js, nvd3.js

我已经用 NVD3 制作了一个 Stacked/Group 多条形图，效果很好。我需要在图形的某些地方添加灰色背景，以便向用户传达一些信息。

有人知道怎么做这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:11:13.040

如果我理解正确，您不需要整个图表的背景。在这种情况下，您始终可以使用 d3 自己的插入方法 selection.insert(name, before) （请参阅[https://github.com/mbostock/d3/wiki/Selections#wiki-insert](https://github.com/mbostock/d3/wiki/Selections#wiki-insert)上的文档）在以下位置显示 svg 对象某个在某些元素的前面/后面……（我想它基本上会在你动画的所有组后面）。

# arrays - 用 MIPS 中的某个值替换数组中的空元素

> ID：14381761
> 
> 赞同：0
> 
> 时间：2013-01-17T14:54:05.180
> 
> 标签：arrays, replace, mips

我需要与在 MIPS 中转换的类似的东西。最终使用一个过程，该过程将数组、数组的长度和应该替换数组的空元素的值作为参数。完成后我还必须打印“完成”，我也不知道。先感谢您。

```
#include <stdio.h>

int array[40];

int main() {
    int i, n = 40; x = 6;
    for (i=0, i<n; i++)
        if (array[i] == 0)
             array[i] = x;
    return 0;
} 
```

# javascript - 带有图例和其他颜色的 Google 图表 API 散点图

> ID：14381764
> 
> 赞同：6
> 
> 时间：2013-01-17T14:54:08.170
> 
> 标签：javascript, google-api, google-visualization

我有一个例子：

```
// Load the Visualization API and the piechart package.
        google.load('visualization', '1.0', {'packages':['corechart']});

        // Set a callback to run when the Google Visualization API is loaded.
        google.setOnLoadCallback(drawChart1);

        // Callback that creates and populates a data table,
        // instantiates the pie chart, passes in the data and
        // draws it.
        function drawChart1() {
            var data = new google.visualization.DataTable(
            {
                cols: [
                    {id: 'A', label: 'A', type: 'number'},
                    {id: 'B', label: 'B', type: 'number'},
                    {id: 'C', label: 'C', type:'tooltip', p:{role:'tooltip'}}
                ],
                rows: [
                    {c:[{v: 2}, {v: 3}, {v:'Allen'}]},
                    {c:[{v: 4}, {v: 2}, {v:'Tom'}]},
                    {c:[{v: 1}, {v: 3}, {v:'Sim'}]}

                ]
            })

            var options = {
                title: 'Age vs. Weight comparison',
                hAxis: {title: 'Age', minValue: 1, maxValue: 5},
                vAxis: {title: 'Weight', minValue: 1, maxValue: 5},
                legend: ''
            };

            var chart = new google.visualization.ScatterChart(document.getElementById('chart_scatter_container'));
            chart.draw(data, options);
        } 
```

[http://jsfiddle.net/eAWcC/1/](http://jsfiddle.net/eAWcC/1/)

当我悬停一次数据时，工具提示将看到我为该数据添加的标签。那很好。

但我想看到所有的值都是不同的颜色并放在图例中。

![例子](../Images/dc7f93235ed8845df49ce775fe9d3b06.png)

怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T02:54:13.110

散点图数据表中的列是图例中显示的列，并且颜色不同。为了分别显示它们，您需要重新排列数据，以便每个人都有自己的列。

例如，将您的数据表变量替换为：

```
 var data = google.visualization.arrayToDataTable([
              ['x', 'Allen', 'Tom', 'Sim'],
              [1, null, null, 3],
              [2, 3, null, null],
              [4, null, 2, null],
            ]); 
```

这样做会给你想要的输出（我相信，[在这里](http://jsfiddle.net/nNaEN/)检查）。

但是，这种方法的问题是您最终在每个系列中都有很多“空”值（因为您只有单点）。为了简化此过程，您可以编写一个循环来遍历您的数据并为新表设置适当的格式。基本代码是：

1.  将 X 值的列添加到新表中
2.  对于第 2 列（工具提示）中的每一行，在新表中创建一个新列
3.  对于第 1 列（Y 值）中的每一行，沿对角线向下/向右填充

这看起来像这样：

```
 var newTable = new google.visualization.DataTable();

          newTable.addColumn('number', 'Age');
          for (var i = 0; i < data.getNumberOfRows(); ++i) {
            newTable.addColumn('string', data.getValue(i, 2));
            newTable.addRow();
          }

          for (var j = 0; j < data.getNumberOfRows(); ++j) {
            newTable.setValue(j, j + 1, data.getValue(j, j + 1));
          } 
```

（上面的代码已经过测试，但不喜欢第二个 for() 循环，原因超出了我的理解）。

# android - cocos2D-X 应用在 Android 上运行但在 iOS 上崩溃

> ID：14381765
> 
> 赞同：0
> 
> 时间：2013-01-17T14:54:17.657
> 
> 标签：android, ios, ios6, cocos2d-x

该功能未正确校准，但它“工作”（至少在 android 上）

```
void HelloWorld::continueshipMovement() {

    CCNode *node = this->getChildByTag(asterioTag);
    CCSprite *sprite = (CCSprite*)node;

    if (trafico.size() < 0 or sprite->getActionByTag(actionTag)) {
        return;
    }

    std::pair<float, float> valueOfPt = trafico.back();
    trafico.pop_back();
    CCPoint newPt = ccp(valueOfPt.first, valueOfPt.second);
    float distace = ccpDistance(sprite->getPosition(), newPt);
    float duration = distace / ShipSpeed;
    CCMoveTo *move = CCMoveTo::create(duration, newPt);
    CCSequence *moveseq = CCSequence::createWithTwoActions(move, CCCallFunc::create(this, callfunc_selector(HelloWorld::continueshipMovement)));
    moveseq->setTag(actionTag);
    sprite->runAction(moveseq);

} 
```

当我触摸屏幕时，IOS 上的应用程序崩溃，从 CCNode 投射到 CCSprite 时似乎失败。

这是 Xcode 显示的错误：

![1](../Images/81effada69325b7a48cc882dd9e755af.png)

![2](../Images/a59e860bf4f3524a39c09a57745fd20d.png)

# matlab - 随机置换矩阵

> ID：14381770
> 
> 赞同：7
> 
> 时间：2013-01-17T14:54:49.790
> 
> 标签：matlab, permutation

有没有一种简单的方法可以在 Matlab 中模拟随机排列矩阵（例如大小为 1000 x 1000）？我想研究这些矩阵的独立和的特征值分布。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T15:03:24.833

您可以像这样生成一个[随机排列矩阵](http://en.wikipedia.org/wiki/Permutation_matrix)：

1.  创建一个统一矩阵：

    ```
    A = eye( N );  %// N is the size of your matrix 
    ```

    对于较大的值，`N`最好使用[稀疏矩阵](http://www.mathworks.com/help/matlab/math/full-and-sparse-matrices.html)：

    ```
    A = speye( N ); % create sparse identity matrix 
    ```

2.  生成随机排列：

    ```
    idx = randperm(1:N); 
    ```

3.  使用矢量索引相应地重新排列行

    ```
    A = A(idx, :); 
    ```

瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-18T17:09:04.747

在 Matlab 中（使用 R2012a）`idx = randperm(1:N)`给出了输入应该是标量的警告。所以：`idx = randperm(N);`。

# html - ui-state-default 和 ui-selected 有 2 种不同的样式

> ID：14381773
> 
> 赞同：0
> 
> 时间：2013-01-17T14:55:02.120
> 
> 标签：html, css, jquery-ui

目前，我正在使用`selectable`JQUERY 函数

```
<style>
  #selectable .ui-selecting { background: #FECA40; }
  #selectable .ui-selected { background: #F39814; color: white; }
</style>

<ol id="selectable">
  <li class="ui-widget-content">Item 1</li>
  <li class="ui-widget-content">Item 2</li>
  <li class="ui-widget-content">Item 3</li>
  <li class="ui-widget-content">Item 4</li>
  <li class="ui-widget-content">Item 5</li>
  <li class="ui-widget-content">Item 6</li>
  <li class="ui-widget-content">Item 7</li>
</ol> 
```

但由于某种原因，当我选择一个元素时，颜色不会变为亮橙色，而是恢复为默认灰色，`ui-state-default`如下所示：

![所选元素的颜色不正确](../Images/8ec8b98934be845c7b911f8ec3b22a76.png)

但是，如果我转到 Chrome 调试器并取消选中样式部分中 ui-state-default 中的背景，它会完美运行。

![在 Chrome 调试器中取消选中 ui-state-default 的背景](../Images/72c827c340f6f9a64133f692e51b1dd2.png)

![选定和未选定元素的正确颜色](../Images/af327bcf32c4dfcfdb2012339afa27ec.png)

是不是因为这个片段：

```
var nodes = document.getElementById('selectable').getElementsByClassName('ui-widget-content');  
      if (nodes.length > 0)
      {
        nodes[0].innerHTML = getSymbol();
        nodes[0].setAttribute("class", "ui-state-default");
      } 
```

我该如何解决这个问题，这样当我点击感兴趣的元素时，颜色会像我在`<style>`标签中指定的那样改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:13:16.510

使用 jQuery，这非常简单。

`$('.ui-widget-content')`将选择您的所有 LI 元素。（或者你可以使用`$('#selectable li')`）

```
$('.ui-widget-content').click(function() {
      $(.'ui-widget-content').removeClass('.ui-state-default'); <-- this clears previous selections
      $(this).addClass('.ui-state-default'); <-- this adds the class to the clicked item
}) 
```

# java - SWT 事件从 shell 委托给 SWT.Browser

> ID：14381793
> 
> 赞同：0
> 
> 时间：2013-01-17T14:55:43.977
> 
> 标签：java, browser, swt, mozilla, xulrunner

想象一下，您有一个`SWT.Browser`并且想要创建一个`DropTarget`.

我遇到的问题如下： 和 都`Shell`没有`Display`得到 drop-event，因为 browsercontrol 消耗它。

我的想法是在浏览器上放置一些不可见的东西。这应该消耗事件。但是对于这种情况，似乎我必须将所有鼠标事件传递给 SWT 浏览器。

现在我被卡住了，因为我没有让通知运行。我有一个 mousemove 监听器正在运行。该 schell 上的所有事件都被捕获。

如何将此事件重新发送到浏览器`notifyListener(int type, Event e)`不适用于`SWT.Mozilla`浏览器（在 eclipse 3.4.2 中）。我知道这个 Eclipse 框架非常古老，但是那个版本是由 IBM lotus notes 9 提供的。

如何调度这些事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:39:37.657

您可以使用[`Display.post()`](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Display.html&anchor=post%28org.eclipse.swt.widgets.Event%29)将事件分派给 SWT。

# ios - 创建自定义 UIView 绘制

> ID：14381797
> 
> 赞同：1
> 
> 时间：2013-01-17T14:55:55.763
> 
> 标签：ios, xcode, uiview

创建自定义 UIView 的最佳方法是什么？所以我得到了 3 张图片（顶部、中间、机器人），在按钮内我想要一张图片（它需要调整大小（仅高度）

![在此处输入图像描述](../Images/d505ec29039b2bca127a1024c816a64a.png) ![在此处输入图像描述](../Images/e865b6b78ab8afefc65c6f097f4ffd77.png) ![在此处输入图像描述](../Images/35a99624cc6d24007c8a2843083cb736.png)

如何使用 UIView 创建它，以便我可以在其中放置图像并调整视图大小？（我想要这个在 UITablecell 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:33:20.847

尝试自定义 UITableView 绘图的这两个链接：

cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html

[http://adeem.me/blog/2009/05/30/iphone-sdk-tutorial-part-6-creating-custom-uitableviewcell-using-interface-builder-uitableview/](http://adeem.me/blog/2009/05/30/iphone-sdk-tutorial-part-6-creating-custom-uitableviewcell-using-interface-builder-uitableview/)

在那里，您应该能够分别设置每个单元格的高度。如果不存在，则覆盖 UITableViewDelegate 方法

```
tableView:heightForRowAtIndexPath: 
```

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:56:18.973

如果您使用的是 iOS 5，请查看[UIImage](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)`resizableImageWithCapInsets:`中的方法。

这允许您指定图像的哪个部分应该调整大小以及应该自动缩放。这是重用背景图像的理想选择，例如您的情况。

因此，您将使用蓝色背景创建可调整大小的图像，并指定应随图像调整大小的边缘的偏移量。您不必对图像进行切片或切割，只需将其作为一个完整的图像提供，缩放将自动发生，并且如果您正确指定了帽插图，您的圆角将保持完整。

```
// Change the edge insets to match your image...
UIImage *backgroundImage = [[UIImage imageNamed:@"button_background"]  
   resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)];

// Create an image view to hold the new image
UIImageView *myBackgroundImageView = [[UIImageView alloc] initWithImage:backgroundImage];

// [...] here make sure to size your image view to match the size of your parent view

// Add the background image view to the view
[self addSubview:myBackgroundImageView]; 
```

然后，您可以自由地对自定义 tableview 单元格使用类似的技术。但这里的想法是使用带有边缘插图的可调整大小的图像来动态缩放背景图像。

[这](http://mobiledevelopertips.com/user-interface/ios-5-uiimage-and-resizableimagewithcapinsets.html)是一篇很好的博客文章，解释了边缘插图。

希望有帮助。

# android - Android Opengl FBO 屏幕外

> ID：14381798
> 
> 赞同：7
> 
> 时间：2013-01-17T14:55:57.893
> 
> 标签：android, opengl-es, opengl-es-2.0, fbo

我正在开发一个 Android 应用程序类型的手指画。我正在使用 OpenGL ES 2.0。基本上我有一个图像，其中每个触摸屏都应对应于要应用的圆形 alpha，它显示位于下方的另一个图像。我尝试了不同的技术，但速度相当慢，因为它的功能就像使用有机 glTexSubImage2D 减慢渲染阶段一样。我试图了解 FBO 的使用，因为它们允许离屏渲染。有人可以更好地解释渲染离屏意味着什么以及加快我的方法可以获得哪些优势？

我想离屏意味着你可以改变我创建的帧缓冲区，不影响onDrawFrame？在另一个线程中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:27:42.590

In addition to being able to render into an on-screen window using OpenGL ES 2.0, you can also render into nonvisible off-screen surfaces called pbuffers (short for pixel buffer). Pbuffers can take full advantage of any hardware acceleration available to OpenGL ES 2.0, just as a window does. Pbuffers are most often used for generating texture maps. If all you want to do is render to a texture, we recommend using framebuffer objects (covered in Chapter 12, “Framebuffer Objects”) instead of pbuffers because they are more efficient. However, pbuffers can still be useful for some cases where framebuffer objects cannot be used, such as when rendering an off-screen surface with OpenGL ES and then using it as a texture in another API such as OpenVG.

**[source : OpenGL ES 2.0 programming guide]**

I hope this helps. Read this carefully - "pbuffers can still be useful for rendering to an off-screen surface with OpenGL ES"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:06:50.170

您的方法占用了大量内存带宽，因为您需要读回（部分）屏幕并将相同数量的数据再次写回 GPU 内存。这真的很慢，并且使您的绘图代码在图像被移回 GPU 之前等待，然后再进行渲染。您是否考虑过为每个手指按压绘制四边形或某种近似您需要的图元？为什么你需要 OpenGL 呢？

# ms-access - Join 上的语法错误，但查询中没有 Join

> ID：14381801
> 
> 赞同：1
> 
> 时间：2013-01-17T14:56:18.327
> 
> 标签：ms-access, join, count, syntax-error, union

我正在请求获取 3 个不同表中的行数。

所以我在 3 个简单请求之间使用联合来计算每个表中的行。

但我收到一个错误：“连接操作中的语法错误”

即使我没有加入我的查询...

任何人都可以帮助我吗？

这是请求：

```
Select Sum(asd) as 'totalRows' 
FROM ((Select Count(*) as 'asd' from Machines) 
Union (Select Count(*) as 'asd' from Factures) 
Union (Select Count(*) as 'asd'  From Consommation)) 
 as 'tab1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:44:22.570

取决于你真正想要什么......一行多列，或多行有各自的计数。您的原始查询不正确，因为 UNION 语句应该是它的 OWN 查询，以与第一个查询相同的记录格式返回其自己的结果集（即：相同的数字、列名和数据类型。不只使用计数进行采样，采用以下示例语法。

```
select
      a.NumberField1,
      a.CharField1,
      a.DateField1
   from
      SomeTable a
   where
      a.SomeCondition = 1
UNION
      b.SomeField AS NumberField1,
      b.AnotherField AS CharField1,
      c.SomeDate AS DateField1
   from
      AnotherTable b
   where
      b.TestCondition = 6 
```

以上将返回“SomeTable”中的所有行及其条件，并根据其条件包含“AnotherTable”中的行。如果有任何重复项，则将删除重复项……除非您执行了“UNION ALL”。但请注意，联合本身就是一个选择语句。

现在，回到你的。不确定是否/为什么由于被包裹在（parens）中而失败，但会被尝试为

```
Select 
      Sum(asd) as 'totalRows' 
   FROM 
   (   Select Count(*) as 'asd' 
          from Machines
       UNION ALL
       Select Count(*) as 'asd' 
          from Factures
       UNION ALL
       Select Count(*) as 'asd'  
          From Consommation ) as 'tab1' 
```

我会更改为 union all，因为...说您的 Machines 计数和 Factures 计数均为 175... 只有一个原始条目会被退回，而您会为知道计数不正确而挠头。 .. 如果巧合的是，所有 3 个来源的计数相同，均为 175，请重试...您只会返回单个 175 记录，并且比预期的还要远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T13:09:42.940

我已经通过更改请求解决了这个问题，现在是：

```
Select (Select Count() from Machines) as cntMachines, 
    (Select Count() From Factures) as cntFactures, 
    (Select Count(*) from Consommation) as cntConsommation 
From [Machines Or any other table] 
```

这不是我的问题的答案，但它是一个走动。

一个真正的答案仍然会受到赞赏。:)

# jquery - 成功提交后无意提交的表单

> ID：14381804
> 
> 赞同：0
> 
> 时间：2013-01-17T14:56:31.393
> 
> 标签：jquery, ajax, asp.net-mvc-3, forms

我们的网站有一个注入 jQuery 对话框的表单。输入表单数据并单击提交按钮（一个 jQueryUI 对话框按钮）后，表单首先由 javascript 验证，然后提交到服务器。我发现在将一个值粘贴到一个强制的文本框并提交后，有时当我下次打开表单时，它会尝试立即提交而无需用户单击按钮（我在每次之前使用调试器语句验证了这一点`.submit()`仅当单击按钮提交表单时才被击中）。

有没有其他人遇到过意外提交表单的实例，除了服务器端验证之外，还有什么方法可以对抗它吗？

为了清楚起见，事件的顺序如下：

1.  用户单击获取表单（部分视图）并将其注入对话框的添加按钮，然后打开对话框。
2.  用户将一个值粘贴到强制文本框中（还有其他几个控件）。
3.  用户单击执行低级别验证的提交按钮并通过 ajax 提交表单，成功后关闭对话框。
4.  冲洗并重复直到：
5.  用户单击“添加”按钮，该按钮获取表单并将其注入对话框，该对话框打开并立即提交，服务器验证失败。

# Form.submit 回调

```
 $("#SearchEdit>form").submit(function (e) {
        if (TermPresent()) {
            return true;
        } else {
            e.preventDefault();
            return;
        }
    });

function TermPresent() {
    return ($("textarea#MySearch_SearchTerms").val() != "" ? true : false);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:05:11.613

您可以更改`type="submit"`为`type="button"`，然后从验证代码的底部开始，而不是允许表单自行提交。

# cuda - CUDA：Quadro 3000M 和 Tesla C1060 上相同的代码不同的结果

> ID：14381805
> 
> 赞同：0
> 
> 时间：2013-01-17T14:56:31.100
> 
> 标签：cuda, gpu, gpgpu

以下链接指向的代码适用于 Tesla C1060，但不适用于配备 Quadro 3000M 的移动工作站。

这主要是代码的作用：

[http://pastebin.com/9JKUMwZ4](http://pastebin.com/9JKUMwZ4)

Quadro 3000M 上的执行只是跳过内核并在几毫秒内输出一个空白图像。Tesla C1060 上的执行在（比如说）100 秒内输出处理后的图像。奇怪的是，在过去的几天里，c1060 上的执行也显得相当不可预测（有时会跳过内核，有时会输出奇怪的数字为 -10^12，..）。我不明白这种行为。会不会是驱动版本问题？

预先感谢您的帮助。

附言。ubuntu 11.10 上的两台机器

```
Quadro 3000M  ---> Cuda compilation tools, release 4.1, V0.2.1221
Tesla C1060   ---> Cuda compilation tools, release 4.1, V0.2.1221 
```

编辑：这个问题很可能与我的两张卡的不同 GPU 架构有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:57:00.807

你有`__syncthreads()`内部`if`声明。这是不允许的，可能会导致死锁。

请参阅[__syncthreads() 死锁](https://stackoverflow.com/q/6476613/56875)帖子。

Cuda-memcheck 和调试器是调查此类和其他问题的最佳工具。

# android - 如何停止从android中的其他应用程序打开应用程序？

> ID：14381807
> 
> 赞同：0
> 
> 时间：2013-01-17T14:56:39.243
> 
> 标签：android

我开始知道，我们可以从 android 中的其他应用程序中打开一个应用程序。所以我使用`android:exported="false"`它是为了限制它。但是当我为 Launcher 放置相同的标签时，我无法打开应用程序。

```
<activity
    android:name="SplashScreen"
    android:label="@string/app_name"
    android:screenOrientation="portrait">
     <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="*/*" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
</activity> 
```

（因为我的应用程序应该能够打开任何文件，所以我应用了 2 个意图过滤器）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T15:06:32.210

**安卓：导出**

`Whether or not the activity can be launched by components of other applications — "true" if it can be, and "false" if not. If "false", the activity can be launched only by components of the same application or applications with the same user ID.`

`The default value depends on whether the activity contains intent filters. The absence of any filters means that the activity can be invoked only by specifying its exact class name. This implies that the activity is intended only for application-internal use (since others would not know the class name).`

`So in this case, the default value is "false". On the other hand, the presence of at least one filter implies that the activity is intended for external use, so the default value is "true". This attribute is not the only way to limit an activity's exposure to other applications. You can also use a permission to limit the external entities that can invoke the activity (see the permission attribute).`

* * *

当你使用`intent-filter`任何`activity`满足你的东西时，你`intent-filter`可以打开你的`activity`.

* * *

***完全限制您的活动以供其他应用程序使用***

**1.**`Don't include any intent-filter`

**2.**`Add android:exported="false" inside your <activity> tag`

# java - 几个休眠查询中的速度问题

> ID：14381809
> 
> 赞同：0
> 
> 时间：2013-01-17T14:56:54.833
> 
> 标签：java, hibernate

我正在使用顶点和边对象构建一个图形算法，并与休眠状态保持一致。在检查边以发现它们是否处于状态时，这段代码需要做大量的工作（另一个“识别”顶点的代码应该做类似的事情）。

课程：

```
 Vertex(long id, String name);
 Edge(long id, Vertex v, Vertex w, boolean visited);
 VertexDAO(Vertex vertex);//persistence class for vertex implemented with hibernate
 EdgeDAO(Edge edge);//persistence class for vertex implemented with hibernate 
```

我有两个选项可以设置/更新图表中的已访问边：

1.  查询 DAO 对象以检索（未）访问的边缘（通过休眠）并根据需要设置它们；问题：我不知道这些操作的成本，以及当图表变大时它是否有效；在我看来，这不是最好的解决方案；

2.  测试我自己的一组边缘以检索所有（未）访问过的边缘。问题：可能我的搜索算法比休眠算法最差，如果休眠在内存中有效地管理对象并且不需要如此多地持久化或开销它们，那么与之前的替代方案相比，它可能表示性能下降。

在这种情况下，您有什么经验或提示吗？感谢您的帮助。

# python - 正则表达式将城市和州与输入字符串分开

> ID：14381811
> 
> 赞同：0
> 
> 时间：2013-01-17T14:56:57.917
> 
> 标签：python, regex

我有一些输入字符串。

```
Houston, TX
(Houston, TX)
South & West (Houston, TX)
(South & West (Houston, TX)) 
```

我正在使用这种模式，但它不适用于所有四个。

```
.*\(*(.*),\s*(.*)\)* 
```

我只希望**休斯顿**和**德克萨斯州**脱离上述输入字符串。

规则是取出括号内的东西，或者如果没有括号，就取出东西。结果列表中只有 2 个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:06:39.943

我认为我会分两步做到这一点：

```
in_paren = re.compile(r'(?:\()([^\)\(]+)(?:\))')
match = in_paren.search(ss)
parts = match.group(1) if match else ss
city,state = parts.split(',') 
```

这是一个函数：

```
>>> def find_city_state(ss):
...     match = in_paren.search(ss)
...     parts = match.group(1) if match else ss
...     return [x.strip() for x in parts.split(',')]
... 
>>> for x in ("Houston, TX","(Houston,TX)","South & West (Houston, TX)","(South & West (Houston, TX))"):
...     print find_city_state(x)
... 
['Houston', 'TX']
['Houston', 'TX']
['Houston', 'TX']
['Houston', 'TX'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:14:47.657

看看 python[正则表达式操作](http://docs.python.org/2/library/re.html)页面——我发现它在学习如何做这些类型的事情时很有用。

我不确定您是否想将城市和州分开，但您可以使用这样的[组](http://docs.python.org/2/library/re.html#match-objects)来做到这一点：

```
import re

string = ('Houston, TX ' +
         '(San Francisco, CA) ' +
         'South & West (Houston, TX) ' +
         '(South & West (Houston, TX))')

matches = re.findall("([\w\s]+),\s(\w+)", string)
for match in matches:
    print 'City: ' + match[0] + ', State: ' + match[1] 
```

输出：

```
City: Houston, State: TX
City: San Francisco, State: CA
City: Houston, State: TX
City: Houston, State: TX 
```

正则表达式：

`([\w\s]+)`第 1 组：匹配多个带有空格的单词

`,\s`逗号后跟一个空格

`(\w+)`第 2 组：匹配单个单词

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:04:04.107

```
>>> import re
>>> A="Houston, TX (Houston, TX) South & West (Houston, TX) Los Angeles, CA Los Angeles"
>>> re.findall("\w[A-Za-z ]+, [A-Z]{2}",A)
['Houston, TX', 'Houston, TX', 'Houston, TX', 'Los Angeles, CA'] 
```

`\w`= 将匹配所有以字母开头的名称

`[A-Za-z ]+`= 将匹配所有带空格的名称

`, [A-Z]{2}`= 将匹配所有缩写（两个大写字母）

# javascript - Javascript 变量不保留值

> ID：14381814
> 
> 赞同：0
> 
> 时间：2013-01-17T14:57:01.290
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我有一个从在线文件中读取数值数据的功能。虽然文件被正确检索（由警报显示的值证明），但当我尝试将其设置为输出然后返回输出时，我得到一个未定义的结果。

我试图通过范围界定教程无济于事。我究竟做错了什么？

```
function readFileFromWeb() {
    var output;

    jQuery.get('http://domain.com', function(data) {
        alert(data);
        output = data;
    });

    return output;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:59:44.003

这是应该如何通过回调函数完成的。

```
function readFileFromWeb(callback) {
    jQuery.get('http://domain.com', function(data) {
        callback && callback(data);
    });
}

// ...

readFileFromWeb(function (data) {
    alert(data);
}); 
```

这是因为`jQuery.get`它是一个异步函数，即它在执行时不会阻塞，因此会立即返回。这就是该`jQuery.get`函数需要回调函数的原因，以便在 AJAX 查询返回后触发您的回调函数。

因此，在实现自己的`readFileFromWeb`函数时，您将需要使用相同的回调模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:00:44.717

它是异步的，我已经评论了您的代码以帮助您了解事情发生的顺序。

```
function readFileFromWeb() {
    //1\. create variable.
    var output;

    //2\. make ajax call.
    jQuery.get('http://domain.com', function(data) {
        alert(data);

        //4\. set variable from ajax callback
        output = data;
    });

    //3\. return variable.
    return output;
} 
```

# jquery - JQUERY IF/ELSE 没有语法错误只是不工作

> ID：14381816
> 
> 赞同：1
> 
> 时间：2013-01-17T14:57:13.570
> 
> 标签：jquery

当页面达到 1024px 屏幕宽度时，我试图让一个框向左移动 -340 px，然后当你打开更宽的浏览器窗口时，它会恢复到原来的状态。我使用了 jslint 并更正了语法，但代码中没有发生任何事情来使其做出反应，任何帮助将不胜感激，也许我忽略了某些东西，或者我的思考过程可能略有偏差。谢谢！

```
function move() {
var box =-340;
var pagewidth = $('body').width();

if (pagewidth>1024) {
box=pagewidth-box;
box=box+'px right';
}else {
box=pagewidth-box;
box=box+'px left';

}
$('#vt_nice_slideshow180').css('margin-left', box );

}

$(document).ready(function(){
move();
$(window).resize(move);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:00:34.070

像这样改变你的电话：

```
$(document).ready(function(){
    move();
});

$(window).resize(function() {
    move();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:25:19.590

尝试这个

```
function move() {
    var pagewidth = $('body').width();
    var box = -340;
    box = pagewidth - box;
    if (pagewidth > 1024) {
       $('#vt_nice_slideshow180').css('margin-left', box + +'px right');
    }else{ 
       $('#vt_nice_slideshow180').css('margin-left', box + 'px left');
    }
} 
```

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:05:24.403

j08691 的答案与我在发布时确认的相同...

线条

```
box=box+'px right'; 
```

和

```
box=box+'px left'; 
```

无效。由于 box 是数字，因此您尝试将左边距设置为“100px right”之类的内容，这是无效的 css。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T15:11:37.727

a.您使用了无效的 CSS。该`margin`属性不接受 right 或 left 作为**值**。如果要操作**key**，请在此处添加 right 或 left 。

湾。您正在为 分配一个负值`box`，然后再次从 中减去它`pagewidth`，因此您实际上最终添加了 (--=+)

C。无需添加`px`。这是 JQuery 的默认设置，因此您可以传递一个整数。

d。最好使用 CSS[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)来处理它。

# javascript - Optimizing slideshow with hundreds of images

> ID：14381820
> 
> 赞同：3
> 
> 时间：2013-01-17T14:57:30.233
> 
> 标签：javascript, jquery

I am working on a slideshow that contains hundreds of images that the user can navigate by clicking 'next' or 'previous' buttons. The way my code is currently set up, every time a user makes a navigational decision to click next or prev, a new image is loaded at that time (image paths are stored in the array). To improve load time for every image navigated, I am trying to come up with a way to load the previous 5 images and next 5 images at any given time.

So if a user is currently on `imageAry[i]`, I would like to load `imageAry[i-5]` up until `imageAry[i+5]`. Doing so will significantly increase the feel of the how the slideshow works.

Thank you in advance.

My JavaScript

```
 var index=0;

    $('.catalog-img-container').attr("src", img_array[index]);
    $('#dialog').jqm();
    $(".next").click(function(){
        $('.catalog-img-container').attr("src", img_array[++index%arrayLength]);
    });         
    $(".previous").click(function(){
        if (--index < 0) index = arrayLength - 1;
        $('.catalog-img-container').attr("src", img_array[index%arrayLength]);
    }); 
```

My Markup

```
 <div  class="catalogFrame">
            <img class="catalog-img-container" src="">
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:17:13.123

You should preload the `images` in this case which I know is what you are asking how to do. Without going into much detail and creating something too extravagant I would do the following as a starting point:

```
 var index=0;

        //Array to hold your preloaded img objects        
        var img = new Array();
        //Initial preload
        preload(img_array, index, 5);

        $('.catalog-img-container').attr("src", img_array[index]);
        $('#dialog').jqm();
        $(".next").click(function(){
            $('.catalog-img-container').attr("src", img_array[++index%arrayLength]);
            preload(img_array, index, 5);
        });         
        $(".previous").click(function(){
            if (--index < 0) index = arrayLength - 1;
            $('.catalog-img-container').attr("src", img_array[index%arrayLength]);
            preload(img_array, index, 5);
        }); 

       //Basic function to preload images in array, from currentIndex to desired +-range
       function preload(array, currentIndex, range) {
            for (i = currentIndex; i <= currentIndex + range; i++) {
                if(i<array.length){
                   img[i] = new Image();
                   img[i].src = array[i];
                }      
             }
             for (i = currentIndex; i >= currentIndex - range; i--) {
                if(i>=0){
                   img[i] = new Image();
                   img[i].src = array[i];
                }      
             }
        } 
```

Of course you could create a more complex and detailed solution than this however this is the basic idea behind preloading your images before you show them.

Once you get the hang of it you can get wild and crazy and dynamically create and insert new `DOM` elements as the images are load allowing you to create a UI that slide/scrolls through them. But for now the way your code is set up this should work just fine for you.

I hope this works for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:22:38.850

John's solution is good. What's more you can run 'preload' function asynchronously in order to load images in background:

```
setTimeout(function() { preload(img_array, index, 5); }, 0); 
```

Additionally, you can use array of bits in 'preload' function to check if image was loaded previously. It should save time, I mean:

```
 var bitArray = new Array(NUM_IMAGES);
       for(i=0;i<NUM_IMAGES;i++) bitArray[i] = 0;

       //Basic function to preload images in array, from currentIndex to desired +-range
       function preload(array, currentIndex, range) {
            for (i = currentIndex; i <= currentIndex + range; i++) {
                if(i<array.length){
                   if(bitArray[i] == 1) continue;
                   img[i] = new Image();
                   img[i].src = array[i];
                   bitArray[i] = 1;
                }      
             }
             for (i = currentIndex; i >= currentIndex - range; i--) {
                if(i>=0){
                   if(bitArray[i] == 1) continue;
                   img[i] = new Image();
                   img[i].src = array[i];
                   bitArray[i] = 1;
                }      
             }
        } 
```

# c# - 阻止我的“实用程序”在不同架构之间给出错误

> ID：14381821
> 
> 赞同：0
> 
> 时间：2013-01-17T14:57:39.007
> 
> 标签：c#, asp.net, .net, vb.net

我主要在 WinForms 环境中编程，除此之外，还**经常**使用`TreeView`控件。

在这种情况下，我开发了一个实用程序类，它有很多我最常用的功能 - 例如将 DataTable 转换为可以输出到文本文件的分隔字符串，弹出“另存为”对话框并返回用户选择的文件名或从指定的树视图返回检查的树节点列表等。

鉴于我有这个实用程序类，我现在正试图将它添加到 ASP.Net 应用程序中，它给了我很多明显的错误，例如，`TreeNode`在 WinForms 和 ASP 之间具有不同的属性。

现在，我知道对我的第一个也是最明智的反应是将所有这些不同的功能分离到单独的实用程序文件和库中，并根据需要添加它们/适用于每个应用程序 - 我了解这样做的好处和逻辑，但我的问题更多是关于创建课程本身的理论。

有没有办法创建一个包含例如 WinForms 对象的类，并且我仍然可以将它添加到 ASP 应用程序而不会出错？换句话说，我不会使用这些函数，因为它们显然不适用于这个架构，但是有没有办法阻止错误出现，只是因为对象在这个架构中看起来是错误的，只是让编译器接受那个文件- 那我就只使用我知道适合这个架构的功能吗？

作为我的实用程序类中的一个函数的愚蠢示例，它在 winForms 中很好，但在 ASP 中出现错误：

```
Public Shared Function CreateTemporaryNode(ByVal NodeName As String) As TreeNode
    Dim TempNode As New TreeNode

    TempNode.Name = NodeName
    TempNode.Text = NodeName

    Return TempNode
End Function 
```

在这种情况下`'Name' is not a member of 'System.Web.UI.WebControls.TreeNode'`

**编辑**：只是为了澄清-我了解在这种特定情况下的不良编程习惯。我的问题更多是关于尝试了解是否有办法从编译器中“隐藏”缺少库的函数，这样一个类就可以在多个体系结构中使用，而无需为你不会使用的函数添加库/需要。

我希望这个问题有意义，并感谢您的专业知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:11:41.863

根据您展示的示例，问题出在您的实用程序类中，您没有*明确*告诉应用程序您指的是哪种类型，因此它只能假设它是它找到的第一个类型。换句话说，在声明类型时使用完全限定的路径，以便您的实用程序函数可以更*具体*，例如

```
Public Shared Function CreateTemporaryNode(ByVal NodeName As String) As System.Windows.Forms.TreeNode
    Dim TempNode as New System.Windows.Forms.TreeNode
    TempNode.Name = NodeName
    TempNode.Text = NodeName
    Return TempNode
End Function 
```

但是，这突出了另一个问题 - 因为您的实用程序类使用来自特定库的类型，它变得**依赖**于它，任何引用您的实用程序库的库/应用程序也是如此。您需要问的问题是，为了几个实用方法真的值得吗？

> 现在，我知道对我的第一个也是最明智的反应是将所有这些不同的功能分离到单独的实用程序文件和库中，并根据需要添加它们/适用于每个应用程序 - 我了解这样做的好处和逻辑

那为什么要反对呢？如您所见，没有一种*干净*的方法可以做您想做的事，无论哪种方式，您都将向不需要的库添加依赖项。

我看到你的代码很好地分成了 3 个独立的实用程序库，即

*   `Utilities`- 仅引用核心类型
*   `Utilities.Web`- 引用特定于 Web 的控件
*   `Utilities.WinForms`- 引用特定于表单的控件

如果您坚持要这样做，那么总是有可能使用[编译器指令](http://msdn.microsoft.com/en-us/library/ed8yd1ha%28v=vs.71%29.aspx)，例如

```
#if TARGET_WINFORMS

... // win form specific methods

#endif

#if TARGET_WEB

... // web specific methods

#endif

... // core methods 
```

这将允许您编译您的实用程序以针对特定架构，从本质上去除任何不必要的代码。它涉及一些额外的内务管理，但它可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:25:24.040

直接复制类文件并使用它是行不通的，因为类中的代码在不引用依赖程序集（WinForms）的情况下将无法编译。

但是应该起作用的是以下内容：

*   创建一个单独的项目来保存该类。这个项目应该有对 webforms 程序集以及 winforms 程序集的引用。
*   为核心内容创建一个类。
*   为 WinForms 的东西创建一个类。
*   为 Web 内容创建一个类。

这样，您可以将所有代码添加到单个程序集中。

这是因为如果您不使用网站中的 WinForms 类，则不会加载依赖的 winform 程序集（这是我们想要的，因为它们要么无法加载，要么在正在运行的网站进程中不需要）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:08:03.903

我认为这是不可能的，因为它是一种完全不同类型的对象。

当然，在它的上下文中，它具有相同的责任，但您不能在 ASP 网络表单中使用 Winform Treenode。

# java - 春季电子邮件调度程序发送太多电子邮件

> ID：14381822
> 
> 赞同：0
> 
> 时间：2013-01-17T14:57:51.910
> 
> 标签：java

我尝试使用 spring 调度程序发送一封电子邮件，以便它每天在上午 9 点和下午 4 点发送一封电子邮件，但我遇到的问题是调度程序将发送 4 封电子邮件而不是 1 封当它执行作业时。这是我目前在我的 spring 配置文件中的内容：

```
 <!-- Email Notification Job -->
<bean id="emailJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
    <property name="name" value="emailNotification" />
    <property name="group" value="notification" />
    <property name="targetObject" ref="notificationService" />
    <property name="targetMethod" value="createNotification" />
    <property name="concurrent" value="false" />
</bean>
    <!-- Email job description -->
<bean id="emailNotification" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="cronExpression" value="0 0 9,16 * * ?" />   <!-- Starts at 9am and 4pm everyday -->
    <property name="jobDetail" ref="emailJobDetail" />
</bean>
     <!-- Scheduler -->
<bean id="scheduler" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
        <list>
            <ref bean="emailNotification"/>
        </list>
    </property>
</bean> 
```

因此，这将在 spring 服务“notificationService”中执行 createNotification 方法，该方法将向用户发送电子邮件。有没有人对这个问题有更好的理解？

# servlets - 我应该设置 response.setContentLength() 标头吗？

> ID：14381825
> 
> 赞同：1
> 
> 时间：2013-01-17T14:58:08.770
> 
> 标签：servlets, http-content-length

如果我`Content-Length`在发送`HttpServletResponse`包含 zip 文件的文件时未指定标头会怎样？

我做了一些测试，似乎默认情况下标题设置为正确的文件长度。我能确定这总是发生吗？我什么时候可以找到一些关于？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:53:52.607

如果实际响应内容长度完全适合响应缓冲区，通常为 2KB（取决于服务器的 make/version/config），则将设置内容长度标头。但是，如果实际响应内容长度大于响应缓冲区，那么它将在到达响应内容结尾之前被刷新，那么 servlet 将使用[分块编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)发送响应并忽略任何设置内容长度的尝试标题。

这在下面引用的 javadoc 中[`HttpServlet#doGet()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#doGet%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)提到：

> ...
> 
> 在可能的情况下，设置 Content-Length 标头（使用[`ServletResponse.setContentLength(int)`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#setContentLength%28int%29)方法），以允许 servlet 容器使用持久连接将其响应返回给客户端，从而提高性能。如果整个响应都适合响应缓冲区，则会自动设置内容长度。
> 
> 使用 HTTP 1.1 分块编码时（这意味着响应具有 Transfer-Encoding 标头），请勿设置 Content-Length 标头。
> 
> ...

使用“正常”编码，数据作为一个连续块发送。

```
actualContent 
```

使用分块编码，数据以如下所示的块发送

```
part1LengthInHexadecimal
actualPart1Content

part2LengthInHexadecimal
actualPart2Content

part3LengthInHexadecimal
actualPart3Content

0 
```

十六进制的部分长度指示客户端下一个数据块有多大（这样它就不会“意外地”将下一个块解析为当前块的一部分）。最后，客户将零件粘合在一起。顺便说一句，这也是在响应中使用 Gzip 时的默认行为，原因很明显，最终内容长度事先是未知的。

[另请参阅wikipedia](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)中的示例。

请注意，当在文件下载中省略内容长度时，用户体验将是文件下载进度未知。即最终用户将看不到文件大小和剩余字节/时间的任何指示。如果这种用户体验对您很重要，那么您应该事先设置内容长度。您可以通过首先写入内存缓冲区（例如`new ByteArrayOuputStream(bytes)`或临时文件（例如，因此您可以通过或`Files#createTempFile()`获取内容长度，然后最后将该临时缓冲区/文件写入响应来做到这一点。`bytes.length``file.length()`

# javascript - JavaScript 数据访问设计

> ID：14381828
> 
> 赞同：3
> 
> 时间：2013-01-17T14:58:25.907
> 
> 标签：javascript, jquery, single-page-application

我正在编写一个单页应用程序，并已为客户端编写数据访问层。我的问题涉及它的正确设计。虽然我确实理解 JS 是以回调为中心的，但我不得不怀疑是否没有更好的方法来进行数据检索。以下是我当前的数据访问调用如何使用回调格式化的示例：

```
$interface.getDashboard = function (callback) {
    callback({MyApplications:[]});
}; 
```

以下是我正在考虑消除各地回调的需要：

```
$interface.getApplications = function () {
    var v = amplify.store("api.applications");
    if (!v) {
        v = [];
        _get("/api/applications", null, function (results) {
            amplify.store("api.applications", results, { expires: _cacheTimeOut });
            dataRefresh();
        });
    }

    return v;
}; 
```

在上面的代码中，`dataRefresh()`将告诉所有适用的订阅者刷新他们的数据。所以我想你可以说它仍在使用回调，但以不同的方式。

**有一个更好的方法吗？我以前从未为 javascript 编写过强大的数据访问层，并且想知道是否有一种模式可以作为约定或启发式解决方案遵循？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:10:03.830

我目前正在处理关于如何设计和构建我正在开发的新企业级应用程序的 Javascript 端的相同问题。

许多 SPA 示例/模板（例如 HotTowel）非常适合向您展示如何开始使用 SPA，但在大规模实施方面并没有提供太多帮助。

Nicholas Zakas 的这次[演讲](http://www.youtube.com/watch?v=vXjVFPosQHw)提出了一个很好的解决方案。演讲的幻灯片可以在[这里](http://www.slideshare.net/nzakas/scalable-javascript-application-architecture)找到。

总而言之，您的客户端层应包括：

1.  一组模块 - 这些模块为您的应用程序提供离散的功能单元。它们应该完全相互独立，并且只知道沙盒。

2.  沙箱 - 这为模块提供了一致的外观接口，并充当模块和应用程序核心之间的控制器。

3.  应用程序核心 - 这是负责模块管理、相互通信和您的应用程序所需的任何其他核心功能（例如 ajax 请求）的中介。只有应用程序核心应该知道您正在使用的基础库。

4.  基础库——这些库提供浏览器规范化和任何其他通用功能，例如 DOM 操作。

此[链接](http://addyosmani.com/largescalejavascript/)扩展了此设计并提供了更多详细信息。

我知道这个答案并没有专门针对您的数据访问层，但作为更一般的架构概述，您可能可以将这些概念应用于您的特定场景。

**编辑：**

[AuraJS](https://github.com/aurajs)是由 Addy Osmani 开发的 Zakas 概述的理论的具体实现。它目前处于开发者预览阶段，但它看起来是一个很好的创意起点。

# powershell - 基本功能逻辑

> ID：14381829
> 
> 赞同：0
> 
> 时间：2013-01-17T14:58:30.387
> 
> 标签：powershell

我正在定义一个从播放器“X”切换到播放器“O”的函数。*当我在没有*函数的情况下运行这个小代码块时，它会给我一个 X。当我使用定义的函数运行它时，它返回为 O。正常运行它和从 Function 运行它有什么区别？

```
$playgame = "True"
$player = "O"

#Function
Switch-play
Write-host $player

#Switch Player turn
Function Switch-Play{
    if ($playgame = "True") {
        if ($player -eq "X") {$player = "O"}
        else {$player = "X"}
        }
} 
```

谢谢

编辑：起初我怀疑将变量定义为 $script:player，但这并没有真正解决任何问题。

编辑：更改为 Switch-Play 而不是 Switch-play

```
PS C:\Users\scout> $playgame = "True"
$player = "O"
$player
Switch-Play
$player
Switch-Play 
$player

#Switch Player turn
Function Switch-Play{
    if ($playgame = "True") {
        if ($player -eq "X") {$player = "O"}
        else {$player = "X"}
        }
}
O
O
O 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:08:07.773

变量范围问题在这里。改变这样的功能：

```
Function Switch-Play{
    if ($playgame) {
        if ($global:player -eq "X") 
            {
              $global:player = "O"}
        else 
            {                
              $global:player = "X"
            }
        }
} 
```

阅读范围：[http ://technet.microsoft.com/en-us/library/hh847849.aspx](http://technet.microsoft.com/en-us/library/hh847849.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:14:35.117

或者，您可以从函数返回 player 的值：

```
Function Switch-Play
{
    param
    ( 
      $playgame,
      $player
    )
    if ($playgame -eq $true) 
    { 
        if ($player -eq "X") 
        {
            $player = "O"
        }
        else 
        {
            $player = "X"
        }
        $player
    }
}

$player = "O"
$player = Switch-play -playgame $true -player $player
Write-host $player 
```

# node.js - socket.io 和 RedisStore：如何在不创建服务器的情况下向房间广播？

> ID：14381831
> 
> 赞同：0
> 
> 时间：2013-01-17T14:58:37.470
> 
> 标签：node.js, socket.io

我的应用程序分为多个应用程序（管理员、客户端、工作人员）。

我将 socket.io 与 RedisStore 一起使用，当管理员登录时，我设置了 socket.io 连接并将套接字连接到名为 user_id 的房间

如何在不为 socket.io 创建服务器来收听的情况下从不同的应用程序（比如说从工作人员）向这个房间广播？

io.set（设置 RedisStore）是为`var io = require('socket.io').listen(server)`

我需要直接发布到redis频道吗？如果是这样，我怎么知道它的名字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:51:29.337

让多个 Node 实例通过消息进行通信的一种方法是使用消息代理（消息队列服务）。每个 Node 实例都绑定到 MQ 中的特定通道，例如“general_chat”或“maintenance”。然后所有实例都会收到这些消息。您可以使用点语法“chat.room1”和“chat.admin”添加多个绑定级别。查看 ActiveMQ、RabbitMQ、SQS 和其他类似服务，其中一些是开源的。

# jenkins - Jenkins 中的用户访问权限，我如何才能让某人访问只能查看工作

> ID：14381832
> 
> 赞同：18
> 
> 时间：2013-01-17T14:58:38.057
> 
> 标签：jenkins

Jenkins 中的用户访问权限，如何让某人访问只能查看工作。

我想设置一个管理员，其他人只能看到工作。有人可以告诉我怎么做吗

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-17T15:09:29.037

Jenkins Wiki 很好地解释了这是如何完成的：[标准安全设置](https://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup)。

基本上你这样做：

*   转到 Jenkins -> 管理 Jenkins -> 配置全局安全性。
*   选中“启用安全性”。
*   将“Jenkins 自己的用户数据库”设置为安全领域。
*   勾选“允许用户注册”
*   选择“基于矩阵的安全性”
*   检查匿名上的“整体阅读”。
*   在矩阵中添加您的管理员帐户，选中每个框。
*   保存配置并使用管理员用户名注册以设置密码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T15:08:16.327

转到“管理 Jenkins”->“配置系统”并在“授权”下选择“基于矩阵的安全性”。然后，您可以准确配置每个用户应该能够做什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-08T09:57:25.250

一种简单的方法：我进入 Manage Jenkins > Configure Global Security 并选中**Allow anonymous read access**。

现在，任何没有凭据的机构都可以查看工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-30T06:50:22.753

**在 Jenkins 中创建仅具有 READ 权限的新用户的步骤**

**创建新用户的步骤**

1.  登录詹金斯
2.  去管理詹金斯
3.  转到创建用户
4.  输入所有详细信息 - 用户名、密码、确认密码、全名、电子邮件
5.  选择创建用户

**分配只读访问权限的步骤**

1.  登录詹金斯
2.  去管理詹金斯
3.  转到配置全局安全性
4.  选择 Jenkins 自己的用户数据库
5.  勾选“允许用户注册”复选框</li>
6.  选择基于矩阵的安全性
7.  选择“添加用户或组”按钮</li>
8.  写入用户或组名 -**写入您创建的用户的用户名**
9.  **在 –总体、工作、视图**下勾选 3 读取选项
***   保存并申请**

 ****使用新的用户 ID 登录并检查是否反映了更改****

# jquery - 查找所有具有类 x 并且在字段集中可见的表行并选中它们

> ID：14381833
> 
> 赞同：0
> 
> 时间：2013-01-17T14:58:38.210
> 
> 标签：jquery

我很抱歉没有更好的标题..

我成功使用以下行：

```
$('.checkall').unbind('click').click(function () {
    $(this).parents('fieldset:eq(0)').find(':checkbox').attr('checked', this.checked);
}); 
```

单击 .checkall 时，将检查字段集中的所有表行。现在我在我的表格中使用分页，它将不在首页上的行设置为类'canView display:none'；

如何使用 canView 类过滤字段集中的每个复选框，但没有 display:none;

IE：

```
$(this).parents('fieldset:eq(0)').find('tr > canView:VISIBLE').find(':checkbox').attr('checked', this.checked); 
```

但这不起作用他们的方式我认为它应该:)

**注意**：每个 tr 都有 canView 类，分页时只改变显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:01:54.570

您现有的代码是这样的：

```
$(this).parents('fieldset:eq(0)').find('tr > canView:VISIBLE').find(':checkbox').attr('checked', this.checked); 
```

问题在于`.find('tr > canView:VISIBLE')`部件中的选择器。

`'tr > canView:VISIBLE'`将查找`<canView>`标记的所有可见元素，它们是元素的直接后代`<tr>`。你想要`<tr>`类的元素`canView`是可见的，所以你需要这个：

```
.find('tr.canView:visible') 
```

# windows-phone-7 - 在 WP7 Silverlight 中保存游戏的简单方法？

> ID：14381836
> 
> 赞同：1
> 
> 时间：2013-01-17T14:58:46.523
> 
> 标签：windows-phone-7, savestate

在 WP7 Silverlight 中保存游戏状态的最佳方法是什么？我更喜欢将其保存在文本文件中。我想在应用程序进入后台时保存游戏（例如有人打电话，用户点击“返回”等）或关闭。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:50:20.263

**update**，这段代码来自以下文章：

[用于后台任务、吐司和瓷砖的](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2011/11/simple-wp7-mango-app-for-background.html) [简单 WP7 芒果应用程序 用于后台任务、吐司和瓷砖的简单 WP7 芒果应用程序：代码说明](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2011/11/this-is-continuation-of-this-post.html)

隔离存储运行良好。

这是我用来将实例序列化和反序列化为隔离存储中的 json（或 xml）的类。这个例子是使用[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)但它可以被关闭。

使用、读取和写入：

```
public class MyClass {
    public void Save() {
        MutexedIsoStorageFile.Write(this, "MyClass.json", "MYCLASSJSON");
    }

    public static MyClass Load() {
        return MutexedIsoStorageFile.Read<MyClass>("MyClass.json", "MYCLASSJSON");
    }
}        

public static class MutexedIsoStorageFile
    {
        public static T Read<T>(string fileName, string mutexName) where T : new()
        {
            var mutexFile = new Mutex(false, mutexName);
            var model = new T();
            mutexFile.WaitOne();

            try
            {
                using (var store = IsolatedStorageFile.GetUserStoreForApplication())
                using (var stream = new IsolatedStorageFileStream(fileName, FileMode.OpenOrCreate, FileAccess.Read, store))
                using (var reader = new StreamReader(stream))
                    if (!reader.EndOfStream)
                    {
                        //var serializer = new XmlSerializer(typeof (T));
                        //model = (T) serializer.Deserialize(reader);                       
                        model = JsonSerializer.DeserializeFromReader<T>(reader);
                    }
            }
            finally
            {
                mutexFile.ReleaseMutex();
            }

            return model;
        }

        public static void Write<T>(T data, string fileName, string mutexName)
        {
            var mutexFile = new Mutex(false, mutexName);
            mutexFile.WaitOne();

            try
            {
                using (var store = IsolatedStorageFile.GetUserStoreForApplication())
                using (var stream = new IsolatedStorageFileStream(fileName, FileMode.Create, FileAccess.Write, store))
                {
                    //var serializer = new XmlSerializer(typeof (T));
                    //serializer.Serialize(stream, data);
                    JsonSerializer.SerializeToStream(data, stream);
                }
            }
            finally
            {
                mutexFile.ReleaseMutex();
            }
        } 
```

# android - 如何在我的 android 应用程序中使用 Printershare 应用程序

> ID：14381840
> 
> 赞同：0
> 
> 时间：2013-01-17T14:59:07.237
> 
> 标签：android

我想在我的应用程序中打印 pdf 文件。所以，我想使用安装在我的手机中的打印机共享应用程序。

如何使用该打印机共享应用程序？以及如何通过意图发送 pdf 文件路径。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:36:56.713

这可能会帮助您：

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setPackage("com.dynamixsoftware.printershare");
i.setDataAndType(data_uri, data_type);
startActivity(i); 
```

在哪里：

`data_uri`-`Uri`要打印的对象，例如“file:///sdcard/something.pdf”或“content://something”

`data_type`- MIME 类型。支持以下 MIME 类型：

`"application/pdf"`
`"text/html"`
`"text/plain"`
`"image/png"`
`"image/jpeg"`
`"application/msword"`- .doc
`"application/vnd.openxmlformats-officedocument.wordprocessingml.document"`- .docx
`"application/vnd.ms-excel"`- .xls
`"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"`- .xlsx
`"application/vnd.ms-powerpoint"`- .ppt
`"application/vnd.openxmlformats-officedocument.presentationml.presentation"`- .pptx

# vb.net - VShost32.exe 停止工作，但我可以继续调试

> ID：14381842
> 
> 赞同：5
> 
> 时间：2013-01-17T14:59:16.620
> 
> 标签：vb.net

我的应用程序首先从数据库中读取数据，然后创建要上传到 SFTP 服务器的 XML 文档。

当我运行应用程序时出现错误：

`VShost32.exe stopped working`

当我在调试模式下运行应用程序并单步执行时，我找到了弹出错误的点，但我仍然可以继续执行下一步（只要我不关闭弹出窗口）。然后，该做的事，都做完了。完全没有问题。

那么为什么我会收到此错误消息？完全不清楚是什么原因造成的。

另外，我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T18:17:40.943

VSHost32.exe 是 Visual Studio 托管进程。它具有 CLR 的自定义托管版本，使调试更容易。实际的进程名称是 yourapp.vshost.exe，您可以在任务管理器中看到它正在运行。

所以消息的真正含义是*你的*程序已经崩溃，但不是调试器可以识别的方式。如果您使用的库启动自己的非托管线程并且该线程因未处理的异常而崩溃，这在技术上是可行的。默认情况下，调试器只能诊断在托管代码启动的线程上引发的异常。

在此崩溃后您能够继续调试是非常不寻常的并且可能非常不健康。如果您使用的库使用 SetUnhandledExceptionFilter() 安装自己的未处理异常过滤器并吞下异常，这在技术上是可行的。但是在托管过程看到它*之后才会这样做。*这是非常了不起的。

通过启用非托管调试器获得更好的诊断。项目+属性，调试选项卡，勾选“启用非托管代码调试”选项。然后 Debug + Exceptions，勾选 Win32 Exceptions 的 Throw 复选框。重现崩溃场景，调试器现在应该在抛出异常时停止。查看调用堆栈以获取提示。您将看不到任何可识别的内容，因为崩溃的代码可能没有任何调试信息。但希望包含代码的 DLL 的名称可以让您了解哪个库对此负责。然后联系图书馆的供应商并询问详细信息。

# php - CakePhp 身份验证登录问题

> ID：14381843
> 
> 赞同：0
> 
> 时间：2013-01-17T14:59:28.897
> 
> 标签：php, cakephp

我目前正在使用 CakePhp 在网站上设置简单的身份验证，用户可以访问任何页面，但有一个需要登录的管理系统。

授权工作正常，只有管理页面受到限制并被重定向到登录页面。我遇到的问题是我无法以管理员身份登录。我在数据库中插入了一条管理员记录，其密码已经过哈希处理。但是当我尝试登录时，它并没有`if($this->Auth->login())`像它应该做的那样下降。这是我正在使用的代码：

**应用控制器：**

```
class AppController extends Controller {

    public $components = array(
       'Session',
       'Auth' => array(
           'loginRedirect' => array('controller' => 'admins', 'action' => 'index'),
           'logoutRedirect' => array('controller' => 'admins', 'action' => 'index'),
       )
   );

   function beforeFilter() {

        if ($this->params['controller'] != 'admins') {
          $this->Auth->allow('*');
        }
        $this->Auth->loginAction = array('controller' => 'admins', 'action' => 'login');
  }

} 
```

**管理员控制器：**

```
class AdminsController extends AppController {
var $components = array('Auth');

public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('login');//allow the login page to be accessed.
}

public function login() {
    if($this->request->is('post')) {

            if($this->Auth->login())
            {
                return $this->redirect(array('controller' => 'admins', 'action' => 'index')); 
            }
            else
            {
                //why is it getting to this point with correct details?
                debug('failed'); exit;
            }
    }
} 
```

不确定我是否遗漏了一些意味着`$this->auth->login()`失败的东西？我确实尝试将其全部重命名为 User 而不是 Admin 以查看是否是导致他出现问题的原因，但结果仍然相同。通过 cake 添加管理员，使用 authcomponent 对密码进行哈希处理，如下所示：

```
class Admin extends AppModel {

    public function beforeSave($options = array())
    {
        if(isset($this->data['Admin']['password'])) {
            $this->data['Admin']['password'] = AuthComponent::password($this->data['Admin']['password']);
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T19:25:49.483

默认情况下，Auth 使用用户身份验证模型。根据您的输出，`debug($this->request)`您似乎正在使用一个名为“Admin”的模型。`userModel`因此，在 Auth 组件设置中指定使用密钥。查看手册了解具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:31:39.660

万一有人遇到同样的问题，我找到了导致问题的原因，这只是一个愚蠢的错误。

我已经在 AppController 中设置了 Auth 组件，然后又在 AdminsController 中设置了，正如您从上面的代码中看到的那样。这是导致问题的原因，因为它仅在 AppController 中需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:43:51.500

我过去也遇到过类似的问题，我发现有时直接将`$this->request->data`属性传递到方法中是可行的。`AuthComponent::login()`像这样：

```
$this->Auth->login($this->request->data) 
```

唯一的问题是只有您传递的信息才会被放入会话中。因此，在您的情况下，您只能从会话中访问用户名和密码。

我敢肯定，为什么这不能按您的预期工作是有原因的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T00:31:23.153

您没有指定使用的 CakePhp 版本。`allow`从 2.0 升级到 2.3 时需要更改参数 - [CakePhp Cookbook / ACL中的参考](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)

```
public function beforeFilter() {
    parent::beforeFilter();

    // For CakePHP 2.0
    $this->Auth->allow('*');

    // For CakePHP 2.1 and up
    $this->Auth->allow();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-25T23:46:43.510

您不需要在管理控制器中定义 Auth。Insted 您可以使用相同的 login.ctp 文件为用户和管理员登录（使用 swith case 进行登录），在 Admincontroller 中使用此代码在 beforerender

```
if($this->Session->read('Auth.User.role') != 'admin')
{
 $this->Session->setFlash('Hack Attempt detecetd via.'$_SERVER['REMOTE_ADDR']);
$this->redirect('/logout');
} 
```

在 usermodel 中，在保存前将 Admin 替换为 User

# php - 前 x 行的字段总和，每个后续行偏移 +1

> ID：14381847
> 
> 赞同：0
> 
> 时间：2013-01-17T14:59:35.170
> 
> 标签：php, mysql, sum, offset

我在 mysql 中有一个表，它有 100 行，其 id 不连续，但可以按日期字段排序。

我需要生成一个查询，该查询选择 10 个最旧记录的字段总和，然后选择记录 2 到记录 11 的字段总和，依此类推，直到达到 90-100，这些结果将按第一列分组，即一个数字来显示它在计算中的位置。

前任：

```
Record_id   Sum(field-a) sum(field-b ) sum(field-c)  rows used:
group1      6            3             1             1-10
group2      7            3             0             2-11
group3      7            2             1             3-12 
```

此外，正在添加新行，并且这些计算需要在每个新行添加时重新计算，采用最新的 100 行，即第 1 行是忽略第 101 行成为第 100 行。

希望这是有道理的。

如果这对 mysql 来说太多了，那么 php 也是一种选择

我已经尝试了一些基本的选择语句，每个字段的总和限制为 10 条记录或 100 条记录，我正在考虑限制 10 偏移量 1，然后偏移量增加。

我可以选择创建新表或视图。

提前感谢任何可以帮助我进步的想法或代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:08:47.767

我想我明白你想要什么，但你的示例查询引用`a`,`b`和`c`.

要获得部分累积和，您确实需要一个序列号。在 MySQL 中，您可以使用相关子查询来获得此信息。其余的是一个自连接，然后是一个聚合：

```
select concat('group', t.seqnum), sum(t.field) as sum,
       MIN(t2.seqnum) as firstrow, max(t2.seqnum) as lastrow
from (select t.*,
             (select count(*) from t t2 where t2.date <= t.date) as seqnum
      from t
     ) t join
     (select t.*,
             (select count(*) from t t2 where t2.date <= t.date) as seqnum
      from t
     ) t2
     on t2.seqnum between t.seqnum and t.seqnum + 10
group by t.seqnum 
```

注意：此 SQL 未经测试，因此可能存在语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:14:35.577

考虑这个例子。此查询返回每行加上前 3 行的总和。我在此插图中使用了一组连续的数字，但该技术在您的桌子上也同样适用……

```
SELECT * FROM ints;
+---+
| i |
+---+
| 0 |
| 1 |
| 2 |
| 3 |
| 4 |
| 5 |
| 6 |
| 7 |
| 8 |
| 9 |
+---+

SELECT a.i
     , SUM(b.i) ttl
  FROM 
     ( SELECT x.*, COUNT(*) rank FROM ints x JOIN ints y ON y.i <= x.i GROUP BY i ) a
  JOIN
     ( SELECT x.*, COUNT(*) rank FROM ints x JOIN ints y ON y.i <= x.i GROUP BY i ) b
    ON b.rank BETWEEN a.rank-3 AND a.rank
 GROUP 
    BY a.i;
+---+------+
| i | ttl  |
+---+------+
| 0 |    0 |
| 1 |    1 |
| 2 |    3 |
| 3 |    6 |
| 4 |   10 |
| 5 |   14 |
| 6 |   18 |
| 7 |   22 |
| 8 |   26 |
| 9 |   30 |
+---+------+ 
```

# r - 检查 data.table 是否在函数中键入，R

> ID：14381855
> 
> 赞同：5
> 
> 时间：2013-01-17T15:00:07.317
> 
> 标签：r, data.table

我想检查`data.table`我的函数正在运行的 a 是否已`key`编辑。如何做到这一点？例如：

```
x = data.table(a=1:100, b=100:1)
setkey(x, a)
f = function(v) {v+1}
x[,f(b),by=a] 
```

我想检查一下*里面* `f`是否设置了钥匙`x`以及那`key`是什么

`f`在这种情况下，这将需要访问从中调用的对象`x`。这可能`data.table`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:41:06.673

```
f = function(v) {
    cat("haskey(caller's x) is",eval(quote(haskey(x)), sys.frame(2)),"\n")
    # x in line above = name of first argument to `[.data.table`
    v+1
}
DT = data.table(a=1:3,foo=1:6)
DT[,f(foo),by=a]
haskey(caller's x) is FALSE 
haskey(caller's x) is FALSE 
haskey(caller's x) is FALSE 
   a V1
1: 1  2
2: 1  5
3: 2  3
4: 2  6
5: 3  4
6: 3  7

setkey(DT,a)
DT[,f(foo),by=a]
haskey(caller's x) is TRUE 
haskey(caller's x) is TRUE 
haskey(caller's x) is TRUE 
   a V1
1: 1  2
2: 1  5
3: 2  3
4: 2  6
5: 3  4
6: 3  7
> 
```

但是你为什么需要那个？

# qt - 槽函数结束后出现Qt小部件操作

> ID：14381858
> 
> 赞同：0
> 
> 时间：2013-01-17T15:00:12.973
> 
> 标签：qt

我是 Qt 的新手，下面的问题让我抓狂。我想有一个简单的解决方案，但到目前为止我在谷歌等方面没有成功。

我有一个完成的控制台应用程序，我的目标是为这个应用程序添加一个 gui。我正在使用 VS2010 Ultimate 并包含 Qt 插件。然后我创建了一个 Qt 项目并包含了第二个项目，其中包括我的应用程序。结构如下所示：

主.cpp：

```
#include "PROJECT_gui.h"
#include <QtGui/QApplication>

#include <PROJECT.hpp>

using namespace PROJECT;

int main(int argc, char *argv[]){
  QApplication a(argc, argv);
  PROJECT_GUI w;
  w.show();
  w.setup(argc, argv);
  return a.exec();
} 
```

PROJECT_gui.hpp：

```
#include <QtGui/QMainWindow>
#include "ui_PROJECT_gui.h"
#include <PROJECT.hpp>

using namespace PROJECT;

class PROJECT_GUI : public QMainWindow {
   Q_OBJECT

public:
   PROJECT_GUI(QWidget *parent = 0, Qt::WFlags flags = 0);
   ~PROJECT_GUI();
   void setup(int argc, char *argv[]) {
   PROJECTEngine_->setGui(ui);
   PROJECTEngine_->setup(argc, argv);}

   Ui::PROJECT_GUIClass ui;

private:
   boost::shared_ptr<PROJECTengine> PROJECTEngine_; 
}; 
```

项目.hpp：

```
#include <QtCore/qobject.h>
#include "ui_PROJECT_gui.h"

namespace PROJECT {
class PROJECTengine : public QObject {
   Q_OBJECT
public:
   PROJECTengine();

#ifdef _Qt      
   // Gui functions
   void setGui(Ui::PROJECT_GUIClass& ui){
      ui_ = boost::shared_ptr<Ui::PROJECT_GUIClass>(&ui);
   }

   void guiOut(QString text){
      ui_->textBrowserOutput->append(text);
   }
#endif
public slots:
   void createScenarios();

private:
#ifdef _Qt
   // GUI Objects
   QString outputText_;
   boost::shared_ptr<Ui::PROJECT_GUIClass> ui_;
#endif
}; 
```

插槽 createScenarios 连接到一个按钮信号：

```
QObject::connect(ui.toolButtonSzenarienBerechnen, SIGNAL(clicked()),  &*PROJECTEngine_, SLOT(createScenarios())); 
```

方法 createScenarios() 看起来像这样：

```
void PROJECTengine::createScenarios(){
   Step1: some code doing a lot of time consuming stuff
#ifdef _Qt
   guiOut("Step 1 ready!");
#endif
  Step2: some code doing a lot of time consuming stuff
#ifdef _Qt
   guiOut("Step 2 ready!");
#endif
  Step3: some code doing a lot of time consuming stuff
#ifdef _Qt
   guiOut("Step 3 ready!");
#endif
} 
```

所有这些似乎都以某种方式起作用。如果我按下按钮 createScenarios() 被调用。所有耗时的代码部分都已完成，gui 输出也可以工作，但时间是我的问题。我想要的是，在完成步骤 i 后，文本“步骤 i 准备就绪！” 显示在我的 gui 中。但这不会发生。相反，所有步骤都被执行，最后三个输出： 步骤 1 就绪 步骤 2 就绪 步骤 3 就绪 立即显示在我的 gui 中。

我现在完全无助，尝试了几件事。在第一次试验中，我没有将我的 Ui::PROJECT_GUIClass 引用包含到 PROJECTengine 类中。相反，我在 PROJECTenginge 类中有一个信号“输出”：

```
signals:
   void output(QString); 
```

并将其连接到我的 textbrowser 小部件的 append 方法：

```
QObject::connect(&*PROJECTEngine_, SIGNAL(output(QString)), ui.textBrowserOutput, SLOT(append(QString))); 
```

我没有调用 guiOut，而是在 createcenarios() 方法中抛出了一个输出信号。不知道这些方法中的一种是否更可取？但结果和上面一样。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:14:59.630

调用[QApplication::processEvents();](http://doc.qt.digia.com/qt/qcoreapplication.html#processEvents) 每一步之后。您有这种行为是因为`ui.textBrowserOutput->append()`（直接或通过发出信号无关紧要）的每次调用都将放入消息队列并将控制权返回给您的函数。当你离开它时，Qt 开始执行队列中的每条消息。`QApplication::processEvents();`告诉 Qt 现在就做，但不是你的函数什么时候结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:37:15.673

如果您想避免调用`processEvents`，您还可以通过为按钮单击槽中的 3 个步骤中的每一个发出一个信号来分阶段执行您的操作。`Qt::QueuedConnection`当您将这些信号连接到 3 个不同的插槽时，您可以使用。这些插槽中的每一个都将在按钮插槽退出后执行您的步骤之一。`guiOut`在每个插槽中调用您的。这样做的最终结果是您的按钮单击插槽队列 3 个后续事件，这些事件按照它们发出的顺序进行处理。

# spring - 将 NULL 与 Hibernate 过滤器和 HQL 一起使用

> ID：14381860
> 
> 赞同：4
> 
> 时间：2013-01-17T15:00:20.363
> 
> 标签：spring, hibernate, filter, null, annotations

我正在使用如下定义的 Hibernate 过滤器：

```
@FilterDef(
    name = "DeptFilter",
    parameters = {
        @ParamDef(name = "schoolCode", type = "string"),
        @ParamDef(name = "deptCode", type = "string")
    }
)
@Filter(
    name = "DeptFilter",
    condition = "(:schoolCode = schoolCode and (deptCode IS NULL or :deptCode = deptCode))"
) 
```

在我的情况下，所有部门都可以使用一些数据，在这种情况下，我将部门值保持为 NULL。

```
Filter sessionFilter = session.enableFilter("DeptFilter");
sessionFilter.setParameter("schoolCode", schoolId.getSchoolCode());
sessionFilter.setParameter("deptCode", schoolId.getDeptCode());

Query query = session.createQuery("from Inbox where assignedTo = :assignedTo ")
        .setParameter("assignedTo", userRole); 
```

当我将 NULL 值作为 Dept Code 参数传递时。我收到以下异常：

```
Caused by: org.hibernate.HibernateException: Filter [DeptFilter] parameter [deptCode] value not set 
```

我也尝试使用空字符串（“”），但在这种情况下，我没有得到空白/空部门 ID 的记录。

你能告诉我如何处理过滤器中的 NULL 值吗？

问候，

希里什语

# python - 通过 Python 脚本向 Inkscape 中的对象添加节点

> ID：14381863
> 
> 赞同：10
> 
> 时间：2013-01-17T15:00:28.477
> 
> 标签：python, inkscape

这个问题是针对具有 Inkscape 扩展的 Python 编码经验的人。其他人不必浪费时间，除非他们真的喜欢挑战！

我编写了一个 Python 扩展来计算不同线/折线对象的线段之间的交点。我想在这些交点处将新节点附加到两个对象（显然以正确的节点路径顺序），但我不知道如何解决这个问题。其他扩展脚本中的代码（例如“Modify Path\Add Nodes...”）包括使用`node.set()`，但我无法弄清楚它应该如何工作。如果需要，该脚本可[在此处](https://dl.dropbox.com/u/46043231/apps/AddIntersectNodes.zip)获得，但我看不出它有什么帮助，因为它没有问题 - 它只是产生交点坐标。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-21T20:13:59.180

我知道这是很久以前的事了，但我刚刚写了一个小扩展，允许您输入几行 python，并在选定的对象上迭代它。它带有代码示例和文档指针（因为inkscape python 模块不是最好的文档！）。

缺点是，如果您的脚本返回格式错误的文档，它会使 inkscape 严重崩溃。但它适用于快速破解和测试代码片段。

*   [http://smanohar.com/inkscape.php](http://smanohar.com/inkscape.php)

也许这对其他人也有用。

# css - 使用另一个 div 修剪 div 不起作用

> ID：14381866
> 
> 赞同：0
> 
> 时间：2013-01-17T15:00:42.457
> 
> 标签：css, html

我正在尝试移动另一个 div 内的 div，以便我可以“修剪”第一个 div 的底部（如果“修剪”不是正确的术语，我很抱歉）

`div id="ClockObj"`在里面`div id="ClockFrame"`，我想要`div id="ClockObj"`修剪底部。

无论如何遵循这个：[链接](http://www.w3.org/TR/CSS2/visufx.html#clipping)，我试图完成我想要的但没有工作。

html代码：

```
<div id="Main">
        <table width="100%" cellpadding="0" cellspacing="0">
            <tr>
                <td width="85%">
                     <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="837" height="92">
                        <param name="movie" value="Flash/ReceivingHeader1.swf" />
                        <param name="quality" value="best" />
                        <param name="menu" value="true" />
                        <param name="allowScriptAccess" value="sameDomain" />
                        <embed 
                            src="Flash/ReceivingHeader1.swf" quality="best" menu="true" width="837" height="92" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" allowscriptaccess="sameDomain">
                        </embed>
                    </object>
                </td>
                <td width="15%" style="vertical-align:middle; background-color:#fff;"> 
                    <div id="ClockFrame" style="overflow:hidden;">
                        <div id="ClockObj" style="margin-top:50px;">
                            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="139" height="77">
                                <param name="movie" value="flash/Movie_Small.swf" />
                                <param name="quality" value="best" />
                                <param name="menu" value="true" />
                                <param name="allowScriptAccess" value="sameDomain" />
                                <embed src="flash/Clock_Small.swf" quality="best" menu="true" width="139" height="77" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" allowscriptaccess="sameDomain" />
                            </object> 
                        </div>   
                    </div> 
                </td>
            </tr>
        </table>
    </div> 
```

这里的CSS`div id="Main"`

```
#Main
{
    width: 980px;
    height: 550px;
    margin-left: auto;
    margin-right: auto;
    border: solid 1px #000000; 
    overflow: hidden;
    background-color: #D8E4F8;
} 
```

我不能`div id="ClockObj"`修剪。

这里有什么问题？

这是我想要实现的目标，但在我的情况下，使用的是 Flash 电影，而不是块引用： ![使用溢出：隐藏](../Images/1786e6f9ceaa33a0cb264a34ae29f916.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:58:17.707

这解决了我的问题：

如果您试图隐藏绝对定位元素，请确保这些绝对定位元素的容器是相对定位的。

归功于：**达伦**

[溢出：隐藏不起作用](https://stackoverflow.com/questions/3970455/overflow-hidden-not-working)

# r - dir(all.files = FALSE) 和可见文件

> ID：14381867
> 
> 赞同：0
> 
> 时间：2013-01-17T15:00:43.083
> 
> 标签：r

根据文档：

```
dir(path = ".", pattern = NULL, all.files = FALSE,
    full.names = FALSE, recursive = FALSE,
    ignore.case = FALSE, include.dirs = FALSE)

all.files: a logical value.  If 'FALSE', only the names of visible
          files are returned.  If 'TRUE', all file names will be
          returned. 
```

实际上，至少在 Win7 x64 上，具有：

```
dir(all.files = FALSE) 
```

我还列出了`attrib`设置为：

```
_HSA_________ 
```

和：

```
dir (all.files = TRUE) 
```

我*还*得到了无意义的目录*占位符*：

```
[1] "."            ".." 
```

那你呢 ？

# 更新：解决方案、设计策略还是错误？

经过一些进一步的调查，我可以提供一些（希望）有用的见解。众所周知，在 Linux 中，以“点”开头的文件被认为是隐藏的，而在基于属性的 Windows 中并非如此。（的`dir()`功能）R 遵循 Linux 约定。在 Windows 上，这可能会导致许多问题。

如果你发布一个标准`dir()`，即如果你查询可见文件，你也会得到隐藏文件，更严重的是，你可能不会得到可见文件，只是因为它们以一个无辜的点开头，这在 Windows 中没有特别的意义。这意味着在 Windows 中，该标准`dir()`根本没有用，除非您在确定没有点文件的受控环境中操作。

`dir (all.files = TRUE)`假设您对排除隐藏/系统文件不感兴趣，可能会部分有用。但这仅适用于交互式使用。 总是添加两个名为and的`dir (all.files = TRUE)`假文件（好吧，总是除了 root）。这意味着像这样用于检查目录是否为空的行在 Windows 上不起作用：`.``..`

```
 if (length(dir(all.files = TRUE))==0) cat('I am empty\n') 
```

**这种行为是设计实现的吗？**

有人可能会回答，因为 R`dir()`以这种方式复制了 Windows shell 命令`dir`。恕我直言，外壳`dir`主要不是用于批量使用；而 R 命令应该用于编程任务。无论如何，为什么这种复制行为只在 何时显示`all.files = TRUE`？

可以肯定的是，R 编码人员总是非常友好地详细说明文档中不同操作系统之间的差异，而在这种情况下（ [http://stat.ethz.ch/R-manual/R-patched/library/base /html/list.files.html](http://stat.ethz.ch/R-manual/R-patched/library/base/html/list.files.html)）单词“Windows”永远不会出现。

你有什么意见？我错过了什么吗？还是提交实际错误的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:37:33.967

@antonio 感谢您的澄清。文档中的“可见”一词似乎指的是不以句点开头的文件，不一定是 Windows 属性意义上的非“隐藏”文件。显然，`dir`在 R 中调用与从 Windows 命令行调用它不同。

不过，这确实不是问题，因为您可以直接调用 Windows 目录来获得您想要的行为：

```
shell('dir /b', intern=TRUE) 
```

或者，如果您的目标只是能够轻松确定目录是否为空，则可以使用：

```
file.info('New folder')$size == 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:28:04.003

这 ”。” 并且“..”是包含目录和“根”的占位符。如果您这样做，它们代表您在 Windows 命令行中将获得的结果：

```
 cd .
 cd .. 
```

帮助文件清楚地表明 R 正在显示操作系统返回的内容。也许您还应该查看 Windows 文档。我将从 Windows“dir”命令的文档开始。

# google-drive-api - 有没有办法在google drive api中对文件列表进行排序

> ID：14381868
> 
> 赞同：2
> 
> 时间：2013-01-17T15:00:44.380
> 
> 标签：google-drive-api

我的云端硬盘帐户中有很多文件（图像）。我需要按特定顺序（序列）获取这些列表。或者我需要改变这个顺序。这可能与 google-drive-api 吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-17T15:14:27.900

把它放在一个数组中。然后，您可以根据需要对数组进行排序。

# php - 检查智能数组中是否存在密钥

> ID：14381872
> 
> 赞同：9
> 
> 时间：2013-01-17T15:00:51.573
> 
> 标签：php, arrays, smarty

我有一个看起来像这样的数组：

```
array(
    'name1' => array('city1', 'city2', 'city3'),
    'name2' => array('city1', 'city4'),
    'namen' => array('city1', 'city7', 'cityn')
); 
```

传递给 smarty 为：`$my_names` 我的 Smarty 模板中有一个循环，如下所示：

```
{{foreach from=$names item=name}}
  {{foreach from=$cities item=city}}
  //Check if name1 exist and after check if the city is in the array for that name
  {{/foreach}}
{{/foreach}} 
```

我看不到如何使用`$name`and`$city`来访问数组`$my_names`

我试过做`if($my_names.$name.$city)`，但它不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-13T15:29:32.103

这种表示法也可以：

```
{if 'needle'|array_key_exists:$haystack}
....
{/if} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-06T11:54:15.460

您可以使用**array_key_exists()**函数来检查键是否在数组中。

```
{if array_key_exists('needle', $haystack)} 
    DoSomethingAboutIt 
{/if} 
```

# excel - excel 2010 vba循环通过声明的变量语法导致编译错误变量未定义

> ID：14381873
> 
> 赞同：1
> 
> 时间：2013-01-17T15:00:54.163
> 
> 标签：excel, vba, variables, loops, syntax-error

我声明了 5 个整数

```
 Public Hol_1 as integer
    Public Hol_2 as integer
    Public Hol_3 as integer
    Public Hol_4 as integer
    Public Hol_5 as integer 
```

假设我有 3 个客户端，那么我将使用 Hol_1 到 Hol_3。这也意味着： iClients = 3 我需要做的第一件事是查看我的工作表（“假期”）以确定我的 3 个客户每个人有多少假期。

```
 Sub CountHolidays()

    Dim i as integer
    Dim iclients as integer
    iclients = 3
    For i=1 to iclients 
        Hol_i = WorksheetFunction.CountA(ActiveWorkbook.Sheets("Holidays").Range(Cells(2, 3 + i), Cells(50, 3 + i))) 
       'The worksheetfunction calculates the amount of Holiday-dates I have for each of my three clients
    Next i
    End sub 
```

我收到一个编译错误，提示未定义变量：未定义 Hol_i。我尝试了 "Hol_" & i 和其他人，但无法纠正这个问题。有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:06:21.633

您不能连接变量名称。 `Hol_i`是一个完全独立的变量，`Hol_1`即使`i=1`.

您需要一个数组来执行此操作：

```
Dim Hol(5) as Integer

For i=1 to iclients 
  Hol(i) = WorksheetFunction.CountA(ActiveWorkbook.Sheets("Holidays").Range(Cells(2, 3 + i), Cells(50, 3 + i)))
Next i 
```

# uploadify - 带有uploadify的AWS S3，如何限制文件类型

> ID：14381875
> 
> 赞同：0
> 
> 时间：2013-01-17T15:01:03.903
> 
> 标签：uploadify, file-type

在 scriptdata 下，在 fileext 中如何指定允许的文件类型？

例如：

```
$('#file_mainfile').uploadify({
        'uploader'  : '<?php echo WPDEPOSIT_URL; ?>/resources/js/uploadify/uploadify.swf',
        'script'    : '<?php echo $uploadPath; ?>',
        'cancelImg' : '<?php echo WPDEPOSIT_URL; ?>/resources/images/cancel.png',
        'folder'    : '<?php echo $fileFolder; ?>',
        'auto'      : true,
        'fileExt'   : '*.zip',
        'buttonText': '<?php _e('Upload .zip', WPD_SHOPPER_NAME); ?>',
        'method'    : 'post',
        <?php if(WPDS_AMAZONS3_ACTIVE == 'on'): ?>
        'fileDataName'  : 'file',
        'auto'          : 'true',
            'scriptData' : {
                "AWSAccessKeyId"                                : "<?php echo $amazonClass->AWS_ACCESS_KEY; ?>",
                "key"                       : "${filename}",
                "acl"                       : "public-read",
                "policy"                    : "<?php echo $policy; ?>",
                "signature"                 : "<?php echo $signature; ?>",
                "success_action_status"                         : "201",
                "key"                       : encodeURIComponent(encodeURIComponent("<?php echo $folder; ?>${filename}")),
/* here ---->  */    "fileext"                  : encodeURIComponent(encodeURIComponent("")),
                    "Filename"                  : encodeURIComponent(encodeURIComponent(""))
                }, 
```

我实际上已经指定了允许的扩展名；`'fileExt' : '*.zip',`. 但我仍然可以上传其他文件类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:03:55.857

从文档中，我从来没有遇到过使用这种语法的问题。当语法为 fileTypeExts 时，您正在指定 fileext。

可以上传的允许扩展名列表。手动输入的文件名可以绕过此级别的安全性，因此您应该始终检查服务器端脚本中的文件类型。多个扩展名应该用分号分隔（即'*.jpg; *.png; *.gif'）。

[http://www.uploadify.com/documentation/uploadify/filetypeexts/](http://www.uploadify.com/documentation/uploadify/filetypeexts/)

```
$(function() {
    $("#file_upload").uploadify({
        'fileTypeDesc' : 'Image Files',
        'fileTypeExts' : '*.gif; *.jpg; *.png',
        'swf'          : '/uploadify/uploadify.swf',
        'uploader'     : '/uploadify/uploadify.php'
    });
}); 
```

# windows - 如何在 Windows 上监控 CPU 缓存？

> ID：14381876
> 
> 赞同：6
> 
> 时间：2013-01-17T15:01:05.010
> 
> 标签：windows

我想尽可能避免我的代码从 L2 缓存中清除。

您将如何在 C++/C# 中实现这一目标，以及如何使其负责。

**编辑：**我可以收集 L2 缓存未命中的数量吗？ **答**：是[的，我可以得到windows平台上每个进程的L2缓存未命中计数吗？](https://stackoverflow.com/questions/5141350/can-i-get-the-l2-cache-miss-count-of-each-process-on-the-windows-platform)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:41:00.720

似乎人们不愿意透露这方面的信息（c++ 或 c# 无关紧要）。所以我可能不得不创建自己的策略，这可能会使用一套方法，而不是一套严格的规则或食谱。

为了达到 Windows 应用程序的最大命中/未命中率，我可能会：

*   为应用程序专用一个物理 CPU，确保没有其他进程正在使用它，禁用超线程，使用 BIOS，因为服务器制造商通常为低延迟应用程序提供特定设置
*   确保相关代码的大小小于该 CPU 内核上的 L2 缓存
*   确保代码没有导致它显式从缓存中清除的东西（例如 C# 中的内存屏障）
*   监控 L2 未命中计数：[http ://stackoverflow.com/questions/5141350/can-i-get-the-l2-cache-miss-count-of-each-process-on-the-windows-platform](http://stackoverflow.com/questions/5141350/can-i-get-the-l2-cache-miss-count-of-each-process-on-the-windows-platform)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:09:09.783

这个问题似乎是基于对现代 x86 CPU 上的缓存如何工作的误解。例如，它说“L2 而不是 L3”。在几乎所有现代 x86 CPU（包括 Intel 和 AMD）上，不可能在 L2 缓存而不是 L3 缓存中保存数据。这将导致缓存一致性失败，因为 L3 缓存中没有数据表明 L2 缓存中没有数据，并允许内核假设没有其他内核缓存它。

坦率地说，不太了解 CPU 工作原理的人不应该试图控制缓存中的数据。如果他们比最初设计这些 CPU 的人做得更好，那将是奇迹。

# file-upload - 剑道ui网页上传提取txt文件内容并记录到数据库

> ID：14381877
> 
> 赞同：0
> 
> 时间：2013-01-17T15:01:10.787
> 
> 标签：file-upload, asp.net-mvc-4, data-extraction

第 1 步 - 选择带有剑道上传的 txt 文件

（在此阶段将其上传到数据库或将其上传到 app_data 文件夹以便稍后删除或其他方法）

第 2 步 - 从 txt 文件中提取数据

（？取决于第 1 步，我会选择我上传的文件或在 app_data 中的文件，或者......然后将其放入文件流或其他东西以获取里面的所有文本）

第 3 步 - 将提取的数据分配给表模型以记录回数据库

我一次应该只处理一个文件，我也想知道我是否可以限制剑道上传，如果我什至需要上传文件，则每次上传只允许单个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:41:05.370

Kendo Music Store 示例应用程序有一个 ASP.NET WebAPI 控制器示例，该控制器读取发布的文件（在本例中为图像，但文件内容无关紧要）并将其保存到文件系统：[ImagesController.cs](https://github.com/telerik/kendo-music-store/blob/master/MvcMusicStore/Controllers/Api/ImagesController.cs)

你可以做类似的事情；从 ASP.NET 请求中读取文件内容，然后执行您想要的任何处理。

设置 Kendo 上传小部件的 HTML 和 Javascript 位于：[storemanager-index.js](https://github.com/telerik/kendo-music-store/blob/master/MvcMusicStore/Scripts/App/storemanager-index.js)

最后是来自 Kendo Music Store 教程文档的一些文档：[Album Art Upload With The Kendo Upload Widget](http://docs.kendoui.com/tutorials/ASP.NET/Kendo%20Music%20Store/Music%20Store%20Web/kendo-music-store-web-management-grid#album-art-upload-with-the-kendo-upload-widget)

# java - 读取文件的前 4 个字节

> ID：14381880
> 
> 赞同：2
> 
> 时间：2013-01-17T15:01:25.830
> 
> 标签：java

我习惯了 C#，但我正在尝试制作一个将前 4 个字节读入数组的应用程序，但我没有成功。我还需要反转文件上的字节序，我不知道在 Java 中如何，在 C# 中它是`Array.Reverse(bytes);`. 我尝试将文件读入 Int32，但由于某种原因，我无法从那里将其放入数组中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T15:05:42.567

像那样 ：

```
byte[] buffer = new byte[4];
InputStream is = new FileInputStream("somwhere.in.the.dark");
if (is.read(buffer) != buffer.length) { 
    // do something 
}
is.close();
// at this point, the buffer contains the 4 bytes... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:25:33.107

您可以使用 ByteBuffer 更改字节顺序

```
FileChannel fc = new FileInputStream(filename).getChannel();
ByteBuffer bb = ByteBuffer.allocate(4);
bb.order(ByteBuffer.nativeOrder()); // or whatever you want.
fc.read(bb);
bb.flip();
int n = bb.getInt(); 
```

反转整数字节的简单方法

```
int n = ...
int r = Integer.reverseByte(n); 
```

相似地

```
long l = Long.reverseBytes(n); 
```

# json - 休眠 @JsonProperty 到多个输出字段

> ID：14381882
> 
> 赞同：1
> 
> 时间：2013-01-17T15:01:31.193
> 
> 标签：json, spring, hibernate, serialization

我在 Hibernate 注释中有一个问题。我有一个实体，因为我有一个列，我正在使用 @JsonSerialize 将值转换为不同的格式，并使用 @JsonProperty 我将其写入输出 json 中的不同字段：

```
@Transient
@Type(type = "org.hibernatespatial.GeometryUserType")
@Column(name = "the_geom", columnDefinition = "Geometry")
Geometry gml;

@JsonProperty("wkt")
@JsonSerialize(using = JsonGeometrySerializer.class)
public Geometry getGeom() {
    return geom;
}

public void setGeom(Geometry geom) {
    this.geom = geom;
} 
```

现在我想为来自 the_geom 列的相同几何创建一个不同的属性，如 @JsonProperty("gml") 并将其写入输出 json 中的不同字段。有没有办法可以在@JsonProperty 中指定多个值？我尝试使用 getter/setter 创建另一个变量并使用 @Trancient 但不确定如何将 the_geom 值发送到该序列化程序。请帮忙。

我尝试了这样的事情并没有奏效：

```
 @Transient
@Type(type = "org.hibernatespatial.GeometryUserType")
@Column(name = "the_geom", columnDefinition = "Geometry")
Geometry gml;

@JsonSerialize(using = JsonGeometrySerializer.class)
public Geometry getGml() {
    return gml;
}

public void setGml(Geometry gml) {
    this.gml = gml;
} 
```

所以在第一种情况下，几何应该转换为 wkt 并添加到 json 中，而在第二种情况下，几何应该转换为 GML 格式并添加到 gml。我可以有相同的 JsonSerializer 类来做这两者还是我必须写一个新的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:11:33.320

由于您将 @JsonSerializer 附加到该方法，是什么阻止您创建另一个 getXXX 方法返回您想要的任何内容，包括相同的值？

# opencover - OpenCover - 找不到 PDB

> ID：14381884
> 
> 赞同：3
> 
> 时间：2013-01-17T15:01:33.063
> 
> 标签：opencover, nunit-console

我在让 OpenCover 工作时遇到了一些问题

我有以下文件夹结构

*   \工具
*   \工具\Nunit
*   \工具\OpenCover
*   \构建工件

当我的代码编译时，所有编译后的代码都会生成到 BuildArtifacts 文件夹中。这包括 dll 和相应的 .pdb 文件

我正在努力让 OpenCover 运行

从 powershell 我从根文件夹输入以下命令：

> .\tools\OpenCover\OpenCover.Console.exe -register:user -target:.\tools\nunit\nunit-console.exe -targetargs:".\buildartifacts\MVCControllerTests.dll /noshadow" -filter:+[*] * -输出：.\coverage.xml

但是我不断收到消息：提交...

> 无结果 - 未检测与提供的过滤器匹配的程序集这可能是由于缺少与过滤器匹配的程序集的 PDB 请查看输出文件并参考使用指南 (Usage.rtf)

我查看了[OpenCover/NUnit can't find PDB files](https://stackoverflow.com/questions/12586843/opencover-nunit-cant-find-pdb-files)，并且我的 targetargs 中有 /noshadow 开关

我试图将 /noshadow 移动为 targetargs 中的第一个，但随后我从 nunit 收到错误

我还更新了 nunit-console.exe.config 并将以下行添加到启动节点，以确保所有测试都在 .net4 而不是 .net3.5 中执行

> <supportedRuntime version="v4.0.30319">

但这并没有什么不同。

当我查看 coverage.xml 文件时，即使我有 noshadow 标志，nunit 似乎仍然在执行 shadowcopy

例如，这是存在的：

> C:\Users\darren\AppData\Local\Temp\nunit20\ShadowCopyCache\10344_634940293912865718\Tests_275832668\assembly\dl3\db34ecee\a0f236ee_a7f4cd01\TABusinessInterface.DLL

感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T06:46:53.790

OpenCover [WIKI](https://github.com/sawilde/opencover/wiki/Usage)指出，在使用 PowerShell 时，您应该将整个参数用引号括起来，即

```
-targetargs:".\buildartifacts\MVCControllerTests.dll /noshadow" 
```

变成

```
"-targetargs:.\buildartifacts\MVCControllerTests.dll /noshadow" 
```

# ruby - 在 method_missing 中查找实例

> ID：14381885
> 
> 赞同：-1
> 
> 时间：2013-01-17T15:01:33.757
> 
> 标签：ruby, metaprogramming

我有一种情况，我想打电话

```
foo.bar.baz arg1,arg2...argn 
```

有时 baz 不会被定义，我将使用 method_missing 但是从从“bar”返回的对象上的 method_missing 中，我希望能够到达“foo”。那就是我想获得 foo 所指对象的引用

我可以假设的一种解决方案是是否有可能获取调用上下文/父上下文的绑定对象。即从 method_missing 内部获取绑定对象，因为它在调用点`foo.bar`

所以我的问题是，在method_missing中有什么方法可以让我回溯（在这种情况下是foo）？如果我必须对调用进行检测，只要它在解释时完成并且不使用 #extend 或其他会严重破坏缓存/影响性能的东西，就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:47:32.943

```
class MyFooClass
    attr_reader :value

    def initialize(value)
        @value = value
    end

        # In order to say foo.bar, the class of foo must define bar.
    def bar
        puts "bar sent to #{self}"
            # return a class where method_missing is defined,
            # and pass it a reference to foo
        MyBarClass.new(self)
    end
end # MyFooClass

class MyBarClass
    def initialize(foo)
        @foo = foo
    end

    def method_missing(name, *args, &block)
        puts "missing #{name} in #{self.class}"
        self.class.class_eval %Q{
            puts "about to define #{name}"
            def #{name}(*args)
                puts "in #{name} on self=#{self} with args=#{args}"
                puts "foo is #{@foo} and it's value is <#{@foo.value}>"
            end
        }
        puts "after define, execute #{name}"
        self.send(name, *args)
    end
end # MyBarClass

foo = MyFooClass.new('value of foo') # result of an expression
foo.bar.baz 'arg1' # define baz for future reference and execute it
print 'MyBarClass.instance_methods : '; p MyBarClass.instance_methods(false) 
```

执行 ：

```
$ ruby -w t.rb
bar sent to #<MyFooClass:0x10195c750>
missing baz in MyBarClass
about to define baz
after define, execute baz
in baz on self=#<MyBarClass:0x10195c6b0> with args=arg1
foo is #<MyFooClass:0x10195c750> and it's value is <value of foo>
MyBarClass.instance_methods : ["baz", "method_missing"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:11:48.587

```
def method_missing *_; self end 
```

# c# - 在方法之外访问对象的多个实例

> ID：14381890
> 
> 赞同：0
> 
> 时间：2013-01-17T15:01:55.987
> 
> 标签：c#, winforms

我有一个名为的类`Vehicle`和一个名为的类`Car`，它继承自`Vehicle`. 我有一个表单，您可以在其中通过填写一些信息并单击按钮来创建汽车对象。此信息被插入到网格视图中。

我想要做的是通过我创建它的 ID 访问特定的 Car 对象。

我创建了一个 ID 来识别每个汽车对象。我希望能够访问某个对象，例如 ID 为 3 的 Car 对象。

我有一个组合框，我想用所有的汽车 ID 填充它，以便稍后我可以选择一个特定的汽车对象并克隆它，例如。我使用一个事件来检查 RowsAdded 到`DataGridView`. 添加行时，`ComboBox`应将 与 一起添加`car id`。

我遇到的问题是`testCar`在检查`RowsAdded`. 我试图在`buttonclick`事件之外声明对象实例，然后在事件内部更改该对象，`buttonclick`但这不起作用。我在想，也许我需要创建一个对象数组，在其中插入每辆不同的汽车。

这是我的代码：

```
class Car : Vehicle
{
    string carBrand = "";
    private static int carID { get; set; }
    public int iD { get; set; }
    public string CarBrand { get; set; }
    public Color CarColor { get; set; }
    public Car()
    {
        carID = 0;
        CarBrand = "Volvo";
        CarColor = Color.Black;
    }
    public Car(string vehicleName, int vehicleYear, string carBrand, Color carColor)
    {
        this.iD = GetNextCarID();
        this.VehicleName = vehicleName;
        this.VehicleYear = vehicleYear;
        this.CarBrand = carBrand;
        this.CarColor = carColor;
    }
    static Car() 
    {
        carID = 0;

    }
    protected int GetNextCarID()
    {
        return ++carID;
    }

    public void button1_Click(object sender, EventArgs e)
    {

        string inputModell = txtModell.Text;
        int inputCarYear = Int16.Parse(txtCarYear.Text);
        string inputBrand = cmbCarBrands.SelectedItem.ToString();
        Color inputColor = Color.Black;
        if (colorDialog1.Color != Color.Black)
        {
            inputColor = colorDialog1.Color;
        }
        Car testCar = new Car(inputModell, inputCarYear, inputBrand, inputColor);
        int id = testCar.iD;

        if (txtModell.Text != string.Empty && txtCarYear.Text != string.Empty)
        {                
            dataGridView1.ColumnCount = 6;
            dataGridView1.Columns[0].Name = "ID";
            dataGridView1.Columns[1].Name = "Modell";
            dataGridView1.Columns[2].Name = "Årtal";
            dataGridView1.Columns[3].Name = "Märke";
            dataGridView1.Columns[4].Name = "Färg";
            dataGridView1.Columns[5].Name = "Orginal/Klon";
            int currRow = dataGridView1.Rows.Add(testCar.iD, testCar.VehicleName, testCar.VehicleYear, testCar.CarBrand, "", "Orginal");
            DataGridViewCellStyle cellStyle = new DataGridViewCellStyle();
            cellStyle.BackColor = testCar.CarColor;
            dataGridView1.Rows[currRow].Cells[4].Style = cellStyle; 
        }
    }

    private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
    {
        groupBox2.Enabled = true;
        cmbCarID.Items.Add(testCar.iD);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:10:08.460

是的，听起来你想要收集汽车，类似这样的东西

```
class Car : Vehicle
{
    ...

    List<Car> CarList;
    public Car()
    {
        CarList = new List<Car>  // do this in each constructor
        ...
    }

    ...

    public void button1_Click(object sender, EventArgs e)
    {
        Car car = new Car();

        ...

        CarList.Add(car);
    }
} 
```

顺便说一句，我不知道`Car`上课是否是最合适的地方`button_1Click`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:14:03.517

A`Dictionary`只是为这样的任务而设计的。

在您的表单上创建`Dictionary<int, Car>`一个字段：

```
private Dictionary<int, Car> carLookup = new Dictionary<int, Car>(); 
```

然后在您的按钮单击事件中将每辆新车添加到其中：

```
carLookup[newCar.iD] = newCar; 
```

您现在可以使用字典轻松地通过 ID 查找汽车：

```
public Car GetCar(int id)
{
    return carLookup[id];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:17:48.927

无需收藏！您可以通过访问 datagridview 的最后一行来访问已添加到 datagridview 的最后一辆车

```
private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{
    int lastRowIndex = dataGridView1.Rows.Count-1;
    int carId = int.Parse(dataGridView1.Rows[lastRowIndex].Cells[0].Value.ToString());
    groupBox2.Enabled = true;
    cmbCarID.Items.Add(carId);
} 
```

# coding-style - 在编程中使用标签

> ID：14381891
> 
> 赞同：0
> 
> 时间：2013-01-17T15:01:59.090
> 
> 标签：coding-style

我至少在java中看到过这个，我很确定它也存在于其他语言中，但我指的是这样的代码

```
label: {
        if (someStatment) {
            break label;
        }
        if (someOtherStatemnt) {
            break label;
        }
        return a + b;
    } 
```

甚至：

```
int a = 0;
label: {
   for(int i=0;i<10; i++){
        if (a>100) {
            break label;
        }

        a+=1;
    } 
```

现在我想知道人们使用标签的原因是什么？这似乎不是一个好主意。我只是想知道是否有人在现实世界的场景中使用这种类型的结构是有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:34:25.823

当循环和 case 语句嵌套时，带标签的中断就会出现。这是我在过去 6 个月中写的一些 Java 示例，经过删节：

```
Node matchingNode = null;  //this is the variable that we want to set
Iterator<Resource> relatedNodes = tag.find();
outer:
while (relatedNodes.hasNext() && matchingNode == null) {
    Node node = relatedNodes.next().adaptTo(Node.class);
    if (honorIsHideInNav && NodeUtils.isHideInNav(node)) {
        //we don't want to test this node
        continue;  //'continue outer' would be equivalent
    }
    PropertyIterator tagIds = node.getProperties("cq:tags");
    while (tagIds.hasNext()) {
        Property property = tagIds.nextProperty();
        Value values[] = property.getValues();
        for (Value value : values) {
            String id = value.getString();
            if (id.equals(tag.getTagID())) {
                matchingNode = node;  //found what we want!
                break outer;  //simply 'break' here would only exit the for-loop
            }
        }
    }
}
if (matchingNode == null) {
    //we've scanned all of relatedNodes and found no match
} 
```

我使用的 API 提供的数据结构有点粗糙，因此嵌套复杂。

你总是可以设置一个标志来控制你的循环退出，但我发现明智地使用标记的中断可以使代码更简洁。

**发布脚本：**此外，如果我的代码检查团队和/或商店编码标准要禁止标签，我很乐意重写以符合要求。

# vbscript - 如何编写脚本仅搜索文本中的第一行和最后一行并从那里删除“-”？

> ID：14381892
> 
> 赞同：1
> 
> 时间：2013-01-17T15:02:00.070
> 
> 标签：vbscript

我在某些文件夹中有超过 5k 个文本文件。现在我只需要从`"-"`每个文本文件的第一行和最后一行删除。

我不知道该怎么做，有没有人可以帮忙？我应该用什么来做到这一点？vbs 或普通批处理

操作系统：Windows7

像这样的文本文件：01.txt

* * *

```
% 01-A247M15 G70 

N0001 G30 G17 X-100 Y-100 Z0

N0002 G31 G90 X100 Y100 Z45

N0003 ; --PART NO.:  NC-HON.PHX01.COVER-SHOE.DET-1000.050

N0004 ; --TOOL:  8.55 X .3937 

N0005 D00 Q50 P01 +8.5500 ; TOOL DIA 

N0006 D00 Q51 P01 +0.3920 ; TOOL RAD 

N0007  % 01-A247M15 G70 
```

* * *

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T16:46:19.303

You can use the following one liners if you have access to Linux/ Linux like environment (MinGW, Cygwin etc)

```
 find ./ -name *.txt | xargs sed -i '1s/-//g'
    find ./ -name *.txt | xargs sed -i '$s/-//g' 
```

Edited to include substitution in last line :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:08:51.423

你还没有指出你想要 perl，unix 的哪个脚本。所以我会给你算法，

```
1\.  read first line
2\.  Split with - as delimiter (cut in unix)
3\.  paste the split words in redirect to new file >> newfile
4\.  get count of lines of file (wc in unix)
5\.  get the 2nd line till last one but line and append to new file (head and tail in unix)
6\.  do the same steps 1, 2, and 3 for last line and append to new file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:13:36.323

使用 VBScript 更简单...

首先你将文本文件解析成一个数组： http: [//www.windowsitpro.com/content/content/46489/Listing_01.txt](http://www.windowsitpro.com/content/content/46489/Listing_01.txt)

```
Function FileToArray(ByVal strFile, ByVal blnUNICODE)
  Const FOR_READING = 1
  Dim objFSO, objTS, strContents

' BEGIN CALLOUT A
  FileToArray = Split("")
' END CALLOUT A

  Set objFSO = CreateObject("Scripting.FileSystemObject")

  If objFSO.FileExists(strFile) Then
    On Error Resume Next
    Set objTS = objFSO.OpenTextFile(strFile, FOR_READING, False, blnUNICODE)
    If Err = 0 Then
      strContents = objTS.ReadAll
      objTS.Close
' BEGIN CALLOUT B
      FileToArray = Split(strContents, vbNewLine)
' END CALLOUT B
    End If
  End If
End Function 
```

然后对数组的第一行和最后一行执行 REPLACE 并将其写入另一个文件或同一个文件。

# mysql - MySQL 添加列，如果不存在

> ID：14381895
> 
> 赞同：32
> 
> 时间：2013-01-17T15:02:27.420
> 
> 标签：mysql, sql

```
IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS
  WHERE TABLE_NAME = 'email_subscription' AND COLUMN_NAME = 'subscribe_all')
  THEN 
  ALTER TABLE email_subscription
  ADD COLUMN subscribe_all TINYINT(1) DEFAULT 1,
  ADD COLUMN subscribe_category varchar(512) DEFAULT NULL; 
```

我看了很多例子。但此查询不起作用，我收到以下错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME =' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-06T18:55:51.160

如果您的主机没有授予您创建或运行过程的权限，我想我找到了另一种使用 PREPARE/EXECUTE 并查询架构的方法：

```
SET @s = (SELECT IF(
    (SELECT COUNT(*)
        FROM INFORMATION_SCHEMA.COLUMNS
        WHERE table_name = 'table_name'
        AND table_schema = DATABASE()
        AND column_name = 'col_name'
    ) > 0,
    "SELECT 1",
    "ALTER TABLE table_name ADD col_name VARCHAR(100)"
));

PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-17T15:09:27.560

您可以为查询创建一个过程，

```
DELIMITER $$
CREATE PROCEDURE Alter_Table()
BEGIN
    DECLARE _count INT;
    SET _count = (  SELECT COUNT(*) 
                    FROM INFORMATION_SCHEMA.COLUMNS
                    WHERE   TABLE_NAME = 'email_subscription' AND 
                            COLUMN_NAME = 'subscribe_all');
    IF _count = 0 THEN
        ALTER TABLE email_subscription
            ADD COLUMN subscribe_all TINYINT(1) DEFAULT 1,
            ADD COLUMN subscribe_category varchar(512) DEFAULT NULL;
    END IF;
END $$
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T15:05:40.040

您在 MySQL 中使用 MS SQL Server 语法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T15:13:58.837

没有等效的语法可以在单个 MySQL 语句中实现这一点。

要获得类似的东西，您可以

1) 尝试使用 ALTER TABLE 添加列，如果该名称的列已存在于表中，则让 MySQL 引发错误，或者

2) 查询 information_schema.columns 视图以检查表中是否存在该名称的列。

请注意，您确实需要检查 table_schema 以及 table_name：

```
SELECT column_name
  FROM information_schema.columns 
 WHERE table_schema = 'foo'
   AND table_name   = 'email_subscription'
   AND column_name  = 'subscribe_all' 
```

并据此决定是否运行 ALTER TABLE

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T15:13:45.000

还为数据库名称添加条件以检查列是否存在。

尝试这个：

```
DELIMITER $$
CREATE PROCEDURE sp_AlterTable()
BEGIN
    IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS 
                   WHERE TABLE_SCHEMA = 'dbName' AND 
                         TABLE_NAME = 'email_subscription' AND 
                         COLUMN_NAME = 'subscribe_all') THEN 
       ALTER TABLE email_subscription
          ADD COLUMN subscribe_all TINYINT(1) DEFAULT 1,
          ADD COLUMN subscribe_category VARCHAR(512) DEFAULT NULL;
    END IF; 
END $$
DELIMITER ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-19T21:44:09.797

```
SET @s = (SELECT IF(
    (SELECT COUNT(column_name)
          FROM INFORMATION_SCHEMA.COLUMNS
          WHERE table_name = 'oc_bitcoin_wallets_receive'
          AND table_schema = 'k_opencart2'
          AND column_name = 'test3'
    ) > 0,
    "SELECT 1",
    "ALTER TABLE `oc_bitcoin_wallets_receive` ADD COLUMN `test3` INT NOT NULL AFTER `test2`;"
));
PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

编辑值：oc_bitcoin_wallets_receive - 表名，k_opencart2 - 数据库名称，test3 - 新列名，oc_bitcoin_wallets_receive - 第二个位置表 test3 - 第二个位置列，test2 - 新列之前的列名。

# list - Scala 和 JPA 结果列表

> ID：14381896
> 
> 赞同：2
> 
> 时间：2013-01-17T15:02:28.190
> 
> 标签：list, scala, jpa

Scala菜鸟我害怕：

我有以下声明的类变量，它将我从数据库中读取的对象：

```
val options = mutable.LinkedList[DivisionSelectOption]() 
```

然后我使用 JPA 从表中获取所有行的列表：

```
val divisionOptions = em.createNamedQuery("SelectOption.all", classOf[SelectOption]) getResultList
/* Wrap java List in Scala List */
val wrappedOptions = JListWrapper.apply(divisionOptions)
/* Store the wrappedOptions in the class variable */
options += wrappedOptions 
```

但是，最后一行有一个错误：

```
Type Expected: String, actual JListWrapper[SelectOption] 
```

谁能帮助我做错了什么？我只是想`options`用 DB 调用的结果填充对象。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:16:48.810

（可能）正在发生的是 a`JlistWrapper[SelectOption]`不是 a `DivisionSelectOption`，因此该方法`+=`不适用于它。既然如此，它正在尝试其他的东西，并给出一个最终的错误：

```
options = options + wrappedOptions 
```

这是 Scala 可以做的重写，以使之类`x += 1`的工作为`var x`. 该`+`方法存在于所有对象上，但它需要一个`String`as 参数——这样人们就可以编写类似的东西`options + ":"`并像在 Java 中那样工作。但既然`wrappedOptions`不是 a `String`，它就会抱怨。

我知道，迂回和混乱，甚至 Odersky 也对他关于`+`. 让这成为一个教训：如果你想添加一个方法`Any`，*那么*在做之前要认真考虑。

# jquery - 动态 Morris.js 图形构建中的变量问题

> ID：14381897
> 
> 赞同：0
> 
> 时间：2013-01-17T15:02:31.813
> 
> 标签：jquery, variables, options, morris.js

我正在尝试使用 Morris.js 和 Raphael.js 构建一个图表基本上我希望 JQuery 从我的页面中获取一个值，计算 100 与该值之间的差异并构建图表......</p>

我的html：

```
<div id="donut-example">81</div> 
```

我的jQuery：

```
var perc = $('div#donut-example').text();
var perc2 = 100 - perc;
Morris.Donut({
element: 'donut-example',
data: [
{label: "Abbiamo raccolto il", value: perc},
{label: "Ci resta da raccogliere il", value: perc2},
],
colors: ['#D58025','#37619d']
}); 
```

请检查这个jsfiddle：http: [//jsfiddle.net/HeNCQ/5/](http://jsfiddle.net/HeNCQ/5/)

基本上，如果我将 Morris.donut 函数中的值强制为数字，它会很好地工作并构建完整的甜甜圈图，但如果我将值放入变量中，则该图没有意义，因为这两个值很小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:34:15.580

您应该为值变量提供整数。因此，一个快速而肮脏的解决方法是将 perc 转换为整数：

perc = parseInt(perc);

# node.js - package.json 中的本地依赖

> ID：14381898
> 
> 赞同：609
> 
> 时间：2013-01-17T15:02:38.150
> 
> 标签：node.js, npm

我想做这样的事情，所以`npm install`还要安装`package.json`of`../somelocallib`或更重要的是它的依赖项。

```
"dependencies": {
    "express": "*",
    "../somelocallib": "*"
} 
```

* * *

## 回答 #1

> 赞同：780
> 
> 时间：2013-01-17T20:04:35.130

## npm >= 2.0.0

此功能在 npm 的 2.0.0 版本中[实现](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#local-paths)。可以使用`npm install -S`或保存本地路径`npm install --save`，使用以下任何一种形式：

```
../foo/bar
~/foo/bar
./foo/bar
/foo/bar 
```

示例`package.json`：

```
{
  "name": "baz",
  "dependencies": {
    "bar": "file:../foo/bar"
  }
} 
```

`npm ls`：

```
app@0.0.1 /private/tmp/app
└── somelocallib@0.0.1 -> /private/tmp/somelocallib 
```

### npm < 2.0.0

像往常`somelocallib`一样作为依赖`package.json`项：

```
"dependencies": {
  "somelocallib": "0.0.x"
} 
```

然后运行`npm link ../somelocallib`，npm 会将您正在使用的版本安装*为 symlink*。

参考：[链接(1)](https://docs.npmjs.com/cli/link)

* * *

## 回答 #2

> 赞同：232
> 
> 时间：2014-09-25T00:58:18.250

现在可以在您的`package.json`直接指定本地节点模块安装路径。从文档：

> ## [本地路径](https://docs.npmjs.com/files/package.json#local-paths)
> 
> 从 2.0.0 版开始，您可以提供包含包的本地目录的路径。可以使用`npm install -S`或保存本地路径`npm install --save`，使用以下任何一种形式：
> 
> ```
> ../foo/bar
> ~/foo/bar
> ./foo/bar
> /foo/bar 
> ```
> 
> 在这种情况下，它们将被规范化为相对路径并添加到您的`package.json`. 例如：
> 
> ```
> {
>   "name": "baz",
>   "dependencies": {
>     "bar": "file:../foo/bar"
>   }
> } 
> ```
> 
> 此功能有助于本地离线开发和创建需要 npm 安装的测试，您不想访问外部服务器，但不应在将包发布到公共注册表时使用。

* * *

## 回答 #3

> 赞同：103
> 
> 时间：2014-01-29T13:44:28.570

这对我有用。

将以下内容放在您的 package.json 文件中

```
"scripts": {
    "preinstall": "npm install ../my-own-module/"
} 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-11-12T12:07:49.290

如果您想进一步自动化此操作，因为您将模块检查到版本控制中，并且不想依赖开发人员记住 npm 链接，您可以将其添加到您的 package.json “脚本”部分：

```
"scripts": {
    "postinstall": "npm link ../somelocallib",
    "postupdate": "npm link ../somelocallib"
  } 
```

这感觉超出了hacky，但它似乎“有效”。从这个 npm 问题中得到提示： [https ://github.com/npm/npm/issues/1558#issuecomment-12444454](https://github.com/npm/npm/issues/1558#issuecomment-12444454)

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2017-09-01T19:52:54.007

这是添加本地依赖项的方式：

`npm install file:src/assets/js/FILE_NAME`

**从 NPM 将其添加到 package.json：**

`npm install --save file:src/assets/js/FILE_NAME`

**像这样直接添加到 package.json 中：**

```
....
  "angular2-autosize": "1.0.1",
  "angular2-text-mask": "8.0.2", 
  "animate.css": "3.5.2",
  "LIBRARY_NAME": "file:src/assets/js/FILE_NAME"
.... 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-08-17T03:27:36.400

# 主项目

这是您将用于主项目的 package.json：

```
"dependencies": {
    "express": "*",
    "somelocallib": "file:./somelocallib"
} 
```

那里是*相对于主项目 package.json*`./somelocallib`对库文件夹的引用。

 *参考：[https ://docs.npmjs.com/cli/v7/configuring-npm/package-json#local-paths](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#local-paths)

* * *

# 子项目

处理您的库依赖项。

除了跑步`npm install`，你还需要跑步`(cd node_modules/somelocallib && npm install)`。

这是 NPM 的一个已知错误。

参考：[https](https://github.com/npm/npm/issues/1341) ://github.com/npm/npm/issues/1341 （寻求更新的参考）

* * *

# Docker 注释

检查你的主人`package.lock`和你`somelocallib/package.lock`的源代码管理器。

然后在你的 Dockerfile 中使用：

```
FROM node:10
WORKDIR /app
# ...
COPY ./package.json ./package-lock.json ./
COPY somelocallib somelocallib
RUN npm ci
RUN (cd node_modules/zkp-utils/ && npm ci)
# ... 
```

*我在`(cd A && B)`构造中使用括号来使操作具有幂等性。*

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-11-23T05:42:37.733

**完成本地开发的两个步骤：**

1.  [提供包含包的本地目录的路径。](https://docs.npmjs.com/cli/v6/configuring-npm/package-json#local-paths)

> ```
> {
>   "name": "baz",
>   "dependencies": {
>     "bar": "file:../foo/bar"
>   }
> } 
> ```

2.  [符号链接包文件夹](https://docs.npmjs.com/cli/link)

    > ```
    > cd ~/projects/node-redis    # go into the package directory
    > npm link                    # creates global link
    > cd ~/projects/node-bloggy   # go into some other package directory.
    > npm link redis              # link-install the package 
    > ```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-11-11T15:19:12.953

在 2020 年，我在 Windows 10 上工作，我尝试使用

```
"dependencies": {
    "some-local-lib": "file:../../folderY/some-local-lib" 
    ...
} 
```

然后进行`npm`安装。结果是创建了文件夹的快捷方式`node-modules`。这行不通。你需要一个硬链接——windows 支持它，但是你必须在 windows 中做一些额外的事情来创建一个硬符号链接。

因为我真的不想要硬链接，所以我尝试使用 url 代替：

```
"dependencies": {
    "some-local-lib": "file:///D:\\folderX\\folderY\\some-local-lib.tar" 
     ....
} 
```

这很好用。
tar（您必须对库的 build / dist 文件夹中的内容进行 tar 处理）被提取到节点模块中的真实文件夹中，并且您可以像其他所有内容一样导入。
显然 tar 部分有点烦人，但由于“some-local-lib”是一个库（无论如何都必须构建），我更喜欢这个解决方案来创建硬链接或安装本地 npm。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-01-18T16:20:52.127

我知道那`npm install ../somelocallib`行得通。

但是，我不知道您在问题中显示的语法是否适用于`package.json`...

不幸的是，[doc](https://npmjs.org/doc/json.html#URLs-as-Dependencies)似乎只提到 URL 作为依赖项。

尝试`file:///.../...tar.gz`，指向一个压缩的本地库......并告诉我们它是否有效。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-06-01T19:14:20.723

好奇.....至少在 Windows 上（我的 npm 是 3.something）我需要做：

```
"dependencies": {
 "body-parser": "^1.17.1",
 "module1": "../module1",
 "module2": "../module2", 
```

当我这样做时，`npm install ../module1 --save`它会导致绝对路径，而不是文档中的相对路径。

我又搞砸了一点，并确定这就`../xxx`足够了。

具体来说，我将本地节点模块签出为 d:\build\module1、d:\build\module2 和 d:\build\nodeApp 中的节点项目（应用程序）。

要“安装”，我：

```
d:\build\module1> rmdir "./node_modules" /q /s && npm install
d:\build\module2> rmdir "./node_modules" /q /s && npm install
d:\build\nodeApp> rmdir "./node_modules" /q /s && npm install 
```

module1 的 package.json 有一个依赖 "module2": "../module2"; module2 没有本地依赖；nodeApp 具有依赖项“module1”：“../module1”和“module2”：“../module2”。

不确定这是否只对我有用，因为所有 3 个文件夹（module1、module2 和 nodeApp）都位于同一级别......

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-12-06T12:04:49.043

这对我有用：首先，确保 npm 目录有正确的用户

```
sudo chown -R myuser ~/.npm
sudo chown -R myuser /usr/local/lib/node_modules 
```

然后你在你的 package.json 链接目录

```
"scripts": {
 "preinstall": "npm ln mylib ../../path/to/mylib"
}, 
"dependencies": {
  "mylib" : "*"
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-10-27T09:57:20.053

使用纱线可以做到

`yarn add file:../somelocallib`

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-10-06T18:46:46.380

实际上，从 npm 2.0 开始，现在支持本地路径（参见[此处](https://www.npmjs.org/doc/files/package.json.html#local-paths)）。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-12-01T18:50:06.583

我想使用一组用 TypeScript 编写的本地依赖项，但这里没有一个答案对我有用。`npm install`只会拒绝构建依赖项。

我不得不求助于`tsconfig.json`将包添加到我的项目中*而不*将它们标记为依赖项。由于某些依赖项相互依赖，我的用例变得更加复杂，我希望它们*都*来自本地文件夹。

这是我的解决方案：

```
// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": "./",
    "paths": {
      "@tiptap/*": [
        "tiptap/packages/*/src"
      ]
    }
  }
} 
```

在上面的示例中，我有一个名为的本地项目子文件夹`tiptap/`，并且`tiptap/packages/*`. 该`"paths"`选项将`@tiptap/foo`在`./tiptap/packages/foo/src`我自己的文件和`tiptap/`.

这不是一个好的解决方案，但它是唯一对我有用的东西。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-02-07T11:13:17.647

有很棒的**yalc**可以帮助管理本地包。它帮助了我稍后部署的本地库。只需使用 .yalc 目录（带或不带 /node_modules）打包项目。所以就这样做：

```
npm install -g yalc  

in directory lib/$ yalc publish 
```

在项目中：

```
project/$ yalc add lib

project/$ npm install 
```

而已。

**当你想更新东西时：**

```
lib/$ yalc push   //this will updated all projects that use your "lib"

project/$ npm install 
```

**使用 Docker 打包和部署**

```
tar -czvf <compresedFile> <directories and files...>
tar -czvf app.tar .yalc/ build/ src/ package.json package-lock.json 
```

注意：记得添加**.yalc**目录。

在Docker中：

```
FROM node:lts-alpine3.9

ADD app.tar /app

WORKDIR /app
RUN npm install

CMD [ "node", "src/index.js" ] 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2021-12-22T15:40:03.263

在 2021 年，您需要像这样使用它：

```
npm i my-pkg@file:./path-to-my-pkg.js

# To remove it later
npm un my-pkg 
```

最后使用`.js`它的文件或文件夹的路径，如果它的完整包带有`package.json`.

**用法**

```
const myPkg = require('my-pkg') 
```

这就像魅力！*

# c# - Xinput 轮询线程设计

> ID：14381906
> 
> 赞同：0
> 
> 时间：2013-01-17T15:02:55.720
> 
> 标签：c#, .net, multithreading, polling, xinput

我已经使用 P/invoke 为 XInput 开发了一个 .net 库，现在正准备将它实现到 gui (WPF) 中。

我已经查看了 BackgroundWorker 类，并将它作为 1 个控制器的测试，但它是一项黑客工作，显然它不适合 2-4 个控制器（这主要是为了看看我需要什么与gui有关）。

所以我在这里询问更多有经验的人，关于如何在这个应用程序中处理线程。我应该继续使用 BackgroundWorker 类还是查看 .net 4 中的 TPL 或其他方法？

工作线程是必需的，因为 XInput 没有消息系统，只有轮询系统。工作线程大约每 20 毫秒或类似的时间检查一次输入（Thread.Sleep）。我也不确定所有控制器是否应该只有 1 个工作线程或 4 个工作线程（最大控制器限制为 4）。

一般来说，我对 WPF 和 .NET 有点陌生，所以欢迎任何建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T09:32:32.630

TPL 对我来说似乎有点矫枉过正。看起来它旨在让处理器密集型任务在多个处理器上并行运行。

轮询控制器不会过度占用处理器资源。我会说后台工作人员可以胜任这项工作，并且应该能够处理所有控制器。同时轮询每个控制器。

# vb.net - TileControl.ItemClick 事件与 TileControl.ItemPress 事件

> ID：14381910
> 
> 赞同：0
> 
> 时间：2013-01-17T15:03:08.903
> 
> 标签：vb.net, events, devexpress, controls

我试图弄清楚devexpress 磁贴控件上的*单击*和*按下事件的区别是什么。*

根据[在线文档](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsTileControlClassEventsTopic)：

* * *

> [TileControl.ItemClick](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsTileControl_ItemClicktopic)事件在最终用户单击 TileControl 中的 TileItem 时触发。
> 
> ...
> 
> **备注** 处理 ItemClick 事件以响应最终用户单击当前 TileControl 对象中的任何项目。您还可以使用处理 TileItem.ItemClick 事件来响应单击单个 TileItem。可以通过 TileItem.PerformItemClick 方法在代码中引发此事件。TileItem.ItemClick 事件在 ItemClick 事件之前触发。
> 
> 当释放鼠标左键时，ItemClick 事件在 ItemPress 事件之后发生。如果正在拖动项目，则不会触发 ItemClick 事件。

'''''''''''''

> [TileControl.ItemPress](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsTileControl_ItemPresstopic) 事件在最终用户按下当前 TileControl 中的 TileItem 时触发。
> 
> ...
> 
> **备注** Tile 项目有两种事件类型来响应最终用户在运行时单击它们：项目按下和项目单击事件。在最终用户单击磁贴项目后，会立即触发磁贴项目按下事件。首先，引发 TileItem.ItemPress 事件。之后，触发 ItemPress 事件。

* * *

对于更有经验的开发人员来说，这可能非常明显，但我对此感到非常困惑，不明白何时使用点击/按下。我什么时候应该使用“ [ItemPress](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsTileControl_ItemPresstopic) ”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:30:48.870

在 vb.net 中，当单击控件时，这意味着您已经触发了两个事件，即 mousedown 和 mouseup 事件，我认为，在您的情况下，如文档中所述，ItemClick Remark int 最后一节：

> 当释放鼠标左键时，ItemClick 事件在 ItemPress 事件之后发生。如果正在**拖动**项目，则**永远不会**触发 ItemClick 事件。

当您在按下鼠标左键后释放鼠标左键，并且如果您没有拖动 Tile Item，则会触发 Itemclick 事件，否则将按下 ItemPress 事件。

# php - 在 Smarty 中显示选定的记录

> ID：14381913
> 
> 赞同：0
> 
> 时间：2013-01-17T15:03:21.013
> 
> 标签：php, database, arrays, smarty

我从 mysql 中选择的查询是：

```
$query = mysql_query("SELECT * FROM news"); 
```

然后我尝试使用`mysql_fetch_object`or获取记录`mysql_fetch_array`：

```
$result = mysql_fetch_object($query); 
```

然后我将此变量传递给 Smarty ：

```
$smarty->assign('record',$result); 
```

在我的 smarty tpl 文件中，我的代码是：

```
<table>
{foreach $record as $item}
    <tr>
        <td>{$item.title}</td>
        <td>{$item.visit}</td>
        <td>{$item.date}</td>
        <td>{$item.date}</td>
        <td>{$item.date}</td>
        <td>{$item.date}</td>
        <td>{$item.date}</td>
    </tr>
{/foreach}
</table> 
```

但是在我运行我的代码之后，我会得到混乱的字符。有什么问题 ？

更新：

结果截图 ![结果截图](../Images/ccfa5d0ed4e33f86ca6638dec9bce8b1.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T15:06:50.957

看看这个

```
 {foreach from=$record as $item}
    <tr>
        <td>{$item.title}</td>
        <td>{$item.visit}</td>
        <td>{$item.date}</td>
    </tr>
    {/foreach} 
```

# weka - Weka：训练和测试集不兼容

> ID：14381914
> 
> 赞同：0
> 
> 时间：2013-01-17T15:03:22.363
> 
> 标签：weka

我的训练和测试数据集的每一行都有图像中像素的强度值，最后一列的标签告诉图像中代表的是什么数字；标签可以是训练集中从 0 到 9 的任意数字，并且总是？在测试集上。

我在 Weka Explorer 上加载了训练数据集，通过 NumericalToNominal 过滤器传递数据，并使用 RemovePercentage 过滤器以 70-30 的比例拆分数据，30% 的文件用作交叉验证集。我建立了一个分类器并保存了模型。

然后，我加载了测试数据，其中有？针对每一行的标签并应用 NumericToNominal 过滤器并将其保存为 arff 文件。

现在，当我加载测试数据并尝试针对它使用模型时，我总是收到错误消息，说“训练和测试集不兼容”。两个数据集都经过了相同的处理。可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:49:44.907

正如您可以从 ARFF 手册 ( [http://www.cs.waikato.ac.nz/ml/weka/arff.html](http://www.cs.waikato.ac.nz/ml/weka/arff.html) ) 中阅读的：

> 通过提供可能值的列表来定义标称值：{, , , ...}
> 
> 例如，鸢尾花数据集的类值可以定义如下：

```
@ATTRIBUTE class        {Iris-setosa,Iris-versicolor,Iris-virginica} 
```

因此，当您申请`NumericToNominal`测试文件时，您可能会在 train 和 test arff 中为一个或多个属性设置不同数量的可能值 - 这确实会发生，它困扰了我很多次 - 所以一种解决方案是手动检查您的 arff（如果它不是很大，或者只是复制和粘贴 arff 文件的调用，例如

```
@attribute 'My first binary attribute' {0,1}
(...)
@attribute 'My last binary attribute' {0,1} 
```

从火车到测试文件 - 应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T02:14:31.467

您可以使用批量过滤，在这里您可以阅读如何在 weka中[批量过滤](https://weka.wikispaces.com/Batch+filtering)

# css - 覆盖内联样式背景图像

> ID：14381917
> 
> 赞同：1
> 
> 时间：2013-01-17T15:03:26.527
> 
> 标签：css, inline-styles

我需要覆盖以下内联样式：

```
<div class="header" style="background:url(http://domain.org/headers/header_image.jpg) top right repeat-y;"> 
```

我已经尝试在外部样式表中添加以下内容，但它不起作用。

```
.header[style] {background-image:none;!important} 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T15:06:10.833

你几乎得到它，只需进行以下更改，它应该可以工作

```
.header[style] {background-image:none !important;} 
```

该`!important`规则应仅在您的规则声明中！

参考..[点击这里](http://css-tricks.com/override-inline-styles-with-css/)

# ruby-on-rails - Phusion 乘客已超过最大实例限制

> ID：14381923
> 
> 赞同：3
> 
> 时间：2013-01-17T15:03:41.250
> 
> 标签：ruby-on-rails, ruby, apache, passenger

我将以下内容用于我的 rails 应用程序。

```
ruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-linux]
Rails 3.0.5
Phusion Passenger version 3.0.5 
```

该应用程序位于一个 4GB RAM 的 linux 盒子中。我最近将我的 rails 应用程序从 3.0.1 升级到了 3.0.5，以获得他们上周发布的关键安全修复程序。

我一直注意到一件奇怪的事情。我有以下乘客设置`/etc/apache2/apache2.conf`

```
PassengerMaxPoolSize 10
PassengerMaxInstancesPerApp 5 
```

但是乘客产生了 18 个机架实例。它只是服务器中的一个应用程序，没有别的。应用程序的响应时间变慢。我怀疑额外的机架实例（突然出现）占用了额外的内存。

这是我的`free -m`输出

```
 total       used       free     shared    buffers     cached
Mem:          4011       3992         19          0          1         22
-/+ buffers/cache:       3968         43
Swap:         8191       5780       2411 
```

这是我的`passenger-status`命令输出和`passenger-memory-stats`输出。

`passenger-status`：

```
----------- General information -----------
max      = 10
count    = 5
active   = 1
inactive = 4
Waiting on global queue: 0

----------- Application groups -----------
/home/anand/public_html/railsapp/current:
  App root: /home/anand/public_html/railsapp/current
  * PID: 6704    Sessions: 0    Processed: 72      Uptime: 9m 58s
  * PID: 6696    Sessions: 0    Processed: 99      Uptime: 9m 58s
  * PID: 6712    Sessions: 0    Processed: 69      Uptime: 9m 57s
  * PID: 6688    Sessions: 0    Processed: 52      Uptime: 9m 58s
  * PID: 6677    Sessions: 1    Processed: 83      Uptime: 11m 28s 
```

`passenger-memory-stats`：

```
--------- Apache processes ---------
PID   PPID  VMSize    Private  Name
------------------------------------
6470  1     95.5 MB   0.3 MB   /usr/sbin/apache2 -k start
6471  6470  94.7 MB   0.5 MB   /usr/sbin/apache2 -k start
6488  6470  378.4 MB  4.6 MB   /usr/sbin/apache2 -k start
6489  6470  378.0 MB  3.8 MB   /usr/sbin/apache2 -k start
6774  6470  377.4 MB  3.0 MB   /usr/sbin/apache2 -k start
### Processes: 5
### Total private dirty RSS: 12.20 MB

-------- Nginx processes --------

### Processes: 0
### Total private dirty RSS: 0.00 MB

------ Passenger processes ------
PID    VMSize     Private   Name
---------------------------------
6472   87.1 MB    0.2 MB    PassengerWatchdog
6475   100.9 MB   3.2 MB    PassengerHelperAgent
6477   39.4 MB    4.8 MB    Passenger spawn server
6482   70.7 MB    0.6 MB    PassengerLoggingAgent
6677   289.1 MB   114.3 MB  Rack: /home/anand/public_html/railsapp/current
6684   287.3 MB   17.2 MB   Rack: /home/anand/public_html/railsapp/current
6688   295.6 MB   82.4 MB   Rack: /home/anand/public_html/railsapp/current
6696   299.2 MB   88.9 MB   Rack: /home/anand/public_html/railsapp/current
6704   299.0 MB   87.3 MB   Rack: /home/anand/public_html/railsapp/current
6712   312.6 MB   113.3 MB  Rack: /home/anand/public_html/railsapp/current
23808  1174.7 MB  190.9 MB  Rack: /home/anand/public_html/railsapp/current
26271  1767.0 MB  690.0 MB  Rack: /home/anand/public_html/railsapp/current
28888  1584.7 MB  177.8 MB  Rack: /home/anand/public_html/railsapp/current
32403  1638.5 MB  230.3 MB  Rack: /home/anand/public_html/railsapp/current
32427  1573.6 MB  253.4 MB  Rack: /home/anand/public_html/railsapp/current
32443  1576.0 MB  234.7 MB  Rack: /home/anand/public_html/railsapp/current
### Processes: 16
### Total private dirty RSS: 2289.34 MB 
```

这里出了什么问题？Rails 3.0.5 是否启动了额外的机架应用程序。请帮忙。

# android - 横向到纵向再现活动？

> ID：14381925
> 
> 赞同：4
> 
> 时间：2013-01-17T15:03:44.140
> 
> 标签：android

我允许用户在横向和纵向模式下工作，但是当我在这两种模式之间切换时，它只会将活动带到它的起点。

例如; 我输入了我想在某些活动中查看数据的所有规范，但是当我将模式从横向切换到纵向或从纵向切换到横向时，它只会将活动带到它的起点并且我必须再次输入所有规范查看我的数据。

是否有任何解决方案，或者android总是会在两种模式之间切换时重新创建活动？

谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:06:29.653

这是默认情况下的预期行为。处理这种情况相当容易。基本上，您保存 Activity 状态（和数据），然后在屏幕旋转时重新填充 Activity（并重新创建 Activity）。

这是一个很好的解决方案：

[在不丢失数据的情况下处理屏幕旋转 - Android](https://stackoverflow.com/questions/10126845/handle-screen-rotation-without-losing-data-android)

也值得阅读有关此主题的文档（并了解 Android 中的 Activity 生命周期）：http: [//developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:07:29.817

发生这种情况是因为在方向更改时，活动被破坏并重新创建。避免这种情况的一种方法是在 manifest.xml 的活动标记内添加以下行

```
android:configChanges="orientation|screenSize" 
```

例子 ：

```
<activity
     android:name="MyActivity"
     android:configChanges="orientation|screenSize">
</activity> 
```

# visual-studio-2008 - 尝试为 Tesseract OCR 构建基本 API 示例时缺少 tesseract_versionnumbers.vsprops

> ID：14381927
> 
> 赞同：0
> 
> 时间：2013-01-17T15:03:54.813
> 
> 标签：visual-studio-2008, tesseract

我正在尝试构建[tesseract-ocr API 的 VC++ 2008 示例](https://code.google.com/p/tesseract-ocr/downloads/detail?name=tesseract-ocr-API-Example-vs2008.zip)，但即使在 VS 2008 中加载项目也会失败并出现以下错误：

```
Property sheet file '..\..\include\tesseract_versionnumbers.vsprops' was not found or failed to load. 
```

此文件在 *.vcproj 文件中引用：

```
InheritedPropertySheets="..\..\include\tesseract_versionnumbers.vsprops" 
```

我已经用 VS 2008 编译了 tesseract-3.01，但是我在其中的任何地方都找不到这个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:13:33.103

只需将文件夹`APIExample`放在`vs2008`目录中即可。`tesseract_versionnumbers.vsprops`位于目录中的文件 `vs2008\include`。

祝你好运！

# c# - 通过 WCF 从 SQL 数据库读取字节数组 - maxArrayLength 问题

> ID：14381930
> 
> 赞同：0
> 
> 时间：2013-01-17T15:03:58.273
> 
> 标签：c#, .net, wcf

`List`我有一个 WCF 服务，它应该向我的客户端应用程序返回一个。数据库中的一列是`byte[]`. 当我尝试返回这个对象列表时，我只得到一个`NetDispatcherFaultException`带有这个内部异常的：

> “读取 XML 数据时超出了最大数组长度配额 (16384)。可以通过更改创建 XML 读取器时使用的 XmlDictionaryReaderQuotas 对象的 MaxArrayLength 属性来增加此配额。第 1 行，位置 38697。”

我在这之后用谷歌搜索，发现我应该在 中增加`maxArrayLength`，`web.config`所以我做了：

```
<protocolMapping>
    <add binding="basicHttpsBinding" scheme="https"/>
    <add binding="basicHttpBinding" scheme="http" 
         bindingConfiguration="CrudserviceBinding" />
</protocolMapping>

<bindings>
    <basicHttpBinding>
        <binding name="CrudserviceBinding" maxReceivedMessageSize="52428800" >
            <readerQuotas maxStringContentLength="10242880"  
                          maxArrayLength="10242880" />
        </binding>
    </basicHttpBinding>
</bindings> 
```

**这是我在客户端的 app.config：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
              <binding name="BasicHttpBinding_ICrudService">
                <readerQuotas maxStringContentLength="5242880" 
                              maxArrayLength="52428800" />
              </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost/My.Project/CrudService.svc"
                      binding="basicHttpBinding" 
                      bindingConfiguration="BasicHttpBinding_ICrudService"
                      contract="MobileCrudService.ICrudService" 
                      name="BasicHttpBinding_ICrudService" />
        </client>
    </system.serviceModel>
</configuration> 
```

当我再次尝试此操作时，WCF 服务返回相同的异常。谁能解释我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:16:29.367

如果您在客户端上的类库中调用该服务，请确保您正在更改实际的应用程序 .config 文件。不使用

```
Products/ProductName/Main/Source/Project_Name/bin/Debug/ProjectName.dll.config 
```

改为使用

```
Products/ProductName/Main/Source/Project_EXE_Name/bin/Debug/YourExe.config 
```

# sql - Codeigniter 获取有限制的随机记录

> ID：14381933
> 
> 赞同：0
> 
> 时间：2013-01-17T15:04:04.123
> 
> 标签：sql, codeigniter, jquery, codeigniter-2

我创建了一个页面，每次您使用 codeigniter 和 Ajax 向下滚动页面时都会加载 4 个产品。

我按照本[教程](http://www.thetutorialblog.com/php/twitter-like-pagination-using-codeigniter-and-jquery/)使用 codeigniter 和 jQuery 创建分页。
一切正常，此外，我使用 Ajax 更改了数据库的负载类型。

我遇到了codeigniter的问题。当我尝试从表中获取随机记录时，我得到了重复的产品。

这是codeigniter中的功能：

更新控制器

```
function index()
{
  $this->load->helper('url');
  $data['description'] = "Description";
  $data['keywords'] = "Keywords";
  $data['products'] = $this->abitainterni->getAllProductsLimit();
  $data['get_products'] = $this->abitainterni->get_products();
  $this->load->view('welcome', $data);
}

function get_products($offset)
{
    $already_used = $this->input->post('already_used');
    $already = explode(',', $already_used);
    $data['products'] = $this->abitainterni->getAllProductsLimit($offset, $already);
    $arr['view'] = $this->load->view('get_products', $data, true);
    $bossy = '';

    foreach($data['products'] as $p) {
      $bossy .= $p->productID.',';
    }
    $arr['view'] = $bam;
    $arr['ids'] = $bossy;
    echo json_encode($arr);

    return;
} 
```

更新脚本

```
<script type="text/javascript">

$(document).ready(function(){

<?
    $like_a_boss = "";

    foreach($products as $gp):
        $like_a_boss .= $gp->productID.',';
    endforeach;
?>

    var products = '<?= $like_a_boss; ?>';
    var loaded_products = 0;

    $(".loadMoreProducts").click(function(){
        loaded_products += 4;

        var dati = "welcome/get_products/" + loaded_products;

        $.ajax({
          url:'welcome/get_products/' + loaded_products,
          type: 'post',
          data: {already_used: products},
          cache: false,
          success: function(data) {

            var obj = $.parseJSON(data);

            $("#mainContainerProductWelcome").append(obj.view);
      already_used += obj.ids;

            if(loaded_products >= products - 4) {
                $(".loadMoreProducts").hide();
            } else {
                // load more still visible
            }
          },
          error: function() {
            // there's something wrong
          }
        });

        // show spinner on ajax request starts
        $(".loading-spinner").ajaxStart(function(){
            $(".loading-spinner").show();
            $(".text-load").hide();
        });

        // ajax request complets hide spinner
        $(".loading-spinner").ajaxStop(function(){
            $(".loading-spinner").delay(5000).hide();
            $(".text-load").show();
        });

        return false;
    });

    // submit form contact
    $(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() >= $(document).height()) {
        // click on load more btn
        $(".loadMoreProducts").click();
        return false;
    }
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:21:22.067

you'll need to keep track of the products you've already queried, throw their id's in an array, and then use something like a where not in. So something like this:

```
 function getAllProductsLimit($offset=0, $already_used = array(0))
    {
      $this->db->order_by('productID', 'RANDOM');
      $this->db->where_not_in('productID', $already_used);
      $query = $this->db->get('product', 4, $offset);

      if($query->num_rows() > 0){
        return $query->result();
      } else {
        return 0;
      }
    }

NEW CONTROLLER

    function index()
    {
        $this->load->helper('url');
        $data['title'] = "Scopri i nostri prodotti";
        $data['description'] = "Description";
        $data['keywords'] = "Keywords";
        $data['products'] = $this->abitainterni->getAllProductsLimit();
        $data['get_products'] = $this->abitainterni->get_products();
        $this->load->view('welcome', $data);
    }

    function get_products($offset)
    {
        $already_used = $this->input->post('already_used');
        $already = explode(',', $already_used);
        $data['products'] = $this->abitainterni->getAllProductsLimit($offset, $already);
        $arr['view'] = $this->load->view('get_products', $data, true);
            $bossy = '';
    foreach($data['products'] as $p)
            {
        $bossy .= $->productID.',';
            }
            $arr['view'] = $bam;
            $arr['ids'] = $bossy;
echo json_encode($arr);
return;

    }

NEW SCRIPT

<script type="text/javascript">
$(document).ready(function(){

        <?
    $like_a_boss = '';
    foreach($get_products as $gp):?>
    $like_a_boss .= $gp->productID.',';
    endforeach;?>

    var products = '<?= $like_a_boss; ?>';
    var loaded_products = 0;

    $(".loadMoreProducts").click(function(){
        loaded_products += 4;

        var dati = "welcome/get_products/" + loaded_products;

        $.ajax({
          url:'welcome/get_products/' + loaded_products,
          type: 'post',
          data: {already_used: products},
          cache: false,
          success: function(data) {
            var obj = $.parseJSON(data);

            $("#mainContainerProductWelcome").append(obj.view);
            already_used += obj.ids;           

            if(loaded_products >= products - 4) {
                $(".loadMoreProducts").hide();
            } else {
                // load more still visible
            }
          },
          error: function() {
            // there's something wrong
          }
        });

        // show spinner on ajax request starts
        $(".loading-spinner").ajaxStart(function(){
            $(".loading-spinner").show();
            $(".text-load").hide();
        });

        // ajax request complets hide spinner
        $(".loading-spinner").ajaxStop(function(){
            $(".loading-spinner").delay(5000).hide();
            $(".text-load").show();
        });

        return false;
    });

    // submit form contact
    $(window).scroll(function() {
    if($(window).scrollTop() + $(window).height() >= $(document).height()) {
        // click on load more btn
        $(".loadMoreProducts").click();
        return false;
    }
});

});
</script> 
```

Then whereever your using that function, before you echo out your results to your ajax function, run a quick foreach to add the ids of the products you just got to the already used array. You can either store this is session, or pass it back and forth between your ajax stuff, or if your ajax stuff is written fine, you don't need to worry about it, just attach the product id's to each product you're displaying using a data attribute or something and generate the array that way.

# ios - 无法使用 Core Data 从 DynamoDB 获取相关项目

> ID：14381937
> 
> 赞同：1
> 
> 时间：2013-01-17T15:04:13.797
> 
> 标签：ios, core-data, amazon-dynamodb

我有两个实体，两者之间存在一对一的关系。在测试中，我可以创建两个实体，加入并保存它们。数据按预期显示在 DynamoDB 中，并显示适当的 ID 以显示两者相关。

然后我尝试取回这些物品。我对其中一个项目执行获取请求，该请求被返回并且我可以成功记录它的标识符。但是，如果我尝试记录我期望已隐式获取的相关实体的标识符，则会收到以下异常：

```
2013-01-17 15:00:13.936 DJ[10995:c07] DynamoDBResponse.m|-[DynamoDBResponse connectionDidFinishLoading:]|62|Response Body:
{"__type":"com.amazon.coral.validate#ValidationException","message":"1 validation error detected: Value null at 'key.hashKeyElement' failed to satisfy constraint: Member must not be null"}
2013-01-17 15:00:13.936 DJ[10995:c07] DynamoDBResponse.m|-[DynamoDBResponse connectionDidFinishLoading:]|92|Returned CRC32: 650439770, Calculated CRC32: 650439770
2013-01-17 15:00:13.937 DJ[10995:c07] AmazonRequestDelegate.m|-[AmazonRequestDelegate request:didFailWithServiceException:]|74|didFailWithServiceException
2013-01-17 15:00:13.937 DJ[10995:c07] DynamoDBWebServiceClient.m|-[DynamoDBWebServiceClient invoke:rawRequest:unmarshallerDelegate:]|131|Response Status Code : 400
2013-01-17 15:00:13.938 DJ[10995:c07] AmazonErrorHandler.m|+[AmazonErrorHandler errorFromExceptionWithThrowsExceptionOption:]|51|WARNING: An exception was thrown. Please call [AmazonErrorHandler shouldNotThrowExceptions] to change this behavior.
2013-01-17 15:00:13.939 DJ[10995:c07] *** Terminating app due to uncaught exception 'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault for '0x7540100 <x-coredata://279744BC-1B25-4170-AF2C-83676954BC3D-10995-00005B7C38D21AFA/Venue/p(null)>''
*** First throw call stack:
(0x1655012 0x147ae7e 0xe6ed8 0xe6887 0xe64c1 0xe6336 0x10b000 0x260c 0x1edc 0x4a3817 0x4a3882 0x3f2a25 0x3f2dbf 0x3f2f55 0x3fbf67 0x3bffcc 0x3c0fab 0x3d2315 0x3d324b 0x3c4cf8 0x24a2df9 0x24a2ad0 0x15cabf5 0x15ca962 0x15fbbb6 0x15faf44 0x15fae1b 0x3c07da 0x3c265c 0x282d 0x1d15)
libc++abi.dylib: terminate called throwing an exception 
```

我试过设置：

```
[request setReturnsObjectsAsFaults:NO]; 
```

但结果没有区别。

在初始获取之后，我没有对数据执行任何更新。我错过了什么吗？

<< 编辑 1 >>

我可以从日志中看到，当访问相关对象时，发送到 DynamoDB 的底层消息有一个空键，所以 DynamoDB 无法获取结果是正确的，但我不明白为什么没有传输密钥，因为它在数据库中正确列出。

<< 编辑 2 >>

如果我添加第二个一对多关系并将完全相同的实体添加到其中，然后首先访问一对多关系，然后我可以按预期通过一对一关系检索完全相同的对象。. . **有没有人有一个例子，他们成功地将 DynamoDB 用于一对一的关系**，因为这似乎是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:30:46.567

似乎 DynamoDB 无法处理 null 或空字符串值（相反，您根本不应该有属性），这可能会打击您。

你能在你的应用之外做一个类似的查询吗？在“控制台”中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:20:03.860

恐怕这从未得到解决，但如果有人感兴趣的话，AWS 论坛上有一个更详细的主题 - [https://forums.aws.amazon.com/thread.jspa?threadID=114528&tstart=0](https://forums.aws.amazon.com/thread.jspa?threadID=114528&tstart=0)

最终结果是我无法触发一对一关系，除非在一对多关系中包含相同的相关实体并首先访问它，即使在返回 SqlLite 时完全相同的关系完全按预期工作。

# string - 输入验证 - 一般主题

> ID：14381939
> 
> 赞同：1
> 
> 时间：2013-01-17T15:04:15.573
> 
> 标签：string, validation

我想知道......我们都知道，我们应该在后端验证用户输入，即使我们在前端验证它。换句话说 - 前端验证只是为了可用性，后端验证是为了质量和安全。

假设我的网页上有一个输入字段，用户可以编写一些文本。攻击者是否有可能输入如此长的文本，以至于它不适合在后端保存文本的变量？到目前为止，我所看到的只是确保字符串适合数据库字段。

```
String txt = getParameter("usertext");
assert(txt.length() < 201);
// the field in the database: 
// user_text varchar(200), 
```

但是如果用户文本很长，那么长`String txt`就太小了，我的程序不会在第一行崩溃吗？

我希望这不会是关于 a`String`可能有多长的讨论。如果我们可以在没有堆大小和虚拟内存的情况下做到这一点，那就太好了；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:08:09.380

> 但是如果用户文本很长，那么长到 String txt 太小，我的程序不会在第一行崩溃吗？

答案是否定的：String 对象的大小没有真正的限制。

但要考虑到以下问题：UTF-8 字符。

当数据库字段大小以 VARCHAR2 类型（这是一个示例）的 BYTES（而不是字符，这是我的默认设置）表示并且您插入占用超过一个字节的 UTF-8 字符时，我遇到了问题。

例子：

数据库字段 = VARCHAR2 (50)

验证：字符串长度 <= 50

字符串 €€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€€具有小于50 个字符但超过 50 个字节。

spring 验证认为它已通过（长度小于 50）但 DB insert 语句抛出异常......

# python - Python：循环完成后配对字母

> ID：14381940
> 
> 赞同：2
> 
> 时间：2013-01-17T15:04:17.530
> 
> 标签：python, python-2.7

我试图通过这个配对字母

```
import string
a=string.uppercase
for i in range(0,30):
    print a[i%26]*(i / 26+1)

This will print A-Z and then after Z it will print AA BB like string 
```

但我需要把这个字符串放在`AA AB AC AD AE`打印 AZ 之后定义范围之前，然后结果将像打印 AZ 然后 AA AB AC ....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:57:08.473

您可以利用该`itertools`模块并使用生成器非常干净地处理此问题：

```
from itertools import count, product, islice
from string import ascii_uppercase

def multiletters(seq):
    for n in count(1):
        for s in product(seq, repeat=n):
            yield ''.join(s) 
```

给

```
>>> list(islice(multiletters('ABC'), 20))
['A', 'B', 'C', 'AA', 'AB', 'AC', 'BA', 'BB', 'BC', 'CA', 'CB', 'CC', 'AAA', 'AAB', 'AAC', 'ABA', 'ABB', 'ABC', 'ACA', 'ACB']
>>> list(islice(multiletters(ascii_uppercase), 30))
['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'AA', 'AB', 'AC', 'AD'] 
```

如果您愿意，您可以制作一个对象并一个一个地获取它们：

```
>>> m = multiletters(ascii_uppercase)
>>> next(m)
'A'
>>> next(m)
'B'
>>> next(m)
'C' 
```

[更新：我应该注意，尽管我一直在 Python 和 Excel 之间传递数据——实际上我即将这样做——而且从不需要这个函数。但是，如果您有关于交换数据的最佳方式的具体问题，最好单独提出一个问题，而不是编辑这个问题，因为当前问题有多个答案。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:43:10.723

我想你想要的是这样的

```
import string

def get_string(val):
    return string.uppercase[val%26]*(val / 26+1)

for i in range(-1,26):
    for j in range(0, 26):
        if i==-1:
            print get_string(j)
        else:
            print get_string(i) + get_string(j) 
```

第一次通过外循环，不打印前导字符（前 26 个 Excel 列），然后接下来的 26 列打印一个字母，然后是第二个字母。

ideone.com 上提供的工作示例-> [http://ideone.com/M862Ra](http://ideone.com/M862Ra)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:11:07.540

我认为您正在寻找的是嵌套的 for 循环，如下所示：

```
import string

def get_string(val):
    return string.uppercase[val%26]*(val / 26+1)

for i in range(0,26):
    for j in range(0, 26):
        print get_string(i) + get_string(j) 
```

请注意，我定义了`string.uppercase`对函数 ( `get_string`) 的索引，以便其代码不会重复。

# asp.net-mvc - 实体框架事务管理

> ID：14381944
> 
> 赞同：1
> 
> 时间：2013-01-17T15:04:39.677
> 
> 标签：asp.net-mvc, entity-framework, transactions

是否可以手动管理实体框架事务。

我正在开发 ASP.NET MVC 应用程序，我想使用自定义 ActionFilterAttribute，它将在执行控制器操作代码之前打开事务，如果没有发生错误，则在呈现视图后提交事务。类似于 SharpArchitecture 中的 TransactionAttribute。

我想使用 sql 事务，而不是系统事务范围。

# android - 如何在 Android 应用中使用 PubNub？

> ID：14381947
> 
> 赞同：5
> 
> 时间：2013-01-17T15:04:48.797
> 
> 标签：android, pubnub

我正在尝试开发一个用于社交媒体共享的 Android 应用程序。我知道 PubNub 如何使用云服务器以闪电般的速度和安全性共享数据。我想在我的应用程序中使用它。如果有 API，请告诉我它是如何工作的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T15:28:15.723

这是[github 上的 PubNub Android SDK](https://github.com/pubnub/java/tree/master/android) 和[官方的 PubNub Android 文档](https://www.pubnub.com/docs/android-java/pubnub-java-sdk)

有关如何正确使用它的大部分细节都在 README 中。如果您需要更多详细信息，甚至还有示例应用程序供您浏览。

# c++ - 使类变量在其他范围内可用？C++

> ID：14381949
> 
> 赞同：2
> 
> 时间：2013-01-17T15:05:01.393
> 
> 标签：c++, arrays, class, variables, scopes

在一个类的构造函数中，我创建了一个具有所需大小的数组，如下所示：

```
ArrayClass::ArrayClass(int size) 
{
    Number* nmbr = new Number[size];
} 
```

和

```
ArrayClass::ArrayClass()
{ 
    Number* nmbr = new Number[2];
} 
```

我也在标题中将其指定为

```
Number* nmbr; 
```

虽然数组本身的创建有效，但我似乎无法在构造函数之外访问它。似乎每当我离开构造函数时，变量就会从内存中释放出来。如何防止这种情况，以便在调用类中的其他函数时可以使用该变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:06:08.217

**不要创建新变量。**您的`nmbr`构造函数中的 彼此不同，并且标题中的不同。

如果您必须使用全局变量（三思而后行），请将其声明为`extern`，在单个 TU 中定义它，然后使用

```
 nmbr = new ArrayClass[2]; 
```

在你的构造函数中。

不要忘记清理内存或关于三规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:14:44.073

尝试在类的声明中而不是在构造函数中声明变量 nmbr。例子：

```
class ArrayClass

{

private: 

Number *nmbr;

public:

ArrayClass();

ArrayClass(int size);

~ArrayClass()

}

ArrayClass::ArrayClass(int size) 

{

this->nmbr = new Number[size];

}

ArrayClass::ArrayClass() 
{

this->nmbr = new Number[2];

}

ArrayClass::~ArrayClass()
{

delete this->nmbr;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T15:22:00.040

如果将所有代码放在一个地方，可能最容易在这里发现问题。

```
Number *nmbr;

class ArrayClass { 
    Number *nmbr;
public:

    ArrayClass() { 
        Number *nmbr = new Number[2];
    }
}; 
```

您在这里拥有的是三个不同范围内的三个完全独立的变量。每个都在外部范围内“隐藏”任何同名变量。

这也意味着当您在构造函数中进行初始化时`nmbr`，您*只是*在初始化构造函数本身的本地变量。当ctor返回时，该指针将被丢弃，并且您分配的内存将被泄漏。同样糟糕的是`ArrayClass::nmbr`，您（几乎可以肯定）想要初始化的那个仍然没有被初始化。

类外的`nmbr`几乎相同，但在某种程度上更安全​​：因为它是全局的，它将被零初始化；因为它是一个指针，这意味着它将被初始化为一个空指针（所以它没有指向任何数据，但至少它很容易测试并且知道它不是）。

为了防止这种情况，您可能希望消除变量的额外定义，因此所有引用都`nmbr`指向同一事物：

```
class Array { 
    Number *nmbr;
public:
    Array() : numbr(new Number[2]) {}
}; 
```

由于此类似乎在进行远程所有权（即，它通过指针分配和拥有数据），您需要遵循五规则（对 C++11 的旧规则三的更新），或者，根据强烈偏好，使用 a`std::vector<Number>`代替，因此它可以遵循“[零规则](http://flamingdangerzone.com/cxx11/2012/08/15/rule-of-zero.html)”。

# php - 在 IIS7 上设置 laravel

> ID：14381950
> 
> 赞同：4
> 
> 时间：2013-01-17T15:05:04.180
> 
> 标签：php, mod-rewrite, iis-7, virtualhost, laravel

我想设置我的`IIS7`服务器，以便让它与用`laravel`（php 框架）编写的 Web 应用程序一起工作。

`CI`我为（[链接](https://stackoverflow.com/questions/5408111/codeigniter-2-on-iis-with-web-config-file)）找到了类似的东西

但它不起作用`laravel`（当然我删除了`index.php`重定向）。

实际上只有主页有效（`www.mysite.com/public`）

`IIS7`有人在 Laravel 中使用/d吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:15:44.537

我在`web.config`里面的根文件夹中创建了文件`<configuration></configuration>`：

```
<system.webServer>
    <defaultDocument>
        <files>
            <clear />
            <add value="index.php" />
            <add value="default.aspx" />
            <add value="Default.htm" />
            <add value="Default.asp" />
            <add value="index.htm" />
            <add value="index.html" />
        </files>
    </defaultDocument>
    <handlers accessPolicy="Read, Execute, Script" />
    <rewrite>
        <rules>
            <rule name="Imported Rule 2" stopProcessing="true">
                <match url="^(.*)$" ignoreCase="false" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                </conditions>
                <action type="Rewrite" url="public/{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer> 
```

然后将`index.php`公用文件夹的文件复制到项目的根文件夹中，如[本](http://forums.laravel.io/viewtopic.php?pid=16813)指南所述修改`../paths.php`为`paths.php`

现在一切正常

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-21T10:14:54.663

我使用下面的代码，重定向到 `index.php/{R:1}`而不是`public/{R:1}` 直接开箱即用，然后没有路径更改。

```
<rewrite>
    <rules>
        <rule name="Imported Rule 2" stopProcessing="true">
            <match url="^(.*)$" ignoreCase="false" />
            <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
            </conditions>
            <action type="Rewrite" url="index.php/{R:1}" />
        </rule>
    </rules>
</rewrite> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-27T20:34:17.413

这是我的工作文件，有两条规则：（网站指向公共文件夹）

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="RewriteRequestsToPublic">
          <match url="^(.*)$" />
          <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
          </conditions>
          <action type="Rewrite" url="/{R:0}" />
        </rule>
        <rule name="Imported Rule 1" stopProcessing="true">
          <match url="^(.*)$" ignoreCase="false" />
          <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
          </conditions>
          <action type="Rewrite" url="/index.php/{R:1}" appendQueryString="true" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-10T18:19:12.130

检查 IIS 中的处理程序映射：

1.  启动 IIS
2.  点击您的网站
3.  继续“处理程序映射”（在 IIS 块中）
4.  搜索路径 PHP，名称 = PHPxx_via_FastCGI（xx = php 版本）
5.  双击它，单击请求限制并单击选项卡“动词”，您可以在其中选择所有动词。这将解决它:-)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-19T15:57:51.857

经过长时间的谷歌和测试后，它才开始工作。这是我的步骤：

带有 IIS 8.5 的 laravel5

1.  安装[窗口平台安装程序](http://www.microsoft.com/WEB/downloads/platform.aspx)
2.  使用窗口平台安装程序安装 php-5.6
3.  使用窗口平台安装程序为 IIS 安装 php-manager（可选）
4.  安装[Visual C++ Redistributable for Visual Studio 2012 (version x86](http://www.microsoft.com/en-us/download/details.aspx?id=30679)
    )
5.  安装作曲家.exe
6.  将作曲家供应商 bin 路径导出到路径
    `set PATH=%PATH%;%USERPROFILE%\AppData\Roaming\Composer\vendor\bin`
7.  跑`composer global require "laravel/installer=~1.1"`
8.  跑`lavarel new app`
9.  在 IIS 中创建新应用程序并指向`<app>/public`

就是这样，快乐的拉瓦雷尔！

参考：[http ://alvarotrigo.com/blog/installing-laravel-4-in-windows-7-with-iis7/](http://alvarotrigo.com/blog/installing-laravel-4-in-windows-7-with-iis7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-19T16:40:35.983

如果您希望能够检索您的 $_GET 变量，请不要使用：

`<match url="^(.*)$" ignoreCase="false" />`

而是使用：

`<match url="^" ignoreCase="false" />`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-20T19:06:49.603

要`IIS`在您的 Windows 上安装，请转到`control panel -> uninstall programs`并按`Turn Off Windows Features On/Off`链接，然后单击`IIS`并选择`CGI`选项。

[![在此处输入图像描述](../Images/30c038b10ff1e8e307f583fa6cf5eb5e.png)](https://i.stack.imgur.com/hfwlX.png)

`Web Platform Installer`从网上下载`install PHP and SQL drivers for IIS`

从程序打开`IIS`添加网站。对于公用文件夹，指向`Public`laravel/lumen 项目中的文件夹。

用于 Laravel 和 Lumen 项目。在任何可访问的文件夹中从 composer 创建项目。进入`public`文件夹结构中的文件夹并创建`web.config`具有以下内容的文件我从 laracasts 获得了这个

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
          <rules>
            <rule name="Rule 1" stopProcessing="true">
              <match url="^(.*)/$" ignoreCase="false" />
              <action type="Redirect" redirectType="Permanent" url="/{R:1}" />
            </rule>
            <rule name="Rule 2" stopProcessing="true">
              <match url="^" ignoreCase="false" />
              <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
              </conditions>
              <action type="Rewrite" url="index.php" />
            </rule>
          </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-21T08:28:16.477

这是我修复它的方法。打开配置文件，如果下面的映射不存在，把这些行放在下面

```
 <rewrite>
    <rules>
      <rule name="Imported Rule 1" stopProcessing="true">
        <match url="^(.*)/$" ignoreCase="false" />
        <conditions>
          <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
        </conditions>
        <action type="Redirect" redirectType="Permanent" url="/{R:1}" />
      </rule>
      <rule name="Imported Rule 2" stopProcessing="true">
        <match url="^" ignoreCase="false" />
        <conditions>
          <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
          <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
        </conditions>
        <action type="Rewrite" url="index.php" />
      </rule>
    </rules>
  </rewrite> 
```

# php - PHP 数组，有序与否？

> ID：14381951
> 
> 赞同：0
> 
> 时间：2013-01-17T15:05:07.243
> 
> 标签：php, arrays

我在 PHP 中有一个产品类型数组，它看起来很像这样：

```
$types = [
    0 => "cars",
    1 => "motorbikes",
    2 => "boats",
    3 => "airplanes"
]; 
```

这样当用户想要获取或保存它时，我可以使用类别的 ID 插入或从数据库中获取它，如下所示：

```
select * from items where type = 0; 
```

现在，我的疑问如下：如果我使用整数索引键，那么使用以下键会不一样吗？

```
$types = ["cars", "motorbikes", "etc."]; 
```

因为 PHP 会给出一个整数自动排序。

在这种情况下，您认为哪一个是最佳实践？第一个示例的优点似乎只是我可以分配不同的键，例如私有类别等，但我真的不知道。

考虑到需要翻译这些值也很重要，我是否应该考虑仅使用 ID？喜欢

```
$types = ["t1", "t2", "etc."]; 
```

然后将翻译插入其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:14:36.450

有 2 个可能的选项。

1.  您当前使用手动设置索引的选项 1。
2.  一种更好的方式 - 数据库中的一个表，包含这些类别，它允许编辑类别而不会丢失键和名称之间的关联。

您当前的选项 2 根本不是一个选项 - 它会在您插入或删除类别的同时破坏顺序

在这里设置索引：

```
 $types = [
        3 => "airplanes"
  index ^         ^ value 
```

因此，如果您从列表中删除汽车，则索引仍与其值相关联：

```
$types = [
    1 => "motorbikes",
    2 => "boats",
    3 => "airplanes"
]; 
```

而如果您不手动设置索引

```
$types = ["motorbikes", "boats", "airplanes"]; 
```

飞机会失去联系，变成船。这不是我们对 Web 应用程序的期望

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:08:57.133

这一切都取决于项目。如果我正在使用数据库中的一组项目，我喜欢将密钥作为数据库中的 id，因此如果我需要它就可以使用它。如果不需要 id，则无需定义密钥。`0`无论如何都会开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:09:27.743

我认为您的第一种方法是一个很好的方法。您甚至可以将其作为默认翻译：

```
$types["en"] = [] 
```

当然如果你有一个默认语言变量，你可以从一开始就使用它，以后进一步翻译和扩展会容易得多

数组将被视为相同，因此您可以对其进行排序并将密钥作为 ID，但这不是最佳实践，这完全取决于您如何设计数组、php 和数据库之间的关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:23:33.043

在我看来，在这种情况下最好使用

`$types = ["cars", "motorbikes", "etc."];`

正如你所说，PHP 自动分配从 0 开始的整数索引；因此无需指定无论如何都会分配的索引。

但是，这取决于您，如果您觉得在不手动指定索引的情况下声明一个数组还不够清楚，那么这取决于您。但我个人觉得这对任何称职的程序员来说都是显而易见的，因此手动指定这些索引是浪费时间和硬盘空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T15:12:49.460

我可能会错过您的问题，但`array`PHP 中的基本是有序哈希图。所以`["cars", "motorcycles", "etc."]`保证保存器排序（并且有键 0、1、2）。但您可能会考虑执行以下操作

```
class AutoTypes {
    const TYPE_CAR = 0;
    const TYPE_MOTORCYCLE = 1;
    const TYPE_BOAT = 2;

    public static function getLabels() {
        return array(self::TYPE_CAR => 'Car', self::TYPE_MOTORCYCLE => 'Motorcycle', self::TYPE_BOAT => 'Boat');
    }
} 
```

这样您就可以通过 引用自动类型`AutoTypes::CONSTANT`。因为如果你想在某个时候删除摩托车，而不是在数组中使用明确的索引，删除一个项目会破坏你的逻辑。

# asp.net - asp:button onClick='导航+运行方法'

> ID：14381953
> 
> 赞同：0
> 
> 时间：2013-01-17T15:05:22.690
> 
> 标签：asp.net, aspbutton

```
<asp:Button runat="server" ID="Button1" Text="Create" OnClick="Create_Click" CssClass="FadeOutOnEdit"/> 
```

这将在 aspx.cs 页面中运行 Create_Click 方法。（将数据添加到数据库）

我想运行此方法并在单击 btn 时导航到不同的页面。我已经试了：

```
NavigateUrl="~/Invoices/List.aspx"
 ContinueDestinationPageUrl="~/Default.aspx" 
```

任何建议谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:09:53.540

我想您所追求的是回调，尽管在这里回发会很好。

这是一篇非常好的文章，解释了这个概念并提供了示例代码：http: [//msdn.microsoft.com/en-us/magazine/cc163941.aspx](http://msdn.microsoft.com/en-us/magazine/cc163941.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:19:09.770

如果您不需要在标记中表示目标 URL，为什么不在 Create_Click 的代码中使用 Server.Transfer 或 Response.Redirect？

# .net - VB.NET 使用多个 Catch 块尝试 Catch

> ID：14381963
> 
> 赞同：29
> 
> 时间：2013-01-17T15:05:53.193
> 
> 标签：.net, vb.net, exception, .net-4.0, exception-handling

这是一个非常奇怪的问题。我们有一个带有多个 Catch 块的 Try Catch。第一个 Catch 块没有代码，只是一个注释。

```
Try
  'Some Code
Catch ex As ThreadAbortException
  'Do Nothing
Catch ex As Exception
  HandleException(ex)
End Try 
```

如果抛出除 ThreadAbortException 之外的异常，则如预期的那样，它会被第二个 Catch 捕获。但是，在 VS2010 中单步执行代码时，ex 对象在这种情况下是 Nothing。到目前为止，我们已经找到了两种方法来“修复”这个问题。

修复 1：重命名第一个异常变量。

```
Try
  'Some Code
Catch tex As ThreadAbortException
  'Do Nothing
Catch ex As Exception
  HandleException(ex)
End Try 
```

修复 2：将任何代码行添加到第一个 Catch 块。

```
Try
  'Some Code
Catch ex As ThreadAbortException
  Dim i As Integer = 1
Catch ex As Exception
  HandleException(ex)
End Try 
```

在上述任何情况下，如果运行，HandleException 中的代码似乎仍然可以正常运行。这是 Visual Studio 或调试器中的错误吗？还是我们在这里遗漏了什么，上面的第一段代码无效？

这一切都在 .NET 4.0 中完成。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T20:13:16.997

Teejay 有正确的答案。

但是，如果您的`Catch`块为空，则处理此异常完全没有意义。您只想阻止最后一个块捕获它。你*可以*使用你的方法——但是考虑到有一个空`Catch`块通常是不可接受的：异常要么不被捕获，要么应该被正确处理；默默地吞下它们必须被视为一个错误。您的案例是此规则的一个例外，但因此需要在代码中记录，否则会混淆细心的维护人员。

好吧，VB 有一个专门针对这种情况的习惯用法：

```
Try
    ' …
Catch ex As Exception When Not TypeOf ex Is ThreadAbortException
    ' Only executed if `ex` isn’t a ThreadAbortException
End Try 
```

这段代码根本没有捕捉`ThreadAbortException`到，如果你不想处理它，这是正确的做法：`ThreadAbortException` **不能**被吞下，所以即使你捕捉到它，它也会在`Catch`块的末尾重新抛出。

请注意，这与 SysDragon 的答案根本不同，后者使用常规`If`语句，而此处的代码使用语句中的特殊子句`Catch`作为过滤器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T16:16:39.760

这似乎是 VS 的调试器错误。

**证明**

如果你写：

```
Try
    Throw New InvalidOperationException("MESSAGE")
Catch ex As ArgumentException
    'Do Nothing
Catch ex As Exception
    Debug.WriteLine(ex)
End Try 
```

你看看`ex`它`Nothing`在*Quickwatch 模式下的评估结果*

***但***

在控制台中程序正确打印`System.InvalidOperationException: MESSAGE`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-17T15:52:59.367

好的，让我详细说明...

看来您必须在每次捕获中都有一个“结果”。如果您只是不希望特定捕获发生任何事情，请不要包含它，或者将其移动到代码中的不同位置。

```
Try
   'Some Code
Catch ex As ThreadAbortException
   'Do something(ex: HandleExceptionSub())
Catch ex As Exception
   HandleException(ex)
End Try 
```

如果您“捕获”异常，则必须对其进行处理。

编辑：

我还发现了这些信息，可以帮助您进一步了解 try catch 的工作方式：

多个捕获块

一个try块可以抛出多个异常，可以使用多个catch块来处理。请记住，更专业的 catch 块应该位于通用的 catch 块之前。否则编译器会显示编译错误。 [多个捕获块](http://www.c-sharpcorner.com/UploadFile/rajeshvs/ExceptionHandlinginCSharp11282005051444AM/ExceptionHandlinginCSharp.aspx)

这不是调试器的“错误”。调试器旨在帮助您查找和处理所有异常。

编辑：似乎可以从我在另一篇文章中阅读的内容中完全避免此异常。似乎最好避免异常而不是不处理它。 [处理 ThreadAbortException](https://stackoverflow.com/questions/602494/threadabortexception-vs-graceful-event-handle-exit-in-c-sharp)

编辑：刚刚在 try 中找到了有关多个 catch 块的更多信息。这来自 MSDN，并指出永远不会到达空白 catch 块之后的 catch 块... [Try Catch finally 语句](http://msdn.microsoft.com/en-us/library/fk6t46tz%28v=vs.100%29.aspx) 进一步证明这不是错误，而是强制处理代码中所有异常的预期功能。

编辑：为了让一些人在评论中直截了当，我创建了一个非常简单的测试程序来查看这是否确实是一个错误。我的发现是 catch 块工作得很好。似乎遵循 MSDN 记录的使用多个 Catch 块创建 Try Catch 的方法正如他们所说的那样工作。

```
 private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            if (textBox1.Text == "")
            {
                throw new ArgumentNullException("textBox1", "TextBox can not be empty");
            }
            else
            {
                MyString(textBox1.Text);
            }
        }
        catch (ArgumentNullException ex)
        {
            //nothing
        }
        catch (Exception ex)
        {
            MessageBox.Show("Test: " + ex.Message);
        }
    }

    private int MyString(string text)
    {
        return int.Parse(text);
    } 
```

我创建了一个带有按钮和文本框的简单表单。如果文本框为空，我会抛出 ArgumentNullException，并在“MyString”中将字符串解析为抛出“FormatException”的整数。有一个空白的 catch 块，这不是处理“捕获”异常的正确方法确实有效。所以据我所知，这不是一个错误。显然，我唯一能同意 Teejay 和 Konrad 的一点是，您不能使用 try catch 方法捕获和处理 ThreadAbortException。Konrad 的解决方案是编写 try catch 的最佳方式。

# android - 图像尺寸（drawable-hdpi/ldpi/mdpi/xhdpi）

> ID：14381965
> 
> 赞同：74
> 
> 时间：2013-01-17T15:06:03.737
> 
> 标签：android

研究android，现在我有一些图像可以放入可绘制的目录（hdpi/ldpi/mdpi/xhdpi）。我读了很多，但我还是不明白。每个目录的图像应该是哪个大小？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2014-02-25T08:49:16.840

希望这会有所帮助...

mdpi 是参考密度——也就是说，mdpi 显示器上的 1 px 等于 1 dip。资产缩放比例为：

```
ldpi | mdpi | hdpi | xhdpi | xxhdpi | xxxhdpi
0.75 | 1    | 1.5  | 2     | 3      | 4 
```

尽管除非您是专门为 Google TV 或最初的 Nexus 7 开发，否则您实际上不需要担心 tvdpi——但即使是 Google 也建议简单地使用 hdpi 资产。您可能也不需要担心 xxhdpi（尽管它永远不会受到伤害，并且至少应该在 xxhdpi 处提供启动器图标），并且 xxxhdpi 现在只是源代码中的一个常量（没有设备使用它，也没有我希望有一段时间，如果有的话），所以忽略也是安全的。

这意味着如果您正在制作 48dip 图像并计划支持最高 xhdpi 分辨率，您应该从 96px 图像开始（如果您想要 xxhdpi 的原生资源，则为 144px）并为密度制作以下图像：

```
ldpi    | mdpi    | hdpi    | xhdpi     | xxhdpi    | xxxhdpi
36 x 36 | 48 x 48 | 72 x 72 | 96 x 96   | 144 x 144 | 192 x 192 
```

并且这些应该在任何设备上以大致相同的大小显示，前提是您已将它们放置在特定于密度的文件夹中（例如 drawable-xhdpi、drawable-hdpi 等）

作为参考，这些像素密度为：

```
ldpi  | mdpi  | hdpi  | xhdpi  | xxhdpi  | xxxhdpi
120   | 160   | 240   | 320    | 480     | 640 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-02-23T17:52:07.577

```
MDPI - 32px
HDPI - 48px
XHDPI- 64px 
```

这份备忘单可能对您很方便。检查图像:-)

[![图片](../Images/1517c187c9ce195c108e4ca92002b01c.png)](https://i.stack.imgur.com/kV4Oh.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-17T15:09:57.193

我已经在[这里发布了完整的解释](https://stackoverflow.com/questions/12742792/my-xml-design-not-working-in-all-android-devices)

基本上，设计图像的一般准则是：

```
ldpi is 0.75x dimensions of mdpi
hdpi is 1.5x dimensions of mdpi
xhdpi is 2x dimensinons of mdpi 
```

通常，我为 320x480 屏幕设计 mdpi 图像，然后按照上述规则将尺寸相乘以获得其他分辨率的图像。

请参阅完整说明以获得更详细的答案。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-22T18:12:25.527

请参阅图片以供参考：-（来源：- [Android Studio](https://developer.android.com/studio/index.html) -Image Assets 选项和[Android Office 站点](https://developer.android.com/guide/practices/screens_support.html)）

[![在此处输入图像描述](../Images/a1b773c89afba8bcb2dfe59e02752e33.png)](https://i.stack.imgur.com/dagIk.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-18T08:56:01.103

平板电脑支持 tvdpi，并且该比例因子是中等 dpi 尺寸的 1.33 倍

```
 ldpi | mdpi | tvdpi | hdpi | xhdpi | xxhdpi | xxxhdpi
    0.75 | 1    | 1.33  | 1.5  | 2     | 3      | 4 
```

这意味着如果您为 xxxhdpi 设备生成 400x400 图像，您应该为 xxhdpi 生成 300x300、xhdpi 为 200x200、tvdpi 为 133x133、hdpi 为 150x150、mdpi 为 100x100、ldpi 设备为 75x75 的相同资源

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-09-29T20:28:18.897

> 低 dpi 是中 dpi 的 0.75 倍
> 
> 高 dpi 是中 dpi 的 1.5 倍
> 
> 超高 dpi 是中等 dpi 的 2 倍

将所有图像制作成基于矢量的格式是一个很好的做法，这样您就可以使用**Illustrator**等矢量设计软件轻松调整它们的大小。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-23T19:17:04.403

从**Octoer 2020 开始，** *Launcher、ActionBar/Tab 和 Notification*图标的尺寸为：

[![在此处输入图像描述](../Images/64f83e5bf09bb06a5cf61e00051b789c.png)](https://i.stack.imgur.com/5MrnU.png)

一个非常好的生成启动器图标的在线工具：[https ://romannurik.github.io/AndroidAssetStudio/icons-launcher.html](https://romannurik.github.io/AndroidAssetStudio/icons-launcher.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-04T05:09:41.310

不仅仅是标签图标，通知和启动器是一个应用程序。我对应用程序中用于不同情况的其他图标的大小感到困惑。

我使用的是 32px mdpi（操作栏图标）尺寸，我不能说它是否正确。

[![mdpi 32 像素](../Images/dd6515472066cceb088fbaf4c9c420f7.png)](https://i.stack.imgur.com/0U8i6.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-22T18:17:51.910

您可以在 android studio 中使用 Android Asset，并且 android Asset 会为您提供这种尺寸的图像作为可绘制对象，应用程序将自动使用基于设备屏幕或模拟的尺寸

# matlab - 如何启动 Matlab 分析器

> ID：14381978
> 
> 赞同：11
> 
> 时间：2013-01-17T15:06:38.107
> 
> 标签：matlab, profiler

我切换到 Matlab 2012b（从 2011a 开始），但找不到如何在新的 matlab gui 中启动分析器 gui。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T15:29:14.907

GUI 选项仍然存在，在编辑器选项卡中：

![在此处输入图像描述](../Images/ac999b8e6918105aa27290e3e829d6ef.png)

一旦函数崩溃，您将能够指定输入参数；）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T15:21:34.313

AFAIK, this should still work:

```
profile viewer 
```

while we're at it, these tweaks should still work, too:

```
profile -memory on
setpref('profiler', 'showJitLines', true); 
```

I don't have the opportunity to check, but you mean to say that R2012 doesn't have the little button on the top anymore?

# mongodb - 您如何计算 Mongo 中的最大值和唯一值？

> ID：14381986
> 
> 赞同：0
> 
> 时间：2013-01-17T15:07:06.230
> 
> 标签：mongodb

我有一堆文件：

```
{ "name" : "A", "value" : 10},
{ "name" : "B", "value" : 12},
{ "name" : "B", "value" : 14},
{ "name" : "A", "value" : 16},
{ "name" : "C", "value" : 11} 
```

我想找到每个名称的最小值，所以结果是

```
{ "name" : "A", "value" : 10},
{ "name" : "B", "value" : 12},
{ "name" : "C", "value" : 11} 
```

在 Mongo 中执行此查询的正确方法是什么？我一直在思考 SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:26:32.183

至少，您可以通过使用带有“ [$group](http://docs.mongodb.org/manual/reference/aggregation/group/#_S_group) ”和“$min”的 Mongo 聚合框架来完成此操作。假设您有一个名为“myCollection”的集合，您可以尝试以下操作：

```
db.myCollection.aggregate({$group:{_id:"$name", minimumValue: {$min : "$value"}}}); 
```

# javascript - 如果在 Mac 上，则反向引导模式选项

> ID：14381990
> 
> 赞同：1
> 
> 时间：2013-01-17T15:07:23.827
> 
> 标签：javascript, jquery, css, twitter-bootstrap, browser-detection

所以我在我的一个最新项目中使用 twitter 引导程序……我的客户使用 Mac 计算机，当我向他展示演示时，他说如果按钮可以与操作系统一起流动会很酷。

我很好奇是否有人知道如何使用 JavaScript 检测操作系统并将模型中的按钮移动到左侧而不是右侧。我也希望能够将关闭按钮向左移动。

我记得看到一个主题可以做到这一点，但我一生都找不到它。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:10:17.223

您可以使用`User-agent`了解操作系统。

[http://en.wikipedia.org/wiki/User_agent](http://en.wikipedia.org/wiki/User_agent)

在 javascript 中，您可以像这样访问用户代理：

```
navigator.userAgent; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:12:58.787

我不知道有什么插件可以完全满足您的需求，但是您可以使用以下方式[检测](http://www.javascripter.net/faq/operatin.htm)操作系统`navigator.appversion`

```
var OSName="Unknown OS";
if (navigator.appVersion.indexOf("Win")!=-1) OSName="Windows";
if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS";
if (navigator.appVersion.indexOf("X11")!=-1) OSName="UNIX";
if (navigator.appVersion.indexOf("Linux")!=-1) OSName="Linux"; 
```

然后，您可以基于操作系统分支您的代码（甚至可能只使用 CSS）。

# ios - 如何证明 ARC 有效？

> ID：14381991
> 
> 赞同：0
> 
> 时间：2013-01-17T15:07:24.993
> 
> 标签：ios, objective-c, automatic-ref-counting

我有一个非 ARC 项目，我添加了一个新文件并为其设置了一个 ARC 编译器标志 (-fobjc-arc)。当我调用 [object release] 时；在文件中，没有抛出编译器错误。我需要确定这个文件确实启用了 ARC，我该如何证明呢？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:11:23.487

运行时不检查 ARC。但是，您可以在编译时检查它：

```
#if !__has_feature(objc_arc)
    //Do the old stuff
#endif 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:14:00.427

此外，如果您可以调用`-release`，则 ARC 已关闭。一旦打开，编译器将抱怨任何手动内存管理的尝试，如`-retain`调用`-release`或`[super dealloc]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:12:09.053

尝试这个

```
#if __has_feature(objc_arc)
    // ARC is On
    NSLog(@"ARC on");

#else
    // ARC is Off
    NSLog(@"ARC off");

#endif 
```

希望对你有帮助。。

# vb.net - IEquatable(Of T).Equals 的建议命名约定？

> ID：14381995
> 
> 赞同：1
> 
> 时间：2013-01-17T15:07:50.047
> 
> 标签：vb.net, iequatable

如果我`IEquatable(Of T)`在我的类上实现并让 Visual Studio (2010) 自动生成所需的`Equals`方法，我会得到：

```
Public Function Equals1(ByVal other As Foo) As Boolean _
  Implements System.IEquatable(Of Foo).Equals

End Function 
```

`1`由于与 Object.Equals 的命名冲突，请注意额外的必要性。是否有任何约定/建议可以将此函数命名为除 之外的其他名称`Equals1`？因为坦率地说，这很丑陋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:09:28.617

你应该能够命名它`Equals()`；这只会重载该`Equals(Object)`方法。
您可能需要添加`Overloads`关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:15:56.133

定义一个与基类型方法同名但签名不同的方法会产生两种不同的效果：

1.  它可能使基类型方法无法通过派生类型访问，因此只会考虑派生类型中的定义。
2.  它可以将新方法定义添加到从基本类型导入的定义列表中。

在某些情况下，第一个选项是正确的，而在某些情况下，第二个选项是正确的。与其猜测应该使用哪个选项，VB.NET 要求在创建一个与基类型函数同名但签名不同的函数时，程序员必须要么`Shadows`指定第一个行为的关键字，要么指定指定第一个行为的`Overloads`关键字第二。

尽管 Microsoft 使用公共方法自动生成接口实现，但在某些情况下，可能希望方法只能通过接口使用。因为 VB 允许独立于实现的接口成员的名称来指定函数的名称，所以可以使接口成员只能通过实现访问，方法是将其设为私有并为其指定不会与其他任何内容冲突的任何名称*在类本身中*使用（如果方法是私有的，则与派生类成员的冲突不会成为问题）。

选择一个任意不冲突的名称，同时将声明保留为公共可能几乎从来都不是正确的做法[人们应该将声明更改为私有，将声明`Protected Overridable`更改为并将名称更改为更好的名称（例如`SomeMember_Impl`），或者更改与接口成员匹配的名称，并根据需要添加`Overloads`or`Shadows`关键字。在 的情况下`IEquatable(Of T).Equals`，`Overloads`关键字可能是最好的方法。

Incidentally, `IEquatable(Of T)` should generally only be implemented by sealed classes (or structures, which are inherently sealed). It can provide a big performance win when applied to structures (it saves a boxing operation every time it's used), and a small performance win when applied to sealed classes (there's no need to check the type of its operand). When applied to unsealed types, it's difficult to ensure that for all derivative types the semantics of `IEquatable(Of T).Equals(T)` will match those of `Equals(Object)` except by having the former method chain to the latter. Such chaining would negate any performance advantage that could have been gained by implementing `IEquatable(Of T)` in the first place.

# android - 移动设备和平板电脑的光标返回记录的默认顺序不同

> ID：14381997
> 
> 赞同：0
> 
> 时间：2013-01-17T15:07:55.827
> 
> 标签：android

我编写了一个选择查询来访问数据库中的记录集，方法是`orderBy`在`query()`. 当我在平板电脑上运行相同的示例应用程序时，我发现在移动设备上运行应用程序时方法返回的记录顺序`query()`完全不同。

我的查询：

```
Cursor cursor = database.query(true, tableName, downloadQueueTableColumnNames, selection, null, null, null, null, null); 
```

在这里，查询`orderBy`字段为空。

我希望有人解释这背后的原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:15:44.257

如果您不订购结果，它们可以按任何顺序返回。如果您连续两次调用同一设备，则不必给出相同的命令。如果您希望每次都使用相同的顺序，则必须使用 order by。