# StackOverflow 问答 15797000-15797999

# c# - 使用 GetFileAsync 读取文件时出错

> ID：15797000
> 
> 赞同：1
> 
> 时间：2013-04-03T20:04:34.193
> 
> 标签：c#, windows-runtime

我写了这行代码：

```
file = await Package.Current.InstalledLocation.GetFileAsync("ms-appx:///Images/Hair Cuts/HC_1.jpg"); 
```

但它抛出了这个异常：

```
WinRT information: An item cannot be found with the specified Name
(ms-appx:///Images/Hair Cuts/HC_1.jpg). 
```

此图像确实存在于指定文件夹中。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:17:30.433

为了检索文件，请尝试使用[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)中的代码：

```
using Windows.Storage; 
```

.

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync("ms-appx:///Images/Hair Cuts/HC_1.jpg"); 
```

# javascript - 表格单元格中的内联 CSS 元素溢出

> ID：15797008
> 
> 赞同：0
> 
> 时间：2013-04-03T20:05:05.517
> 
> 标签：javascript, html, css-tables

我创建了一个脚本，该脚本可以在表格中动态插入包含内容的表格行。问题是，我在单元格内使用`<span>`and`<a>`标记来显示多章条目。如果视口太小，而不是换行，元素只会溢出单元格，从而被作者姓名覆盖。

![屏幕截图](https://i.stack.imgur.com/WywD8.png)

网站链接：[http ://hunpony.hu/hunfic/](http://hunpony.hu/hunfic/)

插入的动态 HTML（示例）：

```
<span class="chapter-list">
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/prologus" target="_blank" data-hasqtip="true" oldtitle="Prológus" title="">Pr</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/i" target="_blank" data-hasqtip="true" oldtitle="1\. fejezet" title="">1</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/ii" target="_blank" data-hasqtip="true" oldtitle="2\. fejezet" title="">2</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/iii" target="_blank" data-hasqtip="true" oldtitle="3\. fejezet" title="">3</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/iv" target="_blank" data-hasqtip="true" oldtitle="4\. fejezet" title="">4</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/v" target="_blank" data-hasqtip="true" oldtitle="5\. fejezet" title="">5</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/vi" target="_blank" data-hasqtip="true" oldtitle="6\. fejezet" title="">6</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/vii" target="_blank" data-hasqtip="true" oldtitle="7\. fejezet" title="">7</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/viii" target="_blank" data-hasqtip="true" oldtitle="8\. fejezet" title="">8</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/epilogus" target="_blank" data-hasqtip="true" oldtitle="Epilógus" title="">Ep</a>
    <a href="https://sites.google.com/site/ponydocs/home/nite/eljonek-az-unnepek/elmulnak-az-unnepek" target="_blank" data-hasqtip="true" oldtitle="Utószó" title="">Usz</a>
</span> 
```

一些 CSS 规则：

```
td.title .chapter-list {
    list-style:none;
    padding:0;
    margin:0;
    font-variant: small-caps;
    white-space: nowrap;
    padding-right:0;
}
td.title .chapter-list:before { content: "(fejezetek: "  }
td.title .chapter-list:after { content: ")"  }
td.title .chapter-list a {
    white-space: nowrap;
    margin:0px 3px;
    padding-bottom:0;
}
td.title .chapter-list a:after { content:", " }
td.title .chapter-list a:last-child:after { content: "" !important } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:12:58.150

我已经在萤火虫中检查了这一点。删除`white-space: nowrap;`并 添加`td.title .chapter-list`它`td.title .chapter-list a`

```
td.title .chapter-list,
td.title .chapter-list a
{
white-space: normal;
} 
```

# javascript - 我希望我的应用程序将输入作为某人的推特句柄返回过去 1 周的推文

> ID：15797011
> 
> 赞同：0
> 
> 时间：2013-04-03T20:05:28.000
> 
> 标签：javascript, jquery, twitter

我希望能够找到特定用户在过去 7 天内发布的推文。有关如何完成此操作的示例代码将有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:12:32.287

不幸的是，我不相信 Twitter 会公开一个端点来仅获取推文的数量。您将必须获取您感兴趣的时间段内的所有推文，然后计算它们（或获取数组的长度，或类似的东西）。

[我相信您可以使用statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline) API 端点获得您正在寻找的推文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:14:09.957

我想您需要查看 API 中的搜索/推文：

[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

# android - 在 android 上具有多进程的 greendao 会话

> ID：15797018
> 
> 赞同：1
> 
> 时间：2013-04-03T20:05:49.557
> 
> 标签：android, greendao

我正在从事一个大型项目，该项目涉及许多不同的应用程序同时与同一个数据库进行通信。

我一直在将我们的系统更改为 using `greendao`，看看它是否会给我们带来优于 Android 的性能改进`ContentProvider`。

* * *

**问题：**

每次应用程序需要与数据库通信时，我都会让它获取一个新`DaoSession`的然后执行操作。我从不重复使用任何`DaoSessions`. 如果每个应用程序都有自己的应用程序会更好`DaoSession`吗？

**请记住，我担心同时从数据库读取/写入所有这些应用程序之间的并发性。**

1.  目前我每次需要插入时都这样做：

`this.daoMaster.newSession().getMyDao().insert(myDao);`

1.  或者我应该`DaoSession`从其他地方获得对 a 的引用并这样做：

`this.daoSession().getMyDao().insert(myDao);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T09:37:46.037

不要重新创建它，将 DaoSession 保持在应用程序范围内。

PS.：如果您成功地使用 greenDAO 提高了性能，我会很感兴趣。

# bash - 运行 Perlbrew 时的 Bash 别名

> ID：15797020
> 
> 赞同：1
> 
> 时间：2013-04-03T20:05:50.523
> 
> 标签：bash, shell, perlbrew

我在一个全新的服务器（CentOs 6）中使用 Perlbrew。

在我以前没有 Perlbrew 的系统（RedHat 4）中，我曾经在 bash shell 中使用一些别名，`alias nreload='/usr/local/nginx/sbin/nginx -s reload'`例如，重新启动 Nginx，只需将该行放入 .bash_profile 文件中。

现在，使用 Perlbrew，我在 .bash_profile 和 .bashrc 中进行了尝试，但没有成功。我可以即时创建别名，但我不能让它们永久可用。

我按照 Perlbrew 安装提示复制`source ~/perl5/perlbrew/etc/bashrc`了 .bashrc 文件中的行。我认为它应该通过登录到服务器来激活 Perlbrew Perl，但事实并非如此。所以`source ~/perl5/perlbrew/etc/bashrc;`每次我需要使用 Perlbrew Perl 时我都必须写。这似乎不是正确的方法。

也许真正的问题是我如何运行 Perlbrew。也许我不明白 Perlbrew 打开另一个 shell 的概念。如果有另一个外壳，一个子外壳，我如何在其中使用别名？

这是我的 .bash_profile 的内容：

```
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
        . ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin
source ~/perl5/perlbrew/etc/bashrc
export PATH

alias nreload='/usr/local/nginx/sbin/nginx -s reload' 
```

顺便说一句：服务器是远程服务器，我使用终端从本地 Macintosh 控制它。我读过一些关于终端比真正的 Unix 终端更多的可视化工具，但我并不完全理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:16:59.503

我找到了方法：别名必须在 .bashrc

我使用（Macintosh）终端进行连接，当登录到在线服务器时，我只需“激活”一个新的 shell，输入“/bin/bash”。

在这个新的 shell 中，我有正确的 Perlbrew Perl，一个 all 别名，因为这个新的 shell 从 .bashrc 文件中获取所有内容。

让我感到困惑的是，“一个新的 shell”并不是我所期望的真正的“一个新的终端窗口”，而是一个新的“进程”，而这个新进程显然使用 .bashrc 作为起点。

# php - $.post 在 chrome 中被取消

> ID：15797021
> 
> 赞同：4
> 
> 时间：2013-04-03T20:05:53.823
> 
> 标签：php, javascript, jquery, ajax, post

我正在使用`$.post`. 从服务器我返回 json 响应。当我直接在浏览器中打开服务器 url 时，它会成功返回。但是从js它不起作用。 ![在此处输入图像描述](https://i.stack.imgur.com/QI167.png) 我调用的链接是this( `http://54.249.240.120/qcorner/login`)。

```
<html>                                                                  
    <head>                                                                  
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    </head>                                                                 
    <body>
        <input type="button" id="testID">
        <script type="text/javascript">                                         
            $(document).ready(function() {
                $("#testID").click(function() {
                    $.post('http://54.249.240.120/qcorner/login',function(result){
                        alert(result);
                    });
                });
            });
         </script>                                                               
     </body>                                                                 
 </html> 
```

我也在 Firefox 中尝试过。在那我得到200 OK，但没有回应。

为什么会这样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:17:30.510

问题是它是一个跨域请求，可以通过打开javascript控制台查看返回的错误：

`XMLHttpRequest cannot load http://54.249.240.120/qcorner/login. Origin null is not allowed by Access-Control-Allow-Origin.`

您需要确保将`Access-Control-Allow-Origin`标头设置为允许这种情况发生，否则 Chrome 将取消请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:17:53.043

我怀疑您遇到了[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)问题。我猜您不是从 访问此页面`http://54.249.240.120/`，因为 Chrome 正在网络选项卡中明确显示它（如果它是同一个域，通常它不会这样做）。

长话短说，您不能通过 Javascript 发布到另一个域名。如果您在 www.example.com 上访问它，浏览器不会将 IP 地址识别为同一个域名（即使域名在那里解析）。最简单的方法是，如果您可以控制整个情况，只需将该登录代码与您正在测试的代码放在同一个域中。在本地环境中，您可以使用您的 [hosts 文件执行此操作，例如`54.249.240.120 www.example.com`将 example.com（替换为您访问测试页面的您自己的域）到 IP 地址。但是，这不适用于公共互联网。

如果您必须通过 javascript 发布到另一个域，则需要考虑实施 CORS 标准。[这是我发现的一篇文章](http://remysharp.com/2011/04/21/getting-cors-working/)，解释了如何在 PHP 中实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:15:27.183

HTML 200 OK 与有效响应不同。这意味着服务器收到了您的请求，但这并不意味着您的 PHP 文件实际上返回了可用数据。它可能完全返回一个空响应。是时候调试 PHP 文件了。我建议临时登录到文件或使用[FirePHP](http://www.sitepoint.com/debug-php-firebug-firephp/)。如果错误显示被禁用（因为它应该在生产服务器上），如果您的脚本在生成任何输出之前失败，就会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:17:52.247

请求到底发生了什么？您不能使用问题中列出的内容进行 ajax 请求跨域。

但是，您向 URL 发送了一个空的 POST 请求，当我复制一个空的 post 请求时，它会响应 HTTP 206 错误，这是您需要解决的问题。

`curl -X POST http://54.249.240.120/qcorner/login`

`{"head":{"status":206,"message":"Only 0 fields received, required 2"},"body":""}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-10T11:26:17.550

我和你有同样的问题，我所做的很简单。在接收 ajax 请求的 PHP 文件中，只需在发送响应之前添加此行：

```
<?php 
     header("Access-Control-Allow-Origin: *");
     ... // your code here
?> 
```

# ember.js - 在 ember.js 中查找模型

> ID：15797026
> 
> 赞同：1
> 
> 时间：2013-04-03T20:06:10.393
> 
> 标签：ember.js, ember-data

我对 ember js 完全陌生。我已经下载了 ember 的最后一个 rc 2 版本，ember-data.js 12 修订版，并查看了手册并复制了这段代码，以便能够看到对我的服务器的 GET 请求：

```
App = Ember.Application.create();

App.Router.map(function() {
... some resources...
});

App.Store = DS.Store.extend({
    revision: 12 // Default is the REST Adapter 
});

App.Person = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    birthday: DS.attr('date'),

    fullName: function() {
            return this.get('firstName') + ' ' + this.get('lastName');
    }.property('firstName', 'lastName')
});

var person = App.Person.find(1); 
```

我得到下一个错误：

> 未捕获的错误：断言失败：您的应用程序没有定义“存储”属性。尝试在模型类上调用“查找”将失败。请提供与 'YourAppName.Store = DS.Store.extend()' 相同的一个

但据我了解，我定义了 Store 属性。也许我错过了一些东西，因为我没有阅读整本手册，但老实说，我看不出有什么问题。当我在这段代码之后得到它时，我会看到`/post/1/`对我的服务器的请求，这应该是一件了不起的事情，但我仍在努力解决这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:55:57.220

这是因为 ember 应用程序是异步初始化的。通常，您只需在加载 js 时定义类，可执行代码属于钩子/回调。大多数情况下，您将在您的路线上使用模型挂钩中的模型 find()，但如果您确实需要立即执行此类操作，您可以这样做：

```
App.then(function() {
  console.log('App has been initialized...');
  var person = App.Person.find(1);
}); 
```

如果您想尝试这种方法，请尝试使用*基于**[入门截屏视频](http://emberjs.com/guides/)*的 ember-data 夹具适配器的[jsfiddle](http://jsfiddle.net/mgrassotti/A7N8n/)`App.then()`

# google-apps-script - 如何将一个代码用于多个可以更新的电子表格，尝试使用库

> ID：15797028
> 
> 赞同：5
> 
> 时间：2013-04-03T20:06:22.943
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我有 200 多个电子表格供我们的客户填写。我开发了一个脚本来管理功能基本相同的电子表格。

问题是当我修改脚本时，我需要在所有这些工作表中更改它。我尝试使用库但没有成功，我希望听到有人知道答案。

我在每个电子表格中包含（开发）的库版本没有显示随之而来的变化。它只会在包含时显示结果，这意味着为了完成这项工作，我必须访问每个电子表格，删除库并重新安装最新版本。更新后的库仅适用于我所有者的帐户。当然，任何有链接的人都可以共享该库。在任何电子表格中运行库的更新函数都会产生错误：“TypeError：无法在对象 [object Object] 中找到函数 FunctionName。（第 2 行，文件“test”）”

有没有一种好方法可以让所有电子表格都使用相同的代码，我可以随时更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:40:31.690

您应该打开“开发模式”。资源 -> 为每个包含该库的电子表格包含的库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T18:55:05.230

我自己使用图书馆并没有取得太大的成功。

我建议的一种解决方案是使用独立脚本。如果电子表格具有相同的功能，您可以使用 for 循环在所有电子表格上运行脚本。

您可以使用 getFiles() 获取文件夹内的文件数组

```
// Logs the number of files in the 'kittens' folder
 var folder = DocsList.getFolder('kittens');
 var files = folder.getFiles();
 Logger.log(files.length); 
```

# c# - 为 EF 中的一个对象添加值

> ID：15797033
> 
> 赞同：0
> 
> 时间：2013-04-03T20:06:40.663
> 
> 标签：c#, entity-framework

我有一个功能：

```
public void Add(User user)            
{
    var id = WebSecurity.CurrentUserId;
    //add id to FK CUserID 
    context.User.Add(user); 
} 
```

我正在将用户数据添加到数据库。如何将 id 值添加到 CUserID？

```
public class User
{
    [key]    
    public int UserID { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public string E-mail { get; set; }

    public UserProfile CUserID { get; set; }

}

public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int CUserId { get; set; }
    public string UserName { get; set; }
} 
```

编辑：如果我尝试这样做：

```
user.CUserId = id; 
```

我收到一个错误：

> 无法将类型“int”隐式转换为“Project.Models.UserProfile”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:02:14.703

继续你在问题中描述的内容，试试这个：

```
public void Add(User user)
{
    using (var context = new MyDbContext())
    {
        var currentUser = context.UserProfile.Single(
            u => u.UserName == System.Web.HttpContext.Current.User.Identity.Name);

        var newUser = new User();
        newUser.Name = user.Name;
        newUser.Surname = user.Surname;
        newUser.Email = user.Email;
        newUser.CUserID = currentUser.CUserId;

        context.User.Add(newUser);
        context.SaveChanges();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:50:11.110

更改`User`班级：

```
public class User
{
    [key]    
    int UserID { get; set; }
    string Name { get; set; }
    string Surname { get; set; }
    string E-mail { get; set; }

    [ForeignKey("UserProfile)]
    int CUserID { get; set; }
    virtual UserProfile UserProfile { get; set; ]
} 
```

现在您可以设置值和实体框架将在您保存更改时`ID`获得匹配。`UserProfile`

# powershell - 在 PowerShell 中查询 BlockedSendersAndDomains 列表时如何使用“-notcontains”条件参数？

> ID：15797037
> 
> 赞同：1
> 
> 时间：2013-04-03T20:07:01.663
> 
> 标签：powershell

我正在尝试列出所有在 BlockedSendersAndDomains 列表中没有“conostco.com”域的邮箱。

通过使用

```
$test= Get-MailboxJunkemailconfiguration -Identity * | fl Displayname, BlockedSendersAndDomains 
```

我可以获得所有名称的列表以及与这些名称关联的被阻止的域/电子邮件地址，但出于我的目的，我想获得不包含域“conostco.com”的所有邮箱名称的列表。有这样的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:55:22.067

```
Get-MailboxJunkEmailConfiguration -Identity * | 
Where-Object {$_.BlockedSendersAndDomains -notlike '*conostco.com*' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:32:36.267

根据您提供的示例数据，我“假设” BlockSendersAndDomains 是一个数组。

所以也许你可以做这样的事情

```
$test= Get-MailboxJunkemailconfiguration -Identity * | % { $domains = $_.BlockedSendersAndDomains.GetEnumerator() | ? {$_ -notmatch 'conostco.com'}; $name = $_.displayname ; new-object PSObject -Property @{name=$displayname;domains=$domains} } 
```

同样，我无法测试，所以看看这是否为您提供了一个 $test 对象集合，如果您愿意，您可以重复使用或只显示它。

# ios - Xcode设置viewcontroller标识iOS OpenGL

> ID：15797040
> 
> 赞同：0
> 
> 时间：2013-04-03T20:07:06.720
> 
> 标签：ios, xcode, opengl-es-2.0, glkit

我有一个 GLKit 视图控制器，我想以编程方式调用它（更改其场景），但是当我转到属性窗格时，我无法找到 Identity 属性。我附上了截图。难道我做错了什么？我应该用另一种方式称呼它吗？

![XCode 属性面板](https://i.stack.imgur.com/81Jw0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:10:56.933

您必须在顶部切换选项卡（就在“模拟指标”的上方）。我相信它位于您在照片中选择的选项卡左侧的一个选项卡上。

# ruby - ruby 数组数组在所有数组实例中保存数据，欧拉 18

> ID：15797041
> 
> 赞同：0
> 
> 时间：2013-04-03T20:07:11.620
> 
> 标签：ruby, multidimensional-array

对于以下代码

```
#!/usr/bin/ruby -w

nums = File::read("euler18nums.txt");   #opens file with number array inside.
parts = nums.split(' ');                #save it into instance of an array.
t = []                                  #dimension one of the array of arrays.
s = []                                  #dimension two.
j=0                                     #iteration variable.
k=0                                     #iteration variable.
n=1                                     #iteration variable.
parts.collect do |i|                    #itterates through the array that i have my data in.
    s[k] = i.to_i                       #converts strings to int and save into 2nd dimension.
    k+=1
    if k == n                           #number of itterations increase by one every time function is called.
        t[j] = s                        
        n+=1                            #saves second dimension of array into the first,-
        k=0                             #-and this is  where my problem is because it saves into and overwrites-
        test=0                          #-of the array that i have saved.
        while test != n                 #this is a test statement to print out the array so far-
            print t[test], "\n"         #-every time a new array is saved into it
            test+=1
        end
        j+=1
    end
end
print t                                 #prints out at the end, this is always just the last-
                                        #-array printed out fifteen times 
```

每当我将 s 保存到 t[j] 中时，它都会保存并覆盖到目前为止已创建的所有 t 实例，我是否误解了 ruby​​ 数组，我假设`t[5] = s`并且不会影响`t[4]`或影响`t[3]`。有没有办法做到这一点，其中红宝石只会为特定实例保存数组，还是我需要为此返回`C++`？这个的txt文件是

```
75
95 64
17 47 82
18 35 87 10
20 04 82 47 65
19 01 23 75 03 34
88 02 77 73 07 63 67
99 65 04 28 06 16 70 92
41 41 26 56 83 40 80 70 33
41 48 72 33 47 32 37 16 94 29
53 71 44 65 25 43 91 52 97 51 14
70 11 33 28 77 73 17 78 39 68 17 57
91 71 52 38 17 14 91 43 58 50 27 29 48
63 66 04 68 89 53 67 30 73 16 69 87 40 31
04 62 98 27 23 09 70 98 73 93 38 53 60 04 23 
```

也可以在[http://projecteuler.net/problem=18找到](http://projecteuler.net/problem=18)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:31:48.047

看起来每个元素`t`都是完全相同的`s`数组，最终`t`看起来像这样：

```
t[0] ---\
t[1] ----+--> s
t[2] ---/ 
```

当你这样做时：

```
t[j] = s 
```

您所做的只是将一个数组的引用分配给`t[j]`，您并没有制作`s`数组的副本，您只是对它进行了另一个引用。`s`如果是数组或指针，则行为与 C 或 C++ 中的行为完全相同。

我不确定您要完成什么，`t[j] = s`但您可能想要分配 to 的`s`副本`t[j]`：

```
t[j] = s.dup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:31:17.967

问题不是“覆盖”，而是您只创建一个二维数组（您指向的数组`s`）。因此，您将指向同一对象的指针写入每个`t[j]`

移动`s = []`到代码中您希望开始一个新的第二维数组的位置。

如果您想在数组中保留现有数字，请执行以下操作

```
s = s.clone 
```

. . . 这将（浅）将数组的现有内容复制到一个新内容，并指向`s`它。

# caching - API 调用和 MetaTag 的缓存

> ID：15797042
> 
> 赞同：0
> 
> 时间：2013-04-03T20:07:14.510
> 
> 标签：caching, tags, soundcloud

我为我的客户制定了一个标记策略。有几个特定的​​标签每季度更改一次。我最近更新了一个标签，将其从一个轨道中删除并将其应用到另一个轨道，3 天后它仍然返回旧轨道。对此有什么想法吗？

# javascript - 复杂对象传入 ko.mapping.fromJS

> ID：15797047
> 
> 赞同：3
> 
> 时间：2013-04-03T20:07:25.320
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin, knockout-2.0

我有一个想要传递的复杂对象`ko.mapping.fromJS`，我的问题是我只希望一个字段是可观察的，但根据我尝试过的方法，其他属性要么为空，要么不存在。

我在这里创建了一个 jsFiddle[来](http://jsfiddle.net/pcasagrande/J2YTL/)说明我的问题。我希望简单地复制内部对象，因为我不需要它是可观察的；考虑到我将拥有的这些数量，我不想要额外的开销。

这样做的目的是使`qty`可编辑，但`inner.name`在文本框中保持不变。这意味着一个是可观察的，而另一个不是。

如果有人有另一种不涉及映射的方法，我很想听听。我的视图模型有很多功能等，数据来自 AJAX 调用。

```
function viewModel() {
    var self = this;
    self.slots = ko.observableArray([]);

    self.load = function() {
        ko.mapping.fromJS(
            [
                { 'qty': 1, 'inner': { 'name': 'thing'} },
                { 'qty': 2, 'inner': { 'name': 'stuff'} }
            ],
            { 'include': ['qty'], 'ignore': ['inner.name'] },
            self.slots);
    }
};

ko.applyBindings(new viewModel());

<button data-bind="click: load">Go</button>
<ul data-bind="foreach: slots">
    <li>
        <span data-bind="text: qty"></span>&nbsp;<span data-bind="text: inner.name"></span><input data-bind="value: qty" /><input data-bind="value: inner.name" />
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:00:35.430

您需要使用`copy`，而不是`ignore`因为您希望那里的属性是不可观察的。

而且因为您直接映射一个数组，所以映射配置变得有点复杂。

您不能`copy`在“根”级别上定义，因为您的数组位于根目录。因此，您必须为`create`项目提供一个函数，并且在 create 函数中，您现在可以指定`copy`项目属性的选项：

```
 ko.mapping.fromJS(
        [
            { 'qty': 1, 'inner': { 'name': 'thing'} },
            { 'qty': 2, 'inner': { 'name': 'stuff'} }
        ],
        {
            create: function (options) {
                return ko.mapping.fromJS(options.data, {
                    copy: ['inner.name']
                })
            }
        },
        self.slots); 
```

演示[JSFiddle。](http://jsfiddle.net/QdCYn/)

# javascript - 将鼠标悬停在 javascript 列表项上时如何创建暂停或延迟？

> ID：15797049
> 
> 赞同：0
> 
> 时间：2013-04-03T20:07:36.167
> 
> 标签：javascript, jquery, settimeout

希望有人能帮忙。

我是一个 JavaScript 新手。我有一个姓名列表，当将鼠标悬停在上面时，会显示一个包含该人联系信息的框。

我遇到的问题是盒子显示得太快了；将鼠标悬停在多个名称上时，导致框快速启动。

链接： http: [//law.nd.edu/faculty/](http://law.nd.edu/faculty/)

这是我认为相关的代码：

```
<script>
jQuery(".directory-list li").hover(
function() {
  jQuery(this).find(".directory-info").fadeIn(200); ;
},
function() {
  jQuery(this).find(".directory-info").fadeOut(50);;
}
);
</script> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:12:19.703

改用 hoverIntent。

有一个不错的小插件，这是最简单的方法。

[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

它将防止您的元素快速射击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:10:35.503

您可以使用 setTimeout*引入*延迟，如下所示：

```
var hoverTimer;
jQuery(".directory-list li").hover(function() {
  var elem = jQuery(this).find(".directory-info");
  hoverTimer = setTimeout(function() {
    elem.fadeIn(200);
  }, 1000); // wait for one second and then fadeIn
},
function() {
  clearTimeout(hoverTimer);
  jQuery(this).find(".directory-info").fadeOut(50);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T20:10:35.627

最简单的方法是在淡入之前添加延迟：

```
jQuery(this).find(".directory-info").delay(300).fadeIn(200); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T20:30:01.223

看看这个小提琴，认为这就是你想要的。使用超时的另一个答案将失去函数`this`内部的上下文`setTimeout()`并且不起作用。

[http://jsfiddle.net/RZUVS/1/](http://jsfiddle.net/RZUVS/1/)。

# javascript - Facebook 连接重定向

> ID：15797050
> 
> 赞同：1
> 
> 时间：2013-04-03T20:07:36.473
> 
> 标签：javascript, facebook

我正在为 MyBB 使用 Facebook Connect 插件。现在它总是回到论坛的索引。我希望它转到一个人访问的最后一页。每当我尝试输入变量时，它最终都会出现服务器配置错误。

相关代码：

```
$fbconnectjavascript = "<script type="text/javascript">
                `<!--`
                `window.location = "../index.php"`
                `//-->`
                `</script>`"; 
```

# jax-ws - JAX-WS：向服务调用添加出站标头

> ID：15797052
> 
> 赞同：1
> 
> 时间：2013-04-03T20:07:42.830
> 
> 标签：jax-ws

我有以下客户...

```
@WebService(name = "MyService", targetNamespace = "http://namespace")
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
@XmlSeeAlso({
  ObjectFactory.class
})
public interface MyService{
  ....
} 
```

另一个班级

```
public MyService getService(){
    URL aURL = new MyHelper().getClass().getClassLoader().getResource(myURL);
    QName qname = new QName("http://xml.othersite.net/MyService/", "MyService");
    return super.getPort(qname, MyService.class);
} 
```

如何为之前返回的 MyService 对象设置出站 SOAP 标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T19:28:18.630

我有一个使用 sun 内部 API 的工作代码。这不是好的做法，但效果很好。

```
WSBindingProvider bp = (WSBindingProvider) service;
bp.setOutboundHeaders(getHeaders()); 
```

# scala - 没有正则表达式的Scala新行？

> ID：15797060
> 
> 赞同：0
> 
> 时间：2013-04-03T20:08:09.687
> 
> 标签：scala

我正在尝试将新行插入到 scala 中的字符串中。我一直在阅读，它似乎不像 java 或 C++ 那样简单。

我的问题是我有一个名为 usedCar 的类，我重写了 toString 方法，它是一个 1 班轮。

```
override def toString = ("Make: " + _carMake +  "\nYear of Car: " + _yearOfCar + "\nVin Number: " + _vinNumber + "\nOdometer Mileage: " + _odometerMileage + "\nCondition of Car: " + _carCondition + "\nBest Price: " + _bestPrice + "\nAsking Price: " + askingPrice); 
```

如果有人能告诉我如何在 toString 方法中获得新行，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:10:06.127

Java 中换行符的转义码是`\n`.

在您编辑之前的原始问题中，`/n`这是不正确的。

这样做的惯用方法是分配`sys.props("line.separator")`给一个变量并附加它。

一种更现代的惯用方法是使用`String.format()`和构建您的 String 并提供`sys.props("line.separator")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:10:52.610

~~你使用了错误的斜线。您需要反斜杠 ( `\n`) 而不是正斜杠 ( `/n`)。~~ 该问题已被编辑。

如果你在 Windows 上，你真的想要`\r\n`。正如 Jarrod 在他的回答中提到的，有更好的方法来决定使用哪一个。

# c# - SharePoint 2010 客户端对象模型 以编程方式将 Sharepoint 用户/组添加到每个文档库文件夹

> ID：15797063
> 
> 赞同：0
> 
> 时间：2013-04-03T20:08:16.637
> 
> 标签：c#, sharepoint, object, model, client

我有下面的代码，我通过谷歌搜索等找到的各种部分拼凑在一起。

该代码像冠军一样工作，提供其中各种库和文件夹的树形视图。

最近我们意外从系统中删除了一个重要用户，当这种情况发生时，它也从每个库和文件夹中删除（这是每个单独的）..（我们已经破坏了每个文件夹的权限并且不继承库或文件夹级别的权限）

我想这个应用程序代码会递归地遍历网站上的所有库和文件夹......我可以添加一些代码来将用户添加到每个文件夹中。

我的问题是到目前为止我发现的每个示例/建议都有 Folder.item.blahblahblah 但我的文件夹对象中没有名为“item”的方法

下面的代码有任何提示或直接的分步修复来满足我的需要吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.SharePoint.Client;
using System.Net;

namespace red
{
    public partial class Form1 : System.Windows.Forms.Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            textBox1.Text = "It Begins...\r\n";

            string SitenameDev = @"https://portal/sites/devv/team";
            string SitenameProd = @"https://portal/sites/";

            ClientContext clientcontext = new ClientContext(SitenameProd);
            clientcontext.Credentials = new NetworkCredential("sitecollectionadminacct", "pswd", "Domain");

                //Load Libraries from SharePoint
                clientcontext.Load(clientcontext.Web.Lists);
                clientcontext.ExecuteQuery();
                foreach (List list in clientcontext.Web.Lists)
                {
                    try
                    {
                        if (list.BaseType.ToString() == "DocumentLibrary" && !list.IsApplicationList && list.Title != "Form Templates" && list.Title != "Customized Reports" && list.Title != "Site Collection Documents" && list.Title != "Site Collection Images" && list.Title != "Images")
                        {
                            clientcontext.Load(list);
                            clientcontext.ExecuteQuery();
                            clientcontext.Load(list.RootFolder);
                            clientcontext.Load(list.RootFolder.Folders);
                            clientcontext.Load(list.RoleAssignments);
                            clientcontext.ExecuteQuery();
                            TreeViewLibraries.ShowLines = true;
                            TreeNode LibraryNode = new TreeNode(list.Title);
                            //MessageBox.Show(LibraryNode.Name);

                            TreeViewLibraries.Nodes.Add(LibraryNode);

                            if (!list.Title.StartsWith("Nothing here"))
                            {  
                                foreach (Folder SubFolder in list.RootFolder.Folders)
                                {
                                    if (SubFolder.Name != "Forms")
                                    {
                                        TreeNode MainNode = new TreeNode(SubFolder.Name);
                                        LibraryNode.Nodes.Add(MainNode);
                                        FillTreeViewNodes(SubFolder, MainNode, clientcontext);
                                    }
                                }

                            }

                        }
                    }
                    catch  (Exception eee)
                    {
                    }
                }
        }

        //Recursive Function
        public void FillTreeViewNodes(Folder SubFolder, TreeNode MainNode, ClientContext clientcontext)
        {
            clientcontext.Load(SubFolder.Folders);
            clientcontext.ExecuteQuery();

                foreach (Folder Fol in SubFolder.Folders)
                {   
                    TreeNode SubNode = new TreeNode(Fol.Name);
                    MainNode.Nodes.Add(SubNode);
                    FillTreeViewNodes(Fol, SubNode, clientcontext);

                    //ListItem Fole = new ListItem();
                }

        }

        private void TreeViewLibraries_NodeMouseDoubleClick(object sender, TreeNodeMouseClickEventArgs e)
        {
            MessageBox.Show("Node: " + e.Node.Text);
            try
            {
                MessageBox.Show("Parent: " + e.Node.Parent.Text);
            }
            catch (System.NullReferenceException)
            {
                MessageBox.Show("Parent: " + "None!");

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T09:27:42.397

Microsoft.SharePoint.Client.ClientContext clientContext = new Microsoft.SharePoint.Client.ClientContext("URL");

var user = (Microsoft.SharePoint.Client.Principal)clientContext.Web.EnsureUser("domain\user");

Microsoft.SharePoint.Client.CamlQuery caml = new Microsoft.SharePoint.Client.CamlQuery();

caml.ViewXml = //此处的 CAML 查询...

caml.FolderServerRelativeUrl = //这里的相对路径...

项目 = objList.GetItems(caml);

clientContext.Load(items);

clientContext.Credentials = new NetworkCredential（用户名，密码，域）；

clientContext.ExecuteQuery();

项目=项目[0]；

item.BreakRoleInheritance(true, true);

clientContext.ExecuteQuery();

// 您可以在这里选择访问权限 var reader = clientContext.Web.RoleDefinitions.GetByType(Microsoft.SharePoint.Client.RoleType.Reader);

var collRdb = new Microsoft.SharePoint.Client.RoleDefinitionBindingCollection(clientContext) { reader };

item.RoleAssignments.Add(user, collRdb);

clientContext.ExecuteQuery();

# paas - 哪些 PAAS 提供商有付费第三方插件市场？

> ID：15797074
> 
> 赞同：1
> 
> 时间：2013-04-03T20:08:49.717
> 
> 标签：paas

虽然不是严格的编程，但它肯定是相关的。

我正在寻找一份不错的[paas](http://en.wikipedia.org/wiki/Platform_as_a_service)（平台即服务）提供商列表，这些提供商拥有一个市场/生态系统，消费者可以在其上选择订阅 3rd 方附加组件，例如邮件即服务、mongodb 即服务等.

到目前为止，我只提出了 2 个：

*   [Heroku](https://addons.heroku.com/)
*   [发动机场](https://www.engineyard.com/partners/platform-services)

还有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T14:57:27.627

派对有点晚了，但你想看看这个： http: [//paasify.it](http://paasify.it)

这种 PaaS 比较和供应商匹配由开源配置文件支持，其中明确建模了第 3 方附加组件。目前，这些 PaaS 供应商包括*AppHarbor、cloudControl、CloudFoundry、AppFog、CloudBees、EngineYard、Heroku、Nodejitsu。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T14:51:02.413

亚马逊有一个[市场](https://aws.amazon.com/marketplace/)。

Azure 还有一个（新的）[市场](http://datamarket.azure.com/about)。

# python - 退出从 Eclipse 运行的 Python 脚本

> ID：15797075
> 
> 赞同：0
> 
> 时间：2013-04-03T20:08:55.420
> 
> 标签：python, eclipse

我知道终止 Python 脚本的方法是 with `raise SystemExit`or with `sys.exit()`which is the same 最终。

但是，当我在 Eclipse-Pydev (Ctrl+F11) 中运行它并从中退出时，程序似乎正在退出，所有窗口都消失了，Python 进程仍然存在于任务管理器中。*Terminate*和*Terminate All*按钮在 Eclipse 中也保持活动状态。按其中一个可以正确杀死它。

如果我的脚本是从 Windows 命令提示符运行的，它就可以正常终止。

这里可能是什么问题？

# ios - 在 ReactiveCocoa 中链接依赖信号

> ID：15797081
> 
> 赞同：32
> 
> 时间：2013-04-03T20:09:16.987
> 
> 标签：ios, objective-c, reactive-programming, reactive-cocoa

在 ReactiveCocoa 中，如果我们链接多个依赖信号，我们必须使用`subscribeNext:`链中的下一个信号来接收前一个信号产生的值（例如，异步操作的结果）。所以过了一会儿，代码变成了这样（省略了不必要的细节）：

```
RACSignal *buttonClickSignal = [self.logIn rac_signalForControlEvents:UIControlEventTouchUpInside];

[buttonClickSignal subscribeNext:^(UIButton *sender) {    // signal from a button click
    // prepare data

    RACSignal *loginSignal = [self logInWithUsername:username password:password];    // signal from the async network operation

    [loginSignal subscribeNext:^void (NSDictionary *json) {
        // do stuff with data received from the first network interaction, prepare some new data

        RACSignal *playlistFetchSignal = [self fetchPlaylistForToken:token];         // another signal from the async network operation

        [playlistFetchSignal subscribeNext:^(NSDictionary *json) {
            // do more stuff with the returned data
        }];

        // etc
    }];
}]; 
```

这种不断增加的嵌套看起来并不比文档中给出的非反应性示例好多少：

```
[client logInWithSuccess:^{
    [client loadCachedMessagesWithSuccess:^(NSArray *messages) {
        [client fetchMessagesAfterMessage:messages.lastObject success:^(NSArray *nextMessages) {
            NSLog(@"Fetched all messages.");
        } failure:^(NSError *error) {
            [self presentError:error];
        }];
    } failure:^(NSError *error) {
        [self presentError:error];
    }];
} failure:^(NSError *error) {
    [self presentError:error];
}]; 
```

我错过了什么吗？在 ReactiveCocoa 中是否有更好的链接依赖工作的模式？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-05T06:35:38.717

这是[RACStream](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/ReactiveCocoaFramework/ReactiveCocoa/RACStream.h)和[RACSignal](https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/ReactiveCocoaFramework/ReactiveCocoa/RACSignal%2BOperations.h)运算符开始真正派上用场的时候。在您的特定示例中，您可以使用`-flattenMap:`将结果合并到新信号中：

```
[[[buttonClickSignal
    flattenMap:^(UIButton *sender) {
        // prepare 'username' and 'password'
        return [self logInWithUsername:username password:password];
    }]
    flattenMap:^(NSDictionary *json) {
        // prepare 'token'
        return [self fetchPlaylistForToken:token];
    }]
    subscribeNext:^(NSDictionary *json) {
        // do stuff with the returned playlist data
    }]; 
```

如果您不需要任何步骤的结果，您可以使用`-sequenceMany:`or`-sequenceNext:`代替以获得类似的效果（但为了更清晰地表达意图）。

# javascript - DOM 没有通过 iOS 滚动进行视觉更新？

> ID：15797085
> 
> 赞同：2
> 
> 时间：2013-04-03T20:09:21.497
> 
> 标签：javascript, jquery, html, ios, css

这是一个奇怪的问题。

假设我在容器中`-webkit-overflow-scrolling:touch`应用了一些文本，并且`span`在内容中但在视口之外有一个具有背景颜色的元素。

如果您随后按下按钮删除`span`元素并用里面的文本替换内容，然后滚动容器以使`span`曾经存在于视口中的元素，则保留背景颜色。`span`元素本身消失了，但 DOM 并没有在视觉上更新。

## jsFiddle（在 iOS 上查看）- [http://jsfiddle.net/charlescarver/rdZq4/4/](http://jsfiddle.net/charlescarver/rdZq4/4/)

现在，我发现有两种我不喜欢的解决方案，但可以直观地更新容器：

1.  去除`-webkit-overflow-scrolling:touch`
2.  添加以下代码以更改 CSS 的一个方面，然后返回：

此方法使用`.scroll()`：

```
$(".text").scroll(function () {
$(".text").css("color", "blue");
setTimeout(function () {
    $(".text").css("color", "#000");
   }, 1)
}); 
```

问题在于，残留的背景颜色一直存在，直到滚动停止，仍然留下工件。

# json - Youtube API 按标签获取用户视频

> ID：15797096
> 
> 赞同：0
> 
> 时间：2013-04-03T20:10:09.733
> 
> 标签：json, youtube, youtube-api

我在尝试从某些用户那里获取视频时遇到问题。

**尝试从中检索视频时的情况`edransgosocial`**

* * *

**如何：** `http://gdata.youtube.com/feeds/api/videos/?alt=json&author=edransgosocial` **获取：** 7 个视频而不是全部 9 个视频

* * *

**如何：** `http://gdata.youtube.com/feeds/api/videos/?category=webinar&alt=json&author=edransgosocial`

**得到：**我仔细检查了这个：只有一个视频有`webinar`标签，但响应中出现了 5 个视频

* * *

**如何：** `http://gdata.youtube.com/feeds/api/videos/?category=screencast&alt=json&author=edransgosocial`

**获取：**类似，有两个带有`screencast`标签的视频，但只有一个正在检索

* * *

**如何：** `http://gdata.youtube.com/feeds/api/videos/-/{http://gdata.youtube.com/schemas/2007/keywords.cat}webinar|screencast?alt=json&safeSearch=none&author=edransgosocial`

**获得：** 25 个视频！只有 9 个属于该用户！

* * *

我也在尝试使用[http://gdata.youtube.com/demo/index.html](http://gdata.youtube.com/demo/index.html)但我总是得到相同的结果，这意味着我的查询很好（或者至少演示页面中的查询与地雷）。我的最终目标是`edransgosocial`使用`webinar`and`screencast`标签检索所有视频。应该只有 3 个视频。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:25:11.213

这是由于 API 一直存在问题，这些查询通常*应该*按您的预期工作。

请参阅[https://code.google.com/p/gdata-issues/issues/detail?id=4247](https://code.google.com/p/gdata-issues/issues/detail?id=4247)

# java - 多组件版本控制/构建最佳实践

> ID：15797105
> 
> 赞同：2
> 
> 时间：2013-04-03T20:10:46.007
> 
> 标签：java, maven, versioning

我有一个用 Maven 构建的 Java 项目，它聚合了几个组件，每个组件都在自己的 Maven 项目中。这些组件中的任何一个都可以单独发展。

我的项目的结构可以描述如下：

*   我的主要项目取决于：
    *   我的组件 1
    *   我的组件 2
    *   等等

如今，所有 pom.xml 都使用“快照”版本，因此，它们都使用我存储库中可用的“最新”版本。

但是一旦我将发布版本发送给我的客户，我应该冻结这些版本并在我的源代码控制中创建一个 TAG（或等效项），这样我就可以在维护时恢复以前的状态。

所以，我的问题是：我是否应该在每次发布之前更改所有 pom.xml 文件，为组件提供版本号，并将所有内容与此依赖版本联系起来？另外，如果我有很多组件（我的项目当前有 30 多个小子组件），我是否必须在每次发布之前重新编号/还原每个组件？当单个组件演变时（由于错误修复或增强），我必须增加其版本以使更改不会影响预先存在的版本，对吗？

使用 maven 的人通常如何处理这种多组件版本控制案例？

当然，我可以只依靠我的版本控制标签来恢复到以前的时间点，并在每个版本上标记每个组件，但我不喜欢这种方法，因为依赖版本控制（使用 maven）给出我对打包的内容以及（损坏的）兼容性等关系有更多的控制和可见性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:47:23.600

## 一般注意事项

您可以考虑组件之间的一些关系。他们真的是独立的（彼此对立）吗？或者是否存在某种关系......一些公共生命周期？

如果您发现它们之间存在某种关系，请考虑使用**maven 多模块**： http: [//www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)。简而言之，您将有一个父级，具有一个版本和一些模块（一些 jars .. 以 Spring 及其子模块的方式）。这将帮助您减少版本管理。

您可以考虑使用**[maven-release-plugin](http://maven.apache.org/maven-release/maven-release-plugin/)**。它将帮助您自动标记、构建和部署您的模块，更轻松地处理版本控制以及与 SCM 和存储库的链接。此外，结合多模块，它会极大地帮助你！

Stack Overflow 上有很多关于这个的话题。

我不知道你是否已经知道了。如果您愿意，我可以进一步解释它，但如果您不这样做，您可能有足够的元素可以自己搜索。

## 直截了当的答案

> 所以，我的问题是：我是否应该在每次发布之前更改所有 pom.xml 文件，为组件提供版本号，并将所有内容与此依赖版本联系起来？

是的你应该。在应用程序生命周期管理中，遵循更改非常重要。因此，正如您可以想象的那样，正如您所指出的那样，您确实应该构建和标记您的每个组件。这可能很痛苦，但 maven-realease-plugin 和多模块（即使使用持续集成平台）可能更容易。

> 我是否必须在每次发布之前重新编号/还原每个版本？

出于完全相同的原因：是的！

> 我必须增加它的版本，以便更改不会影响预先存在的版本，对吗？

是的，你也应该。假设您选择 MAJOR.minor.correction 等通用版本，第一个数字表示兼容性中断。次要版本会带来一些中断，但不应该。更正绝不会影响兼容性。

> 使用 maven 的人通常如何处理这种多组件版本控制案例？

我不能一一回复，但我之前对发布插件和多模块的评论被认为是最佳实践。如果你想更进一步，你可以想象使用更强大的 SCM（Clearcase，Perforce，...），但是 maven 集成更少，没有“很好”的文档记录，并且社区提供的示例少于 SVN 或 Git。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:25:01.700

## Maven 发布插件

如果您使用的是多模块`pom.xml`，您应该能够[`mvn release -DautoVersionSubmodules`](http://maven.apache.org/maven-release/maven-release-plugin/update-versions-mojo.html#autoVersionSubmodules)并让它对您的所有依赖项进行“发布”构建，并删除`-SNAPSHOT`版本并将它们上传到您的存储库。这就是`release`插件及其工作流程的唯一目的。

# mapreduce - 使用 Cloudant/CouchDB 链式映射减少基于聚合进行过滤和排序

> ID：15797112
> 
> 赞同：1
> 
> 时间：2013-04-03T20:11:19.790
> 
> 标签：mapreduce, couchdb, cloudant

我想过滤一个列表并根据聚合对其进行排序；在 SQL 中表达起来相当简单，但我对使用迭代 Map Reduce 的最佳方法感到困惑。我专门在 CouchDB 中使用 Cloudant 的“dbcopy”，但我*认为*这种方法可能与其他 map/reduce 架构类似。

伪代码 SQL 可能如下所示：

```
SELECT   grouping_field, aggregate(*)
FROM     data
WHERE    #{filter}
GROUP BY grouping_field
ORDER BY aggregate(*), grouping_field
LIMIT    page_size 
```

过滤器可能正在寻找匹配项，也可能在某个范围内进行搜索；例如 `field in ('foo', 'bar')`或`field between 37 and 42`。

作为一个具体的例子，考虑一个电子邮件数据集；分组字段可能是“List-id”、“Sender”或“Subject”；聚合函数可能是`count(*)`,`max(date)`或`min(date)`; filter 子句可能会考虑标志、日期范围或邮箱 ID。文档可能如下所示：

```
{
  "id": "foobar", "mailbox": "INBOX", "date": "2013-03-29",
  "sender": "foo@example.com", "subject": "Foo Bar"
} 
```

获取具有相同发件人的电子邮件计数是微不足道的：

```
"map": "function (doc) { emit(doc.sender, null) }",
"reduce": "_count" 
```

Cloudant[有一个很好的示例，可以在 map reduce 的第二遍中按计数进行排序](http://examples.cloudant.com/sales/_design/sales/index.html)。但是当我也想过滤（例如通过邮箱）时，事情很快就会变得一团糟。

如果我将过滤器添加到视图键（例如最终结果看起来像`{"key": ["INBOX", 1234, "foo@example.com"], "value": null}`，那么*在单个过滤器值*中按计数排序是微不足道的。但是使用多个过滤器按计数对数据进行排序将需要遍历整个数据集（每个键），这在大型数据集上太慢了。

或者我可以为每个潜在的过滤器选择创建一个索引；例如，最终结果看起来像`{"key": [["mbox1", "mbox2"], 1234, "foo@example.com"], "value": null},`（对于同时选择“mbox1”和“mbox2”时）或`{"key": [["mbox1"], 1234, "foo@example.com"], "value": {...}},`（对于仅选择“mbox1”时）。这很容易查询，而且速度很快。但似乎索引的磁盘大小将呈指数增长（随着不同过滤字段的数量）。而且对于开放式数据（例如日期范围）进行过滤似乎完全站不住脚。

最后，我可以动态生成处理所需过滤器的视图，仅在需要的基础上，并在不再使用它们后将其拆除（以节省磁盘空间）。这里的缺点是代码复杂性的巨大飞跃，并且每次选择新过滤器时都会产生巨大的前期成本。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:24:21.490

我已经考虑了将近一天，我认为没有比你提出的更好的方法了。您面临的挑战如下：

1) 聚合工作（计数、求和等）只能通过物化视图引擎（mapreduce）在 CouchDB/Cloudant API 中完成。

2) 虽然 group_level API 提供了一些在查询时指定可变粒度的灵活性，但它对于任意布尔查询不够灵活。

3) Cloudant API 中可以通过基于 lucene 的 _search API 进行任意布尔查询。但是，_search API 不支持聚合*后*查询。对您想做的事情的有限支持只能在 lucene 中使用 faceting，而 Cloudant 尚不支持。即使那样，我相信它可能只支持`count`而不支持`sum`或更复杂的聚合。

我认为您面临的最佳选择是使用 _search API 并使用 sort、group_by 或 group_sort，然后在客户端上进行聚合。一些要测试的示例 URL 如下所示：

GET /db/_design/ddoc/_search/indexname?q=name:mike AND age:[1.2 TO 4.5]&sort=["age","name"]

GET /db/_design/ddoc/_search/indexname?q=name:mike AND group_by="mailbox" AND group_sort=["age","name"]

# javascript - jQuery嵌套手风琴 - 禁用自动打开

> ID：15797114
> 
> 赞同：2
> 
> 时间：2013-04-03T20:11:21.927
> 
> 标签：javascript, jquery, html, accordion

我正在尝试使`#subAccordion1`父级 ( `#accordion`) 中的手风琴 ( ) 默认关闭（注意：只有一个子手风琴）。

我在这样做时遇到了一些麻烦..

这是我尝试过的 jQuery：

```
$(function() {
    $("#accordion, #subAccordion1").accordion(function() {
        autoHeight: false
        active: false
        collapsible: true
    });
}); 
```

还有我的 HTML：

```
<div id = "accordion">
     <h1>Accordion1:</h1>
     <div>
         <p>Blah</p>

         <div id = "subAccordion1">
             <h1>Accordion1.1</h1>
             <div>
                 <p> BLAH BLAH BLAH</p>
             </div>
         </div>
      <h1>Accordion2:</h1>
      <div>
           <p>Blah</p>
      </div>
</div> 
```

2 个外部手风琴（1 和 2）按预期工作，只是内部的手风琴（1.1）自动展开！

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:21:49.850

首先修复您的 HTML（缺少关闭 div）：

```
<div id = "accordion">
     <h1>Accordion1:</h1>
     <div>
         <p>Blah</p>
         <div id = "subAccordion1">
             <h1>Accordion1.1</h1>
             <div>
                 <p> BLAH BLAH BLAH</p>
             </div>
         </div>
      </div>
      <h1>Accordion2:</h1>
      <div>
           <p>Blah</p>
      </div>
</div> 
```

JavaScript

```
$(function() {
  // init parent accordion
  $("#accordion").accordion( { heightStyle: "content" });

  // init sub accordion via #id selector with options object
  $("#subAccordion1").accordion({
                autoHeight: false,
                active: false,
                collapsible: true,
                heightStyle: "content"
   });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T20:16:50.100

尝试

```
$("#accordion, #subAccordion1").accordion({ 
```

代替

```
$("#accordion, #subAccordion1").accordion(function() { 
```

# php - ASCII php 文件中的 GBP £ 符号在实时服务器上转换为 Â £（使用 git 传输）

> ID：15797116
> 
> 赞同：2
> 
> 时间：2013-04-03T20:11:25.917
> 
> 标签：php, git, utf-8, ascii

我有一段 PHP 代码，它是在 Windows 7 机器上用 notepad++ 编写的

notepad++ 中的编码设置为“编码为 ANSI”（ASCII）

我是他们在我的代码中这样做：

utf8_encode("£")

所以我肯定会得到英镑符号的 utf 友好版本。

在本地服务器上一切正常。

但是当我将它推送到我的实时服务器时，我在 php.ini 中遇到了各种 utf8 编码错误的问题。

git push/pull 过程中的某些东西是否会破坏它，或者它可能是实时服务器上的语言环境设置？

本地和实时服务器都运行 ubuntu 12.04

谢谢

**更新 1**

我得到的实际错误是

```
 invalid byte sequence for encoding "UTF8": 0xa3' 
```

（这是 Postgres SQL 错误）

本地和现场的其他区别是现场是通过 https 而本地只是 http（都是 apache）

**更新 2**

跑步：

```
file -bi script.php 
```

本地和现场产品：

```
text/x-php; charset=iso-8859-1 
```

所以看起来文件的编码是完整的？

**更新 3**

查看本地 Postgres 安装，它具有以下设置：

```
ENCODING = 'UTF8'
LC_COLLATE = 'en_GB.UTF-8'
LC_CTYPE = 'en_GB.UTF-8' 
```

而 live 有：

```
ENCODING = 'UTF8'
LC_COLLATE = 'en_US.UTF-8'
LC_CTYPE = 'en_US.UTF-8' 
```

我将看看是否可以交换整理类型以匹配本地，看看是否有帮助

**更新 4**

我正在这样做，这最终导致现场（非本地）代码失败

```
setlocale(LC_MONETARY, 'en_GB');
$equivFinal = utf8_encode("£") . money_format('%.2n', $equivFinal); 
```

**更新 5**

我越来越接近这个问题了。

在本地，字符串生成为

```
 Â£1.00 
```

在现场，字符串产生为

```
 Â£ï¿½1.00 
```

因此，由于某种原因，实时服务器在进行 UTF8 转换时添加了更多废话

**更新 6**

好的，所以我将其固定为：

```
 setlocale(LC_MONETARY, 'en_GB');
 Logger::getInstance(__NAMESPACE__)->info("TEST 01= " .money_format('%.2n', 1.00)); 
```

在本地它输出

```
 TEST 01= 1.00 
```

正如预期的那样

在现场输出

```
 TEST 01= ï¿½1.00 
```

将随机字符添加到开头，这就是导致我的 utf8 问题的原因，因为它正在喋喋不休。

知道为什么money_format 会在一台服务器上而不是另一台服务器上这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:56:29.663

终于搞定了

这是money_format

如果您不指定语言环境或未正确指定它，那么它只会做自己的事情

所以我在做

```
setlocale(LC_MONETARY, 'en_GB'); 
```

在本地，这意味着 money_format 从输出开始就忽略了 £

但在现场，这意味着 money_format 放置了 unicode WTF 字符。

为 ubuntu 正确地做

```
setlocale(LC_MONETARY, 'en_GB.UTF-8'); 
```

意味着money_format在前面带有£，因此我不需要我的utf8垃圾

**更新 1**

更好的是，不要打扰 setlocale ，我会这样做：

```
utf8_encode("£") . money_format('%!.2n', $equivFinal); 
```

它基本上格式化了货币并排除了符号前缀

然后最好还是使用 number_format 并做

```
utf8_encode("£") . number_format($equivFinal, 2); 
```

我学到了一些新东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T16:12:30.867

问题是您无法将原始 GBP 符号保存在 ASCII 文件中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T23:29:38.163

永远不要在你的源代码中使用奇怪的字符，因为无论它们“应该”如何工作，你总是会遇到这样的问题。（你可以想出你自己对“奇怪”的定义，但我的定义是你不能在不使用 alt 代码的情况下在美式英语键盘上输入的任何东西。）

为了绕过这个限制，在 chr() 函数的结果中连接。（在这种情况下，使用以下代码片段找出您需要传递 chr 的参数是 163。）

```
<?php echo(ord('£')); ?> 
```

因此，在您的情况下，该行将显示为：

```
$equivFinal = chr(163) . money_format('%.2n', $equivFinal); 
```

# python - 这个 cmp 函数可以更好地写成 sorted() 的键吗？

> ID：15797120
> 
> 赞同：2
> 
> 时间：2013-04-03T20:11:39.707
> 
> 标签：python, sorting, cmp

我正在为如何通过重新排列然后连接集合中的整数来生成最大整数的问题编写一个解决方案。我被告知对于最大整数，当表示为整数时，集合中任意两个相邻整数的排列大于它们被交换的排列。即给定 {98, 9}; 排列 998 大于 989。这适用于下面给出的示例中的所有组成整数。

我需要编写一些适用于 Python 2.7 和 3.3 的代码，并提出以下 Python 代码：

```
try:
    cmp     # Python 2 OK or NameError in Python 3
    def maxnum(x):
        return ''.join(sorted((str(n) for n in x),
                              cmp=lambda x,y:cmp(int(y+x), int(x+y))))
except NameError:
    # Python 3
    from functools import cmp_to_key
    def cmp(x, y):
        return -1 if x<y else ( 0 if x==y else 1)
    def maxnum(x):
        return ''.join(sorted((str(n) for n in x),
                              key=cmp_to_key(lambda x,y:cmp(int(y+x), int(x+y)))))

for numbers in [(1, 34, 3, 98, 9, 76, 45, 4), (54, 546, 548, 60)]:
    print('Numbers: %r\n  Largest integer: %15s' % (numbers, maxnum(numbers))) 
```

这给出了输出：

```
Numbers: (1, 34, 3, 98, 9, 76, 45, 4)
  Largest integer:    998764543431
Numbers: (54, 546, 548, 60)
  Largest integer:      6054854654 
```

现在 Raymond Hettinger 表示 'key=' 优于 'cmp=' 我倾向于同意他的观点（在他的 Pycon 2013 演讲[“将代码转换为漂亮的惯用 Python”](https://www.youtube.com/watch?v=OSGv2VnC0go)之前）。我的问题是**我无法使用像 cmp 函数这样优雅的关键函数来解决问题**。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T21:58:54.930

有一个非常简单的方法（或者我应该说原则）：你只需要比较数字的尾数，例如：

```
1 -> 1.0
34 -> 3.4
548 -> 5.48 
```

等等……</p>

你怎么能得到那个？好吧，你必须得到数字的长度并将数字`length = log10(number)//1`除以`10**length`：

```
from math import log10
def mantissa(number):
    return number / 10**( log10(number)//1 ) 
```

现在您可以使用尾数作为键功能：

```
>>> sorted((1, 34, 3, 98, 9, 76, 45, 4), key = mantissa )
[1, 3, 34, 4, 45, 76, 9, 98] 
```

所以我们只需要反转`sorted`-result，现在我们可以像你一样使用它：

```
>>> for numbers in [(1, 34, 3, 98, 9, 76, 45, 4), (54, 546, 548, 60)]:
...     print 'Numbers: %r\n  Largest integer: %15s' % (
                numbers,
                ''.join(str(i) for i in sorted(numbers, key = mantissa, reverse = True))
               )
... 
Numbers: (1, 34, 3, 98, 9, 76, 45, 4)
  Largest integer:    989764543431
Numbers: (54, 546, 548, 60)
  Largest integer:      6054854654 
```

# sql-server - 扩展事件 - 构建与特定应用程序名称连接的服务器的直方图？

> ID：15797121
> 
> 赞同：1
> 
> 时间：2013-04-03T20:11:51.743
> 
> 标签：sql-server, sql-server-2012, extended-events

我正在尝试构建一个 XE，以找出我们的哪些内部应用程序（没有应用程序名称，因此显示为 .Net SQLClient 数据提供程序）正在访问特定服务器。理想情况下，我想获得 Client 和 Database 的名称，但不确定我是否可以在一个 XE 中做到这一点。

我认为为了易于使用，我会使用 histogram/asynchronous_bucketizer，并保存尝试命中的内容和频率的计数。但是，我似乎无法让它在 2012 年工作，更不用说 2008 年了。如果我使用 sqlserver.existing_connection 它可以工作，但只会在连接时给我计数。我想在白天得到计数，看看它从每台服务器发生的频率，所以我尝试了 preconnect_completed。这是正确的事件吗？

此外，我使用 XE 的部分原因是这些服务器每分钟可以接到数千个调用。

到目前为止，这是我想出的，它有效，但只为我提供匹配的当前 SSMS 连接 - 显然，我会将其更改为 .Net SQLClient 数据提供程序。

```
CREATE EVENT SESSION UnknownAppHosts 
ON SERVER 
ADD EVENT sqlserver.existing_connection(
    ACTION(sqlserver.client_hostname)
    WHERE ([sqlserver].[client_app_name] LIKE 'Microsoft SQL Server Management%')
    ) 
ADD TARGET package0.histogram
( SET slots = 50,
      filtering_event_name='sqlserver.existing_connection', 
      source_type=1, 
      source='sqlserver.client_hostname' 
)
WITH(MAX_DISPATCH_LATENCY =1SECONDS); 
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:27:51.220

啊哈！它是登录，而不是 preconnect_starting 或 preconnect_completed。

```
CREATE EVENT SESSION UnknownAppHosts 
ON SERVER 
ADD EVENT sqlserver.login(
    ACTION(sqlserver.client_hostname)
    WHERE ([sqlserver].[client_app_name] LIKE 'Microsoft SQL Server Management%')
    ) 
ADD TARGET package0.histogram
( SET slots = 50, 
      filtering_event_name='sqlserver.login', 
      source_type=1, 
      source='sqlserver.client_hostname' 
)
WITH(MAX_DISPATCH_LATENCY =1SECONDS); 
GO 
```

然后查询它，我做了一些很棒的代码：

```
-- Parse the session data to determine the databases being used.
SELECT  slot.value('./@count', 'int') AS [Count] ,
        slot.query('./value').value('.', 'varchar(20)')
FROM
(
    SELECT CAST(target_data AS XML) AS target_data
    FROM sys.dm_xe_session_targets AS t
    INNER JOIN sys.dm_xe_sessions AS s 
        ON t.event_session_address = s.address
    WHERE   s.name = 'UnknownAppHosts'
      AND t.target_name = 'Histogram') AS tgt(target_data)
CROSS APPLY target_data.nodes('/HistogramTarget/Slot') AS bucket(slot)
ORDER BY slot.value('./@count', 'int') DESC 
```

# ruby - 如何在 ruby 中使用块作为表达式

> ID：15797123
> 
> 赞同：1
> 
> 时间：2013-04-03T20:11:53.753
> 
> 标签：ruby

我基本上想知道这样做最惯用的方法是什么：

```
@var ||= lambda {
  #some expression here to generate @var
}.call 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:18:41.593

您可以使用多行块来实现这种记忆。

```
@result ||= begin
   # The return value in here will be assigned to @result.
end 
```

这种语法可以分为两种方法。

```
def result
  @result ||= generate_result
end

def generate_result
  # Do the heavy lifting here
end 
```

*编辑*：[这些 stackoverflow 答案](https://stackoverflow.com/questions/11234142/whats-the-ruby-way-to-write-a-multi-line-lazily-calculated-methods)也可能有帮助。

# c# - 如何从他们的 Exchange 电子邮件地址获取 Active Directory 用户名？

> ID：15797124
> 
> 赞同：0
> 
> 时间：2013-04-03T20:11:59.457
> 
> 标签：c#, active-directory, exchange-server

这是我正在尝试使用的代码，但我并没有真正使用它：

```
public static string GetUserIdFromEmail(string emailAddress)
    {
        string displayName = string.Empty;

        if (emailAddress.Contains("@sub.domain.edu") || emailAddress.Contains("@domain.edu"))
        {
            displayName = emailAddress.Split(new char[] { '@' })[0];
        }
        else
        {
            //no active directory account.
            return string.Empty;
        }

        // set up domain context
        using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
        {
            // find user by display name
            try
            {
                UserPrincipal user = UserPrincipal.FindByIdentity(ctx, displayName);
                if (user != null)
                {
                    return user.SamAccountName; // or UserPrincipleName
                }
                else
                {
                    return string.Empty;
                }
            }
            catch (Exception)
            {
                return "Error";
            }
        }
    } 
```

这些是我所知道的关于我们当前系统的事情：

1.  电子邮件将是独一无二的，并遵循一定的命名约定

2.  命名约定是名字的第一个字母和整个姓氏 (dstanley)。

3.  Exchange 上的一些旧帐户是 first.last@email.com

4.  我不知道我在做什么，但我知道我想要什么。

我希望能够获取用户域的电子邮件地址并在活动目录中找到他们的记录。上面的代码是在正确的轨道上还是我可以做一些更简单的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T16:49:20.203

为了使用标准活动目录库访问用户电子邮件，您必须首先拥有 samaccount。这意味着该问题的解决方案需要您遍历每个 samaccount 并比较电子邮件地址，直到找到匹配项。

伪代码

```
foreach(user in activedirectory) 
{
  if (user.email = targeted_email)
  {
      return matched samaccount
  }
} 
```

我不相信有更好的方法来解决这个问题，因此它是一种资源密集型解决方案。

# gnu-make - 无需中间文件即可构建多个目标的 makefile 规则

> ID：15797127
> 
> 赞同：0
> 
> 时间：2013-04-03T20:12:08.963
> 
> 标签：gnu-make

我很难想出一个生成文件规则来拥有几个可执行文件，每个可执行文件都依赖于其各自的源文件。有一个共同的库，每个程序都有一个源文件： `a.c`编译并与库链接产生可执行文件`a`等。

```
LIB_C_FILES = f1.c f2.c f3.c
LIB_H_FILES = f1.h f2.h f3.h
TARGETS = a b c
CFLAGS = -g -O0 -DDEBUG

.PHONY : all clean

.c.o:
    g++ -c $(CFLAGS) -o $@ $<

all:    $(TARGETS)

${TARGETS} : lib.a ${@:%=%.c}
        g++ $(CFLAGS) ${@:=.c} -o $@ lib.a

lib.a:  ${LIB_C_FILES:.c=.o}  $(LIB_H_FILES)
        ar r $@ $? 
```

图书馆部分工作正常。当可执行文件不存在时，它也可以正常工作。但是当一个独立的源文件被修改时，它会说`make: Nothing to be done for 'all'.`

我不明白使目标在列表中单独`a`依赖源的正确方法。`a.c`我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:22:37.140

只是为了完整性：你可以用普通的旧静态模式规则做你想做的事，只要你可以匹配所有`${TARGETS}`与 make's (noddy) 模式匹配。

```
${TARGETS}: %: %.C lib.a
    g++ ${CFLAGS} $< -o $@ lib.a

lib.a: ...
    ar ... 
```

比 ? 更具可读性，也许更兼容`.SECONDEXPANSION`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:42:31.207

首先，我假设 fio.a 是一个错字（你可能是指 lib.a）。

其次，我认为棘手的部分是您的 ${@:%=%.c} 先决条件。AFAIK，$@ 不能以这种方式使用。

我认为您可以使用 .SECONDEPANSION 获得您正在寻找的行为。

尝试：

```
.SECONDEXPANSION:
${TARGETS} : lib.a $$(patsubst %,%.c,$$@) 
```

可能有一种老式的替换方法可以做到这一点，但我发现 patsubst 行比 ${@:%=%.c} 更具可读性。

（我应该补充一点，这适用于 Gnu make 3.82\. YMMV 与旧版本的 Gnu make 或 [heaven forbid] 非 Gnu 版本的 make）。

# visual-studio-2010 - 为什么 ReSharper 错误地报告“参数数量不正确”？

> ID：15797129
> 
> 赞同：1
> 
> 时间：2013-04-03T20:12:14.783
> 
> 标签：visual-studio-2010, vb.net-2010, resharper-7.1

我正在使用 Visual Studio 2010，项目在 VB.NET 中，我有 ReSharper 7.1

它不仅错误地报告`errors`警告或建议。

```
lblAccountID.Text = AccountID.ToString() 
```

ReSharper`error`在 ToString 上给了我一个，告诉我“参数数量不正确”。

AccountID 的 Type 是我们创建的自定义类，它具有 ToString 重载，接受 0 个参数，或 1 个参数作为 DisplayFormat，或 1 个参数作为我们创建的另一个自定义类，这是另一种显示格式。出于某种原因，ReSharper 只看到接受 1 个参数的 2 个重载，它认为接受 0 个参数的重载不存在。我在 13 个不同的地方对这种类型的对象调用 ToString，因此它报告了 13 个不同的错误，但代码编译并运行得非常好。没有错误，也没有给我忽略它的选项。

有没有办法可以关闭它？我真的不需要 ReSharper 首先告诉我这些类型的错误，因为如果它们真的存在，Visual Studio 会告诉我它们本身。

* * *

## 编辑

我想出了如何重新创建这个问题，但这是一个奇怪的问题。我猜这只是 ReSharper 中的一个错误。我在他们的问题跟踪器中报告了它。

这是重新创建它的最简单方法。在 1 个项目（ClassLibrary1）内部：

```
Public Class Class1
  Public Overridable Overloads Function ToString(i As Integer) As String
    Return "Class1 - " & i.ToString()
  End Function

  Public Overloads Function ToString(s As String) As String
    Return "Class1 - " & s
  End Function
End Class

Public Class Class2
  Inherits Class1

  Public Overrides Function ToString(i As Integer) As String
    Return "Class2 - " & i.ToString()
  End Function

  Public Overloads Function ToString(f As Boolean) As String
    Return "Class2 - " & f.ToString()
  End Function
End Class 
```

然后在新解决方案中的新项目中（当两个项目在同一个解决方案中时无法重新创建错误），添加对从第一个项目创建的 DLL 的引用。

```
Dim o As New Class2
Dim s As String = o.ToString()
s = o.ToString(s) 
```

这两个 ToString 方法都定义在 Class2 的基类中，或者基类的基类中，ReSharper 似乎找不到它们，认为它们不存在，并将其标记为编译错误，即使它构建和运行都很好.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:52:20.087

在 Visual Studio 中，如果您导航到 ReSharper->Options，然后在代码检查下选择检查严重性，您应该能够通过选择项目右侧的“不显示”来关闭警告。请参阅下面的屏幕截图。话虽如此，我无法找到问题文本中提到的具体错误，希望你能有更好的运气。

![ReSharper 选项](https://i.stack.imgur.com/Umdxt.png)

# android - Landroid.os.Parcelable ClassCastException

> ID：15797132
> 
> 赞同：0
> 
> 时间：2013-04-03T20:12:20.450
> 
> 标签：android

在 Android 应用程序中，我试图从 Bundle 中提取额外的内容，如下所示：

```
Parcelable p = intent.getExtras().getParcelable("android.nfc.extra.NDEF_MESSAGES"); 
```

但我得到以下异常

```
Key android.nfc.extra.NDEF_MESSAGES expected Parcelable but value was a [Landroid.os.Parcelable;.  The default value <null> was returned.
Attempt to cast generated internal exception:
java.lang.ClassCastException: android.os.Parcelable[] cannot be cast to android.os.Parcelable
    at android.os.Bundle.getParcelable(Bundle.java:1179)
    at com.example.nfcmessenger.MainActivity.onNewIntent(MainActivity.java:77)
    at android.app.Instrumentation.callActivityOnNewIntent(Instrumentation.java:1154)
    at android.app.ActivityThread.deliverNewIntents(ActivityThread.java:2299)
    at android.app.ActivityThread.performNewIntents(ActivityThread.java:2312)
    at android.app.ActivityThread.handleNewIntent(ActivityThread.java:2321)
    at android.app.ActivityThread.access$1400(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1305)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method) 
```

这是什么`Landroid.os.Parcelable`？Parcelable 的正常导入只是`android.os.Parcelable`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:42:44.707

[官方文档](http://developer.android.com/reference/android/nfc/NfcAdapter.html#EXTRA_NDEF_MESSAGES)指出：

> `NdefMessage`Extra 包含已发现标签上的存在数组。
> 
> 这个额外的对于意图是强制性的，对于和意图是`ACTION_NDEF_DISCOVERED`可选的。`ACTION_TECH_DISCOVERED``ACTION_TAG_DISCOVERED`
> 
> 当这个额外出现时，总会有至少一个`NdefMessage`元素。大多数 NDEF 标记只有一个 NDEF 消息，但我们使用一个数组来实现未来的兼容性。
> 
> 常量值：“android.nfc.extra.NDEF_MESSAGES”

您似乎正在检索 Parcelable 对象的数组，而不是单个对象。将您的代码更改为：

```
Parcelable[] pArray = intent.getExtras().getParcelableArray("android.nfc.extra.NDEF_MESSAGES");    
Parcelable p = pArray[0]; 
```

# objective-c - 将视频从 HDMI 流式传输到 NSView

> ID：15797140
> 
> 赞同：0
> 
> 时间：2013-04-03T20:12:30.797
> 
> 标签：objective-c, macos, video, video-streaming

我想要完成的是通过我的 macbook pro 上的 HDMI 端口接收视频流，并在 NSView 或窗口中显示视频。

我的最终目标是做这样的事情：

```
dvd player -- HDMI in --> computer -> apply overlay to video -- HDMI out --> tv 
```

我不确定我是否能够将视频流式传输到另一端，所以如果我可以简单地将其发送到：

```
dvd player -- HDMI in --> computer -> apply overlay to video --> display in NSView or window 
```

我会很满意的。我已经下载了苹果示例代码，用于将覆盖应用于快速视频，这是微不足道的，它是我迷失的输入流部分。我猜测一种方式是说我需要我的计算机充当“直通设备”？用于视频。不确定这是否是说我正在尝试做的正确方式。任何帮助或指向正确方向将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:39:55.880

使用与 iOS 上完全相同的 AVFoundation。

Apple 文档将引导您完成将 AVCaptureDevice 连接到 AVCaptureOutput（您的 AVPlayer 连接到 UI）。

[https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188-CH1-SW3](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188-CH1-SW3)

# antlr3 - ANTLR3 Kleene 星和树遍历

> ID：15797148
> 
> 赞同：1
> 
> 时间：2013-04-03T20:12:50.500
> 
> 标签：antlr3, tree-traversal

我是一个经验丰富的 yacc/野牛滥用者。我习惯于建造自己的树，然后遍历它们。所以，现在，切换到 ANTLR3（为什么是 3？因为 4 不支持 Python，这就是为什么！）......我有以下语法：

```
symbol : ID fields          -> ^(NAME ID fields);

fields : (DOT ID)*          -> ^(FIELD ID*); 
```

我的树语法片段是：

```
names: ^(NAME id=. fields) ;

fields: ^(FIELD .*) ; 
```

“let z = abc”的结果树是：

```
(LETS (LET z (NAME a (FIELD b c)))) 
```

步行者说：

> 第 1:10 行的节点不匹配输入 u'b' 期待

引入 + 而不是 * 的各种尝试在其他方面都失败了。也许有关于 tree walker 究竟是如何为 * 和 + 工作的文档，但我没有找到它（比如某些人和冰箱？）。

# drupal - 非法状态例外：STREAM Solr Drupal

> ID：15797151
> 
> 赞同：0
> 
> 时间：2013-04-03T20:12:58.577
> 
> 标签：drupal, solr

```
java.lang.IllegalStateException: STREAM
    at org.mortbay.jetty.Response.getWriter(Response.java:616)
    at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:187)
    at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:180)
    at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:237)
    at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:173)
    at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:124)
    at org.apache.jsp.admin.index_jsp._jspService(org.apache.jsp.admin.index_jsp:415)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:389)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
    at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
    at org.mortbay.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:503)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1221)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:306)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
    2013-04-03 09:45:39.844:WARN::/solr/admin/ 
```

以上是我在尝试通过转到管理页面检查 solr 是否正在运行时得到的堆栈跟踪。我有用于 drupal 7 的 solr 集成模块 7.x.1.x-dev，我在 Apache Solr 3.2 上使用它的 schema.xml 和 solrconfig.xml。在浏览器中，当我请求页面时，它说路径中缺少核心名称。会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:41:41.450

通常尝试更改 example/solr/conf 目录中的 solrconfig.xml 或 schema.xml，否则它可能与您的 Java 版本有关。最有可能的两个之一。

# lua - Lua删除前几个字符而不添加空格

> ID：15797157
> 
> 赞同：3
> 
> 时间：2013-04-03T20:13:21.217
> 
> 标签：lua, chars

我是 Lua 的新手，我确信这是一个愚蠢的问题。

我试图用 string.gsub 从字符串中删除前 3 个字符，代码如下：

```
string.gsub(m, "/jk", "", 1) 
```

现在“/jk”是字符串的前 3 个字符，现在，string.gsub 添加一个空格而不是删除它们。我的问题是，如何在不增加空间的情况下删除它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T20:18:49.360

`string.gsub`除非您要求它，否则不会添加空格，并且在您粘贴的代码中您没有要求它。您确定`/jk`字符串中的后面没有空格吗？

此外，如果您只是想删除前 3 个字符，则应使用`string.sub(m, 4)`.

# jquery - 在网络应用程序中使用表单标签与否？

> ID：15797158
> 
> 赞同：1
> 
> 时间：2013-04-03T20:13:28.097
> 
> 标签：jquery, forms, mobile

我正在使用 jQuery Mobile 开发我的网络应用程序。在一个对话框中，我想使用一个数字字段。是否总是需要将此输入包装在表单中？

```
<form>
<label for="text-input">Input:</label>
<input type="number" pattern="[0-9]*" name="text-input" id="text-input" value="" maxlength="4" />
</form> 
```

该文档给出了一个例子和另一个没有形式的例子。所以我想知道天气是否推荐。如果我必须使用表单，是否有必要给该标签一个 id、一个动作和一个方法属性？我的用例是我只想提供数字字段并通过 JavaScript 处理内容。我不想将表单数据发送到任何其他网页或 php 脚本或类似的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:48:46.813

严格按照 html4 和 html5 规范，表单标签不需要为用户界面使用表单控件。

从 html4 规范：

> 用于创建控件的元素通常出现在 FORM 元素内，但在用于构建用户界面时也可能出现在 FORM 元素声明之外。

它的 html5 版本稍微复杂一些，可以在这里找到： http: [//www.w3.org/TR/2012/WD-html51-20121217/forms.html#association-of-controls-and-forms](http://www.w3.org/TR/2012/WD-html51-20121217/forms.html#association-of-controls-and-forms)

就需要父表单的表单控件而言，我从中得到的是表单控件不必*与*表单相关联，这意味着它不必嵌套在一个表单中（如果它嵌套在一个表单，它将与该表单相关联）。

* * *

无论如何，我仍然更喜欢使用表单标签，这样我就可以利用这样一个事实，即在输入上按 enter 将提交它而无需进行额外的编码。

# mysql - 在mysql中做日期范围

> ID：15797159
> 
> 赞同：0
> 
> 时间：2013-04-03T20:13:30.183
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT * FROM financials 
```

如何将查询限制在过去 30 天内的日期？就像是：

```
SELECT * FROM financials WHERE date BETWEEN now - 30 days AND now 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:14:13.933

```
SELECT * FROM financials WHERE date >= NOW() - INTERVAL 30 DAY 
```

# css - 浏览器对 CSS 页码的支持

> ID：15797161
> 
> 赞同：46
> 
> 时间：2013-04-03T20:13:38.337
> 
> 标签：css, printing, cross-browser, css-paged-media

所以我知道这个选项：[Page numbers with CSS/HTML](https://stackoverflow.com/questions/6109893/page-numbers-with-css-html/6109932)。

到目前为止，这似乎是将页码添加到页面的打印版本的最佳方法，但我无法在任何地方得到任何变体。我已经在 Chrome、Firefox 和 IE9 中尝试了我的 Windows 7 机器。根据一些链接，Prince XML 等更多专有软件可能支持此功能。Web 浏览器是否支持打印版本？

我尝试只制作一个空白的 html 文件，并在头部添加两个样式标签：

```
@page {
  @bottom-right {
    content: counter(page) " of " counter(pages);
  }
} 
```

我还简化了它，甚至只是`content: "TEXT";`用来看看我是否可以展示一些东西。这在任何地方都支持吗？通过“this”，我特别指的是`@page`and`@bottom-right`标签，因为我已经让内容工作了很多次。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-19T17:52:39.080

我也一直在尝试实现分页媒体，并且根据此 Wikipedia 页面发现，浏览器尚不支持边距框。难怪它不会工作！

[http://en.wikipedia.org/wiki/Comparison_of_layout_engines_(Cascading_Style_Sheets)](http://en.wikipedia.org/wiki/Comparison_of_layout_engines_(Cascading_Style_Sheets))

请参阅表格、语法和规则、边距框部分。页边距框是页码以及运行页眉和页脚所需要的。实现这一点将为我节省将打印媒体转换为 PDF 的开销。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-20T14:03:46.030

不使用@page，但我已经获得了在 Firefox 20 中工作的纯 CSS 页码：

[http://jsfiddle.net/okohll/QnFKZ/](http://jsfiddle.net/okohll/QnFKZ/)

要打印，请右键单击结果框（右下角）并选择

此框架-> 打印框架...

CSS是

```
#content {
    display: table;
}

#pageFooter {
    display: table-footer-group;
}

#pageFooter:after {
    counter-increment: page;
    content: counter(page);
} 
```

HTML是

```
<div id="content">
  <div id="pageFooter">Page </div>
  multi-page content here...
</div> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-06T21:34:22.543

**这似乎不再起作用了。似乎它只工作了很短的时间，浏览器支持被删除了！**

[根据https://developer.mozilla.org/en-US/docs/CSS/Counters](https://developer.mozilla.org/en-US/docs/CSS/Counters)，必须先重置计数器才能使用。

您可以将起始编号设置为任意值，默认为 0。

例子：

```
@page {
    counter-increment: page;
    counter-reset: page 1;
    @top-right {
        content: "Page " counter(page) " of " counter(pages);
    }
} 
```

... 理论上。在现实世界中，只有 PrinceXML 支持这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-25T22:40:00.547

通过 Mozilla，（[打印文档](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_started/Media)）

这会在每个打印页面上放置页眉和页脚。这在 Mozilla 中运行良好，但在 IE 和 Chrome 中不太好。

```
<!DOCTYPE html>
<html>
<head>
<title>Print sample</title>
<link rel="stylesheet" href="style4.css">
</head>
<body>
<h1>Section A</h1>
<p>This is the first section...</p>
<h1>Section B</h1>
<p>This is the second section...</p>
<div id="print-head">
  Heading for paged media
</div>
<div id="print-foot">
  Page: 
</div>
</body>
</html> 
```

CSS：

```
/*** Print sample ***/

/* defaults  for screen */
#print-head,
#print-foot {
    display: none;
}

/* print only */
@media print {

h1 {
   page-break-before: always;
   padding-top: 2em;
}

h1:first-child {
  page-break-before: avoid;
  counter-reset: page;
}

#print-head {
    display: block;
    position: fixed;
    top: 0pt;
    left:0pt;
    right: 0pt;

    font-size: 200%;
    text-align: center;
}

#print-foot {
   display: block;
   position: fixed;
   bottom: 0pt;
   right: 0pt;

  font-size: 200%;
}

#print-foot:after {
    content: counter(page);
    counter-increment: page;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-18T10:22:04.713

如果您希望在 Chrome/Chromium 下打印时添加页码，一种简单的解决方案是使用[Paged.js](https://www.pagedjs.org/)。

这个 JS 库获取您的 HTML/CSS 并将其切割成页面，准备好作为一本书打印，您将在浏览器中进行预览。它使`@page`大多数 CSS3 规范适用于 Chrome。

## 解决方案 1（简单）如果您可以将视图切割成页面，准备打印

只需将他们的 CDN 添加`head`到您页面的标签中：

```
<link href="path/to/file/interface.css" rel="stylesheet" type="text/css"> 
```

然后，您可以使用自动计数器添加页码`page`。例子 ：

HTML 放在任何你想显示当前页码的地方：

```
<div class="page-number"></div> 
```

CSS 使数字出现在 div 中：

```
.page-number{
  content: counter(page)
} 
```

该库还允许轻松管理页边距、页脚、页眉等。

## 解决方案 2（更棘手）如果您只想在打印时显示数字（和分页符）

在这种情况下，您只需要在打印文档时应用 Paged.js CDN。我能想到的一种方法是将`print me`触发 Javascript 的按钮添加到：

1.  将 CDN 添加到页面
2.  **然后**执行 `window.print();`启动导航器的打印提示

# python - 是在 PyTables 中添加列以创建新表并复制的唯一方法吗？

> ID：15797163
> 
> 赞同：5
> 
> 时间：2013-04-03T20:13:39.353
> 
> 标签：python, pytables

我正在寻找一种可以处理存储在磁盘上的异构数据的持久数据存储解决方案。PyTables 似乎是一个显而易见的选择，但我能找到的关于如何附加新列的唯一信息是一个教程示例。本教程让用户创建一个添加列的新表，将旧表复制到新表中，最后删除旧表。这似乎是一个巨大的痛苦。这是必须要做的吗？

如果是这样，将混合数据存储在磁盘上可以相对轻松地容纳新列的更好选择是什么？我也看过 sqlite3 并且列选项在那里似乎也相当有限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-19T20:44:46.257

是的，您必须创建一个新表并复制原始数据。这是因为表格是一种密集格式。这给它带来了巨大的性能优势，但成本之一是添加新列有点昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-24T13:03:46.927

感谢[Anthony Scopatz](https://stackoverflow.com/users/2312428/anthony-scopatz)的回答。

我搜索网站并在 github 中，我发现有人展示了如何在 PyTables 中添加列。显示如何在 PyTables 中添加列的示例

[原始版本](https://gist.github.com/swarbhanu/1405074)，示例显示如何在 PyTables 中添加列，但迁移有一些困难。

[修改后的版本](https://gist.github.com/danieljfarrell/b848a692e7241848bff5)，隔离了复制逻辑，部分术语被弃用，新增列有一些小错误。

根据他们的贡献，我更新了在 PyTables 中添加新列的代码。（Python 3.6，窗口）

```
# -*- coding: utf-8 -*-
"""
PyTables, append a column
    """
import tables as tb
pth='d:/download/'

# Describe a water class
class Water(tb.IsDescription):
    waterbody_name   = tb.StringCol(16, pos=1)   # 16-character String
    lati             = tb.Int32Col(pos=2)        # integer
    longi            = tb.Int32Col(pos=3)        # integer
    airpressure      = tb.Float32Col(pos=4)      # float  (single-precision)
    temperature      = tb.Float64Col(pos=5)      # double (double-precision)

# Open a file in "w"rite mode
# if don't include pth, then it will be in the same path as the code.
fileh = tb.open_file(pth+"myadd-column.h5", mode = "w")

# Create a table in the root directory and append data...
tableroot = fileh.create_table(fileh.root, 'root_table', Water,
                               "A table at root", tb.Filters(1))
tableroot.append([("Mediterranean", 10, 0, 10*10, 10**2),
              ("Mediterranean", 11, -1, 11*11, 11**2),
              ("Adriatic", 12, -2, 12*12, 12**2)])
print ("\nContents of the table in root:\n",
       fileh.root.root_table[:])

# Create a new table in newgroup group and append several rows
group = fileh.create_group(fileh.root, "newgroup")
table = fileh.create_table(group, 'orginal_table', Water, "A table", tb.Filters(1))
table.append([("Atlantic", 10, 0, 10*10, 10**2),
              ("Pacific", 11, -1, 11*11, 11**2),
              ("Atlantic", 12, -2, 12*12, 12**2)])
print ("\nContents of the original table in newgroup:\n",
       fileh.root.newgroup.orginal_table[:])
# close the file
fileh.close()

#%% Open it again in append mode
fileh = tb.open_file(pth+"myadd-column.h5", "a")
group = fileh.root.newgroup
table = group.orginal_table

# Isolated the copying logic
def append_column(table, group, name, column):
    """Returns a copy of `table` with an empty `column` appended named `name`."""
    description = table.description._v_colObjects.copy()
    description[name] = column
    copy = tb.Table(group, table.name+"_copy", description)

    # Copy the user attributes
    table.attrs._f_copy(copy)

    # Fill the rows of new table with default values
    for i in range(table.nrows):
        copy.row.append()
    # Flush the rows to disk
    copy.flush()

    # Copy the columns of source table to destination
    for col in descr:
        getattr(copy.cols, col)[:] = getattr(table.cols, col)[:]

    # choose wether remove the original table
#    table.remove()

    return copy

# Get a description of table in dictionary format
descr = table.description._v_colObjects
descr2 = descr.copy()

# Add a column to description
descr2["hot"] = tb.BoolCol(dflt=False)

# append orginal and added data to table2 
table2 = append_column(table, group, "hot", tb.BoolCol(dflt=False))
# Fill the new column
table2.cols.hot[:] = [row["temperature"] > 11**2 for row in table ]
# Move table2 to table, you can use the same name as original one.
table2.move('/newgroup','new_table')

# Print the new table
print ("\nContents of the table with column added:\n",
       fileh.root.newgroup.new_table[:])
# Finally, close the file
fileh.close() 
```

# c++ - 为什么 Visual Studio 会生成这些附加文件？

> ID：15797165
> 
> 赞同：8
> 
> 时间：2013-04-03T20:13:48.690
> 
> 标签：c++, visual-studio, build, compilation

在 Visual Studio 放置编译后的可执行文件的输出目录中，还有三个附加文件，类型为`*.exp`、`*.lib`、`.pdb`。我不需要这些文件，我想阻止编译器创建它们。

这就是我的构建输出目录的样子。我只需要`*.exe`文件。

![带有不需要的附加文件的输出目录](https://i.stack.imgur.com/Gob71.png)

这些附加文件有什么用？如何禁用它们的生成？如果构建过程需要它们，有没有办法在创建可执行文件后自动删除它们？

我正在使用 Visual Studio 2012。如果您需要更多详细信息，请发表评论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:37:42.497

EXP 和 LIB 文件[但我不希望 .lib 或 .exp 文件用于我的 COM 库！](https://stackoverflow.com/questions/1431712/but-i-dont-want-that-lib-or-exp-file-for-my-com-library). 您可能可以在“中间输出”设置中设置这些文件的位置，而不是将它们放在您的发布文件夹中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T10:51:16.110

里面有一些函数声明为 __declspec(dllexport)。这意味着它们被导出并且链接器认为需要与这个动态库链接（无论是exe还是dll - 通常结构都是相同的）并创建*.lib和*.exp文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-10T21:26:58.410

我假设您希望在最终发布目录中仅包含 dll 和 exe 文件，并且在中间目录中保留 *.exp、*.lib、.pdb 文件，以免弄乱您正在工作的目录。

打开属性（在解决方案资源管理器中右键单击项目）：更改设置如图： [![在此处输入图像描述](https://i.stack.imgur.com/L0GoB.png)](https://i.stack.imgur.com/L0GoB.png) [![在此处输入图像描述](https://i.stack.imgur.com/0lfhy.png)](https://i.stack.imgur.com/0lfhy.png)

# javascript - 屏幕尺寸缩小时如何替换菜单？

> ID：15797168
> 
> 赞同：-5
> 
> 时间：2013-04-03T20:14:04.973
> 
> 标签：javascript, jquery, html, css

我有一个水平菜单。

当屏幕宽度低于某个点时，我想用下拉菜单替换此菜单。

我不是在谈论响应式菜单，即自动调整自身的菜单。

大多数响应式教程都是关于响应式菜单的。我想创建类似的效果，但我想用下拉列表完全替换水平菜单。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:18:20.063

你对术语感到困惑。您要求的**是**响应式设计，即一旦窗口缩小到一定宽度以下，就做一些不同的事情。

让页面上的两个元素（默认隐藏一个），并使用响应式 CSS 根据浏览器宽度隐藏/显示您想要的元素。例如：

```
.menuDrop{ display:hidden; }
.menuHoriz{ display:block; }

@media (max-width: 500px) {
  .menuDrop{ display:block; }
  .menuHoriz{ display:hidden; }
} 
```

Stacy，为了您自己的澄清，我相信您所说的您不想要的是仅流体设计，即菜单只是随浏览器窗口缩小。菜单是否流动与是否响应不同是不同的。@jainchetan 的“MeanMenu”示例既流畅（它最初随着窗口缩小）和响应式（在某个点，设计以逐步方式发生变化），使用 Javascript 而不是 CSS 呈现。

# mysql - 在mysql中选择一个不存在的列

> ID：15797171
> 
> 赞同：6
> 
> 时间：2013-04-03T20:14:09.910
> 
> 标签：mysql

是否可以说例如我想选择一个在 mysql 表中不存在的列，我只希望该列具有从“somevalue（可能为 100）”开始的增量值。我想要这样的东西：

```
my dummy column | other existing columns | blah
100
101
102 
```

这在mysql中可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T20:16:07.943

是的，您可以使用`as`关键字命名列。例如：

```
SELECT 1 as 'hello' 
```

您可以简单地添加 RowNumber 列，如下例所示：

```
SELECT t.*, 
    @rownum := @rownum + 1 as RowNumber
FROM your_table t, 
     (SELECT @rownum := 0) r 
```

> 对于从 开始`149`，您只需要替换`(SELECT @rownum := 0)`为`(SELECT @rownum := 149)`

> 对于具有某种类型的虚拟列，使用`Cast`或`Convert`函数如下：`CAST(@rownum := @rownum + 1 AS CHAR) AS RowNumber`. 您可以在此处找到更多相关信息：http: [//dev.mysql.com/doc/refman/5.0/en/cast-functions.html](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html)

与评论相关的更多示例：

```
SELECT
    COUNT(col1) AS col2
FROM your_table
GROUP BY col2
HAVING col2 = 2; 
```

评论中的@nodsdorf 示例：

```
SELECT
    (1+1) AS dummy,
    other_column
FROM table 
```

# unity3d - 在 MonoDevelop Unity 中打开的文件之间切换

> ID：15797173
> 
> 赞同：1
> 
> 时间：2013-04-03T20:14:11.010
> 
> 标签：unity3d, monodevelop

如何在从 Unity 打开的 MonoDevelop 中打开的文件之间切换。ALT-TAB 不起作用。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:16:26.340

`ctrl`+`tab`应该可以解决问题

对于Mac ：`Option`++和`Command`++`LeftArrow``Option``Command``RightArrow`

不知道它是否已经修复，但是这个键绑定之前有问题（在 windows 上的 2.4 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-23T22:56:23.723

从 MonoDevelop 4.0 开始，`ctrl`+`tab`可以在 Windows 和 Mac 环境中工作。

# android - MainActivity.java 无法识别 activity_main.xml

> ID：15797174
> 
> 赞同：1
> 
> 时间：2013-04-03T20:14:12.770
> 
> 标签：android, xml, main-activity

我制作了一个完美运行的计算器程序，用于练习 android。我不喜欢我开始的相对布局，并决定尝试网格布局。现在我`MainActivity.java` 没有看到`activity_main.xml`文件。我检查了`R.java`文件并查看了 的列表`activity_main.xml`，其中列出了所有按钮。`activity_main.xml`解析就好了。我试过重建程序无济于事。任何想法都会有所帮助！这是`activity_main.xml file`

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.widget.GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:alignmentMode="alignBounds"
    android:columnCount="8"
    android:columnOrderPreserved="false"
    android:useDefaultMargins="true" >

    <EditText
        android:id="@+id/total"
        android:layout_column="0"
        android:layout_columnSpan="6"
        android:layout_gravity="left"
        android:layout_row="0"
        android:clickable="false"
        android:ems="10"
        android:inputType="none|number"
        android:textAlignment="textEnd"
        android:width="500dp" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/Button8"
        android:layout_column="1"
        android:layout_row="1"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="8" />

    <Button
        android:id="@+id/Button9"
        android:layout_column="2"
        android:layout_row="1"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="9" />

    <Button
        android:id="@+id/Button4"
        android:layout_column="0"
        android:layout_row="2"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="4" />

    <Button
        android:id="@+id/Button5"
        android:layout_column="1"
        android:layout_row="2"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="5" />

    <Button
        android:id="@+id/Button6"
        android:layout_column="2"
        android:layout_row="2"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="6" />

    <Button
        android:id="@+id/ButtonMultiply"
        android:layout_column="3"
        android:layout_row="2"
        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Multiply"
        android:text="*"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/Button1"
        android:layout_column="0"
        android:layout_row="3"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="1" />

    <Button
        android:id="@+id/Button2"
        android:layout_column="1"
        android:layout_row="3"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="2" />

    <Button
        android:id="@+id/Button3"
        android:layout_column="2"
        android:layout_row="3"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="3" />

    <Button
        android:id="@+id/ButtonMinus"
        android:layout_column="3"
        android:layout_row="3"

        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Subtract"
        android:text="-"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/ButtonDivide"
        android:layout_column="3"
        android:layout_gravity="right"
        android:layout_row="1"
        android:layout_rowSpan="2"
        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Divide"
        android:text="/"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/button0"
        android:layout_column="0"
        android:layout_columnSpan="2"
        android:layout_row="4"
        android:background="@drawable/button_light_grey"
        android:minHeight="20dp"
        android:minWidth="82dp"
        android:onClick="numberButtonEventHandler"
        android:text="0" />

    <Button
        android:id="@+id/buttonPoint"
        android:layout_column="2"
        android:layout_row="4"
        android:background="@drawable/button_light_grey"
        android:minHeight="20dip"
        android:minWidth="40dp"
        android:onClick="numberButtonEventHandler"
        android:text="."
        android:width="20dip" />

    <Button
        android:id="@+id/ButtonPlus"
        android:layout_column="3"
        android:layout_row="4"
        android:background="@drawable/custom_button"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="Add"
        android:text="+"
        android:textColor="@color/light_grey" />

    <Button
        android:id="@+id/ButtonEqueals"
        android:layout_column="4"
        android:layout_row="3"
        android:layout_rowSpan="2"
        android:background="@drawable/custom_button"
        android:height="40dp"
        android:minHeight="82dp"
        android:minWidth="20dp"
        android:onClick="Equeals"
        android:text="="
        android:textColor="@color/light_grey"
        android:width="40dp" />

    <Button
        android:id="@+id/Button7"
        android:layout_column="0"
        android:layout_row="1"
        android:background="@drawable/button_light_grey"
        android:minHeight="40dip"
        android:minWidth="40dip"
        android:onClick="numberButtonEventHandler"
        android:text="7" />

</android.support.v4.widget.GridLayout> 
```

这是`MainActivity.java`文件

```
package com.example.calculator;

import android.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity{
    private String textTotal = "";
    Total total = new Total();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); <---here I get my first error
                                                    eclipse help suggests changing
        //setButtonListeners();                     to activity_list_item. This   
    }                                                   doesn't help

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void numberButtonEventHandler(View v) {

        textTotal += ((Button) v).getText();
        TextView total = (TextView)findViewById(R.id.total);
        total.setText(textTotal);

    }

    public void Add(View v){

        try {
            total.doMath(Double.parseDouble(textTotal));
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        total.setOperater("+");
        TextView TextViewtotal = (TextView)findViewById(R.id.total);
        TextViewtotal.setText(Double.toString(total.getTotalValue()));
        textTotal = "";

    }

    public void Subtract(View v){
        try {
            total.doMath(Double.parseDouble(textTotal));
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        total.setOperater("-");
        TextView TextViewtotal = (TextView)findViewById(R.id.total);
        TextViewtotal.setText(Double.toString(total.getTotalValue()));
        textTotal = "";
    }

    public void Multiply(View v){
        try {
            total.doMath(Double.parseDouble(textTotal));
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        total.setOperater("*");
        TextView TextViewtotal = (TextView)findViewById(R.id.total);
        TextViewtotal.setText(Double.toString(total.getTotalValue()));
        textTotal = "";
    }

    public void Divide(View v){
        try {
            total.doMath(Double.parseDouble(textTotal));
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        total.setOperater("/");
        TextView TextViewtotal = (TextView)findViewById(R.id.total);
        TextViewtotal.setText(Double.toString(total.getTotalValue()));
        textTotal = "";
    }

    public void Equeals(View v){

        try {
            total.doMath(Double.parseDouble(textTotal));
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        total.setOperater("");
        TextView TextViewtotal = (TextView)findViewById(R.id.total);
        TextViewtotal.setText(Double.toString(total.getTotalValue()));
        textTotal = "";
    }

} 
```

现在控制台输出：

```
[2013-04-03 22:19:26 - Calculator] Could not find Calculator.apk!
[2013-04-03 22:19:53 - Calculator] ------------------------------
[2013-04-03 22:19:53 - Calculator] Android Launch!
[2013-04-03 22:19:53 - Calculator] adb is running normally.
[2013-04-03 22:19:53 - Calculator] Could not find Calculator.apk!
[2013-04-03 22:20:58 - Calculator] ------------------------------
[2013-04-03 22:20:58 - Calculator] Android Launch!
[2013-04-03 22:20:58 - Calculator] adb is running normally.
[2013-04-03 22:20:58 - Calculator] Could not find Calculator.apk!
[2013-04-03 22:24:29 - Calculator] ------------------------------
[2013-04-03 22:24:29 - Calculator] Android Launch!
[2013-04-03 22:24:29 - Calculator] adb is running normally.
[2013-04-03 22:24:29 - Calculator] Could not find Calculator.apk! 
```

下一个 logcat 输出：

```
04-03 22:46:16.121: E/AndroidRuntime(17973): FATAL EXCEPTION: main
04-03 22:46:16.121: E/AndroidRuntime(17973): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.calculator/com.example.calculator.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class android.support.v4.widget.GridLayout
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.os.Looper.loop(Looper.java:123)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at java.lang.reflect.Method.invokeNative(Native Method)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at java.lang.reflect.Method.invoke(Method.java:521)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at dalvik.system.NativeStart.main(Native Method)
04-03 22:46:16.121: E/AndroidRuntime(17973): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class android.support.v4.widget.GridLayout
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:200)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.Activity.setContentView(Activity.java:1647)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at com.example.calculator.MainActivity.onCreate(MainActivity.java:17)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-03 22:46:16.121: E/AndroidRuntime(17973):    ... 11 more
04-03 22:46:16.121: E/AndroidRuntime(17973): Caused by: java.lang.ClassNotFoundException: android.support.v4.widget.GridLayout in loader dalvik.system.PathClassLoader[/data/app/com.example.calculator-1.apk]
04-03 22:46:16.121: E/AndroidRuntime(17973):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.view.LayoutInflater.createView(LayoutInflater.java:466)
04-03 22:46:16.121: E/AndroidRuntime(17973):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
04-03 22:46:16.121: E/AndroidRuntime(17973):    ... 19 more 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T20:15:49.650

`android.R`从文件中的导入中删除`MainActivity.java`。

# photoshop - 移除小于指定透明度的像素

> ID：15797175
> 
> 赞同：0
> 
> 时间：2013-04-03T20:14:13.797
> 
> 标签：photoshop

我有一个透明图像，我想为网络制作纹理。我想把它放在一个彩色的 DIV 上，可以改变它以实现不同颜色的相同纹理。

我遇到的问题是透明纹理放在有色表面上时会变暗。我可以修改纹理的透明度，但这会使纹理变成灰色。

我的问题“有没有办法在指定的透明度下去除像素？”

例如，我可以删除不透明度为 20% 或更低的所有像素吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:20:41.933

我个人建议在 Photoshop 中删除这些像素。您始终可以编写简单的脚本，该脚本将读取像素，并将所有小于 x 的 alpha 更改为 0。

[读取 bmp 文件中的像素值](https://stackoverflow.com/questions/9296059/read-pixel-value-in-bmp-file)

（您需要从 24 位更改为 32 位，因为 RGBA 是 32 位）

# git - 从原点拉出时“git pull”命令之间的区别？

> ID：15797183
> 
> 赞同：84
> 
> 时间：2013-04-03T20:14:43.420
> 
> 标签：git

这些命令之间有什么区别？：

```
# 1
git pull
# 2
git pull origin
# 3
git pull origin master
# 4
git pull origin/master
# 5
git pull origin HEAD:master 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-04-03T22:43:06.627

`git pull`是一个方便的命令，它同时做不同的事情。基本上，它只是`git fetch`连接到远程存储库并获取新提交和`git merge`（或`git rebase`）将新提交合并到本地分支的组合。由于涉及的两个不同命令的含义`git pull`并不总是很明显。

您可以为本地分支配置上游。全新克隆后，您将拥有一个本地分支“master”、一个远程“origin”，并且您的 master 分支将“origin/master”作为上游。我假设下面的设置。`git branch -vv`（您可以使用.git/config 或通过查看 .git/config来查看您的上游配置。）

现在为您的问题：

1.  `git pull`= `git fetch origin`+ `git merge origin/master`（或者你的上游是什么）
2.  `git pull origin`= `git pull`（只要 origin 是您的上游远程）
3.  `git pull origin master`= `git fetch origin master`+`git merge FETCH_HEAD`
4.  `git pull origin/master`：除非您有一个名为“origin/master”的遥控器，否则无效
5.  `git pull origin HEAD:master`：尝试直接将您的本地主机重置为 HEAD 指向原点的任何内容。（不要这样做。）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-05-31T06:07:53.837

A`pull`基本上是一个`fetch`（它将一些提交和相关对象从远程存储库获取到您的存储库中），然后是一个将这些“应用”到您的工作副本中的操作。默认情况下，第二阶段使用 a 完成，`merge`但您可以将`pull.rebase`变量设置为`true`，然后它将改为变基。

该命令会弹出两个问题`pull`。首先是，究竟获取了什么？第二个是，它如何将这些更改应用于我的工作副本？让我们从第一个开始。该命令的完整形式是

```
git pull [options] [repository] [<refspec>...] 
```

是控制行为的`options`标志（例如 --rebase 使`pull`作为`fetch`+工作，`rebase`即使`pull.rebase`is `false`）。

`repository`是要从中获取的远程的名称（或 URL）。

`refspecs`是一种简洁的方法，可以指定要获取远程上的哪些引用以及要将它们放在当前工作副本中的哪个位置。

让我们首先采用最明确的形式。

```
 git pull origin branch1:branch2 
```

这基本上是说，拉取`branch1`远程调用的引用中的更改`origin`，然后将它们合并（或变基）到本地分支`branch2`。例如，如果我说`git pull origin master:dev`，我将获得一个名为的本地分支`dev`，它将指向与`master`. 如何指定 refspecs 的详细信息在[这里](http://git-scm.com/book/en/Git-Internals-The-Refspec)。您可以使用 a`*`来指示多个 refspec。例如，`git pull origin refs/heads/*:refs/heads/*`将所有分支（存储在 下`heads`）拉入本地存储库，并将它们合并到具有相同名称的本地分支中。

现在，让我们一个一个去掉参数来讨论默认是如何工作的。首先，我们可以从 refspec 中删除目标，然后简单地说`git pull origin branch1`. 这将首先`fetch`远程分支`branch1`到您的本地存储库。它将作为名为 的临时参考提供`FETCH_HEAD`。之后，它将运行`git merge FETCH_HEAD`并将此分支合并到您当前的活动分支（即`HEAD`）。这通常在您位于本地分支并希望从远程获取更改到该分支时完成。

现在，让我们`branch1`完全放弃，只说`git pull origin`. 现在，git 知道从 ( ) 到哪里获取，`origin`但不知道要获取什么。它对此有一些默认值。大多数情况是当您的配置文件有一个选项时（这是在类似的部分`branch.<name>.merge`中调用的条目）。如果是这样，它将使用那里的 refspecs 进行操作。`merge``[branch "master"]`

如果我们`origin`完全放弃并简单地说`git pull`，它将检查配置以查看是否有`branch.<name>.remote`指定从哪个远程提取。连同上面的内容告诉你要拉什么。

您的第 4 点和第 5 点不是正常用例。`origin/master`如果您有一个不太可能的远程调用，则第一个是有意义的。`origin/master`通常*是*`master`跟踪远程分支的本地引用`origin`。第二个将尝试`HEAD`在远程（通常是默认分支`master`）上获取更改，然后将它们合并到本地`master`。虽然这可能是您想要定期执行的操作，但该命令非常不合常规，并且不是我经常看到的。

我跳过了一些细节，但这些应该足以让您在日常工作中保持安全和舒适。有关所有血腥细节，您可以查看`git pull`.

# amazon-web-services - AWS CloudSearch：1 个域中的不同文档？

> ID：15797190
> 
> 赞同：10
> 
> 时间：2013-04-03T20:15:21.200
> 
> 标签：amazon-web-services, amazon-cloudsearch

我有兴趣将 AWS Cloud Search 用于我的 Web 应用程序。我有 3 种不同的文档类型要使其可搜索（用户 - 文章 - 图像）。

使用 Cloud Search 执行此操作的最佳方法是什么？我是否需要创建 3 个不同的 AWS 搜索域？这是否意味着我需要为至少 3 个搜索实例付费？

或者我可以将它们全部放在 1 个域/实例中并使用索引或类型之类的东西（使用弹性搜索术语）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:58:34.997

你可以试试这个：

1.  添加文本类型的“searchable_text”索引，启用分面的文字类型的“类别”索引。
2.  上传所有类型的文档，全文搜索字段为“searchable_text”，类别为“用户”、“文章”或“图像”之一。
3.  查询基于`category`返回每种类型的结果。

如果您的搜索查询将包含许多索引字段，那么如果您尝试为不同的文档类型维护一个域，那么您最终可能会在许多索引字段中拥有大量空值。空值对索引不利，如果最终出现在它们自己的域中，最好将文档类型分开。

# ffmpeg - 使用带有 .wav 文件的 pocketsphinx_continuous

> ID：15797191
> 
> 赞同：2
> 
> 时间：2013-04-03T20:15:23.413
> 
> 标签：ffmpeg, cmusphinx, sox

我正在尝试编写一个应用程序，该应用程序将允许用户从远程系统说出一小组命令并让它们在我的服务器上执行。使用 pocketsphinx 解析语音文本。当使用麦克风在本地运行时，pocketsphinx_continuous 可以完美地工作，无论我如何含糊其辞。但是在导入音频文件并使用 ffmpeg 将音频下采样到单声道、16 位 PCM 文件时，它会毫无困难地解析第一个单词。然后它将跳过其他所有内容并将其视为 . 我相信问题出在文件格式而不是pocketsphinx配置中。

`ffmpeg -y -i Sound\AddSheet.wav -ac 1 -f s16le -acodec pcm_s16le -ar 16k AddTmp.wav`
在批处理文件中使用命令行 。

我得到的输出的底部是：

```
INFO: fsg_search.c(1407): Start node ADD.0:5:47
INFO: fsg_search.c(1407): Start node <sil>.0:2:49
INFO: fsg_search.c(1446): End node <sil>.126:128:305 (-486)
INFO: fsg_search.c(1662): lattice start node <s>.0 end node <sil>.126
INFO: ps_lattice.c(1352): Normalizer P(O) = alpha(<sil>:126:305) = -175371
INFO: ps_lattice.c(1390): Joint P(O,S) = -176076 P(S|O) = -705
000000000: ADD USER 
```

这不是文件中的音频。文件中所说的单词是“ADD SPREADSHEET”，它可以在同一个麦克风上完美运行，而无需插入 .wav 文件。

我尝试使用 sox 增加音量并降低背景噪音：

```
sox -v 3.0 Sound\%1 Sound\%1-loud.wav ffmpeg -i Sound\%1-loud.wav -vn -ss 00:00:00 -t 00:00:01 -y Sound\%1-noiseaud.wav 
sox Sound\%1-noiseaud.wav -n noiseprof Sound\%1-noise.prof 
sox Sound\%1 Sound\%1-clean.wav noisered sound\noise.prof 0.21 
ffmpeg -y -i Sound\%1-clean.wav -ac 1 -f s16le -acodec pcm_s16le -ar 16k AddTmp.wav 
```

对最终结果没有明显影响。

如果您查看输出，您会注意到 fsg_search.c 已找到 ADD 作为起始节点，然后对其余节点保持沉默。请帮助解决这个问题。

# powershell - PowerShell 获取网络机器列表

> ID：15797198
> 
> 赞同：18
> 
> 时间：2013-04-03T20:15:37.507
> 
> 标签：powershell

我想编写一个 PS 脚本，它将遍历它可以在本地网络上找到的所有机器，查看“SomeDirectory”，如果存在文件，则用新版本的 UNC 路径覆盖它。

第一个问题是获取可以在 Windows -> 网络中找到的 PC 列表 ![在此处输入图像描述](https://i.stack.imgur.com/jLHN8.jpg)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-03T20:29:50.400

有时，老派的方式是最简单的。

```
net view 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T07:21:24.840

这是您可以做的另一件事（取决于您的工作组名称）。

```
([adsi]"WinNT://WORKGROUP").Children 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-19T16:54:00.130

捎带谢伊的回答：

```
([adsi]"WinNT://$((Get-WMIObject Win32_ComputerSystem).Domain)").Children 
```

这将获取您的域或工作组名称并为您使用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-12-14T00:15:13.717

并进一步搭载 FoxDeploy 的回答：

```
(([adsi]"WinNT://$((Get-WMIObject Win32_ComputerSystem).Domain)").Children).Where({$_.schemaclassname -eq 'computer'}) 
```

这将只抓取域中的计算机，而不是所有 AD 对象（例如用户、组织组等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-02T13:09:06.663

ADSI 不能在域外工作。如果您只有工作组，则需要使用 NETBIOS 获取已注册机器的列表。“nbtstat”的输出只是字符串，而不是对象。操作不是那么容易，但您会收到注册机器的数量和网络名称。

```
nbtstat -r 
```

# msbuild - 如何通过 MSBuild 参数调用 MSBuild.ExtensionPack？

> ID：15797202
> 
> 赞同：1
> 
> 时间：2013-04-03T20:15:49.737
> 
> 标签：msbuild, windows-services, msbuildextensionpack

您好我正在使用 MSBuild Extension Pack 将 Windows 服务安装到远程计算机。我正在通过命令提示符对此进行测试，并成功安装了该服务。我现在想使用 MSBuild 参数调用此扩展包。

我的代码如下所示：

```
<Project ToolsVersion="4.0" DefaultTargets="Default" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

<PropertyGroup>
   <RemoteMachine>DevRemote</RemoteMachine>
   <RemoteUser>RemoteDomain\RemoteUser</RemoteUser>
   <RemoteUserPassword>RemotePassword</RemoteUserPassword>
</PropertyGroup>

<Import Project="$(MSBuildExtensionsPath)\ExtensionPack\4.0\MSBuild.ExtensionPack.tasks"/>

<Target Name="Default">
<MSBuild.ExtensionPack.Computer.WindowsService TaskAction="Install" ServiceName="Backup Management" ServicePath="c:\WINDOWS\system32\taskmgr.exe" RemoteUser="$(RemoteUser)" RemoteUserPassword="$(RemoteUserPassword)" MachineName="$(RemoteMachine)" />
</Target> 
```

我怎样才能做到这一点？根据我的猜测，构建参数看起来像这样：

```
/p:DeployOnBuild=True /p:DeployWinService=true;TargetWinServiceHost=DevRemote 
```

但我不确定这些论点。任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:30:31.417

我通常有两个文件，一个带有属性，另一个带有目标。我还尝试将所有需要的属性存储在一个文件中，因此无需从命令行传递任何内容。

如果你用目标调用文件，`main.msbuild`你可以这样调用它

```
msbuild main.msbuild /t:Default 
```

其中`/t`switch 对应于目标名称，这是您可以指定执行哪个目标的方式，因此不需要任何参数`/p`。

从[示例](http://www.msbuildextensionpack.com/help/4.0.5.0/html/258a18b7-2cf7-330b-e6fe-8bc45db381b9.htm)中可以看出，默认目标可能是这样的

```
<Target Name="Default">
    <!-- Install a service on a Remote Machine -->
    <MSBuild.ExtensionPack.Computer.WindowsService 
        TaskAction="Install" 
        ServiceName="__TestService1" 
        User="$(User)" 
        Password="$(password)" 
        ServicePath="c:\WINDOWS\system32\taskmgr.exe" 
        RemoteUser="$(RemoteUser)" 
        RemoteUserPassword="$(RemoteUserPassword)" 
        MachineName="$(RemoteMachine)" />
</Target> 
```

# ruby - 如何在 Ruby 中为 splat 参数设置默认值

> ID：15797206
> 
> 赞同：13
> 
> 时间：2013-04-03T20:16:22.540
> 
> 标签：ruby, splat

为 splat 参数设置默认值会导致错误：

```
1.9.3-p374 :001 > def a b, *c = nil
1.9.3-p374 :002?>   end
SyntaxError: (irb):1: syntax error, unexpected '=', expecting ';' or '\n'
def a b, *c = nil
             ^
    from /Users/me/.rvm/rubies/ruby-1.9.3-p374/bin/irb:16:in `<main>' 
```

我尝试过的一些变体也不起作用：

```
1.9.3-p374 :003 > def a b, *c = []
1.9.3-p374 :005 > def a b, (*c) = nil
1.9.3-p374 :007 > def a b, (*c = [])
1.9.3-p374 :009 > def a b, (*c = [1,2,3])
1.9.3-p374 :011 > def a b, *c = [1,2,3] 
```

我在这里没有看到不确定性问题，所以看起来应该是可能的。

相关： [为什么非显式 splat 参数加上默认参数是 Ruby 1.9 中方法定义的错误语法？](https://stackoverflow.com/questions/9154673/why-non-explicit-splat-param-plus-default-param-is-wrong-syntax-for-method-defin)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T20:26:20.730

您尝试的用法违反了 splat 用法的约定。Splats 应该（至少在 Ruby 中）占用所有*额外的*（0、1 或更多）值。

如果您知道希望方法参数列表中的第二个值具有默认值，则可以将其从 splat 中取出并在 splat 之前列出，并使用如下默认值：

```
def a b, c=nil, *d 
  # rest of code omitted
end 
```

**编辑：** 为了回答你为什么它不能完全清楚地工作的问题。这是语言设计者的设计决定。Matz 从未打算让 splat 运算符使用默认值。这对我来说似乎很明智，因为它旨在用于捕获不确定数量的变量，并且因为我描述的方法比您描述的可能性更清楚，并且因为您的示例解决的所有问题都可以通过其他方式解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T20:28:45.540

您可以在方法本身中设置默认值，因为默认 splat 返回一个空数组。

```
def test(a, *b)
  b = "default b" if b == [] # edited as per Tin Man's recommendation
  puts [a, b].inspect
end

test("Test", 1, 2)
# => ["Test", [1, 2]]
test("Test")
# => ["Test", "default b"] 
```

在 Rails 中，您可以检查`b.present?`一个空数组是否被视为空白。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:23:48.437

splat 参数默认为空数组，您无需执行任何特殊操作。

```
def a(b, *c)
  c
end

a("foo")
#=> [] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-09T17:13:40.860

这非常方便：

```
def initialize(*response_names)
  @response_names = response_names.presence || %w(default values)
end 
```

# c++ - 无效使用非静态数据成员（数组）

> ID：15797212
> 
> 赞同：2
> 
> 时间：2013-04-03T20:16:37.337
> 
> 标签：c++, arrays, overloading, member, subscript-operator

我对 C++ 很陌生，所以这可能是一个非常愚蠢的问题，但我很难找到解决方案。我四处寻找答案，TA似乎有逻辑上等效但神秘地工作的代码，我们不知道为什么。

我试图在我的头文件中声明一个数组（名为'array），我不断收到一些奇怪的错误。当我将其公开声明为“int* array;”时 或“int array[];”，构造函数告诉我这是对非静态数据成员的无效使用。当我将它声明为私有时，它抱怨数组的元素是私有的。

该赋值处理运算符重载，并处理具有奇数索引的数组，例如从 -3 到 5。下面是一些与问题相关的代码：

```
// from the .cpp file
//constructor
IntArray::IntArray(int USER_DEFINED)
{
    if (USER_DEFINED < 1)
    {
        //return some kind of error
    }
    string name;
    setName();
    int lower = 0;
    int higher = USER_DEFINED - 1;
    array = new int[higher - lower];
    //int* p = &array[abs(lower)];
}

//overload
int IntArray::operator[](int i)
{
    if (i < lower || i > higher)
    {
        //return some sort of error
    }
    else
        return array[i - lower];
}

//from the .h file
class IntArray { 
     public: 
          int* array;
          int  operator[](int i);
};

//from the driver
void test1() {
    cout << "1\. Array declared with single integer: IntArray a(10);" << endl << endl;
    csis << "1\. Array declared with single integer: IntArray a(10);" << endl << endl;
    IntArray a(10);
    for(int i = a.low(); i <= a.high(); i++)
        a[i] = i * 10;
    a.setName("a");
    cout << a << endl;
    csis << a << endl;
    wait();
}` 
```

a[i] = i * 10; 是编译器抱怨的地方。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:22:03.293

你`operator[]`返回一个`int`，它作为一个未命名的临时返回给调用者；一个“右值”。（历史上如此称呼是因为它是允许在赋值语句的右半部分发生的一组操作）

像`a[i] = i * 10;`这样的声明没有意义，因为您将修改`a[i]`. 如果您希望某人能够修改`int`指向 的内存中的`IntArray::array`，则改为返回引用。

# vb.net - 制作此 silverlight 弹出模式？

> ID：15797216
> 
> 赞同：0
> 
> 时间：2013-04-03T20:16:58.170
> 
> 标签：vb.net, silverlight

我有一个 silverlight 应用程序，它使用以下方法弹出一个新窗口：

```
System.Windows.Browser.HtmlPage.Window.Navigate(New Uri(page_url, "_blank", "toolbar=no,location=no,status=no,menubar=no,resizable=yes") 
```

但我希望这是模态的（调用 silverlight 等待它完成）。我在 Silverlight 中发现了一些关于模态弹出窗口的提及，但没有任何东西可以帮助我解决这个问题。是否有捷径可寻？

# javascript - 使用 Flot 为网格设置备用列颜色

> ID：15797225
> 
> 赞同：0
> 
> 时间：2013-04-03T20:17:22.667
> 
> 标签：javascript, jquery, graph, flot

因此，如果您前往[http://www.flotcharts.org/](http://www.flotcharts.org/)并查看页面顶部演示中的网格，您会看到每一列都有一个备用颜色，很像表格中的备用行颜色.

我已经搜索了所有内容，查看了该站点的代码，但对于我的生活，我无法弄清楚这是如何完成的。它似乎与标记功能有关，但唉，我没有成功。任何人都能够得到这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:09:35.800

使用标记，如 API 文档的[自定义网格](https://github.com/flot/flot/blob/master/API.md#customizing-the-grid)部分所述。[您可以通过查看源代码](http://www.flotcharts.org/javascript/flot.demo.js)来了解它是如何在该演示中完成的，该源代码（故意）未缩小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T20:35:56.770

您可以使用带有适当 HTML 和 CSS 的 jQuery“奇数”，如下所示：

```
$(function () {
    $(".col:odd").children().css('background', 'white');
}); 
```

这是jsfiddle：http: [//jsfiddle.net/ZjuHA/](http://jsfiddle.net/ZjuHA/)

# c# - 更改 DataGridRowHeaderStyle（背景）？

> ID：15797226
> 
> 赞同：1
> 
> 时间：2013-04-03T20:17:27.330
> 
> 标签：c#, wpf, datagrid, background, styles

我想在 WPF 中更改 DataGrid 的 RowHeader 的背景。我将样式设置为静态资源，并希望在 C# 中添加样式。下面是 XAML/C# 中的代码。

XAML：

```
<Window x:Class="GUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Style x:Name="newRowHeader" TargetType="{x:Type DataGridRowHeader}">
        <Setter Property="Background" Value="White" />
    </Style>
</Window.Resources>
<Grid Name="MainGrid">
</Grid> 
```

C＃：

```
System.Windows.Controls.DataGrid dg = new System.Windows.Controls.DataGrid();
dg.RowHeaderStyle = (Style)FindResource("newRowHeader"); 
```

错误发生在 C# dg.RowHeaderStyle....的最后一行。错误：'对与指定绑定约束匹配的'GUI.MainWindow'类型的构造函数的调用引发了异常。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:56:12.723

解决了。应该使用 Resources["x:Key"]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:27:21.170

你在哪里运行这段代码？它在构造函数内部吗？如果是，则在加载窗口时尝试执行此操作：

```
public MainWindow(){
    //...
    Loaded+=(_,e)=>{
         System.Windows.Controls.DataGrid dg = new System.Windows.Controls.DataGrid();
         dg.RowHeaderStyle = (Style)FindResource("newRowHeader");
    };
} 
```

也许是窗口尚未加载。希望能帮助到你...

# android - 谷歌端点方法不断返回“名称不能为空”异常

> ID：15797228
> 
> 赞同：6
> 
> 时间：2013-04-03T20:17:30.340
> 
> 标签：android, google-app-engine, google-cloud-endpoints, google-eclipse-plugin

端点方法如下所示：

```
@Api(
    name = "gameape",
    version = "v1",
    description = "Game App API",
    audiences = { "mynumber.apps.googleusercontent.com" },
    clientIds = { "mynumber.apps.googleusercontent.com", Constant.API_EXPLORER_CLIENT_ID },
    defaultVersion = AnnotationBoolean.TRUE)
public class GameApp {

    private final AccountDao accountDao = new AccountDaoImpl();

    @ApiMethod(name = "LoginUser", path = "LoginUser", httpMethod = HttpMethod.POST)
    public void LoginUser(LoginData request) {
        long phone = request.getPhone();
        String deviceId = request.getDeviceId();
        String gcmToken = request.getGcmToken();
        Account acc = new Account(phone, deviceId, gcmToken);
        accountDao.put(acc);
        ApiHelper.sendGCM(phone, "welcome to my game app");
    }
} 
```

来自 android 的代码片段如下所示：

```
@Override
protected Boolean doInBackground(Void... params) {
    LoginData request = new LoginData();
    request.setUsername(username);
    request.setPassword(password);

   try {
     RegisterUser reg = service.registerUser(request);
     reg.execute();
     return true;
   } catch (Exception e) {
     Log.e(LoginActivity.class.getName(),
        "Exception received from server at "
         + service.getRootUrl(), e);
   }
   return false;
} 
```

调用`reg.execute()`不断抛出异常：

```
java.lang.IllegalArgumentException: the name must not be empty: null 
```

从服务器控制台看，它甚至不像服务器被击中。即使我尝试在调试模式下运行服务器，我的断点（方法内的第一行）也没有到达。

编辑：添加堆栈跟踪：

```
04-03 13:38:42.688: I/com.me.gameapp.LoginActivity$UserLoginTask(11255): Enter doInBackground
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255): Exception received from server at https://1.myapp.appspot.com/_ah/api/
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255): java.lang.IllegalArgumentException: the name must not be empty: null
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at android.os.Parcel.readException(Parcel.java:1251)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at android.os.Parcel.readException(Parcel.java:1235)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.android.gms.internal.x$a$a.a(Unknown Source)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential.getToken(GoogleAccountCredential.java:192)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential$RequestHandler.intercept(GoogleAccountCredential.java:217)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:836)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:412)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:345)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:463)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.me.gameapp.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:262)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at com.me.gameapp.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:1)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-03 13:38:42.786: E/com.me.gameapp.LoginActivity(11255):  at java.lang.Thread.run(Thread.java:1096)
04-03 13:38:42.786: I/com.me.gameapp.LoginActivity$UserLoginTask(11255): Leave doInBackground with false 
```

在该行`Exception received from server at https://1.myapp.appspot.com/_ah/api/`中，我在 localhost 上运行所有内容。也许`https://1.myapp.appspot.com/_ah/api/`是错的。不过，我的代码非常接近模板，所以我不确定这是我提交的更改。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-03-17T05:30:02.057

这里引用的**名称**是选定的帐户名称，而不是应用程序名称。

同样在 android **6.0**上，您需要在调用 google 端点之前获得**联系人权限。**否则，即使您使用

```
credential.setSelectedAccountName(accountName); 
```

你仍然会得到上面提到的异常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T15:26:36.003

为自己测试时有类似的错误消息，为我解决的问题是使用

> credential.setSelectedAccountName("user@gmail.com");

跑步前

```
SomeAbstractGoogleJsonClient.Builder builder = new SomeAbstractGoogleJsonClient.Builder(
AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential); 
```

假设类似的代码在您的应用程序中。由于您只发布了调用者线程中的片段，所以很难说。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-01T11:53:02.213

我的解决方案是使用

```
credential.setSelectedAccount(new Account(settings.getString(Constants.PREF_ACCOUNT_NAME, null), "com.example.myapplication")); 
```

所以我用`setSelectedAccount`而不是`setSelectedAccountName`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-22T09:50:28.450

设置 accountname 对我不起作用，我必须按照 marco 所说的那样设置 selectedaccount。为了简化他的回答

```
 credential = GoogleAccountCredential.usingOAuth2(context, scopes);
    credential.setSelectedAccount(new Account("developer@gmail.com", "com.your.pakagename")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T21:27:52.170

也许是一个远景，但也许它抱怨为空的“名称”是应用程序名称？

为了创建服务，我最终得到了这样的代码

```
HttpTransport transport = AndroidHttp.newCompatibleTransport();
JsonFactory jsonFactory = new JacksonFactory();

Nviewendpoint.Builder builder = new Nviewendpoint.Builder( transport, jsonFactory, null );  
builder.setApplicationName( appName ); 
```

请注意，我添加了“setApplicationName”（相对于我找到的示例）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-03T09:11:22.737

在上面添加维卡斯的答案-

> 从 Android 6.0（API 级别 23）开始，用户在应用运行时授予应用权限，而不是在安装应用时。

这实际上取决于您正在寻求的许可类型。对于危险权限和权限组，您需要在运行时请求权限，仅在清单中指定它是不够的。

查看危险的权限和组 - [https://developer.android.com/guide/topics/security/permissions.html#perm-groups](https://developer.android.com/guide/topics/security/permissions.html#perm-groups)

如您所见，联系人就是其中之一-

*   READ_CONTACTS
*   WRITE_CONTACTS
*   GET_ACCOUNTS

要解决此问题，您需要在运行时请求许可。怎么做？- [https://developer.android.com/training/permissions/requesting.html](https://developer.android.com/training/permissions/requesting.html)

# java - 如何正确使用二维数组存储多个字符串的 split() 结果？

> ID：15797235
> 
> 赞同：2
> 
> 时间：2013-04-03T20:17:44.400
> 
> 标签：java, arrays, string, multidimensional-array, split

我正在尝试编写一个遍历多行文本的循环，将每一行 - 每个字符串 - 分成两个元素，结果填充一个二维数组。我目前收到`java.lang.ArrayIndexOutOfBoundsException: 0`以下代码的错误，`split()`在线触发。我想获取`split()`调用的结果并将其与我的程序的其余部分一起使用。此外，如果我没有在第二个数组框中输入一个整数，我会得到一个编译错误 - 那里应该有一个参数。

```
String[][] arr = new String[numLines.size()][];

for(int i = 0 ; i < numLines.size(); i++) {
    arr[i][1].split("--", 2); 
    /* ... */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:20:01.023

数组的定义存在问题：

```
String[][] arr = new String[numLines.size()][]; 
```

数组的第二个维度未初始化。您无法使用`1`当前设置访问索引。在尝试访问之前尝试加载数组的数据。

在定义它之后，您应该使用（我假设）从您获取`numLines`号码的数据持有者（例如，列表、阅读器、文件，您命名它）中的每一“行”（无论它是什么）填充它。

**编辑**

正如 einpoklum 正确发现的那样，数组的实际分配是通过`split()`方法完成的。事实上，您正在访问一个空引用

```
arr[i][1].split("--", 2); //NPE since arr[i] returns null 
```

但人口是在同一次迭代中完成的（我正在接受）：

```
arr[i] = lines.get(i).split("--", 2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T08:53:54.353

您不需要自己分配内部数组`String.split()`，为您执行此操作。您收到异常的原因是您应用了两次方括号，即您希望`arr[i]`是一个非空数组（并且大小至少为 2），以便您可以分配`arr[i][1]`- 但事实并非如此。

问题是，你甚至*不需要*使用`arr[i][whatever]`. 我认为你想要做的是以下几点：

```
ArrayList<String> lines;

/*
 * you add your lines to the 'lines' here somehow.
 */

String[][] arr = new String[lines.size()][];

for(int i = 0; i < lines.size(); i++) {
        arr[i] = lines.get(i).split("--", 2); 
        /* etc. */
} 
```

# c - 我不断收到此错误：传递 `shuffle' 的 arg 1 使指针从整数而不进行强制转换

> ID：15797236
> 
> 赞同：0
> 
> 时间：2013-04-03T20:17:47.480
> 
> 标签：c

所以我正在研究这个套牌程序，现在我已经完成了几乎所有工作，我只需要制作一个洗牌功能。但是当我尝试时，我不断收到标题中的错误

为了简短起见，我只发布函数，但基本上我只需要打印一次牌组（有效）然后在函数中洗牌并返回洗牌的牌组并再次打印（现在洗牌）。

我不明白为什么会出现此错误，因为我只使用一种变量类型。如果我能得到一些帮助，那就太好了。

这是相关代码：

```
int shuffle(int deck[52]); /*Function Prototype*/

int main()
{
     int deck[52], i, n;

     shuffle(deck[52]);  /* Function Call */ 

}

int shuffle(int deck[52])
{
srand(52);

deck[52] = rand();

printf("The deck has been shuffled");

return deck[52];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:23:03.830

`shuffle(deck[52])`获取数组的第 53 个元素`deck`并将其传递给`shuffle`. 试试`shuffle(deck)`吧。

另请注意，C 数组从零开始，因此有效索引为 [0..51]。 `deck[52]`超出数组的末尾；读取或写入它会导致未定义的行为，包括为其他变量覆盖内存或崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:30:21.357

1.  shuffle(deck[52])---> 通过这个你传递了甲板第 53 个元素的地址（你可以从 2:5 看到：注意：预期的 'int *' 但参数的类型是 'int'）

2.  如果你想发送完整的数组，只需将数组名称作为函数参数传递，例如。洗牌（甲板）

    关于他

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:23:16.047

数组在 C 语言中基于零，因此desk[52] 是数组长度之外的一。

# javascript - 如何为不同的照片创建不同的 Facebook 喜欢相同的画廊

> ID：15797237
> 
> 赞同：0
> 
> 时间：2013-04-03T20:17:47.593
> 
> 标签：javascript, html, facebook-like

我的想法是从 href 图像中获取相对路径，并在我单击时放置在脚本中。当我单击或使用箭头更改照片时，总是更改绝对路径。如何创建此变量？问候，费尔南多。

```
<body>
<script>
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        beforeShow: function () {
            if (this.title) {
                // New line
                this.title += '<br />';

                // Add FaceBook like button
                this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.MySite.com.br/**HREF FROM PHOTO**&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=true&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe></iframe>';
            }
        },
        afterShow: function() {
        },
        helpers : {
            title : {
                type: 'inside'
            }
        }  
    });
    </script>
<ul>
  <li><a class="fancybox" href="demo/1_b.jpg" data-fancybox-group="gallery" title="foto01"><img src="demo/1_s.jpg" alt="" /></a></li>
  <li><a class="fancybox" href="demo/2_b.jpg" data-fancybox-group="gallery" title="foto02"><img src="demo/2_s.jpg" alt="" /></a></li>
  <li><a class="fancybox" href="demo/3_b.jpg" data-fancybox-group="gallery" title="foto03"><img src="demo/3_s.jpg" alt="" /></a></li>
  <li><a class="fancybox" href="demo/4_b.jpg" data-fancybox-group="gallery" title="foto04"><img src="demo/4_s.jpg" alt="" /></a></li>
  <li><a class="fancybox" href="demo/5_b.jpg" data-fancybox-group="gallery" title="foto05"><img src="demo/5_s.jpg" alt="" /></a></li>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:01:34.817

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta property="og:title" content="XXX"/>
<meta property="og:url" content="http://www.bag.com.br/matilha/pracachorro"/>
<meta property="og:image" content="ABSOLUTE_IMAGE_URL"/>
<meta property="og:description" content="teste"/>
<meta property="og:site_name" content="pracachorro"/>
<meta property="og:type" content="product"/>
<meta property="fb:app_id" content="507941172576787"/>
<title>Untitled Document</title>
<script type="text/javascript" src="lib/jquery-1.9.0.min.js"></script>

<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="lib/jquery.mousewheel-3.0.6.pack.js"></script>

<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="source/jquery.fancybox.js?v=2.1.4"></script>
<link rel="stylesheet" type="text/css" href="source/jquery.fancybox.css?v=2.1.4" media="screen" />

<!-- Add Button helper (this is optional) -->
<link rel="stylesheet" type="text/css" href="source/helpers/jquery.fancybox-buttons.css?v=1.0.5" />
<script type="text/javascript" src="source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>

<!-- Add Thumbnail helper (this is optional) -->
<link rel="stylesheet" type="text/css" href="source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" />
<script type="text/javascript" src="source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>

<!-- Add Media helper (this is optional) -->
<script type="text/javascript" src="source/helpers/jquery.fancybox-media.js?v=1.0.5"></script>
</head>

<body>
<script>
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        beforeShow: function () {
            if (this.title) {
                // New line
                this.title += '<br />';

                // Add tweet button
                this.title += '<a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-url="' + this.href + '">Tweet</a> ';

                // Add FaceBook like button
                this.title += '<iframe src="//www.facebook.com/plugins/like.php?href=' + this.href + '&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:23px;" allowTransparency="true"></iframe>';
            }
        },
        afterShow: function() {
            // Render tweet button
            twttr.widgets.load();
        },
        helpers : {
            title : {
                type: 'inside'
            }
        }  
    });
</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pt_BR/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>
<div class="product"> <a class="fancybox" href="http://www.bag.com.br/matilha/pracachorro/demo/1_b.jpg" data-fancybox-group="gallery" title="foto01"><img src="http://www.bag.com.br/matilha/pracachorro/demo/1_s.jpg"  width="150" height="150" /></a>
  <fb:like href="http://www.bag.com.br/matilha/pracachorro/demo/1_b.jpg" layout="button_count"
  show_faces="false" width="240" height="40"
  action="like" colorscheme="light"></fb:like>
</div>
<div class="product"> <a class="fancybox" href="http://www.bag.com.br/matilha/pracachorro/demo/2_b.jpg" data-fancybox-group="gallery" title="foto02"><img src="http://www.bag.com.br/matilha/pracachorro/demo/2_s.jpg"  width="150" height="150" /></a>
  <fb:like href="http://www.bag.com.br/matilha/pracachorro/demo/2_b.jpg" layout="button_count"
  show_faces="false" width="240" height="40"
  action="like" colorscheme="light"></fb:like>
</div>
</div>
<div class="product"> <a class="fancybox" href="http://www.bag.com.br/matilha/pracachorro/demo/3_b.jpg" data-fancybox-group="gallery" title="foto03"><img src="http://www.bag.com.br/matilha/pracachorro/demo/3_s.jpg"  width="150" height="150" /></a>
  <fb:like href="http://www.bag.com.br/matilha/pracachorro/demo/3_b.jpg" layout="button_count"
  show_faces="false" width="240" height="40"
  action="like" colorscheme="light"></fb:like>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:53:07.530

您可以使用 XFMBL 为页面上的每个图像显示不同的喜欢。此链接有一个非常详尽的示例：[http ://hillarsaare.com/multiple-facebook-like-buttons-on-one-page/](http://hillarsaare.com/multiple-facebook-like-buttons-on-one-page/)

这是该站点的示例：

```
<div class="product">
  <fb:like href="YOUR_URL_WHICH_HAS_META_TAGS" layout="button_count"
  show_faces="false" width="240" height="40"
  action="like" colorscheme="light"></fb:like>
</div>

<div class="product">
  <fb:like href="ANOTHER_URL_WHICH_HAS_META_TAGS" layout="button_count"
  show_faces="false" width="240" height="40"
  action="like" colorscheme="light"></fb:like>
</div> 
```

# sql - 在 SQL Server 2012 Express 上执行表压缩算法的最佳方法

> ID：15797240
> 
> 赞同：0
> 
> 时间：2013-04-03T20:17:52.067
> 
> 标签：sql, delete-row, sql-server-2012-express

让我先说我的SQL经验有限，但是我搜索了几天以找到解决我问题的好方法，但我还没有找到。如果存在明显的答案，我没有使用正确的关键词来找到它。

我有一个硬件数据收集系统，它将系统运行状况行插入表中，在很长一段时间内每 10 分钟插入 1 个。这些数据用作硬件故障时的诊断信息。该表包含使用唯一 DeviceID 列标识的多个设备的记录。我计划在此表中为每个设备最多保留 100K 条记录。我计划偶尔使用以下算法压缩表：

当特定 DeviceID 的行数超过 100K 时，为特定 DeviceID 选择最旧的 50% 行，并从选择中的第 2 行开始每隔 2 行删除一次。

该算法具有所需的特性，即最近的数据以 10 分钟的间隔保留，而较旧的数据会在时间上逐渐散开。第一个（最旧的）记录也永远不会被删除。

我可以在 C# 中轻松实现这一点，在查询后删除多个单行以选择最旧的 50K 行。我希望有人知道更好的方法来做到这一点。

如果它有帮助，我可以重新组织数据，以便每个设备都有一个不同的表，但这会使在 C# 中的单个虚拟化网格视图中呈现数据以供审查变得复杂。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:15:39.113

我想我在这里使用公用表表达式找到了解决问题的方法（[删除每 n 行 SQL ）。](https://stackoverflow.com/questions/3509094/deleting-every-nth-row-sql)在下面的代码中，HealthID 是我的 DeviceHealth 表中的索引。DeviceID = 1 子句仅用于测试。实际代码将使用参数而不是 1。

```
WITH cte AS (
    SELECT TOP 50 PERCENT t.*, ROW_NUMBER() OVER (ORDER BY t.HealthID)
        AS rank FROM [DeviceHealth] t WHERE DeviceID = 1)
DELETE cte WHERE rank%2 != 0 
```

这似乎有效。有没有更好的方法或找到一个好的解决方案？

# java - MineSweeper 与 GUI，如何更改字段的大小，然后刷新 JFrame？

> ID：15797254
> 
> 赞同：0
> 
> 时间：2013-04-03T20:18:52.150
> 
> 标签：java, swing, user-interface, jframe, jdialog

我正在尝试使用 GUI 制作扫雷游戏，当我添加一个菜单，人们可以在其中更改字段大小和地雷数量时，我无法更改 JFrame。如果玩家在 JTextBox 中输入内容并按下 JDialog 上的提交按钮，我想更改按钮和地雷的数量。基本上我想在*MineSweeper*类中更改 sizeX、sizeY、挖掘变量，然后用新值刷新框架。

```
 public class MineSweeper {
private static int sizeX=20;
private static int sizeY=20;
private static int mines=20;

private static JFrame frame;

public static void setX(int x){
    sizeX = x;
}
public static void setY(int y){
    sizeY = y;
}
public static void setM(int m){
    mines = m;
}
public static void refreshFrame(){
    frame.validate();
    frame.repaint();
}

public static void main(String[] args){

    frame = new JFrame("");
    frame.setTitle("MineSweeper Game");
    frame.setBackground(Color.white);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JMenuBar menu = new JMenuBar();
    JMenu options = new JMenu("Options");
    JMenuItem gameProperties = new JMenuItem("Game Properties");
    menuHandler menuHandling = new menuHandler();
    gameProperties.addActionListener(menuHandling);
    options.add(gameProperties);
    menu.add(options);
    frame.setJMenuBar(menu);
    frame.setSize(sizeX*sizeY, sizeX*sizeY);
    if(gameProperties.isEnabled()) frame.validate();
    frame.add(new MineSweeperGUI(sizeX, sizeY, mines));
    frame.setVisible(true);

} 
```

}

```
class menuHandler implements ActionListener{
JDialog dialog;
JButton button;
JPanel panel;
JLabel sizeRow, sizeCols, mineCount;
JTextField sizeX, sizeY, mines;
int  x, y, m;
public menuHandler(){
    dialog = new JDialog();
    dialog.setSize(400,120);
    panel = new JPanel(new GridLayout(4, 2));
    sizeRow = new JLabel("Row size of the field: ");
    sizeCols = new JLabel("Column size of the field: ");
    mineCount = new JLabel("Number of mines: ");
    sizeX = new JTextField(10);
    sizeY = new JTextField(10);
    mines = new JTextField(10);
    panel.add(sizeRow);
    panel.add(sizeX);
    panel.add(sizeCols);
    panel.add(sizeY);
    panel.add(mineCount);
    panel.add(mines);
    button = new JButton("Submit");
    panel.add(button);
    dialog.add(panel);
}

public void actionPerformed(ActionEvent e) {
    dialog.setVisible(true);

    button.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            String sizeofRows = sizeX.getText();
            String sizeofCols = sizeY.getText();
            String countofMines = mines.getText();
            MineSweeper.setX(Integer.parseInt(sizeofRows));
            MineSweeper.setY(Integer.parseInt(sizeofCols));
            MineSweeper.setM(Integer.parseInt(countofMines));
            MineSweeper.refreshFrame();
            dialog.dispose();
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:46:31.510

您也许可以采用这个简单[游戏](https://sites.google.com/site/drjohnbmatthews/buttons)中使用的方法。它使用具有实例的`JPanel`命名。当用户改变游戏的大小时，调用`buttonPanel``GridLayout``JToggleButton``ActionListener``resetGame()`

```
buttonPanel.validate(); 
```

# macos - Mac .app 文件在由网络服务器提供服务后不再工作

> ID：15797255
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:18:56.110
> 
> 标签：macos, flash, .app

好的，所以我有一个小问题。我有一个由 Adob​​e Air 转换器创建的 .app 文件。它工作正常。但是，当 .app 文件在 CENT OS 服务器上压缩时，该应用程序不再工作。您可以双击该图标，但该应用程序永远不会启动。

服务器正在做的唯一奇怪的事情是它正在编辑 .app 包中的一个 xml 文件，但是，这个 .xml 文件甚至在它启动之后才被应用程序加载，所以我不能看到这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:23:11.523

我敢打赌，您（或您使用的 Adob​​e Air 转换器）对您的应用程序包进行了代码签名，在这种情况下，修改 XML 文件（在构建之后）会破坏事情。我正在开发一个需要像这样频繁定制的应用程序，我们解决它的唯一方法是使用专用于构建和代码签名独特版本的 Macintosh（MacMini）。

知道发生了什么的方法是查看您的“ `Console.app`”日志，当您双击下载的应用程序时，它应该会记录某种错误。

您可以做的另一件事是（暂时）***禁用***修改 XML 文件的 Web 服务器上的代码，并查看下载的应用程序是否神奇地开始工作。

# android - 一个函数如何知道哪个可点击的 textView 用 onClick 调用了它？

> ID：15797257
> 
> 赞同：2
> 
> 时间：2013-04-03T20:19:13.837
> 
> 标签：android, eclipse, textview, clickable

当我选择在可点击的 TextView 上使用 onClick 调用函数时，如何让函数知道哪个 TextView 调用了它？

例如，当我在 MainActivity.java 中有这个时：

```
public void showHideData(View view)
{
    //Log.v("showHideDataA: ",  "Calling package null, local class name: " + this.getLocalClassName() + " request orientation: " + ("" + this.getRequestedOrientation()));
    if (findViewById(R.id.letterContentTextViewArrayB).getVisibility() == View.VISIBLE)
    {
        findViewById(R.id.checkedB).setVisibility(View.GONE);
        findViewById(R.id.notcheckedB).setVisibility(View.VISIBLE);
        findViewById(R.id.letterContentTextViewArrayB).setVisibility(View.GONE);
    }
    else
    {
        findViewById(R.id.checkedB).setVisibility(View.VISIBLE);
        findViewById(R.id.notcheckedB).setVisibility(View.GONE);
        findViewById(R.id.letterContentTextViewArrayB).setVisibility(View.VISIBLE);
    }
} // end of showHideData(0) 
```

和以下文本视图：

```
 <TextView 
                android:id="@+id/firstLetterTextViewArrayA"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/btn_a_label"
                android:clickable="true"
                android:onClick="showHideData"/>
           <TextView 
                android:id="@+id/firstLetterTextViewArrayB"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/btn_b_label"
                android:clickable="true"
                android:onClick="showHideData" /> 
```

有没有办法让 showHideData(View view) 知道哪个 TextView 调用了它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:21:37.463

```
public void showHideData(View view)
{
     view.getId();
     ...
} 
```

这将返回`view`被点击的 id。所以你可以使用一个`switch`语句

```
public void showHideData(View view)
{
    switch (view.getId()) {
        case R.id.firstLetterTextViewArrayA:
        // logic for this button
        break;
        case R.id.firstLetterTextViewArrayB:
        // logic for this button
        break;
} 
```

# javascript - 用于测试 javascript 代码的示例 HTML

> ID：15797262
> 
> 赞同：3
> 
> 时间：2013-04-03T20:19:28.207
> 
> 标签：javascript

我刚刚开始学习 Javascript，好的，这是我想尝试在浏览器中查看的代码，所以我创建了一个 test.js 文件并将其放入其中：

```
function useless(callback) {
    return callback
}

var text = 'Amigo';

assert(
    useless(function(){ return text; }) === text,
    "The useless function works! " + text); 
```

但是还有更多，我应该写一个最小的 HTML 页面而不是可以调用这个函数，什么是示例 HTML 来承载这个方法？

我写了这样的东西，但它仍然有问题：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>

<script src="hehe.js" >
    useless('Amigo');
    window.onload=useless('Amigo')
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:22:24.700

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<script type="text/javascript" src="hehe.js"></script>
<script  >
    useless('Amigo');
    window.onload=useless('Amigo')
</script>

</body>
</html> 
```

您可以在单独的脚本中加载源代码，而不是调用它的内联脚本。请注意，这假设 hehe.js 位于您网站的根目录中。

对于一般的 js 测试，[jsFiddle](http://jsfiddle.net/)是一个很好的资源，它可以让你定义你的 html/js/css 并尝试一些小的更改，而无需写出所有的文件。

# c++ - 如何创建具有多个索引的 std::map？

> ID：15797266
> 
> 赞同：0
> 
> 时间：2013-04-03T20:19:43.100
> 
> 标签：c++

以下作品：

```
std::map<std::string, Animal*> animalMap;

animalMap["KillerRabbit"] = new KillerRabit; 
```

但是如果我想这样做呢？

```
animalMap["KillerRabbit"]["White"] = new KillerRabit; 
```

我不知道索引括号的“官方”名称是什么，知道它们在谷歌搜索时会有很大帮助 =p

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:21:22.967

您正在寻找的是地图地图：

```
std::map<std::string, std::map<std::string, Animal*>> animalMap; 
```

现在存储的每个值`animalMap`本身就是一个`std::map`. 外部和内部映射的键类型都是`std::string`.

`[...]`语法是下*标运算符*。不过，更具体地说，您使用*keys*为 map 下标。键映射到值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:33:46.200

sftrabbit 给出了规范的方法来做到这一点。如果您不希望每个键有多个映射查找，您也可以使用 std::pair 作为映射键。

[这是一个这样做的例子。](https://stackoverflow.com/questions/6371713/c-stl-map-stdpair-as-the-key)

# php - 清理重新提交另一个表单验证 php javascript 解析错误

> ID：15797267
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:19:49.277
> 
> 标签：php

我清理了，这是错误：

```
// validation expected data exists
if (!isset($_POST['name'])) { ||
    /* !isset($_POST['last_name']) || */
    !isset($_POST['email']) ||
    /* !isset($_POST['telephone']) || */
    !isset($_POST['comments']) 
died('We are sorry, but there appears to be a problem with the form you submitted.'); 
```

错误说：

> 解析错误：语法错误，第 37 行 /home/kcorchid/public_html/Tap/Send_Comments.php 中的意外 T_BOOLEAN_OR ...

该行是：

```
if (!isset($_POST['name'])) { || 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:25:14.553

可重复使用且易于更改：

```
$must_exist = array('name','email','comments','last_name','telephone');

foreach ($must_exist as $item) {
    if (!isset($_POST[$item])) {
        die('We are sorry, but there appears to be a problem with the form you submitted.');
    }
}

// if code executes past this point, all the $must_exist items were found 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:23:28.993

你只是在错误的地方放了一个支架：

```
if (!isset($_POST['name']) ||
                                               /*!isset($_POST['last_name']) || */
    !isset($_POST['email']) ||
                                               /*!isset($_POST['telephone']) || */
    !isset($_POST['comments']) )
{
    die('We are sorry, but there appears to be a problem with the form you submitted.');
} 
```

应该工作得很好！

# scheme - （方案）Cons 一个数字到子列表的前面？

> ID：15797268
> 
> 赞同：0
> 
> 时间：2013-04-03T20:19:50.173
> 
> 标签：scheme

我有一个函数可以找到 2 个坐标的距离并将其放在相应子列表的前面。现在，它只找到第一个坐标的距离。我认为递归有问题，因为它似乎没有移动到其他坐标。

这是应该发生的事情：

```
~(storedist distance '(1 7) '((d (1 8)) (d (2 9))))
((1 (d (1 8))) (2 (d (2 9)))) 
```

这是我的代码发生的事情：

```
~(storedist distance '(1 7) '((d (1 8)) (d (2 9))))
(1 (d (1 8))) (d (2 9))) 
```

我怎样才能解决这个问题？

```
(define (store-dist dist coord data)
 (if (null? data) '()
  (if (null? (cdr data)) data
      (cons (dist coord (car (list (cadar data)))) 
        (store-dist dist coord (list (cdr data))))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:33:28.177

这将是解决此类问题的最简单的递归方法；但是，很大程度上取决于`dist`代码和您的列表结构：

```
(define (store-dist dist coord data)
  (if (null? data)
      '()
       (cons (dist coord (car data))
             (store-dist dist coord (cdr data))))) 
```

在上面，`dist`函数需要解包/解析`'(d (<x> <y>))`结构；否则使用`cadr`. 这是一个候选人：

```
(define dist
  (let ((count 0))
    (lambda (c1 dthingy)
      (set! count (+ 1 count))
      `(,count (d (,dx ,dy))))))  ;; figure out dx, dy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:37:25.090

程序的最后一部分是不对的。对于两个坐标，这甚至不需要是递归（假设所有参数都是非空的）：

```
(define (store-dist dist coord data)
  (list (list (dist coord (cadar data))
              (car data))
        (list (dist coord (cadadr data))
              (cadr data)))) 
```

对于更通用的方法（具有两个以上坐标的列表）使用递归：

```
(define (store-dist dist coord data)
  (if (null? data)
      '()
      (cons (list (dist coord (cadar data))
                  (car data))
            (store-dist dist coord (cdr data))))) 
```

# ajax - 从 AJAX 响应中获取 cookie

> ID：15797271
> 
> 赞同：0
> 
> 时间：2013-04-03T20:19:58.083
> 
> 标签：ajax, jquery, cookies, xmlhttprequest

我正在编写一个使用 AJAX 与服务器通信的 chrome 扩展程序。我想从 AJAX 响应中读取内容`KEY`，`set-cookie`但我找不到这样做的方法。

我已经尝试`document.cookie`过`xhr.getAllResponseHeaders()`

```
$.get(myURL,
      function (output, status, xhr) {
          console.log(document.cookie); //empty
          console.log(xhr.getAllResponseHeaders()); 
          //Only Connection and Content-Type shows
      }
); 
```

原始响应标头是：

```
Connection:Close
Content-Type:text/html
Set-Cookie:KEY=DFDSFDCB; PATH=/; 
```

我知道根据规范，`getAllResponseHeaders()`应该过滤掉`set-cookie`字段。有什么解决方法吗？

# lua - Lua 参数和数字

> ID：15797272
> 
> 赞同：0
> 
> 时间：2013-04-03T20:20:00.597
> 
> 标签：lua

```
function OnChat(PlayerId, Type, Message)

    if Message == "!usecarepackage" then
        if ReadKS1 == "CP" or ReadKS2 == "CP" or ReadKS3 == "CP" then
            InputConsole("msg %s has requested a care package!", Get_Player_Name_By_ID(pID))
            local pos = Get_Position(Get_GameObj(pID))
            pos:AssignY(pos:GetY()+1)
            building = Create_Object("SignalFlare_Gold_Phys3", pos)
            Attach_Script(building, "Test_Cinematic", "caredrop.txt")
            if building == nil then
                 InputConsole("ppage %d Cannot spawn Care Package here.", pID)
            elseif math.random(50, 64) == 50 then
                Attach_Script(building, "z_Set_Team", Get_Team(pID))
                Attach_Script(building, "M00_No_Falling_Damage_DME")
                --Add in rest of numbers and corresponding streak, such as UAV if math.random = 50
            end
        elseif ReadKS1 ~= "CP" or ReadKS2 ~= "CP" or ReadKS3 ~= "CP" then
            InputConsole("ppage %d You are not allowed to use that with your current streak selection", pID)
        end
    end

    return 1
end 
```

我知道这是邋遢的代码，但我收到“错误的参数 #2 到‘格式’（预期数字，没有价值）”。这与以所有其他部分为前缀的这段代码有关：

```
function InputConsole(...)
    Console_Input(string.format(unpack(arg)))
end 
```

最后，这是针对游戏命令与征服叛徒（如果您希望查找 API 等）。对我做错的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:43:12.933

此代码可能存在的问题是`arg`在您的函数中使用了已弃用的功能`InputConsole()`。Lua 5.0 被用作使用参数列表中的标记`arg`访问声明为可变参数的函数的实际参数的一种方式。`...`

**编辑：**但可能并不意味着正确。

实际问题看起来像成语 from `PlayerId`to的切换`pID`。前者是函数的命名参数，`OnChat()`后者是函数体中使用的全局变量，无需进一步初始化。未初始化的全局变量是`nil`，所以`nil`被传递给`InputConsole()`并且错误消息告诉你真相。

### 没有解决它的旧答案

Lua 5.1 弃用了这种用法，Lua 5.2 完全删除了它。

从提供的代码片段中我不确定这个游戏中实际使用的是哪个版本的 Lua，但症状与缺少自动生成的`arg`表一致。

我会这样写函数：

```
function InputConsole(...)
    Console_Input(string.format(...))
end 
```

但是您也可以添加`local arg = {...}`作为函数的第一行，并获得与 Lua 5.0 提供的几乎相同的效果，但代价是创建（和丢弃）临时表。差异是微妙的，主要与`nil`表格中的处理有关。

为了清楚起见，我更喜欢命名第一个参数，因为它不是真正可选的。

```
function InputConsole(fmt, ...)
    Console_Input(string.format(fmt, ...))
end 
```

如果你可以指望那个参数是一个字符串，那可以进一步简化为

```
function InputConsole(fmt,...)
    Console_Input(fmt:format(...))
end 
```

如果担心它的粘稠度，只需`fmt = tostring(fmt)`在`assert(type(fmt)=="string")`调用`Console_Input()`.

# clojurescript - 函数的Arity

> ID：15797279
> 
> 赞同：4
> 
> 时间：2013-04-03T20:20:14.087
> 
> 标签：clojurescript, arity

clojurescript 中有没有办法检查给定 cljs 函数的可用 arity 实现是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T20:26:42.630

如果您使用 nREPL 运行 Emacs，如[本要点](https://web.archive.org/web/20140803115523/https://gist.github.com/rkneufeld/5126926)所述，当您的文本光标靠近函数名称时，Emacs 将在消息区域中显示函数的签名。

像那样： [![emacs 截图](https://i.stack.imgur.com/YJiuj.png)](https://i.stack.imgur.com/YJiuj.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T18:08:06.043

Rodrigo Taboada 的唯一答案已经过时，现在很多新工具都出来了。

## 灯台和斗轮

我认为现在[Light Table](http://lighttable.com/)是 ClojureScript 的最佳工具之一，尤其是与[Figwheel](https://github.com/bhauman/lein-figwheel)结合使用时。[有关将 LT 与 Figwheel 一起使用的](https://github.com/bhauman/lein-figwheel/wiki/Running-figwheel-with-LightTable)更多信息。

在 Light Table 中检查函数签名，您只需将光标放在函数名称上并点击`Ctrl-D`即可切换内联文档。

[![LT 内联文档](https://i.stack.imgur.com/NyRBZ.png)](https://i.stack.imgur.com/NyRBZ.png)

## Emacs 和 Cider + Figwheel

对于 Emacs ， [Cider](https://cider.readthedocs.io/en/latest/)与[Figwheel 结合](https://github.com/bhauman/lein-figwheel)是一个很好的选择，交互式 repl 和调试器都在 Emacs 中。

要检查函数，您可以使用快捷方式`Ctrl-c d d`显示文档和函数签名。

[![emacs_cider_docs](https://i.stack.imgur.com/T12lP.jpg)](https://i.stack.imgur.com/T12lP.jpg)

配置 Cider 起初并不容易，但 Figwheel 使任务更容易，只需取消注释 Figwheel 项目文件中注释下的行`;; for CIDER`，`project.clj`如下所示：

```
:profiles {:dev {:dependencies [[binaryage/devtools "0.7.2"]
                                  [figwheel-sidecar "0.5.4-7"]
                                  [com.cemerick/piggieback "0.2.1"]]
                   ;; need to add dev source path here to get user.clj loaded
                   :source-paths ["src" "dev"]
                   ;; for CIDER
                   :plugins [[cider/cider-nrepl "0.13.0"]]
                   :repl-options {; for nREPL dev you really need to limit output
                                  :init (set! *print-length* 50)
                                  :nrepl-middleware [cemerick.piggieback/wrap-cljs-repl]}}} 
```

然后将 Cider 设置为使用 figwheel 作为 repl：

`M-x`然后启动命令`customize-variable`，要自定义的变量名称是：`cider-cljs-lein-repl`然后将变量设置为`Figwheel-sidecar`，保存配置状态，您就完成了。

重要的是 Cider 是相同版本的`cider-nrepl`插件，在本文发布时，它们必须是两个版本`0.13.0`。

# json - REST HATEOAS：如何在浏览链接时确定和设置媒体类型？

> ID：15797282
> 
> 赞同：1
> 
> 时间：2013-04-03T20:20:23.337
> 
> 标签：json, http, rest, mime-types, hateoas

我正在经历[被](https://kenai.com/projects/suncloudapis/pages/HelloCloud)描述为一个[好的 REST API](https://stackoverflow.com/a/1166786/1733060)的例子。GET 是在基本 URI 上发送的，并且带有客户端已经知道的媒体类型（这很好，根据 REST 原则）。

```
 To server:

 GET /
 Host: xrgy.cloud.sun.com
 Authorization: Basic xxxxxxxxxxxxxxxxxxx
 Accept: application/vnd.com.sun.cloud.Cloud+json
 X-Compute-Client-Specification-Version: 0.1

 From Server:

 HTTP/1.1 200 OK
 Content-Type: application/vnd.com.sun.cloud.Cloud+json
 Content-Length: nnn

 {
   "implementation_version": "597",
   "vdcs": [
     {
       "name": "XRGY Virtual Data Center",
       "uri": "/vdc"
     }
     {
       "name": "R&D sandbox"
       "uri": "/sandbox"
     }
   ],
   "uri": "http://xrgy.cloud.sun.com/",
   "specification_version": [
     "0.5"
   ]
 } 
```

但我陷入困境的是**客户端如何为后续请求设置媒体类型**。我知道客户端从上一个响应中获得了下一个请求的 URI。但是它是从哪里获得媒体类型的呢？如果它是客户端的先验知识，那么客户端通常如何维护这样的 URI:media-type 映射？看来我肯定在这里错过了一些基本知识。以下是使用媒体类型发送的后续请求：application/vnd.com.sun.cloud.Vdc+json！

```
To server:

 GET /vdc
 Host: xrgy.cloud.sun.com
 Authorization: Basic xxxxxxxxxxxxxxxxxxx
 Accept: application/vnd.com.sun.cloud.Vdc+json
 X-Compute-Client-Specification-Version: 0.1

From server:

 HTTP/1.1 200 OK
 Content-Type: application/vnd.com.sun.cloud.Vdc+json
 Content-Length: nnn

 { 
   "name" : "XRGY Virtual Data Center",
   "uri" : "http://xrgy.cloud.sun.com/vdc",
   "vm_templates" : "http://cloud.sun.com/resources/template-cat.json",
   "addresses" : [
     {
       "name": "144.34.100.199",
       "uri": "/addresses/144.34.100.199",
       "ip_address": "144.34.100.199"
     }
   ],
   "cluster" : {
     "name" : "ROOT",
     "uri" : "/vdc/",
     "tags" : [ ],
     "volumes" : [ ],
     "clusters" :  [
     ]
     "tags" : [ ],
     "controllers" : [
       "start" : "/vdc/ops/start",
       "stop" : "/vdc/ops/stop",
     ]
     "vnets" : [
       {
         "name": "vnet1",
         "uri": "/vnets/10.31.145.0",
         "netmask": "255.255.255.0",
         "network": "10.31.145.0"
       }
     ],
     "vms": [
       {
        * SNIPPED *
       }
     ]
   }
 } 
```

我已经看到其他示例，其中媒体类型也是响应中链接的一部分，例如以下响应，我可以理解。

```
201 Created
Content-Type: application/vnd.bank.org.transfer+xml;charset=UTF-8

<transfer xmlns="urn:org:bank:accounts">
    <link rel="self"
          href="http://bank.org/transfer/XTA8763"/>
    <link rel="http://bank.org/rel/transfer/from"
          type="application/vnd.bank.org.account+xml"
          href="http://bank.org/account/AZA12093"/>
    <link rel="http://bank.org/rel/transfer/to"
          type="application/vnd.bank.org.account+xml"
          href="http://bank.org/account/ADK31242"/>
    <link rel="http://bank.org/rel/transfer/status"
          type="application/vnd.bank.org.status+xml"
          href="http://bank.org/check/XTA8763"/>
    <id>transfer:XTA8763</id>
    <amount currency="USD">100</amount>
    <note>RESTing</note>
</transfer> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:19:22.597

简单地说，是的，客户需要对所涉及的媒体类型有一些先验知识。因为客户端实际上设置了它可以使用的媒体类型。由于客户端只理解“某些”媒体类型，如果它发送一个应用程序不支持的媒体类型的请求，那么客户端就很不走运了。

因为，在现实世界中，我们尽量不让客户端盲目调用返回他们不理解的有效载荷的服务，所以客户端将对所涉及的有效载荷有一些先见之明，尤其是非常具体的类型（相对于纯文本或应用程序/xml）。

最后，请记住，媒体类型将有效地告诉您有效负载的语法，但不会告诉您如何解释有效负载。您的客户也必须预先了解这些语义，因此对媒体类型有初步了解的负担实际上并不是参与的特别障碍，这只是生活中的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:39:25.133

客户端负责告诉服务器他们理解/喜欢什么样的响应。这就是 Accept 标头所指示的。服务器以试图满足客户端请求的内容进行响应。Content-Type 标头指示实际返回的内容。理想情况下，此标头的值与 Accept 标头的值相同。

[请参阅RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)中的第 14.1 和 14.17 节。

在您的示例中，客户端作者可能正在向客户端注入知识，这并不是真正的 100% RESTful 客户端。

# python - NOAA 使用 python 的每小时数据

> ID：15797293
> 
> 赞同：2
> 
> 时间：2013-04-03T20:20:44.587
> 
> 标签：python, xml, web-scraping, weather, noaa

是否有任何 python 程序可以从 NOAA 获取详细数据，特别是每小时数据和 7 天昼/夜预测？

我找到了 python-weather-api、python-weather 和 python-noaa。但是，它们要么不再受支持，要么缺少我想要的数据。

如果没有，那么我可能会自己制作一个，尽管我不想重新发明轮子！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:51:54.093

看起来[国家数字预报数据库 (NDFD) 简单对象访问协议 (SOAP) Web 服务](http://graphical.weather.gov/xml/)正是您要寻找的。您可以使用 SOAP 访问 NDFD XML 对象并使用 Python 轻松解析它们 - 无需 3rd-party 库。如果您更喜欢 RESTful 服务，您也可以[这样做](http://graphical.weather.gov/xml/rest.php)。

他们甚至有关于 SOAP 请求如何工作的精彩图表。

![使用 SOAP 获得乐趣和利润](https://i.stack.imgur.com/Xak0E.gif)

# gwt - GWT 拖放动画

> ID：15797300
> 
> 赞同：2
> 
> 时间：2013-04-03T20:20:58.770
> 
> 标签：gwt, animation, drag-and-drop

我有一个流面板，里面有许多照片小部件（具有随机行和列数的画廊，取决于屏幕大小），我想为其实现拖放行为以更改它们的顺序。我正在使用**gwt-dnd**库。它`FlowPanelDropController`允许您定义自己的定位器（分隔符），它显示了放置拖动的小部件的候选位置。

我希望这个定位器是定义宽度的空白空间，具有挑战性的是在添加和移除定位器时实现滑动动画效果。如果您是桌面 Picasa 应用程序用户，您就会明白我的意思：目标行向两侧滑动（向左一点，向右一点），扩大了您要放置照片的项目之间的空间。

整个事情已经足够复杂了，但是任何与如何应用定位器附加/分离动画相关的帮助都值得赞赏。如果您对这有什么帮助有任何想法，也许我需要使用不同的方法（例如，使用 GWT 本机 dnd 而不是 gwt-dnd lib，并且根本没有“定位器”）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:54:41.623

好吧，我最终覆盖了`AbstractPositioningDropController`(parent of `FlowPanelDropController`) 并添加了一些额外的功能。

1)`newPositioner()`方法现在构建标签，这是一个垂直空间，具有一些小的宽度、高度和装饰。此小部件的元素具有常量`id`（例如，“POSITIONER”），如果您计划在多个放置目标上使用拖动对象导航时使用多个定位器，这有助于区分多个定位器。一些`transition`CSS 效果也被应用到标签上，这将负责处理标签宽度的动画扩展。

2）在`onEnter()`我做以下

```
 ...
        removePositioner(getPositionerElement());

        Widget positioner = newPositioner();
        dropTarget.insert(positioner, targetIndex);
        animatePositionerExtension(); 
```

在哪里`getPositionerElement()`返回`DOM.getElementById(POSITIONER)`

同时`removePositioner(..)`将此元素的 id 重置为抽象的东西，理想情况下应该在调用之前提供一些动画`.removeFromParent()`。但是我没有足够的时间来正确调试它，所以最终只是移除了没有动画的旧定位器。

方法`animatePositionerExtension()`包含更改定位器小部件宽度的代码，以便 CSS`transition`捕获并提供动画。

应通过更新的方法提供对类中定位器小部件的所有访问。

3)`onLeave()`包含行`removePositioner(getPositionerElement());`

4）最后`onMove()`我添加了几行：

```
 galleryWidget.extendHoveredRow(targetIndex - 1);
     animatePositionerExtension(); 
```

在哪里`extendHoveredRow(hoveredWidgetOrdinal)`实现了在单行中“限制”滑动效果的逻辑：

```
int rowHovered = -1;
public void extendHoveredRow(int hoveredWidgetOrdinal) {
    int newRowHovered = getRowByOrdinalHovered(hoveredWidgetOrdinal);
    if (rowHovered != newRowHovered) {
        // adjust position of items in the previously hovered row
        int firstInPreviouslyHoveredRow = (rowHovered - 1) * itemsInARow;
        shiftFirstItemLeft(firstInPreviouslyHoveredRow, false);

        rowHovered = newRowHovered;
        // extend this row
        int firstInThisRow = getOrdinalFirstInThisRowByOrdinal(hoveredWidgetOrdinal);
        shiftFirstItemLeft(firstInThisRow, true);
    }
} 
```

简而言之，这就是我做这件事的方式。仍然有一些改进的空间，比如添加动画移除。

同样，这完全是关于覆盖 DropController 和使用“画廊”小部件内的元素进行的操作。这种方法的好处是我留在了 gwt-dnd 操作框架中，并且还重用了一堆现有的代码。

一些注意事项：

*   IE pre-9 不支持CSS `transition`，但这与本主题无关。
*   如果您将其用作 dragProxy 的面，则在 Image 小部件的顶部放置一个透明的“玻璃”div。这将为您节省大量时间来尝试理解为什么将元素设置`draggable`为 false，或调用`event.preventDefault()`其他地方，或其他解决方法在一个或多个浏览器中不起作用，并且图像本身被拖动而不是整个 dragProxy 小部件。

# android - 在装有 Android 4.2.2 的 Nexus 7 上使用前置摄像头不起作用？

> ID：15797302
> 
> 赞同：0
> 
> 时间：2013-04-03T20:21:17.577
> 
> 标签：android, camera, android-camera, image, nexus-7

我有 Android 应用程序，我用前置摄像头拍摄照片。我使用了这里描述的方法：[http](http://android-er.blogspot.sk/2010/12/add-overlay-on-camera-preview.html) ://android-er.blogspot.sk/2010/12/add-overlay-on-camera-preview.html 。它适用于搭载 Android 2.3.6 的 Nexus S，适用于搭载 Android 4.1.1 的 HTC One X

它不适用于装有最新 Android 4.2.2 的 Asus Nexus 7，当我尝试拍照时，我在日志中得到了这个：

```
04-03 22:06:56.181: I/MainSSCActivity(24745): camera take picture START
04-03 22:06:56.191: E/NvOmxCamera(24952): OMX_ERRORTYPE android::NvOmxCamera::getCameraStereoMode(NvxComponent*, NvOmxCameraUserStereoMode&): Error: invalid NVX mode 0.
04-03 22:06:56.191: E/NvOmxCamera(24952): OMX_ERRORTYPE android::NvOmxCamera::getCameraStereoModeAndCaptureInfo(NvxComponent*, NvOmxCameraUserStereoMode&, NVX_STEREOCAPTUREINFO&): getCameraStereoMode failed with 0x00000000
04-03 22:06:56.191: D/NvOsDebugPrintf(24952): NvMMLiteJPEGEncSetAttribute: Incorrect value 0 for stereo capture type
04-03 22:06:56.191: E/NvOmxCameraSettings(24952): OMX_ERRORTYPE android::programStereoInfo(OMX_HANDLETYPE, const NVX_STEREOCAPTUREINFO&, android::NvxWrappers*): pNvxWrappers->OMX_SetConfigIL failed with 0x80001005
04-03 22:06:56.351: I/MainSSCActivity(24745): camera take picture END
04-03 22:06:56.391: I/MainSSCActivity(24745): ***** surface destroyed
04-03 22:06:56.401: I/hwcomposer(130): Setting interactive mode: On
04-03 22:06:56.481: E/BufferQueue(130): [SurfaceView] queueBuffer: SurfaceTexture has been abandoned!
04-03 22:06:56.491: E/SurfaceTextureClient(24952): queueBuffer: error queuing buffer to SurfaceTexture, -19
04-03 22:06:56.491: E/NvOmxCamera(24952): Queue Buffer Failed
04-03 22:06:56.491: A/libc(24952): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1), thread 25019 (Binder_3)
04-03 22:06:56.491: D/MainSSCActivity(24745): RAW bytes: null
04-03 22:06:56.491: D/MainSSCActivity(24745): shutter
04-03 22:06:56.591: I/DEBUG(128): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
04-03 22:06:56.591: I/DEBUG(128): Build fingerprint: 'google/nakasig/tilapia:4.2.2/JDQ39/573038:user/release-keys'
04-03 22:06:56.591: I/DEBUG(128): Revision: '0'
04-03 22:06:56.591: I/DEBUG(128): pid: 24952, tid: 25019, name: Binder_3  >>> /system/bin/mediaserver <<<
04-03 22:06:56.591: I/DEBUG(128): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
04-03 22:06:56.701: I/DEBUG(128):     r0 00000027  r1 deadbaad  r2 4022f258  r3 00000000
04-03 22:06:56.701: I/DEBUG(128):     r4 00000000  r5 42de4d6c  r6 415dc640  r7 411b7c58
04-03 22:06:56.701: I/DEBUG(128):     r8 411cfe30  r9 415dc8c8  sl 00000000  fp 00000001
04-03 22:06:56.701: I/DEBUG(128):     ip 40be2de4  sp 42de4d68  lr 402022f9  pc 401fe992  cpsr 60000030
04-03 22:06:56.701: I/DEBUG(128):     d0  0000000000000000  d1  000000007fc00000
04-03 22:06:56.701: I/DEBUG(128):     d2  3fb15bd900000000  d3  3f114ee7df28fa15
04-03 22:06:56.701: I/DEBUG(128):     d4  0000000000000000  d5  3ff0000000000000
04-03 22:06:56.701: I/DEBUG(128):     d6  0000000541000000  d7  7fc0000000000000
04-03 22:06:56.701: I/DEBUG(128):     d8  0000000000000000  d9  0000000000000000
04-03 22:06:56.701: I/DEBUG(128):     d10 0000000000000000  d11 0000000000000000 
```

到目前为止，我真的不知道出了什么问题以及如何解决它。有谁能够帮我？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:51:56.297

好的，感谢大家向我指出这个事实，该表面应该尽快被破坏。我有一个特定的情况，更多的视图相互显示，并且通过在错误的位置调用 surfaceView.setVisibility((View.INVISIBLE) ，实际上是我在破坏它。我把它放在最后，所以，它的工作方式我在关注：

```
myPictureCallback_JPG = new PictureCallback() {

@Override
public void onPictureTaken(byte[] bytes, Camera arg1) {
    Log.d(TAG, "bytes.length: " + bytes.length);
    String image = Base64.encodeToString(bytes, Base64.NO_WRAP);
    Log.i(TAG, "base64 image: " + image);
    String url = "javascript:takePicture('" + image + "');";

    wv.loadUrl(url);

    camera.stopPreview();
    camera.release();
    camera = null;
    surfaceView.setVisibility(View.INVISIBLE);
    wv.setVisibility(View.VISIBLE);
    viewControl.setVisibility(View.INVISIBLE);
}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:20:25.413

这解决了我的问题：

我正在使用 mcamera.setOneShotPreviewCallback(mPreviewCallback); 从相机中获取图片。

我已经通过 mCamera.takePicture(null, null,mPictureCallback); 改变了它。

在 mPictureCallBack 中，我处理 jpeg，在我的情况下，我拍摄另一张照片，重新开始拍摄照片之间的预览（stopPreview 和 startPreview）。

顺便说一句，我的预览是基于 Samples Api 17 /android-sdks/samples/android-17/ApiDemos/src/com/example/android/apis/graphics/CameraPreview 中提供的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:15:23.693

尝试这样做，它可能会起作用。覆盖活动中的“onPause”方法并调用“stopPreview()”。看起来表面在您调用 stopPreview() 之前就已被破坏，因此出现错误*“SurfaceTexture 已被放弃！”* .

```
@Override
public void onPause(Bundle savedInstanceState) {
    super.onPause(savedInstanceState);
    if(camera != null) 
        camera.stopPreview();
} 
```

当应用程序传递给相机驱动程序的 Surface（缓冲区）在驱动程序仍在访问它们时被破坏时，就会发生这种情况。

让我知道这是否有效。如果这不起作用，请将整个 logcat 从相机应用程序的开头发布到您关闭应用程序的位置。

# weka - 在 Weka 中实现元分类器的参数

> ID：15797310
> 
> 赞同：1
> 
> 时间：2013-04-03T20:21:37.620
> 
> 标签：weka, decision-tree, classification

如果我目前在我的 Java 代码中使用 Weka 决策树（或其他）分类器，如下所示：

```
// Get training and testing data.
Instances train = new Instances ("from training file");
train.setClassIndex(train.numAttributes() - 1);
Instances test = new Instances ("from testing file");        
test.setClassIndex(test.numAttributes() - 1);

// Set classifier.
Object obj = Class.forName("weka.classifiers.trees.J48").newInstance();
Classifier cls = (Classifier) Class.forName("weka.classifiers.trees.J48").cast(obj);

// Set parameters for classifier.      
String options = ("-C 0.05 -M 2");        
String[] optionsArray = options.split(" ");        
cls.setOptions(optionsArray);        

// Train classifier.    
cls.buildClassifier(train);        
Evaluation eval = new Evaluation(train);

// Test trained classifier.
eval.evaluateModel(cls, test); 
```

如果我想使用元分类器（例如 bagging）来尝试提升结果，会发生什么？在 Weka 的资源管理器中，如果我对训练和测试数据使用 bagging，分类器的参数字符串为：

```
weka.classifiers.meta.Bagging -P 100 -S 1 -num-slots 1 -I 10 -W weka.classifiers.trees.J48 -- -C 0.25 -M 2 
```

有谁知道这可能是什么代码表示？

理想情况下，我想将分类器和元分类器的类存储在数据库表中，即这样一行：

```
Object obj = Class.forName("weka.classifiers.trees.J48").newInstance(); 
```

变成：

```
Object obj = Class.forName(classifier.getWekaClass()).newInstance(); 
```

如果我将分类器从 J48 切换到 NB，参数也可以在数据库表中列出，以便于更改它们。

我相信这就是我正在寻找的，但是......

[http://weka.wikispaces.com/Use+WEKA+in+your+Java+code#Attribute selection-Meta-Classifier](http://weka.wikispaces.com/Use+WEKA+in+your+Java+code#Attribute%20selection-Meta-Classifier)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:44:22.747

[javadoc](http://weka.sourceforge.net/doc/weka/classifiers/meta/Bagging.html)建议您可以使用一种方法来`setClassifier()`设置要使用的分类器。除此之外，只需实例化类并相应地设置选项即可。

您当然可以将类名存储在数据库中并将它们用作示例。存储参数会有点棘手，因为每个分类器的数量和类型会有所不同——您必须提供一个可以正确序列化和反序列化它们的包装器。

# mysql - SQL 选择除

> ID：15797314
> 
> 赞同：0
> 
> 时间：2013-04-03T20:21:47.877
> 
> 标签：mysql, sql

我需要一点关于 SQL 的帮助，所以基本上我想要实现的是选择表中的所有内容，除了代码为 1,2 和 3 的地方。它适用于一个数字，但我不知道如何选择它三个数字。

到目前为止我的 SQL 语句：

```
SELECT * FROM images WHERE round='$round' and code != 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:22:34.530

```
SELECT *
FROM images
WHERE
  round='$round' and
  code NOT IN (1,2,3) 
```

或者：

```
SELECT *
FROM images
WHERE
  round='$round'
  AND NOT (code=1 OR code=2 OR code=3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:27:35.517

如果有这样的具体数据，这个脚本效率更高

```
SELECT * FROM images WHERE round='$round' and (code < 1 or code > 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:28:27.787

严格的方法是：

```
SELECT *
FROM images
WHERE round = '$round'
and code not in (1, 2, 3) 
```

但是，如果代码值不是负数，则您的示例可以简单地编码：

```
SELECT *
FROM images
WHERE round = '$round'
and code > 3 
```

# xcode - 架构 i386 的未定义符号：“__products”，引用自：

> ID：15797315
> 
> 赞同：0
> 
> 时间：2013-04-03T20:21:48.640
> 
> 标签：xcode, linker, compiler-errors

我可以使用一些帮助来解决我在尝试运行我的项目时不断遇到的错误。

我的项目已经通过应用内购买发布。在我的最新版本中，我尝试将 IAP 合并到另一个视图控制器中，但是当我想运行时，我得到两个 Apple Mach-O 链接器错误和一个 Dsymutil 错误。

自从我上次发布版本以来，我可能已经更新了 Xcode（到版本 4.6 (4H127)），但我不确定。

我已经检查过的一些事情：

*   Link Binary With Binaries 似乎仍然包含所有必要的框架；
*   编译源似乎包括我所有的 .m 文件；
*   我在代码中的任何地方都找不到 __products （我可以找到 _products ......：我用该名称创建了一个全局变量（之前是一个局部变量））
*   我也尝试在模拟器和设备上运行。

全局变量在 .h 文件中声明，该文件被导入到需要它的视图控制器中：extern NSArray *_products;

我不确定我的外部框架/库是否会造成任何麻烦。他们以前工作得很好：TestFlight、Appirater、CHCSVParser。

错误：

> ld“/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator/Mijn Kinderen.app/Mijn Kinderen”正常 i386 cd“/Users/jaspervandermaarel/Documents/Xcode projects/Mijn Kinderen" setenv IPHONEOS_DEPLOYMENT_TARGET 5.0 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin :/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/平台/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1。sdk -L/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator "-L/Users/jaspervandermaarel/Documents/Xcode projects/Mijn Kinderen/TestFlightSDK1-1""-L /Users/jaspervandermaarel/Documents/Xcode projects/Mijn Kinderen”-F/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator -filelist”/Users/jaspervandermaarel/Library/Developer /Xcode/DerivedData/Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Intermediates/Mijn Kinderen.build/Debug-iphonesimulator/Mijn Kinderen.build/Objects-normal/i386/Mijn Kinderen.LinkFileList" -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc - fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=5。0 -weak_framework Accounts -weak_framework Social -framework SystemConfiguration -framework CFNetwork -framework StoreKit -framework MessageUI -lz -framework UIKit -framework Foundation -framework CoreGraphics -framework CoreData -lTestFlight -o "/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData /Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator/Mijn Kinderen.app/Mijn Kinderen"

架构 i386 的未定义符号：“__products”，引用自：-[MKGebeurtenissenViewController voegToeGebeurtenis:] in MKGebeurtenissenViewController.o -[MKGebeurtenissenViewController alertView:clickedButtonAtIndex:] in MKGebeurtenissenViewController.o -[MKKinderenViewController alertView:clickedButtonAtIndex:] in MKKinderenViewController.o -[MKKinderenViewController productPurchased:] 在 MKKinderenViewController.o -[MKKinderenViewController voegKindToe:] 在 MKKinderenViewController.o -[MKGebeurtenissenViewController voegToeGebeurtenis:] 在 MKGebeurtenissenViewController.o -[MKGebeurtenissenViewController alertView:clickedButtonAtIndex:] 在 MKGebeurtenissenViewController.o -[MKKinderenViewController 中的 MKKinderenView:clickedButtonAtIndex:.o -[MKKinderenViewController productPurchased:] in MKKinderenViewController.o -[MKKinderenViewController voegKindToe:] in MKKinderenViewController.o ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用)

GenerateDSYMFile "/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator/Mijn Kinderen.app.dSYM" "/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen- dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator/Mijn Kinderen.app/Mijn Kinderen" cd "/Users/jaspervandermaarel/Documents/Xcode projects/Mijn Kinderen" setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator .platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer /Toolchains/XcodeDefault.xctoolchain/usr/bin/dsymutil"/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator/Mijn Kinderen.app/Mijn Kinderen"-o"/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen -dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator/Mijn Kinderen.app.dSYM"

错误：无法打开可执行文件'/Users/jaspervandermaarel/Library/Developer/Xcode/DerivedData/Mijn_Kinderen-dglsdifvjduysjbpixoiuyaekgky/Build/Products/Debug-iphonesimulator/Mijn Kinderen.app/Mijn Kinderen'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:50:43.010

并不是说“ `extern`”不好，您只需要在某个 .m 文件的顶部 声明***真正的***“ ”，否则该对象并没有真正分配到任何地方。`NSArray`

因此，如果您在 .h 文件中声明“ `extern`”变量，请在支持该 .h 文件的 .m 文件顶部声明真正的变量。

例如

```
NSArray * _products; 
```

在“ `@implementation`”位之前。并确保您在 .m 文件中的某处执行分配和初始化该变量*。*

# c - Windows 上的 C Socket 编程在侦听时出错但没有 errno

> ID：15797319
> 
> 赞同：0
> 
> 时间：2013-04-03T20:21:52.543
> 
> 标签：c, windows, sockets, networking

我已经用其他语言完成了套接字编程，但从未直接用 C 语言处理过。我正在尝试设置一个简单的服务器来监听 Windows 下的 8080 端口。我正在使用mingw附带的gcc来编译代码。

```
 #include <stdio.h>
    #include <string.h>
    #include <WinSock2.h>
    #include <stdint.h>
    #include <time.h>

        int main(void) {

        int s;      
        int len;
        char  buffer[1025];  
        struct sockaddr_in servAddr; 
        struct sockaddr_in clntAddr; 

        int clntAddrLen; //length of client socket addre

    //Build local (server) socket add

        memset(&servAddr, 0, sizeof(servAddr));
        servAddr.sin_family = AF_INET;
        servAddr.sin_port = htons(8080);
        servAddr.sin_addr.s_addr = htonl(INADDR_ANY);

       //create socket
        if((s=socket(AF_INET, SOCK_STREAM, 0) %lt; 0 )){
            perror("Error: Socket Failed!");
                printf("%d\n", errno);
            exit(1);
        }

    //bind socket to local address and port
        if((bind(s,(struct sockaddr*)&servAddr, sizeof(servAddr)) %lt; 0))
        {
            perror("Error:bind failed!");
                printf("%d\n", errno);
            exit(1);
        }

        for(;;)
        {
            len = recvfrom(s,buffer, sizeof(buffer),0,(struct sockaddr*)&clntAddr, &clntAddrLen);

            //send string
            sendto(s, buffer, len, 0, (struct sockaddr*)&clntAddr, sizeof(clntAddr));
        }

    } 

```

当我运行代码时，它会出错绑定但没有错误。此代码取自此线程并稍作修改：[C 中的 Windows Socket Programming](https://stackoverflow.com/questions/6769981/windows-socket-programming-in-c)

但是没有错误代码。输出显示没有错误。它在绑定时失败，我不知道为什么。我一直在拼凑一些不同的来源。我实际上只是想要一些可以在 Windows 上用 C 语言进行 hello world/3 次握手的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:25:17.990

由于[运算符优先级](http://en.cppreference.com/w/c/language/operator_precedence)，这是不正确的：

```
if((s=socket(AF_INET, SOCK_STREAM, 0) < 0 )){ 
```

as`<`的优先级高于`=`. 这意味着代码将`1`根据. 改成：`0``s``socket(AF_INET, SOCK_STREAM, 0) < 0`

```
if((s=socket(AF_INET, SOCK_STREAM, 0)) < 0 ){ 
```

用于[`WSAGetLastError()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741580%28v=vs.85%29.aspx)获取失败原因，而不是`errno`. 从 MSDN[`bind()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx)参考页面：

> 如果没有发生错误，则 bind 返回零。否则，它返回 SOCKET_ERROR，**并且可以通过调用 WSAGetLastError 来检索特定的错误代码。**

在 Windows 上[`WSAStartup()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms742213%28v=vs.85%29.aspx)，必须在调用任何套接字函数之前调用。

# javascript - 加载时以 HTML 形式显示数据

> ID：15797320
> 
> 赞同：0
> 
> 时间：2013-04-03T20:21:53.267
> 
> 标签：javascript, html, forms

N00b 警报；我知道足够危险，所以请原谅我的无知......我已经在这里和其他地方解决了所有相关问题，但我似乎无法理解答案中肯定包含的答案:-(

我将记录 id 发布到我希望表单显示相关记录内容的页面。我在 HEAD 部分使用此脚本正确获取记录（使用警报确认）（也调用了 jquery 1.9）：

```
<script type="text/javascript">
function getSelectedCustomer () {        
    ...use the id to get the right record...
    databaseAPI.callback = function() {
        if (databaseAPI.error) {
            alert("Database Error: " + databaseAPI.error);
            } 
        else {
            var customerRecord = databaseAPI.result;
            alert("Test Callback: " + new String(customerRecord.full_name));
            $("#quoteForm").load(customerRecord);
            }
        return;
        };
    databaseAPI.ajaxGet();        
    }
window.onload = getSelectedCustomer; 
</script> 
```

...以及要加载的 BODY 中的表单：

```
<form method="post" id="quoteForm" action="process_quote.php">
<table>
<tbody>
<tr>
    <td>Name</td>
    <td><input type="text" value="<?php $customerRecord['full_name']; ?>" name="full_name"></td>
</tr>
...other bits of the form...
<tr>
    <td>
        <input type="submit" value="Submit">
    </td>
</tr>
</tbody>
</table>
</form> 
```

我知道我错误地将各种东西混合在一起。有人可以让我弄清楚该怎么做吗？

迈克尔的回答解决了表格中的 INPUT 字段。没有提到我也有 SELECT 字段：

```
<select size="0" name="email_sent">
    <option value="No">No</option>
    <option value="Yes">Yes</option>
</select> 
```

将 INPUT 更改为 SELECT 有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:30:13.900

您缺少的是执行代码的位置。PHP 代码在发送到浏览器之前在服务器上执行。Javascript 然后由浏览器呈现。您不能在 Javascript 和 PHP 之间来回传递变量。

您想用 Javascript 注入名称。我看到您已经在使用 jQuery，因此已经为您完成了繁重的工作。`value="<?php $customerRecord['full_name']; ?>"`从 PHP 文件中删除，并替换`$("#quoteForm").load(customerRecord);`为`$("#quoteForm input[name='full_name']").val(customerRecord.full_name);`

应该可以工作，根据您的具体情况可能需要一些变化。至少它应该让你走上正确的道路。

# jenkins - 如何在 Java 中读取 envinject 设置的环境变量？

> ID：15797321
> 
> 赞同：2
> 
> 时间：2013-04-03T20:21:59.030
> 
> 标签：jenkins, environment-variables, jenkins-plugins, cloudbees

我正在运行由 Cloudbees 托管的 Jenkins 实例。我安装了 Jenkins EnvInject 插件并添加了 Pre-Build 步骤。我在“属性内容”下添加了一个变量：

`CERT_HOME=/private/{my-domain-name}/dev`

路径和实际证书位于`CERT_HOME`Cloudbees 提供的 WebDAV 目录下。

在 JUnit 测试中，我尝试像这样访问环境变量：

`private static final String CERT_HOME = System.getenv("CERT_HOME");`

但是，它返回 null。

在构建下，我确实看到了环境变量：

`CERT_HOME=/private/{my-domain-name}/dev`

如何在使用 EnvInject 插件设置的 JUnit 测试中读取环境变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T23:48:33.603

Maven surefire 尝试在分叉进程中为您提供一个干净的环境，看看使用[`environmentVariables`](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#environmentVariables)with`${env.CERT_HOME}`尝试通过它

# macos - 打开上下文菜单时，NPAPI mac 插件在 Chrome 中显示无响应消息

> ID：15797326
> 
> 赞同：0
> 
> 时间：2013-04-03T20:22:10.507
> 
> 标签：macos, google-chrome, npapi, browser-plugin

我正在开发一个基于 NPAPI 的插件，并且在 Chrome 中打开上下文菜单时一直在观察一个问题，显示一条错误消息，指出页面在打开 30 秒后没有响应。

我在 Flash Player 10.3（使用 NPAPI，11.x 版本使用 PPAPI）中观察到了同样的问题。

此外，这个问题只发生在 Chrome 上，当我们不在鼠标按下事件中时尝试打开上下文菜单不会采取任何行动，也不会看到任何菜单。

有什么想法吗？

谢谢，罗德里戈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T07:31:07.457

这只是OS X 上 Chrome 的 NPAPI 插件主机中的[一个错误。](http://crbug.com/30404)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:07:37.543

发生这种情况的原因是您绝不能阻塞主线程，并且当您打开菜单时，您正在阻塞主线程。由于主线程被阻塞，插件不会'与浏览器进程通信，浏览器进程会检测到它被冻结。

我能想象的唯一解决方案是让你在备用线程上做你需要的事情。如果您阻止主线程，无论您做什么，Chrome 都会始终显示该通知。

# html - css中气泡+箭头（三角形）周围的边框

> ID：15797328
> 
> 赞同：0
> 
> 时间：2013-04-03T20:22:11.373
> 
> 标签：html, css

我的箭头似乎没有边框。我一直在关注[这个来源](http://jsfiddle.net/ThinkingStiff/mek5Z/)，但我似乎无法让我的工作。所以我在这里做了一个[小提琴](http://jsfiddle.net/bkZ28/4/)来向你展示我正在使用的东西。

```
<div class="share-bubble">0</div>

.share-bubble{
  background-color: white;
  border-radius: 5px;
  box-shadow: 0 0 2px #B2B2B2;
  display: inline-block;
  padding: 6px 10px;
  position: relative;
  vertical-align: top;
  border: 1px solid #CCC;
}
.share-bubble::before {
    background-color: white;
    content: "\00a0";
    display: block;
    height: 8px;
    position: absolute;
    top: 11px;
    left: -5px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  10px;
} 
```

如何在箭头周围设置边框？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:28:17.680

给你 -[**演示**](http://jsfiddle.net/bkZ28/7/)

```
.share-bubble {
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 0 6px #B2B2B2;
    display: inline-block;
    padding: 10px 18px;
    position: relative;
    vertical-align: top;
    float: left;   
    margin: 5px 45px 5px 20px; 
}

.share-bubble::before {
    background-color: #fff;
    content: "\00a0";
    display: block;
    height: 16px;
    position: absolute;
    top: 11px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  20px;
    box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );
    left: -9px;  
}
```

```
 <div class="share-bubble">0</div>
```

您还可以通过单击“运行代码片段”来查看演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:34:44.017

您还必须在 .share-bubble::before 中添加一个 box-shadow。

# aop - 将捕获构造函数调用的切入点

> ID：15797331
> 
> 赞同：1
> 
> 时间：2013-04-03T20:22:23.063
> 
> 标签：aop, aspectj

我正在尝试定义一个切入点，它将捕获所有构造函数调用，而不管修饰符、返回类型或类如何。我使用了以下代码

`after():execution(* * * .new(..))`

我有一个错误：

> 令牌“*”、“（”应为语法错误。

有人可以建议什么可能是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:22:33.240

只需删除中间的星号“*”。为构造函数调用指定返回类型是没有意义的，因为很明显构造函数将始终返回为其定义的类的实例。

```
after() : execution(* *.new(..)) 
```

顺便说一句，您还应该删除“.new”之前的空格。

# ios - 如何在 iOS 中创建此自定义 UI

> ID：15797332
> 
> 赞同：2
> 
> 时间：2013-04-03T20:22:23.783
> 
> 标签：ios

我基本上是一名 Android 程序员，并且正在学习 iOS 平台上的一些技能。

我有一个 Android 应用程序，它有一个自定义 UI 组件，看起来像

![这个](https://i.stack.imgur.com/y4ah9.png).

我想为我的示例 iOS 应用程序创建一个类似的可重用 UI 组件。对于如何在 iOS 中执行此操作，我无法获得任何线索。

在 Android 上，我可以使用布局文件创建复合 UI 元素，但在 iOS 中，我不确定是否可以创建复合 UI 元素或扩展 UIView，然后以某种方式在其中布局文本和图像组件。

我正在寻找一些实现这一点的线索。我计划在屏幕上显示这些组件的多个实例，并从 Web 服务更新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:31:04.597

我推荐在 iOS 中称为 interface builder 的东西。

在这里，您可以直观地放置与用户交互的元素，并且您可以在布局结构时看到设计的外观。

教程可以看[http://mobile.tutsplus.com/tutorials/iphone/interface-builder/](http://mobile.tutsplus.com/tutorials/iphone/interface-builder/) 或者搜索“ios xib教程”

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:46:34.743

如果您希望它是一个简单的视图，那么您可以创建一个带有几个 UITextField 的 UIView 子类，并且可能创建一个或两个 UIImageView，它们都有插座，以便您的控制器可以对其进行更改。例如：

```
@interface StockInfo <UIView>

@property (nonatomic, strong, readonly) UITextField *ticker;
// You may want to make these numbers so that you can do calculations with them, and then update the text field automatically
@property (nonatomic, strong, readonly) UITextField *price;  
@property (nonatomic, strong, readonly) UITextField *priceChange;
// This could be automatically calculated based on the price and priceChange if appropriate
// It could also automatically show the Up or Down indicator
@property (nonatomic, strong, readonly) UITextField *percentChange;

@end 
```

然后，您的控制器可以创建一个实例并设置各种属性：

```
StockInfo *djia = [[StockInfo alloc] init];
djia.ticker = @"DJIA";
djia.price = @"14550.35" ;
djia.priceChange = @"-111.66";
// ... 
```

您可以在 Interface Builder 中创建视图中的实际 UI 元素，也可以在代码中创建。做什么是一种个人喜好。两者都有优点和缺点，在这种情况下，在代码中构建视图将非常容易，并且不需要您拥有两个文件即可使用控件。

# java - CodeModel：手动插入导入语句

> ID：15797338
> 
> 赞同：2
> 
> 时间：2013-04-03T20:22:41.350
> 
> 标签：java, code-generation, sun-codemodel

如何使用[CodeModel](http://codemodel.java.net/)手动插入导入语句？

我想在直接声明中使用[Arrays.toString(...) 。](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)

上下文：我在生成的代码中生成一个 toString() 方法，就像 Eclipse 一样。Arrays 类用于避免打印对我声明的数组的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:09:51.110

解决方案是引用该类：

```
JClass arrays = codeModel.ref(Arrays.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-24T14:10:48.530

我的解决方法是通过直接声明中的完整包声明来引用该类。

这是我目前正在编写的一小段代码，请注意完整的包声明。我还编写了一些助手或枚举类型来快速生成某个类的完整路径作为字符串。

```
save.addClickListener(event -> {
        if (binder.writeBeanIfValid(pojo())) {
            infoLabel.setText("Saved bean values: " + pojo());
        } else {
            com.vaadin.flow.data.binder.BinderValidationStatus<POJO> validate = binder.validate();
            String errorText = validate.getFieldValidationStatuses()
                    .stream().filter(com.vaadin.flow.data.binder.BindingValidationStatus::isError)
                    .map(com.vaadin.flow.data.binder.BindingValidationStatus::getMessage)
                    .map(java.util.Optional::get).distinct()
                    .collect(java.util.streamCollectors.joining(", "));
            infoLabel.setText("There are errors: " + errorText);
        }
    }); 
```

# javascript - 导航颜色问题

> ID：15797339
> 
> 赞同：1
> 
> 时间：2013-04-03T20:22:43.547
> 
> 标签：javascript, css

您好，我在尝试调整以适应我的需要的模板时遇到问题。问题是我不确定我的问题是 js 还是 css...当您将鼠标悬停（文本颜色更改）或进入子菜单（背景颜色更改）时，我正在尝试更改导航上的颜色。该模板使用了一个名为 hoverIntent.js 和 css 的插件。在两者之间，我找不到任何类型或种类的 a:hover 颜色调整。该网站是[premium-posts.com](http://premium-posts.com/premium_posts/zeni-files/HTML/index.html) 任何和所有的帮助将不胜感激。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:29:08.347

在检查元素打开时将鼠标悬停在您的导航元素之一上，您将看到颜色的来源：skin.css:18。

# javascript - 在画布上为线条着色

> ID：15797340
> 
> 赞同：0
> 
> 时间：2013-04-03T20:22:44.733
> 
> 标签：javascript, colors, html5-canvas, lines

我正在尝试为以下线条着色，但我的画布要么为所有线条着色，要么根本不着色。任何帮助，将不胜感激

```
canvas.save();
canvas.scale(1, 0.75);
canvas.beginPath();
canvas.arc(100, 95, 8, 0, Math.PI * 2, false);
canvas.stroke();
canvas.strokeStyle= "red";
canvas.closePath();
canvas.restore(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:37:53.310

您正在使用画布，我假设您的意思是上下文。

canvas=getElementById("mycanvas");

context.getContext("2d");

几点： 1\. 用context.beginPath()开始1次或多次draw；2\. 当您将上下文告知 context.stroke() 时，它将使用您设置的**最后一个**strokeStyle（之前的 strokeStyles 被忽略） 3\. 总是给 context.stroke() 以将您绘制的线条、弧线等物理应用到画布上.

```
// draw a red circle
context.beginPath();
context.arc(100, 95, 8, 0, Math.PI * 2, false);
context.strokeStyle="red";
context.stroke();

//then begin a new path and draw a blue circle
context.beginPath();
context.arc(150, 95, 8, 0, Math.PI * 2, false);
context.strokeStyle="blue";
context.stroke(); 
```

# c++ - 在 64 位（或 32 位）Windows 上以 32 位进程访问 >2、3、4GB 文件

> ID：15797341
> 
> 赞同：6
> 
> 时间：2013-04-03T20:22:46.427
> 
> 标签：c++, windows, memory-management, out-of-memory, memory-mapped-files

*免责声明：我为这个问题的冗长道歉（不过我认为这是一个有趣的问题！），但我无法弄清楚如何更简洁地表达它。*

对于解决在 64 位 Windows 7 上的 32 位进程中访问多 GB 文件的问题，我已经进行了数小时的研究，从AWE`/LARGEADDRESSAWARE`到`VirtualAllocEx`AWE。我对在 Windows 中编写多视图内存映射系统（ 、 等）感到有些自在`CreateFileMapping`，`MapViewOfFile`但又无法完全摆脱对这个问题有更优雅的解决方案的感觉。此外，我非常了解 Boost 的进程间和 iostream 模板，尽管它们看起来相当轻量级，需要类似的努力来编写仅使用 Windows API 调用的系统（更不用说我已经有内存的事实了——使用 Windows API 调用半实现的映射架构）。

我正在尝试处理大型数据集。该程序依赖于预编译的 32 位库，这就是为什么目前该程序本身也在 32 位进程中运行，即使系统是 64 位的，具有 64 位操作系统。我知道有一些方法可以围绕它添加包装器库，但是，鉴于它是更大代码库的一部分，这确实是一项艰巨的任务。我将二进制标头设置为允许`/LARGEADDRESSAWARE`（以减少我的内核空间为代价？），这样我每个进程可以获得大约 2-3 GB 的可寻址内存，给予或接受（取决于堆碎片等）。

问题是：数据集是 4+GB，并且运行 DSP 算法，需要对文件进行本质上的随机访问。指向从文件生成的对象的指针在 C# 中处理，但文件本身在 C++ 中加载到内存中（使用此部分内存映射系统）（它是 P/Invoked）。因此，不幸的是，我认为解决方案并不像简单地调整窗口以访问我需要访问的文件部分那么简单，因为本质上我仍然希望将整个文件抽象为一个指针，我可以从中调用方法访问文件中几乎任何位置的数据。

显然，大多数内存映射架构都依赖于将单个进程拆分为多个进程。因此，例如，我将使用 3 个进程访问一个 6 GB 的文件，每个进程都有一个 2 GB 的文件窗口。然后我需要添加大量逻辑来从这些不同的窗口/进程中提取和重组数据。 `VirtualAllocEx`显然提供了一种增加虚拟地址空间的方法，但我仍然不完全确定这是否是最好的方法。

但是，假设我希望这个程序能够像 64 位系统上的单个 64 位进程一样“轻松”运行。假设我不关心抖动，我只想能够操作系统上的一个大文件，即使任何时候只有 500 MB 加载到物理 RAM 中。有没有什么方法可以在不必手动编写有点荒谬的手动记忆系统的情况下获得此功能？或者，有没有比我迄今为止通过结合 SO 和互联网找到的更好的方法？

这就引出了第二个问题：有没有办法限制这个进程使用多少物理 RAM？例如，如果我想将进程限制为在任何时候仅将 500 MB 加载到物理 RAM 中（同时保持多 GB 文件在磁​​盘上分页）？

对于这个冗长的问题，我感到很抱歉，但我觉得这似乎是对我在 SO 和整个网络上发现的许多问题（只有部分答案）的一个不错的总结。我希望这可以成为一个可以充实明确答案（或至少一些优点/缺点）的领域，并且我们都可以在此过程中学到一些有价值的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:53:27.930

您可以编写一个访问器类，给它一个基地址和一个长度。如果出现错误条件（超出范围等），它会返回数据或抛出异常（或者您想通知错误条件）。

然后，任何时候你需要从文件中读取，访问器对象可以[`SetFilePointerEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365542%28v=vs.85%29.aspx)在调用之前使用`ReadFile()`。然后，您可以将访问器类传递给您在读取文件时创建的任何对象的构造函数。然后对象使用访问器类从文件中读取数据。然后它将数据返回给对象的构造函数，该构造函数将其解析为对象数据。

如果稍后您能够编译为 64 位，您可以更改（或扩展）访问器类以改为从内存中读取。

至于限制进程使用的 RAM 量.. 这主要是确保 A）你没有内存泄漏（尤其是淫秽的）和 B）摧毁你现在不需要的对象。即使您稍后会需要它，但数据不会改变......只需销毁对象。然后在您确实需要时重新创建它，允许它从文件中重新读取数据。

# javascript - 压缩“公共”标识符

> ID：15797342
> 
> 赞同：2
> 
> 时间：2013-04-03T20:22:53.090
> 
> 标签：javascript, google-closure-compiler

编译前：

```
function Foo(){
    this.init = function(){
        var bar = new Bar();
        bar.init();
    };
}

function Bar(){
    this.init = function(){
        console.log('Hello');
    };
}

$(window).load(function(){
    var foo;
    foo = new Foo();
    foo.init();
}); 
```

运行闭包编译器和格式化后：

```
function Foo(){
    this.init=function(){
        (new Bar).init()
        }
    }

function Bar(){
    this.init=function(){
        console.log("Hello")
        }
    }

$(window).load(function(){
    (new Foo).init()
    }); 
```

我怎样才能让编译器压缩'init'标识符，所以我们有例如'a'而不是'init'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:24:01.667

正如其他人所建议的那样，您必须启用 ADVANCED_OPTIMIZATIONS，如此[处所述](https://developers.google.com/closure/compiler/docs/api-tutorial3)。

需要注意的是，即使使用高级编译，某些属性也不会重命名 - 在[常见问题解答](https://code.google.com/p/closure-compiler/wiki/FAQ#How_do_I_write_an_externs_file?)中对此进行了详细介绍

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-03T20:42:01.020

你不想那样做。`init`是一种公共方法。调用`init`的代码期望它被这样命名。想象一下，如果您想使用 jQuery 的压缩版本，但所有方法名称都被缩小了。“.each() 的简称是什么？” 它当然可以完成，但它会适得其反并且会破坏代码的可靠性。

作为另一个简短的轶事，Google Maps JavaScript API 被缩小了。LatLng 对象的属性被缩小为 $a 和 $b 之类的东西。我直接引用了这些属性来访问纬度和经度值。然后 Google 重建了文件，属性名称更改为其他名称！我没有引用缩小的属性，而是使用 API 文档来查找具有一致的预期名称的*公共方法：getLatitude() 和 getLongitude()。*这些方法通过它们的缩小名称引用内部属性，并简单地返回它们的值。如果方法名称包含在缩小中，我会回到原来的问题。

# c++ - Makefile 错误：没有这样的文件或目录

> ID：15797343
> 
> 赞同：0
> 
> 时间：2013-04-03T20:22:56.030
> 
> 标签：c++, makefile

我有这个目录结构：

*   `.\src`包含所有源代码（`.h`和`.cpp`）
*   `.\bin`应该有所有的`.o`和`.bin`
*   `.`拥有`Makefile`

这是我当前的 Makefile：

```
CFLAGS = -Wall -pedantic -g
CC = g++
EXEC = flrfile
SRC_DIR = src
BIN_DIR = bin
SOURCES := $(wildcard $(SRC_DIR)/*.cpp)
OBJ := $(patsubst $(SRC_DIR)/%,%,$(SOURCES))
OBJ := $(patsubst %.cpp,%.o,$(OBJ))
OBJ := $(addprefix ../$(BIN_DIR)/,$(OBJ))

all: flrfile

../$(BIN_DIR)/%.o: $(SRC_DIR)/%.cpp $(SRC_DIR)/%.h
    $(CC) $(CFLAGS) -c $(SRC_DIR)/%.cpp -o $@

$(EXEC): $(OBJ)
    @mkdir -p $(BIN_DIR)
    $(CC) $(CFLAGS) $(BIN_DIR)/$(OBJ) -o $(BIN_DIR)/$(EXEC)

.PHONY : clean

clean:
    -rm -rf $(BIN_DIR) 
```

当我运行时，`make`我收到此错误：

```
g++ -Wall -pedantic -g -c src/%.cpp -o ../bin/FixedLengthFieldsRecord.o
g++: error: src/%.cpp: No such file or directory
g++: fatal error: no input files
compilation terminated.
make: *** [../bin/FixedLengthFieldsRecord.o] Error 4 
```

为什么是这样？老实说，我对 Makefile 几乎没有了解...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:34:57.793

正确的编译行应该是这样的：

```
$(BIN_DIR)/%.o: $(SRC_DIR)/%.cpp $(SRC_DIR)/%.h
    $(CXX) -o $@ -c $< $(CFLAGS) 
```

这意味着：“对于与 $(BIN_DIR) 中的模式“%.o”匹配的每个文件，使用关联的 $(SRC_DIR)/%.cpp 作为参数对其进行编译（第一个依赖项）

附加评论：我怀疑缺少一些依赖项：通常，.c 或 cpp 源文件**不仅**依赖于相应的头文件，还可能包含项目中的其他头文件。

# javascript - 在 ruby on rails 中，如何在客户端正确显示时间？

> ID：15797344
> 
> 赞同：0
> 
> 时间：2013-04-03T20:22:56.860
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, http

我有一个`ruby-on-rails`实现`JSON` `REST`API 的服务器，例如

`http://my-server.com/end_of_promotion.json`

目前，答案是：

```
{
    date: "2013-03-31T14:29:16Z"
} 
```

在我的`model`， date 是类型的属性：`datetime`。

现在，我希望客户端在用户时区显示这个日期。我应该如何设计 API 和客户端代码来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:32:15.783

如果没有关于您的情况的更多详细信息，这里有一些有用的资源。

对于 Rails 上的时区，请在此处查看您可以使用的各种选项：http: [//api.rubyonrails.org/classes/ActiveSupport/TimeZone.html](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)

要为您的用户格式化，请查看 strftime。文档：[http ://apidock.com/ruby/Time/strftime](http://apidock.com/ruby/Time/strftime)

帮助您生成 strftime 代码的网站：[http://strftime.net/](http://strftime.net/)

I18n / 国际化指南：guides.rubyonrails.org/i18n.html（感谢@house9）

# java - toRightOf 在 android 布局中无法按预期工作

> ID：15797348
> 
> 赞同：2
> 
> 时间：2013-04-03T20:23:08.710
> 
> 标签：java, android, xml

这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/outerBox"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" >

<GridLayout
    android:id="@+id/checksHere"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:columnCount="5"
    android:columnWidth="100dp" />

<GridLayout
    android:id="@+id/textHere"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/checksHere"
    android:columnCount="4" />

<Button
    android:id="@+id/submitButton"
    android:layout_width="185dip"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/outerBox"
    android:layout_below="@id/textHere"
    android:layout_margin="3dip"
    android:onClick="submit"
    android:text="@string/submit" />

<Button
    android:id="@+id/cancelButton"
    android:layout_width="185dip"
    android:layout_height="wrap_content"
    android:layout_below="@id/textHere"
    android:layout_margin="3dip"
    android:layout_toRightOf="@id/submitButton"
    android:onClick="next"
    android:text="@string/cancel" />

<Button
    android:id="@+id/backButton"
    android:layout_width="185dip"
    android:layout_height="wrap_content"
    android:layout_below="@id/textHere"
    android:layout_margin="3dip"
    android:layout_toRightOf="@id/cancelButton"
    android:onClick="next"
    android:text="test" />

</RelativeLayout> 
```

我有一个相对的布局。该布局在顶部有两个网格布局，可以在我的 java 代码中填充文本或检查。它们可以是空白的。然后我有三个按钮。前两个按钮在屏幕上显示得很好。第三个按钮位于第一个按钮的顶部： ![在此处输入图像描述](https://i.stack.imgur.com/nrlcH.png)

我将第三个按钮 (backButton) 更改为 toRightOf submitButton 只是为了看看会发生什么。正如预期的那样，它位于 cancelButton 之上。我觉得我错过了一个简单的基本原理，但我一直无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T20:00:35.003

好吧，这不一定能解决RelativeLayout 的问题，但您总是可以将三个按钮组合在一个LinearLayout 中。这应该可以防止按钮重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:40:29.490

我不确定，但是在 Eclipse 中进行测试时，将所有按钮更改`android:layout_width="185dip"`为`android:layout_width="wrap_content"`对我有用。

# ios - 如何/为什么在故事板之外创建视图

> ID：15797355
> 
> 赞同：-3
> 
> 时间：2013-04-03T20:23:27.843
> 
> 标签：ios, uistoryboard

我从 Apple 的文档中阅读了一些关于状态保存和恢复的信息，并且想知道在同一个应用程序中同时使用情节提要和 xib。我的问题有两个部分：

首先-使用xib作为视图而不是仅仅在情节提要中创建它有什么好处？我唯一能想到的是，当多个选项卡或导航控制器指向同一个 ViewController 类时，您不希望情节提要中出现混乱的 segue 箭头。

第二-如何在不使用 xib 或情节提要的情况下创建和显示模态 TableViewController（换句话说，在代码中创建视图，而不使用 Interface Builder xib 文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:30:18.100

回答你的第二个问题：

# 这很容易，这就是/应该这样做

只需创建一个`UITableViewController`类，用你通常会做的任何事情来填充方法。然后，使用它：

```
 //Get Table View Controller
 MYTableViewController *tconn = [[MYTableViewController alloc] init];
 //Optional, add navigation controller
 UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:tconn];
 //actually present it
 [self presentModalViewController:navCon animated:YES]; 
```

# 现在，回到第一个问题

使用 Xib 代替 Storyboard 的主要优势在于兼容性。iOS5+ 支持 Storyboards，一切都支持 Xib 的。

# iphone - 使用其他人的 Mac 将应用程序发布到 App Store？

> ID：15797357
> 
> 赞同：4
> 
> 时间：2013-04-03T20:23:36.633
> 
> 标签：iphone, xcode, app-store

我使用 HTML5 / JavaScript 构建了一个应用程序，它作为移动网络应用程序运行良好，但我想将它发布到 Apple App Store。

我没有 Macbook，所以我将依靠使用朋友的 Macbook。当我正在使用的 Macbook 向其他人注册时，我会在设置 Xcode 和 iTunes 连接等方面遇到任何不可预见的问题吗？

以前没有这样做过，我宁愿第一次就做好，所以我只是想知道是否有其他人在尝试这样做时发现了任何“陷阱”？

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:32:04.600

您需要从您朋友的 Mac 请求开发者密钥。这意味着他的 Mac 将在他的钥匙串中拥有私钥。为了您自己的安全，您需要将这些私钥复制到安全的地方（您自己的闪存驱动器、Dropbox 等），然后将它们从您朋友的 Mac 中删除。

此外，每次您想要更新您的应用程序时，您都需要恢复这些密钥。

如果您的朋友尚未在他的 Mac 上安装开发者工具，这还不包括您下载和安装开发者工具所花费的时间。

相信我，任何 iOS 开发人员都不喜欢密钥管理，通过在“不受信任”的系统上尝试此操作，您可能会面临额外的工作和/或安全风险。

我强烈建议您考虑购买自己的 Mac。

但是，如果这根本不是可选的，请至少坚持让您的朋友为您设置一个新帐户。使用此帐户部署您的应用程序。完成后，备份你的整个钥匙串（这样你就不会意外错过任何重要的东西），然后让你的朋友删除你的个人资料。这是在其他人的 Mac 上执行此操作的最安全方法。

有关在 OS X 上备份钥匙串的信息，请参阅[http://support.apple.com/kb/PH4077 。](http://support.apple.com/kb/PH4077)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:36:20.020

这当然是可能的。我建议在您朋友的 Mac 上创建一个新用户帐户。这将使您拥有与朋友的环境分开的自己的环境。所有证书和私钥都将在您的个人登录钥匙串中（任何配置文件都将是系统范围的，但没有密钥和证书将无法使用）。

我建议不要将密钥和证书放在您的登录钥匙串上，而是创建另一个钥匙串并将这些东西放在那里。使用不同的密码保护该钥匙串。

# c# - 读取文件详细信息（不依赖于语言）

> ID：15797359
> 
> 赞同：0
> 
> 时间：2013-04-03T20:23:46.640
> 
> 标签：c#

在 C# 中，我想从特定文件中读取文件详细信息。
我发现了一个有趣的线程：[Read/Write 'Extended' file properties (C#)](https://stackoverflow.com/questions/220097/read-write-extended-file-properties-c)

它使用对包含在 shell32.dll 中的文件夹 shell 对象的 GetDetailsOf() 方法的调用。
它工作正常，但我有一个问题：根据操作系统语言，标题字符串永远不会相同......（英文Windows上的文件名属性的'Name'，法文Windows上的'Nom'）。
因此，使用属性名称检索特定值并不容易，因为它会根据语言而变化......
有没有办法轻松处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:30:58.883

某些属性可通过 FileInfo 对象获得。例如，如果您想要文件的创建时间，您可以执行以下操作：

```
Fileinfo myFileInfo = new Fileinfo(@"C:\path\to\file");
DateTime ftime = myFileInfo.CreationTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:31:41.320

[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类是否不足以满足您的需求？

```
FileInfo info = new FileInfo("fileName");
var name = info.Name;
var creationTime = info.CreationTime;
// etc ... 
```

如果没有，请详细说明您想从文件中读取哪些属性。

* * *

**更新我的答案：**

我不知道允许读取*任何*类型的文档属性的库'

但是这里有一些你说的格式的方法，

**PDF**：

[使用 iTextSharp 从 PDF 中提取附加元数据](https://stackoverflow.com/questions/4928441/extracting-additional-metadata-from-a-pdf-using-itextsharp)

[使用 iTextSharp 读取/修改 PDF 元数据](https://stackoverflow.com/questions/2761646/read-modify-pdf-metadata-using-itextsharp)

因此，*[iText](http://itextpdf.com/) ® 是一个允许您创建和操作 PDF 文档的库*（来自他们的网站）

**Office**：（MS的第一个链接规定它适用于Word和Excel文档）

[如何：读取和写入文档属性](http://msdn.microsoft.com/en-us/library/vstudio/4e0tda25.aspx)

[在 C# 中列出 Word 文档的属性](https://stackoverflow.com/questions/8047734/listing-properties-of-a-word-document-in-c-sharp)

# php - 通过 URL 将文件保存在 php 中

> ID：15797360
> 
> 赞同：0
> 
> 时间：2013-04-03T20:23:46.617
> 
> 标签：php, file-upload, curl

我有一个应该将文件保存到我的服务器的函数，该函数需要两个参数，文件 url 和文件名，它将在数据库中保存

```
function saveFile($url, $filename){

    $location = "http://138.90.30.311/docs/";
    $ext = pathinfo($url, PATHINFO_EXTENSION);
    $file_path = $location.''.$filename.'.'.$ext;
    $ch = curl_init($url);
    $fp = fopen($file_path, 'wb');  //Error here (line 16)
    curl_setopt($ch, CURLOPT_FILE, $fp);  //Error here (line 17)
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_exec($ch);
    curl_close($ch);
    fclose($fp);        
} 
```

传入参数的示例是

```
filename = 14426
url = http://u.goal.com/269000/269085_hp_thumb.jpg 
```

我让它工作了一次，但它似乎不再保存文件，我收到 3 个错误

```
Warning: fopen(http://138.90.30.311/docs/14426.jpg) [function.fopen]: failed to open stream: HTTP wrapper does not support writeable connections in C:\wamp\www\functions.php on line 16

Warning: curl_setopt(): supplied argument is not a valid File-Handle resource in C:\wamp\www\functions.php on line 17 
```

在第二个错误之后，我得到了很多垃圾回显到浏览器

```
Warning: fclose() expects parameter 1 to be resource, boolean given in C:\wamp\www\functions.php on line 21 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:33:24.443

如错误消息所述，您无法将文件写入网站（使用 HTTP）。如果您考虑一下，这是一件好事，否则我可以在未经您许可的情况下将文件写入您的网站！

您提供给`fopen`（特别`$location`是）的文件路径需要是运行 PHP 的服务器上某处的纯文件路径。

# iphone - 使用 iPhone 5 进行 Retina 3,5" 调试

> ID：15797368
> 
> 赞同：-9
> 
> 时间：2013-04-03T20:24:28.817
> 
> 标签：iphone, ios, debugging, retina-display

我最近把我的 iPhone 4 给了一个朋友，所以我没有 Retina 3,5" 设备了。我想知道是否有一种方法不需要太多调整应用程序代码就可以在 iPhone 5 上获得 3,5" 版本（比如未优化的应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:26:33.477

如果您不包含（或暂时删除）`Default-568h@2x.png`if 将作为 3,5" 应用程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:27:34.037

最简单的方法是在 iPhone 模拟器上进行测试，并将硬件从视网膜 4 英寸更改为视网膜 3.5 英寸！

或者让你的朋友借他们的手机在涉及证书的设备上进行测试，这样会稍微不方便。

无论哪种方式，在多个设备上进行测试都不会太难。此外，如果您的 iPod touch 早于第 5 代，也可以使用。

通常，您可以在线购买廉价的二手 iPod touch 用于开发测试。祝你好运！

# php - 表单字段集已停止向数据库传递信息

> ID：15797372
> 
> 赞同：0
> 
> 时间：2013-04-03T20:24:55.550
> 
> 标签：php, jquery, forms

我有三组由 jQuery 和一个选择列表显示和隐藏的表单字段。

它们的显示就像我想要的那样。但是现在从前两组传递给 php 代码的信息正在丢失，如果底部的三个字段集是使用的集合。信息传递没有问题。

这是页面下方类似名称的项目擦除页面上部项目信息的情况吗？

我该如何解决这个问题？

```
 <ul id="options">
                <li>
                    <h2>Your guest names</h2>
                    <label for="GuestName">Guest:</label>&nbsp;<input type="text" style="width:180px;" name="GuestName" id="GuestName" /><br/>
                </li>
                <li>
                    <h2>Your guest names</h2>
                    <label for="GuestName">Guest:</label>&nbsp;<input type="text" style="width:180px;" name="GuestName" id="GuestName" /><br/>
                    <label for="GuestName2">Guest 2:</label>&nbsp;<input type="text" style="width:180px;" name="GuestName2" id="GuestName2" /><br/>
                </li>
                <li>
                    <h2>Your guest names</h2>
                    <label for="GuestName">Guest:</label>&nbsp;<input type="text" style="width:180px;" name="GuestName" id="GuestName" /><br/>
                    <label for="GuestName2">Guest 2:</label>&nbsp;<input type="text" style="width:180px;" name="GuestName2" id="GuestName2" /><br/>
                    <label for="GuestName3">Guest 3:</label>&nbsp;<input type="text" style="width:180px;" name="GuestName3" id="GuestName3" /><br/>
                </li>

            </ul>
            <script>
                $("li").hide();

                $("#numberattending").change(function() {
                    var index = $(this).children(":selected").index();
                $("#options").children().hide().eq(index).show();
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:27:35.747

当您隐藏这些字段时，请尝试禁用它们。这将阻止它们与表单一起提交。当然，您必须在显示它们时重新启用它们。

尝试这些更改（您的代码已注释，替换为新代码）：

```
// $("#options").children().hide().eq(index).show();
$("#options").children().hide().find('input').prop('disabled', true);
$("#options").children().eq(index).show().find('input').prop('disabled', false); 
```

* * *

更好的方法可能是让 jQuery 在您调用时触发“隐藏”事件，`hide()`并在发生这种情况时禁用输入（对于 类似`show()`）：

```
// taken from http://stackoverflow.com/a/2857952/259457
var _oldhide = $.fn.hide;
$.fn.hide = function(speed, callback) {
    $(this).trigger('hide');
    return _oldhide.apply(this,arguments);
}

$('#options li').on('hide', function() {
    $(this).find('input').prop('disabled', true);
}); 
```

`show()`然后，您可以使您的代码与其余代码相同，并且当您调用或`hide()`在`li`标签上时，这些字段将自动禁用/启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:27:58.220

> 这是页面下方类似名称的项目擦除页面上部项目信息的情况吗？

是的..当表单发布时..表单中的字段按其名称发布，在您的情况下，三个输入具有相同的名称，因此它正在替换并且只有一个被发布...一种方法是给它是一个独特的名字..

或禁用除该字段以外的所有其他字段，以免发布..

试试这个

```
 $("#numberattending").change(function() {
      var index = $(this).children(":selected").index();
      $("#options").find('input').prop('disabled',true);
      $("#options").children().hide().eq(index).show().find('input').prop('disabled',false);
 }); 
```

# mongodb - 在 MongoDB 中如何只返回数组的一部分？

> ID：15797379
> 
> 赞同：4
> 
> 时间：2013-04-03T20:25:15.793
> 
> 标签：mongodb, pymongo

考虑集合“fruits”，其中我有这个文档（我正在使用 Python 的 pymongo 驱动程序，顺便说一句）：

```
{
    '_id'       : 'lemons',
    'weight'    : 58,
    'shape'     : 'oval',
    'countries' : ['Mexico', 'Turkey', 'Argentina', 'SAfrica', 'US']
} 
```

现在，如果我只想获取“国家”字段，则此查询可以正常工作：

```
In [1]: find_one('lemons', { 'countries' : 1, '_id' : 0 })
Out[1]: {u'countries': [u'Mexico', u'Turkey', u'Argentina', u'SAfrica', u'US']} 
```

但事实证明，我真正需要的只是几个顶级国家的列表，而不是全部，所以我使用“$slice”而不是普通的 True/1：

```
In [239]: c.find_one('lemons', { 'countries' : { '$slice' : [0, 3] }, '_id' : 0 })
Out[239]: 
{u'countries': [u'Mexico', u'Turkey', u'Argentina'],
 u'shape': u'oval',
 u'weight': 58} 
```

好吧，国家数量减少了，但现在它给了我很多其他不相关的信息！

**问：**有没有办法只显示我要求的那些字段？另外将 '_id' 列为例外很好，因为始终显示此字段，但我不能确定其他字段，因为 MongoDB 是无方案的，如果需要，我打算使用此功能添加其他字段。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T21:04:01.703

您是否尝试过添加另一个包含投影？我认为您也许可以添加一些琐碎的东西，例如 foo:1 （这不是一个真实的字段），它应该可以工作。

像这样：

```
{ 'countries' : { '$slice' : [0, 3] }, '_id' : 0, foo : 1 } 
```

如果它不起作用，我建议向 mongo 提交一个错误。他们实际上非常擅长响应错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:45:30.660

这很奇怪，因为这不是在 mongo 控制台中运行时的行为。

您是否尝试过放入`'lemons'`花括号以使其成为有效的 JSON 语法？

```
find_one({'_id':'lemons'}, { 'countries' : 1, '_id' : 0 }) 
```

在我看来，它将您的 $slice 投影应用于所有字段，因此 pymongo 驱动程序可能存在一些奇怪的语法问题

# delphi - Delphi 上传 Ftp

> ID：15797380
> 
> 赞同：1
> 
> 时间：2013-04-03T20:25:15.907
> 
> 标签：delphi, delphi-7

好吧，我尝试在 ftp 上上传 delphi，使用此代码，它连接到服务器，但是当需要上传文件时，程序没有响应：

```
idftp1.host:='host';    
idftp1.username:='username';    
idftp1.passoword:='password';    
idftp1.port:='port';    

idftp1.connect;
idftp1.put('c:\testfile\testfile.txt','testfilee.html');    
idftp1.quit;    
idftp1.disconnect 
```

有什么建议么？谢谢

# c# - 从 Active Directory 中检索 OU

> ID：15797387
> 
> 赞同：0
> 
> 时间：2013-04-03T20:25:31.597
> 
> 标签：c#, active-directory, ldap, directoryservices

我正在尝试从活动目录中获取 OU 的列表。不幸的是，即使我知道“myApp”域组件中有 2 个 OU，我的搜索也总是没有任何结果。

```
using (var entry = new DirectoryEntry("LDAP://myServer:1111/DC=myApp,DC=myDomain,DC=com", Username, Password)) {
    using (var searcher = new DirectorySearcher()) {
        searcher.SearchRoot = entry;
        searcher.Filter = "(objectCategory=Organizational-Unit)";
        searcher.PropertiesToLoad.Add("name");

        //foo never gets results.  :(
        var foo = searcher.FindAll();
    }
} 
```

我尝试按照上一个 StackOverflow[问题](https://stackoverflow.com/questions/2906172/active-directory-list-ous)中的代码进行操作，但是没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T17:51:20.380

我用这样的东西。它使用路径检索字典名称中的所有 OU，只需正确更改 SearchScope。

```
public Dictionary<string, string> GetOUInfo(SearchScope eSearchScope)
    {
        Dictionary<string, string> retValues = new Dictionary<string, string>();

        try
        {
            DirectoryEntry oDirectoryEntry = new DirectoryEntry("LDAP://myServer:1111/DC=myApp,DC=myDomain,DC=com", Username, Password);
            DirectorySearcher oDirectorySearcher = new DirectorySearcher(oDirectoryEntry,
                "(objectCategory=organizationalUnit)", null, eSearchScope);

            SearchResultCollection oSearchResultCollection = oDirectorySearcher.FindAll();
            foreach (SearchResult item in oSearchResultCollection)
            {
                string name = item.Properties["name"][0].ToString();
                string path = item.GetDirectoryEntry().Path;
                retValues.Add(path, name);
            }
        }
        catch (Exception ex)
        {
        }

        return retValues;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:04:26.600

1）您确定基础搜索`"DC=myApp,DC=myDomain,DC=com"`吗？是`"myApp"`域组件吗？

2）您可以尝试指定搜索范围吗？

```
searcher.SearchScope = SearchScope.Subtree; 
```

3)`"(objectCategory=Organizational-Unit)"`是 Active-Directory 理解的快捷方式，但实际上 objectCategory 属性是一个专有名称 (DN)，而 OU 的真正值是 : `CN=Organizational-Unit,CN=Schema,CN=Configuration,domain root DN`。

你能试试这个`"(objectClas=Organizational-Unit)"`更常见的过滤器吗？

* * *

你可以在命令行上试试这个吗？

```
C:\temp>ldifde -f c:\temp\out.txt -d "DC=myApp,DC=myDomain,DC=com" -r "(objectClass=organizationalUnit)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T05:29:58.570

使用它会起作用

```
PrincipalContext yourOU = new PrincipalContext(ContextType.Domain, "mycompany.com", "OU=Marketing,OU=Corporate,DC=mycompany,DC=com");
GroupPrincipal findAllGroups = new GroupPrincipal(yourOU, "*");
PrincipalSearcher ps = new PrincipalSearcher(findAllGroups);
foreach (var group in ps.FindAll())
{
Console.WriteLine(group.DistinguishedName);
} 
```

# git - 如何找出哪个提交先进行？

> ID：15797388
> 
> 赞同：0
> 
> 时间：2013-04-03T20:25:38.923
> 
> 标签：git, git-log

**有两个提交 SHA1，我如何在不*手动*分析 git 日志的情况下获得哪个先提交？**

*请注意，我不是想找出哪个是另一个的祖先，我想知道哪个是第一个被推送的。*

我想按 git 历史中的时间顺序而不是按提交日期来获取它。欢迎使用任何方法，但首选直接的方法（我直接在终端模拟器上使用它，而不是在脚本上）。

* * *

我尝试`git merge-base`按照@wRAR 的建议使用。

首先，有一个缺点：`git merge-base --is-ancestor`不给我输出。它以 0 或 1 退出而不向 stdout 输出任何内容。编写脚本时可以，但是当直接在我的终端上*手动*`echo $?`使用它时，我必须在之后的额外步骤中检查退出状态（在 bash 上，`$LASTEXITCODE`在 PowerShell 上）。不是破坏交易，但会产生一些麻烦。

但是，无论如何，它没有奏效。

适用于以下场景：

```
> git log --oneline --graph
| * <SHA1 D> Fourth commit.
| * <SHA1 C> Third commit.
| * <SHA1 B> Second commit.
| * <SHA1 A> First commit.
> git merge-base --is-ancestor <SHA1 B> <SHA1 C>
> echo $?
0
> git merge-base --is-ancestor <SHA1 C> <SHA1 B>
> echo $?
1 
```

但不是在这个（不做我想要的）：

```
> git log --oneline --graph
*   <SHA1 D> Merged work.
|\
| * <SHA1 C> Paul's first commit.
* | <SHA1 B> John's second commit.
|/
* <SHA1 A> John's first commit.
> git merge-base --is-ancestor <SHA1 B> <SHA1 C>
> echo $?
1
> git merge-base --is-ancestor <SHA1 C> <SHA1 B>
1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:57:46.777

您需要比较两个提交的提交日期。可以在`git show`（或在任何其他合适的命令中）使用`--format=fuller`或使用包括提交日期字段的自定义格式来查看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:20:20.797

唯一`git`知道的顺序是祖先关系给出的顺序。提交时间等取决于完成提交的机器的时钟（可能与月球同步），可能是提交的原始提交时刻，此后多次修改/编辑，甚至可能完全是假的。

# c# - 将 ICollection 与 MVC 和实体框架一起使用

> ID：15797390
> 
> 赞同：0
> 
> 时间：2013-04-03T20:25:40.907
> 
> 标签：c#

嗨，我正在学习使用代码优先方法使用 MVc。我无法理解 ICollection<> 在我的设置中的使用。我有两个类/实体：“餐厅”和“餐厅评论”，如下所示：

```
public class Restaurant
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string City { get; set; }
    public string Country { get; set; }
    public ICollection<RestaurantReview> Reviews { get; set; }
} 
```

和.....

```
public class RestaurantReview
{
    public int Id { get; set; }    
    public int Rating { get; set; }
    public string Body { get; set; }
    public string ReviewerName { get; set; }
    public int RestaurantId { get; set; }

} 
```

现在让我感到困惑的是餐厅类的最后一个属性。为什么它是'ICollection'类型并使用我的RestaurantReview类作为参数，它是做什么的，希望我已经说清楚了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:28:40.600

这是一对多关系的定义。

使用该属性（有时称为*Navigation Property*），Entity Framework 将能够连接`Review`到`Restaurant`它所写的内容。它还将允许您非常轻松地获取`Review`给定实体的实体。`Restaurant`

您也可以`public int RestaurantId { get; set; }`从课堂中删除 - 由于课堂上的原因，`RestaurantReview`EF 将自动生成该列。`ICollection<RestaurantReview>``Restaurant`

# nginx - 杀死主进程后，Nginx pid 每隔几秒就不断变化

> ID：15797396
> 
> 赞同：3
> 
> 时间：2013-04-03T20:26:06.113
> 
> 标签：nginx, upstart

我正在使用以下 Upstart 脚本来保持 Nginx 在 Ubuntu 服务器上正常运行：

```
start on (filesystem and net-device-up IFACE=lo)
stop on runlevel [!2345]

env DAEMON=/usr/sbin/nginx
env CONF=/etc/nginx/nginx.conf

respawn
respawn limit 10 5

pre-start script
    $DAEMON -t
    if [ $? -ne 0 ]; then
            exit $?
    fi
end script

exec $DAEMON -c $CONF -g "daemon off;" > /dev/null 2>&1 
```

这个脚本工作正常，除非我使用 kill 命令杀死 Nginx 主进程。杀死主进程后 /var/run/nginx.pid 保持不变，但 Nginx pid 每隔几秒就会改变一次（这意味着 Nginx 一直在重新启动？）。知道如何解决这个问题吗？

# nginx - Nginx 重定向到错误的虚拟主机

> ID：15797397
> 
> 赞同：17
> 
> 时间：2013-04-03T20:26:09.047
> 
> 标签：nginx

我在一个 nginx conf 文件中有大约 1300 个虚拟主机。所有具有以下布局（它们在 vhost 文件中依次列出）。

现在我的问题是有时我的浏览器会将site2重定向到site1。出于某种原因，虽然域名不匹配。

看起来 nginx 总是重定向到 vhosts 文件中的第一个站点。

有人知道这个问题可能是什么吗？

```
server {
    listen   80;

    server_name site1.com;
    rewrite ^(.*) http://www.site1.com$1 permanent;
}

server {
    listen   80;

    root /srv/www/site/public_html/src/public/;
    error_log /srv/www/site/logs/error.log;
    index index.php;

   server_name www.site1.com;

    location / {
        if (!-e $request_filename) {
            rewrite ^.*$ /index.php last;
        }
    }

    location ~ .(php|phtml)$ {
        try_files $uri $uri/ /index.php;
        fastcgi_param SCRIPT_FILENAME /srv/www/site/public_html/src/public$fastcgi_script_name;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
    }
}

server {
    listen   80;

    server_name site2.com;
    rewrite ^(.*) http://www.site2.com$1 permanent;
}

server {
    listen   80;

    root /srv/www/site/public_html/src/public/;
    error_log /srv/www/site/logs/error.log;
    index index.php;

   server_name www.site2.com;

    location / {
        if (!-e $request_filename) {
            rewrite ^.*$ /index.php last;
        }
    }

    location ~ .(php|phtml)$ {
        try_files $uri $uri/ /index.php;
        fastcgi_param SCRIPT_FILENAME /srv/www/site/public_html/src/public$fastcgi_script_name;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
    }
} 
```

编辑也许要提到的另一件事是，我每 2 分钟使用 nginx -s reload 重新加载所有这些虚拟主机。

在第一次测试中，重定向似乎只在重新加载时发生......要做更多测试，但这可能会有所帮助..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T23:14:27.513

参考（nginx如何处理请求）： http: [//nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)

> 在此配置中，nginx 仅测试请求的标头字段“Host”，以确定应将请求路由到哪个服务器。如果它的值不匹配任何服务器名称，或者请求根本不包含这个头域，那么 nginx 会将请求路由到这个端口的默认服务器。
> 
> 默认服务器是第一个——这是 nginx 的标准默认行为

你能检查那些错误请求的主机头吗？

您还可以创建**一个显式**默认服务器来捕获所有这些错误请求，并将请求信息（即 $http_host）记录到不同的错误日志文件中以供调查。

```
server {
    listen       80  default_server;
    server_name  _;
    error_log /path/to/the/default_server_error.log;

    return       444;
} 
```

[**更新**]正如您所做的那样`nginx -s reload`，您在该 nginx conf 文件中有这么多域，以下是可能的：

重新加载是这样的

> 使用新配置启动新工作进程，优雅关闭旧工作进程

所以老工人和新工人可以共存一段时间。例如，当您在配置文件中添加一个新的服务器块（带有新域名）时，在重新加载期间，新的工作人员将拥有新的域，而旧的则没有。当请求恰好由旧的工作进程发送时，它将被视为未知主机并由默认服务器提供服务。

你说它每2分钟完成一次。你能跑吗

```
ps aux |grep nginx 
```

并检查每个工人运行了多长时间？如果超过 2 分钟，重新加载可能无法按预期工作。

# batch-file - 输出名称不起作用

> ID：15797398
> 
> 赞同：0
> 
> 时间：2013-04-03T20:26:10.330
> 
> 标签：batch-file

所以告诉我为什么这不起作用..

```
set /p Name=Enter Name here: 
echo ^<Object id="%Name%"^> >> %Output%\Weapons\^%Name%.xml 
```

我希望输出 xml 文件以我命名的对象 id 命名。但问题是，当我放一些没有空格的东西时它可以工作，但是如果我放一个带空格的名称，该文件将只创建名称的第一部分，例如“dagger of derp”，它会将其命名为“dagger”，如果我查看它创建的文件，它会说 (<)Object id="%name%"> asd.xml
，它不会是 xml 文件，它只是一个“文件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:36:38.150

你有一个插入符号，我想念双引号：

```
echo ^<Object id="%Name%"^>>>"%Output%\Weapons\%Name%.xml" 
```

# performance - 图形应用程序的线程有效性

> ID：15797399
> 
> 赞同：1
> 
> 时间：2013-04-03T20:26:10.630
> 
> 标签：performance, opengl, graphics, gpu, libgdx

假设我正在使用自己的着色器为场景创建照明。这是可以在多个线程之间划分的一个很好的例子，例如通过将场景划分为更小的场景并在单独的线程中渲染它们。

1.  我应该手动将其划分为线程，还是图形库会以某种方式自动划分此类操作？还是依赖于库（我正在使用 libgdx，它似乎正在使用 OpenGL）。或者也许还有其他原因我应该将它单独留在一个线程中？
2.  如果我应该手动在线程之间分配工作负载，我应该使用多少个线程？这种情况下的线程数是显卡依赖还是处理器依赖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:37:47.537

OpenGL 不支持多线程渲染，因为 OpenGL 上下文仅在创建它的线程上有效。

为了获得一些性能，您可以做的是将更新逻辑和渲染逻辑分离到单独的线程中。但是，您不能利用多线程进行 OpenGL 渲染。

# c# - 这段代码有什么问题？无法将带有 [] 的索引应用于类型的表达式

> ID：15797410
> 
> 赞同：0
> 
> 时间：2013-04-03T20:26:56.433
> 
> 标签：c#

我正在编写一个小型控制台应用程序。我不知道出了什么问题...

```
namespace Mtrx
{
    class Mtrx
    {
        private double[,] _sqMtrx;
        private double _mtrxSize { get; set; }

        public Mtrx(int i)
        {

            if (i <= 0)
                throw new FormatException();
            else
                this._sqMtrx = new double[i, i];
            _mtrxSize = i;
        }

        public static Mtrx operator +(Mtrx m1, Mtrx m2)
        {
            if (m1._mtrxSize == m2._mtrxSize)
            {
                for (int i = 1; i <= m1._mtrxSize; i++)
                {
                    for (int j = 1; j <= m1._mtrxSize; j++)
                    {
                        return m1[i, j] == m1[i, j] + m2[i, j];
                    }
                }
            }
        }
    }
} 
```

我得到：无法使用 [] 将索引应用于“Mtrx.Mtrx”类型的表达式

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T20:29:30.853

嗯，是的，问题就在这里：

```
return m1[i, j] == m1[i, j] + m2[i, j]; 
```

这在各种方面都是错误的：

*   `bool`当运算符要返回 a 时，您正试图返回 a `Mtrx`（顺便说一下，这个名字很糟糕 - 拥抱元音！）
*   您正在尝试在 and 上使用索引器`m1`，`m2`它们是类型的变量`Mtrx`。您尚未创建索引器。您*要么*需要使用`m1._sqMtrx[i, j]`etc，要么需要声明一个索引器，例如：

    ```
    public double this[int i, int j]
    {
        return _sqMtrx[i, j];
    } 
    ```

*   如果两个参数的大小不同，您的方法不会返回任何内容

从根本上说，我认为您应该重新考虑整个运营商。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:29:31.270

您正在尝试像访问数组一样访问对象，而不是访问对象内部的数组。尝试`m1._sqMatrix[i,j]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:38:07.813

嵌套 for 循环中最内层的行不应该引用数组，而不是 mr1、mr2 变量吗？

```
 public static Mtrx operator +(Mtrx m1, Mtrx m2)
    {
        if (m1._mtrxSize == m2._mtrxSize)
        {
            var outVal = new Mtrx(m1._mtrxSize)

            for (int i = 1; i <= m1._mtrxSize; i++)
                for (int j = 1; j <= m1._mtrxSize; j++)
                    outVal._sqMtrx[i,j] = m1._sqMtrx[i, j] + m2._sqMtrx[i, j];

            return outVal;
        }
    } 
```

如果要在类本身上使用索引语法，则必须添加索引器...。

```
class Mtrx
{
    private double[,] _sqMtrx;
    private int _mtrxSize { get; set; }

    public Mtrx(int i)
    {

        if (i <= 0)
            throw new FormatException();
        else
            this._sqMtrx = new double[i, i];
        _mtrxSize = i;
    }

    public double this[int i, int j]
    {  
        get { return _sqMtrx[i, j]; }
        set { _sqMtrx[i, j] = value; }
    }

    public static Mtrx operator +(Mtrx m1, Mtrx m2)
    {
        if (m1._mtrxSize == m2._mtrxSize)
        {
            var outVal = new Mtrx(m1._mtrxSize)

            for (int i = 1; i <= m1._mtrxSize; i++)
                for (int j = 1; j <= m1._mtrxSize; j++)
                    outVal[i,j] = m1[i, j] + m2[i, j];

            return outVal;
        }
    }
} 
```

# css - IE8 中的 CSS 渐变禁用我的下拉菜单

> ID：15797413
> 
> 赞同：2
> 
> 时间：2013-04-03T20:27:07.103
> 
> 标签：css, internet-explorer-8

有问题的网站：http: [//atlanticsig.creativecurvedev2.ca/](http://atlanticsig.creativecurvedev2.ca/)

一点背景... 这是我在 MODx 中构建的客户端开发站点，使用 Wayfinder 扩展作为菜单，Ultimate Dropdown 作为子菜单。我正在使用 CSS 渐变来为菜单生成漂亮的背景颜色。

我的问题是，在 IE8 中，当我合并“过滤器”渐变背景颜色时，标题导航的下拉菜单不显示。只有 IE8 浏览器有这个问题；甚至 IE7 也能正常工作。从技术上讲，下拉菜单在那里，因为光标可以点击子菜单链接，但浏览器拒绝显示它们。

我已经通过为 IE8 使用重复的背景图像解决了这个问题，但我真的不想走这条路；我认为肯定应该有一个 CSS 解决方案，这就是我发布这个的原因；我的好奇心被激起了，我想看看真正的问题是什么。

我能够将问题追溯到这行代码：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-8 */ 
```

一旦我从以下代码块中删除了这一行，下拉菜单在 IE8 中就可以正常工作，但是渐变会消失：

```
#header_menu {
background: -moz-linear-gradient(top,  #003764 0%, #3b6b89 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#003764), color-stop(100%,#3b6b89)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #003764 0%,#3b6b89 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #003764 0%,#3b6b89 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #003764 0%,#3b6b89 100%); /* IE10+ */
background: linear-gradient(to bottom,  #003764 0%,#3b6b89 100%); /* W3C */
background-color: #003764; /* Old browsers */
height: 38px;
width: auto;
} 
```

我在 HTML 和 CSS 中尝试了许多修复，包括渐变的各种排列、将渐变应用于不同的元素、将各种高度/宽度/位置值应用于我的容器和菜单、使用 z-index 值、添加额外的块， ETC。

最后，它似乎总是回到那个“过滤器”行（我什至尝试过-ms-filter-）。

如果您想要任何其他代码片段，请告诉我。这是一个非常有趣的问题，我真的很想解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:10:01.657

老实说，使用 IE 的`filter`风格总是自找麻烦——它有一大堆错误和怪癖，可能会意外地破坏其他东西。

那么你有什么选择呢？

*   你可以尝试使用 CSS3Pie 来渲染你的渐变。它使用 VML 而不是过滤器，因此不会遇到相同的错误。（或者您可以自己编写 VML 代码，但这会很乏味）

*   或者您可以在 IE8 中使用图形作为渐变。您可以安排 CSS 代码，使标准 CSS 渐变覆盖背景图形，因此其他浏览器可以继续使用 CSS 渐变并且不需要了解图形。

*   或者你可以接受 IE8 是一个旧的浏览器，并给它一个纯背景而不是渐变。它可能看起来不那么漂亮，但它仍然可以工作，而且仍然使用 IE8 的人现在可能已经习惯了看到看起来不是最好的网站。

# c# - 将纬度/经度坐标转换为 ISN93

> ID：15797414
> 
> 赞同：0
> 
> 时间：2013-04-03T20:27:11.027
> 
> 标签：c#, .net, windows-phone, gis

我需要将纬度和经度更改为`ISN93`.

我正在使用 ISN93 格式的 GIS 数据，所以我需要获取相同格式的 GPS 数据。

有没有人有任何代码可以进行这些转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-05T09:35:50.207

几年前我制作了这个 Java 代码，它转换`ISN93`为 GPS 使用的系统：`WGS84`。

[https://github.com/Kjarni/StraetoRouteAPI/blob/master/java/ISN93_to_WGS84.java](https://github.com/Kjarni/StraetoRouteAPI/blob/master/java/ISN93_to_WGS84.java)

```
package org.kjarni;

import android.graphics.PointF;

/*
 * Copyright (c) 2012, Gunnar Gu�var�arson, Gabr�el A. P�tursson
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of the <organization> nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * // example conversion:
 * PointF point = new PointF(359583, 406481);
 * ISN93_to_WGS84 converter = new ISN93_to_WGS84();
 * PointF result = converter.ISN93_WGS84(point);
 * label1.setText("x: " + result.x + " y: " + result.y);
 */

public class ISN93_to_WGS84
{
    private double a     = 6378137.0;
    private double f     = 1.0 / 298.257222101;
    private double lat1  = 64.25;
    private double lat2  = 65.75;
    private double latc  = 65.00;
    private double lonc  = 19.00;
    private double eps   = 0.00000000001;
    private double lat   = 0;
    private double delta = 1.0;

    private double rho, e, dum, sint, f2sin1, pol1, polc, peq;

    public ISN93_to_WGS84()
    {
        rho    = 45.0 / Math.atan2(1.0, 1.0);
        e      = Math.sqrt(f * (2 - f));
        dum    = f2(Math.sin(lat1 / rho)) - f2(Math.sin(lat2 / rho));
        sint   = 2 * (Math.log(fx(lat1)) - Math.log(fx(lat2))) / dum;
        f2sin1 = f2(Math.sin(lat1 / rho));
        pol1   = fx(lat1) / sint;
        polc   = f3(latc) + 500000.0;
        peq    = a * Math.cos(latc / rho) / (sint * Math.exp(sint * Math.log((45 - latc / 2) / rho)));
    }

    private double fx (double p)
    {
        return a * Math.cos(p / rho) / Math.sqrt(1 - Math.pow(e * Math.sin(p / rho), 2));
    }

    private double f1 (double p)
    {
        return Math.log((1 - p) / (1 + p));
    }

    private double f2 (double p)
    {
        return f1(p) - e * f1(e * p);
    }

    private double f3 (double p)
    {
        return pol1 * Math.exp((f2(Math.sin(p / rho)) - f2sin1) * sint / 2);
    }

    public PointF ISN93_WGS84(PointF input)
    {
        double pol  = Math.sqrt(Math.pow(input.x - 500000, 2) + Math.pow(polc - input.y, 2));
        double lon  = 90 - 2 * rho * Math.atan(Math.exp(Math.log(pol / peq) / sint));
        double fact = rho * Math.cos(lon / rho) / sint / pol;

        while (Math.abs(delta) > eps)
        {
            delta = (f3(lon) - pol) * fact;
            lon += delta;
        }

        lat = -(lonc + rho * Math.atan((500000 - input.x) / (polc - input.y)) / sint);
        return new PointF((float)lat, (float)lon);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-05T15:43:04.963

这是一些将 WGS84 转换为 ISN93 的 javascript：

[https://gist.github.com/kristjanmik/6925cbefaa311145c58a](https://gist.github.com/kristjanmik/6925cbefaa311145c58a)

```
function WGS84_To_ISN93(l,m){
    l = parseFloat(l);
    m = parseFloat(m);
    var k=l*0.0174532925199433;
    var p=0.0818191913305*Math.sin(k);

    var o=11616778.382033*Math.pow(Math.tan(
        0.785398163397448-(k/2))/Math.pow(
        (1-p)/(1+p),0.04090959566525),0.90633380084752);

    var q=(m+19)*0.0158185089469038;
    return {
        x:Math.round((500000+o*Math.sin(q))*1000)/1000,
        y:Math.round((3482044.27322585-o*Math.cos(q))*1000)/1000
    };
} 
```

在使用它之前，请务必围绕此进行完整的测试。我还没有对此进行全面分析，以确保它在所有情况下都是正确的。如果您发现任何问题，请告诉我。

# mysql - 将查询结果限制为总结果减去 10 个结果

> ID：15797419
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:27:32.827
> 
> 标签：mysql, sql, limit

伙计们，我想不通..我红了很多，但没有运气...

我有以下查询，我需要限制它以显示总结果减去特定数量的 os 结果，比如说 10。

我的意思是，如果查询将返回 1000 个总结果，我希望它返回 990，并且需要排除最后 10 个结果。

这可能吗？

查看查询调用：

```
 $query = ' SELECT p.*,c.name as name_category,t.name as name_type,cy.name as name_country,s.name as name_state,l.name as name_locality,l.alias as locality_alias,pf.name as name_profile, '
    . ' CASE WHEN CHAR_LENGTH(p.alias) THEN CONCAT_WS(":", p.id, p.alias) ELSE p.id END as Pslug,'
    . ' CASE WHEN CHAR_LENGTH(c.alias) THEN CONCAT_WS(":", c.id, c.alias) ELSE c.id END as Cslug,'
    . ' CASE WHEN CHAR_LENGTH(cy.alias) THEN CONCAT_WS(":", cy.id, cy.alias) ELSE cy.id END as CYslug,'
    . ' CASE WHEN CHAR_LENGTH(s.alias) THEN CONCAT_WS(":", s.id, s.alias) ELSE s.id END as Sslug,'      
    . ' CASE WHEN CHAR_LENGTH(l.alias) THEN CONCAT_WS(":", l.id, l.alias) ELSE l.id END as Lslug, ' 
    . ' CASE WHEN CHAR_LENGTH(t.alias) THEN CONCAT_WS(":", t.id, t.alias) ELSE t.id END as Tslug '          
            . ' FROM #__properties_products AS p '              
            . ' LEFT JOIN #__properties_country AS cy ON cy.id = p.cyid '               
            . ' LEFT JOIN #__properties_state AS s ON s.id = p.sid '
            . ' LEFT JOIN #__properties_locality AS l ON l.id = p.lid '
            . ' LEFT JOIN #__properties_profiles AS pf ON pf.mid = p.agent_id '             
            . ' LEFT JOIN #__properties_category AS c ON c.id = p.cid '
            . ' LEFT JOIN #__properties_type AS t ON t.id = p.type '
            . ' WHERE p.published = 1 '         
            .' ORDER BY p.id DESC ' 
            ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:21:46.873

如果您使用的是 MySQL，请使用`limit`and `offset`：

```
limit 10, 9999999 
```

这从第 10 条记录开始，一直持续到数据的末尾（或技术上，到 9999999 行）。

您按 排序`p.id desc`，因此这将删除 10 行具有最高 id 的行。

要真正做你想做的事情（删除 id 最低的 10），请使用子查询，然后在子查询之后再次排序：

```
select t.*
from (<most of your query here>
      order by p.id asc
      limit 10, 999999
     ) t
order by id desc 
```

要删除具有*最高*id 的行，只需添加以下`limit`语句：

```
 $query = 'SELECT p.*,c.name as name_category,t.name as name_type,cy.name as name_country,s.name as name_state,l.name as name_locality,l.alias as locality_alias,pf.name as name_profile, '
. ' CASE WHEN CHAR_LENGTH(p.alias) THEN CONCAT_WS(":", p.id, p.alias) ELSE p.id END as Pslug,'
. ' CASE WHEN CHAR_LENGTH(c.alias) THEN CONCAT_WS(":", c.id, c.alias) ELSE c.id END as Cslug,'
. ' CASE WHEN CHAR_LENGTH(cy.alias) THEN CONCAT_WS(":", cy.id, cy.alias) ELSE cy.id END as CYslug,'
. ' CASE WHEN CHAR_LENGTH(s.alias) THEN CONCAT_WS(":", s.id, s.alias) ELSE s.id END as Sslug,'      
. ' CASE WHEN CHAR_LENGTH(l.alias) THEN CONCAT_WS(":", l.id, l.alias) ELSE l.id END as Lslug, ' 
. ' CASE WHEN CHAR_LENGTH(t.alias) THEN CONCAT_WS(":", t.id, t.alias) ELSE t.id END as Tslug '          
        . ' FROM #__properties_products AS p '              
        . ' LEFT JOIN #__properties_country AS cy ON cy.id = p.cyid '               
        . ' LEFT JOIN #__properties_state AS s ON s.id = p.sid '
        . ' LEFT JOIN #__properties_locality AS l ON l.id = p.lid '
        . ' LEFT JOIN #__properties_profiles AS pf ON pf.mid = p.agent_id '             
        . ' LEFT JOIN #__properties_category AS c ON c.id = p.cid '
        . ' LEFT JOIN #__properties_type AS t ON t.id = p.type '
        . ' WHERE p.published = 1 '         
        .' ORDER BY p.id desc limit 10, 999999' 
        ; 
```

# perl - 将记录的日期时间转换为 UNIX 纪元时间戳的 Perl 脚本

> ID：15797420
> 
> 赞同：1
> 
> 时间：2013-04-03T20:27:33.610
> 
> 标签：perl, grep, timestamp, epoch

我有一个`datetimes.log`包含数十万个时间戳的日志文件 ()，格式如下：

```
YYYY-MM-DD HH:mm:ss 
```

例如：

```
2013-03-28 06:43:51
2013-03-28 06:43:55
2013-03-28 06:44:03
...etc. 
```

我想编写一个简单的 Perl 脚本来输出一个`unix_timestamps.log`包含相同条目的新文件，但不是日期时间，而是具有相应的 UNIX 纪元时间戳。对于上面的示例，该`unix_timestamps.log`文件将包含以下信息：

```
1364453031
1364453035
1364453043
...etc. 
```

我唯一能想到的是`perl convert_2_timestamps.pl`：

```
#!/usr/bin/perl

use warnings;
use strict;

grep m/_(\d{4})(\d\d)(\d\d)/ | POSIX::mktime(?, ?, ?, ?, ?, ?) > unix_timestamps.log 
```

但不确定如何将参数转换为`mktime`，也不确定这是否是正确的方法。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:39:23.567

```
use strict;
use warnings;
use DateTime::Format::Strptime;

my $parser = DateTime::Format::Strptime->new(
  pattern => '%Y-%m-%d %H:%M:%S',
  on_error => 'croak',
);

while( <DATA> ) {
   my $dt = $parser->parse_datetime($_);
   print $dt->epoch, "\n";
}

__DATA__
2013-03-28 06:43:51
2013-03-28 06:43:55
2013-03-28 06:44:03 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:51:43.053

这是[Time::Piece](https://metacpan.org/module/Time%3a%3aPiece)模块的完美使用，它已经成为 Perl 发行版的标准部分超过五年了。

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

use Time::Piece;

# Read the data a record at a time. Data ends up in $_.
# N.B. Using built-in DATA filehandle for this demo.
#      In the real world you'd open a separate filehandle.
while (<DATA>) {
  chomp;
  # Create a Time::Piece object using strptime (that's "string
  # parse time") and immediately call the epoch method on the
  # new object to get the value you want.
  say Time::Piece->strptime($_, '%Y-%m-%d %H:%M:%S')->epoch;
}

__DATA__
2013-03-28 06:43:51
2013-03-28 06:43:55
2013-03-28 06:44:03 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:29:48.213

试试`Date::Parse`CPAN 模块。( [http://metacpan.org/pod/Date::Parse](http://metacpan.org/pod/Date%3a%3aParse) )

有了它，您`convert_2_timestamps.pl`可以：

```
#!/usr/bin/perl

use warnings;
use strict;

use Date::Parse;

while (<>) {
  chomp;
  printf("%s\n", str2time("$_ GMT"));
} 
```

请注意，我必须将 GMT 附加到您的示例输入中才能获得预期的输出。

运行为：

```
perl convert_2_timestamps.pl < datetimes.log > unix_timestamps.log 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T21:03:10.083

您可以像这样分解 YYYY-MM-DD HH:mm:ss 格式：

```
my ( $y, $m, @t ) = split /[-: ]+/, $time_str;
my $time = mktime( reverse @t, $m - 1, $y - 1900 ); 
```

但你也可以像这样把它放在一个替换中：

```
s{(\d{4})-(0?[1-9]\d?)-(0?[1-9]\d?) (0?\d{1,2}):(0?\d{1,2}):(0?\d{1,2})}{
    mktime( $6, $5, $4, $3, $2 - 1, $1 - 1900 )
 }e; 
```

# python - 在 Cent OS 5 下编译 gdb 时 Python 丢失或无法使用

> ID：15797424
> 
> 赞同：3
> 
> 时间：2013-04-03T20:27:46.093
> 
> 标签：python, python-2.7, gdb, makefile

我检查了这个问题，它不适用。 [交叉编译 GDB 时出现 Python 丢失或无法使用的错误](https://stackoverflow.com/questions/10792844/python-missing-or-unusable-error-while-cross-compiling-gdb)

我正在尝试在 Cent OS 5 上构建具有 python 支持的 gdb 7.5。

```
configure --with-expat --with-python 
```

不记录任何错误并安装 Python 开发文件。

我设置`LDFLAGS="L/usr/local/expat-2.1 -L/opt/python27/lib`

`/opt/python27/lib`包含：

```
rwxrwxrwx  1 root root      19 Mar 14 15:35 libpython2.7.so -> libpython2.7.so.1.0
-r-xr-xr-x  1 root root 1893448 Aug 30  2012 libpython2.7.so.1.0
drwxr-xr-x  2 root root    4096 Mar 14 15:35 pkgconfig
drwxr-xr-x 27 root root   20480 Mar 14 21:49 python2.7 
```

运行`make`会产生此错误：

```
checking whether to use python... yes
checking for python... /opt/python27/bin/python
checking for python2.7... no
configure: error: python is missing or unusable 
```

`/opt/python27/bin/python`存在具有正确的权限并且是可执行的。

为什么链接进程找不到python？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T00:01:43.343

该行之后的下一行`configure: error:`应该类似于：

```
make[1]: [configure-gdb]: .... 
```

告诉您此错误来自在 gdb 子目录中运行配置。所以你应该在`config.log`那里查看文件。这应该向您显示配置尝试执行失败的某些内容——可能是一段无法编译的 C 代码，以及来自编译器的错误消息，例如“找不到包含文件“Python.h””。这告诉你问题出在哪里——它找不到用于在 gdb 中嵌入 python 的 python 头文件。

现在您的问题可能略有不同，但可能与没有正确安装 python 嵌入组件有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T03:01:21.080

> 为什么链接进程找不到python？

这不是*链接*过程；它是其中一个子目录中的配置过程。

找出它是哪个子目录（`make`应该说`Leaving directory XXXX`），并`config.log`在该子目录中查找出了什么问题。

> 我发布的原因是 config.log 没有指出问题，但是当我运行 make 时，我收到来自原始帖子的错误

该`make`进程运行*其他* `configure`进程。您的错误*显然*来自该附加过程。您声称已检查所有`config.log`子目录中的所有 s，但鉴于您所描述的症状，这似乎不太可能。

# python - 来自字体数据或 URL 的 ImageFont

> ID：15797432
> 
> 赞同：0
> 
> 时间：2013-04-03T20:28:17.750
> 
> 标签：python, django, fonts, amazon-s3, python-imaging-library

我想知道如何在 Python 中使用来自 URL 或字体数据的 ImageFont 实例。字体文件作为静态数据存储在 Amazon S3 实例上，我需要使用它来生成带有 PIL 的图像。

ImageFont.load() 函数只接受一个文件名，所以我感觉很锁定。

尽可能深入地挖掘代码，是 _imagingft.so 库的 getfont() 函数将文件名作为参数，我很不想修改这个库。;)

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T13:10:12.340

示例可以[在 Pillow 存储库中的测试中](https://github.com/python-pillow/Pillow/blob/master/Tests/test_imagefont.py)找到：

```
from PIL import ImageFont
from io import BytesIO

def _font_as_bytes():
    with open(FONT_PATH, 'rb') as f:
        font_bytes = BytesIO(f.read())
    return font_bytes

ImageFont.truetype(_font_as_bytes(), FONT_SIZE) 
```

另请参阅：[如何在 PIL 中打开来自 Internet 的图像？](https://stackoverflow.com/questions/12020657/how-do-i-open-an-image-from-the-internet-in-pil)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:50:00.623

对解决方案感兴趣的人，请参阅[这篇文章](https://github.com/python-imaging/Pillow/pull/202)。

编辑：它已经合并到现在，享受！

# java - 扩展数组类（注意“数组”是单数形式。我不是指 Arrays.java ）

> ID：15797436
> 
> 赞同：0
> 
> 时间：2013-04-03T20:28:26.653
> 
> 标签：java, arrays

如果我这样声明 x `int[] x`，那么`x`它就是一个对象，不是吗？哪个`int[]`是类？

我可以扩展该课程（出于各种原因）吗？我试过了

```
class Foo extends int[]
{
} 
```

但这行不通。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:31:38.800

您不能在 Java 中扩展数组。它们是这些奇怪的伪类事物，它们的行为有点类似于对象（具有方法/字段等），但实际上并非如此。如果您正在尝试制作自定义数组，您是否查看过 Collections API？这包括诸如 ArrayLists（可变长度的数组）之类的东西，它们非常有用。

编辑：如果您需要一个数组，请使用所有集合都有的“toArray()”方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:39:27.007

An`int[]`实际上是一个数组。它本身不是一个对象，而是一个能够保存许多相同类型的值并允许基于索引快速访问它们的变量。

有趣的是，Oracle 的文档将数组（位于*变量*类别下）描述为：

> 数组是一个容器对象，它包含固定数量的单一类型的值。数组的长度是在创建数组时确定的。创建后，它的长度是固定的。您已经在“Hello World!”的 main 方法中看到了一个数组示例。应用。本节更详细地讨论数组。

`int[]`它不是一个实际的类类型，所以你没有办法扩展它。如果您真的需要这样做，您可以扩展任何实现`List`接口的对象（`ArrayList`例如），或者您`List`自己使用自定义对象实现接口。

如果要将集合转换为数组，请尝试以下操作：

```
List<Integer> intList = new ArrayList<Integer>();
//Operate with your list
Integer[] arr = intList.toArray(new Integer[intList.size()]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:37:16.613

您不能在 Java 中扩展 int[] 或任何其他数组。它是对象，但不能像 java 中的普通类那样扩展。

int 是原始的，您使用 int[] 创建整数数组

JComponent 是类，您使用 JComponent[] 创建 JComponents 数组

您可以扩展 JComponent 类或任何其他非最终类，并通过将 [] 添加到变量声明的末尾来创建这些数组。

```
class Foobar { .... }

Foobar foobar = new Foobar();
Foobar[] foobarArray = new Foobar[10]; // size 10

class BiggerFoobar extends Foobar {...}

BiggerFoobar[] biggerFoobarArray = new BiggerFoobar[5]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T20:30:57.933

int 是一种数据类型，而不是对象。整数是一个对象，但是你也不能扩展它，因为它是最终的。

我认为您可能需要重新考虑您正在尝试做的究竟是什么，可能有不同的方式。

# c# - RavenDB 索引返回最近的条目

> ID：15797438
> 
> 赞同：1
> 
> 时间：2013-04-03T20:28:28.013
> 
> 标签：c#, mapreduce, ravendb

我是 RavenDB 的新手，我正在尝试使用下面的索引查询下面的文档模型。该索引几乎可以按预期工作，但现在我只需要在总数中包含某个日期的最新状态。例如，一个客户可能在一个日期有多个导入状态，但只有最后一个状态才应计入结果总数。

```
public class Client
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<ImportStatusMessage> ImportStatuses { get; set; }
}

public class ImportStatusMessage
{
    public DateTime TimeStamp { get; set; }
    public ImportStatus Status { get; set; }
}

public enum ImportStatus
{
    Complete,
    Running,
    Failed,
    Waiting,
    NoReport
} 
```

我正在使用以下索引：

```
public class Client_ImportSummaryByDate : AbstractIndexCreationTask<Client, ImportSummary>
{
    public Client_ImportSummaryByDate()
    {
        Map = clients => from client in clients
                       from status in client.ImportStatuses
                       select new
                           {
                               status.Status,
                               Date = status.TimeStamp.Date,
                               Count = 1
                           };

        Reduce = results => from result in results
                            group result by new { result.Status, result.Date }
                            into g
                            select new
                                {
                                    g.Key.Status,
                                    g.Key.Date,
                                    Count = g.Sum(x => x.Count)
                                };

    }
}

public class ImportSummary
{
    public ImportStatus Status { get; set; }
    public DateTime Date { get; set; }
    public int Count { get; set; }
} 
```

这可以通过索引来完成吗？我需要不同的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:00:57.403

代替：

```
from status in client.ImportStatuses 
```

考虑：

```
let status = client.ImportStatuses.Last() 
```

如果它们在列表中可能出现故障，您可以执行以下操作：

```
let status = client.ImportStatuses.OrderBy(x => x.TimeStamp).Last() 
```

如果他们是这样订购的，你也可以使用`First`而不是。`Last`

这些中的任何一个都只会索引每个客户端的单个状态。相反，如果您的意思是您想要多个状态，但只有在任何给定日期的最后一个状态，您可以这样做：

```
Map = clients => clients.SelectMany(x => x.ImportStatuses, (x, y) => new {x.Id, y.Status, y.TimeStamp})
                        .GroupBy(x => new {x.Id, x.TimeStamp.Date})
                        .Select(g => g.OrderBy(x => x.TimeStamp).Last())
                        .Select(x => new
                                     {
                                         x.Status,
                                         x.TimeStamp.Date,
                                         Count = 1
                                     }); 
```

所有这些都将在索引的地图部分中，因为该列表在每个文档中都是自包含的。

# php - 每个控制器都有一个视图有什么好处

> ID：15797440
> 
> 赞同：2
> 
> 时间：2013-04-03T20:28:44.083
> 
> 标签：php, oop, model-view-controller

我不确定拥有`View`per的好处`Controller`是什么？我所读到的任何内容`Views`都没有清楚地显示或证明为什么你应该拥有一个`View`per `Controller`.

目前我有这样的事情（简化为主要方法）：

```
interface ViewInterface {
    public function render();
}

class View implements ViewInterface {

    private $template;

    public function __construct($template = NULL) {

        if($template !== NULL) {
            $this->setTemplate($template);
        }
    }

    public function render() { 
        ob_start();
        require(PATH_TEMPLATES . $this->template . '.php');
        return ob_get_clean();
    }

}

class CompositeView implements ViewInterface {

    private $views;

    public function attachView(ViewInterface $view) {
        $this->views[] = $view;
        return $this;
    }

    public function render() {

        $output = '';
        foreach($this->views as $view) {
            $output .= $view->render();
        }

        return $output;
    }

} 
```

假设我要渲染隐私政策页面，我可以这样做

```
$header = new View('common/header');
$body = new View('privacy-policy');
$footer = new View('common/footer');

$compositeView = new CompositeView();
$compositeView->attachView($header)
              ->attachView($body)
              ->attachView($footer);

$compositeView->render(); 
```

这有什么问题？`View`您从每个单独的文件中获得什么优势`Controller`？

任何建议都会非常感谢。

# linux - 如何过滤掉文件中的所有唯一行？

> ID：15797442
> 
> 赞同：5
> 
> 时间：2013-04-03T20:28:47.710
> 
> 标签：linux, bash, shell, command-line

有没有办法通过命令行工具过滤掉文件中所有唯一的行而不对行进行排序？我想基本上这样做：

```
sort -u myFile 
```

没有排序的性能影响。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T20:33:04.847

删除重复的行：

```
awk '!a[$0]++' file 
```

这就是著名的 awk one-liner。inet上有很多解释。[这](http://www.catonmat.net/blog/awk-one-liners-explained-part-two/)是一种解释：

> 这个单行是非常惯用的。它记录在关联数组“a”中看到的行（数组在 Awk 中总是关联的），同时测试它之前是否看到过该行。如果它之前看到过该行，那么 a[line] > 0 和 !a[line] == 0。任何计算结果为 false 的表达式都是空操作，任何计算结果为 true 的表达式都等于 "{ print }”。

# c# - 将字符串转换为结构

> ID：15797443
> 
> 赞同：-4
> 
> 时间：2013-04-03T20:28:49.753
> 
> 标签：c#, enums

我有一个基于字符串的枚举创建为结构：

```
public struct Version {
    public const string
        Version1 = "Version1",
        Version2 = "Version2";
} 
```

我尝试像这样使用它：

```
 public Version curVersion {
        get {
            if (ConfigurationManager.AppSettings["Version"] == "Version1") {
                return Version.Version1;
            }
            return Version.Version2;
        }
    } 
```

但是，它在“return Version.Version1;”上引发错误 说：

```
Cannot implicitly convert type 'string' to 'Version' 
```

我该如何转换？

我也试过“(Version)return Version.Version1;” 除了错误删除了“隐式”一词之外，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:31:45.450

如果你想返回字符串，那么`curVersion`应该是 type `string`，而不是`Version`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:38:34.890

在您的情况下，适当的解决方案是仅使用常规枚举：

```
enum Version
{
    Version1,
    Version2,
} 
```

如果您想获取特定枚举的字符串值，您可以使用`ToString`：

```
string s = Version.Version1.ToString();//this will result in the string "Version1" 
```

至于为什么你看到你的错误`Version.Version1`，在你的代码中，不是`Version`. 变量的类型为`String`。它在类中定义的事实`Version`并没有使它成为`Version`. 您需要创建一个`new Version`并返回它以进行编译。

虽然您可以创建自己的基于字符串的枚举类型，但根本没有必要。你可以`ToString`像我之前说的那样使用。如果您仍然想这样做，尽管代码可能看起来像这样：

```
public struct Version
{
    private string value;
    private Version(string value)
    {
        this.value = value;
    }

    public static readonly Version Version1 = new Version("Version1");
    public static readonly Version Version2 = new Version("Version2");

    public override string ToString()
    {
        return value;
    }
} 
```

然后，您可以进一步添加基于底层字符串值的解析、比较、相等等功能。

使用这种自定义“字符串枚举”类型的主要原因是，如果枚举的字符串值与用于表示它的变量名称不同很重要。如果字符串值不是 C# 中的合法标识符（即其中包含空格的东西）或者可能只是因为它很长并且标识符应该是它的较短版本，则这一点尤其重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:39:15.973

您的结构毫无意义，因为它没有任何实例字段。Cosider 将其更改为一个`static`类，如下所示：

```
public static class Version {
    public const string
        Version1 = "Version1",
        Version2 = "Version2";
} 
```

然后`Version1`有`Version2`类型`string`。也许你的财产`curVersion`也应该有类型`string`？

* * *

如果你真的想要一个结构，你可以把它改成这样：

```
public struct Version {
    public readonly string Text;

    Version(string text) {
        Text = text;
    }

    public static readonly Version Version1 = new Version("Version1");
    public static readonly Version Version2 = new Version("Version2");
} 
```

# stack-overflow - 为什么我的 Visual Studio 调试会话中立即发生堆栈溢出异常？

> ID：15797444
> 
> 赞同：0
> 
> 时间：2013-04-03T20:28:50.260
> 
> 标签：stack-overflow

我正在尝试调试用 C++ 编写的程序 (.exe)。该程序是一个控制台应用程序，是面向数学的模拟，没有 GUI 或界面代码。我正在尝试通过右键单击 VS 解决方案资源管理器中的可执行文件并选择“步入新实例”来对在 Win 7（64 位）上在 Visual Studio 2008 中编译的该程序启动调试会话。但是，在执行第一行代码之前，Visual Studio 报告“sim.exe 中 0x00000001401b3937 处的未处理异常：0xC00000FD：堆栈溢出。” 这是前几行代码的片段

```
int_T main(int_T argc, const char_T *argv[])
{
  SimData thisSim;
  int InputFlag = 0; 
```

调试器箭头指向第一个尖括号。

这是dissabembly视图的快照：

```

```
 int_T main(int_T argc, const char_T *argv[])
 {
 0000000140141930  mov         qword ptr [rsp+10h],rdx 
 0000000140141935  mov         dword ptr [rsp+8],ecx 
 0000000140141939  push        rsi  
 000000014014193A  push        rdi  
 000000014014193B  mov         eax,1120C8h 
 0000000140141940  call        __chkstk (1401B3900h) 
 0000000140141945  sub         rsp,rax                <------DEBUGGER IS STOPPED HERE
 0000000140141948  mov         rax,qword ptr [__security_cookie (1401F7050h)] 
 000000014014194F  xor         rax,rsp 
 0000000140141952  mov         qword ptr [rsp+1120B0h],rax 
 ///////////////////////////////////////////////////////////////////////////
 /* Initialize Instance of SimData */
 SimData thisSim;
 int InputFlag = 0;
 000000014014195A  mov         dword ptr [rsp+20h],0 
```

我不是 Visual Studio 专家，但我过去曾大量使用它进行调试，而且我从未见过这种行为。  

关于如何进行的任何想法？

```

# java - 如何将值添加到地图内的集合？

> ID：15797446
> 
> 赞同：13
> 
> 时间：2013-04-03T20:28:51.083
> 
> 标签：java, dictionary, hashmap, set, key

我有这张地图`Map<String, Set<Integer>> myMap;`，现在我需要与之交互，我该怎么做？

* * *

### 例如：

**键是：** “apple”、“orange”、“grape”等。
**每组将包含随机数：** 1-9

我需要创建一个映射（HashMap 或 TreeMap），其中包含键的字符串和值的集合。我需要返回给定密钥的集合。我还需要能够根据一个键为每个集合填充多个数字。不知道如何解决这个问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-03T22:15:20.480

需要记住的是，该值最初将为 null，因此第一次使用键时，您必须对其进行初始化：

```
Map<String,Set<Integer>> map; 
```

要将数字添加到密钥中，您必须执行以下操作：

```
String key = "apple"; // for example 

Set<Integer> set = map.get(key); 
if (set == null) {
    set = new HashSet<Integer>();
    map.put(key, set);
}
set.add(5); 
```

不幸的是，在与集合交互的任何地方，都必须进行空检查。例如，如果您想检查某个键是否映射了某个数字，则无法安全地执行此操作：

```
if (map.get(key).contains(number))  // not safe 
```

因为调用`get()`可能会返回`null`（如果没有键的条目）并且你会得到一个`NullPointerException`.

有一种方法可以让你的 map 使用起来非常方便，方法是在 map 中内部化 null 检查，这样调用`get()`总是会返回一个非 null 集；创建一个相应覆盖的匿名类`get()`：

```
Map<String,Set<Integer>> map = new HashMap<String,Set<Integer>> () {
    @Override
    public Set<Integer> get(Object key) {
        Set<Integer> set = super.get(key); 
        if (set == null) {
            set = new HashSet<Integer>();
            put(key, set);
        }
        return set;
    }
} 
```

有了这个，您的主要代码变得更加简单和清晰。加上：

```
map.get(key).add(number); 
```

去检查：

```
if (map.get(key).contains(number)) // now safe 
```

不再需要空检查代码。

——</p>

### Java 8 更新：

添加到集合时处理空条目问题：

```
map.computeIfAbsent( key, k -> new HashSet<>() ).add(number); 
```

对于空值安全检查：

```
if ( map.getOrDefault(key, Collections.emptySet() ).contains(number)) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-03T20:33:16.130

如果我理解正确并不难。

```
Map<String, Set<Integer>> reqdMap = new HashMap<String, Set<Integer>>();

//Form the set corresponding to apple.
Set<Integer> appleSet = new HashSet<Integer>();
appleSet.add(1);
...

reqdMap.put("apple", appleSet);

//To Retrieve
appleSet = reqdMap.get("apple"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T20:34:30.120

为什么不看这个：

[https://github.com/google/guava/wiki/NewCollectionTypesExplained#multimap](https://github.com/google/guava/wiki/NewCollectionTypesExplained#multimap)

`MultiMap`允许您以非常有效的方式为给定键存储多个值。

在您的情况下，最大的优势是您不必`Set`为了向给定键添加一些值而被迫从给定键中检索值 ( )。

实际上，您只需将值添加到键中，就好像您处理“单值”一样，它将自动添加到`set`后台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T20:30:56.750

```
Map<String,Set<Integer>> map;  
Set<Integer> set = map.get("apple"); 
```

我省略了实际的人口，`map`因为 OP 是如何`get`设置的，即值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T20:32:46.027

```
Map<String, Set<Integer>> mapOfSets = new HashMap<String, Set<Integer>>();
Set<Integer> numberSet = new HashSet<Integer>();

//put a set into the map
mapOfSets.put("key", numberSet);
//get a set out of the map
Set<Integer> set = mapOfSets.get("key"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T20:34:19.463

如果您想使用一种方法将多个数字添加到集合中，请尝试以下操作：

```
Map<String, Set<Integer>> map; // Definition

public void addValues(String key, Integer... values) {
    map.get(key).addAll(values);
} 
```

这样，当你需要为一个键添加一堆数字时，你可以这样调用：

```
addValues("apple", 1, 2, 4, 6, 8); 
```

1 行而不是 5 行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T20:39:45.333

这只是一个完整的示例。只需运行它并对其进行处理以了解有关此问题的更多信息

```
public class Tester5 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        //"apple", "orange", "grape", etc. Each set will contain random numbers: 1, 2, 3, 4, 5, 6, 7, 8, 9

        Random ran = new Random();

        Map<String, Set<Integer>> map= new HashMap<String, Set<Integer>>();
        String keys[]= {"apple", "orange", "grape"};
        for(String key : keys) {
            Set<Integer> integers= new HashSet<Integer>();
            for(int i = 0; i < 10; i++) {
                 integers.add(ran.nextInt(9)+1);
            }
            map.put(key, integers);
        }
        System.out.println(map.toString());

    }

} 
```

# c# - 一个列表中有许多表单文本框

> ID：15797447
> 
> 赞同：2
> 
> 时间：2013-04-03T20:28:57.690
> 
> 标签：c#, list, textbox

我有一个 20 的表单，`TextBoxes(2-22)`我想将它们全部添加 a`List<TextBox>`所以我可以使用`for-statement`.

我的想法（笑）：

```
List<TextBox> textBoxes = new List<TextBox>();

for(int i = 2; i < 23; i++) {

//This String should refer to = textBox2, textBox3, etc
textBoxes.Add("textBox"+ Convert.ToString(i));

} 
```

但这不起作用，因为它无法将字符串转换为 textBoxName。你可以这样做：

```
 textBoxes.Add(textBox2);
  textBoxes.Add(textBox3);
  textBoxes.Add(textBox4);
  ...So on 
```

但是没有人有时间做那个...... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:35:20.657

如果是 WinForms 这应该可以工作......

```
textBoxes.Add((TextBox)Controls.Find("textBox" + i, true)[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:37:31.707

在将它们传递到列表之前，您需要将它们转换为控件，而不是尝试将字符串值放入`List<TextBox>`.

尝试将其添加到您的循环中：

```
textBoxes.Add((TextBox)this.Controls.Find("textBox"+ Convert.ToString(i),true)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:37:44.373

```
List<TextBox> textBoxes = new List<TextBox>();

for (int i = 1; i <= 22; i++) {
    textBoxes.Add((TextBox)this.Controls.Find("textBox" + i, false)(0));

} 
```

# ios - 按钮的保存方法

> ID：15797450
> 
> 赞同：0
> 
> 时间：2013-04-03T20:29:09.730
> 
> 标签：ios, objective-c, iphone, xcode

这是我的 .m 文件中的代码

```
@interface HomeWorkViewController ()

@end

@implementation HomeWorkViewController
@synthesize adView;
@synthesize myTableView, numbers;

-(void) viewDidLoad
{

   adView.delegate=self;
    [super viewDidLoad];

      self.navigationItem.leftBarButtonItem = self.editButtonItem;

    // check here if key exists in the defaults or not, if yes the retrieve results in array
    if([[NSUserDefaults standardUserDefaults] objectForKey:@"numberArray"] != nil) {
        self.numbers = [NSMutableArray arrayWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"numberArray"]];

    }

    //Register for the notification when user go to background or minimize the app, just save the array objects in the defaults

    [[NSNotificationCenter defaultCenter]   addObserver:self
                                               selector:@selector(appWillGoToBackground:)
                                                   name:UIApplicationWillResignActiveNotification
                                                 object:[UIApplication sharedApplication]];

    //Add the Add button
    UIBarButtonItem * addButton = [[UIBarButtonItem alloc]
                                   initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target: self action: @selector(insertNewObject)];

    self.navigationItem.rightBarButtonItem = addButton;
}

-(void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];
    [self.myTableView setEditing:editing animated:animated];

}
-(void)appWillGoToBackground:(NSNotification *)note {
    NSLog(@"terminate");

    NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
    [defaults setObject:self.numbers forKey:@"numberArray"];
    [defaults synchronize];

}

-(void)insertNewObject{
    //Display a UIAlertView
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Enter HomeWork" message: @"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];

    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    [alert show];

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    //Only perform the following actions if the user hits the ok button
    if (buttonIndex == 1)
    {
        NSString * tmpTextField = [alertView textFieldAtIndex:0].text;

        if(!self. numbers){

            self.numbers = [[NSMutableArray alloc]init];
        }

        [self.numbers insertObject:tmpTextField atIndex:0];

        NSIndexPath * indexPath = [NSIndexPath indexPathForRow:0 inSection:0];

        [self.myTableView insertRowsAtIndexPaths:@[indexPath]withRowAnimation:UITableViewRowAnimationAutomatic];

    }

}

    -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
        return 1;
    }

    -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
        return self.numbers.count;
    }

    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
        static NSString *cellIdentifier = @"cell";

        UITableViewCell *cell = [ tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if(cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault
                                          reuseIdentifier: cellIdentifier];
        }

        cell.textLabel.text = [self.numbers objectAtIndex:indexPath.row];

        return cell;
    }

    -(BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
    {
        return YES;

    }

    -(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
    {
        if (editingStyle == UITableViewCellEditingStyleDelete)
        {
            //remove our NSMutableArray
            [self.numbers removeObjectAtIndex:indexPath.row];
            //remove from our tableView
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
        }

    }

- (void)tableView:(UITableView *)tableView
moveRowAtIndexPath:(NSIndexPath *)fromIndexPath
toIndexPath:(NSIndexPath *)toIndexPath
{

}
-(void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    adView.hidden=FALSE;
    NSLog(@"Has ad, showing");

}

-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    adView.hidden=TRUE;
    NSLog(@"Has no ads, hiding");

}

-(void)dealloc
{

    [adView release];
    [super dealloc];

}

@end 
```

我在那里有一个保存方法，但我想通过单击一个按钮来保存我在表格中更改的所有内容。我怎么做？我想放置一个带有按钮的工具栏，该按钮表示返回到主屏幕，并链接此按钮以将所做的所有操作保存到表中，例如删除、切换顺序和添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:51:54.933

您快到了 ：）

您正在使用 numbers 数组作为表的数据模型。确保在操作表时始终更新此数组。（例如，您需要对中的 numbers 数组重新排序`moveRowAtIndexPath`。目前，您在该方法中什么也不做）

要使用按钮保存模型，只需在 Interface Builder 中创建一个 UIButton 并将其连接到以下操作：

```
- (IBAction)saveButtonWasPressed:(id)sender {
    NSUserDefaults *defaults=[NSUserDefaults standardUserDefaults];
    [defaults setObject:self.numbers forKey:@"numberArray"];
    [defaults synchronize];
} 
```

如果您还想离开控制器，也许您还想从导航控制器堆栈中弹出 tableviewcontroller。

# ruby-on-rails - Rails 手册 SQL

> ID：15797453
> 
> 赞同：0
> 
> 时间：2013-04-03T20:29:27.630
> 
> 标签：ruby-on-rails, ruby, activerecord

我有以下关系

`Foo`有很多`Bar`

然后我有`Foo`模型，但`Bar`它只是`String`一个`id`。我可以创建一个`Bar`仅包含 的模型`String id`，但我想知道是否可能以及如何进行`Foo`全部查询`Bars`并将其作为模型存储`list`在其中`Foo`。

如果我必须使用 SQL，那很好。

另一种选择是删除`Bar`表，然后将其作为字段放入`Foo`表中，但这需要序列化并且会很困难，并且会使 SQL 搜索的猜测效率低下。

架构如下

`Foo`has_many`Foo_Bars`和 `Bar`has_many`Bar_Foos`

没有`Foo`has_and_belongs_to_many的原因是因为单或单`Bar`的添加信息将是一个永无止境的链，认为这是一个二分图，例如和是一个不相交的集合。`Foo``Bar``Foo``Bar`

该数据库与另一个应用程序共享，我使用 rails 作为可视界面来管理数据。

我的问题是我真的需要一个`Foo_Bars`模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:47:43.867

听起来您必须创建一个条形模型。Rails 默认主 id 是整数，而不是字符串。您似乎想列出所有“属于”一个 Foo 的酒吧。因此，您的迁移将如下所示：

> rails g model bar foo_id:integer

现在在 /models/bar.rb 里面：

```
class Bar < ActiveRecord::Base
  belongs_to :foo
end 
```

你的模型/foo.rb：

```
class Foo < ActiveRecord::Base
  has_many :bars
end 
```

创建一些带有 foo 外部 id 的 Bar 记录，您现在可以通过以下方式查询所有属于 foo 的 bar：

```
foo = Foo.find id
foo.bars 
```

或来自酒吧：

```
Bar.where(:foo_id => id) 
```

阅读并练习： http: [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:43:38.070

您可以在 Foo 模型中使用这种方法

```
class Foo < ActiveRecord::Base
  serialize :barlist

  ...

  def store_barlist
    update_attributes(:barlist => self.bars.map {|bar| bar.string_id })
  end
end 
```

要在控制器中调用它，你必须做这样的事情。

```
def some_controller_action
  @foo = Foo.find(1)
  @foo.store_barlist
end 
```

# android - 当 InputStream 来自 url 而不是来自资产时，为什么从 InputStream 创建 Drawable 会导致 OutOfMemoryError？

> ID：15797458
> 
> 赞同：0
> 
> 时间：2013-04-03T20:29:40.837
> 
> 标签：android, png, out-of-memory

我正在开发一个显示建筑物平面图的应用程序。平面图是托管在服务器上的 .png 文件。

此代码导致 OutOfMemoryError：

```
InputStream is = null;
HttpGet httpGet = new HttpGet("http://server/image.png");
HttpClient httpClient = new DefaultHttpClient();
HttpResponse response = httpClient.execute(httpGet);
is = response.getEntity().getContent();

Drawable d = Drawable.createFromStream(is, null); //this line causes an OutOfMemoryException

imageView.setImageDrawable(d); 
```

但是这段代码没有：

```
InputStream is = assetManager.open("image.png");
Drawable d = Drawable.createFromStream(is, null);
imageView.setImageDrawable(d); 
```

这些图像的尺寸相当大（一个示例为 5100 x 3300），但该图像在线查看时只有约 100 KB，在 .apk 文件中查看时它并没有小很多（约 95 KB）。

有谁知道为什么第一个代码片段会导致错误，而第二个不会？在调试期间，第一个 InputStream 的大小仅为 ~102000 字节，第二个 InputStream 的大小仅为 ~95000 字节。这似乎不足以解释错误的大小差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:35:56.280

可绘制流将为它创建一个可绘制的位图。这意味着它需要将未压缩的完整位图存储在内存中。为此，它需要分配整个内存——5100*3300*4 字节，即 64 MB。这对安卓来说太大了。

从资产开始时，它可能在必须读取文件之前不会读取文件，并且不会创建内存位图。它可以只将文件指针保存在内存中。但是你不能用流来做到这一点，当你开始阅读它时，流可能没有价值，而且你不能多次阅读它（而你可以阅读一个文件）。

# javascript - 是否可以使用 querySelector 提取上一个和下一个数据？

> ID：15797463
> 
> 赞同：0
> 
> 时间：2013-04-03T20:29:53.117
> 
> 标签：javascript, windows-8

这是我的代码：

```
WinJS.xhr({ url: urlText })
            .then(function complete(xml) {

                var restXML = xml.responseXML;
                var items = xml.responseXML.querySelectorAll("item");
                for (var i = 0 ; i < items.length ; i++) {
                    var item = items[i];
                    title = items[i].querySelector("title").textContent;
                    dataList.push({ title: title }); 
```

我想要做的是在同一个 dataList.push 中获取上一个和下一个标题。

这甚至可能吗？

另外，我如何阻止它在第一个标题上产生错误，因为它没有以前的条目？

感谢您阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:34:01.360

```
var prevTitle = i > 0 ? items[i - 1].querySelector("title").textContent : '';
var nextTitle = i < items.length - 1 ? items[i + 1].querySelector("title").textContent : ''; 
```

# jquery - AJAX 请求之前的代码行不起作用

> ID：15797464
> 
> 赞同：1
> 
> 时间：2013-04-03T20:29:56.777
> 
> 标签：jquery

说我有这样的事情：

```
$('button').live({
    click: function() {
        $('body').css('cursor', 'wait');
        var value = 1;
        $.ajax({
            type: 'GET',
            url: 'http://www.domain.com/site/index.php/controller/function',
            dataType: 'json',
            cache: false,
            async: false,
            data: { variable: value },
            success: function(data, textStatus, jqXHR) { // },
            error: function(jqXHR, textStatus, errorThrown) { // }
        });
        $('body').css('cursor', 'default');
    }
}); 
```

我正在尝试更改光标，因为 AJAX 请求需要几分钟才能返回响应，并且我需要用户不要认为他的浏览器崩溃或类似的事情。问题是这段代码中应该这样做的行不起作用。

有任何想法吗？

旁注：AJAX 请求没有问题，一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:18:46.617

我最终得到了这个：

```
$('button').live({
    click: function() {
        console.log('change cursor...')
        $('body').css('cursor', 'wait');
        console.log('cursor changed, wait 1 second...')
        setTimeout(function() {
            console.log('make ajax request...')
            $.ajax({
                type: 'GET',
                url: 'http://www.domain.com/site/index.php/controller/function',
                async: false,
                success: function(data, textStatus, jqXHR) {
                    console.log('change cursor back...')
                    $('body').css('cursor', 'default');
                },
                error: function(jqXHR, textStatus, errorThrown) { // }
            });
        }, 1000);
    }
}); 
```

经过测试和工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:38:41.360

[您可以按照此问题](https://stackoverflow.com/questions/10326925/how-to-change-cursor-to-wait-when-using-jquery-load)的已接受答案尝试此操作。

```
$('body').ajaxStart(function() {
    $(this).css({'cursor':'wait'})
}).ajaxStop(function() {
    $(this).css({'cursor':'default'})
}); 
```

页面上的任何 AJAX 调用都会更改光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-24T11:09:11.513

您的请求是同步的，因此它会在一段时间内阻止浏览器 - 您可能看不到光标的变化。所以我把它改成了异步的。但是游标需要在请求后恢复到以前的状态。这是最终代码：

```
$('button').live({
    click: function() {
        $('body').css('cursor', 'wait');
        var value = 1;
        $.ajax({
            type: 'GET',
            url: 'url_here',
            dataType: 'json',
            cache: false,
            async: true,
            data: { variable: value },
            success: function(data, textStatus, jqXHR) { // },
            error: function(jqXHR, textStatus, errorThrown) { // },
            always: function () {
                $('body').css('cursor', 'default');
            }
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-24T10:28:36.270

设置`async : true`对我有用。

# powershell - Powershell - 在运行之前检查脚本的更新

> ID：15797469
> 
> 赞同：1
> 
> 时间：2013-04-03T20:30:12.947
> 
> 标签：powershell, powershell-3.0

我想知道是否有人知道在运行之前让 powershell 脚本检查自身更新的方法。

我有一个脚本，我将要分派到多台计算机，并且不希望每次更改脚本时都必须将其重新部署到每台计算机。我想让它检查某个位置以查看是否有更新版本的自身（并在需要时更新自身）。

我似乎想不出办法。请让我知道是否有人可以提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:53:05.943

好吧，一种方法可能是创建一个简单的批处理文件来运行您的实际脚本，并且该批处理文件中的第一行可能是检查更新文件夹中是否存在 ps1。有的话可以先复制下来，然后启动你的powershell脚本

例如。每当有更新时，您将“Mypowershellscript.ps1”脚本放入`c:\temp\update\ folder`

并假设您的脚本将从

```
c:\temp\myscriptfolder\ 
```

然后你可以像这样创建批处理文件

```
if NOT exist C:\temp\update\mypowershelscript.ps1 goto :end

copy /Y c:\temp\update\MyPowerShellScript.ps1 c:\temp\MyScriptFolder\

:END

%systemroot%\System32\WindowsPowerShell\v1.0\powershell.exe -nologo -noprofile -file "c:\temp\myscriptfolder\mypowershellscript.ps1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-30T15:30:04.333

这是我放在一起的一个函数。将可能包含较新版本的文件的路径传递给它。这将自我更新，然后使用传递给原始脚本的任何参数重新运行。在过程的早期执行此操作，其他功能结果将丢失。我通常会检查网络是否已启动，并且可以看到包含较新文件的共享，然后运行以下命令：

```
 function Update-Myself
{
    [CmdletBinding()]
    param
    (
        [Parameter(Mandatory = $true,
                   Position = 0)]
        [string]$SourcePath
    )
    #Check that the file we're comparing against exists
    if (Test-Path $SourcePath)
    {
    #The path of THIS script
    $CurrentScript = $MyInvocation.ScriptName
        if (!($SourcePath -eq $CurrentScript ))
        {
            if ($(Get-Item $SourcePath).LastWriteTimeUtc -gt $(Get-Item $CurrentScript ).LastWriteTimeUtc)
            {
                write-host "Updating..."
                Copy-Item $SourcePath $CurrentScript 
                #If the script was updated, run it with orginal parameters
                &$CurrentScript $script:args
                exit
            }
        }
    }
    write-host "No update required"
}

Update-Myself "\\path\to\newest\release\of\file.ps1"
```

# java - 导入文件的构造函数

> ID：15797478
> 
> 赞同：-2
> 
> 时间：2013-04-03T20:30:32.213
> 
> 标签：java, constructor

如果我想为一个类构建一个构造函数来导入一个文件，我已经传入了一个 String nameOfFile，我该如何初始化对象的状态，然后打开文档文件，并处理文档的每一行？参考和清晰的解释将不胜感激。我刚开始学习java。

为了澄清我的问题，如何为已导入的文档文件构建对象？我现在正在做的是我写了一个类，但我正在努力为一个特定的文件构建一个对象。到目前为止我所拥有的是

```
public class theImport 
{

theImport(String nameOfFile)
{
(Here is where I want to achieve all the listing I have above.)
}
.
.
.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:34:24.713

我相信您会分两步进行。

第一步：实际的构造函数。

```
private String nOF;
public ClassName(String nameOfFile) {
    nOF = nameOfFile;
} 
```

第二步：评估文件。由于这可能由于多种原因而失败（例如文件不存在，它不应该转到构造函数（您无法从构造函数中没有的返回类型中捕获这些错误）

```
public boolean Evaluate() {
    //Evaluate your file and return false if it fails for whatever reason.
} 
```

我的 Java 目前不是最好的，但这应该会提示您正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:26:50.490

Propably you mean something like this:

```
 public class theImport 
    {

          theImport(String nameOfFile)
          {
            try { 
                    FileReader input = new FileReader(nameOfFile);
                    BufferedReader bufRead = new BufferedReader(input);
                    String line;
                    line = bufRead.readLine();
                    //this will loop thought the lines of the file
                    while (line != null){
                          line = bufRead.readLine();
                          //do whatever you want with the line
                    }
                    bufRead.close();
            }           
            catch (Exception e){
                   e.printStackTrace();

            }
         }
   } 
```

# wpf - 即使使用 INotifyPropertyChanged 接口，ListView 也不会更新

> ID：15797479
> 
> 赞同：0
> 
> 时间：2013-04-03T20:30:36.753
> 
> 标签：wpf, listview, inotifypropertychanged

我有一个 UI 元素，它是一个列表视图，其中包含另一个列表视图（一个垂直和一个水平）。

第一个listview的Itemsource是Objects的ObservableCollection，它又包含了一个子对象的ObservableCollection。两者都实现了 INotifyPropertyChanged 接口，并在有用时调用 PropetyChanged 事件。

如果我添加了新的子对象，我会看到我的第二个列表视图更新，但是当我更改一个值时，我看不到任何变化。在这种情况下，我必须做些什么来刷新我的 UI 元素吗？

这是我的列表视图

```
<ListView x:Name="LstInfoEtape" Margin="0,0,0,0" Style="{StaticResource BaseListView}" Grid.Row="2" Grid.Column="1" >
 <ListView.ItemTemplate>
  <DataTemplate>
   <ListView x:Name="LstEtape" ItemsSource="{Binding LstEtapes}"  Background="#00000000" SelectionChanged="ListView_SelectionChanged" ScrollViewer.ScrollChanged="ListView_ScrollChanged">
    <ListView.ItemsPanel>
     <ItemsPanelTemplate>
      <StackPanel Orientation="Horizontal" />
     </ItemsPanelTemplate>
    </ListView.ItemsPanel>
    <ListView.ItemTemplate>
     <DataTemplate>
      <Border Width="82"  CornerRadius="4" BorderBrush="{Binding ColorSelected}" BorderThickness="3,3,3,3" Visibility="{Binding EtapeVisible}" Background="{Binding ColorBackground}" MouseDown="Border_MouseDown">
       <Grid  Width="80" >
        <Grid.RowDefinitions>
         <RowDefinition Height="19"/>
        </Grid.RowDefinitions>
        <TextBlock Margin="2,0,2,0" x:Name="TxtDateRappel"  TextWrapping="Wrap" Grid.Row="0" Text="{Binding DateRappelTerminaison,StringFormat=yyyy-MM-dd,NotifyOnSourceUpdated=True}" Visibility="{Binding EtapeVisible}" FontSize="12" Foreground="{Binding ColorForeground}" />
       </Grid>
      </Border>
     </DataTemplate>
    </ListView.ItemTemplate>
   </ListView>
  </DataTemplate>
 </ListView.ItemTemplate>
</ListView> 
```

我使用的课程是那些

```
Public Class SuiviOperationLite
Implements INotifyPropertyChanged

Private _strNom As String
Private _oLstProcessusLite As ObservableCollection(Of ContratProcessusLite) ' Not implemented yet

Private _oLstEtapeLite As ObservableCollection(Of ContratProcessusEtapeLite)

Public Sub New(ByVal strNom As String,
               ByVal oLstProcessusLite As ObservableCollection(Of ContratProcessusLite),
               ByVal oLstEtapeLite As ObservableCollection(Of ContratProcessusEtapeLite))

    Constructor(strNom, oLstProcessusLite, oLstEtapeLite)

End Sub

Private Sub Constructor(ByVal strNom As String,
                        ByVal oLstProcessusLite As ObservableCollection(Of ContratProcessusLite),
               ByVal oLstEtapeLite As ObservableCollection(Of ContratProcessusEtapeLite))

    _strNom = strNom
    _oLstProcessusLite = oLstProcessusLite
    _oLstEtapeLite = oLstEtapeLite
End Sub

Public Property Nom() As String
    Get
        Return _strNom
    End Get
    Set(ByVal value As String)
        _strNom = value
    End Set
End Property

Public Property LstContratProcessus() As ObservableCollection(Of ContratProcessusLite)
    Get
        Return _oLstProcessusLite
    End Get
    Set(ByVal value As ObservableCollection(Of ContratProcessusLite))
        _oLstProcessusLite = value
    End Set
End Property

Public Property LstEtapes() As ObservableCollection(Of ContratProcessusEtapeLite)
    Get
        Return _oLstEtapeLite
    End Get
    Set(ByVal value As ObservableCollection(Of ContratProcessusEtapeLite))
        _oLstEtapeLite = value
    End Set
End Property

Protected Friend Sub NotifyPropertyChanged(ByVal info As String)      
    RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
End Sub

Public Event PropertyChanged(sender As Object, e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged
End Class

Public Class ContratProcessusEtapeLite
Implements INotifyPropertyChanged

Private _lngId As Long
Private _lngIdSequenceTravail As Long
Private _boolSelected As Boolean
Private _strETapeVisible As String
Private _strColorBackGround As String
Private _strColorForeGround As String
Private _dateRappelTerminaison As Date
Private _oParent As DAL.SuiviOperationLite

Public Sub New(ByVal oParent As DAL.SuiviOperationLite,
               ByVal lngId As Long,
               ByVal lngIdSequenceTravail As Long,
               ByVal boolSelected As Boolean,
               ByVal strEtapeVisible As String,
               ByVal strColorBackGround As String,
               ByVal strColorForeGround As String,
               ByVal dateRappelTerminaison As Date)

    Constructor(oParent,
                lngId, _
                lngIdSequenceTravail, _
                boolSelected, _
                strEtapeVisible, _
                strColorBackGround, _
                strColorForeGround, _
                dateRappelTerminaison)

End Sub

Private Sub Constructor(ByVal oParent As DAL.SuiviOperationLite,
                        ByVal lngId As Long,
                        ByVal lngIdSequenceTravail As Long,
                        ByVal boolSelected As Boolean,
                        ByVal strEtapeVisible As String,
                        ByVal strColorBackGround As String,
                        ByVal strColorForeGround As String,
                        ByVal dateRappelTerminaison As Date)

    _oParent = oParent
    _lngId = lngId
    _lngIdSequenceTravail = lngIdSequenceTravail
    _boolSelected = boolSelected
    _strETapeVisible = strEtapeVisible
    _strColorBackGround = strColorBackGround
    _strColorForeGround = strColorForeGround
    _dateRappelTerminaison = dateRappelTerminaison
End Sub

Public Property Parent() As DAL.SuiviOperationLite
    Get
        Return _oParent
    End Get
    Set(ByVal value As DAL.SuiviOperationLite)
        _oParent = value
    End Set
End Property

Public Property ID() As Long
    Get
        Return _lngId
    End Get
    Set(ByVal value As Long)
        _lngId = value
        NotifyPropertyChanged("ID")
    End Set
End Property

Public Property IdClientContratSequenceTravail() As Long
    Get
        Return _lngIdSequenceTravail
    End Get
    Set(ByVal value As Long)
        _lngIdSequenceTravail = value
        NotifyPropertyChanged("IdSequence")
    End Set
End Property

Public Property Selected() As Boolean
    Get
        Return _boolSelected
    End Get
    Set(ByVal value As Boolean)
        _boolSelected = value
        NotifyPropertyChanged("Selected")
    End Set
End Property

Public ReadOnly Property ColorSelected As String
    Get
        If _boolSelected Then
            Return "#FF4394DF"
        Else
            Return "#FF000000"
        End If
    End Get
End Property

Public Property EtapeVisible() As String
    Get
        Return _strETapeVisible
    End Get
    Set(ByVal value As String)
        _strETapeVisible = value
        NotifyPropertyChanged("Visible")
    End Set
End Property

Public Property ColorBackground() As String
    Get
        Return _strColorBackGround
    End Get
    Set(ByVal value As String)
        _strColorBackGround = value
        NotifyPropertyChanged("Background")
    End Set
End Property

Public Property ColorForeground() As String
    Get
        Return _strColorForeGround
    End Get
    Set(ByVal value As String)
        _strColorForeGround = value
        NotifyPropertyChanged("Foreground")
    End Set
End Property

Public Property DateRappelTerminaison() As Date
    Get
        Return _dateRappelTerminaison
    End Get
    Set(ByVal value As Date)
        _dateRappelTerminaison = value
        NotifyPropertyChanged("DateRappel")
    End Set
End Property

Private Sub NotifyPropertyChanged(ByVal info As String)
    RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
    _oParent.NotifyPropertyChanged("Child")
End Sub

Public Event PropertyChanged(sender As Object, e As PropertyChangedEventArgs) Implements INotifyPropertyChanged.PropertyChanged
End Class 
```

这里是功能（有更多的处理来获取项目的集合，但我怀疑它是否真的相关：

```
Private Sub LoadList(colSuivi as ObservableCollection(Of SuiviProductionLite)
     LstInfoEtape.ItemsSource = colSuivi 
End Sub

Private Sub Border_MouseDown(sender As System.Object, e As System.Windows.Input.MouseButtonEventArgs)
    Dim oBorder As Border

    Dim oEtapeLite As DAL.ContratProcessusEtapeLite

    Select Case e.Source.GetType.ToString
        Case "System.Windows.Controls.TextBlock"
            Dim oTxt As TextBlock = e.Source
            Dim oGrid As Grid = oTxt.Parent
            _oCurBorderDet = oGrid.Parent
        Case "System.Windows.Controls.Border"
            Dim oBrd As Border = e.Source
            _oCurBorderDet = e.Source
    End Select

    If Not _oCurBorderDet.DataContext.GetType().FullName.Equals("MS.Internal.NamedObject") Then
        oEtapeLite = _oCurBorderDet.DataContext
        oEtapeLite.Selected = True            
    End If

End Sub 
```

当我进行一些跟踪时，我知道无论我点击我的 UI，两个 PropertyChanged 事件都会被调用。如果我执行手动“Items.Refresh”，我还可以看到 UI 正在更改，但我想删除手动刷新，因为它刷新所有内容，不仅是刚刚修改的项目，当面对大量数据时，需要更多的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:31:10.880

我看到一个问题

```
Public Property IdClientContratSequenceTravail() As Long
    Get
        Return _lngIdSequenceTravail
    End Get
    Set(ByVal value As Long)
        _lngIdSequenceTravail = value
        NotifyPropertyChanged("IdSequence")
    End Set
End Property 
```

通知中的名称错误

# c# - 匿名委托 - 使用对象集合搜索属性

> ID：15797481
> 
> 赞同：2
> 
> 时间：2013-04-03T20:30:41.793
> 
> 标签：c#, anonymous-methods

这是我的应用程序中使用匿名委托搜索属性集合的当前代码：

```
public class MyObject
{
    public MyObject() { }

    public string MyObjectId { get; set; }
    public List<MySubObject> SubObjects { get; set; }
}

public class MySubObject
{
    public MySubObject() { }

    public string MySubObjectId { get; set; }
}

public List<MyObject> Search(string input)
{
    List<MyObject> AllObjects = Data.GetAllObjects();
    List<MyObject> SearchResults = new List<MyObject>();

    SearchResults = AllObjects.FindAll
    (
        delegate(MyObject o)
        {
            return e.MyObjectId.Equals(input)
        }
    );

    if (SearchResults .Count.Equals(0))
            SearchResults = null;

        return SearchResults ;
} 
```

我想修改匿名委托以通过`MySubObject.MySubObjectId`通用列表中的属性而不是属性进行搜索`MyObjectId`。我将如何修改匿名委托中的代码来完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:33:57.733

这看起来可以减少很多，但是您需要摆脱对`null`列表的分配：

```
public List<MyObject> Search(string input)
{
    return Data.GetAllObjects()
        .Where(obj => obj.SubObjects
            .Any(subobj => subobj.SubOjectId.Equals(input)));
} 
```

`.Clear()`您的列表而不是使它们无效，以获得更一致的设计和更少的空检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:32:27.317

尝试以下

```
delegate(MyObject o) {
  var mySubObject = o as MySubObject;
  return mySubObject != null && mySubObject.MySubObjectId == input;
} 
```

请注意，您也可以在此处使用较短的 lambda 语法

```
(o) => {
  var mySubObject = o as MySubObject;
  return mySubObject != null && mySubObject.MySubObjectId == input;
} 
```

或 LINQ 查询

```
var searchResult = AllObjects
  .OfType<MySubObject>()
  .Where(x => x.MySubObjectId == input)
  .Cast<MyObject>()
  .ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:39:33.977

试试这个，使用 lambda 表达式。基本上，如果对象的至少一个子对象包含所需的输入，则可以找到对象。

```
SearchResults = AllObjects.Where(obj => 
    obj.SubObjects != null 
    && obj.SubObjects.Any(subObj => ubObj.MySubObjectId.Equals(input))
).ToList(); 
```

# c++ - 使用字符串访问冲突写入位置 0xcccccccc

> ID：15797483
> 
> 赞同：0
> 
> 时间：2013-04-03T20:30:50.417
> 
> 标签：c++, string, visual-c++, pointers

在过去的 4 天里，我一直遇到这个错误：

```
Unhandled exception at 0x77c415de in ls_client_app.exe: 
0xC0000005: Access violation reading location 0xcccccccc. 
```

这是代码：

```
typedef struct client {
    string  ID;
    // some other strings
} client;

typedef struct client_card {
    client CLIENT;
    client_card * next;
} client_card;

typedef client_card * ls_client; 
```

这是 add_client 函数：

```
int add_client(ls_client &LS_CLIENT) {

    client NEW_CLIENT;
    ls_client NEW_CLIENT_CARD = (ls_client) malloc (sizeof(client_card));

    cout << "CLIENT ID: " <<endl;
    cin  >>  NEW_CLIENT.ID;

    NEW_CLIENT_CARD->next    =  NULL;
    NEW_CLIENT_CARD->CLIENT  =  &NEW_CLIENT;

    while (LS_CLIENT != NULL) {
        LS_CLIENT = LS_CLIENT->next;
    }
    LS_CLIENT = NEW_CLIENT_CARD;

    return 0;
} 
```

这是主要的：

```
int main() {
    ls_client LS_CLIENT = (ls_client) malloc (sizeof(client_card));
    LS_CLIENT = NULL;
    add_client(LS_CLIENT);

    // Error in this line !
    cout << LS_CLIENT->CLIENT->ID <<endl;

    return 0;
} 
```

带我去streambuf文件第二行！

```
else if (_Traits::eq_int_type(_Traits::eof(),
    overflow(_Traits::to_int_type(*_Ptr))))
    break;  // single character put failed, quit
else
//... 
```

谁能帮助我，我将不胜感激！
感谢您的尝试！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:32:45.193

`ls_client LS_CLIENT = (ls_client) malloc (sizeof(client_card)); LS_CLIENT = NULL;`

您正在创建客户端，然后将其设置为 NULL。您的错误是访问冲突错误。基本上，您正在尝试使用 NULL 指针。交换这些线，应该没问题。

编辑：有人编辑了您的代码，使其不再包含此错误。如果这就是您的方式，请忽略此答案（抱歉将答案与评论混淆）。

# ruby-on-rails - 为不同的控制器创建表单

> ID：15797485
> 
> 赞同：0
> 
> 时间：2013-04-03T20:30:56.907
> 
> 标签：ruby-on-rails

我有几本书，用户可以创建然后为他们创建页面。

路线.rb：

```
resources :books do
  member do
    get 'pages'
  end
end 
```

这提供了一个通过 /books/:book_id/pages 创建新页面的链接

在该页面中，我呈现了部分内容：

```
<%= render '/pages/new' %> 
```

图书控制器：

```
def page
    @book = Book.find(params[:id])
    @page = @book.pages.new
end 
```

但是当参数被传递给页面控制器时 book_id 会丢失：

页面控制器：

```
def create
  @page = Page.new(params[:page])
   if @page.save          
     redirect_to @page
   else
     render 'new'
   end
end 
```

错误处理也变得困难，因为重定向后 id 也消失了。

我相信应用程序的其余部分似乎很好，因为当我通过控制台创建页面时 book_id 被保留。

这是我的第一个应用程序，所以我什至不确定这是否是正确的方法......我怎样才能让它工作？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:36:36.350

调试此问题的一种方法是在控制器中使用“puts”作为参数来查看实际存在的内容。“puts”就像 java 中的 println 或 PHP 中的 echo

请在使用此代码运行时发布 params 的内容

```
def create
  puts "params = #{params}"
  @page = Page.new(params[:page])
   if @page.save          
     redirect_to @page
   else
     render 'new'
   end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:46:44.820

嵌套资源可以这样处理。

```
# config/routes.rb
resources :books do
  resources :pages
end 
```

您还可以使用`only: [:index, :new]`或`except: [:destroy]`在资源调用上限制正在创建的操作。

在您`PagesController`中，您将有以下可用参数。

```
GET /books/:book_id/pages/:id => creates a params[:book_id] and params[:id]

# app/controllers/pages_controller.rb
def create
  @book = Book.find(params[:book_id])

  @page = @book.pages.build(params[:page])

  if @page.save
    # ...
  else
    # ..
  end
end 
```

请注意，通过关联构建新对象的方法调用`@book.pages.build`不是`.new`. [您将在Rails Guides on ActiveRecord 关联](http://guides.rubyonrails.org/association_basics.html)中了解有关 Rails 关联以及如何通过关联构建和创建对象的所有信息。希望这些指点有所帮助。

如果你想调试传入的参数，你可以按照上面 C404 的建议来提升它们。

```
# in any controller
def any_method
  raise params.inspect
  # or in yaml format
  raise params.to_yaml
end 
```

# java - 如何创建 Restful 服务并部署它的 OSGi 容器？

> ID：15797501
> 
> 赞同：6
> 
> 时间：2013-04-03T20:32:02.263
> 
> 标签：java, eclipse, rest, maven, osgi

我的目标是使用 Eclipse 创建一个 Restful 服务 Maven 项目。然后将其打包为一个捆绑包并将其部署到 Fuse ESB karaf OSGi 容器中。到目前为止，我所知道的是如何使用 JAX-RS API 注释，@Path @GET：

```
package com.restfultest;

import javax.ws.rs.GET;
import javax.ws.rs.Path;

@Path("/example")
public class ExampleService {

@GET
public String sayHello() {
    return "Hello Restful service";
 }
} 
```

我的问题是：1.我应该使用什么 Maven 原型？maven-archetype-webapp 还是快速入门？

2.如何实现Activator？像这样？

```
public class Activator implements BundleActivator {

private ServiceRegistration<?> registration;

public void start(BundleContext context) throws Exception {
    // TODO Auto-generated method stub
    ExampleService exampleService = new ExampleService();
    registration = context.registerService( ExampleService.class.getName(), exampleService, null );
}

public void stop(BundleContext context) throws Exception {
    // TODO Auto-generated method stub
    registration.unregister();
}

} 
```

3.如何注册和发布服务（如如何配置Endpoint地址和端口）？

我是osgi的新手。谁能给我一些资源或详细的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:55:23.210

1.  您可以使用[Maven 捆绑插件](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)
2.  3\. [Apache CXF DOSGi](http://cxf.apache.org/distributed-osgi.html)帮助您将 OSGi 服务发布为 WS/REST。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-03T14:20:48.130

这是我的 5 美分：

## 1\. 你应该使用什么 Maven 原型？

*   我使用了 OSGI HTTP Service (Quick Start)，查看[这个](https://github.com/jersey/jersey/tree/2.22.1/examples/osgi-http-service/bundle)示例，我认为它更自然。

## 2.如何实现Activator？

*   继续使用样本的[激活](https://github.com/jersey/jersey/blob/2.22.1/examples/osgi-http-service/bundle/src/main/java/org/glassfish/jersey/examples/osgihttpservice/Activator.java)器，它对我有用。
*   如果你使用它，你还需要实现[Application](https://github.com/jersey/jersey/blob/2.22.1/examples/osgi-http-service/bundle/src/main/java/org/glassfish/jersey/examples/osgihttpservice/JerseyApplication.java)和[Rest Service](https://github.com/jersey/jersey/blob/2.22.1/examples/osgi-http-service/bundle/src/main/java/org/glassfish/jersey/examples/osgihttpservice/StatusResource.java)

## 3、如何注册和发布服务？

*   我建议您下载最新的[jersey-ALL-bundle](http://mvnrepository.com/artifact/com.eclipsesource.jaxrs/jersey-all/2.22.1)并将其安装在您的 OSGI 上。
*   然后，在我的特殊情况下，我使用[Maven Bundle Plugin](http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html)来处理运行时的导入和打包，所以，我的 pom.xml 看起来像这样（请注意依赖关系）：

    ```
    ...
    <packaging>bundle</packaging>
    <build>
        <plugins>
            <!--+
                + OSGi Bundle-Manifiest Generator.
                + -->
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Import-Package>javax.servlet.*;version="[2.4,4.0)",*</Import-Package>
                        <Bundle-Activator>com.sample.api.Activator</Bundle-Activator>
                        <Implementation-Title>jersey-osgi-http-service-bundle</Implementation-Title>
                        <Implementation-Version>${project.version}</Implementation-Version>
                    </instructions>
                    <unpackBundle>true</unpackBundle>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <!--+======================+-->
        <!--+ REST Dependencies    +-->
        <!--+======================+-->
        <dependency>
            <groupId>org.glassfish.jersey.containers</groupId>
            <artifactId>jersey-container-servlet-core</artifactId>
            <version>2.22.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.felix</groupId>
            <artifactId>org.apache.felix.http.bundle</artifactId>
            <version>2.2.0</version>
        </dependency>
        <!--+=========================================+-->
        <!--+ Apache Felix Framework (OSGi framework) +-->
        <!--+=========================================+-->
        <dependency>
            <groupId>org.apache.felix</groupId>
            <artifactId>org.apache.felix.framework</artifactId>
            <version>4.6.0</version>
        </dependency>
    </dependencies> 
    ```

*   在我的特定情况下，我还[安装了 WebConsole](https://stackoverflow.com/questions/19521622/installing-and-running-web-management-console-in-apache-felix-osgi/30467214#30467214)，然后我的捆绑包如下所示：

    ```
     0|Active     |    0|System Bundle (4.6.0)
     1|Active     |    1|Apache Felix Bundle Repository (2.0.2)
     2|Active     |    1|Apache Felix Gogo Command (0.14.0)
     3|Active     |    1|Apache Felix Gogo Runtime (0.12.1)
     4|Active     |    1|Apache Felix Gogo Shell (0.10.0)
     5|Active     |    1|com.sample-api (1.3.0.SNAPSHOT)
     6|Active     |    1|jersey-all (2.22.1)
     7|Active     |    1|Apache Felix Log Service (1.0.0)
     8|Active     |    1|Apache Felix Configuration Admin Service (1.2.4)
     9|Active     |    1|Apache Felix Shell Service (1.4.2)    
    10|Active     |    1|Apache Felix Http Bundle (2.0.4)    
    11|Active     |    1|HTTP Service (1.0.0)    
    12|Active     |    1|Apache Felix Web Management Console (3.1.2) 
    ```

*   对于 Rest，拥有 bundle 6、10 和 11 很重要。

*   只需执行以下操作，即可在 OSGI（我使用 Felix）的“config.properties”中配置端口：

    ```
    org.osgi.service.http.port=28370 
    ```

*   然后，要访问该服务，只需使用以下路径：

    ```
    http://localhost:28370/jersey-http-service/status 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:24:24.340

1.  You'll need to create an OSGI bundle. There are a few archetypes that create maven projects:

    *   [http://mojo.codehaus.org/mojo-archetypes/osgi-archetype/](http://mojo.codehaus.org/mojo-archetypes/osgi-archetype/)
    *   [http://www.sonatype.com/books/mcookbook/reference/sect-osgi-generate-project.html](http://www.sonatype.com/books/mcookbook/reference/sect-osgi-generate-project.html)
2.  Your activator looks correct.

3.  This question I cannot answer, but it looks like this project does what you need: [https://github.com/hstaudacher/osgi-jax-rs-connector](https://github.com/hstaudacher/osgi-jax-rs-connector)

In general I recommend you get yourself the [OSGI specification](http://www.osgi.org/Specifications/HomePage), it's a good read and explains a lot of things.

# java - 在 java 中使用 ColorConvertOp 后 setRGB 失败

> ID：15797504
> 
> 赞同：1
> 
> 时间：2013-04-03T20:32:09.330
> 
> 标签：java

我试图使用这种方法将我的图像转换为灰度。

```
private void GSActionPerformed(java.awt.event.ActionEvent evt) {                                   
        BufferedImage temp = showing; //showing is a varible that store my temp img.
        int[][] data = getData(temp); // getData() give me a 2d array that has images     coordinate and default RGB color model (TYPE_INT_ARGB).

        ColorSpace cs = ColorSpace.getInstance(ColorSpace.CS_GRAY);
        ColorConvertOp op = new ColorConvertOp(cs, null);
        temp = op.filter(temp, null);

        BufferedImage newImage = temp;
        picDisplay.setIcon(new ImageIcon(newImage));
        picDisplay.updateUI();
        showing = newImage;
} 
```

在这种方法之后，我的 img 变为灰度，这很好，但是当我使用另一种方法（如翻转 img）时，它给了我很多错误：

`Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException at java.awt.image.ComponentColorModel.getDataElements(ComponentColorModel.java:1555) at java.awt.image.BufferedImage.setRGB(BufferedImage.java:988) at photoshop.GUI.VFActionPerformed(GUI.java:213) at photoshop.GUI.access$700(GUI.java:13) at photoshop.GUI$8.actionPerformed(GUI.java:113) at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018) at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341) at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402) at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259) at javax.swing.AbstractButton.doClick(AbstractButton.java:376) at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833) at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877) at java.awt.Component.processMouseEvent(Component.java:6505) at javax.swing.JComponent.processMouseEvent(JComponent.java:3321) at java.awt.Component.processEvent(Component.java:6270) at java.awt.Container.processEvent(Container.java:2229) at java.awt.Component.dispatchEventImpl(Component.java:4861) at java.awt.Container.dispatchEventImpl(Container.java:2287) at java.awt.Component.dispatchEvent(Component.java:4687) at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832) at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492) at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422) at java.awt.Container.dispatchEventImpl(Container.java:2273) at java.awt.Window.dispatchEventImpl(Window.java:2719) at java.awt.Component.dispatchEvent(Component.java:4687) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729) at java.awt.EventQueue.access$200(EventQueue.java:103) at java.awt.EventQueue$3.run(EventQueue.java:688) at java.awt.EventQueue$3.run(EventQueue.java:686) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87) at java.awt.EventQueue$4.run(EventQueue.java:702) at java.awt.EventQueue$4.run(EventQueue.java:700) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:699) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) at java.awt.EventDispatchThread.run(EventDispatchThread.java:91)`

# maven - 尽管测试失败，TeamCity 仍允许成功构建

> ID：15797506
> 
> 赞同：2
> 
> 时间：2013-04-03T20:32:16.337
> 
> 标签：maven, junit, teamcity

我正在使用 TeamCity 和 JUnit 来构建和测试我正在编写的一些软件。因为我使用的是测试驱动的开发模式，所以我构建了单元测试来测试一个特性应该如何工作（最初它总是失败，因为这个特性还没有实现），然后我开发这个特性直到它通过所有它应该进行的测试。

在 TeamCity 中，我有两个构建步骤：第一个是编译我的项目的 Maven 构建步骤，第二个是另一个仅运行单元测试的 Maven 构建步骤。我想做的是找到一种方法让“构建成功”由第一步的成功或失败来确定，然后将所有通过或失败的测试作为构建的单独部分列出日志。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:30:04.090

您可以通过进入构建的“设置”选项卡并修改“构建失败条件”选项来更改 TeamCity 中构建的失败场景。

![在此处输入图像描述](https://i.stack.imgur.com/OXQCA.png)

您可以关闭“至少一项测试失败”作为失败条件。只要所有内容都已编译，这将允许构建成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-22T13:30:51.320

对于 TeamCity，将此行添加`-Dmaven.test.failure.ignore=true`到 Build Step 中的“Additional Maven command line parameters:”中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T15:43:22.790

好的，事实证明我想做的事情需要在maven pom中配置，如下所示：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <testFailureIgnore>true</testFailureIgnore>
    </configuration>
</plugin> 
```

如果某些测试失败，这允许构建完成，如下所示： ![失败的测试成功构建](https://i.stack.imgur.com/gVFEs.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-04T07:01:23.927

> 因为我使用的是测试驱动的开发模式，所以我构建了单元测试来测试一个特性应该如何工作，然后我开发这个特性直到它通过了它应该通过的所有测试。

对不起，伙计，这根本不是测试驱动的开发。在 TDD 中，您总是只编写**一个失败的测试**，然后实现足够的代码来满足测试期望，然后重构。当所有测试（新的和旧的）都通过后，您可以将您的更改与其他测试集成。

可以按照您想要的方式设置 TeamCity，但这没有任何意义。

# arrays - 在 Servlet 上下文中从数组中添加和检索元素

> ID：15797511
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:32:28.317
> 
> 标签：arrays, servlets

我在 Servlet 上下文中有一个数组，我想从不同的 servlet 添加和检索该数组的元素。

我怎样才能做到这一点 ？

我这样做是为了获取整个列表：

```
 out.println(getServletContext().getAttribute("list")); 
```

list 是数组的名称，那么我该怎么做才能将元素添加到该列表中，以及获取索引为 0 的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:45:54.877

您发布的代码将数组打印到编写器`out`。要获取引用数组的变量，只需执行

```
String[] array = (String[]) getServletContext().getAttribute("list"); 
```

（当然，假设数组是一个字符串数组）。

# css - CSS 词法错误

> ID：15797519
> 
> 赞同：0
> 
> 时间：2013-04-03T20:32:53.040
> 
> 标签：css, wordpress, syntax-error, lexical

我在图像的显示方式上遇到了问题，因此我通过 W3C CSS 验证器运行它并收到了此代码。我试图四处寻找它可能意味着什么，但找不到太多帮助。我发现有人说这可能是因为 CSS 中的特殊字符，所以我在记事本 ++ 中检查并没有找到任何东西。

> 第2840章
> 
> > 第 2838 行第 10 列出现词汇错误。遇到：“” (32)，之后：“#” post-9 #whoweare { width:100%; }

```
# post-9 #whoweare {
    width:100%;
} 
```

第 2840 行是最后一行。

任何想法这可能是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:34:06.437

删除它们之间的空格，`#`它们之间`post-9`就有一个[后代组合](http://www.w3.org/TR/css3-selectors/#descendant-combinators)器。

```
#post-9 #whoweare {
   width:100%;
} 
```

# jquery - 显示 gif 动画

> ID：15797521
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:32:53.757
> 
> 标签：jquery

我有这段代码来加载一个 gif，但我不明白这`$(".block1").load("views/changepass.template.php");`部分。请解释。

```
$(function() {
    $(".changepass").click(function() {
        $(".block1").load("views/changepass.template.php");
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:40:26.320

这是脚本的注释版本，它应该解释一切：

```
$(function() {//When the document is ready to be interacted with, ...
    $(".changepass").click(function() {//establish a 'click' event handler for .changepass element(s), which ...
        $(".block1").load("views/changepass.template.php");//loads content from the server into .block1 element(s), then ...
        return false;//ensures the natural 'click' action of the clicked element is not executed.
    });
}); 
```

# r - 加载并执行 R 源文件

> ID：15797522
> 
> 赞同：2
> 
> 时间：2013-04-03T20:32:55.707
> 
> 标签：r

考虑这种形式的源文件：

```
# initialize the function
f = function() {
 # ...
}

# call the function
f() 
```

在python中，该`import`函数将加载*并*执行文件；但是在 R 中，该`source`命令**会**初始化源文件定义的函数，但如果在文件中调用函数，**则不会**调用这些函数。

是否有任何 R 命令（或选项）来导入*和*执行文件？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T20:40:26.217

`?source`状态：

```
Description:

     ‘source’ causes R to accept its input from the named file or URL
     or connection.  Input is read and ‘parse’d from that file until
     the end of the file is reached, then the parsed expressions are
     evaluated sequentially in the chosen environment. 
```

所以，

1.  `source` *是*您正在寻找的功能，
2.  我驳斥了您的主张-`source`根据文档为我工作
3.  如果您*没有*看到记录在案的行为，那么一定是您没有告诉我们的其他问题。

    你如何推断`source`​​没有执行你的`f`？

我可以想到一种您可能不知道的情况，记录在 中`?source`，即：

```
Details:

     Note that running code via ‘source’ differs in a few respects from
     entering it at the R command line.  Since expressions are not
     executed at the top level, auto-printing is not done.  So you will
     need to include explicit ‘print’ calls for things you want to be
     printed (and remember that this includes plotting by ‘lattice’,
     FAQ Q7.22). 
```

看不到按名称调用的对象的输出或未显示基于网格图形的绘图是**自动打印**未激活的症状，因为评估未在顶层进行。您需要明确`print()`对象，包括基于网格的图形，如 Lattice 和 ggplot2 图形。

还要注意`print.eval`参数，默认为

```
> getOption("verbose")
[1] FALSE 
```

这也可能对您有用。

# c++ - 升级到更新版本后提升 fusion/mpl 问题

> ID：15797525
> 
> 赞同：1
> 
> 时间：2013-04-03T20:33:03.283
> 
> 标签：c++, boost, boost-mpl, boost-fusion

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:08:42.670

使用：

```
typedef boost::fusion::result_of::filter_if<
            map_type
            , 
            boost::mpl::lambda<
                boost::mpl::contains<
                    vec_ids_type
                    , 
                    get_first<
                        boost::mpl::_1
                    >
                >
            >::type
        >::type view_type; 
```

[正如您在此处](http://liveworkspace.org/code/TjtcB%240)看到的那样，似乎可以使其正常工作。目前 LiveWorkspace 使用 boost 1.53.0。

# templates - angularJs 模板

> ID：15797526
> 
> 赞同：1
> 
> 时间：2013-04-03T20:33:03.380
> 
> 标签：templates, angularjs

我是 Angular 新手，我正在寻找一种方法来实现教程中提到的更高级的[模板](http://docs.angularjs.org/tutorial/step_07)

1.) 我想为登录页面设置一个不同的模板，并在您登录后使用另一个模板

2.) 拥有多个 ng-view-s 的功能会很好，这样您就可以在每个 url 上以不同的方式提交不同的模板片段......是否有可能以角度实现这一点

3.）是否有更好/更容易使用的模板机制，比如其他一些 js 框架？

理想的情况是在客户端使用类似 facelets 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:49:25.490

虽然不可能有多个 ng-views，但您当然可以拥有多个路由，每个路由映射到一个控制器和一个视图。这将有助于进一步阅读如何使用控制器、路由等。您还可以使用 ng-include 一次或多次，将静态或动态模板 url 映射到控制器中的变量。

AngularJS 在 MVC 性、可扩展性、微调、测试、数据绑定、模板等方面是最好的（如果不是最好的）多功能 JS UI 框架之一。你通常不会出错，只需要花一些开始习惯模式、习语和术语的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T05:12:41.647

我建议研究[ui-router](https://github.com/angular-ui/ui-router)以进行嵌套视图。

# java - 使用 spock 存根动作侦听器

> ID：15797527
> 
> 赞同：0
> 
> 时间：2013-04-03T20:33:03.913
> 
> 标签：java, unit-testing, spock

我的演示者中有这个：

```
private void init() {
    view.subscribeOnButtonClick(new Clickable() {
        @Override
        public void clickPerformed() { sortArray(); }
    });
} 
```

我想在我的测试中记住这个可点击的对象，以便在“何时”部分触发它（模拟按钮点击）

我试过这样：

```
def view = Mock(ArraySorterView)
def clickable
view.subscribeOnButtonClick(_) >> { x -> clickable = x }
when:
clickable.clickPerformed() 
```

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:59:31.580

我找到了解决方案。我需要这样写：

```
view.subscribeOnButtonClick(_) >> { Clickable x -> clickable = x } 
```

由于如果未指定类型，spock 将未命名参数视为参数列表。

# ios - 以编程方式点击 UIButton 不起作用

> ID：15797530
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:33:10.260
> 
> 标签：ios, objective-c

我有一个使用 XCode 4.6、Storyboards、iOS 6.2 的 iPad 应用程序。我查看了 SO 和 Google，但没有关于**何时**将消息发送到按钮。
当用户离开“场景”但它不起作用时，我试图将一些数据保存到 CoreData。
这是代码：

```
-(void) viewWillDisappear:(BOOL)animated  {

     [bSavePreferences sendActionsForControlEvents:UIControlEventTouchUpInside];

} 
```

-bSavePreferences 与 viewWillDisappear 属于同一类，但它永远不会被调用。为什么？

**更新：我应该提到我正在使用 UITabBarController 来控制选择哪个页面。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:43:46.417

一些东西...

1.  您不应该以这种方式调用操作。您应该直接调用 IBAction 方法来进行保存。

2.  在实现 viewWillDisappear 时，您需要在某个时候调用 [super viewWillDisappear:animated]。

3.  至于根本问题，调用 viewWillDisappear 以响应从视图层次结构中删除的视图。此时 UIButton 可能不再能够接收事件。我鼓励您查看[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewWillDisappear%3a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:05:06.043

有多种方法：

一种方法是向按钮添加目标操作：

```
 [myButton addTarget:self 
         action:@selector(myAction) forControlEvents:UIControlEventTouchUpInside]; 
```

第二种选择是使用 IBActions：

```
- (IBAction)ButtonPressed { NSLog@"press"; } 
```

确保正确连接插座！

# ios6 - UICollectionView from storyboard: is scrolling implemented by default?

> ID：15797534
> 
> 赞同：0
> 
> 时间：2013-04-03T20:33:20.180
> 
> 标签：ios6, xcode4.6

With *XCode 4.6* building for *iOS 6.1*, I'm using a `UICollectionView` from a storyboard, and I thought that the class implemented scrolling by default. I have made a simple test app with a storyboard that has just a *Collection View* and one *Collection View Cell*, and code that implements just `collectionView:cellForItemAtIndexPath:` and `collectionView:numberOfItemsInSection:`, calling for enough cells so that scrolling is required to see all the cells.

I thought that with nothing else, I would be able to scroll vertically within the `UICollectionView`. It shows the visible cells but doesn't scroll. What am I missing here?

Why wouldn't this component allow me to scroll vertically, what am I unable to see?

The implementation code is about as simple as possible:

```
//
//  TestpViewController.h
//

#import <UIKit/UIKit.h>

@interface TestpViewController : UIViewController <UICollectionViewDataSource, UICollectionViewDelegate>

@end

//
//  TestpViewController.m
//

#import "TestpViewController.h"

@interface TestpViewController ()
@property (weak, nonatomic) IBOutlet UICollectionView *collectionView;

@end

@implementation TestpViewController

- (void)viewDidLoad
{   
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (NSInteger)collectionView:(UICollectionView *)collectionView
     numberOfItemsInSection:(NSInteger)section
{
    return 30;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
                  cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"testCell" forIndexPath:indexPath];
    return cell;
}

@end 
```

# php - 使用 SilverStripe 的每个页面请求的随机对象

> ID：15797540
> 
> 赞同：6
> 
> 时间：2013-04-03T20:33:38.100
> 
> 标签：php, silverstripe

假设您在每个页面请求中显示一个随机语句，并使用一个函数返回一个随机对象，例如：

```
Statement::get()->sort("RAND()")->limit("1"); 
```

但是现在在模板中，您想在不同的地方引用它两次，但它应该是相同的语句，而不是随机不同的语句。您如何确保每个页面请求获得相同的随机对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:57:58.440

用一个记住对象的静态变量定义一个函数怎么样？

```
public function rndObj() {
   static $obj = null;
   if(!isset($obj)){
      $obj = Statement::get()->sort("RAND()")->limit("1")->first();
   }
   return $obj;
} 
```

然后`rndObj`在模板中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-14T23:53:04.583

一种方法是在控制器`init`函数中获取随机语句并将其分配给私有变量。我们添加一个 getRandomStatement 函数来获取随机语句：

```
class Page_Controller extends ContentController {

    private $randomStatement;

    public function init() {
        parent::init();

        $this->randomStatement = Statement::get()->sort('RAND()')->limit(1)->first();
    }

    public function getRandomStatement() { 
        return $this->randomStatement;
    }
} 
```

# nginx - Nginx - 无法通过使用 proxy_pass 到 gunicorn 的欢迎页面

> ID：15797541
> 
> 赞同：0
> 
> 时间：2013-04-03T20:33:40.227
> 
> 标签：nginx, gunicorn

我正在尝试设置 nginx 以传递给 gunicorn 后端以运行 Django 项目。不幸的是，似乎无论我尝试什么，我似乎都无法让 nginx 显示欢迎页面以外的任何内容。

*   尝试了支持站点的方法以及单一的 nginx.conf 方法
*   确认nginx实际上是在读取我的nginx.conf--如果我把乱码放在文件里，它会拒绝启动，抱怨乱码
*   删除了启用站点中的“默认”配置
*   确认gunicorn启动成功

我的 nginx.conf 如下：

```
user www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
    # multi_accept on;
}

http {
    #include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/sites-enabled/*;
} 
```

在可用的站点中，我有文件“localhost”。然后将该文件符号链接到启用站点的文件中。

```
server {
    listen  80 default_server;
    server_name localhost;
    access_log /srv/www/menus-dev/logs/access.log;
    error_log /srv/www/menus-dev/logs/error.log;
    root    /srv/www/menus-dev/http;

    location / {
        proxy_pass http://127.0.0.1:8888;
    }

    location /static {
        root /srv/www/menus-dev/static_files;
    }
} 
```

有什么建议么？我正在用头撞墙。一切都告诉我这应该可以正常工作，但我就是无法让它运行。

这是在 Ubuntu Precise 32 位 Vagrant VM（虚拟机）上运行的，物有所值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:43:18.980

根据这篇[文章](http://wiki.nginx.org/Pitfalls#Config_Changes_Not_Reflected)，`sendfile`指令与 virtualbox 有一些问题。您可以将其关闭以查看是否有帮助。

除此之外，我在 nginx 配置文件上看不到问题。可能是浏览器中的一些缓存问题，或者您的应用程序需要一些您需要从 nginx 传递的特定标头或 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:36:22.250

所以，这是我自己做的。原来我正在运行的机器有一个未配置版本的 nginx 在同一个端口上本地运行（有点吓人......），因此它正在回答请求。每次我刷新页面时，它都是从本地主机加载的，而不是 Vagrant 客户机。手掌，见面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T07:43:59.033

就我而言，我的浏览器正在从缓存中重复加载我的网站。一旦我清除了浏览器历史记录，nginx 就会加载新的配置文件。

# c# - 左外连接错误

> ID：15797542
> 
> 赞同：1
> 
> 时间：2013-04-03T20:33:44.483
> 
> 标签：c#, linq

我试图让这个左外连接工作，但我似乎遇到了一些问题。我从[MSDN left join 文章](http://msdn.microsoft.com/en-us/library/vstudio/bb397895.aspx)中获取了示例代码。这个例子是 LINQ 语法，但我想要我的扩展方法语法，所以我也引用了这个[SO](https://stackoverflow.com/questions/584820/how-do-you-perform-a-left-outer-join-using-linq-extension-methods) question。

```
Person magnus = new Person { FirstName = "Magnus", LastName = "Hedlund" };
Person terry = new Person { FirstName = "Terry", LastName = "Adams" };
Person charlotte = new Person { FirstName = "Charlotte", LastName = "Weiss" };
Person arlene = new Person { FirstName = "Arlene", LastName = "Huff" };

Pet barley = new Pet { Name = "Barley", Owner = terry };
Pet boots = new Pet { Name = "Boots", Owner = terry };
Pet whiskers = new Pet { Name = "Whiskers", Owner = charlotte };
Pet bluemoon = new Pet { Name = "Blue Moon", Owner = terry };
Pet daisy = new Pet { Name = "Daisy", Owner = magnus };

// Create two lists.
List<Person> people = new List<Person> { magnus, terry, charlotte, arlene };
List<Pet> pets = new List<Pet> { barley, boots, whiskers, bluemoon, daisy };

var query = people
            .GroupJoin(pets,
            p1 => p1.FirstName,
            p2 => p2.Owner.FirstName,
            (p1, p2) => new {p1,p2})
            .SelectMany(x => x.p2.DefaultIfEmpty(),
             (x, y) => new { FirstName = x.p1.FirstName, PetName = y.Name });

        foreach (var v in query)
        {
            Console.WriteLine("{0,-15}{1}", v.FirstName + ":", v.PetName);
        } 
```

我的查询与我引用的代码基本相同，但出现此错误：

```
NullReferenceException
Object reference not set to an instance of an object. 
```

这应该非常简单。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:38:50.017

您缺少示例查询的那部分：

```
PetName = (subpet == null ? String.Empty : subpet.Name) 
```

在您的查询中，它只是`PetName = y.Name`，所以只要列表中没有相应的行，`pets`您就会得到`NullReferrenceException`因为`y`is `null`。

应该：

```
var query = people
            .GroupJoin(pets,
            p1 => p1.FirstName,
            p2 => p2.Owner.FirstName,
            (p1, p2) => new { p1, p2 })
            .SelectMany(x => x.p2.DefaultIfEmpty(),
                (x, y) => new { FirstName = x.p1.FirstName, PetName = (y == null ? String.Empty : y.Name) }); 
```

或者您可以使用`DefaultIdEmpty(TSource)`方法重载：

```
var def = new Pet { Name = string.Empty };

var query = people
            .GroupJoin(pets,
            p1 => p1.FirstName,
            p2 => p2.Owner.FirstName,
            (p1, p2) => new { p1, p2 })
            .SelectMany(x => x.p2.DefaultIfEmpty(def),
                (x, y) => new { FirstName = x.p1.FirstName, PetName = y.Name }); 
```

# c# - how can I use the string separators method in C# to remove paragraph symbols from a text file?

> ID：15797546
> 
> 赞同：0
> 
> 时间：2013-04-03T20:33:59.010
> 
> 标签：c#

I'm trying to use the string separator method to remove paragraph symbols from a text file.

I've done several google searches but haven't gotten this to work. I've tried `"\xB6"`, `"\x U+2029"`, and several derivatives but to no success.

Here is the line I've been using:

```
string[] separators = { ",", ".", "!", "?", ";", ":", " ", "-", "#", "  ", "   ", "\r", "\t", "\f", "\xB6" }; 
```

I would really appreciate your help. If you'd be kind enough to include a short sample with your answer this would help me tremendously; because, as a beginner I tend to trip up frequently with syntax.

P.S. If you have any good referential links to share regarding C# and text parsing I promise you a large land grant after I've taken over the world by text parsing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T22:08:16.497

我会使用十六进制查看器来查看这些段落分隔符是什么字符代码。然后你就会知道要过滤什么。

# asp.net - ambiguous assembly with asp.net

> ID：15797547
> 
> 赞同：2
> 
> 时间：2013-04-03T20:34:00.760
> 
> 标签：asp.net, gac

We have a server with about 200 web sites that all run code from the same assemblies. So for efficiency the assemblies are registered in the gac with the version number 1.0.0.0 They want to do a development site where the code differs from what is in the gac. The solution is comprised of several projects, one being a web application and it references 3 other c# library projects. I've updated all 4 projects version from 1.0.0.0 to 1.0.0.1 and then pushed the new compiled files to a development folder on the same server as all the other sites. From what I was reading, this should force that development site to use the dlls in the local bin directory rather than what's in the gac due to the version increment. However, when I run this I get the error from my global.asax ...

The type 'CMIWeb.Global' is ambiguous: it could come from assembly 'C:\WINDOWS\Microsoft.Net\assembly\GAC_MSIL\CMIWeb\v4.0_1.0.0.0__671ea09b8c72436a\CMIWeb.dll' or from assembly 'D:\Inetpub\wwwroot\cmidev\bin\CMIWeb.DLL'. Please specify the assembly explicitly in the type name.

I'm not sure how to get around this.

edit: Here's the bindingRedirect addition to the web.config file

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

        <dependantAssembly name="CMIWeb" PublicKeyToken="671ea09b8c72436a" culture="en-us" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="1.0.0.1" />

        <dependantAssembly name="CMIBLL" PublicKeyToken="16740601ec0c3aab" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="1.0.0.1" />

        <dependantAssembly name="CMIData" PublicKeyToken="6016b538121b0f75" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="1.0.0.1" />

        <dependantAssembly name="CMIObjects" PublicKeyToken="110dd5d29fab7114" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="1.0.0.1" />

        <dependantAssembly name="CMISettings" PublicKeyToken="90ce34438590d2f3" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="1.0.0.1" />

    </assemblyBinding>
</runtime> 
```

When this didn't work I also tried adding the following, but it still complains with the same error.

```
<compilation debug="true" targetFramework="4.0">
      <assemblies>
          <add assembly="CMIBLL, Version=1.0.0.1, Culture=neutral, PublicKeyToken=16740601ec0c3aab" />
          <add assembly="CMIData, Version=1.0.0.1, Culture=neutral, PublicKeyToken=6016b538121b0f75" />
          <add assembly="CMIObjects, Version=1.0.0.1, Culture=neutral, PublicKeyToken=110dd5d29fab7114" />
          <add assembly="CMISettings, Version=1.0.0.1, Culture=neutral, PublicKeyToken=90ce34438590d2f3" />
          <add assembly="CMIWeb, Version=1.0.0.1, Culture=neutral, PublicKeyToken=671ea09b8c72436a" />
      </assemblies>
  </compilation> 
```

# extjs - Ext.draw.Component 渐变不显示在 IE 中

> ID：15797562
> 
> 赞同：0
> 
> 时间：2013-04-03T20:34:45.323
> 
> 标签：extjs, extjs4, extjs4.1

我不可能是唯一遇到这个问题的人，但我的搜索让我迷失了方向。

我有一个使用渐变填充的自定义 Ext.draw.Component。我的理解是旧的浏览器不支持渐变，但我认为 Sencha 通过将 CSS 添加到渲染的对象来解决这个问题。

**Chrome**中的组件： **IE**![铬合金](https://i.stack.imgur.com/Xg1Dx.png)中的 组件： **![IE](https://i.stack.imgur.com/J35Lz.png)**

 **我的问题是：

1.  Ext.js 可以将渐变渲染到 IE8 和 IE9 吗？（IE10显示正常）
2.  有没有办法确定浏览器是否不会渲染渐变，我可以只显示其他东西（即，如果没有白色省略号，IE 中的组件看起来不会那么糟糕）？

**更新**
这是生成红绿灯的代码。[http://jsfiddle.net/wilsjd/Ts2qU/10/](http://jsfiddle.net/wilsjd/Ts2qU/10/)

```
 var sencha = Ext.create('Ext.draw.Component', {
        width: 170,
        height: 170,
        renderTo: this.get('elementToRenderTo'),
        gradients: [{
            id: 'middleGradient',
            angle: 180,
            stops: {
                0: {
                    color: this.get('backgroundColor'),
                    opacity: 1
                },
                50: {
                    color: this.get('backgroundColor'),
                    opacity: .6
                },
                100: {
                    color: this.get('backgroundColor'),
                    opacity: 1
                }
            }
        }, {
            id: 'lightGradient1',
            angle: -90,
            stops: {
                0: {
                    color: '#ffffff',
                    opacity: 0.01
                },

                100: {
                    color: '#ffffff',
                    opacity: .8
                }

            }
        }, {
            type: 'radial',
            id: 'radialGradient1',
            centerX:123.88702,
            centerY:391.47498,
            radius:166.47372,
            focalX:124.57159,
            focalY:391.47498,
            stops: {
                0: {
                    color: '#ffffff',
                    opacity: 0.01
                },

                100: {
                    color: '#ffffff',
                    opacity: .8
                }

            }
        }],
        items: [{
            type: 'rect',
            x: 1.6620979,
            y: 52.362183,
            radius: 90,
            width: 448.10959,
            height: 1000,
            fill: 'url(#middleGradient)',
            stroke: 'none'
        }, {
            type: "circle",
            radius: 140,
            x:224,
            y:896,
            stroke: "#000000",
                'stroke-width': 7,
            fill: this.get('goodColor')
        }, {
            type: "circle",
            x:224,
            y:214,
            radius:140,
            stroke: "#000000",
                'stroke-width': 7,
            fill: this.get('poorColor')
        }, {
            type: "circle",
            x:224,
            y:555,
            radius: 140,
            stroke: "#000000",
                'stroke-width': 7,
            fill: this.get('cautionColor')
        }, {
            type: "ellipse",
            radiusX: 112,
            radiusY: 80,
            x: 224,
            y: 156,
            fill: 'url(#lightGradient1)'
        }, {
            type: "ellipse",
            radiusX: 112,
            radiusY: 80,
            x: 224,
            y: 498,
            fill: 'url(#lightGradient1)'
        }, {
            type: "ellipse",
            radiusX: 112,
            radiusY: 80,
            x: 224,
            y: 838,
            fill: 'url(#lightGradient1)'
        }, {
            type: "text",
            text: this.get('poorValue'),
            x: poorValueX,
            y: 210,
            fill: "Black",
            font: "80px bold"
        }, {
            type: "text",
            text: this.get('cautionValue'),
            x: cautionValueX,
            y: 550,
            fill: "Black",
            font: "80px bold"
        }, {
            type: "text",
            text: this.get('goodValue'),
            x: goodValueX,
            y: 890,
            fill: "Black",
            font: "80px bold"
        }, {
            type: "text",
            text: poorLabel,
            x: 500,
            y: 210 + poorChangeY,
            fill: "Black",
            font: "80px bold"
        }, {
            type: "text",
            text: cautionLabel,
            x: 500,
            y: 550 + cautionChangeY,
            fill: "Black",
            font: "80px bold"
        }, {
            type: "text",
            text: goodLabel,
            x: 500,
            y: 890 + goodChangeY,
            fill: "Black",
            font: "80px bold"
        }, {
            type: "text",
            text: this.get('title'),
            x: 0,
            y: 0,
            fill: "Black",
            font: "100px bold"
        }, {
            type: "text",
            text: "Total = " + this.get('total'),
            x: 100,
            y: 1150,
            fill: "Black",
            font: "80px bold"
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T17:45:21.277

1.  Ext.js 确实可以在 IE 中渲染渐变，但是在这种情况下它不起作用（仍然需要来源来确定原因）
2.  添加 if 语句以确定浏览器是 IE8 还是 IE9（我也检查了文档模式 - 如果在 IE8 文档模式下 IE10 不起作用），然后添加我的省略号）**

# android - Android - 启动接收器错误

> ID：15797567
> 
> 赞同：0
> 
> 时间：2013-04-03T20:35:00.237
> 
> 标签：android, broadcastreceiver, boot

所以我有一个应该调用意图服务的引导接收器，但接收器根本没有注册。

清单文件 -

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<receiver android:name=".ClockReciever">
    <intent-filter >
       <action android:name="android.intent.action.BOOT_COMPLETED"/>
       <action android:name="android.intent.action.QUICKBOOT_POWERON" />
    </intent-filter>
</receiver> 
```

时钟接收器.java

```
public class ClockReceiver extends BroadcastReceiver {
    private final String TAG = "ClockReciever";
    @Override
    public void onReceive(Context context, Intent intent) {
       Log.d(TAG,"onRecive");
       context.startService(new Intent(context, RefreshIntentService.class));
    }

} 
```

我认为这是正确的，但根据我的 logcat，ClockReciever 从未被调用，并且程序因“无法实例化接收器”错误而崩溃。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:37:10.347

在这里你有一个错字

```
<receiver android:name=".ClockReciever"> 
```

应该是`ClockReceiver`，即与您的班级相同。

干杯!

# c# - 如何在另一台机器上生成临时文件名？

> ID：15797568
> 
> 赞同：0
> 
> 时间：2013-04-03T20:35:10.637
> 
> 标签：c#

我需要将我的数据写入另一台机器上的文件。以前，一切都在一台机器上，所以我用

```
var fileTmp = System.IO.Path.GetTempFileName();
System.IO.File.WriteAllBytes(fileTmp, data); 
```

但是如何在另一台机器上生成一个临时文件名，例如 MyServerName？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:42:08.927

如果您对另一台计算机具有本地管理员访问权限，则可以使用管理员共享

```
\\HOSTNAME\c$\pathtofile 
```

您可以像这样生成一个唯一的文件名

```
var myUniqueFileName = string.Format(@"{0}.txt", Guid.NewGuid()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:42:23.003

没有简单的方法可以做到这一点。否则，您的计算机将充满病毒。

您将不得不使用某种网络服务并从远程机器公开该服务。我会考虑：

*   ASP NET RESTful API
*   WCF 服务
*   带有消息队列提供程序的 Windows 服务
*   网络共享

不过要小心安全。写权限不能轻易授予网络服务。

# python - Rally Python Api：添加对缺陷的讨论

> ID：15797569
> 
> 赞同：1
> 
> 时间：2013-04-03T20:35:13.220
> 
> 标签：python, rally, pyral

如何使用 Pyral 为 Rally 缺陷创建讨论项？

这是我到目前为止所拥有的：

```
rally = Rally(server, user, password)
rally.enableLogging('rallyConnection.log')
rally.setProject("RallyTestPrj")

defectID = 'DE9221'
notes = "Adding new note from Python"
discussion = "Adding discussion from Python"

defect_data = { "FormattedID" : defectID,
                "Notes"       : notes,
                "Discussion"  : discussion
}

try:
defect = rally.update('Defect', defect_data)
except Exception, details:
sys.stderr.write('ERROR: %s \n' % details)
sys.exit(1)
print "Defect updated" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:21:15.090

实际上，集会中的讨论项是集会神器，就像缺陷、故事或任务一样。为了做你想做的事，你需要创建一个新的 Discussion 工件（或在集会 API 术语中的 ConversationPost），并告诉它与哪个现有工件（在你的情况下是缺陷）相关联。

```
rally = Rally(server, user, password)
rally.enableLogging('rallyConnection.log')
rally.setProject("RallyTestPrj")

defectID = 'DE9221'
discussion_text = "Adding discussion from Python"

# get the defect entity so we can grab the defect oid which we'll need when
# creating the new ConversationPost
defect = rally.get('Defect', query='FormattedID = %s' % defectID, instance=True)

discussion_data = {"Artifact": defect.oid, "Text": discussion_text}

# create the discussion
try:
    discussion = rally.create('ConversationPost', discussion_data)
except Exception, details:
    sys.stderr.write('ERROR: %s \n' % details)
    sys.exit(1)
print "Defect updated with a new discussion entry" 
```

# facebook - iOS Facebook SDK 3.2 图像发布 w/Description Open Graph

> ID：15797570
> 
> 赞同：0
> 
> 时间：2013-04-03T20:35:18.077
> 
> 标签：facebook, ios6, facebook-opengraph

无论我尝试什么，我都无法让我的描述出现在 Facebook 上。我使用了调试器，生成的链接一切正常，并且 URL 填充了适当的数据。图片上传正常，但没有描述。我需要在应用程序的 Facebook 设置中设置什么吗？

以下是相关代码：

```
- (id<FBPost>)outfitObjectForOutfit{

id<FBPost> result = (id<FBPost>)[FBGraphObject graphObject];

NSString *format =
@"http://mysite.mobi/app/fbOpen.php?"
@"og:title=%@&og:description=%%22%@%%22&"
@"og:caption=%%22%@%%22&"
@"og:image=http://mysite.mobi/images/transBlank.png&"
@"body=%@";
result.url = [NSString stringWithFormat:format,
              @"New Post Title",fldDescription.text,fldDescription.text,fldDescription.text];
return result;
} 
```

以及发布到FB的部分：

```
 - (void)postOpenGraphActionWithPhotoURL:(NSString*)photoURL
{

id<FBPost> outfitObject = [self outfitObjectForOutfit];

id<FBPostOutfit> action =
(id<FBPostOutfit>)[FBGraphObject graphObject];

action.outfit=outfitObject;

   if (photoURL) {
    NSMutableDictionary *image = [[NSMutableDictionary alloc] init];
    [image setObject:photoURL forKey:@"url"];

    NSMutableArray *images = [[NSMutableArray alloc] init];
    [images addObject:image];

    action.image = images;
}
[FBSettings setLoggingBehavior:[NSSet
                                setWithObjects:FBLoggingBehaviorFBRequests,
                                FBLoggingBehaviorFBURLConnections,
                                nil]];
NSLog(@"%@",action);
NSMutableDictionary *params = [NSMutableDictionary dictionary];
[params setObject:fldDescription.text forKey:@"message"];
[FBRequestConnection startForPostWithGraphPath:@"me/appnamespace:action"
                                   graphObject:action
                             completionHandler:
 ^(FBRequestConnection *connection, id result, NSError *error) {
     NSString *alertText;
     if (!error) {
         alertText = [NSString stringWithFormat:
                      @"Posted Open Graph action, id: %@",
                      [result objectForKey:@"id"]];
     } else {
         alertText = [NSString stringWithFormat:
                      @"error: domain = %@, code = %d",
                      error.domain, error.code];
         NSLog(@"%@",error);
     }
     [[[UIAlertView alloc] initWithTitle:@"Result"
                                 message:alertText
                                delegate:nil
                       cancelButtonTitle:@"Thanks!"
                       otherButtonTitles:nil]
      show];
 }
 ];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:01:51.917

我发现了我的问题。我混淆了 Facebook 示例所做的（活动发布）与发布到用户墙上的内容。这就是我必须做的所有事情才能让它工作：

```
NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
[params setObject:fldDescription.text forKey:@"message"];
[params setObject:UIImagePNGRepresentation(userImage) forKey:@"picture"];

[FBRequestConnection startWithGraphPath:@"me/photos"
                             parameters:params
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error)
 {
     if (error) {

         [[[UIAlertView alloc] initWithTitle:@"Result"
                                     message:@"Sorry there was an error posting to Facebook."
                                    delegate:nil
                           cancelButtonTitle:@"OK"
                           otherButtonTitles:nil]
          show];
     }
 }]; 
```

我还应该提到，我必须进入我的应用程序的 opengraph 设置并允许用户消息和用户生成的照片。

# html - html提交按钮保持在同一页面上

> ID：15797575
> 
> 赞同：0
> 
> 时间：2013-04-03T20:35:25.057
> 
> 标签：html

我正在用 html5/css/js 编写一个移动应用程序。在第一页 index.html 上，我制作了一个带有指向 result.html 的提交按钮的表单（使用 formaction="result.html"）。但是当我在 Chrome 中打开 index.html 只是为了调试应用程序时，提交按钮不会将用户带到 result.html，而是停留在 index.html 上。怎么了？谢谢

```
<form name="userdata" method="get"> 
    <input type="number" step="any" class="hiddenbutton" name="userVolume" value="" >
    <button type="submit" id="submitbutton" name="issubmitted" value="no" class="submitbutton" formmethod="get" formaction="result.html">Submit</button>
</form> 
```

它不适用于：

```
<form name="userdata" method="get" action="result.html">
    <input type="number" step="any" class="hiddenbutton" name="userVolume" value="" >
    <button type="submit" id="submitbutton" name="issubmitted" value="no" class="submitbutton">Submit</button>
</form> 
```

**编辑：**我刚刚发现当我使用 firefox 而不是 Chromium (Ubuntu) 时没有问题。关于发生了什么的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:40:31.320

我认为您需要将其明确声明为属性，即“表单”中的“动作”属性。

```
<form name="userdata" method="get" action="result.html">

    <input type="number" step="any" class="hiddenbutton" name="userVolume" value="" >

    <button type="submit" id="submitbutton" name="issubmitted" value="no" class="submitbutton" formmethod="get" formaction="result.html">Submit</button>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:22:28.937

我删除了表单和提交按钮的所有 action 和 formaction 属性，我决定将我的页面编码为 SPA（单页应用程序），所以我使用 jquery 转到下一页：

```
 $.mobile.changePage($('#result-page')); 
```

# c# - 使用 Winform，从 sql server 中删除一条记录，并检查文件是否存在

> ID：15797577
> 
> 赞同：1
> 
> 时间：2013-04-03T20:35:29.677
> 
> 标签：c#, sql-server, winforms

我的程序有一个“删除”表单，用户可以在其中输入记录键，它将删除整个记录。记录键是我的主键。在我的数据库中有一个名为“resumelink”的字段。简历链接只有文件名和扩展名，例如“Doc100.pdf”。当我在删除表单中输入记录键时，我希望它首先检查是否存在类似于 resumelink 字段中的文件。如果有，它将删除它。如果没有，它将继续完整地删除记录。

我知道如何使用 File.Exists，但如何使用 resumelink 字段来获取特定的记录键？下面是我的删除按钮的代码。这很简单。

```
 using (SqlCommand deleteCommand = connection.CreateCommand())
                    {
                        deleteCommand.CommandText = "DELETE FROM HRresume WHERE recordkey = @recordkey";
                        deleteCommand.Parameters.AddWithValue("@recordkey", recordkeyAdd.Text);
                        deleteCommand.Connection.Open();
                        deleteCommand.ExecuteNonQuery();
                        MessageBox.Show("Resume Deleted.");
                        connection.Close();
                        this.Dispose();
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:49:23.063

据我了解，这`resumelink`是该`HRresume`表中的另一列。假设这是 SQL Server，您可以使用如下查询：

```
DELETE FROM HRresume 
OUTPUT DELETED.resumelink
WHERE recordkey = @recordkey 
```

这将删除记录，同时输出`resumelink`列的值。

从那里更改`deleteCommand.ExecuteNonQuery()`并`deleteCommand.ExecuteReader()`读取文件名。

# javascript - Bootstrap Tooltip 显示在元素下

> ID：15797581
> 
> 赞同：6
> 
> 时间：2013-04-03T20:35:54.143
> 
> 标签：javascript, html, twitter-bootstrap, tooltip, z-index

当我将鼠标悬停在元素上时，工具提示显示在元素下方。元素的 z-index 为 2，而工具提示为 1030。我不确定发生了什么。它也仅适用于某些元素，即使它们具有相同的标记。

这是发生在[http://darebounty.com/streams/11上的页面](http://darebounty.com/streams/11)

它是页面底部的形状（红色、蓝色、黄色等）#rune_page_view

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-27T23:31:16.263

我遇到了这个问题，并且为了解决它而搞乱了 z-indexing，但它最终是徒劳的。然后我检查了[这个链接](http://www.w3schools.com/bootstrap/bootstrap_ref_js_tooltip.asp)。

我发现“data-container='body'”属性非常有用。它能够让我的工具提示出现在所有内容上（以便用户实际阅读它们），这是我想大多数人想要的。

希望对将来遇到此问题的任何人有所帮助。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T10:37:33.390

我有完全相同的问题。

就我而言，原因是封闭`DIV`元素已`overflow: hidden`设置。

我将其更改为`overflow: visible`并且有效。

也许这会有所帮助:)。

# c#-4.0 - 创建未附加的实体框架 DbContext 实体

> ID：15797584
> 
> 赞同：0
> 
> 时间：2013-04-03T20:36:02.133
> 
> 标签：c#-4.0, entity-framework-5, dbcontext

因此，我正在开发一款应用程序，该应用程序将从一个数据库中选择数据，并根据创作数据库中“发布”表中包含的信息更新相同的数据库。我需要获取一个未连接到“创作”上下文的单个对象，以便可以将其添加到我的“交付”上下文中。

目前我正在使用

```
object authoringRecordVersion = PublishingFactory.AuthoringContext.Set(recordType.Entity.GetType()).Find(record.RecordId);
object deliveryRecordVersion = PublishingFactory.DeliveryContext.Set(recordType.Entity.GetType()).Find(record.RecordId)); 
```

归还我的记录。然后，如果“deliveryRecordVersion”为空，我需要将“authoringRecordVersion”插入“PublishingFactory.DeliveryContext”。但是，该对象已连接到“PublishingFactory.AuthoringContext”，因此它不允许在“PublishingFactory.DeliveryContext”上调用 Add() 方法。

我可以访问`PublishingFactory.AuthoringContext.Set(recordType.Entity.GetType()).AsNoTracking()`

但是没有办法从这里获得我需要的具体记录。有什么建议么？

更新：

我相信我找到了解决方案。第一次没有用，因为我在设置 .State = EntityState.Detached; 时引用了错误的对象；这是按预期工作的完整校正方法

```
 private void PushToDelivery(IEnumerable<Mkl.WebTeam.UWManual.Model.Publication> recordsToPublish)
    {
        string recordEntity = string.Empty;
        DbEntityEntry recordType = null;

        // Loop through recordsToPublish and see if the record exists in Delivery. If so then 'Update' the record
        // else 'Add' the record.
        foreach (var record in recordsToPublish)
        {
            if (recordEntity != record.Entity)
            {
                recordType = PublishingFactory.DeliveryContext.Entry(ObjectExt.GetEntityOfType(record.Entity));
            }

            if (recordType == null)
            {
                continue;
                ////throw new NullReferenceException(
                ////    string.Format("Couldn't identify the object type stored in record.Entity : {0}", record.Entity));
            }

            // get the record from the Authoring context from the appropriate type table
            object authoringRecordVersion = PublishingFactory.AuthoringContext.Set(recordType.Entity.GetType()).Find(record.RecordId);

            // get the record from the Delivery context from the appropriate type table
            object deliveryRecordVersion = PublishingFactory.DeliveryContext.Set(recordType.Entity.GetType()).Find(record.RecordId);

            // somthing happened and no records were found meeting the Id and Type from the Publication table in the 
            // authoring table
            if (authoringRecordVersion == null)
            {
                continue;
            }

            if (deliveryRecordVersion != null)
            {
                // update record
                PublishingFactory.DeliveryContext.Entry(deliveryRecordVersion).CurrentValues.SetValues(authoringRecordVersion);
                PublishingFactory.DeliveryContext.Entry(deliveryRecordVersion).State = EntityState.Modified;
                PublishingFactory.DeliveryContext.SaveChanges();
            }
            else
            {
                // insert new record
                PublishingFactory.AuthoringContext.Entry(authoringRecordVersion).State = EntityState.Detached;

                PublishingFactory.DeliveryContext.Entry(authoringRecordVersion).State = EntityState.Added;
                PublishingFactory.DeliveryContext.SaveChanges();
            }

            recordEntity = record.Entity;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:10:21.370

正如您在评论中所说，您不能使用的原因`.Single(a => a.ID == record.RecordId)`是 ID 属性在设计时是未知的。所以你可以做的是通过`Find`方法获取实体，然后将其从上下文中分离出来：

```
PublishingFactory.AuthoringContext
   .Entry(authoringRecordVersion).State = EntityState.Detached; 
```

# ruby-on-rails - Rails 路由 - 如何路由到具有随机 ID 号的项目

> ID：15797586
> 
> 赞同：0
> 
> 时间：2013-04-03T20:36:05.860
> 
> 标签：ruby-on-rails

我有一个非常简单的 Rails 应用程序。[我为 Card 生成了脚手架，除其他外，我可以使用 ID http://app.com/cards/3](http://app.com/cards/3)转到特定路线进行记录。

当我去根[http://app.com](http://app.com)时，我想被路由以显示带有随机 id 的随机卡，说“X”（[http://app.com/cards/X](http://app.com/cards/X)）

我很确定这是错误的，但我尝试在卡片控制器中添加以下内容：

```
def random
  @card = Card.order("RANDOM()").first
end 
```

然后添加 routes.rb：

```
root :to => 'cards#random' 
```

当我尝试去路由时，我在浏览器中遇到的错误：

```
Template is missing

Missing template cards/random, application/random with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/Users/patricia/Documents/Repos/coastguard-quiz-rails/app/views" 
```

最后，当我运行“rake routes”时，我得到：

```
 cards GET    /cards(.:format)          cards#index
          POST   /cards(.:format)          cards#create
 new_card GET    /cards/new(.:format)      cards#new
edit_card GET    /cards/:id/edit(.:format) cards#edit
     card GET    /cards/:id(.:format)      cards#show
          PUT    /cards/:id(.:format)      cards#update
          DELETE /cards/:id(.:format)      cards#destroy
     root        /                         cards#random 
```

有人可以指导我正确的方向吗？谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:52:54.940

您基本上需要重定向到您找到的卡片页面。目前您收到模板错误，因为它正在寻找视图`/views/cards/random.html.erb`但它不存在。

试试这个：

```
def random
  @card = Card.order("RANDOM()").first
  redirect_to card_path(@card)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:54:21.317

```
def random
   ids = Card.pluck(:id)
   ids.sample
end 
```

您可以选择所有现有 id 并将其映射到一个数组（这样`pluck`做），并从现有 id 数组中采样一个 id。这样您就可以确保存在具有此 ID 的卡。

根据您的表大小，这可能比将所有记录加载到内存中更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:47:36.010

将随机方法更改为此。

```
def random
  @card = Card.find(rand(Card.count)+1)
end 
```

你的路线看起来不错。

至于`Template is missing`错误，可能是因为您在 views/cards/ 目录中缺少 random.html.erb 或 random.html.haml

# python - 如何在python中打印退格的字符串版本？

> ID：15797587
> 
> 赞同：3
> 
> 时间：2013-04-03T20:36:19.547
> 
> 标签：python, string

如何在 python 中将 '\x08' 打印为 '\x08'？如果我输入命令

```
print '\x08' 
```

输出为空白，而不是

```
\x08 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T20:38:13.967

请`r`在字符串前使用，表示*原始字符串*，不需要转义特殊字符。有关字符串文字前缀的更多详细信息，请阅读[文档](http://docs.python.org/2/reference/lexical_analysis.html#strings)。

```
print r'\x08' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:38:20.367

你可以`'\x08'`通过这样做来逃避（退格字符），

```
print '\\x08' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T14:09:44.820

一般来说，您也可以这样做`print repr(c).strip("'")`，其中 c 是您要以代码格式查看的字符串，即 TAB 将显示为 '\t' 和换行符显示为 '\n' 等等。

# java - 如何利用节点

> ID：15797593
> 
> 赞同：-1
> 
> 时间：2013-04-03T20:36:31.697
> 
> 标签：java, stack, queue, nodes

我正在做家庭作业，但我觉得我完全迷路了。这个家庭作业的重点是使用节点循环遍历堆栈和队列，但我认为我做得不对。在我当前的代码中，我没有任何东西去节点类，我确定我应该有东西去那里。我刚刚开始研究 main，测试功能和东西。

车类

```
public class Car {
    String plate;
    char code;

    public Car(String plate, char code){
    }
    public String getPlate(){
        return plate;
    }
    public void setPlate(String inPlate){
        plate = inPlate;
    }
} 
```

节点类

```
public class Node {
    Node next;
    Car name;

    public Node(Node x, Car y){
        next = x;
        name = y;
    }
} 
```

Lstack 类

```
public class Lstack {
    int size;
    int numUsed = 0;
    Car[] stack;
    public Lstack(){
        stack = new Car[size];
    }
    public void push(Car x){
        stack[numUsed] = x;
        numUsed++;
    }
    public Car pop(){
        Car temp;
        numUsed--;
        temp = stack[numUsed];
        return temp;
    }
    public boolean isEmpty(){
        if(numUsed==0){
            return true;
        }
        else
            return false;
    }
    public int size(){
        return numUsed;
    }
    public void display(){
        System.out.println("--------------------------------------------");
        System.out.print("TOP | ");
        for(int i = 0; i < numUsed; i++){
            System.out.print(stack[i].plate +" | ");
        }
        System.out.println("--------------------------------------------");
    }

} 
```

队列类

```
public class Lqueue {
    int size;
    int numUsed = 0;
    Car[] queue;
    public Lqueue(){
        queue = new Car[size];
    }
    public void insert(Car x){
        int index = numUsed;
        for(int i = numUsed; i >= 0; i--){
            queue[index + 1] = queue[index];
            index--;
        }
        queue[0] = x;
    }
    public Car remove(){
        Car temp;
        temp = queue[numUsed];
        queue[numUsed] = null;
        numUsed--;
        return temp;
    }
    public boolean isEmpty(){
        if(numUsed==0){
            return true;
        }
        else
            return false;
    }
    public int size(){
        return numUsed;
    }
    public void display(){
        System.out.println("--------------------------------------------");
        System.out.print("Front | ");
        for(int i = numUsed; i >= 0; i--){
            System.out.print(queue[i].plate +" | ");
        }
        System.out.println("--------------------------------------------");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:43:55.653

首先在课堂上更改`Car[]`为。`Node[].``Lqueue`

然后`Node[]`改为`Node`使用 node.next 变量来遍历列表，而不是使用数组。

[这是链接列表上的维基百科页面](http://en.wikipedia.org/wiki/Linked_list)。将示例中的 12、99 和 37 替换为不同的汽车...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:40:03.683

**谷歌：“链表实现”**

您的数据结构中应该有节点。

您不应该使用数组。

# c# - 记录操作

> ID：15797594
> 
> 赞同：1
> 
> 时间：2013-04-03T20:36:35.130
> 
> 标签：c#, logging, ms-word

我用 c# 编写了一个程序来解决工程经济问题，例如找到投资的现值，或未来/付款、期数、利率、B/C 分析、现值分析、债券等.

我现在遇到的问题是我想将我所做的操作保存在 Microsoft Word 文件中，并使用 Microsoft Word 的公式编辑器很好地格式化公式。

现在我只是用这样的方法将信息保存到一个文本文件中。

```
public async void LogFV(decimal i, decimal n, decimal p, decimal pmt, decimal res)
{
    using (var writer = new StreamWriter(FileName, true))
    {
        var sb = new StringBuilder();
        sb.AppendLine("Given Data: ");
        sb.AppendLine(String.Format("i = {0:P}", i));
        sb.AppendLine(String.Format("n = {0}", n));
        sb.AppendLine(String.Format("A = {0:C}", pmt));
        sb.AppendLine(String.Format("P = {0:C}", p));
        sb.AppendLine("Resolution: ");
        sb.AppendLine(String.Format("F = {0} * (F/P, {1:P}, {2}) + {3} * (F/A, {1:P}, {2})", p, i, n, pmt));
        sb.AppendLine(String.Format("F = {0:C}", res));

        await writer.WriteLineAsync(sb.ToString());
    }
} 
```

我不想重新发明轮子，这不是功课。现在我想使用 Online LaTeX 公式编辑器，但我更喜欢 Microsoft Word 的编辑器。

我还想问的一个设计模式问题是，我应该如何实现 Logger？我不想将它与公式的实现混在一起，所以我考虑创建一个 Logger 类，它代表特定的公式（例如 FV、PV 等）并使用参数执行日志记录任务。但我认为必须有更好的方法来做到这一点。

# c - 我的 unix-epoch 时间转换器的问题

> ID：15797597
> 
> 赞同：0
> 
> 时间：2013-04-03T20:36:37.267
> 
> 标签：c, unix-timestamp

我写了一个简单的函数来用当前的年、月和日填充三个变量。但是，由于某种原因，它无法正常工作，而且我似乎找不到问题所在。

```
void getDate(int *year, int *month, int *date)
{
int   epochTime,
      monthLength,
      functionYear,
      functionMonth,
      functionDate;

functionYear   = 1970;
functionMonth  = 1;
functionDate   = 1;

epochTime = time(NULL);
while (epochTime > 1 * 365 * 24 * 60 * 60)
{
   epochTime -= 1 * 365 * 24 * 60 * 60;
   functionYear++;
}
monthLength = findMonthLength(functionYear, functionMonth, false);
while (epochTime > 1 * monthLength * 24 * 60 * 60)
{
   printf("%d\n", epochTime);
   epochTime -= 1 * monthLength * 24 * 60 * 60;
   functionMonth++;
   monthLength = findMonthLength(functionYear, functionMonth, false);      
   printf("functionMonth = %d\n", functionMonth);
}
while (epochTime > 1 * 24 * 60 * 60)
{
   printf("%d\n", epochTime);
   epochTime -= 1 * 24 * 60 * 60;
   functionDate++;
   printf("functionDate = %d\n", functionDate);
}
*year    = functionYear;
*month   = functionMonth;
*date    = functionDate;
} 
```

`findMonthLength()`返回一个整数值，它是发送月份的长度。1 = 一月等。它使用年份来测试它是否是闰年。

目前是 2013 年 4 月 3 日；但是，我的函数找到了 4 月 15 日，我似乎找不到我的问题所在。

编辑：我明白了。我的第一个问题是，虽然我记得在查找月份时检查闰年，但在查找每年时却忘记了这一点，这让我休息了好几天。我的第二个问题是我没有从 UTC 转换为本地时区

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:53:04.110

本节可能存在一个问题：

```
while (epochTime > 1 * 365 * 24 * 60 * 60)
{
    epochTime -= 1 * 365 * 24 * 60 * 60;
    functionYear++;
} 
```

此循环的每次迭代，都会减去对应于*正常*年份的时间（以秒为单位）。这不考虑闰年，您需要减去对应于 366 天的时间。

对于该部分，您可能需要：

```
int yearLength = findYearLength(functionYear + 1);
while (epochTime > 1 * yearLength * 24 * 60 * 60)
{
    epochTime -= 1 * yearLength * 24 * 60 * 60;
    functionYear++;
    yearLength = findYearLength(functionYear + 1);
} 
```

findYearLength *(int year)*是一个返回给定年份的天数的函数。

一个小问题是没有考虑[闰秒](https://en.wikipedia.org/wiki/Leap_second)。由于仅添加了其中的 35 个，因此可以在给定日期的计算中安全地忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:42:38.940

为什么不使用 gmtime() 或 localtime() 并完成它？他们返回一个包含你需要的一切的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T14:06:36.237

我在 Python 中根据您的解决方案制作了完整的解决方案。我希望有一天它会对某人有所帮助。干杯!

使用：getDate(unixtime)

```
def leapYear(year):
        #returns True if the year is a leap year, return False if it isn't
        if year % 400 == 0:
                return True
        elif year % 100 == 0:
                return False
        elif year % 4 == 0: 
                return True
        else:
             return False

def findMonthLength(year, month):
        #returns an integer value with the length of the month it is sent.
        #1 = January, etc. It uses the year to test if it is a leap year.

        months1 = [0,31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]
        months2 = [0,31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]

        if (leapYear(year)==True):
                return months2[month]
        else:
                return months1[month]

def findYearLength(year):
        #returns an integer value with the length of the year it is sent.
        #It uses the year to test if it is a leap year.

        if leapYear(year)==True:
                return 366
        else:
                return 365

def getDate(epoch):
        SECONDS_PER_YEAR = 0
        SECONDS_PER_MONTH = 0
        SECONDS_PER_DAY = 24 * 60 * 60
        SECONDS_PER_HOUR = 60*60
        SECONDS_PER_MIN = 60

        epochTime = epoch
        monthLength = 0
        yearLength = 0
        year = 1970
        month = 1
        day = 1
        hour = 0
        minu = 0
        seg = 0

        #Years
        yearLength = findYearLength(year)
        SECONDS_PER_YEAR = yearLength * SECONDS_PER_DAY
        while (epochTime >= SECONDS_PER_YEAR):
                epochTime -= SECONDS_PER_YEAR
                year += 1
                yearLength = findYearLength(year)
                SECONDS_PER_YEAR = yearLength * SECONDS_PER_DAY

        #Months
        monthLength = findMonthLength(year, month)
        SECONDS_PER_MONTH = monthLength * SECONDS_PER_DAY
        while (epochTime >= SECONDS_PER_MONTH):
                epochTime -= SECONDS_PER_MONTH;
                month += 1
                monthLength = findMonthLength(year, month)
                SECONDS_PER_MONTH = monthLength * SECONDS_PER_DAY

        #Days
        while (epochTime >= SECONDS_PER_DAY):
                epochTime -= SECONDS_PER_DAY;
                day += 1

        #Hours
        while (epochTime >= SECONDS_PER_HOUR):
                epochTime -= SECONDS_PER_HOUR;
                hour += 1

        #Minutes
        while (epochTime >= SECONDS_PER_MIN):
                epochTime -= SECONDS_PER_MIN;
                minu += 1

        #Seconds
        seg = epochTime

        print ("%d-%d-%d %d:%d:%d") % (year, month, day, hour, minu, seg) 
```

# php - ZF2 toRoute 与 https

> ID：15797599
> 
> 赞同：4
> 
> 时间：2013-04-03T20:36:43.850
> 
> 标签：php, zend-framework2

我们使用 Zend Framework 2 并`toRoute`在我们的控制器中使用以重定向到不同的位置，例如`$this->redirect()->toRoute('home');`.

无论如何使用此方法或替代方法将此重定向到 https 而不是 http？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:25:04.680

为了`https`在您的路线中使用，您需要使用`Zend\Mvc\Router\Http\Scheme`路由器。为此类路由指定配置与其他路由没有太大区别。您需要在 module.config.php 中的路由器配置中指定路由类型`Scheme`并添加一个选项。`'scheme' => 'https'`

这是一个例子：

```
return array(
    'router' => array(
        'routes' => array(
            'routename' => array(
                'type' => 'Scheme', // <- This is important
                'options' => array(
                    'route' => '/url',
                    'scheme' => 'https', // <- and this.
                    'defaults' => array(
                        '__NAMESPACE__' => 'MdlNamespace\Controller',
                        'controller' => 'Index',
                        'action' => 'someAction',
                    ),
                ),
            ),
            // the rest of the routes
        ),
    ),
    // the rest of the module config
); 
```

如果你有`routename`像上面那样配置的路由，这：`$this->redirect()->toRoute('routename');`将工作。

有关ZF2 手册的参考，请参阅[此内容。](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.routing.html#zend-mvc-router-http-scheme)

希望这可以帮助 ：）

斯托扬

# jquery-plugins - 全日历每周模式

> ID：15797603
> 
> 赞同：4
> 
> 时间：2013-04-03T20:37:03.527
> 
> 标签：jquery-plugins, fullcalendar, timetable

我正在尝试构建一个显示每周周一至周五学校时间表的应用程序。我决定使用 JQuery 插件 fullcalendar。在浏览了许多选项之后，我找不到一种方法来显示每周模式而不是一年中的实际日子。议程模式显示一年中的某一周。这包括我不想要的日期。

我希望活动在星期五下午 2:00 开始，而不是 4 月 5 日下午 2:00

有没有办法使用 fullcalendar API 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:47:12.543

看看这个`columnFormat`选项。[http://arshaw.com/fullcalendar/docs/text/columnFormat/](http://arshaw.com/fullcalendar/docs/text/columnFormat/)

```
columnFormat: {
    month: 'ddd',
    week: 'ddd',
    day: 'dddd M/d'
} 
```

让我知道这是否有帮助。

# django - 在 Django 模板中创建模型实例

> ID：15797605
> 
> 赞同：1
> 
> 时间：2013-04-03T20:37:06.557
> 
> 标签：django, templates, model

我有一个用 Django 编写的上传页面，它使用 webkit 调用来启用文件夹上传并列出上传文件夹中的所有文件。

在我的模板中，我有一个用于“drop”事件的事件处理程序，因此它可以遍历文件夹中的文件并相应地处理它们。

在迭代发生时为每个文件创建模型实例会非常好。这可能在模板内的 javascript 代码块中吗？

也许我应该写一个自定义标签来做到这一点？只是不确定是否有更简单的方法可以`MyModel.objects.create(opts)`从模板内部调用并让它做正确的事情。

非常感谢输入或任何示例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:02:20.300

我认为您不能从“Tempalte”中做到这一点，但我建议您使用 AJAX 构建它，您的 Js 代码将从 html 获取数据，然后将该数据发送到 URL，因此，您的视图将接收该数据并创建您的实例，然后您的视图将向您的 js 代码返回一个 HttpResponse。

# android - 阻止 eclipse 自动导入特定的包

> ID：15797606
> 
> 赞同：1
> 
> 时间：2013-04-03T20:37:06.907
> 
> 标签：android, eclipse

是否可以阻止 Eclipse 自动导入（按 ctrl+shift+o 时）特定的包？

罪魁祸首当然是 android.R - 另外还有什么理由你可能不想这样做吗？我总是使用具有完全限定名称的 android.R 资源，即使在一个不使用应用程序自己的资源的类中，所以我看不出为什么不呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:41:54.920

尝试将其添加到 Java 的“类型过滤器”首选项页面的列表中。

# javascript - IE中的窗口滚动方法闪烁

> ID：15797611
> 
> 赞同：4
> 
> 时间：2013-04-03T20:37:23.677
> 
> 标签：javascript, jquery, internet-explorer, scroll

这对某些人来说可能是一个巨大的惊喜，但是当我使用该`$(window).scroll`方法时，我遇到了 IE 浏览器的问题。

我的目标：我想让位于左侧的菜单保持其位置，直到滚动达到 > y 值。然后它将自己固定到页面顶部，直到滚动返回到 < y 值。

我的错误：在 Chrome 和 Firefox 中一切似乎都很好，但是当我转到 Internet Explorer 时，每次滚动值更改时，浏览器似乎都在移动 #scroller，这会导致移动/闪烁事件。

如果有人可以向我指出资源或为此提供解决方法，我将不胜感激！

这是一个小提琴：http: [//jsfiddle.net/CampbeII/nLK7j/](http://jsfiddle.net/CampbeII/nLK7j/)

这是 dev 中网站的链接：http: [//squ4reone.com/domains/ottawakaraoke/Squ4reone/responsive/index.php](http://squ4reone.com/domains/ottawakaraoke/Squ4reone/responsive/index.php)

我的脚本：

```
$(window).scroll(function () {
    var navigation = $(window).scrollTop();
    if (navigation > 400) {
        $('#scroller').css('top',navigation - 220);
    } else {
        $('#scroller').css('top',183);
        $('#scroller').css('position','relative');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:19:44.400

你可能想看看[jQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)插件，它可以让你做像这样的[粘性元素](http://imakewebthings.com/jquery-waypoints/shortcuts/sticky-elements/)等等。

如果您想坚持当前的方法，就像其他答案所表明的那样，您应该切换`fixed`定位而不是`.top`在每个滚动事件中更新属性。但是，我还会引入一个标志来跟踪它当前是否被卡住，这样你只会在它实际进行转换而不是每个滚动事件时更新`position`and`top`属性。与 DOM 交互在计算上是昂贵的，这将减轻布局引擎的大量负载，并且应该使事情变得更加顺畅。

[http://jsfiddle.net/WYNcj/6/](http://jsfiddle.net/WYNcj/6/)

```
$(function () {
  var stuck = false,
      stickAt = $('#scroller').offset().top;

  $(window).scroll(function () {

    var scrollTop = $(window).scrollTop();

    if (!stuck && scrollTop > stickAt) {
      $('#scroller').css('top', 0);
      $('#scroller').css('position','fixed');
      stuck = true;
    } else if (stuck && scrollTop < stickAt) {
      $('#scroller').css('top', stickAt);
      $('#scroller').css('position','absolute');
      stuck = false;
    }
  });
}); 
```

# 更新

`#scroller`将from切换`relative`为`fixed`将其从页面的[正常流程](http://www.w3.org/TR/CSS2/visuren.html#normal-flow)中删除，这可能会对布局产生意想不到的后果，因为它会在没有丢失块的情况下重新流动。如果您更改`#scroller`为使用 an ，它将从正常流程中删除，并且不会再导致这些副作用。我已经更新了上面的示例和链接的 jsfiddle 以反映对 JS/CSS 的更改。[`absolute`](http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning) `position`

我还更改了`stickAt`计算方式，它用于[`.offset()`](http://api.jquery.com/offset/)查找顶部的确切位置，`#scoller`而不是依赖于 CSS 顶部值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:51:08.167

请考虑只在固定位置和绝对或相对位置之间切换，而不是在每个滚动事件中设置顶部距离。所有浏览器都会欣赏，尤其是 IE。

所以你仍然听滚动，但你现在在滚动处理程序之外保留一个状态标志，并简单地评估它是否必须在显示类型之间切换。

那是更加优化和 IE 喜欢它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:50:08.990

如果我快速滚动，我也会在 Chrome 中闪烁。一旦页面滚动到阈值以下，而不是更新滚动的顶部位置，而是使用`fixed`元素的位置。看看更新的小提琴：http: [//jsfiddle.net/nLK7j/2/](http://jsfiddle.net/nLK7j/2/)

# scala - Scala中的匹配类型符号

> ID：15797618
> 
> 赞同：0
> 
> 时间：2013-04-03T20:37:46.107
> 
> 标签：scala, reflection

过去几天我问了几个关于 Scala 反射的问题，因为它对我来说仍然很新。

新问题实际上是两个相关的问题：

*   您将如何创建一个根据输入类型返回不同结果的函数？
*   你能对反射 API 返回的`TypeSymbol`和对象做同样的事情吗？`Type`

示例（不编译，但这大致是我希望它工作的方式）：

```
def result[T <: String] = "STRING"
def result[T <: Int] = "INT"

result[String]  // Returns "STRING"
result[Int]     // Returns "INT"

val type_symbol: Type = ...    // Get a Type object from a reflection
type_symbol match {
  case Int => "INT"
  case String => "STRING"
  case _ => "OTHER"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:55:14.570

也许你正在寻找这样的东西？

```
import scala.reflect.runtime.universe._

def someStringBasedOnAType[T: TypeTag] = typeOf[T] match {
  case t if t =:= typeOf[Int] => "INT"
  case t if t =:= typeOf[String] => "STRING"
  case _ => "OTHER"
} 
```

结果：

```
scala> someStringBasedOnAType[String]
res11: String = STRING

scala> someStringBasedOnAType[Float]
res12: String = OTHER

scala> someStringBasedOnAType[Int]
res13: String = INT 
```

但是请注意，使用`TypeTag`s 暂时是线程不安全的。据我所知，这应该会在几个月内改变，可能在 Scala 2.10.2 中（参见[SI-6240](https://issues.scala-lang.org/browse/SI-6240)）

# .htaccess - 如何在 301 重定向中不传递参数？

> ID：15797620
> 
> 赞同：1
> 
> 时间：2013-04-03T20:37:49.137
> 
> 标签：.htaccess, redirect, http-status-code-301

我想重定向以下两个链接：

```
/catalog/yogicchai/rooibos-masala-chai-naturally-caffeine-c-84.html?infoBox=5 (category link)

/catalog/yogicchai/rooibos-masala-chai-naturally-decaffeinated-p-291.html (product link) 
```

**至：**

```
yogicchaiDOTcom/rooibos-masala-chai-naturally-decaffeinated.html 
```

我认为这是解决方案：

```
RedirectMatch 301 /catalog/yogicchai/rooibos-masala-chai(.*)\.html 
yogicchaiDOTcom/rooibos-masala-chai-naturally-decaffeinated.html 
```

但最终结果是：

```
yogicchaiDOTcom/rooibos-masala-chai-naturally-decaffeinated.html?infoBox=5 
```

我不想`"?infoBox=5"`打印在上面 URL 的末尾

我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-13T13:02:56.277

只需将问号添加到目标 URL，如下所示：

```
RedirectMatch 301 /catalog/yogicchai/rooibos-masala-chai(.*)\.html 
yogicchaiDOTcom/rooibos-masala-chai-naturally-decaffeinated.html? 
```

一个url中不能有两个问号，所以apache不会添加上一页的参数，因为new里面已经有一个了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:35:13.423

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^catalog/yogicchai/rooibos-masala-chai.*?\.html$ /rooibos-masala-chai-naturally-decaffeinated.html? [L,R=301,NC] 
```

# php - PHP：我不能在类名中回显空格

> ID：15797622
> 
> 赞同：-5
> 
> 时间：2013-04-03T20:37:55.357
> 
> 标签：php, html, echo

对我的方法的智能发表评论，你能帮助解决这个问题吗？

我有一个`<div>`，其内容的样式不同，具体取决于它是否具有简单的类名“topic”或“topic”和“focused”。我正在使用简单的逻辑测试来确定它是否集中，然后将类名回显到 html 中。这是我正在尝试做的事情：

```
<?php $topic__class = "topic". ( is_focused($var) ? "  focused" : "" ); ?>  
<div class=<?php echo $topic__class; ?> >  
<div class="next class"> 
```

等浏览器中的结果（Chrome元素检查器）：

```
<div class="topic"  focused>  
<div class="next class"> 
```

根本不是我需要的。有什么想法吗？

更新：
对于它的价值，它不是`is_focused()`功能 - 我可以用`1==1`or替换它`true`并且它不解析。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:44:33.653

```
- div class=<?php echo $topic__class; ?> >
+ div class="<?php echo $topic__class; ?>"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T20:46:33.823

您需要在 HTML 属性周围加上引号。目前，它将读取为一个属性`class=topic`，和一个单独的属性`focussed`（在空格之后）。

而不是`<div class=<?php echo $topic__class; ?> >`使用`<div class="<?php echo $topic__class; ?>" >`

# android - 安卓下载管理器 2.2

> ID：15797623
> 
> 赞同：1
> 
> 时间：2013-04-03T20:38:01.060
> 
> 标签：android, download-manager, android-2.2-froyo

Android从 API 9 开始提供[DownloadManager ，文档说](http://developer.android.com/reference/android/app/DownloadManager.html)

> 下载管理器将在后台进行下载，处理 HTTP 交互并**在失败或跨连接更改和系统重新启动后重试下载**。

大约 4% 的设备（2013 年 4 月 4 日）运行[Android 2.2](http://developer.android.com/about/dashboards/index.html#Platform)（API 8），因此是否有任何下载管理器的库或反向端口可以**在失败后或跨连接更改和系统重新启动**Android 2.2 后重试下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:08:12.317

很不幸的是，不行。对于 Android 2.2 及更低版本，您必须编写自己的下载管理器并自己处理所有事情。事实上，许多支持 FroYo 的应用程序都在这方面做得很好，因此无需重新发明轮子。只需从 SO 中获取指针并开始编码！

# javascript - WinJS 更改 ListView 中特定项目的模板元素

> ID：15797627
> 
> 赞同：0
> 
> 时间：2013-04-03T20:38:12.657
> 
> 标签：javascript, data-binding, microsoft-metro, winjs

来吧，这是我的问题，我找不到任何解决方法。我的 Gridview 有这个模板（用于数据绑定）的问题：

```
<div id="mytemplate" data-win-control="WinJS.Binding.Template">
    <div id="questions" class="tweet">
        <img src="#" style="-ms-grid-row-span: 2; width: 64px; height: 64px; margin-right: 10px;" data-win-bind="src:picture_url">
        <h2 style="width:auto;-ms-grid-column: 2; -ms-grid-column-span: 1; margin-left: 1px; margin-right: 0px; -ms-grid-row-span: 2;" data-win-bind="textContent:type"></h2>   
        <label id="answer" ">Message</label>            
      </div>    
</div> 
```

在所有项目中，我都有消息作为标签所以当我点击一个项目时，在 itemInvokedHandler(eventObject) 函数中，我会显示一个包含输入文本的 Flyout，我希望这个标签将从我的输入文本字段中更改Flyout。解决方案是什么。只是，我正在考虑将标签标签移到模板之外，但这不合逻辑，因为它需要每个项目的标签。任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:36:12.717

我认为最好的选择是使用 MVVM 方法：将每个项目绑定到一个实体并让该实体公开一个名为 Text 的可观察属性，将 Flyout 绑定到另一个可观察属性 SelectedItem，该属性将使用当前选定的项目进行更新并使用双向绑定在弹出文本输入更改时更新所选项目的 Text 属性。如果你需要它，我在这里写了关于两种方式绑定的博客：[http ://codeworks.it/blog/?p=81](http://codeworks.it/blog/?p=81)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:13:41.067

建议`data-win-bind`在弹出 html 中使用属性。下面的代码将在弹出的输入元素中显示 item.title 属性

```
test.html:
<div class="edit-item" data-win-control="WinJS.UI.Flyout">
        <input type="text" class="item-text" data-win-bind="value: title" />
        <input type="submit" class="submit" />
</div>

test.js: event handler for iteminvoked event for the listview control
_oniteminvoked: function oniteminvoked(event)
{
    var item = this.items.getAt(event.detail.itemIndex); // assuming items is the list binding to the list view
    var editItemFlyoutElement = this.element.querySelector('.edit-item');
    WinJS.Binding.processAll(editItemFlyoutElement, item);
    editItemFlyoutElement.winControl.show(this.element);
} 
```

高温高压

# python - 类方法..打印每月的利息金额。Python

> ID：15797633
> 
> 赞同：0
> 
> 时间：2013-04-03T20:38:17.343
> 
> 标签：python, class, function, balance

我正在制作一个程序，它使用类 Account 来打印 accountA 的每月利息金额等。我在解决 getMonthlyInterestRate() 和 getMonthlyInterest 定义时遇到问题。这是迄今为止的程序：

帐户.py

```
class Account:
    def __init__(self,id=0,balance=100.0,annualInterestRate=0.0):
        self.__id=id
        self.__balance=balance
        self.__annualInterestRate=annualInterestRate
    def getId(self):
        return self.__id
    def getBalance(self):
        return self.__balance
    def getAnnualInterest(self):
        return self.__annualInterestRate
    def setId(self,newid):
        self.__id=newid
    def setBalance(self,newbalance):
        self.__balance=newbalance
    def setAnnualInterestRate(self,newannualInterestRate):
        self.__annualInterestRate=newannualInterestRate
    def getMonthlyInterestRate(self,getAnnualInterest):
        return(getAnnualInterest(self)/12)
    def getMonthlyInterest(self,getBalance,getMonthly):
        return(getBalance(self)*getMonthlyInterestRate(self))

    def withdraw(self,amount):
        if(amount<=self.__balance):
            self.__balance=self.__balance-amount
    def deposit(self,amount):
        self.__balance=self.__balance+amount
    def __str__(self):
        return "Account ID : "+str(self.__id)+" Account Balance : "+str(self.__balance)+" Annual Interest Rate : "+str(self.__annualInterestRate) 
```

下一个

文件 test.py

```
from Account import Account

def main():
    accountA=Account(0,100,0)
    accountA.setId(1234)
    accountA.setBalance(20500)
    accountA.setAnnualInterestRate(0.375)
    print(accountA.__str__())
    accountA.withdraw(500)
    accountA.deposit(1500)
    print(accountA.__str__())
    print(accountA.getMonthlyInterest(accountA.getBalance(),accountA.getAnnualInterest())) 
main() 
```

我无法弄清楚如何使 getMonthlyInterestRate() 和 getMonthlyInterest() 定义能够输出正确的输出，即：

```
Account ID :  1234 Account Balance :  20500 Annual Interest Rate :  0.375

Account ID :  1234 Account Balance :  21500 Annual Interest Rate :  0.375

Monthly Interest Amount :  671.875 
```

我的总是出现错误声明：

```
Account ID : 1234 Account Balance : 20500 Annual Interest Rate : 0.375
Account ID : 1234 Account Balance : 21500 Annual Interest Rate : 0.375
Traceback (most recent call last):
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 13, in <module>
  File "C:\Program Files (x86)\Wing IDE 101 4.1\src\debug\tserver\_sandbox.py", line 12, in main
  File "C:\Users\Meagan\Documents\University\2nd Year\Cmput 174\Account.py", line 21, in getMonthlyInterest
    return(getBalance(self)*getMonthlyInterestRate(self))
builtins.TypeError: 'int' object is not callable 
```

这是我应该做的：

*   一个名为 getMonthlyInterestRate() 的方法，它返回月利率。

*   一个名为 getMonthlyInterest() 的方法，它返回每月的利息金额。每月利息金额可以通过使用余额*每月利率来计算。月利率可以通过年利率除以 12 来计算。

除了这两个定义和最后一个打印语句之外，程序中的所有其他内容都是正确的。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:40:54.670

您应该调用方法*，* `self`而不是通过传递函数：

```
def getMonthlyInterest(self):
    return self.getBalance() * self.getMonthlyInterestRate() 
```

并调用它：

```
print(accountA.getMonthlyInterest()) 
```

这`getMonthlyInterestRate`也适用：

```
def getMonthlyInterestRate(self):
    return self.getAnnualInterest() / 12 
```

你使用了很多 getter 和 setter；Python 中不需要这些；您不需要将属性设为私有，只需直接访问它们即可：

```
class Account:
    def __init__(self, id=0, balance=100.0, annualInterestRate=0.0):
        self.id = id
        self.balance = balance
        self.annualInterestRate = annualInterestRate

    def getMonthlyInterestRate(self):
        return self.annualInterestRate / 12

    def getMonthlyInterest(self):
        return self.balance * self.getMonthlyInterestRate()

    def withdraw(self, amount):
        if amount <= self.balance:
            self.balance -= amount

    def deposit(self, amount):
        self.balance += amount

    def __str__(self):
        return "Account ID : {0.id} Account Ballance : {0.balance} Annual Interest Rate : {0.annualInterestRate}".format(self) 
```

然后运行：

```
def main():
    accountA = Account(0,100,0)
    accountA.id = 1234
    accountA.balance = 20500
    accountA.annualInterestRate = 0.375
    print(accountA)
    accountA.withdraw(500)
    accountA.deposit(1500)
    print(accountA)
    print(accountA.getMonthlyInterest()) 
```

结果：

```
Account ID : 1234 Account Ballance : 20500 Annual Interest Rate : 0.375
Account ID : 1234 Account Ballance : 21500 Annual Interest Rate : 0.375
671.875 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:45:46.910

你定义

```
def getMonthlyInterestRate(self,getAnnualInterest):
    return(getAnnualInterest(self)/12)
def getMonthlyInterest(self,getBalance,getMonthly):
    return(getBalance(self)*getMonthlyInterestRate(self)) 
```

并将它们用作

```
print(accountA.getMonthlyInterest(accountA.getBalance(),accountA.getAnnualInterest())) 
```

*   换句话说，您使用所述函数的返回值调用它们，而不是使用函数本身。在这些函数中，您尝试再次调用它们。由于您没有传递函数，而是传递值，因此这种“再次调用”失败了。

如果你修复了这个错误，你（可能）使你的程序工作，但你得到一个以非常糟糕的风格编写的程序。

要改进这一点，请遵循[Martijn Pieters 的提示](https://stackoverflow.com/a/15797680/296974)。

（这个答案可能应该是一个评论，但这些不能很好地格式化。）

# c# - 绑定在 WinRT XAML（Windows8、Metro、Windows Store App）中隐藏另一个属性的属性

> ID：15797645
> 
> 赞同：6
> 
> 时间：2013-04-03T20:39:02.080
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, windows-store-apps

**在前面我想说：请不要建议替代解决方案，除非您可以在不修改 BaseXXXXXX 模式的类型的情况下完成它**

也就是说，就我而言，这种行为超出了令人困惑的范围，似乎使用`new`关键字来隐藏 C# 中的属性意味着 WinRT XAML（Windows8、Metro、Windows Store App）绑定不再正常工作。我不知道为什么会这样。

这是一个例子：

**C＃：**

```
namespace WinRtSandbox
{
    public class BaseClass 
    {
        public string Property1 { get; set; }
        public int[] Property2 { get; set; }
        public object Property3 { get; set; }
    }

    public class ModifiedClass : BaseClass
    {
        public new string Property1 { get; set; }
        public new long[] Property2 { get; set; }
        public new string Property3 { get; set; }
    }

    public sealed partial class MainPage : Page
    {

        public BaseClass Normal { get; set; }
        public ModifiedClass Modified { get; set; }

        public MainPage()
        {
            this.Normal = new BaseClass
            {
                Property1 = "WTF",
                Property2 = new[] { 2, 3, 4 },
                Property3 = "Work?"
            };

            this.Modified = new ModifiedClass
            {
                Property1 = "WTF",
                Property2 = new[] { 2L, 3L, 4L },
                Property3 = "Work?"
            };

            this.InitializeComponent();
        }
    }
} 
```

**WinRT XAML：**

```
<Page
    x:Class="WinRtSandbox.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WinRtSandbox"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Border Background="#22000000" Padding="40" Width="400" Height="500">
            <Grid>

                <Grid.Resources>
                    <Style TargetType="Rectangle">
                        <Setter Property="Height" Value="1"/>
                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                        <Setter Property="Margin" Value="0,15,0,15"/>
                        <Setter Property="Fill" Value="{StaticResource ApplicationForegroundThemeBrush}"/>
                    </Style>
                </Grid.Resources>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">

                    <ItemsControl>
                        <TextBlock Text="this.Normal"/>
                        <Rectangle/>
                        <TextBlock Text="this.Normal.Property1"/>
                        <Rectangle/>
                        <TextBlock Text="this.Normal.Property2"/>
                        <Rectangle/>
                        <TextBlock Text="this.Normal.Property3"/>
                    </ItemsControl>

                    <Rectangle Fill="Red"/>

                    <ItemsControl>
                        <TextBlock Text="this.Modified"/>
                        <Rectangle/>
                        <TextBlock Text="this.Modified.Property1"/>
                        <Rectangle/>
                        <TextBlock Text="this.Modified.Property2"/>
                        <Rectangle/>
                        <TextBlock Text="this.Modified.Property3"/>
                    </ItemsControl>

                </StackPanel>

                <StackPanel Grid.Column="1">

                    <ItemsControl DataContext="{Binding Normal}">
                        <TextBlock Text="{Binding}"/>
                        <Rectangle/>
                        <TextBlock Text="{Binding Property1}"/>
                        <Rectangle/>
                        <TextBlock Text="{Binding Property2}"/>
                        <Rectangle/>
                        <TextBlock Text="{Binding Property3}"/>
                    </ItemsControl>

                    <Rectangle Fill="Red"/>

                    <ItemsControl DataContext="{Binding Modified}">
                        <TextBlock Text="{Binding}"/>
                        <Rectangle/>
                        <TextBlock Text="{Binding Property1}"/>
                        <Rectangle/>
                        <TextBlock Text="{Binding Property2}"/>
                        <Rectangle/>
                        <TextBlock Text="{Binding Property3}"/>
                    </ItemsControl>

                </StackPanel>
            </Grid>
        </Border>

    </Grid>
</Page> 
```

完全不正确的结果看起来像： ![到底是怎么回事](https://i.stack.imgur.com/0VgTa.png)

**基本上，这些空白行中的每一个都应该被填充**，你们中的任何一个 XAML 能手都知道为什么这些绑定失败了，有什么可以解决我只能假设是一个令人发指的错误的方法吗？任何帮助或见解将不胜感激，在此先感谢您...-ck

更新：**我忘记的输出转储**

```
Error: BindingExpression path error: 'Property2' property not found on 'WinRtSandbox.ModifiedClass'. BindingExpression: Path='Property2' DataItem='WinRtSandbox.ModifiedClass'; target element is 'Windows.UI.Xaml.Controls.TextBlock' (Name='null'); target property is 'Text' (type 'String')
Error: BindingExpression path error: 'Property3' property not found on 'WinRtSandbox.ModifiedClass'. BindingExpression: Path='Property3' DataItem='WinRtSandbox.ModifiedClass'; target element is 'Windows.UI.Xaml.Controls.TextBlock' (Name='null'); target property is 'Text' (type 'String') 
```

更新：

向 Microsoft 提交的错误：[https](https://connect.microsoft.com/VisualStudio/feedback/details/782993/binding-a-property-that-hides-another-in-winrt-xaml) ://connect.microsoft.com/VisualStudio/feedback/details/782993/binding-a-property-that-hides-another-in-winrt-xaml所以我们会看看情况如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T22:04:00.117

我同意这确实是一个错误。

我知道你说你不想要替代品，但为了其他可能读到这个问题的人，我会忽略你。

您可以通过将每个属性都设置为 DependencyProperty 来解决此问题

```
public class BaseClass : DependencyObject
{
    public static readonly DependencyProperty Property1Property = DependencyProperty.Register(
        "Property1",
        typeof(string),
        typeof(BaseClass),
        new PropertyMetadata(null));

    public string Property1
    {
        get { return (string)GetValue(Property1Property); }
        set { SetValue(Property1Property, value); }
    }

    public static readonly DependencyProperty Property2Property = DependencyProperty.Register(
        "Property2",
        typeof(int[]),
        typeof(BaseClass),
        new PropertyMetadata(null));

    public int[] Property2
    {
        get { return (int[])GetValue(Property2Property); }
        set { SetValue(Property2Property, value); }
    }

    public static readonly DependencyProperty Property3Property = DependencyProperty.Register(
        "Property3",
        typeof(object),
        typeof(BaseClass),
        new PropertyMetadata(null));

    public object Property3
    {
        get { return GetValue(Property3Property); }
        set { SetValue(Property3Property, value); }
    }
}

public class ModifiedClass : BaseClass
{
    public static readonly new DependencyProperty Property1Property = DependencyProperty.Register(
        "Property1",
        typeof(string),
        typeof(ModifiedClass),
        new PropertyMetadata(null));

    public new string Property1
    {
        get { return (string)GetValue(Property1Property); }
        set { SetValue(Property1Property, value); }
    }

    public static readonly new DependencyProperty Property2Property = DependencyProperty.Register(
        "Property2",
        typeof(long[]),
        typeof(ModifiedClass),
        new PropertyMetadata(null));

    public new long[] Property2
    {
        get { return (long[])GetValue(Property2Property); }
        set { SetValue(Property2Property, value); }
    }

    public static readonly new DependencyProperty Property3Property = DependencyProperty.Register(
        "Property3",
        typeof(string),
        typeof(ModifiedClass),
        new PropertyMetadata(null));

    public new string Property3
    {
        get { return (string)GetValue(Property3Property); }
        set { SetValue(Property3Property, value); }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T19:40:10.807

事实证明这是一个“不受支持的错误”，无论这意味着什么......这是直接引用：

> 您好，很抱歉我们的回复晚了。到目前为止，我们不支持此错误。请访问[http://support.microsoft.com](http://support.microsoft.com)或致电 1-800-MICROSOFT 寻求帮助。谢谢。

...希望这将在 .NET 4.5.1 中得到修复

查看错误报告： [https ://connect.microsoft.com/VisualStudio/feedback/details/782993/binding-a-property-that-hides-another-in-winrt-xaml](https://connect.microsoft.com/VisualStudio/feedback/details/782993/binding-a-property-that-hides-another-in-winrt-xaml)

# php - 在主页上显示具有足够赞成票的帖子

> ID：15797652
> 
> 赞同：2
> 
> 时间：2013-04-03T20:39:23.913
> 
> 标签：php, wordpress, indexing, posts

所以我将 wordpress 与 updownupdown 插件（用于支持/反对帖子的插件）一起使用。我想要做的是在主页上显示帖子，假设至少有 10 个赞，并隐藏没有足够积分的帖子。

我尝试在 index.php 中使用此代码

```
if (have_posts()) :
    while (have_posts()) : the_post();
        if (up_down_post_votesscore(  get_the_ID()) > 10){
        //content
        }
    endwhile;
endif; 
```

它有点工作，它隐藏了所有少于 10 个赞的帖子，但它不会将所有符合条件的帖子放在一个页面中（主页有分页），所以假设有 2 页有 5 个帖子并且有每页有 2 个帖子需要点赞数，因此不是将这 4 个帖子放在一个页面中，而是在每页中仅显示 2 个符合条件的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:44:45.863

听起来您的帖子检索有限。您可能希望使用以下方法更改获得的帖子数量：

```
query_posts( 'posts_per_page=20' ); 
```

参考：[http ://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

或者如果您正在使用，请执行以下操作`get_posts`：

```
$args = array(
'posts_per_page'  => 20
);
get_posts( $args ); 
```

参考：[http ://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

# javascript - 在 JS 中环绕我的原型

> ID：15797661
> 
> 赞同：3
> 
> 时间：2013-04-03T20:39:50.210
> 
> 标签：javascript, prototype

我一直在尝试理解 JS 中原型的概念，但由于某种原因，我发现它真的很莫名其妙。为什么以及何时使用原型？

这之间有什么区别（来自这个[MDN 示例](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)）：

```
function Person(gender) {
  this.gender = gender;
}

Person.prototype.sayHello = function()
{
  alert ('hello');
}; 
```

还有这个：

```
function Person(gender) {
  this.gender = gender;

  this.sayHello = function() {
    alert('hello');
  };
} 
```

我想我了解如何使用它们，但我不知道为什么要使用它们。也许我错过了一些东西 - 从头开始​​ - 显然我错过了一些东西！

有人可以解释这两个示例之间的区别以及为什么我应该使用另一个示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:43:03.667

当您`new Person()`使用原型示例创建一个时，它不会`sayHello()`与 person 对象一起加载到内存中。

相反，它会在需要/调用时立即将其添加到对象中，并且仅在需要时加载一次。

在处理大量对象时，这可以为用户节省大量内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:48:52.153

类和继承。我强烈建议您阅读这个小[教程，而不是花一两个小时自己解释。](http://ejohn.org/apps/learn/#64)我跳过它到原型部分，它以一种有趣的方式很好地解释了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:57:28.043

`Person`是一个构造函数，每次创建新实例时都会执行。构造函数只是函数，函数只是 JavaScript 中的对象。函数可以有属性`f.a = 1`，就像基本对象一样：`o = {a: 1}`.

当您将函数添加为对象的属性时，它被称为方法。因此，通过`Person`在构造函数中定义方法，它们会在实例化时重新定义。正如已经指出的，这是额外的工作。

通过使用`prototype`函数的属性预先定义方法，方法只定义一次。

在原型上定义方法的另一个好处是它们变成静态的。静态方法不需要实例对象。例如，可以在数组实例上调用数组切片方法：`[1,2,3].slice(1)`. 但是如果我们没有数组实例，我们仍然可以从 Array 对象的原型中访问和调用 slice 方法：`Array.prototype.slice.call(arguments)`。

编辑：静态方法通常被视为`Object.method`，不一定是原型的属性。应该澄清的是，实例方法`.slice()`是静态调用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T21:24:25.603

原型对于继承很重要。如果你不需要继承，那么真的没有区别。但是，考虑一下：

```
function Person(gender) {
 this.gender = gender;

 this.sayHello = function() {
  alert('hello');
 };
}

function User(){

} 
```

一个怎么可能`User`是一个`Person`？这里真的没有简单的方法。但是，这可以通过原型实现：

**[jsFiddle 演示](http://jsfiddle.net/EsxT6/)**

```
function Person(name) {
 this.name = name;
}

Person.prototype.sayHello = function() {
  alert(this.name);
 };

function User(name){
 this.constructor(name);
}

User.prototype = new Person();

var u = new User("joe");
u.sayHello();//alerts joe 
```

现在，我们可以更进一步，在使用这样的原型时覆盖向用户问好的功能：

**[jsFiddle 演示](http://jsfiddle.net/EsxT6/1/)**

```
User.prototype.sayHello = function(){ 
 alert("Username: " + this.name);
} 
```

# css - Firefox 中的 div 渲染不正确

> ID：15797667
> 
> 赞同：0
> 
> 时间：2013-04-03T20:40:06.103
> 
> 标签：css, firefox, html

我的网页在 IE 中按预期呈现。当我进入 Firefox 时，它会在错误的位置呈现一个重要的 div，从而破坏布局。据我所知，Firefox 是错误的。如何让 Firefox 在正确的位置呈现 div？

我在三个 div 周围设置了边框，以便更容易看到它们的渲染位置。紫色的那个是在 FF 中不正确，但在 IE 中正确的那个。

**编辑**

JSFiddle：http: [//jsfiddle.net/PYy6t/1/](http://jsfiddle.net/PYy6t/1/)

JSFiddle 在两个浏览器中以相同的方式呈现代码（并且以与 FF 相同的方式），但 IE10 会按照我的需要呈现它，并且正如我的屏幕截图所示，在实际运行页面时。

我的代码：

```
<div style="float: left; clear: both; width: 100%;">
        <asp:Label ID="Label1" runat="server" CssClass="hdr" Text="New Grade Entry" Font-Bold="true" />
    </div>
    <div style="width: 100%; float: left; clear: both;">
        <hr />
        <br />
    </div>
    <asp:UpdatePanel ID="upnlNewGrade" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <div id="divTop" class="Option" style="width: 100%; position:relative; border-color:purple; border-style: solid;
                border-width: 1px;">
                &nbsp
                <div class="OptionLabel" style="width: 50%; height:inherit; border-color:green; border-style:solid; border-width:1px; ">
                    //details removed
                <div class="OptionSelect" style="width: 45%; min-height:10px; border-color:red; border-style: solid; border-width: 1px;">
                    //details removed
                &nbsp
            </div>
        </ContentTemplate>
    </asp:UpdatePanel>
    <div class="Blank" style="width:100%">
        &nbsp
    </div>
    <hr style="width: 100%;" /> 
```

Firefox 渲染： ![火狐图片](https://i.stack.imgur.com/KRtXe.png)

IE 渲染： ![IEPIC](https://i.stack.imgur.com/1MvY2.png)

正如你所看到的，FF 在标题文本和顶部 hr 上方开始 div，尽管两者都应该占据整个宽度。这导致第二个 hr 呈现在红色边框面板下方（以及应位于页面下方的标签），而不是紫色面板下方。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:51:19.077

您的 HTML 完全无效。我不知道您是否使用了一些花哨的 CMS，但它根本不对。

1.  你不会在#divtop 中关闭你的 div
2.  在 html 中使用 css inline 是不好的做法，因为它应该很难改变它。
3.  如果你想让你的 div 并排，他们必须获取 style 属性`float:left`
4.  如果你想将紫色 div 包裹在其他 div 周围，它必须有`overflow:auto`才能与它的孩子一起调整大小
5.  InternetExplorer 永远不对，尝试使用 firefox、chrome 或 safari 进行开发。这些应该是最好的开发者浏览器。

这一切的结果将是：

```
<div style="float: left; clear: both; width: 100%;">
    <asp:Label ID="Label1" runat="server" CssClass="hdr" Text="New Grade Entry" Font-Bold="true" />
</div>
<div style="width: 100%; float: left; clear: both;">
    <hr />
    <br />
</div>
<asp:UpdatePanel ID="upnlNewGrade" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <div id="divTop" class="Option" style="width: 100%; position:relative; border-color:purple; border-style: solid;
            border-width: 1px; overflow:auto">
            &nbsp
            <div class="OptionLabel" style="width: 50%; height:inherit; border-color:green; border-style:solid; border-width:1px; float:left;">
                <p>Donec ullamcorper nulla non metus auctor fringilla. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Donec id elit non mi porta gravida at eget metus. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </div>
            <div class="OptionSelect" style="width: 45%; min-height:10px; border-color:red; border-style: solid; border-width: 1px; float:left;">
                <p>Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
        </div>
    </ContentTemplate>
</asp:UpdatePanel>
<div class="Blank" style="width:100%">
    &nbsp
</div>
<hr style="width: 100%;" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:18:51.563

您的问题称为 clearfix 问题。它不仅出现在 FF 中，而且出现在 webkit 浏览器（safari 和 chrome）中。我什至认为只有 IE 会按照您的预期处理它。

仅当您有一个父 div 容器，其所有子容器都漂浮在其中时，才会出现此问题。为了更好的解释，我建议使用谷歌搜索“clearfix”。

@Kev 所述的解决方案确实有效，但它需要您在 DOM 中添加一个额外的元素，该元素仅用于样式设置，这被认为是不好的做法。我建议使用某种 .clearfix 类。我通常使用来自[twitter bootstrap](http://twitter.github.com/bootstrap/)的那个：

```
.clearfix {
  *zoom: 1;
  &:before,
  &:after {
    display: table;
    content: "";
    // Fixes Opera/contenteditable bug:
    // http://nicolasgallagher.com/micro-clearfix-hack/#comment-36952
    line-height: 0;
  }
  &:after {
    clear: both;
  }
} 
```

你所要做的就是把它应用到你的`#divTop`容器上，你应该没问题。可以在此处找到有关其工作方式和原因的说明：http: [//nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:53:32.280

如果可以，请清除 div 中的 float:left。如果那不是一个选项，那么 Kev 回答了如何解决它。

```
float:left;//remove it or change it into
float:none; 
```

我创造了这个[小提琴](http://jsfiddle.net/tSmtX/)。看一看。

# .htaccess - .htaccess 从 domain.org/sub 重定向到 sub.domain.org/ 不起作用

> ID：15797668
> 
> 赞同：1
> 
> 时间：2013-04-03T20:40:11.200
> 
> 标签：.htaccess

我正在尝试让 aphdigital.org/GVH/ 重定向到 gvh.aphdigital.org，并将 aphdigital.org/GVH/something/ 重定向到 gvh.aphdigital.org/something/，但我遇到了很多困难。我尝试了[这个问题](https://stackoverflow.com/questions/9127176/create-a-301-redirect-in-htaccess-for-folder-to-subdomain-and-redirect-www-to-n)的代码，但它不起作用。下面被注释掉的代码块也显示了重定向失败的尝试。我究竟做错了什么？如果我可以访问 httpd.conf，我会启用日志记录，但我只有 FTP 访问权限。我知道 apache 正在读取这个文件，因为语法错误似乎会导致 500 错误。

这是我的 .htaccess 文件：

```
# Remember to enable display_errors on development environments only.
<IfModule mod_php5.c>
    php_value display_errors 1
    php_flag register_globals off
</IfModule>

RewriteEngine on

# If know that mod_rewrite is enabled, but you are still getting mod_rewrite errors,
# uncomment the line below and replace "/" with your base directory.
# RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^admin/ - [C]
RewriteRule .* admin/index.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* index.php

# Added this on Jan. 4, 2013 to redirect from old URL to new. Doesn't seem to be working. 
RewriteCond %{HTTP_HOST} ^www.aphdigital.org/GVH$
RewriteCond %{HTTP_HOST} ^www\.aphdigital\.org/GVH$
RewriteRule ^gvh/(.*)$ http://gvh.aphdigital.org/$1 [L,QSA,R=301]
# End of Jan. 4 add.

#TEST for redirect added April 3\. Also doesn't work. 
# To redirect /mysub/foo to http://mysub.mysite.co.uk/foo
#RewriteCond %{HTTP_HOST} ^(www\.)?(aphdigital\.org)$ [NC]
#RewriteRule ^(gvh)/?(.*)$ http://$1.%2/$2 [R=301,L,NC] 

#TEST2, code from Stackoverflow question 
#Options +FollowSymLinks -MultiViews
#RewriteEngine on
#RewriteBase /

# To redirect http:://www.mysite.co.uk/ to http:://mysite.co.uk/
#RewriteCond %{HTTP_HOST} ^www\.(aphdigital\.org)$ [NC]
#RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

# To redirect /mysub/foo to http://mysub.mysite.co.uk/foo
#RewriteCond %{HTTP_HOST} ^(www\.)?(aphdigital\.org)$ [NC]
#RewriteRule ^(gvh)/?(.*)$ http://$1.%2/$2 [R=301,L,NC] 
#END TEST 2

#Intentionally breaking to see if reading .htaccess. Yep, this breaks it. 
#<directory / ></directory> 

<FilesMatch "\.(php|ini)$">
 Order Allow,Deny
 Deny from all
</FilesMatch>

<Files index.php>
Allow from all
</Files>

# Uncomment the lines below in order to enable caching of some files via Apache (after a finished site has gone live)
<IfModule mod_expires.c>
#  <FilesMatch "\.(js|ico|gif|jpg|png|css)$">
#       ExpiresActive on
#       ExpiresDefault "access plus 10 day"
#   </FilesMatch>
</IfModule> 
```

这适用于运行 Omeka CMS 的站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:36:33.543

URL 路径`GVH`不是 的一部分`%{HTTP_HOST}`，因此应该是

```
RewriteCond %{HTTP_HOST} ^(?:www\.)?aphdigital\.org$
RewriteRule ^gvh/(.*)$ http://gvh.aphdigital.org/$1 [R,L,NC] 
```

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

# sql - SQL 减去使用 case 函数从现有列生成的值

> ID：15797669
> 
> 赞同：1
> 
> 时间：2013-04-03T20:40:23.730
> 
> 标签：sql, sql-server-2008, subtraction, select-case

我已经根据现有的文本等级列创建了附加的数字列。

例如，如果结果是 C，则结果列 14

```
Tar  TarVal    TA   TAVal
A    20        A-   19
B    17        B+   18
C    14        B+   18 
```

我想做的是减去两个结果列并使用结果创建一个新列，例如`TAVal - TarVal`：

```
Tar  TarVal    TA   TAVal    Difference
A    20        A-   19       -1
B    17        B+   18       1
C    14        B+   18       4 
```

这是我到目前为止的代码，但到目前为止我还没有减去每一列的减法：

```
 select subject.target AS Tar, 
    (case subject.target
    when 'A*' then 23 when 'A*-' then 22 when 'A+' then 21 when 'A' then 20
    when 'A-' then 19 when 'B+' then 18 when 'B' then 17 when 'B-' then 16
    when 'C+' then 15 when 'C' then 14 when 'C-' then 13 when 'D+' then 12
    when 'D' then 11 when 'D-' then 10 when 'E+' then 9 when 'E' then 8
    when 'E-' then 7 when 'F+' then 6 when 'F' then 5 when 'F-' then 4
    when 'G+' then 3 when 'G' then 2 when 'G-' then 1 when 'U' then 0 end) as TarVal,

    subject.result AS TA, 
    (case subject.result 
    when 'A*' then 23 when 'A*-' then 22 when 'A+' then 21 when 'A' then 20
    when 'A-' then 19 when 'B+' then 18 when 'B' then 17 when 'B-' then 16
    when 'C+' then 15 when 'C' then 14 when 'C-' then 13 when 'D+' then 12
    when 'D' then 11 when 'D-' then 10 when 'E+' then 9 when 'E' then 8
    when 'E-' then 7 when 'F+' then 6 when 'F' then 5 when 'F-' then 4 
    when 'G+' then 3 when 'G' then 2 when 'G-' then 1 when 'U' then 0 end) as TAVal

    from subject 
    join student on subject.upn=student.upn 
    where subject.datacollection='March 2013' and student.stuyear=11 and 
    subject.name='English'
    order by student.surname, student.forename 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:45:57.080

```
;WITH SQ AS (
select
    student.surname, student.forename,
    subject.target AS Tar, 
    (case subject.target
    when 'A*' then 23 when 'A*-' then 22 when 'A+' then 21 when 'A' then 20
    when 'A-' then 19 when 'B+' then 18 when 'B' then 17 when 'B-' then 16
    when 'C+' then 15 when 'C' then 14 when 'C-' then 13 when 'D+' then 12
    when 'D' then 11 when 'D-' then 10 when 'E+' then 9 when 'E' then 8
    when 'E-' then 7 when 'F+' then 6 when 'F' then 5 when 'F-' then 4
    when 'G+' then 3 when 'G' then 2 when 'G-' then 1 when 'U' then 0 end) as TarVal,

    subject.result AS TA, 
    (case subject.result 
    when 'A*' then 23 when 'A*-' then 22 when 'A+' then 21 when 'A' then 20
    when 'A-' then 19 when 'B+' then 18 when 'B' then 17 when 'B-' then 16
    when 'C+' then 15 when 'C' then 14 when 'C-' then 13 when 'D+' then 12
    when 'D' then 11 when 'D-' then 10 when 'E+' then 9 when 'E' then 8
    when 'E-' then 7 when 'F+' then 6 when 'F' then 5 when 'F-' then 4 
    when 'G+' then 3 when 'G' then 2 when 'G-' then 1 when 'U' then 0 end) as TAVal

    from subject 
    join student on subject.upn=student.upn 
    where subject.datacollection='March 2013' and student.stuyear=11 and 
    subject.name='English'
)
SELECT Tar, TarVal, TA, TAVal, TAVal - TarVal Difference
FROM SQ
order by surname, forename; 
```

# python - python中的模式搜索

> ID：15797670
> 
> 赞同：0
> 
> 时间：2013-04-03T20:40:24.730
> 
> 标签：python, regex

以下是我的代码 -

```
line = Application::load( ppv ) launchUri: package://C2FF73A0-D18AACEB/ppv.html
n = re.search(r"Application::load\( (.*?) \)",line)

print n.groups() 
```

它的输出像 -

```
('ppv',) 
```

我只需要 ppv 作为输出。

有人会建议我应该做哪些修改以获得预期的输出吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:42:43.380

更改`print n.groups()`为`print n.group(1)`。

[`Match.group(n)`](http://docs.python.org/2/library/re.html#re.MatchObject.group)将从正则表达式返回第 n 个组，或者如果`n`未提供，`0`则将返回整个匹配项。

# c# - 如何从用 C# 编写的 WinRT 应用程序获取崩溃日志和堆栈跟踪？

> ID：15797671
> 
> 赞同：8
> 
> 时间：2013-04-03T20:40:24.823
> 
> 标签：c#, windows-runtime, windows-store-apps, crash-reports

我刚刚开始使用 C# 编写的 Windows 应用商店应用程序，它尚未发布到 Windows 应用商店。当我向我的测试团队提供正在开发的应用程序的调试版本并且它崩溃时，他们在哪里可以找到崩溃日志和堆栈跟踪？构建应用程序时我需要做些什么吗？我正在寻找标准解决方案，**而不是**第三方库或最终用户向我发送报告的东西。我来自 ADB logcat 始终包含 Java 堆栈跟踪的 Android 世界，我正在寻找 C#/WinRt 中的等价物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T06:47:32.440

崩溃转储将包含调用堆栈等等。

要收集故障转储，首先，执行以下 regedit 脚本：

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps]
"DumpFolder"="C:\\Temp\\CrashDumps"
"DumpCount"=dword:00000002
"DumpType"=dword:00000002 
```

第二，重现崩溃。

第三，通过执行以下命令停止故障转储回收：

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps]
"DumpFolder"=-
"DumpCount"=-
"DumpType"=- 
```

四、从**C:\Temp\CrashDumps获取故障转储**

[MSDN 上的更多信息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)。

# function - 创建一个使用带变量的函数的宏

> ID：15797675
> 
> 赞同：2
> 
> 时间：2013-04-03T20:40:31.180
> 
> 标签：function, excel, sum, vba

这是我的代码：

```
Dim N As Single
N = ActiveCell.Offset(0, 0).Value
E = 1 - N

ActiveCell.Offset(0, 1).Range("A1").Select
ActiveCell.FormulaR1C1 = "=-SUM(R[E]C:R[-1]C)"
ActiveCell.Offset(0, 1).Range("A1").Select
ActiveCell.FormulaR1C1 = "=-SUM(R[E]C:R[-1]C)"
ActiveCell.Offset(0, 1).Range("A1").Select
ActiveCell.FormulaR1C1 = "=-SUM(R[E]C:R[-1]C)"
ActiveCell.Offset(1, 0).Range("A1").Select 
```

我希望宏用户选择一个具有值的单元格（示例 5），因为它将是第 5 行值的插槽。我希望程序找到它之前的所有值的负总和（1、2、3 和 4）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:32:58.430

我可以建议以下作为避免使用 SELECT 的替代方法吗？

```
Sub SampleWithoutSelect()
Dim N As Single
N = ActiveCell.Offset(0, 0).Value
E = 1 - N

for iIndx=0 to -3 step -1
    range(activecell.offset(iindx,0).formular1c1="=-SUM(R[" & E & "]C:R[-1]C)"
next

End Sub 
```

这是你想要的 - 还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:49:49.337

虽然我不赞成`.Select`。看到[这个](https://stackoverflow.com/questions/10714251/excel-macro-avoiding-using-select/10718179#10718179)。

但这是你正在尝试的吗？`E`是一个变量。在双引号内它表现为一个字符串:)

```
Sub Sample()
    Dim N As Single
    N = ActiveCell.Offset(0, 0).Value
    E = 1 - N

    ActiveCell.Offset(0, 1).Range("A1").Select
    ActiveCell.FormulaR1C1 = "=-SUM(R[" & E & "]C:R[-1]C)"
    ActiveCell.Offset(0, 1).Range("A1").Select
    ActiveCell.FormulaR1C1 = "=-SUM(R[" & E & "]C:R[-1]C)"
    ActiveCell.Offset(0, 1).Range("A1").Select
    ActiveCell.FormulaR1C1 = "=-SUM(R[" & E & "]C:R[-1]C)"
    ActiveCell.Offset(1, 0).Range("A1").Select
End Sub 
```

# objective-c - 苹果地图显示默认区域

> ID：15797677
> 
> 赞同：0
> 
> 时间：2013-04-03T20:40:33.260
> 
> 标签：objective-c, map, apple-maps

我想为应用程序设置一个默认区域，每次打开地图时它都应该显示一个区域。例如，每次我打开地图时，它都应该显示“伦敦”。

我这样做了，但它没有居中

```
@interface AppleMapViewController ()

@end

@implementation TicinoWineAppleMapViewController
@synthesize mapView = _mapView;

#define DEFAULT_LATITUDE 46.006512
#define DEFAULT_LONGITUDE 8.952312

#define THE_SPAN 10.0f

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self;
}

- (void)viewWillAppear:(BOOL)animated
{
    NSLog(@"ViewWillAppear");

}

- (void)createDefaultRegion
{
    MKCoordinateRegion defaultRegion;

    CLLocationCoordinate2D center;
    center.latitude = DEFAULT_LATITUDE;
    center.longitude = DEFAULT_LONGITUDE;

    MKCoordinateSpan span;
    span.latitudeDelta = THE_SPAN;
    span.longitudeDelta = THE_SPAN;

  //  defaultRegion.center = center;
  //  defaultRegion.span = span;

    defaultRegion = MKCoordinateRegionMake(center, span);

    TicinoWineMapViewAnnotation *annotation = [[TicinoWineMapViewAnnotation alloc]initWithTitle:@"ciao" andCoordinate:center];
    [_mapView addAnnotation:annotation];

    [_mapView setRegion:defaultRegion animated:YES];
    [_mapView setCenterCoordinate:center animated:YES];

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self createDefaultRegion];

}

@end 
```

我尝试了两种方法：

```
 [_mapView setRegion:defaultRegion animated:YES];
    [_mapView setCenterCoordinate:center animated:YES]; 
```

但它并不以我想要的为中心。这可能是模拟器的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T10:23:30.737

你可以试试这个功能。它对我有用。

*   (void)recenterMap
    {

    NSArray *coordinates = [Mapsview valueForKeyPath:@"annotations.coordinate"];

    CLLocationCoordinate2D maxCoord = {-90.0f, -180.0f};
    CLLocationCoordinate2D minCoord = {90.0f, 180.0f};

    for(NSValue *坐标值) {

    ```
    CLLocationCoordinate2D coord = {0.0f, 0.0f};

    [value getValue:&coord];

    if(coord.longitude > maxCoord.longitude) {            
        maxCoord.longitude = coord.longitude;            
    }        
    if(coord.latitude > maxCoord.latitude) {            
        maxCoord.latitude = coord.latitude;            
    }        
    if(coord.longitude < minCoord.longitude) {            
        minCoord.longitude = coord.longitude;            
    }        
    if(coord.latitude < minCoord.latitude) {            
        minCoord.latitude = coord.latitude;
    } 
    ```

    }

    MKCoordinateRegion 区域 = {{0.0f, 0.0f}, {0.0f, 0.0f}};

    //region.center.longitude = (minCoord.longitude + maxCoord.longitude) / 2.0; // region.center.latitude = (minCoord.latitude + maxCoord.latitude) / 2.0;

    region.center.longitude = minCoord.longitude + (maxCoord.longitude - minCoord.longitude)/2.0f; region.center.latitude = minCoord.latitude + (maxCoord.latitude - minCoord.latitude)/2.0f;

    region.span.longitudeDelta = (maxCoord.longitude - minCoord.longitude) * 1.5; region.span.latitudeDelta = (maxCoord.latitude - minCoord.latitude) * 1.5;

    [Mapsview setRegion：区域动画：YES]；

}

# jquery - 使用jQuery将一个单元格添加到基于另一个单元格中的href的表格中

> ID：15797681
> 
> 赞同：0
> 
> 时间：2013-04-03T20:41:02.357
> 
> 标签：jquery

```
<tr>
 <!--INSERT NEW CELL HERE -->
 <td>
  <a href="test123.html">test</a>
 </td> 
```

我需要根据 href test123.html 在该空间中放置一个新单元格。我试过：

```
jQuery("td[href$='test123.html']").before("<td>new cell</td>"); 
```

但没有骰子。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:43:10.460

你错过了`a`那里，因为 href 是`<a>`而不是的属性`<td>`。

试试这个

```
jQuery("td a[href$='test123.html']").before("<td>new cell</td>");
  //------^^-----here 
```

但是，这会将新的 td 放在之前`<a>`，将它放在 ibefore`<td>`你必须使用 parent() 或最接近的() ..

```
jQuery("a[href$='test123.html']").parent().before("<td>new cell</td>");
//or
jQuery("a[href$='test123.html']").closest("td").before("<td>new cell</td>"); 
```

[在这里摆弄](http://jsfiddle.net/vJU9Y/2/)

# php - 代表非页面管理员的用户发布到 Facebook 页面

> ID：15797685
> 
> 赞同：0
> 
> 时间：2013-04-03T20:41:25.747
> 
> 标签：php, facebook, post, sdk

我们正在尝试构建一个 facebook 应用程序，该应用程序将来自用户的消息发布到 facebook 业务页面（用户不是管理员）。我们需要来自 USER，而不是页面或页面管理员的帖子。我们正在使用 facebook PHP SDK，到目前为止，我们已经完成了让用户的消息发布到他们自己的 feed。（使用应用程序访问令牌。）尽管当我们尝试将消息发布到 facebook 页面（不属于用户）时，我们会收到以下错误：

致命错误：未捕获的 OAuthException：（＃200）用户尚未授权应用程序执行抛出的此操作

是否可以代表用户发布到不归用户所有的 Facebook 页面？我们是 facebook 页面的管理员，但如果我们使用页面访问令牌发布，则该帖子不再由用户创作，而是由 facebook 页面或页面管理员创作。

这是我们的代码片段，看看我们是如何处理的：

## 以用户身份发布到用户的提要（作品）

```
$fbpage = "/$fbid/feed";

$attachment =  array(
'message' => $msg,'from' => array('name' => $name,'id' => $fbid)); 

$result = $facebook->api('/'.$fbpage.'?access_token='.$accesstoken, 'post', $attachment); 
```

## 以用户身份发布到 Facebook 页面（不起作用）

```
$fbpage = "/johnsjoint/feed";

$attachment =  array('message' => $msg,'from' => array('name' => $name,'id' => $fbid)); 

$result = $facebook->api('/'.$fbpage.'?access_token='.$accesstoken, 'post', $attachment); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:36:04.477

经过大量研究，这似乎是不可能的。如果有人知道，请在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T18:59:22.007

不确定是否是完全相同的问题，但这可能会阐明您的问题。请参阅“[通过 PHP SDK 以用户身份发布到 Facebook 粉丝页面提要](https://stackoverflow.com/questions/17020585/posting-to-facebook-fan-page-feed-as-user-trough-php-sdk)”

# c# - 使用字符串路径的 SetBinding 仅在 .NET 4.0 中触发 SetBinding 上的更改事件

> ID：15797691
> 
> 赞同：2
> 
> 时间：2013-04-03T20:41:48.270
> 
> 标签：c#, wpf, data-binding, mvvm, .net-4.0

我不确定这是否是`4.0`我对 DP 和绑定的错误或误解。*注意：这适用于 3.5 和 4.5...只是不适用于 4.0

考虑以下代码：

虚拟机：

```
public MyEnum MyProp
{
    get{return _myProp;}
    set
    {
        _myProp = value;
        OnPropertyChanged("MyProp");
    }
} 
```

查看（依赖属性设置）：

```
 MyDP= DependencyProperty.Register("MyProp", typeof(MyEnum), typeof(MyControl), new PropertyMetadata(DefaultEnumVal, MyPropChanged)); 
```

查看（在 datacontextchanged 事件中）：

**第一个选项**

```
this.SetBinding(MyDP, "MyProp"); //Only triggers MyPropChanged once 
```

**第二种选择**

```
this.SetBinding(MyDP, 
    new Binding
    {
        Source=this.DataContext, 
        Path = new PropertyPath("MyProp")
    }
); //Works as expected 
```

那么，考虑到所有这些，为什么第一个选项只触发一次属性更改，而更详细的方法在第一次更改之后继续？我认为第一个/字符串版本固有地使用`this.DataContext`? 如果我安装`.NET 4.5`，那么这对两者都按预期工作，这让我相信这是一个 4.0 错误，可能与在`DataContextChanged`事件中这样做有关？

但是，也许我错过了一些东西，所以这就是我在这里问的原因:)

更新

[甚至每个微软](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.source%28v=vs.100%29.aspx)：

> 默认情况下，绑定继承由 DataContext 属性指定的数据上下文（如果已设置）

而且，根据反射：

```
public BindingExpression SetBinding(DependencyProperty dp, string path)
{
    return (BindingExpression)this.SetBinding(dp, new Binding(path));
} 
```

所以，这一切都是调用与上面相同的代码，只是没有设置源。这应该会导致更新对`DataContext`

如果我将第二个选项保留`Source` `null`在第二个选项中，我可以重现第一个选项

更新#2

显然在 4.5 中，他们添加了一个`ResolvedSource`属性。这表明在 4.5 中，源解析为我所期望的。我将其追溯到`ClrWorker`并发现`SourceItem`确实被正确评估了……至少在`SetBinding`. 我将看看是否有办法让我跟踪它以查看它是否/何时发生变化。

更新#3

经过进一步调试，我发现更改的事件只发生在`SetBinding`. 如果我将 设置为`DefaultEnumValue`发生时的状态`SetBinding`，则根本不会触发更改

更新#4

如果我调用`this.SetValue(MyDP, SomeEnumVal);`* 那么这可以工作，甚至可以写入 VM。我尝试更改 DP，以便将元数据设置为 twowaybindingbydefault 以查看是否有帮助，但它没有

*这并不让我感到惊讶，因为 SetBinding 本身做了 a `target.SetValue(dp, bindingExpressionBase);`，这解释了为什么它一次可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:58:13.033

这当然看起来很奇怪，但我*认为*这里发生的事情与绑定的源无关，而是你如何设置路径。您的第一个案例调用`SetBinding(DependencyProperty, string)`，而后者又调用`SetBinding(DependencyProperty, new Binding(path))`。`Binding`构造函数在内部将其设置为`Path`-`new PropertyPath(path, new object[0])`没有参数的路径。

在第二种情况下，您正在创建自己的`PropertyPath`，但是通过一个不同的构造函数，该构造函数接受一个 type`object`的参数，它表示一个参数。该构造函数似乎设置`Path`为`"(0)"`并将您的`"MyProp"`字符串设置为绑定的参数。

以下是 MSDN 关于该构造函数的说明：

> 此构造函数有两种完全不同的用法，具体取决于它是用于绑定的源模式属性路径，还是用于情节提要目标的目标模式单步属性路径。
> 
> 如果在源模式下将此 PropertyPath 用于绑定，则参数是表示属性名称的字符串，或者可以是描述正在用作对象的 CLR 对象模型中的属性的“逐步”路径的字符串绑定的来源。对于绑定属性路径，标识“步骤”的字符是点 (.)。还支持索引器引用（包括多个索引器和类型区分）。有关 Binding 对象专门使用的字符串语法的更多详细信息，请参阅 Binding.Path。用作绑定源的属性不必是依赖属性。如果绑定双向更新，则引用的属性必须是可读写的。另请注意，绑定目标必须是依赖属性。有关详细信息，请参阅数据绑定概述。
> 
> 如果在目标模式下将此 PropertyPath 用于情节提要目标的单步路径，则参数通常作为 DependencyProperty 类型提供。您还可以指定一个字符串，即名称。这些中的任何一个都评估为相同的结果，因为它在内部存储为字符串。提供的 DependencyProperty 通过 DependencyPropertyConverter 转换为字符串。DependencyPropertyConverter 支持依赖属性的限定命名格式，因此您可以在代码中为 PropertyPath.PropertyPath 构造函数指定 typeName.propertyName 限定依赖属性名称字符串。依赖属性标识符的限定路径与复杂路径是不同的概念。应改为使用 PropertyPath.PropertyPath 构造函数创建复杂路径 PropertyPath。

我仍然不确定为什么你的第一个案例不起作用，但想象一下，由于某种原因，因为参数不必*是*依赖属性，但可以是常规 CLR 属性，它被视为后者。

在第二种情况下，该属性被解释为“情节提要目标的单步路径”（尽管我想它可能不是），但由于在这种用法中它*必须*是依赖属性，因此绑定处理它的方式不同。

为了保持一致性，您可以尝试在第二种情况下将 Path 设置为：

```
Path = new PropertyPath("MyProp", new object[0]) 
```

当然，现在我希望您的绑定在这两种情况下都只能工作一次！它可能会恢复一些理智，但也可能表明绑定问题存在于其他地方。

# authentication - 互联网应用

> ID：15797693
> 
> 赞同：0
> 
> 时间：2013-04-03T20:41:53.093
> 
> 标签：authentication, asp.net-mvc-4

具有使用表单身份验证的帐户控制器的默认 ASP.NET MVC 4 项目，但此身份验证在我的服务器上的 IIS 7.5 上给出此错误。

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 50 - Local Database Runtime error occurred. Cannot create an automatic instance. See the Windows Application event log for error details.) 
```

我怎么能解决这个问题，因为我在课堂上找不到任何联系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:31:31.297

默认的 MVC 4 项目依赖于 IIS Express 和 LocalDB，生成的 LocalDB 存储在 App_Data 文件夹中。

但是，当将项目更改为在完整的 IIS 下运行时，建议您切换到使用 SQL Express。为此，您需要创建一个数据库并设置相关的连接字符串。假设您的应用程序具有相关权限并且 WebSecurity.InitializeDatabaseConnection 已将 autoCreateTables 设置为 true，则将自动创建相关表。

默认数据库初始化是通过我们可以在 Filters/InitializeSimpleMembershipAttribute.cs 中找到的 InitializeSimpleMembershipAttribute 完成的，然后将该属性应用于 AccountController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:45:53.100

您应该按照异常消息中的建议检查 Windows 日志。连接字符串位于 Web 应用程序的 web.config 文件中。

# c++ - C++ 在子线程中删除

> ID：15797694
> 
> 赞同：1
> 
> 时间：2013-04-03T20:41:53.567
> 
> 标签：c++, object, pthreads

据我了解，在对象内部启动线程时调用的函数不应该是类成员。最好的方法似乎是启动一个朋友功能，它可以让您重新访问您的对象。

通常，启动子线程的成员函数（以及父线程）可以继续，也可以返回。在我使用这种技术的每一种情况下，我都让启动器方法返回到调用它的父线程中的应用程序；类似于 Qt 线程。

当子线程完成它的工作时，它所做的最后一件事是返回到友元函数，该函数本身返回到等待返回的东西（pthread_koin 或 WaitForSingleEvent），或者，如果没有捕手，我猜你会说归于无处。

所以，这就是问题所在。如果友元函数的返回没有捕获器，即父线程不在成员函数中，我可以安全地销毁从友元函数启动子线程的对象吗？

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - -------------------------

从回复中可以看出，我需要一个例子。我们会选择Windows。与Linux没有什么不同。我遗漏了很多东西，类定义等。

1.  Main 在堆上创建了一个 SomeObject。
2.  Main 调用 so->run() 并开始做其他事情。
3.  Run() 启动运行 SomeFriend() 的子线程。
4.  SomeFriend() 调用 so->Worker() (that == so)
5.  Worker() 执行任何操作并返回到 SomeFriend()。
6.  我可以在这里删除吗？即`delete that` <<<=== 这个问题的主题。
7.  SomeFriend() 返回终止子线程。

> ```
> //=================================================================
> int main( int argc, char** argv )
> {
>    SomeObject* so = new SomeObject();
>    so->run();
>    while(1)
>    {
>       DoOtherTasks();  // but don't exit!
>    }
>    return 0;        
> 
> //=================================================================
> void SomeObject::run();
> (
>   volatile DWORD      ThreadId;         // Thread ID
>   HANDLE              threadHandle;
> 
>   try
>   {
>      threadHandle = CreateThread(
>          NULL,                              // default security attributes
>          0,                                 // set stack size: default = 0
>          (LPTHREAD_START_ROUTINE)(SomeFriend),
>          (LPVOID*)this,                     // func args: this
>          0,                                 // default creation flags
>          (LPDWORD)(&ThreadId)               // ptr to thread identifier
>          );
>   }
>   catch ( ... )
>      { throw; }
> }   // launches the thread and returns.
> 
> //=================================================================
> void*    SomeFriend( void* thisPtr )  // is a friend of SomeObject
> {
>    SomeObject*     that ((SomeObject*)thisPtr);
> 
>    that->Worker();
> 
>    // HERE IS WHERE THE QUESTION IS TALKING ABOUT
>    // CAN I DO THIS SAFELY?
>    delete that;
> 
>    return (void*)NULL;
> }
> 
> //=================================================================
> void SomeObject::Worker()  // remember, this is run in the daughter thread.
> {
>    // whatever
>    return (void*)NULL;
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:32:27.690

要回答您编辑的问题，是的，您可以`delete that;`但是，请记住，由于线程调度程序可能已经调度线程的方式，它调用的任何函数在调用*后*的逻辑中的*任何*`main()`时候都可能无效。`so` **`so->run()`**

 **`so`在您调用`so->run()`. 如果没有受保护的逻辑`main()`，它的堆栈后代不应该再次接触。`so`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:59:34.817

是的。

您的内存管理代码应该已经是线程安全的（或者线程开始时会很危险！）所以 free() 本身应该没问题。破坏也很好，只要你记住没有其他人可以引用这个对象，因为他们将指向一个被破坏的对象。

人们说它不应该是类成员的原因是成员函数有一个典型的隐藏指针，它在字节级别上与其他参数的处理方式也不同，所以你不能把它作为一个带有额外参数的普通函数来调用. 这使得它通常与具有所需特定调用约定的 pthread_create 和 CreateThreadEx 函数不兼容。这就是为什么你有一个保镖静态/全局/朋友函数来为你做这个调用约定转换（并且可能如此透明以至于你自己没有注意到它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:45:21.367

没有内在的理由不将成员函数作为线程中的顶级函数启动。C++11 处理得很好：

```
struct S {
    void f();
};

S s;

int main() {
    std::thread thr(&S::f, s);
    thr.join();
    return 0;
} 
```**

# android - 将logcat写入android中的xml文件

> ID：15797698
> 
> 赞同：0
> 
> 时间：2013-04-03T20:41:59.127
> 
> 标签：android, xml, logcat, motionevent

我在android方面有点新手。我实际上想将 logcat 中显示的信息写入将保存在手机或计算机中的 xml 文件中。这是为我的应用程序显示的 logcat，我想将压力和大小实际保存到压力/大小标签下的 xml 文件中。我怎样才能做到这一点？

```
04-04 02:38:45.057: I/System.out(14272): Pressure 0.23333335
04-04 02:38:45.057: I/System.out(14272): Size 0.227451
04-04 02:38:46.217: I/System.out(14272): Pressure 0.20000002
04-04 02:38:46.217: I/System.out(14272): Size 0.22352943
04-04 02:38:46.702: I/System.out(14272): Pressure 0.26666668
04-04 02:38:46.702: I/System.out(14272): Size 0.27450982
04-04 02:38:47.222: I/System.out(14272): Pressure 0.23333335
04-04 02:38:47.222: I/System.out(14272): Size 0.26666668
04-04 02:38:47.657: I/System.out(14272): Pressure 0.23333335
04-04 02:38:47.657: I/System.out(14272): Size 0.23137257
04-04 02:38:48.087: I/System.out(14272): Pressure 0.16666667
04-04 02:38:48.087: I/System.out(14272): Size 0.16862746
04-04 02:38:48.502: I/System.out(14272): Pressure 0.3
04-04 02:38:48.502: I/System.out(14272): Size 0.3019608
04-04 02:38:48.907: I/System.out(14272): Pressure 0.23333335
04-04 02:38:48.907: I/System.out(14272): Size 0.2392157
04-04 02:38:49.267: I/System.out(14272): Pressure 0.23333335
04-04 02:38:49.267: I/System.out(14272): Size 0.25882354
04-04 02:38:49.732: I/System.out(14272): Pressure 0.20000002
04-04 02:38:49.732: I/System.out(14272): Size 0.21568629
04-04 02:38:50.137: I/System.out(14272): Pressure 0.23333335
04-04 02:38:50.137: I/System.out(14272): Size 0.2509804
04-04 02:38:50.647: I/System.out(14272): Pressure 0.23333335
04-04 02:38:50.647: I/System.out(14272): Size 0.24705884
04-04 02:38:51.042: I/System.out(14272): Pressure 0.16666667
04-04 02:38:51.042: I/System.out(14272): Size 0.18823531
04-04 02:39:10.822: I/System.out(14272): Pressure 0.23333335
04-04 02:39:10.822: I/System.out(14272): Size 0.22352943
04-04 02:39:10.987: I/System.out(14272): Pressure 0.26666668
04-04 02:39:10.987: I/System.out(14272): Size 0.26666668
04-04 02:39:11.177: I/System.out(14272): Pressure 0.23333335
04-04 02:39:11.177: I/System.out(14272): Size 0.26666668
04-04 02:39:11.482: I/System.out(14272): Pressure 0.20000002
04-04 02:39:11.482: I/System.out(14272): Size 0.227451
04-04 02:39:11.787: I/System.out(14272): Pressure 0.23333335
04-04 02:39:11.787: I/System.out(14272): Size 0.21960786
04-04 02:39:12.137: I/System.out(14272): Pressure 0.23333335
04-04 02:39:12.137: I/System.out(14272): Size 0.23529413
04-04 02:39:12.472: I/System.out(14272): Pressure 0.20000002
04-04 02:39:12.472: I/System.out(14272): Size 0.22352943
04-04 02:39:12.792: I/System.out(14272): Pressure 0.20000002
04-04 02:39:12.792: I/System.out(14272): Size 0.1764706
04-04 02:39:13.122: I/System.out(14272): Pressure 0.23333335
04-04 02:39:13.122: I/System.out(14272): Size 0.2627451
04-04 02:39:13.937: I/System.out(14272): Pressure 0.26666668
04-04 02:39:13.937: I/System.out(14272): Size 0.27450982
04-04 02:39:14.472: I/System.out(14272): Pressure 0.16666667
04-04 02:39:14.472: I/System.out(14272): Size 0.13725491
04-04 02:39:15.007: I/System.out(14272): Pressure 0.3
04-04 02:39:15.007: I/System.out(14272): Size 0.30588236
04-04 02:39:15.482: I/System.out(14272): Pressure 0.26666668
04-04 02:39:15.482: I/System.out(14272): Size 0.26666668
04-04 02:39:15.877: I/System.out(14272): Pressure 0.20000002
04-04 02:39:15.877: I/System.out(14272): Size 0.24705884
04-04 02:39:16.097: I/System.out(14272): Pressure 0.26666668
04-04 02:39:16.097: I/System.out(14272): Size 0.26666668 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:48:00.790

## 使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")在本地 PC 上运行的 Perl 脚本：

要求`logcat`输出`input_file.log`

```
#!/usr/bin/perl

use strict; use warnings;
use XML::Simple;

my $h = {};

print "<?xml version='1.0' encoding='UTF-8'?>\n";

while (<>) {
    chomp;
    my @F = split;
    push @{ $h->{item} }, {
        date => "$F[0] $F[1]",
        system => $F[2],
        $F[3] => $F[4]
    }
}

my $xs = new XML::Simple;
my $xml = $xs->XMLout($h, NoAttr => 1, RootName => "tree");
print $xml; 
```

## 用法

```
./script.pl < input_file.log 
```

## 输出

```
<?xml version='1.0' encoding='UTF-8'?>
<tree>
  <item>
    <Pressure>0.23333335</Pressure>
    <date>04-04 02:38:45.057:</date>
    <system>I/System.out(14272):</system>
  </item>
  <item>
    <Size>0.227451</Size>
    <date>04-04 02:38:45.057:</date>
    <system>I/System.out(14272):</system>
  </item>
  <item>
    <Pressure>0.20000002</Pressure>
    <date>04-04 02:38:46.217:</date>
    <system>I/System.out(14272):</system>
    (...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:52:07.497

你不能在现代安卓上。从 4.2 开始，应用程序无法再访问日志文件。您必须在 PC 上执行此操作。

# google-apps-script - regexp.test() 返回布尔值，但不在“if”语句中 - 总是计算为

> ID：15797699
> 
> 赞同：0
> 
> 时间：2013-04-03T20:41:59.720
> 
> 标签：google-apps-script

我正在开发一个独立的界面。

我有几个文本框，并且都有名称和 ID。

如果我运行此代码：

```
var re = /someregexp/g;
var k ="sometext";

textBoxOne.setText(re.test(k)); //textBoxOne was selected first 
```

显示正确的结果“真”或“假”。要求 'typeof(re.test(k))' 正确返回布尔值。但是这段代码：

```
if (re.test(k)) {
  textBoxTwo.setText("matched.");
} else {
  textBoxTwo.setText("NOT matched.");
} 
```

总是进入“其他”分支。if (re.test(k) == true) 呈现相同的结果。

对我来说看起来像一个错误，其他人也发现了这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:13:05.530

编辑：AdamL 在下面的评论中指出（感谢 Adam），这比我想象的要多。我将我的原始代码留在下面以供参考。

下面的 myFunction2() 遵循“匹配”分支，因为您期望一个正常工作的正则表达式（所以也许这可以用来解决这个错误）：

```
function myFunction2() {
  var k ="sometext";

  Logger.log(  /ome/g.test(k)  ); 
  if ( /ome/g.test(k)  ) {
    Logger.log("matched.");
  } else {
    Logger.log("NOT matched.");
  }
} 
```

相反，正如您所观察到的，下面的 myFunction() 意外地跟随到“不匹配”分支。

```
function myFunction() {
  var re = /ome/g;
  var k ="sometext";

  Logger.log(re.test(k));

  if (re.test(k)) {
    Logger.log("matched.");
  } else {
    Logger.log("NOT matched.");
  }
} 
```

# javascript - 如何使用 jQuery 总结表中未定义数量的输入？

> ID：15797702
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:01.470
> 
> 标签：javascript, jquery

我有一个表，行数未定义，这意味着人们可以在客户端添加/删除行。我想做的是当有人在两个输入（数量和速率）中输入新值时，我想做一些加法和乘法，并将其作为总和输出到页面。

每行都有数量和费率。每行应该有总计 = 数量 * 费率。然后，我想总结一下所有的总数。当用户输入他们的信息时，我希望能够在客户端执行此操作。以下是这些字段的样子：

```
 <tbody id='line-items'>
        <tr class='fields'>
          <td><input id="invoice_invoice_line_items_attributes_0__destroy" name="invoice[invoice_line_items_attributes][0][_destroy]" type="hidden" value="false" /><a href="javascript:void(0)" class="remove_nested_fields" data-association="invoice_line_items">X</a></td>
          <td><input id="invoice_invoice_line_items_attributes_0_description" label="false" name="invoice[invoice_line_items_attributes][0][description]" size="30" type="text" /></td>
          <td><input class="input-mini" id="invoice_invoice_line_items_attributes_0_quantity" label="false" name="invoice[invoice_line_items_attributes][0][quantity]" size="30" type="text" /></td>
          <td><input class="input-mini" id="invoice_invoice_line_items_attributes_0_rate" label="false" name="invoice[invoice_line_items_attributes][0][rate]" size="30" type="text" /></td>
        </tr>
        <tr class='fields'>
          <td><input id="invoice_invoice_line_items_attributes_1__destroy" name="invoice[invoice_line_items_attributes][1][_destroy]" type="hidden" value="false" /><a href="javascript:void(0)" class="remove_nested_fields" data-association="invoice_line_items">X</a></td>
          <td><input id="invoice_invoice_line_items_attributes_1_description" label="false" name="invoice[invoice_line_items_attributes][1][description]" size="30" type="text" /></td>
          <td><input class="input-mini" id="invoice_invoice_line_items_attributes_1_quantity" label="false" name="invoice[invoice_line_items_attributes][1][quantity]" size="30" type="text" /></td>
          <td><input class="input-mini" id="invoice_invoice_line_items_attributes_1_rate" label="false" name="invoice[invoice_line_items_attributes][1][rate]" size="30" type="text" /></td>
        </tr>
        <tr class='fields'>
          <td><input id="invoice_invoice_line_items_attributes_2__destroy" name="invoice[invoice_line_items_attributes][2][_destroy]" type="hidden" value="false" /><a href="javascript:void(0)" class="remove_nested_fields" data-association="invoice_line_items">X</a></td>
          <td><input id="invoice_invoice_line_items_attributes_2_description" label="false" name="invoice[invoice_line_items_attributes][2][description]" size="30" type="text" /></td>
          <td><input class="input-mini" id="invoice_invoice_line_items_attributes_2_quantity" label="false" name="invoice[invoice_line_items_attributes][2][quantity]" size="30" type="text" /></td>
          <td><input class="input-mini" id="invoice_invoice_line_items_attributes_2_rate" label="false" name="invoice[invoice_line_items_attributes][2][rate]" size="30" type="text" /></td>
        </tr>
      </tbody> 
```

如何使用 jquery 对可变数量的行执行此操作，然后将其输出到页面？谢谢！

编辑：我很早就试图弄清楚如何从每一行获取正确的输入，如下所示：

```
$('table input[id^=invoice_invoice_line_items_attributes]') 
```

它抓取了所有行，但我不确定如何跳过 ID 中的数字并检查 ID 的最后一个单词以确保它是数量或费率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:04:08.877

```
var sum = 0;
$('#line_items input[id$="quantity"]').each(function() {
  sum += parseInt($(this).val());
}); 
```

如果数字是浮点数，您也可以使用 parseFloat

# java - 游标返回的值错误

> ID：15797703
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:05.567
> 
> 标签：java, android, sqlite, cursor

对我来说，这看起来像是完全的超自然活动。我得到了这个将数据库数据转换为对象的小函数：

```
public List<BudgetSummary> getMonnthlyBalance() {
    List<BudgetSummary> list = new ArrayList<BudgetSummary>();

    DbAdapter db = new DbAdapter(context);
    SQLiteDatabase sqldb = db.open();
    MonthlyBalanceSqlSelect sql = new MonthlyBalanceSqlSelect();
    Cursor cursor = sql.getCursor(sqldb);

    while (cursor.moveToNext()) {
        list.add(new BudgetSummary(cursor));
    }

    cursor.close();
    db.close();
    return list;
} 
```

`MonthlyBalanceSqlSelect`包含我从调试器复制到 Sqliteman 的 sql 查询。我已经从应用程序中提取了数据库文件。结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/ysSni.png)

这对我来说看起来很完美。现在让我们看一下`BudgetSummary`构造函数。就像电线一样简单。

```
public BudgetSummary(Cursor cursor) {
    incomes = cursor.getDouble(cursor.getColumnIndex("incomes"));
    expenses = cursor.getDouble(cursor.getColumnIndex("expenses"));     
} 
```

我在这个构造函数中的每次迭代都进行了逐步调试。它应该对应于图片上显示的数据，但它不...这里是结果：

```
 1\. incomes: 4732.0 - wrong   | expenses: -57.59 - wrong     | month and year correct
 2\. incomes: 4657.0 - correct | expenses: -3714.96 - correct | month and year correct
 3\. incomes: 708.0 - wrong    | expenses: -3383.03 - correct | month and year correct
 4\. incomes: 5669.48 - wrong  | expenses: -5669.48 - wrong   | month and year correct
 5\. incomes: 3278.5 - correct | expenses: -2685.91 - wrong   | month and year correct
 6\. incomes: 4612.5 - wrong   | expenses: -2786.78 - wrong   | month and year correct
 and so on... 
```

这是什么法术？我真的不知道......为什么有些价值观是正确的，而其他价值观却完全出乎意料？

**这是 SQL 查询。我强烈怀疑 java 对 Sqliteman 的看法与[此](https://stackoverflow.com/questions/13916210/cursor-returns-wrong-values-sqlite-android?rq=1)不同。不幸的是，我不知道它应该是什么样子。**

```
select strftime('%m', b.date) as month , strftime('%Y', b.date) as year, total(case when b.value >= 0 then b.value else 0 end) as incomes, total(case when b.value < 0 then b.value else 0 end) as expenses from budget b, category c where b.category_id = c.id group by month, year order by year desc, month desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:44:36.610

我*强烈*怀疑问题在于您假设 Sqliteman 和 Java 代码中的行顺序相同。除非您的 SQL 明确指定顺序，否则您不应假设它是相同的。我建议您在查询中包含月份和年份，并将其包含在您的查询中，`BudgetSummary`至少用于诊断。

# windows - Windows 控制台仅显示程序输出的最后一部分

> ID：15797704
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:06.660
> 
> 标签：windows, windows-8, windows-console

我的 Java 程序的控制台输出出现问题。执行 .jar 文件时，程序有很多输出。实际上它并不长，但 Windows 控制台只显示最后 30-50 行。我需要得到整个输出。这里有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:00:36.840

这是解决方案

1.  通过单击左上角的控制台图标选择控制台菜单。
2.  选择属性
3.  选项 -> 命令历史组框
4.  将 BufferSize 设置为 1000 或按要求设置但小于 32766
5.  可选择布局选项卡并增加屏幕缓冲区大小 -> 高度

# plugins - 当列表长度超过 244 个字符时，如何在 Stata 中存储变量名称列表？

> ID：15797705
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:07.220
> 
> 标签：plugins, stata

我正在写一个Stata插件，插件需要知道变量的顺序才能访问数据。为了解决这个问题，我构建了一个 C++ 函数，该函数在包含变量列表的宏中搜索正确的位置。但是，这受到 Stata 中字符串长度的限制。

我目前得到的变量列表如下：

```
qui ds
local varlist = "`r(varlist)'" 
```

但这只会给我前 244 个字符。

有没有一种方法可以获得包含所有变量名称的宏，即使列表长度超过 244 个字符？有没有其他有效的方法可以将变量放入我的插件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:34:17.793

听起来它可能与评估宏有关：

The Stata Journal (2008) 8, Number 4, pp. 586–587 Stata 提示 70：当心评估等号 Nicholas J. Cox

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T05:08:54.810

虽然，阅读上述书籍将帮助您理解宏，

一个简单的解决方案是**不要**使用其中的引文`"`r(varlist)'"`传递给当地人

`local macroname followedbyyourlongstringthatislongerthan244characters`

稍后评估

`di "`macroname'"`

瞧，看看你的长串！

您也可以将本地人传递给本地人

`local newmacroname `oldmacroname'`

并检查

`di "`newmacroname'"`

# php - preg_replace_callback vs while 逐行循环用于模板编译器

> ID：15797710
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:23.067
> 
> 标签：php, regex, while-loop, template-engine, preg-replace-callback

我构建了用于解析 html 模板的 php 类，并且我使用 preg_replace_callback 函数来解析模板 while 循环和 if 条件，for 循环等

我对每个过程重复了多次该函数，例如一次用于解析while循环，另一次用于if条件解析..等，并在解析模板内的包含文件时再次重复所有这些步骤，

但是我认为这种解析方法在解析大模板时很慢，

所以我认为使用一个while循环并逐行读取模板并进行比较然后解析找到的行会更快，

那么你的意见是，使用一个while循环并逐行读取模板文件并解析它更有用吗？或使用 preg_replace_callback ？

是否首选解析模板内的代码？通过用 php 代码替换它，然后使用 eval() 评估模板？还是在 php 文件中解析它然后将结果附加到模板中？

# iphone - 当我添加 libZSDK_API.a 时，Restkit 的 -ObjC 标志会导致编译错误

> ID：15797711
> 
> 赞同：3
> 
> 时间：2013-04-03T20:42:26.003
> 
> 标签：iphone, ios, ios6, zebra-printers

我正在使用 RestKit 来使用 Web 服务。RestKit 工作正常，直到我尝试添加 libZSDK_API.a 库（这个库是通过网络或蓝牙管理斑马打印机）

一些教程表明了将 RestKit 添加到 iOS 项目的此步骤：

*   添加“其他链接器标志”值 -ObjC

但是当我添加库时这个标志（-ObjC）会导致编译错误，当我删除这个标志时，iOS应用程序编译正确但是当我执行时应用程序崩溃了，因为项目没有 -ObjC 标志。

我收到此编译错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_Linea", referenced from:
      objc-class-ref in libZSDK_API.a(LineaBtPrinterConnection.o)
     (maybe you meant: _OBJC_CLASS_$_LineaBtPrinterConnection)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:31:06.567

Zebra API 链接到另一个 API，用于通过 IPC Linea Sled 设备进行蓝牙通信。该`LineaBtPrinterConnection`库文件的链接 ( `libdtdev.a`)。通常，如果您不关心通过 sled 的 BT 通信，则不必链接该库，但由于您添加了该`-ObjC`标志，它正在加载该文件并查找该库。

如果将`libdtdev.a`库添加到项目中，该错误应该会消失。该库应包含在您从 Zebra 下载的“Demos”项目文件夹下。如果您需要实际使用雪橇，根据雪橇的固件版本，您可能需要来自 IPC 的新版本，如果您[在他们的网站上注册为开发人员，就可以获得该版本。](http://www.ipcprint.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:55:08.450

我敢打赌，您的应用程序会为该设备成功构建。您看到的问题是当您为模拟器构建时（我可以说是因为它说“ `not found for architecture i386`”）。

你是如何构建“ `libZSDK_API`”的？从源头？如果是这样，请确保您也为模拟器构建它。如果没有，供应商需要`i386`在他们提供的 .a 文件中包含“”符号。

# c# - 手动跳出 DataGridView

> ID：15797714
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:31.353
> 
> 标签：c#, .net, datagridview

我有一个带有文本框和 1 行 10 列的 DataGridView 的表单。当用户在第 9 列上按 TAB 时，我希望焦点转到表单选项卡顺序（文本框）上的下一个控件。为此，我使用以下代码覆盖 ProcessCmd：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    const int WM_KEYDOWN = 0x100;
    const int WM_SYSKEYDOWN = 0x104;

    if ((msg.Msg == WM_KEYDOWN) || (msg.Msg == WM_SYSKEYDOWN))
    {
        switch (keyData & Keys.KeyCode)
        {
            case Keys.Tab:
            case Keys.Enter:
                if (this.CurrentCell != null && this.CurrentCell.ColumnIndex == 8)
                {
                    Form frmParent = FindForm();
                    frmParent.SelectNextControl(frmParent.ActiveControl, true, true, true, true);
                    return true;
                }
                break;
        }
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

当我运行它时，如果单元格未处于编辑模式，它可以正常工作。但是，如果单元格处于编辑模式，焦点会离开网格，但似乎无处可去。它不在文本框或网格上。但是，如果我随后打开一个新表单，然后切换回该表单，则文本框具有焦点。或者，如果我然后按 Shift+Tab，网格就会获得焦点。

我把它做成一个网格，可以在任何可以有许多其他控件的表单上工作。此表单是一个原型，因此它只有一个其他控件。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:04:34.687

我解决了这个问题。我所做的是在调用 SelectNextControl 之前调用 CurrentCell 的 DetatchEditingControl 方法。请看下面的代码：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    const int WM_KEYDOWN = 0x100;
    const int WM_SYSKEYDOWN = 0x104;

    if ((msg.Msg == WM_KEYDOWN) || (msg.Msg == WM_SYSKEYDOWN))
    {
        switch (keyData & Keys.KeyCode)
        {
            case Keys.Tab:
            case Keys.Enter:
                if (this.CurrentCell != null && this.CurrentCell.ColumnIndex == 8)
                {
                    if (this.EditingControl != null)
                        this.CurrentCell.DetachEditingControl();
                    Form frmParent = FindForm();
                    frmParent.SelectNextControl(frmParent.ActiveControl, true, true, true, true);
                    return true;
                }
                break;

        }
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

# shell - sesu - 在 shell 脚本中处理密码

> ID：15797716
> 
> 赞同：1
> 
> 时间：2013-04-03T20:42:35.477
> 
> 标签：shell, unix

sesu 命令提示我输入密码。我想将密码传递给 shell 脚本并登录我的 shell 脚本。在 shell 脚本中执行此操作是否有更好的方法？

```
-bash-3.2$ sesu someusername
Please enter your password: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:37:25.697

也许这会奏效

```
echo password | sesu someusername 
```

# mysql - Mysql：多行比较

> ID：15797718
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:42.930
> 
> 标签：mysql

从这个 Mysql 表：

```
Attributes
Brand   |attr   |   vals
Samsung | RAM   |   '750'
Samsung | CPU   |   '1200'
HTC     | RAM   |   '1000'
HTC     | CPU   |   '1500' 
```

我不知道如何获得所有物品

```
RAM>500
CPU>1300 
```

结果我只需要匹配所有参数的品牌：

```
Attributes
Brand   |attr   |   vals
HTC     | *     |   * 
```

查看 SQL 小提琴： [http ://sqlfiddle.com/#!2/491d7/1](http://sqlfiddle.com/#!2/491d7/1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:01:22.017

我将通过旋转数据来获得结果：

```
select brand, RAM, CPU
from
(
   select brand,
      max(case when attr='RAM' then cast(vals as unsigned) end) as RAM,
      max(case when attr='CPU' then cast(vals as unsigned) end) as CPU
   from attributes
   group by brand
) d
where RAM > 500
  and CPU > 1300 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/491d7/25)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T21:14:45.923

最外面的 WHERE 子句首先符合 1300 或更多的 RAM 属性。通过同一品牌再次加入自身（别名“b”），您现在拥有相同的品牌，但这次您仅在 CPU 上额外限定了“b”属性，其值 >= 500。您可以继续链接附加加入任何其他条件。这是对您正在寻找的所有组件进行限定...

```
select
      a.Brand,
      a.vals as RAM,
      b.vals as CPU
   from
      Attributes a
         JOIN Attributes b
            on a.Brand = b.Brand
           AND b.attr = 'CPU'
           AND b.vals >= 1300
   where
          a.attr = 'RAM'
      AND a.vals >= 500 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:46:22.777

```
SELECT
    Brand
FROM Attributes
WHERE
    (attr = 'RAM' AND cast(vals as unsigned) > 500)
    OR (attr = 'CPU' AND cast(vals as unsigned) > 1300)
GROUP BY Brand
HAVING COUNT(*) >= 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T21:32:12.913

更改@bluefeet 的查询，因此没有派生表。它可能会在某些 MySQL 版本中提高效率，但会破坏 ANSI/ISO SQL 的有效性，并且不会以[`ONLY_FULL_GROUP_BY`](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html#sqlmode_only_full_group_by)模式运行：

```
select brand,
  max(case when attr='RAM' then cast(vals as unsigned) end) as RAM,
  max(case when attr='CPU' then cast(vals as unsigned) end) as CPU
from attributes
group by brand  
having RAM > 500
   and CPU > 1300 ; 
```

改进它，所以它也是有效的：

```
select brand,
  max(case when attr='RAM' then cast(vals as unsigned) end) as RAM,
  max(case when attr='CPU' then cast(vals as unsigned) end) as CPU
from attributes
group by brand  
having max(case when attr='RAM' then cast(vals as unsigned) end) > 500
   and max(case when attr='CPU' then cast(vals as unsigned) end) > 1300 ; 
```

# ios - 返回块外的变量值 - Objective-C，iOS

> ID：15797721
> 
> 赞同：3
> 
> 时间：2013-04-03T20:42:48.473
> 
> 标签：ios, block

我在下面有一个与 URL 的连接并获取一些标头响应的代码，例如 http 代码响应和最终 URL（用于重定向情况）：

```
 - (NSString *)test
{
    __block NSString *cod = @"x";
    NSString *urlString = @"[http://www.google.com](http://www.google.com)";
    NSURL *url = [NSURL URLWithString:urlString];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                           cachePolicy:NSURLRequestReloadIgnoringCacheData
                                                       timeoutInterval:15.0f];

```
[request setHTTPMethod:@"HEAD"];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                           NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;
                           NSURL *resolvedURL = [httpResponse URL];
                           NSString *code = [NSString stringWithFormat:@"%ld", (long)[httpResponse statusCode]];
                           NSLog(@"%@", resolvedURL);
                           NSLog(@"%@", code);

                           cod = @"y"; // the idea was use something like 'cod = code', then return 'code' at end.. But it dont works too.
                       }];
return cod; } 
``` 可以看到，我已将 cod 变量声明为`__block`类型并设置为 x 值。在块内，我已经为 cod 设置了 y 值，但在方法结束时，我得到了 cod 的 x 值。我尝试使用 cod = code 之类的东西然后返回 cod，尊重对象类型，但是我在块内分配的任何东西，我都无法获得它之外的值。我究竟做错了什么？

            回答 #1

赞同：4

时间：2013-04-03T20:48:46.220

看方法名：

```
[NSURLConnection sendAsynchronousRequest:... 
```

哎呀！所以它是异步的。在调用完成块时，您的`test`方法将已经返回。您不能从同步方法返回异步调用的结果，因为它没有意义。调整您的类以与网络操作的异步性质保持一致，使用回调、委托等。总而言之，重新设计您的代码。

```

# core-data - 使用 coredata 中的 filterpredicate 选择 nsmanagedobject 的子集

> ID：15797723
> 
> 赞同：0
> 
> 时间：2013-04-03T20:42:51.800
> 
> 标签：core-data, nsmanagedobject

有一个带有 Coredata 数据模型的项目。每个类都与 Type 有关系。类型包含属性“内容”，以及其他属性。

它可以用这样的关系来建模

```
Element
  dimensions
  colors
  ...

Colors
    type----->ColorType
                content

Dimension
   quantity
   unit
   type ----->DimensionType
               content
Unit
   type ----->UnitType
               content

...

ObjectX
   type ----->TypeX
               content 
```

而不是有很多类型，我更喜欢以下

```
Super
 type -----> Type
              content

Unit isa Super
Dimension isa Super
...
ObjectX isa Super 
```

检索 nsmanagedobjects 的子集似乎很简单，其中属性包含匹配的字符串，例如通过 FilterPredicate 的属性 ownerClassname。

```
Super
 type -----> Type
              content
              ownersClassName 
```

DimensionType 可能是 'length'、'width'、'height' ColorType 可能是 'hex'、'rgb'、cymk' UnitType 可能是 'mm'、'cm'、'inch' 等。

元素可能有一对多的尺寸、颜色等。用户不需要输入“mm”、“rgb”，因此需要特定的下拉设置器。并且需要灵活地预测模型的变化，否则会破坏 DBMS。

问题：

当用户添加新类型时，如何将此 ownerClassName 字符串设置为“Unit”、“Dimension”、“Color”，以便 FilterPredicate 可以首先过滤...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:56:14.990

`awakeFromInsert`您在模型类期间为关系设置默认对象值。

您可以缓存默认值，这样您就不会在每次插入时从存储中重新获取对象。

# django - Django模型中的NameError？为什么我不能在模型中引用某些东西？

> ID：15797730
> 
> 赞同：1
> 
> 时间：2013-04-03T20:43:16.443
> 
> 标签：django, django-models, python-2.7

出于某种原因，我无法让这个模型彼此建立任何关系？而 Aptana 给了我红线和错误说 Test1 和 Test2 是未定义的变量...起初我认为它只是 aptana 搞砸了所以我决定同步它但它实际上给了我错误说 NameError: name Test1 is not defined？可能是什么原因？提前致谢！

```
from django.db import models
from django.contrib.auth.models import User
from django.utils.translation import ugettext as _
from userena.models import UserenaBaseProfile

class MyProfile(UserenaBaseProfile):
    user = models.OneToOneField(User, unique=True, verbose_name=_('User'), related_name='my_profile')
    favourite_snack = models.CharField(_('favourite snack'), max_length=5)
    test1 = models.ManyToManyField(Test1)

class Test1(models.Model):
    name = models.CharField(max_length=255, blank=False)
    test2 = models.OneToOneField(Test2)

class Test2(models.Model):
    name = models.CharField() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:48:10.060

这是定义类的顺序。Python 解释器不进行正向查找这应该可以解决您的问题。

```
from django.db import models
from django.contrib.auth.models import User
from django.utils.translation import ugettext as _
from userena.models import UserenaBaseProfile

class Test2(models.Model):
    name = models.CharField()

class Test1(models.Model):
    name = models.CharField(max_length=255, blank=False)
    test2 = models.OneToOneField(Test2)

class MyProfile(UserenaBaseProfile):
    user = models.OneToOneField(User, unique=True, verbose_name=_('User'), related_name='my_profile')
    favourite_snack = models.CharField(_('favourite snack'), max_length=5)
    test1 = models.ManyToManyField(Test1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T20:48:58.147

您在实际创建模型之前引用了模型，这就是您遇到`undefined`错误的原因，使用模型名称作为字符串而不是实际模型：

```
models.OneToOneField('Test2') 
```

[如此处](https://docs.djangoproject.com/en/dev/ref/models/fields/#module-django.db.models.fields.related)所述：

> 如果需要在尚未定义的模型上创建关系，可以使用模型的名称，而不是模型对象本身

其他方法是根据`karthikr`提到的引用顺序对文件中的模型进行重新排序。

# tcl - 在 TCL 的命令行中传递参数

> ID：15797747
> 
> 赞同：4
> 
> 时间：2013-04-03T20:44:06.243
> 
> 标签：tcl

来自[Windows 的 Tcl 常见问题解答](http://www.tcl.tk/faq/tclwin.htm#sec-4-3)：

> 要运行控制台脚本，请调用 tclsh.exe 程序，将脚本文件的路径传递给它。命令行上的任何其他参数都作为列表传递给 argv 全局变量中的脚本
> 
> ```
> # File printargs.tcl
> foreach arg $::argv {puts $arg} 
> ```
> 
> 我们可以从命令行调用这个脚本：
> 
> ```
> c:\> tclsh printargs.tcl first "second arg"
> first
> second arg
> c:\> 
> ```

我能够做到这一点。
但这是如何工作的？
争论的进展如何？

**注意**：我是初学者。对不起，如果我没有达到标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T19:05:05.540

如果您了解对 Tcl 的调用是如何工作的，那么您应该知道在以下行中给出了两个参数，即**第一个**和“**第二个参数**”（需要引号以确保第二个参数由两个单词组成：

```
c:\> tclsh printargs.tcl first "second arg" 
```

然后是以下指令：

```
foreach arg $::argv {puts $arg} 
```

...利用控制结构：

```
foreach <variable-name> <list> { <commands> } 
```

所以，**arg**是变量名（读取这个变量需要加一个 $ 符号 -> $arg）。

**$::argv**实际上是一个包含命令行参数列表的全局变量（包含**第一个**和“**第二个 arg** ”）。

**puts $arg**是将$arg 变量的内容打印到屏幕上的命令。

但可能有更简单的例子可以开始。如果您想扩展您的技能，请阅读一些 Tcl/Tk 教程或书籍。Brent Welch 的*Practical Programming with Tcl/Tk*是一个好的开始。

# email - 如何跟踪电子邮件交互？

> ID：15797748
> 
> 赞同：0
> 
> 时间：2013-04-03T20:44:07.310
> 
> 标签：email, tracking, html-email

我正在创建一个 HTML 电子邮件，我将发送给我的所有客户，这封电子邮件包含文本、图像和链接。

我想跟踪这封电子邮件并收集有关它的一些信息。到目前为止，我可以检索到打开率和点击次数最多的链接，但我还想知道有多少人向下滚动到电子邮件底部，据说这意味着整个内容都已阅读。

有什么办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:50:40.070

您只能检查打开带有图像的电子邮件的客户.. 您可以从脚本页面链接图像并检查客户如何打开电子邮件.. 这是收集有关阅读电子邮件的信息的唯一方法.. javascript 不能在电子邮件中使用然后你找不到谁向下滚动并阅读您的所有文字

# ant - 在 ant apply 中使用文件集和映射器

> ID：15797756
> 
> 赞同：0
> 
> 时间：2013-04-03T20:44:36.237
> 
> 标签：ant

这感觉应该是一个常见问题，但我还没有找到重复的答案。

我有一堆目标文件，如果它们中的任何一个发生了变化，它们都需要传递给链接器 exec。我有一个`apply`任务如下：

```
<target name="linker">
    <apply executable="link.exe" parallel="true">
        <arg value="-o" />
        <targetfile />
        <srcfile/>
        <fileset dir="obj" includes="*.o"/>
        <globmapper from="*.o" to="myapp.exe"  />
    </apply>
</target> 
```

问题是只有更改的目标文件被传递给链接器，我需要传递所有目标文件（基本上是应用映射器之前文件集的输出）。如果我`force`在任务上设置属性，链接器工作正常`apply`，但我只希望它在目标文件已更新时重建。

我知道我可以使用[Uptodate task](http://ant.apache.org/manual/Tasks/uptodate.html)，但我希望我可以通过指定一个附加的或类似的东西来只用[apply 任务来做到这一点。](http://ant.apache.org/manual/Tasks/apply.html)`fileset`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:59:04.283

你的问题不是`<fileset>`任务，而是`<mapper>`。与大多数构建系统一样，Ant 试图通过不处理未更改的文件来节省时间。*映射器*将源（带有`*.o`后缀的文件）映射到目标（`myapp.exe`文件）。它正在做你想做的事。

您可能想要做的是使用`<arg/>`子实体来指定输出文件名：

```
<apply executable="link.exe">
    <arg value="/out"/>
    <arg value="myapp.exe"/>
    <fileset dir="obj">
       <include name="**/*.o"/>
    </fileset>
</apply> 
```

您可以使用`<uptodate>`来查看您的任何`*.o`文件是否比您的`myapp.exe`文件新，但如果您使用映射器，您将`*.o`文件限制为仅比`myapp.exe`.

```
<uptodate property="needs.linking"
     targetfile="myapp.exe">
    <srcfiles dir="obj">
        <include name="**/*.o"/>
    </srcfiles>
</uptodate>

<target name="linker"
    if="needs.linking">
    <apply executable="link.exe">
      ...
</target> 
```

# objective-c - Cocoa Objective-C 初始化异常

> ID：15797760
> 
> 赞同：4
> 
> 时间：2013-04-03T20:45:04.407
> 
> 标签：objective-c, cocoa, constructor, initializer

我正在查看一些代码并遇到了一些看起来像这样的东西（假设它是为`TestObject`类定义的）

```
-(id) init
{
    if (self == [super init])
    {
        self.testString = @"Hello";
    }
    return self;
} 
```

我及时改变

```
if (self == [super init]) 
```

到

```
if (self = [super init]) 
```

但后来意识到（虽然我知道这是不对的）代码按原样工作，我将原始代码隔离在一个超简单的程序中

```
 TestObject* testObject = [[TestObject alloc] init];
    NSLog(@"%@", testObject.testString); 
```

令我惊讶的是，这行得通。为什么相等检查而不是赋值不会破坏事情？为什么是

```
self == [super init] 
```

在初始化开始时是真的，在我分配它之前？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T20:49:08.580

`self`已经为您分配了。分配它的目的`[super init]`是允许超类的`-init`实现返回一个不同的对象。我强烈推荐[The How and Why of Cocoa Initializers](http://www.mikeash.com/pyblog/the-how-and-why-of-cocoa-initializers.html) (Mike Ash) 和[self = [stupid init];](http://blog.wilshipley.com/2005/07/self-stupid-init.html) (Wil Shipley) 详细讨论为什么这是（或不是）一个好主意。`==`对于是否需要检查相等 ( ) ，您会发现不同的意见。

顺便说一句，如果您尝试以`self`任何其他方法分配给，您会看到以下错误消息：

![](https://i.stack.imgur.com/gCUTL.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:50:30.320

`self`指针由建立`alloc`。成语

```
if(self = [super init])
{
...
} 
```

是为了防止超类的 init 需要更改值的情况。例如，一些`init`s 可能会通过返回来表示失败`nil`。

# php - 用 PHP 读取 mp4 文件

> ID：15797762
> 
> 赞同：7
> 
> 时间：2013-04-03T20:45:09.467
> 
> 标签：php, mp4, readfile

我正在尝试用 PHP 读取 mp4 文件，而我现在正在做的是：

```
<?php
header("Content-Length: filesize");
readfile('file.mp4');
?> 
```

但这样我就不能跳过甚至返回，直到视频没有 100% 加载。当然，当我直接从文件（video.mp4）中读取时，一切都很顺利。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T21:07:24.710

您需要在 PHP 中自己实现跳过功能。这是一个可以做到这一点的代码片段。

```
<?php

$path = 'file.mp4';

$size=filesize($path);

$fm=@fopen($path,'rb');
if(!$fm) {
  // You can also redirect here
  header ("HTTP/1.0 404 Not Found");
  die();
}

$begin=0;
$end=$size;

if(isset($_SERVER['HTTP_RANGE'])) {
  if(preg_match('/bytes=\h*(\d+)-(\d*)[\D.*]?/i', $_SERVER['HTTP_RANGE'], $matches)) {
    $begin=intval($matches[0]);
    if(!empty($matches[1])) {
      $end=intval($matches[1]);
    }
  }
}

if($begin>0||$end<$size)
  header('HTTP/1.0 206 Partial Content');
else
  header('HTTP/1.0 200 OK');

header("Content-Type: video/mp4");
header('Accept-Ranges: bytes');
header('Content-Length:'.($end-$begin));
header("Content-Disposition: inline;");
header("Content-Range: bytes $begin-$end/$size");
header("Content-Transfer-Encoding: binary\n");
header('Connection: close');

$cur=$begin;
fseek($fm,$begin,0);

while(!feof($fm)&&$cur<$end&&(connection_status()==0))
{ print fread($fm,min(1024*16,$end-$cur));
  $cur+=1024*16;
  usleep(1000);
}
die(); 
```

**更多性能**

请注意，这不是最有效的方法，因为整个文件需要通过 PHP，所以您只需要尝试它是如何适合您的。

假设您想要这样做的原因是限制访问，并且您以后需要更高的效率，您可以为 Web 服务器使用一个标志。

带有 X-Sendfile 模块或 lightty 的 Apache（[这里是 nginx 信息](http://wiki.nginx.org/XSendfile)）

```
$path = 'file.mp4';
header("X-Sendfile: $path");
die(); 
```

这有点高级，你应该只在需要时使用它，但是当你开始使用相当简单但性能平庸的东西时，知道你有一个升级选项是很放松的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-12-04T05:11:41.153

通过试验公认的解决方案，我发现了一种更便宜的纯 PHP 方式。尽管我还没有针对 X-Sendfile 对此进行测试，但我怀疑您的站点的整体性能会更好，因为这意味着 Apache 文件更短。

您只需要以下代码即可从 PHP 中输​​出可搜索的 .mp4 视频（尚未使用 .webm 或其他类型进行测试）：

```
$file='path/file.mp4';

header('Content-Type: video/mp4'); #Optional if you'll only load it from other pages
header('Accept-Ranges: bytes');
header('Content-Length:'.filesize($file));

readfile($file); 
```

更清洁、更快；由于某种原因，接受的答案的代码导致视频需要很长时间才能加载，使用此代码加载视频是即时的（两个测试都在具有 7.25 MB 视频文件的本地服务器上）。

使用 Chrome、Firefox 和 Edge 的默认视频播放器进行测试。

编辑：没有经过测试`header('Content-Type: video/mp4');`，如果文件是从另一个页面加载的，它仍然有效！如果直接访问网址，将没有视频播放器；代码将被打印出来。

# ruby-on-rails - Heroku Rails 应用程序级别未记录

> ID：15797763
> 
> 赞同：2
> 
> 时间：2013-04-03T20:45:14.967
> 
> 标签：ruby-on-rails, logging, heroku

我在 Heroku 上有一个不在应用程序级别记录的 rails 应用程序。

当前版本：

*   红宝石 1.9.3
*   导轨 3.1.3

在 config/environment/production.rb 中有以下几行：

```
 config.logger = Logger.new(STDOUT)
    config.log_level = :info 
```

我错过了什么？我还应该寻找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:29:12.743

“heroku 日志 --source 应用程序”怎么样？完整的细节在这里：[https ://devcenter.heroku.com/articles/logging#types-of-logs](https://devcenter.heroku.com/articles/logging#types-of-logs)

# c# - 识别导致“找不到类型”错误的程序集

> ID：15797768
> 
> 赞同：0
> 
> 时间：2013-04-03T20:45:43.763
> 
> 标签：c#

我收到一个错误。

无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。

我可以看到无法加载的类型，但是如何找出哪个程序集有问题？

# jquery - jquery从表单设置div内容

> ID：15797769
> 
> 赞同：0
> 
> 时间：2013-04-03T20:45:46.240
> 
> 标签：jquery

我有一个带有字段的表单，用于填写电子邮件以及其他输入，这些输入输出到显示用户输入的页面上的图像。当他们填写电子邮件字段时，我们希望电子邮件的 div 显示他们输入的内容，上面的 div 显示“电子邮件：”如果他们改变主意并清除电子邮件字段，则电子邮件 div 正确清除但上面的 div 仍然说“电子邮件：”我不知道为什么第二个字段为空时不会清除？

谢谢。

这是我的代码：

```
<script type='text/javascript'>//<![CDATA[ 
$(function(){
$(document).ready(function () {
$("#email").change(function () {
    var src = $(this).val();
    $("#emailaddy").html($(this).val());
    if ($("#email").val() != ''){
         $("#email1").html("Email:"); }
});
});
});//]]>  

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:51:29.110

试试这个

```
<script type='text/javascript'>//<![CDATA[ 
$(function()
  {
$(document).ready(function () {
$("#email").change(function () {
    var src = $(this).val();
    $("#emailaddy").html($(this).val());
        if ($("#email").val() != ''){
             $("#email1").html("Email:"); 
        }
        else
        {
            $("#email1").html(""); 
        }
        });
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:01:19.530

尝试为您的“email1”div 重置 html 内容。放：

```
 if ($("#email").val() != '') {
      $("#email1").html("Email:"); 
    } else {
      $("#email1").html("");
    } 
```

# jquery - Jquery在开发模式下工作但不是生产

> ID：15797772
> 
> 赞同：0
> 
> 时间：2013-04-03T20:45:54.473
> 
> 标签：jquery, ruby-on-rails

我有一个基于 jquery 和 rails3-jquery-autocomplete gem 的预先输入下拉列表。我不得不向 app/assets/javascript 和 app/assets/stylesheets 添加一些文件。我已经查明了在 dev 与 prod 模式下运行应用程序的问题。有没有人有这方面的经验，可以告诉我在 config/envrionments/production.rb 中更改哪些设置。我很难理解资产管道。

这是我的生产配置文件：

```
Dcms::Application.configure do

  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  # config.serve_static_assets = false
  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

   # Don't fallback to assets pipeline if a precompiled asset is missed
   config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:06:25.787

如果JS资源被拼接，请检查每个文件末尾是否有“;” . 此外，您还可以添加一个“;” 在每个 JS 文件开始避免前一个文件期望后面的内容是未返回函数的参数或其他。

解释

文件 a.js

```
(function() {} )() 
```

文件 b.js

```
(function() {} )() 
```

现在 concat 和返回第一个函数的内容看到括号并承认它应该是一个函数。

# linux - shell 脚本中的性能问题

> ID：15797776
> 
> 赞同：0
> 
> 时间：2013-04-03T20:46:01.647
> 
> 标签：linux, shell, compiler-construction

我了解到，代码解释比执行编译代码要慢得多。但是 shell 脚本总是被解释的。许多*nix 软件使用shell 脚本。那么这不会导致性能下降吗？

有什么新的进展可以解决这个问题吗？就像许多新语言所遵循的字节码格式一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:51:29.767

与解释脚本代码相比，典型的 shell 脚本花费更多的时间来运行其他程序。如果需要性能，这些程序是用编译语言编写的。例如，`grep`是用 C 编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:06:28.173

shell 脚本通常会唤起用各种语言编写的各种二进制程序。在循环和树中调用这些外部程序的脚本会经历大量的 fork() ing，这会创建很多上下文切换，从而大大减慢一切。

您可以弥补这一点的一种方法是让您的 shell 脚本通过 ssh 来利用多个 cpu 和多台机器

# ruby-on-rails-3 - Modernizr 擦除以前添加的 html 类

> ID：15797778
> 
> 赞同：0
> 
> 时间：2013-04-03T20:46:02.343
> 
> 标签：ruby-on-rails-3, modernizr

我在 Rails 项目中使用 Modernizr。我还在 html 标签上为 IE8 设置了一些类

/[如果 IE 8] %html{class:'ie8 oldie'}

当我将 Modernizr 添加到混合中时，它会删除类 ie8 oldie 并用 js 替换它。我怎么能阻止它这样做。真正应该做的是附加它而不是删除我之前添加的那些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:28:27.167

也许检查你正在做的事情的顺序？

我在 Joomla 中做同样的事情，如下：

**HTML**

```
<?php  
....
$doc->addScript($tpath.'/js/modernizr.js');    
...
?>  

<!doctype html>
...
<!--[if IE 8]><html class="no-js ie8 oldie" <![endif]-->
... 
```

如果我在 IE8 中访问该页面，则页面源为：

```
<html class="ie8 oldie js ..."> 
```

祝你好运！

# scala - 如何在 Scalatra 中定义子资源路由

> ID：15797779
> 
> 赞同：2
> 
> 时间：2013-04-03T20:46:05.393
> 
> 标签：scala, rest, scalatra

我有 REST 资源，例如`author`和`article`. 可以有多个`Author`s 并且每个`author`可以拥有多个`articles`. 我知道可以在一个 servlet 中对他们的 Scalatra 处理程序进行建模，例如

*   `/author/:id/article`
*   `/author/:id/article/:id`

等等，但这样做我的 servlet 文件会变大。看起来下面的所有内容都`author`需要在一个 servlet 中处理。

我想把这些东西分成几个独立的servlet，当它们一起注册时，它们会构成整个资源地址。所以我想`author`在一个 servlet 中有相关的东西，而在另一个 servlet中有相关的东西`article`。

有没有办法在 Scalatra 中做到这一点？我发现了关于 Sinatra 的类似问题，但没有很好的答案[Sinatra 中的子路由](https://stackoverflow.com/questions/15077000/sub-routing-in-sinatra)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:19:20.900

您应该可以随意设置您的 servlet 和路由。

例如，您可以设置两个 servlet，如下所示：

```
class AuthorsServlet extends WebStack {
  get("/authors") { }

  get("/authors/:id") { }
}

class ArticlesServlet extends WebStack {
  get("/authors/:authorId/articles") { }

  get("/authors/:authorId/articles/:id) { }

} 
```

然后在 ScalatraBootstrap 中注册您的 servlet：

```
override def init(context: ServletContext) {
  context.mount(new AuthorsServlet, "/*")
  context.mount(new ArticlesServlet, "/*")
} 
```

# c# - IEquatable 之间的差异 , IEqualityComparer ，并在自定义对象集合上使用 LINQ 时覆盖 .Equals()？

> ID：15797780
> 
> 赞同：25
> 
> 时间：2013-04-03T20:46:12.287
> 
> 标签：c#, linq

在比较自定义对象的两个集合时，我在使用 Linq 的 .Except() 方法时遇到了一些困难。

我已经从 、 和运算符 和 派生了我的类并实现了`Object`覆盖。我还创建了一个方法。`Equals()``GetHashCode()``==``!=``CompareTo()`

在我的两个集合中，作为调试实验，我从每个列表中取出第一项（这是重复的）并进行比较如下：

```
itemListA[0].Equals(itemListB[0]);     // true
itemListA[0] == itemListB[0];          // true
itemListA[0].CompareTo(itemListB[0]);  // 0 
```

在所有三种情况下，结果都是我想要的。但是，当我使用 Linq 的 except() 方法时，*不会*删除重复的项目：

```
List<myObject> newList = itemListA.Except(itemListB).ToList(); 
```

了解 Linq 如何进行比较时，我发现了各种（冲突的？）方法，这些方法说我需要继承自`IEquatable<T>`or`IEqualityComparer<T>`等​​。

我很困惑，因为例如，当我从 继承时`IEquatable<T>`，我需要提供一个新`Equals()`方法，其签名与我已经覆盖的签名不同。我是否需要两个具有不同签名的此类方法，或者我应该不再从 派生我的类`Object`？

我的对象定义（简化）如下所示：

```
public class MyObject : Object
{
    public string Name {get; set;}
    public DateTime LastUpdate {get; set;}

    public int CompareTo(MyObject other)
    {
        // ...
    }

    public override bool Equals(object obj)
    {
        // allows some tolerance on LastUpdate
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hash = 17;
            hash = hash * 23 + Name.GetHashCode();
            hash = hash * 23 + LastUpdate.GetHashCode();
            return hash;
        }
    }

    // Overrides for operators
} 
```

我注意到，当我从继承时，`IEquatable<T>`我可以使用`IEquatable<MyObject>`or `IEquatable<object>`; `Equals()`当我使用其中一种时，签名的要求会发生变化。推荐的方法是什么？

**我要完成的工作：**

我希望能够在不重复代码的情况下使用 Linq (Distinct/Except) 以及标准相等运算符 ( `==`and )。*如果两个对象的名称相同并且*属性在几秒（用户指定的）容差范围内，则`!=`比较应该允许将两个对象视为相等。*`LastUpdate`*

 ***编辑：**

显示`GetHashCode()`代码。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-03T21:13:27.427

无论您是否覆盖`object.Equals`and `object.GetHashCode`、实现`IEquatable`或提供`IEqualityComparer`. 它们*都可以*工作，只是方式略有不同。

1）覆盖`Equals`和`GetHashCode`来自`object`：

从某种意义上说，这是基本情况。它通常会起作用，假设您可以编辑类型以确保两种方法的实现符合要求。在很多情况下，这样做并没有错。

2) 实施`IEquatable`

这里的关键点是您可以（并且应该）实施`IEquatable<YourTypeHere>`. 这和 #1 之间的主要区别在于您对该`Equals`方法具有强类型，而不仅仅是使用`object`. 这对程序员来说更方便（增加了类型安全），也意味着任何值类型都不会被装箱，因此这可以提高自定义结构的性能。*如果你这样做，除了 #1 之外，*你几乎应该总是这样做，而不是代替。让`Equals`这里的方法在功能上有所不同`object.Equals`会......不好。不要那样做。

3) 实施`IEqualityComparer`

这与前两个完全不同。这里的想法是对象没有得到它自己的哈希码，或者看它是否等于其他东西。这种方法的重点是*对象不知道如何正确获取它的哈希值或查看它是否等于 else*。也许是因为您不控制该类型的代码（即第 3 方库）并且他们没有费心去覆盖该行为，或者他们确实覆盖了它但您只想要您自己对“平等”的独特定义这个特定的上下文。

在这种情况下，您创建一个完全独立的“比较器”对象，该对象接收两个不同的对象，并通知您它们是否相等，或者一个对象的哈希码是什么。使用此解决方案*时，无论`Equals`or`GetHashCode`方法在类型本身中做*什么，您都不会使用它。

* * *

请注意，所有这些都与操作员完全无关，`==`操作员是自己的野兽。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T20:53:46.273

我在对象中用于相等的基本模式如下。请注意，只有 2 个方法具有特定于对象的实际逻辑。其余的只是提供给这两种方法的样板代码

```
class MyObject : IEquatable<MyObject> { 
  public bool Equals(MyObject other) { 
    if (Object.ReferenceEquals(other, null)) {
      return false;
    }

    // Actual equality logic here
  }

  public override int GetHashCode() { 
    // Actual Hashcode logic here
  }

  public override bool Equals(Object obj) {
    return Equals(obj as MyObject);
  }

  public static bool operator==(MyObject left, MyObject right) { 
    if (Object.ReferenceEquals(left, null)) {
      return Object.ReferenceEquals(right, null);
    }
    return left.Equals(right);
  }

  public static bool operator!=(MyObject left, MyObject right) {
    return !(left == right);
  }
} 
```

如果您遵循此模式，则实际上无需提供自定义`IEqualityComparer<MyObject>`. 就足够了，`EqualityComparer<MyObject>.Default`因为它将依赖于`IEquatable<MyObject>`执行相等性检查

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T21:12:34.813

您不能“允许一些公差`LastUpdate`”，然后使用`GetHashCode()`使用严格值的实现`LastUpdate`！

假设`this`实例有`LastUpdate`at `23:13:13.933`，并且`obj`实例有`23:13:13.932`。那么这两个可能与您的宽容想法相当。但如果是这样，它们的哈希码***必须***是相同的数字。但这不会发生，除非你非常幸运，因为`DateTime.GetHashCode()`这两次不应该给出相同的哈希值。

此外，您的`Equals`方法在数学上大多数是传递关系。并且“大约等于”不能传递。它的传递闭包是标识*一切*的微不足道的关系。*

# json - 在 Chef 中，如何加载许多属性以在模板中使用？

> ID：15797781
> 
> 赞同：0
> 
> 时间：2013-04-03T20:46:15.970
> 
> 标签：json, templates, chef-infra

我有一个需要处理多个模板的配方。这些模板总共有 100 多个需要填充的变量。我有需要注入到当前存储在 JSON 文件中的模板的值。

我可以在 ruby​​_block 中使用 JSON gem 来解析文件，但是如何将新数据放入模板中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:56:03.910

您可以访问您在模板的该块中定义的任何变量。如果它是一个 JSON 文件，您可以将其转换为`json_i_just_read`块中的字典（例如命名它），然后在其中创建一个模板块。在模板中，您只需使用 ERB：

```
config_opt1 = <%= json_i_just_read['value1'] %> 
```

# asp.net - 数据库设计与代理键有关系

> ID：15797785
> 
> 赞同：1
> 
> 时间：2013-04-03T20:46:39.100
> 
> 标签：asp.net, sql, sql-server-2008, database-design, surrogate-key

首先，我希望能够更新所有属性/字段并且没有单个唯一键。我有一个层次结构，比如每台 PC 都可以归类为 PC1/PC2/PC3 无法举例，每台 PC 都有网络和软件信息。设计和示例是

`Parent Table PC(EmpName, PCName, HostName,.... PhysicalLocation, PCType)` `EMPName,PCName,PCType`结合使这张桌子独一无二。

示例记录`('XYZ', 'Work Laptop','XYZ-PC',.....,'DESK-123','PC1')`

子表`PCNetwork(EmpName, PCName, HostName,IPAddr,....,PhysicalLocation,PCType)`

`example record1 ('XYZ', 'Work Laptop','XYZ-PC','0.0.0.0',....,'DESK-123','PC1')`

`example record2 ('XYZ', 'Work Laptop','XYZ-PC','0.0.0.1',....,'DESK-123','PC1')`

由于我希望所有字段都是可修改的，因此我在两者中都添加了代理键 ID 列。我已将 PC-Id 用作网络表的 FK，但在插入时我必须编写一个查询以从 PC 表中获取 Id。

有两个问题，如果我使用自然/复合键，我不能对每条记录进行更新，因为更新是通过不允许主键更新的 Asp.Net Gridview 完成的。

如果我使用代理键，则可能会出现重复记录，并且我无法引用它们或将外键约束施加到其他字段，因为它们只有通过组合所有三个字段才能是唯一的。

我正在使用 SQL Server 2008 和 ASP.Net 4.0

我肯定错过了一些东西，任何人都可以为此提供帮助或建议一个好的设计。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:56:37.247

> 如果我使用代理键，则可能会出现重复记录，并且我无法引用它们或将外键约束施加到其他字段，因为它们只有通过组合所有三个字段才能是唯一的。

您可以拥有代理键​​，但仍然可以消除重复的可能性*并*创建引用约束。首先将您的候选键列标记为唯一：

```
alter table PC
add constraint UK_PC_EMPName_PCName_PCType
unique (EMPName, PCName, PCType); 
```

然后，您可以像这样添加外键：

```
alter table PCNetwork
add constraint FK_PC_PCNetwork
foreign key (EMPName, PCName, PCType)
references PC (EMPName, PCName, PCType); 
```

但是，我必须说，我并不完全理解您所描述的架构，因此我不确定是否有更好的数据建模方法。也就是说，这里有一些观察：

*   `PhysicalLocation`乍一看`PCType`似乎是冗余数据。你应该决定他们最适合哪张桌子。
*   您可以有一列`PCNetwork`参考您的代理键 in `PC`，因此您不需要`EmpName, PCName, HostName`在 PCNetwork 中（但仍然在 中创建唯一键`PC`）。

# java - Java中的多播套接字

> ID：15797788
> 
> 赞同：1
> 
> 时间：2013-04-03T20:47:01.613
> 
> 标签：java, networking, network-programming, client-server

嘿，我正在尝试用 Java 编写一个聊天服务器多播程序，但它没有按预期工作。

我有两个文件，ChatClient.java 和 ChatServer.java（下面的代码）。

ChatClient 向服务器发送一条消息，然后服务器将接收消息并将其打印出来，但它没有收到消息，有人能注意到为什么吗？

客户代码：

```
public class ChatClient {

 public static void main(String args[]) throws Exception {

 MulticastSocket chat = new MulticastSocket(8885);
 InetAddress group = InetAddress.getByName("224.2.2.5");
 chat.joinGroup(group);

 String msg = "";
 System.out.println("Type a message for the server:");
 BufferedReader br = new BufferedReader(new
 InputStreamReader(System.in));
 msg = br.readLine();
 DatagramPacket data = new DatagramPacket(msg.getBytes(), 0, msg.length(), group, 8885);
 chat.send(data);
 chat.close();
 }
} 
```

服务器代码：

```
public class ChatServer {

public static void main(String args[]) throws Exception {

 MulticastSocket server = new MulticastSocket(8885);
 InetAddress group = InetAddress.getByName("224.2.2.5");
 //getByName - returns IP address of the given host
 server.joinGroup(group);

 boolean infinite = true;
 /* Server continually receives data and prints them */

 while(infinite) {

  byte buf[] = new byte[1024];
  DatagramPacket data = new DatagramPacket(buf, buf.length);
  server.receive(data);
  String msg = new String(data.getData()).trim();
  System.out.println(msg);
 }
 server.close();
 }
} 
```

# scala - Scala 从列表中删除单个对象

> ID：15797790
> 
> 赞同：1
> 
> 时间：2013-04-03T20:47:08.773
> 
> 标签：scala

我正在将一些 java 代码翻译成 scala，我无法从我正在使用的列表中删除一个对象。我的代码如下

```
def removeCar (usedCarList: List[UsedCars]):List[UsedCars] ={
    //var vinNumber = "";
    var car = new UsedCars();
    println("Please enter the Vin Number");
    var vinNumber = readLine();
    var i = 0;
    var found = false;
    while (i < usedCarList.length){
        car = usedCarList(i);
        if (vinNumber == car.vinNumber) {
            usedCarList.drop(i);
            println("** Removed Car with Vin Number " + vinNumber + " **");
            println(car.vinNumber);
            found = true;
        } 
```

我知道 drop 不是我想要使用的，但我不知道如何在给定索引处删除元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:27:51.557

正如评论中所指出的，Scala 的`List`方法非常不同。您仍然可以使用该类型，因为它非常简单且有用，只是您不能使用`drop`. 无论如何，您使用**变量** `car`和`found`等**`while`**的迭代类型`if`仍然非常java'ish。

尝试使用 Scala 集合提供的映射、拆分和过滤功能。

```
def removeCar (usedCarsList: List[UsedCars]): List[UsedCars] ={
  println("Please enter the Vin Number")
  val vinNumber = readLine()
  val (same, different) = usedCarsList.partition(_ == vinNumber)
  if (same.nonEmpty) {
    println("** Removed Car with Vin Number " + vinNumber + " **")
    same.map(_.vinNumber).foreach(println)
  }
  different
} 
```

如果您不关心验证列表是否已更改，您也可以执行

```
val removed = usedCarsList.filterNot(_ == vinNumber) 
```

我上面使用的方法`partition`，[就在 Scala 集合介绍的开头。](http://docs.scala-lang.org/overviews/collections/introduction.html).

# java - Java - 生成源代码的库，例如由浏览器中的普通源代码中的 JavaScript 更改？

> ID：15797796
> 
> 赞同：0
> 
> 时间：2013-04-03T20:47:28.397
> 
> 标签：java, html, browser, firebug

查看源浏览器功能显示浏览器接收到的纯 HTML。当我在 Firefug 中查看相同的源代码时。例如，Firefox 向您显示 HTML 代码，而 Firebug 显示呈现的代码。有没有办法从 Java 的标准源代码中获取渲染代码？某个图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:47:47.477

如果您想获得呈现的 HTML，请尝试使用[HtmlUnit](http://htmlunit.sourceforge.net)。它会自动调用大多数 JavaScript 事件（onload、onclick、onsubmit...）并允许您充当“普通”浏览器：

```
WebClient webClient = new WebClient();
HtmlPage page = webClient.getPage("http://www.br.de/fernsehen/bayerisches-fernsehen/sendungen/abendschau/bayerwald-tierpark-livereportage-100.html");
DomNodeList<DomElement> objectList = page.getElementsByTagName("object"); 
```

编辑：

这与问题不一样吗：[https](https://stackoverflow.com/questions/15808354/java-convert-html-source-code-of-string-type-by-show-source-code-to-source) ://stackoverflow.com/questions/15808354/java-convert-html-source-code-of-string-type-by-show-source-code-to-source ？

# javascript - 如何在不使用 getElementById 的情况下将文本或 span 的值传递给函数 onClick？

> ID：15797804
> 
> 赞同：4
> 
> 时间：2013-04-03T20:48:11.217
> 
> 标签：javascript, jquery

如何在执行 onClick 函数时将 span 的值或文本内容传递给 jQuery 函数？

我尝试了一些类似以下的方法，但没有运气：

```
<span onClick="sceSelect()">Next</span> 
```

我正在尝试传递值“Next”，但无法传递。我不能使用 getElementByID，因为跨度内的内容是动态生成的，并且从一个数组中放入 html 中，该数组中将有多个不同的值作为单独的放入 html 中，但我需要每个都激活一个函数并传递它对它的价值 onClick。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T20:49:23.427

如果您必须使用内联事件处理：

```
<span onclick="sceSelect((this.textContent || this.innerText))">Next</span> 
```

顺便说一句，您不需要驼峰式 ( `onClick`)`onclick`属性。

当然，这假设您的函数需要传递一个参数，例如：

```
function sceSelect(elementText){
} 
```

当然，您也可以在函数调用中传递节点本身（坦率地说，这更有意义）（正如[bfaveretto](https://stackoverflow.com/a/15797840/82548)所说，在其他地方）。

然而，我不相信有任何理由在 jQuery 中使用内联事件处理，使用：

```
$('span').click(function(){
    sceSelect(this);
    // or:
    sceSelect($(this));
    // or:
    sceSelect($(this).text());
}); 
```

对我来说更有意义（尽管您的用例可能与我想象的可能（或应该）完全不同）。

顺便说一句，避免内联事件处理的一种方法`getElementById()`是使用：

```
function sceSelect() {
    console.log(this.textContent || this.innerText);
}

var spans = document.getElementsByTagName('span');
for (var i = 0, len = spans.length; i < len; i++) {
    spans[i].onclick = sceSelect;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/EHhbH/1/)。

在函数的范围内，`sceSelect()`对象`this`/节点是`span`您（或用户）单击的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:49:59.203

最简单的方法是传递对元素本身的引用：

```
<span onClick="sceSelect(this)">Next</span> 
```

然后从函数中访问您需要的任何属性。

不过，应尽可能避免使用内联事件处理程序。如果您使用 JavaScript 创建添加事件侦听器，则触发事件的元素将`this`在侦听器内部可用：

```
var span = document.getElementById('someSpan');
span.addEventListener('click', function(e) {
    // here, 'this' will be your span
    alert(this.textContent || this.innerText)
}); 
```

# html - dojo Dialog中的绝对DIV

> ID：15797808
> 
> 赞同：1
> 
> 时间：2013-04-03T20:48:27.923
> 
> 标签：html, css, dialog, dojo

我创建了一个对话框，并在其中放置了一个多选组合框控件。当用户单击下拉按钮时，会弹出一个选项列表。问题是，列表比对话框大，所以列表的一半隐藏在对话框后面。此列表使用具有绝对定位的 DIV，当它到达对话框的边界时，列表的其余部分将隐藏。我希望它被完整地展示出来。

见下图：

![在此处输入图像描述](https://i.stack.imgur.com/ad92r.jpg)

我已经尝试过 z-Index 和 opacity 属性来获取对话框上方的列表 div，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:27:15.967

这可能是因为 Dojo 对话框具有以下 CSS 属性：`overflow: hidden`这意味着任何超出该 DIV 框的内容都将变得不可见（如图像中的示例）。

导致这种情况的 CSS 代码是：

```
.dijitDialog {
    position: absolute;
    z-index: 999;
    overflow: hidden;   
} 
```

您可能可以覆盖它（通过设置新`overflow`类型），但它可能会破坏对话框本身，因此您应该小心。要了解可能的值，请查看[此链接](http://quirksmode.org/css/css2/overflow.html)以获取有关 CSS 的更多信息。

# c - 具有结构类型数组的结构黑客

> ID：15797815
> 
> 赞同：-3
> 
> 时间：2013-04-03T20:48:48.643
> 
> 标签：c, struct, malloc

**编辑 - 先前发布的代码已被讨论，因为它无法编译**

假设我有以下 struct hack 变体：

```
typedef struct hack *Hack;
struct hack {
    char* value;
    Hack arr[1];
}; 
```

我到底应该分配什么？我应该做类似的事情：

```
malloc(sizeof(struct hack) + sizeof(struct hack)*(numElems-1)); 
```

可以缩短为：

```
malloc(sizeof(struct hack) * numElems); 
```

那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:01:36.013

我认为您的第一个代码不正确。它是“不完整的元素类型”

```
typedef struct hack Hack;
struct hack {
    char* value;
    Hack arr[1];
}; 
```

等于：

```
struct hack {
    char* value;
    struct hack arr[1];  /* Here wrong */
}; 
```

在错误的地方，您尝试定义 的数组`struct hack`，**但是：**的定义`struct hack`尚未完成。呵呵，修改一下。

对于您的新代码，它应该是：

```
typedef struct hack *Hack;
struct hack {
    char* value;
    Hack arr;
};
Hack node = malloc(sizeof(struct hack));
node->arr = malloc(sizeof(struct hack) * numElems); 
```

在这种情况下，“节点”是指向单个结构 hack 的指针。该实体的成员“arr”是结构hack数组的另一个点。否则，您可以将数据构建为典型的链表。

更新：**注意，**节点中的所有值并`(node->arr)[i]`没有初始化！你应该`memset()`在它们全部归零之后立即`malloc()`。或者确保在任何使用之前分配一个有效值。如果您在分配有效值之前使用它，最好是遇到分段错误。在更糟糕的情况下，您需要花费数天时间才能找出问题所在。

# c++ - 我可以使用placement new 来重置shared_ptr 中的对象吗？

> ID：15797825
> 
> 赞同：8
> 
> 时间：2013-04-03T20:49:20.967
> 
> 标签：c++, performance, memory

假设我有一堂课。

```
class BigData {...};
typedef boost::shared_ptr<BigData> BigDataPtr; 
```

然后我做：

```
BigDataPtr bigDataPtr(new BigData()); 
```

稍后在我完成我的对象之后，我确信该对象没有其他用户。

执行以下操作是否安全：

```
bigDataPtr->~BigDataPtr();
new (&*bigDataPtr) BigData; 
```

这会让我在没有任何额外分配的情况下重置对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T21:05:25.923

有几种方法可以解决这个问题。您可以使用placement new，这可以保证是安全的，原因有两个：

1.  您已经为对象分配了内存，因此您知道它的大小和对齐方式正确。

2.  `shared_ptr`是非侵入性的；它的唯一职责是计算引用并在必要时调用删除器。

但是，请考虑如果对象的重建失败会发生什么——即抛出异常：

```
bigDataPtr->~BigDataPtr();
new (bigDataPtr.get()) BigData; 
```

然后你有一个问题：可以在非构造对象上调用删除器，几乎肯定会导致未定义的行为。我说“几乎”是因为删除器可能是无操作的，在这种情况下一切都会好起来的。

我认为更安全的方法是将新值移动到现有对象中：

```
*bigDataPtr = BigData(42); 
```

或将`reset()`成员函数添加到`BigData`：

```
bigDataPtr->reset(42); 
```

然后，您的真正意图就很明确了，您无需担心对象的生命周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:59:19.860

`BigData`如果构造函数和析构函数不抛出异常并且`bigDataPtr`不在线程之间共享并且不存在指向动态分配的成员`BigData`（如果有）的指针或引用，则它是安全的。

如果析构函数抛出异常，您最终可能会得到一个部分被破坏的对象（通常不建议抛出析构函数，标准容器要求元素的析构函数不抛出）。

如果构造函数抛出，您最终可能会破坏对象但不会构造新对象。

If`bigDataPtr`在线程之间共享，这也可能导致竞争条件，除非使用锁定规则。

如果其他地方的代码采用对 的动态分配成员的引用或指针`BigData`，则当它创建一个新`BigData`的动态分配的成员时，可能会在其他地址分配，因此现有的指针和对成员的引用变得无效。

如果您担心`new (&*bigDataPtr) BigData;`语句中的可疑取消引用，请改用普通指针：

```
BigData* p = bigDataPtr.get();
p->~BigData();
new (p) BigData; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T20:59:31.160

是的，它通常是安全的。 *（对 Maxim Yegorushkin 对投掷边缘案例的观察表示赞同）*

***注意下面的错字信息***

Boost 将解引用和`->`运算符定义为

```
template<class T>
typename boost::detail::sp_dereference< T >::type boost::shared_ptr< T >::operator* () const;

template<class T>
typename boost::detail::sp_member_access< T >::type boost::shared_ptr< T >::operator-> () const; 
```

当这些`detail`位被解决时，你有这个

```
template<class T>
T & boost::shared_ptr< T >::operator* () const

template<class T>
T * boost::shared_ptr< T >::operator-> () const 
```

因此，您正在直接处理指向的对象。没有代理或其他结构可能会干扰您的尝试。

就指向的数据而言，您的代码：

```
bigDataPtr->~BigDataPtr();
new (&*bigDataPtr) BigData; 
```

可能有错别字。但是，如果您打算：

```
bigDataPtr->~BigData();
new (&*bigDataPtr) BigData; 
```

它将解决

```
(BigData pointer)->~BigData();
new (&(BigData reference)) BigData; 
```

这是合法的，你是正确的，它可以避免通常在分配中产生的额外分配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T22:23:08.763

首先，如果构造函数抛出并且该类不是可轻易破坏的，那么您就会遇到问题，因为`shared_ptr`“想要”删除它，这会引发 UB。

因此，您必须通过使用 nothrow 构造函数或捕获任何异常并防止智能指针删除对象来处理这个问题。由于`shared_ptr`没有`release()`功能，说起来容易做起来难。如果一切都失败了，你可以打电话`terminate()`，但这不会让你受到用户的欢迎。

如果没有对该对象的其他引用，那么只要该类没有`const`或引用非静态数据成员（包括成员成员），它将起作用。原因是3.8/7：

> 如果在对象的生命周期结束之后，在对象占用的存储空间被重用或释放之前，在原始对象占用的存储位置创建一个新对象，指向原始对象的指针......可以用于操作新对象，如果......原始对象的类型不是 const 限定的，并且，如果是类类型，不包含任何类型为 const 限定或引用类型的非静态数据成员...

请注意，`shared_ptr`只有这样一个指针，它将用于操作新对象，如果 3.8/7 中的任何条件被破坏，则该对象为 UB。唯一可能被破坏的是这个，你已经用你所说的关于你的代码的内容覆盖了其余部分。特别是，您需要将原始对象创建为 的实例`BigData`，*而不是*从 派生的类`BigData`，因为新对象需要与旧对象具有相同的最衍生类型。

通常有比这更强大的方法来重置对象。例如，实现`operator=`（复制或移动赋值运算符），然后编写`*bigDataPtr = BigData()`. 当然，这可能不会那么快。

# jquery - Codeigniter Ajax POST 问题

> ID：15797826
> 
> 赞同：0
> 
> 时间：2013-04-03T20:49:22.607
> 
> 标签：jquery, ajax, codeigniter

我遇到了一个不寻常的问题，非常感谢您的帮助。我正在使用 CodeIgniter 并尝试从视图中进行 Ajax 调用。问题是当我选择类型：“POST”时，我总是`http://localhost/scratchcard/index.php/ajax/ajax/create?callback=jQuery1910195569250266999_1365021602115`在控制台中收到一条错误消息，POST 500（内部服务器错误）。

我的观点是这样的：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="http://localhost/scratchcard//images/favicon.ico" />
    <link rel="stylesheet" href="http://localhost/scratchcard//css/demo.css" type="text/css" media="screen" title="no title" charset="utf-8"/>
    <script src="http://localhost/scratchcard/js/jquery-1.9.1.js" type="text/javascript" charset="utf-8"></script>
    <script src="http://localhost/scratchcard/js/yui.formalize.js" type="text/javascript" charset="utf-8"></script>
    <script src="http://localhost/scratchcard/js/scratchcard.js" type="text/javascript" charset="utf-8"></script>
    <input type="hidden" name="url" id="url" value="http://localhost/scratchcard/" />
    <meta charset="utf-8"><div id="main_container">
    <div id="create_scratch_card" align="center">
        <label id="form_count">Create New Scratch Cards</label>
        <select id="count_select">
            <option value=""> Select the number of cards to be generated </option>
            <option value="10">10</option>
            <option value="50">50</option>
            <option value="100">100</option>
        </select>
        <br /><p>    </p>
        <label id="form_amount">Amount of each Card</label>
        <select id="amount_select">
            <option value="" > Select the amount of the cards to be genarated</option>
            <option value="10">10</option>
            <option value="50">50</option>
            <option value="100">100</option>
        </select>
        <br /><p>    </p>
        <input type="button" id="create_button" value="Create">
    </div>
    <div id="ajax_result" align="center">
        <img src="http://localhost/scratchcard/images/ajax-loader.gif" style="max-width:100%;" alt="Processing">
    </div>
</div>

</body>
</html> 
```

我的 ScratchCard.js 是这样的：

```
$(document).ready(function(){
    var url_link=$("#url").val();

    $("#create_button").click(function(){
        /*$.ajax({
            url:"<?=base_url()?>index.php/ajax/ajax/create",
            type:"POST",
            data:{
                count: $("#count_select").val();
                amount:$("#form_amoutn").val();

            }
        });*/
        if($("#count_select option:selected").val().length==0){
            alert("You Must Select a Count Value first");
            $("#count_select").focus();
        }
        else if($("#amount_select   option:selected").val().length==0)
        {
                        alert("You Must Select a Amount Value first");
                        $("#amount_select").focus();
        }
            else{

                    $.ajax({

                type:"POST",
                dataType: 'jsonp',
                data:{
                            count: $("#count_select option:selected").val(),
                            amount:$("#amount_select option:selected").val()
                        },
                        url:url_link+"index.php/ajax/ajax/create",
                beforeSend:function(){
                    $("ajax_result").show();
                },

                complete:function(response){
                    alert(response.reply);

                },

            });             
            } 

    });
}); 
```

最后是 Ajax.php：

```
 <?php 
    /**
     * 
     */
    class ajax extends CI_Controller {

public function create(){

        $this->output->set_status_header('200');
    $this->output->set_header("Content-Type: application/javascript");
        $this->output
    ->set_content_type('application/json')
    ->set_output(json_encode(array('reply' => 'created')));

    }
}
 ?> 
```

你能指出我犯的任何错误或如何解决它的任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:53:37.417

数据类型应仅为 json

```
dataType: 'json' 
```

jsonp 用于跨域，您的 url 看起来像它在同一个域中，对于您可以执行的数据

```
data:{count: $("#count_select").val(),amount:$("#amount_select").val()} 
```

# java - 使用 java 查看备用 Windows 注册表

> ID：15797832
> 
> 赞同：1
> 
> 时间：2013-04-03T20:49:35.667
> 
> 标签：java, windows, registry

我有 JUnit（32 位应用程序），我想在我的 64 位 Windows 操作系统上公开 64 位 Windows 注册表。

我读到使用 Windows 标志 'KEY_WOW64_64KEY' 我可以打开 64 位视图。

我应该在注册表的哪个位置设置这个标志？

但是我如何在 Java 中轻松做到这一点？有没有一种方法可以避免 JNI 和对 advapi32.dll 的任何引用？

# debugging - 调试生产环境的好流程？将数据复制到开发？

> ID：15797834
> 
> 赞同：5
> 
> 时间：2013-04-03T20:49:37.453
> 
> 标签：debugging, production-environment

我一直在思考这个问题。这个想法是在 PROD 中出现了问题。捕获的数据会导致 Web 应用程序的行为与其他环境不同。因此，其他环境中的数据也与 prod 不同步（如预期的那样）。但是，出现了一个错误，由于某种原因，它只发生在 PROD 中，可能是因为数据的差异。

我想知道解决这些问题的好习惯是什么？更多的测试，当然。但除此之外呢？可以在 dev 中创建新数据，但重点是某些数据点或某些操作组合会导致数据点出错。也许当使用其他数据源到达“实际”数据点时，这与“预期”数据点不同。道歉这不是一个很好的描述，并试图作为一个例子和一般生产错误的定义。

我知道这不是一个非常精确的问题。希望有参考资料可以提出很好的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:28:17.070

这是一个非常有趣的问题。我以前使用过的一种方法是故意在生产中进行最终测试（TIP）。

在你用多根尖针刺穿我的肖像之前，请先听我说一下持续部署:-)

这个想法是将新构建部署到生产中，然后使用自定义路由来引导新旧生产构建之间的流量。原则上这很简单：您首先将旧版本路由给您当前的客户，而将新版本仅路由给您的工程团队。您的客户看不到任何变化。但是您的团队可以开始测试您的新构建，包括灾难恢复和压力测试等混乱的东西。希望您能发现您在问题中谈到的错误类型。

如果有问题，那么您只需回滚新版本。如果您的测试没有发现任何问题，您可以推广到 5% 的客户群。然后是 10% 和 20% 等等。

虽然原则上很简单，但您需要从一开始就计划一些问题。首先是数据和数据模式，它们需要在新旧版本中正常运行。只要您的 Web 应用程序使用的服务设计为在部署新构建后处理至少一次回滚，并且您的新构建同时了解旧数据和新数据，那么您应该没问题。

第二个问题是 API/接口更改。您不需要编辑或删除方法或参数，而是需要创建一个新的 API/接口，该 API/接口主要重定向到旧的 API/接口，新的/更改的代码除外。

其他问题包括构建之间的配置和设置更改不兼容。这些问题不是致命的，但您确实需要事先进行一些计划和测试。最大的收获是您可以安全地在生产环境中对您的代码进行最终测试，而不会影响您的客户。

有关生产测试的一些链接：

*   [没有地方比得上生产](http://blogs.msdn.com/b/eric_brechner/archive/2010/12/01/there-s-no-place-like-production.aspx)
*   [软件测试的未来](http://www.thetestingplanet.com/2011/11/the-future-of-software-testing-part-one-testing-in-production/)
*   [生产喜忧参半](http://blogs.msdn.com/b/eric_brechner/archive/2011/09/01/production-is-a-mixed-blessing.aspx)
*   [提示 - 渎职？](http://blogs.msdn.com/b/seliot/archive/2011/06/23/testing-in-production-tip-a-common-and-costly-technical-malpractice.aspx)
*   [TIP 真的发生了](http://blogs.msdn.com/b/seliot/archive/2011/06/07/testing-in-production-tip-it-really-happens-and-that-s-a-good-thing.aspx)
*   [为什么 TIP 并不像听起来那么愚蠢](http://www.appdynamics.com/blog/2011/12/06/why-testing-in-production-isnt-as-stupid-as-it-sounds/)

# python - 错误 - 多元回归 OLS 类

> ID：15797844
> 
> 赞同：1
> 
> 时间：2013-04-03T20:50:12.897
> 
> 标签：python, numpy, regression

我在用 ols 类调整方程 *y = b [0] + b [1] x ¹ + b [2] x ^(2时遇到问题)*

编码：

```
xs = numpy.loadtxt('teste.csv', skiprows=1, dtype=float, delimiter=';', 
     usecols=(0,1))

y = log(xs[:,0])
x = 1/xs[:,1]
x2 = (1/xs[:,1])**2

mymodel = ols.ols(y,x,'y',['x1', 'x2'])
mymodel.summary()` 
```

我收到了这个错误：

```
print '''% -5s          % -5.6f     % -5.6f     % -5.6f     % -5.6f''' % tuple([self.x_varnm[i],self.b[i],self.se[i],self.t[i],self.p[i]])
IndexError: index out of bounds 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:01:29.007

尝试将您定义`x`为：

```
x = 1/xs[:,1:2] # slice to keep (n, 1) shape
x2 = (1/xs[:,1:2])**2
x = np.hstack((x, x2)) 
```

您告诉`ols`我们期望 有一个两列矩阵`x`，但传入的是一个单列矩阵，因此会出现错误。

# symfony - 如何覆盖捆绑包的 DependencyInjection 部分？

> ID：15797846
> 
> 赞同：0
> 
> 时间：2013-04-03T20:50:15.220
> 
> 标签：symfony

我正在尝试覆盖 FOSElasticaExtension [https://github.com/FriendsOfSymfony/FOSElasticaBundle](https://github.com/FriendsOfSymfony/FOSElasticaBundle)的部分内容，以通过包继承处理配置和参数略有不同（这里有些描述[http://symfony.com/doc/master/cookbook/bundles/覆盖.html](http://symfony.com/doc/master/cookbook/bundles/override.html) )。不幸的是，缺少这方面的文档，并且在尝试覆盖时出现奇怪的错误（例如根本没有注入配置）。

`vendor/acme/Acme/ElasticaBundle/AcmeElasticaBundle.php`

```
<?php
namespace Acme\ElasticaBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

/**
 * Extends FOS Elastica bundle.
 */
class AcmeElasticaBundle extends Bundle
{
    public function getParent()
    {
        return 'FOSElasticaBundle';
    }
} 
```

`vendor/acme/Acme/ElasticaBundle/DependencyInjection/Configuration.php`

```
<?php
namespace Acme\ElasticaBundle\DependencyInjection;

use Symfony\Component\Config\Definition\Builder\ArrayNodeDefinition;
use Symfony\Component\Config\Definition\Builder\TreeBuilder;
use Symfony\Component\Config\Definition\ConfigurationInterface;

use FOS\ElasticaBundle\DependencyInjection\Configuration as BaseConfiguration;

class Configuration extends BaseConfiguration
{
} 
```

`vendor/acme/Acme/ElasticaBundle/DependencyInjection/AcmeElasticaExtension.php`

```
<?php
namespace Acme\ElasticaBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\Loader\XmlFileLoader;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Definition;
use Symfony\Component\DependencyInjection\DefinitionDecorator;
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\Config\FileLocator;

use FOS\ElasticaBundle\DependencyInjection\FOSElasticaExtension as Extension;

/**
 * Overrides some parts of FOS Elastica extension.
 */
class AcmeElasticaExtension extends Extension
{
} 
```

`app/AppKernel.php`

```
<?php
use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            new FOS\ElasticaBundle\FOSElasticaBundle(),
            new Acme\ElasticaBundle\PhoenixElasticaBundle(),
        );
    }
} 
```

错误：

```
ErrorException: Notice: Undefined index: indexes in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php line 367 
```

就是这一行：[https ://github.com/FriendsOfSymfony/FOSElasticaBundle/blob/master/DependencyInjection/Configuration.php#L367](https://github.com/FriendsOfSymfony/FOSElasticaBundle/blob/master/DependencyInjection/Configuration.php#L367)

我没有更改我的配置，所以我不确定可能是什么原因。我认为他们验证配置的代码运行良好并检索值，但`MergeExtensionConfigurationPass`似乎与此不正常：

```
in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php line 367
at ErrorHandler->handle('8', 'Undefined index: indexes', '/home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php', '367', array('nestings' => array())) in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php line 367
at Configuration->getNestings() in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php line 283
at Configuration->getMappingsNode() in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php line 265
at Configuration->getTypesNode() in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php line 188
at Configuration->addIndexesSection(object(ArrayNodeDefinition)) in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/Configuration.php line 30
at Configuration->getConfigTreeBuilder() in /home/tatsh/test-site/vendor/symfony/symfony/src/Symfony/Component/Config/Definition/Processor.php line 52
at Processor->processConfiguration(object(Configuration), array(array())) in /home/tatsh/test-site/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/Extension.php line 103
at Extension->processConfiguration(object(Configuration), array(array())) in /home/tatsh/test-site/vendor/friendsofsymfony/elastica-bundle/FOS/ElasticaBundle/DependencyInjection/FOSElasticaExtension.php line 23
at FOSElasticaExtension->load(array(array()), object(ContainerBuilder)) in /home/tatsh/test-site/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Compiler/MergeExtensionConfigurationPass.php line 42
at MergeExtensionConfigurationPass->process(object(ContainerBuilder)) in /home/tatsh/test-site/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/MergeExtensionConfigurationPass.php line 39
at MergeExtensionConfigurationPass->process(object(ContainerBuilder)) in /home/tatsh/test-site/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Compiler/Compiler.php line 119
at Compiler->compile(object(ContainerBuilder)) in /home/tatsh/test-site/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/ContainerBuilder.php line 453
at ContainerBuilder->compile() in /home/tatsh/test-site/app/bootstrap.php.cache line 950
at Kernel->buildContainer() in /home/tatsh/test-site/app/bootstrap.php.cache line 859
at Kernel->initializeContainer() in /home/tatsh/test-site/app/bootstrap.php.cache line 571
at Kernel->boot() in /home/tatsh/test-site/app/bootstrap.php.cache line 614
at Kernel->handle(object(Request)) in /home/tatsh/test-site/web/app_dev.php line 28 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:04:25.867

简单的修复方法：`load()`即使存根也实现该方法。不要调用父`load()`方法。

```
<?php
/**
 * Overrides some parts of FOS Elastica extension.
 */
class AcmeElasticaExtension extends Extension
{
    public function load(array $configs, ContainerBuilder $container)
    {
    }
} 
```

# ssl - 本地网络网站的 SSL 证书

> ID：15797847
> 
> 赞同：1
> 
> 时间：2013-04-03T20:50:16.580
> 
> 标签：ssl

我的要求是我想在 ssl 后面有一个本地网络网站。我知道我可以创建一个自签名证书，但我需要在每个客户端上安装证书（可能有数百个，并且不在域上）。如果我购买 ssl 证书。它有什么帮助，我需要购买什么样的 ssl 证书？

这个 Web 应用程序与两个我也想在 ssl 后面的 signalR 服务器通信。我将为此使用自签名证书。

我将不胜感激任何帮助。谢谢。

# c# - 如何使用正则表达式在 url 中捕获 ec2 弹性 ip 模式

> ID：15797854
> 
> 赞同：-2
> 
> 时间：2013-04-03T20:51:00.163
> 
> 标签：c#, asp.net, regex

任何人都可以为我提供 ac# regex 以在请求 url 中点击弹性 ip 吗？有时我们会收到一些奇怪的请求，其中我们的服务器/负载均衡器的弹性 IP 在 url 中。我需要将哑重定向到我的原始域/停止处理此类请求。

编辑：弹性ip是指亚马逊云上服务器的ec2 ip。它具有主机名的这种模式。ec2-11-111-222-333.cd-blahblah-1.compute.amazonaws.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:59:43.523

在我看来，您可能只检查该`compute.amazonaws.com`部分是否在字符串中，但如果这还不够（来自这些主机的一些合法流量），您也许可以使用它（示例不是那么完整，可能是这种情况下没有抓住）

```
ec2-[0-9-]+.cd-[a-z0-9-]+.compute.amazonaws.com 
```

# paypal - Paypal Digital Express 商品结账弹出窗口

> ID：15797857
> 
> 赞同：2
> 
> 时间：2013-04-03T20:51:16.803
> 
> 标签：paypal, paypal-sandbox

我在使用 Paypal 数字商品快速结帐代码时遇到问题。PayPal 脚本要求打开弹出窗口，让用户输入他们的信息。有时用于简单登录，有时用于创建新帐户。

输入数据后，弹出窗口应该重新引导用户。但是，它所做的只是挂断并冻结，或重定向到 PayPal 窗口并冻结。

我已经禁用了许多弹出窗口，一切都很好，我可以将数据输入我的数据库，我可以重定向到我网站上的页面。

但是，在某些区域会弹出 PayPal 窗口，我找不到禁用弹出窗口并将代码强制进入浏览器窗口的位置。

建议提供任何帮助。使用 PayPal 已经在这个问题上待了一个多星期，但似乎找不到答案。

谢谢，

授予

# python - 在 Python 中使用 Beautifulsoup 和 Urllib2，如何找到被特定标签包围的数据？

> ID：15797861
> 
> 赞同：3
> 
> 时间：2013-04-03T20:51:29.987
> 
> 标签：python, web-scraping, beautifulsoup, urllib2

作为对 BeautifulSoup 和 Urllib2 的介绍，我想我会制作一个基本的抓取程序，它可以在名为 lolking.net 的视频游戏网站中获取有关给定玩家的信息。每个用户都有一个不包含用户名的加扰 URL，因此我必须从站点的 HTML 中抓取播放器的 URL 扩展名才能访问他们的用户页面。

这是我可能会遇到的示例字符串：

```
<div class="search_result_item" onclick="window.location='/summoner/na/26670961'; return false;"><div style="display: table-cell; text-align: center; padding: 10px 10px 16px;"><div style="font-size: 14px; display: block;"> 
```

我需要在`/summoner/na/`部分之后提取数字位。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:02:36.217

让我们用 Google 来演示一下，因为我不知道相关站点的详细信息（并且正常的工作流程将从整个页面开始）。

```
import urllib2
from bs4 import BeautifulSoup
html = urllib2.urlopen( "http://www.google.com" ).read()
soup = BeautifulSoup( html ) 
```

为您进行的自然方法是：

*   查找所有具有 CSS 类“search_class_item”的 div
*   为这些设置 onclick 属性
*   与此属性中的 Javascript 代码上的正则表达式匹配（我不会在这里做这部分）

在 Google 上，让我们找到所有带有 CSS 类“gb1”的链接（A 标记）并找到它们的 href 属性。这个类比应该相当简单。

```
for tag in soup.find_all( "a", { "class" : "gb1" } ):
    print tag["href"] 
```

这个例子可能有点太简单了——它忽略了“tag”对象，很像“soup”对象，将有一个“find_all”方法（和其他类似方法）的事实。因此，如果您需要以一种涉及显式嵌套更多层的方式进行探索，这是可能的。除了 find_all() 按标签和类进行匹配之外，还有其他方法可以匹配。请参阅 BeautifulSoup 的文档以确切了解可能的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-10T21:19:26.957

对于*python 3*，它有点不同，（我总是忘记这一点，它不断地让我着迷）

```
import urllib.request

html = urllib.request.urlopen("http://www.google.com")
soup = BeautifulSoup(html)
html.close() 
```

# ios - UIAlertView 无法正常工作

> ID：15797862
> 
> 赞同：0
> 
> 时间：2013-04-03T20:51:39.973
> 
> 标签：ios, objective-c, xcode, uialertview

当我尝试关闭我的 UIAlertView 时遇到问题。UIAlertView 正确启动，并显示两个按钮：“是”和“否”。但是，当我选择是按钮时，什么也没有发生。我想知道我做错了什么，以及为什么选择“是”按钮时没有任何反应。

我的代码如下：

```
-(IBAction)gotoURL
{

    [self displaySafariDialogue];

}

-(void)displaySafariDialogue
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Are you sure you wish to exit this app and launch the safari browser?"
                                                    message:@"Click yes to continue"
                                                   delegate:nil
                                          cancelButtonTitle:@"Yes"
                                          otherButtonTitles:@"No", nil];
    [alert setTag:100];
    [alert show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    NSLog(@"Alert view button clicked");

    if(alertView.tag == 100)
    {

        if (buttonIndex==0)
        {
            NSLog(@"Yes button selected");
            NSURL *url = [NSURL URLWithString:@"http://www.google.com"];

            if (![[UIApplication sharedApplication] openURL:url])
                NSLog(@"%@%@",@"Failed to open url:",[url description]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:53:20.793

您需要设置委托。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Are you sure you wish to exit this app and launch the safari browser?"
                                                message:@"Click yes to continue"
                                               delegate:self
                                      cancelButtonTitle:@"Yes"
                                      otherButtonTitles:@"No", nil]; 
```

# javascript - 用 Rafael JS 制作一个空矩形

> ID：15797863
> 
> 赞同：0
> 
> 时间：2013-04-03T20:51:45.247
> 
> 标签：javascript, graphics

我在 Windows 7 上的 Firefox 19.0.2 上使用带有 JavaScript 的 Rafael 2.1.0。

我想制作一个边缘完全不透明但内部透明的矩形。这可能吗？

我看过

```
paper.rect.attr({fill: 
```

但它似乎只能选择要填充的颜色。

```
paper.rect.attr({fill: 'red', opacity:0.0}); 
```

使边缘消失

```
paper.rect.attr({fill: 'red', fill-opacity:0.0}); 
```

在 JavaScript 代码中产生错误（因为后续函数不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:58:43.453

您必须设置笔触而不是填充，并且您还可以更改笔触宽度。

实际上，设置描边可以让你设置它们的颜色，设置描边宽度可以让你在视口单位中编辑它们的宽度。

# jquery - 缩短选择选项列表中的长选项

> ID：15797865
> 
> 赞同：1
> 
> 时间：2013-04-03T20:51:53.340
> 
> 标签：jquery, list, options

我希望能够根据字符大小缩短选项菜单中的任何项目，我的尝试如下：

```
<script>
    jQuery(document).ready(function() {

        jQuery("#groupId").each(function(){     
        var myoptions = jQuery('option').length;
        var shorter =  myoptions.substring(0,10)+"...";     

        if (('myoptions')>10){  
            jQuery(this).find('option').text(shorter)

        }

                }); 

         });
    </script> 
```

html

```
<select id="groupId"  name="groupId">
<option value="0">Select...</option>
<option selected="selected" value="1074">Nomee Project Owners Group</option>
<option value="1064">Non-Admin Group this is too long this is too long and I want it to be shortened to 10 chars with ...</option>
<option value="1043">norights</option>
<option value="1018">Promotions Group</option>
<option value="1082">PS Repeater Group</option>
<option value="1013">QC Group</option>
<option value="1056">Ryan-Group A</option>
<option value="1000">USA - SDS Admin</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:57:16.273

你可以试试这个[http://jsfiddle.net/BJ8WK/](http://jsfiddle.net/BJ8WK/)

```
$("#groupId option").each(function()
{
    if($(this).text().length>10)
     {
        $(this).text($(this).text().substring(0, 10));
     }
}); 
```

# javascript - HTML5 文件 API：加载太慢

> ID：15797867
> 
> 赞同：7
> 
> 时间：2013-04-03T20:51:59.750
> 
> 标签：javascript, html, filereader

我是 JavaScript 和 jQuery 的新手，而 Google 并没有给出答案。我正在写一个在线电子书阅读器。这是一个库的代码，用户可以在其中输入多个 epub 文件，并且相关信息（如作者）应显示在表格中。为此，我需要提取 ePub 文件。jsZip[库](http://stuk.github.com/jszip/)完美运行。内容必须显示在动态创建的表格中（因为我不知道文件的数量）。

问题是 for 循环要快速并创建所有单元格，其中只有名称和文件大小，并且在 for 循环完成后 FileReader 的 onload 执行并将所有内容添加到最后一个单元格中。在这段代码中，alert("A") 发生的次数与在 alert("B") 发生之前输入的文件一样多。有什么方法可以让循环等到 FileReader 的加载完成？

```
function handleFileSelect(evt) {
var files = evt.target.files;
var rows = Math.ceil(files.length/3);
var a = 0;
var root = document.getElementById('mainTable');
var tab=document.createElement('table');
tab.style.textAlign = "center";
var row, cell;
var tbo=document.createElement('tbody');
for(var i  = 0; i != rows; i++)
{
  row=document.createElement('tr');
  for(var j = 0; (j < 3);j++)
  {
   cell = document.createElement('td');
   cell.height = "300px";
   cell.width = "300px"
   if(a <indexes.length)
   {
        var f = files[a];
        var str = f.name;
        str = str.substring(0, str.length - 5);
        str = "File Name: " + str;
        cell.appendChild(document.createTextNode(str));
        cell.appendChild(document.createElement('br'));
        str = "File Size: " + Math.round(f.size/1024) + " KB";
        cell.appendChild(document.createTextNode(str));
        cell.appendChild(document.createElement('br'));
        var reader = new FileReader();
        reader.onload = (function(theFile) 
        {
          return function(e) 
          {
              alert("B");
              var zip = new JSZip(e.target.result);
              $.each(zip.files, function (index, zipEntry) 
              {
                  cell.appendChild(document.createTextNode(zipEntry.name));
                  cell.appendChild(document.createElement('br'));
                  //row.appendChild(cell);
              });
          }
        })(f);
        reader.readAsArrayBuffer(f);
        alert("A");
        a++;
    }
    row.appendChild(cell);
  }
  tbo.appendChild(row);
}
tab.appendChild(tbo);
root.appendChild(tab);              
}
document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:49:51.780

您的问题是 onload 处理程序中使用的变量 cell 将引用分配给外循环中 cell 的最后一个值。您可以通过将文件处理放在一个单独的函数中来解决这个问题，该函数将创建它自己的范围。

```
function read_zip_file(f, cell) {
    var reader = new FileReader();
    reader.onload = (function(theFile) 
    {
      return function(e) 
      {
          alert("B");
          var zip = new JSZip(e.target.result);
          $.each(zip.files, function (index, zipEntry) 
          {
              cell.appendChild(document.createTextNode(zipEntry.name));
              cell.appendChild(document.createElement('br'));
              //row.appendChild(cell);
          });
      }
    })(f);
    reader.readAsArrayBuffer(f);
} 
```

然后在外循环中，您可以调用：

```
read_zip_file(f, cell); 
```

# c++ - 无法在 Visual Studio 2012 中使用 boost::threads

> ID：15797873
> 
> 赞同：0
> 
> 时间：2013-04-03T20:52:15.010
> 
> 标签：c++, visual-c++, boost, visual-studio-2012, boost-thread

我在 Visual Studio 2012（CTP Nov 2012）中使用 boost::threads 得到以下错误。我正在使用提升 1.53。

```
1>boost/config/requires_threads.hpp(29): fatal error C1189: #error :  "Threading support unavaliable: it has been explicitly disabled with BOOST_DISABLE_THREADS" 
```

我在互联网上找到了使用多线程 c 运行时的建议。（我是，不工作。）然后对于如何解决这个问题有一个巨大的沉默。提升对视觉工作室的支持了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:29:02.830

如果禁用语言扩展（即开关 /Za），Visual Studio 中会自动禁用线程。

# objective-c - AXObserverCallback 元素参考

> ID：15797874
> 
> 赞同：0
> 
> 时间：2013-04-03T20:52:16.947
> 
> 标签：objective-c, xcode, cocoa, accessibility-api

我有一个这样注册的 AXObserver：

```
 AXObserverCreate(pid, axObserverCallback, &_observer); 
```

这是回调方法：

```
static void axObserverCallback(AXObserverRef observer, AXUIElementRef elementRef, CFStringRef notification, void *self) { .. } 
```

这就是我添加通知的方式：

```
 AXObserverAddNotification(_observer, app, kAXFocusedWindowChangedNotification, self); 
```

我注意到的是添加到观察者（用于通知）（在上述情况下为“app”）的元素似乎与观察者回调中的一组元素（“elementRef”）不对应。好像是副本？至少我无法将它们与 == 进行比较，如果我 NSLog 它们显示不同的地址。

有没有办法比较作为副本的 AXUIElementRefs？（这是返回副本而不是原件的正常行为吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T23:44:54.000

与所有 Core Foundation 对象一样，AXUIElementRefs 应该使用 来比较`CFEqual()`，而不是通过检查指针是否相等。

# javascript - 在javascript中的字符串内部搜索

> ID：15797880
> 
> 赞同：0
> 
> 时间：2013-04-03T20:52:32.050
> 
> 标签：javascript, string, substring

我有一个要使用 javascript 解析的字符串。字符串内容是

> 2013 年 4 月 2 日星期二 13:36:56 GMT -0500（中部夏令时间）

我需要让javascript“在开括号后获取单词”（在本例中为“Central”）。

我似乎无法弄清楚它的javascript代码。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:10:35.867

使用正则表达式，您可以使用：

```
var re = /\(([A-Za-z0-9]+)[ )]/;
var str = "Tue Apr 02 2013 13:36:56 GMT -0500 (Central Daylight Time)";
var matching = str.match(re); 
```

**演示：http:** [//jsfiddle.net/BzxtY/](http://jsfiddle.net/BzxtY/)

由于您需要特定的单词，因此您可以使用`matching[1]`来匹配特定的单词。当然，比赛*可能*是`null`，所以你可能想先检查一下。如果您确定此正则表达式将匹配，请不要打扰:)

分解它：

*   `\(`- 以。。开始`(`

*   `(`- （匹配组的开头）

*   `[A-Za-z0-9]+`- 包含 AZ、az、0-9 中的至少一个

*   `)`- （匹配组结束）

*   `[ )]`- 以`（空格）结尾或`)``

 `最后一部分应该匹配一个`()`或多个单词中的一个单词（并且只获得第一个，如你所愿）。比如匹配“（Central Daylight Time）”中的“Central”或匹配“（Testing）”中的“Testing”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:56:48.210

试试这个，

```
var xStr="Tue Apr 02 2013 13:36:56 GMT -0500 (Central Daylight Time)"
alert(xStr.substring(xStr.indexOf("(")+1).split(" ")[0]); 
```

[使用的概念：[**substring**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)，[**indexOf**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)，[**split**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split) ]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T20:55:05.117

使用 indexOf() 获取第一个括号的索引。一旦你有了它，然后将所有字符放到下一个空格。

```
var str = "Tue Apr 02 2013 13:36:56 GMT -0500 (Central Daylight Time)";

var parenIdx = str.indexOf('(') + 1;
var result = str.substring(parenIdx, str.indexOf(' ', parenIdx)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T21:01:35.163

我同意 - 正则表达式是一种方式（特别是它是优雅的）：

```
<string>.replace(/.*\(([^\s]*)\s.*/,'$1'); 
```

(nb*会有*更优雅的正则表达式)

干杯。`

# ms-access - 访问 2013 - DlookUp

> ID：15797881
> 
> 赞同：0
> 
> 时间：2013-04-03T20:52:35.873
> 
> 标签：ms-access, ms-access-2013

我现在已经尝试过了`DLookUp`，但我没有得到我想要的结果。

我的情况：我正在为电影院创建一个数据库。它包括名为电影院、电影、已售座位、价格的表格。

我制作了一个表格，可以记录一个新的“客人”。我可以选择节目的 ID，然后我会看到日期和时间。我现在记录了一些客人，现在应该有更少的空位了。我想以与我录制新客人的形式相同的形式展示这一点。我起不来`Dlookup`。

我做了这个查询，计算剩下多少个座位，但我不能把它放进表格。

```
SELECT
    tbl_Vorstellung.ID_Vorstellung,
    tbl_Kino.Kino,
    Sum([tbl_Kino]![Sitzplätze]-[qry(02)PlätzeVerkauft]![AnzahlvonTicketNummer]) AS Ausdr1
FROM
    tbl_Kino
    INNER JOIN ([qry(02)PlätzeVerkauft]
    INNER JOIN tbl_Vorstellung
    ON [qry(02)PlätzeVerkauft].ID_Vorstellung = tbl_Vorstellung.ID_Vorstellung)
    ON tbl_Kino.ID_KINO = tbl_Vorstellung.FS_KINO
GROUP BY
    tbl_Vorstellung.ID_Vorstellung,
    tbl_Kino.Kino; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:31:40.363

将您的工作查询另存为新名称，例如`MyQuery`

然后使用

```
DLOOKUP("Ausdr1", "MyQuery", "ID_Vorstellung=SomeValue AND Kino=SomeValue") 
```

在你的表格上。您必须根据表单上的字段等输入 SomeValue 值。

# java - Spring 集成 - 用于整理/批处理服务调用的适当模式

> ID：15797883
> 
> 赞同：5
> 
> 时间：2013-04-03T20:52:50.010
> 
> 标签：java, spring, spring-integration

我有一个远程服务，当发生特定事件时，我正在调用它来加载产品的定价数据。一旦加载，产品定价就会被广播给另一个消费者以在其他地方处理。

我不想在每个事件上调用远程服务，而是将事件分成小组，然后一次性发送。

我根据聚合器拼凑了以下模式。虽然它有效，但很多“闻起来”——尤其是我的`SimpleCollatingAggregator`. 我是 Spring Integration 和一般 EIP 的新手，我怀疑我在滥用组件。

## 编码

我的代码通过调用下面的方法在代码的其他地方触发`@Gateway`：

```
public interface ProductPricingGateway {    
    @Gateway(requestChannel="product.pricing.outbound.requests")
    public void broadcastPricing(ProductIdentifer productIdentifier);
} 
```

然后将其连接到聚合器，如下所示：

```
<int:channel id="product.pricing.outbound.requests" />
<int:channel id="product.pricing.outbound.requests.batch" />
<int:aggregator input-channel="product.pricing.outbound.requests"
output-channel="product.pricing.outbound.requests.batch" release-strategy="releaseStrategy"
    ref="collatingAggregator" method="collate"
    correlation-strategy-expression="0"
    expire-groups-upon-completion="true" 
    send-partial-result-on-expiry="true"/>  
<bean id="collatingAggregator" class="com.mangofactory.pricing.SimpleCollatingAggregator" />
<bean id="releaseStrategy" class="org.springframework.integration.aggregator.TimeoutCountSequenceSizeReleaseStrategy">
    <!-- Release when: 10 Messages ... or ... -->
    <constructor-arg index="0" value="10" />
    <!-- ... 5 seconds since first request -->
    <constructor-arg index="1" value="5000" />
</bean> 
```

这是聚合器的实现：

```
public class SimpleCollatingAggregator {

    public List<?> collate(List<?> input)
    {
        return input;
    } 
```

}

最后，这被消耗在以下内容上`@ServiceActivator`：

```
@ServiceActivator(inputChannel="product.pricing.outbound.requests.batch")
public void fetchPricing(List<ProductIdentifer> identifiers)
{
        // omitted
} 
```

注意：在实践中，我也使用@Async，以使调用代码尽可能快地返回。我对此也有很多问题，我将转到一个单独的问题。

**问题 1：** 考虑到我想要实现的目标，聚合器模式在这里是一个合适的选择吗？这感觉就像***很多***样板——有更好的方法吗？

**问题 2：** 我使用固定的排序规则值`0`, 来有效地说：“无论您如何对这些消息进行分组，都可以随它们来。”

这是实现这一目标的适当方法吗？

**问题3：** `SimpleCollatingAggregator`对我来说简直是错误的。

我希望它接收我的个人入站`ProductIdentifier`对象，并将它们分组，然后传递它们。这行得通，但它合适吗？有没有更好的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:14:27.003

Q1：是的，但请参阅 Q3 和下面的进一步讨论。
Q2：这是说“不需要相关性”的正确方式（但你需要`expire-groups-on-completion`你拥有的 ）。
Q3：这种情况下，不需要自定义Aggregator，直接使用默认即可（去掉ref和method属性）。

请注意，聚合器是被动组件；释放是由新消息的到达触发的；因此，您的发布策略的第二部分只会在新消息到达时启动（它不会在 5 秒后自发释放组）。

但是，您**可以**`MessageGroupStoreReaper`为此目的配置一个：http: [//static.springsource.org/spring-integration/reference/html/messaging-routing-chapter.html#aggregator](http://static.springsource.org/spring-integration/reference/html/messaging-routing-chapter.html#aggregator)

# angularjs - AngularJS：textarea和ng-repeat-ed输入之间的双向绑定

> ID：15797886
> 
> 赞同：8
> 
> 时间：2013-04-03T20:52:57.277
> 
> 标签：angularjs

我本来想问这个问题，但我想出了一个解决方案。所以在这一点上，我正在寻找对我的解决方案的批评。

1.  我有一个 static`textarea`和一个`input`with`ng-repeat`指令。

2.  当用户在 中键入句子时`textarea`，`input`会为句子中的每个单词呈现 a。

3.  然后，如果用户更新 any 中的文本，则句子`input`中的相应单词`textarea`也会更新（实际上是整个句子都被重新创建了）。

演示：[http ://plnkr.co/edit/bSjtOK?p=preview](http://plnkr.co/edit/bSjtOK?p=preview)

## 问题

请记住，我学习 AngularJS 的时间只有 2 周：

*   我是用“角度”的方式写的吗？
*   有什么我可以做得更好的吗？
*   我是否违反了任何禁忌？

## 缩写代码

### HTML

```
<textarea ng-model="sentence" ng-change="parseSentence()" style="width: 100%; height: 15em;"></textarea>

<input type="text" ng-repeat="w in words" ng-model="w.word" ng-change="buildSentance(w)" /> 
```

### JavaScript

```
function WordCtrl($scope, debounce) {

    $scope.words = [];
    $scope.sentence = 'Hello there how are you today?';

    // this is called when the textarea is changed
    // it splits up the textarea's text and updates $scope.words 
    $scope.parseSentence = function() {

        var words = $scope.sentence.split(/\s+/g);
        var wordObjects = [];

        for (var i=0;i<words.length;i++) {          
          wordObjects.push({word: words[i]});
        }

        if ((words.length == 1) && (words[0] === '')) {
          $scope.words = [];
        } else {
          $scope.words = wordObjects;
        }

    };

    $scope.parseSentenceDebounced = debounce($scope.parseSentence, 1000, false);

    $scope.buildSentance = function(w) {

        var words = [];

        for (var i=0;i<$scope.words.length;i++) {
          var word = $scope.words[i].word;
          if (word.replace(/\s+/g,'') !== '') {
            words.push(word);
          }
        }

        $scope.sentence = words.join(' ');

        // if the user puts a space in the input
        // call parseSentence() to update $scope.words
        if (w.word.indexOf(' ') > -1) {
          $scope.parseSentenceDebounced();
        }

    }

    $scope.parseSentence();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-30T23:26:12.513

您遇到的有趣问题。我把你的代码放在我的页面上，我注意到的第一件事是你不能在控制器方法中传递去抖动。

我注意到的下一个问题是您有一个 ng-change，它使用 ng-change 更改另一个框上的值。我将事件更改为 Keypress 以停止摘要中的摘要。

在这里它在 JSFiddle 中工作 在此处[输入链接描述](https://jsfiddle.net/jfallin/c2pxx9wc/)

编码：

**HTML**

```
 <body ng-app="portal">
    <div ng-controller="WordCtrl">
    <textarea ng-model="sentence" ng-keypress="parseSentence()" style="width: 100%; height: 15em;"></textarea>
    <input type="text" ng-repeat="w in words" ng-model="w.word" ng-keypress="buildSentance(w)" />
    </div>
    </body> 
```

**Javascript**

```
angular.module("portal",[]).controller("WordCtrl",function($scope) { 
    $scope.words = [];
    $scope.sentence = 'Hello there how are you today?';
    $scope.parseSentence = function () {
        var words = $scope.sentence.split(/\s+/g);
        var wordObjects = [];
        for (var i = 0; i < words.length; i++) {
            wordObjects.push({ word: words[i] });
        }
        if ((words.length == 1) && (words[0] === ''))
        {
            $scope.words = [];
        }
        else
        {
            $scope.words = angular.copy(wordObjects);
        }
    }

    $scope.buildSentance = function (w) {

        var words = [];

        for (var i = 0; i < $scope.words.length; i++) {
            var word = $scope.words[i].word;
            if (word.replace(/\s+/g, '') !== '') {
                words.push(word);
            }
        }

        $scope.sentence = words.join(' ');

        // if the user puts a space in the input
        // call parseSentence() to update $scope.words
        if (w.word.indexOf(' ') > -1) {
            $scope.parseSentenceDebounced();
        }
    }
    $scope.parseSentence();

    }); 
```

希望这可以解决您的问题。

# jquery - Jquery：无法让 .preventDefault 工作

> ID：15797887
> 
> 赞同：0
> 
> 时间：2013-04-03T20:52:57.650
> 
> 标签：jquery, preventdefault

单击提交按钮时，我试图捕捉提交并执行快速 AJAX 请求，以查看表单中指定的时间和日期的预订是否已经存在。如果是这样，请停止提交表单并提醒用户日期和时间的预订已经存在！如果没有预订，请继续提交表格。对于我的生活，我无法`.preventDefault`让它工作，除非我把它放在提交功能的末尾。非常感谢任何想法和指示，我已经坚持了三个小时，而且似乎并没有快速取得任何进展。我 99% 确定我只是个白痴，所以提前道歉！

这是我的代码：

```
$('#formID').submit(function(event){

            var InspectionDate = $('#datepicker').val().split('/');
            InspectionDate.reverse();
            InspectionDate = InspectionDate.join('-');
            InspectionHour = $('#time_hour').val();
            InspectionMinutes = $('#time_minutes').val();
            var InspectionDateTime = InspectionDate + ' ' + InspectionHour + ':' + InspectionMinutes + ':00';
            $.ajax({
               type: "POST",
               url: "ajax_booking_check.php",
               data: 'InspectionDateTime='+ InspectionDateTime,
               cache: false,
               success: function(response){
                if(response = 1){
                alert("An appointment for the selected Date and Time already exists.\n\nDouble Bookings are not possible.\n\nPlease refer to the calender to find an available appointment.");
                event.preventDefault();
                }
                else{
                //submit form   
                }
               }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:55:18.140

您需要将 放在`event.preventDefault`方法的开头，而不是成功回调

```
$('#formID').submit(function(event){
    event.preventDefault();
    var InspectionDate = $('#datepicker').val().split('/');
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:56:03.017

将 preventDefault 作为第一行，然后如果要提交表单，请在表单元素上调用 submit 方法。通过调用表单元素的提交方法而不是 jQuery 定义的方法，它将绕过 jQuery 绑定的提交事件处理程序。

```
$('#formID').submit(function (event) {
    event.preventDefault();
    var form = this;
    var InspectionDate = $('#datepicker').val().split('/');
    InspectionDate.reverse();
    InspectionDate = InspectionDate.join('-');
    InspectionHour = $('#time_hour').val();
    InspectionMinutes = $('#time_minutes').val();
    var InspectionDateTime = InspectionDate + ' ' + InspectionHour + ':' + InspectionMinutes + ':00';
    $.ajax({
        type: "POST",
        url: "ajax_booking_check.php",
        data: 'InspectionDateTime=' + InspectionDateTime,
        cache: false,
        success: function (response) {
            if (response = 1) {
                alert("An appointment for the selected Date and Time already exists.\n\nDouble Bookings are not possible.\n\nPlease refer to the calender to find an available appointment.");
            } else {
                form.submit();
            }
        }
    });
}); 
```

# cocoa - 使用 iOS 的一年中的某一天

> ID：15797888
> 
> 赞同：1
> 
> 时间：2013-04-03T20:53:02.473
> 
> 标签：cocoa, nsdate, nscalendar

我需要知道 iOS sdk 一年中的哪一天。我可以手动完成，但想知道有什么方法可以找到一年中的哪一天吗？我不是那个意思——一年有多少天。我需要知道输入日期的天数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:55:51.860

得到答案:) 请看下面的例子

```
NSCalendar *currentCalendar = [NSCalendar currentCalendar];
    NSDate *today = [NSDate date];
    NSInteger dc = [currentCalendar  ordinalityOfUnit:NSDayCalendarUnit
                                               inUnit:NSYearCalendarUnit
                                              forDate:today];
    NSLog(@"%d",dc); 
```

# javascript - javascript引导策略

> ID：15797891
> 
> 赞同：3
> 
> 时间：2013-04-03T20:53:06.543
> 
> 标签：javascript, twitter-bootstrap

我正在处理的项目目前有一个引导文件，用于初始化应用程序中的所有 javascript 对象。类似于下面的代码

```
if(document.getElementById('nav')) {
  new navigation();
}

if(document.getElementById('search')) {
 new search();
}

new carousel(); 
```

然而，我担心的是，无论出于何种原因，其中一行 JS 错误都不会执行，并且我们几乎创建了一个单点故障。

我有兴趣听到这个问题的替代方案和解决方案，以及任何其他可能有助于缓解这个问题的引导策略。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:12:11.340

如果您知道您的某个调用可能会失败，那么您也应该有一个解决方案来捕获该错误。使用`try` `catch`块将允许您捕获异常并让您的代码继续运行。

```
try{
  if(document.getElementById('nav')) {
    new navigation();
  }
}catch(e){
  //handle exception for navigation fail
}

try{
  if(document.getElementById('search')) {
   new search();
  }
}catch(e){
  //handle exception for search fail
}

try{
  new carousel();
}catch(e){
  //handle exception for carousel fail
} 
```

通常，您不想将所有代码包装在 try catch 块中，但听起来您相当有信心某些代码会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:43:38.550

您可以将 init 逻辑封装在单独的*init*函数中，然后让另一个函数调用它们并捕获结果。例如：

```
<body>

<div id=nav></div>
<div id=search></div>

<script>
    function initNavigation() {
        if (document.getElementById('nav')) {
            new navigation();
        }
    }

    function initSearch() {
        if (document.getElementById('search')) {
            new search();
        }
    }

    function initCarousel() {
        new carousel();
    }

    function initNoError() {
        return "ok";
    }

    /**
     * Expects a list of functions to execute, and will capture either the retVal or the error.
     */
    function init() {
        var results = [],
            result;
        for (var i = 0; i < arguments.length; i++) {
            result = {};
            try {
                result.retVal = arguments[i]();
            } catch (e) {
                result.error = e;
            }
            results.push(result);
        }
        return results;
    }

    var initResults = init(initNavigation, initSearch, initCarousel, initNoError);
    console.log(initResults);
</script>

</body> 
```

此代码将为我显示以下内容。`ReferenceError`错误是因为我没有你的构造函数。这`TypeError`似乎是因为 Firefox 正在返回`<div>`相同 id 的，而这个 div 当然不是构造函数。

```
[
    Object { error=ReferenceError: navigation is not defined},
    Object { error=TypeError: search is not a constructor},
    Object { error=ReferenceError: carousel is not defined},
    Object { retVal="ok"}
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:37:44.543

[检查这个小提琴。](http://jsfiddle.net/afa65/2/)

对于自己滚动，如果您可以使用`data-`html 5 属性来指定引导关系。然后你的引导函数可以遍历它们并启动构造函数。

`id`您还可以有一个用于构造函数的映射对象。我将在这里使用该示例。

假设标记类似于：

```
<body>
    <div id="navigation"></div>
    <div id="search"></div>
</body> 
```

定义引导映射，创建引导方法并调用它：

```
// Declare your bindings in an object
var bootstrapBindings = {
    "navigation" : NavigationBootstrap,
    "search" : SearchBootstrap,
    "failure" : null
};

function bootstrap() {
    var i, element, instance;

    // Bind everything in the bindings
    for(i in bootstrapBindings) {
        if(bootstrapBindings.hasOwnProperty(i)) {
            try {
                element = document.getElementById(i);
                if(element) {
                    instance = new bootstrapBindings[i](element);

                    // Nestable bootstrap calls
                    instance.bootstrap();
                }
            } catch(e) {
                // Do something with error if you want
                alert('Unable to bootstrap: ' + e);
            }
        }
    }
}

bootstrap(); 
```

# squirrel-sql - Squirrel SQL 客户端中的彩色单元格

> ID：15797893
> 
> 赞同：4
> 
> 时间：2013-04-03T20:53:08.410
> 
> 标签：squirrel-sql

我使用 Squirrel SQL 客户端来查询我的 DB2 数据库。当我查询其中一张表时，我看到一些单元格背景显示为彩色（蓝绿色）。我不确定为什么这些单元格可以以蓝绿色显示，而其他单元格的背景仍为白色。我在网上做了一些研究，发现了多种细胞可以着色的场景。

1.  如果单元格有多行文本。
2.  如果单元格已达到允许的最大字符数。
3.  如果单元格设置为只读。

基于以上，我检查了我的表结构。所有彩色单元格都有多行文本。它们都没有达到字符数的最大允许限制。我右键单击了一个彩色单元格，我可以使其可编辑。我能找到的唯一匹配是，所有彩色单元格都有多行文本。是否有任何其他原因可能导致单元格以不同的颜色显示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T19:58:46.030

我对我的表结构进行了更多研究并得到了答案。

> 只有当 Squirrel 中包含多行文本时，它们才会显示彩色单元格。

# python - SQL 查询中的命名参数 - cx_Oracle - ORA-01460：请求的转换未实现或不合理

> ID：15797894
> 
> 赞同：1
> 
> 时间：2013-04-03T20:53:09.787
> 
> 标签：python, python-2.7, oracle10g, cx-oracle

根据 Python DB-API 在 RAW SQL 查询中实现命名参数后，我遇到了一个问题。

早些时候，我的代码如下（这在我的开发服务器和客户端的测试服务器上都可以正常工作）

```
cursor.execute("SELECT DISTINCT(TAG_STATUS) FROM TAG_HIST WHERE TAG_NBR = '%s' " %(TAG_NBR)) 
```

我将其更改为以下

```
cursor.execute("SELECT DISTINCT(TAG_STATUS) FROM TAG_HIST WHERE TAG_NBR = :TAG_NBR " ,{'TAG_NBR':TAG_NBR}) 
```

这个更改的版本（带有命名参数）在我的开发服务器上运行良好

> *   Windows XP 甲骨文 XE
> *   SQL*Plus：版本 11.2.0.2.0
> *   cx_Oracle-5.1.2-11g.win32-py2.7

但是，当部署在我的客户端的测试服务器上时，它不会....所有查询的执行都失败。

我的客户服务器的特点如下

*   视窗服务器 2003
*   Oracle 数据库 10g 企业版 10.2.0.1.0 - 64bi
*   cx_Oracle-5.1.2-10g.win32-py2.7

我得到的错误如下

```
Traceback (most recent call last):
  File "C:/Program Files/App_Logic/..\apps\views.py", line 400, in regularize_TAG
    T_cursor.execute("SELECT DISTINCT(TAG_STATUS) FROM TAG_HIST WHERE TAG_NBR = :TAG_NBR " ,{'TAG_NBR':TAG_NBR})
DatabaseError: ORA-01460: unimplemented or unreasonable conversion requested 
```

感谢有人可以帮助我解决这个问题。

仅当 cx_Oracle 代码在 Web 应用程序（托管在 Apache 上）中运行时才会出现此问题。

如果我在 python 命令行中使用命名参数运行相同的代码，那么查询运行得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T03:57:06.350

这是如何解决的。

我尝试将 unicode 类型转换为 str，结果是肯定的。

例如，这个工作

```
T_cursor.execute("SELECT DISTINCT(TAG_STATUS) FROM TAG_HIST WHERE TAG_NBR = :TAG_NBR", {'TAG_NBR': str(TAG_NBR)}) 
```

因此，实际上，unicode 被编码为潜在的非 unicode 数据库字符集而受到破坏。

为了解决这个问题，这是另一种选择

```
import os
os.environ.update([('NLS_LANG', '.UTF8'),('ORA_NCHAR_LITERAL_REPLACE', 'TRUE'),])
import cx_Oracle 
```

以上保证我们确实处于 UTF8 模式。

第二个环境变量不是绝对必要的。而且 AFAIK 没有其他方法可以设置这些变量（除了在运行应用程序本身之前），因为 NLS_LANG 是由 OCI 库从环境中读取的。

# iphone - 检测 dispatch_async 方法是否仍在运行

> ID：15797895
> 
> 赞同：1
> 
> 时间：2013-04-03T20:53:17.230
> 
> 标签：iphone, ios, objective-c, cocoa-touch, grand-central-dispatch

我有一个**loadImages**方法

```
- (void)loadImages {
   dispatch_async(dispatch_get_global_queue(0, 0), ^{
       //this method loads images from a url, processes them
       //and then adds them to a property of its view controller 
       //@property (nonatomic, strong) NSMutableArray *storedImages;
   });
} 
```

单击按钮时，视图进入屏幕，并显示**当前存在**于 _storedImages 中的所有图像

```
- (void)displayImages {
   for (NSString *link in _storedImages) {
      //displayImages
   }
} 
```

此设置的问题在于，**如果用户在所有图像加载之前单击按钮，则并非所有图像都显示在屏幕上。**

因此，如果单击按钮，我想**显示一个 SVProgressHUD ，并且****loadImages dispatch_async 方法仍在运行**。

那么，**我如何跟踪这个 dispatch_async 的完成时间呢？**因为如果我知道这一点，那么我可以在完成之前显示一个 SVProgressHUD。

*附带说明一下，如果您知道如何动态加载/显示图像，该信息也会有所帮助*，即您单击按钮，然后当您看到当前图像时，会下载并显示更多图像

来自第一次 iOS 开发者的感谢！

* * *

好的，我*找到了一个解决方案，但效率非常低*，我相信有更好的方法来做到这一点

> ```
> 1\. Keep a boolean property doneLoadingImages which is set to NO
> 2\. After the dispatch method finishes, set it to YES
> 3\. In the display images method, have a while (self.doneLoadingImages == NO)
> //display progress HUD until all the images a loaded 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T21:34:45.960

请记住，这`NSMutableArray`不是线程安全的。您必须确保不要尝试同时从两个线程访问它。

使用布尔值来跟踪您是否仍在加载图像是可以的。`loadImages`看起来像这样：

```
- (void)loadImages {
    self.doneLoadingImages = NO;

    dispatch_async(dispatch_get_global_queue(0, 0), ^{

        while (1) {
            UIImage *image = [self bg_getNextImage];
            if (!image)
                break;
            dispatch_async(dispatch_get_main_queue(), ^{
                [self addImage:image];
            });
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [self didFinishLoadingImages];
        });

    });
} 
```

因此，我们将自己发送`addImage:`到每个图像的主队列中。该`addImage:`方法只会在主线程上调用，因此它可以安全地访问`storedImages`：

```
- (void)addImage:(UIImage *)image {
    [self.storedImages addObject:image];
    if (storedImagesViewIsVisible) {
        [self updateStoredImagesViewWithImage:image];
    }
} 
```

`didFinishLoadingImages`加载完所有图像后，我们发送自己。在这里，我们可以更新`doneLoadingImages`标志，并在必要时隐藏进度 HUD：

```
- (void)didFinishLoadingImages {
    self.doneLoadingImages = YES;
    if (storedImagesViewIsVisible) {
        [self hideProgressHUD];
    }
} 
```

然后您的按钮操作可以检查`doneLoadingImages`属性：

```
- (IBAction)displayImagesButtonWasTapped:(id)sender {
    if (!storedImagesViewIsVisible) {
        [self showStoredImagesView];
        if (!self.doneLoadingImages) {
            [self showProgressHUD];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:25:40.873

对于这类问题，我通常做的基本如下（粗略）：

```
- (void)downloadImages:(NSArray*)arrayOfImages{

  if([arrayOfImages count] != 0)
  {
     NSString *urlForImage = [arrayOfImages objectAtIndex:0];
     // Start downloading the image

     // Image has been downloaded
     arrayOfImages = [arrayOfImages removeObjectAtIndex:0];
     // Ok let's get the next ones...
     [self downloadImages:arrayOfImages];
  }
  else
  {
   // Download is complete, use your images..
  }
} 
```

您可以传递失败的下载次数，甚至可以传递将在之后接收图像的委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T14:33:11.550

你放了一个“注释”，这可能会有所帮助，它允许你在图像下降时显示它们，我将 URL 存储在一个数组中（这里是字符串，但你可以做 NSURL 的数组）。

```
for(NSString *urlString in imageURLs)
{
    // Add a downloading image to the array of images
    [storedImages addObject:[UIImage imageNamed:@"downloading.png"]];

    // Make a note of the image location in the array    
    __block int imageLocation = [storedImages count] - 1; 

    // Setup the request    
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]];
    [request setTimeoutInterval: 10.0];
    request.cachePolicy = NSURLRequestReturnCacheDataElseLoad;

    [NSURLConnection sendAsynchronousRequest:request
                  queue:[NSOperationQueue currentQueue]
                  completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                  // Check the result
                  NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
                  if (data != nil && error == nil && [httpResponse statusCode] == 200)
                  { 
                      storedImages[imageLocation] = [UIImage imageWithData:data];
                      [self reloadImages];
                  }
                  else
                  {
                      // There was an error
                      recommendedThumbs[imageLocation] = [UIImageimageNamed:@"noimage.png"];
                      [self reloadImages]
                  }
           }];
} 
```

然后，您需要另一种方法来重新加载显示。如果图像在表格中，则 [[tableview] reloaddata];

```
-(void)reloadImages 
```

# .net - 检测来自垃圾箱的 Google 驱动器文件

> ID：15797906
> 
> 赞同：1
> 
> 时间：2013-04-03T20:53:41.900
> 
> 标签：.net, c#-4.0, google-drive-api

我正在使用以下代码来获取我的 Google 云中存在的所有文件。

```
_driveService.Files.List().Fetch(); 
```

但它甚至会获取移动到垃圾箱的文件。如何知道文件是来自垃圾箱还是来自普通文件夹？我看不到文件的任何属性，它指定它来自垃圾箱。有人可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:47:45.243

使用 Drive API 检索文件时，您可以检查`labels`集合以查看它是否包含以下`trashed`字段：

[https://developers.google.com/drive/v2/reference/files#labels.trashed](https://developers.google.com/drive/v2/reference/files#labels.trashed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T21:19:11.693

您使用 Child API 获取垃圾箱中的文件列表并将它们从传输中排除，请参见链接： [Child List](https://developers.google.com/drive/v2/reference/children/list)。

# facebook - 不喜欢通过图形 api 给我 facebook 错误

> ID：15797909
> 
> 赞同：2
> 
> 时间：2013-04-03T20:53:54.190
> 
> 标签：facebook, facebook-graph-api

我正在使用图形 api。

两个 Facebook 帐户是朋友。第一个人发帖（帖子的 id 是：**postid1**）并且对第二个人可见。第二个家伙喜欢（成功）。现在，当第二个人试图与他喜欢的不同时，Facebook 向我抛出了以下错误。

```
{
   "error":{
      "message":"(#200) Feed story publishing to other users is disabled for this application",
      "type":"OAuthException",
      "code":200
   }
} 
```

我正在为不同于
Delete [https://graph.facebook.com:443/](https://graph.facebook.com:443/) **postid1** /likes?access_token=abc发出以下 http 请求

有人可以指出我在做什么错误。

# objective-c - Objective-C 内存管理：我理解这个吗？

> ID：15797916
> 
> 赞同：1
> 
> 时间：2013-04-03T20:54:38.130
> 
> 标签：objective-c, nsautoreleasepool

我终于决定停止拐弯抹角，自学一些 Objective-C。这一切都是有道理的，除了当我谈到内存管理和“自动释放池”这个想法时。据我了解，如果我专门使用 init、new、alloc 创建一个对象或告诉它保留，那么我的工作就是释放内存。但是，自动释放池会自动释放与最里面的自动释放池关联的所有对象吗？例如，假设我这样做：

```
TestOBJ* foo = [[[TestOBJ alloc] innit] autorelease]; 
```

那么它将在第一个 @autoreleasepool 块结束时释放，还是在调用第一个 [autoreleasepool drain] 时释放？

还; 仅仅因为一个对象是在 autoreleasepool 块中创建的，并不意味着它会自动标记为 autorelease，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:57:27.150

对两点都正确。

如果您调用`-autorelease`它们，对象只会被添加到自动释放池中。按照惯例，所有*不*`alloc`以,开头的方法`new`，`copy`或`mutableCopy`返回它们自己添加到自动释放池中的对象，因此您不必自己做。

有关详细信息，请参阅[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:56:28.740

您几乎自己正确回答了所有问题。

# ckeditor - 是否有安全的 CKEditor 输出查看器？

> ID：15797917
> 
> 赞同：1
> 
> 时间：2013-04-03T20:54:38.287
> 
> 标签：ckeditor

据我了解，CKEditor 只输出 HTML，您应该验证该 HTML，并将其输出为 HTML，我认为需要考虑的 XSS 问题太多。

是否有一个 CKEditor 输出查看器，它将将该 HTML 作为输入并安全地查看它。

因此，假设恶意方发送了一堆脚本标签而不是 CKEditor 输出，在服务器端没有任何篡改，输出将转到客户端，这个聪明的“查看器”将剥离恶意脚本标签并查看该 HTML 的输出。

我已经搜索过，但找不到任何东西，有这样的东西吗？

# restore - 恢复 Navicat 备份文件

> ID：15797919
> 
> 赞同：2
> 
> 时间：2013-04-03T20:54:47.497
> 
> 标签：restore, database-restore, navicat

我已从以下格式的 Navicat 文件进行备份：

*.backup
*.nppb
*.ncx

如何恢复表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T19:35:28.953

如果您在公共/备份下创建了备份，这应该可以工作。

```
a. navigate to the DC/public and click the Backups button 
b. Click the + add button 
c. Under the Advanced tab to name the backup click user specified file checkbox name and write name
d. Then hit play looking button “Start”
e. Now this will show up in Backups
f. To Restore backup click the backup you want then the open button with folder picture.     
Then hit start and everything will be reloaded.
Note: For some reason, to see data changes, you must right click in each to table to have them reload correctly. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T20:09:58.497

*   创建新数据库
*   打开它
*   然后`backup`（见图）

[![在此处输入图像描述](https://i.stack.imgur.com/zMryq.png)](https://i.stack.imgur.com/zMryq.png)

*   所以你可以拿起你的表（将它们复制到所需的数据库）

# wifi - 如何将 Wifi 信号强度从质量（百分比）转换为 RSSI（dBm）？

> ID：15797920
> 
> 赞同：29
> 
> 时间：2013-04-03T20:54:48.990
> 
> 标签：wifi

我应该如何将 Wifi 信号强度从质量百分比（通常为 0% 到 100%）转换为 RSSI 值，通常为负 dBm 数（即`-96db`）？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-03T20:59:54.077

## Wifi 信号强度百分比到 RSSI dBm

[Microsoft 在其WLAN_ASSOCIATION_ATTRIBUTES](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706828%28v=vs.85%29.aspx)结构中定义 Wifi 信号质量如下：

**wlanSignalQuality** :

> 代表网络信号质量的百分比值。WLAN_SIGNAL_QUALITY 是 ULONG 类型。该成员包含一个介于 0 和 100 之间的值。值 0 表示实际 RSSI 信号强度为 -100 dbm。值 100 表示实际 RSSI 信号强度为 -50 dbm。您可以使用线性插值计算介于 1 和 99 之间的 wlanSignalQuality 值的 RSSI 信号强度值。

RSSI（或“*无线电（接收）信号强度指示器*”）以“dB”（分贝）或类似的“dBm”（每毫瓦分贝）为单位（参见[dB vs. dBm](http://www.isa.org/Content/ContentGroups/InTech2/Features/20023/November7/dB_vs__dBm.htm)），其中较小幅度的负数具有最高的信号强度或质量。

* * *

因此，`quality`（百分比）和之间的转换`dBm`如下：

```
 quality = 2 * (dBm + 100)  where dBm: [-100 to -50]

    dBm = (quality / 2) - 100  where quality: [0 to 100] 
```

**伪代码**（带有示例钳位）：

```
 // dBm to Quality:
    if(dBm <= -100)
        quality = 0;
    else if(dBm >= -50)
        quality = 100;
    else
        quality = 2 * (dBm + 100);

    // Quality to dBm:
    if(quality <= 0)
        dBm = -100;
    else if(quality >= 100)
        dBm = -50;
    else
        dBm = (quality / 2) - 100; 
```

**注意**：

仔细检查`Quality`您用于计算的定义。还要检查`dB`（或`dBm`）的范围。限制可能会有所不同。

**例子**：

> ```
> Medium quality:   50%      ->   -75dBm   = (50 / 2) - 100
> Low quality:      -96dBm   ->   8%       = 2 * (-96 + 100) 
> ```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-08-06T09:54:40.280

在 JS 中，我更喜欢这样做：

`Math.min(Math.max(2 * (x + 100), 0), 100)`

我个人的看法是写它的方式比使用`if`'s 更优雅。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-01T11:56:39.810

根据经验：

1.  小于 -50dB（-40、-30 和 -20）= 100% 的信号强度
2.  从 -51 到 -55dB= 90%
3.  从 -56 到 -62dB=80%
4.  从 -63 到 -65dB=75%

    > 以下内容对于 Apple 设备来说还不够好

5.  从 -66 到 68dB=70%
6.  从 -69 到 74dB= 60%
7.  从 -75 到 79dB= 50%
8.  从 -80 到 -83dB=30%
    Windows 笔记本电脑可以在 -80dB 上正常工作，但速度较慢

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-02T01:02:15.130

我很高兴我找到了这篇文章，因为我正在寻找一种将 dbm 转换为百分比的方法。使用 David 的帖子，我在 python 中编写了一个快速脚本来计算质量百分比。

```
#!/usr/bin/env python3
import os
import platform

system = platform.system()
if system == 'Linux':
    cmd = "iwconfig wlan0 | grep Signal | /usr/bin/awk '{print $4}' | /usr/bin/cut -d'=' -f2"
elif system == 'Darwin':
    cmd = "/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I | grep CtlRSSI | awk '{ print $NF; }"
else:
    print("Unsupported os: {}".format(system))

dbm = os.popen(cmd).read()
if dbm:
    dbm_num = int(dbm)
    quality = 2 * (dbm_num + 100)
    print("{0} dbm_num = {1}%".format(dbm_num, quality))
else:
    print("Wifi router connection signal strength not found") 
```

为了从我的计算机所在的位置获得最高的 wifi 质量，我移动/旋转了我的天线，直到我收到最高质量。为了查看实时质量，我使用以下脚本运行了上述脚本：

```
watch -n0.1 "python getwifiquality.py" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-07T01:19:42.937

从[RSSI与RSS](http://dinomycle.blogspot.com/2011/04/difference-between-rssi-and-rss.html)：

> RSSI - 接收信号强度指示器 RSS - 接收信号强度
> 
> RSSI 是一个指标，RSS 是实际值。好的，现在您所说的指标是什么意思，指标意味着它可以是一个相对值，而 RSSI 始终是一个正值，并且 RSSI 没有单位。
> 
> 可以说RSSI是普通人可以理解的。RF 值始终以 dBm 为单位，并且这些值大部分时间都是负值。为了让人们更容易理解这些负值通过缩放转换为正值。
> 
> 例如，如果最大信号强度为`0 dBm`，最小为`-100 dBm`。我们可以像解释的那样缩放它。我们可以把`0 dBm`和多（RSS）作为`100`RSSI（即最大RSSI）和`-100 dBm`（或更少）作为`0 RSSI`（最小RSS）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-19T19:20:03.350

我知道这可能会迟到，但这可能会对将来的某人有所帮助。

我为 RSSI 取了 dBm 30-90 的值，并将其与 100-0 % 相关联。

我使用了基本的线性方程来得到答案。

```
y = mx + b 
```

我们知道 dBm 的 x 值为 30 和 90。我们知道 % 的 y 值为 100 和 0。

我们只需要找到斜率。所以我们可以让它成为线性的。

```
m = 100-0/30-90

  = 100/-60

  = -5/3

b = y - mx

 = 0 + 5/3*90
 = 150 
```

当您知道 RSSI 值时，要输入代码的最终方程式。

```
% = 150 - (5/3) * RSSI 
```

*请注意*，我确实采用了通常为负的 RSSI 值并乘以绝对值以获得正数。

```
quality = abs(RSSI)
% = 150 - (5/3) * quality 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-22T01:48:27.730

本文对mW、dBm和RSSI进行了更详细的解释

[http://madwifi-project.org/attachment/wiki/UserDocs/RSSI/Converting_Signal_Strength.pdf?format=raw](http://madwifi-project.org/attachment/wiki/UserDocs/RSSI/Converting_Signal_Strength.pdf?format=raw)

根据它RSSI没有一个单位。它是一个在 802.11 标准中定义并由网卡计算并发送到操作系统的值。网卡供应商应提供 dBm-RSSI 值的映射表。

很抱歉直接链接，但我找不到文件链接的原始页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-08T06:15:21.270

提到的伪代码不适用于所有范围，范围示例（-80dBm 到 0，-40dBm 到 100）。

将任何范围映射到 0 到 100 的通用简单逻辑。用法示例，用于以下代码 ConvertRangeToPercentage(-80,-40,-50)

```
int ConvertRangeToPercentage (int a_value_map_to_zero, int a_value_map_to_100, int a_value_to_convert)
{

   int percentage = 0;

   if (a_value_map_to_zero < a_value_map_to_100)
   {
      if (a_value_to_convert <= a_value_map_to_zero)
      {
         percentage = 0;
      }
      else if (a_value_to_convert >= a_value_map_to_100)
      {
         percentage = 100;
      }
      else
      {
         percentage = (a_value_to_convert - a_value_map_to_zero) * 100 / (a_value_map_to_100 - a_value_map_to_zero);
      }
   }
   else if (a_value_map_to_zero > a_value_map_to_100)
   {
      if (a_value_to_convert >= a_value_map_to_zero)
      {
         percentage = 0;
      }
      else if (a_value_to_convert <= a_value_map_to_100)
      {
         percentage = 100;
      }
      else
      {
         percentage = (a_value_to_convert - a_value_map_to_zero) * 100 / (a_value_map_to_100 - a_value_map_to_zero);
      }
   }
   else
   {
      percentage = 0;
   }

   return percentage;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-29T20:36:54.407

好的..我同意...但是为什么会这样：

```
 Quality=29/100  Signal level=-78 dBm
 Quality=89/100  Signal level=-55 dBm
 Quality=100/100 Signal level=-21 dBm 
```

这与公式百分比=质量/2 - 100 不一致。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-12T12:08:17.297

此外，您可以尝试反转这个将 dBm 转换为百分比的 Bash 函数：

```
#!/bin/bash

function dbmtoperc { # Convert dBm to percentage (based on https://www.adriangranados.com/blog/dbm-to-percent-conversion)
  dbmtoperc_d=$(echo "$1" | tr -d -)
  dbmtoperc_r=0
  if [[ "$dbmtoperc_d" =~ [0-9]+$ ]]; then
    if ((1<=$dbmtoperc_d && $dbmtoperc_d<=20)); then dbmtoperc_r=100
    elif ((21<=$dbmtoperc_d && $dbmtoperc_d<=23)); then dbmtoperc_r=99
    elif ((24<=$dbmtoperc_d && $dbmtoperc_d<=26)); then dbmtoperc_r=98
    elif ((27<=$dbmtoperc_d && $dbmtoperc_d<=28)); then dbmtoperc_r=97
    elif ((29<=$dbmtoperc_d && $dbmtoperc_d<=30)); then dbmtoperc_r=96
    elif ((31<=$dbmtoperc_d && $dbmtoperc_d<=32)); then dbmtoperc_r=95
    elif ((33==$dbmtoperc_d)); then dbmtoperc_r=94
    elif ((34<=$dbmtoperc_d && $dbmtoperc_d<=35)); then dbmtoperc_r=93
    elif ((36<=$dbmtoperc_d && $dbmtoperc_d<=38)); then dbmtoperc_r=$((92-($dbmtoperc_d-36)))
    elif ((39<=$dbmtoperc_d && $dbmtoperc_d<=51)); then dbmtoperc_r=$((90-($dbmtoperc_d-39)))
    elif ((52<=$dbmtoperc_d && $dbmtoperc_d<=55)); then dbmtoperc_r=$((76-($dbmtoperc_d-52)))
    elif ((56<=$dbmtoperc_d && $dbmtoperc_d<=58)); then dbmtoperc_r=$((71-($dbmtoperc_d-56)))
    elif ((59<=$dbmtoperc_d && $dbmtoperc_d<=60)); then dbmtoperc_r=$((67-($dbmtoperc_d-59)))
    elif ((61<=$dbmtoperc_d && $dbmtoperc_d<=62)); then dbmtoperc_r=$((64-($dbmtoperc_d-61)))
    elif ((63<=$dbmtoperc_d && $dbmtoperc_d<=64)); then dbmtoperc_r=$((61-($dbmtoperc_d-63)))
    elif ((65==$dbmtoperc_d)); then dbmtoperc_r=58
    elif ((66<=$dbmtoperc_d && $dbmtoperc_d<=67)); then dbmtoperc_r=$((56-($dbmtoperc_d-66)))
    elif ((68==$dbmtoperc_d)); then dbmtoperc_r=53
    elif ((69==$dbmtoperc_d)); then dbmtoperc_r=51
    elif ((70<=$dbmtoperc_d && $dbmtoperc_d<=85)); then dbmtoperc_r=$((50-($dbmtoperc_d-70)*2))
    elif ((86<=$dbmtoperc_d && $dbmtoperc_d<=88)); then dbmtoperc_r=$((17-($dbmtoperc_d-86)*2))
    elif ((89<=$dbmtoperc_d && $dbmtoperc_d<=91)); then dbmtoperc_r=$((10-($dbmtoperc_d-89)*2))
    elif ((92==$dbmtoperc_d)); then dbmtoperc_r=3
    elif ((93<=$dbmtoperc_d)); then dbmtoperc_r=1; fi
  fi
  echo $dbmtoperc_r
} 
```

用法：

```
echo $(dbmtoperc -48)% # returns 81% 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-27T07:02:09.760

这就是我所做的：

```
long rssi = WiFi.RSSI();
rssi=-rssi;
int WiFiperct;
if (rssi<27){
WiFiperct =100;
}
else if(rssi>=27&&rssi<33){
  WiFiperct=150-(5/2.7)*rssi;
}
else if(rssi>=33&&rssi<36){
  WiFiperct=150-(5/3)*rssi;
}
else if(rssi>=36&&rssi<40){
  WiFiperct=150-(5/3.3)*rssi;
}
else if(rssi>=40&&rssi<80){
  WiFiperct=150-(5/3.5)*rssi;
}
else if(rssi>=80&&rssi<90){
  WiFiperct=150-(5/3.4)*rssi;
}
else if(rssi>=90&&rssi<99){
  WiFiperct=150-(5/3.3)*rssi;
}
else{
  WiFiperct=0;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-16T18:48:21.943

Airodump RXQ 在现实世界的条件下非常有用......“接收质量以**过去 10 秒内成功接收的数据****包**（管理和数据帧）的百分比来衡量。” “它在所有管理和数据帧上测量。接收到的帧包含一个由发送接入点添加的序列号**。RXQ = 100**表示**所有数据包都是按数字顺序从接入点接收的，没有一个丢失********. 这就是线索，这使您可以从该值中读取更多内容。假设您获得了 100% 的 RXQ 和每秒所有 10 个（或任何速率）信标。现在突然间 RXQ 降至 90 以下，但您仍然捕获所有发送的信标。因此，您知道 AP 正在向客户端发送帧，但您听不到客户端或 AP 向客户端发送的声音（需要靠近一点）。”******

# php - 如何处理从书籍表查询返回的多个作者

> ID：15797921
> 
> 赞同：1
> 
> 时间：2013-04-03T20:55:01.600
> 
> 标签：php, mysql, database

以前我将作者姓名存储到我的书籍表中，这不是最佳做法。所以我将作者外包给一个单独的表，并通过数据透视表加入数据。我的查询如下所示：

```
SELECT  b.id, b.title, CONCAT(a.fname,' ' , a.lname) AS author_name, a.id as author_id
FROM books b
LEFT JOIN author_book ab ON b.id = ab.book_id
LEFT JOIN authors a ON ab.author_id = a.id
WHERE b.id = '406' 
```

到目前为止一切正常，但我的查询不仅返回一行数据，而且返回其中两个数据——每个作者一个。

```
id  | title                          |  author_name      | author_id
--------------------------------------------------------------------
406 | The world of the wheel of time | Robert Jordan     | 2
406 | The world of the wheel of time | Teresa Patterson  | 3 
```

但我真的只想输出一本有多个作者的书——而不是一个作者的多本书。在这个例子中，这样做并不难，但是当我搜索带有短篇小说的书籍时会发生什么？多达十几位作者参与其中。然后返回的结果可能类似于此示例：

```
id  | title                          |  author_name      | author_id
--------------------------------------------------------------------
103 | Here Be Monsters               | M.T. Murphy       | 12
103 | Here Be Monsters               | S.M. Reine        | 6
103 | Here Be Monsters               | India Drummond    | 182
103 | Here Be Monsters               | Anabel Portillo   | 643
103 | Here Be Monsters               | Jeremy C. Shipp   | 35
103 | Here Be Monsters               | Samantha Anderson | 58
103 | Here Be Monsters               | Sara Reinke       | 26
521 | Science Fiction Megapack       | Fritz Leiber      | 19
521 | Science Fiction Megapack       | C.M. Kornbluth    | 27
521 | Science Fiction Megapack       | Philip K. Dick    | 24
521 | Science Fiction Megapack       | E.C. Tubb         | 46
521 | Science Fiction Megapack       | John Glasby       | 67 
```

我可以尝试使用 GROUP BY id 或标题，但作者会迷路，但只有一个。（一些php数组操作可能是一个解决方案？）。您将如何输出这些数据，以便每本书与所有作者保持单一实体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:58:31.007

您可能要考虑`GROUP_CONCAT()` 这样使用：

```
SELECT
  b.id,
  b.title,
  GROUP_CONCAT(CONCAT(a.fname,' ' , a.lname)) AS author_names,
  GROUP_CONCAT(a.id) as author_ids
FROM books b
LEFT JOIN author_book ab
  ON b.id = ab.book_id
LEFT JOIN authors a
  ON ab.author_id = a.id
WHERE b.id = '406'
GROUP BY b.id 
```

这会给你这样的输出：

```
406 | The world of the wheel of time | Robert Jordan,Teresa Patterson     | 2,3 
```

# ajax - Magento - 在表单中使用 ajax 更新时事通讯弹出代码

> ID：15797922
> 
> 赞同：0
> 
> 时间：2013-04-03T20:55:04.640
> 
> 标签：ajax, forms, magento, newsletter

我有以下在 cms 页面中使用的代码弹出我遇到的问题是，如果您将电子邮件地址输入字段留空并点击提交（在“获取代码”按钮的情况下，您会短暂看到红色验证消息，但随后隐藏表单，显示隐藏的 div。

为什么或如何阻止此过程，我希望它验证但继续显示隐藏的 div 内容。下面是代码。

```
<div id="pop-confirm" style="display: none;">
<h1 style="color: #000000; font-weight: bold;">THANKS!</h1>
<p>&nbsp;</p>
<h2>Use code: <strong>extra15</strong><br /> for 15% off your purchase.</h2>
</div>
<form id="newsletter-validate-detail" action="home/send" method="post" onSubmit="new Ajax.Updater({success:'newsletter-validate-detail'}, 'newsletter/subscriber/new', {asynchronous:true, evalScripts:false, onComplete:function(request, json){Element.hide('newsletter-validate-detail');Element.show('pop-confirm');}, onLoading:function(request, json){}, parameters:Form.serialize(this)}); return false;">
<div class="block-content">
<h2>ENTER YOUR EMAIL<br /> AND GET</h2>
<div class="form-subscribe-header">
<h1>15% OFF</h1>
<br />
<h1>EVERYTHING!</h1>
</div>
<div class="input-box"><input id="newsletter" class="input-text required-entry validate-email" title="Sign up for our newsletter" type="text" name="email" /></div>
<br />
<div class="actions"><button class="button" title="Get Code" type="submit"><span><span>Get Code</span></span></button></div>
<br />
<p><em>* Promotion ends April 6th</em></p>
</div>
</form>
<script type="text/javascript">// <![CDATA[
        var newsletterSubscriberFormDetail = new VarienForm('newsletter-validate-detail');
// ]]></script> 
```

我对 ajax 很陌生，所以也许我做错了什么。

任何想法或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:44:20.797

尝试将您的 onSubmit 更改为以下内容：

```
onSubmit="if(newsletterSubscriberFormDetail.validator.validate()){ new Ajax.Updater({success:'newsletter-validate-detail'}, 'newsletter/subscriber/new', {asynchronous:true, evalScripts:false, onComplete:function(request, json){Element.hide('newsletter-validate-detail');Element.show('pop-confirm');}, onLoading:function(request, json){}, parameters:Form.serialize(this)}); } return false;"` 
```

这将在使用 AJAX 提交表单之前触发验证器。非常适合我:)

# ruby - 是否可以在 Ruby 中按键值对结构数组求和？

> ID：15797931
> 
> 赞同：1
> 
> 时间：2013-04-03T20:55:45.327
> 
> 标签：ruby, arrays, sorting, struct, sum

我正在探索结构。每个结构只有两个值：产品 ID 和数量。例如：

```
prodcode = 2473 , quantity = 1
prodcode = 2473 , quantity = 4
prodcode = 3328 , quantity = 6
prodcode = 2958 , quantity = 3
prodcode = 2473 , quantity = 7
prodcode = 2958 , quantity = 2
prodcode = 2473 , quantity = -1 
```

我想得到这样的结构的数量总和：

```
prodcode = 2473 , quantity = 11
prodcode = 3328 , quantity = 6
prodcode = 2958 , quantity = 5 
```

按数量降序排序将是一个加号。这是我用来创建有问题的结构数组的代码：

```
class Figs < Struct.new(:prodcode, :quantity)  
  def print_csv_record  
    prodcode.length==0 ? printf(",") : printf(prodcode)  
    quantity.length==0 ? printf(",") : printf(",", quantity.to_i)  
    printf("\n")  
  end  
end  

...  

for x in 0...global.length  
  p = Figs.new  
  p.prodcode = global[x][0]  
  p.quantity = global[x][1].to_i  
  figures.push(p)  
end 
```

结构数组是“数字”，但我得到

```
undefined local variable or method 'quantity' for main:Object (NameError) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:09:54.050

您可以使用哈希来聚合新结构中的数量：

```
MyStruct = Struct.new(:prodcode, :quantity)

struct_array.inject({}) do |m, s| 
  m[s.prodcode] ||= MyStruct.new(s.prodcode, 0)
  m[s.prodcode].quantity += quantity
  m
end.values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:17:31.297

比 PinnyM 的答案更冗长，但无论如何，这里有一个相同的建议。:-D

```
Product = Struct.new(:code, :quantity)

a = Product.new(100, 1)
b = Product.new(100, 3)
c = Product.new(100, 1)

d = Product.new(200, 2)
e = Product.new(200, 2)

products = [a, b, c, d, e] # start
results = {}               # for temporary counting
product_sums = []          # for creating the end structs

products.each do |product|
 results[product.code] ||= 0
 results[product.code] += product.quantity
end

p results
# => {100=>5, 200=>4}

results.each do |code, quantity|
  product_sums << Product.new(code, quantity)
end

p product_sums
# => [#<struct Product code=100, quantity=5>, #<struct Product code=200, quantity=4>] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:40:04.940

[`Enumerable#group_by`](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-group_by)并[`Enumerable#reduce`](http://www.ruby-doc.org/core-2.0/Enumerable.html#method-i-reduce)让您非常简单地做到这一点：

编辑：使用 OP 的类名，按降序添加排序和更清晰的 print_csv 方法

```
require 'csv'

class Figs < Struct.new(:prodcode, :quantity)
  def print_csv_record
    print to_a.to_csv
  end
end

a = [Figs[2473,1], Figs[2473,4], Figs[3328,6], Figs[2958,3],
     Figs[2473,7], Figs[2958,2], Figs[2473,-1]]

a.group_by(&:prodcode).
  map { |k,v| Figs[ k, v.map(&:quantity).reduce(:+) ] }.
  sort_by { |e| -e.quantity }

=> [#<struct Figs prodcode=2473, quantity=11>,
    #<struct Figs prodcode=3328, quantity=6>,
    #<struct Figs prodcode=2958, quantity=5>] 
```

# ruby - 这个“循环”如何结束？

> ID：15797937
> 
> 赞同：1
> 
> 时间：2013-04-03T20:56:03.637
> 
> 标签：ruby

我正在将 github.com 上的一段 Ruby 代码重写为 Javascript。我在理解代码时没有任何问题，除了下面的部分。问题是：如果没有“break”，“loop do”如何结束？

```
 def utf8_bytes(record_size, record_tag)
    Enumerator.new do |yielder|
      bits = compressed_bits record_size, record_tag
      loop do
        # Use the Huffman tree to decode the first character.
        node = tree_root
        while node < 0x100
          # p ['node', node]
          bit = bits.next
          # p ['bit', bit]
          node = (bit == 0) ? tree_left[node] : tree_right[node]
        end
        first_byte = node - 0x100
        # p ['utf8 start', first_byte]
        yielder << first_byte

        # The other characters are 10xxxxxx, where x'es are raw bits.
        2.upto utf8_char_bytes(first_byte) do
          byte = 0b10
          6.times do
            byte = (byte << 1) | bits.next
          end
          # p ['utf8 byte', byte]
          yielder << byte
        end
      end
    end
  end 
```

**更新**

感谢所有的答案，但不幸的是我仍然不明白到底发生了什么。如果我理解正确的话，它就像一个水桶。每次你把东西放进去，它都在被处理。并且“循环执行”的次数与放入其中的字节数一样多。

该函数只调用一次，如下所示：

```
 text = utf8_bytes(record_size, record_tag).to_a.pack('C*') 
```

但这也在 Enumerator 内部，所以我猜字节从一个桶滴到另一个桶。

任何状况之下。我已将该函数翻译成 Javascript。也许有人可以告诉我这是否正确？（抛开Javascript函数返回一个数组，抛开使用这样的数组可能不是很低效）

```
 function utf8_bytes( record_size, record_tag ) {
        var yielder = new Array();
        bits = compressed_bits( record_size, record_tag );
// compressed_bits returns an array of 0's and 1's
        var v=0;
        while( v<bits.length ) {
//              # Use the Huffman tree to decode the first character.
            var node = tree_root;
            while ( node < 0x100 ) {
//                  # p ['node', node]
                bit = bits[v++];
//                  # p ['bit', bit]
                node = (bit == 0) ? tree_left[node] : tree_right[node];
            }
            var first_byte = node - 0x100;
//              # p ['utf8 start', first_byte]
            yielder.push( first_byte );

//              # The other characters are 10xxxxxx, where x'es are raw bits.
            for (var m=2; m<=utf8_char_bytes(first_byte); m++ ){
                var mbyte = 2;
                for (var n=0; n<6; n++ ) {
                    mbyte = (mbyte << 1) | bits[v++];
                }
//                  # p ['utf8 byte', mbyte]
                yielder.push( mbyte );
            }
        }
        return( yielder );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:02:24.277

在`Enumerator::Yielder`中，该`yield`方法别名为`<<`。所以调用：

```
yielder << some_byte 
```

是相同的：

```
yielder.yield some_byte 
```

调用`yield`会阻塞控制流。`next`在 Enumerator 对象上调用（或等效的 c 函数）时，控件可以返回。如果`next`从不调用，则循环将不会继续，并将保持该状态，直到 Enumerator 超出范围并被垃圾回收。

您可以阅读[`Enumerator`](http://ruby-doc.org/core-2.0/Enumerator.html)课程以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:57:46.007

它似乎是一个枚举器（注意`Enumerator.new do |yielder|`。）我的猜测是每次将附加运算符 ( `<<`) 应用于时，控制流都会返回`yielder`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:50:27.050

循环永远不会自行结束，即此方法返回一个无限枚举器。

```
utf8_bytes(...).to_a # => never ends 
```

这些可能非常有用，因为您调用它们的块可以在使用整个（无限）枚举器之前返回：

```
def foo
  utf8_bytes(...).each do |byte|
    return byte if is_it_what_youre_looking_for?(byte)
  end
  # You'll never get here!
end 
```

以类似的方式，仅获得几个值很有用。例如：

```
utf8_bytes(...).first(100) # => array of length 100 
```

要使用更简单的“无限”枚举器，您可以使用`0..Float::INFINITY`而不是调用`utf8_bytes`.

# java - 无法通过反射调用非静态方法（Java）

> ID：15797943
> 
> 赞同：1
> 
> 时间：2013-04-03T20:56:24.857
> 
> 标签：java, reflection, methods, non-static

我在通过反射调用非静态方法时遇到问题。我的代码如下。当我尝试执行“ClassnameRemoved.printMessageToLogger(Level.INFO, "Test");”时，我得到“在 Logger 类中找不到方法 'log'。这是一个普通的 Java 类，因此您可能正在使用修改过的/ outdata Java 版本。”。提前致谢！

```
private static void printMessageToLogger(Level lvl, String message) {
    try{
        Class<?> clazz = Class.forName("net.packgeName.omitted.Main");
        Field logger = clazz.getDeclaredField("tcLog");
        Method logMethod = logger.getDeclaringClass().getDeclaredMethod("log", Level.class, String.class);
        logMethod.invoke(logger, lvl, message);
    }
    // catch methods omitted to save space
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T20:57:26.667

如果方法不是静态的，则需要该类的实例。

看[这个例子](http://www.java2s.com/Code/Java/Reflection/ObjectReflectioncreatenewinstance.htm)：

```
Class classDefinition = Class.forName(className);
object = classDefinition.newInstance(); 
```

# c - GNU Make：同一目标中多个二进制文件的不同依赖项？

> ID：15797944
> 
> 赞同：1
> 
> 时间：2013-04-03T20:56:26.253
> 
> 标签：c, makefile, dependencies, target

首先，我对 GNU Make 不熟悉，所以如果我陈述了一些可笑的错误概念，请纠正它们而不是取笑我，谢谢。

我想要一个默认目标来构建具有不同依赖项的多个可执行文件，但我无法弄清楚。这是我正在使用的一个最小示例：

```
 CC = gcc-4.8
    CFLAGS = # some compiler flags
    LDFLAGS = # some linker flags
    SOURCES = prog1.c prog2.c
    OBJECTS = $(SOURCES:.c=.o)
    TARGET = prog1 prog2

    $(TARGET) : $(OBJECTS)
            $(CC) $(CFLAGS) -o prog1 prog1.o $(LDFLAGS)
            $(CC) $(CFLAGS) -o prog2 prog2.o $(LDFLAGS)

    .PHONY: clean

    clean:
            @rm -f $(TARGET) $(OBJECTS) core 
```

但是，正如您所看到的，虽然`prog2`与 完全无关`prog1.c`，但编辑`prog1.c`将导致重新链接`prog2`. 有什么办法可以防止这种情况发生吗？

（另外，如果有人能指导我学习 GNU Make 的好教程，我将不胜感激。官方文档非常庞大......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:17:54.997

每个目标都必须有自己的一套先决条件；如果你写：

```
foo bar: biz baz 
```

这意味着“foo 取决于 biz 和 baz，bar 也取决于 biz 和 baz”。你想写：

```
prog1: prog1.o
        $(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ $(LDLIBS)
prog2: prog2.o
        $(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ $(LDLIBS) 
```

或者，您可以在同一规则中编写两个目标并分别定义先决条件：

```
prog1 prog2:
        $(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ $(LDLIBS)
prog1: prog1.o
prog2: prog2.o 
```

有很多很多的方法可以使这个更复杂并减少打字。这就是 make 的全部意义所在。

**更新**：

要默认同时构建两个目标，请使用

```
all: prog1 prog2

prog1 prog2:
        $(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ $(LDLIBS)
prog1: prog1.o
prog2: prog2.o 
```

`all`第一个目标在哪里。

# javascript - 在流星中加载时将启动参数传递给 dojo 工具包

> ID：15797947
> 
> 赞同：0
> 
> 时间：2013-04-03T20:56:30.380
> 
> 标签：javascript, dojo, meteor

我正在尝试在流星 js 中使用 Dojo 框架

根据 dojo 文档，您需要在标签内传递启动参数，如下所示：

```
<script src="../dojo/dojo.js" data-dojo-config="async: true"></script> 
```

具体来说， data-dojo-config 参数

如果我将 dojo.js 放入 client/lib 文件夹，则流星内部逻辑会自动生成一个标签，但我不知道如何修改或将参数添加到此脚本标签中。有没有合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:18:14.150

您也可以简单地使用一个名为“dojoConfig”的全局变量来做同样的事情。它必须在浏览器解析 dojo.js 脚本之前定义。

```
<script type="text/javascript">
    var dojoConfig = {
        async: true
    };
</script> 
```

这会成功的。我得到了我刚刚发布的内容和一个常规的 dojo.js 脚本标签，并且 dojo 在我的流星客户端中工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:08:21.073

在这种情况下，您可能希望将 dojo 工具包放在`/public`文件夹中，这样流星就不会触及其 javascript，然后您可以根据需要手动添加标签。

目前生成是自动化的，所以不可能告诉流星给道场一个特殊的规则。

`script`如果你想把你的东西留在里面，你也可以使用 jquery 或一些 js dom 来修改可能添加的标签流星`/client/lib`

```
$(function() {
    $('script[src=../dojo/dojo\\.js]').attr({data-dojo-config:true});
}) 
```

# objective-c - 当 applicationDidBecomeActive 时加载 Title ViewController：

> ID：15797957
> 
> 赞同：1
> 
> 时间：2013-04-03T20:57:00.420
> 
> 标签：objective-c, ios6, multitasking, appdelegate

我创建了一个有两个视图控制器的应用程序。该应用程序打开一个标题屏幕（标题为“Title”的通用 UIViewController），并与作为自定义类的第二个视图（OSViewController 标题为“MapView”）的 segue 连接。实际上，应用程序在进入后台状态时会暂停，因此它会在您离开的地方打开，这通常是在 MapView 中。

我想知道当应用程序激活时我需要做什么才能让应用程序在标题屏幕上启动。最好，如果它不活动超过 1 分钟，我希望它打开到标题屏幕。从我一直在阅读的内容来看，似乎我会在我的 AppDelegate 中调用 applicationDidBecomeActive: 方法来编写代码。请提供我要放入 applicationDidBecomeActive: 方法的代码（如果这是放置它的正确位置）当从非活动状态转换到活动状态时，这会将我的应用程序重新打开到标题屏幕。我的应用程序快完成了，但我想解决这个问题，但我没有太多处理应用程序状态的经验。在此先感谢您的时间。

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:09:11.610

您还可以将一个类注册为“didBecomeActive”通知的观察者。你应该把它放在你的类的 viewDidLoad 或 init 方法中。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(willBecomeActive:) name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

在这种情况下，`willBecomeActive:`是您在类中定义的方法，当应用再次激活时会调用该方法。这可能看起来像这样：

```
- (void)willBecomeActive:(NSNotification *)notification {
    if (self.navigationController.topViewController == self) {
        [self.navigationController popToRootViewControllerAnimated:YES];
    }
} 
```

您还需要在 viewDidUnload 方法中添加它

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

**编辑：** 感谢@AMayes 的建议。在这种情况下，我不相信键/值观察是必要的。

# c# - 我怎样才能做到这一点，当我点击form2上的按钮时，它会影响form1（C＃）Winforms上的richtextbox？

> ID：15797958
> 
> 赞同：1
> 
> 时间：2013-04-03T20:57:05.703
> 
> 标签：c#, winforms, button, visual-studio-2012, richtextbox

我有一个 WinForms 应用程序。我希望能够在 form2 上按下一个按钮，然后该按钮将反映在 form1 上的 Richtextbox 上。

例如，如果 form2 上的按钮被编码为在单击时键入“Hello”，那么我希望“Hello”文本出现在 form1 上的 Richtextbox 上。

我该怎么做呢？我在网上搜索过，但找不到任何东西。

表格1

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Drawing.Text;
using System.Drawing.Printing;
using System.Diagnostics;

namespace Basic_Word_Processor_Version1._0._0
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            Instance = this;
        }
            private string filepath = null;
        private int checkPrint; 
```

代码

```
 public static Form1 Instance { get; private set; }

        // You still need this like in the first scenario.
        public RichTextBox RichTextBox1 { get { return richTextBoxPrintCtrl1; } }

        // This constructor should already exist. Just add the one line to it.

    } 
```

表格3

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Basic_Word_Processor_Version1._0._0
{
    public partial class Form3 : Form
    {
        public Form3()
        {
            InitializeComponent();
        }
        Form1.Instance.richTextBoxPrintCtrl1.Text = "";
    }
    public partial class Form1 : Form
{
    public static Form1 Instance { get; private set; }
    public RichTextBox RichTextBox1 { get { return richTextBoxPrintCtrl1; } }

    public Form1()
    {
        InitializeComponent();
        Instance = this;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:00:13.220

您可以通过属性公开控件。假设您在 form2 中有对 form1 的引用：

在表格 1 中：

```
public RichTextBox PrintCtrl1 { get { return richTextBoxPrintCtrl1; } } 
```

在表格 2 中：

```
form1.PrintCtrl1.Text = "Howdy from form2."; 
```

**更新：** 如果您在 form2 中没有对 form1 的引用，您也可以通过静态属性公开 form1 的实例：

在表格 1 中：

```
public static Form1 Instance { get; private set; }

// You still need this like in the first scenario.
public RichTextBox PrintCtrl1 { get { return richTextBoxPrintCtrl1; } }

// This constructor should already exist. Just add the one line to it.
public Form1()
{
    Instance = this;
} 
```

然后在 form2 中，您将执行此操作，而不是我上面显示的内容：

```
Form1.Instance.PrintCtrl1.Text = "Howdy from form2."; 
```

您的 Form1 类现在应该如下所示（加上您添加的任何其他内容）：

```
public partial class Form1 : Form
{
    public static Form1 Instance { get; private set; }
    public RichTextBox PrintCtrl1 { get { return richTextBoxPrintCtrl1; } }

    public Form1()
    {
        InitializeComponent();
        Instance = this;
    }
} 
```

您的 Form3 类应如下所示：

```
public partial class Form3 : Form
{
    public Form3()
    {
        InitializeComponent();
    }

    protected void button1_Click(object sender, EventArgs e)
    {
        Form1.Instance.PrintCtrl1.Text = "";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T16:00:45.947

我知道这个页面上已经有一个接受的答案，是的，虽然答案会“起作用”，但它很糟糕，原因有两个。首先，养成使用静态来获得事物可见性的习惯是一个非常不好的习惯，如果不必要地使用，就会违反 OOP 编程的概念。其次，通过执行公共静态表单实例，您已经使第二种表单不可重用。除了与第一种形式交互之外，它不能做任何事情。更好的方法是使用事件来促进表单之间的通信。以下代码示例演示了如何执行此操作。

表格1：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //Declare your new form
        Form2 form2 = new Form2();

        //Register the event
        form2.changeTextEvent += new EventHandler<TextChangedEventArgs>              (form2_changeTextEvent);

        //Show your new form
        form2.ShowDialog();
    }

    //Handler for the event from form 2
    void form2_changeTextEvent(object sender, TextChangedEventArgs e)
    {
        //Sets the text of this form equal to the text in our custom event args
        //Just a simple example of doing something with the event arg
        this.Text = e.Text;
    }
} 
```

* * *

表格2：

```
public partial class Form2 : Form
{
    //Declare your event
    public event EventHandler<TextChangedEventArgs> changeTextEvent;
    private String newText = "Custom events FTW!!!";

    public Form2()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //If the event is registered fire it, otherwise do nothing
        if (changeTextEvent != null)
        {
            //fire the event and give our custom event args some text
            changeTextEvent(sender, new TextChangedEventArgs(newText));
        }
    }
} 
```

* * *

自定义事件参数：

```
public class TextChangedEventArgs : EventArgs
{
    private String text;

    //Did not implement a "Set" so that the only way to give it the Text value is in 
    //the constructor
    public String Text
    {
        get { return text; }
    }

    public TextChangedEventArgs(String theText)
        : base()
    {
        text = theText;
    }
} 
```

以这种方式实现，Form2 现在是完全可重用的，并且可以在注册事件的任何控件/表单中触发事件。不同的形式可以以不同的方式对事件做出反应，但 form2 永远不需要改变。

# java - 同步收集

> ID：15797965
> 
> 赞同：7
> 
> 时间：2013-04-03T20:57:22.933
> 
> 标签：java, loops, synchronized

由于 c 已经是同步集合，因此它是线程安全的。但是为什么我们必须`synchronized(c)`再次使用迭代呢？真的很迷茫。谢谢。

" 用户在迭代返回的集合时必须手动同步它：

```
Collection c = Collections.synchronizedCollection(myCollection);
 ...
 synchronized(c) {
     Iterator i = c.iterator(); // Must be in the synchronized block
     while (i.hasNext()) {
         foo(i.next());
     }
} 
```

不遵循此建议可能会导致不确定的行为。" [http://docs.oracle.com/javase/6/docs/api/java/util/Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T20:59:03.260

任何`synchronized`集合实现可能做的最多的事情就是保证每个*单独的方法调用*是同步的。但是迭代必然涉及多个单独的方法调用，因此您，同步集合的用户，必须自己同步整个迭代。

例如，如果您没有在 上同步`c`，则集合的内容可能会在`i.hasNext()`和之间变化`i.next()`——它甚至可能从有元素变为没有更多元素，在这种情况下`i.next()`会失败。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T21:00:36.373

使类上的所有方法单独同步不会使这些方法的聚合（在组中调用它们）成为线程安全的。通过将 包装`Iterator`在一个同步块中，您可以保护迭代器的特定实例，使其不被多个线程调用的单个方法与其他调用穿插。

如果我`.add()`在安全的情况下调用一次，如果我需要`.add()`多次调用以完成一个逻辑语句，则不能保证其他人没有在我的`.add()`调用之间添加其他内容或删除其他内容，除非我阻止其他所有内容调用`.add()`（或任何其他方法）通过`synchronizing`代表集合的变量。

对集合上的`Iterator`各个方法进行多次调用，它们都必须包装在一个`synchronized`块中，以使它们作为单一`transaction`的一种执行。检查执行的源代码 `Iterator`你会明白我的意思。这是`List`它对底层实现进行多次单独调用的源代码，因此它们都需要由同一线程以不间断的顺序执行才能确定。

```
 @Override
    public Iterator<A> iterator() {
        if (tail == null)
            return emptyIterator();
    return new Iterator<A>() {
        List<A> elems = List.this;
        public boolean hasNext() {
        return elems.tail != null;
        }
        public A next() {
                if (elems.tail == null)
                    throw new NoSuchElementException();
        A result = elems.head;
        elems = elems.tail;
        return result;
        }
        public void remove() {
        throw new UnsupportedOperationException();
        }
    };
    } 
```

[源代码](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/AbstractList.java.html)显示`AbstractList.iterator()`了更复杂的逻辑，可以进行多次调用。

更好的包装器是将它们包装在`Immutable`集合中，然后您保证没有其他东西可以改变调用之间的基础集合。

# jquery - 在窗口左侧打开一个 jquery 模态对话框

> ID：15797970
> 
> 赞同：0
> 
> 时间：2013-04-03T20:57:34.020
> 
> 标签：jquery, dialog, position

我正在使用 jquery 模态对话框，我需要能够将其定位在页面的左侧，但我的代码无法设置位置。我究竟做错了什么？

```
var $dialog;
function dialog(url) {
    $.get(url, {}, function (html) {
        $dialog = $('<div id="dialog" title="Create New Case"></div>').dialog({
            autoOpen: false,
            modal: true,
            close: function () {
                $("#dialog").remove();
            }
        });
        $dialog.html(html);
        $dialog.dialog("option", "width", "auto");
        $dialog.dialog("option", "height", "auto");
        $dialog.dialog("option", "left", "1%");
        $dialog.dialog("open");
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:03:07.513

它不起作用，因为 jQueryUI 对话框没有名为`left`.

[按照文档中的说明](http://api.jqueryui.com/dialog/#option-position)使用该`position`选项。

请注意，您必须在打开对话框后设置位置，否则您会看到一些不寻常的结果，因为 jQueryUI 的位置功能不支持定位隐藏元素。

# emacs - 自动完成弹出窗口右侧的字母是什么？

> ID：15797971
> 
> 赞同：6
> 
> 时间：2013-04-03T20:57:35.310
> 
> 标签：emacs

例如，此屏幕截图中的“a”和“d”是什么意思？

![Emacs 的自动完成包的截图](https://i.imgur.com/XFk4ltx.png)

（一些背景细节：我在 OS X 10.8.3 上使用 Emacs 24.3，并且有问题的自动完成库是[auto-complete](http://cx4a.org/software/auto-complete/)）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T20:57:35.310

![自动完成文档中的表格图像，将每个符号映射到其含义](https://i.imgur.com/5uCf2jr.png)

这些字母是助记符，表明为什么`auto-complete`认为某个候选人值得你考虑。在屏幕截图中，许多候选者旁边都有“d”，因为它们来自[项目的`dict`Python-mode 文件](https://github.com/auto-complete/auto-complete/blob/master/dict/python-mode)。“a”是[缩写](http://www.gnu.org/software/emacs/manual/html_node/emacs/Abbrevs.html)……但我不能说更多，因为我还没有使用过`abbrev`这些东西。

`ac-define-source`无论如何，您可以通过探索它的[文档](http://auto-complete.org/doc/manual.html#ac-define-source)和[用法](https://github.com/search?l=&q=ac-define-source+repo%3Aauto-complete%2Fauto-complete&ref=advsearch&type=Code)来了解更多信息。

# python - 当主脚本在子模块中时正确初始化 sys.path

> ID：15797974
> 
> 赞同：6
> 
> 时间：2013-04-03T20:57:39.560
> 
> 标签：python, module, path, python-import

[根据docs](http://docs.python.org/2/library/sys.html#sys.path) ，第一个条目`sys.path`是当前脚本的目录。在以下设置中，我想更改此默认设置。想象以下目录结构：

```
src/
    core/
        stuff/
        tools/
            tool1.py
            tool2.py
    gui/
        morestuff/
        gui.py 
```

脚本`tool*.py`和`gui.py`旨在作为脚本运行，如下所示：

```
python src/core/tools/tool2.py
python src/gui/gui.py 
```

现在所有工具都导入自`src.core.stuff`，而 GUI 需要`gui.morestuff`。这意味着`sys.path[0]`应该指向`src/`，但它默认指向`src/core/tools/`or `src/gui/`。

我可以`sys.path[0]`在每个脚本中进行调整（使用如下结构，例如，在开头`gui.py`）：

```
if __name__ == '__main__':
    if sys.path[0]: sys.path[0] = os.path.dirname(os.path.abspath(sys.path[0])) 
```

然而，这有点多余，对于拥有数千个脚本的成熟代码库来说，它变得乏味。我也知道`-m`开关：

```
python -m gui.gui 
```

但这需要当前目录为`src/`.

有没有更好的方法来达到预期的结果，例如通过修改`__init__.py`文件？

**编辑**：这适用于 Python 2.7：

```
~$ python -V
Python 2.7.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:29:59.603

*唯一*官方批准的运行包中脚本的方法是使用`-m`标志。虽然您可以直接运行脚本并尝试`sys.path`在每个脚本中自己进行操作，但这可能会很痛苦。如果您在文件夹之间移动脚本，则`sys.path`可能还需要更改重写逻辑以反映新位置。即使你做`sys.path`对了，显式相对导入也不会正常工作。

现在，进行`python -m mypackage.mymodule`工作需要您位于项目的顶级文件夹（`src`在您的情况下），或者该顶级文件夹位于 Python 搜索路径上。要求您位于特定文件夹中很尴尬，并且您已经说过您不希望这样做。进入`src`搜索路径是我们的目标。

我认为最好的方法是使用`PYTHONPATH`环境变量将解释器指向您的项目`src`文件夹，以便它可以从任何地方找到您的包。

该解决方案设置简单（环境变量可以在您的 或其他等效位置自动设置`.profile`）`.bashrc`，并且适用于任意数量的脚本。如果您移动您的项目，只需更新您的环境设置，您就可以完成所有设置，而无需为每个脚本做更多的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T05:32:14.113

这里有三个基本选项。我在生产环境和个人项目中都经历了这三个方面。在许多方面，它们相互建立。但是，我的建议是直接跳到最后一个。

根本问题是您需要您的`./src`目录位于 python 搜索路径中。这就是 python 打包的真正意义所在。

**蟒蛇路径**

调整 python 路径的最直接的、用户定义的方法是通过环境变量`PYTHONPATH`。您可以在运行时设置它，执行以下操作：

```
PYTHONPATH=/src python src/gui/gui.py 
```

您当然也可以在您的全局环境中设置它，因此希望所有需要它的进程都能找到正确的`PYTHONPATH`. 但是，请记住，您将永远忘记一个。通常在凌晨 3 点，当您的`cron`任务最终运行时。

**网站包**

为避免需要环境变量，您的选择几乎是将您的软件包含在源路径中的现有条目中，或者找到一些其他方法来添加新的搜索路径。因此，这可能意味着将`src`目录的内容放入`/usr/lib/python2.7/site-packages`系统所在的位置或任何`site-packages`位置。

由于您可能不想将代码实际包含在站点包中，因此您可以为您的两个子包创建一个符号链接。

由于多种原因，这当然不太理想。如果您对命名不小心，那么机器上的每个 python 程序都会突然面临潜在的名称冲突。您正在向机器上的每个用户公开您的软件。如果更新了 python get，您可能会遇到问题。如果您添加一个新的子包，现在您必须创建一个新的符号链接。

更好的方法是`.pth`在站点包中的某个位置包含一个文件。当python遇到这些文件时，它会将内容（应该是目录的名称）添加到搜索路径中。这避免了必须记住为每个新子包添加新符号链接的问题。

**virtualenv 和打包**

最好的解决方案就是硬着头皮做真正的python打包。这与强大的工具（如[virtualenv 和 pip](http://www.virtualenv.org/en/latest/) ）相结合，让您拥有一个隔离（或半隔离）的 Python 环境。

在 virtualenv 下，您将`site-packages`只为您的项目定制一个，您可以轻松地将软件安装到其中，避免早期解决方案的所有问题。virtualenv 还可以轻松维护可执行脚本，以便它运行的 python 环境完全符合您的预期。

一个缺点是您必须编写和维护一个`setup.py`将指示`pip`（python 安装程序）将您的软件包含在 virtualenv 中的程序。内容将类似于：

```
!/usr/bin/env 蟒蛇
# -*- 编码：utf-8 -*-

从 distutils.core 导入设置

设置（
    名称='我的项目'，
    package_dir={'myproject': 'src'},
    脚本=['src/gui/gui.py', 'src/core/tools/tool1.py', 'src/core/tools/tool2.py']
)

```

所以，要设置这个环境，它看起来像这样：

```
virtualenv env
env/bin/pip install -e setup.py 
```

要运行您的脚本，您只需执行以下操作：

```
env/bin/tool1.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:59:23.617

> 我想这样做是为了避免首先设置 PYTHONPATH

您可以在其他地方`sys.path`使用该模块来挂钩 Python 的初始化，该[`site`](http://docs.python.org/2/library/site.html)模块（默认情况下）在 Python 初始化时自动导入。

基于此代码`site.py`...

```
# Prefixes for site-packages; add additional prefixes like /usr/local here
PREFIXES = [sys.prefix, sys.exec_prefix] 
```

...看起来好像该文件的目的是在安装后修改该文件，这是一种选择，尽管它还提供了其他可以影响的方式`sys.path`，例如通过将`.pth`文件放在`site-packages`目录中的某个位置。

假设所需的结果是使代码“开箱即用”，这将起作用，但仅适用于单个系统上的所有用户。

如果您需要它在多个系统上工作，那么您必须对所有系统应用相同的更改。

对于部署来说，这没什么大不了的。事实上，许多 Python 包已经做了类似的事情。例如在 Ubuntu 上...

```
~$ dpkg -L python-imaging | grep pth
/usr/share/pyshared/PIL.pth
/usr/lib/python2.7/dist-packages/PIL.pth 
```

...但是，如果您的目的是让多个并发开发人员更容易，每个开发人员都使用自己的系统，那么您最好坚持使用当前选项，将一些“样板”代码添加到每个打算运行的 Python 模块作为脚本。

可能还有另一种选择，但这取决于您要实现的目标。

# android - 从 android 发布到 Ruby on Rails 应用程序

> ID：15797979
> 
> 赞同：8
> 
> 时间：2013-04-03T20:57:48.837
> 
> 标签：android, ruby-on-rails, http, post

所以我试图从我正在编写的 Android 应用程序发布到 Rails 应用程序。我可以从 Rails 应用程序中成功发布。我还能够使用名为 Simple Rest 客户端的 chrome 插件成功发布。

![在此处输入图像描述](https://i.stack.imgur.com/UGHqV.png)

当我尝试从 Android 应用程序发布时，它会点击 rails 应用程序，但会创建一个空帖子。rails 没有接收到任何输入数据。

我读到第 3 方应用程序只能根据身份验证从 Rails 应用程序获取，因此为了确保这不是我遇到的问题，我将其添加到我的 Rails 配置中。

```
# de-activate tolken auth
config.action_controller.allow_forgery_protection = false 
```

在这一点上，我不确定我的问题出在哪里，是我的 Rails 后端还是我的 Android 客户端。

好的，所以我试图达到的控制器中的 Rails post 方法就在这里

```
# POST /orders
  # POST /orders.json
  def create
    @order = Order.new(params[:order])

    respond_to do |format|
      if @order.save
        format.html { redirect_to @order, notice: 'Order was successfully created.' }
        format.json { render json: @order, status: :created, location: @order }
      else
        format.html { render action: "new" }
        format.json { render json: @order.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是用于发送 Post 请求的 Android java 代码。这是传递我要发布的用户输入数据的方法

```
private void postInformationtoAPI() {

                showToast("POSTING ORDER");
                List<NameValuePair> apiParams = new ArrayList<NameValuePair>();
                apiParams.add(new BasicNameValuePair("drinks_id", GlobalDrinkSelected));
                apiParams.add(new BasicNameValuePair("name", GlobalEditTextInputName));
                apiParams.add(new BasicNameValuePair("paid" , GlobalIsPaid));

                bgtPost = new BackGroundTaskPost(MAP_API_URL_POST_ORDER, "POST", apiParams);
                bgtPost.execute();

                goToOrderCompleted();

            } 
```

这就是它传递给的类，用于执行 HTTP POST。

```
public class BackGroundTaskPost extends AsyncTask<String, String, JSONObject> {

     List<NameValuePair> postparams = new ArrayList<NameValuePair>();
     String URL = null;
     String method = null;

     static InputStream is = null;
     static JSONObject jObj = null;
     static String json = "";

     public BackGroundTaskPost(String url, String method, List<NameValuePair> params) {
      this.URL = url;
      this.postparams = params;
      this.method = method;

      for (int i = 0; i < postparams.size(); i++){
          String test = postparams.get(i).toString();
          Log.d("This is in the lisht:", test);
      }
     }

     @Override
     protected JSONObject doInBackground(String... params) {
      // TODO Auto-generated method stub
      // Making HTTP request
      try {
       // Making HTTP request
       // check for request method

       if (method.equals("POST")) {
        // request method is POST
        // defaultHttpClient

           DefaultHttpClient httpClient = new DefaultHttpClient();
           HttpPost httpPost = new HttpPost(URL);
           httpPost.setEntity(new UrlEncodedFormEntity(postparams, HTTP.UTF_8));
           Log.i("postparams : ", postparams.toString());
           httpPost.setHeader("Content-Type", "application/json");
           httpPost.setHeader("Accept", "application/json");

           HttpResponse httpResponse = httpClient.execute(httpPost);
           HttpEntity httpEntity = httpResponse.getEntity();
           is = httpEntity.getContent();

       } else if (method == "GET") {
        // request method is GET
        DefaultHttpClient httpClient = new DefaultHttpClient();
        String paramString = URLEncodedUtils
          .format(postparams, "utf-8");
        URL += "?" + paramString;
        HttpGet httpGet = new HttpGet(URL);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
       }

      } catch (UnsupportedEncodingException e) {
       e.printStackTrace();
      } catch (ClientProtocolException e) {
       e.printStackTrace();
      } catch (IOException e) {
       e.printStackTrace();
      }

      try {
          Log.i("Logging out *is* before beffered reader", is.toString());
       BufferedReader reader = new BufferedReader(new InputStreamReader(
         is, "utf-8"), 8);
       Log.i("Logging out *is* after beffered reader", is.toString());
       StringBuilder sb = new StringBuilder();
       String line = null;
       while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
       }
       is.close();
       json = sb.toString();
       Log.i("json: ",json);
      } catch (Exception e) {
       Log.e("Buffer Error", "Error converting result " + e.toString());
      }

      // try parse the string to a JSON object
      try {
       jObj = new JSONObject(json);
      } catch (JSONException e) {
       Log.e("JSON Parser", "Error parsing data TEST " + e.toString());
      }

      // return JSON String
      return jObj;

     }
    } 
```

这是上面类中 postparams 的日志，所以我知道实际上正在发送数据

```
04-03 21:36:23.994: I/postparams :(690): [drinks_id=41, name=Dave, paid=True] 
```

这就是 Log Cat 显示为来自服务器的响应

```
04-03 20:56:08.247: I/json:(690): {"created_at":"2013-04-03T20:56:06Z","drinks_id":null,"id":1351,"name":null,"paid":null,"served":null,"updated_at":"2013-04-03T20:56:06Z"} 
```

我真的很难理解问题出在哪里，并且已经坚持了很长时间。任何见解将不胜感激。如果需要更多信息，请大声喊叫。

编辑：来自服务器的日志

这是来自简单 REST 客户端的成功帖子

```
2013-04-03T23:13:31+00:00 app[web.1]: Completed 200 OK in 15ms (Views: 8.7ms | ActiveRecord: 5.2ms)
2013-04-03T23:13:42+00:00 app[web.1]: Started POST "/orders.json" for 89.101.112.167 at 2013-04-03 23:13:42 +0000
2013-04-03T23:13:42+00:00 app[web.1]: Processing by OrdersController#create as JSON
2013-04-03T23:13:42+00:00 app[web.1]:   Parameters: {"updated_at"=>nil, "drinks_id"=>51, "id"=>1021, "name"=>"Test", "paid"=>true, "served"=>nil, "created_at"=>nil, "order"=>{"drinks_id"=>51, "name"=>"Test", "paid"=>true, "served"=>nil}}
2013-04-03T23:13:43+00:00 heroku[router]: at=info method=POST path=/orders.json host=fyp-coffeeshop.herokuapp.com fwd="89.101.112.167" dyno=web.1 connect=1ms service=25ms status=201 bytes=138
2013-04-03T23:13:43+00:00 app[web.1]: Completed 201 Created in 15ms (Views: 0.6ms | ActiveRecord: 13.2ms) 
```

这是来自 android 应用程序发布

```
2013-04-03T22:56:45+00:00 app[web.1]: Started POST "/orders.json" for 89.101.112.167 at 2013-04-03 22:56:45 +0000
2013-04-03T22:56:45+00:00 app[web.1]: Processing by OrdersController#create as JSON
2013-04-03T22:56:45+00:00 app[web.1]: Completed 201 Created in 23ms (Views: 2.2ms | ActiveRecord: 16.3ms)
2013-04-03T22:56:45+00:00 heroku[router]: at=info method=POST path=/orders.json host=fyp-coffeeshop.herokuapp.com fwd="89.101.112.167" dyno=web.1 connect=4ms service=37ms status=201 bytes=138 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T00:08:30.720

您正在设置 JSON 的内容类型，但实际上并未发送 JSON，您正在发送标准的 POST url 编码参数。

您需要实际发送一个 JSON 对象：

```
JSONObject params = new JSONObject();
params.put("drinks_id", GlobalDrinkSelected);
params.put("name", GlobalEditTextInputName);
params.put("paid", GlobalIsPaid);

StringEntity entity = new StringEntity(params.toString());
httpPost.setEntity(entity); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:23:25.843

问题是，当您在 Android 中构建 POST 时，您会覆盖实体（主体）。您最初设置它，然后再次设置它，有效地清除您已经设置的内容。

这是对的：

```
httpPost.setEntity(new UrlEncodedFormEntity(postparams)); 
```

但是几行之后，您将其覆盖为：

```
httpPost.setEntity(new StringEntity("UTF-8")); 
```

所以放弃第二个`setEntity()`电话。

您可以实现您想要做的 - 通过调整您的代码以 UTF-8 设置 POST 正文：

```
httpPost.setEntity(new UrlEncodedFormEntity(postparams, HTTP.UTF_8)); 
```

# javascript - JavaScript 方法预期的参数

> ID：15797980
> 
> 赞同：0
> 
> 时间：2013-04-03T20:57:50.967
> 
> 标签：javascript, methods

我想知道是否可以获取参数类型或 Javascript 本身中的方法所期望的参数数量？

类似于 getElementById.length 或 getElementById.arguments

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:02:06.593

> 获取参数类型

绝对不可能。JavaScript 是弱类型的。您需要查看文档以了解函数需要哪些参数。

> 获取方法期望的参数数量

是的。您可以使用函数对象的[`length`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/length)。它包含正式定义的参数的数量，但请注意，这些函数仍然是[可变参数](http://en.wikipedia.org/wiki/Variadic_function)，并且可以接受比它们`length`建议的更多或更少的参数。

> ```
> document.getElementById.length; 
> ```

例如，产量`0`（至少在 Opera 中，实现之间可能会有所不同）。

> `getElementById.arguments`

函数对象的[`arguments`属性已被](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/arguments)**弃用**，它会在调用期间包含该[`arguments`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)——而不是关于函数的一般信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:21:56.327

*“获取函数期望的参数类型”*

我们无法获得特定的预期参数类型`function`，因为`variables`在`javascript`任何时候都可以改变它们的性质。

例如：

```
function test(msg)
{
//something
} 
```

上面的函数可以像`test("hai")`, `test(123)`,一样调用`test(true)`。

* * *

可能您可以在其中获取任何函数的参数类型。如下所示，

```
test("hello");
function test(msg)
{
alert(typeof msg); //string
} 
```

# c# - 如何将数据从一个用户控件发送到另一个用户控件？

> ID：15797981
> 
> 赞同：1
> 
> 时间：2013-04-03T20:57:55.750
> 
> 标签：c#, wpf, xaml

假设我有这两个用户控件。当单击按钮时，如何将在 TextBox`ControlOne`中输入的数据传递到 TextBox ？`ControlTwo``ControlOne`

```
<UserControl x:Class="Project.ControlOne"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <StackPanel Orientation="Horizontal">
            <TextBox x:Name="MyTextBox" HorizontalAlignment="Center" VerticalAlignment="Center" Width="100" />
            <Button HorizontalAlignment="Center" VerticalAlignment="Center" Content="Send" Click="Button_Click" />
        </StackPanel>
    </Grid>
</UserControl>

...
namespace Project
{
    public partial class ControlOne : UserControl
    {

        public ControlOne()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {

        }
    }
}

<UserControl x:Class="Project.ControlTwo"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <StackPanel Orientation="Horizontal">
            <TextBox x:Name="MyTextBox" HorizontalAlignment="Center" VerticalAlignment="Center" Width="100" />
        </StackPanel>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:15:27.453

Your two user controls should have no knowledge of each other (unless one contains the other). That's why you can't "pass data" between them. The idea behind a user control is that you can drop it anywhere as many times as needed. If `ControlOne` knew about `ControlTwo`, what would happen if you used them separately? Or had three `ControlTwo`s in the same place?

The layer which contains both of them should be the one to read a value from one and set it to the other. If you want it to happen on the button press, you should look into [event handling](https://stackoverflow.com/a/11206080/298754) so the parent can know when the control's button is pressed.

# jquery - 根据导航决策保持 jQuery UI Accordion 内容处于活动状态

> ID：15797986
> 
> 赞同：0
> 
> 时间：2013-04-03T20:58:12.560
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-ui-accordion, submenu

我有一个使用 jQuery UI 手风琴的导航菜单。我有一个脚本，上面写着将活动的类样式应用于 li a。

```
 $(".secondaryMenu a").each(function() {   
                if (this.href == window.location.href) {
                        $(this).addClass("active");
                    }
                    }); 
```

我想说任何应用了此类的手风琴面板，然后内容面板在该页面上保持活动状态，这样用户单击链接并转到另一个页面，面板将保持活动状态，并且导航可见。因为我不需要将页面放在不同的目录中，所以我希望我可以只使用活动类，因为如果用户单击它，那么无论如何它们都将位于该页面和部分。

标记：

```
 <nav>
            <ul id="accordion3">
             <li><a href="somewhere.php">Link</a></li>
                <li><a href="somewhere.php">Link</a></li>
                <li><a href="somewhere.php">Link</a></li>
                <li class="accHeader"><a href="somewhere.php">Link</a></li>
             <ul>
                 <li><a href="somewhere.php">Link</a></li>
                  <li><a href="somewhere.php">Link</a></li>
                </ul>
                <li><a href="somewhere.php">Link</a></li>
                <li class="accHeader"><a href="somewhere.php">Link</a></li>
                <ul>
                 <li><a href="somewhere.php">Link</a></li>
                 <li><a href="somewhere.php">Link</a></li>
                 </ul>
                <li><a href="somewhere.php">Link</a></li>
             <li class="accHeader"><a href="somewhere.php">Link/a></li>
                 <ul>
                 <li><a href="somewhere.php">Link</a></li>
                 <li><a href="somewhere.php">Link</a></li>
                </ul>
                <li><a href="somewhere.php">Link</a></li>
            </ul>
            </nav> 
```

jQuery：

```
 $(function() {
                  $( "#accordion3" ).accordion({
                    navigation: true,
                    collapsible: true,
                    heightStyle: "content",
                    header:'.accHeader',
                    icons:  {header: 'acc-plus', activeHeader: 'acc-minus', },
                    active: $("#accordion3 .accHeader ul li a").hasClass('active')
                                });
                                      $("#accordion3 li a").click(function() {
                    window.location = $(this).attr('href');
               return false;

              }); 
```

我的问题是，如果标题下的任何链接应用了活动类，我如何才能使内容面板处于活动状态？

我可以考虑如何去做，但并没有真正做到。如果为真，则查找应用于标题下链接的活动类，然后保持内容活动。如果为假，则默认应为活动假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:07:35.457

只需使用 jQuery 的父母选择器来查找父母并应用该类。

```
$(".secondaryMenu a").each(function() {   
    if (this.href == window.location.href) {
        $(this).addClass("active").parents(".accHeader").addClass("active");
    }
}); 
```

我不确定我是否正确理解了您的问题，但如果我这样做了，那应该可以。

# r - 基于 R 树的方法，如 randomForest、adaboost：用不同格式解释相同数据的结果

> ID：15797987
> 
> 赞同：3
> 
> 时间：2013-04-03T20:58:13.663
> 
> 标签：r, machine-learning, random-forest, adaboost

假设我的数据集是一个`100 x 3`充满分类变量的矩阵。我想对响应变量进行二进制分类。让我们用以下代码组成一个数据集：

```
set.seed(2013)
y <- as.factor(round(runif(n=100,min=0,max=1),0))
var1 <- rep(c("red","blue","yellow","green"),each=25)
var2 <- rep(c("shortest","short","tall","tallest"),25)
df <- data.frame(y,var1,var2) 
```

数据如下所示：

```
> head(df)
  y var1     var2
1 0  red shortest
2 1  red    short
3 1  red     tall
4 1  red  tallest
5 0  red shortest
6 1  red    short 
```

我尝试用两种不同的方法对这些数据进行随机森林和 adaboost。第一种方法是按原样使用数据：

```
> library(randomForest)
> randomForest(y~var1+var2,data=df,ntrees=500)

Call:
 randomForest(formula = y ~ var1 + var2, data = df, ntrees = 500) 
               Type of random forest: classification
                     Number of trees: 500
No. of variables tried at each split: 1

        OOB estimate of  error rate: 44%
Confusion matrix:
   0  1 class.error
0 29 22   0.4313725
1 22 27   0.4489796

----------------------------------------------------
> library(ada)
> ada(y~var1+var2,data=df)

Call:
ada(y ~ var1 + var2, data = df)

Loss: exponential Method: discrete   Iteration: 50 

Final Confusion Matrix for Data:
          Final Prediction
True value  0  1
         0 34 17
         1 16 33

Train Error: 0.33 

Out-Of-Bag Error:  0.33  iteration= 11 

Additional Estimates of number of iterations:

train.err1 train.kap1 
        10         16 
```

第二种方法是将数据集转换为宽格式，并将每个类别视为一个变量。我这样做的原因是因为我的实际数据集在 var1 和 var2 中有 500 多个因子，因此，树分区总是将 500 个类别分成 2 个部分。这样做会丢失很多信息。要转换数据：

```
id <- 1:100
library(reshape2)
tmp1 <- dcast(melt(cbind(id,df),id.vars=c("id","y")),id+y~var1,fun.aggregate=length)
tmp2 <- dcast(melt(cbind(id,df),id.vars=c("id","y")),id+y~var2,fun.aggregate=length)
df2 <- merge(tmp1,tmp2,by=c("id","y")) 
```

新数据如下所示：

```
> head(df2)
   id y blue green red yellow short shortest tall tallest
1   1 0    0     0   2      0     0        2    0       0
2  10 1    0     0   2      0     2        0    0       0
3 100 0    0     2   0      0     0        0    0       2
4  11 0    0     0   2      0     0        0    2       0
5  12 0    0     0   2      0     0        0    0       2
6  13 1    0     0   2      0     0        2    0       0 
```

我将随机森林和 adaboost 应用于这个新数据集：

```
> library(randomForest)
> randomForest(y~blue+green+red+yellow+short+shortest+tall+tallest,data=df2,ntrees=500)

Call:
 randomForest(formula = y ~ blue + green + red + yellow + short +      shortest + tall + tallest, data = df2, ntrees = 500) 
               Type of random forest: classification
                     Number of trees: 500
No. of variables tried at each split: 2

        OOB estimate of  error rate: 39%
Confusion matrix:
   0  1 class.error
0 32 19   0.3725490
1 20 29   0.4081633

----------------------------------------------------
> library(ada)
> ada(y~blue+green+red+yellow+short+shortest+tall+tallest,data=df2)
Call:
ada(y ~ blue + green + red + yellow + short + shortest + tall + 
tallest, data = df2)

Loss: exponential Method: discrete   Iteration: 50 

Final Confusion Matrix for Data:
          Final Prediction
True value  0  1
         0 36 15
         1 20 29

Train Error: 0.35 

Out-Of-Bag Error:  0.33  iteration= 26 

Additional Estimates of number of iterations:

train.err1 train.kap1 
         5         10 
```

两种方法的结果是不同的。当我们在每个变量中引入更多级别时，差异更加明显，即`var1`和`var2`。我的问题是，既然我们使用完全相同的数据，为什么结果不同？我们应该如何解释这两种方法的结果？哪个更可靠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:19:20.080

虽然这两个模型看起来相同，但它们彼此根本不同——在第二个模型中，您隐含地包含了给定观测值可能具有多种颜色和多种高度的可能性。两种模型公式之间的正确选择将取决于您实际观察的特征。如果这些字符是排他的（即，每个观察值都是单一颜色和高度），那么模型的第一个公式将是正确的。但是，如果观察结果可能是蓝色和绿色，或任何其他颜色组合，则可以使用第二种公式。从查看原始数据的预感来看，第一个数据似乎是最合适的（即，观察值如何具有多个高度？？）。

另外，为什么您将 df2 中的逻辑变量列编码为 0s 和 2s 而不是 0/1？我徘徊是否会对拟合产生任何影响，具体取决于数据如何编码为因子或数字。

# java - JTable重绘表格后如何防止隐藏列出现

> ID：15797990
> 
> 赞同：0
> 
> 时间：2013-04-03T20:58:19.683
> 
> 标签：java, swing, jtable

我正在创建一个 JTable，它允许用户从视图中隐藏特定的列和/或行。为了隐藏列，我在 JTable 中使用 removeColumn 方法来删​​除负责显示数据的列。要删除行，我必须在我的表模型中实现一个扩展 AbstractTableModel 的方法，以从支持数据中删除行，然后调用 fireTablesRowDeleted(rowIndex, rowIndex)。

所有这一切都很好，除非我在隐藏一列后删除一行，因为 fireTablesRowDeleted 方法从头开始重绘表，所以该列被取消隐藏。有没有办法防止隐藏的列重新出现？我试图保留所有隐藏列索引的列表，因此一旦对 removeRow 的调用返回，我就可以重新隐藏它们，但这似乎不起作用。先感谢您。

# javascript - 检查是否可以通过 JavaScript 设置键盘焦点？

> ID：15797991
> 
> 赞同：0
> 
> 时间：2013-04-03T20:58:23.250
> 
> 标签：javascript, ios, dom, mobile-safari, browser-feature-detection

在 iOS 6.0 Safari 上，无法使用 JavaScript 将（硬件、屏幕上的）键盘焦点分配给输入元素，除非*当前*脚本正在运行以响应用户操作。

如何检测是否可以通过 JavaScript 设置键盘焦点？通过检查[用户代理](https://stackoverflow.com/questions/4460205/detect-ipad-iphone-webview-via-javascript)？

特征检测可能是不可能的：`element.focus()`奇怪*的是*设置`document.activeElement`为`element`. 但是，它不会导致屏幕键盘弹出，或者 - 如果已连接 - 硬件键盘获得焦点。

# c# - 查询 DBLP 数据库

> ID：15797997
> 
> 赞同：0
> 
> 时间：2013-04-03T20:58:34.837
> 
> 标签：c#, .net, rdf, dotnetrdf

我想使用这个端点查询 DBLP 数据库：

```
http://dblp.l3s.de/d2r/snorql/ 
```

我的代码片段：

```
String st = "";
String qry = "";
String uri_V;
String dguri_V;

uri_V = "http://dbpedia.org/sparql";
dguri_V = "http://dbpedia.org";

// Modify if need......
//String ns = "\""+TextBox1.Text.ToString()+"\"";
// String qry = "SELECT DISTINCT ?name WHERE { ?person foaf:name ?name.FILTER regex(str(?name),"+ns+").}";
if (radiosrch.SelectedIndex == 0)
{
    qry = "SELECT ?title WHERE {?game <http://purl.org/dc/terms/subject> <http://dbpedia.org/resource/Category:First-person_shooters> .?game foaf:name ?title .}ORDER by ?title";
}
else// if (radiosrch.SelectedIndex == 1) 
{
    // qry= "query for publisher."
    qry = "SELECT DISTINCT ?Concept WHERE {[] a ?Concept} LIMIT 10";
}

//Common
SparqlRemoteEndpoint endpoint = new SparqlRemoteEndpoint(new Uri(uri_V), dguri_V);
SparqlResultSet results = endpoint.QueryWithResultSet(qry);
foreach (SparqlResult result in results)
{
    Console.WriteLine(result.ToString());
    st = st + result.ToString() + "\n";
}
TextBox3.Text = st.ToString(); 
```

它适用于 dbpedia，但我找不到`uri_v`,`dguri_v`来使用端点查询 DBLP 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:46:35.007

如果您遇到端点的 SNORQL UI，您总是可以从页面标题和页眉中找到实际的 SPARQL 端点 URI，对于您的示例注释，它在两个地方都说明了以下内容：

> Snorql：探索[http://dblp.l3s.de/d2r/sparql](http://dblp.l3s.de/d2r/sparql)

这里的 URI 是您想要的`uri_v`变量。

通常根本不需要默认图形（您的`dguri_v`）参数，它恰好是 DBPedia 需要的。仅使用 SPARQL 端点 URI，您现在应该能够查询所需的端点，请确保使用`SparqlRemoteEndpoint`仅将端点 URI 作为参数的构造函数。

## 编辑

SNORQL 是一个 UI，因此它**不是**SPARQL 端点，它只是端点上的 HTML+JS 包装器。

如上所述，UI 将显示它正在查询的*实际 SPARQL 端点的 URI。*如果您想编写查询*端点*的代码（无论您使用的是什么工具包/API），这就是您需要的 URI。

# python - 正则表达式不匹配 re.match

> ID：15797999
> 
> 赞同：0
> 
> 时间：2013-04-03T20:58:36.530
> 
> 标签：python, regex

我正在尝试匹配解析响应的正则表达式.....

```
error code|error text|submission reference
2|missing or invalid fields|0 
```

它用`re.match(self.error_format)`

我试过 error_format 为：

```
(?P<status_code>[0-9]+)|(?P<status_message>.+)|(?P<gateway_message_id>[a-zA-Z0-9-]+) 
```

但这`error code|error text|submission reference`根据需要匹配该行而不是第二行。

也试过：

```
(?P<status_code>[0-9]+)\|(?P<status_message>.+)\|(?P<gateway_message_id>[a-zA-Z0-9-]+) 
```

但这根本不匹配。

**更新：**

我想要做的是仅匹配 2|缺失或无效字段|0，但全文是错误代码|错误文本|提交参考 2|缺失或无效字段|0，所以我需要跳过第一部分。

IE

```
msg = re.match('(?P<status_code>[0-9]+)\|(?P<status_message>.+)\|(?P<gateway_message_id>[a-zA-Z0-9-]+)', 'error code|error text|submission reference 2|missing or invalid fields|0') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:04:19.807

尽量不要匹配分隔符。像这样：

```
 (?P<status_code>^[0-9][^|]*)\|(?P<status_message>[^|]+)\|(?P<gateway_message_id>.+) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T21:06:39.007

```
msg = re.match('(?P<status_code>[0-9]+)\|(?P<status_message>[^|]+)\|(?P<gateway_message_id>[a-zA-Z0-9-]+)', '2|missing or invalid fields|0') 
```

完美匹配，然后您可以通过以下方式访问各个部分`msg.group('status_code')`

没有 \ 的版本也将匹配，但它只会捕获“2”并且不会填充第二行示例中的所有三个组。

如果你想在多行文本上运行它，你可以这样做

```
matches = re.finditer('(?P<status_code>[0-9]+)\|(?P<status_message>[^|]+)\|(?P<gateway_message_id>[a-zA-Z0-9-]+)', s)
for m in matches:
    print m.group('status_code'), m.group('status_message'), m.group('gateway_message_id') 
```

或者反过来：

```
for line in youtext.split('\n'):
    m = re.match(msg = re.match('(?P<status_code>[0-9]+)\|(?P<status_message>[^|]+)\|(?P<gateway_message_id>[a-zA-Z0-9-]+)', line)
    if m:
        print m.group('status_code'), m.group('status_message'), m.group('gateway_message_id') 
```

我认为这涵盖了所有选项，并且它们都不匹配您在第一部分中没有数字错误代码的第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:13:08.097

```
import re

tests = '''\
error code|error text|submission reference
2|missing or invalid fields|0'''.splitlines()

for test in tests:
    pat = r'''(?x)
        (?P<status_code>[^|]+)
        [|](?P<status_message>.+)
        [|](?P<gateway_message_id>[\w\d-]+)'''

    print(re.match(pat, test).groups()) 
```

产量

```
('error code', 'error text', 'submission')
('2', 'missing or invalid fields', '0') 
```