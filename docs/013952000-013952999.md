# StackOverflow 问答 13952000-13952999

# c++ - 加入特定的提升线程

> ID：13952000
> 
> 赞同：8
> 
> 时间：2012-12-19T11:58:30.687
> 
> 标签：c++, boost, boost-thread

我在一个进程中创建了大约 300 个 boost 线程。有没有办法根据线程 id 加入特定线程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T12:07:11.870

这取决于你如何保存`boost::thread`s。如果您将它们保存在容器中（使用`T = boost::thread*`），您可以简单地使用类似

```
for(iterator it = ctn.begin(); it != ctn.end(); ++it){
    if(it->get_id() == join_thread_id){
        it->join();
        break;
    }        
} 
```

但是，如果您不将线程保存在某处并且只使用`new boost::thread`而不保存指针，则这是不可能的，因为 boost 不提供任何自动簿记功能。

1.备注：请记住，您需要使用[`boost::thread::id`](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/thread_management.html#thread.thread_management.thread.id)来保存id。
2\. 备注：`std::map<boost::thread::id,boost::thread*>`对于此类任务可能会派上用场。

# drupal - Drupal 7 - 只读输入表单并应用样式

> ID：13952001
> 
> 赞同：9
> 
> 时间：2012-12-19T11:58:35.287
> 
> 标签：drupal, drupal-7, drupal-fapi

我需要将样式和只读属性应用于 drupal 表单的输入元素。我编写了以下代码：

```
$form['precio'] = array(
  '#type' => 'textfield',
  '#title' => t('Precio'),
  '#default_value' => ''.$precio,
  '#size' => 20,
  '#required' => TRUE,
  '#attributes' => array($inputAtributo => 1),
  '#description' => t('Modifica el precio '),
); 
```

并且在 `'#attributes' => array($inputAtributo => 1),`

在创建表单之前，我检查此输入是否应该是只读的并应用一些样式：

```
if ($tarifa !='' & $tarifa=='N')
$inputAtributo=" readonly style=\"background: none repeat scroll 0 0 #EAEAEA;\" ";
else
$inputAtributo = ""; 
```

这行得通，但我认为它的编码不正确

html代码显示如下：

```
<input id="edit-precio" class="form-text required" type="text" maxlength="128" size="20" value="258" name="precio" ="1"="" style="background: none repeat scroll 0 0 #EAEAEA;" readonly=""> 
```

我怎样才能更好地做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T12:12:42.770

`#attributes`必须是键值对数组。

所以数组应该看起来像

```
'#attributes' => array(
    'readonly'=>'readonly',
    'style'=>'background: none repeat scroll 0 0 #EAEAEA;'
); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T12:11:01.800

`#attributes`不打算与样式一起使用。您必须提供一个数组，其中包含重现 html 属性的键和值。而且 class 和 css 比直接在 html 中添加样式要好。

```
'#attributes' = array(
  'class' => array('readonly-input'),
  'readonly' => 'readonly',
) 
```

如果你想在 if 中添加它，你可以这样做：

```
if ($tarifa !='' & $tarifa=='N') {
  $form['precio']['#attributes']['class'][] = 'readonly-input';
  $form['precio']['#attributes']['readonly'] = 'readonly';
} 
```

请注意， readonly 属性也具有“readonly”作为值，因此它是[xhtml compliant](http://www.w3schools.com/tags/att_input_readonly.asp)。

现在在样式表中添加一个 CSS 规则：

```
.readonly-input { background: none repeat scroll 0 0 #EAEAEA; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:43:51.683

其他答案都是正确的。而不是使用*readonly*，我宁愿使用[#disabled](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#disabled)。此外，如果表单字段是只读的或禁用的，则不需要#required，因为用户无法更改该值。

```
$form['precio'] = array(
  '#type' => 'textfield',
  '#title' => t('Price'),
  '#default_value' => $precio,
  '#size' => 20,
  '#attributes' => array(
    'style'=>'background: none repeat scroll 0 0 #EAEAEA;'
  ),
  '#description' => t('Change the price'),
); 
```

如果值只需要显示而不是编辑，我宁愿使用[标记表单字段，而不是使用文本字段。](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#markup)

```
$form['precio'] = array(
  '#prefix' => '<span style="background: none repeat scroll 0 0 #EAEAEA">',
  '#suffix' => '</span>',
  '#markup' => t('<strong>Price:</strong> @price', array('@price' => $precio)),
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-01T14:48:23.073

要使我们的输入字段以 drupal 形式只读，请将值**TRUE**设置为**readonly**属性。

*例如，*

```
$user_name = variable_get('logined_user', 'guest_user');
$form['user_name'] = array(
    '#type' => 'textfield',
    '#title' => t('User Name'),
    '#required' => TRUE,
    '#default_value' => $user_name,
    '#description' => t('Logined user name'),
    '#attributes' => array(
        'readonly' => TRUE
    )
); 
```

# java - 如何以编程方式编辑多个文件中的 JSON 数据？

> ID：13952003
> 
> 赞同：2
> 
> 时间：2012-12-19T11:58:40.363
> 
> 标签：java, json, jenkins

我想编辑将提供不同服务器配置的部署配置 json 文件。

我知道将 JSON 转换为 Java 对象，反之亦然。还有 Xpath，比如查询 Json( [JsonPath](http://goessner.net/articles/JsonPath/) )。但是它们都不适合，因为在运行时我无法生成 Java 类并填充值。
JsonPath 有助于获取值，我正在寻找的是设置值。

是否有任何用于编辑 json 文件中键值的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:04:05.730

这个问题看起来更像是脚本语言的工作，而不是 Java 应用程序的工作。

但是当你想用 Java 做这件事时，也许 json-simple 可以帮助你。它是一个将 JSON 代码解析为键/值映射的库，您可以在其上执行任何映射操作，例如读取、添加、删除或更改键的值，并将它们序列化回 JSON 字符串。[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)

# php - Cron php 更新/插入另一个 sql 表

> ID：13952011
> 
> 赞同：3
> 
> 时间：2012-12-19T11:58:52.720
> 
> 标签：php, mysql, sql, foreach, cron

我在 php 方面不是那么好，所以我很感激你的帮助。

我需要将某些数据从一个 mysql 表更新或插入到同一台服务器的另一个 mysql 表！

购买的表具有相同的列，我想要的是用预先选择的中间值更新某些行！桌子：

```
|ID| |mid| |value1| |value2| 
```

我做了 php for update 或 insert 检查它是否存在的部分，但我需要它做的是重复每个给定的步骤 pos

所以我需要它来为我列出的每个中间重复这个脚本来完成

```
mid1 = 66
mid2 = 78
mid3 = 24

$con = mysql_connect("localhost","User","Pass");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db(baza, $con);

$result = mysql_query("SELECT * FROM table WHERE mid='???' ");

while($row = mysql_fetch_array($result))
{
$mid=$row['mid'];
$name=$row['value1'];
$alias=$row['value2'];
}

mysql_close($con);
?> 
<?php
$con2 = mysql_connect("localhost","user2","pass2");
if (!$con2)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db(baza2, $con2);

$query = "SELECT * FROM table WHERE mid='$mid' ";
$resulta = mysql_query($query) or die(mysql_error());

if (mysql_num_rows($resulta) )
{

mysql_query("UPDATE table SET mid='$mid', name='$name', alias='$alias'");
mysql_close($con2);
echo "1 record added1";
}
else
{
$sql="INSERT INTO table (mid, name, alias)
VALUES
('$mid','$name','$alias')";

if (!mysql_query($sql,$con2))
{
die('Error: ' . mysql_error());
}
echo "1 record added";
mysql_close($con2);
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:11:40.237

如果 2 个数据库在同一台服务器上，您可以设置您的帐户以访问这两个数据库。如果是这样，您可以通过这种方式在查询中简单地选择数据库：

```
mysql_query("SELECT * FROM my_database.my_table WHERE .."); 
```

你的代码将是..

```
$mid_array = array(66, 78, 24);
$con = mysql_connect("localhost","user","pass");
if(!$con) {
    die('could not connect: '.mysql_error());
}
mysql_select_db(baza, $con);

foreach($mid_array AS $mid) {
    $result = mysql_query("SELECT * FROM table WHERE mid = '".$mid."'";
    while($row = mysql_fetch_array($result)) {
       mysql_query("INSERT INTO baza2.table (mid, name, alias) VALUES ('".$row['mid']."', '".$row['name']."', '".$row['alias']."') ON DUPLICATE KEY UPDATE name = '".$row['name']."', alias = '".$row['alias']."'");
    }
}
mysql_close($con); 
```

You don't need a different query to check if the record with mid = .. already exists. You can simply handle this with the mysql ON DUPLICATE KEY UPDATE statement which will do this for you in only 1 query!

# sql - 多表连接查询

> ID：13952013
> 
> 赞同：1
> 
> 时间：2012-12-19T11:59:01.717
> 
> 标签：sql, join

我有两个具有多个连接的表，例如：

第一个表：Tbl_Flights，它有字段`City_From`和`City_To`，包含城市的键。此外，还有一个名为 的表`Tbl_Cities`，它具有唯一的计数器字段和城市名称字段。

如何创建一个查询，该查询可以打印出`Tbl_Flights`带有出发和到达城市名称的表中的所有航班，例如：

```
From               To
------------------------------
Moscow             New York
Amsterdam          Paris
Helsinki           Tallin 
```

双重`INNER JOIN`解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:01:05.483

> double INNER JOIN 能解决问题吗？

**是的，它确实。**但是它们是两个`INNER JOIN`s到同一个表`Cities`，这样就可以把选择的`CiteName`列分成两个不同的列`From`，`to`。

像这样：

```
SELECT 
  f.FlightName,
  FromCities.cityName "From",
  ToCities.CityName "To"
FROM Tbl_Flights f
INNER JOIN Cities FromCities ON f.City_From = FromCities.CityID
INNER JOIN Cities ToCities   ON f.City_To   = ToCities.CityID; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f2be0/3)

这会给你：

```
| FLIGHTNAME |      FROM |       TO |
-------------------------------------
|    Flight1 |    Moscow | New York |
|    Flight2 | Amsterdam |    Paris |
|    Flight3 |  Helsinki |   Tallin | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:06:49.897

类似的东西

```
SELECT f.FlightName, f.City_From, f.City_To
FROM Tbl_Flights f 
```

将是最基本的，它将列出每个航班以及它来自哪个城市以及它去哪个城市。

如果您需要更复杂的查询返回，请告诉我，我很乐意提供帮助。

编辑：

在查看了额外的信息后，我认为以下内容应该符合您的要求： [http](http://www.sqlfiddle.com/#!2/5d32c/17) ://www.sqlfiddle.com/#!2/5d32c/ 17 所以 Mahmoud Gamal 似乎很适合:)

```
SELECT f.FlightName, c.CityName as 'from', c1.CityName as 'to'
FROM Tbl_Flights f
join Tbl_Cities c on c.cityid = f.City_From 
join Tbl_Cities c1 on c1.cityid = f.City_To 
```

# c - strtol 重用参数

> ID：13952015
> 
> 赞同：6
> 
> 时间：2012-12-19T11:59:08.697
> 
> 标签：c, pointers, strtol

此代码似乎按预期工作，使用单个指针填充数字数组

```
#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>

int main(void)
{
    int arr[4], count = 0, i;
    char *p, s[32] = "  \t  10,  15  \n  ,20,   25  , ";

    p = s;
    do {
        arr[count++] = (int)strtol(p, &p, 10);
        while (isspace(*p) || *p == ',') p++;
    } while (*p);
    for (i = 0; i < count; i++) {
        printf("%d\n", arr[i]);
    }
    return 0;
} 
```

我的问题是：

在 strtol 中使用 p 作为 param1（源）和 &p 作为 param 2（第一个无效字符的地址）是否有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:16:27.570

是的，它是安全的。第一个参数是按值传递的，因此[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)有一个不受写入第二个参数的更改影响的本地副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:06:08.647

是的，这是有效的，因为您将指针保持在字符串的开头（指针 s）。考虑到你有这种情况：

```
#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>

int main(void)
{
    int arr[4], count = 0, i;
    char *p, *s;
    s = (char*)malloc(sizeof(char) * 15);
    strcpy(s, "  \t  10,  15  \n  ,20,   25  , ");

    p = s;
    do {
        arr[count++] = (int)strtol(p, &p, 10);
        while (isspace(*p) || *p == ',') p++;
    } while (*p);
    for (i = 0; i < count; i++) {
        printf("%d\n", arr[i]);
    }
    free(s);
    return 0;
} 
```

`strtol`将 p 指针移动到字符串中的某个位置。如果你打电话`free(p)`，你会有内存泄漏（如果它没有失败）。但是，由于您保留 s 指针，因此您将始终能够释放占用的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:10:37.183

是的，它是安全的。

请参阅[http://en.cppreference.com/w/cpp/string/byte/strtol](http://en.cppreference.com/w/cpp/string/byte/strtol)以获取完整的使用参考。示例的第 11 行说明了对第一个和第二个参数使用相同变量的调用。

# jquery - 如何在其外部创建 action= 时提交表单

> ID：13952017
> 
> 赞同：0
> 
> 时间：2012-12-19T11:59:29.897
> 
> 标签：jquery

我有这个表格，它是一个简单的顶部搜索栏，如下所示。没有提交按钮。当用户点击回车时，它会被提交。

```
<form style="display:inline;" method="GET" action="/printers/" class="searchForm">
<input placeholder="Hit enter to search..." type="text" class="topsearchbar" value="">
</form> 
```

然后是 jQuery。这是我从搜索框中获取值并将其添加到当前操作并需要提交的地方。但我只是不知道如何做到这一点。你能帮忙吗？

这是我的jQuery：

```
$(".searchForm").submit(function(event) {
event.preventDefault();

var action = ($(".searchForm").attr("action"));
var searchStr = ($(".topsearchbar").attr("value"));

if((action && searchStr) != '' &&  (action && searchStr).length >= 5)
{
alert('Ok to proceed')

var serverStr = action+'/'+searchStr;
alert(serverStr)
//Submit the form to serverStr. serverStr is the form's action

}
else
{
alert('To small to be any good')
}

}), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:13:49.690

在 keydown 事件上找到`enter==13`，当一切正常时，然后提交表单。

```
$('.topsearchbar').keydown(function(e){ 

if(e.which==13){
  var action = $(".searchForm").attr("action");
  var searchStr = $(".topsearchbar").attr("value");

  if((action && searchStr) != '' &&  (action.length && searchStr.length) >= 5){
     alert('Ok to proceed');
     $(".searchForm").submit();
     var serverStr = action+'/'+searchStr;
     alert(serverStr);
     //Submit the form to serverStr. serverStr is the form's action

  }
   else
  {
  alert('To small to be any good')
  }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:04:13.383

这是一种方法；

```
$(document).ready(function() {

    $('.searchForm').submit(function(event) {

        var $this = $(this),
            action = $this.attr('action'),
            query = $this.find('.topsearchbar').val(); // Use val() instead of attr('value').

        if (action.length >= 5 && query.length >= 5) {

          // Use URI encoding
          var newAction = (action + '/' + encodeURIComponent(query));
          console.log('OK', newAction); // DEBUG

          // Change action attribute
          $this.attr('action', newAction);

        } else {
          console.log('To small to be any good'); // DEBUG

          // Do not submit the form
          event.preventDefault();
        }
    });

});​ 
```

[jsfiddle](http://jsfiddle.net/SdnbW/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:01:39.617

您也可以像这样更改操作属性

```
jQuery('.searchForm').attr('action', 'new-value'); 
```

如果你这样做...

```
jQuery('.searchForm').submit(function() {
    // ...you have to return 'true' if you want to submit after your code
    return true;
    // ...and 'false' if you want to stop the submit.
    return false;
}); 
```

# groovy - 使用 groovy 在 Jenkins 中设置上游项目

> ID：13952018
> 
> 赞同：1
> 
> 时间：2012-12-19T11:59:30.983
> 
> 标签：groovy, jenkins

我想将 FreeStyleProject 复制到一个新工作，然后使用 groovy 为这个新工作设置一个新的上游项目。[我在FreeStyleProject 类](http://javadoc.jenkins-ci.org/hudson/model/FreeStyleProject.html)上找不到任何可以让我这样做的方法：设置一个新的上游项目。有没有其他方法或技巧可以做到这一点？

```
def x = "testproj"
def hi=hi.getItem(x)
hi.copy(x, "Copy"+x); 
def newjob=hi.getItem("Copy"+x)
//newjob.setUpstreamProject("bar") //<<--?
  def di = newjob.getUpstreamProjects()

     for ( y in di ) {

      println(y.name)
} 
```

**更新：** 澄清：

作业 A ====> 作业 B（A 是上游）

我想复制两个工作，所以我得到我

Job A' 和 Job B' 然后设置 A' 或 B' 所以我得到 A' =====> Job B' （A' 是上游）

我想我需要删除一个构建触发器并创建一个新的构建触发器（这似乎是创建上游/下游概念的原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:34:19.437

使用两个 FreeStyle 项目和一个下游项目的示例，此片段将找到 TestTop 并将它们设置为现有的 TopTest2。**这个概念是在项目的getPublishersList**的帮助下获取构建触发器，然后获取这些的 hudson.tasks.BuildTrigger.class。

为每一个做一个
发布列表。**删除**（aa）发布列表。**添加**（新 hudson.tasks.BuildTrigger("TestTop2"​​, false))

```
def hudsonInstance = hudson.model.Hudson.instance 
hudsonInstance.getItems(hudson.model.Project).each {project ->

  if (project.displayName== "TestTop"){
    println(project.displayName)
    def di = project.getUpstreamProjects()
    def triggers=project.getBuildTriggerUpstreamProjects()
    for (z in triggers){
      println("triggers " + z.getDisplayName())

      def pubList = z.getPublishersList()
      for(w in pubList){

        println(w)

        def buildTrigger = w.grep(hudson.tasks.BuildTrigger.class) 

        println("BT " + buildTrigger)
        for(aa in buildTrigger){
          println("aa " + aa.getChildProjectsValue())
          def newtop =  hudsonInstance.getItem("TestTop2")
          pubList.remove(aa)
          pubList.add( new hudson.tasks.BuildTrigger("TestTop2", false)) 
        }               
      }
    }   
  }
}
hudsonInstance.rebuildDependencyGraph() 
```

# python - 跟踪 Python 函数时如何获取调用表达式？

> ID：13952022
> 
> 赞同：6
> 
> 时间：2012-12-19T11:59:47.973
> 
> 标签：python, debugging, trace

在跟踪函数内部，调试函数调用时，是否有可能以某种方式检索调用表达式？

我可以从回溯对象中获取调用行号，但是如果该行上有多个函数调用（可能是同一个函数）（例如，作为更大表达式中的子表达式），那么我如何知道这个调用来自哪里？即使从源代码行开始的偏移量我也会很高兴。

`traceback.tb_lasti`似乎提供了更详细的上下文（尝试的最后一个字节码的索引） - 是否有可能将字节码连接到其确切的源范围？

编辑：只是为了澄清——我需要从调用源行中提取特定的（子）表达式（调用点）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:09:50.817

Traceback 帧也有一个行号：

```
lineno = traceback.tb_lineno 
```

您还可以访问代码对象，该对象将具有名称和文件名：

```
name = traceback.tb_frame.f_code.co_name
filename = traceback.tb_frame.f_code.co_filename 
```

您可以使用文件名和行号，以及框架全局变量和[`linecache`模块](http://docs.python.org/2/library/linecache.html)来有效地将其转换为正确的源代码行：

```
linecache.checkcache(filename)
line = linecache.getline(filename, lineno, traceback.tb_frame.f_globals) 
```

在任何情况下，这都是[`traceback`模块](http://docs.python.org/2/library/traceback.html)用来将回溯转换为有用信息的方法。

由于字节码只有一个与之关联的行号，因此您不能*直接*将字节码引导回源代码行的精确*部分*；您必须自己解析该行以确定每个部分将发出的字节码，然后将其与代码对象的字节码匹配。

您可以使用[`ast`module](http://docs.python.org/2/library/ast.html#ast.parse)执行此操作，但您不能逐行执行此操作，因为您需要范围上下文来为本地、单元格和全局名称查找生成正确的字节码，例如。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T14:17:27.287

不幸的是，编译后的字节码丢失了它的列偏移量；行号映射的字节码索引包含`co_lnotab`在行号表中。该`dis`模块是查看字节码和解释的好方法`co_lnotab`：

```
>>> dis.dis(compile('a, b, c', '', 'eval'))
  1           0 LOAD_NAME                0 (a)
              3 LOAD_NAME                1 (b)
              6 LOAD_NAME                2 (c)
              9 BUILD_TUPLE              3
             12 RETURN_VALUE        
  ^-- line number 
```

但是，没有什么能阻止我们弄乱行号：

```
>>> a = ast.parse('a, b, c', mode='eval')
>>> for n in ast.walk(a):
...     if hasattr(n, 'col_offset'):
...         n.lineno = n.lineno * 1000 + n.col_offset
>>> dis.dis(compile(a, '', 'eval'))
1000           0 LOAD_NAME                0 (a)

1003           3 LOAD_NAME                1 (b)

1006           6 LOAD_NAME                2 (c)
              9 BUILD_TUPLE              3
             12 RETURN_VALUE 
```

由于直接编译代码*应该*与编译 via 相同`ast.parse`，并且由于弄乱行号*不应*影响生成的字节码（除了`co_lnotab`），您应该能够：

*   找到源文件
*   解析它`ast.parse`
*   munge ast 中的行号以包括列偏移量
*   编译 ast
*   使用`tb_lasti`搜索 munged`co_lnotab`
*   将 munged 行号转换回（行号，列偏移）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-01T08:22:56.440

我知道这是死灵术，但我昨天发布了一个类似的问题，但没有先看到这个问题。因此，以防万一有人感兴趣，我通过使用Python3 中的`inspect`and模块以不同于接受的答案的方式解决了我的问题。`ast`它仍然用于调试和教育目的，但它确实有用。

答案很长，所以[这里是链接](https://stackoverflow.com/a/28255919/1814314)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T14:25:15.117

这就是我最终解决问题的方法：我通过将原始程序中的每个函数调用包装在对辅助函数的调用中以及有关原始调用的源位置的信息来检测原始程序中的每个函数调用。实际上我对控制程序中每个子表达式的求值很感兴趣，所以我包装了每个子表达式。

`e`更准确地说：当我在原始程序中有一个表达式时，它变成了

```
_after(_before(location_info), e) 
```

在检测程序中。助手的定义如下：

```
def _before(location_info):
    return location_info

def _after(location_info, value):
    return value 
```

当跟踪器报告对 的调用时`_before`，我知道它将评估由表示的位置处的表达式`location_info`（跟踪系统使我可以访问局部变量/参数，这就是我知道 的值的方式`location_info`）。当跟踪器报告对 的调用时`_after`，我知道由 指示的表达式`location_info`刚刚被评估并且值在`value`.

我本可以将执行“事件处理”直接写入这些辅助函数并完全绕过跟踪系统，但由于其他原因我也需要它，所以我只使用这些辅助函数来触发跟踪系统中的“调用”事件。

结果可以在这里看到：http: [//thonny.org](http://thonny.org)

# php - 与您自己的登录集成时如何保持 Facebook 登录有效？

> ID：13952026
> 
> 赞同：1
> 
> 时间：2012-12-19T12:00:10.333
> 
> 标签：php, facebook, facebook-login

我成功设置 Facebook 登录到我的网络应用程序（它也有自己的登录系统），但我想知道如何保持 FB 连接处于活动状态，例如发布到他们的墙上，在以下我的一个登录示例中.

这是登录过程（我使用的是 Facebook php SDK）：

*   FB 用户点击使用 Facebook' 按钮登录，而不是输入密码和电子邮件
*   facebook php SDK 检查他们的记录状态，然后发现他们已经授权了我的应用程序
*   我的应用程序检查我的数据库中是否存在他们的 FB id，找到它，然后启动与电子邮件/密码登录用户相同的登录过程......

    session_destroy(); session_start(); session_regenerate_id();

...然后将我的数据库中的用户 ID 和名字和姓氏加载到会话变量中

它工作正常，用户可以使用我的应用程序，就好像他们使用电子邮件通行证登录一样。

但是，我现在想发布到他们的墙上，但不能因为 Facebook 会话在我上面的登录过程中被破坏了，所以在我想发布到他们的墙上的页面上，Facebook php 连接代码告诉我他们是'未连接（这是有道理的）。

有人可以说明我应该这样做的正确方式吗？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:05:40.550

请获取会话的值并使登录 fb id 活跃..（即）在您注销之前不要取消设置..

```
$facebook->getSession(); 
```

# c# - 如何用另一个具有不同源表的网格替换编辑 ASPxGridView 项目的控件？

> ID：13952027
> 
> 赞同：0
> 
> 时间：2012-12-19T12:00:16.997
> 
> 标签：c#, asp.net, devexpress, aspxgridview

当我按下编辑时，我必须用另一个具有不同源表的网格替换它们，而不是自动生成控件。那可能吗？这样做的原因是，当我为一个项目按下编辑时，我需要有与此相关的其他表的额外列，我也希望这些列是可更新的。希望你明白了。我正在看这个[http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/EditFormTemplate.aspx](http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/EditFormTemplate.aspx) 这应该是解决方案吗？PS：我是 devexpress 的新手 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T15:49:39.053

如果我正确理解您的问题，这就是解决方案： http: [//demos.devexpress.com/ASPxGridViewDemos/MasterDetail/MasterDetail.aspx](http://demos.devexpress.com/ASPxGridViewDemos/MasterDetail/MasterDetail.aspx)

您需要实现子网格。

# android - 非滚动 GridView

> ID：13952029
> 
> 赞同：3
> 
> 时间：2012-12-19T12:00:24.633
> 
> 标签：android

我想使用一个`GridView`只会扩大它的高度来显示它的所有孩子。这样做的原因是我想在 上方放置一个自定义视图`GridView`，它应该与 一起滚动`GridView`：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <com.myapp.myview
            android:id="@+id/myview"
            android:layout_width="match_parent"
            android:layout_height="50dp" />

        <GridView
            android:id="@+id/gv"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:horizontalSpacing="@dimen/spacing_small"
            android:numColumns="2"
            android:padding="@dimen/spacing_small"
            android:verticalSpacing="@dimen/spacing_small" />
    </LinearLayout>

</ScrollView> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:58:43.260

我已经创建了自己的`View`，将孩子们放在自定义表中。

# javascript - 删除列后使 IE8 重新渲染表

> ID：13952030
> 
> 赞同：2
> 
> 时间：2012-12-19T12:00:27.727
> 
> 标签：javascript, html, html-table, internet-explorer-8, repaint

我有一个`table`这样的：

```
<table width="100%" style="table-layout: fixed;" class="listtable"> ... </table> 
```

DOM 加载后，我删除了最后一个`td`. 每个浏览器，当然除了 IE8，都将表格保持在 100%。

IE8 只是删除该列留下空间而不调整其他列。检查表格时，`table`元素为 100%，但`tbody`不是。我已经尝试在删除列后设置宽度`tbody`，但没有效果。

**有谁知道我可以如何强制 IE8 重新渲染我的表格并拉伸超过 100%？**

*注意：我无法控制服务器端生成的 html，所以我需要在这里使用 JavaScript。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:38:39.677

我尝试根据您的需要创建一个 jsfiddle，并且在激活 IE8 兼容模式的情况下，我没有遇到您的 IE9 问题。那个脚本适合你吗？[http://jsfiddle.net/3TpGt/2/](http://jsfiddle.net/3TpGt/2/)

我在不使用 javascript 的情况下创建了一个代码，因为我不知道您是否要使用库。

```
var table = document.getElementById("myTable");

var th = table.getElementsByTagName("th");
var thead = table.getElementsByTagName("thead");
var tbody= table.getElementsByTagName("tbody");
var tbody_tr= tbody[0].getElementsByTagName("tr");
var thead_tr = thead[0].getElementsByTagName("tr");

thead_tr[0].removeChild(th[th.length-1]);

var current_td = null;
for(i = 0; i < tbody_tr.length; i++) {
    current_td = tbody_tr[i].getElementsByTagName("td");
    tbody_tr[i].removeChild(current_td[current_td.length-1]);
}​ 
```

然后您可以在删除后强制列宽，例如：

```
th[0].width = '50%';
th[1].width = '50%'; 
```

**或者，如果您希望浏览器自动重新计算列宽，请更改表格的样式：**

```
style="table-layout: auto; " 
```

# jquery - Fancybox 打开一个文本文件？

> ID：13952031
> 
> 赞同：4
> 
> 时间：2012-12-19T12:00:29.410
> 
> 标签：jquery, file, text, fancybox

我想创建一个网站，我可以在其中预览某种类型的 FancyBox 文件，例如图像、文本文档等。

这样做：

```
$(".text").fancybox();

<a class="text" href="document.css" title="document.css"><img src="files.png"/>OPEN ME</a> 
```

它会打开文档，但它不尊重文档的边距和格式，我的意思是，所有内容都写在同一行中，因为我想它打开它时好像它是 HTML，而不是文本编辑器。

那么有人如何以 Notepad++ 或 GEdit 的方式打开它，例如，打开它吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:52:19.063

对于大多数文本文件，您可能需要使用 an 打开它们`iframe`以便保持格式，然后您的链接应如下所示：

```
<a class="text fancybox.iframe" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css">open css file</a> 
```

... 注意特殊课程`fancybox.iframe`。然后你的代码很简单：

```
$(".text").fancybox();​ 
```

见**[演示](http://jsfiddle.net/nQrZp/)**

有关如何选择精美`type`内容框的更多信息，请查看：[https ://stackoverflow.com/a/13869696/1055987](https://stackoverflow.com/a/13869696/1055987)

# html - 精灵为 或作为图像

> ID：13952032
> 
> 赞同：2
> 
> 时间：2012-12-19T12:00:38.583
> 
> 标签：html, canvas, sprite

我正在编写一个使用`<canvas>`标签的 HTML5 Javascript 游戏，我不确定哪个更适合精灵：`<canvas>`标签或 Image()。一位朋友说`<canvas>`，这样我们就可以玩弄它的颜色，让它闪烁等等，但我认为 Image() 会更快。

我想对此提出一些意见，因为我很无能为力。

实际例子：

我有一辆想要在屏幕上绘制的小汽车。假设这是一款赛车游戏，我希望键盘移动汽车。汽车应该是 Image() 还是`<canvas>`.

我有一个背景景观可以放在我的 2D Platformer 的背面。图像（）或`<canvas>`？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-19T12:09:44.420

我会推荐 SVG 图像，它们具有内存效率，您可以使用 css 更改颜色。这里有一些关于它的好文章：

[使用 SVG 实现灵活、可扩展和有趣的背景](http://www.alistapart.com/articles/using-svg-for-flexible-scalable-and-fun-backgrounds-part-ii/)

[我可以使用 CSS 更改 svg 路径的填充颜色吗？](https://stackoverflow.com/questions/9529300/can-i-change-the-fill-color-of-an-svg-path-with-css)

# selenium - 如何将 JaCoCo 代理附加到应用程序服务器

> ID：13952035
> 
> 赞同：5
> 
> 时间：2012-12-19T12:00:45.587
> 
> 标签：selenium, jboss, jenkins, jacoco

我正在使用 JBoss 并从 Jenkins 运行 Selenium 测试。我想测量 Selenium 测试的代码覆盖率，所以显然我应该将 JaCoCo java 代理附加到服务器。我已经这样做了：

```
./run.sh -c Default -Djavaagent:[path to Jenkins workspace]/tools/libs/jacocoagent.jar=destfile=[path to Jenkins]/jacoco.exec 
```

但是，不会生成任何输出文件。我在这里指向 Jenkins 路径中的 jacocoagent.jar，但是否是 jacocoagent.jar 和 jacoco.exec 必须在实际的服务器路径中，而不是 Jenkins？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T13:41:06.250

javaagent 需要像这样作为 VM 选项传递：

```
-javaagent:[path to Jenkins workspace]/tools/libs/jacocoagent.jar=destfile=[path to Jenkins]/jacoco.exec 
```

您将它作为系统属性传递（使用 -D）。

您可以通过 JAVA_OPTS 环境变量将 VM 选项传递给 Jboss 应用程序服务器。（如果在运行 run.sh 脚本之前导出了 JAVA_OPTS，run.sh 将选择它）。这样的事情应该做：

```
export JAVA_OPTS="$JAVA_OPTS -javaagent:[path to Jenkins workspace]/tools/libs/jacocoagent.jar=destfile=[path to Jenkins]/jacoco.exec"
./run.sh 
```

有关 javaagent 配置的更多信息可以在这里找到：

[http://www.eclemma.org/jacoco/trunk/doc/agent.html](http://www.eclemma.org/jacoco/trunk/doc/agent.html)

# memory-management - Windows 应用程序内存消耗

> ID：13952037
> 
> 赞同：1
> 
> 时间：2012-12-19T12:00:54.410
> 
> 标签：memory-management, windows-applications

我有几个 Windows 应用程序在一个 24 小时工作的工厂的生产带上一起工作。我在其中一个设备中存在内存消耗问题。它是一个唯一的触摸屏，我不知道正确的说法，它只有屏幕，英特尔凌动作为处理器。

我没有包含数千个元素的列表，这些元素会消耗大量内存。我使用数据库连接、表单创建等操作**使用块**，我也使用 IDisposable。

我跟踪了内存，垃圾收集器工作，但它有大约 5 分钟的延迟。

什么可能导致这种问题，是否有任何工具可以加速**垃圾收集**（独立应用程序或 .NET 框架）？表单的视觉效果是否会过多地消耗内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:05:09.243

您在某处发生了内存泄漏，[这是调试内存泄漏的好文章。](http://www.codeproject.com/Articles/19490/Memory-Leak-Detection-in-NET)

# java - 如何在测试用例的方法中打印值？

> ID：13952039
> 
> 赞同：0
> 
> 时间：2012-12-19T12:00:58.467
> 
> 标签：java, junit, junit4, testcase, junit-rule

我需要使用测试用例在方法中打印值。我的代码是：

```
public void testgetAllRatingElementsWeekNo() throws Exception
{
    String METHOD_NAME = "testgetAllRatingElementsWeekNo";
    log.entering(CLASS_NAME, METHOD_NAME);

    populateForTestMethodValues("1");
    populateWeekOfList();
    int allRatingElementsWeekNo = weeklyDlvyInstancesDashboardReportForm.getAllRatingElementsWeekNo();
    System.out.println("allRatingElementsWeekNo :" + allRatingElementsWeekNo );
    assertEquals("testgetAllRatingElementsWeekNo is Not Greater than Zero: ", allRatingElementsWeekNo > 0, allRatingElementsWeekNo);

    log.exiting(CLASS_NAME, METHOD_NAME);
} 
```

我需要在抛出异常之前打印我的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T10:17:41.770

您可以添加尝试并最终阻止，最后您可以打印消息。我不知道这是否可以做得比这更好：

```
public void testgetAllRatingElementsWeekNo() throws Exception
{
try {
    String METHOD_NAME = "testgetAllRatingElementsWeekNo";
    log.entering(CLASS_NAME, METHOD_NAME);

    populateForTestMethodValues("1");
    populateWeekOfList();
    int allRatingElementsWeekNo = weeklyDlvyInstancesDashboardReportForm.getAllRatingElementsWeekNo();
    System.out.println("allRatingElementsWeekNo :" + allRatingElementsWeekNo );
    assertEquals("testgetAllRatingElementsWeekNo is Not Greater than Zero: ", allRatingElementsWeekNo > 0, allRatingElementsWeekNo);
} finally {
    log.exiting(CLASS_NAME, METHOD_NAME);
}
} 
```

# android - 从另一个android调用另一个项目类？

> ID：13952041
> 
> 赞同：1
> 
> 时间：2012-12-19T12:01:01.673
> 
> 标签：android, class

我想调用另一个项目的类。我将它添加到构建路径中，并在清单文件中声明了该类，但是当我调用它时，它给了我一个`no class found`错误。我是从意图中调用它的。

```
Intent intent = new Intent(getApplicationContext(), org.coolreader.CoolReader.class);
intent.putExtra("path", adapter.getItem(position).getPath());
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:17:11.237

如果您想`CoolReader`从您的程序启动，请查看[以下答案](https://stackoverflow.com/a/7574735/904049)：

```
Intent coolReaderIntent = getPackageManager().getLaunchIntentForPackage("org.coolreader.CoolReader");
coolReaderIntent.putExtra("path", adapter.getItem(position).getPath());
startActivity(coolReaderIntent); 
```

当然，`CoolReader`（程序）应该安装在设备上。

# javascript - 在 angularjs 服务中编写函数

> ID：13952046
> 
> 赞同：13
> 
> 时间：2012-12-19T12:01:17.700
> 
> 标签：javascript, angularjs

我想在 angularjs 服务中编写一个函数，并且我想在我的所有服务中重用它

控制器。

```
var mod= angular.module('myapp', ['eventFilters', 'highlight', 'event', 'dayfilter', 'Services']).
config(['$routeProvider', function($routeProvider) {
$routeProvider.
      when('/', {templateUrl: 'template.html',   controller: Ctrl}).
      when('/temp', {templateUrl: 'temp.html',   controller: tempCtrl}).
      otherwise({redirectTo: '/invalid'});
}]);
mod.service ('sharedService', function() {
function daysInMonth(month,year) {
    return new Date(year, month+1,0).getDate();
}
}); 
```

我想在我的任何控制器中使用 daysInMonth 函数。可能吗？如果是这样，任何人都可以用小提琴中的一些例子简要解释一下我。

提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T12:46:07.737

这是一个关于如何在控制器中使用（注入）服务的基本示例。

[http://jsfiddle.net/uhmNR/1/](http://jsfiddle.net/uhmNR/1/)

```
var myApp = angular.module('myApp',[]);

//Here is the service Users with its functions and attributes
//You can inject it in any controller, service is a singleton and its data persist between controllers
myApp.factory('Users', function () {

    var userName = "John Doe";

    return {
        getUserName: function () {
             return userName;                   
        },
        setUserName: function (newName) {
            userName = newName;
        }
    }
});

//An Util service with DaysInMonth method   
myApp.factory('Util', function () {

    return {
        daysInMonth: function (month,year) {

            return new Date(year, month+1,0).getDate();
        }
    };

});   

//Here I am injecting the User service andusing its methods   
myApp.controller('MyCtrl', ['$scope', 'Users', 'Util', function ($scope, Users, Util) {

    Users.setUserName('Robin Hood');

    $scope.name = Users.getUserName();

    //Using Util.daysInMonth()
    $scope.date = Util.daysInMonth(12,2012);
}]); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T13:02:02.723

将函数公开为服务，然后让 AngularJS 注入器完成其余工作。您可以轻松地将`daysInMonth`服务设置为模块中的静态值。[在http://jsfiddle.net/hbulhoes/zdtnw/](http://jsfiddle.net/hbulhoes/zdtnw/)上查看此操作

```
var mod = angular.module('myapp', []);

// This is the declaration of the daysInMonth service. It's set as
// a value in the module, with the value being the very function
// you want to share among other services and controllers:
mod.value('daysInMonth', function(month, year) {
    return new Date(year, month+1,0).getDate();
});

// And this is an example controller that depends on the daysInMonth function.
function MyController($scope, daysInMonth){
    $scope.DaysInCurrentMonth = daysInMonth(12, 2012);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T16:28:52.327

如果您希望**所有**控制器都可以使用某个功能，则可以考虑在 $rootScope 上定义该方法，而不是使用服务：

```
myApp.run(function($rootScope) {
    $rootScope.daysInMonth = function(year, month) {
        return new Date(year, month+1,0).getDate();
    }
}); 
```

然后，由于原型作用域继承，所有控制器的作用域都可以访问该方法（无需依赖注入）。您可以像这样在任何控制器中调用它：

```
function MyCtrl($scope) {
   console.log($scope.daysInMonth(12, 2012));
}​ 
```

JavaScript 不会找到 $scope 上定义的函数 daysInMonth，所以它会在父作用域（在本例中是根作用域）中查找该函数，然后找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T08:19:25.103

你需要暴露它。将其包装在一个返回块中：

```
var mod= angular.module('myapp', ['eventFilters', 'highlight', 'event', 'dayfilter', 'Services']).
config(['$routeProvider', function($routeProvider) {
$routeProvider.
  when('/', {templateUrl: 'template.html',   controller: Ctrl}).
  when('/temp', {templateUrl: 'temp.html',   controller: tempCtrl}).
  otherwise({redirectTo: '/invalid'});
}]);
mod.service ('sharedService', function() {
   return {
      daysInMonth: function(month,year) {
         return new Date(year, month+1,0).getDate();
      }
   };
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-21T16:37:57.930

如果您想使用实际的 Angular**服务**（不是工厂或提供者），那么您所要做的就是按照 Angular 的方式创建一些东西。

```
mod.service ('sharedService', function() {
  function daysInMonth(month,year) {
    return new Date(year, month+1,0).getDate();
  }
});

// Would turn into 

mod.service("sharedService", function(){
  this.daysInMonth(month, year){
    return new Date(year, month + 1, 0).getDate();
  }
}); 
```

> **除非您需要覆盖将在服务为NEW'ED****时**创建的默认**THIS**对象，否则您不应从服务中**返回**。在这种情况下，您可以返回 Object Literal、Function Definition、Array、大多数 Objects，不包括任何原语。只需确保您提出“为什么我需要覆盖默认行为？”的问题。

 ******这就是服务的全部意义所在。当您注入**SERVICE** Angular 时，将**新建**您传递的函数，从而按照描述将其返回给您。就您而言，该服务正是您所需要的。Angular 将只构建一次**服务**，并且*新的 sharedService*函数结果将在整个应用程序中可用，但仅当服务在应用程序中的某个位置至少被 DI 一次时。如果你不 DI 它，那么服务将永远不会被创建，因为它是延迟加载的（工厂和服务）。

如果你发现你真的想要返回一些东西，（尽管你可以在服务中这样做），合适的地方应该是在 Angular **Factory**中。事实上，如果你**不从****工厂**回来，你会收到一个很好的小通知

> **错误：** *提供者“sharedService”必须从 $get 工厂方法返回一个值。*

**注意：***$get*函数是服务函数定义的第二个参数。

```
mod.factory("sharedService", function(){
  function daysInMonth(month, year){
    return new Date(year, month + 1, 0).getDate();
  }

  return {
    daysInMonth: daysInMonth
  }

  // Or you could do this...
  return daysInMonth;
}); 
```

使用 Angular **Factory**时，您不再获得**NEW'ED**函数，这就是必须创建 return 的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-12T18:34:31.837

我认为 OP 意味着该服务*是*一个函数，例如 $timeout 函数。由于默认服务工厂对您返回的任何内容进行“服务”，您可以这样做：

```
angular.module('myApp.myModule',[])
.factory('add',['$injectables',function($injectables) {
  return function(arg1,arg2)
  {
    //this is the function that will be called when you use this service
    return arg1 + arg2;
  }
}]);
```

用法：

```
angular.module('myApp.Othermodule',['myApp.myModule'])
.controller('controllername',['add',function(add) {

  //controller code and somehwere
  $scope.z = add($scope.x,$scope,y);
}]);
```******

# ruby-on-rails - 为什么 datamapper 试图重新保存我的关系？

> ID：13952050
> 
> 赞同：0
> 
> 时间：2012-12-19T12:01:37.377
> 
> 标签：ruby-on-rails, postgresql, datamapper

我有一个名为 User 的模型，它与 Interests 有多对多的关系。

假设连接表如下所示：

```
User ID | Interest ID
---------------------
   5    |      1 
```

当我编辑此用户的名称（例如）并调用`user.save`时，它失败了。

它失败的原因是因为 datamapper (AFAIK) 试图重新保存与兴趣的关系。我得到的错误是：

```
duplicate key value violates unique constraint "user_interests_pkey"
DETAIL:  Key (user_id, interest_id)=(5, 1) already exists. 
```

有没有人经历过这个？有人知道解决方案吗？提前感谢您的帮助。

更新

用户模型看起来像：

```
class User    
  include DataMapper::Resource

  has n, :interests, :through => Resource, :constraint => :skip  
end 
```

而兴趣模型看起来像：

```
class Interest
  include DataMapper::Resource

  has n, :users, :through => Resource, :constraint => :skip
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:08:51.153

如果您只想运行代码，`user.save`请将

```
begin
  user.save
rescue
  # DO STH MEANINGLESS
end 
```

如果你真的想解决这个问题，你应该更冗长一些。这是一个HABTM协会吗？关联规范也会有所帮助。

# iphone - 如何更改日期选择器中的日期格式

> ID：13952063
> 
> 赞同：6
> 
> 时间：2012-12-19T12:02:19.703
> 
> 标签：iphone, objective-c, datepicker, nsdateformatter, uidatepicker

在我的 iPhone 应用程序中，我需要以**`yyyy/MM/dd`**如下图所示的格式显示日期

![在此处输入图像描述](../Images/3f973c637b8ff573be74a7a3a329247e.png)

但在 iPhone 日期选择器中，它的格式为**MM/dd/yyyy**，这对于我的应用程序来说并不统一

我尝试更改日期选择器的本地值（具有不同的国家/地区），但仍以默认格式不使用它。

如何根据我的要求更改日期选择器上的日期格式？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:11:18.070

在 Apple 的文档中，他们在`UIDatePickerModeDate`. 显示`DatePicker`月份、月份中的日期和年份。这些项目的确切顺序取决于`locale`设置。这种模式的一个例子是 [ 十一月 | 15 | 2007 年]。但在设备中显示为 DD/MM/YYYY。有关详细信息，请参阅[UIDatePicker](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)。

所以如果你想自己做，你可以`UIPickerView`用你想要的值创建你自己的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T13:59:49.680

UIDatePicker 可以适应用户的设置。使用 locale: 方法更改其格式是可能的，但现在在 iOS 5.0 中已弃用。

您可以在 iPhone 的设置中查看您的格式：

```
Settings > General > International > Region Format > 
```

如果您想要特定格式，请考虑制作自己的选择器，但非常不鼓励使用日期选择器。

并参考此[链接](https://stackoverflow.com/questions/2254014/are-there-locales-or-common-programs-that-use-yyyy-dd-mm-as-the-date-format)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-20T09:54:58.420

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[NSTimeZone resetSystemTimeZone];
NSTimeZone *gmtZone = [NSTimeZone systemTimeZone];
[dateFormatter setTimeZone:gmtZone];
[dateFormatter setDateFormat:@"day, MMM HH:mm:ss Z"];
NSDate *dateT = [dateFormatter dateFromString:str1];
NSString *strDateTaken=[appDelegate convertDate:dateT withFormat:@"EEEE, MMMM dd,yyyy hh:mm a"];
[dateFormatter release];
- (NSString *)convertDate:(NSDate *)date withFormat:(NSString *)format {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:format];
    NSString *dt = [formatter stringFromDate:date];
    [formatter release];
    return dt;
} 
```

# iphone - 当方法返回CFObject时如何释放（ARC）CoreFoundation对象？

> ID：13952064
> 
> 赞同：0
> 
> 时间：2012-12-19T12:02:21.500
> 
> 标签：iphone, ios, xcode

我有类似于下面的 CFObject 返回方法

```
-(CFMutableAttributedStringRef)getAttStrForArray:(NSArray*)substrings forString:(NSString*)aStr
{

   CFMutableAttributedStringRef as3 = CFAttributedStringCreateMutable(NULL, 0);
    CFAttributedStringBeginEditing(as3);
    CTFontRef font = CTFontCreateWithName(CFSTR("HelveticaNeue-Bold"), 12.5, NULL);
    CFAttributedStringReplaceString(as3, CFRangeMake(0, 0), (__bridge CFStringRef)aStr);
   ......
   CFAttributedStringEndEditing(as3);
    //CFRelease(as3);
   return as3;

} 
```

在这里，我遇到了内存泄漏，`CFRelease(as3);`因为它是一个返回方法，所以我没有释放该对象。有没有办法解决内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:15:33.413

幸运的是，`NSAttributedString`两者`NSMutableAttributedString`都可以免费连接到他们的核心基金会对应`CFAttributedStringRef`方`CFMutableAttributedStringRef`。这意味着您可以创建例如 a`CFAttributedStringRef`并将其简单地转换为`NSAttributedString`指针，然后`NSAttributedString`在其上调用方法将起作用。

所以只是桥把它投射到弧线上

`NSAttributedString *nsString = (__bridge transfer NSAttributedString*)as3`

```
-(NSMutableAttributedString*)getAttStrForArray:(NSArray*)substrings forString:(NSString*)aStr
{
   CFMutableAttributedStringRef as3 = CFAttributedStringCreateMutable(NULL, 0);
   //...
   return (__bridge transfer NSAttributedString*)as3;
} 
```

# python - 带有时区字段/模板的日期时间输出奇怪的行为

> ID：13952065
> 
> 赞同：0
> 
> 时间：2012-12-19T12:02:22.410
> 
> 标签：python, django, datetime, timestamp-with-timezone, django-timezone

时区设置settings.py：

```
USE_TZ = True
TIME_ZONE = 'Europe/Moscow' # +4 
```

记录在数据库表中（postgresql 9.1，带时区的时间戳：

> 2012-12-19 15:30:51.164368+04

Django 日期过滤器：

```
date(object.date,"d.m.Y H:i:s"), 
```

在所有这些操作之后，模板中的日期时间文件输出为：

> 19.12.2012 11:30:51

为什么会发生这种情况？为什么 django 不使用 TZ 信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:12:45.343

When `USE_TZ`is `False`，这是 Django 将存储所有日期时间的时区。When `USE_TZ`is `True`，这是 Django 用于在模板中显示日期时间并解释在表单中输入的日期时间的默认时区。

检查这个文档，[Django Doc](https://docs.djangoproject.com/en/dev/ref/settings/#time-zone)

# jpa - 可以在 WebSphere 模块中使用没有 EJB 的 JPA

> ID：13952070
> 
> 赞同：0
> 
> 时间：2012-12-19T12:02:34.977
> 
> 标签：jpa, websphere, jpa-2.0, ejb-3.0, websphere-7

我有一个托管 Web 服务的 WebSphere ESB 7.5（在中介模块内）。来自 Web 服务的数据应存储到数据库中。数据库访问应通过 JPA 执行。

我想将 JPA**与**WebSphere 的容器管理事务一起使用（因此 JPA 只是替换了普通的 SQL 调用，仅此而已）。我不想从[本](http://www.ibm.com/developerworks/websphere/tutorials/1012_malcolm3/)教程中生成 EJB。这对我的情况来说似乎是不必要的。

可能吗？任何代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:57:06.917

JPA 规范中没有任何内容要求在应用程序容器中或通过 EJB 使用它。***但是***，关于您的第二个条件，容器管理的事务是在容器级别定义的，更具体地说，它们仅适用于实体 bean。因此，您的选择是使用：

*   JPA + 非实体 bean + 用户事务
*   JPA + 实体 bean + 容器管理事务。

# html - 输入只读退格问题

> ID：13952071
> 
> 赞同：9
> 
> 时间：2012-12-19T12:02:36.340
> 
> 标签：html, input, readonly

在我的`input`元素中，当我导航到元素并使用键盘输入退格键时，它会导航到上一页，当我将输入设置为`readonly`.

我的代码如下。请分享你的知识。

```
<div class="div1">
    <label class="div1" for="inputfor">cash:</label>
    <input type="text" id="cashinput" readonly="readonly" />
</div> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-23T11:27:09.377

我知道这个问题是在 2 年前提出的。由于我有一个对我有用的解决方案，我很想与大家分享它。

修复非常简单：

```
<input type="text" onkeydown="event.preventDefault()" readonly="readonly"/> 
```

event.preventDefault() 将阻止退格键离开页面，您还可以选择和复制文本。

谢谢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T12:14:43.270

您始终可以将输入字段保持为只读状态，完全禁止输入。

```
<div class="div1">
    <label class="div1" for="inputfor">cash:</label>
    <input type="text" id="cashinput" onkeydown="return false;" readonly="readonly"/>
</div>​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:06:59.583

对于具有只读属性的输入，这是预期的正确行为。

具有此属性的输入无法修改，只能查看，您可以通过 Tab 键和复制访问内容，仅此而已。

如果不需要，请删除 readonly 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-17T08:30:30.290

这条线帮助了我：

```
onkeydown="if(this.readOnly) event.preventDefault();" 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-01-29T13:30:22.193

如果您因为 location.href = "new/page/url" 而在页面中；

改用 location.replace("new/page/url") 。

location.href = "新/页面/网址"; // 加载新页面并将当前页面保存为 IE 中的历史记录

参考 [https://developer.mozilla.org/en-US/docs/Web/API/Location](https://developer.mozilla.org/en-US/docs/Web/API/Location)

# windows - 排除特定扩展名的文件

> ID：13952075
> 
> 赞同：1
> 
> 时间：2012-12-19T12:02:52.937
> 
> 标签：windows, batch-file, cmd

在名为 my.bat 的 Windows cmd 批处理脚本中，我想对当前目录中的所有文件执行命令，但批处理文件 my.bat 除外。我目前在 my.bat 中使用以下命令仅针对 *.txt *.ppt 运行命令，但实际上可能会将不同扩展名的新文件添加到文件夹中，因此通过排除一种类型的文件扩展名来执行此命令（在我的情况下 *.bat) 会更具可读性/帮助。

```
FOR /F "delims=|" %%i IN ('dir /b *.txt *.ppt') DO echo %%i 
```

问题是：如何仅使用该特定文件扩展名排除该文件，并使 for 命令在所有扩展名的所有文件上执行，但排除的文件除外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:10:10.007

```
FOR /F "tokens=* delims=|" %%i IN ('dir /b *.*') do if not %%~xi==.bat echo %%i 
```

我也添加`tokens=*`了，否则如果它们有空格，您将无法获得完整的文件名。

不带点回声

```
setlocal enabledelayedexpansion
FOR /F "tokens=* delims=|" %%i IN ('dir /b *.*') do (
set e=%%~xi
set e=!e:.=!
echo !e!
) 
```

这是假设文件没有任何其他点，否则它也会删除它们。不过，这比仅从末尾删除第 4 个字符要坚固一些，因为并非所有文件都具有 3 个字符的扩展名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:10:18.813

您可以通过 传递`dir /b`命令的输出`findstr`，如下所示：

```
FOR /F "delims=|" %%i IN ('dir /b ^| findstr /v /r "^my.bat$"') DO echo %%i 
```

打印与参数不匹配的任何内容的`/v`选项。`findstr`匹配基于正则表达式，该正则表达式仅匹配包含的行，不匹配`my.bat`其他任何内容。

# c# - 是否需要关闭 WebInvoke 方法的 Stream

> ID：13952076
> 
> 赞同：23
> 
> 时间：2012-12-19T12:02:55.400
> 
> 标签：c#, wcf, streaming, dispose, wcf-web-api

我有一个服务接口，其方法的参数类型为`Stream`。我应该在从该流中读取所有数据后关闭该流，还是在方法调用完成时由 WCF 运行时完成？

我见过的大多数例子，只从流中读取数据，但不要在流上调用 Close 或 Dispose。

通常我会说我不必关闭流，因为该类不是流的所有者，但原因是为什么要问这个问题是我们目前正在调查我们系统中的一个问题，即一些 Android 客户端，使用 HTTP-Post 向此服务发送数据有时会打开未关闭的连接（使用`netstat`哪个列表 ESTABLISHED Tcp 连接进行分析）。

```
[ServiceContract]
public interface IStreamedService {
    [OperationContract]
    [WebInvoke]
    Stream PullMessage(Stream incomingStream);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, UseSynchronizationContext = false)]
public class MyService : IStreamedService  {

  public System.IO.Stream PullMessage(System.IO.Stream incomingStream) {
       // using(incomingStream) {
       // Read data from stream
       // }

       Stream outgoingStream = // assigned by omitted code;
       return outgoingStream;
  } 
```

服务/绑定的配置

```
<webHttpBinding>
  <binding name="WebHttpBindingConfiguration" 
           transferMode="Streamed"
           maxReceivedMessageSize="1048576"
           receiveTimeout="00:10:00" 
           sendTimeout="00:10:00"
           closeTimeout="00:10:00"/>
</webHttpBinding> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:12:40.420

控制关闭或不关闭参数行为的属性是`OperationBehaviorAttribute.AutoDisposeParameters`属性，可用于偏离默认行为 true 关于`Stream`参数退出方法后关闭的行为。这就是您不经常看到参数显式关闭的原因。如果您想覆盖默认行为，您可以通过[OperationCompleted](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontext.operationcompleted.aspx)事件[在操作完成后进行显式控制并关闭 Stream 。](http://devdump.wordpress.com/2008/12/07/disposing-return-values/)

```
public Stream GetFile(string path) {
   Sream fileStream = null;    

   try   
   {
      fileStream = File.OpenRead(path);
   }
   catch(Exception)
   {
      return null;
   }

   OperationContext clientContext = OperationContext.Current;
clientContext.OperationCompleted += new EventHandler(delegate(object sender, EventArgs args)
   {
      if (fileStream != null)
         fileStream.Dispose();
   });

       return fileStream;
} 
```

请记住，您收到的是您*自己的*副本，而`Stream`不是对客户的引用`Stream`，因此您有责任关闭它。

# php - 带有代理和 stream_context 的 Apple Push

> ID：13952081
> 
> 赞同：6
> 
> 时间：2012-12-19T12:03:05.817
> 
> 标签：php, apple-push-notifications, http-proxy

我必须向 iOS 设备发送推送通知。我的连接必须通过代理启用。我尝试了一切，但没有成功。我有一个错误 110 连接超时。如果我只是尝试连接到 Apple push 的地址，它就可以使用 cURL。我不知道问题出在哪里。代理配置？PHP stream_context 错误的实现？

这是我的代码：

```
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'certificate.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', 'my_passphrase');
stream_context_set_option($ctx, 'ssl', 'verify_peer', false);
stream_context_set_option($ctx, 'http', 'proxy', 'tcp://my-proxy.net:8080');
stream_context_set_option($ctx, 'http', 'request_fulluri', true);

$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err,$errstr, 60, STREAM_CLIENT_CONNECT, $ctx);
var_dump($fp);
var_dump($err);
var_dump($errstr);
exit; 
```

你有想法吗 ？

**编辑：**

它可以直接链接到 Squid 吗？我刚刚发现代理正在与 Squid 一起运行。我也尝试使用`fopen()`函数而不是，`stream_socket_client()`但它似乎不允许 ssl 协议。

这是我的 var_dump 输出：*bool(false) int(110) string(20) "Connection timed out"*

我也有这个警告：警告：stream_socket_client（）：无法连接到第 22 行 /share/www/website/test.php 中的 ssl://gateway.sandbox.push.apple.com:2195（连接超时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:30:10.390

可能只是您的代理不允许打开端口 2195。

[iPhone 推送通知无法连接到 SSL 服务器](https://stackoverflow.com/questions/1444355/iphone-push-notification-unable-to-connect-to-the-ssl-server)

我猜你要么：

*   需要与运行代理的人交谈以查看端口 2195 是否打开。

或者

*   设置一个在端口 2195 上侦听的测试服务器，然后尝试通过代理对其进行测试连接。这应该允许您测试是否是阻止连接请求的代理。

或者

*   测试 Curl 是否可以使用代理打开连接。

这是通过设置选项来完成的：

```
// sets the proxy to go through
curl_setopt($ch, CURLOPT_PROXY, $proxy);
// sets to use a tunnel proxy which most http proxies are
curl_setopt($ch, CURLOPT_HTTPTUNNELPROXY, $proxy); 
```

完整的测试代码[在这里](http://www.oooff.com/php-affiliate-seo-blog/php-automation-coding/easy-php-proxy-checker-writing-tutorial/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T19:47:37.787

*   创建 SSL 上下文
*   打开到代理的 tcp 套接字
*   向代理发送请求以连接到 APN
*   一旦连接被接受，启用 SSL

看看我在这篇文章中的回复：[Send Push Notification to APNS through proxy](https://stackoverflow.com/questions/17450511/send-push-notification-to-apns-through-proxy/32978293#32978293)

# java - 如何从线程启动服务

> ID：13952082
> 
> 赞同：0
> 
> 时间：2012-12-19T12:03:06.803
> 
> 标签：java, android, multithreading, service

我有 Main_Thread 类：

```
public class Main_Thread extends Thread {
...
} 
```

如何将 Android 服务启动到 Main_Thread ，如下所示：

```
startService(new Intent(this, Main_Service.class)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:05:29.070

在这段代码上：

```
 startService(new Intent(this, Main_Service.class)); 
```

`this`是一个对activity的引用，它是一个context，里面有一个ApplicationContext的引用。

要使该行起作用，您必须为线程提供 ApplicationContext 引用并调用：

```
 startService(new Intent(context, Main_Service.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:08:34.327

如果您有上下文参考：

```
startService(new Intent(context, Main_Service.class)); 
```

否则，如果您在与 Activity 相同的类中声明线程：

```
startService(new Intent(YourActivity.this, Main_Service.class)); 
```

否则，如果您知道这是您可以执行的实际活动：

```
startService(new Intent(ActualActivity.class, Main_Service.class)); 
```

# android - Android - 如何处理 FragmentActivity 的方向？

> ID：13952083
> 
> 赞同：2
> 
> 时间：2012-12-19T12:03:15.327
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager, android-fragmentactivity

我目前在我的应用程序中使用 Sherlock 包和视图指示器包来创建一个视图寻呼机，其标题位于顶部，然后是操作栏。

在大多数情况下，它可以正常工作，但是我注意到 invalidateOptionsMenu() 在屏幕方向更改后停止工作。

当我的应用程序加载它工作正常，直到我将设备旋转到横向模式，从那时起 invalidateOptionsMenu() 调用永远不会调用 onCreateOptionsMenu(Menu menu) 方法。

这是一个简单的 OptionsMenu 创建，如下所示：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

            menu.add("About")
            .setIcon(R.drawable.about)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

            menu.add("Refresh")
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        return true;
    } 
```

位于 SherlockFragmentActivity 中：

```
public class TestFragActivity extends SherlockFragmentActivity 
```

我有三个扩展 Fragment 类的类：

```
OverviewFrag overviewFrag;
ForecastFrag forecastFrag;
LiveFrag liveFrag; 
```

我在 SherlockFragmentActivity 中创建它们，如下所示：

```
overviewFrag = new OverviewFrag();
forecastFrag = new ForecastFrag();
liveFrag = new LiveFrag(); 
```

然后我有一个 FragmentAdapter 类，如下所示：

```
class TestFragmentAdapter extends FragmentPagerAdapter {     
    private int mCount = TAB_TITLES.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return overviewFrag;
        case 1:
            return forecastFrag;
        case 2:
            return liveFrag;
        default:
            return null;
        }
    }

    @Override
    public int getCount() {
        return mCount;
    } 

    @Override
    public CharSequence getPageTitle(int position) {
        return TAB_TITLES[position];
    }
} 
```

FragmentPagerAdapter、ViewPAger 和 PageIndicator 在 onCreate 中设置如下：

```
mAdapter = new TestFragmentAdapter(getSupportFragmentManager());
mPager = (ViewPager)findViewById(R.id.pager);
mPager.setAdapter(mAdapter);
mPager.setOffscreenPageLimit(2);
mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);
mIndicator.setViewPager(mPager); 
```

当设备旋转时，我保存 3 个 Classes hat extend Fragment 并在 onCreate 中返回它们，如下所示：

```
overviewFrag = savedWeatherInstance.getSavedOverviewFrag();
forecastFrag = savedWeatherInstance.getSavedForecastFrag();
liveFrag = savedWeatherInstance.getSavedLiveFrag(); 
```

这就是我所做的一切，当我旋转设备时，我看到了一些奇怪的行为，例如 invalidateOptionsMenu() 方法不起作用，但当我在类中调用扩展 Fragment 的方法时也出现了一些奇怪的行为，如下所示：

```
overviewFrag.refreshTask(); 
```

这似乎运行了 refreshTask() 但视图似乎没有正确更新。

谁能帮助我，因为我对 Fragments 还很陌生，而且我不确定我是否在这里正确处理了它们的生命周期？

# javascript - flash 对象代码自动使用域而不是 http://fpdownload.macromedia.com 更改路径

> ID：13952084
> 
> 赞同：1
> 
> 时间：2012-12-19T12:03:18.017
> 
> 标签：javascript, flash, asp-classic

我正在研究 ASP 经典，我想在 asp 中运行 flash 文件。`<object>`当我在标签中嵌入代码时

```
codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab

```

和`<embed>`标签集

```
pluginspage="http://www.macromedia.com/go/getflashplayer

```

但是当我查看页面源时，它已自动更改为域路径，例如`https://www.example.com/abc/......`

**注意**： swf 文件运行正常但不能流畅运行。只显示播放和停止按钮。

# c# - 使用 C# 从 Sharepoint 2007 文档库中打开 excel 文件

> ID：13952085
> 
> 赞同：2
> 
> 时间：2012-12-19T12:03:21.983
> 
> 标签：c#, excel, sharepoint-2007, excel-interop

我正在尝试从 Sharepoint 文档库中打开一个 excel 文件。我的应用程序搜索特定文件，获取其链接并使用它来下载和进一步打开。

我的应用程序可以在我的机器和测试服务器上运行，但是当我将它发送到质量保证服务器时，问题就开始了。

我无权访问，也不会授予 QA 机器。我只有一堆 Console.writes 来看看会发生什么。

据我所知，一切正常，直到它尝试打开 excel 并给出以下错误：

```
Old format or invalid type library. (Exception from HRESULT: 0x80028018 (TYPE_E_INVDATAREAD)) 
```

根据我的搜索，这是与操作系统语言相关的一些错误，或者具有此解决方法的两种操作系统语言之间的差异[http://support.microsoft.com/kb/320369](http://support.microsoft.com/kb/320369)。

问题是，所有机器上的所有操作系统语言属性都是相同的，如果这是问题所在，我将无法在我的机器或测试服务器中打开 excel。此外，在解决方法中，他们使用 InvokeMember？真的不明白为什么我会做这样的事情。

代码：（我使用的是 Microsoft.Office.Interop.Excel；）

```
MSExcel.Application MyExcel = new MSExcel.ApplicationClass();
MSExcel.Workbook wb = MyExcel.Workbooks.Open(link, 0, true, 5, "", "", false, XlPlatform.xlWindows, "", true, false, 0, true, true, false);//Add(pathExcel);
MSExcel.Worksheet MyWS = (MSExcel.Worksheet)wb.Worksheets.get_Item(1); 
```

其中链接是文件的完整 url。

我将不胜感激。如果有人有另一种方法来做同样的事情，我也将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:57:08.357

看看这个链接

> [BUG：自动化 Excel 时出现“旧格式或无效类型库”错误](http://support.microsoft.com/kb/320369)

或 堆栈溢出中的相同也可在此处使用

> [旧格式或无效类型库。（来自 HRESULT 的异常：0x80028018 (TYPE_E_INVDATAREAD)）](https://stackoverflow.com/questions/5180713/old-format-or-invalid-type-library-exception-from-hresult-0x80028018-type-e)

# asp.net - 将 doc 转换为 pdf 的 IIS 可执行权限？

> ID：13952091
> 
> 赞同：2
> 
> 时间：2012-12-19T12:03:35.847
> 
> 标签：asp.net, iis-7.5

我有一个 asp.net 应用程序，它使用 Microsoft.Office.Interop.Word.ApplicationClass 将上传的 ms doc 转换为 pdf。它在我的本地机器上工作正常，但它在部署的 IIS 服务器上不起作用。是否有任何可执行权限是需要得到输出。

错误是：检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80070005。

我的代码如下：

```
public class Word2Pdf
{
    private Microsoft.Office.Interop.Word.ApplicationClass MSWordDoc;
    object UnknownType = Type.Missing;
    public string Word2PdfCOnversion(object InputLocation, object OutputLocation)
    {
        string result;
        try
        {
            //if (MSWordDoc == null) 
            MSWordDoc = new Microsoft.Office.Interop.Word.ApplicationClass();
            MSWordDoc.Visible = false;
            MSWordDoc.Documents.Open(ref InputLocation,    //Input File Name Location
                ref UnknownType,    // Conversion Conformation
                ref UnknownType,    // Set ReadOnly Property
                ref UnknownType,    // Add to the Recent Files
                ref UnknownType,    // Document Password Setting
                ref UnknownType,    // Password Templete
                ref UnknownType,    // Revert
                ref UnknownType,    // Write Password to Document
                ref UnknownType,    // Write Password Template
                ref UnknownType,    // File Format
                ref UnknownType,    // Encoding File
                ref UnknownType,    // Visibility
                ref UnknownType,    // To Open or Repair
                ref UnknownType,    // Document Direction
                ref UnknownType,    // Encoding Dialog
                ref UnknownType);   // XML Text Transform
            MSWordDoc.Application.Visible = false;  // To Invisible the Word Document
            MSWordDoc.WindowState = Microsoft.Office.Interop.Word.WdWindowState.wdWindowStateMinimize;    // Minimize the Opened Word File.
            object SavePDFFormat = Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatPDF;
            MSWordDoc.ActiveDocument.SaveAs(ref OutputLocation, //Output File Location
            ref SavePDFFormat,    // File Format
            ref UnknownType,    // Comment to PDF File
            ref UnknownType,    // Password
            ref UnknownType,    // Add to Recent File
            ref UnknownType,    // Write Password
            ref UnknownType,    // ReadOnly Propert
            ref UnknownType,    // Original Font Embeding
            ref UnknownType,    // Save Picture
            ref UnknownType,    // Saving Form Datas
            ref UnknownType,    // Save as AOVE Letter
            ref UnknownType,    // Encoding
            ref UnknownType,    // Inserting Line Breakes
            ref UnknownType,    // Allow Substitution
            ref UnknownType,    // Line Ending
            ref UnknownType);   // Add BiDi Marks
            result = "Success";
        }
        catch (Exception)
        {
            result = "Error";
        }
        finally
        {
            if (MSWordDoc == null) { }
            else { MSWordDoc.Documents.Close(ref UnknownType, ref UnknownType, ref UnknownType); }
            MSWordDoc.Quit(ref UnknownType, ref UnknownType, ref UnknownType);
        }
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:04:31.447

您需要为要使用的 COM 组件设置权限。在服务器上，运行该`dcomcnfg`实用程序。

在“Component Services\Computers\My Computer\DCOM Config”下，找到您需要的单词 components 的 CLSID。（有帮助的是，我看到一些机器将它们列为 guid `{000209FF-0000-0000-C000-000000000046}`，而其他机器则通过名称列出了办公组件）。

您需要右键单击 CLSID 并选择属性，更改“启动和激活权限”、“访问权限”和“身份”设置，以允许网站应用程序池帐户具有自动化 Word 的必要权限。

顺便说一句，您可能需要比您提到的更多的 CLSID。当我从事一个使用 word 将 doc 和/或 html 转换为 PDF 的项目时，我们必须添加 Word 的 CLSID 和几种 Word 图片类型。

从记忆中，CLSID 是：
`{000209FF-0000-0000-C000-000000000046}`
`{000209FF-0000-0000-C000-0000000000FE}`
`{000209FF-0000-0000-C000-0000000000FF}`

希望这应该为您指明正确的方向。

# c# - XML到Windows Phone 7中的本地数据库

> ID：13952093
> 
> 赞同：1
> 
> 时间：2012-12-19T12:03:42.713
> 
> 标签：c#, xml, windows-phone-7, windows-phone-7.1, nsxmlparser

从我的服务器下载 xml 文件时会发生此功能（查看代码）。现在我想将它加载到我的本地数据库中...

XML

```
<?xml version="1.0" encoding="utf-8" ?>
<Questions>
  <idQuestion>1</idQuestion>
  <Question>Question 1</Question>
  <CorrectAns>Ans1</CorrectAns>
  <WrongAns1>Ans2</WrongAns1>
  <WrongAns2>Ans3</WrongAns2>
  <WrongAns3>Ans4</WrongAns3>
  <Category>CategoryName</Category>
</Questions>
<Questions>
  <idQuestion>2</idQuestion>
  <Question>Question 2</Question>
  <CorrectAns>Ans1</CorrectAns>
  <WrongAns1>Ans2</WrongAns1>
  <WrongAns2>Ans3</WrongAns2>
  <WrongAns3>Ans4</WrongAns3>
  <Category>CategoryName</Category>
</Questions>
etc... 
```

代码：

```
 void downloader_Completed(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error != null)
            return;

        XElement quest = XElement.Parse(e.Result);

        using (QuestionContext context = new QuestionContext(ConnectionString))
        {
            for (int i = 0; i < quest.Length; i++)
            {
                Question q = new Question();
                q.idQuestion = ; 
                q.Question = ;
                q.CorrectAns = ;
                q.WrongAns1 = ;
                q.WrongAns2 = ;
                q.WrongAns3 = ;
                context.QuestionsDB.InsertOnSubmit(q);
                context.SubmitChanges();
            }
        }    
    } 
```

我有 2 个问题： 1）如何读取 xml 内容并将其写入：

```
 q.idQuestion = ; 
 q.Question = ;
 q.CorrectAns = ;
 q.WrongAns1 = ;
 q.WrongAns2 = ;
 q.WrongAns3 = ; 
```

2）`for (int i = 0; i < quest.Length; i++)`这里`quest.Length`给出错误（我知道为什么）......如何制作自定义函数来获取长度？我需要它来计算`<Questions>`标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:18:21.030

您的 xaml 格式无效，因为它有多个根元素（问题）。

假设它的格式是否正确（我有修改）

```
string xmlData = @"<?xml version=""1.0"" encoding=""utf-8"" ?>
<Questions>
  <Question>
    <idQuestion>1</idQuestion>
    <QuestionName>Question 1</QuestionName>
    <CorrectAns>Ans1</CorrectAns>
    <WrongAns1>Ans2</WrongAns1>
    <WrongAns2>Ans3</WrongAns2>
    <WrongAns3>Ans4</WrongAns3>
    <Category>CategoryName</Category>
  </Question>
  <Question>
    <idQuestion>2</idQuestion>
    <QuestionName>Question 2</QuestionName>
    <CorrectAns>Ans1</CorrectAns>
    <WrongAns1>Ans2</WrongAns1>
    <WrongAns2>Ans3</WrongAns2>
    <WrongAns3>Ans4</WrongAns3>
    <Category>CategoryName</Category>
  </Question>
</Questions>"; 
```

您可以拥有任意数量的标签，如上

现在，您可以将此数据转换为类，如下所示

```
XElement quest = XElement.Parse(xmlData);

        var questionsData = from qn in quest.Descendants("Question")
                           select new Question
                           {
                               idQuestion = int.Parse(qn.Element("idQuestion").Value),
                               QuestionName = qn.Element("QuestionName").Value,
                               CorrectAns = qn.Element("CorrectAns").Value,
                               WrongAns1 = qn.Element("WrongAns1").Value,
                               WrongAns2 = qn.Element("WrongAns2").Value,
                               WrongAns3 = qn.Element("WrongAns3").Value
                           };

        var Questions = questionsData.ToList();
        var noofquestions = Questions.Count;
        //If you want any question with specific id, say '2'
        int idQuestion = 2;
        var question = Questions.Where(item => item.idQuestion == idQuestion).First(); 
```

这里我的问题课是这样的

```
class  Question
    {
        public int idQuestion ; 
        public string QuestionName ;
        public string CorrectAns ;
        public string WrongAns1 ;
        public string WrongAns2 ;
        public string WrongAns3 ;
    } 
```

现在以任何方式将上述过程应用于您的数据

# .net - 无法在 Mage 中设置入口点？

> ID：13952095
> 
> 赞同：4
> 
> 时间：2012-12-19T12:03:47.857
> 
> 标签：.net, winforms, windows-installer, clickonce, mage

我正在使用 Mage.exe 为我的 winform 应用程序创建单击一次部署。浏览完文件并单击填充按钮后，我无法选择任何文件作为入口点。

![在此处输入图像描述](../Images/ce8d06d9a4d293608254ea1f113920d7.png)

这导致**Windows 窗体应用程序不支持 customHostSpecified 属性。**错误

我搜索并发现一些用户通过使用正确版本的工具从 "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\mage.exe" 解决了这个问题。由于我使用的是 Windows XP，所以我尝试了“C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\mage.exe”，但这也不起作用。

任何人都可以帮我解决这些问题。仅供参考：我使用的是 Windows XP 和 VS2010。

**编辑** 即使我添加了一个 exe 文件，即使它也不能被标记为入口点。

我尝试了命令行版本，但即使这样也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:58:48.397

看起来您正在尝试将入口点设置为 msi 安装程序的 setup.exe？从文档中看并不明显，但 Click Once 部署的入口点必须是 .Net exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:53:14.203

如果可能的话，我不会推荐 ClickOne。它有很多问题。它可能会失败，然后您必须在用户的计算机上解决问题。呸呸呸

# devise - 设计：将 Google Open ID 迁移到 Google OAuth

> ID：13952107
> 
> 赞同：4
> 
> 时间：2012-12-19T12:04:29.373
> 
> 标签：devise, openid, google-openid, rails-3.1, google-oauth

有没有人知道如何做到这一点？我基本上是在尝试将“与 Google 连接”的策略从 OpenID 替换为 OAuth。当用户在新的 OAuth 方案下登录时，挑战是识别旧用户（Google 开放 ID 上的用户）。

我有一个有效的实现，它依赖于电子邮件地址作为主键，因为开放 ID 策略捕获了这一点。问题是，我不想在 OAuth 流程中询问电子邮件。理想值只是 Google 用户 ID，但 Open ID 策略似乎没有捕捉到这一点。

所以我有开放的 ID 令牌，例如[https://www.google.com/accounts/o8/id?id=AfSCwGQ4PUaidXSQddJugXKLqU5V0MrXFhJM6UHybPw](https://www.google.com/accounts/o8/id?id=AfSCwGQ4PUaidXSQddJugXKLqU5V0MrXFhJM6UHybPw)并试图了解我是否可以从中获得 Google ID。

更新：我在这里解释了我最终是如何进行此迁移的 - [http://softwareas.com/migrating-user-accounts-from-google-openid-to-google-oauth-to-google-plus](http://softwareas.com/migrating-user-accounts-from-google-openid-to-google-oauth-to-google-plus)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:25:47.983

我们今天没有准备好避免用户看到另一个批准页面的策略。

但是，与其尝试执行基于 OAuth1 的混合流程并且必须将所有遗留代码添加到您的服务器，我建议您简单地关联电子邮件地址并转到 OAuth2 登录。我假设您就像大多数最终要求提供电子邮件地址的网站一样，因为他们通常希望它用于帐户恢复。只需确保您从 OpenId 获取电子邮件地址作为签名参数之一。

然后使用 userinfo.email 范围和 OAuth2 [https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)，您应该能够以较少的开发人员痛苦进行迁移。

此外，我们正在添加对 OpenIDConnect 的支持，它支持 login_hint 参数，因此您可以将 &login_hint=bob@gmail.com 添加到您的授权 URL，它将引导批准到正确的帐户。这现在没有记录，但它可能对您有用。用户的浏览器可以使用多个帐户登录到 Google，并且您想尝试获得正确的一个。始终检查您从 OAuth2 流程收到的电子邮件以确保它匹配，因为这只是一个“提示”。

用户仍需重新授权 OAuth2，但我们计划在未来跳过此重新授权。重点是计划使用 OAuth2，我们希望尽快提供无缝迁移，并且您将使用受支持的协议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T16:27:10.927

Google 使用OpenID 的[定向标识符](https://willnorris.com/2009/07/openid-directed-identity-identifier-select)，每个依赖方都是唯一的，并且明确设计为隐藏用户的任何相关标识符。所以简短的回答是，没有办法获得与给定的 Google OpenID 对应的 Google ID。

但是，一种选择可能是使用 Google 的[OpenID+OAuth 混合](https://developers.google.com/accounts/docs/OpenID#oauth)流程。这允许您获取 OAuth 令牌作为正常 OpenID 流的一部分，然后可以使用该令牌从[OAuth2 登录](https://developers.google.com/accounts/docs/OAuth2Login)API 获取用户 ID，然后您可以将其与他们现有的帐户相关联。为所有现有用户完成此操作后，然后切换到直接使用 OAuth2 登录。

当然，这种方法的诀窍是让您的所有用户再次登录，以便您可以通过新流程发送他们。这将归结为您愿意等待迁移帐户的时间，以及您是否愿意通过向现有用户发送电子邮件并要求他们再次登录来刺激他们（类似于强制密码重置）。

# c# - 通过字符串值获取类

> ID：13952109
> 
> 赞同：22
> 
> 时间：2012-12-19T12:04:45.700
> 
> 标签：c#, .net, abstract-class

我有一个带有几个派生类的抽象类

```
public abstract class MyObject
{
    public string name { get; set; }
    public bool IsObject(string pattern);
    ...
}

public class MyObjectA : MyObject
{
    public string name { get { return "MyObjectA"; } set; }
    public bool IsObject(string pattern) { ... }
    ...
}

public class MyObjectB: MyObject
{
  public string name { get { return "MyObjectB"; } set; }
  public bool IsObject(string pattern) { ... }
  ...
} 
```

现在我想要一个函数，它基于字符串返回我的特定类（MyObjectA / MyObectB）。问题是，我有很多 if/else-clauses 来得到它：

```
public MyObject Create(string pattern)
{
    MyObjectA obj = new MyObjectA();
    if(obj.IsObject(pattern)
    {
        return obj;
    }
    else
    {
        MyObjectB objb = new MyObjectB();
        if(objb.IsObject(pattern);
            return objb;
        else
            ...
    }
} 
```

这看起来很糟糕。有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T12:08:12.457

是的，使用反射。

您可以使用[Type.GetType](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)通过字符串获取`Type`类的实例，然后使用 实例化它`Activator.CreateInstance`，如下所示：

```
public MyObject Create(string pattern)
{
    Type t = Type.GetType(pattern);
    if (t == null) {
        throw new Exception("Type " + pattern + " not found.");
    }
    return Activator.CreateInstance(t);
} 
```

您也可以使用`Activator.CreateInstance(string, string)`重载，但这不会直接返回`Type`所需的新实例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T12:07:34.530

您可以使用 Reflection 或[System.Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)根据 Type 或 TypeName 作为字符串创建实例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T12:15:27.560

正如 Rudi Visser 所说，您应该使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)。

另外，要获得您的班级名称，您不应对其进行硬编码。如果你想使用你的 name 属性，只需写

```
public abstract class MyObject
{
    public string name 
    { 
        get
        {
            return this.GetType().Name;
        }
    }
    public bool IsObject(string pattern);
    ...
} 
```

如果您没有类的名称，只有一些代表它的字符串，那么您可以检查所有派生自的类`MyObject`

```
public MyObject Create(string pattern)
{
    Type[] types = Assembly.GetExecutingAssembly().GetTypes();
    foreach (Type type in types.Where(t => t.IsSubclassOf(typeof(MyObject))))
    {
        MyObject obj = (MyObject)Activator.CreateInstance(type);
        if (obj.name == pattern)
        {
            return obj;
        }
    }
    throw new Exception("Type " + pattern + " not found.");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T22:01:04.707

您提出的问题有很多很好的答案。但是，我建议您对这种类型的要求使用工厂模式。

您的“工厂”可以像向`GetNewMyObject(string pattern)`基类添加静态方法以及`protected static Dictionary<string, Type>`. 然后您的派生类可以简单地将它们的模式+类型添加到工厂（在静态构造函数中），允许将新的派生类添加到工厂而不修改基类。

这样，您的“模式”字符串不必与类型名称匹配，并且您也不需要进行任何逻辑模式匹配，因为您可以编写：

```
public static MyObject GetNewMyObject(string pattern)
{
  return (MyObject)Activator.CreateInstance(StaticTypeDictionary[pattern]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T12:32:14.423

可以像这样使用反射来完成......

```
 public object getInstance(string assemblyName, string className, object[] constructorParameters)
    {
        System.Reflection.Assembly asm = System.Reflection.Assembly.Load(assemblyName);
        return asm.CreateInstance(className, false, System.Reflection.BindingFlags.CreateInstance, null, constructorParameters, null, null);
    } 
```

assemblyName - 完整路径 + 程序集名称

className - 完全限定的类名

# android - Android：如何在 Gridview 中为图像设置标签？

> ID：13952111
> 
> 赞同：0
> 
> 时间：2012-12-19T12:04:46.947
> 
> 标签：android

嗨，谁能告诉我如何设置和获取 GridView 中图像的标签。提前谢谢各位小伙伴。我已经编写了以下代码，但它不起作用？这是正确的吗？

```
int jj=100;
    for(int j=0;j<ia.imageid.length;i++)
        {

        g.getChildAt(j).setTag(jj);
        jj++;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:08:37.680

在适配器的`getView`..

```
public View getView(int position, View convertView, ViewGroup parent) {
   View view;
   if(convertView == null) {
      view = inflater.inflate(R.layout.image, null);
   }
   else
      view = convertView;

   ImageView image = (ImageView)view.findViewById(R.id.image);
   image.setTag();
} 
```

# web-services - Web 服务最佳实践 - 服务器超时时间长于 http 客户端超时时间

> ID：13952122
> 
> 赞同：0
> 
> 时间：2012-12-19T12:05:12.953
> 
> 标签：web-services, rest, hbase

我正在尝试在 hbase 之上构建一个 Web 服务，因此代码大致如下：

```
@GET
@Path("/blabla")
@Override
public List<String> getEvents($$$params$$$) {
    ......
    //calling hbase query the events
    ......
} 
```

当 Hbase 服务关闭时，hbase Java API 不断重试连接到 Hbase 区域服务器 util，最终超时并抛出 RT 异常：

```
NoServerForRegionException: Unable to find region for event,,99999999999999 after 10 tries. 
```

逻辑没有问题，我这里的问题是 HttpClient 在 hbase 超时重试之前超时。然后我的 Web 服务 API 使用者没有响应，丑陋。

**问题 -**

如果您的服务器超时时间可能比 http 连接本身长，那么这里的最佳做法是什么？在这种情况下，如何让 Web 服务优雅地响应客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:39:05.397

将您扫描对象的兑现设置为某个合理的值。另一件事，由于您使用 Web 服务向用户显示结果，我假设您一次只能显示几行（或记录）。您可以使用 Hbase PageFilter 以便每次只获得指定的行数，而不必等待一次获得所有行。

# r - R中的seq（）函数

> ID：13952123
> 
> 赞同：1
> 
> 时间：2012-12-19T12:05:13.530
> 
> 标签：r

我对 R 中的函数有疑问`seq()`。我正在使用`sqldf`包连接和包装 R 代码围绕 sql select 语句。

我需要运行一个脚本 10 次，每次我选择指定数量的行（我正在创建一个基于频率分布的控制群组），即类似于

```
SELECT * FROM table
LIMIT 2

SELECT * FROM table
LIMIT 4 
```

依此类推，直到

```
SELECT * FROM table
LIMIT i 
```

其中`i`是指定为的序列`(2,4,6,8,10,12,10,9,7,3,1)`

但如果我写：

`seq(2,4,6,8,10,12,10,9,7,3,1)`我为`seq()`函数使用了太多参数。

我如何在 R 中解决这个问题，因为我不想以 1 的步长从 1 增加到 10 `seq(1,10)`。

希望我已经把问题说清楚了！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T12:14:29.387

我认为你在这里有一些误解。

`seq`生成一系列先验已知模式。你提到了一个例子`seq(from=1, to=10)`。另一个版本只是使用两个的倍数

```
seq(from=2, to=10, by=2) 
```

你正在做的是写下你想要的硬编码数字。因此，您可以将它们放入一个向量中`c`（这可能是我所知道的最基本的 R 函数......）

```
c(2,4,6,8,10,12,10,9,7,3,1) 
```

有关详细信息，请参阅`?seq`或`?c`。

# java - 在Java中组合和排序两个不同长度的数组

> ID：13952127
> 
> 赞同：7
> 
> 时间：2012-12-19T12:05:27.003
> 
> 标签：java, arrays, sorting

我正在为我的“问题”寻找解决方案，这不是一个丑陋的黑客。

在我的 Java 代码中，我有两个数组，两个数组的长度都未知（因此它们的长度可能不同）。我想像这样对它们进行排序：

```
Array A: {1, 2, 3, 4, 5}
Array B: {6, 7, 8}

New Array: {1, 6, 2, 7, 3, 8, 4, 5} 
```

有没有很好的方法来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T12:08:58.650

```
int[] res = new int[a.length + b.length];
int p = 0;
int last = Math.max(a.length, b.length);
for (int i = 0 ; i != last ; i++) {
    if (i < a.length) res[p++] = a[i];
    if (i < b.length) res[p++] = b[i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:32:29.923

If it is likely that there are many more in one array than the other, it should be faster to zip the first part and then bulk copy the rest using `System.arrayCopy`. It also simplifies dasblinkenlight's `for` loop by removing the `if`s.

```
int[] res = new int[a.length + b.length];
int p = 0;
//zip what we can
int last = Math.min(a.length, b.length);    
for (int i = 0; i != last; i++) {
    res[p++] = a[i];
    res[p++] = b[i];
}
//now add the remaining
int aRemain = a.length - last;
if(aRemain > 0) {
  System.arrayCopy(a, last, res, p, aRemain);
}
else
{
  int bRemain = b.length - last;
  if(bRemain > 0) {
    System.arrayCopy(b, last, res, p, bRemain);
  }
} 
```

# javascript - 如何在 JavaScript 中从前一周获取第一个日期和最后一个日期？

> ID：13952129
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:05:29.387
> 
> 标签：javascript, date

请任何人分享代码以在 JavaScript 中从当前日期查找前一周的第一个日期。例如，如果当前日期是 2012 年 12 月 19 日，我应该得到 2012 年 12 月 10 日和最后日期 2012 年 12 月 16 日作为结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:09:50.450

```
function getPreviousSunday()
{
var today=new Date();
return new Date().setDate(today.getDate()-today.getDay()-7);
}

function getPreviousMonday()
{
var today=new Date();
if(today.getDay() != 0)
  return new Date().setDate(today.getDate()-7-6);
else
  return new Date().setDate(today.getDate()-today.getDay()-6);
} 
```

# oop - 理解抽象工厂设计模式

> ID：13952132
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:05:38.623
> 
> 标签：oop, design-patterns

在抽象工厂设计模式中，一个类通过组合将对象实例化的责任委托给另一个对象。

有人可以用一些例子来解释它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:19:10.973

我会告诉你一个传统的例子。假设你有一个 UI 库。它实现了不同的 UI 组件，如按钮、滑块、单选按钮等。您还希望这些组件具有不同的外观，例如银色、深色、浅色、类似窗口、类似 gtk 等。可以使用抽象类，它为每个组件的创建和子类创建通用的东西，这些子类继承自抽象并仅指定差异：

```
class AbstractComponentFactory {

    public abstract Button createButton() {
        //implementation
    }

    public abstract Slider createSlider() {
        //implementation
    }
}

class SilverComponentFactory extends AbstractFactory {

    public Button createButton() {
        Button b = base.createButton();
        //customize the button
    }

    public Slider createSlider() {
        Slider b = base.createSlider();
        //customize the slider
    }

}

class WindowsComponentFactory extends AbstractFactory {

    public Button createButton() {
        Button b = base.createButton();
        //customize the button with windows look-and-feel
    }

    public Slider createSlider() {
        Slider b = base.createSlider();
        //customize the slider with windows look-and-feel
    }

} 
```

现在，如果您需要创建组件，您可以动态更改抽象工厂的实现：

```
public void createUI(AbstractComponentFactory f) {
     Button b = f.createButton();
     Slider s = f.createSlider();
}

//..
createUI(new SilverComponentFactory()); 
```

[这](https://upload.wikimedia.org/wikipedia/commons/a/a7/Abstract_factory.svg)是一个示例类图，我希望它不是那么复杂。

# autonomy - 删除用户资料

> ID：13952133
> 
> 赞同：0
> 
> 时间：2012-12-19T12:05:39.590
> 
> 标签：autonomy, interwoven, imanage

`WorkSite`是否可以使用 API删除用户？

我引用了以下 dll。

```
IManage.dll
IMANADMIN.dll
IMANEXTLib.dll 
```

我可以使用创建用户`IMANADMIN.NRTDatabase.CreateUser()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:56:54.323

据我所知，通过 API 是不可能的，您只能禁止用户登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T18:34:40.810

不，`Worksite`不允许删除用户。

只能`rename`通过`DbAdmin`（不可能使用`iManage API`）给另一个用户或禁用他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T18:37:49.807

您可以使用以下内容：

IMANADMIN.NRTDatabase.DeleteUser()

# javascript - 鼠标移动时的悬停延迟

> ID：13952138
> 
> 赞同：5
> 
> 时间：2012-12-19T12:05:50.147
> 
> 标签：javascript, jquery, navigation, hover

我有一个导航菜单，我希望当鼠标移动时，导航将延迟 200 毫秒。我怎样才能做到这一点？

示例：[http ://www.amazon.com/](http://www.amazon.com/)

当鼠标在导航等待中移动时，亚马逊已离开导航（按部门购物）。

```
<ul id="nav">
<li><a href="#">Menu 1</a>
    <ul>
        <li>Sub Menu 1</li>
        <li>Sub Menu 2</li>
    </ul>
</li>
<li><a href="#">Menu 2</a>
    <ul>
        <li>Sub Menu 3</li>
        <li>Sub Menu 4</li>
    </ul>
</li>
<li><a href="#">Menu 3</a></li>
<li><a href="#">Menu 4</a></li>
</ul> 
```

例如; 如果鼠标在“菜单 1”上并交叉移动到“子菜单 1”，“菜单 1”不应关闭。否则“菜单 1”应该关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:09:33.783

[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)是您正在寻找的脚本。

简单地说，它会检查你的鼠标是快还是慢。

# c# - 有没有办法使用任务友好的 SynchronizationContext 等待 IHttpHandler 中的任务？

> ID：13952139
> 
> 赞同：2
> 
> 时间：2012-12-19T12:05:54.000
> 
> 标签：c#, asp.net, asynchronous

ASP.NET 中是否有任何方法可以在 IHttpHandler 中执行异步操作，然后使用通过 web.config appsetting 启用的新 SynchronizationContext 等待任务完成`UseTaskFriendlySynchronizationContext`？

假设我们有类似下面的代码：

```
public void ProcessRequest(HttpContext context)
{
   var task = GetAndStartAsyncTask(context);

   // do some work

   // Wait for task to complete.
   task.Wait();

   // etc.
} 
```

在这里，我希望在当前的 asp.net 同步上下文中触发任何异步回调。如果设置`UseTaskFriendlySynchronizationContext`为 false，则此代码将起作用。但是，启用它并且此处显示的代码将死锁（据我所知，因为任务排队作为当前上下文的延续，但链中的第一个任务（ProcessRequest）在等待时阻塞）。

有什么办法可以使这项工作？

注意：我在这里使用的是，`IHttpHandler`而*不是*`IHttpAsyncHandler`。

# extjs - 带有代理的 extjs 树库

> ID：13952140
> 
> 赞同：4
> 
> 时间：2012-12-19T12:06:04.330
> 
> 标签：extjs, store, models, treepanel

我正在创建一个 MVC extjs 应用程序。我有一个带有商店的树形面板，它正在从 php 源加载数据。我得到以下 json 格式的响应：

```
[
{
    "text": "Home",
    "leaf": true,
    "dbName": "NULL",
    "children": []
},
{
    "text": "Moje Firma s.r.o.",
    "leaf": false,
    "expanded": false,
    "children": [
        {
            "text": "Vydane",
            "leaf": true,
            "dbName": "demo"
        },
        {
            "text": "Prijate",
            "leaf": true,
            "dbName": "demo"
        }
    ]
},
{
    "text": "Já Živnostník",
    "leaf": false,
    "expanded": false,
    "children": [
        {
            "text": "Vydane",
            "leaf": true,
            "dbName": "demo_de"
        },
        {
            "text": "Prijate",
            "leaf": true,
            "dbName": "demo_de"
        }
    ]
},
{
    "text": "Nezisková organizace",
    "leaf": false,
    "expanded": false,
    "children": [
        {
            "text": "Vydane",
            "leaf": true,
            "dbName": "demo_neziskova"
        },
        {
            "text": "Prijate",
            "leaf": true,
            "dbName": "demo_neziskova"
        }
    ]
},
{
    "text": "Příspěvková organizace",
    "leaf": false,
    "expanded": false,
    "children": [
        {
            "text": "Vydane",
            "leaf": true,
            "dbName": "demo_prispevkovka"
        },
        {
            "text": "Prijate",
            "leaf": true,
            "dbName": "demo_prispevkovka"
        }
    ]
},
{
    "text": "Moje Firma SK s.r.o.",
    "leaf": false,
    "expanded": false,
    "children": [
        {
            "text": "Vydane",
            "leaf": true,
            "dbName": "demo_sk"
        },
        {
            "text": "Prijate",
            "leaf": true,
            "dbName": "demo_sk"
        }
    ]
}
] 
```

我的店铺：

```
Ext.define('Statistics.store.Menu', {
extend: 'Ext.data.TreeStore',
model: 'Menu',
autoLoad: true,
autoSync: true,

proxy   : {
    type : 'ajax',
    url  : 'data.json',
    reader: {
        type: 'json'
    }
}

}); 
```

和型号：

```
Ext.define('Statistics.model.Menu', {
extend: 'Ext.data.Model',

fields: [
    {name: 'text', type: 'string'},
    {name: 'leaf', type: 'boolean'},
    {name: 'expanded', type: 'boolean', defaultValue: false},
    {name: 'dbName', type: 'string', defaultValue: 'NULL'}
],

}); 
```

当数据保存在 .json 文件中时，此配置有效。但是 id 不起作用，当它们从 php 源加载时。

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T10:34:15.337

服务器响应必须如下所示：

```
{
   success: true,
   children: // here is the array of items
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:10:47.213

您的字段显示 db_name 和 json 响应显示“dbName”。你能检查一下是不是错字？

# spring - 如何在 Spring WebFlow 中发送参数 SubFlow

> ID：13952143
> 
> 赞同：4
> 
> 时间：2012-12-19T12:06:10.290
> 
> 标签：spring, spring-webflow

我有主要的路线流程：

```
<view-state id="addRoute" model="route">

...
    <transition on="editBlock" to="editBlock" validate="false" bind="true">
       ...
    </transition>

</view-state>

<subflow-state id="editBlock" subflow="block">

</subflow-state> 
```

通过单击 editBlock 按钮，我想转到 Block Flow 并编辑 Block。

我想把它做成子流。

块流：

```
<on-start>
    <set name="flowScope.id" value="requestParameters.id"/>
    <evaluate expression="new java.util.ArrayList()" result="flowScope.attributes"/>
    <evaluate expression="new java.util.ArrayList()" result="flowScope.visibility"/>
    <set name="flowScope.folderId" value="requestParameters.folderId"/>
    <set name="flowScope.path" value="requestParameters.path"/>
    <evaluate expression="folderBean.treeAsMap" result="flowScope.tree" />
</on-start> 
```

如何将参数从主流发送到子流？我需要提供 3 个参数：

id、folderId 和路径，如上所述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:54:55.017

在您的 Block FLOW 中，您可以输入：

```
<input name="id"/>
<input name="folderId"/>
<input name="path"/> 
```

然后在您的路线流中，您可以这样使用它：

```
<subflow-state id="editBlock" subflow="block">
    <input name="id" value="flowScope.id"/>
    <input name="folderId" value="flowScope.folderId"/>
    <input name="path" value="flowScope.path"/>
</subflow-state> 
```

此外，如果您使用参数 id=123&folderId=456&path=path 调用 Block Flow，那么这些参数将自动映射到 flowScope 中设置的同名输入。所以你不再需要这些`set`元素`<on-start>`了。

也仅供参考，您可以使用`<input name="visibility" type="java.util.ArrayList"/>`并完全`<input name="tree" value="folderBean.treeAsMap"/>`摆脱您的`<on-start>`。

# windows - 在逆向工程中分配我自己的文件路径

> ID：13952147
> 
> 赞同：0
> 
> 时间：2012-12-19T12:06:16.137
> 
> 标签：windows

我正在从事逆向工程，我想在不使用打开对话框的情况下提供自己的文件路径，例如编写固定文件路径并在每次软件启动时从中读取文件。我试图在 .data 部分中提供文件名软件，但它只检索十六进制数字而不是字符串。

有什么方法可以连接 Windows API 以打开文件吗？或者有什么方法可以在内存中写入并在每次软件启动时读取它？任何建议或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:17:28.097

我认为您可能正在寻找的是“拦截系统调用”，快速谷歌搜索想出了这个链接：http: [//jbremer.org/intercepting-system-calls-on-x86_64-windows/](http://jbremer.org/intercepting-system-calls-on-x86_64-windows/)所以应该是可能的而且不太难。

基本上，如果您设法拦截对[GetOpenFileName](http://msdn.microsoft.com/en-us/library/ms646927%28VS.85%29.aspx)的调用并将其替换为自定义实现，您应该能够做您想做的事情（即将硬编码的文件路径放入 LPOPENFILENAME 结构中的适当缓冲区）

至于您尝试修改已编译的代码（我假设您所指的逆向工程是反汇编和修改二进制文件）应该可以做到，但这需要对 Windows 二进制体系结构和汇编语言有深入的了解。

# c - 从中缀创建 rpn 表达式

> ID：13952148
> 
> 赞同：0
> 
> 时间：2012-12-19T12:06:26.137
> 
> 标签：c

我试图将中缀表示法表达式转换为后缀表示法（RPN）。这是功能：

```
String createRPN(String infix)
{
     Stack *stack = node_alloc(1); //stack pointer
     stack->next = NULL;
     String ptr; //index
     String RPN = malloc(strlen(infix) + 1);
     String start = RPN;

     for (ptr = infix; *ptr != '\0'; ptr++)
     {
         if (isNum(*ptr) || (*ptr == ' ')) *RPN++ = *ptr;
         else if (*ptr == '(') push(&stack, '(');
         else if (isOper(*ptr))
         {
              while ((stack != NULL) && (stack->value != '('))
              {
                    if (compareOper(stack->value, *ptr)) *RPN++ = pop(&stack);
                    else break;
              }
              push(&stack, *ptr);
         } 
         else if (*ptr == ')')
         {
              while ((stack != NULL) && (stack->value != '(')) *RPN++ = pop(&stack);
              if (stack != NULL) pop(&stack);
         }
         else;
     }
     while (stack != NULL) *RPN++ = pop(&stack);
     *RPN = '\0';

     return start;
} 
```

这是堆栈代码：

```
typedef struct node
{
   int value;
   struct node *next;   
}Stack;

void push(Stack **node, int value)
{
     Stack *temp = node_alloc(1);
     if (temp == NULL) return;
     temp->value = value;
     temp->next = *node;
     *node = temp;
}

int pop(Stack **node)
{
    if (*node == NULL) return 0;

    int num = (*node)->value;
    Stack *temp = (*node)->next;
    free(*node);
    *node = (temp == NULL) ? NULL : temp;

    return num;
} 
```

但是在我输入中缀字符串后，例如：

```
2 * ((3 + 5) + (6 + 2) * 5) 
```

程序崩溃，我需要你的帮助来检测我的错误..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:16:07.623

这个：

```
 String RPN = malloc(sizeof(char*) * strlen(infix)); 
```

都是错的。

`sizeof (char *)`当您应该以纯字符思考时，您正在分配（指向字符的指针）的单位。你也不允许终止字符。

你需要：

```
String RPN = malloc(strlen(infix) + 1); 
```

（永远）乘以 没有意义`sizeof (char)`，因为它保证为 1。

# java - 将数组中的数据从一个类传递到另一个类

> ID：13952150
> 
> 赞同：2
> 
> 时间：2012-12-19T12:06:36.713
> 
> 标签：java, sorting, collections, arraylist

我的代码中的一个错误阻止它显示以下输出：

> 宝马 别克 奥迪 大众 雪佛兰 福特 欧宝 雷诺 标致 雪铁龙 野马 奔驰 菲亚特

然后是相同的列表，但按字母顺序排序。这是一个包含 3 个类的小代码。
请复制并粘贴代码以自己查看。

```
import java.util.Collections;

import java.util.Arrays;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;
import java.util.ListIterator;

public class Data implements List<String> {

public static String[] brands = { "BMW","Buick", "Audi", "VW","Chevrolet", "Ford", "Opel",
    "Renault", "Peugeot", "Citroen","Mustang", "Mercedes", "Fiat" };

public Data() {
}

}

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Brands {

    List<String> brands = new ArrayList<String>();

    public Brands(){
        this(null);
    }

    public Brands(Data data){
        this.brands = data;
        }

    public List<String> sortList(){
        Collections.sort(brands);   
    return brands;

}

    public List<String> reverseTheOrder(){
        Collections.reverse(brands);    
        return brands;

    }

    public String toString(){
        return ""+brands+""+sortList();

    }

}

public class Brandstester {

    public static void main(String[] args) {

        Data data = new Data();
        Brands brands = new Brands(data);
        System.out.println(brands);
        brands.sortList();
        System.out.println(brands);
        brands.reverseTheOrder();
        System.out.println(brands);

    }

} 
```

# ios - 如何在 iOS 上使用 CoreMIDI？

> ID：13952151
> 
> 赞同：14
> 
> 时间：2012-12-19T12:06:38.310
> 
> 标签：ios, coremidi

我一直无法找到有关 iOS 版 CoreMIDI 的太多信息。甚至可以通过向设备本身发送消息来播放 MIDI 声音。iPhone 或 iPad 是否安装了 MIDI 设备，或者您是否必须连接设备才能与之交互？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-17T08:05:04.957

这已经晚了几年，但它可能会帮助其他人，就像它帮助了我一样。这个[网站](http://comelearncocoawithme.blogspot.ca/2011/08/reading-from-external-controllers-with.html)帮助我从外部 MIDI 键盘读取 MIDI 数据。连接是最棘手的部分，但本教程将引导您完成它。

这是我创建的课程。

**MIDI控制器.h**

```
#import <Foundation/Foundation.h>

@interface MIDIController : NSObject

@property NSMutableArray *notes;

@end 
```

**MIDI控制器.m**

```
#import "MIDIController.h"

#include <CoreFoundation/CoreFoundation.h>
#import <CoreMIDI/CoreMIDI.h>

#define SYSEX_LENGTH 1024
#define KEY_ON 1
#define KEY_OFF 0

@implementation MIDIController

- (id)init {
    if (self = [super init]) {
        _notes = [[NSMutableArray alloc] init];
        [self setupMidi];
    }
    return self;
}

- (void) setupMidi {
    MIDIClientRef midiClient;
    checkError(MIDIClientCreate(CFSTR("MIDI client"), NULL, NULL, &midiClient), "MIDI client creation error");

    MIDIPortRef inputPort;
    checkError(MIDIInputPortCreate(midiClient, CFSTR("Input"), midiInputCallback, (__bridge_retained void *)self, &inputPort), "MIDI input port error");

    checkError(connectMIDIInputSource(inputPort), "connect MIDI Input Source error");

}

OSStatus connectMIDIInputSource(MIDIPortRef inputPort) {
    unsigned long sourceCount = MIDIGetNumberOfSources();
    for (int i = 0; i < sourceCount; ++i) {
        MIDIEndpointRef endPoint = MIDIGetSource(i);
        CFStringRef endpointName = NULL;
        checkError(MIDIObjectGetStringProperty(endPoint, kMIDIPropertyName, &endpointName), "String property not found");
        checkError(MIDIPortConnectSource(inputPort, endPoint, NULL), "MIDI not connected");
    }

    return noErr;
}

void midiInputCallback(const MIDIPacketList *list, void *procRef, void *srcRef) {
    MIDIController *midiController = (__bridge MIDIController*)procRef;

    UInt16 nBytes;
    const MIDIPacket *packet = &list->packet[0]; //gets first packet in list

    for(unsigned int i = 0; i < list->numPackets; i++) {
        nBytes = packet->length; //number of bytes in a packet

        handleMIDIStatus(packet, midiController);

        packet = MIDIPacketNext(packet);
    }
}

void handleMIDIStatus(const MIDIPacket *packet, MIDIController *midiController) {
    int status = packet->data[0];
    //unsigned char messageChannel = status & 0xF; //16 possible MIDI channels

    switch (status & 0xF0) {
        case 0x80:
            updateKeyboardButtonAfterKeyPressed(midiController, packet->data[1], KEY_OFF);
            break;
        case 0x90:
            //data[2] represents the velocity of a note
            if (packet->data[2] != 0) {
                updateKeyboardButtonAfterKeyPressed(midiController, packet->data[1], KEY_ON);
            }//note off also occurs if velocity is 0
            else {
                updateKeyboardButtonAfterKeyPressed(midiController, packet->data[1], KEY_OFF);
            }
            break;
        default:
            //NSLog(@"Some other message");
            break;
    }

}

void updateKeyboardButtonAfterKeyPressed(MIDIController *midiController, int key, bool keyStatus) {
    NSMutableArray *notes = [midiController notes];

    //key is being pressed
    if(keyStatus) {
        [notes addObject:[NSNumber numberWithInt:key]];
    }
    else {//key has been released
        for (int i = 0; i < [notes count]; i++) {
            if ([[notes objectAtIndex:i] integerValue] == key) {
                [notes removeObjectAtIndex:i];
            }
        }
    }
}

void checkError(OSStatus error, const char* task) {
    if(error == noErr) return;

    char errorString[20];
    *(UInt32 *)(errorString + 1) = CFSwapInt32BigToHost(error);
    if(isprint(errorString[1]) && isprint(errorString[2]) && isprint(errorString[3]) && isprint(errorString[4])) {
        errorString[0] = errorString[5] = '\'';
        errorString[6] = '\0';
    }
    else
        sprintf(errorString, "%d", (int)error);

    fprintf(stderr, "Error: %s (%s)\n", task, errorString);
    exit(1);
}

@end 
```

## 补充笔记

**midiInputCallback 函数**

*   `midiInputCallback`是通过 MIDI 设备（键盘）发生 MIDI 事件时调用的函数
    *注意：这是您可以开始处理 MIDI 信息的地方*

**处理MIDI状态函数**

*   `handleMIDIStatus`获取 MIDI 数据包（其中包含有关播放内容和 MIDIController 实例的信息
    *注意：您需要对 MIDIController 的引用，以便您可以填充类的属性......在我的情况下，我存储所有播放的音符，按 MIDI 编号, 在一个数组中供以后使用*

*   当`status`is `0x90`，这意味着一个音符已被触发，如果它的速度为 0，则认为它没有播放...我需要添加这个 if 语句，因为它不能正常工作
    *注意：我只处理`key on`和`key off`事件，所以你会增加 switch 语句来处理更多的 MIDI 事件*

**updateKeyboardButtonAfterKeyPressed 方法**

*   这是我用来存储播放的音符的一种方法，一旦释放键，我就会从这个数组中删除音符

我希望这有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-01T11:57:55.710

你应该看看[pete goodliffe 的博客](http://goodliffe.blogspot.fr/2010/10/using-coremidi-in-ios-example.html)，他慷慨地提供了一个示例项目。它对我开始编写 CoreMIDI 帮助很大。

现在关于您的问题，在 iOS 上，主要使用 CoreMIDI 网络会话。同一“网络会话”的参与者相互发送消息。

例如，您在 Mac 上配置网络会话（使用音频 MIDI 设置工具），您可以将 iOS 设备连接到它。这样，您可以将消息从 iOS 发送到您的 OSX 主机，反之亦然。

CoreMIDI 网络会话依赖 RTP 协议来传输 MIDI 消息和 Bonjour 来发现主机。

此外，CoreMIDI 还可以处理连接到系统的 MIDI 接口，但 iOS 设备默认没有物理 MIDI 接口。如果您想将 iPhone 直接连接到合成器，则必须购买外部硬件。但是，iPad 可以通过相机套件连接到 USB 类兼容的 Midi 接口。

另一件事是，在独立的 iOS 设备上，您可以使用本地 CoreMIDI 会话从/向另一个 CoreMIDI 兼容应用程序发送或接收消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-20T07:30:01.247

```
import UIKit
import CoreMIDI

class ViewController : UIViewController {

    // MARK: - Properties -

    var inputPort : MIDIPortRef = 0

    var source : MIDIDeviceRef = 0

    var client = MIDIClientRef()

    var connRefCon : UnsafeMutableRawPointer?

    var endpoint : MIDIEndpointRef?

    // MARK: - Lifecycle -

    override func viewDidLoad() {

        super.viewDidLoad()

        // Do any additional setup after loading the view.

        print("viewDidLoad")

        // endpoint

        self.endpoint = MIDIGetSource(MIDIGetNumberOfSources()-1)

        // USB Device References

        let sources = getUSBDeviceReferences()

        if sources.count > 0 {

            self.source = sources.first!

        }

        print("source: \(source)")

        // create client

        DispatchQueue.global().async {

            self.createClient()

        }

    }

    // MARK: - USB Device References -

    /// Filters all `MIDIDeviceRef`'s for USB-Devices

    private func getUSBDeviceReferences() -> [MIDIDeviceRef] {

        var devices = [MIDIDeviceRef]()

        for index in 0 ..< MIDIGetNumberOfDevices() {

            print("index: \(index)")

            let device = MIDIGetDevice(index)

            var list : Unmanaged<CFPropertyList>?

            MIDIObjectGetProperties(device, &list, true)

            if let list = list {

                let dict = list.takeRetainedValue() as! NSDictionary

                print("dict: \(dict)")

                if dict["USBLocationID"] != nil {

                    print("USB MIDI DEVICE")

                    devices.append(device)

                }

            }

        }

        return devices

    }

    // MARK: - Client -

    func createClient() {

        print("createClient")

        let clientName = "Client" as CFString

        let err = MIDIClientCreateWithBlock(clientName, &client) { (notificationPtr: UnsafePointer<MIDINotification>) in
            let notification = notificationPtr.pointee

            print("notification.messageID: \(notification.messageID)")

            switch notification.messageID {

                case .msgSetupChanged: // Can ignore, really
                    break

                case .msgObjectAdded:
                    let rawPtr = UnsafeRawPointer(notificationPtr)
                    let message = rawPtr.assumingMemoryBound(to: MIDIObjectAddRemoveNotification.self).pointee
                    print("MIDI \(message.childType) added: \(message.child)")

                case .msgObjectRemoved:
                    let rawPtr = UnsafeRawPointer(notificationPtr)
                    let message = rawPtr.assumingMemoryBound(to: MIDIObjectAddRemoveNotification.self).pointee
                    print("MIDI \(message.childType) removed: \(message.child)")

                case .msgPropertyChanged:
                    let rawPtr = UnsafeRawPointer(notificationPtr)
                    let message = rawPtr.assumingMemoryBound(to: MIDIObjectPropertyChangeNotification.self).pointee
                    print("MIDI \(message.object) property \(message.propertyName.takeUnretainedValue()) changed.")

                case .msgThruConnectionsChanged:
                    fallthrough

                case .msgSerialPortOwnerChanged:
                    print("MIDI Thru connection was created or destroyed")

                case .msgIOError:
                    let rawPtr = UnsafeRawPointer(notificationPtr)
                    let message = rawPtr.assumingMemoryBound(to: MIDIIOErrorNotification.self).pointee
                    print("MIDI I/O error \(message.errorCode) occurred")

                default:
                    break

            }

        }

        // createInputPort from client

        self.createInputPort(midiClient: self.client)

        if err != noErr {
            print("Error creating MIDI client: \(err)")
        }

        // run on background for connect / disconnect

        let rl = RunLoop.current

        while true {
            rl.run(mode: .default, before: .distantFuture)
        }

    }

    // MARK: - Input Port -

    func createInputPort(midiClient: MIDIClientRef) {

        print("createInputPort: midiClient: \(midiClient)")

        MIDIInputPortCreateWithProtocol(
            midiClient,
            "Input Port" as CFString,
            MIDIProtocolID._1_0,
            &self.inputPort) {  [weak self] eventList, srcConnRefCon in

            //

            let midiEventList: MIDIEventList = eventList.pointee

            //print("srcConnRefCon: \(srcConnRefCon)")
            //print("midiEventList.protocol: \(midiEventList.protocol)")

            var packet = midiEventList.packet

            //print("packet: \(packet)")

            (0 ..< midiEventList.numPackets).forEach { _ in

                //print("\(packet)")

                let words = Mirror(reflecting: packet.words).children
                words.forEach { word in

                    let uint32 = word.value as! UInt32
                    guard uint32 > 0 else { return }

                    let midiPacket = MidiPacket(
                        command: UInt8((uint32 & 0xFF000000) >> 24),
                        channel: UInt8((uint32 & 0x00FF0000) >> 16),
                        note: UInt8((uint32 & 0x0000FF00) >> 8),
                        velocity: UInt8(uint32 & 0x000000FF))

                    print("----------")
                    print("MIDIPACKET")
                    print("----------")
                    midiPacket.printValues()

                }

            }

        }

        MIDIPortConnectSource(self.inputPort, self.endpoint ?? MIDIGetSource(MIDIGetNumberOfSources()-1), &self.connRefCon)

    }

}

class MidiPacket : NSObject {

    var command : UInt8 = 0
    var channel : UInt8 = 0
    var note : UInt8 = 0
    var velocity : UInt8 = 0

    init(command: UInt8, channel: UInt8, note: UInt8, velocity: UInt8) {

        super.init()

        self.command = command
        self.channel = channel
        self.note = note
        self.velocity = velocity

    }

    func printValues(){

        print("command: \(self.command)")
        print("channel: \(self.channel)")
        print("note: \(self.note)")
        print("velocity: \(self.velocity)")

    }

} 
```

# c# - 使 control.Parsecontrol(HTMLString) 通过 Div 元素而不是 Br 元素过滤 Literalcontrol

> ID：13952152
> 
> 赞同：7
> 
> 时间：2012-12-19T12:06:39.880
> 
> 标签：c#, asp.net, controls

这是我在这个网站上提出的第一个问题，所以我对我提前做出的任何错误表示歉意，但是我会尽可能地提出这个问题。

我发现我的问题有点难以解释，但归结为：

我有一大串 HTML，它是通过从 Web 服务中检索 XML 文件并使用 XSLT 将其转换为一大串 HTML 来生成的。然后我将其解析为一个 Control 集合，添加一些事件处理程序并将其添加到 HTMLPlaceholder 和万岁一切正常。

但是，由于这个 HTML 字符串几乎包含了我的整个网站，并且正在无法一次处理所有标记的手持终端上运行，因此我过滤了我发送的标记，但这会带来一个问题。

`Div`元素不能被过滤掉而不丢失`Div`我想要保留的元素。这是因为 Parsecontrol 将我的`Div`元素切成两半并将它们转换为按`br`元素排序的 Literalcontrols。

显示我的代码有点困难，但这里是一个例子：

```
//html contains the auto generated HTML 
ctrl = ParseControl (html);

            for ( int i = ctrl.Controls.Count - 1 ; i >= 0 ; --i )
            {

                string MenuId = "";
                Control theControl = ctrl.Controls[i];

                if ( theControl is Button )
                // Code that filters buttons
                if ( theControl is TextBox)
                // Code that filters textboxes

                if ( theControl is LiteralControl )
                {
                    LiteralControl literal = theControl as LiteralControl;

                   //This checks if the Div element I'm looking for exists
                   //If it does, I want to keep it
                    bool contains = literal.Text.Contains ("<div id=\"" + ParentDiv);
                    if ( contains )
                        MenuId = ParentDiv;
                }

                if ( MenuId != ParentDiv )
                {
                    ctrl.Controls.RemoveAt (i);
                }

            } 
```

当我到达 LiteralControl 部分时，事情就出错了。按钮和文本字段工作正常。然而，LiteralControl 将我的 Div 元素切成两半并按`br`元素过滤。我的`div`元素如下所示（为简洁而编辑）：

```
<div class="hide" id="TB_24000" >
<br>
<Textbox elements>
<Button elements>
<Label elements>
<br>
<Textbox elements>
<Button elements>
<Label elements>
<br>
<input type="button" id="btnBack" value="Tilbage" class="BackandResetButtons" onclick="backButton(this,document.getElementById('MenuLevel1'),document.getElementById('TB_24000')); return false;"></div> 
```

但我的 LiteralControl 元素如下所示（未编辑）：

```
<br><input type="button" id="btnBack" value="Tilbage" class="BackandResetButtons" onclick="backButton(this, document.getElementById('TB_33999'),document.getElementById('TB_38400'));&#xA;          "></div> 
```

接下来：

```
<br><label class="label">FRAGT</label><br> 
```

接下来：

```
<br><label class="label">SPEDITØR</label><br> 
```

如您所见，我的 LiteralControls 是基于`br`元素的，但问题是我想基于`Div`元素进行过滤。但是，如果不诉诸肮脏且坦率地不受欢迎的黑客攻击，这似乎是不可能的。

所以我的问题是：如何根据`Div`元素而不是`Br`元素进行过滤？我可以过滤添加功能的按钮和文本框，但我的布局和站点取决于我的`Div`元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:15:14.803

尝试`BR`像这样关闭你的元素： `<br />` 我认为解析器被`BR`没有结束标签的元素弄糊涂了。

# android - ImageView 背景点击

> ID：13952153
> 
> 赞同：1
> 
> 时间：2012-12-19T12:06:43.377
> 
> 标签：android, background, imageview, drawable, edit

我的应用程序连续有 5 个“选项卡”（图像视图），我为所有这些选项卡创建了 onClick 方法，因为当您单击它们时，它们会将 URL 更改为我的 Web 视图。（只是解释一下，以便您了解应用程序的想法）我想更改我所在的“选项卡”（图像视图）上的背景（比如说 tab1），当您单击另一个选项卡（例如 tab4）时，背景tab1 消失并出现在 tab4 上。

代码：

```
public void onWelcome(View V)
    {
        WebView htmlContent = (WebView) findViewById(R.id.webViewer);
        htmlContent.loadUrl("URL1");
        ImageView imgV = (ImageView) findViewById(R.id.tab1);
        imgV.setImageDrawable(Drawable drawable); /*i do not understand this line, someone said this is how it's done*/
    }
    public void onProgram(View V)
    {
        WebView htmlContent = (WebView) findViewById(R.id.webViewer);
        htmlContent.loadUrl("URL2");
    }
    public void onNews(View V)
    {
        WebView htmlContent = (WebView) findViewById(R.id.webViewer);
        htmlContent.loadUrl("URL3");
    }
    public void onContact(View V)
    {
        WebView htmlContent = (WebView) findViewById(R.id.webViewer);
        htmlContent.loadUrl("URL4");
    }
    public void onPictures(View V)
    {
        WebView htmlContent = (WebView) findViewById(R.id.webViewer);
        htmlContent.loadUrl("URL5");
    } 
```

正如我所说，我不明白如何使用这种方法`.setImageDrawable(Drawable drawable);`

我有一个名为`img_selected`drawable 的图像，我会在 XML 文件中写入 `"android:background="@drawable/img_selected"`

我如何在 onclick 方法中做同样的事情？当我点击另一个标签时如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:20:49.283

这些方法的方便之处在于点击的视图已经通过了。所以你需要对视图做的任何事情都可以通过参数来完成。（这里是`View V`）

```
public void onWelcome(View V)
    {
        WebView htmlContent = (WebView) findViewById(R.id.webViewer);
        htmlContent.loadUrl("URL1");
        V.setImageResource(R.drawable.img_selected); 
    } 
```

这很简单。很像`findViewById`，该方法会将视图的图像资源设置`id`为传入的任何内容。要引用`drawable`代码中的特定内容，您可以使用上述内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:14:24.037

您的主要活动与

```
TabHostActivity extends TabActivity implements OnTabChangeListener
{ 
     tabHost.setOnTabChangedListener(this);
     tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundColor(Color.parseColor("#FFA500")); // selected
     tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).getLayoutParams().height = 70;
} 
```

# ruby-on-rails - NameError：未定义的局部变量或方法“desired_preferences”

> ID：13952158
> 
> 赞同：0
> 
> 时间：2012-12-19T12:06:50.670
> 
> 标签：ruby-on-rails, ruby, cucumber, watir, watir-webdriver

我创建了一个带有方法的模块

```
module Adding_preferences
  def desired_preferences            
    @preference = %w(motabilitySpecialist newCars bodyshop filter8 filter7).each do |selection|            
      @browser.label(:for,  selection ).click    
    end
  end
end 
```

我已将此模块包含在一个类中：

```
class Pages
  include Adding_preferences

  attr_accessor :browser, :preference

  def initialize
    @browser = Watir::Browser.new :ff
  end
end

World do
  Pages.new
end 
```

我在 Cucumber 场景中调用此方法

```
When /^I select a desired preference$/ do
  desired_preferences
end 
```

但是在运行时我收到一个错误，“NameError：未定义的局部变量或方法‘desired_preferences’”。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:14:46.087

当您将模块包含到类中时，您可以在此类的实例方法中使用此方法。您不能在显示来自包含模块的模型的数据的视图中调用包含的方法。对我来说，您似乎只是不在`desired_preferences`实例方法中使用该方法。

如果这仍然不能帮助您，请向我们展示您尝试调用该方法的代码的和平。

// Module的命名不规范。您应该调用它而`module AddingPreferences` 不是，`module Adding_preferences`并且应该命名文件`adding_preferences.rb`然后尝试`include AddingPreferences`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:35:00.007

花一些时间更熟悉 Ruby 的类/模块/对象/方法继承模型对您来说是个好主意，因为您构建代码的方式有点混乱。

然而，一个简单的尝试（我不保证它会完美地工作）是以下修改：

将实例化的 Pages 类分配给类实例变量：

```
World do
  @page = Pages.new
end 
```

...然后在您的步骤定义中使用该实例变量...

```
When /^I select a desired preference$/ do
  @page.desired_preferences
end 
```

我希望这会有所帮助！

# ruby-on-rails - heroku上的sunspot_solr错误？

> ID：13952162
> 
> 赞同：0
> 
> 时间：2012-12-19T12:07:11.223
> 
> 标签：ruby-on-rails, ruby, solr, sunspot-rails, sunspot-solr

我`'sunspot_rails', '~> 2.0.0.pre.120415'`在我的 rails 应用程序中使用 Solr 搜索并将其部署在 heroku（两个单独的应用程序）上。它在一个应用程序上运行良好，但在另一个应用程序上抛出错误。

我检查了 heroku 环境，发现 - 一个应用程序在 cedar 堆栈上，而 ruby​​ 版本是 1.9.2p290。（工作正常）另一个在竹栈上，红宝石版本是 1.9.2p180（抛出错误）

那么，这是 ruby​​ 版本问题还是 heroku 堆栈问题？开发环境上的 Ruby 版本是 1.9.2p290。

**错误**

```
$ heroku run rake sunspot:reindex
Running rake sunspot:reindex attached to terminal... up, run.8567
rake aborted!
uninitialized constant Sunspot::Adapters::Registry::Forwardable
/app/.bundle/gems/ruby/1.9.1/gems/sunspot-2.0.0.pre.120925/lib/sunspot/adapters.rb:310:in `<class:Registry>'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot-2.0.0.pre.120925/lib/sunspot/adapters.rb:309:in `<module:Adapters>'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot-2.0.0.pre.120925/lib/sunspot/adapters.rb:34:in `<module:Sunspot>'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot-2.0.0.pre.120925/lib/sunspot/adapters.rb:1:in `<top (required)>'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot-2.0.0.pre.120925/lib/sunspot.rb:18:in `block in <top (required)>'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot-2.0.0.pre.120925/lib/sunspot.rb:15:in `each'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot-2.0.0.pre.120925/lib/sunspot.rb:15:in `<top (required)>'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot_rails-2.0.0.pre.120925/lib/sunspot/rails.rb:1:in `<top (required)>'
/app/.bundle/gems/ruby/1.9.1/gems/sunspot_rails-2.0.0.pre.120925/lib/sunspot_rails.rb:6:in `<top (required)>'
/app/config/application.rb:7:in `<top (required)>'
/app/Rakefile:4:in `require'
/app/Rakefile:4:in `<top (required)>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:55:08.987

我找到了解决方案。

实际上这是heroku的环境问题。在本地系统上，ruby版本是ruby 1.9.2p290，在heroku上是ruby 1.9.2p180。Ruby 1.9.2p180 不包含“可转发”模块。所以我只需要在我的应用程序中包含“Forwardable”模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:23:31.237

为了更清楚，在 adapters.rb (sunspot/lib/sunspot/adapters.rb) 的顶部，添加以下行：

```
 require 'forwardable'

 module Sunspot
   #
   # Sunspot works by saving references to the primary key (or natural ID) of 
```

# yii - Yii：FileField 和 TextField 上的客户端验证

> ID：13952163
> 
> 赞同：1
> 
> 时间：2012-12-19T12:07:13.920
> 
> 标签：yii, validation, filefield

我有一个带有文件字段和普通文本字段的 yii 表单，用于提供外部图像 url。我设法让正常的服务器验证工作，它检查两个表单字段中的一个是否已填写（因为您可以提供本地文件以供上传或外部图片 URL）。需要注意的重要一点是，“文件字段”的属性值似乎仅在`$_POST`设置 var 后才可用，这意味着模型类中的普通自定义验证规则将不起作用，因为`$_POST`文件字段的值仅提交后可用（在`$_FILES`var 中）。

但是，如果您查看下面我提供的图片，我还想要一个 ClientSide Validaton，以便用户立即获得反馈，即不允许填写这两个字段。但是我该怎么做呢？我在这个问题上坐了大约 2 天，一半的时间都在寻找解决方案……我是 Yii 的新手。

[http://www.prism-informatics.com/images/demo.png](http://www.prism-informatics.com/images/demo.png)

最好的祝愿，S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:04:56.937

我不完全确定您的问题是什么，因为您没有提供任何代码，但我假设您忘记了：

```
public function rules()
{
    return array(
        array('image', 'file', 'types'=>'jpg, gif, png'),
    );
} 
```

# sql - MS-Access 2003 SQL 修改，用于根据日期重置总和值

> ID：13952164
> 
> 赞同：3
> 
> 时间：2012-12-19T12:07:17.323
> 
> 标签：sql, ms-access

我有一个查询可以完美地提取数据，但有一个例外，我希望数据总和在周年纪念日重新开始。我目前的查询是；

```
"qry_Vac2"
UserID    Category    Gain    Used    Left 
```

查询 SQL；

```
SELECT 
    SchedulingLog.UserID,
    SchedulingLog.Category,
    Sum(IIf([CatDetail] Like 'Ann*',[Value],0))
    AS Gain, Sum(IIf([CatDetail] Like '*Used*',[Value],0))+Sum(IIf([CatDetail] Like 'Adj*',[Value],0))
    AS Used, [Gain]+[Used] AS [Left]
FROM 
    SchedulingLog
GROUP BY SchedulingLog.UserID, SchedulingLog.Category
HAVING (((SchedulingLog.Category) Like "Vac*")); 
```

我对修改周年纪念活动后重置总和的想法；

```
 SELECT Roster.UserID, Roster.[WM DOH], Roster.Schedule, Month([WM DOH]) & "/" & Day([WM DOH]) & "/" & Year(Date()) AS [Anniversary Date], SchedulingLog.Category, Sum(IIf([CatDetail] Like 'Ann*',[Value],0)) AS Gain, Sum(IIf([CatDetail] Like '*Used*',[Value],0))+Sum(IIf([CatDetail] Like 'Adj*',[Value],0)) AS Used, [Gain]+[Used] AS [Left]
   FROM SchedulingLog INNER JOIN Roster ON SchedulingLog.UserID = Roster.UserID
   WHERE (((SchedulingLog.EventDate)>[Anniversary Date]))
   GROUP BY Roster.UserID, Roster.[WM DOH], Roster.Schedule, Month([WM DOH]) & "/" & Day([WM DOH]) & "/" & Year(Date()), SchedulingLog.Category; 
```

修改后的查询不返回任何数据。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:25:22.737

周年日期不作为可以在 where 语句中引用的字段存在。要决定做什么，您需要发布 SchedulingLog 日期的格式。

```
schedulinglog.eventdate  > Month([WM DOH]) & "/" & Day([WM DOH]) & "/" & Year(Date()) 
```

可能会奏效。

或者

```
schedulinglog.eventdate  > DateSerial(Year(Date(),Month([WM DOH]),Day([WM DOH])) 
```

或者

```
schedulinglog.eventdate  > DateAdd("yyyy",1,[WM DOH]) 
```

# java - 如何使用 Java 从 MS Sql Server 获取列表

> ID：13952165
> 
> 赞同：1
> 
> 时间：2012-12-19T12:07:18.477
> 
> 标签：java, sql-server-2008, resultset

我有一个问题，我无法从 MS SQL Server 数据库中获取我的列表。

这是我的代码：

```
public List<Location> showLocations(String nmlocation) {
    List<Location> location = new ArrayList<Location>();
    try {
        String sql = "SELECT deskripsi FROM T_Place WHERE ID_Place='%" + nmlocation + "%'";
        PreparedStatement statement = (PreparedStatement) dm.logON().prepareStatement(sql);
        boolean result = statement.execute();
        if (result) {
            ResultSet rs = statement.getResultSet();
            int i = 0;
            while (rs.next()) 
            {
                Location loc = new Location(rs.getString("deskripsi"));
                System.out.println(loc);
                location.add(loc);
                i++;
            }
            rs.close();
        }

     } catch (SQLException sqle) {
      System.out.println("Error on Listing Location Data showLocation Status : " + sqle.getSQLState()
                + " \n Error Message : " + sqle.getMessage()
                + " \n Error State : " + sqle.toString());
    }
    return location;
} 
```

但它显示空结果集。如何解决？提前致谢。

# applet - 如何从 Cinnamon 小程序中的文件夹路径获取 gnome 图标名称

> ID：13952167
> 
> 赞同：2
> 
> 时间：2012-12-19T12:07:34.857
> 
> 标签：applet, gnome-3, gnome-shell, gnome-shell-extensions

我创建了一个“地方”肉桂小程序（一个充满文件夹的下拉列表）。
我想获取特定文件夹路径的 gnome 图标名称。例如，我想从音乐文件夹“/home/USER/Music”中获取 gnome 图标名称，即“folder-music”。

我在 Gio 发现了一些有趣的东西：

```
const Gio = imports.gi.Gio;

var directory_file = Gio.file_new_for_path("/home/USER/Music");
var icon_names = directory_file.query_info('standard::symbolic-icon', 0, null).get_symbolic_icon().get_names(); 
```

但是“get_symbolic_icon().get_names()”会返回一个具有多个图标名称的字符串数组。
例如“/home/USER/Music”返回

*   文件夹音乐符号
*   文件夹音乐
*   文件夹

由于没有真正的文档，我想知道是否有人知道如何从文件夹路径中获取 gnome 图标名称？

# slideshow - 滚动缩略图时如何显示大图像，允许在大图像上写入文本

> ID：13952169
> 
> 赞同：0
> 
> 时间：2012-12-19T12:07:37.060
> 
> 标签：slideshow

我在表格中有图像，想要单击每个图像并在屏幕上放大它们。我可以在网上找到很多这样的片段，但我发现没有一个允许在放大的图像上写文字。这些像素是艺术品，放大时需要在它们上面加上一份文案声明。任何人都知道如何执行此操作或在哪里可以在线找到它....谢谢....大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:08:43.107

我能找到在图像上添加文本的唯一方法是将图像创建为背景。设置一个部门和表格允许我只将背景应用到屏幕的某个区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T19:05:23.313

你可以试试这段代码：

```
<div id="lare_img">
<div class="copyright">Your copy right text here </div><div class="img_file"><img src="img_01.jpg"></div></div> 
```

和样式 CSS ：

```
<style>

#lare_img{
  width:100% // change to your image large width ;
  height:100% // change to your image large height;
  position:absolute;
}

.copyright{
 position:absolute;
 bottom:20px;
 left:20px;
 z-index:999;
}

.img_file{
 width:100%;
 height:100%;
 float:left;
}

</style> 
```

# c# - 使用 c# 为 linqpad 创建 DynamicDataContextDriver

> ID：13952170
> 
> 赞同：6
> 
> 时间：2012-12-19T12:07:39.180
> 
> 标签：c#, linq, linqpad

我正在尝试创建驱动程序`linqpad`并有疑问：

当我创建时`DynamicDataContextDriver`，我必须创建类`TypedDataContext`。

1.  我应该在里面放什么？
2.  它将如何填充？
3.  我可以控制它的填充方式吗？
4.  如果我在这里使用对象数据库，有什么我必须记住的吗？

[我在这里](http://forum.linqpad.net/discussion/comment/47/#Comment_45)找到了一些答案，但我在上面找不到所有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:48:23.250

A typed data context is simply a class with properties/fields suitable for querying. Those properties/fields will typically return IEnumerables or IQueryables. For example:

```
public class TypedDataContext
{
   public IEnumerable<Customer> Customers { get { ... } }
   public IEnumerable<Order> Orders { get { ... } }
   ...
} 
```

When you use Visual Studio to create a new item of kind "LINQ to SQL classes" or "ADO.NET Entity Data Model", Visual Studio creates a typed data context for you which is an excellent example of what LINQPad expects. A typed data context can also expose methods (e.g., to map stored procedures or functions) - in fact it can expose anything that makes sense to the end user.

When you execute a query in LINQPad that has a connection, LINQPad subclasses the typed data context associated with the connection so that the query has access to all of its fields/properties. This is why `Customers.Dump()` is a valid query - we can just access `Customers` without having to instantiate the typed data context first.

A LINQPad driver can work in one of two ways. Either it can act like Visual Studio and build the typed data context automatically and on the fly (*dynamic* data context driver), or it can extract a typed data context from an existing assembly provided by the user (*static* data context driver). When you add a connection in LINQPad, you'll notice that the drivers are listed in two list boxes (**Build data context automatically** = *dynamic driver*, and **Use a typed data context from your own assembly** = *static driver*).

The typed data context is instantiated whenever a query executes. Because its properties typically return lazily evaluated IEnumerables/IQueryables, it's not helpful to think of "populating" it. However, it will need to know how to access an underlying data source, and this is done by [passing arguments into the constructor](http://www.linqpad.net/extensibility.aspx).

LINQPad normally keeps the query's application domain alive between query runs, and this might be useful with caching and optimization should you be writing a driver for an object database. Other than that, there shouldn't be any special considerations for object databases.

# java - 为什么java同时使用传值和传引用？

> ID：13952173
> 
> 赞同：1
> 
> 时间：2012-12-19T12:07:59.680
> 
> 标签：java, parameter-passing, pass-by-reference, pass-by-value

> **可能的重复：**
> [Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

也许我遗漏了一些东西......但我真的不明白为什么Java同时使用按值传递和按引用传递。为什么不只使用一种范式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T12:10:04.310

它没有。Java 纯粹是按值传递。处理对象时传递的值是对象引用，但这与“按引用传递”*无关。*

引用传递意味着函数可以传递一个变量并在调用函数中更改该变量的内容。这在 Java 中不存在。

例如：

```
void foo() {
    int a;

    a = 42;
    bar(a);
    System.out.println(a); // Will ALWAYS be 42
}

void bar(int b) {
    b = 67;
} 
```

*与确实*具有传递引用的C++ 相比：

```
// C++ code
void foo() {
    int a;

    a = 42;
    bar(a);
    cout << a; // 67?!
}
void bar(int& a) { // <== Note the &
    a = 67;
} 
```

Java 没有`&`C++ 中的（或C# 中的`out`/ ）等价物。`ref`

您可能正在考虑对象引用，这是对“引用”一词的完全独立的使用，而不是通过引用传递中的“引用”。让我们看一个带有对象的示例：

```
void foo() {
    Object o1, o2;

    o1 = new Object();
    o2 = o1;
    bar(o1);
    System.out.println(o1 == o2); // Will ALWAYS be true
}

void bar(Object o) {
    o = new Object();
} 
```

如果 Java 有按引用传递（并且我们使用它来将对象变量传递给`bar`），那么`==`in`foo`将是错误的。但事实并非如此，也没有办法做到这一点。

对象引用允许您更改传递给函数的对象的*状态*，但不能更改调用函数中包含它的变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T12:11:58.993

Java 始终是“按值传递”。所以原语和对象的**（引用）**都是按值传递的。

**编辑**

是的，对象不是直接传递的，我们总是用它们的引用来引用它们。所以Object的引用是按值传递的。

# hibernate - @OrderColumn Hibernate 4.1 的问题

> ID：13952174
> 
> 赞同：5
> 
> 时间：2012-12-19T12:08:01.330
> 
> 标签：hibernate, jpa-2.0, hibernate-4.x

嗨，我正在尝试做与文档中相同的事情

[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#d5e5275](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#d5e5275)

为什么会这样？

```
//In class Team
@ManyToOne
@JoinColumn(name = "Heat")
public Heat getHeat() {
return heat;
}

//In class Heat
@OneToMany(fetch = FetchType.LAZY, mappedBy = "heat")
@OrderColumn(name = "Heat_index")
public List<Team> getTeams() {
    return teams;
} 
```

Heat_index 列已创建，但出现此异常。

```
org.hibernate.HibernateException: null index column for collection: no.domain.Heat.teams
at org.hibernate.persister.collection.AbstractCollectionPersister.readIndex(AbstractCollectionPersister.java:766) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.collection.internal.PersistentList.readFrom(PersistentList.java:402) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.readCollectionElement(Loader.java:1185) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.readCollectionElements(Loader.java:800) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:651) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.doQuery(Loader.java:850) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.doList(Loader.java:2447) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.doList(Loader.java:2433) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2263) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.Loader.list(Loader.java:2258) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:196) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1161) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]
at no..dao.HeatDaoImpl.getHeatsWithEventIdAndGrade(HeatDaoImpl.java:22) ~[HeatDaoImpl.class:na]
at no..service.HeatServiceImpl.getHeatsForEventWithGrade(HeatServiceImpl.java:84) ~[HeatServiceImpl.class:na]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_37]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_37]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_37]
at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_37]
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) ~[org.springframework.transaction-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at $Proxy55.getHeatsForEventWithGrade(Unknown Source) ~[na:na]
at no..controller.EventController.getStartList(EventController.java:116) ~[EventController.class:na]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.6.0_37]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.6.0_37]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_37]
at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_37]
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213) ~[org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126) ~[org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) ~[org.springframework.web.servlet-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621) [servlet-api.jar:na]
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) [servlet-api.jar:na]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.30]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.30]
at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) [org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [org.springframework.web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) [catalina.jar:7.0.30]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.30]
at no.stafetten.filter.RequestFilter.doFilter(RequestFilter.java:49) [RequestFilter.class:na]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) [catalina.jar:7.0.30]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.30]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) [catalina.jar:7.0.30]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) [catalina.jar:7.0.30]
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.30]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) [catalina.jar:7.0.30]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) [catalina.jar:7.0.30]
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929) [catalina.jar:7.0.30]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) [catalina.jar:7.0.30]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.30]
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) [tomcat-coyote.jar:7.0.30]
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) [tomcat-coyote.jar:7.0.30]
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) [tomcat-coyote.jar:7.0.30]
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_37]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_37]
at java.lang.Thread.run(Thread.java:680) [na:1.6.0_37] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T16:57:06.397

从 OneToMany 注释中删除 mappedBy 属性并添加以下注释。

```
@JoinColumn(name="Heat") 
```

使用 OrderColumn 时不支持 mappedBy，除非您想自己设置属性。

如果您确实想自己设置属性，则必须将以下内容添加到团队并自己增加索引。

```
@Column(name="Heat_index")
public int getHeatIndex() {
    return heatIndex;
} 
```

# iphone - 当键盘未进行更改时检测 UITextField 内容的更改

> ID：13952177
> 
> 赞同：15
> 
> 时间：2012-12-19T12:08:10.723
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios6

我有 a`UIButton`和 a `UITextField`，当按下按钮时，文本字段的内容字符串将等于：`This is a test string`，在这种情况下，如何检测到该文本字段已更改其内容？

ps`UITextField's`委托方法在这种情况下不起作用

**更新：**我希望这种行为出现在 iOS 6+ 设备上。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T12:11:52.983

您可以添加`UITextFieldTextDidChangeNotification`：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(textFieldChanged:)
                                             name:UITextFieldTextDidChangeNotification
                                           object:textField]; 
```

`textField`(param object) 是你的 UITextField。 `selector`是触发此通知时将调用的方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-24T21:15:16.957

也许简单[**的键值观察**](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/cat/NSKeyValueObserving)会起作用？

```
[textField addObserver:self forKeyPath:@"text" options:0 context:nil];

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if([keyPath isEqualToString:@"text"] && object == textField) {
        // text has changed
    }
} 
```

* * *

编辑：我刚刚检查过，它对我有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-22T09:57:10.897

`UIControlEventEditingChanged`您可以在事件中处理文本更改。因此，当您以编程方式更改文本时，只需发送此事件：

```
textField.text = @"This is a test string";
[textField sendActionsForControlEvents:UIControlEventEditingChanged]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-12T19:57:28.663

委托方法实际上可能对您有用。您将获得文本字段、将更改的范围和新字符串。您可以将这些放在一起以确定建议的字符串。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range        replacementString:(NSString *)string
{
    NSMutableString *proposed = [NSMutableString stringWithString:textField.text];
    [proposed replaceCharactersInRange:range withString:string];
    NSLog(@"%@", proposed);
    // Do stuff.
    return YES; // Or NO. Whatever. It's your function.
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T21:45:21.547

这是一个非常强大的解决方案，但它应该可以工作。在按下按钮时调用的函数中......

```
NSString *string = [NSString stringWithFormat:@"This is a test string"];
if(string == textfield.text){
...
} 
```

或者，您可以使用自调度程序检查它是否重复更改。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-05T09:11:49.860

这是 akashivskyy 答案的 Swift3 版本：

```
func startObservingTextView() {
    textView.addObserver(self, forKeyPath:"text", options: NSKeyValueObservingOptions(rawValue: 0), context: nil)
}

func stopObservingTextView() {
    textView.removeObserver(self, forKeyPath: "text")
}

override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if let textViewObject = object as? UITextView, textViewObject == textView, keyPath == "text" {
        // text has changed
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-16T07:47:49.350

## 斯威夫特 5.4

这是 akashivskyy 答案的 Swift 5.4 版本：

使用[NSKeyValueObservation](https://developer.apple.com/documentation/objectivec/nsobject/nskeyvalueobserving)键值观察。

```
class ViewController: UIViewController {

    @IBOutlet weak var txtTextField: UITextField!

    private var textObservation: NSKeyValueObservation?

    override func viewDidLoad() {
        super.viewDidLoad()
        textObservation = self.txtTextField.observe(\.text, options: [.new, .old], changeHandler: { (object, value) in
            print("New value is : ", value.newValue)
            print("Old value is : ", value.oldValue)
        })
    }
} 
```

# javascript - 用于将 XML 转换为 XHTML 的 Firefox 附加组件

> ID：13952179
> 
> 赞同：1
> 
> 时间：2012-12-19T12:08:12.770
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

是否有任何 Firefox 插件可以将 XML 转换为 XHTML？我想以适当的外观和感觉显示 xml 文件。

目前我收到此错误消息。

```
This XML file does not appear to have any style information associated with it. The document tree is shown below. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:15:16.680

Firefox 可以在没有插件的情况下做你想做的事。但是，您需要一些[XSLT](https://en.wikipedia.org/wiki/XSLT)数据来执行此操作。没有 XSLT，没有程序知道如何正确显示它。

# mysql - Mysql vs Oracle XE vs Postgresql。可扩展性和性能，选择哪个？

> ID：13952182
> 
> 赞同：10
> 
> 时间：2012-12-19T12:08:21.847
> 
> 标签：mysql, oracle, postgresql, database-performance

我知道这是非常广泛的，所以让我给你设置并具体说明我的重点。

**环境：**

我正在使用 MYSQL 处理现有的 PHP 应用程序。表几乎都使用 MISAM 引擎并且大部分包含数百万行。最大的表之一使用 EAV 设计，这是必要的，但会影响性能。该应用程序的编写是为了最好地利用 MYSQL 缓存。它在每个页面加载时请求相当数量的请求（部分是因为这个），并且足够复杂，必须在每个页面加载时遍历整个数据库的大多数表。

优点：

*   免费
*   MISAM 表支持对应用程序很重要的全文索引

缺点：

*   按照设置的方式，MYSQL 仅限于一个 CPU 用于整个应用程序。如果运行一个非常苛刻的查询（或服务器负载很大），它将排队所有其他查询，使站点无响应
*   MYSQL 缓存和缺少“WITH”或“INTERSECT”意味着我们必须分解查询以更好地使用缓存。从而使查询的数量成倍增加。例如，在具有数百万行的多个表上使用子查询（即使具有良好的索引）对于当前/即将到来的负载和上面列出的约束（CPU 使用率）来说是一个大问题

感觉需要在即将到来的一年扩大规模，但不一定准备好立即支付许可费用，我一直在考虑重写应用程序和切换数据库。

正在考虑的三个选项是继续使用 mysql 但使用 INNODB 引擎，这样我们可以利用更多的 CPU 能力。当我们需要向上扩展 4Gb 数据库、1Gb RAM 或 1 个 CPU 限制（所有这些我们还没有达到）时，适应 Oracle XE 并获得许可证。或者适应PostgreSQL

**所以问题是：**

*   在这三种情况下，失去全文索引会如何影响性能（oracle 或 postgreSQL 是否有等价物？）
*   oracle 和 postgreSQL 如何利用子查询、WITH 和 UNION/INTERSECT 语句的缓存
*   Oracle 和 PostgreSQL 如何利用多核/cpu 能力（如果/当我们获得 Oracle 许可证时）

我想这已经有很多要回答的了，所以我会在这里停下来。如果有赞美的链接，我不介意简单/不完整的答案。

如果您需要更多信息，请告诉我

在此先感谢各位，感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:34:48.543

PostgreSQL 支持全文搜索和索引。详情[在这里](http://www.postgresql.org/docs/current/static/textsearch.html)。

它可以使用任意数量的 CPU 内核。它为每个会话创建单独的流程 + 一些额外的支持流程。详情[在这里](http://www.postgresql.org/docs/current/static/tutorial-arch.html)。

PostgreSQL 没有内置查询缓存，但有很多开源实用程序可以用于此目的。

# jquery - 添加复选框

> ID：13952185
> 
> 赞同：3
> 
> 时间：2012-12-19T12:08:29.460
> 
> 标签：jquery

如何添加`190 + 150`来自给定代码并显示在另一个上的成本，`div`比如说`div`总计？

我已经创建了一个变量并存储了相应的成本，我的目标是当用户选中复选框（我有大约 10 个复选框）时，相应的价格会被添加到总数中，如果不选中它会自动减去。任何人都可以给我一个关于如何去做的提示。

```
$(document).ready(function() {
    //var pdf=$('#result').html(" -PDF Document");

    $('#1').click(function() {
        //var row = $(this);
        if (($(this).attr('checked')) == 'checked')
            $('#result').append("-PDF Document <html><span style=float:right>$190</span></html>");
        else
            $('#result').text("");
    });

    $('#2').click(function(){
        if (($(this).attr('checked')) == 'checked')
            $('#result2').append("-Video <html><span style=float:right>$150</span></html> ");
        else
            $('#result2').text("");
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:25:45.333

看看这个小提琴..这样你就可以有一些想法..它做了我认为你所要求的..

**javascript**

```
$("input:checkbox").change(function(){
  var $val=$(this).val();
  var total=$('#total').html();
  if($(this).is(':checked')){
    var finaltotal=parseInt($val) + parseInt(total)
  }else{
    var finaltotal=parseInt(total) - $val 
  }

      $('#total').html(finaltotal);
}) 
```

[http://jsfiddle.net/5Azzr/1/](http://jsfiddle.net/5Azzr/1/)

**更新**

用你的例子..

[http://jsfiddle.net/BA5rX/4/](http://jsfiddle.net/BA5rX/4/)

**注意**：我创建了一个包含总值的 div ......

```
<div id="total">1000</div> 
```

**最新更新**

[http://jsfiddle.net/5YZp5/2/](http://jsfiddle.net/5YZp5/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:52:28.953

使用以下代码：

JS：

```
function refreshPrices() {
    var currentTotalValue = 0;
    $("#results div").each(function() {
        if (!isNaN(parseInt($(this).find("span").text().substring(1)))) {
            currentTotalValue += parseInt($(this).find("span").text().substring(1));
        }
    });
    $("#totalValue").text("$" + currentTotalValue)
} 
```

要使用它，请将所有 " `result*`" 容器存储在一个容器中，这将使输出更容易使用 jQuery 进行迭代[因为只需要一个主要选择器 ( `"#results"`) 即可获取所有 " `result*`" 容器中的结果]。

```
<div id="results">
<div id="result">
</div>
<div id="result2">
</div>
</div> 
```

并且每当用户与复选框交互时，`refreshPrices()`都应该调用它。

HTML：

```
<table>
<tr>
                        <td style="width: 13px">
                            <input id="1" type="checkbox" name="" onClick="" />

                        </td>
                        <td>
                            <h4>PDF Document</h4>
                            <p>
                                Already have your own menu or flyer? Include it in your App
                            </p>
                        </td>
                        <td class="cost" id="pdf-cost">£99.99 per document</td>
                    </tr>

                    <tr>
                        <td style="width: 13px">
                            <input id="2" type="checkbox"/>
                        </td>
                        <td>
                            <h4>Video</h4>
                            <p>
                                If you've already got videos on your website, these can be included within your App too.
                            </p>
                        </td>
                        <td class="cost">£149.99 per video</td>
</tr>
<table>
<br>
<br>
<div id="totalValu">Total Value: <span id="totalValue">$0</span></div>
<div id="results">
<div id="result">
</div>
<div id="result2">
</div>
</div> 
```

JS：

```
$(document).ready(function() {

    $('#1').click(function() {
        //var row = $(this);
        if (($(this).attr('checked')) == 'checked') {
            $('#result').append("-PDF Document <html><span style=float:right>$190</span></html>");
        }
        else {
            $('#result').text("");
        }
        refreshPrices();
    });

    $('#2').click(function() {
        if (($(this).attr('checked')) == 'checked') {
            $('#result2').append("-Video <html><span style=float:right>$150</span></html> ");
        }
        else {
            $('#result2').text("");
        }
        refreshPrices()
    });
});​ 
```

JSFiddle：http: [//jsfiddle.net/BA5rX/7/](http://jsfiddle.net/BA5rX/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:32:52.450

这是我根据您的 html 提出的建议 - 我修复了您的无效 ID 并添加了一个类。此外，我还会计算 onload 以防页面重新加载并且复选框未清除。我从表格单元格中取出值减去前导磅字符

[演示](http://jsfiddle.net/mplungjan/476qq/)

```
function calcTotal() {
  var total = 0;
  $(".check:checked").each(function() {
    total += parseFloat($(this).parent().siblings(".cost").text().substring(1));
  });            
  $("#totalDiv").html("£"+total.toFixed(2))

}

$(function() {
    calcTotal(); 
    $(".check").on("click",function() {
       calcTotal(); 
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:35:26.393

如果您可以修改您的 HTML 以便`class`为每个添加一个`checkbox`和一个`data-price`包含价格的参数，您可以使您的 jQuery 非常简单，如下所示：

```
$(".checkbox").change(function() {
    var total = 0;
    $(".checkbox:checked").each(function() {
        total += parseFloat($(this).data('price'));
    });
    $("#total").html(total.toFixed(2));
}); 
```

[**示例小提琴**](http://jsfiddle.net/BA5rX/6/)

# java - 使用 JNI 时如何摆脱 LD_PRELOAD

> ID：13952189
> 
> 赞同：2
> 
> 时间：2012-12-19T12:08:39.290
> 
> 标签：java, java-native-interface

我有 JNI 库 libA.so，它依赖于 C 库 libB.so。

在 Java 中，解决“符号查找错误”的一种方法是：

```
class A{
    public native void g();
    static{
        System.load("/asdfghjk/libA.so");
    }
} 
```

然后运行java程序

```
LD_PRELOAD=libB.so 
```

但是，这种 hack 不能在生产系统中使用，例如当程序使用 Tomcat JSF 部署时。

以下“解决方案”不起作用：

```
class A{
    public native void g();
    static{
        System.load("/asdfghjk/libB.so");
        System.load("/asdfghjk/libA.so");
    }
} 
```

它产生一个错误：

```
symbol lookup error: /blah/... undefined symbol: _ZNblahblahblah... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:14:12.030

该错误是因为它找不到您的共享库所依赖的库。

您应该将依赖库的位置添加到您的，以正确的顺序首先`java.library.path`明确地添加它们，或者以某种方式使用系统调用来加载依赖项。`System.load``dlopen`

这个问题可能会有所帮助：[Java: load shared library with dependencies](https://stackoverflow.com/questions/5425034/java-load-shared-librariees-with-dependencies)

# xslt-1.0 - 如何在 xslt 的 for-each 循环中用随机值重命名元素名称？

> ID：13952191
> 
> 赞同：0
> 
> 时间：2012-12-19T12:08:48.227
> 
> 标签：xslt-1.0

我需要在从根检索值时根据元素的值重命名元素名称。

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dat="http://ws.wso2.org/dataservice" version="1.0">
  <xsl:key name="key-by-company_code" match="dat:row" use="dat:company_code" />
    <xsl:template match="company_code">
<xsl:copy>
<xsl:apply-templates select="node()|@*"/>
</xsl:copy>
</xsl:template>
  <xsl:template match="dat:rows">
    <xsl:element name="{local-name()}">
      <xsl:for-each select="dat:row[generate-id() = generate-id(key('key-by-company_code', dat:company_code)[1])]">
        <xsl:element name="sae">

        <xsl:attribute name="filename">
            <xsl:value-of select="dat:company_code" />
          </xsl:attribute>
          <xsl:for-each select="key('key-by-company_code', dat:company_code)">
          <xsl:element name="{local-name()}">
                <xsl:element name="row">
                    <xsl:element name="sae_id">
                      <xsl:value-of select="@sae_id" />
                    </xsl:element>  
            <xsl:element name="sae_date">
                      <xsl:value-of select="@sae_date" />
                    </xsl:element>
            <xsl:if test="'company_code' = local-name()">
            <xsl:if test="dat:company_code = '30'">
            <xsl:template match="company_code">
            <Co30>
            <xsl:apply-templates/>
            </Co30>
            </xsl:template>
                    </xsl:if>  
                    </xsl:if>
            <xsl:element name="payment_type">
                      <xsl:value-of select="dat:payment_type" />
                    </xsl:element>
            <xsl:element name="concur_pay">

                <xsl:variable name="Concur-Pay" select="dat:concur_pay" />

                <xsl:choose><xsl:when test="$Concur-Pay = '0'">N</xsl:when><xsl:otherwise>Y</xsl:otherwise></xsl:choose>            
            </xsl:element>

           </xsl:element>
          </xsl:for-each>
        </xsl:element>
      </xsl:for-each>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

以上是我试图用于要求的 xslt，但它不起作用。我需要根据元素的值重命名元素名称并从不同的元素分配值。例如：- 如果值company_code 是 30 那么输出应该如下

```
<sae filename="30">
<row>
<sae_id>76</sae_id>
<sae_date>2012-12-07-08:00</sae_date>
<Co30>1286.91</Co30>
<payment_type>CASH</payment_type>
<concur_pay>N</concur_pay>
<total>1286.91</total>
</row>
</sae> 
```

此处元素“total”的值应分配给“Co 30”。类似地，如果 company_code 为 32 或 33 或 36，则应按上述方式发生。

请让我知道如何重命名此元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:22:20.947

请尝试替换这个：

```
 <xsl:if test="'company_code' = local-name()">
        <xsl:if test="dat:company_code = '30'">
        <xsl:template match="company_code">
        <Co30>
        <xsl:apply-templates/>
        </Co30>
        </xsl:template>
                </xsl:if>  
                </xsl:if> 
```

有了这个：

```
<!-- Ensure company_code is a valid number to prevent invalid tag names -->
<xsl:if test="number(dat:company_code) = number(dat:company_code)">
  <xsl:element name="Co{dat:company_code}">
    <xsl:value-of select="dat:total"/>
  </xsl:element>
</xsl:if> 
```

您还需要 删除`<xsl:element name="{local-name()}">` . `<xsl:for-each>`它是未封闭的，似乎没有必要。

# active-directory - Active Directory 多站点登录限制：OU 还是多域？

> ID：13952193
> 
> 赞同：4
> 
> 时间：2012-12-19T12:08:51.883
> 
> 标签：active-directory

我正在为多站点组织从头开始规划 Active Directory 结构。一个基本点是，属于站点 A 的用户，如果她/他到达站点 B，**则根本无法登录**。

同时，虽然大部分用户的工作场所是确定和固定的，但少数用户需要在多个站点（2-4个，但不是每个站点）登录。

问题：阅读文档我无法清楚地理解是否只有一个具有许多 OU 的域可以强制执行此行为，或者我必然需要多个子域。

任何帮助或提示将不胜感激，非常感谢您的时间，BR，Ted

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:15:13.600

您可以使用一个域执行此操作，然后设置您也添加人员的特定组。

这样，您就可以使管理员可以毫无问题地登录所有站点等。但是用户可以位于只能访问其站点的特定站点组中。

子域还可以，但在我看来它们可能会有点混乱。

我想没有正确或错误的答案，这只是你想如何组织它以及你想花多少时间来维护 AD。

# notepad++ - 使用全部替换在 GUID 中放置破折号

> ID：13952194
> 
> 赞同：9
> 
> 时间：2012-12-19T12:08:51.707
> 
> 标签：notepad++, guid

我有一个文件，其中散布着 200 个左右的 GUID，它们的破折号已被删除。我需要将这些破折号放回原处，但手动操作会很乏味且耗时。有没有办法全部替换，也许在记事本++中，在 GUIDS 中放置破折号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T12:33:12.230

按 CTRL+H 打开“替换”对话框：

进入

```
 ([0-9a-f]{8})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{12}) 
```

在“查找内容”-Textfield 和

```
$1-$2-$3-$4-$5 
```

int“替换为”-文本字段。确保选中“正则表达式”复选框。

按下“全部替换”按钮，奇迹就会发生。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T12:20:21.997

使用记事本++ 执行以下操作：

目前你应该在记事本++中看到这样的东西

> ```
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e
> 1414527670f747218137fd1059046a4e 
> ```

创建一列 200 个破折号并使用 Alt+鼠标选择（垂直）复制该列。

现在您应该可以将这 200 个破折号粘贴到上述数据中的任何位置。我在不到一分钟的时间内完成了上面显示的 20 条记录。你几乎不会花10分钟？比正则表达式快得多;)，特别是如果您考虑编程和测试的工作。

请参阅我的以下 20 条记录的数据：

```
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e
14145276-70f7-4721-8137-fd1059046a4e 
```

希望我清楚。阅读[此](http://kudithipudi.org/2008/07/08/howto-select-column-in-notepad/)内容以获取记事本 ++ 中的列选择详细信息

# php - Joomla 3 获取菜单标题

> ID：13952199
> 
> 赞同：2
> 
> 时间：2012-12-19T12:09:06.370
> 
> 标签：php, menu, title, joomla3.0

我在一页上使用多个菜单。在多个 div 中，我显示了一个菜单（menu1 到 menu6）。出于模板目的，我想让每个菜单的菜单标题显示在顶部。我无法从菜单中获取标题。

我发现这是获取菜单项的方法。

```
<?php
$menu = $app->getMenu();
$menu_items = $menu->getItems('menutype', 'menu1');
var_dump ($menu_items);
?> 
```

不可能这么难，但找不到正确的语法。谁能帮帮我？

提前致谢，

威姆斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-19T14:42:09.010

你也可以使用这个：

```
$menu = &Jsite::getMenu();
$menuname = $menu->getActive()->title; 
```

或者如果已经`$app = JFactory::getApplication();`存在

```
$menu = $app->getMenu();
$menuname = $menu->getActive()->title; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-17T11:46:26.767

以下代码在 Joomla 3.0 中适用于我：

```
$app = JFactory::getApplication();

$menu = $app->getMenu();
$menuname = $menu->getActive()->title; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T12:40:17.867

用这个：

```
/** Getting the Menu ID of Menu was clicked by user **/
$menu    =   &JSite::getMenu(); 
$id    =   $menu->getActive()->id;

/** Getting the Title of the Menu by using id. **/ 
$db    = JFactory::getDBO();
$query    = "SELECT title FROM kjs_menu WHERE id = $id";
$db->setQuery($query);
$rows    = $db->loadObjectList();
$itemrow = $rows[0];
$title   =   $itemrow->title;

echo "Menu you have clicked is : ".$title; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-19T11:14:09.807

从 Joomla 3.8 开始，您可以使用名称间距：

```
use Joomla\CMS\Factory;

echo Factory::getApplication()->getMenu()->getActive()->title; 
```

# android - 如何取消正在运行的 AsyncTask。

> ID：13952200
> 
> 赞同：1
> 
> 时间：2012-12-19T12:09:07.900
> 
> 标签：android, android-layout, android-intent

我想在 json 请求带有空值时取消 AsyncTask，并显示 Toast 消息。

```
private class PostTask extends AsyncTask<String, Integer, String>
{
    //Before running code in the separate thread
    @Override
    protected void onPreExecute() 
    {

        progressDialog = new ProgressDialog(login.this);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressDialog.setMessage("please wait...");
        progressDialog.setCancelable(false);
        progressDialog.setIndeterminate(false);
        progressDialog.setMax(100);
        progressDialog.setProgress(0);
        progressDialog.show();
    }
    //The code to be executed in a background thread.
    @Override
    protected  String doInBackground(String... params) 
    {
        String url=params[0];
        Parser parse = new Parser();
        try{    
            String email = textinput.getText().toString();
            String pass = password.getText().toString();
            JSONObject JsonString = parse.getJSONFromUrl(url,email,pass);

            //String email = JsonString.getString("email");
            Constants.ID = JsonString.getString("id");

        }
         catch (JSONException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
              }

        catch (NullPointerException e){

             publishProgress(1);
            //Toast.makeText(login.this, "Invalid credentials", Toast.LENGTH_LONG).show();
        }
         return "All Done!";
    }
    //Update the progress
    @Override
    protected void onProgressUpdate(Integer... values) 
    {
        //set the current progress of the progress dialog
    //  progressDialog.setProgress(values[0]);  
        //Toast.makeText(login.this, "Invalid credentials", Toast.LENGTH_LONG).show();
    }
    //after executing the code in the thread
    @Override
      protected void onPostExecute(String result) {

          super.onPostExecute(result);
          startActivity(new Intent("com.example.mysampleapp.DASHBOARDTAB"));
          progressDialog.dismiss();      
     }
} 
```

`async`如果我在请求中获得 null`JSON`并在我调用的同一活动中显示消息，是否有任何取消方法来取消任务`AsyncTask`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:14:50.337

如果 JSON 为空，请尝试返回错误代码，例如：

```
 catch (NullPointerException e){

         publishProgress(1);
        return "Error";
    } 
```

然后在`onPostExecute()`：

```
@Override
  protected void onPostExecute(String result) {
      super.onPostExecute(result);

      if(result.equals("Error")) {
          //Error
      } else {
          startActivity(new Intent("com.example.mysampleapp.DASHBOARDTAB"));
          progressDialog.dismiss();      
      }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:11:39.297

尝试这个：

```
postTask = new PostTask();

if (postTask != null)
 {
   postTask.cancel(true);
   postTask = null;
} 
```

谢谢。

# ravendb - 将 MvcMiniProfiler.RavenDB 与 ServiceStack.MiniProfiler 集成

> ID：13952222
> 
> 赞同：1
> 
> 时间：2012-12-19T12:10:21.347
> 
> 标签：ravendb, servicestack, mvc-mini-profiler

我已尝试按照[ServiceStack.MiniProfiler 页面](https://github.com/ServiceStack/ServiceStack/wiki/Built-in-profiling)、[MvcMiniProflier.RavenDB 页面](http://csainty.github.com/MvcMiniProfiler.RavenDb/) 和 MiniProfiler 页面上[提到](http://miniprofiler.com/)的说明进行操作，但我无法将 RavenDB 的分析数据显示在 ServiceStack.MiniProfiler 呈现的输出中。
当我在浏览器中调用我的 Web 服务方法时，ServiceStack.MiniProfiler 呈现的输出会正确显示。

这可以通过配置完成还是需要额外的组件？

# java - 如何解析大型复杂的xml

> ID：13952223
> 
> 赞同：5
> 
> 时间：2012-12-19T12:10:19.940
> 
> 标签：java, spring, xml-parsing, jaxb, spring-batch

我需要解析一个大型复杂的 xml 并写入一个平面文件，你能给出一些建议吗？

文件大小：500MB 记录数：100K XML 结构：

```
<Msg>

    <MsgHeader>
        <!--Some of the fields in the MsgHeader need to be map to a java object-->
    </MsgHeader>

    <GroupA> 
        <GroupAHeader/>
        <!--Some of the fields in the GroupAHeader need to be map to a java object--> 
        <GroupAMsg/>
        <!--50K records--> 
        <GroupAMsg/> 
        <GroupAMsg/> 
        <GroupAMsg/> 
    </GroupA>

    <GroupB> 
        <GroupBHeader/> 
        <GroupBMsg/>
        <!--50K records--> 
        <GroupBMsg/> 
        <GroupBMsg/> 
        <GroupBMsg/> 
    </GroupB>

</Msg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:32:15.823

在 Spring Batch 中，我编写了自己的 stax 事件项读取器实现，它的操作比前面提到的更具体一些。基本上，我只是将元素填充到地图中，然后将它们传递给 ItemProcessor。从那里，您可以自由地将其从“GatheredElement”转换为单个对象（请参阅 CompositeItemProcessor）。很抱歉从 StaxEventItemReader 进行了一些复制/粘贴，但我认为这是无法避免的。

从这里开始，您可以随意使用任何您喜欢的 OXM 编组器，我也碰巧使用了 JAXB。

```
public class ElementGatheringStaxEventItemReader<T> extends StaxEventItemReader<T> {
    private Map<String, String> gatheredElements;
    private Set<String> elementsToGather;
    ...
    @Override
    protected boolean moveCursorToNextFragment(XMLEventReader reader) throws NonTransientResourceException {
        try { 
            while (true) {
                while (reader.peek() != null && !reader.peek().isStartElement()) {
                    reader.nextEvent();
                }
                if (reader.peek() == null) {
                    return false;
                }
                QName startElementName = ((StartElement) reader.peek()).getName();
                if(elementsToGather.contains(startElementName.getLocalPart())) {
                    reader.nextEvent(); // move past the actual start element
                    XMLEvent dataEvent = reader.nextEvent();
                    gatheredElements.put(startElementName.getLocalPart(), dataEvent.asCharacters().getData());
                    continue;
                }
                if (startElementName.getLocalPart().equals(fragmentRootElementName)) {
                    if (fragmentRootElementNameSpace == null || startElementName.getNamespaceURI().equals(fragmentRootElementNameSpace)) {
                        return true;
                    }
                }
                reader.nextEvent();

            }
        } catch (XMLStreamException e) {
            throw new NonTransientResourceException("Error while reading from event reader", e);
        }
    }

    @SuppressWarnings("unchecked")
    @Override
    protected T doRead() throws Exception {
        T item = super.doRead();
        if(null == item)
            return null;
        T result = (T) new GatheredElementItem<T>(item, new     HashedMap(gatheredElements));
        if(log.isDebugEnabled())
            log.debug("Read GatheredElementItem: " + result);
        return result; 
    } 
```

收集的元素类非常基本：

```
public class GatheredElementItem<T> {
    private final T item;
    private final Map<String, String> gatheredElements;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:23:38.453

我还没有处理过这么大的[xml](/questions/tagged/xml "显示标记为“xml”的问题")文件大小，但考虑到你的问题，因为你想解析[xml](/questions/tagged/xml "显示标记为“xml”的问题")并写入一个平面文件，我猜想结合[XML Pull Parsing](http://www.xmlpull.org/)和智能代码来写入平面文件（[这可能会有所帮助](https://stackoverflow.com/questions/1062113/fastest-way-to-write-huge-data-in-text-file-java)），因为我们不想耗尽 Java 堆。您可以在 Google 上快速搜索有关使用 XML Pull Parsing 的教程和示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:15:32.393

如果您接受 JAXB/Spring Batch 之外的解决方案，您可能想看看 SAX Parser。

这是一种更加面向事件的解析 XML 文件的方式，当您希望在解析时直接写入目标文件时，这可能是一种好方法。SAX 解析器不会将整个 xml 内容读入内存，而是在输入流中遇到元素时触发方法。据我体验，这是一种非常节省内存的处理方式。

与您的 Stax-Solution 相比，SAX 将数据“推送”到您的应用程序中——这意味着您必须维护状态（例如您当前所在的标签），因此您必须跟踪您当前的位置。我不确定这是否是您真正需要的

以下示例读取结构中的 xml 文件并打印出 GroupBMsg-Tags 中的所有文本：

```
import java.io.FileReader;
import org.xml.sax.Attributes;
import org.xml.sax.ContentHandler;
import org.xml.sax.InputSource;
import org.xml.sax.Locator;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.XMLReaderFactory;

public class SaxExample implements ContentHandler
{
    private String currentValue;

    public static void main(final String[] args) throws Exception
    {
        final XMLReader xmlReader = XMLReaderFactory.createXMLReader();

        final FileReader reader = new FileReader("datasource.xml");
        final InputSource inputSource = new InputSource(reader);

        xmlReader.setContentHandler(new SaxExample());
        xmlReader.parse(inputSource);
    }

    @Override
    public void characters(final char[] ch, final int start, final int length) throws     SAXException
    {
        currentValue = new String(ch, start, length);
    }

    @Override
    public void startElement(final String uri, final String localName, final String     qName, final Attributes atts) throws SAXException
    {
        // react on the beginning of tag "GroupBMsg" <GroupBMSg>
        if (localName.equals("GroupBMsg"))
        {
            currentValue="";
        }
    }

    @Override
    public void endElement(final String uri, final String localName, final String     qName) throws SAXException
    {
        // react on the ending of tag "GroupBMsg" </GroupBMSg>
        if (localName.equals("GroupBMsg"))
        {
            // TODO: write into file
            System.out.println(currentValue);
        }
    }

    // the rest is boilerplate code for sax

    @Override
    public void endDocument() throws SAXException {}
    @Override
    public void endPrefixMapping(final String prefix) throws SAXException {}
    @Override
    public void ignorableWhitespace(final char[] ch, final int start, final int length)
        throws SAXException {}
    @Override
    public void processingInstruction(final String target, final String data)
        throws SAXException {}
    @Override
    public void setDocumentLocator(final Locator locator) {  }
    @Override
    public void skippedEntity(final String name) throws SAXException {}
    @Override
    public void startDocument() throws SAXException {}
    @Override
    public void startPrefixMapping(final String prefix, final String uri)
      throws SAXException {}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T13:34:41.760

最后，我实现了一个自定义的 StaxEventItemReader。

1.  配置片段RootElementName

2.  配置我自己的 manualHandleElement

    ```
    <property name="manualHandleElement">
    <list>
        <map>
            <entry>
                <key><value>startElementName</value></key>
                <value>GroupA</value>
            </entry>
            <entry>
                <key><value>endElementName</value></key>
                <value>GroupAHeader</value>
            </entry>
            <entry>
                <key><value>elementNameList</value></key>
                    <list>
                            <value>/GroupAHeader/Info1</value>
                            <value>/GroupAHeader/Info2</value>
                    </list>
            </entry>
        </map>
    </list> 
    ```

3.  在 MyStaxEventItemReader.doRead() 中添加以下片段

    ```
    while(true){
    if(reader.peek() != null && reader.peek().isStartElement()){
        pathList.add("/"+((StartElement) reader.peek()).getName().getLocalPart());
        reader.nextEvent();
        continue;
    }
    if(reader.peek() != null && reader.peek().isEndElement()){
        pathList.remove("/"+((EndElement) reader.peek()).getName().getLocalPart());
        if(isManualHandleEndElement(((EndElement) reader.peek()).getName().getLocalPart())){
            pathList.clear();
            reader.nextEvent();
            break;
        }
        reader.nextEvent();
        continue;
    }
    if(reader.peek() != null && reader.peek().isCharacters()){
        CharacterEvent charEvent = (CharacterEvent)reader.nextEvent();
        String currentPath = getCurrentPath(pathList);
        String startElementName = (String)currentManualHandleStartElement.get(MANUAL_HANDLE_START_ELEMENT_NAME);
        for(Object s : (List)currentManualHandleStartElement.get(MANUAL_HANDLE_ELEMENT_NAME_LIST)){
            if(("/"+startElementName+s).equals(currentPath)){
                map.put(getCurrentPath(pathList), charEvent.getData());
                break;
            }
        }
        continue;
    }

    reader.nextEvent(); 
    ```

    }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T13:45:48.750

尝试一些 ETL 工具，例如

[Pentaho 数据集成 (AKA Kettle)](http://wiki.pentaho.com/display/EAI/Get+Data+From+XML)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-09T11:01:14.670

您可以使用[声明式流映射 (DSM)](https://mfatihercik.github.io/dsm)流解析库。它可以处理 JSON 和 XML。它不会将 XML 文件加载到内存中。DSM 仅处理您在 YAML 或 JSON 配置中定义的数据。

您可以在读取 XML 时调用方法。这允许您部分处理 XML。您可以将此部分读取的 XML 数据反序列化为 Java 对象。

甚至您可以使用它在多个线程中读取。

你可以在这个答案中找到很好的例子

[使用 STAX Parser 将 XML 解组为三个不同对象的列表](https://stackoverflow.com/questions/56087924/unmarshalling-xml-to-three-lists-of-different-objects-using-stax-parser/56127934#56127934)

[JAVA - 解析巨大（超大）JSON 文件的最佳方法](https://stackoverflow.com/questions/9390368/java-best-approach-to-parse-huge-extra-large-json-file/56007435#56007435)（XML 相同）

# java - 布局，哪个会自动包装它的内容？

> ID：13952226
> 
> 赞同：3
> 
> 时间：2012-12-19T12:10:31.473
> 
> 标签：java, layout, swt

我有一个`composite A`，它应该包含另一个`composite B`.
`Composite B`会改变它的大小。

我应该应用什么布局`composite A`，以便它`composite B`自动换行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:25:03.897

我认为 a`GridLayout`对你有用，但请记住，你必须告诉你`compositeB`不要`SWT.FILL`反过来：

```
Composite compositeA = new Composite(parent, SWT.NONE);
compositeA.setLayout(new GridLayout(1, false));

Composite compositeB = new Group(compositeA, SWT.NONE);
compositeB.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1)); 
```

# wpf - 发布 WPF/xbap 时找不到程序集“NHibernate”

> ID：13952229
> 
> 赞同：1
> 
> 时间：2012-12-19T12:10:46.197
> 
> 标签：wpf, nhibernate, publish, xbap

尝试将 WPF 项目作为 xbap 发布到 IIS 实例，同时在内部使用 NHibernate + SQL CE 进行存储。

得到

启动 URI：http: ***///PROJ/WpfBrowserTest.xbap 应用程序标识：http:*** ///PROJ/WpfBrowserTest.xbap#WpfBrowserTest.xbap，版本=1.0.0.19，Culture=neutral，PublicKeyToken=df2c8f8ef56d960e，processorArchitecture=msil/WpfBrowserTest .exe，版本=1.0.0.19，文化=中性，PublicKeyToken=df2c8f8ef56d960e，处理器架构=msil，类型=win32

System.Runtime.Serialization.SerializationException：找不到程序集“NHibernate，版本=1.2.0.3001，文化=中性，PublicKeyToken=aa95f207798dfdb4”。在 System.Runtime.Serialization.Formatters.Binary.BinaryAssemblyInfo.GetAssembly()

对于其他依赖项（第 3 方库），我们已经签署/强命名了一些其他（互操作）程序集，包括反汇编、签名、重新组装它们。

在 Google/StackOverflow 上没有发现太多价值。关于这里有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:40:39.567

看完这篇博文，

[http://weblogs.asp.net/bsimser/archive/2008/09/12/setting-the-publish-status-to-include-for-3rd-party-files-with-xbap-deployments.aspx](http://weblogs.asp.net/bsimser/archive/2008/09/12/setting-the-publish-status-to-include-for-3rd-party-files-with-xbap-deployments.aspx)

我开始在 NHibernate.dll 上寻找子依赖项——虽然我没有 hibernate.cfg.xml——它是以编程方式完成的——我意识到我错过了在参考文献中包含 System.Data.SqlServerCe.dll。

感谢您为我指明正确的方向，比尔！

R/j

# powershell-3.0 - PowerShell：写入文本文件

> ID：13952230
> 
> 赞同：5
> 
> 时间：2012-12-19T12:10:50.843
> 
> 标签：powershell-3.0

我正在尝试获取计算机列表的已安装打印机列表。

当我运行这个脚本时，它只会“写入”最后一台计算机的信息。

我对 PS 很陌生，希望能得到一些帮助。

```
$filePath = "E:\ps\computerswithprinters.txt"
$class = "win32_printer"
$arycomputer = Get-Content "E:\ps\computers.txt"

foreach( $computer in $aryComputer)
{
   Write-Host "Retrieving printers from $computer ..."
   $wmi = Get-WmiObject -Class $class -computername $computer
   format-table -Property name, systemName, shareName -groupby driverName `
                -inputobject $wmi -autosize | Out-File -FilePath $filePath 
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T12:16:10.047

尝试使用`Out-File -FilePath $filePath -Append`

# c# - 如何从 Outlook 中获取发件人的电子邮件地址？

> ID：13952238
> 
> 赞同：3
> 
> 时间：2012-12-19T12:11:12.560
> 
> 标签：c#, .net

我已经编写了使用交换服务器从 Outlook 读取收件箱消息的代码。以下是阅读代码。

```
FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, searchFilter, itemview); 
```

结果成功。但在该结果中没有获得发件人的电子邮件地址。如何获取发件人的电子邮件地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:14:16.500

您应该将其`Item`转换为[EmailMessage](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.emailmessage_properties%28v=exchg.80%29.aspx)，然后您可以查看该`From`属性。

例如：

```
var mailItems = findResults.Where(x => x is EmailMessage).Cast<EmailMessage>().ToList();

foreach (EmailMessage item in mailItems)
{
     Console.WriteLine(item.From.Address);
} 
```

# html - 尝试使用 min-width 给第一个元素一个宽度

> ID：13952240
> 
> 赞同：1
> 
> 时间：2012-12-19T12:11:28.837
> 
> 标签：html, css

我有[这张](http://jsfiddle.net/xBsxH/3/)表，我想给第二个元素一个宽度，但它不起作用..

```
 <th style="min-width: 50px">
    Date from                                    
 </th> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:28:12.877

第二列（以及第三列）包含`input`元素，浏览器根据需要使列宽。您可以通过显式设置列宽*并*`table-layout: fixed`在元素上使用来防止这种情况`table`，但这往往会导致严重的问题，并且单元格内容会溢出或必须被截断。

所以最好的方法是设置`input type=text`元素的宽度，给它们添加属性`size=10`。为了使尺寸更精确，请考虑`font-family: Consolas, monospace`在 CSS 中为这些元素设置。然后，您将不需要任何明确的列宽度设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:32:01.367

you also can place a DIV-container in the TD-Element and set the min-width to the DIV. then you don't need table-layout:fixed. table-layout:fixed needs to set width and height to nearly every existing TD in the table. That's not very pretty...

# linux - 如何查找进程是否正在执行顺序/随机写入

> ID：13952241
> 
> 赞同：0
> 
> 时间：2012-12-19T12:11:32.973
> 
> 标签：linux, io

在 GNU/Linux 中量化这一点的最佳技术是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:40:44.093

这不完全是一个答案，但是..

如果您的意思是写入文件，您可以使用`strace`并查找`pwrite`或`lseek`+`write`组合。检查偏移量`pwrite`或`lseek`找出其顺序与否。

# c# - 我可以通过同一个 DataContext 对象同时访问多个表吗？

> ID：13952242
> 
> 赞同：9
> 
> 时间：2012-12-19T12:11:34.277
> 
> 标签：c#, .net, sql-server-2008, datacontext

假设我有一个`DataContext`对象并同时访问两个表：

```
using( var context = new DataContext( connectionString ) ) {
     foreach( firstTableEntry in context.GetTable<FirstTable>() ) {
         switch( firstTableEntry.Type ) {
         case RequiresSecondTableAccess:
         {
             var secondTable = context.GetTable<SecondTable>();
             var items = secondTable.Where( item => item.Id = firstTableEntry.SecondId );
             foreach( var item in items ) {
                handleItem( item );
             }
         }
         default:
           // not accessing the second table
     }
} 
```

请注意，在对另一个表进行查询时，我不会停止使用第一个查询结果，而是一直使用同一个`DataContext`对象。

这样的使用合法吗？我应该期待这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:29:37.273

这仅在您的数据库引擎中支持[多个活动记录集 (MARS)时才有效。](http://msdn.microsoft.com/en-us/library/cfa084cz%28v=vs.80%29.aspx)如果没有，您将生成异常。否则，你绝对可以做到这一点。

如果您没有 MARS 支持，则需要使用`.AsEnumerable`一次从数据库中下载所有记录并转换为内存中的可枚举。

这是关于 Entity Framework 中什么使用 MARS 以及如果没有它你不能做什么的[另一个很好的资源。](http://windowsazurecat.com/2011/09/understanding-sql-azure-federations-no-mars-support-and-entity-framework/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:24:32.947

正如大卫所评论的那样。我会添加到他的信息中...参见 WEB.CONFIG 如下，连接字符串中的 MARS=True

```
<connectionStrings>
<add name="ContextNameXYZ" connectionString="Data Source=ServerName;Initial Catalog=DBName;Integrated Security=True;MultipleActiveResultSets=True;App=EntityFramework"
   providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

# c# - C#中的数据库恢复错误

> ID：13952245
> 
> 赞同：1
> 
> 时间：2012-12-19T12:11:42.987
> 
> 标签：c#, sql-server-2008-r2

> **可能重复：**
> [无法获得独占访问权限，因为数据库正在使用中](https://stackoverflow.com/questions/4046708/exclusive-access-could-not-be-obtained-because-the-database-is-in-use)

我在项目中使用 C#、.net4 和 SQL Server 2008 R2 并使用此代码恢复数据库：

```
_comm = new SqlCommand("use master; RESTORE DATABASE [DB1] FROM  DISK = @Address WITH  RESTRICTED_USER,  FILE = 1,  NOUNLOAD,  REPLACE,  STATS = 10; use DB1;", _conn);
        _comm.CommandType = System.Data.CommandType.Text;
        _comm.Parameters.AddRange(new SqlParameter[] 
                {
                new SqlParameter("@Address", _path)
                });

            _conn.Open();
            _comm.ExecuteNonQuery(); 
```

显示以下错误：

> 无法获得独占访问权限，因为数据库正在使用中。RESTORE DATABASE 异常终止。将数据库上下文更改为“主”。将数据库上下文更改为“DB1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:27:22.623

连接到服务器后，最好使用 SMO（因为不需要 master），您可以随心所欲

```
using Microsoft.SqlServer.Management.Smo;

...

        Server myServer = new Server(@".\SQLExpress");

        Database mydb = myServer.Databases["DB1"];
        if(mydb!=null)
           myServer.KillAllProcesses(mydb.Name);//detach

        Restore restoreDB = new Restore();
        restoreDB.Database = mydb.Name;

        restoreDB.Action = RestoreActionType.Database;
        restoreDB.Devices.AddDevice(_path, DeviceType.File);

        restoreDB.ReplaceDatabase = true;

        restoreDB.NoRecovery = false;

        restoreDB.SqlRestore(myServer); 
```

**备份**

```
 Server myServer = new Server(@".\SQLExpress");

        Database mydb = myServer.Databases["DB1"];

        Backup bkp = new Backup();

        bkp.Action = BackupActionType.Database;

        bkp.Database = mydb.Name;

        bkp.Devices.AddDevice(_path, DeviceType.File);

        bkp.BackupSetName = "DB1 backup";//optional
        bkp.BackupSetDescription = "mybackup dated " + DateTime.Now.ToString("dd/MM/yyyy HH:mm:ss");//optional

        bkp.Initialize = true;
        bkp.Incremental = false;

        bkp.SqlBackup(myServer); 
```

**参考 ：**

**C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.ConnectionInfo.dll**

**C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.Management.Sdk.Sfc.dll**

**C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.Smo.dll**

**C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.SmoExtended.dll**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:26:47.257

在调用之前插入以下行`SqlCommand`：

```
_conn.ChangeDatabase("master"); 
```

# java - 文本框中的多行字符串支持问题？

> ID：13952249
> 
> 赞同：1
> 
> 时间：2012-12-19T12:12:12.043
> 
> 标签：java, javascript, html, jsp

我在文本框中面临一个问题，无法在其中显示多行。

比如我刚才在winword里复制了一段三行文字，粘贴到文本框中。只有 winword 的第一行会显示在文本框中。另外两行不会在文本框中，我不知道为什么。

我在 Java 的聊天应用程序中需要这种支持，所以我必须实现它。

请帮我解决问题或提供一些想法或示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:21:03.227

我认为你误会了

```
<input type="text" /> 
```

与`textarea`标签。对于多行，您可以使用 textarea 如下：

```
<textarea rows="4" cols="50">
    Some text here
</textarea> 
```

[在此处](http://www.w3schools.com/tags/tag_textarea.asp)查看有关`textarea`标签的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:14:12.650

根据定义，文本框仅支持单行。您正在寻找一个文本区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:19:10.643

我不确定你的意思是`textbox`. 在 HTML 中，您有多种输入类型：

```
<input type="text" name="single-line" />
<textarea name="multiline" /> 
```

带 type 的 input`text`只支持一行输入，而 textarea 支持多行。textarea 在大多数浏览器中默认为几行，您可以使用 CSS 设置样式以一次仅显示一行。

```
textarea { height: 1em; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:20:53.807

在文本框 html 代码中使用以下代码

文本框 id="文本框" textmode="多行"

或者你可以使用

在此处输入您的评论...

谢谢。

# wpf - 样式中具有内部边距的 DataGrid 的初始大小错误，在调整窗口大小时自行排序

> ID：13952250
> 
> 赞同：1
> 
> 时间：2012-12-19T12:12:12.113
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我有一个包含许多 DataGridTemplateColumns 的 DataGrid。其中一个具有 Width="*"，其余的具有 Width="Auto"。大多数只包含一个文本框。我想要每个元素的每一边都有一个边距，所以在分配给 TextBox 的样式中，我有 Margin="10,1"。我观察到的是 DataGrid 的初始宽度太宽了。如果手动使窗口变薄，DataGrid 也会变薄——但会保持超宽。如果窗口变大，DataGrid 将不会变宽，直到它的宽度正确，从那时起调整大小将正常工作。

如果我从样式中删除边距并将其显式放置在每列的 TextBox 中，那么一切都按预期工作，所以我的问题就解决了。但是我仍然想知道发生了什么，因为如果我想改变这些边距，那么改变一种风格会好得多。这是 DataGrid 中的一些奇怪的错误还是我理解不正确的东西？

DataGrid 嵌套在其他一些项目中，但由于修复非常简单，我认为 DataGrid 和样式是唯一重要的因素。

列看起来像这样；

```
<DataGridTemplateColumn x:Name="SKUColumn"
            Header="SKU" 
            Width="Auto">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBox x:Name="skuText"
                     Text="{Binding Path=SKU, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                     Style="{StaticResource textBodyCell}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

和 textBodyCell 看起来像这样；

```
<Style x:Key="textBodyCell" TargetType="{x:Type TextBox}">
    <Setter Property="FontSize"
            Value="{StaticResource bodySize}" />
    <Setter Property="TextWrapping" Value="NoWrap"/>
    <Setter Property="AcceptsReturn" Value="False"/>
    <Setter Property="Margin" Value="10,1"/>
    <Setter Property="Template" Value="{DynamicResource DataGridCellTextBox}"/>

</Style> 
```

DataGridCellTextBox 在哪里

```
<ControlTemplate x:Key="DataGridCellTextBox" TargetType="{x:Type TextBoxBase}">

    <ScrollViewer x:Name="PART_ContentHost" Foreground="{StaticResource DataGridUnSelectedRowForeground}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>

    <ControlTemplate.Triggers>
        <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridRow}}}" Value="True">
            <Setter Property="Foreground"  Value="{StaticResource DataGridSelectedRowForeground}" />
        </DataTrigger>
            <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGridRow}}}" Value="False">
            <Setter Property="Foreground"  Value="{StaticResource DataGridUnSelectedRowForeground}" />
        </DataTrigger>          

        <Trigger Property="IsEnabled" Value="False">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

# mysql - 替换 MySQL 中的奇怪字符

> ID：13952251
> 
> 赞同：4
> 
> 时间：2012-12-19T12:12:12.433
> 
> 标签：mysql, character-encoding

我的一些文本显示得很奇怪，我需要替换一些字符。但是我在使用特定字符时遇到问题，以下字符（javascript代码，以显示字符之间的区别）：

```
<script>
alert('–'.charCodeAt(0) + ':' + '-'.charCodeAt(0));
</script> 
```

在 MySQL 中，我尝试应用以下查询：

```
UPDATE translation SET columnx = REPLACE(columnx, '–', '-'); 
```

但它会影响 0 行。因此问题是，将这些奇怪的字符替换为正确字符的正确查询是什么？

**更新**

奇怪的字符显示如下（正方形）：

![奇怪的字符，显示为正方形](../Images/0deb875410fffe305559585982878a02.png)

在 JSON 中，它被编码为`\u0096`而不是 `-`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:22:36.570

就像 Alvaro 所说，您应该真正尝试将数据库更改为正确的字符集。通常 utf-8 字符集就足够了。

更多信息请看这里： [http ://dev.mysql.com/doc/refman/5.0/en/charset-applications.html](http://dev.mysql.com/doc/refman/5.0/en/charset-applications.html)

如果您无权这样做，请查看： [http](http://dev.mysql.com/doc/refman/5.1/de/charset-convert.html) ://dev.mysql.com/doc/refman/5.1/de/charset-convert.html 和 [https://dba.stackexchange.com/questions/ 9944/mysql-transfer-iso-8859-1-to-utf-8](https://dba.stackexchange.com/questions/9944/mysql-transfer-iso-8859-1-to-utf-8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:07:08.940

这看起来不是字符集，而是与排序规则相关。排序规则定义了 MySQL 在排序或比较时如何处理“几乎相等”的字符。

例如，iso-8859-15 默认排序规则将处理`ü = u`

您可以做的是将您的字段视为 bin 排序规则。二进制排序规则不会将相似字符视为相等。

选择正确的二进制排序规则

```
SELECT CHARACTER_SET_NAME, COLLATION_NAME FROM information_schema.COLLATIONS WHERE COLLATION_NAME LIKE '%bin%'; 
```

然后像这样执行更新：

```
UPDATE TABLE SET columnx = REPLACE( columnx COLLATE latin1_bin, '–', '-' ); 
```

**更正：** 替换比较总是使用二进制排序规则完成

**编辑：**

如果您仍然更新了 0 行，您可能没有替换正确的字符。将包含该字符的字符串转换为十六进制并发布十六进制值，以便我们可以找出我们正在谈论的字符

例如

```
SELECT HEX( columnx ) LIMIT 1; 
```

**编辑2：**

刚刚看到，您实际上说您得到`\u0096`了一个控制字符，称为[START OF GUARDED AREA](http://www.fileformat.info/info/unicode/char/96/index.htm) .. 这个字符创建的程序是什么.. 在十六进制中，这是`0xC2 0x96`. 在您的示例查询中，您正在替换一个名为[EN DASH的字符](http://www.fileformat.info/info/unicode/char/2013/index.htm)

很难通过粘贴来替换控制字符，转换可能会破坏它。相反，您可以使用[UNHEX( hexval )](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_unhex)告诉 MySQL 您指的是哪个字符

```
UPDATE TABLE SET columnx = REPLACE( columnx UNHEX( 'C296' ), '-' ); 
```

或者为了更清楚（甚至更令人困惑:)），这也将“正常”连字符作为十六进制值传递

```
UPDATE TABLE SET columnx = REPLACE( columnx UNHEX( 'C296' ), UNHEX( '2D' ) ); 
```

# android - 类似菜单项的路径 - Android

> ID：13952252
> 
> 赞同：3
> 
> 时间：2012-12-19T12:12:18.813
> 
> 标签：android, android-layout, android-menu

我在我的应用程序中使用了[Siyamed 的](https://github.com/siyamed/android-satellite-menu/)菜单项。我想将菜单项放在屏幕的底部中心。当我点击它时，子项应该围绕中心图标。关于如何开始的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:32:44.193

我建议您尝试另一种实现：[daCapricorn 的 ArcMenu](https://github.com/daCapricorn/ArcMenu)。

正如作者[在 Google+ 上所说](https://plus.google.com/107460592910747948011/posts)：

如果你想让它对齐屏幕底部，你可以`alignparentbottom="true"`在 xml 中设置并以编程方式计算`marginBottom`（它应该是负数）。

*PS：我的个性最终使用 ArcMenu 库而不是 SatelliteMenu 来解决同样的问题。*

# actionscript-3 - 通过 Adob e Flex 创建图像的 SWF 视频

> ID：13952253
> 
> 赞同：1
> 
> 时间：2012-12-19T12:12:19.820
> 
> 标签：actionscript-3, apache-flex, air, flex4, flash-builder4.5

我不知道它是否是放置这个的正确位置。但我从过去 12 小时开始一直在尝试，但没有发现任何相关内容。

1.  我正在创建一个 Adob​​e AIR 项目（将在桌面上运行），它会询问本地 pc 上的图像位置。

2.  用户完成选择图像后。我想输出所选图像的 SWF 视频（幻灯片）。

第二步怎么做。请指导。我想从我的 AIR Flex 桌面应用程序创建一个输出文件 (SWF)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:27:29.047

查看[https://github.com/claus/as3swf](https://github.com/claus/as3swf)在运行时编译 SWF...

这个人似乎有类似的问题[AS3 生成动态 SWF？](https://stackoverflow.com/questions/10266437/as3-to-generate-dynamic-swf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:48:57.460

您可以尝试[SWFtools中的以下选项](http://www.swftools.org/)

> **JPEG2SWF 拍摄**一张或多张 JPEG 图片并从中生成 SWF 幻灯片。支持运动估计压缩 (h.263) 以更好地压缩视频序列。
> 
> **PNG2SWF**与 JPEG2SWF 类似，仅适用于 PNG。
> 
> **GIF2SWF**将 GIF 转换为 SWF。还能够处理动画 GIF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T09:48:44.403

这是我所做的：

1.  安装 as3 编译器 (mxmlc)
2.  使用 NativeProcess 运行命令 mxmlc.exe sample.as3

# java - 如何获取 Java Web 应用程序路径？

> ID：13952254
> 
> 赞同：2
> 
> 时间：2012-12-19T12:12:20.530
> 
> 标签：java

我在java中有一个文件上传servlet。我想设置上传文件夹的路径，让它在任何服务器上运行。我说：

```
 File disk = new File("/myportlet/upload/"+item.getName());
 item.write(disk); 
```

但什么都没有保存。当我使用绝对路径上传文件夹时，一切正常。
那么如何设置服务器上传文件夹的路径呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:32:01.223

The leading "/" at the `new File()` constructor refers to the root of the file system. The file will be written into a directory named `/myportlet/upload`, in your code.

As the comments implied, writing into appserver-internal directories violates the spec and is generally a terrible idea - I honestly can't think of one proper use for doing so. What you want to do is to read the target path from a parameter - for example, a servlet's initialization parameter or a context initialization parameter - and use that.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:33:48.097

我使用了下面的代码片段。它在 Windows 服务器上运行良好。

```
File f=new File("sample.xls");
        f.createNewFile();
        FileOutputStream fos=null;
        if(f != null){
            fos=new FileOutputStream(f);
            fos.write(b);
            fos.flush();
            fos.close();
        } 
```

# objective-c - 使用 UIWebView 作为脚本引擎

> ID：13952259
> 
> 赞同：1
> 
> 时间：2012-12-19T12:12:38.557
> 
> 标签：objective-c

我正在为 iPhone 开发一个调查引擎。我们使用可以在商店安装后下载的声明性 xml 格式。它工作得很好，但无法编写脚本正在成为问题。我有这个想法使用 webView 来执行 javascript 代码来提供这个功能。

我的问题是这会违反苹果不下载可执行脚本代码的规则吗？它们似乎确实允许下载将在 Web 视图中运行的 JS 代码。他们会认为这种做法是对这条规则的滥用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:24:57.547

我不这么认为。许多本机应用程序实际上都是以这种方式构建的。他们只需打开一个 web 视图并加载一个网页，所有逻辑都在 javascript 中完成。

# c# - 在 C# 中从 SQL Server 插入和检索 ByteArray

> ID：13952261
> 
> 赞同：8
> 
> 时间：2012-12-19T12:12:41.880
> 
> 标签：c#

我有一个要存储在数据库中的 128 位密钥。我的代码创建密钥 as`byte[16]`和数据库中的数据类型是`varbinary(16)`.

当我尝试再次从数据库中检索字节数组时，我没有得到原始值。

这是我的代码：

```
byte[] test =  new byte[16]{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15};

SqlCommand myInsertCmd = new SqlCommand("INSERT INTO Test(test) VALUES(@Param)", myConnection);       
SqlParameter param = myInsertCmd.Parameters.Add("@Param", SqlDbType.VarBinary, 16);
param.Value = test;

myInsertCmd.ExecuteNonQuery();

SqlDataAdapter myAdapter1 = new SqlDataAdapter("Select test from Test;", myConnection);
DataTable dt = new DataTable();
myAdapter1.Fill(dt);

foreach (DataRow row in dt.Rows)
{
    char[] charArray = row["test"].ToString().ToCharArray();
} 
```

对于`charArray`，我得到 0x0053、0x0079,0x0073,0x0074 等，而且`charArray`只有 13 个字节长。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T12:17:56.070

`row["Test"]`包含`byte[]`，因此`row["Test"].ToString()`返回类型的默认值`ToString`，`byte[]`即`"System.Byte[]"`. 之后您转换`System.Byte[]`并获得该结果

```
foreach (DataRow row in dt.Rows)
{
    byte[] byteArray = (byte[])row["test"];
} 
```

# c# - 在 Excel 2003 中调整公式栏的大小

> ID：13952266
> 
> 赞同：12
> 
> 时间：2012-12-19T12:12:53.923
> 
> 标签：c#, vsto

我创建了一个 VSTO 应用程序并寻找一些东西来设置公式栏的高度。此选项适用于 Excel 2007，但我找不到任何可以帮助我解决 2003 版 excel 的此类属性。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:55:04.003

[Application.FormulaBarHeight](http://msdn.microsoft.com/en-us/library/office/ff841264.aspx)属性是在 Excel 2007 中添加的 ，在早期版本中不可用。

# php - Drupal 不会将 echo 输出为匿名

> ID：13952267
> 
> 赞同：0
> 
> 时间：2012-12-19T12:12:59.633
> 
> 标签：php, drupal-7

我对 Drupal 7 有一个奇怪的问题。

出于调试目的，我发现如果我没有登录，在开发我的模块时，我在我的 drupal 页面上看不到任何回声。

我无法使用 drupal_set_message()，或创建/读取 cookie。

知道这是为什么吗？

**编辑：** 包括匿名在内的所有用户都可以看到该节点。我正在开发一个显示在节点上的模块（它有一些表单元素等）。

我尝试根据是否设置了 cookie 来设置一些默认文本。只要您登录，它就可以完美运行，但是一旦您是匿名用户，它就不会读/写 cookie。

我尝试通过放入一些 echo 和 drupal_set_message() 来调试它，但它们仅在我登录时显示，并且不显示给匿名用户。我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:39:34.723

确保在此处禁用匿名用户的缓存：admin/config/development/performance

在开发系统上，最好也禁用所有带宽优化复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:24:10.707

如果向未经身份验证的用户显示调试消息是安全的（例如：您的站点无法从 Internet 访问），您可以这样做：

*   安装[开发](http://drupal.org/project/devel)模块
*   在权限表（example.com/admin/people/permissions）中启用“访问开发者信息”
*   使用`dpm`或[其他功能](http://ratatosk.net/drupal/tutorials/debugging-drupal.html)来打印您的日志。

但是，如果未经身份验证的用户由于对该内容的权限而无法访问该特定内容，则您必须启用显示该内容的权限。

# linux - 在特定端口停止 ssh 服务

> ID：13952269
> 
> 赞同：0
> 
> 时间：2012-12-19T12:13:06.983
> 
> 标签：linux, bash, ssh

我已经在一系列端口上启动了多个 ssh 服务，以进行特定测试，使用

```
/usr/sbin/sshd -p portnumber 
```

如何在我开始的特定端口停止服务？我见过这个命令（但是一般来说，我必须停在特定的端口）

```
/etc/init.d/ssh stop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:14:39.813

要停止所有实例，您可以使用：

```
killall sshd 
```

如果你想要一个特定的，你需要使用`ps aux | grep sshd -p <port>`. 在那里你得到了你可以简单地杀死的pid（进程id）`kill <pid>`。

# javascript - 在列表项旁边对齐 div

> ID：13952270
> 
> 赞同：25
> 
> 时间：2012-12-19T12:13:07.303
> 
> 标签：javascript, jquery, html, css

我正在尝试创建`div`元素并将项目动态打印到它们上。我创建[了一个演示](http://jsfiddle.net/y44dR/3/)来展示我已经到达的位置。

我的代码的问题是它没有显示在我想要的列表旁边。相反，它显示在底部。是否可以在`div`我悬停的元素旁边显示新的？

```
$(".bubble").live({
    mouseenter : function() {
        $("#bubble").show();
        $("#bubble").html($(this).attr('id'));
    },
    mouseleave : function() {
        $("#bubble").empty();
    }
}); 
```

```
#bubble{
    width:100px;
    height:20px;
    background-color:#666666;
    position:absolute;
    display:hidden;
} 
```

```
<ul>
    <li><span class="bubble" id="test1">test1</span></li>
    <li><span class="bubble" id="test2">test2</span></li>
    <li><span class="bubble" id="test3">test3</span></li>
    <li><span class="bubble" id="test4">test4</span></li>
    <li><span class="bubble" id="test5">test5</span></li>
</ul>
<div id="bubble"></div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T12:22:46.240

您需要设置`#bubble`相对于`li`鼠标悬停的位置。尝试这个：

```
$("ul").on('hover', '.bubble', function(e) {
    if (e.type == 'mouseenter') {
        var $el = $(this);
        $("#bubble")
            .html($el.attr('id'))
            .css({
                top: $el.offset().top,
                left: $el.offset().left + $el.width()
            })
            .show();
    }
    else {
        $("#bubble").empty();
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/y44dR/23/)

请注意，我已经删除了 of 的使用，`live()`因为它已被弃用，`on()`而是与委托一起使用。我也使用了这个`hover`事件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-19T12:22:44.667

那么纯 CSS 解决方案呢？

*HTML：*

```
<ul>
<li>
    <span class="bubble" id="test1">test1</span>
    <div>test1</div>
</li>
<li>
    <span class="bubble" id="test2">test2</span>
    <div>test2</div>
</li>
<li>
    <span class="bubble" id="test3">test3</span>
    <div>test3</div>
</li>
<li>
    <span class="bubble" id="test4">test4</span>
    <div>test4</div>
</li>
<li>
    <span class="bubble" id="test5">test5</span>
    <div>test5</div>
</li>
</ul> 
```

*CSS：*

```
ul li div {
    width: 100px;
    height: 10px;
    background-color: #666666;
    position: absolute;  
    display: none;
}

ul li:hover div {
    display: inline;   
} 
```

JSFiddle：http: [//jsfiddle.net/H2ZMc/](http://jsfiddle.net/H2ZMc/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-19T12:20:40.960

希望这可以帮助：

**[JS-小提琴演示](http://jsfiddle.net/Aki143S/y44dR/16/)**

我将#bubble 附加到 li

```
$(".bubble").live({
           mouseenter : function() {
               $("#bubble").html($(this).attr('id'));
               $(this).append($("#bubble").show());               
            },
            mouseleave : function() {
             $("#bubble").empty().hide();

            }
  }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T12:23:06.690

尝试这个：

```
var bubble = $("#bubble");

$(".bubble").live({
    mouseenter : function(e) {    
        $("#bubble").html($(this).attr('id'));
        e.target.appendChild(bubble);
    },

    mouseleave : function() {
        $("#bubble").empty();        
    }
}); 
```

这样做是将气泡元素附加到鼠标所在的元素上。通过应用你可以让它出现在它的兄弟旁边`display: inline`，`div`而不是在它下面，就像你直接使用这个代码一样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T12:54:44.727

为什么`.on()`在`#bubble`元素已经存在时使用。

```
$(".bubble").hover( function( ) {

    var offset = $(this).offset();

    $("#bubble").html($(this).attr("id"))
        .css({ top: offset.top, left: offset.left + $(this).width() })
        .show();
}, function( ) {
    $("#bubble").html("").hide();
}); 
```

[**在这里**](http://jsfiddle.net/bruno/y44dR/24/)提琴[](http://jsfiddle.net/bruno/y44dR/24/)

 *** * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-19T12:22:35.053

照云母说的做，也去掉位置：绝对；

所以css应该是

```
#bubble{
width:100px;
height:10px; 
background-color:#666666;
display:hidden;
display: inline;
float: left;
}

ul{
display: inline;
float: left;   
} 
```

[http://jsfiddle.net/y44dR/21/](http://jsfiddle.net/y44dR/21/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-19T12:17:53.313

如果您提供 the`<ul>`和`<div>`以下样式，它应该可以工作。

```
display: inline;
float: left; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-19T12:26:43.740

```
$(".bubble").live({
    mouseenter: function() {
        $("#bubble").show();
        $("#bubble").html($(this).attr('id'));

        var p = $(this).position();
        $("#bubble").css({left: p.left + $(this).outerWidth(), top: p.top });
    },
    mouseleave: function() {
        $("#bubble").empty().css({top: '', left: ''});
    }
});​ 
```**

# .htaccess - .htaccess - 是否可以结合使用静态和动态 url？

> ID：13952274
> 
> 赞同：0
> 
> 时间：2012-12-19T12:13:26.110
> 
> 标签：.htaccess

目前，我使用以下代码将动态 URL 转换为 .htaccess 文件中的静态 URL：

```
RewriteRule ^([a-z0-9_\-]+)$ /index.php?page=$1 [L,NC]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?page=([^&]+)\ HTTP/
RewriteRule ^index\.php$ http://www.mywebsite.com/%1? [R=301,L] 
```

我想知道的是是否可以更改此规则，以便可以通过以下方式访问页面，`www.mywebsite.com/news`还`$_GET`可以像这样附加其他信息：`www.mywebsite.com/news?id=1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:24:01.067

您想看一下[QSA 标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)，它将在您构造查询字符串后附加查询字符串：

```
RewriteRule ^([a-z0-9_\-]+)$ /index.php?page=$1 [L,NC,QSA] 
```

这使得它的请求`http://www.mywebsite.com/news?id=1`在内部被重写为：`/index.php?page=news&id=1`

# banner - 动画照片横幅中的图像位置错误

> ID：13952275
> 
> 赞同：0
> 
> 时间：2012-12-19T12:13:43.323
> 
> 标签：banner, animated

我在我的网站上使用[这个](http://designshack.net/tutorialexamples/photobanner/index.html)动画横幅。

现在我已经从教程中复制了确切的代码，但由于某种原因，在我的[版本](http://www.gmbelt.com/index.html)中，图像似乎被放置在表格的底部并被切断，而不是像示例中那样。我已经尝试了许多可能的解决方案，但要么我在错误的地方完成了它们，要么它们根本不起作用。

通常我会添加代码，但在这种情况下（您将从查看页面源代码中看到）发布时间太长。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:32:54.423

Well, I just opened Chrome Inspector changed few css properties and it worked. Here they are...

```
.photobanner 
{
    height: 232px;
    width: 984px;
}
#container2 
{
    width: 748px;
    overflow: hidden;
    margin: 50px auto;
    background: white;
} 
```

I guess this would work.Tested in chrome..try your self with other browser and you should reduce margin of `<h1>` tag

# extjs - extjs4 行样式

> ID：13952277
> 
> 赞同：0
> 
> 时间：2012-12-19T12:13:58.153
> 
> 标签：extjs, extjs4, extjs4.1

我在网格行上有条件样式，样式最初有效，但它不响应数据更改。可以说，如果您将列编辑为负值，可以说我希望它的样式变回红色。

我试过了

```
grid.doLayout();
grid.doComponentLayout();
grid.update();
grid.updateLayout() 
```

那么我如何强制网格更新行上的css（我如何触发getRowClass，或者有没有其他方法可以做到这一点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:25:33.227

~~只有在网格上使用相同的 columnmodel~~~~运行`reconfigure`~~时，您才能尝试做的事情。覆盖`getRowClass`视图的属性导致 grid.Panel 本身没有。

```
gridReference.getView().getRowClass = function(record, rowIndex, rowParams, store){ 
     // your code 
} 
```

请参阅**[JSFiddle](http://jsfiddle.net/sran/K68Dd/1/)**示例

***或者，您可以使用渲染器***

使用渲染器，但这次您通过添加一个类来更改单元格的元数据。这可以通过修改渲染器的第二个参数来完成，它是一个元对象，如下所示：

```
var classRenderer = function(v,m) { 
    if (v=='Lisa') { 
        m.tdCls = 'demo' 
    } 
    return v; 
} 
```

这里还有一个**[JSFiddle](http://jsfiddle.net/sran/czrt6/17/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:18:49.717

您可以将渲染器配置用于列...

```
 function change(val) {
    if (val > 0) {
        return '<span style="color:green;">' + val + '</span>';
    } else if (val < 0) {
        return '<span style="color:red;">' + val + '</span>';
    }
    return val;
}

   function pctChange(val) {
    if (val > 0) {
        return '<span style="color:green;">' + val + '%</span>';
    } else if (val < 0) {
        return '<span style="color:red;">' + val + '%</span>';
    }
    return val;
}

   // create the Grid
var grid = Ext.create('Ext.grid.Panel', {
    store: store,
    stateful: true,
    collapsible: true,
    multiSelect: true,
    stateId: 'stateGrid',
    columns: [
        {
            text     : 'Company',
            flex     : 1,
            sortable : false,
            dataIndex: 'company'
        },
        {
            text     : 'Price',
            width    : 75,
            sortable : true,
            renderer : 'usMoney',
            dataIndex: 'price'
        },
        {
            text     : 'Change',
            width    : 75,
            sortable : true,
            renderer : change,
            dataIndex: 'change'
        },
        {
            text     : '% Change',
            width    : 75,
            sortable : true,
            renderer : pctChange,
            dataIndex: 'pctChange'
        },
        {
            text     : 'Last Updated',
            width    : 85,
            sortable : true,
            renderer : Ext.util.Format.dateRenderer('m/d/Y'),
            dataIndex: 'lastChange'
        }
          ],
 height: 350,
    width: 600,
    title: 'Array Grid',
    renderTo: 'grid-example',
    viewConfig: {
        stripeRows: true,
        enableTextSelection: true
    }
}); 
```

# jquery - 需要根据 jquery 中的文化具有日期掩码

> ID：13952280
> 
> 赞同：15
> 
> 时间：2012-12-19T12:14:02.013
> 
> 标签：jquery, asp.net-mvc, html-helper, culture

MVC 页面的文化取决于用户。在搜索选项（搜索可以通过 DueDate 完成）中，我需要在该 DueDate 文本框上有一个掩码。掩码必须依赖于用户的文化。在 js 和 cshtml 中都有一个错误说：`mask.split is not a function`. 将我`jquery.maskedinput-1.2.3.js`的从更改`make.split`为`make.toString()`.split 并且错误消失了，但必须看起来像这样：`[object Object]`或者有一些`01`数字。任何想法？中的代码`cshtml`如下所示：

```
 <script type="text/javascript">
    $(function () {
        var maskFormat = @Html.CurrentDateMask();
        $(".DateBox").mask(maskFormat);
    });
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:37:02.670

您可以将 maskFormat 作为全局变量（将其放在 window 对象中），然后将其引用到 JS 文件中的 window.maskFormat ：

cshtml 文件：

```
(function () {
    window.maskFormat = "@Html.CurrentDateMask();";
})(); 
```

并在您的 Javascript 文件中：

```
$(function(){
    $(".DateBox").mask(window.maskFormat);
}); 
```

但要小心，不要添加许多全局变量或使用易于覆盖的名称

# unix - 用unix中的另一个序列替换字符串模式

> ID：13952308
> 
> 赞同：6
> 
> 时间：2012-12-19T12:16:08.673
> 
> 标签：unix, awk

`TaskID_1`我想用一个开始的序列替换字符串，`1001`这`TaskID_1`可以在我的输入文件中存在任意多行。同样，我需要`TASKID_2`用下一个序列值替换输入文件中所有出现的`1002`。

输入文件：

```
12345|45345|TaskID_1|dksj|kdjfdsjf|12
1245|425345|TaskID_1|dksj|kdjfdsjf|12
1234|25345|TaskID_2|dksj|kdjfdsjf|12
123425|65345|TaskID_2|dksj|kdjfdsjf|12
123425|15325|TaskID_1|dksj|kdjfdsjf|12
11345|55315|TaskID_2|dksj|kdjfdsjf|12
6345|15345|TaskID_3|dksj|kdjfdsjf|12
72345|25345|TaskID_4|dksj|kdjfdsjf|12
9345|411345|TaskID_3|dksj|kdjfdsjf|12 
```

输出文件应如下所示：

```
12345|45345|1001|dksj|kdjfdsjf|12
1245|425345|1001|dksj|kdjfdsjf|12
1234|25345|1002|dksj|kdjfdsjf|12
123425|65345|1002|dksj|kdjfdsjf|12
123425|15325|1001|dksj|kdjfdsjf|12
11345|55315|1002|dksj|kdjfdsjf|12
6345|15345|1003|dksj|kdjfdsjf|12
72345|25345|1004|dksj|kdjfdsjf|12
9345|411345|1003|dksj|kdjfdsjf|12 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T12:26:06.693

这是一种使用方法`awk`：

```
awk 'BEGIN { FS=OFS="|" } { $3=1000 + NR }1' file 
```

或者不那么冗长：

```
awk -F '|' '{ $3=1000 + NR }1' OFS='|' file 
```

结果：

```
12345|45345|1001|dksj|kdjfdsjf|12
1245|425345|1002|dksj|kdjfdsjf|12
1234|25345|1003|dksj|kdjfdsjf|12
123425|65345|1004|dksj|kdjfdsjf|12
123425|15325|1005|dksj|kdjfdsjf|12
11345|55315|1006|dksj|kdjfdsjf|12
6345|15345|1007|dksj|kdjfdsjf|12
72345|25345|1008|dksj|kdjfdsjf|12
9345|411345|1009|dksj|kdjfdsjf|12 
```

对于第一个示例，文件分隔符和输出文件分隔符设置为单个管道字符。这是在`BEGIN`块中设置的，因此它只执行一次，而不是在每一行输入。然后我们将第三列设置为等于 1000 加上一个递增变量。我们可以将`++i`其用作此变量，但我们可以改为使用`NR`（记录号/行号的缩写），因此这将避免创建额外变量的需要。最后`1`的默认情况下启用打印。更详细的解决方案如下所示：

```
awk 'BEGIN { FS=OFS="|" } { $3=1000 + NR; print }' file 
```

* * *

***编辑：***

使用更新的数据文件，尝试：

```
awk 'BEGIN { FS=OFS="|" } { sub(/.*_/,"",$3); $3+=1000 }1' file 
```

结果：

```
12345|45345|1001|dksj|kdjfdsjf|12
1245|425345|1001|dksj|kdjfdsjf|12
1234|25345|1002|dksj|kdjfdsjf|12
123425|65345|1002|dksj|kdjfdsjf|12
123425|15325|1001|dksj|kdjfdsjf|12
11345|55315|1002|dksj|kdjfdsjf|12
6345|15345|1003|dksj|kdjfdsjf|12
72345|25345|1004|dksj|kdjfdsjf|12
9345|411345|1003|dksj|kdjfdsjf|12 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T14:03:40.600

使用 Steve 的加 1000 逻辑的 Perl 解决方案：

```
perl -pne 's/TaskID_(\d+)/$1+1000/e;' file 
```

这会将“TaskID_n”替换为 1000+n。'e' 用于评估替换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T12:36:07.463

我想不出比 awk 中建议的一个 steve 更好的解决方案。

所以这是一个更糟糕的解决方案，只使用 bash。

```
#!/bin/bash

IFS='|'

while read f1 f2 f3 f4 f5 f6; do
    printf '%s|%s|%d|%s|%s|%s\n' "$f1" "$f2" "$((${f3#*_}+1000))" "$f4" "$f5" "$f6"
done < input 
```

它“更糟”只是因为它会比 awk 慢得多，而 awk 处理这类问题既快速又高效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T14:07:39.300

替换`TaskID_`为，对于单个数字 ID `100`，这非常容易：`sed`

```
$ sed 's/TaskID_/100/' file
12345|45345|1001|dksj|kdjfdsjf|12
1245|425345|1001|dksj|kdjfdsjf|12
1234|25345|1002|dksj|kdjfdsjf|12
123425|65345|1002|dksj|kdjfdsjf|12
123425|15325|1001|dksj|kdjfdsjf|12
11345|55315|1002|dksj|kdjfdsjf|12
6345|15345|1003|dksj|kdjfdsjf|12
72345|25345|1004|dksj|kdjfdsjf|12
9345|411345|1003|dksj|kdjfdsjf|12 
```

要将此更改存储回文件，请使用以下`-i`选项：

```
sed -i 's/TaskID_/100/' file 
```

*注意：这适用于`TaskID_[0-9]`如果你想`TaskID_23`映射到`1023`然后这不会，这将映射`TaskID_23`到`10023`.*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T06:46:38.640

```
perl -F"\|" -lane '$F[2]=~s/.*_/100/g;print join("|",@F)' your_file 
```

测试如下：

```
> cat temp
12345|45345|TaskID_1|dksj|kdjfdsjf|12
1245|425345|TaskID_1|dksj|kdjfdsjf|12
1234|25345|TaskID_2|dksj|kdjfdsjf|12
123425|65345|TaskID_2|dksj|kdjfdsjf|12
123425|15325|TaskID_1|dksj|kdjfdsjf|12
11345|55315|TaskID_2|dksj|kdjfdsjf|12
6345|15345|TaskID_3|dksj|kdjfdsjf|12
72345|25345|TaskID_4|dksj|kdjfdsjf|12
9345|411345|TaskID_3|dksj|kdjfdsjf|12
> perl -F"\|" -lane '$F[2]=~s/.*_/100/g;print join("|",@F)' temp
12345|45345|1001|dksj|kdjfdsjf|12
1245|425345|1001|dksj|kdjfdsjf|12
1234|25345|1002|dksj|kdjfdsjf|12
123425|65345|1002|dksj|kdjfdsjf|12
123425|15325|1001|dksj|kdjfdsjf|12
11345|55315|1002|dksj|kdjfdsjf|12
6345|15345|1003|dksj|kdjfdsjf|12
72345|25345|1004|dksj|kdjfdsjf|12
9345|411345|1003|dksj|kdjfdsjf|12
> 
```

# c++ - 具有静态属性的模板继承（服务定位器模式）

> ID：13952310
> 
> 赞同：3
> 
> 时间：2012-12-19T12:16:13.177
> 
> 标签：c++, templates, inheritance, properties, static

我一直在尝试使用模板化基类并从它继承来实现服务定位器模式：

```
 // Header File
    namespace one {
    template <class I, class N>
    class Locator {
    public:
        static void initialize() {
            service = &nullService;
        }
        static void provide(I* newService) {
            if (newService == 0) {
                initialize();
            } else {
                service = newService;

        }
        static I& get() { return *service; }
        virtual ~Locator() {
            if (service != &nullService) {
                delete service;
            }
    private:
        Locator();
        static I* service;
        static N nullService;
    };
    }

    // Source File
    #include "Locator.hpp"

    namespace one {
    template<class I, class N>
    I* Locator<I, N>::service;

    template<class I, class N>
    N Locator<I, N>::nullService;
    } 
```

**类 I**是实例类，**类 N**是空服务类。对于派生类：

```
 // Header File
    namespace two {
    class ExampleLocator : public one::Locator<Service, NullService> {}
    }

    // Source File
    namespace one {
    template class Locator<Service, NullService>;
    } 
```

当我尝试使用这个实现时，

```
 int main(int argc, char const *argv[]) {
        two::ExampleLocator::initialize();
        two::ExampleLocator::get().doSomething();
    } 
```

gcc 编译失败，出现以下错误：

*   对 one::Locator::initialize() 的未定义引用
*   在函数 one::Locator::get(): undefined reference to one::Locator::service

我究竟做错了什么？

注意：我可以通过在派生类的 cpp 中重新声明定位器的静态属性来编译项目：

```
 // Alternative Derived class Source file
    namespace one {
    template<class I, class N>
    I* Locator<I, N>::service;

    template<class I, class N>
    N Locator<I, N>::nullService;

    template class Locator<Service, NullService>;
    } 
```

注意 2：Derived 类与 Locator 类位于不同的命名空间中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:19:38.953

模板定义必须在所有使用它们的翻译单元中可见。将 .cpp 文件中的代码移动到 .hpp 文件中。

参见：[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

# ios - 释放 IOSurface

> ID：13952313
> 
> 赞同：7
> 
> 时间：2012-12-19T12:16:19.917
> 
> 标签：ios, ios5, ios4, ios6, iphone-privateapi

这个问题是对以下内容的扩展：
Link-1：[从 ios 表面创建图像并将其保存](https://stackoverflow.com/questions/13872728/creating-an-image-out-of-the-ios-surface-and-saving-it)
Link-2：[从 iOS 应用程序截屏 - 模拟显示记录器（内部查询）](https://stackoverflow.com/questions/13833816/taking-screenshots-from-ios-app-emulating-display-recorder-query-on-the-inter)

（请参阅 Link-1）我有在后台工作的截图代码。但如前所述，它需要 2 秒的睡眠才能不间断地工作，否则操作系统会暂停应用程序。我发现原因可能是我没有明确发布我创建的 IOSurface。
原因 - 使用 Victor Ronin 提供的链接[http://pastie.org/pastes/3734430](http://pastie.org/pastes/3734430)，即使没有睡眠，捕获也能正常工作。每次写入图像后，我都尝试使用 CFRelease 释放 destSurf（我创建的目标表面），但这不起作用。

关于何时、如何以及是否发布创建的 IOSurface 的任何帮助都将非常有用。谢谢。

**更新**
所以，这正是发生的事情。（参考 Link-1）

```
IOSurfaceRef destSurf = IOSurfaceCreate(dict);
IOSurfaceAcceleratorRef outAcc;
IOSurfaceAcceleratorCreate(NULL, 0, &outAcc);

CFDictionaryRef ed = (__bridge CFDictionaryRef)[NSDictionary dictionaryWithObjectsAndKeys: nil];
IOSurfaceAcceleratorTransferSurface(outAcc, screenSurface, destSurf, ed, NULL);

IOSurfaceUnlock(screenSurface, kIOSurfaceLockReadOnly, &aseed);

CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, IOSurfaceGetBaseAddress(destSurf), (width*height*4), NULL);
CGImageRef cgImage=CGImageCreate(width, height, 8, 8*4, IOSurfaceGetBytesPerRow(destSurf), CGColorSpaceCreateDeviceRGB(), kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little, provider, NULL, YES, kCGRenderingIntentDefault);
UIImage *image = [UIImage imageWithCGImage: cgImage];
CGImageRelease(cgImage);
UIImageWriteToSavedPhotosAlbum(image, self, nil, nil);
CFRelease(destSurf); 
```

1.  对 CFRelease 的调用发生并且应用程序崩溃。没有保存图像。但是，如果您在发布前 1-2 秒睡眠，它可以正常工作。
2.  如果您跳过对 UIImageWriteToSavePhotosAlbum() 的调用，则一切正常，并且捕获不会中断。
    我仍然不清楚究竟是什么问题以及如何解决它。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:52:32.513

我认为你需要释放表面。它是由 API IOSurfaceCreate 创建的，它不是由 autorelease 管理的。

例如，我发现以下代码已发布：

[https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&cad=rja&ved=0CF0QFjAH&url=http%3A%2F%2Fcode.google.com%2Fp%2Fsyphon-framework%2Fsource% 2Fbrowse%2Ftags%2Fpublic-beta-1%2FSyphonServer.m%3Fr%3D3&ei=i_zRUMWQDMqw0AHs7IHYDA&usg=AFQjCNG9yO3sUf-ZQy-W_h_Q9WJMm4hqgw](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=8&cad=rja&ved=0CF0QFjAH&url=http%3A%2F%2Fcode.google.com%2Fp%2Fsyphon-framework%2Fsource%2Fbrowse%2Ftags%2Fpublic-beta-1%2FSyphonServer.m%3Fr%3D3&ei=i_zRUMWQDMqw0AHs7IHYDA&usg=AFQjCNG9yO3sUf-ZQy-W_h_Q9WJMm4hqgw)

[http://www.opensource.apple.com/source/WebCore/WebCore-7536.24/platform/graphics/surfaces/mac/GraphicsSurfaceMac.cpp?txt](http://www.opensource.apple.com/source/WebCore/WebCore-7536.24/platform/graphics/surfaces/mac/GraphicsSurfaceMac.cpp?txt)

如果你尝试用 CFRelease 释放它会发生什么？它会崩溃还是有相同的 2 秒问题？

# android - 从“Mono for Android”应用程序导出 IOS 构建 (IPA)

> ID：13952317
> 
> 赞同：1
> 
> 时间：2012-12-19T12:16:39.870
> 
> 标签：android, ios, mono, cross-platform

我正在尝试构建一个跨平台测试应用程序。我已经下载了“Mono For Android”所需的所有工具并在 MonoDevelop IDE 中创建了一个测试项目。它在 Android 模拟器上运行。现在因为这是一个跨平台，我应该可以选择将代码导出到 iPhone 或交付/导出 .ipa

# jboss - 配置动作处理管道时出错

> ID：13952320
> 
> 赞同：5
> 
> 时间：2012-12-19T12:17:03.730
> 
> 标签：jboss, esb

请帮助调试以下问题。

环境概要

1) 我们有两个不同的 esb box 和 services box。在 Esb box 中，所有 esb 都已部署，在 services box 中，所有服务均已部署。

2) WSDL 在 esb 盒子上本地保留，jboss-esb.xml 通过

```
2012-12-19 11:04:46,056 ERROR [org.jboss.kernel.plugins.dependency.AbstractKernelController] (Thread-2) Error installing to Start: name=jboss.esb.vfs:///opt/jboss-6.0.0.Final/server/default/deploy/NotificationServiceESB.esb state=Create: org.jboss.soa.esb.listeners.lifecycle.ManagedLifecycleException: Error configuring action processing pipeline
at org.jboss.soa.esb.listeners.message.MessageAwareListener.doInitialise(MessageAwareListener.java:192) [:]
at org.jboss.soa.esb.listeners.lifecycle.AbstractManagedLifecycle.initialise(AbstractManagedLifecycle.java:133) [:]
at org.jboss.soa.esb.listeners.lifecycle.ManagedLifecycleController.initialiseInstances(ManagedLifecycleController.java:109) [:]
at org.jboss.soa.esb.listeners.lifecycle.ManagedLifecycleController.start(ManagedLifecycleController.java:66) [:]
at org.jboss.soa.esb.listeners.deployers.mc.as6.EsbDeployment.start(EsbDeployment.java:234) [:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_16]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_16]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_16]
at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_16]
at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:60) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:168) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction$JoinpointDispatchWrapper.execute(KernelControllerContextAction.java:257) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.ExecutionWrapper.execute(ExecutionWrapper.java:47) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchExecutionWrapper(KernelControllerContextAction.java:125) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchJoinPoint(KernelControllerContextAction.java:72) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.LifecycleAction.installActionInternal(LifecycleAction.java:202) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:894) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:641) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.system.ServiceController.doInstall(ServiceController.java:653) [:6.0.0.Final (Build SVNTag:JBoss_6.0.0.Final date: 20101228)]
at org.jboss.system.ServiceController.register(ServiceController.java:356) [:6.0.0.Final (Build SVNTag:JBoss_6.0.0.Final date: 20101228)]
at org.jboss.system.microcontainer.jmx.ServiceControllerRegistrationLifecycleCallback.install(ServiceControllerRegistrationLifecycleCallback.java:104)[:6.0.0.Final]
at sun.reflect.GeneratedMethodAccessor312.invoke(Unknown Source) [:1.6.0_16]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_16]
at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_16]
at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:60) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:168) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.beans.info.plugins.AbstractBeanInfo.invoke(AbstractBeanInfo.java:300) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.AbstractKernelControllerContext.invoke(AbstractKernelControllerContext.java:305) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractLifecycleCallbackItem.install(AbstractLifecycleCallbackItem.java:87) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.handleLifecycleCallbacks(AbstractController.java:2018) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.handleInstallLifecycleCallbacks(AbstractController.java:1983) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1091) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.system.ServiceController.doChange(ServiceController.java:671) [:6.0.0.Final (Build SVNTag:JBoss_6.0.0.Final date: 20101228)]
at org.jboss.system.ServiceController.start(ServiceController.java:443) [:6.0.0.Final (Build SVNTag:JBoss_6.0.0.Final date: 20101228)]
at org.jboss.system.microcontainer.jmx.ServiceControllerStartStopLifecycleCallback.install(ServiceControllerStartStopLifecycleCallback.java:44)[:6.0.0.Final]
at sun.reflect.GeneratedMethodAccessor315.invoke(Unknown Source) [:1.6.0_16]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_16]
at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_16]
at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:60) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:168) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.beans.info.plugins.AbstractBeanInfo.invoke(AbstractBeanInfo.java:300) [jboss-reflect.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.AbstractKernelControllerContext.invoke(AbstractKernelControllerContext.java:305) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractLifecycleCallbackItem.install(AbstractLifecycleCallbackItem.java:87) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.handleLifecycleCallbacks(AbstractController.java:2018) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.handleInstallLifecycleCallbacks(AbstractController.java:1983) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1091) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:894) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:641) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:182) [:2.2.0.GA]
at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:58) [:2.2.0.GA]
at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62) [:2.2.0.GA]
at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:55) [:2.2.0.GA]
at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.0.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1832) [:2.2.0.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1550) [:2.2.0.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1571) [:2.2.0.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1491) [:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersImpl.java:1983) [:2.2.0.GA]
at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:1076) [:2.2.0.GA]
at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:679) [:2.2.0.GA]
at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.process(MainDeployerPlugin.java:106) [:6.0.0.Final]
at org.jboss.profileservice.dependency.ProfileControllerContext$DelegateDeployer.process(ProfileControllerContext.java:143) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileDeployAction.deploy(ProfileDeployAction.java:151) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileDeployAction.installActionInternal(ProfileDeployAction.java:94) [:0.2.2]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42) [jboss-kernel.jar:2.2.0.GA]
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654) [jboss-dependency.jar:2.2.0.GA]
at org.jboss.profileservice.dependency.ProfileActivationWrapper$BasicProfileActivation.start(ProfileActivationWrapper.java:190) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileActivationWrapper.start(ProfileActivationWrapper.java:87) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileActivationService.activateProfile(ProfileActivationService.java:215) [:0.2.2]
at org.jboss.profileservice.dependency.ProfileActivationService.activate(ProfileActivationService.java:159) [:0.2.2]
at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.activate(AbstractProfileServiceBootstrap.java:112) [:0.2.2]
at org.jboss.profileservice.resolver.BasicResolverFactory$ProfileResolverFacade.deploy(BasicResolverFactory.java:87) [:0.2.2]
at org.jboss.profileservice.bootstrap.AbstractProfileServiceBootstrap.start(AbstractProfileServiceBootstrap.java:91) [:0.2.2]
at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:132) [:6.0.0.Final]
at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:56) [:6.0.0.Final]
at org.jboss.bootstrap.impl.base.server.AbstractServer.startBootstraps(AbstractServer.java:827) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-5]
at org.jboss.bootstrap.impl.base.server.AbstractServer$StartServerTask.run(AbstractServer.java:417) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-5]
at java.lang.Thread.run(Thread.java:619) [:1.6.0_16]
Caused by: org.jboss.soa.esb.ConfigurationException: Unexpected exception during lifecycle initialisation
at org.jboss.soa.esb.listeners.message.ActionProcessingPipeline.initialise(ActionProcessingPipeline.java:402) [:]
at org.jboss.soa.esb.listeners.message.MessageAwareListener.doInitialise(MessageAwareListener.java:188) [:]
... 118 more
Caused by: org.jboss.soa.esb.actions.ActionLifecycleException: Got an error while processing EJB method [initializeQueue]
at org.jboss.soa.esb.actions.AQEJBProcessor.initialise(AQEJBProcessor.java:58) [:]
at org.jboss.soa.esb.listeners.message.OverriddenActionLifecycleProcessor.initialise(OverriddenActionLifecycleProcessor.java:123) [:]
at org.jboss.soa.esb.listeners.message.ActionProcessingPipeline.initialise(ActionProcessingPipeline.java:397) [:]
... 119 more
Caused by: org.jboss.soa.esb.actions.ActionLifecycleException: Could not lookup NotificationAQListenerBean/remote
at org.jboss.soa.esb.actions.AQEJBProcessor.getEjb3FromJndi(AQEJBProcessor.java:90) [:]
at org.jboss.soa.esb.actions.AQEJBProcessor.initialise(AQEJBProcessor.java:53) [:]
... 121 more
Caused by: javax.naming.CommunicationException: Could not obtain connection to any of these urls: 10.20.90.173:1099 and discovery failed with error: javax.naming.CommunicationException: Receive timed out [Root exception is java.net.SocketTimeoutException: Receive timed out]
at org.jnp.interfaces.NamingContext.discoverServer(NamingContext.java:1690)
at org.jnp.interfaces.NamingContext.checkRef(NamingContext.java:1761)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:695)
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:688)
at javax.naming.InitialContext.lookup(InitialContext.java:392)
at org.jboss.soa.esb.actions.AQEJBProcessor.getEjb3FromJndi(AQEJBProcessor.java:87)
at org.jboss.soa.esb.actions.AQEJBProcessor.initialise(AQEJBProcessor.java:53)
at org.jboss.soa.esb.listeners.message.OverriddenActionLifecycleProcessor.initialise(OverriddenActionLifecycleProcessor.java:123)
at org.jboss.soa.esb.listeners.message.ActionProcessingPipeline.initialise(ActionProcessingPipeline.java:397)
at org.jboss.soa.esb.listeners.message.MessageAwareListener.doInitialise(MessageAwareListener.java:188)
at org.jboss.soa.esb.listeners.lifecycle.AbstractManagedLifecycle.initialise(AbstractManagedLifecycle.java:133)
at org.jboss.soa.esb.listeners.lifecycle.ManagedLifecycleController.initialiseInstances(ManagedLifecycleController.java:109)
at org.jboss.soa.esb.listeners.lifecycle.ManagedLifecycleController.start(ManagedLifecycleController.java:66)
at org.jboss.soa.esb.listeners.deployers.mc.as6.EsbDeployment.start(EsbDeployment.java:234)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:60)
at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:168)
at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66)
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction$JoinpointDispatchWrapper.execute(KernelControllerContextAction.java:257)
at org.jboss.kernel.plugins.dependency.ExecutionWrapper.execute(ExecutionWrapper.java:47)
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchExecutionWrapper(KernelControllerContextAction.java:125)
at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchJoinPoint(KernelControllerContextAction.java:72)
at org.jboss.kernel.plugins.dependency.LifecycleAction.installActionInternal(LifecycleAction.java:202)
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54)
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42)
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044)
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083)
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:894)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:641)
at org.jboss.system.ServiceController.doInstall(ServiceController.java:653)
at org.jboss.system.ServiceController.register(ServiceController.java:356)
at org.jboss.system.microcontainer.jmx.ServiceControllerRegistrationLifecycleCallback.install(ServiceControllerRegistrationLifecycleCallback.java:104)
at sun.reflect.GeneratedMethodAccessor312.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:60)
at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:168)
at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66)
at org.jboss.beans.info.plugins.AbstractBeanInfo.invoke(AbstractBeanInfo.java:300)
at org.jboss.kernel.plugins.dependency.AbstractKernelControllerContext.invoke(AbstractKernelControllerContext.java:305)
at org.jboss.dependency.plugins.AbstractLifecycleCallbackItem.install(AbstractLifecycleCallbackItem.java:87)
at org.jboss.dependency.plugins.AbstractController.handleLifecycleCallbacks(AbstractController.java:2018)
at org.jboss.dependency.plugins.AbstractController.handleInstallLifecycleCallbacks(AbstractController.java:1983)
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1091)
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654)
at org.jboss.system.ServiceController.doChange(ServiceController.java:671)
at org.jboss.system.ServiceController.start(ServiceController.java:443)
at org.jboss.system.microcontainer.jmx.ServiceControllerStartStopLifecycleCallback.install(ServiceControllerStartStopLifecycleCallback.java:44)
at sun.reflect.GeneratedMethodAccessor315.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:60)
at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:168)
at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66)
at org.jboss.beans.info.plugins.AbstractBeanInfo.invoke(AbstractBeanInfo.java:300)
at org.jboss.kernel.plugins.dependency.AbstractKernelControllerContext.invoke(AbstractKernelControllerContext.java:305)
at org.jboss.dependency.plugins.AbstractLifecycleCallbackItem.install(AbstractLifecycleCallbackItem.java:87)
at org.jboss.dependency.plugins.AbstractController.handleLifecycleCallbacks(AbstractController.java:2018)
at org.jboss.dependency.plugins.AbstractController.handleInstallLifecycleCallbacks(AbstractController.java:1983)
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1091)
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:894)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:641)
at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:182)
at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:58)
at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:55)
at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179)
at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1832)
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1550)
at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1571)
at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1491)
at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:379)
at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:2044)
at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:1083)
at org.jboss.dependency.plugins.AbstractController.executeOrIncrementStateDirectly(AbstractController.java:1322)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1246)
at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1139)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:939)
at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:654)
at org.jboss.deployers.plugins.deployers.DeployersImpl.change(DeployersImpl.java:1983)
at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:1076)
at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:679)
at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.process(MainDeployerPlugin.java:106)
at org.jboss.profileservice.dependency.ProfileControllerContext$DelegateDeployer.process(ProfileControllerContext.java:143)
at org.jboss.profileservice.dependency.ProfileDeployAction.deploy(ProfileDeployAction.java:151)
at org.jboss.profileservice.dependency.ProfileDeployAction.installActionInternal(ProfileDeployAction.java:94)
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54)
at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42)
at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) 
```

我尝试使用 deployment.xml 部署 esb

```
<jbossesb-deployment>    
<depends>jboss.esb:deployment=jbossesb.esb</depends>    
<depends>jboss.esb:deployment=soap.esb</depends>    
<depends>jboss.esb:deployment=spring.esb</depends>    
<depends>jboss.esb:deployment=jbrules.esb</depends>    
</jbossesb-deployment> 
```

并尝试使用deployment.xml

```
<jbossesb-deployment>    
<depends>jboss.esb:deployment=jbossesb.esb</depends>    
<depends>jboss.esb:deployment=soap.esb</depends>    
<depends>jboss.esb:deployment=spring.esb</depends>    
</jbossesb-deployment> 
```

但在这两种情况下，它都给出了相同的例外

还尝试了 jboss-6.0.0 和 jboss-5 .1.0 但同样的例外。

请帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T19:34:25.610

可能 jndi 在 deployment.xml 中没有正确引用，请参阅 ejb proyect deploy 中的正确 Class:reference。审查类 ejb 的所有条目，例如：“@Remote”和“@Resource”

# android - 使用光标在列表视图中显示数据

> ID：13952322
> 
> 赞同：1
> 
> 时间：2012-12-19T12:17:17.797
> 
> 标签：android, listview, cursor

我编写了一个程序，可以通过光标显示存储在列表视图中的数据库中的数据。但在运行时它给了我强制关闭。这是我的 logcat 和代码，当我在设备中运行应用程序时，它给我强制关闭，当我更改名称时db，问题解决！！我说之前的BB.sqlite是在另一个页面中创建的。它与这个页面有冲突吗？

这是我的日志：

```
12-28 04:45:02.950: E/jdwp(22457): Failed sending reply to debugger: Broken pipe
12-28 04:46:04.390: E/AndroidRuntime(22457): FATAL EXCEPTION: AsyncTask #1
12-28 04:46:04.390: E/AndroidRuntime(22457): java.lang.RuntimeException: An error occured while executing doInBackground()
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.lang.Thread.run(Thread.java:1019)
12-28 04:46:04.390: E/AndroidRuntime(22457): Caused by: android.database.sqlite.SQLiteException: no such column: _id: , while compiling: SELECT _id, Good_Name, Good_UnitPrice FROM Tbl_Goods ORDER BY _id ASC
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1364)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:330)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.database.sqlite.SQLiteQueryBuilder.query(SQLiteQueryBuilder.java:280)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at com.example.nfc.SqlHelper.getCursor(SqlHelper.java:97)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at com.example.nfc.current_cart$SelectDataTask.doInBackground(current_cart.java:90)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at com.example.nfc.current_cart$SelectDataTask.doInBackground(current_cart.java:1)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-28 04:46:04.390: E/AndroidRuntime(22457):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
12-28 04:46:04.390: E/AndroidRuntime(22457):    ... 4 more 
```

当前购物车代码：

```
public class current_cart extends ListActivity {

    private ListView mainListView = null;
    CustomSqlCursorAdapter adapter = null;
    private SqlHelper dbHelper = null;
    private Cursor currentCursor = null;

    private ListView listView = null;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.current_cart);

        if (this.dbHelper == null) {
            this.dbHelper = new SqlHelper(this);

        }

        listView = getListView();
        listView.setItemsCanFocus(false);
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        //listView.setClickable(true);

        Button btnClear = (Button) findViewById(R.id.btnClear);
        btnClear.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Toast.makeText(getApplicationContext(),
                        " You clicked Clear button", Toast.LENGTH_SHORT).show();
               // ClearDBSelections();
            }
        });

        new SelectDataTask().execute();

        this.mainListView = getListView();

        mainListView.setCacheColorHint(0);

    }

    @Override
    protected void onRestart() {
        super.onRestart();
        new SelectDataTask().execute();
    }

    @Override
    protected void onPause() {

        super.onPause();
        this.dbHelper.close();
    }

    //protected void ClearDBSelections() {

       // this.adapter.ClearSelections();

  //  }

    private class SelectDataTask extends AsyncTask<Void, Void, String> {

        protected String doInBackground(Void... params) {

            try {

                current_cart.this.dbHelper.createDatabase(dbHelper.dbSqlite);
                current_cart.this.dbHelper.openDataBase();

                current_cart.this.currentCursor = current_cart.this.dbHelper
                        .getCursor();

            } catch (SQLException sqle) {

                throw sqle;

            }
            return null;
        }

        // can use UI thread here
        protected void onPostExecute(final String result) {

            startManagingCursor(current_cart.this.currentCursor);
            int[] listFields = new int[] { R.id.txtTitle };
            String[] dbColumns = new String[] { SqlHelper.COLUMN_TITLE };

            current_cart.this.adapter = new CustomSqlCursorAdapter(
                    current_cart.this, R.layout.single_item,
                    current_cart.this.currentCursor, dbColumns, listFields,
                    current_cart.this.dbHelper);
            setListAdapter(current_cart.this.adapter);

        }
    }

} 
```

CustomSqlCursorAdapter 代码：

```
public class CustomSqlCursorAdapter extends SimpleCursorAdapter {
    private Context mContext;

    private SqlHelper mDbHelper;
    private Cursor mCurrentCursor;

    public CustomSqlCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to, SqlHelper dbHelper) {
        super(context, layout, c, from, to);
        this.mCurrentCursor = c;
        this.mContext = context;
        this.mDbHelper = dbHelper;

    }

    public View getView(int pos, View inView, ViewGroup parent) {
        View v = inView;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.single_item, null);
        }

        if (!this.mCurrentCursor.moveToPosition(pos)) {
            throw new SQLException("CustomSqlCursorAdapter.getView: Unable to move to position: "+pos);
        }

        CheckBox cBox = (CheckBox) v.findViewById(R.id.bcheck);

        cBox.setTag(Integer.valueOf(this.mCurrentCursor.getInt(0)));

        cBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            }
        });

        TextView txtTitle = (TextView) v.findViewById(R.id.txtTitle);
        txtTitle.setText(this.mCurrentCursor.getString(this.mCurrentCursor
                .getColumnIndex(SqlHelper.COLUMN_TITLE)));

        return (v);
    }

} 
```

SqlHelper 代码：

```
public class SqlHelper extends SQLiteOpenHelper {
    private static final String DATABASE_PATH = "/data/data/com.example.nfc/databases/";

    public static final String DATABASE_NAME = "BB.sqlite";

    public static final String TABLE_NAME = "Tbl_Goods";
    public static final int ToDoItems_VERSION = 1;

    public static final String COLUMN_ID = "_id";               // 0
    public static final String COLUMN_TITLE = "Good_Name";          // 1
    public static final String COLUMN_NAME_DESC = "Good_UnitPrice";// 2
  //  public static final String COLUMN_SELECTED = "selected";    // 3
   // public static final int    COLUMN_SELECTED_idx = 3;

    public SQLiteDatabase dbSqlite;
    private Context mContext;

    public SqlHelper(Context context) {
        super(context, DATABASE_NAME, null, 1);
        mContext = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        createDB(db);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w("SqlHelper", "Upgrading database from version " + oldVersion
                + " to " + newVersion + ", which will destroy all old data");

        db.execSQL("DROP TABLE IF EXISTS Tbl_Goods;");

        createDB(db);
    }

    public void createDatabase(SQLiteDatabase db) {
        createDB(db);
    }

    private void createDB(SQLiteDatabase db) {
   //     if (db == null) {
            db = mContext.openOrCreateDatabase(DATABASE_NAME, 0, null);
     //   }

        db.execSQL("CREATE TABLE IF NOT EXISTS Tbl_Goods (_id INTEGER PRIMARY KEY AUTOINCREMENT  NOT NULL  DEFAULT 1,Good_ID INTEGER  NOT NULL ,Cart_ID INTEGER, Good_Name VARCHAR(50),Good_UnitPrice INTEGER (10),Quantity INTEGER);");
        db.setVersion(ToDoItems_VERSION);

        //
        // Generate a few rows for an example
        //
        // find out how many rows already exist, and make sure there's some minimum
      //  SQLiteStatement s = db.compileStatement("select count(*) from ToDoItems;");

      //  long count = s.simpleQueryForLong();
      //  for (int i = 0; i < 20-count; i++) {
        //    db.execSQL("INSERT INTO ToDoItems VALUES(NULL,'Task #"+i+"','Description #"+i+"');");
      //  }
    }

    public void openDataBase() throws SQLException {
        String myPath = DATABASE_PATH + DATABASE_NAME;

        dbSqlite = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    @Override
    public synchronized void close() {
        if (dbSqlite != null)
            dbSqlite.close();

        super.close();
    }

    public Cursor getCursor() {
        SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

        queryBuilder.setTables(TABLE_NAME);

        String[] asColumnsToReturn = new String[] { COLUMN_ID,COLUMN_TITLE,
                COLUMN_NAME_DESC };

        Cursor mCursor = queryBuilder.query(dbSqlite, asColumnsToReturn, null,
                null, null, null, COLUMN_ID+" ASC");

        return mCursor;
    }

   // public void clearSelections() {
       // ContentValues values = new ContentValues();
       // values.put(COLUMN_SELECTED, 0);
       // this.dbSqlite.update(SqlHelper.TABLE_NAME, values, null, null);
  //  }
} 
```

另一个我的页面使用此代码来使用数据库：

```
 private static String DB_NAME = "BB.sqlite";

 public static final String COLUMN_ID = "_id";
        public static final String CartID = "Cart_ID";
        public static final String GoodID = "Good_ID";
        public static final String GoodName = "Good_Name";

 public static final String DATABASE_TABLE = "Tbl_Goods";

  public static final String DATABASE_CREATE =

        //_id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  DEFAULT 1,
        "CREATE  TABLE Tbl_Goods (_id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  DEFAULT 1,Good_ID INTEGER  NOT NULL ,Cart_ID INTEGER, Good_Name VARCHAR(50),Good_UnitPrice INTEGER (10),Quantity INTEGER);";
        public static final String DATABASE_CREATE2 = "CREATE  TABLE Tbl_Cart (Cart_ID INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  DEFAULT 1,"+" Cart_Date DATETIME ,"+" Cart_Start_Time DATETIME ,"+" Cart_End_Time DATETIME,"+" Cart_Total INTEGER (10),"+" Cart_Status INTEGER);";
        private static final String Good_Name = null;
        private static final String Quantity = null;
        private static final String Good_UnitPrice = null;
        private java.util.Date _Date;
     //   private DatabaseHelper DBHelper;
        private SQLiteDatabase db;
       // private SQLiteDatabase db;
        // the extension may be .sqlite
        // or .db
      //  public SQLiteDatabase myDataBase;

        public DBAdapter(Context context) {
            super(context, DB_NAME, null, 1);

            this.mycontext = context;

        }

        public void createDataBase() throws IOException{

             boolean dbExist = checkDataBase();

             if(dbExist){
             //do nothing - database already exist
             }else{

             //By calling this method and empty database will be created into the default system path
             //of your application so we are gonna be able to overwrite that database with our database.
             this.getReadableDatabase();

             try {

             copyDataBase();

             } catch (IOException e) {

             throw new Error("Error copying database");

             }
             }

            }

        private boolean checkDataBase()
        {

             SQLiteDatabase checkDB = null;

             try{
             String myPath = DB_PATH + DB_NAME;
             checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

             }catch(SQLiteException e){

             //database does't exist yet.

             }

             if(checkDB != null){

             checkDB.close();

             }

             return checkDB != null ? true : false;
            }

      private void copyDataBase() throws IOException
      {

          //Open your local db as the input stream
          InputStream myInput = mycontext.getAssets().open(DB_NAME);

          // Path to the just created empty db
          String outFileName = DB_PATH + DB_NAME;

          //Open the empty db as the output stream
          OutputStream myOutput = new FileOutputStream(outFileName);

          //transfer bytes from the inputfile to the outputfile
          byte[] buffer = new byte[1024];
          int length;
          while ((length = myInput.read(buffer))>0){
          myOutput.write(buffer, 0, length);
          }

          //Close the streams
          myOutput.flush();
          myOutput.close();
          myInput.close();
        }

      public DBAdapter open() throws SQLException 
        {

            String myPath = DB_PATH + DB_NAME;
           db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
           return this;
        }
      public DBAdapter open1() throws SQLException 
        {

            String myPath = DB_PATH + DB_NAME;
           db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
           return this;
        }

      @Override
      public synchronized void close() {

      if(db != null)
      db.close();

      super.close();
      }

      @Override
      public void onCreate(SQLiteDatabase db) 
      {
      // db.execSQL(DATABASE_CREATE);
      }

      @Override
      public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

      }
      public void Cancel() 
        {
            ContentValues args = new ContentValues();
            args.put(CartStatus, 2);          
            db.update(DATABASE_TABLE2, args, CartID + "=" + lastId, null);

        }
} 
```

# php - 更改 php 数组看起来像 jquery 数组（谷歌图表）

> ID：13952326
> 
> 赞同：2
> 
> 时间：2012-12-19T12:17:32.613
> 
> 标签：php, jquery

```
['Month', 'Bolivia', 'Ecuador', 'Madagascar', 'Papua New Guinea', 'Rwanda', 'Average'] 
```

这是构建谷歌图表所需的第一个表`Combo Chart`

我正在寻找任何可以在我可以使用`implode()`但不想使用的模板中轻松创建它的方法。当我直接传递数组时，它看起来像这样：

```
[Jack][Daniel][Poul] 
```

有没有一种简单的方法可以满足谷歌的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:19:48.223

看起来您需要发送 JSON。只要你有当前版本的 PHP（我相信 5.2+），你就可以使用

```
json_encode($yourArray); 
```

# php - register_shutdown_function() 仍然输出原始错误信息

> ID：13952328
> 
> 赞同：6
> 
> 时间：2012-12-19T12:17:37.337
> 
> 标签：php

我正在尝试用自定义替换内置的 php shutdown_function。

它工作得很好，但是，它仍然在我的新错误消息上方输出原始错误（内置错误）。

```
 <?php
  function shutdown_output() {
      $error = error_get_last();
      if($error !== NULL) {
          echo "ERROR";
          exit();
      } else {
          echo "NO ERROR";
      }
  }

  // Set the error reporting:
  register_shutdown_function('shutdown_output');

  // test.php does not exist, just here to get a critical error
  require_once("test.php");

  ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:23:35.147

正如评论中已经提到的，使用`register_shutdown_function`不会覆盖内置的错误处理（同样的方式`set_error_handler`也不会）。

如果您不想看到原始消息，请在`php.ini`using中禁用它们的输出`display_errors = 0`。或者在你的脚本中使用`ini_set('display_errors', 0);`.

# magento - 如何从 Magento 的产品详细信息页面中删除 QTY 框？

> ID：13952336
> 
> 赞同：3
> 
> 时间：2012-12-19T12:18:30.363
> 
> 标签：magento

如何从可配置产品的产品详细信息页面中删除数量框？是否也可以从购物车中删除 QTY 框？我正在使用 Magento 社区版本 1.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:09:44.983

如果您使用的是基本 Magento 主题，请转到

> base->default->template->catalog->product->view->addtocart.phtml

在那里你会找到数量输入框。现在你可以为所欲为。祝你今天过得愉快。

> 该路径仅供模板参考，您应遵循 magento 编码标准并进行相应修改。不要更改基本文件。我希望您了解 Magento Fallback 层次结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T09:31:02.870

转到 app/design/frontend/your_interface/your_theme/template/catalog/product/view/addtocart.phtml

寻找：

```
 <input name="qty" type="text" class="input-text qty" id="qty" maxlength="12" value="<?php echo $this->getMinimalQty($_product) ?>"/> 
```

并替换为：

```
<input type="hidden" disabled="disabled" name="qty" id="qty" maxlength="12" value="<?php echo $this->getMinimalQty($_product)? $this->getMinimalQty($_product): 1 ?>" title="<?php echo $this->__('Qty') ?>" class="input-text qty" /> 
```

# c# - ASP.NET 一页失败挂起所有网页

> ID：13952342
> 
> 赞同：1
> 
> 时间：2012-12-19T12:18:48.733
> 
> 标签：c#, iis-7

我有一个 ASP.NET 网站（.Net 4、IIS 7、C#）。当有人请求更新记录时，数据库有时会出现死锁。发生这种情况时，整个网站都会挂起，即使是不访问数据库的页面也是如此。

我的问题是，这是 ASP.NET 应用程序的正常行为吗？一页挂起，然后网站的其余部分挂起？如果没有，IIS 中是否有可以阻止这种情况的设置，或者有一种方法可以对应用程序进行编码来阻止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:30:49.507

> 我的问题是，这是 ASP.NET 应用程序的正常行为吗？一页挂起，然后网站的其余部分挂起？

当然不。可能发生的情况不是网站挂起，因为数据库中存在死锁，而是因为您有某种资源泄漏（内存、耗尽线程数以服务请求、CPU 等）导致应用程序变得无响应. 实际上，您可能认为数据库是罪魁祸首，但我更倾向于认为您的代码是问题所在。通常，当数据库中出现死锁时（至少在 SQL Server 上），死锁中涉及的查询之一会自动终止。

# css - 样式和 CSS

> ID：13952346
> 
> 赞同：5
> 
> 时间：2012-12-19T12:19:09.507
> 
> 标签：css

最近我发现文本区域的样式存在问题。**当我在Yii**应用程序的视图文件中插入以下代码并在**CSS**文件中给定样式代码下方时，文本区域的边框在遇到错误时保持不变，即当我没有在文本区域。

**查看文件代码**

```
<div class="form">
        <?php echo $form->labelEx($model,'body'); ?>
        <div class="clear"></div>
        <?php echo $form->textArea($model,'body',array('style' => 'min-width:80%;max-width:80%;min- height:20%;max-height:200px;border:1px solid #666')); ?>
        <?php echo $form->error($model,'body'); ?>
</div> 
```

**CSS**

```
.form .error label:first-child,.form .error {
color:#C00;
}
.form div.error textarea,div.form textarea.error{
background:#FEE;
border-color:#C00;
} 
```

现在，当我在外部样式表中插入内联**CSS代码时：**

```
 array('style' => 'min-width:80%;max-width:80%;min- height:20%;max-height:200px') 
```

文本区域边框的颜色随我的意愿而变化。我只是想知道，这是由于内联样式的优先级高于样式表的优先级，还是由于任何其他原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:22:51.590

[这听起来像是一个特殊性问题，你可以在这里](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)阅读它，但一般要点是 CSS 中的一种优先级，如下所示：

1.  `!important`
2.  内联样式`div style="color=red"`
3.  元素 ID`div id=""`
4.  类、属性和伪类`class="", :focus`
5.  元素和伪元素`body, :before`

你可以做的第一件事来测试它是否是一个特殊性问题是`!important`在声明之后使用，如果它有效，那么你正在其他地方定义样式并且需要用更具体的东西覆盖它（可能需要一个 ID）

# ios - 假期关闭后将应用上传到应用商店

> ID：13952349
> 
> 赞同：3
> 
> 时间：2012-12-19T12:19:12.733
> 
> 标签：ios, app-store

苹果开始假期关闭（12月21日）后，是否可以将应用上传到应用商店？

例如，如果我们决定在 12 月 24 日上传我们的第一个版本，会发生什么？

我们希望在 1 月 7 日推出我们的应用程序，你们认为在假期关闭之前上传会更好吗？

谢谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:54:16.310

不，您将无法在关机后上传您的应用程序。您可以在 21 日之前或 28 日之后提交应用程序。

**以下是您在关机期间不能做的事情的列表：**

> iTunes Connect 将在 2012 年 12 月 21 日星期五至 2012 年 12 月 28 日星期五期间因寒假暂时关闭。在此关闭期间，以下功能将不可用：
> 
> 访问 iTunes Connect 交付任何应用程序或更新此外，以下内容将被延迟：
> 
> 计划首次在 App Store 上发布的版本 通过 iTunes Connect 中的间隔定价系统计划的定价更改 我们强烈建议您不要在 iTunes Connect 中安排任何将于 2012 年 12 月 21 日星期五和星期五之间生效的定价更改，2012 年 12 月 28 日。计划在此日期范围内生效的定价更改将不会反映在 App Store 上，并且您的应用程序或应用程序内购买将无法购买，直到关闭之后。
> 
> 我们还建议您不要安排任何应用程序在关机期间上线。计划在 2012 年 12 月 21 日星期五和 2012 年 12 月 28 日星期五之间发布的版本将在关闭后才会在 App Store 上发布。

# php - yiic - php.exe 无法识别命令

> ID：13952350
> 
> 赞同：0
> 
> 时间：2012-12-19T12:19:16.527
> 
> 标签：php, yii, cmd

我在这里和谷歌搜索了很多问题，但仍然没有得到我的答案。

我试试你在图片中看到的，我不知道错误在哪里

![在此处输入图像描述](../Images/20241d306bf5509cef90160c5d45060a.png)

我的`PHP`路径如下图所示，

![在此处输入图像描述](../Images/0af9ff2ea9ddfeb4d1b85798a5d1e2ce.png)

请提供任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:20:31.857

PHP 目录的路径在您的`PATH`? 如果没有，你应该添加这个。

在您的情况下，我相信您需要附加的路径将是`D:\xampp\php\`.

要在 Windows 7/8 上更新您的`PATH`，您只需右键单击“计算机”，点击“属性”，然后点击“更改设置”。在“高级”选项卡中有一个“环境变量按钮”。滚动“系统变量”，直到您到达`Path`并简单地附加路径，如下所示：

```
;D:\xampp\php\ 
```

..到路径的尽头。确定一切并重新打开`cmd`，您的命令现在应该可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T15:54:24.703

```
I also faced the same problem. 
Error :- Path of the file is not set properly.
Step 1: Go to CMD.
Step 2: Then reach to your desired folder .For Ex:- cd c:/xampp/htdocs/yii/framework
Step 3: In CMD -> path C:\xampp\htdocs\yii\framework ; C:\xampp\php
Step 4: In CMD -> path  
Step 5: Now Execute your desired command for yii in cmd -> yiic webapp yii_test
Work Done! 
```

# javascript - 使用引导程序和使用选项卡时不绘制迷你图

> ID：13952354
> 
> 赞同：3
> 
> 时间：2012-12-19T12:19:31.963
> 
> 标签：javascript, ruby-on-rails, sparklines

我从 [http://omnipotent.net/jquery.sparkline/#s-about使用 bootstrap 和 jQuery Sparklines 获得了一个 RubyOnRails 应用程序（3.2.x）](http://omnipotent.net/jquery.sparkline/#s-about)

我的页面有 2 个使用引导程序的选项卡，如下所示：

```
<%=javascript_include_tag "utilities/sparkline.js" %>

<script type="text/javascript">$(function() {$('.inlinesparkline').sparkline('html', {type: 'line', height: '20px', width: '100px'});});</script>

<ul class="nav nav-tabs" id="myTab">
    <li><a href="#tab1" data-toggle="pill">Tab1</a></li>
    <li class="active"><a href="#tab2" data-toggle="pill">Tab2</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane well" id="tab1">
        <span class="inlinesparkline">1,2,3,4,5,6,7,6,5,4,3,4,5,6,7,8,7,6,4</span>
    </div>
    <div class="tab-pane well active" id="tab2">
        Hi there
    </div>
</div> 
```

如果第二个选项卡是活动选项卡，则在切换到第一个选项卡时显示数字而不是迷你图，但如果我将选项卡 1 设为活动选项卡，则绘制迷你图。

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T14:07:03.957

我终于修复了它，您可以添加一个参数作为选项：

```
disableHiddenCheck 
```

必须将其设置为 true，因此适用于：

```
<script type="text/javascript">$(function() {$('.inlinesparkline').sparkline('html', {type: 'line', disableHiddenCheck: true, height: '20px', width: '100px'});});</script> 
```

# php - 为什么我的 curl cron 作业没有运行？

> ID：13952355
> 
> 赞同：0
> 
> 时间：2012-12-19T12:19:33.180
> 
> 标签：php, curl, cron

我试图弄清楚为什么我的 curl cron 作业没有正确执行。当我在浏览器中运行它时，它运行得很好，但是如果我在命令行中运行它，我会得到以下输出。我已经替换了实际的 URL，但是 URL 类似于`example.com/file.php?pass=password&t=d`

> root@low [/home/user]# sudo -u user curl URL
> [1] 13959 root@low
> [/home/user]# 开始备份**0**个账户！

浏览器中的输出运行所有 9、10 或我拥有的许多备份。我只是在我的 curl 请求中缺少一个标志吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:41:26.240

您在命令行中使用 & 符号，因此参数 t 会丢失，并且您的脚本不会获取其所有输入数据（并且它可能与您的 cron 作业相同，因为它是按 shell 方式执行的）。

尝试：

卷曲'网址'

查看[http://linuxcommand.org/lts0080.php](http://linuxcommand.org/lts0080.php)，搜索“将程序置于后台”以获取更多关于 & in the shell 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:33:28.493

I believe `curl` is typically located in `/usr/bin/curl`. Perhaps you need to run it as absolute path in your cronjob (in case `/usr/bin` is not contained in your default path). This would typically be the case if it works from commandline but not from cron (as exact same command).

# android - 具有滚动速度控制的无限自动滚动 ListView

> ID：13952357
> 
> 赞同：16
> 
> 时间：2012-12-19T12:19:37.243
> 
> 标签：android, listview, scroll, autoscroll

我一直在研究一个`ListView`想法，它可以在没有用户交互的情况下自动滚动，并且使用 android API 绝对可行，例如***smoothScrollToPositionFromTop***。

我已经实现`ListView BaseAdapter`了它永远（几乎）加载项目以获得不间断的自我重复`ListView`。

我想在这里实现的是让我的`ListView`滚动永远保持一定的速度（慢），以使项目在向下滚动时清晰易读，我不确定是否`ListView`是我最好的选择。

下面是我正在尝试做的一个片段。结果不知何故还不错，但不够流畅，我能感觉到 ListView 闪烁。

我需要提高**流畅度、效率和控制速度**

```
new Thread(new Runnable() {

    @Override
    public void run() {
        int listViewSize = mListView.getAdapter().getCount();

        for (int index = 0; index < listViewSize ; index++) {
            mListView.smoothScrollToPositionFromTop(mListViewA.getLastVisiblePosition() + 100, 0, 6000);
            try {
                // it helps scrolling to stay smooth as possible (by experiment)
                Thread.sleep(60);
            } catch (InterruptedException e) {

            }
        }
    }
}).start(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T14:04:31.797

我建议，您的适配器以有效的方式实施。所以这段代码只是滚动列表视图

您需要尝试其他变量值

```
final long totalScrollTime = Long.MAX_VALUE; //total scroll time. I think that 300 000 000 years is close enouth to infinity. if not enought you can restart timer in onFinish()

final int scrollPeriod = 20; // every 20 ms scoll will happened. smaller values for smoother

final int heightToScroll = 20; // will be scrolled to 20 px every time. smaller values for smoother scrolling

listView.post(new Runnable() {
                        @Override
                        public void run() {
                                new CountDownTimer(totalScrollTime, scrollPeriod ) {
                                    public void onTick(long millisUntilFinished) {
                                        listView.scrollBy(0, heightToScroll);
                                    }

                                public void onFinish() {
                                    //you can add code for restarting timer here
                                }
                            }.start();
                        }
                    }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T07:25:07.247

这里有几点建议：[以编程方式模拟 onFling() 而不是检测它（Android）](https://stackoverflow.com/questions/5836677/simulate-onfling-programmatically-instead-of-detecting-it-android)

并[以编程方式抛出 ListView Android](https://stackoverflow.com/questions/1214956/programmatically-fling-listview-android)

在你的情况下，很难弄清楚你所说的足够平滑。通常平滑问题与列表视图的非最佳使用以及单元布局或适配器的 getView 方法内的视图创建/回收中的问题有关。

你[使用占位符](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)吗？需要考虑的重要一点是[Drawables 的使用](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)。

我从来没有达到你想要的，但我想到的一个简单的想法是：

*   找到一种方法来滚动 1 个位置或 2 个位置的视图。
*   在适配器内使用环形缓冲区。例如，假设您的项目列表中有 100 个项目。然后在开始时，列表视图的第 0 项是列表的第 0 项。当列表视图向上滚动 1 项时，列表视图的第 0 项应成为列表中的第 1 项。因此，问题不在于滚动，而是与滚动和显示无穷无尽的项目列表更加同步。

# windows - WIX :: 如何在 LocalLow 文件夹中安装文件

> ID：13952363
> 
> 赞同：1
> 
> 时间：2012-12-19T12:20:10.607
> 
> 标签：windows, wix

有没有办法使用 WIX 脚本在 LocalLow 文件夹中安装文件？

更新：

我可以为 XP 输入以下代码

```
<Directory Id="AppDataFolder">
   <Directory Id="ApplicationData">
       <Directory Id="ProductName"> 
```

这适用于 Windows Vista 及更高版本

```
<Directory Id="AppDataFolder">
   <Directory Id="AppData">
       <Directory Id="LocalLow">
           <Directory Id="ProductName"> 
```

但是如何在运行时推动 WIX/MSI 选择正确的变体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:30:58.100

是的，您可以在您具有写入权限的任何文件夹中安装（复制）文件。只需使用 Directory 元素指定所需的目录路径。

PS：WIX 文档很差，但不要指望它们会列出您机器上所有可能的文件夹 =)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T10:52:04.160

AppDataFolder 映射到 Roaming 文件夹，因此不是解决方案

1.  创建一个像 LOCALLOW (parentDir: TARGETDIR) 这样的文件夹
2.  在 InstallInitialize 之前，使用 CustomAction 将其重新映射到 [%USERPROFILE]\Appdata\LocalLow *（例如 @WiX CustomAction Id="SET_LocalLowFolder" Directory="LOCALLOWDIR" Value="[%USERPROFILE]\Appdata\LocalLow"）*。

！！！此文件夹仅在 Vista 及更高版本上有意义，因此使此类组件有条件

# ios - 在 xcode 中获取附加在 Mac 上的 USB 设备列表

> ID：13952368
> 
> 赞同：0
> 
> 时间：2012-12-19T12:20:45.990
> 
> 标签：ios, xcode, drop-down-menu, usb

我是IOS开发的新手。

我想使用 Xcode 获取连接在我的 Mac 上的 USB 设备列表。

我正在开发一个 IOS 应用程序，我想在下拉菜单中获取 USB 设备列表（如果 IOS 支持），一旦我选择了 USB 设备，我想对其执行一些操作。

是否有任何框架或内置类可以提供帮助？

一个例子将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:13:48.670

[Xcode 4 用户指南 > 管理您的设备](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/080-Manage_Your_Devices/manage_devices.html)

[Xcode 4 用户指南 > 构建和运行您的应用程序 > 创建、编辑和管理方案](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/055-Build_and_Run_Your_App/build_app.html#//apple_ref/doc/uid/TP40010215-CH14-SW1)

# mysql - Magento - 将多选语义从“或”更改为“和”

> ID：13952372
> 
> 赞同：2
> 
> 时间：2012-12-19T12:20:51.210
> 
> 标签：mysql, magento

当在 Magento 中的目录或目录搜索页面上使用多选的多个值作为过滤器时，多个值是 or'd 一起 - 即结果是具有任何这些属性的产品的并集。

我如何获得具有选定属性的产品集的交集 - 即只有那些具有所有选定属性的产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:39:56.027

在 Magento 的标准行为中，您只能过滤一个值，如 Lucasmus 已经指出的。因此，您似乎正在使用一些自定义或模块来编辑 core/Mage/Catalog/Model/Layer/Filter/Attribute.php 模型的行为。还必须重写 Mage_Catalog_Model_Resource_Eav_Mysql4_Layer_Filter_Attribute 类，这正是您可以更改您要求的行为的类。在那个类中，方法

`applyFilterToCollection($filter,$value)`

创建相应的 SQL 代码来进行过滤。目前您的模块或扩展可能使用 OR 表示法，或使用类似的东西

`$connection->quoteInto("{$tableAlias}.value IN (?)", $value)`,

因此它会搜索您要过滤的任何值。要实现 AND，您必须通过将 $value 拆分为其不同的部分并为每个单独的值使用 where 子句来重写此方法。希望这是有道理的。

# objective-c - 重新加载表视图的数据不起作用

> ID：13952374
> 
> 赞同：2
> 
> 时间：2012-12-19T12:20:53.103
> 
> 标签：objective-c, ios, uitableview

我正在制作一个带有复选框的表格视图。我确实用 UIButtons 实现了复选框，我可以毫无问题地选中和取消选中它们。当我尝试制作“全选/取消全选”按钮时出现问题，这是结果代码：

```
-(IBAction)select:(id)sender{
    if (all==YES) {
        all=NO;
    }
    else {
        all=YES;
    }
    [tblPeticiones reloadData];
} 
```

问题是表没有重新加载数据。任何的想法？谢谢并恭祝安康。

编辑：我像这样加载数据

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  //Datos
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd-MM-yyyy"];

    NSString *fInicio = [dateFormatter stringFromDate:[(MAP_Gastos_CiberTRIPS *)[m objectAtIndex:indexPath.row] DEP_DATE]];
    NSString *loc = [(MAP_Gastos_CiberTRIPS *)[m objectAtIndex:indexPath.row] LOCATION];
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [formatter setCurrencyCode:@"EUR"];
    [formatter setLocale:[NSLocale currentLocale]];
    NSString *precio = [formatter stringFromNumber:aux];
//Vista
    NSString *MyIdentifier = [NSString stringWithFormat:@"MyIdentifier %i", indexPath.row];

    CustomTVC *cell = (CustomTVC *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil) {
        cell = [[[CustomTVC alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];
        //CheckBox
        UIButton *checkButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];

        [checkButton setFrame:CGRectMake(10, 10, 23, 23)];
        if (todos==NO) {
            [checkButton setBackgroundImage:[[UIImage imageNamed:@"checkNO.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal];
             checkButton.tag = 0;
        }
        else {
            [checkButton setBackgroundImage:[[UIImage imageNamed:@"checkSI.png"] str    etchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal]; 
            checkButton.tag = 1;
        } 

        [checkButton addTarget:self action:@selector(checkAction:) forControlEvents:UIControlEventTouchUpInside];

        [cell addSubview:checkButton];
        [cell.contentView addSubview:checkButton]; 
  //fecha
        UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(40, 0, 70.0,tableView.rowHeight)] autorelease];
        [cell addColumn:0];
        label.tag = 1;
        label.font = [UIFont boldSystemFontOfSize:12.0];
        label.text = fInicio;
        label.textAlignment = UITextAlignmentLeft;
        label.textColor = [UIColor blackColor];
        //label.backgroundColor = [UIColor whiteColor];
        label.autoresizingMask = UIViewAutoresizingNone | UIViewAutoresizingFlexibleHeight;
        [cell.contentView addSubview:label]; 

        if (indexPath.row % 2 == 0){ 
            label.backgroundColor = [UIColor colorWithRed:233.0/255.0 
                                               green:233.0/255.0 
                                                blue:233.0/255.0 
                                               alpha:1.0]; 
        } else { 
            label.backgroundColor = [UIColor clearColor]; 

        }

        //localización
        label =  [[[UILabel alloc] initWithFrame:CGRectMake(115, 0, 75.0,tableView.rowHeight)] autorelease];
        [cell addColumn:180];
        label.tag = 2;
        label.font = [UIFont boldSystemFontOfSize:12.0];
        label.text = loc;
        label.textAlignment = UITextAlignmentLeft;
        label.textColor = [UIColor blackColor];
        //label.backgroundColor = [UIColor whiteColor];
        label.autoresizingMask = UIViewAutoresizingNone | UIViewAutoresizingFlexibleHeight;
        [cell.contentView addSubview:label];

        if (indexPath.row % 2 == 0){ 
            label.backgroundColor = [UIColor colorWithRed:233.0/255.0 
                                                green:233.0/255.0 
                                                 blue:233.0/255.0 
                                                alpha:1.0]; 
        } else { 
            label.backgroundColor = [UIColor clearColor];     
        }
    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:24:27.250

调试问题 检查tableView的数据源方法reload后是否被调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:28:42.353

您应该将检查的行存储在数组中。然后在加载/重新加载 tableview（在 cellForRowAtIndex 中）时检查此数组，以查看是否应检查该行。

然后，如果您想全选或全选，只需将它们删除或添加到数组中并重新加载 tableview。

如果您需要帮助来实现这一点，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:26:11.780

我发现了问题。这是工作代码：

```
-(IBAction)select:(id)sender{

    if (all==YES) {
        all=NO;
        [btnSelAll setBackgroundImage:[[UIImage imageNamed:@"checkSI.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal]; 

    }else {

        all=YES;
        [btnSelAll setBackgroundImage:[[UIImage imageNamed:@"checkNO.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal]; 
    }
    NSMutableArray *arrIndex = [NSMutableArray new];
    for(int i=0;i<[m count];i++) {
        [arrIndex addObject:[NSIndexPath indexPathForRow:i inSection:0]];
    }
    [self.tblPeticiones beginUpdates];
    [tblPeticiones reloadRowsAtIndexPaths:arrIndex withRowAnimation:UITableViewRowAnimationNone];
    [self.tblPeticiones endUpdates]; 
    [tblPeticiones reloadData];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:37:11.820

关于您的代码的一些评论：

*   `all`按下按钮时，似乎有一个名为 的全局变量，您可以切换其值。但是，在 cellForRowAtIndexPath 中，您检查另一个名为 的全局变量的值`todos`。这些变量之间有什么联系吗？
*   仅在创建新单元格时更改复选框背景图像。由于单元格被回收，您需要将此代码移到外部`if (cell == nil)`，即之后，您正在自定义回收的单元格
*   您应该只检查`if (todos)`和`if (!todos)`，不要与 YES 或 NO 之类的值进行比较。切换布尔值的最简单方法是`todos = !todos`:)

# datagridview - 在datagridview中设置与数据源无关的列名称

> ID：13952377
> 
> 赞同：0
> 
> 时间：2012-12-19T12:21:01.193
> 
> 标签：datagridview, vb.net-2010

我面临一个问题..那是当我检索数据表单数据源并将显示存储到 datagridview 中时，datagirdview 向我显示属于数据库列名的列名，但我不想显示我想要的名称静态名称我如何在 VS 2010 中设置这些名称。

那就是我想设置有意义的列名称，以帮助识别该列所代表的内容。因为我尝试了这个..那是我从 datagridview 的集合属性中添加列并且它们也被显示但是当我触发查询时它们被数据库列名覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:44:58.260

假设您当前正在使用以下查询/存储过程等

SELECT customer_id, first_name, last_name FROM EMPLOYEE datagridview 将向您显示列名，如 customer_id、first_name、last_name。

要解决此问题，请将您的查询更改为 SELECT customer_id AS [Customer ID], first_name AS [First Name], last_name AS [Last Name] FROM EMPLOYEE

现在 datagridview 将在标题中显示您的自定义列名。

# php - 不想刷新并保留最后插入的值

> ID：13952380
> 
> 赞同：7
> 
> 时间：2012-12-19T12:21:17.660
> 
> 标签：php, javascript, html, mysql

在我的 htm 页面中，我想使用一个按钮，通过使用函数提交我的表单。我在我的字段上使用验证，当我按下提交按钮时，它会显示错误消息但不保留最后一个值，它会刷新我的表单。我只希望我输入的值将存在于那里，并且只有错误消息的字段将消失。所有其他字段都保留在那里。这是我的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
    <head>
    <!--<meta http-equiv="refresh" content="text/html; charset=iso-8859-1" />-->
    <!--
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    -->
    <title>Phone Registration</title>
    <link rel="stylesheet" type="text/css" href="file:///C|/xampp/htdocs/track/css/view.css" media="all"/>
    <script type="text/javascript" src="file:///C|/xampp/htdocs/track/javascript/view.js"></script>
    <script type="text/javascript" src="file:///C|/xampp/htdocs/track/javascript/external.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

    <script>
        $(function() {
            $( "#datepicker" ).datepicker();
        });
        </script>

    </head>
    <body id="main_body" >
        <img id="top" src="file:///C|/xampp/htdocs/track/images/top.png" alt=""/>
            <div id="form_container">
            <h3>
                <a href="file:///C|/xampp/htdocs/track/phonereg.php">Phone Registration</a>
                <a href="file:///C|/xampp/htdocs/track/officerreg.php">Officer Registration</a>
                <a href="file:///C|/xampp/htdocs/track/customerreg.php">Customer Registration</a>
                <a href="file:///C|/xampp/htdocs/track/taskentry.php">Task Entry</a>
            </h3>       
            <form  name="order" id="form_532698" class="appnitro"  method="post" action="" >
                <div class="form_description">
                <h2>Phone Registration</h2>
            </div>                      
            <ul >
              <li>
              <span>
                <label class="description">IMEI # : </label>
                <input name="imei" id="imeinum" class="element text medium" type="text" maxlength="15" value=""/> 

                </span>
              </li>
              <li>
              <span>
                <label class="description" >Phone Number </label>
                <input name="phone" id="phnum" class="element text medium" type="text" maxlength="11" value="" onblur="validate(this)"/>  

                </span>
              </li>
              <li>
              <span>
                <label class="description" >From Date </label>
                <input id="datepicker" name="fdate" class="element text medium" maxlength="10" value="" type="text"/>
                </span>
              </li>
              <li>
              <span>
                <label class="description" for="element_4">Active </label>
                <input name="r1" id="rad" class="element radio" type="radio" value="Yes" checked="checked" />
                <label class="choice">Yes</label>
                <input name="r1" id="rad" class="element radio" type="radio" value="No" />
                <label class="choice">No</label>
                </span>
              </li>

              <li>
              <input type="button" name="save" value="Save" />
              </li>

              <!--
              <li class="buttons">
                    <input type="hidden" name="form_id" value="532698" />
                    <input class="button_text" type="submit" name="save" value="Save" id=""  />
                    &nbsp;<input class="button_text" type="reset" name="cancel" value="Cancel" />
                    &nbsp;<input class="button_text" type="submit" name="search" value="Search" id="" />
                    &nbsp;<input class="button_text" type="submit" name="up" value="Update" id=""  />
                    &nbsp;<input class="button_text" type="submit" name="del" value="Delete" id="" />
              </li>
              -->
            </ul>
            </form>
    </div>
    <img id="bottom" src="file:///C|/xampp/htdocs/track/images/bottom.png" alt=""/>

    <script type="text/javascript" language="JavaScript">
//submit form
document.order.submit();
</script>
    </body>

</html> 
```

请指导我如何做到这一点？我会感谢你的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:23:04.727

使用`e.preventDefault();`或`return false;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:25:13.830

**检查$(function())**中的验证是否成功，如果没有，则返回 false .. 否则返回 true ...

```
<script>
$(function() {
    $( "#datepicker" ).datepicker();
    if(!validation) {
        return false;
    }
    return true;
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:30:43.313

有两种主要方法可以做到这一点：PHP（服务器端）和 javascript（客户端）。

PHP解决方案不是那么干净，您需要刷新页面，检查那里的值并`value`在每个输入中设置正确（删除要删除的那些）

javascript/jQuery 解决方案更简洁：不是`<input type='submit' />`使用调用 javascript 函数的按钮，而是检查每个输入（如果您需要服务器信息来检查它们，您可以使用 Ajax）并显示错误，仅将错误设置为空白的。

两种方式都可以，但是 javascript 方法更容易控制/更新，并且由于它不刷新页面，因此更加用户友好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:31:11.600

如果验证失败，您可以使用此代码防止表单提交到服务器：

```
$("form").on("submit", function(event){
  if(!isValidForm($(this)){
    event.preventDefault();
  }
}); 
```

假设 isValidForm() 方法采用表单选择器，如果表单有效则返回 true，否则返回 false。

# python - 在 debian/control 中定义分组条件依赖的任何方法？

> ID：13952382
> 
> 赞同：9
> 
> 时间：2012-12-19T12:21:21.310
> 
> 标签：python, debian, packaging, python-2.x, dpkg

我正在 debianizing 一个 Python 包，它有一些奇怪的依赖关系。它要么：

*   取决于`python2.7`
*   取决于`python2.6`和（我在 PyPI 上`python-ordereddict`的自建包）`ordereddict`

例如，在我的`setup.py`我有：

```
deps = ["Flask >=0.8"]
if not hasattr(collections, "OrderedDict"): # Python 2.6
    deps.append("ordereddict")

setup(
    …
    install_requires=deps,
    …
) 
```

我在 Debian 打包文档中没有找到关于这个问题的任何内容。出乎意料的是，我尝试过写作

```
Depends: ..., python2.7 | (python2.6, python-ordereddict) 
```

但是，毫不奇怪，这是一个不起作用的错误语法：

```
dpkg-gencontrol: warning: can't parse dependency (python2.6 
```

我正在使用 dh_python2 并`${python:Depends}`提供了非常不合理的列表，例如

```
Depends: python2.7 | python2.6, python (>= 2.7.1-0ubuntu2),
    python (<< 2.8), python-flask, python-ordereddict 
```

有了这样的依赖列表，它就需要`python-ordereddict`for `python2.7`，那是不存在的。显然我不能`python2.7-minimal`说`Provides: python-ordereddict`（就像它完成了`python-argparse`）。

请对如何正确打包此类库有任何建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T16:03:06.147

一种选择是让`python-ordereddict`依赖`python2.6`，然后让你的主包依赖`python2.7 | python-ordereddict`。`python-ordereddict`我假设使用 2.7安装没有意义，因为`OrderedDict`在该版本中可用。

当然，这很丑陋，因为它将主包的依赖项推入库中。另一种方法是认识到依赖关系必须是合[取范式](https://en.wikipedia.org/wiki/Conjunctive_normal_form)(CNF) 中的命题公式。通过应用命题逻辑的[分配律](https://en.wikipedia.org/wiki/Distributivity#Propositional_logic)，你可以转换

```
python2.7 | (python2.6, python-ordereddict) 
```

到等效的 CNF

```
python2.7 | python2.6, python2.7 | python-ordereddict 
```

（我承认，这也不是特别漂亮）。

# hibernate - 在 GWT Plotform 中使用 Hibernate 时出现 RPC 错误

> ID：13952384
> 
> 赞同：1
> 
> 时间：2012-12-19T12:21:29.923
> 
> 标签：hibernate, gwt, gwt-platform, gwtp

我一直在尝试通过将链接[gwt与hibernate](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)休耕来使用hibernate， 但我遇到了休耕错误，但我很确定我的Hibernate部分工作正常但是当我尝试将hibernate与gwt集成时，它正在休耕警告和数据未填充到客户端

```
 Starting Jetty on port 8888
   [WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.client.rpc.SerializationException: Type 'com.SomeDTO' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = com.SomeDTO@f8dc0f
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.serialize(Collection_CustomFieldSerializerBase.java:44)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serialize(ArrayList_CustomFieldSerializer.java:39)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serializeInstance(ArrayList_CustomFieldSerializer.java:51)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serializeInstance(ArrayList_CustomFieldSerializer.java:28)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeImpl(ServerSerializationStreamWriter.java:740)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:621)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeClass(ServerSerializationStreamWriter.java:709)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeImpl(ServerSerializationStreamWriter.java:748)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:621)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
    at com.google.gwt.user.server.rpc.RPC.encodeResponse(RPC.java:616)
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForSuccess(RPC.java:474)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:571)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at com.google.inject.servlet.ServletDefinition.doService(ServletDefinition.java:263)
    at com.google.inject.servlet.ServletDefinition.service(ServletDefinition.java:178)
    at com.google.inject.servlet.ManagedServletPipeline.service(ManagedServletPipeline.java:91)
    at com.google.inject.servlet.FilterChainInvocation.doFilter(FilterChainInvocation.java:62)
    at com.google.inject.servlet.ManagedFilterPipeline.dispatch(ManagedFilterPipeline.java:118)
    at com.google.inject.servlet.GuiceFilter.doFilter(GuiceFilter.java:113)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:205)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:52:04.137

hibernate-validator-*.jar 必须在你的战争的 WEB-INF/lib 中才能工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:59:54.727

我不知道您的问题是否已解决，但请检查您的实体是否实现`Serializable`并有一个空的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:05:53.243

我为这个问题找到了一些简单的解决方案。当我使用 gwt 平台时，我在 SomeResult 类（实现结果接口）的帮助下，而不是创建一个新的 pojo 类并将其填充到客户端我在 SomeResult 中创建一个参数化的构造函数来保存数据库数据和只需将其发送给客户端。

以下是一些示例代码

```
 public class SomeActionResult implements Result {
        private String str;
        private int myInt;

    public SomeActionResult(String str,
         int myInt){
    this.str=str;
    this.myInt=myInt;
    }
    //getters&setters

} 
```

在休眠中，我将拥有一个返回 SomeActionResult(str,myInt) 的方法

```
public class MyDao{
    public static SomeActionResult getData(){
    //a hibernate query to retrieve the data and set them to str, myInt

    retrun new SomeActionResult(str,myInt);
    }
} 
```

现在在我的 SomeActionHandler 类 execute() 方法中，我调用 getData() 如下

```
public SomeActionResult execute(SomeAction action,ExecutionContext){

return MyDao.getData();
} 
```

# iphone - Crittercism 无法处理崩溃

> ID：13952388
> 
> 赞同：4
> 
> 时间：2012-12-19T12:21:52.603
> 
> 标签：iphone, objective-c, ios, ipad

在今天的 Crittercism App Loads 中，我看到了 App Loads 的数量。但是当我崩溃时，我在**今天的崩溃**中看不到任何东西。我确实崩溃了。

```
if (tabBar.tag == 1 && item.tag == 2) {;
 [NSException raise:NSInvalidArgumentException  format:@"Foo must not be nil"];
}; 
```

或者崩溃。

`if (tabBar.tag == 1 && item.tag == 2) {; [NSException raise:@"error!" format:@"it go!"]; };`

或者崩溃。

```
if (tabBar.tag == 1 && item.tag == 2) {;
 [self wrongselector]; 
```

};

我应该怎么做才能让它处理崩溃？

# ios - Box2d 接触式传感器 COCOS2D

> ID：13952390
> 
> 赞同：4
> 
> 时间：2012-12-19T12:22:07.910
> 
> 标签：ios, cocos2d-iphone, box2d

我在 cocos2d 中制作了一个 Box2D 传感器盒。我想要一种快速检查此框是否为空的方法。box2d 中是否有一种简单的方法来检查传感器是否与其他任何东西接触？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:05:26.227

推荐的方法是检查联系监听器 BeginContact 回调，看看其中一个固定装置是否是这个框。您可以保留当前接触的所有事物的列表，并在 EndContact 函数中将它们从列表中删除。这将为您提供一个列表，您可以随时检查以查看该框所接触的内容。

# java - Eclipse 上 java 中的 @Subscribe 和 @Produce 关键字

> ID：13952391
> 
> 赞同：2
> 
> 时间：2012-12-19T12:22:11.387
> 
> 标签：java, android, eclipse

我遇到了一个使用此事件管理器的项目： [otto](https://github.com/square/otto)

一些使用这个管理器的类在它们的一些方法附近有@Produce 和@Subscribe。

我在谷歌上找不到任何有用的信息，所以我要问的是，这些关键字是如何工作的？它们是由库定制的，还是在 java 中是不变的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:24:18.513

这只是他们库中的一些自定义**Java 注释：**

[https://github.com/square/otto/tree/master/library/src/main/java/com/squareup/otto](https://github.com/square/otto/tree/master/library/src/main/java/com/squareup/otto)：Produce.java 和Subscribe.java

# iphone - pdf倒置生成

> ID：13952392
> 
> 赞同：3
> 
> 时间：2012-12-19T12:22:14.933
> 
> 标签：iphone, objective-c, pdf-generation, cgcontextdrawimage

我正在使用以下代码创建 pdf

```
UIImage *CurImage=[UIImage imageWithContentsOfFile:[ImageArr objectAtIndex:i]];
UIView *ViewDraw=[[UIView alloc]initWithFrame:CGRectMake(0,10, pageSize, pageSize)];  
ViewDraw.backgroundColor=[UIColor clearColor];
CGContextBeginPage (pdfContext,nil);

//turn PDF upsidedown
CGAffineTransform transform = CGAffineTransformIdentity;
transform = CGAffineTransformMakeTranslation(0,CurImage.size.height);
transform = CGAffineTransformScale(transform, 1.0, -1.0);

CGContextConcatCTM(pdfContext, transform);
int y = (pageSize - CurImage.size.height)/2;
int x = (pageSize - CurImage.size.width)/2;

[CurImage drawInRect:CGRectMake( (ViewDraw.frame.width - curImage.frame.width)/2, 24, size.width, curImage.frame.height)];

//        CGContextDrawImage(pdfContext, CGRectMake(x,-y, CurImage.size.width, CurImage.size.height), CurImage.CGImage);
CGContextEndPage (pdfContext);
CurImage=nil; 
```

但它正在生成颠倒的 ie180 度镜像。

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:56:33.603

将 PDF 上下颠倒：

```
CGAffineTransform aCgAffTrans = CGAffineTransformMakeTranslation(0,892); //here the whole PDF page height should be given 
aCgAffTrans = CGAffineTransformScale(aCgAffTrans, 1.0, -1.0);
CGContextConcatCTM(aCgPDFContextRef, aCgAffTrans); 
```

您提供了一些随机高度，而某些部分被拒绝，而其他部分保持不变。于是出现了镜面效果。

# php - 读取一个 HTML 标记的属性并将其写入另一个 HTML 标记的属性

> ID：13952400
> 
> 赞同：3
> 
> 时间：2012-12-19T12:22:45.893
> 
> 标签：php, html

我有一个`<img>`带有“alt”属性的 HTML。我`<img>`的包裹在一个`<a>`. 有`<a>`一个“标题”属性。例如：

```
<a title="" href ="page.html"><img src="image.jpg" alt="text"></a> 
```

我需要读取 的“alt”属性的值`<img>`并将其写入 .的“title”属性值`<a>`。有没有办法在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:24:40.823

你可以通过php做到这一点

```
$url="http://example.com";

$html = file_get_contents($url);

$doc = new DOMDocument();
@$doc->loadHTML($html);

$tags = $doc->getElementsByTagName('img');

foreach ($tags as $tag) {
       echo $tag->getAttribute('alt');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:48:47.973

从 NullPointer 开始，

```
 $url="http://example.com";

  $html = file_get_contents($url);

  $doc = new DOMDocument();
  @$doc->loadHTML($html);

  $tags = $doc->getElementsByTagName('img');

  foreach ($tags as $tag) {
     $parent = $tag->parentNode;
     if($parent->nodeName == 'a') {
         $parent->setAttribute('tittle', $tag->getAttribute('alt'));
     }
  } 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:35:26.707

PHP 是一种服务器端语言。所以一旦输出被渲染，你就不能再改变它了。（除非您使用 PHP 下载内容，然后输出更改的数据，但这似乎只有在您无法访问原始源时才有用）如果您在 php 中创建输出，您可以使用：

```
$alt = 'text';
echo '<a title="'.$alt.'" href ="page.html"><img src="image.jpg" alt="'.$alt.'"></a>'; 
```

如果你已经有了输出，你可以使用 jquery ( [http://jquery.com/](http://jquery.com/) )

```
<script type='text/javascript'>
//perform after page is done
$(function() {

  //each image in an a tag
  $('a img').each(function() {
    var $el = $(this);
    var alt = $el.attr('alt');
    $el.parent('a').attr('title', alt);
  });
});
</script> 
```

更新

如果它的纯 PHP 字符串修改，你也可以使用正则表达式来改变它，而不是 dom 操作：

```
$string = '<a title="" href ="page.html"><img src="image.jpg" alt="text"></a>';
$pattern = '/<a(.*?)title="(.*?)"(.*?)<img(.*?)alt="(.*?)"(.*?)<\/a>/i';
$replacement = '<a${1}title="$5"${3}<img${4}alt="${5}"${6}</a>';
echo preg_replace($pattern, $replacement, $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:45:30.247

虽然这个问题被标记为[php](/questions/tagged/php "显示标记为“php”的问题")，但我想我会提供一个简单的、纯 JavaScript 的方法来在客户端做同样的事情：

```
function attributeToParent(tag, from, to, within) {
    if (!tag || !from || !to) {
        return false;
    }
    else {
        within = within && within.nodeType == 1 ? within : document;
        var all = within.getElementsByTagName(tag);
        for (var i = 0, len = all.length; i < len; i++) {
            if (all[i].getAttribute(from) && all[i].parentNode.tagName.toLowerCase() !== 'body') {
                all[i].parentNode.setAttribute(to, all[i].getAttribute(from));
            }
        }
    }
}

attributeToParent('img', 'alt', 'title');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ARGB2/1/)。

这可以稍微整理一下，但我认为它相对清晰（尽管比我想要的更混乱）。

参考：

*   [`getAttribute()`](https://developer.mozilla.org/en/docs/DOM/element.getAttribute).
*   [`getElementsByTagName()`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName).
*   [`setAttribute()`](https://developer.mozilla.org/en/docs/DOM/element.setAttribute).
*   [`String.toLowerCase()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase).
*   [`element.tagName`](https://developer.mozilla.org/en-US/docs/DOM/element.tagName).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T12:30:26.473

您可以尝试使用 JQUERY，

```
<script>
    var altValue = $('img').attr('alt');
    $('a').attr('title', altValue);
</script> 
```

当您需要 onClick 并且您有更多 img 和 a 标签时，您必须使用它，如下所示

```
<script>
    function changeTitle(this) {
        var altValue = $(this).find('img').attr('alt');
        $(this).find('a').attr('title', altValue);
    }
</script> 
```

# vector - 矢量格式的海图符号

> ID：13952401
> 
> 赞同：1
> 
> 时间：2012-12-19T12:22:49.903
> 
> 标签：vector, charts, openstreetmap, symbols

请帮我找到航海图符号，用于矢量格式的航海地图。我找到了以下 PDF： http: [//pdept.cgaux.org/Documents/Active/NS/Charts/Chart_No_1_Full.pdf](http://pdept.cgaux.org/Documents/Active/NS/Charts/Chart_No_1_Full.pdf)

它包含我需要的所有符号，但不幸的是它们都在光栅中。

我查看了 OpenStreetMap & OpenSeaMap 和类似的开源项目，但无法解决我的问题。而且我觉得从光栅PDF本身重绘这些符号不是一个好主意，看起来像是重新发明轮子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:54:48.883

你已经看过正确的地方了。[OpenSeaMap](http://openseamap.org/)似乎在[这里](http://openseamap.svn.sourceforge.net/viewvc/openseamap/renderer/)有它的 SVG 图标存储库（递归浏览子目录，有多个图标位置）。[此外， OpenStreetMap](http://www.openstreetmap.org/) wiki 中有一个[海洋标记提案](http://wiki.openstreetmap.org/wiki/Proposed_features/marine-tagging)，其中还包含许多 SVG 格式的不同海洋图标（也可以浏览那里的各种链接，这些链接可能会导致更多图标）。然后是[FreieTonne](http://www.freietonne.de/)，一个与 OpenSeaMap 类似的项目，我无法确定其图标集的位置。

在所有情况下，请牢记特定图标集的许可证。

# c++ - is_convertible is_assignable 有什么区别

> ID：13952404
> 
> 赞同：25
> 
> 时间：2012-12-19T12:22:53.307
> 
> 标签：c++, typetraits

`is_convertible`和 和有什么不一样`is_assignable`？

为什么，

在vs2012中

```
is_convertible<int, int&> is false

is_assignable<int, int&> is true 
```

在 gcc4.7.2

```
is_convertible<int, int&> is false

is_assignable<int, int&> is false 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T12:45:27.507

一个区别是论点是相反的。

`is_convertible<From,To>`意味着 type 的表达式`From`可以转换为 type `To`。该标准根据返回的函数定义了这一点，该函数`To`包含返回对 . 的引用的`return create<From>();`行。所以是错误的，因为您不能将*右值*绑定到非 const*左值*引用。`create<From>()``From``is_convertible<int,int&>` *`int`*`int&`**

 **`is_assignable<T,U>`表示可以将 type 的*右值*表达式`U`分配给 type 的表达式`T`；也就是说，那`t = u;`是格式良好的。要分配的表达式被指定为函数调用，如果是*左值*引用，则返回*左值引用，否则返回**右值*引用。这意味着只有当它是非 const*左值*引用类型时才为真；因此对于 是错误的。`T`**`is_assignable<T,U>``T`*`<int,int&>`***

 ***我猜 VS2012 要么允许分配给*xvalues*，要么使用非标准检查 for `is_assignable`，给出我认为不正确的结果。

请注意，通常可转换并不意味着可赋值，因为可能没有可访问的赋值运算符；并且 assignable 并不意味着可转换，因为可能存在赋值运算符但没有可访问的转换构造函数或运算符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T12:32:11.460

Seems like a bug in gcc, `is_convertible` in this context means that:

```
int& foo()
{
    return 3; //invalid
} 
```

On the other hand `is_assignable` in this context means that:

```
void foo(int& x, int y)
{
    y = x; // valid
} 
```*****

# php - 为什么我的数组以空值开头？

> ID：13952409
> 
> 赞同：12
> 
> 时间：2012-12-19T12:23:09.380
> 
> 标签：php, mysql, arrays

我无法绕过这个。

当我创建一个数组时，它以一个空值开头。需要在数组中的值从第二个开始。

大批：

```
Array ( 

 [0] => 

 [1] => Value 1 

 [2] => Value 2 

 [3] => Value 3

) 
```

代码：

```
$categories = array();
$query2 = mysql_query("SELECT * FROM books_categories");
do{
    array_push($categories, $category['description']);
}while($category=mysql_fetch_assoc($query2)); 
```

如何使数组中的第一项成为值 1？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T12:24:23.580

这是因为 do while 循环 try while 循环

```
while($category=mysql_fetch_assoc($query2)){
    array_push($categories, $category['description']);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-19T12:25:26.097

答案很简单：在读取第一行之前先推送第一个元素。正确的做法是使用前置条件循环：

```
$categories = array();
$query2 = mysql_query("SELECT * FROM books_categories");

while($category=mysql_fetch_assoc($query2)) {
    array_push($categories, $category['description']);
} 
```

并且，请切换到使用 PDO。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-19T12:30:29.130

while循环如何工作

> ![在此处输入图像描述](../Images/f2a2b93d2fc2c8243187561e4ded82de.png)
> 
> 与常规 while 循环的主要区别在于，do-while 循环的第一次迭代保证运行（真值表达式仅在迭代结束时检查），而它不一定与常规 while 循环一起运行（在每次迭代开始时检查真值表达式，如果它从一开始就计算为 FALSE，则循环执行将立即结束）。[资源](http://php.net/manual/en/control-structures.do.while.php)

所以在你的程序中发生了什么，你在阅读第一行之前推送了第一个元素。

所以改用while

什么诡计循环会做什么？如流程图所示，它将首先检查而不是进入循环体，因此元素在读取第一行后被推送

```
$categories = array();
$query2 = mysql_query("SELECT * FROM books_categories");

while($category=mysql_fetch_assoc($query2)) {
    array_push($categories, $category['description']);
} 
```

* * *

**笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-19T12:24:39.403

因为您应该使用 while 循环而不是 do-while 循环。

```
while($category = mysql_fetch_assoc($query2)) {
    array_push($categories, $category['description']);
} 
```

在您的代码中，而不是在循环的第一次迭代中（第一次进入 do 块时），`$category`未设置因此将第一个数组值设置为空。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-19T12:25:57.960

您首先将值 ( `array_push()`) 写入数组，然后实际获取值 ( `mysql_fetch_assoc()`)。

您需要*先*获取该值，*然后*将其放入您的数组中！

```
$categories = array();
$query2 = mysql_query("SELECT * FROM books_categories");
while(($category = mysql_fetch_assoc($query2)) !=== false) {
    array_push($categories, $category['description']);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-19T12:25:06.970

尝试这样做：

```
$categories = array();
$query2 = mysql_query('SELECT * FROM books_categories');
while($r = mysql_fetch_array($query2)){
    $categories[] = $r['description'];
} 
```

# curl - 我要查询来自 dns round robin 的哪个 ip？

> ID：13952414
> 
> 赞同：0
> 
> 时间：2012-12-19T12:23:39.767
> 
> 标签：curl, dns, ip

有多个 IP 地址分配给使用 DNS 循环的同一个域名。

在对特定域进行查询时，我能猜出我使用的是哪一个吗？

对于使用 curl 的给定请求，我可以强制使用列表中的单个 ip 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:56:38.220

您可以使用[--resolve](http://curl.haxx.se/docs/manpage.html#--resolve)将 IP 地址强制设置为给定名称+端口组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T10:58:26.097

或使用主机文件，但要查看您要访问的 IP，只需使用 curl -v [http://foo.bar](http://foo.bar)

“-v”选项将向您显示更多信息以及您实际访问的 IP 地址

# java - 设置仅提供 xml 属性/元素名称的对象值

> ID：13952415
> 
> 赞同：3
> 
> 时间：2012-12-19T12:23:40.497
> 
> 标签：java, jaxb

是否可以仅使用该属性的名称将属性/元素值设置为 JAXB 对象？

例子：

如果我有课

```
@XmlRootElement(name = "book")
public class Book {

  @XmlElement(name = "title")
  private String name;
  @XmlElement(name = "author")
  private String author;

  // setters and getters
} 
```

我可以在不使用 setter( `setName()`) 的情况下设置名称，而只知道 xml 元素名称吗？在这种情况下是`"title"`. 它可能看起来像这样：

```
JAXBContext context = JAXBContext.newInstance(Book.class);
Something s = context.create***();
s.setValueToObject(book, "title", "New name"); // should do the same like book.setName("New name") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:49:28.797

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**按属性名称设置值**

您可以使用`java.lang.reflect`API 为您的对象设置一个值。

```
package forum13952415;

import java.lang.reflect.Field;
import javax.xml.bind.*;

public class ReflectionDemo {

    public static void main(String[] args) throws Exception {
        Customer customer = new Customer();

        setValueToObject(customer, "firstName", "Jane");
        setValueToObject(customer, "lastName", "Doe");

        JAXBContext jc = JAXBContext.newInstance(Customer.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

    private static void setValueToObject(Object object, String property, Object value) throws Exception {
        Class clazz = object.getClass();
        Field field = clazz.getDeclaredField(property);
        field.setAccessible(true);
        field.set(object, value);
    }

} 
```

* * *

**通过 XPATH 设置值**

MOXy 提供了通过 XPath 在域对象中获取/设置值的能力。下面是一个例子。

**演示**

在下面的示例中，我们需要深入挖掘底层 MOXy 实现以访问该`setValueByXPath`方法。

```
package forum13952415;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;
import org.eclipse.persistence.jaxb.JAXBHelper;
import org.eclipse.persistence.oxm.XMLContext;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Customer.class);

        XMLContext xmlContext = JAXBHelper.unwrap(jc, XMLContext.class);

        Customer customer = new Customer();
        xmlContext.setValueByXPath(customer, "@id", null, 123);
        xmlContext.setValueByXPath(customer, "first-name/text()", null, "Jane");
        xmlContext.setValueByXPath(customer, "last-name/text()", null, "Doe");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(customer, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。

```
<?xml version="1.0" encoding="UTF-8"?>
<customer id="123">
   <first-name>Jane</first-name>
   <last-name>Doe</last-name>
</customer> 
```

**顾客**

下面是一个示例域模型。我使用了一种 XML 名称与 Java 名称不同的名称。

```
package forum13952415;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {

    @XmlAttribute(name="id")
    private int primaryKey;

    @XmlElement(name="first-name")
    private String firstName;

    @XmlElement(name="last-name")
    private String lastName;

} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要`jaxb.properties`使用以下条目添加一个在与域模型相同的包中调用的文件（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -你的.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:28:11.977

最好的方法是在其设置器上提供它们。

如果你的方法

```
s.setValueToObject(book, "title", "New name"); // should do the same like book.setName("New name") 
```

为你做二传手工作。那么它也是正确的

# javascript - 将 Jquery 数据发布到 Express

> ID：13952420
> 
> 赞同：5
> 
> 时间：2012-12-19T12:23:48.997
> 
> 标签：javascript, jquery, json, node.js, express

无论我使用什么 req.params/req.query/req.body 和 $.post({..} 组合，我都无法从我的 Jquery post 请求中提取 JSON 数据。

这是我的**jQuery**：

```
$.post("/mail", {email : "s@gmail.com", name : "s@gmail.com"}); 
```

我还尝试了以下各种排列：

```
$.ajax({type: "POST", url: "/mail", dataType :"json", data :
{email : "s@gmail.com", name : "s@gmail.com"}}); 
```

这是我的 node.js**快递**代码：

```
app.post("/mail", function(req, res) {
   console.log(req.body.name);
   console.log(req.route);
   console.log("params1: " + req.param.params);
.... 
```

我尝试了无数种访问数据电子邮件和名称的方法，但均未成功。如果解决方案是对 req.body/req.params 的简单修改，我会感到惊讶，但一切皆有可能！数据根本不存在！（它也没有出现在我的网址中——我看到的只是 localhost:1337）

req.body / req.params / req.param.params / req.params*都返回* **undefined**并且 req.query*返回* **[]**。

req.route*返回*：

```
{ path: '/mail',
  method: 'post',
  callbacks: [ [Function] ],
  keys: [],
  regexp: /^\/mail\/?$/i,
  params: [] } 
```

我试过添加：

```
app.use(express.bodyParser()); 
```

但是，诚然，我并不完全理解它的目的。任何帮助是极大的赞赏。

节日快乐！//山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:29:03.673

您必须在[`bodyParser()`](http://expressjs.com/api.html#bodyParser)使用它的任何路由之前添加中间件，如下所示：

```
app.use(express.bodyParser());

app.post('/mail', function(req, res) {
    console.log(req.body); // the body attribute will be created by the bodyParser()
}); 
```

express 的工作方式是每个请求都按照声明的顺序通过中间件和路由向下传递。由于`bodyParser()`中间件现在是在你的路由之前声明的，它有机会将请求的主体解析为一个漂亮的 JSON 格式，将解析后的值粘贴到[`req.body`](http://expressjs.com/api.html#req.body)中，然后将控制权传递给下一个路由/中间件；否则，`req.body`将根本不存在。

# c - c语言中if(!variable_name)是什么意思

> ID：13952423
> 
> 赞同：5
> 
> 时间：2012-12-19T12:24:06.990
> 
> 标签：c

这是问题

```
int main() {
    int pid = fork();
    if (!pid) {
        // condition 1
    } else {
        // condition 2
    }
    return 0;
} 
```

做什么`(!pid)`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T12:24:33.490

它相当于：

```
if (!pid != 0) /* ... */ 
```

接着：

```
if (pid == 0) /* ... */ 
```

> **C11 (n1570), § 6.5.3.3 一元算术运算符**
> 
> 如果其操作数的值比较不等于 0，则逻辑否定运算符的结果`!`为 0，如果其操作数的值比较等于 0，则为 1。结果类型为`int`。表达式`!E`等价于`(0==E)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T12:27:04.550

! 运算符否定逻辑条件。

在 C 中，数值 0 被认为是逻辑假，任何其他数值都是逻辑真。! 运算符否定逻辑条件，因此当 pid 为 0 时为真，当 pid 不为 0 时为假。

您可以将其理解为“当没有 pid 时”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T12:27:10.260

是否定的意思。在您的情况下`condition 1`，将在父进程中执行，`condition 2`在子进程中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T12:28:06.783

```
if(!pid) 
```

正如你所写：

```
if(pid == 0) {
  /* do something */
} 
```

接着：

```
if(pid) 
```

是

```
if(pid != 0) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T12:26:45.330

`!pid``pid`如果等于零，表达式将为真。

基本上，它与以下内容相同：

```
if (pid == 0) {
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-19T12:28:04.543

在普通的旧 C 中，没有布尔数据类型，但有布尔逻辑。

`true`除 0 外，所有数值都计算为`false`。

这样做的结果是，如果你想测试一个条件是否为真，你实际上是在将它与 0 进行比较。

C 中的比较运算符产生 a`true`或`false`结果，这意味着它们返回数字 1 或 0。

否定运算符反转`true`为`false`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-19T12:26:38.370

错误的事物：false、0、null 正确的事物：其他一切。

如果 !pid 为 true，pid 需要为 0、false 或 null

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-19T13:37:55.623

我想所有发布的答案都是正确的。在一行中，(!pid) 将等同于 (pid==0)。
然而，我借此机会解释如何/为什么在这里使用它。

[`fork()`](http://linux.die.net/man/2/fork)函数将创建一个子进程 AKA 子进程。因此，当函数返回时，在该实例中将有 2 个进程，它们在同一位置执行代码。因此，它将返回进程的两个副本——我们称它们为父子节点。

的返回值`fork()`是子进程的[PID](http://en.wikipedia.org/wiki/Process_identifier)，当它在父进程中返回时。& 在子进程中为 = 0。在您的代码中，`pid = fork();`将捕获此返回值。

如果 (pid==0) 那么你在子进程中。如果 (pid != 0) 你在父进程中。根据您是父母还是孩子，您可以更改代码的行为。（例如，您可以在孩子中调用 exec 并在父母中等待。）

有关 fork 功能的更多详细信息，请 google for `fork()`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-19T13:08:28.180

`(!pid)`相当于 `(pid == 0)`

实际上，问题中的代码是错误的。`fork()`可以返回以下三件事之一：

`>0` 子进程的进程ID。这将返回给父级。

`0` 这将返回给孩子。

`<0` 失败。这将返回给父级。

检查[本教程](http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html)以正确使用`fork`.

# c# - 如何将 XML 转换为字典

> ID：13952425
> 
> 赞同：18
> 
> 时间：2012-12-19T12:24:11.020
> 
> 标签：c#, xml, linq, linq-to-xml

我的xml如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <data name="LogIn">Log In</data>
  <data name="Password">Password</data>
</root> 
```

我在没有 Linq 的情况下成功地做到了这一点，任何人都可以帮助我将以下代码转换为 Linq：

```
using (XmlReader reader = XmlReader.Create(_xml))
{
    while (reader.Read())
    {
       if (reader.NodeType == XmlNodeType.Element && reader.LocalName == "data")
       {
          reader.MoveToAttribute("name");
          string key = reader.Value;
          reader.MoveToContent();
          string value = reader.ReadElementContentAsString();
          _dictionary.Add(key, value);
       }
    }
    reader.Close();
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T12:27:59.030

```
var xdoc = XDocument.Load(path_to_xml);
_dictionary = xdoc.Descendants("data")
                  .ToDictionary(d => (string)d.Attribute("name"),
                                d => (string)d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:54:15.880

```
XDocument xdoc = XDocument.Load("test.XML");
var query = xdoc.Descendants("root")
                .Elements()
                .ToDictionary(r => r.Attribute("name").Value,
                             r => r.Value); 
```

记住包括：

```
using System.Linq;
using System.Xml.Linq; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T07:28:09.570

这是一个老问题，但如果有人遇到`'Typed'`xml（例如来自`SharedPreference`android 应用程序的文件），您可以按如下方式处理它： 这是我从`Instagram`应用程序中获取的此类 xml 的示例。

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
<boolean name="pinnable_stickers" value="false" />
<string name="phone_number">+254711339900</string>
<int name="score" value="0" />
<string name="subscription_list">[]</string>
<long name="last_address_book_updated_timestamp" value="1499326818875" />
 //...other properties
</map> 
```

请注意 value 属性中的不一致。某些字段（例如 type `string`）没有明确定义。

```
var elements = XElement.Load(filePath)
.Elements()
.ToList();
var dict = new Dictionary<string, string>();    
var _dict = elements.ToDictionary(key => key.Attribute("name").Value,
                        val => val.Attribute("value") != null ?
                        val.Attribute("value").Value : val.Value); 
```

# jquery - facebook阻止了我的json请求

> ID：13952429
> 
> 赞同：0
> 
> 时间：2012-12-19T12:24:23.303
> 
> 标签：jquery, html, facebook, json, error-handling

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>Doers Inc | The one who does something</title>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $(function () {
            $.ajax({
                url: "http://query.yahooapis.com/v1/public/yql",
                dataType: "jsonp",
                success: function (data) {
                    console.log(data.query.results.json);
                    $.each(data.query.results.json.entries, function (i, v) {
                        $('#entries').append(data.query.results.json.entries[i].content + '<br />');
                     });
                 }, data: {
            q: 'select * from json where url="https://www.facebook.com/feeds/page.php?id=397319800348866&format=json"',
            format: "json"
                    }
           });
       });
   });

</script>
  </head>
  <body>
    <div id="entries"></div>
  </body>
</html>​ 
```

我使用上面的代码使用 json+jquery 获取我的 facebook 帖子。但是当我将代码添加到我的站点中的 html 文件时。[输出](http://doers.lk/post.html)显示

```
â€‹ 
```

签名。这段代码有什么问题或任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:27:03.557

这些字符不是来自 facebook，而是在您的代码中。哪些正在破坏您的 javascript。

修复代码后它正在工作：http: [//jsfiddle.net/KubtF/](http://jsfiddle.net/KubtF/)

查看源代码：http://doers.lk/post.html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>Doers Inc | The one who does something</title>

    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>

    <script type="text/javascript">
    $(document).ready(function(){
 $(function () {
    $.ajax({
        url: "http://query.yahooapis.com/v1/public/yql",
        dataType: "jsonp",
        success: function (data) {
            console.log(data.query.results.json);
            $.each(data.query.results.json.entries, function (i, v) {
                $('#entries').append(data.query.results.json.entries[i].content + '<br />');
            });
        }, data: {
            q: 'select * from json where url="https://www.facebook.com/feeds/page.php?id=397319800348866&format=json"',
            format: "json"
        }
    });
});
â€‹
â€‹  });
    </script>

    </head>
    <body>

<div id="entries"></div>â€‹

    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:31:47.807

You have some whitespace before the DOCTYPE-declaration, try to remove it. Also, declare a charset for your page:

**UTF-8:**

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

**ISO-8859-1:**

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

# javascript - 显示 youtube 视频的实时当前经过时间

> ID：13952432
> 
> 赞同：1
> 
> 时间：2012-12-19T12:24:30.730
> 
> 标签：javascript, jquery, youtube-api, youtube-javascript-api

我知道如何使用...获取 youtube 视频的当前经过时间

```
player.getCurrentTime() 
```

但是我需要一种方法来将其显示为更新元素内的文本，这样我就可以在视频播放时显示 youtube 视频计数的当前时间。最好使用jquery执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:42:45.087

如果秒数翻转时播放器没有提供回调，您仍然可以轮询当前时间。选择正确的轮询频率是一种性能折衷，但您实际上并不需要提高它：

```
setInterval(function(){
   display.innerText = player.getCurrentTime();
},100); //polling frequency in miliseconds 
```

jQuery 并没有真正简化等待，但您可以将其用于 DOM 操作：

```
setInterval(function(){
   $display.text(player.getCurrentTime());
},100); //polling frequency in miliseconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:02:12.723

这是一个可以工作的代码游乐场示例，应该会有所帮助：

[https://code.google.com/apis/ajax/playground/#polling_the_player](https://code.google.com/apis/ajax/playground/#polling_the_player)

# c++ - 增量构建：Eclipse CDT 没有注意到源代码已更改

> ID：13952435
> 
> 赞同：4
> 
> 时间：2012-12-19T12:24:37.380
> 
> 标签：c++, build, makefile, eclipse-cdt

单击 Eclipse CDT 中的“构建”符号时，应该只构建已更改的源文件。Eclipse CDT 的一个非常烦人的行为是它经常忽略已进行的“次要”更改，但不清楚次要的含义是什么。

那么输出是

```
13:21:06 **** Incremental Build of configuration <config> for project <proj> ****
make all 
make: Nothing to be done for `all'. 
```

我测试刚刚所做的更改的唯一方法是清理并完全重建整个项目，这会浪费大量时间。

这里可能是什么问题，我该如何解决增量构建？

编辑：可能不是很小，但是由于某些时钟同步问题而忽略了最近的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T17:56:31.107

如果您只在头文件中进行了更改，您应该清理您的项目，以便将更改包含在新的编译中。宏定义和静态变量的更改也需要在 Eclipse CDT 中清理项目。

# formatting - ckEditor：有没有输出输入内容的方法

> ID：13952460
> 
> 赞同：2
> 
> 时间：2012-12-19T12:26:06.860
> 
> 标签：formatting, ckeditor, output

我怎样才能获得用户的输入，这是一种输出或编码的方法吗？

现在我能做的是

```
var content = $('#cke_ckeditor1 iframe').contents().find('.cke_show_borders').clone(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:47:45.520

有一种方法可以返回编辑器的内容`editor.getData()`- 请参阅[文档](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-getData)。

`CKEDITOR.instances`您可以在对象中找到编辑器实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:56:57.893

我使用了 itextsharp 的参考来使用 ckeditor。

在 html 中声明一个隐藏的文本字段

```
<%= Html.Hidden("EditECurrentComplainText")%> 
```

在 div 中，我使用了 textArea 并将其转换为 ckeditor，然后将该 ckeditor 的值放入隐藏字段中。

```
<div id="EditECurrentComplain_ckEditor">
                                    <%= Html.TextAreaFor(model => model.Current_Complain, new { rows = "10", id = "EditCurrent_ComplainCK" })%>
                                    <%= Html.ValidationMessageFor(model => model.Current_Complain)%>
                                        <% if (Model.Current_Complain != "")
                                    { %>
                                        <script type="text/javascript">
                                            jQuery(document).ready(function () {
                                                CKEDITOR.replace('EditCurrent_ComplainCK');
                                            });
                                        </script>
                                <%} %>
                                 </div> 
```

使用以下语句将 ckeditor 的内容获取到隐藏的文本字段中

```
$("#EditECurrentComplainText").val(CKEDITOR.instances["EditCurrent_ComplainCK"].getData()); 
```

最后使用这个隐藏文本字段内容作为我想要的输出/输入。

谢谢。

# windows - 为 Metro 和桌面开发 Windows 8 应用程序

> ID：13952461
> 
> 赞同：3
> 
> 时间：2012-12-19T12:26:06.923
> 
> 标签：windows, windows-8, microsoft-metro

我正计划开发一个可在手机、平板电脑和 PC 上使用的 Windows 8 应用程序。我的理解是，我可以对所有设备使用相同的代码。（当然，一些 UI 的东西必须适应）

因为它是一个商业应用程序，所以客户想要一个附加的桌面版本。桌面版可以使用 Metro 码吗？同时开发 Metro 应用程序和桌面应用程序需要采取哪些步骤？

PS我打算用C#开发它...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:04:05.780

**是的，您可以在具有MVVM**模式的两个应用程序中使用几乎相同的代码。在这种模式下，您的 App 分为 3 个主要部分：View、ViewModel 和 Model。模型和视图模型是可移植的（您可以创建一个可移植库并引用相同的文件作为 Metro 和桌面应用程序项目的链接。视图取决于平台。

正如您可能已经想象的那样，模型是数据，而视图模型是连接视图和模型的东西。问题是您可能希望将数据保存到本地存储，这取决于平台。为此，您可以创建接口并在您的 ViewModel 上实现它们，这是不同平台中不同 ViewModel 的唯一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:36:38.993

是和不是。

是的，您可以在 Metro 和桌面应用程序上使用 C# 代码。

然而，在这些应用程序中处理数据和输入的方式有很多不同。

它们是两个完全不同的系统，具有不同的输入，不同的构建页面的方式

例如沙盒不适用于桌面应用程序。（这只是百万分之一的例子）。

尽管您的应用程序的主要逻辑将保持不变，但在两者之间进行转换并不容易

[这](http://channel9.msdn.com/Events/Windows-Camp/Developing-Windows-8-Metro-style-apps-in-Cpp/Porting-a-desktop-app-to-a-Metro-style-app)是一个涵盖相反的资源。

# c# - 通过 WebRequest 获取 RssFedd 会引发 WebException

> ID：13952467
> 
> 赞同：2
> 
> 时间：2012-12-19T12:26:44.820
> 
> 标签：c#, xml, rss, webrequest, webexception

我使用一个简单的调用来获取 RssFeed。但是每次我调用请求时，它都会抛出一个`WebException`“远程服务器没有回答”。但如果我用 IE/Chrome/Firefox 试试，我得到了答案。

因此，我尝试仅使用此功能启动一个最小的控制台项目：

```
class Test
{
    static void Main(string[] args)
    {
        WebRequest request = WebRequest.Create(@"http://stackoverflow.com/feeds/question/13952467");
        request.Timeout = System.Threading.Timeout.Infinite;

        using(WebResponse response = request.GetResponse())
        using(XmlReader reader = XmlReader.Create(response.GetResponseStream()))
        {
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load(reader);
            foreach(XmlNode _node in xmlDoc.SelectNodes("rss/channel/item"))
            {
                Console.WriteLine(_node.InnerText);
            }
        }

        Console.Read();
    }
} 
```

这些最小项目有效，所以问题出在我的项目设置中，但是我的主项目怎么了？

# image - phpThumb- 2003 版- 如何在 Linux 上对图像进行排序

> ID：13952476
> 
> 赞同：1
> 
> 时间：2012-12-19T12:27:17.147
> 
> 标签：image, sorting, phpthumb

我最初在 Windows 2000 服务器上测试了这个软件。我现在遇到的问题是它已被移植到使用 Linux 的托管公司。图像以数字形式存储为：00.jpg/01/jpg/02.jpg 等。这些图像由 Windows 服务器 (www.especialesalba.com) 上的软件按此顺序排序和显示。一旦移植到 Linux，排序现在就变得不同了——它看起来是随机的 (www.luzdelsol.co.uk)。

技术人员告诉我，两个操作系统上的排序是相同的，并且无法回答这样一个事实，即如果根本没有触摸软件（只有配置中的目录指向等），那么为什么它们的排序不同。然而，他们确实说他们找到了对 an 的调用`arraySortByColumn`和对参数的引用：`SORT_DESC`& `SORT_ASC`。我终生无法使用文本编辑器中的搜索找到这些内容。我已经要求他们告诉我他们在哪里看到这些并且还在等待。

请谁能告诉我在哪里可以更改图像的排序顺序或在哪里/什么影响了 Linux 中的排序顺序？

# ipad - 为什么应用'-webkit-backface-visibility: hidden;' 修复 ios / ipad 5.1 上的负边距过渡问题？

> ID：13952480
> 
> 赞同：3
> 
> 时间：2012-12-19T12:27:40.963
> 
> 标签：ipad, ios5, css, css-transitions, translate-animation

我偶然发现了针对我的问题的修复程序——而且我不喜欢应用我不理解的修复程序。

```
<ul>
  <li><img src="something.jpg" /></li>
  <li><img src="somethingElse.jpg" /></li>
  [+12 more <li>'s]
</ul> 
```

我认为相关的 css 样式的简要说明是：

```
ul {
  position: absolute;
  list-style-type: none;
  top: 0;
  left: 0;
}
li {
  position: relative;
  height: 900px;
  width: 500px;
  float: left;
}
img {
  display: block;
  margin: 0 auto;
} 
```

问题：当应用执行转换以向左移动整个图像集的转换时，即：

```
ul {
  left: -3000px;
} 
```

它在除 ios 5.1 之外的任何地方都能正常工作，偶尔也能工作，但更常见的是，它最初执行转换，然后恢复显示它“成功”设置的最后一个图像（例如第一张图像，或转换设置为正确的图像）。

将此添加到css：

```
ul {
  -webkit-backface-visibility: hidden;
} 
```

使一切正常工作。这对我来说没有意义，我只是在试图找出如何停止在转换之间闪烁时偶然发现的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T14:53:04.770

我想我实际上可能已经找出了原因。

正在使用的转换库似乎有一个错误，这意味着 translate() 被用于转换，而不是 translate3d() 尽管它可用。

更改后，额外的 css 规则：

```
-webkit-backface-visibility: hidden; 
```

*不再有任何效果*- 没有它，转换将 dom 节点移动到正确的位置。

我由此推断，css 规则以某种方式强制在对象上使用 translate3d() 方法。

但是，为了停止帧之间有些锯齿状的移动，我仍然需要添加：

```
ul {
  -webkit-transform: translate3d(0,0,0);
} 
```

我只是通过反复试验才发现这一点：在我的 css 中添加建议的“修复”：

```
-webkit-perspective: 0;
-webkit-backface-visibility: hidden;
-webkit-transform: translate3d(0,0,0);
visibility:visible; 
```

并确保使用了'translate3d'，然后我逐渐删除了css'fixes'，直到它只是'-webkit-transform: translate3d(0,0,0);' 在一个地方是必要的。

因此，对动画进行正确调用，并在一个地方应用 css 样式的组合可以实现更好的过渡：)

# xcode - 如果使用启动参数，使用 Git 忽略 /xcuserdata/ 是否安全？

> ID：13952491
> 
> 赞同：61
> 
> 时间：2012-12-19T12:28:19.597
> 
> 标签：xcode, git, gitignore

我在启动时传递了一个参数：`-D DEBUG`它允许我在发布应用程序中使用以下内容：

```
#ifndef DEBUG
    /* Some code I only want to be run when using the release app */
#endif 
```

当我运行时`git status`，它告诉我添加时更改的文件`-D DEBUG`是`MyExampleProject.xcodeproj/xcuserdata/myusername.xcuserdatad/xcschemes/MyExampleProject.xcscheme`

应该使用常用的 Xcode [.gitignore 文件](https://gist.github.com/3786883)将其排除。有没有其他方法可以包含这个符合`.gitignore`且不依赖于我的用户帐户的参数`xcuserdata`？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-19T14:42:44.457

一般来说，xcuserdata 对于个别项目是可以安全忽略的。每个用户都有自己的文件来保存用户状态、打开的文件夹、打开的最后一个文件等等。它确实包含您的计划。如果是第一次打开并且文件不存在，Xcode 会为你创建它。

但是......当您有一个持续构建服务器（如 Hudson 或 Jenkins）时，我们在办公室遇到了这个问题，该服务器从 Git 或 SVN 复制源代码而无需打开它并尝试构建它。如果您忽略此文件，则将没有要构建的方案，否则它将迫使某人打开项目以在第一次自动创建它。

我们通过选中管理方案下的共享框解决了这个问题。这会将方案从您的个人 xcuserdata 下移到一个共享文件夹中，该文件夹可以通过源代码控制提交并由连续构建服务器使用。希望这可以帮助。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-19T13:35:14.923

该文件夹仅包含一些临时信息。像 Xcode 的 UI 状态和类似的属性。[GitHub 建议](https://github.com/github/gitignore/blob/master/Objective-C.gitignore)排除`xcuserdata`文件中的`.gitignore`文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-21T10:52:16.080

是的，删除**xcuserdata**是安全的。

在 Finder 中打开您的 pproject 文件夹，然后根据需要从 .xcworkspace 或 .xcodeproj 右键单击​​以“显示包内容”。您将看到 2 个文件夹：**xcshareddata**和**xcuserdata**。

删除**xcuserdata**文件夹，然后尝试打开应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-27T13:36:13.707

没有直接详细回答这个问题，但是它是安全的，因为它得到了您的用户名，您项目中的其他开发人员不会使用`your_username.xcuserdatad`.

我发现 Xcode（*至少在 2021 年*）将`xcuserdata`它放在至少 3 个位置：

```
> find . -name "*xcuserdata"
./.swiftpm/xcode/package.xcworkspace/xcuserdata
./.swiftpm/xcode/xcuserdata
./project_name.xcodeproj/xcuserdata
./project_name.xcodeproj/project.xcworkspace/xcuserdata 
```

所以最简单的做法是添加`**xcuserdata`到.gitignore。这与 Github 的建议不同，后者只是`xcuserdata`.

* * *

xcuserdata 中的文件是非共享方案数据和 UI 配置（例如`UserInterfaceState.xcuserstate`）。它们是非共享的，因为它们属于用户。仅当您是用户时才会读取这些设置。我认为您无法在您拥有的另一台机器上使用这些设置。我很想知道。

[![在此处输入图像描述](../Images/b4df4b96434951206e51aa5ce3dcd4ab.png)](https://i.stack.imgur.com/Jn3T9.png)

# extjs - ExtJS 4：当img组件加载大图像时显示LoadMask

> ID：13952493
> 
> 赞同：1
> 
> 时间：2012-12-19T12:28:25.863
> 
> 标签：extjs

我需要通过单击按钮在更新 Img 组件的 src 属性期间显示“正在加载图像...”掩码。

此代码不显示加载掩码：

```
certImg.setLoading('Loading image...');
certImg.setSrc('load_image.php?file_name=' + record.get('invoice_item_file'));
certImg.setLoading(false); 
```

此代码显示，但不隐藏加载掩码（它显示在更新的图像上）：

```
certImg.setLoading('Loading image...');
certImg.setSrc('load_image.php?file_name=' + record.get('invoice_item_file')); 
```

我尝试将图像大小增加到 1-2 Mb，这使得加载它 3-4 秒，但加载掩码仍然没有显示......我还尝试将 certImg.setLoading(false) 放到 afterrender Img 事件中，结果是相同的。

当评论“certImg.setLoading(false);”时 - img 已更新，但 loadmask 仍显示在 img 上...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:04:00.413

你能检查你的代码吗？它对我有用.. 请参见[此处](http://jsfiddle.net/srknori/c7vDc/7/)的示例。

```
var isResized = false;
var changingImage = Ext.create('Ext.Img', {
    src: 'http://www.sencha.com/img/20110215-feat-html5.png',
    resizable:true,
    listeners: {
    render: function (me) {
        me.el.on({
            load: function (evt, ele, opts) {
                  me.setLoading('Loading Mask Tested');
            }
            });
        },
        resize:function(me) {
            alert("resized");
            if(isResized) {
                alert("second time");
             me.setSrc('http://www.sencha.com/img/20110215-feat-perf.png');   
            } else {
                isResized= true;         
            }

        },

      afterrender: function (me) {
        me.el.on({
            load: function (evt, ele, opts) {
                  alert("rendered");
                  me.setLoading(false);
            }
            });
        }
    }
    //height:200,
    //renderTo: Ext.getBody()
}).render(Ext.getBody()); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:28:34.413

有趣的案例......我刚刚在我的代码中添加了警报并看到了相同的结果。

```
certImg.setLoading('Loading image...');
certImg.setSrc('load_image.php?file_name=' + record.get('invoice_item_file'));
alert('now it loading...');
certImg.setLoading(false); 
```

但是在您的代码中，如果您使用大图像（如 3-4 Mb），则在加载图像时确实看不到加载蒙版。看起来，加载掩码显示在加载完成后很快，如果我们不使用警报暂停它显示 - 我们看不到它。

我只是尝试以您的方式更改我的代码，但结果相同-如果删除警报而不是加载掩码不显示...

Sencha 没有针对这种情况提供任何示例，可能它没有在这个框架中实现。

您必须尝试在不使用警报的情况下下载大图像才能看到这种现象。

# android - 如何在 AlertDialog 上禁用系统音效？

> ID：13952495
> 
> 赞同：9
> 
> 时间：2012-12-19T12:28:31.107
> 
> 标签：android, android-alertdialog, audio

我有一个带有 2 个按钮的 AlertDialog。我希望他们在点击时播放我的自定义声音。所以我在每个按钮上都有这个代码：

```
SoundUtility.getInstance(Add_Edit_Note.this).playPositive(); 
```

SoundUtility 是我编写的用于播放自定义声音的类。问题是：它确实播放了我的自定义声音，但同时它也播放了系统音效，所以我同时播放了两个声音。我可以通过重写按钮在常规按钮上禁用它：

```
public class AppButton extends Button {

public AppButton(Context context, AttributeSet attrs) {
    super(context, attrs);
    // Disable sound effect
    this.setSoundEffectsEnabled(false);
}

} 
```

然后在我的 XML 文件中：

```
<com.my.app.AppButton
    ... /> 
```

但我找不到在 AlertDialog 按钮上禁用这些系统音效的方法。有什么建议么？

**编辑**

根据要求，这是 SoundUtility 代码：

```
public class SoundUtility {
private static SoundUtility soundInstance;
private MediaPlayer mpPositive;
private MediaPlayer mpNegative;

public static SoundUtility getInstance(Context context){

    if(soundInstance==null)
    {
        soundInstance = new SoundUtility(context);
    }

    return soundInstance;
}

private SoundUtility (Context context)
{
    mpPositive = MediaPlayer.create(context, R.raw.click_positive);
    mpNegative = MediaPlayer.create(context, R.raw.click_negative);
}

// Playing positive sound
public void playPositive() {
    mpPositive.start();
}

// Playing negative sound
public void playNegative() {
    mpNegative.start();
}

// Releasing MediaPlayer
public void releaseMediaPlayer() {
    mpPositive.release();
    mpNegative.release();
} 
```

}

**编辑 2**

我的 AlertDialog 的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Are you sure you want to cancel?")
        .setCancelable(false) // The dialog is modal, a user must provide an answer
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            // If the answer is Yes
            public void onClick(DialogInterface dialog, int id) {
                ...
                setResult(RESULT_CANCELED); // Setting result as cancelled and returning it to main activity
                SoundUtility.getInstance(Add_Edit_Note.this).playPositive(); // Play positive sound
                Add_Edit_Note.this.finish(); // Closing current activity
            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {
            // If the answer is No
            public void onClick(DialogInterface dialog, int id) {
                SoundUtility.getInstance(Add_Edit_Note.this).playNegative(); // Play negative sound
                dialog.cancel(); // Closing the confirmation dialog
            }
        });
builder.create().show(); // Present the dialog to the user 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T12:44:03.443

试试这个

```
Button btn = dialog.getButton(Dialog.BUTTON_POSITIVE); 
btn.setSoundEffectsEnabled(false); 
```

调用`setSoundEffectsEnabled`您拥有的所有按钮

**编辑：**

代替

```
 builder.create().show(); 
```

采用

```
AlertDialog dialog = builder.create();
dialog.show();

Button btn = dialog.getButton(Dialog.BUTTON_POSITIVE); 
btn.setSoundEffectsEnabled(false);

Button btn2 = dialog.getButton(Dialog.BUTTON_NEGATIVE); 
btn2.setSoundEffectsEnabled(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:48:20.447

通过输入主题，我能够在全局范围内关闭声音反馈**`android:soundEffectsEnabled=false`**。

**您可以将主题从清单文件应用到整个应用程序。**

**替代方式：**

您可以创建一个类并在布局文件中使用它...

你的班 ：

```
package com.me.customeapp

public class MeTextView extends TextView {

    public MeTextView (Context context, AttributeSet attrs) {
        this.setSoundEffectsEnabled(false);
    }
} 
```

在您的 xml 文件中放入以下代码：

```
<com.me.customeapp.TextView
...  
</com.me.customeapp.TextView> 
```

试试看。希望它会帮助你。

# cucumber - 如何使用大纲对特定数据进行黄瓜测试？

> ID：13952498
> 
> 赞同：1
> 
> 时间：2012-12-19T12:28:43.617
> 
> 标签：cucumber

```
Given "step" like "description"                              
  Example:                                     
  | step | description |                
  |  1   | first       |                 
  |  2   | second      |           
  |  1   | third       |            
  |  2   | fourth      | 
```

如果我想运行它将作为 1,2,1,2。

但我需要我的测试应该以 1 运行。不需要从 2 获取数据。

任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:46:56.370

您可以标记示例并部分运行它们，如下所示：

```
Given "step" like "description"  

    @ones                            
  Examples:                                     
  | step | description |                
  |  1   | first       |                 
  |  1   | third       |            

    @twos                            
  Examples:                                     
  | step | description |                
  |  2   | second      |           
  |  2   | fourth      | 
```

只运行 1s 的数据：

```
$cucumber --tags @ones 
```

或者用 2s 排除数据：

```
$cucumber --tags ~@twos 
```

# jquery - 加载 Modal 时注入 Javascript

> ID：13952499
> 
> 赞同：2
> 
> 时间：2012-12-19T12:28:47.650
> 
> 标签：jquery, scroll, modal-dialog, ajaxcontroltoolkit

我有一个小问题，我试图实现这个小提琴[http://jsfiddle.net/yXRSz/](http://jsfiddle.net/yXRSz/)中发生的事情，基本上它在阅读 T&C 时启用一个按钮。

我遇到的问题是我希望这发生在 AjaxControlToolkit 模态窗口中。当模态出现并移动滚动条时，javascript 没有运行滚动功能。滚动条是 div 上的溢出

我希望这是因为在加载 JS 时模态被隐藏，我尝试添加 onload 和 oninit 方法并将脚本注入页面但没有运气，有人知道我如何在模态加载后注入吗？

下面的代码

```
<asp:Panel ID="pnlAcceptTerms" runat="server">
                        <div id="divTerms" class="modal modal_styled_dark" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-header">
                                <h3 id="H1">Terms & Conditions</h3>
                                <p>
                                    You have chosen to enter score values, in order for us to proceed with the values you have entered you must accept
                                    that we hold no responsibility for the values that you have entered. If you decline this we will only display the factual information.
                                </p>
                            </div>
                            <div class="modal-body" id="divTermsScrollArea" runat="server">
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                                <p>Terms and conditions are entered here</p>
                            </div>
                            <div class="modal-footer">
                                <div class="button-wrapper submit-button-wrapper clearfix">
                                    <div class="button-input-wrapper submit-button-input-wrapper" style="float: left;">
                                        <asp:Button ID="btnDeclineTerms" runat="server" Text="I Decline Terms" CssClass="ka-form-submit"
                                            CausesValidation="false" OnClick="btnDeclineTerms_Click" />
                                    </div>
                                    <div class="button-input-wrapper submit-button-input-wrapper" style="float: right;">
                                        <asp:Button ID="btnAcceptTerms" runat="server" Text="I Accept Terms" CssClass="ka-form-submit"
                                            OnClick="btnAcceptTerms_Click" UseSubmitBehavior="true" Enabled="false" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="divScrollScript" runat="server"></div>
                    </asp:Panel>
                    <ajaxToolkit:ModalPopupExtender ID="mpeTerms" runat="server" TargetControlID="btnHideMe2"
                        PopupControlID="pnlAcceptTerms" DropShadow="true" BackgroundCssClass="modal-backdrop" OnLoad="mpeTerms_Load" OnInit="mpeTerms_Init">
                    </ajaxToolkit:ModalPopupExtender> 
```

我背后的代码

```
 string script = "";
        script += "<script type=\"text/javascript\">\r\n";
        script += "     alert('#" + divTermsScrollArea.ClientID + "');\r\n";
        script += "     jQuery('#" + divTermsScrollArea.ClientID + "').scroll(function () {\r\n";
        script += "         alert(jQuery(this).scrollTop());\r\n";
        script += "         if (jQuery(this).scrollTop() == jQuery(this)[0].scrollHeight - (jQuery(this).height() + 30)) {\r\n";
        script += "             jQuery('#" + btnAcceptTerms.ClientID + "').removeAttr('disabled');\r\n";
        script += "         }\r\n";
        script += "     });\r\n";
        script += "</script>\r\n";

        divScrollScript.InnerHtml = script; 
```

+30 是因为 div 上的填充

干杯乔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:41:13.187

```
string script = "";
script += "<script type=\"text/javascript\">\r\n";
script += "   jQuery(function() {\r\n";
script += "     jQuery(document).on('scroll', '#" + divTermsScrollArea.ClientID + "', function () {\r\n";
script += "         if (jQuery(this).scrollTop() == jQuery(this)[0].scrollHeight - (jQuery(this).height() + 30)) {\r\n";
script += "             jQuery('#" + btnAcceptTerms.ClientID + "').prop('disabled', false);\r\n";
script += "         }\r\n";
script += "     });\r\n";
script += "   });\r\n";
script += "</script>\r\n";​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:10:16.247

对，这花了我一些时间来解决，但实际上我已经设法在扩展的模态弹出窗口中添加了一个显示事件

以防万一其他人遇到同样的问题，我的新代码如下

```
 <script language="javascript" type="text/javascript">
            // add event handler to modal show event
            // enable accept button when scroll to bottom of terms
            function pageLoad() {
                $find('<%= mpeTerms.ClientID %>').add_shown(function () {
                    jQuery('#<%= divTermsScrollArea.ClientID %>').scroll(function () {
                        //console.log(jQuery(this).scrollTop().toString() + ' : ' + (jQuery(this)[0].scrollHeight - (jQuery(this).height() + 30)).toString());
                        if (jQuery(this).scrollTop() == (jQuery(this)[0].scrollHeight - (jQuery(this).height() + 30))) {
                            jQuery('#<%= btnAcceptTerms.ClientID %>').removeAttr('disabled');
                        }
                    });
                });
            }
        </script> 
```

$find(modal popup exender name).add_shown(function () {

向模态弹出窗口显示事件添加一个函数，使您能够在其中运行脚本，我从[http://weblogs.asp.net/yousefjadallah/archive/2010/04/15/add-shown-amp获得了此代码-add-hiding-modalpopupextender-events.aspx](http://weblogs.asp.net/yousefjadallah/archive/2010/04/15/add-shown-amp-add-hiding-modalpopupextender-events.aspx)

我的原始代码不起作用的原因是因为显示了页面加载上的模式，但是当弹出扩展程序加载时它会隐藏它，从而使 js 无用。因此，通过在显示模式时添加滚动功能，js 处于活动状态:)

干杯
乔。

# api - Shopify API 错误响应“履行的所有行项目必须使用相同的履行服务”

> ID：13952500
> 
> 赞同：0
> 
> 时间：2012-12-19T12:28:53.867
> 
> 标签：api, e-commerce, shopify

我正在尝试为订单中的多个（所有）行项目添加履行。以下是我正在生成的示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
  <fulfillment>
    <line-items type="array">
      <line-item>
        <id>1234567</id>
        <fulfillment-status>fulfilled</fulfillment-status>
        <fulfillment-service>USPS</fulfillment-service>
      </line-item>
      <line-item>
        <id>1234568</id>
        <fulfillment-status>fulfilled</fulfillment-status>
        <fulfillment-service>USPS</fulfillment-service>
      </line-item>
    </line-items>
    <notify-customer type="boolean">true</notify-customer>
    <tracking-number>4545454545454545</tracking-number>
  </fulfillment> 
```

但我从 Shopify 得到以下回复：

```
<?xml version="1.0" encoding="UTF-8"?>
<errors>
  <error>All line items of a fulfillment must use the same fulfillment service</error>
</errors> 
```

请注意，以上是订单中仅有的两个订单项，并且这些订单项都尚未履行。

在哪些情况下 Shopify 会回复上述错误？我在做什么不正确导致上述错误响应&我该怎么做才能正确添加履行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:16:03.330

发生这种情况的原因是商店中的变体没有指定相同的履行服务。如果订单项是通过不同的服务完成的，那么单个跟踪号就不够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T07:43:17.610

如果您在 Shopify 管理员中的设置 --> 运输下定义了自定义订单履行方法，Shopify 会出现上述错误。错误消息“履行的所有行项目必须使用相同的履行服务”似乎不合适为订单中的所有订单项传递相同的履行服务。

# iphone - 在 Objective-C 中通知自定义委托类

> ID：13952502
> 
> 赞同：2
> 
> 时间：2012-12-19T12:29:00.660
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我已经成功地在我的班级中设置了一个委托，`NSObject`并且我能够传输一些数据并运行一些选择器。

问题是，我不明白如何将一些值发送回我设置委托的那个类。我有一个 ViewController，`SGDownloader`它有一个`BOOL`属性，我想在委托类上检查它以有条件地触发某些选择器。问题是，我似乎无法让它工作。我正在使用故事板，这是我的代码：

```
-(void)checkTheQueue {
    SGDownloader *downloaderInstance = [SGDownloader new];
    NSLog((@"Downloader is now %i"), downloaderInstance.isBusy);
    BOOL checkBool = downloaderInstance.isBusy;

    if (checkBool == NO) {
        SEL selector = @selector(checkTheThing);
        if (delegate && [delegate respondsToSelector:selector]) {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
            [delegate performSelector:selector];
#pragma clang diagnostic pop
        }
    }
    else {
        NSLog(@"Sorry, I'm busy");
    }
} 
```

`checkTheThing`我在我的第一堂课中触发了选择器，我想从中获取`isBusy`价值。它也是一个`@optional`委托方法。问题是，该`BOOL`值始终为 0，如果我尝试传递一个字符串，它始终为`nil`.

我怀疑这条线有问题-`SGDownloader *downloaderInstance = [SGDownloader new];`也许故事板弄混了或类似的东西。

**编辑：**

部分代码来自`SGDownloader`：

```
- (IBAction)attemptNewDownload:(id)sender {

    SGQueueController *myProtocol = [SGQueueController new];
    myProtocol.delegate = self;
    NSLog((@"Busy value equals %i while checking the protocol"), isBusy);
    [myProtocol checkTheQueue];
} 
```

这里`NSLog`告诉我该值为 1。几秒钟后它在我的协议类上为 0。虽然后来什么也没做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:35:54.523

您的代码应该可以工作，但您正在寻找错误的地方。

`isBusy`进入`viewDidLoad`SGDownloader，对吗？在`attemptNewDownload`您创建 SGQueueController 的实例。然后将其 Delegate 设置为已创建的 SGDownloader 并调用`checkTheQueue`它。

在`checkTheQueue`您创建一个新的 SGDownloader 实例，但`new`不调用`viewDidLoad`（默认情况下）。所以`isBusy`新创建的SGDownloader-Instance的-property还是NO。只需放出`[SGDownloader new]`-line 并更改

`BOOL checkBool = downloaderInstance.isBusy;`

到

`BOOL checkBool = delegate.isBusy;`

# sql-server - SQL 计数和分组重复

> ID：13952504
> 
> 赞同：16
> 
> 时间：2012-12-19T12:29:12.827
> 
> 标签：sql-server

请建议解决我的问题的最佳方法。

我在弄清楚如何计算下表中的重复项时遇到问题

```
Street       | City

avenue 123   | New York
avenue 123   | New York
avenue 20    | New York
avenue 35    | Chicago
avenue 12    | Chicago
avenue 123   | Chicago
avenue 12    | Chicago
avenue 12    | Chicago 
```

我想在同一个城市有多个重复的街道，结果如下？

结果：

```
Street     | City | Duplicates

avenue 123 | New York | 2
avenue 12  | Chicago | 3 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T12:30:56.723

使用`GROUP BY`,`COUNT`和`HAVING`:

```
 SELECT Street, City, COUNT(*)
 FROM yourtable
 GROUP BY Street, City
 HAVING COUNT(*) > 1 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/65947/1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T12:31:06.677

尝试 ：

```
SELECT street, city, COUNT(*) AS duplicates
FROM yourtable
GROUP BY street, city
HAVING COUNT(*) >1 
```

`HAVING COUNT(*) > 1`如果您还想显示没有重复的行，请删除。

# ruby-on-rails-3 - Paperclip 无法使用识别命令识别 UTF-8 文件名

> ID：13952506
> 
> 赞同：0
> 
> 时间：2012-12-19T12:29:22.073
> 
> 标签：ruby-on-rails-3, imagemagick, paperclip

当我尝试上传名称中包含 UTF-8 字符的文件（例如西里尔符号）时，我收到*回形针*引发的此错误：

```
[2012/12/11 17:01:45] (INFO) 26707 Command :: identify -format %wx%h '/tmp/Знімок екрана з 2012-09-18 12:49:4220121211-26707-4evsj6.png[0]'
[2012/12/11 17:01:45] (INFO) 26707 [paperclip] An error was received while processing: #<Paperclip::Errors::NotIdentifiedByImageMagickError: /tmp/Знімок екрана з 2012-09-18 12:49:4220121211-26707-4evsj6.png is not recognized by the 'identify' command.> 
```

然而，识别命令成功通过：

```
$ identify -format %wx%h ~/Картинки/Знімок\ екрана\ з\ 2012-09-07\ 15\:45\:48.png 
1920x1080 
```

其他文件（名称 like `IMG_0286.JPG`）也通过了。

什么可能导致此问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:23:31.593

找到了解决方案。这是一个棘手的问题，但它有效。创建了一个补丁`paperclip-3.3.1`：

```
diff -r --unidirectional-new-file paperclip-3.3.1/lib/paperclip/geometry.rb paperclip-3.3.1-my/lib/paperclip/geometry.rb
23c23
<                      Paperclip.run("identify", "-format %wx%h :file", :file => "#{file_path}[0]")
---
>                      Paperclip.run("identify", "-format %wx%h :file", :file => file_path)
31c31
<         raise(Errors::NotIdentifiedByImageMagickError.new("#{file_path} is not recognized by the 'identify' command."))
---
>         raise(Errors::NotIdentifiedByImageMagickError.new("#{file_path} is not recognized by the 'identify' command. (from #{file.inspect})"))
diff -r --unidirectional-new-file paperclip-3.3.1/lib/paperclip/thumbnail.rb paperclip-3.3.1-my/lib/paperclip/thumbnail.rb
77c77
<         success = convert(parameters, :source => "#{File.expand_path(src.path)}#{'[0]' unless animated?}", :dest => File.expand_path(dst.path))
---
>         success = convert(parameters, :source => "#{File.expand_path(src.path)}#{'[0]' if animated?}", :dest => File.expand_path(dst.path))
110c110,111
<       raise Paperclip::Error, "There was an error running `identify` for #{@basename}" if @whiny
---
>       #raise Paperclip::Error, "There was an error running `identify` for #{@basename}" if @whiny
>       return false 
```

似乎回形针只是引发异常而不是返回`true`或`false`- 没有任何异常处理。这是它的主要失败。

或者猴子补丁：

```
module Paperclip
  class Geometry
    def self.from_file file
      file_path = (file.respond_to?(:path) ? file.path : file) #.gsub(/\s/, '\\\\\1')
      raise(Errors::NotIdentifiedByImageMagickError.new("Cannot find the geometry of a file with a blank name")) if file_path.blank?
      geometry = begin
        silence_stream(STDERR) do
          Paperclip.run("identify", "-format %wx%h :file", :file => file_path)
        end
      rescue Cocaine::ExitStatusError
        ""
      rescue Cocaine::CommandNotFoundError => e
        raise Errors::CommandNotFoundError.new("Could not run the `identify` command. Please install ImageMagick.")
      end
      parse(geometry) ||
          raise(Errors::NotIdentifiedByImageMagickError.new("#{file_path} is not recognized by the 'identify' command. (from #{file.inspect})"))
    end
  end

  class Thumbnail
    def make
      src = @file
      dst = Tempfile.new([@basename, @format ? ".#{@format}" : ''])
      dst.binmode

      begin
        parameters = []
        parameters << source_file_options
        parameters << ":source"
        parameters << transformation_command
        parameters << convert_options
        parameters << ":dest"

        parameters = parameters.flatten.compact.join(" ").strip.squeeze(" ")

        success = convert(parameters, :source => "#{File.expand_path(src.path)}#{'[0]' if animated?}", :dest => File.expand_path(dst.path))
      rescue Cocaine::ExitStatusError => e
        raise Paperclip::Error, "There was an error processing the thumbnail for #{@basename}" if @whiny
      rescue Cocaine::CommandNotFoundError => e
        raise Paperclip::Errors::CommandNotFoundError.new("Could not run the `convert` command. Please install ImageMagick.")
      end

      dst
    end

    protected

    def identified_as_animated?
      ANIMATED_FORMATS.include? identify("-format %m :file", :file => "#{@file.path}[0]").to_s.downcase.strip
    rescue Cocaine::ExitStatusError => e
      #raise Paperclip::Error, "There was an error running `identify` for #{@basename}" if @whiny
      return false
    rescue Cocaine::CommandNotFoundError => e
      raise Paperclip::Errors::CommandNotFoundError.new("Could not run the `identify` command. Please install ImageMagick.")
    end
  end
end 
```

# linux - 将简单的 emaildump 转换为 maildir 或 mbox 格式

> ID：13952507
> 
> 赞同：3
> 
> 时间：2012-12-19T12:29:23.260
> 
> 标签：linux, text, file-conversion, mbox, maildir

在 OTRS 中，我有一个包含电子邮件的数据库。我在`eml`名为“article_plain”的表中有原始电子邮件（格式）。

我可以使用如下语句轻松地进行转储：

```
SELECT ap.body FROM article_plain ap 
INNER JOIN article a ON (a.id = ap.article_id) 
INNER JOIN ticket t ON (a.ticket_id = t.id) 
INNER JOIN queue q ON (t.queue_id = q.id) 
WHERE q.name LIKE '%something%' 
LIMIT 10; 
```

使用命令行：

```
mysql -u root otrs -pmypassword --silent --skip-column-names --raw -e 
"select ap.body from article_plain ap inner join article a on (a.id = ap.article_id) inner join ticket t on (a.ticket_id = t.id) inner join queue q on (t.queue_id = q.id) where q.name like '%something%' limit 10;" 
>> ./emlconcat_something 
```

我现在已经导出到带有串联 eml 文件的单个文件中。这看起来像：

> X-Mimeole：由 Microsoft Exchange V6.5 生成 接收：来自 xxxxxx.xxxxxx.org.za 的 xxxxxxxx.org.za ([10.0.50.12]) 和 Microsoft SMTPSVC(6.0.3790.4675)；2010 年 9 月 28 日星期二 11:20:22 +0200 MIME 版本：1.0 内容类型：多部分/相关；类型=“多部分/替代”；boundary="----_=_NextPart_001_01CB5EEE.613E57EA" 收到：来自 xxxxxx.xxxxxxx.co.za ([41.208.19.106]) 由 xxxxxxxxx.org.za 使用 SMTP；2010 年 9 月 28 日 09:27:03 +0000 收到：来自 mail.dtss.co.za (mail.xxxxx.co.za [196.4.89.13]) by xxxxx.xxxxxxx.co.za；2010 年 9 月 28 日星期二 11:27:00 +0200 收到：来自 xxxxx-xxxxx.xxxxxx.org.za ([172.16.252.23]) 由 mail.dtss.co.za 使用 Microsoft SMTPSVC(6.0.3790.4675)；2010 年 9 月 28 日星期二 11:30:44 +0200 内容类别：urn:content-classes:message 主题：RE：某些主题 日期：2010 年 9 月 28 日星期二 11:24：
> 
> 这是 MIME 格式的多部分消息。
> 
> ------_=_NextPart_001_01CB5EEE.613E57EA 内容类型：多部分/替代；边界="----_=_NextPart_002_01CB5EEE.613E57EA"
> 
> ------_=_NextPart_002_01CB5EEE.613E57EA 内容类型：文本/纯文本；charset="Windows-1252" 内容传输编码：引用打印
> 
> 亲爱的谁

所有其他电子邮件只是连接到第一封电子邮件（根据初始`select`声明）。

**问题：**
如何将其转换为 mbox 或 maildir 格式？
即我应该在 linux 服务器上使用什么脚本来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:04:08.933

一种解决方案是使用[`csplit`](http://www.manpagez.com/man/1/csplit/)

例子：

```
csplit -z -k mail_export_file "/Mimeole/" {*} 
```

理想情况下，“Mimeole”部分应该被扩展，但我很讨厌正则表达式，所以我把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T04:42:58.423

`formail`随附的实用程序`procmail`具有一些启发式方法，可将文件拆分为单独的电子邮件消息。默认情况下假定 Berkeley mbox 输入，但在识别 ad-hoc 和/或损坏的格式方面存在变化。

由于您自己控制转储的生成，因此我建议您只需在每个转储消息之前放置一个简单、唯一的分隔符。

# c - 指向二维数组的 C 指针

> ID：13952511
> 
> 赞同：1
> 
> 时间：2012-12-19T12:29:36.223
> 
> 标签：c, arrays, pointers

我遇到了指向二维数组的指针的问题。指针应指向可变大小的数组。

```
// create pointer to 2 dimensional array
TimeSlot **systemMatrix; // this is a global variable 
```

在一个函数中，我想创建一个新数组。

```
void setup(uint16_t lines, uint16_t coloumns) {
    // create 2 dimensional array. size can be set here.
    TimeSlot tmpTimeSlots[lines][coloumns];

    // make the pointer point to this array
    systemMatrix = tmpTimeSlots; // WARNING
} 
```

但是当我让指针指向数组时，编译器会说“警告：来自不兼容的指针类型的赋值”。此外，当从另一个函数访问 systemmatrix[2][5] 时，运行软件的微控制器会出现硬故障。

稍后在访问 tmpTimeSlots 的元素时需要变量 systemMatrix。

我尝试过像这样的组合

```
systemMatrix = *(*tmpTimeSlot); 
```

等等，但它们似乎都不起作用。

任何帮助表示赞赏:) 谢谢！

编辑：好的问题理解并解决，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:35:04.750

二维数组！= 双指针。

您几乎肯定需要为此进行动态内存分配。您还想深度复制数组的内容 - 它是一个非静态局部变量，因此超出其范围是无效的。结果你做不到`TYPE arr[sz]; return arr;`。

```
const size_t width = 3;
const size_t height = 5;
TimeSlot tmpTimeSlot[width][height];

systemMatrix = malloc(width * sizeof systemMatrix[0]);
for (int i = 0; i < width; i++) {
    systemMatrix[i] = malloc(height * sizeof systemMatrix[i][0]);
    for (int j = 0; j < height; j++) {
        systemMatrix[i][j] = tmpTimeSlot[i][j];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T12:35:07.947

您的`systemMatrix`指针不是指向二维数组的指针，而是双重解引用。您需要像这样声明它：`TimeSlot (*systemMatrix)[columns];`- 这是二维数组指针的正确类型。但是，您需要`columns`在声明（C99 中）或常量（C99 之前）的位置知道值。

另外，返回一个指向局部变量的指针会导致函数返回后指针悬空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T12:46:35.327

这里有几个错误。

```
 TimeSlot **systemMatrix; 
```

这不能用于指向 C 多维数组（稍后声明）；相反，它可以用来指向一个向量的向量，*这是一个不同的野兽*（有关这方面的更多详细信息，请查看您的 C 书籍）。关键是，要指向一个多维数组，你应该有这样的声明：

```
 TimeSlot (* systemMatrix)[lines]; 
```

这是一个指向长度向量的指针`lines`，可用于寻址多维数组（有关详细信息，请参见[此处）。](https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array)现在，这需要`lines`在编译时知道，所以它不适合你的情况。

即使您的`systemMatrix`声明对于您在该函数中所做的分配是正确的，您也会将在该函数内部分配的内存地址分配给该指针，该地址在函数退出后不再存在 - 因此您`systemMatrix`将尽快成为无效指针作为`setup`回报。

您在这里需要的是动态分配内存。这允许您为该内存指定任意生命周期并使用双括号语法。

首先，您分配一个指针向量，与您需要的行数一样大（`sizeof(int *)`在调用中乘以`malloc`）；然后，您分配行向量并将它们中的每一个分配到列向量中的位置。有关动态分配多维向量的此（和其他）解决方案的更多详细信息，请参阅[此答案](https://stackoverflow.com/a/918121/214671)。

*当您不再需要它们时，不要忘记`free`每个分配的向量！*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T12:31:55.127

您正在尝试保存指向本地对象的指针（在堆栈上分配）并在超出范围后使用它。这是错误的，函数完成后指针将失效。

还。阅读这个问题的答案：[堆分配一个二维数组（不是指针数组）](https://stackoverflow.com/questions/10116368/heap-allocate-a-2d-array-not-array-of-pointers)来学习如何动态分配一个二维数组（在堆上，与堆栈相反）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T12:35:33.940

两个问题：

1.  您不得返回指向自动存储的指针。一旦离开该功能，该存储就会超出范围。您应该改用 malloc() 。使用超出范围的存储可能会访问堆栈上的垃圾，这可能会导致硬故障。从技术上讲，这在 C中称为*未定义行为。*
2.  与您的说法相反，`TimeSlot **systemMatrix;`没有声明一个二维数组，而是一个指向 a 的指针的指针`Timeslot`。有关如何动态创建多维数组的信息，请参阅[comp.lang.c 常见问题解答。](http://c-faq.com/aryptr/index.html)

# excel - Vbscript 中的 Redim 语句出错

> ID：13952514
> 
> 赞同：0
> 
> 时间：2012-12-19T12:29:43.360
> 
> 标签：excel, vbscript, vba

对于以下代码，我收到以下错误：`Expected ')'`

```
**CODE**

  Set dicParentChild = CreateObject("Scripting.Dictionary")
    For i = 1 To height
        width = objExcel1.Application.WorksheetFunction.CountA(ob2.Columns(i))
      If width > 2 Then 
        ReDim values(1 To (width - 2))
        Key = ob2.Cells(i, 1).Value
        For j = 3 To width
            values(j - 2) = ob2.Cells(i, j).Value
        Next j
        dicParentChild.Add Key, values
      End If
    Next i 
```

任何人都可以在这里帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:43:13.337

VBScript 的数组是从零开始的。要指定数组的大小，您必须使用`(Re)Dim a(LastIndexToUse)`. `(Re)Dim a(3)`将创建一个包含 4 个插槽（索引：0、1、2、3）的数组。

VBA 允许指定第一个**和**最后一个索引（使用`From To To`语法）。

因此，您必须考虑需要多少项，减去 1 以获得 的最后一个索引参数`(Re)Dim`，并且在根据单元格/行/列数计算数组索引时要非常小心。

# php - PHP函数命令是否仅限于一种用途？

> ID：13952516
> 
> 赞同：0
> 
> 时间：2012-12-19T12:29:46.340
> 
> 标签：php, arrays, function, loops, reset

```
function getHeader($id){

    // VARS
    $print="";

    // SQL TO GET THE ORDER
    $mySQL=mysql_query("
    SELECT * FROM `table`
    ");

    // LOOP THE IDS 
    while($r=mysql_fetch_array($mySQL)){

    $print .=  '<p>'.$r["id"].'</p>';

    }
    return $print;
}

// MAIL FUNCTION
function mailToSend($Id){

        $getHeader = getHeader($Id);

$html = <<<EOM
        <!DOCTYPE html>
        <html lang="en">
        <head>
        </head>
        <body>
        $getHeader;
        </body>
        </html>
EOM;

}

mailToSend(46088);

?> 
```

我的问题与我之前的问题有关（http://stackoverflow.com/questions/13917256/php-why-cant-eom-contain-php-functions）

鉴于它`$print`是循环的并且包含许多行。如何确保 return 语句循环我的数据。我必须使用`return`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:31:59.463

You used the result of the function "foo" incorrectly. You should do it like this..

```
function show(){
    $foo =  foo();
    echo $foo;
} 
```

EDIT: you also didn't pass any variable with the foo() - function and in your declaration in does requires a parameter $bar

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:33:25.387

Do you understand the concept of [functions](http://php.net/manual/en/functions.user-defined.php) and [scope of execution](http://php.net/manual/en/language.variables.scope.php)? After returning `$print`, the value of the variable will be assigned to `$foo`, $print wouldn't exist any more in th outer scope. You have to `echo $foo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:32:25.590

I am not sure I understand you correctly but don't you want:

```
<?php

function show(){
    echo foo();
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:34:39.053

如果您将 return 替换为 echo，则无需为此使用数组，因为您已附加了内容。

如果您在函数本身中回显内容，则无需在另一个变量中获取返回值。

```
function foo($bar){

    // VARS
    $foo="Chocolate";
    $print="";

    // SQL TO GET THE ORDER
    $mySQL=mysql_query("
    SELECT * FROM `table`
    ");

    // LOOP THE IDS 
    while($r=mysql_fetch_array($mySQL)){

        $print .=  '<p>'.$r["id"].'</p>';

    }
    echo $print;
}

// call the function
// you dont need to have function show
foo(); 
```

# android - 了解内容提供者中的一些概念

> ID：13952517
> 
> 赞同：1
> 
> 时间：2012-12-19T12:29:47.617
> 
> 标签：android, android-intent, android-contentprovider

我无法理解以下代码中的某些概念：

1) 为什么我们使用.arg0.getPathSegments().get(1)？

2) get(1) 的值是多少？

3) (!TextUtils.isEmpty(arg1) 的功能是什么？" AND (" + arg1 + ')' : ""), arg2);

```
public int delete(Uri arg0, String arg1, String[] arg2) {
  int count=0;
  switch (uriMatcher.match(arg0)){
     case BOOKS:
        count = booksDB.delete(
           DATABASE_TABLE,
           arg1, 
           arg2);
        break;
     case BOOK_ID:
        String id = arg0.getPathSegments().get(1);
        count = booksDB.delete(
           DATABASE_TABLE,                        
           _ID + " = " + id + 
           (!TextUtils.isEmpty(arg1) ? " AND (" + 
           arg1 + ')' : ""), 
           arg2);
        break;
     default: throw new IllegalArgumentException(
        "Unknown URI " + arg0);    
  }       
  getContext().getContentResolver().notifyChange(arg0, null);
  return count; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:57:14.480

1) 为什么我们使用.arg0.getPathSegments().get(1)？

> 假设您使用 uri content://[Authority]/foo/bar 查询 getPathsegments 将返回一个带有 foo 和 bar 的列表（不是权限）

2) get(1) 的值是多少？

> 因此，对于上述情况，get(1) 将为您提供列表中的第二项，即 bar

3) (!TextUtils.isEmpty(arg1) 的功能是什么？" AND (" + arg1 + ')' : ""), arg2);

> 删除函数签名是

```
 public int delete(Uri url, String where, String[] whereArgs) 
```

> 因此，如果`where`string 不为 null，则将条件附加到 db delete 操作中。

# python - 安装 Cython

> ID：13952519
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:29:53.140
> 
> 标签：python, cython, raspbian

我正在尝试`cython`在 Debian“Squeezed”上安装，它给出了这个错误：

```
/tmp/easy_install-QDDnM0/Cython-0.17.3/Cython/Plex/Scanners.c:7090:18: warning: â__Pyx_CyFunction_Newâ defined but not used [-Wunused-function]
^Cerror: Setup script exited with interrupted 
```

我试图在运行“Raspbian”的树莓派上安装这些依赖项。

```
sudo apt-get install python2.7 python2.7-dev python-setuptools python-twisted mercurial gcc g++ zope.interface 
sudo python -m easy_install cython 
sudo python -m easy_install pil 
sudo python -m easy_install jinja2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:33:07.113

I think the only error is that you actually interrupted the install.

You received a *warning*. An warning's not an error. It's just that: a warning. Life would be better without warnings; but code *can* run with warnings.

* * *

But then *you* pressed `CTRL`+`C`, which interrupted the install process (`^C`).

# file-upload - 在两个单独的 jsf 页面之间传递值

> ID：13952530
> 
> 赞同：1
> 
> 时间：2012-12-19T12:30:46.270
> 
> 标签：file-upload, jsf-2, primefaces

我需要帮助！我花了几天的时间来寻找以下用例的解决方案。请原谅我没有代码。

一种 Web 输入/编辑表单：

用户详细信息 - 包含用户名、uploadfileName 等，以及“保存”和“上传”按钮

1.  用户填写他的详细信息
2.  用户点击“上传”
3.  系统打开 Primefaces FileUpload 屏幕
4.  用户上传图片
5.  系统关闭 Primefaces FileUpload 自定义画面
6.  系统用上传的文件名更新uploadfileName outputText。
7.  用户单击以保存用户详细信息。
8.  系统验证并保存用户详细信息。

Primefaces FileUpload 自定义屏幕：这是嵌入在一个对话框中，并在一个单独的 xhtml 文件中（为了可重用性）。

问题是如何从上传对话框传递上传文件名值以更新调用（主）用户页面中的上传文件名输出文本。

例如，在 Vaadin 中，可以在 Trinidad 的情况下使用 ActionListener 或 ReturnActionListener。

感谢您的帮助（提前）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:18:24.377

将 bean 放在视图范围内。然后，同一视图中的所有表单都可以使用同一个 bean 实例。

```
@ManagedBean
@ViewScoped
public class Register {
    // ...
} 
```

您可以相互注入视图范围的 bean。您可以将上传表单的 bean 注入到注册表单的 bean 中，并在 action 方法中访问它。

```
@ManagedBean
@ViewScoped
public class Register {

    @ManagedProperty("#{upload}")
    private Upload upload;

    // ...
} 
```

它是否是物理上独立的页面并不重要，只要您将它们包含在一个相同的主视图中，例如`<ui:include>`或复合，然后在回发中保持相同的视图状态。

# asp.net-mvc - 使用 ACS 扩展 Azure Web 角色时的保护 API 异常

> ID：13952532
> 
> 赞同：9
> 
> 时间：2012-12-19T12:30:50.700
> 
> 标签：asp.net-mvc, azure, azure-web-roles, acs

我一直在针对 Windows Live 和 Google 使用 Azure ACS，它的运行没有任何问题。昨晚我们将实例从 1 个运行实例扩展到 3 个，从那时起人们在访问我们的站点时报告了问题。我们已经将此追溯到以下经常发生的异常。

我们假设我们的配置中的某个地方存在问题，但不确定我们缺少什么。我们设置机器密钥...

```
<machineKey decryption="AES" decryptionKey="F7_SOMETHING_SOMETHING_FA" validation="SHA1" validationKey="63_SOMETHING_SOMETHING_BF" /> 
```

任何人都可以阐明这个问题吗？

```
System.InvalidOperationException: ID1073: A CryptographicException occurred when attempting to decrypt the cookie using the ProtectedData API (see inner exception for details). If you are using IIS 7.5, this could be due to the loadUserProfile setting on the Application Pool being set to false.  ---> System.Security.Cryptography.CryptographicException: Key not valid for use in specified state.

   at System.Security.Cryptography.ProtectedData.Unprotect(Byte[] encryptedData, Byte[] optionalEntropy, DataProtectionScope scope)
   at Microsoft.IdentityModel.Web.ProtectedDataCookieTransform.Decode(Byte[] encoded)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Web.ProtectedDataCookieTransform.Decode(Byte[] encoded)
   at Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ApplyTransforms(Byte[] cookie, Boolean outbound)
   at Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(XmlReader reader, SecurityTokenResolver tokenResolver)
   at Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(Byte[] token, SecurityTokenResolver tokenResolver)
   at Microsoft.IdentityModel.Web.SessionAuthenticationModule.ReadSessionTokenFromCookie(Byte[] sessionCookie)
   at Microsoft.IdentityModel.Web.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken)
   at Microsoft.IdentityModel.Web.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs)
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

***注意：为了上下文。这是在 Windows Azure Web 角色中运行的，并且是 MVC 4。***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:27:30.403

既然您已经向外扩展并且由于您的应用程序托管在负载均衡器后面，那么您的用户可能导航到服务器 A，在服务器 A 上获得了受 DPAPI 保护的会话 cookie，但是当他们继续浏览该站点时负载均衡器将请求重定向到服务器B上执行。发生这种情况时，服务器B没有匹配的机器密钥，因此无法解密会话cookie并抛出上述错误。以下是您可以解决此问题的三种方法。

Windows Identity Foundation (WIF) 是一个带外运行时，必须安装在计算机上，以便您的声明感知应用程序可以使用它。默认情况下，Windows Azure 实例上未安装 WIF。要运行云声明感知应用程序，您必须使 WIF 运行时在 Windows Azure 实例上可用。最简单的方法是在部署包中包含 WIF 程序集。

**在 Windows Azure 部署包中包含 WIF 程序集**

1.  在解决方案资源管理器中，找到您的声明感知应用程序。
2.  展开引用文件夹。
3.  在 References 文件夹下找到 Microsoft.IdentityModel 程序集。
4.  右键单击该程序集，然后单击“属性”。
5.  在属性窗口中，将 Copy Local 指定为 True，将特定版本指定为 False。

默认情况下，WIF 使用数据保护应用程序编程接口 (DPAPI) 以加密方式保护 cookie。DPAPI 在 Windows Azure 上不可用。为确保您的云声明感知 Web 应用程序在部署到 Windows Azure 时能够正常运行，您必须使用 RSA 添加 cookie 加密功能。

**使用 RSA 加密 cookie**

1.  在解决方案资源管理器中，找到您的云声明感知 Web 应用程序。
2.  在 Visual Studio 编辑器中打开 global.asax.cs 文件，它是 global.asax 文件背后的代码。

添加以下声明：

```
using Microsoft.IdentityModel.Tokens;
using Microsoft.IdentityModel.Web;
using Microsoft.IdentityModel.Web.Configuration; 
```

添加以下代码：

```
void OnServiceConfigurationCreated(object sender, ServiceConfigurationCreatedEventArgs e)
{
    //
    // Use the <serviceCertificate> to protect the cookies that are
    // sent to the client.
    //
    List<CookieTransform> sessionTransforms =
        new List<CookieTransform>(new CookieTransform[] {
        new DeflateCookieTransform(), 
        new RsaEncryptionCookieTransform(e.ServiceConfiguration.ServiceCertificate),
        new RsaSignatureCookieTransform(e.ServiceConfiguration.ServiceCertificate)  });
    SessionSecurityTokenHandler sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());
    e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler);
}

void Application_Start(object sender, EventArgs e)
{
    FederatedAuthentication.ServiceConfigurationCreated += OnServiceConfigurationCreated; 
```

更多信息可以在这里找到：http: [//msdn.microsoft.com/en-us/library/hh289318.aspx](http://msdn.microsoft.com/en-us/library/hh289318.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:28:59.917

`farm`这是在环境中使用 WIF 时的常见异常。关键是默认行为是使用 DPAPI 来加密 cookie。但是 DPAPI 是 MachineKey 绑定的。

您必须在 Global.Asax 中做一个小改动，并使用 RSA Crypto 服务提供商来加密/解密 FedAuth Cookie。看看[这篇文章如何实现这一点](http://msdn.microsoft.com/en-us/library/windowsazure/hh289318.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T17:11:27.940

在尝试将 ACS 与部署为 Windows Azure 网站实例与云服务的 MVC 4 应用程序一起使用时，我遇到了类似的问题。以下帮助我解决了这个问题。 [http://msdn.microsoft.com/en-us/library/hh568644.aspx](http://msdn.microsoft.com/en-us/library/hh568644.aspx)

滚动到最底部并找到显示删除 SessionSecurityTokenHandler 并将其替换为 MachineKeySessionSecurityTokenHandler 的示例。

# ruby-on-rails - 用 Spork 重新定义常量

> ID：13952535
> 
> 赞同：5
> 
> 时间：2012-12-19T12:30:58.333
> 
> 标签：ruby-on-rails, rspec, constants, spork

我正在使用以下技巧（来自[http://mikbe.tk/2011/02/10/blazingly-fast-tests/](http://mikbe.tk/2011/02/10/blazingly-fast-tests/)）来确保在使用 Spork 运行的每个 RSpec 上重新加载模型：

```
Spork.each_run do
  load "#{Rails.root}/config/routes.rb"
  Dir["#{Rails.root}/app/**/*.rb"].each { |f| load f }
  # .....
end 
```

但是，每次我运行测试时它都会导致以下警告：

`/myproject/app/models/model.rb:36: warning: already initialized constant CONFIGURABLE`

我可以通过放置来避免：

`if !defined?(A_CONSTANT)`

在每个常数之后，这看起来并不正确（但它有效）。关于如何使这项工作正常工作的任何建议？（即我的模型仍会在测试中重新加载，但我不必`if`在每个常量定义之后添加。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-04T19:12:06.070

使用“load”将导致文件被重新加载，这意味着如果该文件定义了常量，则每次加载时都会重新定义这些常量。通常首选使用“require”而不是加载，因为如果文件已经加载，它不会重新加载文件，从而避免了这个问题。

但是，显然您确实想在测试环境中重新加载文件，因此您可以在加载时抑制警告：

```
Spork.each_run do
  Kernel.silence_warnings do
    load "#{Rails.root}/config/routes.rb"
    Dir["#{Rails.root}/app/**/*.rb"].each { |f| load f }
    # .....
  end
end 
```

# iphone - purchase physical goods from ecommerce app in iphone

> ID：13952539
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:31:09.387
> 
> 标签：iphone, paypal, in-app-purchase

I have read that in-app purchases can only be used for digital goods. But in the app I am developing, users can purchase 'physical' goods, like they do on websites. Because of this I need to use PayPal for payments. Which brings me to my problem - I have read that apps (tend to be) rejected because of PayPal integration.

Assuming this is true, what (legal) ways exist for me to allow for purchase of goods just as is done on websites like Amazon? Goods like cds, music albums etc?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:27:36.540

我所看到的一切都表明它将被拒绝，但这并不意味着它是“非法的”。这只是意味着在他们的商店中上市违反了苹果的条款。

您可以构建任何类型的应用程序并自己分发。您只是无法在应用商店中列出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:43:26.610

您的应用程序不会因为实物或 PayPal 集成本身而被拒绝，eBay 做得很好。但是，如果您要销售*任何东西*，并且想进入 App Store，Apple 想要他们的 30%。如果你在他们的系统内工作以获得他们的收益，你会没事的。如果没有，您需要通过网页进行销售。请记住，Apple 不是傻瓜，他们*真的*想要他们的 30%。您的应用程序中的“购买”按钮只会在 Safari 中打开购买流程，不会让您通过看门人。

# java - 如何将 EventListener 添加到 gwt 画布绘图？

> ID：13952541
> 
> 赞同：0
> 
> 时间：2012-12-19T12:31:23.217
> 
> 标签：java, gwt, java-canvas

如果我在 GWT 画布上绘制一个形状（矩形、圆形等），我如何向该绘图添加一个像 MouseClick、MouseOver 等的 EventListener？

```
 Canvas canvas = Canvas.createIfSupported();
   Context2d context = canvas.getContext2d();

   context.beginPath();
   context.moveTo(..;
   context.lineTo(..);
   //...
   context.stroke();       
   context.fill(); 
```

如何仅检测此绘图上的点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:43:45.550

Canvas 提供光栅图形，但对您的图形一无所知。所以你有两个选择：

1.  将事件监听器添加到整个画布并使用一些函数来确定 (x; y) 事件点是否属于您的图形。

2.  请改用 SVG。使用 SVG，您可以创建矢量图形并为其添加侦听器。

# php - Get values from jquery dropdown select

> ID：13952554
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:32:23.480
> 
> 标签：php, html

I want to use this script for dropdown select list [http://tympanus.net/codrops/2012/10/04/custom-drop-down-list-styling/](http://tympanus.net/codrops/2012/10/04/custom-drop-down-list-styling/) I want to use example(demo) 3. but I can't get selected value with PHP. Can you help ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:37:45.497

也许你期待这样的事情：

```
<div class="wrapper-demo">
    <div id="dd" class="wrapper-dropdown-2" tabindex="1">Test
        <ul class="dropdown">
            <?php
            if(is_array($your_drop_down_list)&&!empty($your_drop_down_list))
                foreach($your_drop_down_list as $item)
                {
                ?>
                <li><a href="<?php echo $item['item_link'] ?>"><a class="<?php echo $item['item_class'] ?> icon-large"><?php echo $item['item_title'] ?></a></li>
                <?php
                }
            ?>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:35:36.767

该脚本从不使用 input ，因此您无法直接使用 php.ini 获取值。

当用户在列表中选择新内容时，您应该使用隐藏输入`<input type="hidden" name="jscombo" value="" />`并更改其值。

您也许应该尝试使用真实输入的其他东西，例如[Dropkick](http://jamielottering.github.com/DropKick/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:48:23.730

添加这个：

```
 $(document).ready(function(){
        $('input[name=getvalue]').change(function(){
           $('#hidden_field').val($(this).val());
        });
    }); 
```

另外，添加一个隐藏字段，

```
 <input type='hidden' name='hidden_field' id='hidden_field' /> 
```

并且，在 test2.php 上，更改，

```
 $getvalue = $_GET['hidden_field']; 
```

# database - netbeans cannot connect to database accdb

> ID：13952558
> 
> 赞同：1
> 
> 时间：2012-12-19T12:32:41.990
> 
> 标签：database, ms-access, netbeans

im using netbeans and i cant compile the code at my comptuer, it works at my friends computer

and im using microsoft access 2007 for database im using windows 7 64 bit so here is the error is it driver error or what?

> run: Dec 19, 2012 7:26:55 PM DBConnect SEVERE: null java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956) at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113) at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(JdbcOdbc.java:3072) at sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:323) at sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174) at java.sql.DriverManager.getConnection(DriverManager.java:579) at java.sql.DriverManager.getConnection(DriverManager.java:243) at DBConnect.(DBConnect.java:18) at LoginForm.(LoginForm.java:31) at MainForm.(MainForm.java:23) at MainForm$10.run(MainForm.java:265) at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721) at java.awt.EventQueue.access$200(EventQueue.java:103) at java.awt.EventQueue$3.run(EventQueue.java:682) at java.awt.EventQueue$3.run(EventQueue.java:680) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:691) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
> 
> Dec 19, 2012 7:26:55 PM DBConnect SEVERE: null java.sql.SQLException: [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956) at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113) at sun.jdbc.odbc.JdbcOdbc.SQLDriverConnect(JdbcOdbc.java:3072) at sun.jdbc.odbc.JdbcOdbcConnection.initialize(JdbcOdbcConnection.java:323) at sun.jdbc.odbc.JdbcOdbcDriver.connect(JdbcOdbcDriver.java:174) at java.sql.DriverManager.getConnection(DriverManager.java:579) at java.sql.DriverManager.getConnection(DriverManager.java:243) at DBConnect.(DBConnect.java:18) at MasterEmployee.(MasterEmployee.java:33) at MainForm.(MainForm.java:24) at MainForm$10.run(MainForm.java:265) at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721) at java.awt.EventQueue.access$200(EventQueue.java:103) at java.awt.EventQueue$3.run(EventQueue.java:682) at java.awt.EventQueue$3.run(EventQueue.java:680) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:691) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
> 
> Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException at DBConnect.query(DBConnect.java:28) at MasterEmployee.(MasterEmployee.java:35) at MainForm.(MainForm.java:24) at MainForm$10.run(MainForm.java:265) at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721) at java.awt.EventQueue.access$200(EventQueue.java:103) at java.awt.EventQueue$3.run(EventQueue.java:682) at java.awt.EventQueue$3.run(EventQueue.java:680) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:691) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) BUILD SUCCESSFUL (total time: 2 seconds)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:22:09.390

前段时间我遇到了同样的问题，使用 .accdb 数据库。看起来 Java 6 很好地支持 .mdb 格式，但不太支持 .accdb 文件格式，或者至少它需要在 Windows 上安装 MS-Access 数据连接组件才能工作。

这可能是它无法在您的计算机上编译并在您的朋友计算机上编译的原因。

无论如何，我在 MSDN 上找到了它并且它有效。

```
class MyConnection 
{
  public static Connection getConnection() throws Exception 
  {
   Driver d = (Driver)Class.forName ("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
   Connection c = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver   (*.mdb, *.accdb)};DBQ=*.accdb");
return c;
} 
```

您需要从 Microsoft 网站下载并安装“MS-Access 数据连接组件”才能正常工作。

# php - 可能的 echo javascript 函数语法错误？

> ID：13952560
> 
> 赞同：0
> 
> 时间：2012-12-19T12:32:47.073
> 
> 标签：php, javascript

这一直让我感到压力。我正在调用一个 php 函数，该函数从用户输入的 url 中保存图像，然后回显一个 javascript 函数以将其设置为背景图像。除了将图像设置为背景外，一切工作正常。它保存在服务器和所有东西上。我没有收到任何 js 或 php 语法错误，浏览器只是说 404 not found 即使目录中有正确名称的文件。当我不包含会话变量作为图像名称的一部分时，它工作得很好。

在此先感谢，这可能只是我很愚蠢，因为我使用 php 已经有一段时间了。

```
<?php
session_start();

$src = $_GET['image'];
$contents= file_get_contents($src);
$file = fopen( pic.$_SESSION['id'].'.jpg','w+');
fwrite($file, $contents);
fclose($file);

echo '<script>';
echo 'var body = document.getElementsByTagName("body")[0];';
echo 'var source = "pic'.$_SESSION['id'].'.jpg";';
echo '$(body).css("background-image", "url(source)");';
echo 'alert(source);'; //just to test to make sure it returns the correct name
echo '</script>';

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:34:11.527

```
// -c-o-r-r-e-c-t---c-o-n-c-a-t--------------v -------v
echo '$(body).css("background-image", "url(" + source + ")");'; 
```

请注意，在服务器端呈现 JavaScript 代码时检查它总是好的。您可以随时在任何浏览器中查看*“源代码”*，或使用特殊的*开发工具*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:40:22.760

第一个错误：`fopen( pic.$_SESSION['id'].'.jpg','w+');`应该是`fopen( 'pic'.$_SESSION['id'].'.jpg','w+');`

然后也许尝试：`echo 'var source = "pic'.$_SESSION["id"].'.jpg";';`而不是`echo 'var source = "pic'.$_SESSION['id'].'.jpg";';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:34:41.887

你可能想要这个（让它像一个普通的 CSS 背景图像声明）：

```
$('body').css('background-image', 'url(' + source+ ')'); 
```

# django - unable to create superuser after syncdb

> ID：13952568
> 
> 赞同：5
> 
> 时间：2012-12-19T12:33:07.817
> 
> 标签：django, django-admin

I am quite new to django and web development. Learning from the "Definitive guide to Django" when creating superuser I get the following error (OS mac10.8.2 & django1.4.3)

```
Would you like to create one now? (yes/no): yes
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Library/Python/2.7/site-packages/django/core/management/commands/syncdb.py", line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/Library/Python/2.7/site-packages/django/core/management/sql.py", line 189, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/Library/Python/2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/Library/Python/2.7/site-packages/django/contrib/auth/management/__init__.py", line 73, in create_superuser
    call_command("createsuperuser", interactive=True, database=db)
  File "/Library/Python/2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Python/2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/Library/Python/2.7/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/Library/Python/2.7/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 496, in getdefaultlocale
    return _parse_localename(localename)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/locale.py", line 428, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename
ValueError: unknown locale: UTF-8 
```

from the definitive guide to django i am showing one of the models.

```
from django.db import models
class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()

    def __str__(self):
        return self.name

    class Meta:
        ordering = ['name'] 
```

setting.py database settings are:-

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'books',
        'USER': 'postgres',
        'PASSWORD': '******',
        'HOST': 'localhost',
        'PORT': '5432',
    }
} 
```

syncdb runs :

```
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table books_publisher
Creating table books_author
Creating table books_book_authors
Creating table books_book 
```

after yes to create superuser I get the error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:54:16.067

我认为这是您需要的：http: [//patrick.arminio.info/blog/2012/02/fix-valueerror-unknown-locale-utf8/](http://patrick.arminio.info/blog/2012/02/fix-valueerror-unknown-locale-utf8/)

DRTL：将`~/.bash_profile`这些行添加到您的文件中：

```
export LANG="en_US.UTF-8"
export LC_COLLATE="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
export LC_MESSAGES="en_US.UTF-8"
export LC_MONETARY="en_US.UTF-8"
export LC_NUMERIC="en_US.UTF-8"
export LC_TIME="en_US.UTF-8"
export LC_ALL="en_US.UTF-8" 
```

这是osx的错误。您可以在此处找到更多详细信息：[https ://code.djangoproject.com/ticket/5846](https://code.djangoproject.com/ticket/5846)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:55:22.773

看起来您的系统上没有安装正确的本地人。

在运行 syncdb 之前尝试输入以下内容 -

```
export LC_CTYPE=en_US.UTF-8
export LC_ALL=en_US.UTF-8 
```

（或任何你当地的人应该是）。

或者将这些行添加到您的`~/.bash_profile`

看看[这个问题](https://stackoverflow.com/questions/10891255/adding-a-database-to-the-django-project-using-sqlite3-with-python-2-7)

# .net - Wix 和 Windows 服务问题

> ID：13952571
> 
> 赞同：1
> 
> 时间：2012-12-19T12:33:13.453
> 
> 标签：.net, wcf, windows-services, wix

我有一个 Windows 服务项目，其中包含一个 WCF（selfhost）服务（几个 dll 文件和一个 app.config），这是用 Wix 安装的。

我添加了对我的 Wix 安装包的引用，这是 Product.wxs 文件的样子：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<Directory Id="TARGETDIR" Name="SourceDir">
    <Directory Id="MyAppINSTALLDIR" Name="MyApp 5Service">
        <Component Id="SampleServiceComponent" DiskId="1" Guid="6f51c0f3-776c-4aec-a200-1f199352c6c3" Win64="yes">
          <File Id="MyApp.WindowsService.exe" Name="MyApp.WindowsService.exe" Source="$(var.MyApp .WindowsService.TargetDir)\MyApp.WindowsService.exe"/>
          <ServiceInstall Id="InstallMyAppService" DisplayName="MyAppService" Name="MyApp .WindowsService.exe" Description="MyApp 5 Service - För effektivare och enklare operationsplanering" Account="NetworkService" ErrorControl="normal" Start="demand" Type="ownProcess" Vital="yes" />
          <ServiceControl Id="ControlMyAppService" Name="MyApp5.WindowsService.exe" Stop="uninstall" Remove="uninstall" />
        </Component>
    </Directory>
</Directory>

<Property Id="WIXUI_INSTALLDIR" Value="MyAppINSTALLDIR" />
<UIRef Id="WixUI_InstallDir" />

<Feature Id="ProductFeature" Title="Wix_MyApp.WindowsService" Level="1">
  <ComponentRef Id="SampleServiceComponent" />
</Feature>
<Media Id="1" Cabinet="SampleServiceComponent.cab" EmbedCab="yes" />
</Product> 
```

这项工作达到了一定程度，现在我有一些问题：

1.  现在它只包括我的主要 Windows 服务 exe 文件？我需要它来包含我的 Selfhost 的所有输出
2.  我需要能够在安装之前设置 Windows 服务项目的 app.config（它决定已安装服务的名称），是否可以在运行安装程序之前不使用压缩和设置文件，或者在安装过程中更容易获取信息安装并将其设置为 app.config？

编辑1：

要从输出中获取所有文件，我更改为这个，但它不起作用？：

```
 <File Id="MyApp.WindowsService.Output"
        Name="$(var.MyApp.WindowsService.TargetFileName)"
        Source="$(var.MyApp.WindowsService.TargetPath)"
        KeyPath="yes" />

      <ServiceInstall Id="InstallMyAppService" DisplayName="MyAppService" Name="MyApp.WindowsService.exe" Description="MyApp 5 Service - För effektivare och enklare operationsplanering" Account="NetworkService" ErrorControl="normal" Start="demand" Type="ownProcess" Vital="yes" />
      <ServiceControl Id="ControlMyAppService" Name="MyApp.WindowsService.exe" Stop="uninstall" Remove="uninstall" />

    </Component> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:45:56.393

1.  要将另一个文件添加到您的安装程序，只需向您的安装程序添加一个新文件`<Component>`并将其`<File>`放入其中。您还需要`<ComponentRef>`将该组件放入`<Feature>`.
2.  您可以在安装过程中使用`<XmlConfig>`或`<XmlFile>`元素来修改您的 app.config。

# asp.net-mvc - Value not displayed for [HiddenInput] in MVC

> ID：13952575
> 
> 赞同：0
> 
> 时间：2012-12-19T12:33:32.693
> 
> 标签：asp.net-mvc

I have a model property:

```
[HiddenInput(DisplayValue = false)]
public string MyProperty { get; set; } 
```

When I display the property, nothing is shown:

```
@Html.Display("MyProperty") 
```

Note that as this is for display, I'm not attempting to use:

```
@Html.Editor("MyProperty") 
```

It shows the value if I use:

```
@Html.Value("MyProperty") 
```

...but this bypasses the DisplayTemplates.

I'm guessing that the MVC rendering logic has something to stop displaying values with my aforementioned `[HiddenInput]` attribute, but if I wanted to do that explicitly I would use `[ShowForDisplay(false)]`.

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:39:54.983

`Display`函数“返回由字符串表达式表示的对象中每个属性的 HTML 标记”（请参阅​​ http://msdn.microsoft.com/en-us/library/ee310174(v=vs.98).aspx [）](http://msdn.microsoft.com/en-us/library/ee310174(v=vs.98).aspx)。

这意味着，如果您的字段是隐藏字段，它确实会吐出标记，但由于标记是隐藏字段的标记，您不会直接在页面上看到任何内容。你会得到类似的东西`<input type="hidden" value="your value" />`。如果您查看页面代码，您会看到标记在那里。

如果您只想在页面上显示一个值，您可以简单地执行`@Model.Property`. 如果要将值输入到控件中，可以调用许多`@Html`基于控件的任何一个，并将其输入`Model.Property`为默认值。

就个人而言，我不喜欢定义页面在模型中的外观的想法。对我来说，值本身应该由模型管理，但它的显示方式应该由您的视图本身决定。

* * *

我了解您在这里使用的是显示器而不是输入视图。尽管如此，该`HiddenInput`属性只是声明当为字段呈现编辑器时（例如 with `@Html.EditorFor()`），它应该是隐藏的输入 HTML 元素。如果您不尝试渲染编辑器，则此属性与结果无关，您可以`@Model.Property`像我之前提到的那样简单地在屏幕上渲染元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T15:29:05.267

您可以只尝试 [HiddenInput] 而不是 [HiddenInput(DisplayValue = false)]。这将自动显示显示的字段并作为标签进行编辑。希望这可以帮助。

# java - 在 Webdriver 中运行脚本时出错：此页面第 27 行的脚本中发生错误

> ID：13952576
> 
> 赞同：0
> 
> 时间：2012-12-19T12:33:38.763
> 
> 标签：java, webdriver, selenium-webdriver

在 Webdriver 中运行以下脚本时出现错误。错误消息：此页第 27 行的脚本中出现错误

```
package Example;

import java.util.Iterator;
import java.util.Set;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;

//import org.openqa.selenium.WebElement;
public class Script {

    public static void main(String args[])throws Exception
    {
        WebDriver driver = new InternetExplorerDriver();
        driver.get("https://www.700creditsolution.com");
        driver.manage().window().maximize();
        Set<String> windowids = driver.getWindowHandles();
        Iterator<String> iter= windowids.iterator();
        while(iter.hasNext())
        {
            System.out.println("Main Window ID :"+iter.next());
        }
        driver.findElement(By.id("lgnLogin_UserName")).clear();
        driver.findElement(By.id("lgnLogin_UserName")).sendKeys("skumara4");
        driver.findElement(By.id("lgnLogin_Password")).clear();
        driver.findElement(By.id("lgnLogin_Password")).sendKeys("Test1234");
        driver.findElement(By.id("lgnLogin_LoginButton")).click();
        Thread.sleep(5000L);

        windowids = driver.getWindowHandles();
        iter= windowids.iterator();
        String main_windowID=iter.next();
        String tabbed_windowID=iter.next();
        System.out.println("Popup Window ID :"+main_windowID);
        //switch over to pop-up window
        driver.switchTo().window(tabbed_windowID);
        System.out.println("Pop-up window Title : "+driver.getTitle());
        driver.findElement(By.xpath("//*[@id='BtnClose']")).click();
        Thread.sleep(1000);
        driver.switchTo().window(main_windowID);
        String msg= driver.findElement(By.xpath("//table[@id='lgnLogin']/tbody/tr/td/table/tbody/tr[4]/td")).getText();
        System.out.println(msg);
        Thread.sleep(1000);
        driver.quit();
    }
} 
```

打印弹出窗口标题后出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:01:54.473

基于复制粘贴您的代码，我得到您的第 27 行

```
Thread.sleep(5000L); 
```

显示错误的原因是因为有一个额外的“ `L`”

你可能想要的是

```
Thread.sleep(5000); # A 5 second wait 
```

# android - 内部错误：尚未设置重试接收器类

> ID：13952577
> 
> 赞同：8
> 
> 时间：2012-12-19T12:33:40.490
> 
> 标签：android, push-notification, google-cloud-messaging

我正在向移动设备实现一个简单的 gcm 推送服务器通知，但是当我从服务器推送时，通知不会显示在手机上。日志显示此错误

> 内部错误：尚未设置重试接收器类

有人可以告诉我如何解决这个问题或给我一个链接到一个 gcm 库来修复这个错误。我在网上搜索，谷歌说这个错误已在库版本中修复，但我在网上找不到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-10T07:27:45.120

此问题已由 Android-GCM 团队解决，但尚未发布。请`Non-released changes (available only on source-code repository)` [在此处查看](https://code.google.com/p/gcm/wiki/ReleaseNotes)。源代码可用，您将其作为库添加到您的项目中。

否则，解决此问题的简单方法是重新启动您的设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-29T06:08:07.093

这是 gcm.jar 库错误。从 android sdk 路径下载最新的 jar 文件：

**android-sdk-windows\extras\google\gcm\gcm-client\dist**

# java - “会话已过期”错误 - 在 IE8 中单击带有 webdriver 的按钮后

> ID：13952578
> 
> 赞同：1
> 
> 时间：2012-12-19T12:33:43.503
> 
> 标签：java, window, webdriver

使用 webdriver 在我的应用程序中单击一个按钮后，它在 IE8 中给我“抱歉..您的会话已过期”，我无法继续。但我可以手动完成。

现在要继续进行 webdriver 自动化，我必须先手动登录我的应用程序，然后它不会给我那个会话过期错误。

问题是我的应用程序只能在 IE 上运行。这个问题现在很引人注目。

现在我很困惑，这是一个 IE 问题（一些 cookie 处理）还是 webdriver 为会话或 cookie 处理提供了一些支持？

# java - 带有整数键的 Java Map：如何比较键？

> ID：13952579
> 
> 赞同：6
> 
> 时间：2012-12-19T12:33:45.193
> 
> 标签：java, collections

我只是想确保我的代码使用对象作为键是**安全的。**`Integer`这是一个简短的示例：

```
Integer int1 = new Integer(1337);
Integer int2 = new Integer(1337);

if (int1 == int2) {
    System.out.println("true");
} else {
    System.out.println("false");
}

if (int1.equals(int2)) {
    System.out.println("true");
} else {
    System.out.println("false");
}

Map<Integer, Object> map = new HashMap<Integer, Object>();
map.put(int1, null);
map.put(int2, null);

System.out.println(map.size()); 
```

代码将输出

```
false
true
1 
```

这就是我所期待的，参考文献不同，但它们彼此相等。现在我对地图的行为感兴趣。

*   是否保证像 Map 或 Set 这样的集合会通过内容而不是参考来比较键？
*   还是取决于实际的实现，例如`HashMap`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T12:35:36.140

该方法`equals`被调用，因此它是比较的内容。

关于你上面的两个问题：

给定两个对象`o1`and `o2`（为了简化，我们假设`o1!=null`and `o2!=null`），hasp map 最终必须确定它们是否具有相同的值。（最终，因为还`HaspMap`检查是否具有相同的哈希值，但这在您的问题的上下文中并不重要）。它通过调用方法来做到这一点。只要为假，这两个对象就被认为是两个不同的键。`o1``o2``equals()``o1.equals(o2)``HashMap`

`HashSet`还调用`equals()`以确定元素是否已包含在集合中，请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#add%28E%29](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#add%28E%29)。

`TreeMap`另一方面，必须比较两个对象，并确定它们是否相等，或者哪个更大。它通过调用`compareTo()`. 因此，它的返回值`o1.compareTo(o2)`很重要（或者，如果您使用构造函数[http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap %28java.util.Comparator%29](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap%28java.util.Comparator%29)，使用了比较器）。

因此，可以保证的是，在`HashMap`和中`HashSet`，该方法`equals()`用于区分对象，而在`TreeMap`，该方法`compareTo()`中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T12:50:12.277

Q1： - 是否保证像 Map 或 Set 这样的集合会通过内容而不是参考来比较键？

A1: - 不，Collection、Map 和 Set 是接口。他们唯一保证的是可能的方法的合同。

Q2: - 取决于实际的实现，比如HashMap？

A2：是的。类如何处理比较是开发人员的决定。

HashMap 使用两个东西来分配它们的对象

首先 - 是`Object#hashCode()`，用于计算指数。

第二个 - 是`Object#equals()`，那是使用然后散列colison有地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T12:36:41.537

如果您打开[实现](http://www.docjar.com/html/api/java/util/AbstractMap.java.html)，`java.util.AbstractMap`您可以看到键和值方程`Object#equals`在任何地方都使用方法检查。map 内部实际比较的内容取决于`Object#equals`方法的键/值实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T12:37:02.007

这里的 Integer 是 Waraper 的最终类，它是被覆盖的`equals()`方法，所以它只会比较内容。

所以如果使用 Integers are Any wrapper class 没有问题`Map`

假设如果您想使用 Custome Class 作为键您需要覆盖`equals() and hashcode()`方法以避免重复`Map`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T12:36:46.513

它实际上取决于您`equals()`为.`K``Map`

尝试对 a 做同样的`Map<Object,String>`事情，看看会发生什么（提示：为了`Object`'s 相等，它们实际上必须是同一个对象）

干杯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T12:37:06.360

第一个比较两个不同的对象（引用）--> false。

第二个比较（相等）这些对象的值 --> true

Hashmap 使用对象的 equals 和 hascode 方法来确定唯一键。所以你有两次插入相同的键，导致一个剩余的元素。第二个。看看[Map#put](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#put%28K,%20V%29) javadoc 看看发生了什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T12:41:16.847

在 hashmap 的情况下，使用 equals() 和 hashcode() 方法比较键。

在上面的示例中，hashcode() 和 equals() 都在 Integer 类中被覆盖。当 HashMap 比较两个键时，首先它获取该对象的 hashcode() ，然后对该对象调用 equals 方法，并且键具有相同的 hashcode 值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-23T07:32:49.187

将项目放入 HashMap（以及扩展的 HashSet）时，使用 hashCode（由简单的线性函数转换）来确定项目应放置在其内部集合中的位置。

Then in the determined location it searches for an identical object (among all items stored there) using (o1 == o2 || o1.equals(o2)), the #equals function is called if references differ, which is a performance improvement to simple #equals call. If identical item is found, its assigned value is replaced with the new one, if not, the new item is simply added to internal collection.

# json - 使用简单的 Jersey 应用程序返回 Json 时出错

> ID：13952581
> 
> 赞同：0
> 
> 时间：2012-12-19T12:33:54.633
> 
> 标签：json, solr, jetty, jax-rs

在这里，我试图从其中一项服务返回 JSON，但它往往会出错：

```
SEVERE: The registered message body writers compatible with the MIME media type are:
application/json ->
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App
*/* -> 
```

这是我的程序：

```
import org.apache.solr.common.SolrDocumentList;

    @POST
    @Path("/userQuery")
    @Consumes(MediaType.TEXT_PLAIN)
    @Produces(MediaType.APPLICATION_JSON)
    public SolrDocumentList userQuery(String p){
      int sizy;
      String stry;
      StringBuilder sb = new StringBuilder();
      SolrDocument doc = null;
      SolrDocumentList docList = null;

      List<String> arr = new ArrayList();
      StringTokenizer token = new StringTokenizer(p,",");
      while(token.hasMoreElements()){
          stry = token.nextToken();
          arr.add(stry);
      }

      Set<String> xrr = new HashSet<String>(arr);
      try {
          SolrQuery query = new SolrQuery(createQuery(arr));
          query.setIncludeScore(false);
          query.setFields("age_group,last_name,fav_count,first_name");
          query.setParam("wt", "json");
          System.out.println(query);
          QueryResponse qr = authorSearcher.query(query);
          if (qr != null) {
              docList = qr.getResults();
          }
      } catch (SolrServerException ex) {
          sLog.error();
      }
      return docList;
    } 
```

这里 docList 以 JSON 格式给出输出，注意 param : wt=json. 我在 jetty 上使用简单的 JAX-rs jersey 应用程序。如果我尝试将 docList 作为字符串返回，它会返回一个期望的结果，但 JSON 返回失败。

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <description>Multiple packages, separated by semicolon(;), can be specified in param-value</description>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>cribservice</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/webresources/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:01:42.640

您需要一个库来进行 json<>java 转换。例如，您可以使用[Genson](http://owlike.github.io/genson/)。

您只需要将 jar 放入您的类路径中，一切都会正常工作。

# php - session_id() 和 session_name() 到底是什么？在下面的代码中解释它们是如何被使用的

> ID：13952582
> 
> 赞同：8
> 
> 时间：2012-12-19T12:33:58.607
> 
> 标签：php, session, cookies

```
?php
function destroy_session_and_data() {
session_start();
$_SESSION = array();
if (session_id() != "" || isset($_COOKIE[session_name()]))
setcookie(session_name(), '', time() - 2592000, '/'); 
session_destroy();
} ?> 
```

我知道上面的代码用于终止会话，但我无法理解 if 条件和 setcookie 命令的必要性。

您能否解释一下究竟什么是 session_id() 和 session_name()。

一个清晰的解释将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:38:04.193

PHP 使用 cookie 来管理会话；具体来说，通过在 cookie 中为该会话设置一个识别键/值对。

*   session的名字就是cookie的名字；基于 PHP 的网站的默认名称是`PHPSESSID`. [`session_name()`](https://www.php.net/manual/en/function.session-name.php)返回会话名称，或者，如果传递了参数，则更新会话名称。
*   cookie 中的键/值对描述了会话 id；键表示它是会话标识符，值是会话标识符本身。[`session_id()`](https://www.php.net/manual/en/function.session-id.php)返回会话 ID，或者，如果传递了参数，则更新会话 ID。

问题中的代码检查请求是否传递了会话：首先通过启动/重新激活会话[`session_start()`](https://www.php.net/manual/en/function.session-start.php)，然后检查与会话名称匹配的现有 cookie。如果代码找到了，它会强制浏览器通过将过期日期设置为过去某个时间来删除 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:42:20.347

从手册：

`session_id()`用于获取或设置当前会话的会话 ID。

`session_name()`返回当前会话的名称。如果给出了名称，`session_name()` 将更新会话名称并返回旧的会话名称。

`id`用作存储会话的数据库的主键（唯一）（默认情况下仅在磁盘上的文件中），它`name`只是一个名称。我不确定是否`name`需要独一无二。因此，在这种情况下，代码会检查 session_id（从浏览器 cookie 获取数据并在本地数据库中查找）或者是否存在具有给定 session_name 的 cookie。如果是这样，它将 cookie（客户端）的到期时间设置为 43.2 分钟前，并销毁会话（服务器端）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:37:19.353

要知道访问者处于什么“会话”中，需要设置一个 cookie。只要该 cookie 可用，用户将保持在同一会话中。要结束会话，需要将其删除（这解释了 setcookie().

session_id() 和 session_name() 在 php 手册中

# android - 需要帮助显示来电者的位置

> ID：13952586
> 
> 赞同：2
> 
> 时间：2012-12-19T12:34:19.973
> 
> 标签：android

我正在开发一个 android 应用程序，当来电屏幕上来电时显示来电者的位置。我成功地从我的算法中获取了位置，但我无法在默认传入屏幕上显示它。

如果我使用 A toast，那么它只会出现 1 或 2 秒，我希望信息应该出现直到接听电话。

我应该使用 Toast、Notification 或其他东西，以及如何使用。

简而言之，在接听电话之前，如何在来电屏幕上显示某些内容

# php - 如何检查一个数组的值是否是另一个数组的键？

> ID：13952589
> 
> 赞同：2
> 
> 时间：2012-12-19T12:34:42.237
> 
> 标签：php, arrays, multidimensional-array

> **可能重复：**
> [来自数组的 PHP 值，其中键在另一个数组中](https://stackoverflow.com/questions/13904118/php-values-from-array-where-key-is-in-another-array)

正如问题中所说。

我想知道的：

```
$xyz = array (
    [0] => 'orange',
    [1] => 'apple'
);

$pqr = array (
    ['orange'] => 'this data'
); 
```

首先，如何检查一个数组的值是否是另一个数组的键并通过链接获取数据？如果我们使用 PHP 5.4 或 php 5.5 增强功能来获得这个数组的解决方案，我很好。

任何帮助，不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:50:08.157

试试这个：

```
$foo = array('orange', 'apple');    
$bar = array('orange' => 'data');

$result = array_filter($foo, function($value) use ($bar) { return isset($bar[$value]); });

foreach($result as $foobar) {
    echo (isset($bar[$foobar])) ? $bar[$foobar] : NULL; // be on the safe side
    echo $bar[$foobar]; // should be enough
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:39:17.127

我认为循环遍历所有内容旁边没有默认方法：

```
foreach($x in $xyz){
  if(isset($pqe[$x])){ echo $pqe[$x]; }
} 
```

# php - 链接到同一页面时出现问题 - 如果带有 _GET 的语句不起作用

> ID：13952590
> 
> 赞同：0
> 
> 时间：2012-12-19T12:34:42.613
> 
> 标签：php, url, dynamic, get

我有一些看起来像这样的代码：

```
<div class="container">
    <aside class="sidebar">
        <a href="index.php?Cat=members"><h3>Members</h3></a>
        <a href="index.php?Cat=prodcat"><h3>Product Categories</h3></a>
    </aside>
<article class="content">
    <section>
        <?php
        echo $_GET["Cat"];
        if ($_GET["Cat"] = 'members'){
            $membership = New Membership();
            $membership->member_List($sort);
        }
        else if ($_GET["Cat"] = 'prodcat'){
            $membership = New Membership();
            $membership->prodcat_List();
        }
        else {
        echo 'Welcome';
        }
        ?>
       </section>
    </article>
</div> 
```

应该发生的是，当链接成员被按下时。该页面应自行重新加载并仅显示从 member_list 中返回的内容。或者，如果随后按下产品类别链接 - 它应该显示从 prodcat_list 返回的任何内容。

问题是。一旦我加载索引页面，从 member_list 返回的任何内容都会立即出现。尽管 URL 中没有声明“Cat”。一旦发生这种情况，我就无法使用链接来更改它。

如您所见，我有 $_GET["Cat"] 的回声。每次页面更改时它都会更改。

但是页面的其余部分不是。我不知道为什么。我也不知道如何解决这个问题。如果我交换 if/else if 语句。我可以让 prodcat_list 出现。但后来我在尝试让 member_list 出现时遇到了同样的问题。NFI 发生了什么。我只是 PHP 的业余爱好者。不过每天都在变好。但我还有很长的路要走。

编辑

我是个白痴。谢谢大家！==

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:37:31.477

这

```
if ($_GET["Cat"] = 'members'){ 
```

应该是这样的

```
if ($_GET["Cat"] == 'members'){ 
```

请注意，`==`而不是您的`=`! 稍后在其他 if 子句中也是如此。

如果你只使用一个`=`，你实际上是在做一个作业。因此，在您的情况下，在 if 子句中，您尝试将值分配给`member`variable `$_GET["Cat"]`。由于该分配没有任何问题，因此它被执行并且 if 子句的计算结果为`true`。

对于比较，请使用`==`或`===`。单曲`=`仅用于作业！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:45:39.127

`=`意味着赋值`==`意味着比较。如果要`$_GET['Cat']`与另一个字符串进行比较，则必须使用比较运算符。

还有`index.php`第一次打开的时候，使用`$_GET['Cat']`会产生一个通知（未定义的索引），因为`$_GET['Cat']`不会被定义。用来`if(isset($_GET['Cat']))`解决这个问题。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:37:36.023

您的代码有一个错误：

在 if 语句中，您应该使用双 "=" für 比较

```
if ($_GET["Cat"] == 'prodcat') 
```

# php - 无法将 Couchbase PHP 客户端库 v.1.1.1 安装到 CentOS 5.6

> ID：13952591
> 
> 赞同：0
> 
> 时间：2012-12-19T12:34:43.197
> 
> 标签：php, client, couchbase, centos5

我有两台服务器开发和生产，它们非常相似。都有

```
CentOS 5.6
PHP 5.2.17 
```

这是安装列表：

```
yum list installed | egrep 'couch|php|mem'
couchbase-server.x86_64                  1.8.0r-1                      installed
libcouchbase-devel.x86_64                2.0.1-1                       installed
libcouchbase1.x86_64                     1.0.1-1                       installed
libcouchbase2.x86_64                     2.0.1-1                       installed
libcouchbase2-core.x86_64                2.0.1-1                       installed
libcouchbase2-libev.x86_64               2.0.1-1                       installed
libmemcached.x86_64                      1.0.4-3.el5                   installed
memcached.x86_64                         1.4.10-1.el5                  installed
php.x86_64                               5.2.17-7.el5                  installed
php-cli.x86_64                           5.2.17-7.el5                  installed
php-common.x86_64                        5.2.17-7.el5                  installed
php-devel.x86_64                         5.2.17-7.el5                  installed
php-eaccelerator.x86_64                  2:0.9.6.1-1.el5               installed
php-fpm.x86_64                           5.2.17-7.el5                  installed
php-mcrypt.x86_64                        5.2.17-7.el5                  installed
php-mysql.x86_64                         5.2.17-7.el5                  installed
php-odbc.x86_64                          5.2.17-7.el5                  installed
php-pdo.x86_64                           5.2.17-7.el5                  installed
php-pear.noarch                          1:1.9.1-1.el5                 installed
php-pecl-memcache.x86_64                 3.0.6-1.el5                   installed
php-pecl-xdebug.x86_64                   2.1.2-1.el5                   installed
php-xml.x86_64                           5.2.17-7.el5                  installed 
```

但是我在将 Couchbase PHP 客户端库 v.1.1.1 安装到生产服务器时遇到了问题。在 dev 上我安装了它并且它工作正常。但是在生产服务器上我得到了这个：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/couchbase.so' - /usr/lib64/php/modules/couchbase.so: undefined symbol: php_json_encode in Unknown on line 0 
```

我已经遇到过这样的错误，并且知道问题可能是加载 php 模块的优先级。所以我在 json.ini 文件中的 json.so 之后设置加载 couchbase.so。但问题依然存在。

来自 Couchbase 的人说要将 php 更新到 5.3 版，但我不能这样做，因为我们使用的某些软件无法正常与 php 5.3 一起使用。

有没有人有一些想法，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T08:21:50.177

尝试在 php.ini 中显式确定 json.so 和 couchbase.so 的顺序，如下所示：

```
extension=json.so
extension=couchbase.so 
```

这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:31:50.620

修复了从 centalt repo 安装 php-5.2.17-24 的问题。

```
cat > /etc/yum.repos.d/centalt.repo << EOF
[CentALT]
name=CentALT Packages for Enterprise Linux 5 - $basearch
baseurl=http://centos.alt.ru/repository/centos/5/$basearch/
enabled=1
gpgcheck=0
EOF

yum install php-common 
```

# java - 使用 java 而不是 sql 获取当前数据库 sysdate

> ID：13952598
> 
> 赞同：2
> 
> 时间：2012-12-19T12:35:17.683
> 
> 标签：java, sql, oracle, sysdate

可以使用此查询获取 oracle 数据库的当前系统日期，

```
SELECT sysdate FROM dual;

select (sysdate - to_date('1970-01-01 00:00:00','YYYY-MM-DD HH24:MI:SS')) * 86400 unix_ts from dual; 
```

分别返回 19-DEC-12 和 1355949236.999999999999999999999999999998 格式。

**如果我需要它从*java*的角度和 unix_time 格式获取它怎么办？**

1）图书馆名称是什么？

例如：

```
import java.util.Date;
import java.text.SimpleDateFormat;
import java.text.DateFormat;
import com.portal.pcm.fields.TmFldRefundIndLastModDate; 
```

2) 怎么称呼它？

例如：

```
if(sysdate >= a_date_which_is_in_unix_time_format){...} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:40:18.180

我想你想要：

```
long seconds = new java.util.Date().getTime() / 1000; 
```

请参阅[Date#getTime()的文档](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTime%28%29)

# .net - '/' 附近的语法不正确

> ID：13952601
> 
> 赞同：2
> 
> 时间：2012-12-19T12:35:25.983
> 
> 标签：.net, sql, vb.net

```
cmSQL = New SqlCommand("UPDATE AdBanner SET AdBannerTitle='" & txTitle.Text & "',AdBannerFileUrl=/Images/'" & fileUpload.FileName & "',AdBannerTargerUrl='" & txTargetUrl.Text & "',AdBannerIsActive='" & chkBox.Checked & "' WHERE AdBannerID='" & lblBannerId.Text & "'", cnSQL) 
```

错误：“/”附近的语法不正确。

更新记录时出现该错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:37:38.793

您必须在前面加上引号 ( `'`) `/Images/`。将您的声明更改为：

```
cmSQL = New SqlCommand("UPDATE AdBanner SET AdBannerTitle='" & txTitle.Text _
        & "',AdBannerFileUrl='/Images/" & fileUpload.FileName _
        & "',AdBannerTargerUrl='" & txTargetUrl.Text _
        & "',AdBannerIsActive='" & chkBox.Checked _
        & "' WHERE AdBannerID='" & lblBannerId.Text & "'", cnSQL) 
```

当你完成这些后，我建议你立即开始学习[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。这是一个简单但危险的安全隐患。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:39:29.623

*直接*的问题是您没有为`AdBannerFileUrl`;创建有效的文字。然而！你此刻的做法是**致命**的。请参阅“SQL 注入”。你应该参数化它，然后它变成：

```
cmSql = new SqlCommand("UPDATE AdBanner SET AdBannerTitle=@Title,AdBannerFileUrl=@FileUrl,AdBannerTargerUrl=@TargetUrl,AdBannerIsActive=@IsActive WHERE AdBannerID=@ID", cnSQL) 
```

然而！然后，您必须为每个参数添加参数：

```
cmSql.Parameters.AddWithValue("@Title", txtTitle.Text);
cmSql.Parameters.AddWithValue("@FileUrl", "/Images/" + fileUpload.FileName);
cmSql.Parameters.AddWithValue("@TargetUrl", txTargetUrl.Text);
cmSql.Parameters.AddWithValue("@IsActive", chkBox.Checked);
cmSql.Parameters.AddWithValue("@ID", lblBannerId.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:46:56.850

您缺少`'`前面的`/Images/`部分，因此 SQL Server 获取的 SQL 格式不正确。

但是，在当今时代，在服务器上执行基于连接的 SQL 是，坦率地说，是愚蠢的，尤其是在使用未经验证的用户提供的值（如 txTitle.Text）时

更好的方法是：

```
cmSQL = New SqlCommand("UPDATE AdBanner SET AdBannerTitle=@AdBannerTitle" _
    & ", AdBannerFileUrl=@AdBannerFileUrl" _
    & ", AdBannerTargerUrl=@AdBannerTargerUrl" _
    & ", AdBannerIsActive=@AdBannerIsActive" _
    & " WHERE AdBannerID=@AdBannerID", cnSQL)
cmSQL.CommandType = CommandType.Text;

cmSQL.Parameters.AddWithValue("@AdBannerTitle", txTitle.Text)
cmSQL.Parameters.AddWithValue("@AdBannerFileUrl", "/Images/" & fileUpload.FileName)
cmSQL.Parameters.AddWithValue("@AdBannerTargerUrl", txTargetUrl.Text)
cmSQL.Parameters.AddWithValue("@AdBannerIsActive", chkBox.Checked)
cmSQL.Parameters.AddWithValue("@AdBannerID", lblBannerId.Text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:49:27.483

你的单引号放错了位置。

你的代码必须是

```
 cmSQL = New SqlCommand("UPDATE AdBanner SET AdBannerTitle='" & txTitle.Text & "',AdBannerFileUrl='/Images/" & fileUpload.FileName & "',AdBannerTargerUrl='" & txTargetUrl.Text & "',AdBannerIsActive='" & chkBox.Checked & "' WHERE AdBannerID='" & lblBannerId.Text & "'", cnSQL) 
```

# objective-c - 访问存储在 ios 设备上的文本文件

> ID：13952608
> 
> 赞同：0
> 
> 时间：2012-12-19T12:35:47.750
> 
> 标签：objective-c, ios, nsfilemanager

我正在考虑制作一个应用程序，该应用程序将获取存储在 iDevice 上的所有文本和 pdf 文件的列表，例如 iphone、ipod 或 ipad。用户将有一个用于听写所选文件的选项。是否可以访问存储在设备中的所有此类文件？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:43:22.473

无法列出设备上存储的所有（文本和 pdf）文件。您可以做的最好的事情是将您的应用程序注册为打开该类型文件的应用程序，以便您的应用程序可用于从另一个应用程序打开文件。

您可能想查看[文件系统编程指南](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010672)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:38:07.257

不，文件是按应用程序存储的，并且只能由创建和维护文件的应用程序访问。

你可以告诉系统你的应用打开了特定类型的文件。

# wpf - 在 wpf 中，即使选择没有改变，如何确保我获得组合框的选定索引

> ID：13952610
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:35:57.160
> 
> 标签：wpf, user-interface

我正在开发一个模块，我想知道用户在组合框中选择了哪个项目，我正在使用 ComboBox 的 SelectionChanged 事件，但是如果我不将选择更改为列表中的另一个项目，它不会触发，所以简而言之是哪个事件我应该使用以便获得用户的当前选择，尽管他可能会或可能不会更改选择

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:39:32.283

解决方案是：为每个 comboBoxItem 添加 PreviewMouseUp 处理程序，因此如果用户更改选择/他没有更改意味着再次选择相同的项目，您仍然会收到通知，感谢@Clemens 指导......

# ruby-on-rails - RMagick > ImageMagick // 识别不在 Rails 应用程序中工作

> ID：13952611
> 
> 赞同：1
> 
> 时间：2012-12-19T12:35:58.260
> 
> 标签：ruby-on-rails, imagemagick, paperclip, rmagick, identify

我真的不明白的东西......</p>

当我做一个

```
$ convert file.jpg file2.jpg 
```

一切正常。它过去也可以与 rails 应用程序中的回形针完美配合。

但是对于使用相同以前的 gemfile 设置的新部署的 rails 应用程序（3.2.9），我现在得到了 wollowing 错误

```
identify: ipossible to open image `file':  @ error/blob.c/OpenBlob/2498.
identify: no delegate to decode this image format `file' @ error/constitute.c/ReadImage/532. 
```

似乎它与一些 rvm/ruby 安装有关，但我只是不知道从哪里开始

# c - 如何调用一个返回标志并在内部将此标志重新设置为 false 的函数？

> ID：13952614
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:36:12.737
> 
> 标签：c

想象一下下面的代码：

```
static char myFlag;

void setFlagTo_1(void)
{
  myFlag = 1;
}

char hasFlagChangedTo_1(void)
{
  char retval = myFlag;

  myFlag = 0;

  return retval;
} 
```

如何描述名为`hasFlagChangedTo_1`. 你会如何称呼/描述这个动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:38:03.317

我会这样写：

```
void clearFlag(char *oldValue)
{
    if (oldValue)
        *oldValue = myFlag;
    myFlag = 0;
} 
```

当您调用该函数时，您可以通过`NULL`. 但是，如果您传递一个指向变量的指针，您可以命名该变量，以便调用站点上的代码清楚地表明正在发生的事情。

```
clearFlag(&oldValue); 
```

使用返回值的函数的问题在于，您通常使用返回值的名称来命名这些函数。但是，如果该功能具有强烈的副作用，则不会在名称中体现出来。

当有副作用时，使用`void`描述副作用的函数和名称通常是个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:40:32.890

我会调用这样的函数`retrieveFlag`。

当它在那里时，你会检索它，所以之后它就不再存在了。当它不存在时，它返回 false。

**编辑：**或者只是称呼它`getAndResetFlag`-完全按照锡上所说的那样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:42:03.763

我将其称为`testAndClear`testAndSet 函数的模拟...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:40:54.913

ResetFlag , 因为它正在重置标志值

# javascript - 网页上的精确 keydown 事件，延迟最小

> ID：13952621
> 
> 赞同：1
> 
> 时间：2012-12-19T12:36:30.520
> 
> 标签：javascript, actionscript-3, flash, keyboard-events

> **可能重复：**
> [删除 javascript 中的按键延迟](https://stackoverflow.com/questions/3691461/remove-key-press-delay-in-javascript)

我需要在网页上以最小的时间延迟捕获 keydown 事件。过去两天我对这个问题的所有决定是延迟在 Javascript 中是特定于平台的，并且 Flash 也有很大的延迟。在 OS X 中，所有浏览器对 keydown (js) 的响应时间最短，这对我来说没问题，但在 Windows 中，这很糟糕，尤其是在 Firefox 中。所以，最后一个解决方案是专注于 flash 对象并将 KEY_DOWN 事件从它收集到 js，但正如我之前提到的，这种方法也有延迟，对于不同的平台可能不是恒定的。

我的问题是下一个：是否可以在所有浏览器和平台中以最小的延迟处理 keydown 事件？

谢谢！

# mysql - 在日期范围内包含零值的日期

> ID：13952623
> 
> 赞同：1
> 
> 时间：2012-12-19T12:36:37.730
> 
> 标签：mysql, gaps-and-islands

![我的数据库记录](../Images/a15f1fe2cab7c93f41322bb1f9bf1f23.png)

```
SELECT * FROM (
    SELECT t1.eventId,t1.start_date,t1.end_date, COUNT(*) pos FROM events t1
    LEFT JOIN events t2 ON t1.start_date = t2.start_date AND t1.eventId <= t2.eventId
    WHERE t1.start_date BETWEEN  '2012-12-18' AND '2012-12-24'
    GROUP BY t1.eventId,t1.start_date
    ORDER BY t1.start_date,pos ASC
    ) t
WHERE pos <= 3; 
```

![在此处输入图像描述](../Images/9de0036d2e323ec17688dd86c46f43f2.png)

为什么开始日期 2012-12-21 和 2012-12-24 不存在，

如果 start_date 不存在，我需要一个 null 或空值

注意：我的数据库中没有 21 和 24 的记录，但我的结果中需要一个空值

# jquery - 使用 Ajax 源和行分组“擦除”Jquery 数据表

> ID：13952626
> 
> 赞同：2
> 
> 时间：2012-12-19T12:36:41.460
> 
> 标签：jquery, datatables

我在使用 jQuery 数据表时遇到问题。在某些时候，我需要从表中卸载所有数据。挑战在于该表由 2 个可见列和 2 个隐藏列组成。

桌子：

```
<table id="resTable">
    <thead>
        <tr>
            <th>Parameter name</th>
            <th>Parameter default value</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

jQuery：

```
resTable = $('#resTable').dataTable({
    'bPaginate': false,
    'bDestroy': true,
    'bAutoWidth': false,
    'bFilter': false,
    'aaSorting': [[0, 'asc']],
    'bInfo': false,
    'bServerSide': true,
    'sAjaxSource': $('#resTable').attr('data-action-url'),
    'fnServerParams': function (aoData) {
        aoData.push({ 'name': 'stringAppID', 'value': selectedApp['DT_RowId'] });

    },
    'aoColumns': [  { 'mData': 'ParName', 'bSortable': false },
                    { 'mData': 'ParDefVal', 'bSortable': false },
                    { 'mData': 'ResId', 'bSortable': false, 'bVisible': false },
                    { 'mData': 'ResName', 'bSortable': false, 'bVisible': false }
                 ]
                 ,
    'fnDrawCallback': function (oSettings) {
        if (oSettings.aiDisplay.length == 0) {
            return;
        }

        var nTrs = $('tbody tr', oSettings.nTable);
        var iColspan = nTrs[0].getElementsByTagName('td').length;
        var sLastGroup = "";
        for (var i = 0; i < nTrs.length; i++) {
            var iDisplayIndex = oSettings._iDisplayStart + i;
            var sGroup = oSettings.aoData[oSettings.aiDisplay[iDisplayIndex]]._aData['ResName'];
            var sGroupId = oSettings.aoData[oSettings.aiDisplay[iDisplayIndex]]._aData['ResId'];
            if (sGroup != sLastGroup) {
                var nGroup = document.createElement('tr');
                nGroup.className = "Resource";
                nGroup.id = sGroupId;
                var nCell = document.createElement('td');
                nCell.colSpan = iColspan;
                nCell.innerHTML = sGroup;
                nGroup.appendChild(nCell);
                nTrs[i].parentNode.insertBefore(nGroup, nTrs[i]);
                sLastGroup = sGroup;
            }
        }
    },
    'aaSortingFixed': [[0, 'asc']],
    'aaSorting': [[1, 'asc']],
    'sDom': 'lfr<"giveHeight"t>ip'
}); 
```

这就像一个魅力。但是当我尝试加载一个空的新表时，我遇到了各种各样的问题。

重新加载代码：

```
resTable = $('#resTable').dataTable({
    'bPaginate': false,
    'bAutoWidth': false,
    'bFilter': false,
    'bInfo': false,
    'bDestroy': true
});
resTable.fnClearTable(); 
```

由于某种原因，数据被保留，当 jQuery 尝试读取第 2 列中的数据时，它会报告错误。我一直无法找到擦除数据的方法。

我有类似的表格可以使用这种方法。但他们没有行分组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:10:25.587

原来解决方案非常简单。不敢相信我一开始没有看到这个...

只是在重新加载代码中添加了一个空数据源：

```
'aaData': [] 
```

所以重新加载代码如下所示：

```
resTable = $('#resTable').dataTable({
    'bPaginate': false,
    'bAutoWidth': false,
    'bFilter': false,
    'bInfo': false,
    'bDestroy': true,
    'aaData': []
});
resTable.fnClearTable(); 
```

以前的数据现在被擦除了。

# jsp - javax.el.PropertyNotFoundException：属性 'foo' 在 java.lang.Boolean 类型上不可读

> ID：13952630
> 
> 赞同：27
> 
> 时间：2012-12-19T12:36:54.113
> 
> 标签：jsp, boolean, el, propertynotfoundexception

我有一个看起来像这样的类：

```
public class ScoreDefinition {

    protected Boolean primary;

    public Boolean isPrimary() {
        return primary;
    }

    public void setPrimary(Boolean value) {
        this.primary = value;
    }

} 
```

我正在尝试`primary`像这样访问它在 EL 中的属性：

```
<c:forEach var="score" items="${scores}">
    <input type="checkbox"
           value="${score.primary}"
           name="someName"
           class="textField"/>
</c:forEach> 
```

但我得到了例外：

```
javax.el.PropertyNotFoundException: Property 'primary' not readable on type java.lang.Boolean
    at javax.el.BeanELResolver$BeanProperty.read(BeanELResolver.java:280)
    at javax.el.BeanELResolver$BeanProperty.access$000(BeanELResolver.java:230)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:81)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:123)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
    at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)
    at org.apache.jsp.WEB_002dINF.views.administer.projectBlocks_jsp._jspx_meth_c_005fforEach_005f2(projectBlocks_jsp.java:806)
    at org.apache.jsp.WEB_002dINF.views.administer.projectBlocks_jsp._jspx_meth_c_005fif_005f2(projectBlocks_jsp.java:709)
    at org.apache.jsp.WEB_002dINF.views.administer.projectBlocks_jsp._jspx_meth_form_005fform_005f0(projectBlocks_jsp.java:245)
    at org.apache.jsp.WEB_002dINF.views.administer.projectBlocks_jsp._jspService(projectBlocks_jsp.java:150)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.groupgti.webclient.filter.SecurityFilter.doFilter(SecurityFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.groupgti.webclient.filter.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:43)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

我无法更改此类，因为它是从 WSDL 文件生成的。所以问题是我怎样才能解决这个问题，而不使用任何自定义 EL 函数来转换`Boolean`或`String`不将此对象转换为我的？是否可以在不进行任何其他修改的情况下以某种方式在 EL 中读取此属性？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-19T12:38:05.043

`is`前缀是 for `boolean`only，不是for `Boolean`。

您有 2 个选项：

1.  使用`boolean`而不是`Boolean`.

2.  或者，将方法重命名`isPrimary()`为`getPrimary()`.

至于自动生成错误方法的[JAXB 错误](http://www.mojavelinux.com/blog/archives/2006/09/the_great_jaxb_api_blunder/)，您需要至少升级到 JAXB 2.1.13 或根据此[JAXB 文档](http://jaxb.java.net/2.2.4/docs/xjc.html)`-B-enableIntrospection`添加到 wsimport 调用。

### 也可以看看：

*   [JavaBeans 规范 - 第 8.3.2 章](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)
*   [Java 表达式语言如何解析布尔属性？（在 JSF 1.2 中）](https://stackoverflow.com/questions/3236929/how-does-java-expression-language-resolve-boolean-attributes-in-jsf-1-2/)
*   [JSF 2 复选框和布尔 getter](https://stackoverflow.com/questions/11157037/jsf-2-checkboxes-and-boolean-getters)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-20T18:28:29.940

您可以像这样直接调用**score.isPrimary()**方法：

```
<c:forEach var="score" items="${scores}">
<input type="checkbox"
       value="${score.isPrimary()}"
       name="someName"
       class="textField"/>
</c:forEach> 
```

# opengl - Opengl 2D绘图不平行于屏幕

> ID：13952632
> 
> 赞同：0
> 
> 时间：2012-12-19T12:37:00.057
> 
> 标签：opengl, 2d, transformation, homography

我认为我绘制的 2D 平面与屏幕不平行。

首先，在我的调整窗口大小函数中，我放了：

```
static void Resize(int w, int h)
{
width = w;
height = h;

glViewport(0, 0, width, height);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
float32 ratio = width / height;

b2Vec2 extents(ratio * 25.0f, 25.0f);
extents *= viewZoom;

b2Vec2 lower = settings.viewCenter - extents;
b2Vec2 upper = settings.viewCenter + extents;
gluOrtho2D(lower.x, upper.x, lower.y, upper.y);
} 
```

这是我初始化opengl的方法。

```
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA );
glutInitWindowSize(width, height);
mainWindow = glutCreateWindow("window"); 
```

和绘图功能：

```
void drawScene() {

    glClear(GL_COLOR_BUFFER_BIT );

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    glColor3f(1.0f, 1.0f, 1.0f);

    glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f);
    glVertex2f(cords[0].x,cords[0].y);
    glTexCoord2f(1.0f, 0.0f);
    glVertex2f(cords[1].x,cords[1].y);
    glTexCoord2f(1.0f, 1.0f);
    glVertex2f(cords[2].x,cords[2].y);
    glTexCoord2f(0.0f, 1.0f);
    glVertex2f(cords[3].x,cords[3].y);
    glEnd();

    glDisable(GL_BLEND);
    glDisable(GL_TEXTURE_2D);

    glutSwapBuffers();
} 
```

我认为代码没有问题，因为我已经为 ModelView 和 Projection 加载了标识。我画的结果是，如果我的矩形与水平线平行，那么它就是一个矩形，当转动某个角度时，它就变成了倾斜的。似乎我正在绘制的飞机向后倾斜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:27:25.370

事情很简单：

```
float32 ratio = width / height; 
```

因为宽度和高度都是 int，因此比率不准确。

如果转换为浮动，则它变得正常。

# c# - 杀死进程和关闭进程有什么区别？

> ID：13952635
> 
> 赞同：70
> 
> 时间：2012-12-19T12:37:03.600
> 
> 标签：c#, process

`Process.Close()`当我启动一个进程并想关闭这个进程时，和有什么区别`Process.Kill()`？

我之所以问，是因为我有一个应用程序开始使用 Wireshark 捕获数据包，并通过命令行使用`Windows = hidden`. 所以当我想停止捕获时，我会终止进程。所以有时捕获打开时会出现最后一个数据包在中间被剪切的错误，所以我想知道`close()`之前使用`kill()`可以解决这个问题吗？

当我开始捕获时，我可以通过按 Ctrl + C 来关闭它，但在我的情况下，我以隐藏状态打开窗口，我可以通过我的代码做类似的事情吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-19T12:50:06.933

> `Process.Close()`和 和有什么区别`process.Kill()`？

手册对此非常清楚：

[`Process.Close()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx)：

> 如果进程正在等待，Close 方法会导致进程停止等待退出，关闭进程句柄并清除特定于进程的属性。Close 不会关闭标准输出、输入和错误读取器和写入器，以防它们被外部引用。[即进程本身继续运行，您无法再使用您的`Process`实例控制它]

[`Process.Kill()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)：

> Kill 强制终止进程，而 CloseMainWindow 只请求终止。[...] 通过调用 CloseMainWindow 退出进程的请求不会强制应用程序退出。应用程序可以在退出前要求用户验证，也可以拒绝退出。要强制应用程序退出，请使用 Kill 方法。CloseMainWindow 的行为与用户使用系统菜单关闭应用程序主窗口的行为相同。因此，通过关闭主窗口来退出进程的请求不会强制应用程序立即退出。

[`Process.CloseMainWindow`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow.aspx)：

> 通过向其主窗口发送关闭消息来关闭具有用户界面的进程。

* * *

至于您的编辑：

> 我问是因为我有应用程序开始使用wireshark 和命令通过Windows = hidden 的命令行捕获数据包。

[为此，请使用 WinPcap API](http://www.winpcap.org/docs/docs_40_2/html/main.html)或[Pcap.Net 库，而](http://pcapdotnet.codeplex.com/)不是 Wireshark。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-19T12:41:23.910

`Kill`要求**系统**毫不客气地终止进程（通过调用 Windows [TerminateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)系统调用）。这类似于任务管理器中的结束进程。

[Close](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx)关闭 .NET 中进程的句柄，但实际上并不触及进程本身。`Close`也被`Dispose`. 请参阅Jon Skeet 的[这个答案](https://stackoverflow.com/a/673038/172029)。

第三个选项是[CloseMainWindow](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow.aspx)，它*通过*要求关闭主窗口来优雅地关闭程序。这类似于右键单击任务栏上的程序并选择关闭。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-19T12:50:48.473

杀死和关闭不是两个选项。如果要终止进程，必须调用 Kill（或 CloseMainWindow）。调用 Close 只会释放资源，但不会关闭标准流。自己关闭流可能会也可能不会导致流程结束，这取决于流程。最好的策略是根据进程的类型调用 Kill 或 CloseMainWindow，然后 Dispose Process 对象。

[Close](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx)开始关闭 Process 对象。它由 Dispose 调用。Close 通常用于管理 Process 对象的资源。

[Kill](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)终止进程。这是终止没有用户界面的进程的唯一方法。

[CloseMainWindow](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.closemainwindow.aspx)向进程的主窗口发送关闭消息。这是停止具有用户界面的进程的优雅方式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-02T16:31:06.890

让我来说明一下当您调用**Close() 和 Kill()**时会发生什么。以下将打开记事本，但在 myProcess.Close() 执行时最后不会退出记事本。

```
Process myProcess;
myProcess = Process.Start("Notepad.exe");
Thread.Sleep(10000);
myProcess.Close(); 
```

以下将打开记事本。10 秒后，记事本将在 myProcess.Kill() 执行时关闭。

```
Process myProcess;
myProcess = Process.Start("Notepad.exe");
Thread.Sleep(10000);
myProcess.Kill(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T12:42:00.080

Process.Kill 调用 TerminateProcess。

Process.Close 不会像您认为的那样做！它只是释放类实例使用的资源。请阅读：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.close.aspx)

# html - 滚动浮动

> ID：13952636
> 
> 赞同：7
> 
> 时间：2012-12-19T12:37:04.527
> 
> 标签：html, css

我对 HTML/CSS 非常缺乏经验，所以请帮帮我。

我有以下布局

```
<style>
#main {background-color: red; width: 30%;}
#right_al{float: right;}
#to_scroll{overflow: scroll;}
</style>

<div id='main'>
    <div id='right_al'>
        CONTENT#foo
        <div id='to_scroll'>
        ZZZ<br />ZZZ<br />ZZZ<br />ZZZ<br />ZZZ<br />
        ZZZ<br />ZZZ<br />ZZZ<br />
        </div>
    </div>
    <div id='div1'>CONTENT #1</div>
    <div id='div2'>CONTENT #2</div>
    <div id='div3'>CONTENT #3</div>
    <div id='div4'>CONTENT #4</div>
    <div id='div5'>CONTENT #5</div>
</div> 
```

`overflow: scroll`里面是显示我想要的`#to_scroll`，它不起作用。越过父边界并清除浮动会增加父级的`#right_al`大小，这是我不想要的。

jsFiddle 链接：http: [//jsfiddle.net/5ycnw/](http://jsfiddle.net/5ycnw/)

我想要的是

*   div1 到 div5 位于父级的左侧。
*   左侧的 div 决定了父 div 延伸到的最大高度。向右浮动的 div 有一个子`#to_scroll`元素，当它的内容溢出`#main`.

我想出的一个解决方案涉及修复 的高度`right_al`，但父级的高度`#main`取决于左侧 div 上的内容，我想要一个仅 CSS 的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:12:57.940

正如我在上面的评论中提到的，当没有给出高度时，W3C 规范将不允许滚动容器，因为容器的内部高度将用于定义其总高度。如果可以选择使用一些 JS 代码，请查看以下 Fiddle：

[http://jsfiddle.net/Moonbird_IT/kf3vD/](http://jsfiddle.net/Moonbird_IT/kf3vD/)

这是我在演示中使用的 HTML 结构：

```
<div id="main">
<div id="main-column">...</div>
<div id="side-bar">
  <div id="side-bar-header">
  Sidebar Header
  </div>
  <div id="side-bar-scroller">
      <ul>
          <li>Option 1</li>
          <li>Option 2</li>
          <li>Option 3</li>        
          <li>Option 4</li>
          <li>Option 5</li>
          <li>Option 6</li>                
          <li>Option 7</li>
          <li>Option 8</li>
          <li>Option 9</li>  
          <li>Option 10</li>
          <li>Option 11</li>
          <li>Option 12</li>               
      </ul>
  </div>

</div> 
```

​</p>

当文档完全加载后，左侧元素（主要内容元素）的高度信息将用于设置侧边栏内滚动元素的高度减去显示侧边栏标题所需的高度。

重要的部分是这个简短的 jQuery 指令：

```
$(document).ready(function() {
  var mainHeight=$('#main-column').height();    
  var sidebarHeaderHeight=$('#side-bar-header').height();    
  $('#side-bar-scroller').css('height', mainHeight-sidebarHeaderHeight);
});​ 
```

我只在 Chrome 中测试了代码，所以你肯定需要在那里进行一些微调:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:41:48.853

在“内容”div周围放置一个包装器，然后给它一个左浮动。

```
<div id="content-container">
    <div id='div1'>CONTENT #1</div>
    <div id='div2'>CONTENT #2</div>
    <div id='div3'>CONTENT #3</div>
    <div id='div4'>CONTENT #4</div>
    <div id='div5'>CONTENT #5</div>
</div>

// CSS

#content-container { float:left; }
#main { height:auto; } 
```

在关闭主标签之前，请先清除 CSS。添加这个：

```
<div style="clear:both"></div> 
```

# windows-phone-7 - 在 WP8 模拟器上运行 WP7.1 应用程序

> ID：13952648
> 
> 赞同：3
> 
> 时间：2012-12-19T12:37:36.343
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

我们为 WP7.1 构建的应用程序已从市场上删除。给出的原因是“您的应用程序在 Windows Phone 8 上无法按预期运行。可用性受到重大影响”。我想在 wp8 模拟器上运行应用程序（为 7.1 构建），看看有什么问题。请告诉我如何在 8.0 模拟器上安装 7.1 应用程序？或者请指导我如何解决问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:56:25.583

由于您已经安装了 WP8 SDK，其过程非常简单。

以与您调试 Windows Phone 7.1 相同的方式，您也可以为 WP8 进行调试。打开您的 VS 2012 版本的 WP8 SDK 并打开项目并选择您的 7.1 项目。然后，您可以按 F5 在 WP8 模拟器中运行/调试它。

编辑：您需要一个接一个地测试所有版本的模拟器，从“模拟器 WVGA”开始

# javascript - 使用按键的Javascript输入验证，获取之前和之后的值

> ID：13952652
> 
> 赞同：3
> 
> 时间：2012-12-19T12:37:48.883
> 
> 标签：javascript, validation, input, keypress, keyup

> **可能重复：**
> [keydown 事件新值](https://stackoverflow.com/questions/10911047/keydown-event-new-value)

没有找到我正在寻找的答案，尝试了一段时间，变得绝望：

我的目标是有一个可以是十进制的数字非负输入字段，并且有一个字母的单个字符后缀（legel 后缀集合存在）。

在技​​术层面上 - 我需要能够拒绝输入字符，并且我需要两个值（输入之前和之后）。

**我尝试和失败的方法：**

***Keydown \ Keypress 事件：***

无法获得“之后”，只有之前和 char/KeyCode。这是一个问题，因为我不知道在旧值中插入新字符的位置（不一定在末尾..） - 需要一种方法来获取“之后”或至少是字符所属的索引。

***按键事件：***

没有之前的值，但更糟糕的是 - 长按时不会触发（“00000000000000000 ...”），所以我不能拒绝输入。

***OnChange/change/blur*** - 仅在失去焦点时触发，而不是我需要的功能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:18:00.253

将当前值保存在隐藏字段中并在必要时更新它的非常粗暴的方法怎么样？这将允许您访问“之前”和“之后”状态。

这不是一个好方法，但考虑到几乎不可能获得以前的值，我会考虑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:14:43.260

很难知道`onkeypress`它之后的价值是多少。是的，我们知道按下的键（和修饰符），我们知道选择/光标，因此我们可以模拟将要发生的事情和`preventDefaultAction`事件`keypress`。但是我们对键盘布局做出的假设可能是错误的，并且有太多的极端情况输入法，我们几乎无法处理所有这些。

我想出的解决方案是手动维护输入的状态，并尽可能多地寻找变化。如果发生这种情况，则处理程序会以先前和之后的状态触发并返回新值。看起来是这样的：

```
function handler(afterval, prevval) {
    // do something
    return afterval; // return val can be used for length limits etc
}
(function(el, handler) {
    var curval = el.value;
    function check(e) {
        if (el.value != curval)
            curval = el.value = handler(el.value, curval);
    }
    $(el)
      .on("keyup input keydown change mouseup cut paste focus", check)
      .on("keypress", function(e) {
        check(e);
        setTimeout(check, 0); // also check after keypress as soon as possible
      });
})(handler); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:04:10.737

我宁愿给你指出另一个方向。在早期的项目中，我遇到了同样的问题。我通过使用 jQuery 插件解决了它。所谓的“屏蔽输入”。

然后，您将能够给出一个正则表达式，说明用户应如何对该字段进行输入。

这是插件的Githup资源！ [https://github.com/digitalBush/jquery.maskedinput](https://github.com/digitalBush/jquery.maskedinput)

[您可以在此处](http://digitalbush.com/projects/masked-input-plugin/)找到示例和文档！

一个例子：

```
jQuery(function($){
    $("#element-id").mask("9.99a");
}); 
```

许多选项可用，只需检查创建自己的面具的能力！

# notifications - Zend 2 网络套接字

> ID：13952653
> 
> 赞同：2
> 
> 时间：2012-12-19T12:38:00.120
> 
> 标签：notifications, zend-framework2, phpwebsocket

有人可以举一些例子来说明如何使用 zend 框架 2 使用 websockets 吗？我需要一些提示才能开始

我想实现某种 facebooks 推送消息和实时聊天和通知

如果有人可以分享他对这种东西的经验，我将非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T21:29:54.900

Facebook 使用 COMET 方法进行实时聊天和通知。[我找到了关于COMET for PHP 的](http://www.screenr.com/SNH)截屏视频。

# mysql - mysql存储过程试图使用vb.net交出输入参数

> ID：13952658
> 
> 赞同：0
> 
> 时间：2012-12-19T12:38:06.220
> 
> 标签：mysql, vb.net, visual-studio-2012, .net-4.5

我有一个小型 vb.net 应用程序，试图将输入参数移交给 mysql 服务器上的存储过程。

问题是，该过程可以执行，但它只插入 idorganisation 将 projectno 列留空。

这是我的存储过程：

```
DELIMITER $$

CREATE DEFINER=`user1`@`%` PROCEDURE `InsertProject`()
BEGIN

DECLARE prno varchar (45); 

INSERT Into project ( idorganisation, projectno) values (( select idorganisation from user where usercol1 = (SELECT SUBSTRING_INDEX(USER(),'@',1))),
@prno);
END 
```

我的 vb.net 代码：

```
 Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    Dim con As New MySqlConnection(My.Settings.welddocconnectionstring)
    Dim cmd As New MySqlCommand("InsertProject", con)
    cmd.CommandType = CommandType.StoredProcedure

    Dim prno As New MySqlParameter("@prno", MySqlDbType.VarChar, 45)
    prno.Direction = ParameterDirection.Input
    prno.Value = "Test"
    cmd.Parameters.Add(prno)

    Try
        con.Open()
        cmd.ExecuteNonQuery()
        con.Close()
    Catch ex As MySql.Data.MySqlClient.MySqlException
        MessageBox.Show(ex.Message)
    Finally
        con.Dispose()
    End Try

End Sub 
```

谢谢你和最好的问候乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:45:24.880

1.  您需要将其定义`prno`为存储过程的参数，而不是在其中声明为[局部变量](http://dev.mysql.com/doc/en/stored-program-variables.html)；我采用在参数名称前加上下划线的约定，以避免后续表达式中的任何歧义：

    ```
    CREATE PROCEDURE InsertProject(IN _prno VARCHAR(45)) ... 
    ```

2.  您的过程只包含一个语句，因此您不需要将其主体包含在[`BEGIN ... END`](http://dev.mysql.com/doc/en/begin-end.html)复合语句块中。

3.  `prno`不是用户定义的[变量](http://dev.mysql.com/doc/en/user-variables.html)，所以不要在它前面*加上*.`@`

4.  您不需要使用子查询来评估`SUBSTRING_INDEX()`：

    ```
    WHERE usercol1 = SUBSTRING_INDEX(USER(),'@',1) 
    ```

5.  你可以[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)在这里使用。

    ```
    INSERT INTO project
      (idorganisation, projectno)
    SELECT idorganisation, _prno
    FROM   user
    WHERE  usercol1 = SUBSTRING_INDEX(USER(),'@',1) 
    ```

所以：

```
CREATE DEFINER=`user1`@`%` PROCEDURE InsertProject(IN _prno VARCHAR(45))
  INSERT INTO project
    (idorganisation, projectno)
  SELECT idorganisation, _prno
  FROM   user
  WHERE  usercol1 = SUBSTRING_INDEX(USER(),'@',1)
; 
```

# image-processing - 用霍夫圆变换检测同心圆

> ID：13952659
> 
> 赞同：4
> 
> 时间：2012-12-19T12:38:07.350
> 
> 标签：image-processing, emgucv

我正在尝试从图像数据库中检测 CD 图像。我想我可以在每个图像上使用圆形霍夫变换，并选择包含具有相似中心的同心圆的图像。

我曾尝试在 EMGU 中使用 HoughCircles 方法，如果圆圈不在外圈的中心，该方法可以正常工作，但如果在外圈中心则不起作用。这是霍夫变换本身的限制，还是只是实现的 minDist 限制的问题？

在以下 2 个图像上使用以下参数（我已经广泛地摆弄）：

```
Gray cannyThresh = new Gray(180);
Gray accumulatorThresh = new Gray(300);
int dp = 3;
double minDist = 0.0000001 //Ideally higher, but ok for illustrating this point

CircleF[] circles = gray.HoughCircles(cannyThresh, accumulatorThresh, dp, minDist, 0, 0)[0] 
```

偏移内圈（工作正常）：

![偏移内圆](../Images/8c224ddbad0a49e6dfb6957e75aac12b.png)

中心内圈（无法正确检测外圈，大概是因为中心靠近内圈？）

![中央内圈](../Images/8c7beb688532725996a4a579059878bd.png)

我可以做些什么来检测圆圈是否共享相似的中心？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-08T15:20:17.707

对于通过谷歌来这里寻找使用 OpenCV 检测同心圆的方法的其他人：OpenCV 霍​​夫圆检测似乎无法做到这一点。至少根据“ [Learning OpenCV: Computer Vision with the OpenCV Library](https://books.google.com/books?id=seAgiOfu2EIC&pg=PA159&lpg=PA159&dq=opencv%20concentric%20circles&source=bl&ots=hTJ58ohCK9&sig=o8mH0g727T9W-u9XHTkoGHRFh_A&hl=en&sa=X&ved=0ahUKEwjS9MOf0pjNAhUKIsAKHTLlAIkQ6AEILDAC#v=onepage&q=opencv%20concentric%20circles&f=false) ”一书中的一段话

> 最后，因为中心是按其相关累加器值的升序考虑的，并且如果新中心与先前接受的中心太接近，则不会保留新中心，因此当多个圆同心或近似同心时，倾向于保留较大的圆。

出于性能原因，似乎已选择此实现细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:17:33.463

您应该先进行边缘检测。然后你会得到两个细圈，而不是一个大黑管。这些圈子很容易找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T15:27:40.473

好的，这可能是一种粗略且现成的方法来完成这项工作（然后稍后找出“为什么”）。

假设圆圈不接触：

1.  对它们执行边缘检测。（如果你已经有，那么只需检查一次边缘图图像，以确定圆圈没有接触）

2.  执行霍夫圆检测。存储检测到的圆的中心和半径

3.  在边缘图像上进行连通分量 (CoCo) 查找。

4.  对于检测到的每个此类组件，检查其中心是否靠近检测到的霍夫圆之一。基本上检查组件是否有相应的检测到的霍夫圆。它不需要完全匹配。

    所以我们基本上可以避免对霍夫变换的参数摆弄。显然，连接的组件将对应于 CD 的确切位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T17:19:36.367

[*一种用于检测多个同心圆的算法*](http://users.isr.ist.utl.pt/~msilveira/Silveira_ibpria2005.pdf) 提出了一种方法。

我的自由解释如下：

*   获取边缘的二值图像，可能 Canny 已经足够好了
*   查找连接的组件
*   在每个连接的组件中，随机选择 3 个点（但对这些点之间的最小距离施加一些限制）并使用它们[生成一个圆](https://www.quora.com/Given-3-points-in-the-Cartesian-plane-how-can-you-find-the-coordinates-of-the-center-of-the-circle-that-intersects-all-three-points-if-there-exists-such-a-circle)。计算几个圆，通过所有连接的组件，并**在每个连接的组件内**，随机选择几组 3 个点。
*   此外，您可以丢弃不提供一致半径的连接组件
*   所有这些圆圈都会投票给一个中心，这些投票应该集中在图像的有效中心。
*   回到连通分量生成的圆，验证生成圆的连通分量与找到的圆心一致。合并已生成具有相同半径的圆的经过验证的连接组件。

# c# - 从某列获取数据表中的行索引

> ID：13952660
> 
> 赞同：16
> 
> 时间：2012-12-19T12:38:08.803
> 
> 标签：c#, asp.net, sql, database

```
| 1 | 2 | 3 |
+------------+
| A | B | C |
| D | E | F | 
| G | H | I | 
```

* * *

```
System.Data.DataTable dt = new DataTable();

dt.Columns.Add("1");
dt.Columns.Add("2");
dt.Columns.Add("3");
dt.Rows.Add(new object[] { "A", "B", "C" });
dt.Rows.Add(new object[] { "D", "E", "F" });
dt.Rows.Add(new object[] { "G", "H", "I" });

int? index = null;

var rows = new System.Data.DataView(dt).ToTable(false, new[] {"1"}).Rows;

for (var i = 0; i < rows.Count; i++)
{
    if (rows[i].ItemArray.FirstOrDefault() as string == "A")
        index = i;
} 
```

有没有办法简化这个代码来获取某一行的索引，并提供一列？在这种情况下，索引将为`0`，因为我正在遍历第一列，直到找到“A”。感觉应该有一个 linq 解决方案，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T12:42:25.103

如果您使用[DataTableExtensions.AsEnumerable()](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)方法，您将能够使用 LINQ 查询您的 DataTable。然后，您可以使用[`List<T>.FindIndex`](http://msdn.microsoft.com/en-us/library/x1xzf2ca.aspx)来确定给定谓词的索引：

```
int? index = new System.Data.DataView(dt).ToTable(false, new[] { "1" })
                .AsEnumerable()
                .Select(row => row.Field<string>("1")) // ie. project the col(s) needed
                .ToList()
                .FindIndex(col => col == "G"); // returns 2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T13:09:07.773

You should be able to use the [`DataTable.Select`](http://msdn.microsoft.com/en-us/library/det4aw50.aspx) method like this:

```
DataRow[] foundRows;
string filter = "1 == A";
foundRows = dt.Select(filter);

foreach (DataRow dr in foundRows)
{
    Console.WriteLine("Index is " + dr.Table.Rows.IndexOf(dr));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T13:05:39.750

```
var index = from row in dt.AsEnumerable()
            let r = row.Field<string>("1")
            where r == "A"
            select dt.Rows.IndexOf(row); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T12:58:18.910

You could try to an identity column. However, I do not know your application so please consider the pros and the cons of adding an identity column to your datatable. Here is a reference to get you started - [how to add identity column](https://stackoverflow.com/questions/2839168/how-to-add-identity-column-to-datatable-using-c-sharp)

Hope this helps.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T13:08:17.903

Use linq operation, but for that your target framework should be 4.5. Import system.Data.DataExtensions and apply the linq query will help you out.

# java - 带有注释的 servlet 模式的嵌入式 Jetty？

> ID：13952661
> 
> 赞同：9
> 
> 时间：2012-12-19T12:38:10.177
> 
> 标签：java, jetty, embedded-jetty, servlet-3.0

以下工作代码演示了将两个 servlet 包含到 jetty 的嵌入式实例中。

```
Server server = new Server(8080);
ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
context.setContextPath("/");
context.addServlet(new ServletHolder(new Html()), "/html");
context.addServlet(new ServletHolder(new Iphone()), "/iphone");       
server.setHandler(context);
server.start();
server.join(); 
```

这应该如何改变，而不是使用url“/iphone”，而是使用servlet注释中的urlpatterns，即

```
@WebServlet(urlPatterns={"/json", "/iphone"})
public class Iphone extends HttpServlet {
    ....
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T15:16:41.210

servlet 位于服务器的类路径中，而不是打包在 WAR 中。

[Servlet 3.0 规范](http://jcp.org/en/jsr/detail?id=315)指出：

> 在 Web 应用程序中，使用注解的类只有在它们位于 `WEB-INF/classes`目录中或打包在`WEB-INF/lib`应用程序内的 jar 文件中时才会处理它们的注解。
> 
> Web 应用程序部署描述符在 web-app 元素上包含一个新的“<code>metadata-complete”属性。“<code>metadata-complete” 属性定义了 web 描述符是否完整，或者是否应该在部署时检查 jar 文件的类文件中的注释和 web 片段。如果“<code>metadata-complete”设置为“ `true`”，部署工具必须忽略应用程序和 Web 片段的类文件中存在的任何 servlet 注释。如果未指定 metadata-complete 属性或设置为“false”，则部署工具必须检查应用程序的类文件以获取注释，并扫描 Web 片段。

您可能需要查看打包 WAR 并使用具有更多功能的上下文，例如[`WebAppContext`](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/webapp/WebAppContext.html).

或者，您可以尝试自己的注释扫描。某种形式的东西：

```
void registerServlets(ServletContextHandler context,
                              Class<? extends HttpServlet> type)
          throws InstantiationException, IllegalAccessException,
                 InvocationTargetException, NoSuchMethodException {
    WebServlet info = type.getAnnotation(WebServlet.class);
    for (String pattern : info.urlPatterns()) {
        HttpServlet servlet = type.getConstructor().newInstance();
        context.addServlet(new ServletHolder(servlet), pattern);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T20:18:57.007

请在此处查看我的答案：[Embedded Jetty does not find Annotated Servlet](https://stackoverflow.com/questions/25674206/embedded-jetty-does-not-find-annotated-servlet/41838197#41838197)

简而言之，您需要：

1.  按照答案中的说明设置必要的配置
2.  强制 Jetty 扫描已编译的 servlet 所在的 classes/ 目录。默认情况下，它只扫描我认为的罐子。

# asp.net - 冒充管理员访问虚拟目录保存文件

> ID：13952662
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:38:22.847
> 
> 标签：asp.net, security, iis, webserver

我被迫冒充某人，以便我可以使用：

```
Server.MapPath("~\dirname\"); 
```

并将文件保存在那里，否则我会收到与权限相关的错误。所以我想冒充管理员帐户。

```
<identity impersonate="true"
        userName="domain\administrator"
        password="*********" /> 
```

但是由于我们的客户将使用这个网站/应用程序，这是否存在潜在的安全风险？如果是，在这种情况下我应该怎么做？我要保存的只是一些 Excel 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:40:51.947

你不应该给你的 iis 用户在你的系统上的管理员权限。如果您有任何编码错误，您的用户将成为您系统的管理员。要做到这一点，授予 iis 用户在目录中写入和读取的权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T12:42:05.193

我想你会想看看 App Pool 并检查正在使用的帐户。您可以仅为该帐户授予对特定文件夹的写入权限，并完全避免模拟。

# java - 是否有任何可用的开源“MSWord doc to PDF”转换库

> ID：13952670
> 
> 赞同：1
> 
> 时间：2012-12-19T12:39:07.267
> 
> 标签：java, android

我正在尝试在 android 设备上将 word（.doc/.docx 格式）转换为 PDF。是否有一个开源解决方案可以用作 java 库之类的东西？谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:51:22.917

我不知道端到端转换项目，但您可以查看[Apache POI以从 MS Word 文档和](http://poi.apache.org/)[iText](http://itextpdf.com/)解析/提取信息以从 Java 程序创建 PDF 文件。

# android - 使用点击事件在android中以编程方式创建按钮

> ID：13952676
> 
> 赞同：1
> 
> 时间：2012-12-19T12:39:29.413
> 
> 标签：android, android-layout, android-intent

单击一个按钮时，我正在创建一个动态按钮。即在该按钮的onClick 事件下。但它会为每次点击动态创建 n 个按钮，创建一个按钮。

```
LinearLayout ll = (LinearLayout) findViewById(R.id.linearLayout1);
.....

public void onClick(View arg0) {
Button topArtistbutton = new Button(SalesPanel.this, null,android.R.attr.buttonStyleSmall);
topArtistbutton.setText("Top Artist");
topArtistbutton.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));topArtistbutton.setId(3);
ll.addView(topArtistbutton);
} 
```

我只想要一个动态创建的按钮

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:43:17.273

```
boolean bCreate = true;
...
public void onClick(View arg0) {
    if (bCreate)
    {
         Button topArtistbutton = new Button(SalesPanel.this, null,android.R.attr.buttonStyleSmall);
         topArtistbutton.setText("Top Artist");
         topArtistbutton.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));topArtistbutton.setId(3);
         ll.addView(topArtistbutton);
         bCreate = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:47:39.480

设置标志并使用 if 语句检查按钮是否已创建：

```
boolean created = false;

public void onClick(View arg0) {
if (!created) {

    Button topArtistbutton = new Button(SalesPanel.this, null,android.R.attr.buttonStyleSmall);
    topArtistbutton.setText("Top Artist");
    topArtistbutton.setLayoutParams(new  LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    topArtistbutton.setId(3);
    ll.addView(topArtistbutton);
    created = true;
    }
} 
```

# mkmapview - 群集注释图钉需要更多时间才能在 Mapview 上添加它们

> ID：13952677
> 
> 赞同：0
> 
> 时间：2012-12-19T12:39:31.963
> 
> 标签：mkmapview, mkpinannotationview

我正在尝试向地图视图添加多个注释（近 30k），为此我使用聚类机制并将这些组别针添加到地图视图中，我的问题是别针需要更多时间才能添加到地图视图上，而地图不是添加这些聚集的引脚后移动平稳，如何减少时间以及如何使地图移动顺畅。请告诉我解决这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:34:39.667

针就是针。无论它代表 1,000 点还是 1，它仍然是一个注释，不会再慢了。也许向我们展示您的 viewForAnnotation 类，我们会看看您是否在那里进行一些计算，从而减慢绘图速度。

# ruby-on-rails - 允许在 Rails 应用程序中编辑静态页面

> ID：13952679
> 
> 赞同：2
> 
> 时间：2012-12-19T12:39:38.150
> 
> 标签：ruby-on-rails, content-management-system

在我的 rails 应用程序中，我有一些静态页面。如果以后必须更改这些静态页面上的文本，我将不得不更改源代码并重新部署应用程序。有没有什么方法可以让我甚至其他人（比如客户）直接编辑文本并保存它，就像在 cms 中一样。我听说过基于 rails 的 cms，例如炼油厂 cms 等，但我想在我的应用程序本身中集成静态页面编辑功能。最好的方法是什么？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T16:00:31.180

Mercury 编辑器是非常受欢迎的宝石……这里有一些资源……

[http://jejacks0n.github.io/mercury/](http://jejacks0n.github.io/mercury/)

[http://railscasts.com/episodes/296-mercury-editor](http://railscasts.com/episodes/296-mercury-editor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:43:17.037

您可以使用[TinyMCE](http://www.tinymce.com/)之类的所见即所得编辑器，并将所有 HTML 数据存储在数据库中。

然后在您的页面上加载此数据。您还可以为此数据提供编辑表单。

*   [tinymce-rails](https://github.com/spohlenz/tinymce-rails)
*   [如何让 Rails 视图处理来自数据库内容的 HTML 标签？](https://stackoverflow.com/questions/4579695/how-to-have-rails-views-process-html-tags-from-database-content)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:53:00.587

您可以存储和检索您希望客户能够在数据库中更改的视图代码。您可以构建一个单独的管理视图，然后您的客户可以在其中编辑文本/html，或者更花哨并集成诸如[水银编辑器](https://github.com/jejacks0n/mercury)之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-25T13:08:59.640

我认为这里也应该提到 CKEditor 或 TinyMCE 也可以解决这个问题；以及将包含在 Rails 6 中的 TrixEditor

# c# - 按年份对自定义列表进行排序

> ID：13952681
> 
> 赞同：1
> 
> 时间：2012-12-19T12:39:47.823
> 
> 标签：c#

我最近一直在使用列表，但我似乎无法在自定义类型列表中找到按年份排序的方法。在对列表进行排序时，我只是不知道如何定位年份信息。任何帮助将不胜感激。

我的代码可以在下面查看：

```
void Main()
{
    List<DVD> myDVDList = GetFilms();
}

// Define other methods and classes here

public List<DVD> GetFilms()
{
    var filmList = new List<DVD>();

    string filename = @"C:\Users\****\Desktop\film-list.txt";
    IEnumerable<string> rawList = File.ReadLines(filename);
    int index = 1;

    foreach(string line in rawList)
    {
        string[] filmInfo = line.Split('*');
        var newDVD = new DVD(index, filmInfo[0], filmInfo[1], int.Parse(filmInfo[2]), filmInfo[3]);
        filmList.Add(newDVD);

        index++;
    }

    return filmList;
}

public class Product
{
    public int IDNumber = 0;
    public string Name = "";
    public int Year = 0;

    public Product(int idNumber, string name, int year)
    {
        IDNumber = idNumber;
        Name = name;
        Year = year;
    }

    public virtual void ProductInfo()
    {
        Console.WriteLine(string.Format("{0} - {1} - {2}", IDNumber,Name,Year));
    }
}

public class DVD : Product
{
    public string Director = "";
    public string Genre = "";

    public DVD(int idNumber, string name, string director, int year, string genre) : base(idNumber, name, year)
    {
        Director = director;
        Genre = genre;
    }

    public override void ProductInfo()
    {
        Console.WriteLine(string.Format("[DVD - Product Information]: #{0} - {1} - {2} - {3} - {4}", IDNumber, Name, Director, Genre, Year));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:41:54.563

`List<Product>`在通用对象上使用 LINQ ：

```
using System.Linq;
...
var orderedList = filmList.OrderBy(z => z.Year).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:43:53.683

您可以使用[`List.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)或[`Enumerable.OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)：

```
products.Sort((p1, p2) => p1.Year.CompareTo(p2.Year)); 
```

或（效率较低但可扩展性更强）：

```
products = products.OrderBy(p => p.Year).ToList(); 
```

请注意，如果您不想将原始列表替换为有序列表，则无需将查询具体化为新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:44:16.427

这是什么`List`课？我知道`List<T>`，您可以在其上执行`OrderBy(film => film.Year)`LINQ 表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:48:15.237

首先，您必须键入您的方法以返回一个`List<DVD>`. 类型化的对象是避免装箱/拆箱对象的好习惯。

```
public List<DVD> GetFilms()
{
    ...
} 
```

因此，您想通过对 Column 进行排序来显示它，在这种情况下，您可以使用 lambda 表达式来设置要排序的列。

```
// remeber to import
using System.Linq; 
```

并做这样的事情：

```
List<DVD> result = GetFilms();

foreach(DVD film in result.OrderBy(f => f.Year))
{
   Console.Write(filme.Name);
} 
```

就像一个提示，避免`Console.WriteLine`在你的班级内打电话。`ToString()`它是一个接口命令，如果您提供对 DVD 类、Product 类上的方法的覆盖而不是在模型类中写入它的方法，那就太好了。

# c# - 结合 SpecFlow 表和 Moq 模拟对象

> ID：13952682
> 
> 赞同：4
> 
> 时间：2012-12-19T12:39:50.140
> 
> 标签：c#, moq, specflow

我有一种情况，我想使用一个模拟对象（使用 Moq），这样我就可以创建设置和期望，但也想使用 SpecFlow 表提供一些属性值。有没有一种方便的方法来创建一个模拟并为种子值提供表格？

```
// Specflow feature

Scenario Outline: MyOutline
Given I have a MyObject object as
| Field | Value     |
| Title | The Title |
| Id    | The Id    |

// Specflow step code    

Mock<MyObject> _myMock;

[Given(@"I have a MyObject object as")]
public void GivenIHaveAMyObjectObjectAs(Table table)
{
   var obj = table.CreateInstance<MyObject>();

   _myMock = new Mock<MyObject>();

   // How do I easily combine the two?

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:36:24.860

如果没有模拟对象，您只需使用辅助助手（请参阅[https://github.com/techtalk/SpecFlow/wiki/SpecFlow-Assist-Helpers](https://github.com/techtalk/SpecFlow/wiki/SpecFlow-Assist-Helpers)），但由于您需要调用 Setup(...) 然后它行不通。

但是，您也可以像这样使用 StepArgumentTransformation

```
 [StepArgumentTransformation]
    public Mock<MyData> MockMyDataTransform(Table table)
    {
        MyData myData = new Mock<MyData>();
        var row = table.Rows[0];
        if (table.ContainsColumn("MyField"))
        {
            myData.Setup(x=>x.MyField).Returns(row["MyField"]);
        }
     ....
    } 
```

并将其与

```
 [Given(@"something like:")]
    private void GivenSomethingLike(Mock<MyData> myData)
    .... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:29:23.803

有一个重载`CreateInstance`需要一个`Func<T> methodToCreateTheInstance`. 您可以使用它来传递已设置的模拟作为 speclow`CreateInstance`方法的基础：

```
[Given(@"I have a MyObject object as")]
public void GivenIHaveAMyObjectObjectAs(Table table)
{
   _myMock = new Mock<MyObject>();
   //you need to do all the setup before passing _myMock to table.CreateInstance
   _myMock.Setup(o => o.SomeProperty).Returns("someValue"); 

   var obj = table.CreateInstance<MyObject>(() => _myMock.Object);

   _myMock.VerifySet(foo => foo.Title = "The Title");
} 
```

# php - Zend 路由器链和匹配控制器/动作问题

> ID：13952683
> 
> 赞同：1
> 
> 时间：2012-12-19T12:39:54.337
> 
> 标签：php, zend-framework, zend-route, zend-framework-routing

我希望路由器匹配这个 URL

[http://hawthornfc.localsupportus.com.au/hints](http://hawthornfc.localsupportus.com.au/hints)

在我的 routes.ini 文件中，我有

```
subdomain.type = "Zend_Controller_Router_Route_Hostname"
subdomain.route = ":clubalias.localsupportus.com.au"
subdomain.reqs.clubalias = "\w+"
subdomain.default.clubalias = "geelongscouts"
subdomain.defaults.controller = "index"
subdomain.defaults.action = "profile"

hints.type = Zend_Controller_Router_Route_Static
hints.route = "hints"
hints.default.controller = "help"
hints.default.action = "hints"

subdomain_hints.type = Zend_Controller_Router_Route_Chain
subdomain_hints.chain = "subdomain, hints" 
```

我的路线完全匹配，即。subdomain_hints 但它转到 index/profile 而不是 /help/hints

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:10:07.623

您可以删除这些行：

```
subdomain.defaults.controller = "index"
subdomain.defaults.action = "profile" 
```

如果您想路由个人资料页面，请执行与“提示”页面相同的想法并将其与“子域”路由链接。

# html - 如何使 HTML 输入标签只接受数值？

> ID：13952686
> 
> 赞同：175
> 
> 时间：2012-12-19T12:40:11.480
> 
> 标签：html, input, numbers, validating

我需要确保某个`<input>`字段仅将数字作为值。输入不是表单的一部分。因此它不会被提交，因此在提交期间进行验证不是一种选择。我希望用户不能输入除数字以外的任何字符。

有没有一种巧妙的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2012-12-19T12:42:24.933

## HTML 5

您可以使用[HTML5 输入类型 number](https://html.spec.whatwg.org/multipage/input.html#number-state-(type=number))来限制仅数字条目：

```
<input type="number" name="someid" /> 
```

这仅适用于 HTML5 投诉浏览器。确保您的 html 文档的 doctype 是：

`<!DOCTYPE html>`

另请参阅[https://github.com/jonstipe/number-polyfill](https://github.com/jonstipe/number-polyfill)以获得旧浏览器中的透明支持。

## JavaScript

**更新：**有一个新的非常简单的解决方案：

> 它允许您对文本使用**任何**类型的输入过滤器`<input>`，包括各种数字过滤器。这将正确处理复制+粘贴、拖放、键盘快捷键、上下文菜单操作、不可键入的键和所有键盘布局。

请参阅[此答案](https://stackoverflow.com/a/469362/1070129)或[在 JSFiddle 上自行](https://jsfiddle.net/emkey08/zgvtjc51)尝试。

出于一般目的，您可以进行 JS 验证，如下所示：

```
function isNumberKey(evt){
    var charCode = (evt.which) ? evt.which : evt.keyCode
    if (charCode > 31 && (charCode < 48 || charCode > 57))
        return false;
    return true;
}

<input name="someid" type="number" onkeypress="return isNumberKey(event)"/> 
```

如果您想允许小数，请用以下内容替换“if 条件”：

```
if (charCode > 31 && (charCode != 46 &&(charCode < 48 || charCode > 57))) 
```

来源：[HTML 文本输入只允许数字输入](https://stackoverflow.com/questions/469357/html-text-input-allow-only-numeric-input)

JSFiddle 演示：http: [//jsfiddle.net/viralpatel/nSjy7/](http://jsfiddle.net/viralpatel/nSjy7/)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-12-19T12:45:00.513

也可以在 html5 中使用 pattern 属性：

```
<input type="text" name="name" pattern="[0-9]" title="Title" /> 
```

[输入验证教程](https://www.the-art-of-web.com/html/html5-form-validation/)

虽然，如果您的 doctype 不是`html`那么我认为您需要使用一些 javascript/jquery。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2018-12-16T14:48:42.750

快速简单的代码

```
<input type="text" onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))" /> 
```

这将只允许使用数字和退格键。

如果您也需要小数部分，请使用此代码片段

```
<input type="text" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" /> 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-08-23T11:12:50.410

请尝试此代码以及输入字段本身

```
<input type="text" name="price" id="price_per_ticket" class="calculator-input" onkeypress="return event.charCode >= 48 && event.charCode <= 57"></div> 
```

它会正常工作。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-19T12:45:50.123

您可以使用`<input type="number" />`. 这将只允许在输入框中输入数字。

示例：http: [//jsfiddle.net/SPqY3/](http://jsfiddle.net/SPqY3/)

请注意，输入`type="number"`标签仅在较新的浏览器中受支持。

对于 Firefox，您可以使用 javascript 验证输入：

[http://jsfiddle.net/VmtF5/](http://jsfiddle.net/VmtF5/)

**2018 年 3 月 12 日更新：**浏览器支持现在好多了，它受以下支持：

*   铬 6+
*   火狐 29+
*   歌剧 10.1+
*   野生动物园 5+
*   边缘
*   （Internet Explorer 10+）

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-02-08T09:13:28.603

```
<input type="text" name="myinput" id="myinput" onkeypress="return isNumber(event);" /> 
```

在js中：

```
function isNumber(e){
    e = e || window.event;
    var charCode = e.which ? e.which : e.keyCode;
    return /\d/.test(String.fromCharCode(charCode));
} 
```

或者你可以用一种复杂但有用的方式编写它：

```
<input onkeypress="return /\d/.test(String.fromCharCode(((event||window.event).which||(event||window.event).which)));" type="text" name="myinput" id="myinput" /> 
```

**注意**：跨浏览器和正则表达式。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-08-26T10:27:22.113

我使用正则表达式将输入值替换为所需的模式。

```
var userName = document.querySelector('#numberField');

userName.addEventListener('input', restrictNumber);
function restrictNumber (e) {  
  var newValue = this.value.replace(new RegExp(/[^\d]/,'ig'), "");
  this.value = newValue;
} 
```

```
<input type="text" id="numberField">
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-11-19T08:04:16.823

```
function AllowOnlyNumbers(e) {

e = (e) ? e : window.event;
var clipboardData = e.clipboardData ? e.clipboardData : window.clipboardData;
var key = e.keyCode ? e.keyCode : e.which ? e.which : e.charCode;
var str = (e.type && e.type == "paste") ? clipboardData.getData('Text') : String.fromCharCode(key);

return (/^\d+$/.test(str));
}
```

```
<h1>Integer Textbox</h1>
    <input type="text" autocomplete="off" id="txtIdNum" onkeypress="return AllowOnlyNumbers(event);" />
```

JSFiddle：[https ://jsfiddle.net/ug8pvysc/](https://jsfiddle.net/ug8pvysc/)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2021-08-27T08:58:27.347

您可以使用以下一行代码：

```
<input type="text" onkeypress="return /[0-9]/i.test(event.key)" > 
```

它只接受数字。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-11-28T21:41:17.813

```
<input 
    onkeyup="value=isNaN(parseFloat(value))?1000:value" 
       type="number" 
      value="1000"
> 
```

`onkeyup`松开按键时触发。

`isNaN(parseFloat(value))?`检查输入值是否不是数字。

如果不是数字，则将值设置为 1000`:`如果是数字，则将值设置为该值。

**注意：**由于某种原因，它仅适用于`type="number"`

为了让它更加引人入胜，你还可以有一个边界：

```
<input 
    onkeyup="value=isNaN(parseFloat(value))||value<0||value>9000?1000:value"
       type="number"
      value="1000"
> 
```

享受！

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-06-23T22:44:38.257

我和这个打了一会儿。这里和其他地方的许多解决方案似乎很复杂。此解决方案使用**jQuery/javascript**和 HTML。

```
 <input type="number" min="1" class="validateNumber">

    $(document).on('change', '.validateNumber', function() { 
        var abc = parseInt($(this).val());
        if(isNaN(abc)) { abc = 1; }
        $(this).val(abc);
    }); 
```

在我的情况下，我正在跟踪最小值为 1 的少量数量，因此输入标签中的 min="1" 和 isNaN() 检查中的 abc = 1。对于仅正数，您可以将这些值更改为 0，甚至只需从输入标签中删除 min="1" 以允许负数。

这也适用于多个盒子（并且可以节省一些加载时间而不是通过 id 单独执行它们），只需在需要的地方添加“validateNumber”类。

*解释*

parseInt() 基本上可以满足您的需要，只是它返回 NaN 而不是某个整数值。使用简单的 if()，您可以在所有返回 NaN 的情况下设置您喜欢的“后备”值:-)。W3[在这里](http://www.w3schools.com/jsref/jsref_isnan.asp)还指出，全局版本的 NaN 将在检查之前进行类型转换，这会提供一些额外的证明（Number.isNaN() 不会这样做）。发送到服务器/后端的任何值仍应在那里进行验证！

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-04-08T02:47:27.810

够简单吗？

```
inputField.addEventListener('input', function () {
  if ((inputField.value/inputField.value) !== 1) {
    console.log("Please enter a number");
  }
});
```

```
<input id="inputField" type="text">
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-05-15T07:19:57.540

您可以使用`<input>`属性 type='number' 的标签。

例如，您可以使用`<input type='number' />`

此输入字段仅允许数值。您还可以指定该字段应接受的最小值和最大值。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2012-12-19T12:53:29.120

如果您可以使用 HTML5，您可以这样做`<input type="number" />` 如果不是，您将不得不通过 javascript 来完成，因为您说它不会被提交以从代码隐藏中执行。

```
<input id="numbersOnly" onkeypress='validate()' />

function validate(){
  var returnString;
  var text = document.getElementByID('numbersOnly').value;
  var regex = /[0-9]|\./;
  var anArray = text.split('');
  for(var i=0; i<anArray.length; i++){
   if(!regex.test(anArray[i]))
   {
     anArray[i] = '';
   }
  }
  for(var i=0; i<anArray.length; i++) {
    returnString += anArray[i];
  }
  document.getElementByID('numbersOnly').value = returnString;
} 
```

PS没有测试代码，但如果不检查拼写错误，它应该或多或少是正确的：D您可能想添加更多的东西，例如如果字符串为空或空等时该怎么办。您也可以更快：D

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-12-19T12:43:21.390

怎么用`<input type="number"...>`？

[http://www.w3schools.com/tags/tag_input.asp](http://www.w3schools.com/tags/tag_input.asp)

此外，这里有[一个问题，其中有一些使用 Javascript 进行验证的示例](https://stackoverflow.com/questions/469357/html-text-input-allow-only-numeric-input)。

更新：链接到更好的问题（感谢 alexblum）。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-10-14T19:56:11.420

我将其用于邮政编码，既快速又简单。

```
<input type="text" id="zip_code" name="zip_code" onkeypress="return event.charCode > 47 && event.charCode < 58;" pattern="[0-9]{5}" required></input> 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-02-14T12:58:45.180

接受的答案：

```
function isNumberKey(evt){
    var charCode = (evt.which) ? evt.which : event.keyCode
    if (charCode > 31 && (charCode < 48 || charCode > 57))
        return false;
    return true;
} 
```

这很好但并不完美。它对我有用，但我收到一个警告，说 if 语句可以简化。

然后它看起来像这样，更漂亮：

```
function isNumberKey(evt){
    var charCode = (evt.which) ? evt.which : event.keyCode;
    return !(charCode > 31 && (charCode < 48 || charCode > 57));
} 
```

会评论原始帖子，但我的声誉太低而不能这样做（刚刚创建了这个帐户）。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-07-05T04:25:42.633

在输入标签内添加： onkeyup="value=value.replace(/[^\d]/g,'')"

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-12-12T10:50:20.103

**如果不是整数，则设置 0**

```
<input type="text" id="min-value" />

$('#min-value').change(function ()
            {   
                var checkvalue = $('#min-value').val();
                if (checkvalue != parseInt(checkvalue))
                    $('#min-value').val(0);
            }); 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-10-17T12:08:02.173

我更新了一些发布的答案以添加以下内容：

*   将该方法添加为扩展方法
*   只允许输入一个点
*   指定允许小数点后的数字。

    ```
    String.prototype.isDecimal = function isDecimal(evt,decimalPts) {
        debugger;
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode != 46 && (charCode < 48 || charCode > 57)))
            return false;

        //Prevent more than one point
        if (charCode == 46 && this.includes("."))
            return false;

        // Restrict the needed decimal digits
        if (this.includes("."))
        {
            var number = [];
            number = this.split(".");
            if (number[1].length == decimalPts)
                 return false;
         }

         return true;
    }; 
    ```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-07-31T02:37:54.413

请参阅我使用 JavaScript 语言在您的网页上对文本输入元素的值进行跨浏览器过滤器的项目：[输入键过滤器](https://github.com/anhr/InputKeyFilter)。您可以将值过滤为整数、浮点数，或编写自定义过滤器，例如电话号码过滤器。请参阅输入整数的代码示例：

```
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Input Key Filter Test</title>
	<meta name="author" content="Andrej Hristoliubov anhr@mail.ru">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<!-- For compatibility of IE browser with audio element in the beep() function.
	https://www.modern.ie/en-us/performance/how-to-use-x-ua-compatible -->
	<meta http-equiv="X-UA-Compatible" content="IE=9"/>

	<link rel="stylesheet" href="https://rawgit.com/anhr/InputKeyFilter/master/InputKeyFilter.css" type="text/css">		
	<script type="text/javascript" src="https://rawgit.com/anhr/InputKeyFilter/master/Common.js"></script>
	<script type="text/javascript" src="https://rawgit.com/anhr/InputKeyFilter/master/InputKeyFilter.js"></script>

</head>
<body>
	<h1>Integer field</h1>
<input id="Integer">
<script>
	CreateIntFilter("Integer", function(event){//onChange event
			inputKeyFilter.RemoveMyTooltip();
			var elementNewInteger = document.getElementById("NewInteger");
			var integer = parseInt(this.value);
			if(inputKeyFilter.isNaN(integer, this)){
				elementNewInteger.innerHTML = "";
				return;
			}
			//elementNewInteger.innerText = integer;//Uncompatible with FireFox
			elementNewInteger.innerHTML = integer;
		}

		//onblur event. Use this function if you want set focus to the input element again if input value is NaN. (empty or invalid)
		, function(event){ inputKeyFilter.isNaN(parseInt(this.value), this); }
	);
</script>
 New integer: <span id="NewInteger"></span>
</body>
</html>
```

另请参阅输入键过滤器示例的我的页面[“整数字段：”](https://anhr.github.io/InputKeyFilter/)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2015-05-25T03:36:36.353

使用此代码时，您不能在 Mozilla Firefox 中使用“BackSpace Button”，您只能在 Chrome 47 中使用退格键 && event.charCode < 58;" pattern="[0-9]{5}" required>

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2015-06-20T08:14:06.880

[http://www.texotela.co.uk/code/jquery/numeric/](http://www.texotela.co.uk/code/jquery/numeric/) [数字输入](http://www.texotela.co.uk/code/jquery/numeric/)归功于 Leo Vũ 提到这一点，当然还有 TexoTela。带有测试页。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2021-05-19T22:43:22.467

另一种效果很好的方法。

```
<input type="text" name="celular" placeholder="Ej. 6756892" maxlength="8" id="telefono"   oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" > 
```

此修复程序的优点是复制粘贴的值也包含在规则中。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-03-27T07:04:39.050

出于一般目的，您可以进行 JS 验证，如下所示：

它适用于数字键盘和普通数字键

```
function isNumberKey(evt){
        var charCode = (evt.which) ? evt.which : event.keyCode

if (charCode < 31 || (charCode >= 48 && charCode <= 57 ) || (charCode >= 96 && charCode <= 105 ))
        return true;
    return false;
}

<input name="someid" type="number" onkeypress="return isNumberKey(event)"/> 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-06-17T14:14:28.687

使用`<input type="number">`，它只接受数字输入。
尝试使用非数字值提交以下两种表格。

```
<form>
<!-- some code -->
 <input type="number">
 <button>SUBMIT</button>
 </form>
```

较旧的浏览器不支持`type=number`. 所以我们可以用 JavaScript 来验证它：

```
<form onsubmit=
 "if (isNaN(document.getElementById('validatethis').value)) return false;">
<!-- some code -->
 <input type="text" id="validatethis">
 <button>SUBMIT</button>
 </form>
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-02-13T21:30:39.650

一种方法是拥有一个允许的字符代码数组，然后使用该`Array.includes`函数查看是否允许输入的字符。

**例子：**

```
<input type="text" onkeypress="return [45, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57].includes(event.charCode);"/> 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2022-01-17T12:17:32.117

**一根线就可以使用**

```
<input onkeypress="return /[0-9]/i.test(event.key)" > 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-07-09T11:12:03.363

最好将“+”添加到 REGEX 条件以接受多个数字（不仅仅是一个数字）：

`<input type="text" name="your_field" pattern="[0-9]+">`

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2022-02-17T17:10:34.573

接受的答案已经很好，但是如果您的要求是您希望您的用户能够导航他们的输入（通过使用左或右光标键）并可能修改他们的输入（通过使用删除或退格键），您可以选择使用此方法。

这种方法的另一个好处是，除了来自数字小键盘的数字之外，它还接受来自键盘顶行的数字。

输入 HTML 元素看起来像这样......

```
<input type="number"
  onkeydown="return validateIsNumericInput(event)"
  ...
  any other attributes for the input element
> 
```

JavaScript 函数将如下所示：

```
/**
Checks the ASCII code input by the user is one of the following:
    - Between 48 and 57: Numbers along the top row of the keyboard
    - Between 96 and 105: Numbers in the numeric keypad
    - Either 8 or 46: The backspace and delete keys enabling user to change their input
    - Either 37 or 39: The left and right cursor keys enabling user to navigate their input
 */

function validateIsNumericInput(evt) {
    var ASCIICode = (evt.which) ? evt.which : evt.keyCode
    permittedKeys = [8, 46, 37, 39]
    if ((ASCIICode >= 48 && ASCIICode <= 57) || (ASCIICode >= 96 && ASCIICode <= 105)) {
        return true;
    };
    if (permittedKeys.includes(ASCIICode)) {
        return true;
    };
    return false;
} 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2022-02-26T17:10:24.490

据我了解，您只想在文本输入框中允许数值。由于我是初学者，我也为这种逻辑而苦苦挣扎。这个问题可以在 ES6 中简单解决。这是我想出的最简单的解决方案：

```
function test(){
    for (var i = 0; i < document.getElementById("element").value.length; i++) {
        if (isNaN(document.getElementById("element").value[i])){
            document.getElementById("element").value = '';
            console.log(document.getElementById("element").value[i])
        }
    };
} 
```

请注意，此代码不适用于浮点数！

# javascript - 如何在gridview分页上的DataItemTemplateContent中执行javascript

> ID：13952690
> 
> 赞同：4
> 
> 时间：2012-12-19T12:40:27.377
> 
> 标签：javascript, asp.net, asp.net-mvc, asp.net-mvc-4, devexpress

我有一个 DevExpress GridView，其中包含一个带有自定义 DataItemTemplate 的列

```
column.SetDataItemTemplateContent( c =>
  {
    ViewContext.Writer.Write(
      Html.Partial( "PartialView" )
    );
} ); 
```

部分视图`PartialView`如下所示：

```
<p>text</p>

<script>
  console.log("hello from PartialView");
</script> 
```

因此，在页面重新加载后，我得到`console.log`x 次输出，其中 x 是 GridView 中显示的行数。但是，如果我转到 GridView 中的下一页，则 js 将不再执行，并且我不再获得任何`console.log`输出。部分视图正确呈现，因为每行仍然显示“文本”。

在使用gridview分页期间如何再次获得输出的任何想法？

（顺便说一句。我的目标是通过 javascript 呈现化学结构。简化示例以显示一般问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T18:50:58.467

我不完全确定您要做什么，但是您可以连接到客户端脚本，而不是在返回中嵌入 javascript。我会给你的 DOM 元素一个唯一的类，然后设置 ClientSideEvents.EndCallBack。

```
settings.ClientSideEvents.EndCallback = 
  "function (s,e) { if (e.command != 'FUNCTION') { YourCustomMethod(s, e) }; }"; 
```

一些简单的 jquery 或直接 javascript 将允许您获取与您的类名匹配的 DOM 对象列表作为选择器，并且您可以在数据属性中包含处理所需的任何其他数据。

在您的示例中，您的部分视图将类似于：

```
<p class="actonme" data-msg="hello from PartialView">text</p> 
```

你的方法看起来像：

```
function YourCustomMethod(s, e) {
    var objs = document.getElementsByClassName('actonme');
    var count = objs.length;
    for (var iIndex = 0; iIndex < count; iIndex++) {
        console.log(objs[iIndex].getAttribute("data-msg"));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:09:04.660

尝试添加以“dxss_”开头的脚本标签 id，如下所示：

```
<script id="dxss_myscript" type="text/javascript">
  alert('hello from PartialView');
</script> 
```

# svn - 删除颠覆历史

> ID：13952701
> 
> 赞同：5
> 
> 时间：2012-12-19T12:41:14.033
> 
> 标签：svn

我有一些包含 bin 文件（图像、流量跟踪转储等）的颠覆存储库。问题是对这些文件的多次提交导致了一个相当大的存储库。由于我们仅出于历史目的保留 repo，是否可以重置 repo 的历史记录？我基本上是在寻找一个简单的替代方法来导出内容并重新创建 repo。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-02T10:51:22.493

根据[Rob - Delete parts of subversion history](http://robmayhew.com/delete-parts-of-subversion-history/)，例如你想删除低于 9000 版本的所有内容（你的存储库现在是 10000 版本），所以你可以试试这个

```
 svnadmin dump /path/to/current/repo -r9000:10000 > svn.dump
 svnadmin create /path/to/new/repo
 svnadmin load /path/to/new/repo < svn.dump 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T17:46:59.297

没有办法¹从 Subversion 存储库中删除历史记录。

使用 Subversion 或任何源代码控制系统的标准方法是不存储从您自己的*源*文件构建的文件。例如，如果我构建一个可执行文件，我应该将源代码存储在 Subversion 中，而不是可执行文件。

相反，将构建的工件存储在*发布服务器上*。这可以像 Maven 存储库一样复杂，或者只是远程计算机上的目录布局，您可以在其中存储这些内容，任何需要这些构建工件的项目都可以轻松访问它。这需要一些工作，但您最终不会得到臃肿的源存储库。

我的建议是首先重组您的构建过程以使用某种发布存储库。您没有提及您的环境，但如果是 Java，请查看 Maven 存储库，例如[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)或[Nexus](http://www.sonatype.org/nexus/)。你不需要使用 Maven。如果您使用 Ant，请查看与 Ant 很好地集成的[Ivy 。](http://ant.apache.org/ivy)或者，仅用于`<wget>`获取您需要的工件。

如果您在 C/C++ 世界中，您可以使用`ftp`、`scp`、`curl`、`wget`或`NFS`从您的发布存储库中获取和复制所需的工件。

一旦你获得了发布存储库设置，执行 Subversion 转储/过滤/加载以删除无关的二进制文件，并且感谢你永远不必再这样做。

* * *

^(1.)好，不**容易**。但是，您已经提到您知道钻取、转储、过滤、加载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-16T09:50:32.590

[Subdivision](http://subdi.vision)是一个图形工具，可以很容易地从 svn 存储库中永久删除文件。虽然它仍然需要一个可能很长的转储/过滤/加载周期来创建输出，但它保证了操作一次完成并且您将获得预期的输出，这通常很难通过 svndumpfilter 实现。

全面披露：我们是细分的开发商

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T11:48:20.743

不幸的是，**没有**真正简单的方法可以从 Subversion 存储库中完全删除数据。Apache Subversion 旨在永不丢失数据。

请参阅 Apache Subversion 常见问题解答：[“如何从存储库的历史记录中完全删除文件？”](http://subversion.apache.org/faq.html#removal) .

Apache Subversion（和其他版本控制系统）旨在保留所有历史记录。从回购历史中删除文件通常被认为是一项复杂的任务，并不是一件好事。这不是您可以轻松完成的任务。

# javascript - 进入 div 标签的单选按钮的样式标签

> ID：13952703
> 
> 赞同：5
> 
> 时间：2012-12-19T12:41:17.597
> 
> 标签：javascript, css

选中单选按钮时，我试图使我的标签具有不同的样式。问题是我正在使用一个名为 ezMark 的 javaScript 插件，它生成

这是代码。

```
<div class="ez-radio">
    <input type="radio" id="line0" name="line-style" value="1" class="ez-hide">
</div>
<label style="background:url('1.jpg')no-repeat;" ></label> 
```

这是我尝试用来设置代码样式的 CSS

```
.ez-radio input:checked+label {...} 
```

老实说，我不需要此页面上的 javaScript，但我正在使用模板并且它是动态加载的。是否有一个选项可以在单选按钮之前关闭 ezMark js？或者，尽管有 ezMark 脚本，也可以设置标签样式。

***编辑***

由`<div ez-radio`脚本动态生成。我无法控制，所以我可以在这个 div 之间添加标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:45:41.830

这应该工作

```
<div class="ez-radio">
    <input type="radio" id="line0" name="line-style" value="1" class="ez-hide">
    <label>Label</label>
</div> 
```

CSS

```
.ez-radio input:checked+label {
    font-size:2em;
} 
```

[http://jsfiddle.net/CGjCb/](http://jsfiddle.net/CGjCb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:50:55.570

您的元素需要是兄弟元素才能使用 ths`+`选择器。CSS 不能“向上”移动 DOM 树，所以它永远找不到标签。

HTML

```
<div class="ez-radio">
    <input type="radio" id="line0" name="line-style" value="1" class="ez-hide">
    <label style="background:url('1.jpg')no-repeat;" >Label</label>
</div> 
```

CSS：

```
.ez-radio input[type=radio]:checked + label 
{
    color: #0f0;
}​ 
```

[http://jsfiddle.net/Kyle_/eCgyH/](http://jsfiddle.net/Kyle_/eCgyH/)

* * *

在您编辑无法更改标记之后，您将不得不求助于 jQuery（javascript 库。）

```
$('.ez-radio input[type=radio]') .change( function() {
        $('label').css('color', '#0f0');        
}); 
```

[​http://jsfiddle.net/Kyle_/eCgyH/1/](http://jsfiddle.net/Kyle_/eCgyH/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:45:35.170

怎么样

```
// to apply only to checkbox use:
$('input[type="checkbox"]').not(".ez-hide").ezMark({
 checkboxCls: 'your-default-checkbox-class-name' ,
 checkedCls: 'your-checkbox-class-in-checked-state'
}); 
```

# java - 以跨平台方式维护 Mysql 数据库模式的最佳实践是什么？

> ID：13952704
> 
> 赞同：5
> 
> 时间：2012-12-19T12:41:20.170
> 
> 标签：java, mysql, sql, ruby-on-rails, jooq

我们有两个软件栈，Ruby on Rails 和 Java，它们共享一个 Mysql 数据库。我们正在使用 Jooq Java 数据库抽象层，它通过读取现有数据库模式并生成代码来工作。

我们一直依靠 Rails 迁移来跟踪模式更改，但是我们的 Java 开发人员对此并不熟悉，我们的 Rails 开发人员不得不不止一次地为我们解决问题。这也是一个相当繁琐的过程，进行架构更改可能需要 5-10 分钟，而如果直接通过 MySql Workbench 等工具修改架构则需要几秒钟。

最好有一个解决方案来修改与 Rails 无关的数据库模式，任何人都可以推荐一种合适的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:46:04.517

我想你可以看看[Liquibase](http://www.liquibase.org)。这是一个基于 Java 的工具，但据我了解，它会满足您的某些要求。使用该工具，您可以表达数据库内容（结构和数据），然后针对正在运行的数据库运行此类工具，该工具将告诉您缺少哪些更改并应用它们。

# java - 以线程安全的方式获取集合的内容

> ID：13952707
> 
> 赞同：4
> 
> 时间：2012-12-19T12:41:29.523
> 
> 标签：java, multithreading, collections

我想以多线程方式**阅读java Collection 的内容。**这里有很多具有相同背景的问题，但没有关于特定阅读点的问题。

我有一个整数集合。我只想要几个线程来迭代它，每个线程一次拉一个整数。我想确保所有集合都被迭代，并且没有整数被两个不同的线程拉两次。

坦率地说，我不知道什么有效。我知道迭代器不是线程安全的，但是当谈到只读时我不知道。我做了一些测试来尝试获取线程错误，但没有达到 100% 的确定性：

```
int imax = 500;
Collection<Integer> li = new ArrayList<Integer>(imax);
for (int i = 0; i < imax; i++) {
    li.add(i);
}
final Iterator<Integer> it = li.iterator();

Thread[] threads = new Thread[20];
for (int i = 0; i < threads.length; i++) {
    threads[i] = new Thread("Thread " + i) {
        @Override
        public void run() {
            while(it.hasNext()) {
                System.out.println(it.next());
            }
        }
    };
}

for (int ithread = 0; ithread < threads.length; ++ithread) {
threads[ithread].setPriority(Thread.NORM_PRIORITY);
    threads[ithread].start();
}
try {
    for (int ithread = 0; ithread < threads.length; ++ithread)
    threads[ithread].join();
} catch (InterruptedException ie) {
    throw new RuntimeException(ie);
} 
```

编辑：在实际用例中，这个整数中的每一个都用于开始一项密集的工作，例如确定它是否是素数。

上面的例子拉取了没有重复或未命中的整数列表，但不知道是不是偶然。

使用 HashSet 而不是 ArrayList 也可以，但同样，这可能是偶然的。

如果您有一个通用集合（不一定是列表）并且需要以多线程方式提取其内容，您在实践中如何做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:46:08.533

这取决于收藏。如果在读取过程中没有发生结构变化 - 您可以同时读取它，这很好。大多数集合不会仅更改读取或迭代的结构，因此可以，但请确保在这样做之前阅读您正在使用的集合的文档。

例如，[HashSet javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)：

> 请注意，此实现不同步。如果多个线程同时访问一个哈希集，并且至少有一个线程修改了该集，则必须在外部进行同步。

这意味着只要没有写入，同时从两个线程读取就可以了。

* * *

一种方法是拆分数据，让每个线程读取`collection.size()/ numberOfThreads`元素​​。
线程#i 将读取`collection.size()/numThreads * i`到`collection.size()/numThreads * (i+1)`

（请注意，需要特别注意确保不会遗漏最后一个元素，可以通过将最后一个线程 frpm 设置为 来完成`collection.size()/numThreads * i`，`collection.size()`但它可能会使最后一个线程做更多的工作，并且会让你等待挣扎的线程）。

另一种选择是使用间隔的任务队列，每个线程将在队列不为空时读取元素，并在给定的间隔中读取元素。队列必须同步，因为它同时被多个线程修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:47:52.570

一般来说，通过迭代收集内容的成本不足以进行多线程。就是获取内容后对列表进行的操作。所以你应该做的是：

1.  使用单线程获取内容并划分工作负载。
2.  启动几个线程/作业来进行处理，给他们一个（大）工作量。确保线程不使用原始列表。
3.  使用单个线程来组合结果。

如果您需要共享集合，请使用线程安全集合。它们可以通过使用[Collections](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html) .synchronized... 函数来创建。但是请记住，这意味着线程必须相互等待，如果您没有大量工作，那将使您的程序比单线程版本慢。

请注意，您在线程之间共享的所有对象都需要是线程安全的（例如，通过将所有访问包装在同步块中）。最好的信息来源是[实践中的并发](http://www.amazon.co.uk/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601/ref=sr_1_1?ie=UTF8&qid=1355921354&sr=8-1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T13:23:09.313

您的用例将受益于使用队列 - 有一些线程安全的实现，例如 ArrayBlockingQueue。

```
Collection<Integer> li = new ArrayList<Integer>(imax);
final BlockingQueue<Integer> queue = new ArrayBlockingQueue<>(li.size(), false, li);

Thread[] threads = new Thread[20];
for (int i = 0; i < threads.length; i++) {
    threads[i] = new Thread("Thread " + i) {
        @Override
        public void run() {
            Integer i;
            while ((i = queue.poll()) != null) {
                System.out.println(i);
            }
        }
    };
} 
```

这是线程安全的，每个线程都可以在初始集合的一部分上独立于其他线程工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T12:45:48.820

您可以使用从 中获得的同步版本`java.util.Collections`。或者您可以尝试`java.util.concurrent`（例如`ConcurrentHashMap`）中的特殊数据结构。

我更喜欢其中任何一个而不是自己滚动。

另一个想法是在必要时同步整个方法，而不仅仅是集合访问。

请记住，不可变对象始终是线程安全的。您只需要同步共享的、可变的状态。

# magento - Magento product_attribute.addOption 要求默认选项

> ID：13952711
> 
> 赞同：4
> 
> 时间：2012-12-19T12:41:50.460
> 
> 标签：magento, soap

我正在使用 Magento API 的 SOAP v1，我正在尝试向属性添加一个选项。使用以下文档[链接](http://www.magentocommerce.com/api/soap/catalog/catalogProductAttribute/product_attribute.addOption.html)

这是我用作测试的代码

```
$attributeCode = "colour";
$optionToAdd = array(
    "Label" => array(
        array(
            "store_id" => 1,
            "value" => "Green"
        )
    ),
    "order" => 0,
    "is_default" => 0
); 
```

当我调用 API 时，它返回以下内容 -

```
<b>Fatal error</b>:  Uncaught SoapFault exception: [108] Default option value is not defined 
```

我一辈子都无法让它发挥作用。文档中没有其他我遗漏的东西吗？！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T13:55:06.200

我认为您可能必须为 store_id 0 (admin) 定义一个值？您只需为 store_id 1 定义一个值，但它可能需要在管理员中具有一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T11:30:49.890

对已接受的答案的一个小补充。store_id 的值必须是 ArrayOfStrings。所以数据应该是这样的：

```
$attributeCode = "colour";
$optionToAdd = array(
    "label" => array(
        array(
            "store_id" => array("0","1"),
            "value" => "Green"
        )
    ),
    "order" => 0,
    "is_default" => 0
); 
```

# c++ - 不同 x86 操作/数据类型之间的区别？

> ID：13952717
> 
> 赞同：1
> 
> 时间：2012-12-19T12:42:01.703
> 
> 标签：c++, c, assembly, x86, cpu

各种 x86 指令有多少不同的操作周期时间，具体取决于所涉及的数据是 float、double、int、short、long 等？

我希望能够确定是否避免针对特定数据类型的特定指令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:54:52.423

处理器实际*执行*x86 指令的日子已经一去不复返了。486 处理器是第一个开始将它们转化为微操作的处理器。这可以以各种方式重新排序和组合，以实现具有多个执行单元的超标量执行。

这使得通过循环计数分解 x86 指令成为一种危险的冒险。英特尔处理器手册只是提供提示，您可以在第 4 卷中找到它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:51:10.457

> 我希望能够确定是否避免针对特定数据类型的特定指令。

您必须避免在任何其他数据类型或大小上使用任何处理特定数据类型和大小的指令，因为它会导致意外行为。例如，在典型的 x86 实现中，a`DWORD`的大小与 a 相同，`float`但它们的编码方式不同：分别是小端序和尾数/指数。

在汇编级语言中，机器没有“类型”的概念，它将根据它从当前指令指针处的操作码推断出的大小/编码信息对一块内存进行操作。

另一方面，如果您真的知道自己在做什么，将一种类型视为另一种类型并在极少数情况下对其进行修改可以产生异常结果 -[快速逆平方根](http://en.wikipedia.org/wiki/Fast_inverse_square_root#Overview_of_the_code)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:35:27.670

避免除法（包括余数/残数）。自然地使用其余的基本操作和类型。

# xml - 如何覆盖父/扩展元素内的 Xsd 元素

> ID：13952721
> 
> 赞同：13
> 
> 时间：2012-12-19T12:42:05.267
> 
> 标签：xml, xsd

我正在我的公司创建一个新的数据交换服务。我们想扩展在我们的 core.xsd 定义文件中定义的现有对象。这是我需要做的一个例子：

```
<xs:complexType name="parentType">
  <xs:sequence>
    <xs:element name="departmentName" type="core:DEPARTMENT_NAME" 
                minOccurs="0" maxOccurs="1" />    
  </xs:sequence>
</xs:complexType>

<xs:complexType name="childType">
  <xs:complexContent>
    <xs:extension base="parentType">
      <xs:sequence>
        <xs:element name="departmentName" 
                    type="core:DEPARTMENT_NAME" 
                    minOccurs="1" maxOccurs="1"/>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType> 
```

我认为这完全有道理。我想覆盖父元素并使其成为必需。但是，一个有效的 xml 文件就是这个。现在哪里有一个额外的部门名称！？

```
<childType>
  <departmentName>HR</departmentName>
  <departmentName>IT</departmentName>
</childType> 
```

我该怎么做才能使 XML 文件变为：

```
<childType>
  <departmentName>IT</departmentName>
</childType> 
```

谢谢，克雷格

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T19:23:18.203

您需要使用限制而不是扩展。对于您指出的场景，这将是一个完全有效的模式（我已经大量使用命名空间来使其有效）。

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xs:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:core="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="parentType">
        <xs:sequence>
            <xs:element name="departmentName" type="core:DEPARTMENT_NAME" minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="childType">
        <xs:complexContent>
            <xs:restriction base="parentType">
                <xs:sequence>
                    <xs:element name="departmentName" type="core:DEPARTMENT_NAME"/>
                </xs:sequence>
            </xs:restriction>
        </xs:complexContent>
    </xs:complexType>

    <xs:simpleType name="DEPARTMENT_NAME">
        <xs:restriction base="xs:string"/>
    </xs:simpleType>

    <xs:element name="childType" type="childType"/>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T12:27:55.973

```
if my scenario is as below
<xs:complexType name="parentType">
  <xs:sequence>
    <xs:element name="departmentName" type="core:DEPARTMENT_NAME" 
                minOccurs="1"/>    
  </xs:sequence>
</xs:complexType>

    <xs:complexType name="childType">
      <xs:complexContent>
        <xs:extension base="parentType">
          <xs:sequence>
            <xs:element name="departmentName" 
                    type="core:DEPARTMENT_NAME" 
                    minOccurs="0"/>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>
than what will be the solution. 
```

# ios - 将下载文件的 url 传递给 Phonegap 插件

> ID：13952724
> 
> 赞同：1
> 
> 时间：2012-12-19T12:42:15.150
> 
> 标签：ios, xcode, cordova

我正在使用这个精彩的[教程](http://www.drewdahlman.com/meusLabs/?p=161)为带有 phonegap 的 IOS 创建一个类似 Instagram 的应用程序

它很好用，但是当我尝试下载、存储照片并将照片传递给插件时，我收到错误消息

我的错误是：

```
Dec 19 14:36:58 iPhone-of-your-home Imagefilter [17418] <Error>: ImageIO: CGImageSourceCreateWithURL CFURLCreateDataAndPropertiesFromResource failed with error code -15. 
```

我的插件代码是：

```
-(void)none:(NSMutableArray *)arguments withDict:(NSMutableDictionary *)options
{
    //I think that here is the problem
    NSString *filePath = [options objectForKey:@"image"];
    // CREATE NSURL
    NSURL *fileNameAndPath = [NSURL URLWithString:filePath];
    NSLog(@"FILE PATH: %@",fileNameAndPath);

    // DEFINE OUR CIImage
    CIImage *beginImage = 
    [CIImage imageWithContentsOfURL:fileNameAndPath];
    CIContext *context = [CIContext contextWithOptions:nil];

    // DO ALL MODIFICATIONS HERE.

    CGImageRef cgimg = 
    [context createCGImage:beginImage fromRect:[beginImage extent]];
...
...
} 
```

正如我在捕获图像并传递它时从控制台看到的那样，它的 URL 如下：

```
file://localhost/var/mobile/Applications/EFDAF913-6287-4B46-B2FE-F9B0D3349DDF/tmp/cdv_photo_031.jpg 
```

虽然我下载的文件有一个类似的 URL

```
/var/mobile/Applications/EFDAF913-6287-4B46-B2FE-F9B0D3349DDF/Documents/img18.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:48:32.597

您的 img18.png 文件位于 Documents 目录中。

首先，您必须使用以下方法获取指向该指针的指针：

`NSString *docsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];`

然后构建路径：

`NSString *path = [docsDirectory stringByAppendingPathComponent:@"img18.png"];`

否则，您已经在代码中知道问题出在哪里。

# vb.net - 为什么“Try ... Catch .. End Try”不能捕获所有异常？VB.NET

> ID：13952729
> 
> 赞同：2
> 
> 时间：2012-12-19T12:42:24.947
> 
> 标签：vb.net, visual-studio-2008, securityexception

出现此错误

```
''System.Security.SecurityException: Requested registry access is not allowed.
   at System.ThrowHelper.ThrowSecurityException(ExceptionResource resource)'' 
```

当我尝试向注册表添加密钥时。我提到应用程序 requestedExecutionLevel 是“requireAdministrator”。启用 ClickOnce 安全设置并保留 requestedExecutionLevel ''asinvoker' 是一个更好的主意吗？

这是 VB.NET 代码的结构：

```
Try
[my code]
Catch sec As Security.SecurityException
         [another block of code]
Catch ex As Exception
         [another block of code]
End Try 
```

使用“on error resume next”语句是一个更好的主意吗？请向我解释为什么会出现这个错误？

VB.NET、Visual Studio 2008（在 Vindows Vista Ultimate x86 和 Windows 7 Ultimate x64 上出现错误，我以管理员帐户登录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:59:39.343

用户帐户控制 (UAC) 甚至需要管理员组帐户来提升应用程序。该提升必须由用户在应用程序开始时通过提交 UAC 对话框授予。

所以你需要编辑你的 app.manifest 使用

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

如果您不希望您的应用程序在每次启动时触发 UAC，您可以将需要提升到另一个可执行文件的操作外包，并像这样从未提升的进程中调用它

```
Dim elevatedProc As New Process
elevatedProc.FileName= "elevated.exe"
Try
elevatedProc.Start()
Catch ex As System.ComponentModel.Win32Exception
 MsgBox("Please commit UAC dialog")
End Try 
```

如果用户未提交 UAC 对话框，则会引发 System.ComponentModel.Win32Exception。

或者，您可以在系统帐户下运行的服务中运行您的东西，这根本不会触发 UAC。

# python - 在scrapy中用mysql插入数据

> ID：13952731
> 
> 赞同：2
> 
> 时间：2012-12-19T12:42:30.597
> 
> 标签：python, twisted, scrapy

这是我的演示，我认为没有错误但是这段代码不能向mysql插入数据！？

设置.py

这是设置代码：

```
BOT_NAME = 'Scan'
SPIDER_MODULES = ['scan.spiders']
#NEWSPIDER_MODULE = 'scan.spiders'
ITEM_PIPELINES = ['scan.pipelines.MySQLStorePipeline'] 
```

这是管道代码，我认为它没有错误：

管道.py

```
from scrapy import log
from twisted.enterprise import adbapi
from scrapy.http import Request
from scrapy.exceptions import DropItem
from scrapy.contrib.pipeline.images import ImagesPipeline
import datetime
import MySQLdb
import MySQLdb.cursors

class MySQLStorePipeline(object):

    def __init__(self):
        self.db = adbapi.ConnectionPool('MySQLdb',
            db = 'spider',
            host='localhost',
            user = 'root',
            passwd = '123456',
            cursorclass = MySQLdb.cursors.DictCursor,
            charset = 'utf8',
            use_unicode = True
        )

    def process_item(self, item, spider):
        query = self.db.runInteraction(self._conditional_insert, item)
        query.addErrback(self.handle_error)
        return item

    def _conditional_insert(self, tx, item):
        if item.get('url'):
            tx.execute(\
                "insert into spider (url) "
                "values (%s)",(item['link'])
            )
            #log.msg("Item stored in db: %s" % item, level=log.DEBUG)
    def handle_error(self, e):
        log.err(e) 
```

这是蜘蛛模块，我认为它没有错误！

蜘蛛.py

```
# coding=utf-8
from urlparse import urljoin
import simplejson

from scrapy.http import Request
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector

from scan.items import ScanItem

class ScanSpider(CrawlSpider):
    name = 'Scan'
    allowed_domains = ["a.com"]
    start_urls = [
        "http://www.a.com",
    ]
    rules = (
        Rule(SgmlLinkExtractor(allow=(r'http://(.*?)'),deny_domains=(r'qq.com'))
        ),
        Rule(SgmlLinkExtractor(allow=(r'http://www.a.com')), callback="parse_item"),
        )

    def parse_item(self, response):
        hxs = HtmlXPathSelector(response)
        item = ScanItem()
        items = []
        #item['title'] = hxs.select('//title/text()').extract()
        item['url'] = hxs.select('//a[@href]').re('(\"http://(.*?)\")').extract()
        items.append(item)
        return items
SPIDER = ScanSpider() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:42:23.053

you seriously needs to read out [http://doc.scrapy.org](http://doc.scrapy.org) , you are missing very basics .

```
def parse_item(self, response):
    hxs = HtmlXPathSelector(response)
    item = ScanItem()
    items = []
    #item['title'] = hxs.select('//title/text()').extract()
    item['url'] = hxs.select('//a[@href]').re('(\"http://(.*?)\")').extract()
    items.append(item)
    return items 
```

in your `parse_items` there is no need to add item in items of list you can simply return `item` like

```
 def parse_item(self, response):
       hxs = HtmlXPathSelector(response)
       item = ScanItem()
       #item['title'] = hxs.select('//title/text()').extract()
       item['url'] = hxs.select('//a[@href]').re('(\"http://(.*?)\")').extract()
       return item 
```

keeping in mind `item['url']` has a list of `urls`

in your `MySQLStorePipeline`

```
def _conditional_insert(self, tx, item):
    if item.get('url'):
        tx.execute(\
            "insert into spider (url) "
            "values (%s)",(item['link'])
        ) 
```

you are trying to insert `item['link']` in database while you never populated `item['link']` but only `item['url']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:09:17.423

目前，没有进一步澄清。

我认为，由于预计刮擦的返回是一个`Item`（其子类，甚至只是一个`dict`- 我承认我没有彻底检查代码以了解它*应该*/*确实*如何工作），那么：

```
item = ScanItem()
items = []
...
return items 
```

看起来有点苏。

你需要做更多的分析才能得到一个有意义/正确的答案。

# python - Macintosh wxPython EVT_TASKBAR_LEFT_UP 或替代

> ID：13952735
> 
> 赞同：4
> 
> 时间：2012-12-19T12:42:48.573
> 
> 标签：python, macos, click, wxpython, taskbar

我正在尝试创建一个驻留在通知区域或任务栏/系统托盘区域的简单应用程序。我希望它是跨平台的，所以这就是我使用 wxPython 的原因。

该应用程序在 Windows 和 Linux 下运行良好，但在 Macintosh 下，单击 TaskbarIcon 时无法显示主窗口。TaskbarIcon 出现在 Dock 中这一事实并不困扰我。只是我的应用程序没有这个就无法工作。

这是一些可以重现问题的简化代码：

```
from views import embimgs                                     
import wx                                                     

class MyTaskBarIcon(wx.TaskBarIcon):                          

    def __init__(self, app):                                  
        wx.TaskBarIcon.__init__(self)                         

        self.app = app                                        

        self.Bind(wx.EVT_TASKBAR_LEFT_UP, self.on_left_up)    
        self.Bind(wx.EVT_TASKBAR_RIGHT_UP, self.on_right_up)  

    def on_left_up(self, evt):                                
        print 'Left upped!'                                   

    def on_right_up(self, evt):                               
        print 'Right upped!'                                  
        self.app.ExitMainLoop()                               

def main():                                                   
    app = wx.PySimpleApp()                                    
    mti = MyTaskBarIcon(app)                                  
    mti.SetIcon(wx.IconFromBitmap(embimgs.logo64.GetBitmap()))
    app.MainLoop()                                            
    app.Destroy()                                             

if __name__ == '__main__':                                    
    main() 
```

在 Windows 和 Linux 上，左键单击图标会打印“左上角”。右键单击打印“Right upped.”，然后应用程序退出。在 Macintosh 上，左键单击图标除了闪烁图标之外没有任何作用；右键单击打印“Right upped.”，然后应用程序退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:28:40.473

正如[这里](http://wiki.wxpython.org/Optimizing%20for%20Mac%20OS%20X/)所解释的，有几种方法可以覆盖某些仅在 Mac 上可用的操作。

在我的情况下，我只需要覆盖 wx.App 类的 MacReopenApp 方法。每次用户单击停靠栏中的图标时都会调用此方法。

例如，只需在类中添加：

```
 def MacReopenApp(self):
        print 'Dock Icon clicked!' 
```

只是为了完成，其他方法是：MacOpenFile(self, filename), MacNewFile(self) 和 MacPrintFile(self, file_path)

# php - 为什么我的脚本在输出结果 PHP 之前结束

> ID：13952736
> 
> 赞同：-4
> 
> 时间：2012-12-19T12:42:55.200
> 
> 标签：php

我的脚本重新启动并且不输出。这是代码：

```
<?php if (isset($_POST['submit3']) || isset($_POST['submit2'])) : ?>

<?php else : ?>

    <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
        <br>Nacin rada 1
        <br>Nacin rada 2
        <input type="submit" name="submit2" value="Nacin rada 1">
        <input type="submit" name="submit3" value="Nacin rada 2">
    </form>

<?php endif ?>

<?php if (isset($_POST['submit2'])) : ?>

    <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
        Zeljena dubina: <input size="5" type="text" name="dubina"><br>
        Ulazni kut glave: <input size="5" type="text" name="uk"><br>
        Maximalan kut pomaka glave: <input value="2" size="5" type="text" name="kpg"><br>
        <input type="submit" name="submit" value="Unesi Vrijednosti">
    </form>

    <?php 
        if (isset($_POST['submit'])) { //preuzimanje formova
            $_POST['submit2'] = true;
            $kpg = 0;
            $dubina = (int)$_POST['dubina'];

 //some math stuff and working output

        }
    ?>

<?php elseif (isset($_POST['submit3'])) : ?>

    <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
        Zeljena dubina: <input size="5" type="text" name="dubina"><br>
        Zeljena udaljenost: <input size="5" type="text" name="duljina"><br>
        Maximalan kut pomaka glave: <input value="2" size="5" type="text"  name="kpg"><br>
        <input type="submit" name="submit5" value="Unesi Vrijednosti">
    </form>

    <?php
        if (isset($_POST['submit5'])) { //preuzimanje formova
            $_POST['submit3'] = true;
            $kpg = 0;
            $dubina = (int)$_POST['dubina'];
            $duljina = (int)$_POST['duljina'];

        // some math stuff and working output
        }
    ?>

<?php endif ?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <input type="submit" name="submit4" value="Kreni ponovno">
</form> 
```

所以基本上我想做的是首先显示 2 个按钮，然后单击其中一个按钮进入该模式，在该模式下我们必须输入一些参数，然后单击另一个按钮输入数据。然后脚本应该编写代码并输出最终结果......当我不希望这个具有 2 种模式的解决方案都能很好地工作时，试图打开所有错误和信息，但什么也没有。我认为问题在于 if 语句连接了 w 按钮但找不到它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:46:34.137

您错误地使用了 if 速记符号。它需要按以下顺序：`$result = ($value == 'content' ? true : false);`

如果您想将符号与 一起使用`endif`，请去掉问号。

```
if($a > $b):
    echo $a." is greater than ".$b;
elseif($a == $b): // Note the combination of the words.
    echo $a." equals ".$b;
else:
    echo $a." is neither greater than or equal to ".$b;
endif; 
```

如果您还没有，我建议您更改您的 PHP 日志级别以显示警告和信息消息。它将为您提供一些关于哪里出了问题的更多信息。

# objective-c - 将 kal 日历实现到 tabbar 应用程序中

> ID：13952741
> 
> 赞同：0
> 
> 时间：2012-12-19T12:43:20.453
> 
> 标签：objective-c, ios, cocoa-touch, calendar

我想使用 kal 日历框架。但我不知道如何将其实现到标签栏应用程序中。当我查看如何初始化 kalViewController 的演示时，它看起来像这样。

```
-(void)viewDidLoad{
    KalViewController *calendar = [[KalViewController alloc] init];
    [self.navigationController pushViewController:calendar animated:YES];
} 
```

这行得通，但它转到另一个视图。我希望它使用情节提要以相同的视图显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:08:46.033

我检查了 KalViewController 类。它没有`initWithCoder:`实现，如果从 nibs/storyboards 实例化则调用的初始化程序。

我添加了这个以使其工作：

```
-(id)initWithCoder:(NSCoder *)aDecoder
{
    if ((self = [super initWithCoder:aDecoder])) {

        NSDate *date = [NSDate date];
        logic = [[KalLogic alloc] initForDate:date];
        self.initialDate = date;
        self.selectedDate = date;
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(significantTimeChangeOccurred) name:UIApplicationSignificantTimeChangeNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadData) name:KalDataSourceChangedNotification object:nil];
    }
    return self;
} 
```

比我只是将 UIViewController 拖到 storybord 舞台上，在检查器中将它的类更改为 KalViewController，将它从标签栏控制器连接起来，它就可以工作了。

* * *

我创建了一个示例项目：[TabbedKalTest@GitHub](https://github.com/vikingosegundo/TabbedKalTest)

* * *

当然 DRY 应该记住：

```
-(void) _configureWithDate:(NSDate *)date
{
    logic = [[KalLogic alloc] initForDate:date];
    self.initialDate = date;
    self.selectedDate = date;
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(significantTimeChangeOccurred) name:UIApplicationSignificantTimeChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadData) name:KalDataSourceChangedNotification object:nil];
}

//called if created by nib/storyboard
-(id)initWithCoder:(NSCoder *)aDecoder
{
    if ((self = [super initWithCoder:aDecoder])) {
        [self _configureWithDate:[NSDate date]];
    }
    return self;
}

//the designated initializer for non-nib/storyboard creation
- (id)initWithSelectedDate:(NSDate *)date
{
  if ((self = [super init])) {
    [self _configureWithDate:date];
  }
  return self;
} 
```

* * *

我在 Kal 创建了一个分支来解决这个问题并发布了一个[pull-request](https://github.com/klazuka/Kal/pull/75)。

# ruby-on-rails - 自定义 rails has_many 关联（通过 pg 数组）

> ID：13952744
> 
> 赞同：17
> 
> 时间：2012-12-19T12:43:23.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以基本上我想知道是否有一些通用的方法来定义自己的关联类型。一些细节：

我有一个模型`conversations`，它有一个 PG 数组列`user_ids`。因此，要检索用户对话，我需要运行： `select conversations.* from conversations where USER_ID = ANY(conversations.user_ids)`

由于`finder_sql`现在不推荐使用它的朋友，我真的很想知道实现这个伪 has_many 关联的最佳方法是什么？

目前我只使用以下方法：

```
 def conversations
   Conversation.where("#{id} = ANY (conversations.users)")
 end 
```

所以基本上我正在考虑实施我自己的`ActiveRecord::Associations::CollectionAssociation`，并想知道是否有一些好的参考资料，或者你是否可以建议从哪里开始

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-22T19:35:22.567

我建议对您的模型进行规范化，以拥有另一个表来保持用户和对话之间的关系，例如，构建一个像

用户对话

你的关系将是

```
class User < ApplicationRecord
  has_many :users_conversations, :dependent => :destroy
  has_many :conversations, :through => :users_conversations
end

class Conversation < ApplicationRecord
  has_many :users_conversations, :dependent => :destroy
  has_many :users, :through => :users_conversations
end 
```

然后你可以轻松做到

```
#users for each specific conversation
@users = Conversation.find(1).users
#conversations for each specific user
@conversations = User.find(1).conversations 
```

除非您想保持相同的方式或数组，否则您可以这样做

```
@users = User.where(:id => Conversation.find(1).user_ids) 
```

如果 user_ids 存储为像 [1,10,20] 这样的数组，那么它将正常工作并返回用户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-24T01:44:27.113

您应该将其重新构建为包含会话 ID 和用户 ID 的参考表，然后您可以使用 Rails 的最佳实践（[https://guides.rubyonrails.org/association_basics.html#the-has-many-through -协会](https://guides.rubyonrails.org/association_basics.html#the-has-many-through-association)）

如果您仍想保留此结构，我建议：

`User.where(id: conversion.user_ids)`（conversion 是 Conversation 表的一个实例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T17:31:39.410

怎么样：

```
Conversation.user.select{ |conversation| conversation.user_ids.include?(params[:id]) 
```

考虑到 user_ids 列是序列化的，当前用户 id 是通过 params[:id] 传递的

主要方法是，如果你有一个数组，你可以用 .include?(something) 方法检查它是否有“东西”。以这种方式思考，您可以使用 select 方法通过 include 方法实际选择在此数组中具有其 ID 的对象（在本例中为用户）。我说清楚了吗？

告诉我它是否有效...

# php - Jmathai-twitter-async 仅通过一个帐户进行日志记录

> ID：13952745
> 
> 赞同：0
> 
> 时间：2012-12-19T12:43:35.597
> 
> 标签：php, twitter, twitter-oauth

我使用 jmathai-twitter-async 在我的网站上使用 PHP 创建了一个 twitter 应用程序。一切正常，只是它总是只通过一个帐户登录，而该帐户是我在 dev.twitter 上创建 twitter 应用程序的那个帐户。谁能告诉我这背后的原因是什么？它是api中的例外还是我错过了什么？提前致谢。一开始我以为我已经对其进行了硬编码……但是我检查了整个代码，但一无所获。这是我的 login-twitter.php 代码

```
<code>
   <?php
    session_start(); 
    require_once('twitterLib/EpiCurl.php');
    require_once('twitterLib/EpiOAuth.php');
    require_once('twitterLib/EpiTwitter.php');
    require_once('twitterLib/secret.php');
    require_once('config/functions.php');
    $twitterObj = new EpiTwitter($consumer_key, $consumer_secret, $token, $secret);
    $twitterObjUnAuth = new EpiTwitter($consumer_key, $consumer_secret);
    $oauth_token = $_GET['oauth_token'];
    if($oauth_token == '')
    { 
    $url = $twitterObjUnAuth->getAuthenticateUrl();
    header('Location:'.$url);
    }
    else{ 
    $token = $twitterObj->getAccessToken();
    $twitterObj->setToken($twitterObj->token, $twitterObj->tokenSecret);         
    $_SESSION['ot'] = $twitterObj->token;
    $_SESSION['ots'] = $twitterObj->tokenSecret;
    $twitterInfo = $twitterObj->get('/account/verify_credentials.json');
    $twitterInfo->response;
    $username = $twitterInfo->screen_name;
    $profilepic = $twitterInfo->profile_image_url;
    $uid = $twitterInfo->id;
    $ip_address = $_SERVER['REMOTE_ADDR']; 
    $_SESSION['oauth_id'] = $uid;
    $_SESSION['username'] = $username;
    $_SESSION['oauth_provider'] = "twitter";
    $user = new User();
    $userdata = $user->checkUser($uid, 'twitter', $username,'',$twitterObj->token,$twitterObj->tokenSecret,$profilepic,$ip_address);
    if(!empty($userdata)){
    $_SESSION['id'] = $userdata['id'];           
    header('Location:index.php?id='.$_SESSION['id']);
    }
    else
    {}
    }     
    ?>
</code> 
```

现在这里的问题是 $twitterInfo->response 总是给出相同的响应，即它总是使用我创建应用程序的帐户登录。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:45:02.883

听起来您已经硬编码了用户密钥和秘密。

为什么不显示一些您认为出现问题的代码。

# iphone - 如何从不同类的核心数据中获取值

> ID：13952752
> 
> 赞同：0
> 
> 时间：2012-12-19T12:44:10.067
> 
> 标签：iphone, objective-c, ios, core-data

最近开始学习CoreData。弄清楚如何创建数据库，创建表（事件）并添加数据。清楚这一点。现在的问题。在我的项目中，有几个类。所有数据库活动（创建/填充），我在第一类（myProject.h / myProject.m）中进行现在我想在不同的类（myProjectOtherClass.m）中获取请求的数据我该怎么做？我了解如何在 myProject.m 类中执行此操作，但如何在 myProjectOtherClass.m 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:04:59.113

我假设您在 myProject.h / myProject.m 中为您的实体（TableNames）导入以查看这些数据条目的属性。您还应该在要使用它们的其他类中导入所需的数据实体，插入删除等.

您需要创建新的实例`NSManagedObjectContext`以获取结果或插入新实体，为此您需要持久存储变量（`NSPersistentStoreCoordinator`）的属性。它向您显示存储的位置。在最简单的情况下，如果您使用 CoreData 模板创建了项目对于 Xcode，它们都驻留在 AppDelegate 中，因此您可以使用属性使其在 AppDelegate 之外可见。

更新：
或者，您也可以将属性放在 AppDelegate 中的单个 MOC 上，并将其用于每个单个核心数据操作

# javascript - kendo ui中的自动完成过滤

> ID：13952753
> 
> 赞同：0
> 
> 时间：2012-12-19T12:44:15.350
> 
> 标签：javascript, jquery, asp.net-mvc-3, kendo-ui

我需要过滤已经选择的国家。我已经从以下链接编写了代码。
[http://jsbin.com/oqucix/4](http://jsbin.com/oqucix/4)

当我动态定义数据源时，我没有得到记录。

```
var countriesDS = new kendo.data.DataSource({
    transport: {
        read: {
            url : "/Home/Countries",
            type: "POST",

            dataType: "json"
        }
    },
    schema: {
        model: {
            id: "id",
            fields: {
                id  : { type: "id" },
                name: { type: "string" }
            }
        }
    }
}); 
```

然后我将能够重定向到该操作方法并检索值，但在自动完成中我没有得到记录。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:31:46.720

这是`DataSource`和`AutoComplete`定义：

```
// create a datasource bound to the local data
var countriesDS = new kendo.data.DataSource({
    transport: {
        read: {
            url     : "/Home/Countries",
            type    : "POST",
            dataType: "json"
        }
    },
    schema   : {
        model: {
            id    : "id",
            fields: {
                id  : { type: "id" },
                name: { type: "string" }
            }
        }
    }
});

var autoComplete = $("#auto").kendoAutoComplete({
    minLength      : 3,
    separator      : ", ",
    dataSource     : countriesDS,
    serverFiltering: true,
    dataTextField  : "name"
}).data("kendoAutoComplete"); 
```

这就是服务器返回国家列表的方式。

```
[
    { "id":1, "name":"Albania" },
    { "id":2, "name":"Andorra" },
    { "id":3, "name":"Armenia" },
    { "id":4, "name":"Austria" },
    { "id":5, "name":"Azerbaijan" },
    ...
] 
```

# kohana - Kohana 3.3 页面上出现意外字符

> ID：13952755
> 
> 赞同：2
> 
> 时间：2012-12-19T12:44:28.747
> 
> 标签：kohana, kohana-3, kohana-3.3

我的 kohana 3.3 站点包含页面，我的实现如下：

```
$block_center = 'here is html form';
$this->template->block_center = array($block_center); 
```

当然，我使用了类似的结构`View::factory(' .. ')->bind ...`- 没关系（结果是一样的）。

在 xampp v3.0.12 上运行站点时，它可以正常工作。但是当我在主机（Apache/2.2.22 (Unix) PHP/5.3.8）上运行它时 - 乐趣开始了：
四个意想不到的符号出现在页面顶部的 html 标记之前（例如：）`5aeb`和`/html`底部之后页面出现`0`。
当我减少 html 代码的数量（在“block_center”中）时，符号正在更改（似乎在减少）到 2469、22b4 等等。如果我留下将近十行代码，意外的符号就会消失。

任何人都可以帮助我认识到 kohaha 中这种意外输出的原因吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:50:48.287

检查您的 HTTP 协议标头。似乎 Kohana 默认使用 HTTP/1.1，而您的服务器没有。只需比较`$_SERVER['SERVER_PROTOCOL']`HTTP 标头（例如使用 firebug）。请注意，您可以使用[Request::protocol()](http://kohanaframework.org/3.3/guide-api/Request#protocol)和[Response::protocol()](http://kohanaframework.org/3.3/guide-api/Response#protocol)设置/获取协议值。

这些链接可能会有所[帮助](https://stackoverflow.com/questions/4452284/codeigniter-strange-output-issue)：[1、2](http://forum.kohanaframework.org/discussion/5681/weird-hex-numbers-in-the-beginning-and-end-of-request-response/p1)

# kernel - 子级列表 - Sched.h - 内核

> ID：13952757
> 
> 赞同：2
> 
> 时间：2012-12-19T12:44:36.073
> 
> 标签：kernel, children

我在哪里可以找到在 sched.h 中用于保留进程的子进程的“struct list_head children; /* list of my children */”的定义？
我需要访问特定孩子的task_struct，但我不知道如何获得指向它的指针，而且我不知道孩子列表的字段是什么......
谢谢我提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:15:43.690

我想我通过网络上的一些研究找到了解决方案。我将它发布给任何对此感兴趣的人。

> 结构任务结构*任务；
> 结构列表头*列表；
> 
> list_for_each(list, ¤t->children) {
> task = list_entry(list, struct task_struct, children); /* 任务现在指向当前的一个孩子 */
> }

# ios - 如何将图像从 UIImageView 传递到另一个 ViewController 的 ImageView？

> ID：13952758
> 
> 赞同：-2
> 
> 时间：2012-12-19T12:44:35.740
> 
> 标签：ios, image, uiimageview

我是 iOS 开发的新手，我没有找到解决问题的有效方法。

我的应用程序允许用户从相机或相机胶卷中拍照，然后将这张照片显示`UIImageView`在`viewcontroller1`.

我希望`UIImageView`在`viewcontroller2`单击`viewcontroller1`.

我正在使用 Storyboard 和最新版本的 Xcode（目标：iOS 6）。

我已经尝试过`NSUserDefaults`没有成功的方法。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:49:31.483

当您呈现下一个 View Controller 时，在`prepareForSegue:`您编写的方法中：

```
SecondVC *secondVC = segue.destinationViewController;
secondVC.imageView.image = self.imageView.image; 
```

希望这可以帮助！

# php - 如果发现错误，单击提交按钮后需要在文本框中保留值

> ID：13952759
> 
> 赞同：1
> 
> 时间：2012-12-19T12:44:43.170
> 
> 标签：php, html, submit

我衷心问候我需要在单击提交按钮后保留文本框中的值，如果发现错误。基本上我想要的东西，如果用户将任何字段留空并按下保存按钮，则会弹出错误消息并且不刷新页面，它会将用户带回表单，他只需填写留空的字段...下面是我的代码

```
<html>
<form method="post" action="">
Enter Name  :   <input type="text" name="name" /><br/>
Enter Password  :   <input type="password" name="pass" /><br/>
<input type="submit" name="save" value="Save" />
</form>
</html>
php code
<?php
if (isset($_POST["save"]))
{
$name = $_POST["name"];
$pass = $_POST["pass"];
if (($name == '') && ($pass == '')) 
{
echo "Fields Must Be Filled...";
exit();
}
if ($name == '') {
echo "Enter Name...";
exit();
}
if ($pass == '') {
echo "Enter Password...";
exit();
}
else
{        
echo "Your name " . $name;
echo "<br/>";
echo "Your Password " . $pass;
}
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:47:33.607

只需将输入字段的值设置为与 $_POST 参数匹配即可。你的表格是..

```
<html>
<form method="post" action="">
Enter Name  :   <input type="text" name="name" value="<?php echo $_POST['name']; ?>" /><br/>
Enter Password  :   <input type="password" name="pass" value="<?php echo $_POST['pass']; ?>" /><br/>
<input type="submit" name="save" value="Save" />
</form>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:47:06.507

输入名字 ： `<input type="text" name="name" /><br/>`

会是这样的

```
<?php 

$postvalue_name = (isset($_POST['name'])) ? $_POST['name'] : 'Fill in your name..'; 
?>

Enter Name  : <input type="text" name="name" value="<?php echo $postvalue_name; ?>" /><br/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:51:24.217

首先，为您的 POST 处理提供一种更简单的方法。你可以做一个

```
foreach( $_POST as $key => $value )
{
   ${$key} = $value;
   //If you need to database process the data, you can put mysql_escape_string( $value );
} 
```

现在，您的所有 POST 都将在具有字段名称的变量中。

在处理它们以查找错误等之后，您希望它们在您的表单元素的值中。你可以只使用变量

```
<input type="text" name="email" value="<?=$email?>"> 
```

或者，如果您使用 POST

```
<input type="text" name="email" value="<?=$_POST['email']?>"> 
```

此致。乔纳斯

工作代码:-)

```
<?php
if (isset($_POST["save"]))
{
    //Run through all objects set in the POST array
    foreach( $_POST as $key => $value )
    {
        //Set a variable named the same as the input elements name, and with the value
        ${$key} = $value;
    }
}

    $error = false;
    if( empty($name) && empty($pass) ) 
    { 
        $error = true;
        $message = "Fields must be filled...";
    }
    elseif( empty($name) )
    { 
        $error = true;
        $message = "Enter name...";
    }
    elseif( empty($pass) )
    {
        $error = true;
        $message = "Enter Password...";
    }

    if( $error == true && isset($message) )
    {
        echo $message."<br><br>";
    }
    else
    {
        echo "Your name " . $name;
        echo "<br/>";
        echo "Your Password " . $pass;
    }
?>
<html><br><br>
<form method="post" action="">
Enter Name  :   <input type="text" name="name" value="<?=(isset($name) ? $name : "")?>"/><br/>
Enter Password  :   <input type="password" name="pass" value="<?=(isset($pass) ? $pass : "")?>" /><br/>
<input type="submit" name="save" value="Save" />
</form>
</html> 
```

# c# - 为什么绑定不起作用？

> ID：13952760
> 
> 赞同：0
> 
> 时间：2012-12-19T12:44:57.343
> 
> 标签：c#, wpf, binding, user-controls

所以我创建了一个带有“ShowCode”属性的用户控件来学习如何使用属性。我希望此属性隐藏网格中的第二行。

看法：

```
 <UserControl x:Class="Test.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid Margin="0,0,0,0" Name="outergrid" DataContext="{Binding}">
      <Grid.RowDefinitions>
        <RowDefinition Height="3*" />
        <RowDefinition Height="1*" />
    </Grid.RowDefinitions>

    <ContentControl Name="XAMLView" Grid.Row="0"/>
    <GridSplitter ResizeDirection="Rows" 
                Grid.Row="0"
                VerticalAlignment="Bottom" 
                HorizontalAlignment="Stretch" />
    <Border Width="11" Grid.Row="1" Background="Black" />
</Grid> 
```

代码：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
        outergrid.RowDefinitions[1].SetBinding(RowDefinition.HeightProperty, new Binding() { Path = new PropertyPath("ShowCode"), Source = this, Converter = new BoolToHeightConverter(), ConverterParameter = "True" });
    }

    public bool ShowCode
    {
        get { return (bool)GetValue(ShowCodeProperty); }
        set { SetValue(ShowCodeProperty, value); }
    }

    public static readonly DependencyProperty ShowCodeProperty =
        DependencyProperty.Register("ShowCode",
        typeof(bool),
        typeof(UserControl1),
        new PropertyMetadata(true, new PropertyChangedCallback(OnShowCodeChanged)));

    static void OnShowCodeChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        UserControl1 source = (UserControl1)sender;

        //source.outergrid.RowDefinitions[1].Height = 
    }

    public class BoolToHeightConverter : IValueConverter
    {
        public object Convert(object value, Type targetType,
            object parameter, System.Globalization.CultureInfo culture)
        {
            if ((string)parameter == "False") return "0";
            return "1*";
        }

        public object ConvertBack(object value, Type targetType,
            object parameter, System.Globalization.CultureInfo culture)
        {
            if ((int)parameter == 0) return false;
            return true;
        }
    }
} 
```

问题：当我这样使用它时：

```
<xamlviewer:UserControl1 ShowCode="False"/> 
```

Convert(...) 被调用 2 次并且两次“参数”都是“True”，否则如果 ShowCode="True" Convert() 只被调用一次并且“parameter”又是“True”

为什么总是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:54:05.463

参数始终为真，因为您使其具有该值：

```
outergrid.RowDefinitions[1].SetBinding(
    RowDefinition.HeightProperty, 
    new Binding() 
    {
        Path = new PropertyPath("ShowCode"), 
        Source = this, 
        Converter = new BoolToHeightConverter(), 
        ConverterParameter = "True" // <---- You are enforcing its value here.
    }); 
```

无论如何，您的转换器都搞砸了：您必须检查是否`value`不能`parameter`正确地来回转换数据：

```
// NOTE: Your property is BOOL not STRING.
public class BoolToHeightConverter : IValueConverter
{
    public object Convert(object value, Type targetType,
        object parameter, System.Globalization.CultureInfo culture)
    {
        if(value is bool)
            if((bool)value) return new GridLength(1, DataGridLengthUnitType.Star);
            else return new GridLength(0);

        throw new ArgumentException("Not a bool");
    }

    public object ConvertBack(object value, Type targetType,
        object parameter, System.Globalization.CultureInfo culture)
    {
        // You may not need this method at all!
        if(value is GridLength)
            return ((GridLength)value).Value == 0);
        throw new ArgumentException("Not a GridLength");
    }
} 
```

不再需要参数（除非您在其他地方有其他需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:55:17.180

这里至少有两件事是错误的。

1.  您的转换器返回一个字符串，它应该返回一个[GridLength](http://msdn.microsoft.com/en-us/library/system.windows.gridlength.aspx)。

2.  要转换的值是传递给转换器的`value`参数，而不是传递给`parameter`它，它是一个`bool`.

所以你应该这样写：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if (value is bool && (bool)value)
    {
        return new GridLength(1, GridUnitType.Star);
    }

    return new GridLength(0);
} 
```

绑定中不需要转换器参数：

```
outergrid.RowDefinitions[1].SetBinding(
    RowDefinition.HeightProperty,
    new Binding()
    {
        Path = new PropertyPath("ShowCode"),
        Source = this,
        Converter = new BoolToHeightConverter()
    }); 
```

# php - TinyMCE 值在第一次提交时返回 NULL/无值

> ID：13952762
> 
> 赞同：3
> 
> 时间：2012-12-19T12:45:01.157
> 
> 标签：php, forms, tinymce

我是新来的`TinyMCE`......我仍然想知道这个问题

我有从 1 页动态加载的表单。表格上有tinyMCE textarea。在我在文本区域上放置一些值后第一次提交时，文本区域的值没有被`$_REQUEST['Sub-Headline']`. 我必须再次单击提交按钮，有时我需要重新打开表单才能接收到值`$_REQUEST['Sub-Headline'];`

你们能建议我需要检查什么以及我应该添加哪些选项/其他内容吗？

这是表单的部分代码：

**TinyMCE**

```
<script type="text/javascript">
    tinyMCE.init({
            mode : "textareas",
        theme : "advanced",
            theme_advanced_buttons1 : "bold,italic,underline,strikethrough,undo,redo",        
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
        convert_urls : false,
        plugins : "legacyoutput"
    });
</script> 
```

**形式**

```
 <form action="web-block/forms/process-001.php" id="Frm001" method="post" class="general-form" enctype="multipart/form-data">
    <div class="input-wrap">
        <input class="clearme" name="Headline" value="<?php echo $Headline;?>" id="headline"/>
    </div>

    <div class="input-wrap">
    <textarea class="clearme" name="Sub-Headline" id="subheadline"><?php echo $SubHeadline;?></textarea>
    </div>

<label>Main Image</label>
<div class="up-mask">
    <span class="file-wrapper">
      <input type="file" name="pics" class="photo" id="pics" />
      <span class="button">
         <span class="default-txt">Upload Photo (Max Size 300Kb, 960x567 pixels)</span>
      </span>
    </span>
</div><!-- .up-mask -->

<input type="hidden" name="Key" id="Key" value="<?php echo urlencode($Key);?>"/>
<input type="submit" class="submit-btn" value="Save" />
<a href="#" id="reset">Reset</a>
<span class="save-notice"></span>
</form> 
```

**提交代码**

```
$(document).ready(function() {
    var options = {
        beforeSubmit: function() {
            alert("kuntul");
            tinyMCE.triggerSave();
        },
        success: function() {
            $('span.save-notice').text('Save Changed Successfully');
            $('span.save-notice').show(2000);
                $('span.save-notice').hide(2000);
        }
    };
    $('#Frm001').submit(function() { 
            $(this).ajaxSubmit(options); 
            return false; 
        });
});      
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:52:13.653

您必须`tinymce.triggerSave()`在提交表格之前致电。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:48:49.670

请将您的 javascript 代码放在您的 html 代码下方。它应该工作..

HTML 代码在这里........

下面的脚本..

```
<script type="text/javascript">
    tinyMCE.init({
            mode : "textareas",
        theme : "advanced",
            theme_advanced_buttons1 : "bold,italic,underline,strikethrough,undo,redo",        
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom",
        convert_urls : false,
        plugins : "legacyoutput"
    });
</script> 
```

# javascript - 如何使用 javascript 在 2 个 html 页面之间发送数据？

> ID：13952770
> 
> 赞同：3
> 
> 时间：2012-12-19T12:45:35.620
> 
> 标签：javascript, html

我有 2 个 html 文件，fillForm.html 和 AnswerForm.html，以及一个名为 scripts.js 的 javascript 文件填写完所有表格，然后将数据发送到第二页，屏幕上会显示：“你好“姓名”，您的年龄是“年龄”“我认为这是请求和响应的事情，但我想做它与 post 一起使用，而不是使用 get 从 url 中获取数据。我在 fillForm 页面中有这个：

```
<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="scripts.js"></script>
    <script src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.8.2.js" 
         type="text/javascript"></script>

    </head>

    <body>
        <form name="myForm" action="AnswerForm.html" onsubmit="return validateForm()" method="post">
            First name: <input type="text" name="fname"><br/>
            Age: <input type="text" name="age">
            <input type="submit" value="Submit">
        </form>
    </body>

</html> 
```

scripts.js 中的脚本是：

```
function validateForm()
{
    var firstName=document.forms["myForm"]["fname"].value;
    var Age=document.forms["myForm"]["age"].value;
    if ((firstName==null || firstName=="") || (Age==null || Age==""))
    {
          alert("fillOut  all the form");
          return false;
    }
    else
    {

    }
} 
```

知道我只想获取数据并将其显示在 ANSWERFORM.html 上，在这里我需要帮助。另外我有一个问题：表格的检查是好的还是有更好的检查方法？因为如果我没有2个数据要检查，而是40个，这个检查会很长，而且检查不是具体的而是一般的）谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:48:27.567

您通常需要一个服务器端代码/进程来处理这样的数据。

但是如果你想留在javascript中，你可以使用`localStorage`来存储一些数据并在下一页中使用它。但`localStorage`不要在所有浏览器上工作，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:56:53.837

在其他部分使用以下代码

```
document.forms["myForm"].action="AnswerForm.html?fanme="+firstName+"&age="+Age;
return true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:50:28.003

这样做的正常方法可能是将数据与请求一起发布到网络服务器，使用一些服务器端语言来处理它并在下一页上正确呈现数据，但可以使用 JavaScript 做类似的事情我猜。

这个想法是修改您的 HTML 表单以通过 HTTP GET 而不是 POST 发布数据。然后，在调用 AnswerForm.html 时，您的表单数据将被添加到查询字符串中。然后，在答案页面上，您可以使用类似于此[SO 答案](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)中描述的示例的内容阅读查询字符串，然后在加载时将内容注入您的答案页面，并进行一些简单的 DOM 操作。

**注意：**此解决方案将完全依赖 JavaScript 工作，否则用户将看不到答案页面上的任何数据。

**更新：**

使用上面引用的 SO 帖子中的示例，您可以这样做：

```
<html>
   <head>
        <title>Foo</title>
        <script>
        function getParameterByName(name)
        {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.search);
            if(results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        }
        </script>
   </head>
   <body> 
      Hello <span id="fname"></span>
      <script>
         var fname = getParameterByName("fname");
         document.getElementById("fname").innerText = fname;
      </script>
   </body> 
</html> 
```

为了让您更轻松，您可以添加一个带有 ID 的跨度元素（以便通过 javascript 轻松选择），然后读取查询字符串的内容并将其添加到该跨度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:50:41.487

这不是最适合基于浏览器的纯 JavaScript 的工作。问题是基于浏览器的 JS 是特定于给定页面的。当该页面被处理（即当您提交数据时）时，该 JavaScript 将与包含它的页面一起消失。您可以通过会话或本地存储（使用`localStorage.key = value`or `sessionStorage.key = value`）传递，但这是一种解决方法，即使在提交数据后，最终用户也可以对其进行编辑。

要正确实施您的解决方案，您需要在某些方面通过 Web 服务器，该服务器将管理请求，接受来自第一页的数据，保留它并将其传递到第二页。你如何做到这一点完全取决于你在网络服务器上使用的语言。如果你已经熟悉 JavaScript，nodejs 可能是一个不错的选择：[http ://nodejs.org/](http://nodejs.org/)

# c# - 浮点到双精度转换 - 单元测试中的最佳断言？

> ID：13952783
> 
> 赞同：17
> 
> 时间：2012-12-19T12:46:13.987
> 
> 标签：c#, floating-point, double, numeric

鉴于陈述

```
float f = 7.1f;
double d = f; 
```

我们可以在单元测试中断言什么关于 d？

* * *

例如，这不起作用：

```
Console.WriteLine(d == 7.1d); // false
Console.WriteLine(d < 7.1d + float.Epsilon); // true by luck
Console.WriteLine(d > 7.1d - float.Epsilon); // false (less luck) 
```

到目前为止，我发现的最好方法是将值转换回：

```
float f2 = (float)d;
Console.WriteLine(f2 == f); // true 
```

这与粗鲁的说法相同

```
Console.WriteLine(d == 7.1f); // 7.1f implicitly converted to double as above 
```

这个问题一般不是关于双精度和浮点精度，而只是关于单元测试如何最好地描述 d 范围的实用问题。在我的例子中，d 是由轻量级代码生成生成的代码中发生的转换的结果。在测试这个代码生成时，我必须对这个函数的结果做出断言，这最终归结为上面的简单问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:02:23.220

您的“最佳方法”是断言您生成的代码返回的内容在`float`' 的误差范围内，`7.1`. 这可能是您要检查的内容，在这种情况下，请继续。

另一方面，您可能想要断言生成的代码*专门*返回转换`7.1f`为 a的结果`double`，在这种情况下，您可以这样做：

```
Console.WriteLine(d == (double)f); 
```

这是更严格的 - 您的测试断言`d`在一个小范围内，而上述测试断言这`d`是一个特定的值。

这真的取决于你将使用什么`d`。如果不是精确值会出错，请测试精确值，但如果可以在`float`值的 a 范围内，请检查`float`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:17:57.547

要比较两个浮点值， [ibm 建议](http://www.ibm.com/developerworks/java/library/j-jtp0114/#N10255)进行测试`abs(a/b - 1) < epsilon`

msnd 指出，`Epsilon`当实例的值为零时，该属性反映了在数值运算或比较中有意义的最小正值。

所以实际上你应该检查

```
Math.Abs(d/(double)f) - 1) < float.Epsilon) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:33:00.450

`(float) d == f`.

建议的另一个答案`d == (double) f`，但这是一个无用的测试，因为执行隐式执行`(double) f`的相同转换。`d = f`所以这个断言唯一可以测试的是实现的某些方面是否被破坏（例如，编译器不正确地实现了其中一个转换并且以不同于另一个的方式），一些外部机制被改变`d`或`f`在赋值和断言之间, 或者源代码被破坏，因此`d`既不是`double`也不`float`是任何类型都可以准确地保存 的值，或者没有执行`f`赋值。`d = f`

通常，我们期望没有浮点错误，因为在浮点的每个正常实现中，从较窄的精度转换为相同基数的较宽的精度没有错误，因为较宽的精度可以表示每个值，较窄的精度可以. 在不常见的情况下，较宽的浮点格式可能具有较小的指数范围。只有在这种情况下，或者在错误定义的浮点格式中，转换为更广泛的格式才会导致值发生变化。在这些情况下，执行相同的转换不会检测到更改。

相反，我们从较宽的格式转换回较窄的格式。如果`d`与 不同`f`，则此转换有可能检测到错误。例如，假设`f`包含 0x1p-1000，但由于某种原因，它无法以 的格式表示`d`，因此将其四舍五入为零。然后`(float) d == f`评估为`(float) 0 == 0x1p-1000`，然后为`0 == 0x1p-1000`，然后为`false`。此外，此测试可能会检测到与其他建议相同的错误：实现损坏、更改`d`or `f`、不正确的类型`d`以及`d = f`.

除此之外，您会尝试通过此处的断言检测哪些错误？

# html - html元素下的触摸点击按钮

> ID：13952790
> 
> 赞同：6
> 
> 时间：2012-12-19T12:46:55.270
> 
> 标签：html, touch, cordova-2.0.0

我在 phonegap 应用程序中设置了以下[html 和 css 。](http://jsbin.com/opemez)我遇到一个问题，当“立即付款”按钮被该页面底部的导航链接覆盖并且用户尝试触摸其中一个导航链接时，正在按下“立即付款”按钮而不是导航链接.

有没有人遇到过这个问题，能够解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:50:43.203

我有一个hacky方式，你可以尝试一次......

*在您拥有的导航链接*后面放置一个**透明矩形**，这样每当用户触摸这些链接时，事件就不会出现在您的*“立即付款”*按钮上，

 **祝你好运....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T07:44:51.077

在 (div#menu ul) 规则中将菜单的 z-index 值设置为页面中较高的值**

# joomla1.5 - 从 1.5 升级后在 Joomla 2.5 中找不到扩展管理器

> ID：13952796
> 
> 赞同：2
> 
> 时间：2012-12-19T12:47:15.437
> 
> 标签：joomla1.5, joomla2.5

我将我的网站从 joomla 1.5.26 升级到 joomla 2.5。

之后我在管理员中找不到扩展管理器。

但是在升级过程中没有发现问题。

请给我一个建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:11:26.540

试着去

`/administrator/index.php?option=com_installer`

然后转到数据库并单击“修复”。

如果您无法访问上面的链接，请访问：

```
/administrator/components/com_installer/installer.php 
```

和 TEMPORARY 评论访问检查周围的 if。

修复您的数据库并删除评论。

# php - 使用facebook php sdk在左侧发布照片并在右侧发表评论

> ID：13952799
> 
> 赞同：-4
> 
> 时间：2012-12-19T12:47:31.060
> 
> 标签：php, facebook-graph-api

我正在开发一个应用程序，它几乎即将完成。当用户使用我的应用程序时，我想在用户墙上发布与我的应用程序相关的图像并在用户墙上发表评论。我在FB上看到了很多应用程序，它们发布带有评论的图像，就像一张邀请卡，这样用户朋友也可以使用它。所以任何人都可以帮助我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:34:49.423

首先，确保获得以下许可：

```
publish_stream 
```

现在，假设您使用 SDK 创建了一个 $facebook 对象，然后您可以发布到流，包括左侧的图片：

```
$attachment = array
(
'access_token'=>$facebook->getAccessToken(),
'message' => 'This is the message',
'name' => 'NAME',
'caption' => 'This is my caption:',
'description' => 'This is the description',
'picture' => 'http://www.facebookanswers.co.uk/img/misc/iq.jpg'
);
$result = $facebook->api($this->id.'/feed/','post',$attachment); 
```

如果需要，可以省略消息字段。我已将其包括在内，因此至少您知道它在那里。

您需要更改字段的内容以满足您的需要，但希望您能了解情况。

# delphi - 在 Delphi 中实现 EaseIn、EaseOut 函数

> ID：13952801
> 
> 赞同：7
> 
> 时间：2012-12-19T12:47:35.143
> 
> 标签：delphi, animation, delphi-xe2, easing, easing-functions

我正在尝试在[TChromeTabs](http://code.google.com/p/delphi-chrome-tabs/)中实现标签的流畅移动。[我可以在这里](http://msdn.microsoft.com/en-us/library/ee308751.aspx)看到缓动公式，但我不是数学家，也不知道如何将其转换为代码。到目前为止，我的尝试无济于事。

是否有可用的缓动功能的 Delphi 实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T16:23:37.157

我在网上找到了几个有用的示例，并使用这些算法编写了我自己的 Delphi Easing 函数。他们来了：

```
...

type
  TChromeTabsEaseType = (
    ttlinearTween,
    tteaseInQuad,
    tteaseOutQuad,
    tteaseInOutQuad,
    tteaseInCubic,
    tteaseOutCubic,
    tteaseInOutCubic,
    tteaseInQuart,
    tteaseOutQuart,
    tteaseInOutQuart,
    tteaseInQuint,
    tteaseOutQuint,
    tteaseInOutQuint,
    tteaseInSine,
    tteaseOutSine,
    tteaseInOutSine,
    tteaseInExpo,
    tteaseOutExpo,
    tteaseInOutExpo,
    tteaseInCirc,
    tteaseOutCirc,
    tteaseInOutCirc
  );

    function CalculateEase(CurrentTime, StartValue, ChangeInValue, Duration: Real; EaseType: TChromeTabsEaseType): Real; overload;
    function CalculateEase(StartPos, EndPos, PositionPct: Real; EaseType: TChromeTabsEaseType): Real; overload;

implementation

    function CalculateEase(CurrentTime, StartValue, ChangeInValue, Duration: Real; EaseType: TChromeTabsEaseType): Real;
    begin
      case EaseType of
        ttLinearTween:
          begin
            Result := ChangeInValue * CurrentTime / Duration + StartValue;
          end;

        ttEaseInQuad:
          begin
            CurrentTime := CurrentTime / Duration;

              Result := ChangeInValue * CurrentTime * CurrentTime + StartValue;
          end;

        ttEaseOutQuad:
          begin
            CurrentTime := CurrentTime / Duration;

              Result := -ChangeInValue * CurrentTime * (CurrentTime-2) + StartValue;
          end;

        ttEaseInOutQuad:
          begin
            CurrentTime := CurrentTime / (Duration / 2);

            if CurrentTime < 1 then
              Result := ChangeInValue / 2 * CurrentTime * CurrentTime + StartValue
            else
            begin
              CurrentTime := CurrentTime - 1;
              Result := -ChangeInValue / 2 * (CurrentTime * (CurrentTime - 2) - 1) + StartValue;
            end;
          end;

        ttEaseInCubic:
          begin
            CurrentTime := CurrentTime / Duration;

            Result := ChangeInValue * CurrentTime * CurrentTime * CurrentTime + StartValue;
          end;

        ttEaseOutCubic:
          begin
            CurrentTime := (CurrentTime / Duration) - 1;

            Result := ChangeInValue * ( CurrentTime * CurrentTime * CurrentTime + 1) + StartValue;
          end;

        ttEaseInOutCubic:
          begin
            CurrentTime := CurrentTime / (Duration/2);

            if CurrentTime < 1 then
              Result := ChangeInValue / 2 * CurrentTime * CurrentTime * CurrentTime + StartValue
            else
            begin
              CurrentTime := CurrentTime - 2;

              Result := ChangeInValue / 2 * (CurrentTime * CurrentTime * CurrentTime + 2) + StartValue;
            end;
          end;

        ttEaseInQuart:
          begin
            CurrentTime := CurrentTime / Duration;

            Result := ChangeInValue * CurrentTime * CurrentTime * CurrentTime * CurrentTime + StartValue;
          end;

        ttEaseOutQuart:
          begin
            CurrentTime := (CurrentTime / Duration) - 1;

            Result := -ChangeInValue * (CurrentTime * CurrentTime * CurrentTime * CurrentTime - 1) + StartValue;
          end;

        ttEaseInOutQuart:
          begin
              CurrentTime := CurrentTime / (Duration / 2);

            if CurrentTime < 1 then
              Result := ChangeInValue / 2 * CurrentTime * CurrentTime * CurrentTime * CurrentTime + StartValue
            else
            begin
              CurrentTime := CurrentTime - 2;

              Result := -ChangeInValue / 2 * (CurrentTime * CurrentTime * CurrentTime * CurrentTime - 2) + StartValue;
            end;
          end;

        ttEaseInQuint:
          begin
            CurrentTime := CurrentTime / Duration;

            Result := ChangeInValue * CurrentTime * CurrentTime * CurrentTime * CurrentTime * CurrentTime + StartValue;
          end;

        ttEaseOutQuint:
          begin
            CurrentTime := (CurrentTime / Duration) - 1;

              Result := ChangeInValue * (CurrentTime * CurrentTime * CurrentTime * CurrentTime * CurrentTime + 1) + StartValue;
          end;

        ttEaseInOutQuint:
          begin
            CurrentTime := CurrentTime / (Duration / 2);
            if CurrentTime < 1 then
              Result := ChangeInValue / 2 * CurrentTime * CurrentTime * CurrentTime * CurrentTime * CurrentTime + StartValue
            else
            begin
              CurrentTime := CurrentTime - 2;

              Result := ChangeInValue / 2 * (CurrentTime * CurrentTime * CurrentTime * CurrentTime * CurrentTime + 2) + StartValue;
            end;
          end;

        ttEaseInSine:
          begin
              Result := -ChangeInValue * Cos(CurrentTime / Duration * (PI / 2)) + ChangeInValue + StartValue;
          end;

        ttEaseOutSine:
          begin
              Result := ChangeInValue * Sin(CurrentTime / Duration * (PI / 2)) + StartValue;
          end;

        ttEaseInOutSine:
          begin
            Result := -ChangeInValue / 2 * (Cos(PI * CurrentTime / Duration) - 1) + StartValue;
          end;

        ttEaseInExpo:
          begin
            Result := ChangeInValue * Power(2, 10 * (CurrentTime/Duration - 1) ) + StartValue;
          end;

        ttEaseOutExpo:
          begin
            Result := ChangeInValue * (-Power(2, -10 * CurrentTime / Duration ) + 1 ) + StartValue;
          end;

        ttEaseInOutExpo:
          begin
            CurrentTime := CurrentTime / (Duration/2);

            if CurrentTime < 1 then
              Result := ChangeInValue / 2 * Power(2, 10 * (CurrentTime - 1) ) + StartValue
            else
             begin
               CurrentTime := CurrentTime - 1;

                 Result := ChangeInValue / 2 * (-Power(2, -10 * CurrentTime) + 2 ) + StartValue;
             end;
          end;

        ttEaseInCirc:
          begin
            CurrentTime := CurrentTime / Duration;

              Result := -ChangeInValue * (Sqrt(1 - CurrentTime * CurrentTime) - 1) + StartValue;
          end;

        ttEaseOutCirc:
          begin
            CurrentTime := (CurrentTime / Duration) - 1;

            Result := ChangeInValue * Sqrt(1 - CurrentTime * CurrentTime) + StartValue;
          end;

        ttEaseInOutCirc:
          begin
            CurrentTime := CurrentTime / (Duration / 2);

            if CurrentTime < 1 then
              Result := -ChangeInValue / 2 * (Sqrt(1 - CurrentTime * CurrentTime) - 1) + StartValue
            else
            begin
                CurrentTime := CurrentTime - 2;

                Result := ChangeInValue / 2 * (Sqrt(1 - CurrentTime * CurrentTime) + 1) + StartValue;
            end;
          end;
      end;
    end;

    function CalculateEase(StartPos, EndPos, PositionPct: Real; EaseType: TChromeTabsEaseType): Real;
    var
      t, b, c, d: Real;
    begin
      c := EndPos - StartPos;
      d := 100;
      t := PositionPct;
      b := StartPos;

      Result := CalculateEase(t, b, c, d, EaseType);
    end;

    ... 
```

# c# - 在 XAML-WPF 中设置列 标题名称

> ID：13952804
> 
> 赞同：11
> 
> 时间：2012-12-19T12:47:51.587
> 
> 标签：c#, wpf, xaml, datagrid

我想在绑定到数据库的 WPF 数据网格中设置用户定义的列标题。

用于显示 ServerID、EventlogID 我想在列标题中显示为 Server、Event Log。

我已经尝试过这些......

```
 <DataGrid x:Name="dataGrid1" ItemsSource="{Binding}" AutoGenerateColumns="True" >
     <DataGrid.Columns>
        <DataGridTextColumn Header="Server" Width="Auto" IsReadOnly="True"  Binding="{Binding Path=ServerID}" />
            <DataGridTextColumn Header="Event Log" Width="Auto" IsReadOnly="True"  Binding="{Binding Path=EventLogID}" />
      </DataGrid.Columns>
   </DataGrid> 
```

这很好用，它改变了列标题并且数据也显示出来了。

但我的问题是，它作为 XAML 的前两列标题和数据库的其他两列标题显示两次。

```
 |Server|Event Log|ServerID|EventLogID| 
```

如何克服这种复制？请帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T12:50:00.450

那是因为你留下了`AutoGenerateColumns="True"`删除它，不会有更多的重复。

您当前正在自动添加一次列，然后手动添加第二次！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T13:44:27.240

XAML：将`AutoGeneratingColumn="OnAutoGeneratingColumn"`事件添加到事件`DataGrid`：

```
<DataGrid x:Name="dataGrid1"  ItemsSource="{Binding YourItems}" AutoGenerateColumns="True" AutoGeneratingColumn="OnAutoGeneratingColumn"> 
```

代码隐藏：添加事件处理程序如下：

```
private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
  switch (e.Column.Header)
  {
    case "ServerID":
      e.Column.Header = "Server";
      break;
    case "EventID":
      e.Column.Header = "Event";
      break;   
    default:
      e.Cancel = true;
      break;
  }
} 
```

# mysql - MySQL - 删除级联上的外键 - 是否有定义的执行顺序？

> ID：13952807
> 
> 赞同：5
> 
> 时间：2012-12-19T12:47:58.813
> 
> 标签：mysql

我对 MySQL 有问题 - 多个表上的 CASCADE ON DELETE 规则。显然，“CASCADE ON DELETE”规则的执行顺序取决于它们的定义顺序。

**但是这个执行顺序是明确定义的还是取决于 MySQL 版本？**

这是三个表“A”、“B”、“C”的简单示例

```
create table `A` (`id` NUMERIC(10,0) NOT NULL)  ENGINE=INNODB;
create table `B` (`id` NUMERIC(10,0) NOT NULL, `a_id`  NUMERIC(10,0) NOT NULL) ENGINE=INNODB;
create table `C` (`id` NUMERIC(10,0) NOT NULL, `a_id`  NUMERIC(10,0) NOT NULL, `b_id` NUMERIC(10,0) NOT NULL) ENGINE=INNODB;

ALTER TABLE `A` ADD PRIMARY KEY (`id`);
ALTER TABLE `B` ADD PRIMARY KEY (`id`);
ALTER TABLE `C` ADD PRIMARY KEY (`id`);

ALTER TABLE `C` ADD CONSTRAINT `C1` FOREIGN KEY (`a_id`) REFERENCES `A` (`id`) ON DELETE CASCADE;
ALTER TABLE `B` ADD CONSTRAINT `B1` FOREIGN KEY (`a_id`) REFERENCES `A` (`id`) ON DELETE CASCADE;
ALTER TABLE `C` ADD CONSTRAINT `C2` FOREIGN KEY (`b_id`) REFERENCES `B` (`id`); 
```

如果我插入以下数据：

```
INSERT INTO A (id) VALUES (1);
INSERT INTO B (id, a_id) VALUES (1,1);
INSERT INTO C (id, a_id, b_id) VALUES (1,1,1); 
```

...并尝试删除表“A”中的唯一条目：

```
delete from A where id=1; 
```

...我收到以下错误消息：

```
Cannot delete or update a parent row: a foreign key constraint fails (`C`, CONSTRAINT `C2` FOREIGN KEY (`b_id`) REFERENCES `B` (`id`)) 
```

但是，如果我将外键约束的定义更改为：

```
ALTER TABLE `C` ADD CONSTRAINT `C1` FOREIGN KEY (`a_id`) REFERENCES `A` (`id`) ON DELETE CASCADE;
ALTER TABLE `C` ADD CONSTRAINT `C2` FOREIGN KEY (`b_id`) REFERENCES `B` (`id`);
ALTER TABLE `B` ADD CONSTRAINT `B1` FOREIGN KEY (`a_id`) REFERENCES `A` (`id`) ON DELETE CASCADE; 
```

...一切都很好...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-19T13:05:58.580

你`ALTER TABLE table ADD CONSTRAINT foreign_key FOREIGN KEY`是一样的，所以它们不能成为错误的原因。

（...文本被删除）

* * *

无法解释这种奇怪的行为。可以建议一个解决方法：

```
SET FOREIGN_KEY_CHECKS = 0;
DELETE FROM A WHERE ID=1;
SET FOREIGN_KEY_CHECKS = 1; 
```

# javascript - 在地图中心显示信息窗口 - Google 避开高速公路

> ID：13952810
> 
> 赞同：2
> 
> 时间：2012-12-19T12:48:04.767
> 
> 标签：javascript, google-maps, google-maps-api-3

我对 Google 避开高速公路有疑问。当您选择路线时，它会在侧面写下方向。当您单击方向时，它们会在地图上放大。问题是它们不会在地图的中间放大，它们会放大地图的边缘和角落。我如何使它缩放到中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:21:50.557

由于问题与[**此处**](https://stackoverflow.com/questions/13883414/google-route-planner-zoom-center/13889421#comment19647828_13889421)相同，因此解决方案也相同：

创建一个自定义 infoWindow 并将其作为 infoWindow-option 传递给方向渲染器，然后您将能够在 infoWindow 打开时居中。

**步骤#1：创建信息窗口：**

```
var infoWindow=new google.maps.InfoWindow(); 
```

**Step#2：观察infoWindow的domready-event：**

```
google.maps.event
    .addListener(infoWindow,'domready',
                 function(){map.setCenter(this.getPosition());}); 
```

**步骤#3：使用 infoWindow 选项初始化 DirectionsRender
（用它替换您当前的初始化）**

```
directionsDisplay = new google.maps
         .DirectionsRenderer({infoWindow  : infoWindow}); 
```

将 3 个步骤放在开头`initialize()`，一切都应该按预期工作。

# c# - 更新 Datatable 时，DataRow 将小数的小数部分归零

> ID：13952812
> 
> 赞同：12
> 
> 时间：2012-12-19T12:48:07.830
> 
> 标签：c#, asp.net, datatable, datarow

我正在尝试更新从数据库中检索到的 DataTable，然后再将其绑定到 Gridview。

但是，当我更新小数字段时，小数点后的部分被归零。我错过了什么？

```
if (HttpContext.Current.Request.IsAuthenticated)
{
    // Get additional price matches
    using (SqlConnection stockConn = new SqlConnection(ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString))
    {
        // Check for trade match offer
        SqlCommand tradePCCheck = new SqlCommand("getAllMyPriceMatches", stockConn);
        tradePCCheck.CommandType = CommandType.StoredProcedure;
        SqlParameter email = tradePCCheck.Parameters.Add("@email", SqlDbType.NVarChar);
        try
        {
            email.Value = this.Context.User.Identity.Name;
        }
        catch
        {
            email.Value = " ";
        }
        SqlParameter thedate = tradePCCheck.Parameters.Add("@theDate", SqlDbType.DateTime);
        thedate.Value = DateTime.Now.AddHours(-50);

        stockConn.Open();
        SqlDataReader pcReader = tradePCCheck.ExecuteReader();
        pms.Load(pcReader);
        pcReader.Close();
        stockConn.Close();
    }
}

//Set Connection, Open the DB & Fill Data Set

using (SqlConnection stockConn = new SqlConnection(ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString))
{
    SqlCommand stockCommand = new SqlCommand("getTISearchResults", stockConn);
    stockCommand.CommandType = CommandType.StoredProcedure;
    SqlParameter keyword = stockCommand.Parameters.Add("@keyword", SqlDbType.NVarChar);
    keyword.Value = prefixText;
    stockConn.Open();
    SqlDataReader rd = stockCommand.ExecuteReader();
    searchResults.Load(rd);
    stockCommand.Dispose();
    rd.Dispose();
}

// Update Results with elevated prices...
foreach (DataRow dr in searchResults.Rows)
{
    // Check for PMS
    DataRow[] thePMS = pms.Select("tpc_stockid = '" + dr["stockitem_number"].ToString() + "'");

    if (thePMS.Length > 0)
    {
        decimal px = 0;
        decimal cash = 0;

        if (thePMS[0]["tpc_pricepx"] != null && !thePMS[0]["tpc_pricepx"].ToString().Equals(""))
        {
            px = Convert.ToDecimal(thePMS[0]["tpc_pricepx"]);
        }

        if (thePMS[0]["tpc_price"] != null && !thePMS[0]["tpc_price"].ToString().Equals(""))
        {
            cash = Convert.ToDecimal(thePMS[0]["tpc_price"]);
        }
        // update table and accept changes
        DataRow[] theRows = searchResults.Select("stockitem_number = '" + dr["stockitem_number"].ToString() + "' ");

        if (theRows.Length > 0)
        {
            theRows[0]["stockitem_pxprice"] = px;
            theRows[0]["stockitem_cashprice"] = cash;
            searchResults.AcceptChanges();
        }
    }
}

gvSearchResults.DataSource = searchResults;
gvSearchResults.DataBind(); 
```

我在分配之前输出了 PX 和 Cash，它们保持正确的值 800.19 和 500.12，但是在 AcceptChanges 之后并且一旦它们被绑定，输出是 800.00 和 500.12。

`theRows[0]["stockitem_pxprice"]`&`theRows[0]["stockitem_cashprice"]`都`decimal(5,2)`在从中填充 searchResultsDT 的数据库中。

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T12:49:08.363

是的，您`string.format`在将值设置为网格时丢失了。您需要在设置之前格式化双精度。

假设如果你得到一个像 4.506 这样的数字，它将显示像 4.5060 或者如果你有像 4.5 这样的数字，那么它将显示为 4.50。

我在模板化的 gridview 中遇到了这个问题，不得不使用 string.format 和格式说明符来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T10:15:43.040

我认为您的表有以下两个字段作为 int 数据类型：

*   stockitem_pxprice

*   stockitem_cashprice

`numeric (18,2)`使用这两个字段的数据类型修改您的表

**或者**

`[decimal](18, 2)` 使用这两个字段的数据类型修改您的表

不需要类型转换，asp.net 会隐式执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T01:22:49.833

Foreach`theRows.Columns`并转储 .Type 属性以进行跟踪。您已经多次提到类型是**十进制（5,2）**，它是一种 TSQL 类型。DataTable 包含 c# 类型，它是十进制的，就像一个非常大的浮点数。这里重要的是 c# 类型。

您的 tsql 中可能进行了转换，例如`Select myVal * 1`将您的 myVal 十进制转换为 int。那将是您的数据表保存的类型。我通常将我的常量设置`myVal *1.0`为防止值变成整数。就像你必须在 c# 中声明一个小数一样，比如 100m，在 TSQL 中你必须确保专门声明文字以防止数据类型转换

参考[http://msdn.microsoft.com/en-us/library/ms179899.aspx](http://msdn.microsoft.com/en-us/library/ms179899.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T03:10:15.453

我不确定你是否有答案，但我会分享我可以通过使用**SqlDataReader**的方法来解决这个问题，它是**GetDecimal**方法。你可以这样编码

```
using (SqlConnection stockConn = new SqlConnection(ConfigurationManager.ConnectionStrings["LocalSqlServer"].ConnectionString))
{
        // Check for trade match offer
        SqlCommand tradePCCheck = new SqlCommand("getAllMyPriceMatches", stockConn);
        tradePCCheck.CommandType = CommandType.StoredProcedure;
        SqlParameter email = tradePCCheck.Parameters.Add("@email", SqlDbType.NVarChar);
        try
        {
            email.Value = this.Context.User.Identity.Name;
        }
        catch
        {
            email.Value = " ";
        }
        SqlParameter thedate = tradePCCheck.Parameters.Add("@theDate", SqlDbType.DateTime);
        thedate.Value = DateTime.Now.AddHours(-50);

        stockConn.Open();

    SqlDataReader pcReader = tradePCCheck.ExecuteReader();

    decimal px = 0;
    decimal cash = 0;

    if (pcReader.Read())
    {
        px = pcReader.GetDecimal(0);
        cash = pcReader.GetDecimal(1);
    }
    pcReader.Close();
    stockConn.Close();
} 
```

其中**pcReader.GetDecimal(0)**表示从结果集中获取索引 0 处的数据字段作为十进制值，这是您在 SELECT 命令中选择的列的顺序。和存储过程**getAllMyPriceMatches**，您可以使用**JOIN**命令在两个表结果之间修改查询脚本，那么您不需要第二个查询范围。

# mysql - 如何从mysql查询得到以下解决方案？

> ID：13952813
> 
> 赞同：-4
> 
> 时间：2012-12-19T12:48:07.240
> 
> 标签：mysql, database

如何查询

```
SL  STATUS    DATETIME
1   STOP      2012-12-19 13:10:00    
2   STOP      2012-12-19 13:12:00       
3   STOP      2012-12-19 13:14:00   
4   STOP      2012-12-19 13:16:00   
5   STOP      2012-12-19 13:18:00    
6   STOP      2012-12-19 13:20:00
7   START     2012-12-19 13:22:00 
```

从表 mysql 查询为

```
SL  STATUS    DATETIME                   STOPPAGE
1   STOP      2012-12-19 13:10:00        00:10
2   START     2012-12-19 13:22:00 
```

我必须将日期值之间的差异作为状态为**STOP的****STOPPAGE**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:50:39.047

```
SELECT * FROM <TABLENAME> WHERE ID IN (SELECT MIN(ID) GROUP BY STATUS) 
```

这会给你以下

```
SL  STATUS    DATETIME                   
1   STOP      2012-12-19 13:10:00        
2   START     2012-12-19 13:22:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:49:53.193

目前尚不清楚您是如何在结果集中选择您希望选择的值`SL`（`DATETIME`尤其是如果有多个具有相同`DATETIME`值的记录），但假设它们是`DATETIME`运行中最早的记录不变`STATUS`：

```
SELECT my_table.*, t.STOPPAGE
FROM   my_table NATURAL JOIN (
  SELECT   STATUS,
           MIN(DATETIME) AS DATETIME,
           NULLIF(TIMEDIFF(MAX(DATETIME),MIN(DATETIME)),0) AS STOPPAGE
  FROM (
    SELECT   t1.DATETIME, t1.STATUS, MIN(t2.DATETIME) AS next
    FROM     my_table t1 LEFT JOIN my_table t2
          ON t1.DATETIME < t2.DATETIME AND t1.STATUS <> t2.STATUS
    GROUP BY t1.DATETIME, t1.STATUS
  ) t
  GROUP BY next
) t 
```

在[sqlfiddle](http://www.sqlfiddle.com/#!2/d043a/3/0)上查看。

如果结果集中不需要`SL`（或者它应该是递增计数器），则可以省略最外层的查询：

```
SELECT   @sl := @sl + 1 AS SL,
         STATUS,
         MIN(DATETIME) AS DATETIME,
         NULLIF(TIMEDIFF(MAX(DATETIME),MIN(DATETIME)),0) AS STOPPAGE
FROM (
  SELECT   t1.DATETIME, t1.STATUS, MIN(t2.DATETIME) AS next
  FROM     my_table t1 LEFT JOIN my_table t2
        ON t1.DATETIME < t2.DATETIME AND t1.STATUS <> t2.STATUS
  GROUP BY t1.DATETIME, t1.STATUS
) t, (SELECT @sl := 0) init
GROUP BY next
ORDER BY DATETIME 
```

在[sqlfiddle](http://www.sqlfiddle.com/#!2/d043a/5/0)上查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:56:36.407

从 GROUP BY STATUS 中选择 sl,status,min(DATETIME)**

# android - 如何改变复选框android的方向

> ID：13952820
> 
> 赞同：-2
> 
> 时间：2012-12-19T12:48:20.733
> 
> 标签：android, checkbox

> **可能重复：**
> [如何设置文本右侧的复选框](https://stackoverflow.com/questions/5000213/how-to-set-the-checkbox-on-the-right-side-of-the-text)

我想改变android中复选框的方向，使文本在左边，复选框在右边。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:54:15.880

我认为它更好地[`CheckedTextView`](http://developer.android.com/reference/android/widget/CheckedTextView.html)用于您的要求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:56:51.470

看一看

[http://developer.android.com/guide/topics/ui/controls/checkbox.html](http://developer.android.com/guide/topics/ui/controls/checkbox.html)

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
<CheckBox android:id="@+id/checkbox_meat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/meat"
    android:onClick="onCheckboxClicked"/>
<CheckBox android:id="@+id/checkbox_cheese"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/cheese"
    android:onClick="onCheckboxClicked"/>
</LinearLayout> 
```

在承载此布局的 Activity 中，以下方法处理两个复选框的单击事件：

```
public void onCheckboxClicked(View view) {
   // Is the view now checked?
  boolean checked = ((CheckBox) view).isChecked();

 // Check which checkbox was clicked
  switch(view.getId()) {
    case R.id.checkbox_meat:
        if (checked)
            // Put some meat on the sandwich
        else
            // Remove the meat
        break;
    case R.id.checkbox_cheese:
        if (checked)
            // Cheese me
        else
            // I'm lactose intolerant
        break;
    // TODO: Veggie sandwich
  }  
 } 
```

# iphone - 如何检查地图上的重复注释

> ID：13952824
> 
> 赞同：3
> 
> 时间：2012-12-19T12:48:27.970
> 
> 标签：iphone, ios, maps

我正在使用 mapview，但是当我在地图上放置注释图钉时，它会为纬度和经度的位置创建重复条目。

现在我想要它，以便用户应该能够为一个纬度和经度放置一个注释针。这意味着我想避免同一位置的重复条目。

怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T13:24:03.060

注释是一个兴趣点。当它们的坐标相同时，可以将两个注释称为相同。您必须检查注释的坐标是否与任何其他现有注释的坐标相同。

如果您正在谈论在缩放级别上重叠的注释（即使它们的坐标不同），那么以下链接可能会对您有所帮助：-

[如何根据缩放级别自动对 MKAnnotations 进行分组？](https://stackoverflow.com/questions/3194646/how-can-i-group-mkannotations-automatically-regarding-zoom-level)

[根据缩放级别分组/取消分组MKAnnotation（并保持快速）](https://stackoverflow.com/questions/7132207/grouped-ungroup-mkannotation-depending-on-the-zoom-level-and-keep-it-fast)

# image-processing - 没有 kinect 相机的 kinect sdk 用法

> ID：13952830
> 
> 赞同：1
> 
> 时间：2012-12-19T12:49:02.573
> 
> 标签：image-processing, kinect

是否可以在没有从 kinect 相机捕获的图像（例如计算机上的静止图像）的情况下使用 kinect sdk 的功能？

[这是一张从 kinect sdk face tracker 识别的点的图片](http://social.msdn.microsoft.com/Forums/en-US/kinectsdkfacetracking/thread/34fce85c-e40c-4b0d-97f8-3e9654994df9)。类似于 AAM 映射。如果有办法，有人可以提供一个简短的代码示例 - 假设输入图像路径将返回该图像上的映射点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:55:56.020

不，有一个非常简单的原因。

Kinect 不捕获图像。

它结合了：

*   一个图像
*   使用基于红外的传感器制作的深度图。

SDK 假定所有这些元素都存在，来自 Kinect 硬件。

[http://en.wikipedia.org/wiki/Kinect](http://en.wikipedia.org/wiki/Kinect)解释了 Kinext 提供的所有硬件方面的内容。

这意味着即使给它提供图像（这已经够难了），你也会错过实际上也用于运动捕捉的绝对关键的深度信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-08T02:45:50.610

TomTom 发布了一个有效的答案。但是，如果您的场景是您需要在无法访问物理传感器的情况下运行 SDK（例如，您在火车上）或者您想要处理来自其他传感器的大量数据，那么您可以使用 Kinect Studio。Kinect Studio 允许您记录所有来自 Kinect 传感器的信号源并保存这些文件（警告：文件很大）。然后，您可以像播放来自物理传感器的实时数据一样播放这些文件。这不仅非常适合在飞机上进行开发/测试，而且还可以简化您的开发时间（例如，您不必在按下 F5 后从办公桌上站起来）。

# ios - 如何为 App Store 分发重新签署 iOS 应用程序？

> ID：13952836
> 
> 赞同：22
> 
> 时间：2012-12-19T12:49:43.477
> 
> 标签：ios, app-store, code-signing

我试图了解代码签名过程是如何工作的。我的目标是获取一个使用**公司 A 的企业**证书签名的 .ipa 文件，**更改捆绑 ID**，然后使用**公司 B 的 App Store** Distribution 证书再次签名并发布到 App Store。

首先，这可能吗？[我在这里](http://www.gorbster.net/blog/archives/273)读到“ *......我很确定您不能（也不应该）使用此工具来为具有 App Store 分发证书的应用程序签名*”。有人可以详细说明吗？

我已经尝试过很多这样的脚本[，这个和这个](http://afp548.com/2012/06/05/re-signining-ios-apps/)[，](https://gist.github.com/3881230)但是[经过](https://stackoverflow.com/a/8930610/289501)一些调整后，当我尝试使用 Application Loader 发送应用程序进行审查时，它们似乎都有同样的问题。我遇到的错误是：

*   应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。
*   无法从 /var/folders/67/(large_number)/new.ipa/Payload/original.app/original 中提取权利

有人可以帮我吗？请注意，我知道如何通过导出证书等来做到这一点——但在这里我正在探索 B 公司是否能够自己做到这一点，如果我给他们 A 公司的 .ipa 文件。如果需要，我可以更详细地解释我在做什么 - 只要问。

谢谢！

编辑：我已经知道[这个已关闭的 SO 问题](https://stackoverflow.com/questions/7172575/xcode-4-ios-how-to-distribute-an-app-for-the-app-store-for-anopther-company)，但是我发布了一个新问题，因为我认为我的问题更具体，而且我并不是要求一种通用的方法来完成我想要的 - 我只想看看所描述的场景是否是可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:29:07.133

要辞职一个新的应用程序，这应该是可能的，您需要在开发门户中创建所有新的分发配置文件（假设您已经到了这一步）。从您的应用到新的配置文件，一切都需要匹配。应用程序 ID 可能是最重要的。当您创建一个新的时，必须在您的项目中进行设置以匹配。通常是 com.companyname.appname.optional。这个新的应用程序 ID 必须在您的构建设置中与 Bundle Identifier 配对。一旦你匹配了这些，你应该能够将它与你的新发行版/配置文件配对。

FWIW，交换这些配置文件必须是所有 iOS 开发中最复杂的过程。这可能需要一些修补和反复试验，但我确信它可以完成。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T07:13:56.123

我以前在做这件事时遇到了麻烦。在 Xcode 中设置新的配置文件和重建似乎可行，但只是在编辑带有捆绑 ID 的 plist 后使用命令行重新签署现有应用程序，这让我很伤心。我怀疑它是在构建应用程序时放入应用程序的嵌入式配置文件，但老实说，我不确定。

我看到您在权利方面遇到问题 - 请注意，其中一些是在开发配置文件中设置的（推送通知、IAP，也许还有 iCloud），并且必须在那里正确。

第二个提示是 Xcode 将开发配置文件缓存在项目中（某处），因此即使您从库文件夹内的移动配置文件文件夹中删除一个，您也必须在 Xcode 项目的目标设置中实际更改它，否则它可能仍然使用旧的（grrr）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T07:37:28.923

我使用[AirSign](https://www.airsignapp.com/)应用程序节省了很多时间（当我发布我的原始问题时该应用程序不可用）。

# tsql - T-SQL用单选从表的行中初始化几个变量

> ID：13952844
> 
> 赞同：1
> 
> 时间：2012-12-19T12:50:07.690
> 
> 标签：tsql, variables, sql-server-2012, initialization

我有下表（假设它的名称是“AnswerTable”：

```
QuestionID Value
100        1
101        2
102        1
103        2
104        1
105        2
... 
```

然后我有几个变量：

```
DECLARE @Answer1 INT
DECLARE @Answer2 INT
.... 
```

我需要像这样从表中检索信息：

```
SET @Answer1 =(SELECT Value FROM AnswerTable WHERE QuestionID=100)
SET @Answer2 =(SELECT Value FROM AnswerTable WHERE QuestionID=101)
... 
```

我想要做的是只从表中选择一个来初始化变量，因为在我的实际情况下，表非常大并且它与其他表连接，我担心子查询的多次执行不会要高效。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:52:29.727

一般来说;

```
SELECT @Answer1 = col1, @Answer2 = col2, ... FROM yourTable 
```

在你的情况下；

```
SELECT @Answer1 = case QuestionID when 100 then Value Else @Answer1 End, 
       @Answer2 = case QuestionID when 101 then Value Else @Answer2 End
FROM AnswerTable
WHERE QuestionID IN  (100,101) 
```

**例如：** [Sql Fiddle 示例](http://sqlfiddle.com/#!3/6713c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:54:19.390

这有点尴尬，但您可以使用连接来执行此操作。

[http://sqlfiddle.com/#!3/e3fe7/4](http://sqlfiddle.com/#!3/e3fe7/4)

```
DECLARE @Answer1 INT
DECLARE @Answer2 INT

SELECT 
  @Answer1 = Question100.Value, 
  @Answer2 = Question101.Value 
FROM 
  AnswerTable AS Question100 
INNER JOIN AnswerTable AS Question101 
  ON Question101.QuestionId = 101 
WHERE Question100.QuestionID=100

select @Answer1, @Answer2 
```

# php - IIS：如何使用自定义 .ini 文件覆盖一些 php.ini 设置？

> ID：13952851
> 
> 赞同：6
> 
> 时间：2012-12-19T12:50:38.520
> 
> 标签：php, iis, ini

是否可以从分发包中加载一个自定义的 .ini 文件来覆盖乱七八糟的 php.ini 文件？

在 unix 系统上，我相信这可以通过将额外的 ini 文件放入其中来实现，`/etc/php.d`但我不确定 IIS。

问题很简单：我能否定义一个附加`.ini`文件来添加或重载标准`php.ini`设置，例如：

`php.ini`位于`c:\windows`并且是加载的配置文件。 `myphp.ini`是我的自定义配置

`myphp.in`将i放在哪里以便两者都加载并`php.ini`在之后加载？`myphp.ini``myphp.ini``php.ini`

Windows 下是否有“扫描此目录以获取其他 .ini 文件”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:34:45.637

看起来这可能会让您了解如何拥有自定义 php.ini：[在 IIS 7 和 IIS 6.0 上启用每站点 PHP 配置](http://www.iis.net/learn/application-frameworks/install-and-configure-php-on-iis/enable-per-site-php-configuration-on-iis-60-and-iis-7-and-above)

希望能帮助到你。

# audio - 当用户访问某个网页时在远程服务器上播放声音

> ID：13952856
> 
> 赞同：0
> 
> 时间：2012-12-19T12:51:03.120
> 
> 标签：audio, asp-classic, playback

当我使用客户端机器访问某个页面时，我必须在服务器机器上播放声音。

经典的 ASP 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:29:25.680

ASP 只是一种脚本语言，不提供任何直接播放声音剪辑的工具。但是我们可以使用该`CreateObject`函数创建一个命令 shell 实例并运行 sndrec32（Win XP 中可用的录音机）并将 .WAV 声音文件的路径作为参数传递给它，并在双引号之间。

创建模块文件：functions.asp

```
Option Explicit

Dim strSoundFile, objShell, strCommand

Sub PlaySound()
    strSoundFile = "C:\Path\of\some\file.wav"
    Set objShell = CreateObject("Wscript.Shell")
    strCommand = "sndrec32 /play /close " & chr(34) & strSoundFile & chr(34)
    objShell.Run strCommand, 0, True
End Sub 
```

在您的 ASP 代码中，在要进行调用的页面的开头输入以下代码：

```
<!--#include file="functions.asp"-->

PlaySound 
```

**参考：** [我如何在脚本中播放声音](http://blogs.technet.com/b/heyscriptingguy/archive/2004/11/03/how-can-i-play-a-sound-from-within-a-script.aspx)

# validation - 扩展的 Grails 命令对象约束验证

> ID：13952866
> 
> 赞同：1
> 
> 时间：2012-12-19T12:51:32.510
> 
> 标签：validation, grails, groovy, closures, command-objects

在 Grails 中有以下命令对象：

```
class commandA implements commandObjectType {
    String a

    static constraints = {
        a blank: false
    }
} 
```

和

```
class commandB extends commandA {
    String b
} 
```

如何在 commandB 对象中的 b 上实现自定义字段验证？据我所知，不可能覆盖或以其他方式更改闭包..

无论如何都可以这样做吗？我已经尝试在闭包中“转移”，但没有成功。是否可以以任何方式指定与字段一致的验证器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:55:37.720

我不确定共享约束是否适用于命令对象，但您可以尝试以下操作：

```
class commandB extends commandA {
    String b

    static constraints = {
        importFrom commandA
    }
} 
```

请参阅有关[约束使用](http://grails.org/doc/latest/ref/Constraints/Usage.html)的 Grails 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:26:02.463

只需像往常一样在 commandB 中定义“约束”块，并使用“b”字段的验证规则。验证应该适用于“a”和“b”字段。

# reporting-services - SSRS 本地化在 DB 中实现

> ID：13952868
> 
> 赞同：1
> 
> 时间：2012-12-19T12:51:43.670
> 
> 标签：reporting-services, localization

我正在实施一些 SSRS 报告。报告需要本地化，但本地化必须在数据库中实现，而不是在引用的程序集中。

我的想法是定义一个或多个保存本地化数据的表，并通过函数（参数：标签和语言）检索值。检索到的值将插入到报告中的适当位置。

但是由于每个报告都有一组要本地化的字符串，我希望这会影响性能。此外，一些字符串出现在多个报告中，因此如果缓存检索到的值会很好。

你能告诉我如何以一种好的方式实现数据库中的本地化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:08:05.877

我是这样解决的：

*   实现一个存储过程获取作为参数语言和报告名称。一次查询指定报表的所有文本。
*   在 SSRS 报告中，添加一个数据集，其中包含检索到的数据和本地化字符串。这是当前报告的所有文本。数据集包含两列：key和test
*   每个要本地化的字符串都作为表达式检索：

    =Lookup("TagString", Fields!Key.Value, Fields!Text.Value, "DataSetWithLocalizedStrings")

# iphone - 从路径导入所有标题，标题名称以前不知道

> ID：13952869
> 
> 赞同：0
> 
> 时间：2012-12-19T12:51:46.603
> 
> 标签：iphone, xcode, ios5, import, header

如何从事先未知标头名称的路径导入所有头文件？

我想`#import`自动标出名称未知的头文件。如果可能，我该怎么做？请逐步告诉我，因为我花了 4-5 天的时间来解决这个问题，但我做不到。感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:56:45.720

请您详细说明您想知道什么。

通常，我们所做的是创建一个文件，然后在该文件中导入，然后只使用该单个文件来包含，这样就不会包含多个文件，或者可以说尝试通过交叉引用来确定距离，还有，你可以做什么，在您的项目 pch 文件中包含该单个文件。

希望，它会是你需要的。:)

# javascript - 正则表达式从函数定义中获取参数列表

> ID：13952870
> 
> 赞同：11
> 
> 时间：2012-12-19T12:51:48.883
> 
> 标签：javascript, regex

> **可能重复：**
> [如何从 javascript 动态获取函数参数名称/值](https://stackoverflow.com/questions/1007981/how-to-get-function-parameter-names-values-dynamically-from-javascript)

我目前正在使用 javascript (node.js) 开发一个项目，该项目让我试图从函数中获取参数**名称**数组（不是值，我不需要参数）。我目前正在使用 Function.toString() 来获取函数字符串，然后针对该字符串运行正则表达式以获取我的参数列表。

让我们看一个简单的例子：

```
var myFunction = function (paramOne, paramTwo) { ... } 
```

对此运行我的正则表达式，然后做一些字符串魔术（拆分等），我希望得到一个像这样的数组：

```
paramList = ['paramOne', 'paramTwo'] 
```

我有一些可行的方法，但我觉得它可能不是最好的解决方案，因为 javascript 允许您将一些时髦的字符用于变量名，并且 javascript 将允许您在多行上定义函数。

这是我目前拥有的：

```
function.*[\w\s$]*(\((.*[\w\s,$]*)\)) 
```

这给了我第 1 组中的“匹配”，然后是第 2 组中没有括号的参数列表，这很酷。这真的是做我想做的最好的方法吗？我可以为此使用更好的正则表达式吗？我并不是真的在寻找“更简单”的东西，而实际上只是在寻找可以捕捉所有可能情况的东西。

任何帮助将不胜感激，并提前非常感谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T12:53:17.377

**前言：**到目前为止，处理这个问题的最好方法是使用 JavaScript 解析器，而不是尝试使用单个正则表达式。正则表达式可以是解析器的*一部分*，但没有一个正则表达式可以完成解析器的工作。JavaScript 的语法（就像大多数编程语言一样）过于复杂且对上下文敏感，无法用一两个简单的正则表达式来处理。有几个用 JavaScript 编写的开源 JavaScript 解析器。我强烈建议使用其中之一，而不是下面的内容。

* * *

最简单的方法是捕获第一组括号中的所有内容，然后用于`split(/\s*,\s*/)`获取数组。

例如：

```
var str = "function(   one  ,\ntwo,three   ,   four   ) { laksjdfl akjsdflkasjdfl }";
var args = /\(\s*([^)]+?)\s*\)/.exec(str);
if (args[1]) {
  args = args[1].split(/\s*,\s*/);
}
console.log("args: ", args);
```

以上是如何工作的：

1.  我们使用`/\( *([^)]+?) *\)/`匹配第一个左括号（`\(`因为`(`在正则表达式中是特殊的），然后是任意数量的可选空格，然后是捕获组，捕获除右括号之外的所有内容（但非贪婪），然后是任意数量的可选空格，其次是收盘`)`。

2.  如果我们成功了，我们使用 拆分`/\s*,\s*/`，这意味着我们拆分的序列是零个或多个空白字符 ( `\s*`)，后跟一个逗号，后跟零个或多个空白字符（这个空白就是为什么我的示例函数中的 args 如此奇怪） .

从示例中可以看出，它处理前导空格（在`(`第一个参数之后和之前）、逗号周围的空格和尾随空格——包括换行符。它不会*尝试*处理参数列表中的注释，这会使事情变得非常复杂。

**注意：**上面不处理 ES2015 的*默认参数值*，它可以是任意的表达式，包括一个包含`)` - 的表达式，它通过提前停止搜索来破坏上面的正则表达式：

```
var str = "function(   one  ,\ntwo = getDefaultForTwo(),three   ,   four   ) { laksjdfl akjsdflkasjdfl }";
var args = /\(\s*([^)]+?)\s*\)/.exec(str);
if (args[1]) {
  args = args[1].split(/\s*,\s*/);
}
console.log("args: ", args);
```

这给我们带来了完整的循环：使用 JavaScript 解析器。:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T13:00:04.173

执行以下操作：

```
var ar = str.match(/\((.*?)\)/);
if (ar) {
  var result = ar[0].split(",");
} 
```

记住 ？在 * 之后做一个非贪婪的发现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T13:10:44.247

让我建议您使用正则表达式：

*   [match]`/function[^(]*\(([^)]*)\)/`将匹配参数列表
*   [split] `/\W+/`（针对第一个匹配数据的结果）将匹配拆分为参数列表

因此，代码应如下所示：

```
var s = "function moo (paramOne, paramTwo) { alert('hello'); }";
var s2 = s.match(/function[^(]*\(([^)]*)\)/)[1];
var paramList = s2.split(/\W+/); 
```

# wcf - 如何使用 fidder2 检查 Windows Azure https 请求

> ID：13952877
> 
> 赞同：2
> 
> 时间：2012-12-19T12:52:25.467
> 
> 标签：wcf, powershell, azure, https, fiddler

我想使用提琴手检查 Azure Powershell 发送的 https 请求，但是当我收到 https 请求时，它将返回 403 被 azure 门户禁止。有人可以解决这个问题吗？非常感谢！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:25:44.650

是的。

这有点棘手，您必须了解 PowerShell 用于与 Azure 管理 API 通信的证书。

你必须做两件事：

*   [复制 PowerShell 使用的管理证书的公钥](http://www.fiddler2.com/fiddler/help/httpsclientcerts.asp)。
*   [在提琴手中启用 HTTPS 流量解密](http://www.fiddler2.com/fiddler/help/httpsdecryption.asp)

你会没事的。

**更新**

提琴手诉 4.4.2.1。但是所描述的过程适用于过去 3-4 个月的 Fiddler 版本（当我第一次尝试时）。是的。我成功地能够监控来自 PowerShell 的流量。您确定您没有放置**任何**管理证书，而是 PowerShell 正在使用的特定证书。

如果您使用的是`.publishsettings`文件，则很有可能您在用户配置文件文件夹中放置了错误的证书。`.publishsettings`保留 base64 编码版本的证书，你必须做更多的练习才能把它弄出来。

最简洁的方法，也是我提倡的一种方法，是手动创建您的管理证书。手动将其上传到门户并将其分配给特定订阅。手动导出公钥（`.cer`文件）。使用 Management API 时，在 PowerShell 中手动加载该特定证书。最后手动将其放入 fiddler 的文件夹中。这样做您将知道正在使用哪个确切的证书，并且一切都会正常工作。

作为健全性检查，您可能需要`.cer`从 My Documents\Fiddler2 文件夹中清除证书，清除所有浏览器的缓存（从 Fiddler - 清除缓存），重新启动 PowerShell。现在执行一个干净的 Fiddler 启动（首先启动 fiddler！在 PowerShell 之前）。然后启动 PowerShell，配置订阅。执行您的第一个操作。此时 Fiddler 必须要求您将客户端证书放在上述文件夹中。Fiddler 还会告诉您它需要的确切证书指纹！

# facebook - FB.init 已被调用 - 这可能表明

> ID：13952884
> 
> 赞同：1
> 
> 时间：2012-12-19T12:52:34.150
> 
> 标签：facebook, facebook-like

我有一个没有 SDK 的 facebook 按钮：

```
<fb:like href="<%= @canonical_url %>" send="" layout="button_count"></fb:like>
     <div id="fb-root"> </div>
     <script>
      // facebook recommend button
      window.fbAsyncInit = function() {
         FB.init({appId: 'myappid', status: true, cookie: true, xfbml: true});
      };
      (function() {
        // delay to simulate slow loading of Facebook library - remove this setTimeout!!
        var t = setTimeout(function() {
            var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol + '//connect.facebook.net/<%= locale_og_tag %>/all.js';
            document.getElementById('fb-root').appendChild(e);
        }, 0);
      }());
      </script>
  </div> 
```

当我更改页面时，我不会重新加载 facebook 按钮，然后在我的 javascript 文件中运行：

```
if (typeof (FB) != 'undefined') {
    FB.init({ status: true, cookie: true, xfbml: true });
   } else {
    $.getScript("http://connect.facebook.net/en_US/all.js#xfbml=1", function () {
     FB.init({ status: true, cookie: true, xfbml: true });
   });
 } 
```

但我进入控制台：

```
FB.init has already been called - this could indicate a problem 
```

**我该如何解决这个问题？**

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T19:17:12.830

您有三个对 init 的调用——两个显式调用 through`FB.init`和一个隐式调用 via `../all.js#xfbml=1`。删除`#xfbml=1`零件以及其中的任何一个`FB.init`，您应该会很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:07:45.117

好吧，您**打**了`FB.init()`两次电话...您可能需要注意该错误消息的建议：P

你只需要调用它一次，你不能在没有加载 SDK 的情况下调用它，所以你必须有 SDK。您调用`FB.init()`设置参数，例如`app_id`，是否在`xfbml` 初始化期间渲染等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T18:58:29.997

您已经使用 window.fbAsyncInit 调用了 FB.init，并且您已经在您的第一个代码块中加载了 FB 脚本。

这意味着你应该删除第二个代码块，你应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-10T05:13:27.267

只需将登录表单与其他页面分开即可。所以你不会多次加载 FB.init() 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-05T12:50:03.500

也许它会帮助像我一样的其他人 - 有类似问题的标题，但没有找到解决方案。

Facebook 的文档具有误导性，举了这个例子：

```
      <script crossorigin="anonymous" src="https://connect.facebook.net/pl_PL/sdk/debug.js#xfbml=1&version=v7.0&appId={your app id}&autoLogAppEvents=1"></script>

      <脚本>
      window.fbAsyncInit = function() {
         FB.init({
            appId : '{你的应用 id}',
            饼干：真的，
            xfbml：是的，
            版本：'v7.0'
         });

         FB.AppEvents.logPageView();   

         FB.getLoginStatus（函数（响应）{
            控制台日志（响应）；
         });

      };

      </脚本>

```

但这是错误的，因为在 facebook 脚本的 url 中，已经初始化了 FB 对象（给出应用程序 ID）。

这就是为什么需要选择方法：

*   或在不提供应用程序 ID 的情况下包含 facebook 脚本，然后显式调用 FB.init(..)
*   或包含带有应用程序 ID 的 facebook 脚本，然后省略调用 FB.init(...)

# visual-studio-2008 - 报告：不正确的列总和

> ID：13952891
> 
> 赞同：0
> 
> 时间：2012-12-19T12:53:24.420
> 
> 标签：visual-studio-2008, ssrs-2008, reporting-services, rdl

我创建了一个表格报告，其中包含几个明细，通过以下表达式在每个表组的顶部小计

**代码：**

```
=Sum(Fields!StandardTime.Value) 
```

**数据：**

```
+-------+---+------------+----+----------+
|Company|Job|StandardTime|User|ActualTime|
+-------+---+------------+----+----------+
|Wirebox|tx |  5         |Joe |  1       |
|Wirebox|tx |  5         |Theo|  3       |
|Wirebox|ty |  10        |Joe |  4       |
|Wirebox|ty |  10        |Theo|  7       |
+-------+---+------------+----+----------+ 
```

**报告：**

```
+-------+---+------------+----+----------+
|Company|Job|StandardTime|User|ActualTime|
+-------+---+------------+----+----------+
|Wirebox|   |   15       |    |  15      |<---Company Total
|       |tx |   5        |    |  4       |<---Job Total
|       |   |            |Joe |  1       |
|       |   |            |Theo|  3       |
|       |ty |  10        |    |  11      |<---Job Total
|       |   |            |Joe |  4       |
|       |   |            |Theo|  7       |
+-------+---+------------+----+----------+ 
```

我遇到的问题是，当我将 StandardTime 加在一起以获得 =Sum(Fields!StandardTime.Value) 的公司总数时，结果是 30，而不是根据我的示例所需的 15。我猜该报告正在为 SQL 查询添加所有 StandardTime。但是该数据在查询中重复。有没有办法只汇总我在报告中输出的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:25:23.013

添加“公司”组，然后在“标准时间”之前总计。对于也添加“工作”组，然后在“标准时间”之前总计。这会给你你想要的结果。

[这里是如何在报告上添加组的链接](http://technet.microsoft.com/en-us/library/dd220470.aspx)

这是我测试的样本..

![报告定义](../Images/5720c0edc2d81f62a11910c3bffdaff7.png)

结果：

![报告结果](../Images/c459a322c40a7921843032aebcc576af.png)

祝你好运！！

# iphone - 核心数据限制以及何时不持久保存数据

> ID：13952894
> 
> 赞同：6
> 
> 时间：2012-12-19T12:53:34.337
> 
> 标签：iphone, ios, core-data

我正在构建一个社交应用程序，其功能包括提要、个人资料、朋友和关注者。我正在使用核心数据来持久保存所有对象。当用户启动应用程序时，数据会从核心数据中获取并立即显示给用户，但我也在后台获取更新。

问题是目前我将所有内容都保存在核心数据中。例如，如果我访问朋友的个人资料，我会获取朋友的提要对象并将其保存在核心数据中。现在下次我访问同一个朋友的个人资料时，我只会显示最初保存的提要（并在后台更新）。

我应该这样做吗？将所有内容保存在核心数据中是否有任何问题（以获得更好的用户体验），或者当数据集变得更大时可能会出现任何限制或问题？是否有一些我必须遵循的良好做法，以持久保存哪些内容和不保存哪些内容？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:05:45.683

虽然原则上您可以使用您的方法来立即显示一些数据，但有一些重要的权衡。总的来说，我认为你的方法是有问题的。

将您的情况与 iPhone 上的 Mail 应用程序进行比较（至少当您使用具有一定延迟的邮件服务器时）。当您打开邮箱时，您会看到旧邮件以及指示更新正在运行的旋转轮。然后，突然间，显示屏会更新您的所有新消息。您的方法与此非常相似。

这对于邮件消息来说可能没问题，但对于新闻提要和状态消息来说真的可以接受吗？我不这么认为。当情况已经发生变化时（想想“我感觉很好”），陈旧的状态消息（想想“我感觉很沮丧。”）会产生误导，并会导致糟糕的用户体验。

您的 Core Data 存储仍然可以存储所有数据并定期擦除自身。初始提取可能不会显示（并删除）超过某个阈值的项目。同时，持久化更多永久数据（例如好友列表）也很有意义。

# objective-c - ARC 不会释放 webView 分配的内存

> ID：13952895
> 
> 赞同：1
> 
> 时间：2012-12-19T12:53:34.967
> 
> 标签：objective-c, uiwebview, automatic-ref-counting, rich-text-editor

我正在开发一个`RichTextEditor`用户可以添加我转换为 base-64 并在插入`HTML`. 当用户插入大约 10 张图像时，DOM 会消耗大量内存来打开和显示内容。问题是当我弹出 ARC 时，我看到 ARC 并没有释放所有这些内容`RichTextEditor` `ViewController`，从而使内存继续分配。我不知道是什么问题。如果我打开大约 2 个 this 实例，`RichTextEditor`每个不同的 HTML 一个，内存使用量会增加，应用程序崩溃。我不知道该内容的内存使用情况如何，我认为 ARC 可以做到这一点。

# c# - 从 Windows 服务执行的自定义引导程序，找不到端点

> ID：13952899
> 
> 赞同：4
> 
> 时间：2012-12-19T12:53:50.857
> 
> 标签：c#, wcf, windows-services, console-application, http-proxy

我们有一个由 Windows 服务和控制台应用程序组成的解决方案，该应用程序充当引导程序，为工作项调用 WCF 服务。

所有这些都可以正常工作，除非解决方案在客户环境中运行，该客户环境位于 http-proxy 后面的封闭网络中以供外部访问。一切都按预期工作，直到引导程序调用 WCF 服务，该服务在 24 秒后退出并出现以下错误：

*[System.ServiceModel.EndpointNotFoundException：在https://www.MyDomian.com/MyService.svc](https://www.MyDomian.com/MyService.svc)等处没有监听端点...*

现在，这是踢球者。如果我手动启动引导程序（双击 exe），它会毫无问题地连接到 WCF 服务。

**已知事实**

*   代理在端口 443 上针对 www.MyDomian.com 的流量打开
*   我们在客户计算机上拥有管理员权限
*   WCF 服务托管在 Windows Azure 中
*   解决方案适用于普通网络！
*   WCF 配置为使用 https
*   [https://www.MyDomian.com/MyService.svc](https://www.MyDomian.com/MyService.svc)可从客户计算机上的 IE 和 Chrome 访问
*   IE：Internet Options，配置了http-proxy
*   Bootstrapper 使用 channelFactory 连接 wcf 服务

**windows-service 用于启动引导程序的代码：**

```
var p1 = new Process{StartInfo = { UseShellExecute = false, FileName = MyConsoleApplication.exe } };

p1.StartInfo.UseShellExecute = false;
p1.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
p1.StartInfo.RedirectStandardInput = true;
p1.StartInfo.RedirectStandardError = true;
p1.StartInfo.RedirectStandardOutput = true;

p1.Start(); 
```

**主机上的 WCF 配置：**

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="MyBinding"
             maxReceivedMessageSize="500000"
             maxBufferSize="500000"
             maxBufferPoolSize="500000"  
             receiveTimeout="00:02:00" 
             sendTimeout="00:02:00"
             useDefaultWebProxy="true">
      <readerQuotas maxDepth="32"
                    maxStringContentLength="2147483647"
                    maxArrayLength="2147483647"
                    maxBytesPerRead="2147483647"
                    maxNameTableCharCount="2147483647" />
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </basicHttpBinding>

</bindings>
<services>
  <service
    name="MyService"
    behaviorConfiguration="MyServiceBehavior">
    <endpoint address=""
              binding="basicHttpBinding"
              contract="IMyService"
              bindingConfiguration="MyBinding"/>
    <endpoint address="mex"
              binding="mexHttpsBinding"
              contract="IMetadataExchange"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="MyServiceBehavior">
      <serviceMetadata httpsGetEnabled="true" policyVersion="Policy15" />
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

**客户端上的 WCF 配置：**

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="MyBinding" 
             maxReceivedMessageSize="2147483647" 
             maxBufferSize="2147483647" 
             maxBufferPoolSize="2147483647"
             receiveTimeout="00:02:00" 
             sendTimeout="00:02:00"
             useDefaultWebProxy="true">
      <readerQuotas maxDepth="32"            
                    maxStringContentLength="2147483647" 
                    maxArrayLength="2147483647" 
                    maxBytesPerRead="2147483647"            
                    maxNameTableCharCount="2147483647"/>
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint name="MyService"
            address="https://www.MyDomian.com/MyService.svc"
            binding="basicHttpBinding"
            contract="IMyService"
            bindingConfiguration="MyBinding"/>
</client> 
```

**到目前为止尝试过：**

*   System.Net 应用程序配置元素，例如使用 Internet 选项中定义的代理
*   绑定的多种配置变化。没试过其他绑定
*   process.Verb = "runas"
*   Fiddler2 和 WireShark 显示没有建立隧道。（当它连接时会在端口 443 上显示 HTTP 隧道）
*   检查竞争条件，但找不到任何
*   已加载正确的应用程序配置
*   用头撞墙

**更新 1**

*   在 windows 用户下运行 windows 服务使引导程序连接，但由于这将是数百个外部客户的安装，我们不会那么奢侈。
*   我在 NETWORK SERVICE 和 LOCAL SERVICE 下运行该服务，但引导程序会异常退出。表示缺少特权的异常（构造函数初始化变量时引发异常）。
*   我们后面的 http 代理使用 .pac 文件。尝试使用 system.net -> defaultProxy 指向这个，但没有运气。
*   现在尝试不同的方法来强制引导程序使用特定的代理。

*将此添加到 WCF 客户端配置*

```
<system.net>
   <defaultProxy useDefaultCredentials="true">
       <proxy 
          proxyaddress="http://proxy.customerDomain.com:8080/" 
          bypassonlocal="True" 
          scriptLocation="http://config.customerDomain.com/proxy.pac"/>
   </defaultProxy> 
```

我们错过了什么和/或对可能导致这种情况的任何建议？

谢谢

# c# - 无法对 PrintDialog 上的中止做出反应

> ID：13952901
> 
> 赞同：2
> 
> 时间：2012-12-19T12:54:01.030
> 
> 标签：c#, devexpress, report

我有一份报告，想打印出来。目前我正在使用：

```
myreport.PrintDialog() 
```

如果我在 Windows 上单击“中止”，`PrintDialog`则报告将在标准打印机上打印。我该如何处理这种中止？我只想在 OK 上打印，但我无法处理`DialogResult`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:56:50.327

你有过这样的工作吗？

```
PrintDialog dialog = new PrintDialog();
if (dialog.ShowDialog() == DialogResult.OK)
{
    // do your printing process here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:03:08.677

从[`PrintTool.PrintDialog()`](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraPrintingPrintTool_PrintDialogtopic)方法；

> 运行用于选择打印机、设置一些打印选项和打印文档的打印对话框。

```
Return value
Type: Nullable<Boolean> 
true if the user clicks OK in the dialog box; false if the user clicks Cancel; 
```

[`How to: Print a Report`](http://documentation.devexpress.com/#xtrareports/CustomDocument5093)

```
using System;
using System.Windows.Forms;
using DevExpress.XtraReports.UI;
// ...

private void button1_Click(object sender, EventArgs e) {
    // Create a report instance, assigned to a Print Tool.
    ReportPrintTool pt = new ReportPrintTool(new XtraReport1());

    // Invoke the Print dialog.
    pt.PrintDialog();

    // Send the report to the default printer.
    pt.Print();

    // Send the report to the specified printer.
    pt.Print("myPrinter");
} 
```

# python - 将 pyBarcode 输出转换为 PIL 图像文件

> ID：13952913
> 
> 赞同：9
> 
> 时间：2012-12-19T12:54:42.150
> 
> 标签：python, python-imaging-library

我正在尝试将 pyBarcode 的输出转换为 PIL 图像文件，而无需先保存图像。首先，pyBarcode 会生成一个像这样的图像文件：

```
>>> import barcode
>>> from barcode.writer import ImageWriter
>>> ean = barcode.get_barcode('ean', '123456789102', writer=ImageWriter())
>>> filename = ean.save('ean13')
>>> filename
u'ean13.png' 
```

正如您在上面看到的，我不希望图像实际保存在我的文件系统上，因为我希望将输出处理成 PIL 图像。所以我做了一些修改：

```
i = StringIO()
ean = barcode.get_barcode('ean', '123456789102', writer=ImageWriter())
ean.write(i) 
```

现在我有一个 StringIO 文件对象，我想 PIL “读取”它并将其转换为 PIL 图像文件。我想使用`Image.new`或者`Image.frombuffer`但是这两个功能都需要我输入一个大小...不能从条形码 StringIO 数据中确定大小吗？ `Image.open`在他们的文档中说明了这一点：

> 您可以使用字符串（表示文件名）或文件对象。在后一种情况下，文件对象必须实现 read、seek 和 tell 方法，并以二进制模式打开

StringIO 实例不也是文件对象吗？如何将其作为二进制文件打开？

```
Image.open(i, 'rb')
>>> Image.open(i, 'rb')                                                                                                           
Traceback (most recent call last):                                                                                            
  File "<stdin>", line 1, in <module>                                                                                  
  File "/home/mark/.virtualenvs/barcode/local/lib/python2.7/site-packages/PIL/Image.py", line 1947, in open                                                                                                                     
    raise ValueError("bad mode")                                                                                 
ValueError: bad mode 
```

我确定我非常接近答案，我只需要有人指导。提前谢谢各位！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:04:21.850

`StringIO`对象*是*文件对象。

但是，如果您正在使用该[`cStringIO`模块](http://docs.python.org/2/library/stringio.html#module-cStringIO)（该模块的 C 优化版本`StringIO`），请注意，一旦您创建了一个空`StringIO`实例，它将仅针对写入进行优化，并且您不能将其用作输入文件，反之亦然. 在这种情况下只需重新初始化它：

```
i = StringIO(i.getvalue())  # create a cStringIO.StringO instance for a cStringIO.StringI instance. 
```

对于 python 版本（`StringIO`模块），只需重新开始：

```
i.seek(0) 
```

您*无需*为`Image.open()`调用指定文件模式；除非`i`是字符串，否则在任何情况下都会被忽略：

```
img = Image.open(i) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-14T13:48:24.630

以下内容对我有用，可以将输出转换为 PIL 图像文件：

```
import barcode
ean = barcode.get('ean13', '123456789102', writer = barcode.writer.ImageWriter())
image = ean.render() 
```

这种方式不需要StringIO

# c# - 无法将派生类转换为其基类型

> ID：13952914
> 
> 赞同：4
> 
> 时间：2012-12-19T12:54:43.473
> 
> 标签：c#, oop, polymorphism

我的课堂上有一些对话框，我正在尝试用一个函数初始化它们：

```
 private void InitializeFileDialog(ref FileDialog fileDialog)
    {
        fileDialog.Filter = "Word Documents|*.doc|Excel Worksheets|*.xls|PowerPoint Presentations|*.ppt" +
         "|Office Files|*.doc;*.xls;*.ppt" +
         "|All Files|*.*";
        fileDialog.DefaultExt = "txt";
    } 
```

问题是当我调用它时：

```
 InitializeFileDialog(ref dialog); 
```

`error CS1503: Argument 1: cannot convert from 'ref Microsoft.Win32.OpenFileDialog' to 'ref Microsoft.Win32.FileDialog'`

我试图投射，但由于某种原因它不能。有什么问题？是因为`FileDialog`抽象吗？我试图查找是否是这个原因，但我找不到任何有用的东西。

以下是在 中找到的声明`Microsoft.Win32`：

```
public abstract class FileDialog : CommonDialog
public sealed class OpenFileDialog : FileDialog 
```

我也尝试使用泛型，但没有用。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T12:56:39.387

最好的解决方案是删除`ref`关键字。在这种情况下确实不需要。

你*只*需要`ref`, 如果你的方法应该能够重新分配你传入的变量，这应该几乎永远不会。返回一个值，或者直接使用对象，通常就足够了。

然而，编译器错误来自于您需要传入该方法所需的确切类型的变量。像这样：

```
FileDialog baseDialog = fileDialog;
// baseDialog might be a different object when this returns
InitializeFileDialog(ref baseDialog); 
```

毕竟，作为`ref`参数传递的原始变量可以由您的方法重新分配。

现在，如果它将 a 分配`SaveFileDialog`给您的原始变量 type会发生什么`OpenFileDialog`？我们所知道的世界将会终结。这就是为什么你需要创建一个临时变量 type `FileDialog`。类型系统允许您的方法将任何派生类的对象分配给该变量。

有关此有趣主题的更多信息，请参阅 Eric Lippert 的此博客条目：
[为什么 ref 和 out 参数不允许类型变化？](http://blogs.msdn.com/b/ericlippert/archive/2009/09/21/why-do-ref-and-out-parameters-not-allow-type-variation.aspx)

无论如何：不要`ref`在这种情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:01:49.553

问题出在`ref`关键字上。它允许您替换调用者的引用。

例如：

```
static void Main(string[] args)
{
    string str = "hello";

    SomeFunction(ref str);

    Console.WriteLine(str); // outputs "world"
}

static void SomeFunction(ref string obj)
{
    obj = "world";
} 
```

现在想象你可以使用基类，你会遇到这种情况：

```
static void Main(string[] args)
{
    OpenFileDialog dialog = new OpenFileDialog();

    SomeFunction(ref dialog);
}

static void SomeFunction(ref FileDialog obj)
{
    obj = new SaveFileDialog();
} 
```

中的代码`SomeFunction`有效，因为`SaveFileDialog`它是`FileDialog`. 但是，在`Main`函数中，您会将 a 分配`SaveFileDialog`给 a `OpenFileDialog`，这是不可能的。这就是为什么在使用`ref`关键字时，您必须提供完全相同类型的引用。

要解决您的问题，只需删除`ref`关键字。

# c++ - 引用的直接初始化和复制初始化

> ID：13952918
> 
> 赞同：7
> 
> 时间：2012-12-19T12:54:51.650
> 
> 标签：c++

我一直在阅读“C++ 入门”。对于对象的初始化，C++ 支持 2 种初始化形式：直接和复制。但是书上没有提到初始化的参考。在书中，我从未见过引用的直接初始化（如果存在）。一切都是副本，例如：

```
int i;
int &j = i;//but not int &j(i);which also works in my experiment 
```

我想知道在下面进行引用的初始化是否相同。对于以下代码：

```
string null_book = "9-999-99999-9"; 
```

初始化过程是首先创建一个临时字符串对象tmp（例如），它将直接使用ac样式字符串参数进行初始化，然后使用复制构造函数初始化变量null_book。这对我来说很有意义。对于这个：

```
int &j = i; 
```

ref j 会以同样的方式初始化吗？这将是一个临时引用，它 &t（例如）由 i 初始化，然后用 t 初始化 j？这没有意义？？？为什么书中从不使用直接初始化作为参考？感谢您的关注！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:03:55.897

直接初始化和复制初始化之间的主要区别在标准的第 8.5 节第 17 段中介绍。一般来说，不同之处在于，对于复制初始化中的类类型，不考虑显式构造函数（仅考虑转换构造函数），并制作可能省略的副本；在直接初始化中，考虑显式构造函数并直接构造目标。从标准的第 8.5 节：

> [ `=`...]

对于非类类型（包括引用），直接初始化和复制初始化具有相似的语义；对于引用，在任何一种情况下都会发生引用绑定，如**8.5.3 References [dcl.init.ref]**中所述。引用的直接初始化和复制初始化仅在涉及转换函数的情况下具有不同的语义（**13.3.1.6 Initialization by conversion function for direct reference binding [over.match.ref]**）；同样，允许直接初始化调用显式转换函数，而复制初始化则不允许。

所以，在

```
int &j = i; 
```

8.5.3p5 适用，并且引用`j`直接绑定到 lvalue `i`。不调用任何临时对象。

就复杂性而言，引用更接近于基本（原始）类型而不是类类型。基元在没有临时构造的情况下被初始化（8.5p17，最后一个项目符号），一般参考也是如此。这可能就是为什么本书只使用`=`表格来初始化引用的原因；与原语一样，通常没有区别，而且书写`int i = x;`通常比`int i(x);`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T13:08:29.353

术语*复制初始化*和*直接初始化*是C++*语法*的一部分。他们不会立即告诉你发生了什么样的代码生成。标准描述了任何语法结构的含义，初始化的上下文有许多不同的特定结果，具体取决于正在初始化的事物的类型。

特别是对于原始类型、指针类型和引用类型，直接初始化和复制初始化（语法结构！）具有完全相同的效果。也就是说，基本类型和指针类型使用初始化器的值进行初始化，并且引用绑定到初始化器所引用的对象：

```
int a1 = 5;
int a2(5);      // same thing

Foo * p1 = &x;
Foo * p2(&x);   // same thing

Bar & b1 = y;
Bar & b2(y);    // same thing 
```

（然而，对于*用户定义的类型，直接初始化和复制初始化**是*有区别的，尽管它是一个微妙的区别，通常并不重要。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T12:58:15.520

C++ 中的引用只是一个戴着滑稽帽子的指针。该声明：

```
TYPE& x = y; 
```

总是等价于：

```
TYPE* const x = &y; 
```

所有引用所做的只是节省您输入`*`字符并声明您相信永远不会有空值。所以初始化是微不足道的，因为它是一个指针的初始化，而不是一个对象，并且没有复杂的对象，临时的或其他的，需要处理。

这是概念模型；当然，还有优化。如果您声明如下函数：

```
void takeARef(FOO const& ref) { ... } 
```

并调用它，然后编译器只是将指针传递给函数，并且什么都不创建。

# mongodb - mongodb聚合不显示组字段数据

> ID：13952919
> 
> 赞同：0
> 
> 时间：2012-12-19T12:54:53.890
> 
> 标签：mongodb, group-by

我的数据库示例：

```
{
    "_id": {
        "$oid": "50c97f4f6e46e4b31634934"
    },
    "index": "6633333",
    "uniq_name": "com.test.fix",
    "ad": "com.ad",
    "ad_delay_time": "43200000",
    "track_time": {
        "$date": "2012-12-13T07:10:06.056Z"
    }
} 
```

我的数据库以百万为单位，当我尝试对此数据进行查询时：

```
db.track.aggregate( [ 
{ $match: { track_time: { $gte: ISODate("2012-12-18T00:00:00.000Z") }}},
{ $group: { _id: { ads:  "$ad" },
            count: { $sum: 1} } }
]) 
```

它没有向我显示不同的广告名称，而是显示不在广告中的数字的计数，实​​际上是 ad_delay_time。它向我显示了 ad_delay_time 的所有值显示为

```
"result" : [
    {
        "_id" : {
            "ads" : "43200000"
        },
        "count" : 2187735
    }
],
"ok" : 1 
```

我不知道为什么它会这样查询。另外我必须查询一天的数据，所以我应该使用**$gte**还是直接提到的日期戳。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:45:19.367

我的 php 中有一个错误的函数，因此我在广告中获取了 ad_delay_time 的所有条目，在 ad_delay_time 中获取了广告条目。这是我在运行查询后看到的菜鸟错误：**db.track.find({ad: "43200000", track_time: { $gte: ISODate("2012-12-18T00:00:00.000Z") }}) .count()**。我真的为此道歉。

# c# - C# powerpoint 互操作多个幻灯片

> ID：13952922
> 
> 赞同：1
> 
> 时间：2012-12-19T12:55:00.903
> 
> 标签：c#, interop, slideshow, powerpoint

我有一个将 powerpoints 导出到网络文件夹的服务器（我知道微软不推荐它，所以请给我那些）

我的应用程序应该用于在大型电视上显示幻灯片，因此我希望有一个连续的幻灯片放映流（不闪烁）。我有一个事件（FileSystemWatcher），每当在该文件夹上创建新文件时都会进行检查。当它出现时，它会用 powerpoint 打开并开始幻灯片放映。

问题是如果我在不考虑旧的情况下开始幻灯片放映，它会很好地工作，只是短暂的打嗝，但没有闪烁。但是，我打开了大量的 powerpoint 实例。

我尝试开始幻灯片放映并关闭旧实例，但是当我这样做时，新的幻灯片放映也会关闭/退出。

有什么建议么？

工作代码，但对内存不太友好....

```
PPT.Application oPpt = new PPT.Application();
PPT.Presentations oPresSet = oPpt.Presentations;
PPT.Presentation oPres = oPresSet.Open(e.FullPath, Microsoft.Office.Core.MsoTriState.msoTrue, Microsoft.Office.Core.MsoTriState.msoTrue, Microsoft.Office.Core.MsoTriState.msoTrue);
PPT.Slides oSlides = oPres.Slides;
PPT.SlideShowSettings objSSS = oPres.SlideShowSettings;

objSSS.Run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T08:53:16.060

找到解决方案（适用于 powerpoint 2010）首先为演示文稿 1 开始幻灯片放映，然后检索它的幻灯片视图。开始演示文稿 2 的幻灯片放映，然后使用幻灯片视图关闭演示文稿 1 的幻灯片放映，然后关闭演示文稿 1 的演示文稿。

在代码中（从上面继续我的代码）

```
objSSS.Run();
PPT.SlideShowView oSlideView = oPres.SlideShowWindow.View;

if (oldPPTPres != null && oldPPTView != null)
{
     oldPPTView.Exit();

     oldPPTPres.Close();
}

oldPPTView = oSlideView;
oldPPTPres = oPres; 
```

# java - JSF/Grails 应用的静态分析工具

> ID：13952923
> 
> 赞同：2
> 
> 时间：2012-12-19T12:55:00.407
> 
> 标签：java, web-applications, grails, static-analysis, maintenance

在软件开发的上下文中，代码维护可能会在系统中引入错误，因为存在共享代码元素 - 例如变量和方法。我知道有几种静态分析代码的工具（例如 PMD、WALA、SOOT 等）。

但是，我的问题是：是否有任何 Eclipse 插件/工具可以分析 JSP/GSP 页面和控制器/域类之间的关系？我的意思是，是否有任何工具可以检测给定 Web 应用程序的页面和类之间不匹配的变量依赖关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:27:53.997

它与静态分析不太一样，但恕我直言。使用 intellij (ultimate)，您可以获得可用属性 (和控制器名称) 的智能文本：

![jsp中模型属性的智能文本](../Images/49377213dd04e654ecbd4031de9c7c1c.png)

# css - 每当内容变大时，CSS/图像的多个边框/边缘必须重复

> ID：13952931
> 
> 赞同：-3
> 
> 时间：2012-12-19T12:55:22.457
> 
> 标签：css

我想做这样的东西

![在此处输入图像描述](../Images/24fb2320948239b4af6f17c223ea14c1.png)

你能看到边缘有 3 个边框吗？有一种风格，我怎么做这样的东西？

我有一个计划，

裁剪内容的头部，

裁剪内容区域，

并裁剪内容的页脚

所以中间部分会随着内容重复，但我不确定如何制作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:00:07.797

您可以使用 div、边框和绝对定位来实现。

[演示](http://jsfiddle.net/wwA3q/2/)

只需绝对定位 div 并稍微更改顶部/左侧

```
div {
  border: 1px solid #aaa;
  width: 300px;
  height: 200px;
  background: white;
  position: absolute;
}
#first{
  top: 6px;
  left: 6px; 
}
#second{
  top: 3px;
  left: 3px;
} 
```

# c# - 禁用输入和退出键c#的哔声

> ID：13952932
> 
> 赞同：8
> 
> 时间：2012-12-19T12:55:27.667
> 
> 标签：c#, enter, beep

我想禁用按 Enter 键时发出的哔声`textbox`。我的`KeyDown`活动是：

```
 private void textBox_Zakljucak_KeyDown(object sender, KeyEventArgs e)
        {

            if ((e.KeyCode == Keys.Enter) || (e.KeyCode == Keys.Tab))
            {
                Parent.SelectNextControl(textBox_Zakljucak, true, true, true, true);
            }
            else if ((e.KeyCode == Keys.Back))
            {
                textBox_Zakljucak.Select(textBox_Zakljucak.Text.Length, 0);
            }
            else if (!Regex.IsMatch(textBox_Zakljucak.Text, @"^[0-9.-]+$"))
            {
                textBox_Zakljucak.Clear();
                textBox_Zakljucak.Select(textBox_Zakljucak.Text.Length, 0);
            }
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T13:37:54.430

您必须防止生成 KeyPressed 事件，这是发出哔哔声的事件。这需要将 SuppressKeyPress 属性设置为 true。使其看起来类似于：

```
 if ((e.KeyCode == Keys.Enter) || (e.KeyCode == Keys.Tab))
        {
            Parent.SelectNextControl(textBox_Zakljucak, true, true, true, true);
            e.Handled = e.SuppressKeyPress = true;
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T12:57:36.047

如果要防止事件在 Winforms 或 WPF/Silverlight 中冒泡，则需要从事件处理程序中设置`e.Handled`为。`true`

仅当您实际对事件进行了满意的处理并且不希望对相关事件进行任何进一步处理时，才执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-03T14:29:04.880

这对我有用。

```
private void txtTextbox_KeyDown(object sender, KeyEventArgs e)
{
    //do somthing

    if(e.KeyCode==Keys.Enter)
    {
        e.Handled=true;
        e.SuppressKeyPress=true;
    }
}

private void txtTextbox_KeyUp(object sender, KeyEventArgs e)
{
    e.Handled=false;
    e.SuppressKeyPress=false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-21T14:50:04.510

在这里运行 VS 2015 和上面的答案对我不起作用。为了抑制硬返回时的哔哔声（在文本框和复选框中），我从 KeyDown 事件切换到 KeyPress 事件并执行了以下操作：

```
private void mTxtSrchStr1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)Keys.Return)
    {
         this.sSearchFind();
         e.Handled = true;
    }
} 
```

KeyPress 事件中没有 e.SuppressKeyPress，但那里不需要它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-07-14T14:25:58.800

经过多次“捣蛋”后，我发现您必须将包含控件的表单上的“KeyPreview”值设置为“True”（在表单属性下），然后使用“KeyDown”事件来测试您的击键，如果它是检测到将“True”分配给“e”事件参数对象的“Handled”和“SuppressKeys”属性。

以下是 VB.NET 代码，但相同的方法在“C#”中有效。注意，该操作是对 FORM 的按键，而不是控件本身。

```
 Private Sub ThisForm_KeyDown(sender As Object, e As KeyEventArgs) Handles Me.KeyDown
    If e.KeyCode = Keys.Escape Then
        'turn off beep
        e.Handled = e.SuppressKeyPress = True
    End If 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-08T13:11:45.160

```
 private void txtMessage_KeyDown(object sender, KeyEventArgs e)
    {

        if (e.KeyCode == Keys.Enter)
        {
            e.SuppressKeyPress = true;
            _sendMessage.PerformClick();
        } 
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-12T21:37:25.173

只需将 Form KeyPreview 属性设置为 true，然后将以下代码添加到 Form KeyPress 事件中；

if (e.KeyChar == (char)Keys.Return)

```
 e.Handled = true; 
```

那么再见了bip！！！

# c++ - 接口描述中接口方法的预定义参数列表

> ID：13952935
> 
> 赞同：0
> 
> 时间：2012-12-19T12:55:47.127
> 
> 标签：c++, com, interface, code-organization

情况：我正在编写一个看起来像的 COM 接口

```
MIDL_INTERFACE(/*....*/)
IFace : IUnknown
{
  STDMETHOD_(void, Foo)(int param) PURE;
}; 
```

该接口应该只在我的项目中使用，在几个编译单元中，不应该放在 idl 文件中。`int param`应该以逻辑`"OR"`方式使用

```
IFace* p;
p->Foo( param1 | param2 | param3 ); 
```

参数值列表是静态预定义的，不应在程序执行期间修改。

问题是：如何定义参数列表？接口描述应该放在一个已经包含许多接口描述（硬遗留）的`IFace`文件中，这个文件包含在整个项目的许多地方。所以，我想在接口类本身中定义参数列表。

```
IFace : IUnknown
{
  /*somehow define list of param for Foo here*/

  STDMETHOD_(void, Foo)(int param) PURE;
}; 
```

并以某种方式使用它`Foo( IFace::param1 | IFace::param2 );`。我考虑将参数列表作为`static const`变量，但我不喜欢将*变量*放在接口类中的想法。我无法使用枚举，因为我需要使用逻辑或。

除了完全重组包含文件之外，对这种情况有什么好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:05:24.553

您可以使用枚举：

```
IFace : IUnknown
{
    enum { Param1 = 0x1, Param2 = 0x2, Param3 = 0x4, Param4 = 0x8 ... etc.

    STDMETHOD_(void, Foo)(int param) PURE;
};
// usage
Foo( IFace::Param1 | IFace::Param2 ); 
```

您可以添加参数组合：

```
enum { Param1 = 0x1, Param2 = 0x2, Param1_and_2 = Param1 | Param2, ... etc.
//usage
Foo( IFace::Param1_and_2 ); 
```

# javascript - Jquery 滚动条问题 - 调整窗口大小或打开 Firebug 解决

> ID：13952937
> 
> 赞同：2
> 
> 时间：2012-12-19T12:55:54.573
> 
> 标签：javascript, jquery, html, css, jscrollpane

我有一个非常奇怪的问题，我花了数小时试图解决，但无处可去。

我的网站上有一个 jQuery 滚动窗格，可让您滚动浏览各种产品。当页面加载时，没有显示任何产品。但是，当您稍微调整浏览器窗口大小或打开/关闭 firebug 时，产品会弹出并正确显示。

[一个例子可以在这里找到](http://www.scifinow.co.uk/?p=331122&preview=true)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:09:20.240

我有类似的问题。它可能是由分离后删除父元素引起的。

```
var $img = $("<img>").attr.......
// ---- loading
$parent.append($img);
var w = $img.naturalWidth....
$img.detach();
$parent.remove();
$anotherDiv.append($img); 
```

图形卡上的数据未更新时呈现黑色方块。我通过分离 $parent 而不是删除解决了我的问题。

# objective-c - 无法使用 NSURLConnection 让 iOS http post 工作

> ID：13952940
> 
> 赞同：5
> 
> 时间：2012-12-19T12:55:55.417
> 
> 标签：objective-c, ios, post, nsurlrequest

我正在尝试使 POST 消息正常工作。我看过几篇描述这样做的帖子，例如[这个](https://stackoverflow.com/questions/6148900/append-data-to-a-post-nsurlrequest)，但我仍然无法让它工作。下面是我的objective-c代码：

```
NSString * urlString = @"http://magicthegatheringdatabase.com/test.php";
NSURL *aUrl = [NSURL URLWithString: urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:aUrl
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                   timeoutInterval:60.0];

NSString *postString = [NSString stringWithFormat:@"tes1=%@&test2=%@",
                        [@"hello" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                        [@"world" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSData * postBody = [postString dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody: postBody];

[request addValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];

NSString *postLength = [NSString stringWithFormat:@"%d", postBody.length];
[request addValue: postLength forHTTPHeaderField:@"Content-Length"];

[request setHTTPMethod:@"POST"];

NSError * error = nil;
NSData *returnData = [NSURLConnection sendSynchronousRequest: request
                                           returningResponse: nil
                                                       error: &error];
NSLog(@"%p, %@", error, error.localizedDescription);

NSString * returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"Result: %@", returnString); 
```

这是我的PHP：

```
<?php
  print_r($_REQUEST);
  print_r($_POST);
  print_r($_GET);

  echo file_get_contents( 'php://input' );
?> 
```

如果我运行代码，我会记录以下内容：

```
2012-12-19 09:24:09.061 MTG 甲板生成器 [7921:570f] 0x0，（空）
2012-12-19 09:24:09.062 MTG Deck Builder[7921:570f] 结果：数组
(
)
大批
(
)
大批
(
)

```

如果我直接导​​航到 url 并附加`?test1=hello&test2=world`（显然使用 GET 而不是 POST），我会得到：

```
大批
(
    [test1] => 你好
    [test2] => 世界
    [phpbb3_5e63r_u] => 1
    [phpbb3_5e63r_k] =>
    [phpbb3_5e63r_sid] => 7ff37e188aa8e0ab57fae6a52f0d1f7b
    [__utma] => 86369156.392372889.1349352986.1352901458.1353328580.11
    [__utmz] => 86369156.1351935106.8.2.utmcsr=hankinsoft.com|utmccn=(推荐)|utmcmd=推荐|utmcct=/website/forum/10-mtg-magic-the-gathering-trading-card-game-tcg- da/634-new-forum.html
    [style_cookie] => 空
)
大批
(
)
大批
(
    [test1] => 你好
    [test2] => 世界
)

```

所以我知道我的 PHP 正在正确记录 get/requests，但我不确定为什么我通过 Objective-c 代码的 POST 不起作用。我很确定我忽略了一些愚蠢的事情。关于我所缺少的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:22:51.497

这是因为`NSURLConnection`没有正确处理重定向。

当您将`POST`请求发送到 URL`http://magicthegatheringdatabase.com/test.php`时，服务器会响应`301 Moved Permanently`并重定向到`http://www.magicthegatheringdatabase.com/test.php`.

不是向新 URL 发送相同的请求，而是`NSURLConnection`创建一个新`GET`请求并丢弃原始请求的`HTTPBody`. 这种行为是由于[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2)禁止在未经用户确认`HEAD`和`GET`未经用户确认的情况下自动重定向请求。将方法更改为`GET`是错误的，但至少它是一种安全的方法，不会损害 HTTP 资源。

这个问题可以通过两个选项来解决：

1.  您可以简单地将请求的 URL 更改为`http://www.magicthegatheringdatabase.com/test.php`.

2.  或者，您可以创建一个`NSURLConnection`带有委托的实例并实现`connection:willSendRequest:redirectResponse:`，以便按照[此问题](https://stackoverflow.com/questions/10783499/nsurlrequest-how-to-handle-a-redirected-post)的答案中所述正确处理重定向。即使重定向发生变化，这也会起作用，但需要您编写更多代码，因为您需要等待响应、创建`NSMutableData`对象、在字节到来时附加字节并异步处理所有内容（请参阅[Apple Developer Documentation](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)）。但是，异步执行任务始终是一个好主意：如果需要，您可以取消它们，并且您不会冒长时间阻塞线程的风险（当您在主线程中时，任何超过 1 秒的时间都是很长的时间）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:08:02.363

您应该尝试添加以下内容：

`[request addValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:03:24.570

改变：

```
 NSString *postString = [NSString stringWithFormat:@"tes1=%@&test2=%@", 
                           [@"hello" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                           [@"world" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

现在添加

```
 [request setHTTPMethod:@"POST"]; 
```

# typescript - TypeScript 中的双等号 (==)

> ID：13952941
> 
> 赞同：16
> 
> 时间：2012-12-19T12:55:59.523
> 
> 标签：typescript

我一直在用 TypeScript 编写一些单元测试。示例 QUnit 测试包含：

```
 ok( 1 == "1", "Passed!" ); 
```

编译器`tsc`声称：

> 运算符 '==' 不能应用于类型 'number' 和 'string'

并以状态退出`1`（尽管它确实正确生成了 JS）。

规范说：

> <、>、<=、>=、==、!=、=== 和 !== 运算符
> 
> 这些运算符要求一种操作数类型与另一种操作数类型相同或者是另一种操作数类型的子类型。结果总是布尔原始类型。

所以看起来警告/错误是正确的。这难道不是违背了类型强制`==`运算符的意义吗？是否有`==`在 TypeScript 中使用*不会*产生此警告的有效用例？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T13:10:13.313

`==`TypeScript 中（即使用类型强制）的至少一种可能的情况是，预期操作数之一是 Any 类型：

> 如果满足以下条件之一，则类型 S 是类型 T 的子类型，而 T 是 S 的超类型：[...]
> 
> **T 是 Any 类型。**

现在您可能会看到图片：任何具有 Any 参数的函数都可以安全地（嗯，更多-o-less；所有常见的陷阱`==`仍然适用于此处）将其与任何集合类型的值与`==`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-19T17:51:35.090

以下是编译器允许并使用`==`.

```
var a: string = "A";
var b: Object = "A";

if (a == b) {
    alert("Example 1");
}

var c: any = "1";
var d: number = 1;

if (c == d) {
    alert("Example 2");
}

var e: any = "E";
var f: string = "E";

if (e == f) {
    alert("Example 3");
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T13:44:06.230

TypeScript 的要点之一是我们编写更清晰的 JavaScript。执行 1 == "1" 之类的操作，除非您明确转换它或使用 ToString() / ParseInt() ，否则它不会起作用，具体取决于您是希望比较字符串还是数字。

您可以使用 Any 使变量的行为与通常的动态 JavaScript 变量一样，但随后您会忽略 TS 的意义，即受益于强大的类型/类型推断系统，该系统可帮助我们避免与现有的许多 JavaScript 陷阱相冲突因为它的自动类型强制规则。

# javascript - iframe.readyState 在 chrome 中不起作用

> ID：13952942
> 
> 赞同：32
> 
> 时间：2012-12-19T12:56:04.193
> 
> 标签：javascript, jquery, asp.net, html, iframe

我动态创建了一个 iframe，并将下载**二进制文件（xls、doc ...）的页面设置为 url。**下载文件时，我会显示动画。没有的时候，我把它藏起来。

问题是 Chrome 不知道文件何时完全下载，即 iframe 何时完全加载。我使用 iframe 属性`readyState`检查 iframe 状态：

```
var iframe = document.createElement("iframe");
iframe.style.visibility = "hidden";
// I start a progress animation
window.setTimeout(showProgressAnimation, 1000);
// I start the file download
iframe.src ='GetFile.aspx?file=' + fileName;
document.body.appendChild(iframe);

function showProgressAnimation() {
   if (iframe.readyState == "complete" || iframe.readyState == "interactive") {
      // I stop the animation and show the page
      animation.style.display = 'none';
      progressBar.hide();
      $('#page').show();
   }
   else {
      // Chrome is always getting into this line
      window.setTimeout(showProgressAnimation, 1000);
   }
} 
```

所以结果是一个无限循环。

我尝试了以下方法，它在 Firefox 和 Chrome 中有效，**但**在内容是二进制文件时无效：

```
if ($.browser.mozilla || $.browser.webkit ) {
    iframe.onload = function showProgressAnimation() {
        animation.style.display = 'none';
        progressBar.hide();
        $('#page').show();
    }
}
// IE
else{
     window.setTimeout(showProgressAnimation, 1000);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T14:08:01.763

您可以使用`onload`to 发出负载的信号`iframe`

这是一个简单的例子

```
var iframe = document.createElement("iframe");
iframe.style.display = "none";
// this function will called when the iframe loaded
iframe.onload = function (){
  iframe.style.display = "block";    
  alert("loaded");
};
// set the src last.
iframe.src ='http://www.test.com';

// add it to the page.
document.getElementById("one").appendChild(iframe); 
```

在这里测试：http:
[//jsfiddle.net/48MQW/5/](http://jsfiddle.net/48MQW/5/)最后加载。[http://jsfiddle.net/48MQW/24/](http://jsfiddle.net/48MQW/24/)
`src`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-12T15:49:02.477

可下载的文件内容不会触发 readystatechange 事件处理程序或 onload 事件处理程序。这可以在服务器端设置一个cookie和文件内容，客户端定期检查这个cookie。例如：

服务器

```
response.cookie('fileDownloaded','true');
response.header('attachment','your-file-name.any');
//...write bytes to response... 
```

客户

```
var checker = setInterval(()=>{
    if(document.cookie.indexOf('fileDownloaded')>-1){
        alert('done');
        clearInterval(checker);
    }
},100); 
```

当然，您可以使用您的框架来正确检查 cookie 值，这只是一个 poc，而不是一个安全的 cookie 解析器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T13:42:06.453

请试试这个 - 你真的在逐行混合 dom 和 jQuery

```
var tId;

function stopAnim() {
    // I stop the animation and show the page
    animation.hide();
    progressBar.hide();
    $('#page').show();
    clearInterval(tId);
}
var iframe = $("<iframe />");
iframe.css("visibility","hidden");

iframe.on("readystatechange",function() {
 if (this.readyState == "complete" || this.readyState == "interactive") {
   stopAnim();
 }
});
iframe.on("load",function() { // can possibly be deleted
 if (tId) {
   stopAnim();
 }
});

iframe.attr("src","GetFile.aspx?file=" + fileName);
$("body").append(iframe);
tId = setInterval(function() {
  // update progress here
}, 1000); // 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-23T12:24:12.253

[Sarkiroka 的解决方案](https://stackoverflow.com/a/41104523/5211833)对我有用。我`id`在 cookie 名称中添加了一个实例，以提供线程安全的解决方案：

```
const instanceId = "some uuid retrieved from client";

response.cookie(`fileDownloaded-${instanceId}`,'true', { path: '/', secure: true, maxAge: 90000});
response.header('attachment','your-file-name.any');
//...write bytes to response... 
```

客户

```
var checker = setInterval(()=>{
    if(document.cookie.indexOf(`fileDownloaded-${instanceId}`)>-1){
        alert('done');
        clearInterval(checker);
    }
},100); 
```

# c# - “不能将空值分配给 System.Int32 类型的成员，这是一个不可为空的值类型。”

> ID：13952943
> 
> 赞同：3
> 
> 时间：2012-12-19T12:56:08.717
> 
> 标签：c#, wcf, linq

我有一个 WCF 服务（服务）。服务管理数据。但是现在我在 LINQ 查询中选择数据时遇到了问题。我收到一条消息**“无法将空值分配给 System.Int32 类型的成员，该类型是不可为空的值类型。”**

通过第一次调试，我将完成该方法，您将完成异常行。当我将调试器行（黄色标记的行）放回“// 08”行时，然后我遍历该方法一切正常。

```
 private static ResultClass Geselecteerd(int AID_Artiest)  // 01
    { // 02
        ResultClass _Result = new ResultClass(); // 03
        string sMethodName = System.Reflection.MethodBase.GetCurrentMethod().Name;// 04
        // 05
        try // 06
        { // 07
            var recArtiest = (from artiest in DatabaseControl.GetDatabeheer.DataContext.ARTIESTs  // 08
                           where artiest.ID_ARTIEST == AID_Artiest
                           select artiest).SingleOrDefault();

            if (recArtiest != null)
            {
                ArtiestDataType.ID_Artiest = recArtiest.ID_ARTIEST;
                ArtiestDataType.Artiestnaam = recArtiest.ARTIESTNAAM;
                ArtiestDataType.Voorvoegsel = recArtiest.VOORVOEGSEL;
                ArtiestDataType.Product = recArtiest.PRODUCT;
                ArtiestDataType.ID_Categorie = recArtiest.ID_CATEGORIE;
                ArtiestDataType.ID_Genre = recArtiest.ID_GENRE;
                ArtiestDataType.Is_Band = BasisDataType.GetBoolString(recArtiest.IS_BAND);
                ArtiestDataType.Land = recArtiest.LAND;
                ArtiestDataType.Plaats = recArtiest.PLAATS;
                ArtiestDataType.Website = recArtiest.WEBSITE;
                ArtiestDataType.DatumInvoer = recArtiest.DATUM_INVOER;
                ArtiestDataType.DatumMutatie = recArtiest.DATUM_MUTATIE;
            }
        }
        catch (Exception ex)
        {
            string sFoutmelding = "Kan geen selectie maken.";
            FLogboek.AddFoutmelding(FClassName, sMethodName, sFoutmelding, ex.Message);

            _Result.Code = ResultCode.FATAAL;
            _Result.Melding = sFoutmelding;
        }

        return _Result;
    } 
```

**ID_ARTIEST 是一个整数字段，它也是一个主键。该字段的值是必需的，不能使用 NULL 值。**

**这种方法一直有效。当我添加新服务时，问题就开始了。**

我的问题是：我做错了什么？跟服务有关系吗？**我必须延迟这个过程吗？** 有人可以给我一些提示吗？我有 8 个服务参考。如果您缺少一些重要来源，我可以添加它。

我现在只有一个解决方法。我在 try-catch 区域内添加了 try-catch。然后我没有得到任何异常。它与性能有关。**我需要异步解决方案吗？**

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T14:17:58.827

几乎可以肯定正在发生的事情是类型的属性之一`ARTIESTs`是`DatabaseControl.GetDatabeheer.DataContext.ARTIESTs`类型`int?`（这意味着可为空的整数）。

我猜我会说要么是`ID_CATEGORIE`要么`ID_GENRE`。

您需要将类型的等效属性修改`ArtiestDataType`为 type `int?`。

这将解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T13:00:13.343

> 我错了什么？

除了将 null 分配给不可为空的元素（结构）？

您的代码毫无意义（发布大量不如实际发布您错过的相关部分）。

我可能是数据库中的字段可以为空并且包含为空，但是您的字段不是int？（int 可以为空）所以它不能在那里分配 null。

我会看看数据库映射表的方向是错误的。检查字段，检查所有可为空的列在类中实际上是可为空的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T13:01:35.340

改变

```
where artiest.ID_ARTIEST == AID_Artiest 
```

到

```
where artiest.ID_ARTIEST.HasValue && artiest.ID_ARTIEST.Value == AID_Artiest 
```

您的一个或多个艺术家没有`ID_ARTIEST`集合（您应该修复它，它看起来确实像应该始终存在的主键），因此在比较时`(int?)null == int`会引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:26:56.847

将变量/属性声明为可为空的 int

```
public int? myInt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T06:13:02.150

我有同样的问题，我在表格设计中有一个忽略重复的列。

在提交时插入，插入后将返回表格行。但是这里由于重复而忽略了该行，它没有返回具有标识值的表行（不可为空）。

所以预期值不存在，它会抛出“ **Non nullable excecption** ”。

在插入之前检查基于忽略重复列的行是否存在。它将解决问题

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-04-26T00:02:36.533

在我的情况下，ID 是一个 INT64，修复它的方法是使用 ToString()

```
..... 
group t2 by t1 into gr
select new {t1 = gr.Key, id = gr.First().ID.ToString()} 
```

# android - android在弹出窗口中打开活动，在顶角关闭图像...？

> ID：13952944
> 
> 赞同：1
> 
> 时间：2012-12-19T12:56:09.297
> 
> 标签：android, dialog, cancel-button

可能已经提出并回答了这个问题。但我的情况有所不同

我知道如何打开一个像对话框这样的活动（在menifest set Theme:dialog in android:theme）现在我想在我的对话框活动右上角有一个图像，就像现在大多数html弹出窗口一样。当用户点击它时，它会关闭该活动。

我只想设计想法如何设计该活动。这里的角取消将是图像而不是可绘制的形状。

![在此处输入图像描述](../Images/e3f0475266e110ea632bd7fbba381319.png)

# ios - 什么是 iOS 中 CoreData 集成中的正向和反向映射

> ID：13952947
> 
> 赞同：0
> 
> 时间：2012-12-19T12:56:16.547
> 
> 标签：ios, xcode, core-data, ios6

我是核心数据集成的新手，想知道什么是iOS中的前言映射和逆映射。

我需要使用逆映射合并 JSON 请求

如果可能，还请提供理论的快速链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:01:52.333

正向映射意味着在包含它的数据对象中对对象进行标准引用。逆映射是对包含对象的另一个重要引用。

与往常一样，最好的教程之一可通过 Ray Wenderlich 获得： [http ://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

# python - Python Tkinter 和继承的奇怪行为

> ID：13952952
> 
> 赞同：0
> 
> 时间：2012-12-19T12:56:32.807
> 
> 标签：python, inheritance, tkinter, options, init

我在 python 和 Tkinter 中有一个我不理解的行为。我定义了自己的框架类，并希望设置某些选项，例如边框宽度和浮雕，以便我定义的每个框架都使用这些设置。我做了

```
from Tkinter import *

class BaseFrame(Frame):
    def __init(self,master=None,cnf={}):
        Frame.__init__(self, master,cnf)

def main():
    root = Tk()

    f = BaseFrame(root)
    l1 = Label(f,text='test')
    l2 = Label(f,text='longtext')
    l1.pack()
    l2.pack()
    f.pack()
    root.mainloop()

if __name__ == '__main__':
    main() 
```

现在一切都在预期中。现在我尝试将设置添加到 BaseFrame，因此每一帧都会传递这些设置。

我添加到我的**初始化**函数：

```
self.configure(bg='red') 
```

并感到惊讶，因为这个指令似乎被全班完全忽略了。如果我在 f 的创建调用中添加一个选项 bg='red'：

```
f = BaseFrame(root,bg='red') 
```

有用。

```
Frame.configure(self,bg='red') 
```

也不起作用，以及其他一些奇怪的结构。无论我尝试什么，我都只能在创建对象时设置设置。在**init**函数中执行此表单似乎不起作用。

现在，如何设置选项？我错过了什么基本的东西吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:01:09.490

假设您问题中的代码是您的实际代码，`__init`则永远不会调用该函数，因为它被调用`__init`而不是`__init__`. 每次调用`BaseFrame(stuff)`时，实际上都是在调用超级构造函数，即`Frame(stuff)`，因为没有为 . 定义专门的构造函数`BaseFrame`。

此外，如果您想允许诸如`BaseFrame(bg='red')`必须将最后一个构造函数参数更改为`**cnf`而不是`cnf={}`.

# html - 简单的 margin-top / margin-left 麻烦

> ID：13952955
> 
> 赞同：4
> 
> 时间：2012-12-19T12:56:38.310
> 
> 标签：html, css

启发我一个问题：

如果我将一个 div 放在另一个 div 中，在第二个 div 中我不能使用属性`margin-left`并且`margin-top`不改变父 div 的位置？

我需要`padding`改用？？

示例：

摆弄边距：http : [//jsfiddle.net/zyEYj/1/](http://jsfiddle.net/zyEYj/1/)

没有边距的小提琴：http : [//jsfiddle.net/zyEYj/2/](http://jsfiddle.net/zyEYj/2/)

FIDDLE WITH PADDING INSIDE MOTHER DIV: [http://jsfiddle.net/zyEYj/3/](http://jsfiddle.net/zyEYj/3/)（这是我想要的最终效果，但我需要使用填充，并改变高度`#header`）

代码：

```
<div id="header" class="container">
    <div class="logo">
        <a href="index.asp"><img src="imagens/logo.png" /></a>
    </div>
</div>​ 
```

CSS：

```
body{
background:#d3f1fc;        
}

#header{
    height:135px;
    background:#ee4b14;
    padding-top:35px;
    padding-left:21px;
}

.container {
    margin:0 auto;
    width:960px;
}

.logo{
    width:382px;
    height:114px;
    background:#FFCC00;
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:14:57.633

这种行为被称为`margin collapse`。两个相邻的边距将相互折叠，绝对值较高的优先。

这可以通过分隔边距（通过`padding`或`border`在父元素上）或通过`position: relative`在子元素上使用并以这种方式调整其位置来解决。

## HTML：

```
<div class="parent">
    <div class="child"></div>
</div> 
```

## CSS：

### 普通的

```
/*
    these margins will collapse, and result in a total margin of 15px
*/
.parent
{
    margin: 5px;
}

.child
{
    margin: 15px;
} 
```

### 填充/边框解决方案

```
/*
    these margins will be separate, resulting in a total margin of 20px
    plus the border or padding of 1px
*/
.parent
{
    margin: 5px;
    padding: 1px; /* or border: 1px; */
}

.child
{
    margin: 15px;
} 
```

### 位置：相对解决方案

```
/*
    there is only one margin here, and the child
    is positioned relative to where it would usually be rendered
*/
.parent
{
    margin: 5px;
}

.child
{
    position: relative;
    top: 15px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:04:12.960

这是正常的行为。[http://www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)是一本很好的读物，可以更好地理解。

您将不得不`padding`在父母身上使用来移动孩子的顶部。

像这样：http: [//jsfiddle.net/88ATa/](http://jsfiddle.net/88ATa/)

最好的祝福。乔纳斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:16:29.077

解决它的一种方法是将`container`div 放在绝对位置，以便内部 div 的限制受容器边界的限制。所以只需添加

```
.container {
     position:absolute;
 } 
```

将工作。但由于某种原因，绝对定位可能不是您想要的。例如，它可能会改变您的页面布局。

见：http: [//jsfiddle.net/zyEYj/13/](http://jsfiddle.net/zyEYj/13/)

# eclipse - 使用非 ASCII 字符压缩的 Eclipse/Pydev 缩进

> ID：13952958
> 
> 赞同：1
> 
> 时间：2012-12-19T12:56:41.213
> 
> 标签：eclipse, pydev

我为缩进设置了空格而不是制表符，
但正如下面的图片所示，
在第 43 行，当我插入中文单词时，空格字符被压缩。
如何解决？
谢谢。

插入中文单词前：

![在插入中文单词之前](../Images/ff81b59d2e8d206591a9cd2c22628c06.png)

插入中文单词后：

![插入中文单词后](../Images/4d60fdab9ed448e8a94f48da47d1b255.png)

# objective-c - 传递要在 IF 循环中评估的标量参数

> ID：13952959
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:56:42.683
> 
> 标签：objective-c, cocoa-touch, ios5

在我的一种方法中，我需要提供一个 UIEdgeInsets 类型的可选参数。该方法的实现包含一个 IF 条件，该条件应该测试是否提供了一些插图。我应该如何在 IF 条件下进行测试，是否提供了插图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:11:25.917

`UIEdgeInsets`是一个`struct`，而不是一个对象指针。这意味着它永远不会`nil`。当调用者不通过它们时，不可能有这种情况。如果他不想使用插图，他总是可以通过`UIEdgeInsetsZero`.

如果您想要一个不传递插入的方法，只需创建第二个没有该参数的方法。

# amazon-mws - 设置处理时间和库存更新

> ID：13952974
> 
> 赞同：4
> 
> 时间：2012-12-19T12:57:38.823
> 
> 标签：amazon-mws

我想知道是否有任何方法可以通过库存更新设置处理时间。

我们遇到了问题，在更改数量时，该项目的 RestockDate 和处理时间字段被重置为空。通读文档后，我明白这就是 MWS 的工作方式。

我们`_POST_INVENTORY_AVAILABILITY_DATA_`在更新库存时使用 feedtype。

是否有任何方法或报告来检索这 2 个字段或使用 feedtype 的库存更新服务添加处理时间`_POST_INVENTORY_AVAILABILITY_DATA_`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T22:49:05.750

在亚马逊的 XML 术语中，处理时间称为 FulfillmentLatency：

> FulfillmentLatency - 订单日期和发货日期之间的天数（1 到 30 之间的整数）。

以下 XML 片段显示了该信息的适用位置。

```
<Inventory>
<SKU>MyProductCode</SKU>
<Quantity>100</Quantity>
<FulfillmentLatency>3</FulfillmentLatency>
</Inventory> 
```

假设您已经启动并运行了其余的提要并且没有出现任何错误，那么在您的 XML 提要中添加 FulfillmentLatency 应该可以解决您的问题。

有关亚马逊 MWS API XML 格式的此信息以及更多信息，请参阅“我[要开店”XML 指南](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/XML_Documentation_Intl._V397584891_.pdf)

# drupal - 在 Drupal 7 中更改重定向以进行密码恢复

> ID：13952975
> 
> 赞同：4
> 
> 时间：2012-12-19T12:57:55.090
> 
> 标签：drupal, drupal-7, password-recovery

在 Drupal 7 中，有一种方法可以通过转到“/user/password”来重置密码。如果您填写您的电子邮件地址，您应该会在收件箱中收到一封电子邮件，其中包含用于重置密码的 URL。

在该页面上，您需要单击“登录”，然后您将被重定向到您的个人资料页面（“/用户”）。有没有办法编辑最后一个重定向？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:24:00.933

您可以在 admin/config/people/accounts 中更改发送给用户的电子邮件内容。

![截屏](../Images/83caf02a6cf87fd482832dcebacde114.png)

默认内容如下：

> [用户名]，
> 
> 已在 [site:name] 提出重置您帐户密码的请求。
> 
> 您现在可以通过单击此链接或将其复制并粘贴到您的浏览器来登录：
> 
> [用户：一次性登录网址]
> 
> 此链接只能用于登录一次，并将引导您进入可以设置密码的页面。它会在一天后过期，如果不使用它不会发生任何事情。
> 
> -- [站点：名称] 团队

如果要更改用户指向的 URL，则需要编写所有代码来处理密码恢复请求。

要了解 Drupal 如何处理密码重置请求，请参阅[user_pass_reset()](http://api.drupal.org/api/drupal/modules!user!user.pages.inc/function/user_pass_reset/7)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T06:07:46.373

我想最好看看[user_pass_submit()](https://api.drupal.org/api/drupal/modules!user!user.pages.inc/function/user_pass_submit/7)。它使

```
$form_state['redirect'] = 'user'; 
```

并重定向到 /user 页面。

要重定向到“用户/登录”（例如），您必须添加表单更改挂钩并再添加一个提交回调：

```
/**
 * Implements hook_form_alter().
 *
 *
 */
function MY_MODULE_form_alter(&$form, &$form_state, $form_id) {
  if ('user_pass' == $form_id) {
    $form['#submit'][] = '_password_recover_submit';
  }
}

function _password_recover_submit($form, &$form_state){
  $form_state['redirect'] = 'user/login';
} 
```

这个解决方案对我有用。

# pandas - Series 作为 DataFrame 的索引

> ID：13952977
> 
> 赞同：3
> 
> 时间：2012-12-19T12:58:01.960
> 
> 标签：pandas

是否可以使用 Series 作为相同长度的 DataFrame 的索引？一个例子：

我有一个数据框“df”和一个系列“c”；“c”的长度与“df”的索引相同。以下代码：

```
df1= DataFrame(df, index=c) 
```

向我返回一个具有正确索引但为空列的 DataFrame

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:10:10.703

如果您只想覆盖我将使用的索引：

```
df1 = df
df1.index = c 
```

# android - 在android中获取web请求的信息

> ID：13952980
> 
> 赞同：2
> 
> 时间：2012-12-19T12:58:05.743
> 
> 标签：android

是否可以在不改变程序的情况下获取android中web请求的所有信息？我的意思是我们是否可以在 android 中编写程序并从浏览器获取 Web 请求的类型、时间或服务器 IP。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:13:21.887

如果您尝试测量数据使用情况（基于对 Onavo 的参考），则必须查询网络接口（pdp0、rmnet0、pdp0、eth0、bnep0、tiwlan0 等） - 请参阅类[NetworkInterface](http://developer.android.com/reference/java/net/NetworkInterface.html)，然后检查[TrafficStats](http://developer.android.com/reference/android/net/TrafficStats.html)类以从中检索数据它。

另请查看[this question](https://stackoverflow.com/questions/9589372/trafficstats-specific-application-specific-network-interface)，它处理流量统计信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:03:28.653

> 我的意思是我们是否可以在 android 中编写程序并从浏览器获取 Web 请求的类型、时间或服务器 IP。

理论上和文件：否

在实践中：是的，（但我不会告诉如何）。所以当你想要一些安全的东西时请记住这一点

# ruby-on-rails-3 - Rails 复杂路由

> ID：13952982
> 
> 赞同：0
> 
> 时间：2012-12-19T12:58:13.957
> 
> 标签：ruby-on-rails-3, routes

我需要在 Rails 应用程序中进行一些复杂的路由：例如

```
match '/:ObjectName/:Method' => ??? 
```

所以根据对象的属性，我需要调用不同的控制器和动作。可能吗？

这里的最终目标是制作某种面向对象的操作，这样我就可以制作多个从彼此派生的控制器，这些控制器将添加/重写来自父控制器的操作。根据数据库中特定对象的属性，我会将其与这个或那个控制器相关联。

如果无法实现，`routes.rb`我可以自己在控制器内部进行某种路由，所以我必须使用`redirect_to`，但是如何指定原始请求传递的所有参数？

**更新**

这是另一个例子：

我有一个模型`SpaceShipTypes`。它有一些字段，比如`:type_name`, `:weapon_type`, `:shield_type`, `:cargo_type`。有一个`SpaceShipTypesController`with 之类的操作`create`，`update`这样我就可以使用某种 API 来管理类型。

还有另一种型号—— `SpaceShips`. 它也有字段，例如`:name`, `:type_id`, `:position`. 甚至还有一个`SpaceShipsController`with 像`create`, `destroy`,的动作`move`。

现在事情是这样的——对于**一些**太空船类型，我想改变标准控制器动作的行为和/或编写额外的动作。因此，当我打电话时，`/ship1/move`我需要动态检查`:type_id`特定的太空船并采取正确的行动。

所以我想，制作派生控制器会很好

```
class BattleStationsController < SpaceShipController
  def move
  # does nothing
  end
end

class DeathStarsController < SpaceShipsController
  def overkill
    SpaceShip.find(params[:target_id]).destroy
  end
end

... 
```

我希望我能在 routes.rb 的帮助下很好地做到这一点，但看不到任何线索......所以也许我需要编写一个特殊的控制器来处理额外的路由：

```
class RoutingsController < ApplicationController
  def route
    ship = SpaceShip.find(params[:name])
    case (ship.type_id)
      when 'battlestation' then redirect_to :controller => 'battlestations', ...
      when 'deathstar' then redirect_to :controller => 'deathstars', ...
      ...
    end
  end
end 
```

但我不知道如何重定向所有最初传递的参数，这样我就不必写很多

```
redirect_to :controller => '...', :action => '...', :param1 => params[:param1], param2 => params[:param2], ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:53:33.470

希望我能得到你想要达到的目标。

从您的评论中，我了解到您实际上只是希望增加/减少积分位置而不关心其类型。我不确定，但我认为您无法在不知道元素类型的情况下更新元素的属性，因为您如何从数据库中获取该对象？

但似乎您无论如何都在传递 url 中的对象类型（您的评论：）`/point1/move`：

因此，您可以执行以下操作：

`match => '/:object_type' => 'positionscontroller#move'`

创建一个`PositionsController`具有：

```
def move
  if params[:object_type] == "point" # or whatever else you might have
   object = Points.find(params[:points_id])
  end

  if object.type == "blue"
    object.update_attr(:position, ...)
  else # object.type == "red"
    object.update_attr(:position, ...)
  end
end 
```

请注意，这段代码并不漂亮，但我希望它无论如何都会有所帮助。

# css - 在 fabric.js 中使用 css3 来渲染而不是画布

> ID：13952986
> 
> 赞同：0
> 
> 时间：2012-12-19T12:58:24.270
> 
> 标签：css, fabricjs

在 fabric.js 中使用 CSS3 来渲染 SVG 而不是画布在技术上是否可行？ [http://ecsspert.com/play/css3-logos/twitter.php#edit](http://ecsspert.com/play/css3-logos/twitter.php#edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:20:38.100

是的，当然，在 HTML+CSS 中重现 SVG 形状（或形状集）在技术上是可行的。

基本形状——矩形、圆形、椭圆、直线、折线、多边形——应该非常简单。

复杂的形状（路径）可能会很麻烦。如何重现贝塞尔曲线？与边界半径？

快速搜索让我找到了[这个](http://www.janzubko.com/evolution/html_css/css_round_corners.html)，但它看起来只是一个简单的实验。

# sql - 具有相同属性的“列表”转置表

> ID：13952989
> 
> 赞同：2
> 
> 时间：2012-12-19T12:58:48.947
> 
> 标签：sql, postgresql, crosstab, transpose, relational-division

是否可以转置具有重复列的表？

现有表：

```
user_id    question_id   body 
1          1             'Text1 1'
1          1             'Text1 1-2'
1          2             'Text1 2'
1          3             'Text1 3'
2          1             'Text2 1'
2          2             'Text2 2' 
```

交叉表或解决方案基于

```
MAX(CASE WHEN r.question_id = 1 THEN r.body ELSE NULL END) AS 'question1' 
```

在这种情况下不适用，因为总是匹配重复属性的最后一次出现。

我想对问题正文进行搜索，但如果没有转置表，我不知道该怎么做。
例如，我想在哪里找到 user_id`question1='...' AND question2='...'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:28:19.087

这是一个**关系划分**的例子。获得所需内容的两个示例查询技术：

```
SELECT user_id
FROM   tbl
WHERE  question_id = 1
AND    body = 'Text1 1'

INTERSECT
SELECT user_id
FROM   tbl
WHERE  question_id = 2
AND    body = 'Text1 2'; 
```

或者：

```
SELECT t1.user_id
FROM   tbl t1
JOIN   tbl t2 USING (user_id)
WHERE  t1.question_id = 1
AND    t1.body = 'Text1 1'
AND    t2.question_id = 2
AND    t2.body = 'Text1 2'; 
```

[**-> sqlfiddle 演示**](http://www.sqlfiddle.com/#!12/8c6d7/2)

在这个相关问题下找到更多信息：
[如何过滤 SQL results in a has-many-through relationship](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)

`crosstab()`来自附加模块[tablefunc](http://www.postgresql.org/docs/current/interactive/tablefunc.html)只是一种以修改方式*显示*数据的方法。但是您正在寻找一种查询技术。这不是显示问题。您也可以在 SO 上
找到许多示例，使用[类似这样的搜索](https://stackoverflow.com/questions/tagged/postgresql+crosstab?sort=votes)。`crosstab()`

# html - 如何使用复选框创建这样的表格？

> ID：13952990
> 
> 赞同：2
> 
> 时间：2012-12-19T12:49:51.343
> 
> 标签：html, css, tabular

如何使用复选框创建这样的表格？

我试过但做不到。

我还希望内容的换行不超过指定的宽度。

![在此处输入图像描述](../Images/a367b137c3bc816fb69bd304183b2d58.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:05:44.023

虽然不使用内联样式 (style="") 作为我的示例，但将 css 放在单独的 .css 文件中。

```
<table style="max-width: 500px;">
    <tr>
        <td rowspan="2"><input type="checkbox" /></td>
        <td colspan="7">a</td>
    </tr>
    <tr>
        <td>b</td>
        <td>c</td>
        <td>d</td>
        <td>e</td>
        <td>f</td>
        <td>g</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:06:30.663

[http://jsfiddle.net/Y5a8k/](http://jsfiddle.net/Y5a8k/)

```
<table border=1>
<tr>
    <td rowspan=2><input type="checkbox"/></td>
    <td colspan=7>a</td>
</tr>
<tr>
    <td>b</td>
    <td>c</td> 
    <td>d</td>
    <td>e</td> 
    <td>f</td>
    <td>g</td> 
</tr>​
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:12:41.500

试试这个（**[小提琴](http://jsfiddle.net/HBb7F/)**）：

```
<table border=1>
<tr>
    <td rowspan=2 class='tdCheckbox'><input type="checkbox"/></td>
    <td colspan=7>a</td>
</tr>
<tr class='trMain'>
    <td>b</td>
    <td>c</td> 
    <td>d</td>
    <td>e</td> 
    <td>f</td>
    <td>g</td> 
</tr>
</table>​ 
```

# sql - 如何在oracle sql中获取下一行

> ID：13952993
> 
> 赞同：-1
> 
> 时间：2012-12-19T12:59:11.443
> 
> 标签：sql, oracle

我有以下查询，其中数据来自表，并且数据中没有星期天的行，我想使用查询添加星期天的行。这是我的查询结果和查询

```
select bpv_date from all_dates 
```

结果是这样的

```
01-dec-2012
02-dec-2012
03-dec-2012
04-dec-2012
05-dec-2012
06-dec-2012
.
.
.
.
30-dec-2012 
```

我想为每个月动态创建一行星期日。请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:36:37.933

我的便士（有点像笑话:)）

```
select bpv_date
from all_dates
union
select bpv_date + 1 
from all_dates
where to_char(bpv_date, 'D') = 7  -- saturday for NLS_LANG='AMERICAN', otherwise use 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:24:31.143

首先，您可以这样做： `to_char(sysdate,'DY')`找出星期天是星期天，然后将其添加到`if`语句中，然后循环，如下所示：

```
 BEGIN
  FOR i IN 1..365 LOOP
    IF( to_char(sysdate-1+i,'DY') IN ('SUN') )
    THEN
      INSERT INTO MY_TABLE (ID, MY_DATE)
        VALUES (i, (to_date(sysdate,'DD-MON-YY')-1)+i);
    END IF;
  END LOOP;
END; 
```

这将创建一个只有星期天的表。我不确定这是否是您想要的，但您的问题相当模糊。

# java - 如何在动态jasper excel报告中动态设置列宽？

> ID：13952996
> 
> 赞同：3
> 
> 时间：2012-12-19T12:59:29.523
> 
> 标签：java, dynamic-jasper

我正在使用[DynamicJasper](http://dynamicjasper.com/) API 开发 excel 报告。我能够从给定的数据源生成报告，但报告中的列仍然显得很窄。我搜索了这个问题的解决方案，在很多地方人们用`setUseFullPageWidth(true);`in 来回答`DynamicReportBuilder`。我试过这个，但它不能解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:48:52.843

使用：setWidth（整数）

```
 AbstractColumn[] startColsParams = {
            ColumnBuilder.getNew().setColumnProperty(new ColumnProperty(KEY_AA_ID, String.class.getName()))
                .setWidth(new Integer(40)).setTitle("AA").setStyle(style).build(),
            ColumnBuilder.getNew().setColumnProperty(new ColumnProperty(KEY_BB_ID, String.class.getName()))
                .setWidth(new Integer(160)).setTitle("BB").setStyle(style).build(),             
    }; 
```