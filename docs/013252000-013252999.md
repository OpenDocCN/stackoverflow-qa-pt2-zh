# StackOverflow 问答 13252000-13252999

# regex - 正则表达式模式存储在数组中

> ID：13252000
> 
> 赞同：1
> 
> 时间：2012-11-06T13:24:03.530
> 
> 标签：regex, perl, file-io

我是 perl 新手，想读取一个存储 IP 的文件，我想 grep 这些 IP 并存储在数组中，我可以为此编写正则表达式，但在三个 ips 中，它总是存储文件的最后一个 ip数组，请帮助某人我的代码和文件如下所示。

我的输入文件有以下内容

> 嗨 praveen 怎么样是 10.23.54.86
> 
> 10.87.98.65
> 
> 10.98.76.54

我的脚本 o/p 是

> /pearl$ ./par.pl sdp.txt
> 
> 10.98.76.54

和代码是

```
#!/usr/bin/perl

open (INPUT,$ARGV[0]) || die "Can not open file:$!";

$i=0;

while(<INPUT>)
{
  $line=$_;
  ($arr,$arr1,$arr2)=($line=~m/\d+[\.]\d+[\.]\d+[\.]\d+/g);
}

close(INPUT);

print $arr,"\n"; 
```

我尝试使用数组和变量，但结果相同，它只存储最后一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:43:31.520

当您一次读取一行时，每行只有一个地址，当然您只有一个输出，因为输出是在循环之后打印的，而不是在每次迭代时打印在其中。

*   采用`<>`
*   避免不必要的变量（如`$i`）
*   启用警告
*   您很可能希望使用数组来存储您的 IP

在以下代码中，您的 IP 将存储在`@ips`.

```
#!/usr/bin/perl

use warnings;
use strict;

my @ips;

while (<>) {
    # not the optimal regex for IPs, I just simplifyied yours
    push @ips, m/(?:\d+\.){3}\d+/g;
}

print "@ips\n";
# --- or ---
print "$_\n" foreach @ips; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T16:41:33.033

考虑使用 Perl 模块[Regexp::Common](http://search.cpan.org/~abigail/Regexp-Common-2011121001/lib/Regexp/Common.pm)来匹配 IP，因为它已为此目的而精心开发：

```
use strict;
use warnings;
use Regexp::Common qw/net/;

my @IPs;

while (<>) {
    my ($IP) = /($RE{net}{IPv4})/;
    push @IPs, $IP if $IP;
}

print "$_\n" for @IPs; 
```

数据集的输出：

```
10.23.54.86
10.87.98.65
10.98.76.54 
```

捕获线路上的有效 IP 并将其放入`$IP`. 下一行`push`es 一个 IP 到`@IPs`if`$IP`包含一个。最后，如果有的话，`@IPs`会编辑 的元素。`print`

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:36:25.677

您似乎有两个问题：

1.  您似乎正在填充 3 个变量，而不是 4 个（除非您不想要最后一个数字？）

2.  您的正则表达式未指定任何捕获组，因此您不会从匹配的字符串中保存任何值。

你想要这样的东西：

```
while(<INPUT>)
{
  if( ($arr,$arr1,$arr2,$arr3) = /(\d+)\.(\d+)\.(\d+)\.(\d+)/g )
  {
    print "$arr $arr1 $arr2 $arr3\n";
  }
} 
```

或者，如果您想将匹配的数字视为列表，请尝试以下操作：

```
while(<>)
{
  chomp;
  if( @array = /(\d+)\.(\d+)\.(\d+)\.(\d+)/g )
  {
    print @array;
  }
} 
```

# ios - 更新推送通知的配置文件

> ID：13252002
> 
> 赞同：3
> 
> 时间：2012-11-06T13:24:04.100
> 
> 标签：ios, apple-push-notifications, provisioning

我有几个应用程序的通配符配置文件。

我们想向应用程序添加推送通知，我已经阅读过，每个应用程序都必须有自己的配置文件和推送证书。

这会影响用户设备上现有的应用程序安装吗？换句话说，在更新和发布应用程序之后，它仍然是用户的更新还是新安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:32:18.377

如果您使用了通配符，您将能够在 iOS 配置门户中看到您的应用无法配置为使用推送通知。您必须创建一个新的 ID 和个人资料。

如果您创建新的配置文件和 App ID，则必须使用现有应用程序的相同捆绑标识符名称 (BIN) 才能提供更新。由于您当前的 BIN 具有通配符，因此您将无法创建相同的 BIN。因此，您的用户不会注意到新应用的更新。

我的建议是您创建一个能够处理推送通知的新应用程序，并要求您当前的用户在更新时下载该应用程序。Apple 允许您创建现有应用程序的更新，告诉他们下载新版本。

# jquery - 带有 :not 选择器的 CSS 在作为 jquery 选择器放置时工作，而不是纯 CSS

> ID：13252004
> 
> 赞同：2
> 
> 时间：2012-11-06T13:24:10.310
> 
> 标签：jquery, css, jquery-selectors, css-selectors

> **可能重复：**
> [jQuery 和 CSS 之间的 :not() 选择器有什么区别？](https://stackoverflow.com/questions/10711730/whats-the-difference-in-the-not-selector-between-jquery-and-css)

如何为**类** `'ui-content'`编写 CSS 选择器。但它不应该是**id** `'ui-container'`的孩子吗？

我尝试在 CSS 中使用以下选择器。

```
.ui-content:not(#ui-container > .ui-content) {
    //styles goes here
} 
```

但它确实可以在 jquery 中工作`$('.ui-content:not(#ui-container > .ui-content)')`，但不能在纯 CSS 中工作。

如何更正此 CSS 选择器？

是否所有使用 jquery 的选择器都不适用于纯 CSS 选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:29:57.307

这很简单：

```
:not(#ui-container) > .ui-content{
   // style
 } 
```

您只需要确保没有其他类可以符合不是#ui-container 并且仍然是.ui-content 的直接父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:29:17.817

如果您想支持 IE8 或更低版本，则不能在 CSS 中使用这样的逻辑，因为您实际上是在 DOM 上查看 CSS 无法做到的父元素。

另一种方法是将全局样式应用于所有`.ui-content`元素，然后使用更具体的选择器来覆盖容器内元素的样式，例如`#ui-container .ui-content`. 试试这个：

```
.ui-content {
    color: #C00;    /* Dark red */
}

#ui-container .ui-content {
    color: #CCC;    /* Grey */
} 
```

# java - 创建注销按钮以清除所有 bean 数据并重定向到登录 - Java

> ID：13252008
> 
> 赞同：0
> 
> 时间：2012-11-06T13:24:40.353
> 
> 标签：java, javabeans, logoff

我一直在寻找答案，但到目前为止还没有找到适合我的东西。

我的 java 项目有几个具有各种视图/请求范围的 Beans 和几个包含我所有 primefaces 组件的 XHTML 页面。

我想要做的是，当单击注销按钮时，所有支持 bean 都被清除，XHTML 组件重置为默认值，用户被重定向到登录屏幕。到目前为止，我已经设法使用以下方法清除 bean： `FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("Mybeanname");` 并设置导航规则以将它们重定向到登录屏幕，到目前为止一切都很好，但是如果您输入前一页的 URL（或按浏览器后退按钮) 页面加载并显示以前查看过的内容，大概是组件正在缓存信息，我的问题是如何清除 xhtml 组件，因此如果输入了以前的 URL，则不会显示任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:26:20.563

1.  这是为了避免浏览器缓存。 [避免 JSF Web 应用程序上的后退按钮](https://stackoverflow.com/questions/10305718/avoid-back-button-on-jsfprimefaces-application)
2.  “但是如果您输入前一页的 URL”也许您需要一些安全功能（Spring 安全性或“基于家庭的”安全性（简单过滤器））来拒绝未经授权的访问。

# javascript - 得到孩子 在 没有 id 和 e.preventDefault() 在第一级的列表

> ID：13252010
> 
> 赞同：6
> 
> 时间：2012-11-06T13:24:44.380
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:30:23.177

您可以选择并处理每个级别的点击，例如：

```
// first level links
$("ul#menu > li > a").click(function() {
    e.preventDefault();

    // show sub-menu etc..
}

// second level links (remove this block if you dont want any spl processing here)
$("ul#menu > li > ul > li > a").click(function() {
    return true; // behave like normal links
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:50:09.043

# java - 为什么我必须添加两次 JSeparator？

> ID：13252014
> 
> 赞同：1
> 
> 时间：2012-11-06T13:25:00.857
> 
> 标签：java, swing, user-interface, jseparator

在我的代码中，我添加了一些`JSeparator`s. 一切正常，除了一开始，我必须添加两个`JSeparator`s 才能显示，而不是一个！这是代码：

```
 setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));
    int counter = 1;
    add(new JSeparator(SwingConstants.HORIZONTAL)); //Here is the
    add(new JSeparator(SwingConstants.HORIZONTAL)); //problem
    JPanel p2 = new JPanel();
    for (int i = 0; i < petsx; i ++) {
        for (int i2 = 0; i2 < petsy; i2 ++) {
            p2.add(new JLabel(new ImageIcon(pics[i][i2])));
            p2.add(new JLabel(names[i][i2]));
            if (counter % petsx == 0) {
                add(p2);
                add(new JSeparator(SwingConstants.HORIZONTAL));
                p2 = new JPanel();
                counter = 0;
            } else {
                JSeparator js = new JSeparator(SwingConstants.VERTICAL);
                js.setPreferredSize(new Dimension(1, newPetHeight));
                p2.add(js);
            }
            counter ++;
        }
    } 
```

如您所见，我必须调用`add(new JSeparator(SwingConstants.HORIZONTAL));`两次才能使其正常工作。如果我只调用一次，则`JSeparator`不会出现。为什么是这样？

这是可编译的代码： http: [//pastebin.com/xbe47a29](http://pastebin.com/xbe47a29)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:05:45.570

我没有问题...

![在此处输入图像描述](../Images/bdd5bf124482de0f32313bce33b22600.png)

我怀疑您可能正在执行以下一项或多项操作

1.  第一个分隔符可能与容器的最顶部对齐，紧靠标题栏，使其“出现”，就好像它没有被添加一样。
2.  你不是在 EDT 中创建你的 UI
3.  您在完成创建窗格之前显示框架
4.  你没有告诉我们的其他事情

.

```
public class TestSeperator {

    public static void main(String[] args) {
        new TestSeperator();
    }

    public TestSeperator() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestSeperatorPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestSeperatorPane extends JPanel {

        public TestSeperatorPane() {
            setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));
            int counter = 1;
            add(new JSeparator(SwingConstants.HORIZONTAL)); //Here is the
            add(new JSeparator(SwingConstants.HORIZONTAL)); //problem
            JPanel p2 = new JPanel();
            int petsx = 4;
            int petsy = 4;
            for (int i = 0; i < petsx; i++) {
                for (int i2 = 0; i2 < petsy; i2++) {
                    p2.add(new JLabel(":)"));
                    p2.add(new JLabel("A"));
                    if (counter % petsx == 0) {
                        add(p2);
                        add(new JSeparator(SwingConstants.HORIZONTAL));
                        p2 = new JPanel();
                        counter = 0;
                    } else {
                        JSeparator js = new JSeparator(SwingConstants.VERTICAL);
                        // This is a bad idea...
                        //js.setPreferredSize(new Dimension(1, newPetHeight));
                        js.setBorder(new EmptyBorder(6, 0, 6, 0));
                        p2.add(js);
                    }
                    counter++;
                }
            }
        }
    }
} 
```

# haskell - 部分应用程序和子表达式仅取决于函数参数的子集

> ID：13252016
> 
> 赞同：5
> 
> 时间：2012-11-06T13:25:03.737
> 
> 标签：haskell, scope

我是否可以期望 Haskell 编译器足够聪明以优化以下定义：

```
h x y = p (m x) (n y) 
```

变成这样的东西：

```
h x = let z = m x in \y -> p z (n y) 
```

? `m`如果评估成本很高，这可能会很方便，并且我`h`以下列方式使用 's 定义：

```
main = print $ map (h 2) hugeList 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T13:46:01.207

但是，如果`m`评估成本低，但结果存储成本高怎么办？说`m x = [x .. ]`并`p`需要遍历该列表的不同前缀，具体取决于`n y`. 如果 then`m 2`被共享`map (h 2) hugeList`，并且任何列表元素都需要一个长前缀，那么即使所有后续元素只需要列表的第一个元素来返回结果，您也会需要大量内存。

所以自动共享`m x`也可能是一种悲观，因此您不应该期望所有编译器都会自动共享它。

通常，编译器很难决定共享是有益还是有害，因此您应该在您真正需要的地方明确共享。（尽管如此，期望编译器引入共享，即使您有时不想要它。）

# java - 如何解决 ExpatParser$parseException

> ID：13252019
> 
> 赞同：0
> 
> 时间：2012-11-06T13:25:09.433
> 
> 标签：java

我从我的 dot net web 服务中得到以下结果

```
<?xml version="1.0" encoding="utf-8" ?> 
- <DataTable xmlns="http://www.mkttech.in/">
- <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
- <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="RecordSet" msdata:UseCurrentLocale="true">
- <xs:complexType>
- <xs:choice minOccurs="0" maxOccurs="unbounded">
- <xs:element name="RecordSet">
- <xs:complexType>
- <xs:sequence>
- <xs:element name="USERNAME" minOccurs="0">
- <xs:simpleType>
- <xs:restriction base="xs:string">
  <xs:maxLength value="51" /> 
  </xs:restriction>
  </xs:simpleType>
  </xs:element>
  <xs:element name="PWD_EXPIRY" type="xs:int" minOccurs="0" /> 
  <xs:element name="FLDPWDMINLENGTH" type="xs:short" minOccurs="0" /> 
  <xs:element name="FLDPWDMAXLENGTH" type="xs:short" minOccurs="0" /> 
  <xs:element name="FLDMAXATTEMPT" type="xs:short" minOccurs="0" /> 
- <xs:element name="LOG_REASON" minOccurs="0">
- <xs:simpleType>
- <xs:restriction base="xs:string">
  <xs:maxLength value="200" /> 
  </xs:restriction>
  </xs:simpleType>
  </xs:element>
- <xs:element name="EXCH_SEG" msdata:ReadOnly="true" minOccurs="0">
- <xs:simpleType>
- <xs:restriction base="xs:string">
  <xs:maxLength value="51" /> 
  </xs:restriction>
  </xs:simpleType>
  </xs:element>
- <xs:element name="SEGMENTDESC" minOccurs="0">
- <xs:simpleType>
- <xs:restriction base="xs:string">
  <xs:maxLength value="100" /> 
  </xs:restriction>
  </xs:simpleType>
  </xs:element>
- <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
- <DocumentElement xmlns="">
- <RecordSet diffgr:id="RecordSet1" msdata:rowOrder="0">
  <USERNAME /> 
  <PWD_EXPIRY>0</PWD_EXPIRY> 
  <FLDPWDMINLENGTH>2</FLDPWDMINLENGTH> 
  <FLDPWDMAXLENGTH>8</FLDPWDMAXLENGTH> 
  <FLDMAXATTEMPT>100</FLDMAXATTEMPT> 
  <LOG_REASON>INVALID PASSWORD...</LOG_REASON> 
  <EXCH_SEG>NSE-CAPITAL</EXCH_SEG> 
  <SEGMENTDESC>NSE Capital Market</SEGMENTDESC> 
  </RecordSet>
  </DocumentElement>
  </diffgr:diffgram>
  </DataTable> 
```

我正在使用 SoapObject 来接收此响应。接下来我使用 xmlpullparser 解析它。我按照以下 [教程](http://developer.android.com/training/basics/network-ops/xml.html)

但是执行 nextTag() 时出现以下异常

org.xmlpull.v1.XmlPullParserException：解析文档时出错。（位置：第 -1 行，第 -1 列）由以下原因引起：org.apache.harmony.xml.ExpatParser$ParseException：第 1 行第 7 列：格式不正确（无效令牌）

我对android和java都是新手。我真的需要帮助。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:30:21.037

之前不应该有空格`<?xml version="1.0"...`。检查这个在线应用程序进行[XML/XSD 验证](http://www.utilities-online.info/xsdvalidation/)

# c# - 在 WinRT / c# 中以编程方式设置时，BeginTime 无法正常工作

> ID：13252023
> 
> 赞同：0
> 
> 时间：2012-11-06T13:25:26.810
> 
> 标签：c#, xaml, animation, storyboard

我正在从后面的代码中为我的 Windows 8 应用程序中的某些内容设置动画。我有一组动画对象，每个对象都包含一个`DoubleAnimation`. 我调用了一个方法，它遍历这个集合，`Storyboard`为每个对象创建新对象并开始它们。无论我`BeginTime`是在情节提要上设置， `DoubleAnimation`还是两者都设置，它们都同时启动和运行。

如何将动画延迟设定的毫秒数？

```
 foreach (AnimationObject a in queue)
  {
      Storyboard sb = new Storyboard();
      sb.Duration = a.DoubleAnimation.Duration;
      sb.BeginTime = a.DoubleAnimation.BeginTime;
      sb.Children.Add(a.DoubleAnimation);
      Storyboard.SetTarget(a.DoubleAnimation, a.Target);
      Storyboard.SetTargetProperty(a.animation, a.TargetProperty);
      sb.Begin();
  } 
```

我写了一个队列来代替它使用`await Task.Delay(a.BeginTime)`并且这有效，所以我知道我正确设置了 BeginTime。然而，任务延迟方法似乎不是很有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:09:41.773

我的问题是，后来`Storyboard`针对相同的目标`Target`覆盖了以前的目标。我重新设计了我的队列以使用`DoubleAnimationUsingKeyFrames`ìnstead，并将关键帧添加到存在的现有`Storyboard`位置。现在一切正常！

# java - Java新手：函数定义的两种方式是否相同

> ID：13252038
> 
> 赞同：3
> 
> 时间：2012-11-06T13:26:38.133
> 
> 标签：java, function

如果我创建一个返回布尔值的函数，我无法区分以下两种方式：

**方式一：**

```
public boolean isRight(){
      if(CONDITION){
          return true;
      }else{
          return false;
      }

} 
```

**方式2：**

```
public boolean isRight(){
      if(CONDITION){
          return true;
      }
      return false;
} 
```

我可以说创建返回布尔值的函数的上述两种方法是相等/相同的吗？逻辑上有区别吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T13:27:46.653

当然。它们在语义上是相等的。

然而，更好的是：

```
public boolean isRight(){
      return CONDITION;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T13:38:36.493

没有一个比另一个更有效。编译器可以很容易地看出两者是相同的，实际上 Suns/Oracles javac 为这两种方法生成了相同的字节码。

这是一个 IfTest 类：

```
lass IfTest {

public boolean eq1(Object obj) {
    if (this == obj)
        return true;

    if (obj == null)
        return false;

    if (getClass() != obj.getClass())
        return false;

    return true;
}

public boolean eq2(Object obj) {

    if (this == obj)
        return true;

    else if (obj == null)
        return false;

    else if (getClass() != obj.getClass())
        return false;

    return true;
} 
```

}

我用javac编译，反汇编如下：

```
public boolean eq1(java.lang.Object);
  Code:
   0:   aload_0
   1:   aload_1
   2:   if_acmpne   7
   5:   iconst_1
   6:   ireturn
   7:   aload_1
   8:   ifnonnull   13
   11:  iconst_0
   12:  ireturn
   13:  aload_0
   14:  invokevirtual   #2; //Method Object.getClass:()Ljava/lang/Class;
   17:  aload_1
   18:  invokevirtual   #2; //Method Object.getClass:()Ljava/lang/Class;
   21:  if_acmpeq   26
   24:  iconst_0
   25:  ireturn
   26:  iconst_1
   27:  ireturn 
```

和

```
public boolean eq2(java.lang.Object);
  Code:
   0:   aload_0
   1:   aload_1
   2:   if_acmpne   7
   5:   iconst_1
   6:   ireturn
   7:   aload_1
   8:   ifnonnull   13
   11:  iconst_0
   12:  ireturn
   13:  aload_0
   14:  invokevirtual   #2; //Method Object.getClass:()Ljava/lang/Class;
   17:  aload_1
   18:  invokevirtual   #2; //Method Object.getClass:()Ljava/lang/Class;
   21:  if_acmpeq   26
   24:  iconst_0
   25:  ireturn
   26:  iconst_1
   27:  ireturn 
```

也就是说，我建议使用第一个版本（没有 else）。有些人可能会争辩说 else 部分更干净，但我会反对。包含 else 表示程序员没有意识到这是不必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:28:05.367

是的，它们是相同的。这是因为在第一个`return`语句之后，`CONDITION`保证是假的。

虽然这实际上是一个无用的说法。只需使用`CONDITION`而不是`isRight()`，因为它们也总是等价的。

所以，所有这些都是等价的：

```
public boolean isRight() {
    if (CONDITION) { return true; }
    else { return false; }
} 
```

和

```
public boolean isRight() {
    if (CONDITION) { return true; }
    return false;
} 
```

和

```
public boolean isRight() {
    return CONDITION;
} 
```

和

```
CONDITION 
```

他们是一样的。`isRight()`只是返回`CONDITION`，所以你应该只使用`CONDITION`代替`isRight()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:28:14.940

是的。它们完全相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T13:30:13.000

它们绝对相同，但第二个对我来说更好，因为您可以快速识别返回的默认值。有些人会说第一个片段更具可读性，但它是你喜欢的。

# spring-security - Spring Security 3.1 授权

> ID：13252039
> 
> 赞同：0
> 
> 时间：2012-11-06T13:26:41.303
> 
> 标签：spring-security, authorization

我想在我现有的 Web 应用程序中使用 Spring Security。目前我可以对用户进行身份验证。但我不能做授权。应用程序给出 403 错误。我错过了什么？请帮忙 。我的 applicationContext-security.xml 如下

```
<http use-expressions="true" >
        <!--<intercept-url pattern="/**" access="permitAll" /> -->
         <intercept-url pattern="/pages/test_for_admin/**" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/pages/main/scenarios.bak" access="isAuthenticated()" />

        <!-- <form-login/>-->
        <form-login login-page="/login.bak" default-target-url="/pages/main/scenarios.bak"/>
        <logout />

    </http>

    <authentication-manager alias="authenticationManager" >
        <authentication-provider >
            <!-- <password-encoder hash="md5" /> -->
            <jdbc-user-service data-source-ref="dataSource"
                users-by-username-query="SELECT username, password,enabled FROM web_users WHERE username=?"
                authorities-by-username-query="SELECT username,authority FROM web_authorities WHERE username = ?"                   
                role-prefix="ROLE_" />
        </authentication-provider>
    </authentication-manager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:50:38.320

检查您登录后引导 Spring 的 URL。在这种情况下

```
default-target-url="/pages/main/scenarios.bak 
```

它是有效的网址吗？当您收到 403 禁止时，您在浏览器的地址栏中看到什么？

高温高压

# asp.net - 使用日历扩展器的文本框失去价值

> ID：13252041
> 
> 赞同：4
> 
> 时间：2012-11-06T13:26:46.247
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit

我有一个使用 CalendarExtender 和其他一些验证控件的文本框，代码如下：

```
<asp:TextBox runat="server" ID="txtPrazoData" MaxLength="10" Width="80" />
<ajax:CalendarExtender ID="cePrazoData" runat="server" TargetControlID="txtPrazoData" />

<ajax:MaskedEditValidator runat="server" ID="mevPrazoDataModal" ControlToValidate="txtPrazoData" InvalidValueMessage="<%$ Resources:Base, DataInvalida %>" InvalidValueBlurredMessage="*" Text="*" 
ControlExtender="meePrazoData" ErrorMessage="*" EmptyValueMessage="<%$ Resources:Base, CampoRequerido %>"
IsValidEmpty="false" EmptyValueBlurredText="*" ValidationGroup="GrpAcaoModal">*</ajax:MaskedEditValidator>

<ajax:MaskedEditExtender runat="server" ID="meePrazoData" TargetControlID="txtPrazoData" Mask="99/99/9999" MaskType="Date"/>
<ajax:ValidatorCalloutExtender ID="vcePrazoData" TargetControlID="mevPrazoDataModal" runat="server"/>
<asp:CompareValidator ID="cvPrazoData" runat="server" ControlToValidate="txtPrazoData" Type="Date" Operator="DataTypeCheck" ErrorMessage="<%$ Resources: Base, DataInvalida %>" Display="None" ValidationGroup="GrpAcaoModal" />
<ajax:ValidatorCalloutExtender ID="vcePrazoDataCompare" runat="server" TargetControlID="cvPrazoData" /> 
```

当我选择文本框并从日历中选择一个日期，然后选择表单的另一个控件时，文本框就失去了它的价值： ![在此处输入图像描述](../Images/74e5aa1eda278fbebabc7747bc5eb698.png)

如果我键入值而不是从日历中选择它，它不会消失。没有回发发生，并且文本框没有 TextChanged 事件或任何其他关联。如果我尝试使用 IE 的兼容模式来执行此操作，它会起作用。如果有帮助，我使用的是 IE9 版本 9.0.8112.16421。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:10:21.937

我打赌你的验证器禁用了这个值。检查日历和您的验证器是否具有相同的日期格式。

# matlab - 如何在matlab中获取向量的一部分

> ID：13252042
> 
> 赞同：0
> 
> 时间：2012-11-06T13:26:56.090
> 
> 标签：matlab, scilab

我想获得`V`具有宽度的向量的一部分`W` 结果，我想获得`M = N*M`，所以如果我说`M(2,:)`，我将获得 的所有值`V(2*W : 3*W)`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:29:14.187

不完全确定你的意思，但确实

```
M = reshape(V, W,[]); 
```

接近？否则，请尝试

```
M = reshape(V, W,[]).'; 
```

或者

```
M = reshape(V, [],W); 
```

# html - 以错误字体显示的非 ascii 字符

> ID：13252045
> 
> 赞同：2
> 
> 时间：2012-11-06T13:27:05.363
> 
> 标签：html, css, fonts, font-face, truetype

我正在尝试在我的新网站中使用“Nilland-SmallCaps”字体。问题是，虽然所有其他文本都正确显示，但我的语言的特定字符（š、č、ž（s、c、z 和 caron））以默认字体显示。我在字体编辑器中打开了 .ttf 文件，发现这些字符已定义，所以我不知道为什么它们不能正确显示。如果您对如何解决此问题有任何想法，请帮助我，因为我已经尝试了我想出的所有方法。

```
@font-face {  
font-family: 'Nilland-SmallCaps';  
src: url('Nilland-SmallCaps.ttf')format('truetype');  
} 
```

我正在使用这个字体文件：[Nilland-SmallCaps](http://fontzone.net/font-download/Nilland-SmallCaps/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:04:54.240

Nilland-Smallcaps 字体在很多方面都很奇怪。首先，它实际上不包含小型大写字母。但这里重要的是它没有正确编码。它不包含分配给与 Unicode 数字相对应的位置的字形，除了一些字符，如 Ascii 范围。

如果你使用[DTL OTMaster](http://www.fontlab.com/font-utility/dtl-otmaster/dtl-otmaster/) Light分析字体，你可以看到例如字母š被正确放置，Unicode数字U+0161，但是字母ž被分配到U+0014，这是错误的，因为这是一个控制字符位置。字母č在U+E054的位置，属于Private Use Area，只能在相关方协议下使用，浏览器不感兴趣。实际上，您可以通过使用字符引用来欺骗（至少某些）浏览器以在字体中呈现 č `&#xe054;`，但这确实是一个可怕的组合。

我建议您尝试找到一些其他编码更正确的字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:33:16.590

听起来字体在生成字体时没有打开自定义语言设置。请在此处查看修复：

[字体对自定义语言字符不起作用](https://stackoverflow.com/questions/12307628/font-face-not-working-for-custom-language-characters)

> 必须选择以下 Font Squirrel 选项才能生成正确的语言字形：
> 
> 单击自定义子集单选按钮并选择以下选项：
> 
> 字符编码 -Mac 罗马字符类型 -选中此部分中的所有复选框 语言 - 英语、法语或其他语言

# android - 用钛获得图像的真实尺寸

> ID：13252047
> 
> 赞同：0
> 
> 时间：2012-11-06T13:27:07.010
> 
> 标签：android, ios, titanium

我正在尝试创建一个跨平台的应用程序。

所以我有一个 1000x200 的图像，我想将它定位为背景上的图像。

我尝试计算真实的图像大小，以使其在每个屏幕上都完美。因为钛以某种神奇的方式调整图像大小并缩放它们......

`menuBottomImageView.toImage().width`在 iOS 上工作正常，我得到 1000px，但在 android 上我得到的不是真实尺寸，只有显示的尺寸，这不是我需要的。

有没有办法为两个系统获取文件的真实尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T16:35:31.640

我没有设置 Android 来测试它，但在 iOS 上我发现你可以使用：

```
var imgBlob = menuBottomImageView.toBlob(),
    imgWidth = imgBlob.width,
    imgHeight = imgBlob.height; 
```

使用`toBlob()`也比使用*快得多*`toImage()`。根据文档，这在 Android 上是受支持的，但是文档说很多事情并不总是有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:25:22.107

对于 Android 没有更好的方法，如果你使用 getWidth() 方法，它会给出对象中提到的 createImageView() 的宽度。最好的方法是您的方法 menuBottomImageView.toImage().width 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T11:48:15.977

如果您要求的控制器`toImage()`已添加并加载到窗口上，那么只有它会给您适当的尺寸。

# filtering - 如何在 Alfresco Share（社区 4.0）中过滤数据列表

> ID：13252048
> 
> 赞同：1
> 
> 时间：2012-11-06T13:27:07.900
> 
> 标签：filtering, alfresco, alfresco-share

如何按特定列过滤可用于 Alfresco Share 中的数据列表？版本是社区 4.0。[我已经尝试过现有的解决方案，例如此处回答](https://stackoverflow.com/questions/12657557/fme-datalist-extension-for-alfresco-community-4-0-c)的 fme datalist 扩展，但它有一些问题需要自定义代码，而我没有时间和专业知识。例如，它会丢失所有自定义列表。我试图将 XML 配置中的列表定义添加到嵌入式定义中，但它使整个站点崩溃。

有没有其他方法可以实现过滤？具体情况是我有一个大约有十列的列表。我想通过提供一个简单的唯一值下拉菜单来使其中的一两个可过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:41:25.543

不幸的是，无法在 Alfresco Share 中过滤开箱即用的数据列表项。FME 扩展是我见过的唯一可以为您做到这一点的解决方案。

# php - CodeIgniter RESTful API 速率限制问题

> ID：13252050
> 
> 赞同：2
> 
> 时间：2012-11-06T13:27:30.753
> 
> 标签：php, api, codeigniter

我正在使用 Phil Sturgeon 在这里编写的以下代码：[https ://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

在他的文档中，我无法看到控制器侧面的限制选项是如何设置的。

RESTController 控制器文件有一些参考，例如

第 654 行：[https ://github.com/philsturgeon/codeigniter-restserver/blob/master/application/libraries/REST_Controller.php](https://github.com/philsturgeon/codeigniter-restserver/blob/master/application/libraries/REST_Controller.php)

显示受保护的功能，另外还有：

```
 // How many times can you get to this method an hour?
 $limit = $this->methods[$controller_method]['limit']; 
```

从 rest.php 配置：

> /* |---------------------------------------------------------- --------------------------- | REST 启用限制 |------------------------------ ---------------------------------------- | | 设置为 true 时 REST_Controller 将计算每个方法的使用次数 | 每小时通过一个 API 密钥。这是可以在 | 中覆盖的一般规则。每个控制器中的 $this->method 数组。|

任何人都可以帮我解决这个问题吗？目前正在拔头发:-)

我目前的控制器方法之一：

```
function listservices_get()
{
    $organisation_id = $this->get('id');
    $organisations = $this->api_buyus_model->list_services($organisation_id);

    if($organisations)
    {
            $this->response($organisations, 200);
    }
    else
    {
            $this->response(array('error' => '1', 'errorDesc' => 'Buy us services list could not be retrieved.'), 400);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:19:10.403

固定：

```
 protected $methods = array(
            'index_put' => array('level' => 10, 'limit' => 10),
            'index_delete' => array('level' => 10),
            'level_post' => array('level' => 10),
            'regenerate_post' => array('level' => 10),
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:11:26.357

你有没有尝试过类似的东西

`$this->methods['listservices_get']['limit'] =10`在函数的顶部？

如果您有调试器，则可能值得在其中设置一个断点以检查设置的限制。然后您可以在调用响应之前覆盖它。

# function - 如果在 Emacs Lisp 中找到循环函数，Isearch 返回 t

> ID：13252053
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:27:39.147
> 
> 标签：function, loops, emacs, while-loop

如何编写一个函数，只要找到一个变量，它就会返回 t（为了允许循环）：

```
(setq x 1)
(while ("backward search for regexp "%x" equals true") ;where x is variable
  (setq x (+ x 1))
(insert (concat "%" (int-to-string x)))
) 
```

示例：如果找到 %1 (x=1)，它将给 x 加 1。如果找到 %2 (x=2)，它会将 x 加 1。假设在向后搜索中找不到 %3，while 循环停止并插入 "%" + "3" (%3)。

我只是不明白如何在向后搜索中返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:38:07.433

`search-backward`接受一个可选的第三个参数，当它不是 nil 时，告诉它在搜索不成功的情况下返回 nil：

```
(setq x 1)
(while (search-backward (format "%%%d" x) nil t)
  (setq x (1+ x)))
(insert (format "%%%d" x)) 
```

* * *

现在，如果我尝试了解您真正想要做什么（例如在点处插入`%d`之前未出现的第一个字符串），那么您可能希望将搜索包装在`save-excursion`表单中以避免移动点：

```
(setq x 1)
(while (save-excursion (search-backward (format "%%%d" x) nil t))
  (setq x (1+ x)))
(insert (format "%%%d" x)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:14:21.497

在[弗朗切斯科的帮助下](https://stackoverflow.com/users/1225607/francesco)

```
(defun Navi-insert-question ()
  (interactive)
  (setq x 1)
  (while (save-excursion 
  (search-backward (concat comment-start " Question: " (int-to-string x)) nil t))
  (setq x (+ 1 x)))
  (insert (concat comment-start " Question: " (int-to-string x)))) 
```

它现在可以在 R 中插入，例如：“# Question: 1”，当它存在于缓冲区上方时，它将插入“# Question: 2”。

# javascript - SVG Union of Shapes 使用 javascript 或 d3 或像 Inkscape GUI 这样的 inkscape 脚本

> ID：13252056
> 
> 赞同：5
> 
> 时间：2012-11-06T13:27:40.807
> 
> 标签：javascript, svg, union, diagram

我正在做一个简单的网站，我在其中放置了一些图形。现在我使用 Inkscape 绘制每个图表。我使用 Inkscape 在形状之间进行 UNION 操作。然后我保存新图表，再做一个并集，保存，等等。我需要重复这个大约 150 次 :(

我想知道我是否可以使用 javascript 或 D3 库来做到这一点。或者至少是一种让 Inkscape 自动完成的方法。

在完美的情况下，会有一个功能：

```
union(shapeA,shapeB): replace ShapeA and ShapeB by ShapeAunionB 
```

你能给我关于这个问题的任何提示吗？有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-28T15:33:21.063

有一个开源库：[Javascript Clipper](http://sourceforge.net/projects/jsclipper/)

Javascript Clipper 库对线和多边形执行剪切和偏移。支持所有四种布尔裁剪操作 - 交集、并集、差异和异或。多边形可以是任何形状，包括自相交多边形。

功能演示：http: [//jsclipper.sourceforge.net/5.0.2.2/main_demo.html](http://jsclipper.sourceforge.net/5.0.2.2/main_demo.html)

![在此处输入图像描述](../Images/5188b58224b2200112862bf135137305.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-30T17:17:56.660

我已经用 Python 编写了一个脚本，它调用 Inkscape 命令行，就像 Erik Dahlström 建议的网站所解释的那样。

```
command = "inkscape -f file.svg --verb=EditDeselect --select=shapeA --select=shapeB --verb=SelectionUnion --verb=FileSave --verb=FileClose" os.system(command) 
```

# java - android.database.sqlite.SQLiteDiskIOException

> ID：13252058
> 
> 赞同：2
> 
> 时间：2012-11-06T13:27:54.660
> 
> 标签：java, android, sqlite, exception

我没有在我的应用程序中使用 sql lite，但它会引发此错误。关于为什么会这样的任何想法？

```
android.database.sqlite.SQLiteDiskIOException: error code 10: disk I/O error 
at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1809)
at android.webkit.WebViewDatabase.flushCacheStat(WebViewDatabase.java:769)
at android.webkit.CacheManager.trimCacheIfNeeded(CacheManager.java:558)
at android.webkit.WebViewWorker.handleMessage(WebViewWorker.java:190)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:33:22.610

此错误可能是由某些广告视图引起的。AdMob 等广告 SDK 通常基于 Webview，有时会导致类似这样的错误。

您使用广告 SDK 吗？

# types - 折叠函数的ml类型分析

> ID：13252060
> 
> 赞同：1
> 
> 时间：2012-11-06T13:27:58.867
> 
> 标签：types, ml

任何人都可以向我解释如何确定以下函数的类型，折叠，如下定义？

```
fun fold func [] base = base
|   fold func (x::xs) base = fold func xs (func x base); 
```

我的答案是'c->'a list->'b->'b，但我看到在将代码插入我的SML程序后，类型实际上应该是（'a->'b->'b） ->'a 列表->'b->'b.

我了解 'a list->'b->'b 的来源，但第一部分让我感到困惑。是不是因为 func 接受两个参数，一个 'a 和一个 'b，并返回 base 的类型，即 'b？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:35:01.527

> 是不是因为 func 接受两个参数，一个 'a 和一个 'b，并返回 base 的类型，即 'b？

对，就是这样。

如果第一部分`'c`和你最初假设的一样，那意味着第一个参数`fold`可以是任何值——`int`例如。显然，将 an `int`（或任何其他不是函数的东西）作为第一个参数传递给 是不合法的`func`，因此第一个参数需要有一个类型，告诉类型系统只允许该参数使用函数。

事实上，它不应该只允许任何函数，而应该只允许适当类型的函数。并且适当的类型`func`是`'a -> 'b -> 'b`出于您上面所述的原因。

# applescript - applescript输入框中的自动完成/建议功能

> ID：13252062
> 
> 赞同：3
> 
> 时间：2012-11-06T13:27:59.927
> 
> 标签：applescript, applescript-objc

我正在尝试构建一个 applescript 对话框，以帮助我跟踪我正在处理的事情。为了使它真正有效，我想让它从我的待办事项列表中查找项目，并在我输入 la google 建议或其他 javascript 自动完成功能时建议它们。

我在想，如果我只捕获 @ 键的输入，我想用它来表示项目或任务的 # 键，然后开始将输入与我的任务或项目列表匹配，那将是相当简单的。例如，假设我输入：

“为@开发功能”

此时@的输入将开始捕获键盘输入并尝试建议我的待办事项列表中的一个项目。这就是我卡住的地方。似乎我应该能够将侦听器或其他东西附加到我的输入框中，但我似乎找不到任何示例或对此类功能的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:42:31.313

你不能用applescript做到这一点。您需要在可可应用程序中构建自己的窗口，然后挂钩到 NSTextField 的方法来执行此操作。这不是太难，但它需要一套与applescript完全不同的技能。

# javascript - 网页游戏架构

> ID：13252063
> 
> 赞同：2
> 
> 时间：2012-11-06T13:28:03.140
> 
> 标签：javascript, node.js, architecture

我正在开发一个基于 JS（打字稿）的网络游戏，带有 node.js 服务器和 AJAX。我对基于游戏的架构知之甚少，随着游戏的发展，它变得越来越复杂，这让我想到了用适当的架构来重建它。我应该阅读哪些关于架构的 tuts/书籍，知道在客户端和服务器端都具有强大逻辑的基于 Web 的游戏需要一些特定的知识？谢谢您的帮助

# java - 在java中批量插入二叉树

> ID：13252066
> 
> 赞同：1
> 
> 时间：2012-11-06T13:28:08.470
> 
> 标签：java, tree, binary-tree

我正在实现对二叉树进行多次插入的功能。对我首先得到的元素向量进行排序，然后在循环中为单个元素调用普通树插入函数是正确的？还是有更有效的策略？谢谢！

```
@Override
public void insert(Vector<V> vec) {
    insert(root,vec);
}

private void insert(Node<V> node, Vector<V> vec){
    Collections.sort(vec);
    for(int i = 0; i < vec.size(); i++){
        insert(root, vec.get(i));
    }       
}

@Override
public void insert(V obj) {
    root = insert(root, obj);
}

private Node<V> insert(Node<V> node,V data){
    if(node == null){
        return node = new Node<V>(data,null,null);          
    }
    else{
        if(data.compareTo(node.data) < 0){
            node.left = insert(node.left,data);         
        }
        else{
            node.right = insert(node.right,data);                            
        }
        return node;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:35:38.233

[您必须在插入后平衡树](http://en.wikipedia.org/wiki/B-tree)。

这是我的实现：

```
public class Tree< T extends Comparable< T >>
{
   public static< T extends Comparable< T >> int getDepth( Tree< T > node )
   {
      return
         ( node == null )
            ? 0
            : ( 1 + Math.max( getDepth( node._left  ),
                              getDepth( node._right )));
   }// int getDepth()

   public Tree( T t )
   {
      _data  = t;
      _left  = null;
      _right = null;
      _count = 1;
   }// Tree( T t )

   public Tree< T > add( Tree< T > child )
   {
      Tree< T > root = this;
      int cmp = _data.compareTo( child._data );
      if( cmp > 0 )
      {
         if( _left == null )
         {
            _left = child;
         }
         else
         {
            _left = _left.add( child );
         }// if
         _count += child._count;
         if( _left._count > (( _right == null ) ? 0 : _right._count ) + 1 )
         {
            root = _left;
            _count -= root._count;
            _left = null;
            if( root._right == null )
            {
                root._right = this;
            }
            else
            {
               root._right = root._right.add( this );
            }// if
            root.updateCount();
         }// if
      }
      else if( cmp < 0 )
      {
         if( _right == null )
         {
            _right = child;
         }
         else
         {
            _right = _right.add( child );
         }// if
         _count += child._count;
         if( _right._count > (( _left == null ) ? 0 : _left._count ) + 1 )
         {
            root = _right;
            _count -= root._count;
            _right = null;
            if( root._left == null )
            {
               root._left  = this;
            }
            else
            {
               root._left = root._left.add( this );
            }// if
            root.updateCount();
         }// if
      }// if
      return root;
   }// Tree< T > add( Tree< T > child )

   public int getCount()
   {
      return _count;
   }// int getCount()

   @Override
   public String toString()
   {
      return _data.toString();
   }// String toString()

   private void updateCount()
   {
      _count =
         1 +
         (( _left  == null ) ? 0 : _left._count  ) +
         (( _right == null ) ? 0 : _right._count );
   }// void updateCount()

   public final T         _data;
   public /* */ Tree< T > _left;
   public /* */ Tree< T > _right;
   public /* */ int       _count;

}// class Tree 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T11:32:13.097

考虑

*   在树中插入一个列表：当排序时，它会创建一个只有左或右节点被填充的列表。
*   插入可以重新平衡树，就像在二叉 AVL 树中一样。缺点是树枝上有洞。`K(F(A, -), P(-, T(R -)))`：元素 6，深度 4。最佳深度为 3。

对于将列表变成深度最小的二叉树的情况：对列表进行排序，并在列表上根据索引创建树。

伪代码中的树构造：

```
convertListToTree(list)
    list.sort();
    return subtreeOf(list, 0, list.size())

subtreeOf(list, from, to) {
    if (to - from <= 0)
        return null;
    int mid = (from + to) / 2;
    return new Node(list.get(mid),
                    subTreeOf(list, from, mid),
                    subTreeOf(list, mid + 1, to));
} 
```

# mysql - Mysql加载数据infile忽略1行不起作用

> ID：13252068
> 
> 赞同：5
> 
> 时间：2012-11-06T13:28:15.417
> 
> 标签：mysql

我想使用 Load data infile 将 CSV 文件导入我的 Mysql 表：这是我当前的代码：

```
 LOAD DATA INFILE '../myfile.csv'
          INTO TABLE data 
        FIELDS
            TERMINATED BY ','
            ENCLOSED BY '"'
            ESCAPED BY '"' 
LINES TERMINATED BY '\n' IGNORE 1 LINES (@f1,@f2...) set `f1`=@f1,...,fk=13 ; 
```

这是 csv 文件的第一部分：

```
Timestamp,FromName,FromID,FromA,FromAID,FromURL,ToCName,ToCID,ToCTarget,ToAName,ToAID,ToAURL,UUID,Model,OS,Country,Type,Value
"2012-10-29 07:02:20","NH","4f7898654fgh02","Halloween Game","589754hj67d00021","78643609","","","","Game 1™","4f754hj67d00014","58975449","988675ffgh555f3284530","iPhone","5.1.1","GB","cpi","0.5" 
```

这给了我插入的 0 行，但是如果我将 IGNORE 1 LINES 替换为 IGNORE 0 LINES，则文件将成功导入（当然不会忽略第一行）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:53:52.430

删除此行解决了问题：

```
ESCAPED BY '"' 
```

**工作代码：**

```
LOAD DATA INFILE '../myfile.csv'
          INTO TABLE data 
        FIELDS
            TERMINATED BY ','
            ENCLOSED BY '\"'
LINES TERMINATED BY '\n' IGNORE 1 LINES (@f1,@f2...) set `f1`=@f1,...,fk=13 ; 
```

# objective-c - 将 MKAnnotationView 的标注重新自动适配到地图视图中

> ID：13252069
> 
> 赞同：1
> 
> 时间：2012-11-06T13:28:22.343
> 
> 标签：objective-c, ios, mkmapview, mkannotationview

我有一张带有标注的地图。该注释会移动，如果在移动时打开，标注会在某些时候离开屏幕。

我能找到解决这个问题的唯一方法是打电话`deselectAnnotation:`，然后`selectAnnotation:`在地图视图上。

我唯一遇到的问题是，您必须`selectAnnotation:`使用设置为的动画参数进行调用`YES`才能重新调整标注，这会使标注在每次移动时弹开。

除了通过创建自己的自定义标注来重新发明轮子之外，是否有更优雅的方式来自动调整标注？

谢谢！

# asp.net - 在数据库中插入表时出错？

> ID：13252070
> 
> 赞同：1
> 
> 时间：2012-11-06T13:28:23.170
> 
> 标签：asp.net, sql-server-2008, datatable, insertion

我正在使用具有以下代码的表数据类型在数据库中插入表：

```
CREATE TYPE BackUpDoctorLocationAreaRoom AS TABLE (
[RoomId] bigint,
[AreaId] bigint,
[LocationId] bigint
);

Alter proc proc_tblBackUpDoctorInsert 
(
@Id uniqueidentifier='',
@BackUpDoctorId uniqueidentifier='1323e1f4-7a93-4b45-9a9b-3840c32fd6d8',  
@StartDate datetime='11/08/2012',  
@EndDate datetime='11/09/2012',  
@StartTime datetime='22:22:22',  
@EndTime datetime='01:11:11',  
@CreatedBy uniqueidentifier='acf7961c-4111-49ad-a66a-ce7f9ce131bd',  
@ModifiedBy uniqueidentifier='acf7961c-4111-49ad-a66a-ce7f9ce131bd',  
@createdDate datetime='11/6/12 3:09:58 AM',  
@ModifiedDate datetime='11/6/12 3:09:58 AM',
@tblBackUpDoctorsForRooms BackUpDoctorLocationAreaRoom READONLY
)    
as    
set xact_abort on
declare @newId uniqueidentifier;    
set @newId = newid(); 
insert into tblBackUpDoctor (Id,BackUpDoctorId,StartDate,EndDate,StartTime,EndTime,CreatedBy,ModifiedBy,
createdDate,ModifiedDate,IsActive,isdeleted) values 
(@newId,    
@BackUpDoctorId,    
@StartDate,    
@EndDate,    
@StartTime,    
@EndTime,    
@CreatedBy,    
@ModifiedBy,    
@createdDate,    
@ModifiedDate,    
1,0)    
declare @IdFortblBackUpDoctorsForRooms uniqueidentifier;    
set @IdFortblBackUpDoctorsForRooms = newid();    
delete from tblBackUpDoctorsForRooms where BackUpRecordId=@id and Roomid in (Select roomid from @tblBackUpDoctorsForRooms)
delete from tblbackupdoctor where id=@id
insert into tblBackUpDoctorsForRooms (BackUpRecordId,Roomid,Araeid,locationid)    
Select  @newId,roomid,areaid,locationid from @tblBackUpDoctorsForRooms
select @newId 
```

这是我使用该表的 sp。

我的类文件的代码是：

```
public string InsertBackUpDoctor(ClsBackUpDoctorProp objProp, DataTable dtLocAreaRoom)
{
    String ConnectionString = CCMMUtility.GetCacheForWholeApplication();
    String backUpRecordId = "";
    SqlParameter[] param = new SqlParameter[12];
    param[0] = new SqlParameter("@Id", objProp.Id);
    param[1] = new SqlParameter("@BackUpDoctorId", objProp.BackUpDoctorId);
    param[2] = new SqlParameter("@StartDate", objProp.StartDate);
    param[3] = new SqlParameter("@EndDate", objProp.EndDate);
    param[4] = new SqlParameter("@StartTime", objProp.StartTime);
    param[5] = new SqlParameter("@EndTime", objProp.EndTime);
    param[6] = new SqlParameter("@CreatedBy", objProp.CreatedBy);
    param[7] = new SqlParameter("@ModifiedBy", objProp.ModifiedBy);
    param[8] = new SqlParameter("@createdDate", CCMMUtility.GetCurrentDateTimeByTimeZone("US Mountain Standard Time"));
    param[9] = new SqlParameter("@ModifiedDate", CCMMUtility.GetCurrentDateTimeByTimeZone("US Mountain Standard Time"));
    param[10] = new SqlParameter("@CurrentDate", objProp.CurrentDate);
    param[11] = new SqlParameter("@tblBackUpDoctorsForRooms ", dtLocAreaRoom);

    backUpRecordId = SqlHelper.ExecuteScalar(ConnectionString, "proc_tblbackupdoctorInsertBackUpDoctors", param).ToString();
    return backUpRecordId;
} 
```

这是我尝试插入时出现的错误：

**传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确。表值参数 12 ("@tblBackUpDoctorsForRooms")，第 0 行，第 0 列：数据类型 0xF3（用户定义的表类型）具有指定的非零长度数据库名称。数据库名称不允许与表值参数一起使用，只有模式名称和类型名称有效。** 我不知道为什么会这样请帮助我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:56:19.207

我相信您必须更改传递自定义参数的方式：

不只是

```
param[11] = new SqlParameter("@tblBackUpDoctorsForRooms ", dtLocAreaRoom); 
```

而是类似的东西

```
SqlParameter parameter = new SqlParameter();           

parameter.ParameterName = "@tblBackUpDoctorsForRooms";               
parameter.SqlDbType = System.Data.SqlDbType.Structured;
parameter.TypeName = "BackUpDoctorLocationAreaRoom";                
parameter.Value = dtLocAreaRoom;                                  

param[11] = parameter; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:29:18.597

尝试

```
parameter.SqlDbType = System.Data.SqlDbType.Structured;
parameter.TypeName = "BackUpDoctorLocationAreaRoom"; 
```

并在通话中添加

```
backUpRecordId = SqlHelper.ExecuteScalar(ConnectionString,CommandType.StoredProcedure   
"proc_tblbackupdoctorInsertBackUpDoctors", param).ToString(); 
```

# sql-server-2008 - 我需要一个 sp 来选择或更新我的表，为此我必须为单个变量输入多个值我该怎么做？

> ID：13252072
> 
> 赞同：0
> 
> 时间：2012-11-06T13:28:33.513
> 
> 标签：sql-server-2008

迫切需要一个 sp 来为单个变量传递多个值，例如`@list`一个变量，我为它输入的值是 ' `1,3,4,5,66`'，我需要从表中与这些 id 相关的信息：

```
SELECT T.C.value('.', 'NVARCHAR(100)') AS [id]
    INTO #tblPersons
    FROM (SELECT CAST ('<Name>' + REPLACE(@empid, ',', '</Name><Name>') + '</Name>' AS XML) AS [Names]) AS A
    cross APPLY Names.nodes('/Name') as T(C) 
```

我在我的 sp 中使用它，但我很难将它传递给多个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:47:08.183

您是否考虑过使用表变量将数据传递给存储过程。例子：

**设置**

```
CREATE TYPE EmpIdValuesType AS TABLE
  (                     
        [EmpID] [int]NOT NULL
  )

CREATE TABLE Employee
(
  EmpID INT,
  Name varchar(20)
 )

INSERT INTO Employee 
Values
 (1, 'test1'),
 (2, 'test2'),
 (3, 'test3'),
 (4, 'test4'),
 (5, 'test5'),
 (6, 'test6'),
 (7, 'test7');

Create Procedure usp_GetEmployees
(
  @TableVariable EmpIdValuesType READONLY
)
AS
  SELECT *
  FROM Employee
  INNER JOIN @TableVAriable TV
    ON Employee.EmpId = TV.EmpId 
```

现在您可以将行插入到 EmpIdValuesType 类型的临时表变量中，并将该变量传递给存储过程：

**调用存储过程**

```
DECLARE @empIds AS EmpIdValuesType

INSERT INTO @empIds(EmpID) Values (1), (2), (5)

Exec usp_GetEmployees @empIds; 
```

结果如下： ![SQL 结果](../Images/df28b5de3debb5b037f0cd6d43983e9c.png)

[SQLFiddle](http://sqlfiddle.com/#!3/6c2eb/8/0)

# api - Prestashop 创建订单 API

> ID：13252078
> 
> 赞同：3
> 
> 时间：2012-11-06T13:28:54.217
> 
> 标签：api, prestashop

我尝试创建一个 API 连接，以便我可以通过 API 在 Prestashop 中创建订单，在他们的 DOC 中： [http ://doc.prestashop.com/download/attachments/720902/CRUD+Tutorial+EN.pdf?version=1&modificationDate=1301486324000](http://doc.prestashop.com/download/attachments/720902/CRUD+Tutorial+EN.pdf?version=1&modificationDate=1301486324000)

没有关于创建订单的信息，当我尝试自己创建东西时，一切都失败了：

```
$xml = $webService->get(array('url' => 'http://mysite.com/prestashop/api/orders?schema=synopsis'));

$resources = $xml -> children() -> children();
$resources->children()->id_address_delivery = 1;
$resources->children()->id_address_invoice = 1;
$resources->children()->id_cart = 1;
$resources->children()->id_currency = 1;
$resources->children()->id_lang = 2;
$resources->children()->id_customer = 1;
$resources->children()->id_carrier = 2;
$resources->children()->total_paid = '1';
$resources->children()->total_paid_real = '1';
$resources->children()->total_products = 1;
$resources->children()->total_products_wt = 1;
$resources->children()->conversion_rate = 0.1;

$resources->children()->module = 'cheque';
$resources->children()->payment = 'Cheque';

$xml = $webService->add(array('resource' => 'orders',
'postXml' => $resources->asXML()
)); 
```

给出错误等，这里有人有适当的文档吗？还是一个运行简单命令的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:55:48.230

您需要获取架构然后 foreach 返回的行，或者只是手动提供值。

这是获取所选方法架构的示例。

```
$xml = $webService -> 
  get(array('url' => 'http://mysite.com/prestashop/api/customers?schema=blank')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T18:31:36.960

您需要创建**Customer**、**Address**、**Cart**，最后是**Order**。在创建订单之前，您必须在购物车中有产品并且必须设置 id_address_delivery 和 id_address_invoice。

您可以在我的博客[PrestaShop 网络服务创建订单错误中阅读更多详细信息](http://www.exploreroute.com/prestashop-webservice-create-order-errors/)

# c# - 找不到引用组件 Microsoft.CSharp

> ID：13252087
> 
> 赞同：5
> 
> 时间：2012-11-06T13:29:21.007
> 
> 标签：c#, visual-studio-2008, reference, components

我在我从 Visual Studio 2010 开始的 C# 项目中发现了这个问题，当我转到另一台使用 2008 的 PC 时，我打开了 project.csprog：

> 需要一个 get 或 set 访问器

和警告：

> 找不到引用的组件“Microsoft.CSharp”。

我认为是关于 .NET Framework 或 Microsoft.CSharp 没有找到，因为它说：

> 无法解析此引用。找不到程序集“Microsoft.CSharp”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，则可能会出现编译错误`

但是我不知道问题所在，你们能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T13:31:23.997

听起来您在项目中以 .NET 4.0 为目标，然后尝试在仅针对 .NET 3.5 的 VS2008 中加载它。

如果您**需要**在 VS2008 中使用该项目，那么您应该在 .NET 3.5 中重新定位该项目：

![在此处输入图像描述](../Images/6cbd3877b2e14503619ec4976395ec8a.png)

然后删除任何不正确的引用（无论如何，它们可能会有黄色警告三角形）。

`A get or set accessor expected`还建议您使用新的 C# 语法，例如`dynamic`. 如果您需要针对较旧的 C# 编译器，则*不必这样做*。如果您使用多个 IDE 版本并且这是一个问题，那么为确保您不会意外这样做，您可以通过 Project Properties -> Build -> Advanced 设置项目的语言版本：

![在此处输入图像描述](../Images/c646da9b6c2a5ec3da4fbd39c9e2d73a.png)

# sql - Sybase - 设置控制台输出以打印日志语句

> ID：13252089
> 
> 赞同：7
> 
> 时间：2012-11-06T13:29:28.600
> 
> 标签：sql, printing, console, sybase, output

有人知道如何在 Sybase 中打开控制台输出。像 , 这样的常用语句 `print 'Hello'`对我不起作用，它只是说命令成功执行而没有打印日志语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-03T20:20:31.263

您是否在 sybase 中使用 Interactive SQL？或者您是否使用 -nogui 选项调用 dbisqlc 并将其传递给 SQL 文件以使其运行？

'message' 方法仅适用于交互模式。

我也在尝试解决这个问题，但据我所知，控制台输出似乎不起作用。我尝试使用“选择”语句，例如：

```
SELECT "This is my message"; 
```

它似乎有效，但对我的口味来说有点太老套了。

请让我知道这是否有效/您想出了更好的方法:)

~会

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-23T14:45:20.650

这取决于您的设置。如果您使用的是 SQL Anywhere，如果您是[从嵌入式 SQL 或 ODBC 应用程序连接的，](http://dcx.sap.com/1200/en/dbreference/print-statement.html)**则不**`PRINT 'Hello'`会将其写入客户端窗口。但是，打印的消息将[在 Sybase Central 的服务器消息中](http://dcx.sybase.com/1200/en/dbadmin/logsqlstatements-sc.html)可见。

 **在您的情况下，您可能需要`MESSAGE 'Hello' type status to client`@toniedzwiedz 提到的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-06T16:12:35.663

```
DECLARE @var1 INT, @var2 INT
SELECT @var1 = 3, @var2 = 5
PRINT 'Variable 1 = %1!, Variable 2 = %2!', @var1, @var2 
```**

# wpf - 网格标题鼠标向上事件 - WPF

> ID：13252092
> 
> 赞同：1
> 
> 时间：2012-11-06T13:29:33.560
> 
> 标签：wpf, datagrid

我有一个 WPF DataGrid 并且我已经订阅了 Grid 的 PreviewMouseUp 事件。现在，由于网格包含记录和列标题，我可以单击其中任何一个，PreviewMoudeUp 事件将被触发。我如何知道我是单击了列标题还是单击了行？基本上我想在网格中获得精确的控制（列标题或内容行）。

当我查看发件人时，它总是提供对 Grid 的引用。但实际上我想知道在网格中单击的标题或行的引用，并且我需要 PreviewMouseUp 事件中的这些信息。任何帮助表示赞赏。

谢谢，

英迪拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:26:35.480

您检查事件参数的[OriginalSource](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx)属性。

# javascript - 仅通过 javascript 通过浏览器将数据导出为 csv、pdf

> ID：13252093
> 
> 赞同：1
> 
> 时间：2012-11-06T13:29:37.300
> 
> 标签：javascript

我有一个显示一些数据的网页。我想让用户能够将他们看到的数据导出为 CSV 文件或 PDF 文件或其他格式。

纯粹通过javascript在技术上是否可行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:19:10.627

在一定程度上可以解决这个问题：

这是触发“另存为”下载的链接：

```
<a href="data:application/octet-stream;charset=utf-8;base64,Zm9vIGJhcg==">text file</a> 
```

所以诀窍是使用 data:application/octet-stream;

但请注意，无法指定要保存的文件名/资源的扩展名（例如 report.csv）

# java - 你如何增加面板宽度？

> ID：13252095
> 
> 赞同：2
> 
> 时间：2012-11-06T13:29:51.563
> 
> 标签：java, swing

使用此代码，我将拥有以下窗口。我创建了 2 个面板并将 mainp 一个添加到框架中，并将面板添加到 mainp 我这样做是为了使窗口大小调整为动态的（因此面板不会根据框架调整大小）我尝试使我的默认面板大小更宽，以便文本字段和标签变得更宽，但 panel.setsize 似乎没有做任何事情。

![在此处输入图像描述](../Images/a3fdaa736912fb345196a91171709b5a.png)

```
// creates the labels
 studId = new JLabel("Student ID");
 studAvg = new JLabel("Student Average");
 studName = new JLabel("Student Name");

 // creates the text fields
 JTextField studIdText = new JTextField();
 JTextField studAvgText = new JTextField();
 JTextField studNameText = new JTextField();

 JPanel mainp = new JPanel();

 JPanel panel = new JPanel();
  panel.setLayout(new GridLayout(3, 2, 2, 2));

            panel.setSize(300, 100);

    // adds to the GridLayout
    panel.add(studId);
    panel.add(studIdText);
    panel.add(studName);
    panel.add(studNameText);
    panel.add(studAvg);
    panel.add(studAvgText);

    mainp.add(panel);
    add(BorderLayout.CENTER,mainp);

    // verifies the textfields
    studIdText.setInputVerifier(new IntVerifier());
    studAvgText.setInputVerifier(new DoubleVerifier());

    setTitle("Student Form");
    setSize(300, 200);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(EXIT_ON_CLOSE); 
```

![在此处输入图像描述](../Images/e389fb287bf595e9f87bb009ad070806.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:55:56.550

您正在寻找的方法是[`setPreferredSize`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setPreferredSize%28java.awt.Dimension%29). 使用它代替`panel.setSize(300, 100)`.

```
panel.setPreferredSize(new Dimension(300, 100)); 
```

我还建议不要将 JFrame 的大小设置为固定值 (300,200)，而是这样做[`pack()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#pack%28%29)。这将设置 JFrame 的大小以适合里面的面板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T08:09:58.813

使用来自@Dan 和@MADprogrammer 和@trashgod 的建议我想出了以下

```
JTextField studIdText = new JTextField(20);

JPanel panel = new JPanel();
panel.setLayout(new GridBagLayout());
GridBagConstraints r1 = new GridBagConstraints();

r1.fill = GridBagConstraints.HORIZONTAL;
r1.weightx = 0.0;
r1.gridx = 0;
r1.gridy = 0;
panel.add(studId,r1);

r1.weightx = 0.5;
r1.gridx = 1;
r1.gridwidth = GridBagConstraints.REMAINDER; 
panel.add(studIdText,r1); 
```

当然，您可以`GridBagConstraints`为每一行制作并更改`gridy`

![在此处输入图像描述](../Images/4e6a52c5ae2211c957ac4bc2819463ff.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:34:03.047

将布局设置`mainp`为`BorderLayout`。

```
mainp.setLayout(new BorderLayout()); 
```

然后，为了避免文本字段垂直调整大小并看起来很奇怪，您可以添加`panel`到`BorderLayout.NORTH`，例如。

```
mainp.add(panel, BorderLayout.NORTH); 
```

# php - “找不到指定的程序”IIS 6.0 和 PHP5

> ID：13252098
> 
> 赞同：0
> 
> 时间：2012-11-06T13:30:10.520
> 
> 标签：php, iis, webserver, iis-6, windows-server-2003

我正在尝试使 PHP5 在 Windows Server 2003 上通过 IIS 6.0 工作，我正在按照以下步骤操作： [http ://www.iisadmin.co.uk/?p=4](http://www.iisadmin.co.uk/?p=4)

问题是，在 php 文件夹中没有名为“ *`php5isapi.dll`*”的文件，所以我改用 php5isapi.dll。这是正确的吗？或者我应该尝试从某个地方下载 php5isapi.dll。

那么，我继续按照这些步骤操作，当我尝试执行我的 php 文件时，我收到以下消息：

> 找不到指定的过程。

我究竟做错了什么？

谢谢。

# 更新

我下载了 php5isapi.dll 并试图让它与它一起工作，但我收到了这个错误：

> 指定的模块无法找到。

此外，在进行任何更改后，我单击停止并播放重新启动*默认网站。*

# 更新 2

现在，重新启动后，当尝试访问 PHP 文件时，浏览器显示 500 错误：

> 该页无法显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:57:49.727

我注意到“ `php5isapi.ll`”不再适用于 PHP 的最新版本，如下所示： [为什么在安装 PHP for Windows 后缺少 php5isapi.dll？](https://stackoverflow.com/questions/1235437/why-is-php5isapi-dll-missing-after-installing-php-for-windows)

因此，我所做的是遵循本教程以便使用`FastCGI` [http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/using-fastcgi-to -host-php-applications-on-iis-60](http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/using-fastcgi-to-host-php-applications-on-iis-60)

我在此评论中找到它： [为什么在安装 PHP for Windows 后缺少 php5isapi.dll？](https://stackoverflow.com/questions/1235437/why-is-php5isapi-dll-missing-after-installing-php-for-windows#comment8418804_1431232)

重新启动服务器后，它终于工作了。

# regex - 正则表达式匹配浮点数但不匹配整数

> ID：13252101
> 
> 赞同：5
> 
> 时间：2012-11-06T13:30:15.153
> 
> 标签：regex, floating-point, integer

我有一个问题来定义一个匹配浮点数但不识别整数的正则表达式。

我有以下正则表达式，它匹配浮点数。

```
(\+|-)?([0-9]+\.?[0-9]*|\.[0-9]+)([eE](\+|-)?[0-9]+)? 
```

如何修改上面的表达式使其不匹配整数？

这是应该匹配的示例：

```
3.3
.3
5E6
.2e-14
7E+3
4.
5.E2
1e2 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T13:32:56.350

如果您的正则表达式支持前瞻，请在数字结尾之前要求一个浮点字符：

```
((\+|-)?(?=\d*[.eE])([0-9]+\.?[0-9]*|\.[0-9]+)([eE](\+|-)?[0-9]+)? 
```

[附加阅读。](http://www.regular-expressions.info/lookaround.html)

这里还有一个稍微优化的版本：

```
[+-]?(?=\d*[.eE])(?=\.?\d)\d*\.?\d*(?:[eE][+-]?\d+)? 
```

我们从可选的`+`or开始`-`。然后我们需要一个字符`.`，`e`或者`E`在任意数量的数字之后。然后我们还需要至少一位数字，在字符串之前或之后。我们只匹配数字，一个可选的`.`和更多的数字。然后（完全可选）一个`e`或一个`E`和可选的`+`或`-`，然后是一个或多个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:36:43.427

这应该适合您的需求：

```
[+-]?([0-9]+\.([0-9]+)?|\.[0-9]+)([eE][+-]?[0-9]+)? 
```

# cursor - 使用 Ogre3D 从光标坐标导出射线

> ID：13252109
> 
> 赞同：2
> 
> 时间：2012-11-06T13:31:12.100
> 
> 标签：cursor, raytracing, ogre3d

我正在创建一个宇宙飞船游戏，您可以在其中从他们的飞船发射激光。基本上我想创建一条从玩家船到光标位置的射线。玩家可以四处移动，但摄像机是静止的。到目前为止，我已经尝试使用：

```
Ray laser = mCamera->getCameraToViewportRay(mMouse->getMouseState().X.abs, mMouse->getMouseState().Y.abs); 
```

和设置：

```
laser.setOrigin->(mPlayer->getPosition); 
```

但是，每次我执行射线场景查询时，它都会向屏幕的左上角发射。我在这里使用代码作为如何导出屏幕坐标的参考：[http ://www.ogre3d.org/forums/viewtopic.php?f=5&t=49132](http://www.ogre3d.org/forums/viewtopic.php?f=5&t=49132)

一个额外的小问题：有没有办法只画`ManualObject`一小段时间来模拟激光枪的射击？我已经尝试使用以下代码段绘制一小部分光线：

```
Ogre::ManualObject* lazor = mSceneMgr->createManualObject("lazor");
lazor->begin("HiliteYellow", Ogre::RenderOperation::OT_LINE_LIST);
// define start and end point
for (int i = 0; i< 20000;i++)
{
    lazor->position(laser.getPoint(30+i));
    lazor->position(laser.getPoint(300+i));
}
lazor->end();

mSceneMgr->getRootSceneNode()->attachObject(lazor); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:06:29.873

相机到视口光线从您的相机位置开始，并穿过您在世界中单击的位置。

如果所有对象的三个轴坐标之一都相同（都在同一个平原上，2d），您可以使用相机来观察光线以确定光线与平原相交的点。然后你可以将激光从你的船上拉到那个点。

您还可以使用射线来获取目标对象与光标的交点。这将适用于 2d 和 3d 表示。同样，您将把激光从您的船上拉到该点。

这里详细解释了如何使用这种射线查询：[http ://www.ogre3d.org/tikiwiki/tiki-index.php?page=Intermediate+Tutorial+3](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Intermediate+Tutorial+3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T23:23:56.380

如果您是从源代码安装的，或者拥有 SDK，我建议您检查一下`SdkTrays.h`- 特别是`screenToScene`、`sceneToScreen`和`getCursorRay`.

高温高压

# html - 为什么通用兄弟组合器并不总是有效？

> ID：13252113
> 
> 赞同：1
> 
> 时间：2012-11-06T13:31:19.507
> 
> 标签：html, css, hover, css-selectors

我有四个 div，我想在悬停时更改它们的宽度和高度，这样你悬停的那个会扩大，而所有其他人会缩小悬停的一个扩大多少。当我将鼠标悬停在第一个 div 上时，我设法让它工作，但是当我尝试对其他三个做同样的事情时，什么也没有发生。我的 HTML：

```
<div  id="main">
        <div  id="mainOne">
            <h3>text</h3>
        </div>
        <div  id="mainTwo">
            <h3>text2</h3>
        </div>
        <div  id="mainThree">
            <h3>text3</h3>
        </div>
        <div  id="mainFour">
            <h3>text4</h3>
        </div>
    </div> 
```

我的 CSS：

```
/* HOVER 1 */

#mainOne:hover{
width:748px;
height:600px;
}

#mainOne:hover + #mainTwo{
width:248px;
height: 600px;
}

#mainOne:hover ~ #mainThree{
height:200px;
}
#mainOne:hover ~ #mainFour{
height:200px;
}

/* END HOVER 1 */

/* HOVER 2 */
#mainTwo:hover{
width:748px;
height:600px;
}

#mainTwo:hover + #mainOne{
width:248px;
height: 600px;
}
#mainTwo:hover + #mainThree{
height:200px;
}
#mainTwo:hover ~ #mainFour{
height:200px;
}

/* END HOVER 2 */ 
```

因此，当我将鼠标悬停在 mainOne 上时，一切都会发生变化，但是当我将鼠标悬停在 mainTwo 上时，只有 mainTwo 会发生变化并弄乱其他所有内容。我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T13:35:55.800

CSS 只能（[当前）定位](http://dev.w3.org/csswg/selectors4/#subject)*稍后*出现在 DOM 中的元素，因此`#mainTwo + #mainThree`可以工作，但`#mainTwo + #mainOne`不能。

要定位先前的兄弟姐妹，您必须将兄弟姐妹包装在另一个父元素中，然后根据该父元素的悬停设置先前的兄弟姐妹的样式。

```
div > div {
    border: 1px solid #000;
    padding: 0.5em 1em;
    width: 80%;
    margin: 0 auto;
    color: #f00;
}

#main:hover > div {
    width: 50%;
}

#main:hover > div:hover ~ div {
    width: 50%;
}

#main:hover > div:hover {
    width: 80%;
} 
```

[JS fiddle 概念验证](http://jsfiddle.net/davidThomas/xVT8Y/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:34:14.707

您的所有`mainTwo`规则都`:hover`使用相邻的兄弟组合器。

只能`#mainTwo + #mainThree` 匹配为既不匹配，也不`#mainOne`是`#mainFour`的下一个兄弟`#mainTwo`。

如果您使用通用兄弟组合器 ( `~`)，那么您也可以匹配`#mainFour`。

由于`#mainOne` **前面** `#mainTwo`是 ，您不能将它与依赖于存在的规则匹配`#mainTwo`。

# asp.net-mvc-4 - 如何从控制台应用程序访问 Web API 中的不同方法？

> ID：13252116
> 
> 赞同：0
> 
> 时间：2012-11-06T13:31:34.387
> 
> 标签：asp.net-mvc-4, routing, asp.net-web-api

当我的控制台应用程序中有多个获取、发布和删除方法时，我如何在我的 webapi 中访问我的方法，我如何区分它们这是我的 api 控制器

```
 public IQueryable<Store> GetAll()
    {                     
        return StoreRepository.All;
    }
    //GetAll Stores including all relation tables
    public IQueryable<Store> GetAllIncluding()
    {                   
        return StoreRepository.AllIncluding();
    }

    //Get store by id/id=5
    public Store Find(long storeid)
    {
        stores = StoreRepository.Find(storeid);
        return stores;
    }

    //Insert or Update Store
    public void InsertorUpdateWithGraph(Store store)
    {
        StoreRepository.InsertOrUpdateWithGraph(store);
    }

    //Insert or Update StoreDetail
    public void InsertOrUpdateStoreDetail(StoreDetail storedetail)
    {
        StoreRepository.InsertOrUpdateStoreDetail(storedetail);
    }

    //Get StoreDetail by id/id=5
    public StoreDetail FindStoreDetail(long storedetailid)
    {
        storedetail = StoreRepository.FindStoreDetail(storedetailid);
        return storedetail;
    }

     public List<StoreDetail> GetAllStoreDetails(long storedetailid)
    {
        List<StoreDetail> storedetails = StoreRepository.GetAllStoreDetails(storedetailid);
        return storedetails;
    }
      public Sage FindSage(long sageid)
    {
        return StoreRepository.FindSage(sageid);
    } 
```

像这样我可能有两个以上的获取、发布、插入或更新方法我必须从我的控制台应用程序访问这些方法我如何映射我想要的方法，可以在这里帮助我如何定义路由

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T22:46:09.500

您可以有多个“获取...”操作，并且您可以在没有属性的情况下逃脱，`HttpGet`因为它们以“获取”开头。“查找...”方法需要用`HttpGet` 那些“插入...”来装饰，你需要用`HttpPost`或`HttpPut`属性来装饰。这些方法的参数可以通过两种方式进行配置。您可以像 POST 对象一样`{id:"ddd",name:"nnn"}`执行操作

```
MyAction(int id, string name) 
```

Web APi 框架威胁任何以 Post...、Delete...、Get...、Put... 开头的方法作为相应的 Http 动词。但是您可以按照自己的方式命名它们，然后使用 Http 属性进行装饰。

当涉及到参数时，它是关于控制器操作与路由的关联。

现在，要从控制台应用程序运行它，您可以使用`HttpClient`

```
 string _webSiteUrl = "www.ffsdfds.com"
     HttpClient client = new HttpClient();
     client.BaseAddress = new Uri(_webSiteUrl);
     client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json")); // for posting
     HttpResponseMessage resp = httpClient.GetAsync("/api/area/getall").Result; 
```

# jquery-mobile - 多页布局时，Jquery Mobile 弹出窗口导致页面滚动到顶部。（在 iPhone 上）

> ID：13252118
> 
> 赞同：1
> 
> 时间：2012-11-06T13:31:53.297
> 
> 标签：jquery-mobile

我有一个多页布局，如果我导航到一个页面（甚至是第一页）并且 URL 现在包含 #PageNumber，任何以任何方式关闭任何弹出窗口都会导致页面滚动到顶部。

显然，这并不理想，我想知道是否有办法阻止它。

# css - 如何在元素周围设置特定边框？

> ID：13252121
> 
> 赞同：1
> 
> 时间：2012-11-06T13:32:05.140
> 
> 标签：css

我想在我的元素周围放置一个特定的边框，如下所示。我怎么能用css做到这一点。

![带边框的按钮](../Images/c86b6698a04fe14887c65ba5676ac38e.png)

我使用这个 css 来显示元素周围的边框：

```
.ui-selected {
  -moz-box-shadow: 0 0 1px 1px black; 
  -webkit-box-shadow: 0 0 1px 1px black; 
  box-shadow: 0 0 1px 1px black;
} 
```

但我想在图像中显示边框。这可能吗？

我想把这八个正方形放在一个元素周围。

我使用 $('#element').addClass('ui-selected') 添加并使用 $('#element').removeClass('ui-selected') 删除。

我想要css类，可以吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:42:48.137

这是解决方案：

```
box-shadow: 2px 2px 1px 0 #666;
border-top: 1px solid white;
border-left: 1px solid white; 
```

你可以在[JSFiddle](http://jsfiddle.net/vGUre/)上看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:36:03.720

您可以为每一边指定不同的颜色，使用border-(top|lef|right|bottom)-color 属性来添加高光/阴影。角将相应地斜接。

[边框顶部颜色](http://www.w3schools.com/cssref/pr_border-top_color.asp)

然后，您可以尝试使用放置在角落的单个 CSS3 边框图像来获得黑色方块。

[边框 图片](http://www.css3.info/preview/border-image/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:44:45.300

对于拖动句柄：虽然您可以[使用 CSS 将它们放在那里](http://www.css3.info/preview/border-image/)，但您将无法将事件处理程序附加到它们，也无法在鼠标移过它们时更改鼠标光标。

要获得这两者，您需要将点作为实际元素。有关定位角元素的一种方法，请参[见此示例](http://phrogz.net/css/corners/index3.html)。为 StackOverflow 后代缓存（万一我的网站关闭）：

```
<html lang="en"><head>
  <title>Positioning Images</title>
  <style type="text/css">
    .compass          { position:relative }

    .compass .north,
    .compass .south,
    .compass .east,
    .compass .west,
    .compass .center  { width:15px; height:15px; position:absolute; left:50%; margin-left:-8px; top:50%; margin-top:-8px; cursor:pointer }

    .compass .north   { top:0; margin-top:0 }
    .compass .south   { bottom:0; top:auto; margin-top:0 }
    .compass .east    { right:0; left:auto; margin-left:0 }
    .compass .west    { left:0; margin-left:0 }
  </style>
</head><body>
  <div class="compass">
    <!-- your element here -->
    <img class="north west" src="c1.png" alt="resize">
    <img class="north east" src="c2.png" alt="resize">
    <img class="south east" src="c3.png" alt="resize">
    <img class="south west" src="c4.png" alt="resize">
    <img class="north" src="up.png" alt="resize">
    <img class="south" src="dn.png" alt="resize">
    <img class="east"  src="rt.png" alt="resize">
    <img class="west"  src="lt.png" alt="resize">
  </div>
</body></html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:15:21.513

您可以尝试使用伪元素：

```
div:after {
    content: '\25A0\25A0\25A0  \25A0\25A0\25A0  \25A0\25A0\25A0';
    position: absolute;
    top: -37px;
    left: -5px;
    width: 100%;
    height: 100%;
    text-align: center;
    line-height: 75px;
    letter-spacing: 67px;

} 
```

这在 Webkit 中看起来不错，而在 Firefox 中则相差几个像素。

[演示](http://codepen.io/anon/pen/ojypf)

# java - 处理 HashMap/Hashtable/ArrayList 中的大量对象时内存不足

> ID：13252133
> 
> 赞同：1
> 
> 时间：2012-11-06T13:32:48.330
> 
> 标签：java, memory

我正在做一个项目，其中需要在 HashMap/Hashtable/ArrayList 中加载数千个对象的数据。小型应用程序没有问题，但在大型应用程序***中内存不足。***

请建议如何处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:38:00.540

为什么它需要在内存中？我会说使用随机访问文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:38:40.333

我想知道您在这里的要求，为什么同时加载数千个对象很重要？你能提供更多关于它的细节吗？也许您的实现可以重新设计，这样您就不需要在内存中加载那么多对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:40:24.517

不要一次将所有数据读入内存，或者在执行之前扩展可用内存。

您不能以编程方式增加堆大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T13:52:27.980

要么您必须增加内存，要么您必须检查代码是否存在应用程序创建许多对象的某个点（可能在循环中）。如果它在那里，则取消该对象（**确保它不会影响您的应用程序流程**）。另一种选择尝试使用更轻的对象（例如，如果您可以正确覆盖 toString() 方法，则可以使 bean 对字符串对象更轻。这也将提高应用程序的性能）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T14:19:03.460

您可以使用缓存系统，例如[ehcache](http://ehcache.org/)。这将使您对使用的“内存”有所控制。还有其他缓存实现，ehcache 可能不适合您的需求。

# iphone - 基于允许的以下对象的基于算法的对象排序/重新排序

> ID：13252135
> 
> 赞同：4
> 
> 时间：2012-11-06T13:32:57.330
> 
> 标签：iphone, objective-c, xcode, algorithm

我需要开发一种算法，该算法将采用一组无序的对象并根据允许它们继续的对象智能地重新排序它们。

我最初的设计/想法是使用 Core Data 将具有一对多关系（“canGoTo”）的实体（例如“对象”）存储回自身，其中包含一组对象，这些对象可以遵循选定的对象 * 对象。

考虑以下示例，其中每个对象都有一组可以继续处理的对象（实际的对象集要大得多）。

```
Object A - can go to -> Objects B,C,D
Object B - can go to -> Objects E,F,G,Y,H
Object C - can go to -> Objects P,S,Z
Object D - can go to -> Objects H,J,X
...
Object G - can go to -> Objects R,Y,Z
Object H - can go to -> Objects G,Z
...
Object Y - can go to -> Objects Z
Object Z - can go to -> Objects NULL (no objects follow this object) 
```

如果给程序一组对象（R、B、H、G、A、Z），则程序需要找到如何重新排序对象以找到可接受的结构。因此，这组的正确结果是 A->B->H->G->Y->Z

解决这个问题的最佳策略或最有效策略是什么？当我成功触摸到所有对象时，是否应该循环重新订购并退出？使用遗传算法生成输出和分析世代（即[http://ijoshsmith.com/2012/04/08/simple-genetic-algorithm-in-objective-c/](http://ijoshsmith.com/2012/04/08/simple-genetic-algorithm-in-objective-c/)）？或者我是否使用[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)来分析所有对象并将对象重新排序到它可以适合序列的位置？请记住，实际的对象列表将更像是 30 多个对象而不是 6 个，在理想情况下，程序会选择排序列表的最佳方式（可能基于“canGoTo”优先级）。

任何建议/最佳实践将不胜感激。抱歉没有示例代码，目前处于思考阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:09:15.417

您可以将问题建模为有向无[环图](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，然后对其进行[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)。这将给出您正在寻找的确切输出。

# java - Java中的Atoi用于负值

> ID：13252136
> 
> 赞同：2
> 
> 时间：2012-11-06T13:32:59.593
> 
> 标签：java, for-loop, negative-number, atoi, for-else

我正在用 Java 编写一个 Atoi 函数。对于 +ve 整数，它运行良好。但是我想要的是当我输入一个负整数时它应该给我一个错误。所以我尝试在我的 Atoi 类中包含 continue 语句。实现的类是：

```
class Atoi {

    int atoi(String tmp) {

    int result = 0;

        for (int i = 0; i < tmp.length(); i++) {

            char digit = (char)(tmp.charAt(i) - '0');

        if(digit == '-')

        continue;
        }

        else {

            result += (digit * Math.pow(10, (tmp.length() - i - 1)));
        }

    return result;

    }
} 
```

但不幸的是，它给了我这个字符的负等价物，即 -12 它给了我 655312！帮助。

**编辑：**假设我需要检查浮点数我该怎么办？如果我输入 12.1 或 123.2 它应该分别返回 12.1 和 123.2 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:36:29.373

而不是`continue`你应该给出一个错误（抛出一个异常，`return -1`或者你所说的“给出一个错误”）。

如果您想忽略，`-`可以将 else 子句更改为：

```
result = digit + result * 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:34:53.737

快速修复明显问题：逻辑顺序错误......

代替

```
 char digit = (char)(tmp.charAt(i) - '0');
    if(digit=='-')
    continue; 
```

尝试

```
 char origChar=tmp.charAt(i);
    if(origChar=='-')
        continue;
    char digit = (char)(origChar - '0'); 
```

但是还有两个问题：

*   如果存在“-”字符，它不会否定该值！
*   如果这是输入字符串：-1-2-3-4-5 怎么办？结果会很有趣！**编辑：**也试试这个输入：'répa'......更有趣的结果！

不要忘记使用不正确的输入进行测试，正如@Klaus 建议的那样，如果向函数提供了不正确的输入，请毫不犹豫地抛出异常（最好是[IllegalArgumentException ）并提供正确的错误消息......](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalArgumentException.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:51:04.637

当然，您可以编写这样的代码，但您需要检查***tmp***是否为有效数字。

```
int atoi(String tmp) {

    int result = 0;

    int factor = tmp.charAt(0) == "-" ? -1 : 1;

        for (int i = 0; i < tmp.length(); i++) {

            if (tmp.chatAt(i) < '0' ||  tmp.chatAt(i) > '9') 

                continue;

                char digit = (char)(tmp.charAt(i) - '0');

                result += (digit * Math.pow(10, (tmp.length() - i - 1)));
        }

        return result * factor;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T14:02:27.617

如果这不是作为编程练习来完成的，那么有一个更简单的解决方案：

```
 static int atoi(String tmp)
  {
      int result = Integer.parseInt(tmp);
      if(result >= 0) {
         return result;
      } else {
         throw new IllegalArgumentException("Negative string "+"\"" + tmp + "\"");
      }
  } 
```

在否定结果情况下替换适当的异常或其他操作。如果您只想忽略“-”，如发布的代码中所示，请将 if-then-else 替换为：

```
 return Math.abs(result); 
```

此代码还会为“abc”之类的字符串引发异常。

更一般地说，如果一个库方法不能完全按照您的要求做，通常很容易在修改其行为的方法中使用它，而不是重新编写它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T13:35:22.460

如果您不想转换负数，则只需在遇到`-`符号时返回 0 而不是进一步循环。将此代码放在 if-else 块之前。

```
 if(tmp.charAt(i)=='-')  
         return 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T13:38:36.917

```
if(digit=='-') 
```

和

```
(char)(tmp.charAt(i) 
```

你的代码假设没有 - 的

```
(char)(tmp.charAt(i) - '0'); 
```

是一种盲目地将“数字”变量限制为数字的优化。

您需要逐步了解您的代码实际在做什么，搜索 ASCII 图表并完成减法 '0' 的作用（'0' == 48），所以 '1' (49) - '0' (48 ) = 1 等等...

# php - 将使用 htmlentities 编码的字符串发送回服务器

> ID：13252138
> 
> 赞同：0
> 
> 时间：2012-11-06T13:33:08.093
> 
> 标签：php, post, html-entities

我在一个视图中生成这个：

```
<form method="post">
       <input type="hidden" 
              name="test" 
              value="<?=htmlentities('<>"&ščé', ENT_QUOTES, 'UTF-8')?>">
       <input type="submit>
</form> 
```

现在，在处理表单中的数据时我应该这样做吗？

```
$decodedTest = html_entity_decode($_POST['test'], ENT_QUOTES, 'UTF-8'); 
```

我认为这应该没问题：

```
$decodedTest = $_POST['test']; 
```

但我还没有找到对此的参考。

编辑：我已经打印了发布的值，`test`并且我看到该值未编码。我不知道我是否可以*依靠*这种行为以及为什么。我问的是操作理论。如果我查看原始发布请求，我可以看到发布数据是 urlencoded（我猜这是与 htmlentities 不同的编码类型）。这是否意味着客户端必须在发送请求之前执行一些重新编码。（客户端）浏览器在发送之前是否将输入值以编码形式或解码形式存储在内存中？（我已经知道 php 会自动解码请求中的 urlencoded 数据，因此这部分对我来说相当清楚）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:35:32.963

您实际上并不需要引用，因为打印`htmlspecialchars($_POST['test'])`（或只是设置`Content-Type: text/plain`）会立即显示 $_POST 中的数据不是实体编码的。

你也不需要调用`htmlentities`来编码视图中的数据——`htmlspecialchars`如果你的目标是生成有效的标记就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:38:15.250

发送表格，您可以做到。更好的检查

# authentication - WSO2 身份服务器身份验证并返回响应

> ID：13252148
> 
> 赞同：0
> 
> 时间：2012-11-06T13:33:34.193
> 
> 标签：authentication, wso2, wso2is, custom-authentication

我有一个 Liferay 的自定义身份验证器，它使用“AuthenticationAdmin”服务和服务方法“login()”对用户进行身份验证，只返回布尔响应。我

在我的情况下，我希望调用 Web 应用程序从这个登录方法中了解更多......就像应用程序对经过身份验证的用户所需的一些变量，例如一些用户属性，如身份验证后来自 LDAP 的“isEnabled”、“customattr”。

我们可以从 WSO2 Authenticator 返回一些响应吗？我们如何从 WSO2 IS 实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:34:02.877

在 wso2 身份服务器中，所有属性（电子邮件、姓氏..等）都存储为声明。使用“AuthenticationAdmin”进行身份验证后，您可以使用“WSUserStoreManager”获取用户的声明值（使用方法 getUserClaimValue）。参考“remote-usermgt " 示例可以在身份服务器示例文件夹中找到，否则请参阅此 [0] 博客文章。

[0]http://blog.facilelogin.com/2010/05/managing-users-and-roles-with-wso2.html

# drupal - 可从用户列表编辑的 Excel 工作表

> ID：13252151
> 
> 赞同：1
> 
> 时间：2012-11-06T13:33:54.853
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我有一个活动日历。一些用户可以订阅这些活动，而一些活动正在付费。

我想制作一种可以在线编辑的 Excel 表格，以列出将参加活动的用户和已经付款的用户。

我认为更好的方法应该是：在参与节点上添加一个字段“支付”，版主可以修改这个值，但这是一种将所有te记录显示为一种excel文件的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:54:27.193

**导出 excel 文件：**由于您已经习惯`Views`了显示您的事件，您可以尝试[查看 Excel 导出](http://drupal.org/project/views_export_xls)模块将您的数据导出到可下载的 excel 文件。

**将修改后的excel文件导入Drupal：**我认为在线编辑并不容易，这意味着将您对excel文件的编辑反映到drupal数据库中。您需要上传修改后的 excel 文件，然后需要一些工作来将更改写入数据库，这并非易事，我不知道有任何现有模块支持这一点。

**推荐解决方案：**据我了解，您想要的是使付款编辑尽可能简单。如果是这种情况，您可以`payment`向内容类型添加一个字段，`event`并将编辑权限公开给您提到的版主。使该`payment`字段对普通用户不可见。为了让您的版主更容易工作，您可以安装[可编辑字段](http://drupal.org/project/editablefields)等模块，以在一个页面中启用所有涉及事件的编辑界面，或者自己制作自定义模块。通过这种方式，您可以通过 excel 文件获得您想要的内容。

# c# - 要拆分的正则表达式；

> ID：13252156
> 
> 赞同：2
> 
> 时间：2012-11-06T13:34:16.150
> 
> 标签：c#, regex, sharepoint-2010, workflow, sharepoint-workflow

```
17;#Nancy Williams;#894;#Brian Smith,;#895;#Kart Russell, 
```

我尝试`;#`使用 RegEx 进行拆分，但不需要名称后的数字和逗号。

另外，我还有另一种情况，`string`看起来像这样

```
i:0#.w|domain\nWilliams;i:0#.w|domain\bSmith;i:0#.w|domain\kRussell; 
```

基本上，我希望最终结果看起来像`domain\username; domain\username2...`等等

和第一个例子一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:46:08.900

您可以使用

```
(;#)?[0-9]+;# 
```

作为你的正则表达式

# qt - QML 是否支持属性的私有访问说明符？

> ID：13252158
> 
> 赞同：21
> 
> 时间：2012-11-06T13:34:24.800
> 
> 标签：qt, qml, qt-quick

我只想知道我们是否有任何概念访问说明符，例如 QML 中的私有属性，就像我们在 C++ 中一样。

如果不是，是否想知道我的 QML 组件中有大约 10 个属性，但我必须将访问权限限制为仅 2 个属性。我们如何才能实现这种情况。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-07T07:34:08.843

QML 本身没有这样的内置功能，但这是 Qt Quick Components 方法：

```
Item {
  property int sum: internal.a + internal.b
  QtObject {
    id: internal
    property int a: 1
    property int b: 2
  }
} 
```

“内部”对象的属性在 Item 之外是不可见的，但可以在其内部自由使用。

# magento - Facebook Open Graph 提交操作

> ID：13252159
> 
> 赞同：0
> 
> 时间：2012-11-06T13:34:33.393
> 
> 标签：magento, facebook-opengraph

> 您好 Facebook 大师们，
> 
> 我正在为我的 magento 网站使用 Facebook Open Graph 应用程序。
> 
> 为此，我们需要在 facebook 中创建一个应用程序，我们需要添加按钮，如希望、希望等。这一切都很好，我也创建了按钮。但我们必须从 facebook 批准该按钮。我们需要发布产品 url 以便为需要按钮进行批准提交
> 
> 我无法发布产品网址。请帮我..
> 
> 这是我用于发布网址的代码：
> 
> http://ogp.me/ns# zoomin-magento:http://ogp.me/ns/apps/zoomin-magento#">OG教程应用
> 
> 函数 postCook() { FB.api( '/me/zoomin-magento:want', 'post', { product: 'http://camera.zoomin.com/camera-phones-1/sony-ericsson-xperia- ray-st18i.html' }, function(response) { if (!response || response.error) { alert('发生错误'); } else { alert('Cook 成功！Action ID:' + response.id ); } }); } window.fbAsyncInit = function() { FB.init({ appId : '368510486563356', // App ID status : true, // 检查登录状态 cookie : true, // 启用 cookie 以允许服务器访问会话 xfbml : true // 解析 XFBML }); };
> 
> ```
> // Load the SDK Asynchronously
> (function(d){
>   var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
>   js = d.createElement('script'); js.id = id; js.async = true;
>   js.src = "//connect.facebook.net/en_US/all.js";
>   d.getElementsByTagName('head')[0].appendChild(js);
> }(document));   </script> 
> ```
> 
> ### 酿饼干

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:35:03.047

您还没有解释为什么不能共享 URL。不过，对于审批团队看不到应用程序的情况，您可以制作应用程序的操作视频，展示正在执行的操作，然后提交。

还要检查文档@ [https://developers.facebook.com/docs/opengraph/opengraph-approval/](https://developers.facebook.com/docs/opengraph/opengraph-approval/)

# php - 不掉在其他拖拽上

> ID：13252161
> 
> 赞同：1
> 
> 时间：2012-11-06T13:34:40.197
> 
> 标签：php, javascript, jquery, html

```
<div class="drag" style="height: 80px; width: 30px; background-color: red"></div>
<div class="drag" style="height: 30px; width: 30px; background-color: green"></div>
<div class="drag" style="height: 120px; width: 30px; background-color: blue"></div>

<table id="droppable" border="1">
    <tr> <td></td><td></td><td></td><td></td><td></td><td></td></tr>
    <tr> <td></td><td></td><td></td><td></td><td></td><td></td></tr>
    <tr> <td></td><td></td><td></td><td></td><td></td><td></td></tr>
    <tr> <td></td><td></td><td></td><td></td><td></td><td></td></tr>
    <tr> <td></td><td></td><td></td><td></td><td></td><td></td></tr>
    <tr> <td></td><td></td><td></td><td></td><td></td><td></td></tr>
</table>

​    $(function() {
        $( ".drag" ).draggable();
        $( "#droppable td" ).droppable({
            drop: function( event, ui ) {
                console.log($(this));
            }
        });
    });​ 
```

如何在其他 .drag 上禁用掉线的 .drag？例如，如果我将**红色**框放在字段**a1**上，则绿色和蓝色框不应放在从 a1 到 a4 的字段上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:36:41.977

```
$(function() {
        $( ".drag" ).draggable();
        $("#droppable td:not(.notAvailable)").droppable({
            drop: function( event, ui ) {
                console.log($(this));
                //add class notAvailable to current td

            }
        });
    });​ 
```

# sql - 连接 3 或 4 个连接

> ID：13252165
> 
> 赞同：0
> 
> 时间：2012-11-06T13:34:56.863
> 
> 标签：sql, sql-server-2005

> **可能重复：**
> [将多行组合成一行，多对多](https://stackoverflow.com/questions/13177874/combine-multiple-rows-int-one-row-with-many-to-many)

使用 SQL Server 我有以下表格/数据

```
CUS_VISIT

Cus_ID    Cus_Vis_ID
1           01
1           02
2           01 
```

和

```
CUS_EVENT

Cus_Event_ID    Cus_ID    Cus_Vis_ID
001               1            01
002               1            01 
```

和

```
CUS_XREF

Cus_ID    Cus_Event_ID    Cus_Prt_ID    Cus_Seq_No
1            001               1           1
1            001               2           1 
```

和

```
CUS_PRT

Cus_ID    Cus_Prt_ID    Prt_Cd
1            1            1A
1            2            2A 
```

我正在尝试获取以下内容

SQL 结果

```
Cus_ID     Prt_Cd     Cus_Vis_ID
1           1A,2A        1 
```

我最终得到的是

SQL 结果

```
Cus_ID     Prt_Cd     Cus_Vis_ID
1           1A           1
1           2A           1 
```

这些表由...链接

```
CUS_VISIT.Cus_ID    = CUS_EVENT.Cus_ID 
CUS_VISIT.Cus_Vis_ID  = CUS_EVENT.Cus_Vis_ID
CUS_VISIT.Cus_ID = CUS_XREF.Cus_ID
CUS_EVENT.Cus_Event_ID = CUS_XREF.Cus_Event_ID    
CUS_XREF.Cus_Prt_ID = CUS_PRT.Cus_Prt_ID 
CUS_XREF.Cus_ID = CUS_PRT.Cus_ID 
```

如果我放弃 CUS_XREF.Cus_Prt_ID = CUS_PRT.Cus_Prt_ID 连接，我几乎可以得到我想要的东西，但是我得到了客户的所有零件代码 (Prt_Cd)，而不仅仅是那次访问的零件代码。

这就是我所拥有的

```
select distinct CUS_EVENT.cus_id, CUS_EVENT.cus_visit_id,
    (Select CUS_PRT.prt_cd + ',' AS [text()]
    From CUS_PRT, CUS_XREF
    where 
    CUS_EVENT.cus_id=XREF.cus_id
    and CUS_EVENT.cus_event_id = XREF.cus_event_id 
    and CUS_XREF.cus_id=CUS_PRT.cus_id 
    and CUS_XREF.cus_prt_id = CUS_PRT.cus_prt_id 
    and CUS_XREF.prt_seq_no ='1'
    order by CUS_PRT.prt_cd
    for XML PATH('')) [Codes]
from CUS_EVENT 
```

我最近发了一个类似的帖子，但没有得到任何具体的帮助。我想我需要另一个子查询。谢谢你看这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:51:10.113

好吧，我同意有很多关于它的问题。你只需要写`for xml`

```
select
    V.Cus_ID,
    V.Cus_Vis_ID,
    stuff(
      (
        select ', ' + TP.Prt_Cd
        from CUS_EVENT as TE
            inner join CUS_XREF as TX on TX.Cus_Event_ID = TE.Cus_Event_ID and TX.Cus_ID = TE.Cus_ID
            inner join CUS_PRT as TP on TP.Cus_Prt_ID = TX.Cus_Prt_ID and TP.Cus_ID = TE.Cus_ID
        where
            TE.Cus_Vis_ID = V.Cus_Vis_ID and
            TE.Cus_ID = V.Cus_ID
        for xml path(''), type
      ).value('.', 'nvarchar(max)')
      , 1, 2, '')
from CUS_VISIT as V 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!3/bf85b/15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:56:40.807

请试试这个......但我还没有执行这个查询。我已经实现了相同的场景。试着让我知道

```
SELECT  
      CUS.Cus_ID
    , CUS.Cus_Vis_ID
    , Prt_Cd=STUFF(
                       (SELECT
                            ', ' + S.Prt_Cd
                            FROM CUS_PRT s
                            INNER JOIN CUS_XREF XREF ON  CUS.cus_id=XREF.cus_id AND s.cus_id=XREF.cus_id AND XREF.Cus_Prt_ID = s.Cus_Prt_ID
                            FOR XML PATH(''), TYPE
                       ).value('.','varchar(max)')
                       ,1,2, ''
                  )   

    FROM CUS_EVENT CUS 
    GROUP BY CUS.Cus_ID,CUS.Cus_Vis_ID 
```

# android - CSS 的相对路径

> ID：13252166
> 
> 赞同：0
> 
> 时间：2012-11-06T13:34:57.160
> 
> 标签：android, cordova

这是我尝试使用 Apache Cordova (PhoneGap) 部署的第一个应用程序，但在引用 CSSs 文件时遇到问题。因为我想使用 IntelliJ Idea 工作，所以我遵循[了本指南。](http://therockncoder.blogspot.co.uk/2012/07/android-intellij-idea-and-phonegap.html)作为第一步，我正在尝试在 Android 模拟器上部署该应用程序。

我已经能够成功地将应用程序部署到模拟器，唯一的问题是它似乎没有加载 CSS 文件，所以结果是一个黑白无样式的应用程序。我使用以下方法引用 CSS 文件：

```
<link rel="stylesheet" href="_styles/main.css" /> 
```

文件夹层次结构是：
  - assets
    -- www
      --- _styles
        ---- main.css
      --- index.html

主要活动类似于指南中的活动：

```
public class MyActivity extends DroidGap
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

请注意，同样的事情也会发生在 Eclipse 上。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:23:13.110

You are running into an issue with AAPT. The Android package manager which compiles your app into a .apk file ignores any files or directories that start with '_'. Try renaming your directory to "styles" and updating your references. That should fix the issue with the CSS not being loaded.

# html - 在struts2应用程序中的列表上使用Fieldset属性时不起作用

> ID：13252167
> 
> 赞同：0
> 
> 时间：2012-11-06T13:34:58.283
> 
> 标签：html, jsp, struts2

嗨，看看我在 jsp 中的代码。

```
 <s:iterator value="answeredquestions" status="status" var="question">
  <fieldset>
    <legend><s:property value="Question"/></legend>
    <s:property value="QuestionNumber"/>    
    <table><s:radio label="Answer" name="answeredquestions[%{#status.index}].UserAnswer" list="AnswersOptions" /></table>
   </fieldset>
   </s:iterator>
      < 
```

列表似乎工作正常但是在第一个列表项中，单选按钮不会出现在字段集中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:41:32.640

请参阅有关主题的文档[http://struts.apache.org/2.x/docs/themes-and-templates.html](http://struts.apache.org/2.x/docs/themes-and-templates.html)。默认情况下，Struts2 使用`xhtml`主题。在这个主题中，元素被放在表格单元格中。您可以通过在标签中指定`theme="simple"`属性来更改它。注意：如果您使用`simple`主题，您将丢失字段错误。

# delphi - 如何使用自定义比较器对通用列表进行排序？

> ID：13252169
> 
> 赞同：39
> 
> 时间：2012-11-06T13:35:01.290
> 
> 标签：delphi, sorting

我有点像 Delphi 新手，我不明白如何调用 TList of Records 的 Sort 方法来通过升序整数值对记录进行排序。我有如下记录：

```
 type
   TMyRecord = record
     str1: string;
     str2: string;
     intVal: integer;
   end; 
```

以及此类记录的通用列表：

```
TListMyRecord = TList<TMyRecord>; 
```

试图在帮助文件中找到一个代码示例并找到了这个：

```
MyList.Sort(@CompareNames); 
```

我不能使用，因为它使用类。所以我尝试用一​​些不同的参数编写自己的比较函数：

```
function CompareIntVal(i1, i2: TMyRecord): Integer;
begin
  Result := i1.intVal - i2.intVal;
end; 
```

但是编译器总是抛出一个“参数不足”——当我用 调用它时出错`open.Sort(CompareIntVal);`，这似乎很明显；所以我尽量靠近帮助文件：

```
function SortKB(Item1, Item2: Pointer): Integer;
begin
  Result:=PMyRecord(Item1)^.intVal - PMyRecord(Item2)^.intVal;
end; 
```

使用 PMyRecord 作为`PMyRecord = ^TMyRecord;`

我尝试了不同的调用函数的方法，总是得到一些错误......

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-11-06T13:45:47.990

`Sort`您应该使用的重载是这个：

```
procedure Sort(const AComparer: IComparer<TMyRecord>); 
```

现在，您可以`IComparer<TMyRecord>`通过调用`TComparer<TMyRecord>.Construct`. 像这样：

```
var
  Comparison: TComparison<TMyRecord>;
....
Comparison := 
  function(const Left, Right: TMyRecord): Integer
  begin
    Result := Left.intVal-Right.intVal;
  end;
List.Sort(TComparer<TMyRecord>.Construct(Comparison)); 
```

我已经将该`Comparison`函数编写为匿名方法，但您也可以使用普通的旧式非 OOP 函数或对象的方法。

比较函数的一个潜在问题是您可能会遇到整数溢出。所以你可以改用默认的整数比较器。

```
Comparison := 
  function(const Left, Right: TMyRecord): Integer
  begin
    Result := TComparer<Integer>.Default.Compare(Left.intVal, Right.intVal);
  end; 
```

重复调用可能很昂贵，`TComparer<Integer>.Default`因此您可以将其存储在全局变量中：

```
var
  IntegerComparer: IComparer<Integer>;
....
initialization
  IntegerComparer := TComparer<Integer>.Default; 
```

另一个要考虑的选项是在创建列表时传入比较器。如果您只使用此排序对列表进行排序，那会更方便。

```
List := TList<TMyRecord>.Create(TComparer<TMyRecord>.Construct(Comparison)); 
```

然后你可以对列表进行排序

```
List.Sort; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-09-17T14:38:07.477

简洁的答案：

```
uses
  .. System.Generics.Defaults // Contains TComparer

myList.Sort(
  TComparer<TMyRecord>.Construct(
    function(const Left, Right: TMyRecord): Integer
    begin
      Result := Left.intVal - Right.intVal;
    end
  )
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-21T11:04:53.170

我想分享我的解决方案（基于我在这里收集的输入）。

这是一个标准设置。一个文件数据类，它在通用 TObjectList 中保存单个文件的数据。该列表有两个私有属性 fCurrentSortedColumn 和 fCurrentSortAscending 来控制排序顺序。AsString 方法是路径和文件名的组合。

```
function TFileList.SortByColumn(aColumn: TSortByColums): boolean;
var
  Comparison: TComparison<TFileData>;
begin
  result := false;
  Comparison := nil;

  case aColumn of
    sbcUnsorted   : ;
    sbcPathAndName: begin
                      Comparison := function(const Left, Right: TFileData): integer
                                    begin
                                      Result := TComparer<string>.Default.Compare(Left.AsString,Right.AsString);
                                    end;
                    end;
    sbcSize       : begin
                      Comparison := function(const Left, Right: TFileData): integer
                                    begin
                                      Result := TComparer<int64>.Default.Compare(Left.Size,Right.Size);
                                      if Result = 0 then
                                        Result := TComparer<string>.Default.Compare(Left.AsString,Right.AsString);
                                    end;
                    end;
    sbcDate       : begin
                      Comparison := function(const Left, Right: TFileData): integer
                                    begin
                                      Result := TComparer<TDateTime>.Default.Compare(Left.Date,Right.Date);
                                      if Result = 0 then
                                        Result := TComparer<string>.Default.Compare(Left.AsString,Right.AsString);
                                    end;
                    end;
    sbcState      : begin
                      Comparison := function(const Left, Right: TFileData): integer
                                    begin
                                      Result := TComparer<TFileDataTestResults>.Default.Compare(Left.FileDataResult,Right.FileDataResult);
                                      if Result = 0 then
                                        Result := TComparer<string>.Default.Compare(Left.AsString,Right.AsString);
                                    end;
                     end;
  end;

  if assigned(Comparison) then
  begin
    Sort(TComparer<TFileData>.Construct(Comparison));

    // Control the sort order
    if fCurrentSortedColumn = aColumn then
      fCurrentSortAscending := not fCurrentSortAscending
    else begin
      fCurrentSortedColumn := aColumn;
      fCurrentSortAscending := true;
    end;

    if not fCurrentSortAscending then
      Reverse;

    result := true;
  end;
end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T05:41:07.727

我发现了一个更简单的修改排序函数来按字母顺序排列记录的 TList 或非标准的项目列表。

例子

```
PList = ^TContact;
    TContact = record             //Record for database of user contact records
      firstname1 : string[20];
      lastname1 : string[20];
       phonemobile : Integer;       //Fields in the database for contact info
      phonehome : Integer;
      street1 : string;
      street2 : string;

 type
    TListSortCompare = function (Item1,
                                Item2: TContact): Integer;
var
  Form1: TForm1;
  Contact : PList;         //declare record database for contacts
  arecord : TContact;
  Contacts : TList;   //List for the Array of Contacts

function CompareNames(i1, i2: TContact): Integer;
begin
   Result := CompareText(i1.lastname1, i2.lastname1) ;
end; 
```

以及调用列表排序的函数

```
Contacts.Sort(@CompareNames); 
```

# ssh - 腻子-2批

> ID：13252170
> 
> 赞同：1
> 
> 时间：2012-11-06T13:35:02.520
> 
> 标签：ssh, putty

我们通过 Windows 2008 R2 标准版上的工具使用 Putty v0.62，并使用 SSH 版本 2 连接到外部服务器。我们看到以下命令有效

> psftp.exe*主机*-l*用户*名–pw **-2 -batch** -l*用户*名-i *PrivateKeyLocation*

但以下没有

> psftp.exe*主机*-l*用户*名–pw **–batch -2** -l*用户*名-i *PrivateKeyLocation*

请帮助我们理解这个问题并提出解决方案。

欢迎所有评论，但请记住，我们的工具在将序列更改为`-2 -batch`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:57:02.357

您是在终端中键入这些命令，还是从某个地方复制并粘贴它们？我问的原因是因为连字符。在第一行中，pw 之前的“连字符”不是连字符，第二行中的“pw”和“batch”之前的“连字符”也不是连字符。我指出的字符实际上转换为 ascii 8211“破折号”。

连字符通常由文字处理器或所见即所得的 HTML 编辑器转换为该字符。这使得有时几乎不可能从网站复制和粘贴命令行。尝试手动输入命令，看看它是否有效。

也可能是 SO 已为您转换了您问题中的字符，但我认为这不太可能。

# android - 操作菜单：显示标题和图标

> ID：13252171
> 
> 赞同：3
> 
> 时间：2012-11-06T13:35:02.007
> 
> 标签：android, android-actionbar, title, xml-drawable

我在 menu.xml 中使用此代码：

```
<item android:id="@+id/physics"
        android:icon="@drawable/ic_action_***"
        android:title="@string/physics"
        android:orderInCategory="2"
        android:showAsAction="always"/> 
```

现在我的图标并没有过多地谈论它们所代表的按钮。所以我不想显示它们和标题。经过长时间的谷歌研究，我在@stackoverflow 上发现了这个： [带有标题的 Android 菜单图标：标题不显示](https://stackoverflow.com/questions/4394647/android-menu-icon-with-title-title-doesnt-display) 但它与图标有关。我已经以正确的大小下载了我的图标并将它们放在正确的文件夹中。

而且我的图标没有问题，它们显示得很好，但是当你看到折线图时，你不会自动想到物理，是吗？

任何想法，如何显示两者？我还添加了一个刺痛，它没有出现（甚至可能吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T14:35:48.443

> 任何想法，如何显示两者？

代替：

```
android:showAsAction="always" 
```

和：

```
android:showAsAction="always|withText" 
```

# linux - 仅主页从 http 到 https 的重定向规则

> ID：13252172
> 
> 赞同：1
> 
> 时间：2012-11-06T13:35:05.360
> 
> 标签：linux, apache, security

我们可以只为主页制作 https 吗？

> example.com**或** [http://example.com](http://example.com) **或**www.example.com**或** [http://www.example.com](http://www.example.com)

其余所有页面应以 http 开头。

我试过这样但没有用

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} "^/$"
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} ^(.*)$
RewriteRule ^(.*) http://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:35:01.547

这是不安全的。阅读[OWASP a9](https://www.owasp.org/index.php/Top_10_2010-A9-Insufficient_Transport_Layer_Protection)并设置[HSTS 标志](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)以使您的整个网站仅使用 HTTPS。

HTTP 是一个错误，如果你这样做是为了“性能”，那你就是个傻瓜。HTTPS 非常轻量级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:28:31.943

您还可以在根级别的 .htaccess 中像这样重定向：

```
DirectoryIndex index.html
Redirect 301 /index.html https://www.website.com/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:13:19.047

没有经过真正的测试，但应该发挥作用

```
RewriteEngine On

RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^/?$ https://%{HTTP_HOST}/ [R,L]

RewriteCond %{SERVER_PORT} ^443$
RewriteRule !^/?$ http://%{HTTP_HOST}%{REQUEST_URI} [R,L] 
```

# wicket - 如何更改检票口链接树节点的颜色？

> ID：13252180
> 
> 赞同：1
> 
> 时间：2012-11-06T13:35:34.553
> 
> 标签：wicket

我们正在使用 wicket LinkTree。在页面上构建并呈现树后，我们可以在应用程序中动态地将新节点添加到树中。添加新节点时，我们希望用不同的颜色（比如红色）显示新添加的节点。

我们采取的一种方法（但没有奏效）如下。我们扩展 LinkTree 类并重写 newNodeComponent 方法，如下所示。

```
@Override
protected Component newNodeComponent(String id, IModel<Object> model) {
    return new LinkIconPanel(id, model, TalepTreeForTTBina.this) {
        private static final long serialVersionUID = 4518741854057038753L;

        @Override
        protected void onNodeLinkClicked(Object node, BaseTree tree, AjaxRequestTarget target)
        { . . . . . . 
```

然后我们向这个 LinkIconPanel 事物添加一个 html 属性（类）。之后，我们的计划是编写一个 jquery 函数来查看树上的那个类，然后更改显示文本的 <td>（或者实际上是 <span>）标签的颜色。但是，我们得到的最终标记类似于以下内容：

```
< td class="myClass" . . . .>
  < wicket:panel ....>
    < table . . . >
      < tbody . . . >
        < tr . . . >
          < td . . . >
            < a ...>
              < span > my text that I want to change the color < /span > 
```

我可以访问最外层的 td 标记（在上面的顶部），但无法访问我的 Java Wicket 代码中的内部标记。所以我只是将 myClass 从检票口代码插入到最外层的 td 标记中，并希望从客户端的 jquery 端处理颜色。看起来（从我的 css 代码）我无法从 jquery（或 css）访问 <table> 标签，因为两者之间有一个 <wicket:panel> 标签。

所以我的问题是： 1\. 有没有更好的方法来改变 LinkTree 节点的颜色？2.如果这是我应该走的路，我怎样才能从css到达那个<span>标签？我不能使用 RenderBodyOnly(true) 因为我没有在我的代码中手动添加树节点并且我无法访问节点（要作为节点添加的项目）。LinkTree 为我做到了。

我会很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:15:59.630

我使用 SimpleAttributeModifier 来修改我的 html 标记中的 css，如下所示：

示例.css：

```
span.new-yellow { background: #dadada; color: #dddd55 } 
```

例子.java：

```
SimpleAttributeModifier sam = new SimpleAttributeModifier("class", ".alt-yellow");
if(node.) {
    exampleComponent.add(sam);
} 
```

也许您可以在节点上创建一个模型以指示它是“新的”并在这种情况下添加 SimpleAttributeModifier？

另一种选择可能是使用 HeaderContributor 执行以下操作：

```
 add(new HeaderContributor(new IHeaderContributor() {
            public void renderHead(IHeaderResponse response) {
                response.renderOnLoadJavascript("document.getElementById('" + node.getMarkupId() + "').YOUR_JAVASCRIPT_HERE");
            }
        })); 
```

再想一想，这可能对 Ajax 不友好。无论如何，只是一些想法。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:00:26.430

覆盖 LinkIconPanel 的 newContentComponent 方法。提供一个新的 Label 但覆盖其 onComponentTag 方法，添加类属性和一个值。

```
@Override
protected Component newContentComponent(String componentId, BaseTree tree,
        IModel<?> model) 
{       
    return new Label(componentId, model)
    {
        @Override
        protected void onComponentTag(ComponentTag tag) 
        {
            tag.put("class", "colourMe");
            super.onComponentTag(tag);
        }
    };
} 
```

这会将 class 属性添加到 span 标签并呈现 html，如下所示：

```
< a >
       < span class="colourMe"> my text that I want to change the color < /span >
</ a > 
```

不需要 jquery，你可以使用 class 属性来为文本着色。

# c# - System.Data.SqlClient.SqlException: XML 解析非法名称字符\r\n

> ID：13252185
> 
> 赞同：1
> 
> 时间：2012-11-06T13:35:43.773
> 
> 标签：c#, xml, tsql, stored-procedures, xml-parsing

我从一些 C# 代码调用的 SQL Server 2008 数据库中有一个 T-SQL 存储过程。存储过程如下：

```
ALTER PROCEDURE [dbo].[spDeleteActivityFromUserProfile](
        @profile_id int,
        @user_id nvarchar(50),
        @activity_name nvarchar(50)
)
AS
BEGIN
   SET NOCOUNT ON;

    -- statements for procedure here
    DECLARE @profiles_xml xml
    SET @profiles_xml = (SELECT profiles from tbl_applied_profiles WHERE profiles.value('(Profile/ID)[1]','int')= @profile_id)
    SET @dprofiles_xml.modify('
    delete /Profile/User[ID = sql:variable("@user_id")]/Activities/Activity[Name=sql:variable("@activity_name")]
    ')

    UPDATE tbl_applied_profiles
    SET profiles = @profiles_xml
    WHERE profiles.value('(Profile/ID)[1]','int')= @profile_id
END 
```

表中的 XML 条目的示例，例如将包含在以下内容中`@profiles_xml`：

```
<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>
         <Name>activity1</Name>
      </Activity>
    </Activities>
  </User>
</Profile> 
```

当我在 SQL Server Management Studio 中执行此存储过程时，它会按预期运行，并从目标 xml 中删除指定的元素。但是，当我尝试从我的 C# 代码中调用它时，我收到以下错误：

> *System.Data.SqlClient.SqlException: XML 解析: 第 1 行，字符 143，非法名称字符\r\n*

我从我的 C# 代码中调用它，如下所示：

```
public Boolean DeleteServiceFromServerProfile(int profileID, String userID, String activityName)
{
            try
            {
                SqlCommand com = odbchelper.SQLConnection.CreateCommand();
                com.CommandText = "spDeleteActivityFromUserProfile";

                /*add command parameters*/
                SqlParameter paramProfileID = new SqlParameter("@profile_id", profileID);
                com.Parameters.Add(paramProfileID);

                SqlParameter paramUserID = new SqlParameter("@user_id", userID);
                com.Parameters.Add(paramuserID);

                SqlParameter paramActivityName = new SqlParameter("@activity_name", activityName);
                com.Parameters.Add(paramActivityName);

                // execute query
                com.ExecuteNonQuery();

                return true;
            }
            catch(Exception ex)
            {
                sLastError = ex.ToString();
            }

            return false;
        } 
```

我不确定`\r\n`（这是一个系统换行符）是如何被注入到命令中的。有没有一种方法可以检查它并将其从 C# 中的命令或存储过程本身的参数中删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:48:06.570

问题是因为我没有设置 SqlCommand 的命令类型。我添加了这一行并解决了问题：

com.CommandType = CommandType.StoredProcedure;

# git - 是否可以注释“git diff”？

> ID：13252186
> 
> 赞同：34
> 
> 时间：2012-11-06T13:35:48.293
> 
> 标签：git, version-control

我试图总结代码库的“旧”和“新”状态之间的区别。

*   我可以只做“git log”，但遗憾的是提交消息并不总是足够的。
*   我可以做“git diff”，但我希望看到对我所看到的差异的一些解释，或者至少提交哈希以备后用
*   我可以对更改的文件执行“git diff --stat”然后“git annotate”，但我不知道如何要求注释仅显示自特定提交以来的更改。

理想情况下，我想获得“git diff”的输出，其中所有“+”和“-”行都将使用有关上次引入这些更改的提交的信息进行注释；理想情况下，采用 git pretty 格式（例如哈希、作者和日期）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:50:09.610

你可以写一个小脚本来做类似的事情

```
git blame before > before
git blame after > after
diff -u before after 
```

:)

见`man 1 git`回复：`GIT_EXTERNAL_DIFF`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-11T11:28:07.733

[git-diff-blame](https://github.com/dmnd/git-diff-blame)似乎相关。

> 在作者和提交等责备信息旁边显示差异

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T14:07:19.147

请注意，您可以要求[`git blame`](http://git-scm.com/docs/git-blame)：

*   从某个提交进行注释请参阅“ [Git 责备 - 先前的提交？](https://stackoverflow.com/questions/5098256/git-blame-prior-commits) ”：`git blame -c fe25b6d^ -- src/options.cpp`
*   或从某个日期注释：
    `git blame -c --since=3.weeks -- foo`

注意之二：我更喜欢`git blame -c`git [annotate](http://git-scm.com/docs/git-annotate.html)：

> 此命令与此命令的唯一区别在于`git-blame`它们使用的输出格式略有不同，并且此命令的存在只是为了向后兼容以支持现有脚本，并为来自其他 SCM 系统的人们提供更熟悉的命令名称。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-08T09:01:21.397

我认为这目前不容易。但是，如果您想查看包含责备信息的文件提交差异的上下文，您可以执行以下操作：

```
$ sha1=$(git rev-parse --short HEAD); git blame $sha1 -- filename |grep -C5 --color ^$sha1 
```

`git blame`将照常注释文件，并`grep`为该提交中引入的每个更改显示五行上下文。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-26T16:18:18.300

我研究了一个工具（基于python）来做到这一点......甚至计算删除的行做一些*接近*反向注释的事情（反向注释并不是完全需要的，因为它会显示行的最后修订*present*，它实际上不会指向删除该行的修订版，因此实际上需要更多分析才能弄清楚）。我希望它适合您的需求

[https://github.com/eantoranz/difflame](https://github.com/eantoranz/difflame)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-06T14:12:21.173

我不知道是否有一种简单的方法可以获得带注释的`git diff`结果（比如“被指责的差异”）。

您可以使用`--full-diff`选项`git log -p`来获取提交消息 + 差异。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-16T13:52:07.060

对于单个文件，我有同样的问题，我发现 Visual Studio Code (vscode) 很有帮助。

*   查看不同目录中的 2 个分支
*   在一个分支中打开一个文件
*   将 (ctrl-shift-p) 与另一个目录中的相同文件进行比较[![在此处输入图像描述](../Images/27fe291e429ab550a2af429d737224ad.png)](https://i.stack.imgur.com/uUzFt.png)
*   将鼠标悬停在差异的提交信息上[![在此处输入图像描述](../Images/b6c952001ee34017560f994112578ccc.png)](https://i.stack.imgur.com/bklFN.png)以查看额外的提交信息

# excel - 跨多个工作表的重复命名范围的总和？

> ID：13252191
> 
> 赞同：1
> 
> 时间：2012-11-06T13:35:55.567
> 
> 标签：excel

我的 excel 文档中有 X 个工作表。在所有工作表上，都有一个命名范围：

> 总支持成本

在主表上，我该怎么做：

```
Total value of all TotalSupportCost across every worksheet 
```

这样，每当复制一张工作表时，总数将动态增加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:58:37.003

不幸的是，您不能使用类似 '=SUM('Sheet1:Sheet3'!testname)' 之类的东西，尽管当您按住 shift 键并选择所有工作表时，Excel 本身会给出它...

您可以在有限范围内使用的工作表功能是，`INDIRECT()`但是您仍然无法了解工作簿中工作表的所有工作表名称。

这使您不得不使用 VBA。在 VBA 中，您实际上可以遍历所有工作表并检索（和总结）某个单元格或命名范围的所有值。当您创建此函数时`Public`，您将能够像调用工作表函数一样调用它！

# c++ - 模板继承和成员访问

> ID：13252192
> 
> 赞同：1
> 
> 时间：2012-11-06T13:35:56.410
> 
> 标签：c++, templates, inheritance, scope

我有以下简单的代码：

```
template <typename T>
struct base
{
  std::vector<T> x;
};

template <typename T>
struct derived : base<T>
{
  void print()
    {
      using base<T>::x;     // error: base<T> is not a namespace
      std::cout << x << std::endl;
    }
}; 
```

当我编译代码（使用 GCC-4.7.2）时，我得到了您在上面的评论中看到的错误。

我在这里读到： http : [//gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Name-lookup.html#Name-lookup](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Name-lookup.html#Name-lookup)

```
using base<T>::x 
```

必须包含在基类的范围内。有什么想法有什么问题吗？先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T13:42:01.170

将`using`声明放在类定义中，而不是函数体中：

```
template <typename T>
struct derived : base<T>
{
    using base<T>::x;     // !!

    void print()
    {
        std::cout << x << std::endl;
    }
}; 
```

（当然，*您*有责任确保您的 确实有`operator<<`过载`std::vector`，例如使用[漂亮的打印机](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T13:41:44.037

`x`如果您明确表示它是成员，您也可以使其工作：

```
template <typename T>
struct base
{
  std::vector<T> x;
  base() : x(1) {}
};

template <typename T>
struct derived : base<T>
{
  void print()
    {
      std::cout << this->x[0] << std::endl;
    }
};

int main()
{
    derived<int> d;
    d.print();
} 
```

# wcf - WCF 服务将某些功能公开为 REST

> ID：13252198
> 
> 赞同：1
> 
> 时间：2012-11-06T13:36:10.867
> 
> 标签：wcf, rest, soap, behavior, endpoint

我有一个包含大约 100 个函数的 WCF SOAP 服务。我只想将其中一些暴露给 REST 端点。难道只有一份合同就可以做到这一点吗？

我添加了一个休息行为和休息端点，如下所示：

```
<behaviors>
      <endpointBehaviors>
        <behavior name="RestBehavior">
          <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

<endpoint address="json" binding="webHttpBinding" behaviorConfiguration ="RestBehavior" contract="Test.IService" />
<endpoint address="" binding="customBinding" bindingConfiguration="BufferedHttpBinaryBusiness"
          bindingName="BufferedHttpBinaryBusiness" contract="Test.IService" /> 
```

`WebGet`并为我想在休息端点上公开的函数添加了属性：

```
<WebGet(BodyStyle:=WebMessageBodyStyle.Wrapped, RequestFormat:=WebMessageFormat.Json, ResponseFormat:=WebMessageFormat.Json, UriTemplate:="/IsRegistered?Id={Id}")>
    <ServiceModel.OperationContract()>
    Function IsRegistered(ByVal Id As String) As Boolean 
```

但我也有我不想公开为 REST 的其他功能。

```
<ServiceModel.OperationContract()> 
Function GetName(ByVal x As Long, ByVal y As String) As String
<ServiceModel.OperationContract()> 
Function GetId(ByVal name As String) As String 
```

我得到的错误是：

```
System.InvalidOperationException: Operation 'GetName' of contract 'IService' specifies multiple request body parameters to be serialized without any wrapper elements. At most one body parameter can be serialized without wrapper elements. Either remove the extra body parameters or set the BodyStyle property on the WebGetAttribute/WebInvokeAttribute to Wrapped.
   at System.ServiceModel.Description.WebHttpBehavior.TryGetNonMessageParameterType(MessageDescription message, OperationDescription declaringOperation, Boolean isRequest, Type& type)
   at System.ServiceModel.Description.WebHttpBehavior.ValidateBodyStyle(OperationDescription operation, Boolean request)
   at System.ServiceModel.Description.WebHttpBehavior.<>c__DisplayClass10.<>c__DisplayClass13.<GetRequestDispatchFormatter>b__d()
   at System.ServiceModel.Description.WebHttpBehavior.<>c__DisplayClass10.<GetRequestDispatchFormatter>b__c()
   at System.ServiceModel.Description.WebHttpBehavior.HideReplyMessage(OperationDescription operationDescription, Effect effect)
   at System.ServiceModel.Description.WebHttpBehavior.GetRequestDispatchFormatter(OperationDescription operationDescription, ServiceEndpoint endpoint)
   at System.ServiceModel.Description.WebHttpBehavior.ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
   at System.ServiceModel.Description.DispatcherBuilder.InitializeServiceHost(ServiceDescription description, ServiceHostBase serviceHost)
   at System.ServiceModel.ServiceHostBase.InitializeRuntime()
   at System.ServiceModel.ServiceHostBase.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at Microsoft.Tools.SvcHost.ServiceHostHelper.OpenService(ServiceInfo info) 
```

当我将 WebGet 属性添加到此函数时，另一个肥皂函数会发生相同的错误。似乎它需要我将 WebGet 属性应用于所有函数。换句话说，它要求我公开合约中的所有函数以公开给 REST 端点。但我只希望其中一些以 REST 形式出现。不可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:51:57.670

简而言之，没有。您必须有两个不同的合同才能让 SOAP 和 REST 一起工作。不过，您可以在同一个配置中添加两个端点。好消息是您只需要在单独的接口/合同中定义 REST 操作，并让您的服务也从该接口继承，您不必更改代码。

下面的文章是一个很好的解释，以及在您的服务中实现这两者的方法。我在自己编写的两个服务中使用了这个作为示例。

[如何在同一个 WCF 服务上同时启用 REST 和 SOAP](http://debugmode.net/2011/12/22/how-to-enable-rest-and-soap-both-on-the-same-wcf-service/)

# networking - 向 100Base-T 设备发送数据时，1000Base-T 服务器网卡速度减慢至 100Base-T

> ID：13252199
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:36:11.743
> 
> 标签：networking, ubuntu

我正在进行实验以探索数据传输如何受到接收器网络速度的影响。这是我的设置，

我有一个 Ubuntu 服务器**A**连接到具有 2 个其他客户端**（B 和 C）**的千兆交换机。所有机器都安装了千兆网卡

当客户端**AB**以 1000mbps 运行时，客户端**C**通过 ethtool 使用以下命令配置为以 100Mbps 运行

> ethtool -s eth0 速度 100 双工满

通过这种设置，我尝试通过 SCP 同时从**A**向客户端**B**和**C发送一个 500MB 的文件。**

我预计**A**和**C**之间的数据传输速率为 100mbps，**A**和**B**之间的数据传输速率为 1000mbps。

然而实际上，**A**到**B**和**C**的传输速率已经下降到 100mbps。

我的问题是：这种行为是否可以预期？如果是这样，有没有办法以不同的网络速度同时将数据从**A**发送到**B**和**C ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:47:50.490

我相信这是一些网络硬件制造商可能会或可能不会明智地选择实施的边界条件之一。很大程度上取决于交换机模式、每端口缓冲区大小和背板速度，以及 nic、系统总线和 CPU 速度等主机指标。

SCP 需要加密/解密，因此主机系统总线、网卡总线和 CPU 容量都是因素。如果接收 PC 跟不上流量，它会向交换机发送源抑制流量控制消息，这会减慢到该端口的输出，这可能会导致交换机缓冲区填满，并可能导致交换机中继source-quench 向发送系统发送消息，指示它放慢速度。源淬火发生在第 2 层，因此两种流之间几乎没有差异；它必须减慢他们俩的速度。发送主机的端口缓冲区也可能已满，这意味着数据只能以发送到较慢目的地的速率发送到其中。

最后，这一切都取决于您的设备等级。如果您通过光纤通道将机架服务器连接到企业级交换机，然后连接到较小的分布交换机，那么我不会想到这个问题。如果您使用的是 3 台旧电脑，它们通过破旧的 cat5e 连接到一对 100 美元的 netgear 交换机，那么我完全可以期待它。

# c# - 使用字符串的动态 IQueryable 订单

> ID：13252206
> 
> 赞同：4
> 
> 时间：2012-11-06T13:36:33.673
> 
> 标签：c#, .net, dynamic, expression, iqueryable

> **可能重复：**
> [动态 LINQ OrderBy](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)

我正在尝试为 Iqueryable 创建一个动态排序。
所以下面你可以看到我正在关注我在stackoverflow中看到的一些示例。

```
 var query = dalSession.Query<T>();
            var res = (from x in query orderby Extensions.Sort<T>(query, "FirstName") select x).Skip((paging.CurrentPageRecord)).Take(paging.PageSize);

public static class Extensions
{
    public static IQueryable<T> Sort<T>(this IQueryable<T> query,
                                             string sortField)
    {
        return query.OrderByDescending(s => s.GetType()
                                             .GetProperty(sortField));

    }
} 
```

这是我得到的例外：

> System.Linq.IQueryable `1[Partners.BusinessObjects.Affiliate] Sort[Affiliate](System.Linq.IQueryable`1[Partners.BusinessObjects.Affiliate]，System.String)

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NotSupportedException: System.Linq.IQueryable`1[Partners.BusinessObjects.Affiliate] Sort[Affiliate](System.Linq.IQueryable`1[Partners.BusinessObjects.Affiliate], System.String) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:57:01.863

问题在这里： -

```
s => s.GetType().GetProperty(sortField) 
```

当您尝试访问 IQueryable 的结果集时，它会被转换为 SQL，并且查询会针对您的数据库运行（而不是在内存中运行）。问题是很明显你的数据库对你的类型一无所知，不能对它们调用任何方法，当然也不能对它们执行任何反射。

您需要构建自己的表达式树，它可以被翻译成 SQL。表达式 API 非常复杂，如果您想真正了解它，您需要阅读大量内容。[这是使用表达式 API 为您创建动态查询的一个很好的起点](http://www.digitallycreated.net/Blog/37/dynamic-queries-in-entity-framework-using-expression-trees)。

谢天谢地，您的具体案例相当简单，并且在[此处](http://www.digitallycreated.net/Blog/37/dynamic-queries-in-entity-framework-using-expression-trees)、[此处](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)和[此处](https://stackoverflow.com/questions/557819/strongly-typed-dynamic-linq-sorting/2794039#2794039)都有可用的示例，但我*确实*建议您阅读它以了解发生了什么。如果您只是复制粘贴，那么您或其他人最终将不得不维护它并度过一段非常难过的时光。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T14:14:47.950

Iain 是对的，您的 iqueryable 仅在真正需要时才开始提取数据。您可以通过一个简单的技巧 long dummy = query.Count(); 来强制加载。这不是完整的解决方案，您希望避免构建查询树的复杂性，因此如果集合不是非常大，只需将其转换为某种可排序的类型。

# javascript - DOMException 在 Chrome 中有堆栈，但在 Firefox 中没有

> ID：13252209
> 
> 赞同：1
> 
> 时间：2012-11-06T13:36:44.610
> 
> 标签：javascript, firefox, dom, stack, stack-trace

我正在尝试在 JavaScript 中生成堆栈跟踪。我有一个在 Chrome 中运行良好的实现，但在 Firefox 中存在一个问题：像 DOMExceptions 这样的本机异常没有`.stack`属性。

```
<div id="test"></div>
<script type="text/javascript">
try {
    var range = document.createRange();
    range.setStart(document.getElementById("test"), -1); // throws Exception
} catch (e) {
    console.log(e.stack);
}
</script> 
```

这将`Error: Index or size was negative, or greater than the allowed value. at http://test/test.html:5:8`在 Chrome 中给出。

但是在 Firefox 中我得到了`undefined`- 可悲的 fais **:(**

我知道[Eriwen 的 stacktrace 脚本](http://www.eriwen.com/javascript/js-stack-trace/)和[stracktracejs](http://stacktracejs.com/)，我的实现受到了它的*启发*。我会考虑使用`caller.callee`后备，但我宁愿不使用，因为我无法获取文件和行号。

**你知道更好的解决方案吗？**

* * *

我可以将可疑调用包装在 try-catch 语句中，但在得到实际错误之前我不知道调用是否可疑，然后我将修复代码，使其永远不会再次抛出。

我可以捕获异常并重新抛出，`new Error(e.message)`但是我也丢失了堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:36:00.497

我试过`e.location`了，但这会导致[Firefox 中的一个已知错误](https://bugzilla.mozilla.org/show_bug.cgi?id=436953)。`Error: Permission denied for <file://> to create wrapper for object of class UnnamedClass`.

我*可以*访问`e.filename`和`e.lineNumber`. 这是我现在要使用的解决方案。

# android - Logcat 向下滚动到底部

> ID：13252213
> 
> 赞同：2
> 
> 时间：2012-11-06T13:37:03.337
> 
> 标签：android, eclipse

我试图穿过 log-cat ，但是当我向上滚动时-logcat 立即向下滚动到最后，这是一个奇怪的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:39:01.020

logcat 显示屏的右上角有一个按钮。它看起来像一个带下划线的向下箭头。当您将鼠标悬停在它上面时，工具提示会显示为“Scroll Lock”。这将锁定显示滚动。当您希望再次更新 logcat 时，请记住再次单击它。

# html - 单击时更改CSS中的背景图像

> ID：13252215
> 
> 赞同：0
> 
> 时间：2012-11-06T13:37:04.203
> 
> 标签：html, css, image

**请有人可以告诉我如何执行以下操作**

```
.logo {
display: block;
text-indent: -9999px;
text-transform: capitalize;
background: url(../images/menu.png) no-repeat;
height: 120px;
} 
```

更改图像，以便在单击时

```
background: url(../images/menu_open.png) no-repeat; 
```

**用于此的 HTML 是**

```
<div class="sidebar">
<a href="#" onclick="return showOrHide('menulink');"><div class="logo">TEST IMAGE</div></a>
<ul id="menulink"> 
```

当前单击图标时，菜单会打开和关闭，

[在http://carbonyzed.co.uk/menu/2/index.html](http://carbonyzed.co.uk/menu/2/css/style.css)查看完整代码 [http://carbonyzed.co.uk/menu/2/css/style.css](http://carbonyzed.co.uk/menu/2/index.html)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:39:30.207

```
$(".logo").click(function() {
  $(this).css('background-image', 'url(../images/menu_open.png)');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:54:52.907

为了获得最佳用户体验，请考虑使用精灵，并在点击时更改类，而不是更改样式属性。所以想象一下你在一个精灵中有两个图像，名为 menu_sprite.png

图像高 240 像素，徽标宽度。默认图像在左上角，“打开”图像在正下方。

CSS

```
.logo{
  background-image: url(../images/menu_sprite.png) 0 0 no-repeat;
}

.logo.open{
  background-position: 0 -120px;
} 
```

jQuery

```
$('.logo').click(function(){ $(this).toggleClass('open'); }); 
```

此方法可让您避免出现没有图像的瞬间，而无需使用预加载器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:42:34.913

这应该工作

```
<a href="#" onclick="return ShowOrHide('menulink'); document.getElementById('id').style.background = 'url(img.img) no-repeat';" />; 
```

# android - 是否可以在android手机中显示泰卢固语文本

> ID：13252218
> 
> 赞同：1
> 
> 时间：2012-11-06T13:37:16.313
> 
> 标签：android, textview, android-fonts

实际上我有问题在 android 手机中显示泰卢固语文本。我通过 json 解析从服务器获取泰卢固语文本，我在 logcat 中看到文本

11-06 18:25:00.807: I/System.out(668):

{

id=c200,

电子邮件=అశ్విని@అశ్విని.అశ్విని,

手机=అశ్విని,

name=అశ్విని</p>

}

但是当我使用像 Typeface tf1 = Typeface.createFromAsset(getBaseContext().getAssets(),"fonts/CHILLER.ttf"); 这样的 ttf 文件附加到 textview 时 它显示矩形框，请您给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:34:56.853

您需要找到一个字体文件：

*   有泰卢固字形，并且
*   您可以免费嵌入到应用程序中（或者是您已获得许可嵌入到应用程序中的应用程序）

此外，您可以删除`getBaseContext()`并简单地使用`getAssets()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:52:20.277

我能够在模拟器和移动设备中显示泰卢固语文本。这里我使用的是**NTR.ttf** 字体 UTF16/UTF-8。

# php - 如何在包含 html 的字符串中保留标签

> ID：13252219
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:37:18.107
> 
> 标签：php, string, tags, converter

我有以下代码：

```
<?php
     $result = '<test>hello</test>';
     echo $result; 
```

当我执行它时，我只收到

```
hello 
```

似乎是这样，当我试图给出它时，PHP 会删除字符串中的这些标签。如何在字符串中保留这些标签？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T13:38:19.820

您可以使用[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)php 函数：在您的情况下，

```
echo htmlentities($result); 
```

或者

```
echo htmlentities("<test>hello</test>"); 
```

更好的方法是

```
htmlspecialchars() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:40:28.410

我怀疑 php 会“删除”它们。很可能您正在浏览器中查看输出，而浏览器只是不显示它们。右键单击窗口并使用“显示源代码”查看全部内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T13:40:39.800

好吧，它被解释为它试图呈现的网站的一部分。查看您需要对它们进行编码的标签。

你的例子是：

```
<?php

$result = '&lt;test&gt;hello&lt;/test&gt;';
echo $result;

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T13:39:29.793

它只是呈现 HTML 的浏览器，因此“隐藏”了标签。

如果您还想查看标记，请将您的字符串包装到`<pre>`标签中：

```
<?php
echo '<pre>';

echo '<p>Hello, World!</p>';

echo '</pre>'; 
```

# xcode - 抑制：“#warning 是语言扩展”

> ID：13252220
> 
> 赞同：5
> 
> 时间：2012-11-06T13:37:19.927
> 
> 标签：xcode4.5, xcode, clang, c-preprocessor, warnings

在一个[xcode4.5](/questions/tagged/xcode4.5 "显示标记为“xcode4.5”的问题")项目中，我打开了`pedantic`警告。但这现在给了我一个关于使用的警告`#warning`：

> 词法预处理器问题
> #warning 是语言扩展

首先，我想知道为什么会发生这种情况以及如何阻止它（不删除#warning）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-21T08:34:47.627

trojanfoe 回答了为什么会发出问题 (+1)。

发出警告消息的更便携和语言兼容的方式是：

```
#pragma message("YOUR WARNING HERE") 
```

Clang 将发出一个警告（特别是您在消息中写的那个——而不是迂腐的那个），它出现在 Xcode 的问题中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T14:12:37.303

生成它的原因是因为它`#warning`是对 ISO 标准的扩展，这就是它的意义`-pedantic`所在。

看起来只有 a`#pragma`会关闭它，因为没有`-Wno-xxx`出现可用于语言扩展的标志。

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-pedantic"

#warning blah blah blah

#pragma clang diagnostic pop 
```

# jqgrid - jqgrid中的外部过滤器

> ID：13252221
> 
> 赞同：0
> 
> 时间：2012-11-06T13:37:20.560
> 
> 标签：jqgrid, filter

我想使用外部过滤器来过滤 jqgrid 数据。就我而言，使用内置过滤器或搜索框会有点奇怪。我有一个应用程序，其中我将有一个表单，它将接受输入并相应地过滤 jgrid 数据。我已经实现了代码，它成功地给了我过滤的数据，但在 jqgrid 中没有。我们在定义 jqgrid 时指定 URL，这里我有另一个用于提交过滤器表单的 URL。这里jqgrid中过滤数据和显示数据的URL是不同的。那么，如何在 jqgrid 中显示过滤后的数据。我正在用 java Hibernate 编码。

这是我的过滤器对话框代码：{

```
 <form name="t_filter_form" id="t_filter_form">

              <table cellspacing="15">
                  <tr>
                <td width="50%"><label><input type="radio" value="Current_Month" id="t_filter_current_Month" checked="checked" name="filter_type" />Current Month</label></td>
            </tr>
    <tr>
                <td width="50%"><label><input type="radio" value="Yearly" id="t_filter_yearly"  name="filter_type" />Yearly</label></td>
                </tr>
            <tr>
                <td align="right"><label>Enter Year:</label></td>
                <td><input type="text" name="year" id="t_filter_year"/></td>
            </tr>
            <tr>
               <td width="50%"><label><input type="radio" value="Monthly" id="t_filter_monthly" name="filter_type" />Monthly</label></td>
               </tr>
        <tr>
            <td align="right" ><label>Select Month:</label></td> 
            <td><select name="month" id="month">             
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select></td>
            </tr>
        <tr>
            <td width="50%"><label><input type="radio" value="Range" id="t_filter_range" name="filter_type" />Range</label></td>
        </tr>
        <tr><td align="right">
            <label for="from">From</label></td>
            <td><input type="text" id="from" name="from"/></td>
        </tr>
        <tr>
            <td align="right"><label for="to">To</label></td>
            <td><input type="text" id="to" name="to"/></td>
        </tr>
            <tr>
                <td width="50%"><label><input type="radio" value="category" id="t_filter_category" name="filter_type"  />Category</label></td> 
            </tr>
                  <tr>
            <td align="right" ><label>Enter Category:</label></td><td><input type="text" name="t_filter_category" id="t_filter_category_txt"/></td>
            </tr>
                  <tr><td>&nbsp;</td>
                      <td><input type="button" name="filter_transaction" id="filter_transaction" value="Filter transaction" onclick="filter();" />
                        <input type="button" onclick="return close_dialog();" id="cancel_filter" value="Cancel" /></td>
                    </tr>
            </table> </form>

          </div> 
```

现在，当用户单击“过滤事务”按钮时，我希望重新加载网格。在这里，如果用户选择每月过滤网格，那么它将以月份作为输入，并相应地重新加载网格

这是我的 servlet 代码：

```
if(request.getParameter("action").equals("filter")){
           if(login!=null)
            {
                String query=null;
                if("Current_Month".equals(request.getParameter("filter_type")))
                {
                    System.out.println("Current month");
                    int month=cal.get(Calendar.MONTH)+1;
                    int year=cal.get(Calendar.YEAR);
                    System.out.println("Current month is: " +month);
                    query = "from TransactionDetails where  register_id="+hb_id+" and transaction_date>='"+year+"-"+month+"-1' and transaction_date<='"+year+"-"+month+"-31'" ;
                    System.out.println("Current month query is: " +query);

                }
                if("Yearly".equals(request.getParameter("filter_type")))
                {
                    System.out.println("Yearly");
                    int year=Integer.parseInt(request.getParameter("year"));
                    System.out.println("Entered year is: " +year);
                    query = "from TransactionDetails where  register_id="+hb_id+" and transaction_date>='"+year+"-1-1' and transaction_date<='"+year+"-12-31'" ;
                    System.out.println("Yearly query is: " +query);

                }
                if("Monthly".equals(request.getParameter("filter_type")))
                {
                    System.out.println("Monthly");
                    int month=Integer.parseInt(request.getParameter("month"));
                    System.out.println("Entered month is: " +month);
                    int year=cal.get(Calendar.YEAR);
                    query = "from TransactionDetails where  register_id="+hb_id+" and transaction_date>='"+year+"-"+month+"-1' and transaction_date<='"+year+"-"+month+"-31'" ;
                    System.out.println("Current month query is: " +query);
                }
                if("Range".equals(request.getParameter("filter_type")))
                {
                    System.out.println("Range");
                    String from_date=request.getParameter("from");
                    String[] date = from_date.split("/");
                    from_date = date[2]+"-"+date[1]+"-"+date[0];
                    String to_date=request.getParameter("to");
                    date = to_date.split("/");
                    to_date = date[2]+"-"+date[1]+"-"+date[0];
                    System.out.println("Entered range is from " +from_date+" to "+to_date);
                    query = "from TransactionDetails where  register_id="+hb_id+" and transaction_date>='"+from_date+"' and transaction_date<='"+to_date+"'" ;
                    System.out.println("Current month query is: " +query);

                }
                if("category".equals(request.getParameter("filter_type")))
                {
                    System.out.println("Category");
                    String  category =request.getParameter("t_filter_category");
                    System.out.println("Entered category is: "+category);
                    query = "from TransactionDetails where  register_id="+hb_id+" and category='"+category+"'" ;
                    System.out.println("Current month query is: " +query);
                } 
```

我通过数据库获得正确的输出..但我不知道如何绑定这些数据或说在我的 jgrid 中获取这些数据，这是我的网格

```
function fillGridOnEvent(){
            $("#Transaction_grid").html("<table id=\"transaction_list\"></table><div id=\"page\"></div>");
           jQuery("#transaction_list").jqGrid({
                url:'http://localhost:8084/HomeBudget/TransactionController?action=show&rid=<%=hb_id%>',
                datatype: "xml",
                height: 300,
                colNames:['ID','Date','Type','Category','Amount','Comments'],
                colModel:[
                    {name:'transaction_id',index:'transaction_id', width:20,sortable:false},
                    {name:'date',index:'date', width:100,sortable:false},
                    {name:'type',index:'type', width:100,sortable:false},
                    {name:'category',index:'category', width:150,sortable:false},
                    {name:'amount',index:'amount', width:100,sortable:false, formatter: 'number'},
                    {name:'comments',index:'comments', width:210,sortable:false}
                ],
                paging: true,
                rowNum:15,
                rowList:[15,30,45],
                pager: $("#page"),
                loadonce:true,
                multiselect: false,
                gridview:true,
                viewrecords:true,
                caption: "Transaction"
              }).navGrid('#page',{edit:false,add:false,del:false},{multipleSearch:true, multipleGroup:true, showQuery: true}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:15:22.110

我不确定我对你的理解是否正确。但是我的解决方案是（我有多年使用 jqGrid wizh Java 和 C# 的经验）

1.  定义为 jqGrid 数据返回 json 的 servlet/handler
2.  参数化 servlet（实现过滤器）
3.  设置新的 jqGrid 参数（从表单字段中读取参数）

    ```
    $("#" + table).setGridParam({
        postData:queryString
    }); 
    ```

4.  重新加载 jqGrid

> $("#" + table).jqGrid().trigger("reloadGrid");

# cloudbees - 如何安装未列出的 jenkins 插件？

> ID：13252224
> 
> 赞同：3
> 
> 时间：2012-11-06T13:37:47.200
> 
> 标签：cloudbees

我想使用可用插件列表中未列出的插件。我知道如何在本地 Jenkins 中做到这一点，但在 cloudbees 中却不行。

[http://pocketsoap.com/weblog/2011/02/1849.html](http://pocketsoap.com/weblog/2011/02/1849.html)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:37:47.200

免费和基本订阅不会让您获得 jenkins 插件，而是您在更新中心看到的[“基本”列表。](http://wiki.cloudbees.com/bin/view/DEV/EssentialsPlugins)对于 Pro 和 Enterprise 订阅，如果更新中心尚未提供此类插件（仅提供预先测试的插件），您可以要求支持人员安装此类插件。

# typescript - 在模块内调用全局变量

> ID：13252225
> 
> 赞同：271
> 
> 时间：2012-11-06T13:37:47.917
> 
> 标签：typescript

我有一个名为的打字稿文件`Projects.ts`，我想引用在名为`bootbox.js`.

我想访问`bootbox`从 TypeScript 类中调用的变量。

可能吗？

* * *

## 回答 #1

> 赞同：438
> 
> 时间：2012-11-06T14:14:36.080

您需要告诉编译器它已被声明：

```
declare var bootbox: any; 
```

如果您有更好的类型信息，您也可以添加它，代替`any`.

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2017-06-29T17:46:50.337

对于那些还不知道的人，您必须像这样将`declare`声明放在您的外面：`class`

```
declare var Chart: any;

@Component({
  selector: 'my-component',
  templateUrl: './my-component.component.html',
  styleUrls: ['./my-component.component.scss']
})

export class MyComponent {
    //you can use Chart now and compiler wont complain
    private color = Chart.color;
} 
```

在`TypeScript`您想要定义可能不是源自`TypeScript`文件的变量的地方使用 declare 关键字。

就像你告诉编译器，我知道这个变量在运行时会有一个值，所以不要抛出编译错误。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-04-04T05:21:56.320

如果它是您引用但从不变异的东西，请使用`const`：

```
declare const bootbox; 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-01-10T15:20:31.857

Sohnee 解决方案更清洁，但您也可以尝试

```
window["bootbox"] 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-09-18T17:49:08.793

如果您想在整个项目中引用此变量，请在某处创建`d.ts`文件，例如`globals.d.ts`. 用你的全局变量声明填充它，例如：

```
declare const BootBox: 'boot' | 'box'; 
```

现在你可以在项目的任何地方引用它，就像这样：

```
const bootbox = BootBox; 
```

这是一个[例子](https://stackblitz.com/edit/angular-dwcfd5)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-28T01:29:20.740

```
// global.d.ts
declare global {
  namespace NodeJS {
    interface Global {
      bootbox: string; // Specify ur type here,use `string` for brief
    }
  }
}

// somewhere else
const bootbox = global.bootbox
// somewhere else
global.bootbox = 'boom' 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2018-03-21T12:23:17.543

下载[引导箱类型](https://www.nuget.org/packages/bootbox.TypeScript.DefinitelyTyped/)

然后在 .ts 文件中添加对它的引用。

# xaml - 从另一个 xaml 的代码隐藏中引用 xaml 对象？

> ID：13252228
> 
> 赞同：0
> 
> 时间：2012-11-06T13:38:02.177
> 
> 标签：xaml, silverlight-4.0, instance, code-behind, object-reference

我必须根据“包含”我正在处理的 xaml 的网格的 ActualHeight 设置动态数据分页器 PageSize。我需要从包含的 XAML 代码隐藏中访问此网格，并且我不断收到“需要对象引用”错误。

以下是在“父”Main.xaml 文件中定义网格的方式：

```
<Grid x:Name="GridContent" MaxHeight="500" MinHeight="400" Grid.ColumnSpan="1" ScrollViewer.VerticalScrollBarVisibility="Auto" /> 
```

这是我尝试在 Page.xaml.cs 中访问它的方式：

```
Grid gridContent = baseProject.Main.GridContent; 
```

这将返回有关 GridContent 的“需要对象引用”错误。

我还尝试在 Main.xaml.cs 中为 GridContent 创建一个公共访问器，但是当我从 Page.xaml.cs 调用它时，我仍然收到“需要对象引用”错误，这次是关于“baseProject.Main.gridContentAccessor.get ”。

我错过了什么？我怎么可能得到这个网格的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:44:30.120

看看 VisualTreeHelper 函数。尝试调用 VisualTreeHelper.GetParent(this) 的递归函数，直到找到所需的对象。

# node.js - Node.js 和 https 配置

> ID：13252230
> 
> 赞同：0
> 
> 时间：2012-11-06T13:38:07.737
> 
> 标签：node.js, https, express

我有一个使用 node.js 运行的简单应用程序。下面是我的 server.js：

```
var myApp = require('./lib/myapp')
new myApp({
port: 8000
 }); 
```

我可以在[http://myserver.com:8000访问应用程序](http://myserver.com:8000)

我想设置它，所以我可以使用[https://myserver.com访问它](https://myserver.com)

我尝试了各种方法来回答这里提出的问题，但我无法让它发挥作用。我认为初始化应用程序的方式是原因，但我不确定。

我知道我可以把它放在 Apache 后面，但我想用 node 来做。

如果有人可以为我修改这个 server.js，那将是一个很大的帮助！

谢谢

诺曼 A.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:41:47.757

`https`建议您想在安全层（端口 443）上运行它，最好的办法是将其放在 apache 或更好的后面`nginx`，让真正的 Web 服务器管理 ssl 证书等，而您的 node.js 专注于应用程序业务逻辑

如果你想通过 node.js 来做，[请看这里](https://stackoverflow.com/questions/5998694/how-to-set-up-https-server-in-express-js-node-js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:59:17.363

myApp 是`express`/`connect`应用程序吗？我不喜欢`new`您创建的带有关键字的奇怪构造函数，我们需要查看它的内容以提供帮助。

1.  首先让它在“特权”端口上运行，即将你的更改`8000`为`80`，但保留`http`服务器。
2.  一旦你弄清楚如何运行具有正确权限的服务器，它应该很容易换成`http`443`https`和 80。

但是，由于您的客户会尝试先到达`http`，因此您需要将他们重定向到`https`您网站的版本。如果您以“快速方式”执行此操作，则可以设置相同的应用程序并简单地使其同时使用 http 和 https 服务器进行侦听。然后添加一个中间件将所有`http`请求重定向到`https`，你就完成了。看看这个[How to force SSL / https in Express.js](https://stackoverflow.com/questions/8605720/how-to-force-ssl-https-in-express-js)。

编辑：这个答案有一个更干净的双服务器/单应用程序设置，但不包括任何关于转发请求的内容：[Listen on HTTP and HTTPS for a single express app](https://stackoverflow.com/questions/8355473/listen-on-http-and-https-for-a-single-express-app)

理想的设置将 express/connect 应用程序对象导出为`main.js`. 单独`runner.js`的只需要应用程序并将其传递到具有正确选项的两个服务器（1 个 http 和 1 个 https）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:17:21.413

感谢大家对这个问题的贡献。我真的很感激所有的指点！

特别提到 JohnnyHK，他的建议让我走上了正轨。我能够使用 node-http-proxy 解决我的问题。简单有效！下面是我的 server.js 现在的样子：

```
var MyApp = require('./lib/app');
var fs = require('fs'),
    http = require('http'),
    https = require('https'),
    httpProxy = require('http-proxy');

var options = {
  https: {
    key: fs.readFileSync('certs/server.key', 'utf8'),
    cert: fs.readFileSync('certs/server.crt', 'utf8'),
    ca: fs.readFileSync('certs/ca.crt', 'utf8')
  },
  target: {
    https: true // This could also be an Object with key and cert properties
  }
};

var app = new MyApp({
    port: 8080
  });  

var proxy = new httpProxy.HttpProxy({
  target: {
    host: 'localhost', 
    port: 8080
  }
});
https.createServer(options.https, function (req, res) {
  proxy.proxyRequest(req, res)
}).listen(443); 
```

再次感谢大家！

——诺曼 A。

# r - 网页抓取需要点击鼠标？

> ID：13252231
> 
> 赞同：5
> 
> 时间：2012-11-06T13:38:13.933
> 
> 标签：r, web-scraping

我正在尝试（在 R 中）从以下位置抓取一些数据：

[http://www.soccerbase.com/matches/results.sd?date=2012-11-04](http://www.soccerbase.com/matches/results.sd?date=2012-11-04)

即，我想获取当您按下*i*按钮时出现在页面上的匹配详细信息。但是，单击按钮后出现的信息不包含在原始 html 代码中。我只能看到一条线（我希望包含数据）......

```
<span class="infoField"><a href="#" class="info finished" title="Show full match details"></a></span> 
```

...这几乎让我陷入了死胡同...有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:30:06.267

```
require(XML)
require(RCurl)
dataurl<-'http://www.soccerbase.com/matches/results.sd?date=2012-11-04'
sdata<-htmlParse(dataurl)
sid<-xpathSApply(sdata,'//*/tr/@id')
sid<-gsub('^tgc','',sid)
mUrl<-paste0('http://www.soccerbase.com/matches/additional_information.sd?id_game=',sid) 
```

上面的代码将获得附加数据所需的 url。但是，我会与该网站核实是否收集他们的数据。

# grails - 加快 Spring Security 中的过滤器检查

> ID：13252237
> 
> 赞同：0
> 
> 时间：2012-11-06T13:38:23.083
> 
> 标签：grails, spring-security

我有一个使用 Spring Security Core 插件的 Grails 2.1.1 项目。

我正在使用自定义过滤器对外部服务进行 POST 调用以验证凭据（类似于 CAS）。这需要时间，并且在加载我的 Web 应用程序的过程中，会进行数百次 POST 调用。

有没有办法我可以在一段时间内“缓存”凭据，以便不会为每个对受限内容的请求进行 POST 调用？

我考虑过在会话中设置一个变量，但似乎 Spring Security 会内置缓存这个请求。

换个角度来看，如果我将 Spring Security 与 CAS 服务集成，我将如何配置 Spring Security，以便在第一次调用受限资源后，它会绕过一段时间内对服务器的票证检查（4-8 小时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:13:24.193

只是为了结束这个问题。我最终将一些凭据保存到用户的会话中，并首先检查用户是否有有效的会话。如果是这样，我避免了对验证服务的额外昂贵调用。

# visual-studio-2012 - Typescript 不生成输出 JS 文件

> ID：13252240
> 
> 赞同：0
> 
> 时间：2012-11-06T13:38:36.450
> 
> 标签：visual-studio-2012, bing-maps, bing

我下载了 Bing Maps 7 Typescript 库，并且很想使用它。我该怎么做？

我正在使用 VS 2012 RC。我尝试了 TSC 行命令——没有输出。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:31:51.657

typescript 编译器需要一个 typescript 文件来编译。如果你从 vs 2012 模板创建一个打字稿项目，你应该有一个工作的欢迎应用程序。然后开始扩展它并构建您的应用程序。

# javascript - Javascript触发器选择开始

> ID：13252243
> 
> 赞同：6
> 
> 时间：2012-11-06T13:38:58.557
> 
> 标签：javascript, browser, triggers, selection

可以通过 javascript/jQuery触发选择**开始吗？**

在我看来，*鼠标文本选择*可以分为以下几个步骤：

> 1) 触发**mousedown**事件并开始选择
> 
> 2）触发**mousemove**并移动选择的“终点”
> 
> 3) 触发**mouseup**并停止选择

可以仅触发**第 1 步）**，即在 span 元素中的文本上... ...所以在那之后，移动鼠标光标的行为就像选择等待 mouseup？

或者**如何实现**以及**浏览器如何知道**选择开始？

**Rangy 库：**我知道这个用于创建自定义范围选择的 javascript 库。但在我看来，通过鼠标事件模拟自己的选择太复杂了。我只想告诉浏览器，我在*(span,offset 2)*开始选择，它应该在**步骤 2)**继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:26:05.400

您可以使用可选择元素和文档上的鼠标事件来控制何时开始和结束选择以及何时要测试选择等。

然后在选择过程中，您可以使用它`window.getSelection()`来获取有关当前选择的信息。

尝试这样的事情：

```
var m_MouseDown = false;

document.getElementById('selectMyContent').onmousedown = function (e) {
    m_MouseDown = true;
};

document.onmouseup = function (e) {
    m_MouseDown = false;
};

document.onmousemove = function(e) {
    if (m_MouseDown) {
        document.getElementById('showTextHere').innerHTML = getSelectionInfo();
    }        
}

function getSelectionInfo() {
    var selected = "";
    if (typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        if (sel.rangeCount) {
            for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                var range = sel.getRangeAt(i);

                var txt = document.createElement('div');
                txt.appendChild(range.cloneContents());
                selected = range.startContainer.parentNode.id + ':' + range.startOffset + '-' + range.endOffset + ' "' + txt.innerHTML + '"';
            }
        }
    }
    return selected;
} 
```

有关示例，请参见[http://jsfiddle.net/nY328/10/ 。](http://jsfiddle.net/nY328/10/)

# extjs - 如何在存储代理的配置中使用 api 属性 - CRUD 方法

> ID：13252248
> 
> 赞同：4
> 
> 时间：2012-11-06T13:39:11.783
> 
> 标签：extjs

谁能告诉我我们应该在哪里编写创建/更新等代码片段。我是在proxy的api属性下写的。如何验证输出。请指导我如何使用 store api。

我正在进行测试，所以请更清楚地让我理解和使用该功能

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T18:40:52.793

配置本身在文档中进行了[**描述。**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-api)但听起来你的语法是正确的。

您应该知道的第一件事是此配置仅适用于扩展代理`Ext.data.proxy.Server`。[**在此处**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Proxy)阅读“代理类型”部分。

通过在此配置中定义不同的 URL，您只是告诉商店将 ajax 请求发送到*何处以在您的服务器端执行不同的 CRUD 操作。*

例如，调用`store.load()`将向 URL 发送 ajax 请求，由`api.read`您来确保此 URL 正确返回数据。

内部`Ext.data.Store`跟踪对“脏”记录（创建、更新或销毁）执行的其他操作。基于此，它将向适当的`api`配置 URL 发送 ajax 请求。或者，如果您执行了不同类型的操作，例如创建和删除记录，它将发送多个 ajax 请求（每个 URL 一个）以及有关您创建或删除的记录的数据。

下面是一些示例代码来说明这一点（如果您填写自己的 URL 和 ，您也可以将其用于测试`data.model`）。该示例使用默认读取器/写入器，它将数据作为 JSON 发送到服务器（代理中有配置以指定不同的格式）。

```
var myStore = Ext.create('Ext.data.Store', {
    model: 'MyApp.model.SomeModel',
    proxy: {
        type: 'ajax',
        // without api defined ALL ajax calls will use the 'url' config
        url: '/some/url',
        api: {
            create: '/some/url/to/insert/records/in/db',
            read: '/some/url/to/select/records/from/db',
            update: '/some/url/to/update/records/in/db',
            destroy: '/some/url/to/delete/records/in/db'
        }
    }
}

// this calls the api.read URL
myStore.load(); 

// assuming we now have records, this will delete the first record 
// on the client side (it will error if there are not records)
myStore.remove(myStore.first());

// the store knows we deleted a record so this will call the api.destroy URL
myStore.sync();

// this updates the first record on the client side
myStore.first().set('some_field_name', 'a string value');

// now we are creating a record on the client side
myStore.add(Ext.create('MyApp.model.SomeModel'));

// the store knows we updated AND created a record so this will call the
// api.update URL AND the api.create URL
myStore.sync(); 
```

关于此的另外两个有用的信息：

1.  `batchActions` [**文档中**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Proxy-cfg-batchActions)有一个称为此处描述的代理配置。默认情况`true`下，这意味着当您向数据库发送请求时，某种类型的所有 CRUD 操作都会分组到一个数组中。例如，如果您删除了 4 条记录，您的 `api.destroy`URL 将不会收到 4 个 ajax 请求，它将收到 1 个带有 4 条记录数组的 ajax 请求。只要您将 URL 配置为处理数组，这有助于减少网络流量。您可以将此配置设置为`false`，商店将向`api.destroy`URL 发送 4 个请求。您还可以设置编写器的`allowSingle`配置（[**在此处描述**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.writer.Json-cfg-allowSingle)）以确保所有请求都作为数组发送，即使只有一条记录（这样您就可以将服务器端代码设置为始终处理数组）。

2.  `Ext.data.Store`设置为处理创建和更新操作的回调，您只需确保您的 URL 发送回一个。当您致电商店时`myStore.sync()`，商店将自动将客户端的记录替换为您在回调中发送的记录。这对于创建的记录很有用，因为您可以将正确的数据库 ID 与创建的记录一起发回，并使其在客户端可用，以后如果用户想要编辑或删除您有正确的数据库 ID 可以使用的记录。您还可以在服务器端进行其他处理，并将其他数据也发回，以便您拥有完整的记录（例如，我有时会发回创建用户 ID 和创建时间）。

# ajax - 带有 CODI 的 @Advanced 的 FacesConverter 中的 CDI @Inject 是否可以处理 AJAX 请求？

> ID：13252249
> 
> 赞同：0
> 
> 时间：2012-11-06T13:39:21.710
> 
> 标签：ajax, jsf-2, cdi, myfaces, codi

我们使用`FacesConverter`s 并用`CODI`'注释对它们进行`@Advanced`注释，以便能够使用`CDI`注入。这适用于正常请求。但是在`AJAX`请求时，注入的`CDI`bean 为空。和中的`FacesContext`参数

```
public Object getAsObject(FacesContext context, UIComponent component, String value) 
```

是`org.apache.myfaces.context.servlet.FacesContextImpl`代替`org.apache.myfaces.extensions.cdi.jsf2.impl.listener.request.CodiFacesContextWrapper`像正常请求一样。

有谁知道如何使注入在`FacesConverter`s 中与`AJAX`请求一起工作？谢谢。

# php - Mysql Connect错误：根本没有显示任何东西

> ID：13252250
> 
> 赞同：0
> 
> 时间：2012-11-06T13:39:27.813
> 
> 标签：php, mysql

`mysql_connect()`尽管不鼓励使用它，但我目前正在使用它。我的网络服务不支持`PDO`。我目前已将我的代码格式化为`PDO`，但现在我被迫将其更改为`mysяl_connect()`. 在这些更改之后，我现在收到一个页面错误并且没有任何显示。我包括一个`database_connect.php`与另一个页面一起工作的页面，而不是我的改编代码。我的代码中导致此错误的问题是什么？这是我的[页面](http://capstone.otiummusic.com/classes.php)

**代码**

```
include ('./snippets/db_connect.php');

      $query = ("SELECT  class_name, class_caption, class_credit_hours, class_description
                 FROM class                          
                 ");
      $query->execute();

     if ($query->execute()){

    $totalhours = 0;

    while ($row = mysql_fetch_assoc( $query )){  
        print "<b>" . $row['class_name'] . "</b><br>";
        print $row['class_caption'] . "<br>";
        print $row['class_description'] . "<br>";
        print $row ['class_credit_hours'] . "hrs. <br>";

        print "------------------------------<br />";
        $totalhours += $row['class_credit_hours']; 
    }

    print "<p>Total hours for Major: " . $totalhours . ".</p>";

    "<div> </div>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:42:02.997

`$query`只是一个字符串，所以没有`execute`方法。你从不打电话`mysql_query($query)`。所以没有结果集。

```
$sql = "SELECT  class_name, class_caption, class_credit_hours, class_description FROM class"
$result = mysql_query($sql);

if($result) {
  while ($row = mysql_fetch_assoc($result)){
     /// do stuff
  }
} 
```

此外，如果您的主机不支持 PDO，您应该切换，即使您不打算使用它。他们现在没有理由不支持它，它在 php 5.1 中已成为标准，如果不是当前的 5.3 稳定版，您的主机至少应该有 php 5.2.17 可用。

现在，如果您知道 PDO，您可能想尝试[`Mysqli`](http://php.net/manual/en/book.mysqli.php)而不是`ext/mysql`. 它更像 PDO 并支持准备好的陈述等等。你的主人至少应该有这个。如果他们不那么强调改变托管服务提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:44:29.097

你应该使用这个：

```
$query = "SELECT  class_name, class_caption, class_credit_hours, class_description FROM class";
$query = mysql_query($query);
if (!$query) {
    die("There is an error: " . mysql_error());
}
//continue your code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:44:44.033

正确的代码应该是：

```
include ('./snippets/db_connect.php');

      $query = ("SELECT  class_name, class_caption, class_credit_hours, class_description
                 FROM class                          
                 ");
      //execute query
      $result = mysql_query($query);

     if ($result){

    $totalhours = 0;

    while ($row = mysql_fetch_assoc( $result )){  
        print "<b>" . $row['class_name'] . "</b><br>";
        print $row['class_caption'] . "<br>";
        print $row['class_description'] . "<br>";
        print $row ['class_credit_hours'] . "hrs. <br>";

        print "------------------------------<br />";
        $totalhours += $row['class_credit_hours']; 
    }

    print "<p>Total hours for Major: " . $totalhours . ".</p>";

    "<div> </div>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:48:25.637

我真的不明白你是如何生成该代码的，但我认为你很困惑。看起来你混合了几种不同的方法。您还调用了 execute() 两次。如果您想使用 PDO，我认为您正在尝试拍摄这样的东西：

```
$query = "SELECT  class_name, class_caption, class_credit_hours, class_description FROM class";
$stmt = $dbh->prepare($query);
if ($stmt->execute()) {
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
        // Do you stuff with your $row
    }
} 
```

如果您尝试使用 mysql_* （已折旧且未消毒），我认为您正在尝试执行以下操作：

```
$query = "SELECT  class_name, class_caption, class_credit_hours, class_description FROM class";
$run = mysql_query($query);
if ($run) {
    while ($row = mysql_fetch_array(run)){  
        // Do your stuff with your $row
    }
} 
```

# android - Facebook 评论 api phonegap

> ID：13252259
> 
> 赞同：1
> 
> 时间：2012-11-06T13:40:09.083
> 
> 标签：android, facebook, cordova

有没有人成功地将 Facebook 评论 API (http://developers.facebook.com/docs/reference/plugins/comments/) 包含在他在 android 上的 phonegap 项目中？

我已经成功实现了 phonegap 的 facebook 插件（https://github.com/davejohnson/phonegap-plugin-facebook-connect），但它不包含任何评论功能。

我想在 android 上的 phonegap 项目中包含 facebook 评论功能。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-10T07:38:48.217

我的解决方法是将评论插件放在普通网页上，然后在 phonegap 中使用 iframe 来显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:29:12.883

Facebook 插件旨在用于具有公共 URL 的网站。在 Phonegap 应用程序中，您使用的是 HTML5 运行时，但“页面”作为应用程序内的文件在本地托管，并且没有用于关闭评论的 URL。

换句话说，这是不可能的，您应该考虑以编程方式使用 Graph API 的注释部分：[https ://developers.facebook.com/docs/reference/api/Comment/](https://developers.facebook.com/docs/reference/api/Comment/)

# magento - 属性集列的值无效（集不存在？）在magento导入中的行：11、18、19、24、25、26

> ID：13252262
> 
> 赞同：0
> 
> 时间：2012-11-06T13:40:27.577
> 
> 标签：magento, import, attributes, set

我正在导入产品，当我尝试导入时，我遇到了很多错误，我已经修复了所有内容并且文件对导入有效，在提交导入按钮后，这显示以下错误，我已经用谷歌搜索并搜索了很多我不能的网站找到与以下错误相关的任何答案。

属性集列的值无效（集不存在？）在行中：11、18、19、24、25、26

让我知道我需要在 attribute_set 中设置什么，我现在将默认值设置为值，请告知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:25:59.130

似乎您需要将这些行（11,18 等）上使用的属性集复制到新的 magento。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T06:27:54.073

我被同样的问题困扰了很长一段时间。这是您的第 3 列的 oslution，即 _attribute_set 必须为空。检查其他产品中该列的值是什么，并将其放在那里。它应该解决问题

如果您不确定，请转到目录 -> 属性 -> 管理属性集。检查属性名称并将其放在产品行的 _attribute_set 列中

# c# - Outlook 邮件复制方案

> ID：13252268
> 
> 赞同：0
> 
> 时间：2012-11-06T13:40:41.323
> 
> 标签：c#, outlook, smtp, pop3

我目前正在处理一个相当有趣的问题。一些背景故事：

**先决条件：**

客户不想支付 Exchange 维护费用，也没有。对于一家拥有 10 名员工的小公司来说，这相当多

我不能使用 IMAP 很遗憾

**目标**

想法是实现一些系统，例如您有 10 台计算机，每台计算机都有一个带有 2 个外发电子邮件地址的邮件客户端（2 个通用地址（又名 info@domain.com，sales@domain.com））个人地址不是在这种情况下很重要，但它们存在

***目标1：***

想法是，所有邮件客户端在 Outlook 中为他们从 2 个帐户接收传入邮件的 2 封邮件中的每封邮件都有子文件夹。

到目前为止，我计划只是阻止 Outlook 删除帐户设置中小于 4 个月的邮件。

***目标2：***

这个想法是所有邮件客户端都接收来自任何客户端的 2 个帐户发送的邮件

**到目前为止的想法**

在这里它变得有趣，因为没有我能想到的直接解决方案。到目前为止，我正在研究这个选项：

创建 2 个额外的邮件帐户（info_sent@domain.com 和 sales_sent@domain.com），然后创建一个 Outlook 加载项，当从 2 个帐户之一发送邮件时，该加载项将自动附加相应的已发送帐户作为密件抄送。然后我可以在 Outlook 中创建一个规则，将从 2 个已发送帐户收到的邮件移动到相应的发送子文件夹中。

我知道这可能不值得付出努力，但我只需要提出某种替代方案来交换。

**问题**

问题是过去是否有人做过类似的事情，或者是否有人能想到更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:48:15.377

给他们一个超过交换许可证成本的工作报价，并建议他们代替。

# arraylist - 数组中的下一个和索引超出范围

> ID：13252269
> 
> 赞同：0
> 
> 时间：2012-11-06T13:40:50.420
> 
> 标签：arraylist, indexing, next, bounds, out

检查“索引越界”的最佳实践和解决方案是什么以下解决方案有效，但感觉很hacky。有没有更好的选择？

```
public void nextPerson(int index){ //Index is the current location in the arraylist
    try{
        System.out.println(thePeople.get(index++));
    }
    catch (IndexOutOfBoundsException e){
        System.out.println("At the end");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:45:45.673

编辑：Java 是按值传递的。这意味着如果您将“索引”变量传递给函数，外部变量将不会受到函数内部执行的更改的影响。

所以你必须保持索引 var 类范围，如 List ...

```
public void nextPerson(){ 
    if (index>=0 && index<thePeople.size())
        System.out.println(thePeople.get(index++));
    } else {
        System.out.println("At the end");
    }
} 
```

或传递它并返回它

```
 public int nextPerson(int index){ 
        if (index>=0 && index<thePeople.size())
            System.out.println(thePeople.get(index++));
        } else {
            System.out.println("At the end");
        }
        return index;
    } 
```

上一个人也是如此，只需使用`index--`;

顺便说一句，如果你将索引保存在消费者类中，在这个对象之外，你可以获得整个列表并在消费者类中迭代它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:46:49.627

我通过使用局部变量来跟踪 Arraylist 索引发现了这一点。相反，我可以使用 2 种方法来处理 ArrayList 的移动思想。一个为当前位置用于输出。

```
if(arrayPosition < thePeople.size() - 1) 
```

# android - android上的NetBeans平台应用程序，这可能吗？

> ID：13252272
> 
> 赞同：3
> 
> 时间：2012-11-06T13:40:51.880
> 
> 标签：android, rcp, netbeans-platform

我只是想知道是否可以将 NetBeans 平台 (RCP) 应用程序移植到 Android 操作系统设备上，以及如何移植？我是否必须重新设计我的 GUI？我假设我在原始源代码中也使用过的任何库 (API) 都必须替换为 Android 库。我是Android开发的新手，所以如果问题很愚蠢，请原谅我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T11:56:13.957

我不相信不重写平台基本模块的至少某些部分是可能的。

我也认为netbeans平台对于运行android的端机来说是比较重的。

# c# - 在自定义类上使用字符串索引器

> ID：13252274
> 
> 赞同：6
> 
> 时间：2012-11-06T13:40:59.060
> 
> 标签：c#, indexing

我有一个简单的课程：

```
public class MyClass
{
  public string MyClassName { get; private set; }
  public string MyClassValue { get; private set; }
} 
```

我想保存一个 MyClass 对象数组，如下所示：

```
MyClass[] myClasses = new MyClass[5]; 
```

是否有可能在不创建“集合”对象的情况下通过字符串索引器访问对象数组中的这些对象之一（这是正确的术语）？

例如，如果 myClasses[2] 在 MyClassName 属性中具有值“andegre”，我如何/可以像这样访问它：

```
MyClass andegre = myClasses["andegre"]; 
```

而不是做类似的事情：

```
MyClass andegre = myClasses[GetIndexOfOfMyClassName("andegre")]; 
```

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:47:36.793

要使自定义索引器在现有集合上工作，该集合需要是自定义集合，并由您实现[索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)，这可以是您想要采用的任何参数以及您想要的任何逻辑。采用字符串的自定义索引器完全可以在自定义类型上使用。

当您使用`MyClass[]`（如在本机 .NET 数组中）时，无法覆盖使用的索引器，您得到的只是序数索引器。

或者，要查询您想要的数据，您可以使用 LINQ to Objects（简称 LINQ），正如其他答案所建议的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T13:52:27.853

`MyClass[] myClasses`是一个数组（实际上是一个*向量*）。数组/向量**没有**任何字符串索引器 - 只是位置访问。

为了得到你想要的，你需要像字典这样的东西，例如：

```
var myClasses = new Dictionary<string,MyClass>();
myClasses.Add("Fred", new MyClass {...});
myClasses.Add("Betty", new MyClass {...});
myClasses.Add("Wilma", new MyClass {...});
// etc 
```

然后：

```
MyClass obj = myClasses["Fred"]; 
```

或者：

```
MyClass obj;
if(myClasses.TryGetValue("Fred", out obj)) {
   // found Fred - use obj
} else {
   // no Fred here - don't look at obj
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:43:38.623

欢迎来到 LINQ 的世界！

```
MyClass andegre =
    myClasses.FirstOrDefault(item => item.MyClassValue.Equals("andegre")); 
```

# java - 在图像上写文字

> ID：13252279
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:41:09.607
> 
> 标签：java, gwt

是否可以在 java gwt 中的图像上写文本？我知道可以通过使用 Button 来代替，但我需要一个图像来解决这个特殊问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:43:08.920

如果使用 Canvas 太复杂，您可以简单地用文本 div 覆盖图像。将它们绝对定位在同一个容器中，都位于相对于该容器的位置 [0, 0] 处。

也许使用 LayoutPanel 之类的

```
<ui:style>
  .mypanel {
    width: 50px;
    height: 50px;
  }

  .myimg {
    width: 100%;
    height: 100%;
  }

  .mytext {
    font-weight: bold;
    color: green;
    font-size: 30px;
  }
</ui:style>

<g:LayoutPanel addStyleNames="{style.mypanel}">

  <g:layer>
    <g:Image url="my.png" addStyleNames="{style.myimg}"/>
  </g:layer>

  <g:layer>
    <g:Label addStyleNames="{style.mytext}">123</g:Label>
  </g:layer>

</g:LayoutPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:43:20.950

您可以在画布中绘制图像，然后在同一画布中绘制文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:52:28.037

正如 Roger 建议的那样，画布可以让您对图像进行大量控制。您可能会[在新发布的 Lienzo](https://groups.google.com/d/msg/google-web-toolkit/lZJ3bv1UqUU/udfjP1smdmwJ)中找到帮助，这是一个使用画布的 GWT 结构化图形库。

看看 Lienzo 可以在[这里](http://www.emitrom-lienzo.appspot.com/)做什么。

# twitter - 用于对群体进行分类的情绪分析工具

> ID：13252281
> 
> 赞同：2
> 
> 时间：2012-11-06T13:41:30.687
> 
> 标签：twitter, machine-learning, classification, sentiment-analysis

我正在做一个机器学习项目，我正处于进展的第一阶段。我正在提取功能并测试要使用或不使用的功能。我有一个由 2 个类组成的数据集。我想检查情绪和作为其中任何一个群体之间是否存在关系。我的数据如下所示：

```
group_a this is a tweet
group_b this is another tweet
group_b this is another tweet
group_a this is another tweet 
```

**如何找到情绪和群体之间的相关性？**因为这是我项目的功能选择部分，**所以我可以使用任何工具而不是手动实现它**。WEKA、PRTools 或任何其他工具，如果您能告诉我如何操作，欢迎您。

**PS：**实际上在实现算法之前，我想检查是否可以得到类似的东西：

**即 group_a 比 group_b 更负面**

所以在我的测试数据中，当我得到一个句子时，我可以说如果它是一个负面情绪句子，它可能与 group_a 有关

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T18:05:23.143

根据您的问题，我假设您正在尝试将二元情绪分类为正面与负面情绪。我建议在 Weka 中使用 C4.5 决策树分类器。如果您想深入了解 C4.5 中使用的熵度量如何模拟您要达到的目标的理论细节，请查看第 2 章。4[马克霍尔的论文](http://www.cs.waikato.ac.nz/~mhall/thesis.pdf "马克·霍尔的论文")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T09:20:46.643

这是一篇关于如何在 NLTK 中执行情感分析的好文档。

> [http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/](http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/)

此外，scikit-learn 是 Python 编程语言的开源机器学习库。由于您也只将其分类为 2 个类，因此 Bernoulli Naive Bayes 分类器应该能够有效地解决您的任务。

> [http://scikit-learn.org/stable/modules/naive_bayes.html#bernoulli-naive-bayes](http://scikit-learn.org/stable/modules/naive_bayes.html#bernoulli-naive-bayes)

您的解决方案 = nltk + scikit

干杯。

# javascript - 如何使用 nsIProcess 在 JavaScript 中运行没有窗口的 windows 命令

> ID：13252289
> 
> 赞同：2
> 
> 时间：2012-11-06T13:41:48.680
> 
> 标签：javascript, firefox, command-line, firefox-addon

我想运行一些命令，例如：

```
notepad C:\file.txt 
```

使用 Firefox 插件和[nsIProcess](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess "nsI进程")。我已经编写了如下代码：

```
var exepath = "C:\Windows\System32\cmd.exe";
var args = ["/c", "notepad", "C:\file.txt"];
var file = Cc["@mozilla.org/file/local;1"].createInstance(Ci.nsILocalFile);
file.initWithPath(exepath);
var process = Cc["@mozilla.org/process/util;1"].createInstance(Ci.nsIProcess);
process.init(file);
process.run(true, args, args.length); 
```

但我不想打开窗户。**是否可以在不打开此窗口的情况下运行某些命令？**

我知道，我可以`cmd.exe /C start notepad`在命令执行后关闭此窗口，但它会闪烁（出现和消失）。另外我想阅读退出值：

```
var exitval = process.exitValue; 
```

我忘了说我不能安装任何额外的软件！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:05:51.260

您可以直接运行记事本 - 您不需要这样做`cmd.exe`。但是您必须找到可执行文件的完整路径。它的路径是`%windir%/notepad.exe`，您可以使用[nsIEnvironment](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIEnvironment)来解析该路径（您实际上也必须这样做，`cmd.exe`而不是假设 Windows 安装在 中`c:\windows`）：

```
var env = Cc["@mozilla.org/process/environment;1"]
            .getService(Ci.nsIEnvironment);
var exepath = env.get("WINDIR") + "\\notepad.exe"; 
```

以防万一你想运行记事本以外的东西：你必须做命令行通常做的工作，即获取`PATH`环境变量并遍历列表中的目录，查看文件退出的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-12T14:38:53.960

**这是一个老问题，但这个页面在谷歌搜索结果中排名很高**

为避免窗口出现和消失，请使用此命令

[系统/子进程](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/system_child_process)

# powershell - 如何将powershell runner命令行参数传递给teamcity？

> ID：13252292
> 
> 赞同：1
> 
> 时间：2012-11-06T13:41:53.850
> 
> 标签：powershell, teamcity, teamcity-7.0

我正在尝试将参数传递给 powershell runner 到 teamcity。

以下是我的设置。

```
Script : File
Script File : InvokeBuild.ps1
Script Execution Mode: Execute .ps1 script with -File argument
Script arguments" "z:" "Comp1","Comp2" 
```

但它无法执行。我错过了什么？构建在 teamcity 中没有工件。所以我无法通过日志文件找到问题

![在此处输入图像描述](../Images/fbbf32834ce63697057f565916e8d717.png)

# permissions - Ubuntu中的组权限和sudoers文件

> ID：13252296
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:42:02.543
> 
> 标签：permissions, ubuntu-12.04, sudo, sudoers

我在 Ubuntu 12.04 下有这个文件夹“/var/www”，我希望“deploy”组的所有成员都能够随意更改它。

然后我需要该组的所有用户创建专门属于用户“部署者”的文件夹和文件。因此，权限就像“775”一样，所有者总是部署者，组总是部署。

我正在使用“sudo -u deployer”来执行所有操作，但我希望不要提示该组输入密码，因为应该允许一个或其他成员运行批处理脚本。

我一直在尝试更改 sudoers 文件，但没有任何反应，有什么线索吗？

上次我试过这条线：

`%deploy ALL=(deployer) NOPASSWD: ALL`

我也试过：

`%deploy ALL=(deployer) sudoedit /var/www/*`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:05:02.677

好的，那很快。

看起来 sudoers 文件中的行顺序是相关的。如果线条在顶部，则不起作用。如果它们在下面，它可以工作。=P

# jquery - symfony2 将文件链接到服务器

> ID：13252302
> 
> 赞同：0
> 
> 时间：2012-11-06T13:42:26.850
> 
> 标签：jquery, symfony

我在服务器上托管了 PDF 文件。我可以通过按下 Symfony2 的按钮来打开这些文件吗？这些文件的路径将存放在数据库中的实体中。通过 AJAX 按下按钮获取控制器中的路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:00:46.597

不确定这就是您要查找的内容，但`AJAX`无法自行处理文件下载。最接近的匹配是发送 AJAX 请求，该请求将构建文件路径，然后返回查看。

假设您使用 JSON 作为一种将数据传输回视图的方式。

然后，您可以使用以下方式重定向：

```
window.location.href = response.path; 
```

控制器返回`response`的对象在哪里`JSON`

或设置`src`一些先前创建的`iframe`标签的属性：

```
$('#myDocumentIframe').attr('src', response.path); 
```

这是你想要达到的目标吗？

# safari-extension - Safari 扩展的自动更新阻止在 Safari 库中发布扩展

> ID：13252303
> 
> 赞同：0
> 
> 时间：2012-11-06T13:42:29.043
> 
> 标签：safari-extension, automatic-updates

我正在尝试将我的 Safari 扩展上传到图库。每次我这样做时，我都会在**等待几天**后收到错误消息：

> 在我们的审核过程中，我们发现您仍然没有为您的扩展程序启用自动更新。

凉爽的！但我做到了，完全按照[文档](https://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/UpdatingExtensions/UpdatingExtensions.html)。当我提交 ext 时，我提到了这个 URL：[http](http://up.thefreedictionary.com/Info.plist) ://up.thefreedictionary.com/Info.plist作为我的更新清单。以下是内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">

<plist version="1.0">
<dict>
<key>Extension Updates</key>
<array>
<dict>
<key>CFBundleIdentifier</key>
<string>dictionary</string>
<key>Developer Identifier</key>
<string>SZ9T8BXLWC</string>
<key>CFBundleVersion</key>
<string>1</string>
<key>CFBundleShortVersionString</key>
<string>1.0</string>
<key>URL</key>
<string>
http://up.thefreedictionary.com/TheFreeDictionary.safariextz
</string>
</dict>
</array>
</dict>
</plist> 
```

不知道，这里可能有什么问题。为什么我不能发布它，没有自动更新？

PS CFBudleIdentifier 是“字典”。它对应于我的应用程序包 ID。**有问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:20:14.640

文档页面说：

*   创建一个带有 .plist 文件扩展名的文本文件并将其放在 Web 服务器上
*   在扩展生成器的更新清单字段中包含文件的 URL

我假设你做了第二步。

至于 CFBundleIdentifier，它应该遵循反向 DNS 格式，如下[所述](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW1)：

> 捆绑包 ID 字符串必须是统一类型标识符 (UTI)，仅包含字母数字 (AZ,az,0-9)、连字符 (-) 和句点 (.) 字符。该字符串也应采用反向 DNS 格式。例如，如果您公司的域是 Ajax.com，并且您创建了一个名为 Hello 的应用程序，您可以将字符串 com.Ajax.Hello 分配为您的应用程序的包标识符。

文档中的示例使用 com.yourCompany.safari.firstExtensionName 作为标识符。不过，我不认为“safari”必须出现在标识符中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:49:09.073

我找到了！

问题是我没有在 info.plist （这是扩展的一部分）中提到 update.plist 的 URL。我只是不知道，我必须这样做。我在提交表单中提到了这个 URL，并期望这就足够了。

我检查了文档，它的字面意思是“在扩展生成器的更新清单字段中包含文件的 URL”。如果它只是说：“将文件的 URL 添加到您的 info.plist，这是您的扩展程序的一部分”，我肯定会这样做。但是，一旦我个人没有开发扩展（我将这项工作交给了我团队中的另一个程序员），我就将“扩展生成器”与提交表单混淆了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T03:21:43.303

您的 Update.plist 存在一些问题。这是我的一个供参考。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Extension Updates</key>
    <array>
        <dict>
            <key>CFBundleIdentifier</key>
            <string>com.canisbos.ccnotepad</string>
            <key>Developer Identifier</key>
            <string>ZANVZTSER6</string>
            <key>CFBundleVersion</key>
            <string>104</string>
            <key>CFBundleShortVersionString</key>
            <string>1.0.4</string>
            <key>URL</key>
            <string>http://dl.dropbox.com/u/23990/Canisbos/ccNotepad.safariextz</string>
        </dict>
    </array>
</dict>
</plist> 
```

您似乎缺少顶部的 XML 和 DOCTYPE 声明，但更重要的是与 CFBundleIdentifier 键配对的字符串不正确。它需要与 Info.plist 中的相同，并且它可能不能是“字典”。

编辑：我刚刚注意到您似乎已将文件命名为 Info.plist，而它应该是 Update.plist——尽管我不确定这是否是必需的。

# java - CORBA 中是否有与 writeReplace 等价的方法？

> ID：13252304
> 
> 赞同：1
> 
> 时间：2012-11-06T13:42:30.297
> 
> 标签：java, serialization, corba

使用标准 Java 序列化时，可以通过根据[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口创建`Object writeReplace()`将在序列化期间调用的方法，在流中动态替换对象。

我的问题很简单：Corba Java 实现中是否有此构造的等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:19:14.097

据我所知，Corba 规范中甚至没有这样的东西，更不用说 Java 实现了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:31:31.427

您可以`writeReplace`正常使用 RMI-IIOP（Java RMI over CORBA/IIOP）。ORB 呈现 Serializable/Externalizable（具有所有相关特性）的“标准”Java 序列化并将它们编组为“自定义编组”值。

# regex - scala：获取正则表达式的所有可能匹配项

> ID：13252305
> 
> 赞同：0
> 
> 时间：2012-11-06T13:42:33.020
> 
> 标签：regex, scala

我需要找到所有与“and”词相连的词对。

到目前为止，我尝试了以下方法：

```
val salute = """.*?(\w+\W+)and(\W+\w+).*""".r

val salute(a,b) = "hello ladies and gentlemen, mesdames and messieurs, how are you?"
a: String = "ladies "
b: String = " gentlemen" 
```

现在我想要这样的东西：

```
salute.findAllMatches("hello ladies and gentlemen, mesdames and messieurs, how are you?")
List[(java.lang.String, java.lang.String)] = List((ladies,gentlemen), (mesdames,mesieurs)) 
```

我试过了

```
salute.findAllIn("hello ladies and gentlemen, mesdames and messieurs, how are you?").toList
res14: List[String] = List(hello ladies and gentlemen, mesdames and messieurs, how are you?) 
```

但是，如您所见，没有成功...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:49:42.940

你的正则表达式

```
.*?(\w+\W+)and(\W+\w+).* 
```

由于 .* 之前和之后，将已经匹配所有内容。将其更改为（或根据要求类似）：

```
(\w+\W+)and(\W+\w+) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:30:26.010

为了将结果作为您上面描述的元组列表，您可以执行以下两件事：

将您的正则表达式更改为不那么贪婪，即不要一次使用整个字符串例如：

```
""".(\w+) and (\w+)""".r 
```

使用*findAllIn*并在所有匹配项上使用 RegexExtractor 以获取捕获括号中的部分

将所有内容放在一起产生所需结果的解决方案可能如下所示：

```
val salute = """.(\w+) and (\w+)""".r
val string = "hello ladies and gentlemen, mesdames and messieurs, how are you?"

val results = for {
  salute(left,right) <- (salute findAllIn string)
} yield (left,right)

println(results toList) 
```

结果是

```
List((ladies,gentlemen), (mesdames,messieurs)) 
```

# java - 如何从用户端的 Spring response.sendError(...) 检索描述性消息？

> ID：13252315
> 
> 赞同：0
> 
> 时间：2012-11-06T13:42:59.503
> 
> 标签：java, spring, jquery, exception-handling

我在 Spring 控制器中定义了一个异常处理程序，如下所示：

```
@ExceptionHandler(Customized4ExceptionHandler.class)
public void handleCustomized4Exception(
    Customized4ExceptionHandler ex,
    HttpServletRequest request,
    HttpServletResponse response) throws IOException {

        response.sendError(HttpStatus.EXPECTATION_FAILED.value(),
        "zzzzzzz");

} 
```

当错误被触发时，我在用户端得到以下信息：

![在此处输入图像描述](../Images/243f98756cdbbe280297df3ef888740b.png)

错误代码正确，但没有显示“zzzzzzz”描述性消息。如何在用户端显示它？

我的 Javascript 是：

```
$.ajax({
    type: 'GET',
    url:  prefix + "/throwCustomized4ExceptionHandler",
    dataType: 'json',
    async: true,
    success: function(result) {
        alert('Unexpected success !!!');
    },
    error: function(jqXHR, textStatus, errorThrown) {
        alert(jqXHR.status + " "
                   + textStatus + " "
               + errorThrown + " !");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:00:42.467

它应该以`jqXHR.statusText`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:39:01.610

我解决了以下问题：

```
@ExceptionHandler(Customized4ExceptionHandler.class)
@ResponseStatus(value=HttpStatus.BAD_REQUEST) 
@ResponseBody
public String handleCustomized4Exception(
    Customized4ExceptionHandler ex) {

    // return "zzzzzzz"
    return ex.getSpecialMsg();

} 
```

和

```
$.ajax({
    type: 'GET',
    url:  prefix + "/throwCustomized4ExceptionHandler",

    async: true,
    success: function(result) {
        alert('Unexpected success !!!');
    },
    error: function(jqXHR, textStatus, errorThrown) {
        alert(jqXHR.status + " " + jqXHR.responseText);
    }
}); 
```

# java - java/processing return ArrayList throws: 这个方法必须返回一个Type ArrayList的结果

> ID：13252317
> 
> 赞同：1
> 
> 时间：2012-11-06T13:43:17.507
> 
> 标签：java, processing

我有这个函数`makeAirportManagers()`，它应该返回`ArrayList <MarkerManager>`所有必需的变量`map, countryMarkers`并且`airportMarkers`是全局的（肮脏的处理方式）。

```
ArrayList  makeAirportManagers(){
  ArrayList  managers = new ArrayList();
  for (Marker country : countryMarkers){
    MarkerManager currentMarkerManager = new MarkerManager();
    for (Marker airport : airportMarkers){
      Location airportLocation = airport.getLocation();
      ScreenPosition airportScreenPos = map.getScreenPosition(airportLocation);
      if(country.isInside(map, airportScreenPos.x, airportScreenPos.y)){
        currentMarkerManager.addMarker(airport);
      }
    }
    currentMarkerManager.disableDrawing();
    managers.add(currentMarkerManager);
    map.addMarkerManager(currentMarkerManager);
    airportManagersBuild = true;
    return managers;
  }
} 
```

控制台打印：此方法必须返回 Type ArrayList 的结果

我真的不知道为什么！

在另一个版本的代码中，我计算了 的项目`managers`以确保它不为空，并且它得到了 178 个项目，如预期的那样。

我正在使用 Processing 1.5.1，因为我正在使用 Unfolding 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:44:39.833

您的`return`方法在`for`循环内。您必须将它移到下一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:45:03.570

如果 countryMarkers 中没有元素，您将永远不会到达该行`return managers`，并且您的方法将不会返回任何内容。

即使您知道您的容器永远不会为空，Java 编译器也不会。因此你的错误。

# java - 增强的 for 循环不适用于循环体内的 Scanner

> ID：13252318
> 
> 赞同：2
> 
> 时间：2012-11-06T13:43:18.877
> 
> 标签：java, loops, for-loop

为什么思考不起作用？它只是打印零。但是，当我使用索引值为“i”的普通 for 循环并在循环主体内使用“a[i]”时，它会起作用。

问题不在于打印循环，因为它不打印值，即使使用正常的 for 循环也是如此。

```
import java.util.Scanner;

public class Main {

public static void main(String[] args) {

    Scanner s = new Scanner(System.in);
    int[] a = new int[5];
    for (int i : a)
    {
        System.out.println("Enter number : ");
        i=s.nextInt();

    }
    System.out.println("\nThe numbers you entered are : \n");
    for (int i : a)
    {
        System.out.println(i);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T13:47:53.007

当您使用增强的 for 循环访问元素时：-

```
for (int i : a)
{
    System.out.println("Enter number : ");
    i=s.nextInt();

} 
```

这里，`int i`是数组中元素的副本。修改它时，更改不会反映在数组中。这就是数组元素为 0 的原因。

因此，您需要使用传统的 for 循环进行迭代并访问其上的数组元素以为`index`其分配值。

即使您的数组是一些引用的数组，它仍然不起作用。这是因为，for-each 中的变量不是数组或集合引用的代理。For-each 将数组中的每个条目分配给循环中的变量。

所以，你的`enhanced for-loop`： -

```
for (Integer i: arr) {
    i = new Integer();
} 
```

转换为： -

```
for (int i = 0; i < arr.length; i++) {
    Integer i = arr[i];
    i = new Integer();
} 
```

所以，`i`循环中的初始化，并没有体现在数组中。因此数组元素是`null`。

**解决方法：-**

1.  使用传统的 for 循环：-

    ```
    for (int i = 0; i < a.length; i++) {
        a[i] = sc.nextInt();
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:48:14.707

您的第一个 for 循环应该是“经典” for 循环：

```
for (int i = 0; i < a.length; i++) {
    a[i] = s.nextInt();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T13:51:19.427

> i=s.nextInt();

这是分配给局部变量`i`，而不是数组元素。本质上，

```
 for (int i : a) {
   //  body
 } 
```

和

```
for (int index = 0; index < a.length; index++) {
    int i = a[index];
    // body
} 
```

所以无论你分配什么`i`都不会影响数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T13:53:21.653

该声明

`i=s.nextInt()`

问问自己：- 你在这里做什么？

您正在接受用户的输入。但是你在哪里存储它？在我里面？每次迭代都会覆盖它。也是`i`局部范围的 for 循环。所以它不存在于包含循环之外。

所以你会得到`0... 0 ..0`作为输出。

解决方案 ：

```
for (int i=0;i<a.length;i++) {
a[i] = s.nextInt();
} 
```

将用户输入的值存储在数组中。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-06T13:47:23.283

您应该存储从中获得的值`s.nextInt();`，这可以通过以下方式实现：

```
int j = 0;
for (int i : a){
      System.out.println("Enter number : ");
      a[j++]=s.nextInt();

} 
```

这应该有效。

# hadoop - Datanode 重新启动 Hadoop fs -put 处理大数据（30 GB）

> ID：13252325
> 
> 赞同：3
> 
> 时间：2012-11-06T13:43:31.697
> 
> 标签：hadoop, hdfs

我有一个有 3 个节点的 hadoop 集群。1个主人和2个奴隶。他们每个人都有 24 GB 内存。当我执行

```
hadoop fs -put 
```

将数据从本地文件系统传输到 hdfs 数据的圆顶被传输，然后我得到一个异常

```
12/11/06 19:01:39 WARN hdfs.DFSClient: DFSOutputStream ResponseProcessor exception      for block blk_-2646313249080465541_1002java.net.SocketTimeoutException: 603000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/172.30.30.210:51735 remote=/172.30.30.211:50010]
    at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:164)
    at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:155)
    at org.apache.hadoop.net.SocketInputStream.read(SocketInputStream.java:128)
    at java.io.DataInputStream.readFully(DataInputStream.java:178)
    at java.io.DataInputStream.readLong(DataInputStream.java:399)
    at org.apache.hadoop.hdfs.protocol.DataTransferProtocol$PipelineAck.readFields(DataTransferProtocol.java:125)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$ResponseProcessor.run(DFSClient.java:3284)

12/11/06 19:01:39 WARN hdfs.DFSClient: Error Recovery for block blk_-2646313249080465541_1002 bad datanode[0] 172.30.30.211:50010
put: All datanodes 172.30.30.211:50010 are bad. Aborting...
12/11/06 19:01:39 ERROR hdfs.DFSClient: Exception closing file /user/root/input/wiki.xml-p000185003p000189874 : java.io.IOException: All datanodes 172.30.30.211:50010 are bad. Aborting...
java.io.IOException: All datanodes 172.30.30.211:50010 are bad. Aborting...
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.processDatanodeError(DFSClient.java:3414)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2000(DFSClient.java:2906)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:3110) 
```

我使用了 30 GB 数据进行传输，只传输了 22 GB，然后我得到了这个异常，两个数据节点都重新启动了。缓冲区有没有问题。我的意思是datanode正在通过套接字从namenode接收数据，并且可能是datanodes缓冲区不够大，无法容纳大量数据并导致此异常。

这些是 HDFS 创建的日志文件

```
2012-11-06 18:54:10,074 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2012-11-06 18:54:10,239 INFO org.apache.hadoop.metrics2.impl.MetricsSinkAdapter: Sink ganglia started
2012-11-06 18:54:10,349 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2012-11-06 18:54:10,350 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2012-11-06 18:54:10,350 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: DataNode metrics system started
2012-11-06 18:54:10,644 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2012-11-06 18:54:11,387 WARN org.apache.hadoop.hdfs.server.common.Storage: Ignoring storage directory /data/hadoop/data due to exception: java.io.FileNotFoundException: /data/hadoop/data/in_use.lock (Permission denied)
at java.io.RandomAccessFile.open(Native Method)
at java.io.RandomAccessFile.<init>(RandomAccessFile.java:216)
at org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.tryLock(Storage.java:703)
at org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.lock(Storage.java:684)
at org.apache.hadoop.hdfs.server.common.Storage$StorageDirectory.analyzeStorage(Storage.java:542)
at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:112)
at org.apache.hadoop.hdfs.server.datanode.DataNode.startDataNode(DataNode.java:408)
at org.apache.hadoop.hdfs.server.datanode.DataNode.<init>(DataNode.java:306)
at org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(DataNode.java:1623)
at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1562)
at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataNode.java:1580)
at org.apache.hadoop.hdfs.server.datanode.DataNode.secureMain(DataNode.java:1707)
at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:1724)

2012-11-06 18:54:11,551 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException: All specified directories are not accessible or do not exist.
at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:143)
at org.apache.hadoop.hdfs.server.datanode.DataNode.startDataNode(DataNode.java:408)
at org.apache.hadoop.hdfs.server.datanode.DataNode.<init>(DataNode.java:306)
at org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(DataNode.java:1623)
at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1562)
at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataNode.java:1580)
at org.apache.hadoop.hdfs.server.datanode.DataNode.secureMain(DataNode.java:1707)
at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:1724)

2012-11-06 18:54:11,552 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: 
```

这些是由 Mapred 创建的

```
2012-11-06 18:54:29,395 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2012-11-06 18:54:29,416 INFO org.apache.hadoop.metrics2.impl.MetricsSinkAdapter: Sink ganglia started
2012-11-06 18:54:29,449 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2012-11-06 18:54:29,450 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2012-11-06 18:54:29,450 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: TaskTracker metrics system started
2012-11-06 18:54:29,792 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2012-11-06 18:54:30,002 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
2012-11-06 18:54:30,056 INFO org.apache.hadoop.http.HttpServer: Added global filtersafety (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter)
2012-11-06 18:54:30,103 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
2012-11-06 18:54:30,107 INFO org.apache.hadoop.mapred.TaskTracker: Starting tasktracker with owner as mapred
2012-11-06 18:54:30,108 INFO org.apache.hadoop.mapred.TaskTracker: Good mapred local directories are: /data/hadoop/mapred
2012-11-06 18:54:30,145 ERROR org.apache.hadoop.mapred.TaskTracker: Can not start task tracker because java.io.IOException: Cannot rename /data/hadoop/mapred/ttprivate to /data/hadoop/mapred/toBeDeleted/2012-11-06_18-54-30.117_0
at org.apache.hadoop.util.MRAsyncDiskService.moveAndDeleteRelativePath(MRAsyncDiskService.java:260)
at org.apache.hadoop.util.MRAsyncDiskService.cleanupAllVolumes(MRAsyncDiskService.java:315)
at org.apache.hadoop.mapred.TaskTracker.initialize(TaskTracker.java:736)
at org.apache.hadoop.mapred.TaskTracker.<init>(TaskTracker.java:1515)
at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:3814) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:20:53.173

您的问题与集群内的大量数据传输有关。Apache Hadoop 有一个用于此目的的特定工具，称为 distcp。它使集群中的所有节点能够平等地参与到 HDFS 的数据传输。

请在[http://hadoop.apache.org/docs/r0.20.2/distcp.html阅读更多内容](http://hadoop.apache.org/docs/r0.20.2/distcp.html)

# bash - 循环数组，防止通配符扩展 (*)

> ID：13252329
> 
> 赞同：5
> 
> 时间：2012-11-06T13:44:06.783
> 
> 标签：bash, variables, wildcard, expansion

我试图弄清楚我认为 BASH 中的一个微不足道的问题，但我很难找到正确的语法。我想遍历一组值，其中一个是星号 (*)，我不希望在此过程中发生任何通配符扩展。

```
 WHITELIST_DOMAINS="* *.foo.com *.bar.com"
 for domain in $WHITELIST_DOMAINS
 do
    echo "$domain"
 done 
```

我有上述内容，我正在尝试获得以下输出：

```
 *
 *.foo.com
 *.bar.com 
```

而不是上面的，我在当前目录上得到一个目录列表，然后是 *.foo.com 和 *.bar.com

我知道我需要在某处转义或引用……清晨的阴霾仍然笼罩在我的脑海中。

我回顾了这些问题：

[如何在bash中的变量中逃避通配符扩展？](https://stackoverflow.com/questions/10888764/how-to-escape-wildcard-expansion-in-a-variable-in-bash)

[停止 shell 通配符扩展？](https://stackoverflow.com/questions/11456403/stop-shell-wildcard-character-expansion)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T13:56:30.467

您的问题是您想要一个数组，但是您编写了一个字符串，其中包含元素之间有空格的元素。请改用数组。

```
WHITELIST_DOMAINS=('*' '*.foo.com' '*.bar.com') 
```

始终在变量替换（即 ）周围使用双引号`"$foo"`，否则 shell 会将变量的值拆分为单独的单词并将每个单词视为文件名通配符模式。命令替换也是如此：`"$(somecommand)"`. 对于数组变量，用于`"${array[@]}"`展开到数组元素的列表。

```
for domain in "${WHITELIST_DOMAINS[@]}"
 do
    echo "$domain"
 done 
```

有关更多信息，请参阅[有关数组的 ba​​sh 常见问题解答](http://mywiki.wooledge.org/BashFAQ/005)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:48:51.460

您可以使用数组来存储它们：

```
array=('*' '*.foo.com' '*.bar.com')

for i in "${array[@]}"
do
    echo "$i"
done 
```

# .htaccess - htaccess "订单拒绝，允许"

> ID：13252330
> 
> 赞同：1
> 
> 时间：2012-11-06T13:44:13.860
> 
> 标签：.htaccess

我正在使用**htaccess**文件拒绝访问除`index.php`...之外的所有文件，我使用以下代码来执行此操作...

```
Order Deny,Allow
Deny from All

<Files "index.php">
   Order Deny,Allow
   allow from all
</Files> 
```

然后，我注意到对于`http://www.domain.com/`，我得到一个 403 错误，意味着***被禁止***......在哪里`http://www.domain.com/index.php`返回 http 状态 200，意味着完全没问题......为了解决这个问题，我添加了下面的代码......

```
<Files ".">
    Order Deny,Allow
    allow from all
</Files> 
```

下面的代码对我很有用......现在我检测到`http://www.domain.com` ***（地址末尾没有斜杠）***它返回一个 403 错误......我尝试了一些代码......它们都不适合我。 ..有谁知道我的问题的解决方案...？？

# python - 检查列表的所有元素是否属于同一类型

> ID：13252333
> 
> 赞同：98
> 
> 时间：2012-11-06T13:44:20.787
> 
> 标签：python, python-3.x, list, types

如何检查列表中的元素是否属于同一类型，而不是在可能的情况下单独检查每个元素？

例如，我想要一个函数来检查这个列表的每个元素是否都是一个整数（这显然是错误的）：

```
x = [1, 2.5, 'a']

def checkIntegers(x):
    # return True if all elements are integers, False otherwise 
```

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-11-06T13:45:01.983

尝试[`all`](http://docs.python.org/2/library/functions.html#all)结合使用[`isinstance`](http://docs.python.org/2/library/functions.html#isinstance)：

```
all(isinstance(x, int) for x in lst) 
```

如果需要，您甚至可以检查多种类型`isinstance`：

```
all(isinstance(x, (int, long)) for x in lst) 
```

* * *

并不是说这也会继承继承的类。例如：

```
class MyInt(int):
     pass

print(isinstance(MyInt('3'),int)) #True 
```

如果您*需要*将自己限制为整数，您可以使用`all(type(x) is int for x in lst)`. 但这是**非常**罕见的情况。

* * *

如果所有其他元素都是相同的类型，您可以使用它编写一个有趣的函数，它将返回序列中第一个元素的类型：

```
def homogeneous_type(seq):
    iseq = iter(seq)
    first_type = type(next(iseq))
    return first_type if all( (type(x) is first_type) for x in iseq ) else False 
```

这将适用于任何任意迭代，但它会在过程中消耗“迭代器”。

另一个同样有趣的函数，它返回一组公共基础：

```
import inspect
def common_bases(seq):
    iseq = iter(seq)
    bases = set(inspect.getmro(type(next(iseq))))
    for item in iseq:
        bases = bases.intersection(inspect.getmro(type(item)))
        if not bases:
           break
    return bases 
```

* * *

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T13:45:28.847

使用[`any()`](http://docs.python.org/2/library/functions.html#any)，无需遍历整个列表。只要对象不存在`int`或被`long`发现就中断：

```
>>> not any(not isinstance(y,(int,long)) for y in [1,2,3])
True
>>> not any(not isinstance(y,(int,long)) for y in [1,'a',2,3])
False 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-18T13:33:16.333

结合已经给出的一些答案，使用 map()、type() 和 set() 的组合提供了一个非常易读的答案。假设不检查类型多态性的限制是可以的。也不是计算效率最高的答案，但它可以轻松检查所有元素是否属于同一类型。

```
# To check whether all elements in a list are integers
set(map(type, [1,2,3])) == {int}
# To check whether all elements are of the same type
len(set(map(type, [1,2,3]))) == 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-06T13:46:47.737

```
>>> def checkInt(l):
    return all(isinstance(i, (int, long)) for i in l)

>>> checkInt([1,2,3])
True
>>> checkInt(['a',1,2,3])
False
>>> checkInt([1,2,3,238762384762364892364])
True 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-06T13:59:15.390

检查列表是否由同质元素组成的最简单方法是使用 itertools 模块的 groupby 函数：

```
from itertools import groupby
len(list(groupby(yourlist,lambda i:type(i)))) == 1 
```

如果 th len 与 one 不同，则意味着它在列表中找到了不同类型的类型。这具有贯穿整个序列的问题。如果你想要一个惰性版本，你可以为此编写一个函数：

```
def same(iterable):
    iterable = iter(iterable)
    try:
        first = type(next(iterable))
        return all(isinstance(i,first) for i in iterable)
    except StopIteration:
        return True 
```

此函数存储第一个元素的类型，并在列表中的一个元素中找到不同类型时立即停止。

这两种方法都对类型非常敏感，因此它会看到不同的 int 和 float，但这应该尽可能接近您的请求

编辑：

按照 mgilson 的建议，将 for 循环替换为对 all 的调用

在 void 迭代器的情况下，它返回 True 以与 bulitin all 函数的行为一致

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-29T00:20:54.553

我希望您使用这种方法，您可以遍历列表中的每个项目并检查它们是否都是相同的数据类型，如果是，则返回 True，否则返回 False。

```
def checkIntegers(x):
    # return True if all elements are integers, False otherwise
    return all(isinstance(i, type(x[0])) for i in x[1:])

x = [1, 2.5, 'a']
checkIntegers(x)

False 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-13T23:17:42.340

`type()`如果要排除子类，也可以使用。查看[和](https://stackoverflow.com/questions/1549801/differences-between-isinstance-and-type-in-python)[之间的区别`isinstance()``type()`](https://stackoverflow.com/questions/1549801/differences-between-isinstance-and-type-in-python)：

```
>>> not any(not type(y) is int for y in [1, 2, 3])
True
>>> not any(not type(y) == int for y in [1, 'a', 2.3])
False 
```

虽然你可能不想这样做，因为这样会更脆弱。如果 y 将其类型更改为 int 的子类，则此代码将中断，而`isinstance()`仍然可以工作。

可以使用`is`，因为内存中只有一个`<type 'int'>`，所以如果它们是相同的类型，它们应该返回相同的标识。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-25T13:17:00.590

我喜欢*EnricoGiampieri*的函数（[上图](https://stackoverflow.com/a/13252614/2668831)），但有一个更简单的版本，`all_equal`来自文档的*“ [Itertools recipes](https://docs.python.org/3/library/itertools.html#itertools-recipes) ”*部分`itertools`：

```
from itertools import groupby

def all_equal(iterable):
    "Returns True if all the elements are equal to each other"
    g = groupby(iterable)
    return next(g, True) and not next(g, False) 
```

所有这些食谱都[包装](https://more-itertools.readthedocs.io/en/stable/_modules/more_itertools/recipes.html)在 `more_itertools`：

> 基本上所有这些配方和许多其他配方都可以从 Python 包索引上的 more-itertools 项目中安装：
> 
> `pip install more-itertools`
> 
> 扩展工具提供与底层工具集相同的高性能。卓越的内存性能是通过一次处理一个元素来保持的，而不是一次将整个可迭代对象全部放入内存。通过以有助于消除临时变量的功能样式将工具链接在一起，可以保持较小的代码量。通过更喜欢“矢量化”构建块而不是使用导致解释器开销的 for 循环和生成器来保持高速。

```
from more_itertools import all_equal

all_equal(map(type, iterable)) 
```

或`isinstance`已知类型`int`（根据原始问题）

```
all_equal(map(lambda x: isinstance(x, int), iterable)) 
```

这两种方法比 Enrico 的建议更简洁，并且`range(0)`像 Enrico 的函数一样处理“void iterators”（例如 ）。

```
all_equal(map(type, range(0))) # True
all_equal(map(type, range(1))) # True
all_equal(map(type, range(2))) # True

all_equal(map(lambda x: isinstance(x, int), range(0))) # True
all_equal(map(lambda x: isinstance(x, int), range(1))) # True
all_equal(map(lambda x: isinstance(x, int), range(2))) # True 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-29T15:26:32.560

这是一个关于此的简洁函数，目前它检查（在 a 中`list`）是否所有项目都是**整数**或所有项目是否都是**字符串**，或者是否**混合数据类型**。

```
def check_item_dtype_in_list(item_range):
    if all(map(lambda x: str(x).isdigit(), item_range)):
        item_range = list(map(int, item_range))
        print('all are integer')
        print(item_range)
        return 
    elif all(isinstance(item, str) for item in item_range):
        print('all are string')
        print(item_range)
        return 
    elif any(map(lambda x: str(x), item_range)):
        print('mixed dtype')
        print(item_range)
        return 
```

```
check_item_dtype_in_list(['2', 2, 3])
check_item_dtype_in_list(["2", 2, 'Two'])
check_item_dtype_in_list(['Two', 'Two', 'Two'])
check_item_dtype_in_list([2, 2., 'Two']) 
```

```
all are integer
[2, 2, 3]
mixed dtype
['2', 2, 'Two']
all are string
['Two', 'Two', 'Two']
mixed dtype
[2, 2.0, 'Two'] 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-11-06T15:55:04.133

```
 def c(x):
         for i in x:
             if isinstance(i,str):
                   return False
             if isinstance(i,float):
                   return False

          return True 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-04-25T14:17:40.313

对于这样的情况，我更喜欢使用 map：

```
from types import IntType
In [21]: map((lambda x: isinstance(x, IntType)), x)
   Out[21]: [True, False, False] 
```

# jquery - 奇怪的jquery在firefox上显示行为

> ID：13252334
> 
> 赞同：0
> 
> 时间：2012-11-06T13:44:23.053
> 
> 标签：jquery

我有一个简单的表，我希望在某些条件适用时动态地向它们添加行。

```
<table>
<thead>
    <tr>
        <th>A</th>
        <th>B</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><input class='new' name='test1' value='' /></td>
        <td><input name='test2' value='' /></td>            
    </tr>
</tbody>
</table> 
```

JS：

```
$('table').on('keydown', '.new', function () {
if ($(this).val() === '') {
    var newBench = $("<tr><td><input class='new' name='aname' value='' /></td><td><input name='aname' value='' /></td></tr>");
    newBench.hide().appendTo('#dialog table').show('slow');

}
}); 
```

如果您在第一个输入中键入内容，则另一行将附加到表中，但是这样做时，包含插入文本的输入的 td 元素会变大。它只发生在第一行并且在 IE9 下工作。如果我删除 hide() 和 show() 部分，它会按预期工作。

这是一个不起作用的代码示例：[JSFIDDLE](http://jsfiddle.net/E99pf/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:16:25.487

这在某种程度上与不确定如何修复`display:block`设置的相关。`.show()`我已经更新了代码并让它在 FF 中工作：

```
$('table').on('keydown', '.new', function () {
    if ($(this).val() === '') {            
        var newBench = $("<tr><td><input class='new' name='aname' value='' /></td><td><input name='aname' value='' /></td></tr>");
        newBench.hide().appendTo('#dialog table').css('display', 'table-row');
    }
}); 
```

演示：http: [//jsfiddle.net/E99pf/6/](http://jsfiddle.net/E99pf/6/)

不知道如何慢慢显示。下面的代码肯定不起作用：

```
newBench.hide().appendTo('#dialog table').show('slow', function(){$(this).css('display', 'table-row')}); 
```

演示：http: [//jsfiddle.net/E99pf/5/](http://jsfiddle.net/E99pf/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:37:32.997

**FADE IN 工作在 IE**

给你哥...

[**小提琴**](http://jsfiddle.net/videsignz/E99pf/19/)

```
$('table').on('keydown', '.new', function () {
    if ($(this).val() === '') {
        var newBench = $("<tr><td><input class='new' name='aname' value='' /></td><td><input name='aname' value='' /></td></tr>");

        $(this).closest('tr').after(newBench.hide(function(){$('input', this).fadeIn('slow');}));

    }
}); 
```

# c++ - 如何在 VS 中禁用增量编译

> ID：13252336
> 
> 赞同：3
> 
> 时间：2012-11-06T13:44:25.767
> 
> 标签：c++, visual-studio-2010, visual-c++, devpartner

我该如何禁用`Incremental Compilation`？

我正在使用 DevPartner，它在检测`Skipping instrumentation due to incremental compilation`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T10:57:50.447

有两处需要更改： 在 C/C++ Code Generation 选项中，将“Enable Minimal Rebuild”设置为“No (/Gm-)”。第二个位置在 Linker General 选项中，您需要将“Enable Incremental Linking”设置为“No (/INCREMENTAL:NO)”。

除了弄乱仪器之外，增量构建会导致调试符号 (PDB) 文件有些混乱，并且无法始终可靠地读取。

顺便说一句，有一个更新的 DPS 版本可用：10.6.494.1。测试检测代码时，它的速度大约快 30%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:48:20.443

这是在我们重新构建仪器部件以允许 /MP 多处理器编译时在前端和后端之间传递编译器切换的错误。它在上面提到的 494 版本以及一些可下载的补丁中得到了修复。联系支持人员，他们将为您提供 FTP 站点的路径。

很抱歉您遇到的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T07:01:23.200

对于 VS2010，禁用配置属性 | C/C++ | 代码生成 | “最小构建”避免了错误。

# morphia - 如何更新 @Embedded 字段

> ID：13252343
> 
> 赞同：2
> 
> 时间：2012-11-06T13:44:42.897
> 
> 标签：morphia, updating

我正在使用 Morphia 0.99，我正在尝试更新实体中的嵌入字段，但我不知道如何。

```
// User entity
@Entity(value = "users", noClassnameStored = true)
public class User
{
    @Id
    private String id;

    @Embedded
    private UserConfig userConfig;
}

// User DAO
public class UserDao extends BasicDAO <User, ObjectId> implements IUserDao
{
    @Override
    public void setConfig (String userId, UserConfig config)
    {
        User user = get (new ObjectId (userId));
        user.setNotificationsTypes (notitypes);
        "this.update(user);"
    }
} 
```

[这个页面](https://code.google.com/p/morphia/wiki/Updating)提出了这样的建议：

```
// User DAO
public class UserDao extends BasicDAO <User, ObjectId> implements IUserDao
{
    @Override
    public void setConfig (String userId, UserConfig config)
    {
        Query <User> query = ds.createQuery (User.class).field (idString).equal (userId);
        UpdateOperations <User> ops = ds.createUpdateOperations (User.class).set ("userConfig.someField", "Some Value");
        ds.update (updateQuery, ops);
    }
} 
```

但我想更新整个嵌入字段，而不是一个一个地更新每个子字段。我怎样才能做到这一点？谢谢！

# c# - 用 DataSet 填充的 ListBox 不会更新

> ID：13252351
> 
> 赞同：0
> 
> 时间：2012-11-06T13:45:06.623
> 
> 标签：c#, listbox, dataset

第二版

我正在`ListBox`使用以下代码填充

```
private BindingSource sri = new BindingSource();

public void sola()
{
    sri.DataSource = llenar.Tables["tipoender"];
    listBox1.DataSource = sri;
    listBox1.ValueMember = "end_tipoendereco";
    listBox1.DisplayMember = "tpl_descricao";
} 
```

我用它来删除（使用值 2 更新确定的列），当列 ID_tipoauditoria 值 =2 时，记录未加载。此代码正在运行

```
DataSet grava = new DataSet();
SqlDataAdapter da4 = new SqlDataAdapter();
SqlCommandBuilder constru8 = new SqlCommandBuilder(da4);
SqlParameter codi = new SqlParameter("@emp", SqlDbType.Int);
codi.Value = codem;
SqlCommand llena10 = new SqlCommand("dmlpjende", conec1);
llena10.Parameters.Add(codi);
llena10.CommandType = CommandType.StoredProcedure;
da4.SelectCommand = llena10;
da4.Fill(grava, "endere");
DataRow dr2 = grava.Tables["endere"].Rows[ni];
// listBox1.BackColor = Color.Red;
dr2.BeginEdit();
dr2["id_tipoauditoria"] = 2;
dr2.EndEdit();
da4.Update(grava.Tables["endere"]); 
```

刷新的最佳方法是`ListBox`什么？我试过重置绑定但没有成功。我只需要刷新数据集或列表框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:55:45.173

我可能完全误解了你的问题，但这可能会更好：

```
public void sola()
{
    sri.DataSource = llenar.Tables["tipoender"];
    listBox1.DataSource = sri;
    listBox1.ValueMember = "end_tipoendereco";
    listBox1.DisplayMember = "tpl_descricao";
    listBox1.DataBind(); // this was missing
} 
```

特别是我添加的最后一行，用于实际数据绑定。这能解决你的问题吗？如果没有，如果您`listBox1.Refresh()`之后按照评论中的建议致电会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:20:18.060

我已经解决了刷新列表框，再次加载数据集的问题，

```
 public void cargill()
    {
        campo = "60435351000319";
        llenar = ifd.consulta_cnpj(campo);
        sola();
    }

    public void sola()
    {
        sri.DataSource = llenar.Tables["tipoender"];
        listBox1.DataSource = sri;
        listBox1.ValueMember = "end_tipoendereco";
        listBox1.DisplayMember = "tpl_descricao";
    }

          DataSet grava = new DataSet();
            SqlDataAdapter da4 = new SqlDataAdapter();
            SqlCommandBuilder constru8 = new SqlCommandBuilder(da4);
            SqlParameter codi = new SqlParameter("@emp", SqlDbType.Int);
            codi.Value = codem;
            SqlCommand llena10 = new SqlCommand("dmlpjende", conec1);
            llena10.Parameters.Add(codi);
            llena10.CommandType = CommandType.StoredProcedure;
            da4.SelectCommand = llena10;
            da4.Fill(grava, "endere");
            DataRow dr2 = grava.Tables["endere"].Rows[ni];
            dr2.BeginEdit();
            dr2["id_tipoauditoria"] = 2;
            dr2.EndEdit();
            da4.Update(grava.Tables["endere"]);
            cargill(); 
```

我喜欢使用 dispose 和 refresh 但这种方式有效。

# php - 如何在javascript中包含链接+ id

> ID：13252352
> 
> 赞同：1
> 
> 时间：2012-11-06T13:45:09.893
> 
> 标签：php, javascript, api

我基本上试图做的但我没有成功的是从链接获取 id

```
<input type="hidden" value="<?PHP echo $_GET['id']; ?>"> 
```

使用 javascript 变量检索 id 将其添加到 api.php

```
 var id = $("#id").val();
    var firstname = $("#firstname").val();
    var name = $("#name").val();
    var state = $("#state").val();
    var dataString = 'firstname='+ firstname + '&name=' + name + '&state=' + state;

    if(firstname=='' || name=='' || state=='')
    {
        $('.success0').fadeOut(200).hide();
        $('.error').fadeOut(200).show();
    }else{
        $.ajax({
        type: "POST",
        url: "api.php+id",
        data: dataString, 
```

在 api.php 会获取 id 之后，但不幸的是它不起作用

```
exec('curl -b cookies -c cookies -X POST -d @file.json http://sand.api.xxx.com/item?id='. $_GET['id']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:47:02.230

```
 <input type="hidden" value="<?PHP echo $_GET['id']; ?>"> 
```

您的代码容易受到 xss 攻击

用这个

```
 <input type="hidden" id="myid" value="<?PHP echo htmlentities($_GET['id']); ?>">

var id=$("#myid").attr("value"); 
```

或者

```
var id=$("#myid").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:48:24.207

我在您的代码中注意到的一些错误：

您的 html 应如下所示：

```
<input id="el_id" type="hidden" value="<?PHP echo $_GET['id']; ?>"> 
```

你的JS固定在下面：

```
 var id = $("#el_id").val();
    var firstname = $("#firstname").val();
    var name = $("#name").val();
    var state = $("#state").val();
    var dataString = 'firstname='+ firstname + '&name=' + name + '&state=' + state;

    if(firstname=='' || name=='' || state=='')
    {
        $('.success0').fadeOut(200).hide();
        $('.error').fadeOut(200).show();
    }else{
        $.ajax({
        type: "POST",
        url: "api.php?id="+id,
        data: dataString, 
```

# android - 如何在android Web服务器上的html中获取高文件夹uri

> ID：13252354
> 
> 赞同：0
> 
> 时间：2012-11-06T13:45:19.057
> 
> 标签：android, html, web, uri, href

我正在开发一个应用程序，将文件（index.html、style.css ...）安装到手机的 SD 卡以用于网络服务器

Web 服务器需要获取 mp3 文件才能播放。

我的问题是我找不到我的 mp3 文件在哪里？

例如..

如果我将 mp3 文件放在 index.html 的同一文件夹中，它工作正常。

```
<a href="somthing.mp3"  
     data-format="mp3 ogg">mp3 file</a> 
```

但是，如果我放置比 index.html 文件夹更高的文件夹，我无法获得 mp3 的路径。我试过了

```
<a href="/sdcard/MUSIC/somthing.mp3"
  data-format="mp3 ogg">mp3 file</a> 
```

和

```
<a href="http://xxx.xxx.xxx.xxx:8080/sdcard/MUSIC/somthing.mp3"
  data-format="mp3 ogg">mp3 file</a> 
```

“http://xxx.xxx.xxx.xxx/index.html”是我的安卓网络服务器...

我怎样才能得到我的文件？？？

# iphone - 无法获取在 iPhone 上工作的超链接

> ID：13252355
> 
> 赞同：0
> 
> 时间：2012-11-06T13:45:22.093
> 
> 标签：iphone

我正在使用 Microsoft Outlook 构建带有插入图片 (jpgs) 的 html 电子邮件。当我对图像应用超链接时，它们在运行 Outlook、Nook 和 iPod Touch 的 PC 上运行良好。它们不适用于 iPhone。在 iphone 上发生的情况是，当按下超链接时，屏幕上会出现几个选项，例如复制、打印、Facebook ......，但没有像我在 iPod Touch 上看到的那样打开。我不知道如何纠正这个。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:57:04.307

你检查过图像类型吗？可能 iPhone 不支持。

此图像出现在哪里（网络浏览器、电子邮件）？某些应用程序需要特定命令才能在单击时触发事件。

如果它在移动 safari 中，它是否简单`<a href link? http: protocol`？它会去苹果重定向的任何地方吗（谷歌地图、iTunes 等）。还是它依赖于 Javascript 或 flash？

# php - sqlsrv_query 中的游标不起作用

> ID：13252358
> 
> 赞同：1
> 
> 时间：2012-11-06T13:45:25.897
> 
> 标签：php, sql, cursor

鉴于此 SQL 语句使用游标循环遍历表的每一行并更新另一个表中的行：

```
DECLARE @x varchar(100)
DECLARE @y varchar(100)
DECLARE c CURSOR FOR
SELECT col1, col2 FROM table
OPEN c
FETCH NEXT FROM c INTO @x, @y
WHILE @@FETCH_STATUS = 0
BEGIN
UPDATE table2 SET cola = @x WHERE colb = @y
FETCH NEXT FROM c INTO @x, @y
END
CLOSE c
DEALLOCATE c; 
```

如果我直接在 SQL 控制台或 Navicat 中运行此语句，一切都会按预期运行。但是如果我在 PHP 中运行它：

```
sqlsrv_query($sql) 
```

只有 table2 中的一些行实际上被更新了。SQL 语句中的游标似乎没有正确执行，也许 sqlsrv_query 在语句的游标仍在运行时返回？

有没有办法指示 sqlsrv_query 在返回结果之前“等待”语句完全执行完毕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:56:17.180

像这样的东西而不是光标怎么样。我不得不编写游标的唯一原因是将旧模型转换为新模型，以便为转换运行一些业务规则等。我没有在生产中运行任何游标。

```
update table2
    set cola = t1.col1
from table2 t2
join table1 t1 on t1.col2 = t2.colb 
```

# c# - 获取列表框的选定索引（c#）

> ID：13252361
> 
> 赞同：0
> 
> 时间：2012-11-06T13:45:37.037
> 
> 标签：c#, asp.net, .net, webforms, listbox

我有一个`ListBox`与 SelectionMode 设置为多个。当我使用检查选定的索引时，`ListBox1.SelectedIndex`即使我点击一个项目，我总是得到-1？我希望能够在列表框中获取多个选定项目的索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T13:53:08.880

使用`GetSelectedIndices()`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:57:44.660

由于可以选择多个项目，因此您必须获取 SelectedItems 的集合。循环通过它们。每个项目都有 Index 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T13:47:37.680

试试这个方法

```
ListBox.SelectedIndexCollection SelectedIndices { get; } 
```

当您只允许选择一个值时，使用 SelectedIndex 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:21:38.133

尝试这样的事情。您将使用此代码在一个字符串中获取所有选定的索引。

```
int length = this.ListBox1.Items.Count;
    StringBuilder b = new StringBuilder();
    for ( int i = 0 ; i < length; i++ )
         {
      if ( this.ListBox1.Items[ i ] != null && this.ListBox1.Items[ i ].Selected ) 
              {
        b.Append( this.ListBox1.Items[ i ].Selected );
        b.Append( "," );
          }
     }
    if ( b.Length > 0 ) 
        {
      b.Length = b.Length - 1;
    }
    return b.ToString(); 
```

# maps - EPSG坐标点之间的距离

> ID：13252375
> 
> 赞同：0
> 
> 时间：2012-11-06T13:46:10.000
> 
> 标签：maps, coordinates, geospatial, distance, epsg

我有一个坐标[EPSG Projection 3059 - LKS92 / Latvia TM](http://spatialreference.org/ref/epsg/3059/)的点。我需要计算两点之间的距离（以米为单位）。

计算两点之间的欧几里得距离很容易，但我不确定结果距离是否以米为单位？

```
PROJCS["LKS92 / Latvia TM",
 UNIT["metre",1,
 PARAMETER["scale_factor",0.9996], 
```

单位是1米，但要考虑比例因子吗？也许这个系统中的 1 个单位不是 1m 而是 0.9996 米？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:11:05.857

不，地图投影中的比例因子集成在投影计算中。该因子的目的是随着中央子午线 (24°E) 的东移增加而最小化整体失真。当涉及横向墨卡托 (TM) 时，0.9996 是一个常见因素。

投影后，结果坐标以米为单位（在本例中），无需进一步缩放，您可以使用简单的毕达哥拉斯斜边计算来确定距离。

# list - 如何在 lisp 中使用标签需要帮助

> ID：13252376
> 
> 赞同：2
> 
> 时间：2012-11-06T13:46:17.087
> 
> 标签：list, lisp

据我了解，标签的使用是定义一个与 flet 相同但范围更大的本地函数。那是对的吗。我将提供一个例子：

```
(defun nested-average (tree)
  ;labels are the same as flet but with higher scope, define local functions
  (labels ((%nested-average
                ;arguments for the function
                (branch sum visited)                
                (cond
                 ((consp branch)
                      (multiple-value-call
                      ;calls the previous function with reference to the label
                       #'%nested-average (rest branch)
                       (%nested-average (first branch) sum visited)))

                   ;is branch a number
                 ((numberp branch)
                    (values (+ sum branch) (1+ visited)))
                  ;otherwise
                 (t 
                 (values sum visited))
                 )
            )
           )
            (multiple-value-call #'/ (%nested-average tree 0 0))
    )
)
    ;(nested-average ' (10 ((30 1) 20) (8 (5 (50 7)) 9) 40)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:40:08.490

在 Hyperspec 中：labels 等价于 flet，只是为标签定义的函数名称的范围包括函数定义本身以及主体。

这实际上意味着标签允许您编写递归函数。例如：

```
(defun fact (n)
  (labels ((rec (x)
             (if (< x 1) 
                 1
                 (* x (rec (- x 1))))))
    (rec n))) 
```

这个函数工作正常，但是用 flet 编写的相同函数会导致错误，因为符号 rec 不会绑定在函数定义中。如果出于同样的原因使用 flet 编写，您提供的示例函数会导致错误。

# scala - 构造函数中的中缀运算符以设置字段

> ID：13252378
> 
> 赞同：1
> 
> 时间：2012-11-06T13:46:23.427
> 
> 标签：scala, implicit-conversion, infix-operator

我想在 scala 中定义一个（或两个，取决于你如何看待它）运算符。

像这样的东西：_ ==> _ | _ 其中下划线代表参数。棘手的部分是，应该在构造函数中使用运算符来设置对象的字段。

我写了一个小例子，使用隐式和包装对象。但这种方法显然行不通。我不知道，如何设置当前对象的字段。

在此示例中，类型 B 的每个创建对象都应将其字段设置为“B”、44 和“foo”。“B”的结果 ==> 44 | "foo" 应该和 this.a = "B"; 一样 这个.b = 44; 这个.c = foo。有没有办法做到这一点？

谢谢！

```
abstract class Top {

  var a = "a"
  var b = 3
  var c = "c"
  implicit def js2WJ(js: String) : Wrapper = {
    new Wrapper(js)
  }

}

case class B() extends Top
{
    "B" ==> 44 | "foo"
}

class Wrapper(js: String)
{
    var ju : Option[Int] = None 
    var cs : Option[String] = None
    def ==>(j: Int): Wrapper = {
      ju = Some(j)
      this
    }
    def | (cs: String) =
    {
      this.cs = Some(cs) 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:21:32.087

这是你需要的吗？

```
abstract class Top {
  var a = "a"
  var b = 3
  var c = "c"
  implicit def js2WJ(js: String): TopBuilder = TopBuilder(js, b, c, this)
}

case class TopBuilder(a: String, b: Int, c: String, top: Top) {
    def ==> (j: Int) = copy(b = j)
    def | (s: String) = copy(c = s) toTop
    def toTop {
        top.a = a
        top.b = b
        top.c = c
    }
}

object B extends Top {
    "B" ==> 44 | "foo"
} 
```

# javascript - 没有类的元素上的jquery单击事件

> ID：13252379
> 
> 赞同：2
> 
> 时间：2012-11-06T13:46:23.717
> 
> 标签：javascript, jquery

我如何确保这个 href 元素会触发“click”事件，除非它没有“disablelink”类。

不要处理：

```
<a class="iconGear download disablelink" href="#">Download</a> 
```

过程：

```
<a class="iconGear download" href="#">Download</a> 
```

* * *

试过这个没有成功：

```
 $("a.download").not(".disablelink").click(function (e) {
        alert('in');
        e.preventDefault();
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T13:50:39.513

这应该有效：

```
$("a.download:not('.disablelink')").click(function (e) {
    alert('in');
    e.preventDefault();
}); 
```

如果`disablelink`类是动态添加的：

```
$(document).on('click', "a.download:not('.disablelink')", function (e) {
    alert('in');
    e.preventDefault();
}); 
```

检查这个**演示**：http: [//jsfiddle.net/d3rXr/1/](http://jsfiddle.net/d3rXr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:48:57.683

```
$('a.download').click(function(e){
    e.preventDefault();
    if($(this).hasClass('disablelink')){
        return;
    }else{
      //other stuff;
    }
}); 
```

为什么不检查单击锚点的时间，以及它是否具有返回的类并且什么也不做，我猜这将是更具可读性的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:49:21.457

你可以这样：

```
$("a.download").click(function(e) {
    if($(this).hasClass("disablelink")) {
        return false;
    }
    // Normal code
    alert('in');
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:49:36.390

首先，这可能不起作用，因为某些链接已动态添加了 disablelink，并且在它们已经绑定了点击处理程序之后。

其次，您应该只在点击处理程序中检查该类，如下所示：

```
$("a.download").click(function (e) {
    if($(this).hasClass('disablelink')){
       e.preventDefault();
       // link is disabled
    }else{
       alert('in');
       // link is active
    } 
}); 
```

# php - $_GET 多个选项创建链接

> ID：13252380
> 
> 赞同：1
> 
> 时间：2012-11-06T13:46:27.510
> 
> 标签：php, get

我使用`$_GET[variable from link]`- 方式传递用户在我的网页上选择的选项，例如每页的帖子或后序。我正在考虑编写一个简单的变量，它会给我用户选择的选项，以便我可以在我的`header`-redirects 中使用它：

```
if ((isset($_GET['id'])) AND($_GET['id'] != 0 )) {  
    $topic_id = (int)$_GET['id'];  
    $header = 'Location: topic.php?id='.$topic_id;  
}  
        else {  
        header('Location: error.php');  
        die();  
        }  
if ((!isset ($_GET['page'])) OR ((int)$_GET['page'] == NULL)) {  
header('Location: topic.php?id='.$topic_id.'&page=1');  
die();  
}  
else {  
$page = (isset($_GET['page']) AND (int)$_GET['page'] > 0) ? (int)$_GET['page'] : 1;  
$header = $header.'&page='.$page;  
}  
    if(isset($_GET['order']) AND $_GET['order'] != NULL)  {  
    $order = $_GET['order'];  
    $header = $header.'&order='.$order;  
     } 
```

等等。

所以我现在得到了用户选择的选项，但是如果我想*更改*其中一个以进行特殊重定向，我需要编写一个`string-replace`-function。我的问题是：有没有更好的方法来处理许多`$_GET`选项和/或缺少的选项？有什么好的做法吗？对不起，如果这是一个简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:01:21.863

使用您的示例代码，您通过 访问的每个查询字符串参数`$_GET`，例如`$_GET['page']`，您直接附加到一个`$header`变量，例如`$header = '&page=' . $_GET['page'];`。

由于每个键看起来都有“规则”，例如`id`can't be `0`，循环遍历键列表是可行的，但是，您还需要保留要评估的规则列表，它不会不值得（除非您有*很多*钥匙，否则我可以看到一个很好的好处）。

相反，您可以重新排序和清理代码以构建完整的查询字符串，*然后*担心实际重定向：

```
if (!isset($_GET['id']) || ((int)$_GET['id'] == 0)) {
    // invalid id; no need to process further.
    header('Location: error.php');
    die();
}

// set the ID
$queryString = 'id=' . (int)$_GET['id'];

// process the current page
$queryString .= '&page=' . ((empty($_GET['page']) || ((int)$_GET['page'] <= 0)) ? 1 : $_GET['page']);

// set the order, if available
if (!empty($_GET['order'])) {
    $queryString .= '&order=' . $_GET['order'];
}

// redirect
header('Location: topic.php?' . $queryString);
die(); 
```

虽然这仍然需要对每个键进行手动操作，但管理起来更容易（在我看来），并且实际的 URL/重定向只在一个地方处理。这也是我将在较小的项目中使用的一种方法，这些项目预计不会改变（很多）或具有动态/不断增长的部分列表。

如果上述方法过于繁琐（当您有太多查询字符串参数/规则时很容易出现这种情况），创建键列表及其规则将成为首选方法。这是此方法的快速汇总（未经测试）示例：

```
// define the list of "keys" and their "rules"
$keys = array(
    'id'    => array('required' => true, 'min' => 1),
    'page'  => array('required' => false, 'min' => 1, 'default' => 1),
    'order' => array('required' => false)
);

$query = '';
foreach ($keys as $key => $rules) {
    // get the value of the key from the query-string, if set
    $value = (empty($_GET[$key]) ? null : $_GET[$key]);

    // determine if the value is valid or not
    $valid = (empty($value) || (isset($rules['min']) && ((int)$value < $rules['min']))) ? false : true;

    if ($rules['required'] && !$valid) {
        // required key but invalid value =[
        header('Location: error.php');
        die();
    } else if (!$rules['required'] && !$valid) {
        if (!empty($rules['default'])) {
            // the key is not set but has a default value
            $value = $rules['default'];
        } else {
            // the key is not required, is not set, and has no default value; skip it
            continue;
        }
    }

    // append the key/value to the query
    $query .= (($query != '') ? '&' : '') . $key . '=' . $value;
}

header('Location: topic.php?' . $query);
die(); 
```

以上是基于密钥/规则的系统的骨架。规则非常少，并定义是否需要一个键以及它的最小值是什么（如果`min`设置了 a，它假定它是一个整数并通过 转换它`(int)`）。如果密钥是必需的但未设置，或者不是有效值，它会立即失败并重定向到`error.php`. 如果不需要键*并且*值无效*但*设置了`default`值，它将使用该值；否则它将跳过该键。完成所有值处理后，它将键/值附加到查询中并继续前进。

我说它是一个“骨架”系统，因为它只定义了两个规则，`min`并且`required`. 您可以在此基础上添加其他规则，例如`max`设置最高值，或`in_list`定义有效值列表（例如 for `order`，您可以拥有`'in_list' => array('asc', 'desc')`然后使用 进行检查`in_array($value, $rules['in_list'])`）。它有潜力，但仅限于您的需求！

# c# - 通过键入第一个字母 WPF 在列表视图中查找项目

> ID：13252391
> 
> 赞同：1
> 
> 时间：2012-11-06T13:47:03.267
> 
> 标签：c#, wpf

我有一个从数据库绑定客户信息的列表视图。该列表视图中绑定了 15 列。该列之一是客户名称。

当我从键盘输入他们名字的首字母时，我想集中注意力。你有什么想法吗？

这是我的列表视图的 XAML 代码

```
<ListView x:Name="datalist" ButtonBase.Click="datalist_Click" ContextMenuOpening="datalist_ContextMenuOpening" MouseDoubleClick="datalist_MouseDoubleClick" SelectionChanged="datalist_SelectionChanged"
MouseUp="datalist_MouseUp" PreviewMouseUp="datalist_PreviewMouseUp" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:55:54.450

尝试只操作`Model/ModelView`而不是`UI`直接操作（尽可能多）。

例如，在`ModelView`属性中定义

```
public bool Focused{
  get ..   
  set...  //OnPropertyChanged
} 
```

nd 将其绑定到 UI 元素的相应属性。在此之后，您唯一需要做的就是简单地

*   `ModelView`在绑定数据（对象）中查找元素
*   将其`Focused`属性设置为`true`

# java - 编译器似乎混淆了重载方法的两个版本。为什么？

> ID：13252393
> 
> 赞同：8
> 
> 时间：2012-11-06T13:47:07.270
> 
> 标签：java, compiler-construction, overloading

在我的jsp文件中有一行：

```
byte[] imageData = Base64.decodeBase64(request.getParameter("imageBase64")); 
```

日食抱怨：

> Base64 类型中的方法 decodeBase64(byte[]) 不适用于参数 (String)"

它说该方法得到 a `String`，但它期望 a `byte[]`。但是在`Base64`类中有两个重载版本的`decodeBase64`; 一个有论据`String`，一个有论据`byte[]`。

我不明白为什么编译器似乎认为我正在`byte[]`使用不正确的`String`参数调用版本，它应该在`String`没有任何编译器错误的情况下使用该版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T14:01:00.167

`Base64`包中的类`org.apache.commons.codec.binary`有 2 个解码方法

```
static byte[]   decodeBase64(byte[] base64Data) since beginning

static byte[]   decodeBase64(String base64String) since version 1.4. 
```

我认为你必须`commons codec 1.4`在你的类路径中之前有 jar

希望能帮助到你。

# php - jQuery $.ajax() 到 PHP CURL

> ID：13252394
> 
> 赞同：3
> 
> 时间：2012-11-06T13:47:12.353
> 
> 标签：php, jquery, ajax, curl

我希望将以下内容翻译成 PHP CURL。

```
$.ajax({
  url:"MY_URL",
  cache: false,
  type: "POST",
  data: "",
  dataType: "xml",
  success: function(data) { 
    alert('Eureka!')
    }
}); 
```

我特别有兴趣弄清楚如何更改以下内容以将 dataType 设置为 xml。以下代码不起作用：

```
$ch = curl_init('MY_URL');
curl_setopt($ch, CURLOPT_HEADER, 0); // get the header 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);
curl_setopt($ch,CURLOPT_HTTPHEADER,array (
      "Content-Type: xml; charset=utf-8",
      "Expect: 100-continue",
      "Accept: xml"
     )); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T03:56:37.460

使用 phery，您可以以一种非常简单的方式（在[http://phery-php-ajax.net/](http://phery-php-ajax.net/)中）进行操作，过去 2 年我一直在改进和使用我的库：

```
// file would be curl.php
Phery::instance()->set(array(
  'curl' => function($data){
    $ch = curl_init($data['url']);
    curl_setopt($ch, CURLOPT_HEADER, 0); // get the header 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);
    curl_setopt($ch,CURLOPT_HTTPHEADER,array (
      "Content-Type: xml; charset=utf-8",
      "Expect: 100-continue",
      "Accept: xml"
    ));
    $data = curl_exec($ch);
    curl_close($ch);
    return PheryResponse::factory()->json(array('xml' => $data)); 
  }
))->process(); 
```

然后使用 ajax 调用创建一个函数以使其可重用：

```
/* config would be {'url':'http://'} */
function curl(url){
  return phery.remote('curl', {'url': url}, {'target': 'curl.php'}, false);
}

curl('http://somesite/data.xml').bind('phery:json', function(event, data){
  // data.xml now contains the XML data you need
}).phery('remote'); // call the remote curl function 
```

# android - 我的 getView() 位置在自定义列表视图中重复？

> ID：13252397
> 
> 赞同：2
> 
> 时间：2012-11-06T13:47:16.223
> 
> 标签：android, android-listview, custom-lists

我正在使用自定义 ListView 。它工作正常。我正在使用此**ListView 来区分已读和未读消息**我拿起消息已**读 ID**，未读消息为 0，已读消息为 1。我的 getView() 代码如下：---

```
public View getView(int position, View convertView, ViewGroup parent) 
{
    ViewHolder holder;
    if(convertView==null)
    {
        convertView=mInflater.inflate(R.layout.custom_home_list, null);
        holder=new ViewHolder();
        holder.address=(TextView)convertView.findViewById(R.id.person_name);
        holder.body=(TextView)convertView.findViewById(R.id.full_msg);
        holder.date=(TextView)convertView.findViewById(R.id.msg_time);
        convertView.setTag(holder);
    }else
    {
        holder=(ViewHolder)convertView.getTag();
    }
    int size=mArrList.size();
    if ((mArrList != null) || size > 0) 
    {
        if(mArrList.get(position).read.equalsIgnoreCase("1")){
        holder.address.setText(mArrList.get(position).address);
        holder.body.setText(mArrList.get(position).body);
        holder.date.setText(mArrList.get(position).date);
        }else{
            holder.address.setText(mArrList.get(position).address);
            holder.body.setText(mArrList.get(position).body);
            holder.body.setTextColor(mArrList.get(position).color);
            holder.date.setText(mArrList.get(position).date);
        }
    }
    return convertView;
} 
```

在这里，我使用此条件进行区分：-

```
 if(mArrList.get(position).read.equalsIgnoreCase("1")){
   } 
```

但是**在 5 个项目后重复位置**，所以我的条件不起作用。我有很多搜索，但我没有得到它。请帮我 。提前致谢！问候迪潘克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:03:50.270

在您的代码中，您没有明确设置颜色以防“读取”状态（if/else 的第一部分）。

这意味着如果您的视图被回收并且之前用于“未读”项目，那么颜色将保持不变。

在这两种情况下，您都需要明确说明您想要哪种颜色，因为您无法知道初始颜色是什么。

# git - 用于 TFS 构建的 Git 和 TFS 集成

> ID：13252415
> 
> 赞同：5
> 
> 时间：2012-11-06T13:48:07.063
> 
> 标签：git, tfs, visual-studio-2012

我有需要使用的情况：

*   Git 作为我的源代码的主要存储库
*   Visual Studio 2012 主 IDE
*   TFS 在构建机器上构建，以便于构建管理

好吧，我在 Git 和 TFS 集成之后，理想情况下我希望无缝签入 Git 存储库，这应该会在 TFS 构建中生成 CI 构建。

伙计，关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:17:28.943

这似乎与

[在 TFS 商店](https://stackoverflow.com/questions/1687883/using-git-in-a-tfs-shop?rq=1) 以及 [Git 和 Team Foundation Server中使用 Git](https://stackoverflow.com/questions/614245/git-and-team-foundation-server)

两者都建议使用[https://github.com/spraints/git-tfs](https://github.com/spraints/git-tfs)将您的 git repo 绑定到您的 TFS 服务器。您应该能够使用 git 作为源代码控制和 TFS 服务器作为构建控制器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T23:47:26.400

[我的工作使用git-tf](http://gittf.codeplex.com/)作为集成 git 和 TFS 的一种方式取得了巨大成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T10:51:28.693

您可以将 TFS GIT 存储库用于您的 GIT 所需项目。如果只是Building a project需要，可以找Jenkins或者Latest TFS。由于最新的 TFS 确实内置了 Jenkins。

# version-control - Jenkins Mercurial 插件给出错误：无法完成部分拉取，因为其他存储库不支持 changegroupsubset

> ID：13252418
> 
> 赞同：1
> 
> 时间：2012-11-06T13:48:12.913
> 
> 标签：version-control, mercurial, jenkins, build-automation

我在为构建自动化设置 jenkins 时遇到问题，我们使用源代码控制主机 codebasehq 和 mercurial，但是它无法从存储库中提取。

该插件似乎与提供的凭据连接良好（目前我们只是使用 in http url 凭据），但随后出现以下错误：

```
Building in workspace /home/ubuntu/jenkins/jobs/testJob/workspace 
$ hg clone --rev tip --noupdate https://foo:bar@initech.codebasehq.com/foo/bar.hg /home/ubuntu/jenkins/jobs/testJob/workspace
abort: partial pull cannot be done because other repository doesn't support changegroupsubset. 
```

我尝试在错误消息中运行该命令，但它只是返回相同的中止消息。

我对 mercurial 的经验有限，而且 google 似乎没有在错误消息上返回太多，这让我认为这可能是 jenkins 插件或 codebasehq 的 mercurial 设置的问题。

有关错误的任何信息，或者是否有人有在 codebasehq 上成功设置此类事情的经验并且可以分享任何建议，那将是非常棒的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T08:46:51.857

在 codebasehq 支持团队做出回应后，“changegroupsubset”似乎是指其 mercurial 存储库的 https 版本不支持的功能。然而，他们的存储库的 ssh 版本支持它，所以我可以通过简单地替换来解决这个问题

```
hg clone --rev tip --noupdate https://foo:bar@initech.codebasehq.com/foo/bar.hg /home/ubuntu/jenkins/jobs/testJob/workspace 
```

和

```
hg clone --rev tip --noupdate ssh://foo:bar@initech.codebasehq.com/foo/bar.hg /home/ubuntu/jenkins/jobs/testJob/workspace 
```

这很成功。

# javascript - Bootstrap 2.2.1 预输入

> ID：13252421
> 
> 赞同：1
> 
> 时间：2012-11-06T13:48:20.610
> 
> 标签：javascript, twitter-bootstrap

PHP，返回一个 JSON 编码的数组

```
$this->load->model('car_model', 'cars');
$result = $this->cars->searchBrand($this->input->post('query'));
$this->output->set_status_header(200);
$this->output->set_header('Content-type: application/json');
$output = array();
foreach($result as $r)
    $output['options'][$r->brandID] = $r->brandName;
print json_encode($output); 
```

输出：`{"options":{"9":"Audi","10":"Austin","11":"Austin Healey"}}`

JS更新：

```
$(".searchcarBrands").typeahead({
    source: function(query, typeahead) {
        $.ajax({
            url: site_url + '/cars/search_brand/'+query,
            success: function(data) {
                typeahead.process(data);
            },
            dataType: "json"
        });
    },
    onselect: function(item) {
        $("#someID").val(item.id);
    }
}); 
```

更新：未捕获的类型错误：对象函数 (){return a.apply(c,e.concat(k.call(arguments)))} 没有方法“进程”

如果我只输入“A”，那么 typeahead 只会显示每个结果的第一个字母（一堆 A 字母）。如果我输入第二个字母，我就什么也看不见了。

我已经尝试`JSON.parse`过数据或使用 data.options 但没有运气。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:33:13.643

我一直在与 Bootstrap 2.2.1 进行最后一天的斗争。不管我做什么，它都行不通。对我来说，除非我在进程函数中放置断点（可能只是因为 FireBug 已打开？），否则我总是遇到进程未定义错误。

无论如何，作为一个补丁，我重新下载了 Bootstrap，省略了预输入，从这里得到预输入： [https ://gist.github.com/2712048](https://gist.github.com/2712048)

并使用了这段代码：

```
$(document).ready(function() {
    $('input[name=artist]').typeahead({
        'source': function (typeahead) {
            return $.get('/7d/search-artist.php', { 'artist': typeahead.query }, function (data) {
                return typeahead.process(data);
            });
        },
        'items': 3,
        'minLength': 3
    },'json')
}); 
```

我的服务器返回这个（对于'Bo'）：

```
["Bo","Bo Burnham","Bo Diddley","Bo Bruce","Bo Carter",
 "Eddie Bo","Bo Bice","Bo Kaspers Orkester","Bo Saris","Bo Ningen"] 
```

当然，现在它忽略了我的 minLength，但它会让我度过一天。希望这可以帮助。

编辑：在这里找到解决方案： [Bootstrap 2.2 Typeahead Issue](https://stackoverflow.com/questions/13636088/bootstrap-2-2-typeahead-issue)

使用 Bootstrap 2.2.1 中包含的预输入，代码应为：

```
    $(文档).ready(函数() {
        $('input[name=artist]').typeahead({
            '来源'：功能（查询，提前输入）{
                return $.get('/search-artist.php', { 'artist': encodeURIComponent(query) }, function (data) {
                    返回预输入（数据）；
                });
            },
            “项目”：3，
            “最小长度”：3
        },'json')
    });

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:59:14.177

这是我为使用引导程序的预输入来促进远程数据源所做的工作：

```
$("#search").typeahead({

    source: function(typeahead, query) {

        $.ajax({

            url: "<?php echo base_url();?>customers/search/"+query,
            success: function(data) {

                typeahead.process(data);
            },
            dataType: "json"
        });
    },
    onselect: function(item) {

        $("#someID").val(item.id);
    }
}); 
```

然后你只需要确保你的 JSON 编码的数组包含`value`标签的索引和`id`之后设置隐藏 id 的字段，比如：

```
$this->load->model('car_model', 'cars');
$brands = $this->cars->searchBrand($this->uri->segment(4));
$output = array();
foreach($brands->result() as $r) {

    $item['value'] = $r->brandName;
    $item['id']    = $r->brandID;
    $output[] = $item;
}
echo json_encode($output);
exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:53:03.447

$.post 是异步的，所以你不能用户返回它。那不会返回任何东西。

# authentication - 将 ACS 用作具有自定义身份提供者的服务

> ID：13252424
> 
> 赞同：0
> 
> 时间：2012-11-06T13:48:27.780
> 
> 标签：authentication, service, identity, provider, acs

我们在一个 iOS 应用程序中工作，我们在 azure 中使用后端。我们有两种登录方式，一种是 Facebook 登录（使用 Fb 作为身份提供者），另一种是直接登录我们的系统。我们决定使用 ACS，但我们遇到了很多技术问题。我的问题是是否可以创建自定义身份提供程序，它将是一个服务（例如 WCF 或 WEB API）来生成一个令牌，我们通过 ACS 来获取声明令牌。ACS 是否支持这种服务接口？如果是这样，在我们的自定义身份提供者中生成令牌的做法是什么？

在此先感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T00:43:08.513

ACS 可以支持任何使用它理解的协议的身份提供者。根据身份提供者背后的后端，您可以使用 ADFS 或使用 WIF 编写自己的身份提供者。ACS 不支持将基于 Web 的身份提供者与基于 WCF 的身份提供者混合和匹配，这意味着您需要公开一个网站，ACS 可以使用 WS-Federation 协议将浏览器重定向到该网站。您拥有的唯一外部合同是 ACS 会将用户重定向到您，您需要让他们登录（这对您的 IdP 意味着什么取决于您）并向 ACS 发回一个令牌。

关于如何使用 WIF 编写自己的 STS 的书籍确实有整本书，开始有许多资源可以提供帮助，包括[WIF SDK](http://www.microsoft.com/en-us/download/details.aspx?id=4451)（它为 STS 提供模板），[本白皮书](http://download.microsoft.com/download/7/D/0/7D0B5166-6A8A-418A-ADDD-95EE9B046994/WindowsIdentityFoundation-WhitepaperForDevelopers-RC.pdf)（请参阅“使用Windows Identity Foundation 构建安全令牌服务”）或[此博客文章](http://blogs.msdn.com/b/vbertocci/archive/2008/11/26/an-identity-provider-and-its-sts-writing-a-custom-sts-with-the-october-beta-of-the-geneva-framework.aspx)。

# windows - 用于移动文件的bat文件

> ID：13252425
> 
> 赞同：0
> 
> 时间：2012-11-06T13:48:29.650
> 
> 标签：windows, command-line, batch-file

我想创建一个`bat`文件，将文件从一个位置移动到一个备份文件夹。条件是我需要在父目录中移动所有超过 30 天的文件夹。文件夹名称是文件夹的创建日期。

例如：2012 年 10 月 17 日的所有文件都将在名为 10172012 的文件夹内。源文件夹是：

```
C:\Data\DataIn\Processed\10172012

C:\Data\DataIn\Processed\09172012

C:\Data\DataIn\Processed\08172012 
```

所以今天 bat 文件应该将文件夹“09172012”、“08172012”移动到目标备份文件夹：

```
D:\Backup\Processed\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:39:56.100

```
@echo off
setlocal EnableDelayedExpansion
rem Get Julian Day number of today's date
for /F "tokens=1-3 delims=/" %%a in ("%date%") do (
   set /A m=1%%a %% 100, d=1%%b %% 100, y=%%c
)
set /A A=(m-14)/12, todayJDN = (1461*(y+4800+A))/4 + (367*(m-2-12*A))/12 - (3*((y+4900+A)/100))/4 + d - 32075
rem Process all folders
for /D %%a in (*) do (
   rem Get Julian Day Number of this folder
   set folder=%%a
   set /A m=1!folder:~0,2! %% 100, d=1!folder:~2,2! %% 100, y=!folder:~4!
   set /A "A=(m-14)/12, folderJDN = (1461*(y+4800+A))/4 + (367*(m-2-12*A))/12 - (3*((y+4900+A)/100))/4 + d - 32075"
   rem Move folder if it is older than 30 days
   set /A daysOlder=todayJDN - folderJDN
   if !daysOlder! gtr 30 move %%a D:\Backup\Processed\
) 
```

此处描述了儒略日数字：[http ://www.hermetic.ch/cal_stud/jdn.htm](http://www.hermetic.ch/cal_stud/jdn.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:36:34.523

使用 shell 脚本更容易做到。最后，我使用 shell 脚本实现了这一点。

# xml - 如何排序，然后选择一项

> ID：13252426
> 
> 赞同：5
> 
> 时间：2012-11-06T13:48:35.540
> 
> 标签：xml, xslt, sorting

我正在使用 XSLT 从提要中获取数据。目前我使用这个[代码块](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762271%28v=vs.85%29.aspx)，它只是从提要中挑选出第一个项目。我对其进行了一些更改，因此它适用于此示例 XML。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <xsl:apply-templates/> 
  </body>
  </html>
</xsl:template>

<xsl:template match="/">
  <xsl:value-of select="catalog/book/author"/>
</xsl:template>

</xsl:stylesheet> 
```

我想按价格对 xml 进行排序，*然后*选择与价格最高的书关联的作者。我已经尝试了各种事情，但我似乎无法弄清楚。

当前输出是“Gambardella，Matthew”，但我需要它是“Galos，Mike”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:39:15.037

> 我想按价格对 xml 进行排序，然后选择与价格最高的书关联的作者。

FWIW，您也可以使用纯 XPath 来做到这一点。

```
/catalog/book[not(price < /catalog/book/price)]/author 
```

*（谓词为：“选择任何不低于任何书的书。” `<book>`）`<price>`*

这将`<author>Galos, Mike</author>`在[示例 XML](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762271%28v=vs.85%29.aspx)中选择。

笔记

*   这个表达式不选择价格最高**的**书，而是选择**所有**价格最高的书（即，如果有两本书的价格相同，它将选择两本书）。采用

    ```
    /catalog/book[not(price < /catalog/book/price)][1]/author 
    ```

    准确选择一本匹配的书（将选择文档顺序中的第一个）。

*   XPath 自动将*“小于/大于（或等于）”*类型的比较类型的两个操作数强制为[numbers](http://www.w3.org/TR/xpath/#NT-Number)。只要 的值`<price>`可以直接转换为数字，上面的表达式就会成功。

*   它必须是逆逻辑（*“不（低于任何）”*），因为相反的（*“大于任何”*）永远不会为真（而*“大于或等于任何”*总是为真）。

*   操作的时间复杂度`nodeset1[expression < nodeset2]`为：
    → *O(count(nodeset1) × count(nodeset2))*。
    在上述情况下`nodeset1`和`nodeset2`相同，因此有效时间复杂度为：
    → *O(n²)*。
    换句话说，它不是解决这个问题的最有效方法（我会说`<xsl:apply-templates>`是`<xsl:sort>`），但另一方面 - 它是一个单线，可能对你来说足够快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:58:40.457

您可以指定一个`<xsl:sort>`内部应用模板，如下所示：

```
<xsl:template match="/">
    <html>
        <body>
            <xsl:apply-templates select="/catalog/book">
                <xsl:sort select="price" order="descending" data-type="number"/>
            </xsl:apply-templates>
        </body>
   </html>
</xsl:template> 
```

然后在你的小“书”模板中，使用`position()`过滤掉第一本书节点

```
<xsl:template match="book">
    <xsl:if test="position() = 1">
        <xsl:value-of select="author"/>
        <br/>
        <xsl:value-of select="price"/>
    </xsl:if>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:08:03.367

您需要并使用 position 函数只返回第一个：

```
<xsl:template match="/">
    <html>
        <body>
            <xsl:apply-templates select="/catalog/book">
                <xsl:sort select="price" order="descending" data-type="number"/>
            </xsl:apply-templates>
        </body>
   </html>
</xsl:template>

<xsl:template match="book">
   <xsl:if test="position()=first()">
       <xsl:value-of select="author"/>
   </xsl:if>
</xsl:template> 
```

# magento - Magento 1.7.0.2 Pending Payment status-在Paypal中成功付款后

> ID：13252427
> 
> 赞同：6
> 
> 时间：2012-11-06T13:48:38.700
> 
> 标签：magento

我有出售各种在线商品的磁电机网站。我已经在管理部分设置了 PayPal 网站付款标准，其中 PayPal 帐户详细信息已被激活。

当客户成功下订单并使用 PayPal 支付账单时，我在管理员的订单详细信息页面中获得“待付款”状态。实际上订单已被处理，PayPal 接受付款。

我的问题是为什么即使付款已成功进行，管理员也会显示“待付款”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:23:58.307

最新的 PayPal 集成更改了订单处理模式（来自 PayPal 方面）。现在，在您成功支付订单后，没有任何结果返回给 Magento。相反，店主应该配置 PayPal IPN 功能。

不幸的是，配置 PayPal IPN 的链接不再位于 Magento wiki 上。这是 PayPal 文档的链接（这是所需的大部分配置）：[https ://developer.paypal.com/docs/classic/ipn/integration-guide/IPNSetup/](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNSetup/)

Magento IPN 接收器类似于：[http](http://www.yoursitename.com/index.php/paypal/ipn/index/) ://www.yoursitename.com/index.php/paypal/ipn/index/ - 使用您的真实域。这应该进入您的 PP acc 中的通知 URL 配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T07:18:56.593

谢谢大家的回复。我终于弄明白了。可能有三种可能的错误原因：

1.  从系统->配置->付款方式检查您在magento admin中的商家位置。商户位置和 Paypal 企业帐户国家/地区位置应相同。这似乎是我的问题。我将商家位置设置为英国，而我的沙盒帐户卖家帐户是美国。
2.  它可能不会发送 IPN。登录到贝宝沙盒网站，在历史记录部分有一个IPN选项从那里启用它
3.  在您的贝宝沙盒帐户中，进入个人资料->设置->付款审核并将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:48:06.947

虽然这不是一个编程问题，但请确保您已在管理区域中将“ ”设置`Payment Action`为“ ”。`Sale``Magento`

你可以在下面找到这个`System -> Configuration -> Payment Methds -> PayPal Payment Solutions tab`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T07:12:13.103

您可以使用此扩展程序：[Magento 订单还款扩展程序](http://www.54dev.com/product/magento-repay "Magento 订单还款延期")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T11:34:38.870

正如**Slayer Birden 所说**：“最新的 PayPal 集成改变了订单处理模式（来自 PayPal 方面）”。

该指南似乎已过时。
但是对于 IPN 设置，您需要登录到您的 PayPal 帐户并转到**`Profile->My selling Tools`**。在这里您可以找到即时付款通知 (IPN) 设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-17T08:29:45.060

我找到了这个解决方案

尝试在配置->付款方式->贝宝下将“转移购物车行项目”设置为否。

如果它对您有用，请告诉我！

发现于：http: [//forum.azmagento.com/how-to/magento-17-issue-with-a-paypal-payments-order-92356.html](http://forum.azmagento.com/how-to/magento-17-issue-with-a-paypal-payments-order-92356.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-08T07:18:49.853

我的客户有来自香港的商户账户，我们使用 Website Hosting Pro 作为支付解决方案，因为除了（美国、英国和加拿大）之外，Paypal 没有从网站本身进行支付的规定。

这是在 magento 中硬编码的，我不明白为什么。？

要使用您的帐户设置贝宝，

在您的网站文件夹中，（此处使用的版本为 1.7.0.2）{您的安装文件夹}/app/code/core/Mage/Paypal/Model

打开文件“HostedPro.php”

在底部，你会发现功能，

```
public function getNotifyUrl($storeId = null)
{
    return $this->_getUrl('paypal/ipn', $storeId, false);
} 
```

此函数设置 Hosting Pro 的 ipn 值。同样，您可以在此文件夹中找到其他付款方式（快递、标准等）的 ipn 值。要么将其更改为您在贝宝帐户中设置的所需值，要么从这些（magento）文件中更改它。我选择了第一个选项，它奏效了。在此之后，您的订单状态应该会改变。

# vb.net - 刽子手游戏 - VB.net

> ID：13252429
> 
> 赞同：-9
> 
> 时间：2012-11-06T13:48:44.423
> 
> 标签：vb.net

我正在 VB.net 中为我的儿子制作一个刽子手游戏。我为每个字母做了按钮，我也做了一个单词列表。我遇到的问题是当我试图将猜测的字母打印到标签上时。我不知道该怎么做。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:53:39.620

尽管您没有显示您的代码，但我会尽力帮助您。

一个简单的方法是：

```
Private sWord As String 'Your word here
Dim arrayLetters As Array

arrayLetters = sWord.ToCharArray

For i = 0 To arrayLetters.Length - 1
    Dim lbl As New Label
    lbl.Text = "_"
    lbl.Tag = arrayLetters(i)
    lbl.AutoSize = True

    Me.FlowLayoutPanel1.Controls.Add(lbl) ' Assuming that you have added a FlowLayoutPanel in your form to handle your labels (AutoSizeMode=GrowAndShrink)
Next 
```

现在你需要一个 sub 来检查用户是否按下了正确的字母：

```
 Private Sub CheckLetter(ByVal letter As Char)
    For Each lbl As Label In FlowLayoutPanel1.Controls
        If lbl.Tag = letter Then
            lbl.Text = letter
        Else
            'Whatever you like if the user make a mistake
        End If
    Next
 End Sub 
```

现在在处理按钮的事件中单击

```
 CheckLetter("Here you put the corresponding letter") 
```

当然你可以有一个事件来处理所有的字母（甚至使用键盘输入），添加大写字母等。
向我们展示你的努力

# ruby - ruby 进程的 init.d 脚本生成器？

> ID：13252439
> 
> 赞同：2
> 
> 时间：2012-11-06T13:49:13.627
> 
> 标签：ruby, ubuntu, foreman, init.d

我有一些 ruby​​ 进程，为了开发，我一直在使用 foreman 来管理进程，现在在生产中我想导出进程并在 /etc/init.d 目录中运行它。

是否有任何工具可以通过将脚本和相关的 PID 创建到 /var/run 来提供帮助？我尝试使用工头导出功能来执行此操作，但它不起作用，因为它可以为 inittab 或 upstart 做一些事情，但不能为 init.d 做一些事情。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:52:00.707

mm似乎没有工具可以创建，工头可以导出inittabs，upstart但不能导出init.d，唯一的方法是修改文件：

```
/etc/init.d/skeleton 
```

您需要稍微修改它，然后：

```
chmod +x /etc/init.d/process_name 
sudo update-rc.d process_name defaults
sudo /etc/init.d/process_name (start| stop| reload ) 
```

完毕 。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:11:36.287

另一个答案可能是使用[https://github.com/ghazel/daemons](https://github.com/ghazel/daemons) gem 。

```
require 'daemons'
require 'process'

Daemons.run('process.rb') 
```

脚本完成后，只需从命令行调用它：

```
ruby process.rb run|start|stop|restart 
```

此配置将在“/var/run”下生成一个“process.pid”文件，您可以使用 monit 通过使用此文件来监视进程。

# objective-c - 如何释放通过引用 c 代码传递的结构，并且它的成员在那里 malloc'ed？

> ID：13252441
> 
> 赞同：1
> 
> 时间：2012-11-06T13:49:22.953
> 
> 标签：objective-c, c

尝试释放在 c 函数内部分配的对象的内存（在 Objective-c 代码中）时，我收到“malloc：**对象 0xbfffe160 的错误：未分配被释放的指针”。*这个 C 函数创建并返回二进制数据包，稍后用作 NSData。这是我的 obj-c 代码部分，我在其中创建结构变量并通过引用 C 函数将其传递：

```
MyPacket packetRef;
allocAuthentificationCodePacket(&packetRef);

NSData *data = [NSData dataWithBytes:packetRef.bytes length:packetRef.packet->packetSize];
free(&packetRef); // getting error 
```

一切正常，除了我试图释放内存，因为数据应该由 NSData 变量保留。C 函数在自身内部执行 calloc，所以我应该以某种方式释放该内存：

```
packetRef->bytes = calloc(1, sizeof(*packetRef)); 
```

这是我存储二进制数据的结构：

```
typedef struct {

  uint8_t packetType;
  uint16_t packetBody;

} MyStruct; 
```

和另一个结构：

```
typedef union {

  const uint8_t *bytes; 
  MyStruct *packet;

} MyPacket; 
```

我应该如何释放内存？我得到的错误不是崩溃，它只是运行单元测试时调试控制台中的一条消息。

**更新**。试图释放“字节”结构成员但得到相同的错误消息：

```
free(&packetRef.bytes); 
```

**更新2**。谢谢，建议的方法确实有效，并且 malloc 错误消息从控制台中消失了：

```
free(packetRef.bytes); 
```

但是，在 Xcode 中收到警告“将 'const uint8_t *' (aka 'const unsigned char *') 传递给 'void *' 类型的参数会丢弃限定符”。我正在使用 Apple LLVM 4.1 编译器。C 函数驻留在单独的文件中，并且只包含一个标头，因为 Android 人员将不得不重用它。

**更新3**。感谢@simonc 和@nos 指出结构成员“bytes”具有常量。删除 const 后警告消失了。使用 const 的最初想法是保护“字节”不被修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:52:13.720

这*总是错误的。*`&`（提示：放在 .里面 几乎总是错误的`free()`。）

```
MyPacket packetRef;
...
free(&packetRef); // getting error 
```

不管是什么`MyPacket`——它具有自动存储持续时间，即编译器自动分配存储空间并在函数退出时释放它。

不要`free()`做某事，除非它来自`malloc()`（或`calloc()`，等）

由于`packetRef.bytes` 已分配`calloc()`，您可以`free()`改为使用 。

```
MyPacket packetRef;
allocAuthentificationCodePacket(&packetRef);
...
free(packetRef.bytes); 
```

### 更新

如果您调用的函数`allocAuthentificationCodePacket`, 包含以下代码：

```
packetRef->bytes = calloc(1, sizeof(*packetRef)); 
```

如果该`bytes`字段具有 type `const uint8_t *`，则有问题。

1.  也许你的代码是错误的，你应该调用一些函数来释放数据包，而不是自己释放它。

2.  也许`bytes`字段的类型是错误的，应该是`uint8_t *`而不是`const uint8_t *`.

3.  也许`allocAuthentificationCodePacket`是错的。

谁知道？崩溃还不算错，但这*是*一个问题。

### 脚注

C中没有引用。 `&x`是“x的地址”，而不是“对x的引用”。

让我们考虑以下代码：

```
char *x = malloc(10);
free(x); 
```

当人们谈论这段代码时，他们会说“`x`在堆上分配”之类的东西，但这在技术上是不正确的，`x`它是在堆栈上分配的，并且包含堆上的 10 个字节的地址。同样，该行`free(x)`实际上并不 free `x`，它释放`x`指向的内存。

因此，当有人告诉您“不要忘记释放`x`”时，您知道他们实际上的意思是“不要忘记释放其中包含的值`x`指向的内存”。人们对术语很草率，但计算机却不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T13:51:49.523

`packetRef``packetRef->bytes`在您的示例中是分配了堆的堆栈变量。因此，您应该致电`free(packetRef.bytes)`

由于您在函数内部分配内存`allocAuthentificationCodePacket`- 您可能需要创建另一个函数来释放内存

```
void freePacket(MyPacket* packet)
{
    free(packet->bytes);
} 
```

# python - pySMB Windows 文件共享缓冲区溢出

> ID：13252443
> 
> 赞同：0
> 
> 时间：2012-11-06T13:49:26.343
> 
> 标签：python, smb

嗨，我在使用[pySMB](http://packages.python.org/pysmb/)模块时遇到了 python 错误。

在为自己制作脚本时，我在尝试连接到网络共享时遇到了一些麻烦。这是Python代码

```
 from smb.SMBConnection import SMBConnection

 server_name = 'Server'
 client_name = 'My Computer'
 s = SMBConnection('guest', '', client_name, server_name, use_ntlm_v2 = True)
 s.connect('192.168.1.35', 139)

 print s.listShares() 
```

因此，如果此脚本是从 Windows 计算机运行的，那么它可以在 Linux 服务器或 Windows 服务器上正常工作。我得到的错误是当我在 linux 中运行脚本试图连接到 Windows 服务器的共享时。 ![Wireshark 捕获](../Images/7ea0a42f65d493e9c730de79a4d458c2.png)

这是Python中的错误

```
File "/media/HP v125w/programing/server_index.py", line 10, in list_shares
    return [shares.name for shares in connection.listShares() if not shares.isSpecial and not shares.name == 'print$']
  File "/usr/local/lib/python2.7/dist-packages/smb/SMBConnection.py", line 134, in listShares
    self._pollForNetBIOSPacket(timeout)
  File "/usr/local/lib/python2.7/dist-packages/smb/SMBConnection.py", line 477, in _pollForNetBIOSPacket
    self.feedData(data)
  File "/usr/local/lib/python2.7/dist-packages/nmb/base.py", line 48, in feedData
    self._processNMBSessionPacket(self.data_nmb)
  File "/usr/local/lib/python2.7/dist-packages/nmb/base.py", line 78, in _processNMBSessionPacket
    self.onNMBSessionMessage(packet.flags, packet.data)
  File "/usr/local/lib/python2.7/dist-packages/smb/base.py", line 136, in onNMBSessionMessage
    if self._updateState(self.smb_message):
  File "/usr/local/lib/python2.7/dist-packages/smb/base.py", line 265, in _updateState_SMB2
    req.callback(message, **req.kwargs)
  File "/usr/local/lib/python2.7/dist-packages/smb/base.py", line 475, in closeCB
    errback(OperationFailure(kwargs['error'], messages_history))
  File "/usr/local/lib/python2.7/dist-packages/smb/SMBConnection.py", line 128, in eb
    raise failure
smb.smb_structs.OperationFailure: Failed to list shares: Unable to retrieve shared device list
==================== SMB Message 0 ====================
SMB Header:
-----------
Command: 0x03 (SMB2_COM_TREE_CONNECT) 
Status: 0x00000000 
Flags: 0x00 
PID: 4415 
MID: 3 
TID: 0 
Data: 40 bytes 
09000000480020005c005c004800590050004e004f0054004f00410044005c004900500043002400 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000003000000000000000000000003000000000000003f110000000000007d00004c050400000000000000000000000000000000000009000000480020005c005c004800590050004e004f0054004f00410044005c004900500043002400
==================== SMB Message 1 ====================
SMB Header:
-----------
Command: 0x03 (SMB2_COM_TREE_CONNECT) 
Status: 0x00000000 
Flags: 0x01 
PID: 4415 
MID: 3 
TID: 1 
Data: 16 bytes 
100002003000000000000000ff011f00 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000003000100010000000000000003000000000000003f110000010000007d00004c0504000000000000000000000000000000000000100002003000000000000000ff011f00
==================== SMB Message 2 ====================
SMB Header:
-----------
Command: 0x05 (SMB2_COM_CREATE) 
Status: 0x00000000 
Flags: 0x00 
PID: 4415 
MID: 4 
TID: 1 
Data: 68 bytes 
3900000002000000000000000000000000000000000000009f0112000000000007000000010000004000400078000c000000000000000000730072007600730076006300 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000005000000000000000000000004000000000000003f110000010000007d00004c05040000000000000000000000000000000000003900000002000000000000000000000000000000000000009f0112000000000007000000010000004000400078000c000000000000000000730072007600730076006300
==================== SMB Message 3 ====================
SMB Header:
-----------
Command: 0x05 (SMB2_COM_CREATE) 
Status: 0x00000000 
Flags: 0x01 
PID: 4415 
MID: 4 
TID: 1 
Data: 88 bytes 
5900000001000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000800000007600730001ac03001002000001000000ffffffff0000000000000000 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000005000100010000000000000004000000000000003f110000010000007d00004c05040000000000000000000000000000000000005900000001000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000800000007600730001ac03001002000001000000ffffffff0000000000000000
==================== SMB Message 4 ====================
SMB Header:
-----------
Command: 0x09 (SMB2_COM_WRITE) 
Status: 0x00000000 
Flags: 0x00 
PID: 4415 
MID: 5 
TID: 1 
Data: 164 bytes 
3100700074000000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000005000b03100000007400000002000000b810b810000000000200000000000100c84f324b7016d30112785a47bf6ee18803000000045d888aeb1cc9119fe808002b1048600200000001000100c84f324b7016d30112785a47bf6ee188030000002c1cb76c12984045030000000000000001000000 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000009000000000000000000000005000000000000003f110000010000007d00004c05040000000000000000000000000000000000003100700074000000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000005000b03100000007400000002000000b810b810000000000200000000000100c84f324b7016d30112785a47bf6ee18803000000045d888aeb1cc9119fe808002b1048600200000001000100c84f324b7016d30112785a47bf6ee188030000002c1cb76c12984045030000000000000001000000
==================== SMB Message 5 ====================
SMB Header:
-----------
Command: 0x09 (SMB2_COM_WRITE) 
Status: 0x00000000 
Flags: 0x01 
PID: 4415 
MID: 5 
TID: 1 
Data: 16 bytes 
11000000740000000000000000000000 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000009000100010000000000000005000000000000003f110000010000007d00004c050400000000000000000000000000000000000011000000740000000000000000000000
==================== SMB Message 6 ====================
SMB Header:
-----------
Command: 0x08 (SMB2_COM_READ) 
Status: 0x00000000 
Flags: 0x00 
PID: 4415 
MID: 6 
TID: 1 
Data: 49 bytes 
3100000000040000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000000 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000008000000000000000000000006000000000000003f110000010000007d00004c05040000000000000000000000000000000000003100000000040000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000000
==================== SMB Message 7 ====================
SMB Header:
-----------
Command: 0x08 (SMB2_COM_READ) 
Status: 0x00000000 
Flags: 0x01 
PID: 4415 
MID: 6 
TID: 1 
Data: 108 bytes 
110050005c000000000000000000000005000c03100000005c00000002000000b810b810580a01000d005c504950455c73727673766300f60200000000000000045d888aeb1cc9119fe808002b10486002000000030003000000000000000000000000000000000000000000 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000008000100010000000000000006000000000000003f110000010000007d00004c0504000000000000000000000000000000000000110050005c000000000000000000000005000c03100000005c00000002000000b810b810580a01000d005c504950455c73727673766300f60200000000000000045d888aeb1cc9119fe808002b10486002000000030003000000000000000000000000000000000000000000
==================== SMB Message 8 ====================
SMB Header:
-----------
Command: 0x0B (SMB2_COM_IOCTL) 
Status: 0x00000000 
Flags: 0x00 
PID: 4415 
MID: 7 
TID: 1 
Data: 152 bytes 
3900000017c0110001ac03001002000001000000ffffffff7800000060000000000000000000000000000000000400000100000000000000050000031000000060000000030000004c00000000000f00000002000c000000000000000c0000005c005c004800590050004e004f0054004f004100440000000100000001000000040002000000000000000000ffffffff0800020000000000 
SMB Data Packet (hex):
----------------------
fe534d4240000000000000000b000000000000000000000007000000000000003f110000010000007d00004c05040000000000000000000000000000000000003900000017c0110001ac03001002000001000000ffffffff7800000060000000000000000000000000000000000400000100000000000000050000031000000060000000030000004c00000000000f00000002000c000000000000000c0000005c005c004800590050004e004f0054004f004100440000000100000001000000040002000000000000000000ffffffff0800020000000000
==================== SMB Message 9 ====================
SMB Header:
-----------
Command: 0x0B (SMB2_COM_IOCTL) 
Status: 0x80000005 
Flags: 0x01 
PID: 4415 
MID: 7 
TID: 1 
Data: 1072 bytes 
3100000017c0110001ac03001002000001000000ffffffff70000000000000007000000000040000000000000000000005000203100000000405000003000000ec0400000000000001000000010000000000020013000000040002001300000008000200000000800c00020010000200000000001400020018000200000000001c00020020000200000000802400020028000200000000002c00020030000200000000803400020038000200000000003c00020040000200000000004400020048000200000000004c00020050000200030000805400020058000200000000005c00020060000200000000006400020068000200000000006c00020070000200000000007400020078000200000000007c00020080000200000000008400020088000200000000008c00020090000200000000009400020098000200000000009c000200070000000000000007000000410044004d0049004e002400000000000d000000000000000d000000520065006d006f00740065002000410064006d0069006e000000000006000000000000000600000041006e0069006d00650000000100000000000000010000000000000018000000000000001800000042006f006f006b0073002000280041007500640069006f002000260020005700720069007400740065006e00290000000100000000000000010000000000000003000000000000000300000043002400000000000e000000000000000e000000440065006600610075006c007400200073006800610072006500000012000000000000001200000043006900760069006c00200045006e00670069006e0065006500720069006e00670000000100000000000000010000000000000003000000000000000300000044002400000000000e000000000000000e000000440065006600610075006c0074002000730068006100720065000000060000000000000006000000470061006d00650073000000010000000000000001000000000000000a000000000000000a0000004800440020004d006f0076006900650073000000010000000000000001000000000000000b000000000000000b00000048004400540056002000530068006f007700730000000000010000000000000001000000000000000500000000000000050000004900500043002400000000000b000000000000000b000000520065006d006f00740065002000490050004300000000000700000000000000070000004d006f00760069006500730000000000010000000000000001000000000000000600000000000000060000004d0075007300690063000000010000000000000001000000000000000700000000000000070000005000750062006c006900630000000000010000000000000001000000000000000f000000000000000f0000005000750062006c00690063002000550070006c006f00610064007300000000000100000000000000 
SMB Data Packet (hex):
----------------------
fe534d4240000000050000800b000100010000000000000007000000000000003f110000010000007d00004c05040000000000000000000000000000000000003100000017c0110001ac03001002000001000000ffffffff70000000000000007000000000040000000000000000000005000203100000000405000003000000ec0400000000000001000000010000000000020013000000040002001300000008000200000000800c00020010000200000000001400020018000200000000001c00020020000200000000802400020028000200000000002c00020030000200000000803400020038000200000000003c00020040000200000000004400020048000200000000004c00020050000200030000805400020058000200000000005c00020060000200000000006400020068000200000000006c00020070000200000000007400020078000200000000007c00020080000200000000008400020088000200000000008c00020090000200000000009400020098000200000000009c000200070000000000000007000000410044004d0049004e002400000000000d000000000000000d000000520065006d006f00740065002000410064006d0069006e000000000006000000000000000600000041006e0069006d00650000000100000000000000010000000000000018000000000000001800000042006f006f006b0073002000280041007500640069006f002000260020005700720069007400740065006e00290000000100000000000000010000000000000003000000000000000300000043002400000000000e000000000000000e000000440065006600610075006c007400200073006800610072006500000012000000000000001200000043006900760069006c00200045006e00670069006e0065006500720069006e00670000000100000000000000010000000000000003000000000000000300000044002400000000000e000000000000000e000000440065006600610075006c0074002000730068006100720065000000060000000000000006000000470061006d00650073000000010000000000000001000000000000000a000000000000000a0000004800440020004d006f0076006900650073000000010000000000000001000000000000000b000000000000000b00000048004400540056002000530068006f007700730000000000010000000000000001000000000000000500000000000000050000004900500043002400000000000b000000000000000b000000520065006d006f00740065002000490050004300000000000700000000000000070000004d006f00760069006500730000000000010000000000000001000000000000000600000000000000060000004d0075007300690063000000010000000000000001000000000000000700000000000000070000005000750062006c006900630000000000010000000000000001000000000000000f000000000000000f0000005000750062006c00690063002000550070006c006f00610064007300000000000100000000000000
==================== SMB Message 10 ====================
SMB Header:
-----------
Command: 0x06 (SMB2_COM_CLOSE) 
Status: 0x00000000 
Flags: 0x00 
PID: 4415 
MID: 8 
TID: 1 
Data: 24 bytes 
180000000000000001ac03001002000001000000ffffffff 
SMB Data Packet (hex):
----------------------
fe534d42400000000000000006000000000000000000000008000000000000003f110000010000007d00004c0504000000000000000000000000000000000000180000000000000001ac03001002000001000000ffffffff

[Finished in 0.2s with exit code 1] 
```

出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T14:06:41.370

我不太确定**server_name**的值是否与**192.168.1.35**匹配。**但它是SMBConnection**的一个重要参数，所以我以另一种方式提供变量而不是提供纯文本，这是我的：

```
from nmb.NetBIOS import NetBIOS

def getBIOSName(remote_smb_ip, timeout=30):
    try:
        bios = NetBIOS()
        srv_name = bios.queryIPForName(remote_smb_ip, timeout=timeout)
    except:
        print >> sys.stderr, "Looking up timeout, check remote_smb_ip again!!"
    finally:
        bios.close()
        return srv_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-13T10:01:56.413

以下代码适用于 python3，用于从 Windows 共享文件夹中读取文件。我使用[pysmb_sample](https://pythonhosted.org/pysmb/api/smb_SMBHandler.html)和[文件内容](https://stackoverflow.com/questions/10875215/python-urllib-downloading-contents-of-an-online-directory)来创建此代码。我在 Ubuntu 15.10、python 3.4 上测试它，同时从 Windows 服务器的共享文件夹接收文件，它工作正常。

```
import  urllib.request 
from smb.SMBHandler import SMBHandler

director = urllib.request.build_opener(SMBHandler)
fh = director.open('smb://username:password@IP_address/shareFolder/shareSubfolder/fileName')
print(fh.read())
fh.close() 
```

# sql - Oracle SQL 与 Oracle PL/SQL

> ID：13252444
> 
> 赞同：9
> 
> 时间：2012-11-06T13:49:26.353
> 
> 标签：sql, oracle, plsql

我必须学习 Oracle SQL 才能工作，并且对 O'Reilly 的《Oracle PL/SQL 编程》一书非常感兴趣，因为它受到了高度评​​价。但是，我不清楚 PL/SQL 是否是与 SQL 不同的语言，或者它只是一个超集还是其他语言。有人可以在这里帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-06T13:58:34.220

SQL 是一种数据查询和操作语言。PL/SQL 是一种过程编程语言。

PL/SQL 是图灵完备的语言，具有构建复杂程序的语法。它还拥有大量的库，这些库为其提供了广泛的功能。然而，毫无疑问，它的主要用途是构建嵌入 SQL 语句以检索和处理数据的存储过程。所以从这个意义上说，PL/SQL 是 SQL 的超集。

尽管在数据库的早期版本中，PL/SQL SQL 引擎落后于数据库引擎，因此某些 SQL 功能在 PL/SQL 中不可用。由于 9i 甲骨文一直在努力使两者保持同步，而且很难找到我们可以在纯 SQL 中做而在 PL/SQL 中也做不到的任何事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T13:51:17.083

它是一个超集。

所有的 SQL 加上一些 PROCEDURAL 扩展——所以你可以有变量、循环、条件逻辑等。

# jsf-2 - 如何防止@PostConstruct 在回发时被调用

> ID：13252450
> 
> 赞同：5
> 
> 时间：2012-11-06T13:49:44.783
> 
> 标签：jsf-2, postback, postconstruct

当页面第一次加载时，`@PostConstruct`会调用，但是当我在这个页面上执行回发时，`@PostConstruct`会再次调用。

我怎样才能让它只在初始请求时运行，而不是在每次回发时运行？

```
@PostContruct
public void init() {
    // charge combos....
}

public void submit() { 
    // action 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T13:53:59.013

显然，您的 bean 是请求范围的，因此在每个 HTTP 请求上都会重新构建。我不完全确定您为什么要阻止`@PostConstruct`再次调用，否则您最终会得到一个“空”bean 状态，这可能会导致表单提交错误，但是好的，您可以添加一个检查 if当前请求不是[回](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isPostback%28%29)发。

```
public void init() {
    if (!FacesContext.getCurrentInstance().isPostback()) {
        // charge combos....
    }
} 
```

这样就不会在回发时调用“收费组合”部分。

或者，也许您的*实际*问题不是“如何防止在回发时调用 postconstruct？”，而是更多“如何在回发时保留相同的 bean 实例？”。在这种情况下，您需要将 bean 放在视图范围而不是请求范围中。

```
@ManagedBean
@ViewScoped
public class Bean implements Serializable {
    // ...
} 
```

只要您`null`从操作方法返回，只要您通过回发与同一个视图交互，同一个 bean 实例就会一直存在。这样`@PostConstruct`就不会被调用（仅仅因为 bean 没有被重构）。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-06-28T13:28:20.317

使用此导入：

导入 javax.faces.view.ViewScoped；对于@ViewScoped

# excel - 工作簿 VBA 函数列表？

> ID：13252451
> 
> 赞同：0
> 
> 时间：2012-11-06T13:49:46.907
> 
> 标签：excel, vba

我设法使用 VBA 可扩展性获取工作簿的工作表和宏的列表：

```
 For Each oComp In ThisWorkbook.VBProject.VBComponents
      Debug.Print oComp.Name
    Next oComp 
```

有没有办法获取模块中声明的函数列表，甚至更好的是代码/代码本身中引用的函数列表？

最终这是打开其他工作簿并列出它们的功能/依赖功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:17:58.587

我现在确信你确实可以，抱歉我之前的评论。

请参阅[http://www.cpearson.com/excel/vbe.aspx](http://www.cpearson.com/excel/vbe.aspx)，也请考虑警告。

祝你好运

# jquery-masonry - div动画后砌体重新洗牌

> ID：13252460
> 
> 赞同：0
> 
> 时间：2012-11-06T13:50:35.323
> 
> 标签：jquery-masonry

在我为 div 的大小设置动画后，我试图让 jquery masonry 脚本重新洗牌。我看过一些例子，但我似乎无法让它发挥作用。我试过了：

```
<script>
$(function(){

$('#container').masonry({
  itemSelector: '.box',
  columnWidth: 100,
  isAnimated: true
});

});
</script>
<script>
$("#test").click( function() {
$("#test").animate ({
"width": 300,
"height": 200
}, 250 );
$('#container').masonry({
  itemSelector: '.box',
  columnWidth: 100,
  isAnimated: true
});
});
</script> 
```

我也试过

```
<script>
$(function(){

$('#container').masonry({
  itemSelector: '.box',
  columnWidth: 100,
  isAnimated: true
});

});
</script>
<script>
$("#test").click( function() {
$("#test").animate ({
"width": 300,
"height": 200
}, 250 );
$("#container|).masonry("reload");
});
</script> 
```

由于某种原因，我无法进行改组。这是它无法使用的页面[http://www.klossal.com/masonry.html](http://www.klossal.com/masonry.html)

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:20:52.497

Masonry("reload") 应该可以工作，但是您的行中有错误`$("#container|).masonry("reload");`。您需要一个结束的正常报价，而不是像这样的管道：`$("#container").masonry("reload");`我也不认为我认为您不需要同位素来洗牌。最简单的方法是在将瓷砖送入砖石之前重新排列瓷砖。简单看看我的网站 (http://www.phpdevpad.de)。当您单击左侧的菜单并尝试不同的组合时，瓷砖会被打乱。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T14:06:39.970

如果你想要shuffle方法，你需要使用Isotope；Masonry的大姐姐。请参阅[此处的 github 讨论](https://github.com/desandro/masonry/issues/81)。

# javascript - javascript xml RPC服务器

> ID：13252465
> 
> 赞同：0
> 
> 时间：2012-11-06T13:51:03.217
> 
> 标签：javascript, xml-rpc

我正在寻找实现一个必须运行 XML-RPC 服务器的 javascript 应用程序。我已经尝试搜索了一下 Javascript XML-RPC CLIENT 可以实现但是否可以实现**Javascript xml-rpc 服务器**？

# asp.net-mvc - ASP.NET MVC - Iframe 下载对话框未显示

> ID：13252467
> 
> 赞同：1
> 
> 时间：2012-11-06T13:51:04.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iframe

我需要进行文件下载，在文件处理过程中显示加载图标（因为我不知道需要多长时间），我决定使用 iframe，代码运行良好，但**问题是文件下载对话框没有出现**。

我已经在 IE、Firefox 和 Chrome 中进行了测试，但它在其中任何一个中都不起作用。

这是我的代码：

看法：

```
<table id="progress" style="visibility:hidden">
    <tr>
        <td>
            <img src="~/Content/Images/ajax-loader.gif" />
        </td>
        <td>
            <h4>please wait.</h4>
        </td>
    </tr>
</table>

<div class="buttons">
    <input type="button" value="Ok" class="button" id="downloadButton">
</div>

<iframe id="iframe" style="visibility:hidden"></iframe>

<script>
    $(document).ready(function () {

        $('#downloadButton').click(function () {

            $('#progress').show();
            $('input:button').attr("disabled", true);

            $('#iframe').src = "@Url.Action("GenerateFile", "Files", null)";

            $('#iframe').load("GenerateFile", function () {
                $('input:button').attr("disabled", false);
                $('#progress').hide();
            });
        });

    });
</script> 
```

服务器端操作：

```
[HttpGet]       
public void GenerateFile(Filters viewModel)        
{        
    var result = GetCustomers().WithName(viewModel.Name);        
    StringBuilder file = new StringBuilder();

    foreach (var customer in result)        
    {        
        // fill up the string builder with csv format       
    }        

    System.Web.HttpContext.Current.Response.AddHeader("content-disposition","attachment; filename=Customers.csv");        
    System.Web.HttpContext.Current.Response.ContentType = "application/csv";        
    System.Web.HttpContext.Current.Response.Write(file);        
    System.Web.HttpContext.Current.Response.End();        
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:37:24.323

我认为这段代码存在多个问题。尝试这个：

```
public FileResult GenerateFile(Filters viewModel)
        {
            var result = GetCustomers().WithName(viewModel.Name);
            StringBuilder file = new StringBuilder();

            foreach (var customer in result)
            {
                // fill up the string builder with csv format       
            }
            var content = Encoding.UTF8.GetBytes(file.ToString());
            return File(content, "application/csv", "Customers.csv");
        } 
```

而且我认为没有称为 src 的 jQuery 方法，所以也试试这个：

```
$('#iframe').attr('src',url); 
```

我假设您使用的是 Razor 语法，因此请为您的查看代码尝试此操作：

```
@{
    ViewBag.Title = "Test";
}

<table id="progress" style="display: none">
    <tr>
        <td>
            <img src="~/Content/Images/ajax-loader.gif" />
        </td>
        <td>
            <h4>please wait.</h4>
        </td>
    </tr>
</table>

<div class="buttons">
    <input type="button" value="Ok" class="button" id="downloadButton">
</div>

<iframe id="iframe" style="display: none"></iframe>
@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {

            $('#downloadButton').click(function () {

                $('#progress').show();
                $('input:button').attr("disabled", true);

                var url = "@Url.Action("GenerateFile", "Files", null)";
$("#iframe").attr('src', url);

                $('#iframe').load("/Files/GenerateFile", function () {
                    $('input:button').attr("disabled", false);
                    $('#progress').hide();
                });
            });

        });
    </script>
} 
```

而且我也相信你应该在你的 jQuery 加载函数中指定一个 Action 参数，例如。$('#iframe').load("/Files/GenerateFile/parameter"...) 因为您的 GenerateFile 操作采用 Filters 参数。

# facebook - 分段错误：11 Facebook iOS SDK？

> ID：13252468
> 
> 赞同：1
> 
> 时间：2012-11-06T13:51:05.283
> 
> 标签：facebook, cocos2d-iphone, segmentation-fault

我正在努力使用 Facebook iOS sdk v3.1 将 Facebook 功能添加到我的 Cocos2d iOS 游戏中。我一直在尝试遵循 Facebook 开发者网站上的“操作方法”，但我遇到了以下错误。

*   错误：预期 ':' 在 '.' 之前 令牌
*   内部编译器错误：分段错误：11

每次方法尝试访问“FBSession.activeSession”时都会发生错误。该代码是直接从 Facebook 的教程中复制和粘贴的。

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    [[CCDirector sharedDirector] resume];
    // We need to properly handle activation of the application with regards to SSO
    // (e.g., returning from iOS 6.0 authorization dialog or from fast app switching).
    [FBSession.activeSession handleDidBecomeActive];//Error occurs here!
} 
```

有没有人遇到过这个错误？此外，有人知道任何更新的教程说明使用 Cocos2d 进行 Facebook 集成吗？我出现的一切都非常过时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:22:24.593

在构建设置中检查你的编译器——我在 LLVM GCC 4.2 下构建时收到了同样的错误，但切换回 Apple LLVM 编译器 4.1 解决了这个问题。

![Build Settings 中的编译器设置](../Images/712d36b3af71d0feeedaaed5a7ed47da.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T10:04:24.270

刚刚在这里找到了一个解决方案：[Facebook SDK 3.0 HelloFacebookSample build errors](https://stackoverflow.com/questions/12359436/facebook-sdk-3-0-hellofacebooksample-build-errors) replace `FBSession.activeSession`by`[FBSession activeSession]`

# php - 以最早到最新的顺序列出随机日期

> ID：13252470
> 
> 赞同：0
> 
> 时间：2012-11-06T13:51:09.863
> 
> 标签：php

您如何列出随机日期（从最早到最新）？

我一直在尝试使用 PHP 来实现这一点，但没有成功。我可以得到一个随机的日期来显示，但会一遍又一遍地循环相同的日期，而不是创建新的日期并按指定的顺序列出它们。

到目前为止，这是我的代码：

```
// Create a random date between 2 months
$datestart = strtotime('01-11-2012');
$dateend = strtotime('01-12-2012');
$daystep = 86400;
$datebetween = abs(($dateend - $datestart) / $daystep);
$randomday = rand(0, $datebetween);

for($i=0; $i< rand(10, 30) ;++$i)
{
echo "<div>" . date("d/m/Y", $datestart + ($randomday * $daystep)) ."</div>";
} 
```

**更新：感谢****Mihai Iorga**，我现在已经设法让代码正常工作，但仍然存在将日期从最旧到最新排序的问题。我如何做到这一点：

```
// Create a random date between 2 months
$datestart = strtotime('01-11-2012');
$dateend = strtotime('01-12-2012');
$daystep = 86400;
$datebetween = abs(($dateend - $datestart) / $daystep);
$randomday = rand(0, $datebetween);

for($i=0; $i< rand(10, 30) ;++$i)
{
$randomday = rand(0, $datebetween);
echo "<div>" . date("d/m/Y", $datestart + ($randomday * $daystep)) ."</div>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:08:30.300

```
$datestart = strtotime('01-11-2012');
$dateend = strtotime('01-12-2012');
$daystep = 86400;
$datebetween = abs(($dateend - $datestart) / $daystep);
$dateArray[] = date("d/m/Y");
$randomday = rand(0, $datebetween);

for($i=0; $i< rand(10, 30) ;++$i)
{
     $randomday = rand(0, $datebetween);
     $randomdate = date("d/m/Y", $datestart + ($randomday * $daystep));
     $dateArray[] = $randomdate;
}

sort($dateArray);

foreach ($dateArray as $d) 
{ 
   echo "<div>" . $d ."</div>";
} 
```

[在http://writecodeonline.com/php/](http://writecodeonline.com/php/)上测试代码并运行此输出：

```
05/11/2012
06/11/2012
07/11/2012
08/11/2012
08/11/2012
12/11/2012
12/11/2012
12/11/2012
19/11/2012
20/11/2012
24/11/2012
27/11/2012
28/11/2012
30/11/2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:04:32.977

你可以试试

```
$dateStart = new DateTime();
$dateStart->setDate(2012, 11, 01);

$dateEnd = new DateTime();
$dateEnd->setDate(2012, 12, 01);

$dates = array();
while ( $dateStart < $dateEnd ) {
    $dates[] = $dateStart->format("d/m/Y");
    $dateStart->modify(sprintf("+%d day",mt_rand(1, 10)));
}

var_dump($dates); 
```

输出

```
array
  0 => string '01/11/2012' (length=10)
  1 => string '07/11/2012' (length=10)
  2 => string '14/11/2012' (length=10)
  3 => string '20/11/2012' (length=10)
  4 => string '27/11/2012' (length=10)
  5 => string '28/11/2012' (length=10) 
```

# asp.net-mvc - 实体框架导入和使用根据输入返回不同结果集的存储过程

> ID：13252472
> 
> 赞同：0
> 
> 时间：2012-11-06T13:51:12.617
> 
> 标签：asp.net-mvc, sql-server-2008, entity-framework, entity-framework-4, asp.net-mvc-4

我正在做一个迁移项目，我正在将一个 Web 表单应用程序迁移到一个 ASP.NET MVC 4 应用程序。

我遇到了这种情况，我需要一点帮助。

在旧的网络表单项目中，我存储了类似...

```
ALTER PROCEDURE [dbo].[TestMultipleResultSet]
    @input VARCHAR
AS
BEGIN
    SET NOCOUNT ON;

    IF NOT EXISTS
    (
        SELECT * FROM Electronics
        WHERE name = @input
    )
    BEGIN
        SELECT 101 AS errorcode
        RETURN
    END

    SELECT * FROM Electronics 
    WHERE name = @input
END 
```

像上面的`if not exist`检查一样，还有许多其他检查与`select * from`结果集不同。

现在我想使用实体框架来执行这个存储过程，所以我导入了函数并使用EF 提供的`Get Column Information`+选项创建了一个复杂类型。`Create Complex Type`

现在它在我输入一个有效的 @input 时运行，`SELECT * FROM Electronics WHERE name = @input`但是当我输入一个不存在的输入而不是返回一个 101 错误代码时，它给了我一个错误。抛出异常。

异常详情

> 数据读取器与指定的“testEFModel.GetTestResults_Result1”不兼容。类型的成员“id”在数据读取器中没有同名的对应列。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:56:54.667

你真的有必要使用存储过程吗？

使用 EF，您可以简单地执行以下操作：

```
var filteredItems = dc.Electronics.Where(e => e.Name == @input).ToList();

if (!filteredItems.Any())
    throw new ApplicationException("No items were found according to criteria"); 
```

***注意：**我并没有实际运行上面的代码；它只是说明了以 EF 方式做事的想法*

# css - Bootstrap Scrollspy 不适用于浮动内容 (spanX)

> ID：13252477
> 
> 赞同：0
> 
> 时间：2012-11-06T13:51:36.273
> 
> 标签：css, twitter-bootstrap

Scrollspy 似乎不适用于内置的引导程序“spanX”类，例如：

**这个作品**

```
 <body data-spy="scroll" data-target="#scrollspy-nav">
     <div id="scrollspy-nav" class="span4">
         <ul class="nav nav-tabs nav-stacked affix">
             <li><a href="#test1">Section 1</a></li>
             <li><a href="#test2">Section 2</a></li>
             <li><a href="#test3">Section 3</a></li>
         </ul>
     </div>
     <div>
         <section id="test1">Test 1 <!-- Lots of <br/>'s --></section>
         <section id="test2">Test 2 <!-- Lots of <br/>'s --></section>
         <section id="test3">Test 3 <!-- Lots of <br/>'s --></section>
     </div>
  </body> 
```

**这不会：**

```
 <body data-spy="scroll" data-target="#scrollspy-nav">
     <div id="scrollspy-nav" class="span4">
         <ul class="nav nav-tabs nav-stacked affix">
             <li><a href="#test1">Section 1</a></li>
             <li><a href="#test2">Section 2</a></li>
             <li><a href="#test3">Section 3</a></li>
         </ul>
     </div>
     <div class="span8">
         <section id="test1">Test 1 <!-- Lots of <br/>'s --></section>
         <section id="test2">Test 2 <!-- Lots of <br/>'s --></section>
         <section id="test3">Test 3 <!-- Lots of <br/>'s --></section>
     </div>
  </body> 
```

第一个示例（有效的示例）在内容容器 div 上没有 spanX 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:46:45.853

对于简单的两列布局，创建一个**.row**并添加适当数量的*.span*列。由于这是一个 12 列的网格，因此每个 .span* 跨越这 12 列中的一些列，并且每行（或父项中的列数）应始终加起来为 12。

```
 <div class="row">
      <div class="span4">...</div>
      <div class="span8">...</div>
   </div> 
```

©[推特引导](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

# twitter-bootstrap - 基于 Bootstrap 的模板中的把手使用 - 如何迭代许多 ul 和 lis

> ID：13252478
> 
> 赞同：0
> 
> 时间：2012-11-06T13:51:43.363
> 
> 标签：twitter-bootstrap, handlebars.js

我正在使用 Bootstrap 构建我的网站，该网站显示基于对 youtube API 的 JSON API 调用的结果。想象一个只有缩略图的 youtube 视频剪辑网格，当您单击其中一个时，它会打开该视频的播放器模式。

很好，我正在尝试在车把的帮助下实现它。

我被卡住了，因为我不能只用 {{each}} 对我从 youtube 获得的结果进行迭代，因为为了显示它们我（这是因为 Bootstrap）我需要添加单独的

```
 <ul> </ul> 
for every 4 
 <li></li>s. 
```

我需要制作这个

```
<ul>
 <li> ... </li>
 <li> ... </li>
 <li> ... </li>
 <li> ... </li>
</ul> 
```

然后又是新的

```
 <ul> with 4     <li>s inside 

 <ul>
  <li> ... </li>
  <li> ... </li>
  <li> ... </li>
  <li> ... </li>
</ul> 
```

现在单曲

```
 <ul> </ul> 
```

我能做到 4

```
 <li> </li> 
```

随着车把的使用，

但这是如果我只从 youtube 获得四个结果，但如果我得到 16 个结果，我怎么能告诉 Handlebars 把

```
 <ul> </ul> 
for every 4 
  <li>s 
```

那是我的问题。

这是我目前在一个 UL 中的模板

```
<ul class="thumbnails" id="mostpopular">
          <script id="mostpopular-template" type="text/x-handlebars-template">
          {{#each this}}
          <li class="span3">
            <div class="thumbnail">
            <a href="{{url}}">
              <img src="{{thumb}}" alt="{{title}}">
            </a>
              <div class="yt-caption">
                <strong>{{title}}</strong><br>
              </div>
            </div>
          </li>
          {{/each}}
          </script>
        </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:25:40.547

首先，不要这样做：

```
<ul>
    <script ...>
    </script>
</ul> 
```

这是一个坏习惯，经常会导致“我的模板去哪儿了？” `$('ul').html('')`重置事物时的问题。你最好让你的模板`<script>`远离你的内容。

现在回到手头的事情。如果您`<li>`的 s 将具有相同的大小，那么您可以使用简单的 CSS 来平铺它们。只需在您的 s 上设置一个宽度`<li>`并将它们浮动在您的内部`<ul>`：

```
ul {
    overflow: hidden; /* To make the <ul> size itself to contain all the <li>s */
}
li {
    float: left;
    width: 100px;  /* Or whatever works, you might want a height as well. */
}​ 
```

然后把所有的`<li>`s 扔到 中`<ul>`，让浏览器来处理；例如：http: [//jsfiddle.net/ambiguous/azWgp/](http://jsfiddle.net/ambiguous/azWgp/)

如果您必须在模板中执行此操作，则将您的数据分块到 JavaScript 中的数组中，并`{{#each}}`在模板中使用嵌套的 s。像这样的东西：

```
{{#each chunks}}
    <ul>
        {{#each this}}
            <li>...</li>
        {{/each}}
    </ul>
{{/each}} 
```

例如：http: [//jsfiddle.net/ambiguous/ABEzn/](http://jsfiddle.net/ambiguous/ABEzn/)

你也可以添加你自己的助手，但这只是上面的方法稍微改变了一点。

# matlab - 如何在matlab中计算没有循环的类内标准差？

> ID：13252479
> 
> 赞同：0
> 
> 时间：2012-11-06T13:51:45.540
> 
> 标签：matlab, standard-deviation

我有一个数据集，其中有 n 个样本 d 个特征，由一个 *d 矩阵表示。对应的标签是一个*1的向量。如何在matlab中计算没有循环的每个类内标准差？

例如：

样品

```
 5     1     1     1     4
 5     2     5     3     1
 1     3     5     5     5
 5     5     3     4     5
 4     5     5     5     4 
```

标签：

```
2
1
1
2
2 
```

如何计算 1 类和 2 类的标准差？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:00:06.863

使用`accumarray`，您可以像这样计算标准差：

```
stdev = cell2mat(accumarray(label,(1:length(label))',[],@(x){std(samples(x,:))})); 
```

如果您有统计工具箱，则可以`grpstats`改用：

```
stdev = grpstats(samples,label,'std') 
```

# database - 如何在两个不同的数据库中打开文本文件

> ID：13252483
> 
> 赞同：-2
> 
> 时间：2012-11-06T13:51:48.447
> 
> 标签：database, vba, ms-access, vb6

我正在编写一个代码，通过创建某个文本文件并将其链接到 MS-access 中的表格来查看可能性。

```
Sub Testtxt()
 Open "C:\test.txt" For Output Shared As #1
  Write #1, "A1"
  Write #1, "B1"
  Write #1, "C1"
  Write #1, "D1"
  Write #1, "E1"

 Close #1
 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:38:24.630

如果您的问题是：（我怎样才能允许两个不同的数据库读取一个文本文件？）那么这就像

```
Dim MyLine as String
Open "c:\myfile.txt" For Input As #1
   Do While Not Eof(1)
       Line input #1, myLine
       'Do whatever here
   Loop
Close #1 
```

但是，如果您的问题是（如何允许两个不同的数据库写入同一个文本文件？），那么您不能。拥有对文件的 WRITE 访问权限的第一个数据库将阻止第二个数据库这样做，并且您的代码将报告一些 Access denied 错误或类似的东西。所以这是一场比赛。您应该编写代码，以便第二个数据库将等待文件被第一个数据库关闭然后继续写入它（我想这将是无用的，因为从您的代码中您不会附加到文件，而是覆盖它），因此第一个数据库写入的先前数据将丢失。

# html - 为什么 IE8 上没有出现背景图片？

> ID：13252486
> 
> 赞同：2
> 
> 时间：2012-11-06T13:52:03.573
> 
> 标签：html, css, internet-explorer-8, xhtml

背景图片在 IE8 中不出现，但在所有浏览器中都能正常工作，包括 IE9

相关CSS：

```
 #player {
      background: url('/images/tv-screen.jpg') center top repeat-x;
      padding: 25px 26px 0 -1px;
      width: 660px;
      height: 403px;
      border: #555 solid 1px;
      margin-top: 0;
      margin-bottom: 0;
    } 
```

相关HTML：

```
 <p id="player">...//some data ..</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T13:54:22.917

CSS看起来不错。

我认为 IE8 在标签本身上失败：`<p id="player>`. id 属性没有结束符`"`。如果这导致 id 被误解，CSS 选择器将不匹配它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T12:08:08.660

问题是：iframe 里面有 iframe，它阻塞了背景我不知道为什么，即使我用 wmode=transparent 制作了两个 iframe。

所以我在最后一个 iframe 中通过 js 在 IE 小于 9 中创建了一个背景。

谢谢你们的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:50:24.867

你使用正确的 DOCTYPE 吗？

[http://www.w3.org/QA/2002/04/valid-dtd-list.html](http://www.w3.org/QA/2002/04/valid-dtd-list.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T14:55:23.303

您是否尝试过删除您设置的负填充。这可能会导致 ie7/8 出现问题。

# php - 使用 mail() 函数发送的邮件未发送

> ID：13252491
> 
> 赞同：1
> 
> 时间：2012-11-06T13:52:14.617
> 
> 标签：php, email

> **可能重复：**
> [php邮件功能](https://stackoverflow.com/questions/2757113/php-mail-function)

我正在做这个网站，例如当用户忘记密码或类似信息时，我会向他们发送电子邮件，但由于某种原因，我无法发送具有以下功能的电子邮件：

```
$email = 'somemail@mail.com';
$subject = 'subject';
$message = 'message blablablablabla';

mail($email, $subject, $message); 
```

我是在代码中做错了什么或遗漏了什么，还是托管公司的错？（我在 x10hosting.com 上建立我的网站）。我查看了有关 mail() 的手册，但它对我没有帮助。提前致谢。

**更新**

感谢您的帮助，但事实证明这是我所在的网络托管公司的问题。现在一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:02:24.767

尝试与标题一起使用`enter code here`

```
 $headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=iso-8859-1\r\n";
$headers .= "Content-Transfer-Encoding: 7bit\r\n";
$headers .= "From: <".$frommail.">\r\n";
$headers .= "Reply-To: ".$frommail."\r\n";
$mail_sent=mail($tomail,  $msg, $headers);`enter code here` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:15:27.080

我猜要么没有`sendmail_from`设置值，`php.ini`要么您的主机不支持电子邮件或未正确设置它。

尝试设置一个 from 标头，如果这不起作用，请联系您的主机：

`mail($email, $subject, $message,'From: you@example.com');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:44:57.227

这是在本地主机上吗？还是在网络服务器上

还要记住 mail($to, $subject, $contents) 返回一个布尔值，

```
 if(mail($to, $subject, $body){
       echo "Message has been sent";
  }
  else{
       echo "Error has occurred"
  } 
```

# google-analytics-api - ga:landingPagePath 问题

> ID：13252495
> 
> 赞同：1
> 
> 时间：2012-11-06T13:52:32.730
> 
> 标签：google-analytics-api

我需要帮助使用谷歌分析 ga:landingPagePath 获取会话的登录页面。

当我使用下面的查询时，我第一次使用 IE 访问时得到了正确的结果。但是，当我关闭 IE 并打开 Firefox 并访问不同的登录页面时，我仍然会得到上一个会话的登录页面。我应该得到当前 Firefox 会话的登录页面，除非这是一个新的浏览器会话。提前感谢您的帮助。

```
 // query google analytics
    var query1 = new Google.GData.Analytics.DataQuery(dataFeedUrl);
    query1.Ids = string.Format("ga:{0}", profileId);
    query1.Metrics = "ga:entrances";
    query1.Dimensions = "ga:landingPagePath";
    //query1.Filters = "ga:entrances==1";

    //query.Filters = string.Format("ga:pagePath=={0}", url);

    // set from and to date (google does not accept datetime min/max value)
    string fromDate = DateTime.Today.ToString("yyyy-MM-dd");
    query1.GAStartDate = fromDate;
    query1.GAEndDate = DateTime.Today.AddDays(1).ToString("yyyy-MM-dd");

    var dataFeed = service.Query(query1);
    if (dataFeed != null && dataFeed.Entries != null && dataFeed.Entries.Count > 0)
    {
        var dataEntries = dataFeed.Entries.Last() as Google.GData.Analytics.DataEntry;
        var landingPage = dataEntries;
        result = landingPage.Dimensions.Last().Value.ToString();
        HttpContext.Current.Session["landing"] = result.ToString();

    }
    return result;
} 
```

# wcf - Creating generic WCF Fault Exception within Message Inspector, will not be caught

> ID：13252504
> 
> 赞同：2
> 
> 时间：2012-11-06T13:53:07.470
> 
> 标签：wcf, exception, generics, faultexception

When creating a generic fault exception `FaultException<MyWebServiceFaultDetail>` and passing it back to the message inspector pipeline as a MessageFault, the client will not receive the generic fault in its catch `(FaultException<MyWebServiceFaultDetail> ex)` block, it is only caught within the `catch (FaultException ex)` block.

The `MyWebServiceFaultDetail` and `IClientMessageInspector` implication both live within the same project as the client WCF web reference in a single project `MyProjects.MyWebService`.

The WebService is called by another project which has a reference to the `MyProjects.MyWebService` project.

*Comments have been removed for brevity

The data contract:

```
[DataContract]
public class MyWebServiceFaultDetail
{
    [DataMember]
    public string MessageDetail { get; set; }

    [DataMember]
    public string MessageType { get; set; }

    [DataMember]
    public string TransactionComplete { get; set; }

    [DataMember]
    public string TransactionSuccess { get; set; }

    public override string ToString()
    {
        return string.Format("Detail[MessageDetail={0}] [MessageType={1}] [TransactionComplete={2}] [TransactionSuccess={3}]", MessageDetail,MessageType ,TransactionComplete ,TransactionSuccess );
    }
} 
```

The message inspector. I would just add that `reply.Headers.Action` is null when this method runs. Setting the action value on the call to CreateMessage() has had no affect. Values I have tried.

**.CreateMessage(reply.Version, ex.CreateMessageFault(), "*");**

**.CreateMessage(reply.Version, ex.CreateMessageFault(), reply.Headers.Action);**

**.CreateMessage(reply.Version, ex.CreateMessageFault(), ex.Action);**

```
internal class ResponseMessageInspector : System.ServiceModel.Dispatcher.IClientMessageInspector
{
    private static NLog.Logger _logger = NLog.LogManager.GetCurrentClassLogger();

    public void AfterReceiveReply(ref Message reply, object correlationState)
    {
        MessageBuffer bufferedMessage = null;

        try
        {
            bufferedMessage = reply.CreateBufferedCopy(Int32.MaxValue);

            Message replacedMessage = bufferedMessage.CreateMessage();

            if (bufferedMessage.MessageContentType != "application/soap+msbin1" || reply.IsEmpty || reply.IsFault)
            {
                reply = replacedMessage;
                return;
            }

            bool isErrorMessage;

            var messageReader = replacedMessage.GetReaderAtBodyContents();

            isErrorMessage = (messageReader.Name == "TransactionReport");

            if (isErrorMessage)
            {
                string transactionComplete = "",
                    transactionSuccess = "",
                    messageType = "",
                    messageDetail = "",
                    messageBrief = "";

                while (messageReader.Read())
                {
                    if (messageReader.NodeType == XmlNodeType.Element && !messageReader.IsEmptyElement)
                    {
                        switch (messageReader.Name)
                        {
                            case "TransactionComplete":
                                transactionComplete = messageReader.ReadString();
                                break;

                            case "TransactionSuccess":
                                transactionSuccess = messageReader.ReadString();
                                break;

                            case "MessageType":
                                messageType = messageReader.ReadString();
                                break;

                            case "MessageDetail":
                                messageDetail = messageReader.ReadString();
                                break;

                            case "MessageBrief":
                                messageBrief = messageReader.ReadString();
                                break;

                            default:
                                break;
                        }
                    }
                }

                if (string.IsNullOrEmpty(messageBrief))
                {
                    messageBrief = "My response processing fault: {Unable to obtain error message from My response, enable WCF message tracing for more detailed information}";

                    _logger.Warn(messageBrief);
                }

                FaultException ex = new FaultException<MyWebServiceFaultDetail>(
                    new MyWebServiceFaultDetail
                    {
                        TransactionComplete = transactionComplete,
                        TransactionSuccess = transactionSuccess,
                        MessageDetail = messageDetail,
                        MessageType = messageType
                    },
                    new FaultReason(messageBrief));

                Message faultMessage = Message.CreateMessage(reply.Version, ex.CreateMessageFault(), null);

                faultMessage.Headers.CopyHeadersFrom(reply.Headers);
                faultMessage.Properties.CopyProperties(reply.Properties);

                reply = faultMessage;
            }
            else
                reply = bufferedMessage.CreateMessage();
        }
        finally
        {
            if (bufferedMessage != null)
                bufferedMessage.Close();
        }
    }

    public object BeforeSendRequest(ref Message request, System.ServiceModel.IClientChannel channel)
    {
        return null;
    }
} 
```

The client code that is reciving the `FaultException` but not a `FaultException<MyWebServiceFaultDetail>`

```
 internal static T TrySendToMyWebService<T>(
        CallWebServiceDelegate<T> callWebService,
        bool expectResponce,
        out MessageProcessorResult result) where T : class
    {
        T MyWebServiceResponce = null;

        result = new MessageProcessorResult();

        using (ServiceRequestConnectorServiceSoapClient ws =
          new ServiceRequestConnectorServiceSoapClient())
        {
            try
            {
                MyWebServiceWebServiceHelper.LogOn(ws);
                MyWebServiceResponce = callWebService(ws);
                if (expectResponce && MyWebServiceResponce == null)
                {
                    result.ShouldRetry = true;
                    result.RetryReason = "Unexpected MyWebService web service response. The response was null";
                }
            }
            catch (FaultException<MyWebServiceFaultDetail> ex)
            {
                // I never get called :(
                result.Exception = ex;
                result.ShouldRetry = true;
                result.RetryReason = string.Format("An Exception was raised calling the MyWebService web service: Reason:{0}  /r/nDetails: {1}", ex.Reason, ex.Detail.ToString());
                _logger.ErrorException(result.RetryReason, ex);
            }
            catch (FaultException ex)
            {
                result.Exception = ex;
                result.ShouldRetry = true;
                result.RetryReason = string.Format("An Exception was raised calling the MyWebService web service: {0}", ex.Message);
                _logger.ErrorException(ex.Message, ex);
            }
            finally
            {
                MyWebServiceWebServiceHelper.LogOff(ws);
            }
        }

        return MyWebServiceResponce;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:29:18.667

The problem could be here as you are specifying 2 format arguments and only supplying 1:

```
public override string ToString()
{
    return string.Format("Detail[MessageDetail={0}] [MessageType={1}] [TransactionComplete={1}] [TransactionSuccess={1}]", MessageDetail);
} 
```

So you actually get a `FormatException` thrown by `string.Format` rather than your `FaultException<JoBlogsWebServiceFaultDetail>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:30:10.380

Just throw the new typed `FaultException<MyWebServiceFaultDetail>` from the `AfterReceiveReply` of your message inspector.

```
FaultException ex = new FaultException<MyWebServiceFaultDetail>(
                new MyWebServiceFaultDetail
                {
                    TransactionComplete = transactionComplete,
                    TransactionSuccess = transactionSuccess,
                    MessageDetail = messageDetail,
                    MessageType = messageType
                },
                new FaultReason(messageBrief));
throw ex; 
```

If your detail class is declared on the client side, you don't even need to decorate it with `DataContract` attribute.

# javascript - 淘汰 renderTemplate() 渲染模式

> ID：13252505
> 
> 赞同：8
> 
> 时间：2012-11-06T13:53:08.453
> 
> 标签：javascript, templates, knockout.js, custom-binding

我正在尝试调用`ko.renderTemplate()`自定义绑定。

但是我找不到任何关于它的使用文档，尤其是渲染模式参数。

[Knockout.js 专业提示——使用模板](http://www.strathweb.com/2012/08/knockout-js-pro-tips-working-with-templates/)

上面的站点有一个部分*“您可以直接从自定义绑定呈现模板”*，简要描述了`renderTemplate()`.

**渲染模式参数的其他可用选项是什么？**

`renderTemplate()`此外，是否有我可能错过的任何文档和渲染引擎选项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T14:02:30.327

仅从查看 2.2.0 的源代码来看。

renderMode 参数似乎有两个选项：

*   **replaceNode** - 这将用模板的输出替换整个目标节点。
*   **replaceChildren** -**默认**。这将仅替换目标节点的子节点，而目标节点保持不变。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T23:05:22.967

[您可以通过本文](http://aboutcode.net/2012/11/15/twitter-bootstrap-modals-and-knockoutjs.html)中的一些示例找到对 ko.renderTemplate() 进行了很好的解释。

# mysql - 查询相关表

> ID：13252509
> 
> 赞同：1
> 
> 时间：2012-11-06T13:53:21.030
> 
> 标签：mysql, database

我目前正在尝试运行一个查询，该查询将显示所有相互关联的表。我没有做桌子设计。所以我在制作时遇到了一些麻烦：不清楚`office_hours`table 与 table的相关性如何`schedule`？总体而言，如何正确显示通过查询关联的所有表？

```
SELECT * 
FROM schedule
INNER JOIN semester ON schedule.semester_id = semester.id
INNER JOIN office_hours ON office_hours.id = schedule.??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:56:26.330

我认为`ID`from table`schedule`只是一`auto_increment`列，正确的加入方式`schedule`是.`office_hours``office_hours.schedule_id = schedule.semester_id`

```
select      *
from        schedule 
            inner join semester 
                on schedule.semester_id = semester.id
            inner join office_hours
                on office_hours.schedule_id = schedule.semester_id 
```

**更新 1**

```
select      *
from        schedule 
            inner join semester 
                on schedule.semester_id = semester.id
            inner join office_hours
                on office_hours.schedule_id = schedule.semester_id
            INNER JOIN faculty
                ON faculty.id = office_hours.faculty_id
            INNER JOIN Section
                ON Section.faculty_ID = faculty.id AND
                    Section.Schedule_ID = Schedule.ID
            INNER JOIN class
                ON Class.ID = Section.Class_ID
            INNER JOIN major_class_br
                ON major_class_br.class_ID = Class.ID
            INNER JOIN  major_minor 
                ON major_class_br.major_minor_id = major_minor.ID 
```

假设每个表上都存在所有列`ID`或*链接列*`INNER JOIN`，这就是使用的原因。否则，使用`LEFT JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T13:56:54.493

您必须使用两个表中的 id：

```
...
inner join office_hours on office_hours.schedule_id = schedule.id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:00:53.463

试试这个：

```
SELECT *
FROM 
SCHEDULE 
INNER JOIN semester 
ON schedule.semester_id = semester.id
INNER JOIN office_hours
ON office_hours.schedule_id = schedule.id 
```

# c# - 使用 ODP.NET 将 Oracle 与 Enterprise Library DAAB 连接起来

> ID：13252511
> 
> 赞同：1
> 
> 时间：2012-11-06T13:53:24.433
> 
> 标签：c#, oracle, enterprise-library, odp.net

我们的应用程序使用 Enterprise Library DAAB 来支持 oracle 和 sql 数据库。

存储过程之一是将图像上传到表。它是一个 BLOB 字段，参数设置为 DbType.Binary。

此功能对 SQL 没有任何问题，但是当谈到 Oracle 时，我遇到了 32K 参数大小限制问题。

正如 SO 中所建议的，我将代码移至 ODP.NET，但我仍然面临同样的问题。

我的 App.config 文件设置：

```
<configuration>
<configSections>
    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
</configSections>
<dataConfiguration defaultDatabase="Oracle">
    <providerMappings>
        <add databaseType="Microsoft.Practices.EnterpriseLibrary.Data.Oracle.OracleDatabase, Microsoft.Practices.EnterpriseLibrary.Data, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            name="Oracle.DataAccess.Client" />
    </providerMappings>
</dataConfiguration>
<connectionStrings>
    <add name="Oracle" connectionString="Data Source=MYORACSER;USER ID=UNAME;PASSWORD=MYPWD;"
        providerName="Oracle.DataAccess.Client" />
</connectionStrings> 
```

**在我的应用程序代码中，我使用企业库来访问数据库**

```
 Database db = DatabaseFactory.CreateDatabase(); 
 DbCommand cmd = db.GetStoredProcCommand(spName);
 cmd.CommandType = CommandType.StoredProcedure;
 db.AddInParameter(cmd, "DOCIMAGE", DbType.Binary, GetByteArrayFromFile(filePath));
 db.AddOutParameter(cmd, "return_value", DbType.Int32, 128);
 int row = db.ExecuteNonQuery(cmd); 
```

**我的项目中引用了以下程序集：**

![在此处输入图像描述](../Images/4d974b4a7bfeb7c20b1cd1c22cb4c55f.png)

**现在当我运行应用程序时，Ent Lib DAAP 应该使用 Oracle.DataAccess.Client，但它仍然通过 System.Data.OracleClient 连接到 oracle db。所以 32K 限制仍然存在。**

![在此处输入图像描述](../Images/2c40e204f426b8da530c869ec96059f0.png)

**为什么它不使用我在 App.config 中明确提到的 Oracle 数据提供程序？**

在一篇文章中，提到使用以下代码段作为解决方法，

```
DbProviderFactory providerFactory = DbProviderFactories.GetFactory("Oracle.DataAccess.Client");
Database db = GenericDatabase(connectionString, providerFactory); 
```

**这似乎工作。**

![在此处输入图像描述](../Images/a4304e80bda497f72ee312784c0f6217.png)

但是实例化的数据库是 GenericDatabase 而不是 OracleDatabase，这可能就是为什么当文件大小超过 32K 时，即使这个工作仍然抛出异常。

**如何将 ODP.NET 与企业库一起使用以解决 32K 大小限制问题？**

**已解决**：

我跟着**hridya**走过。正如他所提到的，有 XML 注释错误，可以关闭[（看这里）](https://stackoverflow.com/questions/2520853/warning-as-error-how-to-rid-these)。还有一些命名空间冲突通过选择 Oracle.DataAccess.Client 得到解决。经过这些，它编译成功。

这是我为测试更改而制作的示例应用程序的代码片段。（示例解决方案现在引用新编译的 Data 和 Common dll。）

```
Database db = DatabaseFactory.CreateDatabase();
            DbCommand cmd = db.GetStoredProcCommand(sqlCode);
            cmd.CommandType = CommandType.StoredProcedure;
            db.AddInParameter(cmd, "DOCIMAGE", DbType.Binary, GetByteArrayFromFile(filePath));
            db.AddOutParameter(cmd, "return_value", DbType.Int32, 128);
            int rowID = db.ExecuteNonQuery(cmd); 
```

我检查了命令对象，现在它是 Oracle.DataAccess.Client.OracleCommand 类型，而之前它是 System.Data.OracleClient.OracleCommand。

请记住，因为我已经修改了 DAAB 以使用 ODP.NET，所以我不需要使用 providerMappings 标记在配置文件中显式设置提供程序。

但是当文件大小超过 32K 时，我仍然会遇到相同的错误，逐行进入代码显示问题出在 DbType.Binary 上。它没有更改为正确的 OracleDbType。

为了使它工作，我在 Enterprise Lib 的数据项目中添加了一个代码修复程序。

文件：**\Oracle\OracleDatabase.cs**

方法：**添加参数**

原始代码：

```
public override void AddParameter(DbCommand command, string name, DbType dbType, int size,
        ParameterDirection direction, bool nullable, byte precision, byte scale, string sourceColumn,
        DataRowVersion sourceVersion, object value)
    {
        if (DbType.Guid.Equals(dbType))
        {
            object convertedValue = ConvertGuidToByteArray(value);

            AddParameter((OracleCommand)command, name, OracleDbType.Raw, 16, direction, nullable, precision,
                scale, sourceColumn, sourceVersion, convertedValue);

            RegisterParameterType(command, name, dbType);
        }
        else
        {
            base.AddParameter(command, name, dbType, size, direction, nullable, precision, scale,
                sourceColumn, sourceVersion, value);
        }
    } 
```

为 DbType.Binary 添加了条件

修改代码：

```
public override void AddParameter(DbCommand command, string name, DbType dbType, int size,
        ParameterDirection direction, bool nullable, byte precision, byte scale, string sourceColumn,
        DataRowVersion sourceVersion, object value)
    {
        if (DbType.Guid.Equals(dbType))
        {
            object convertedValue = ConvertGuidToByteArray(value);

            AddParameter((OracleCommand)command, name, OracleDbType.Raw, 16, direction, nullable, precision,
                scale, sourceColumn, sourceVersion, convertedValue);

            RegisterParameterType(command, name, dbType);
        }
        else if(DbType.Binary.Equals(dbType))
        {
            AddParameter((OracleCommand)command, name, OracleDbType.Blob, size, direction, nullable, precision,
                scale, sourceColumn, sourceVersion, value);

        }
        else
        {
            base.AddParameter(command, name, dbType, size, direction, nullable, precision, scale,
                sourceColumn, sourceVersion, value);
        }
    } 
```

我不知道这是否是正确的方法或其他一些时尚的解决方法是否已经可用。但它奏效了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:33:02.903

我希望以下步骤能给您正确的结果。

用 Oracle.DataAccess.Client 替换 System.Data.OracleClient；和 Oracle.DataAccess.Types

下载并安装最新版本的 Microsoft Enterprise Library 3.1 可以在这里找到：- [http://msdn2.microsoft.com/en-us/library/aa480453.aspx](http://msdn2.microsoft.com/en-us/library/aa480453.aspx)

从 Oracle 网站下载并安装 Oracle ODP.Net 您的 DLL 文件应位于：- C:\oracle\product\11.1.0\client_1\odp.net\bin\2.x\Oracle.DataAccess.dll

当它提示您安装源时，请使用复选框。

如果您没有在以下路径 C:\Program Files\Microsoft Enterprise Library 3.1 - May 2007\src 上运行 msi

库的代码存储在以下路径 C:\EntLib3Src\App Blocks

备份原始 src 文件夹以备日后需要时使用 - C:\EntLib3Src\App Blocks\Src

打开解决方案文件 EnterpriseLibrary.sln 并进入 Data Access Application Block 下的数据项目

将 Oracle.DataAccess.dll 引用添加到数据项目。您的 DLL 文件应位于：- C:\oracle\product\11.1.0\client_1\odp.net\bin\2.x\Oracle.DataAccess.dll

搜索并替换以下内容 [相反，您可以下载并使用本文附带的更新的 DLL]

文件：- C:\EntLib3Src\App Blocks\Src\Data\Oracle\OracleDatabase.cs
文件：- C:\EntLib3Src\App Blocks\Src\Data\DatabaseConfigurationView.cs
文件：- C:\EntLib3Src\App Blocks\Src \Data\Oracle\OracleDataReaderWrapper.cs

查找：-`using System.Data.OracleClient;`
替换为：-`using Oracle.DataAccess.Client; using Oracle.DataAccess.Types;`

文件：- C:\EntLib3Src\App Blocks\Src\Data\Configuration\DbProviderMapping.cs 类：- DbProviderMapping

查找：-`System.Data.OracleClient`
替换为：-`Oracle.DataAccess.Client`

文件：- C:\EntLib3Src\App Blocks\Src\Data\Configuration\Manageability\ ConnectionStringsManageabilityProvider.cs
方法：-`AddAdministrativeTemplateDirectives`
查找：-`System.Data.OracleClient`
替换为：-`Oracle.DataAccess.Client`

文件：- C:\EntLib3Src\App Blocks\Src\Data\Oracle\OracleDatabase.cs
方法：-`AddParameter`

寻找 ：-`public void AddParameter(OracleCommand command, string name, OracleType oracleType, int size, ParameterDirection direction, bool nullable, byte precision, byte scale, string sourceColumn, DataRowVersion sourceVersion, object value)`

用。。。来代替：-`public void AddParameter(OracleCommand command, string name, OracleDbType oracleType, int size, ParameterDirection direction, bool nullable, byte precision, byte scale, string sourceColumn, DataRowVersion sourceVersion, object value)`

原因：- OracleType 替换为 OracleDbType 作为第三个参数作为 odp.net API 中的类型名称

文件：- C:\EntLib3Src\App Blocks\Src\Data\Oracle\OracleDatabase.cs
删除：- `[OraclePermission(SecurityAction.Demand)]`-

不知道如果有人这样做会做什么请简要介绍反馈会议

文件：- C:\EntLib3Src\App Blocks\Src\Data\Oracle\OracleDatabase.cs
查找：-`OracleType.Raw`
替换为：-`OracleDbType.Raw`

查找：-`param.OracleType`
替换为：-`param.OracleDbType`

查找：-`OracleType.Cursor`
替换为：-`OracleDbType.RefCursor`

查找：-`parameter.OracleType`
替换为：-`parameter.OracleDbType`

立即编译，如果出现错误，请执行以下警告作为错误：XML 注释 - 删除突出显示的错误内容/将其替换为适当的注释希望它现在应该可以编译。

现在通过编译上述项目生成的 DLL 可用于 SqlServer 和 Oracle [ODP.Net]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:29:03.027

对此有点晚了，但我看不出响应者建议使用 EL3.1 的充分理由 这是非常过时的 - 5 是最新版本（在这篇文章之前已经发布了近 2 年）和OP 根据代码示例使用 4.1。将 ODP 与 EL5 一起使用要简单得多（我自己也这样做过，利用 EntlibContrib 项目），虽然我不能说参数大小的任何潜在问题，因为我们不使用 BLOB，但 EntlibContrib 本身允许使用 OracleDbType，所以我认为这可能不是问题。

以防万一有人偶然发现这篇文章想知道如何让 EL5 和 ODP 以最小的麻烦很好地发挥作用，我可以提供详细信息 - 私信我。

# java - 如何向 Grails 添加依赖项？

> ID：13252514
> 
> 赞同：1
> 
> 时间：2012-11-06T13:53:41.837
> 
> 标签：java, grails, dependencies

我将 grails 与 Netbeans 一起使用，我只是想添加一个依赖项。

命令行都不是：

```
grails install-dependency org.mindrot:jbcrypt:0.3m 
```

也不是 BuildConfig.grooy：

```
dependencies {      
  runtime 'org.mindrot:jbcrypt:0.3m'        
} 
```

方法似乎对我有用。至少是这样，或者 Netbeans 没有意识到依赖关系实际上已经出现了。该项目未构建，Netbeans 声称代码编辑器中不存在包/类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:40:03.913

您是否尝试过将范围从“运行时”更改为编译以查看它们是否出现？

如果您在 BuildConfig.groovy 中设置了 pom=true，您可以在 pom.xml 中添加依赖项并尝试这样做

```
<dependency>
    <groupId>org.mindrot</groupId>
    <artifactId>jbcrypt</artifactId>
    <version>0.3m</version>
</dependency> 
```

# javascript - jquery的id.text（）忽略ie8中超过1个空格

> ID：13252517
> 
> 赞同：0
> 
> 时间：2012-11-06T13:53:51.447
> 
> 标签：javascript, jquery, internet-explorer

我有一个 ID SOMEID 的跨度。当我使用以下代码访问其文本值时，它仅在 IE8 和 IE7 中中断。如何修复它。

`$("#DocumentPath").text()`. 如果 DocumentPath 包含名称`My doc.txt`，则它不起作用。注意这里在 My 和 doc 之间有 3 个空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:03:59.433

您非常模糊的问题描述“它正在破坏的代码”只能让我们猜测，但请注意以下几点：IE 对待标记中的空格与其他浏览器不同。

从[文档](http://api.jquery.com/text/)：

> （由于不同浏览器中 HTML 解析器的差异，返回的文本在换行符和其他空白处可能会有所不同。）
> 
> .text() 方法的结果是一个字符串，其中包含所有匹配元素的组合文本。
> 
> 从 jQuery 1.4 开始，.text() 方法返回文本和 CDATA 节点以及元素节点的值。

`html()`如此说来，使用该方法可能更适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T18:42:23.880

也许您应该尝试另一种方法，在 jQuery 的文档上，他们建议调用`.eval()`函数来检索值而不是`.text()`检查他们的文档：[http ://api.jquery.com/text/](http://api.jquery.com/text/)

所以代码片段可能是：

```
$("#DocumentPath").eval() 
```

问候

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:57:18.500

应该

```
$("#DocumentPath").html() 
```

那就是说你说你的跨度有一个 id SOMEID？！如果它的 id 是 SOMEID 它应该是：

```
$("#SOMEID").html() 
```

# c# - System.Random 默认构造函数系统时钟分辨率？

> ID：13252520
> 
> 赞同：4
> 
> 时间：2012-11-06T13:53:58.360
> 
> 标签：c#, .net, random

我有几个使用 System.Random 的默认构造函数生成随机数的过程。我在 MSDN 上读到过它，但它没有说明它使用的特定系统时钟分辨率，例如 System.Random 是否以毫秒或秒为单位获取系统时钟种子？在多个进程中使用默认构造函数来获取它们之间的随机值是否安全？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:01:41.097

种子以毫秒为单位，范围为 10 毫秒到 16 毫秒。但要记住的最重要的事情是，您应该始终使用相同的实例`Random`来*生成* 不同的“随机”值。如果您总是在一个紧密的循环中创建一个新实例，那么您会多次获得相同的值。

因此，如果您仍然使用相同的实例，则使用默认构造函数是“安全的”。如果不是因为你在不同的线程中需要它们，你可以使用 Jon Skeet 的这个帮助类（来自[这里](https://stackoverflow.com/a/1785821/284240)）：

```
public static class RandomHelper
{
    private static int seedCounter = new Random().Next();

    [ThreadStatic]
    private static Random rng;

    public static Random Instance
    {
        get
        {
            if (rng == null)
            {
                int seed = Interlocked.Increment(ref seedCounter);
                rng = new Random(seed);
            }
            return rng;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T14:16:52.863

它使用`Environment.TickCount`你可以在反射器中检查它。但关键是要获得一个唯一的种子，因此您可以使用 ProcessID 对该值进行算术运算。像：

```
Random(Environment.TickCount + System.Diagnostics.Process.GetCurrentProcess().Id); 
```

等等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T14:07:21.097

如果您使用不同的进程，请考虑使用进程 ID 为每个进程创建 Random 的单个实例。

```
private static readonly Random _theSingleRandom = 
                          new Random(Process.GetCurrentProcess().Id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T13:59:57.940

System.Random 使用 TickCount 作为其种子。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408(v=vs.85).aspx)上的 MSDN 文档指出，

> 分辨率 [...] 受限于系统计时器的分辨率，通常在 10 毫秒到 16 毫秒的范围内。

所以在 2 个不同的 TickCount 值之间有 10 到 16 毫秒。

# html - 将表格列和行并排对齐以进行打印

> ID：13252522
> 
> 赞同：0
> 
> 时间：2012-11-06T13:54:00.463
> 
> 标签：html, css, printing, html-table

我有一个表格网格布局，我已经为打印设置了样式，但是我在尝试将缩略图图像向左对齐，然后在缩略图旁边对齐两行时遇到问题。

不确定如何最好地使用表格正确对齐，因为我习惯于使用 div。

我在这里有以下代码：-http: [//jsfiddle.net/nCTFe/](http://jsfiddle.net/nCTFe/)

所以基本上 [FIRST LINE 和 SECOND LINE] 需要像第一张桌子一样，但在左边的图像旁边，此刻我的一直坐在它下面！

任何帮助都会很棒，小提琴更好地证明了这一点！

```
<table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td width="30%" class="bottom_bdr stocklistItemImage">
                <img height="75" width="100" class="stocklist_thumb" 
                     border="2"  src="http://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Funivia_Rote_Nase_alt.JPG/300px-Funivia_Rote_Nase_alt.JPG" 
                     alt="">
            </td>
        </tr>

        <tr>
            <td width="70%" class="vfeatures bdrBottom">
                <span style="font-weight:bold">FIRST LINE:</span> Seatis, Seatis, Seatis, Seatis, Seatis, Seatis, Seatis
            </td>
        </tr>

        <tr>
            <td width="70%" class="bottom_bdr a_top stocklistItemDescription">
                <span style="font-weight:bold">SECOND LINE</span> Seatis, Seatis, Seatis, Seatis, Seatis, Seatis, Seatis
            </td>
        </tr>
        <tr>
            <td class="" width="70%">&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:05:05.380

您需要对 HTML 表格的工作方式有一个基本的了解。`<tr>`表示“表格行”，或表格中单元格的*水平*对齐方式。

因此，为了使文本位于图像的右侧，您需要将它们放在同一行中。*但是*，您似乎希望*两*行（第一行和第二行）都与图像位于同一行。您可以通过将`rowspan`第一行`<td>`（用于图像）设置为`2`，将**第一行**放在与图像相同`<tr>`的位置，然后将**第二行**放在新的`<tr>`.

```
 <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tbody>
            <tr>
                <td width="30%" class="bottom_bdr stocklistItemImage" rowspan="2>
                    <img height="75" width="100" class="stocklist_thumb" border="2" src="http://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Funivia_Rote_Nase_alt.JPG/300px-Funivia_Rote_Nase_alt.JPG" alt="">
                </td>
                <td width="70%" class="vfeatures bdrBottom">
                    <span style="font-weight:bold">FIRST LINE:</span> Seatis, Seatis, Seatis, Seatis, Seatis, Seatis, Seatis
                </td>
            </tr>
            <tr>
                <!--No first cell here; it's already covered by the image td with the rowspan="2" -->
                <td width="70%" class="bottom_bdr a_top stocklistItemDescription">
                    <span style="font-weight:bold">SECOND LINE</span> Seatis, Seatis, Seatis, Seatis, Seatis, Seatis, Seatis
                </td>
            </tr>
        </tbody>
    </table> 
```

我在这里更新了你的小提琴：http: [//jsfiddle.net/CjAMc/1/](http://jsfiddle.net/CjAMc/1/) （我还必须删除最后一个空白`<td>`，宽度为 70%。）

此外，您小提琴中的表格布局一团糟，您将在那里遇到更多问题。我强烈建议您了解表格的工作原理并从头开始这个项目。

# javascript - 从 JQuery Mobile 历史记录中删除页面，以便“返回”按钮绕过它

> ID：13252524
> 
> 赞同：1
> 
> 时间：2012-11-06T13:54:04.503
> 
> 标签：javascript, jquery, jquery-mobile, navigation, history

我浏览了 jQuery Mobile 文档无济于事，所以希望这里有人已经解决了我到目前为止还没有找到方法的问题。

我有一个 jquery 移动页面，以通常的方式提供（称之为“项目显示”）。它包含有关特定项目的信息。此页面上有一个按钮，可将用户带到一个页面，他/她可以在其中记录所显示项目的注释（本质上是一个大文本区域）。单击注释页面上的“保存”会发布并重定向回项目显示页面。

我的问题是，一旦保存了笔记，我希望项目显示页面上的“返回”按钮链接回用户在首次访问项目显示页面之前所在的页面，而不是默认的用户行为返回注释页面（因为从技术上讲，它是用户所在的最后一页）。

所以，目前的行为：

项目列表页面 -> 项目显示页面 -> 点击“编辑项目备注” -> 备注页面 -> 点击“保存” -> 项目显示页面 -> 点击“返回” -> 备注页面。

我想通过单击“返回”来替换最后一步，以将用户带到项目列表页面。

有这样的运气吗？感谢您提供的任何和所有指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T10:03:45.190

您可以更改页面而不将它们保留在浏览器历史记录中，如下所示：

```
$.mobile.changePage('#page', {reverse: false, changeHash: false}); 
```

这是基于这个答案：[Jquery mobile, remove previous page](https://stackoverflow.com/questions/11099905/jquery-mobile-remove-previous-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:19:58.913

我和你遇到了同样的问题，我创造了一种方法，唯一有效的方法。如果有人知道更好的东西，那将非常有帮助！所以，让我解释一下如何解决（这有点复杂，但对我有用）。

您将需要覆盖后退按钮以通过您想要的 html 中的 X 页回滚历史记录，例如：

```
$(document).ready(function() {
    $('[data-rel=back]').click(function() {
        window.history.go(-4);
        return false;
    });
}); 
```

但是，4 实际上是会话中的导航计数器变量。

如果你使用jsf，它会是这样的：

```
window.history.go(-#{mySessionManagedBean.navigationCounter}); 
```

此外，您需要在每次页面更改时初始化和递增此值。

如果你使用jsf，它会是这样的：

```
<h:commandButton ...>
    <f:setPropertyActionListener target="#{mySessionManagedBean.navigationCounter}" value="#{mySessionManagedBean.navigationCounter + 1}" />
</h:commandButton> 
```

# java - Property.ValueChangeListener - 无法解析为变量 (Vaadin)

> ID：13252526
> 
> 赞同：0
> 
> 时间：2012-11-06T13:54:09.480
> 
> 标签：java, vaadin

我正在尝试 vaadin 网站上提供的教程，当我在表格的行上设置项目选择时，教程建议我应该将以下行添加到我的表格类中。

```
addListener((Property.ValueChangeListener), app); 
```

作为应用程序对我的控制器的引用。但是，eclipse 将错误指向 Property.ValueChangeListener“Property.ValueChangeListener 无法解析为变量”。

我到底在这里做错了什么？

PS：我相信我的导入是正确的，因为 Eclipse 的自动完成功能可以很好地识别 .ValueChangeListener

个人列表类：

```
package com.example.simpleaddressbook2;

import com.vaadin.data.Property;
import com.vaadin.ui.Table;

public class PersonList extends Table {

    public PersonList(Simpleaddressbook2Application app){

        setSizeFull();
        setContainerDataSource(app.getDataSource());
        setVisibleColumns(PersonContainer.NATURAL_COL_ORDER);
        setColumnHeaders(PersonContainer.COL_HEADERS_ENGLISH);
        setSelectable(true);
        setImmediate(true);
        addListener((Property.ValueChangeListener), app);
        setNullSelectionAllowed(false);
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:06:07.957

发现有什么问题，正确的代码是：

```
addListener((Property.ValueChangeListener) app); 
```

并不是

```
addListener((Property.ValueChangeListener), app); 
```

该死的逗号！

# rubymotion - 如何在模态中打开“窗口”？

> ID：13252527
> 
> 赞同：0
> 
> 时间：2012-11-06T13:54:12.413
> 
> 标签：rubymotion

我正在 Rubymotion 的帮助下创建一个 iOS 应用程序。我正在使用 navigationController 作为 rootview，我需要在模式中打开一个窗口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:15:31.463

您需要在另一个 UIViewController 上打开它。因此，将 UIViewController 推送到您的 UINavigationController 上，然后使用以下`presentModalViewController:animated:`方法：

```
navigation_controller.pushViewController(main_view_controller, animated: true)
main_view_controller.presentModalViewController(modal_controller, animated:true) 
```

完成后，将其关闭：

```
main_view_controller.dismissModalViewControllerAnimated(true) 
```

# git - 移动包含子模块的 git 存储库的父目录

> ID：13252529
> 
> 赞同：1
> 
> 时间：2012-11-06T13:54:23.990
> 
> 标签：git

我已将存储库克隆到 PatchBasedInpaintingDevelop。我已经在那里工作了一段时间，没有任何问题。然后我决定在本地重命名文件夹。我做了'mv PatchBasedInpaintingDevelop PatchBasedInpainting'，现在 git status 抱怨子模块，说：

```
doriad@daviddesktop:/media/portable/Projects/PatchBasedInpainting$ git status
fatal: Not a git repository: /media/portable/Projects/PatchBasedInpaintingDevelop/.git/modules/ITKQtHelpers 
```

有没有办法在不破坏子模块结构的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:22:05.527

您的文件似乎**[`.gitmodules`](http://git-scm.com/docs/gitmodules)**使用绝对路径引用了子模块。

尝试对所述子模块使用*相对*路径。
（例如，在“[在 Git 中管理一组相关的相关存储库](https://stackoverflow.com/a/10277540/6309)”中所示）

```
submodule.<name>.path 
```

> 定义相对于 git 工作树的顶级目录的路径，其中子模块应被检出。
> 路径名不能以`/`. 所有子模块路径在文件中
> 必须是唯一的。`.gitmodules`

唯一的其他解决方案是修复所有绝对路径（如在[此脚本](https://gist.github.com/3394771)中）

# c - 如何将shell脚本输出转换为c结构变量

> ID：13252531
> 
> 赞同：0
> 
> 时间：2012-11-06T13:54:31.340
> 
> 标签：c, shell

我需要将 shell 脚本输出收集到我的 c 程序链表节点中，我也尝试过 popen()。但是那里发生类型转换错误。我的项目中需要这个。请帮忙......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:01:49.193

你尝试了`popen`什么？这按预期工作：

```
#include <stdio.h>

int main(void)
{
    char buf[BUFSIZ];
    FILE *fp = popen("sh script", "r");

    while (fgets(buf, sizeof buf, fp) != NULL)
        printf("Received: '%s'\n", buf);

    pclose(fp);
    return 0;
} 
```

# javascript - 如何绑定淘汰视图模型以动态加载页面？

> ID：13252532
> 
> 赞同：3
> 
> 时间：2012-11-06T13:54:31.947
> 
> 标签：javascript, jquery, knockout.js

我使用 jquery.load 函数动态加载页面，但加载的页面未绑定到 viewModel？

应用程序.js

```
function viewModel(){
    var self = this;
    self.users = ko.observable();

    Sammy(function() {
        this.get("#/users",function() {
            $.get("/api/users",function(data){
                self.users(data);
            });
            $("#content").load("pages/users.html");
        });
    }).run("#/");
}

ko.applyBindings(new viewModel()); 
```

索引.html：

```
<html>
    <body>
        <div id="content"></div>
        <script src="statics/js/lib/jquery-1.8.2.js"></script>
        <script src="statics/js/lib/knockout-2.2.0.debug.js"></script>
        <script src="statics/js/lib/knockout.mapping.js"></script>
        <script src="statics/js/lib/sammy.js"></script>
        <script src="statics/js/lib/app.js"></script>
    </body>
</html> 
```

页面/users.html

```
<ul data-bind="foreach: users">
    <li><span data-bind="text: fullName"></span></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T14:59:41.450

```
$("#content").load("/pages/users.html", function () {
   ko.applyBindings(new viewModel());
} 
```

应该这样做...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T15:01:46.257

我解决了动态页面加载后重新应用绑定的问题

```
function viewModel(){
    var self = this;
    self.users = ko.observable();

    Sammy(function() {
        this.get("#/users",function() {
            $.get("/api/users",function(data){
                self.users(data);
            });
            $("#content").load("pages/users.html", null, function (response, status, xhr) {
                if (status != "error") {
                } 
                    ko.applyBindings(self, $(".dynamic-page-content").get(0)); 
                }
            });
        });
    }).run("#/");
}

ko.applyBindings(new viewModel()); 
```

# php - PHP中的什么正则表达式可以处理内部双引号的反斜杠？

> ID：13252533
> 
> 赞同：1
> 
> 时间：2012-11-06T13:54:34.450
> 
> 标签：php, regex

> **可能重复：**
> [PHP：正则表达式忽略引号内的转义引号](https://stackoverflow.com/questions/5695240/php-regex-to-ignore-escaped-quotes-within-quotes)
> [如何修复 PHP 中格式错误的 JSON？](https://stackoverflow.com/questions/13236819/how-to-fix-badly-formatted-json-in-php)

我的数据看起来像这样：

```
"manager1": "Richard "Dick" Smith, MD, MBA", 
```

但它需要看起来像这样才能与 JSON 一起使用：

```
"manager1": "Richard \"Dick\" Smith, MD, MBA", 
```

注意：不同之处在于反斜杠仅用于 Dick 昵称的内部双引号，而字符串的其余部分保持不变。

我在处理用逗号分隔的证书（MD、MBA）时遇到了问题。如何在 PHP 中使用正则表达式做到这一点，同时只对内部双引号进行反斜杠，同时保留字符串的其余部分？谢谢！

这不是 [如何在 PHP 中修复格式错误的 JSON？](https://stackoverflow.com/questions/13236819/how-to-fix-badly-formatted-json-in-php) 因为该例程无法处理凭据中的额外逗号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:16:50.090

我建议你这样做：

```
//suppose your data is in the file named "data.txt". We read it in a variable

$fh = fopen("data.txt");
$res = '';
while (($line = fgets($fh)) !== false) {
   $txt = explode(': ', $line);
   $txt[1] = trim($txt[1], '",'); 
   //now $txt[1] holds the the data with internal quotes but without external quotes
   $txt[1] = preg_replace('@"@', '\"',  $txt[1]);
   //put leading and ending quotes back and join everything back together
   $txt[1] = '"'.$txt[1].'",';
   $res .= implode(': ', $txt);

}

fclose($fh);

//now echo the result with the all internal quotes escaped
echo $res; 
```

我认为像上面这样的东西应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:29:46.297

以下正则表达式模式：

```
 /^\s+"[a-z0-9_"]+": "([^"]*".*)",?$/mi 
```

为我做的。请参阅[如何更正 php 中的无效 JSON？](https://stackoverflow.com/a/13272743/367456)

# php - php循环链表实现

> ID：13252536
> 
> 赞同：2
> 
> 时间：2012-11-06T13:54:59.993
> 
> 标签：php, linked-list

我写了这个类来实现链表：

```
class Node{
    public $data;
    public $link;

    function __construct($data, $next = NULL){
        $this->data = $data;
        $this->link = $next;
    }    
}

class CircularLinkedList{
    private $first;
    private $current;
    private $count;

    function __construct(){
        $this->count = 0;
        $this->first = null;
        $this->current = null;
    }

    function isEmpty(){
        return ($this->first == NULL);
    }

    function push($data){
        //line 30
        $p = new Node($data, $this->first);
        if($this->isEmpty()){
            $this->first = $p;
            $this->current = $this->first;
        }
        else{           
            $q = $this->first;
            //line 38
            while($q->link != $this->first)
                $q = $q->link;
            $q->link = $p;    
        }
        $this->count++;       
    }

    function find($value){
        $q = $this->first;
        while($q->link != null){
            if($q->data == $value)
                $this->current = $q;
            $q = $q->link;    
        }
        return false;      
    }

    function getNext(){
        $result = $this->current->data;
        $this->current = $this->current->link;
        return $result;        
    }
} 
```

但是当我试图推动一些价值时，

```
$ll = new CircularLinkedList();

$ll->push(5);
$ll->push(6);
$ll->push(7);
$ll->push(8);
$ll->push(9);
$ll->push(10);

//$ll->find(7);

for($j=0;$j<=30;$j++){
    $result = $ll->getNext();
    echo $result."<br />";
} 
```

该脚本在第二次推送时挂起并给出`max_execution_time`错误。

如果我将 cals 的两行 30 和 38 更改为正常的 LinkedList，则效果很好。（通过删除最后一个节点链接到第一个节点）。

那么问题是什么以及如何解决呢？

**更新：**通过将`push()`函数更改为 this ，它可以作为线性链表正常工作：

```
function push($data){
    $p = new Node($data);
    if($this->isEmpty()){
        $this->first = $p;
        $this->current = $this->first;
    }
    else{
        $q = $this->first;
        while($q->link != null)
            $q = $q->link;
        $q->link = $p;    
    }
    $this->count++;       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:57:52.893

对于线性链表 - 更改以下内容：

```
 function push($data){

       if($this->isEmpty()){
         $this->first   = new Node($data);
         $this->current = $this->first;
         $this->count++;
       }
       else{

        $this->current->link = new Node($data);
        $this->current = $this->current->link;
        $this->count++;

      }

    } 
```

这种结构产生：

```
 CircularLinkedList Object
    (
      [first:CircularLinkedList:private] => Node Object
      (
        [data] => 2
        [link] => Node Object
            (
                [data] => 10
                [link] => Node Object
                    (
                        [data] => 3
                        [link] => Node Object
                            (
                                [data] => 9
                                [link] => 
                            )

                    )

            )

    )

    [current:CircularLinkedList:private] => Node Object
    (
        [data] => 9
        [link] => 
    )

    [count:CircularLinkedList:private] => 4
 ) 
```

对于循环 - 更改为：

```
 function push($data){

       if($this->isEmpty()){
         $this->first   = new Node($data);
         $this->current = $this->first;
         $this->count++;
       }
       else{

        $this->current->link = new Node($data, $this->first);
        $this->current = $this->current->link;
        $this->count++;

      }

    } 
```

这种结构产生：

```
 CircularLinkedList Object
    (
      [first:CircularLinkedList:private] => Node Object
      (
        [data] => 2
        [link] => Node Object
            (
                [data] => 10
                [link] => Node Object
                    (
                        [data] => 3
                        [link] => Node Object
                            (
                                [data] => 9
                                [link] => Node Object
       *RECURSION*
                            )

                    )

            )

       )

    [current:CircularLinkedList:private] => Node Object
    (
        [data] => 9
        [link] => Node Object
            (
                [data] => 2
                [link] => Node Object
                    (
                        [data] => 10
                        [link] => Node Object
                            (
                                [data] => 3
                                [link] => Node Object
         *RECURSION*
                            )

                    )

            )

     )

    [count:CircularLinkedList:private] => 4
   ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:00:36.500

您可以使用

```
$ll = new CircularLinkedList();

$ll->push(5);
$ll->push(6);
$ll->push(7);
$ll->push(8);
$ll->push(9);
$ll->push(10);
echo "<pre>"; 
```

用法

```
echo count($ll); // returns 6 

$ll->find(7);
echo $ll->getCurrent(); // returns 7

$ll->reset(); // Reset from current position to beginning

while ( $ll->isValid() ) {
    echo $ll->getCurrent() . "<br />";
    $ll->getNext();
} 
```

输出

```
5
6
7
8
9
10 
```

类节点

```
class Node {
    public $data;
    public $link;

    function __construct($data, $next = NULL) {
        $this->data = $data;
        $this->link = $next;
    }

    function __toString() {
        return "$this->data";
    }
} 
```

类 CircularLinkedList

```
class CircularLinkedList implements Countable {
    private $data;
    private $current;
    private $count;

    function __construct() {
        $this->count = 0;
        $this->data = null;
        $this->current = null;
    }

    function isEmpty() {
        return ($this->data == NULL);
    }

    function push($data) {
        $p = new Node($data);
        if ($this->isEmpty()) {
            $this->data = $p;
            $this->current = $this->data;
        } else {
            $this->current->link = $p ;
            $this->current = $this->current->link;
        }
        $this->count ++;
    }

    function find($value) {
        $q = $this->data;
        while ( $q->link != null ) {
            if ($q->data == $value)
                $this->current = $q;
            $q = $q->link;
        }
        return false;
    }

    function getCurrent() {
        return $this->current;
    }

    function getNext() {
        $this->current = $this->current->link;
    }

    function hasNext() {
        return isset($this->current->link);
    }

    function isValid() {
        return isset($this->current);
    }

    function reset() {
        $this->current = $this->data;
    }

    function count() {
        return $this->count;
    }
} 
```

# javascript - 阻止视图的其余部分（特定元素除外）

> ID：13252537
> 
> 赞同：0
> 
> 时间：2012-11-06T13:55:00.510
> 
> 标签：javascript, html

抱歉，标题找不到更好的了...

好吧，这是我的疑问，当我们使用 `alert("Some text")` 我们看到警报对话框显示 javascript 警报时，现在除了对话框之外的输入 UI 没有响应，除非我们点击`Ok`或关闭警报窗口，`confirm`对话框也是如此。

我正在尝试构建一个小部件以`Confirm`使用 HTML 元素显示我的自定义对话框，但我不知道如何阻止 UI，如果用户愿意，可以忽略对话框并单击 UI 上的其他元素，任何关于阻止的建议或解决方法?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:59:43.190

您可以使用对话框构建一个简单的叠加层。您的对话框可以绝对定位在屏幕上，允许用户单击它或单击它旁边的其他元素。

[http://www.emanueleferonato.com/2007/08/22/create-a-lightbox-effect-only-with-css-no-javascript-needed/](http://www.emanueleferonato.com/2007/08/22/create-a-lightbox-effect-only-with-css-no-javascript-needed/)

# match - didChangeState 匹配开始

> ID：13252538
> 
> 赞同：2
> 
> 时间：2012-11-06T13:55:01.047
> 
> 标签：match

帮助 ！全部，

当“比赛开始！预计球员人数：1”时

但不能调用“didChangeState”

我的代码是：

================================

```
-(IBAction)play{

    GKMatchRequest *request = [[GKMatchRequest alloc]init];
    request.minPlayers = min;
    request.maxPlayers = max;

    mmvc = [[GKMatchmakerViewController alloc]initWithMatchRequest:request];
    mmvc.matchmakerDelegate =self;
    [self presentModalViewController:mmvc animated:YES];

}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)match {
    [self dismissModalViewControllerAnimated:YES];
    self.myMatch = match; 
    self.myMatch.delegate = self;  

    NSLog(@"Match started! Expected Player Count:%d  %@",match.expectedPlayerCount, match.playerIDs);
}

- (void)match:(GKMatch *)match player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state
{ NSLog(@"OK!"); } 
```

=====================

它不能给我“OK！” 但我可以看到“比赛开始！预期玩家人数：1”

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T12:28:54.677

我有同样的问题，我认为问题出在苹果服务器上。因为我什么也没做，半小时后它又开始工作了。没有任何麻烦。

# c++ - Make期间的链接器错误

> ID：13252551
> 
> 赞同：2
> 
> 时间：2012-11-06T13:55:46.570
> 
> 标签：c++, compilation, linker, makefile

我写了一个在 Eclipse 中运行良好的 c++ 项目。但是当尝试使用 makefile 进行编译时，我得到了一个错误。当我搜索此错误时，所有解决方案都建议添加主要功能。我在matrixU.cpp 中有一个主要功能。

这是制作文件：

```
# All Targets
all: matrixU

# Tool invocations
# Executable "matrixU" depends on the files matrixU.o and Student.o and Course.o
matrixU: bin/matrixU.o bin/Student.o bin/Course.o
    @echo 'Building target: matrixU'
    @echo 'Invoking: C++ Linker'
    g++ -o bin/matrixU.o bin/Student.o bin/Course.o
    @echo 'Finished building target: matrixU'
    @echo ' '

# Depends on the source and header files
bin/matrixU.o: src/matrixU.cpp include/matrixU.h
    g++ -g -Wall -Weffc++ -c -Linclude -o bin/matrixU.o src/matrixU.cpp

# Depends on the source and header files 
bin/Student.o: src/Student.cpp include/Student.h
    g++ -g -Wall -Weffc++ -c -Linclude -o bin/Student.o src/Student.cpp

# Depends on the source and header files 
bin/Course.o: src/Course.cpp include/Course.h
    g++ -g -Wall -Weffc++ -c -Linclude -o bin/Course.o src/Course.cpp

#Clean the build directory
clean: 
    rm -rf bin/* 
```

这是错误：

```
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 0 has invalid symbol index 10
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 1 has invalid symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 2 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 3 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 4 has invalid symbol index 10
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 5 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 6 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 7 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 8 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 9 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 10 has invalid symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 11 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 12 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 13 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 14 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 15 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 16 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 17 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 18 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 19 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 20 has invalid symbol index 19
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T14:01:11.083

```
 g++ -o bin/matrixU.o bin/Student.o bin/Course.o 
```

此行将`bin/matrixU.o`（您之前从源代码编译的）定义为输出文件，从而导致损坏。

您想要的是将三个 *.o*输入*文件链接到*不同*的输出文件中，该输出文件应与规则的目标相同，如下所示：

```
 g++ -o bin/matrixU bin/matrixU.o bin/Student.o bin/Course.o 
```

此外，我可以谦虚地建议将头文件依赖项留给编译器，并使用模式匹配构建规则，因此您不必每次添加/删除文件或依赖项时都编辑 Makefile。

我曾经为此写过一个[教程](http://wiki.osdev.org/Makefile)，但它的简短版本是：

```
# Assuming GNU make
SRCFILES := $(shell find $(PROJDIRS) -type f -name "\*.cpp")
DEPFILES := $(patsubst src/%.cpp,bin/%.d,$(SRCFILES))
OBJFILES := $(patsubst src/%.cpp,bin/%.o,$(SRCFILES))
CXXFLAGS_LOCAL := -g -Wall -Weffc++ -Linclude

.PHONY: all clean

all: matrixU

clean: 
    rm -rf bin/*

-include $(DEPFILES)

matrixU: $(OBJFILES)
    $(CXX) -o $@ $^

bin/%.o: src/%.cpp
    $(CXX) $(CXXFLAGS_LOCAL) $(CXXFLAGS) -MMD -MP -c $< -o $@ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:58:56.400

这条规则看起来很可疑：

```
matrixU: bin/matrixU.o bin/Student.o bin/Course.o
    @echo 'Building target: matrixU'
    @echo 'Invoking: C++ Linker'
    g++ -o bin/matrixU.o bin/Student.o bin/Course.o
    @echo 'Finished building target: matrixU'
    @echo ' ' 
```

您依赖`bin/matrixU.o`，并创建一个同名文件。你可能需要

```
matrixU: bin/matrixU.o bin/Student.o bin/Course.o
    @echo 'Building target: matrixU'
    @echo 'Invoking: C++ Linker'
    g++  bin/matrixU.o bin/Student.o bin/Course.o -o matrixU
    @echo 'Finished building target: matrixU'
    @echo ' ' 
```

IE

```
g++  bin/matrixU.o bin/Student.o bin/Course.o -o matrixU 
```

代替

```
g++ -o bin/matrixU.o bin/Student.o bin/Course.o 
```

但是您应该使用宏`$@`和`$^`来代替，它解析到目标，即规则左侧的内容`:`，以及分别位于右侧的依赖项`:`。这将防止一些错误：

```
matrixU: bin/matrixU.o bin/Student.o bin/Course.o
    g++  $^ -o $@ 
```

# regex - 获取在一行中出现多次的两个字符之间的字符串

> ID：13252553
> 
> 赞同：2
> 
> 时间：2012-11-06T13:55:51.997
> 
> 标签：regex, grep

我正在尝试从具有键值顺序的许多段的行中提取单个字符串，但我没有得到它，因为它匹配的内容比我想要的要多得多。

这是我的示例行：

```
|SEGA~1~MAGIC~DESCRIPTION~~~M~TEST~|SEGB~34~12.11.2011~3~M~O~|SEGC~HELLO~WORLD~| 
```

这条线是将许多段连接成一条线。现在我想提取以 SEGA 开头的段中索引 2 处的字符串。所以我要做的是 grep ：

```
egrep -o 'SEGA(.*?)\~\|' 
```

但它给了我整条线，有时它只给了我正在寻找的部分。通过匹配，我将使用 ~ 字符分割该段并取第三段。因为我使用 .*? 带问号，我希望 egrep 只匹配 SEGA 和第一次出现 ~| 之间的内容。这是在 SEGB 之前，而不是在 SEGC 或 SEGB 的末尾。

我如何告诉 grep 搜索 SEGA 并在 SEGA 之后立即提供整个内容，直到第一次出现 ~|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:06:31.347

您可以`-P`在 grep 中使用 (--perl-regexp) 选项：

```
grep -oP '(?<=SEGA).*?(?=~\|)' file 
```

如果要包括尾随`~|`，请删除前瞻`(?=...)`。

我认为`.*?`（懒惰）不会在 egrep 中退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:05:52.350

我建议你把这条线分成几行`|`，然后从这些行中 grep：

```
$ echo "|SEGA~1~MAGIC~DESCRIPTION~~~M~TEST~|SEGB~34~12.11.2011~3~M~O~|SEGC~HELLO~WORLD~|" | sed -e 's/|/\n/g' | grep ^SEGA
SEGA~1~MAGIC~DESCRIPTION~~~M~TEST~ 
```

# javascript - 从 HTML 到纯文本的 JavaScript 渲染

> ID：13252558
> 
> 赞同：0
> 
> 时间：2012-11-06T13:55:57.460
> 
> 标签：javascript, parsing, rendering

> **可能重复：**
> [是否有 javascript 将 HTML 转换为 markdown？](https://stackoverflow.com/questions/2671930/is-there-javascript-to-convert-html-to-markdown)

我想通过 ajax 从客户端向服务器提交一个特定的 html 节点。

提交中不应包含任何 html 标签，而 html 节点有。

例如，html 节点可能如下所示：

```
<div>you have several options:</div>
<ul>
  <li>foo</li>
  <li>bar</li>
  <li>baz</li>
</ul> 
```

我想将其转换为：

```
你有几个选择：
* 富
* 酒吧
*巴兹

```

我的上下文不是一个完整的通用解决方案。我要支持的 html 标签是：
`div`, `p`, `a`, `b`, `i`, `ul`+ `li`, `ol`+`li`

任何想法如何在不重新发明轮子的情况下做到这一点？是否有进行这种转换的 JavaScript 库？

更新：我不知道相关的术语，即：降价。感谢您的链接。即将结束问题:)

# c# - 在资源文件中设置 Build Action = Embedded resources 时，出现“系统资源不足”错误

> ID：13252565
> 
> 赞同：0
> 
> 时间：2012-11-06T13:56:35.967
> 
> 标签：c#, .net, winforms, embedded-resource

VS:2008 C# Winforms 项目，我正在做。

我在resources中添加了一个文件，并设置了它的build action=Embedded Resources，然后我编译项目后，出现了系统资源不足，无法完成请求的服务的错误。

错误的完整描述：

> 无法写入输出文件“<>”--“系统资源不足，无法完成请求的服务。'

谁能告诉我为什么会发生这个错误以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:43:09.027

当我在本地磁盘上编译项目时，它编译成功。但是当我在网络驱动器上编译它时，会产生上述错误。我不知道这个错误是如何在网络驱动器上发生的。

# sql - sql - 如何通过组合多个条件来选择性地选择？

> ID：13252567
> 
> 赞同：0
> 
> 时间：2012-11-06T13:56:44.823
> 
> 标签：sql, sql-server

我不确定如何描述我的问题（可能标题不正确）。

## 这里是：

我有一张这样的桌子：

```
item   type stockdate    saledate

1      1    2012-11-06   2012-11-05

2      2    2012-11-06   2012-11-07

3      2    2012-11-06   2012-11-05 
```

所以，我想从上表中选择。

有两个条件：

1.  如果`type`一个项目的 是`1`，那么我无论如何都会显示这个项目
2.  如果`type`一个项目的 是`2`，但它的`saledate >= stockdate`，那么我显示；否则，我不显示

所以从上表中，我想`show only item 1 and 2`，因为项目 1 有`type of 1`，项目 2 有`type of 2`但它的`saledate >= stockdate`，项目 3 不能显示，因为它的`saledate<stockdate`。

**如何编写选择查询？**

我正在使用 MS SQL Server。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T13:59:55.360

> 如果一个项目的类型是 1，那么我无论如何都会显示这个项目
> 
> 如果一个项目的类型是 2，但是它的 saledate >= stockdate，那么我显示；否则，我不显示

```
SELECT item, saledate, stockdate
FROM
(
    SELECT
      item,
      CASE
        WHEN type = 1 THEN 1
        WHEN type = 2 AND saledate >= stockdate THEN 1
        ELSE 0
      END ShowOrNot,
      stockdate, 
      saledate
    FROM TableName
) t
WHERE ShowOrNot = 1 
```

PS：我用子查询写的，只是为了可读性。

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/1628c/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:00:14.407

最简单的解决方案是，

```
SELECT  *
FROM    tableName
WHERE   (type = 1) OR
        (
            type = 2 AND
            saledate >= stockdate
        ) 
```

*   [**SQL 小提琴演示**](http://sqlfiddle.com/#!3/1628c/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:02:13.583

```
select * from myTable where type = 1 or (type=2 and saledate >= stockdate) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-06T14:00:19.430

```
select * 
from [table]
where type=1 or (saledate >= stockdate) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-06T14:02:33.107

这个查询怎么样：

```
Select * from TableName
Where SelDate>=(Case when Type=1 then SelDate else StockDate End) 
```

# nhibernate - 使用 NHibernate 插入/更新 Oracle LONG 字段

> ID：13252570
> 
> 赞同：0
> 
> 时间：2012-11-06T13:56:55.913
> 
> 标签：nhibernate

我正在处理一个遗留应用程序，数据库在 Oracle 中。表中的字段之一是 LONG（在新版本的 Oracle 中已弃用），用于存储大量文本数据。但问题是每当我尝试在 ExecuteNonQuery 插入此表时，nhibernate 都会挂起。我发现我需要在配置 hbm 文件中的字段时找到正确的“类型”。如果我从 hbm 文件中注释了以下配置并运行测试，那么一切正常。我使用 ODP.NET 连接到 Oracle 数据库。

`<property name="TextData" column="TEXT_DATA" not-null="false" access="property" type="dont know what's nhibernate type equivalent to Oracle LONG"/>`

在我的实体中 TextData 是一个字符串属性。

我的问题是如何通过 NHibernate 处理具有 LONG 类型的 Oracle 列？

问候，

索尼阿鲁杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:22:15.130

我通过添加从 IUserType 派生的自定义类型来解决此问题。你可以在我[的帖子中找到实现](http://sonyarouje.com/2012/11/07/nhibernate-and-oracle-long-varchar-field/)

# java - Java：使用 Junit 3 进行异常测试

> ID：13252572
> 
> 赞同：19
> 
> 时间：2012-11-06T13:56:57.007
> 
> 标签：java, exception, junit, error-handling, junit3

我想为`IndexOutOfBoundsException`. 请记住，我们应该使用 JUnit 3。

**我的代码：**

```
public boolean ajouter(int indice, T element) {
    if (indice < 0 || indice > (maListe.size() - 1)) {
        throw new IndexOutOfBoundsException();
    } else if (element != null && !maListe.contains(element)) {
        maListe.set(indice, element);
        return true;
    }
} 
```

经过一番研究，我发现您可以使用 JUnit 4 来做到这一点，`@Test(expected = IndexOutOfBoundsException.class)`但我在哪里找不到如何在 JUnit 3 中做到这一点。

如何使用 JUnit 3 进行测试？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-06T14:01:35.663

在 JUnit 3 中测试异常使用这种模式：

```
try {
     ... code that should throw an exception ...

     fail( "Missing exception" );
} catch( IndexOutOfBoundsException e ) {
     assertEquals( "Expected message", e.getMessage() ); // Optionally make sure you get the correct message, too
} 
```

`fail()`如果代码没有引发异常，则确保您收到错误。

我在 JUnit 4 中也使用了这种模式，因为我通常想确保正确的值在异常消息中可见并且`@Test`不能这样做。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-06T14:00:55.400

*基本上，如果它没有*抛出正确的异常，或者如果它抛出其他任何东西，你需要调用你的方法并失败：

```
try {
  subject.ajouter(10, "foo");
  fail("Expected exception");
} catch (IndexOutOfBoundException expect) {
  // We should get here. You may assert things about the exception, if you want.
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-06T14:01:26.417

一个简单的解决方案是在 unittest 中添加一个 try catch 并在没有抛出异常时让测试失败

```
public void testAjouterFail() {
  try {
    ajouter(-1,null);
    JUnit.fail();
  catch (IndexOutOfBoundException()) {
    //success
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-04T07:55:34.447

您可以做的一件事是使用布尔值来运行测试以完成，然后您可以使用 assert 来验证是否引发了异常：

```
boolean passed = false;
try
{
    //the line that throws exception
    //i.e. illegal argument exception
    //if user tries to set the property to null:
    myObject.setProperty(null);
}
catch (IllegalArgumentException iaex)
{
    passed = true;
}
assertTrue("The blah blah blah exception was not thrown as expected"
              , passed); 
```

通过使用此测试，您的测试将永远不会失败，并且您可以验证是否引发了特定的异常类型。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-14T19:39:15.650

使用一些（静态导入）语法糖扩展@Aaron 的解决方案允许编写：

```
 expected(MyException.class,
        new Testable() {
            public void test() {
            ... do thing that's supposed to throw MyException ...
            }
        }); 
```

`Testable`就像一个使用 test() 签名抛出 Throwable 的 Runnable。

```
public class TestHelper {
    public static void expected(Class<? extends Throwable> expectedClass, Testable testable) {
        try {
            testable.test();
            fail("Expected "+ expectedClass.getCanonicalName() +" not thrown.");
        } catch (Throwable actual) {
            assertEquals("Expected "+ expectedClass.getCanonicalName() +" to be thrown.", expectedClass, actual.getClass());
        }
    }

    interface Testable {
        public void test() throws Throwable;
    }
} 
```

您可以根据需要添加对异常消息的检查。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-06T14:03:45.567

在您的测试方法中，在..块`ajouter()`内调用，给出一个值应该会导致抛出异常，使用`try``catch``indice`

*   捕获的`catch`子句`IndexOutOfBoundsException`：在这种情况下，从您的测试方法返回并因此表示通过。
*   捕获的第二个`catch`子句`Throwable`：在这种情况下声明失败（调用`fail()`），因为抛出了错误类型的异常
*   在`try`..之后`catch`声明失败（调用`fail()`），因为没有抛出异常。

# java - WifiP2pManager 在 CreateGroup 上返回 BUSY 状态

> ID：13252573
> 
> 赞同：9
> 
> 时间：2012-11-06T13:56:58.733
> 
> 标签：java, android, android-wifi, wifi-direct

有时当我尝试在 WifiDirect 中创建一个组时，它会返回

```
WifiP2pManager.BUSY 
```

消息作为失败的原因。我不确定为什么会这样。

但是如果我重新启动 WIFI 接口，它会再次工作。这可能是什么原因？如何避免这种情况？如果发生这种情况，有什么办法可以克服吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T15:07:36.260

就我而言，我收到此错误是因为在尝试再次创建组之前我没有删除该组。在这种情况下，WifiManager 将返回 BUSY 状态。但是，一旦我尝试在重新创建一个新组之前关闭该组，它就可以正常工作。

希望这可以帮助某人。

# java - Tuckey Urlrewriter 更改 JS 和 CSS 资源的 url 请求

> ID：13252577
> 
> 赞同：4
> 
> 时间：2012-11-06T13:57:02.633
> 
> 标签：java, url-rewriting, tuckey-urlrewrite-filter

我正在尝试 Tuckey 的 URLRewriter。

我声明了一个简单的规则，如下所示：

```
<rule>
    <from>/user/([0-9]+)$</from>
    <to>/user.do?id=$1</to>
</rule> 
```

我希望将请求`myapp.com/user/29`映射到“myapp.com/user.do?id=29”。这工作正常，请求到达支持。然而，当在 GUI 上查看响应时，Firebug 是这样抱怨的：

![在此处输入图像描述](../Images/47473e770c6da8820fe68b60bf4ae963.png)

如您所见，现在之间`/roqket`有`/resources`一个**/user**。我不知道那是怎么结束的。如果我删除它，`<rule>`它会恢复正常的工作资源请求。

你能帮助我吗？我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:04:16.887

你需要为js、style和img定义其他过滤器。

像这样的东西：

```
<rule>
    <from>/img/**</from>
    <to>/img/$1</to>
</rule>
<rule>
    <from>/js/**</from>
    <to>/js/$1</to>
</rule>
<rule>
    <from>/style/**</from>
    <to>/style/$1</to>
</rule> 
```

这些过滤器应该在您为用户定义的过滤器之前声明。这些规则将在应用于过滤器的规则之前匹配，并且您的问题应该得到解决。

**编辑**.

关于您的评论：*过滤器以某种方式添加了可以在打印屏幕中看到的用户*。

我认为这是不正确的，我的意思是，过滤器不是将“用户”添加到过滤器的过滤器。我认为问题在于您如何导入资源。

可能，你正在做这样的事情：

```
<script type="text/javascript" language="javascript" src="resources/js/lang.js"></script> 
```

在此示例中，查看相对 URI 如何不满足您的应用程序上下文并且不以斜杠开头。当您使用这样的 URL 时，浏览器将在相对于实际路径的路径中查找资源。如果您在浏览器`http://localhost:8080/roqlet/user`中有结果将是`http://localhost:8080/roqket/user/theResource`（假设“roqket”是您的应用程序上下文）。

所以，你应该这样做：

```
<c:set var="ctx" value="${pageContext.request.contextPath}"/>

<script type="text/javascript" language="javascript" src="${ctx}/resources/js/lang.js"></script> 
```

现在，您指出上下文，URI 将相对于它而不是实际构建：`http://localhost:8080/roqket/theResource`

看看这个[文档](http://www.webreference.com/html/tutorial2/3.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:40:36.040

```
<rule>
<condition type="request-uri" operator="notequal">\.(images|gif|jpeg|png|css|js|pdf|doc|ico|jsp|jpg)$</condition>
<from>............ 
```

这是停止来自 tuskey url 重写过滤器的请求的方法

# sql - 当字段中有“，”时将 CSV 导入 SQL

> ID：13252580
> 
> 赞同：1
> 
> 时间：2012-11-06T13:57:08.820
> 
> 标签：sql, sql-server-2008, csv

我需要将 CSV 导入 SQL 2008 数据库。其中一个字段是目录，显然有超过 1600 行在字段名称中带有“，”。这个字段现在在我的数据库中被错误地分解。总共有超过 100000 行。

我怎样才能避免这种情况并修改我的陈述？

这是表的创建：

```
create table tablename
(
Directory       varchar(1000),
Name            varchar(1000),
Size            varchar(50),
CreationTime    varchar(100),
LastAccessTime  varchar(100),
LastWriteTime   varchar(100)
) 
```

下面是我用来导入它的代码：

```
BULK
INSERT tablename
FROM 'c:\EmailCSVs\myfile.csv'
WITH
(
FIRSTROW = 2,
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
)
GO 
```

目录字段中的示例如下所示：

```
\\drive\share\nightly.175\savemail\user\(Monday, January 10, 2011, 500 PM) 
```

这是 CSV 中的示例行：

```
"\\drive\share\nightly.175\savemail\user\(Monday, January 10, 2011, 500 PM)","Archive #1.1.pst","271360","1/14/2011 8:37:05 AM","6/1/2011 12:00:38 AM","1/14/2011 2:45:27 PM" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:13:00.580

试一试`FIELDTERMINATOR='","'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:14:46.500

最简单的方法是用管道字符 | 替换 csv 文件中所有分隔逗号的字段。然后设置

```
FIELDTERMINATOR = '|' 
```

当逗号无法转义或删除时，这是许多 DBA 使用的标准技术

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:14:09.373

您可以尝试使用[格式文件](http://msdn.microsoft.com/en-us/library/ms178129.aspx)进行批量插入。这允许您为每个字段指定不同的终止符等。例如，大多数字段可能将 fieldterminator 设置为，`,`而有问题的包含逗号的字段可能是`","`.

另一种可能性是在 excel 中打开 csv 并创建一个[链接服务器](http://support.microsoft.com/kb/306397)。

# objective-c - UICollectionView 中的混乱单元格与流布局 (UICollectionViewFlowLayout)

> ID：13252581
> 
> 赞同：2
> 
> 时间：2012-11-06T13:57:11.827
> 
> 标签：objective-c, ios, uicollectionview

我使用带有**水平滚动**`UICollectionView`的标准构建了一个代码。在数据源中有 15 个项目。`UICollectionViewFlowLayout`

 **我注意到一个单曲的位置很奇怪`cell`，这是比一千个字更好地解释它的屏幕截图:-)

![截屏](../Images/f831b384c3640503e34352a6f3a1c009.png)

如您所见，在第四列中有一个不应显示的额外单元格。所以，我的问题是：

1）**为什么？**

2）**如何解决？**

请注意，当我开始滚动黄色区域时，额外的单元格突然从那里消失并按预期显示；其他细胞也是如此。

所以，真的很奇怪……**

# bash - shell脚本：数组相关问题

> ID：13252583
> 
> 赞同：0
> 
> 时间：2012-11-06T13:57:21.880
> 
> 标签：bash, shell, snmp

使用 linux 2.6.18 ..

```
/bin/bash -version
GNU bash, version 1.14.7(1) 
```

（snmpwalk 命令在控制台中提供输出，如下所示）

```
33
4232
5342
632
45342
23342
3243 
```

我正在使用 shell 脚本从 snmp grep 数据并尝试将其添加到数组中。但不能用以下问题做到这一点......

```
#!/bin/bash
OID="1.3.6.1.2.1.2.2.1"

declare -a index=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.1) 
declare -a upload=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.10) 
declare -a download=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.11)

echo "retrieved ${#index[@]} elements"
echo "#${index[3]}: up=${upload[2]} down=${download[2]}" 
```

输出：

```
 + declare -a index=1 2
    j2.sh: 4: j2.sh: declare: not found 
```

（所以我不能使用“声明”）

第二种方式

```
#!/bin/bash

    OUTPUT1=$(snmpbulkwalk -Oqv -c public -v 2c localhost
    1.3.6.1.4.1.21067.4.1.1.1 2> /dev/null)
    i=1
    index=1
    upload=1
    download=1
    for LINE in ${OUTPUT1}
        do
            index=$LINE

        OUTPUT2=$(snmpget -Oqv -c public -v 2c localhost 1.3.6.1.4.1.21067.4.1.1.10.$i 2> /dev/null)
        OUTPUT3=$(snmpget -Oqv -c public -v 2c localhost 1.3.6.1.4.1.21067.4.1.1.11.$i 2> /dev/null)
            upload=$OUTPUT2
            download=$OUTPUT3
            i=`expr $i + 1`
        done 
```

它为 bettelnack 提供了大量数据......

3ra 方法：

```
#!/bin/bash
OUTPUT=$(snmpbulkwalk -Oqv -c public -v 2c localhost
1.3.6.1.4.1.21067.4.1.1.1 2> /dev/null)
i=0
index[3000]=0
for LINE in ${OUTPUT} ; do
    index[$i]=$LINE
    i=`expr $i + 1`

done 
```

这里 index[1],index[2]...... 没有找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:15:41.053

```
declare -a index=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.1) declare -a upload=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.10) declare -a download=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.11) 
```

你为什么要在一条线上完成这一切？在单独的行上执行此操作，它应该可以工作。

```
declare -a index=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.1)
declare -a upload=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.10)
declare -a download=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.11) 
```

如果这不起作用，您使用的是哪个版本的 Bash？你从中得到`/bin/bash --version`什么？

# eclipse - 没有工作空间创建的 rcp 应用程序

> ID：13252591
> 
> 赞同：1
> 
> 时间：2012-11-06T13:57:46.580
> 
> 标签：eclipse, eclipse-rcp, startup, rcp, workspace

我想要一个 rcp 应用程序，它不会`workspace`在启动时创建任何文件夹。我的`rcp`应用程序不需要永久保存任何插件或用户数据。对于最终用户来说，工作空间的创建似乎是一个令人困惑和恼人的副作用。我怎样才能避免这种情况？

在我看来，每个`rcp`应用程序都需要 plugin `org.eclipse.core.resources`，而该类`ResourcesPlugin`在启动时创建工作区。

我知道`-data <workspace_dir>`用于指定不同工作区位置的选项，但我想完全避免创建工作区。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T14:07:12.753

来自[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html)

```
eclipse -data @none 
```

> **@没有任何**
> 
> 指示不应将相应的位置显式设置或设置为其默认值。例如，没有用户数据的 RCP 样式应用程序可以使用 osgi.instance.area=@none 来防止将无关文件写入磁盘。@none 后面不得有任何其他路径段。

# animation - SVG 运动动画。随机起始位置

> ID：13252594
> 
> 赞同：1
> 
> 时间：2012-11-06T13:58:10.400
> 
> 标签：animation, svg, motion

我正在尝试创建原子的动画方案。我实现了电子动画，但它们总是在 Path 元素的第一个点开始动画。

请参阅此处的示例：[http ://localhostr.com/3CVziiftCJmm](http://localhostr.com/3CVziiftCJmm)

如何从沿路径曲线的随机点开始动画？也可以接受另一种解决方案：路径曲线的旋转。无论如何，我想让这个原子方案更现实。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:42:59.607

svg 中还没有声明性随机性，尽管它已经被[提议](http://cs.sru.edu/~ddailey/svg/RandomTalk.html)。如果您查看那里提供的示例，您会发现一个 javascript 库，它允许您在 svg 中使用声明性随机性（但请注意，它仍然需要 javascript 才能工作）。

如果您需要随机性，另一种选择是使用 javascript 生成您需要的路径偏移量，例如调整 <motionPath> 元素上的[`keyTimes`和`keyPoints`](http://www.w3.org/TR/SVG11/animate.html#KeyPointsAttribute)属性。

完全由 javascript 驱动的动画可能会更兼容，但是 webkit 在动态修改动画元素方面存在问题。

# wordpress - Wordpress 将特色图片发布到 Twitter

> ID：13252596
> 
> 赞同：5
> 
> 时间：2012-11-06T13:58:24.903
> 
> 标签：wordpress, twitter

我有一个照片/Wordpress 网站，我的每篇文章都包含一张特色图片。我想要创建的是在发布帖子后自动将上传的特色图片发布到 Twitter。我设法向 Functions.php 添加了一个在发布帖子时执行的函数。

```
add_action('publish_post','postToTwitter'); 
```

postToTwitter 函数使用 Matt Harris OAuth 1.0A 库创建推文。如果我附加与 postToTwitter 函数的文件相关的图像，这很好用。

```
// this is the jpeg file to upload. It should be in the same directory as this file.
$image = dirname(__FILE__) . '/image.jpg'; 
```

所以我希望 $image var 保存我上传到 Wordpress 帖子的特色图片。

但这仅通过添加上传图片的 URL 不起作用（因为 Wordpress 上传文件夹与 postToTwitter 函数的文件无关）：使用媒体端点（Twitter）的更新仅支持在 POST 中直接上传的图片——它不会将远程 URL 作为参数。

所以我的问题是如何参考 POST 中上传的特色图片？

```
// This is how it should work with an image upload form
$image = "@{$_FILES['image']['tmp_name']};type={$_FILES['image']['type']};filename={$_FILES['image']['name']}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:08:25.270

听起来您只是在询问如何获取图像文件路径而不是 url，并填充 $image 字符串的其余部分。您可以使用 Wordpress 函数获取文件路径`get_attached_file()`，然后将其传递给一些 php 函数以获取其余的图像元数据。

```
// Get featured image.
$img_id = get_post_thumbnail_id( $post->ID );
// Get image absolute filepath ($_FILES['image']['tmp_name'])
$filepath = get_attached_file( $img_id );
// Get image mime type ($_FILES['image']['type'])
//  Cleaner, but deprecated: mime_content_type( $filepath )
$mime = image_type_to_mime_type( exif_imagetype( $filepath ) );
// Get image file name ($_FILES['image']['name'])
$filename = basename( $filepath ); 
```

顺便说一句，`publish_post`在这种情况下可能不是最好的钩子，因为[根据 Codex](http://codex.wordpress.org/Plugin_API/Action_Reference)，每次编辑发布的帖子时都会调用它。除非您希望发布每个更新，否则您可能需要查看[`${old_status}_to_${new_status}`](http://codex.wordpress.org/Post_Status_Transitions)钩子（它传递了 post 对象）。所以代替`add_action('publish_post','postToTwitter')`，也许这样的事情会更好：

```
add_action( 'new_to_publish', 'postToTwitter' );
add_action( 'draft_to_publish', 'postToTwitter' );
add_action( 'pending_to_publish', 'postToTwitter' );
add_action( 'auto-draft_to_publish', 'postToTwitter' );
add_action( 'future_to_publish', 'postToTwitter' ); 
```

或者，如果您想根据帖子的先前状态更改推文，最好使用此挂钩：[`transition_post_status`](http://codex.wordpress.org/Function_Reference/_transition_post_status)因为它将旧状态和新状态作为参数传递。

# c++ - 提升 Python 可移植性问题

> ID：13252598
> 
> 赞同：4
> 
> 时间：2012-11-06T13:58:26.153
> 
> 标签：c++, python, boost, portability, boost-python

我有一个用 C++ 编写的 dll，我想将它导出到 Python 以运行回归和单元测试（使用 Python 更容易维护和运行回归）。为此，我想使用 Boost.Python 导出 dll 的主要 API，以便它可以在 Python 中使用。我的程序集如下所示：

1.  MyLibrary.dll //主 API C++ 库
2.  MyLibrary.pyd //一个只包含导出定义的瘦 dll 项目`BOOST_PYTHON_MODULE`（依赖于 MyLibrary.dll）
3.  ... //MyLibrary.dll 所依赖的其他 C++ dll 文件

我在让 MyLibrary.pyd 链接时遇到了一些麻烦，但是在稍微研究了一些问题之后（例如[这里](https://stackoverflow.com/questions/2635933/boost-python-version)`b2.exe`），我意识到我必须在指向我的特定 Python 版本时重新构建 boost 。之后，我能够从 python 导入和运行我的库（**仅在我的机器**上）。

技术数据：我在 Windows 7 x64 和 MSVC-10.0 上使用 boost 1.51、Python 3.23 构建库（我自己的项目是从 VS2010 构建的）。我用来链接 boost 的变体是共享库，64 地址模型，用我自己的构建相应地发布。

问题是，当我尝试在另一台机器上导入库（在我的机器上构建）时，python 抱怨：

```
ImportError: DLL load failed: The specified procedure could not be found. 
```

在线上`import MyLibrary`

这引出了以下问题：

1.  我在我的机器上构建的 MyLibrary.pyd 是“python-portable”吗？意思是，除了 3.23（我用来在我的机器上构建 boost.python 的版本）之外，它还能在其他版本的 Python 上工作吗？
2.  MyLibrary.pyd 的用户是否必须使用他自己的 python 版本重新构建 boost 才能成功导入它？
3.  到目前为止，我们一直在使用 BoostPro 提供的 Windows 预构建的 boost 安装程序。构建链接的 Python 版本是什么？如果我们只是决定在整个团队中使用“正确”版本的 Python（BoostPro 链接的版本），我是否可以让我的用户免去自己构建 boost 的麻烦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T23:41:25.983

[在http://docs.python.org/3.2/whatsnew/3.2.html](http://docs.python.org/3.2/whatsnew/3.2.html)查看 PEP 384 。

[http://www.boost.org/doc/libs/1_52_0/libs/python/doc/news.html](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/news.html)表明最近没有任何实际进展，所以我怀疑 Boost.Python 是否支持或至少经过测试Py_LIMITED_API 已定义。

根据我使用 Boost.Python 和 PyCXX 对 Python 2.x 兼容性的经验（我还没有使用 3.x 行）：

1.  不，不会的。只有微版本更改保持 ABI 可移植性。
2.  不完全是。您提供的 MyLibrary.pyd 二进制文件的用户将无法使用不同的主要/次要 python 版本加载它。她拥有的Boost的构建配置无关紧要。您需要使用要支持的每个次要 Python 版本来构建 Boost.Python。这包括针对 32 位和 64 位 Python 安装的单独构建。

我的建议是尝试从定义了 Py_LIMITED_API 的源代码构建 Boost。我不保证它会成功，但值得一试。

如果失败，请让您的队友使用与您相同的 Python 版本，当然还有 x64 位 Windows（因为 .pyd 本身就是 64 位）。或者甚至更好地设置一个 CI 机器，它将在每个所需的配置中构建您的 python 模块，以便您的客户能够选择合适的二进制文件。让您的队友构建和使用他们自己的 MyLibrary.pyd 版本，仅供本地使用。

# php - HTTP_USER_AGENT 如何运作？

> ID：13252603
> 
> 赞同：26
> 
> 时间：2012-11-06T13:58:38.820
> 
> 标签：php, browser, user-agent

`HTTP_USER_AGENT`当我使用此代码获取 PHP 服务器变量时：

```
<?php
   $useragent = $_SERVER ['HTTP_USER_AGENT'];
   echo "<b>Your User Agent is</b>: " . $useragent;
?> 
```

我在谷歌浏览器中得到这个：

> Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4

这在 Firefox 中：

> Mozilla/5.0 (Windows NT 6.1; rv:16.0) Gecko/20100101 Firefox/16.0

这在 IE 中：

> Mozilla/5.0（兼容；MSIE 9.0；Windows NT 6.1；Trident/5.0；BOIE9；NLNL）

我的明显问题是：这是如何工作的？为什么我的用户代理在我使用 Google Chrome 时显示 Mozilla 和 Windows NT？

还有，为什么我用IE的时候说我用的是火狐？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-06T14:08:29.160

用户代理字符串是浏览器自己发送给网络服务器以标识自己的文本，以便网站可以根据浏览器或根据浏览器兼容性发送不同的内容。

Mozilla 是一种浏览器渲染引擎（Firefox 的核心引擎），Chrome 和 IE 包含字符串 Mozilla/4 或 /5 的事实表明它们与该渲染引擎兼容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-06T13:59:37.233

[http://www.useragentstring.com/](http://www.useragentstring.com/)

访问该页面，它将为您提供用户代理的每个元素的良好解释。

Mozilla：

> Mozilla 产品切片。声称是基于 Mozilla 的用户代理，这仅适用于 Firefox 和 Netscape 等 Gecko 浏览器。对于所有其他用户代理，它意味着“Mozilla 兼容”。在现代浏览器中，这仅用于历史原因。已经没有真正的意义了

# css - Nivo 滑块到 Wordpress 主题

> ID：13252611
> 
> 赞同：0
> 
> 时间：2012-11-06T13:59:05.267
> 
> 标签：css, wordpress, nivo-slider

我最近将 NIVO Slider 包下载到我的桌​​面，因为我希望将它集成到我的 WP 主题中。

我已经将 JS 文件等压缩到我的目录中，但是我必须通过函数调用它吗？是否有快速教程或有人可以指出如何执行此操作的方向。

我是否必须在functions.php文件中放置一个函数调用，然后将包装器等添加到我希望查看的部分的正文以及文件夹中的图像？

我有一个滚动自动取款机，但是我觉得它不适合我的需要，并且如果可能的话希望避免使用该插件。

谢谢克里斯蒂

代码：

***放在Header.php中***

```
<?php wp_enqueue_script('jquery'); ?>
<?php wp_head(); ?>
<!-- Include the Nivo Slider CSS file -->
<link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/scripts/nivoslider/nivo-slider.css" type="text/css" media="screen" />
<!-- Include the Nivo Slider JS file -->
<script src="<?php bloginfo("template_url"); ?>/scripts/nivoslider/jquery.nivo.slider.pack.js" type="text/javascript"></script>
<!-- Set up the Nivo Slider -->
<script type="text/javascript">
 jQuery(window).load(function() {
jQuery('#slider').nivoSlider();
});
</script> 
```

放在page.php上面的内容：

```
<div id="sliderwrap">
<div id="slider">
<img src="<?php bloginfo("template_url"); ?>nemo.jpg" alt="" />
<img src="<?php bloginfo("template_url"); ?>toystory.jpg" alt="" />
<img src="<?php bloginfo("template_url"); ?>up.jpg" alt="" title="This is an      example of a caption" />
<img src="<?php bloginfo("template_url"); ?>walle.jpg" alt="" />
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:06:47.430

我假设您使用的是 jQuery 硬编码版本？为什么不直接购买 WordPress 版的 Nivo，一个网站只需 19 美元。Nivo 网站上还有一个完整的 jQuery 版本教程。在此处查看：[Nivo 滑块教程](http://nivo.dev7studios.com/support/jquery-plugin-usage/)

# java - Spring MimeMessageHelper：添加多个CC时出现AddressException

> ID：13252616
> 
> 赞同：0
> 
> 时间：2012-11-06T13:59:17.087
> 
> 标签：java, spring, email, mime-message

我需要在我的邮件消息中添加多个抄送地址，但我不断收到以下异常：

```
javax.mail.internet.AddressException: Illegal Address (email@email.com;email@email.com,15) 
```

这是我的代码：

```
final String ccAddress = (String) inputMessageHeaders.get(MailHeaders.CC);
final String[] arrayOfCCAddress = ccAddress.split(";");
for(String cc : arrayOfCCAddress) {
    InternetAddress address = new InternetAddress(cc);
    mimeMessageHelper.setCc(address);
} 
```

ccAddress 的原始值为“email@email.com;email@email.com” 实际地址有效。为什么会抛出异常并将“，15”添加到CC地址的末尾？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:46:35.597

我最终等到添加 cc 直到在 mimehelper 中设置它之前，而在我将它设置在消息头中之前，这把事情搞砸了。一直不明白为什么。

# android - 将自定义视图设置为 ArrayAdapter 时出错 微调器

> ID：13252617
> 
> 赞同：-1
> 
> 时间：2012-11-06T13:59:25.643
> 
> 标签：android, spinner, android-arrayadapter

下面是我的 ArrayAdapter，我想放大视图以适应我对下拉微调器的需要。

```
 ArrayAdapter<String> arrShirtType = new ArrayAdapter<String>
        (this, android.R.layout.simple_spinner_item,shirtType)
        {
            private LayoutInflater inflater = LayoutInflater.from(getBaseContext());
            public View getView(int position, View convertView,ViewGroup parent) 
                {
                    View vi = convertView;
                    vi = inflater.inflate(R.layout.spinner_view_style, parent);
                    TextView txt = (TextView)findViewById(R.id.spinner_textview);
                    ((TextView) vi).setTypeface(font1);
                    ((TextView) vi).setTextSize(65);
                    return vi;
                }
            public View getDropDownView(int position, View convertView,ViewGroup parent) 
                {   
                    View vi = convertView;
                    vi = inflater.inflate(R.layout.spinner_view_style, parent);
                    TextView txt = (TextView)findViewById(R.id.spinner_textview);
                    ((TextView) vi).setTypeface(font1);
                    ((TextView) vi).setTextSize(65);
                    return vi;
                }
        }; 
```

**问题更新**

我将视图膨胀到 ArrayAdapter 的方式是否正确？以下是错误日志

```
11-06 21:03:47.307: E/AndroidRuntime(1356): FATAL EXCEPTION: main
11-06 21:03:47.307: E/AndroidRuntime(1356): java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
11-06 21:03:47.307: E/AndroidRuntime(1356):     at android.widget.AdapterView.addView(AdapterView.java:477)
11-06 21:03:47.307: E/AndroidRuntime(1356):     at android.view.LayoutInflater.inflate(LayoutInflater.java:497)
11-06 21:03:47.307: E/AndroidRuntime(1356):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
11-06 21:03:47.307: E/AndroidRuntime(1356):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
11-06 21:03:47.307: E/AndroidRuntime(1356):     at com.job.mommy.Shirt$1.getView(Shirt.java:90)
11-06 21:03:47.307: E/AndroidRuntime(1356): 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:00:32.840

您必须初始化充气机。例如：

```
inflater = LayoutInflater.from(context); 
```

# iphone - 如何提高 iPhone 内置指南针的稳定性和准确性？

> ID：13252618
> 
> 赞同：1
> 
> 时间：2012-11-06T13:59:25.660
> 
> 标签：iphone, compass-geolocation

我的 didUpdateHeading 代码如下：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading
{
    if (newHeading.headingAccuracy < 0)
    {
        _realHeading = -9999;

        NSLog(@"heading accuracy < 0");

        return;
    }

    // Use the true heading if it is valid.
    [self.locationManager dismissHeadingCalibrationDisplay];

    _newHeading = Retain(newHeading);

    if (self.useMagneticHeading == YES)
        _realHeading = _newHeading.magneticHeading;
    else
        _realHeading = _newHeading.trueHeading;

    // Adjust for device rotation.
    UIInterfaceOrientation orientation = [UIDevice currentDevice].orientation;

    switch (orientation)
    {
        case UIDeviceOrientationPortraitUpsideDown:
            _realHeading = _realHeading + 180.0f;
            break;
        case UIDeviceOrientationLandscapeLeft:
            _realHeading = _realHeading + 90.0f;
            break;
        case UIDeviceOrientationLandscapeRight:
            _realHeading = _realHeading + 270.0f;
            break;
        default:
            break;
    }
    while (_realHeading > 360.0f)
        _realHeading = _realHeading - 360;

} 
```

有用。

但它很跳跃。传感器摆动和波动很大。

有没有人设法以某种方式提高内置 iPhone 指南针的稳定性和准确性？

也许使用其他传感器（加速度？陀螺仪？）。或者也许是一些软件算法？

# asp.net-mvc - 具有单个 View 的多个 ActionResults，其中包含从 Controller 填充的 DropDownList

> ID：13252621
> 
> 赞同：0
> 
> 时间：2012-11-06T13:59:42.980
> 
> 标签：asp.net-mvc

我有 2 个 ActionResults 返回与 DropDownList 源相同的视图

```
Public ActionResult Create()
{
    var model = new ViewModel {
        Entity = new Entity(),
        Categories = GetCategories()
    };

    return View("Edit", model);
}

Public ActionResult Edit(int id)
{
    var model = new ViewModel {
        Entity = GetFromDatabase(id),
        Categories = GetCategories()
    };

    return View(model);
} 
```

我觉得我打破了 DRY 原则，即使我已经将类别的人口转移到了一种方法。有没有更好的方法来解决这个问题，并且只说明从哪里获取类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:09:37.010

我觉得你有点多虑了。这段代码对我来说很好。这更具可读性。只要您没有大的性能问题，您就不必担心。

如果您仍想避免`GetCategories`在 2 个地方调用，则可以将其放入 ViewModel 类的构造函数中。

```
public class ViewModel
{
  public ViewModel()
  {
  }
  public ViewModel(bool includeCategories)
  {
    this.Categories=SomeService.GetCategories();
  }

  public List<SelectListItem> Categories { set;get;}
  //other properties
} 
```

如何处理这取决于您。没有书面规则。**遵循您认为更具可读性并且看起来更干净**的内容。但就个人而言，**我会将我的 ViewModel 保留为简单的 POCO 类，而无需任何构造函数逻辑**来加载数据。我很乐意调用`GetCategories`这两种操作方法。对我来说，这看起来干净易读。

# android - Settings.ACTION_SECURITY_SETTINGS 关闭时获取结果

> ID：13252625
> 
> 赞同：0
> 
> 时间：2012-11-06T13:59:55.047
> 
> 标签：android

我的应用程序检查是否启用了 GPS，如果没有，它会要求用户启用它。要启动设置活动，我使用以下代码：

```
Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);
startActivity(intent); 
```

但我需要根据 GPS 状态启用或禁用对我的活动的一些控制。我想知道用户关闭设置活动后如何获得结果。或者也许可以等到设置活动关闭然后再次检查 GPS 状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:05:31.960

是的，您可以检查您的`onResume()`.

```
@Override
public void onResume(){
    super.onResume();
    LocationManager manager = (LocationManager) getSystemService(LOCATION_SERVICE);
    if(!manager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        // GPS IS NOT ENABLED
    }
} 
```

# email - Yii-user：发送激活邮件

> ID：13252629
> 
> 赞同：3
> 
> 时间：2012-11-06T14:00:12.753
> 
> 标签：email, yii, php

我已经在一个新的 php 项目中实现了 yii-user 模块，一切正常。但是当我注册时，程序应该发送一封激活电子邮件，但是当我按下注册按钮时，我收到以下错误：

> mail() [function.mail]：无法在 >"localhost" 端口 25 连接到邮件服务器，请在 php.ini 中验证您的“SMTP”和“smtp_port”设置 > 或使用 ini_set()

我已经搜索并将我的ini文件更改为：

```
; For Win32 only.
; http://php.net/smtp
SMTP = smtp.gmail.com
; http://php.net/smtp-port
smtp_port = 465 
; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = xxxxxxx@gmail.com 
```

但这没有帮助。

我该如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:25:30.857

您的问题似乎是 Gmail 不是开放中继，这意味着它需要使用帐户进行身份验证才能接受传出邮件。请参阅 Gmail 页面[发送邮件时遇到问题](http://support.google.com/mail/bin/answer.py?hl=en&answer=78775)。至少，您需要提供帐户信息，而我在您的示例中看不到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:01:22.870

检查您的托管服务是否阻塞了端口 465

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T00:21:04.093

我通过安装和运行这个小程序来解决它：http: [//smtp4dev.codeplex.com/](http://smtp4dev.codeplex.com/)

该程序位于系统托盘中，不传递接收到的消息，webapp 运行良好！

感谢你的帮助！

# iphone - ios中presentModalView时停止视频播放

> ID：13252640
> 
> 赞同：1
> 
> 时间：2012-11-06T14:01:03.430
> 
> 标签：iphone, objective-c, ios5, ios4, xcode4

我必须`UIWebview`在一个中使用 HTML 字符串播放视频`ViewController`。

现在，我展示了另一个使用这个的模态视图控制器

```
[self presentModalViewController:myView animated:YES]; 
```

然后，新的视图控制器打开，但视频正在继续播放。那么，当我呈现另一个模态视图控制器时，如何停止这个视频。

在这里，我在`UIWebView`.

告诉我是否有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:45:54.393

呈现模态的父视图控制器将接收`viewWillDisappear`，因此您可以进行任何您想要的清理，例如暂停视频。然后在模式被关闭时正确响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:28:50.823

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

```
[self presentModalViewController:myView animated:YES]; 
```

已弃用，首选方法是

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion 
```

如您所见，一旦呈现视图控制器，您将可以控制要执行的操作。在完成块中，您可以放置​​暂停视频的代码。

# c# - 子应用程序菜单未显示在类似 Chrome 的应用程序中

> ID：13252643
> 
> 赞同：4
> 
> 时间：2012-11-06T14:01:16.293
> 
> 标签：c#, winforms

我正在开发一个类似 chrome 的应用程序。我确实有两个应用程序说父应用程序和子应用程序。子应用程序包含菜单。当我将子应用程序的实例附加到父应用程序的选项卡时。单击鼠标时不显示子应用程序中的菜单。

用于附加过程的代码片段是

```
Process P = Process.GetProcessesByName("Child");
P.WaitForInputIdle();
IntPtr handle = P.MainWindowHandle;
SetParent(handle, this.tabPage1.Handle);
MoveWindow(handle, rec.X, rec.Y, rec.Width, rec.Height, true); 
```

我无法对子应用程序进行任何更改。

# php - 如何使数字不以科学形式显示？

> ID：13252645
> 
> 赞同：0
> 
> 时间：2012-11-06T14:01:19.090
> 
> 标签：php, floating-point-precision

我想将浮点数数组写入文件

```
<?php
$x=[0.000455,0.000123,0.00005690330203];
$fname='test.txt';
$str='';
foreach($x as $elem){
$str .= "$elem\n";
  }
file_put_contents($fname,$str);
?> 
```

但在 test.txt 中，我看到

```
0.000455
0.000123
5.690330203E-5 
```

我不希望浮点数以科学/指数形式显示，我希望它们保持原始形式，此外，还有像 12430120340 这样的大整数，所以如果我对浮点数使用特殊格式，比如 0.000123293304 那么也许它不适合大整数，也许将它们转换为字符串可能是个好主意？但如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:02:45.620

您可以使用该`number_format`函数来设置精度：

**示例**：

```
$mynum = 24.2837162893;
$mynum = number_format($mynum, 2);
echo($mynum);

// Outputs 24.28 
```

因此，如果您决定希望所有数字都保留 10 位小数，则只需使用`$mynum = number_format($mynum, 10);`.

此外，请参阅[sprintf()](http://us.php.net/manual/en/function.sprintf.php)函数以了解其他格式选项。

**[编辑]**

在您的特定示例中，您将在此处使用此功能：

```
<?php
   $x=[0.000455,0.000123,0.00005690330203];
   $fname='test.txt';
   $str='';
   foreach($x as $elem){
      $str .= number_format($elem, 5) . "\n";
   }
   file_put_contents($fname,$str);
?> 
```

如另一个答案中所述，浮点值本质上是不精确的。您必须决定在您的用例中什么精度对您很重要。

参考： http: [//php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:10:36.523

您应该注意，没有“原始形式”之类的东西，因为浮点文字已经与内部表示不同。浮点数在编程环境中本质上是不精确的，并且许多浮点数没有可以用十进制表示的特定形式。这就是为什么你能做的最好的就是对它们设置某种精度，如[另一个答案](https://stackoverflow.com/a/13252673/365237)所示。

这与 PHP 无关，而是与一般编程有关。

如果您将相同的内容存储为字符串而不是浮点数，请说：

```
$x     = ['0.000455', '0.000123', '0.00005690330203'];
$fname = 'test.txt';
$str   = '';

foreach($x as $elem) {
  $str .= "$elem\n";
}

file_put_contents($fname, $str); 
```

那么您在打印或将它们写入文件时应该没有问题。

# facebook - 删除或更改缓存的 Open Graph 对象

> ID：13252646
> 
> 赞同：0
> 
> 时间：2012-11-06T14:01:20.903
> 
> 标签：facebook, facebook-graph-api

我正在使用最新的 Facebook iOS SDK 将操作发布到 Open Graph。

现在，在我的服务器端，我在创建对象时遇到了一个错误，影响了对象的标题。

我现在修复了这个错误 - 我在 Object Debugger 工具中验证了它，而且我可以看到它已经修复了我在我的应用程序中执行操作的新对象。

但是，当我在其上发布新操作时，我最初在从我的应用程序发布操作时创建的对象仍然具有格式错误的标题。

我设法使用 Graph API Explorer 找到有问题的对象的 ID，但删除它没有运气（出现`"(#3) App must be on whitelist"`异常）。

有什么想法可以以某种方式强制对象重新创建吗？

**编辑：**

我已经尝试了[James 的回答](https://stackoverflow.com/a/13252824/414037)中建议的两种方法以及对类似问题的[回答](https://stackoverflow.com/a/7695273/414037)，但无法刷新我对格式错误的对象的现有和新发布的操作。调试器似乎确实创建了一个具有固定数据的抓取对象，但它不会更新原始对象，而是给我一个新对象（我可以在 URL 部分的“Graph API：”URL 中看到一个新 ID对象调试器的底部。

**编辑：**

我终于找到了适用于新操作（不是现有操作）的解决方案。请参阅下面的[答案](https://stackoverflow.com/a/13271593/414037)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:13:00.340

使用调试器会强制 Facebook 重新抓取 URL，因此应该会破坏缓存。您还可以通过添加 'scrape=true' 作为参数以编程方式强制重新刮擦。就像是...

```
POST https://graph.facebook.com

id=http://mysite.com/myobject &amp; scrape=true&access_token=234876AB6865... 
```

看看有没有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:18:59.130

按照[此答案](https://stackoverflow.com/a/7695273/414037)中针对类似问题的建议，我终于发现，如果我更改**iOS app**的代码以将 FBGraphObject 的 URL 设置为包含：&fbrefresh=CAN_BE_ANYTHING，则新发布的操作将与更新的对象一起发布。

这仍然不能修复现有操作（它们仍然指向格式错误的对象），但至少这样我可以确保新发布的操作指向刷新的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T05:29:22.177

首先，您的网页上应该有有关 OpenGraph 的信息。Facebook 会缓存每个 URL 的元信息。如果您共享相同的 URL，Facebook 将使用它已经缓存的信息，即使它已被修改。因此，您应该显式更新 URL 的缓存信息。如果你使用的是 Objective-C，你可以使用下面的代码来更新缓存信息。

# iOS，目标-C

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //Example..
    NSString *targetId = @"{The URL for update}";
    [self updateFacebookCache:targetId];
}

- (void)updateFacebookCache:(NSString *)targetId {
    NSString *url = @"https://graph.facebook.com";

    NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
    [params setObject:targetId forKey:@"id"];
    [params setObject:@"true" forKey:@"scrape"];

    AFHTTPSessionManager *manager = [[AFHTTPSessionManager alloc] initWithSessionConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration]];
    manager.requestSerializer = [AFJSONRequestSerializer serializer];
    [manager.requestSerializer setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    [manager POST:url parameters:params progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id  _Nullable responseObject) {
        NSLog(@"success!");
    } failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) {
        NSLog(@"error: %@", error);
    }];
} 
```

# javascript - 开关盒错误？

> ID：13252650
> 
> 赞同：-4
> 
> 时间：2012-11-06T14:01:26.377
> 
> 标签：javascript, switch-statement, default

所以我得到了这个非常简单的 switch case，从一个局部变量我将值导入到函数中，它的主要功能是从法语切换到英语别名并将值返回到我的 javascript...

如果由于某种原因页面的别名在这种情况下没有计算出来，它应该转到默认值并触发我的 jsbreak 函数，但是在我的情况下，即使检测到别名并将变量切换为新值，它仍然会去默认并执行代码...

```
function langToggle(currentAlias) {
    switch(currentAlias) {
    //Switch the variable from English to French and vice versa depending on the current page's URL string when the toggle js link is clicked
        //If ENGLISH switch the variable to French
        //If ENGLISH switch the variable to French
        case "about-us": currentAlias = "a-notre-sujet"; break;
        //If FRENCH switch the variable to French
        case "a-notre-sujet": currentAlias = "about-us"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "facilities-and-security": 
            currentAlias = "installations-et-securite"; break; 
        case "installations-et-securite": 
            currentAlias = "facilities-and-security"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "offenders": 
            currentAlias = "delinquants"; break; 
        case "delinquants": 
            currentAlias = "offenders"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "you-and-csc": 
            currentAlias = "scc-et-vous"; break; 
        case "scc-et-vous": 
            currentAlias = "you-and-csc"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "connecting": 
            currentAlias = "etablir-des-liens"; break; 
        case "etablir-des-liens": 
            currentAlias = "connecting"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "resources": 
            currentAlias = "ressources"; break; 
        case "ressources": 
            currentAlias = "resources"; break;
        /*--------------------------------------[ See the first two comments ]---------------------------------- */
        case "international-transfers": 
            currentAlias = "transferements-internationaux"; break; 
        case "transferements-internationaux": 
            currentAlias = "international-transfers"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "educational-resources": 
            currentAlias = "ressources-pedagogiques"; break; 
        case "ressources-pedagogiques": 
            currentAlias = "educational-resources"; break;
        /* -------------------------------------[ See the first two comments ]---------------------------------- */
        case "cfp": 
            currentAlias = "pfc"; break; 
        case "pfc": 
            currentAlias = "cfp"; break;
        default: alert("the no matching alias");
    }
    //Return the value of the updated Alias to the language toggle script
    return currentAlias;
} 
```

这是为那些说它可能被窃听的人调用切换脚本的 OTHER 函数？

```
function jsabort(){
    throw new Error('This is not an error. This is just to abort javascript');
}   
function js_changeit(){ 
    var mainName = String(window.location);
    var dash = mainName.lastIndexOf("-");
    var slash = mainName.lastIndexOf("/");  
    var dot = mainName.lastIndexOf(".");
    var name = mainName.substring(slash+1,dot);
    var ext = mainName.substring(dot,mainName.length);
    var lang = name.substring(name.length-3,name.length);
    var urlSection = mainName.split("/");
    var currentAlias = urlSection[3];
    var currentSite = urlSection[2];
    var urlUntilEndAlias = "http://" + currentSite + "/" + currentAlias + "/";
    var mainUrlSplittedAtAlias = mainName.split(urlUntilEndAlias);
    var mainUrlSplittedAtAliasLastSlash  = mainUrlSplittedAtAlias[1];
    if (mainName === "http://internet/index-eng.shtml" || mainName === "http://internet/index-fra.shtml" ) {
        if (lang != "eng") {
            window.open("http://" + currentSite + "/" + "index" + "-eng" + ext, "_self");
        } else if (lang != "fra") {
            window.open("http://" + currentSite + "/" + "index" + "-fra" + ext, "_self");
        }
    } else {
    var lastDash = mainUrlSplittedAtAliasLastSlash.lastIndexOf("-");
    var subSectionUntilEndFilename = mainUrlSplittedAtAliasLastSlash.substring(0,lastDash);
    var UpdatedAlias = langToggle(currentAlias);
    langToggle();
        if (lang != "eng") {
            window.open("http://" + currentSite + "/" + UpdatedAlias + "/" + subSectionUntilEndFilename + "-eng" + ext, "_self");
        } else if (lang != "fra") {
        window.open("http://" + currentSite + "/" + UpdatedAlias + "/" + subSectionUntilEndFilename + "-fra" + ext, "_self");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:07:52.390

就像评论中提到的@Jon 一样，您应该使用查找对象来解决这个问题：

```
var lookup = {
    "about-us":        "a-notre-sujet",
    "a-notre-sujet":   "about-us",
    "offenders":       "delinquants",
    // ...
};

var langToggle = lookup[ currentAlias ];

if(!langToggle) {
    alert("the no matching alias");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:16:43.557

我遇到了同样的问题（即使在这种情况下，解决方案不应该使用带字符串的开关，而是使用 jAndy 建议的表格）。

因此，如果没有语法错误或一些未放置的中断，您应该（可以？）执行以下操作：

```
function langToggle(currentAlias) {
    var myKey = '' + currentAlias;
    switch(myKey) {
       case 'XPTO':
           //do xpto
           break;
       case 'YPTO':
           //do ypto
           break;
    }
} 
```

在我的情况下，我确定我正在传递字符串，所以这不仅仅是将参数转换为字符串，而是创建一个新的字符串对象。这种方式对我有用。我想给出一个更好的解释为什么它有效但我没有它:) 希望这对任何人都有帮助。

如果有人知道更好的理由，请分享！

# c++ - 在 C++ 中输出 ascii 表

> ID：13252657
> 
> 赞同：3
> 
> 时间：2012-11-06T14:01:42.563
> 
> 标签：c++, windows, char, ascii, iostream

代码：

```
#include <iostream>
#include <iomanip>
using namespace std;

class Ascii_output {
public:
    void run() {
        print_ascii();
    }
private:
    void print_ascii() {
        int i, j;                                                           // i is         used to print the first element of each row
                                                                        // j is used to print subsequent columns of a given row
    char ch;                                                            // ch stores the character which is to be printed
    cout << left;

    for (i = 32; i < 64; i++) {                                         // 33 rows are printed out (64-32+1)
        ch = i;
        if (ch != '\n')                                                 // replaces any newline printouts with a blank character
            cout << setw(3) << i << " " << setw(6) << ch;
        else
            cout << setw(3) << i << " " << setw(6);

        for (j = 1; j < 7; j++) {                                       // decides the amount of columns to be printed out, "j < 7" dictates this
            ch += 32*j;                                                 // offsets the column by a multiple of 32
            if (ch != '\n')                                             // replaces any newline printouts with a blank character
                cout << setw(3) << i+(32*j) << " " << setw(6) << ch;
            else
                cout << setw(3) << i+(32*j) << " " << setw(6);
        }

        cout << endl;
    }
    }
}; 
```

输出： ![在此处输入图像描述](../Images/e0f21197ca706ceeed7dd8bc1a0f56e2.png)

为什么在值 96 - 255 处我没有得到正确缩进的输出和奇怪的字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T14:20:53.760

这条线没有做正确的事情：

```
ch += 32*j; 
```

你想数 32，要么

```
ch += 32; 
```

或者

```
ch = i + 32*j; 
```

我强烈建议在输出期间使数字和字符值匹配。所以改变

```
cout << setw(3) << i+(32*j) << " " << setw(6) << ch; 
```

到

```
cout << setw(3) << int(ch) << " " << setw(6) << ch; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:09:42.913

127 以上的字符不是标准 od ASCII 的一部分。Windows 中出现的 127 个以上字符取决于所选字体。

[http://msdn.microsoft.com/en-us/library/4z4t9ed1%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/4z4t9ed1%28v=vs.71%29.aspx)

# php - Ajax Max 重定向

> ID：13252672
> 
> 赞同：1
> 
> 时间：2012-11-06T14:02:40.190
> 
> 标签：php, jquery

我正在尝试运行一个基于大型数据源导入信息的脚本。为了确保它不会超时（我不能使用 settimelimit），我最终会使用不同的参数重定向到同一页面，以便在某个时间点继续导入。

为了使这个脚本与 cronjob 一起工作，我可以调用：

```
wget 
    --max-redirect=10000
    --no-check-certificate
    --delete-after
    http://www.xyz.com/admin/update_products.php?key=abc 
```

这让我可以轻松地完成完整的脚本......问题，我现在需要让用户可以触发它。因此，我自动想到了 jQuery.ajax() 来解决我的问题。问题是，jQuery.ajax() 在 20 次重定向后停止处理重定向，就像我的浏览器一样。

所以我想知道，是我的浏览器不接受超过 20 个限制的重定向，还是所有协议之间的标准都停止在 20 个重定向。

我是否可以将 AJAX 请求配置为实际执行超过 20 个请求，或者我是否必须更改我的脚本以支持这两种情况，一种是需要自动重定向的 cronjob，另一种是告诉 ajax 下一步去“那里”的 url 响应！

谢谢

# php - 跟踪 PHP“内存不足”错误

> ID：13252681
> 
> 赞同：6
> 
> 时间：2012-11-06T14:03:14.937
> 
> 标签：php, debugging, yii

我正在使用 Yii 框架构建一个应用程序，并试图确定内存不足错误的原因。是否可以获得堆栈跟踪？我试过做类似的事情......

```
function handleShutdown() {
    debug_print_backtrace();
    $error = error_get_last();
    $info = "[SHUTDOWN] file:".$error['file']." | ln:".$error['line']." | msg:".$error['message'] .PHP_EOL;
    echo $info;
}
register_shutdown_function('handleShutdown'); 
```

但是 debug_print_backtrace() 除了

```
#0 handleShutdown()
[SHUTDOWN] file:C:\Users\bkuhl\htdocs\instaLabel\yii-1.1.12\base\CModule.php | ln:530 | msg:Allowed memory size of 67108864 bytes exhausted (tried to allocate 65488 bytes) 
```

我检查了 CModule.php 并且该文件中没有第 530 行。它只去了518。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T15:27:28.900

就我而言，这是因为我有无限的函数递归。当我将 xDebug 扩展添加到 PHP 时，由于函数调用限制，它抛出了一个准确的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:55:01.383

[使用xdebug 分析](http://xdebug.org/)您的应用程序。它应该告诉您调用哪个函数的频率以及它占用了多少内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:27:54.070

请记住，由于致命的内存错误很难调试，因为您可能没有足够的内存来运行调试器。

例如，如果我还剩下 100 个字节，我将无法运行太多。所以你的关机功能的结果会有所不同。

现在至于您不存在的行号.. 文件是否可能正在运行 eval()、拉入另一个文件或输出可能导致错误行号的内容？我会阅读该文件和调用文件，看看它是如何运行的。对不起，我不能再帮忙了，我不熟悉 Yii 框架。

# linux - 复制 1TB 稀疏文件

> ID：13252682
> 
> 赞同：20
> 
> 时间：2012-11-06T14:03:26.323
> 
> 标签：linux, file, sparse-file

我得到了一个 1TB 的稀疏文件，它在 Linux 上实际存储了 32MB 数据。

是否可以“有效地”制作一个包来存储稀疏文件？该软件包应在另一台计算机上解压缩为 1TB 稀疏文件。理想情况下，“包”应该在 32MB 左右。

注意：可能的解决方案是使用“tar”：[https ://wiki.archlinux.org/index.php/Sparse_file#Archiving_with_.60tar.27](https://wiki.archlinux.org/index.php/Sparse_file#Archiving_with_.60tar.27)

但是，对于 1TB 的稀疏文件，虽然 tar 球可能很小，但归档稀疏文件会花费很长时间。

**编辑 1**

我测试了tar和gzip，结果如下（注意这个稀疏文件包含0字节的数据）。

```
$ du -hs sparse-1
0   sparse-1

$ ls -lha sparse-1
-rw-rw-r-- 1 user1 user1 1.0T 2012-11-03 11:17 sparse-1

$ time tar cSf sparse-1.tar sparse-1

real    96m19.847s
user    22m3.314s
sys     52m32.272s

$ time gzip sparse-1

real    200m18.714s
user    164m33.835s
sys     10m39.971s

$ ls -lha sparse-1*
-rw-rw-r-- 1 user1 user1 1018M 2012-11-03 11:17 sparse-1.gz
-rw-rw-r-- 1 user1 user1   10K 2012-11-06 23:13 sparse-1.tar 
```

包含 0 字节数据的 1TB 文件 sparse-1 可以通过“tar”归档到 10KB tar 球或通过 gzip 压缩到 ~1GB 文件。gzip 花费的时间大约是 tar 使用时间的 2 倍。

从比较来看，'tar' 似乎比 gzip 好。

但是，对于包含 0 字节数据的稀疏文件来说，96 分钟太长了。

**编辑 2**

`rsync`似乎完成复制文件的时间比`tar`但少于`gzip`：

```
$ time rsync --sparse sparse-1 sparse-1-copy

real    124m46.321s
user    107m15.084s
sys     83m8.323s

$ du -hs sparse-1-copy 
4.0K    sparse-1-copy 
```

因此，对于这个极其稀疏的文件， `tar`+ `cp`or`scp`应该比直接更快。`rsync`

**编辑 3**

感谢@mvp 指出较新内核中的 SEEK_HOLE 功能。（我以前在 2.6.32 Linux 内核上工作）。

注意：bsdtar 版本 >=3.0.4 是必需的（在这里查看：[http](http://ask.fclose.com/4/how-to-efficiently-archive-a-very-large-sparse-file?show=299#c299) ://ask.fclose.com/4/how-to-efficiently-archive-a-very-large-sparse-file?show=299#c299 ）。

在较新的内核和 Fedora 版本 (17) 上，**非常**`tar`有效地`cp`处理稀疏文件。

 **```
[zma@office tmp]$ ls -lh pmem-1 

-rw-rw-r-- 1 zma zma 1.0T Nov  7 20:14 pmem-1
[zma@office tmp]$ time tar cSf pmem-1.tar pmem-1

real    0m0.003s
user    0m0.003s
sys 0m0.000s
[zma@office tmp]$ time cp pmem-1 pmem-1-copy

real    0m0.020s
user    0m0.000s
sys 0m0.003s
[zma@office tmp]$ ls -lh pmem*
-rw-rw-r-- 1 zma zma 1.0T Nov  7 20:14 pmem-1
-rw-rw-r-- 1 zma zma 1.0T Nov  7 20:15 pmem-1-copy
-rw-rw-r-- 1 zma zma  10K Nov  7 20:15 pmem-1.tar
[zma@office tmp]$ mkdir t
[zma@office tmp]$ cd t
[zma@office t]$ time tar xSf ../pmem-1.tar 

real    0m0.003s
user    0m0.000s
sys 0m0.002s
[zma@office t]$ ls -lha
total 8.0K
drwxrwxr-x   2 zma  zma  4.0K Nov  7 20:16 .
drwxrwxrwt. 35 root root 4.0K Nov  7 20:16 ..
-rw-rw-r--   1 zma  zma  1.0T Nov  7 20:14 pmem-1 
```

我使用的是 3.6.5 内核：

```
[zma@office t]$ uname -a
Linux office.zhiqiangma.com 3.6.5-1.fc17.x86_64 #1 SMP Wed Oct 31 19:37:18 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-07T10:01:08.117

**简短的回答：** 使用`bsdtar`GNU `tar`（1.29 或更高版本）创建档案，使用 GNU `tar`（1.26 或更高版本）将它们提取到另一个盒子上。

**长答案：** 这个工作有一些要求。

首先，Linux 必须至少是内核 3.1（Ubuntu 12.04 或更高版本可以），因此它支持`SEEK_HOLE`功能。

然后，您需要可以支持此系统调用的 tar 实用程序。GNU`tar`从 1.29 版（于 2016/05/16 发布，自 Ubuntu 18.04 起默认存在）或`bsdtar`自 3.0.4 版（自 Ubuntu 12.04 起可用）开始支持它 - 使用`sudo apt-get install bsdtar`.

虽然`bsdtar`（使用`libarchive`）很棒，但不幸的是，它在解压缩时并不是很聪明 - 它愚蠢地要求目标驱动器上的可用空间至少与解压缩文件大小一样多，而不考虑漏洞。GNU`tar`将有效地解压这些稀疏档案，并且不会检查这种情况。

这是来自 Ubuntu 12.10（Linux 内核 3.5）的日志：

```
$ dd if=/dev/zero of=1tb seek=1T bs=1 count=1
1+0 records in
1+0 records out
1 byte (1 B) copied, 0.000143113 s, 7.0 kB/s

$ time bsdtar cvfz sparse.tar.gz 1tb 
a 1tb

real    0m0.362s
user    0m0.336s
sys 0m0.020s

# Or, use gnu tar if version is later than 1.29:
$ time tar cSvfz sparse-gnutar.tar.gz 1tb
1tb

real    0m0.005s
user    0m0.006s
sys 0m0.000s

$ ls -l
-rw-rw-r-- 1 autouser autouser 1099511627777 Nov  7 01:43 1tb
-rw-rw-r-- 1 autouser autouser           257 Nov  7 01:43 sparse.tar.gz
-rw-rw-r-- 1 autouser autouser           134 Nov  7 01:43 sparse-gnutar.tar.gz
$ 
```

就像我上面说的，不幸的是，`bsdtar`除非你有 1TB 的可用空间，否则解压将不起作用。但是，任何版本的 GNU 都`tar`可以很好地解压`sparse.tar`：

```
$ rm 1tb 
$ time tar -xvSf sparse.tar.gz 
1tb

real    0m0.031s
user    0m0.016s
sys 0m0.016s
$ ls -l
total 8
-rw-rw-r-- 1 autouser autouser 1099511627777 Nov  7 01:43 1tb
-rw-rw-r-- 1 autouser autouser           257 Nov  7 01:43 sparse.tar.gz 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-13T17:27:01.730

我意识到这个问题已经很老了，但这里有一个更新，可能对其他像我一样在这里找到方式的人有所帮助。

值得庆幸的是，mvp 的出色答案现在已经过时了。根据 GNU [tar 发行说明](https://www.gnu.org/software/tar/)，SEEK_HOLE/SEEK_DATA 是在 2016 年 5 月 16 日发布的 v. 1.29 中添加的。（并且现在 GNU tar v. 1.30 在 Debian stable 中成为标准，可以安全地假设 tar 版本 ≥ 1.29 几乎在任何地方都可用。）

因此，现在处理稀疏文件的方法是使用系统上安装的任何 tar（GNU 或 BSD）来归档它们，提取时也是如此。

此外，对于实际包含一些数据的稀疏文件，是否值得使用压缩（即数据可压缩到足以节省大量磁盘空间，并且节省的磁盘空间值得压缩它所需的大量时间和 CPU 资源） ：

*   `tar -cSjf <archive>.tar.bz2 /path/to/sparse/file`将利用 tar 的 SEEK_HOLE 功能快速高效地归档稀疏文件，并使用 bzip2 压缩实际数据。
*   `tar --use-compress-program=pbzip2 -cSf <archive>.tar.bz2 /path/to/sparse/file`，正如 marcin 的评论中提到的那样，将做同样的事情，同时*也*使用多个核心进行压缩任务。

在我的带有四核 Atom CPU 的小型家用服务器上，使用`pbzip2`vs`bzip2`减少了大约 25% 或 30% 的时间。

无论是否压缩，这将为您提供一个不需要任何特殊稀疏文件处理的存档，占用大约原始稀疏文件的“真实”大小（如果压缩则更少），并且可以随意移动而不用担心关于不同实用程序的稀疏文件功能之间的不一致。例如：`cp`将自动检测稀疏文件并做正确的事情，`rsync`如果您使用该`-S`标志，将正确处理稀疏文件，并且`scp`没有稀疏文件选项（它将消耗带宽，为所有孔复制零并且生成的副本将是非稀疏文件，其大小是原始文件的“表观”大小）；但是它们当然都可以很好地处理 tar 存档——无论它是否包含稀疏文件——而无需任何特殊标志。

### 补充笔记

1.  提取时，`tar`将自动检测使用创建的存档，`-S`因此无需指定它。
2.  使用创建的存档`pbzip2`存储在块中。这导致归档文件比`bzip2`使用的文件稍大，但也意味着提取可以是多线程的，这与使用`bzip2`.
3.  `pbzip2`并且`bzip2`将可靠地提取彼此的档案而不会出现错误或损坏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T08:51:54.190

从[一个相关的问题](https://stackoverflow.com/a/1886632/198536)，也许`rsync`会起作用：

```
rsync --sparse sparse-1 sparse-1-copy 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-06T14:18:35.623

您肯定在寻找压缩工具，例如`tar`、`lzma`、或. 根据这个网站，速度非常快，同时仍然具有相当好的压缩比：`bzip2``zip``rar``lzma`

[http://blog.terzza.com/linux-compression-comparison-gzip-vs-bzip2-vs-lzma-vs-zip-vs-compress/](http://blog.terzza.com/linux-compression-comparison-gzip-vs-bzip2-vs-lzma-vs-zip-vs-compress/)

您还可以通过将压缩级别设置为较低的值来调整压缩的速度/质量比，尝试一下以找到最适合的级别

[http://linux.die.net/man/1/unlzma](http://linux.die.net/man/1/unlzma)**

# python - 如果已经检索到最后一个结果，GAE Query 类的 cursor() 方法会返回什么？

> ID：13252683
> 
> 赞同：2
> 
> 时间：2012-11-06T14:03:26.713
> 
> 标签：python, google-app-engine

来自 Google App Engine 文档：

“cursor() 返回一个 base64 编码的光标字符串，表示查询结果集中检索到的最后一个结果之后的位置。”

如果检索到的最后一个结果是查询集中的最后一个结果，它会返回什么？这是否意味着没有位置可以“跟随”检索到的最后一个结果？因此，是否返回“无”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:17:21.390

即使检索到最后一个结果，仍然有一个游标。无论如何，查询类都不知道这一点：它知道你已经拥有了什么，但它不知道还有什么即将到来。游标不代表任何实际结果，它只是稍后恢复查询的一种方式。事实上，即使在初始查询中到达数据集末尾的情况下，也可以使用游标，但以后的更新意味着现在在后续请求中找到新项目：例如，如果您正在订购到最后更新时间。

（好用户名，顺便说一句：一定要喜欢一些 PKD。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T14:20:33.787

如果所有结果都已消耗，则光标仅指*向该*位置。

换句话说，如果您要向数据存储添加更多项目，光标指向*新结果将出现的位置。*从[数据存储查询文档](https://developers.google.com/appengine/docs/python/datastore/queries#Query_Cursors)中：

> 游标在查询的索引中标记一个位置，从该位置开始下一次扫描结果。因此，它不表示查询结果列表中的相对偏移量，而是表示特定结果之后的位置。如果查询的结果在使用游标之间发生变化，那么只有索引中游标位置之后的那些变化才会影响后续检索的结果。

该`cursor()`方法永远不会返回`None`。

# amazon-ec2 - 聚合的 AMI 指标返回“INSUFFICIENT_DATA”

> ID：13252684
> 
> 赞同：3
> 
> 时间：2012-11-06T14:03:27.317
> 
> 标签：amazon-ec2, amazon-web-services, amazon-ami, autoscaling, amazon-cloudwatch

我正在尝试在 AWS 上设置我自己的自动缩放系统，并且我已经为使用特定 AMI ID 生成的任何实例设置了警报。

当我检查仅监视一台服务器的指标时，它们会很好地获取信息。然而，“汇总”统计数据总是失败。

这是 AWS 的问题，还是我认为它没有做到这一点。我还要指出，这些都是默认指标，不是通过 CLI API 添加的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T05:48:22.613

您是否为您的实例启用了详细监控？AWS 仅支持启用详细监控的实例的聚合指标：

> 对于您启用了详细监控的实例，您还可以获得跨组相似实例的聚合数据。

请参阅：[http](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/US_GetStatistics.html) ://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/US_GetStatistics.html 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:10:46.820

如果您的云指标显示“数据不足”，则意味着您的服务器尚未达到您使用 CLI 配置的状态。

# sql - 无法将网站连接到亚马逊网络服务上的数据库

> ID：13252686
> 
> 赞同：0
> 
> 时间：2012-11-06T14:03:44.577
> 
> 标签：sql, asp.net-mvc, amazon-web-services

我刚刚将我的 mvc.net 3 网站加载到 Amazon Web Services 上的一个微型实例上，并将数据库也放在 RDS 上。我可以通过 VS2010 中的 AWS Explorer 连接到数据库就好了，但是当我将连接字符串添加到我`web.config`时，它会超时尝试访问数据库。还有什么我需要做的吗？

该网站加载正常，只是在访问数据库时超时。

抱歉，如果这有点模糊，整个 AWS 对我来说都是新事物。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:03:41.490

这很可能是权限问题，就像其他发帖人所说，您需要授予对 Web 服务器的访问权限。EC2实例访问RDS实例的最佳实践是在RDS安全组中添加EC2安全组权限。这样，如果您切换 EC2 实例或执行其他导致您的内部 IP 更改的事情，则不会受到影响。

要在 AWS Explorer 中执行此操作，请双击 RDS 安全组以启动 RDS 安全组视图并选择该组。在详细信息屏幕中单击“添加权限”按钮，然后选择您的 EC2 安全组并按下 OK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:12:39.360

您的 RDS 实例的安全组很可能不允许来自您的网络服务器的传入连接。获取您的网络服务器的内部 IP 并将其添加到您的 RDS 实例的安全组（所有这些都可以在 AWS 控制台中完成）。这至少应该可以解决连接问题。

# c# - 在 C# 中创建一个批处理文件然后执行它

> ID：13252691
> 
> 赞同：0
> 
> 时间：2012-11-06T14:04:19.153
> 
> 标签：c#, command-line, batch-file

我是一个爱好 C# 程序员，我正在为一个名为 setMACE 的 CLI 工具制作接口。这是我正在使用的代码片段：

```
if (!File.Exists(batpath))
{
    using (FileStream fs = File.Create(batpath))
    {
        fs.Close();
    }

    using (StreamWriter sw = new StreamWriter(batpath))
    {
        int outfile = r.Next(5);
        sw.WriteLine("cd " + Application.StartupPath);
        sw.WriteLine(exe + " " + "\"" + ofd.FileName + "\"" + " -d " + " >>logfile.txt");
    }
    Process proc = Process.Start(batpath); 
```

这将生成以下 .BAT：

```
cd C:\Users\Steve Jobs\Pictures\SetMACE_v1006
setMACE_x64.exe "C:\Users\Steve Jobs\Documents\avast.cap" -d  >>logfile.txt 
```

这在我在 CMD 中执行这个 .BAT 时有效，但是当我让应用程序运行它时，它会使用该程序生成一个新窗口并忽略`>output.txt`

很抱歉，如果这是一个明智的选择，但我在网上找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:10:57.933

似乎您正在通过 start 生成第二个 cmd 实例，它可能不是在您要 cd 的同一目录中启动

为什么你的批处理文件有“start cmd”，为什么不直接运行setMACE_x64.exe？

即您的批处理文件将是：

```
cd C:\Users\Steve Jobs\Pictures\SetMACE_v1006
setMACE_x64.exe "C:\Users\Steve Jobs\Documents\avast.cap" -d  >>logfile.txt
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:24:58.917

试试这个：

```
string str = @"/c cd C:\Users\Steve Jobs\Pictures\SetMACE_v1006";
String str2 = @"setMACE_x64.exe ""C:\Users\Steve Jobs\Documents\avast.cap"" -d  >>logfile.txt"
Process.Start("cmd.exe", str);
Process.Start("cmd.exe", str2); 
```

我希望这个能帮上忙

# git - 使用 SHA 编辑文件 - git

> ID：13252692
> 
> 赞同：2
> 
> 时间：2012-11-06T14:04:19.783
> 
> 标签：git, sha

我的问题可能是非常基本的，但是如何从我知道 SHA 的版本提交（其作者是与我在同一个远程仓库上工作的同事）编辑特定文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:08:19.420

如果你想要的是获取文件的内容，你可以这样做

```
 git show someHash:pathToFile 
```

如果您想查看文件的当前版本与提交之一之间的差异，您可以这样做

```
 git diff someHash pathToFile 
```

如果你想用提交的一个替换文件的当前版本，你可以这样做

```
 git reset --hard someHash pathToFile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:09:03.323

`git checkout hashOfCommit path/to/file`

然后，您可以编辑该文件并将您的更改提交到您当前所在的分支。

# objective-c - 何时使用自我。设置变量时的前缀？

> ID：13252693
> 
> 赞同：1
> 
> 时间：2012-11-06T14:04:22.110
> 
> 标签：objective-c, cocoa-touch, self

我正在研究基于 ARC 的项目。我的网点是使用
unsafe_unretained property 声明的。每当我使用这些插座时，我
在代码中的任何地方都使用 self.outletname。但我听说有人说，使用 self 会增加保留
计数，我们应该只将它用于强属性。我真的很困惑。我们不应该将 self 用于弱属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:41:28.830

`self.propertyName = newValue``newValue`如果它是保留属性，只会增加保留计数。

# c - 在 C 中将位写入文件

> ID：13252697
> 
> 赞同：29
> 
> 时间：2012-11-06T14:04:48.833
> 
> 标签：c, file, binary

我有这个字符串：“101”我想把它写到一个文件中，用 C 语言，而不是文本：“101”等等 8 位 x 字符。但直接将字符串用作位：位“1”，位“0”和位“1”，这样文件将是3位。

有可能吗？我在网上搜索并尝试这样做：

```
char c[25] = "101";
FILE *binFile = fopen("binFile.bin", "wb");
int x = atoi(c);
fwrite(&x, sizeof(x), 1, binFile); 
```

但最后，当我验证文件的字节时，Windows 告诉我它是 4bytes 文件！而不是3位！

如果可能的话，我该怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-06T14:06:55.217

所有文件系统¹都以字节为单位处理文件（并以更大的粒度分配存储空间，一次最少 512 个字节）。你不可能得到一个*3 位*长的文件。

您能做的最好的事情就是用完一个完整的字节，但忽略其中的 5 个位。为此（假设数字总是适合一个字节），请将输入字符串转换为整数类型：

```
long l = strtol(c, 0, 2); 
```

然后得到它的最低有效字节：

```
unsigned char b = l & 0xffl; 
```

并将其写入文件：

```
fwrite(&b, 1, 1, binFile); 
```

* * *

¹好吧，也许不是全部。可能有一些研究人员在某处试验位大小的文件系统。我不会知道的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-06T14:07:52.270

您的输出文件长度为 4 个字节，因为您正在`int`向文件写入一个。在大多数平台上，an`int`的大小为 4 个字节。

您一次不能写入少于 1 个字节。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-06T14:08:57.923

您可以做的是将其写入位 (3) 并用 0 填充到一个字节。但是，您还需要以实际使用的位数（或最后一个字节的位数）开始（或结束）。

例如（使用第一个字节作为长度）：

```
00000011   -> 3, meaning from the last (and only byte in this case, 
              only the first 3 bits are used)
10100000   -> 101 is the string, other 5 bits are 0, just use for padding 
```

在这种情况下，第一个（长度）字节的开销为 50%，字符串越长，开销百分比当然越小。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-06T14:31:50.927

关于您的方法的 2 个注意事项：

1.  [现代] 计算机无法处理小于 1 字节的内存，因此您将无法将单个位写入磁盘。

    此外，文件系统通常以适合文件的块（512 字节，1Kb，...）分配空间。所以，如果你有一个 500 字节的文件，你实际上会失去 512 字节的磁盘空间。

2.  `atoi()`不会从字符串转换为二进制数，而是转换为整数。你实际上是在写作`0b1100101`，也就是`0d101`。您应该先进行转换。就像是：

    ```
    char b = 0;
    for (int i=0; c[i]!=NULL; i++) 
    {
        b = ((b<<1) | atoi(c[i]));
    } 
    ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-06T14:11:13.843

您不是在写位`101`，而是​​十进制数的二进制值`101`，即 `1100101`。因为您是字节`fread`大小`sizeof(x)`，所以您的文件将是`sizeof(x)`字节长。

# delphi - 虚拟方法表

> ID：13252701
> 
> 赞同：1
> 
> 时间：2012-11-06T14:05:08.887
> 
> 标签：delphi, rtti

我正在使用这个块：

```
procedure ExecMethod(Target: TClass; const MethodName: string; const Args: array of TValue);
var
  LContext: TRttiContext;
  LType: TRttiType;
  LMethod: TRttiMethod;
begin
  LType := LContext.GetType(Target);
  for LMethod in LType.GetMethods do
    if (LMethod.Parent = LType) and (LMethod.Name = MethodName) then begin
      LMethod.Invoke(Target.Create, Args);
      break;
    end;
end; 
```

像这样：

```
ExecMethod(TFuncClass, 'Test1', []);
ExecMethod(TFuncClass, 'Test2', ['hey']);
ExecMethod(TFuncClass, 'Test3', [100]); 
```

在这堂课上：

```
 TFuncClass = class(TObject)
    published
      procedure Test1;
      procedure Test2(const str: string);
      procedure Test3(i: integer);
      // there's more, each one with different prototype
  end;

var
  FuncClass: TFuncClass; 
```

但是，我不断收到访问冲突......或无效的强制转换指针类（或其他）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:58:53.833

正如我在[代码源中指出的](https://stackoverflow.com/a/4189282/33732)那样，它会泄漏内存，因为它会创建给定类的实例而从未释放它们。不过，这不应该导致任何直接的运行时错误，因此它不是手头问题的原因。

问题的代码概括了原始代码以适用于任何给定的类，并且这样做在技术上变得错误。要了解原因，您需要了解 Delphi 如何从类引用构造对象：

当您在类引用变量上调用构造函数时（如在 中`Target.Create`），编译器使用它*在编译时*所知道的知识来决定调用哪个构造函数。在这种情况下，调用的目标是 a `TClass`，编译器*知道*的唯一可用于该类型的构造函数是`TObject.Create`，所以这就是被调用的构造函数。If`TFuncClass`有其他构造函数——即使它与继承自的零参数签名匹配`TObject`——它也永远不会被调用。但是，创建的对象的类型仍将*显示*为`TFuncClass`——`ClassType`函数将返回`TFuncClass`，并且`is`运算符将按预期工作。

当代码在类上调用错误的构造函数时，最终会得到所需类的一些半有效实例。拥有无效实例可能会导致各种问题。如果这包括访问冲突、无效类型转换、无效结果等，我不会感到惊讶。

但是，问题中显示的代码*不应该*有我描述的问题，因为`TFuncClass`没有新的构造函数。但是，给定的代码显然是不完整的，所以这里可能被过度简化了。

你最好让*调用者*负责提供一个实例来调用方法，如下所示：

```
procedure ExecMethod(Target: TObject; const MethodName: string; const Args: array of TValue);
var
  LContext: TRttiContext;
  LType: TRttiType;
  LMethod: TRttiMethod;
begin
  LType := LContext.GetType(Target.ClassType);
  for LMethod in LType.GetMethods(MethodName) do
    // TODO: Beware of overloaded methods
    LMethod.Invoke(Target, Args);
end; 
```

像这样使用该功能：

```
FuncClass := TFuncClass.Create(...);
try
  ExecMethod(FuncClass, 'Test1', []);
  ExecMethod(FuncClass, 'Test2', ['hey']);
  ExecMethod(FuncClass, 'Test3', [100]);
finally
  FuncClass.Free
end; 
```

请注意，这都是假设第二个参数（方法的字符串名称）实际上是由某个变量提供的，该变量的值在运行时之前是未知的。如果您将字符串文字传递给`ExecMethod`，那么您应该停止调用`ExecMethod`，停止使用 RTTI ，直接调用所需的方法：`FuncClass.Test2('hey')`.

# java - 如何获取英文的 Facebook 状态更新

> ID：13252703
> 
> 赞同：1
> 
> 时间：2012-11-06T14:05:27.260
> 
> 标签：java, facebook, facebook-graph-api

我正在使用 facebook Graph API。我想获取特定页面的所有状态更新，这些更新只有英文。Graph API 中是否有任何“lang”类型的参数...？？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:02:03.213

我认为没有“lang”参数。

我会尝试的一件事是尝试猜测语言。有针对不同语言的特殊算法。

顺便说一句：您可以使用 api 图浏览器轻松尝试不同类型的请求：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

# asp.net - 我如何验证从gridview动态生成的jquery对话框控件

> ID：13252715
> 
> 赞同：0
> 
> 时间：2012-11-06T14:06:32.330
> 
> 标签：asp.net, jquery-ui, c#-4.0, jquery-dialog

我有一个 asp:gridview，其中有多个数据。我在 gridview 中有一个模板字段，可以打开一个 jquery 模式对话框。我的模板字段和我的 Jquery 对话框代码：

```
<asp:TemplateField>
                            <ItemTemplate>
                                <a href="#" onclick="linkbtnTest('<%# "#"+Eval("LCID")%>')">Add Shipment Status</a>
                                <asp:Label ID="lbltest" runat="server" Text='<%# Eval("LCID") %>'></asp:Label>
                                <div id='<%# Eval("LCID") %>' style="display: none; margin-top: 90px; margin-left: 90px;">
                                    <table id="tbl_LCStatus_dialog" align="center" border="0px">
                                        <tr>
                                            <td style="height: 20px; width: 30px;">
                                                Invoice Number<asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server"
                                                    ErrorMessage="*" ValidationGroup="valShip" ForeColor="Red" ControlToValidate="txtInvoiceNumber"></asp:RequiredFieldValidator>
                                            </td>

                                            <td style="vertical-align: top; padding-left: 20px;">
                                                <asp:TextBox ID="txtInvoiceNumber" runat="server" CssClass="td_records"></asp:TextBox>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td style="padding-top: 20px;">
                                                <asp:Button ID="btnSubmitShipment" runat="server" Text="Submit" CommandName="Select"
                                                    ValidationGroup="valShip" OnCommand="btnSubmitShipment_Command" CssClass="btnSubmitCSS"
                                                    CausesValidation="True" />
                                                <asp:Button ID="btnResetShipmentRecord" runat="server" Text="Reset" CssClass="btnSubmitCSS" />
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </ItemTemplate>
                        </asp:TemplateField> 
```

当我单击 gridview 中第二行的数据以打开模式对话框时，asp.net 生成的 ID 是**ContentPlaceHolder1_gvdLCStatus_txtInvoiceNumber_1**。

现在我想验证 jquery 模态对话框的数据，无论 gridview 中有多少项目以及它可能生成的任何 id。

# clojure - 有没有办法简化地图中的地图？

> ID：13252716
> 
> 赞同：2
> 
> 时间：2012-11-06T14:06:34.227
> 
> 标签：clojure

我有一个称为 re-val 的序列序列的数据。数据是从 .csv 文件中读取的。以下是数据示例：

```
("      4999" "186300" "    194300" "         0" "380600" "325 " "57" 0)
("      1037" "184200" "    458800" "      6300" "649300" "111 " "124" 0) 
```

有没有比以下更简单、更干净的方法来对每个序列的每个成员应用修剪？

```
(def val1 (map (fn [x] (map #(cstr/trim %) x)) re-val)) 
```

def 用于 repl 诊断目的。实际的 sos 将被提供给文件写入函数。

以下是数据的外观`(second val1)`。

```
("37" "184200" "458800" "6300" "649300" "111" "124" "0") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:56:36.773

您的解决方案可以改进一点：

```
(def val1 (map #(map cstr/trim %) re-val)) 
```

为了使其更具可读性，我可能会求助于`for`：

```
(def val1 (for [line re-val] (map trim line))) 
```

但这并没有减少字符数...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:12:04.460

这有效：

```
user> (def l '("        28" "186300" "    194300" "         0" "380600" "325 " "57" 0))
#'user/l
user>  (map trim (vec l))
("28" "186300" "194300" "0" "380600" "325" "57" "0") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:13:49.487

```
=>((partial map (partial map clojure.string/trim)) data)

(("28" "186300" "194300" "0" "380600" "325" "57" "0")
 ("37" "184200" "458800" "6300" "649300" "111" "124" "0")) 
```

如果您有多个嵌套集合，或者深度未知的集合，并且您希望修剪所有字符串，您也可以使用 walks

```
=>(use 'clojure.walk)
  (postwalk #(if (string? %) (clojure.string/trim %) %) data)

[["28" "186300" "194300" "0" "380600" "325" "57" 0]
 ["37" "184200" "458800" "6300" "649300" "111" "124" 0]] 
```

# maven-3 - Maven 3 程序集插件清单类路径位置

> ID：13252717
> 
> 赞同：0
> 
> 时间：2012-11-06T14:06:36.870
> 
> 标签：maven-3, maven-assembly-plugin, maven-dependency-plugin

我的 pom.xml 文件中有以下节点

http://maven.apache.org/xsd/maven-4.0.0.xsd">4.0.0

```
<groupId>com.company</groupId>
<artifactId>com.company</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging>

<name>com.company</name>
<url>http://maven.apache.org</url>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <archive>
                    <manifest>
                        <mainClass>com.company.Thing</mainClass>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>${project.build.directory}/lib/</classpathPrefix>
                    </manifest>
                </archive>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-dependency-plugin</artifactId>
            <configuration>
                <outputDirectory>${project.build.directory}/lib</outputDirectory>
            </configuration>
            <executions>
                <execution>
                    <phase>install</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        org.apache.maven.plugins
                                    </groupId>
                                    <artifactId>
                                        maven-dependency-plugin
                                    </artifactId>
                                    <versionRange>
                                        [2.5.1,)
                                    </versionRange>
                                    <goals>
                                        <goal>copy</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

当我跑

`mvn clean install` `target\java -jar com.company-...-jar-with-dependencies.jar` 我得到了例外

线程“主”java.lang.NoClassDefFoundError 中的异常：org/apache/log4j/Logger

在 Eclipse 中运行它时，它工作正常。target\lib 也包含 log4j。另外我在哪里可以找到这个生成的清单文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:11:57.347

您需要在子句中包含 log4j，找到适当的[版本](http://mvnrepository.com/artifact/log4j/log4j)并添加它。程序集会自动查找并添加类文件。

# c# - MVC 3 视图模型属性

> ID：13252720
> 
> 赞同：1
> 
> 时间：2012-11-06T14:06:41.423
> 
> 标签：c#, asp.net-mvc-3, viewmodel, asp.net-mvc-viewmodel

我对 viewModel 中的属性组织有疑问。据我了解，视图模型应该尽可能简单，它应该做的主要事情是将数据绑定到视图。

问题是如何区分视图模型和 BL 模型中的属性。我的意思是，例如，我有一个 BL 模型，例如：

```
 public class UserDetailsModel
    { 
        public string UserName {get;set;}
        public string SomeInfo{get;set;}
        public string AnotherInfo{get;set;}
        public string Anything{get;set;}
        public string Something {get;set;}
        ...

     } 
```

然后我有另一个 BL 模型说：

```
 public class UserInfoModel
        { 
            public string Info1{get;set;}
            public string Info2{get;set;}
            public string Info3{get;set;}
            public string Info4{get;set;}
            public string Info5 {get;set;}
            ...

         } 
```

现在的问题是创建应该具有两个 BL 模型数据的 ViewModel 的最佳实践是什么。

1）复制2个模型的属性，并使用默认模型绑定将数据从视图传输到控制器，然后从ViewModels创建BL模型并通过存储库更新数据？在这种情况下，我们有代码重复......

2) ViewModel 应该类似于：

```
 public class UsersIdentificationViewModel 
        {
            public UsersIdentificationViewModel()
            {
                UserInfoModel = new UserInfoModel();
            }

            public UserInfoModel UsersInfo { get; set; }

            public UserDetailsModel UserDetails { get; set; }   

        } 
```

默认绑定在这种情况下不起作用（如果我弄错了，请纠正我），我应该编写自定义模型绑定器或类似的东西......哪种方法更适合单元测试，或者可能有另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:18:14.877

如果您需要在视图模型中使用 BL 模型的属性，最好的选择是将 BL 模型作为属性嵌入到视图模型中。正如您所说的那样，您将避免重复属性名称，这显然是一件好事。

```
public class UsersIdentificationViewModel 
{      
    public UserDetailsModel UserDetails { get; set; }        
    public UserInfoModel UsersInfo { get; set; }

    // I added this propery so I can round up the binding process in case the properties are simple types
    public string SomeSimpleProperty { get; set; }
} 
```

在这种情况下，默认模型绑定将起作用。因为你的 action 方法的参数是复杂类型`UsersIdentificationViewModel`，所以`DefaultModelBinder`反射类会获取公共属性，检查它们是简单类型还是复杂类型，然后绑定到它们中的每一个。

如果属性是复杂类型，则重复该过程。获取公共属性集，绑定器尝试为它们查找值。属性名称是嵌套的。例如：要为 设置值`UserName`，模型绑定器将查找嵌套数据项`UserDetails.UserName`。

如果属性是简单类型，则绑定器将在请求中查找与该属性同名的数据项。例如：该`SomeSimpleProperty`属性将导致活页夹查找`SomeSimpleProperty`数据项。我发现[这个链接](http://dotnetslackers.com/articles/aspnet/Understanding-ASP-NET-MVC-Model-Binding.aspx#s5-binding-with-class-types)对解释模型绑定很有帮助。

对于单元测试，如果您选择案例 1 或 2，您将不会遇到任何问题或差异。

# javascript - 获取数组中的所有标签并引用它

> ID：13252721
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:06:49.537
> 
> 标签：javascript, html, html-table, html-parsing

我正在尝试获取数组中`<TR>`标签内的所有标签，并尝试将其引用为***arrayname[1], arrayname[2]***。然后我期待为标签设置一个唯一的***标题***属性，使用`<TABLE>`**`<TR>``idArr[1].setAttribute("title", "myClass");`**

 **这是我编写的代码，它不起作用。任何人都可以指导我有什么问题！

```
<html>
<head>
<script type="text/javascript" >
var idArr = [];
var formm=document.getElementById("form1");
var trs = formm.getElementsByTagName("tr");
alert(trs.length);
for(var i=0;i<trs.length;i++)
{
   idArr.push(trs[i].id);
   alert(idArr.innerText);
}
idArr[1].setAttribute("title", "myClass");
</script>

</head>
<body>
<form id="form1">
<table border="1">
<tr>
<td>One</td>
<td>Two</td>
</tr>
<tr>
<td>ABC</td>
<td>EFG</td>
</tr>

</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:18:19.563

> 我需要在 javascript 中动态引用每个 TR 元素并设置标题属性。

您的代码获取`tr`元素并循环它们很好，尽管您需要移动它（更多内容见下文）。根本不需要阵列，这就是你遇到麻烦的地方。

你没有说*你*需要在标题中添加什么，但直接这样做：

```
for(var i=0;i<trs.length;i++)
{
   trs[i].title = "The title goes here";
} 
```

或者

```
for(var i=0;i<trs.length;i++)
{
   trs[i].setAttribute("title", "The title goes here");
} 
```

（`title`是实例上的*反射属性*`HTMLElement`，这就是为什么有两种方法可以做到这一点）。

另请注意，正如[userSomeNumberHere 指出的那样](https://stackoverflow.com/a/13252963/157247)，您的代码在其下面的元素存在之前运行。您需要将代码移动到它所操作的元素下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:20:42.257

几个考虑：

*   代码运行时元素不存在，
*   你不需要 Array 来做你正在做的事情。

* * *

```
<html>
<head>
    <title>My Page</title>
</head>
<body>
    <form id="form1">
        <table border="1">
        <tr>
            <td>One</td>
            <td>Two</td>
        </tr>
        <tr>
            <td>ABC</td>
            <td>EFG</td>
        </tr>

        </table>
    </form>

 <!-- Now your script will not run until the elements above are loaded-->
    <script type="text/javascript" >
    var formm=document.getElementById("form1");
    var trs = formm.getElementsByTagName("tr");
    for(var i = 0, len = trs.length; i < len; i++) {
        trs[i].setAttribute("title", "myClass");
    }
    </script>

</body>
</html> 
```

所以我去掉了额外的 Array 代码，并将脚本移动到页面底部，这样它就不会运行，直到它上面的 DOM 加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:19:12.230

就像在您帖子下的评论中一样，您的代码中有一个严重错误。看评论（//...）

```
<script type="text/javascript" >
var idArr = []; //should rename to elemArr or somethink like this
var formm=document.getElementById("form1");
var trs = formm.getElementsByTagName("tr");
alert(trs.length);
for(var i=0;i<trs.length;i++)
{
   idArr.push(trs[i]); //here you push only the id and not the element
   alert(idArr.innerText);
}
idArr[1].setAttribute("title", "myClass");
</script> 
```

但我不知道你为什么要通过 trs 数组并将其转换为另一个数组。你可以简单地使用这个：`trs[1].setAttribute("title", "myClass");`

问候！**

# cloud-foundry - NATS 错误：“检测到无响应的客户端，连接断开”

> ID：13252730
> 
> 赞同：2
> 
> 时间：2012-11-06T14:07:19.693
> 
> 标签：cloud-foundry

在同时部署了大约 70/100 个应用程序后，一切似乎都停止了，我停止了最后 30 个部署。然而，过了一段时间，所有的应用程序都停止了工作，我在 dea.log 中发现了以下日志条目：

```
[2012-11-06 14:35:14.295386] dea - pid=1390 tid=7e88 fid=592d  ERROR -- EXITING! NATS error: 'Unresponsive client detected, connection dropped'
[2012-11-06 14:35:14.295478] dea exception pid=1390 tid=7e88 fid=592d  ERROR -- NATS::ServerError<<'Unresponsive client detected, connection dropped':>> 
```

CF 的所有其他组件似乎都运行良好，但现在两个 DEA 服务器不会启动任何应用程序。知道有什么问题吗？如果您需要更多信息，请告诉我，我很乐意提供更多信息 - 但我不确定什么是相关的。

**编辑：**

`enforce_ulimit: false`在 dea.yml 中我没有遇到这个问题

**编辑2：**

`enforce_ulimit: true`在 dea.yml 中设置后，我收到了这个新错误

```
[2012-11-06 16:32:32.905127] dea - pid=2143 tid=967a fid=d902  ERROR -- EXITING! NATS error: Unknown protocol: {"droplet":490,"limits":{"mem":64,"disk":2048,"fds":256},"name":"gurodari","runtime_info":{"version":"2.6.5","description":"Python 2.6.5","executable":"python","version_output":"2.[5-7]","version_flag":"--version","environment":{"PATH":"/usr/bin:$PATH"},"nameINFO {"server_id":"a746ae3260317c8fa8c0a0dd57","host":"<ip removed>","port":4222,"version":"0.4.26","auth_required":true,"ssl_required":false,"max_payload":1048576}
[2012-11-06 16:32:32.905936] dea exception pid=2143 tid=967a fid=d902  ERROR -- NATS::ServerError<<Unknown protocol: {"droplet":490,"limits":{"mem":64,"disk":2048,"fds":256},"name":"gurodari","runtime_info":{"version":"2.6.5","description":"Python 2.6.5","executable":"python","version_output":"2.[5-7]","version_flag":"--version","environment":{"PATH":"/usr/bin:$PATH"},"nameINFO {"server_id":"a746ae3260317c8fa8c0a0dd57","host":"<ip removed>","port":4222,"version":"0.4.26","auth_required":true,"ssl_required":false,"max_payload":1048576}:>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:25:10.877

围绕 Cloud Foundry OSS 项目 (vcap) 的大部分讨论都发生在 google 组中：[https ://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev)

我建议在那里发帖。

# android - 我想获取文件名并将它们显示在 o 列表中，但是有错误

> ID：13252733
> 
> 赞同：0
> 
> 时间：2012-11-06T14:07:23.967
> 
> 标签：android, listview, sftp, jsch

我想获取文件名并将它们显示在 o 列表中，但是有错误

```
 ls=sftpChannel.ls("/home/volkan/");

                     l.setAdapter(new BaseAdapter() {

                         public View getView(int position, View convertView,
                                ViewGroup parent) {
                             view= new TextView(parent.getContext());

                             l.post(new Runnable() {
                                 public void run() {
                                     for(int i=0;i<ls.size();i++){
                                            view.setText(((LsEntry)ls.get(i)).getFilename());
                                            return;}
                                 }
                             });
                            return null;
                        }
                        public int getCount() {
                             return ls.size();
                        }

                        public Object getItem(int position) {
                            // TODO Auto-generated method stub
                            return null;
                        }

                        public long getItemId(int position) {
                            // TODO Auto-generated method stub
                            return 0;
                        }

                     }); 
```

11-06 15:45:00.955: E/AndroidRuntime(18820): 致命异常: Thread-1344 11-06 15:45:00.955: E/AndroidRuntime(18820): android.view.ViewRootImpl$CalledFromWrongThreadException: 只有原始线程创建视图层次结构的可以触摸其视图。11-06 15:45:00.955: E/AndroidRuntime(18820): 在 android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4267) 11-06 15:45:00.955: E/AndroidRuntime(18820): 在 android. view.ViewRootImpl.invalidateChild(ViewRootImpl.java:855) 11-06 15:45:00.955: E/AndroidRuntime(18820): 在 android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:904) 11-06 15:45: 00.955: E/AndroidRuntime(18820): 在 android.view.ViewGroup.invalidateChild(ViewGroup.java:4005) 11-06 15:45:00.955: E/AndroidRuntime(18820): 在 android.view.View.invalidate(View .java:8716) 11-06 15:45:00.955: E/AndroidRuntime(18820):

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:24:41.467

你从哪里调用这部分代码？根据错误消息，您正在使用与 UI 线程不同的东西。这会导致你的问题...

Adapter 实现也坏了，getView 应该返回 position 参数引用的视图。

```
public View getView(int position, View convertView, ViewGroup parent) {
    final View view = new TextView(parent.getContext());
    l.post(new Runnable() {
        view.setText(((LsEntry)ls.get(position)).getFilename());
    });
    return view;
} 
```

但这仍然很难看，因为您应该缓存已经解析的文件名...更好的方法可能是恕我直言，在单独的线程中进行文件名映射，如果您有该结果，则设置适配器。这将大大简化你的工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:14:57.813

您不能从不同的线程更新 UI。我已经更新了你的代码。核实..

```
 ls=sftpChannel.ls("/home/volkan/");

l.setAdapter(new BaseAdapter() {

public View getView(int position, View convertView,
       ViewGroup parent) {
    view= new TextView(parent.getContext());  
    view.setText(((LsEntry)ls.get(position)).getFilename());
    return view;
}
public int getCount() {
    return ls.size();
}

public Object getItem(int position) {
   // TODO Auto-generated method stub
   return null;
}

public long getItemId(int position) {
   // TODO Auto-generated method stub
   return 0;
}

}); 
```

# c# - 从 Outlook 插件中启动新邮件对话框

> ID：13252738
> 
> 赞同：0
> 
> 时间：2012-11-06T14:07:49.963
> 
> 标签：c#, email, outlook

我在 Outlook 插件中添加了一个自定义的“新安全邮件”按钮。当用户单击该按钮时，我希望出现新邮件对话框，并且我想处理发送按钮单击事件，以便我可以执行一些额外的操作操作并可能取消发送。

这里有很多示例说明如何使用 Microsoft.Office.Interop.Outlook.MailItem 从外部应用程序打开新的 mial 对话框，但是在 Outlook 插件中执行此操作的正确方法是什么？

感谢您的帮助，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:09:29.363

我设法在我的按钮单击事件中使用以下代码解决了这个问题。

```
using Outlook = Microsoft.Office.Interop.Outlook;

Outlook.MailItem mail = Globals.ThisAddIn.Application.CreateItem(Outlook.OlItemType.olMailItem);
mail.UserProperties.Add("IsSecure", Outlook.OlUserPropertyType.olYesNo);
mail.Display(); 
```

我订阅发送点击事件并检查 MailItem 是否包含 UserProperty“IsSecure”。

# iphone - 将 Twitter 帐户链接到您的 iOS 应用程序

> ID：13252741
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:07:56.447
> 
> 标签：iphone, objective-c, ios, twitter, social-framework

在经历了许多教程和示例之后，我很困惑！

我想将用户的 twitter 帐户与我的 iOS 应用程序相关联，以便我可以访问以下信息，

*   访问令牌
*   用户信息（电子邮件、twitter_id、....）

请指导我完成这些步骤。

PS：我正在使用社交框架来链接 twitter 和 Facebook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:48:51.797

> 社交框架允许您将您的应用程序与受支持的社交网络服务集成。在 iOS 和 OS X 上，这个框架提供了一个用于创建 HTTP 请求的模板。仅在 iOS 上，Social 框架提供了一个通用接口，用于代表用户发布请求。

[要使用社交框架，您首先需要通过帐户框架](http://developer.apple.com/library/ios/documentation/Accounts/Reference/ACAccountStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/ACAccountStore/requestAccessToAccountsWithType%3aoptions%3acompletion%3a)请求访问 ACAccount 。用户必须为其帐户授予权限。

一旦应用程序被授予权限，您就可以使用`SLComposeViewController`和 `SLRequest`代表用户发出经过身份验证的请求。您不需要访问令牌！

您可以通过以下 ACAccount 属性访问一些用户信息：

*   accountDescription（帐户的人类可读描述。）
*   accountType（参见类 ACAccountType）
*   凭证（参见类 ACAccountCredential，如果需要，可以在此处访问 oauthToken）
*   标识符
*   用户名

# ruby - 从存储在带有转义字符的变量中的字符串创建正则表达式（Ruby）

> ID：13252743
> 
> 赞同：2
> 
> 时间：2012-11-06T14:08:01.797
> 
> 标签：ruby, regex, string, double-quotes

我正在尝试从一个字符串对象构建一个正则表达式，该对象恰好存储在一个变量中。

我面临的问题是转义序列（在字符串中）这样的“\d”不会对生成的正则表达式产生影响。

```
Regexp.new("\d") => /d/ 
```

如果我使用单引号，很难，它完美无瑕。

```
Regexp.new('\d') => /\d/ 
```

但是，由于我的字符串存储在一个变量中，我总是得到双引号字符串。

有没有办法将双引号字符串转换为单引号字符串，以便我可以在 Regexp 构造函数中使用？

（我想使用双引号的字符串插值功能）

前任。：

```
email_pattern = "/[a-z]*\.com"
whole_pattern = "to: #{email_pattern}"
Regexp.new(whole_pattern) 
```

为了更好的可读性，我想避免转义转义字符。

```
"\\d" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:07:43.203

问题是，您最终会得到完全不同的字符串，具体取决于您使用的是单引号还是双引号：

```
"\d".chars.to_a
#=> ["d"]

'\d'.chars.to_a
#=> ["\\", "d"] 
```

因此，当您使用双引号时，单引号`\`会立即丢失并且无法根据定义恢复，例如：

```
"\d" == "d"
#=> true 
```

所以你永远无法知道在转义发生之前字符串包含什么。正如@FrankSchmitt 建议的那样，使用双反斜杠或坚持使用单引号。没有别的办法。

不过，有一个选择。您可以将您的正则表达式部分定义为正则表达式本身，而不是字符串。它们的行为完全符合预期：

```
regex1 = /\d/
#=> /\d/

regex2 = /foobar/
#=> /foobar/ 
```

然后，您可以使用`#{}`-style 插值构建最终的正则表达式，而不是从字符串构建正则表达式源：

```
regex3 = /#{regex1} #{regex2}/
#=> /(?-mix:\d) (?-mix:foobar)/ 
```

反映您的示例，这将转化为：

```
email_regex = /[a-z]*\.com/
whole_regex = /to: #{email_regex}/
#=> /to: (?-mix:[a-z]*\.com)/ 
```

你可能也会觉得`Regexp#escape`有趣。（[见文档](http://www.ruby-doc.org/core-1.9.3/Regexp.html)）

如果您遇到进一步的转义问题（使用斜杠），您还可以使用替代的 Regexp 文字语法 with `%r{<your regex here>}`，其中您不需要转义`/`字符。例如：

```
%r{/}
#=> /\// 
```

`\`不过，用转义反斜杠是没有办法的`\\`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:11:32.623

要么用单引号创建你的字符串：

```
 s = '\d'
 r = Regexp.new(s) 
```

或引用反斜杠：

```
 s = "\\d"
 r = Regexp.new(s) 
```

两者都应该工作。

# ruby-on-rails - 乘客停下来写日志

> ID：13252755
> 
> 赞同：4
> 
> 时间：2012-11-06T14:08:50.170
> 
> 标签：ruby-on-rails, passenger

```
Started GET "/home" for 117.55.68.xxx at 2012-11-05 22:56:06 +0900
Processing by PageController#home as HTML
Parameters: {"id"=>"420"}

Started POST "/login" for 61.211.5.107 at 2012-11-05 23:25:52 +0900
Processing by UsersController#login as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"xxxxxxx=", "username"=>"***DELETED***", "password"=>"***DELETED***", "commit"=>"login"}
Rendered users/login.html.haml within layouts/application (6.7ms)
Completed 200 OK in 142ms (Views: 103.5ms | ActiveRecord: 0.0ms) 
```

我正在使用乘客 3.0.11。我遇到过日志不写的问题。当未输出“已完成”时会发生这种情况。不输出“Completed”后，20-40分钟不写日志。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:04:47.907

这通常发生在您遇到内存问题时。Ruby 无法写入日志，因为它已耗尽内存。

# jquery - 使用 jquery 对 dom 元素进行分页

> ID：13252759
> 
> 赞同：-2
> 
> 时间：2012-11-06T14:08:58.560
> 
> 标签：jquery, pagination

我想添加一个简单的分页器（上一个 - 下一个）来对一些 html 表进行分页。我尝试了一些 jquery 分页插件，但它们会生成更复杂的分页系统，例如

```
(<<first <prev 1,2,3,4,5 next> last>>). 
```

我正在寻找更基本和更轻松的东西。我怎么能用jquery做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:12:31.377

检查这个它适用于我[http://www.jquery4u.com/demos/jquery-quick-pagination/](http://www.jquery4u.com/demos/jquery-quick-pagination/)

非常容易使用

```
 $("ul.pagination3").quickPagination({pagerLocation:"both",pageSize:"3"}); 
```

# javascript - Blogger 动态视图中的要点

> ID：13252761
> 
> 赞同：8
> 
> 时间：2012-11-06T14:09:12.603
> 
> 标签：javascript, syntax-highlighting, blogger, gist, blogger-dynamic-views

我想在我的博主博客中嵌入我的要点 ( [gist.github )。](https://gist.github.com/)但正如在[这个](https://stackoverflow.com/questions/12179467/adding-script-tag-in-blogger-dynamic-view)问题中解释的那样，动态视图直接不支持 javascript。

从 moski 的（如答案中所述）博客中可以嵌入要点。

如果我只想嵌入我的要点的一个文件怎么办？

例如：

```
<script src="https://gist.github.com/3975635.js?file=regcomp.c"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:20:46.993

查看 moski 的博客、他的描述和要点片段（[gistLoader.js](https://raw.github.com/moski/gist-Blogger/master/public/gistLoader.js)和[gistBlogger.js](https://raw.github.com/moski/gist-Blogger/master/public/gistBlogger.js)），我可以假设要达到您的目标，您必须稍微编辑该代码。

目前，当您添加

```
<script src="https://raw.github.com/moski/gist-Blogger/master/public/gistLoader.js" type="text/javascript"></script> 
```

在您帖子的底部，此脚本的作用是查找您添加到博客中的其他代码

```
<div class="gistLoad" data-id="GistID" id="gist-GistID">Loading ....</div> 
```

检索`data-id`属性，并注入所需的代码以加载脚本并`src`设置为

```
'https://gist.github.com/' + id + '.js' 
```

现在，如果我正确理解了代码的作用，以这种方式编辑第二个 moski 的 HTML 代码：

```
<div class="gistLoad" data-id="GistID" data-file="GistFile" id="gist-GistID">Loading ....</div> 
```

和 moski`gistBlogger.js`中的函数为了检索（定义时）新`data-file`属性，您可以生成一个新`src`的注入，如下所示：

```
'https://gist.github.com/' + id + '.js?file=' + file 
```

它应该有效。

# google-chrome - 打开 chrome 浏览器时，我每次都会收到“服务条款”窗口

> ID：13252768
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:09:43.350
> 
> 标签：google-chrome, watir-webdriver

我从：http://code.google.com/p/chromedriver/downloads/list 安装了 exe 文件（chromedriver_win_23.0.1240.0.zip）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:37:18.503

尝试使用[Alister Scott 的示例设置配置文件](http://watirwebdriver.com/chrome/)

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['download.prompt_for_download'] = false
profile['download.default_directory'] = "/path/to/dir"
b = Watir::Browser.new :chrome, :profile => profile 
```

# tfs - 使用混淆构建 TFS 集成

> ID：13252770
> 
> 赞同：0
> 
> 时间：2012-11-06T14:09:57.273
> 
> 标签：tfs, tfsbuild

我正在使用 Team Foundation Service（以前称为 tfspreview.com）并创建了一个门控签入集成构建。我现在遇到的问题是我已经关闭了签入...由于已合并到我的项目文件中的混淆工具，我无法签入任何内容。

它在服务器上构建时正在寻找一个不存在的文件，因为它在我的机器上......有没有办法传递一个 MSBuild 参数来说明在处理门控签入时使用混淆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:50:33.837

您可以将该文件签入 TFS，以便构建服务器可以找到它。

# java - JFrame 留在后台而不是关闭

> ID：13252772
> 
> 赞同：0
> 
> 时间：2012-11-06T14:10:04.383
> 
> 标签：java, swing, jframe

我的 JFrame 有问题。当我单击“返回”按钮时，出现“课堂详细信息”菜单，但课堂输入 JFrame 表单（addclassroom）停留在后台而不是关闭请帮我纠正它。

**这是我的代码::**

```
public class addclassroom extends JFrame{

    public JTextField txt_classno,txt_bname,txt_size,txt_resources;
    public JComboBox cmbfloor;
    public JLabel label1, label2, label3, label4, label5, label6;
    public JButton Save;
    public JButton Reset;
    public JButton Back;

    public addclassroom(){

        label1 = new javax.swing.JLabel();
        label1.setFont(new java.awt.Font("Verdana", 3, 14)); // NOI18N
        label1.setForeground(Color.BLACK);
        label1.setText("Classroom Records Input");

        label2 = new javax.swing.JLabel("Classroom_No:");
        txt_classno = new javax.swing.JTextField(8);

        label3 = new javax.swing.JLabel("Building Name:");
        txt_bname = new javax.swing.JTextField(15);

        label4 = new javax.swing.JLabel("Building Floor:");
        String floor[] = {"Ground floor","1st floor","2nd floor","3rd floor","4th floor", "5th floor", "6th floor", "7th floor", "8th floor"};
        cmbfloor = new javax.swing.JComboBox(floor);

        label5 = new javax.swing.JLabel("Size Capacity:");
        txt_size = new javax.swing.JTextField(5);

        label6 = new javax.swing.JLabel("Resources");
        txt_resources = new javax.swing.JTextField(20);

        Save = new javax.swing.JButton();
        Save.setText("Save");

        Reset = new javax.swing.JButton();
        Reset.setText("Reset");

        Back = new javax.swing.JButton();
        Back.setText("Back");

        label1.setBounds(100, 25, 200, 50);

        label2.setBounds(50, 100, 100, 50);
        txt_classno.setBounds(180, 100, 100, 30);

        label3.setBounds(50, 150, 100, 50);
        txt_bname.setBounds(180, 150, 140, 30);

        label4.setBounds(50, 200, 100, 50);
        cmbfloor.setBounds(180, 200, 115, 30);

        label5.setBounds(50, 250, 100, 50);
        txt_size.setBounds(180, 250, 65, 30);

        label6.setBounds(50, 300, 100, 50);
        txt_resources.setBounds(180, 300, 175, 30);

        Save.setBounds(100, 400, 75, 20);
        Reset.setBounds(200, 400, 75, 20);
        Back.setBounds(300,400,75,20);

        JFrame ciFrame = new JFrame("Classroom Records Input Form");

        ciFrame.add(label1);
        ciFrame.add(label2);
        ciFrame.add(txt_classno);
        ciFrame.add(label3);
        ciFrame.add(txt_bname);
        ciFrame.add(label4);
        ciFrame.add(cmbfloor);
        ciFrame.add(label5);
        ciFrame.add(txt_size);
        ciFrame.add(label6);
        ciFrame.add(txt_resources);

        ciFrame.add(Save);

        ciFrame.add(Reset);
        ciFrame.add(Back);

        ciFrame.setLayout(null);

        ciFrame.setVisible(true);

        ciFrame.setSize(500, 500);

        ciFrame.setResizable(false);

        ciFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 

        Save.setMnemonic('S');
        Save.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e)
            {
                Save.setEnabled(true);
                }
        });

        Reset.setMnemonic('R');
        Back.setMnemonic('B');

        Handleraddclassroom h = new Handleraddclassroom();
        Save.addActionListener(h);
        Reset.addActionListener(h);
        Back.addActionListener(h);

    }

    public class Handleraddclassroom implements ActionListener{
        public void actionPerformed(ActionEvent event){

            String name = ((JButton)event.getSource()).getText();

            if (name.equals("Back")){
                dispose();

                Classroomdetails cm = new Classroomdetails();

            }

            if (name.equals("Reset")){

                txt_classno.setText("");
                txt_bname.setText("");
                txt_size.setText("");
                txt_resources.setText("");

            }

            if (name.equals("Save")){
                String filename = "C:/JAVA/schedule.accdb";
                String database = "jdbc:odbc:scheduling";

                //Character & Presence checks

                String nsize = txt_size.getText();
                String rsc = txt_resources.getText();

                Pattern p = Pattern.compile("[A-Z,a-z,&%$@!()*^]");
                Matcher Cnsize = p.matcher(nsize);

                Pattern q = Pattern.compile("[A-Z,a-z,&%$@!()*^]");
                Matcher Rsc = q.matcher(rsc);

                if(txt_classno.getText().equals("")){
                    JOptionPane.showMessageDialog(addclassroom.this,"Classroom No field should not be blank");

                }

                if(txt_bname.getText().equals("")){
                    JOptionPane.showMessageDialog(addclassroom.this,"Building Name field should not be blank");

                }

                if(txt_size.getText().equals("")){
                    JOptionPane.showMessageDialog(addclassroom.this,"Size Capacity field should not be blank");

                }else if(Cnsize.find()){
                    JOptionPane.showMessageDialog(addclassroom.this,"Invalid value for Size capacity entered. Please check again");

                }

                if(txt_resources.getText().equals("")){
                    JOptionPane.showMessageDialog(addclassroom.this,"Resources field should not be blank");

                }else if(!Rsc.find()){
                    JOptionPane.showMessageDialog(addclassroom.this,"Invalid value for Resources entered. Please check again");
                }

            else{
                try {
                    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

                    Connection con = DriverManager.getConnection(database ,"","");  //username &password not being used

                    String flr="";
                    if(cmbfloor.getSelectedIndex()==0){
                        flr="Ground floor"; }
                        else if(cmbfloor.getSelectedIndex()==1){
                            flr="1st floor";}

                        else if(cmbfloor.getSelectedIndex()==2){
                            flr="2nd floor";}
                        else if(cmbfloor.getSelectedIndex()==3){
                            flr="3rd floor";}
                        else if(cmbfloor.getSelectedIndex()==4){
                            flr="4th floor";}
                        else if(cmbfloor.getSelectedIndex()==5){
                            flr="5th floor";}
                        else if(cmbfloor.getSelectedIndex()==6){
                            flr="6th floor";}
                        else if(cmbfloor.getSelectedIndex()==7){
                            flr="7th floor";}
                        else if(cmbfloor.getSelectedIndex()==8){
                            flr="8th floor";}

                Statement s = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY); //The Result set can now scroll forward and back

                String sql = "INSERT INTO classroom VALUES('" 

                    + txt_classno.getText()+ "','"
                    + txt_bname.getText() + "','"

                    + flr + "','" 
                    + txt_size.getText() + "','"
                    + txt_resources.getText()+ "' )";

                JOptionPane.showMessageDialog(addclassroom.this,"Classroom Records Saved.");
                dispose();

                addclassroom ac = new addclassroom();

                s.execute(sql);

                s.close();
                con.close();

                } catch (Exception e) {System.out.print("Error: " + e);}
                }
            }
        }   

    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:23:17.457

您的代码令人困惑，因为您的主类 extends `JFrame`，但您还创建了一个内部`JFrame`调用`ciFrame`，它是实际显示的。

一个快速的解决方法是将`ciFrame`next 的声明移动到`JButton Back`（不要这样做`public`并调用它`back`，而不是`Back`）。然后，而不是`dispose()`做`ciFrame.dispose();`

从长远来看，请更改您的代码，例如您扩展`JFrame`并仅使用`this`实例`JFrame`或创建一个作为变量而不扩展`JFrame`。

我不喜欢发布 100 行代码，但在这里，您的代码已修改为可以工作：

```
public class addclassroom extends JFrame {

    public JTextField txt_classno, txt_bname, txt_size, txt_resources;
    public JComboBox cmbfloor;
    public JLabel label1, label2, label3, label4, label5, label6;
    public JButton Save;
    public JButton Reset;
    public JButton Back;
    JFrame ciFrame = new JFrame("Classroom Records Input Form");

    public addclassroom() {

        label1 = new javax.swing.JLabel();
        label1.setFont(new java.awt.Font("Verdana", 3, 14)); // NOI18N
        label1.setForeground(Color.BLACK);
        label1.setText("Classroom Records Input");

        label2 = new javax.swing.JLabel("Classroom_No:");
        txt_classno = new javax.swing.JTextField(8);

        label3 = new javax.swing.JLabel("Building Name:");
        txt_bname = new javax.swing.JTextField(15);

        label4 = new javax.swing.JLabel("Building Floor:");
        String floor[] = { "Ground floor", "1st floor", "2nd floor", "3rd floor", "4th floor", "5th floor",
                "6th floor", "7th floor", "8th floor" };
        cmbfloor = new javax.swing.JComboBox(floor);

        label5 = new javax.swing.JLabel("Size Capacity:");
        txt_size = new javax.swing.JTextField(5);

        label6 = new javax.swing.JLabel("Resources");
        txt_resources = new javax.swing.JTextField(20);

        Save = new javax.swing.JButton();
        Save.setText("Save");

        Reset = new javax.swing.JButton();
        Reset.setText("Reset");

        Back = new javax.swing.JButton();
        Back.setText("Back");

        label1.setBounds(100, 25, 200, 50);

        label2.setBounds(50, 100, 100, 50);
        txt_classno.setBounds(180, 100, 100, 30);

        label3.setBounds(50, 150, 100, 50);
        txt_bname.setBounds(180, 150, 140, 30);

        label4.setBounds(50, 200, 100, 50);
        cmbfloor.setBounds(180, 200, 115, 30);

        label5.setBounds(50, 250, 100, 50);
        txt_size.setBounds(180, 250, 65, 30);

        label6.setBounds(50, 300, 100, 50);
        txt_resources.setBounds(180, 300, 175, 30);

        Save.setBounds(100, 400, 75, 20);
        Reset.setBounds(200, 400, 75, 20);
        Back.setBounds(300, 400, 75, 20);

        ciFrame.add(label1);
        ciFrame.add(label2);
        ciFrame.add(txt_classno);
        ciFrame.add(label3);
        ciFrame.add(txt_bname);
        ciFrame.add(label4);
        ciFrame.add(cmbfloor);
        ciFrame.add(label5);
        ciFrame.add(txt_size);
        ciFrame.add(label6);
        ciFrame.add(txt_resources);

        ciFrame.add(Save);

        ciFrame.add(Reset);
        ciFrame.add(Back);

        ciFrame.setLayout(null);

        ciFrame.setVisible(true);

        ciFrame.setSize(500, 500);

        ciFrame.setResizable(false);

        ciFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Save.setMnemonic('S');
        Save.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                Save.setEnabled(true);
            }
        });

        Reset.setMnemonic('R');
        Back.setMnemonic('B');

        Handleraddclassroom h = new Handleraddclassroom();
        Save.addActionListener(h);
        Reset.addActionListener(h);
        Back.addActionListener(h);

    }

    public static void main(String[] args) {
        new addclassroom();
    }

    public class Handleraddclassroom implements ActionListener {
        public void actionPerformed(ActionEvent event) {

            String name = ((JButton) event.getSource()).getText();

            if (name.equals("Back")) {
                ciFrame.dispose();
//                Classroomdetails cm = new Classroomdetails();

            }

            if (name.equals("Reset")) {

                txt_classno.setText("");
                txt_bname.setText("");
                txt_size.setText("");
                txt_resources.setText("");

            }

            if (name.equals("Save")) {
                String filename = "C:/JAVA/schedule.accdb";
                String database = "jdbc:odbc:scheduling";

                // Character & Presence checks

                String nsize = txt_size.getText();
                String rsc = txt_resources.getText();

                Pattern p = Pattern.compile("[A-Z,a-z,&%$@!()*^]");
                Matcher Cnsize = p.matcher(nsize);

                Pattern q = Pattern.compile("[A-Z,a-z,&%$@!()*^]");
                Matcher Rsc = q.matcher(rsc);

                if (txt_classno.getText().equals("")) {
                    JOptionPane.showMessageDialog(addclassroom.this, "Classroom No field should not be blank");

                }

                if (txt_bname.getText().equals("")) {
                    JOptionPane.showMessageDialog(addclassroom.this, "Building Name field should not be blank");

                }

                if (txt_size.getText().equals("")) {
                    JOptionPane.showMessageDialog(addclassroom.this, "Size Capacity field should not be blank");

                } else if (Cnsize.find()) {
                    JOptionPane.showMessageDialog(addclassroom.this,
                            "Invalid value for Size capacity entered. Please check again");

                }

                if (txt_resources.getText().equals("")) {
                    JOptionPane.showMessageDialog(addclassroom.this, "Resources field should not be blank");

                } else if (!Rsc.find()) {
                    JOptionPane.showMessageDialog(addclassroom.this,
                            "Invalid value for Resources entered. Please check again");
                }

                else {
                    try {
                        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

                        Connection con = DriverManager.getConnection(database, "", ""); // username
                                                                                        // &password
                                                                                        // not
                                                                                        // being
                                                                                        // used

                        String flr = "";
                        if (cmbfloor.getSelectedIndex() == 0) {
                            flr = "Ground floor";
                        } else if (cmbfloor.getSelectedIndex() == 1) {
                            flr = "1st floor";
                        }

                        else if (cmbfloor.getSelectedIndex() == 2) {
                            flr = "2nd floor";
                        } else if (cmbfloor.getSelectedIndex() == 3) {
                            flr = "3rd floor";
                        } else if (cmbfloor.getSelectedIndex() == 4) {
                            flr = "4th floor";
                        } else if (cmbfloor.getSelectedIndex() == 5) {
                            flr = "5th floor";
                        } else if (cmbfloor.getSelectedIndex() == 6) {
                            flr = "6th floor";
                        } else if (cmbfloor.getSelectedIndex() == 7) {
                            flr = "7th floor";
                        } else if (cmbfloor.getSelectedIndex() == 8) {
                            flr = "8th floor";
                        }

                        Statement s = con
                                .createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY); // The
                                                                                                                 // Result
                                                                                                                 // set
                                                                                                                 // can
                                                                                                                 // now
                                                                                                                 // scroll
                                                                                                                 // forward
                                                                                                                 // and
                                                                                                                 // back

                        String sql = "INSERT INTO classroom VALUES('"

                        + txt_classno.getText() + "','" + txt_bname.getText() + "','"

                        + flr + "','" + txt_size.getText() + "','" + txt_resources.getText() + "' )";

                        JOptionPane.showMessageDialog(addclassroom.this, "Classroom Records Saved.");
                        dispose();

                        addclassroom ac = new addclassroom();

                        s.execute(sql);

                        s.close();
                        con.close();

                    } catch (Exception e) {
                        System.out.print("Error: " + e);
                    }
                }
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T15:41:07.677

```
public class addclassroom 
{
public JTextField txt_classno,txt_bname,txt_size,txt_resources;
public JComboBox cmbfloor;
public JLabel label1, label2, label3, label4, label5, label6;
public JButton Save;
public JButton Reset;
public JButton Back;

public addclassroom(){

    label1 = new javax.swing.JLabel();
    label1.setFont(new java.awt.Font("Verdana", 3, 14)); // NOI18N
    label1.setForeground(Color.BLACK);
    label1.setText("Classroom Records Input");

    label2 = new javax.swing.JLabel("Classroom_No:");
    txt_classno = new javax.swing.JTextField(8);

    label3 = new javax.swing.JLabel("Building Name:");
    txt_bname = new javax.swing.JTextField(15);

    label4 = new javax.swing.JLabel("Building Floor:");
    String floor[] = {"Ground floor","1st floor","2nd floor","3rd floor","4th floor", "5th floor", "6th floor", "7th floor", "8th floor"};
    cmbfloor = new javax.swing.JComboBox(floor);

    label5 = new javax.swing.JLabel("Size Capacity:");
    txt_size = new javax.swing.JTextField(5);

    label6 = new javax.swing.JLabel("Resources");
    txt_resources = new javax.swing.JTextField(20);

    Save = new javax.swing.JButton();
    Save.setText("Save");

    Reset = new javax.swing.JButton();
    Reset.setText("Reset");

    Back = new javax.swing.JButton();
    Back.setText("Back");

    label1.setBounds(100, 25, 200, 50);

    label2.setBounds(50, 100, 100, 50);
    txt_classno.setBounds(180, 100, 100, 30);

    label3.setBounds(50, 150, 100, 50);
    txt_bname.setBounds(180, 150, 140, 30);

    label4.setBounds(50, 200, 100, 50);
    cmbfloor.setBounds(180, 200, 115, 30);

    label5.setBounds(50, 250, 100, 50);
    txt_size.setBounds(180, 250, 65, 30);

    label6.setBounds(50, 300, 100, 50);
    txt_resources.setBounds(180, 300, 175, 30);

    Save.setBounds(100, 400, 75, 20);
    Reset.setBounds(200, 400, 75, 20);
    Back.setBounds(300,400,75,20);

    JFrame ciFrame = new JFrame("Classroom Records Input Form");

    ciFrame.add(label1);
    ciFrame.add(label2);
    ciFrame.add(txt_classno);
    ciFrame.add(label3);
    ciFrame.add(txt_bname);
    ciFrame.add(label4);
    ciFrame.add(cmbfloor);
    ciFrame.add(label5);
    ciFrame.add(txt_size);
    ciFrame.add(label6);
    ciFrame.add(txt_resources);

    ciFrame.add(Save);

    ciFrame.add(Reset);
    ciFrame.add(Back);

    ciFrame.setLayout(null);

    ciFrame.setVisible(true);

    ciFrame.setSize(500, 500);

    ciFrame.setResizable(false);

    ciFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);  

    Save.setMnemonic('S');
    Save.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e)
        {
            Save.setEnabled(true);
            }
    });

    Reset.setMnemonic('R');
    Back.setMnemonic('B');

    Handleraddclassroom h = new Handleraddclassroom();
    Save.addActionListener(h);
    Reset.addActionListener(h);
    Back.addActionListener(h);

}

public class Handleraddclassroom implements ActionListener{

    public void actionPerformed(ActionEvent event){

        String name = ((JButton)event.getSource()).getText();

        if (name.equals("Back")){

            Classroomdetails cm = new Classroomdetails();
            dispose();  

        }

        if (name.equals("Reset")){

            txt_classno.setText("");
            txt_bname.setText("");
            txt_size.setText("");
            txt_resources.setText("");

        }

        if (name.equals("Save")){
            String filename = "C:/JAVA/schedule.accdb";
            String database = "jdbc:odbc:scheduling";

            //Character & Presence checks

            String nsize = txt_size.getText();
            String rsc = txt_resources.getText();

            Pattern p = Pattern.compile("[A-Z,a-z,&%$@!()*^]");
            Matcher Cnsize = p.matcher(nsize);

            Pattern q = Pattern.compile("[A-Z,a-z,&%$@!()*^]");
            Matcher Rsc = q.matcher(rsc);

            if(txt_classno.getText().equals("")){
                JOptionPane.showMessageDialog(null,"Classroom No field should not be blank");

            }

            if(txt_bname.getText().equals("")){
                JOptionPane.showMessageDialog(null,"Building Name field should not be blank");

            }

            if(txt_size.getText().equals("")){
                JOptionPane.showMessageDialog(null,"Size Capacity field should not be blank");

            }else if(Cnsize.find()){
                JOptionPane.showMessageDialog(null,"Invalid value for Size capacity entered. Please check again");

            }

            if(txt_resources.getText().equals("")){
                JOptionPane.showMessageDialog(null,"Resources field should not be blank");

            }else if(!Rsc.find()){
                JOptionPane.showMessageDialog(null,"Invalid value for Resources entered. Please check again");
            }

        else{
            try {
                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

                Connection con = DriverManager.getConnection(database ,"","");  //username &password not being used

                String flr="";
                if(cmbfloor.getSelectedIndex()==0){
                    flr="Ground floor"; }
                    else if(cmbfloor.getSelectedIndex()==1){
                        flr="1st floor";}

                    else if(cmbfloor.getSelectedIndex()==2){
                        flr="2nd floor";}
                    else if(cmbfloor.getSelectedIndex()==3){
                        flr="3rd floor";}
                    else if(cmbfloor.getSelectedIndex()==4){
                        flr="4th floor";}
                    else if(cmbfloor.getSelectedIndex()==5){
                        flr="5th floor";}
                    else if(cmbfloor.getSelectedIndex()==6){
                        flr="6th floor";}
                    else if(cmbfloor.getSelectedIndex()==7){
                        flr="7th floor";}
                    else if(cmbfloor.getSelectedIndex()==8){
                        flr="8th floor";}

            Statement s = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY); //The Result set can now scroll forward and back

            String sql = "INSERT INTO classroom VALUES('" 

                + txt_classno.getText()+ "','"
                + txt_bname.getText() + "','"

                + flr + "','" 
                + txt_size.getText() + "','"
                + txt_resources.getText()+ "' )";

            JOptionPane.showMessageDialog(null,"Classroom Records Saved.");

            s.execute(sql);

            s.close();
            con.close();

            } catch (Exception e) {System.out.print("Error: " + e);}
            }
        }
    }   

}

private void dispose() {

} 
```

}

# php - 将 div 的内容转换为图像

> ID：13252773
> 
> 赞同：2
> 
> 时间：2012-11-06T14:10:18.417
> 
> 标签：php, javascript, html

我正在创建一个图像编辑器类型的 Web 应用程序。我有一个主要`div`内容，其中包含许多`div`内容。

当用户单击保存按钮时，我想将主文件保存`div`为文件夹中的图像。我尝试使用它，`Canvas.toDataURL()`但后来我发现我无法在画布标签内放置一个 div（主 div）。我也尝试过`imagegrabscreen()`php的功能，但它在整个页面加载之前捕获了屏幕，所以它没有用。

任何人都可以帮助我并建议一种使用 php 或 javascript 来实现它的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:12:51.980

当您可以只使用一个并使用适当的画布功能在其上绘制时，为什么还要使用一堆`div`s ？`canvas`

有[很多你正在尝试做的事情的例子](http://google.com/search?q=js+canvas+paint+example)，比如[这个](http://dev.opera.com/articles/view/html5-canvas-painting/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:33:13.667

如果您想对主 div 进行“截图”，请查看以下链接

[使用 HTML5/Canvas/JavaScript 截取屏幕截图](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots/6678156#6678156)

[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:23:03.967

```
use this code to save image from canvas

function save_canvas_img()
            {

                var canvas = document.getElementById("your id");
                var canvasData = canvas.toDataURL("image/png");
                var ajax = new XMLHttpRequest();
                ajax.open("POST",'save.php',false);
                ajax.setRequestHeader('Content-Type', 'application/your page name');
                ajax.send(canvasData ); 

                alert('You have successfully saved this image');

            }`enter code here`
here save.php
if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
{

    $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

    $filteredData=substr($imageData, strpos($imageData, ",")+1);

    $unencodedData=base64_decode($filteredData);
    // Need to decode before saving since the data we received is already base64 encoded

    //echo "unencodedData".$unencodedData;
    $randomName = mktime(). rand(99999,9999999). '.png';

   $fp = fopen( 'foldername/'.$randomName, 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );}`enter code here` 
```

# c# - PropertyGrid 如何将集合显示为属性？

> ID：13252774
> 
> 赞同：3
> 
> 时间：2012-11-06T14:10:20.150
> 
> 标签：c#, .net, propertygrid, collectioneditor

对于将集合作为其字段之一的类，`List<Object> myList`将在单击时`PropertyGrid`将值显示为`Collection`并启动集合编辑器。是否可以将其改为可扩展属性，根据任何字段，每个条目都是另一个可扩展属性`Object`？有一些像：

![在此处输入图像描述](../Images/4089e7b4a6732ce9ebffc6fe1805d7c3.png)

编辑：屏幕来自 [http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert上的项目](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert)

有没有一种方法可以获得“集合对象的可扩展行为？

# python - 在python中连接一个numpy矩阵的所有行

> ID：13252781
> 
> 赞同：7
> 
> 时间：2012-11-06T14:10:37.170
> 
> 标签：python, numpy

我有一个 numpy 矩阵，想将所有行连接在一起，所以我最终得到一个长数组。

```
#example

input:
[[1 2 3]
 [4 5 6}
 [7 8 9]]

output:
[[1 2 3 4 5 6 7 8 9]] 
```

我现在这样做的方式似乎并不像pythonic。我确信有更好的方法。

```
combined_x = x[0] 
for index, row in enumerate(x):
    if index!= 0:
        combined_x = np.concatenate((combined_x,x[index]),axis=1) 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T14:21:39.120

我会建议[`ravel`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)or[`flatten`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html#numpy.ndarray.flatten)的方法`ndarray`。

```
>>> a = numpy.arange(9).reshape(3, 3)
>>> a.ravel()
array([0, 1, 2, 3, 4, 5, 6, 7, 8]) 
```

`ravel`比它更快`concatenate`，`flatten`因为它不会返回副本，除非它必须：

```
>>> a.ravel()[5] = 99
>>> a
array([[ 0,  1,  2],
       [ 3,  4, 99],
       [ 6,  7,  8]])
>>> a.flatten()[5] = 77
>>> a
array([[ 0,  1,  2],
       [ 3,  4, 99],
       [ 6,  7,  8]]) 
```

但是如果你需要一个副本来避免上面说明的内存共享，你最好使用`flatten`than `concatenate`，从这些时间可以看出：

```
>>> %timeit a.ravel()
1000000 loops, best of 3: 468 ns per loop
>>> %timeit a.flatten()
1000000 loops, best of 3: 1.42 us per loop
>>> %timeit numpy.concatenate(a)
100000 loops, best of 3: 2.26 us per loop 
```

另请注意，您可以使用（感谢 Pierre GM！）获得输出说明的*确切结果（单行二维数组）：*`reshape`

```
>>> a = numpy.arange(9).reshape(3, 3)
>>> a.reshape(1, -1)
array([[0, 1, 2, 3, 4, 5, 6, 7, 8]])
>>> %timeit a.reshape(1, -1)
1000000 loops, best of 3: 736 ns per loop 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T14:14:25.363

您可以使用 numpy[`concatenate`函数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html)：

```
>>> ar = np.array([[1,2,3],[4,5,6],[7,8,9]])
>>> np.concatenate(ar)
array([1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

您也可以尝试[`flatten`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html#numpy.ndarray.flatten)：

```
>>> ar.flatten()
array([1, 2, 3, 4, 5, 6, 7, 8, 9]) 
```

# delphi - 如何禁用超过特定时间的 TDateTimePicker 日期？

> ID：13252791
> 
> 赞同：2
> 
> 时间：2012-11-06T14:11:19.867
> 
> 标签：delphi, datetimepicker

如何禁用 TDateTimePicker 允许选择超出系统日期和时间的日期？例如，如果我的系统日期是 2012 年 11 月 6 日，我应该无法选择 2012 年 11 月 6 日之后的日期。

此外，我们可以做一些事情来仅在特定范围内选择日期吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:58:39.730

您可以使用类的`MaxDate`属性`TDateTimePicker`来设置最大允许日期。

您可以在表单中的某处添加

```
DateTimePicker1.MaxDate := Now; 
```

此外，还有一个`MinDate`属性可以防止选择比指定日期更早的日期。

# javascript - jQuery，无法获取文本框的值

> ID：13252794
> 
> 赞同：1
> 
> 时间：2012-11-06T14:11:22.813
> 
> 标签：javascript, jquery, html

在我的代码中，我可以获取对象但不能获取值。如何获取`.cups`文本框的值？谢谢。

HTML：

```
<tr id="20">

      <td class="description">CHEESE,FONTINA</td>
      <td><input type="text" class="cups" value=""></td>
      <td><input type="checkbox" class="breakfast"></td>
      <td><input type="checkbox" class="lunch"></td>
      <td><input type="checkbox" class="dinner"></td>
      <td><input type="checkbox" class="snack"></td>
      <td><input type="checkbox" class="favorites"></td>
      <td><label class="addFood"><input type="button" class="input_text_custom input_button" value="Add"></label></td>

</tr> 
```

JS：

```
$(document).ready(function () {

    $('.addFood').click(function () {

        var tr = $(this).parents('tr');

        var foodId = tr.attr('id');  // works
        var servings = tr.children('.cups');  // returns [object Object]
        var servings = tr.children('.cups').val();  // returns undefined
        alert(servings);

    });

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T14:13:38.843

是的`<input>`孙子`<tr>`，而不是子子，所以它不会被选中，[`.children`](http://api.jquery.com/children/)当你尝试它时你会得到一个没有成员的 jQuery 对象（这类似于一个空数组）。

[`.find`](http://api.jquery.com/find/)改为对后代进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T14:15:38.137

我总是发现最好使用 jQuery 选择器尽可能详细。特别是当涉及到类时，因为可以匹配的元素可能不止一种或*多种元素。*身份证是独一无二的，所以`tr#20`是矫枉过正（IMO）。

我会使用这样的东西 -

```
var cupsValue = $("#20 input.cups").val(); 
```

如果您仍然想使用您的代码的派生，我还建议您使用`closest()`而不是`parents()`（除非我从您的标记中遗漏了一些东西）。您只是在寻找一个父对象，最接近`tr`的是当前元素的父对象。

# android - AndEngine astar 寻路

> ID：13252797
> 
> 赞同：1
> 
> 时间：2012-11-06T14:11:28.487
> 
> 标签：android, andengine, path-finding, a-star, tmx

谁能给我一个在 TMXTiledMap 上使用带有 AndEngine 的 astar 寻路算法的源代码示例。我正在使用从[https://github.com/nicolasgramlich/AndEngine](https://github.com/nicolasgramlich/AndEngine)下载的 AndEngine 。

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:43:50.803

这是官方的[TMXTiledMapExample](http://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/TMXTiledMapExample.java)，但它不包含 A* 寻路。不过，它可以教您有关平铺地图的知识。

[这](http://www.andengine.org/forums/gles1/a-astar-pathfinding-in-tmxtiledmapexample-java-t3949.html)是论坛中包含它的另一个示例。这不是一个真正的例子，但那里提供的寻路代码有效。我认为没有任何真正的 A* 寻路示例，从未见过任何教程（学习的最佳方法是自己阅读代码。最好看看[AStarPathFinder.java](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/util/algorithm/path/astar/AStarPathFinder.java)代码）。

论坛帖子中对您来说重要的部分是（行）：

123：初始化`AStarPathFinder`

205 - 213：将屏幕/场景坐标转换为地图图块并使用路径查找器。

224：方法`loadPathFound`——使用探路者返回的路径来移动实体。

第三篇文章中的`MyMap`班级。

# java - android中列表的优化支持

> ID：13252801
> 
> 赞同：0
> 
> 时间：2012-11-06T14:11:45.273
> 
> 标签：java, android, list, arraylist

我在arraylist android中有一个小问题，让我告诉你我面临的问题。

我有一个自定义联系人对象，其中包含有关姓名、联系电话和唯一 ID 的详细信息。当我查询数据库时，我得到了列表，我将存储在一个 ArrayList 中。

在这里我怎么做

```
Arraylist<contact> ctlist = new Arraylist(contact);
ctlist = getitemfromDB(); 
```

在下一个场景中，我会根据特定条件查询并获取一组联系人对象。我再次获得联系人列表对象。

```
Arraylist<contact> newctlist = new Arraylist(contact);
newctlist = getitemfromDB(condition); 
```

现在，如果我从中选择任何对象`newctlist`并在其中搜索`ctlist`，尽管该对象存在于 ctlist 编译器中说找不到对象。

我可以知道上述方法有什么问题吗，如果我在同一个列表中搜索，即如果我从 newctlist 中选择一个对象并在其中搜索，我将得到正确的预期结果。

会有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:14:11.207

正如 Mitch Wheat 所说，您正在尝试比较两个不同的对象。那是因为 List 使用`equals`方法来检索特定对象。我认为您没有在自定义类中覆盖它。只需根据您的联系人类中的字段实现`equals`和方法。`hashCode`

事实上，您应该尝试始终覆盖`equals`和`hashCode`类中的方法，其中相等具有与引用相等不同的含义，例如bean。请[到处](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)看看[。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode%28%29) _ 此外，如果可以，请阅读 Josh Bloch 的“Effective Java”中的第三章，其中包含这些实现的质量规则（顺便说一句，阅读整本书，这很棒）。

请注意，有一些库可以帮助您正确实现这些库（Java7 `java.util.Objects`、Guava `Objects`、apache commons`EqualsBuilder`和`HashCodeBuilder`）

小心，因为这些方法必须具有非常精确的数学特性

# assembly - 寻址方式可以这样写吗？

> ID：13252809
> 
> 赞同：1
> 
> 时间：2012-11-06T14:12:19.420
> 
> 标签：assembly, addressing-mode

我要使用 cmp 指令，是否在汇编语言中设置以下语法？例子：

```
cmp [temp + si],[temp + si+1] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:28:04.427

不，你不能（完全）这样做。对于 Intel x86 上的几乎所有指令，其中一个操作数必须是寄存器。

有一个例外：`cmpsb`与`[ds:si]`（`[es:di]`或，在 32 位模式下，`[ds:esi]`与相比`[es:edi]`，或在 64 位模式下，使用`rsi`and `rdi`）。

但是，如果您想使用`si`指向两个操作数，则需要加载一些其他寄存器，然后比较：

```
mov al, [temp+si]
cmp al, [temp+si+1] 
```

另一种可能性是从 加载`[si]`并递增`si`：

```
lodsb          ;roughly equivalent to mov al, [si] / inc si
cmp al, [si] 
```

由于这只能使用`si`，而不是`temp+si`，因此您需要在使用之前将它们加在一起。这有点短，但（至少理论上）在大多数当前处理器上更慢。要恢复速度，您还可以使用更原始的指令：

```
mov al, [si+temp]
inc si
cmp al, [si+temp] 
```

或者，由于您同时使用`+temp`了这两个指令，因此您可能会通过提前进行该添加来获得一点好处：

```
add si, temp
mov al, [si]
inc si
cmp al, [si] 
```

但是要记住一件事：由于您正在处理内存中的数据，因此这可能不会对速度产生任何真正的影响——如果您对内存做很多事情，内存的带宽通常（通常？）是瓶颈，所以优化处理器本身上的指令执行几乎没有什么区别。

# java - Java：gridbaglayout混乱

> ID：13252811
> 
> 赞同：4
> 
> 时间：2012-11-06T14:12:27.283
> 
> 标签：java, swing, gridbaglayout

这是我在这里的第一个问题，所以当我违反任何规则或没有使用正确的格式时，请原谅我

我正在 java swing 中创建一个简单的表单，它由 1 个 JLabel、1 个 JTextField 和 1 个按钮组成

```
|---------------------------|
|                           |
|           JLabel          |
|                           |
|---------------------------|
|    JTextField    | Button |
|---------------------------| 
```

Button 应位于右下角，JTextField 位于其左侧，JLabel 位于顶部，跨越两列

我希望 Button 是固定大小，JTextField 是固定高度，但使用全宽（Button 使用的除外），而 JLabel 使用所有其他空间（带有和高度）

我什至不确定我应该使用 GridBagLayout 还是其他 Layout ？

这可能是一个非常简单的问题，但让我困惑了一段时间（我猜 GridBarLayout 的选项太多了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:32:39.263

首先，将面板的布局设置为`GridBagLayout`.

然后，创建一个`GridBagConstraints`对象并将填充设置为`GridBagConstraints.BOTH`。

对于`JLabel`，在约束对象上设置以下属性：`gridx = 0, gridy = 0, gridwidth = 2, gridheight = 2, weightx = 1, weighty = 1`。

对于`JTextField`，在约束对象上设置以下属性：`gridx = 0, gridy = 1, gridwidth = 1, gridheight = 1, weightx = 1, weighty = 0`。

对于`JButton`，在约束对象上设置以下属性：`gridx = 1, gridy = 1, gridwidth = 1, gridheight = 1, weightx = 0, weighty = 0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:33:42.003

类 BorderLayout 易于使用，不如 GridBagLayout 强大。

但是当事情很简单时，解决方案必须相同。

```
panel.add( label, BorderLayout.CENTER );
JPanel south = new JPanel();
south.add( textfield );
south.add( button );
button.setPreferredSize( x, y );
panel.add( south, BorderLayout.SOUTH ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:29:35.117

好的，这是一个演示代码，应该可以帮助您：

```
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class TestGridBagLayout {

    protected void initUI() {
        JFrame frame = new JFrame(TestGridBagLayout.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JButton button = new JButton("A button");
        JTextField textField = new JTextField();
        JLabel label = new JLabel("A cool long nice label that will stretch.");
        label.setHorizontalAlignment(JLabel.CENTER);
        label.setBorder(BorderFactory.createLineBorder(Color.GREEN));
        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;// Fill the "cell" in both direction
        gbc.weightx = 1.0;// Allocate extra-width to the label
        gbc.weighty = 1.0;// Allocate extra-height to the label
        gbc.gridwidth = GridBagConstraints.REMAINDER;// The label takes all the available width of the "row"
        panel.add(label, gbc);

        gbc.weighty = 0; // Don't stretch TF vertically
        gbc.fill = GridBagConstraints.HORIZONTAL; // Fill horizontally
        gbc.gridwidth = GridBagConstraints.RELATIVE;
        panel.add(textField, gbc);
        gbc.weightx = 0; // No extra horizontal space is given to the button
        gbc.fill = GridBagConstraints.NONE; // No fill for the button
        panel.add(button, gbc);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestGridBagLayout().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T16:00:08.633

我不知道这是一件很常见的事情，但下面是有效的代码（主要来自 Dan 和 Guillaume 的代码）

```
 //show stuff
    setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    //show label
    c.fill = GridBagConstraints.BOTH;           // Fill the "cell" in both direction
    c.weightx = 1.0;                            // Allocate extra-width to the label
    c.weighty = 1.0;                            // Allocate extra-height to the label
    c.gridwidth = GridBagConstraints.REMAINDER; // The label takes all the available width of the "row"
    add(mlblShow,c);
    //show cmd txt
    c.weighty = 0;                              // Don't stretch TF vertically
c.fill = GridBagConstraints.BOTH;           // Fill horizontally and vertically
c.gridwidth = GridBagConstraints.RELATIVE;
    add(mtxtCmd,c);
    //show send button
     c.weightx = 0;                             // No extra horizontal space is given to the button
 c.fill = GridBagConstraints.NONE;          // No fill for the button
    add(cmdSend,c); 
```

# java - 从服务器获得 505 响应

> ID：13252814
> 
> 赞同：3
> 
> 时间：2012-11-06T14:12:35.790
> 
> 标签：java, android, apache, http-status-code-505

嗨，在我的 android 项目中，我正在调用 web 服务并通过查询字符串参数发送 get 参数，现在的问题是，如果查询字符串参数值包含任何空格，那么我会收到 505 错误

```
 URL url = new URL(urlstring.trim());                        
                    urlConnection = (HttpURLConnection) url.openConnection();
                    int response = urlConnection.getResponseCode(); 
```

我有一个疑问，如果我使用`URLEncode(urlstring.trim(),"UTF-8")`我是否还需要更改我的网络服务代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T14:23:57.133

您应该只对参数的值进行编码：

```
 String urlString = "http://test.com?param1=" + URLEncoder.encode(value1, "UTF-8") + "&param2=" + URLEncoder.encode(value2, "UTF-8") ;

    URL url = new URL(urlstring.trim());                        
    urlConnection = (HttpURLConnection) url.openConnection();
    int response = urlConnection.getResponseCode(); 
```

# css - 浮动的 div 仍然在垂直线上，而不是应该是水平的

> ID：13252815
> 
> 赞同：0
> 
> 时间：2012-11-06T14:12:36.650
> 
> 标签：css, html, css-float, alignment

在[我的网站上](http://frshstudio.com/about/)，靠近底部有一个“免费访问”部分。理想情况下，我希望左边是自由图像，中间是注册表单，右边是成功图像。3 个元素的宽度在 960 像素的容器中总共为 840 像素，所以我认为这不是问题。为此，我正在使用：

```
 .signup {
    border-top: 1px solid #333333;
    float:left;
    padding-bottom: 40px;
    padding-top: 40px;
    overflow: auto;
    width: 280px;
}

.signup p {
    padding-bottom: 20px;
}

.signup p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
}

.signup #mc-embedded-subscribe {
    background: #0fddaf;
}

.signup .freedom {
    float: left;
    width: 280px;
}

.signup .success {
    float: right;
    width: 280px;
}

.clear {
    clear:both;
} 
```

[和 HTML。](http://pastebin.com/Y1H8XBkk)

正如你所看到的，有些事情不太正常，我一直在看这个很长时间，我担心我错过了一些简单的东西。关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:44:26.907

又快又脏：

从 中取宽度`.signup`，向左浮动`.form`，并给它 280px 宽度；
或从 中获取宽度`.signup`，并提供`.form`额外的类`.freedom`。（`<div class=' freedom form'>`- 相当叛逆，嗯？）

*达达！！*

# 建议

1.  在使用 CSS 之前学习它，它将为您节省时间和将来的麻烦；
2.  ？？？
3.  利润。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:18:50.797

为您浮动的元素指定宽度，然后它的行为应该可以预测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:35:33.933

浮动 .freedom、.form 和 .success 全部保留。然后，从 .signup 中删除宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:39:31.387

看到每个分区都有一个绝对大小，您应该能够通过将它们全部浮动到左侧并为它们提供您想要的大小来获得您想要的东西。

您还需要添加`overflow:auto`到`.signup`容器 div 中，以便您的浮动内容保留在其中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T15:32:56.697

您想要左侧的自由图像，中间的注册和右侧的成功图像。吗？？？为了得到这个，首先浮动自由图像并通过明显的宽度在左侧唱歌。然后将成功图像浮动在右侧。

在上面的 css 中，请删除 clear: both; 并通过使用像 div.clear{clear:both} 这样的另一个 div 清除所有浮点数末尾的所有浮点数

# ruby - 将空格打印并显示为字符

> ID：13252823
> 
> 赞同：2
> 
> 时间：2012-11-06T14:12:53.903
> 
> 标签：ruby

我没有弄清楚如何打印和显示空白字符作为我实际上可以“看到”的东西。例如，

```
x = "123\n"
print x 
```

我希望输出是

```
123\n 
```

而不是

```
123
. 
```

以上 '。' 表示由 '\n' 创建的新行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:18:21.563

你可以做：

```
x = "123\n"
p x
#=> "123\n" 
```

此方法记录在[内核模块](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-p)中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T14:21:30.620

```
s = "abc\ndef"

p s
# >> "abc\ndef"

# it's equivalent to
puts s.inspect 
# >> "abc\ndef" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-06T14:25:48.583

```
irb(main):003:0> x='123\n'
=> "123\\n"
irb(main):004:0> puts x
123\n 
```

为我工作。单引号字符串是未转义的，而双引号字符串是。为了说明差异，我也在下面放了双引号版本：

```
irb(main):001:0> x="123\n"
=> "123\n"
irb(main):002:0> puts x
123
=> nil 
```

# html - HTML 中的上标文本

> ID：13252826
> 
> 赞同：4
> 
> 时间：2012-11-06T14:13:02.450
> 
> 标签：html, css

是否可以在标签的值字段中使用上标文本`<input>`（例如与注册标记一起使用）？

```
<input type="submit" name="submit" value="Sometext&reg;"/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T14:16:57.890

您可以使用[`<button type="submit">`](https://developer.mozilla.org/en-US/docs/HTML/Element/button)元素而不是`<input type="submit">`Then 您可以在描述中包含您想要的任何标记，例如，[`<sup>`](https://developer.mozilla.org/en-US/docs/HTML/Element/sup)对于上标文本：

```
<button type="submit">someText with <sup>superscripted parts</sup> </button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:27:09.683

或者使用 CSS：

[http://jsfiddle.net/jxmaA/](http://jsfiddle.net/jxmaA/)

HTML

```
<button class="tradeMark" type="submit">someText with</button> 
```

CSS

```
.tradeMark:after{
  content: ' ©';
  font-size:xx-small;
  vertical-align:top;
} 
```

编辑：此解决方案也不适用于`<input type="submit"/>`:after 和 :before 未应用...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:37:33.957

如果你必须使用`<input type=submit>`而不是`<button type=submit>`，那么你就不走运了。文本必须在`value`属性中指定，它被视为纯文本。你可以在那里使用像“²”这样的上标*字符*，但是有更多的“®”作为字符的上标版本——但是它的外观在不同字体中差别很大，在某些字体中上标比在 Arial 中要多得多。

因此，实际的举措可能是为按钮指定不同的字体。为了保持一致性，您可能希望对所有提交按钮文本使用相同的字体，例如

```
input[type=submit] { font-family: Calibri; } 
```

通常的 CSS 警告适用。特别是，在这种情况下很难指定一个好的字体系列列表。（Calibri 很棒，但它的可用性远非普遍。）

# c# - 在 windows phone 中选择网格行时更改背景颜色

> ID：13252829
> 
> 赞同：0
> 
> 时间：2012-11-06T14:13:09.267
> 
> 标签：c#, windows-phone-7

我正在 Windows Phone 中创建自定义网格。我已经完成了所有操作，但是我没有成功更改网格选择的行背景颜色。我尝试了**rowbackground 属性**，并**在 grid selection_changed 事件中更改了 rowbackground 颜色**。但没有任何帮助。选择行时，网格会显示一些默认颜色。我搜索了一些论坛并找到了 xaml 代码但没有用。有人以编程方式帮助我处理 xaml 代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:21:52.650

使用混合创建一个新的样式/模板，它为选定的视觉状态指定所需的颜色。为此，您最好使用 Expression Blend。您应该已经安装了它，因为它是 wp7 sdk 或工具包的一部分。

在对象和时间线中选择您的网格。如果您看不到它，请在某处添加一个临时的并使用它并在最后将其删除。

选择网格后，右键单击它并选择编辑模板\编辑副本

决定您希望它是本地的还是重复使用的，并适当地选择。

然后，这将为您提供用于此控件的样式的副本。找到 VisualStateGroup 部分 - 在那里的某个地方你应该找到 Selected 视觉状态。根据您所追求的样式设置此样式。

确保你给这个样式/模板一个合适的名字，并确保你的原始网格指向这个样式，然后它应该选择新的选定行颜色。

# android - 在视图之间传递 MotionEvent

> ID：13252834
> 
> 赞同：1
> 
> 时间：2012-11-06T14:13:30.730
> 
> 标签：android

我有一个带有`ImageView`. 当我触摸图像时，图像`Dialog`被关闭，但用户仍在按下屏幕。问题是这个触摸事件没有传递到我下面的窗口`Dialog`（例如一个`Activity`）。

我可以以某种方式将它`MotionEvent`（使用`ACTION_DOWN`）传递给它，`Activity`以便它仍然能够生成新的运动事件（使用`ACTION_MOVE`并`ACTION_UP`相应地）吗？

**编辑**

我正在尝试做的事情是`Activity`：

```
//Sending touch event
MotionEvent ev = MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis()+100, MotionEvent.ACTION_DOWN, 50, 50, 0);
getWindow().getDecorView().dispatchTouchEvent(ev); 
```

这是我的`dispatchTouchEvent`和`onTouchEvent`：

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    if(mDragging) {
        mMainFrame.onTouchEvent(ev); //I'm passing event to some view
        onTouchEvent(ev); //and then to my Activity
        return true;
    }

    return super.dispatchTouchEvent(ev);
}

public boolean onTouchEvent(MotionEvent ev) {
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:27:42.680

该方法`onTouchEvent`需要返回一个布尔值。

从文档

如果事件被处理则为真，否则为假。

如果你有一个底层，你可能不得不调用 super(boolean)

# css - Safari 更改选择高度

> ID：13252835
> 
> 赞同：33
> 
> 时间：2012-11-06T14:13:30.903
> 
> 标签：css, safari

我无法更改`select` `height`，所有浏览器都可以正常工作，但 Safari 不行，哪里有问题？我也尝试 make class `.style select`，但不工作。

```
select {
width: 170px; 
height: 25px;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-24T20:08:36.463

尝试添加这个：

```
-webkit-appearance: menulist-button; 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-07-04T11:30:03.300

要在 Safari 中为选择设置样式，您首先必须关闭 os 样式：

```
-webkit-appearance: none; 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-07-04T14:43:31.923

你也可以使用

```
line-height: 25px 
```

这不会影响其他浏览器，但修复了 Safari 中的这个错误

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-24T05:31:20.527

最好的方法是使用现代化探测器并为 safari 类选择菜单提供一个

```
line-height: 20px; 
```

或者您可以使用 jquery UI 选择菜单通过另一个跨浏览器 wy 来解决这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-10T06:53:16.737

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    select {
        -webkit-appearance: menulist-button !important;
        line-height:24px !important;
    }
} 
```

此代码确保跨浏览器的高度相同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-26T14:10:43.353

至少在 iPad 上，选择不会为填充或行高呈现，而是会呈现给定的高度并垂直居中值

```
select {
   -webkit-appearance:menu-item; // or menulist-button
   -moz-appearance:menu-item;
   height:2.4em;   // this must be calculated to match other input types     
}

input[type="text"], select {
    min-width:12em;  
    border-radius:5px;
} 
```

现在唯一未解决的是预定义且不可变的背景

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-20T01:17:04.913

在我使用内联样式之前，没有什么对我有用：

```
<select name="pickupsel" id="pickups" style="line-height:33px"> 
```

不知何故，Safari（最新的 Windows 版本，5.1.7）不会从 CSS 文件中读取此样式属性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-08T08:35:50.050

```
@media screen and (-webkit-min-device-pixel-ratio:0) { select { -webkit-appearance: menulist-button !important; line-height:24px !important; } } 
```

`line-height`根据你的要求给。

# ruby-on-rails - 使用windwos 7（无rvm）在任何源（Bundler::GemNotFound）中找不到rake-0.9.2.2

> ID：13252836
> 
> 赞同：2
> 
> 时间：2012-11-06T14:13:33.443
> 
> 标签：ruby-on-rails, ruby, gem, rake, production

人们，

我是 ROR 的新手，不是全新的（不再），但对将应用程序转移到生产环境没有经验。为了了解迁移到生产流程的工作原理，我创建了一个非常简单的 rails 项目。以下是关于我的系统的一些基本信息（在 Windows 7 上运行）：

```
Ruby version                1.9.3 (i386-mingw32)
RubyGems version            1.8.24
Rack version                1.4
Rails version               3.2.8
JavaScript Runtime          JScript
Active Record version       3.2.8
Action Pack version         3.2.8
Active Resource version     3.2.8
Action Mailer version       3.2.8
Active Support version      3.2.8
Application root            C:/Sites/railstest
Environment                 development
Database adapter            sqlite3
Database schema version     0 
```

中间件：

```
ActionDispatch::Static
Rack::Lock
#<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x2a70f20>
Rack::Runtime
Rack::MethodOverride
ActionDispatch::RequestId
Rails::Rack::Logger
ActionDispatch::ShowExceptions
ActionDispatch::DebugExceptions
ActionDispatch::RemoteIp
ActionDispatch::Reloader
ActionDispatch::Callbacks
ActiveRecord::ConnectionAdapters::ConnectionManagement
ActiveRecord::QueryCache
ActionDispatch::Cookies
ActionDispatch::Session::CookieStore
ActionDispatch::Flash
ActionDispatch::ParamsParser
ActionDispatch::Head
Rack::ConditionalGet
Rack::ETag
ActionDispatch::BestStandardsSupport 
```

我的虚拟主机是网络主机。

**这就是我所做的：**

1.  使用以下命令生成一个名为 railstest 的新 Rails 应用程序： rails new railstest
2.  用我的虚拟主机上使用的版本更新了 gemfile
3.  运行“bundle install --deployment”以在供应商目录中拥有所有 gem。
4.  将所有内容通过 FTP 传输到虚拟主机
5.  通过 PuTTY 成功运行捆绑安装

但是当我打电话给该网站时，我总是会得到这样的信息：http: [//www.kernification.de/rails/info/properties](http://www.kernification.de/rails/info/properties) （我没有足够的声誉在这里发布图片......）

我已经尝试了更多（我现在正在为这个问题争取大约 1.5 周），但它似乎一直都是同一个问题。网络主机支持告诉我 gem 位于 1.9.1，而不是 1.8，我对此有一些疑问：

1.  1.9.1（或1.8）的版本是什么？红宝石？宝石？
2.  我如何强制在 1.9.1 而不是 1.8 中寻找宝石？

我也尝试使用 pik 作为版本管理器，但到目前为止我只会使用 webhostone，所以如果我安装了一个可以工作的 ruby​​ 版本，我会很高兴。到目前为止，我不需要在任何版本之间切换。我也搬到了 xubuntu，在那里创建了同样简单的应用程序，同样的结果。

如果能分享一下经验就更好了，万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:23:12.190

您列出的版本号与 Ruby 版本匹配。可以通过设置 GEM_HOME 环境变量告诉 Rubygems 在哪里寻找本地 gem 存储库。但这可能不是您想要做的，因为 Bundler 应该提供所有的宝石。

通过调用`bundle install --deployment`您的应用程序需要的所有 gem，应该将其捆绑在`vendor/bundle`目录中。因此，我不明白您为什么`bundle install`在部署站点上再次调用。

您可以检查部署服务器上的应用程序文件夹是否包含`rake`捆绑到`vendor/deploy`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:02:21.260

I had a call with my webhost support and it looks like the issue was related to the apache configuration. It is still not fixed but the issue described above is gone. Now there is a new issue but this is a different story and I will search in this really great forum first. Thanks a lot for your help.

# c# - 获取两种颜色 HEX refs 或 RGB 之间的颜色

> ID：13252838
> 
> 赞同：5
> 
> 时间：2012-11-06T14:13:37.703
> 
> 标签：c#, .net, colors

> **可能重复：**
> [.NET 中 3 种颜色之间的颜色插值](https://stackoverflow.com/questions/1236683/color-interpolation-between-3-colors-in-net)

我一直在尝试使用 C# 获取颜色类别列表：

```
Red:
255, 69, 0
255, 99, 71
etc.. 

Green:
0, 250, 154
143, 188, 139
etc... 
```

到目前为止，我一直很不成功。理想情况下，我想要的是一种提供两个 HEX 参考或 RGB 参考的方法，并在这两个参考之间获得一个包含 10 种颜色的列表。这在 C# 中可能吗？

**编辑**

找到这个... [http://meyerweb.com/eric/tools/color-blend/](http://meyerweb.com/eric/tools/color-blend/)现在只是将 js 转换为 c#。完成后会发布。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:25:14.557

我不知道可以帮助你的内置函数，但你可以自己做。

只要可以使用 3 个数字（R、G、B）定义颜色，就可以取两种颜色：

```
(R1,G1,B1)
(R2,G2,B2) 
```

然后在对之间划分差异并按间隔产生数字。

```
int numberOfIntervals = 10; //or change to whatever you want.
var interval_R = (R2 - R1) / numberOfIntervals;
var interval_G = (G2 - G1) / numberOfIntervals;
var interval_B = (B2 - B1) / numberOfIntervals;

var current_R = R1;
var current_G = G1;
var current_B = B1;

for (var i = 0; i <= numberOfIntervals; i++)
{
    var color = Color.FromRGB(current_R, current_G, current_B);
    //do something with color.

    //increment.
    current_R += interval_R;
    current_G += interval_G;
    current_B += interval_B;
} 
```

我还没有编译代码，但你明白了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T14:38:48.063

您正在寻找的是所谓的[*插值*](http://en.wikipedia.org/wiki/Interpolation)。在这种特殊情况下，您需要在两个*关键点*之间插入数据。

由于插值是编程时非常常见的场景，因此我[为它编写了一个通用解决方案](http://whathecode.wordpress.com/2011/01/24/interpolation-no-more/)，轻松地允许您使用线性甚至[基数样条插值在两个或多个关键点之间进行插值](http://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline)。

使用我的库，您可以按如下方式计算中间颜色：

```
var keyPoints = new CumulativeKeyPointCollection<Color, double>(
    new ColorInterpolationProvider() );

keyPoints.Add( Color.FromArgb(0, 250, 154) );
keyPoints.Add( Color.FromArgb(143, 188, 139) );

var linear = new LinearInterpolation<Color, double>( keyPoints ); 

// E.g. to get a color halfway the two other colors.
Color colorHalfway = linear.Interpolate( 0.5 ); 
```

您必须`ColorInterpolationProvider`通过扩展 from来实现`AbstractInterpolationProvider<Color, double>`，但这很简单，更多信息可以[在我的博客文章](http://whathecode.wordpress.com/2011/01/24/interpolation-no-more/)中找到。

此示例使用[`Media.Color`](http://msdn.microsoft.com/en-us/library/system.windows.media.colors.aspx)该类，但您也可以`Color`通过传递不同的插值提供程序来支持任何其他类。

# sql - 选择没有指定字段的行

> ID：13252840
> 
> 赞同：0
> 
> 时间：2012-11-06T14:13:38.610
> 
> 标签：sql

我有一个包含以下字段的表：

```
object_id
attr_id
string_value 
```

object_id 引用另一个表中的对象，属性 id 也是如此（它们都是外键）。

例如，我有这样的行：

```
22, 14, blah
22, 30, argh
22, 31, moo
44, 30, argh
44, 31, kaw 
```

如您所见，对象 44 没有为属性 14 设置值。

我想要做的是选择所有没有定义属性 14 的对象。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:23:58.790

You can use `NOT IN` in a `WHERE` clause:

```
select *
from yourtable t1
where object_id not in (select object_id
                        from yourtable t2
                        where attr_id in (14)) 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/44ec5/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:19:26.553

假设您有 3 张桌子，并且**您不知道`attr_id`缺少**什么，

```
SELECT c.object_id
FROM 
    (
        SELECT  a.object_id, b.attr_id
        FROM    Table1 a CROSS JOIN Table2 b
    ) c LEFT JOIN tableName d
          ON c.object_id = d.object_id AND
              c.attr_id = d.attr_id
WHERE d.string_value IS NULL 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/0ab57/9)

但如果你想返回所有列，

```
SELECT e.*
FROM TableName e
      INNER JOIN
(
  SELECT c.object_id
  FROM 
      (
          SELECT  a.object_id, b.attr_id
          FROM    Table1 a CROSS JOIN Table2 b
      ) c LEFT JOIN tableName d
            ON c.object_id = d.object_id AND
                c.attr_id = d.attr_id
  WHERE d.string_value IS NULL
) f ON e.object_id = f.object_id 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/0ab57/10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:19:08.767

```
select m.*
from MyTable m
where not exists (select 1 from MyTable m2 where m2.object_id = m.object_id and m2.attr_id = 14) 
```

您也可以使用自联接来完成，例如：

```
select m1.*
from MyTable m1
inner join MyTable m2 on m1.object_id = m2.object_id and m2.attr_id = 14
where m2.object_id is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:21:49.947

我不太明白你的意思，但是对于 SQL 中的布尔值：

```
SELECT * FROM table WHERE attr_id <> '14' 
```

而不是`=`你使用的“相等”的意思，`<>`或者`!=`两者都表示“不同”的意思（第一个得到更好的支持，但几乎无关紧要）；

# java - Java Android：在 UI 显示之前对其进行预处理

> ID：13252841
> 
> 赞同：3
> 
> 时间：2012-11-06T14:13:39.183
> 
> 标签：java, android

首先，我多年来一直在阅读这个网站，它多次帮助我摆脱困境，所以感谢这里贡献的社区，希望你能帮助我解决我自己的问题。

我刚开始在我的公司进行 Android 开发，我正在尝试将现有应用程序从 Windows Mobile C# 移植到 Android Java。其中大部分进展顺利，但我遇到一些困难的一个领域是用户界面。

Windows Mobile 应用程序在创建 WinForm 时从文件中读取调查规范。在封闭式问题（例如多项选择）的情况下，我需要使用 CheckBox 或 RadioButton 控件为规范中的每个适用答案填充屏幕。创建所需的布局和控件是没有问题的，但我们还有一个要求是屏幕不滚动。因此，我们的软件需要能够在显示之前计算可用屏幕空间内的最佳拟合而不会溢出（即用于显示的 1-4 列）

我已经将我的 UI（至少是布局）编写为 XML 资源或 Java 代码，但是因为像 GetWidth() 和 GetHeight() 这样的方法在 onCreate() 中返回 0，所以我还不能添加这个必需的 pre -加工。

所有这些都需要在屏幕显示之前发生。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:33:50.500

当 Android 从布局构建 UI 时，布局的根会通过调用 onMeasure() 请求其所有子级报告所需的大小。它这样做是一种自下而上的递归方式。如有必要，父视图将设置子视图的大小以使其适合。正如您所发现的，此测量过程在 onCreate() 期间并未完成。

尝试一个全局布局监听器。

```
public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);

     // inflate your main layout here (use RelativeLayout or whatever your root ViewGroup type is
     LinearLayout mainLayout = (LinearLayout ) this.getLayoutInflater().inflate(R.layout.main, null); 

     // set a global layout listener which will be called when the layout pass is completed and the view is drawn
     mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(
     new ViewTreeObserver.OnGlobalLayoutListener() {
          public void onGlobalLayout() {
               // measure your views here
          }
     }
 );

 setContentView(mainLayout); 
```

# image - getImageUrl() 什么也没显示？

> ID：13252842
> 
> 赞同：0
> 
> 时间：2012-11-06T14:13:47.950
> 
> 标签：image, magento, product

```
$session= Mage::getSingleton('checkout/session');
foreach($session->getQuote()->getAllItems() as $item)
{
echo $item->getImageUrl();
} 
```

另外`getImageUrl()`, `getSmallImageUrl`,`getThumbnailUrl`他们都没有工作

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:34:35.620

你好你可以试试这个

**$item->getMediaConfig()->getMediaUrl($item->getData('image'))**

# sql - 了解 ActiveRecord 触发的 sql 查询

> ID：13252846
> 
> 赞同：0
> 
> 时间：2012-11-06T14:14:12.700
> 
> 标签：sql, ruby-on-rails, activerecord

我有两张表，一次旅行，一张 txns，在 oracle db 中有一对多的关系。当我触发以下查询时

```
Trip.where("upper(trips.domain) = 'FOOBAR.COM'  and txns.user_id = 50001 and txns.txn_type = '1'").includes([:txns]).order('trips.created_at desc').limit(10).offset(0) 
```

为此，sql 日志中有两个查询。

```
 Trip Load (4920.4ms)   SELECT * FROM (
    SELECT raw_sql_.*, rownum raw_rnum_
    FROM (SELECT DISTINCT "TM"."TRIPS".id, FIRST_VALUE(trips.created_at)
 OVER (PARTITION BY "TM"."TRIPS".id ORDER BY trips.created_at desc) AS alias_0__ FROM "TM"."TRIPS" LEFT OUTER JOIN "TXNS" ON "TXNS"."TRIP_ID" = "TM"."TRIPS"."ID"
 WHERE (upper(trips.domain) = 'FOOBAR.COM' and txns.txn_type = '1') 
ORDER BY alias_0__ DESC) raw_sql_
    )
    WHERE raw_rnum_ between 1 and 10

    SQL (186.2ms)  SELECT "TM"."TRIPS"."ID" AS t0_r0, "TM"."TRIPS"."TRIP_REF" AS t0_r1, "TM"."TRIPS"."TRIP_NAME" AS t0_r2, 
"TM"."TRIPS"."START_DATE_TIME" AS t0_r3, "TM"."TRIPS"."END_DATE_TIME" AS t0_r4, "TM"."TRIPS"."AMOUNT" AS t0_r5, "TM"."TRIPS"."CREATED_AT" AS t0_r6,
 "TM"."TRIPS"."UPDATED_AT" AS t0_r7, "TM"."TRIPS"."USER_ID" AS t0_r8, 
"TM"."TRIPS"."BOOKING_STATUS" AS t0_r9, "TM"."TRIPS"."TRAVELLERS" AS t0_r10, 
"TM"."TRIPS"."USER_TRIP_NAME" AS t0_r11, "TM"."TRIPS"."CONTACT_DETAIL_ID" AS t0_r12, 
"TM"."TRIPS"."AIR" AS t0_r13, "TM"."TRIPS"."HOTEL" AS t0_r14, "TM"."TRIPS"."DOMAIN" AS t0_r15, "TM"."TRIPS"."TRAIN" AS t0_r16, "TM"."TRIPS"."TAGS" AS t0_r17, "TM"."TRIPS"."CURRENCY" AS t0_r18, "TM"."TRIPS"."CUR_INR_VALUE" AS t0_r19, 
"TM"."TRIPS"."COMPANY_ID" AS t0_r20, "TXNS"."ID" AS t1_r0, "TXNS"."TRIP_ID" AS t1_r1,
 "TXNS"."USER_ID" AS t1_r2, "TXNS"."TXN_TYPE" AS t1_r3, "TXNS"."STATUS" AS t1_r4, "TXNS"."SOURCE_TYPE" AS t1_r5, "TXNS"."SOURCE_ID" AS t1_r6, "TXNS"."EXTERNAL_REFS" AS t1_r7, "TXNS"."CREATED_AT" AS t1_r8, "TXNS"."IP_NUMBER" AS t1_r9, "TXNS"."MISC" AS t1_r10 FROM "TM"."TRIPS" LEFT OUTER JOIN "TXNS" ON "TXNS"."TRIP_ID" = "TM"."TRIPS"."ID" WHERE "TM"."TRIPS"."ID" IN (11620660, 11620651, 11620649, 11620647, 11620646, 11620645, 11620644, 11620642, 11620641, 11620636) AND (upper(trips.domain) = 'FOOBAR.COM' and txns.txn_type = '1') ORDER BY trips.created_at desc 
```

我想知道为什么活动记录会触发两个查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:28:37.593

您有两个查询的原因是您正在使用基于连接的包含（因为您的 where 子句引用了`txns`关联中的列）并且因为您有一个限制。

因为您要加入一个有很多导轨，所以不能只在您的查询上加上限制 10 - 举一个极端的例子，如果您有 1 次行程和 10 个关联的 txns，那么将限制 10 添加到查询导轨通常会运行可能只会返回那个1 个行程（与 10 个匹配的 txns 中的每一个连接）而不是 10 个不同的行程

为了解决这个问题，rails 首先查找与您的条件匹配的前 10 个 Trip 行，然后触发第二个查询以加载那些包含您想要包含的关联的 trip 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:18:07.493

答案可以在[这个 SO question and answer](https://stackoverflow.com/questions/1208636/rails-include-vs-joins)`include`中看到 Rails与 Rails之间的区别`joins`。

# asp.net-mvc-3 - 对 MVC3 代码优先/存储库的困惑

> ID：13252851
> 
> 赞同：2
> 
> 时间：2012-11-06T14:14:31.403
> 
> 标签：asp.net-mvc-3, dependency-injection, ninject

请有人可以帮助我，因为我很困惑。

我有一个这样的实体：

```
public class Code
{
    public int ID { get; set; }
    public int UserID { get; set; }
    public string CodeText { get; set; }
} 
```

和这样的接口：

```
public interface ICodeRepository
{
    IQueryable<Code> Codes { get; }
    void AddCode(Code code);
    void RemoveCode(Code code);
    Code GetCodeById(int id);
} 
```

和这样的存储库：

```
public class SQLCodeRepository : ICodeRepository
{
    private EFSQLContext context;

    public SQLCodeRepository()
    {
        context = new EFSQLContext();
    }

    public IQueryable<Code> Codes
    {
        get { return context.Codes; }
    }

    public void AddCode(Code code)
    {
        context.Codes.Add(code);
        context.SaveChanges();
    }

    public void RemoveCode(Code code)
    {
        context.Codes.Remove(code);
        context.SaveChanges();
    }

    public Code GetCodeById(int id)
    {
        return context.Codes.Where(x => x.ID == id).FirstOrDefault();
    }
} 
```

和这样的上下文：

```
public class EFSQLContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Code> Codes { get; set; }
    public DbSet<PortfolioUser> PortfolioUsers { get; set; }
} 
```

如果我这样声明我的控制器：

```
public class SearchController : Controller
{
    private ICodeRepository cRepo;

    public SearchController(ICodeRepository codeRepository)
    {
        cRepo = codeRepository;
    }
} 
```

然后尝试什么都不做`cRepo.GetCodeById(1)`。但是如果我声明私有`ICodeRepository rep = new SQLCodeRepository`然后调用`rep.GetCodeById(1)`，我可以看到存储库中的方法被调用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:19:57.533

从构造函数签名看来，您将进行一些依赖注入。您缺少的步骤是使用 Castle Windsor 之类的工具设置 DI 容器。然后配置 MVC 解析器以使用 DI 容器为您提供正确的`ICodeRepository`.

看到[这个](http://docs.castleproject.org/Default.aspx?Page=Windsor-tutorial-ASP-NET-MVC-3-application-To-be-Seen&NS=Windsor&AspxAutoDetectCookieSupport=1 "这个")

您需要创建一个实现的解析器`IDependencyResolver`和`IDependencyScope`一个继承的控制器工厂`DefaultControllerFactory`

拥有这些后，您可以执行以下操作：

```
MyContainer container; // this needs to be a class level member of the asax
var configuration = GlobalConfiguration.Configuration;

container = new MyContainer() // may need additional stuff here depending on DI tool used

configuration.DependencyResolver = new MyDependancyResolver(container);
var mvcControllerFactory = new MyFactory(container.Kernel);
ControllerBuilder.Current.SetControllerFactory(mvcControllerFactory); 
```

你会从 asax 调用上面的代码`Application_Start()`

有关使用 Ninject 和 MVC3 的更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/4358395/mvc3-ninject-how-to)

# macos - dyld：找不到符号：_jpeg_resync_to_restart

> ID：13252852
> 
> 赞同：2
> 
> 时间：2012-11-06T14:14:32.397
> 
> 标签：macos, opengl, osx-mountain-lion, scons

我正在尝试为我的班级运行一个简单的 OpenGL 教程，但 C++ 代码是为 Windows 和 Linux 运行的。我试图让它在 Mac OS X Mountain Lion 下运行。我找到了正确的库头文件，它现在可以编译（使用 scons），但是构建在运行时会出现此错误：

```
dyld: Symbol not found: _jpeg_resync_to_restart
  Referenced from: /usr/local/lib/libIL.1.dylib
  Expected in: flat namespace
in /usr/local/lib/libIL.1.dylib
Trace/BPT trap: 5 
```

在线搜索只给了我python成像库问题。我通过自制软件安装了 libjpeg 和 DevIL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T22:03:44.457

从 Google 搜索来看，Mac OS X 中的内置 libjpeg 库具有 __cg_jpeg_resync_to_restart，而如果您使用 MacPorts、Fink 或者自己编译它，您会得到 - _jpeg_resync_to_restart。在这种情况下，通过 Homebrew 获得的 DevIL 库正在搜索不是来自 Mac OS X 库的符号，所以我假设我应该通过 homebrew 安装 libjpeg。然而事实证明，libjpeg 已经通过自制软件安装了。所以我猜测可能是libjpeg的链接有问题，我取消链接并再次链接，是的，库的初始链接有问题。然而，这并没有解决问题。我再次假设现在 libjpeg 在正确的位置具有符号链接，如果我再次构建 DevIL 库，它将在正确的位置链接到正确的库。所以我做了一个`brew uninstall devil`然后`brew install devil`再次从源代码编译。啊，瞧 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T15:16:09.983

它对我有用，只需将 DYLD_LIBRARY_PATH 更改为正确的路径。

# haskell - 将 Hamlet 的 $case 与记录和 ADT 一起使用

> ID：13252854
> 
> 赞同：2
> 
> 时间：2012-11-06T14:14:36.427
> 
> 标签：haskell, yesod, hamlet

看起来哈姆雷特的`$case`表达式应该非常有用，但我不知道如何匹配具有多个构造函数的记录类型，而不是每个字段的模式匹配（具有唯一名称）。假设我有一个数据类型，

```
 data A = A1 { v1,v2,v3 :: Int }
        | A2 { g :: Double} 
```

在我的模板中，我希望以`A1`不同于值的方式呈现`A2`值。有人会认为我可以简单地做，

```
 $case myA
    $of a@(A1 {})
      <p>This is an A1: #{show $ v1 a}
    $of a@(A2 {})
      <p>This is an A2: #{show $ g a} 
```

不幸的是，此代码段无法编译并出现语法错误，表明该`@`语法不受支持。如果我删除`a@`，我会得到另一个语法错误，这一次表明记录大括号表示法也不支持。

最后，无奈之下，曾经可以尝试，

```
 $case myA
    $of A1 _ _ _
      ... 
```

但是，唉，即使这样也不能编译（_的定义冲突）。因此，似乎唯一的选择是，

```
 $case myA
    $of A1 v1 v2 v3
      ... 
```

这种基于顺序的模式匹配对于大型数据类型来说非常令人厌烦，尤其是当被迫命名每个字段时。

那么，我在这里缺少什么？《哈姆雷特》中的案例分析真的像看起来那样有限吗？与 ADT 的构造函数匹配的推荐方法是什么（稍后参考字段）？我什至想做这种匹配的事实是否表明我做错了（TM）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:11:06.597

您可以跟踪小村庄的处理过程。

答案在非公开模块 Text.Hamlet.Parse 中

```
controlOf = do
    _   <- try $ string "$of"
    pat <- many1 $ try $ spaces >> ident
    _   <- spaceTabs
    eol
    return $ LineOf pat

where
  ident = Ident <$> many1 (alphaNum <|> char '_' <|> char '\'') 
```

所以只接受一个或多个的序列（空格后跟（标识符或通配符））。

你可以从这里扩展它。

干杯!

# vb.net - 如何搜索和替换文本文件中的整行？

> ID：13252860
> 
> 赞同：0
> 
> 时间：2012-11-06T14:14:57.667
> 
> 标签：vb.net, ssis

作为我目前正在处理的 SSIS 包的一部分，我需要替换文本文件行中的 where 子句。

我在想我会使用带有脚本的脚本任务`VB 2010`来完成此任务，我一直在搜索并成功找到了很多搜索和替换字符串的方法，但我需要搜索一个字符串然后替换整行包含它。

例如，文本文件可能包含：

```
Select= *

where= SDUPMJ>112310 
```

我想只搜索 ' `where=`' （因为实际的子句每次都会不同），并将整行替换为 ' `where= SDUPMJ>112350`'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:43:32.417

如果它本身存在于一行中，请使用流式阅读器。

这是我如何做到的示例：

```
Imports System.IO
Imports System.Text

Public Class Form1

Dim MyPath As String = "Path To Your Text File"

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim Rdr As New StreamReader(MyPath)
    Dim ln As String
    Dim NewFile As New StringBuilder

    ln = Rdr.ReadLine

    Do Until ln Is Nothing

        If ln.StartsWith("where=") Then ln = "New Where Clause"
        NewFile.AppendLine(ln)
        ln = Rdr.ReadLine
    Loop

    Rdr.Close()

    File.WriteAllText(MyPath, NewFile.ToString)

End Sub
End Class 
```

希望这可以帮助

# java - 如何模拟Android GC杀死应用程序

> ID：13252862
> 
> 赞同：11
> 
> 时间：2012-11-06T14:14:58.617
> 
> 标签：java, android, garbage-collection

在接下来的情况下，我需要测试应用程序的序列化\反序列化：

*   应用程序长时间处于后台（空闲模式）并被 GC 杀死；
*   应用程序在后台，由于资源（内存\cp）不足而被 GC 杀死；

在某些设备上，它可以通过启动 1-2 个游戏来模拟。但是在具有 1gb 内存的四核设备上，处理 4-10 个重度游戏非常非常困难，并且需要很多时间。

我尝试实现一些模拟资源加载的演示：

*   创建位图数组
*   创建对象数组
*   推出很多服务
*   开展很多活动

但没有结果，应用程序仍然有效（即使在旧设备上），我的演示因 OutOfMemoryException 而崩溃。

如何在演示应用程序中模拟高负载？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:44:59.730

好吧，“GC”实际上被滥用了“Out Of Memory Killer”，它就像通过信号 9 一样杀死应用程序。在 root 设备中，您应该能够从 shell调用[kill(1)命令或从本机调用 kill](http://linux.die.net/man/1/kill) [(2)](http://linux.die.net/man/2/kill)函数库（我不确定它是否绑定到 Java）并随时终止您的应用程序。

系统通常会在它进入后台时调用`onStop`，然后`Activity`在没有进一步警告且没有机会做出反应的情况下终止应用程序。因此，如果您离开应用程序并杀死它，则适当模拟它被 OOM 杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T06:29:52.883

在 Play 商店中安装任何内存清洁器。我安装了这个：[easymemorycleaner](https://play.google.com/store/apps/details?id=com.kosajun.easymemorycleaner)

一旦你清理了你的记忆。您在内存中存储的变量将消失。除非您将数据存储在 Parcelable 中。这将是持久的。

# powershell - 从列表中生成打印机快捷方式

> ID：13252863
> 
> 赞同：4
> 
> 时间：2012-11-06T14:15:04.813
> 
> 标签：powershell, printers

我正在尝试为打印服务器上的每台打印机生成一个快捷方式。这个想法是能够通过电子邮件将这些快捷方式发送给人们，当他们点击它们时，它会自动为他们安装该打印机。

我从打印服务器导出的打印机名称列表中填充了一个数组：

```
$list = @((get-contnet $home\dekstop\plist.txt)) 
```

然后我创建了一个创建快捷方式的方法：

```
function Make-Shortcut
{
param ([string]$dest, [string]$source)
$WshShell = New-Object -comObject Wscript.Shell
$Shortcut = $WshShell.CreateShortcut($dest)
$Shortcut.TargetPath = $Source
$Shortcut.Save()
} 
```

该功能工作正常。我能够毫无问题地创建标准快捷方式。

下一部分是我卡住的地方：

```
foreach ($i in $list)
{
Make-Shortcut "C:\pshort\$i.lnk" "C:\Windows\System32\rundll32.exe 
printui.dll,PrintUIEntry /in /q /n\\printserver\$i"
} 
```

当它运行时，它会为列表中的每台打印机生成一个与打印机同名的快捷方式。但是，问题出现在目标路径上。代替

`C:\Windows\System32\rundll32.exe printui.dll,PrintUIEntry /in /q /n\\printserver\printername`

它将其更改为：

`C:\Windows\System32\rundll32.exe printui.dll,PrintUIEntry \in \q \n\printserver\printername`

这样做的三个问题是：

1.  它正在反转参数的正斜杠
2.  它正在删除服务器名称之前的反斜杠之一
3.  它正在向双方添加引号。我需要去掉引号才能使快捷方式正常工作。

我认为这是因为 Powershell 认为我正在尝试创建标准快捷方式，并且认为我在输入路径时犯了错误。

我曾尝试在每个正斜杠前放置一个 `，希望转义字符能阻止它反转它，但没有运气。我也尝试为每个参数使用连字符，但这也不起作用。

有没有办法阻止这种情况发生？还是有更好的方法来尝试完成我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:27:20.733

您需要将参数添加到`com object`

尝试向`$arguments`您的`Make-Shortcut`函数添加一个新参数并执行以下操作：

```
Make-Shortcut "C:\pshort\$i.lnk" "C:\Windows\System32\rundll32.exe" 
"printui.dll,PrintUIEntry /in /q /n\\printserver\$i" 
```

在你的函数中添加这个：

```
$Shortcut.Arguments = $arguments 
```

所以链接创建成功......但我不知道它是否有效:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T15:15:09.547

完全不同的答案，但在标准的 Windows 环境中，只需单击指向 \printserver\printer 的超链接即可将共享打印机添加到某人的系统中？

所以一封简单列出的电子邮件：

\\PrintServer\Printer01
\\PrintServer\Printer02
\\PrintServer\Printer03

可能也会做同样的工作。

# matlab - matlab中浮点数的改变精度如何将5.145556666视为5.24

> ID：13252868
> 
> 赞同：1
> 
> 时间：2012-11-06T14:15:17.060
> 
> 标签：matlab

**更新我只想在 matlab.as 的浮点部分中使用 2 位数字处理浮点数或双精度数

```
a=23.1234443434343434454545444; 
```

我想如果我使用它是平等的

```
a=23.12; 
```

matlab有什么想法吗？

我想要在matlab中像**round(1.95583, 2);//return 1.95** (php function)这样的函数

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T14:33:25.637

如果你想*显示*只有 2 位数字的值，你可以这样做

```
>> format bank
>> pi
ans = 
    3.14
>> rand(4)
ans =
      0.81    0.63    0.96    0.96
      0.91    0.10    0.96    0.49
      0.13    0.28    0.16    0.80
      0.91    0.55    0.97    0.14 
```

这并不***意味着***计算将以较低的精度进行。

如果后者真的是你想要的（为什么？！），你可以使用像这样的结构

```
ppi = single(pi) 
```

降低*精度*，或

```
f = @(x) double(uint64(x*100))/100; 
```

保证 2 位精度。在最后一种情况下，您必须`f`在使用它们之前通过函数传递所有值：

```
>> ppi = f(pi)
ans = 
    3.140000000000000
>> f(rand(4)) 
ans =
   0.280000000000000   0.690000000000000   0.440000000000000   0.190000000000000
   0.050000000000000   0.320000000000000   0.380000000000000   0.490000000000000
   0.100000000000000   0.950000000000000   0.770000000000000   0.450000000000000
   0.820000000000000   0.030000000000000   0.800000000000000   0.650000000000000 
```

如果您正在为最后一种情况寻找更优雅的解决方案，请使用定点工具箱，正如 Danil 建议的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:41:12.153

如果您只想保留 N 个数字，则另一种公式是：

```
>> d = 10^(-2)
>> round(pi/d)*d
ans =
    3.1400 
```

### 编辑：

根据 Rody 的评论，round 可能无法正确截断，因此请使用：

```
>> a = 3.146
>> fix(a/d)*d
ans =
    3.1400 
```

# c++ - 通过 boost 获取自当地时间上午 8 点以来经过的时间

> ID：13252878
> 
> 赞同：2
> 
> 时间：2012-11-06T14:15:48.900
> 
> 标签：c++, datetime, boost, timezone

由于大多数 DST 时髦的事情发生在午夜左右，我认为简单地从“上午 8 点”时间减去当前时间应该是相当安全的，但这不是我很喜欢的解决方案。

（下面假设机器的当地时间是美国/纽约，这是一个安全的假设）

为了解释我在找什么，这是我在 python 中的做法

```
from datetime import datetime,date,time
print ( datetime.now() - datetime.combine( date.today(), time(8,0,0) ) ).total_seconds() 
```

或者，如果我更小心一点：

```
from datetime import datetime,date,time
import pytz
tz = pytz.timezone('America/New_York')  #local time is always New York
now = pytz.UTC.localize(datetime.utcnow()).astimezone(tz) # now in this timezone
eight_am = tz.localize( datetime.combine( now.date(), time(8,0,0) ) ) 
(now - eight_am).total_seconds() 
```

我将如何通过 boost 实现 C++ 中的每一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:42:43.520

我将回答我自己的第一部分：

```
namespace pt = boost::posix_time; 
pt::ptime now = pt::second_clock::local_time();
pt::ptime then = pt::ptime(now.date(),pt::hours(8));
pt::time_duration dt = now - then;      
std::cout << dt.total_seconds() << std::endl; 
```

# wix - 我可以确保组件安装顺序吗？

> ID：13252880
> 
> 赞同：2
> 
> 时间：2012-11-06T14:16:07.040
> 
> 标签：wix, installation, components, windows-installer

我正在考虑使用 WiX 安装程序实现数据库升级。因此，带有`SqlScript`元素的组件很少。但我不确定我是否可以依赖组件执行顺序。

WiX 是否总是按照在片段中定义的顺序将组件添加到 MSI 组件表中？Windows 安装程序是否保证按组件表的顺序执行它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:05:41.950

不，MSI 不按任何给定顺序处理组件。它是不确定的。但是，WiX 提供的 SQL 脚本自定义操作会按给定顺序处理脚本。它由 SqlScript@Sequence 属性确定。

当 CustomActions 评估时，它将根据正在安装的组件决定需要执行哪些脚本。然后它会根据 Sequence 属性对该结果进行排序并安排安装时间。

我倾向于根据安装类别使用 100 200 300 400 之类的东西。

100 - 创建空数据库

200 - 创建表格

300 - 应用约束

400 - 加载数据

500 - 创建对象，如 procs 和 triggers

这个想法是您不必对 101 与 102 进行微观管理，而只需将其视为安装阶段。

# vba - 如何在 VBA 中偏移一个范围的 2 个单元格？

> ID：13252882
> 
> 赞同：1
> 
> 时间：2012-11-06T14:16:18.147
> 
> 标签：vba, excel

我正在编写一个宏来检查一个值是否为真，如果是，则获取该行的第一个单元格并存储它。例如：

```
|191|c:users\public\test.dbf |真 |  
|192|c:users\public\test2.dbf |假|  
|193|c:users\public\test2.dbf |假|
```

我想遍历这个数组，当一个值为 True 时，我需要存储 191 和 c:users\public\test.dbf （对于这个例子；要存储的实际值将取决于行）。

这是我的代码：

```
For Each strPath In Worksheets("OPTIONS").Range("F2:H6")
    newChemin = strPath
    If strPath <> True And strPath <> False Then Chemin = strPath

    If strPath.Value = "True" Then
        For Each Cell In Worksheets("OPTIONS").Range("F2:F6")
            If Cell = Chemin Then
                strChemin = Chemin
                Exit For
            End If
        Next Cell

        Set wsSheet1 = wbBook.Worksheets("DB" & strChemin)        
        If strPath.Value = "TRUE" Then
            If FichierExiste(Chemin) Then
                Line = Line + 1
            Else
                Chemin = Worksheets("OPTIONS").Cells(7, 7).Value & "\" & strChemin & "\ancretbd.mdb"
                If FichierExiste(Chemin) Then
                    '* Appel de la Method mod_Importation
                    Call Importation_Totale
                Else
                    MsgBox "Desolé, le fichié demandé n'existe pas !"
                End If
            End If
        End If
    End If
Next strPath 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:13:11.557

由于法语 (??) 变量，很难理解这段代码在做什么。如果您可以描述什么是 chemin，则可能更容易理解您指的是行的哪一部分。

但是，由于您的 strPath 实际上是一个 Range，您可以简单地参考它的偏移量！

```
For Each strPath In Worksheets("OPTIONS").Range("F2:H6")
    If strPath.Value = "True" Then
        Set wsSheet1 = wbBook.Worksheets("DB" & strPath.Offset(0, -1).Value
        If FichierExiste(strPath.Offset(0, -2).Value) Then
        Line = Line + 1
        Else
            Chemin = Worksheets("OPTIONS").Cells(7, 7).Value & "\" & strChemin & "\ancretbd.mdb"
            If FichierExiste(Chemin) Then
                 '* Appel de la Method mod_Importation
                 Call Importation_Totale
            Else
                MsgBox "Desolé, le fichié demandé n'existe pas !"
            End If
        End If
    End If
Next strPath 
```

这可能不是 100% 正确（因为我不清楚代码的功能），并且偏移量可能是错误的（上例中的 -1 和 -2）。但我希望这能给你一个解决问题的想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:27:36.523

在我看来，H 列是包含 TRUE 或 False 的列。在这种情况下，如果您只想检查此列并相应地更新列 F 和 G，那么这个简化的代码可以为您完成这项工作：

```
For Each strPath In Worksheets("OPTIONS").Range("H2:H6")
     If strPath.Value = "True" Then
         Range("F" & strPath.Row).Value = "191"
         Range("G" & strPath.Row).Value = "c:users\public\test.dbf"

     End If
Next 
```

# backbone.js - 在使用 Jade 生成的 UnderscoreJS 模板中动态设置 ID

> ID：13252886
> 
> 赞同：0
> 
> 时间：2012-11-06T14:16:35.717
> 
> 标签：backbone.js, underscore.js, pug

我正在使用 Jade 生成 JST 模板，但在为 id 字段设置占位符时遇到问题。

```
.somediv(id=<%= id %>)
    ... 
```

Jade 编译器对上述语法抛出错误

```
undefined:501
buf.push(attrs({ terse: true, 'id':(<%= id %>), "class": ('somediv') 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:33:14.400

属性的正确[语法](https://github.com/visionmedia/jade#attributes)似乎是：

```
.somediv(id=id)
    ... 
```

但是，如果您需要`id`完全正确，`<%= id %>`则必须引用它并`!=`用于不应转义的值

```
.somediv(id!="<%= id %>")
    ... 
```

# expressionengine - 将折扣值显示为免费送货

> ID：13252888
> 
> 赞同：4
> 
> 时间：2012-11-06T14:16:42.640
> 
> 标签：expressionengine, expresso-store

当我在 Expresso Store（版本 1.6.0）中创建免费送货的促销代码时，我似乎需要将折扣金额设置为 0 并选择“是”选项以获得免费送货。

这是可行的——但是当用户看到订单的折扣值时，它会显示 0.00 英镑——这会引起一些混乱。我想不出办法让 order_discount 标签显示“免费送货”。我尝试了各种条件，但没有运气。

任何人都可以对此提出建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:58:37.753

显示应用的促销代码是否导致免费送货的最简单方法是在您的模板中使用它：

```
{if promo_code_free_shipping}
    Your Order Ships for Free
{/if} 
```

就我个人而言，我不认为免费送货是一种折扣，就像我会说 50 美元的订单减 10 美元一样，所以如果我看到该订单现在可以免费送货，我会看到促销代码已被应用。

但是，如果您仍想对订单折扣进行条件处理，请尝试：

```
{if order_discount_val == 0}
    Free Shipping
{/if} 
```

`{price}`Store 中返回格式化数字、`{price_inc_mod}`、等的任何变量`{sale_price}`都可以后缀，`_val`以返回未格式化的数字以用于条件和类似情况。

# haskell - 顺序单子中优雅的haskell案例/错误处理

> ID：13252889
> 
> 赞同：8
> 
> 时间：2012-11-06T14:16:43.860
> 
> 标签：haskell

因为我之前在[另一个问题](https://stackoverflow.com/questions/13251388/elegant-haskell-case-error-handling)中过于简单化了，所以我想在这里举一个更清楚的例子。

如何处理必须以顺序方式检查某些条件而不嵌套多个案例的情况？对于“顺序方式”，我的意思是获取一个值（例如从标准输入），检查该值是否符合特定条件，并根据结果获取另一个值等等。

例子：

```
sequen :: IO String
sequen = do
  a <- getLine
  case a of
    "hi" -> do
      putStrLn "hello!"
      b <- getLine
      case b of
        "how are you?" -> do
          putStrLn "fine, thanks"
          return "nice conversation"
        _ -> return "error 2"
    _ -> return "error 1" 
```

我知道有更好的方法来编写这样的聊天机器人，它应该只是展示问题的顺序性质。如您所见，对于每个嵌套案例，代码也会缩进更深。

有没有办法更好地构造这样的代码？我正在考虑在一个地方处理“错误”并描述“成功路径”，而不会在其上分配错误处理。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-06T14:35:05.400

当然。这正是`EitherT`为此而生的。您可以从包装`Control.Monad.Trans.Either`中获取它。`eitherT`

```
import Control.Monad.Trans.Class
import Control.Monad.Trans.Either

main = do
    e <- runEitherT $ do
        a <- lift getLine
        case a of
            "hi" -> lift $ putStrLn "hello!"
            _    -> left 1
        b <- lift getLine
        case b of
            "how are you?" -> lift $ putStrLn "fine, thanks!"
            _              -> left 2
        return "nice conversation"
    case e of
        Left  n   -> putStrLn $ "Error - Code: " ++ show n
        Right str -> putStrLn $ "Success - String: " ++ str 
```

`EitherT`遇到`left`语句时中止当前代码块，人们通常使用它来指示错误情况。

内部块的类型是`EitherT Int IO String`. 当你`runEitherT`它，你得到`IO (Either Int String)`。`Left`类型对应于它以 a 失败的情况，值`left`表示`Right`它成功到达块的末尾。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-17T19:02:32.397

不久前，我写了一系列帖子，回顾了我自己对`Either`&`EitherT`类型的了解。你可以在这里阅读：[http ://watchchrislearn.com/blog/2013/12/01/working-entirely-in-eithert/](http://watchchrislearn.com/blog/2013/12/01/working-entirely-in-eithert/)

我使用该`errors`包来获得一堆使用 EitherT 的好帮手（`left`以及`right`例如返回 and 的提升版本的函数`Left`）`Right`。

通过将潜在的失败条件提取到它们自己的助手中，您可以使代码的主线完全按顺序读取，而无需使用 case 语句检查结果。

从那篇文章中，您可以看到该`runEitherT`部分是如何连续工作的，它恰好具有`EitherT`. 显然，这段代码是相当人为地展示了`MaybeT`内部的播放方式`EitherT`。在真正的代码中，它只是你想要讲述的故事，最后有一个`Left`/ `Right`。

```
import Control.Error
import Control.Monad.Trans

-- A type for my example functions to pass or fail on.
data Flag = Pass | Error

main :: IO ()
main = do
  putStrLn "Starting to do work:"

  result <- runEitherT $ do
      lift $ putStrLn "Give me the first input please:"
      initialText <- lift getLine
      x <- eitherFailure Error initialText

      lift $ putStrLn "Give me the second input please:"
      secondText <- lift getLine
      y <- eitherFailure Pass (secondText ++ x)

      noteT ("Failed the Maybe: " ++ y) $ maybeFailure Pass y

  case result of
    Left  val -> putStrLn $ "Work Result: Failed\n " ++ val
    Right val -> putStrLn $ "Work Result: Passed\n " ++ val

  putStrLn "Ok, finished. Have a nice day"

eitherFailure :: Monad m => Flag -> String -> EitherT String m String
eitherFailure Pass  val = right $ "-> Passed " ++ val
eitherFailure Error val = left  $ "-> Failed " ++ val

maybeFailure :: Monad m => Flag -> String -> MaybeT m String
maybeFailure Pass  val = just $ "-> Passed maybe " ++ val
maybeFailure Error _   = nothing 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T16:31:28.447

由于您必须在`IO`monad 中，因此最好使用`IO`monad 的错误处理功能，而不是在`IO`. 它避免了所有繁重的工作`lift`：

```
import Control.Monad ( unless )
import Control.Exception ( catch )
import Prelude hiding ( catch )
import System.IO.Error ( ioeGetErrorString )

main' = do
  a <- getLine
  unless (a == "hi") $ fail "error 1"
  putStrLn "hello!"
  b <- getLine
  unless (b == "how are you?") $ fail "error 2"
  putStrLn "fine, thanks"
  return "nice conversation"

main = catch main' $ return . ioeGetErrorString 
```

在这种情况下，您的错误只是`String`s，由`IO`'s抛出`fail`，作为 a `userError`。如果你想抛出其他类型，你需要使用`throwIO`而不是`fail`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-05T12:11:25.713

在某些时候[，该`EitherT`软件包已被弃用](https://hackage.haskell.org/package/EitherT)（尽管[`transformers-either`](https://hackage.haskell.org/package/transformers-either)提供了类似的 API）。幸运的是，有一个替代方案`EitherT`甚至不需要安装单独的包。

标准的 Haskell 安装带有[`Control.Monad.Trans.Except`](https://hackage.haskell.org/package/transformers/docs/Control-Monad-Trans-Except.html)模块（来自`transformers`与 GHC 捆绑在一起的包），其行为几乎与`EitherT`. 生成的代码*几乎*与[Gabriella Gonzalez 答案](https://stackoverflow.com/a/13253245)中的代码相同，但使用[`runExceptT`](https://hackage.haskell.org/package/transformers/docs/Control-Monad-Trans-Except.html#v:runExceptT)了代替`runEitherT`和[`throwE`](https://hackage.haskell.org/package/transformers/docs/Control-Monad-Trans-Except.html#v:throwE)代替`left`。

```
import Control.Monad.Trans.Class
import Control.Monad.Trans.Except

main = do
    e <- runExceptT $ do
        a <- lift getLine
        case a of
            "hi" -> lift $ putStrLn "hello!"
            _    -> throwE 1
        b <- lift getLine
        case b of
            "how are you?" -> lift $ putStrLn "fine, thanks!"
            _              -> throwE 2
        return "nice conversation"
    case e of
        Left  n   -> putStrLn $ "Error - Code: " ++ show n
        Right str -> putStrLn $ "Success - String: " ++ str 
```

（请注意，上述[`transformers-either`](https://hackage.haskell.org/package/transformers-either)包实际上是一个包装器，`ExceptT`旨在提供与仍在使用的代码的兼容性`EitherT`。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T14:35:04.307

警告：Haskell 新手回答。

您可以使用 Maybe monad 避免这种楼梯。[本章](http://book.realworldhaskell.org/read/monads.html)开头的好例子

但是，由于您要返回错误代码，因此您需要与单子 Either 类似的东西（大概有一个）。

基本思想是，一旦出现“Left 1”错误，您将短路任何未来的步骤（因为懒惰评估）。

# shader - HLSL获得PIXEL的世界排名

> ID：13252891
> 
> 赞同：2
> 
> 时间：2012-11-06T14:16:47.017
> 
> 标签：shader, hlsl

我正在寻找的是一种简单的方法来获取通过像素着色器运行的每个像素的世界空间坐标。

我找到了这个主题： [像素世界位置](https://stackoverflow.com/questions/12794428/calculating-world-space-coordinates-in-the-pixel-shader)

它似乎有效，但我还没有习惯于我完全理解它的着色器语言。

没有简单的方法来解决这个问题吗？

亲切的问候，马吕斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T14:46:11.673

最简单的方法是将它从顶点着色器作为纹理坐标传递，像这样（dx9 样本很容易转换为 10，如果你使用它）：

```
cbuffer cbmat : register( b0 )
{
    float4x4 tW; //World transform
    float4x4 tWVP: //World * View * Projection
};

struct vs2ps
{
    float4 Pos : POSITION;
    float4 TexCd : TEXCOORD0;
    float3 PosW : TEXCOORD1;
};

vs2ps VS(float4 Pos : POSITION,float4 TexCd : TEXCOORD0)
{
    vs2ps Out;
    Out.Pos = mul(Pos, tWVP);
    Out.TexCd = TexCd;
    Out.PosW = mul(Pos, tW);
    return Out;
}

float4 PS(vs2ps In): COLOR
{
    return float4(In.PosW,1.0f);
} 
```

# iphone - 使用 Restkit 消费 2 Legged OAuth 身份验证（或）Consumer key OAuth webservices

> ID：13252893
> 
> 赞同：0
> 
> 时间：2012-11-06T14:16:52.703
> 
> 标签：iphone, ios, cocoa-touch, oauth, restkit

根据本指南，我在我的网络中配置了 2 个有腿 OAuth 服务：http: [//drupal.org/node/1827698](http://drupal.org/node/1827698)

我很确定配置是正确的，因为当我通过 Web 浏览器使用基本 URL + 服务端点触发 Web 服务时，浏览器会返回此错误：

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<result>The request must be signed</result> 
```

这确实表明这是一个身份验证错误。我想。

现在我计划在我的 iPhone 项目中使用 Restkit。我按照本指南写下了一个简单的 2 腿 OAuth 网络服务请求： [https ://github.com/RestKit/RestKit/wiki/OAuth-Support-on-RestKit](https://github.com/RestKit/RestKit/wiki/OAuth-Support-on-RestKit)

这是我的代码：

```
 NSString *urlResource = @"";
    urlResource = @"/service_endpoint/node";
    RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURLString:@"http://mydomain.com/"];
    [RKObjectManager setSharedManager:objectManager];
    objectManager.client.OAuth1ConsumerKey = @"proper_consumer_key";
    objectManager.client.OAuth1ConsumerSecret = @"proper_consumer_secret";
    objectManager.client.OAuth1AccessToken = nil;
    objectManager.client.OAuth1AccessTokenSecret = nil;
    objectManager.client.authenticationType = RKRequestAuthenticationTypeOAuth1;
#define USE_GET_REQUEST 0
#if USE_GET_REQUEST
    [objectManager.client get:urlResource delegate:self];
#else
    NSDictionary *theParams = nil;
    NSString *timeStamp = [[NSNumber numberWithInt:(NSTimeInterval)[[NSDate date] timeIntervalSince1970]] stringValue];
    theParams = [NSDictionary dictionaryWithObjectsAndKeys:@"1.0", @"oauth_version", @"HMAC-SHA1", @"oauth_signature_method", timeStamp, @"oauth_timestamp", nil];
    [objectManager.client post:urlResource
                        params:theParams
                      delegate:self];
#endif 
```

[如帖子](https://github.com/RestKit/RestKit/wiki/OAuth-Support-on-RestKit)中所示，我之前尝试过使用 GET 请求。我得到一个没有任何数据的空正文，并且 Restkit 在某处记录了此内容，这表明存在授权问题：

> 2012-11-06 19:27:46.887 MyProject OAuth[22187:11603] 我 restkit.network:RKRequest.m:689 状态码：401

我意识到 Restkit 不会以这种方式添加任何参数，因此请求不知道要使用什么签名、时间戳和 OAuth 版本。因此，我使用可以指定这些参数的 POST 请求尝试了相同的操作。即使现在我得到一个空的身体和 Restkit 日志这样说：

> 2012-11-06 19:28:03.231 MyProject OAuth[22205:11603] I restkit.network:RKRequest.m:689 状态码：404

我不知道我哪里出错了或者还有什么可以尝试的！期待帮助解决此问题。

**编辑：** 我实现了一个缺少的回调方法，现在得到：

> “请求必须签名”

信息。我认为上述设置对于 OAuth 身份验证应该已经足够了，如引用的链接中所述，我还应该做什么？

***观察*****：**

我可以看到 RestKit 代码的内部结构，并且 OAuth 参数被放入 URL 请求的 HTTP 标头字段中。但我不确定 Drupal 7 是否能够从 HTTP 标头字段中读取此信息，因为它总是返回给我：

> 请求必须签名

这意味着在第一种情况下 Drupal 没有收到 OAuth 参数，否则它至少会给我以下错误：

> 无效签名

我正在寻找其他一些选项，以查看我的使用者密钥和秘密以及所有其他设置是否在服务器端正确完成。为了确认这一点，我从[这里](http://code.google.com/p/oauth/)下载了 php OAuth 客户端脚本。[从这里](http://code.google.com/p/oauth/source/checkout)下载 SVN 代码。当我使用 PHP 客户端交叉检查请求时，我的请求都得到了完美的服务，我只需输入端点、消费者密钥和消费者密码就可以取回 xml。

我尝试的另一件事是允许 GCOAuth 在 Restkit 中生成签名和所有内容并放置一个断点，以便我可以将 HTTP 标头字段转储到日志中，而不是 Restkit 将请求发送到服务器，我快速准备了 URL请求格式与上述 PHP 客户端完全相同。现在这个请求被触发时，我得到了

> 无效签名

响应，这是否也意味着在 Restkit / GCOAuth 中未正确准备 OAuth 参数？

谢谢，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:46:17.660

我能够通过更改 Restkit 的类来解决它。根据我在上面问题中提到的观察，我能够弄清楚我认为是某些网络服务器的限制，在这种情况下可以说是 Drupal 7。几乎在我遇到的所有 iOS 的 OAuth 库中，OAuth 身份验证参数都是在请求的 HTTP 标头字段中设置的。

我遇到了[PHP 客户端](http://code.google.com/p/oauth/)（如我在上面的观察中提到的），如果我们提供正确的消费者密钥和消费者秘密，它将生成 oauth_nonce 字符串、时间戳，并且还将在 URL 的查询参数中提供 oauth_signature。Restkit 的库中缺少此功能（我假设？）。尽管 Restkit 用 GCOAuth 提供的所有信息填充了 HTTP 标头字段，但我觉得我的 Drupal 7 网络服务器没有以某种方式读取它，或者我可能为 HTTP 标头字段使用了错误的键。我搜索了 Drupal 7 关于如何在 HTTP 标头字段中传递参数并从那里读取的文档，但我找不到太多帮助，而且我也不是很精通。

所以我的解决方案是像上面提到的[PHP 客户端](http://code.google.com/p/oauth/)那样构建 URL 请求。几乎所有的事情都是由 Restkit 在 GCOAuth 类、RKClient 和 RKRequest 类中完成的。我所要做的就是进行调整，以便将 OAuth 参数附加到请求 URL。我已将所有更改推送到[github 中的 Restkit 分叉代码](https://github.com/gumdal/RestKit)。我对此 OAuth 模块的特定更改用**“// Raj OAuth:”**注释，可以在项目中搜索。

下面是我成功用来触发和使用 web 服务的代码。目前我已经为 RKClient 的`-get:delegate:`方法提供了一个重载的指定方法，我相信同样可以根据需要扩展到所有其他可用的方法。

```
-(void)triggerOAuthRequest
{
    NSString *urlResource = @"";
    urlResource = @"/endpoint_path/endpoint.xml";
    NSString *baseURL = @"http://your_domain_name.com/path_to_drupal_home_folder/";
    NSString *consumerKey = @"YW9h6tUc*************";
    NSString *consumerSecret = @"HUS2ALAC*************";

    RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURLString:baseURL];
    [RKObjectManager setSharedManager:objectManager];
    objectManager.client.OAuth1ConsumerKey = consumerKey;
    objectManager.client.OAuth1ConsumerSecret = consumerSecret;
    objectManager.client.OAuth1AccessToken = nil;
    objectManager.client.OAuth1AccessTokenSecret = nil;
    objectManager.client.authenticationType = RKRequestAuthenticationTypeOAuth1;
    [objectManager.client get:urlResource
                     delegate:self
constructOAuthQueryParamsInURL:YES];
} 
```

我还假设发送此请求足够安全，因为我的 OAuth 参数在客户端使用秘密消费者密钥进行签名，然后请求被发送到服务器，尽管 URL 本身具有查询参数，但我觉得这是安全的，因为 oauth_signature 使用秘密消费者密钥进行签名，只有网络服务器可以解密并检查请求是否来自真实来源。

如果您觉得有任何改进的余地，请告诉我。

谢谢，

拉吉

# c# - 正则表达式电子邮件错误

> ID：13252897
> 
> 赞同：1
> 
> 时间：2012-11-06T14:17:07.867
> 
> 标签：c#, asp.net, regex

当用户无法在网站上注册时，我遇到了一些错误。JS Jquery 验证器经过，但在控制器（asp）一侧 -验证**不正确**。

请告诉我，是否可以获得这种类型的用户电子邮件以及如何验证此电子邮件（通过如何表达）？

## 可验证的电子邮件：“testtest_@gmail.com”

### C# 电子邮件模式正则表达式

```
 const string email_pattern = 
        @"^(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,6}$"; 

  const string email_pattern3 =
        @"^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$"; 

  const string email_pattern2 =
        @"^(?("")(""[^""]+?""@)|(([0-9a-z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-z])@))(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-z][-\w]*[0-9a-z]*\.)+[a-z0-9]{2,17}))$";

  const string email_pattern3 = @"^(([\w-]+\.)+[\w-]+|([a-zA-Z]{1}|[\w-]{2,}))@"
 + @"((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?
            [0-9]{1,2}|25[0-5]|2[0-4][0-9])\."
 + @"([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?
            [0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|"
 + @"([a-zA-Z]+[\w-]+\.)+[a-zA-Z]{2,4})$"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:34:25.163

如果您想验证电子邮件地址正则**表达式**不是正确的选择。

使用我们自己的**极客**[SLaks推荐的](https://stackoverflow.com/questions/1903356/email-validation-regular-expression/1903368#1903368)[MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

 **```
try 
{
   address = new MailAddress(address).Address;
   //address is valid id reached here
} 
catch(FormatException) 
{
   //address is invalid
} 
```

* * *

但如果你沉迷于正则表达式..就这样做

```
.*?@.* 
```

**或者**[如果你想要完整的正则表达式]

由 SLaks 提供

```
(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:
\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(
?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ 
\t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\0
31]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\
](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+
(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:
(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)
?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\
r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[
 \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)
?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t]
)*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[
 \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*
)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t]
)+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)
*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+
|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r
\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:
\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t
]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031
]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](
?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?
:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?
:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)|(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?
:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?
[ \t]))*"(?:(?:\r\n)?[ \t])*)*:(?:(?:\r\n)?[ \t])*(?:(?:(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|
\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>

@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"
(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?
:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[
\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:[^()<>@,;:\\".\[\] \000-
\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(
?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)?[ \t])*(?:@(?:[^()<>@,;
:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([
^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\"
.\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\
]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\
[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\
r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] 
\000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]
|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?(?:[^()<>@,;:\\".\[\] \0
00-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\
.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,
;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|"(?
:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*))*@(?:(?:\r\n)?[ \t])*
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t])*(?:[
^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\]
]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(?:\r\n)?[ \t])*)(?:,\s*(
?:(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(
?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[
\["()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t
])*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t
])+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?
:\.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|
\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*|(?:
[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".\[\
]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)*\<(?:(?:\r\n)
?[ \t])*(?:@(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["
()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)
?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>

@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*(?:,@(?:(?:\r\n)?[
 \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,
;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\.(?:(?:\r\n)?[ \t]
)*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\
".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*)*:(?:(?:\r\n)?[ \t])*)?
(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\["()<>@,;:\\".
\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])*)(?:\.(?:(?:
\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z|(?=[\[
"()<>@,;:\\".\[\]]))|"(?:[^\"\r\\]|\\.|(?:(?:\r\n)?[ \t]))*"(?:(?:\r\n)?[ \t])
*))*@(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])
+|\Z|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*)(?:\
.(?:(?:\r\n)?[ \t])*(?:[^()<>@,;:\\".\[\] \000-\031]+(?:(?:(?:\r\n)?[ \t])+|\Z
|(?=[\["()<>@,;:\\".\[\]]))|\[([^\[\]\r\\]|\\.)*\](?:(?:\r\n)?[ \t])*))*\>(?:(
?:\r\n)?[ \t])*))*)?;\s*) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T08:49:30.287

我的天啊。人们！我讨厌 Net.Mail。正则表达式是最好的。

看看这段代码，你会发现我是对的。

```
public const string Email4 =
        @"^(?("")("".+?""@)|(([0-9a-zA-Z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-zA-Z])@))(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,6}))$";

    private static Regex regex;

    private static void Main(string[] args)
    {
        var regex = new Regex(Email4, RegexOptions.Compiled);

        var list = new List<string>();
        var str = new[]
                      {
                          // Success email
                          "mkyong@yahoo.com",
                          "mkyong-100@yahoo.com", "mkyong.100@yahoo.com",
                          "mkyong111@mkyong.com", "mkyong-100@mkyong.net",
                          "mkyong.100@mkyong.com.au", "mkyong@1.com",
                          "mkyong@gmail.com.com", "mkyong+100@gmail.com",
                          "mkyong-100@yahoo-test.com",
                          //Fail email
                          "mkyong", "mkyong@.com.my",
                          "mkyong123@gmail.a", "mkyong123@.com", "mkyong123@.com.com",
                          ".mkyong@mkyong.com", "mkyong()*@gmail.com", "mkyong@%*.com",
                          "mkyong..2002@gmail.com", "mkyong.@gmail.com",
                          "mkyong@mkyong@gmail.com", "mkyong@gmail.com.1a",
                          // Test Email project  
                          "mkyong@gmail.com", // success
                          "mkyong_sdf@gmail.com", // success
                          "mkyong_@gmail.com", // fail
                          // success
                          "test+test@gmail.com"
                      };
        list = str.ToList();
        foreach (string x in list)
        {
            foreach (string st in ParseEmail(x))
            {
                Console.WriteLine(st);
            }
        }
        Console.ReadKey();
    }

    private static IEnumerable<string> ParseEmail(string str)
    {
        regex = new Regex(email_pattern, RegexOptions.Compiled);
        return regex.Matches(str).Count > 0
                   ? (from x in regex.Matches(str).Cast<Match>()
                      select (x.Value + "\t\t True\t" + Validate(str)))
                   : new[] {str + "\t\t False\t"+Validate(str)};
    }

    private static bool Validate(string email)
    {
        try
        {
            var address = new MailAddress(email);
            if (address.Address == email || address.Address.Equals(email))
                return true;
            else
                return false;
        }
        catch (Exception exception) { return false; }
    } 
```

*> plzz..不要使用正则表达式..这就像用锤子砍树 - Fake.It.Til.U.Make.It*

**现在，大家一起来看看模式和库。事实证明，Net.Mail 遗漏了比模式正则表达式更严重的错误。**

如果有人遇到这种情况并且不需要其他任何东西，我在这里写了自己。

```
@"^(([A-Za-z0-9]+_+)|([A-Za-z0-9]+\-+)|([A-Za-z0-9]+\.+)|([A-Za-z0-9]+\++))*[A-Za-z0-9_]+@((\w+\-+)|(\w+\.))*\w{1,63}\.[a-zA-Z]{2,6}$"; 
```

对于那些寻找不同解决方案的人 [电子邮件正则表达式比较](http://fightingforalostcause.net/misc/2006/compare-email-regex.php)**

# sql-server - 是否有一致的命令来截断以重新填充表格？

> ID：13252899
> 
> 赞同：1
> 
> 时间：2012-11-06T14:17:09.643
> 
> 标签：sql-server, sql-server-2008, truncate, transaction-log

> **可能重复：**
> [最少登录的插入](https://stackoverflow.com/questions/6266450/minimally-logged-insert-into)

我有一个要截断的临时表，因为没有记录截断。是否有可以应用于插入语句（或备用语句）的标志，以便重新填充它也不会记录在 MS SQL Server 中？

# java - 我需要将一个 int 变量转换为 double

> ID：13252903
> 
> 赞同：68
> 
> 时间：2012-11-06T14:17:28.300
> 
> 标签：java

我的朋友正在尝试将某种计算作为课堂任务，他遇到了一些麻烦……希望您能帮助他。

问题是他从用户那里获得了 int 的输入（它必须是，它是任务的一部分）。他试图在下面的代码中将其转换为双精度，但这不起作用。结果无论如何都是int。

```
double firstSolution = ((b1 * a22 - b2 * a12) / (a11 * a22 - a12 * a21));
double secondSolution = ((b2 * a11 - b1 * a21) / (a11 * a22 - a12 * a21)); 
```

如果你需要更多解释，我会问他。提前致谢！

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-11-06T14:19:19.373

您必须将除法运算符的一个（或两个）参数转换为`double`：

```
double firstSolution = (b1 * a22 - b2 * a12) / (double)(a11 * a22 - a12 * a21); 
```

由于您两次执行相同的计算，我建议重构您的代码：

```
double determinant = a11 * a22 - a12 * a21;
double firstSolution = (b1 * a22 - b2 * a12) / determinant;
double secondSolution = (b2 * a11 - b1 * a21) / determinant; 
```

这以相同的方式工作，但现在有一个*隐式*强制转换为 double。这种从`int`to的转换是[扩大原语转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)`double`的一个例子。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-11-06T14:23:28.137

转换为 double 可以通过将 int[转换为 double 来完成：](https://stackoverflow.com/questions/5289393/casting-variables-in-java)

您可以使用这种机制将 int 转换为 double，如下所示：

```
int i = 3; // i is 3
double d = (double) i; // d = 3.0 
```

替代方案（使用 Java 的自动类型识别）：

```
double d = 1.0 * i; // d = 3.0 
```

在您的代码中实现这一点将类似于：

```
double firstSolution = ((double)(b1 * a22 - b2 * a12) / (double)(a11 * a22 - a12 * a21));
double secondSolution = ((double)(b2 * a11 - b1 * a21) / (double)(a11 * a22 - a12 * a21)); 
```

或者，您可以使用 double (1.0) 类型的硬参数让 java 为您工作，如下所示：

```
double firstSolution = ((1.0 * (b1 * a22 - b2 * a12)) / (1.0 * (a11 * a22 - a12 * a21)));
double secondSolution = ((1.0 * (b2 * a11 - b1 * a21)) / (1.0 * (a11 * a22 - a12 * a21))); 
```

祝你好运。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-06T14:19:42.393

`Integer`我认为您应该通过调用方法强制转换变量或使用类`doubleValue()`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-06T14:21:06.120

要么使用其他人已经说过的强制转换，要么将 int 变量之一乘以`1.0`：

```
double firstSolution = ((1.0* b1 * a22 - b2 * a12) / (a11 * a22 - a12 * a21)); 
```

# android - 如何拦截所有的触摸事件？

> ID：13252904
> 
> 赞同：12
> 
> 时间：2012-11-06T14:17:28.163
> 
> 标签：android

如何获得`View`我的应用程序的“顶部”（包含`Activity`和所有`DialogFragment`s）？我需要拦截所有触摸事件来处理一些`View`介于`DialogFragment`和 my之间的运动`Activity`。

我试图通过 Activity 的装饰视图来捕捉它们（事件），但`Window`没有运气：

```
getWindow().getDecorView().setOnTouchListener(...); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-06-04T12:01:02.770

您可以重写[`Activity.dispatchTouchEvent`](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent(android.view.MotionEvent))以拦截 Activity 中的所有触摸事件，即使您有一些会消耗触摸事件的视图（如 ScrollView、Button 等）。

结合[`ViewGroup.requestDisallowInterceptTouchEvent`](http://developer.android.com/reference/android/view/ViewGroup.html#requestDisallowInterceptTouchEvent(boolean))，可以禁用 ViewGroup 的触摸事件。例如，如果您想禁用某个 ViewGroup 中的所有触摸事件，请尝试以下操作：

```
@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    requestDisallowInterceptTouchEvent(
            (ViewGroup) findViewById(R.id.topLevelRelativeLayout),
            true
    );
    return super.dispatchTouchEvent(event);
}

private void requestDisallowInterceptTouchEvent(ViewGroup v, boolean disallowIntercept) {
    v.requestDisallowInterceptTouchEvent(disallowIntercept);
    int childCount = v.getChildCount();
    for (int i = 0; i < childCount; i++) {
        View child = v.getChildAt(i);
        if (child instanceof ViewGroup) {
            requestDisallowInterceptTouchEvent((ViewGroup) child, disallowIntercept);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-21T10:06:56.607

如果您想知道如何拦截 中的所有触摸事件`DialogFragments`，请执行以下操作：

```
abstract class BaseDialogFragment : DialogFragment() {

    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {
        return object : Dialog(requireContext()){
            override fun dispatchTouchEvent(ev: MotionEvent): Boolean {
                // do your thing here
                return super.dispatchTouchEvent(ev)
            }
        }
    }

} 
```

# c# - 在 C# 中对 Twiiter API 1.1 使用“GET”请求时出现错误“未授权”

> ID：13252907
> 
> 赞同：1
> 
> 时间：2012-11-06T14:17:34.857
> 
> 标签：c#, .net, twitter, httpwebrequest, twitter-oauth

我正在尝试使用“GET”请求从我的 c# 应用程序连接到 twitter api。我阅读了以下文章： http: [//www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net](http://www.codeproject.com/Articles/247336/Twitter-OAuth-authentication-using-Net) 这对我很有效，我能够成功发布推文。但是当我尝试将它与“GET”和 Twitter API 1.1 一起使用时，它一直给我错误“未授权”

这是我的代码：

```
 var oauth_token = "";
        var oauth_token_secret = "";
        var oauth_consumer_key = "";
        var oauth_consumer_secret = "";

        // oauth implementation details
        var oauth_version = "1.0";
        var oauth_signature_method = "HMAC-SHA1";

        // unique request details
        var oauth_nonce = Convert.ToBase64String(
            new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
        var timeSpan = DateTime.UtcNow
            - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
        var oauth_timestamp = Convert.ToInt64(timeSpan.TotalSeconds).ToString();

        // message api details
        var Id = "111111111111111";// the ID of the tweet need to get info about it
        var resource_url = "https://api.twitter.com/1.1/statuses/show.json";
        // create oauth signature
        var baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" +
                        "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}&status={6}";

        var baseString = string.Format(baseFormat,
                                    oauth_consumer_key,
                                    oauth_nonce,
                                    oauth_signature_method,
                                    oauth_timestamp,
                                    oauth_token,
                                    oauth_version,
                                    Uri.EscapeDataString(status)
                                    );

        baseString = string.Concat("POST&", Uri.EscapeDataString(resource_url), "&", Uri.EscapeDataString(baseString));

        var compositeKey = string.Concat(Uri.EscapeDataString(oauth_consumer_secret),
                                "&", Uri.EscapeDataString(oauth_token_secret));

        string oauth_signature;
        using (HMACSHA1 hasher = new HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey)))
        {
            oauth_signature = Convert.ToBase64String(
                hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)));
        }

        // create the request header
        var headerFormat = "OAuth oauth_nonce=\"{0}\", oauth_signature_method=\"{1}\", " +
                           "oauth_timestamp=\"{2}\", oauth_consumer_key=\"{3}\", " +
                           "oauth_token=\"{4}\", oauth_signature=\"{5}\", " +
                           "oauth_version=\"{6}\"";

        var authHeader = string.Format(headerFormat,
                                Uri.EscapeDataString(oauth_nonce),
                                Uri.EscapeDataString(oauth_signature_method),
                                Uri.EscapeDataString(oauth_timestamp),
                                Uri.EscapeDataString(oauth_consumer_key),
                                Uri.EscapeDataString(oauth_token),
                                Uri.EscapeDataString(oauth_signature),
                                Uri.EscapeDataString(oauth_version)
                        );

        Encoding encode = System.Text.Encoding.GetEncoding("utf-8");

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url + "?id=" + Id);
        request.Headers.Add("Authorization", authHeader);
        request.Method = "GET";// "POST";
        request.ContentType = "application/x-www-form-urlencoded";

        WebResponse response = request.GetResponse();
        StreamReader s = new StreamReader(response.GetResponseStream(), encode);
        string test = s.ReadLine(); 
```

你能帮助我如何编辑它以使用“GET”吗？

谢谢，

# ruby - Mongomapper - 嵌入式文档或一对多或...？

> ID：13252911
> 
> 赞同：1
> 
> 时间：2012-11-06T14:17:59.370
> 
> 标签：ruby, mongodb, sinatra, mongomapper

有用户模型和帐户模型。一个用户可以有多个帐户。大约一个用户有 5 个帐户。

在这种情况下我应该使用什么样的关联：EmbeddedDocument 还是一对多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:25:56.570

没有用户的帐户可以存在吗？同一个帐户可以有 1 个以上的用户吗？似乎并非如此，最好将帐户嵌入到用户中。

[查看有关嵌入与链接的 Mongo 文档](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)

# java - 如何通过知道进程 ID 连接到本地 JMX 服务器？

> ID：13252914
> 
> 赞同：1
> 
> 时间：2012-11-06T14:18:11.453
> 
> 标签：java, service, process, jmx

这背后的动机是使用 JMX 来管理本地 java 服务，而不需要像 java 服务 Wrapper 这样更重量级的东西。

每个服务都启动，`-Dcom.sun.management.jmxremote`这意味着“JVM 被配置为作为本地（仅同一台机器）JMX 服务器工作。” （见[这里](https://stackoverflow.com/questions/516142/does-java-6-open-a-default-port-for-jmx-remote-connections)有一个很好的解释）。

我尝试了[Attach API](http://docs.oracle.com/javase/6/docs/jdk/api/attach/spec/index.html)，但决定反对它，因为它没有与 Java SE6 捆绑在一起，并且不可能将它与 maven 集成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T14:18:11.453

我发布问题是为了分享解决方案，因为我在这里没有看到它（Q&A）。这里的关键是用来`ConnectorAddressLink.importFrom(pid)`获取地址。

```
public static MBeanServerConnection getLocalMBeanServerConnectionStatic(int pid) {
    try {
        String address = ConnectorAddressLink.importFrom(pid);
        JMXServiceURL jmxUrl = new JMXServiceURL(address);
        return JMXConnectorFactory.connect(jmxUrl).getMBeanServerConnection();
    } catch (IOException e) {
        throw new RuntimeException("Of course you still have to implement a good connection handling");
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-16T18:26:46.113

@蒂姆·布特

如果`ConnectorAddressLink.importFrom`返回 null，请尝试将 management-agent.jar 加载到 VM 中。

例如，`startManagementAgent`来自[https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/test/sun/management/jmxremote/bootstrap/TestManager.java的函数](https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/test/sun/management/jmxremote/bootstrap/TestManager.java)

```
private static void startManagementAgent(String pid) throws IOException {
    /*
     * JAR file normally in ${java.home}/jre/lib but may be in ${java.home}/lib
     * with development/non-images builds
     */
    String home = System.getProperty("java.home");
    String agent = home + File.separator + "jre" + File.separator + "lib"
            + File.separator + "management-agent.jar";
    File f = new File(agent);
    if (!f.exists()) {
        agent = home + File.separator + "lib" + File.separator +
            "management-agent.jar";
        f = new File(agent);
        if (!f.exists()) {
            throw new RuntimeException("management-agent.jar missing");
        }
    }
    agent = f.getCanonicalPath();

    System.out.println("Loading " + agent + " into target VM ...");

    try {
        VirtualMachine.attach(pid).loadAgent(agent);
    } catch (Exception x) {
        throw new IOException(x.getMessage());
    }
} 
```

# php - 如何将零整数与值进行比较

> ID：13252920
> 
> 赞同：-1
> 
> 时间：2012-11-06T14:18:25.823
> 
> 标签：php

在数据库中，Student_id 包含 0 值。我想在 if 条件下检查它，但没有达到所需的结果。我在 if 条件下尝试了以下场景：

```
if(is_null($item['student_id'])) {}

if($item['student_id'] === 0){}

if($item['student_id'] == 0){}

if(intval($item['student_id']) == 0){}

if(strval("$item['student_id']") == "0"){} 
```

**注意：**目前我正在尝试在 if 条件下打印一些消息。但是在 student_id = 0 上，没有打印任何内容。如果 student_id 不是 0，则 print 工作正常。

有人可以指导我做错了什么以及如何纠正它。

我添加了 var_dump

```
 array
  '_id' => 
    object(MongoId)[2]
      public '$id' => string '50906d7fa3c412bb040eb577' (length=24)
  'student_id' => int 0
  'type' => string 'exam' (length=4)
  'score' => float 54.653543636265
array
  '_id' => 
    object(MongoId)[6]
      public '$id' => string '50906d7fa3c412bb040eb578' (length=24)
  'student_id' => int 0
  'type' => string 'quiz' (length=4)
  'score' => float 31.950044967421
array
  '_id' => 
    object(MongoId)[2]
      public '$id' => string '50906d7fa3c412bb040eb579' (length=24)
  'student_id' => int 0
  'type' => string 'homework' (length=8)
  'score' => float 14.850457681164 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:20:24.410

尝试：

```
if((int) $item['student_id'] === 0){
....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:20:44.367

除非您的值不是真正的 0，否则这应该有效。

```
if(intval($item['student_id']) == 0){} 
```

另一种可行的方法是，您几乎拥有它：

```
if($item['student_id'] === '0'){} 
```

但话又说回来，确保你真的有一个 0 在那里......你能 var_dump $item 让我们确定一下吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:20:56.200

```
if((int)$item['student_id'] === 0){} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:25:39.000

要按值比较零，首先将检索到的数据更改为整数，然后使用`===`符号进行比较以确保它们在值和类型上是等效的：

```
if(intval($item['student_id']) === 0){} 
```

# hibernate - 是否有类似于 JPA 的无状态会话休眠的类？

> ID：13252921
> 
> 赞同：1
> 
> 时间：2012-11-06T14:18:31.703
> 
> 标签：hibernate, jpa, stateless-session

是否有类似于 JPA 的无状态会话休眠的类，或者是否有某种方法可以在没有代理的情况下获取查询结果，例如对象已经与实体管理器分离？

# android - 使用 PhoneGap 构建

> ID：13252923
> 
> 赞同：0
> 
> 时间：2012-11-06T14:18:36.353
> 
> 标签：android, windows-phone-7, cordova, mobile

我开始为移动设备开发。我想使用PhoneGap，但没有任何IDE，只需创建www文件夹，将其上传到build.phonegap.com并玩得开心。所以我的问题是，您是否可以列出 phonegap 下载文件夹中的所有文件，我必须包含在我的 www projecct 文件夹中，并描述我要在 html 文件中包含的内容以及将我的其他 .js 文件放在哪里。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:24:36.323

The [documentation](https://build.phonegap.com/docs/preparing-your-app) is pretty clear on what to include/exclude, where to put things.

# ios - 什么是 UITouchPhase？

> ID：13252926
> 
> 赞同：1
> 
> 时间：2012-11-06T14:18:51.313
> 
> 标签：ios, events, uikit

有`UITouchPhaseBegan`和`UITouchPhaseEnd`，但什么是`UITouchPhase`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:14:07.920

它是常量的 typedef 枚举。请参阅**UITouch 类参考**

**触摸阶段**

手指触摸的阶段。

```
typedef enum {
   UITouchPhaseBegan,
   UITouchPhaseMoved,
   UITouchPhaseStationary,
   UITouchPhaseEnded,
   UITouchPhaseCancelled,
} UITouchPhase; 
```

# javascript - 在 IE 中 - 更改 iframe 的 location.hash 时拒绝访问

> ID：13252927
> 
> 赞同：0
> 
> 时间：2012-11-06T14:18:56.593
> 
> 标签：javascript, iframe, internet-explorer-8

我有 2 个窗口，例如父窗口和子窗口（子窗口是 iframe），对于父窗口，我已将默认域从 x.localdomain.com 更改为 localdomain.com，对于子窗口，我设置了相同的域（localdomain.com）。 com ) 这是一个动态 iframe。当我更改 iframe 中的位置哈希时，我收到拒绝访问错误。

这仅在 IE 8 中发生。

# java - 使用Java在windows系统之间进行远程文件传输

> ID：13252930
> 
> 赞同：1
> 
> 时间：2012-11-06T14:19:07.323
> 
> 标签：java, window, copy

如何使用Java在Windows系统之间进行远程文件传输？更详细地说，这些 Windows 系统在同一个域中。我想要 Java API，它可以通过使用分配的用户名、密码、域名以及源和目标文件位置在 Windows 系统之间传输文件（ASCII 和二进制）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T11:19:25.663

使用 Sockets 连接（之前的 IP 配置）到 SocketServer 并传输文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:05:29.283

我从来没有这样做过，但我想说你需要使用本机 Windows API 来实现这一点。

您可以使用[JNI 和 C#](http://www.codeproject.com/Articles/13093/C-method-calls-within-a-Java-program)来做到这一点。C# `File.Copy`（参见[此处](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/ffebef9c-a063-46e6-8307-2f73bbf688b7/)的示例）使用本机[CopyFile 函数](http://msdn.microsoft.com/en-us/library/aa363851%28VS.85%29.aspx)。

或者，看看[这个](https://stackoverflow.com/questions/606820/is-there-a-java-library-to-access-the-native-windows-api)关于 SO 的问题。

希望这能给你一些线索。

# wcf - 来自 Windows 8 机器的 WCF 服务奇怪异常

> ID：13252932
> 
> 赞同：3
> 
> 时间：2012-11-06T14:19:09.173
> 
> 标签：wcf, windows-7, windows-8, visual-studio-2012, windows-server-2008

我有一个在 Web 应用程序中使用的 WCF 服务，并且我的 Windows 8 机器出现了奇怪的行为：

当我从 Windows 8 编译项目时，尝试连接到 WCF 服务时出现以下异常：

> 底层连接已关闭：服务器关闭了预期保持活动状态的连接。

当我将它部署到 Windows Server 2008 上时，我遇到了同样的异常。

但是，如果我从 Windows 7 编译项目并将其部署到服务器，它工作得很好。

我在这两种情况下都使用 Visual Studio 2012，尽管一种是 Premium，一种是 Ultimate。

经过大量测试后，似乎当我足够频繁地构建和部署项目时，它会在某些时候工作，而无需更改任何内容。似乎获得一个工作项目的机会大约是五分之一。但是，该服务始终如一地工作。

如果你们中的任何人知道会发生什么，那就太好了。如果您需要更多信息，请告诉我。

# php - 从 2 列中对精确的串联值进行分组？

> ID：13252936
> 
> 赞同：2
> 
> 时间：2012-11-06T14:19:13.097
> 
> 标签：php, mysql

我有一个包含 2 列纬度和经度的表，并且想要 GROUP 精确匹配*（仅） 2 列上的* **串联**值。
***表行：***

```
/* Points Table */
time    |lat    |long
113     |2.1    |5.8
114     |2.1    |5.6    -Set as Group
115     |2.1    |5.6    -Set as Group
116     |2.1    |5.6    -Set as Group
117     |2.1    |5.6    -Set as Group
118     |2.3    |5.2
119     |2.4    |5.3
120     |2.5    |5.3    -Set as Group
121     |2.5    |5.3    -Set as Group
122     |2.6    |5.3
123     |2.1    |5.6    -Set as Group
201     |2.1    |5.6    -Set as Group
202     |2.1    |5.6    -Set as Group
203     |2.5    |5.3 
```

***结果必须是：***

```
/* Points Table */
time    |lat    |long
113     |2.1    |5.8
114     |2.1    |5.6    -Grouped as 1 with first tandem time
118     |2.3    |5.2
119     |2.4    |5.3
120     |2.5    |5.3    -Grouped as 1 with first tandem time
122     |2.6    |5.3
123     |2.1    |5.6    -Grouped as 1 with first tandem time
203     |2.5    |5.3 
```

我只想对串联值进行分组，在上面我们有两个时间串联`2.1 & 5.6`值，并且组被拆分。（用于测试可以在[http://sqlfiddle.com/#!2/5d196](http://sqlfiddle.com/#!2/5d196)上工作）。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:24:07.780

您可以使用 PHP 执行此操作：

```
$query = mysqli_query("SELECT time, lat, `long` FROM Points ORDER BY time");

// output header row
echo str_pad('time', 8) .'|';
echo str_pad('lat', 7) .'|';
echo "long\n";

$prevLat = $prevLong = '';
while ($row = mysqli_fetch_assoc($query)) {
    if ($row['lat'] === $prevLat && $row['long'] === $prevLong) {
        // if this row's lat and long values are the same as the
        // previous row's values, skip this row.
        continue;
    }

    $prevLat  = $row['lat'];
    $prevLong = $row['long'];

    echo str_pad($row['time'], 8) .'|';
    echo str_pad($row['lat'], 7) .'|';
    echo "{$row['long']}\n";
} 
```

这是一个示例：[http ://codepad.org/c0SjA058](http://codepad.org/c0SjA058)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:39:03.713

试试这个：

```
SELECT time, lat, long FROM Points GROUP BY lat, long 
```

# c++ - Visual Studio 调试器的烦恼 - 打开隐藏/系统文件

> ID：13252937
> 
> 赞同：0
> 
> 时间：2012-11-06T14:19:13.663
> 
> 标签：c++, debugging, visual-studio-2008, breakpoints

我只是想知道是否有办法阻止 Visual Studio 2008 在断点调试期间显示所有文件，如 iostream 或 xiosbase？

我发现仅仅因为我要打印到控制台而不得不观看我永远不会接触的文件真的很烦人而且很耗时。

感谢您的关注，

马特

# c# - 显示大量大图像

> ID：13252941
> 
> 赞同：0
> 
> 时间：2012-11-06T14:19:19.450
> 
> 标签：c#, .net, winforms

好吧，我认为这是一个相当简单的任务，但显然不是......

我有一个文件夹，里面有 +1000 张照片。这些都是用相机拍摄的照片，每张大约 3 MB。用户需要能够查看这些图片（作为列表）、重命名或删除它们。而已。

一个可能的解决方案是这个控件：[ImageListView - CodeProject](http://www.codeproject.com/Articles/43265/ImageListView)
，但因为它有 Apache 许可证，我们不能使用它。

那么该怎么做呢？有什么想法或建议吗？我正在使用 .NET 2.0

.... 编辑 ： .....................................

好的，显然我们可以使用 Apache 许可证。（另见：[https](https://stackoverflow.com/questions/1007338/can-i-use-a-library-under-the-apache-software-license-2-0-in-a-commercial-applic) ://stackoverflow.com/questions/1007338/can-i-use-a-library-under-the-apache-software-license-2-0-in-a-commercial-applic ）但是，使用许可证对我来说非常混乱。我阅读了以下指南，但仍然不完全知道如何将其应用于我们的项目：[http ://blog.maestropublishing.com/how-to-apply-the-apache-20-license-to-your-pr](http://blog.maestropublishing.com/how-to-apply-the-apache-20-license-to-your-pr)

它说：

> 您需要在您的发行版的根目录或顶级目录中有两个文件。

“分发”究竟是什么意思？那是我们安装的应用程序，顶层目录意味着 Program files/OurApp/ 吗？

它还说：

> 替换上述通知声明中的所有[括号内]项目。这些项目只有两个，所以你应该不难做到。

但这会给我一个通知文件，内容如下：

> 版权所有 2012 OUR_COMPANY
> 
> 根据 Apache 许可证等许可...

但是我们的应用程序没有获得 Apache 许可？

很抱歉，但我很困惑，不想在这个合法的东西上犯任何错误......我需要做什么才能使用这个控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:03:25.910

也许您需要自己控制此任务。我认为这只是我在你的位置上所做的事情的草图。您需要自己控制分页（仅向用户显示有限的照片）或滚动事件驱动（按需加载照片）。也许您需要一些缩略图生成器。

关键是您可能面临一大堆照片，因此您无法一次获得所有照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:17:39.033

“就是这样”并不是那么简单。

对于超过 3 GB 的 1000+。
需要缩略图才能更快地预览。

如果用户要直接访问这些文件，那么他们需要 NTFS 权限。
也许你想要什么。
您将在锁定问题中遇到什么。
如果一个用户打开了一个文件，那么您不能重命名或删除它。

我知道您不会喜欢这样，但要正确执行此操作，您需要一个服务器应用程序来管理该文件夹，并且用户可以通过 WCF 服务进行访问，因此只有一个控制点。

# android - 来自 facebook api 的图像并不大，因为它们出现在 facebook 中

> ID：13252942
> 
> 赞同：0
> 
> 时间：2012-11-06T14:19:25.047
> 
> 标签：android, facebook

我正在使用 facebook apis 来获取用户的新闻提要数据。我能够得到图像，但它们的尺寸非常小，所以当我保存`wrap_content`它们时它们非常小。

当我将尺寸固定为大约 150dp 宽度和高度 100dp 时，它们会失去清晰度。

如何保持图像在 facebook 中出现的清晰度和大小。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:52:44.087

尝试在 URL 中设置宽度和高度。

例如：

*   150x100 [http://graph.facebook.com/zuck/picture?width=150&height=100](http://graph.facebook.com/zuck/picture?width=150&height=100)
*   250x250 [http://graph.facebook.com/zuck/picture?width=250&height=250](http://graph.facebook.com/zuck/picture?width=250&height=250)

# iis - ASP 页面中的问号

> ID：13252945
> 
> 赞同：1
> 
> 时间：2012-11-06T14:19:31.817
> 
> 标签：iis, asp-classic, iis-6, iis-7.5

我目前正在将网站从 IIS6 迁移到 IIS7.5。我有一个以 ANSI（根据 Notepad++）编码的经典 ASP 文件，它连接到数据库并检索具有 ANSI 范围之外的字符（盖尔字符）的数据并将它们显示在页面上。然后，当我在浏览器中查看该页面时，盖尔字符显示为问号。我可以将 ASP 文件的编码更改为 UTF-8 并且盖尔字符显示正常。

问题是我有数以万计的 ASP 页面，我需要将其转换为 UTF-8，目前，这不是应用转换的选项。

1.  有什么方法可以配置我的 Web 服务器 (IIS7.5) 以将 ASP 文件读取为 UTF-8？
2.  是否有将所有页面转换为 UTF-8 的替代解决方案？

出于某种原因，这些页面在 IIS6 上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:04:10.523

我刚刚偶然发现了答案。

1.  打开 IIS 管理器
2.  选择服务器或网站节点
3.  确保您在功能视图中
4.  打开 ASP 设置
5.  应该有一个名为`Code Page`. 将此设置为值`65001`
6.  单击`Apply`右侧的操作窗格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-18T16:38:48.667

我也遇到了这个确切的问题——例如，我的 MySQL 数据库输出的希伯来语在浏览器中呈现为 ??????????。（我创建了一个经典的 ASP 应用程序，它的输出是希伯来语。）

我尝试了一切，但没有任何效果。

然后我意识到我使用了错误的 (ANSI) ODBC 连接器。您必须使用**Unicode**，至少如果您的数据来自 MySQL 数据库。

因此，您的连接字符串将包含以下内容： DRIVER={MySQL ODBC 5.3 Unicode Driver};

而不是这个：DRIVER={MySQL ODBC 5.3 ANSI Driver};

现在，它完美显示。我真诚地希望这可以帮助一些人！

# c# - 在表中选择以超时结束

> ID：13252947
> 
> 赞同：3
> 
> 时间：2012-11-06T14:19:39.610
> 
> 标签：c#, mysql

我编写了一个简单的 C# 程序，它创建随机字符串并计算 MD5、SHA-1、SHA-256、SHA-384 和 SHA-512 哈希。它将它存储在我的本地数据库中。但是当我尝试执行此 SQL 时：

```
SELECT Original FROM md5list WHERE md5 = 'blabla' LIMIT 0, 50 
```

但是过了一会儿，mysql服务器断开连接并说查询花费了太多时间。我怎样才能延长时间或让它更快？是否有可能在一小时内得到结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:21:04.803

`Original`在和上添加索引`md5`。您应该比一小时快得多。

[创建索引语句](http://www.w3schools.com/sql/sql_create_index.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:21:33.227

EXPLAIN PLAN 查询以查看它是否正在执行 TABLE SCAN。如果您看到一个，请在该`md5`列中添加一个索引，看看是否有帮助。

# wordpress - 自动发送到“Post”或“Page” Wordpress 插件 Contact Form 7

> ID：13252949
> 
> 赞同：0
> 
> 时间：2012-11-06T14:19:44.213
> 
> 标签：wordpress, plugins, action, hook, contact-form-7

我希望 CF7 提交的内容自动发布到我网站上的“发布”或“页面”。

我看到有必要添加一些动作挂钩但我没有这样做的技能？有人可以帮帮我吗？

谢谢！

编辑：我可以使用 Blog_by_Email 服务（它将提交发送到一些电子邮件，然后自动发帖），但我需要帖子上的用户 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:48:15.520

您可以使用 wp_insert_post 来执行此操作

```
 //sample code
 if(isset($_POST['submit_button'])){
  $my_post = array(
    'post_title' => $_POST['title'],
    'post_date' => date("Y-m-d H:i:s"),
    'post_content' => $_POST['description'],
    'post_status' => 'pending',
    'post_type' => 'post',
    'post_author' => $user_id
    );
 $the_post_id = wp_insert_post( $my_post );
} 
```

有关 wp_insert_post 的更多信息，请访问此页面[http://codex.wordpress.org/Function_Reference/wp_insert_post](http://codex.wordpress.org/Function_Reference/wp_insert_post)

# android - 如何加密和解密android sdcard中的文件夹

> ID：13252956
> 
> 赞同：2
> 
> 时间：2012-11-06T14:20:04.517
> 
> 标签：android

是否可以加密 sd 卡文件夹 r 不请帮助我

如果可以的话，加解密的处理器是什么？

不可能，让我知道我可以为 android sdcard 中的文件夹安全做些什么

我的文件在这里：/mnt/sdcard/image1.jpeg。

那么如何在android中加密这个文件请帮助我并且Android加密支持MBs r not

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:53:16.947

是的，您可以使用 java 库对 sd 卡中的文件和文件夹进行加密和解密。您可以通过 javax.security 包实现。

下面是java中的加密和解密示例

[示例 1](http://www.java2s.com/Code/Java/Security/EncryptionanddecryptionwithAESECBPKCS7Padding.htm)

[示例 2](http://www.flexiprovider.de/examples/ExampleRSA.html)

[示例 3](http://www.roseindia.net/answers/viewqa/Java-Beginners/26020-AES-Decryption-using-key-password-.html)

[示例 4](http://www.itcsolutions.eu/2011/08/24/how-to-encrypt-decrypt-files-in-java-with-aes-in-cbc-mode-using-bouncy-castle-api-and-netbeans-or-eclipse/)

[看看这个例子](http://purejava4all.blogspot.in/2011/04/advanced-encryption-standard-aes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:30:34.363

> 是否可以加密 sd 卡文件夹 r 不请帮助我

只需修改操作系统并创建自己的自定义 ROM。

> 不可能，让我知道我可以为 android sdcard 中的文件夹安全做些什么

如果您的目标是允许用户防御其他人窃取用户的数据，您可以加密单个文件作为存储它们的一部分。例如，您可以使用[SQLCipher for Android](http://sqlcipher.net/sqlcipher-for-android/)来加密您放在外部存储上的 SQLite 数据库。

如果您的目标是向用户隐藏数据，那是不可信的。您的加密算法和密钥将在您的应用程序中，任何人都可以检查并使用它来获取加密数据。如果您不希望用户访问某些数据，请不要将该数据放在用户的设备上。

# authentication - 为 OBIEE (Oracle Business Inteligence)11g 添加 jasig CAS 身份验证

> ID：13252960
> 
> 赞同：4
> 
> 时间：2012-11-06T14:20:24.633
> 
> 标签：authentication, web.xml, cas, obiee, jasig

我正在尝试将 CAS 添加为 OBIEE 11g 的身份验证提供程序。

到目前为止，我已将 cas-client-core-3.2.1.jar jar 添加到 $MW_HOME/wlserver_10.3/server/lib/consoleapp/webapp/WEB-INF/lib/ 并配置 $MW_HOME/wlserver_10.3 /server/lib/consoleapp/webapp/WEB-INF/web.xml 带有流动的元素：

```
<filter>
  <filter-name>CAS Authentication Filter</filter-name>
  <filter-class>org.jasig.cas.client.authentication.AuthenticationFilter</filter-class>
  <init-param>
    <param-name>casServerLoginUrl</param-name>
    <param-value>http://192.168.0.117:8000/cas/login</param-value>
  </init-param>
  <init-param>
    <param-name>serverName</param-name>
    <param-value>https://192.168.0.170</param-value>
  </init-param>
</filter>

<filter>
  <filter-name>CAS Validation Filter</filter-name>
  <filter-class>org.jasig.cas.client.validation.Cas10TicketValidationFilter</filter-class>
  <init-param>
    <param-name>casServerUrlPrefix</param-name>
    <param-value>http://192.168.0.117:8000/cas</param-value>
  </init-param>
  <init-param>
    <param-name>serverName</param-name>
    <param-value>https://192.168.0.170</param-value>
  </init-param>
</filter>

<filter>
  <filter-name>CAS HttpServletRequest Wrapper Filter</filter-name>
  <filter-class>org.jasig.cas.client.util.HttpServletRequestWrapperFilter</filter-class>
</filter>

<filter>
  <filter-name>CAS Assertion Thread Local Filter</filter-name>
  <filter-class>org.jasig.cas.client.util.AssertionThreadLocalFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>CAS Authentication Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>CAS Validation Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>CAS HttpServletRequest Wrapper Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这仅适用于 WL 控制台，不适用于 OBIEE 应用程序。我被重定向到 cas 登录，但是我仍然需要输入控制台密码，并且有效用户将是来自 CAS 的用户。

知道如何为 OBIEE 应用程序部署 CAS 吗？

谢谢， 谢伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:56:10.697

好的解决了它，必须解压analytics.ear文件并从中解压analytics.war，将cas核心jar添加到WEB-INF/lib，然后将上面的XML添加到WEB-INF/web.xml重新打包analytics.war ，重新打包analytics.ear 重启weblogic。

在 EM->coreapplication->security enable SSO 中选择通用 SSO 并设置登录和注销 url

注意：我们有一个初始化块，如果用户/密码无法验证，它将失败，必须更改。

# ios - Xcode 显示没有插座

> ID：13252964
> 
> 赞同：0
> 
> 时间：2012-11-06T14:20:43.023
> 
> 标签：ios, xcode4.2, storyboard, iboutlet

我正在使用 Xcode 4.2，我正在尝试将插座链接到我的 viewController 但 Xcode 没有显示插座

这是我的[AppDelegate.h](http://i.imgur.com/0WunX.jpg)

顺便说一句，在我这样做之前，我用相同的代码制作了同一个项目，但我无意中删除了它，我已经完全删除并重新安装了 xcode，但没有成功。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:23:33.663

`PeekPaged...`您是否在 Storyboard中将类设置为 viewController？

# c# - 最快从远程服务器获取数据

> ID：13252966
> 
> 赞同：0
> 
> 时间：2012-11-06T14:20:43.163
> 
> 标签：c#, .net, sql, performance, ado.net

我正在创建一个 Windows 应用程序，我需要在其中使用 ado.net/（或使用 C# 的任何其他方式（如果有））获取数据。从一张桌子。数据库表显然有周围的`100000`记录，下载需要很长时间。

有没有更快的方法可以让我更快地获取数据？

我试过了，`DataReader`但还是不够快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:25:43.013

数据阅读器 API 是您可以做的最直接的 API。重要的是*时间在哪里？*

*   是传输数据的带宽吗？
*   还是在基本查询中？

您可以通过在机器上本地运行查询来找出答案，并查看需要多长时间。如果带宽是您的限制，那么您真正可以尝试的只是删除您实际上不需要的列（不要这样做`select *`）。或者为您和服务器之间的更粗的管道付费。在**某些情况下**，在本地查询数据并以某种压缩形式返回数据可能会有所帮助 - 但您实际上是在谈论诸如 Web 服务之类的东西，它还有其他带宽考虑因素。

不过，更有可能的是，问题在于查询本身。通常情况下，例如：

*   编写明智的 tsql
*   添加适当的索引
*   避免游标、复杂的处理等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:22:54.977

您可能想要实现需要知道的基础方法。只拉下需要的第一块数据，然后在需要下一组数据时，拉下这些行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:29:20.837

可能是您的查询太慢而不是流式处理。您应该向我们展示您的 sql 查询，然后我们可以帮助您改进它。

假设您想从表中获取所有 100000 条记录，您可以使用 a`SqlDataAdapter`填充 a`DataTable`或 a`SqlDataReader`填充 a `List<YourCustomClass>`：

方法（因为我不知道你的`DataTable`领域很难展示一个类）：

```
var table = new DataTable();
const string sql = "SELECT * FROM dbo.YourTable ORDER BY SomeColumn";
using(var con = new SqlConnection(Properties.Settings.Default.ConnectionString))
using(var da  = new SqlDataAdapter(sql, con))
{
    da.Fill(table);
} 
```

# notepad++ - 如何将 Notepad++ 中的选项卡移动到新窗口？

> ID：13252968
> 
> 赞同：118
> 
> 时间：2012-11-06T14:20:50.310
> 
> 标签：notepad++

如何将 Notepad++ 中的选项卡移动到新窗口？（编辑：该`Move to New Instance`选项被禁用，我该如何启用它？）

我尝试过像在 Firefox 和 Chrome 中那样将其拖出，但它不起作用。我也尝试过`Move to Other View`选项，但它将同一个 Notepad++ 窗口分成两部分。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-11-06T14:30:18.980

您可以右键单击选项卡并选择*移动到*或*在新实例中打开*。

这仅适用于不脏的文件（当标签图标不是红色时）。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-06T14:27:05.723

右键单击您正在使用的选项卡，然后单击“移动到新实例”，或者要在新窗口中*再次打开文件，请单击“在新实例中打开”。*

![截屏](../Images/925d4497b85f8ef363395fc4ead69ffc.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-09-04T10:30:53.843

1.  按`Alt`+`F6`创建一个新实例。
2.  用鼠标将想要的选项卡拖到新实例中。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-16T15:48:59.673

只需`Ctrl`+`Left Mouse click`拖放选项卡将创建一个新的`Notepad++`窗口实例。

另外，请确保选项卡不是红色的。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-03-20T07:45:12.693

如果您想在初始打开操作本身期间在单独的实例上打开每个文件，则有一个设置。

导航`settings -> Preference`

[![在此处输入图像描述](../Images/3e1833da3be739608180a4406ce4afcc.png)](https://i.stack.imgur.com/CGG3Y.png)

# jquery - 单个页面上的多个 jqgrid + 搜索功能仅适用于最后一个网格

> ID：13252972
> 
> 赞同：0
> 
> 时间：2012-11-06T14:21:01.363
> 
> 标签：jquery, jqgrid-formatter, jqgrid

我试图在单页中显示三个 jqGrid。一切正常，但问题是当我当时尝试使用 jqGrid 的搜索功能时，它只从最后一个网格搜索！

我有三个不同的框用于在单个网格中进行搜索。

如何解决这个问题，有谁知道请帮帮我...

**更新：** 我也应用了三个不同的表 ID 以及寻呼机 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:42:26.663

我想您将能够通过使用`recreateFilter: true`搜索选项来解决问题。使用它的最简单方法是更改​​默认值：

```
$.extend($.jgrid.search, {recreateFilter: true}); 
```

有关其他信息，请参阅[答案](https://stackoverflow.com/a/9726334/315935)和[另一个](https://stackoverflow.com/a/6884755/315935)。

# android - 确定当前活动 Android

> ID：13252973
> 
> 赞同：0
> 
> 时间：2012-11-06T14:21:03.243
> 
> 标签：android, android-activity

我的应用程序有问题。我正在创建一种临时菜单栏，它必须包含在我的应用程序的所有活动中，我想确定当前加载了哪个活动，以便应用程序通过意图链接到链接到按钮的活动：

```
public void graphAction()
{
    Intent i = new Intent(this, GraphActivity.class );
    this.startActivity(i);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:44:12.257

尝试下面的函数来获取顶级活动名称。

```
 private String getTopActivityName() {
        ActivityManager am = (ActivityManager)getApplicationContext().getSystemService(
                ACTIVITY_SERVICE);
        // get the info from the currently running task
        List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);
        ComponentName componentInfo = taskInfo.get(0).topActivity;
        return componentInfo.getShortClassName();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:41:04.940

您可能要考虑使用 ActionbarSherlock (http://actionbarsherlock.com/) 但我不明白您为什么想要当前活动的活动？如果 graphAction 不在活动中而是在一些自定义对象中，只需将活动传递到那里（或者更好：使用上下文对象，活动不应该被传递）

# java - 我的小程序在它后面显示部分屏幕

> ID：13252979
> 
> 赞同：0
> 
> 时间：2012-11-06T14:21:18.477
> 
> 标签：java, applet, awt, java-2d

因此，当我在小程序和其他东西之间使用 alt-tab 键时，可能是另一个窗口或只是桌面，当我回到它时，小程序最终看起来像这样： ![在此处输入图像描述](../Images/2151f6c1c0c9d39862cc0e0bdfcb90fb.png)

这是我在托管小程序的谷歌网站上使用的嵌入小工具。通常它只是我的小程序，但它显示了我最近用alt-tab键远离的东西。

它也在 Eclipse 的小程序查看器中执行此操作。不仅仅是这个小程序，还有我制作的每个小程序（这就是为什么我认为它与这个小程序的代码没有任何关系）。

这是与我编写 paint() 方法的方式有关的问题，还是其他问题？

# performance - 如何优化可以完全严格的循环

> ID：13252992
> 
> 赞同：6
> 
> 时间：2012-11-06T14:21:54.997
> 
> 标签：performance, haskell, micro-optimization

[我正在尝试为Project Euler Problem #145](http://projecteuler.net/problem=145)编写一个蛮力解决方案，但我无法让我的解决方案在不到 1 分 30 秒内运行。

*（我知道有各种捷径，甚至是纸笔解决方案；出于这个问题的目的，我不考虑这些）。*

在我迄今为止提出的最佳版本中，分析表明大部分时间都花在`foldDigits`. 这个函数根本不需要偷懒，在我看来应该优化为一个简单的循环。如您所见，我试图使程序的各个部分变得严格。

所以我的问题是：**在不改变整体算法的情况下，有没有办法把这个程序的执行时间降低到亚分钟标记？**

（或者如果没有，有没有办法看到代码`foldDigits`尽可能优化？）

```
-- ghc -O3 -threaded Euler-145.hs && Euler-145.exe +RTS -N4

{-# LANGUAGE BangPatterns #-}

import Control.Parallel.Strategies

foldDigits :: (a -> Int -> a) -> a -> Int -> a
foldDigits f !acc !n
    | n < 10    = i
    | otherwise = foldDigits f i d
  where (d, m) = n `quotRem` 10
        !i     = f acc m

reverseNumber :: Int -> Int
reverseNumber !n
    = foldDigits accumulate 0 n
  where accumulate !v !d = v * 10 + d

allDigitsOdd :: Int -> Bool
allDigitsOdd n
    = foldDigits andOdd True n
  where andOdd !a d = a && isOdd d
        isOdd !x    = x `rem` 2 /= 0

isReversible :: Int -> Bool
isReversible n
    = notDivisibleByTen n && allDigitsOdd (n + rn)
  where rn                   = reverseNumber n
        notDivisibleByTen !x = x `rem` 10 /= 0

countRange acc start end
    | start > end = acc
    | otherwise   = countRange (acc + v) (start + 1) end
  where v = if isReversible start then 1 else 0

main
    = print $ sum $ parMap rseq cr ranges
  where max       = 1000000000
        qmax      = max `div` 4
        ranges    = [(1, qmax), (qmax, qmax * 2), (qmax * 2, qmax * 3), (qmax * 3, max)]
        cr (s, e) = countRange 0 s e 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T15:30:26.943

就目前而言，ghc-7.6.1 为`foldDigits`(with `-O2`) 生成的核心是

```
Rec {
$wfoldDigits_r2cK
  :: forall a_aha.
     (a_aha -> GHC.Types.Int -> a_aha)
     -> a_aha -> GHC.Prim.Int# -> a_aha
[GblId, Arity=3, Caf=NoCafRefs, Str=DmdType C(C(S))SL]
$wfoldDigits_r2cK =
  \ (@ a_aha)
    (w_s284 :: a_aha -> GHC.Types.Int -> a_aha)
    (w1_s285 :: a_aha)
    (ww_s288 :: GHC.Prim.Int#) ->
    case w1_s285 of acc_Xhi { __DEFAULT ->
    let {
      ds_sNo [Dmd=Just D(D(T)S)] :: (GHC.Types.Int, GHC.Types.Int)
      [LclId, Str=DmdType]
      ds_sNo =
        case GHC.Prim.quotRemInt# ww_s288 10
        of _ { (# ipv_aJA, ipv1_aJB #) ->
        (GHC.Types.I# ipv_aJA, GHC.Types.I# ipv1_aJB)
        } } in
    case w_s284 acc_Xhi (case ds_sNo of _ { (d_arS, m_Xsi) -> m_Xsi })
    of i_ahg { __DEFAULT ->
    case GHC.Prim.<# ww_s288 10 of _ {
      GHC.Types.False ->
        case ds_sNo of _ { (d_Xsi, m_Xs5) ->
        case d_Xsi of _ { GHC.Types.I# ww1_X28L ->
        $wfoldDigits_r2cK @ a_aha w_s284 i_ahg ww1_X28L
        }
        };
      GHC.Types.True -> i_ahg
    }
    }
    }
end Rec } 
```

如您所见，它重新装箱了`quotRem`调用的结果。问题是`f`这里没有可用的属性，并且作为递归函数，`foldDigits`不能内联。

使用手动工人包装器转换使函数参数静态，

```
foldDigits :: (a -> Int -> a) -> a -> Int -> a
foldDigits f = go
  where
    go !acc 0 = acc
    go acc n = case n `quotRem` 10 of
                 (q,r) -> go (f acc r) q 
```

`foldDigits`变得可内联，并且您会获得专门的版本供您对未装箱数据进行操作，但没有顶级`foldDigits`，例如

```
Rec {
$wgo_r2di :: GHC.Prim.Int# -> GHC.Prim.Int# -> GHC.Prim.Int#
[GblId, Arity=2, Caf=NoCafRefs, Str=DmdType LL]
$wgo_r2di =
  \ (ww_s28F :: GHC.Prim.Int#) (ww1_s28J :: GHC.Prim.Int#) ->
    case ww1_s28J of ds_XJh {
      __DEFAULT ->
        case GHC.Prim.quotRemInt# ds_XJh 10
        of _ { (# ipv_aJK, ipv1_aJL #) ->
        $wgo_r2di (GHC.Prim.+# (GHC.Prim.*# ww_s28F 10) ipv1_aJL) ipv_aJK
        };
      0 -> ww_s28F
    }
end Rec } 
```

并且对计算时间的影响是有形的，对于原始的，我得到了

```
$ ./eul145 +RTS -s -N2
608720
1,814,289,579,592 bytes allocated in the heap
     196,407,088 bytes copied during GC
          47,184 bytes maximum residency (2 sample(s))
          30,640 bytes maximum slop
               2 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     1827331 colls, 1827331 par   23.77s   11.86s     0.0000s    0.0041s
  Gen  1         2 colls,     1 par    0.00s    0.00s     0.0001s    0.0001s

  Parallel GC work balance: 54.94% (serial 0%, perfect 100%)

  TASKS: 4 (1 bound, 3 peak workers (3 total), using -N2)

  SPARKS: 4 (3 converted, 0 overflowed, 0 dud, 0 GC'd, 1 fizzled)

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time  620.52s  (313.51s elapsed)
  GC      time   23.77s  ( 11.86s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time  644.29s  (325.37s elapsed)

  Alloc rate    2,923,834,808 bytes per MUT second 
```

（`-N2`因为我的 i5 只有两个物理内核，所以我使用了）。

```
$ ./eul145 +RTS -s -N2
608720
  16,000,063,624 bytes allocated in the heap
         403,384 bytes copied during GC
          47,184 bytes maximum residency (2 sample(s))
          30,640 bytes maximum slop
               2 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     15852 colls, 15852 par    0.34s    0.17s     0.0000s    0.0037s
  Gen  1         2 colls,     1 par    0.00s    0.00s     0.0001s    0.0001s

  Parallel GC work balance: 43.86% (serial 0%, perfect 100%)

  TASKS: 4 (1 bound, 3 peak workers (3 total), using -N2)

  SPARKS: 4 (3 converted, 0 overflowed, 0 dud, 0 GC'd, 1 fizzled)

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time  314.85s  (160.08s elapsed)
  GC      time    0.34s  (  0.17s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time  315.20s  (160.25s elapsed)

  Alloc rate    50,817,657 bytes per MUT second

  Productivity  99.9% of total user, 196.5% of total elapsed 
```

与修改。运行时间大致减半，分配减少了 100 倍。

# python - Scipy 归一化——本地化值以设置离散点

> ID：13252993
> 
> 赞同：0
> 
> 时间：2012-11-06T14:21:59.043
> 
> 标签：python, pyqt, scipy

我目前正在显示两个独立的 2D 图像（x,y 平面和 z,y 平面），它们来自 0-255 值的 96x512 数组。我希望能够过滤数据，以便消除某个值以下的任何内容（最高值表示目标）。我想做的是从这些图像中分离离散的点，然后可以将这些离散点映射为三维点，而不是映射两个相交的平面。我不完全确定如何执行此操作或从哪里开始（我对 python 很陌生）。我正在使用 scipy 生成图像，并进行了一些归一化和降噪，但我不确定如何将超过阈值的任何内容分离出来，因为它是自己的单个点。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:30:52.967

如果我正确理解你想要什么，过滤点可以这样完成：

```
A=numpy.random.rand(5,5)
B=A>0.5 
```

现在 B 是一个二进制掩码，您可以通过多种方式使用它：

```
A[B] 
```

将返回一个数组，其中包含在 B 中为真的 A 的所有值。

```
A[B]=0 
```

将为 A 中所有在 B 中为真的值分配 0。

```
numpy.nonzero(B) 
```

将为您提供 B 中为真的每个点的 x,y 坐标。

# php - 什么会导致 PHP 会话在第一次登录尝试时失败？

> ID：13252994
> 
> 赞同：1
> 
> 时间：2012-11-06T14:22:02.097
> 
> 标签：php, session

我的脚本创建了一个新的 PHP 会话并立即将用户重定向到另一个页面。

除了服务器空闲一个小时左右后的第一次之外，这每次都能完美运行。在第二次尝试之后，它再次完美运行。服务器空闲后它总是失败，第一次尝试后它总是工作。

**编辑** 当服务器空闲时，会话不起作用。之后一切正常。

从理论上讲，什么会导致会话在第一次尝试时失败？

我不想在这里发布任何代码，因为只是因为我不知道要发布代码的哪一部分。这是在带有 PHP 5.3 的 IIS 7 上。使用 CGI 和 FastCGI 的结果相同。

**编辑** session_start(); 在两个脚本上调用。用户不会看到第一页，因为它会立即重定向到下一页。脚本之间只有不到一秒钟的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:27:04.773

会话存储在磁盘上。由于没有活动，您的服务器磁盘可能正在停机。然后您的脚本在磁盘完成旋转之前超时。可能的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:24:13.397

PHP sessions have a time out (if I understand your question correctly) which means they will "reset" after the timeout.

You can check the `session.gc_maxlifetime` in the php.ini file :)

If I didn't understand properly, then it might be an error in the code itself.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T10:30:51.730

回答我自己的问题。事实证明，这是由其中一个包含的模块中的旧“功能”引起的。如果会话保持打开超过一个小时，则此“功能”旨在通过调用 session_destroy() 来结束会话。

这导致了当用户尝试登录时，PHP 会注意到旧会话并调用 session_destroy() 的问题。在此之后一切似乎都很好，但没有新的会话变量可以写入会话。PHP 日志中没有任何问题的迹象。

将 session_destroy 更改为 session_unset 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T14:41:13.150

> 我的脚本创建了一个新的 PHP 会话并立即将用户重定向到另一个页面。

我将您的话解释为：您正在运行第 1 页`session_start()`，`header('Location: 'page2.php')`但在第 2 页上，在我看来您不再这样做`session_start()`了。

您需要在将要使用的每个页面上使用 session_start() `$_SESSION`。换句话说，放置`session_start()`在所有 PHP 页面的顶部或您计划在每个页面上运行的包含文件中。