# StackOverflow 问答 13918000-13918999

# android - 通过jdts连接sql server到android

> ID：13918002
> 
> 赞同：0
> 
> 时间：2012-12-17T16:27:41.123
> 
> 标签：android, jdbc

我想将 sql server 连接到我的 android 应用程序。我尝试了下面的代码，但出现异常

> 包 com.facebook.android;
> 
> 导入java.sql.Connection；
> 
> 导入 java.sql.DriverManager；
> 
> 导入java.sql.ResultSet；
> 
> 导入 java.sql.Statement；
> 
> 导入 net.sourceforge.jtds.jdbc.*；
> 
> 导入android.util.Log；
> 
> 公共类 ConnectSQL {
> 
> 公共无效测试SQL（）{
> 
> ```
>  Log.d("Android"," MySQL Connect Example.");
>       Connection conn = null;
>         try {
>              String driver = "net.sourceforge.jtds.jdbc.Driver";
>              Class.forName(driver);
>             //test = com.microsoft.sqlserver.jdbc.SQLServerDriver.class;
>              String connString = "jdbc:jtds:sqlserver://localhost:1433/Test";
>             String username = "";
>             String password = "";
>             conn = DriverManager.getConnection(connString,username,password);
>             Log.d("Connection","open");       
>             Statement stmt = conn.createStatement();    
>             ResultSet reset = stmt.executeQuery("select * from emp");
> 
>            //Print the data to the console    
>           while(reset.next()){
>             Log.d("Data:",reset.getString(1));
>            //Log.w("Data",reset.getString(2
>             //System.out.println("Result :" + reset.getInt("1")); 
>           }
>          conn.close();
> 
>       } catch (Exception e)       
>          { 
>              Log.d("Error connection","" +
>            e.getMessage());
>           } 
> ```
> 
> } }

我得到了这个例外

> 错误连接（1833）：net.sourceforge.jtds.jdbc.Driver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:42:06.310

**右键单击您的项目==？属性 ==> 订购和导出 ==> 检查 jtds**
并清理您的项目并重建您的 apk。
我认为它会起作用。

# knockout.js - 在 Knockout 自定义 bindinghandler 中调用 HTML 中提供的方法

> ID：13918005
> 
> 赞同：0
> 
> 时间：2012-12-17T16:27:48.610
> 
> 标签：knockout.js, custom-binding, hammer.js

我在当前项目中同时使用了 knockout.js 和hammer.js。我在hammer.js 中为'tap' 事件创建了一个自定义绑定处理程序（这也适用于其他事件，例如保持或滑动）。我的问题是，在这个绑定处理程序中，我想调用我在 HTML 的 data-bind 属性中提供的方法。根据淘汰文档，我发现我应该调用 valueAccessor()，但不幸的是，这没有任何作用。我已经创建了[这个 Fiddle](http://jsfiddle.net/q7rRW/9/)，它应该给你一个我的问题的清晰例子。感谢你们对我的帮助。

HTML：

```
<button data-bind="tap: myFunction">Click Me</button> 
```

JS：

```
ko.bindingHandlers.tap = {
    'init': function(element, valueAccessor) {

        var tap = new Hammer(element);
        tap.ontap = function(ev){
            //call the method provided in HTML, in this case doSomething();
            // I've tried calling valueAccessor(); but this doesn't seem to work
        };
    }
}

ko.applyBindings({
    myFunction: function() {
        document.write("BAM!");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:38:18.767

调用`valueAccessor`只是让您访问绑定中设置的对象。由于它是一个函数并且您想调用它，因此您必须调用调用的结果`valueAccessor`。

```
ko.bindingHandlers.tap = {
    'init': function(element, valueAccessor) {
        var tap = new Hammer(element);
        var value = valueAccessor(); // get the value (the function)
        tap.ontap = function(ev){
            //call the method provided in HTML, in this case doSomething();
            value(); // call the function
        };
    }
} 
```

[更新的小提琴](http://jsfiddle.net/jeff1203/q7rRW/10/)

# ios - 有哪些选项可以为重定向到网站的 iPhone 创建 shell 应用程序？

> ID：13918008
> 
> 赞同：1
> 
> 时间：2012-12-17T16:27:54.787
> 
> 标签：ios, iphone, ios4, app-store

我有一个客户需要放弃他们非常糟糕的本机应用程序并立即需要一个临时解决方案。他们有一个针对移动设备优化的网站，我们希望在商店中部署一个应用程序来替换当前的应用程序，并对其进行设计，以便您一启动它，它就可以在 Web 浏览器控件中托管该网站，或者只是重定向用户访问 iPhone Safari 应用程序中的网站。我意识到浏览器控件和实际的 Safari 浏览器之间存在细微差别。

是否有任何工具或产品可以自动创建如此简单的应用程序，让苹果公司批准这些简单的应用程序是否有任何问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:10:13.197

听起来你想制作一个**混合**应用程序。

[http://www.cocoacontrols.com/posts/a-primer-on-hybrid-apps-for-ios](http://www.cocoacontrols.com/posts/a-primer-on-hybrid-apps-for-ios)

您的应用程序可能只是`UIWebView`显示网站的应用程序。如果除了 Web 视图之外什么都没有，Apple 可能会拒绝该应用程序 - 对这种可能性进行一些研究。

# php - 保留复选框状态

> ID：13918009
> 
> 赞同：1
> 
> 时间：2012-12-17T16:27:55.437
> 
> 标签：php, javascript, jquery

我使用以下代码在刷新页面时保留下拉菜单的选择。

```
$("#form_Selection > option").each(function() {
    if (this.value == 'variable') { 
        this.selected=true; 
    }
}); 
```

我很难配置刷新后保留复选框状态的类似代码。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:30:58.517

以下如何工作（我没有重新打印代码的逻辑部分，只是设置了复选框 `$(this).attr('checked', true);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:32:19.193

就像是

```
 {if (this.value == 'variable') {this.checked="checked";}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:46:54.573

[要使用:checkbox](http://api.jquery.com/checkbox-selector/)和[prop('checked')](https://stackoverflow.com/questions/426258/how-do-i-check-a-checkbox-with-jquery-or-javascript)保存所有复选框的状态，您可以使用[`sessionStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#sessionStorage)：

```
$(':checkbox').each(function(index,element){
    //save the 'checked' property of every checkbox
    if ( $(this).prop('checked') ) {
        sessionStorage['checked-checkboxes']=sessionStorage['checked-checkboxes'] + ',';
    }
} 
```

然后当页面加载时：

```
var checkedCheckboxes = sessionStorage['checked-checkboxes'];
//if there's anything saved in the sessionStorage for checked checkboxes
if ( checkedCheckboxes ) {
    var checkedCheckboxesNames = checkedCheckboxes.split(',');
    for( var i=0; i < checkedCheckboxesNames; i++ ) {
        $( '#' + checkedCheckboxesNames[i] ).prop( 'checked', true );
    }
} 
```

这个想法很简单：保存时，保存所有已保存复选框的 id，并在加载时获取所有这些 id 并设置复选框。

当然，如果您想要永久存储，您可以替换`sessionStorage`为`localStorage`。请注意：

*   所有复选框都必须有一个 id 才能被这个算法识别。
*   存储中不应该有任何其他变量使用相同的键（可以使用前缀来消除副作用）。

我希望它有帮助:)

# css - 摆脱瓷砖之间的 OpenLayers 间隙

> ID：13918011
> 
> 赞同：0
> 
> 时间：2012-12-17T16:27:59.683
> 
> 标签：css, openlayers, tile

我的 OpenLayers 地图有问题。我无法让瓷砖彼此相邻。我已经检查了侵入性 CSS，但我没有找到任何东西。有人可以帮我解决这个问题吗？

我目前的代码是这样的：

```
<script type="text/javascript" src="http://openlayers.org/api/OpenLayers.js"></script>
<script>
    $(function() {
        var map = new OpenLayers.Map('map');
        var wms = new OpenLayers.Layer.WMS(
            "OpenLayers WMS",
            "http://maps.opengeo.org/geowebcache/service/wms",
                {'layers':'bluemarble'}
            );
            map.addLayer(wms);
            map.zoomToMaxExtent();
        });
</script> 
```

我会留下截图：![在此处输入图像描述](../Images/16d03db217cfed05644a880a4a741cc6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:46:59.903

在 Google 中搜索“openlayers bootstrap”后找到了解决方案。来自 Bootstrap 的侵入式 CSS 似乎存在问题，正在 OpenLayers 主干上解决，但它还不稳定。

要解决这个问题，你只需要添加这个 CSS 规则：

```
#map img {
    max-width: none;
} 
```

（其中#map 是您的地图标识符，可以是一个类或一个div，等等）

请检查此 CSS 加载的顺序，因为我试图在 OpenLayers JS 文件*之前*加载此规则，但它不起作用。它被 OL 覆盖。最后我不得不直接把它放在 HTML 文件上。

# entity-framework - 如何使用 Join() 表达式

> ID：13918012
> 
> 赞同：0
> 
> 时间：2012-12-17T16:28:04.303
> 
> 标签：entity-framework, linq-to-entities, inner-join

> **可能重复：**
> [如何使用方法语法在 linq to sql 中加入？](https://stackoverflow.com/questions/3217669/how-to-do-a-join-in-linq-to-sql-with-method-syntax)

如何使用 join() 表达式？

![在这里，我的模型 edmx](../Images/9e3320e2104d66b3acfb1b83ac613804.png)

```
 /// <summary>
    /// Searches the specified term.
    /// </summary>
    /// <param name="term">The term.</param>
    /// <returns></returns>
    public List<City> Search(string term, string countryAbbrev, string provinceAbbrev)
    {
        //if(!string.IsNullOrEmpty(country) && !string.IsNullOrEmpty(province))
        return context.Cities.join(????).Where(Cty => Cty.Name.Contains(term)).ToList();
    } 
```

我想加入`Province`和`country`。我知道如何处理“ `From .. in .. join..`”但不知道这个表达式`Join(???)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:29:37.923

您不需要进行连接，因为实体已经存在关系，因此您可以使用**导航属性**来获取相关记录的列表

例如，要获取一个省的所有城市，您可以执行以下操作：

```
var citiesInProvince=context.Province.Single(x => x.id==*AnyID*)
                             .Cities; 
```

# windows - 位图克隆 -> PictureBox = InvalidOperationException，“对象当前正在其他地方使用”，红十字（Windows 窗体）

> ID：13918014
> 
> 赞同：1
> 
> 时间：2012-12-17T16:28:19.990
> 
> 标签：windows, winforms, bitmap, picturebox, invalidoperationexception

我知道关于这个主题有很多问题，我已经查看了其中的大部分以及谷歌搜索来帮助我解决这个问题，但无济于事。

我想做的是将生成位图并将位图渲染到 UI 中的 PictureBoxes 的代码的相关部分发布，我想知道是否有人可以发现具体导致此错误的原因，并建议如何避免或绕过它。

我将从 VideoRenderer 类中的相关位 (3) 开始：

1.  视频运行时不断调用 MoveFrameToBitmap 的定时器事件：

    ```
    private void TimerTick(object sender, EventArgs e)
    {
        if (frameTransport.IsNewFrameAvailable())
        {
            if (frameTransport.GetFrame())
            {
                if (MoveFrameToBitmap())
                {
                    double msSinceLastFrame = (Int32)DateTime.Now.Subtract(lastFrameTimestamp).TotalMilliseconds;
                    fps = 1000 / msSinceLastFrame;
                    lastFrameTimestamp = DateTime.Now;
                }
            }
            else
            {
                if (frameTransport.channelKeyBufferBufidMismatch)
                {
                    needsRestart = true;
                }
            }
        }
    } 
    ```

2.  MoveFrameToBitmap，它从 FrameTransport 编组视频帧，如果成功，则创建一个位图，克隆它并将帧排队：

    ```
    internal bool MoveFrameToBitmap()
    {
        bool result = false;

        try
        {
            if (frameTransport.bitmapDataSize == 0)
            {
                return false;
            }

            bool ResolutionHasChanged = ((videoWidth != frameTransport.width) | (videoHeight != frameTransport.height));

            videoHeight = frameTransport.height;
            videoWidth = frameTransport.width;

            Bitmap bitmap = new System.Drawing.Bitmap(videoWidth, videoHeight);
            Rectangle rectangle = new System.Drawing.Rectangle(0, 0, videoWidth, videoHeight);
            BitmapData bitmapData = new System.Drawing.Imaging.BitmapData();
            bitmapData.Width = videoWidth;
            bitmapData.Height = videoHeight;
            bitmapData.PixelFormat = PixelFormat.Format24bppRgb;

            bitmap.LockBits(rectangle, ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb, bitmapData);

            Marshal.Copy(frameTransport.bitmapData, 0, bitmapData.Scan0, frameTransport.bitmapDataSize);

            lock (frameQueueLock)
            {
                if (frameQueue.Count == 0)
                {
                    frameQueue.Enqueue(bitmap.Clone());
                }
            }

            bitmap.UnlockBits(bitmapData);

            if (ResolutionHasChanged) skypeRef.events.FireOnVideoResolutionChanged(this, new RootEvents.OnVideoResolutionChangedArgs(videoWidth, videoHeight));

            bitmap.Dispose();

            result = true;
        }
        catch (Exception) { }

        GC.Collect();
        return result;
    } 
    ```

3.  公开队列帧的属性，即使帧当前没有排队，也可以安全地访问：

    ```
    public Bitmap QueuedFrame
    {
        get
        {
            try
            {
                lock (frameQueueLock)
                {
                    return frameQueue.Dequeue() as Bitmap;
                }
            }
            catch (Exception)
            {
                return null;
            }
        }
    } 
    ```

这就是 VideoRenderer 的全部内容。现在我将展示静态 MyVideo 类的相关属性，它封装、控制和返回来自两个视频渲染器的帧。这是公开第一个渲染器的排队帧的属性（每次调用 videoPreviewRenderer 都被 VPR_Lock 锁定）：

```
 public static Bitmap QueuedVideoPreviewFrame
    {
        get
        {
            lock (VPR_Lock) { return videoPreviewRenderer.QueuedFrame; }
        }
    } 
```

第二个渲染器的属性是相同的，除了它自己的锁定对象。

继续前进，这是我的 UI 中的线程及其调用，它访问 MyVideo 中的两个排队帧属性并将帧渲染到两个 PictureBox：

```
ThreadStart renderVCONF3501VideoThreadStart = new ThreadStart(new Action(() =>
    {
        while (MyAccount.IsLoggedIn)
        {
            if (MyVideo.VideoPreviewIsRendering)
            {
                if (MyVideo.VideoPreviewRenderer.NeedsRestart)
                {
                    MyVideo.VideoPreviewRenderer.Stop();
                    MyVideo.VideoPreviewRenderer.Start();
                    MyVideo.VideoPreviewRenderer.NeedsRestart = false;
                }
                else
                {
                    try
                    {
                        Bitmap newVideoPreviewFrame = MyVideo.QueuedVideoPreviewFrame;

                        if (newVideoPreviewFrame != null)
                        {
                            lock (VCONF3501_VPI_Lock)
                            {
                                VCONF3501_VideoPreview.Image = newVideoPreviewFrame;
                            }
                        }
                    }
                    catch (Exception) { continue; }
                }
            }
            else
            {
                lock (VCONF3501_VPI_Lock)
                {
                    VCONF3501_VideoPreview.Image = null;
                }
            }

            if (MyVideo.LiveSessionParticipantVideoIsRendering)
            {
                if (MyVideo.LiveSessionParticipantVideoRenderer.NeedsRestart)
                {
                    MyVideo.LiveSessionParticipantVideoRenderer.Stop();
                    MyVideo.LiveSessionParticipantVideoRenderer.Start();
                    MyVideo.LiveSessionParticipantVideoRenderer.NeedsRestart = false;
                }
                else
                {
                    try
                    {
                        Bitmap newLiveSessionParticipantVideoFrame = MyVideo.QueuedLiveSessionParticipantVideoFrame;

                        if (newLiveSessionParticipantVideoFrame != null)
                        {
                            lock (VCONF3501_LSPVI_Lock)
                            {
                                VCONF3501_Video.Image = newLiveSessionParticipantVideoFrame;
                            }
                        }
                    }
                    catch (Exception) { continue; }
                }
            }
            else
            {
                lock (VCONF3501_LSPVI_Lock)
                {
                    VCONF3501_Video.Image = null;
                }
            }

            GC.Collect();
        }
    }));

new Thread(renderVCONF3501VideoThreadStart).Start(); 
```

GC.Collect() 调用是强制位图内存释放，因为存在内存泄漏（并且仍然可能是一个 - 克隆的位图没有被手动处理，我不知道在哪里，在这一点上）。

System.Drawing 中的 InvalidOperationException 在哪里，这会导致在 PictureBox 上绘制一个红十字，我在锁定和访问方面做错了什么，如何避免/绕过这个错误？

我试图用 catch 异常绕过它并继续线程中的逻辑，并且我已经确认可以工作。. . 有时。在其他时候，失败的绘制尝试似乎完成得太远并且无论如何都绘制了红十字，并且在那之后，PictureBox 完全没有响应并且无法绘制新帧，即使视频仍然运行良好。

也许有一种方法可以刷新 PictureBox 以便它接受新帧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:28:59.583

我在红十字会遇到问题，然后我找到了这个，它对我有帮助，我希望它也能帮助你：

[WinForms 控件和红色 X](http://www.sturmnet.org/blog/2005/03/23/red-x)

# zend-framework - Doctrine 1 和 Zend 1.12 不想工作

> ID：13918015
> 
> 赞同：0
> 
> 时间：2012-12-17T16:28:20.527
> 
> 标签：zend-framework, doctrine

我对教义有问题。我在 application.ini 中添加以下行：

```
includePaths.model = APPLICATION_PATH "/models"

autoloaderNamespaces[] = "Doctrine"

doctrine.dns = "mysql://root@localhost/translators"
dectrine.data_fixtures_path = APPLICATION_PATH "/doctrine/data/fixtures"
doctrine.models_path = APPLICATION_PATH "/models"
doctrine.migrations_path = APPLICATION_PATH "/doctrine/migrations"
doctrine.sql_path = APPLICATION_PATH "/doctrine/data/sql"
doctrine.yaml_schema_path = "APPLICATION_PATH "/doctrine/schema"

doctrine.generate_models_options.pearStyle = true
doctrine.generate_models_options.generateTableClasses = true
doctrine.generate_models_options.generateBaseClasses = true
doctrine.generate_models_options.baseClassPrefix = "Base_"
doctrine.generate_models_options.baseClassesDirectory =
doctrine.generate_models_options.classPrefixFiles = false
doctrine.generate_models_options.classPrefix = "Application_Model_" 
```

这在 Bootstrap.php

```
public function _initDoctrine()
{
    $doctrineConfig = $this->getOption('doctrine');
    $manager = Doctrine_Manager::getInstance();
    $manager->setAttribute(Doctrine_Core::ATTR_AUTO_ACCESOR_OVERRIDE, true);
    $conn = Doctrine_Manager::connection($doctrineConfig['dns'], 'doctrine');
    $conn->setAttribute(Doctrine_Core::ATTR_USE_NATIVE_ENUM, true);
    return $conn;
} 
```

之后，我这边就不想工作了。它给了我这个错误：

```
( ! ) Fatal error: Uncaught exception 'Zend_Config_Exception' with message 'syntax    error, unexpected $end, expecting TC_DOLLAR_CURLY or TC_QUOTED_STRING or '"' in C:\projects\translators\library\Zend\Config\Ini.php on line 182
( ! ) Zend_Config_Exception: syntax error, unexpected $end, expecting TC_DOLLAR_CURLY or TC_QUOTED_STRING or '"' in C:\projects\translators\application/configs/application.ini on line 41 in C:\projects\translators\library\Zend\Config\Ini.php on line 182
Call Stack
#   Time    Memory  Function    Location
1   0.0008  329544  {main}( )   ..\index.php:0
2   0.0033  336296  Zend_Application->__construct( )    ..\index.php:24
3   0.0066  350080  Zend_Application->_loadConfig( )    ..\Application.php:85
4   0.0108  376896  Zend_Config_Ini->__construct( ) ..\Application.php:386
5   0.0109  376928  Zend_Config_Ini->_loadIniFile( )    ..\Ini.php:126
6   0.0109  376928  Zend_Config_Ini->_parseIniFile( )   ..\Ini.php:202 
```

在我添加这些行之前，一方工作。

问题出在哪里？数据库：登录：root@localhost，我没有密码。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:15:31.897

这一行：

```
doctrine.yaml_schema_path = "APPLICATION_PATH "/doctrine/schema" 
```

在 APPLICATION_PATH 之前的开头有一个不需要和额外的 "

```
doctrine.yaml_schema_path = APPLICATION_PATH "/doctrine/schema" 
```

就这样。

# c# - 从文本文件中读取结果并写入最高编号的 top5

> ID：13918016
> 
> 赞同：1
> 
> 时间：2012-12-17T16:28:24.677
> 
> 标签：c#, text-files

我正在创建一个高分 top5 列表，但我不知道如何对文本文件中的数据进行排序并写出具有最高 int 的 top5。现在我有一个程序将结果写入文本文件 highscore.txt。

我希望它看起来像这样。

```
Highscore
1\. 500pts
2\. 450pts
3\. 400pts
4\. 350pts
5\. 300pts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:46:23.860

如果数据是逐行的，或者您知道文件中的字节偏移量，那么以非常节省内存的方式有效地读取整个文件并跟踪前 5 个分数是相当容易的。

假设您有一个从文件返回下一个分数的函数（通过[StreamReader](http://msdn.microsoft.com/en-us/library/6aetdk20.aspx)），那么代码将如下所示（我假设分数是整数）：

```
System.IO.StreamReader reader = new System.IO.StreamReader(fileName); // create StreamReader for the file

int maxTopScores = 5; // maximum number of scores to retrieve
List<int> topScores = new List<int>(); // create a list to store the top scores in

while (!reader.EndOfStream) // check there is still data to read (or some other check, depending on file format)
{
    int tempScore = getScore(reader); // hypothetical function that retrieves the next score (returns an int)
    for (int i = 0; i < topScores.Count; i++)
    {
        if (tempScore > topScores[i])
        {
            topScores.Insert(i, tempScore); // insert this score before the one that it is bigger than
            if (topScores.Count > maxTopScores)
                topScores.RemoveAt(topScores.Count - 1); // too many scores, remove the last (lowest)
            goto scoreAdded; // sorry about the goto, but I hate breaking through loops with state booleans
        }
    }
    // score not added yet
    if (topScores.Count < maxTopScores)
        topScores.Add(tempScore); // not enough scores, add it to the end (it's the lowest yet)

scoreAdded:
    continue; // annoyingly this is needed
} 
```

这*应该*为您提供一个int 分数[列表](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.95%29.aspx)，最高分数在索引 0 处`topScores`，并且随着您在列表中向下移动，分数会降低。它不需要太多内存，而且你很难让它崩溃。

如果需要，它只是在将分数插入列表时循环遍历他的文件`fileName`，并确保列表不包含超过`maxTopScores`分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:30:36.983

```
File.ReadLines("highscore.txt")
    .Select(line => int.Parse(line))
    .OrderByDescending(score => score)
    .Take(5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:31:55.467

最佳解决方案取决于您的平台限制和文本文件的大小。

最简单的解决方案可能是将每一行表示为一个类。从文本文件中读取行，填充分数列表，然后

```
public class Score
{
    public int Points { get; set; }
    public string Player { get; set; }
}

List<Score> top5 = (from s in allScores select s)
                   .OrderByDescending(s => s.Points)
                   .Take(5); 
```

如果您在相对于文本文件大小的内存受限的平台上，您可以使用整数计数器来跟踪当前在前 5 名中的最低高分，并使用该计数器来决定您读入的下一个高分是否从文件应添加到您手动维护的 5 个最高分的列表中。

无论哪种方式，您都可以像这样输出前 5 个：

```
for (int i = 0; i < top5.Count; i++)
{
    Score score top5[i];
    // e.g. Console.WriteLine((i + 1) + ". " + top5.Points); 
    // Optionally output player name / initials if that was in the text file
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:32:27.983

我建议改用真正的数据库，例如免费的[Sql-Server Express](http://www.microsoft.com/en-us/download/details.aspx?id=29062)。

如果你真的想使用文本文件，你可以使用这种方法：

```
IEnumerable<string> top5HighScore = File.ReadLines("highscore.txt")
    .Select(line => int.Parse(line))
    .OrderByDescending(score => score)
    .Take(5)
    .Select((score, index) => string.Format("{0}. {1}pts", index + 1, score)); 
```

现在，您可以例如使用 a`foreach`来输出字符串。

请注意，您需要添加`using System.Linq;`.

# javascript - Javascript 在 FireFox for Android 中不起作用，仅适用于我的网站

> ID：13918020
> 
> 赞同：1
> 
> 时间：2012-12-17T16:28:44.473
> 
> 标签：javascript, android, ruby-on-rails-3, firefox, heroku

（为标签汤道歉 - 我真的不确定是什么导致了我的问题！）

我有一个来自 heroku.com 的 Ruby-on-Rails 站点。在各种桌面浏览器上访问该网站时，我提供的 javascript 可以完美运行；当从我的运行 Android 版 FireFox 的手机访问该站点时，javascript 根本不起作用 - modernizr 没有触发（我可以判断，因为只有在modernizr 添加`js`类时元素才可见），确认对话框不出现，并且表单是通过普通 POST 而不是 AJAX 提交。

我在 FF for Android 中打开了 javascript，并且可以验证它是否有效；例如，StackOverflow 的问题会根据我感兴趣的标签正确突出显示或变暗。我可以从 heroku 的日志中看到（几乎......）我的手机正在请求应用程序的组合 javascript 文件。

我可以采取哪些步骤来找出问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:58:24.857

我会得到适用于 Android 的谷歌浏览器，看看它是否有同样的问题。这会告诉您这是浏览器问题还是网页中的 javascript 问题。您可能还想查看此链接：[https ://quality.mozilla.org/docs/mobile-firefox/firefox-mobile-enabling-the-error-console/](https://quality.mozilla.org/docs/mobile-firefox/firefox-mobile-enabling-the-error-console/)

# c# - 挣扎于 linq 查询以获得不同的结果

> ID：13918021
> 
> 赞同：0
> 
> 时间：2012-12-17T16:28:45.720
> 
> 标签：c#, asp.net, linq, object

我有一个发票行对象列表。

我想显示唯一发票列表，以便稍后我可以显示所选不同发票的发票行。

```
 List<Invoice> returnInvoices = (List<Invoice>)Session["Invoices"];
    var uniqueInvoices = from i in returnInvoices
                           select new
                           {
                               i.InvoiceNo,
                               i.InvoiceDate,
                               i.OrderNo,
                               i.CustomerPO,
                           };
    GridView3.DataSource = uniqueInvoices;
    GridView3.DataBind(); 
```

如何返回独特的结果`InvoiceNo`？我真的很难理解这个:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:33:13.010

真的，您不应该担心从会话变量中获取不同的发票 - 您应该首先担心为什么会有重复的发票。您在什么时候将发票添加到会话变量而不检查是否已经存在？

也就是说，您可以为每个 ID 选择一张发票，如下所示：

```
var nonUniqueInvoices = from i in returnInvoices
                       select new
                       {
                           i.InvoiceNo,
                           i.InvoiceDate,
                           i.OrderNo,
                           i.CustomerPO,
                       }; // as before
var uniqueInvoices = nonUniqueInvoices
    .GroupBy(i => i.InvoiceNo)
    .Select(g => g.First());
GridView3.Datasource = uniqueInvoices; // as before 
```

这将只选择它在列表中找到的每个 ID 的*第一张*发票；这可能不是最新的副本。

* * *

如果您*只*需要 ID，而不是每个 ID 的一项，则可以使用

```
var uniqueInvoiceIDs = returnInvoices.Select(i => i.InvoiceNo).Distinct(); 
```

这应该更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:45:16.133

建立一个自定义`EqualityComparer<Invoice>`for [`Enumerable.Distinct`](http://msdn.microsoft.com/en-us/library/bb348436.aspx)：

```
public class InvoiceComparer : IEqualityComparer<Invoice>
{
    public bool Equals(Invoice x, Invoice y)
    {
        if (x == null || y == null) return false;
        return x.InvoiceNo == y.InvoiceNo;
    }

    public int GetHashCode(Invoice obj)
    {
        if (obj == null) return int.MinValue;

        return obj.InvoiceNo.GetHashCode();
    }
} 
```

然后您可以使用`Distinct`自定义比较器获得结果：

```
List<Invoice> invoices = (List<Invoice>)Session["Invoices"];
IEnumerable<Invoice> uniqueInvoices = invoices.Distinct(new InvoiceComparer()); 
```

# checkout - Shopify - 更改结帐总额

> ID：13918023
> 
> 赞同：1
> 
> 时间：2012-12-17T16:28:58.283
> 
> 标签：checkout, shopify

任何人都知道是否可以在“购物车”屏幕上更改发布到 Shopify 的总结帐价值？

我想为某些客户类型提供批发折扣（我使用标签来区分客户类型）。我正在使用 shopify 计算来更改用户将看到的内容，但是在发送到 Shopify 时，总计没有打折，它们仍然是实际产品价格。

我似乎无法弄清楚总数的存储位置，因此我可以拦截它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:14:28.070

You cannot alter pricing on the fly. If you want to give someone a cheaper price, you will have to exchange the product(s) in the cart with the same products that have a cheaper price. In other words if you detect variant ID 12345678 in the cart with a price of $10.00 and you want to instead sell the variant ID 987654321 for $8.00 to the special customer, you'll have do that swap before allowing the completed checkout. Not the easiest thing in the Shopify world to do.

You could also just accept the $10 and send them a Thank You coupon worth $2.00 off their next purchase. Somewhat simpler approach.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:12:51.343

是的，这是可行的。为每种客户类型制作不同的变体。在最后一页，选择正确的变体。不过，这需要一些努力。

问题在于，尽管有人可能会弄清楚（尤其是如果您使用 javascript 而不是 AJAX + App Proxy）。即使这样，如果有人发现您将相同的东西列为更便宜的变体，买家也可以简单地使用 AJAX API 来选择它。现在要停止这种情况，1）您必须使用 App Proxies 进行更改并保存更改。2) 然后为订单完成创建一个 webhook 并查看更改是否匹配。如果不是，我不知道，给他发一封电子邮件，说不要淘气，订单已被取消。

基本上，这是很多工作，但它是可行的。我为类似的问题做了类似的事情。

PS如果您没有在最便宜的变体上蒙受损失，并且能够承受有人可能会找出更便宜的变体的遥远机会，那么任务就会变得简单得多。无需使用 webhook 进行验证等。只需在购物车中切换变体。简单的。

# java - Gui 和计时器问题

> ID：13918025
> 
> 赞同：-1
> 
> 时间：2012-12-17T16:29:09.040
> 
> 标签：java, swing, user-interface

上周我问了一个关于 Gui 和 Timers 的问题......经过大量研究后，我发现没有任何东西可以与我的代码一起使用......如果有人可以拿走我的代码并以某种方式操纵它来工作，那将是惊人的......我希望我的代码显示一个框，然后使其与与背景颜色相同的框重叠，然后在其旁边延迟显示一个新框

第一个代码：

```
import java.awt.Graphics;
import javax.swing.JPanel;
import java.awt.Color;

public class MovingSomething extends JPanel
{
    public void paintComponent (final Graphics g)
    {     
        int i = 20;
        int cons = 50;
        int red = 40;
        int green = 50;

        g.setColor(Color.GREEN);
        g.fillRect(50, 50, 100, 100);

        while (i >= 0)
        {
            i -= 1;

            g.setColor(Color.RED);
            g.fillRect(red, cons, 100, 100);
            red += 10;

            g.setColor(Color.GREEN);
            g.fillRect(green, cons, 100, 100);
            green += 10;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:08:30.273

只是为了您的一点帮助，我发布了这段代码。尽管请尝试从中学习并提出可能会出现的有效问题，以了解整个事情。毫无疑问，如果您稍微搜索一下，您可能会找到这个精彩的文档，它在这个示例中准确地解释了您的需求。

[每当用户单击或拖动鼠标时以编程方式重新绘制组件的代码](http://docs.oracle.com/javase/tutorial/uiswing/painting/step3.html)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MovingSquare
{
    private int x = 0;
    private int y = 100;
    private final int WIDTH = 100;
    private CustomPanel canvas;
    private Timer drawingTimer;
    private ActionListener timerAction = 
        new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            if ((x + WIDTH == 500))
            {
                x = 0;
                canvas.setValues(x, y, Color.BLUE);
            }
            else
            {
                x += WIDTH;
                canvas.setValues(x, y, Color.BLUE);
            }
        }
    };

    private void displayGUI()
    {
        JFrame frame = new JFrame("Moving Sqaure");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        canvas = new CustomPanel();
        frame.setContentPane(canvas);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        drawingTimer = new Timer(1000, timerAction);
        drawingTimer.start();
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new MovingSquare().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private final int WIDTH = 500;
    private final int HEIGHT = 500;
    private final int WSQUARE = 100;
    private final int HSQUARE = 50;

    private int x = 0;
    private int y = 100;
    private Color cSquare = Color.BLUE;

    /* 
     * This is where we updating the state
     * of different variables needed, and
     * thus calling repaint.
     */
    public void setValues(int x, int y, Color color)
    {
        cSquare = color;
        repaint(this.x, this.y, WSQUARE, HSQUARE);
        this.x = x;
        this.y = y;
        repaint(x, y, WSQUARE, HSQUARE);
    }

    /*
     * Always make this one customary
     * habbit, to override this method
     * when you extending a JComponent.
     */
    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(WIDTH, HEIGHT));
    }

    /* 
     * This is where the actual Painting
     * Portion of the whole thingy will
     * reside. Better is, not to put any
     * calculations in this part, just
     * update the state at some another
     * location and convey it to repaint
     * as needed.
     */
    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.setColor(cSquare);
        g.fillRect(x, y, WSQUARE, HSQUARE);
    }
} 
```

**最新编辑：**

请试试这个修改后的代码，CustomPanel 类和以前一样：

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class MovingSquare
{
    private int x = 0;
    private int y = 100;
    private final int WIDTH = 100;
    private final int HEIGHT = 100;
    private Random random;
    private CustomPanel canvas;
    private Timer drawingTimer;
    private ActionListener timerAction = 
        new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            /*if ((x + WIDTH > 500) && (y + HEIGHT > 500))
            {
                x = random.nextInt(500 - WIDTH);
                canvas.setValues(x, y, Color.BLUE);
            }
            else
            {
                x += WIDTH;
                canvas.setValues(x, y, Color.BLUE);
            }*/
            x = random.nextInt(500 - WIDTH);
            y = random.nextInt(500 - HEIGHT);
            canvas.setValues(x, y, new Color(
                random.nextFloat(), random.nextFloat()
                , random.nextFloat(), random.nextFloat()));
        }
    };

    public MovingSquare()
    {
        random = new Random();
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Moving Sqaure");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        canvas = new CustomPanel();
        frame.setContentPane(canvas);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);

        drawingTimer = new Timer(1000, timerAction);
        drawingTimer.start();
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new MovingSquare().displayGUI();
            }
        });
    }
} 
```

# session - 为什么 JavaMail Session 类没有构造函数？

> ID：13918026
> 
> 赞同：0
> 
> 时间：2012-12-17T16:29:08.480
> 
> 标签：session, constructor, jakarta-mail

[Session 类](http://javamail.kenai.com/nonav/javadocs/javax/mail/Session.html)没有构造函数，而是使用几个静态方法：getDefaultInstance(Properties p) ;

getDefaultInstance(Properties p, Authenticator a);

获取实例（属性 p）；

getInstance(Properties p, Authenticator a);

以上所有返回会话。

从设计的角度来看，是不是要避免调用默认的无参数构造函数？还是您不能/不想使用构造函数的其他情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:34:32.303

静态工厂方法相对于构造函数有两个关键优势：

1.  它们可以返回目标类的子类。
2.  他们不必每次都创建一个新实例。

虽然 JavaMail 没有利用第一个（事实上 Session 是最终的），但它确实使用第二个为 getDefaultInstance 返回相同的 Session 对象。虽然这样做是为了支持特定的用例，但事实证明这是一个坏主意，会绊倒很多人，如此[处](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:00:11.957

你可以在这里得到一些信息[什么是静态工厂方法？](https://stackoverflow.com/questions/929021/what-are-static-factory-methods-in-java).

在`Session`类的情况下，优点是您可以更改行为，只需将方法名称更改为`getDefaultInstance`or `getInstance`。并在需要时提供 Authentificator。

# python - 使用 pystache 渲染多个文件

> ID：13918028
> 
> 赞同：1
> 
> 时间：2012-12-17T16:29:11.400
> 
> 标签：python, pyramid

如何在 pystache 中使用部分布局？我还没有找到任何这样做的文档。我正在寻找类似的东西

布局.html

```
<html>
   <body>
     {{<body}}
  </body>
</html> 
```

索引.html

```
<section>
    {{name}}
</section> 
```

编辑：

我已经使用 node.js 完成了这项工作，并且熟悉模板语法，但我不确定如何告诉 pystache 加载这两个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:07:06.390

Pystache 只是 Mustache 的 Python 实现，因此 Mustache 文档也应该适用于 Pystache。查看手册页的[Partials 部分](http://mustache.github.com/mustache.5.html#Partials)。

`layout.mustache`

```
<html>
   <body>
     {{> body}}
  </body>
</html> 
```

`body.mustache`

```
<section>
    {{name}}
</section> 
```

* * *

这是在 Pystache 中呈现上述模板的示例（与`.mustache`文件位于同一目录）：

```
>>> import pystache
>>> renderer = pystache.Renderer()
>>> renderer.render_path('layout.mustache', {'name': 'test'})
u'<html>\r\n   <body>\r\n     <section>\r\n         test\r\n     ...' 
```

有关更多信息，请查看[Pystache 源代码](https://github.com/defunkt/pystache/blob/master/pystache/renderer.py)。

# java - 如何创建cpp文件的dll？

> ID：13918032
> 
> 赞同：0
> 
> 时间：2012-12-17T16:29:31.163
> 
> 标签：java, c++, header-files, .lib

我知道这是一个非常常见的场景。我需要从`java`编写在以下`cpp`文件中的代码中调用两种方法：

```
//test.cpp
#include <somelib.h>
#include <test.h>
method1 ("hello" , "test", "result1");
method2 ("result1", "test_Case", "result2"); 
```

以上方法的定义都写在`somelib.lib`lib文件中。在这里，我正在粘贴 `header`与`somelib.lib`.

```
//somelib.h
#define _SOME_LIB_H

void method1 (string a, string b, string c);
void method2 (string c, string e, string h); 
```

我无法粘贴`.lib`文件的内容，因为我没有找到任何`.exe`可以阅读的内容。

我应该如何创建`dll`以便我可以通过调用它来访问上述方法。

# asp.net - 在我的网页上显示窗口用户名

> ID：13918035
> 
> 赞同：1
> 
> 时间：2012-12-17T16:29:44.987
> 
> 标签：asp.net, vb.net

希望有人可以帮助我。我有一个简单的网页，我想在我的网页上显示一个 Windows 用户名。我只需要我网页上窗口中的用户名。

我曾使用一些代码来做到这一点，但没有像这样的结果

HttpContext.Current.User.Identity.Name

但它给了我空字符串

我也试过

system.envoirement.username

当我从视觉工作室运行它时它的工作，但是当我从 IIS 运行它时，这段代码没有给我正确的答案。我将使用这个网页作为我在本地网络上的 Intranet。

任何答复将不胜感激。

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:33:48.703

要获取用户名，您唯一需要做的就是使用以下代码：

```
 HttpContext.Current.User.Identity.Name 
```

如果您使用的是 Visual Studio 2012，则必须从您的项目设置中将 SSL 设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:38:39.183

以编程方式，您正在寻找继承自 System.Web.HttpContext 的 User.Identity.Name。

```
myLabel.Text = User.Identity.Name 
```

确保为某种类型的 Windows 身份验证设置 IIS（如 SLaks 所示），而不是匿名身份验证。

另外，请参阅此 SO 链接： [System.Web.HttpContext.Current.User.Identity.Name Vs System.Environment.UserName in ASP.NET](https://stackoverflow.com/questions/8841816/system-web-httpcontext-current-user-identity-name-vs-system-environment-username)

# vba - Access 2010 中的 TableDef 对象需要什么参考

> ID：13918036
> 
> 赞同：5
> 
> 时间：2012-12-17T16:29:50.117
> 
> 标签：vba, ms-access, ms-access-2010, ms-access-2003

我正在尝试在新的 Access 2010 Access 安装中使用用 Access 2003 编写的宏/.mdb 文件。打开我的文件时出现编译错误，提示`TableDef`找不到对象。当我检查我的工具->参考菜单时，我看到 Microsoft DAO 3.6 对象库可用，这还不够吗？还是需要其他东西`TableDef`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T17:52:52.860

Access 2007 和 2010 的 DAO 库是`Microsoft Office x.x Access Database Engine Object Library`，不是`Microsoft DAO 3.6 Object Library`。

# php - 花费粉丝页面的访问令牌

> ID：13918041
> 
> 赞同：2
> 
> 时间：2012-12-17T16:30:19.433
> 
> 标签：php, facebook, facebook-graph-api

我搜索了 2 天关于我的问题找到了很多解决方案，但没有一个对我有用。我想制作一个 facebook 应用程序，我将从 cronjob 访问一次 20 分钟。这个应用程序应该在我的页面上发布一张带有相册描述的照片。问题是令牌访问过期......所以代码......

```
//connect to api
$facebook = new Facebook(array(
          'appId'  => APP_ID,
          'secret' => APP_SECRET
        ));

//get the page token
$page_id = 222506244512259;
$page_info = $facebook->api("/$page_id?fields=access_token");

$page_info['access_token']; //so if i use this token is ok but it expires in 2 hours

//now we try to use something else to extend the time

$token_url="https://graph.facebook.com/oauth/access_token?client_id=".APP_ID."&client_secret=".APP_SECRET."&grant_type=fb_exchange_token&fb_exchange_token=".$facebook->getAccessToken();

//so if i use this formula i will receive a token that never expires, is ok but if I try to use the acces token for posting it doesn work is not valid

$response = file_get_contents($token_url);
$params = null;
parse_str($response, $params);
$page_info['access_token'] = $params['access_token'];

//and this is the rest code for posting

$image['file'] = 'images/rezultate/'.$link;
$args = array( 'access_token' => $page_info['access_token'], 'message' => ':-) <3', 'no_story' => 0);
$args['image'] = '@' . $image['file'];
$target_url = "https://graph.facebook.com/356048711158011/photos";

$ch = curl_init(); 
curl_setopt ($ch,CURLOPT_URL,$target_url); 
curl_setopt ($ch, CURLOPT_POST, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER,1); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
curl_exec($ch); 
curl_close ($ch); 
```

我更新了代码但仍然无法正常工作，也许你有什么问题......

```
define('TITLU', 'Postare automată'); //titlu aplicatie
define('APP_ID',123096994520827); //id aplicatie
define('APP_SECRET', '25dedb6a969e9bd934e1ea9f16944a83'); //secret aplicatie
define('TABEL', 'postareautomata'); //numar random maxim

//start facebook
$facebook = new Facebook(array(
      'appId'  => APP_ID,
      'secret' => APP_SECRET
));

//get page id and 2 hour page token
$page_id = 222506244512259;
$page_info = $facebook->api("/$page_id?fields=access_token");
//access token 2 hours
$page_info['access_token'];

//here i get my account but for nothing
$acc = $facebook->api("/100001036884257/accounts");
//echo var_export($acc, true);

//here i get the long token it returns a code value but when i used down don`t work
$longtoken = 'https://graph.facebook.com/oauth/access_token?client_id='.APP_ID.'&client_secret='.APP_SECRET.'&grant_type=fb_exchange_token&fb_exchange_token='.$facebook->getAccessToken();     
$response = file_get_contents($longtoken);
$params = null;
parse_str($response, $params);
$longtoken = $params['access_token'];

echo"Acces Token short: ".$page_info['access_token'];
echo"<br />Acces Token long: ".$longtoken;

//here i get my folder picture and pictures
$a = file_get_contents('http://www.ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/postareautomata/images/rezultate/');
$dom = new DOMDocument;
$dom->loadHTML($a);
$nodes = $dom->getElementsByTagName('a');
$nrpoze = $dom->getElementsByTagName('a')->length - 1;
$picid = get_last_picture();
$link = $nodes->item($picid['id'] + 1)->getAttribute('href');
//echo "Link poza: ".$link;

if($picid['id'] + 1 <= $nrpoze) {
    $data = array(
        'link' => $link,
        'desc' => ':-) <3'
    );
    insert_picture($data);
//and here is the bog problem if i use short acces token it works for 2 hours but the long never work
    $params = array('access_token' => '$longtoken', 'message' => ':-) <3');
    $params['source'] = '@' . realpath('images/rezultate/'.$link);
    $facebook->setFileUploadSupport(true);
    $post_id = $facebook->api('/'.$page_id.'/photos','post',$params);

} 
```

**更新 3**：该应用程序运行良好，但前提是我访问它，而不是来自 cronjob，并且访问令牌是 2 个月，在 cronjob 中给出

PHP 致命错误：未捕获的 OAuthException：请求此资源需要用户访问令牌。

```
define('TITLU', 'Postare automată'); //titlu aplicatie
define('APP_ID',123096994520827); //id aplicatie
define('APP_SECRET', '25dedb6a969e9bd934e1ea9f16944a83'); //secret aplicatie
define('TABEL', 'postareautomata'); //numar random maxim

$facebook = new Facebook(array(
      'appId'  => APP_ID,
      'secret' => APP_SECRET
));

// Get User
$user = $facebook->getUser();

// ask for the extended token and get it from session ...
$facebook->setExtendedAccessToken();
$access_token = $_SESSION["fb_".APP_ID."_access_token"];
// now set it into the facebook object ....
$facebook->setAccessToken($access_token);
// now our fb object will use the new token as usual ...
$accessToken = $facebook->getAccessToken();
echo $access_token;

$params = array(
                'access_token' => 'AAABv9MChnvsBAALtC4XoywkLdGQMzmJHYbN8G2RjgZCGlzR6DnkB8X12FZCE6XIZB81KkYevIYzC2pu5UvVZBoOFvw8j0cgjLeHcwvcOpwZDZD',
                'message'=> "cron"
        );
    $post_id = $facebook->api('/'.$page_id.'/feed','post',$params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:05:10.927

使用[Access Token Tool](https://developers.facebook.com/tools/access_token/)中的[App Token](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:43:28.013

普通访问令牌在 2 小时后过期，扩展令牌有效期为 2 个月。

如果您想要扩展令牌，请执行以下操作：[How to extend access token validation since offline_access deprecation](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)

（您可以使用[Facebook 的调试工具](https://developers.facebook.com/tools/debug)来检查您的访问令牌的有效性。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:22:20.917

[在此处](https://stackoverflow.com/questions/12706228/how-do-i-get-a-page-access-token-that-does-not-expire/12706468#12706468)查看我对类似问题的回答

从开发人员页面：

> 通过使用长期用户访问令牌，查询 [User ID]/accounts 端点现在将为用户管理的页面提供**不会过期的页面****访问令牌。**

 *** * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T21:27:00.710

页面令牌的持续时间与用于获取它们的用户访问令牌一样长。你不能拥有一个无限持久的令牌。您需要能够定期更新您的令牌并处理意外过期的令牌。[去年的 FB 博客文章](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)中提供了更多信息。**

# django - 在 django 1.4 开发中使用 css

> ID：13918043
> 
> 赞同：0
> 
> 时间：2012-12-17T16:30:31.367
> 
> 标签：django, django-templates

我正在寻找一种在 django 中使用 css 文件的方法。我尝试了很多东西，我在很多论坛中搜索，但我找不到我的错误。这是我的代码：

目录结构：

```
/projecte
    manage.py
    /projecte
         settings.py
         url.py
         wsgi.py
         /static
             /css
                  estil.css
         /templates
             inici.html

    /principal
         models.py
         views.py
         forms.py 
```

网址.py

```
from django.conf.urls.static import static
from django.contrib.staticfiles.urls import staticfiles_urlpatterns 
urlpatterns = patterns('',
    url(r'^$','principal.views.inici'),
    ...
)
urlpatterns += staticfiles_urlpatterns() 
```

设置.py

```
RUTA_PROJECTE = os.path.dirname(os.path.realpath(__file__))
STATIC_ROOT = os.path.join(RUTA_PROJECTE,'static')
STATIC_URL = '/static/'

STATICFILES_DIRS = (   
os.path.join(RUTA_PROJECTE,'static'),
)

TEMPLATE_CONTEXT_PROCESSORS = ( 
    ...
'django.core.context_processors.static',    
)

INSTALLED_APPS = (    
    'django.contrib.staticfiles',   
    ...
'principal',  
) 
```

视图.py

```
def inici(request):
tracks = Track.objects.all()
#print(len(tracks))

return render_to_response('inici.html',
    {'tracks':tracks},
    context_instance = RequestContext(request)) 
```

INICI.html

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/estil.css"> 
```

当我输入样式不起作用。我没有错误，但什么也没发生。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:51:57.697

在我看来，您应该尝试使用静态模板标签。在您的 html 顶部添加以下内容：

```
{% load staticfiles %} 
```

然后你的CSS链接应该是这样的：

```
<link rel="stylesheet" type="text/css" href="{% static "css/estil.css" %}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:21:34.827

我认为加载静态文件也是如此。

问题是你把它放在一个 .py 文件中？它应该在模板中。（或者这似乎是一个打字错误）

啊，我明白了，您错过了模板的路径：

```
return render_to_response('inici.html' 
```

应该：

```
return render_to_response('/principal/inici.html' 
```

在主目录中创建路径模板

模板中的子路径再次称为主体：

```
principal/templates/principal 
```

并将您的模板（.html）放在那里

```
/projecte
    manage.py
    /projecte
         settings.py
         url.py
         wsgi.py
         /templates (dir for your project templates)
               /projecte
               /admin (e.g. if you want to override your admin templates, do it here)
    /var ( a dir used operationaly for all variable things... logs, files, db)
       /static
          /css
                 estil.css
       /media
       /logs
       /sqlite (for testing only, unless you use sqlite operational as well)
    /principal
         models.py
         views.py
         forms.py
         /templates (a dir for your application templates)
                   /principal
                             inici.html
         /media 
```

并确保他找到模板......一秒钟：

在 settings.py 中使用：

```
import os

SETTINGS_DIR = os.path.dirname(os.path.realpath(__file__))
BUILDOUT_DIR = os.path.abspath(os.path.join(SETTINGS_DIR, '..'))
STATIC_ROOT = os.path.join(BUILDOUT_DIR, 'var', 'static')
STATIC_URL = '/static_media/'
MEDIA_ROOT = os.path.join(BUILDOUT_DIR, 'var', 'media')
MEDIA_URL = '/media/'

TEMPLATE_DIRS = (
    os.path.join(SETTINGS_DIR, "templates"),
)
TEMPLATE_CONTEXT_PROCESSORS = (
 .....
    # Extra for django-staticfiles.
    'staticfiles.context_processors.static_url'
......
)

INSTALLED_APPS (
.....
    'django.contrib.staticfiles',   
    'yourProjectName',
    'yourAppName',    
    'staticfiles',
..... 
```

我会在您的 remplate (.html) 文件中添加这样的内容：

```
<link rel="stylesheet"
      href="{{ STATIC_URL }}iamapps/iamapps.css"
      type="text/css"
      media="screen, projection" /> 
```

顺便说一下，您放置模板目录的位置取决于....如果它属于您的应用程序（我猜是主要的），则在您的应用程序路径中，如果它用于整个站点（项目），则在您的站点目录中

在您看来.py 有两种方法可以做到这一点，经典方式：（例如）

```
def home(request, template='principal/home.html'):

    logger.debug("Home view called by user %s" % request.user)
    return render_to_response(template,{},context_instance=RequestContext(request)) 
```

或基于类的视图：

```
class HomeView(TemplateView):
    template_name = "principal/home.html" 
```

如果你想做得很好，在你的应用模板目录中创建一个基本模板并扩展这个，在你的 inici.html 中使用：

```
{% extends 'prinicpal/base.html' %} 
```

在这里写一个完整的教程之前......这一切都取决于你定义什么以及你把它放在哪里。您的问题不包含所有信息来准确指出代码中的错误所在。

**编辑** 添加您的信息后，我会重建您的项目，并且它适用于我的设置：具有与您在问题中给出的相同的项目结构。

```
import os

RUTA_PROJECTE = os.path.dirname(os.path.realpath(__file__))
STATIC_ROOT = os.path.join(RUTA_PROJECTE,'static')
STATIC_URL = '/static/'
BUILDOUT_DIR = os.path.abspath(os.path.join(RUTA_PROJECTE, '..'))
DEBUG = False

TEMPLATE_DIRS = (
    os.path.join(RUTA_PROJECTE, "templates"),
)

TEMPLATE_CONTEXT_PROCESSORS = ( 
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    # Extra for django-staticfiles.
    'staticfiles.context_processors.static_url',

)

INSTALLED_APPS = (    
    'django.contrib.staticfiles',   
    'principal',
    'projecte',    
    'staticfiles',
) 

ROOT_URLCONF = 'projecte.urls' 
```

**编辑**（2012 年 31 月 12 日）

并且不要忘记添加您的项目网址：

```
if settings.DEBUG:
    urlpatterns += patterns('',
        (r'', include('staticfiles.urls')),
    ) 
```

# c# - 如何编写这种格式的xml文件？

> ID：13918044
> 
> 赞同：2
> 
> 时间：2012-12-17T16:30:33.630
> 
> 标签：c#, xml

我想用 c# 编写代码，我需要这样。

```
<Email version="2.00" xmlns="http://www.portalfiscal.inf.br/nfe"> </Email> 
```

我试过这个但不准确。

```
XmlTextWriter writer = new XmlTextWriter("D:\\nefe.xml", System.Text.Encoding.UTF8);
writer.WriteStartDocument();
writer.WriteStartElement("Email");
writer.WriteString("version=2.00  xmlns=Http://www.portalfiscal.inf.br/nfe");
writer.WriteEndElement();
writer.WriteEndDocument();
writer.Close(); 
```

并输出这个代码是这样的

```
 <Email>version=2.00 xmlns=Http://www.portalfiscal.inf.br/nfe</Email> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T16:32:40.777

好吧，是的-您正在调用`WriteString`，它会写入文本内容。您的示例 XML 包含*属性*，因此您应该使用[`WriteAttributeString`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.writeattributestring.aspx)：

```
writer.WriteAttributeString("version", "2.00");
writer.WriteAttributeString("xmlns", "http://www.portalfiscal.inf.br/nfe"); 
```

你*必须*使用`XmlWriter`吗？如果*可能*的话，我个人建议使用 LINQ to XML 。它不适合编写`XmlWriter`可以轻松处理的大型文档，但是当您只是尝试创建一个中等大小的简单文档时，它会干净*得多：*

```
XNamespace ns = "http://www.portalfiscal.inf.br/nfe";
var doc = new XDocument(new XElement(ns + "Email",
                                     new XAttribute("xmlns", ns.ToString()),
                                     new XAttribute("version", "2.00")));
doc.Save("nefe.xml"); 
```

If you *do* insist on using `XmlWriter`, you should use a `using` statement to make sure the output is always closed even if an exception is thrown.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T16:32:28.993

您正在寻找的方法`XmlTextWriter`是`WriteAttributeString`

```
XmlTextWriter writer = new XmlTextWriter("D:\\nefe.xml", System.Text.Encoding.UTF8);
writer.WriteStartDocument();
writer.WriteStartElement("Email");
writer.WriteAttributeString("version","2.00");
writer.WriteAttributeString("xmlns","Http://www.portalfiscal.inf.br/nfe");
writer.WriteEndElement();
writer.WriteEndDocument();
writer.Close(); 
```

现场示例：[http ://rextester.com/EZU91552](http://rextester.com/EZU91552)

# c++ - 为指向集合的指针重载开始/结束是个好主意吗

> ID：13918046
> 
> 赞同：6
> 
> 时间：2012-12-17T16:30:36.017
> 
> 标签：c++, templates, c++11

我真的很喜欢自由`begin` `end`编写更通用的算法和数据结构的新概念。目前，有时我必须区分调用`begin(range)`和`begin(*range)`类型何时将对集合的引用作为指针进行区分。我考虑是否总是为我自己的集合类型的指针提供开始/结束的重载是否是一个好主意。

```
struct Container {
    int values[3];
};

const int* begin(const Container& c);
const int* end(const Container& c);
const int* begin(const Container* c);
const int* end(const Container* c);

template<typename Range>
int Sum(const Range& range)
{
    return std::accumulate(begin(range), end(range), 0);
}

int main(void)
{
    Container c = {1, 2, 3};
    std::cout << Sum(c);
    std::cout << Sum(&c);
} 
```

如果这是一个好主意，为什么不为此提供一个模板：

```
template<typename Range>
auto begin(const Range* r) -> decltype(begin(*r)){
    using std::begin;
    return begin(*r);
}

template<typename Range>
auto end(const Range* r) -> decltype(end(*r)) { /* ... */ }

int main(void)
{
    Container c = {1, 2, 3};
    std::vector<int> v = {1, 2, 3}
    std::cout << Sum(c);
    std::cout << Sum(&c);
    std::cout << Sum(v);
    std::cout << Sum(&v);
} 
```

如果这是一个好主意，为什么标准库不定义它？

**我的问题是**`template<typename R> auto begin(const R* r)`：模板有什么问题吗？是否存在由于某种原因而失败的情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:47:33.677

如果你这样做，你就不能再使用`std::begin()`和`std::end()`重载数组：

```
Container c[2] = { };
std::accumulate(begin(c), end(c), 0); 
```

这不应该编译，因为您不能添加`c[i]`to `0`，但它确实是因为`begin(Container*)`选择了重载而不是通用重载`std::begin(T (&)[N])`。

再举一个例子：

```
Container c[2] = { };
auto dist = std::distance(begin(c), end(c)); 
```

这应该设置`dist=2`，因为数组有两个元素，但你得到的`dist=3`是因为`end(*c) - begin(*c)`等于 3。

# django - 对本地人使用重定向

> ID：13918050
> 
> 赞同：0
> 
> 时间：2012-12-17T16:30:52.427
> 
> 标签：django, django-templates, django-views

我正在尝试使用 django.form 重定向在进程之后重定向到页面，但将变量发送到要呈现的页面。

代码是：

```
...
if form.is_valid():
            form.save()
            confirmation_message = "Coworker information updated successfully!"
            coworkers = Coworkers.objects.all()
            return redirect('/coworkers/', locals())
... 
```

在我的 html 中应该是：

```
{% extends 'base/base.html' %}

{% block content %}

    <a href="add_coworker">Add Coworker</a>
    <br/><br/>
    {% if confirmation_message %}
        {{ confirmation_message }}
        <br/><br/>
    {% endif %}

    {% for coworker in coworkers %}
        <a href="{{ coworker.id }}">{{ coworker.first_name|capfirst }} {{ coworker.last_name|capfirst }}</a></br>
    {% endfor %}

{% endblock%} 
```

由于 url “/coworkers/” 调用的另一个视图，变量“coworkers”正在工作。但是这个视图中的变量“confirmation_message”和“coworkers”不起作用。

使用 django 重定向时不能使用“locals()”吗？

我怎么能解决这个问题？

在此先感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:02:03.423

人们似乎对重定向有很多概念上的麻烦：您不是第一个提出类似问题的人。

当你重定向时，你是在告诉用户的浏览器请求一个新的 URL。就这样。问你在问什么根本没有意义。您可以发送到重定向调用的唯一内容是 URL 中的参数。

对于其他任何事情，您都需要将其存储在某个地方——这就是[会话](https://docs.djangoproject.com/en/1.4/topics/http/sessions/)的用途。请注意，对于特定的消息情况，Django 有一个[消息框架](https://docs.djangoproject.com/en/1.4/ref/contrib/messages/)可以为您完成所有工作。

（顺便说一句，我绝对讨厌这种用于`locals()`将上下文发送到模板的用法。手动构建字典：输入不多，而且更明确。）

# c++ - 有没有办法从 file.obj 查看源代码？

> ID：13918052
> 
> 赞同：0
> 
> 时间：2012-12-17T16:31:02.067
> 
> 标签：c++, visual-studio

我使用 LIB 上的 /EXTRACT 语法从 file.lib 中提取了一个对象。现在有没有办法查看这个对象的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:33:11.823

源代码几乎肯定不包括在内。你能做的最好的就是反汇编/反编译。反编译远不是一门精确的科学，因此结果可能很差。

# c# - 设计模式下VS扩展和用户控件之间的通信

> ID：13918053
> 
> 赞同：2
> 
> 时间：2012-12-17T16:31:04.917
> 
> 标签：c#, visual-studio-2010, wpf-controls, design-time, extensibility

我正在编写一个 Visual Studio 扩展以及一个将包含在 VSIX 包中的 WPF 用户控件库。我有一个有趣的需求，涉及在设计模式下向我的用户控件提供数据。我正在寻找一种方法让我的用户控件访问在我的`Microsoft.VisualStudio.Shell.Package`班级中初始化的资源。

我最初尝试使用单例类来共享资源。显然，这不起作用，因为 VS 包和设计时用户控件在不同的应用程序域中运行。我的下一个想法是使用 IPC（例如内存映射文件）来共享数据。如果可能的话，我想避免这种情况。

我应该提到我的用户控件具有`PropertyValueEditor`用于某些属性的自定义类，我的最终目标是根据我的 VS 包中包含的信息修改这些的 WPF 数据模板。

无论如何，我的问题是： **在设计模式下运行时，我的用户控件有什么好的方法可以访问我的 VS 包中包含的数据吗？**

# php - PHP图像对比分析

> ID：13918057
> 
> 赞同：1
> 
> 时间：2012-12-17T16:31:25.663
> 
> 标签：php, image-processing, imagemagick

我正在寻找存储 100 万张图像的指纹/图像，以便在上传时将拍摄图像与数据库中其他匹配项的相似程度的百分比。类似于 [http://www.tineye.com/](http://www.tineye.com/)和[http://images.google.com/](http://images.google.com/)但针对我自己的个人网站。我不想使用他们的提交过程将图像提交给 tineye。

应该保存哪些信息？

我应该如何保存它？

有什么好的 PHP 库可以满足我的需求吗？

我想只保留 PHP，但我认为处理能力可能需要由应用程序外包，然后 PHP 可以处理输出。我正在运行 Debian Linux。

对于存储，我打算只将信息存储在 MySQL 中，但我认为考虑到 100 万张图像，它可能效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:36:18.580

我认为使用 GD、ImageMagic 并且使用一系列 API 会很好。由于只有您提出建议，因此 API 问题并不是最重要的；API 将用于更大的应用程序；

例子

```
Uploaded Image
Image information submits to Database and Image is deleted from Server and Stored in the CDN
Image information to database

Size
Dimensions
Timestamp
Uploader
Type of Image
Image Category
Image Tags
Image Description 
```

然后，您可以 cron 处理任务来扫描图像以获取图像上的大部分颜色。图像的形状。大多数带有文字的图像。什么文字。然后，您可以使用这些 Id 作为数字来构建库和匹配标签。这将是模式。您可以扫描相同的图像和匹配模式..您可以更深入，但您也可能会反对 Google/IBM..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T22:19:51.243

我决定采用这个 PHP 解决方案：

[http://www.pureftpd.org/project/libpuzzle](http://www.pureftpd.org/project/libpuzzle)

尽管它有点过时并且不能很好地处理裁剪的图像，但它能够识别小的编辑、颜色变化和一些调整大小。它还附带了示例 PHP 代码（尽管有问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T17:41:38.217

如果您正在寻找“感知哈希”，您还可以查看：

[http://phash.org/](http://phash.org/)

他们也提供了一个 php 扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:34:10.873

这种分析是通过使用复杂的算法来完成的，比如

[http://en.wikipedia.org/wiki/Scale-invariant_feature_transform](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)

这个是受版权保护的，但有源代码的实现，可在网上获得。

# https - 使用 IIS 7.5 的特定页面的 HTTPS URL 重写规则

> ID：13918058
> 
> 赞同：5
> 
> 时间：2012-12-17T16:31:28.277
> 
> 标签：https, url-rewriting, iis-7.5

我正在尝试在 IIS 7.5 中重写 URL，以重定向到 HTTPS 以获得“单页”。域的其余部分应保持 HTTP。

为此，我正在编辑我的 Web.config 文件。有人可以告诉我我在以下规则中做错了什么：

```
<system.webServer>
    <rewrite>
        <rules>
            <rule name="SpecificRedirect" stopProcessing="true">
                <match url="^register.aspx$" />
                <action type="Redirect" url="https://mail.domain.org/register.aspx" />
            </rule>
        </rules>
    </rewrite>
  </system.webServer> 
```

下面是我的 URL 重写模块在 IIS 7.5 中的样子

![在此处输入图像描述](../Images/a86a2aa5257cad8deff1643465272ffb.png)

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:30:48.993

我认为您非常接近，但是您的重定向会导致无限循环。尝试这个：

```
<rule name="SpecificRedirect" stopProcessing="true">
    <match url="^register.aspx$" />
    <conditions>
        <add input="{HTTPS}" pattern="^off$" />
    </conditions>
    <action type="Redirect" url="https://mail.domain.org/register.aspx" />
</rule> 
```

如果您必须处理多个域，请告诉我，那么规则将需要更复杂的重写 url。

**编辑：**显然我们需要重定向而不是重写:)

# .net - 属性集合与存储库方法 (.NET)

> ID：13918063
> 
> 赞同：0
> 
> 时间：2012-12-17T16:31:55.517
> 
> 标签：.net, entity-framework, automapper, repository-pattern

我想知道我应该在哪里定义子集合的检索。

我正在使用 automapper 将我的 EF 实体映射到我的存储库中的所有业务类。

**场景：** 我有一个 BookshelfRepository。如果我有一个具有属性的书架业务类：颜色、品牌等。在数据库中，我还有一个书架表，其中一个书架可以有多本书。

**我应该：** a) 在我的 Bookshelf 类中创建一个名为 GetAllBooks() 的方法 [即。显然只适用于那个书架] b) 为我的书创建一个新的存储库并创建一个名为 GetBooksByBookshelf() c) 其他...

基本上是想弄清楚我在哪里检索我的书。在 Bookshelf 类或 Books 存储库中。

欢呼队友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:44:27.400

我认为您正在寻找的答案很大程度上取决于您计划如何加载和使用数据。也就是说，如果你加载一个书架实体，它不应该加载一个 Collection of books 吗？你的书知道它们所属的书架吗？仔细考虑您计划使用数据的一些方式应该有助于您在逻辑上将方法放置在正确的位置，并确定您希望在哪个对象上获得这些属性。像这样的问题：

bookshelf(ves) 是一本书的属性，我在看某本书时想知道它吗？书籍是否属于多个书架？

# ftp - 读取 FTP 上传超时

> ID：13918064
> 
> 赞同：0
> 
> 时间：2012-12-17T16:32:00.760
> 
> 标签：ftp

每次我尝试使用任何 ftp 客户端上传网站时，都会出现读取超时错误。该文件被复制到服务器上，但它的大小为 0kb。我在网上搜索了所有东西，并尝试了几件事；被动模式，禁用防火墙，进行跟踪路由测试以查看防火墙是否阻止任何端口......但我收到相同的错误读取超时。

我昨天和技术支持聊天，技术人员告诉我，我的频道有 98% 的饱和度（我什至不知道这是什么意思，但我很高兴知道），然后让我打电话给下一个天，因为他无法直接处理这个问题。我今天给他们打了两次电话，他们做了同样的测试，他们没有发现任何问题！！这个错误现在让我发疯了五天，如果您已经尝试过或者有任何建议，请提供帮助！

（是的还有一件事；这发生在 Mac OsX（SL）上，在 Windows 上一切正常。即使在我安装了 OsX 之后，我也得到了同样的结果。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:58:13.210

最后，问题来自我的互联网连接。我的互联网提供商重置了我的连接，现在一切正常。

# php - PHP 查询加载太慢。如何加快速度？

> ID：13918066
> 
> 赞同：0
> 
> 时间：2012-12-17T16:32:12.553
> 
> 标签：php, mysql

有谁知道编写以下内容的更有效方法。我现在的加载时间超过一分钟。这是我在更长的代码集之后想出的。

```
$max = $i + 25;
while ($i < $max)
  {
    $memberno = $memberid;
    if($pulledid!=$memberid)
      {
        $pulledid = mysql_result($result99,$i,"id_member");
        $sql_statement = "Select vinyl_fortrade.ImageID,vinyl_fortrade.MemberID from vinyl_fortrade where exists (Select ImageID from vinyl_wanted WHERE MemberID = $memberno AND vinyl_wanted.ImageID = vinyl_fortrade.ImageID) AND vinyl_fortrade.MemberID=$pulledid";
        $result=mysql_query($sql_statement)or die(mysql_error());    
        $num=mysql_numrows($result);
        if($num>0)
          {
            $sql_statement2 = "Select vinyl_wanted.ImageID, vinyl_wanted.MemberID from vinyl_wanted where exists (Select ImageID from vinyl_fortrade WHERE MemberID = $memberno AND vinyl_wanted.ImageID = vinyl_fortrade.ImageID) AND vinyl_wanted.MemberID=$pulledid";
            $result2=mysql_query($sql_statement2)or die(mysql_error());                
            $num2=mysql_numrows($result2);
            $membername = mysql_result($result99,$i,"smf_members.member_name");
            $userid2 = mysql_result($result99,$i,"smf_members.id_member");
            if ($num2 > 0)
              {
                $lastlogged = mysql_result($result99,$i,"smf_members.last_login");
                echo '<td><a href="http://vinylmationconnection.com/forum/index.php?action=pm;sa=send;    u='.$userid.'"style="color: #FFF">'.$membername.'</a><br>Last Logged In:<br>';
                echo date('Y-m-d', $lastlogged);
                echo ':</td>';
                echo '<td>';
                $n = 0;
                $m = 0;
                while ($n < $num)
                  {
                    $title=mysql_result($result,$n,"vinyl_fortrade.ImageID");
                    $sql_statementj = "Select * from vinyl_figures WHERE ImageID = '$title'";
                    $resultj=mysql_query($sql_statementj)or die(mysql_error());  
                    $seriess=mysql_result($resultj,0,"vinyl_figures.Series");
                    echo '<img  src="http://vinylmationconnection.com/images/p'.$seriess.'/'.$title.'.jpg">';
                    $n++;
                    if($n%4=="0")
                      echo "<br>";
                  }
                echo '</td><td>';
                while ($m < $num2)
                  {
                    $title=mysql_result($result2,$m,"vinyl_wanted.ImageID");
                    $sql_statementj = "Select Series from vinyl_figures WHERE ImageID = '$title'";
                    $resultj=mysql_query($sql_statementj)or die(mysql_error());  
                    $seriess=mysql_result($resultj,0,"vinyl_figures.Series");
                    echo '<img src="http://vinylmationconnection.com/images/p'.$seriess.'/'.$title.'.jpg">';
                    $m++;
                    if($m%4=="0")
                      echo "<br>";
                  }                              
                echo '</td> </tr>';
              }
          }
      }
    $i++;
  } 
```

请让我知道这些代码是否可以自我解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:37:37.380

```
$sql_statementj = "Select * from vinyl_figures WHERE ImageID = '$title'";
$sql_statementj = "Select Series from vinyl_figures WHERE ImageID = '$title'"; 
```

在这两个语句中，如果我的代码正确，您似乎会对同一个文件发出 mysql 请求。在循环之外提出这些请求，这应该做一些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:36:49.547

编写一个存储过程（也许一个简单的查询/视图就足够了）来完成所有这些查询并观察数据库索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:38:17.053

WHERE EXISTS 子句几乎可以肯定是罪魁祸首，应该对其进行重构。慢查询的一般准则...

1.  使用 EXPLAIN SELECT 查看查询实际在做什么
2.  为 WHERE、JOIN、ORDER、GROUP 中使用的所有列添加索引
3.  避免 SELECT * 而是只选择您需要的列
4.  将 LIMIT 添加到不需要完整表扫描的所有查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:46:59.600

除了已经提到的答案，我建议您在将页面发送到浏览器之前使用 mod_deflate 压缩页面，并且应该会产生一些效果。如果您在本地环境中，也可能由于机器负载而导致执行缓慢。

而且我认为`LIMIT $i, 25` 在查询中使用可能会丢失第一个，我认为它会产生相同的效果。当您使用简单的 foreach 获取所有内容并完成时，我建议您在单个查询中尽可能多地推送，这会增加负载，但应该会减少加载时间。

我不是 100% 的专业人士，但我想提供帮助。

# c++ - `std::rel_ops` 示例中的 Bool 类型转换？

> ID：13918068
> 
> 赞同：3
> 
> 时间：2012-12-17T16:32:19.543
> 
> 标签：c++, c++11

考虑`std::rel_ops`这里的例子：

[http://en.cppreference.com/w/cpp/utility/rel_ops/operator_cmp](http://en.cppreference.com/w/cpp/utility/rel_ops/operator_cmp)

```
#include <iostream>
#include <utility>

struct Foo {
    int n;
};

bool operator==(const Foo& lhs, const Foo& rhs)
{
    return lhs.n == rhs.n;
}

bool operator<(const Foo& lhs, const Foo& rhs)
{
    return lhs.n < rhs.n;
}

int main()
{
    Foo f1 = {1};
    Foo f2 = {2};
    using namespace std::rel_ops;

    std::cout << std::boolalpha;
    std::cout << "not equal?     : " << (bool) (f1 != f2) << '\n';
    std::cout << "greater?       : " << (bool) (f1 > f2) << '\n';
    std::cout << "less equal?    : " << (bool) (f1 <= f2) << '\n';
    std::cout << "greater equal? : " << (bool) (f1 >= f2) << '\n';
} 
```

`(bool)`演员表的目的是什么？不是`(f1 != f2)`已经类型了`bool`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:34:23.383

是的，这里的演员阵容`bool`是多余的。我冒昧地将它们从文档中删除。

# java - 简单的命令行 xquery

> ID：13918076
> 
> 赞同：3
> 
> 时间：2012-12-17T16:32:38.753
> 
> 标签：java, xml, linux, bash, xquery

我正在尝试找到一个简单的 cli 命令来从 linux shell 执行 xquery。我想要的是避免我需要安装的外部依赖项（使用fedora 18）。

我已经找到的是可以通过 yum 安装的 saxon 和 xqilla。如果没有别的，我可以使用它们，但它们不在基本系统中。我希望找到类似于用于进行 xslt 处理的 java 内部类（com.sun.org.apache.xalan.internal.xsltc.cmdline.Transform）。

我的另一个想法是使用 XSLT 将文档转换为所需的 xquery 结果，但单行是不可能的。

我可以用 xqilla 做什么的例子（但正在寻找另一个实用程序）：

```
$ xqilla -i TEST-com.ecample.testcase.MyTestCase.xml <(echo '/testsuite/@failures + /testsuite/@errors') 
```

更新：不完全是我遇到的问题，但我决定默认安装 perl XML::Twig，让我可以灵活地使用 perl 实现复杂的逻辑。这也带来了不错的速度提升，因为不需要为每个 XML 文件派生一个进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:35:57.593

**编辑**：我刚刚注意到你说你已经找到了撒克逊人。无论如何，我都会留下我的答案，以防万一该示例对将来的任何人有所帮助。

* * *

您可以从命令行运行[Saxon](http://saxon.sourceforge.net/) (XQuery)。您可以通过指向具有 XPath/XQuery 的文件来执行此操作，`-q`或者您可以直接使用`-qs`.

下面是一个`-qs`用于处理简单 XPath 的示例：

**输入.xml**

```
<a>
  <b id="x"/>
  <b id="z"/>
  <b id="x"/>
</a> 
```

Saxon 命令行（我使用 Saxon9-HE 进行测试）

```
java -cp "saxon9he.jar" net.sf.saxon.Query -s:"input.xml" -qs:"/a/b[@id='x']" -o:"results.xml" 
```

**结果.xml**

```
<b id="x"/><b id="x"/> 
```

注意：我可以通过将 更改为以下内容来使我的输出格式`-qs`正确：

```
-qs:"<results>{/a/b[@id='x']}</results>" 
```

有关更多命令行选项，请查看此处： http: [//www.saxonica.com/html/documentation/using-xquery/commandline.html](http://www.saxonica.com/html/documentation/using-xquery/commandline.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:21:27.137

对于 XQuery 1，有我的[Xidel](http://videlibri.sourceforge.net/xidel.html)。像这样工作：

```
 $ xidel TEST-com.ecample.testcase.MyTestCase.xml -e 'xquery version "1.0"; /testsuite/@failures + /testsuite/@errors' 
```

完全无依赖，但不在基础系统中，不在 java 中，而且它不支持 XML 模式......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:22:32.013

JDK 中没有捆绑 XQuery 处理器，因此您必须单独安装一个。目前尚不清楚为什么您认为这是一个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T17:12:43.880

不幸的是（或者如果您不喜欢 XML，幸运的是），如果在 Unix 和 Linux 系统中非常零星地支持 XML。

您可以安装广受好评的[XML Starlet 系统](http://xmlstar.sourceforge.net/)

否则，搜索 xmllint 总是有帮助的。但请注意，不同的基于操作系统的版本似乎具有不同的功能集，其中一些超出了 linting XML 的范围。但是，它并不总是安装在基本 PATH 中可见，所以

```
 find / -name 'xmllint*' -ls 2>/dev/null  > xmllintList.txt & 
```

可能，经过一个多小时的搜索，您可能会发现您不知道自己拥有的整个 xml 工具目录！

IHTH。

# css - html5 导航中的中心徽标

> ID：13918078
> 
> 赞同：0
> 
> 时间：2012-12-17T16:32:43.897
> 
> 标签：css, html

所以我试图在 html5 的导航部分中将徽标居中。

```
 <header>
    <div class="container1">
       <nav>
           <div class="logo">Logo</div>
       </nav>
    </div>
  </header> 
```

​<br> [http://jsfiddle.net/RbctB/](http://jsfiddle.net/RbctB/)

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:36:52.700

删除您的`float: left;`并添加`margin: 0 auto;`

[http://jsfiddle.net/RbctB/2/](http://jsfiddle.net/RbctB/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:35:44.730

您不能使用`float:left`并期望能够将其居中。

到目前为止，将元素水平居中的最简单方法是使用其容器`text-align:center`并使用受影响的元素`display:inline-block`（并且可以选择`text-align:left`覆盖容器的文本对齐方式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:26:37.983

正如上面的家伙所说，这只是另一种说法。

```
.logo {
    float: left; /*remove */
    margin: 0 auto; /*add */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:37:19.240

添加和删`margin:0 auto;`​​除.`.logo``float:left`

此外，您没有`nav`正确使用该元素，因为它应该包含当前不包含的导航。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T16:39:31.617

**第一的：**

擦除这些行：

```
margin-left: auto;
margin-right: auto; 
```

以您的**#container1**样式。

**第二：**

在您的**.logo**样式中，擦除：

```
float: left; 
```

并添加：

```
margin: 0 auto; 
```

我可以建议您删除所有不用于澄清代码的样式吗？

希望这能解决您的问题。

# css - 涵盖每一个 css 样式排列和组合

> ID：13918079
> 
> 赞同：0
> 
> 时间：2012-12-17T16:32:50.420
> 
> 标签：css, unit-testing, wordpress-theming, drupal-theming, theming

我正在构建一个用于分发的网站主题，我刚刚上传了一个单元测试来看看事情的样子。其中一件事是嵌套的块引用，在我的情况下，它在底部给了我一个非常大的边距。我可以通过造型来解决这个问题

```
blockquote blockquote {
margin-bottom:0;
} 
```

......所以我解决了这个问题，但它带来了另一个......我意识到如果有人要在第二个块引用之后添加一些内容，那么边距就会消失。我确信我可以设置这个样式，但是如果有人将标题、pre、代码等放在同一位置怎么办？...而且这种情况不仅仅体现在块引用中......或者只是在评论中。

我的问题是：在为分发构建主题时，主题开发人员是否为每一个排列和组合设置样式，或者这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:57:42.060

在这个特定的例子中，听起来你为 blockquote 添加了一个填充（如果你还有背景颜色或边框，它可能看起来更好）并且因为 blockquote 默认有一个 margin-bottom，padding-bottom 和 margin-底部是加在一起的。

我目前最喜欢的处理方式是这样的：

使用萨斯：

```
p, blockquote, .other-margined-elements {
    margin: 1rem 0;

    &:first-child {
        margin-top: 0;
    }

    &:last-child {
        margin-bottom: 0;
    }
} 
```

生成的 CSS：

```
p, blockquote, .other-margined-elements {
    margin: 1em 0;
}

p:first-child, blockquote:first-child, .other-margined-elements:first-child {
    margin-top: 0;
}

p:last-child, blockquote:last-child, .other-margined-elements:last-child {
    margin-bottom: 0;
} 
```

使用此方法，只需确定要添加到列表中的元素即可。我当前的列表是这样的：h1、h2、h3、h4、h5、h6、p、ul、ol、dl、table、blockquote、div、section、article、aside、fieldset

如果您觉得前面的代码有点过火，还有其他方法可以做到这一点：

```
blockquote > :first-child {
    margin-top: 0;
}

blockquote > :last-child {
    margin-bottom: 0;
} 
```

多亏了`:first-child`和`:last-child`psuedo 类，没有必要写出每一个组合。

# asp.net - 使用 ID 而不是索引值引用 ASP.Net 命令按钮

> ID：13918081
> 
> 赞同：0
> 
> 时间：2012-12-17T16:32:54.380
> 
> 标签：asp.net, vb.net, button, indexing, code-behind

我们在 Web 表单的 GridView 中有一个 ASP.Net 命令按钮。

我们使用 .Columns(index value) 引用具有此编码的按钮：

```
GridViewSummary.Columns(6).Visible = False 
```

是否可以使用按钮的 ID 来引用该按钮，以便代码更易于阅读？也许是这样的：

```
GridViewSummary.Columns("ButtonSelect").Visible = False 
```

下面是一些显示按钮 ID 的标记：

```
<asp:TemplateField ShowHeader="False">
                <ItemTemplate>
                    <asp:Button 
                        ID="ButtonSelect" 
                        runat="server" 
                        CausesValidation="False" 
                        CommandName="Select" 
                        Text="Select Schedule Item Details" />
                </ItemTemplate> 
```

# javascript - 如何限制表格的可见区域并改用滚动？

> ID：13918083
> 
> 赞同：0
> 
> 时间：2012-12-17T16:32:59.047
> 
> 标签：javascript, ajax, html

我在 HTML 模板中有以下静态代码：

```
<table>
    <thead></thead>
    <tbody></tbody>
</table> 
```

根据用户交互，我使用 jQuery 和 AJAX 在表中动态放置和删除行和列。在表格下方，还有一些其他的静态内容。如果表格很长，用户必须滚动很长时间才能到达表格下方的静态内容。为了避免这种情况，一次只能显示表格的上部，并且表格应该有自己的滚动条，以便用户可以向下滚动表格或向下滚动整个页面，以便他们可以到达静态内容在桌子底下更快。

使用 HTML5 执行此操作的最佳方法是什么？我需要框架或一些特殊的 CSS 或 JavaScript 吗？非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:35:29.533

您需要将表格放在一个 div 中，并让该 div 成为滚动的部分。

给那个 div 一个固定的高度，并且`overflow: auto`（或`overflow-y: ...`）在它的 CSS 中。这将确保溢出 div 大小的表格部分是可滚动的。

见[http://jsfiddle.net/alnitak/Y7Yg3/](http://jsfiddle.net/alnitak/Y7Yg3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:42:21.903

您还可以分别为 x 轴和 y 轴设置溢出：

```
<style type="text/css">
    table td {
        border: 1px solid black;
        min-width: 50px;
        text-align: center;
    }
    div.scroll {
        float: left;
        overflow-x: hidden;
        overflow-y: scroll;
        max-height: 150px;
    }
</style>
<div class="scroll">
    <table>
        <thead></thead>
        <tbody>
            <tr><td>1</td><td>A</td></tr>
            <tr><td>2</td><td>B</td></tr>
            <tr><td>3</td><td>C</td></tr>
            <tr><td>4</td><td>D</td></tr>
            <tr><td>5</td><td>E</td></tr>
            <tr><td>6</td><td>F</td></tr>
            <tr><td>1</td><td>A</td></tr>
            <tr><td>2</td><td>B</td></tr>
            <tr><td>3</td><td>C</td></tr>
            <tr><td>4</td><td>D</td></tr>
            <tr><td>5</td><td>E</td></tr>
            <tr><td>6</td><td>F</td></tr>
            <tr><td>1</td><td>A</td></tr>
            <tr><td>2</td><td>B</td></tr>
            <tr><td>3</td><td>C</td></tr>
            <tr><td>4</td><td>D</td></tr>
            <tr><td>5</td><td>E</td></tr>
            <tr><td>6</td><td>F</td></tr>
        </tbody>
    </table>
</div> 
```

​另见：http: [//jsfiddle.net/wcwLT/](http://jsfiddle.net/wcwLT/)

# php - curl_multi_exec - 完成后停止所有调用

> ID：13918087
> 
> 赞同：0
> 
> 时间：2012-12-17T16:33:15.397
> 
> 标签：php, curl-multi

成功完成后，是否可以取消 curl_multi 中的所有正在运行的调用？似乎 curl_multi 等到所有进程都完成后才完成脚本，但这可能是我自己的看法。我正在尝试调用具有许多打开连接的单个 URL。URL 将尽可能快地处理请求，当第一个请求返回时，我想关闭剩余的连接并继续调用脚本的其余部分。

```
$outArr = array();
$master = curl_multi_init();
$curl_arr = array();

$url = (isset($_SERVER['HTTPS']) && ($_SERVER['HTTPS'] == 'on') ? 'https' : 'http').'://'.$_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF']);
$std_options = array(CURLOPT_RETURNTRANSFER => true,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_MAXREDIRS => 5);

for ($i = 0; $i < 30; $i++) {
    //set custom URL so we can see which one completed.
    $std_options[CURLOPT_URL] = $url.'/sub_proc.php?somearg='.$somearg.'&tlimit='.$tlimit.'&i='.$i;

    $ch = curl_init();
    curl_setopt_array($ch,$std_options);
    curl_multi_add_handle($master, $ch);
}

do {
    while(($execrun = curl_multi_exec($master, $running)) == CURLM_CALL_MULTI_PERFORM);
    if($execrun != CURLM_OK)
        break;
    // a request was just completed -- find out which one
    while($done = curl_multi_info_read($master)) {
        $info = curl_getinfo($done['handle']);
        if ($info['http_code'] == 200)  {
            $output = curl_multi_getcontent($done['handle']);

            // request successful.  process output using the callback function.
            $out = json_decode($output);
            $outArr = $out['board'];
        $running = false;
        break;
        //I want the code above to break all processing requests and 
        //continue with the script outside of this loop.
        } else {
            // request failed.  add error handling.
        }
    }
} while ($running);
curl_multi_close($master);

//does not execute until all requests are complete,
//causing timeouts when one failed request takes > 30 seconds
print_r($outArr); 
```

# vbscript - VBScript，将文本文件加载到数组并分配给变量

> ID：13918090
> 
> 赞同：1
> 
> 时间：2012-12-17T16:33:32.353
> 
> 标签：vbscript

嘿，脚本天才们，请注意我还在学习 VBScript，我已经做好了充分的准备。所以，只要我有方向，我会研究你要求我做的任何事情。

我搜索了建议的问题，发现一个可能是我需要的，但它已“关闭”，没有链接去寻找另一个喜欢的问题。

这是我想要完成的。我需要获取一个文本文件并将数据加载到一个数组中（如果这是正确的）。此数据包含 PC 名称、PC 位置。它将携带大约 2000 条记录（或行），我需要将每条记录加载到一个变量中。PC 名称将没有空格，但 PC 位置可以。像例子：

```
Laptop, my bathroom 
Desktop, kitchen 
```

我想将此信息加载到我可以使用`WshShell.SendKeys`并传递关键命令的变量中。我已经能够使它“有点”处理两个文本文件并将该数据发送到 Excel 工作表（因为它可以使用制表符并输入）。但不是一对一匹配，而是一对一匹配。因此，如果 PC.txt 有 10 个 pc 名称，而 Location.txt 上有 10 个位置（按行顺序匹配每个文件），我的脚本会给我 100 个结果，不是 10\. 所以，我知道我做错了，需要一些指导。这是我失败的尝试，我已经准备好迎接笑声了。。

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile1 = objFSO.OpenTextFile("C:\pc.txt", ForReading1)
Set objFile = objFSO.OpenTextFile("C:\Location.txt", ForReading)

'test is my excel file title test, this will allow tabs and enters
WshShell.AppActivate "test"

Const ForReading1 = 1
Dim arrFileLines1()
i = 0
Do Until objFile1.AtEndOfStream
  Redim Preserve arrFileLines1(i)
  arrFileLines1(i) = objFile1.ReadLine
  i = i + 1
Loop
objFile1.Close

Const ForReading = 1
Dim arrFileLines()
i = 0
Do Until objFile.AtEndOfStream
  Redim Preserve arrFileLines(i)
  arrFileLines(i) = objFile.ReadLine
  i = i + 1
Loop
objFile.Close

For Each strLine1 in arrFileLines1
  For Each strLine in arrFileLines
    WshShell.SendKeys strLine1
    WshShell.SendKeys "{TAB}"
    WshShell.SendKeys strLine
    WshShell.SendKeys "{ENTER}"
  Next
Next 
```

我一直在研究如何根据“，”拆分这些数据，但我需要将其转换为可以使用并重复击键的变量，例如：

笔记本电脑 {TAB} 我的厨房 {ENTER} 台式机 {TAB} 浴室 {ENTER} ......等到最后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:44:48.387

我将使用单个循环和[字典](http://msdn.microsoft.com/en-us/library/x4k5wbx4%28v=vs.84%29)将两个输入文件加载到数据结构中（假设 PC 名称是唯一的）。

```
Const ForReading = 1

Set fso = CreateObject("Scripting.FileSystemObject")

Set names     = fso.OpenTextFile("C:\pc.txt", ForReading)
Set locations = fso.OpenTextFile("C:\Location.txt", ForReading)

Set computers = CreateObject("Scripting.Dictionary")

Do Until names.AtEndOfStream Or locations.AtEndOfStream
  computers.Add names.ReadLine, locations.ReadLine
Loop

names.Close
locations.Close 
```

这将创建一个包含名称/位置对的字典，可以像这样访问：

```
For Each key In computers
  WScript.Echo key & " is in " & computers(key)
Next 
```

不过，我建议避免`SendKeys`将数据传递给其他应用程序，因为至少可以说，该函数的使用往往是不稳定的。根据目标应用程序，可能会有更好的方法，例如，如果应用程序公开了一个可以从 VBScript 控制的 COM 对象。

如果目标应用程序不能 RC，那么您可能最好使用[AutoIt](http://www.autoitscript.com/site/autoit/)，正如其他人似乎已经建议的那样。

# python - python混合单双unicode转义序列

> ID：13918093
> 
> 赞同：2
> 
> 时间：2012-12-17T16:33:39.450
> 
> 标签：python, unicode

我对奇怪的转义 unicode 字符串有一些问题。我的脚本通过请求库使用 Web 服务，并且 response.text 包含以下 unicode 字符串：

```
 u'\\u003c? abc ?\\u003eDas Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von \xd6kosystemen abgeleitet.\\u003c? /abc ?\\u003e'

 **Updated** Martijn solution works with the upper one, but breaks with this one because of len="12"
 u'\\u003c?abc len="12"?\\u003eResilienz sollte als st\xe4ndiger Anpassungsprozess zwischen Systemen und der Umwelt begriffen werden.\\u003c? /abc ?\\u003e' 
```

服务器的响应如下所示：

```
\u003c? abc ?\u003eDas Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von Ökosystemen abgeleitet.\u003c?dpf /sent ?\u003e 
```

问题是双重转义的 unicode 序列，如 \u003c，\u003c 通常表示 < char。\xd6 是正确的，代表一个德语 Ö。这种双重转义完全弄乱了我的 unicode 字符串:-)

我在这篇文章中发现了一个类似的问题： [Stack Overflow - Conversion of strings like \uXXXX in python](https://stackoverflow.com/questions/2828284/conversion-of-strings-like-uxxxx-in-python)

使用 string.decode('unicode-escape') 的解决方案似乎只有在所有 unicode 序列都被转义但不能混合单双转义的情况下才有效。只需用单个转义符替换双重转义符就会给我一个损坏的 unicode 字符串。

最简单和最好的解决方案是调整服务器端的响应编码，但我无权访问......

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T16:41:51.963

我怀疑服务器正在返回 JSON 字符串。JSON 使用相同的转义序列，如果您在字符串周围添加引号，`json.loads()`则非常乐意为您解码该示例：

```
>>> txt = u'\\u003c? abc ?\\u003eDas Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von \xd6kosystemen abgeleitet.\\u003c? /abc ?\\u003e'
>>> content = txt.encode('utf8')
>>> content
'\\u003c? abc ?\\u003eDas Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von \xc3\x96kosystemen abgeleitet.\\u003c? /abc ?\\u003e'
>>> import json
>>> json.loads('"{0}"'.format(content))
u'<? abc ?>Das Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von \xd6kosystemen abgeleitet.<? /abc ?>'
>>> print json.loads('"{0}"'.format(content))
<? abc ?>Das Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von Ökosystemen abgeleitet.<? /abc ?> 
```

尝试使用`json.loads('"{0}"'.format(response.content))`来解码对 Unicode 的响应。

您的更新版本确实包含引号，有点令人烦恼，因为必须对这些引号进行转义才能在有效的 JSON 中使用。那么它可能不是 JSON，而是某种其他形式的转义；Java 和 Ruby 也使用`\uxxxx`转义。接下来我们可以尝试使用正则表达式来替换这些：

```
import re

uescapes = re.compile(r'(?<!\\)\\u[0-9a-fA-F]{4}', re.UNICODE)
def uescape_decode(match): return match.group().decode('unicode_escape')

uescapes.sub(uescape_decode, response.text) 
```

这个正则表达式会将任何`\uxxxx`匹配解码为其等效的 unicode 字符，前提是它前面没有 a `\`，它有效地转义了转义；`\\uxxxx`不会被替换。

正则表达式方法对您的两个示例进行解码（首先解码第二个）：

```
>>> print uescapes.sub(uescape_decode, txt)
<?abc len="12"?>Resilienz sollte als ständiger Anpassungsprozess zwischen Systemen und der Umwelt begriffen werden.<? /abc ?>
>>> print uescapes.sub(uescape_decode, u'\\u003c? abc ?\\u003eDas Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von \xd6kosystemen abgeleitet.\\u003c? /abc ?\\u003e')
<? abc ?>Das Modell des Adaptiven Zyklus wurde aus vergleichenden Untersuchungen zur Dynamik von Ökosystemen abgeleitet.<? /abc ?> 
```

# c++ - 为什么我不能为基类的成员赋值？

> ID：13918099
> 
> 赞同：1
> 
> 时间：2012-12-17T16:34:19.437
> 
> 标签：c++, polymorphism

我有一个`CPolygon` 从类派生的类`CElement`。[我在这里使用多态性]。

```
 class CElement : public CObject
 {
 public:
virtual ~CElement();
virtual void Draw(CDC* pDC){};
CPoint vertices[11];

 protected:

CElement();

 }; 
```

* * *

```
 class CPolygon : public CElement
 {
 public:
CPolygon(CPoint mFirstPoint,CPoint mSecondPoint);
~CPolygon(void);
 virtual void Draw(CDC* pDC);                 

 protected:
CPoint mStartPoint;
CPoint mEndPoint;
CPolygon(void);

 }; 
```

* * *

当我尝试将数组分配给`vertices`CElement 对象的成员时，出现错误：`expression must be a modifiable Lvalue`

```
 CElement* a = new CPolygon(mFirstPoint,mSecondPoint);
  a->vertices=vertices;        //here!! 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:35:59.160

因为`a->vertices`不是可修改的左值...不能在 C++ 中分配数组，只能分配特定元素或进行复制。

如果您知道大小为`11`，我会使用`std::array`（或`std::vector`，为了灵活性）而不是 C 样式数组。

# javascript - 在页面加载时显示隐藏的 div

> ID：13918101
> 
> 赞同：0
> 
> 时间：2012-12-17T16:34:22.920
> 
> 标签：javascript, jsp, struts

我的jsp中有这样的tr。

```
<tr id = "fromDate" style="display:none;"> 
```

我也有这样的选择。

```
 <select id="select2" name="dateRange1" 
               onChange="javascript:chooseDate(this.value);">
    <option value="0" <c:if test='${dateRange == 0}'> 
            selected </c:if>>Select a Date</option> 
```

select中使用的javascript函数如下。

```
function chooseDate(val) {
        if (val == "0") { 
            document.getElementById("fromDate").style.display='';
            }
        else 
        {
            document.getElementById("fromDate").style.display='none';
        }
    } 
```

因此，如果所选行不是 0，我将不会在页面中显示 tr。这工作正常。
我在 request.setAttribute() 中设置 dateRange 变量并从操作中发送它。
问题是从请求值中正确选择了该选项，但未显示 tr
我尝试在 jsp 中的表单之外像这样运行它，希望它会在页面加载之前执行，但没有发生。

```
<script language="javascript">
   chooseDate(${dateRange});
</script> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:42:24.730

尝试这个！

```
<script language="javascript">
   window.onload = function() {
      chooseDate(${dateRange});
   }
</script> 
```

# javascript - 动态表行在 DOM 中未按正确顺序显示

> ID：13918107
> 
> 赞同：0
> 
> 时间：2012-12-17T16:35:15.193
> 
> 标签：javascript, jquery, ajax, html-table

```
 success: function (data, status) {
            var header = $("#MainDiv");

            header.html(null);
            var headertemplate = $("<table class='searchlistbody'><tr></th><th>Name</th></tr>");
            header.append(headertemplate);

            $.each(data, function () {
                var template = $("<tr> <td class='campnameAltrow'><span class='searchListTitle'></span></td></tr>");

                        template.find('span.searchListTitle').attr('title', this.Title);

                // add the template to the collection
                header.append(template);
            });
            header.append("</table>");
        }, 
```

现在，当我试图在表格上设置边框时，我注意到它只在标签上应用边框，即标题（名称）。

```
 Debugging further in fire bug I saw that the DOM sequence is in this format
        <table class='searchlistbody'><tr><th>Name</th></tr></table>
        <tr> <td class='campnameAltrow'>Test</td></tr>
        <tr> <td class='campnameAltrow'>Test</td></tr>
        <tr> <td class='campnameAltrow'>Test</td></tr>
        <tr> <td class='campnameAltrow'>Test</td></tr>
        <tr> <td class='campnameAltrow'>Test</td></tr> 
```

谁能告诉我为什么在附加所有 for 循环行之前关闭表格......它是一个 AJAX 调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:54:54.257

从附加函数的文档来看：http: [//api.jquery.com/append/](http://api.jquery.com/append/)它实际上尝试使用正确的 DOM 元素

不要尝试将其用作*字符串连接*操作

而是尝试创建表格元素并分别在其中附加 TH 和 TR：

```
var table = $("<table ...></table>")
table.append("<th>...</th>")
$.each(function() {
  ...
  table.append("<tr>...</tr>")
  ...
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:52:30.850

您不能将元素添加到 dom 中。因此，您将表格添加到标题中，然后将行附加到表格中

```
 success: function (data, status) {
            var header = $("#MainDiv");

            header.html(null);
            var headertemplate = $("<table class='searchlistbody'><tr></th><th>Name</th></tr></table>");
            header.append(headertemplate);

            $.each(data, function () {
                var template = $("<tr> <td class='campnameAltrow'><span class='searchListTitle'></span></td></tr>");

                        template.find('span.searchListTitle').attr('title', this.Title);

                // add the template to the collection
                headertemplate.append(template);
            });
        }, 
```

# jquery - 如何改进我的 jQuery 显示/隐藏实现？

> ID：13918108
> 
> 赞同：2
> 
> 时间：2012-12-17T16:35:25.480
> 
> 标签：jquery, show-hide

我正在使用以下内容来显示和隐藏 div。它有效，但我不禁认为它可以更有效。在简化的示例中，我展示了 3 个国家/地区，但我的代码需要处理几十个。我对 jQuery 很陌生。有没有办法只说“单击时显示*任何*国家，并隐藏其余国家”？

的HTML

```
<div class="nav">
    <span id="France">France</span>
    <span id="Canada">Canada</span>
    <span id="Portugal">Portugal</span>
</div>

<!-- show div based on which span is clicked; hide the rest -->
<div class="content">
    <div class="France all">...</div>
    <div class="Canada all">...</div>
    <div class="Portugal all">...</div>
</div> 
```

jQuery

```
$(document).ready(function(){

    $("#France").click(function(){
            $(".all").hide();
            $(".France").show();                
    }); 

    $("#Canada").click(function(){
            $(".all").hide();
            $(".Canada").show("");
            }); 

    $("#Portugal").click(function(){
            $(".all").hide();
            $(".Portugal").show("");        
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T16:37:41.983

是的，你可以这样做：

```
$('.nav span').click(function(){
    $('.all').hide();
    $('.'+this.id).show();
}); 
```

[示范](http://jsfiddle.net/qVEAR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:42:38.437

您可以带走课程`all`并使用`.siblings().hide()`

```
$('.nav span').click(function(){
    $('.'+this.id).show("").siblings().hide("");
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:43:43.113

```
$('.nav span').on('click', function() {
    $('.content > div').eq($(this).index()).toggle().siblings().hide();
});​ 
```

[**小提琴**](http://jsfiddle.net/2mHaN/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T16:43:49.630

您可以跟踪显示的内容：

```
$(document).ready(function(){

    var $current,
        $contents = $('.content .all').hide();

    $('.nav span').click(function() {
        if ($current) {
            $current.hide();
        }
        $current = $contents.filter('.' + this.id).show();
    });
}); ​ 
```

# git - 在本地使用 Git 和组成应用程序的多个 SVN 存储库

> ID：13918112
> 
> 赞同：0
> 
> 时间：2012-12-17T16:35:36.113
> 
> 标签：git, svn, git-svn

好的，这是我的问题。我的工作使用SVN。我想在本地使用 Git。使用 git svn 看起来很简单，但我的工作有点麻烦，因为他们实际上使用了 5 个不同的 SVN 存储库，这些存储库进入一个完整的结帐。

因此，当我执行 svn up 时，它实际上是从 5 个不同的存储库中提取的。这意味着我不能简单地执行 git svn clone，因为创建整个应用程序需要这 5 个存储库中的每一个。现在，如果我有任何权力来改变这一点，我会......但与此同时，我将能够进入已签出的应用程序并执行“git init”/“git add”。等等，只是欺骗 git 认为它是一个巨大的回购？那么到commit的时候使用svn命令commit呢？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:39:56.587

git-svn 不支持这样做。您可以编写一个简单的 bash 脚本来为您执行提交/变基，但老实说，我建议您手动执行，以防在更新或提交到 SVN 存储库时出现问题。

当我遇到这个问题时，我将存储库克隆到一个目录中，然后在主项目和外部存储库之间创建符号链接。

也就是说，假设我有以下结构：

```
/main-project
  /external-repo-1
  /external-repo-2
  /external-repo-3
  ...etc 
```

我做这样的事情：

```
# Create the unified project directory
mkdir LocalProject
cd LocalProject
# Clone the main project
git svn clone svn+ssh://svnserver/main-project
# Find out where all the external repos are
cd main-project
git svn show-externals
cd -
# Clone the sub-repos
git svn clone svn+ssh://svnserver/external-repo-1
git svn clone svn+ssh://svnserver/external-repo-2
git svn clone svn+ssh://svnserver/external-repo-3
...etc
# Create the symlinks
cd main-project
ln -s ../external-repo-1
ln -s ../external-repo-2
ln -s ../external-repo-3
...etc 
```

警告：我认为这是不言而喻的，但请确保您没有将符号链接提交到您的仓库。

# plone - 经理无权访问 acl_users/source_users 中的 manage_users

> ID：13918113
> 
> 赞同：0
> 
> 时间：2012-12-17T16:35:37.773
> 
> 标签：plone

我正在尝试清理已交给我的 Plone 站点，但我不允许从头开始（我们还没有到那里）。

我被要求更改几个用户的密码，我发现自己被锁定了，即使是 ZMI 用户：当我点击 ZMI 中的 /plone-site/acl_users/source_users 时，我得到一个`Unauthorized`错误！

所以，我认为这要么是：

*   像 LDAP 之类的插件（虽然没有被使用）正在弄乱我的用户源。
*   有人弄乱了权限。

关于如何解决这个问题的任何想法？（目前我已指示用户使用“忘记密码”表单重新获得访问权限，但将来我可能需要访问该对象以用于其他目的。）

**2013-01-14 更新**

正如@aclark 所问，我提供了完整的回溯`verbose-security=on`：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 127, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 47, in call_object
  Module Shared.DC.Scripts.Bindings, line 324, in __call__
  Module Shared.DC.Scripts.Bindings, line 361, in _bindAndExec
  Module Products.PageTemplates.PageTemplateFile, line 130, in _exec
  Module Products.PageTemplates.PageTemplate, line 80, in pt_render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 852, in do_condition
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 819, in do_loop_tal
  Module zope.tales.tales, line 682, in setRepeat
  Module zope.tales.tales, line 696, in evaluate
   - URL: manage_users
   - Line 31, Column 1
   - Expression: <PathExpr standard:'here/listUserInfo'>
   - Names:
      {'container': <UserManager at /ca/acl_users/source_users>,
       'context': <UserManager at /ca/acl_users/source_users>,
       'default': <object object at 0x7f4c7f84aad0>,
       'here': <UserManager at /ca/acl_users/source_users>,
       'loop': {},
       'nothing': None,
       'options': {'args': ()},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0xbf67418>,
       'request': <HTTPRequest, URL=http://intranet.lahavane.com/ca/acl_users/source_users/manage_users>,
       'root': <Application at >,
       'template': <PageTemplateFile at /ca/acl_users/source_users/manage_users>,
       'user': <PropertiedUser 'admin'>}
  Module zope.tales.expressions, line 217, in __call__
  Module Products.PageTemplates.Expressions, line 149, in _eval 
  Module zope.tales.expressions, line 124, in _eval
  Module Products.PageTemplates.Expressions, line 76, in boboAwareZopeTraverse
  Module OFS.Traversable, line 310, in restrictedTraverse
  Module OFS.Traversable, line 245, in unrestrictedTraverse
   - __traceback_info__: ([], 'listUserInfo')
  Module AccessControl.ImplPython, line 729, in guarded_getattr
  Module AccessControl.ImplPython, line 671, in aq_validate
  Module AccessControl.ImplPython, line 565, in validate
  Module AccessControl.ImplPython, line 463, in validate
  Module AccessControl.ImplPython, line 810, in raiseVerbose
Unauthorized: Your user account does not have the required permission.  Access to 'listUserInfo' of (UserManager at /ca/acl_users/source_users) denied. Your user account, admin, exists at /acl_users. Access requires Manage_users_Permission, granted to the following roles: []. Your roles in this context are ['Authenticated', 'Manager', 'Owner']. 
```

最后一句很有启发性：没有一个角色可以做我想做的事。现在的问题是如何解决这个问题。另一个问题（我们可能不会回答）是这是如何发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:32:50.680

我假设您正在尝试使用 Zope-Application 级别的用户管理 plone 用户（用户是`/acl_users/users/manage_users`zope 级别的 listet - 而不是 plone 级别的 acl_users 中）。如果用户不知何故在克隆级别上没有经理角色，则无法管理克隆用户。

可能的原因可能是：

*   您的 Zope 级别用户不再具有 Zope 级别的“经理”角色（该用户应具有`Manager`以下角色`/acl_users/roles/manage_roles`）。

*   您有一个用户，其 ID 与 plone 级别的 zope 级别用户相同，但没有`Manager`角色。用户将被列在下面`/plone-site/acl_users/source_users`- 由于错误而您无法检查`Unauthorized`- 或者由另一个 PAS 插件（例如 LDAP）列出。为用户提供`Manager`plone 级别的角色也可以解决问题，而无需从 plone 级别 acl_users 中删除用户。

我建议创建一个紧急用户：

*   转到服务器上的终端（例如 ssh）
*   运行`bin/instance adduser emergency secret`（bin/instance 可能因安装类型而异）
*   您现在有一个名为“emergency”和密码“secret”的新用户，在 zope-level l ( `/acl_users/users/manage_users`) 上注册，`Manager`角色为 ( `acl_users/roles/manage_roles`)。
*   使用此用户，您可以修复其他管理员用户，并在修复后删除紧急用户。

当同一个用户在 Zope 的 acl_users 和 Plone 的 acl_users 上注册了不同的角色时，你可能会得到一些奇怪的效果。根据当前的身份验证方法（例如 Zope 级别的基本身份验证或 Plone 级别的 cookie 身份验证），您可能对同一用户具有不同的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:39:33.107

**不要猜**。首先，`Unauthorized`从忽略的异常列表中删除`Site Setup -> Errors`：

![在此处输入图像描述](../Images/de4f048c524047985c4dd47924829543.png)

然后`Save`。接下来，确保在文件的**实例部分**中`verbose-security`启用，例如：**`buildout.cfg`**

 **```
 [instance]
  recipe = plone.recipe.zope2instance
  verbose-security = on 
```

（设置后运行 buildout。）

现在访问**/plone-site/acl_users/source_users**，然后返回`Site Setup -> Errors`查看实际错误。**

# javascript - JavaScript。中缀到后缀

> ID：13918115
> 
> 赞同：0
> 
> 时间：2012-12-17T16:35:37.087
> 
> 标签：javascript, html, infix-notation

我是 JavaScript 的初学者。

此代码应该评估后缀表达式。但它不起作用。我认为代码非常合乎逻辑，我真的不知道它有什么问题。

如果有人可以帮助我，我将不胜感激！

```
<html>
<head>
</head>

<body>
<!-- starting javaScript -->
<script type = "text/javascript">
    var postStr = "123++"; //initial postfix expression     
    var postArr =  new Array();
    postArr = postStr.split(""); //string.split() turns string into array!

    for(var i=0; i<postArr.length; i++)
        document.write("value"+postArr[i]+"<br>");

    var stack=[];
    var result;
    var firstNum;
    var secNum;
    //var k;
    for(var i=0; i<postArr.length; i++)
    {
        if((postArr[i]!="^")||(postArr[i]!= "+")||(postArr[i]!= "-")||      (postArr[i]!= "*")||(postArr[i]!= "/"))
        {
            stack.push(postArr[i]);
            //document.write("length" + stack.length);
        }

        else if((postArr[i]=="^")||(postArr[i]== "+")||(postArr[i]== "-")||(postArr[i]== "*")||(postArr[i]== "/"))
        { 
            if(postArr[i]=='+')
            {
                firstNum=stack.pop();
                secNum=stack.pop();
                result = secNum + firstNum;
                stack.push("result = " + result);
            }
            else if(postArr[i]=='*')
            {
                firstNum=stack.pop();
                secNum=stack.pop();
                result = secNum * firstNum;
                stack.push("result = " + result);
            }
            else if(postArr[i]=='/')
            {
                firstNum=stack.pop();
                secNum=stack.pop();
                result = secNum / firstNum;
                stack.push("result = " + result);
            }
            else if(postArr[i]=='-')
            {
                firstNum=stack.pop();
                secNum=stack.pop();                                        
                                    result = secNum - firstNum;
                stack.push("result = " + result);
            } 
        }
    }
    var finalRes=stack.pop();
    document.write(finalRes); 
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:50:48.573

有一些错误：

1.  您的第一个条件应由`and`( `&&`) 运算符分隔，而不是`or`因为您使用的是否定条件

2.  因为您将字符串转换为数字，所以不要忘记将字符转换为整数（使用类似的东西`+postArr[i]`）

3.  您应该推送结果而不是带有注释（`stack.push(result)`而不是`stack.push("result = " + result)`）的字符串。

请参阅此 jsfiddle：http: [//jsfiddle.net/scaillerie/GwDTM/2/](http://jsfiddle.net/scaillerie/GwDTM/2/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:43:35.193

我不确定这是否是唯一的问题，但此代码的条件是：

`if((postArr[i]!="^")||(postArr[i]!= "+")||(postArr[i]!= "-")|| (postArr[i]!= "*")|| postArr[i]!= "/"))`

将始终评估为 true，因为 postArr[i] 将始终**不是**选项之一。你可能想要这样的东西：

`var ch = postArr[i];`

`if (! ((ch == "^") || (ch == "+") || (ch == "-")…`

# php - 如何使用 Twilio 连接 2 个通话

> ID：13918116
> 
> 赞同：1
> 
> 时间：2012-12-17T16:35:38.767
> 
> 标签：php, twilio

我正在用 Twilio 制作一个非常简单的应用程序。一位客户拨打 Twilio 号码，然后 twilio 拨通了此人`<Enqueue>`。我将`CallSid`标识符存储在数据库中以备后用。当客户致电时，twilio 会使用 twilio-php sdk 再次致电另一个人。此人可以拒绝或接听电话。

这运行良好。

我的问题是：如果该人接听电话，我如何连接（以便他们可以一起交谈）这 2 个电话？可以用`<Dial>`动词和`CallSid`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-13T18:32:47.310

Twilio 布道者在这里，

您可以使用`<Dial>`和[`<Queue>`](https://www.twilio.com/docs/api/twiml/queue?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon)TwiML 动词来做到这一点。

当客户给您打电话时，您可能希望将他们与另一个人联系，我们将给代理打电话。因此，要将客户放入呼叫队列（听起来您已经开始工作了）：

```
<Response>
  <Enqueue>some-queue-name</Enqueue>
</Response> 
```

值得在 上设置一个`waitUrl`属性，[`<Enqueue>`](https://www.twilio.com/docs/api/twiml/enqueue?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon)以便您可以获得状态消息或为呼叫者保留音乐。当您的代理接听电话时，您所需要做的就是使用`<Dial>`并将`<Queue>`它们连接在一起：

```
<Response>
  <Dial>
    <Queue>some-queue-name</Queue>
  </Dial>
</Response> 
```

此时，客户正在与座席通话，通话已接通。

还值得补充的是，如果您保留REST API，`CallSid`您还可以[使用 REST API 来更改实时通话](https://www.twilio.com/docs/api/rest/change-call-state?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon)。实际上，您指示 Twilio 开始执行不同的 TwiML。在 PHP 中：

```
<?php
// Get the PHP helper library from twilio.com/docs/php/install
require_once('/path/to/twilio-php/Services/Twilio.php'); // Loads the library

// Your Account Sid and Auth Token from twilio.com/user/account
$sid = "AC7957fb240ace4634d57f3888c4966461"; 
$token = "{{ auth_token }}"; 
$client = new Services_Twilio($sid, $token);

// Get an object from its sid. If you do not have a sid,
// check out the list resource examples on this page
$call = $client->account->calls->get("CAe1644a7eed5088b159577c5802d8be38");
$call->update(array(
    "Url" => "http://demo.twilio.com/docs/voice.xml",
    "Method" => "POST"));
echo $call->to; 
```

希望有帮助！

# wordpress - 使用 CMS 进行关系数据管理？

> ID：13918120
> 
> 赞同：0
> 
> 时间：2012-12-17T16:35:50.003
> 
> 标签：wordpress, joomla, content-management-system, relational-database, data-management

是否应该使用 CMS（例如 Joomla 或 Wordpress）来启用数据的显示、分类、搜索和操作等？

我需要创建一个解决方案，用于在线获取具有数据之间基本关系的 Excel 表，例如国家 -> 项目 -> 信息，项目 -> 项目参与者。

非常基本，非开发人员的维护是必要的，因此我对 CMS 进行了调查。

我曾尝试调查和比较不同的 CMS，但大多数通过显示静态内容页面（如小型企业、博客或 wiki 站点）来举例说明。我曾经开发 Java MVC 和 SQL 数据库，但我相信定制是过度杀戮，在这种情况下不是正确的方法。

我非常感谢以这种方式使用 CMS 的网站示例、建议的 CMS 或其他建议的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:16:31.327

我建议使用 Yii 框架，因为你可以通过 Gii 构建数据库结构，并且为了维护，Yii 社区中有很多小工具可以让非开发人员在 Yii 应用程序上进行维护 [http://www.yiiframework.com/](http://www.yiiframework.com/)

# jquery - 如何在内容更改时更改文本的固定 div？

> ID：13918123
> 
> 赞同：0
> 
> 时间：2012-12-17T16:36:02.603
> 
> 标签：jquery, html, fixed, scrolltop

我有一个页面，其中我的内容（图像）向下滚动并在侧面有一个固定的标题。我需要固定 div 一侧的标题，随着图像的滚动而变化，以描述每个图像。

请参阅[http://kimcolemanprojects.com/artworks.html](http://kimcolemanprojects.com/artworks.html)

感谢您提供有关如何实现这一目标的任何建议。

安吉拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:59:35.723

几周前我写了一个简单的 jQuery 表达式，所以这里有一个适合您要求的简单解决方案......

**jQuery 表达式**

```
jQuery.expr.filters.inView = function(el) {
    var width = $(el).width(),
        height = $(el).height(),
        offset = $(el).offset(),

        vp_dimensions = {
            height: $(window).height(),
            width: $(window).width()
        },
        y_offset = (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop),
        x_offset = (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);

    return (
    offset.top < (y_offset + vp_dimensions.height) && offset.left < (x_offset + vp_dimensions.width) && (offset.top + height) > y_offset && (offset.left + width) > x_offset);
}; 
```

**滚动事件**

```
$(window).scroll(function() {

    $('li').each(function() {
        var self = $(this),
            title = self.prev('.title').text();
        if (self.is(':inView')) {
            $('#title').find('h2').text(title);
        }
    });

}).scroll(); 
```

**[小提琴](http://fiddle.jshell.net/ejxMJ/)**

**更新**

为了做得更好，我删除了您的 placeholder`.title`并将其内容添加到您的 img-alt 属性中：

```
$(window).scroll(function() {

    $('li').each(function() {
        var self = $(this),
            title = self.find('img').attr('alt');
        if (self.is(':inView')) {
            $('#title').find('h2').text(title);
        }
    });

}).scroll(); 
```

还有你的新 HTML：

```
<div id="header">
    <div id="title">
        <h2>Untitled 1</h2>
    </div>
</div>
<div id="main" class="main">
    <ul>
        <li id="1">
            <a onClick="goToByScroll('2')" href="javascript:void(0)"><img src="Untitled17.jpg" alt="Unititled 1"></a>
        </li>
        <li id="2">
            <a onClick="goToByScroll('3')" href="javascript:void(0)"><img src="Untitled9.jpg" alt="Unititled 2"></a>
        </li>
        <li id="3">
            <a onClick="goToByScroll('4')" href="javascript:void(0)"><img src="Frame2.jpg" alt="Unititled 3"></a>
        </li>
        <li id="4">
            <a onClick="goToByScroll('1')" href="javascript:void(0)"><img src="Untitled2.jpg" alt="Unititled 4"></a>
        </li>
    </ul>
</div> 
```

**[小提琴](http://fiddle.jshell.net/EhUD6/)**

# 更新

我已经重建了您的链接锚点并删除了“inline-onclick”事件：

[完整站点](http://fiddle.jshell.net/9fdqs/show)-[小提琴](http://fiddle.jshell.net/9fdqs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:47:17.477

您需要做的是使用 jQuery 观看滚动事件并随时检查滚动位置。

这是一个通用示例：

```
$(window).scroll(function(){ 
  to_top = $(document).scrollTop();
  if ( $('img').offset().top == to_top ) {
      $('#id-of-title-div').text('text to change to');
  }
}); 
```

# javascript - 在 Javascript 中阻止工作线程中的异步调用

> ID：13918131
> 
> 赞同：1
> 
> 时间：2012-12-17T16:36:20.133
> 
> 标签：javascript, functional-programming, worker

我`Worker`在 javascript 中创建了一个需要无限循环的。在循环内部，它需要进行几次异步调用并等待它们完成，然后再继续。

有两种直接的方法可以做到这一点，我可以看到两者似乎都存在致命缺陷：

1)

```
while(true) {
  var promise = async_call();
  while(!promise.isResolved()) { }
} 
```

2)

```
var func = function() {
  var promise = async_call();
  promise.done(func);
}
func(); 
```

对于#1，它分崩离析，因为内部`while`循环可能会消耗大量 CPU；如果线程不可中断，（javascript线程是可中断的吗？我不认为它们是），那么`async_call`将永远不会真正有机会完成，所以我们只是陷入了一个循环。

对于#2，如果有尾调用优化，它会很好地工作，但我不认为任何 javascript 实现都使用这个，所以它会很快导致堆栈溢出或其他递归限制。

最后，我需要一种方法在两个循环应该终止时向它们发出信号。我可以通过将布尔`stop`变量放入代码中轻松地做到这一点，但是，这又依赖于工作线程是可中断的，因此我可以设置`stop`为 true。

是否有我在这里忽略或不熟悉的设计模式？我怎样才能让我的工作人员尽可能快地执行而不诉诸诸如`setInterval`与轮询配对之类的东西`isResolved`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:39:33.277

模式 2 非常好。如果回调真的是异步的（一些 Promise 库强制这样做），它不会以堆栈溢出结束，因为事件将使用全新的堆栈执行。只有当你同步*调用* `func`你会得到溢出，但你只是将它同步注册为回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:39:01.600

假设`async_call`是 XHR 请求或`setTimeout`回调，您不会溢出堆栈。在新堆栈上调用事件回调（例如 XHR 完成）；这不是真正的递归。

至于信号工人停止，使用消息传递。

```
var worker = new Worker('worker.js');
// when you need to stop it:
worker.postMessage('stop'); 
```

worker.js

```
onmessage = function(e) {
    if (e.data == 'stop') {
        // stop
    }
} 
```

# c++ - 为什么 cv::circle() 仅针对某些 RGB 值显示在 3D 矩阵上？

> ID：13918143
> 
> 赞同：5
> 
> 时间：2012-12-17T16:37:01.563
> 
> 标签：c++, opencv

我看到了一些我没想到的奇怪行为。在类型的纯白色矩阵`CV_64FC3`（3 个通道，浮点值）上，我正在绘制一个彩色圆圈。出乎意料的行为是该圆圈实际上仅针对某些 RGB 值显示。这是我的程序的两种不同颜色的示例输出：

![打印一个红色圆圈](../Images/58660b7d1172bb7ffcd1781e39265e44.png)

![打印一个灰色圆圈](../Images/cdf3af6b21b3797f868b9db477e1018b.png)

显然，灰色圆圈不见了。我的问题：为什么？我怎样才能让它出现？下面是我在一个可以运行的小程序中的示例代码。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

void main()
{
    const unsigned int diam = 200;
    cv::namedWindow("test_window");
    cv::Mat mat(diam, diam, CV_64FC3);

    // force assignment of each pixel to white.
    for (unsigned row = 0; row < diam; ++row)
    {
        for (unsigned col = 0; col < diam; ++col)
        {
            mat.at<cv::Vec3d>(row, col)[0] = 255;
            mat.at<cv::Vec3d>(row, col)[1] = 255;
            mat.at<cv::Vec3d>(row, col)[2] = 255;
        }
    }

    // big gray circle.
    cv::circle(mat, cv::Point(diam/2, diam/2), (diam/2) - 5, CV_RGB(169, 169, 169), -1, CV_AA);

    cv::imshow("test_window", mat);
    cv::waitKey();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:55:31.613

您正在使用浮点矩阵类型。来自 opencv[文档](http://opencv.willowgarage.com/documentation/cpp/user_interface.html#cv-imshow)：

> 如果图像是 32 位浮点，则像素值乘以 255。即取值范围 [0,1] 映射到 [0,255]。

这是工作代码：

```
#include <opencv2/opencv.hpp>

void main()
{
    const unsigned int diam = 200;
    cv::namedWindow("test_window");
    // force assignment of each pixel to white.
    cv::Mat3b mat = cv::Mat3b(diam, diam, cv::Vec3b(255,255,255));

    // big gray circle.
    cv::circle(mat, cv::Point(diam/2, diam/2), (diam/2) - 5, CV_RGB(169, 169, 169), -1, CV_AA);

    cv::imshow("test_window", mat);
    cv::waitKey();
} 
```

结果：

![截屏](../Images/1f6bf98d1e3a8056dbfd9bdc77aceea3.png)

更新。

1.  不要使用循环填充矩阵。上面示例中的 Mat::zeros()、Mat::ones() 和构造函数看起来要好得多。U
2.  使用特殊的 cv::MatXY 类型来防止错误类型的运行时错误。

# php - PHP 变量无论取什么值都等于 true，甚至为 0

> ID：13918144
> 
> 赞同：0
> 
> 时间：2012-12-17T16:37:04.030
> 
> 标签：php, variables

这是 var_dump：

```
object(stdClass)#27 (8) { 
    ["SETTING_ID"]=> string(2) "25" 
    ["SETTING_SOURCE"]=> string(2) "XV" 
    ["SETTING_FLEET"]=> string(3) "313" 
    ["SETTING_EXAM"]=> string(1) "A" 
    ["SETTING_HIDE"]=> string(1) "0" 
    ["SETTING_THRESHOLD"]=> string(1) "0" 
    ["SETTING_COUNT"]=> string(8) "POSITIVE" 
    ["SETTING_USAGE"]=> string(7) "MILEAGE" 
} 
```

我正在测试的变量是 SETTING_HIDE。这是使用 Code igniter 框架从 MySQL 中提取的。我不知道这是否只是我在工作了相当长的一天后变胖了还是什么，但无论变量持有什么值，任何针对它的 if 语句都会返回 true，即使类型转换为布尔值或直接字符串比较，即。==“0”或==“1”。

有谁有一双新鲜的眼睛在乎让我觉得很傻！？！:)

只是为了澄清：

尝试了以下方法：

```
if($examSetting->SETTING_HIDE == "1") {  $showOnABC = "checked=\"checked\""; } 
if((bool)$examSetting->SETTING_HIDE) {   $showOnABC = "checked=\"checked\""; }

if($examSetting->SETTING_COUNT == "POSITIVE") further on in my code works perfectly. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:53:53.037

```
if($examSetting->SETTING_HIDE !== "0") {  $showOnABC = "checked=\"checked\""; } 
```

可能对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:01:24.010

请参阅：[http](http://www.laprbass.com/RAY_temp_kaigoh.php) ://www.laprbass.com/RAY_temp_kaigoh.php这使我得出结论，这里还有其他东西在起作用，也许是另一个代码块？

```
<?php // RAY_temp_kaigoh.php
error_reporting(E_ALL);
echo '<pre>';

$thing = new StdClass;
$thing->SETTING_ID        = "25";
$thing->SETTING_SOURCE    = "XV";
$thing->SETTING_FLEET     = "313";
$thing->SETTING_EXAM      = "A";
$thing->SETTING_HIDE      = "0";
$thing->SETTING_THRESHOLD = "0";
$thing->SETTING_COUNT     = "POSITIVE";
$thing->SETTING_USAGE     = "MILEAGE";

var_dump($thing);

if ( $thing->SETTING_HIDE) echo "TRUTHY";
if (!$thing->SETTING_HIDE) echo "FALSY"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:02:01.393

我认为这只是那些奇怪的烦人的事情之一，但是，

```
if($examSetting->SETTING_HIDE == "1") {
$showOnABC = "checked=\"checked\"";
} else {
$showOnABC = "";
} 
```

现在完全按预期工作。

无论如何，感谢您的关注。

# c# - 通过 TCPIP 客户端连接异步读取缓冲区

> ID：13918152
> 
> 赞同：0
> 
> 时间：2012-12-17T16:37:48.083
> 
> 标签：c#, asyncsocket, tcp-ip

我编写了一个通过 TCP/IP 连接到医疗机器的客户端。那台机器根据内部触发事件向我发送 XML 文件。我必须捕获那些 XML 并存储在文件系统上。我使用了一个提供异步连接的类，除了几件事之外工作正常：当我检查写入的文件时，我注意到它们包含两个由空值分隔的 xml（编码为 0X00）。所以我在缓冲区上放了一种过滤器，但问题仍然存在。基本上，当我检测到 XML 文件的结尾时，我必须打破我的缓冲区。

这是提供异步读取的代码：

```
try
{
    NetworkStream networkStream = this.client.GetStream();                
    int read = networkStream.EndRead(asyncResult);

    if (read == 0)
    {
        if (this.Disconnected != null)
            this.Disconnected(this, new EventArgs());
    }

    byte[] buffer = asyncResult.AsyncState as byte[];
    if (buffer != null)
    {
        byte[] data = new byte[read];
        Buffer.BlockCopy(buffer, 0, data, 0, read);
        networkStream.BeginRead(buffer, 0, buffer.Length, this.ClientReadCallback, buffer);
        content.Append(Encoding.UTF8.GetString(buffer.TakeWhile((b, index) => index <= read).Where(b => b != 0x00).ToArray()));

        // Store the file
        string machineId = StoreFile(content.ToString());

        counter++;
        if (this.DataRead != null)
            this.DataRead(this, new DataReadEventArgs(data));
    }
}
catch (Exception ex)
{
    Logger.Log(ex.Message);
    if (this.ClientReadException != null)
        this.ClientReadException(this, new ExceptionEventArgs(ex));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:48:13.830

问题是您切断了第二个 XML 文档的开头，但随后继续阅读。下一次读取不会有 0，因此您将写入其内容。

```
Read: XML1
Read: XML1 \0 XML2 <-- you cut this XML2 off
Read: XML2 <-- but then continue reading here. 
```

# solr - SOLR 4.0：在 requestHandler 代码中获取唯一的 LONG 字段

> ID：13918154
> 
> 赞同：0
> 
> 时间：2012-12-17T16:37:54.697
> 
> 标签：solr, requesthandler

我正在为 SOLR 4.0 编写一个请求处理程序，并且我正在尝试获取类型字段的所有唯一值`tlong`（字段当然是索引的）。

每当我尝试获取 tstring 字段的所有唯一术语时，我都可以简单地使用以下代码：

```
DocTermsIndex sourceIndex=FieldCache.DEFAULT.getTermsIndex(searcher.getAtomicReader(), "txtField")      
TermsEnum terms=sourceIndex.getTermsEnum() 
```

然后我可以遍历所有独特的术语，`utf8ToString()`在每个术语上执行，它工作正常。

当我尝试对`tlong`字段执行相同操作时，我会得到乱码的结果 - 返回的术语数与唯一值的数量不同，并且值本身不`Long`以任何方式表示（不同的值长度等）。

还有另一种获取`tlong`字段唯一值列表的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:52:00.260

好的，我发现了。如果有人感兴趣：longs 似乎在 Solr 4.0 中使用了不同类型的编码，所以我们可以像上面的代码一样将它们作为普通字符串处理，但稍后我们必须使用不同的解析器将 term 值转换为 long：

```
 FieldCache.NUMERIC_UTILS_LONG_PARSER.parseLong(term) 
```

当没有更多元素存在时，它似乎会引发异常。至于现在它工作正常。

# java - 模拟 EntityManager 时出现 Mockito 问题

> ID：13918155
> 
> 赞同：3
> 
> 时间：2012-12-17T16:38:01.827
> 
> 标签：java, mockito

我正在用 Mockito 编写一些单元测试，当我尝试模拟 EntityManager 并运行单元测试时，出现以下错误：

java.lang.ClassFormatError：在 java.lang.ClassLoader.defineClass1(Native Method) 的类文件 javax/persistence/LockModeType 中，非本机或抽象方法中的缺失代码属性 ....

我有以下代码的行的堆栈跟踪点：

`private EntityManager entityManager = mock(EntityManager.class);`

很感谢任何形式的帮助。

弗拉维奥

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:00:15.147

可能是下面的链接回答你的问题。

[残废的java ee](http://www.adam-bien.com/roller/abien/entry/trouble_with_crippled_java_ee)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:16:11.620

**不要模拟你不拥有的类型**，尤其是实体管理器，而是编写集成测试。您可以使用 Arquilian、H2 等工具来帮助您编写这些集成测试。

进一步阅读

*   [http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html](http://davesquared.net/2011/04/dont-mock-types-you-dont-own.html)
*   [你应该只模拟你拥有的类型吗？](https://stackoverflow.com/questions/1906344/should-you-only-mock-types-you-own)
*   著名的、必读的书《以测试为导向的面向对象的软件增长》

抱歉，我并没有真正帮助您回答这个问题，但是对于您不拥有的模拟类型来说，这确实是一个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:56:23.740

从您的问题中不清楚`EntityManager`是您自己的课程之一，还是外部库中的某个课程。

如果是前者，我建议你把它的代码贴在这里，这样我们都可以看到问题所在。否则，我们只是猜测。

如果是后者，我的下一个问题是您是否使用包装类。也就是说，您应该考虑编写一个名为`EntityManagerWrapper`（或类似的）的类，该类具有一个`EntityManager`作为字段，并公开`EntityManager`您希望使用的所有方法。的每个方法`EntityManagerWrapper`应该只有一两行长，除了调用正确的方法之外什么也不做`EntityManager`。然后重构所有使用的代码`EntityManager`，以便它使用`EntityManagerWrapper`。

不需要单元测试`EntityManagerWrapper`，因为它不包含自己的逻辑。`EntityManagerWrapper`但是，当您对使用它的其他类进行单元测试时，您可以轻松地模拟。这应该可以解决您的问题。

如果还不够清楚必须做什么，请随时对此答案发表评论。

# c# - 使用反射获取类和方法的实例

> ID：13918159
> 
> 赞同：1
> 
> 时间：2012-12-17T16:38:06.380
> 
> 标签：c#, reflection

> **可能重复：**
> [使用反射在 dll 中获取特定基类型的所有类](https://stackoverflow.com/questions/3353699/using-reflection-to-get-all-classes-of-certain-base-type-in-dll)

我使用 Unity 在我的类中调用方法。我的帮助类看起来像这样。

```
protected T Using<T>() where T : class
{
   var handler = ServiceLocator.Current.GetInstance<T>();
   if (handler == null)
   {
      throw new NullReferenceException("Unable to resolve type with service locator");
   }
   return handler;
} 
```

要调用类中的方法，我使用此代码

```
Using<FooService>().Get(parameter); 
```

但是我可以使用反射来获取类和方法吗？

例子

```
string className = "FooService";
string methodName = "Get";
string parameterName = "Parameter"

Using<className>().methodName(parameterName) 
```

# sql-server - 如何从 ASP.Net MVC 4 应用程序的多个数据源更新 SQL Server 数据库

> ID：13918165
> 
> 赞同：0
> 
> 时间：2012-12-17T16:38:24.170
> 
> 标签：sql-server, asp.net-mvc, database-design

我有 10 多个 SQL Server 数据库，我将使用每个数据库中的一个表来使用我正在创建的应用程序显示信息。例如，DB1、DB2....DB10。NewDB（帐户、国家、成本中心……等）。

我已经开始创建一个新数据库，该数据库将包含来自所有这 10 多个数据库的所有信息。但是，我在很多情况下感到困惑。

1.  首先我应该遵循什么流程？我是否应该创建一个与实际数据源具有相同结构的表（在新数据库中）并将数据从实际数据源插入到新数据库中？

2.  我应该在 DBMS 上这样做吗？如果是这样，它是一些脚本吗？（提示预期，因为对此很新）

我正在创建一个具有 10 多个数据源的报告生成应用程序。我需要一些提示，我应该以哪种方式进行？

提前感谢您的建议/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:00:50.140

如果表在同一个服务器实例上，您可以简单地创建一个将表链接在一起的视图，如下所示

```
CREATE VIEW [dbo].[MULTITABLELINK]
AS
SELECT     ID, 'Database1' AS dbSource , Account, Country
FROM       [database1].dbo.AccountTable
UNION
SELECT     ID, 'Database2' AS dbSource , Account, Country
FROM       [database2].dbo.AccountTable 
```

但在您的情况下（不同的 SqlServer 实例），您可能需要创建一个链接服务器，允许查看为您工作的一个内部的不同实例

例如：

```
 EXEC master.dbo.sp_addlinkedserver 
@server = N'TheFirstLinkedServerName', 
@srvproduct=N'SQLSERVER', 
@provider=N'SQLNCLI', 
@datasrc=N'TheRemoteServerName', 
@catalog=N'TheCatalogToUse'

      EXEC master.dbo.sp_addlinkedsrvlogin 
@rmtsrvname=N'TheLinkedServerName',
@useself=N'False',   -- True if your users are on the same windomain
@locallogin='TheLocalDomainAndUserName',
@rmtuser='TheAllowedUserOnTheRemoteInstance',
@rmtpassword='ThePassowordOfTheRemoteUser' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:59:51.810

这本质上是一个报告数据库吗？如果是这样，经典的解决方案是创建一个新数据库（名为 Reporting 或类似名称）并使用 SSIS（或其他一些数据提取/转换工具）来移动*您*关心的报告数据。这样，您的报告活动就不会影响您的事务数据库，并且您可以以一种易于报告的方式安排报告数据库。“完整”解决方案会将数据提取到星型模式中。部分解决方案可能只是将人名放在每个表（或产品名称等）上，这样您就不必一直加入用户表，只需从登录表中报告“最近登录” .

# android - 从 Android 应用程序向设备发送短信

> ID：13918166
> 
> 赞同：0
> 
> 时间：2012-12-17T16:38:30.967
> 
> 标签：android, android-emulator, sms, android-wifi

我已经实现了将短信从 Android 模拟器发送到另一个模拟器的代码，效果很好。但是，当我尝试从模拟器或 Android 设备（只有 wifi，没有数据计划或手机号码）向设备（iPhone）发送消息时，它不起作用。我不太确定短信是否需要数据计划才能在现实世界中发送消息。谢谢你的帮助！

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(number, null, message, null, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:42:15.490

虽然短信不需要数据计划，但它需要一个工作`GSM`或`CDMA`网络连接，通话工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:43:11.840

SMS 是[短消息服务](http://en.wikipedia.org/wiki/Short_Message_Service)。它的存在时间比我们在手机上上网的时间要长，而且肯定需要有效的 SIM 卡和有效的网络连接（不需要网络数据，但您应该可以拨打电话）。

# java - Java 练习 - 用二维数组显示表格

> ID：13918167
> 
> 赞同：3
> 
> 时间：2012-12-17T16:38:33.120
> 
> 标签：java, arrays, multidimensional-array

我正在努力完成一个 java 练习，它涉及使用 2d 数组根据命令行参数动态创建和显示表。

例子：

java表5

```
+-+-+-+-+-+
|1|2|3|4|5|
+-+-+-+-+-+
|2|3|4|5|1|
+-+-+-+-+-+
|3|4|5|1|2|
+-+-+-+-+-+
|4|5|1|2|3|
+-+-+-+-+-+
|5|1|2|3|4|
+-+-+-+-+-+ 
```

到目前为止我做了什么：

```
public static void main(String[] args) {

    int num = Integer.parseInt(args[0]);

    String[][] table = new String[num*2+1][num];

    int[] numbers = new int[num];
    int temp = 0;

    for(int i=0; i<numbers.length; i++)
        numbers[i] = i+1;

        // wrong
    for(int i=0; i<table.length; i++){
        for(int j=0; j<num;j++){
            if(i%2!=0){
            temp=numbers[0];
            for(int k=1; k<numbers.length; k++){
                numbers[k-1]=numbers[k];
            }
            numbers[numbers.length-1]=temp;
            for(int l=0; l<numbers.length; l++){
            table[i][j] = "|"+numbers[l];
            }
            }
            else
                table[i][j] = "+-";
    }
    }

    for(int i=0; i<table.length; i++){
        for(int j=0; j<num; j++)
        System.out.print(table[i][j]);
        if(i%2==0)
            System.out.print("+");
        else
            System.out.print("|");

        System.out.println();}
} 
```

这不起作用，因为它在每一行打印 1|2|3|4，这不是我需要的。我发现了这个问题，这是因为第一个 for 循环更改数组顺序的次数比需要的次数多，并且基本上它会像开始时一样返回。

我知道可能有一种方法可以通过编写更多代码来实现这一点，但我总是倾向于在编写代码时尽可能多地嵌套以“优化”代码，所以这就是为什么我尝试通过使用更少的变量和循环来解决这个练习尽可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:49:54.503

```
public static void main(String args[]){
int dimension = Integer.valueOf(args[0]);
int[][] twoDimArray = new int[dimension][dimension];
for(int i=0;i<dimension;i++){
  for(int j=0;j<dimension;j++){
    System.out.print("|"+((i+1)%(dimension+1)));
    }  //end of j loop
 } //end of i loop
} //end of main 
```

以上只是按指定顺序打印数字的逻辑。另一个设计模式（+-+）我猜你可以管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:53:44.003

你太复杂了。很难找到你的错误。直接代码如下：

```
public static void main(String[] args) {

    //int num = Integer.parseInt(args[0]);
    int num = 5; // for test

    // creating 2d array
    int[][] figures = new int[num][num];

    // filling the array
    for(int row=0; row<figures.length; ++row) {
        for(int col=0; col<figures[row].length; ++col) {
            figures[row][col] = (row + col) % num + 1; 
        }
    }

    // printing the array
    for(int row=0; row<figures.length; ++row) {

        // printing border
        for(int col=0; col<figures[row].length; ++col) {
            System.out.print("+-");
        }
        System.out.println("+");

        // printing data row
        System.out.print("|");
        for(int col=0; col<figures[row].length; ++col) {
            System.out.print(figures[row][col]);
            System.out.print("|");
        }
        System.out.println();
    }

    // printing final border
    for(int col=0; col<figures[0].length; ++col) {
        System.out.print("+-");
    }
    System.out.println("+");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:24:07.707

以下代码将为数据初始化一个 2d int 数组（在您的示例中为 1-5）。并打印表格。请注意，表结构未保存在字符串二维数组中。只需将表格打印出来。请参阅行中的评论。

```
public static void main(String[] args){
        final int num = 5; //hardcoded 5, just for testing.
        final int[][] data = new int[num][num];
        for (int r = 0; r < data.length; r++) {
            for (int c = 0; c < data[r].length; c++) {
                final int t = r + c + 1;
                data[r][c] = t <= num ? t : t - num;
            }
        }
        // now we have all int data in data 2D-array    
        // here is the +-+- line
        final StringBuilder sb = new StringBuilder("+");
        for (int i = 0; i < data.length; i++) 
            sb.append("-+");    
        // now print the table
        for (int r = 0; r < data.length; r++) {
            System.out.println(sb.toString());
            for (int c = 0; c < data.length; c++) 
                System.out.print("|" + data[r][c]);
            System.out.println("|");
        }
        System.out.println(sb.toString());

    } 
```

输出：

如果你给 num=9 作为参数。上面的代码将打印：

```
+-+-+-+-+-+-+-+-+-+
|1|2|3|4|5|6|7|8|9|
+-+-+-+-+-+-+-+-+-+
|2|3|4|5|6|7|8|9|1|
+-+-+-+-+-+-+-+-+-+
|3|4|5|6|7|8|9|1|2|
+-+-+-+-+-+-+-+-+-+
|4|5|6|7|8|9|1|2|3|
+-+-+-+-+-+-+-+-+-+
|5|6|7|8|9|1|2|3|4|
+-+-+-+-+-+-+-+-+-+
|6|7|8|9|1|2|3|4|5|
+-+-+-+-+-+-+-+-+-+
|7|8|9|1|2|3|4|5|6|
+-+-+-+-+-+-+-+-+-+
|8|9|1|2|3|4|5|6|7|
+-+-+-+-+-+-+-+-+-+
|9|1|2|3|4|5|6|7|8|
+-+-+-+-+-+-+-+-+-+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-18T17:28:23.787

你让它变得更复杂试试这个简单的代码：

```
enter code here
 public static void main(String[] args)    
{
  int n  =   5 ;
  for(int i = 1 ; i <= n  ;i++)
  {
      for(int l = 0  ; l < n;l++)
       System.out.print("+-");

      System.out.print("\n|");
      for(int j = i ; j <=n;j++ )
      {
          System.out.print(j+"|");

      }
     for(int k = 1 ; i >= 2 && k <=i-1;k++)
     {
         System.out.print(k+"|");
     }
      System.out.println();
  } 
```

}

# javascript - 如何在javascript和jquery中先加载某个内容

> ID：13918170
> 
> 赞同：0
> 
> 时间：2012-12-17T16:38:42.700
> 
> 标签：javascript, jquery

我有一个带有文本的 div 和一个背景图像。当我加载页面时，文本总是出现在第一个（假设我有低速互联网连接）。如何在文本之前加载背景图像？能否请您在 jquery 和 javascript 中给我解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:41:11.883

[在图像的onload 事件处理程序](https://www.w3schools.com/jsref/event_onload.asp)中添加文本。

注意：如果您想继续使用`div`带有背景图像而不是标签的`img`标签，则必须在[window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)事件期间添加文本（有关详细信息，请参阅[此答案](https://stackoverflow.com/a/9538472/508537)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:44:53.993

假设您的 div 看起来像这样：

```
<div id="Derp" style="CSS-for-background-image-here">Magical ponies!</div> 
```

我会尝试完全删除文本，然后添加这种 jquery 调用：

```
<script>
    $(document).ready(function() {
        $('#Derp').load(function() {
            $('#Derp').text("Magical ponies!");
        });
    });
</script> 
```

是这里`$('#Derp').load(...)`的关键。[请参阅 load() 的文档。](http://api.jquery.com/load-event/)它有一个你所需要的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:44:03.270

您可以填充内容 onload。

从这个开始：

```
<div id="content"></div> 
```

然后，在 jquery 中，执行以下操作：

```
 $(document).ready(function() {
    mybg= new Image(); 
    mybg.onload=function(){
      $('#content').html('YOURTEXTHERE');
    }
    mybg.src = "PATH/TO/IMG";
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:59:57.400

您的简单答案是`.load`当您的窗口完全加载然后出现文本时您可以执行以下操作：

```
$(function(){
    $(window).load(function() {
        $('p').fadeIn(800);
    });​
}); 
```

这是做什么的`fading in the p tag with text`时候整体`window gets loaded`。

你可以在这里找到一个演示：http: **[//jsfiddle.net/a5P8b/](http://jsfiddle.net/a5P8b/)**

# hadoop - hadoop 单节点设置 bash：bin/hadoop 权限被拒绝

> ID：13918173
> 
> 赞同：0
> 
> 时间：2012-12-17T16:38:51.093
> 
> 标签：hadoop

在格式化 namenode 的步骤中尝试设置单节点 hadoop 集群时出现错误。

命令：

```
bin/hadoop namenode -format 
```

错误：

```
bash: bin/hadoop : permission denied 
```

我在 ubuntu 12.10、12.04、11.04 上尝试了这个，并且得到了同样的错误。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:36:50.630

更改 HADOOP_HOME 的权限。如需详细帮助，您可以访问此[链接](http://cloudfront.blogspot.in/2012/07/how-to-configure-hadoop.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:43:41.337

检查hadoop脚本的权限：

```
do ls -l ./bin/hadoop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T22:02:57.187

非常感谢大家，，

它缺少 bin/hadoop 目录中文件的执行权限，现在在使用 chmod 命令提供执行权限后可以工作

# c# - async 关键字如何与 Azure 辅助角色一起使用？

> ID：13918179
> 
> 赞同：2
> 
> 时间：2012-12-17T16:39:01.407
> 
> 标签：c#, asynchronous, azure, azure-worker-roles

我正在玩 Azure Worker Roles。调用异步 WinRT 方法并使用`await`关键字时，服务执行结束。我猜这是因为`await`将控制权返回给调用者，这是服务内部链上的东西。也许调用者在完成执行并假设服务已完成或出现故障之前不希望`Run()`返回控制权？

我不确定，有人知道是否`async`打算与 Azure Worker Roles 一起使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:42:25.293

你的猜测完全正确。

在调用堆栈中的某个时刻，您需要通过调用 from 方法显式等待（并阻塞）直到`.Wait()`操作`Task`完成`async`。

您可能应该在根`Run()`方法中或附近执行此操作。

# c# - RotateTransform 减慢 C# GDI+ 中的 FillRectangle 函数？

> ID：13918180
> 
> 赞同：1
> 
> 时间：2012-12-17T16:39:02.497
> 
> 标签：c#, .net, gdi+, rotatetransform

我有一个在屏幕上绘制点的功能。此功能运行良好，直到我添加了`panelGraphics.RotateTransform`. 当这条线存在时，进行一次重绘的过程很长。我的点列表包含大约 5000 个点，如果没有旋转，它会在几毫秒内完成，但使用这条线可能需要 500 毫秒，这非常慢。你知道为什么 RotateTransform 这么慢，还有，我能做些什么来优化它？

```
private void panel1_Paint(object sender, PaintEventArgs e)
{
    Pen myPen = new System.Drawing.Pen(System.Drawing.Color.Red);
    SolidBrush myBrush = new System.Drawing.SolidBrush(System.Drawing.Color.Red);
    Graphics panelGraphics = panel1.CreateGraphics();

    panelGraphics.TranslateTransform((panel1.Width / 2) + _panW, (panel1.Height / 2) + _panH);

    //Problematic line...
    panelGraphics.RotateTransform(230 - Convert.ToInt32(_dPan), System.Drawing.Drawing2D.MatrixOrder.Prepend);

    PointF ptPrevious = new PointF(float.MaxValue, float.MaxValue);
    foreach (PointF pt in _listPoint)
    {
        panelGraphics.FillRectangle(myBrush, (pt.X / 25) * _fZoomFactor, (pt.Y / 25) * _fZoomFactor, 2, 2);
    }

    myBrush.Dispose();
    myPen.Dispose();
    panelGraphics.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:04:49.070

原因是每个矩形都必须旋转。旋转可能是一个缓慢的操作，尤其是对于非直角。

在这种情况下，更好的方法是首先创建一个“隐藏”位图，您可以在其中绘制矩形。*然后*将旋转应用于主图形对象并将隐藏位图绘制到主位图（控件）上。像这样的东西-

```
private void panel1_Paint(object sender, PaintEventArgs e)
{
    Pen myPen = new System.Drawing.Pen(System.Drawing.Color.Red);
    SolidBrush myBrush = new System.Drawing.SolidBrush(System.Drawing.Color.Red);

    Graphics panelGraphics = e.Graphics; //use the provided Graphics object

    // create an internal bitmap to draw rectangles to
    Bitmap bmp = new Bitmap(this.ClientSize.Width, _
                            this.ClientSize.Height, _
                            Imaging.PixelFormat.Format32bppPArgb);

    using (Graphics g = Graphics.FromImage(bmp)) {

        PointF ptPrevious = new PointF(float.MaxValue, float.MaxValue);
        foreach (PointF pt in _listPoint) {
            g.FillRectangle(myBrush, (pt.X / 25) * _fZoomFactor, _
                                     (pt.Y / 25) * _fZoomFactor, 2, 2);
        }   
    }

    panelGraphics.TranslateTransform((panel1.ClientSize.Width / 2) + _panW, _
                                     (panel1.ClientSize.Height / 2) + _panH);

    //Problematic line...
    panelGraphics.RotateTransform(230 - Convert.ToInt32(_dPan), _
                                  System.Drawing.Drawing2D.MatrixOrder.Prepend);

    panelGraphics.DrawImage(bmp, 0, 0); //adjust x/y as needed
    bmp.Dispose;

    myBrush.Dispose();
    myPen.Dispose();
} 
```

# android - 如何在没有此错误的情况下退出我的应用程序

> ID：13918181
> 
> 赞同：0
> 
> 时间：2012-12-17T16:39:01.247
> 
> 标签：android, android-intent, android-activity, media-player

我创建了一个卡拉 OK 应用程序。但我无法在没有错误的情况下停止 MediaPlayer。当我按下返回按钮回家时，我得到“对不起，应用程序已停止工作”如果我尝试开始另一个活动，也会发生同样的事情

```
public class Main extends Activity implements MediaPlayerControl {
private MediaController mMediaController;
private MediaPlayer mMediaPlayer;
Handler mHandler = new Handler();
public TextView subtitles,subtitles2;

static Context context;

@SuppressLint("HandlerLeak")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.Main);

    subtitles = (TextView) findViewById(R.id.subs2);
    subtitles2 = (TextView) findViewById(R.id.subs21);

    mMediaPlayer = new MediaPlayer();
    mMediaController = new MediaController(this)
    /*
     * {
     * 
     * @Override public void hide() { mMediaController.show(0); } }
     */;

    mMediaController.setMediaPlayer(Main.this);
    mMediaController.setAnchorView(findViewById(R.id.AudioView));
    mMediaController.setPrevNextListeners(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // Next button clicked
            Intent intent = new Intent(Main.this, Hello.class);
            startActivity(intent);

        }
    }, new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // Previous button clicked
            Intent intent = new Intent(Main.this, Sorry.class);
            startActivity(intent);
        }
    });

    // String audioFile = "" ;
    try {
        mMediaPlayer.setDataSource(this, Uri
                .parse("android.resource://com.app.suadmon/raw/buchatri"));
        mMediaPlayer.prepare();
    } catch (IOException e) {
        e.printStackTrace();
    }

    mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
            final long currentPos = mMediaPlayer.getCurrentPosition();
            if (currentPos < 5130) {
                subtitles.setText("1111+");

            } else if (currentPos > 5130 && currentPos < 10572) {
                subtitles.setText("555+");

            } else if (currentPos > 10572 && currentPos < 10597) {
                subtitles.setText("666+");

            } else if (currentPos > 15312 && currentPos < 18478) {
                subtitles.setText("777+");

            } else if (currentPos > 18478 && currentPos < 24191) {
                subtitles.setText("888+");

            } else if (currentPos > 24191 && currentPos < 28137) {
                subtitles.setText("999+");

            } else if (currentPos > 28137 && currentPos < 29500) {
                subtitles.setText("Thank you");
                subtitles2.setText(".............");
            } 
            mHandler.sendEmptyMessageDelayed(0, 1);
        }
    };
    mHandler.sendEmptyMessage(0);

    mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mp) {
            mHandler.post(new Runnable() {
                public void run() {
                    mMediaController.show(0);
                    // mMediaPlayer.reset();
                    mMediaPlayer.start();
                }
            });
        }
    });

    mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub
            Intent stopplay = new Intent(Main.this, Hello.class);
            startActivity(stopplay);
        }
    });
}

protected void onDestroy() {
    super.onDestroy();
    mMediaPlayer.stop();
    mMediaPlayer.release();
}
public void releaseMediaPlayer(){
    if(mMediaPlayer != null){
        mMediaPlayer.release();
        mMediaPlayer = null;
    }
}

public boolean canPause() {
    return true;
}

public boolean canSeekBackward() {
    return true;
}

public boolean canSeekForward() {
    return true;
}

public int getBufferPercentage() {
    int percentage = (mMediaPlayer.getCurrentPosition() * 100)
            / mMediaPlayer.getDuration();
    return percentage;
}

public int getCurrentPosition() {
    return mMediaPlayer.getCurrentPosition();
}

public int getDuration() {
    return mMediaPlayer.getDuration();
}

public boolean isPlaying() {
    return mMediaPlayer.isPlaying();
}

public void seekTo(int pos) {
    mMediaPlayer.seekTo(pos);

}

@Override
public void pause() {
    // TODO Auto-generated method stub
    mMediaPlayer.pause();

}

protected void onPause() {
    super.onPause();
    mMediaPlayer.getCurrentPosition();
    mMediaPlayer.pause();
}

protected void onResume() {
    super.onResume();
    mMediaPlayer.seekTo(0);
    mMediaPlayer.start();
}

// public void onUserLeaveHint(){
// mMediaPlayer.stop();
// super.onUserLeaveHint();
// }
/*
 * public void stopPlayback(){ mMediaPlayer.stop(); }
 */

public void start() {
    mMediaPlayer.start();
}

public boolean onTouchEvent(MotionEvent event) {
    mMediaController.show(0);
    return false;
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    finish();
    Intent intent = new Intent(Main.this, Show.class);
    startActivity(intent);
    super.onBackPressed();
} 
```

}

和日志猫在这里。 ![logcat 中的错误](../Images/5f90bc76de049697bc7ce5eb0723dae4.png) 我怎样才能解决这个问题。我不知道。谁能帮我。请 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:47:26.917

您需要在活动完成之前停止并释放媒体播放器。尝试将此添加到您的活动中：

```
@Override
protected void onDestroy() {
  super.onDestroy();
  if(mMediaPlayer != null)
  {
    mMediaPlayer.stop();
    mMediaPlayer.release();
  }
} 
```

# google-visualization - 在 GViz 中的列上方显示阶梯区域线

> ID：13918183
> 
> 赞同：2
> 
> 时间：2012-12-17T16:39:07.880
> 
> 标签：google-visualization

我有一个使用 GViz 创建的图表，如下所示： ![阶梯面积和柱形图](../Images/d900ef17e8575679ac4e1f855712063a.png)

这是一个组合图，一个系列显示为列，另一个显示为阶梯区域（0% 不透明度，connectSteps : false）。我不想使用 line 因为那只会在每列的中间做一个点。

我试图让线条显示在列上方，因为它们代表目标金额。我尝试切换数据列的顺序，但显示方式相同。有没有办法在系列上指定 z-index？

旁注：这是一个 Google 网站上的图表，但通过编辑 HTML，我可以通过 GViz 指定大多数可用选项。我已经浏览了文档，但还没有看到可以做到这一点的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:23:34.060

目前无法调整组合图表上的 Z 轴（因此您无法以您正在做的方式做您想做的事情）。

但是，如果您想变得棘手，您可以使用 XY 散点图重新创建相同类型的图表。

示例（复制粘贴到 Google Playground）：

```
<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'X');
        data.addColumn('number', 'Sales');
        data.addColumn('number', 'Targets');
        data.addRows([
          [1, 0, null],
          [1, 1, null],
          [1, null, null],
          [2, 0, null],
          [2, 3, null],
          [2, null, null],
          [3, 0, null],
          [3, 3, null],
          [3, null, null], 
          [0.5,null,1.5],
          [1.5,null,1.5],
          [1.5,null,null],    
          [1.5,null,2.5],
          [2.5,null,2.5],
          [2.5,null,null],    
          [2.5,null,3],
          [3.5,null,3],
        ]);

        // Create and draw the visualization.
        var chart = new google.visualization.ScatterChart(
        document.getElementById('visualization'));
        chart.draw(data, {
          width: 600,
          height: 400,
          series: {0:{color: 'black', lineWidth: 40, pointSize: 0}, 1:{color: 'red', lineWidth: 10, pointSize: 0}}  });
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="visualization" style="width: 600px; height: 400px;"></div>
  </body>
</html> 
```

# ruby - Watir 帮助：click-no-wait 和 execute_script 未按预期工作

> ID：13918184
> 
> 赞同：2
> 
> 时间：2012-12-17T16:39:11.047
> 
> 标签：ruby, watir, watir-webdriver

使用 ruby​​ 的 Watir gem，我试图单击一个打开 javascript 弹出窗口的按钮，然后在弹出窗口上单击“确定”，我似乎无法做到这一点。按钮在一个框架中。我已经广泛搜索并阅读了有关 javascript 弹出窗口的 Watir [wiki 条目，但没有任何效果。](http://wiki.openqa.org/display/WTR/JavaScript+Pop+Ups)
我认为这是因为 execute_script 和 click_no_wait 没有按预期工作。
例如，以下命令：

```
 @browser.execute_script('window.alert = function() {}')
    @browser.execute_script('alert("hello")') 
```

创建一个显示“你好”的 javascript 弹出窗口，而不是不做任何事情的预期行为。
命令：

```
 @browser.button(:value, 'Submit').click 
```

单击创建 javascript 弹出窗口的按钮。然后脚本挂起，直到我在弹出窗口上手动单击“确定”。
命令：

```
 @browser.button(:value, 'Submit').click_no_wait 
```

不单击按钮（或者它确实单击了按钮并且不触发 onclick 事件）。
我也试过：

```
 Timeout::timeout(1) { @browser.button(:value, 'Submit').click } 
```

和

```
 Thread.new { @browser.button(:value, 'Submit').click } 
```

但是 Timeout 永远不会引发异常，导致 ruby​​ 挂起，直到我在弹出窗口上手动单击“确定”，当我在新线程中运行它时，Watir 不会单击。

有人可以提供帮助或提供解决方案吗？

编辑：问题是在@browser.button.click 之后，脚本挂起直到弹出窗口关闭。@browser.alert.ok 成功关闭了弹出窗口，但是在单击按钮后脚本无法执行@browser.alert.ok，因为它一直挂起直到弹出窗口关闭。这个catch-22应该通过click_no_wait解决，但是click_no_wait没有点击。

系统信息：
Windows 7 Enterprise 64 Bit
Internet Explorer Version 9.0.12
watir-4.0.2-x86-mingw32
ruby​​ 1.9.3p286 (2012-10-12) [i386-mingw32]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:56:42.313

有一个警报 api（[watir-classic](http://rdoc.info/gems/watir-classic/frames)和[watir-webdriver](http://rubydoc.info/gems/watir-webdriver/Watir/Alert)），您可以使用它与 j​​avascript 弹出窗口进行交互。

尝试使用以下方法关闭弹出窗口：

```
@browser.alert.ok 
```

**更新 - 解决方法：**

这似乎是对框架中的元素使用 Element#click_no_wait 的错误。我已经更新了[第 45 期](https://github.com/watir/watir-classic/issues/45)并将尝试提交补丁。

同时，在脚本开头添加以下猴子补丁应该可以解决问题（即 click_no_wait 不应等待）：

```
require 'watir-classic'

Watir::IE.new(true)
module Watir
    class Frame
        def attach_command
            tag_name = @specifiers[:tag_name].join("' << '")
            @container.page_container.attach_command + ".frame(:tag_name => Array.new << '#{tag_name}', :unique_number => #{unique_number})"
        end
    end
end 
```

# iphone - iOS - 界面生成器：设置图像时 UIButton 标题消失

> ID：13918196
> 
> 赞同：8
> 
> 时间：2012-12-17T16:39:45.227
> 
> 标签：iphone, ios, uibutton

我之前做过一个项目，我将 UIButton 设置为既有文本又有图像（在界面生成器中）。

我创建了另一个项目，我想实现同样的目标，但是当我将按钮设置为有图像时，标题消失了（它没有隐藏在图像后面）。

我似乎无法弄清楚为什么会这样，如果有人能对这个主题有所了解，我将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-17T17:48:53.787

将您的按钮更改为自定义类型。把图片放上去，然后把文字放进去。

您需要在其上放置自己的背景，但此时您将能够使用边缘设置来定位文本和图像。

我拥有的每个带有图像和文本的按钮都设置为自定义，最终也有自己的背景图像。

哦，我用的另一个东西。是角半径。默认情况下，为视图提供像按钮一样的圆角效果。

```
saveButton.layer.cornerRadius = roundingNumber.floatValue; 
```

此外，您应该能够将borderWidth 和borderColor 与cornerRadius 结合使用来获得一个看起来与原始按钮非常相似的按钮

```
saveButton.layer.borderRadius = 1.0f;
saveButton.layer.borderColor = [[UIColor blueColor] CGColor];
// These are not the exact values (or maybe they are) but you get the idea. 
```

希望有帮助。

**更正**

在花了一点时间调查之后，似乎当您将图像放入按钮时。文本被推到右边。

使用边缘设置将其带回图像上。

选择按钮后，查看“属性检查器”>“按钮”>“边缘”>（下拉“标题”）

我想出的等式是

```
[Edge inset for Title] Left = -(imageWidth * 2) 
```

这应该将您的标题与您放入的图像左对齐。

需要进行自定义定位以使其看起来正确。

**这可以完全在 Interface Builder 中完成，您可以使用 RoundedRect 按钮样式**

以下是一些展示变化的图像。

在这里，我将 Button 类型设置为“自定义”以删除边框和背景。

![自定义已设置](../Images/23c8a367f11a3ea3e6922b3a8f6409a5.png)

在这里，我为“标题”设置了边缘集的顶部和左侧（标题是下拉菜单中的一个选项）

![Left 和 Top 已设置](../Images/02767c88ba2b205eb05a6ea7c84580e2.png)

*编辑*

最新的 Xcode 已将大小设置移动到新位置

[![在此处输入图像描述](../Images/e53c37cef75cb0a6888d62b1daa3fb3a.png)](https://i.stack.imgur.com/W438r.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-27T10:19:52.893

只需将图像放在背景字段中即可。这样文本将出现在图像的前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:53:42.113

听起来您正在设置按钮的图像，而不是背景图像，所以将其反转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-31T21:59:32.727

我注意到如果 UIButton 颜色设置为默认值，添加图像会使其变为白色，因此不可见。手动更改颜色使其再次可见。

# iphone - 从自定义 UITableView 类dismissModalViewControllerAnimated？

> ID：13918200
> 
> 赞同：-2
> 
> 时间：2012-12-17T16:39:54.877
> 
> 标签：iphone, objective-c, ios, ios5, uiviewcontroller

用户点击后，`cell`我在一些代码后执行此操作：

```
[self.window.rootViewController presentModalViewController:mailer animated:YES]; 
```

然后当他点击取消按钮或发送此方法时：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
[[((UIViewController *)(self.superview.superclass)) presentedViewController] dismissModalViewControllerAnimated:NO];
} 
```

但我的应用程序崩溃并退出。

```
012-12-17 18:52:09.243 testapp[8293:15203] Mail cancelled: you cancelled the operation and no email message was queued
2012-12-17 18:52:09.243 testapp[8293:15203] +[UIResponder presentedViewController]: unrecognized selector sent to class 0xbb5db0
2012-12-17 18:52:09.244 testapp[8293:15203] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '+[UIResponder presentedViewController]: unrecognized selector sent to class 0xbb5db0'
*** First throw call stack:
(0x1ba6022 0x1688cd6 0x1ba7aad 0x1b0ced0 0x1b0ccb2 0x4e466 0xa99bf 0xac64f 0xa63f2 0x8d05af 0x1ba7e99 0x50f14e 0x50f0e6 0x5b5ade 0x5b5fa7 0x5b5266 0x5343c0 0x5345e6 0x51adc4 0x50e634 0x1d39ef5 0x1b7a195 0x1adeff2 0x1add8da 0x1adcd84 0x1adcc9b 0x1d387d8 0x1d3888a 0x50c626 0x370d 0x26c5 0x1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:43:07.113

尝试简单`[self dismissViewControllerAnimated:NO completion:nil]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:43:46.187

如果您试图从 VC 中解散，那么这应该有效：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
   [self dismissModalViewControllerAnimated:NO];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:11:21.337

尝试 `[controller dismissModalViewControllerAnimated:NO];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:34:08.313

崩溃的原因是presentedViewController 只存在于iOS 5 及更高版本。如果您在 iOS 4 上运行它，则会导致您显示的异常。

对于 iOS 4+5，dismissModalViewController 是关闭使用 presentModalViewController 呈现的控制器的正确方法。它仍然适用于 iOS 6，但已被弃用。在那里你展示了ViewController 和dismissViewController。

# php - 如何判断时间范围是否在时间范围内？PHP

> ID：13918201
> 
> 赞同：2
> 
> 时间：2012-12-17T16:39:54.247
> 
> 标签：php, date, time, range

我有 2 名员工在星期一的两个时间段工作。我想为我们的客户提供一种简单的方法来创建按一天中的各个部分（晚上、下午、早上）细分的约会。

```
- Morning: 0001 to 1200
- Afternoon: 1201 to 1600
- Evening: 1601 to 2400 
```

周一至周五的时间表
约翰工作：早上 7 点到下午 1 点
迈克尔工作：下午 1 点到晚上 7 点

周六的时间表
约翰工作：上午 8 点至下午 12 点

Mon - Fri 应该显示以下按钮：Morning、Afternoon 和 Evening。星期六应该只显示早上按钮。

我不确定如何做到这一点，因为约翰的日程安排在下午结束。所以我正在弄清楚如何检查一个时间范围是否在另一个时间范围内并返回一个布尔值或其他东西。

![http://screencloud.net/img/screenshots/123e673cdad3ea47337d512f6ef2fddc.png](../Images/43ae7456abccee4f4de9368c66fb77a2.png)
我试图将所有内容分解为开始和结束时间块，我成功地做到了。然而，当需要将它们与一天中的时间（晚上、下午、早上）进行比较时，我不知道如何比较它们。

我不想让你们写我的代码，我需要逻辑方面的帮助。正如您从屏幕截图中看到的那样，除了这个小而大的部分之外，这已经全部写好了。任何想法将不胜感激！

[解决方案]

我正在使用 Laravel php 框架的 ORM，称为 Eloquent。<3 * 注意：做 range(1201, 1600, 5) 搞砸了， range(1200, 1600) 会导致巨大的内存消耗，所以我增加了 5。

```
 $day_segments = array(
                    "morning" => range(0, 1200, 5),
                    "afternoon" => range(1200, 1600, 5),
                    "evening" => range(1600, 2400, 5)
                );

                // On what days of the week are users working and in what time ranges?
                $user_timeranges = array();
                foreach ($record->users()->get() as $user) {
                    foreach ($user->timeblocks as $timeblock) {
                        $start_range = date('Hi', strtotime("{$timeblock->start_hour} {$timeblock->start_divide}"));
                        $end_range = date('Hi', strtotime("{$timeblock->end_hour} {$timeblock->end_divide}"));

                        $user_timeranges[$timeblock->day][] = range($start_range, $end_range, 5);
                    }
                }

                // On each day what day segments are available to create appointments?
                $available_segments = array();
                foreach ($days_available as $day) {
                    $available_segments[$day] = array();
                    foreach ($day_segments as $name => $segment) {
                        $available_segments[$day][$name] = 0;
                        foreach ($user_timeranges[$day] as $timerange) {
                            if (array_intersect($segment, $timerange)) {
                                $available_segments[$day][$name]++;
                            }
                        }
                    }
                }

                vardump($available_segments);
                exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:44:22.590

由于您似乎只需要整整一个小时，您可以使用该`range()`函数定义每个段，对于每个工作人员也是如此。然后使用`array_intersect`，看看你是否得到一个 thruthy 的结果。

例子：

```
$times = Array("morning"=>range(0,12),"afternoon"=>range(12,16),"evening"=>range(16,24));
$people = Array("John"=>range(7,13),"Michael"=>range(13,19));
$available = Array();
foreach($times as $k=>$v) {
    $available[$k] = 0;
    foreach($people as $name=>$times) {
        if( array_intersect($v,$times)) $available[$k]++;
    }
}
var_dump($available); 
```

# android - Android Spinner Gravity 不工作

> ID：13918203
> 
> 赞同：10
> 
> 时间：2012-12-17T16:40:13.603
> 
> 标签：android, alignment, spinner, gravity

我尝试了几天将微调器中的文本向右对齐，但是每次我失败时，我都尝试将重力设置为正确，或者将椭圆设置为结束，但没有任何效果，我所拥有的就是这个：

![在此处输入图像描述](../Images/2c57f678fa810441cfe3e9660dd050d0.png)

你能帮忙解决这个问题吗？

非常感谢。

这是 XML：

```
<RelativeLayout 
android:layout_width="match_parent"
android:layout_height="40dp"
android:orientation="horizontal" >

<org.holoeverywhere.widget.Spinner
    android:id="@+id/spnCities"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="10dp"
    android:entries="@array/array_cities"
    android:gravity="right"/>

<TextView
    android:id="@+id/tvCities"
    android:layout_width="70dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="10dp"
    android:text="@string/city"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:49:55.047

您可能必须使用自定义视图才能使其正常工作。使用谷歌它你最好的朋友......这可能会有所帮助：

[将微调器值右对齐而不是左对齐](https://stackoverflow.com/questions/10629768/align-spinner-values-to-right-instead-of-left)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T22:12:03.990

安卓：textDirection="rtl"

# eclipse - Hibernate 教程的新项目类型是什么？

> ID：13918204
> 
> 赞同：2
> 
> 时间：2012-12-17T16:40:21.823
> 
> 标签：eclipse, hibernate, maven

我正在尝试遵循这个 Hibernate 教程：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html)

这似乎很容易且直接，但是我被困在第一个决策点上：选择`File`>`New Project`使用教程建议的[pom.xml](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-setup)时，我应该选择多种类型的项目中的哪种**？**

直觉上，我想到了创建一个新的 Maven 项目：

1.  `Maven`> `Maven Project`[下一个]
2.  `[v] Create a simple project (skip archtype selection)`[下一个]

但在第 3 步，它会提示我提供与教程的[pom.xml](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-setup)完全相同的信息。所以我认为本教程旨在创建一个“空白项目”，然后手动将建议的 pom.xml 添加到其中？

但那会是什么类型的“空白项目”？

*   爪哇？
*   Java EE？
*   EJB？
*   JAXB？
*   JPA？
*   马文？
*   有关系吗？

（对不起，对这个新术语没有太多经验（还），最终会到达那里）

**更新 1：**实际上，选择**Maven**项目的建议方法（无论是从虚假信息还是正确信息开始）都不起作用：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: org.hibernate.tutorials:hibernate-tutorial
POM Location: C:\Users\Daniel\Workspace\First Hibernate Tutorial\pom.xml
Validation Messages:

    [0]  'dependencies.dependency.version' is missing for org.hibernate:hibernate-core:jar
    [1]  'dependencies.dependency.version' is missing for javax.servlet:servlet-api:jar
    [2]  'dependencies.dependency.version' is missing for org.slf4j:slf4j-simple:jar
    [3]  'dependencies.dependency.version' is missing for javassist:javassist:jar

Reason: Failed to validate POM for project org.hibernate.tutorials:hibernate-tutorial at C:\Users\Daniel\Workspace\First Hibernate Tutorial\pom.xml 
```

我现在要检查是否创建一个普通的 Java 项目，然后**将**其转换为 Maven（*在*复制该教程的 pom.xml 之后）可以解决问题。

**更新 2：**创建一个纯 Java 项目，然后**将**其转换为 Maven（*在*复制该教程的 pom.xml 之后）会产生相同的错误。

我错过了什么？

**更新 3：**感谢下面的@cowls 提示，我发现缺少“I”是 Maven 依赖项的版本号。“我”是因为缺少他们的教程（这是什么教程？）

一旦我使用了一些已知的版本号，例如：

```
<dependencies>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
         <version>3.5.6-Final</version>
     </dependency>

    <!-- Because this is a web app, we also have a dependency on the servlet api. -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>1.2_02</version>
    </dependency>

    <!-- Hibernate uses slf4j for logging, for our purposes here use the simple backend -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.5.10</version>
    </dependency>

    <!-- Hibernate gives you a choice of bytecode providers between cglib and javassist -->
    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.8.0.GA</version>
    </dependency>
</dependencies> 
```

我已经能够摆脱那个可怕的 FATAL ERROR 消息。该错误消息的“提示” BTW 适得其反，因为它指向了错误的方向：

```
[INFO] Error building POM (may not be this project's POM). 
```

现在......我仍然遇到构建错误，尽管不那么可怕：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building First Hibernate Tutorial
[INFO]    task-segment: [install]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:\Users\dben\ws-study\First Hibernate Tutorial\src\main\resources
Downloading: http://repo1.maven.org/maven2/javax/servlet/servlet-api/1.2_02/servlet-api-1.2_02.pom
[INFO] Unable to find resource 'javax.servlet:servlet-api:pom:1.2_02' in repository central (http://repo1.maven.org/maven2)
Downloading: http://repo1.maven.org/maven2/javax/servlet/servlet-api/1.2_02/servlet-api-1.2_02.jar
[INFO] Unable to find resource 'javax.servlet:servlet-api:jar:1.2_02' in repository central (http://repo1.maven.org/maven2)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to resolve artifact.

Missing:
----------
1) javax.servlet:servlet-api:jar:1.2_02

  Try downloading the file manually from the project website.

  Then, install it using the command: 
      mvn install:install-file -DgroupId=javax.servlet -DartifactId=servlet-api -Dversion=1.2_02 -Dpackaging=jar -Dfile=/path/to/file

  Alternatively, if you host your own repository you can deploy the file there: 
      mvn deploy:deploy-file -DgroupId=javax.servlet -DartifactId=servlet-api -Dversion=1.2_02 -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]

  Path to dependency: 
    1) org.hibernate.tutorials:hibernate-tutorial:jar:1.0.0-SNAPSHOT
    2) javax.servlet:servlet-api:jar:1.2_02

----------
1 required artifact is missing.

for artifact: 
  org.hibernate.tutorials:hibernate-tutorial:jar:1.0.0-SNAPSHOT

from the specified remote repositories:
  central (http://repo1.maven.org/maven2) 
```

有趣的教程：我期待学习一些 Hibernate，但我发现自己正在学习 Maven。:)

**更新 4：**`javax.servlet`我将版本 更正为**2.4**，现在一切正常。

**得到教训：**

1.  Maven 的 pom.xml 需要一个`<version>`for each & every 依赖项。
2.  那`<version>`的价值必须是有效的。
3.  创建一个新的 Maven 项目，然后完全替换它的 pom.xml 是可行的，但它仍然使用 Workspace 下的不正确子目录创建它，因为无法`<name>`在基于向导的创建过程中定义它。
4.  创建一个plain `Java Project`，然后将其添加`pom.xml`到其目录，然后刷新Package Explorer 视图是推荐的方式（无需重命名子目录）。
5.  该教程推荐了 Maven 的“标准布局”，但随后使用声明的包“org.hibernate.tutorial.domain”打破了它，它与预期的包“main.java.org.hibernate.tutorial.domain”不匹配**......**采用 Eclipse 的修复建议将包重命名为*"main.java.org.hibernate.tutorial.domain"*。（并将 Event.java 移动到新重命名的包中！）
6.  [Hibernate 配置命令](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-configuration)（`mvn exec:java -Dexec.mainClass="org.hsqldb.Server"`等）必须从 pom.xml 所在的目录运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:42:48.423

最简单的是创建一个新的 maven 项目并使用`maven-archetype-quickstart`原型。

这将创建一个基本的 Maven 项目，您应该可以从那里开始。

请注意，maven 项目只是一个使用 Maven 构建它的 Java 项目，因此您将在项目中看到一个 pom.xml 文件。

使用这个 pom 文件，您可以构建项目，包括外部依赖项等等。如果您正在使用 eclipse 进行开发，我建议您使用 m2e 插件来帮助您更好地管理 maven 项目：http: [//eclipse.org/m2e/](http://eclipse.org/m2e/)

您指定的每个依赖项都应该有一个与之关联的版本号。

例如

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.5.6-Final</version>
    </dependency>   
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency> 
```

要获得正确的版本号，只需 google artifactid maven 依赖项。例如 hibernate-core maven 依赖。

查找 maven 中央存储库的链接 - 即[http://mvnrepository.com](http://mvnrepository.com)。如果你在谷歌上找不到它，你可以直接在网站上搜索，但是我发现它的搜索功能很差。

将您的Java 代码`src/main/java`和您的资源放入`src/main/resources`（例如xml 文件等）。

然后，您可以使用`mvn clean install`

# entity-framework - 单元测试双向 EF 关系

> ID：13918205
> 
> 赞同：9
> 
> 时间：2012-12-17T16:40:36.410
> 
> 标签：entity-framework, unit-testing

我正在做一个小型实践项目来提高我的单元测试技能。我首先使用实体​​框架代码。

我正在使用 FakeDBSet，它适用于简单的实体列表。当返回实体树时，事情就不那么好了。特别是不维护两种方式的关系，因为这是实体框架魔法的一部分。

我有两节课：

```
public class Book
{
    public virtual ICollection<Review> Reviews {get; set;}
}

public class Review
{
    public virtual Book Book { get; set;}
} 
```

如果我将书设置为评论，则评论不会添加到该书的评论集中。使用 EF 时会这样做，但在我的假版本中不会。

有没有办法模拟这种行为，或者我不应该依赖 EF 来实现双向关系？还是模拟数据上下文只是浪费时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T19:44:29.310

这实际上是一个非常普遍的问题（并且没有一个很好的答案）。在 EF 内部发生了一个称为 fixups 的过程，该过程在检测更改循环内运行（在添加/删除和一些其他更改时触发的那个）。这会评估模型中的反向链接。当您开始模拟您的上下文时，您将丢失检测更改循环以及因此的修复。

在过去，我通过了解我的模拟的这个特殊限制并确保我以正确的方式执行我的设置代码以使代码有意义（这让面对它非常不理想）来解决这个问题。这里的另一个选择是在单元测试中使用某种形式的真正轻量级数据库并继续使用 EF。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T13:26:49.853

我发现的一个可能的解决方案是创建一个模拟 EF 修复代码的模拟对象。

下面是一个使用 Mocking 框架 NSubstitute 的示例：

```
private static Book CreateMockBook()
{
    var book = Substitute.For<Book>();

    // Mock EF fixup: Add a review to collection should also set book for the review
    book.Reviews.Add(Arg.Do<Review>((x) => { if(x.Book != book) x.Book = book; }));

    return book;
}

private static Review CreateMockReview()
{
    var review = Substitute.For<Review>();

    // Mock EF fixup: Set a book for the review should also should add the review to book's review collection
    review.When(x  => x.Book = Arg.Any<Book>()).Do(x => review.Book.Review.Add(review));

    return review;
} 
```

这工作得很好，但我不确定是否需要模拟这种行为是否表明我的测试过于复杂，或者我的代码正在使用它不应该使用的副作用。

我很想知道其他人对此有何看法？

# security - 防止跨站点脚本攻击？

> ID：13918207
> 
> 赞同：1
> 
> 时间：2012-12-17T16:40:55.520
> 
> 标签：security, xss, cross-site

我们最近使用 hikashop 建立了一个网站 (http://www.doverjewelry.com/)，该域具有 Godaddy 网站保护功能，因此它会扫描网站并警告漏洞。扫描当前报告该网站容易受到跨站点脚本攻击。这是扫描输出：

```
Using the GET HTTP method, Site Scanner found that :
+ The following resources may be vulnerable to XSS (on parameters names) :
/bands-and-settings/category/371-all-ring-settings/limit_hikashop_catego
ry_information_module_223_371-0/limitstart_hikashop_category_information
_module_223_371-0/filter_order_hikashop_category_information_module_223_
371-a.ordering/filter_order_Dir_hikashop_category_information_module_223
_371-ASC/688ae9879a2df0fc5b840aeabd44a6ec-1/type-atom?<<<<<<<<<<foo"bar'
314>>>>>=1
-------- request --------
GET /bands-and-settings/category/371-all-ring-settings/limit_hikashop_category_information_module_223_371-0/limitstart_hikashop_category_information_module_223_371-0/filter_order_hikashop_category_information_module_223_371-a.ordering/filter_order_Dir_hikashop_category_information_module_223_371-ASC/688ae9879a2df0fc5b840aeabd44a6ec-1/type-atom?<<<<<<<<<<foo"bar'314>>>>>=1 HTTP/1.1\r
Host: www.doverjewelry.com\r
Accept-Charset: iso-8859-1,utf-8;q=0.9,*;q=0.1\r
Accept-Language: en\r
Connection: Close\r
Cookie: 7eedc822c6dd39ecf3c8ab00003d56f9=764a229107bda6b48c2863965f50ca03\r
User-Agent: Mozilla/5.0 (compatible; MSIE 7.0; MSIE 6.0; Site Scanner Bot; +http://www.websiteprotection.com) Firefox/2.0.0.3\r
Pragma: no-cache\r
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, image/png, */*
------------------------
-------- output --------

[...] bd44a6ec-1/type-atom?<<<<<<<<<<foo"bar'314>>>>>=1" method="post" name="ad [...]
<div class="hikashop_products_pagination hikashop_products_paginat [...]
------------------------
/engagement-rings/category/366-antique-engagement-rings/limit_hikashop_c
ategory_information_module_222_366-25/limitstart_hikashop_category_infor
mation_module_222_366-0/filter_order_hikashop_category_information_modul
e_222_366-a.ordering/filter_order_Dir_hikashop_category_information_modu
le_222_366-ASC/688ae9879a2df0fc5b840aeabd44a6ec-1/type-atom?<<<<<<<<<<fo
o"bar'314>>>>>=1
-------- request --------
GET /engagement-rings/category/366-antique-engagement-rings/limit_hikashop_category_information_module_222_366-25/limitstart_hikashop_category_information_module_222_366-0/filter_order_hikashop_category_information_module_222_366-a.ordering/filter_order_Dir_hikashop_category_information_module_222_366-ASC/688ae9879a2df0fc5b840aeabd44a6ec-1/type-atom?<<<<<<<<<<foo"bar'314>>>>>=1 HTTP/1.1\r
Host: www.doverjewelry.com\r
Accept-Charset: iso-8859-1,utf-8;q=0.9,*;q=0.1\r
Accept-Language: en\r
Connection: Close\r
Cookie: 7eedc822c6dd39ecf3c8ab00003d56f9=764a229107bda6b48c2863965f50ca03\r
User-Agent: Mozilla/5.0 (compatible; MSIE 7.0; MSIE 6.0; Site Scanner Bot; +http://www.websiteprotection.com) Firefox/2.0.0.3\r
Pragma: no-cache\r
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, image/png, */*
------------------------
-------- output --------

[...] bd44a6ec-1/type-atom?<<<<<<<<<<foo"bar'314>>>>>=1" method="post" name="ad [...]
<div class="hikashop_products_pagination hikashop_products_paginat [...]
------------------------
/engagement-rings/category/366-antique-engagement-rings/limit_hikashop_c
ategory_information_module_222_366-25/limitstart_hikashop_category_infor
mation_module_222_366-0/filter_order_hikashop_category_information_modul
e_222_366-a.ordering/filter_order_Dir_hikashop_category_information_modu
le_222_366-ASC/688ae9879a2df0fc5b840aeabd44a6ec-1/type-rss?<<<<<<<<<<foo
"bar'314>>>>>=1
-------- request --------
GET /engagement-rings/category/366-antique-engagement-rings/limit_hikashop_category_information_module_222_366-25/limitstart_hikashop_category_information_module_222_366-0/filter_order_hikashop_category_information_module_222_366-a.ordering/filter_order_Dir_hikashop_category_information_module_222_366-ASC/688ae9879a2df0fc5b840aeabd44a6ec-1/type-rss?<<<<<<<<<<foo"bar'314>>>>>=1 HTTP/1.1\r
Host: www.doverjewelry.com\r
Accept-Charset: iso-8859-1,utf-8;q=0.9,*;q=0.1\r
Accept-Language: en\r
Connection: Close\r
Cookie: 7eedc822c6dd39ecf3c8ab00003d56f9=764a229107bda6b48c2863965f50ca03\r
User-Agent: Mozilla/5.0 (compatible; MSIE 7.0; MSIE 6.0; Site Scanner Bot; +http://www.websiteprotection.com) Firefox/2.0.0.3\r
Pragma: no-cache\r
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, image/png, */*
------------------------
-------- output --------

[...] abd44a6ec-1/type-rss?<<<<<<<<<<foo"bar'314>>>>>=1" method="post" name="ad [...]
<div class="hikashop_products_pagination hikashop_products_paginat [...]
------------------------
/engagement-rings/category/50-estate-engagement-rings/limit_hikashop_cat
egory_information_module_222_50-0/limitstart_hikashop_category_informati
on_module_222_50-0/filter_order_hikashop_category_information_module_222
_50-a.ordering/filter_order_Dir_hikashop_category_information_module_222
_50-ASC/688ae9879a2df0fc5b840aeabd44a6ec-1/type-atom?<<<<<<<<<<foo"bar'3
14>>>>>=1 
```

我们认为它是指产品页面底部的分页形式。这是其中一个产品页面的表单代码：

```
<form action="http://www.doverjewelry.com/engagement-rings/category/50-estate-engagement-rings?filter_order_hikashop_category_information_module_222_50=%3C%3C%3C%3C%3C%3C%3C%3C%3C%3Cfoo%22bar'204%3E%3E%3E%3E%3E" method="post" name="adminForm_hikashop_category_information_module_222_50_bottom">

        <div class="hikashop_products_pagination hikashop_products_pagination_bottom">

        <div class="list-footer">

<div class="limit">Display #<select id="limit_hikashop_category_information_module_222_50" name="limit_hikashop_category_information_module_222_50" class="inputbox" size="1" onchange="this.form.submit()">
    <option value="20" selected="selected">20</option>
    <option value="5">5</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="20" selected="selected">20</option>
    <option value="25">25</option>
    <option value="30">30</option>
    <option value="50">50</option>
    <option value="100">100</option>
    <option value="0">all</option>
</select>
</div><span class="pagenav_start_chevron">&lt;&lt; </span><span class="pagenav pagenav_text">Start</span><span class="pagenav_previous_chevron"> &lt; </span><span class="pagenav pagenav_text">Prev</span> <span class="pagenav">1</span> <a class="pagenav" title="2" onclick="javascript: document.adminForm_hikashop_category_information_module_222_50_bottom.limitstart_hikashop_category_information_module_222_50.value=20; document.adminForm_hikashop_category_information_module_222_50_bottom.submit();return false;">2</a> <a class="pagenav" title="3" onclick="javascript: document.adminForm_hikashop_category_information_module_222_50_bottom.limitstart_hikashop_category_information_module_222_50.value=40; document.adminForm_hikashop_category_information_module_222_50_bottom.submit();return false;">3</a> <a class="pagenav" title="Next" onclick="javascript: document.adminForm_hikashop_category_information_module_222_50_bottom.limitstart_hikashop_category_information_module_222_50.value=20; document.adminForm_hikashop_category_information_module_222_50_bottom.submit();return false;">Next</a><span class="pagenav_next_chevron"> &gt;</span> <a class="pagenav" title="End" onclick="javascript: document.adminForm_hikashop_category_information_module_222_50_bottom.limitstart_hikashop_category_information_module_222_50.value=40; document.adminForm_hikashop_category_information_module_222_50_bottom.submit();return false;">End</a><span class="pagenav_end_chevron"> &gt;&gt;</span>
<div class="counter">Page 1 of 3</div>
<input type="hidden" name="limitstart_hikashop_category_information_module_222_50" value="0">
</div>
        <span class="hikashop_results_counter">
Results 1 - 20 of 48</span>

        </div>

        <input type="hidden" name="filter_order_hikashop_category_information_module_222_50" value="a.ordering">

        <input type="hidden" name="filter_order_Dir_hikashop_category_information_module_222_50" value="ASC">

        <input type="hidden" name="18aa959f74c6262cdb2863f0ffaff82e" value="1">
    </form> 
```

我们已经与 hikashop 的人员讨论过这个问题，他们说我们需要更新到他们的最新版本（我们的版本仅比最新版本低一个）但是我们对代码进行了一些主要的修改以包含一些客户请求所以我们不想丢失这些更改（也许将来我们会更新到最新版本，但现在我们只想知道是否有快速解决此问题的方法）。

表单真的容易受到跨站点脚本攻击吗？我们可以做些什么来保护它或让 godaddy 站点扫描仪停止显示此警告消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:53:27.853

从扫描仪的输出中，他认为当他发出带有附加参数的请求时：

```
<<<<<<<<<<foo"bar'314>>>>>=1 
```

这个参数打印了我们在输出中看到的内容：

```
type-atom?<<<<<<<<<<foo"bar'314>>>>>=1 
```

这可能意味着您的页面容易出现 XSS，但其中许多扫描仪会忘记编码......同样的问题是例如 scannig LifeRay 和 w3af。但是您的 html 代码会打印：

```
%3C%3C%3C%3C%3C%3C%3C%3C%3C%3Cfoo%22bar'204%3E%3E%3E%3E%3E 
```

所以似乎附加的参数 althogh 被转义了......所以它不是严格容易受到 XSS 的影响。如果您想了解更多信息，请访问[XSS - Cheat Sheet](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)，您可以使用其他一些漏洞扫描器/代理来确认此问题：ZAP、WebScarab、w3af。

# ios - ios - 如何从另一个 JSON 格式的字符串中提取字符串？

> ID：13918208
> 
> 赞同：0
> 
> 时间：2012-12-17T16:41:10.027
> 
> 标签：ios, nsstring

我有一个这样的 NSString：

```
[{"comment":"I am just weighing the idea."}] 
```

如何将其转换为 JSON 对象并获取注释键的值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:44:03.930

您可以使用 iOS 的`NSJSONSerialization`对象从 JSON 字符串/数据中获取对象图。该 API 需要一个 NSData，因此首先您需要将字符串放入其中。

```
NSData * jsonData = [myString dataUsingEncoding:NSUTF8StringEncoding];
NSArray * root = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:NULL];
NSString * comment = [[root objectAtIndex:0] objectForKey:@"comment"]; 
```

处理后，该根对象应该是一个数组或字典。在您的情况下，它显然是一个包含字典的数组。

# hibernate - 如何将 Hibernate 和 Solr 集成在一起？

> ID：13918211
> 
> 赞同：4
> 
> 时间：2012-12-17T16:41:24.527
> 
> 标签：hibernate, solr, full-text-search, hibernate-search

对于使用 Hibernate 来管理他们的对象持久性的人来说，Hibernate 搜索是一个真正的救星。
在尝试开发类似的功能（收集所有对象更改并在事务提交时将它们发送到全文搜索引擎）之后，您很快就会发现那里有很多陷阱。
另一方面，Solr 有其自身的优势（例如，如果您需要它，例如 1:m 方面），这使其在某些情况下成为合适的决定。
因此，如果我使用 Hibernate 作为 JPA 提供者并在 Solr 上索引我的对象，这些组件如何集成在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:41:24.527

如果您想同时使用它们，事实证明这是可能的，尽管这需要一些编程工作。
这个想法是与 Hibernate Search 一起完成所有艰苦的工作，然后收集对象的更改并将它们转发给 Solr。
这可以通过将 Hibernate Search 配置为使用 JMS 或通过实现 BackendQueueProcessor 类并将其注册为休眠搜索处理器来完成。
如果您想查看一个工作示例，请查看[hibernate_search_solr_integration](https://github.com/avner-levy/hibernate_search_solr_integration)。
请记住，这只是一个概念演示，您可能需要处理许多问题，例如连接故障、同步问题、线程并发、软提交优化等......

# types - 选项和类型确定 f#

> ID：13918212
> 
> 赞同：1
> 
> 时间：2012-12-17T16:41:25.880
> 
> 标签：types, f#

我正在做一个名为“2dShapeEditor”的项目，您应该能够在表单上创建、单击和拖动不同类型的形状。在我现在所处的项目阶段，我需要确定我的目标矩形是哪种类型。它被初始化为“选项”，但可以通过“hittest”更改单击的特定矩形。

然后，我将我的 move 方法应用到这个矩形，使其随鼠标移动。

我的类型 RectangleZ

```
type RectangleZ(x:int, y:int)= 
  let mutable thisx = x
  let mutable thisy = y
  let mutable thiswidth = 50
  let mutable thisheight = 20
  let brush = new SolidBrush(Color.Black)
  member obj.x with get () = thisx and set x = thisx <- x
  member obj.y with get () = thisy and set y = thisy <- y
  member obj.width with get () = thiswidth and set width = thiswidth <- width
  member obj.height with get () = thisheight and set height = thisheight <- height
  member obj.thisColor = Color.FromArgb(167, 198, 253)
  member obj.draw(paper:Graphics) = paper.FillRectangle(brush, thisx, thisy, 50, 20)
  member obj.ShapeType = "Rectangle" 
```

我最热门的方法：

```
let rec getShape (e:MouseEventArgs) (inputl:List<RectangleZ>) = match inputl with 
                                                               |[] -> None
                                                               |s::tail->if(((e.X >= s.x) && (s.x <= (s.x + s.width))) && ((e.Y >= s.y) && (e.Y <= (s.y + s.height)))) then Some(s) else getShape e tail //Some(s) 
```

我的目标矩形如下所示：

```
let mutable targetedRec = None 
```

我的“Move()”方法如下所示：

```
let Move (e:MouseEventArgs) = if(targetedRec = None) then None else targetedRec.Value.x <- e.X
                                                                    targetedRec.Value.y <- e.Y 
```

“Move()”方法给了我错误：“基于此程序点之前的信息查找不确定类型的对象。在此程序之前可能需要类型注释来约束对象的类型。这可能允许查找要解决。”

是的，编译器提示我出了什么问题以及如何修复它，我尝试过匹配 if 语句，但我根本不明白什么是错误的以及如何修复它。如果我删除了targetedRec 的Option 类型并将其作为“RectangleZ”类型，我的很多项目都会失败，因为我不能留空if 语句。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:26:50.473

'targetedRec' 推断出什么类型？（您可以通过将鼠标悬停在其上并查看 Intellisense 工具提示来判断。）

从您发布的内容来看，F# 编译器只能推断“targetedRec”的类型`'a option`——也就是说，编译器知道它是一个选项（因为你已经分配`None`给它），但它不能告诉它是什么该选项的类型参数应该是。然后，您会在`Move`方法中看到错误，因为编译器无法判断`x`and`y`字段属于什么类型。

不过，这很容易解决——只需在你的声明中添加一个类型注释`targetedRec`，如下所示：

```
let mutable targetedRec : RectangleZ option = None 
```

仅此一项就可以解决问题，但是您也可以通过使用模式匹配而不是手动检查属性`Move`来稍微清理一下您的方法：`Value`

```
let Move (e : MouseEventArgs) =
    match targetedRec with
    | None -> ()
    | Some targetedRec ->
        targetedRec.x <- e.X
        targetedRec.y <- e.Y 
```

# postgresql - 如何捕获客户端信号并终止后端的 postgresql 查询？

> ID：13918216
> 
> 赞同：1
> 
> 时间：2012-12-17T16:41:35.113
> 
> 标签：postgresql, signals

postgres 客户端正在运行一个可能长时间运行的查询。客户端收到一个 SIGTERM。理想情况下，我希望客户端捕获 SIGTERM，通过发送 a 来清理其查询`pg_cancel_backend(pid)`，然后退出。

这似乎是客户端-服务器数据库架构的常见问题，但我找不到任何解决方案。相反，查询将一直持续到完成，消耗不必要的资源。

客户端如何确定其后端查询的PID？（我并不是说以交互方式查看后端查询并选择与发出的查询相匹配的查询。）例如，PID 是否与持久数据库连接相关联？

`psql`当按下 ctrl-C 时，这是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:20:16.743

您可以使用`pg_backend_pid()`获取`PID`当前连接。

详情[在这里](http://www.postgresql.org/docs/current/static/functions-info.html)。

# list - yii 中来自其他控制器的下拉列表

> ID：13918217
> 
> 赞同：-2
> 
> 时间：2012-12-17T16:41:36.550
> 
> 标签：list, drop-down-menu, controller, yii

我想列出我模型的所有对象，并将所选模型的 id 写入文件。使用 SiteController 我呈现我的页面，但我应该使用什么模型？

```
$models = myModel::model()->findAll();
$list = CHtml::listData($models, 'id', 'name');

echo CHtml::dropDownList( ???? , $select, $list); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:47:11.377

如果我得到你想要做的事情，你说的是两个模型。像 tbl_product => 产品和 tbl_category => 类别。

出于演示目的：假设您要创建一个新产品，并且每个产品都必须属于一个类别，那么您可以使用活动下拉菜单。使用与您类似的代码，您可以说：

```
$category = Category::model()->findAll();
$list = CHtml::listData($category, 'id', 'name'); 
```

需要注意的重要一点是 CHtml::activeDropDownList() 需要不同类型的参数。它和 CHtml::dropDownList() 之间的主要区别在于 activeDropDownList( 与模型相关联，而 dropDownList() 则没有。

```
public static string activeDropDownList(CModel $model, string $attribute, array $data, array $htmlOptions=array ())

public static string dropDownList(string $name, string $select, array $data, array $htmlOptions=array ()) 
```

因此，使用该示例，假设我们的 Product 模型有一个名为 category_id 的字段，那么将使用以下任一方法生成下拉列表：

```
CHtml::activeDropDownList($model, 'category_id', $list); 
```

或者如果您创建了这样的 Activeform 对象：

```
$form=$this->beginWidget('CActiveForm'); 
```

那么你可以像这样创建下拉列表：

```
$form->dropDownList($model, 'category_id', $list); 
```

其中 $model 将是 Product 模型。

希望这有用。

# asp.net-mvc-4 - 自动检查非空值的动作参数（ASP.Net MVC 4）

> ID：13918221
> 
> 赞同：1
> 
> 时间：2012-12-17T16:41:51.557
> 
> 标签：asp.net-mvc-4

如果参数为空，是否有开箱即用的方法使 MVC 抛出异常。

我想要类似的东西：

```
public ActionResult Index([NotNull] string productId) {
    ...
} 
```

因此，与其做非空检查内联或使用代码合同，我更愿意用`NotNull`.

# java - Java HttpURLConnection 没有 cookie

> ID：13918223
> 
> 赞同：1
> 
> 时间：2012-12-17T16:41:59.170
> 
> 标签：java, cookies, http-post, httpurlconnection, missing-cookies

英语：

您好，我目前正在尝试使用 HttpURLConnection 登录，然后获取会话 cookie...

我已经在我自己的服务器上的一些测试页面上尝试过，并且效果很好。当我发送“a=3&b=5”时，我得到“8”作为 cookie（PHP 页面将两者加在一起）！但是当我在另一个页面上尝试时，输出只是页面，就好像我没有用 POST 发送任何内容:(

欢迎提出一般性的改进建议！:)

我的代码：

```
HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
conn.setDoInput(true);
conn.setDoOutput(true);
conn.setRequestMethod("POST");
conn.setRequestProperty("useragent", "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0");
conn.setRequestProperty("Connection", "keep-alive");
DataOutputStream out = new DataOutputStream(conn.getOutputStream());
out.writeBytes("USER=tennox&PASS=*****");
out.close();

BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line;
String response = new String();
while ((line = in.readLine()) != null) {
    response = response + line + "\n";
}
in.close();

System.out.println("headers:");
int i = 0;
String header;
while ((header = conn.getHeaderField(i)) != null) {
    String key = conn.getHeaderFieldKey(i);
    System.out.println(((key == null) ? "" : key + ": ") + header);
    i++;
}
String cookies = conn.getHeaderField("Set-Cookie");
System.out.println("\nCookies: \"" + cookies + "\""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:00:55.793

我看到以下可能为什么您没有获得 cookie。

*   服务器根本不发送 cookie
*   服务器不使用值 PASS 和 USER
*   服务器希望在登录前进行会话。
*   POST 协议错误或不完整
*   服务器需要 GET 参数

# magento - 如何在 magento 的付款选择部分将图像添加到我的付款方式名称？

> ID：13918224
> 
> 赞同：0
> 
> 时间：2012-12-17T16:42:08.280
> 
> 标签：magento

我为付款方式创建了一个模块。由于这种方法并不为人所知，我想在付款块中的名称旁边放置一张图片，并将其链接到我们的常见问题解答。

将图像放在那里的最佳方法是什么？

一些帖子建议将 HTML 直接放在名称的标题中；这似乎可行，但该名称也用于其他地方（例如在管理员中），并且看起来像是一个黑客。

到目前为止，我想出的最好的方法是添加一些 jquery 代码以将 html 注入到 onepage 结帐页面中，但是如果我观察通过轮播的步骤并在付款部分展开后注入 html，我只能做到这一点，因为magento 为其重置 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:59:55.623

也许在您的块中创建一个函数，该函数返回名称并可选择返回图像。

这是一些伪代码：

```
function getName($addImage = 0){
    $html = '<span class="my-payment-name">' . $this->getName();
        if ($addImage == 1) :
            $html = $html . '<img src="' . $this->getImage() . '" />';
        endif;
    $html = $html . '</span>;
 return $thml;
} 
```

# java - 我如何设置 Jetty 使其等同于 Tomcat，同时支持 JSP 和 Servlet？

> ID：13918229
> 
> 赞同：-1
> 
> 时间：2012-12-17T16:42:20.700
> 
> 标签：java, jsp, tomcat, servlets, jetty

我安装了一个带有几个 web 应用程序的 Tomcat，其目的是使用另一个 JSP/Servlet 引擎。码头似乎很合适。

我按照 eclipse/jetty 页面上的说明下载了 Jetty 8 并成功启动它。但是对于如何将我的 webapps 从 Tomcat 转移到 Jetty，我有点迷茫。我需要能够同时运行 JSP 和 Servlet。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:57:24.543

基本上...将战争文件复制到 $jetty.home/webapps 目录中。

由于您需要 JSP 支持，请在此处查看如何启用它：

[http://wiki.eclipse.org/Jetty/Howto/Configure_JSP](http://wiki.eclipse.org/Jetty/Howto/Configure_JSP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:46:59.190

JSP 和 servlet 可以打包在 WAR 中，就像它们为 Tomcat 打包并使用`WebAppContext.setWar()`.

您可以通过重复调用`setWar`. 这个[博客](http://deepintojee.wordpress.com/2010/12/01/jetty-configuration-to-deploy-multiple-wars-in-integration-testing/)有更多细节。

# zend-framework2 - Zend Framework 2 PDO“不喜欢”操作

> ID：13918237
> 
> 赞同：1
> 
> 时间：2012-12-17T16:42:39.940
> 
> 标签：zend-framework2, predicatebuilder

我需要在哪里进行“不喜欢”操作。我知道我可以这样做：

`$predicate->like($a,$b);`

但我找不到一种方法来执行“不喜欢”和其他否定的“不喜欢”。有什么办法，否则我将不得不在哪里制作字符串？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:51:25.817

`notLike`正如您提到的，在 where 对象上没有方法。但是有一种`literal`方法可以让你传递任何你想要的东西：

```
$sql = new Sql($adapter);
$select = $sql->select();
$select->from('foo')
       ->where->literal('NOT LIKE ?', array('bar'));

echo $select->getSqlString(); 
```

输出将是：

```
SELECT "foo".* FROM "foo" WHERE NOT LIKE 'bar' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T17:07:51.210

供那些想要添加 notLike() 的 Object 方法而不是使用 literal() 的人参考

```
$predicate->notLike( $a, $b ); 
```

创建**ZF2/Db/Sql/Predicate/NotLike.php**

```
namespace Zend\Db\Sql\Predicate;

class NotLike extends Like {

    protected $specification = '%1$s NOT LIKE %2$s',

} 
```

在**ZF2/Db/Sql/Predicate/Predicate.php**添加

```
public function notLike( $identifier, $like ) {
    $this->addPredicate( new NotLike( $identifier, $like ), ($this->nextPredicateCombineOperator) ? : $this->defaultCombination  );
    $this->nextPredicateCombineOperator = null;
    return $this;
} 
```

测试

```
$select = new Select;
$select->from( 'dbTable' )
->columns( array() )
->where->notLike( 'column', '%test%' );

echo $select->getSqlString(); 
```

# vb.net - 上传图像多部分表单 HTTPWebRequest - 将图像数据转换为字符串？

> ID：13918238
> 
> 赞同：3
> 
> 时间：2012-12-17T16:42:41.543
> 
> 标签：vb.net, image, file-upload, httpwebrequest, stringbuilder

我正在尝试使用 HTTPWebRequest 上传多部分表单，并且在添加要上传的图像之前一切正常，主要是我尝试执行与浏览器发出的完全相同的请求，如下所示：

```
-----------------------------41184676334
Content-Disposition: form-data; name="file"; filename="guitar tape.jpg"
Content-Type: image/jpeg

IMAGEDATAHERE
-----------------------------41184676334
Content-Disposition: form-data; name="save"

save
-----------------------------41184676334-- 
```

我不知道如何格式化/读取图像以将其设置为我在下面提出的请求：

```
 Dim boundary As String = "-----------------------------" & DateTime.Now.Ticks.ToString("x")
        Dim req As HttpWebRequest = DirectCast(WebRequest.Create("http://www.mysite.com/upload.php"), HttpWebRequest)
        req.Method = "POST"
        req.ContentType = "multipart/form-data; boundary=" & "---------------------------" & DateTime.Now.Ticks.ToString("x")
        req.KeepAlive = False
        Dim builder As New StringBuilder()
        builder.Append(boundary & vbCrLf & "Content-Disposition: form-data; name=""variable1""" & vbCrLf & vbCrLf & "1" & vbCrLf)
        builder.Append(boundary & vbCrLf & "Content-Disposition: form-data; name=""file""; filename=""" & FileName & """" & vbCrLf)
        builder.Append("Content-Type: application/octet-stream")
        builder.Append(vbCrLf & vbCrLf)
        ' Add Photo Here
        If UpdateImage = True Then
            ' Load Image
            Dim ImageData As System.Drawing.Image
            Dim fs As New System.IO.FileStream(ImagePath, System.IO.FileMode.Open)
            ImageData = Image.FromStream(fs)
            fs.Close()
            ' Add Image To Header
            builder.Append(ImageData)
            builder.Append(vbCrLf)
        Else
            builder.Append(vbCrLf)
        End If
        builder.Append(boundary & vbCrLf & "Content-Disposition: form-data; name=""save""" & vbCrLf & vbCrLf & "save")
        ' Footer Bytes
        Dim close As Byte() = Encoding.UTF8.GetBytes("--")
        Dim postHeader As String = builder.ToString()
        Dim postHeaderBytes As Byte() = Encoding.UTF8.GetBytes(postHeader)
        Dim boundaryBytes As Byte() = Encoding.ASCII.GetBytes(vbCrLf & boundary & "--" & vbCrLf)
        Dim length As Long = postHeaderBytes.Length + boundaryBytes.Length
        req.ContentLength = length
        Dim requestStream As Stream = req.GetRequestStream()
        Dim fulllength As Integer = postHeaderBytes.Length + boundaryBytes.Length
        ' Write out our post header
        requestStream.Write(postHeaderBytes, 0, postHeaderBytes.Length)
        ' Write out the trailing boundary
        requestStream.Write(boundaryBytes, 0, boundaryBytes.Length)
        Dim responce As WebResponse
        responce = req.GetResponse()
        requestStream.Close()
        Dim s As Stream = responce.GetResponseStream()
        Dim sr As New StreamReader(s)
        Dim Content As String = sr.ReadToEnd() 
```

目前它只是将“System.Drawing.Bitmap”作为图像数据发布，但我不确定如何为看起来像这样的图像获取相同的原始数据：

```
 J©õÝ¨e‚Lnž¿Ëã/Ç§úÐ5ý¼C÷Cý>ß’t;fm—=Äw:�/E±ËÙÏ$á@%Pc>×    Šgw.²Ab“:ÅÓù:Ï¯Ìh6à€Z§Ó‚g£®hÚD6¨Ø^Ú2ô`ä¨L�YÆÄÅCX#I“ÈÌãj¦L˜•’|¥�Eb¡ëQ–¤Ú, 3\UzL  öÔoj4�•±’u«c¼#„oÕ`îF>·o—ŠûÅ«ÎÑ™¶Ç˜ýº*i°œÈVŒ�Qû”Ñ[.�ÔmçE•ì¦eNCh�Ù
é§�É$m¿ôš"»ÌNæ(VÌmp›F¹XÈ88™ªüµ…d•XµÔÜ#�ˆŠv‘º‚F‚§Yûb 
```

关于如何做到这一点或者我需要改变我的方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:04:05.563

```
 builder.Append(ImageData) 
```

是不正确的。您需要将图像读取为字节，然后将 byte[] 添加到多部分帖子中。

请参阅[Using HttpWebRequest to POST data/upload image using multipart/form-data 中的详细信息](https://stackoverflow.com/questions/3890754/using-httpwebrequest-to-post-data-upload-image-using-multipart-form-data)

并确保使用 http 嗅探器（即提琴手）来查看它实际发送的内容。

首先，将图像加载到字节数组中，然后将其转换为 base64：

```
imgBase64 = Convert.ToBase64String(my_image_byte_array) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-16T17:49:12.607

我的“OpenFileDialog”名称是“文件”。单击“按钮”时，将弹出一个对话框，用于选择 jpg、jpeg、png 图像文件，还可以添加 bmp 或任何图像文件类型。然后在选择图像文件后，它将显示在“PictureBox”上，我将其命名为“picboxProfileID”。

在 Visual Basic 中：

```
 file.Filter = "image file (*.jpg, *.jpeg, *.png) | *.jpg; *.jpeg; *.png | all files (*.*) | *.*"
    If (file.ShowDialog <> Windows.Forms.DialogResult.Cancel) Then
        picboxProfileID.Image = Image.FromFile(file.FileName)
        picboxProfileID.ImageLocation = file.FileName
        txtName.Text = file.FileName
        My.Computer.Network.UploadFile(file.FileName, "http://localhost/VTVTS/uploadImageSample.php")
    Else
        picboxProfileID.Image = Nothing
    End If 
```

上传文件的目的地将上传到创建的父文件夹 php 文件的“images/”。

在 PHP 中：

```
<?php
$response = array();
$image = $_FILES['file'];

$imageName = $image['name'];
$imageTmpName = $image['tmp_name'];
$imageSize = $image['size'];
$imageError = $image['error'];
$imageType = $image['type'];

$fileExt = explode('.', $imageName);
$fileActualExt = strtolower(end($fileExt));

$allowed = array('jpg', 'jpeg', 'png');
if(in_array($fileActualExt, $allowed)){
    $fileNameNew = uniqid('', true).".".$fileActualExt;
    $fileDestination = 'images/'.$fileNameNew;
    $newDestination = move_uploaded_file($imageTmpName, $fileDestination);
    $response['error'] = false;
    $response['message'] = "Upload Image Successful";
}else{
    $response['error'] = true;
    $response['message'] = "You cannot upload files of this type!";
}
echo json_encode($response); 
```

快乐编码！

# tfs - 如何将审核请求与 TFS 2012 中的多个变更集相关联

> ID：13918242
> 
> 赞同：30
> 
> 时间：2012-12-17T16:43:04.710
> 
> 标签：tfs, tfs-code-review

我们的开发过程是这样工作的：每两周，团队负责人（我）会检查每个人的变更集，以确保它们符合编码标准。我想使用 TFS 2012 来帮助自动化这个过程。

这有两个问题：

1.  没有办法提交未经请求的代码审查。如果有必要，我可以没有这个生活，我想

2.  无法将代码审查与多个变更集相关联。这是一个交易破坏者

我读过一篇文章说可以在事后将变更集链接到工作项，当我打开工作项进行请求审查时，我确实看到了“链接”选项卡。但是，当我单击“新建”或“链接到...”时，没有链接到变更集的选项。只有一个选项可以链接到流程中的每个工作项类型。

有人知道怎么做这个吗？是否有计划将这些功能添加到 TFS？

这是一个屏幕截图：

![找不到变更集选项... :(](../Images/e75c99d3ae9fbc1c50a4114782c21afd.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T00:33:00.963

1.  不请自来的，没有。
2.  您可以右键单击历史屏幕中的变更集以请求审核后签入。

并且有一个讨厌的解决方法来获得您想要实现的目标。查看您要查看的所有文件并请求查看。然后您可以撤消结帐，搁置集和审核请求将保留。

或者，您可以转到源代码控制选项卡并在解决方案的根文件夹上执行 checkout-all，请求审查，撤消签出并进行审查。

至于将变更集链接到工作项，这可以在签入后完成。打开工作项，转到链接选项卡并单击“链接到...”下拉菜单将有一个“变更集”选项。但我不认为代码审查请求启用了这种链接类型，因为它们使用 Shelveset 而不是一组变更集作为代码审查的源。

![在此处输入图像描述](../Images/729006e5d00567ec39095c814d01d46e.png)

我希望您可以使用 TFS API 生成一个搁置集，其中包含特定开发人员在给定时间范围内的所有更改，将它们放在搁置集上并请求对其进行审查。但是不存在这样做的现有功能。

或者，您可以通过创建一个具有相同名称的新搁置集来编辑与评论关联的搁置集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:06:47.097

另一种方法：

1) 在两周周期开始时，启动代码审查流程并记下创建的工作项编号。只需请求您自己进行审核，一开始无需更改代码。

2) 让您的所有开发人员将他们接下来 2 周的签到与该工作项相关联#

3) 当您准备好执行审查时，只需打开工作项并检查变更集。

那应该完成你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-08T18:02:49.203

**选项#3**

[*我在这里假设您尝试关联到单个代码审查的变更集是连续的，例如 20001:20010* ]

1.  我“回滚 [ed] 回一个特定的变更集”（在我上面的 20001 示例中）。我在更改中检查它。代码现在处于其原始状态。

2.  然后，我“回滚 [ed] 到一个特定的变更集”（在我上面的 20010 示例中）并再次签入。代码现在处于最终状态。

3.  最后，我要求对最新版本进行审查。这篇评论比较了最近的两个提交——我从回滚中创建的那些。

作为奖励，您可以比较历史页面中的特定变更集。您可以使用此比较来确保上述提交确实将代码恢复到修订版 20001 和 20010。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-16T16:06:23.410

关于第 2 项，我有一个标准的解决方法，您可能希望将来自许多变更集的所有更改合并到一个*搁置*集中以供审查。我尝试了上面提到的签出方法并遇到了问题，部分原因是我的评论有 25 个左右的文件，并且在签出它们之后，如果我刷新，TFS 会将它们从待处理的更改中删除，因为 TFS 认为没有任何更改。

首先，（假设您的更改已经签入，并且在多个变更集中），拥有一个工作区，其中包含磁盘路径上的最新文件，例如 D:\Latest...

创建一个新的“本地”工作区（称为“Review”），将同一个项目映射到稍微不同的路径（例如，D:\Review..."）获取所有文件。转到该项目的历史记录和之前您最早的变更集，右键单击并选择“获取此版本”。

此时，转到历史记录并回滚其他人可能同时更改的任何更改集，如果有的话，您不想参与审查，除非有人更改了公共文件。留下那些。

使用超越比较，将“D:\Latest...”与“D:\Review...”进行比较，将您的更改从“Latest”复制到“Review”。进入公用文件并仅复制您要查看的行。当 Beyond Compare 写出更改时，TFS 将检测更改并将您保存的文件放入“Review”工作区的待处理更改列表中。（这是本地工作区的一个功能。）

此时，您只需从“审阅”工作区中搁置待处理的更改，并请求对该搁置集进行审阅。

# java - Java中无向图的边

> ID：13918245
> 
> 赞同：0
> 
> 时间：2012-12-17T16:43:10.270
> 
> 标签：java, graph, equals

假设我正在编写一个 Java 类来表示无向图的边。这个类`Edge`包含两个顶点`to`和`from`。

```
类边缘<顶点> {

  私人最终顶点到，从

  公共边缘（顶点到，顶点来自）{
    这.to = to;
    this.from = 从；
  }
  ... // getter, equals, hashCode ...
}

```

显然`e1 = new Edge(v1, v2)`，`e2 = new Edge(v2, v1)`在无向图中实际上是相同的。是否有意义？您将如何实施课程`Edge`以满足该要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:59:05.500

根据一些唯一标识符对构造函数中的顶点执行排序。这样，无论顺序如何，它们都可以一致地存储。

我发现这比 noMAD 的解决方案更可取，因为与这些对象交互的所有代码都会以相同的方式对待它们，而不仅仅是您的`equals`.

此外，调用您的班级成员`to`并且`from`令人困惑，因为它听起来像一个有向图。我会将它们重命名为更通用的名称，例如`vertex1`and `vertex2`。

```
 public Edge(Vertex x, Vertex y) {
      if (vertex2.getId() > vertex1.getId()) {
          this.vertex1 = x;
          this.vertex2 = y;
      } else {
          this.vertex1 = y;
          this.vertex2 = x;
      }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:59:21.043

实际上，我的`Edge`课堂上不会有这种逻辑，而是某种监督类，例如`Graph`类。这样做的原因是因为 an`Edge`只是一个有 2 个顶点的对象。它对图中的其余边一无所知。

因此，为了扩展@noMad 的答案，我实际上会将他的`checkIfSameEdge`方法放在我的`Graph`课堂上：

```
public class Graph {
    private List<Edge> edges;
    ....
    public void addEdge(Edge e) {
        for (Edge edge : edges) {
            if (isSameEdge(edge, e) {
                return; // Edge already in Graph, nothing to do
        }
        edges.add(e);
    }
    private boolean isSameEdge(Edge edge1, Edge edge2) {
        return ((edge1.to.equals(edge2.to) && edge1.from.equals(edge2.from))
             || (edge1.to.equals(edge2.from) && edge1.from.equals(edge2.to)))
    }
} 
```

顺便说一句：我会重命名`to`and `from`to `vertex1`and`vertex2`因为它是一个无向图，并且 to 和 from 指示方向，但这只是我的意见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:58:24.263

推测节点包含某种标量值 - 根据这些值对参数进行排序（使用 compareTo 方法）并使用工厂创建新实例或返回现有实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T16:51:00.133

好吧，在我看来，最天真的方法是：

```
protected boolean checkIfSameEdge(Vertex to, Vertex from) {
  if(to.equals(this.from) && from.equals(this.to) || to.equals(this.to) && from.equals(this.from)) {
    return true;
  return false;
} 
```

显然你将不得不覆盖`equals`和`hashcode`

# html - 悬停时编辑链接

> ID：13918249
> 
> 赞同：0
> 
> 时间：2012-12-17T16:43:21.867
> 
> 标签：html, css

如何在个人资料图片上显示编辑链接，就像在 facebook 上一样，但位于图片的右上角？

HTML 代码：

```
<div class="topgrid">
     <a href="#"><img src="C:/images/users/image1.png"/>               
        <span class="image" id="image">Edit Picture</span>
     </a>
</div> 
```

CSS 代码：

```
.image {
color:#033;
font-size:12px;
background:#FFF;
display:none;
top:0;
right:0;
width:80px;
position:absolute;
}

.topgrid:hover .image{
display:block;
cursor:pointer;
}

.topgrid {
background-color:gray;
height:100px;
width:100px;
position:relative;
} 
```

​我这里使用的是span元素的固定宽度，但是当我没有指定span元素的宽度时，该元素不会出现在绝对的右上角。所以我必须将正确的属性调整为：

```
right:13%; 
```

这不是标准的方法。我需要你的宝贵建议！

我还在这里附上了试用过的小提琴！

[http://jsfiddle.net/nQvEW/81/](http://jsfiddle.net/nQvEW/81/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:42:06.633

试试这个[小提琴](http://jsfiddle.net/b6Yw6/2/)

CSS：

```
.image {
  position:relative;
  color:#033;
  font-size:12px;
  background:#FFF;
  display:none;
  top:0;
}

.topgrid:hover .image{
  display:block;
  cursor:pointer;
  position:relative;
  width:auto;
  background:none;
  top:-205px;
}

.topgrid {
  text-align:right;
  width:300px;
  height:200px;
  margin:20px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T02:57:39.903

这是你要找的吗？

span 元素**没有固定宽度，一直在右上角**！

```
.image {
color:#033;
font-size:12px;
background:#FFF;
display:none;
width:auto;
float:right;
}

.topgrid:hover .image{
display:block;
margin:0 auto;
cursor:pointer;
}

.topgrid {
background-color:gray;
height:100px;
width:100px;
position:relative;
} 
```

​这里 **是更新的小提琴：http: [//jsfiddle.net/b6Yw6/15/](http://jsfiddle.net/b6Yw6/15/)**

我所做的是：

1.  将跨度宽度设为**auto**并给出**float:right**。
2.  从 span 中删除了**position:absolute;top:0;right:0属性。**如果导致浏览器兼容性问题，请添加它们

你也可以做

```
.image{
   background:transparent;
   color:white;
   font-weight:500;
} 
```

让它看起来不错！

这是根据您的要求的新[小提琴](http://jsfiddle.net/b6Yw6/15/)！告诉我是否还有其他需要进行的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:46:38.053

第一步是让图像成为背景图像而不是直接`<img>`标记。这将允许您添加子节点。

添加一个这样的子节点：编辑链接。让它出现在你想要的地方，暂时忽略“仅在悬停时”部分。

准备好后，添加`display:none`. 然后，在*容器*`:hover`的样式（即）中，添加. 完毕。*`#container:hover>#editlink``display:block`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:53:55.920

或者您可以在每次悬停时使用动态 html 标记生成*

# java - 切换对象引用

> ID：13918254
> 
> 赞同：-3
> 
> 时间：2012-12-17T16:43:37.237
> 
> 标签：java, object, reference, clone

我有这两个对象（`u1`和`u2`，分别分配给`Object 1`和`Object 2`）

```
u1 = Object 1;
u2 = Object 2; 
```

现在我想稍后切换分配，所以我会使用这个：

```
u1 = Object 2;
u2 = null; 
```

我试过这个：

```
u1 = u2;
u2 = null 
```

但这不起作用，因为`u1`和`u2`都被分配了`null`。

我该如何解决这个问题？我不能使用克隆方法，因为我需要的不仅仅是浅拷贝

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:44:38.457

尝试 ：

```
u1 = Object 1; 
u2 = Object 2;
Object tmp = u1;
u1 = u2;
u2 = tmp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:45:46.323

为什么你认为这行不通？

```
Object u1 = new SomeObject();
Object u2 = new SomeObject();

u1 = u2;
u2 = null; 
```

# javascript - 使用 Javascript 更改“视图”的最佳方法是什么？

> ID：13918265
> 
> 赞同：0
> 
> 时间：2012-12-17T16:44:13.167
> 
> 标签：javascript, templates

例如，我有个人资料页面并使用“关于”、“照片”、“视频”部分等进行选择，并且我不想每次更改部分时都刷新页面，我只想更改容器的内容Javascript。当然，在 Javascript 文件中编写页面标记并不方便，我的想法是编写每个视图的 div 并仅显示其中一个：

`<div id="about>About content</div>`

`<div id="photos" style="display: none;">Photos content</div>`

但是，我认为有更好的方法可以做到这一点，因为我不喜欢在页面上保留隐藏视图。同样在大多数情况下，视图中的内容应该由脚本生成，所以它看起来像是模板引擎的工作，但我不确定 Javascript 中是否有这样的内容。

那么在 Javascript 中实现这一点的最佳方法是什么。我希望我的想法很清楚。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:47:54.233

尝试使用[mustache](http://mustache.github.com/)它是 javascript 的模板引擎。

此外，您可以使用[AngularJS](http://angularjs.org/)模板（按需动态加载到页面中），非常易于使用。（但是包含您可能不想要的其他东西......但应该想要;））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:48:25.217

每当用户单击链接时，使用 jQuery 获取视图。

比如绑定点击事件：

```
$('#clickToSeePhotos').click(function(){
    $('#photosContainer').load('pathTo/photos.html');
});

$('#clickToSeeAbout').click(function(){
    $('#aboutContainer').load('pathTo/about.html');
}); 
```

这是html：

```
<a id="clickToSeePhotos" href="#">Photos<a/>
<div id="photosContainer"></div>

<a id="clickToSeeAbout" href="#">About<a/>
<div id="aboutContainer"></div> 
```

这是 jQuery 页面的链接，他们在其中提供了更多信息和示例`load` [http://api.jquery.com/load/](http://api.jquery.com/load/)

您可以下载 jQuery 库并在您的服务器上使用它。但是，正如@Cybrix 建议的那样，您也可以指向 Google 托管的库。请参阅[此链接](https://developers.google.com/speed/libraries/devguide)。最后，这可以提高用户的性能。

# jsf - 在 facelet 视图中定位错误的最佳方法是什么？

> ID：13918266
> 
> 赞同：0
> 
> 时间：2012-12-17T16:44:16.810
> 
> 标签：jsf, primefaces, rendering, facelets

昨晚，在我的 JSF2 + Primefaces Web 应用程序中渲染 facelet (XHTML) 时，我正努力找出问题所在。

最终发现它与设置在“p:button”上的不存在的结果名称有关：

```
<p:button rendered="#{p:ifGranted('ROLE_CUSTOMER_EDITION')}" outcome="user" icon="ui-icon ui-icon-pencil" styleClass="icon icon-only" title="Edit customer">
<f:param name="id" value="#{customer.id}"/>
</p:button> 
```

该错误与“用户”结果有关，而“客户”是正确的，但我得到的 Tomcat/Server 日志输出与此类似：

```
java.lang.NullPointerException
    at org.primefaces.component.button.ButtonRenderer.buildOnclick(ButtonRenderer.java:128)
    at org.primefaces.component.button.ButtonRenderer.encodeMarkup(ButtonRenderer.java:59)
    at org.primefaces.component.button.ButtonRenderer.encodeEnd(ButtonRenderer.java:38)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1763)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at org.primefaces.component.datatable.DataTableRenderer.encodeRegularCell(DataTableRenderer.java:760)
    at org.primefaces.component.datatable.DataTableRenderer.encodeRow(DataTableRenderer.java:722)
    at org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:626)
    at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:248)
    at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:224)
    at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:108)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:401)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:169)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:168)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

当你有一个大的 xhtml 文件时，什么没有给我关于错误的线索。

问题是：

是否有任何机制可以获取更多关于 JSF2 中的标记出了什么问题的提示？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:52:40.227

这实际上是 PrimeFaces 中的一个错误。（标准）JSF/Facelets 无能为力。

最好的办法是向 PrimeFaces 报告问题。为了更好地理解问题，您应该查看导致 NPE 的行的源代码。PrimeFaces 只是开源的，所以做起来相对容易。

顺便说一句，这不是 PrimeFaces 在渲染响应期间导致 NPE 的唯一组件/属性。[它在更多其他地方也有点太容易了](https://www.google.com/search?q=primefaces%20nullpointerexception%20javax.faces.component.UIComponent.encodeAll&oq=primefaces%20nullpointerexception%20javax.faces.component.UIComponent.encodeAll)。它不会对所有属性进行严格的错误检查。

# vbscript - 如何使用 VBSedit 创建一个 8MB 的文本文件？

> ID：13918270
> 
> 赞同：0
> 
> 时间：2012-12-17T16:44:28.083
> 
> 标签：vbscript, hta

我需要创建各种大小的文件。如何创建一个 8MB 的？

（最好创建一个 HTA 应用程序并指定文件大小）

我可以创建对用户更友好的 HTA 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:03:39.743

创建一个（文本）文件并写入 8 mb 数据：

```
dir
...
               0 File(s)              0 bytes

>> Dim oFS : Set oFS = CreateObject("Scripting.FileSystemObject")
>> oFS.CreateTextFile("8mb.txt", True).Write String(8000000,"x")

dir
...
17.12.2012  18:00         8.000.000 8mb.txt 
```

# c# - .NET 中传递数组的性能比较

> ID：13918271
> 
> 赞同：0
> 
> 时间：2012-12-17T16:44:33.140
> 
> 标签：c#, .net, arrays

在 C# 中（可能在 VB.NET 中）有三种方法可以将常量值数组传递给函数，即：

```
byte[] buffer = {0};
someFunction(buffer); 
```

* * *

```
byte[] buffer = new byte[] {0};
someFunction(buffer); 
```

* * *

```
someFunction(new byte[] {0}); 
```

而简单的类型转换数组声明符是无效的语法：

```
someFunction((byte[]) {0}); 
```

**问题：**

三种工作方法在 CPU 使用率、内存分配和整体程序大小方面的性能差异是什么？关键字的使用是否`new`对 RAM 的使用或分配有任何影响，尤其是在函数调用后声明的变量立即超出范围的情况下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T16:46:21.923

所有这些有效方法都将以完全相同的方式传递一个数组。您演示了三种合法声明和初始化数组的方法，并且每次将该数组传递给另一个方法。

> someFunction((byte[]) {0});

根本不是有效的声明语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T16:50:20.003

```
byte[] buffer = {0}; 
```

只是一个语法快捷方式

```
byte[] buffer = new byte[] {0}; 
```

和

```
someFunction(new byte[] {0}); 
```

只是一个语法快捷方式

```
byte[] some_tmp_variable_1 = new byte[] {0};
someFunction(some_tmp_variable_1); 
```

因此，正如其他人所得出的结论，您实际上并没有以不同的方式将数组传递给方法 - <strong>您始终执行完全相同的操作：所有三段代码都分配本地堆栈存储以供参考，所有三个通过执行堆分配`new`并使用提供的值初始化数组内存。最后，全部通过值将数组引用传递给方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T16:47:30.923

除了最后一个示例，您的编译器会将所有 3 个第一个示例更改为相同的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T16:47:13.797

`someFunction((byte[]) {0});`只是简单的错误语法，所有其他的都一样，这里唯一的区别是你的`buffer`变量的范围。

没有开销。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T16:47:31.813

前三个编译后完全相同。

第四个是不正确的。

# c# - currentKeyboardState 按下

> ID：13918274
> 
> 赞同：1
> 
> 时间：2012-12-17T16:44:46.620
> 
> 标签：c#, xna

我正在使用 XNA 编写游戏教程，但我正在稍微修改它。我没有根据持续时间将弹丸添加到数组中，而是尝试通过按空格键将它们添加到数组中。所以这样用户就可以控制发射导弹。

```
 if (currentKeyboardState.IsKeyDown(Keys.Space))
  {
      AddProjectile(player.Position + new Vector2(player.Width / 2, 0));
  }

   private void AddProjectile(Vector2 position)
   {
       Projectile projectile = new Projectile();
       projectile.Initialize(GraphicsDevice.Viewport, projectileTexture, position);
       projectiles.Add(projectile);
   } 
```

但是我遇到了一个小问题。由于我使用的是 IsKeyDown() 方法，导弹将被添加到射弹数组中，直到释放空格键。是否有一种方法可以注册按键而不是 IsKeyDown()。

![IsKeyDown](../Images/6c099d45037f65a31af76c0d77b06da2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:56:03.040

添加一个跟踪先前键盘状态的字段

```
KeyboardState _previousKeyboardState = Keyboard.GetState(); 
```

您将**在`Update`**. 您现在可以进行边缘检测：

```
KeyboardState currentKeyboardState = Keyboard.GetState();
if(_previousKeyboardState.IsKeyUp(Keys.Space) 
   && currentKeyboardState.IsKeyDown(Keys.Space))
{
    //action
}
_previousKeyboardState = currentKeyboardState; //update previous state 
```

想法是：*如果在之前的通过中键没有被按下，但现在它被按下，做这个动作。*

# java - 构建多个具有动态依赖关系的 java 项目

> ID：13918275
> 
> 赞同：0
> 
> 时间：2012-12-17T16:44:46.913
> 
> 标签：java, ant, build, compilation, project

我在一个文件夹中有多个 java 项目。还有一个包含库的第二个文件夹，可以用作项目的构建依赖项。这些项目也可能依赖于其他项目。构建所有项目的最佳方法是什么？

换句话说，我想在不明确告知它们的依赖关系的情况下构建项目。我认为最大的问题是项目之间的依赖关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:25:52.870

您可以使用多种构建系统。[Maven](http://maven.apache.org)内置了一个完整的依赖系统。几乎所有第三方开源 jar 都可以通过 World Wide Maven 存储库系统直接访问。基本上，您描述了您需要的 jar（groupId、artifactId 和 version），Maven 会自动为您获取它。不仅如此，Maven 还将构建您的项目，而无需创建构建文件。相反，您必须在*项目对象模型*（文件）中*描述*您的项目，Maven 将下载您需要的所有内容，包括所有编译器等。*`pom.xml`*

 *几乎所有新项目都使用 Maven，但 Maven 有一些缺点：

*   由于您无法控制构建过程，因此有时感觉就像戳黑盒子以使构建以您想要的方式工作。
*   文档可能很少——尤其是当您超越基本的 Java 编译时。
*   您通常必须以特定的布局安排您的项目。例如，`src/main/java`当 JUnit 测试在`src/test/java`. 您不必遵循推荐的布局，但是您必须以`pom.xml`这种方式和那种方式修改文件才能使您的构建工作。这首先破坏了 pom.xml 的全部目的。
*   如果您已经有另一个构建系统设置（如 Ant），那么您将失去一切。从 Ant 迁移到 Maven 没有简单的方法。

另一个叫做 Ant with [Ivy](http://ant.apache.org/ivy)。Ivy 使用 Ant 进行构建，但可以访问 Maven 的全球存储库系统以获取第三方依赖项。如果您已经对 Ant 进行了大量投资，那么这是一个很好的折衷方案。我还发现 Ant with Ivy 的文档比 Maven 更好（尽管这并不太难）。[Manning Publication 的Ant in Action](http://www.manning.com/loughran/)中有一章很好的介绍了 Ivy 的基础知识。

无论使用哪种过程，我都建议您使用[Nexus](http://www.sonatype.org/nexus/)或[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)构建公司范围的 Maven 存储库。这样，任何专有的第三方 jar（如 Oracle jar）也可以存储在您公司范围的 Maven 存储库中，因为它们不会在标准的 World Wide Maven 存储库中。

顺便说一句，如果这是公司范围内的工作，并且您要将多个 Ant 项目转移到 Ivy，我在[Github](http://github.com/qazwart/ivy.dir)中使用了一个 Ivy 项目，它使事情变得更容易。

哦，还有第三种可能性，叫做[Gradle](http://www.gradle.org)，我一无所知。我也相信它可以使用 World Wide Maven 存储库。它基于基于 Java 语法的 Groovy，我只能这么说。也许其他人可以填写您的详细信息。Gradle 小组认为它解决了 Ant/Ivy 和 Maven 的许多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:03:16.003

您可以使用[Apache Ivy](http://ant.apache.org/ivy)做到这一点。您可以为您的公共库布置位置，在每个项目的 ivy.xml 文档中定义已发布的工件和相互依赖关系，并让具有 Ivy 任务的顶级 Ant 构建确定构建顺序应该基于什么那些依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:49:28.883

无论您使用什么工具，如果您有各种相互依赖的项目，您需要在构建依赖项目之前明确哪些独立的项目将首先构建。你需要为你的项目有一个清晰的依赖结构。*

# iphone - UICollectionView：一行或一列

> ID：13918276
> 
> 赞同：39
> 
> 时间：2012-12-17T16:44:50.563
> 
> 标签：iphone, objective-c, ios, xcode, uicollectionview

我想用来`UICollectionView`显示缩略图的水平滚动列表，但是，我希望它是单行。在另一个视图中，我在 a 中显示缩略图，`UICollectionView`但这个是垂直滚动的，并且它在一个列中。

目前，我这样做的方式是将集合视图的大小更改为仅足以容纳一个项目，以便它自动包装并工作，但现在我正在处理可变大小的项目，所以它不再工作了。

如何使`UICollectionView`显示一行或一列？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-10T10:53:46.017

我猜你正在使用内置的`Flow Layout`. 但是，对于您的情况，您应该自定义`UICollectionView Layout`. 使其成为子类`UICollectionViewFlowLayout`并在方法中添加以下代码`init`：

```
- (id)init {
    if ((self = [super init])) {
        self.scrollDirection = UICollectionViewScrollDirectionHorizontal;
        self.minimumLineSpacing = 10000.0f;
    }
    return self; 
} 
```

这是让它在这里`minimumLineSpacing`有一条线的关键。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-07T13:00:27.957

我发现设置`minimumLineSpacing`刚刚使我的滚动区域非常大，并且设置`minimumInteritemSpacing=big`完成将项目保持在一个滚动行或列中，居中在`collectionview`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-15T03:40:10.287

如果您可以信任类型转换，则没有真正的理由进行子类化。

```
((UICollectionViewFlowLayout *)self.collectionView.collectionViewLayout).minimumLineSpacing = 1000.0f; 
```

如果你从一个 nib 加载你的 collectionView，你也可以在 Attributes 和 Size Inspectors 中使用参数。

滚动方向也是如此。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-15T11:16:17.063

当您初始化时，在 init 参数中`UICollectionView`传递以下内容。`UICollectionViewFlowLayout`

注意：您不需要创建子类`UICollectionViewFlowLayout`

```
var collectionViewFlowControl = UICollectionViewFlowLayout()
collectionViewFlowControl.scrollDirection = UICollectionViewScrollDirection.Horizontal 
```

对于 0 px 单元格间距：

```
collectionViewFlowControl.minimumInteritemSpacing = 0;
collectionViewFlowControl.minimumLineSpacing = 0;

collectionView = UICollectionView(frame: CGRectMake(0, 0, self.view.frame.size.width, 120), collectionViewLayout: collectionViewFlowControl) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-12-06T02:36:58.780

在 iOS 13 中，感谢 UICollectionViewCompositionalLayout，这很简单，因为您可以*指定*水平布局中每列的单元格数，或垂直布局中每行的单元格数。这是一个简单的示例，用于单个水平滚动、垂直居中的单元格行：

```
func layout() -> UICollectionViewCompositionalLayout {
    let itemSize = NSCollectionLayoutSize(
        widthDimension: .fractionalWidth(1),
        heightDimension: .fractionalHeight(1))
    let item = NSCollectionLayoutItem(layoutSize: itemSize)
    let groupSize = NSCollectionLayoutSize(
        widthDimension: .absolute(75),
        heightDimension: .absolute(75))
    let group = NSCollectionLayoutGroup.vertical(
        layoutSize: groupSize, subitem: item, count: 1) // *
    group.edgeSpacing = NSCollectionLayoutEdgeSpacing(
        leading: nil, top: .flexible(0),
        trailing: nil, bottom: .flexible(0))
    let section = NSCollectionLayoutSection(group: group)
    section.interGroupSpacing = 65
    let config = UICollectionViewCompositionalLayoutConfiguration()
    config.scrollDirection = .horizontal
    let layout = UICollectionViewCompositionalLayout(
        section: section, configuration:config)
    return layout
} 
```

将您的集合视图设置`collectionViewLayout`为该函数调用的输出，一切就绪。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-09T10:35:19.013

对于斯威夫特 3

```
let flowLayout = UICollectionViewFlowLayout()
flowLayout.itemSize = CGSize(width: UIScreen.main.bounds.width/2-10, height: 190)
flowLayout.sectionInset = UIEdgeInsetsMake(0, 5, 0, 5)
flowLayout.scrollDirection = UICollectionViewScrollDirection.horizontal
flowLayout.minimumInteritemSpacing = 0.0
self.gCollectionView.collectionViewLayout = flowLayout 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-17T15:20:54.463

无论 CollectionView 的高度如何，这对我来说都可以获取单行单元格。将单元格的最小间距设置为 1000

[![故事板 UICollectionView](../Images/094c743845c023a4f0b84e53de38c905.png)](https://i.stack.imgur.com/m9oQT.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-05T17:47:32.387

我认为文档是最好的：

`minimumLineSpacingForSectionAt`：

*对于垂直滚动网格，此值表示连续行之间的最小间距。对于水平滚动网格，此值表示连续列之间的最小间距。此间距不适用于页眉和第一行之间或最后一行和页脚之间的空间。*

`minimumInteritemSpacingForSectionAt`：

*对于垂直滚动网格，此值表示同一行中项目之间的最小间距。对于水平滚动网格，此值表示同一列中项目之间的最小间距。这个间距是用来计算一行可以放多少个item，但是在item个数确定后，实际间距可能会向上调整。*

因此，如果您`scrollDirection`是水平的，则需要设置`minimumInteritemSpacingForSectionAt`为`CGFloat.greatestFiniteMagnitude`，如果`scrollDirection`是垂直的，则需要设置`minimumLineSpacingForSectionAt`为`CGFloat.greatestFiniteMagnitude`以获取一行`collectionView`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-20T17:49:45.527

我想要一列，左对齐，其他答案对我没有帮助。

所以这是我非常简单的一列解决方案，左对齐：

```
class GCOneColumnLeftAlignedFlowLayout: UICollectionViewFlowLayout {
    override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        let attributes = super.layoutAttributesForElements(in: rect)

        var y: CGFloat = sectionInset.top
        attributes?.forEach { layoutAttribute in
            layoutAttribute.frame.origin.x = sectionInset.left
            layoutAttribute.frame.origin.y = y
            y = y + layoutAttribute.frame.height + minimumLineSpacing
        }

        return attributes
    }
} 
```

你还应该设置类似

```
estimatedItemSize = CGSize(width: 120, height: 40) 
```

不要忘记删除线

```
minimumLineSpacing = big number 
```

从其他解决方案。

希望这会有所帮助，因为与其他答案相比，这是一种完全不同的方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-26T05:58:43.810

```
 UICollectionViewFlowLayout *layout=[[UICollectionViewFlowLayout alloc] init];
 [layout setScrollDirection:UICollectionViewScrollDirectionHorizontal];

 layout.minimumInteritemSpacing = 0;
 layout.minimumLineSpacing = 0;

 blendEffectCollectionView=[[UICollectionView alloc] initWithFrame:CGRectMake(0, 95, 320, 60) collectionViewLayout:layout];
 [blendEffectCollectionView setDataSource:self];
 [blendEffectCollectionView setDelegate:self];
 [blendEffectCollectionView registerClass:[BlendModeCell class] forCellWithReuseIdentifier:@"cellIdentifier"];
 [blendEffectCollectionView setBackgroundColor:[UIColor clearColor]];

 [bottomActivityView addSubview:blendEffectCollectionView]; 
```

# c# - 为什么我不能更改 Rhino Mocks 存根对象的返回值？

> ID：13918281
> 
> 赞同：4
> 
> 时间：2012-12-17T16:45:19.343
> 
> 标签：c#, unit-testing, mocking, rhino-mocks, stub

如果这是一个愚蠢的问题，请原谅我，但我在嘲笑方面还很陌生，并且正在努力解决这个问题。

我有一些单元测试（使用内置的 Visual Studio 2010 Professional 测试功能），它们使用方法所需的存根。我创建了一个存根，并为几个属性和一个方法设置了默认返回值，一切正常。我有一个设置存根的静态类，它用于`TestInitialize`设置存根的方法中......

```
public static AppointmentReminderProviderInterface GetMockProvider() {
  AppointmentReminderProviderInterface provider = MockRepository.GenerateStub<AppointmentReminderProviderInterface>();
  provider.Stub(p => p.ContactName).Return(MockProviderContactName);
  provider.Stub(p => p.ContactEmail).Return(MockProviderContactEmail);
  return provider;
} 
```

请注意，`MockProviderContactName`和`MockProviderContactEmail`是包含提供程序默认数据的本地字符串属性。检查以查看事情是否按照默认数据的预期工作的单元 tsts 都通过了。

但是，我现在想测试当这些属性之一包含 duff 数据时会发生什么。我以为我可以在存根上设置它，但它不起作用。测试方法包含以下几行...

```
_provider.Stub(p => p.ContactEmail).Return("invalid");
Debug.WriteLine("Provider email: <" + _provider.ContactEmail + ">"); 
```

这`Debug.WriteLine()`向我表明，尽管我已将`ContactEmail`属性设置为返回“无效”，但它仍然返回默认电子邮件地址。这会导致我的测试失败，因为我希望它会抛出异常，但它不会。

有人知道为什么我不能更改此属性的返回值吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T19:27:52.560

作为一个棘手但有效的解决方案，我建议在这里使用*Do 处理程序*。它允许为存根方法/属性实现一些逻辑。

参见示例：

```
var providerContactEmail = "Email1";

provider
    .Stub(p => p.ContactEmail)
    .Do((Func<string>)(() => providerContactEmail));
// here provider.ContactEmail returns "Email1"

providerContactEmail = "Email2";
// now provider.ContactEmail returns "Email2" 
```

但在我看来，如果可以找到允许在测试过程中不更改返回值的解决方案会更好。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T00:41:22.737

尝试改变

```
_provider.Stub(p => p.ContactEmail).Return("invalid"); 
```

至

```
_provider.ContactEmail = "invalid"; 
```

假设 ContactEmail 有一个设置器，这应该可以工作。如果这不能解决您的问题，我会遵循 Alexander Stepaniuk 的建议并重构您的测试，这样您就不会为同一个存根添加多个行为；我认为这与你的问题有关。

# c++ - const 参数与 const 参考参数

> ID：13918283
> 
> 赞同：9
> 
> 时间：2012-12-17T16:45:24.367
> 
> 标签：c++, optimization, reference, constants, alias

实施1：

```
foo(const Bar x); 
```

实施2：

```
foo(const Bar & x); 
```

如果对象不会在函数内更改，你为什么要复制它（实现 1）。

这会被编译器自动优化吗？

**摘要**：即使对象`const`在函数声明中被声明，仍然可以通过其他别名来编辑对象`&`。

如果您是编写库的人并且知道您的函数不这样做，或者对象足够大以证明每次操作的取消引用成本是合理的， `foo(const Bar & x);`那么这就是要走的路。

**第 2 部分**：

> 这会被编译器自动优化吗？

由于我们确定它们并不总是等价的，而且等价的条件很重要，编译器通常很难确保它们，所以*几乎可以肯定* **没有**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:47:17.227

实际上，在这些情况下，您通常会使用方法 2。

通常，如果对象很小，您只会使用方法 1，因此复制一次比通过引用重复访问它更便宜（这也会产生成本）。正是出于这个原因，在[TC++PL](http://www.amazon.co.uk/C-Programming-Language-Special/dp/0201700735)中，Stroustrup 开发了一个复数类并按值传递它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T17:01:25.633

你问，

> “如果对象不会在函数内更改，你为什么要复制它（实现 1）。”

好吧，在某些奇怪的情况下，通过引用传递的对象可能会被其他代码更改，例如

```
namespace g { int x = 666; }

void bar( int ) { g::x = 0; }

int foo( int const& a ) { assert( a != 0 );  bar( a );  return 1000/a; }  // Oops

int main() { foo( g::x ); } 
```

但自 1990 年代中期以来，这从未发生在我身上。

因此，这种**别名**是该类型的单个参数的*理论问题*。

使用相同类型的两个参数，它获得了更多真正的可能性。例如，赋值运算符可能会传递调用它的对象。当参数按值传递时（如交换习语的最小形式），没问题，但如果不是，则通常需要避免*自赋值。*

你进一步问，

> “这会被编译器自动优化吗？”

不，一般来说，由于上述原因

编译器通常不能保证引用参数不会有别名（但是，一个例外是调用的机器代码被内联的地方）

然而，另一方面，可以想象，该语言*可以*在这方面支持编译器，例如，通过为程序员提供一种明确接受任何此类优化的方法，例如，一种方式可以说“通过替换 pass by 来优化此代码是安全的通过引用传递的值，编译器，请随心所欲”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T16:57:00.947

在某些情况下它可能会被优化，但有很多事情可以阻止它。如果出现以下情况，编译器将无法避免复制：

*   复制构造函数或析构函数有副作用，传递的参数不是临时的。
*   您获取 的地址`x`或对它的引用，并将其传递给一些可能能够将其与原始地址进行比较的代码。
*   对象在`foo`运行时可能会发生变化，例如因为`foo`调用了*其他*一些改变它的函数。我不确定这是否是您要通过说“对象不会*在函数内*更改”来排除的事情，但如果不是，那么它就在起作用。

如果这些事情对你的程序很重要，你会复制它：

*   如果您想要复制的副作用，请复制
*   如果您希望“您的”对象与用户提供的参数具有不同的地址，请复制一份
*   如果您不想在函数运行期间看到对原始文件所做的更改，请复制一份

如果您认为副本会更有效，您也可以复制它，这通常被认为是“小”类型的情况，例如`int`. 标准算法中的迭代器和谓词也按值取值。

最后，如果您的代码无论如何都计划复制对象（包括通过分配给现有对象），那么一个合理的习惯用法是首先将副本作为参数。然后从您的参数移动/交换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T17:13:59.597

如果对象是从其他地方更改的怎么办？

```
void f(const SomeType& s);
void g(const SomeType s);

int main() {
    SomeType s;

    std::thread([&](){ /* s is non-const here, and we can modify it */}

    // we get a const reference to the object which we see as const, 
    // but others might not. So they can modify it.
    f(s);

    // we get a const *copy* of the object, 
    // so what anyone else might do to the original doesn't matter 
    g(s);
} 
```

如果对象是 const，但具有可变成员怎么办？然后您仍然可以修改对象，因此您是否拥有对原始对象的副本或引用非常重要。

如果对象包含指向另一个对象的指针怎么办？如果`s`是 const，则指针将是 const，但它*指向的*内容不受 const 的影响`s`。但是创建一个副本将（希望）给我们一个深拷贝，所以我们得到了我们自己的（const）对象和一个单独的（const）指针，指向一个单独的（non-const）对象。

在许多情况下，const 副本与 const 引用不同。

# php - “元对象”？

> ID：13918284
> 
> 赞同：3
> 
> 时间：2012-12-17T16:45:26.430
> 
> 标签：php, oop

我想做这样的事情：

```
class StrangeClass {

    public function somethingLikeAMethod($var) {
        /* ... */
    }

    public function awesomeTest() {
        /* ... */
    }

}

$obj = new StrangeClass;
$ex1 = $obj->somethingLikeAMethod(1);

$ex2 = $obj->somethingLikeAMethod(2);

$ex1 -> awesomeTest(); // This will output "1"
$ex2 -> awesomeTest(); // This will output "2" 
```

换句话说，我希望那个对象改变它的行为。

在 Lua 语言中，我可以使用“元表”来制作它，但我不知道如何在 OO-PHP 中制作它。谢谢你。

## 添加：

我在 Lua 中做了这样的事情：

```
local query = Database.query(...) -- now this variable has a query id
local query2 = Database.query(...) -- this is a other query id

local result = query.fetchAssoc() -- read below
local result2 = query.fetchAssoc() -- I called the same object with same method twice, but it will return other results 
```

## 添加#2：

我想做的事：

```
$db = new Database();

$firstResult = $db->query('SELECT * FROM `table`')->fetch_assoc();
$firstExample = $db->query("SELECT * FROM `table` WHERE `id` = '1'");
$secondExample = $db->query("SELECT * FROM `table` WHERE `id` = '2'");

$secondResult = $firstExample -> fetch_assoc();
$thirdResult = $secondExample -> fetch_assoc(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T16:48:44.890

上帝知道你为什么想要它，但这对你有用：

```
class StrangeClass {

    public function somethingLikeAMethod($var) {
        $this->test_var = $var;
        return clone $this;
    }

    public function awesomeTest() {
        echo $this->test_var;
    }

}

$obj = new StrangeClass;
$ex1 = $obj->somethingLikeAMethod(1);

$ex2 = $obj->somethingLikeAMethod(2);

$ex1->awesomeTest(); // This will output "1"
$ex2->awesomeTest(); // This will output "2" 
```

* * *

编辑：如果您正在寻找排队系统，您可以将每个查询推送到一个数组中，例如：

```
class StrangeClass {

    private $queries = array();

    public function somethingLikeAMethod($var) {
        $this->queries[] = $var;
        return $this;
    }

    public function awesomeTest() {
        if(count($this->queries) === 0){
            echo 'no queries left';
        }
        echo $this->queries[0];
        array_splice($this->queries,0,1);
    }

}

$obj = new StrangeClass;
$ex1 = $obj->somethingLikeAMethod("select * from hello");
$ex2 = $obj->somethingLikeAMethod("select * from me");
$ex2 = $obj->somethingLikeAMethod("select * from you");
$ex2 = $obj->somethingLikeAMethod("select * from my_friend");

$ex1->awesomeTest();
$ex2->awesomeTest();
$ex2->awesomeTest();
$ex2->awesomeTest();
$ex2->awesomeTest(); 
```

# c# - ListBox 中的 ListBox - 选择行为

> ID：13918286
> 
> 赞同：1
> 
> 时间：2012-12-17T16:45:29.707
> 
> 标签：c#, wpf, listbox

在`List`我存储了几个带有标题和子项目的项目

```
_categories = new List<Category>();

Category cOne = new Category() { Header = "Category one" };
cOne.AddItem("Sub One");
cOne.AddItem("Sub Two");
cOne.AddItem("Sub Three");
_categories.Add(cOne); 
```

在 WPF 中，我将这些项目绑定到一个`ListBox`.

```
<ListBox x:Name="listbox">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel>
        <TextBlock Text="{Binding Header}" />
        <ListBox ItemsSource="{Binding Subs}" Padding="10 0 0 0" />
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

我现在尝试但失败的是只制作内部`ListBox`可点击的项目，即避免：

![在此处输入图像描述](../Images/52336d2cadb01e13f8534d58de2dd6ff.png)

如果我设置`TextBlock.IsEnabled`或设置`TextBlock.IsHitTestVisible`为 false，则没有任何变化。如果`StackPanel's`属性设置为 false，则内部`ListBox`不再是可点击的，但有趣的是`TextBlock`仍然是。并且外部`ListBox's`属性根本阻止单击任何内容。

如果外部`ListBox`是 a ，则行为是相同的`ListView`。

我还没有弄清楚我需要更改什么以确保仅启用内部列表中的项目。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:54:03.863

如果不需要选择外部的项目`ListBox`，请不要使用`ListBox`- 使用 an`ItemsControl`代替：

```
<ItemsControl x:Name="itemsControl">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding Header}" />
                <ListBox ItemsSource="{Binding Subs}" Padding="10 0 0 0" />
            </StackPanel>
        </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl > 
```

# iphone - iOS Facebook 图形 API 发送状态图像 URL

> ID：13918290
> 
> 赞同：1
> 
> 时间：2012-12-17T16:45:36.290
> 
> 标签：iphone, ios, facebook, facebook-graph-api

实际上，我使用以下代码：

```
NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
[params setObject:@"message" forKey:@"message"];
[params setObject:@"status" forKey:@"type"];
[params setObject:@"name" forKey:@"name"];
[params setObject:@"caption" forKey:@"caption"];
[params setObject:@"description" forKey:@"description"];
[params setObject:@"http://www.domain.de/picture.png" forKey:@"picture"]; 
```

这可行，但名称现在链接到图片 URL。

如何在不使用“链接”键的情况下链接到域，因为我喜欢发布状态消息，而不是链接（例如在应用程序 runtastic 中）

谢谢，

基督教

# asp.net-mvc-4 - MVC 4 自定义路由

> ID：13918292
> 
> 赞同：1
> 
> 时间：2012-12-17T16:45:39.003
> 
> 标签：asp.net-mvc-4

我定义了以下路线：

```
routes.MapRoute(
            "Content Pages",
            "{action}",
            new { controller = "Pages", action = "Index" });

routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}/{title}",
             new { controller = "Home", action = "Index", 
                   id = UrlParameter.Optional, 
                   title = UrlParameter.Optional },
             new string[] { "MyCompany.Web.Controllers" }); 
```

我有一个名为 Pages 的控制器，它有一些操作，如“关于”、“常见问题”等，我想像这样访问：mywebsite.com/About

这目前有效，但现在我所有的其他控制器最终都在 url 中指定了它们的默认操作。我的操作链接`Books`呈现为 mywebsite.com/Books/Index。

如何修改我的路线以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:56:32.557

对于所有其他这样的控制器，我会有一个更通用的路由（但把它放在下面的页面路由之后）

```
routes.MapRoute(
            "Content Pages",
            "{controller}",
            new { Home= "Home", action = "Index" }); 
```

并将您的 Pages 更改为更具体地针对这两个操作（假设您没有 About 或 Faq 控制器）。

```
routes.MapRoute("About Page", "about", new { controller = "Pages", action = "About" });
routes.MapRoute("FAQ Page", "faq", new { controller = "Pages", action = "FAQ" }); 
```

# .net - 不能在同一台计算机上安装两个不同的 ClickOnce 应用程序

> ID：13918293
> 
> 赞同：2
> 
> 时间：2012-12-17T16:45:41.793
> 
> 标签：.net, wpf, clickonce

我有一个 .NET 4 WPF ClickOnce 部署，可以正常安装和工作。但是，我们还有一个不同的 .NET 3.5 WPF 应用程序，它使用从同一服务器安装的不同密钥和一个不同的 URL 位置进行签名，如果第一个应用程序已经安装，则安装失败。如果首先安装 .NET 3.5 应用程序然后我尝试安装 .NET 4 应用程序，则同样如此，它会失败。这已在多台机器上复制，StackTrace 如下所示。

```
Application cannot start...

+ Exception occurred during store operation.
+ Value does not fall within the expected range.

ERROR DETAILS
Following errors were detected during this operation.
* [12/17/2012 8:06:51 AM] System.Deployment.Application.DeploymentException (ComponentStore)
- Exception occurred during store operation.
- Source: System.Deployment
- Stack trace:
at System.Deployment.Application.ComponentStore.SubmitStoreTransaction(StoreTransactionContext storeTxn, SubscriptionState subState)
at System.Deployment.Application.ComponentStore.CommitApplication(SubscriptionState subState, CommitApplicationParams commitParams)
at System.Deployment.Application.SubscriptionStore.CommitApplication(SubscriptionState& subState, CommitApplicationParams commitParams)
at System.Deployment.Application.ApplicationActivator.InstallApplication(SubscriptionState& subState, ActivationDescription actDesc)
at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
--- Inner Exception ---
System.ArgumentException
- Value does not fall within the expected range.
- Source: System.Deployment
- Stack trace:
at System.Deployment.Internal.Isolation.IStore.Transact(IntPtr cOperation, StoreTransactionOperation[] rgOperations, UInt32[] rgDispositions, Int32[] rgResults) 
```

任何想法为什么这两个应用程序会发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:56:33.500

所以问题出在我使用的两个程序集上......当应用程序单独安装时工作正常，但与 3.5 应用程序（使用相同程序集的旧版本）发生冲突。

导致问题的程序集是：

Microsoft.Practices.EnterpriseLibrary.Common-4.1.0.0.dll Microsoft.Practices.EnterpriseLibrary.ExceptionHandling-4.1.0.0.dll

我删除了这些并替换为更新的 5.0.* 版本，并且可以在同一台机器上发布和安装这两个应用程序。

这些是新的 dll 名称：

Microsoft.Practices.EnterpriseLibrary.Common.dll Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.dll

# asp.net - 为什么这个加载 gif 布局问题

> ID：13918297
> 
> 赞同：0
> 
> 时间：2012-12-17T16:45:47.847
> 
> 标签：asp.net, html, css, ajax, cross-browser

CSS：

```
.smallLoaderBackground
{
    background-image: url('loaderBackground.gif') !important;
    background-position: center center;
    background-repeat: no-repeat;
    position: fixed;
    left: 50%;
    top: 50%;
    height: 50px;
    width: 50px;
    margin: -25px 0 0 -25px;
    z-index: 500;
    text-align: center;
    vertical-align: middle;
} 
```

HTML：

```
<asp:UpdateProgress runat="server" ID="UpdateProgress1" AssociatedUpdatePanelID="upForm">
    <ProgressTemplate>
        <div class="smallLoaderBackground">
            <img id="loaderGif" style="padding-top: 9px;" alt="Loader" src="Styles/please-wait.gif" />
        </div>
    </ProgressTemplate>
</asp:UpdateProgress> 
```

出于某种奇怪的原因，我在不同的浏览器上得到了不同的结果：

IE 完美运行：

![在此处输入图像描述](../Images/cbc31c9577948ef3bb28898114ad4ad6.png)

Chrome 看起来很糟糕，它把它放在页面底部而不是居中，而且背景不见了：

![在此处输入图像描述](../Images/aad391c564c2255fb3ced7e26e9d4271.png)

Opera Mobile 看起来很像 IE。但是 3GS 上的 safari 看起来像是 ie 和 chrome 的交叉，gif 在中间但没有背景。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:40:19.643

首先，正如其他人指出的那样，为了正确调试您的代码，您必须向我们提供的不仅仅是 .NET 源代码。将来，如果可能，请在[JSFiddle](http://jsfiddle.net/)上为您的问题制作一个模型示例，这样可以更轻松地查明您的具体问题。

其次，您应该在更符合标准的浏览器中开发您的应用程序/解决方案。IE 被称为浏览器中的害群之马，这也是有充分理由的。
将您的设计依赖于它在 IE 中的外观是开发跨浏览器解决方案的糟糕方法。

第三，除非您希望覆盖整个屏幕，否则不应修复您的叠加层。叠加层对于父元素应该是绝对的。还要确保你已经`position: relative;`为你的父元素添加了，否则绝对定位对你没有好处。我不知道你为什么`vertical-align`也在那里，但从外观上看，你并不真正知道不同属性的用途。我建议你参考[W3C](http://www.w3.org/TR/CSS21/propidx.html)和[Quirksmode](http://www.quirksmode.org/css/contents.html)来帮助你。

所以，总结一下：提供更多相关代码，IE很烂，让它绝对定位。

* * *

但是，我不会让您没有解决方案，所以这里有一个示例，说明我如何制作一个简单的加载器覆盖。这是使用 Chrome 和 JSFiddle 开发的。

## [JSFiddle 示例](http://jsfiddle.net/qKBDF/)| 代码

CSS

```
.up-form-loader-container{
    display: none;
}

.up-form-loader-container,
.up-form-loader-overlay{
    width: 100%;
    height: 100%;
}

.up-form-loader-container,
.up-form-loader-overlay,
.up-form-loader-img{
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
}

.up-form-loader-overlay{
    background-color: white;
    opacity: 0.5;
}

.up-form-loader-img{
    z-index: 2;
    background-color: #4d1228;
    padding: 2px;
    border-radius: 10px; -moz-border-radius: 10px; -webkit-border-radius: 10px;
    top: 50%; left: 50%;
    margin-left: -32px; margin-top: -32px;
}

#container h1{
    font-size: 20px;
    padding-bottom: 10px;
}
#container h2{
    font-size: 11px;
}

#container{
    /*Centering the container for display purposes*/
    position: absolute;
    top: 50%; left: 50%;
    margin-top: -225px; margin-left: -145px;
    /*--------------------------------------------*/
    width: 250px;
    padding: 10px 20px 20px 20px;
    border: 1px solid #51182d;
    background-color: #f9f9f9;
    box-shadow: 2px 2px 2px 1px #bfbfbf; -moz-box-shadow: 2px 2px 2px 1px #bfbfbf; -webkit-box-shadow: 2px 2px 2px 1px #bfbfbf;
    border-radius: 10px; -moz-border-radius: 10px; -webkit-border-radius: 10px;
}

.group{
    position: relative;
    margin-top: 22px;
    border: 1px solid white;
    border-radius: 4px; -moz-border-radius: 4px; -webkit-border-radius: 4px;
    box-shadow: 0px 0px 0px 1px #a3bccc;
    padding: 12px 8px 4px 8px;
}

.first-group{
    margin-top: 12px;
}

.group-title{
    position: absolute;
    height: 20px;
    left: 6px;
    top: -12px;
    padding: 0 4px;
    color: white;
    background-color: #4d1228;
    border-radius: 4px; -moz-border-radius: 4px; -webkit-border-radius: 4px;
}

.group-submit{
    text-align: center;
    margin-top: 10px;
    padding-top: 8px;
    border-top: 1px solid gray;
}

#email-adr{
    width: 100%;
}

#req-submit{
    padding: 2px 12px;
}

#cancel-submit, #cancel-submit:visited{
    color: darkblue;
    text-decoration: none;
    margin-left: 20px;
}

#cancel-submit:hover{
    text-decoration: underline;
} 
```

HTML

```
<div id="container">
    <div class="up-form-loader-container">
        <div class="up-form-loader-overlay"></div>
        <img class="up-form-loader-img" src="http://www.newmoney.gov/WorkArea/images/application/loading_big.gif" width="64" height="64" />
    </div>
    <h2>ShadowCorp<sup>®</sup> Delivery on demand</h2>
    <h1>Price listing request</h1>
    <div class="first-group group">
        <div class="group-title">Items</div>
        <ul class="group-list">
            <li><label><input type="checkbox" /> Rubber mounting</label></li>
            <li><label><input type="checkbox" /> Bellows</label></li>
            <li><label><input type="checkbox" /> Rings</label></li>
            <li><label><input type="checkbox" /> Hoses and boot</label></li>
            <li><label><input type="checkbox" /> Filters</label></li>
            <li><label><input type="checkbox" /> Gaskets</label></li>
            <li><label><input type="checkbox" /> Mounts</label></li>
            <li><label><input type="checkbox" /> Oil seals</label></li>
            <li><label><input type="checkbox" /> TVD Dampers</label></li>
        </ul>
    </div>
    <div class="group">
        <div class="group-title">Additional information</div>
        <ul class="group-horiz-list">
            <li><label><input type="checkbox" checked="checked" /> Bracket costs</label></li>
            <li><label><input type="checkbox" /> X-ref</label></li>
        </ul>
    </div>
    <div class="group">
        <div class="group-title"><label for="email-adr">E-mail address</label></div>
        <input type="textbox" id='email-adr'/></label>
    </div>
    <div class="group-submit">
        <input id="req-submit" type="submit" value="Send" />
        <a href="#cancel" id="cancel-submit">cancel</a>
    </div>
</div> 
```

结果： ![浏览器比较](../Images/f78ab0e0a5c3446af1e83725c6a9ab61.png)

# c# - 我的数据库连接应该保持打开并在 asp.net 中传递还是根据需要打开和关闭？

> ID：13918301
> 
> 赞同：1
> 
> 时间：2012-12-17T16:46:17.010
> 
> 标签：c#, asp.net, ado.net

我正在研究一个工作单元，我很好奇应该如何处理连接。我的存储库采用一个工作单元，并将该连接用于 Get() 命令。

显然，Commit() 将处理所有的添加、更新和删除。这将打开连接并开始事务并在完成后关闭。Gets应该如何处理？

UOW 是否应该在构造函数中打开连接并在完全完成后关闭？这意味着当我将 UOW 从仓库传递到仓库时，连接是打开的。或者我应该只在需要时打开和关闭它？

方法#1：工作单元打开连接并且连接保持打开直到处理完成？

```
public UnitOfWork(IDbConnection connection)
{
    Connection = connection;
    Connection.Open();
    Transaction = Connection.BeginTransaction();
} 
```

方法 #2：Get 方法的片段，在读取之前打开并在之后立即关闭。如果传递给多个存储库，则使用相同的连接，只是打开和关闭一堆。

```
 using (var reader = manager.GetReader())
 {
     UOW.Connection.Open();

     while (reader.Read())
         list.Add(factory.CreateTFromReader(reader));

     UOW.Connection.Close();
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T16:50:56.327

不，您应该始终在需要时打开连接，并确保在工作完成后关闭它。连接池机制将负责为当前用户或在同一服务器上同时连接的其他用户保持连接可用

我也认为第二个例子不太正确。你应该有这样的东西

```
 using (IDbConnection cn = manager.GetConnection)
 using (var reader = manager.GetReader())
 {
     cn.Open();

     while (reader.Read())
         list.Add(factory.CreateTFromReader(reader));
 } 
```

这将确保即使在发生异常时也关闭连接，并将其返回到池中以便重用

[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca%28VS.71%29.aspx)

# hadoop - 蜂巢。不能在 where 子句中引用分区

> ID：13918308
> 
> 赞同：1
> 
> 时间：2012-12-17T16:46:49.507
> 
> 标签：hadoop, hql, hive

我创建了一个按日期分区的表。但不能在 where 子句中使用分区。这是过程步骤1：

```
 CREATE TABLE new_table (
           a string,
           b string
      )
     PARTITIONED BY (dt string); 
```

第2步：

```
 Insert overwrite table new_table partition (dt=$date)
        Select a, b from my_table
        where dt = '$date 
```

* * *

表已创建。

```
 Describe new_table;
           a string
           b string
           dt string 
```

*问题*：

```
 select * from new_table where dt='$date' 
```

返回空集。

然而

```
 select * from new_table 
```

返回 a、b 和 dt。

有谁知道这可能是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:32:50.380

Try inserting with

```
Insert overwrite table new_table partition (dt=$date)
    Select a, b, dt from my_table
    where dt = '$date' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:09:14.527

Sahara，where 子句中的分区确实有效。您是否有可能在谓词的 RHS 中指定了错误的值？

您可能还想查看里面的数据`/user/hive/warehouse/new_table`（默认情况下），看看那里的数据是否符合您的预期。

# tridion - 无法加载 DLL 'xmogrt'：来自 Tridion 元数据查询

> ID：13918310
> 
> 赞同：4
> 
> 时间：2012-12-17T16:46:57.617
> 
> 标签：tridion, tridion-2011

我正在尝试使用 CustomMetaKeyCriteria 类根据我设置的一些元数据从 Broker DB 中拉回内容。但是，我收到下面列出的错误。有任何想法吗？该 dll 在我的 bin 文件夹中，并且我确认它是 32 位版本，因为此代码在 32 位机器上运行。我显然错过了一些设置，但是什么？

> 无法加载 DLL 'xmogrt'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T16:56:32.990

检查您是否有此文件的其余 dll 依赖项？

在我的 x86 安装文件夹中，我看到以下 DLL：

*   MSVCP71.dll
*   MSVCR71.dll
*   netrtsn.dll
*   Tridion.ContentDelivery.Configuration.dll
*   Tridion.ContentDelivery.dll
*   Tridion.ContentDelivery.Interop.dll
*   xmogrt.dll

编辑：以及以下 Tridion 罐子：

*   cd_broker
*   cd_cache
*   cd_core
*   cd_datalayer
*   cd_deployer
*   cd_linking
*   cd_model
*   cd_tcdl（通常不需要）

您可能应该检查 cd_core_log 以获取更多详细信息，也许您缺少第 3 方 jar 之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:11:57.483

如果您从网络位置复制它，您的 DLL 可能会被阻止。尝试右键单击 DLL > 属性 > 取消阻止

# javascript - 将 div 放在 ace 编辑器之上

> ID：13918314
> 
> 赞同：0
> 
> 时间：2012-12-17T16:47:02.033
> 
> 标签：javascript, html, css, ace-editor

我在我的网页中使用 ace 编辑器实例：

```
<div class="tabpage" id="tabscontent">
     <div class="ace_page" id="tabpage_1">
     </div>
</div> 
```

我的 javascript 文件将此 div 初始化为 ace 编辑器实例：

```
var aceEditor = ace.edit("tabpage_1");
aceEditor.setTheme("ace/theme/textmate");
aceEditor.getSession().setMode(language); 
```

现在我想将 div 放入其中，`tabpage_1`以便使用以下代码将其置于编辑器实例之上：

```
function addUserCursor(editor, position, user, color) {
var page = document.getElementById("tabscontent");
var label = document.createElement("div");
label.setAttribute("id", editor+"-"+user);
label.setAttribute("position", "absolute");
label.setAttribute("top", "200px");
label.setAttribute("left", "200px");
label.setAttribute("background-color", color);
label.setAttribute("z-index", "10");
label.innerHTML = user;
page.appendChild(label); 
```

}

但这不会导致该编辑器顶部的 div （样式属性将在稍后收集在 css 中，这仅用于测试）。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T09:30:17.427

`label.setAttribute("z-index", "10");`错了，一定是`label.style.zIndex = 10;`

# python - pysvn 给出错误：不是工作副本

> ID：13918321
> 
> 赞同：2
> 
> 时间：2012-12-17T16:47:18.460
> 
> 标签：python, svn, pysvn

我正在尝试获取 svn 中一组文件的最后修改作者姓名。

我在我的机器上检查了代码。

在我的脚本中，所有文件的绝对路径都在列表中读取。我正在尝试使用以下代码为每个文件提取最后编辑的作者。

```
for file in all_files:
    dir = os.path.dirname(file)
    entry = client.info(dir)
    print "Folder:"+dir+" And author:"+entry['commit_author'] 
```

但我收到以下错误：

```
File "test_main.py", line 110, in main
entry = client.info(dir)
pysvn._pysvn.ClientError: '.' is not a working copy 
```

我尝试将整个文件名作为参数，以`client.info()`获得相同的结果。

这可能是一个非常简单的问题，但我是 python 的新手，所以无法弄清楚。

编辑：

我尝试将文件夹路径硬编码为：

```
 temp = "/home/gajananh/scripts/test/repo/test_proj/src";
  entry = client.info(temp)
  print "Folder:"+dir+" And author:"+entry['commit_author'] 
```

它有效！

在我的第一个脚本中，当我尝试`dir`在循环中打印变量时，它会打印正确的路径。当我尝试`svn info`在 shell 上运行命令以获取输出时，我得到了正确的结果。

我无法理解这个奥秘。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:26:58.323

我认为`for file in all_files:`返回具有相对路径的文件，例如`./file.txt`

运行`os.path.dirname(file)`时，返回的路径将只是一个“。” （点）作为 svn 的参数给出。

在调用函数时尝试使用完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T22:39:45.543

您需要使用 info2。

```
path="http://svn/svn/foo/trunk/baz.c"
name_info_list = client.info2(path)
assert len(name_info_list) == 1

name, info = name_info_list[0]
for k, v in info.items():
    print "%s: %s" % (k, v) 
```

[http://pysvn.tigris.org/docs/pysvn_prog_ref.html#pysvn_client_info2](http://pysvn.tigris.org/docs/pysvn_prog_ref.html#pysvn_client_info2)

# windows - 如何使用 Powershell 搜索 Windows Search 索引文件

> ID：13918329
> 
> 赞同：5
> 
> 时间：2012-12-17T16:47:46.917
> 
> 标签：windows, file, search, powershell

时不时地，我必须在我的网络上找到一些文件，这些文件由 Windows 搜索服务索引。在 Explorer 搜索栏输入 pattern 大约 10s 左右得到结果，但是当我使用以下命令时，搜索通常需要几分钟（2 到 3 分钟）

```
gci -Recurse -Filter "VaR*.xlsb" 
```

有没有办法利用索引文件数据库来加快我的搜索速度？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T14:14:48.610

我找到了将 [vbs 脚本](http://social.technet.microsoft.com/Forums/en/ITCG/thread/a83db5f8-c03d-410c-99b0-1d892cb81b0f)改编为 Powershell 的答案，代码如下：

```
Function Search {
param (  
    [Parameter(ValueFromPipeline = $true)][string]$Path,
    [Parameter(Mandatory=$true)][string]$Pattern)  

    if($Path -eq ""){$Path = $PWD;} 

    $pattern = $pattern -replace "\*", "%"  
    $path = $path + "\%"

    $con = New-Object -ComObject ADODB.Connection
    $rs = New-Object -ComObject ADODB.Recordset

    $con.Open("Provider=Search.CollatorDSO;Extended Properties='Application=Windows';")
    $rs.Open("SELECT System.ItemPathDisplay FROM SYSTEMINDEX WHERE System.FileName LIKE '" + $pattern + "' AND System.ItemPathDisplay LIKE '" + $path + "'" , $con)

    While(-Not $rs.EOF){
        $rs.Fields.Item("System.ItemPathDisplay").Value
        $rs.MoveNext()
    }
} 
```

这种方式非常快。我针对大卫指出的答案进行了测试，速度快了 3 倍，但此答案仅适用于索引文件

# elasticsearch - 使用轮胎为 custom_filters_score 的术语过滤器设置 minimum_match 很热门？

> ID：13918331
> 
> 赞同：1
> 
> 时间：2012-12-17T16:47:51.813
> 
> 标签：elasticsearch, tire

我正在使用轮胎宝石并发现非常有趣的功能 - custom_filters_score。使用 custom_filters_score 我可以呈现按分数排序的搜索结果，这是动态计算的。

我的（几乎;-)）唯一的问题是以下查询：

```
days = ['2013-01-17', '2013-01-18', '2013-01-19']

Tire.search 'hotels' do
  query do
    custom_filters_score do

      query { string '*' }

      filter do
        filter :match_all
        script "doc['my_score'].value"
      end

      filter do
        filter :terms, 'prices.date' => days#, :minimum_match => days.size
        script "100 + doc['my_score'].value"
      end

      score_mode 'multiply'
    end
  end
end 
```

每家酒店都可以收集指定日期的价格。**上面的查询首先**应该给我所有为每个请求的日期指定价格的酒店（参见“天”数组）。然后我应该得到其他酒店，不需要指定所有价格。

目前它无法正常工作。我得到的第一家酒店的价格仅适用于某些要求的日子。我认为像 minimum_match 这样的东西在这里可能会有所帮助，问题是当我设置该选项时，查询根本不起作用。我得到：QueryParsingException，过滤器不支持 [minimum_match]

你能否给我一些提示，我必须使用轮胎/弹性搜索来让它工作吗？

恐怕这只是我遇到的第一个问题......

价格集合可以具有以下结构 - 我们可以为 2 位成人和 1 位成人在同一天设置不同的价格：

```
{
  "id":1,
  "name":"Hotel Zamkowy",
  "city":"Słupsk",
  "my_score":5,
  "prices":[
    {
      "allocation":1,
      "price":79,
      "adults":2,
      "children":0,
      "date":"2013-01-17"
    },
    {
      "allocation":1,
      "price":87,
      "adults":2,
      "children":0,
      "date":"2013-01-18"
    },
    {
      "allocation":1,
      "price":98,
      "adults":2,
      "children":0,
      "date":"2013-01-19"
    },
    {
      "allocation":1,
      "price":75,
      "adults":2,
      "children":0,
      "date":"2013-01-20"
    },
    {
      "allocation":1,
      "price":55,
      "adults":1,
      "children":0,
      "date":"2013-01-16"
    },
    {
      "allocation":1,
      "price":59,
      "adults":1,
      "children":0,
      "date":"2013-01-17"
    },
    {
      "allocation":1,
      "price":67,
      "adults":1,
      "children":0,
      "date":"2013-01-18"
    },
    {
      "allocation":1,
      "price":78,
      "adults":1,
      "children":0,
      "date":"2013-01-19"
    },
    {
      "allocation":0,
      "price":55,
      "adults":1,
      "children":0,
      "date":"2013-01-20"
    }
  ]
} 
```

分配编号也很重要，它基本上告诉我们在特定日期和特定成人/儿童组合有多少可用房间。

如何查询elasticsearch给我**第一**家有请求天分配和价格的酒店？

我希望这是有道理的；）

谢谢，马雷克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T10:32:59.200

您应该使用 :range 而不是 :term。与此类似的东西：

:range=> { 'prices.date' => { :gte => lower_price , :lt => Higher_price }}

# matlab - 一个数组和多个工作人员在 matlab 上对该数组进行工作和更改

> ID：13918335
> 
> 赞同：1
> 
> 时间：2012-12-17T16:47:57.057
> 
> 标签：matlab, parallel-processing

我有一个包含`1xN`元素的数组，我想使用 4 个或更多工作人员（核心）在这个数组上并行工作。每个工作人员从该数组中获取一些元素并对其进行操作。例如，`worker1`将采用 3 个元素，`worker2`将采用接下来的 2 个，依此类推。这些工人将并行工作。

这些工人如何才能同步良好地工作？这似乎需要多个 CPU 之间的共享内存。

我需要每个工作人员同时从该数组中读取不同大小的数据：例如：

```
 arr=1:100; % the common array 
serv1 = 3; % random numbers 
serv2 = 2; % random numbers 
serv3 = 1; % random numbers 
serv4 = 1; % random numbers 
```

我需要同时 worker1 读取`array(1:serv1)`，worker 2 读取`array(serv1+1:serv1+serv2)`，worker3 读取`array(serv1+serv2+1:serv1+serv2+serv3)`等等，然后对它们进行操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:03:45.353

如果我的问题正确，我会提出这样的建议

```
n = numel(array); % this would be the common array
nw = 5; % number of workers, assuming you have at least that many workers up and running
start_i = floor(linspace(1,n,nw+1)); % each worker will start working from start_i 
start_i( end ) = [];
end_i = [start_i(2:end)+1 n]; % each worker will work till end_i
parfor ( ii = 1:nw, nw )
     processArray( array( start_i(ii):end_i(ii) ) ); % do your magic here
end 
```

# firefox - Selenium IDE 在我停止并再次单击记录后不记录

> ID：13918340
> 
> 赞同：1
> 
> 时间：2012-12-17T16:48:14.233
> 
> 标签：firefox, selenium-ide

嗨，当我使用 Selenium IDE 记录一些测试时，我遇到了一个以前没有显示的奇怪问题。

1.  打开 Selenium IDE 时，它不会自动获取 url。

2.  这是关键问题：一旦我停止录制或播放也会停止录制的测试用例，当我再次单击录制按钮时，它不再记录任何其他操作。

我不确定这是 Selenium IDE 的问题还是我的 Firefox 的问题。我用的是Selenium IDE 1.9.1，和Firefox 17，前几天第一次用的时候没有这个问题。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:35:35.830

检查此[链接](http://code.google.com/p/selenium/wiki/SeIDEReleaseNotes)。即将推出的 selenium ide 1.10.0 将支持 Firefox 17。因此，最好将您的 Firefox 降级到 15，以便更好地运行 selenium ide 1.9.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T22:43:34.807

仅作记录，我已经在 Selenium IDE v2.3.0 中修复了这个问题，它应该很快就会发布。请参阅[http://code.google.com/p/selenium/issues/detail?id=5820](http://code.google.com/p/selenium/issues/detail?id=5820)

# groovy - 根据数字选择复选框

> ID：13918344
> 
> 赞同：2
> 
> 时间：2012-12-17T16:48:25.780
> 
> 标签：groovy, checkbox, binary

我有 8 个复选框，其值为`1`, `2`, `4`, `16`, `256`, `512`, `1024`, `4096`。

取决于选择的内容取决于给定的数字，即：选择了 5 = 1 和 4、20 = 16 和 4、528 = 512 和 16

现在我明白了如何通过手动计算或创建地图来找出选中的复选框。IE

```
[
  { number: 1, boxes: [1] }, 
  { number: 2, boxes: [2] },
  { number: 3, boxes: [1,2] },
  { number: 4, boxes: [4] },
  { number: 5, boxes: [4,1] },
  { number: 6, boxes: [4,2] },
  { number: 7, boxes: [4,2,1] }
 ] 
```

但这不是我要找的。

*   您会搜索什么主题/短语来更好地理解这一点？
*   在代码中，如何根据显示的数字接收复选框列表？

IE：

```
def test() {

   def checkBoxList = getCheckBoxList(1536)
   assert checkBoxList == [1024,512]

  checkBoxList = getCheckBoxList(7)
  assert checkBoxList == [4,2,1]

  //etc
}

def getCheckBoxList(int number) {

    //Magic code -- Returns [] of boxes based on number

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:02:40.230

从大于参数的 2 的下一个值倍数开始，然后减去其他倍数。适用于您的情况？

```
def getCheckBoxList(int number) {
  def list = []
  Integer filter = 1

  while(filter < number) { filter *= 2 }

  filter /= 2

  while (filter != 0) {
    if (filter <= number) {
      list << filter
      number -= filter
    }

    filter /= 2
  }

  list
}

assert getCheckBoxList(1536) == [1024,512]
assert getCheckBoxList(7) == [4,2,1]
assert getCheckBoxList(17) == [16, 1]
assert getCheckBoxList(15) == [8, 4, 2, 1]
assert getCheckBoxList(29) == [16, 8, 4, 1]
assert getCheckBoxList(528) == [512, 16] 
```

# css - 表格中的 TD 边框，未在 IE8 中显示

> ID：13918345
> 
> 赞同：4
> 
> 时间：2012-12-17T16:48:26.497
> 
> 标签：css, internet-explorer-8, html-table, border

> **可能重复：**
> [CSS 使空单元格的边框出现？](https://stackoverflow.com/questions/57002/css-to-make-an-empty-cells-border-appear)

我知道这个问题以前被问过很多次，我尝试在每个 `<td> </td>`标签之间添加  ，但效果不佳，我猜 CSS 中存在某种问题，但我无法发现它，我的表格在 Firefox 和 Chrome 上显示正常，但每当我尝试使用 IE8 时，都会缺少一些边框。下面是 HTML 和表格的 CSS，以及屏幕截图。表格的 HTML 是从 PHP 脚本生成的。

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <!--[if IE]>
        <link rel ="stylesheet" type ="text/css" href ="layout_ie.css"/> 
        <![endif]-->

        <!--[if !IE]> -->
        <link rel ="stylesheet" type ="text/css" href ="layout.css"/>
        <!-- <![endif]-->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
          <title>Calendario de Capacitaciones</title>
    </head>
    <body>

   <table  cellpadding="0" cellspacing="0" class="calendar">
        <tr class = "calendar-row"> 
            <td class = "calendar-day-head">Lunes</td>
            <td class = "calendar-day-head">Martes</td>
            <td class = "calendar-day-head">Miércoles</td>
            <td class = "calendar-day-head">Jueves</td>
            <td class = "calendar-day-head">Viernes</td>
            <td class = "calendar-day-head">Sábado</td>
            <td class = "calendar-day-head">Domingo</td>
        </tr>
        <tr class = "calendar-row">

            <td  class ="calendar-day-np">&nbsp; </td>
            <td  class ="calendar-day-np">&nbsp; </td>
            <td  class ="calendar-day-np">&nbsp; </td>
            <td  class ="calendar-day-np">&nbsp; </td>
            <td  class ="calendar-day-np">&nbsp; </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">1</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">2</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
        </tr>

        <tr class="calendar-row">
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">3</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">4</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">5</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">6</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">7</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">8</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">9</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
        </tr>

        <tr class="calendar-row">
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">10</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">11</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">12</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">
                &nbsp<div class = "day-number">13</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">14</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">15</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">16</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

        </tr>
        <tr class="calendar-row">
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">17</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">18</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">19</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp 
                <div class = "day-number">20</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">21</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">22</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">23</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
        </tr>

        <tr class="calendar-row">
            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">24</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">25</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">26</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">27</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">28</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">29</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>

            <td  bgcolor="#FFFFFB" class = "calendar-day">&nbsp
                <div class = "day-number">30</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
        </tr>
        <tr class="calendar-row">
            <td  bgcolor="#FFFFFB" class = "calendar-day">
                &nbsp<div class = "day-number">31</div><p>&nbsp;</p><p>&nbsp;</p>&nbsp
            </td>
            <td class = "calendar-day-np">&nbsp;</td>
            <td class = "calendar-day-np">&nbsp;</td>
            <td class = "calendar-day-np">&nbsp;</td>
            <td class = "calendar-day-np">&nbsp;</td>
            <td class = "calendar-day-np">&nbsp;</td>
            <td class = "calendar-day-np">&nbsp;</td>
        </tr>
    </table>        

    </body>
    </html> 
```

**CSS**

```
 table.calendar    {table-layout:fixed;margin-top:5em ;margin-left:15em; border-left:1px solid #999; }
tr.calendar-row  {  }
td.calendar-day  { min-height:80px; font-size:11px; position:relative;border:1px solid #999; } * html div.calendar-day { height:80px; }
td.calendar-day:hover  { background:#eceff5; }
td.calendar-day-np  {  background:#eee; min-height:80px; } * html div.calendar-day-np { height:80px; }
td.calendar-day-head { background:#ccc; font-weight:bold; text-align:center; width:135px; padding:5px; border-bottom:1px solid #999; border-top:1px solid #999; border-right:1px solid #999; }
div.day-number    { background:#999; padding:5px; color:#fff; font-weight:bold; float:right; margin:-5px -5px 0 0; width:20px; text-align:center; }
/* shared */
td.calendar-day, td.calendar-day-np {  max-width:50px;  padding:5px; border-bottom:1px solid #999; border-right:1px solid #999; } 
```

***截图：***

**它在 IE8 中的外观。**

![http://i.stack.imgur.com/j7w6H.jpg](../Images/95b7ec6ab23302f52bd25fe2ed206e5f.png)

**它应该是什么样子，（取自 Firefox）。**

![http://i.stack.imgur.com/T0xzI.png](../Images/f29689662a709e44ca1eb6d0bf1e8c20.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:58:56.837

尝试在您的 CSS 中执行此操作：

```
td.calendar-day {
min-height:80px; 
font-size:11px;
border:1px solid #999 !important;
} 
```

# c# - 使用领域驱动设计时应用存储在数据库中的业务规则

> ID：13918349
> 
> 赞同：3
> 
> 时间：2012-12-17T16:48:42.970
> 
> 标签：c#, domain-driven-design

我是域驱动设计的新手，但试图将它应用到我当前的 c#.net 项目中。要求之一是允许用户为实体定义业务规则（即需要客户端名称） 不同的用户组将定义他们自己的规则集，因此我将它们存储在数据库中。

我已经阅读了几篇解释规范模式的文章，但是有什么方法可以使用它来应用存储在数据库中的规则？在以前的非 DDD 项目中，我在实体上有一个 IList 属性并调用 GetBrokenRules(Client client) 方法来加载规则并检查客户端是否有效。做同样的事情而不使用规范模式会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:53:36.360

规范模式是关于尝试通过一组搜索条件在存储库中查找实体。您无需定义一长串（可能）可选参数，而是构建规范，然后将其转换为您在后台使用的任何查询语言。

您的业​​务规则是关于实体验证的，所以我想说规范模式在这里不太适合。虽然[也不是不可能](https://stackoverflow.com/questions/9655171/ddd-using-specification-pattern-for-validation)。

您建议的加载规则和调用 GetBrokenRules 方法的方法似乎是一个明智的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:37:05.993

动态验证规则尖叫工厂模式。我可能会走让工厂生成验证规则的路线。正如所指出的，规范旨在建立一个谓词。

根据实现，可以动态组合规范以形成谓词来检查属性/模型/上下文是否有效，尽管这将代表单个规则。

如果您还没有，请查看 FluentValidation，它非常灵活，可能会提供您没有考虑过的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:32:33.997

我认为规范模式是解决这个问题的好方法。如果你还没有读过 这本书，请看看[这本书。](http://www.martinfowler.com/apsupp/spec.pdf)

您应该考虑创建一个复合规范，该规范将从域服务中的数据库构建。

# mongodb - MongoDB理解彩信图表

> ID：13918353
> 
> 赞同：4
> 
> 时间：2012-12-17T16:49:10.400
> 
> 标签：mongodb, charts, monitoring

我对mongo真的很陌生，

在测试使用它的系统期间，我必须监视一个 mongodb 实例。我无法理解彩信代理提供的图表。以下是我的问题：

1 - 我关心性能和可用性，我应该关注哪些图表？

2 - 在 opcounters 图表中，他们说：“每单位时间执行的命令数”什么是时间单位？同样在同一张图表中，“命令”和“查询”有什么区别？什么是“getmore”？

我认为这已经足够一个开始的问题了，可能更多的是以下答案:)

问候， 罗宾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T19:41:20.783

1.  对于性能，我建议查看 opcounters、lock%、page faults、btree 和 queues。对于可用性（我假设您有一个副本集，因为您提到了可用性）注意副本和复制滞后图。上面的列表绝不应该是详尽的，而只是作为诊断性能问题时的起始参考。

2.  每单位时间：如果这是页面顶部突出显示的内容，则为每秒时间。命令不同于查询（获取服务器统计信息、初始化副本集和运行 map-reduce 作业都是通过运行命令来完成的）。当您遍历游标并到达返回批次的末尾时，如果有更多结果，则 cursor.next() 将执行“getmore”操作以检索下一批。

# c++ - 函数和多个类层次结构

> ID：13918354
> 
> 赞同：0
> 
> 时间：2012-12-17T16:49:21.347
> 
> 标签：c++

试图理解方法和虚函数可以说我有 3 个类（下面的类）

```
class abstruct {void go()};

class animal:public abstruct {
           public:
           char* name;
           void go(){}
};

class bird:public abstruct {
           public:
           char* name;
           void fly(){}
};

class animalbird:public animal,public bird {
           void go(){}
}; 
```

我的问题是如何在动物中访问功能`class animalbird`？我试着写`void go(){}`，但似乎我错了。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:53:08.760

```
void animalbird::go() {
    animal::go();
} 
```

# python - 两个表之间的非标准交互以避免非常大的合并

> ID：13918355
> 
> 赞同：3
> 
> 时间：2012-12-17T16:49:25.970
> 
> 标签：python, join, merge, pandas, binary-search

假设我有两张桌子`A`和`B`.

表`A`具有多级索引`(a, b)`和一列 (ts)。 `b`明确确定 ts。

```
A = pd.DataFrame(
     [('a', 'x', 4), 
      ('a', 'y', 6), 
      ('a', 'z', 5), 
      ('b', 'x', 4), 
      ('b', 'z', 5), 
      ('c', 'y', 6)], 
     columns=['a', 'b', 'ts']).set_index(['a', 'b'])
AA = A.reset_index() 
```

表`B`是另一个具有非唯一索引 ( `a`) 的单列 (ts) 表。ts 在每个组的“内部”排序，即`B.ix[x]`针对每个 x 排序。此外，*总是*有一个值`B.ix[x]`大于或等于 中的值`A`。

```
B = pd.DataFrame(
    dict(a=list('aaaaabbcccccc'), 
         ts=[1, 2, 4, 5, 7, 7, 8, 1, 2, 4, 5, 8, 9])).set_index('a') 
```

其中的语义是`B`包含对索引指示的类型事件发生的观察。

我想从`B`每个事件类型的第一次出现的时间戳中`A`找到每个`b`. 换句话说，我想得到一个具有相同形状的表格`A`，而不是 ts 包含由 table 指定的“ts 之后出现的最小值” `B`。

所以，我的目标是：

```
C: 
('a', 'x') 4
('a', 'y') 7
('a', 'z') 5
('b', 'x') 7
('b', 'z') 7
('c', 'y') 8 
```

我有一些工作代码，但速度非常慢。

```
C = AA.apply(lambda row: (
    row[0], 
    row[1], 
    B.ix[row[0]].irow(np.searchsorted(B.ts[row[0]], row[2]))), axis=1).set_index(['a', 'b']) 
```

剖析显示罪魁祸首很明显`B.ix[row[0]].irow(np.searchsorted(B.ts[row[0]], row[2])))`。但是，从长远来看，使用合并/连接的标准解决方案会占用过多的 RAM。

考虑到现在我有 1000 个`a`，假设每个 a 的平均 b 数是恒定的（可能是 100-200），并考虑每个 a 的观察数可能是 300 左右。在生产中，我将再有 1000`a`个s。

`1,000,000 x 200 x 300 = 60,000,000,000`行

保存在 RAM 中可能有点太多了，尤其是考虑到我需要的数据完全可以用 C 来描述，就像我上面讨论的那样。

我将如何提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:29:51.467

感谢您提供示例数据。鉴于预期的数组大小为 100 万，我已经用一般建议更新了这个答案。

1.  线型材

    对 lambda 函数的内容进行行分析表明，大部分时间都花在 B.ix[] 上（此处已重构为仅调用一次）。

    ```
    In [91]: lprun -f stack.foo1 AA.apply(stack.foo1, B=B, axis=1)
    Timer unit: 1e-06 s

    File: stack.py
    Function: foo1 at line 4
    Total time: 0.006651 s

    Line #      Hits         Time  Per Hit   % Time  Line Contents
    ==============================================================
         4                                           def foo1(row, B):
         5         6         6158   1026.3     92.6      subset = B.ix[row[0]].ts
         6         6          418     69.7      6.3      idx = np.searchsorted(subset, row[2])
         7         6           56      9.3      0.8      val = subset.irow(idx)
         8         6           19      3.2      0.3      return val 
    ```

2.  考虑内置数据类型和原始 numpy 数组而不是更高级别的构造。

    由于 B 在此处的行为类似于 dict 并且多次访问相同的键，因此让我们将 df.ix 与普通的 Python 字典（在其他地方预先计算）进行比较。具有 1M 键（唯一 A 值）的字典应该只需要 ~34MB（33% 容量：3 * 1e6 * 12 字节）。

    ```
    In [102]: timeit B.ix['a']
    10000 loops, best of 3: 122 us per loop

    In [103]: timeit dct['a']
    10000000 loops, best of 3: 53.2 ns per loop 
    ```

3.  用循环替换函数调用

    我能想到的最后一个重大改进是用 for 循环替换 df.apply() 以避免调用任何函数 200M 次（或者不管 A 是多大）。

希望这些想法有所帮助。

* * *

原始的、富有表现力的解决方案，但内存效率不高：

```
In [5]: CC = AA.merge(B, left_on='a', right_index=True)

In [6]: CC[CC.ts_x <= CC.ts_y].groupby(['a', 'b']).first()
Out[6]: 
     ts_x  ts_y
a b            
a x     4     4
  y     6     7
  z     5     5
b x     4     7
  z     5     7
c y     6     8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:38:11.493

另一个使用 numpy 的布尔数组表示法的选项，它似乎比原始的快一个数量级（在这个小例子中，我怀疑它在更大的数据集上会更好......）：
*我怀疑这主要是因为选择最小值是比排序快得多的任务。*

```
In [11]: AA.apply(lambda row: (B.ts.values[(B.ts.values >= row['ts']) &
                                           (B.index == row['a'])].min()),
                          axis=1)
Out[11]: 
0    4
1    7
2    5
3    7
4    7
5    8

In [12]: %timeit AA.apply(lambda row: (B.ts.values[(B.ts.values >= row['ts']) &(B.index == row['a'])].min()), axis=1)
1000 loops, best of 3: 1.46 ms per loop 
```

如果您只是将其作为列添加到`AA`.

如果您在示例中创建一个新的数据框 - 尝试“公平地”测试这个 - 它会更慢（但仍然是原始数据框的两倍）：

```
In [13]: %timeit C = AA.apply(lambda row: (row[0], row[1], B.ix[row[0]].irow(np.searchsorted(B.ts[row[0]], row[2]))), axis=1).set_index(['a', 'b'])
100 loops, best of 3: 10.3 ms per loop

In [14]: %timeit C = AA.apply(lambda row: (row[0], x[1], B.ts.values[(B.ts.values >= row['ts']) & (B.index == row['a'])].min()), axis=1)
100 loops, best of 3: 4.32 ms per loop 
```

# javascript - Android应用Phonegap上的CSS不起作用

> ID：13918358
> 
> 赞同：0
> 
> 时间：2012-12-17T16:49:31.270
> 
> 标签：javascript, android, html, css, cordova

所以今天我尝试使用本教程构建一个 Android 应用程序：http: [//iphonedevlog.wordpress.com/2012/08/25/phonegapcordova-android-app-in-mountain-lion-with-eclipse-from-install-to -谷歌播放/](http://iphonedevlog.wordpress.com/2012/08/25/phonegapcordova-android-app-in-mountain-lion-with-eclipse-from-install-to-google-play/)

一切正常，但是当我模拟应用程序时，css 的某些元素不起作用。java脚本和html也有效。但是例如单词颜色和大小、渐变等等根本不起作用。

唯一有效的 CSS 是蓝色的背景颜色。我不知道这是否有帮助。

[http://jsfiddle.net/wsxWZ/](http://jsfiddle.net/wsxWZ/)

和CSS：

```
@font-face {
    font-family: 'CallunaSansRegular';
    src: url('../fonts/calluna-sans/CallunaSansRegular-webfont.eot');
    src: url('../fonts/calluna-sans/CallunaSansRegular-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/calluna-sans/CallunaSansRegular-webfont.woff') format('woff'),
         url('../fonts/calluna-sans/CallunaSansRegular-webfont.ttf') format('truetype'),
         url('../fonts/calluna-sans/CallunaSansRegular-webfont.svg#CallunaSansRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: franchise-bold;
    src: url('../fonts/Franchise-Bold.ttf');
    font-weight:normal;
}

body {
    font: 15px CallunaSansRegular;
    width: 980px;
    height: 900px;
    background-color: black;
}

nav{
    width: 100%;
    display: block;
    overflow: hidden;
}

nav>a{
    padding-top: 5px;
    text-decoration: none;
    color: white;
    margin-right: 1%;
    background-color: gray;
    float: left;
    padding-right: 5%;
    padding-left: 5%;
    height: 20px;

    -webkit-border-top-left-radius: 10px;
-webkit-border-top-right-radius: 10px;
-moz-border-radius-topleft: 10px;
-moz-border-radius-topright: 10px;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
}

#friends{

background: #c5deea; /* Old browsers */
background: -moz-linear-gradient(top, #c5deea 0%, #8abbd7 31%, #066dab 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c5deea), color-stop(31%,#8abbd7), color-stop(100%,#066dab)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* IE10+ */
background: linear-gradient(to bottom, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c5deea', endColorstr='#066dab',GradientType=0 ); /* IE6-9 */

/*     background-color: blue; */
    width: 100%;
    height: 1200px;
    padding-top: 2%;
}

article{
    position: relative;
/*     background-color: gray;     */
    width: 200px;
    height: 200px;
    margin-left: 3.5%;
    float: left;
    display: block;
    margin-bottom: 3.5%;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;

/*     box-shadow: 0px 10px 10px #000000; */

background: #aebcbf; /* Old browsers */
background: -moz-linear-gradient(top, #aebcbf 0%, #6e7774 50%, #0a0e0a 51%, #0a0809 100%, #0a0809 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#aebcbf), color-stop(50%,#6e7774), color-stop(51%,#0a0e0a), color-stop(100%,#0a0809), color-stop(100%,#0a0809)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* IE10+ */
background: linear-gradient(to bottom, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#aebcbf', endColorstr='#0a0809',GradientType=0 ); /* IE6-9 */
}

.online{
    background: #9dd53a; /* Old browsers */
background: -moz-linear-gradient(top, #9dd53a 0%, #a1d54f 50%, #80c217 51%, #7cbc0a 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#9dd53a), color-stop(50%,#a1d54f), color-stop(51%,#80c217), color-stop(100%,#7cbc0a)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #9dd53a 0%,#a1d54f 50%,#80c217 51%,#7cbc0a 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #9dd53a 0%,#a1d54f 50%,#80c217 51%,#7cbc0a 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #9dd53a 0%,#a1d54f 50%,#80c217 51%,#7cbc0a 100%); /* IE10+ */
background: linear-gradient(to bottom, #9dd53a 0%,#a1d54f 50%,#80c217 51%,#7cbc0a 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9dd53a', endColorstr='#7cbc0a',GradientType=0 ); /* IE6-9 */

}

h1{
      position: absolute;
      bottom: 4px;
      left: 43%;
      color: white;
}

.coisos{

    padding: 5%;    
    overflow: hidden;
    display: block;
    text-align: center;
    margin-bottom: 10px;

}

.coisos>a{
    margin-left: 5%;
    margin-right: 5%;
    color: white;
    padding-top: 25px;
    padding-bottom: 25px;
    padding-left: 50px;
    padding-right: 50px;

    font-size: large;
    text-decoration: none;

    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;

/*     box-shadow: 0px 10px 10px #000000; */

background: #aebcbf; /* Old browsers */
background: -moz-linear-gradient(top, #aebcbf 0%, #6e7774 50%, #0a0e0a 51%, #0a0809 100%, #0a0809 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#aebcbf), color-stop(50%,#6e7774), color-stop(51%,#0a0e0a), color-stop(100%,#0a0809), color-stop(100%,#0a0809)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* IE10+ */
background: linear-gradient(to bottom, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#aebcbf', endColorstr='#0a0809',GradientType=0 ); /* IE6-9 */

}

.coisos>a:hover{
    background: #3b679e; /* Old browsers */
background: -moz-linear-gradient(top, #3b679e 0%, #2b88d9 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3b679e), color-stop(50%,#2b88d9), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */
background: linear-gradient(to bottom, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3b679e', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */
}

article:hover{
    background: #3b679e; /* Old browsers */
background: -moz-linear-gradient(top, #3b679e 0%, #2b88d9 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3b679e), color-stop(50%,#2b88d9), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */
background: linear-gradient(to bottom, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3b679e', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */
}

#search{
    background: #c5deea; /* Old browsers */
background: -moz-linear-gradient(top, #c5deea 0%, #8abbd7 31%, #066dab 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c5deea), color-stop(31%,#8abbd7), color-stop(100%,#066dab)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* IE10+ */
background: linear-gradient(to bottom, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c5deea', endColorstr='#066dab',GradientType=0 ); /* IE6-9 */

    /* background-color: blue; */
    width: 100%;
    height: 1200px;
    padding-top: 2%;
}

.search{
    padding-top: 20px;
    margin-left: 3%;
    float: left;
    width: 93%;
    height: 90px;
/*     background-color: red; */

background: #55aa9e; /* Old browsers */
background: -moz-linear-gradient(top, #55aa9e 0%, #b6eace 50%, #0a302d 51%, #285760 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#55aa9e), color-stop(50%,#b6eace), color-stop(51%,#0a302d), color-stop(100%,#285760)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* IE10+ */
background: linear-gradient(to bottom, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#55aa9e', endColorstr='#285760',GradientType=0 ); /* IE6-9 */

}

.sear{
    margin-left: 20px;
}

input{
    height: 60px;
}

.seartex{
    width: 80%;
}

.butsear{
    width: 10%;
    margin-left: 30px;
}

.log{
    margin-top: 200px;
    padding-top: 20px;
    margin-left: 3%;
    float: left;
    width: 93%;
    height: 200px;
/*     background-color: red; */

background: #55aa9e; /* Old browsers */
background: -moz-linear-gradient(top, #55aa9e 0%, #b6eace 50%, #0a302d 51%, #285760 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#55aa9e), color-stop(50%,#b6eace), color-stop(51%,#0a302d), color-stop(100%,#285760)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* IE10+ */
background: linear-gradient(to bottom, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#55aa9e', endColorstr='#285760',GradientType=0 ); /* IE6-9 */

}

form{
    color: white;
    font-weight: bolder
}

.un{
    float: left;
    display: block;
    overflow: hidden;
    width: 700px;
    margin-bottom: 40px;
}

.un>input{
    width: 60%;

}

.pwd{
    float: right;
    float: left;
    display: block;
    overflow: hidden;
    width: 80%;
}

.pwd>input{
    width: 60%;
}

#login{
    background: #c5deea; /* Old browsers */
background: -moz-linear-gradient(top, #c5deea 0%, #8abbd7 31%, #066dab 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c5deea), color-stop(31%,#8abbd7), color-stop(100%,#066dab)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* IE10+ */
background: linear-gradient(to bottom, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c5deea', endColorstr='#066dab',GradientType=0 ); /* IE6-9 */

    /* background-color: blue; */
    width: 100%;
    height: 1200px;
    padding-top: 2%;
}

.navlog{
    background-color: #c5deea;
}

.navfrien{
    background-color: #c5deea;
}

.navsear{
    background-color: #c5deea;
}

.navperfil{
    background-color: #c5deea;
}

.navlog:hover{
    background-color: gray;
}

.navfrien:hover{
    background-color: gray;
}

.navsear:hover{
    background-color: gray;
}

.navperfil:hover{
    background-color: gray;
}

.offline{
    background: #f85032; /* Old browsers */
background: -moz-linear-gradient(top, #f85032 0%, #f16f5c 50%, #f6290c 51%, #f02f17 71%, #e73827 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f85032), color-stop(50%,#f16f5c), color-stop(51%,#f6290c), color-stop(71%,#f02f17), color-stop(100%,#e73827)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #f85032 0%,#f16f5c 50%,#f6290c 51%,#f02f17 71%,#e73827 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #f85032 0%,#f16f5c 50%,#f6290c 51%,#f02f17 71%,#e73827 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #f85032 0%,#f16f5c 50%,#f6290c 51%,#f02f17 71%,#e73827 100%); /* IE10+ */
background: linear-gradient(to bottom, #f85032 0%,#f16f5c 50%,#f6290c 51%,#f02f17 71%,#e73827 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f85032', endColorstr='#e73827',GradientType=0 ); /* IE6-9 */
}

.coisos1{
    margin-top: 500px;
    padding: 5%;    
    overflow: hidden;
    display: block;
    text-align: center;
    margin-bottom: 10px;

}

.coisos1>a{
    margin-left: 5%;
    margin-right: 5%;
    color: white;
    padding-top: 25px;
    padding-bottom: 25px;
    padding-left: 50px;
    padding-right: 50px;

    font-size: large;
    text-decoration: none;

    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;

/*     box-shadow: 0px 10px 10px #000000; */

background: #aebcbf; /* Old browsers */
background: -moz-linear-gradient(top, #aebcbf 0%, #6e7774 50%, #0a0e0a 51%, #0a0809 100%, #0a0809 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#aebcbf), color-stop(50%,#6e7774), color-stop(51%,#0a0e0a), color-stop(100%,#0a0809), color-stop(100%,#0a0809)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* IE10+ */
background: linear-gradient(to bottom, #aebcbf 0%,#6e7774 50%,#0a0e0a 51%,#0a0809 100%,#0a0809 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#aebcbf', endColorstr='#0a0809',GradientType=0 ); /* IE6-9 */

}

.coisos1>a:hover{
    background: #3b679e; /* Old browsers */
background: -moz-linear-gradient(top, #3b679e 0%, #2b88d9 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3b679e), color-stop(50%,#2b88d9), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */
background: linear-gradient(to bottom, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3b679e', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */
}

.log1{
    padding-top: 20px;
    margin-left: 3%;
    float: left;
    width: 93%;
    height: 200px;
/*     background-color: red; */

background: #55aa9e; /* Old browsers */
background: -moz-linear-gradient(top, #55aa9e 0%, #b6eace 50%, #0a302d 51%, #285760 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#55aa9e), color-stop(50%,#b6eace), color-stop(51%,#0a302d), color-stop(100%,#285760)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* IE10+ */
background: linear-gradient(to bottom, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#55aa9e', endColorstr='#285760',GradientType=0 ); /* IE6-9 */

}

.log2{
    margin-top: 20px;
    padding-top: 20px;
    margin-left: 3%;
    float: left;
    width: 93%;
    height: 500px;
/*     background-color: red; */

background: #55aa9e; /* Old browsers */
background: -moz-linear-gradient(top, #55aa9e 0%, #b6eace 50%, #0a302d 51%, #285760 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#55aa9e), color-stop(50%,#b6eace), color-stop(51%,#0a302d), color-stop(100%,#285760)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* IE10+ */
background: linear-gradient(to bottom, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#55aa9e', endColorstr='#285760',GradientType=0 ); /* IE6-9 */

}

.log3{
    margin-top: 20px;
    padding-top: 20px;
    margin-left: 3%;
    float: left;
    width: 93%;
    height: 120px;
/*     background-color: red; */

background: #55aa9e; /* Old browsers */
background: -moz-linear-gradient(top, #55aa9e 0%, #b6eace 50%, #0a302d 51%, #285760 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#55aa9e), color-stop(50%,#b6eace), color-stop(51%,#0a302d), color-stop(100%,#285760)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* IE10+ */
background: linear-gradient(to bottom, #55aa9e 0%,#b6eace 50%,#0a302d 51%,#285760 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#55aa9e', endColorstr='#285760',GradientType=0 ); /* IE6-9 */

}

.titulo{
    float: left;
    font-size: 50px;
    color: white;
    text-transform: capitalize;
    font-weight: bolder;
    margin-left: 20px;
}

.foto{
    margin-right: 20px;
    float: right;
    height:90%;
    width: 20%;
    background-color: gray;
}

.contain{
    margin-top: 50px;
    margin-left: 20px;
    float: left;
    height:40%;
    width: 20%;

}

.contain>p{
    font-size: 30px;
    color: white;
    margin-bottom: 20px;
}

.contain1{
    margin-top: 50px;
    margin-left: 20px;
    float: left;
    height:40%;
    width: 70%;
}

.contain1>p{
    font-size: 30px;
    color: white;
    margin-bottom: 20px;
    line-height: 35px;
}

#perfil{

background: #c5deea; /* Old browsers */
background: -moz-linear-gradient(top, #c5deea 0%, #8abbd7 31%, #066dab 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#c5deea), color-stop(31%,#8abbd7), color-stop(100%,#066dab)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* IE10+ */
background: linear-gradient(to bottom, #c5deea 0%,#8abbd7 31%,#066dab 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#c5deea', endColorstr='#066dab',GradientType=0 ); /* IE6-9 */

/*     background-color: blue; */
    width: 100%;
    height: 1200px;
    padding-top: 2%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:09:46.213

目前我解决这个问题的方法是在 html 文件中使用 css。

前任：

```
<a style="color: red;"></a> 
```

现在一切正常（除了渐变和阴影，但这与我使用的 webkits 有关）。

# autohotkey - 关于控制焦点的工具提示 ahk

> ID：13918359
> 
> 赞同：2
> 
> 时间：2012-12-17T16:49:35.250
> 
> 标签：autohotkey

在 Autohotkey 中，有没有办法检测什么 gui 控件具有焦点，以便我显示一个带有基本工具提示的文本框。

我想将鼠标悬停或使用键盘导航并在多行文本框中显示将存储在工具提示中的内容。

我不想有工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-17T10:08:14.253

```
OnMessage(0x0200, "WM_MOUSEMOVE") ; WM_MOUSEMOVE 0x0200

Return

WM_MOUSEMOVE(wParam, lParam)
{
 global Control_Name
  X := lParam & 0xFFFF
  Y := lParam >> 16
 MouseGetPos, , , , Control_Name
 Tooltip, %Control_Name%, (x+150), (y+150)
}

Esc::ExitApp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:13:48.387

知道了！;-)

我观察鼠标是否移动，或者控件是否具有焦点并在文本框中显示一些存储的值

```
#Persistent
SetTimer, WatchCursor, 100
return

WatchCursor:
MouseGetPos, mx, my, id, mouseControl
ControlGetFocus, currentFocus, A

if (SubStr(mouseControl,1,6)= "Button" OR SubStr(currentFocus,1,6)= "Button")
    butIDkey := SubStr(currentFocus,7,2)
    butIDmouse := SubStr(mouseControl,7,2)

    if (SubStr(mouseControl,1,6)= "Button" && lastmx <> mx && lastmy <> my)
        butID := butIDmouse 

    if (butIDkey <> lastControl) 
        butID := butIDkey

    lastControl :=  butIDkey
    lastmx := mx
    lastmy := my

    GuiControl,TemplateEngine:, MyTooltip,  % Value%butID%
}
return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:14:09.457

[ControlGetFocus](http://www.autohotkey.com/docs/commands/ControlGetFocus.htm)用于获取名称。请参阅下面的示例代码

```
a::
ControlGetFocus, OutputVar, A
if ErrorLevel
    MsgBox, The target window doesn't exist or none of its controls has input focus.
else
    MsgBox, Control with focus = %OutputVar% 
```

# c++ - 来自 CFStringCompareWithOptions 的奇怪行为

> ID：13918360
> 
> 赞同：3
> 
> 时间：2012-12-17T16:49:41.903
> 
> 标签：c++, macos, core-foundation, cfstring

我试图找出如何将字符串的第`n`一个字符与另一个字符匹配。这是我目前得到的一些代码：

```
CFStringRef myStringRef = CFSTR("hello");
CFStringRef otherStringRef = CFSTR("helloworld");

CFIndex cmpChars = CFStringGetLength(myStringRef);

CFComparisonResult res = CFStringCompareWithOptions(myStringRef, otherStringRef, CFRangeMake(0, cmpChars), kCFCompareCaseInsensitive);

printf("Res: %i\n", (int)res); 
```

根据文档，我得到`res`as的值`-1`，意思是“小于”。当然，既然我指定了要匹配的范围，那么它应该只考虑该范围吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:44:21.600

文档可能更清楚，但范围仅适用于第一个字符串，而不适用于第二个。 [这是旧邮件列表消息的链接。](http://lists.apple.com/archives/carbon-dev/2005/Aug/msg00525.html) 你无法从档案中看出什么，但我从我的个人档案中知道，这么说的人是苹果工程师。

为了做你想做的事，你可能也需要使用`CFStringCreateWithSubstring`。

# java - 检查字节数组中的字节是否为 Unicode

> ID：13918362
> 
> 赞同：0
> 
> 时间：2012-12-17T16:49:54.430
> 
> 标签：java, android, unicode, byte

如何检查字节数组中的字节是否为 Unicode 字符？

**主要问题：**

```
android 4.2 new String(bytes) remove unicode chars from my String: [\uFFFD] 
```

我需要一个解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:10:13.087

```
return Charset.forName("UTF-8").newEncoder().canEncode(string); 
```

更新：您没有传递 a `Charset`to `new String(bytes)`，所以它只是假设您使用的是默认字符集。相反，请执行例如`new String(bytes, "UTF-8")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:06:35.877

不，不是。例如，您可以通过观察字节数组中的字符不违反 UTF-8 规则来猜测。有关更多信息，请参阅[http://blogs.msdn.com/b/oldnewthing/archive/2007/04/17/2158334.aspx 。](http://blogs.msdn.com/b/oldnewthing/archive/2007/04/17/2158334.aspx)

# string - 鉴于 ShortString 已被弃用，限制字符串长度的最佳方法是什么

> ID：13918365
> 
> 赞同：5
> 
> 时间：2012-12-17T16:49:57.150
> 
> 标签：string, delphi, field

有这样的记录并不少见：

```
TAddress = record
  Address: string[50];
  City   : string[20];
  State  : string[2];
  ZIP    : string[5];
end; 
```

最好有硬编码的字符串大小，以确保字符串的大小不会超过为数据分配的数据库字段大小。

然而，鉴于该`ShortString`类型已被弃用，Delphi 开发人员正在做什么来“解决”这个问题？将记录字段声明为`string`完成工作，但不能保护数据不超过适当的长度。

这里最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:02:50.517

如果我必须防止数据超过正确的长度，我会让数据库代码尽可能地处理它。对字段设置大小限制，并在数据绑定控件中向用户显示数据。绑定到字符串字段将`TDBEdit`正确执行长度限制。设置它，以便直接从数据集中填充记录，并且它始终具有正确的长度。

然后，您需要担心的是来自不属于您的 UI 的某些外部来源的数据进入记录。为此，请使用相同的过程。让导入代码将数据插入数据集中，并让其长度约束为您进行验证。如果引发异常，则拒绝导入。如果没有，那么您有一个有效的数据集行，可用于从中填充记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T17:03:12.910

您问题中的短字符串类型并不能真正保护字符串不超过适当的长度。当您为这些短字符串分配更长的值时，该值会被静默截断。

我不确定您使用的是什么数据库访问方法，但我想它会做同样的事情。即将任何超长字符串截断到最大长度。在这种情况下，没有什么可做的。

如果你的数据库访问方法在你给它一个过长的字符串时抛出一个错误，那么你需要在将值传递给数据库之前截断。

如果您必须明确截断，那么您可以选择在很多地方这样做。我的理念是在最后一刻截断。这就是你受到限制的地方。截断其他任何地方似乎是错误的。这意味着数据库限制正在蔓延到与数据库不明显相关的代码部分。

当然，所有这一切都是基于您要进行静默截断的假设。如果您想在截断的情况下提供用户反馈，那么您将需要确定正确的反馈点在哪里。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T19:43:46.120

据我了解，我的答案应该是“不要混合图层”。

我怀疑字符串长度是在数据库层级别（列宽）或业务应用程序层（例如验证卡号）指定的。

从“纯Delphi代码”的角度来看，你不应该知道你的`string`变量有一个最大长度，除非你到达持久层甚至业务层。

使用属性可能是一个想法。但它可能会“污染”源代码，原因与混合层的原因相同。

因此，我建议使用专用的数据建模，在其中指定您的数据期望。然后，在 Delphi`var`级别，您只需定义一个普通的`string`. 这正是我们的*mORMot*框架[实现数据过滤和验证](http://blog.synopse.info/post/2011/06/01/Business-rules%3A-validate-and-filter-data)的方式：在模型级别，使用一些专用类 - 方便、可扩展和干净。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-17T23:12:16.657

如果您只是从 Delphi 7 移植到 XE3，请别管它。此外，虽然“ShortString”可能已被弃用，但如果他们完全删除它，我会吃掉我的帽子，因为有很多代码在没有它的情况下将永远无法重建。ShortString + Records 仍然是指定面向字节的文件记录数据存储的唯一实用方法。Delphi 永远不会删除 ShortString 也不会改变它的行为，这将对现有的 delphi 代码造成破坏。因此，如果您确实必须定义记录并限制它们的长度，并且您确实不希望这些记录支持 Unicode，那么停止使用或停止编写 ShortString 代码的理由为零。话虽如此，我讨厌短字符串和记录文件，希望它们会消失，并且很高兴它们被标记为已弃用。

话虽如此，我完全同意梅森和大卫的观点；我想说，长度检查和验证是表示/验证问题，而 Delphi 的强类型不是处理它们的正确位置或正确方法。如果您需要对您的类设置验证约束，请编写实现约束存储的辅助类（EmployeeName 是一个字符串字段，EmployeeName 具有以下长度限制）。例如，在编辑控件中，这已经是一个属性。在我看来，使用新的绑定系统将 DB 字段映射到可视字段比尝试在代码中静态表达约束要好得多。

用户输入验证和存储是不同的，长度限制应该在您的 GUI 控件中设置，而不是在您的数据结构中。

例如，如果您想要一个 Unicode 宽但长度有限的字符串，您可以使用 UnicodeChar 数组。您甚至可以使用 Delphi 中新的类帮助器方法编写自己的 LimitedString 类。但是这样的方法不是一个可维护和稳定的设计。

如果您的 SQL 数据库有一个用`VARCHAR(100)`type 声明的字段，并且您希望将用户的输入限制为 100 个字符，您应该在 GUI 层这样做，并且忘记在幕后默默地强加截断（实际上是数据损坏）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T20:20:05.503

我遇到了这个问题 - 严重 - 从 Delphi 6 升级到 2009 对于一个程序正在/正在做什么，必须能够将旧的 ASCII 字符串视为单独的 ASCII 字符。

该程序输出 ASCII 文件（甚至没有 ANSI），并具有诸如在最后一个数字上打孔以表示负数的概念。所以文件格式可以说有点回溯了！

在 2009 年第一次构建之后（10 年的代码，好吧，你不知道！）在对单元名称等进行排序之后，实际上报告了数百个错误/非法分配和数据丢失/转换警告......

不管 Delphi 对字符串和字符的后台操作/魔术有多好，我都不够信任它。最后，为了确保一切都恢复原状，我将它们全部重新声明为字节数组，然后相应地更改了代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T03:02:50.310

您尚未指定 delphi 版本，以下是在 delphi 2010 中对我有用的内容：

**版本 1**：

```
TTestRecordProp = record
private
  FField20: string;
  ...
  FFieldN: string
  procedure SetField20(const Value: string);
public
  property Field20: string read FField20 write SetField20;
  ...
  property FieldN: string ...
end;
...
procedure TTestRecordProp.SetField20(const Value: string);
begin
  if Length(Value) > 20 then
    /// maybe raise an exception?
    FField20 := Copy(FField20, 1, 20)
  else
    FField20 := Value;
end; 
```

**版本2**：

```
TTestRecordEnsureLengths = record
  Field20: string;
  procedure EnsureLengths;
end;
...
procedure TTestRecordEnsureLengths.EnsureLengths;
begin
  // for each string field, test it's length and truncate or raise exception
  if Length(Field20) > 20 then
    Field20 := Copy(Field20, 1, 20); // or raise exception...
end; 
```

// 在将数据推送到数据库之前，您必须调用 .EnsureLength...

就个人而言，我建议用对象替换记录，然后你可以做更多的技巧。

# java - Java 电子邮件 - 异常服务器不受信任

> ID：13918374
> 
> 赞同：3
> 
> 时间：2012-12-17T16:50:39.513
> 
> 标签：java, jakarta-mail, glassfish-3, apache-commons

我正在使用 apache commons mail 发送电子邮件。不幸的是，我遇到了以下异常：

```
org.apache.commons.mail.EmailException: Sending the email to the following server failed : mail.xxx.com:25
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1242)
    at org.apache.commons.mail.Email.send(Email.java:1267)
    at com.xxx.UserBean.sendMail(UserBean.java:92)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
.
.
.
Caused by: javax.mail.MessagingException: Could not convert socket to TLS;
  nested exception is:
    java.io.IOException: Server is not trusted: mail.xxx.com
    at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1880)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:648)
    at javax.mail.Service.connect(Service.java:317)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1232)
    ... 85 more
Caused by: java.io.IOException: Server is not trusted: mail.xxx.com
    at com.sun.mail.util.SocketFetcher.startTLS(SocketFetcher.java:443)
    at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1875)
    ... 92 more 
```

这是我的java代码：

```
 public void sendMail(){
    try {  
        SimpleEmail mail = new SimpleEmail();
        mail.setTLS(true); 
        mail.setAuthenticator(new DefaultAuthenticator("user","xyxyxyxy"));
        mail.setHostName("mail.xxx.com");            
        mail.getMailSession().getProperties().put("mail.smtps.auth", true);
        mail.getMailSession().getProperties().put("mail.debug", true);
        mail.getMailSession().getProperties().put("mail.smtps.port", "587");
        mail.getMailSession().getProperties().put("mail.smtp.starttls.enable", true);
        mail.getMailSession().getProperties().put("mail.smtp.ssl.trust", "smtpserver");

        mail.addTo("user@server.com", "user");
        mail.setFrom("info@xxx.com");
        mail.setSubject("Bla Bla");
        mail.setMsg("Bla Bla again");
        mail.send();
                } catch (Exception ex) {   
        logger.info("Senden der Email ist gescheitert!", ex);            
    }
 } 
```

我已经阅读了很多线程并尝试了很多提示。我被困在这里了！我应该提一下，我可以使用“javax.mail”通过另一种方法发送电子邮件。但我想搬到阿帕奇。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:55:57.253

将TLS（传输层安全）设置为 false。如果你不使用。当它是 true 时，它​​应该是 mail.xxx.com 受信任的服务器。

`mail.setTLS(false);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T11:57:19.593

终于解决了。我尝试了一切以在我的交换服务器上进行身份验证。使用下面的代码：

```
Properties props = (Properties)System.getProperties().clone();
props.put("mail.smtp.host", host);
props.setProperty("mail.smtp.port", "587");
props.put("mail.smtp.auth", true);

//Bypass the SSL authentication
props.put("mail.smtp.ssl.enable", false);
props.put("mail.smtp.starttls.enable", false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-06T17:52:30.677

如果您正在使用`Spring-Boot-Mail`，请尝试将此行添加到您的`.properties`文件中：

```
spring.mail.properties.mail.smtp.ssl.trust=smtp.mandrillapp.com 
```

# c# - C# File.Copy 抛出异常“不支持给定路径的格式”

> ID：13918375
> 
> 赞同：6
> 
> 时间：2012-12-17T16:50:42.720
> 
> 标签：c#, .net

```
string source = @"C:\Users\damanja\Desktop\Projects\RecStudentManagement\RecStudentManagement.Web\Reports\Templates\ContactInformationReport.xlsx";
string dest = @"C:\Users\damanja\Desktop\Projects\RecStudentManagement\RecStudentManagement.Web\Reports\Ran\damanja2012-12-17T10:14:02.0394885-06:00.xlsx";

File.Copy(source, dest, true); 
```

产生此异常：

```
The given path's format is not supported. 
```

堆栈跟踪：

```
at System.Security.Util.StringExpressionSet.CanonicalizePath(String path, Boolean needFullPath)
   at System.Security.Util.StringExpressionSet.CreateListFromExpressions(String[] str, Boolean needFullPath)
   at System.Security.Permissions.FileIOPermission.AddPathList(FileIOPermissionAccess access, AccessControlActions control, String[] pathListOrig, Boolean checkForDuplicates, Boolean needFullPath, Boolean copyPathList)
   at System.Security.Permissions.FileIOPermission..ctor(FileIOPermissionAccess access, String[] pathList, Boolean checkForDuplicates, Boolean needFullPath)
   at System.IO.File.InternalCopy(String sourceFileName, String destFileName, Boolean overwrite)
   at System.IO.File.Copy(String sourceFileName, String destFileName, Boolean overwrite)
   at RecStudentManagement.Web.Reports.ExcelReport.CopyTemplate() in C:\\Users\\damanja\\Desktop\\Projects\\RecStudentManagement\\RecStudentManagement.Web\\Reports\\ExcelReport.cs:line 52
   at RecStudentManagement.Web.Reports.ExcelReport..ctor(String fileName) in C:\\Users\\damanja\\Desktop\\Projects\\RecStudentManagement\\RecStudentManagement.Web\\Reports\\ExcelReport.cs:line 35
   at RecStudentManagement.Web.Reports.ContactInformationReport..ctor(IEnumerable`1 students, IEnumerable`1 includedPrograms, String createdByULID, String fileName) in C:\\Users\\damanja\\Desktop\\Projects\\RecStudentManagement\\RecStudentManagement.Web\\Reports\\ContactInformationReport.cs:line 22
   at RecStudentManagement.Web.Controllers.ReportsController.ContactInformationCreate(ContactInformationSetUpViewModel vm) in C:\\Users\\damanja\\Desktop\\Projects\\RecStudentManagement\\RecStudentManagement.Web\\Controllers\\ReportsController.cs:line 99 
```

源目录和目标目录都存在。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-17T16:51:41.943

您在目标路径中有冒号 (:)，这是 Windows 不允许的（当然，除了作为驱动器号说明符的一部分......）。

要使其正常工作，请为您尝试嵌入的日期时间选择不同的日期格式，该格式不使用冒号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T16:59:33.233

这是一个 MSDN 站点，它将解释保留字符以及创建**Windows 文件路径**时允许或不允许的内容，如果您必须**“_”**重新格式化日期部分以使用**yyyymmdd**或**mmddyyyy** ，请用下划线 替换**“:”**存储在不同的 DateTime 变量中并将其转换为字符串..您可以使用许多其他选项..

 ******[命名文件、路径和命名空间 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)******

# android - scala 的 sublime-ensime 找不到 android 包

> ID：13918383
> 
> 赞同：0
> 
> 时间：2012-12-17T16:51:02.783
> 
> 标签：android, scala, sbt, sublimetext2, ensime

Ensime 没有找到 android 包并给出如下错误：

```
object android is not a member of package <root> 
```

我在带有 Java 1.6 的 OS X 上使用 sbt 和 sublime-ensime 来尝试一个简单的 android 演示项目。我知道一些类似的问题[，例如 this](https://github.com/aemoncannon/ensime/issues/41)和[this](https://stackoverflow.com/questions/5449175/ensime-doesnt-work-with-sbt-android-plugin)，但这些解决方案对我不起作用。

该项目是从模板创建的，如下所示：

```
g8 jberkel/android-app 
```

我使用生成了 .ensime 文件（如下）

```
ensime generate 
```

尽管显然列出了所有项目依赖项，但 ensime 仍然找不到 android 类。但是，sbt 编译项目没有问题。

这是有点长的 .ensime 文件——我也尝试过将其简化为基础，但没有成功。

```
(:subprojects
((:runtime-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes")
:module-name
"android-essentials"
:compile-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar")
:version
"0.1"
:test-target
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/test-classes"
:name
"Android Essentials"
:depends-on-modules
()
:package
"android-essentials"
:target
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
:source-roots
("/Users/george/Source/Projects/android-essentials/src/main/scala"
"/Users/george/Source/Projects/android-essentials/src/main/java"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/src_managed/main/java"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/src_managed/main/scala"
"/Users/george/Source/Projects/android-essentials/src/test/scala"
"/Users/george/Source/Projects/android-essentials/src/test/java"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/src_managed/test")
:test-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/.ivy2/cache/org.scalatest/scalatest_2.10.0-RC5/jars/scalatest_2.10.0-RC5-2.0.M5-B1.jar"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/test-classes"))
(:runtime-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/classes")
:module-name
"android-essentials-tests"
:compile-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes")
:version
"0.1"
:test-target
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/test-classes"
:name
"Android Essentials Tests"
:depends-on-modules
("android-essentials")
:package
"android-essentials-tests"
:target
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/classes"
:source-roots
("/Users/george/Source/Projects/android-essentials/tests/src/main/scala"
"/Users/george/Source/Projects/android-essentials/tests/src/main/java"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/src_managed/main/java"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/src_managed/main/scala"
"/Users/george/Source/Projects/android-essentials/tests/src/test/scala"
"/Users/george/Source/Projects/android-essentials/tests/src/test/java"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/src_managed/test")
:test-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/test-classes")))) 
```

[这是 ensime server.log 的相关部分](https://gist.github.com/41f8bba4c5f56bf94649)

我的配置有问题，还是 Ensime / Sublime 有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:38:47.400

似乎这个问题与 ensime 如何使用 sbt ensime-sbt-cmd 插件生成的 .ensime 文件有关。

我通过重构我的 .ensime 文件来解决它，使其没有任何子项目。

例如，我上面的原始 .ensime 文件现在看起来像这样：

```
(:name
"Android Essentials"
:module-name
"android-essentials"
:version
"0.1"
:package
"droid.essentials"
:runtime-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-reflect.jar"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/classes"
"/Users/george/.ivy2/cache/com.google.android/support-v4/jars/support-v4-r7.jar"
"/Users/george/.ivy2/cache/io.spray/spray-json_2.10.0-RC5/jars/spray-json_2.10.0-RC5-1.2.3.jar")
:compile-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-reflect.jar"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/.ivy2/cache/com.google.android/support-v4/jars/support-v4-r7.jar"
"/Users/george/.ivy2/cache/io.spray/spray-json_2.10.0-RC5/jars/spray-json_2.10.0-RC5-1.2.3.jar")
:target
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
:test-target
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/test-classes"
:source-roots
("/Users/george/Source/Projects/android-essentials/src/main/scala"
"/Users/george/Source/Projects/android-essentials/src/main/java"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/src_managed/main/java"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/src_managed/main/scala"
"/Users/george/Source/Projects/android-essentials/src/test/scala"
"/Users/george/Source/Projects/android-essentials/src/test/java"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/src_managed/test"
"/Users/george/Source/Projects/android-essentials/tests/src/main/scala"
"/Users/george/Source/Projects/android-essentials/tests/src/main/java"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/src_managed/main/java"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/src_managed/main/scala"
"/Users/george/Source/Projects/android-essentials/tests/src/test/scala"
"/Users/george/Source/Projects/android-essentials/tests/src/test/java"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/src_managed/test")
:test-deps
("/usr/local/android-sdk/platforms/android-14/android.jar"
"/Users/george/.ivy2/cache/com.google.android/support-v4/jars/support-v4-r7.jar"
"/Users/george/.ivy2/cache/io.spray/spray-json_2.10.0-RC5/jars/spray-json_2.10.0-RC5-1.2.3.jar" 
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-library.jar"
"/Users/george/.sbt/boot/scala-2.10.0-RC2/lib/scala-reflect.jar"
"/Users/george/.ivy2/cache/org.scalatest/scalatest_2.10.0-RC5/jars/scalatest_2.10.0-RC5-2.0.M5-B1.jar"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/test-classes"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/target/scala-2.10/classes"
"/Users/george/Source/Projects/android-essentials/tests/target/scala-2.10/test-classes")) 
```

这个问题正在[这里](https://github.com/sublimescala/sublime-ensime/issues/56)进一步调查。

# ms-access - 表单已经打开时打开参数

> ID：13918386
> 
> 赞同：1
> 
> 时间：2012-12-17T16:51:15.637
> 
> 标签：ms-access

一旦表单已经在 Access 中打开，是否可以更改 Openargs 值？它仅在表单第一次打开时起作用。它失败的形式已经打开。

编辑：

我在表单的 onActivate 事件中有此代码

```
If Not IsNull(Me.OpenArgs) Then
    Me.Recordset.FindFirst ("Id =" & Me.OpenArgs)
    If Me.Recordset.NoMatch Then
        MsgBox "ISOS not found"
    End If
End If 
```

`Me.OpenArgs`包含使用此命令`DoCmd.OpenForm "<Form_Name>", acNormal, , , , acWindowNormal, Forms!Lookup_Form!Id`打开主窗体的另一种窗体中的搜索结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-31T03:47:10.920

我最近不得不为我正在从事的一个项目解决同样的问题，所以我想我会提供我想出的解决方案。

在这种情况下，我发现做的最简单的事情是在 DoCmd.OpenForm 之前调用 DoCmd.Close。这将关闭表单的当前实例并打开一个新实例，这将强制 Form_Load 事件使用新参数再次触发。

```
DoCmd.Close acForm, "Form2", acSaveNo
DoCmd.OpenForm "Form2", acNormal, , , , , {arg1}|{arg2} 
```

这里的两个假设是： 1\. “Form2”的状态总是由 Form_Load 事件中的代码初始化。2\. “Form2”中没有我在传递新参数时试图保留的状态数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:38:27.403

如何从搜索表单中运行您的代码，如下所示：

```
Dim frm As Form

If Not CurrentProject.AllForms("Form1").IsLoaded Then
    DoCmd.OpenForm "Form1"
End If

Set frm = Forms!Form1
frm.Recordset.FindFirst ("Id =" & Me.ID)
If frm.Recordset.NoMatch Then
    MsgBox "ISOS not found"
End If 
```

# fullcalendar - Fullcalendar 的彩色周末

> ID：13918387
> 
> 赞同：8
> 
> 时间：2012-12-17T16:51:28.343
> 
> 标签：fullcalendar

我正在使用 FullCalendar 组件，我需要为周末、周五和周六着色。我按照这里的建议使用了以下内容： [我可以在每月的 fullCalendar 显示上为周末设置不同的颜色吗](https://stackoverflow.com/questions/4044482/different-color-for-weekend-on-monthly-fullcalendar-display)

```
$('table.calendar > tbody > tr > td:nth-child(-n+2)').addClass('fc-weekend'); 
```

我还添加了 css 类。

这是我的代码，不会影响周末......任何建议！

```
$(document).ready(function() {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    $.getJSON('[@spring.url '/loadSomeData'/]', function (data) {
      $.getJSON('[@spring.url '/loadOtherData/]', function (info) {
        information = returnedPublicVacation;

        var calendar = $('#calendar').fullCalendar({
          header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
          },
          selectable: true,
          selectHelper: true,
          select:
            function(start, end, allDay) {
              vacationStart = start;
              showTheCorrectDialog(vacationStart);
            },

          eventClick: function(calEvent, jsEvent, view) {

            showTheCorrectDialog(calEvent.start);

            // change the border color just for fun
            $(this).css('border-color', 'red');
          },

          editable: true,
          events:data.concat(information)
        });
        resourceVacation = data;
      });
    });

    $('table.calendar > tbody > tr > td:nth-child(-n+2)').addClass('fc-weekend');
  }); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-17T17:19:28.427

您是否在 css 文件中为类添加了样式？

你也可以试试这个：

```
.fc-fri { color:blue; }
.fc-sat { color:red;  } 
```

（或周日的 .fc-sun）您可以在此处查看示例：http: [//jsfiddle.net/rajesh13yadav/nf9whojL/1/](http://jsfiddle.net/rajesh13yadav/nf9whojL/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-17T07:46:32.743

**在版本 4 中，您可以使用“ daysOfWeek** ”为所有星期日或其他日子一起添加事件。

```
 events: [
    {
      daysOfWeek: [0,6], //Sundays and saturdays
      rendering:"background",
      color: "#ff9f89",
      overLap: false,
      allDay: true
    }] 
```

我建议您使用这种方法，因为您可以使用服务器端脚本语言（如 PHP、Node.js、JavaScript 等）轻松更改它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-20T09:41:57.470

这对我有用：

```
.fc-sun { 
color:#337ab7;  
border-color: black;  
background-color: #ffa58c; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T10:21:58.597

```
AJS.$(document).ready(function () {
    AJS.$(".fc-weekend-column").each(function(i,el){
        AJS.$(this).css("background-color", "#FFF7F7");
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-29T08:19:15.087

***FULLCALENDAR 版本 5 中的解决方案：***

将 CSS 样式应用于***fc-day-sat***和***fc-day-sun***类：

```
#calendar .fc-day-sun, #calendar .fc-day-sat {
    background-color: #f4f5d7;
} 
```

如果您不想更改日历标题的颜色（显示“Sat”和“Sun”），您可以通过添加***td***标签来精确应用***fc-day-sat***和***fc-day-sun***类的 css ：

 **```
#calendar td.fc-day-sun, #calendar td.fc-day-sat {
    background-color: #f4f5d7;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-13T05:14:53.477

如果要去掉周末的顶层，使用下面的代码

```
.fc-day-sat .fc-daygrid-day-frame .fc-daygrid-day-bg .fc-daygrid-bg-harness{
        display: none;
}

.fc-day-other .fc-daygrid-day-frame .fc-daygrid-day-bg .fc-daygrid-bg-harness{
    display: block;
}

.fc-day-other .fc-daygrid-day-frame .fc-daygrid-day-bg .fc-daygrid-bg-harness .fc-non-business{
    display: none;
} 
```

之后您可以使用此代码： [使用此](https://stackoverflow.com/questions/13918387/color-weekend-at-fullcalendar/13918858#13918858)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-18T03:54:28.373

**在完整日历版本 5 中**

几天的 css 类已更改如下。

**.fc-sun -> .fc-day-sun**

**.fc-mon -> .fc-day-mon**

**.fc-tue -> .fc-day-tue**

**.fc-wed -> .fc-day-wed**

**.fc-thu -> .fc-day-thu**

**.fc-fri -> .fc-day-fri**

**.fc-sat -> .fc-day-sat**

**所以你可以使用像（星期天）**

```
.fc-day-sun {
    background-color: red;
    /*your styles goes here*/
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-25T07:08:45.037

**完整日历版本 5：**

`.fc-sat`和`.fc-sun`已转换为`.fc-day-sat`和`.fc-day-sun`。

也将 bgcolor 应用于`.fc-day-sat, .fc-day-sat`将不再起作用，因为他们已将 bgcolor 应用于`.fc-non-business`最深的子类。

> [![在此处输入图像描述](../Images/0f03fb98bd8bc32f637af8f75c9d81ce.png)](https://i.stack.imgur.com/hbYH1.png)

```
.fc .fc-non-business {  
  background-color: #fff; 
} 
```

一个普通的类现在可以完成这项工作。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-02-10T10:36:36.977

这段代码与我一起工作：

```
#calendar .fc-bgevent {
        background: #000000;
} 
```**

# android - 在活动之间切换时访问 SQLite 数据库时出现异常

> ID：13918388
> 
> 赞同：1
> 
> 时间：2012-12-17T16:51:36.687
> 
> 标签：android, database, onresume

我的应用程序包含许多活动，到目前为止，在活动之间移动时访问数据库没有问题。但是在最后一个 listActivity (LocationActivity) 上，我在每个 listView 项目上都有一个嵌入式按钮。

单击其中一个按钮时，它会将您发送到 SpecificationEdit.java，用户在其中将规范输入到该 listView 项（损坏的组件）的某些 EditText 字段中，但是当您单击保存时，它会崩溃并显示以下错误消息（注意数据保存到数据库ok）：

```
java.lang.RuntimeException: Unable to resume activity blah blah
Exception: trying to requery an already closed cursor blah blah 
```

这是 listActivity 类：

```
public class LocationActivity extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_location);
    setLongClick();

    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();
    getIntents();
    setUpViews();
    setAdapter();               
    setTextChangedListeners();
}

protected void onResume(){
    super.onResume();
    final Cursor locationCursor = (Cursor) rmDbHelper.fetchLocationsForRun(runId);
    startManagingCursor(locationCursor);
    locationCursorSize = locationCursor.getCount();
    setAdapter();
    setTextChangedListeners();
} 
```

这是此活动中的一点，将您发送到 SpecificationEdit.java

```
private void startComponentEdit() {
    Intent i = new Intent(LocationActivity.this, SpecificationEdit.class);
    i.putExtra("Intent_InspectionID", inspectionId);
    i.putExtra("Intent_AreaID", areaId);
    i.putExtra("Intent_RunID", runId);
    i.putExtra("Intent_LocationID", locationId);
    i.putExtra("Intent_Ref", locationRef);
    i.putExtra("Intent_DamagedComponentID", damagedComponentId);
    startActivityForResult(i, ACTIVITY_CREATE);

} 
```

这是 SpecificationEdit.java 中的 OnCreate：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();
    Intent i = getIntent();
    inspectionId = i.getLongExtra("Intent_InspectionID", -1);
    areaId = i.getLongExtra("Intent_AreaID", -1);
    runId = i.getLongExtra("Intent_RunID", -1);
    locationId = i.getLongExtra("Intent_LocationID", -1);
    damagedComponentId = i.getLongExtra("Intent_DamagedComponentID", -1);
    setContentView(R.layout.edit_specification);
    setUpViews();
    populateFields();
    fillSpinner();
    setListeners();
} 
```

使用单击保存按钮时触发的代码位：

```
protected void saveDamagedComponentSpec() {  

    String manufacturer = ((Cursor)manufacturerSpinner.getSelectedItem()).getString(1).toString();
    String text1 = specEditText1.getText().toString();
    String text2 = specEditText2.getText().toString();
    String text3 = specEditText3.getText().toString();
    String text4 = specEditText4.getText().toString();
    String notes_spec = specEditTextNotes.getText().toString();

    rmDbHelper.saveDamagedComponentSpec(damagedComponentId, manufacturer, text1, text2, text3, text4, notes_spec);      

    if ("Yes".equals(specSaved)){
        Toast.makeText(getApplicationContext(), "Component specification updated", 
            Toast.LENGTH_SHORT).show();
    }

    else {
        Toast.makeText(getApplicationContext(), "Component specification added", 
                Toast.LENGTH_SHORT).show();

    }

    finish();
} 
```

最后，这是我的数据库助手类中的代码：

```
//Constructor - takes the context to allow the database to be opened/created
public RMDbAdapter(Context ctx) {
    this.mCtx = ctx;
}

/**
 * Open the rm database. If it cannot be opened, try to create a new
 * instance of the database. If it cannot be created, throw an exception to
 * signal the failure
 * 
 * @return this (self reference, allowing this to be chained in an
 *         Initialisation call)
 * @throws SQLException if the database could be neither opened or created
 */
public RMDbAdapter open() throws SQLException {
    rmDbHelper = new DatabaseHelper(mCtx);
    rmDb = rmDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    rmDbHelper.close();
} 
```

奇怪的是，您可以单击其中一个 listView 项目（实际项目不是嵌入项目）或“添加新组件”按钮，这会将您发送到另一个具有非常相似界面的活动 ComponentEdit.java（添加一个组件到列表中）作为 SpecificationEdit ，但是当它完成时不会使应用程序崩溃。

我看不出这两个活动之间有任何重大区别，但是当您返回 LocationActivity 时，一个会因此错误而崩溃，而另一个则不会。

我刚刚尝试删除 onResume ，这没有任何区别。用它撞到一堵砖墙，这让我发疯了。

我应该补充一点，它在我的模拟器上运行良好，但在我的手机（HTC One S）上测试时崩溃。很奇怪..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:34:14.713

对，找到问题了（发现明显的错误）：

```
 Cursor componentsCursor = (Cursor) rmDbHelper.fetchDamagedComponentSpecForInspection(inspectionId, componentType);
    startManagingCursor(componentsCursor);

    Intent i = new Intent(this, SpecificationEdit.class);
    i.putExtra("Intent_InspectionID", inspectionId);
    i.putExtra("Intent_AreaID", areaId);
    i.putExtra("Intent_RunID", runId);
    i.putExtra("Intent_LocationID", locationId);
    i.putExtra("Intent_Ref", locationRef);
    i.putExtra("Intent_DamagedComponentID", damagedComponentId);
    startActivityForResult(i, ACTIVITY_CREATE);

    componentsCursor.close(); 
```

所以这不是很明显（我在 componentsCursor.close() 之前留下了一些被屏蔽的代码），但是当我完成 SpecifcationEdit.class 时，我猜它会返回到这个活动并尝试关闭 componentsCursor 但显然失败了。

愚蠢的是，我实际上还没有让这个光标做任何事情！嗬！

只是为了一些额外的建议/发白；我的应用程序与谷歌记事本示例根本不同，因为我实际上并没有像他们那样使用 startActivityForResult（事实上，现在我更好地理解了，我将用 startActivity 替换所有这些），因为我将数据输入到数据库中同时仍然在编辑活动上，然后（而不是通过意图传递此信息，然后在您返回上一个活动时添加。

我发现这在我的代码领域更合乎逻辑，但是对这种方法有任何反馈吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:02:49.470

不要忘记调用 rmDbHelper.close(); 在开始另一项活动之前

# session - 用于安全“记住我”功能的 Cookie 与会话

> ID：13918389
> 
> 赞同：0
> 
> 时间：2012-12-17T16:51:38.680
> 
> 标签：session, web-applications, cookies, security, session-cookies

我在该地方使用一台计算机作为该应用程序的 Web 专用服务器。（因此不会共享会话）

我想开发一个安全的*记住我*的功能，我想知道这是最好的方法：

*   会话
*   饼干

使用 cookie 我必须加密用户密码，创建一些盐并在数据库中添加一些字段。（如[这里](https://stackoverflow.com/a/477578/1081396)或[这里详述](https://stackoverflow.com/a/1355065/1081396)）

在这种情况下使用会话将它们配置为持续更长时间不是更简单吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:45:20.663

饼干。

您需要在客户端上存储一些状态。“记住我”的想法是，在没有会话的情况下回到同一个站点仍然会让您重新登录，而没有建立有效的会话。

Cookies 允许您存储状态。可以有其他方法来做到这一点，但绝对不是会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:26:34.757

Cookie 与会话

会话的优点：

1.  会话可能更容易配置。
2.  会话适用于有限数量的极其受信任的用户
3.  Cookies 和 Sessions 具有相同的威胁模型。如果黑客可以解密 cookie，他就可以解密会话

缺点

1.  如果您的服务器受到攻击，攻击者将获得上下文。即一大堆令牌，他可以通过这些令牌解密数据

会话在服务器端保存内存。当浏览器关闭时，会话 cookie 也会过期。虽然这可以重新配置（如果你真的很努力的话）。您基本上最终会在一个稍微新的头像中重新创建 cookie。

毫无疑问，“记住我”的所有 Cookies VS Sessions 都是它的 cookie。

# vb.net - 将朋友类作为类型从公共类传递给朋友基类时出错

> ID：13918392
> 
> 赞同：3
> 
> 时间：2012-12-17T16:51:44.470
> 
> 标签：vb.net, generics, inheritance, user-controls

免责声明：我对使用泛型还很陌生，所以我不完全确定我正在尝试做的事情是否有意义或可能。

我在一个项目中有一堆用户控件。所有这些用户控件都共享一个相似的属性，所以我想将它移到一个基类中。唯一的区别是属性的返回类型。

在这种情况下，我有三个交互的类。第一个类是基类型，它继承`CompositeControl`自我项目中的其他类并将被其他类继承：

```
Friend Class MyBaseClass(Of T As {New})
    Inherits CompositeControl

    Private _someProperty As T = Nothing

    Protected ReadOnly Property SomeProperty As T
        Get
            // dumbed down for the sake of example
            If _someProperty Is Nothing Then
                _someProperty = New T()
            End If

            Return _someProperty 
        End Get
    End Property
End Class 
```

然后我有这个控制类，它继承自`MyBaseClass`：

```
Public Class MyControlClass
    Inherits MyBaseClass(Of MyReturnTypeClass)

    // snip...
End Class 
```

最后`MyReturnTypeClass`是基地`SomeProperty`应该返回的内容：

```
Friend Class MyReturnTypeClass
    Public Property AutoProperty1 As Boolean = False
    Public Property AutoProperty2 As String = String.Empty
    // etc
End Class 
```

当我尝试构建项目时，我从以下位置收到此错误`MyControlClass`：

> 可访问性不一致：类型参数“MyReturnTypeClass”比“MyControlClass”类更难访问。

我需要`MyControlClass`它`Public`可以被其他项目使用，我也希望`MyBaseClass`and`MyReturnTypeClass`不能`Friend`被消费者看到/使用。我只是在某处遗漏了一些特殊的关键字，还是这不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:11:02.637

基类必须至少与派生类一样可访问。这是语言限制（请参阅[此处](http://msdn.microsoft.com/en-us/library/cx03xt0t%28v=vs.100%29.aspx)）。

如果您打算避免`MyBaseClass`被消费者实例化，请考虑标记它`Public MustInherit`而不是`Friend`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:15:29.087

您不能从比派生类更难访问的基类继承。因此，例如，这将不起作用：

```
Friend Class MyBase
End Class

Public Class MyDerived
    Inherits MyBase  ' Won't compile because MyBase is less accessible
End Class 
```

因此，由于在您的示例中，`MyBaseClass(T)`has 是一个朋友类型，但您正试图从它继承到公共`MyControlClass`类型。因此，即使您将泛型`MyReturnTypeClass`排除在“等式”之外，它仍然行不通。

但是，对于泛型，即使类的公共接口中没有成员实际使用泛型类型，该类型仍必须至少与派生类型一样可访问。例如：

```
Public Class MyBase(Of T)
    ' T not actually used at all
End Class

Friend Class MyOtherType
End Class

Public Class MyDerived
    Inherits MyBase(MyOtherType)  ' Won't compile because MyOtherType is less accessible
End Class 
```

# c# - 在 C# 中有没有办法查看通过 ASPX 页面生成的代码？

> ID：13918393
> 
> 赞同：1
> 
> 时间：2012-12-17T16:51:47.963
> 
> 标签：c#, asp.net, reverse-engineering, web-deployment, system-calls

我正在查看与下拉列表相关的 XYZ.aspx.cs 中的代码。这是：

```
dt = SessionData.Report_RespondentAnswer(DateTime.Parse(tbFromDate.Text).ToString("yyyy-MM-dd"),
                                         DateTime.Parse(tbToDate.Text).ToString("yyyy-MM-dd"),
                                         SurveyID,
                                         SupplierID,
      LK_SurveyStatuses.GetResponseGroup_ResponseCodes(ddlResponseRange.SelectedValue),
      LK_SurveyStatuses.GetResponseGroup_ClientResponseCodes(ddlResponseRange.SelectedValue)); 
```

这对应于如下所示的下拉列表：

```
ddlResponseRange.SelectedValue 
```

这是可能的吗？

![在此处输入图像描述](../Images/cd839d98e8a48eda77b29c4c593791de.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T16:53:39.340

在您的浏览器中，右键单击 -> 查看源代码

这将向您显示生成的标记。

**编辑**大多数浏览器还具有更适合此类事情的开发人员模式。例如，Chrome 有一套很棒的开发者工具。

# ruby-on-rails - Rails onclick => 2 项

> ID：13918394
> 
> 赞同：0
> 
> 时间：2012-12-17T16:51:48.900
> 
> 标签：ruby-on-rails

以下内容非常适合将数据从一页转发到另一页：

```
<%= link_to 'New Work Order', new_workorder_path, :class => 'btn btn-primary', :onclick =>  session[:worequest_id]  %> 
```

我将如何添加第二个字段？以下不起作用：

```
 <%= link_to 'New Work Order', new_workorder_path, :class => 'btn btn-primary', :onclick =>  session[:worequest_id] = @worequest.id, [:client_id] = @worequest.client_id %> 
```

谢谢！

更新

这是我在新工作订单表单中使用的代码。它从会话中获取 wearquest_id 字段

```
 <% if session[:worequest_id] != nil %>
        <%= f.hidden_field :worequest_id, :value => session[:worequest_id] %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:37:07.710

`onclick`这种方式并没有真正起作用——它是一个 html 属性，用于存储单击元素时要执行的 JavaScript 代码。虽然您*可以*使用它在 Ruby 方法调用的上下文中评估 Ruby 代码（在这种情况下，作为给定的选项哈希的一部分`link_to`），但这样做并没有真正意义。

在您的第一个示例中，它实际上并没有做任何事情。如果您在显示该链接的页面上检查您呈现的 html，我希望它的评估结果类似于`<a href="..." onclick="6">New Work Order</a>`. 但是，您可以将数据存储在`session`其中（只要用户保持登录状态，该数据就会一直存在），这就是为什么您会看到这些数据从一个页面转移到另一个页面的原因。

如果您尝试为新工作订单填写默认值，您可以将它们作为参数传递给 path 方法：

```
link_to 'New Work Order', 
  new_workorder_path('workorder[worequest_id]' => @worequest.id, 
                     'workorder[client_id]'    => @worequest.client_id),
  :class => 'btn btn-primary' 
```

在您的`workorders#new`操作中，您的模型实例化需要包含以下参数：

```
def new
  @workorder = Workorder.new(params[:workorder])
end 
```

但是，这可能不是最好的方法。如果总是有一个客户端或穿戴任务与工作订单相关联，您可能需要查看[嵌套路由](http://guides.rubyonrails.org/routing.html#nested-resources)。

# php - Front Controller + MVC，公共文件问题

> ID：13918395
> 
> 赞同：1
> 
> 时间：2012-12-17T16:51:55.653
> 
> 标签：php, .htaccess, apache2

我正在尝试实现一个自制的 MVC + 前端控制器项目，经过 2 天的努力，一切似乎都很好。但是今天我在我的应用程序上发现了一个奇怪的错误。

当我请求带有 2 个（或更多）斜杠（例如 www.site.com/home/show）的 url 时，我的 css、js 文件将不起作用。

我不是 apache 专家，然后我认为我在那里失败了一些东西......

我的虚拟主机文件（操作系统 Ubuntu）：

```
<VirtualHost *:80>
ServerAdmin baro.luc@gmail.com
ServerName servername

DocumentRoot /path_to_project/project_folder
<Directory /path_to_project/project_folder>
    Options FollowSymLinks
</Directory>
</VirtualHost> 
```

我的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

我为我的项目遵循了这个例子：[https ://github.com/Jontyy/PHP-Basic-MVC-Framework](https://github.com/Jontyy/PHP-Basic-MVC-Framework)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:38:12.703

我通过将绝对路径传递给我的 css/js 文件来解决我的问题，如下所示：

```
<link rel="stylesheet" type="text/css" href="http://www.site.com/public/stylesheets/style.css" />
<script type="text/javascript" src="http://www.site.com/public/javascripts/script.js" ></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:55:19.937

尝试将此行放在您的虚拟主机配置中：

```
<Directory /path_to_project/project_folder>
    DirectoryIndex index.php
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

# c++ - 特化变量模板函数的问题

> ID：13918400
> 
> 赞同：3
> 
> 时间：2012-12-17T16:52:03.737
> 
> 标签：c++, templates, template-specialization, variadic-functions

我正在编写一个函数 inListi() ，它至少接受一个参数并将第一个参数与所有后续参数的列表进行比较。如果第一个参数 == 列表中的一个元素，则返回 true，否则返回 false。所以：

```
if( inListi( 1.2, 2.3, 4.5, 1.2))
  std::cout << "Returns true because last argument equals the first argument." << endl;

if( inListi( "hello", "world", "HEllo"))
    std::cout << "This should print out because of the last argument." << endl; 
```

问题是，它不起作用。我有下面的代码。对于 char[N]，我将数组的 N 部分复制到一个字符串中，然后再继续。我想这样做，因为我可能会收到一个非空终止的 char[N]。

无论如何，代码如下。大多数代码是多余的，并且处理 const 和一个参数为 const[N] 而另一个不是该类型的组合。（顺便问一下，有没有办法减少这种重复？）

```
#include <iostream>
#include <stdexcept>
#include <string>
#include <sstream>
#include <typeinfo>
#include <type_traits>

#include <boost/algorithm/string.hpp>

using namespace std;

////////////////////////////////////////////////////////////////////////////////
// inListi
////////////////////////////////////////////////////////////////////////////////
template<typename T>
bool inListi(T&& value)
{
    return false;
}

template<typename FirstType, typename SecondType, typename ... Rest>
bool inListi(FirstType&& first, SecondType&& second, Rest ... rest)
{
    cout << "GENERIC inListi" << endl;
    cout << "first is " << typeid(first).name() << endl;
    cout << "second is " << typeid(second).name() << endl;

    if( first == second)
        return true;
    else return inListi( first, rest...);
}

// We specialize the inListi for strings.  We lower the case.
// but what if char[n] is passed?  We have specializations that
// convert that to strings.
template<typename ... Rest>
bool inListi( string &&first, string &&second,  Rest ... rest) {
    string lFirst = first;
    string lSecond = second;

    cout << "LOWERED" << endl;

    boost::algorithm::to_lower( lFirst);
    boost::algorithm::to_lower( lSecond);

    if( lFirst == lSecond)
        return true;
    else return inListi( first, rest...);
}

// Specializations for when we are given char-arrays.  We copy the
// the arrays into a string upto the size of the array.  This is done
// to take care of the case of when the char-array is not nul-terminated.
// The amount repetition is to permutate over which argument is a char-array
// and also for const-ness.
template<int F, typename SecondType, typename ... Rest>
bool inListi( char (&&first)[F], SecondType &&second, Rest ... rest) {
    string strFirst = string( first, F);
    cout << "arr, type, rest" << endl;
    return inListi( strFirst, second, rest...);
}
template<int F, typename SecondType, typename ... Rest>
bool inListi( const char (&&first)[F], SecondType &&second, Rest ... rest) {
    string strFirst = string( first, F);
    cout << "const arr, type, rest" << endl;
    return inListi( strFirst, second, rest...);
}
template<typename FirstType, int S, typename ... Rest>
bool inListi( FirstType &&first, char (&&second)[S], Rest ... rest) {
    string strSecond = string( second, S);
    cout << "type, arr, rest" << endl;
    return inListi( first, strSecond, rest...);
}
template<typename FirstType, int S, typename ... Rest>
bool inListi( FirstType &&first, const char (&&second)[S], Rest ... rest) {
    string strSecond = string( second, S);
    cout << "type, const arr, rest" << endl;
    return inListi( first, strSecond, rest...);
}
template<int F, int S, typename ... Rest>
bool inListi( char (&&first)[F], char (&&second)[S], Rest ... rest) {
    string strFirst  = string( first, F);
    string strSecond = string( second, S);
    cout << "arr, arr, rest" << endl;
    return inListi( strFirst, strSecond, rest...);
}
template<int F, int S, typename ... Rest>
bool inListi( const char (&&first)[F], char (&&second)[S], Rest ... rest) {
    string strFirst  = string( first, F);
    string strSecond = string( second, S);
    cout << "const arr, arr, rest" << endl;
    return inListi( strFirst, strSecond, rest...);
}
template<int F, int S, typename ... Rest>
bool inListi( char (&&first)[F], const char (&&second)[S], Rest ... rest) {
    string strFirst  = string( first, F);
    string strSecond = string( second, S);
    cout << "arr, const arr, rest" << endl;
    return inListi( strFirst, strSecond, rest...);
}
template<int F, int S, typename ... Rest>
bool inListi( const char (&&first)[F], const char (&&second)[S], Rest ... rest) {
    string strFirst = string( first, F);
    string strSecond = string( second, S);
    cout << "const arr, const arr, rest" << endl;
    return inListi( strFirst, strSecond, rest...);
}

int main() {

    if( inListi( "Hello", "World", "HEllo"))
        cout << "Hello is in the listi." << endl;
    else
        cout << "Hello is not in the listi." << endl;

    return 0;
} 
```

程序的输出如下：

```
[bitdiot foo]$ g++ forStackOverflow.cpp -std=gnu++0x
[bitdiot foo]$ ./a.out
GENERIC inListi
first is A6_c
second is A6_c
GENERIC inListi
first is A6_c
second is PKc
Hello is not in the listi. 
```

请注意，没有调用任何中间代码，它直接使用通用版本。此外，另一个看起来很奇怪的是“PKc”。我假设是 char* 类型。现在，为什么它会有不同的类型？

总之，谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:12:39.580

看起来你可以使用重载`const char*`（这可能是`PKc`指的）。

也许是这样的：

```
template<typename ... Rest>
bool inListi(const char *first, const char *second, Rest... rest) {
    cout << "const char*, const char*, rest" << endl;
    return inListi(string(first), string(second), rest...);
} 
```

另外两件事：

*   注意临时变量的使用，以便我们调用`string&&`版本
*   重载将匹配第一次`const char*`调用，但您可能需要更多重载来处理后续调用

* * *

**另一个编辑：关于**[防止参数包扩展中的数组衰减的](https://stackoverflow.com/questions/13922145/prevent-array-decay-in-parameter-pack-expansion)一些很好的反馈向我们展示了如何通过在参数包上使用右值引用来做到这一点：

```
#include <iostream>
#include <string>
#include <utility>
#include <algorithm>
#include <cctype>

template <typename T>
bool inListi(T&& value)
{
  return false;
}

template <typename FirstType, typename SecondType, typename... Rest>
bool inListi(FirstType&& first, SecondType&& second, Rest&&... rest)
{
  if (first == second)
    return true;
  else
    return inListi(std::forward<FirstType&&>(first), rest...);
}

template <int N, int M, typename... Rest>
bool inListi(char (&first)[N], char (&second)[M], Rest&&... rest)
{
  std::string lFirst(first, N);
  std::transform(lFirst.begin(), lFirst.end(), lFirst.begin(), ::tolower);
  std::string lSecond(second, M);
  std::transform(lSecond.begin(), lSecond.end(), lSecond.begin(), ::tolower);

  if (lFirst == lSecond)
    return true;
  else
    return inListi(first, rest...);
}

template <typename... Rest>
bool inListi(const char *first, const char *second, Rest&&... rest)
{
  std::string lFirst(first);
  std::transform(lFirst.begin(), lFirst.end(), lFirst.begin(), ::tolower);
  std::string lSecond(second);
  std::transform(lSecond.begin(), lSecond.end(), lSecond.begin(), ::tolower);

  if (lFirst == lSecond)
    return true;
  else
    return inListi(first, rest...);
}

int main() {
  char a[5] = {'H','e','l','l','o'};
  char b[5] = {'W','o','r','l','d'};
  char c[5] = {'H','E','l','l','o'};
  std::cout << inListi(a, b, c) << '\n';
  std::cout << inListi("Hello", "World", "HEllo") << '\n';
  std::cout << inListi(5, 42, 5) << '\n';
} 
```

**只要所有参数都具有相同的类型，它就可以工作**。如果您想开始混合类型，您可能需要开始编写所有适当的重载对。

# macos - 我的应用在 OS X 10.6 上失败：“无法加载 Machine.config”

> ID：13918401
> 
> 赞同：1
> 
> 时间：2012-12-17T16:52:06.393
> 
> 标签：macos, mono, monodevelop, xamarin.mac

经过 7 个月的工作，我终于完成了我的 Mac 应用程序。但是，在大多数人的 Mac 上，该应用程序根本无法运行。在 console.app 中，他们收到错误消息“无法加载 Machine.config”。为什么？

该应用程序是使用 MonoDevelop 和 PackagerMaker 构建的，并且已正确签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:04:08.487

这已在 Xamarin.Mac 1.0.19 中修复

# llvm - LLVM 基本块通行证

> ID：13918406
> 
> 赞同：1
> 
> 时间：2012-12-17T16:52:30.960
> 
> 标签：llvm

我是 LLVM 的初学者。我试图在 BasicBlock 的指令中移动，但我不能。在这个特定示例中，我尝试获取结束指令的前一条指令。我正在尝试两种方法：

1.  我有以下代码序列：

    ```
    bool patternDC::runOnBasicBlock(BasicBlock &BB) {
    ...
    if (BB.getTerminator())
      {
                Instruction* current = BB.getTerminator();
                errs() << "\n LAST: "<<*current<<"\n";

            Instruction* prev = &BB.back();
            errs() << "\n PENULTIMATE: "<<*prev<<"\n";         
           ... 
    ```

终端打印相同的指令。我不知道 back() 是如何工作的。（定义在文件 BasicBlock.h 的第 199 行。）

1.  我也试过：

    ```
    bool patternDC::runOnBasicBlock(BasicBlock &BB) {
    ...
    BasicBlock::const_iterator I = BB.begin();
    BasicBlock::const_iterator E = BB.end();
    BasicBlock::const_iterator prev_iter,last_iter;
    prev_iter = NULL; last_iter = NULL;
    for(;I!=E;I++){
        prev_iter = last_iter;
        last_iter = I;
    }
    if(prev_iter){
        errs() << "prev_iter: " << *(dyn_cast<Instruction>(prev_iter)) << "\n";
    }
    if(last_iter){
        errs() << "last_iter: " << *(dyn_cast<Instruction>(last_iter)) << "\n";
    }
     // not related to the main question: uncomment the next line for an unusual      
    //behavior: lastlast is DIFFERENT from last.lastlast=section(BasicBlock)
      // errs() << "lastlast: " << *(dyn_cast<Instruction>(I)) << "\n";
      ...
       Instruction* prev = *(dyn_cast<Instruction*>(prev_iter));
        errs() << "\n prev: "<<*prev<<"\n"; 
    ```

终端可以很好地打印出 prev 和 last，但是在尝试分配到 Instruction* prev 时出现编译错误 Clang 错误是：“..... /home/alex/llvm/include/llvm/Support/Casting.h: 51:28：错误：'classof' 不是 'llvm::Instruction*' 的成员

如果有人知道使用基本块中任何元素的更好方法或知道为什么这些元素不起作用，请告诉我:)

谢谢你，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:54:42.117

所有 LLVM`Instruction`类也是`ilist_node`，这意味着您可以查询它们以获取包含它们的列表中的下一条/上一条指令（在本例中为基本块）。更具体地说，您的问题：

```
Instruction* last = BB.getTerminator();
Instruction* prev = last->getPrevNode(); 
```

请参阅 LLVM 源代码中的定义`ilist_node`以查看相关 API。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T14:15:11.597

我通过检查 if(BB->size()>1) 来解决只有一个元素的基本块

# php - 在 PHP 中反序列化 WCF Web 服务请求

> ID：13918408
> 
> 赞同：0
> 
> 时间：2012-12-17T16:52:41.320
> 
> 标签：php, wcf, soap, service, web

我有一个带有登录操作的 WCF Web 服务，将公司名称、用户名和密码作为三个参数。我正在尝试创建一个 PHP 客户端应用程序来与此服务进行通信。无论我将什么传递给登录操作，我都会收到以下错误：

```
OperationFormatter encountered an invalid Message body. Expected to find node type 'Element' with name 'Login' and namespace ''. Found node type 'Element' with name 'parameters' and namespace '' 
```

我的客户端应用程序：

```
<?php
        try
        {
            $client = new SoapClient("https://somewhere.com/DataServiceRxPublic.svc?wsdl");

            //$params = array(
            //        'parameters' => array(
            //                'Param' => array(
            //                        array('Name' => 'loginCompany', 'Value' => 'XXX'),
            //                        array('Name' => 'loginId', 'Value' => 'XXX'),
            //                        array('Name' => 'loginPwd', 'Value' => 'XXX')
            //)));

            //$params = array(
            //        'Login' => array(
            //                array('Name' => 'loginCompany', 'Value' => 'XXX'),
            //                array('Name' => 'loginId', 'Value' => 'XXX'),
            //                array('Name' => 'loginPwd', 'Value' => 'XXX')
            //));

            //$params = array(
            //        'Login' => array(
            //                'parameters' => array(
            //                       array('Name' => 'loginCompany', 'Value' => 'XXX'),
            //                        array('Name' => 'loginId', 'Value' => 'XXX'),
            //                        array('Name' => 'loginPwd', 'Value' => 'XXX')
            //)));

            //$params = array(
            //        array('Name' => 'loginCompany', 'Value' => 'XXX'),
            //        array('Name' => 'loginId', 'Value' => 'XXX'),
            //        array('Name' => 'loginPwd', 'Value' => 'XXX')
            //);

            $params = array(
                    'loginCompany' => 'XXX',
                    'loginId' => 'XXX',
                    'loginPwd' => 'XXX'
            );

            $obj->loginCompany = 'XXX';
            $obj->loginId = 'XXX';
            $obj->loginPwd = 'XXX';

            //$result = $client->Login($obj);
            //$result = $client->Login($params);
        }
        catch (Exception $e)
        {
                print_r($e);
        }
    }
?> 
```

$params 是我基于几个不同的在线示例的不同数组排列。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:34:08.640

错误消息告诉您应该有一些名为“登录”的东西，但被命名为“参数”。

获取[SoapUI](http://www.soapui.org/)并使用您的 WSDL 按照我在[此处](https://stackoverflow.com/questions/13893304/wsdl-service-response-once-variables-are-sent-php)描述的步骤来调试您实际发送的内容。如果您无法比较服务期望的内容与您发送的内容，那么这将是太多的反复试验。

如果您需要更多外部帮助，我们将需要 WSDL 资源 - 没有它，没有人知道需要哪种请求结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:16:06.990

结果我需要扩展 SOAPClient 并覆盖 __doRequest() 方法来替换不匹配的soap头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T12:13:12.707

我设法通过修改服务器端的服务命名空间来解决这个错误。

`[ServiceContract(Name="Service", Namespace = "https://sample.eu")]`

命名空间之前是空的。

# c# - C# 异步套接字概念

> ID：13918410
> 
> 赞同：1
> 
> 时间：2012-12-17T16:52:48.997
> 
> 标签：c#, sockets, network-programming, asyncsocket

这是我的监听功能和连接功能

```
Socket Listen

public void Listen(){
IPEndPoint ep = new IPEndPoint(IPAddress.Any, PortNumber);
Listen.Bind(ep);
Listen.Listen(10);
Listen.BeginAccept(new AsyncCallback(NewConnection), null);}

public void NewConnection(IAsyncResult asyn)
{
    Socket Accepted = Listen.EndAccept(asyn);
    Listen.BeginAccept(new AsyncCallback(NewConnection), null);
    SomeFunction(Accepted);
} 
```

代码工作正常，没有问题 - 我跟踪代码以了解如何与不同的客户一起工作，我了解流程。但是，我不明白 1 个套接字如何为不同的客户端提供服务。**它是否通过套接字在客户端之间进行时间复用？**

我在 MSDN 上读到，`Accepted`在我的代码中只能用于已建立的连接，不能进一步使用 - 那部分我不明白。当客户端尝试连接到服务器套接字时实际发生了什么？是否`EndAccept`返回具有不同端口的完全不同的套接字来建立连接并继续使用同一个套接字侦听以同时接受更多请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:02:28.650

根据我的理解，您所说的基本正确。`Accepted`套接字与`Listen`. 在 you 之后`EndAccept`，您可以使用监听套接字启动另一个`BeginAccept`异步调用，并且可以使用新创建的套接字与远程对等方通信。

要验证，可以检查listen socket的本地端口和connected socket；他们应该是不同的。

# magento - 如何在主页 Magento 上删除寻呼机和分拣机

> ID：13918411
> 
> 赞同：1
> 
> 时间：2012-12-17T16:52:56.140
> 
> 标签：magento, magento-1.7

我正在尝试修改 Magento 的 mi **CMS/home_page**。我想查看特定类别的一些产品，例如：

```
{{block type="catalog/product_list" category_id="35" column_count="4" template="catalog/product/list.phtml" }} 
```

它显示类别产品，但现在，我想更进一步，我想删除一些元素，因为它是主页。我附上一张图片来澄清：

![移除元素](../Images/52211fc30cc1f79d16698ba9ea00a000.png)

1 和 2 位于**pager**元素处。当我们有多个产品页面时，我们还可以看到**页面**（元素 4），也位于此处。在这种情况下，我们只有 4 个产品，所以我们看不到页面。元素 3 位于**排序器**元素处。

如果它是主页，我想删除元素 1、2 和 3，但保留元素 4（页面）。

关于如何在 Magento 上做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:04:40.207

您将不得不复制类别产品列表显示模块，这意味着创建您自己的模块、XML、PHTML 等......我个人会使用`z-blocks`来自[Aheadworks](http://ecommerce.aheadworks.com/magento-extensions/z-blocks.html)的模块。这将使您能够在主页上显示“特色产品”等内容，而无需编辑 Magento 块代码。..考虑到您将花费大量时间开发自己想做的事情，这并不是那么昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:38:24.327

您可能已经知道这些元素是通过 pager.phtml 呈现的。
要删除的元素可以通过检查条件来消失，即
if(!(Mage::getSingleton('cms/page')->getIdentifier()=='home'))
{传递你不想出现在首页}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:21:54.280

我可以解决它。对于任何需要它的人，无需付费扩展，我在这里写下我所做的：

**第一的：**

我在我的主题文件夹中复制了这个 phtml：

```
catalog/product/list/toolbar.phtml
catalog/product/list.phtml 
```

我将它们粘贴到我的模板文件夹中。我更改名称是为了不覆盖不是主页的其他页面的元素。

```
catalog/product/list/toolbar_home.phtml
catalog/product/list_home.phtml 
```

有了这个，我有 2 个仅适用于我的主页的 phtml。我怎么称呼他们？

**第二：**

我在我的主页上添加了特定的块：

```
{{block type="catalog/product_list" category_id="35" column_count="4" template="catalog/product/list_home.phtml" }} 
```

**注意：**我将模板更改为指向我的模板。

**第三：**

在我的 list_home.phtml 中，您可以找到以下代码：

```
<?php echo $this->getToolbarHtml() ?> 
```

我是这样改的：

```
<?php echo $this->getToolbarHtmlHome() ?> 
```

这个函数不存在，所以我们需要创建它。这个函数将调用我们的**toolbar_home.phtml**。

**第四：**

转到**code/core/Mage/Catalog/Block/Product/List.php**，找到函数**getToolbarHtml**。复制并粘贴在它下面。并将其更改为如下所示：

```
public function getToolbarHtmlHome()
{
    return $this->getChildHtml('toolbar_home');
} 
```

现在我们已经创建了所有代码，您可以转到**template/catalog/product/list/toolbar_home.phtml**并修改您想要的任何内容。它只适用于您的主页！:)

# bing-maps - 如何判断 Microsoft 地图对象何时完成加载

> ID：13918429
> 
> 赞同：3
> 
> 时间：2012-12-17T16:54:18.980
> 
> 标签：bing-maps

我们正在使用 Bing Maps AJAX API (v7) 来处理我们网站上的地图。地图部分本身可以工作，但有时与服务的连接速度很慢。我有一些代码只有在地图完全加载完成后才需要运行。地图 API 中是否有任何可用的事件或参数（我已经查看过，但无法轻松找到任何东西）会告诉我地图对象何时完全完成加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:23:46.393

“地图完全加载完成后”是什么意思？

如果地图上没有任何其他元素，请使用`tiledownloadcomplete`事件。

如果您需要将地图恢复到某个状态（使用缩放、位置等），请使用该`viewchangeend`事件。

我不认为您可以使用任何事件来表示传统意义上的地图已完全加载。您可以通过在初始化时始终使地图的视图发生变化来近似这种行为，但最终会达到您想要的状态，因此您可以`viewchangeend`在那里订阅并执行您的代码。

# php - PHP ActiveRecord 批量删除未激活账户

> ID：13918434
> 
> 赞同：1
> 
> 时间：2012-12-17T16:54:56.263
> 
> 标签：php, sql, activerecord, batch-file, activation

我的网站使用 php activerecord 来处理 sql，并且 db 中有三个字段：joindate、status、activatecode

所有注册会员必须在24小时内激活，否则账户将被删除

如何编写 php 代码来执行此功能？joindate 现在使用 php date('Ymd')。代码也可以自动工作而无需手动启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:23:48.373

为了获得准确的 24 小时停用，您需要将`joindate`sql 字段更改为键入“datetime”，该字段也将保留时间。然后使用此代码：

```
// In the following statement, $JoinDate holds the sql `joindate` field
$timeDiff = time() - strtotime($JoinDate);

if($timDiff/3600 > 24) {
    // code to be executed if it's past the 24 hrs period
} 
```

# c++ - 不需要的除法运算符行为，我该怎么办？

> ID：13918437
> 
> 赞同：6
> 
> 时间：2012-12-17T16:55:06.237
> 
> 标签：c++

# 问题描述

在我的流体模拟过程中，物理时间以`0, 0.001, 0.002, ..., 4.598, 4.599, 4.6, 4.601, 4.602, ...`. 现在我想`0.1, 0.2, ..., 4.5, 4.6, ...`从这个时间序列中选择 time = 然后做进一步的分析。所以我写了下面的代码来判断是否`fractpart`命中为零。

但是我很**惊讶**，我发现以下两种除法方法得到了两种不同的结果，我该怎么办？

```
double param, fractpart, intpart;
double org = 4.6;
double ddd = 0.1;

// This is the correct one I need. I got intpart=46 and fractpart=0
// param = org*(1/ddd);

// This is not what I want. I got intpart=45 and fractpart=1
param = org/ddd;

fractpart = modf(param , &intpart);
Info<< "\n\nfractpart\t=\t"
    << fractpart
    << "\nAnd intpart\t=\t"
    << intpart
    << endl; 
```

为什么会这样？
如果你们能容忍我一点，我可以大声喊叫：“C++ 委员会可以对此做点什么吗？因为这很混乱。” :)

获得正确余数以避免截止误差效应的最佳方法是什么？fmod 是更好的解决方案吗？谢谢

# 回复下面的回答

**大卫·施瓦茨**

```
double aTmp = 1;
double bTmp = 2;
double cTmp = 3;
double AAA = bTmp/cTmp;
double BBB = bTmp*(aTmp/cTmp);
Info<< "\n2/3\t=\t"
    << AAA
    << "\n2*(1/3)\t=\t"
    << BBB
    << endl; 
```

我得到了两个，

```
2/3     =       0.666667
2*(1/3) =       0.666667 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T17:00:18.753

浮点值不能完全代表每个可能的数字，因此您的数字是近似的。这在计算中使用时会产生不同的结果。

如果您需要比较浮点数，则应始终使用较小的 epsilon 值，而不是测试是否相等。在你的情况下，我会四舍五入到最接近的整数（而不是向下舍入），从原始值中减去它，然后将结果的 abs() 与 epsilon 进行比较。

如果问题是，为什么总和不同，简单的答案是它们是不同的总和。对于更长的解释，以下是所涉及数字的实际表示：

```
 org:  4.5999999999999996 = 0x12666666666666 * 2^-50
             ddd: 0.10000000000000001 = 0x1999999999999a * 2^-56
           1/ddd:                  10 = 0x14000000000000 * 2^-49
   org * (1/ddd):                  46 = 0x17000000000000 * 2^-47
       org / ddd:  45.999999999999993 = 0x16ffffffffffff * 2^-47 
```

您将看到两个输入值都没有精确地表示为双精度值，每个值都已向上或向下舍入到最接近的值。`org`已向下舍入，因为序列中的下一位将为 0。`ddd`已向上舍入，因为该序列中的下一位将为 1。

因此，当执行数学运算时，舍入可以取消或累加，具体取决于运算和原始数字的舍入方式。

在这种情况下，1/0.1 恰好巧妙地四舍五入到 10。

乘以`org`10 恰好四舍五入。

除以碰巧向下舍`org`入`ddd`（我说“碰巧”，但是您将向下舍入的数字除以向上舍入的数字，因此结果自然会较小）。

不同的输入会以不同的方式舍入。

这只是一点点错误，即使是很小的 epsilon 也可以很容易地忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:08:19.430

如果我正确理解了您的问题，那就是：为什么使用有限精度的算术`X/Y`不一样`X * (1/Y)`？

原因很简单：例如，考虑使用六位小数精度。虽然这不是`double`s 实际所做的，但概念完全相同。

有六个十进制数字，`1/3`是`.333333`。但是`2/3`是`.666667`。所以：

```
2 / 3 = .666667  

2 * (1/3) = 2 * .333333 = .6666666 
```

这就是固定精度数学的本质。如果您不能容忍这种行为，请不要使用有限精度类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:26:31.503

嗯，不太确定你想要实现什么，但是如果你想获得一个值，然后想在 1/1000 的范围内进行一些改进，为什么不使用整数而不是浮点数/双精度数呢？

您将有一个除数，即 1000，并且有您需要乘以除数的值进行迭代。

所以你会得到类似的东西

```
double org = ... // comes from somewhere
int divisor = 1000;
int referenceValue = org * div;
for (size_t step = referenceValue - 10; step < referenceValue + 10; ++step) {
   // use   (double) step / divisor to feed to your algorithm
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:14:43.177

你不能`4.6`精确地表示：http: [//www.binaryconvert.com/result_double.html? decimal=052046054](http://www.binaryconvert.com/result_double.html?decimal=052046054)

在分隔整数和小数部分之前使用舍入。

**更新**

您可能希望使用`rational`Boost 库中的类：http: [//www.boost.org/doc/libs/1_52_0/libs/rational/rational.html](http://www.boost.org/doc/libs/1_52_0/libs/rational/rational.html)

**关于你的任务**

要找到所需`double`的精度，例如，要`4.6`计算与它的“接近度”：

```
double time;

...

double epsilon = 0.001;

if( abs(time-4.6) <= epsilon ) {
    // found!
} 
```

# html - HTML图像定位

> ID：13918438
> 
> 赞同：1
> 
> 时间：2012-12-17T16:55:10.933
> 
> 标签：html, uiwebview, position, image

我正在尝试创建要在 iphone 和 ipad 上显示的 html 文档。

这是一个简单的，但我的图像位置有一些问题，我不确定我应该使用相对位置还是绝对位置。

我想要的是页面中心的图像（屏幕顶部下方的一点点）和图像下方居中的 youtube iframe。

此代码适用于纵向但不适用于横向，因为如果页面图像将不在中心。

我还想在图像和 youtube 框架之间留出一些空间。这是我的实际代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<meta content="width=device-width;" initial-scale="1.0;" maximum-scale="2.0;" name="viewport" user-scalable="1;" />
<body bgcolor="#9fa2b5">
   <div align="center">
      <img style="position:relative; TOP:15px; LEFT:65px; "src="http://mysite.jpg" alt="image is missing"  width=90 height=130>
      <p>
      </p>

      <iframe  width="320" height="180" src="http://www.youtube.com/embed" frameborder="1" ></iframe>
   </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:18:27.620

有几种不同的技术可以使页面内容居中，其中一些[在 w3.org 上的这篇文章中进行](http://www.w3.org/Style/Examples/007/center.en.html)了讨论。您正在使用 上的`align`属性`div`，它应该可以工作。但是，在您还添加的图像标签中，`left:65px;`这会将图像移动`65px`到中心的右侧。

在纯 css 解决方案中，您应该对 html 执行以下操作。

```
<div class="container">
    <img class="rndImage" src="http://myimage.org" alt="image is missing"/>
    <iframe class="youtube" src="http://www.youtube.com/embed" frameborder="1" ></iframe>
</div> 
```

`style`并在块中或附加的 CSS 样式表中添加以下 CSS 。

```
iframe.youtube
{
    width:320px;
    height:180px;
    display:block;
    margin:15px auto;
}

img.rndImage
{
    display:block;
    width:90px;
    height:130px;
    margin:15px auto;
}

div.container
{
   position:relative;
   width:100%;
   margin:5px, auto;
} 
```

上面的代码将样式从 html 中分离出来，并使用类将其链接起来。[您可以在 JsFiddle.Net 上](http://jsfiddle.net/GWmxv/1/)看到一个工作示例。

# javascript - javascript addEventListener 不选择子项

> ID：13918441
> 
> 赞同：18
> 
> 时间：2012-12-17T16:55:23.040
> 
> 标签：javascript, events

我只*需要*为这个项目使用 javascript。对不起，没有 jQuery（我也觉得很惭愧）。

我正在向`addEventListener`div 添加一个。“问题”是它也适用于它的所有孩子。

有没有办法避免这种情况，让监听器只为那个 div 工作？

提前致谢。

* * *

我的代码如下所示：

```
document.getElementById(myObj.id).addEventListener("mousedown", myObjDown, false);

function myObjDown() {
  //do stuff here
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-17T16:58:19.830

`event.target`您可以通过读取回调来判断事件实际触发的元素。

```
var el = ...
el.addEventListener('click', function(event){
  if (el !== event.target) return;

  // Do your stuff.

}, false); 
```

另一种选择是将处理程序绑定到子元素以防止事件到达父处理程序，但这是更多的工作，并且可能隐藏事件可能实际上在父级之上侦听它们的事物。

### 更新

鉴于您的示例代码，您应该能够做到这一点。

```
var el = document.getElementById(myObj.id);
el.addEventListener("mousedown", myObjDown, false);

function myObjDown(event) {
  if (el !== event.target) return;

  //do stuff here
} 
```

另外作为一般说明，请记住，如果这适用于 IE < 9，则没有任何内容，因为`addEventListener`它们不支持。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-05-29T08:27:25.300

您可以使用 currentTarget 事件属性

```
el.addEventListener('click', function(event) {
  if (event.currentTarget !== event.target) {
    return;
  }

  // Do your stuff.
}, false); 
```

更多细节：[https ://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget](https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-11T00:23:16.257

这是一个替代方案，它使您的 myObjDown 函数与典型的事件处理程序保持一致。（使用 e.target 作为对事件调用元素的引用）

```
var CssSelector = "div.className";
var elms = document.querySelectorAll(CssSelector);

for (i = 0; i < elms.length; i++) {
    elms[i].addEventListener("mousedown", myObjDown.bind(null, {"target":elms[i]}, false);
}

function myObjDown(e) {
  console.log("event: %o - target: %o", e, e.target);

  var elm = e.target;
  //do stuff here
} 
```

* * *

## 有人建议..

此方法可能会导致某些浏览器版本的内存泄漏。如果有人遇到过这种情况或有任何有价值的见解。请评论。

* * *

## 在这方面，另一种选择是

```
var CssSelector = "div.className";
var elms = document.querySelectorAll(CssSelector);

for (i = 0; i < elms.length; i++) {
    elms[i].addEventListener("mousedown", myObjDown.bind(null, elms[i].id}, false);
}

function myObjDown(id) {
  console.log("element: %o ", document.getElementById(id));

  //do stuff here
} 
```

# ruby-on-rails - Ruby on Rails - 使用 link_to_remote Rails 2 将哈希作为参数传递

> ID：13918445
> 
> 赞同：2
> 
> 时间：2012-12-17T16:55:32.130
> 
> 标签：ruby-on-rails, hash, link-to-remote

我正在使用 Rails 版本 2.3.8 Hash => agent_list = [[5, "val"], [4, "val"], [3, "val"], [1, "val"]]

```
<%= link_to_remote "Click Here", 
        :url => {
        :controller => "controller", 
        :action => "method",
        :id => @p_id,
        :hash_list => hash_list
        },
        :method => 'post' %> 
```

生成的链接是：

[http://localhost/controller/method/12?hash_list%5B%5D%5B%5D=5&hash_list%5B%5D%5B%5D=val&hash_list%5B%5D%5B%5D=4&hash_list%5B%5D%5B %5D=val&hash_list%5B%5D%5B%5D=3&hash_list%5B%5D%5B%5D=val&hash_list%5B%5D%5B%5D=1&hash_list%5B%5D%5B%5D=val]

谁能告诉我得到类似东西的正确方法是：http://localhost/controller/method/12?hash_list=[hash_list]

这样我就可以在我的控制器方法中将它用作 params[:agent_list] 。

PS对不起，如果它是一个nooby问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:18:33.780

在您的操作中创建一条路线`routes.rb`，如果尚未创建，则：

```
<%= link_to "Click here", my_route_path(@obj, :hash => { :foo => "bar" }), :remote => true, :method => :post %> 
```

未经测试，但应该做的伎俩。如果您提供`remote: true`，那么您的 URL 看起来并不重要，哈希应该驻留`params[:hash]`在您的控制器中。

`link_to_remote`在 Rails 3+ 中已弃用。

导轨 2.3.8：

```
<%= link_to_remote "Click here", :url => my_route_path(@obj, :hash => { :foo => "bar" }), :method => :post %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-14T21:34:23.380

我的`<%= link_to @item_link_name, show_item_path(item: {id: @item.id}) %>`

生成`http://localhost:3000/items/show_item?item%5Bid%5D=XXX`,

控制器识别为`params[:item][:id]`

# magento - Magento - Authorize.net - 获取过期交易的付款更新

> ID：13918447
> 
> 赞同：0
> 
> 时间：2012-12-17T16:55:45.257
> 
> 标签：magento, authorize.net

Magento 1.6.1

我已经为客户的商店设置了 Authorize.net (AIM)。以前他们使用保存的抄送方法并在 Authorize.net 的商户终端中手动输入信息。

大部分都按预期工作，但是对于被 Authorize.net 标记为“可疑欺诈”的交易，如果客户端在授权到期之前没有手动更新交易，则在 Magento 中使用“获取付款更新”会失败，因为交易已过期（我相信仅授权交易需要五天）。

对于客户来说，在 Magento 中更新此订单的唯一方法似乎是简单地删除订单，因为 Paygate 模型似乎不知道过期交易。执行“获取付款更新”只会返回“此付款没有更新”。

我已经修改了文件：`/app/code/core/Mage/Paygate/Model/Authorize.net`以获得问题 #27117 中所述的正确 API URL（[http://www.magentocommerce.com/bug-tracking/issue?issue=12991](http://www.magentocommerce.com/bug-tracking/issue?issue=12991) - 必须登录才能查看）。这解决了按钮不适用于所有其他订单；但是，这并不能解决我所描述的问题。

是否有人熟悉 Authorize.net 的 AIM API，以便我们可以在 Magento 中将这些订单更新为有意义的内容（取消等），而无需删除订单？我认为这应该是向 Magento 添加新订单状态，检查“过期”状态的更新，并将订单设置为新创建的订单状态的情况。

- 编辑 -

我刚刚为上面提到的文件运行了一个差异，并注意到 Magento 1.7.0.2 包含`_isTransactionExpired()`似乎可以修复的方法。是否可以像使用较新版本更新此模型一样简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:14:20.197

In this case, I manually included the `_isTransactionExpired()` method described in my question to the `app/code/core/Mage/Paygate/Model/Authorize.php`, and things appeared normal and it was seeming to work as expected.

It's now been a month and a half, and I've not had the client come back to tell me things are not working, so I am assuming this fixed the issue.

# sql - 如果 Postgres 中不存在记录，则插入值

> ID：13918449
> 
> 赞同：18
> 
> 时间：2012-12-17T16:55:49.350
> 
> 标签：sql, postgresql

我想让这个工作，但 Postgres 不喜欢`WHERE`在这种类型的插入中包含该子句。

```
 INSERT INTO keys(name, value) VALUES
    ('blah', 'true')
  WHERE NOT EXISTS (
    SELECT 1 FROM keys WHERE name='blah'
  ); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-17T17:02:20.330

在 Postgres 中，有一个非常好的方法可以做到这一点：

```
INSERT INTO keys(name, value) 
    SELECT 'blah', 'true'
WHERE NOT EXISTS (
    SELECT 1 FROM keys WHERE name='blah'
); 
```

希望有帮助。-

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-12-09T15:23:24.183

在 Postgresql 9.5 中，您现在可以使用`on conflict do nothing`

```
insert into KEYS (name, value) values (
'blah', 'true') on conflict (name) do nothing; 
```

# java - java.class.path 不带 Manifest.mf Class-Path 属性

> ID：13918450
> 
> 赞同：6
> 
> 时间：2012-12-17T16:55:49.280
> 
> 标签：java, classpath, manifest.mf

我正在尝试获取我的应用程序类路径。

我有一个**jar**（名为 application.jar），它的**Manifest.mf**中有其他 jar 文件，例如`Class-Path: a.jar b.jar`.

为什么当我使用`System.getProperty("java.class.path")`我的 jar时， **a.jar**和**b.jar**没有列出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:22:32.387

它可能与从类路径环境变量（或）`java.class.path`设置的系统属性这一事实有关。使用该选项时会忽略这些。`$CLASSPATH``-classpath``-jar`

根据`java -jar`文档，当使用该 jar 选项运行应用程序时，仅`Class-Path`考虑清单，而忽略其他设置。来自[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/java.html)：

> -罐
> 
> 执行封装在 JAR 文件中的程序。第一个参数是 JAR 文件的名称，而不是启动类名称。为了使此选项起作用，JAR 文件的清单必须包含格式为 Main-Class: classname 的行。在这里，classname 标识具有用作应用程序起点的 public static void main(String[] args) 方法的类。有关使用 Jar 文件和 Jar 文件清单的信息，请参阅 Jar 工具参考页面和 Java 教程的 Jar 跟踪。
> 
> **使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T12:27:59.623

这正是我提出的问题。即使使用时`java -cp ..;myTest.jar test2.Needer`我只得到“..;myTest.jar”作为`java.class.path`属性的结果。

*注意*：即使使用`-cp`参数，也会搜索给定的类路径`MANIFEST.MF`！（在谷歌上找不到这个信息并测试了自己）

`-jar`所以我认为这与参数无关。在[链接](https://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath?lq=1)中你可以找到

> 通配符的扩展是在调用程序的主要方法之前尽早完成的，而不是在类加载过程本身的后期完成。

有趣的是，我在测试中发现：*递归搜索 MANFIFEST.MF 中的类路径。*因此，如果`test.jar`myTest.jar 的 MANIFEST.MF 中的类路径中存在给定的文件，则也会查找 test.jar 的 MANIFEST.MF 中的类路径（使用 时`java -cp "myTest.jar" test2.Needer`）。

因此，当`java.class.path`属性支持显示 MANIFEST.MF 的类路径时，它还应该显示所有后续依赖的 .jar 文件的类路径。由于仅在找到类之前搜索类路径，因此这不能很好地引用延迟加载机制。

**TL; DR**`-jar` ：我认为这与参数无关（`-cp`也涉及）。在我的解释中，从 MANIFEST.MF 显示类路径的支持只会带来额外的、毫无意义的递归搜索成本（因为不需要有实际的依赖关系，分别来自 .jar 使用的内容）。而且由于这种无意义的搜索会延迟程序启动（因为递归搜索可能非常深），因此没有实现。

# python - 我可以从哪里获得 Mac OS X Lion 的“Python Launcher”？

> ID：13918457
> 
> 赞同：1
> 
> 时间：2012-12-17T16:56:14.053
> 
> 标签：python, macos, python-2.7, osx-lion

我使用带有 OS X Lion 的 macbook (air)。我已经安装了 Python 2.7，但我似乎在系统的任何地方都找不到“Python Launcher.app”。

我尝试使用 pip 安装，但找不到任何要获取的内容。

我尝试在 Google 上搜索以找到下载器，但我的搜索没有产生任何结果（用于下载）。

我在哪里可以得到这个应用程序？我有一个包含 20 多个 GUI 示例子文件夹的文件夹，这些子文件夹又包含 3 到 5 个子文件夹。我不想通过终端中的每一个，宁愿从查找器中启动这些 .py 脚本。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:04:39.693

您不应该使用 OS X 内部的 Python 发行版。相反，通过下载文件来安装新的发行版

[适用于 Mac OS X 10.6 和 10.7 的 Mac OS X 64 位/32 位 x86-64/i386 安装程序 (2.7.3)](http://www.python.org/ftp/python/2.7.3/python-2.7.3-macosx10.6.dmg)

您可以在[此网页上](http://www.python.org/download/releases/2.7.3/)找到。然后，您将在 中找到 Python Launcher 应用程序`/Applications/Python 2.7`。

# spring - Spring REST - RestTemplate 可以使用多部分/混合吗？

> ID：13918459
> 
> 赞同：6
> 
> 时间：2012-12-17T16:56:25.233
> 
> 标签：spring, spring-mvc, resttemplate, multipartform-data

我想编写一个 REST 服务，它响应一个 zipFile 和一些 json 数据，一切都在一个多部分/混合请求中。

服务器部分工作正常，我正在使用 Firefox 的 REST 客户端对其进行测试。我的服务器发送这样的多部分

```
--k-dXaXvCFusLVXUsg-ryiHMmkdttadgcBqi4XH

Content-Disposition: form-data; name="form"
Content-type: application/json

{"projectName":"test","signal":"true"}

--k-dXaXvCFusLVXUsg-ryiHMmkdttadgcBqi4XH
Content-Disposition: form-data; name="file2"; filename="file2.txt"
Content-type: application/octet-stream
Content-Length: 10

hallo=Welt 
```

我知道 RestTemplate 可以在开箱即用的 MultiValueMap 的帮助下发送多部分。

现在我尝试使用多部分/混合响应并返回 MultiValueMap

```
@Component
public class RestCommand 
extends AbstractLoginRestCommand<Form, MultiValueMap<String, Object>>
{
    @Override
    protected MultiValueMap<String, Object> executeInternal ( Form form )
    {
        RestTemplate restTemplate = getRestTemplate();
        MyMultiValueMap map = restTemplate.postForObject(getUrl(), form, MyMultiValueMap.class);
        return new LinkedMultiValueMap<String, Object>(map);
    }
}

class MyMultiValueMap extends LinkedMultiValueMap<String, Object>
{} 
```

MyMultiValueMap 的存在是为了防止类型擦除（泛型）。

这给

> org.springframework.web.client.RestClientException：无法提取响应：没有找到适合响应类型 [class org.jlot.client.remote.MyMultiValueMap] 和内容类型 [multipart/form-data;boundary=Rjh-fkdsI9OIyPpYwdFY7lsUIewhRSX8kE19I; 的 HttpMessageConverter； charset=UTF-8] 在 org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:107) 在 org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:492)

FormHttpMessageConverter 的 Javadoc 说它可以写入但不能读取 multipart/form-data。

为什么会这样？

有没有办法使用开箱即用的 RestTemplate 读取多部分/表单数据，还是我需要编写一个 HttpMessageConverter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:39:11.493

我有同样的问题，我想我实现了你想要的。您只需要覆盖`canRead`表单转换器的方法。对于您的示例，如下所示应该可以工作。

```
FormHttpMessageConverter formConverter = new FormHttpMessageConverter() {
    @Override
    public boolean canRead(Class<?> clazz, MediaType mediaType) {
        if (clazz == MyMultiValueMap.class) {
            return true;
        }
        return super.canRead(clazz, mediaType);
    }
}; 
```

并将此转换器添加到您的其余模板中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-14T13:04:22.420

我现在使用这个解决方案：

```
@ResponseBody
@PostMapping(value = JlotApiUrls.PUSH, produces = "application/json")
public List<PushResultDTO> push ( 
        @PathVariable String projectName,       
        @PathVariable String versionName, 
        @RequestPart("file") MultipartFile multipartFile, 
        @RequestPart("data") @Valid PushForm pushForm 
   ) throws IOException, BindException
{
 ...
} 
```

[https://github.com/kicktipp/jlot/blob/master/jlot-web/src/main/java/org/jlot/web/api/controller/PushController.java](https://github.com/kicktipp/jlot/blob/master/jlot-web/src/main/java/org/jlot/web/api/controller/PushController.java)

# objective-c - ios 和 Facebook 集成：我在哪里可以找到有关“Like Button”API 的文档或 tuts？

> ID：13918464
> 
> 赞同：1
> 
> 时间：2012-12-17T16:56:34.777
> 
> 标签：objective-c, ios, facebook-graph-api

我已经为 IOS 下载了最新的 FacebookSDK，并且“发布到你的墙上”功能正常工作（这样做只是为了让我的脚湿透）。

但是，我真正需要的是有关为我的客户获取“赞”按钮的文档或教程。似乎找不到任何东西。谁能指出我正确的方向？？？我希望客户的用户能够为 facebook 按“like”或为 twitter 按“follow”。

-非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:15:36.363

昨天在github上发现了一组like code。搜索“FacebookLikeView”。可下载的代码集包含一个演示应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:32:08.140

这不应该工作......因为在源代码中他使用了 Facebook SDK3.1 中不再可用的 FBdialog......我恐怕你必须满足使用这个 -> [http://developers.facebook.com/ docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/) 或尝试其他方法，如果你能以不同的方式做，甚至可能为很多人解决很多问题

# javascript - 如何根据标签内部 HTML 选择表单输入？

> ID：13918465
> 
> 赞同：1
> 
> 时间：2012-12-17T16:56:40.440
> 
> 标签：javascript, jquery, html, forms, wordpress

我有多个使用不同输入名称和 ID 动态创建的表单。他们将拥有的唯一独特之处是标签的内部 HTML。是否可以通过带有 jQ​​uery 的标签内部 HTML 来选择输入？这是我**的一个患者出生日期块的示例，**除了 innerHTML 之外，还有很多并且都是唯一的。

```
<div class="iphorm-element-spacer iphorm-element-spacer-text iphorm_1_8-element-spacer">
<label for="iphorm_081a9e2e6b9c83d70496906bb4671904150cf4b43c0cb1_8">events=Object { mouseover=[1], mouseout=[1]}handle=function()data=Object { InFieldLabels={...}}
    Patient DOB
    <span class="iphorm-required">*</span>
</label>
<div class="iphorm-input-wrap iphorm-input-wrap-text iphorm_1_8-input-wrap">
    <input id="iphorm_081a9e2e6b9c83d70496906bb4671904150cf4b43c0cb1_8" class="iphorm-element-text iphorm_1_8" type="text" value="" name="iphorm_1_8">events=Object { focus=[1], blur=[1], keydown=[1], more...}handle=function()
</div>
<div class="iphorm-errors-wrap iphorm-hidden"> </div> 
```

这是在 Wordpress 插件中，并且因为我们正在构建允许员工编辑他们的网站（这实际上是一个 Wordpress 网络），所以如果可能，我们不想更改插件。请注意，标签“for”和输入“id”共享相同的动态键，因此这可能是获取 id 的一种方法，但想看看是否有更短的方法来执行此操作。

在这里，我清理了可能不会使用的东西......

```
<div>
<label for="iphorm_081a9e2e6b9c83d70496906bb4671904150cf4b43c0cb1_8">
    Patient DOB
    <span class="iphorm-required">*</span>
</label>
<div>
    <input id="iphorm_081a9e2e6b9c83d70496906bb4671904150cf4b43c0cb1_8">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:01:37.433

```
var getForm = function(labelInnerHtml) {
    var $labels = jQuery('label');
    $labels.each(function() {
       if (jQuery(this).html() == labelInnerHtml) {
            var for_id = jQuery(this).attr('for');
            return jQuery('#'+for_id);
        }
    });
    return [];
};​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:14:07.027

您可以使用[包含选择器](http://api.jquery.com/contains-selector/)来选择`Patient DOB`标签，然后找到相关的输入。

```
$('label:contains("Patient DOB")').parent('div').find('input'); 
```

这假设`label`and`input`被包裹在同一个中`div`，并且如果不止一对在同一个 中，则可能不起作用`div`。至少第一部分将为您提供包含 的标签`Patient DOB`，然后您可以调整后面的部分以找到正确的输入元素。

有关 jquery 选择器的更多帮助，请参阅[API](http://api.jquery.com/category/selectors/)。

这是一个证明这一点的[小提琴。](http://jsfiddle.net/ZAfmX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:10:18.143

输入上的 iphorm_1_8 类对于每个表单元素都是唯一的。所以很简单。

```
$('.iphorm_1_8'); 
```

# xpages - 计算列未显示动态视图面板中的文档链接

> ID：13918469
> 
> 赞同：0
> 
> 时间：2012-12-17T16:56:48.350
> 
> 标签：xpages, xpages-extlib

我正在使用动态视图面板 ( `xe:dynamicViewPanel`) 来显示视图。在我的 XPage 中，我将视图名称作为参数传递给 URL，然后获取它并将其放入`viewName`数据源的属性中。在我的服务器上，我有带有升级包 1 的 Domino 8.5.3。在我的本地机器上，我`ExtensionLibraryOpenNTF-853.20120320-1003`安装了来自 OpenNTF ( ) 的扩展库。

根据我的观察，动态视图面板将第一个未分类的列显示为文档的链接。因此，如果在我的第一列视图中我只写字段名称，比如`UserName`，那么该列将显示为链接。但是，如果我在第一列中输入公式，因为`@Name([CN]; UserName)`它没有显示为链接，而是下一个**未计算**的非分类列显示为链接。此行为仅发生在我的服务器上，该服务器具有带有升级包 1 的 Domino 8.5.3。

但是，当我获取数据库的本地副本并尝试在我的本地主机（具有来自 OpenNTF 的扩展库）上运行时，计算的列`@Name([CN]; UserName)`显示为链接。

有没有人遇到过这种行为？这是一个错误吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:40:13.793

找到它：我已经在 openntf 上报告了这个错误并已修复。 [http://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/c3ccbddbdc0e44bf8625796d00305196!OpenDocument](http://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/c3ccbddbdc0e44bf8625796d00305196!OpenDocument)

但它在 UP1 码流中并未得到修复。

我建议使用 ExtLib 发行版，因为它比升级包功能更丰富（并且没有错误）。由于 8.5.3 的新功能，您可以通过更新站点分发最新的 ExtLib，因此无需在服务器上安装。

# php - HTML/PHP 新手 - 尝试在服务器上托管站点，但是当我转到我的站点链接时，我得到了我自己文件夹的目录？

> ID：13918470
> 
> 赞同：1
> 
> 时间：2012-12-17T16:56:48.023
> 
> 标签：php, html, cyberduck

是的，这就是我的问题。

一般来说，我对 html/php/web 编程真的很陌生。

我在cyberduck上上传我的文件-当我上传html文件时，它们会从代码转换为实际的文本和图像，甚至无法正确显示。我想我已经修改了我所有的图像，但我得到的不是显示的图像，而是可点击的文本。

如果这些听起来像愚蠢的问题，我感到非常抱歉，但我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:04:10.907

1.  确保你有一个文件`index`名为`.html` `.htm`或`.php`

2.  您不应该允许目录列表（除非您真的想要），要删除此选项，您应该将该行添加`Options -Indexes`到您的`.htaccess`文件中。如果您没有这样的文件，您可以轻松地创建一个并上传它。

# sql-server-2008 - 用交叉引用临时表中的大写等效替换字符串的一部分 - tsql

> ID：13918473
> 
> 赞同：2
> 
> 时间：2012-12-17T16:56:59.627
> 
> 标签：sql-server-2008, tsql, replace, substring

我们在加载到我们的数据仓库中的仪器名称时遇到问题，其中它们要么以全部大写或正常大小写（每个单词开头的大写字母）加载字符串。我们有一个处理将所有大写字符串更改为正常大小写的函数，其中一些示例如下：

```
Merck & Co Inc Common Stock Usd.5
Newmont Mining Corp Common Stock Usd Inc 1.6 
```

然而，当涉及到报告时，我们希望将其中的某些部分资本化，即在上面的示例中，“Usd”应该变成“USD”，“Inc”应该变成“INC”，“Corp”应该变成“CORP”。

这些都保存在交叉引用表中，但是我不确定如何更新我的选择，以便当我选择我的正常情况仪器名称时，它将检查交叉引用表以确保更新（替换）应该是大写成大写。

我做到了这一点：

```
CREATE TABLE capital ([InternalValue] VARCHAR(255), [ExternalValue] VARCHAR(255));

CREATE TABLE instrument ([Instrument] VARCHAR(255));

INSERT INTO capital ([InternalValue], [ExternalValue])
VALUES
('Usd', 'USD'),
('Ltd', 'LTD'),
('Corp', 'CORP'),
('Inc', 'INC')

INSERT INTO instrument ([Instrument])
VALUES
('Merck & Co Inc Common Stock Usd.5'),
('Newmont Mining Corp Common Stock Usd Inc 1.6');

SELECT REPLACE(Instrument, 'Usd', 'USD') FROM instrument AS i 
```

但我不知道如何将大写表合并到其中，以便它可以检查整个字符串中所有可能的大写字母。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:21:34.250

如果您有要在表中用作替换的值，并且可以重复执行此操作，则可以创建一个函数来执行替换：

```
create function replacement(@string varchar(max))
returns varchar(max)
as
begin

    with ReplaceWord(InternalWord, ExternalWord) as
    (
        select InternalValue, ExternalValue
        from capital
    )
    select @string =  REPLACE(@string, r.InternalWord, r.ExternalWord)
    from ReplaceWord r
    where CHARINDEX(r.InternalWord, @string) > 0

    return @string
end 
```

然后查询可以使用的数据：

```
SELECT dbo.replacement(i.Instrument) NewValue
FROM instrument AS i 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5d561/2)

哪个会返回：

```
|                                     NEWVALUE |
------------------------------------------------
|            Merck & Co INC Common Stock USD.5 |
| Newmont Mining CORP Common Stock USD INC 1.6 | 
```

*注意：我从@SQL Kiwi[在这里](http://www.sqlservercentral.com/Forums/Topic886935-392-1.aspx#bm886962)找到了基本代码，并将其更改为使用函数，如果这是您必须在一致的基础上做的事情*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:42:36.980

我想我读错了所有可能的大写字母。
最初，我将其视为一个单词的所有可能性。
当您的意思是所有大写行时。

在我的 SQL 2008R2 上，from 不区分大小写

```
SELECT REPLACE('abCdefghicDE','cde','CDE');
returns
abCDEfghiCDE 
```

我认为你的问题将是相反的。如何不找到所有组合。

```
SELECT REPLACE('corpo tunnel','Corp','CORP');
CORPo tunnel 
```

我的经验是 TSQL 中的选择/查找端始终不区分大小写。
我认为您将需要 CLR 来获得所需的区分大小写的级别。
如果速度是一个问题，我会使用 .NET 并将 Capital 读入和 Dictionary 并使用 Regex 进行处理。

# java - Mac OS X 10.8 Mountain Lion 上的 Oracle（Sun 的）JDK/JRE 安装在哪里？

> ID：13918475
> 
> 赞同：48
> 
> 时间：2012-12-17T16:57:00.723
> 
> 标签：java, macos

Oracle (Sun) 在 Mac OS X 10.8 Mountain Lion 上的哪里安装他们的 JDK/JRE？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-17T16:57:00.723

`/Library/Java/JavaVirtualMachines/`根据[Mac JDK 卸载文档](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html#uninstall)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-11T21:27:32.737

Oracle Java SE 下载地址：[http ://www.oracle.com/technetwork/java/javase/overview/index.html](http://www.oracle.com/technetwork/java/javase/overview/index.html)

至少在 Maverick 上安装：

```
/Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/ 
```

此 JRE 与 Apple 已安装的 JRE 完全分开，后者在`/System/Library/Frameworks/JavaVM.framework/Versions/`另一个答案中提及。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-23T12:36:38.067

如果你在 Eclipse 之类的东西中设置 JRE 路径，你需要指向 /home 目录，即

`/Library/Java/JavaVirtualMachines/<Replace with version>/Contents/Home`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-18T20:27:26.090

其他一些答案可能是正确的，但这对我来说是有效的（截至 2016 年 1 月，它是不同的，并且是最新的）在办公室的新计算机上安装它时。

另一个答案中提到的路径是

```
/Library/Java/JavaVirtualMachines/<Replace with version>/Contents/Home 
```

然而，这里有一个到达那里的视觉指南，因为您可以找到许多名为“库”的目录。确保你在这里

[![在此处输入图像描述](../Images/f07dd9a0edb33e441818fc02344e9e79.png)](https://i.stack.imgur.com/IZSl9.png)

然后点击进入*JavaVirtualMachines*

[![在此处输入图像描述](../Images/edbe0410788b16d3d6aaa5648ce98364.png)](https://i.stack.imgur.com/By3Ku.png)

如果您正在进行新设置并且刚刚下载了 Android Studio，他们可能已将您发送到[https://support.apple.com/kb/dl1572?locale=en_US](https://support.apple.com/kb/dl1572?locale=en_US)
上的“为 OS X 2015-001 下载 Java”。版本 1.6.0

[![在此处输入图像描述](../Images/fd2b03022c62f2fbcbe4700ba60c2d8f.png)](https://i.stack.imgur.com/NMWGb.png)

那不行！！！！

我收到需要 JDK 7.0 或更高版本的错误。

我寻找了一个较新的版本，并从 Oracle [http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html找到了这个链接](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)

[![在此处输入图像描述](../Images/7db691af1edc8a0adb49e456016f864f.png)](https://i.stack.imgur.com/n3By2.png)

我安装了它，然后选择了那个。它奏效了

[![在此处输入图像描述](../Images/0bd8a7b465e126e31794fbf3c69f9a6d.png)](https://i.stack.imgur.com/GnrlA.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-17T17:03:55.097

在我的系统上，评估`which java`导致我`/usr/bin/java`. 这又是一个符号链接：

```
/System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java 
```

如果它是相关的，`java -version`告诉我我已经`1.6.0_37`安装了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-04T10:03:50.003

前面的答案中提到的 JDK/JRE 位于 /Library/Java/JavaVirtualMachines/<version>/Contents/Home/。JRE 是这个 Home 下的目录。有趣的是，浏览器不会将此位置的文件用于 java applet 插件。浏览器使用的位置是 /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home/。实际上，如果您运行 JRE 安装程序，它会更新此位置中的文件，而不是 JDK/JRE 位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-01T04:25:00.510

这里有足够的答案，但我**只是**添加一种自己找到它的方法

```
$ sudo find / -name Java
/Library/Application Support/Oracle/Java
/Library/Java
/private/var/root/Library/Application Support/Oracle/Java
/System/Library/Java
/Users/prayagupd/Library/Application Support/Oracle/Java 
```

更加具体，

```
$ sudo find / -name jdk*
/Applications/Android Studio.app/Contents/jre/jdk
/Applications/Android Studio.app/Contents/lib/jdkAnnotations.jar
/Applications/IntelliJ IDEA.app/Contents/jre/jdk
/Applications/IntelliJ IDEA.app/Contents/lib/jdkAnnotations.jar
/Library/Java/JavaVirtualMachines/jdk1.7.0_76.jdk 
```

你看到`/Library/Java/JavaVirtualMachines/`的是你需要往里看的地方。

而且`/Library/Java/JavaVirtualMachines/jdk<version>.jdk/Contents/Home/`是你的`JAVA_HOME`

```
$ ls -ls /Library/Java/JavaVirtualMachines/jdk1.7.0_76.jdk/Contents/Home/
total 39776
    8 -rw-rw-r--   1 root  wheel      3339 Dec 18  2014 COPYRIGHT
    8 -rw-rw-r--   1 root  wheel        40 Dec 18  2014 LICENSE
    8 -rw-rw-r--   1 root  wheel       114 Dec 18  2014 README.html
  216 -rw-rw-r--   1 root  wheel    110114 Dec 17  2014 THIRDPARTYLICENSEREADME-JAVAFX.txt
  344 -rw-rw-r--   1 root  wheel    173559 Dec 18  2014 THIRDPARTYLICENSEREADME.txt
    0 drwxrwxr-x  44 root  wheel      1496 Feb 28 20:13 bin
    0 drwxrwxr-x   9 root  wheel       306 Feb 28 20:13 db
    0 drwxrwxr-x   9 root  wheel       306 Feb 28 20:13 include
    0 drwxrwxr-x  10 root  wheel       340 Feb 28 20:13 jre
    0 drwxrwxr-x  14 root  wheel       476 Feb 28 20:13 lib
    0 drwxrwxr-x   5 root  wheel       170 Dec 18  2014 man
    8 -rw-rw-r--   1 root  wheel       502 Dec 18  2014 release
39184 -rw-rw-r--   1 root  wheel  20061067 Dec 18  2014 src.zip 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-03-04T23:47:57.893

Oracle 的第 8 版 (1.8.0_40-b25) 可在以下位置找到：

```
/Library/Java/JavaVirtualMachines/jdk1.8.0_40.jdk/Contents/Home/bin/java 
```

仅供参考：Oracle 没有遵循将 /Library/Java/Current （等）链接到最新安装的 java 的做法。

以下是我随着时间的推移跟上版本的方法：来自我的 .zshrc 文件：

```
108 JAVA_6_HOME=/System/Library/Frameworks/JavaVM.framework/Home
109 JAVA_7_HOME=/Library/Java/Current
110 JAVA_8_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_40.jdk/Contents/Home
111 
112 export JAVA_6_HOME
113 export JAVA_7_HOME
114 export JAVA_8_HOME
115 
116 export JAVA_HOME=$JAVA_8_HOME
117 
118 PATH=$PATH:$JAVA_HOME/bin
119 
```

# javascript - 在其他回调返回后调用回调函数的优雅方式

> ID：13918477
> 
> 赞同：0
> 
> 时间：2012-12-17T16:57:08.773
> 
> 标签：javascript, node.js, callback

我的 nodejs 应用程序中有以下代码：

```
function someFileOperation(callback) {
    var files = ...;
    files.forEach(function (file) {
        doSomethingAsync(file, function (err, result) {

        });
    });
} 
```

什么是调用 someFileOperation() 的回调的优雅方法，以防所有 doSomethingAsync() 调用它们的回调函数并且只调用一次，当 doSomethingAsync() 发生错误时？

现在我想出了这样的事情：

```
function someFileOperation(callback) {
    var files = ...;
    var noFiles = files.length;
    files.forEach(function (file) {
        doSomethingAsync(file, function (err, result) {
            if (err) {
                callback(err);
                callback = function () {}; // I don't want it to be called again
            } else if (--noFiles <= 0) {
                callback(null, true);
            }
        });
    });
} 
```

但我认为对于这样一个简单的任务来说这是很多开销。所以我正在寻找一种更优雅的方式，或者可能是一个小框架来解决这些问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:59:13.720

使用 async.map 或 async.foreach 见这里：[https](https://github.com/caolan/async#map) ://github.com/caolan/async#map和[https://github.com/caolan/async#forEach](https://github.com/caolan/async#forEach)

async.map 方法接受一个项目数组，并对数组中的每个项目并行执行相同的异步调用。如果没有遇到错误，它将调用带有新结果数组的回调。

# database - Sencha：如何使用 Ext.data.HttpProxy 将参数传递给 php？

> ID：13918478
> 
> 赞同：0
> 
> 时间：2012-12-17T16:57:15.977
> 
> 标签：database, list, extjs, store, http-proxy

我已经成功完成了这个很棒的教程：[http ://www.sencha.com/learn/ext-js-grids-with-php-and-sql/](http://www.sencha.com/learn/ext-js-grids-with-php-and-sql/)

***我只是不能使用代理指定的 baseParams 字段......***这是我遵循教程描述的代码：

****__****我的商店：Communes.js*****_ *_* _*******

 *****```
Ext.define('app.store.Communes', {
    extend: 'Ext.data.Store',
    id: 'communesstore',
    requires: ['app.model.Commune'],

config: {
    model: 'app.model.Commune',
    departement:'var',

    // the proxy with POST method
    proxy: new Ext.data.HttpProxy({
        url: 'app/php/communes.php',      // File to connect to
        method: 'POST'
    }),

    // the parameter passed to the proxy
    baseParams:{
        departement: "VAR"
    },

    // the JSON parser
    reader: new Ext.data.JsonReader({   
        // we tell the datastore where to get his data from
        rootProperty: 'results'
    },
    [
        {
            name: 'IdCommune',     
            type: 'integer'
        },

        {
            name: 'NomCommune',    
            type: 'string'
        }
    ]),
    autoLoad: true,
    sortInfo:{
        field: 'IdCommune', direction: "ASC"
    }
}

}); 
```

****__ *_* __** php 文件：communes.php ***_* ____****

 **```
<?php

/**
 *  CREATE THE CONNECTION
 */
mysql_connect("localhost", "root", "pwd") or
        die("Could not connect: " . mysql_error());
mysql_select_db("databasename");

/**
 * INITIATE THE POST 
 */
$departement = 'null';
  if ( isset($_POST['departement'])){
    $departement = $_POST['departement'];   // Get this from Ext
  }

  getListCommunes($departement);

/**
 * 
 */
function getListCommunes($departement) {

[CODE HERE WORK FINE : just a connection and query but $departement is NULL]

}

?> 
```

没有作为 POST 方法传递的参数...知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:00:43.227

那是因为 baseParams 是查询字符串的一部分，它们不是在 POST 正文中传递，而是在 url 中传递。

我不知道 PHP，但可能这有效：

```
if ( isset($_GET['departement'])){
    $departement = $_GET['departement'];   // Get this from Ext
} 
```*******

# android - 如何正确设置 TouchImageView 的 fixTransX & fixTransY 以实现 doubleTap 到 ZoomOut？

> ID：13918488
> 
> 赞同：4
> 
> 时间：2012-12-17T16:57:46.710
> 
> 标签：android, zooming, android-imageview, android-gesture

我`TouchImageView`从[这里](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)使用。

我正在尝试实现`ZoomOut`双击。我已经部分完成了。但是，缩小时我遇到了一些问题。如果我缩放图像并且双击，则图像无法正确渲染。

这是我的修改版本

TouchImageView.java

```
package com.bharath.downloadissuedemo;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Matrix;
import android.graphics.PointF;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.View;
import android.widget.ImageView;

public class TouchImageView extends ImageView {

    Matrix matrix;

    // We can be in one of these 3 states
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF last = new PointF();
    PointF start = new PointF();
    float minScale = 1f;
    float maxScale = 3f;
    float[] m;

    int viewWidth, viewHeight;
    static final int CLICK = 3;
    float saveScale = 1f;
    protected float origWidth, origHeight;
    int oldMeasuredWidth, oldMeasuredHeight;

    GestureDetector gestureDetector;
    ScaleGestureDetector mScaleDetector;

    Context context;

    public TouchImageView(Context context) {
        super(context);
        sharedConstructing(context);
        gestureDetector = new GestureDetector(getContext(), new GestureListener(this));
    }

    public TouchImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
        sharedConstructing(context);
        gestureDetector = new GestureDetector(getContext(), new GestureListener(this));
    }

    private void sharedConstructing(Context context) {
        super.setClickable(true);
        this.context = context;
        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
        matrix = new Matrix();
        m = new float[9];
        setImageMatrix(matrix);
        setScaleType(ScaleType.MATRIX);

        setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                mScaleDetector.onTouchEvent(event);
                PointF curr = new PointF(event.getX(), event.getY());
                switch (event.getAction() & MotionEvent.ACTION_MASK) {
                    case MotionEvent.ACTION_DOWN:
                        last.set(curr);
                        start.set(last);
                        mode = DRAG;
                        break;

                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG) {

                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float fixTransX = getFixDragTrans(deltaX, viewWidth, origWidth * saveScale);
                            float fixTransY = getFixDragTrans(deltaY, viewHeight, origHeight * saveScale);
                            matrix.postTranslate(fixTransX, fixTransY);
                            fixTrans();
                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;

                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;
                        break;
                }

                setImageMatrix(matrix);
                invalidate();
                return gestureDetector.onTouchEvent(event); // indicate event was handled
            }

        });
    }

    public void setMaxZoom(float x) 
    {
        maxScale = x;
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScaleBegin(ScaleGestureDetector detector) {
            mode = ZOOM;
            return true;
        }

        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            float mScaleFactor = detector.getScaleFactor();
            float origScale = saveScale;
            System.out.println("Orig Scale = "+origScale);
            saveScale *= mScaleFactor;
            System.out.println("Sace Scale = "+saveScale);

            System.out.println("m Scale Factor = "+mScaleFactor);
            if (saveScale > maxScale) {
                saveScale = maxScale;
                mScaleFactor = maxScale / origScale;
            } else if (saveScale < minScale) {
                saveScale = minScale;
                mScaleFactor = minScale / origScale;
            }

            if (origWidth * saveScale <= viewWidth || origHeight * saveScale <= viewHeight)
                matrix.postScale(mScaleFactor, mScaleFactor, viewWidth / 2, viewHeight / 2);
            else
                matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());

            fixTrans();
            return true;
        }
    }

    void fixTrans() {
        matrix.getValues(m);
        float transX = m[Matrix.MTRANS_X];
        float transY = m[Matrix.MTRANS_Y];

        float fixTransX = getFixTrans(transX, viewWidth, origWidth * saveScale);
        float fixTransY = getFixTrans(transY, viewHeight, origHeight * saveScale);

        System.out.println("Translation X ="+fixTransX);
        System.out.println("Translation Y ="+fixTransY);
        ((ViewPagerInterface)getContext()).enable();
        if (fixTransX != 0 || fixTransY != 0)
        {           
            matrix.postTranslate(fixTransX, fixTransY);
        }
        else if (saveScale!=1.0) 
        {
            ((ViewPagerInterface)getContext()).disable();
        } 
    }

    float getFixTrans(float trans, float viewSize, float contentSize) {
        float minTrans, maxTrans;

        if (contentSize <= viewSize) {
            minTrans = 0;
            maxTrans = viewSize - contentSize;
        } else {
            minTrans = viewSize - contentSize;
            maxTrans = 0;
        }

        if (trans < minTrans)
            return -trans + minTrans;
        if (trans > maxTrans)
            return -trans + maxTrans;
        return 0;
    }

    float getFixDragTrans(float delta, float viewSize, float contentSize) {
        if (contentSize <= viewSize) {
            return 0;
        }
        return delta;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        viewWidth = MeasureSpec.getSize(widthMeasureSpec);
        viewHeight = MeasureSpec.getSize(heightMeasureSpec);

        //
        // Rescales image on rotation
        //
        if (oldMeasuredHeight == viewWidth && oldMeasuredHeight == viewHeight
                || viewWidth == 0 || viewHeight == 0)
            return;
        oldMeasuredHeight = viewHeight;
        oldMeasuredWidth = viewWidth;

        if (saveScale == 1) {
            //Fit to screen.
            float scale;

            Drawable drawable = getDrawable();
            if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0)
                return;
            int bmWidth = drawable.getIntrinsicWidth();
            int bmHeight = drawable.getIntrinsicHeight();            
            Log.d("bmSize", "bmWidth: " + bmWidth + " bmHeight : " + bmHeight);
            float scaleX = (float) viewWidth / (float) bmWidth;
            float scaleY = (float) viewHeight / (float) bmHeight;
            scale = Math.min(scaleX, scaleY);
            matrix.setScale(scale, scale);

            // Center the image
            float redundantYSpace = (float) viewHeight - (scale * (float) bmHeight);
            float redundantXSpace = (float) viewWidth - (scale * (float) bmWidth);
            redundantYSpace /= (float) 2;
            redundantXSpace /= (float) 2;
            matrix.postTranslate(redundantXSpace, redundantYSpace);
            origWidth = viewWidth - 2 * redundantXSpace;
            origHeight = viewHeight - 2 * redundantYSpace;
            setImageMatrix(matrix);
        }
        fixTrans();
    }    

    private class GestureListener extends GestureDetector.SimpleOnGestureListener {

        public TouchImageView touchImageView=null;

        public GestureListener(TouchImageView tmv) {

            touchImageView=tmv;
        }
        @Override
        public boolean onDown(MotionEvent e) {
            return false;
        }
        // event when double tap occurs
        @Override
        public boolean onDoubleTap(MotionEvent e) 
        {           
            if (saveScale>1.0f) {
                Drawable d = getDrawable();
                Bitmap bmp = ((BitmapDrawable)d).getBitmap();
                System.out.println("bmp Width = "+bmp.getWidth());
                System.out.println("bmp Height = "+bmp.getHeight());
                System.out.println("Original Width = "+origWidth);
                System.out.println("Original Height = "+origHeight);
                System.out.println("View Width "+viewWidth);
                System.out.println("View height"+viewHeight);
                float scaleX= viewWidth/(origWidth*saveScale);
                float scaleY =viewHeight/(origHeight*saveScale);
                float finalScale = Math.min(scaleX, scaleY);

                matrix.postScale(finalScale, finalScale, viewWidth / 2, viewHeight / 2);
                saveScale=1.0f;

//              
//              float redundantYSpace = (float) viewHeight - (finalScale * (float) bmp.getHeight());
//              float redundantXSpace = (float) viewWidth - (finalScale * (float) bmp);
//              redundantYSpace /= (float) 2;
//              redundantXSpace /= (float) 2;
//              matrix.postTranslate(redundantXSpace, redundantYSpace);

                 matrix.getValues(m);
                 float transX = m[Matrix.MTRANS_X];
                 float transY = m[Matrix.MTRANS_Y];

                 float fixTransX = getFixTrans(transX, viewWidth, origWidth * finalScale);
                 float fixTransY = getFixTrans(transY, viewHeight, origHeight * finalScale);
//
                 System.out.println("Translation X ="+transX);
                 System.out.println("Translation Y ="+transY);

                 System.out.println("Fix X ="+fixTransX);
                 System.out.println("Fix Y ="+fixTransY);
                 ((ViewPagerInterface)getContext()).enable();
                 matrix.postTranslate(fixTransX, fixTransY);
            }

//          fixTrans();

//          System.out.println("Intrinsic Width "+bmp.getWidth());
//          System.out.println("Intrinsic Height "+bmp.getHeight());
//          RectF drawableRect = new RectF(0, 0,bmp.getWidth(),bmp.getHeight());
//          RectF viewRect = new RectF(0, 0,getWidth(), getHeight());
//          m.setRectToRect(drawableRect, viewRect, Matrix.ScaleToFit.CENTER);
//          setScale(,);
//          setScaleX(getWidth()/bmp.getWidth());
//          setScaleY( getHeight()/bmp.getHeight());

//setScaleX(scaleX)//           saveScale=1.0f;
//          setImageMatrix(m);

//          invalidate();
            return true;
        }

        @Override
        public boolean onSingleTapConfirmed(MotionEvent e) {

//          System.out.println("SIngle Tap Occurred");
//          touchImageView.saveScale=1.0f;
//          touchImageView.invalidate();
            return super.onSingleTapConfirmed(e);
        }
    }
} 
```

在上面的代码中，请看方法

```
 public boolean onDoubleTap(MotionEvent e) 
```

我在上述方法中犯了什么错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T02:47:42.043

## 更新

我已经更新了 TouchImageView 以包括动画双击缩放以及投掷。你可以在[github 上查看。](https://github.com/MikeOrtiz/TouchImageView)

* * *

基本做法是在onMeasure中计算时保存原始矩阵。我们不能简单地设置`matrix = originalMatrix`，因为这只是设置两个指向同一个对象的指针。我们需要制作一个深拷贝，完成：`matrix = new Matrix(originalMatrix);`我们还需要重置`saveScale`并`1f`调用`invalidate()`.

```
public class TouchImageView extends ImageView {

Matrix matrix;
Matrix originalMatrix;

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming
PointF last = new PointF();
PointF start = new PointF();
float minScale = 1f;
float maxScale = 3f;
float[] m;

int viewWidth, viewHeight;
static final int CLICK = 3;
float saveScale = 1f;
protected float origWidth, origHeight;
int oldMeasuredWidth, oldMeasuredHeight;

ScaleGestureDetector mScaleDetector;
GestureDetector mGestureDetector;

Context context;

public TouchImageView(Context context) {
    super(context);
    sharedConstructing(context);
}

public TouchImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
    sharedConstructing(context);
}

private void sharedConstructing(Context context) {
    super.setClickable(true);
    this.context = context;
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    mGestureDetector = new GestureDetector(context, new GestureListener());
    matrix = new Matrix();
    m = new float[9];
    setImageMatrix(matrix);
    setScaleType(ScaleType.MATRIX);

    setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            mScaleDetector.onTouchEvent(event);
            mGestureDetector.onTouchEvent(event);
            PointF curr = new PointF(event.getX(), event.getY());

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    last.set(curr);
                    start.set(last);
                    mode = DRAG;
                    break;

                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {
                        float deltaX = curr.x - last.x;
                        float deltaY = curr.y - last.y;
                        float fixTransX = getFixDragTrans(deltaX, viewWidth, origWidth * saveScale);
                        float fixTransY = getFixDragTrans(deltaY, viewHeight, origHeight * saveScale);
                        matrix.postTranslate(fixTransX, fixTransY);
                        fixTrans();
                        last.set(curr.x, curr.y);
                    }
                    break;

                case MotionEvent.ACTION_UP:
                    mode = NONE;
                    int xDiff = (int) Math.abs(curr.x - start.x);
                    int yDiff = (int) Math.abs(curr.y - start.y);
                    if (xDiff < CLICK && yDiff < CLICK)
                        performClick();
                    break;

                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    break;
            }

            setImageMatrix(matrix);
            invalidate();
            return true; // indicate event was handled
        }

    });
}

public void setMaxZoom(float x) {
    maxScale = x;
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScaleBegin(ScaleGestureDetector detector) {
        mode = ZOOM;
        return true;
    }

    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        float mScaleFactor = detector.getScaleFactor();
        float origScale = saveScale;
        saveScale *= mScaleFactor;
        if (saveScale > maxScale) {
            saveScale = maxScale;
            mScaleFactor = maxScale / origScale;
        } else if (saveScale < minScale) {
            saveScale = minScale;
            mScaleFactor = minScale / origScale;
        }

        if (origWidth * saveScale <= viewWidth || origHeight * saveScale <= viewHeight)
            matrix.postScale(mScaleFactor, mScaleFactor, viewWidth / 2, viewHeight / 2);
        else
            matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());

        fixTrans();
        return true;
    }
}

private class GestureListener extends GestureDetector.SimpleOnGestureListener {

    // event when double tap occurs
    @Override
    public boolean onDoubleTap(MotionEvent e) 
    {      
        matrix = new Matrix(originalMatrix);
        saveScale = 1f;
        setImageMatrix(matrix);
        invalidate();
        return true;
    }
}

void fixTrans() {
    matrix.getValues(m);
    float transX = m[Matrix.MTRANS_X];
    float transY = m[Matrix.MTRANS_Y];

    float fixTransX = getFixTrans(transX, viewWidth, origWidth * saveScale);
    float fixTransY = getFixTrans(transY, viewHeight, origHeight * saveScale);

    if (fixTransX != 0 || fixTransY != 0)
        matrix.postTranslate(fixTransX, fixTransY);
}

float getFixTrans(float trans, float viewSize, float contentSize) {
    float minTrans, maxTrans;

    if (contentSize <= viewSize) {
        minTrans = 0;
        maxTrans = viewSize - contentSize;
    } else {
        minTrans = viewSize - contentSize;
        maxTrans = 0;
    }

    if (trans < minTrans)
        return -trans + minTrans;
    if (trans > maxTrans)
        return -trans + maxTrans;
    return 0;
}

float getFixDragTrans(float delta, float viewSize, float contentSize) {
    if (contentSize <= viewSize) {
        return 0;
    }
    return delta;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    viewWidth = MeasureSpec.getSize(widthMeasureSpec);
    viewHeight = MeasureSpec.getSize(heightMeasureSpec);

    //
    // Rescales image on rotation
    //
    if (oldMeasuredHeight == viewWidth && oldMeasuredHeight == viewHeight
            || viewWidth == 0 || viewHeight == 0)
        return;
    oldMeasuredHeight = viewHeight;
    oldMeasuredWidth = viewWidth;

    if (saveScale == 1) {
        //Fit to screen.
        float scale;

        Drawable drawable = getDrawable();
        if (drawable == null || drawable.getIntrinsicWidth() == 0 || drawable.getIntrinsicHeight() == 0)
            return;
        int bmWidth = drawable.getIntrinsicWidth();
        int bmHeight = drawable.getIntrinsicHeight();

        Log.d("bmSize", "bmWidth: " + bmWidth + " bmHeight : " + bmHeight);

        float scaleX = (float) viewWidth / (float) bmWidth;
        float scaleY = (float) viewHeight / (float) bmHeight;
        scale = Math.min(scaleX, scaleY);
        matrix.setScale(scale, scale);

        // Center the image
        float redundantYSpace = (float) viewHeight - (scale * (float) bmHeight);
        float redundantXSpace = (float) viewWidth - (scale * (float) bmWidth);
        redundantYSpace /= (float) 2;
        redundantXSpace /= (float) 2;

        matrix.postTranslate(redundantXSpace, redundantYSpace);
        originalMatrix = new Matrix(matrix);

        origWidth = viewWidth - 2 * redundantXSpace;
        origHeight = viewHeight - 2 * redundantYSpace;
        setImageMatrix(matrix);
    }
    fixTrans();
}
} 
```

# ruby-on-rails - Rails，link_to，无法传递值

> ID：13918491
> 
> 赞同：0
> 
> 时间：2012-12-17T16:57:54.187
> 
> 标签：ruby-on-rails, link-to

我正在尝试实现“类别”的无序列表，如果您单击特定类别，则属于该类别的所有照片（锯齿）都会显示在屏幕上。我的观点包括类别是：

```
<div id = "Categories">
<h2>Categories</h2>
<ul><% @cat.each do |c| %>
    <li><%=link_to c.name, c,:controller => "category", :action => "show"  %>
    </li>
<% end %>
</ul> 
```

我的类别控制器是：

```
def show
@jags = Jag.where("category_id = params[:id]")
   if @jags.empty?
     flash[:notice] = "No jags in this Category"
    end
end 
```

最后我的表演观点是：

```
<%= render 'nav' %>
<div><% @jags.each do |j| %>
<%=  image_tag j.image_url(:thumb)%>
<% end %>
</div> 
```

我遇到的问题是我不知道如何在第一个视图中将我的“特定类别”（c）传递给类别控制器。

我尝试使 c 成为一个实例变量（@c），这显然是我做不到的[形式参数不能是实例变量'）；@cat.each 做 |@c| ;@output_buffer.safe_concat('].

如果我运行此代码，我会收到一个 SQLlite 错误 [SQLite3::SQLException: near "[:id]": syntax error: SELECT COUNT(*) FROM "jags" WHERE (category_id = params[:id])]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:01:58.863

如果你使用 RESTful 控制器，这就足够了：

```
<div id = "Categories">
<h2>Categories</h2>
<ul>
<% @cat.each do |c| %>
    <li><%=link_to c.name, c  %></li>
<% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:02:12.907

看到您在控制器中获取类别的 ID，那么您可以这样做

```
@category = Category.find params[:id] 
```

在您的控制器中。`link_to`另外，按照下面的方法清理你的助手。

# python - 接口（obj）和getAdapter（obj，接口）之间的Zope组件差异

> ID：13918494
> 
> 赞同：0
> 
> 时间：2012-12-17T16:58:15.993
> 
> 标签：python, zope, zope.interface, zope3, zope.component

什么可能导致 Interface(obj) 返回 obj，而 getAdapter(obj, Interface) 返回一个经过适当调整的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:12:11.443

如果给定的实例已经提供了接口，那么`IInterface(instance)`将返回传入的实例。毕竟已经满足需求了，`instance`如果需要使用`IInterface`方法可以直接使用：

```
>>> import zope.interface
>>> class IFoo(zope.interface.Interface):
...     pass
... 
>>> class Foo(object):
...     zope.interface.implements(IFoo)
...     pass
... 
>>> foo = Foo()
>>> IFoo(foo)
<__main__.Foo object at 0x10eed22d0>
>>> IFoo.providedBy(foo)
True 
```

`getAdapter()`直接转到适配器注册表，如果您为给定类注册了适配器，`IInterface`则将返回该适配器。这有点没有意义，因为原始对象已经提供了接口，因此不需要进行任何调整。

# c# - 在 windows 7 企业版上的 windows powershell vs c# 程序中访问 WMI

> ID：13918495
> 
> 赞同：0
> 
> 时间：2012-12-17T16:58:16.830
> 
> 标签：c#, powershell, wmi

我的帐户具有管理权限。我使用 powershell 在 Windows 7 Enterprise VM 上访问 WMI，如下所示：

```
 Get-WmiObject -Namespace root\SecurityCenter2 -Class AntiVirusProduct  -ComputerName $computername 
```

并使用 C# 如下：

```
 string computer = Environment.MachineName;
        string wmipath = @"\\" + computer + @"\root\SecurityCenter2";
        try
        {
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(wmipath,
              "SELECT * FROM AntivirusProduct");
            ManagementObjectCollection instances = searcher.Get();
            //MessageBox.Show(instances.Count.ToString()); 
            foreach (ManagementObject queryObj in instances)
            {
                return queryObj[type].ToString();
            }
        }

        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        } 
```

但是，Powershell 中的代码始终有效，但 C# 中的代码仅在我以管理员身份显式运行程序时才有效。我可以在 C# 代码中添加任何内容，以便它可以在不以管理员身份显式启动 C# 程序的情况下为具有管理权限的用户运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:13:03.580

[您可以通过编辑清单](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375365%28v=vs.85%29.aspx)（与您的 C# 可执行文件位于同一目录中的 XML 文件）来强制 UAC 提示，而无需显式“以管理员身份运行” 。

[有关“如何强制我的 .NET 应用程序在 Windows 7 上以管理员身份运行？”，](https://stackoverflow.com/questions/2818179/how-to-force-my-net-app-to-run-as-administrator-on-windows-7)请参阅 StackOverflow 答案。.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:18:18.993

通常当我的应用程序只能从机器管理员运行时，我使用这种方法来验证管理员权限：

```
public static bool HasAdministrativeRight()
        {
            WindowsPrincipal principal = new WindowsPrincipal(WindowsIdentity.GetCurrent());
            return principal.IsInRole(WindowsBuiltInRole.Administrator);
        } 
```

在我的代码的主要部分（表单或控制台应用程序）

```
 if (!HasAdministrativeRight()) 
        {
          if (RunElevated(""))                
          {
           Application.Exit();
          }
        } 
```

以提升方式运行的代码：

```
private static bool RunElevated(string args)
        {
            ProcessStartInfo processInfo = new ProcessStartInfo();
            processInfo.Verb = "runas";
            processInfo.FileName = Application.ExecutablePath;
            processInfo.Arguments = args;
            try
            {
                Process.Start(processInfo);
                return true;
            }
            catch (Exception)
            {
                //Do nothing. Probably the user canceled the UAC window
            }
            return false;
        } 
```

# asp.net-mvc - 查询慢，想用存储过程（ASP.Net MVC3, Generic Repo, POCO）

> ID：13918500
> 
> 赞同：0
> 
> 时间：2012-12-17T16:58:25.290
> 
> 标签：asp.net-mvc, linq, entity-framework, repository-pattern

我有一个 MVC3 应用程序，它使用分离成不同层的 POCO 类。我也实现了一个通用的回购模式。

我有一个仪表板，它使用 Kendo UI 图表进行管理以查看实时统计信息。随着数据库的增长，仪表板越来越慢。我找到了这些原因：

1.  记录每天都在增长
2.  每个图表调用 repo 以获取所有行以使用 LINQ 计算统计信息
3.  Automapper 正在将我的模型创建为视图模型

我想通过使用数据库中的存储过程来准确获取统计数据所需的数字来加快这一速度。我不确定我应该如何实现这个......即使感觉很不对劲！有小费吗？

**带有回购代码的示例控制器**

```
Public Class DashboardController
    Inherits BaseController

    Private ticketRepo As MaintenanceTicketsRepository

    Public Sub New()
        Me.ticketRepo = New MaintenanceTicketsRepository(New TicketContext)
    End Sub

    Function Chart_OpenItems() As ActionResult
        Dim tickets As IList(Of MaintenanceTicket) = ticketRepo.GetAll().Include(Function(p) p.Priority).Include(Function(s) s.Status).OrderBy(Function(o) o.PriorityId).ToArray()
         'Do some work with repo then dispose'
    End Function

    Function Chart_ClosedItems() As ActionResult
        Dim tickets As IList(Of MaintenanceTicket) = ticketRepo.GetAll().Include(Function(p) p.Priority).Include(Function(s) s.Status).OrderBy(Function(o) o.PriorityId).ToArray()
         'Do some work with repo then dispose'
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:29:32.937

试图回答你的问题。如果您可以通过使用存储过程在数据离开 SQL Server 之前聚合数据来减少进入模型的数据量，那么就去做吧。实际的实现细节将取决于您拥有什么样的 ORM 设置。如果您可以将 1800 行减少到 >100，您几乎肯定会看到速度提高。

# ios - UICollectionView - UICollectionViewDelegate - 如何实现与 canEditRowAtIndexPath 等效？

> ID：13918501
> 
> 赞同：1
> 
> 时间：2012-12-17T16:58:40.377
> 
> 标签：ios, uicollectionview

似乎这与这种方法有关，尽管我很难区分如何区分 Selector 被称为：

```
-(BOOL)collectionView:(UICollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender
{
     if ( action.type? name? == "willMoveToIndexPath"  && sender == cellToNotMove?? )  return NO;

     return YES;
} 
```

似乎这样的事情可能会奏效，对干净的实施有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:46:27.530

这对我来说看起来不错，除了 use `action == @selector(willMoveToIndexPath)`。

# windows-phone - 通过 USB 从设备访问应用程序的文档？

> ID：13918506
> 
> 赞同：1
> 
> 时间：2012-12-17T16:59:07.333
> 
> 标签：windows-phone, windows-phone-8, winprt

我正在使用将日志写入设备上的文件的 Windows Phone 8 应用程序。有没有办法访问该文件？如果不是，除了使用 Visual Studio 之外，我还有哪些替代方法可以查看日志信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:05:24.310

是的，只要它是安装在开发人员解锁手机上的开发人员应用程序，您就可以从隔离存储中读取文件。我使用[Windows Phone Power Tools](http://wptools.codeplex.com/)来执行此操作，SDK 本身附带了一个命令行工具，也称为[IseTool.exe](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286408%28v=vs.105%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:06:55.763

为了您自己的访问权限，您可以使用保罗回答中的建议。如果您想从其他用户那里获取文件，您可以使用[电子邮件任务](http://www.windowsphonegeek.com/articles/1-how-to-perform-email-tasks-in-a-wp7-app)并将日志文件附加到电子邮件中并将其发送给您或使用某种[形式的服务器日志记录](http://nlog-project.org/2011/01/09/nlog-for-windows-phone-7.html)。

# asp.net - WCF回调后打开aspx页面

> ID：13918508
> 
> 赞同：3
> 
> 时间：2012-12-17T16:59:08.050
> 
> 标签：asp.net, wcf, callback, popup

我有以下问题：

我必须实现一种聊天应用程序。因此我使用 ASP.NET 4.5 和 WCF。当我开始点击我想与之聊天的人时，我调用了一个 wcf 网络服务。这个网络服务从我点击它的人那里调用 wcf 回调。我现在的问题是，我在客户端调用了该事件，但我无法打开一个新的 ChatWindow。

```
[CallbackBehavior(UseSynchronizationContext = false, ConcurrencyMode = ConcurrencyMode.Single)]
public class ChatContext : IChatClient, INotifyPropertyChanged
{
    #region Events

    public event EventHandler StartChat;

    #endregion

    public void FollowChatBegin(Person invitee)
    {
        StartChat(invitee, new EventArgs());
    } 
```

我已经在我的主页中注册了 StartChat 事件：

```
 public partial class MainPage: System.Web.UI.Page
{       

    protected void Page_Load(object sender, EventArgs e)
    {
       // ...

        Global.ChatContext.StartChat += ChatContextOnStartChat;
    }

 private void ChatContextOnStartChat(object sender, EventArgs eventArgs)
    {
        var person= (Person) sender;

        string path = this.Request.Url.AbsoluteUri.Remove(this.Request.Url.AbsoluteUri.IndexOf(Request.Url.LocalPath, Request.Url.LocalPath.Length));
        path += "/Controls/Chat/ChatWindow.aspx";

        string parameters = "did=" + person.Id + "height=700px,width=800px,resizeable=yes,status=no";
        path += parameters;

        ScriptManager.RegisterStartupScript(this, this.GetType(), "openChartWindow", "window.open('" + path + "');", true);

        this.upMain.Update();
    } 
```

}

ChatContextOnStartChat 给我以下问题：

*   this.Request 为空
*   我无法调用我的 UpdatePanel.Update

我不知道如何简单地打开一个弹出窗口/对话框......我可以使用错误的模式吗？

# c# - Jquery 对 MVC 控制器的调用：ReferenceError: url is not defined

> ID：13918509
> 
> 赞同：0
> 
> 时间：2012-12-17T16:59:10.537
> 
> 标签：c#, jquery, asp.net-mvc

我尝试了所有的努力，但就是不明白错误在哪里。我也搜索了谷歌，但没有找到任何好的解决方案。它实际上并没有在 mvc 中调用控制器/动作。在项目的其他部分也运行良好。

我在文件夹“MVC”下有一个控制器“RB”，动作定义为“SS”。我正在从我的 javascript 文件中触发以下代码：

```
var sSch = function (request, response) {
        var t = request.RF.substring(0, 1);
        var d = new Date(request.RNR);            
        $.ajax({
            url: "/MVC/RB/SS",
            type: "POST",
            dataType: "json",
            data: {
                _rId: request.ReportId,
                _date: d.toString(),
                _fcy: t
            },
            success: function (data) {
                alert('Success');

            },
            error:  function (data) {
                alert('Error');

            }
        });
    }; 
```

我在按钮的单击上调用此函数并正确获取请求变量中的值，但无论如何它不会在那里调用控制器/操作。在我测试的萤火虫上，它抛出异常“ReferenceError：url未定义”。我在 VS 2010 下使用 MVC3。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:07:06.437

对于您拥有 'MVC/RB/SS' 的 url，这与您当前的目录相关，快速测试将是放入 url: "../MVC/RB/SS" 或 url: "../../MVC /RB/SS" 取决于您的页面在站点结构中的深度。

另一种方法是试试这个：

```
 url: "@Action("/MVC/RB/SS")", 
```

这将为您创建正确级别的正确 url，并且应该被拾取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:01:56.473

您必须正确定义您的操作，而不是

```
 url: "/MVC/RB/SS", 
```

利用

```
 url:  @Url.Action("SS", "RB") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:02:34.520

尝试这个：

```
url: "~/MVC/RB/SS", 
```

这将解析为路径“http://site-name/MVC/RB/SS”。

萤火虫说什么？

# python - 使用 eventlet.GreenPool.spawn 时如何在主线程中引发异常

> ID：13918512
> 
> 赞同：3
> 
> 时间：2012-12-17T16:59:16.870
> 
> 标签：python, asynchronous, eventlet, green-threads

我使用 eventlet.GreenPool.spawn 运行一些任务，然后等待所有线程完成。我知道会引发异常 - 我如何捕获该异常并将其抛出到主线程中？我很确定这很容易，但是我完全错过了一些东西。

这是一个例子（失败了，我希望它成功）

```
import unittest
import eventlet

def broken_fetch(url):
    print " Raising exception "
    raise RuntimeError

class TestPool(unittest.TestCase):

    def test_error_is_bubbled_up(self):
        with self.assertRaises(RuntimeError):
            pool = eventlet.GreenPool(100)
            urls = ['http://google.com/', 'http://example.com/']
            for url in urls:
                pool.spawn(broken_fetch, url)
            pool.waitall()

if __name__ == '__main__':
    unittest.main() 
```

它的输出：

```
> python errors.py
Raising exception 
Traceback (most recent call last):
File "/usr/local/lib/python2.7/site-packages/eventlet/hubs/hub.py", line 336, in fire_timers
    timer()
File "/usr/local/lib/python2.7/site-packages/eventlet/hubs/timer.py", line 56, in __call__
    cb(*args, **kw)
File "/usr/local/lib/python2.7/site-packages/eventlet/greenthread.py", line 192, in main
    result = function(*args, **kwargs)
File "errors.py", line 10, in broken_fetch
    raise RuntimeError
RuntimeError
Raising exception 
Traceback (most recent call last):
File "/usr/local/lib/python2.7/site-packages/eventlet/hubs/hub.py", line 336, in fire_timers
    timer()
File "/usr/local/lib/python2.7/site-packages/eventlet/hubs/timer.py", line 56, in __call__
    cb(*args, **kw)
File "/usr/local/lib/python2.7/site-packages/eventlet/greenthread.py", line 192, in main
    result = function(*args, **kwargs)
File "errors.py", line 10, in broken_fetch
    raise RuntimeError
RuntimeError
F
======================================================================
FAIL: test_error_is_bubbled_up (__main__.TestPool)
----------------------------------------------------------------------
Traceback (most recent call last):
File "errors.py", line 21, in test_error_is_bubbled_up
    pool.waitall()
AssertionError: RuntimeError not raised

----------------------------------------------------------------------
Ran 1 test in 0.003s

FAILED (failures=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:57:41.913

Eventlet 的事件循环吞下所有异常，`KeyboardInterrupt`除了`SystemExit`. 检查`wait()`各种 eventlet [hubs](https://bitbucket.org/which_linden/eventlet/src/7eee0dbd981e/eventlet/hubs?at=default)的实现。以下摘录来自[选择集线器的 wait()](https://bitbucket.org/which_linden/eventlet/src/7eee0dbd981e/eventlet/hubs/selects.py?at=default#cl-49)：

```
for listeners, events in ((readers, r), (writers, w)):
    for fileno in events:
        try:
            listeners.get(fileno, noop).cb(fileno)
        except self.SYSTEM_EXCEPTIONS:
            raise
        except:
            self.squelch_exception(fileno, sys.exc_info())
            clear_sys_exc_info() 
```

要解决此问题，您可以将异常信息作为值传递并稍后在主线程中处理它。

```
import unittest2
import sys
import eventlet

def broken_fetch(url):
    print " Raising exception "
    try:
        raise RuntimeError
    except:
        return sys.exc_info()

class TestPool(unittest2.TestCase):

    def test_error_is_bubbled_up(self):
        with self.assertRaises(RuntimeError):
            pool = eventlet.GreenPool(100)
            urls = ['http://google.com/', 'http://example.com/']
            for exc_info in pool.imap(broken_fetch, urls):
                if exc_info is not None:
                    exc_class, value, tb = exc_info
                    raise exc_class, value, tb

if __name__ == '__main__':
    unittest2.main() 
```

You may want to turn off eventlet's `DEBUG` flag to prevent eventlet from printing the swallowed exception. When you want to handle the exception in main thread, you probably don't want to get confused by the duplicated traceback print.

```
import eventlet.debug
eventlet.debug.hub_exceptions(False) 
```

# javascript - 不知道如何在不需要时修复弹出消息打开

> ID：13918514
> 
> 赞同：0
> 
> 时间：2012-12-17T16:59:19.343
> 
> 标签：javascript, html, login

我一直在尝试使用 HTML 和 Javascript 进行网站登录，除了一个问题外它工作正常。首次登录信息登录，但弹出else消息显示！我该如何解决？

```
function Login(form) 
{
    username = new Array("alex364981");
    password = new Array("Codylewis");
    page = "user2" + ".html";

    if (form.username.value == username[0] && form.password.value == password[0]
            || form.username.value == username[1] && form.password.value == password[1]
            || form.username.value == username[2] && form.password.value == password[2]
            || form.username.value == username[3] && form.password.value == password[3]
            || form.username.value == username[4] && form.password.value == password[4]
            || form.username.value == username[5] && form.password.value == password[5]
            || form.username.value == username[6] && form.password.value == password[6]
            || form.username.value == username[7] && form.password.value == password[7]
            || form.username.value == username[8] && form.password.value == password[8]
            || form.username.value == username[9] && form.password.value == password[9])
    {
        self.location.href = page;
    }

    username = new Array("test");
    password = new Array("this");
    page = "user1" + ".html";

    if (form.username.value == username[0] && form.password.value == password[0]
            || form.username.value == username[1] && form.password.value == password[1]
            || form.username.value == username[2] && form.password.value == password[2]
            || form.username.value == username[3] && form.password.value == password[3]
            || form.username.value == username[4] && form.password.value == password[4]
            || form.username.value == username[5] && form.password.value == password[5]
            || form.username.value == username[6] && form.password.value == password[6]
            || form.username.value == username[7] && form.password.value == password[7]
            || form.username.value == username[8] && form.password.value == password[8]
            || form.username.value == username[9] && form.password.value == password[9])
    {
        self.location.href = page;
    }
    else
    {
        alert("Either the Username or Password is Wrong.\nPlease try again.");
        form.username.focus();
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:12:19.840

else 块只适用于第二个 if 检查

```
username = new Array("test");
password = new Array("this");
page = "user1" + ".html";

if (form.username.value == username[0] && form.password.value == password[0] || form.username.value == username[1] && form.password.value == password[1] || form.username.value == username[2] && form.password.value == password[2] || form.username.value == username[3] && form.password.value == password[3] || form.username.value == username[4] && form.password.value == password[4] || form.username.value == username[5] && form.password.value == password[5] || form.username.value == username[6] && form.password.value == password[6] || form.username.value == username[7] && form.password.value == password[7] || form.username.value == username[8] && form.password.value == password[8] || form.username.value == username[9] && form.password.value == password[9])

{
    self.location.href = page;
}
else {
    alert("Either the Username or Password is Wrong.\nPlease try again.");
    form.username.focus();
} 
```

您应该从第一个 if 块中成功登录。

您应该使用一个标志来检查是否有任何登录成功，并使用该标志来显示错误消息。

试试这个：

```
function Login(form) 
{
    flag = false;

    username = new Array("alex364981");
    password = new Array("Codylewis");
    page = "user2" + ".html";

    if (form.username.value == username[0] && form.password.value == password[0] || form.username.value == username[1] && form.password.value == password[1] || form.username.value == username[2] && form.password.value == password[2] ||  form.username.value == username[3] && form.password.value == password[3] || form.username.value == username[4] && form.password.value == password[4] || form.username.value == username[5] && form.password.value == password[5] || form.username.value == username[6] && form.password.value == password[6] || form.username.value == username[7] && form.password.value == password[7] || form.username.value == username[8] && form.password.value == password[8] || form.username.value == username[9] && form.password.value == password[9])

    {
        self.location.href = page;
        flag = true;
    }

    username = new Array("test");
    password = new Array("this");
    page = "user1" + ".html";

    if (form.username.value == username[0] && form.password.value == password[0] || form.username.value == username[1] && form.password.value == password[1] || form.username.value == username[2] && form.password.value == password[2] || form.username.value == username[3] && form.password.value == password[3] || form.username.value == username[4] && form.password.value == password[4] || form.username.value == username[5] && form.password.value == password[5] || form.username.value == username[6] && form.password.value == password[6] || form.username.value == username[7] && form.password.value == password[7] || form.username.value == username[8] && form.password.value == password[8] || form.username.value == username[9] && form.password.value == password[9])

    {
        self.location.href = page;
        flag = true;
    }

    if(!flag) {
        alert("Either the Username or Password is Wrong.\nPlease try again.");
        form.username.focus();
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:16:02.807

试试这个。循环遍历你的数组应该清理代码和可读性。这也将使以后更容易扩展。

```
function Login(form) 
{
    username = new Array("alex364981");
    password = new Array("Codylewis");
    page = "user2.html";

    var numOfUsers=10;
    for(var i=0;i<numOfUsers;i++)
    {
        if (form.username.value == username[i] && form.password.value == password[i])
        {
            self.location.href = page;
            return true;
        }
    }
    //All possibilities exhausted, Show error.
    alert("Either the Username or Password is wrong.\nPlease try again.");
    return false;
} 
```

希望这可以帮助。

另请注意，用户可以查看您的 html 的源代码并直接从该函数中获取用户名和密码。最好将其隐藏在 php 脚本或数据库中。

# authentication - 为什么我不能使用 IP 地址连接到 SQL Server，但可以使用服务器名称？

> ID：13918522
> 
> 赞同：1
> 
> 时间：2012-12-17T16:59:43.407
> 
> 标签：authentication, amazon-web-services, sql-server-2008-r2, sql-server-2008

我有一台托管在亚马逊云（EC2、AWS）中的服务器，我安装了 SQL Server。通过服务器上的 SSMS，我可以使用 Amazon 服务器名称和 SQL Server 实例连接到服务器实例。但是，当我使用 IP 地址时，我无法连接。

我选中了*允许远程连接到服务器。*

同样，我无法远程连接到 SQL Server 实例。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:28:30.113

确保您已将端口 1433 启用到相应安全组中的特定公共 IP 地址。

您可能还必须更新 Windows 防火墙配置以允许服务接受连接。

杰伦

# ajax - Primefaces/jsf 中的条件更新

> ID：13918523
> 
> 赞同：7
> 
> 时间：2012-12-17T16:59:53.127
> 
> 标签：ajax, jsf, primefaces

首先，为了不产生误解，虽然这和[PrimeFaces:conditional update on validation](https://stackoverflow.com/questions/9638290/primefaces-conditional-update-on-validation)是同一个问题，但我又问了一遍，因为这个**问题的答案对我来说是不可接受的**，因为虽然它可能已经给出了原来的答案发布他们所要求的解决方法，它并不能真正回答问题，而且这种解决方法对我不起作用。

所以，这是我的问题：如何根据提交的结果有条件地更新 primefaces 组件？

我有一个组件，在任何情况下都不能更新，除非验证成功并且后端代码已成功执行。（即如果验证成功但后端出现 SQL 异常，则组件仍不应更新）。

为什么我总是不能更新？如果逻辑不成功，它将被更新为单击提交按钮之前的状态。**因为我做不到。**这是验证码组件。如果您通过 ajax 更新它，它就会消失，故事结束。Primefaces 开了一张票，他们关闭了它，因为不会修复，因为 Flash 组件不应该用 ajax 更新。

因此，当我提交表单时，除非逻辑成功，否则我需要单独留下验证码。如果逻辑成功，我需要确保验证码从屏幕上消失。最简单、最干净的方法是什么？

对不起，如果这是一个 n00b 问题。我对 Primefaces 和 JSF 真的很陌生。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T17:08:16.920

```
RequestContext.getCurrentInstance().update("clientId") 
```

帮助有条件的更新。

对于recaptcha尝试

```
RequestContext.getCurrentInstance().execute("Recaptcha.destroy()"); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-14T13:56:14.287

您可以结合使用 JavaScript 和 RemoteCommand：

```
<p:commandLink action="#{bean.doIt()}" process="@form" update="@none" oncomplete="if(!args.validationFailed){updateMyImportantUI();}" />

<p:remoteCommand name="updateMyImportantUI" process="@this" update=":myImportantID" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T17:12:19.453

您可以在支持 bean 上使用一个变量，并在 xhtml 部分使用它。
像这样：

```
update="#{backingMB.updateString}" 
```

所以，在条件之后你可以把值放在 上`updateString`，但是当你在 上定义它时`backingMB`，你需要把它写成：

```
String updateString=""; // this will be id of the component to be updated 
```

这样你就不会得到[NullPointerException](http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html)。

# c# - 迷宫游戏几个小 问题

> ID：13918527
> 
> 赞同：1
> 
> 时间：2012-12-17T16:59:58.220
> 
> 标签：c#

代码现在更新，只剩下两个问题，直到我很高兴我已经完成了它。

当玩家撞到墙时，计数器会以每次击中 2 条生命值下降。

当游戏开始时我的声音（beep.wav）应该只在玩家撞墙时发出，每次我开始游戏时都会发出声音并且应该在整个游戏中播放的声音（onestop.wav）没有播放一点也不。

```
public partial class Form1 : Form       
{
            // This SoundPlayer plays a song when the game begins.
    System.Media.SoundPlayer onestop = new System.Media.SoundPlayer(@"C:\Users\kC\Favorites\Desktop\Kev stuff\Projects\MazeGame\onestop.wav");

    // This SoundPlayer plays a sound whenever the player hits a wall.
    System.Media.SoundPlayer beepSound = new System.Media.SoundPlayer(@"C:\Users\kC\Favorites\Desktop\Kev stuff\Projects\MazeGame\beep.wav");

    // This SoundPlayer plays a sound when the player finishes the game.
    System.Media.SoundPlayer clapSound = new System.Media.SoundPlayer(@"C:\Users\kC\Favorites\Desktop\Kev stuff\Projects\MazeGame\winningApplause.wav");

    public Form1()
    {
        InitializeComponent();
        timer1.Interval = (1000) * (1);
        timer1.Enabled = true;
        timer1.Start();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        begin();

    }

    private void begin()
    {
        onestop.Play();
        livesTextBox.Text = lives.ToString();
        Point startingPoint = panel1.Location;
        startingPoint.Offset(10, 10);
        Cursor.Position = PointToScreen(startingPoint);
    }

    int lives = 5;

    private void MoveToStart()
    {

        if ( lives > 0)
        {
            lives--;
        }
        if (lives == 0)
        {
            MessageBox.Show("You Lose!!");
            Close();
        }

        else if (lives < 0)
        {
            MessageBox.Show("You Lose!!");
            Close();
        }
    }

    private void wall_MouseEnter(object sender, EventArgs e)
    {
        // When the mouse pointer hits a wall or enters the panel,
        // call the MoveToStart() method.
        beepSound.Play();
        MoveToStart();

        lives--;
        livesTextBox.Text = lives.ToString();
    }

    private void finishLabel_MouseEnter(object sender, EventArgs e)
    {
        // Play a sound, show a congratulatory MessageBox, then close the form.
        clapSound.Play();
        MessageBox.Show("Congratulations! You've beaten the maze!");
        Close();
    }

    int gameElapsed = 0;

    private void timer1_Tick(object sender, EventArgs e)
    {
        gameElapsed++;
        textBox1.Text = "" + gameElapsed.ToString();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:11:15.140

您没有很清楚地发布代码，但我会尽力提供帮助。

不确定您的声音问题。但是：要“调用你的计时器”，我想你想在文本框中输入一个数字？你已经成功了一半。该`Timer`对象只是每秒调用一次滴答事件，因此您需要执行显示部分。

将文本框放在表单上，​​假设它被称为`textBox1`.

放在`begin()`方法之前：

```
Stopwatch stopWatch = new Stopwatch(); 
```

放在`begin()`方法里面

```
stopWatch.Start(); 
```

方法内部`timer1_Tick`：

```
TimeSpan ts = stopWatch.Elapsed;
textBox1.Text = String.Format("{0:00}:{1:00}", ts.Minutes, ts.Seconds); 
```

对于您的“生活”位，您需要在`begin()`方法之前放置，

```
int lives = 0; 
```

里面`begin()`，放

```
int lives = 5;
livesTextBox.Text = lives.toString(); 
```

在里面`wall_MouseEnter()`，放

```
lives--;
livesTextBox.Text = lives.toString(); 
```

（假设你`livesTextBox`在表格上画了一个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:17:42.387

只需在您的表单上创建一个间隔为 1000 的计时器并使其启用，然后将 game_elpased 定义为整数作为类中的私有字段，并在 timer_tick 中写入：

```
void Timer1_Tick(object Sender,EventArgs e)
{
  game_elapsed++;
  textBox1.Text = "Elapsed Seconds : " + game_elapsed.ToString();
} 
```

对于 live times ，当播放器失败时，您需要像 live 一样控制公共变量：

```
if(fails && lives>0){
  lives--;
}
else if (lives<0)
{
  MessageBox.Show("You are a looser ...");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:19:11.453

生命可以是玩家类的属性。

```
public class Player
{
    int lives = 5;

    public bool Kill()
    {
        this.lives--;
        return this.lives <= 0;
    }

    public void run()
    {
        Player player = new Player();

        // do stuff

        // Check whether the player needs to die
        if ("player fails".Contains("fail"))
        {
            if (player.Kill())
            {
                // restart level.
            }
            else
            {
                // Game over.
            }
        }
    }
} 
```

# asp.net - 防御 muieblackcat BOT

> ID：13918528
> 
> 赞同：5
> 
> 时间：2012-12-17T17:00:01.293
> 
> 标签：asp.net, iis, bots

今天早上我注意到我们的 IIS 日志中有一些奇怪的记录来自：

*   193.169.40.39 - 与 PHP 页面相关联 (2012-12-15 05:34:24 EST)

*   121.14.73.8 - 与 PHP 页面相关联 (2012-12-15 23:11:42 EST)

*   167.206.74.237 - 与 wordpress 页面相关联 (2012-12-16 22:38:37 EST)

*   178.15.152.69 - 与 wordpress 页面相关联 (2012-12-17 12:11:00 EST)

这是令人震惊的，因为**我们不**托管 PHP / wordpress 页面。

谷歌搜索会让我相信 muieblackcat 是一个试图利用 PHP 漏洞的网络机器人。

**因为我们没有托管 PHP 环境，所以我安全吗？** 我曾想过阻止 IP，但机器人更可能使用某种代理来完成它的肮脏工作。

**word-press PHP 文件请求是否很可能是同一个机器人？**也许遇到过 muieblackcat 的人会认出 word-press 请求。请参阅下面的 IIS 记录。

关于 ASP.NET IIS 7 托管，是否有任何防御机制/预防措施？

**例子：**

奇怪的 PHP 条目

2012-12-15 05:34:24 /muieblackcat - 193.169.40.39 - 1424 140 224
2012-12-15 05:34:24 /index.php - 193.169.40.39 - 1424 138 5
2012-12-15 05:34 :24 /admin/index.php - 193.169.40.39 - 1424 144 5
2012-12-15 05:34:24 /admin/pma/index.php - 193.169.40.39 - 1424 148 3
2012-12-15 05:34 ：24 /admin/phpmyadmin/index.php - 193.169.40.39 - 1424 155 4。. .

奇怪的 WP 条目

2012-12-16 22:38:37 /wp-login.php - 167.206.74.237 - 1405 219 281
2012-12-16 22:38:37 /blog/wp-login.php - 167.206.74.237 - 1405 224 60
2012-12-16 22:38:37 /wordpress/wp-login.php - 167.206.74.237 - 1405 229 60

2012-12-16 22:38:37 /wp/wp-login.php - 167.206.74.237 - 1405 222 59

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T17:11:11.213

看起来这只猫正在尝试猜测 WP 和 PhpMyAdmin 的位置，如果它得到响应，我猜下一步是检查它是否可以利用该漏洞。

基本上，它就像端口扫描一样工作。如果你没有安装 WP 和 PhpMyAdmin，你应该没问题。

通常，这类扫描仪会扫描一次，如果没有发现对他们有用的东西，他们就会离开。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T17:22:35.623

**是**的，你很安全。我的服务器一直看到这样的事情，如果你没有安装这些应用程序，它们是无害的。

# css - “致命错误：检测到无限循环”通过lessphp

> ID：13918531
> 
> 赞同：2
> 
> 时间：2012-12-17T17:00:32.867
> 
> 标签：css, less, lessphp

我试图通过lessphp将此.less代码编译为.css并得到这个错误：

```
Fatal Error:
====================
infinite loop detected: @pos-x: failed at `background-position: @pos-x 0; }` line: 3 
```

这是我的代码。

```
@pos-x : 0;
@w : 30px;
.a { background-position: @pos-x 0; }

@pos-x: @pos-x - @w;
.b { background-position: @pos-x 0; } 
```

它出什么问题了？我可以在 LESS 中使用变量覆盖吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:42:04.780

`@pos-x: @pos-x - @w;`不允许。[文档指出](http://lesscss.org/#docs)，“请注意，LESS 中的变量实际上是‘常量’，因为它们只能定义一次。”

我相信在这种情况下 LESS 发生的事情本质上是这样的：

```
@pos-x: 0;
@pos-x: @pos-x - 30px; puts it into this loop...
        @pos-x = -30px - 30px ...
        @pox-x = -60px - 30px ...
        @pox-x = -90px - 30px ... etc. 
```

因此，它不断地重新计算`@pos-x`试图达成一个永远无法达成的最终解决方案。每次重新分配时，它都会尝试根据该新分配重新评估。

所以做这样的事情：

```
@pos1-x : 0;
@w : 30px;
.a { background-position: @pos1-x 0; }

@pos2-x: @pos1-x - @w;
.b { background-position: @pos2-x 0; } 
```

# scala - 使用拦截将java异常代码转换为scala时出现编译器错误：''前向引用扩展了值异常的定义'

> ID：13918532
> 
> 赞同：1
> 
> 时间：2012-12-17T17:00:33.237
> 
> 标签：scala, scalatest

如何使用拦截将异常捕获代码从 java 转换为 scala？

从阅读[http://www.scalatest.org/getting_started_with_fun_suite](http://www.scalatest.org/getting_started_with_fun_suite)看来，似乎建议在捕获异常时使用拦截。在下面的异常捕获代码中，我需要访问 Exception 类型以便在 assert 中检查其类型：

```
catch {
          case me : MyException => {
            assert(me.getDetail.getClass() === classOf[GenericException]);
          }
        } 
```

使用拦截似乎不可能，因为下面的代码会导致编译器错误：“前向引用扩展了值异常的定义”

这是转换为 scala 的 catch 块：

```
 val exception = intercept[MyException] {
assert(exception.getDetail.getClass() === classOf[GenericException]);   
    } 
```

在线发生错误

```
assert(exception.getDetail.getClass() === classOf[GenericException]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:33:44.337

那么你的定义`exception`是循环的。你想要的是：

```
val exception = intercept[MyException] {
   <your exception-throwing code here>
}

assert(exception.getDetail.getClass() === classOf[GenericException]) 
```

# php - 调用函数并运行它

> ID：13918533
> 
> 赞同：1
> 
> 时间：2012-12-17T17:00:34.740
> 
> 标签：php, javascript, jquery

我对对象和 OOP 很陌生。我真的不知道如何解释它，但我会尝试。

所以我试图通过 JS 读取 JSON，JSON 是从 PHP 传递的。如果所有信息都在同一个 html 页面上，这将很容易，但我正在尝试一些我也是新的东西。

所以让我展示我的代码......

首先是 app.js 中的 JS

```
 var Donors = function(){
    var api = this.list;

    $(document).ready(function(){
      $.getJSON(api, function(data){
        var donorObj = data.payload;
        $.each(donorObj, function(i, donor){
          //console.log(donor.ign);
        });
      });
    });

   } 
```

我*想要*这部分做的是从我给它的 JSON 中读取，并在文档准备好时 console.log 每个名称（或donor.ign）。

在 html 页面上，或 header.php

```
<script>
$(function(){
    var list = <?php cbProxy(); ?>;
    var Dons = new Donors();
    Dons.list = list;
    });
</script> 
```

列表中的数据是下面的 JSON。您已经知道其余部分的作用，它只是将 JSON 传递给`Donors()`函数。

JSON 示例：

```
{
"code": 0,
"payload": [
{
"time": 1349661897,
"packages": [
"49381"
],
"ign": "Notch",
"price": "15.99",
"currency": "USD"
} 
```

我习惯于制作函数并在同一页面或文件上调用它，这是我第一次做这种函数。我怎样才能让函数与我发送的数据一起运行，所以`console.log()`每个名字都是如此？

我确实尝试过

```
console.log(Donors()); 
```

其中只记录了`undefined`.

新代码：

应用程序.js

```
 var Donors = function(api){

    this.list = api;

    $(document).ready(function(){
      $.getJSON(this.list, function(data){
        var donorObj = data.payload;
        $.each(donorObj, function(i, donor){
          console.log(donor.ign);
        });
      });
    });

   } 
```

index.php/内联脚本

```
<script>
$(function(){
    var list = <?php cbProxy(); ?>;
    var dons = new Donors(list);
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:12:26.813

如果你执行

```
var Dons = new Donors();
Dons.list = list; 
```

然后在将某些内容分配给属性*之前*调用构造函数。`list`这意味着您的`api`变量将是`undefined`，只要您没有在`Donors`继承的原型对象上定义一个。相反，将列表作为参数传递给构造函数：

```
function Donors(api) {
    this.list = api;
    // do something
}
var dons = new Donors(list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:11:45.613

我认为应该是这样的：

```
$.getJSON(api, function(data){
    $.each(data.payload, function(i, donor){
       console.log(donor.ign);
    });
}); 
```

试试这个，看看是否有效。

# c# - Linq C#中的多表动态连接

> ID：13918534
> 
> 赞同：4
> 
> 时间：2012-12-17T17:00:37.340
> 
> 标签：c#, sql, linq

我有 3 个数据表`a`：`b`; 和`c`。在这我需要使用**LINQ**动态地编写 Join Query 。

客户给定的选择列和条件列也在运行时给定客户。

所以我需要动态创建查询。请检查以下示例。因为我不知道他们想要哪个表以及哪个列

例如

```
Select a.c1,a.c2,b.c1,b.c2 From a Left Join b on a.c1=b.c1

Select c.c1,c.c2,a.c1,a.c2 From c Left Join a on c.c3=a.c1

Select a.c1,a.c2,b.c1,b.c2,c.c1,c.c2 From a Left Join b on a.c2=b.c2 Left join c on c.c1=a.c1 
```

就像我需要创建不同的查询集。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:02:10.773

在动态 where 子句的情况下，您可以使用任一`System.Linq.Dynamic`（ ScottGu[的博客文章](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)和[nuget ）：](https://www.nuget.org/packages/System.Linq.Dynamic)

```
var results = (from fruit in fruits 
    join car in cars on fruit.Id equals car.Id
    select new { fruit, car })
    .AsQueryable()
    .Where("fruit.ColA != car.ColA")
    .Where("fruit.ColB == car.ColB"); 
```

或者使用@joe-albahari 编写的[扩展`PredicateBuilder`](http://www.albahari.com/nutshell/predicatebuilder.aspx)动态构建表达式。例如：

```
var predicate = 
    PredicateBuilder
        .True<Tuple<Product, Product>>()
        .And(t => t.Item1.ColA != t.Item2.ColA)
        .And(t => t.Item1.ColB == t.Item2.ColB)
        .Compile();    

(from fruit in fruits 
    join car in cars on fruit.Id equals car.Id
    select Tuple.Create(fruit, car))
    .Where(predicate)
    .Dump(); 
```

ps：完整代码可在[gisthub 获得](https://gist.github.com/4259463)

# c# - 指向数组元素

> ID：13918535
> 
> 赞同：2
> 
> 时间：2012-12-17T17:00:36.823
> 
> 标签：c#, arrays, pointers

我想要实现的是说我有一个数组，我希望能够通过指向它来修改整个代码中的特定数组元素。

例如在 C++ 中我可以做到这一点

```
int main(){
 int arr [5]= {1,2,3,4,5};
 int *c = &arr[3];
 cout << arr[3] <<endl;
 *c = 0;
 cout << arr[3]<<endl;
} 
```

我做了一些谷歌搜索，似乎有办法通过“不安全”来做到这一点，但我真的不想走那条路。

我想我可以创建一个变量来存储索引，但实际上我正在处理稍微复杂的问题（列表中的列表。所以有两个索引变量似乎增加了代码的复杂性。）

C# 有一个数据绑定类，所以我目前正在做的是将数组元素绑定到一个文本框（我已经隐藏）并在我想修改特定数组元素时修改该文本框，但这也不是一个好的解决方案（因为我有一个文本框没有用于其预期目的 - 有点误导）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:20:17.287

您希望使用的外观的 AC# 示例会有所帮助。如果我明白你在问什么，像这样的简单课程可能会做到这一点。不过，您所要求的似乎不是一个好主意。如果您展示了您需要的更大范围，那么有人可能会指出一个更好的设计，您根本不需要这种功能。

```
public class ListElement<T> {
    private IList<T> list;
    private int index;
    public ListElement(IList<T> list, int index) {
        this.list = list;
        this.index = index;
    }
    public T Value {
        get {
            return list[index];
        }
        set {
            list[index] = value;
        }
    }
} 
```

使用这个看起来像

```
int[] arr = new int[] {1,2,3,4,5};
ListElement<int> third = new ListElement<int>(arr, 2);
Console.WriteLine(third.Value);
third.Value = 0;
Console.WriteLine(third.Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:16:14.563

我不确定这是否完全适合，但问题是这些指针在 c# 中是不可能的。

`LinkedList<T>` 如果您有更复杂的列表，如果您想更改列表中的元素，可以查看它提供的一种高效方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:21:25.833

我在 C# 中想出了一个解决方案。当然，这是即兴的，所以它可能不适用于所有情况，但我确实根据您的情况对其进行了简要测试。

```
class Wrapper<T>
{
    private T[] array;
    private T item;
    private int index;
    public T Item { get { return item; } set { item = value;
        array[Index] = value;
    } }

    public int Index
    {
        get { return index; }
        set
        {
            index = value;
            Item = array[value];

        }    
    }

    public Wrapper(T[] arr)
    {
        array = arr;
    }

} 
```

然后，您可以像这样使用该类：

```
 class Program
{
    static void Main(string[] args)
    {
        int[] i = {1, 2, 3, 4, 5};
        i.ToList().ForEach(x => Console.WriteLine(x));
        Wrapper<int> w = new Wrapper<int>(i);
        w.Index = 2;
        w.Item = 5;

        i.ToList().ForEach(x => Console.WriteLine(x));
        Console.ReadLine();
    }
} 
```

这将给出输出：1234512545

它不像 C++ 中的解决方案那样漂亮，但它会按照您的意愿工作，并提供一个更“自动”的引用数组的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:22:15.480

我会将您的数组包装在`Objects`. 在 C# 中，需要指针操作的东西通常最好用对象来完成。

优点是对象允许更清晰的命名和访问更复杂的数据结构。你是对的，传递索引集并不理想——排序和索引很容易混淆。事实上，我认为是你所在位置的人决定面向对象编程是一个好主意！

所以你有`class MyArray { }`，并且可以像使用指针一样使用“对象引用”，而且你可以创建`MyArray[]`.

# ms-access - 如何在 Acess 2010 中制作每个月的案例类型计数报告

> ID：13918536
> 
> 赞同：1
> 
> 时间：2012-12-17T17:00:40.467
> 
> 标签：ms-access, report, reporting, ms-access-2010

我有一个数据库可以访问，每条记录都有一个日期和每条记录的是/否类型列，显示该记录属于哪个类别。我想创建一个报告，通过提示将日期范围作为参数来显示每个月的案例类型。我已经完成了提示部分，但我不确定查询应该如何显示该日期范围内每个月的值。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:47:35.233

在不知道表的详细信息的情况下，您可以按年份和月份分组，或者作为单独的列或使用如下组合表达式：

```
Year(Orders.OrderDate) & '-' & Right('0' & Month(Orders.OrderDate), 2) 
```

如果您需要更具体的帮助，请举例说明您拥有什么以及想要完成什么。

**编辑：**

使用附加信息，如果我理解正确，您会得到以下信息：

```
Case    Date      Threat    Stalking    Bullying    ...
1234    24/12/12  Yes       No          No
... 
```

你想要这样的东西：

```
Date      Threats   Stalking    Bullying
12/12     3         2           10 
```

然后，您可以像这样做更多/更少：

```
Select Year(Cases.Date) & '/' & Right('0' & Month(Cases.Date), 2) As Date, ThreatQuery.Cases As Threats, StalkingQuery.Cases, ...
From Cases, (Select Count(*) From Cases Where Cases.Threats == 'Yes' And Cases.Date Between @Param And @Param2) ThreatQuery, (Select Count(*)...) StalkingQuery, ...
Where Cases.Date Between @Param And @Param2 
```

请注意，此查询使用多个子查询（每种情况一个），因此您可能希望首先确保子查询是正确的，为此，您可以只检查一个，因为它们都是相同的，仅根据案件的类型。

# jquery - 点击加载插件RequireJS

> ID：13918538
> 
> 赞同：1
> 
> 时间：2012-12-17T17:00:43.570
> 
> 标签：jquery, requirejs

RequireJS 的新手。有什么办法可以更好地组织这个：

```
require(["jquery"], function($) {
    $(function() {
        $('#id').live('click',function(){
            require(["mainplugin","otherplugin","thirdplugin"], function(){
                $('#id').pluginName();
            });

        });
    });
}); 
```

其余插件应仅在单击 el 时加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:05:44.577

您不需要第一个`$(function() ...`包装器，因为代码将在 jquery 加载后立即执行。

```
require(["jquery"], function($) {
        $('#id').live('click',function(){
            require(["mainplugin","otherplugin","thirdplugin"], function(){
                $('#id').pluginName();
            });
        });
}); 
```

# c++ - 如何在 Visual Studio 中禁用微软对 tchar.h 的装饰？

> ID：13918539
> 
> 赞同：2
> 
> 时间：2012-12-17T17:00:42.680
> 
> 标签：c++, visual-studio, tchar

默认情况下，Microsoft 的 Visual Studio 使用`<tchar.h>`并定义`main`为`int _tmain(int argc, _TCHAR* argv[])`. 这可能很有用，但并非总是如此。

如何在默认的新项目中禁用此功能？

**更新**

我想用简单`main`的s创建空项目...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:35:56.363

要创建一个空项目并使用普通的 old `main`：

1.  在 Visual Studio 中，选择文件 -> 新建 -> 项目...
2.  选择控制台应用程序并为其命名。
3.  在向导中，选择应用程序设置。
4.  选择空项目。
5.  单击完成。
6.  将 .cpp 文件添加到项目中。
7.  在新的 .cpp 文件中，实现`main`.

例如：

```
#include <iomanip>    
#include <iostream>

int main(int cArgs, char **ppszArgs) {
  std::cout << "Hello, World!" << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:28:00.377

这是来自 MSDN 的操作指南[。](http://msdn.microsoft.com/en-us/library/ms185319.aspx)

# java - Android应用程序中Spring RestTemplate的奇怪问题

> ID：13918541
> 
> 赞同：4
> 
> 时间：2012-12-17T17:00:52.743
> 
> 标签：java, android, spring, rest, post

我开始在我的 android 客户端应用程序中使用 Spring Framework 的 RESTful api。但是当我尝试通过 postForObject/postForEntity 方法执行 HTTP 请求时遇到了问题。这是我的代码：

```
public String _URL = "https://someservice/mobile/login";
public void  BeginAuthorization(View view)
{     
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setContentType(MediaType.APPLICATION_JSON);
         HttpEntity<String> _entity = new HttpEntity<String>(requestHeaders);
        RestTemplate templ = new RestTemplate();
        templ.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
        templ.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
        ResponseEntity<String> _response = templ.postForEntity(_URL,_entity,String.class); //HERE APP CRASHES
        String _body = _response.getBody(); 
```

那么问题是我做错了什么？如何解决这个问题？可以有其他方法吗？

我真的需要帮助。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:26:44.637

我认为您的目标是您的应用程序 Android 4.0-4.2。然后您必须在后台执行所有操作，而不是主（UI）线程。如我所见，您正在执行授权过程。这是一个简短的操作，因此您最好使用`AsyncTask`它。以下是关于 androidDevelopers 的操作方法：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

您应该以这种方式覆盖 doInBackground(Params...) ：

```
class LoginTask extends AsyncTask<String,Void,Void>
{
    @Override
    protected Void doInBackground(String... params) {
        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setContentType(MediaType.APPLICATION_JSON); 
        HttpEntity<String> _entity = new HttpEntity<String>(requestHeaders);
        RestTemplate templ = new RestTemplate();
        templ.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
        templ.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
        ResponseEntity<String> _response = templ.postForEntity(params[0],_entity,null) //null here in order there wasn't http converter errors because response type String and [text/html] for JSON are not compatible;
        String _body =  _response.getBody();
        return null;
    }
} 
```

然后在您的 BeginAuthorization（查看视图）中调用它：

```
new LoginTask().execute(URL); 
```

PS 另外，如果您编写 Java，请使用正确的命名约定。而不是这个，`_response`请写`response`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:11:02.633

从[文档中](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)：

> **NetworkOnMainThreadException**
> 
> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

您应该创建一个线程并从那里进行网络连接。[这](http://www.vogella.com/articles/AndroidNetworking/article.html)可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:05:24.420

从 android>= 4.0 网络调用必须经过 asynctack

# r - 在 R 中使用 Zoo 读取日期时出错

> ID：13918545
> 
> 赞同：0
> 
> 时间：2012-12-17T17:00:56.860
> 
> 标签：r, zoo

我正在尝试使用 Zoo 包来阅读日常观察，其中一些不是连续的。前三行是：

```
Date         Year   ID       DWT    Build CargoSize LoadArea DischargeArea Price Speed 
25-May-07    2007 8004351   294739  1982   262000       AG       ECI        79   14.5                
11-Feb-08    2008 8004363   294739  1983   261000       AG       ECI        84   14.5                
11-Feb-08    2008 8003459   294739  1984   265000       WAF      SPOR       89   14.5 
```

我收到以下错误：

```
z <- read.zoo("multiplier_test.csv", sep = ";", header = TRUE, format="%d-%b-%y")
Warning message:
In zoo(rval3, ix) :
some methods for “zoo” objects do not work if the index entries in ‘order.by’ are not        unique 
```

目标是对其中一些变量（包括日期）回归价格，我想在其中拟合多项式（使用带有 bs 函数的部分线性模型）。我相信发生错误是因为有多个相同的日期。这代表一个单独的交易；我想捕捉这些观察结果之间的差异，所以不想聚合并失去自由度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:56:05.510

发生此错误是因为您尝试将超过**1000 个**字符的字符串转换为日期。

# c# - C#遍历文件夹，直到找到正确的文件

> ID：13918550
> 
> 赞同：1
> 
> 时间：2012-12-17T17:01:29.180
> 
> 标签：c#, .net

我正在运行批处理来更新我的 sql 表。我正在使用 Windows 调度程序来运行批处理文件。每天的文件在不同的时间进入。有时它们会在我的预定时间之后进来，因此当文件夹中的预定任务之前没有文件时，批处理文件不会运行。我想创建 ac# 程序，它将在文件夹中循环，直到找到文件，然后移至批处理文件中的下一步。基本上我的目标是创建一个程序来查找那些特定的文件，一旦找到正确的文件，它就会开始更新。我是编程新手，需要一些指导。有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:08:28.737

[在此处](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)阅读有关`FileSystemWatcher`课程的信息

循环会消耗 100% 的 CPU

# objective-c - UIView 登录屏幕到标签栏逻辑

> ID：13918551
> 
> 赞同：2
> 
> 时间：2012-12-17T17:01:34.067
> 
> 标签：objective-c, ios, cocoa-touch

伙计们，

我遇到了一些导航逻辑问题。目前我有一个简单的两个标签标签栏应用程序。但我想在前面显示一个登录屏幕。所以这将是一个 UIView。

目前代码如下：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *viewController1 = [[roosterViewController alloc] initWithNibName:@"roosterViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

所以这推动了一个简单的tabcontroller。好吧，现在我想要一个登录屏幕。所以这将是一个简单`UIView`的推动标签栏控制器。但我似乎看不到如何做到这一点的逻辑。

我一直在尝试展示一个模态视图控制器，但问题是：标签栏将在后台加载。因为我需要用户名/密码信息才能在 tabbarview 上工作，所以这不起作用。

我的逻辑是：

委托 > 加载 loginViewController > 加载标签栏控制器

但是，然后我需要能够“注销”。所以我需要销毁标签栏控制器并显示登录屏幕。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:56:06.487

如前所述，登录为rootView，如果登录成功，则启用其他tabbarButtons，否则不要像这样启用它们。最初在视图加载时将bool设置为false，然后如果成功启用tabbar按钮，则不启用。

```
login = TRUE;

UITabBarItem *reportit = [[[[self tabBarController]tabBar]items] objectAtIndex:2];
[reportit setEnabled:TRUE];

else {

UITabBarItem *reportit = [[[[self tabBarController]tabBar]items] objectAtIndex:2];
[reportit setEnabled:FALSE]; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:45:53.760

你可以这样做：

您可以创建您的 AppDelegate 符合的协议。

```
@protocol Authenticator <NSObject>
@required
- (void)authenticateWithUsername:(NSString *)username andPassword:(NSString *)password;
- (bool)authenticated;
@optional
- (void)authenticationSuccess;
- (void)authenticationFailure; 
```

...

```
@interface AppDelegate : UIResponder <UIApplication, Authenticator>
@property (readonly, nonatomic, assign) bool loggedIn; 
```

...

```
@implementation AppDelegate
@synthesize loggedIn = _loggedIn;

- (void)authenticateWithUsername:(NSString *)username andPassword:(NSString *)password
{
   //if success
      _loggedIn = YES;
   //check if app responds to the optional authenticateSuccess method
   //call it if it does
   //else fail
      //do stuff
}

- (bool)authenticated
{
   if (_loggedIn != NULL) {
      return _loggedIn;
   }
   //do other stuff
} 
```

...

我对正确的objective-c约定和语法有点模糊，所以如果我有一些错误，请原谅我，但无论如何这是一些逻辑和伪代码可以解决。根据您的需要进行调整。

我希望这有帮助。

编辑：

我想我的答案有点未完成。在我看来，您问题的答案似乎与某种身份验证结构密切相关。如果您的应用程序与身份验证密切相关，那么为什么不通过身份验证结构控制其流程。我想这就是我的观点，并且由于所有这些都可以在您的应用程序委托中方便且容易地获得，您可以在任何您想要的地方调用这些方法，因此让您的身份验证逻辑决定例如显示哪个视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:04:51.080

我建议您将登录屏幕设置为 root。登录成功后，您只需将窗口的根目录更改为标签栏控制器，并带有漂亮的动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:30:50.437

我建议您像现在一样设置选项卡栏，但在 makeKeyAndVisible 之后立即实例化并呈现登录视图控制器，而不使用动画。

这样，一旦应用程序启动，用户就不会看到 tabBarController，而只会看到模态显示的登录屏幕。登录完成后，您只需关闭登录视图控制器并在其下方出现....*鼓起*标签栏控制器！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-13T01:13:53.363

扩展[Levi 的答案](https://stackoverflow.com/questions/13918551/uiview-login-screen-to-tabbar-logic/13918615#13918615)，这就是您连续切换根视图控制器的方式（带有动画）。只需添加此扩展名：

```
extension UIViewController 
{
    func transitionToRootViewController(viewController:UIViewController)
    {
        UIView.transitionWithView(self.view.window,
            duration: 0.3,
            options: UIViewAnimationOptions.TransitionCrossDissolve,
            animations: {
                window.rootViewController = viewController
            },
            completion: nil
        )
    }
} 
```

...到`UIViewController`类（这将使您的**所有**`transitionToRootViewController ()`视图控制器都可以使用该方法），并在退出视图控制器上调用它，传递进入视图控制器（您可能从一个单独的故事板实例化，谁知道...）作为参数。

 **（基本思想取自[这里](https://web.archive.org/web/20170529150920/http://jcavar.me:80/blog/2015/03/14/login-tabbar/)。我稍微简化了代码）

**但请注意：**我尝试使用此代码插入一个标签栏控制器，其选定的索引（标签）包含一个导航控制器。在过渡动画期间，导航控制器的导航栏“低于”状态栏（运营商、时钟、电池电量），并且只有在过渡动画完成后，它才会立即“跳”到它的位置，从而造成一个可怕的分散注意力（且未抛光）影响。

**我通过将以下代码添加**到嵌入在导航控制器中的子视图控制器来修复它：

```
override func viewWillAppear(animated: Bool)
{
    super.viewWillAppear(animated)

    self.navigationController?.navigationBar.layer.removeAllAnimations()
    // ^ THIS
} 
```

（此修复取自[此论坛](https://github.com/andreamazz/SlideOutNavigation/issues/55)。）

我还没有检查过，但是当您转换到导航控制器（或任何`UIViewController`碰巧附有导航栏的普通香草）时，无论它是否嵌入在标签栏控制器中，都可能会出现同样的问题。**

# objective-c - 核心数据和自反实体关系（一对一或一对多）

> ID：13918556
> 
> 赞同：1
> 
> 时间：2012-12-17T17:01:51.170
> 
> 标签：objective-c, ios, core-data

尝试建立实体关系但难以确定我需要的关系：

我有一个实体，人。Person 有两个关系，super_friend 和 sub-friend。每个实体可以有很多朋友（一个人实体），所以 sub_friend 是一对多的关系。我不确定 super_friend 是什么；一对一或一对多的关系。

示例：Bill 是 Fred 和 Ted 的朋友。爱丽丝也是弗雷德的朋友。

这是否意味着 Fred 的 super_friend 需要对多？

编辑：

实体 Person Bill 的 sub_friend 指向 Fred 和 Ted。

实体 Person Alice 的 sub_friend 指向 Fred。

那么 Fred 的 super_friend 与实体 Bill 和实体 Alice 有什么关系呢？如果我拉出实体 Fred，它会只指向 Bill 或 Alice 吗？

我认为这只是回答了我的问题。我需要 Entity Fred 指向 Bill 和 Alice，对很多人来说。我希望每个实体都是唯一的。

如果我不关心 Fred 的超级朋友是谁怎么办？我只会通过 sub_friends 横向“向下”，永远不会通过 super_friend/s “备份”。

编辑2：

由于困惑，让我扩展我的需求：我需要对实体进行分类。

所以说我是比尔，我需要看看谁是比尔的所有 sub_friends（Fred 和 Ted）。我选择弗雷德。然后我需要找到 Fred 的所有 sub_friends 并选择一个，等等。我需要能够这样做 n 次。

仅具有朋友关系的解决方案不允许我将朋友分开。假设 Fred 认识 John 和 Stacy。当我查询 Fred 时，我不知道 John 是否在上面（super_friend 并且不会关心）或者 John 是否是 sub_friend（需要在表视图中显示以供选择）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:11:10.777

看看这张图：

![在此处输入图像描述](../Images/f8c4767e229b62a736e3e517153dde3b.png)

如您所见，Bill 有许多 sub_friend，而 Fred 是许多实体的 sub_friend。
所以这是一对多的关系。

**编辑**

我认为这很明显，但是 sub_friend 是 super_friend 的反向关系，因为如果 Bill 将 Fred 作为 sub_friend，那么 fred 将 Bill 作为 super_friend。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:57:10.707

正如我已经说过的，我不理解你的整个子/超级朋友的概念，设计当然取决于你。但是从常识的角度来看，如果比尔和弗雷德是朋友，那么弗雷德也是比尔的朋友，这难道不是合乎逻辑的吗？它们都是 Person 实体。所以在核心数据方面，我会有一个指向 Person 实体的朋友关系，并且是一对多的逆关系？

看看这个核心数据实体：![在此处输入图像描述](../Images/a11a70061c10c658d3d18559bed580b9.png)

在关系的检查器中，您会看到一对多的反比关系：

![在此处输入图像描述](../Images/cba83ce934c00c02bedeb33531a448b1.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:28:30.813

假设 sub_friend 和 super_friend 互为逆，那么 sub_friend 是 1:n 的关系，super_friend 是 1:1。如果你用 1 代替 n，因为你在看一个实体，那么你得到 1:1，一个实体只能引用一个超。

就属性而言，sub_friends 会变成 NSSet，而 super_friend 会变成 Person *。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:51:44.257

确实，您的评论刚刚回答了您自己的问题 =) 您刚刚说 Fred 有 2 个超级朋友。显然是多方面的关系。

进一步扩展：我在我的大脑中更改了您的关系名称，因为据我所知，sub_friend 仅表示直接朋友，而 super_friend 表示朋友的朋友。

许多关系自然适合，因为如果您只有一个朋友的朋友，那么没有任何意义。

# ios - iOS界面方向变化不一致

> ID：13918557
> 
> 赞同：0
> 
> 时间：2012-12-17T17:01:52.293
> 
> 标签：ios, uitableview, uiviewcontroller, uiinterfaceorientation, viewwillappear

为应用程序使用最新的 xCode 和 iOS 6 构建目标是 4.3 作为示例，我的第一个视图是 8 行的表格视图。用户按下第 8 行并推送第二个视图，该视图也是一个 tableView，但有 4 行。用户按下第 4 行，它会推送标准视图而不是 tableView。sharedManager 是我的单例，它为任一方向和检测到的设备（即 iPhone 或 iPad）指定表格视图的行高。该应用程序是一个通用应用程序。

在所有这些视图中，我在 viewWillAppear 中有以下内容

```
if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait || [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortraitUpsideDown) {

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

        //iPhone Portrait
        self.tableView.rowHeight = [sharedManager contactRowHeight];

    }

    else{

        //iPad Portrait
        self.tableView.rowHeight = [sharedManager contactRowHeightIpad];
    }
    }

    if( [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft || [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight){

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

        //iPhone Landscape
        self.tableView.rowHeight = [sharedManager contactRowHeightLandscape];

    }

    else{

        //iPad Landscape
        self.tableView.rowHeight = [sharedManager contactRowHeightLandscape_iPad];

    }
  }
 } 
```

我还在 willRotateToInterfaceOrientation 中处理相同的方向变化

```
 - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
  NSLog(@"willRotateToInterfaceOrientation: %d", toInterfaceOrientation);

  if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

    NSString *iPhoneOrientation;
    switch(toInterfaceOrientation) {
        case UIInterfaceOrientationLandscapeRight:
            iPhoneOrientation = @"UIInterfaceOrientationLandscapeRight";
            self.tableView.rowHeight = [sharedManager contactRowHeightLandscape];
            break;

        case UIInterfaceOrientationLandscapeLeft:
            iPhoneOrientation = @"UIInterfaceOrientationLandscapeLeft";
            self.tableView.rowHeight = [sharedManager contactRowHeightLandscape];
            break;

        case UIInterfaceOrientationPortrait:
            iPhoneOrientation = @"UIInterfaceOrientationPortrait";
            self.tableView.rowHeight = [sharedManager contactRowHeight];
            break;

        case UIInterfaceOrientationPortraitUpsideDown:
            iPhoneOrientation = @"UIInterfaceOrientationPortraitUpsideDown";
            self.tableView.rowHeight = [sharedManager contactRowHeight];
            break;

        default:
            iPhoneOrientation = @"Invalid orientation";
    }
    NSLog(@"willRotateToInterfaceOrientation: %@", iPhoneOrientation);

 }

 else{

    NSString *iPadOrientation;
    switch(toInterfaceOrientation) {
        case UIInterfaceOrientationLandscapeRight:
            iPadOrientation = @"UIInterfaceOrientationLandscapeRight";
            self.tableView.rowHeight = [sharedManager contactRowHeightLandscape_iPad];
            break;

        case UIInterfaceOrientationLandscapeLeft:
            iPadOrientation = @"UIInterfaceOrientationLandscapeLeft";
            self.tableView.rowHeight = [sharedManager contactRowHeightLandscape_iPad];
            break;

        case UIInterfaceOrientationPortrait:
            iPadOrientation = @"UIInterfaceOrientationPortrait";
            self.tableView.rowHeight = [sharedManager contactRowHeightIpad];
            break;

        case UIInterfaceOrientationPortraitUpsideDown:
            iPadOrientation = @"UIInterfaceOrientationPortraitUpsideDown";
            self.tableView.rowHeight = [sharedManager contactRowHeightIpad];
            break;

        default:
            iPadOrientation = @"Invalid orientation";
    }
    NSLog(@"willRotateToInterfaceOrientation: %@", iPadOrientation);

 }

} 
```

现在我遇到的问题是，当从视图 1 - 3 在任何方向上都可以正常工作，但是当我将视图 3 旋转到横向然后返回到视图 2 和 1 时，旋转代码在横向中不起作用并且甚至显示不正确尽管我为所有元素指定了正确的布局框架，正如从视图 1 到 3 所证明的那样？

此外，可能有助于确定问题的是我隐藏导航栏并在视图 2 和 3 中取消隐藏它的第一个视图。不确定这是否有帮助。

# wix - 如何使用 wix 安装全局 isapi 过滤器？(IIS 7.5)

> ID：13918561
> 
> 赞同：3
> 
> 时间：2012-12-17T17:01:59.913
> 
> 标签：wix, iis-7.5, isapi

我正在努力使用 wix 3.6.3303.1/4.0.12.0 将基于 com 的 isapi dll 全局安装到 iis 7.5 中。

我有以下 wix 配置（[此处为完整配置](https://gist.github.com/4319729)）：

```
<Fragment>
  <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
    <Component Id="IsapiDll" Guid="ADD-GUID-HERE">
      <File Id="isapidll" Name="isapi.dll" Source="isapi.dll" />
    </Component>
    <Component Id="IisFilter" Guid="ADD-GUID-HERE">
      <CreateFolder />
      <iis:WebFilter Id="IisFilter" Name="MyIsapi" Path="[INSTALLFOLDER]isapi.dll" LoadOrder="last" Description="MyIsapi" />
    </Component>
  </ComponentGroup>
</Fragment> 
```

在带有 IIS7.5 的 Windows 7 32 位上运行时，我的 msi 日志中收到以下错误：

```
WriteIIS7ConfigChanges:  Error 0x8007000e: Failed while finding IAppHostElement filter/@name=(null)
WriteIIS7ConfigChanges:  Error 0x8007000e: Failed to delete filter
WriteIIS7ConfigChanges:  Error 0x8000ffff: Unexpected IIS Config action specified for global filter
WriteIIS7ConfigChanges:  Error 0x8000ffff: Failed to configure IIS filter global.
WriteIIS7ConfigChanges:  Error 0x8000ffff: WriteIIS7ConfigChanges Failed. 
```

我担心这个问题是wix本身的一个错误。 [CreateGlobalFilter()](http://wix.codeplex.com/SourceControl/changeset/view/62deafa7b2a4#src/ca/serverca/scaexec/scaexecIIS7.cpp)在被赋值之前将 pwzFilterName 传递给 DeleteCollectionElement()。这稍后会导致[Iis7FindAppHostElementString()](http://wix.codeplex.com/SourceControl/changeset/view/62deafa7b2a4#src/dutil/iis7util.cpp)被调用，并带有一个空 wzAttributeValue 值，这似乎是错误的原因。

我当然可以进行疯狂的追逐，并很高兴被指向正确的方向......

更新：我现在玩过网站级别的安装，并且可以通过添加 WebSite 属性和元素来实现。[在这里配置](https://gist.github.com/4329216)

编辑：将路径属性更改为正确的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:43:41.033

`0x8007000e`表示内存不足，`(null)`消息中的 让我打赌这是自定义操作中的错误。如果您可以调试它，那是理想的。无论如何，在[http://wixtoolset.org/bugs](http://wixtoolset.org/bugs)输入一个错误可能是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T08:41:19.253

您忘记添加 WebSite 属性，此代码在 WIX3.7 中对我很有效：

```
<Component Id="IsapiFilterComponent" Guid="AE102719-D7DE-450A-A44C-29E7D9A36C0D" KeyPath="yes">
  <iis:WebFilter Id="MyWebDavFilter" Name="MyWebDavFilter" Path="[INSTALLFOLDER]MyWebDavFilter.dll" LoadOrder="last" Description="My Web Dav Filter" WebSite="DefaultWebSite" />
</Component> 
```

但是这个

```
<Component Id="IsapiFilterComponent" Guid="AE102719-D7DE-450A-A44C-29E7D9A36C0D" KeyPath="yes">
  <iis:WebFilter Id="MyWebDavFilter" Name="MyWebDavFilter" Path="INSTALLFOLDER]MyWebDavFilter.dll" LoadOrder="last" Description="My Web Dav Filter"/>
</Component> 
```

给出与您相同的错误。

当然，您必须将`<iis:WebSite>`元素添加到您的 wxs 文件中。

# .net - 如何为 .NET dll 创建 Hotpatchable Image？

> ID：13918569
> 
> 赞同：1
> 
> 时间：2012-12-17T17:02:21.787
> 
> 标签：.net, windows, hotpatching

我已经了解了使用[Windows Hotpatching](http://jpassing.com/2011/05/03/windows-hotpatching-a-walkthrough/)功能无需重新启动即可更新 Windows Server OS 的能力。MSDN 说可以通过一个[简单的 switch](http://msdn.microsoft.com/en-us/library/ms173507.aspx)为 VC++ 项目启用热补丁。

.NET 项目是否有类似的开关/设置？如果不是，是否可以使用外部工具进行操作？

# ios - 在哪里添加活动指示器视图？

> ID：13918573
> 
> 赞同：2
> 
> 时间：2012-12-17T17:02:31.850
> 
> 标签：ios, xcode, ios6, uiactivityindicatorview, activity-indicator

我有两个视图控制器 - 我将简单地称它们为 A 和 B 以帮助您轻松理解。

视图控制器有一个通过情节提要链接到 B 的按钮（未手动编码）。并且，B 视图控制器在 viewDidLoad 方法中从数据库服务器检索一堆 json 数据。因为检索 json 数据需要一些时间，所以我需要添加一个活动指示器，让用户知道它正在做某事——而不是冻结。但是，我不太确定应该在哪里添加活动指示器视图。

如果你在我的鞋子里，你会在哪里添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:13:29.393

使用普通界面生成器将其放置在您希望看到的位置，并将`hidesWhenStopped`变量设置为`YES`在您完成获取数据后不可见。然后告诉它在你的 JSON 回调中停止。

在设计方面，“完成的事情”是将它放在正在加载的任何东西的中间。对于图像，这将是显示图像的中间位置。对于表格，您可能会在屏幕中间或一个空的“占位符”单元格上找到一个大型活动指示器。想想用户的眼睛会去哪里尝试查看他们想要的数据，那是他们应该看到指示器的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:13:59.440

我会在标题中使用带有消息的警报视图，然后将子视图添加到警报中，即活动指示器。

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Doing something\nPlease Wait..." message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles:nil, nil];
UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
[alertView show];
indicator.center = CGPointMake(alertView.bounds.size.width / 2, alertView.bounds.size.height - 50);
[alertView addSubview:indicator];
[indicator startAnimating]; 
```

稍后在代码中解雇...

```
[alert dismissWithClickedButtonIndex:0 animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:03:16.633

如果您在 viewDidLoad 中有一个阻塞调用，这将导致 UI 在移动到 B 之前冻结在 A 上，那么我建议在 A 上添加活动指示器。尽管您可能会注意到由于对 DB 的阻塞调用，您的 UI 会立即更改在阻塞调用也被冻结之前，您不会看到任何 UI 更改。

我通常处理这个问题的方法是为阻塞调用生成一个新线程，从而释放 UI 的主线程，然后在必要时添加一个活动指示器（在 A 或 B 上取决于设计，但我建议在此在 B 上显示它来自可用性 POV 的案例）。

为了避免自己管理这一切的麻烦，我通常最终使用类似[MBProgressHUD](https://github.com/jdg/MBProgressHUD)或类似的库，它们更容易管理。

# php - 从ios解析php中的json主体

> ID：13918575
> 
> 赞同：2
> 
> 时间：2012-12-17T17:02:47.367
> 
> 标签：php, ios, json

我正在构建一个 iOS 应用程序/网络服务。iOS 应用程序将数据发送到 php 脚本，如下所示：

```
 NSError* error = nil;
    NSURLResponse  *res ponse = nil;

    NSArray * keys = [NSArray arrayWithObjects:@"addr", @"date", @"o_cond", nil];    
    NSArray * values = [NSArray arrayWithObjects:addr, date, o_cond, nil];

    NSDictionary * info = [NSDictionary dictionaryWithObjects:values forKeys:keys];
    NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info options:NSJSONWritingPrettyPrinted error:&error];

    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://myaddr.com/sendEmail.php"]];
    [req setHTTPMethod:@"POST"];
    [req setHTTPBody:jsonData];

    [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&error]; 
```

php收到了数据：

```
<?php
    // Get all the posted vars  
    $jsonInput = file_get_contents('php://input');
    $decoded = json_decode($jsonInput, true);

    $body = "Inspection Results for " . $decoded->{'addr'} . "\n\n";
    $body = $body . "Inspection date and time: " . $decoded->{'date'} . "\n\n";
    $body = $body . "Overall condition of asset: " . $decoded->{'o_cond'} . "\n\n"; ?> 
```

但由于某种原因，我永远无法在 php 端接收数据。有谁看到这里出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:10:36.470

尝试`$decoded['addr']`代替`$decoded->{'addr'}`. 您告诉 json_decode 返回一个关联数组（第二个参数设置为 true），但您似乎正在尝试访问一个对象。

# c# - c#：在列表中找不到对象

> ID：13918576
> 
> 赞同：7
> 
> 时间：2012-12-17T17:02:48.650
> 
> 标签：c#, list

我正在使用 LINQ `.Find()`，它在找到匹配项时并没有停止。我有：

```
List<ipFound> ipList = new List<ipFound>();

ipFound ipTemp = ipList.Find(x => x.ipAddress == srcIP); 

if (ipTemp == null) {
   // this is always null
}

public class ipFound
{
    public System.Net.IPAddress ipAddress;
    public int bytesSent;
    public int bytesReceived;
    public int bytesTotal;
} 
```

有任何想法吗？我要疯了。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T17:06:08.323

您需要使用`.Equals`而不是`==`.

```
var a = IPAddress.Parse("1.2.3.4");
var b = IPAddress.Parse("1.2.3.4");
Console.WriteLine(a == b);  // False
Console.WriteLine(a.Equals(b));  // True 
```

在上面的示例中，`a == b`是`False`因为它们是两个不同的对象。但是，`a.Equals(b)`是`True`因为它们具有相等的值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-17T17:06:15.000

使用[`IPAddress.Equals`](http://msdn.microsoft.com/en-us/library/ytw09x9b.aspx)而不是比较引用 ( `==`)：

```
ipFound ipTemp = ipList.Find(x => x.ipAddress.Equals(srcIP)); 
```

作为旁注，通常类名是`PascalCased`( `IPFound`vs. `ipFound`)

**示例：http:** [//ideone.com/lAeiMm](http://ideone.com/lAeiMm)

# objective-c - 使用 Apple Search API 按类型搜索？

> ID：13918580
> 
> 赞同：8
> 
> 时间：2012-12-17T17:03:00.863
> 
> 标签：objective-c, ios, app-store

是否可以使用 Apple Search API 按类型进行搜索？我正在考虑专门在应用商店中的游戏。使用 Obj-c。

正如在这个问题的评论中指出的那样......

[使用 iOS/Obj-c 按类型搜索 Apple App Store](https://stackoverflow.com/questions/13833521/search-apple-app-store-by-genre-with-ios-obj-c/13877257#13877257)

尝试按类型搜索似乎存在问题，因此我正在寻找实际工作的示例的答案，而不仅仅是指向文档的链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T17:53:08.637

它实际上并未记录在[Search API 文档](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)中，但您可以`genreId`向搜索 URL 添加一个参数，并将搜索限制为特定类型。

如果您查看从[搜索“Yelp”](https://itunes.apple.com/search?term=yelp&country=us&entity=software)返回的 JSON ，有 4 件有趣的事情：

```
"genreIds":["6005", "6001"]
"genres":["Social Networking", "Weather"]
"primaryGenreName":"Social Networking"
"primaryGenreId":6005 
```

添加`&genreId=6001`到 URL 将在“天气”类别中找到美国的应用程序。我在 URL 中使用搜索词“检查”。

```
https://itunes.apple.com/search?term=Check&country=us&entity=software&genreId=6001 
```

因为它没有记录，所以你不能永远依赖它。您也可以使用`primaryGenreName`作为参数，我没有尝试过。您还必须弄清楚哪些数字对应于哪些类别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T17:21:40.143

搜索 API 记录在这里： http: [//www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

您可以使用[此链接](http://itunes.apple.com/rss)生成您喜欢的 RSS 提要。在不太了解您打算如何使用它的情况下，我建议您查看这两种解决方案并使用适合您需求的最佳解决方案。

# c++ - 多个可变参数

> ID：13918585
> 
> 赞同：1
> 
> 时间：2012-12-17T17:03:19.033
> 
> 标签：c++, templates, c++11

我正在尝试做这样的事情：

```
template <class ... Required>
class Base
{
    template <class First, class ... Rest>
    void bar(First f, Rest ... r)
    {
        [...]
        return bar(r...);
    }
    void bar()
    {
        return;
    }
    public:
        template <class ... Optional>
        void foo(Required ... r, Optional ... o)
        {
            [...]
            bar(r...); //separate the required from the optional
            bar(o...);
        }
};

class Child : Base<Foo1, Foo2>
{
    public:
        Child()
        {
            [...]
            foo(foo1,foo2,foo3);
        }
} 
```

但是第一次`bar`调用接收所有参数而不是只接收参数`Required`，第二次调用没有接收任何参数。我错过了关于多个可变参数的东西吗？编译器不应该知道那`Required...`是`Foo1,Foo2`，其余的是`Optional`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:38:38.863

我认为这很可能是您使用的任何编译器中的错误。我用 gcc 4.6.3 和 4.7.2 以及 clang 3.0 和 3.3 进行了尝试，除了 clang 3.0 之外，它们都产生了预期的输出。

# wcf - 在哪里、何时以及如何在基于证书的 WCF 服务的标识元素中指定 servicePrincipalName？

> ID：13918590
> 
> 赞同：2
> 
> 时间：2012-12-17T17:03:45.450
> 
> 标签：wcf, certificate, wcf-security, wcf-configuration

我的服务器上有一个启用 WCF 的 Windows 服务，我想使用它。服务器和客户端都应在其存储中具有适当的证书，以便可以使用这些证书来保护通信。

我在 WCF 配置方面不是很有经验，结果证明这是一场噩梦，有很多不同的设置和元素，并不是所有的设置和元素都像我希望的那样记录得很好。

我当前客户端配置的相关部分如下（*似乎代码格式在我必须使用的 IE 版本上无法正常工作，希望稍后我会在家修复*）：

```
<configuration>
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="wsHttpBinding">
                <security mode="Message">
                    <message
                        clientCredentialType="Certificate"
                        negotiateServiceCredential="false"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <behaviors>
        <endpointBehaviors>
            <behavior name="wsHttpCertificateBehavior">
                <clientCredentials>
                    <clientCertificate
                        findValue="MyCert"
                        storeLocation="LocalMachine"
                        storeName="My"
                        x509FindType="FindBySubjectName"/>
                    <serviceCertificate>
                        <authentication
                            certificateValidationMode="PeerOrChainTrust"
                            revocationMode="NoCheck"
                            trustedStoreLocation="LocalMachine"/>
                    </serviceCertificate>
                </clientCredentials>
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <client>
        <endpoint
            address="http://someserver:1234/wcf/service/"
            behaviorConfiguration="wsHttpCertificateBehavior"
            binding="wsHttpBinding"
            contract="SomeNamespace.ISomeInterface"
            name="wsHttpEndpoint">
            <identity>
                <servicePrincipalName value="what to put here?"/>
                <certificateReference 
                    findValue="MyCert" 
                    storeLocation="LocalMachine" 
                    storeName="My" 
                    x509FindType="FindBySubjectName"/>
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

服务器配置是这样的：

```
<?xml version="1.0"?>
<configuration>
<system.web>
    <compilation debug="true"/>
</system.web>
<system.serviceModel>
    <services>
        <service
            name="Os2CentralWcf.CentralAdUserManager"
            behaviorConfiguration="wsHttpCertificateBehavior">
            <host>
                <baseAddresses>
                    <add baseAddress="http://someserver:1234/wcf/service/"/>
                </baseAddresses>
            </host>
            <endpoint
                address=""
                binding="wsHttpBinding"
                bindingConfiguration="wsHttpEndpointBinding"
                contract="SomeNamespace.ISomeInterface"
                name="wsHttpEndpoint">
                <identity>
                    <dns value="MyCert"/>
                </identity>
            </endpoint>
            <endpoint
                address="mex"
                binding="mexHttpBinding"
                contract="IMetadataExchange"
                name="mexEndpoint"/>
        </service>
    </services>

    <bindings>
        <wsHttpBinding>
            <binding name="wsHttpEndpointBinding">
                <security mode="Message">
                    <message
                        establishSecurityContext="false"
                        negotiateServiceCredential="false"
                        clientCredentialType="Certificate"/>
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>

    <behaviors>
        <serviceBehaviors>
            <behavior name="wsHttpCertificateBehavior">
                <serviceMetadata
                    httpGetEnabled="true"
                    httpsGetEnabled="false"/>
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <serviceAuthorization principalPermissionMode="None"/>
                <serviceCredentials>
                    <clientCertificate>
                        <authentication
                            certificateValidationMode="PeerOrChainTrust"
                            revocationMode="NoCheck"/>
                    </clientCertificate>
                    <serviceCertificate
                        findValue="MyCert"
                        storeLocation="LocalMachine"
                        x509FindType="FindBySubjectName"/>
                </serviceCredentials>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

在客户端的配置中未指定 a`servicePrincipalName`时，我得到以下信息：

`System.ServiceModel.Security.MessageSecurityException: Client cannot determine the Service Principal Name based on the identity in the target address 'http://someserver:1234/wcf/service' for the purpose of SspiNegotiation/Kerberos. The target address identity must be a UPN identity (like acmedomain\alice) or SPN identity (like host/bobs-machine).`

当尝试添加这样一个元素时（例如`<servicePrincipalName value=HOST/someserver:1234"/>`，如下面提到的帖子中所建议的），我最终得到：

`System.ServiceModel.Security.SecurityNegotiationException: Secure channel cannot be opened because security negotiation with the remote endpoint has failed. This may be due to absent or incorrectly specified EndpointIdentity in the EndpointAddress used to create the channel. Please verify the EndpointIdentity specified or implied by the EndpointAddress correctly identifies the remote endpoint.`

现在我的实际问题是我是否必须使用`identity`子元素（错误消息似乎表明了这一点，但我不明白为什么）。我也找不到任何关于在`dns`元素中放入什么以及如何指定 servicePrincipalName 的详细文档（如果真的需要——[这篇文章](https://stackoverflow.com/questions/1292183/what-value-should-the-serviceprincipalname-have)也没有真正的帮助）。

在 Visual Studio 2010 中本地运行客户端和服务器（服务）工作正常。我希望我提供了足够的信息，否则请随时询问-不幸的是，如果您开始深入研究 WCF 配置，它似乎会很混乱...

**更新**

目前使用 basicHttpBinding 能够让双方相互通信，在本地以及在服务器上都可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T13:03:38.437

**这个异常可以修复，真的很奇怪。你可以通过在App.config**或**Web.config**中添加一行来摆脱它。

```
<endpoint  address ="" binding ="wsHttpBinding" contract="System.ServiceModel.Routing.IRequestReplyRouter">
      <identity >
           <dns value ="localhost"/>
      </identity>
</endpoint> 
```

添加此行对我有用。端点部分中的身份标签将。希望这可以帮助

# c# - Structuremap - 覆盖注册

> ID：13918592
> 
> 赞同：5
> 
> 时间：2012-12-17T17:03:50.907
> 
> 标签：c#, dependencies, registry, structuremap, code-injection

是否可以在注册表中注册一个接口，然后“重新注册”它以覆盖第一次注册？

IE：

```
For<ISomeInterface>().Use<SomeClass>();
For<ISomeInterface>().Use<SomeClassExtension>(); 
```

我在运行时想要的是我的对象工厂`SomeClassExtension`在我请求时返回`ISomeInterface`。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:21:10.460

好消息，我发现是的。这完全取决于将注册表规则添加到对象工厂容器的顺序。因此，如果您像我一样使用多个注册表类，则需要找到一种方法来优先将它们添加到容器中。

换句话说，不要使用`.LookForRegistries()`which 以错误的顺序获取所有`Registry`类，而是尝试查找所有`Registry`文件，按照您想要的顺序设置它们并手动将它们添加到对象工厂容器中：

```
 ObjectFactory.Container.Configure(x => x.AddRegistry(registry)); 
```

这样，您就可以完全控制您想要的规则。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-24T14:20:26.687

当我需要在我的 SpecFlow 测试中覆盖注册表的某些部分时，我只是想添加我的解决方案。

我确实在搜索的早期就找到了这个线程，但它并没有真正帮助我找到解决方案，所以我希望它会对你有所帮助。

我的问题是“StoreRegistry”中的“DataContext”（由应用程序使用）使用“HybridHttpOrThreadLocalScoped”，我需要它在我的测试中是“瞬态的”。

```
The code looked like this:
[Binding]
public class MySpecFlowContext
{    
...
    [BeforeFeature]
    private static void InitializeObjectFactories()
    {
        ObjectFactory.Initialize(x =>
        {
            x.AddRegistry<StoreRegistry>();
            x.AddRegistry<CommonRegistry>();
        });
    }   
} 
```

要覆盖范围设置，您需要在注册中明确设置它。并且覆盖需要低于被覆盖的

```
The working code looks like this:
[Binding]
public class MySpecFlowContext
{    
...
    [BeforeFeature]
    private static void InitializeObjectFactories()
    {
        ObjectFactory.Initialize(x =>
        {
            x.AddRegistry<StoreRegistry>();
            x.AddRegistry<CommonRegistry>();
            x.AddRegistry<RegistryOverrideForTest>();
        });
    }    

    class RegistryOverrideForTest : Registry
    {
        public RegistryOverrideForTest()
        {
             //NOTE: type of scope is needed when overriding the registered classes/interfaces, when leaving it empty the scope will be what was registered originally, f ex "HybridHttpOrThreadLocalScoped" in my case. 
            For<DataContext>()
                .Transient()
                .Use<DataContext>()
                .Ctor<string>("connection").Is(ConnectionBuilder.GetConnectionString());
        }
    }
} 
```

# ios - EKEventEditViewController 开始日期不正确

> ID：13918593
> 
> 赞同：2
> 
> 时间：2012-12-17T17:03:52.380
> 
> 标签：ios, calendar

我有一个 EKEvent，我正在使用 EKEventEditViewController 在我的应用程序中添加一个日历事件。即使日期是准确的，我得到的时间也不正确。有人可以帮我弄清楚我在这里做错了什么..

这是生成事件的代码..

```
EKEvent *addEvent=[EKEvent eventWithEventStore:eventStore];
addEvent.title=event.title;
NSLog(@"Saving Event... %@",[event.date description]);
addEvent.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0];
addEvent.startDate= event.date;
NSLog(@"Event Date... %@",[addEvent.startDate description]);
addEvent.endDate=[addEvent.startDate dateByAddingTimeInterval:600];
[addEvent setCalendar:[eventStore defaultCalendarForNewEvents]];
addEvent.alarms=[NSArray arrayWithObject:[EKAlarm alarmWithRelativeOffset:-3600]]; 
```

我设备的时区设置为“毛里求斯路易港”。

我的控制台输出是..

```
Saving Event... 2012-12-19 20:00:00 +0000
Event Date... 2012-12-19 20:00:00 +0000 
```

但在 EKEventEditViewController 中，我的开始日期显示`Thu,20 Dec 0:00.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:33:30.130

这是因为“2012-12-19 20:00:00 +0000”（即格林威治标准时间晚上 8 点）的事件将在午夜在马里蒂斯举行。您要求毛里求斯的用户将其添加到他们的日历中，因此它将在设备的本地时区午夜显示活动日期。

如果事件发生在毛里求斯晚上 8 点，那么您的原始时间不正确，因为您说的是格林威治标准时间晚上 8 点。如果您说该事件确实发生在格林威治标准时间晚上 8 点（毛里求斯的午夜），那么`EKEventEditViewController`它只会根据当地时区午夜显示时间。

如果用户[打开了时区支持](http://support.apple.com/kb/HT4576?viewlocale=en_US&locale=en_US)，当他们在日历应用中拉起事件时，它将显示您在创建事件时指定的时区。如果他们没有打开时区支持，它只会在本地时区显示（调整开始时间）。

不幸的是，与日历应用程序不同，它似乎`EKEventEditViewController`不会显示时区，而是以当地时间显示，即使用户已打开时区支持。它似乎不支持这个时区功能，即使当他们查看日历时它是正确的。至少事件与适当的时区信息一起存储。

# jquery - jQuery $('.div').each 只运行一次迭代

> ID：13918595
> 
> 赞同：1
> 
> 时间：2012-12-17T17:04:01.703
> 
> 标签：jquery, html, css

编辑：对于任何关心的人来说，问题是如此简单以至于我忽略了它，因为如果右侧的列是具有额外内容的列，我会使用表格，它会尝试更改左侧的列，因为它仍然会有更大的高度，虽然减小文本大小实际上并不能解决它，从而导致我得到循环，解决方案是使用独立的 div 代替！希望这对某人有帮助！

我正在尝试编写的一些 jQuery 有一个小问题。我想要做的是遍历具有相同类的每个 div，如果该 div 的高度大于 25px，则将字体大小减小 1px，直到它适合一行。

我的代码适用于第一个，但不能在其他 div 上运行，任何帮助都会很棒！

问候，

色木

```
$(document).ready(function() {
        $('.lmmteam').each(function() {
            $('.lmmteam').css('font-size', '30px');
                while( $('.lmmteam').height() > 25 ) 
                    {
                        $('.lmmteam').css('font-size', (parseInt($('.lmmteam').css('font-size')) - 1) + "px" );
                    }
            });
    }); 
```

只是想我也应该添加 html 标记，这样你就更容易了！

```
<table>
  <tr>
    <td class="randomclass"></td>
    <td class="lmmteam">Long text</td>
    <td class="randomclass"></td>
    <td class="randomclass"></td>
    <td class="lmmteam">Long text</td>
    <td class="randomclass"></td>
  </tr>
  <tr>
    <td class="randomclass"></td>
    <td class="lmmteam">Long text</td>
    <td class="randomclass"></td>
    <td class="randomclass"></td>
    <td class="lmmteam">Long text</td>
    <td class="randomclass"></td>
  </tr> 
```

并且有几行，但格式保持不变。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:10:03.943

您必须`$(this)`用于迭代。

见：http: [//jsfiddle.net/4St7V/1/](http://jsfiddle.net/4St7V/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:10:16.670

您必须遍历相同的元素，然后才能使用`"-=1"`。

```
$('.lmmteam').each(function() {
    $element = $(this);
    $element.css('font-size', '30px');
    while( $element.height() > 25 ) {
        $element.css('font-size', "-=1");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:08:06.990

尝试

```
$(document).ready(function() {
    $('.lmmteam').each(function() {
        $(this).css('font-size', '30px');
        while ($(this).height() > 25) {
            $(this).css('font-size', (parseInt($(this).css('font-size'),10) - 1) + "px");
        }
    });
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ta5Jb/1)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:06:52.567

如果您正在使用`.each(function()`，也许您应该使用`$(this)`来迭代项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T17:08:13.740

尝试

```
$(document).ready(function() {
        $('.lmmteam').each(function() {
            $(this).css('font-size', '30px');
                while( $(this).height() > 25 ) 
                    {
                        $(this).css('font-size', (parseInt($(this).css('font-size')) - 1) + "px" );
                    }
            });
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T17:09:36.970

三班轮解决方法：

```
$('.lmmteam').css('font-size', '30px').filter(function(){
    return $(this).height() > 25;
}).css('font-size', '-=1px'); 
```

# ruby-on-rails - 使用设计接受开发中的任何密码

> ID：13918597
> 
> 赞同：5
> 
> 时间：2012-12-17T17:04:07.367
> 
> 标签：ruby-on-rails, devise

我希望能够在我的开发环境中以任何用户身份登录，而无需关心我为他们设置的密码。有没有办法配置 Devise 在特定环境中接受任何密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:08:38.030

找到答案，您可以覆盖valid_password？在开发环境中接受任何密码。

```
 def valid_password?(password)
    if ::Rails.env == "development" # and password == "RESTRICT TO ONE MASTER PW"
      true
    else
      super
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:10:05.173

在[Devise Wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Configure-a-master-password)中，您可以配置主密码以便能够使用该密码登录。

```
 class User
  ...
  def valid_password?(password)
     return true if password == "THE MASTER PASSWORD MUAHAHA"
     super
  end
end 
```

# javascript - 为javascript淡入淡出效果添加延迟？

> ID：13918598
> 
> 赞同：0
> 
> 时间：2012-12-17T17:04:10.557
> 
> 标签：javascript, jquery

> **可能的重复：**
> [延迟 JQuery 效果](https://stackoverflow.com/questions/251204/delay-jquery-effects)

有谁知道我怎样才能在这个脚本中添加大约 1 秒的时间延迟？

我希望`modcontentplatinummore`淡入淡出的 div 在淡出后大约一秒钟内`modcontentplatinum`淡入。

谢谢。

```
<script>
$(".modcontentplatinummore").hide();
$('.morebutton-platinum').click(function () {
    if ($('.modcontentplatinummore').is(":hidden")) {       
        $('.modcontentplatinum').fadeOut(500);
        $('.modcontentplatinummore').fadeIn(500);
    } else {
        $('.modcontentplatinummore').fadeOut(500);
        $('.modcontentplatinum').fadeIn(500);
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:06:12.453

只需使用向动画队列添加超时的[`delay`方法。](http://api.jquery.com/delay/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:13:01.997

我们可以使用 jquery 中的 delay() 添加延迟，请使用此链接[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# jquery - Jquery - 如何使用 submit() 发送参数

> ID：13918601
> 
> 赞同：1
> 
> 时间：2012-12-17T17:04:23.080
> 
> 标签：jquery

我有一个列出许多公司的视图，以及每个公司的详细信息视图。当我查看一家公司的详细信息时，我想单击导航按钮以查看下一家或上一家公司。我也想拥有第一家和最后一家公司。因此，在我的 MVC 应用程序中，我存储了第一个、上一个、下一个和最后一个公司的 ID，当用户单击按钮时，比如说下一个公司，我想获取下一个 companyId 并将其发布到服务器。一种方法是使用 jquery submit()。但是我无法弄清楚如何在提交（）的 url 中发送 companyId。

所以我的 HTML 看起来像；

```
<span style="margin-left:200px;">
    <input type="submit" id="btnFirst" value="|<< First"/>
    <input type="submit" id="btnPrev" style="margin-right: 50px;" value="|< Previous"/>
    <input type="submit" id="btnNext" value="Next >|"/>
    <input type="submit" id="btnLast" value="Last >>|"/>
</span> 
```

隐藏字段（在页面源中从 MVC 标记转换）；

```
 <input id="Navigator_FirstPageId" name="Navigator.FirstPageId" type="hidden" value="1" />
        <input id="Navigator_PreviousPageId" name="Navigator.PreviousPageId" type="hidden" value="7008" />
        <input id="Navigator_NextPageId" name="Navigator.NextPageId" type="hidden" value="7009" />
        <input id="Navigator_LastPageId" name="Navigator.LastPageId" type="hidden" value="7009" />
        <input id="Navigator_OnFirstPage" name="Navigator.OnFirstPage" type="hidden" value="False" />
        <input id="Navigator_OnLastPage" name="Navigator.OnLastPage" type="hidden" value="True" /> 
```

以及需要更正的jquery；

```
$('#btnNextt').click(function () {
          submit($('#Navigator_LastPageId').val());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:09:23.867

使用[serialize()](http://api.jquery.com/serialize/)方法在提交时序列化表单。

```
<form action='/some' id="myform">
       <input id="Navigator_FirstPageId" name="Navigator.FirstPageId" type="hidden" value="1" />
        <input id="Navigator_PreviousPageId" name="Navigator.PreviousPageId" type="hidden" value="7008" />
        <input id="Navigator_NextPageId" name="Navigator.NextPageId" type="hidden" value="7009" />
        <input id="Navigator_LastPageId" name="Navigator.LastPageId" type="hidden" value="7009" />
        <input id="Navigator_OnFirstPage" name="Navigator.OnFirstPage" type="hidden" value="False" />
</form> 
```

**JS**

```
$.post($('#myform').attr('action'), $('#theform').serialize()); 
```

相关：[jquery-ajax-submit-form](https://stackoverflow.com/questions/1960240/jquery-ajax-submit-form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:16:16.617

就我想要做的事情而言，有一个更简单的答案。

```
<a class="imagelink" href="@Url.Action("DetailsSubcontractor", "Company", new { id = Model.Navigator.FirstPageId })">
    <input id="btnFirst" type="button" value="|<< First" />
</a>
<span style="margin-right:150px;">
<a class="imagelink" href="@Url.Action("DetailsSubcontractor", "Company", new { id = Model.Navigator.PreviousPageId })">
    <input id="btnPrev" type="button" value="|< Previous" />
</a></span>
<a class="imagelink" href="@Url.Action("DetailsSubcontractor", "Company", new { id = Model.Navigator.NextPageId })">
    <input id="btnNext" type="button" value="Next >|" />
</a>
<a class="imagelink" href="@Url.Action("DetailsSubcontractor", "Company", new { id = Model.Navigator.LastPageId })">
    <input id="btnLast" type="button" value="Last >>|" />
</a> 
```

# inno-setup - 如何在 innosetup 的 postinstall 期间启用进度条？

> ID：13918604
> 
> 赞同：0
> 
> 时间：2012-12-17T17:04:26.200
> 
> 标签：inno-setup

我正在使用 ISDone 重新打包游戏。为 Directx 和 Vc++ 创建了两个复选框。ssInstall 部分的安装进度条运行良好，但 ssPostinstall 部分的进度条未显示！

这是我的示例代码

```
if CurStep=ssPostInstall then begin
if DirectXCB.Checked then begin
  Status.Caption:='Installing DirectX';
  Exec2(ExpandConstant('{src}\Redist\DirectX\Dx.cmd'),'/silent',false);
end;
if VisualCCB.Checked then begin
  Status.Caption:='Installing Visual C++';
  Exec2(ExpandConstant('{src}\Redist\vcredist_x86.exe'),'/silent',false);
end;
end;

 if (CurStep=ssInstall) and ISDoneError then begin
Exec2(ExpandConstant('{uninstallexe}'), '/VERYSILENT', false);

end;
end; 
```

请提出任何想法！

# css - RichFaces：根据活动皮肤加载不同的样式表

> ID：13918606
> 
> 赞同：2
> 
> 时间：2012-12-17T17:04:30.630
> 
> 标签：css, richfaces, stylesheet, skin

它涉及以下方面：

1.  网站有一个基础`stylesheet.css`（通过使用`<link>`标签）。
2.  根据用户登录的情况，`SkinBean.setSkin("SKIN")`当用户进入网站的某些部分时，皮肤会发生变化。
3.  如果皮肤发生变化，则加载的样式表也应更改为`stylesheet-alt.css`.

是否有一种快速简单的解决方案可以根据 RichFaces 中使用的皮肤更改样式表？

如果有人提供帮助，我会很高兴。

（这个问题不是关于如何在RichFaces中更改皮肤）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:21:41.050

使用`<a4j:loadStyle>`代替`<link>`标签并使用`rendered`如下属性。

```
<a4j:loadStyle src="stylesheet.css" rendered="#{myBean.booleanProperty}"/>
<a4j:loadStyle src="stylesheet-alt.css" rendered="#{!myBean.booleanProperty}"/> 
```

# python - Nosetest 和 Google API：“没有名为 apiclient.discovery 的模块”

> ID：13918612
> 
> 赞同：8
> 
> 时间：2012-12-17T17:04:43.350
> 
> 标签：python, testing, google-api, importerror, nosetests

我正在尝试测试我使用 Google Translate API 的小 Python 脚本。
我必须在哪里安装 API 或者我必须做什么才能使nosetest 停止告诉我

```
ImportError: No module named apiclient.discovery 
```

该脚本运行良好，我按照您的方式导入它并使用 pip 安装它，但我找不到任何有关如何使用nosetest 使其工作的信息。

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T12:26:40.170

> The script runs fine, I import it as you would and installed it with pip, but I can't find any info on how to make this work with nosetest.

GAE does not work with `pip` very well unfortunately. I've encountered a similar problem like this.

What you need to do is *copy* the modules from your Python's libraries or you can just download them again from their websites, and then paste them directly inside your GAE code. Often, developers create a folder called lib, and add it `PYTHONPATH`.

Then your nosetests *should* run.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T13:48:41.680

[在这里，我认为您可以在https://pypi.python.org/pypi/apiclient/1.0.2](https://pypi.python.org/pypi/apiclient/1.0.2)下载 tar.gz 文件。将其解压缩并安装在您的 PC 上。

# asp.net - 在框架 4.5 下添加新的 Web 服务

> ID：13918616
> 
> 赞同：4
> 
> 时间：2012-12-17T17:04:59.070
> 
> 标签：asp.net

文件 -> 新建 -> 网站 -> asp.net 空网站（在 .net framework 4.5 下） ->

在解决方案资源管理器中右键单击网站名称 -> 添加新项目 ->

**找不到网络服务**。

在框架 4.0 下构建的网站上执行完全相同的操作时，**我确实找到了 Web Service**。

怎么来的？有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-30T05:55:30.173

**步骤1：**

添加**空 Web**项目`.Net4.5`

![在此处输入图像描述](../Images/86a4085b118495846ebd1d7d1885add5.png)

**第 2 步：**
然后右键单击您的项目并**添加新项目**。然后选择模板类型**Web->WebService**

![在此处输入图像描述](../Images/40205288dd7222e8d4d16a4a1cb4e1cc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:34:50.347

你有什么风格的 Visual Studio？我可以看到一切

.NET 4.0 和 4.5 ![在此处输入图像描述](../Images/dc98c9f331bd4d20539dbf05b497c86b.png)

# django - 按内容为 models.ForeignKey(User) 的字段过滤模型

> ID：13918618
> 
> 赞同：1
> 
> 时间：2012-12-17T17:05:04.527
> 
> 标签：django, django-models, django-views, django-urls

我有一个

```
class Posts(models.Model):
    created_by = models.ForeignKey(User)
    post = models.CharField(max_length=150)
    active = models.NullBooleanField()
    def __unicode__(self):
        return self.post 
```

现在我想过滤我`class Posts`的`created_by=testuser`。为此我做

```
p = Posts.objects.filter(created_by=poster, active=True) 
```

由此`var(poster)`来自所要求的`url(r'^(?P<poster>\w+)/$', views.Posts),`

如果我通过转到 my-domain.tld/testuser 来执行它，我会得到一个`ValueError: invalid literal for int() with base 10: 'testuser'`

如果我尝试过滤，如果我尝试按命令过滤，则会`manage.py shell`收到错误消息。`NameError: name 'testuser' is not defined``p = Posts.objects.filter(created_by=testuser)`

如何正确过滤我`created_by`的内容是models.ForeignKey（User）的字段。无论如何有解决方案还是我应该创建额外的`CharField`创作者（海报）作为内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:05:52.563

`p = Posts.objects.filter(created_by__username=poster, active=True)`

poster 只是一个名称（str），您可以使用 user.username 跨越关系和查询`__`

或者您可以先通过海报获取用户对象

```
user = Users.objects.get(username=poster)
p = Posts.objects.filter(created_by=user, active=True) 
```

用户模型文档可以在网站上找到：[https ://docs.djangoproject.com/en/dev/topics/auth/#users](https://docs.djangoproject.com/en/dev/topics/auth/#users)

# amazon-cloudsearch - 未将文档添加到 CloudSearch 域

> ID：13918622
> 
> 赞同：0
> 
> 时间：2012-12-17T17:05:14.607
> 
> 标签：amazon-cloudsearch

我正在玩 CloudSearch 的 imdb 示例，到目前为止我可以搜索但不能添加。

这会返回成功，但是一旦我想查询数据，就没有结果：

> curl -H“接受：应用程序/json”-H“内容类型：应用程序/json”-X POST [http://doc-imdbtest-bs4t3cjarozs76ll2iv4xi.us-east-1.cloudsearch.amazonaws.com/2011-02- 01/documents/batch](http://doc-imdbtest-bs4t3cjarozs76ll2iv4xi.us-east-1.cloudsearch.amazonaws.com/2011-02-01/documents/batch) -d "[{ \"type\":\"add\",\"id\":\"tt0484562\",\"version\": 1,\"lang\":\" en\",\"fields\": {\"title\": \"asdfasdf: The Dark Is Rising\",\"director\": \"Cunningham, David L.\",\"genre\": [\“冒险\”，\“戏剧\”，\“奇幻\”，\“惊悚\”]，\“演员\”：[\“麦克肖恩，伊恩\”，\“埃克莱斯顿，克里斯托弗\”，\ “康罗伊，弗朗西丝”，“克鲁森，温迪”，“路德维希，亚历山大”，“科斯莫，James\",\"Warner, Amelia\",\"Hickey, John Benjamin\",\"Piddock, Jim\",\"Lockhart, Emma\"]}}]" {"status": "success", “添加”：1，“删除”：0}

任何人都可能知道为什么会发生这种情况？据说我获得了所有应有的权限，所以我预计会出现某种延迟。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:10:56.240

如果有人对文档进行了索引，如果您碰巧搜索正在索引的数据，CloudSearch 可能会返回一个空的结果集，直到索引完成。一段时间后再试一次，它应该可以工作。（还要确保查询没问题。）

# php - 如果其他 $_GET 不工作

> ID：13918625
> 
> 赞同：0
> 
> 时间：2012-12-17T17:05:33.500
> 
> 标签：php

我正在尝试做的是基于 $_GET['page'] 变量的回显，但是它为我所有的导航菜单回显了这一点。我怎样才能让它只使用我所在的页面？这只是其中的 php 部分，实际的 html 代码位于每一行下方，但为简单起见，我没有包含它

```
<?php if($_GET['page'] == 'user_edit' || 'NULL'){ echo "<li class=\"current\">"; } else{ echo "<li>";} ?>
<?php if($_GET['page'] == 'manage' || 'add' || 'ftp'){ echo "<li class=\"current\">"; } else{ echo "<li>";} ?>
<?php if($_GET['page'] == 'bugs' || 'support' || 'notifications'){ echo "<li class=\"current\">"; } else{ echo "<li>";} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:09:13.723

这不好：

```
if ($_GET['page'] == 'manage' || 'add') 
```

在这种情况下，字符串 'add' 的计算结果为布尔值 true，这意味着条件每次都会触发。你想要这个：

```
if ($_GET['page'] == 'manage' || $_GET['page'] == 'add') 
```

或这个：

```
if (in_array($_GET['page'], array('manage', 'add'))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:09:17.593

它不是这样工作的。您的条件被评估为：

```
if ( ( $var == 'foo' ) || ( 'bar' ) || ( 'baz' ) ) 
```

注意上面的分组。这三个都是单独的表达式。这并不意味着“如果`$var`等于 'foo'、'bar' 或 'baz'”，它的意思是“如果`$var`等于 'foo' 为真或 'bar' 为真或 'baz' 为真”。

而且`'bar'`总是`true`。

你需要：

```
if ($var == 'foo' || $var == 'bar' || $var == 'baz') 
```

或者

```
if (in_array($var, array('foo', 'bar', 'baz')) 
```

# macos - 如何在 MacOS X 上创建安装应用程序？

> ID：13918629
> 
> 赞同：2
> 
> 时间：2012-12-17T17:05:43.550
> 
> 标签：macos, installation

我有需要作为独立应用程序分发的 HTML 网站。对于 Windows，我使用 Chrome Portable + Inno Setup - 一切都简单明了。但是，客户要求能够在 MAC 计算机上安装此应用程序。我没有使用 Mac 的经验，所以我在这里有几个问题：

1.  DMG 是在 MAC 上安装程序的唯一方法吗？
2.  是否有任何工具（类似于 Inno Setup）能够将 chrome 便携版和我的 HTML 代码“包装”到安装程序中？
3.  如何“签署”最终的 DMG（我有在 Windows 上使用的代码签名证书，我假设 MAC 上存在类似的东西）。

谢谢你，我很感激你的帮助。

# c# - c# 使用 Microsoft.Deployment.Compression.Zip 压缩文件

> ID：13918630
> 
> 赞同：2
> 
> 时间：2012-12-17T17:05:44.540
> 
> 标签：c#

我需要使用以下内容：

```
 using Microsoft.Deployment.Compression.Zip; 
```

从网上看它说我需要以下参考dll

```
 Microsoft.Deployment.Compression.dll
    Microsoft.Deployment.Compression.Zip.dll 
```

但我在 .NET 文件夹中找不到这些。

仅供参考，以下是我打算如何使用它。

```
 // CREATING ZIP FILE BY ADDING LIST OF FILES
    ZipInfo zip = new ZipInfo(@"C:\testarchive1.zip");
    List<strng> files = new List<string>();
    files.Add(@"C:\test1.txt");
    files.Add(@"C:\test2.txt");
    files.Add(@"C:\test3.txt");
    zip.PackFiles(null, files, null);

    // CREATING ZIP FILE BY ADDING FOLDER (WITH SUB-FOLDERS) USING MAXIMUM COMPRESSION

     zip = new ZipInfo(@"C:\testarchive2.zip"); 

     zip.Pack(@"C:\Test", true, Microsoft.Deployment.Compression.CompressionLevel.Max, null); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:13:28.743

该库不是 .NET Framework 的一部分，而是[Wix](http://wixtoolset.org/) (Windowx Installer XML) 的一部分。

如果您使用的是 .NET 4.5，则可以改用[`ZipFile`](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)该类，或选择第三方库，如[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:09:38.483

取自 MSDN 网站示例

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            string startPath = @"c:\example\start";
            string zipPath = @"c:\example\result.zip";
            string extractPath = @"c:\example\extract";

            ZipFile.CreateFromDirectory(startPath, zipPath);

            ZipFile.ExtractToDirectory(zipPath, extractPath);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:18:05.310

尝试这个 ：

[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

示例代码：

```
 using (ZipFile zip = new ZipFile())
 {
     // add this map file into the "images" directory in the zip archive
     zip.AddFile("c:\\images\\personal\\7440-N49th.png", "images");
     // add the report into a different directory in the archive
     zip.AddFile("c:\\Reports\\2008-Regional-Sales-Report.pdf", "files");
     zip.AddFile("ReadMe.txt");
     zip.Save("MyZipFile.zip");
 } 
```

就像你的例子一样简单。

# dos - 记录可执行文件对文件系统的请求（16 位 MS-DOS）

> ID：13918631
> 
> 赞同：1
> 
> 时间：2012-12-17T17:05:49.450
> 
> 标签：dos, 16-bit, dosbox

这是我的情况：我有一个可执行文件，它在启动时会尝试打开某个文件。该文件丢失，因此 exe 无法启动。当然没有关于exe搜索给定文件的位置的输出（没有路径，没有文件名，什么都没有）。

现在，我的问题是：有没有办法将可执行文件的所有请求记录到文件系统？

更难的是，exe 是 16 位 MS-DOS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:52:24.933

你如何运行这个应用程序？如果它在 Windows 下运行，您可以使用 System Internals 的[Process Monitor监控文件系统访问](http://technet.microsoft.com/en-us/sysinternals/bb896645)

# php - PHP POST和一个函数，我做错了什么

> ID：13918633
> 
> 赞同：1
> 
> 时间：2012-12-17T17:05:51.693
> 
> 标签：php, function, post

我不确定 POST 是否不起作用或功能是否不起作用。所以这里是一页的代码：

```
<?php require_once("includes/Functions.php"); ?>
<?php include("includes/front.php"); ?>
<div id="register"> 
<form action="Includes/Functions.php" method="post" name="createUser"> 
Username: <input type="text" name="user" maxlength="16"/><br />
Password: <input type="password" name="pass" maxlength="30"/><br />
Repeat password: <input type="password"/><br />
E-mail: <input type="email" name="mail"/><br />             
<input type="submit" value="Next" />            
</form>
<a href="/login.php">Log in</a>  
</div>
</body>
</html>
<?php include("includes/footer.php"); ?> 
```

这是functions.php的开头：

```
<?php require_once("connect.php"); ?>
<?php
if(isset($_POST["createUser"]) && isset($_POST["user"], $_POST["pass"],    $_POST["mail"])){
call_user_func_array("createUser", array($_POST("user"), $_POST("pass"), $_POST("mail")));
} 
```

使用 echo 故障排除方法我看到 echo 在代码中无处不在，但在我需要的功能中却没有。

这是功能：

```
function createUser ($username, $password, $email){
//Get from form
$username = $_POST["user"];
$password = $_POST["pass"];
$email = $_POST["mail"];
$hashedPassword = sha1($password);
//Submit to database
//make query
$query = ("INSERT INTO users ( username , email , hashPass ) VALUES ( '$username' ,  '$email' , '$hashedPassword')");
//use query
if (mysql_query($query, $connection)) {
//userMade.php
header("Location: ../userMade.php");
exit;
} else {
echo "<p>I suck!</p>";
echo "<p>".mysql_error()."</p>";
} 
} 
```

没有报告 PHP 或 MySQL 错误，我只看到一个空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:25:04.567

```
call_user_func_array("createUser", array($_POST("user"), $_POST("pass"), $_POST("mail"))); 
```

应该

```
call_user_func_array("createUser", array($_POST["user"], $_POST["pass"], $_POST["mail"])); 
```

或者

```
createUser($_POST["user"], $_POST["pass"], $_POST["mail"]); 
```

而且您不必：

```
$username = $_POST["user"];
$password = $_POST["pass"];
$email = $_POST["mail"]; 
```

在`createUser`功能上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:34:19.057

在`functions.php`你检查`if(isset($_POST["createUser"])...`

[在 post 期间没有提交](http://www.w3.org/TR/html401/interact/forms.html#adef-name-FORM)form`name`属性，所以这个 if 语句总是会失败。

您将需要使用提交按钮的名称/值属性或隐藏的输入字段以满足此条件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:14:24.223

```
<?php require_once("includes/Functions.php"); ?>
<form action="Includes/Functions.php" method="post" name="createUser"> 
```

这 2 行是否指向同一个文件？我会假设是这样，但这种情况是不正确的。我会从这里开始。我会保持一个标准的命名约定，因为有些文件在 Caps 中，有些则不是。

我还建议在散列之前对您的密码进行加盐处理。

对于您的 SQL，我建议使用[PDO](http://us3.php.net/pdo)，因为您的代码现在受到 SQL 注入攻击，可能会泄露未加盐的密码。

# c# - 没有泛型的 AutoMapper AfterMap

> ID：13918636
> 
> 赞同：1
> 
> 时间：2012-12-17T17:06:03.237
> 
> 标签：c#, generics, automapper

我需要设置一个`AfterMap`for`AutoMapper`但我没有使用通用版本，因为我在运行时根据需要创建地图。如果我使用通用版本，我会这样做：

```
Mapper.CreateMap<DALEntity, BLLEntity>()
    .AfterMap((DALEntity dalEntity, BLLEntity bllEntity) =>
        (bllEntity as DomainEntityBase).State = DomainEntityState.Unchanged); 
```

工作正常。直到运行时我才知道的其他地图是这样创建的：

```
Type BLLClassType = Type.GetType(BLLClassName);
Type DALClassType = Type.GetType(DALClassName);
Mapper.CreateMap(DALClassType, BLLClassType); 
```

但现在我无法设置`AfterMap`。有什么建议么？我只需要在 AutoMapper 完成后设置`State`属性。`bllEntity`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:49:06.660

创建自定义值解析器：

```
public class StateResolver : IValueResolver
{
    public ResolutionResult Resolve(ResolutionResult source)
    {
        return source.New(DomainEntityState.Unchanged);
    }
} 
```

用法：

```
Type BLLClassType = Type.GetType(BLLClassName);
Type DALClassType = Type.GetType(DALClassName);

Mapper.CreateMap(DALClassType, BLLClassType)
      .ForMember("State", opt => opt.ResolveUsing<StateResolver>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:26:19.813

它必须是一个`AfterMap`吗？例如，您可以`UseValue`这样使用：

```
Mapper.CreateMap<DALEntity, BLLEntity>()
    .ForMember(dest => dest.State,
               opt => opt.UseValue(DomainEntityState.Unchanged)); 
```

# ios - Facebook 5 消息传递 url 方案

> ID：13918642
> 
> 赞同：0
> 
> 时间：2012-12-17T17:06:15.640
> 
> 标签：ios, facebook

是否有一个 ios URL 方案可用于打开带有对话框的 facebook 应用程序（版本 5.x），该对话框可用于向给定的 facebook id 发送私人消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:39:36.823

[第 9 页应该有帮助](https://media.blackhat.com/bh-eu-11/Nitesh_Dhanjani/BlackHat_EU_2011_Dhanjani_Attacks_Against_Apples_iOS-WP.pdf)

在一般情况下，[处理打开网址也应该有帮助](http://handleopenurl.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T17:46:29.200

您不能使用 fb api 向任何用户发送私人消息，您可以在他的墙上发布消息（Feed 帖子）。

# java - 保存附件、数据库或本地存储的最佳方式是什么？

> ID：13918645
> 
> 赞同：0
> 
> 时间：2012-12-17T17:06:19.430
> 
> 标签：java, database

下午好，我想知道保存附件、数据库（二进制文件）或本地存储的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:08:20.853

这取决于。除非您有任何特定要求，否则我会使用本地存储，因为它更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:09:03.133

对于大多数基于 Web 的应用程序，通常将数据存储在文件系统而不是数据库上。

DB 的优势在于单一来源的备份和安全措施。缺点是开销和连接（每个连接的一些数据库费用）。

我个人会将二进制数据保留在数据库之外，仅用于性能问题。每个问题都有一个独特的答案。

# ipad - presentRenderbuffer 使用内存？

> ID：13918646
> 
> 赞同：1
> 
> 时间：2012-12-17T17:06:24.647
> 
> 标签：ipad, opengl-es

我有如下简单的绘图代码 - 重复调用绘制多个对象，然后调用 glBindRenderbufferOES 和调用 presentRenderbuffer -

对象绘制得很好，但是 - 对 presentRenderBuffer 的调用会在每次调用时分配大量内存

我已经生成并绑定了帧和渲染缓冲区 - 一次 - 然后再也没有真正对它们做任何事情 -

我应该在每次调用 presentRenderBuffer 后清除缓冲区吗？还是有其他方法可以在调用后归还内存？

```
// these four calls made for each object
Loop over objects
    glVertexPointer(3, GL_FLOAT, 0, ...
    glTexCoordPointer(2, GL_FLOAT, ...
    glNormalPointer(GL_FLOAT, 0, ...
    glDrawArrays(GL_TRIANGLES, 0,...

// then, one-time call to these
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES]; 
```

# javascript - 蒂耶斯VS。节点.js

> ID：13918647
> 
> 赞同：2
> 
> 时间：2012-12-17T17:06:35.140
> 
> 标签：javascript, node.js

我刚刚发现了[teajs](http://code.google.com/p/teajs/)。[现在我想知道，与node.js](http://nodejs.org/)相比，主要优点/缺点是什么。我知道，teajs 是一个基于 FastCGI 的网络服务器，而 node.js 是一个可以运行服务器应用程序的独立 JavaScript 引擎。但除此之外，还有什么明显的区别？（我找不到与 Google 比较好的文章。）

# python - Python，打印列表并没有给我想要的输出

> ID：13918652
> 
> 赞同：1
> 
> 时间：2012-12-17T17:06:53.440
> 
> 标签：python, list

因此，假设我在列表 A 中有一个包含 200 个数值的列表。我想创建一个列表 B，将列表 A 分成 4 个集群，所以我会得到 50 个集群。在列表 BI 中，希望为每个包含 4 个值的集群创建一个列表，因此列表 B 中将包含 50 个列表。

我将使用我的来源解释我的问题：

```
 from pprint import pprint

    FileValuelist = []

    def DetermineClusterNumber(File):               #determine digits in a cluster
            Lines = open(File, "r")
            i = 0 # used for iterating through the lines
            FirstLine = Lines.readline()
            for char in FirstLine:                  # read through first line, till hyphen.
                    if char != "-":
                            i += 1
                    elif char == "-":
                            return i # Return number of digits in the cluster 

    def ReadLines(File, Cluster_Number):
            Lines = open( File, "r" )
            for Line in Lines:
                    for char in Line:
                            if char != "-":
                                            FileValuelist.append(char)

    def RemoveNewlines(Rawlist):
            for x in range(len(FileValuelist)-9):
                    if FileValuelist[x] == "\n":
                            FileValuelist.remove(FileValuelist[x])
                    if FileValuelist[x] == "\r":
                            FileValuelist.remove(FileValuelist[x])

    Cluster_Number = DetermineClusterNumber("Serials.txt") # Amount of chars in a cluster. Example: 1234-2344-2345\. clusternumber = 4
    ReadLines ("Serials.txt", Cluster_Number)
    RemoveNewlines(FileValuelist)

    list_iterater = 0

    FinishedList = ([[None]*(Cluster_Number)])*((len(FileValuelist)))
    amount_of_clusters = len(FileValuelist)/Cluster_Number

    for x in range(0, amount_of_clusters):
            for y in range(0, Cluster_Number):
                    FinishedList[x][y] = FileValuelist[list_iterater]
                    list_iterater += 1

    pprint(FinishedList) 
```

使用 serials.txt 包含：

```
 4758-8345-1970-4486-2348
    2346-1233-3463-7856-4572
    6546-6874-1389-9842-4185
    9896-4688-4689-6455-4712
    9541-5621-8414-7465-5741
    4545-9959-5632-6845-1351
    5643-2435-5854-6754-8749
    7892-3457-8923-4572-5397
    5623-5698-5468-5476-9874
    8762-3487-6123-7861-2679 
```

当我运行它时，我希望它在一个包含 50 个拆分 50 个列表的列表中打印 serials.txt。但是，当我运行它时，它会打印出 [2,6,7,8] 五十次。那是最后一个集群。所以我猜问题出在第 39 行的某个地方。我已经尝试查看在第 41 行为 FinishedList 分配了什么值，并且每次都是正确的值（所以不是 2、6、7、9，就像列表是打印出来）。我已经重新检查了 x 和 y 迭代器（是的，我知道它是拼写迭代器），它们也是正确的。

那么我的代码有什么问题使它打印最后一个集群五十次？顺便说一句，如果你不知道，我正在使用 Python 2.7。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:12:21.823

这条线没有做你认为它正在做的事情：

```
FinishedList = ([[None]*(Cluster_Number)])*((len(FileValuelist))) 
```

它存储对同一`[None, None, None... None]`列表的引用，`len(FileValuelist)`时间（`*`操作员基本上执行浅拷贝）。如果要确保它创建*新*列表，最简单的方法是使用[列表推导](http://carlgroner.me/Python/2011/11/09/An-Introduction-to-List-Comprehensions-in-Python.html)。

```
FinishedList = [[None] * Cluster_Number for _ in xrange(len(FileValuelist))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:11:35.367

该行的第二个乘法`FinishedList = ([[None]*(Cluster_Number)])*((len(FileValuelist)))`实际上并没有创建`len(FileValuelist)`新列表，只是创建了许多指向原始列表的指针。当你改变其中任何一个时，它们都会改变。不久前我问[了同样的问题](https://stackoverflow.com/questions/9549403/python-list-of-lists-access-to-individual-elements)，请参阅那里接受的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:12:08.437

您初始化的方式`FinishedList`，最终会得到一个列表，其中包含对同一子列表的引用。然后，当您分配给 时`[x][y]`，您将覆盖每次反复引用的相同值。您不需要在 Python 中初始化列表，因此请尝试`append()`在第二个循环中使用。

```
for x in range(amount_of_clusters):
    offset = x * Cluster_Number
    FinishedList.append(FileValueList[offset:offset + Cluster_Number]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:11:52.497

你为什么要以如此复杂的方式来做呢？你可以用两行代码完成你想要的：

```
>>> with open('serials.txt') as data: 
...    clusters = [[int(digit) for digit in cluster] for line in data for cluster in line.strip().split('-')] 
```

然后`clusters`包含：

```
[
    [4, 7, 5, 8],
    [8, 3, 4, 5],
    [1, 9, 7, 0],
    # ...
] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T18:14:18.963

伙计，没有冒犯，但你的代码非常不符合 Python 标准 - 寻找一些关于代码样式和列表的教程。这整个问题（如果我理解正确的话）可以用几行简单的代码来解决。

据我了解，您希望将文件中的每个四位数值转换为其数字列表并将这些数字存储在另一个列表中，这意味着输入

```
"1234-5678-9999" 
```

结果应该是

```
[[1,2,3,4], [5,6,7,8], [9,9,9,9]] 
```

这可以像这样简单地实现：

```
with open("serials.txt") as f:
    clusters = [c for line in f for c in line.strip().split("-")]
    digits = [list(c) for c in clusters] 
```

Digits 现在包含每个集群的字符列表。如果您需要将值作为整数，您可以更改`list(c)`为嵌套列表理解，例如`[int(x) for x in c]`.

# php - 使用组合 - 如果类型错误，是否应该抛出异常

> ID：13918655
> 
> 赞同：0
> 
> 时间：2012-12-17T17:06:58.620
> 
> 标签：php, oop, interface, composition

使用组合时，如果对象不属于接口类型，则应显式抛出异常。

一个例子是：

```
$myObject = new MyConcreteTypeA(); 
```

现在，我的界面是`MyInterface`.

那么，我是否应该检查`$myObjec`t 的类型以确保它`MyInterface`在使用之前实现，如果没有则抛出错误？

IE

```
if (! ($myObject instanceof MyInterface)) {
    throw new Exception('Invalid type');
} 
```

或者这只是粗鲁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:34:11.907

> 那么，我是否应该在使用前检查它的类型`$myObject`以确保它实现`MyInterface`，如果没有则抛出错误？或者这只是粗鲁？

如果您已经竭尽全力创建接口，并且期望对象的事物也期望它们实现该接口，那么是的，您绝对应该检查并抱怨。

[将您的方法与鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)进行对比。在批评部分，它谈到了两种不相关的方法之间的混淆。我将调整他们的示例，使其适用于 PHP 而不是 Python*：

> 您可以轻松地创建一个名为 Finger 的类，该类期望实现该`press()`方法的类对其执行操作。但是，名为 Trousers 的类也可能实现该`press()`方法。使用 Duck Typing，为了防止奇怪的、难以检测的错误，开发人员需要了解该方法的每个潜在用途`press()`，即使它在概念上与他或她正在处理的内容无关。

如果您只在尝试处理裤子时才处理它们是绝对关键的*，*那么`press()`您必须进行检查。如果您的代码不关心被`press()`编辑的内容，只要它*确实*被`press()`编辑，那么您可以丢弃您的支票。

^(* 原始示例使用属性和方法。Python 中的属性和方法共享相同的命名空间。尝试将属性用作方法会更加灾难性，但不适用于 PHP。)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T19:03:23.377

PHP 不仅是[动态类型](http://en.wikipedia.org/wiki/Type_system#Dynamic_typing)的，而且是[弱类型](http://en.wikipedia.org/wiki/Type_system#Strong_and_weak_typing)的。您通过检查`$myObject`实现给定接口所做的事情以某种方式补充了该语言中缺乏更结构化的类型系统的情况。如果您想这样做，您可以，但是您可能需要考虑一些问题：

*   您所做的检查将在运行时执行，因此您不会从动态类型转换为静态类型。换句话说，如果您的检查失败，它仍然会在运行时失败。
*   如果您想与该理念保持一致，则可能需要在整个代码中添加此类检查。然后，您可能会考虑转向[防御性编程风格](http://en.wikipedia.org/wiki/Defensive_programming)（注意：我注意到这种风格的粉丝）。
*   您可能还想考虑[PHP 类型提示](http://php.net/manual/en/language.oop5.typehinting.php)。
*   通过进行这种检查，您将违反 PHP 类型哲学，这几乎是[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)。

从我的角度来看，在整个代码中采用同质的工作模式很重要，因此仅将一些分散的`instanceof`或`is_a`放在某些方法中并不是一个好习惯。如果您觉得 PHP 类型系统对您来说不够好/不够安全，您可能需要考虑：

*   如果可以，请切换到另一种类型系统使您更舒适的语言（例如 Java 或 C#）。
*   依靠额外的工具，比如结合[PHPUnit](http://www.phpunit.de/manual/current/en/)和[Validators](http://research.quanbit.com/category/validators/) [*] 来让你对你的代码更有信心。

高温高压

[*] 免责声明：我在 Quanbit Research 工作。

# string - erlang函数在何时比较字符串之后调用

> ID：13918659
> 
> 赞同：0
> 
> 时间：2012-12-17T17:07:11.493
> 
> 标签：string, function, erlang, compare, mergesort

尝试使用合并排序对字符串列表进行排序。我的问题是我不知道如何比较字符串的第一个字母。

我的想法是这样，但这会导致两个问题：

```
merge([],X) -> X;
merge(X,[]) -> X;
merge([X|XS],[Y|YS]) when check_swap(X,Y)-> [X] ++ merge(XS,[Y|YS]);
merge([X|XS],[Y|YS]) -> [Y] ++ merge([X|XS], YS).

sort([]) -> [];
sort([A|[]])-> [A];
sort (L) -> Len=length(L) div 2,
merge(sort(lists:sublist(L, Len)),sort(lists:nthtail(Len, L))).

%check if strings should be swaped or not
change_strings(StingA,StringB) when lists:nth(1,StingA)<lists:nth(1,StringB)->true;
.... 
```

1.  问题是我不能在 when、case 或 if 之后调用函数。这样做的更好方法是什么？

    ./textSort.erl:28：对本地/导入函数 check_swap/2 的调用在警卫中是非法的

2.  问题：如何将各种条件与 AND 和 OR 结合起来。我什么时候使用 ", ; or and orelse andalso" 以及如何像在其他语言中一样将它们与 () 顺序结合起来？有没有更好的办法

    change_strings(X,Y) 当 (A < B,B==3) ; (A < B,B==4) -> 真；

愿它很容易失败。刚开始使用erlang。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:15:31.887

1) 只需提前一步调用该函数

```
X1 = change_strings(X),
if
    X1 == true ->
        doSomething();
    true ->
        doSomethingElse()
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:18:42.137

2）你可以这样做：

```
change_strings(X,Y) when (A < B and B==3) or (A < B and B==4) -> true; 
```

在其他情况下，您可以使用开关盒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:19:39.217

您不需要比较字符串的第一个字母，因为您可以在字符串上使用关系运算符：

```
1> "a" < "b".
true
2> "b" < "a".
false 
```

但是，如果您确实想比较字符串的第一个字母，请记住字符串只是一个列表，因此您可以像处理任何列表一样使用 cons 运算符进行模式匹配：

```
get_first_letter([[FirstLetter|FirstString]|Rest]) -> FirstLetter.

1> whatever:get_first_letter(["Hello", "There"]).
72 
```

72 是 'H' 的 ASCII 值（如果支持其他字符集，则可能具有不同的值）。您现在可以在警卫中使用 FirstLetter，例如

```
get_first_letter([[FirstLetter|FirstString]|Rest]) when FirstLetter == $H -> FirstLetter. 
```

现在 get_first_letter 仅在第一个字符串的第一个字母是 H 时才会匹配。请注意，上面的示例假设一个字符串列表；您可以轻松推断出接受两个字符串列表的函数。

# php - 动态 gif 缩略图

> ID：13918660
> 
> 赞同：0
> 
> 时间：2012-12-17T17:07:19.430
> 
> 标签：php, html, gif, animated-gif

因此，假设我的服务器文件夹中有 10 个动画 gif。

我想为这些 gif 生成非动画缩略图。我怎样才能动态地做到这一点，而不必将任何缩略图保存到文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:15:40.553

imagemagick 是一种选择，GD 库已经与 PHP 捆绑在一起：http: [//us1.php.net/manual/en/function.imagecopyresized.php](http://us1.php.net/manual/en/function.imagecopyresized.php)

通过不保存图像，请注意您的脚本最终可能会占用资源。它也可能会阻塞较大的图像。

# java - Junit 在法语字符串断言上失败

> ID：13918661
> 
> 赞同：2
> 
> 时间：2012-12-17T17:07:26.483
> 
> 标签：java, eclipse, maven, maven-2, junit

我有一个在大多数机器上运行良好的单元测试，但是一个 ubuntu 盒子似乎无法比较特殊字符“？”。字符本身应该是â。在我的机器上，eclipse 控制台通常会显示我们应该使用哪种编码来确保它有效。

```
The extracted text was wrong expected:<...tons. Il jette le bl[?me sur ....

but was:<...tons. Il jette le bl[?me sur ..... 
```

测试在 Eclipse Juno 中使用 Maven 2 使用 java 1.7 运行

有没有人有想法...？

**编辑：**

此行为仅在通过 Maven 测试运行单元测试时出现，而不是在执行运行 As Junit 测试时出现......在 Maven 配置中，我们有

```
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding> 
```

这是为 Maven 用户设置和模块的 pom.xml 文件中设置的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:22:11.700

尝试将 UTF-8 编码放在您的`maven-compiler-plugin`内部`<build>`部分`pom.xml`

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>2.5.1</version>
  <configuration>
    <source>1.6</source>
    <target>1.6</target>
    <encoding>UTF-8</encoding>
  </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-11T10:05:59.753

我们设法通过@Slawomir Jaranowski 解决这个问题来解决[这个](https://stackoverflow.com/questions/40791461/maven-install-does-not-encode-in-utf-8-even-if-configured)问题。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
    <argLine>-Dfile.encoding=${project.build.sourceEncoding}</argLine>
  </configuration>
</plugin> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:14:40.943

我最近在 JUnit 中遇到了 Unicode 问题。您可以尝试在 JUnit 测试或程序本身中使用有问题的 Unicode 字符的转义符号。

在您的情况下，请尝试使用 /u0032 而不是使用 â。

# javascript - jQuery Sticky Div 和滚动到仅在一页上工作的顶部插件

> ID：13918662
> 
> 赞同：0
> 
> 时间：2012-12-17T17:07:27.510
> 
> 标签：javascript, jquery, css, web-applications, plugins

我正在建立一个使用无限滚动的网站。因为页面可以增长这么久，所以我添加了一个插件，可以让侧边栏和广告随着你向下滚动，所以它总是在视图中。同样在用户滚动 100 像素后，右下角会显示滚动到顶部按钮。

该网站是用 python 编写的，有一个包含 jquery、nav 和侧边栏的主模板，然后还有多个其他模板，这些模板提供了网站上的主要内容。

我的问题是这两个插件只在 1 页上工作，而不是其他插件，特别是那些真正需要粘性 div 和滚动到顶部功能的插件。

这是它不起作用的主页：http: [//goo.gl/GKnfW](http://goo.gl/GKnfW)

您在此处上传图片后登陆的页面：http: [//goo.gl/UKKnO](http://goo.gl/UKKnO) 是插件正常工作的地方。

我已经通过验证器运行我的网站并纠正了所有可能导致此问题的错误。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:12:36.030

很多时候，这个问题来自某个地方的 jQuery 冲突。您还有其他可能发生冲突的库吗？

尝试像这样包装您的 jQuery 代码，`jQuery(document).ready(function(){ .....`而不是使用 $ 或使用 noConflict `jQuery.noConflict();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:32:03.113

我认为这里更简单的解决方案是固定侧边栏。我注意到您正在使用引导程序-查看此相应 stackoverflow 帖子上的 jsfiddle。使用那里显示的 CSS，它应该可以在更简单的非 JS 实现中为您提供所需的功能。

请参阅此处： [固定侧边栏导航在流体推特引导程序 2.0 (StackOverflow)](https://stackoverflow.com/questions/9350818/fixed-sidebar-navigation-in-fluid-twitter-bootstrap-2-0)

# javascript - 同位素插件初始加载动画

> ID：13918664
> 
> 赞同：1
> 
> 时间：2012-12-17T17:07:44.430
> 
> 标签：javascript, jquery, animation, jquery-plugins, jquery-isotope

我正在尝试为项目设置动画，以便它们从 0 淡入，而不是从 0 开始增大，但无法弄清楚如何做到这一点。

出于某种原因，我在文档或此处找不到任何关于这样做的参考。

我不想在单击项目时为它们设置动画，只是每个项目的初始加载动画。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T08:00:00.357

也许如果您将动画模式设置为使用 jQuery 而不是 CSS（看不到您正在使用哪个），您可以将其设置为在页面加载时初始化对象时使用一种动画，然后将其切换为使用其他类型的过滤/排序或其他类型的动画。

如果这不是一个选项，那么您可以进入同位素 js 文件并修改转换 - 据我所知，它只使用标准 jQuery 转换。

跳，有帮助？！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-09T14:20:25.560

为您的 itmes:`isotope-item`和容器设置 css 类：`isotope`。

[http://isotope.metafizzy.co/docs/animating.html](http://isotope.metafizzy.co/docs/animating.html)

# javascript - Fusion Tables + Google Maps API，删除信息窗口/卡片/气球？

> ID：13918679
> 
> 赞同：4
> 
> 时间：2012-12-17T17:08:39.450
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我已经实现了一个融合表地图来为我的谷歌地图创建国家填充......但是我真的需要摆脱当你点击一个国家时弹出的信息窗口/卡片。我试图格式化卡片，以便没有实际内容，但它根本没有改变卡片。它们仍然显示所有相同的数据，因此它甚至不是一张空卡。

我该怎么做呢？我认为这可能是我需要在谷歌地图的实际 javascript 中实现的东西，因为那是我为形状设置样式的地方。我已经看到了 KML 的 balloonVisibility，尽管那是针对 Google 地球的，我不确定它是否适用（或者如果适用，如何使用它：[https ://developers.google.com/kml/documentation/kmlreference#气球风格](https://developers.google.com/kml/documentation/kmlreference#balloonstyle)）

融合表：[https ://www.google.com/fusiontables/DataSource?docid=1LfVcxsno9k3l2zgKS_fwoyv9vc-ba7aoQEz0aKM](https://www.google.com/fusiontables/DataSource?docid=1LfVcxsno9k3l2zgKS_fwoyv9vc-ba7aoQEz0aKM)

谷歌地图直播：http : [//jsbin.com/ukepah/3/](http://jsbin.com/ukepah/3/)

代码视图：http: [//jsbin.com/ukepah/3/edit](http://jsbin.com/ukepah/3/edit)

这是将 KML/国家形状带到谷歌地图的特定代码：

```
 var layer = new google.maps.FusionTablesLayer({
            query: {
                select: 'geometry',
                from: '1LfVcxsno9k3l2zgKS_fwoyv9vc-ba7aoQEz0aKM'
            },
            styles: [{
                polygonOptions: {
                fillColor: '#5E5E5E',
                fillOpacity: 0.3
                }
              }]
            });
        layer.setMap(map); 
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T18:01:42.943

我通常在构造函数中使用[{suppressInfoWindows:true}](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesLayerOptions)。

{clickable:false} 也可能对您有用。

这是带有建议修改的 FusionTablesLayer 的构造函数：

```
 var layer = new google.maps.FusionTablesLayer({
        suppressInfoWindows: true,
        query: {
            select: 'geometry',
            from: '1LfVcxsno9k3l2zgKS_fwoyv9vc-ba7aoQEz0aKM'
        },
        styles: [{
            polygonOptions: {
            fillColor: '#5E5E5E',
            fillOpacity: 0.3
            }
          }]
        });
    layer.setMap(map); 
    } 
```

# php - PHP Mysql 简化

> ID：13918680
> 
> 赞同：0
> 
> 时间：2012-12-17T17:08:47.910
> 
> 标签：php, mysql

谁能帮我简化一下？我有一个用于查看表中的一堆数据的页面，该页面应该通过 GET 调用接受不同的值。我只是想瘦一点。再次，代码有效，对我来说只是意大利面条。

```
if(!$_REQUEST['foo']){
    $bar = $_REQUEST['bar'];
    if($bar=='all'||!$bar){ $stmt = "SELECT * FROM table
        WHERE qty > 0  and
             somedate >= \"{$start}\"  and
             somedate <= \"{$end}\"
        ORDER BY id desc
        ";}
    else{
    $stmt = "SELECT * FROM table
        WHERE qty > 0  and
             somedate >= \"{$start}\"  and
             somedate <= \"{$end}\"  and
             bar = '$bar'
        ORDER BY id desc
        ";}
}
else{
     switch($_REQUEST['foo']){
       case 'all':
        $stmt = "SELECT * FROM table
          WHERE qty > 0  and
          somedate >= \"{$start}\"  and
          somedate <= \"{$end}\"
          ORDER BY id desc";
        break;
     case 'open':
      $stmt = "SELECT * FROM table
          WHERE qty > 0  and
          closd = 0 and
          somedate >= \"{$start}\"  and
          somedate <= \"{$end}\"
          ORDER BY id desc";
      break;
     case 'closed':
      $stmt = "SELECT * FROM table
          WHERE qty > 0  and
          closd = 1 and
          somedate >= \"{$start}\"  and
          somedate <= \"{$end}\"
          ORDER BY id desc";
      break;
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:25:38.523

假设您在程序中有一些健全性检查，这将处理 switch() 。

```
<?php // RAY_temp_andy_foster.php
error_reporting(E_ALL);

$closd = '1=1';
switch($_REQUEST['foo'])
{
    case 'all':    $closd = '1=1';       break;
    case 'open':   $closd = 'closd = 0'; break;
    case 'closed': $closd = 'closd = 1'; break;
}
$stmt = "SELECT * FROM table WHERE qty > 0 AND somedate >= \"{$start}\"  AND somedate <= \"{$end}\" AND $closd ORDER BY id desc"; 
```

var_dump($stmt);

HTH，~雷

# ruby-on-rails - 动态定义 Mongoid 模型

> ID：13918686
> 
> 赞同：1
> 
> 时间：2012-12-17T17:09:19.990
> 
> 标签：ruby-on-rails, mongoid, metaprogramming, metamodel

如果有人可以为我批评这种方法，我将不胜感激。

我正在构建一个应用程序，用户可以在其中定义多个属性并生成一个表单以与他的用户共享，就像[Wufoo](http://www.wufoo.com)一样。

这是我的方法。

用户 has_many sources & Source embeds_many source_attributes

在这里，所有用户定义的字段都存储在 SourceAttributes 中。当我需要生成表单时，我会像这样动态生成模型。

```
#source.rb

def initialize_set
model_name = self.set_name.gsub(' ','').classify

# Unique Class name
klass_name = "#{model_name}#{self.user.id}"
object = self

klass = Class.new do
  include Mongoid::Document

 # Collection names have to be set manually or they don't seem to work
  store_in collection: self.collection_name

 # Pick up attributes from SourceAttribute & define fields here
  object.source_attributes.each do |m|
    field m.field_name.gsub(' ','').underscore, type: object.class.mapping[m.field_type]
  end

  def self.collection_name
    self.name.tableize
  end

 end

 # I get a warning here when the class is re-loaded. Should i worry? I'm considering Object.send :remove_const here
 Object.const_set klass_name, klass

end 
```

使用这种方法，我将为用户定义的每个表单创建一个单独的集合。这似乎有效，但我有几个问题。

*   **类型安全**

~~我在上面生成的字段似乎不是类型安全的。我能够将字符串保存在整数字段中。~~

~~类型似乎已正确设置。我通过调用 klass 上的字段并检查 options[:type] 属性再次检查了这一点。~~

我使用的是简单的形式，它不能自动识别类型。我必须使用 as 明确提及它：

*   **可扩展性**

我不确定我动态生成模型的方法是否正确。我以前从未见过有人用过这个。

**转移到一个单独的问题。请检查评论。**

~~**更新 1：**~~

所以我错了。我的模型是类型安全的，但它似乎默默地失败了。有没有办法让它抛出异常？

```
# age is correctly defined as an Integer
klass.fields.slice "age"
=> {"age"=>#<Mongoid::Fields::Standard:0xb7edf64 @name="age", @options={:type=>Integer, :klass=>Engineer50bc91a481ee9e19ab000006}, @label=nil, @default_val=nil, @type=Integer>}

# silently sets age to 0
 klass.create!(age: "ABC")
 => #<Engineer50bc91a481ee9e19ab000006 _id: 50cff12181ee9e16f1000003, _type: nil, employee_code: nil, name: nil, age: 0, years: nil, number: nil>

 # returns true when saved
 object = klass.new
 object.age = "ABC"
  => "ABC" 
 object.save
  => true 
```

PS：这是我第一次使用 mongoid :)

**更新 2：**

我对整数验证的问题可能与 Ruby 而不是 mongoid 有关。

正如我之前的更新中提到的，

```
# silently sets age to 0
klass.create!(age: "ABC")
 => #<Engineer50bc91a481ee9e19ab000006 _id: 50cff12181ee9e16f1000003, _type: nil, employee_code: nil, name: nil, age: 0, years: nil, number: nil> 
```

我相信“ABC”正在被打字

```
"ABC".to_i
 => 0 
```

我试图通过像这样使用 validates_numericality_of 来克服这个问题

```
object.model_attributes.where(field_type: "Number").map(&:field_name).each do |o|
 validates_numericality_of o.gsub(' ','').underscore.to_sym
end 
```

不幸的是，这也会检查是否存在。我试过这个解决方法

```
validates_numericality_of o.gsub(' ','').underscore.to_sym, allow_nil: true 
```

~~但这完全忽略了数值验证。也尝试了allow_blank，但没有运气。~~

# javascript - 如何在新的 JS 哈希表中使用变量作为键

> ID：13918687
> 
> 赞同：1
> 
> 时间：2012-12-17T17:09:21.637
> 
> 标签：javascript

javascript中有没有一种方法可以将新哈希表中的变量用作键

例子

```
var key1 = "test1";
var key2 = "test2";

var table = { key1: true, key2: true }; 
```

但我希望这张桌子最终成为

```
{ test1: true, test2: true } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:11:13.123

您可以通过以下示例使用它：

```
var key1 = "test1",
  key2 = "test2",
  table = {};

table[ key1 ] = true;
table[ key2 ] = true;

console.log( table ); // { test1: true, test2: true } 
```

请参阅 jsFiddle[演示](http://jsfiddle.net/antyrat/nwRnc/)。

所以访问它们就像

```
console.log( table.test1 ); 
```

或者

```
console.log( table[ key1 ] ); 
```

或者

```
console.log( table[ "test1" ] ); 
```

# java - 公平与不公平

> ID：13918689
> 
> 赞同：12
> 
> 时间：2012-12-17T17:09:32.400
> 
> 标签：java, multithreading

我已经通过`RentrantLock`. 我写了一个模拟吃饭哲学家的小程序。

每个philospher都有左右叉，它们是`ReentrantLock`s。我已经模拟了 1000 次思考和进食的行为：

```
 for (int i = 0; i < ACT_TIMES; i++) {
            act();
        } 
```

`act`在哪里

```
private void act() {
        think();
        eat();

    } 
```

`Think`没意思，它只是睡了一段时间。这是`eat`方法

```
private void eat() {
        try {
            if (left.tryLock(0, TimeUnit.MILLISECONDS)) {
                if (right.tryLock(0, TimeUnit.MILLISECONDS)) {
                    log("eating");
                    eatCount++;
                    try {
                        Thread.sleep(EAT_TIME);
                    } catch (InterruptedException e) {
                    } finally {
                        left.unlock();
                        right.unlock();
                    }
                } else {
                    left.unlock();
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } 
```

主要方法：

```
 Lock[] forks = new Lock[5];
        for (int i = 0; i < forks.length; i++) {
            forks[i] = new ReentrantLock();
        }
        Philosopher p1 = new Philosopher(0, forks[1], forks[0]);
        Philosopher p2 = new Philosopher(1, forks[2], forks[1]);
        Philosopher p3 = new Philosopher(2, forks[3], forks[2]);
        Philosopher p4 = new Philosopher(3, forks[4], forks[3]);
        Philosopher p5 = new Philosopher(4, forks[0], forks[4]);
        ExecutorService exec = Executors.newFixedThreadPool(5);
        exec.submit(p1);
        exec.submit(p2);
        exec.submit(p3);
        exec.submit(p4);
        exec.submit(p5); 
```

在所有 5 个线程完成后，我为每个哲学家打印eatCount。`new ReentrantLock(true)`而且这些值对于公平（ ）和不公平（`new ReentrantLock()`）纪律并没有太大差异。

（第一个数字是哲学家的数字）

公平锁：

```
0 344
1 348
2 366
3 359
4 363
Total number of eating 1780 
```

不公平的锁：

```
0 338
1 338
2 339
3 341
4 352
Total number of eating 1708 
```

我已经预料到不公平锁定会导致饥饿，我的意思是一些哲学家/哲学家的 eatCount 比其他人大得多，但饥饿并没有发生。为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-17T17:32:07.653

释放锁的线程有更好的机会重新获得锁，因为它很忙，而其他线程可能被阻塞。忙等待不会显示这一点，因为每个线程都有相同的机会获取锁。可能释放锁的人可能处于轻微劣势。

```
final ReentrantLock lock = new ReentrantLock();
for (int i = 0; i < 5; i++) {
    final int finalI = i;
    new Thread(new Runnable() {
        @Override
        public void run() {
            for (int j = 0; j < 5; j++) {
                lock.lock();
                System.out.println("locked by " + finalI);
                lock.unlock();
            }
        }
    }).start();
} 
```

印刷

```
locked by 0
locked by 0
locked by 0
locked by 0
locked by 0
locked by 1
locked by 1
locked by 1
locked by 1
locked by 1
locked by 2
locked by 2
locked by 2
locked by 2
locked by 2
locked by 3
locked by 3
locked by 3
locked by 3
locked by 3
locked by 4
locked by 4
locked by 4
locked by 4
locked by 4 
```

但是如果我用 true 使锁公平，我会看到

```
locked by 0
locked by 1
locked by 2
locked by 3
locked by 4
locked by 0
locked by 1
locked by 2
locked by 3
locked by 4
locked by 0
locked by 1
locked by 2
locked by 3
locked by 4
locked by 0
locked by 1
locked by 2
locked by 3
locked by 4
locked by 0
locked by 1
locked by 2
locked by 3
locked by 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:27:18.970

全部删除`sleep()`，您可能会看到一些不公平。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T13:16:18.853

@Maks，您是否尝试过为 EAT_TIME 设置随机值？

这可能会给逻辑带来一些不公平。

# python - 为什么 Python 在 Class 命名空间中对列表和整数的处理方式不同？

> ID：13918693
> 
> 赞同：0
> 
> 时间：2012-12-17T17:09:37.953
> 
> 标签：python, class, namespaces

这两个类定义的结构相同，除了在奇怪的（）类定义中，属性“d”是一个列表，而在 normal() 类定义中它是一个 int。我不明白为什么怪异（）类会导致 self.d = d，而类 normal（）则不是这种情况。为什么在这种情况下 Python 对待 int 和 list 的方式不同？

```
class weird:
    def __init__(self):
        d = [1,2,3]
        self.d = d
        for x in range(3):
            d[x] = 10+x 
        print "d =", d
        print "self.d =", self.d

class normal:
    def __init__(self):
        d = 1
        self.d = d
        d = 11
        print "d =", d
        print "self.d =", self.d 
```

当我运行代码时，我得到

```
>>> a=weird()
d = [10, 11, 12]
self.d = [10, 11, 12]
>>> b=normal()
d = 11
self.d = 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T17:20:12.063

您将分配与对象的突变混淆了。

在一种方法中，您为 分配了新值`d`，从而更改了它所指向的内容：

```
d = 11 
```

但在另一种方法中，您更改了*包含*在以下内容中的值`d`：

```
d[x] = 10 + x 
```

注意`[x]`那里；本质上，您是在告诉 python 这样做：

```
d.__setitem__(x, 10 + x) 
```

`d`指向列表的变量的值永远不会改变。引用的列表中的值`d`确实发生了变化。

看看我以前的答案，它更详细地说明了这两个语句之间的区别：[Python list does not reflect variable change](https://stackoverflow.com/questions/12080552/python-list-doesnt-reflect-variable-change-new-to-python/12080644#12080644)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:23:50.713

**事实上，这里的语言是完全一致的。您正在观察两种不同的行为，因为您正在执行两种根本不同的操作。**

的前两行在`__init__`两个类中都是一致的（除了不同类型的`d`）：

```
class WeirdOrNormal:
    def __init__(self):
        d = ... # 1 or [1, 2, 3]
        self.d = d 
```

此时，两者都`d`指`self.d`代同一个对象。

然而，在那之后，这两个类别出现了分歧：

1.  `weird`通过引用修改对象：

    ```
    for x in range(3):
        d[x] = 10+x 
    ```

    由于两者都`d`指`self.d`代同一个对象，因此可以通过两者观察到变化。

2.  `normal`重新绑定`d`以指向除以下之外的某个地方`self.d`：

    ```
    d = 11 
    ```

    通过这样做，您已经断开了 和 之间的`d`链接`self.d`。他们现在完全独立了。

如果您要更改`weird`以重新绑定引用，就像这样`normal`做一样，您会看到这两个类的行为彼此一致：

```
class notweird:
    def __init__(self):
        d = [1,2,3]
        self.d = d
        d = [10+x for x in self.d]
        print "d =", d
        print "self.d =", self.d

a = notweird() 
```

这打印

```
d = [11, 12, 13]
self.d = [1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:16:19.397

对于文档：

> 值可以改变的对象称为可变对象；其值一旦创建就不可更改的对象称为不可变对象。（包含对可变对象的引用的不可变容器对象的值可以在后者的值更改时更改；但是容器仍然被认为是不可变的，因为它包含的对象集合不能更改。因此，不可变性并不是严格意义上的与具有不可更改的值相同，它更微妙。）对象的可变性由其类型决定；例如，数字、字符串和元组是不可变的，而字典和列表是可变的。

在你的情况下`list`是可变的，`int`是不可变的。没什么奇怪的。

更多关于[数据模型](http://docs.python.org/2/reference/datamodel.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:17:30.267

在第一个示例中，两者`d`和都`self.d`指向一个可变对象。当您将十个添加到对象中的元素时，您正在修改该可变对象。因为`d`和都`self.d`指向那个对象，所以他们都“看到”了结果。

在第二个示例中，您重新分配 d 以指向*不同*的不可变数字，因此`d`并`self.d`指向两个不同的事物。

请注意区别：在一种情况下，它们都指向您正在更改的相同值，而在另一种情况下，它们指向两个不同的值。

# adfs2.0 - SAML 2 LogoutRequest 中缺少目标 URI

> ID：13918694
> 
> 赞同：2
> 
> 时间：2012-12-17T17:09:41.547
> 
> 标签：adfs2.0, saml-2.0

我正在努力让应用程序与 ADFS 一起使用，并且收到错误“MSIS1010：签名的 SAML 消息必须指定目标 URI”。在 AD FS 2.0 调试日志中。

SAML 请求的开头部分如下所示：

```
<saml2p:LogoutRequest xmlns:saml2p="urn:oasis:names:tc:SAML:2.0:protocol"
        ID="[a-hex-string]" 
        IssueInstant="2012-12-17T15:40:45.027Z" 
        Version="2.0"> 
```

我是否认为这里也应该有一个 Destination 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:36:36.347

是 Destination 是 LogoutRequest 中的一个属性。如果消息已签名，则必须使用该属性。

Destination 属性的规范可以在 SAML 规范 [http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf的第 36 页找到](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf)

这是一篇更多关于此的帖子。 [http://social.technet.microsoft.com/wiki/contents/articles/3463.ad-fs-2-0-the-admin-event-log-contains-error-event-320-msis1010-signed-saml-消息必须有目的地uri-specified.aspx](http://social.technet.microsoft.com/wiki/contents/articles/3463.ad-fs-2-0-the-admin-event-log-contains-error-event-320-msis1010-signed-saml-message-must-have-destination-uri-specified.aspx)

# sas - SAS 加载文件 txt

> ID：13918697
> 
> 赞同：0
> 
> 时间：2012-12-17T17:10:00.043
> 
> 标签：sas

你能帮帮我吗？

我有一个txt文件：

```
1 1 8 2 004 149 44.9 Brabant
14 7 7 9 9
32 10 13.5 165 20 7 21 19.9 7
1 1 9 2 004 133 32.5 Liege
12 7 6 11 8
14 18 20.9 140 22.9 18 15 4.4 5 
```

其中前三行分析了相同的 ID，分析的变量是：

```
anne, sex, nat, age, prov, tai, pds, ptr, pbi, pss, psi, pmo, dyn, efl, fp, 
slo, cna, flt, rsa, sbf, ll. 
```

如何在 SAS 中加载文件并给出行和列的名称？

非常感谢，对不起！！！酶联免疫吸附试验

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:57:08.040

听起来您的输入文件有三行数据用于一次观察；我按照您的意图重新格式化了您的原始问题。

`INPUT`如果这是真的，您只需要在一个语句中阅读所有三行，使用`/`运算符跳到下一行。换句话说，试试这个：

```
data STAT2012.data2004; 
    infile 'C:\Users\acer\STAT2012\data2004.txt';
    input ID
          anne sex nat $ age prov tai pds $ 
        / ptr pbi pss psi pmo 
        / dyn efl fp slo cna flt rsa sbf ll;
run; 
```

当然，您应该确保变量名称与您的文件匹配并且结果符合您的需要。我给你一个非常基本的例子只是为了让你开始。

**更新：** 我的示例基于您发布的示例数据。我假设第一列是一个 ID 变量，否则您的示例数据比您的示例具有更多的值。

在您的情况下，最好的方法是使用`INFORMAT`语句来定义每个变量的读取方式。这将要求您了解每个变量的类型（字符或数字）以及每个字符变量的最大长度。对于数字变量，您可以只使用`best32.`信息。如果你实在不知道字符变量的最大长度，你可以试试用`$200.`，它会让每个变量长 200 个字符。

例如：

```
data STAT2012.data2004; 
    infile 'C:\Users\acer\STAT2012\data2004.txt';

    /* Define the variables that will be read */
    informat 
    /* First line, 8 variables */
          anne  best32.
          sex   $1.
          nat   $4.
          age   best32.
          prov  best32.
          tai   best32.
          pds   best32\.   
          ptr   $200\.  /* 8th field in your sample, apparently character */

    /* Second line, 5 variables */
          pbi   best32.
          pss   best32.
          psi   best32.
          pmo   best32.
          dyn   best32.

    /* Third line, 9 variables */
          efl   best32.
          fp    best32.
          slo   best32.
          cna   best32.
          flt   best32.
          rsa   best32.
          sbf   best32.
          ll    best32.
         unkn   best32.;  /* an unknown variable I invented */

    /* Input the variables in the order they appear in the file.*/
    input anne sex nat age prov tai pds pdr 
        / pbi pss psi pmo dyn 
        / efl fp slo cna flt rsa sbf ll unkn;
run; 
```

`INFILE`请注意，您的报表中不需要 DLM 选项。另请注意，此示例并未读取您提供的示例数据中的所有数据；我发明了一个新变量。

重要的是要记住以正确的顺序读取变量，因为它们出现在源文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:00:33.593

```
data STAT2012.data2004; 
    infile 'C:\Users\acer\STAT2012\data2004.txt' dlm=' ';
    input 
          anne 1-4  sex $6   nat $8  age 10 prov @$11-21 tai @23  pds @25
        / ptr 1-2 pbi 4 pss 6 psi 8 pmo 10
        /dyn 1-2 efl 4-5 fp 7-10 slo 12-14 cna 16-17 flt 19 rsa 21-22 sbf 24-27 ll 29;
run; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T16:51:45.723

我想问题可能不仅仅是位置名称中的单词。您可以通过以下方式克服它（假设最长名称少于 200 个字符）：

```
data data2004; 
  infile 'C:\Users\acer\STAT2012\data2004.txt' truncover;
  input ID
    anne sex nat $ age prov tai pds $200.;
  input ptr pbi pss psi pmo ;
  input dyn efl fp slo cna flt rsa sbf ll;
run; 
```

# .net - Silverlight 5 列表框大小

> ID：13918704
> 
> 赞同：2
> 
> 时间：2012-12-17T17:10:16.630
> 
> 标签：.net, silverlight, listbox, silverlight-5.0

我在 Star 大小的网格列和 Listbox DataTemplate 中的另一个网格中有一个 Silverlight 5 列表框。

我想要做的是为第二列填充 DataTemplate 网格中的可用空间。如下图所示，它仅填充到所包含文本的范围。

如何获取内容以填充可用空间？

```
<ListBox x:Name="TopFaultsListBox" Margin="2" ItemsSource="{Binding TopFaults, Mode=OneWay}" 
            ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectedIndex="-1" Background="{x:Null}" 
            BorderThickness="5" BorderBrush="#FFB1925C" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid Background="#FFE29826">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <TextBlock x:Name="FailureCount" Foreground="Red" FontSize="40" Grid.Row="0" Grid.RowSpan="3" Text="{Binding FaultCount}" Margin="10"/>
                <TextBlock x:Name="AssemblyName" FontSize="20" Text="{Binding AssemblyName}" Grid.Column="1" Grid.Row="1"/>
                <TextBlock x:Name="FaultInformation" FontSize="20" Text="{Binding FaultInformation}" Grid.Column="1" Grid.Row="2"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

![在此处输入图像描述](../Images/1c519c80ea1bad47ab042a300651eeb7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:44:28.110

您需要在 ListBox 中指定 并将`HorizontalContentAlignment`其`ItemContainerStyle`设置为`Stretch`。默认值为左。

```
<ListBox.ItemContainerStyle>
  <Style TargetType="ListBoxItem">
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
  </Style>
</ListBox.ItemContainerStyle> 
```

# php - 唯一的 url slugs（路由）

> ID：13918705
> 
> 赞同：2
> 
> 时间：2012-12-17T17:10:17.723
> 
> 标签：php, mysql, codeigniter, unique, slug

假设我有这个数据库表模式：

```
id |      article          | slug
1    hey guys how are you?  hey-guys-how-are-you? 
```

我正在尝试保持我的数据库路由字段唯一

路线总是像这样骆驼化的消息字段`this-is-a-title-but-now-is-a-route`

所以插入相同的路线会产生`db error of duplicated key`

那么哪个是控制和插入始终唯一路线的好习惯？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:32:55.827

因为您已经标记了 CodeIgniter，所以我建议您预先检查 slug 字段的值，然后在需要时增加该值。CI[字符串助手](http://ellislab.com/codeigniter/user-guide/helpers/string_helper.html)有一个`increment_string`函数可以为您处理这些问题。

`increment_string()`

通过将数字附加到字符串或增加数字来增加字符串。用于创建“副本”或文件或复制具有唯一标题或 slug 的数据库内容。

使用示例：

```
echo increment_string('file', '_'); // "file_1"
echo increment_string('file', '-', 2); // "file-2"
echo increment_string('file-4'); // "file-5" 
```

所以

`this-is-a-route`变成`this-is-a-route-1`

和

`this-is-a-route-1`变成`this-is-a-route-2`

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:35:24.303

您可以使用 php 的[uniqid](http://php.net/uniqid)并且可能使用更多的熵来为您完成这项工作。

此函数的返回值始终具有相同的长度。否则使用更多的熵它的 23 和 13。因此，您可以随时轻松地替换 slug 以获得实际的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:08:09.123

此方法创建一个循环来增加 slug，直到找到一个不存在的。

在您的模型中：

```
public function create_slug($title) {
    $this->ci->load->helper('string');
    $this->ci->load->helper('url');

    $i = 1;
    $max = 10; 
    $slug = url_title($title, '-', TRUE);

    while($i <= $max && ($exist = $this->db->where('slug', $slug)->count_all_results('posts')) != 0) {
        $slug= increment_string($slug, '-');
        $i++;
    }

    //max was reached and the last slug is not unique
    if($i >= $max && $exist > 0) return FALSE;

    return $slug;
} 
```

# c++ - 使用 std::vector.erase(begin(), end()) 或 std::vector.erase(begin(), begin()) 是否安全？

> ID：13918706
> 
> 赞同：4
> 
> 时间：2012-12-17T17:10:21.617
> 
> 标签：c++, stl

我想处理向量中的元素一段时间。为了优化这一点，我不想在处理项目时删除它，并在最后删除所有已处理的项目。

```
vector<Item*>::iterator it;
for(it = items.begin(); it != items.end(); ++it)
{
    DoSomething(*it);

    if(TimeIsUp())
    {
        break;
    }
}

items.erase(items.begin(), it); 
```

什么时候使用擦除安全`it == items.end()`吗？在文档中据说`erase()`会删除 [first,last) 这应该是安全的，但我想确定。

编辑：

使用 std::vector.erase(begin(), begin()) 是否安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:11:34.040

是的，这是正确的——这就是符号的`[first, last)`含义，并且`end()`指向末尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:23:32.170

回答您的编辑：是的，这也很好。`vec.erase(q1,q2)`被定义为擦除“范围内的元素`[q1, q2)`”。在这里，两个论点是相同的。`[q1, q2)`被定义为 const 迭代器的有效范围。如果您可以执行一系列增量来达到，则认为范围是有效的`q1`-`q2`在这种情况下，该序列没有增量。事实上，该标准专门定义了一个空范围：

> 范围`[i,i)`是一个空范围

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:44:34.923

这意味着和`[first,last)`之间的一切，包括但不包括。它表示一个半开集。如果他们使用，也会被包括在内；如果他们使用过，就会被排除在外。`first``last``first``last``[first,last]``last``(first,last)``first``last`

你的代码有问题。如果不等于 ，您希望`it`删除at 的元素。而不是，您应该使用`it``end()``items.erase (items.begin(),it)`

```
if (it != items.end()) {
   items.erase (items.begin(), it+1);
}
else {
   items.clear(); // same as items.erase (items.begin(), items.end())
} 
```

# ejb - 在 Quartz JOB 中定位 EJB

> ID：13918707
> 
> 赞同：1
> 
> 时间：2012-12-17T17:10:21.380
> 
> 标签：ejb, quartz-scheduler

我正在尝试在`InterruptableJob#execute`带有 custom 的石英方法中使用 EJB `ServiceLocator`，但是出现以下异常：

```
org.quartz.JobExecutionException: java.lang.ClassCastException: Cannot cast $Proxy450 to com.test.service.TestService [See nested exception: java.lang.ClassCastException: Cannot cast $Proxy450 to com.test.service.TestService]
    at com.test.job.TestJob.execute(TestJob.java:107) [ecm-ejb.jar:]
    at org.quartz.core.JobRunShell.run(JobRunShell.java:203) [quartz-1.5.2.jar:1.5.2]
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) [quartz-1.5.2.jar:1.5.2] 
```

我该怎么做才能让 EJB 和 Quartz 一起玩？

容器：JBoss AS 7.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:22:01.597

只是管理它与一些反射和 ServiceLocator 一起工作。

# web-services - Sharepoint 代理查询

> ID：13918710
> 
> 赞同：0
> 
> 时间：2012-12-17T17:10:41.917
> 
> 标签：web-services, sharepoint, ssl, proxy

我正在用 PHP 为我们的 Joomla CMS 编写一个 Web 应用程序，该应用程序需要查询在 SSL/HTTPS 下锁定的 SharePoint Web 服务。

我的服务器也在运行 SSL，用户对我的 Web 服务器进行身份验证并提供凭据（公司颁发的证书）。所以现在我知道他们是谁了。

我需要能够为该用户查询我们的 SharePoint 服务器（不同的服务器和不同的人管理它们），但我无法以该用户身份向 SharePoint 进行身份验证。

我需要提供一个高级应用程序证书，它可以查看 SharePoint 中的所有内容并告诉 SharePoint 我正在搜索谁（用户）。然后让 SharePoint 仅返回允许用户查看的那些项目（或列表）。这是代理搜索，对吗？

我可能没有在 Google 中使用正确的搜索词，但我在网络上找不到任何可能对我有帮助的东西。我需要与 SharePoint 人员协调来进行设置，但我什至不知道该告诉他们我需要什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:45:36.967

我学到了一些对熟悉 SSL、证书和浏览器相互通信方式的人来说可能很明显的东西。

首先，客户端向 Web 服务器发送他的公钥和用他的私钥签名的安全连接请求。这是为了对 Web 服务器进行身份验证。

现在 Web 服务器有了他的公钥，但为了打开到 SharePoint 服务器的可信连接，他必须再次使用他的私钥签署安全连接请求。但我只有他的公钥。我无法以客户的名义建立安全连接。

因此，我计划使用可以查看所有内容的代理帐户，告诉 SharePoint 服务器我正在代理此客户端的请求（并附加客户端的身份 - 以 SharePoint 可以识别的形式，即他的专有名称。

不幸的是，SharePoint 软件或管理我们的 SharePoint 实例的人员不知道如何接受代理请求并对其采取行动。所以我放弃了。

TL;DR - 我们的 SharePoint 管理员很难做到这一点。

我将把问题留在这里，以供将来回答。也许有人，某处已经做到了这一点，可以启发我的管理员......

# java - 比较范围内的 Joda LocalDateTime 和 DateTime

> ID：13918712
> 
> 赞同：0
> 
> 时间：2012-12-17T17:10:44.287
> 
> 标签：java, datetime, jodatime

我正在尝试编写一种方法，该方法将采用 a`LocalDateTime`和 a `DateTime`（使用**Joda 1.3**）并确定它们是否在 30 分钟内。这是我能想到的最好的方法，但我*知道*必须有更好/更清洁/更有效的方法：

```
public boolean isWithin30MinsOfEachOther(LocalDateTime localDateTime, DateTime dateTime) {
    return (
        localDateTime.getYear() == dateTime.getYear() &&
        localDateTime.getMonthOfYear() == dateTime.getMonthOfYear() &&
        localDateTime.getDayOfMonth() == dateTime.getDayOfMonth() &&
        localDateTime.getHourOfDay() == dateTime.getHourOfDay() &&
        Math.abs((localDateTime.getMinuteOfHour() - dateTime.getMinuteOfHour())) <= 30
    );
) 
```

更不用说，如果`localDateTime`是 2012 年 12 月 31 日 23:58:00 和`dateTime`2013 年 1 月 1 日 00:01:00，我认为这不起作用。两个不同月份和日期的开始/结束也是如此。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:31:12.510

您是否尝试过使用[Duration](http://joda-time.sourceforge.net/apidocs/org/joda/time/Duration.html)类？

举个例子：

```
 Duration myDuration=new Duration(localDateTime.toDateTime(), dateTime);
  return Math.abs(myDuration.getMillis())<=30*60*1000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:20:47.770

你可以试试

```
return Math.abs(localDateTime.getLocalMillis() 
                - dateTime.toLocalDateTime().getLocalMillis()) < 30 * 60 * 1000; 
```

# asp.net-mvc - 在视图值中显示

> ID：13918713
> 
> 赞同：0
> 
> 时间：2012-12-17T17:10:50.540
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4

我的程序中有以下视图。它有多个 FloorNum，但是当它显示时，它只显示第一个 FloorNum。如何循环它以便显示所有 FloorNum 的值，其中 LocID=xx

```
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.LocID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FloorNum)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RoomNum)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RoomStatus)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model ) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.LocID)

        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FloorNum)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RoomNum)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RoomStatus)
        </td>

        <td> 
```

模型类是

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace HC.Data
{
    public class Rooms
    {
        [Key]
        public int ID { get; set; }
        public int LocID { get; set; }
        public int FloorNum { get; set; }
        public int RoomNum { get; set; }
        public int RoomStatus { get; set; }
    }
} 
```

我无法将 LocID 更改为列表，因为所有工作都是使用 RAD 完成的，此时更改它会大大延迟。我只是想知道是否可以放置一些循环来使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:32:38.160

我的感觉是您将“房间”的单个值传递给视图，而 foreach 循环显示的是一个房间。如果您将 List 传递给视图，则 foreach 循环几乎肯定会像您编写的那样工作。但是 DisplayFor 可能不是因为它不再指向 Rooms 类的单个实例，而是指向房间列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:43:43.523

假设您的模型是`List<Room>`：

```
@{
    List<int> floors = Model.Select(x => x.FloorNum).Distinct();
}
@foreach (var floor in floors)
{
    foreach(var room in Model.Where(x => x.FloorNum == floor))
    {
        ... your display helpers here...
    }
} 
```

这是伪代码，因此可能需要进行一些调整。

# php - Android：通过url传递参数

> ID：13918716
> 
> 赞同：0
> 
> 时间：2012-12-17T17:11:01.217
> 
> 标签：php, android, sql-server, http-post

我想使用 http post 请求将一些数据插入数据库。我的 post.php 页面是：

```
 if(trim($_GET['param1'])!="" && trim($_GET['param2'])!="" && trim($_GET['param3'])!="" && trim($_GET['param4'])!="" && trim($_GET['param5'])!="")
{
    $connectionInfo = array(  "UID" => $DB_USER,  "PWD" => $DB_PASS, "Database"=>$DB_DATABASE );
    $con = sqlsrv_connect($DB_SERVER,$connectionInfo);
    if(!$con)
    {
      die('Could not connect: ' . sqlsrv_errors());
    }
    $query="INSERT INTO Table (param1,param2,param3,param4,param5) VALUES (
            '".$_GET['param1']."',
            ".$_GET['param2'].",
            ".$_GET['param3'].",
            '".$_GET['param4']."',
            ".$_GET['param5'].")";
            [...] 
```

为了发送数据，我将所有参数附加到 url，例如：`http://<myip>/MySite/post.php?param2=10&param3=8&param1=2012-12-01 13:00:00&param4=Name&param5=80`

一切正常，但是当我尝试从我的 Android 应用程序发送数据时，我无法达到我的目标。如何通过 url 传递数据？在Android中我试过：

```
 HttpPost httppost = new HttpPost("http://<Myip>/MySite/post.php");
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
    nameValuePairs.add(new BasicNameValuePair("param2", "10"));
    nameValuePairs.add(new BasicNameValuePair("param3", "98"));
    nameValuePairs.add(new BasicNameValuePair("param1", "2012-12-01 13:00:00"));
    nameValuePairs.add(new BasicNameValuePair("param4", "Name"));
    nameValuePairs.add(new BasicNameValuePair("param5", "50"));
    //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));
    httppost.setHeader("Content-Type", "application/x-www-form-urlencoded");
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));  

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost) 
```

与：

```
String urlParameters = "param1=2012-12-01 13:00:00&param2=b&param3=c...";
String request = "http://<Myip>/MySite/post.php";
URL url = new URL(request); 
HttpURLConnection connection = (HttpURLConnection) url.openConnection();           
connection.setDoOutput(true);
connection.setDoInput(true);
connection.setInstanceFollowRedirects(false); 
connection.setRequestMethod("POST"); 
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
connection.setRequestProperty("charset", "utf-8");
connection.setRequestProperty("Content-Length", ""  Integer.toString(urlParameters.getBytes().length));
connection.setUseCaches (false);
DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
wr.writeBytes(urlParameters);
wr.flush();
wr.close();
connection.disconnect(); 
```

但我总是出错。使用第二种方法的例外是：

```
12-17 18:08:26.617: E/AndroidRuntime(4837): FATAL EXCEPTION: main
12-17 18:08:26.617: E/AndroidRuntime(4837): android.os.NetworkOnMainThreadException
12-17 18:08:26.617: E/AndroidRuntime(4837):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.io.IoBridge.connect(IoBridge.java:112)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at java.net.Socket.connect(Socket.java:842)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at  com.example.applic.applic.postData(MyApp.java:197)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at com.example.applic.applic$1.run(MyApp.java:127)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at android.os.Handler.handleCallback(Handler.java:605)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at android.os.Looper.loop(Looper.java:137)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at android.app.ActivityThread.main(ActivityThread.java:4514)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at java.lang.reflect.Method.invokeNative(Native Method)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at java.lang.reflect.Method.invoke(Method.java:511)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-17 18:08:26.617: E/AndroidRuntime(4837):     at dalvik.system.NativeStart.main(Native Method) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:19:07.540

[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

意味着您正在尝试从 UI Thread 运行网络操作，因此将所有与网络相关的代码放在[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的`doInBackground`方法中，并在方法执行完成`onPostExecute`时用于更新 UI`doInBackground`

如果您使用的是**API LEVEL 9 或 GREATER FROM 9** ，则在 Activity 的 onCreate 中添加[StrictMode](http://developer.android.com/reference/android/os/StrictMode.html)以避免此错误

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                 .detectDiskReads()
                 .detectDiskWrites()
                 .detectNetwork()  
                 .penaltyLog()
                 .build()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:13:46.347

你得到一个`NetworkOnMainThreadException`例外。您需要将网络请求代码移动到另一个线程或使用异步任务。

您不能在主线程上发出网络请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T04:32:57.113

> 当应用程序尝试在其主线程上执行网络操作时抛出此异常，这在 android 版本 >= 3 中是不允许的。

为了摆脱这个异常，更好的方法是在 AsyncTask 中运行你的代码：

```
class BackTask extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... arg) {
        //Implement Logic you want to perform in background.
    }

    protected void onPostExecute(Void feed) {
       //Implement logic whatever you want to perform after task complete.
    }
 }

new BackTask().execute(); 
```

**或者**

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

# javascript - 如何绕过 Jscript 版本检查？

> ID：13918724
> 
> 赞同：2
> 
> 时间：2012-12-17T17:11:18.980
> 
> 标签：javascript, jquery, internet-explorer, jscript

我有一个网站，在检查浏览器兼容性的代码中存在一个众所周知的错误。这是有问题的代码：

```
strScriptEngineVer = ScriptEngineMajorVersion() + '.' + ScriptEngineMinorVersion();
if (ScriptEngineMajorVersion() < 5 || ScriptEngineMinorVersion() < 5)
{
    AddTestResultRow('ScriptEngine',
    'Error',
    'Script Engine', // TRANS: msgScriptEngine
    strScriptEngineVer,
    // TRANS: msgScriptEngineWrongVersion
    'Your version of MS Script Engine is not sufficient, Centricity Enterprise Web will not function correctly.');
    // TRANS: msgErrorCannotGoOn
    ShowStopMessage('There is an error, Centricity Enterprise Web cannot go on.');
    return false;
} 
```

此代码导致 Internet Explorer 9 失败，因为 Jscript 引擎版本是 9.0。虽然从逻辑上讲，9.0 大于 5.8（IE 8），但上述代码失败，因为“次要版本”被报告为 0，而 0 小于 5。我想做的（如果可能的话）是绕过这个通过报告不同的 Jscript 版本进行检查，或者注入 javascript 代码来替换损坏的代码。我知道可以在 IE 的开发人员模式下执行后者（请参阅：[https](https://braininstitute.mch.com/wiki/Centricity_Enterprise_Web) ://braininstitute.mch.com/wiki/Centricity_Enterprise_Web ），但我需要一种更自动化的方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:16:15.583

`ScriptEngineMinorVersion`与定义的位置相比，这将取决于此代码的确切执行位置。但如果它是这样的：

```
<!-- ScriptEngineMajorVersion and ScriptEngineMinorVersion 
     are defined in tools.js //-->
<script src="tools.js"></script>
<script>
  if (ScriptEngineMajorVersion() < 5 || ScriptEngineMinorVersion() < 5)
  {
    /// ...
  }
</script> 
```

然后你可以覆盖现有的`ScriptEngineMajorVersion`和`ScriptEngineMinorVersion`功能。像这样：

```
<script src="tools.js"></script>
<script>
  function ScriptEngineMajorVersion(){
     return Infinity;
  }
  function ScriptEngineMinorVersion(){
     return Infinity;
  }
</script>
<script>
  if (ScriptEngineMajorVersion() < 5 || ScriptEngineMinorVersion() < 5)
  {
    /// ...
  }
</script> 
```

但显然，这一切都取决于您是否可以在定义和使用之间注入代码。

# select - 淘汰赛映射选择json不起作用

> ID：13918732
> 
> 赞同：0
> 
> 时间：2012-12-17T17:11:35.827
> 
> 标签：select, data-binding, knockout.js, knockout-mapping-plugin

我是 automapper KO 的新手。我有这个代码：

```
 var jData = [
                    { "Id": 2, "Name": "A" },
                    { "Id": 3, "Name": "B" },
                    { "Id": 4, "Name": "C" }]
            };
        var viewModel = ko.mapping.fromJSON(JSON.stringify(jData));
        ko.applyBindings(viewModel); 
```

此代码有效：

```
<div data-bind="foreach : $data">
            <input type="text" data-bind='value: Name' />
            <br />
        </div> 
```

但如果我想通过地图选择：

```
 <select id="prova" data-bind='options: $data, optionsText: "Name", optionsValue: "Id"    , value: Id'></select> 
```

我收到了这个错误

*启用以解析绑定。消息：ReferenceError：'Id' 未定义；绑定值：options: $data, optionsText: "Name", optionsValue: "Id" , value: Id*

怎么了？谢谢 L

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:29:01.597

问题在于 value:Id 绑定，Id 需要在“”中。此外，值绑定应该用于设置下拉列表中的选定值，只需将其设置为 Id 将始终选择值为 1 的值。

```
<select id="prova" data-bind='options: $data, optionsText: "Name", optionsValue: "Id", value: "Id"'></select> 
```

在此处检查 jsfiddle [http://jsfiddle.net/uVfgx/](http://jsfiddle.net/uVfgx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:50:16.963

问题的根本原因是您的视图模型不包含 Id 属性。你应该添加它。我会实现这样的事情：

```
 var jData = [
                    { "Id": 2, "Name": "A" },
                    { "Id": 3, "Name": "B" },
                    { "Id": 4, "Name": "C" }]

function ViewModel(){
   var self = this;

   self.list = ko.mapping.fromJSON(JSON.stringify(jData));
   self.Id = ko.observable();
}

var viewModel = new ViewModel();
ko.applyBindings(viewModel); 
```

HTML：

```
<select id="prova" data-bind='options: list, optionsText: "Name", optionsValue: "Id"    , value: Id'></select> 
```

这是工作小提琴：http: [//jsfiddle.net/ardr8/](http://jsfiddle.net/ardr8/)

# amazon-s3 - 我应该将附件存储在 CouchDB 还是 S3 中？

> ID：13918733
> 
> 赞同：5
> 
> 时间：2012-12-17T17:11:39.040
> 
> 标签：amazon-s3, couchdb, attachment

我正在编写一个完全围绕文件上传的简单 Web API。用户可以通过基于 HTTP 的 API 将文件上传到服务，服务将生成文件供用户访问，并且还需要将它们与上传的文件一起存储。所以会有很多文件在玩。

基本上，我试图在将这些存储在 CouchDB 中和将它们存储在类似 Amazon 的 S3 中之间做出决定。

使用 CouchDB，我可能会为用户上传的初始文件提供一个文档，其中附件数据内联在 _attachments 集合中。系统制作的其他文件将添加到该文档中。（服务做文档转换，所以他们上传Excel XLS，系统生成PDF、TXT等。）我觉得这样很好，因为上传的文档记录一次删除也会删除生成的PDF、TXT或任何其他附件。

使用 S3，我知道我正在使用完全专用于单个文件存储的托管解决方案，我感到很安全。它还将带宽专门用于这些文件，并且不会来自我的 API Web 服务器。缺点是它为我的 API 代码添加了很多额外的逻辑，现在我必须让很多远程文件与我的本地 CouchDB 数据库所知道的内容保持同步。此外，如果我希望最终用户直接从 S3 访问文件，我将不得不处理请求签名等问题。文档都是单独存储的，因此从 CouchDB 中删除用户上传的附件将需要我对 S3 进行多次删除查询以获取其他文件。

我熟悉 S3，并在当前项目中使用它，但 CouchDB 在允许附件方面看起来非常棒。我很想使用它，但有什么问题或缺点吗？在我上面描述的场景中，CouchDB 附件是否比 S3 更有意义，存储了大量上传的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-11-20T13:24:38.110

根据我的经验，当涉及大量二进制对象时，数据库引擎会变得有些不稳定，除非它们是专门为此而构建的。

我一直在 CouchDB 中保存（低分辨率）图像，但我遇到了几千兆字节的附件。因此，我将附件移至 S3 并且从未回头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:34:53.863

两种解决方案都非常明智：各有利弊。

您没有提到将文件存储为 CouchDB 附件的一个优点是它们将与数据一起复制。它使连续备份变得更容易，并且在您的快照中，您的数据将与您的文件保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T18:08:58.823

我已经成功地将 couchdb 用于许多项目和几个类似的项目。您在使用 couchdb 的盒子里得到了这么多。我的问题是你的文件的平均大小是多少，你认为你的数据库会有多大？

# ios - 新的 ios 应用类型

> ID：13918734
> 
> 赞同：0
> 
> 时间：2012-12-17T17:11:40.183
> 
> 标签：ios

当我尝试在 ituneconnect/manage your applications 中添加新应用程序时，没有上传 iphone 屏幕截图的选项，所以我只能上传 ipad 屏幕截图，这是否意味着我只能提交 ipad 应用程序？我想念什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:10:21.233

所需的屏幕截图通常基于您在您的设备中设置的设备系列`app binary`（这是您在目标 XCode 的摘要中设置的）。

如果您在尝试在 iTunes Connect 中上传屏幕截图时没有上传二进制文件，我相信您仍然可以下载 iPhone 的屏幕截图。您可以将上传部分的屏幕截图（在您的应用摘要中）添加到您的帖子中吗？还可以查看[添加新应用程序](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/8_AddingNewApps/AddingNewApps.html)参考指南，他们在那里引用了您在创建新应用程序时可以上传的屏幕截图列表`Uploading Icons, Screenshots, and Routing App Files for Your App`。

# html-post - 如何将表单发布到第三方服务器重定向到 URL，而不在浏览器中显示发布结果？

> ID：13918736
> 
> 赞同：-2
> 
> 时间：2012-12-17T17:11:42.947
> 
> 标签：html-post

我有一个将数据发布到第三方 ping 邮政系统的表格。如果数据被第三方接受，则在客户端浏览器中显示有效响应。我没有在客户端显示响应，而是想在提交后将客户端重定向到感谢页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:33:30.843

我不确定我是否正确理解了你的问题，所以我将重复我的理解：你有 html-form ，你要提交给第 3 方服务器。您想忽略从该第 3 方服务器发送的响应，而是显示您自己的响应。

我知道有两种可能性：

**使用您自己的服务器作为代理**

*   不要将您的表单提交到第 3 方服务器，而是将其提交到您自己的服务器。
*   使用服务器端语言将您的请求转发到第 3 方服务器，并将您自己的消息发送回浏览器。

**使用 Javascript**

*   将 iframe 添加到您的页面，为其命名并使用 css (display:none) 将其隐藏。
*   在表单中使用目标属性将来自第 3 方服务器的答案重定向到此隐藏框架中。
*   当表单被提交时，在表单上使用 javascript 提交处理程序来获取回调。
*   从该回调中显示您自己的响应。

如果您有可能使用服务器端组件，我会投票支持第一个选项，因为它不依赖任何浏览器功能或设置。

问候，彼得

# facebook - Facebook Graph API - 获取已发布照片的 post_id

> ID：13918738
> 
> 赞同：2
> 
> 时间：2012-12-17T17:12:04.063
> 
> 标签：facebook, facebook-graph-api, facebook-fql

在将照片发布到而不是照片**object_id**（例如 334455667788）之后，有没有办法在墙上/提要（例如 987654321_123456789）上获取结果帖子的**post_id ？**`/photos`

 **当我们调用`https://graph.facebook.com/page_id/photos`资源**发布照片**时，返回的 ID（JSON 响应）将是照片的**object_id**

我能想到的唯一方法是获取自发布图片以来的整个提要（以防其他人在其间发帖），然后获取具有 object_id == photo_id 的帖子的 post_id。不过好像有点粗..

“一种方式”意味着它可以是 FQL (fql=Select...)、搜索查询 (search?q=...) 或我没有想到的任何基本图形资源将提供准确信息。

（我们使用 Jersey 和 Jackson 与 Facebook Graph API 进行交互。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T09:49:52.537

我将他的设置为“已回答”，因为除了描述的方法之外似乎别无他法：

> 我能想到的唯一方法是获取自发布图片以来的整个提要（以防其他人在其间发帖），然后获取具有 object_id == photo_id 的帖子的 post_id。不过好像有点粗..**

# java - 对照不同布局中的条目检查 editText 条目

> ID：13918739
> 
> 赞同：0
> 
> 时间：2012-12-17T17:12:06.220
> 
> 标签：java, android, layout, android-edittext, equality

我有两个布局，每个布局都有相同数量的 EditText。一种布局是供用户使用的，从空白开始，另一种包含所有答案。

我希望能够使用预定义的答案布局循环并检查用户布局。

我在下面有一些代码，但我认为我错过了一点......我需要更改什么以允许答案editTexts处于不同（且当前未激活）布局的事实？

```
 public boolean checkAnswer() {
  final int ROW_COUNT = 15;
  final int COL_COUNT = 10;
  final String ROWS[] = {"R1","R2","R3","R4","R5","R6","R7","R8","R9","R10","R11","R12","R13","R14","R15"};
  final String COLS[] = {"C1","C2","C3","C4","C5","C6","C7","C8","C9","C10"};

  for(int i=0; i<ROW_COUNT; i++) {
      for(int j=0; j<COL_COUNT; j++) {
          String a = ROWS[i];
          String b = COLS[j];
          int editTextBaseId = getResources().getIdentifier("box" + a + b, "id", getPackageName());
          int editTextAnswerId = getResources().getIdentifier("boxA" + a + b, "id", getPackageName());
          EditText editTextBase = (EditText)findViewById(editTextBaseId);
          EditText editTextAnswer = (EditText)findViewById(editTextAnswerId);
          String textBase = editTextBase.getText().toString();
          String textAnswer = editTextAnswer.getText().toString();
          if(textBase.equals(textAnswer)) {
          }
          else {
              return false;
          }               
      }
  }        
  return true; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:43:02.380

为什么需要两种布局？当用户要求答案时，只需在第一个布局中填写答案。

# xcode - Xcode：无法访问另一个类的 NSString 值集

> ID：13918741
> 
> 赞同：1
> 
> 时间：2012-12-17T17:12:09.580
> 
> 标签：xcode, nsstring

我试图将一个字符串变量从 mainVC 类传递给 detailVC 类，但是当 viewDidLoad 启动时，myStringLabel 是空的，它应该包含“只是一个测试”。我不知道为什么。

主VC.m

```
#import "mainVC.h" 
@implementation mainVC 
@synthesize 

-(IBAction) openSecondController {
    //Ouverture de DetailVC
    detailVC *dVC = [[detailVC alloc] init];
    dVC.myStringLabel=@"Just a test";
    NSLog(@"dVC.myStringLabel before calling dVC :%@", dVC.myStringLabel);
    [self performSegueWithIdentifier:@"progDetailSegue" sender:nil];
    NSLog(@"dVC.myStringLabel after calling dVC :%@", dVC.myStringLabel) ;   
} 
```

* * *

细节VC.h

```
#import <UIKit/UIKit.h>
@interface detailVC : UIViewController {
 NSString *myStringLabel;
 IBOutlet UILabel *labelForString;
}
@property (nonatomic, strong) UILabel *labelForString;
@property (copy) NSString *myStringLabel; 
```

* * *

详细VC.m

```
#import "detailVC.h"

@implementation detailVC
@synthesize myStringLabel, labelForString;

-(void) viewDidLoad {
NSLog(@"myStringLabel in viewDidLoad : %@", dVC.myStringLabel) ;
labelForString.text=myStringLabel;
}

-(IBAction) closeViewController {
//Fermeture com_mobilizProgramDetailViewController ouverte en Modal. 
[self dismissViewControllerAnimated:YES completion:nil];

} 
```

* * *

NSLOG 输出：

```
2012-12-17 11:48:58.520 DataTransfert[5068:f803] dVC.myStringLabel before calling dVC : Just a test
2012-12-17 11:48:58.520 DataTransfert[5068:f803] myStringLabel in viewDidLoad : (null)
2012-12-17 11:48:58.520 DataTransfert[5068:f803] dVC.myStringLabel after calling dVC :Just a test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T23:45:49.693

问题解决了。

我使用了另一个解决方案：-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender

在显示 viewController 之前调用，以在 veiwcontroller 之间传递数据。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
detailVC *dVC = [segue destinationViewController];
dVC.myStringLabel=@"Just a test";
} 
```

然后它工作！在日志输出中，我得到了这个结果：

```
myStringLabel in viewDidLoad : Just a test 
```

非常感谢@iVishal 试图帮助我。

祝大家新年快乐 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:29:19.127

@iVishal：

我创建了一个这样的对象 ID：DKg-dG-bO1

对于viewController，这就是你在说什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:19:23.780

在 viewDidLoad 中，将 dvc.mystringlbl 替换为 self.mystringlbl

# go - 让 Go 编译器默认使用 int64

> ID：13918744
> 
> 赞同：6
> 
> 时间：2012-12-17T17:12:15.443
> 
> 标签：go, numbers

有什么方法可以让 Go 编译器在我的系统上默认使用 int64？我正在我的 64 位机器上为 Euler 项目编写代码。共享代码的可能性很小，因此无需担心在 32 位机器上运行它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T17:22:50.680

`int`在下一个版本 1.1 中，go 中的类型将在 64 位机器上为 64 位。如果您下载最新的开发代码，您现在可以使用它。

没有办法强制`int`达到一定的大小。然而，当你使用`int`你不应该假设一个特定的大小。相反，明确地将您的数字键入为 int64。

# c++ - 试图让我的程序继续使用 if/else 语句 C++

> ID：13918749
> 
> 赞同：0
> 
> 时间：2012-12-17T17:12:23.590
> 
> 标签：c++, if-statement

我正在编写一个程序来适应这种情况：有两个孩子。他们俩把钱加在一起来决定是否把钱花在冰淇淋或糖果上。如果他们有超过 20 美元，把所有的钱都花在冰淇淋上（1.50 美元）。否则，把所有的钱都花在糖果上（0.50 美元）。显示他们将购买的冰淇淋或糖果的数量。

```
I've written my code here:

#include<iostream>
#include <iomanip>
using namespace std;

//function prototypes
void getFirstSec(double &, double &);
double calcTotal(double, double);

int main( )
{

//declare constants and variables
double firstAmount = 0.0;
double secondAmount = 0.0;
double totalAmount = 0.0;
const double iceCream = 1.5;
const double candy = 0.5;
double iceCreamCash;
double candyCash;
int iceCreamCount = 0;
int candyCount = 0;

//decides whether to buy ice cream or candy
getFirstSec(firstAmount, secondAmount);
totalAmount = calcTotal(firstAmount, secondAmount);

if (totalAmount > 20)
{
       iceCreamCash = totalAmount;
       while (iceCreamCash >= 0)
       {
              iceCreamCash = totalAmount - iceCream;
              iceCreamCount += 1;
       }
       cout << "Amount of ice cream purchased : " << iceCreamCount;
}
else
{
       candyCash = totalAmount;
       while (candyCash >= 0)
       {
              candyCash = totalAmount - candy;
              candyCount += 1;
       }
       cout << "Amount of candy purchased : " << candyCount;
}
}
// void function that asks for first and second amount
void getFirstSec(double & firstAmount, double & secondAmount) 

{
cout << "First amount of Cash: $";
cin >> firstAmount;
cout << "Second amount of Cash: $";
cin >> secondAmount;
return;
}
// calculates and returns the total amount
double calcTotal(double firstAmount , double secondAmount) 
{
    return firstAmount + secondAmount;
} 
```

我输入了第一个和第二个数量，但它不会继续到 if/else 部分。谁能告诉我这里的问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T17:14:38.963

```
 while (iceCreamCash >= 0)
   {
          iceCreamCash = totalAmount - iceCream;
          iceCreamCount += 1;
   } 
```

这个循环永远不会结束。循环中的任何内容都不会在循环`iceCreamCash`的每次迭代中减少。也许你的意思是：

```
 while (iceCreamCash >= 0)
   {
          iceCreamCash = totalAmount - iceCream * iceCreamCount;
          iceCreamCount += 1;
   } 
```

# java - Java：instanceof 或自定义 getType

> ID：13918752
> 
> 赞同：2
> 
> 时间：2012-12-17T17:12:35.813
> 
> 标签：java, instanceof

假设我有以下代码：

```
public boolean doesElfLikeIt ( Monster mon )
 {
    if ( mon instanceof Orc ) { return false; }
    if ( mon instanceof Elf ) { return true; }

 } 
```

这是一种好的编程方法还是我应该选择这样的方法：

```
public boolean doesElfLikeIt ( Monster mon )
 {
    if ( mon.getType() == Orc.type ) { return false; }
    if ( mon.getType() == Elf.type ) { return true; }

 } 
```

我问这个的原因是因为我听到很多关于`instanceof`比较有多邪恶，但我发现它很有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T17:15:27.563

两者都不。你真正应该做的是：

```
class Monster {
  public abstract boolean likesElves();
}

class Orc extends Monster {
  public boolean likesElves() {
    return false;
  }
}

class Elf extends Monster {
  public boolean likesElves() {
    return true;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T20:59:46.367

Reverend Gonzo 提出的解决方案违反了封装并且没有回答问题。封装被违反了，因为所有怪物现在都必须知道他们是否喜欢精灵，以非常间接和根深蒂固的方式将所有怪物与特定的子类型（精灵）联系起来。它没有回答这个问题，因为兽人完全有可能喜欢精灵，但精灵不喜欢兽人！

我觉得您使用 instanceof 的初始解决方案完全可以。虽然 SLaks 提出了一个很好的观点，但我认为种族主义精灵（精灵不喜欢兽人，所有兽人亲戚听起来都非常种族主义；））是一个完全合理的设计决策，而不是程序员错误的迹象。

退后一步并解决“我如何让精灵喜欢一些兽人？”，我认为最好的答案是“模型为什么他们喜欢和不喜欢怪物，特别是兽人”。只要您关闭单个数据点（类型），您总是会有有限的行为。

# python - 如何使用python获取xml文件中的内部元素

> ID：13918755
> 
> 赞同：0
> 
> 时间：2012-12-17T17:12:43.847
> 
> 标签：python, xml

我有下一个 xml：

```
<a>
  <aa id = 1>
    <data>aaaa</data>
  </aa>
  <aa id = 2>
    <data>bbbb</data>
  </aa>
  <aa id = 3>
    <data>cccc</data>
  </aa>
</a> 
```

我想获取数据的文本 (aaaa,bbbb...) 我该怎么做？（我一直在使用 etree.ElementTree 包）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:23:03.333

XML 文件：

```
<?xml version="1.0"?>
<a>
  <aa id="1">
    <data>aaaa</data>
   </aa>
   <aa id="2">
    <data>bbbb</data>
  </aa>
  <aa id="3">
    <data>cccc</data>
  </aa>
</a> 
```

您可以使用`XPath`查询：

```
from lxml import etree

xml = etree.parse('/tmp/a.xml')

xml.xpath('.//data/text()')
['aaaa', 'bbbb', 'cccc'] #returns that 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:34:37.297

你可以试试这个：

```
In [1]: import xml.etree.ElementTree as ET

In [2]: tree = ET.parse('test.xml')

In [3]: root = tree.getroot()

In [4]: for el in root:
   ...:     print el.find('data').text
   ...:     
   ...:     
aaaa
bbbb
cccc 
```

您提供的代码中唯一缺少的是`elem.find('data').text`（在循环内部`for`） - 这将返回您正在寻找的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:37:11.750

```
tree = xml.parse(file) 
root = tree.getroot() 
listElem = root.findall("aa") 
for elem in listElem:
     tmp1 = elem.findall("data")
     str = tmp1[0].text 
```

# javascript - jquery遍历输入字段并进入父级和兄弟级

> ID：13918758
> 
> 赞同：1
> 
> 时间：2012-12-17T17:13:13.653
> 
> 标签：javascript, jquery

大家好，我坚持一些代码，希望能得到帮助。我的 html 设置如下：

```
 <div class="menu_options">
           <div class="parent_options">
               <input type="checkbox" class="parent_required" />
           </div>
           <div class="children">
                 <div class="child_options">
                      <input type="checkbox" class="child_required" />   
                 </div>
                 <div class="child_options">
                      <input type="checkbox" class="child_required" />   
                 </div>
                 <div class="child_options">
                      <input type="checkbox" class="child_required" />   
                 </div>
           </div>
      </div> 
```

基本上，如果选中了 parent_required 类复选框，我尝试在 jquery 中获取子类下的所有输入字段，并通过 child_required 取消选中它们。

我不能在输入字段上使用 id'，因为我只是不知道要使用的字段的所有 id。

到目前为止，在 jquery 我有这个代码

```
 $('.parent_required').click(function() {

            if(!$(this).is(":checked")) {
                var child = $(this).parent('.parent_options').siblings('.children');

            }
        }); 
```

我在 div class='children 部分很烂，不知道如何深入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:17:57.990

试试这个：

```
$('.parent_required').click(function() {
    if (!$(this).is(":checked")) {
        $(this).closest('.parent_options')
            .siblings('.children')
            .find('.child_required')
            .prop('checked', false);
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/T9uBC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:19:23.357

```
$('.parent_required').click(function() {

  if(!$(this).is(":checked")) {
    // this gives you the <div class="children">
    var child = $(this).closest('. menu_options').find('.children');
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:20:12.633

我会使用`change`而不是`click`parent_required：

```
$('.parent_required').change(function() {

    if (!$(this).is(":checked")) {
        $('.parent_required').parents('.menu_options').find('.child_required').prop('checked', false);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T17:23:03.350

如果您不知道 id，只需使用输入的节点名、类型属性或类，没有理由使用绝对 DOM 路径。

此外，您的[`parent`](http://api.jquery.com/parent/)调用只会返回`<div class="parent_options">`，但您需要`<div class="menu_options">`从那里选择子项：

```
$('.parent_required').click(function() {
    if (!this.checked)
        $(this)
          .closest('.menu_options')
          .find(':checkbox.child_required')
          .prop('checked', false);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T17:22:48.247

检查这个：

```
 $('.parent_required').on('change', function() {

            if(!$(this).is(":checked")) {
               $(this).closest('.parent_options')
                      .next('.children').find('.child_required').attr('checked', false);
            }
        }); 
```

JSBin：http: [//jsbin.com/evoreq/1/edit](http://jsbin.com/evoreq/1/edit)

在这里，您使用`closest`父复选框中的方法，直到找到“parent_options”，然后获取具有“children”类的“next”元素，找到其中的所有“child_required”元素，并将选中的属性设置为错误的。

# ruby-on-rails - 选择在编辑记录模式下未拾取的值/标签。如何解决？

> ID：13918760
> 
> 赞同：0
> 
> 时间：2012-12-17T17:13:24.253
> 
> 标签：ruby-on-rails, ruby

我有一个用于服务请求模型（创建/编辑）的简单 Ruby on Rails 表单。当我创建一个新的 SR 时，正确的 VALUE 存储在数据库中就好了（值，而不是显示标签），但是当我尝试在 EDIT 视图中检索它时，选择下拉菜单没有选择现有的值/标签并默认为数组中的第一个。

（优先级不是与另一个模型的关系，现在都包含在一个简单的数组中）。

我错过了什么？

新和编辑视图（两者相同）：

```
<% form_for(@servicerequest, :html => { :class => "newform" }) do |f| %>

<p>
  <%= f.label :priority %><br />
  <%= f.select(:priority, [["Stat", "1"], ["Urgent", "2"], ["Regular", "3"], ["Safety", "4"]], { :prompt => "Choose"})  %>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:22:20.487

尝试

```
<%= f.label :priority %>
<%= f.select(:priority, [["Stat", "1"], ["Urgent", "2"], ["Regular", "3"], ["Safety", "4"]], :selected => @servicerequest.priority, :prompt => "Choose") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:34:39.120

另一个尝试：

```
<%= f.label :priority %>
<%= f.select(:priority, options_for_select({"Stat" => "1", "Urgent" => "2", "Regular" => "3", "Safety" => "4"}, @servicerequest.priority), :prompt => "Choose") %> 
```

# powershell - 使用 NuGet uninstall.ps 删除解决方案文件夹

> ID：13918767
> 
> 赞同：5
> 
> 时间：2012-12-17T17:13:42.677
> 
> 标签：powershell, nuget

在我的 NuGet 包中，我使用此处显示的方法添加了一个解决方案文件夹： [https ://stackoverflow.com/a/6478804/1628707](https://stackoverflow.com/a/6478804/1628707)

这是我在 Init.ps 中添加解决方案文件夹的代码。

```
$solutionFolder = $solution.AddSolutionFolder("build")
$folderItems = Get-Interface $solutionFolder.ProjectItems ([EnvDTE.ProjectItems])
$files = Get-ChildItem "$buildFolder"
foreach ($file in $files)
{
    $folderItems.AddFromFile($file.FullName)
} 
```

现在，在 Uninstall.ps 中，我想删除名为“build”的解决方案文件夹。我试过以下。

```
//try to get the solution folder. This fails with 'doesn't contain a method named Item'
$proj = $solution.Projects.Item("build")

//So, I tried enumerating and finding the item by name. This works.
foreach ($proj in $solution.Projects)
{
  if ($proj.Name -eq "build")
  {
    $buildFolder = $proj
  }
}

//But then removing fails with 'doesn't contain a method named Remove'
$solution.Remove($buildFolder) 
```

我受到了阻碍，将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:00:30.970

不知道为什么 Item 很困难，但另一种方法是：

```
$proj = $solution.Projects | Where {$_.ProjectName -eq "build"} 
```

# history.js - Sammy.js/History.js/Nav.js 之间的比较

> ID：13918770
> 
> 赞同：4
> 
> 时间：2012-12-17T17:13:54.963
> 
> 标签：history.js, sammy.js

我一直在寻找单页导航处理程序。Sammy.js 可以破解，所以我创建了一个带有正确导航的示例 SPA。到目前为止效果很好。（此外，Twitter 使用了 sammy.js 的事实..让我更好奇..）:)

没有问题！！

*环顾四周寻找替代品，发现 History.js 和 Nav.js 在同一行。*

[**History.js**](https://github.com/browserstate/history.js) - 尽可能遵循 HTML5 History API 为所有 HTML5 浏览器提供交叉兼容的体验（它们都实现了 HTML5 History API 略有不同，导致不同的行为，有时甚至是错误 - History.js 修复了这个问题，确保整个 HTML5 浏览器的体验如预期/相同/很棒）

**Nav.js——**允许您通过绑定左右箭头键来管理基于页面的导航。

[**Sammy.js——**](http://sammyjs.org)像 Sinatra 一样，Sammy 应用程序围绕“路由”展开。不过，Sammy 的路线略有不同。您不仅可以定义“get”和“post”路由，还可以将路由绑定到应用程序触发的自定义事件。

一切看起来都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:31:52.583

我的观点如下（我喜欢 sammy.js，所以我在这里有偏见，没有客观的意见）。

History.js 全部在 HTML5 中 - 所以它删除了对 IE8 的所有支持，如下所示。这有时是可以接受的，但是，有时 - 不是。此外，我不完全确定在 gecko、trident、webkit（主要浏览器引擎）之间，它们都支持 HTML5 历史规范，没有任何差异。

所以对我来说，History.js 已经全力以赴。然后我们必须区分 Nav.js 和 Sammy.js；我不认为这是一场比赛。您在 Nav.js 中只有基于键盘的导航，并且由于不再使用 jQuery 的项目不多，您可以使用[http://api.jquery.com/category/events/keyboard在 Sammy.js 中实现这一点-events/](http://api.jquery.com/category/events/keyboard-events/)和特殊事件的特殊路线，意思是下一页/上一页或其他任何让你的山羊漂浮的东西。

**Sammy.js**是轻量级、高效、可扩展、可重用和完全跨浏览器兼容的。

# drupal-7 - Drupal 7 node_save 完整性约束违规

> ID：13918774
> 
> 赞同：0
> 
> 时间：2012-12-17T17:14:02.063
> 
> 标签：drupal-7, save, constraints, nodes, unique-constraint

我必须从 myModule 中的自定义代码更新一些节点引用字段。这必须在插入特定类型的新节点时完成，因此我实现了 hook_node_insert 如下：

```
function myModule_node_insert($node){
    $settings = _settings_forms_nodereference_fields($node->type);
    $field = $settings['field'];
    $language = field_language('node', $node, 'body');
    $node->{$field}[$language][0]['nid'] = 408;
    $node->{$field}[$language][1]['nid'] = 408;
    $node->{$field}[$language][2]['nid'] = 408;
    node_save($node);
} 
```

但是，每次尝试创建新节点时，都会出现以下错误；

> PDOException：SQLSTATE [23000]：违反完整性约束：1062 键“PRIMARY”的重复条目“436”：INSERT INTO {node}（nid、vid、type、language、title、uid、status、created、changed、comment、promote ，粘性，​​tnid，翻译）值....

我发现这是因为 node_save 功能，但没有它我的更改不会提交。

完整的数组如下：

```
[field_event_form_s_] => Array
    (
        [und] => Array
            (
                [0] => Array
                    (
                        [nid] => 261
                    )

                [1] => Array
                    (
                        [nid] => 262
                    )

                [2] => Array
                    (
                        [nid] => 263
                    )
            )
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:34:24.877

在我的下一次谷歌搜索中发布后，我立即找到了我的问题的答案。我认为它对其他人有用，包括我自己在内。

以下代码可以解决问题：

```
function myModule_node_insert($node){
    $settings = _settings_forms_nodereference_fields($node->type);
    $field = $settings['field'];
    $language = field_language('node', $node, 'body');
    $node->{$field}[$language][0]['nid'] = 408;
    $node->{$field}[$language][1]['nid'] = 408;
    $node->{$field}[$language][2]['nid'] = 408;
    field_attach_update('node', $node);
} 
```

需要更新字段本身，而不是 node_save。[这](http://timonweb.com/how-save-yourself-some-hair-when-manipulating-node-fields)家伙在解释简单的同时做得更好。

# ajax - Django：LDAP 搜索结果消失

> ID：13918785
> 
> 赞同：0
> 
> 时间：2012-12-17T17:14:47.327
> 
> 标签：ajax, django, ldap

为什么在下面的代码中，全局`direktorie`是否在调试模板中返回正确的数据`login()`，但是当我尝试从中访问相同的变量`autoname()`时说列表的长度为`0`？我不会`direktorie`在任何其他地方`views.py`——或其他任何地方提及此事。（下面的所有代码只是试图发现我做错了什么。我并不真正关心返回列表的长度。我只想知道它被看到并且具有大致正确数量的条目。 )

```
from django.http           import HttpResponse, HttpResponseRedirect, Http404
from django.shortcuts      import render_to_response, get_object_or_404
import json                      # JSON for jQuery AJAX autocomplete
from   eldappery import *        # LDAP for jQuery AJAX autocomplete

direktorie = []

##############################################################################

def login(request):
  """LDAP Login routine"""
  global direktorie

  if request.method == "POST":                   # If submitted...
    if request.POST["username"] and request.POST["password"]:
      username = request.POST["username"]
      password = request.POST["password"]
      LDAPfeed = dapperize(username, password)   # ...login
      if LDAPfeed:
        direktorie = fetch_names(LDAPfeed,"")    # ...get everybody
        ls  = locals()                           # DEBUG!
        gs  = globals()                          # DEBUG!
        return render_to_response("debug.html",
                                  {"ls": ls,
                                   "gs": gs})    # DEBUG! Works! (direktorie full)
      else:
        return HttpResponseRedirect("/login/")
  return render_to_response("login.html",
                            context_instance=RequestContext(request))

##############################################################################

def autoname(request):
  """Auto-complete names"""
  global direktorie
  if request.is_ajax():
#   results = [{"id":    5,
#               "label": 5,
#               "value": 5}]                # DEBUG! Works! (5 in template)
    results = [{"id":    len(direktorie),
                "label": len(direktorie),
                "value": len(direktorie)}]  # DEBUG! Doesn't work! (0 in template)
    data = json.dumps(results)              # Convert to JSON string
  else:                                     # No results returned!
    data = "fail"                           # Error...
  mimetype = "application/json"             # MIME type = JSON
  return HttpResponse(data, mimetype)       # Send JSON back to web page

############################################################################## 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:27:56.890

django 的视图设计，不允许你在视图之间传递全局变量。如果要在视图之间传递数据，则需要使用 ajax，在 get 或 post 请求中发送数据。

```
def index(request):
    print 'helou'
    return render_to_response('index.html', {'lala': 'lala'})

    #index.html
    # <script type='text/javascript'>
    #  obj = {type:'get', url='/test/view0', data: {tamangandapio:'yeah'}, type='json',
    #         response: function (){ console.log(response) }
    #         }
    # $.ajax(obj);
    # </script>

def view0(request)
  #here you see the data send by the jquery code below
  print request.GET
  res = {'success':'i got it'}
  return HttpResponse(simplejson.dumps(res), mimetype='application/javascript') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:44:47.213

松开线——

```
global direktorie 
```

您不需要将变量声明`direktorie`为全局变量，因为您没有为其分配值。Python 将假定赋值右侧的任何变量都是全局变量（除非它出现在赋值的左侧，在函数的其他位置）。

此外，您可能需要检查您的网络服务器是否正在使用单个进程运行您的应用程序。如果它是为多个进程设置的，例如使用 apache 配置指令，例如 -

```
WSGIDaemonProcess yoursite.com processes=2 threads=15 
```

那么你会遇到全局指令的问题。

# c - 无法解析符号

> ID：13918788
> 
> 赞同：1
> 
> 时间：2012-12-17T17:14:49.733
> 
> 标签：c, shared-libraries

我正在为嵌入式系统交叉编译一个程序。该程序使用一个共享库，我像这样打开它。

```
#include <stdio.h>
#include <stdlib.h>
#include <dlfcn.h>      //needed for dynamic linking

void  *FunctionLib;     //Handle to shared lib file
int   (*Function)();    //Pointer to loaded routine
const char *dlError;    //Pointer to error string

int main( argc, argv )
{
    int   rc;               //return codes
    printf("start...\n");

    //Open Dynamic Loadable Libary with absolute path
    FunctionLib = dlopen("/lalabu/sharedLib.so",RTLD_LAZY | RTLD_GLOBAL);
    dlError = dlerror();
    printf("Open sharedLib.so returns: %s \n", dlError);
    if( dlError ) exit(1);

    //Find function
    Function = dlsym( FunctionLib, "getSomething");
    dlError = dlerror();
    printf("Find symbol getSomething returns: %s \n", dlError);
    if( dlError ) exit(1);
... 
```

我正在使用以下命令编译代码

```
mips-linux-uclibc-gcc -Wall -ldl ./dynamic_linking.c -o /dynamic_linking 
```

它可以在没有任何警告和东西的情况下工作。
如果我现在尝试在我的设备上执行此代码，我会收到以下错误：

```
# ./dynamic_linking
start...
Open sharedLib.so returns: (null)
Find symbol getSomething returns: Unable to resolve symbol
./dynamic_linking: can't resolv '_ZNSt8ios_base4InitD1Ev' 
```

如果我使用 IDA 查看 sharedLib.so 想要导入的函数，我会看到函数（或符号？）“_ZNSt8ios_base4InitD1Ev”以及它应该在哪里（libc.so.0）。
如果我再次使用 IDA 查看 libc.so.0，我看不到这样的函数。也没有像 ios_base、ios 或 base 这样的东西。
我已经用 dlopen() 尝试了各种标志组合，这总是导致上述错误，除非我使用 RTLD_NOW 而不是 RTLD_LAZY 我得到

```
Segmentation fault (core dumped) 
```

代替

```
./dynamic_linking: can't resolv '_ZNSt8ios_base4InitD1Ev' 
```

此外，我尝试了一些 gcc 链接选项，如 rdynamic，总是得到相同的结果。
此外，我尝试使用不使用 _ZNSt8ios_base4InitD1Ev 的共享库，即“libc.so.0”来检查我的 c 代码是否正常工作。我只更改了名称和绝对路径，并删除了查找功能部分。它工作没有错误。
正如您可能从我的帖子中看到的那样，我刚刚开始交叉编译和使用动态库，所以也许我的错在其他地方。此外，我不确定我是否明白问题出在哪里，所以欢迎任何提示。如果您需要更多信息，我很乐意将它们提供给您。
问候，平谷

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:54:51.507

那`_ZNSt8ios-base4InitD1Ev`不是 C 符号，而是 C++ 符号。

```
$ echo _ZNSt8ios-base4InitD1Ev | c++filt 
```

没有给出任何线索，但如果你`-`用一个`_`（一个错字，也许？）替换：

```
$ echo _ZNSt8ios_base4InitD1Ev | c++filt
std::ios_base::Init::~Init() 
```

这就是 C++ STD 库的内部类的析构函数。所以你应该检查`libstdc++.so`图书馆`libc.so`。

我的建议是只使用 G++ 编译你的程序，这样 C++ 库就可以正确初始化。它不打算动态加载，这就是分段错误的原因。

# matlab - 使用索引矩阵检索具有否定精确索引的矩阵元素？

> ID：13918790
> 
> 赞同：2
> 
> 时间：2012-12-17T17:14:59.930
> 
> 标签：matlab, matrix, matrix-indexing

例如，我有`A=[11 24 33 47 52 67]`并且我有索引矩阵，`I = [2 3]`所以我想从索引中获取 A 的元素，而不是 I 给出的索引。所以我想要`B = [11 47 52 67]`. 我该怎么做并将 I 用作否定索引矩阵？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:18:34.887

去做

```
 idx = logical(ones(size(A)));   % // all indices here 
```

或者，正如@Gunther Struyf 建议的那样，

```
 idx = true(size(A)); 
```

然后

```
 idx(I) = 0;                       % // excluding not desired indices    
  B = A(idx);                       % // selection 
```

或者

```
 B = A;
 B(I) = []; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:33:09.663

您还可以使用[`setdiff`](http://www.mathworks.com/help/matlab/ref/setdiff.html)排除索引。这是给你的单线：

```
B = A(setdiff(1:numel(A), I)) 
```

# c# - 从 MS Word 文档中检索 SurrogatePairs

> ID：13918791
> 
> 赞同：0
> 
> 时间：2012-12-17T17:15:05.367
> 
> 标签：c#, unicode, surrogate-pairs

我们已经编写了一个应用程序，它将打开 Microsoft Word 文档，读取里面的所有文本，然后将这些数据发送到外部系统进行处理。这在过去运行良好，但自从我们接受 Unicode 后，我们在阅读 Word 文档时遇到了一些问题。

我们看到的问题是我们无法显示任何占用多个代码单元的字符，例如（Surrogate Pair）或ā̈（Grapheme Cluster）。当我们尝试显示 时，我们得到两个 ??，而 ā̈，我们得到组成字素的每个单独的字符。

我有一种感觉，我们看到这些字符返回的原因是因为我们没有正确读取文件。但是我一直在寻找，还没有找到解决方案。

我创建了一个只包含一个值的 Word 文档： .

我们在代码中做的第一件事是将文件读入字节数组：

```
FileStream fileStream = new FileStream(fileName, FileMode.Open, FileAccess.Read);

wordDocument = new byte[fileStream.Length];
fileStream.Read(wordDocument, 0, (int)fileStream.Length);

fileStream.Close(); 
```

经过进一步调查，字节数组包含以下值：

```
{63, 63, 10, 13}, or in hex {0x3f, 0x3f, 0x0d, 0x0a} 
```

通过查找十六进制值，我了解到 0x3f 与 ? 相关，这就解释了为什么我们要返回两个 ??。

然后，当我们尝试将数据转换回字符串时，我们最终得到了两个 ??

```
textdata = System.Text.Encoding.Unicode.GetString(wordDocument); 
```

我认为问题可能与我们在文档中的阅读方式有关，但我不能 100% 确定。谁能引导我走正确的道路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:53:35.887

您可以使用 MS Office Primary Interop Assemblies 访问 word 文档的对象模型。尝试在 Visual Studio 中添加程序集引用（例如 Office 12 或 Microsoft Word 12 等）。看看[这个链接](http://www.mindstick.com/Articles/a25ba73f-324d-4926-93b5-89460f77621d/?Create%20Microsoft%20Word%20Document%20by%20using%20C)。那里有一些基础知识。

# java - 我如何使用扫描仪和令牌？

> ID：13918792
> 
> 赞同：0
> 
> 时间：2012-12-17T17:15:10.213
> 
> 标签：java, user-input, token, java.util.scanner, stringtokenizer

我已经问过如何使用令牌拆分用户的输入，但我想使用扫描仪类拆分它以便分别使用每个令牌...

示例...假设我们有这个输入：现在几点

当我将它拆分为标记时，我想将它存储在某个地方（字符串数组或特定变量），以便将每个单词用于 if 语句......

```
 import java.util.Scanner;
      import java.util.StringTokenizer;

     public class Main_Loop_Tokens {

  public static void main(String args[]) {

    String temp;
    Scanner scanner = new Scanner(System.in);

    while (true) {
        System.out.print("PROMPT:>> ");
        temp = scanner.nextLine();

        StringTokenizer st = new StringTokenizer(temp);

        while (st.hasMoreTokens()) {

            if (st.hasMoreTokens()) {

                String Word1 = st.nextToken();

                if (Word1.equals("what")) {
                    String Word2 = st.nextToken();
                                       if (Word2.equals("time"){
                                            System.out.println("bla bla bla"); 
```

在这段代码中，实际上我正在尝试使用标记器来做到这一点，但它非常复杂，因为我只想将它们存储在某个地方，无论它们有多少。现在，如果我输入 1 个单词，它就完成了！

```
 String Word1="the first token"
         String Word2="the second token"
         String Word3="the third token" 
```

取决于他们有多少。

```
 if (word1.equals("something")){ 
    // do something 
   }

   if (word2.equals("something2")){
    // do something else
   } 
```

这就是为什么我发现使用扫描仪令牌更容易但我不知道如何......谢谢！

# filter - CGridview 过滤器似乎不起作用

> ID：13918795
> 
> 赞同：1
> 
> 时间：2012-12-17T17:15:23.243
> 
> 标签：filter, yii, cgridview

有人可以帮我处理我的过滤器吗，他们似乎没有从数据库中获取数据。

具有 CGridview 的视图

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'user-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'enablePagination'=>true,
'pager'=>array(
    'maxButtonCount'=>'7',
),
'columns'=>array(
    array(
        'name'=>'bt_number',
        'type'=>'raw',
        'value'=>$model->bt_number,

    ),
    array(
        'name'=>'date_time',
        'type'=>'raw',
        'value'=>$model->date_time,
    ),
            array(
        'name'=>'broker',
        'type'=>'raw',
                    'value'=>$model->broker,
        'filter'=>Yii::app()->params['brokers'],

    ),
    array(
        'class'=>'CButtonColumn',
        'template'=>'{view}{update}'
    ),
)
)); 
```

为模型建模，我试图打印出我过滤的搜索元素之一，而不是任何显示

```
public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    echo "booker ".$this->broker;// exit;
           //above only displays booker there is nothing in $this->broker

    $criteria=new CDbCriteria;

    $criteria->compare('bt_number',$this->bt_number);
    $criteria->compare('sign',$this->sign,true);
    $criteria->compare('fm_buys',$this->fm_buys,true);
    $criteria->compare('fm_buys_amt',$this->fm_buys_amt,true);
    $criteria->compare('against',$this->against,true);
    $criteria->compare('bt_sett_date',$this->bt_sett_date,true);
    $criteria->compare('bt_order_type',$this->bt_order_type,true);
    $criteria->compare('date_time',$this->date_time,true);
    $criteria->compare('dealer',$this->dealer,true);
    $criteria->compare('rate',$this->rate,true);
    $criteria->compare('broker',$this->broker,true);
    $criteria->compare('recapped',$this->recapped,true);
    $criteria->compare('settled',$this->settled,true);
    $criteria->compare('sett_date',$this->sett_date,true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

控制器没有从 $_GET var 中得到任何东西

```
public function actionIndex()
{
    $model=new BrokerTrades('search');
    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['BrokerTrades']))
        $model->attributes=$_GET['BrokerTrades'];

    print_r($_GET)  ;
    $this->render('index',array(
        'model'=>$model,
    ));
} 
```

我不明白为什么这个过滤器不起作用，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:10:24.047

确保您要过滤的每个字段在模型规则中都设置为安全的。

```
public function rules(){
  return array(
    ..
    array('bt_number,sign,fmbuys','safe','on'=>'search'),
  );
} 
```

需要将属性设置为保险箱才能使该行起作用：

`$model->attributes=$_GET['BrokerTrades'];`

只需在第一个字符串中包含您要搜索的所有属性，用逗号分隔。

看看这是否有帮助。

# javascript - 使用 jquery 进行表单验证不触发

> ID：13918798
> 
> 赞同：2
> 
> 时间：2012-12-17T17:15:29.843
> 
> 标签：javascript, jquery, validation

我正在使用这个插件进行表单验证：

[https://github.com/jzaefferer/jquery-validation](https://github.com/jzaefferer/jquery-validation)

而且我在表单之外提交表单，这意味着我没有直接单击正在提交的表单内的提交按钮。这就是我的意思（这是一些按钮点击功能）：

```
$('#myForm').attr('action', '/requested').attr('method', 'post').removeAttr('data-remote').submit(); 
```

我想验证此表单中的一个字段，我可以从 firebug 中看到它呈现如下：

```
<input type="hidden" name="request" id="request" class="required"> 
```

我尝试在文档中调用验证就绪：

```
$('#myForm').validate(); 
```

但它不起作用，我在萤火虫中没有错误。

**版本二**：

HTML：

```
<input type="hidden" name="request" id="request"> 
```

Javascript：

```
$('#myForm').validate({
        rules: {
            request: "required"
        },
        messages : {
            request: "Request name can't be empty."
        }
    }); 
```

我的下一个选择是什么上面这两个都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:07:31.360

尝试添加 $.validator.setDefaults({ ignore: '' }); 如果你想验证隐藏字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:21:17.143

只需尝试使用 $('form').submit();

希望它有效。

如果不是 $('form').submit(true);

# jquery - Foudation Zurb 动态显示模态框

> ID：13918805
> 
> 赞同：5
> 
> 时间：2012-12-17T17:15:43.440
> 
> 标签：jquery, html, zurb-foundation

我在一个列表中有几个项目，每个项目都有一个删除链接，我想要一个显示模式框，当他们按下带有“是”和“取消”链接的删除按钮时显示。

如果用户按下“是”按钮，则显示模式应重定向到如下内容：

www.url.com/delete/item_id

如何将 item_id 传递给 Reveal 模态框？

基础显示模态框： http: [//foundation.zurb.com/docs/reveal.php](http://foundation.zurb.com/docs/reveal.php)

模态框（item_id 应该传递给模态框）：

```
<div id="myModal" class="reveal-modal [expand, xlarge, large, medium, small]">
  <h2>Are you sure you want to delete this item?</h2>
  <a href="/delete/item_id">Yes</a>
  <a class="close-reveal-modal">Cancel</a>
</div> 
```

调用显示：

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#deleteItem").click(function() {
      $("#myModal").reveal();
    });
  });
</script> 
```

HTML（item_id 应该传递给 modal）：

```
<a href="item_id" class="button" data-reveal-id="myModal" id="deleteItem">Delete Item</a> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T19:40:29.340

`.reveal();`在调用之前使用 jQuery 设置值

更新：见 jsFiddle：http: [//jsfiddle.net/jgprU/](http://jsfiddle.net/jgprU/)

html:

```
<ul id="deleteItem">
    <li><a href="10">Click Me</a></li>
    <li><a href="20">Click Me</a></li>
    <li><a href="30">Click Me</a></li>
</ul>

<div id="myModal" class="reveal-modal">
  <h2>Are you sure you want to delete <span id="targetName">error</span>?</h2>
  <a id="confirmDelete" href="setMe">Yes</a>
  <a class="close-reveal-modal">Cancel</a>
</div> 
```

​Javascript：

```
$(document).ready(function() {
  $("#deleteItem a").click(function(e) {
    e.preventDefault();
    var target = $(this).attr('href');
    $("#confirmDelete").attr('href','/delete/' + target)
    $("#targetName").text(target);
    $("#myModal").reveal();
  });
}); 
```

​</p>

# c - 如何通过 gcc 临时文件创建进行故障排除

> ID：13918807
> 
> 赞同：1
> 
> 时间：2012-12-17T17:15:46.300
> 
> 标签：c, linux, gcc

在编译 C（不是 C++）代码时，我在链接时遇到错误，某些标识符已在多个位置定义，但如下所示，输出非常神秘。

有没有办法从 gcc 获得更好的消息，以便我可以看到哪些文件是多个定义的原因？

```
/tmp/cc8kgsLE.o:(.rodata+0x0): multiple definition of `PR_SZ'
/tmp/ccDfv6U4.o:(.rodata+0x0): first defined here
/tmp/cc8kgsLE.o:(.rodata+0x8): multiple definition of `PR_SEC_SZ'
/tmp/ccDfv6U4.o:(.rodata+0x8): first defined here
/tmp/cc8kgsLE.o:(.rodata+0x10): multiple definition of `PR_NSEC_SZ'
/tmp/ccDfv6U4.o:(.rodata+0x10): first defined here

collect2: ld returned 1 exit status 
```

更新：根据回复，我进一步澄清 `PR_SZ`, `PR_SEC_SZ`,`PR_NSEC_SZ`是在一个文件中定义的`.h`, 该文件受`#ifndef`,`#define`和`#endif`宏保护..

在编译方面，我只需键入：

```
gcc -Wall -I. -file1.c file2.c -o file2 
```

更新：

除了响应之外，我发现以下链接相关的 [全局常量没有使用#define](https://stackoverflow.com/questions/9668385/global-constants-without-using-define)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:32:26.753

显示的输出对我来说看起来并不神秘，非常清楚......全局变量（这很糟糕）`PR_SZ, PR_SEC_SZ, PR_NSEC_SZ`被定义为多个 .c 文件

你如何编译你的项目？

这里的主要问题是`.o`文件名与 .c 文件的文件名不匹配。因此，为了能够看到更好的消息，您应该改进您的 Makefile 或您用于构建项目的任何内容。

有关信息：

*   在`.h`全局变量声明的原型中，必须以关键字为前缀：`extern`
*   仅在一个`.c`文件中正常声明变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:57:44.450

你可以这样做。

在头文件中

```
/* a.h */
MYEXTERN int PR_SZ; /* or whatever your variable data type is */ 
```

在第一个 .c 文件中

```
/* a.c */
/* MYEXTERN doesn't evaluate to anything, so var gets defined here */
#define MYEXTERN 
#include "a.h" 
```

在其他 .c 文件中

```
/* MYEXTERN evaluates to extern, so var gets externed in all other C files */
#define MYEXTERN extern
#include "a.h" 
```

所以它只在一个 .c 文件中定义，并在所有其他文件中被外部化。

# c - 在centos 6.2上通过c发送电子邮件的Sprintf错误

> ID：13918808
> 
> 赞同：0
> 
> 时间：2012-12-17T17:15:51.993
> 
> 标签：c, email, centos

我们正在尝试在 centos 6.2 平台上通过 C 语言发送几封电子邮件。下面是代码。错误是警告：内置函数的不兼容隐式声明`sprintf`。

如何解决这个问题？

```
#include <stdlib.h>
#include <string.h>

#define cknull(x) if((x)==NULL) {perror(""); exit(EXIT_FAILURE);}
#define cknltz(x) if((x)<0) {perror(""); exit(EXIT_FAILURE);}
#define LIST_LEN 4

void main()                                          
{                                                                       
    char tmp[256]={0x0};                                                
    char fpBuffer[512]={0x0};                                           
    char email_list[LIST_LEN][256]={  {"****@gmail.com"},             
                               {"****@gmail.com"},             
                               {"***@gmail.com"},         
                               {0x0}};                                  
    int i=0;                                                            
    char *filename = "";                                                                    
    for(i=0;*email_list[i]>0x0;i++)                                
    {                                                                   
        cknull(strcpy(tmp, email_list[i]));                             
        cknltz(sprintf (fpBuffer,                                       
            "/usr/bin/mailx -s '%s %s' %s < %s",                        
            "Please Review:",                                           
            filename,                                                   
            tmp,                                                        
            filename));                                                 
        if(system (fpBuffer)==(-1))                                     
        {                                                               
            perror("email failure");                                    
            exit(EXIT_FAILURE);                                         
        }                                                               
    }                                                                   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:19:16.870

您缺少以下内容：

```
#include <stdio.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:39:48.193

正如所指出的，您缺少原型。我觉得还有几个问题值得一提：

这个：

```
*email_list[i]>0x0 
```

假设它`char`是无符号的，或者至少所有有效字符都大于 0。这不是可移植代码的有效假设，因此最好将其写为：

```
email_list[i][0] != '\0' 
```

我还将哨兵（初始化程序中的最终值`email_list`）写成plain `""`，当你的意思是空字符串时，为什么要更详细地使用（十六进制！）数字常量？

我要提到的最后一件事是使用的建议`snprintf()`，但由于它本身存在可移植性问题，因此在上述之后可能不是一个非常合理的建议。:)

# mongodb - 是否可以直接从浏览器将文件保存到 MongoDB？

> ID：13918809
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:15:53.813
> 
> 标签：mongodb

是否可以直接从浏览器将文件保存到 MongoDB，或者我必须先将文件上传到服务器上的某个目录，然后再将文件插入服务器端的 MongoDB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:23:14.823

浏览器不能直接与 MongoDB 对话。所以答案很明确：不。您需要在两者之间实现一个网络网关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:25:28.313

在 MongoDB 的库存安装中，没有用于查询的 REST 接口；您必须使用现有的 Web 应用程序（这种情况下最好的选择），或者在 MongoDB 周围添加一个接口层。

有关更多信息，请参见[http://www.mongodb.org/display/DOCS/Http+Interface#](http://www.mongodb.org/display/DOCS/Http+Interface#)和[http://blog.mongodb.org/post/183689081/storing-large-objects-and-files-in-mongodb](http://blog.mongodb.org/post/183689081/storing-large-objects-and-files-in-mongodb)关于文件存储和通过 REST 与 MongoDB 交互。

# python - Django：如何从其他两个字段计算一个字段的初始值？

> ID：13918819
> 
> 赞同：2
> 
> 时间：2012-12-17T17:16:25.053
> 
> 标签：python, django

我想将总计作为其他两个字段的计算字段，但不确定如何分别获取它们的数据。（我尝试了 .value 没有任何喜悦）

```
Class TestForm(ModelForm):

    def __init__(self, *args, **kwargs):
       super(TestForm, self).__init__(*args, **kwargs)        
       self.fields['total_price'].initial = self.fields['price'].??? * self.fields['quantity'].??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:43:28.627

假设您正在处理绑定表单，您可以使用它`**kwargs['instance']`来获取模型实例。

因此，您的`__init__`方法将类似于-

```
 def __init__(self, *args, **kwargs):
       super(TestForm, self).__init__(*args, **kwargs)  
       instance = kwargs['instance']
       self.fields['total_price'].initial = instance.price * instance.quantity 
```

如果您不处理绑定表单，那么您可以使用`self.fields['price'].initial`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:20:38.990

您也是在视图中执行此操作的一种选择.....

老式的方式....

但这不是模型形式...

所以艾丹的回答更好，但如果你真的想做定制的东西......老式的方式

```
if request.method == 'POST': # If the form has been submitted...
    form = TestForm(request.POST) # A form bound to the POST data
    if form.is_valid(): # All validation rules pass
            # Process the data in form.cleaned_data
            # ...
            whatever = form.cleaned_data['whatever']
            #and you can update the data and make the form with the new data
            data = {'whatever': whatever,'etc.': etc}
            form=TestForm(data)

else:
    # An unbound form
    form = TestForm(initial={'whatever': whatever,'etc.': etc})
return render_to_response(template,{'form':forms},context_instance=RequestContext(request)) 
```

# c# - BeginInvoke 中的 InvalidOperationException

> ID：13918821
> 
> 赞同：2
> 
> 时间：2012-12-17T17:16:29.763
> 
> 标签：c#, .net-3.5, multithreading, begininvoke

我收到一条`InvalidOperationException`with 消息`Cross-thread operation not valid..`

`_waitForm`是在主窗体的构造函数中创建的。屏幕截图中的方法是从另一个线程调用的。我虽然这是`BeginInvoke`解决问题的方法。我知道我正在从另一个线程而不是创建的线程访问表单。关于如何解决这个问题的任何想法？

![在此处输入图像描述](../Images/73d0776f961f46491785b24eee7e2421.png)

这是堆栈跟踪：

```
 at System.Windows.Forms.Control.get_Handle()
   at System.Windows.Forms.Control.get_ContainsFocus()
   at System.Windows.Forms.Control.SelectNextIfFocused()
   at System.Windows.Forms.Control.SetVisibleCore(Boolean value)
   at System.Windows.Forms.Form.SetVisibleCore(Boolean value)
   at System.Windows.Forms.Control.Hide()
   at YYYYYY.Boundary.ZzzzzForm.<HideWaitForm>b__c() in R:\Projects\XXXX\trunk\src\YYYYYY\Boundary\ZzzzzForm.cs:line 514
   at System.Windows.Forms.Control.InvokeMarshaledCallbackDo(ThreadMethodEntry tme)
   at System.Windows.Forms.Control.InvokeMarshaledCallbackHelper(Object obj)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Forms.Control.InvokeMarshaledCallback(ThreadMethodEntry tme)
   at System.Windows.Forms.Control.InvokeMarshaledCallbacks() 
```

*抱歉截图，我想展示整个图片*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:21:46.167

您是否尝试过`_waitForm`通过以下方式进行操作：

```
_waitForm.Invoke(new MethodInvoker(_waitForm.Hide)); 
```

或者，如果上述方法不起作用：

```
_waitForm.Invoke(new MethodInvoker(() => 
{
    _waitForm.Reset();
    _waitForm.Hide();
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:00:38.163

我已经找到了。当然是我的错！

该方法的反面是显示`_waitForm`. 我错误地`_waitForm.Show()`从另一个而不是 UI 线程调用而没有调用。奇怪的是，这能够成功并导致此异常（具有错误消息）。

# python - 从 Imgur api 获取数据时出现 403 错误。我哪里错了？

> ID：13918823
> 
> 赞同：1
> 
> 时间：2012-12-17T17:16:38.940
> 
> 标签：python, imgur

从 imgur api 页面：

> 对于公共只读和匿名资源，例如获取图像信息、查找用户评论、创建匿名相册等，您只需发送带有您的 client_id 的授权标头以及您的请求。如果您想匿名上传图片（不将图片绑定到帐户），这也适用。这让我们知道哪个应用程序正在访问 API。

这是我使用 python-requests 的请求：

```
 payload = {"Client-ID":"my client id"}
 r=requests.get("https://api.imgur.com/3/account/imgur/images/0.json?perPage=42&page=6", data = payload,headers={"content-type":"text"},verify=False) 
```

我收到 403 错误。我想做的就是检索图像。与用户信息无关，所以不需要Oauth2。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:23:49.463

看起来您正在发送您的客户 ID 作为您的请求正文。文档说它需要在 Authorization 标头中。

```
headers = {"Content-Type": "text", "Authorization": "Client-ID YOUR_CLIENT_ID"}
r = requests.get("https://...", headers=headers, verify=False) 
```

# visual-studio-2013 - 将 Visual Studio 2010 与 Sharepoint 2013 一起使用

> ID：13918826
> 
> 赞同：3
> 
> 时间：2012-12-17T17:17:14.810
> 
> 标签：visual-studio-2013, sharepoint-2010

是否需要将 Visual Studio 2010 升级到 Visual Studio 2012 才能在 SharePoint 2013 上进行开发？

新的 SharePoint 2013 设计器插件是否与 Visual Studio 2010 兼容？

如果我坚持使用 Visual Studio 2010，SharePoint 2013 是否有任何功能被锁定？是否适用于 SharePoint 2013，我会失去任何功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T11:35:27.180

大多数特定于 SP2013 的开发将是应用程序，因此最好安装 VS 2012。此外，列表等项目模板在 VS 2012 中得到了极大的改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-26T09:48:43.617

虽然问题是关于 VS 2010 但我在寻找 VS 2012 解决方案时被重定向到这里，以下是对我有用的解决方案的描述。

您可以通过[Microsoft Web Platform Installer安装](http://www.microsoft.com/web/downloads/platform.aspx)**Microsoft Office Developer Tools for Visual Studio 2012**或使用大小为**36mb的**[离线安装程序](http://go.microsoft.com/fwlink/?LinkID=279063&clcid=0x409)。

 **创建了一个名为**Office/SharePoint**的新类别，其中包含所有可用的 sharepoint 2010 和 2013 模板，除了 office 和新的 SharePoint 应用程序模型

![在此处输入图像描述](../Images/37a68985f4652f1942b73658a86c407c.png)

[http://zimmergren.net/technical/upgrading-your-sharepoint-2010-visual-studio-projects-and-solutions-to-sharepoint-2013](http://zimmergren.net/technical/upgrading-your-sharepoint-2010-visual-studio-projects-and-solutions-to-sharepoint-2013)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T17:06:35.387

我的理解是 Visual Studio 2010 将与 SharePoint 2013 一起使用，但您会错过新的 SharePoint 2013 特定模板，例如与新应用模型相关的任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T07:24:07.413

我认为它可以在不升级 VS2010 的情况下工作

看看这个链接，它说明了 SP 2013 的要求

> [http://www.microsoft.com/en-us/download/details.aspx?id=30722](http://www.microsoft.com/en-us/download/details.aspx?id=30722)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-28T09:16:16.093

我会在 SigarDave 帖子上发表声明，但我没有足够的声誉。因此，这个答案，所以请全面:)

我已经测试从 Sharepoint 2013 SDk 加载示例项目，因为 SigarDave 链接到我的 VS2010。我只是想在这里概述一些示例将不起作用并显示项目与您的 VS 版本之间的不兼容消息，主要是当项目涉及未处理到 VS2010 的 Sharepoint 应用程序时。而当你没有这个错误时，你必须下载一些未知的依赖项......

因此，如果您介意使用 VS2010 开发 Sharepoint 2013 解决方案，请保持您的心理健康

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T10:31:15.160

我用谷歌搜索将 VS 2010 用于 SP2013，但没有运气。最后安装 VS 2012 并点击以下链接：

[http://yalla.itgroove.net/2012/08/sharepoint-2013-project-templates-for-visual-studio-2012/](http://yalla.itgroove.net/2012/08/sharepoint-2013-project-templates-for-visual-studio-2012/)

谢谢，尼尔纳詹**

# java - 为屏幕录像机创建 GUI

> ID：13918830
> 
> 赞同：2
> 
> 时间：2012-12-17T17:17:36.147
> 
> 标签：java, popup, jframe

我在看 Randel Schofer 的屏幕录像机，我喜欢它的 GUI。我试图在不查看源代码的情况下自行设计一个。我知道这是最简单的方法，但我想自己解决问题。
我遇到了很多问题：
![问题](../Images/9fc9703febdc9c6dd3d9c0c3a958f6be.png)

*   **我如何获得这样的背景？**我知道`GradientPaint`可以这样做。我用它来填充矩形和圆形，但我怎样才能用它来填充`JFrame`？*   **如何添加该箭头？**我知道如何为按钮添加图像，但它们是 24 x 24 并且非常大，所以我不知道那是什么*   **那是一个JPopupMenu吗？****我知道如何创建它们并赋予它们功能，但我所有的弹出菜单都在`JFrame`***   ****那是什么？当我单击时，它会打开“视频”文件夹**问题说明了一切*   **如何添加该计时器？**我需要一个线程来维持时间吗？如果是，我该如何使用该`run()`方法？*编辑：*

```
public class ScreenRecorder extends JFrame{
    protected class background extends JPanel{
        @Override
        public void paintComponent(Graphics g){

        }
    }
} 
```

我仍然无法获得背景。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:22:59.490

1.  覆盖 JFrame 内 JPanel 的 paintComponent 并以与 Shape 相同的方式绘制渐变。

2.  您必须在 Photoshop / GIMP 中创建该图像，然后将其添加到 JLabel 或 JButton（取决于交互性）。

3.  是的 - 从技术上讲，它仍然在 JFrame 内部（在 JFrame 内的 JLabel/JButton 上设置）。只是它在外面绘制，因为 JFrame 太小了。

4.  [java：单击按钮时打开文件夹](https://stackoverflow.com/questions/9134096/java-open-folder-on-button-click)

5.  定时器可以这样实现：

    ```
    ActionListener listener = new ActionListener()  
            {  
                public void actionPerformed(ActionEvent e)  
                {  
                    // Update the display with the time.
                }  
            }; 
    timer = new Timer(speed, listener);
    timer.setInitialDelay(pause);
    timer.start(); 
    ```

# python-2.7 - Chaco 中带有日期和时间刻度的动态更新 x 轴

> ID：13918835
> 
> 赞同：1
> 
> 时间：2012-12-17T17:18:02.170
> 
> 标签：python-2.7, chaco

我展示了一个带有 chaco 和特征的情节。在 y 轴上显示来自文件的数据，在 x 轴上显示索引。我使用计时器来更新数据并增加索引，但我想显示日期和时间而不是索引。我不知道该怎么做。我展示一段代码来说明：

```
 import random
    import wx
    import time
    from numpy import arange, array, hstack, random

    # Enthought imports
    from chaco.api import Plot, ArrayPlotData, ArrayDataSource, BarPlot, DataRange1D, \
            LinearMapper, VPlotContainer, PlotAxis, \
            FilledLinePlot, add_default_grids, PlotLabel
    #from chaco.api import Plot, ArrayPlotData
    from enable.component_editor import ComponentEditor
    from numpy import linspace
    from traits.api import Array, Bool, Callable, Enum, Float, HasTraits, \
                                     Instance, Int, Trait
    from traitsui.api import Group, HGroup, Item, View, spring, Handler
    from pyface.timer.api import Timer

    # Chaco imports
    from chaco.chaco_plot_editor import ChacoPlotItem
    from chaco.scales.api import CalendarScaleSystem
    from chaco.scales_tick_generator import ScalesTickGenerator

    import os
    import matplotlib
    import matplotlib.pyplot as plt

    from datetime import *

    #abrimos  el fichero de configuracion
    _fconf = open('graficas.cfg', 'r')
    #obtenemos el directorio de los ficheros_udp
    _directorio_in = _fconf.read(40)
    #cerramos el fichero de ArithmeticError
    _fconf.close()

   class Viewer(HasTraits):

        """ Esta clase solo contiene los dos arrays que serán actualizados por el controlador. La visualización / edicion para esta clase es una
            grafica de chaco.
        """

        index = Array

        data = Array

        # This "view" attribute defines how an instance of this class will
        # be displayed when .edit_traits() is called on it. (See MyApp.OnInit()
        # below.)

        view = View(ChacoPlotItem("index", "data",
                    resizable=True,
                    x_label="Fecha",
                    y_label="Temperatura ($^\circ$C)C",
                    color="blue",
                    bgcolor="white",
                    border_visible=True,
                    border_width=1,
                    padding_bg_color="lightgray",
                    width=800,
                    height=300,
                    marker_size=2,
                    show_label=False),
                    resizable = True,
                    buttons = ["OK"],
                    width=800,
                    height=500,
                    title="CECAFLUX"
                   )

    # Funcion encargada de la lectura de los datos del fichero de datos

    def get_datos(obj):
        datos_hoy = matplotlib.mlab.csv2rec(obj, delimiter=',')
        ultimo_reg = datos_hoy[-1]
        fecha = ultimo_reg['fecha']
        t1 = ultimo_reg['t1']
        t2 = ultimo_reg['t2']
        t3 = ultimo_reg['t3']
        t4 = ultimo_reg['t4']
        t5 = ultimo_reg['t5']
        f1 = ultimo_reg['f1']
        f2 = ultimo_reg['f2']
        p = ultimo_reg['peltier']
        return (fecha, t1, t2, t3, t4, t5, f1, f2, p)

    class Controller(HasTraits):

        # A reference to the plot viewer object
        viewer = Instance(Viewer)

        # El numero maximo de puntos a acumular en la grafica en este caso 288, 24 horas si muestreamos a 5 minutos.
        max_num_points = Int(288)

        # The number of data points we have received; we need to keep track of
        # this in order to generate the correct x axis data series.
        num_ticks = Int(0)

        def timer_tick(self, *args):
            """ Callback function that should get called based on a wx timer
                tick. This will generate a new random datapoint and set it on
                the .data array of our viewer object.
            """
            global _fconf
            global _directorio_in
            #obtenemos la fecha del sistema
            ahora = datetime.utcnow()
            anio = datetime.today().year
            mes = datetime.today().month

            diferencia = timedelta(days=1)
            ayer = ahora - diferencia

            directorio_fecha = "%d/%d/" % (anio, mes)
            #print _directorio_in
            directorio_aux = _directorio_in + directorio_fecha
            #obtenemos todos los ficheros del directorio 
            ficheros = os.listdir(directorio_aux)
            #ordenamos la lista de ficheros
            ficheros.sort()
            #obtenemos la longitud
            longitud = len(ficheros)
            #obtenemos el fichero ultimo que es el que esta abierto
            fichero_ultimo = ficheros[longitud-1]

            #abrimos el fichero y obtenemos el ultimo dato si ha sido modificado
            ahora_noUTC = datetime.now()
            dt=ahora_noUTC-timedelta(minutes=1)
            path=os.path.join(directorio_aux,fichero_ultimo)
            st=os.stat(path)    
            mtime=datetime.fromtimestamp(st.st_mtime)
            print "mtime "+str(mtime)
            print "dt "+str(dt)

            if mtime>dt:
                print "Fichero modificado"

                # generamos los nuevos datos e incrementamos el contados de marcas del eje x
                fecha, t1, t2, t3, t4, t5, f1, f2, peltier = get_datos(path)  # identar
                new_val = t1
                self.num_ticks += 1

                # grab the existing data, truncate it, and append the new point.
                # This isn't the most efficient thing in the world but it works.
                # almacena el dato actual en cur_data

                cur_data = self.viewer.data
                cur_data_x = self.viewer.index

                # movemos el valor actual una posicion y apilamos el nuevo valor
                new_data = hstack((cur_data[-self.max_num_points+1:], [new_val]))
                # here I would like to show date and time instead of the index number
                new_index = arange(self.num_ticks - len(new_data) + 1, self.num_ticks+0.01)

                self.viewer.index = new_index
                self.viewer.data = new_data

            return

    # wxApp used when this file is run from the command line.

    class MyApp(wx.PySimpleApp):

        def OnInit(self, *args, **kw):
            viewer = Viewer()
            controller = Controller(viewer = viewer)

            # Pop up the windows for the two objects
            #viewer.configure_traits()
            viewer.edit_traits()
            #controller.edit_traits()

            # Set up the timer and start it up
            self.setup_timer(controller)
            return True

        def setup_timer(self, controller):
            # Create a new WX timer
            timerId = wx.NewId()
            self.timer = wx.Timer(self, timerId)

            # Register a callback with the timer event
            self.Bind(wx.EVT_TIMER, controller.timer_tick, id=timerId)

            # Start up the timer! We have to tell it how many milliseconds
            # to wait between timer events. For now we will hardcode it
            # to be 100 ms, so we get 10 points per second.
            # ejecutamos cada  1 minuto
            self.timer.Start(60000.0, wx.TIMER_CONTINUOUS)
            return

    # This is called when this example is to be run in a standalone mode.
    if __name__ == "__main__":
        app = MyApp()
        app.MainLoop()

    # EOF 
```

# javascript - 在提交按钮中使用 response.Redirect(url)

> ID：13918836
> 
> 赞同：0
> 
> 时间：2012-12-17T17:18:02.797
> 
> 标签：javascript, jsp, httprequest

我有以下问题：我正在编写一个代码，提交表单并在表单提交到后`Target.jsp`显示内容。`Display.jsp``Target.jsp`

如何`response.Redirect("jsp/Display")`在以下代码中使用？

```
 <form method="POST" class="example" action="/project/jsp/Target.jsp" id=form >
   <!--Some tags here-->

    <input type="submit" name="submit" value="submit Changes" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:38:11.237

只需从 Target.jsp 内部将信息传递给 Display.jsp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:38:41.413

你可以用`window.location.href`这个。

```
window.location.href='/jsp/Display' 
```

从客户端 JavaScript，这会将浏览器导航到新位置。

但是，评估导航到新页面是否是您想要的？如果您只需要显示提交表单后返回的一段 HTML，则使用 AJAX 捕获该响应并将其添加到文档树中可能更明智，而无需导航到其他页面。

# assembly - AT&T 语法中的 3 或 4 参数 x86 程序集

> ID：13918837
> 
> 赞同：0
> 
> 时间：2012-12-17T17:18:03.713
> 
> 标签：assembly, syntax, x86, x86-64, gnu-assembler

简单的问题。我怀疑这会受到很多关注，但是我如何在 AT&T (gAS) 语法中的 x86-64 汇编中进行 3 或 4 个参数操作？任何使用 gAS 的 x86 程序员都知道参数已*切换*，例如：

```
xor   eax,  ebx ; Intel (xASM)
xorl %ebx, %eax ; AT&T (gAS) 
```

但是我该怎么做，说：

```
blendpd xmm0, xmm1, 5 
```

我的意思是，说明书是怎么写的？我知道会有`%xmm0`这样的（仍然是参数的前缀），但是它们是如何排序的以及在指令末尾添加什么后缀（`l`in`movl`表示 32 位）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:23:24.033

AT&T 等价物是操作数顺序颠倒的地方：

```
blendpd $5, %xmm1, %xmm0 
```

如果您不确定是否始终可以使用 Intel 语法进行编译，请反汇编为 AT&T。

# nhibernate - NHibernate Map 集合中的默认项

> ID：13918844
> 
> 赞同：1
> 
> 时间：2012-12-17T17:18:36.090
> 
> 标签：nhibernate, map

假设我有一个 Foo 类，如下所示：

```
public class Foo
{
    public virtual int FooId { get; protected internal set; }
    public virtual List<Bar> bars { get; protected internal set;}
    public virtual Bar DefaultBar { get; set; }
} 
```

其中 Foo 有一个 Bar 的集合，并且有一个 Bar 类型的 DefaultBar 属性。

条形图的集合存储在具有以下字段的表中

```
FooBarID   int   PK
FooID      int   FK
BarID      int   FK
Default    bit 
```

其中只有一行匹配 FooID 值的集合可以具有 Default=1。忽略这种糟糕的设计（遗留系统需要），

在我的地图中，我有以下内容：

```
<class name="Bar">
  <id name="BarID" generator="native" unsaved-value="0" />
</class>

<class name="Foo">
  <id name="FooID" generator="native" unsaved-value="0" />
  <set name="Bars"
       table="FooBars">
    <key column="FooId" />
    <many-to-many class="Bar" column="BarId" />
  </set>

</class> 
```

我如何将 BarID 在 Default=1 的单个匹配行中指示的值映射到 Foo 实例的 DefaultBar 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:44:39.290

我想为您的财产配置“公式”可以帮助您。请参阅[此链接](https://stackoverflow.com/questions/887474/nhibernate-property-formula-filter)。

# javascript - 有条件地禁用 dijit 菜单

> ID：13918847
> 
> 赞同：0
> 
> 时间：2012-12-17T17:18:54.060
> 
> 标签：javascript, dojo

我正在尝试`disabled: true`根据`on`类似的值有条件地添加属性或什么都不添加：

```
 var on = true;
        pMenu.addChild(new MenuItem({
          label: "Disabled menu item",
            if(on){
              return disabled: true;
            }
        })); 
```

这似乎在控制台“数字不是函数”中返回错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:14:30.357

我想这应该可行：

```
 var on = true;
    pMenu.addChild(new MenuItem({
        label: "Disabled menu item",
        disabled: on ? true : false
    })); 
```

如果在你的用例`on`中真的是一个`boolean`-value，你也可以将它分配给 disabled like `disabled: on`，就是这样。但据我所知，您不能执行语句（就像`if`非构造函数对象声明中的 -cascade 一样`{}`。

`disabled`默认情况`false`下，这实际上就像什么都不添加，但在我个人看来它变得更具可读性。

想一想：您没有向实例添加属性，您实际上只是想为已经存在的属性设置一个值。

# c# - ASP.NET：在树视图节点内搜索

> ID：13918848
> 
> 赞同：0
> 
> 时间：2012-12-17T17:18:56.787
> 
> 标签：c#, asp.net, treeview

我有一个带有一些节点的树视图

```
--Parent
  --Child-0
    --child-0.0
    --child-0.1
    --child-0.2
    --child-0.3
  --Child-1
  --Child-2 
```

我稍后会更新这个树视图，你如何以`child-0.2`编程方式更新/插入值，我不知道`Child-0`有多少孩子？

尝试了以下代码，但编译器不喜欢它

```
foreach (TreeNode n in Treeview1.Nodes[0].ChildNodes[0])
{
   //whats the syntax gonna be?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:25:19.400

```
int childrenCount = Treeview1.Nodes[0].ChildNodes[0].ChildNodes.Count; 
```

# ruby - 比红宝石少一倍

> ID：13918853
> 
> 赞同：4
> 
> 时间：2012-12-17T17:19:15.357
> 
> 标签：ruby

> **可能重复：**
> [对“<<”的作用感兴趣](https://stackoverflow.com/questions/12511446/interested-in-what-the-does)

我读过[Ruby 类继承：什么是`<<`（双倍小于）？](https://stackoverflow.com/questions/6182628/ruby-class-inheritance-what-is-double-less-than). 我知道它有助于为实例创建方法（一种继承）。但是我遇到了一个代码：

```
threads << Thread.new(page) { |myPage|
h = Net::HTTP.new(myPage, 80)
puts "Fetching: #{myPage}"
resp, data = h.get('/', nil )
puts "Got #{myPage}:  #{resp.message}"
} 
```

`threads`数组在哪里。有人可以解释使用`<<`对象而不是类的用法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T17:22:55.173

操作符可以被`<<`重载来做任何事情，因为它*只是一个方法*。一个类可以自由地为操作员定义自己的行为`<<`。在这种情况下，`threads`是一个数组或类似数组的对象，典型的数组语义`<<`用作`push`. 该代码只是将一个新的附加`Thread`到一个名为`threads`.

# c++ - 如何将多维动态数组传递给C++中的函数

> ID：13918855
> 
> 赞同：0
> 
> 时间：2012-12-17T17:19:18.147
> 
> 标签：c++, function, multidimensional-array

我已经创建了一个像这样的多维动态数组

```
int N;
cin >> N;
bool ** hap = new bool*[N];

for(int i = 0; i < N; i++)
hap[i] = new bool[N]; 
```

而且它似乎工作正常，但我需要将此数组传递给一个函数......

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:20:31.997

完全按照您声明的方式传递它；作为布尔**。这是一个示例定义：

```
void myFunc(bool** param)
{
    // Do stuff with param here, indexing it normally
} 
```

然后你可以像这样调用函数：

```
myFunc(hap); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:23:44.660

本质上，[与返回多维数组相同](https://stackoverflow.com/a/13917451/1968)。

1.  不要在这里使用指针和原始内存管理。
2.  通过 (const) 引用传递表示数组的对象：

```
void f(matrix_2d const& mat) {
    // do something.
}

matrix_2d mat = { {1, 2}, {3, 4} };
f(mat); 
```

对于适当的定义`matrix_2d`——例如：

```
using matrix_2d = std::vector<std::vector<int>>; 
```

（此代码需要 C++11，但原则上同样适用。）

# excel - 从 .vbs 文件中杀死 Excel.exe

> ID：13918859
> 
> 赞同：0
> 
> 时间：2012-12-17T17:19:34.417
> 
> 标签：excel, vbscript, vba

假设我正在运行一个 .vbs 脚本来处理 Excel 工作表，现在如果由于某种原因发生任何错误，我想退出该 .vbs 脚本以运行，并且立即从该 .vbs 文件中终止进程 EXCEL.EXE .

杀死该进程 EXCEL.EXE 后，我希望所有数据更改都由 excel 表上的脚本进行，应该需要***回滚***

可能吗？

***更新：***

我有一个代码，但我应该如何将它嵌入到我的脚本中，我不明白：

```
 Option Explicit
 Dim objService,Process
 set objService = getobject("winmgmts:")

 for each Process in objService.InstancesOf("Win32_process")
  WScript.echo Process.Name & vbTab & Process.processid
 Next 
```

***脚本***

```
 Option Explicit

  Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump

  strPathExcel1 = "D:\VB\Copy of Original Scripts\CopyofGEWingtoWing_latest_dump_21112012.xls"
  objExcel1.Workbooks.open strPathExcel1
  Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)
  Set objSheet2 = objExcel1.ActiveWorkbook.Worksheets("Bad Data")

 objExcel1.ScreenUpdating = False
 objExcel1.Calculation = -4135  'xlCalculationManual

 IntRow2=2
 IntRow1=4
  Do Until IntRow1 > objSheet1.UsedRange.Rows.Count

  ColStart = objExcel1.Application.WorksheetFunction.Match("Parent Business Process ID", objSheet1.Rows(3), 0) + 1 

Do Until ColStart > objSheet1.UsedRange.Columns.Count And objSheet1.Cells(IntRow1,ColStart) = ""

    If objSheet1.Cells(IntRow1,ColStart + 1) > objSheet1.Cells(IntRow1,ColStart + 5) And objSheet1.Cells(IntRow1,ColStart + 5) <> "" Then

    objSheet1.Range(objSheet1.Cells(IntRow1,1),objSheet1.Cells(IntRow1,objSheet1.UsedRange.Columns.Count)).Copy
    objSheet2.Range(objSheet2.Cells(IntRow2,1),objSheet2.Cells(IntRow2,objSheet1.UsedRange.Columns.Count)).PasteSpecial
    IntRow2=IntRow2+1
    Exit Do

    End If

ColStart=ColStart+4
Loop

IntRow1=IntRow1+1
Loop

objExcel1.ScreenUpdating = True
objExcel1.Calculation = -4105   'xlCalculationAutomatic

'=======================
objExcel1.ActiveWorkbook.SaveAs strPathExcel1
objExcel1.Workbooks.close
objExcel1.Application.Quit 
```

'=======================

***终止代码***

```
 strComputer = "FullComputerName" 
   strDomain = "DOMAIN" 
   strUser = InputBox("Enter user name") 
   strPassword = InputBox("Enter password") 
   Set objSWbemLocator = CreateObject("WbemScripting.SWbemLocator") 
   Set objWMIService = objSWbemLocator.ConnectServer(strComputer, _ 
   "root\CIMV2", _ 
   strUser, _ 
   strPassword, _ 
   "MS_409", _ 
   "ntlmdomain:" + strDomain) 
   Set colProcessList = objWMIService.ExecQuery _
   ("SELECT * FROM Win32_Process WHERE Name = 'notepad.exe'")
 For Each objProcess in colProcessList
  objProcess.Terminate()
 Next 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:34:46.683

评论表明，使用 WMI 杀死从已终止脚本中遗留下来的僵尸 Excel.exe 是一个坏主意。正确的方法是通过在包含您以前的顶级代码的函数周围放置 OERN..OEG0 来驯服 VBScript 可怕的错误处理：

```
Option Explicit

Dim goFS    : Set goFS    = CreateObject("Scripting.FileSystemObject")
Dim goWAN   : Set goWAN   = WScript.Arguments.Named
Dim goExcel : Set goExcel = Nothing
Dim goWBook : Set goWBook = Nothing
Dim gnRet   : gnRet       = 1
Dim gaErr   : gaErr       = Array(0, "", "")

On Error Resume Next
gnRet = Main()
gaErr = Array(Err.Number, Err.Source, Err.Description)
On Error GoTo 0
If 0 = gaErr(0) Then
   If goWBook Is Nothing Then
      WScript.Echo "surprise: no oWBook, won't save"
   Else
      WScript.Echo "will save"
      goWBook.Save
   End If
Else
   WScript.Echo Join(gaErr, " - ")
   If goWBook Is Nothing Then
      WScript.Echo "surprise: no oWBook, won't close"
   Else
      WScript.Echo "will close False"
      goWBook.Close False
   End If
End If
If goExcel Is Nothing Then
   WScript.Echo "surprise: no oExcel, won't quit"
else
   WScript.Echo "will quit"
   goExcel.Quit
End If
WScript.Quit gnRet

Function Main()
  Main = 1
  If goWAN.Exists("alpha") Then Err.Raise vbObjectError + 2, "Main()", "before CO(Excel)"
  Set goExcel = CreateObject("Excel.Application")
  Set goWBook = goExcel.Workbooks.Open(goFS.GetAbsolutePathName("..\data\savexcel.xls"))
  Dim oRngA1 : Set oRngA1 = goWBook.Worksheets(1).Range("$A1")
  oRngA1.Value = oRngA1.Value + 1
  Dim oRngA2 : Set oRngA2 = goWBook.Worksheets(1).Range("$A2")
  If goWAN.Exists("beta") Then
     oRngA2.Value = oRngA1.Value / 0
  Else
     oRngA2.Value = oRngA1.Value / 2
  End If
  Main = 0
End Function ' Main 
```

三个运行的输出：

```
cscript savexcel.vbs
will save
will quit

cscript savexcel.vbs /alpha
-2147221502 - Main() - before CO(Excel)
surprise: no oWBook, won't close
surprise: no oExcel, won't quit

cscript savexcel.vbs /beta
11 - Microsoft VBScript runtime error - Division by zero
will close False
will quit 
```

如果您打开任务管理器并不时使用 Excel 检查工作表，您会看到

1.  不会有 Excel.exe 僵尸（如果您使用调试器则执行）
2.  如果出现错误，.xls 不会更改

有关代码结构/布局/Main() 函数的一些背景信息，请参见[此处。](https://stackoverflow.com/a/13628160/603855)

**更新 - 解释我对@oracle 回答的反对票：**

```
option explicit
--  A must
on error resume next
--  Global OERN - a short way to desaster

dim xl: set xl = CreateObject("Excel.Application")
--  Unchecked - script will continue, even if "ActiveX component can't create object"

dim book: set book = xl.WorkBooks.Open("...")
--  Unchecked - script will continue, even if "File not found"

' manipulate book etc
' whenever there is a chance of error, or at the end of the script
' check the err object and clean up if necessary

book.worksheets(1).range("whatever") = interesting computation which fails
if err.Number <> 0 then
    SbCleanUp xl
    WScript.echo err.Description
    err.clear
--  SbCleanUp has quit Excel!
end if

-- now repeat those lines for each action you think of as risky
-- (and forget it for all those actions which really are dangerous)

' update changes, close Excel
book.Save
--  How? SbCleanUp has quit Excel!
--  What about error checking? Forgot it? Can't be bothered?

SbCleanUp xl
--  Why? SbCleanUp has quit Excel!

--  As we have no indication of trouble, let's
--  save the data based on wrong computations
--  in a .txt file and delete the .xls we don't
--  need anymore.
--- **OOOPS**

Sub SbCleanUp(byref xl)
    if not (xl Is Nothing) then
        dim book
        for each book in xl.WorkBooks
            book.Saved = true
        next 'book
        xl.Quit
    end if
End Sub 
```

**更新二：**

我撤销了对@oracle 答案的反对票，因为错误处理 If 块中的 WScript.Quit 将在出现**此**错误时停止脚本。但请考虑：所有**其他**未检查的错误将保持隐藏并且不会中止程序，并且每次检查将花费您大约 5 行样板代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:01:50.490

基本上，我使用 Excel 的方式是调用`xl.Quit()`错误处理程序。要确保没有更改保存到书中，请`book.Saved = true`预先使用。这可以防止 Excel 抱怨打开的工作簿已更改

```
option explicit
on error resume next

dim xl: set xl = CreateObject("Excel.Application") 

dim book: set book = xl.WorkBooks.Open("...")
' manipulate book etc
' whenever there is a chance of error, or at the end of the script
' check the err object and clean up if necessary
if err.Number <> 0 then
    SbCleanUp xl
    WScript.echo err.Description
    err.clear
    WScript.Quit 1
end if

' update changes, close Excel
book.Save
SbCleanUp xl

Sub SbCleanUp(byref xl)
    if not (xl Is Nothing) then
        dim book
        for each book in xl.WorkBooks
            book.Saved = true
        next 'book
        xl.Quit
    end if
End Sub 
```

# java - Java 从 UTF-16LE 字符串解析 XML

> ID：13918860
> 
> 赞同：1
> 
> 时间：2012-12-17T17:19:35.873
> 
> 标签：java, android, xml, saxparser, utf-16

我正在尝试解析嵌入在文件中的 UTF-16LE XML 字符串。我能够将实际字符串读入 String 对象，并且可以在监视窗口中查看 XML，它看起来很好。问题是，当我尝试解析它时，会不断抛出异常。我试图在 getBytes 行和 InputStreamReader 构造函数中指定 UTF-16 和 UTF-16LE，但它仍然抛出异常。

```
DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = null;

builder = builderFactory.newDocumentBuilder();      
Document document = null;
byte[] bytes = xmlString.getBytes();
ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes);
InputSource is = new InputSource(new InputStreamReader(inputStream));
document = builder.parse(is); // throws SAXParseException 
```

编辑：这是使用Android。此外，这是我在堆栈跟踪顶部得到的异常：

12-18 13:51:12.978: W/System.err(5784): org.xml.sax.SAXParseException: 预期名称（位置：START_TAG @1:2 in java.io.InputStreamReader@4118c880）12-18 13： 51:12.978: W/System.err(5784): 在 org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:146) 12-18 13:51:12.978: W/System.err(5784 ): 在 javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:107)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:18:36.840

这是我最终做的事情：

```
DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = null;

builder = builderFactory.newDocumentBuilder();      
Document document = null;
byte[] bytes = Charset.forName("UTF-16LE").encode(xmlString).array();
InputStream inputStream = new ByteArrayInputStream(bytes);
document = builder.parse(inputStream); 
```

资料来源：[如何从字符串创建 InputStream？](https://stackoverflow.com/questions/5720524/how-does-one-create-an-inputstream-from-a-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:37:25.627

无需在同一程序中在字符串和字节之间来回转换。这很简单：

```
String xml = "<root><tag>Hello World!</tag></root>";

Document dom = DocumentBuilderFactory.newInstance()
    .newDocumentBuilder().parse(new InputSource(new StringReader(xml))); 
```

# java - Spring Data 方法名称中的关键字优先级

> ID：13918862
> 
> 赞同：2
> 
> 时间：2012-12-17T17:19:36.943
> 
> 标签：java, spring-data

这是我被迫注释的 JPQL：

```
@Query(
 "SELECT a from Employee a WHERE eid = :eid and hireDate between :first and :last order by projectId"
) 
```

因为我无法让它工作：

```
public List<Employee>
findByEidAndHireDateBetweenOrderByProjectId(
  String eid, Date first, Date last); 
```

我的方法名称是否正确遵循 Spring Data 查询方法名称的命名约定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:50:05.153

> 可以通过将 OrderBy 子句附加到引用属性***并提供排序方向*** （Asc 或 Desc）的查询方法来应用静态排序。 [Spring Data JPA - 参考文档](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.query-methods.query-creation)

可能的问题：

*   "findByid..." **<-** id 是小写的
*   您提到要按“ **eid** ”进行搜索，因此应该是“ findByEid ...”
*   您没有指定订单方向**<-** *这可能是主要问题*；

存储库：

```
public interface EmployeeRepository extends
    PagingAndSortingRepository<Employee, Integer> {

    public List<Employee> findByEidAndHireDateBetweenOrderByProjectIdDesc(
        String eid, Date first, Date last);
} 
```

员工实体：

```
@Entity
@Table(name = "employee")
public class Employee implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @SequenceGenerator(name = "employee_sequence", sequenceName = "employee_sequence",     allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "employee_sequence")
    @Column(name = "id", unique = true, nullable = false)
    private Integer id;

    @Column(name = "eid", nullable = false)
    private String eid;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "hire_date", nullable = false)
    private Date hireDate;

    @Column(name = "projectId", nullable = false)
    private Integer projectId;

    public Employee() {
    }

    // ...
    // Setters / Getters
    // ...

    // ...
    // eclipse generated hashCode / equals / toString
    // ...
} 
```

此代码适用于我的机器：

*   数据库：PostgreSQL
*   ORM 实现：休眠 4.1.9
*   春天：3.2.0.RELEASE
*   弹簧数据：1.2.0.RELEASE

如果您想创建一个支持动态排序的查询方法 - [Spring Data JPA - 1.3.2.3。特殊参数处理](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.special-parameters)

# ruby-on-rails-3 - 在 Amazon EC2 上安装 nginx

> ID：13918865
> 
> 赞同：0
> 
> 时间：2012-12-17T17:19:47.387
> 
> 标签：ruby-on-rails-3, nginx, amazon-ec2

我需要在 Amazon EC2 上安装 Nginx。但是，rails 服务器已经在端口 80 上运行。

我需要：

*   查看正在运行的服务器
*   弄清楚如何阻止它
*   弄清楚如何在端口 80 而不是该服务器上启动 nginx。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:26:46.653

**选项1**

*在不同的端口上运行 Rails*

如果你想在同一台服务器上运行 Rails 和 NGinX，你可以先配置 rails 在不同的端口上运行，然后设置 NGinX：

[如何在开发中更改 Rails 3 服务器默认端口？](https://stackoverflow.com/questions/3842818/how-to-change-rails-3-server-default-port-in-develoment)

您可以让 NGinX 将 HTTP 请求转发到您为 Rails 选择的新端口

**选项 2**

*使用单独的实例*

您也可以为 NGinX 使用单独的实例。根据您的流量，一个微型实例可能就足够了。

通常我会建议在不同的实例上运行负载均衡器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T20:17:52.730

我做了 ps -ef 并找到了 nginx 进程。之后我做了 sudo kill ，并再次启动了 nginx

# android - 如何在android中使用jaxb？

> ID：13918866
> 
> 赞同：2
> 
> 时间：2012-12-17T17:19:46.493
> 
> 标签：android, jaxb

是否有任何包含 jaxb 的示例项目。我以正常的 java 方式尝试了它，但我收到了 dalvik vm 的编译错误。

```
Conversion to Dalvik format failed with error 1 
```

有人知道如何解决这个问题。我知道对于 android 有 simpleXml 之类的替代方案，但它的更多工作是使用它们的注释来适应我现有的带注释的类。一个例子或一个好的教程会很有用。我没有找到任何好的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:01:54.033

这听起来像是一个解决方案，请参阅： http: [//www.docx4java.org/blog/2012/05/jaxb-can-be-made-to-run-on-android/](http://www.docx4java.org/blog/2012/05/jaxb-can-be-made-to-run-on-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T14:16:56.010

在此处查看我对在 Android 中使用现有带注释的 JAXB 类的回答： [https ://stackoverflow.com/a/13077912/937715](https://stackoverflow.com/a/13077912/937715)

# flash - Actionscript 3 键盘不在焦点上？

> ID：13918868
> 
> 赞同：0
> 
> 时间：2012-12-17T17:20:02.673
> 
> 标签：flash, actionscript, adobe

我似乎无法使用键盘移动我的 Main_C。我在游戏开始时确实有一个菜单。我怎样才能让我的键盘工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:19:00.647

如果您在 Flex 应用程序中，请使用 FocusManager。假设“myMenuItem”是应该有焦点的对象：

```
focusManager.setFocus(myMenuObject); 
```

如果您在 AS3 项目中：

```
stage.focus = myMenuObject; 
```

此外，如果您想在菜单项中移动，您可以捕捉键盘输入以模拟通过菜单的移动：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDownHandler);

private function keyDownHandler(event:KeyboardEvent):void {
    trace(event.keyCode);
    // Handle movement for corresponding arrow code
} 
```

# html - Html 和 iFrame

> ID：13918872
> 
> 赞同：0
> 
> 时间：2012-12-17T17:20:08.240
> 
> 标签：html, css, iframe, frames

好的，问题是当您单击左侧 iframe 中的链接时，我希望它在右侧 iframe 中打开。当您第一次单击左侧边栏中的链接时，这一切都很好。但是，当您第二次单击该链接（在左侧边栏中）时，它将在新的浏览器选项卡中打开。我怎样才能让它在正确的框架中不断打开？

在此先感谢，和平

**index.html** [http://pastebin.com/u6DqDA1q](http://pastebin.com/u6DqDA1q)

**left_frame.html** [http://pastebin.com/UuZYtdYs](http://pastebin.com/UuZYtdYs)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:49:56.953

是的，它应该可以正常工作，iframe 1 中的链接需要目标等于目标 iframe 的名称。

例如：

框架 1

```
<iframe src=""></iframe> 
```

目标 iframe

```
<iframe name="iframe2"></iframe> 
```

iframe 1 的内容

```
<a href="" target="iframe2">Link opens in iframe 2</a> 
```

还要检查我找到的这个链接

[http://www.trans4mind.com/personal_development/HTMLGuide/iframes3.htm](http://www.trans4mind.com/personal_development/HTMLGuide/iframes3.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:56:27.757

您是否考虑过使用 AJAX 为另一方填充 div？这也有助于平台兼容性

```
<div id="left-side"></div>
<div id="right-side"></div> 
```

左.html

```
<a onclick="OpenToRightSide('some-url')">some url text</a> 
```

并在主 html 父文件中

```
function OpenToRightSide(url)
{
    var xmlhttp;
    if (window.XMLHttpRequest)xmlhttp=new XMLHttpRequest();
    else xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    xmlhttp.open("GET",url,true);
    xmlhttp.send(); 
    xmlhttp.onreadystatechange=function()
    {
        document.getElementById("right-side").innerHTML=xmlhttp.responseText;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:28:29.117

我得出相同的结论，即第二次单击该链接时它不起作用。我不确定问题是什么，但这里是 2 个文件的代码，基于 user1721135 的建议。[http://pastebin.com/B2F2XseH](http://pastebin.com/B2F2XseH)和[http://pastebin.com/6nZBXEU1](http://pastebin.com/6nZBXEU1)

# java - 在 Java 中打开目录

> ID：13918876
> 
> 赞同：4
> 
> 时间：2012-12-17T17:20:12.627
> 
> 标签：java

我希望能够使用 Java 代码打开目录，目录意味着一个“文件夹”，其中包含一个文件夹，而该文件夹又包含文件。这是我现在拥有的代码的一部分：

```
public void listFiles(String folder) {
    File directory = new File(folder);
    File[] contents = directory.listFiles();
    System.out.println(contents); 
```

出于某种原因，如果我将文件夹指向目录级别，它会返回这一行：

```
 [Ljava.io.File;@67d07b41 
```

但是，如果我将它指向下一层（在文件夹级别，它直接包含文件），那么它将列出文件夹中的文件名就好了。有人可以告诉我为什么这对我不起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:05:45.703

将您的代码更改为：

```
public void listFiles(String folder){
File directory = new File(folder);
File[] contents = directory.listFiles();
for ( File f : contents) {
  System.out.println(f.getAbsolutePath());
} 
```

您将看到打印的所有完整路径。

你得到了那个奇怪的输出，因为你正在打印一个数组对象，这就是数组对象作为`toString()`. 如果要打印数组的**内容**，则必须如上所述手动进行。

# jquery - jQuery计算表的td中存在的值的平均值

> ID：13918881
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:20:32.917
> 
> 标签：jquery, html, jsp

我正在使用 googlecharts 插件来生成柱形图。

我还想获得 td 中存在的值的平均值。是否可以通过谷歌图表插件或者任何人都可以帮助我编写 ajquery 来计算平均值。计算平均值后，我需要将其添加到“avg”类的段落标签中。谢谢您的帮助。

我的代码是：

```
<table id="weather">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Mar</th>
                            <th>Apr</th>
                            <th>May</th>
                            <th>Jun</th>
                            <th>Jul</th>
                            <th>Aug</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th>Weather</th>
                            <td>20</td>
                            <td>22</td>
                            <td>18</td>
                            <td>24</td>
                            <td>20</td>
                            <td>22</td>
                        </tr>
                    </tbody>
                </table> 
```

和javascript代码：

```
<script type="text/javascript">
        gvChartInit();
        $(document).ready(function(){
            $('#weather').gvChart({
        chartType: 'ColumnChart',
        gvSettings: {
            width: 100,
            height: 40,
            colors:['gray'],
            hAxis: {textPosition: 'none'},
            vAxis: {minValue: 0, textPosition: 'none', gridlines: {color: '#ffffff'}},
            legend: {position: 'none'}
        }
    });
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:29:01.563

尝试这样的事情：

```
avg = 0, amount = 0;
$('td').each(function(){
    avg += +($(this).text());
    amount++;
});
avg /= amount;
$('.avg').text(avg); 
```

但是您可能想确保它是正确的`td`，因此您可以将`tr`id 设置为“天气”之类的东西，然后更改`$('td').each()`为`$('#weather td').each()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:31:19.767

您可以使用

```
var avg=0;

$('#weather td').each({function(){
            avg=avg+parseInt($(this).text());
         });

avg=avg/$('#weather td').length; 
```

或者

```
var avg=0;
var count=0;
   $('#weather td').each({function(){
                avg=avg+parseInt($(this).text());
                count=count+1;
             });

    avg=avg/count; 
```

在你可以在 p 标签上添加 avg 之后

```
$('p.avg').html(avg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:33:10.247

这应该为您返回平均值：

```
var totalVal = 0,
    iCount = $('#weather').find('td').length;
$('#weather').find('td').each(function(i,val){
    totalVal = totalVal + parseInt($(val).text());
});
alert('Avg = '+totalVal/iCount); 
```

​</p>

# ruby-on-rails - Rails：向模型（或控制器）实例添加变量

> ID：13918885
> 
> 赞同：0
> 
> 时间：2012-12-17T17:20:45.723
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在尝试在 Rails 中向我的数据库查询中添加一个新变量（方法）。我不想向数据库添加新字段，我想获取现有列并使用它来创建新方法。但是，它不会抛出错误或任何东西，它只是不可用。有任何想法吗？

```
class Task < ActiveRecord::Base

  attr_accessible :old_field, :new_field

  def after_initialize
    self.new_field = :old_field * 2
  end  
end 
```

部分地，我不确定这个逻辑是进入模型还是控制器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:31:06.947

```
class Task < ActiveRecord::Base

  attr_accessible :old_field

  def new_field()
    self.old_field * 2
  end  
end 
```

或者你可以这样做，这需要你使用像下面的 Anatoliy 那样的迁移将字段添加到你的数据表中

```
class Task < ActiveRecord::Base

  attr_accessible :old_field, :new_field
  before_save :calc_new_field

  private
    def calc_new_field
      self.new_field = self.old_old_field * 2
    end  
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:25:06.760

要添加虚拟属性，您应该使用`attr_accessor`not`attr_accesible`

在终端中尝试添加新属性：

```
rails g migration AddNewFieldToTasks new_field:integer
rails db:migrate 
```

# php - 如何在 CakePHP 中执行连接？

> ID：13918888
> 
> 赞同：0
> 
> 时间：2012-12-17T17:20:52.730
> 
> 标签：php, cakephp, join

您如何在 CakePHP 中执行连接，例如下面的 MySQL 连接？

```
SELECT *
FROM yarns y
JOIN yarn_brands yb
JOIN contents ct
WHERE y.id = ct.yarn_id
AND yb.id = y.yarn_brand_id
AND ct.material_id = 2 
```

我试图四处寻找答案，但找不到任何有效的方法。我发现了一些关于“包含”的东西，我已经尝试过了，但我得到的结果是它产生的查询不包括请求加入的表的连接。

```
$this->Message->find('all', array(
    'contain' => array('User')
    'conditions' => array(
        'Message.to' => 4
    ),
    'order' => 'Message.datetime DESC'
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:45:51.910

CakePHP 使这一切变得非常简单，前提是您已经阅读了有关模型关系的书并相应地设置了模型和数据库表。这是 CakePHP 的一个非常重要的部分，它将构成您的应用程序的大部分内容。如果您了解如何以“蛋糕”的方式做到这一点，它将让您的生活更轻松。

[http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)

[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

对于您的 MySQL 示例，请尝试此代码。显然我不确切知道你的模型关系是什么，但这里是基于 MySQL 的猜测。

```
// app/Model/Yarn.php
class Yarn extends AppModel {

    public $belongsTo = array('YarnBrand');

    // You might need this as $hasOne instead, I can't tell from the MySQL alone.
    public $hasMany = array('Content');

}

// app/Model/YarnBrand.php
class YarnBrand extends AppModel {

    public $hasMany = array('Yarn');

}

// app/Model/Content.php
class Content extends AppModel {

    public $belongsTo = array('Yarn');

} 
```

**查找所有纱线及其纱线品牌和内容的代码**

```
$this->Yarns->find('all', array(
    'conditions' => array(
        Content.material_id' => 2
    ),
    'contain' => array(
        'YarnBrand',
        'Content'
    )
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:48:25.713

这是我最终得到的加入：

```
 $options['contain'] = '';
            $options['joins'][0]['table'] = 'contents';
            $options['joins'][0]['alias'] = 'cont';
            $options['joins'][0]['conditions'] = 'Yarn.id = cont.yarn_id';
            $options['joins'][1]['table'] = 'yarn_brands';
            $options['joins'][1]['alias'] = 'yb';
            $options['joins'][1]['conditions'] = 'yb.id = Yarn.yarn_brand_id';
            $options['fields'] = array('Yarn.name');
            $options['conditions']['cont.material_id'] = $this->request->data['Yarn']['material_id'];
            $options['conditions']['Yarn.yarn_brand_id'] = $this->request->data['Yarn']['yarn_brand_id']; 
```

# matlab - 计算球形贴片的表面积

> ID：13918890
> 
> 赞同：2
> 
> 时间：2012-12-17T17:21:02.690
> 
> 标签：matlab, math

通过使用`surf2patch(sphere(),'triangle')`，将 sphere 的球坐标转换为三角形块。

有什么方法可以计算每个贴片的表面积吗？

我可以遍历每个补丁，并获得构成补丁的每个顶点的笛卡尔坐标，但不确定数学部分。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:58:44.480

这意味着您的三角形（多边形）已经在笛卡尔坐标中。我建议您使用基本的多边形命令，即 A = polyarea(X,Y)。通过这种方式，您可以遍历所有三角形并计算其面积。

查看[此 mathworks.com 页面](http://www.mathworks.de/de/help/matlab/ref/polyarea.html)以获得更多帮助。

# java - JAXB - 如果设置了另一个可选属性，是否可以要求可选属性？

> ID：13918891
> 
> 赞同：3
> 
> 时间：2012-12-17T17:21:09.053
> 
> 标签：java, xml, jaxb

如果设置了可选属性，那么我希望突然需要另一个属性。此外，这意味着只有在设置了前一个属性的情况下才能设置梯形图可选属性。

IE，

名称是必需的

status 是可选的，但如果设置，则还需要指定国家/地区。

只有在给出状态时才设置国家。

```
<field name="myField" status="citizen" country="England"/> 
```

一个有效的 xml 标记也可以是 status 和 country 为 null 的地方（因此没有解组）：

```
<field name="myField" /> 
```

如果我将可选字段放在他们自己的 xml 标签中可能会更容易？也许是这样的：

```
<field name="myField">
     <option status="citizen" country="England"/>
</field> 
```

虽然第一种方法可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:55:24.890

您可以使用`beforeMarshal`事件并执行以下操作：

**场地**

如果您不喜欢`beforeMarshal`在域类上使用该方法，则可以实现 a`Marshaller.Listener`并设置在`Marshaller`（请参阅： [http ://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller .Listener.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Marshaller.Listener.html)）。

```
package forum13918891;

import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Field {

    @XmlAttribute
    String name;

    @XmlAttribute
    String status;

    @XmlAttribute
    String country;

    private void beforeMarshal(Marshaller marshaller) {
        if(country != null && status == null) {
            throw new RuntimeException("country was set but status was not");
        }
    }

} 
```

**演示**

下面是一些演示代码来证明一切正常。

```
package forum13918891;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Field.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        Field field = new Field();
        field.name = "myField";
        marshaller.marshal(field, System.out);

        field.status = "citizen";
        field.country = "England";
        marshaller.marshal(field, System.out);

        field.status = null;
        marshaller.marshal(field, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<field name="myField"/>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<field name="myField" status="citizen" country="England"/>
Exception in thread "main" java.lang.IllegalStateException: java.lang.reflect.InvocationTargetException
    at com.sun.xml.bind.v2.runtime.XMLSerializer.fireMarshalEvent(XMLSerializer.java:758)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.fireBeforeMarshalEvents(XMLSerializer.java:743)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:491)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:315)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:244)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:75)
    at forum13918891.Demo.main(Demo.java:21)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.fireMarshalEvent(XMLSerializer.java:755)
    ... 6 more
Caused by: java.lang.RuntimeException: country was set but status was not
    at forum13918891.Field.beforeMarshal(Field.java:21)
    ... 11 more 
```

# android - Android Vertex Shader 说配置文件不支持 texture2d

> ID：13918892
> 
> 赞同：0
> 
> 时间：2012-12-17T17:21:15.010
> 
> 标签：android, opengl-es

所以，这对你们来说应该是一个简单的问题。我正在写一个希望简单的高度图（+1，-1）有点东西。但是，当我尝试调用时`vec4 textColor2 = texture2D(heightmap, a_TexCoordinate);`，我的顶点着色器出现编译错误。

开发设备是 Nexus 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:50:12.023

并非所有 OpenGL ES 2.0 实现都支持顶点纹理获取。该规范将顶点纹理单元的最小数量定义为 0。您可以执行 GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS 的 glGet 来查看可以在顶点着色器中使用多少纹理。

# netbeans - 为 apache commons-net 选择 maven 依赖项

> ID：13918901
> 
> 赞同：3
> 
> 时间：2012-12-17T17:21:42.217
> 
> 标签：netbeans, maven-2, apache-commons-net

在 Netbeans (7.2) maven 项目中，我需要[apache common-net中包含的 FTPClient 类](http://commons.apache.org/net/)

我搜索了所需的库，在查询字段中键入“commons-net”。
在下面的屏幕截图中，您可以看到我得到了什么。

“20030805.205232”之类的项目与“3.2”之类的项目有什么**区别**？

如果我点击“3.2 [jar, ftp]”，一个“ftp”文本出现在**“Classifier”字段**中，它代表什么？

有没有办法访问每个项目的“发行说明”，以帮助我选择正确的依赖项？

![在此处输入图像描述](../Images/22457d7057f3ef35386ab3245a9e3ae2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:09:54.247

版本项“20030805.205232”表示该工件已于 2003 年 8 月 5 日晚上 8:52 构建。此版本是在 1.0.0 之前构建的。

在这种情况下，分类器意味着它是主项目 [jar] 的一部分。如果您将添加这些依赖项，您可以看到它们包含不同的包集。但是 [jar] 和 [jar, ftp] 是由一个 pom.xml 文件（[http://repo1.maven.org/maven2/commons-net/commons-net/3.2/](http://repo1.maven.org/maven2/commons-net/commons-net/3.2/)）构建的。无法在对话框中向项目添加发行说明，但您可以为所有一般用例选择带有 [jar] 分类器的项目。

# c# - C# Winforms 应用程序 - 不是有效的 win32 应用程序

> ID：13918904
> 
> 赞同：0
> 
> 时间：2012-12-17T17:21:49.470
> 
> 标签：c#, winforms

我收到此错误 - 不是有效的 Win32 应用程序。该程序在 Vista PC 上运行良好。它是使用 ClickOnce 引导程序部署的。]

我读

[http://blogs.msdn.com/b/vsnetsetup/archive/2012/10/16/setup-exe-is-not-a-valid-win32-application.aspx](http://blogs.msdn.com/b/vsnetsetup/archive/2012/10/16/setup-exe-is-not-a-valid-win32-application.aspx)

这里说 VS2012 ClickOnce 不支持 XP，但是本文的重点是 C++，而不是 C#。对于 C#，我看不到任何类似的东西。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:25:25.223

正如您的消息来源所说：

> Visual Studio 2012 附带的 Clickonce 引导程序引擎 (setup.exe) 与 Windows Vista 以下的任何操作系统都不兼容。因此，上述错误消息是预期的并且是设计使然。出现这种行为的原因是因为引导程序是使用 VC 编译器编译的，而 Dev11 VC 编译器不支持 Windows XP。

这适用于使用 VS2012 编译的任何应用程序，无论使用何种语言，因为失败的是引导程序（安装程序），而不是应用程序。

因此，您的**应用程序**可以在 XP 机器上运行，但不能在 Clickonce 安装程序上运行。

# php - 如何在 Joomla 2.5 中的模块渲染之前加载自定义类？

> ID：13918906
> 
> 赞同：1
> 
> 时间：2012-12-17T17:21:58.003
> 
> 标签：php, module, rendering, joomla2.5, exists

我正在制作自定义库以扩展 Joomla 框架核心的功能，并且我将所有类放在自定义库文件夹中，如下所示：

```
- libraries
   - joomla
   - my_custom_library 
```

我希望在执行任何模块渲染之前我的所有类都存在，以便我可以将它们用于我的自定义模块代码。现在，我能想到的唯一加载我的类的地方是在我的模板文件中：

```
<?php
// index.php in template folder
require_once(JPATH_LIBRARIES . DS . 'my_custom_library' . DS . 'Page.php';
require_once(JPATH_LIBRARIES . DS . 'my_custom_library' . DS . 'User.php';
// and so on...
// and then the HTML document follows with <jdoc:include type="modules" /> syntax 
```

`jdoc:include`不幸的是，在为我的自定义库执行这些调用之前，Joomla 似乎解析了我的模板文档，读取了我的所有s，并存储了我所有模块的输出`require_once`，因为当我创建一个新模块并检查我的类是否存在时，它总是返回假。

```
<?php
// mod_something_custom.php in something_custom module folder
echo (bool) class_exists('MyCustomPageClass');  // false 
```

如何在渲染任何内容（特别是我的模块）之前加载所有自定义类？如果可能的话，我不想改变核心。

**更新**：我刚刚发现通过`<jdoc:include type="modules />`确实包含的模块确实看到我的类存在。但是，情况并非如此`<jdoc:include type="component" />`。在这种情况下，我有 com_content 文章使用`{loadposition}`声明来加载模块并呈现它。当我这样做时，我的课程就不复存在了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:10:21.790

您可以通过使用系统插件来添加此功能以包含文件。这样的事情应该这样做：

```
<?php

// no direct access
defined('_JEXEC') or die;

class plgSystemIncludeFiles extends JPlugin {

    public function __construct(&$subject, $config = array()) {
        parent::__construct($subject, $config);
    }

    public function onAfterRoute() {
        require_once(JPATH_LIBRARIES . DS . 'my_custom_library' . DS . 'Page.php';
        require_once(JPATH_LIBRARIES . DS . 'my_custom_library' . DS . 'User.php';
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T19:34:33.640

标准化的方法，以及比之前提出的更简单的解决方案，是在 Joomla 2.5、3.x 中加载新库，使用以下任一方法：

> **注册类前缀**：从 12.1 开始，可以根据类前缀注册自动加载器的外观（以前只支持“J”前缀，绑定到 /libraries/joomla 文件夹）...

```
 // Tell the auto-loader to look for classes starting with "Foo" in a specific folder.
 JLoader::registerPrefix('Foo', '/path/to/custom/packages'); 
```

> **发现类**：文件夹中遵循命名约定的类，但不是自动加载器立即识别的类，可以使用 JLoader 的发现方法共同注册。discover 方法查看文件夹中的文件名并根据这些名称注册类。附加参数可用于更新类寄存器并递归到子文件夹。

```
 // Register all files in the /the/path/ folder as classes with a name like:
 // Prefix<Filename>
 JLoader::discover('Prefix', '/the/path/'); 
```

来自：http : [//developer.joomla.org/manual/ch01s04.html](http://developer.joomla.org/manual/ch01s04.html)

# macos - 如何从顶部制作它？（可可片）

> ID：13918907
> 
> 赞同：0
> 
> 时间：2012-12-17T17:22:01.370
> 
> 标签：macos, cocoa, nspanel

我已经使用以下方法实现了我的工作表（NSPanel）：

```
- (void)showInWindow:(NSWindow *)mainWindow {
if (!finestra1)
    [NSBundle loadNibNamed:@"XibName" owner:self];

[NSApp beginSheet:finestra1 modalForWindow:mainWindow modalDelegate:nil didEndSelector:nil contextInfo:nil];
[NSApp runModalForWindow:finestra1];   //This call blocks the execution until [NSApp stopModal] is called 
```

}

工作表出现在我的屏幕中间，如何将其附加到主窗口的顶部并使其显示为“向下滑动”效果？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:17:05.763

您是否尝试过简单地删除`-runModalForWindow:`线？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:21:01.080

[我被教导的方式](http://books.google.com/books?id=_Kdf-wDBQ48C&lpg=PA335&ots=mE8kVRiQ9P&dq=%22endSheet%3AspeedSheet%22&pg=PA329#v=onepage&q&f=false)，你呈现的工作表应该是一个 NSWindow，而不是一个 NSPanel。

如果您希望我上传一个简单的演示项目，请告诉我。

# java - SOAPFaultException.getFault().getDetail() 为空

> ID：13918911
> 
> 赞同：5
> 
> 时间：2012-12-17T17:22:21.257
> 
> 标签：java, soap, jax-ws, soapfault

我正在使用 JAX WS 2.0 调用 SOAP Web 服务。如果出现错误，我会收到以下响应：

```
<?xml version="1.0"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-   envelope">
    <soap:Header/>
    <soap:Body>
        <soap:Fault  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap- envelope" xmlns:xml="http://www.w3.org/XML/1998/namespace">
            <soap:Code>  
                <soap:Value>soap:Receiver</soap:Value>
            </soap:Code>
            <soap:Reason>
                <soap:Text  xml:lang="en">Exception of type 'blah blah' was thrown.
                </soap:Text>
            </soap:Reason>
            <soap:Node>{SOME URL}</soap:Node>
            <detail>
                <error>345</error>
                <message>Cannot find user. Blah  blah</message>
            </detail>
        </soap:Fault>
    </soap:Body>
</soap:Envelope> 
```

如您所见，有用的错误在详细节点中：

```
<soap:Envelope>  
    <soap:Body>  
        <soap:Fault>  
            <detail> 
```

在我的客户端中，我得到一个具有 SOAPFault 对象的 SOAPFaultException。SOAPFault 对象似乎缺少我在上面发布的节点。SOAPFaultException.getFault().getDetail() 为空。但是，它具有包括soap:Reason 在内的所有其他节点。知道为什么它缺少详细节点吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T05:25:07.077

事实证明，detail 节点也需要包含 SOAP 名称空间。所以它需要是：

```
<soap:detail> 
```

由于我无法控制 Web 服务，因此我设法在注入客户端的自定义 SOAPHandler 的 handleFault 方法中进行了此更改。更改后，故障的详细信息不再为空，并且具有所有子节点。

基于[http://www.w3.org/TR/soap12-part1/#soapfault](http://www.w3.org/TR/soap12-part1/#soapfault)，我相信开发人员需要在故障期间更正响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T14:43:37.517

这对我有用：

```
} catch (SoapFaultClientException e) {
    log.error(e);
    SoapFaultDetail soapFaultDetail = e.getSoapFault().getFaultDetail();
    SoapFaultDetailElement detailElementChild = (SoapFaultDetailElement) soapFaultDetail.getDetailEntries().next();
    Source detailSource = detailElementChild.getSource();

    try {
        Object detail = (JAXBElement<SearchResponse>) getWebServiceTemplate().getUnmarshaller().unmarshal(detailSource);
  // throw new SoapFaultWithDetailException(detail);

    } catch (IOException e1) {
        throw new IllegalArgumentException("cannot unmarshal SOAP fault detail object: " + soapFaultDetail.getSource());
    }

} 
```

# windows-services - 如何强制停止而不重新启动服务

> ID：13918912
> 
> 赞同：1
> 
> 时间：2012-12-17T17:22:21.427
> 
> 标签：windows-services

对于用 c# 编写的服务。

我们将其设置为自动重启，因此如果它崩溃，它将自行重启。

这很好，但我们还想要一种强制停止服务的方法（服务可能会死锁）。这将在进行数据库备份之前每周发生一次。

如果我们使用“net stop”，服务可能不会关闭。

如果我们执行 taskkill，这将终止服务，但它会在一分钟内重新启动。

关于如何让这两个用例工作的任何想法？

我们希望在服务崩溃时自动重新启动，并且我们希望能够运行一个无人参与的进程来停止服务（无论如何），备份数据库，然后重新启动服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:35:43.573

[http://www.codeproject.com/Articles/31688/Using-the-ServiceController-in-C-to-stop-and-start](http://www.codeproject.com/Articles/31688/Using-the-ServiceController-in-C-to-stop-and-start)

您需要添加一个库，然后它只是： service.Stop() 和 service.Start()

# android - 使用 NAVIGATION_MODE_LIST 时如何更改微调器的颜色？

> ID：13918915
> 
> 赞同：0
> 
> 时间：2012-12-17T17:22:48.917
> 
> 标签：android, android-actionbar, actionbarsherlock, android-spinner

我似乎无法弄清楚如何使微调器变白：

![在此处输入图像描述](../Images/5e2a7e9d9f84f94348cdd0873e246729.png)

我需要申请什么风格才能让它变成白色？我正在使用 ActionBarSherlock。

相关代码：

```
 public void onCreate(Bundle savedInstanceState) 
 {
    ....
    // Just a class to hold description/value pairs
    DescriptionValuePair[] pastdays = new DescriptionValuePair[] {   
            new DescriptionValuePair("Past 30 days", "30"), 
            new DescriptionValuePair("Past 60 days", "60"), 
            new DescriptionValuePair("Past 90 days", "90"), 
            };
    ArrayAdapter adapter_pastdays = null;

    ActionBar bar=getSupportActionBar();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        adapter_pastdays = new ArrayAdapter(bar.getThemedContext(), R.layout.sherlock_spinner_item, pastdays );
    }
    else {
        adapter_pastdays = new ArrayAdapter(this, R.layout.sherlock_spinner_item, pastdays );
    }

    adapter_pastdays.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    bar.setListNavigationCallbacks(adapter_pastdays, this);
 } 
```

# c++ - 将数据添加到 boost property_tree

> ID：13918927
> 
> 赞同：0
> 
> 时间：2012-12-17T17:23:22.413
> 
> 标签：c++, xml, boost-variant, boost-propertytree

我有一个存储在 XML 中的简单树结构，`boost::property_tree::ptree`用于读取和提取信息。然后我使用重新创建树，`std::maps`以便我可以将数据存储在叶子中。这很好用，我喜欢固定树结构与数据的分离，但我觉得我重复了很多代码，如果我可以为 ptree 中的每个叶节点添加一个类，我可以大大简化我的代码。

作为我`boost::variant`在课堂上使用的一个可能的轻微并发症，我希望将其存储在叶子中。

我的主要问题是我是否应该尝试将动态数据添加到 ptree，其次，如果是这样，您对添加它的最佳方式有什么建议吗？

# c++ - C/C++ 中的等式

> ID：13918930
> 
> 赞同：2
> 
> 时间：2012-12-17T17:23:34.410
> 
> 标签：c++, c, equality

在 C++ 中，确定某个值 x 是否介于两个限制之间的常用方法是：

```
 //This is (A)
double x = 0.0d;
double lower = -1.0d;
double upper = +1.0d;

if(x > lower && x < upper){
  // Do some stuff
} 
```

但是今天我偶然发现我可以这样做：

```
 // This is (B)
double x = 0.0d;
double lower = -1.0d;
double upper = +1.0d;

if(lower < x < upper){
  // Do some stuff
} 
```

它似乎工作正常，但我以前从未听说过使用“lower < x < upper”完成此操作。这会产生您期望的可执行代码吗？IE，（A）是否等同于（B）？

我想很多人不会知道这一点，我怀疑这可能是因为编译器对 (A) 的解释与 (B) 不同。这对吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T17:25:07.070

不，A 和 B*不*等价，你不能这样做。

或者，显然你*可以*（正如你所发现的那样），但你没有做你认为你正在做的事情。

您正在评估`(lower < x) < upper`，即`lower < x`（它是`false`或`true`，但转换为`int`用于比较）的值与`upper`.

有关详细信息，请参阅[此运算符优先级表。](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:25:45.697

它们绝对不是等价的。您的表达式`lower < x < upper`将首先评估`lower < x`为真或假，然后分别执行`true < x`或`false < x`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:27:20.587

它不能正常工作。事实上，它是完全错误的，只是偶然的。

`lower < x < upper`被解析为`(lower < x) < upper`; `(lower < x)`具有类型`bool`，其值为`true`或`false`，具体取决于 的值`x`。为了将该`bool`值`upper`与编译器进行比较，编译器会将 bool 转换为具有`1.0`for`true`和`0.0`for值的浮点数`false`。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-17T17:27:10.287

嗯，是。无论哪种情况`x`都是介于值域之间。例如：较低 = 4；上 = 9; x = 7;

If you do:`7 > 4 && 7 < 9`与说 相同`4 < 7 < 9`。顺便说一下，这是基本的算术。

# java - Java - 文件操作

> ID：13918933
> 
> 赞同：1
> 
> 时间：2012-12-17T17:23:37.530
> 
> 标签：java, logic

我在输入文件 a.txt 中有一些内容为

```
Line 1 : "abcdefghijk001mnopqr hellohello"
Line 2 : "qwertyuiop002asdfgh welcometologic"
Line 3 : "iamworkingherefromnowhere002yes somethingsomething"
Line 4 : "thiswillbesolved001here ithink" 
```

我必须阅读 a.txt 文件并将其写入两个单独的文件。即，具有 001 的行应写入 output1.txt，具有 002 的行应写入 output2.txt

有人可以用Java编程中的逻辑来帮助我吗？

谢谢，纳伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:35:39.307

```
BufferedReader br = new BufferedReader( new FileReader( "a.txt" ));
String line;
while(( line = br.readLine()) != null ) {
    if( line.contains( "001" )) sendToFile001( line );
    if( line.contains( "002" )) sendToFile002( line );
}
br.close(); 
```

方法 sendToFile001() 和 sendToFile002() 将参数行写入如下：

```
ps001.println( line ); 
```

使用 PrintStream 类型的 ps001 和 ps002，之前打开（在构造函数中？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:31:47.970

[这是使用 Java 读取和写入文本文件](http://www.javapractices.com/topic/TopicAction.do?Id=42)并检查条件的一个很好的示例，请执行以下操作

```
while ((line = reader.readLine()) != null) {
    //process each line in some way
    if(line.contains("001") {
     fileWriter1.write(line);  
    } else if (line.contains("002") ) {
     fileWriter2.write(line);    
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:53:42.280

代码完成。

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package jfile;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.net.URL;

/**
 *
 * @author andy
 */
public class JFile {

    /**
     * @param args the command line arguments
     */

    static File master = null,
                m1     = null, // file output with "001"
                m2     = null; // file output with "002"

    static FileWriter fw1,
                      fw2;

    static FileReader fr = null;
    static BufferedReader br = null;

    public static void main(String[] args) throws FileNotFoundException, IOException
    {

         String root = System.getProperty("user.dir") + "/src/files/";

         master = new File ( root + "master.txt" );
         m1     = new File ( root + "m1.txt");
         m2     = new File ( root + "m2.txt");

         fw1     = new FileWriter(m1, true);
         fw2     = new FileWriter(m2, true);

         fr = new FileReader (master);
         br = new BufferedReader(fr);

         String line;
         while((line = br.readLine())!=null)
         {
             if(line.contains("001")) 
             {               
                 fw1.write(line + "\n");

             } else if (line.contains("002"))
             {
                 fw2.write(line + "\n");

             }
         }

         fw1.close();
         fw2.close();
         br.close();
    }

} 
```

*Netbeans 项目*：[http ://www.mediafire.com/?yjdtxj2gh785cyd](http://www.mediafire.com/?yjdtxj2gh785cyd)

# java - OnClickListener 中的 Java 语法混淆

> ID：13918942
> 
> 赞同：1
> 
> 时间：2012-12-17T17:24:11.173
> 
> 标签：java, android, onclicklistener

我是 Android 开发的新手，我如何理解这些代码片段？

```
private OnClickListener listener = new OnClickListener() 
{   
    @Override
    public void onClick(View v)
    {
        // TODO Auto-generated method stub
        System.exit(0);
        finish();
    }
}; 
```

OnClickListener 是一个静态接口，我们不能使用“new”来初始化一个对象。谁能帮帮我，先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:33:41.200

在 Java 中，如果您实现了所呈现接口的所有必要要求，则可以创建一个[匿名类。](http://www.cs.rit.edu/~tmh/courses/allJava/Anonymous.html)这充当了实现 OnClickListener 的新类定义，并覆盖了它的一个必要方法 onClick(View)。

# php - 如何检查远程站点上的用户是否可以看到链接？

> ID：13918945
> 
> 赞同：0
> 
> 时间：2012-12-17T17:24:29.050
> 
> 标签：php, html, curl, hyperlink

我正在尝试检查远程 url 上的链接是否可用。我的工具通过 curl 检查远程网站上的链接及其锚文本的存在。
但是有些链接被放置在隐藏块中或可见区域之外，或者与背景颜色相同，因此用户看不到它们。有没有办法检查用户的这种可见性？

# java - 获取 Android ProgressBar 中的 secondaryProgress 的宽度

> ID：13918947
> 
> 赞同：2
> 
> 时间：2012-12-17T17:24:45.313
> 
> 标签：java, android, android-progressbar

我有一个带有文本的进度条，其中我已经像这样覆盖了 onDraw：

```
@Override
protected synchronized void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Paint textPaint = new Paint();
    textPaint.setAntiAlias(true);
    textPaint.setColor(textColor);
    textPaint.setTextSize(textSize);
    Rect bounds = new Rect();
    textPaint.getTextBounds(text, 0, text.length(), bounds);

    float fx = getX();
    float fy = getY();

    int x = getWidth() / 2 - bounds.centerX();
    int y = getHeight() / 2 - bounds.centerY();
    canvas.drawText(text, x, y, textPaint);
} 
```

我正在尝试将文本定位在辅助进度中，但不确定如何获得辅助进度的当前宽度，基本上是当前进度的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:09:17.420

现在我只是使用了一个变通方法，基本上我得到了进度的百分比，然后将它乘以密度。我需要在进度条内对齐文本 20dp：

```
@Override
protected synchronized void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Paint textPaint = new Paint();
    textPaint.setAntiAlias(true);
    textPaint.setColor(textColor);
    textPaint.setTextSize(textSize);
    Rect bounds = new Rect();
    textPaint.getTextBounds(text, 0, text.length(), bounds);

    float density = getContext().getResources().getDisplayMetrics().density;
    float percentage = getProgress() / 100.0f;
    float x = getWidth() * percentage - (20 * density);
    float y = getHeight() / 2 - bounds.centerY();
    canvas.drawText(text, x, y, textPaint);
} 
```

# cmake - 自迁移到 cmake 编译链以来，gdb 在分析 coredump 时未找到任何符号

> ID：13918948
> 
> 赞同：0
> 
> 时间：2012-12-17T17:24:45.260
> 
> 标签：cmake, gdb, symbols, coredump

我有一个项目用代码块编译了一个可执行文件。我已修改编译链以使用 CMAKE。编译和执行效果很好。
问题是在崩溃后生成 coredump 时。我用 gdb 用命令分析它：`gdb myapp --core=core.1222`

如果我在生成可执行文件的计算机上运行 gdb，我会得到所有符号，我可以探索线程和局部变量。

问题是当我尝试在另一台计算机上运行 gdb 时，它无法获得任何符号。我收到以下警告： `BFD: Warning: /home/.../core.1222 is truncated: expected core file size >= 307032064, found: 307027968` gdb 显示中的“信息线程”？？而是函数名。

我的 CMakeLists.txt 包含：

```
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY  ../bin )
SET(CMAKE_USE_RELATIVE_PATHS ON)
SET(CMAKE_VERBOSE_MAKEFILE ON)
SET(CMAKE_CXX_COMPILER g++)
SET(CMAKE_BUILD_STRIP FALSE)

SET(CMAKE_CXX_FLAGS            "${CMAKE_CXX_FLAGS} -g") 
```

我已经比较了代码块和 cmake 使用的调用的 make 命令。除了选项 -o: 和 cmake 之外，还有很多相似之处

```
-o CMakeFiles/monappilcation.dir/home/.../main.cpp.o 
```

并使用代码块：

```
-o obj/Release/.../main.cpp.o 
```

该命令`nm -a`正确显示所有符号。

我的问题是：

*   gdb 如何计算预期大小？
*   如何使用 cmake 编译工具链检索符号？

欢迎您提出任何建议。

# java - 如何更改布尔值“true”，例如“left”

> ID：13918949
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:24:52.740
> 
> 标签：java, boolean

将标准布尔值“真”更改为例如“左”或“做得好”或...的正确代码是什么？因此，当表达式为真时，不要给出“真”，而是必须给出“左” . 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:28:35.403

值`boolean`只能设置为`true`或`false`。但是，您可以使用该布尔值来确定其他变量的值。

您可以使用对布尔表达式进行操作的[三元运算符](http://en.wikipedia.org/wiki/?%3a#Java "三元运算符") `(expr) ? (value if true) : (value if false)`：

```
boolean b = ...// true or false
String s = b ? "Well Done" : "Incorrect"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:28:34.963

您不能将文本值存储为布尔值。但是，如果 boolean 为真，您可以执行以下操作来返回所需的文本：

```
boolean b; // set it to true or false
String str = b ? "well done" : "not really"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:28:39.760

这是不可能的。

我相信你想要的是一种根据布尔值返回某些东西的方法。

假设您有一个方法：

```
public void tellUserResult(boolean result){
    if(result) {
        System.out.println("Nice play!");
    } else {
        System.out.println("Too bad!");
    }
} 
```

如果您不了解逻辑，请告诉我。

# azure - 为什么我不能在我的 ServiceDefinition 文件中输入 LoadBalancerProbe？

> ID：13918950
> 
> 赞同：0
> 
> 时间：2012-12-17T17:24:59.940
> 
> 标签：azure, load-balancing

我正在尝试为我的 Azure 服务设置 CustomLoadBalancerProbe。

根据此信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj151530.aspx#LoadBalancerProbes](http://msdn.microsoft.com/en-us/library/windowsazure/jj151530.aspx#LoadBalancerProbes)

应该可以将标签添加到服务定义文件中。但是当我尝试这个时，我只收到一条消息，说它是 servicedefinition 文件的无效元素。

然后我用谷歌搜索了一下，发现了这个： http: [//www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/](http://www.windowsazure.com/en-us/manage/windows/common-tasks/how-to-load-balance-virtual-machines/)

这里它告诉我虚拟机的负载平衡仅在 azure 的预览版中可用。

所以我现在有点困惑：

1) VM 的负载平衡与架构中描述的负载平衡探针的使用之间是否存在差异？（链接1）

2）如果没有：它只是不支持吗？

3）如果是：为什么我不能将探测输入到服务定义文件中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T18:43:02.343

LoadBalancerProbes 元素仅在 SDK 的 1.7 版（或更高版本）中受支持。现在，棘手的部分是您需要在定义 Web/Worker 角色之前添加它。所以像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="WindowsAzure6" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
  <LoadBalancerProbes>
    <LoadBalancerProbe name="MyProbe" protocol="http" intervalInSeconds="300" path="/something.aspx" port="80" timeoutInSeconds="30" />
  </LoadBalancerProbes>
  <WebRole name="WebRole1" vmsize="Small">
    ...
  </WebRole>
</ServiceDefinition> 
```

如果在定义 Web/Worker 角色之后添加它，您将在 Visual Studio 中收到“无效的子元素”错误：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="WindowsAzure6" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-10.1.8">
  <WebRole name="WebRole1" vmsize="Small">
    ...
  </WebRole>
  <LoadBalancerProbes>
    <LoadBalancerProbe name="MyProbe" protocol="http" intervalInSeconds="300" path="/something.aspx" port="80" timeoutInSeconds="30" />
  </LoadBalancerProbes>
</ServiceDefinition> 
```

# derby - 带有布尔表达式错误的 Apache Derby Like 子句

> ID：13918962
> 
> 赞同：0
> 
> 时间：2012-12-17T17:25:31.350
> 
> 标签：derby

我正在尝试对 Apache Derby Embedded DB 运行以下查询

从 arcproject 中选择 ProjectName 、 CompaignNumber 、JobNumber
其中 Projectname like '%' OR CompaignNumber like '%' OR JobNumber like '%'

但它会产生以下错误

```
ERROR: No authorized routine named 'LIKE' of type 'FUNCTION'
having compatible arguments was found.
Error Code: 30000 
```

我无法理解问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:16:12.710

谢谢你的更新; 现在更清楚了。

您使用的是哪个版本的 Derby？我无法按原样运行您的 CREATE TABLE 语句；我必须进行两项更改：1）我必须将“VARCHAR”更改为“VARCHAR（10）”2）我必须将“INTEGER default 'NULL'”更改为“INTEGER default 0”

在我做了这两个更改之后，我收到了您描述的消息。

问题在于您已声明为 INTEGER 的 JOBNUMBER 列。

您不能在“INTEGER”列上使用“LIKE”；它只适用于字符串

如果您将 SELECT 语句从“JobNumber like '%'”更改为“JobNumber != 0”，则该语句可以正常工作。

我同意信息不是很清楚；我将在 Derby 项目中打开一个问题以尝试改进信息，因为我认为它对你来说可能更清楚。

您可以在此处关注该问题的结果：[https ://issues.apache.org/jira/browse/DERBY-6020](https://issues.apache.org/jira/browse/DERBY-6020)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:06:44.743

我怀疑您没有在问题中包含程序的*确切*语法，因为当我将您的查询剪切并粘贴到 Derby 中时，它运行良好：

```
ij> create table arcproject (ProjectName varchar(10),CompaignNumber varchar(10),JobNumber varchar(10));
0 rows inserted/updated/deleted
ij> insert into arcproject values ('a','b','c');
1 row inserted/updated/deleted
ij> select ProjectName , CompaignNumber ,JobNumber from arcproject where Projectname like '%' OR CompaignNumber like '%' OR JobNumber like '%';
PROJECTNA&|COMPAIGNN&|JOBNUMBER
--------------------------------
a         |b         |c 
```

*请记住，在提出问题时，包括所有*细节至关重要，包括您使用的*确切*语法，特别是当您询问语法错误时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:32:49.330

首先感谢您的回复。现在我正在发送每一个细节（下面给出的查询是有效的查询）。

首先，我使用查询创建了表

CREATE TABLE "APP"."ARCPROJECT"（PROJECTNAME VARCHAR PRIMARY KEY 不为空，COMPAIGNNUMBER VARCHAR 默认为 'NULL'，JOBNUMBER INTEGER 默认为'NULL'，RESPONSIBLEPERSON VARCHAR 不为空，PROJECTSTARTDATE DATE 默认为'NULL'，PROJECTENDDATE DATE 默认为'NULL'）

然后我插入了值

插入“APP”。“ARCPROJECT”（PROJECTNAME、COMPAIGNNUMBER、JOBNUMBER、RESPONSIBLEPERSON、PROJECTSTARTDATE、PROJECTENDDATE）值（'proje-1'、'cmp-123'、89、'person-xyz'、'2012-12-8 ', '2013-12-8');

然后当我尝试这个查询时，它给了我上面提到的同样的错误。

从 arcproject 中选择 ProjectName、CompaignNumber、JobNumber、Responsibleperson、ProjectStartDate、projectEndDate，其中 Projectname like '%' OR CompaignNumber like '%' OR JobNumber like '%' OR Responsibleperson like '%';

注意：当我只使用两个 OR 表达式（例如，“其中 Projectname like '%' OR CompaignNumber like '%'”）时，它可以正常工作，但是当我添加另一个时，它开始显示前面提到的错误消息。

# jquery - 在 div 中加载大量 txt 文件

> ID：13918965
> 
> 赞同：1
> 
> 时间：2012-12-17T17:25:48.780
> 
> 标签：jquery, html

我知道 jQuery 的 .load() 函数可以从 .txt 文件中加载一个文本，但是有办法在 div 中加载大量 .txt 文件吗？

我试过这样做：

```
 for (i = 1;i<9;){
      $("#slide2 .wrapper").load(+i+".txt");
      i++;
   };
}); 
```

但它可以与图像一起制作画廊，但不能与 .txt 一起使用...

我的意图是做一些类似博客的事情，我只能将 .txt 文件放在一个目录中，然后它会自动加载到我的 HTML 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:29:24.077

JavaScript 和（通过扩展）jQuery 是客户端 Web 技术，出于安全原因，不允许本机访问用户计算机上的本地文件。

您必须将该文本文件放在服务器上，并为`.load()`函数提供指向该文件的 URL。

* * *

啊，错过了一些东西...[看起来您正在尝试](http://i.imgur.com/lw8bL.png)加载多个文件...在这种情况下，我再次建议在服务器上创建一些魔法。类似于一个 PHP 脚本，它将[`glob('*.txt')`](http://php.net/manual/en/function.glob.php)所有文件和[`fread()`](http://php.net/manual/en/function.fread.php)它们在一个循环中创建长文本流......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:45:40.010

尝试这样的事情：

```
for (i = 1;i<9;){
      $.get(+i+".txt", 
            function(res){
               $("#slide2 .wrapper").text($("#slide2 .wrapper").text() + res);//I expect here that you have a plain text in .txt files and want to see it like a text 
           });
      i++;
}; 
```

这应该加载所有文件**并将**它们附加到`$("#slide2 .wrapper")`内容中。

如果`.load`您将仅获得最后加载的文件，因为该功能只是将内容替换为`$("#slide2 .wrapper")`正在加载的文件的内容。请注意，不保证 1.txt 将在 2.txt 之前加载。2.txt 可能会比 1.txt 加载得更快，并且 1.txt 的内容将显示在 2.txt 的内容之后。

如果要保留订单，可以使用如下代码：

```
 getContent(1);// instead of for loop
});

function getContent(i) {
    $.get(+i+".txt",    
        function(res) {
           $("#slide2 .wrapper").text($("#slide2 .wrapper").text() + res);//I expect here that you have a plain text in .txt files and want to see it like a text          
           if(i < 9)
               getContent(i++);
        }
    );  
} 
```

供参考：[jQuery.get](http://api.jquery.com/jQuery.get/)和[.load](http://api.jquery.com/load/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:22:01.280

```
$(function () {
    for (var i = 1; i < 9; i++) {
        $.ajax({
            url : i + ".txt",
            dataType: "text",
            success : function (data) {
                $("#slide2.wrapper").append(data);
            }
        });
    }
}); 
```

你的html应该是：

```
<div id="slide2" class="wrapper"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:12:36.403

我假设你对 php 不太了解，但它应该很简单。

1.  创建一个新文件，但将其命名为 SomeFile.php。
2.  完全按照您在 html 文件中的方式复制所有 html 脚本，但删除 jQuery 以尝试加载文件的内容。
3.  将其直接插入您希望它显示的代码中，例如在`<div>`

    ```
    <?php 
        for($i=0;$i<9;$i++)
        {
            echo file_get_contents($i.".txt");
        } 
    ?> 
    ```

这应该在任何典型的托管服务上运行，或者如果自助服务确保您的服务器启用了 php。

# xml - 通过电子邮件发布到 XML API？

> ID：13918966
> 
> 赞同：0
> 
> 时间：2012-12-17T17:25:56.337
> 
> 标签：xml, api, email

我被迫将仪表板用于具有表格的产品，该表格只能发送到我可以指定的电子邮件地址。我的问题：我需要这个表单才能进入 API……有没有办法发送一封电子邮件，以某种方式发布到 API？API 接受 XML 正文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:31:59.690

如果外部 API 将发送至电子邮件地址，则唯一可用的起点是阅读为该地址指定的电子邮件并重新格式化 XML API 的数据。

根据具体的平台，通常我会考虑一个服务/恶魔进程，它会定期检查给定地址的新电子邮件，解析每封电子邮件的正文，并将生成的请求发送到您的 API。

在这种情况下，鲁棒性具有挑战性。

我建议您至少将收到的所有电子邮件记录到一个文件中，并记录将每条消息提交到您的 API 的成功/失败，以便于在生产中进行故障排除和纠正问题。

# python - Django中同一模型的多个多对多关系

> ID：13918968
> 
> 赞同：28
> 
> 时间：2012-12-17T17:26:15.167
> 
> 标签：python, django, django-models

给定以下具有两个多对多关系的模型：

```
class Child(models.Model):
    name = models.CharField(max_length=80)

class Foo(models.Model):
    bar = models.ManyToManyField(Child)
    baz = models.ManyToManyField(Child) 
```

这给出了错误：

```
accounts.foo: Accessor for m2m field 'bar' clashes with related m2m field 'Child.foo_set'. Add a related_name argument to the definition for 'bar'.
accounts.foo: Accessor for m2m field 'baz' clashes with related m2m field 'Child.foo_set'. Add a related_name argument to the definition for 'baz'. 
```

美好的; 我不需要反向关系。[根据相关名称的 Django 文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.related_name)（据我所知，仅在 ForeignKey 下），我可以设置`related_name="+"`并且不会创建后向关系：

```
class Child(models.Model):
    name = models.CharField(max_length=80)

class Foo(models.Model):
    bar = models.ManyToManyField(Child, related_name="+")
    baz = models.ManyToManyField(Child, related_name="+") 
```

但这不起作用：

```
accounts.foo: Accessor for m2m field 'bar' clashes with related m2m field 'Child.+'. Add a related_name argument to the definition for 'bar'.
accounts.foo: Reverse query name for m2m field 'bar' clashes with related m2m field 'Child.+'. Add a related_name argument to the definition for 'bar'.
accounts.foo: Accessor for m2m field 'baz' clashes with related m2m field 'Child.+'. Add a related_name argument to the definition for 'baz'.
accounts.foo: Reverse query name for m2m field 'baz' clashes with related m2m field 'Child.+'. Add a related_name argument to the definition for 'baz'. 
```

我需要做些什么来避免创建反向关系？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-17T17:41:30.103

我认为您只需要为这两个字段提供不同的相关名称：

```
class Child(models.Model):
  name = models.CharField(max_length=80)

class Foo(models.Model):
  bar = models.ManyToManyField(Child, related_name="bar")
  baz = models.ManyToManyField(Child, related_name="baz") 
```

如果您不提供相关名称，那么它会尝试`foo_set`在模型上创建相同的访问器名称 ( ) 两次`Child`。如果您提供相同的相关名称，它将再次尝试创建相同的访问器两次，因此您需要提供唯一的相关名称。用上面的代码定义你的模型，然后给定一个`Child`实例，你可以用和`c`访问相关`Foo`的对象。`c.bar.all()``c.baz.all()`

如果您不想要反向关系，则将 a 附加`+`到每个（唯一）相关名称：

```
class Foo(models.Model):
  bar = models.ManyToManyField(Child, related_name="bar+")
  baz = models.ManyToManyField(Child, related_name="baz+") 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-17T17:44:50.180

你还没有仔细阅读 Django 的文档。[这里](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ManyToManyField.related_name)说：

> 如果您有多个指向同一模型的 ManyToManyField 并希望抑制向后关系，请将每个 related_name 设置为以“+”结尾的**唯一值。**

`related_name`属性必须是唯一的，而不是相同的。

# android - 在 Mac OS 中找不到 AVD 管理器

> ID：13918974
> 
> 赞同：0
> 
> 时间：2012-12-17T17:26:43.940
> 
> 标签：android, eclipse, macos, sdk, avd

我正在运行 Eclipse Juno 并为 Mac OS 安装了适用于 Android 的 SDK 管理器。事情似乎进展顺利，可以将旧项目作为新的 Android 应用程序导入。

问题是我找不到 AVD 管理器。我去了 Windows-> 并没有看到 SDK 管理器或 AVD 管理器的选项。

我去运行一个项目，它要求我使用 AVD 管理器创建一个设备，所以它已安装，我使用它。我的设置不正确吗？最新版本的 Eclipse 就没有它吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T15:59:26.617

我使用了错误版本的 Eclipse。您需要像往常一样安装 Eclipse，下载 Android SDK，然后使用 adt-bundle-mac 目录中的版本。那个是带有 Android 插件的 Eclipse 版本的那个。刚刚为遇到此问题的其他人回答了这个问题。

# gitosis - Gitosis 克隆错误：无法读取配置文件。没有权限

> ID：13918985
> 
> 赞同：1
> 
> 时间：2012-12-17T17:27:14.500
> 
> 标签：gitosis

我试图克隆一个 gitosis 存储库并得到错误：

错误：gitosis.app：无法读取配置文件：[Errno 13] 权限被拒绝：'/sr v/gitosis/.gitosis.conf' 致命：远程端意外挂断

gitosis.conf 的权限设置为 755。我还检查了文件夹并确保所有者是 gitosis。我看不出许可有什么问题。此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:55:11.127

谢谢。是的，存储库目录不属于 gitosis。更新后克隆成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T23:30:46.990

“su - git” 到 git 用户和
cat gitosis.conf 文件。
如果您看不到文件的内容。那么您需要修复文件的所有权和权限或文件路径上的路径节点。

比尔 Z

# java - Spring：不调用@PostConstruct

> ID：13918988
> 
> 赞同：7
> 
> 时间：2012-12-17T17:27:21.083
> 
> 标签：java, spring

A类：

```
package myproject.web.factory.components;

@Component
public class AppComponentFactory{
} 
```

B类

```
package myproject.web.components;
import myproject.web.factory.components.AppComponentFactory;

@Component
public class AdminTabSheet{

   @Autowired
   private AppComponentFactory appComponentFactory;

   public AdminTabSheet() {
   }

   @PostConstruct
   public void init() {
      // does something with appComponentFactory
   }
} 
```

配置 XML：

```
<context:component-scan base-package="myproject.spring" /> 
```

WebConfig.java：

```
package myproject.spring.config;

@Configuration
@ComponentScan(basePackages = { "myproject.web.components"})
public class WebConfig { 
```

我已遵循[http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html](http://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html)中的所有规则：

*   此注解只能注解一种方法。
*   除 EJB 拦截器外，该方法不得有任何参数
*   方法的返回类型必须为 void。
*   该方法不得抛出已检查的异常。
*   应用 PostConstruct 的方法可以是公共的、受保护的、包私有的或私有的。
*   该方法不能是静态的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-30T18:16:40.873

如果没有错字，我相信正确的应该是

```
@ComponentScan(basePackages = { "myproject.web"}) 
```

因为`AppComponentFactory`在`myproject.web.factory`包装中。

# cocoa-touch - 使用NSLayoutConstraints在UIViewController中定位UIView会导致UILabel别名？

> ID：13918991
> 
> 赞同：2
> 
> 时间：2012-12-17T17:27:42.543
> 
> 标签：cocoa-touch, ios6

我正在尝试从屏幕顶部手动在 UIViewController 中包含的 UIView 中设置动画。此视图的高度为 150 像素。

我为它“折叠”和“展开”（如图所示）设置布局约束。当我想分别隐藏/显示时，我会在两个约束之间进行动画处理。

我在 IB 中使用视图左上角的简单 UILabel 设置了包含在此 UIViewController 中的视图。

```
CGFloat closeUpViewHeight = 150.f;
self.closeUpViewController = [[[CloseUpViewController_Phone alloc] initWithNibName:@"CloseUpViewController_Phone"
                                                                           bundle:nil]
                              autorelease];

[self addChildViewController:self.closeUpViewController];
[self.view addSubview:self.closeUpViewController.view];
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:self.closeUpViewController.view
                                                      attribute:NSLayoutAttributeHeight
                                                      relatedBy:NSLayoutRelationEqual
                                                         toItem:nil
                                                      attribute:NSLayoutAttributeHeight
                                                     multiplier:0.f
                                                       constant:closeUpViewHeight]];

[self.view addConstraint:[NSLayoutConstraint constraintWithItem:self.closeUpViewController.view
                                                      attribute:NSLayoutAttributeWidth
                                                      relatedBy:NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeWidth
                                                     multiplier:1.f
                                                       constant:0.f]];

[self.view addConstraint:[NSLayoutConstraint constraintWithItem:self.closeUpViewController.view
                                                      attribute:NSLayoutAttributeCenterX
                                                      relatedBy:NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeCenterX
                                                     multiplier:1.f
                                                       constant:0.f]];

self.expandedCloseUpViewConstraint = [NSLayoutConstraint constraintWithItem:self.closeUpViewController.view
                                                                  attribute:NSLayoutAttributeTop
                                                                  relatedBy:NSLayoutRelationEqual
                                                                     toItem:self.view
                                                                  attribute:NSLayoutAttributeTop
                                                                 multiplier:0.f
                                                                   constant:0.f];

self.collapsedCloseUpViewConstraint = [NSLayoutConstraint constraintWithItem:self.closeUpViewController.view
                                                                   attribute:NSLayoutAttributeBottom
                                                                   relatedBy:NSLayoutRelationEqual
                                                                      toItem:self.view
                                                                   attribute:NSLayoutAttributeTop
                                                                  multiplier:1.f
                                                                    constant:-1.f]; 
```

任何人都知道为什么产生的 UILabel 有别名问题？

![在此处输入图像描述](../Images/e36bacc25d80c614e78e85dba622c5f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:50:23.983

修复了我的问题，非常愚蠢的错误。

在我的视图控制器的设置中，我在 UIView 中添加了一个阴影，并且意外地继承了这个：

```
self.view.layer.masksToBounds = NO;
self.view.layer.shadowOffset = CGSizeMake(0, 2);
self.view.layer.shadowRadius = 3;
self.view.layer.shadowOpacity = 0.8;
self.view.layer.shouldRasterize = YES;  //<--- Don't rasterize. 
```

删除该`shouldRasterize`行可解决此处的问题。

# c++ - BMI计算器错误

> ID：13918996
> 
> 赞同：1
> 
> 时间：2012-12-17T17:28:07.167
> 
> 标签：c++, math

我正在尝试做一个基本的 BMI 计算器，当我做它的公制方面它工作正常，但是，英制方面返回一个错误的答案。

```
cout << "What is your weight? ";
cin >> weight;

cout << "What is your height in either inches or meters? ";
cin >> height;

cout << "Is that metric or imperial? Type 1 for metric, or 0 for imperial ";
cin >> unit;

if (unit = 1) 
answer = weight / (height * height);
if (unit = 0)
answer = (weight * 703) / (height * height);
cout << "Your BMI is " << answer << endl;
system("PAUSE");
return 0; 
```

根据维基百科，我认为英制的 BMI 方程是

重量（磅）* 703 /（高度平方英寸）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:29:44.420

使用 == 来测试相等性 not =

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:34:42.240

您在 if 语句中使用了赋值运算符“=”，这两个语句都将始终返回 true，因为您可以将“0”或“1”的值分配给单位。

要测试是否相等，您必须使用“==”。

这应该可以解决这个问题！（：

# java - java中serialVersionUID是如何序列化的？

> ID：13918997
> 
> 赞同：3
> 
> 时间：2012-12-17T17:28:08.523
> 
> 标签：java, class, static, serializable, serialversionuid

类成员（静态）不能被序列化。原因很明显——它们不被类的对象持有。由于它们与类（而不是该类的对象）相关联，因此它们与对象分开存储。

`serialVersionUID`被声明为实现[`java.io.Serializable`](http://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html)接口的类中的静态字段，如下所示。

```
private static final long serialVersionUID = 1L; 
```

它用作`Serializable`类中的版本控制。如果没有明确声明，JVM 将根据`Serializable`类的各个方面自动完成，如[Java(TM) 对象序列化规范](http://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html)所述。

如果它没有在实现`Serializable`接口的类中显式声明，则可能会发出警告。

> 可序列化的类`SomeClass`没有声明`static` `final` `serialVersionUID`类型的字段`long`

即使它是序列化的`static`，它是序列化的还是序列化的例外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:30:59.353

序列化是“神奇地”完成的，有很多反射，并且有各种特殊的行为——包括例如查找类的*静态* `serialVersionUID`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:43:07.360

`serialVersionUID`本身没有序列化。至少，与对象的其他属性不同。相反，它作为特殊“标题”的一部分被写入您的输出目标，其中包含重建正在写入的对象所需的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-30T12:18:05.440

让我清楚你在`serialVersionUID`向文件写入和读取对象时的使用。

在下面的代码中，我编写了两个函数`writeObject()`和`readObj()`

`writeObject()`用于将对象写入文件

`readObj()`用于从文件中读取对象

```
package com.msq;

import java.io.Serializable;

public class A implements Serializable{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    int a;
    transient int b;

    public int getA() {
        return a;
    }
    public void setA(int a) {
        this.a = a;
    }
    public int getB() {
        return b;
    }
    public void setB(int b) {
        this.b = b;
    }
} 
```

```
package com.msq;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

public class B implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 123L ;
    /**
     * 
     */
    String name;
    A a;

    public B() {

    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public A getA() {
        return a;
    }

    public void setA(A a) {
        this.a = a;
    }

    public static void main(String[] args) {

        //writeObject();
        readObj();
    }

    static void writeObject() {
        B b = new B();
        b.setName("Musaddique");
        A a2 = new A();
        a2.setA(5);
        a2.setB(10);
        b.setA(a2);
        ObjectOutputStream write = null;

        try {
            write = new ObjectOutputStream(new FileOutputStream(
                    "D:\\serObj.bat"));
            write.writeObject(b);
            write.flush();
            write.close();

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    static void readObj() {
        ObjectInputStream reader = null;

        try {
            reader = new ObjectInputStream(
                    new FileInputStream("D:\\serObj.bat"));
            B b1 = (B) reader.readObject();
            System.out.println("name: "+b1.getName());
            System.out.println("value of a: "+b1.getA().getA());
            System.out.println("value of b: "+b1.getA().getB());
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

在这里，我使用`serialVersionUID = 123L`了 B`serialVersionUID = 1L`类和 A 类，还使用`transient`了变量 b 的关键字，以限制将 b 的值保存到文件中。

1）将数据写入文件然后读取文件，您将获得以下输出

```
name: Musaddique
value of a: 5
value of b: 0 
```

你会得到 b: 0 的值，因为我们对 b 使用了瞬态。

现在进行测试尝试通过相同的调用写入对象，但是在读取更改时，您`serialVersionUID = 765L`将得到以下异常

```
java.io.InvalidClassException: com.msq.B; local class incompatible: stream classdesc serialVersionUID = 123, local class serialVersionUID = 765
    at java.io.ObjectStreamClass.initNonProxy(Unknown Source)
    at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
    at java.io.ObjectInputStream.readClassDesc(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at com.msq.B.readObj(B.java:81)
    at com.msq.B.main(B.java:46) 
```

`serialVersionUID`因此，在从文件中读取和写入对象时必须使用相同的方法。

此外，当您将类从一台机器合并到另一台机器或系统时，它在 RMI 调用中使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T17:46:42.430

不要`serialVersionUID`将其视为被序列化的对象数据的一部分，而是将其视为类描述的一部分。与类名是序列化流的一部分的方式相同。流格式的完整详细信息记录在[Grammar for the Stream Format](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/protocol.html#10258)中。

# python - Django 记录器开始间歇性地无法写入文件

> ID：13918998
> 
> 赞同：2
> 
> 时间：2012-12-17T17:28:15.997
> 
> 标签：python, logging, file-io

我已经使用 python 的记录器在我的 Django 站点中设置了日志记录，该记录器已经运行了好几个月。

从最近几天开始，它开始以以下方式失败：

日志文件显示有一行已中途停止写入，紧随其后的是下一行。例子：

```
2012-12-17 16:42012-12-17 17:05:06,403 
```

此外，失败的写入和在同一行上成功的写入之间存在很大的时间间隔，而通常每分钟左右写入一行。

在过去 3 天内，此问题已发生 6 次。

这是我的记录器配置：

```
LOGGING = {
'version': 1,
'disable_existing_loggers': False,
'handlers': { 
    'analytics': {
        'level': 'INFO',
        'class': 'logging.FileHandler',
        'filename': METRICS_LOGFILE,            
        'formatter': 'analytics',
    },
},
'formatters': {
    'analytics': {
        'format': '%(asctime)s %(message)s'
    },
},
'loggers': {
    'analytics': {
        'handlers': ['analytics'],
        'level': 'INFO',
        'propagate': False,
    },            
} 
```

}

# php - 如何使用 phpmailer 更改信封发件人地址？

> ID：13918999
> 
> 赞同：6
> 
> 时间：2012-12-17T17:28:20.510
> 
> 标签：php, phpmailer

使用 php mail() 我可以写

```
mail('to@example.com','subject!','body','From: from@example.com','-f from@example.com'); 
```

但是我怎样才能对 phpmailer 做同样的事情呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-05T08:04:47.820

Theolodis 答案中的相关行是：

```
$mail->SetFrom('name@yourdomain.com', 'First Last'); 
```

没有必要使用`AddReplyTo()`这是完全不同的东西。

您只需要使用`SetFrom()`. 如果您查看[代码](https://github.com/PHPMailer/PHPMailer/blob/master/src/PHPMailer.php#L1076)，`SetFrom()`则需要三个参数：

```
/**
 * Set the From and FromName properties
 * @param string $address
 * @param string $name
 * @param boolean $auto Whether to also set the Sender address, defaults to true
 * @throws phpmailerException
 * @return boolean
 */
public function SetFrom($address, $name = '', $auto = true) {
.... 
```

第三个参数（默认为 true），因此信封发件人被设置为与发件人相同的地址。

如果您想将不同的地址设置为信封发件人和发件人地址，这会很有趣。这是**更改**信封发件人的方法。因此，您必须像这样设置实例的[`$sender`](https://github.com/PHPMailer/PHPMailer/blob/master/class.phpmailer.php#L100)属性：`PHPMailer`

```
 $pMail->Sender='admin@yourdomain.com';
  $pMail->SetFrom('name@yourdomain.com', 'First Last', FALSE); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-17T17:36:57.157

[这个例子展示了如何。](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/AdvancedMail)

相关行：

```
$mail->SetFrom('name@yourdomain.com', 'First Last');
$mail->AddReplyTo('name@yourdomain.com', 'First Last'); 
```

正如[Hannes Morgenstern](http://stackoverflow.com/a/18053334/4692205)正确建议的那样，答案是：

```
$pMail->Sender='admin@yourdomain.com';
$pMail->SetFrom('name@yourdomain.com', 'First Last', FALSE); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-12T21:30:48.200

-f 标志设置为 $email->Sender

这是信封，允许电子邮件服务器在接收您的其余电子邮件数据之前评估发件人的电子邮件地址

SetFrom - 这是最终用户将看到的邮件来自的电子邮件地址

AddReplyTo - 这是他们回复电子邮件时弹出的电子邮件地址

发件人需要干净才能通过垃圾邮件过滤器

SetFrom 需要干净才能通过垃圾邮件过滤器

AddReplyTo 并不重要。这允许服务代表具有不受服务管理的电子邮件地址的用户发送电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T17:40:40.310

什么对我有用（模糊地）使用

```
$mail->SetFrom('name@yourdomain.com', 'Rupert Bear'); 
```

是使用 localhost 而不是直接访问 smtp 服务器，例如

```
$email->Host='localhost'; // SMTP server this way you get from name (don't know why) 
```

现在邮件从“Rupert Bear”[name@yourdomain.com] 到达 Outlook