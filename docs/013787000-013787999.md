# StackOverflow 问答 13787000-13787999

# javascript - 向现有幻灯片添加简单的分页

> ID：13787001
> 
> 赞同：1
> 
> 时间：2012-12-09T11:33:12.577
> 
> 标签：javascript, jquery, slideshow

我想为这个现有脚本添加简单的分页：http: [//sixrevisions.com/demo/slideshow/final.html](http://sixrevisions.com/demo/slideshow/final.html)

所以基本上它会计算`<div class="slide">`实例的数量，然后生成一个列表（例如 1 - 2 - 3 - 4），每个列表都有一个指向该特定幻灯片的超链接。

我对 Javascript 不是很感兴趣，所以希望能得到一些帮助。

有人可以告诉我如何实现这一目标吗？

非常感谢任何指针:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:58:03.677

基本上，您希望使用变量 numberOfSlides 为每张幻灯片添加一个链接元素，然后为这些链接上的绑定添加闭包。您可以通过在创建每个链接时将计数器变量分配给每个链接来重用动画计算。

```
for(i = 0; i < numberOfSlides; i++) {
    (function() {
        var slideIndex = i;
        var slideLabel = i + 1;
        var x = $('<a id="slide' + slideLabel + '"href="javascript:void(0);" class="paginatorLink">' + slideLabel + '</a>'); //Format your links here
        x.click(function() {
            currentPosition = slideIndex;
            // Hide / show controls
            manageControls(currentPosition);
            $('#slideInner').animate({
                'marginLeft': slideWidth * -slideIndex
            });
        });
        $('#slideshow').append(x);
    })();
} 
```

这是一个小提琴：http: [//jsfiddle.net/radiatorsounds/aQb6P/](http://jsfiddle.net/radiatorsounds/aQb6P/)

# c# - WCF 服务消息安全

> ID：13787002
> 
> 赞同：0
> 
> 时间：2012-12-09T11:33:23.140
> 
> 标签：c#, wcf, wcf-security, x509certificate

我在 WCF 中遇到消息安全问题。我正在使用本教程： http: [//www.codeproject.com/Articles/96028/WCF-Service-with-custom-username-password-authenti](http://www.codeproject.com/Articles/96028/WCF-Service-with-custom-username-password-authenti) 我有 2 项服务。第一个，用wshttpbindig就可以了。第二个，使用 wsdualhttpbinding 不起作用。设置凭据后打开代理时出现异常。看来我必须在打开代理之前设置凭据，但设置凭据后我无法打开代理。我只为这两种服务使用了一个证书。

我该怎么办？当我有 2 个服务时，我必须使用 2 个证书吗？如果是，我该怎么做？

```
InstanceContext context = new InstanceContext(this);                    
proxy = new CommunicationServiceReference.CommunicationServiceClient(context);

_proxy.ClientCredentials.UserName.UserName = UserSession.Login;
_proxy.ClientCredentials.UserName.Password = UserSession.Password;
_proxy.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
_proxy.Endpoint.Address.Uri.Port.ToString();

_proxy.Open(); 
```

编辑：是否可以使用我在上面发布的教程使用 wsdualhttpbinding 配置服务？

# java - Android：上下文是否影响用于取消警报的filterEquals（）？

> ID：13787006
> 
> 赞同：1
> 
> 时间：2012-12-09T11:33:55.803
> 
> 标签：java, android, android-intent, alarmmanager, android-pendingintent

`alarmManager.cancel(pendingIntent);`根据android开发人员的说法，要取消警报，我使用which`Removes any alarms with a matching Intent. Any alarm, of any type, whose Intent matches this one (as defined by filterEquals(Intent)), will be canceled.`

如果它比较 2 个使用不同上下文构造的 pendingIntent，并且它们使用的意图也具有不同的上下文，但它们引用的类相同，那么 filterEquals(Intent) 是否返回 true？

所以，pendingIntent1 有： context1 和一个带有 context1 和 class1.class 的意图

而 pendingIntent2 有： context2 和一个带有 context2 和 class1.class 的意图

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T11:58:32.057

我认为他们应该是一样的。据此[，](http://developer.android.com/reference/android/content/ComponentName.html#ComponentName%28android.content.Context,%20java.lang.Class%3C?%3E%29)仅需要上下文来检索应用程序的包名称。

# django - django 通过自定义模板标签访问模板块

> ID：13787009
> 
> 赞同：0
> 
> 时间：2012-12-09T11:34:24.823
> 
> 标签：django

我已经开始研究一个 django 项目，该项目有几个应用程序，这些应用程序完全通过模板标签通过其他应用程序使用。投票应用程序，评论应用程序..等

尽管在为该特定模板标签（css，js）呈现资产时面临挑战。

我已经有一个带有 css 和 js 块的 base.html，但是我如何能够使用模板标签访问它们以附加相关资产。目前我严重依赖包含模板，我做了很多研究，似乎不可能触及块。

有什么建议吗？即使我会改变使用块的方法，我也愿意接受任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:15:47.840

告诉你的库（应用程序）的用户他们必须在他们的模板中的某个地方包含你的 css/js 似乎是完全合理的。例如[django crispy-forms](http://django-crispy-forms.readthedocs.org/en/latest/install.html#uni-form-static-files)就是这样做的。只需给他们一些示例代码以包含在他们的基本模板中

# c++ - 为什么要使用 cl::vector？

> ID：13787012
> 
> 赞同：1
> 
> 时间：2012-12-09T11:34:52.760
> 
> 标签：c++, opencl, std

目前，我正在尝试在 OpenCL 中进行一些项目，以了解它是如何工作的，以及它如何帮助我更快地进行计算。互联网上的大多数教程都建议应该使用 cl::vector 而不是 std::vector。

为什么？

它们之间有什么区别，为什么 cl::vector 更适合 OpenCL 开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T13:59:10.277

[OpenCL C++ 规范](https://www.khronos.org/registry/cl/specs/opencl-cplusplus-1.1.pdf)在第5 节（第 60 页）中提到了这一点：

> 虽然 C++ 的标准模板库为快速访问许多有用的算法和容器提供了极好的资源，但由于不同工具链和操作系统之间的兼容性问题以及其他原因，它通常不被使用。OpenCL C++ API 在许多地方使用向量和字符串，默认情况下将使用 std::vector 和 std::string，但是，开发人员可以不包括这些。
> 
> C++ API 为 std::vector (cl::vector) 和 std::string (cl::string) 提供了替换，或者开发人员可以选择使用他们自己的实现。

因此，这些标准 C++ 类型的各种实现之间似乎存在兼容性问题，因此 OpenCL 提供了自己的类型，这些类型已知可以满足 OpenCL 的需要。

但是请注意，默认情况下 OpenCL 坚持标准 C++ 类型；要使用 cl::vector 和 cl::string 您必须定义宏`__NO_STD_VECTOR`和/或`__NO_STD_STRING`. 这两种替换类型可能不应该用于非 OpenCL 代码，因为它们提供了减少的功能。示例：根据我的理解，cl::vector 默认限制为 10 个元素，除此之外无法调整大小。在我的 linux 机器上进行的快速测试实际上没有成功 push_back() 超过 10 个元素到 cl::vector 对象。这是非常可怕的。

不幸的是，我找不到更多关于哪些工具链会导致这些问题的详细信息。我才刚刚开始做 OpenCL 工作，所以我还不能从我的经验中说出来。但我会尽量使用标准的 std::vector ，而不是避免使用坏的工具链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:18:27.757

这两个类是相似的。`cl::vector`没有实现`resize, reserve, insert, erase or swap`（至少在 OpenCL 1.1 中）。因此，如果您需要这些功能之一，则必须使用`std::vector`.

# c# - 在 .Net MVC 中创建无限循环

> ID：13787020
> 
> 赞同：1
> 
> 时间：2012-12-09T11:35:29.083
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, backgroundworker, task

我需要一个需要永远每 x 秒运行一次的操作，为此我做了：

```
protected void Application_Start()
{
    InitialieOnce.Initialize();
}

public static class InitialieOnce
{
    private static bool initialized = false;

    public static void Initialize()
    {
        if (initialized == false)
        {
            initialized = true;
            Thread t = new Thread(x => CheckStatus());
            t.IsBackground = true;
            t.Start();
        }
    }

    private static void CheckStatus()
    {
        //My script goes here.
        Thread.Sleep(8000);
        CheckStatus();
    }
} 
```

一段时间后（大约 5 分钟），我收到此错误：

> “在 mscorlib.dll 中发生了“System.StackOverflowException”类型的未处理异常”

这个错误是否与我如何制作无限循环有关？

如果是，是否有更好的方法来实现这一点，我可以修复它，或者这段代码可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T11:39:23.300

考虑为这样的事情创建一个 Windows 服务，而不是滥用 II..

我不知道在哪里，但我读到 IIs 不适合创建像 javas 服务器那样的长期服务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T11:42:17.970

您正在递归调用“CheckStatus”。因此，每 8 秒，您的调用堆栈上就会多出一个条目：

`CheckStatus()`-> `CheckStatus()`-> `CheckStatus()`-> 等等……直到你得到一个 StackOverflowException。

相反，您应该使用

```
while (true)
{
    /* Your Code */
    Thread.Sleep(8000);
} 
```

另请注意，默认情况下，如果 15 分钟内没有请求，IIS 将卸载您的应用程序，从而导致您的线程被终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:46:41.293

我还建议为此创建一个 Windows 服务，比如守护进程。您可以创建一个服务，它只会定期对您的应用程序调用一个特殊操作。其余的工作将在您的 MVC 应用程序中完成。看看[这篇文章](http://www.codiply.com/blog/using-fsxdaemon-as-a-pacemaker-in-an-asp-net-mvc-application)的例子。

# python - Python 交互式轴范围 - 在 pylab/numpy 中使用 silders 设置轴限制

> ID：13787022
> 
> 赞同：1
> 
> 时间：2012-12-09T11:35:39.397
> 
> 标签：python, numpy, python-2.7, matplotlib

我正在使用 Python 2.7 。有没有办法使用滑块设置*xlim*和*ylim*？

```
import pylab as pl
import numpy as np
x=np.arange(0,10,0.01)
y=pl.sin(x)*0.1*x
pl.plot(x,y)
pl.xlim(3,9)
pl.ylim(-1,1)
pl.show() 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:10:20.970

我认为[画廊中的这个食谱](http://matplotlib.org/examples/widgets/slider_demo.html)可以很容易地修改为你想要的。该示例更新数据，但您可以轻松地将 xlim 和 ylim 调用放入更新函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-13T14:18:22.917

**是**的，有一种方法可以改变绘图限制，只是不是用 xlim,ylim 而是用重新定义轴。

设想：

```
fig = plt.figure()
ax = fig.add_subplot(111)
ax.axis([0,200,0,500]) 
```

add1) 轴定义为 [x_min, x_max, y_min, y_max]

add2) 只是为了确定：

```
 print ax.axis() 
```

> (0.0, 200.0, 0.0, 500.0)

**然后，您可以在滑块更新功能中执行以下操作：**

```
def update(val):
        ax.axis([0,200,0,1000]) 
```

所以，

```
print ax.axis() 
```

> (0.0, 200.0, 0.0, 1000.0)

# apache2 - 在 httpd.conf 中添加 php load_module 时 Apache2.4 不会启动

> ID：13787024
> 
> 赞同：2
> 
> 时间：2012-12-09T11:35:50.470
> 
> 标签：apache2

我正在尝试使用 apache 2.4 配置 php 5.4.9，但是当我包含以下行时，apache 将无法启动。

```
LoadModule php5_module "c:/php/php5apache2_4.dll"
AddHandler application/x-httpd-php .php
PHPIniDir "C:/php" 
```

我检查了我所有的文件路径，它们都很好。我在环境中设置了路径`C:\php;c:\Apache24;c:\Apache24\bin;`。

我实际得到的错误是

```
Windows could not start the Apache2.4 on local computer. For more information, review the system eventlog. If this is a non-microsoft service, contact the service vendor, and refer to service-specific error code 1 
```

其他人有过这个问题吗？

更新

我确实`php5apache2_4.dll`在 php 文件夹中，并且我在 apache 中的错误日志

```
[Sun Dec 09 11:19:16.502272 2012] [mpm_winnt:notice] [pid 5552:tid 316] AH00418: Parent: Created child process 5052    
[Sun Dec 09 11:19:18.315156 2012] [mpm_winnt:notice] [pid 5052:tid 208] AH00354: Child: Starting 64 worker threads.    
[Sun Dec 09 11:29:53.861913 2012] [mpm_winnt:notice] [pid 5552:tid 316] AH00422: Parent: Received shutdown signal -- Shutting down the server.    
[Sun Dec 09 11:29:55.889916 2012] [mpm_winnt:notice] [pid 5052:tid 208] AH00364: Child: All worker threads have exited.    
[Sun Dec 09 11:29:55.905516 2012] [mpm_winnt:notice] [pid 5552:tid 316] AH00430: Parent: Child process exited successfully. 
```

# php - 我可以在同一个 HTML 文件中插入 PHP 和 javascript 代码吗？

> ID：13787028
> 
> 赞同：4
> 
> 时间：2012-12-09T11:36:06.630
> 
> 标签：php, javascript

```
<HTML>
    <script language="JavaScript">  
        <script language="php">
        </script>
    </script>
</HTML>

<HTML>
    <script language="php">
    </script>
    <script language="JavaScript">  
    </script>
</HTML> 
```

我想在上面的 HTML 代码中插入 PHP 和 javascript 代码。我可以做这个工作吗？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T11:41:59.900

它不是那样工作的，您可以将它们本身放在同一个文件中，就像您拥有的那样。

PHP在服务器上执行，结果发送到客户端，而JS代码由客户端的浏览器执行。

```
<?php
//php code in here is evaluated and the result sent to the client
$somevar = 1234;
?>
<HTML>
     <script language="JavaScript">  
        //javascript in here is evaluated by the client
        //you could insert PHP values here to be used in JS if you want
        //make sure you escape them though...
        var some_js_var = <?php echo $somevar; ?>
        //the JS var above would contain the value of php variable $somevar
    </script>
</HTML> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T11:43:09.827

```
<HTML>
<script language="JavaScript">  
    <?php 
      // Your PHP code here that outputs javascript
      ?>
</script>
</HTML>

<HTML>
    <?php 
      // Your PHP code here that outputs text/html code
      ?>
<script language="JavaScript">  
</script>
</HTML> 
```

但当然，正如其他人指出的那样，浏览器不会看到您的 PHP 代码。它将由服务器处理，浏览器只会看到 javascript/html。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T11:39:36.837

当然，你甚至可以让 php 生成 javascript。php 文件在发送给客户端之前被处理为 html，客户端除了带有 javascript 的 html 之外什么也看不到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T12:42:14.097

您也可以像这样插入您的代码，不要给出错误

```
<HTML>
    <script language="JavaScript">  
        <script language="php">
           echo "alert('javascript alert')";
        </script>
    </script>
</HTML>

<HTML>
    <script language="php">
         echo "php code runned";
    </script>
    <script language="JavaScript">  
    </script>
</HTML> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-24T10:52:17.847

如果你想让 php 在 javascript 中执行，那么你必须使用 AJAX。

AJAX 是一个 javascript 代码，它允许您调用服务器，从而执行 php 代码并将结果返回给您，在您希望的任何时间（不仅在页面创建时，而且在调用 javascript 代码时） .

[https://www.w3schools.com/xml/ajax_intro.asp](https://www.w3schools.com/xml/ajax_intro.asp)

使用 jquery 更容易： [https ://api.jquery.com/jquery.ajax/](https://api.jquery.com/jquery.ajax/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T02:28:30.980

**你可以把 PHP 代码放在 fichero.js 的中间？？？**

许多人不知道，但原则上不知道。如果服务器解释一个php文件需要看php扩展名，注意不能设置或者如果文件是php html扩展名，那么你就不是js文件扩展名。你可以做的是类似于 php type="javaScript"> '; echo 'write ("'.$name.'");'; 回声''; } ?> 例如。

# c++ - 尝试在 C++ 中比较两个 .txt 图像时发生错误

> ID：13787041
> 
> 赞同：0
> 
> 时间：2012-12-09T11:38:13.280
> 
> 标签：c++, image, matrix, heap-memory

作为我大学作业的一部分，我们需要比较两张 .txt 格式的图像，一张是普通图像，另一张是图像的混乱版本。

两张图片都是 512x512，我们被要求考虑它们已被分成 16x16 块，这意味着每个块都是 32x32。

为了比较这两个图像，我在图像块上使用平方差总和算法。从左上角开始，一路走来，直到找到合适的数学。然而，这是我的问题发生的地方，在成功地从未混杂的图像中获取单个块并将其与混杂图像中的另一个块进行比较后，第二次迭代会导致以下错误：

> Windows 已在 Assignment1.exe 中触发断点。
> 
> 这可能是由于堆损坏，这表明 Assignment1.exe 或其已加载的任何 DLL 中存在错误。

我的问题是是什么导致了我的代码中的错误？

以下是我的名为 Matrix.h 的头文件，它将从 txt 文件中获得的 2d 矩阵转换为 1d 图像。

```
#pragma
#ifndef MATRIX_H
#define MATRIX_H

class Matrix
{
protected:
    int M;
    int N; 
    double* data;
    Matrix(){M = 0; N = 0;data = 0;}                                                //Constructor to avoid error

public:

    Matrix(int sizeR, int sizeC, double* input_data);                               //Constructor
    Matrix(int sizeR, int sizeC);
    ~Matrix();                                                                      //Destructor
    Matrix(const Matrix& existingMatrix);                                           //Copy Constructor
    double get (int i , int j)  const;                                              //Returns value at specified location
    const void set(int i, int j, double& val);                                      //Changes value at specified location
    int getM() const;                                                               //Return value of M
    int getN() const;                                                               //Return value of N
    Matrix getBlock(int startRow, int endRow, int startColumn, int endColumn);      //Return section of Matrix
    Matrix operator + (const Matrix& B);
    Matrix operator = (const Matrix& B);
    Matrix operator - (const Matrix& B);
    Matrix operator * (const Matrix& B);
    Matrix operator / (const Matrix& B);
    Matrix operator ++ ();
    double operator () (int i, int j);
    void out();
    double sum();
};

class BinaryImage
    :public Matrix
{

public:
    BinaryImage(int sizeR, int sizeC, double* input_data, double thresh);
    ~BinaryImage();
    BinaryImage(const Matrix& rhs, double thresh);
    BinaryImage(const BinaryImage& existingBinIm);
    const void set(int i, int j, double& val);
};

#endif 
```

下一节是我的 Main，我们在出现错误的情况下使用的方法称为 shuffledLogo()。

```
#include<iostream>
#include<Windows.h>
#include<fstream>
#include<string>
#include"Matrix.h"
using namespace std;

void shuffledLogo();
double* readTXT(char* fileName, int sizeR, int sizeC);
void writePGM(char* fileName, Matrix& toWrite, int Q);

int main()
{
    int selection;

    cout<<"Select a program to run:"<<endl<<"1 - Logo Reorganisation"<<endl<<"2 - Where's Wally"<<endl<<"Selection: ";
    cin>>selection;
    cout<<endl;
    switch(selection)
    {
    case 1:
        cout<<"Logo Reorganisation Commencing..."<<endl;
        shuffledLogo();
        break;
    case 2:
        cout<<"Where's Wally Commencing..."<<endl;
        break;
    default:
        cout<<"Selection invalid"<<endl;
        break;
    }

    Sleep(1000);
    return 0;
}

//Consructor
Matrix::Matrix(int sizeR, int sizeC, double* inputData)
{
    M = sizeR;
    N = sizeC;
    data = new double [M*N];
    for (int ii = 0; ii < M*N; ii++)
    {
        data[ii] = inputData[ii];
    }
}

Matrix::Matrix(int sizeR, int sizeC)
{
    M = sizeR;
    N = sizeC;
    data = new double [M*N];

    for (int ii = 0; ii < M*N; ii++)
    {
        *(data+ii) = 0;
    }
}

//Destructor
Matrix::~Matrix()
{
    delete [] data;
}

//Copy Constructor
Matrix::Matrix(const Matrix& existingMatrix)
{
    M = existingMatrix.getM();
    N = existingMatrix.getN();
    data = new double[M*N];

    for (int ii = 0; ii < M; ii++)
    {
        for (int jj = 0; jj < N; jj++)
        {
            int k = ii*N+jj;
            data[k] = existingMatrix.get(ii,jj);
        }
    }
}

//Pass by constant value
double Matrix::get (int i , int j)  const   
{
    int k = i*N + j;
    return data[k];
}

//Pass by Refrence
const void Matrix::set(int i, int j, double& val)
{
    int k = i*N + j;
    val = data[k];
}

//Return Value of M
int Matrix::getM() const
{
    return M;
}

//Return Value of N
int Matrix::getN() const
{
    return N;
}

//Return Section of the Matrix.
Matrix Matrix::getBlock(int startRow, int endRow, int startColumn, int endColumn)
{
    int Row = endRow-startRow;
    int Column =  endColumn - startColumn;
    double* block = new double[(Row)*(Column)];
    int n = endColumn-startColumn;
    for (int ii = startRow; ii < endRow; ii++)
    {
        for (int jj = startColumn; jj < endColumn; jj++)
        {
            int k = ii*n+jj;
            block[k] = data[ii*N+jj];
        }
    }
    Matrix t(Row,Column,block);
    delete [] block;
    return t;
}

//Allows for addion of Matricies, Operation Overloading.
Matrix Matrix::operator +(const Matrix& B)
{
    Matrix C = Matrix(M, N, 0);
    double temp;
    for (int ii = 0; ii < M; ii++)
    {
        for (int jj = 0; jj < N; jj++)
        {
            temp = data[ii*N+jj] + B.get(ii,jj);
            C.set(ii,jj, temp);
        }
    }

    return C;
}

//Makes x and y equal, Opperation Overloading.
Matrix Matrix::operator =(const Matrix& B)
{
    if (this == &B)
    {
        return *this;
    }

    else 
    {
        M = B.getM();
        N = B.getN();
        delete [] data;
        data = new double [M*N];
        for (int ii = 0; ii < M; ii++)
        {
            for (int jj = 0; jj < N; jj++)
            {
                data[ii*N+jj] = B.get(ii,jj);   
            }
        }
        return *this;
    }
}

//Allows for subtraction of matricies, Operation Overloading.
Matrix Matrix::operator -(const Matrix& B)
{
    Matrix C = Matrix(M, N);
    double temp;
    for (int ii = 0; ii < M-1; ii++)
    {
        for (int jj = 0; jj < N-1; jj++)
        {
            temp = data[ii*N+jj] - B.get(ii,jj);
            C.set(ii,jj, temp);
        }
    }

    return C;
}

//Allows for multiplication of Matricies, Operation Overloading.
Matrix Matrix::operator *(const Matrix& B)
{
    Matrix C = Matrix(M, B.getN());
    double temp;
    for (int ii = 0; ii < M; ii++)
    {
        for (int jj = 0; jj < N; jj++)
        {
            temp = data[ii*N+jj] * B.get(ii,jj);
            C.set(ii,jj, temp);
        }
    }

    return C;
}

//Allows for addition of Matricies, Operation Overloading.
Matrix Matrix::operator /(const Matrix& B)
{
    Matrix C = Matrix(M, B.getN(), 0);
    double temp;
    for (int ii = 0; ii < M; ii++)
    {
        for (int jj = 0; jj < N; jj++)
        {
            temp = data[ii*N+jj] / B.get(ii,jj);
            C.set(ii,jj, temp);
        }
    }

    return C;
}

//Incrmentation of all values in Matrix by 1, Operation Overloading.
Matrix Matrix::operator ++()
{
    for (int ii = 0; ii < M*N; ii++)
    {
        data[ii] = data[ii]++;
    }

    return *this;
}

//Allows calling of "get" function indirectly.
double Matrix::operator() (int i, int j)
{
    return data[i*N+j];
}

double Matrix::sum()
{
    double total = 0.0;
    for (int ii = 0; ii < M*N; ii++)
    {
        total = total + data[ii];
    }

    return total;
}

void Matrix::out()
{
    for (int ii = 0; ii < M*N; ii++)
    {
        if(data[ii] == 255)
            cout<<"1 ";
        else
        cout<<data[ii]<<" ";
    }
}

BinaryImage ::BinaryImage(int sizeR, int sizeC, double*input_data, double thresh)
    :Matrix(sizeR, sizeC, input_data)
{
    for(int ii = 0; ii < M*N; ii++)
    {
        if (data[ii] > thresh)
        {
            data[ii] = 1;
        }

        else 
        {
            data[ii] = 0;
        }
    }
}

BinaryImage::BinaryImage(const Matrix& rhs, double thresh)
    :Matrix(rhs)
{
    for(int ii = 0; ii < M*N; ii++)
    {
        if (data[ii] > thresh)
        {
            data[ii] = 1;
        }

        else 
        {
            data[ii] = 0;
        }
    }

}

BinaryImage::BinaryImage(const BinaryImage& rhs)
{
    M = rhs.getM();
    N = rhs.getN();
    data = new double[M*N];
    for (int ii = 0; ii<M; ii++){
        for (int jj = 0; jj<N; jj++){
            data[ii] = rhs.get(ii, jj);
        }
    }
}

const void BinaryImage::set(int i, int j, double& val)
{
    int k = i*N + j;
    val = data[k];
}

void shuffledLogo()
{
    char* filePath2 = "E:\\logo_shuffled.txt";
    double* basIm2 = readTXT(filePath2, 512, 512);
    Matrix logoWithNoise(512, 512, basIm2);
    cout<<"done"<<endl;

    //Reads in the Shuffled Image
    char* filePath = "E:\\logo_shuffled.txt";
    double* basIm = readTXT(filePath, 512, 512);
    Matrix logoShuffled(512, 512, basIm);
    cout<<"done"<<endl;

    Matrix logoUnshuffled(512,512);
    double Score = 0.0;                                                     //Current "Pixels" score
    double bestScore = 0.0;                                                     //Best "Pixel" score
    int bestX, bestY = 0;

    //For Loop to begin Sum of Squared Differences
    for (int x = 0; x < 480; x+=32)
    {   
        for (int y = 0; y < 480; y += 32)
        {
            Matrix subWithNoise = logoWithNoise.getBlock(x,(x+32),y,(y+32));
            //subShuffled.out();
            bestScore = 70000.0;
            for (int xx = 0; xx< 480; xx+=32)
            {
                for (int yy = 0; yy < 480; yy+=32)
                {
                    //Calculating the Score starts here
                    cout<<"loop started"<<endl;
                    int t = yy+32;
                    int l = xx+32;
                    Matrix subShuffled = logoShuffled.getBlock(xx,l, yy, t);
                    cout<<"submade"<<endl;
                    Matrix diff = subWithNoise - logoWithNoise;
                    Matrix product = diff*diff;
                    Score = diff.sum();
                    if (Score < bestScore)
                    {
                        bestScore = Score;
                        bestX = xx;
                        bestY = yy;
                    }
                    cout<<"loop ended"<<endl;
                }
            }

            //For loop to put the best option into the final Matrix
            for (int ii = bestX; ii < (bestX+=32); ii++)
            {
                for (int jj = bestY; jj < (bestY+=32); jj++)
                {
                    double temp = logoShuffled.get(ii,jj);
                    logoUnshuffled.set(ii,jj,temp);
                }
            }
        }
    }
    //Creates file
    char* newFile = "finished.pgm";
    writePGM(newFile, logoUnshuffled, 1);

}

//Reads in file and from specified location and builds it
double* readTXT(char* fileName, int sizeR, int sizeC)
{
    double* input_data = new double[sizeR*sizeC];
    int i =0;
    ifstream currentFile(fileName);
    if (currentFile.is_open())
    {
        while(currentFile.good())
        {
            if (i>sizeR*sizeC-1) break;
            currentFile >> *(input_data+i);
            i++;

        }
        currentFile.close();
    }
    else
    {
        cout<<"File path not found"<<endl;
    }

    return input_data;
    delete [] input_data;

}

void writePGM(char* fileName, Matrix& toWrite, int Q)
{
    int x = toWrite.getM();
    int y = toWrite.getN();
    unsigned char *image;
    ofstream myfile;

    image = (unsigned char *) new unsigned char [x*y];

    // convert the integer values to unsigned char

    for(int i = 0; i<x; i++)
    {
        for (int j = 0; j<y; j++)
        {
            image[i*y+j]=(unsigned char)toWrite.get(i,j);
        }
    }

    myfile.open(fileName, ios::out|ios::binary|ios::trunc);

    if (!myfile) 
    {
        cout << "Can't open file: " << fileName << endl;
        exit(1);
    }

    myfile << "P5" << endl;
    myfile << y << " " << x << endl;
    myfile << Q << endl;

    myfile.write( reinterpret_cast<char *>(image), (x*y)*sizeof(unsigned char));

    if (myfile.fail()) 
    {
        cout << "Can't write image " << fileName << endl;
        exit(0);
    }

    myfile.close();

    delete [] image;
} 
```

我冒昧地将我的文件夹放在公共保管箱文件中，以便大家查看是否希望更好地查看错误。我知道我的代码可能很混乱且显示效果不佳，所以如果有人对如何使它更好有任何建议，请说。

[Dropbox 对文件进行编程](https://www.dropbox.com/sh/f9gtfcdnwzvfkca/v8Olwgn6x4)

# java - 在java程序中创建实例时？

> ID：13787044
> 
> 赞同：1
> 
> 时间：2012-12-09T11:38:46.053
> 
> 标签：java, singleton, instance

我想为java编写单例类。我找到了一个示例程序，如下所示。

```
public class Singleton {
  private static Singleton singleton = new Singleton();

  private Singleton() {
    System.out.println("instance is created.");
  }

  public static Singleton getInstance() {
    return singleton;
  }
} 
```

要知道，构造函数是私有方法，不会被调用。

如何制作单例实例？

在java程序中创建实例时？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T11:58:44.733

正如 Joshua Bloch 在他的[Effective Java 2nd Edition](https://rads.stackoverflow.com/amzn/click/com/0321356683)书中所说，从 Java 5 开始，实现单例的最佳方法是使用枚举：

```
public enum Singleton {
    INSTANCE;
    // all the necessary methods go here
} 
```

这种单例实现模式有助于避免某些序列化/反序列化问题。有关详细信息，请参阅 Effective Java 2nd Edition 的第 3 项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T11:42:17.240

单例实例将在您第一次调用 Singleton.getInstance() 时创建。将加载该类，初始化单例变量，并由 getInstance() 方法返回。

# wordpress - 将 H1/H2 按钮添加到 Wordpress CMS 中的文本编辑器

> ID：13787050
> 
> 赞同：-1
> 
> 时间：2012-12-09T11:39:04.847
> 
> 标签：wordpress

如何在可视选项卡上 CMS 的文本编辑器上添加将文本格式化为 H1/H2 的选项，我需要按钮（我知道它在格式下拉列表下）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:26:16.807

你已经有了它们。查看“格式”下拉菜单 - 如下图所示：![在此处输入图像描述](../Images/d9f9a254f32df191d0c9650d1103ea7c.png)

您也可以按`Ctrl`+ `1`、`Ctrl`+ `1`、`Ctrl`+ `2`、`Ctrl`+ `3`、`Ctrl`+ `4`、`Ctrl`+`5`或`Ctrl`+`6`使标记的文本分别为`h1`、`h2`、`h3`、和`h4`，或者如果您没有标记任何文本以开始输入相应的标题标签。`h5``h6`

# actionscript-3 - ActionScript/Flex - 在静音时停止录制

> ID：13787068
> 
> 赞同：3
> 
> 时间：2012-12-09T11:42:09.330
> 
> 标签：actionscript-3, flash, apache-flex, microphone

有没有办法在有活动时开始录制（将样本数据写入 a `ByteArray`）（我所说的活动是指除了静音之外的任何东西），并在有一秒钟的静音时停止录制？

任何有关如何解决此问题的指南将不胜感激。

（抱歉，如果上述部分或全部听起来很愚蠢，这是我的第一个**ActionScript**应用程序；我正在构建它，因为我需要在 Web 应用程序中访问麦克风）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:12:33.070

其中`Microphone`有“silenceLevel”属性和“setSilenceLevel()”方法。此方法指定麦克风信号级别，之后调度活动事件。 [Microphone#setSilenceLevel() 方法参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html#setSilenceLevel%28%29)

# sockets - 如何查询文件描述符的套接字类型？

> ID：13787069
> 
> 赞同：1
> 
> 时间：2012-12-09T11:42:11.213
> 
> 标签：sockets, unix, file-descriptor

我有一个套接字文件描述符（由 fstat(2) 确认）。我可以使用getsockname(2) 来查询套接字系列：getsockname 填充sockaddr.sa_family 字段。但是如何查询套接字类型（socket(2) 的第二个参数）和协议（socket(2) 的第三个参数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:09:05.670

```
getsockopt(fd, SOL_SOCKET, SO_TYPE, ...)
getsockopt(fd, SOL_SOCKET, SO_PROTOCOL, ...) 
```

显然前者是由[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_socket.h.html)定义的，而后者可能是特定于 Linux 的。但我不知道是否有更便携的方式来获取套接字协议。

# selenium - selenium 无法找到元素，除非我将鼠标移到该元素上

> ID：13787080
> 
> 赞同：1
> 
> 时间：2012-12-09T11:44:05.253
> 
> 标签：selenium, selenium-rc

我正在使用 Selenium RC 自动化一些第三方站点，并面临上传文件按钮的一些问题。

该按钮出现在页面上，但 Selenium 无法找到并单击该元素。我试图等待该元素出现在页面上，所以在解决问题后，我知道如果我在等待该元素时手动将鼠标移到该按钮上，Selenium 会找到该元素。

这是我的代码片段。

```
public void testBox() throws Exception{
    selenium.setTimeout("10000000000");
    selenium.open("/files");
    selenium.click("id=login_button_credentials");
    selenium.waitForPageToLoad("150000");
    while(!selenium.isElementPresent("id=upload_split_arrow")) {
        Thread.sleep(10);
    }

    selenium.click("id=upload_split_arrow");
    while(!selenium.isElementPresent("id=upload_file1")) {
        Thread.sleep(10);
    }

    selenium.click("id=upload_file1");
    Thread.sleep(10000000);
} 
```

任何人都可以为此提出一些解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:38:10.600

在使用“点击”命令之前使用“焦点”。它可以达到目的。

```
 selenium.focus("id=upload_file1");
    selenium.click("id=upload_file1"); 
```

# css - 如何使索引在另一个上的 div 框不会阻止第二个的悬停属性？

> ID：13787082
> 
> 赞同：0
> 
> 时间：2012-12-09T11:44:19.590
> 
> 标签：css

好吧，我不会在我的问题中包含任何代码，

我有 3 个元素

第一个重叠（更高的索引）第二个和第二个重叠第三个..

第三个元素是一个菜单按钮，它必须在悬停时触发一个事件

但是第一个的大小阻止了第三个的悬停属性。

那么我怎样才能将第一个元素保留在更高的堆叠索引顺序上并拥有

第三个完全“可悬停”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:52:14.267

您可以`pointer-events: none;`在索引较高的 div 上使用：

```
<style type="text/css">
    div {
        position: absolute;
    }

    .over {
        z-index: 10;
        pointer-events: none;
        background: white;
    }

    .under:hover {
        height: 100px;
        background: red;
    }
</style>

<div class="over">Lorem Ipsum</div>
<div class="under">Dolor sit amet</div> 
```

**[现场示例](http://dabblet.com/gist/4244437)**

### 积分

*   这将使`.over`div 完全不可交互。您将无法在其上使用任何单击/悬停/任何事件。与鼠标无关。
*   IE 和 Opera 不支持。

# css - 使用引导程序悬停时切换到 glyphicons-white

> ID：13787083
> 
> 赞同：2
> 
> 时间：2012-12-09T11:44:21.727
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap, hover, glyphicons

引导程序指出

> 还有一些样式可用于倒置（白色）图标，并准备好一个额外的类。我们将专门针对导航和下拉链接的悬停和活动状态强制执行此类。

这似乎不适用于我的导航栏（为简单起见，省略了部分）。这是 div 链。

```
<div class="navbar navbar-inverse navbar-fixed-top ">
    <div class="navbar-inner ">
        <div class="container">
         <div class="nav-collapse collapse ">
           <ul class="nav" >
            <li><%= link_to content_tag(:i," ", :class=>"icon-envelope")+ " " +"Messages, messages_path %> </li> 
```

引导程序中的 CSS 代码是

```
.icon-white,
.nav-pills > .active > a > [class^="icon-"],
.nav-pills > .active > a > [class*=" icon-"],
.nav-list > .active > a > [class^="icon-"],
.nav-list > .active > a > [class*=" icon-"],
.navbar-inverse .nav > .active > a > [class^="icon-"],
.navbar-inverse .nav > .active > a > [class*=" icon-"],
.dropdown-menu > li > a:hover > [class^="icon-"],
.dropdown-menu > li > a:hover > [class*=" icon-"],
.dropdown-menu > .active > a > [class^="icon-"],
.dropdown-menu > .active > a > [class*=" icon-"],
.dropdown-submenu:hover > a > [class^="icon-"],
.dropdown-submenu:hover > a > [class*=" icon-"] {
  background-image: url(/assets/twitter/bootstrap/glyphicons-halflings-white.png);
} 
```

这个css代码确实发生了切换

```
.navbar-inverse .nav  a:hover [class^="icon-"],
.navbar-inverse .nav a:hover  [class*=" icon-"]{
        background-image: url(<%= asset_path "/assets/twitter/bootstrap/glyphicons-halflings-white.png" %>);

} 
```

我应该添加什么还是我错过了什么？为什么我的 css 可以工作，但 bootstrap 的代码却不行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:40:15.063

如果您只需要使用引导程序向图像添加一个类，我建议您使用 jQuery 在悬停时添加类并在 mouseOut 上删除类。如何？这是一个好方法：

```
 $("yourSelector").hover(
       function () {
         $(this).toggleClass('datWhiteClass');
       }, 
      function () {
          $(this).toggleClass('datWhiteClass');
       }
     ); 
```

在这种情况下，第一个函数是鼠标悬停时发生的事情，第二个函数是当悬停状态不再为真时发生的事情！希望它有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-02T16:58:52.047

您可以仅使用 css 以更简单的方式执行此操作。

```
<style>
#my-button:hover {
  background-color: #0000ff;
}
#my-button:hover span {
  color: #ffffff;
}
</style>

<button id="my-button">
    <span class="glyphicon glyphicon-pencil"></span>
</button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T17:34:02.603

添加一个具有不同颜色图标的类

```
.icon-teal {background-image: url("../images/icons/glyphicons-halflings-teal.png") !important;} 
```

然后使用 jQuery 切换 Class

```
$("div.row_action a").hover(
   function () {
    $(this).toggleClass('icon-teal');
   }, 
  function () {
     $(this).toggleClass('icon-teal');
   }
 ); 
```

# java - 单击按钮加载 JList

> ID：13787085
> 
> 赞同：0
> 
> 时间：2012-12-09T11:44:56.080
> 
> 标签：java, swing, jlist

我想`JList`在用户单击按钮时显示一个。这是我关于按钮单击事件的代码：

```
public void loadListBtnActionPerformed(java.awt.event.ActionEvent evt){
       JList myJList = new javax.swing.JList();
        myJList.setVisibleRowCount(10);
        jPanel7.add(myJList);
        jPanel7.revalidate();
        jPanel7.repaint();
} 
```

问题是它没有在按钮单击时显示任何列表。如何在按钮单击时添加列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:10:04.307

假设您使用默认`FlowLayout`的`jPanel7`（和`GroupLayout`布局`JFrame`），`JList`不会出现，因为它不包含任何元素，所以它的首选大小将是`0x0`.

要允许`JList`内容可滚动，您应该将其放在`JScrollPane`. 即使它最初是空的，这也会使它出现：

```
jPanel7.add(new JScrollPane(myJList)); 
```

# c++ - 这个 C++ 结构在做什么？

> ID：13787087
> 
> 赞同：0
> 
> 时间：2012-12-09T11:45:14.210
> 
> 标签：c++

最近阅读了一本关于 C++ 的书，它主要涵盖了类，我正在查看一些示例代码，并且对以下语句感到困惑：

```
struct SomeName* SomeOtherName(); 
```

我知道结构类似于一般架构中的类，所以当我看到上面的内容时，它实际上是指类类结构还是要返回结构的函数声明？（相反，返回一个指向结构的指针）

由于结构可以像类或可以是简单的数据结构，似乎在 C++ 中使用“结构”一词往往会导致很多混乱。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T11:46:32.933

> 或者这是一个将返回结构的函数声明？（相反，返回一个指向结构的指针）

对，这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:02:40.317

```
struct SomeName* SomeOtherName(); 
```

这是一个`SomeOtherName()`返回指向 a 的指针`*`的函数`struct SomeName`。

另请参阅[如何解释复杂的 C/C++ 声明](http://www.codeproject.com/Articles/7042/How-to-interpret-complex-C-C-declarations)或[“顺时针/螺旋规则”](http://c-faq.com/decl/spiral.anderson.html)。

# javascript - 动画引导轮播标题

> ID：13787088
> 
> 赞同：0
> 
> 时间：2012-12-09T11:45:18.280
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我想在[bootstrap-carousel.js](http://twitter.github.com/bootstrap/assets/js/bootstrap-carousel.js)中的 carousel-caption 上添加动画效果，这里有一个例子，它会在幻灯片更改时为 carousel-caption 元素设置动画

[http://jsfiddle.net/TuDWV/](http://jsfiddle.net/TuDWV/)（单击运行我在幻灯片更改时需要的效果）

这是我的实际轮播，我需要对 carousel-caption div 类中的 h1、p 和 href 标签产生这种效果。[http://jsfiddle.net/ww67B/](http://jsfiddle.net/ww67B/)

```
 <div class="carousel-caption">
      <h1>Example headline.</h1>
      <p class="lead">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
      <a class="btn btn-large btn-primary" href="#">Sign up today</a>
    </div> 
```

我尝试使用滑动或滑动选项来实现它，但它不会移动元素：

```
$('#myCarousel').bind('slid', function() {
    $(".carousel-caption h1").animate(
            {"left": "+=400px"},
            "slow");    
}); 
```

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:31:58.193

```
$('#myCarousel').bind('slid', function() {
    $(".carousel-caption h1").animate(
            {"left": "+=400px"},
            "slow");    
}); 
```

上面的效果很好，我只需要为我需要动画的所有元素设置 position: absolute 。

# jquery - 分页后功能不会执行

> ID：13787098
> 
> 赞同：0
> 
> 时间：2012-12-09T11:47:13.443
> 
> 标签：jquery, html, css, pagination

这是我正在做的项目。如果你点击[我网站](http://www.singhharmeet.com/akhileshsir/)上的博客，那么帖子就会显示出来。现在，如果您单击帖子，将显示该特定帖子的完整视图。但是，由于我在博客文章页面上应用了简单的分页，所以完整的文章视图只能在第一页上使用。以下是分页循环：

```
jQuery('#Pagination a').live('click', function(e) { //check when pagination link is clicked and stop its action.
    e.preventDefault();
    var link = jQuery(this).attr('href'); //Get the href attribute
    jQuery('#pcontent').fadeOut(500, function() { //fade out the content area
        jQuery("#loader").show(); // show the loader animation
    }).load(link + ' #pcontent', function() {
        jQuery("#loader").hide();
        jQuery('#pcontent').fadeIn(500, function() { //load data from the content area from paginator link page that we just get from the top
            //hide the loader
        });
    });
}); 
```

整页帖子视图是简单的 jquery show hide（隐藏其他所有内容并显示详细帖子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:53:22.223

好吧，我找不到能够快速加载完整帖子的 js 片段，但您可能已经将点击功能与 ie 绑定了。`click`or`bind`函数。但是当加载新的 ajax 内容时（使用分页），这些处理程序不会被附加。请改用`on`or`live`函数。

注意；您是否意识到屏幕高度较低（阅读：笔记本电脑）的用户因为没有滚动条而看不到分页？

# c++ - 默认模板函数参数中的 boost::shared_ptr 和 nullptr

> ID：13787103
> 
> 赞同：1
> 
> 时间：2012-12-09T11:48:53.830
> 
> 标签：c++, boost, c++11, shared-ptr

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T16:27:08.523

Boost::shared_ptr 从 1.53 版本开始支持 std::nullptr_t 的构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T11:55:57.993

这将适用于 std::shared_ptr 而不是 boost::shared_ptr 我认为

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T11:56:21.630

根据[http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_ptr.htm#Members](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_ptr.htm#Members)，`boost::shared_ptr`不能由空指针常量初始化，因为对于指针构造函数，它由`Y*`where `Y`is模板化模板参数。`Y*`推导时不考虑空指针常量到的转换`Y*`，因此构造函数会出现推导失败，传递时被忽略`nullptr`。

但是`std::shared_ptr`可以接受，因为它有`std::nullptr_t`过载，所以如果你愿意，你可以切换。

请注意，传递`nullptr`与传递空指针（如`(T*)nullptr`. 后者不会使用`constexpr`构造函数，但前者会（以及其他差异）。因此，在前一种情况下，如果您的指针是命名空间范围变量，它具有常量初始化，并且不会引发与其他翻译单元中的命名空间范围对象的初始化竞争。

# php - PHP 函数不获取参数

> ID：13787105
> 
> 赞同：0
> 
> 时间：2012-12-09T11:49:05.853
> 
> 标签：php, arguments

我仍然遇到此代码的问题。我需要将参数设置为函数，以便将其转换为 .mp3 文件。使用这一行：`$tts->setText($row['raspuns']);`不会发生任何事情，但如果我编写`$tts->setText("Hello World!");`它可以完美运行，这使我得出结论，我必须找到正确的代码才能使 tts 获取文本。任何人都可以帮助我吗？

```
<html>
    <head>
        <title>
            Bot
        </title>
        <link type="text/css" rel="stylesheet" href="main.css" />
    </head>
    <body>
        <form action="bot.php "method="post">
            <lable>You:<input type="text" name="intrebare"></lable>
            <input type="submit" name="introdu" value="Send">
        </form>
    </body>
</html>
<?php
mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("robo") or die(mysql_error());

$intrebare=$_POST['intrebare'];
$query = "SELECT * FROM dialog where intrebare = '$intrebare'"; 
$result = mysql_query($query) or die(mysql_error());
$row = $result;
?>

<?php
require "tts.php";
$tts = new TextToSpeech();
$tts->setText($row['raspuns']);
//$tts->setText("Hello World!");
$tts->saveToFile("voice.mp3");
$file='voice.mp3';
?>

<div id="history">
<?php       

    while (true == ($row = mysql_fetch_array($result))) {
    echo "<b>The robot says: </b><br />";
    echo $row['raspuns'];
    echo "<embed src =\"$file\" hidden=\"true\" autostart=\"true\"></embed>";
}
?>
</div> 
```

这是 tts.php 文件：

```
<?php
class TextToSpeech {
    public $mp3data;
    function __construct($text="") {
        $text = trim($text);
        if(!empty($text)) {
            $text = urlencode($text);
            $this->mp3data = file_get_contents("http://translate.google.com/translate_tts?tl=en&q={$text}");
        }
    }

    function setText($text) {
        $text = trim($text);
        if(!empty($text)) {
            $text = urlencode($text);
            $this->mp3data = file_get_contents("http://translate.google.com/translate_tts?tl=en&q={$text}");
            return  $this->mp3data;
        } else { return false; }
    }

    function saveToFile($filename) {
        $filename = trim($filename);
        if(!empty($filename)) {
            return file_put_contents($filename,$this->mp3data);
        } else { return false; }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:05:23.540

根据 mysql_query 的文档，

> 返回的结果资源应该传递给 mysql_fetch_array() 和其他处理结果表的函数，以访问返回的数据。

所以而不是

```
$row = $result; 
```

你应该有

```
$row = mysql_fetch_array($result); 
```

# css - 如何在 Firefox 17.0.1 中删除按钮轮廓

> ID：13787106
> 
> 赞同：2
> 
> 时间：2012-12-09T11:49:15.333
> 
> 标签：css, firefox, button, twitter-bootstrap, outline

出于美学原因（我知道这会影响可访问性）我想删除`outline`一些按钮，但在 Firefox 17.0.1 中我似乎找不到解决方法。

我尝试了[**这个热门问题**](https://stackoverflow.com/questions/71074/how-to-remove-firefoxs-dotted-outline-on-buttons-as-well-as-links)的答案，但没有一个有效。

这是一个带有按钮示例的 jsfiddle，[http://jsfiddle.net/t54JE/](http://jsfiddle.net/t54JE/)当您单击按钮时，您可以看到轮廓（当然使用 Firefox 17）。

或者这可能是 FF 的错误？他们不希望我们删除大纲？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:12:18.320

您链接的问题中的以下CSS完美地工作：

```
.btn:focus {
    outline: none;
} 
```

请参阅以下 JSFiddle 以了解实际的 CSS：http: [//jsfiddle.net/t54JE/12/](http://jsfiddle.net/t54JE/12/)

# git - 如何在提交之前查看对文件的更改？

> ID：13787109
> 
> 赞同：47
> 
> 时间：2012-12-09T11:49:54.737
> 
> 标签：git

我试过了`git commit -v`

```
ubuntu@ip:~/agile$ git commit -v
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   .htaccess
#
no changes added to commit (use "git add" and/or "git commit -a")
ubuntu@ip:~/agile$ 
```

但这只是告诉我`.htaccess`发生了变化，而不是发生了什么变化。我如何实现这一目标？

**更新：**在 Aptana Studio 中，您可以在提交任何内容*之前* 查看更改。所以回到我的问题，在你实际提交之前，必须有一种方法可以看到与原始状态的差异。也许有一个不同的命令。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-09T13:40:56.887

要查看跟踪文件中的所有差异但未暂存：

```
git diff 
```

或者

```
git diff path/to/a/given/file 
```

仅查看文件的差异。您还可以在项目的给定子目录中查看差异：

```
git diff path/to/a/dir/ 
```

如果您已使用 暂存更改`git add`，则可以查看已暂存的补丁

```
git diff --staged 
```

您还可以使用 指定路径`--staged`。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-12-09T11:57:10.027

确保您已经进行了一些更改。否则，`git commit -v`将向您显示与您发布的内容类似的块，但不执行任何操作。您可以使用 手动暂存更改`git add`，或者如果文件已经版本化，您可以使用`git commit -a -v`暂存和提交更改。

例如：

```
$ echo "more foo" >> foo.txt
$ git commit -v
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   foo.txt
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

暂存更改显示差异`git commit -v`：

```
:: git add foo.txt
:: GIT_EDITOR=cat git commit -v

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   foo.txt
#
diff --git a/foo.txt b/foo.txt
index 257cc56..a521556 100644
--- a/foo.txt
+++ b/foo.txt
@@ -1 +1,2 @@
 foo
+more foo
Aborting commit due to empty commit message. 
```

如果您只想查看差异而不提交，请使用`git diff`查看未暂存的更改，`git diff --cached`查看暂存的提交更改，或`git diff HEAD`查看工作树中暂存的和未暂存的更改。

**更新**：根据您的编辑，您真正想要的是`git diff`上面的衍生物。我不确定 Aptana Studio 是如何工作的。它可能不遵循典型的命令行 git 流。在命令行上，您将暂存更改，然后提交。上面的`git diff`命令是你用来检查这些变化的。我通常将它们别名为`git unstaged`, `git staged`, 并将`git both`其添加到我的`~/.gitconfig`:

```
[alias]
    # show difference between working tree and the index
    unstaged = diff

    # show difference between the HEAD and the index
    staged = diff --cached

    # show staged and unstaged changes (what would be committed with "git commit -a")
    both = diff HEAD 
```

# javascript - javascript函数未定义

> ID：13787110
> 
> 赞同：2
> 
> 时间：2012-12-09T11:49:56.027
> 
> 标签：javascript, html

我将名为“drawEverything()”的函数设置为运行 onload，但是该函数没有运行，并且我在 Firebug 中得到一个错误，提示“drawEverything 未定义”？问题是，我确实定义了它！

我用谷歌搜索了这个问题，大部分时间是由于某种语法错误造成的，但我仔细检查了一遍，找不到任何语法错误。

我的代码如下：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<link rel=stylesheet href="style.css" type="text/css">
</head>

<script type="text/javascript">

var new_x = 110;
var new_y = 150;
function drawEverything(){
    var temp_x = new_x;
    var temp_y = new_y;

    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    for (int i = 0; i < 5; i++){
        ctx.beginPath();
        ctx.arc(temp_x,temp_y,20,0,2*Math.PI);

        ctx.stroke();
        if ((i < 3) || (i == 4)){
            temp_x += 40;
        }
        else if (i == 3){
            temp_y += 20;
            temp_x -= 60;
        }
    }
}
</script>

<body onload = "drawEverything()">
<h1>Interactive Olympic Rings</h1>
<div id="container">
<canvas id="myCanvas" width="300" height="300"></canvas>
</div>

</body>
</html> 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T11:56:20.360

按顺序处理您的错误。后来的错误可能是早期错误的结果。

第一个错误（由萤火虫报告）：

```
SyntaxError: missing ; after for-loop initializer
[Break On This Error]   

for (int i = 0; i < 5; i++){ 
```

第二个错误：

```
ReferenceError: drawEverything is not defined 
```

由于函数定义中有编译时错误，因此在运行时未定义。

你`var`不想`int`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:30:12.277

你不能在这里使用 int 。在 JavaScript 中使用 var

# php - 检查未登录访问者唯一性的简单方法

> ID：13787111
> 
> 赞同：0
> 
> 时间：2012-12-09T11:50:06.857
> 
> 标签：php, unique, visitors

有没有办法知道，当用户访问我的网站时，如果他已经来了，而无需用户登录？我不需要它非常准确，但要在大多数情况下易于实现和工作。我想到了使用 IP 地址+用户代理组合。你怎么看待这件事 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T11:52:20.397

当然，这就是 cookie 的用途。Cookie 独立于身份验证。只需在首次访问您的页面时存储一个 cookie。每当一个请求带有一个已经存在的 cookie 时，您可以确定这不是第一次访问。

但是请注意，客户端可以删除或拒绝 cookie。此外，许多客户端会自动将 cookie 视为会话 cookie，因此在关闭浏览器时会自动删除 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T11:52:58.820

在每个用户访问您的网站时设置一个 cookie，如果客户有该 cookie，则表示他已经访问过您的网站，否则他没有，或者也可以通过 IP 进行检查

使用 Cookie 的快速脚本：

```
if(isset($_COOKIE["user_visited"]))
{
    //He has already visited you.
}else{
    //Set a new cookie.
    setcookie("user_visited","user");
} 
```

知识产权法

```
//Need to create a user_ip table for it and store everybodies ip(s) in it.
$user_ip    =   $_SERVER["REMOTE_ADDR"];
if(isset($user_ip)){
    $query  =   mysql_query("SELECT * FROM `user_ip` WHERE `ip`='$user_ip'");
    $count  =   mysql_num_rows($query);
    if($count > 0){
        //User already visited you
    }else{
        //He hasn't visited you.
        //Save his IP to know if he visit again.
        $query("INSERT INTO `user_ip` VALUES('$user_ip')");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T11:54:53.970

最简单的方法是使用 cookie。只需像这样添加cookie：

```
if ( !isset( $_COOKIE['visited'] ) {
    // user is newbie
    setcookie("visited", '1', time() + 365 * 3600); // set cookie for 1 year
} else {
    // user has already visited your site
} 
```

# reporting-services - ssrs 向下钻取报告隐藏父级

> ID：13787114
> 
> 赞同：0
> 
> 时间：2012-12-09T11:50:30.800
> 
> 标签：reporting-services, charts, report, drilldown, pie-chart

我正在使用饼图在 SSRS 中创建向下钻取报告。我已经深入到下一个图表，但是一旦孩子可见，我还需要隐藏父图表。我怎样才能做到这一点？请建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:39:55.440

您可以通过为报告设置一个参数并根据其值来实现这一点，一个图表将是可见的，而另一个图表将被隐藏和反转。请按照以下步骤操作：

1.  创建一个新报告并将其命名为 fe TestDrillDown 并添加两个图表并设置系列和数据字段

2.  在报表中添加一个新参数并将其值设置为-1（例如如果要将父图表之间的“年份”参数传递给明细图表，则将参数命名为“年份”）

3.  点击饼图中任意年份时设置“年份”参数的值：2.1。单击饼图，然后单击系列属性。2.2\. 转到操作选项卡，然后单击选项转到报告。2.3\. 选择与 TestDrillDown 2.4 相同的报告。单击添加按钮并添加参数名称：“年份”，并为值选择“年份”

4.  现在我们可以设置两个图表的可见性：3.1。点击图表属性 3.2。转到可见性选项卡 3.3。在基于显示和隐藏的表达式中放置：

    *   第一张图表：=IIF(Parameters!year.Value<0,false,true)
    *   对于第二张图表：=IIF(Parameters!year.Value>0,false,true)

现在，当您希望父图表再次可见时，只需将 year 参数设置回 -1。您可以查看此链接，该链接提供了您需要的类似解决方案，但隐藏父级除外，但您可以使用上面的可见性条件：http: [//bi-commonsolution.blogspot.ro/2012/05/drilldown-dashboard -in-ssrs.html](http://bi-commonsolution.blogspot.ro/2012/05/drilldown-dashboard-in-ssrs.html)

# android - 扫描号码库

> ID：13787115
> 
> 赞同：0
> 
> 时间：2012-12-09T11:50:30.870
> 
> 标签：android, android-camera, ocr, scanning

> **可能重复：**
> [Android OCR 库](https://stackoverflow.com/questions/4836136/android-ocr-library)

是否有任何用于扫描 android 号码的库？我有一个应用程序，您需要从一张票中输入 14 位长度的数字，然后单击“确定”按钮。现在我想让用户可以扫描票上的数字，应用程序将识别数字并将其放入应用程序。我不能使用 ZXing 因为它只用于扫描条形码图像，还有其他库吗？

# database - 处理大型结构化数据集

> ID：13787116
> 
> 赞同：4
> 
> 时间：2012-12-09T11:50:33.470
> 
> 标签：database, dataset, lisp, common-lisp

我要问的是一种方法，而不是具体的解决方案。我将从描述我认为具有挑战性的情况开始，然后继续这个问题。希望这样做更有意义。

我正在处理从自然语言中提取的数据。以后必须根据某种“知识库”分析这些数据（引用它是因为它不是真正的知识库，我稍后会谈到）。知识库很大，它的容量，到目前为止，理论上，但很快实际上将超过内存中存储的可能。我的两个担忧是：

*   将数据转移到数据库服务器将意味着速度降低一个因素......好吧，我不知道是什么因素，但它可能很容易达到几个数量级。即在位于内存中的运行时本地对象中查找一条数据的任务要快得多，然后查询数据库。

*   任何时候都不需要整个庞大的数据量。事实上，只使用了很小的一部分，所以，也许一些缓存可以帮助解决这个问题。我实际上希望有人已经面临这个问题并且缓存是正确的答案。

到目前为止，“知识库”只是一个复杂的数据结构，可以通过类似于使用某种查询语言查询数据库的方式来查询它。即它不是一个简单的按键操作查找值，它需要多个子查询来识别一个对象是否匹配给定的条件。

只是为了给你更具体的例子来说明我正在尝试做的事情。不像`langutils`，我正在尝试提出一个解析器，我称之为“预测解析器”，对不起，如果该术语已经被采用并且意味着其他内容:) 主要思想是，而不是将 POS 标签分配给单词，然后通过将一组规则应用于推断的信息来迭代地纠正原始假设，我试图以某种方式做到这一点，即给定特定的前缀，引擎将根据其“学习知识”生成延续。即假设知识库了解到前缀“我可以”几乎肯定后面跟着一个动词短语。所以解析器会假设动词短语并按原样解析它，除非它遇到错误。困难的部分是找到合适的前缀。不好的是，像“我会”和“你应该”这样的前缀将得到同等的优先级，即。e. 它们将按照相同的顺序（随机、字母顺序等）检查匹配。这个想法是，尽管在知识获取过程中，知识库将学习以这种方式存储和查找信息，最可能的前缀是首先查找，最初甚至不会加载最不可能的前缀。

这个概念有点类似于 CPU 缓存的工作原理。因此，如果我写的内容太长：我正在寻找一种数据结构，它的功能类似于 CPU 缓存，当前缓存的内容驻留在内存中，未缓存的内容存储在数据库中，或作为文件等。

PS。对不起我收集的标签。我觉得这并没有真正描述我的问题。如果您知道问题属于哪里，欢迎您对其进行调整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:05:00.317

如果我们只考虑这部分：

> 这个想法是，虽然在知识获取过程中，知识库将学习以这样的方式存储和查找信息，即首先查找最可能的前缀，而最不可能的前缀甚至最初都不会被加载。

那么，如果我理解正确的话，你正在处理处理 n-gram 的任务。在您的情况下，您没有对前缀施加任何明确的限制，可以假设通常合理的限制适用，并且这些限制是 4-5 个单词的 n-gram。有很多这样的 n-gram：从真实世界的语料库中，您可以轻松获得千兆字节的数据。但是，即使您将自己限制为仅 3 克，您仍然会获得至少几千兆字节，除非您执行一些巧妙的预处理，以某种方式将“好”的 n 克分开。（加上适当的平滑，这可能是一个可行的解决方案）。

除了大小之外，n-gram 的坏消息是它们是由[Zipf 定律](http://en.wikipedia.org/wiki/Zipf%27s_law)分布的，这基本上意味着缓存不会很有用。

所以，我只是将数据放入本地机器上的一些快速数据库中（也许是[dbm](http://en.wikipedia.org/wiki/Dbm)的一些变体）。如果你能把它全部放在内存中，也许 Memcached 或 Redis 会更快。

# android - Sqlite 和查询

> ID：13787119
> 
> 赞同：1
> 
> 时间：2012-12-09T11:51:16.343
> 
> 标签：android, eclipse, sqlite

我是安卓初学者。我正在尝试搜索整个数据库并找出“传入”数字是否在数据库中，如果它确实存在，则返回 true，如果不返回 false，

我的搜索代码包含在下面，但是即使我使用数据库中不存在的数字调用它，它也总是返回 true。

另外我是否应该使用 LIKE 进行搜索，因为有时传入的号码在城市代码内，例如 * *0060* *172214866 或 0172214866，.（incomingnumber 的类型是 String ）

在此先感谢您对英语使用不当感到抱歉

```
 public boolean searchnumber(String incomiingnumber) {
      boolean isit = false;
      Cursor c=ourdatabase.query(DATABASE_TABLE, new String[] 
         {ROW_ID,KEY_NUMBER,N_NAME},
              KEY_NUMBER + "=" + incomiingnumber
      ,null,null,null,null );
           if (c != null){
          while(c.moveToNext())           
      isit= true;  }
      else 
     {
      isit=false;
      Log.v(incomiingnumber, "IS NOT it");
     } 
     return isit;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:10:42.953

在您的查询之后使用 movetofirst() 并且没有必要使用 Like 语句它返回您的字符串的完全匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:52:26.657

我建议使用like，然后使用您需要比较的最小序列。试试这个：

```
public boolean searchnumber(String incomiingnumber) {
String args[] = { "%" + incomingnumber + "%" };
    Cursor c = ourdatabase.query(DATABASE_TABLE, new String[] { ROW_ID,
            KEY_NUMBER, N_NAME }, KEY_NUMBER + " LIKE ?", args,
            null, null, null);
    if (c != null) {
        c.moveToFirst();
        try {
            c.getString(1);
            c.close();
            return true;
        } catch (CursorIndexOutOfBoundsException e) {
            c.close();
            return false;
        }
    }
    return false;
} 
```

# python - 来自推特的语料库

> ID：13787122
> 
> 赞同：2
> 
> 时间：2012-12-09T11:51:40.287
> 
> 标签：python, twitter

作为开发人员，我是 Twitter 的新手。我看到有人可以使用推文的 ID 下载数据集。然而，twitter API 有下载限制。

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:05:32.073

如果您只想获取用户名的推文，可以这样做：

```
import httplib
import json
import urllib2
import pprint

def feed(username, messages=50):
    template = 'https://api.twitter.com/1/statuses/user_timeline.json?' + \
               'include_entities=false&include_rts=true&screen_name=%s&count=%i'
    url    = template % (username, messages)
    output = urllib2.urlopen(url)
    html   = ''.join(output.readlines())
    tweet  = json.loads(html)
    # pprint.pprint(tweet)
    return list(map(lambda t : t['text'], tweet))

result = feed('noelevans', messages=100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:45:47.503

即使您没有用户名，也可以这样做来获取一组推文：

```
import httplib
import json
import urllib2
import pprint

def feed(ids):
    result   = []
    template = 'https://api.twitter.com/1/statuses/show.json?id=%i&include_entities=true'
    for id in ids:
        url    = template % id
        output = urllib2.urlopen(url)
        html   = ''.join(output.readlines())
        tweet  = json.loads(html)
        # pprint.pprint(tweet)
        result.append(tweet['text'])
    return result

tweets = [277496833788489728, 276760134124969984]
result = feed(tweets) 
```

# ios - 如何从表中删除时间戳过期的事件

> ID：13787123
> 
> 赞同：0
> 
> 时间：2012-12-09T11:51:40.757
> 
> 标签：ios, uitableview, timestamp

```
-(void)SaveUserTimeStamp:(int)timepassed addusername:(NSString *)UsernameValue {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setInteger:timepassed forKey:@"timestamp"];
    [defaults setObject:UsernameValue forKey:@"Username"];

    [defaults synchronize];
   } 
```

大家好，我在 tableview 中有我的事件列表，当这个事件的时间到期时，我需要从表中删除事件。我像这样在 NSUserDefaults 中保存我的时间戳。我在我的事件列表中调用我的这个函数，如下所示：

```
[defaults SaveUserTimeStamp:[events.expiration intValue] addusername:events.name]; 
```

所以，我不知道如何控制它。当时间到期时，我该如何检查并从 tableview 中删除。任何想法？

预先感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:12:37.397

您需要从存储它们的任何数据源中删除事件（我猜您在某处有一个包含事件的数组或字典）。然后使用`[tableView reloadData]`，它们应该消失了。

如何检查事件是否已过期取决于您需要多久检查一次。您可以安排[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)来检查事件何时过期，但您也可以有一个按钮（或在 ios6 中为[UIRefreshControl](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIRefreshControl_class/Reference/Reference.html#//apple_ref/doc/c_ref/UIRefreshControl)）让用户刷新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:57:28.857

您可以在时间过去时执行[本地通知以执行某些操作。](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

# php - 嵌套的 foreach 循环不起作用

> ID：13787129
> 
> 赞同：0
> 
> 时间：2012-12-09T11:52:39.377
> 
> 标签：php, arrays, foreach

我有以下代码：

```
foreach($RSS_DOC->channel->item as $RSSitem) {

    $item_id    = md5(str_replace(array('\'', '"'), '', $RSSitem->title));
    $fetch_date = date("Y-m-j G:i:s"); //NOTE: we don't use a DB SQL function so its database independant
    $item_title = str_replace(array('\'', '"', '(', ')', ' - ', '.'), '', $RSSitem->title); 
    $item_date  = date("Y-m-j G:i:s", strtotime($RSSitem->pubDate));
    $item_url   = $RSSitem->link;

    $words = explode(' ', $item_title);

    echo "Processing item '" , $item_id , "' on " , $fetch_date     , "<br/>";
    echo $item_title, " - ";
    echo $item_date, "<br/>";
    echo $item_url, "<br/>";

    // Does record already exist? Only insert if new item...

    $item_exists_sql = "SELECT item_id FROM rssingest where item_id = '" . $item_id . "'";
    $item_exists = mysql_query($item_exists_sql, $db);
    if(mysql_num_rows($item_exists) < 1) {

        echo "<font color=green>Inserting new item..</font><br/>";
        $item_insert_sql = "INSERT INTO rssingest(item_id, feed_url, item_title, item_date, item_url, fetch_date) VALUES ('" . $item_id . "', '" . $feed_url . "', '" . $item_title . "', '" . $item_date . "', '" . $item_url . "', '" . $fetch_date . "')";
        $insert_item = mysql_query($item_insert_sql, $db);

        foreach ($words as $value) {

            $word_exists_sql = "SELECT id FROM words WHERE word = '" . $value . "'";
            $word_exists = mysql_query($word_exists_sql, $db);

            if (mysql_num_rows($word_exists) < 1) {
                $word_insert_sql = "INSERT INTO words(word, count) VALUES ('" . $value . "', '1')";
                $insert_word = mysql_query($word_insert_sql, $db);
                echo "<font color=green>Inserting word ".$value."..</font><br/>";

            } else {
                $word_update_sql = "UPDATE words SET count = count+1 WHERE word = '" . $value . "'";
                $update_word = mysql_query($word_update_sql, $db);
                echo "<font color=green>Updating count for word ".$value."..</font><br/>";
            }
        }

    } else {
        echo "<font color=blue>Not inserting existing item..</font><br/>";
    }

    echo "<br/>";
} 
```

第一个 foreach 按预期工作，第二个只在 DB 中插入第一个 rss 项的第一个单词，即使其余单词的 echo 显示正确。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:57:19.833

```
$word_insert_sql = "INSERT INTO words(word, count) VALUES ('" . $value . "', count+1)"; 
```

那到底`count + 1`应该是从哪里来的。当然应该只是`1`。

在任何情况下，如果您尝试进行数据库操作，通常最好在继续之前检查它们是否有效。

# linux - 使用 Qt4 在后台运行 gnuplot

> ID：13787135
> 
> 赞同：1
> 
> 时间：2012-12-09T11:53:19.850
> 
> 标签：linux, background, qt4, gnuplot, system-calls

我尝试了[这个线程](https://stackoverflow.com/questions/424455/c-and-gnuplot)中提出的解决方案，用于在使用 Qt4 作为配置界面的程序中绘制一些模拟结果。问题是为了不阻止主要结果出现在文本区域中，我必须在后台调用 gnuplot。为此，我使用： `system("gnuplot plotCmdFile.txt &");`. 在我放入最后一行的文本文件`pause -1`中，但它没有帮助，gnuplot 的窗口立即关闭。如果我不在后台运行 gnuplot，程序会在显示绘图窗口后阻塞。有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:56:32.797

打开`gnuplot`with`QProcess`而不是`system().`Use `writeLine(),` `readLine()`to interact with `gnuplot`。这与您打开终端并输入命令相同。

# ruby - 在 Ruby 中按组名用分组正则表达式替换

> ID：13787141
> 
> 赞同：2
> 
> 时间：2012-12-09T11:53:37.137
> 
> 标签：ruby, regex

有没有办法在 Ruby 中按组名使用分组正则表达式进行替换？

这是我到目前为止所得到的（但你会看到它缺少一些有价值的上下文，在非常常见的情况下渲染是无用的）：

```
class String

    def scan_in_groups( regexp )
        raise ArgumentError, 'Regexp does not contain any names.' if regexp.names.empty?

        captures = regexp.names.inject( {} ){ |h, n| h[n] = []; h }

        scan( regexp ).each do |match|
            captures.keys.zip( match ).each do |group, gmatch|
                next if !gmatch
                captures[group] << gmatch
            end
        end

        captures.reject { |_, v| v.empty? }
    end

    def sub_in_groups( regexp, group_hash )
        dup.sub_in_groups!( regexp, group_hash )
    end

    def sub_in_groups!( regexp, group_hash )
        scan_in_groups( regexp ).each do |name, value|
            next if !group_hash[name]
            sub!( value.first, group_hash[name] )
        end
        self
    end

end

regexp = /
    \/(?<category>\w+)         # matches category type
    \/                         # path separator
    (?<book-id>\d+)            # matches book ID numbers
    \/                         # path separator
    .*                         # irrelevant
    \/                         # path separator
    chapter-(?<chapter-id>\d+) # matches chapter ID numbers
    \/                         # path separator
    stuff(?<stuff-id>\d+)      # matches stuff ID numbers
/x

path = '/book/12/blahahaha/test/chapter-3/stuff4/12'

p path.scan_in_groups( regexp )
#=> {"category"=>["book"], "book-id"=>["12"], "chapter-id"=>["3"], "stuff-id"=>["4"]}

update = {
    'category'   => 'new-category',
    'book-id'    => 'new-book-id',
    'chapter-id' => 'new-chapter-id',
    'stuff-id'   => '-new-stuff-id'
}

p path.sub_in_groups( regexp, update )
#=> "/new-category/new-book-id/blahahaha/test/chapter-new-chapter-id/stuff-new-stuff-id/12"

p '/12/book/12/blahahaha/test/chapter-3/stuff4/12'.sub_in_groups( regexp, update )
#=> /new-book-id/new-category/12/blahahaha/test/chapter-new-chapter-id/stuff-new-stuff-id/12 
```

我需要的是一种解决方案，它保留正则表达式匹配的上下文并直接替换它们，以便最终结果是：

`#=> /12/new-category/new-book-id/blahahaha/test/chapter-new-chapter-id/stuff-new-stuff-id/12`

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:48:10.657

要改的词是一样的吗？

```
replacements = [ ["category", "new-category"], ["book-id", "new-book-id"], ["chapter-id", "new-chapter-id"], ["stuff-id", "-new-stuff-id"] ]
replacements.each {|replacement| str.gsub!(replacement[0], replacement[1])} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:12:50.453

一种方法是这样的

```
def substitute!(regexp, string,updates)
  if match = regexp.match(string)
    keys_in_order = updates.keys.sort_by {|k| match.offset(k)}.reverse
    keys_in_order.each do |k|
      offsets_for_group = match.offset(k)
      string[offsets_for_group.first...offsets_for_group.last] = updates[k]
    end
  end
end 
```

这会修改字符串。

当您拥有匹配数据时，然后`match.offset(capture_name)`返回该组的开始和结束偏移量，然后此代码将使用它来进行更新。您需要先从字符串的末尾进行替换，这样它们就不会移动偏移量。

如果您只需要更改一组，则可以

```
x = "/foo/bar/baz"
x[/(?<group>bar)/, 'group'] = 'new'
# x is now '/foo/bar/baz' 
```

# c# - 如何检查当前正在使用的组件

> ID：13787143
> 
> 赞同：0
> 
> 时间：2012-12-09T11:54:13.830
> 
> 标签：c#, installation, vsto, .net-assembly

我正在从事 VSTO 项目。在卸载时我想检测vsto项目的程序集是否正在使用中？因为如果正在使用程序集，我想停止卸载操作。

我正在使用 Installer 类在卸载时执行我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:56:35.633

在您的情况下，我认为您可以重用我不久前为我的 Excel VSTO 插件项目编写的以下自定义函数。将其粘贴在您的 Installer 类中，并在`Uninstall`事件处理程序中调用它。

```
Process[] xlProc;
public bool isExcelRunning()
    {
        try
        {
            xlProc = Process.GetProcessesByName("excel");
            if (xlProc.Length > 0)
            {
                logEvents("A running instance of Excel has been detected. The installation is stopping.");
                return true;
            }
        }
        catch { }
        return false;
    } 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:57:33.237

您可以使用此代码检查特定程序集是否已加载。

```
using System;
using System.Runtime.InteropServices;

namespace ConsoleTestAssembly
{
    class Program
    {
        static void Main()
        {
            string response;

            var exist = AssemblyExist("Camelot.SharePointConnector", out response);
            Console.WriteLine(string.Concat(exist, Environment.NewLine, response,  Environment.NewLine));

            exist = AssemblyExist("Camelot.SharePointIntegration", out response);
            Console.WriteLine(string.Concat(exist, Environment.NewLine, response, Environment.NewLine));

            exist = AssemblyExist("Camelot.NoExisting", out response);
            Console.WriteLine(string.Concat(exist, Environment.NewLine, response, Environment.NewLine));

            Console.ReadKey();
        }

        public static bool AssemblyExist(string assemblyname, out string response)
        {
            try
            {
                response = QueryAssemblyInfo(assemblyname);
                return true;
            }
            catch (System.IO.FileNotFoundException e)
            {
                response = e.Message;
                return false;
            }
        }

        // If assemblyName is not fully qualified, a random matching may be 
        public static String QueryAssemblyInfo(string assemblyName)
        {
            var assembyInfo = new AssemblyInfo {cchBuf = 512};
            assembyInfo.currentAssemblyPath = new String('', assembyInfo.cchBuf);

            IAssemblyCache assemblyCache;

            // Get IAssemblyCache pointer
            var hr = GacApi.CreateAssemblyCache(out assemblyCache, 0);
            if (hr == IntPtr.Zero)
            {
                hr = assemblyCache.QueryAssemblyInfo(1, assemblyName, ref assembyInfo);
                if (hr != IntPtr.Zero)
                {
                    Marshal.ThrowExceptionForHR(hr.ToInt32());
                }
             }
             else
             {
                 Marshal.ThrowExceptionForHR(hr.ToInt32());
             }

             return assembyInfo.currentAssemblyPath;
        }
    }

    internal class GacApi
    {
        [DllImport("fusion.dll")]
        internal static extern IntPtr CreateAssemblyCache(
            out IAssemblyCache ppAsmCache, int reserved);
    } 

    // GAC Interfaces - IAssemblyCache. As a sample, non used vtable entries 
    [ComImport, InterfaceType(ComInterfaceType.InterfaceIsIUnknown),
    Guid("e707dcde-d1cd-11d2-bab9-00c04f8eceae")]
    internal interface IAssemblyCache
    {
        int Dummy1();
        [PreserveSig()]
        IntPtr QueryAssemblyInfo(
            int flags,
            [MarshalAs(UnmanagedType.LPWStr)]
            String assemblyName,
            ref AssemblyInfo assemblyInfo);

        int Dummy2();
        int Dummy3();
        int Dummy4();
    }

    [StructLayout(LayoutKind.Sequential)]
    internal struct AssemblyInfo
    {
        public int cbAssemblyInfo;
        public int assemblyFlags;
        public long assemblySizeInKB;

        [MarshalAs(UnmanagedType.LPWStr)]
        public String currentAssemblyPath;

        public int cchBuf;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T16:18:41.077

我习惯于跟踪以确定进程/程序集是否正在运行：

使用 System.Diagnostics.Process；

```
 Process[] processlist = Process.GetProcessesByName("Yourassemblyname"); 
```

或者

```
 Process[] processlist = Process.GetProcesses(); 
```

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

# c# - 使用 FQL 保存分数

> ID：13787148
> 
> 赞同：1
> 
> 时间：2012-12-09T11:54:49.300
> 
> 标签：c#, facebook, facebook-graph-api, facebook-fql

我点击了[这个页面](https://developers.facebook.com/docs/scores/)，它解释了如何使用 Graph API 来保存和读取分数。

但是，我在任何地方都没有在 FQL 文档中找到等价物。这在 FQL 中是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:46:51.733

不，基于 FQL 的评分工具不可用。

# actionscript-3 - hitTestPoint() shapeFlag 不适用于包含已加载 swf 的电影剪辑

> ID：13787156
> 
> 赞同：0
> 
> 时间：2012-12-09T11:55:26.920
> 
> 标签：actionscript-3, flash, actionscript

我有一个 .swf 文件，其中包含我从 URL 加载的圆圈，制作成影片剪辑并将其添加到舞台。

我希望能够检测到用户何时将光标放在圆圈上。我希望它在某种意义上是准确的，它不仅仅使用圆的边界框，而是使用实际的圆本身来检测碰撞。这是我当前代码的片段：

```
 //
    var myCircle:MyCircle = new MyCircle(swf);
    myCircle.addEventListener(MouseEvent.MOUSE_MOVE, onMouseMove);
    myContainer.addChild(myCircle);
    //

    private function onMouseMove(event:MouseEvent):void
    {
        var glowFilter:GlowFilter = new GlowFilter();
        glowFilter.color = 0xffffff;
        if (event.currentTarget is MyCircle) {
            var object:MyCircle = event.currentTarget as MyCircle;
            if(object.hitTestPoint(event.stageX, event.stageY, true))
                event.currentTarget.filters = [glowFilter]; 
            else
                event.currentTarget.filters = []; 
        }
    } 
```

我被引导相信该方法的`shapeFlag`参数`hitTestPoint()`会执行此操作，但是将其设置为 true 或 false 没有区别。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:03:46.777

我早些时候写了一篇非常简短的博客文章，所以我有它以备将来使用......

好像您正在查看 AFAIK 是对象的全局 x 坐标的 stageX。

[http://messer1024.blogspot.se/2012/06/proper-hittest-in-as3.html](http://messer1024.blogspot.se/2012/06/proper-hittest-in-as3.html)

简短帖子的简短版本：

在 AS3 中处理命中测试的许多丑陋尝试之后，我终于设法解决了我正在寻找的问题。我忘记考虑的是使用全局鼠标坐标。

```
public function hitTestMouse(hitarea:DisplayObject):Boolean {
    return hitarea.hitTestPoint(hitarea.stage.mouseX, hitarea.stage.mouseY, true);
} 
```

最后一个参数 (shapeFlag) 将决定是否检查点击测试是否检查鼠标悬停在点击区域内的任何实际形状。

* * *

所以为了让你的东西正常工作，你可能应该让它更容易一些并添加我的函数，然后在你想测试它时运行“hitTestMouse（myCircle）”

# jquery - IE9 中的阴影滞后动画

> ID：13787160
> 
> 赞同：0
> 
> 时间：2012-12-09T11:55:51.510
> 
> 标签：jquery, html, css

我刚刚完成了在我的网页中的一个 DIV 下方制作阴影，我一直在 IE9 中进行测试，
通过使用以下 CSS：

```
#test  
 { 
 filter: 
 progid:DXImageTransform.Microsoft.Shadow(color=black,direction=180,strength=3);     
 } 
```

完成此操作后，我页面中的 Jquery 动画似乎滞后了。
即使我尝试提高 Jquery 中的动画速度，问题仍然存在。
仅当我在我的 css 中删除上述代码时，才会停止滞后。

有什么线索可以解决这个问题。？

# c++ - 构造对象时的奇怪行为（在 C++ 中）

> ID：13787162
> 
> 赞同：0
> 
> 时间：2012-12-09T11:55:58.430
> 
> 标签：c++, object

再一次（可能是微不足道的）问题让我发疯了。我刚刚花了 4 个小时试图找出正在发生的事情，但没有成功。这就是为什么我再次向社区寻求帮助的原因。

在阅读了初步答案并进行了更多调试后，我不得不编辑问题：

```
class A{ 
  friend class B;
  int someMember;
  void setA(some paremeters);
};

class B{
  public: 
    A someA;
    B(some parameters){
        someA.setA(some parameters);
        std::cout<<someA.someMemeber; 
    }
}; 
```

使用调试器向我展示了 someA.setA(some parameters) 实际上做了它应该做的事情——它将正确的值分配给 A 的成员。在离开 A 之后，分配的值似乎超出了范围，因此 someA.someMember 输出了某事。像 -9.345345e+ 等 - 意味着该成员尚未初始化，尽管我实际检查过并且 someMemer 被赋予了正确的值。

有没有人遇到过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:58:33.250

的错误实现`seta`或`geta`很容易导致这种情况发生 - 假设您的意思是`void printa(){cout<<someA.geta();}`而不是`void printa(){cout<<A.geta();}`.

例如，`seta`实际上并不设置成员。它可能是空的，或者一个简单的新手错误可能是：

```
void seta(int x)
{
   int a = x;  //doesn't set the member, but a local variable
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:00:57.687

您`int ina`用作 的构造函数参数`B`。但在里面，你使用`someA.seta(a);`设置字段值。

但是你真正想要使用的是`someA.seta(ina);`为了使用构造函数参数值来初始化'a'。

# html - 如何突破沙盒 iFrame？

> ID：13787167
> 
> 赞同：8
> 
> 时间：2012-12-09T11:56:48.620
> 
> 标签：html, google-chrome, iframe, safari, sandbox

## 1\. 什么问题？

[如果未设置标志，则在 HTML5 规范中为iFrame](http://dev.w3.org/html5/spec/single-page.html#the-iframe-element)元素添加的[`sandbox`](http://dev.w3.org/html5/spec/single-page.html#attr-iframe-sandbox)属性会在[现代浏览器](http://caniuse.com/iframe-sandbox)（使用当前版本的 Chrome 和 Safari 测试）中呈现任何帧中断/破坏/杀死方法 null ，即使标志和存在。[`allow-top-navigation`](http://dev.w3.org/html5/spec/single-page.html#sandboxed-top-level-navigation-browsing-context-flag)[`allow-forms`](http://dev.w3.org/html5/spec/single-page.html#attr-iframe-sandbox-allow-forms)[`allow-scripts`](http://dev.w3.org/html5/spec/single-page.html#attr-iframe-sandbox-allow-scripts)

## 2\. 我尝试了什么？

*   任何 JavaScript 方法，例如`if(top != self) top.location.replace(location);`

*   `target="_top"`在具有属性的表单上触发提交事件

*   `target="_top"`在具有属性的锚元素上触发点击事件。实际上，具有`target="_top"`属性的锚元素被渲染为无用。因此，建议用户采取行动的好消息也不起作用（如此[Flickr iFrame 示例所示](http://jsfiddle.net/Shef/HEaan/)）。

## 3\. 我想达到什么目的？

我想要一种方法来打破现代浏览器上的框架，这些浏览器已经实现了`sandbox`带有标志`allow-forms`和`allow-scripts`存在的 iFrames 的属性？

*似乎他们刚刚为所有具有此属性的黑帽提供了拼图的缺失部分。*

## 4\. 我不是在寻找什么？

我正在寻找一种解决方案，它将打破框架。不是一个解决方案，它不会在框架内显示站点（例如[`X-Frame-Options`响应头](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)）或使用 CSS 来隐藏正文等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T00:53:21.143

恐怕您找不到解决方案，因为沙盒的重点是您无法摆脱它。

如果有黑客入侵，供应商会将其归类为安全问题并迅速修补。

# android - ScrollView 必须只包含 1 个直接子异常

> ID：13787168
> 
> 赞同：0
> 
> 时间：2012-12-09T11:56:59.520
> 
> 标签：android, android-fragments, scrollview, illegalstateexception

我得到了例外：

```
java.lang.IllegalStateException: ScrollView can host only one direct child 
```

这是我的布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/bg_listgrey"
    android:scrollbars="none" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/bg_listgrey" >

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@+id/rl1">

            <ImageView
               />

            <TextView
                />

            <TextView
               />

            <TextView
                />
        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@+id/rl2"" >

            <ImageView
                 />

            <TextView
                 />
        </RelativeLayout>
    </RelativeLayout>

</ScrollView> 
```

在 Activity 的情况下，相同的布局可以正常工作。因为它在**Fragment**中使用时会给出异常。

**主要活动：**

```
FragmentTransaction t = this.getSupportFragmentManager()
        .beginTransaction();
t.add(R.id.frame, new mFragment());
t.commit(); 
```

谢谢

**编辑：**

如果我将此 ScrollView 包装在 FragmeLayout 中，它可以正常工作。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/bg_listgrey" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scrollbars="none" >
.......
.......
.......
</ScrollView>
</FramLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:21:30.250

> 在 Activity 的情况下，相同的布局可以正常工作。在片段中使用时它会给出异常。

布局将作为 an 的内容视图正常工作`Activity`（但尝试向 the 添加另一个视图`ScrollView`并查看它的运行情况；））并且它也适用于 a `Fragment`，只是你没有很好地使用它。这：

```
t.add(R.id.frame, new mFragment()); 
```

会将`Fragment's`视图（在 中创建的`onCreate`）添加到`ScrollView`（`ScrollView`具有 id 的`R.id.frame`），这意味着您将在`ScrollView`（不允许的）中有两个视图：`RelativeLayout`和视图的根`Fragment`。该类的`addView`方法`ScrollView`将检查以强制您最终在`ScrollView`.

> 如果我将此 ScrollView 包装在 FragmeLayout 中，它可以正常工作。

这是正常的，因为您将`Fragment`的视图添加到父级`FrameLayout`而不是`ScrollView`.

# mysql - SQL 如何对匹配值的数据进行分组？

> ID：13787176
> 
> 赞同：1
> 
> 时间：2012-12-09T11:57:27.057
> 
> 标签：mysql

我正在尝试重新使用针对此数据范围的查询...基本上我正在尝试获取有关“价值”邀请了多少人的信息。人们在注册时将这些信息放入他们的个人资料中，我想把它找出来。我不知道我在做什么 ：）。

我希望有人可以看看并告诉我我做错了什么，我知道这可能是整个查询哈哈。

我得到的错误是：*#1064 - 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'END) 附近使用的正确语法作为 noone，count(CASE WHEN `variable`= 'invited' AND 'value' = 'noone'' at line 2*。

```
 select
     count(CASE WHEN `variable` = `invited` AND `value` = `no one` END) as noone,
     count(CASE WHEN `variable` = `invited` AND `value` = `noone` END) as noone,
     count(CASE WHEN `variable` = `invited` AND `value` = `bunny` END) as bunny,
     count(CASE WHEN `variable` = `invited` AND `value` = `jade` END) as bunny,
     count(CASE WHEN `variable` = `invited` AND `value` = `bunnyrabbitsex` END) as bunnyrabbitsex,
     count(CASE WHEN `variable` = `invited` AND `value` = `google` END) as google,
     count(CASE WHEN `variable` = `invited` AND `value` = `twitter` END) as twitter,
     count(CASE WHEN `variable` = `invited` AND `value` = `plurk` END) as plurk,
     count(CASE WHEN `variable` = `invited` AND `value` = `facebook` END) as facebook,
     count(CASE WHEN `variable` = `invited` AND `value` = `advertisement` END) as advertisement,
from
    smf_themes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:01:06.593

```
select
  value, 
  count(*)
from
 smf_themes
where 
  variable = 'invited'
group by
  value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:08:20.863

你可能需要这样的东西：

[做一个计数 MySQL 查询？](https://stackoverflow.com/questions/1482115/doing-a-count-mysql-query)

```
SELECT
count(CASE WHEN `variable` = `invited` AND `value` = `no one`  
           THEN 1 
           ELSE NULL END) as noone,
......
FROM smf_themes 
```

# c# - 将对象添加到没有 SaveChanges 的 Context EntityFramework 4

> ID：13787180
> 
> 赞同：3
> 
> 时间：2012-12-09T11:58:11.923
> 
> 标签：c#, entity-framework-4, datacontext

当我使用时，有没有办法在不提交更改的情况下将对象添加到 de dataContext

```
ctx.Articles.AddObject(newart); 
```

`newart` **不会出现**在上下文中`ctx`，我能够做到这一点的唯一方法是`ctx.SaveChanges`保存更改，不幸的是，将更改保存到数据库，我不想这样做，有没有办法做到这一点，任何帮助都会被*赞赏*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:04:28.460

**可以在 EF4 中工作**

您应该能够通过`ObjectStateManager`您的`ObjectContext`喜欢获取所有当前跟踪的对象

```
var articles = ctx.ObjectStateManager
                    // Get all entries for added/changed/modified entities
                    .GetObjectStateEntries(EntityState.Added |
                                           EntityState.Unchanged |
                                           EntityState.Modified)
                    // select the entity objects from the entries
                    .Select(entry=>entry.Entity)
                    // we're only interested in Article objects
                    .OfType<Article>(); 
```

*注意*：由于我尚未安装 EF4，因此无法验证此解决方案。但我记得前段时间我成功地做到了这一点:)。但是，当处理非常大的对象集时，它可能不是很高效......

**适用于 EF 5**

您可以使用类的[`Local`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.local%28v=vs.103%29.aspx)属性`DbSet`。此属性表示当前由 Context 跟踪的对象（即当前加载和/或本地添加但未删除的所有对象）。访问该`Local`属性永远不会进行数据库查询。

因此，您可以使用`ctx.Articles.Local`并获取包含您的`newart`对象的数据集（以及先前查询加载的任何对象）

# c++ - 如何向创建对象的类发送消息

> ID：13787181
> 
> 赞同：0
> 
> 时间：2012-12-09T11:58:14.873
> 
> 标签：c++, winapi, events, event-handling, callback

我想将数据发送回创建此对象的类。

是游戏相关的。敌人物体具有线程功能，并在场景中自行移动。

如果将创建对象的类中的头文件包含到对象本身中，则会产生很多错误……以传递指针。

敌人等级：

```
Class Enemy
{
   private:
      void (*iChange)(DWORD &);
}:
Enemy::Enemy(void (*iChangeHandler)(DWORD &) ) : iChange(0)
{
    this->iChange = iChangeHandler;
}
    void Enemy::Draw(D3DGraphics& gfx)
{
    this->iChange(this->dwThreadID); // send a message back to the class that created me

    gfx.PutPixel(this->my_position_x + 0,this->my_position_y,this->red,this->blue,this->green);
    this->grafix->DrawCircle(this->my_position_x + 0,this->my_position_y, this->radius, this->red,this->blue,this->green);

    (sprintf)( this->enemy_buffer, "X: %d, Y: %d", this->my_position_x , this->my_position_y);
    this->grafix->DrawString( this->enemy_buffer, this->my_position_x , this->my_position_y, &fixedSys, D3DCOLOR_XRGB(255, 0, 0) );
} 
```

游戏类：

```
struct enemies_array_ARRAY {
        std::string name;
        DWORD ID;
        Enemy* enemy;
    } enemies_array[25];

void Game::EnemyEvent(DWORD &thread_id)
{   
     enemies_array[0]...... // i want to acces this struct array
}

Game::Game(HWND hWnd)
{
    enemies_array[0].name = "john Doe";
    enemies_array[0].ID = NULL;
    enemies_array[0].enemy =  new Enemy(&Game::EnemyEvent);   
    // error: C2664:

    // another attemp
    enemies_array[0].name = "john Doe";
    enemies_array[0].ID = NULL;
    enemies_array[0].enemy =  new Enemy(Game::EnemyEvent);
    // error C3867: 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:04:25.910

如果我理解正确，您想在`Game`对象上调用一个函数。这意味着您需要传递一个**指向`Game`对象**的指针，以便在其上正确调用[**非静态成员函数指针**](https://stackoverflow.com/questions/990625/c-function-pointer-class-member-to-non-static-member-function)(iChange)。

进行如下所示的更改，您应该能够做您想做的事

```
enemies_array[0].enemy =  new Enemy(this,&Game::EnemyEvent);   

typedef void (Game::*ChangeFunc)(DWORD &)
Class Enemy
{
private:
   ChangeFunc iChange;
   Game *pGame;
}:

Enemy(Game *pCreatorGame, ChangeFunc iChangeHandler )
{
    iChange = iChangeHandler;
    pGame = pCreatorGame;
}

void Enemy::Draw(D3DGraphics& gfx)
{
    (pGame->*iChange)(this->dwThreadID); 
```

# django - 如何为 django admin 设置路径以使 javascript 和 css 在 Windows XP 和开发服务器上工作

> ID：13787190
> 
> 赞同：1
> 
> 时间：2012-12-09T12:00:06.203
> 
> 标签：django, django-admin

我尝试在 Windows 上执行 django (1.4) 教程管理员。但是无法访问 css 和 javascript。我在 setty.py 中设置：

```
# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = 'C:/Python27/Lib/site-packages/django/contrib/admin/'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/' 
```

我的 urils：从 django.conf.urls 导入模式、包含、url

# 取消注释接下来的两行以启用管理员：

从 django.contrib 导入管理员 admin.autodiscover()

urlpatterns = patterns('', # 示例：# url(r'^$', 'mysite.views.home', name='home'), # url(r'^mysite/', include('mysite.foo .urls')),

```
# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)), 
```

)

它仍然不起作用。您能否告诉如何解决这个问题以及解决它的最佳方法是什么？我的项目在 c:\django-projects\mysite 中。当我执行 admin`http://127.0.0.1:8000/admin/polls/poll/1/`我可以看到开发服务器的错误：

```
Traceback (most recent call last):
  File "C:\Python27\lib\wsgiref\handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "C:\Python27\lib\site-packages\django\contrib\staticfiles\handlers.py", l
ine 68, in __call__
    return super(StaticFilesHandler, self).__call__(environ, start_response)
  File "C:\Python27\lib\site-packages\django\core\handlers\wsgi.py", line 241, i
n __call__
    response = self.get_response(request)
  File "C:\Python27\lib\site-packages\django\contrib\staticfiles\handlers.py", l
ine 58, in get_response
    return self.serve(request)
  File "C:\Python27\lib\site-packages\django\contrib\staticfiles\handlers.py", l
ine 51, in serve
    return serve(request, self.file_path(request.path), insecure=True)
  File "C:\Python27\lib\site-packages\django\contrib\staticfiles\views.py", line
 41, in serve
    return static.serve(request, path, document_root=document_root, **kwargs)
  File "C:\Python27\lib\site-packages\django\views\static.py", line 57, in serve

    mimetype, encoding = mimetypes.guess_type(fullpath)
  File "C:\Python27\lib\mimetypes.py", line 294, in guess_type
    init()
  File "C:\Python27\lib\mimetypes.py", line 355, in init
    db.read_windows_registry()
  File "C:\Python27\lib\mimetypes.py", line 259, in read_windows_registry
    for ctype in enum_types(mimedb):
  File "C:\Python27\lib\mimetypes.py", line 249, in enum_types
    ctype = ctype.encode(default_encoding) # omit in 3.x!
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe0 in position 0: ordinal 
```

这是来自settings.py：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'polls'
) 
```

在萤火虫中，我得到 500 个 css 和 js 文件的 http 返回码，路径对我来说似乎很奇怪。例如：

```
http://127.0.0.1:8000/static/admin/css/base.css 
```

我尝试在settings.py中添加：

```
# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    'C:/Python27/Lib/site-packages/django/contrib/admin/static/admin', //here css and js and img folders for for admin

) 
```

并将 urls.py 更改为这个：

```
from django.conf.urls import patterns, include, url
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'mysite.views.home', name='home'),
    # url(r'^mysite/', include('mysite.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
)
urlpatterns += staticfiles_urlpatterns() 
```

但它仍然不起作用。

[Django 文档在这里说： https](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#serving-the-admin-files) : //docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#serving-the-admin-files ：“管理文件位于（django/contrib/admin/ Django 发行版的静态/管理员）。”。但是还是不行。

# c# - 根据 1 个列表的元素对 2 个列表的元素进行排序

> ID：13787191
> 
> 赞同：0
> 
> 时间：2012-12-09T12:00:09.400
> 
> 标签：c#

我有 2 个列表，什么是对：

```
List<int> timeStamp = new List<int>();
List<string> ownerStamp = new List<string>(); 
```

例如：timeStamp' 元素：1、10、32 ...

ownerStamp' 元素：John、Dave、Maria ...

对是：John-1；戴夫-10；玛丽亚-32...

我必须订购时间戳列表的元素，但我必须保留上下文！我该怎么做？手动？还是通过工厂订购来聪明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:07:21.343

Array.Sort() 方法有一个重载，它允许您使用其他数组项作为键对一个数组进行排序。您可以将列表转换为数组，然后对它们进行排序，然后再转换回来：

```
List<int> timeStamp = new List<int>();
List<string> ownerStamp = new List<string>();

int[] timeStampArray = timeStamp.ToArray();
string[] ownerStampArray = ownerStamp.ToArray();

Array.Sort(timeStampArray, ownerStampArray);

timeStamp = new List<int>(timeStampArray);
ownerStamp = new List<string>(ownerStampArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:05:40.107

您最好制作一个包含所有者和时间戳的容器对象，并使其具有可比性：

```
class Entry : IComparable<Entry> {
    public int TimeStamp { get; set; }
    public string Owner { get; set; }

    public Entry(int timeStamp, string owner) {
        this.TimeStamp = timeStamp;
        this.Owner = owner;
    }

    public int CompareTo(Entry other) {
        return this.TimeStamp.CompareTo(other.TimeStamp);
    }
} 
```

然后，您可以列出这些列表并使用`List<T>` [`Sort()`方法](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx)对其进行排序。

要访问时间戳和所有者，`TimeStamp`只需`Owner`访问`Entry`.

通常，如果您希望数据属于一起，最好将它们明确地组合在一个对象或结构中；然后分组将自动发生，您无需特别注意将事物分组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T12:06:34.540

您的问题没有具体说明您期望的输出，但以下将为您提供 Tuple 对象的排序集合，其第一项是时间戳，第二项是所有者。

```
timeStamp.Zip(ownerStamp, (i,s) => Tuple.Create(i,s)).OrderBy(t => t.Item1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T12:03:13.570

最好将这些对组合成一个“SortedDictionary”，它会自动为你对这些对进行排序，或者为`timeStamp`and创建一个元组列表`ownerStamp`，然后根据`timeStamp`键对元组列表中的元素进行排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T13:23:45.040

排序的字典可能会有所帮助。

# c - popen2：阅读作品，写作不

> ID：13787196
> 
> 赞同：-1
> 
> 时间：2012-12-09T12:00:36.480
> 
> 标签：c, exec, popen, spawn

以下函数执行一个进程，返回其 PID 并提供用于读写的文件描述符：

```
pid_t popen2(const char **command, int *infp, int *outfp)
{
    int p_stdin[2], p_stdout[2];
    pid_t pid;

    if (pipe(p_stdin) != 0 || pipe(p_stdout) != 0) {
        return -1;
    }

    pid = fork();

    if (pid < 0) {
        return pid;
    } else if (pid == 0) {
        close(p_stdin[WRITE]);
        dup2(p_stdin[READ], READ);
        close(p_stdout[READ]);
        dup2(p_stdout[WRITE], WRITE);

        execvp(*command, command);
    }

    if (infp == NULL) {
       close(p_stdin[WRITE]);
    } else {
       *infp = p_stdin[WRITE];
    }

    if (outfp == NULL) {
        close(p_stdout[READ]);
    } else {
        *outfp = p_stdout[READ];
    }

    return pid;
} 
```

我用

```
pid = popen2(..., &in, &out); 
```

并从文件描述符`out`中读取

```
nBytes = read(out, line, sizeof(line)); 
```

我读到的很有意义。它是通常显示在控制台上的输出。但是，当我尝试将命令写入程序时，它通常会通过控制台接收到

```
nBytes = write(in, cmd, strlen(cmd)+1); 
```

什么都没发生。该程序没有任何反应。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:32:25.960

我确实对其进行了一些更改，但现在可以使用。去掉`fprintf(stderr,...`验证后：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>
#include <fcntl.h>
#include <signal.h>

#define READ_END 0
#define WRITE_END 1

pid_t popen2(const char **command, int fdarray[]);
pid_t popen2(const char **command, int fdarray[])
{
    int p_stdin[2], p_stdout[2];
    pid_t pid;
    int rc;

    if (pipe(p_stdin) != 0 || pipe(p_stdout) != 0) {
        return -1;
    }
    pid = fork();

    if (pid < 0) {
        return pid;
    } else if (pid == 0) {
        close(p_stdin[WRITE_END]);
        dup2(p_stdin[READ_END], STDIN_FILENO);
        close(p_stdin[READ_END]);

        close(p_stdout[READ_END]);
        dup2(p_stdout[WRITE_END], STDOUT_FILENO);
        close(p_stdout[WRITE_END]);

        rc = execvp(*command, command);
        _exit(EXIT_FAILURE);
    }

    close(p_stdout[WRITE_END]);
    close(p_stdin[READ_END]);
    if (fdarray == NULL) {
        close(p_stdin[WRITE_END]);
        close(p_stdout[READ_END]);
    } else {
       fdarray[READ_END] = p_stdout[READ_END];
       fdarray[WRITE_END] = p_stdin[WRITE_END];
    }

    return pid;
}
#define BUFF_SIZE 1024
struct buff {
        size_t used;
        size_t size;
        char data[BUFF_SIZE];
        }
        ibuf = {0,BUFF_SIZE,}
        , obuf = {0,BUFF_SIZE,}
        ;

int readbuff(int fd, struct buff *bp);
int writebuff(int fd, struct buff *bp);

int readbuff(int fd, struct buff *bp)
{
size_t done;
int rc=0;

for (done=0; bp->used < bp->size; bp->used+=rc, done+=rc) {
        if (done) break;
        fprintf(stderr, "Read(%d,%zu)\n", fd, bp->size - bp->used );
        rc = read(fd, bp->data+bp->used, bp->size - bp->used);
        if (rc== -1) switch (errno) {
#if (EWOULDBLOCK != EAGAIN)
                case EWOULDBLOCK:
#endif
                case EAGAIN:
                case EINTR: rc=0; continue;
                default:
                        fprintf(stderr, "Error on readbuff: %d: %s\n", errno, strerror(errno));
                        goto failed;
                }
        fprintf(stderr, "Readbuff(%d) := %d\n", fd, rc);
        if (rc==0) { rc = -1; break; }
        }
failed:
return done ? done : rc;
}

int writebuff(int fd, struct buff *bp)
{
size_t done;
int rc= 0;

for (done=0; done < bp->used ; done+=rc) {
        if (done) break;
        fprintf(stderr, "Write(%d,%zu)\n", fd, bp->used - done);
        rc = write(fd, bp->data+done, bp->used - done);
        if (rc== -1) switch (errno) {
#if (EWOULDBLOCK != EAGAIN)
                case EWOULDBLOCK:
#endif
                case EINTR:
                case EAGAIN:rc=0; continue;
                default:
                fprintf(stderr, "Error on writebuff: %d: %s\n", errno, strerror(errno));
                goto failed;
                }
        fprintf(stderr, "Writebuff(%d) := %d\n", fd, rc);
        if (rc==0) { rc = -1; break; }
        }
failed:
if (done == bp->used ) bp->used =0;
else { memmove(bp->data, bp->data+done, bp->used - done); bp->used -= done; }
return done ? done : rc;
}

int main (void)
{
int pipes[2] = {-1,-1};
int rc1, rc2,err;
char *commands[] = { "tee", "teapot",  NULL};

// signal(SIGCHLD, SIG_IGN);
// signal(SIGPIPE, SIG_IGN);

rc1 = popen2( commands, pipes);
err = errno;

fprintf(stderr, "Rc=%d:%d(%s) pipes[0]=%d, pipes[1]=%d\n"
        , rc1 , rc1 == -1 ? err : 0
        , strerror(rc1 == -1?err:0)
        , pipes[0]
        , pipes[1]
        );
if (rc1 == -1) return EXIT_FAILURE;

while(1) {
        fprintf(stderr, "#----------------------------------------\n" );
        rc1 = readbuff(STDIN_FILENO, &ibuf);
#if 1
        if (rc1 == -1 && ibuf.used ==0) {
                fprintf(stderr, "Rc1=%d Close %d\n", rc1, pipes[WRITE_END]);
                close(pipes[WRITE_END]);
                }
        else
#endif
        writebuff(pipes[WRITE_END] , &ibuf);

        rc2 = readbuff(pipes[READ_END] , &obuf);
        writebuff(STDOUT_FILENO, &obuf);
        fprintf(stderr, "Rc=%d/%d Ibuf[0]=%zu/%zu, Obuf[0]=%zu/%zu\n"
                , rc1, rc2
                , ibuf.used, ibuf.size
                , obuf.used, obuf.size
                );
        if (rc1 < 0 && rc2 < 0) break;
        }
wait(NULL);

return 0;
} 
```

# css - 将旋转元素定位在页面右侧

> ID：13787197
> 
> 赞同：0
> 
> 时间：2012-12-09T12:00:52.797
> 
> 标签：css, rotation

[JSBin 演示在这里。](http://jsbin.com/odevoh/4/edit)
如何将`div`旋转 90 度放置在页面的右边缘，垂直居中？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:20:52.027

尝试这个：

```
div {
    font-family: sans-serif;
    background: red;
    -webkit-transform: rotate(270deg);
    -webkit-transform-origin: bottom left;
    position: absolute;
    width:200px;
    height:20px;
    top:50%;
    margin-top:-20px; /* height */
    right:-200px; /* width */
} ​ ​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:31:24.803

```
 div{
vertical-align:middle;
    float:right;
    /* FF Chrome Opera etc */
    -webkit-transform: rotate(90deg); 
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    /* IE */
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    } 
```

检查[一下](http://www.zachstronaut.com/posts/2009/02/17/animate-css-transforms-firefox-webkit.html)，可能会对您有所帮助。

# android - 关于平板电脑偏好的白色背景

> ID：13787202
> 
> 赞同：0
> 
> 时间：2012-12-09T12:01:25.503
> 
> 标签：android, background, preferenceactivity, android-theme

我正在为我的偏好活动设置一个背景，所以我在 styles.xml 中编写了一个样式

```
<style 
   name="PreferencesTheme" 
   parent="@android:style/Theme.Light.NoTitleBar.Fullscreen">
   <item name="android:windowBackground">@drawable/background</item>
</style> 
```

并且在活动中，

```
 <activity
          android:name="com.phonelight.realparrot.MainActivity"
          android:label="Real Parrot"
          android:screenOrientation="portrait"
          android:theme="@style/PreferencesTheme">
       <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>

  </activity> 
```

我在两个设备的模拟器上运行它。第一个是手机，第二个是平板电脑。 ![手机](../Images/33527f7389b2a753234af8a850882726.png) ![药片](../Images/7804d353dc5665655b3dd085a09e7a0d.png)

为什么平板电脑上不显示背景图像。只有很小的余量。我在真正的平板电脑上运行它，整个屏幕也是白色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:36:55.310

我认为您想使用不同的主题。我不确定为什么两者之间的区别究竟是什么，但我怀疑 API 略有不同。

```
<style 
   name="PreferencesTheme" 
   parent="@android:style/Theme.Translucent.NoTitleBar.Fullscreen">
   <item name="android:windowBackground">@drawable/background</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:20:19.873

我通过添加偏好活动来解决问题

```
preference.setBackgroundResource(R.xml.background); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T21:58:14.903

我偶然发现了平板电脑的这个问题，但 yasserbn 的回答并没有帮助我，即没有迹象表明什么......

```
preference.setBackgroundResource(R.xml.background); 
```

...正在被调用。

在 Android 大屏幕上，PreferenceActivity 会自行重启以在片段中显示首选项。出现问题是因为我们无法更改此片段容器的背景，因为它的布局 ID com.android.internal.R.id.prefs_frame 是私有的。

一种解决方法是递归清除所有子视图的背景，因为我们总是可以获取根视图：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    ThemeManager.setTheme(this);
    super.onCreate(savedInstanceState);
    clearBackground(findViewById(android.R.id.content));

    // other stuff...
}

private void clearBackground(View view) {
    view.setBackgroundResource(0);
    if (view instanceof ViewGroup) {
        ViewGroup viewGroup = (ViewGroup) view;
        for (int i = 0; i < viewGroup.getChildCount(); i++)
            clearBackground(viewGroup.getChildAt(i));
    }
} 
```

这并不完美，即如果您的任何偏好使用带有背景的自定义视图，尽管这不太可能。

# javascript - DocType 声明问题

> ID：13787205
> 
> 赞同：1
> 
> 时间：2012-12-09T12:01:36.643
> 
> 标签：javascript, jquery, html, dtd

> **可能重复：**
> [如何替换   与   在一个 html 文件中](https://stackoverflow.com/questions/13676783/how-to-replace-nbsp-with-160-in-an-html-file)

我`DTD`在我的 html 文档中使用以下内容。但是当页面在浏览器中呈现时，最后 2 个字符`]>`在页面中可见。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" [
    <!ENTITY nbsp "&#160;"> ] /> 
```

谁能告诉我这个声明有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:04:57.940

[验证器](http://validator.w3.org)将显示您在 Doctype 声明中存在语法错误。把末端取`/`下来。它不是一个自闭合元素标签。

另请注意，至少在 text/html 中，浏览器与 SGML 和 XML 有一种非常奇怪的关系，将 Doctypes 视为魔术字符串来确定 Quirks/Standards 模式，而不是用于其预期目的。我自己不会在 application/xhtml+xml 之外自定义 DTD。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:04:39.673

不要再用这种东西了。

只需使用

```
 <!DOCTYPE html> 
```

让您的文档被解释为 HTML5。

请参阅[MDN 上的此演示文稿](https://developer.mozilla.org/en-US/docs/HTML/HTML5/Introduction_to_HTML5)

# excel - 在excel的一个单元格中输入多个值

> ID：13787206
> 
> 赞同：0
> 
> 时间：2012-12-09T12:01:41.550
> 
> 标签：excel, vba

我想根据特定条件在 Excel 工作表中的单个单元格中输入多个值，例如如果工作簿中有多个工作表，那么如果任何以名称 TC 开头的工作表中包含颜色，那么我必须输入信息在 Excel 工作簿的自述部分中的另一个工作表。我的代码的问题在于它不显示包含颜色的唯一工作表......假设工作表“TC_1”和“TC_3”在任何单元格中包含颜色，然后将输出显示为“;TC_3;TC_3;TC_3;” 虽然这里的预期输出是“TC_1;TC_3”。

这里，是代码：

```
Sub ErrorInSheet()
    Dim Row
    Dim Names As String
    Names = ""

    For Row = 2 To tsheet.UsedRange.Rows.Count
        For Chkcol = 1 To tsheet.UsedRange.Columns.Count
            If tsheet.Cells(Row, Chkcol).Interior.ColorIndex = 3 Then
                Names = Names & ";" & tsheet.Name
            End If
        Next
    Next Row

    Sheets("Read Me").Cells(13, 5).Value = Names

End Sub

Sub iterateSheets()

    For Each sheet1t In Worksheets

       If InStr(1, sheet1t.Name, "TC") Then
           Set tsheet = sheet1t
           Call ErrorInSheet
       End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:12:40.390

我认为这对您有用-我对其进行了测试并为我工作。

```
Sub FindErrors()
    Dim sht As Worksheet, cl As Range, shtNames As String

    shtNames = vbNullString

    For Each sht In Worksheets
       If Left$(sht.Name, 2) = "TC" Then
            For Each cl In sht.UsedRange.Cells
                If cl.Interior.ColorIndex = 3 Then
                    shtNames = IIf(shtNames = vbNullString, sht.Name, shtNames & ";" & sht.Name)
                End If
            Next cl
       End If
    Next sht

    Worksheets("Read Me").Cells(13, 5) = shtNames
End Sub 
```

笔记：

1.  我已经明确声明了变量
2.  I am assuming all your sheets start with "TC" so I've used `Left$` but you can use `InStr` if you like
3.  I've used the ternary `IIF` statement to stop you getting a leading `;`
4.  I've put all the code in one `Sub` but you can split it out if you like

# php - 在 FuelPHP 中创建一对多关系

> ID：13787207
> 
> 赞同：0
> 
> 时间：2012-12-09T12:01:55.213
> 
> 标签：php, database-design, orm, fuelphp

我有 3 个模型：客户端、任务和任务状态（用于为每个客户端匹配任务）。
模型_任务

```
protected static $_properties = array(
        'id',
        'name',
        'created_at',
        'updated_at',
    ); 
```

模型_客户端

```
protected static $_properties = array(
        'id',
        'name',
        'created_at',
        'updated_at',
    ); 
```

模型_任务状态

```
protected static $_properties = array(
        'id',
        'client',
        'task',
        'created_at',
        'updated_at',
    ); 
```

我已将以下内容添加到 Model_Task

```
protected static $_has_many = array(
        'taskstatuses' => array(
            'key_from' => 'id',
            'model_to' => 'Model_Taskstatus',
            'key_to' => 'task',
            'cascade_save' => true,
            'cascade_delete' => false,
        )
    ); 
```

模型_客户端

```
protected static $_has_many = array(
        'taskstatuses' => array(
            'key_from' => 'id',
            'model_to' => 'Model_Taskstatus',
            'key_to' => 'client',
            'cascade_save' => true,
            'cascade_delete' => false,
        )
    ); 
```

模型_任务状态

```
protected static $_belongs_to = array(
        'client' => array(
            'key_from' => 'client',
            'model_to' => 'Model_Client',
            'key_to' => 'id',
            'cascade_save' => true,
            'cascade_delete' => false,
        ),
        'task' => array(
            'key_from' => 'task',
            'model_to' => 'Model_Task',
            'key_to' => 'id',
            'cascade_save' => true,
            'cascade_delete' => false,
        )
    ); 
```

我希望 taskstatus 将客户端字段链接到客户端模型，并将任务字段链接到任务模型，如果用户插入的任务的值不在客户端或任务模型中（通过 id），则会出现错误。但它不起作用（我仍然可以向 clientstatus 添加客户端和任务表中不存在的客户端 ID 和任务 ID 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:25:34.833

如果您坚持[Model 约定](http://fuelphp.com/dev-docs/packages/orm/creating_models.html)，以下将正常工作：

```
class Model_Task extends \Orm\Model
{
    protected static $_belongs_to = array(
        'client'
    );

    protected static $_properties = array(
        'id',
        'name',
        'client_id',
        'created_at',
        'updated_at'
    );
}

class Model_Client extends \Orm\Model
{
    protected static $_has_many = array(
        'task'
    );

    protected static $_properties = array(
        'id',
        'name',
        'created_at',
        'updated_at'
    );
} 
```

要获得客户的任务，您只需执行以下操作：

```
$client = Model_Client::find(1);

foreach($client->task as $task)
{
    /* do something with each $task */
} 
```

**编辑：** 这样您就可以避免在客户端/任务之间有不必要的表/模型，从而迫使您将有效任务添加到现有客户端。此外，如果您想要客户端/任务之间**的一对多**关系，使用 Model_Taskstatus 将允许您将相同的任务分配给不同的客户端，这不是您想要的。

您应该检查[Has Many](http://fuelphp.com/dev-docs/packages/orm/relations/has_many.html)文档。

# vba - 将多个 Excel 工作表合并到汇总表中

> ID：13787213
> 
> 赞同：1
> 
> 时间：2012-12-09T12:03:46.337
> 
> 标签：vba, excel, excel-2003

我想知道是否有人可以帮助我。

我正在使用下面的代码来允许用户从多个 Excel 工作簿中复制并将数据合并到摘要表中。

```
Sub Merge()
        Dim DestWB As Workbook, WB As Workbook, WS As Worksheet, SourceSheet As String

        Set DestWB = ActiveWorkbook
        SourceSheet = "Input"
        startrow = 7
        FileNames = Application.GetOpenFilename( _
        filefilter:="Excel Files (*.xls*),*.xls*", _
        Title:="Select the workbooks to merge.", MultiSelect:=True)
        If IsArray(FileNames) = False Then
            If FileNames = False Then
                Exit Sub
            End If
        End If
        For n = LBound(FileNames) To UBound(FileNames)
            Set WB = Workbooks.Open(Filename:=FileNames(n), ReadOnly:=True)
            For Each WS In WB.Worksheets
                If WS.Name = SourceSheet Then
                    With WS
                        If .UsedRange.Cells.Count > 1 Then
                            dr = DestWB.Worksheets("Input").Range("C" & Rows.Count).End(xlUp).Row + 1
                            lastrow = .Range("C" & Rows.Count).End(xlUp).Row
                            For j = lastrow To startrow Step -1
                                If Range("E" & j) <> "Requirements Manager" And Range("E" & j) <> "R & D Lead" And Range("E" & j) <> "Technical" And Range("E" & j) <> "Analyst" Then Rows(j).Delete
                            Next
                            lastrow = .Range("C" & Rows.Count).End(xlUp).Row
                            If lastrow >= startrow Then
                                .Range("A" & startrow & ":AQ" & lastrow).Copy
                                DestWB.Worksheets("Input").Cells(dr, "A").PasteSpecial xlValues
                            End If
                        End If
                    End With
                    Exit For
                End If
            Next WS
            WB.Close savechanges:=False
        Next n
    End Sub 
```

该代码工作正常，但我遇到了与复制信息相关的问题，即这行代码：

```
 .Range("A" & startrow & ":AQ" & lastrow).Copy 
```

我需要改变它，以便它考虑到两个范围。这些是“B：AD”和“AF：AQ”列，但我不确定如何执行此操作。

我只是想知道是否有人可以看看这个，并就我如何解决这个问题提供一些指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:50:11.940

在以下所有内容中，我假设您确实**不**希望将 A 列复制到目标工作簿和工作表。

您可以使用`Union`一次复制粘贴它（然后粘贴时不会反映它之间的任何列：

```
 If lastrow >= startrow Then
                            Union(.Range("B" & startrow & ":AD" & lastrow), .Range("AF" & startrow & ":AQ" & lastrow).Copy
                            DestWB.Worksheets("Input").Cells(dr, "B").PasteSpecial xlValues
                        End If 
```

如果您希望它之间也有空间粘贴，那么您可以简单地 r3epeat 复制和粘贴行：

```
 If lastrow >= startrow Then
                            .Range("B" & startrow & ":AD" & lastrow).Copy
                            DestWB.Worksheets("Input").Cells(dr, "B").PasteSpecial xlValues
                            .Range("AF" & startrow & ":AQ" & lastrow).Copy
                            DestWB.Worksheets("Input").Cells(dr, "AF").PasteSpecial xlValues
                        End If 
```

# forms - 在drupal模块中编辑表单？

> ID：13787214
> 
> 赞同：5
> 
> 时间：2012-12-09T12:03:49.487
> 
> 标签：forms, drupal, drupal-7, edit

我在制作 Drupal 模块时遇到问题。我创建了一个用于添加到数据库的表单，但我没有运气创建表单来编辑一些记录，这是我的问题。问题是当我从数据库将值加载到表单加载中并更改它们，然后在提交新值之前单击提交按钮表单刷新。所以它会更新到与原来相同的数据库中。这是一个代码：

```
function edit_form($form, &$form_state) {

$query = db_select('activity', 'f')
  ->fields('f')
  ->condition('IDA', $_GET['edit']);
$thefile = $query->execute();
$title = "";
$desc = "";
$file = "";
$privacy = "";
    while($record = $thefile->fetchAssoc()) 
    {
        $title = $record['title'];
        $desc = $record['description'];ick submit button form refresh before it submit new values. So it updates into database same thing as it was. Here is a good :

function edit_form($form, &$form_state) {

$query = db_select('activity', 'f') ->fields('f') ->co
        $file = $record['trainingresource'];
        $privacy = $record['privacy'];

    }
  $form['activity'] = array(
    '#type' => 'fieldset',
    '#title' => t('Create a new activity'),
    '#tree' => TRUE,

  );
  $form['activity']['title'] = array(
      '#type' => 'textfield',
    '#title' => t('Title'),
    '#description' => t('Please enter the title here.'),
    '#value' => t($title),
  );
$form['activity']['description'] = array(
   '#type' => 'textarea',
    '#title' => t('Enter Description'),
  '#value' => t($desc),
    '#description' => t('Please put description here.'),

  );
 /* $form['activity']['date'] = array(
   '#type' => 'date',
    '#title' => t('Enter activity date'),

    '#description' => t('Please put activity date in here.'),
  ); */
  $form['activity']['file'] = array(
   '#type' => 'file',
    '#title' => t('Submit activity file'),
'#value' => t($file),
    '#description' => t('Please files in here.'),
  );
  $form['activity']['security'] = array(
'#type' => 'radios',
'#title' => t('Privacy'),
'#value' => t($privacy),
'#options' => array('True'=>t('True'),'False'=>t('False')),
);
  // Description

  $form['hidden'] = array('#type' => 'value', '#value' => 'is_it_here');
  $form['submit'] = array('#type' => 'submit', '#value' => t('Save'));
  return $form;
} 
```

这是一个提交表单代码：

```
function edit_form_submit($form, $form_state) {
$idt = $_GET['edit'];
$title = trim($form_state['values']['activity']['title']);
$desc = trim($form_state['values']['activity']['description']);
//$date = trim($form_state['values']['activity']['date']['year']."-".$form_state['values']['activity']['date']['month']."-".$form_state['values']['activity']['date']['day']);
$file = "file";
$privacy = trim($form_state['values']['activity']['security']['#value']);

$nid = db_update('activity') // Table name no longer needs {}
->fields(array(
  'title' => $title,
  'description' => $desc,
  //'date' => $date,
  'trainingresource' => $file,
  'privacy' => $privacy,

))
->condition('IDA', $idt,'=')
->execute();
drupal_set_message($idt);
drupal_set_message("Added into database");
drupal_goto('activity', array('query'=>array(
'activ'=>$_GET['activ'],
)));
} 
```

如果有人有同样的问题或知道如何解决这个问题，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:05:25.013

首先，我想指出您的示例代码粘贴错误。我看到两个相同函数edit_form的声明。

我假设第一个声明是错误的粘贴并继续回答这个问题。

我在您的表单声明中看到的主要问题是您使用“#value”来存储默认值。请使用“#default_value”。

如果您使用#value，它会忽略用户提交的值。

1.  [阅读有关使用 #value 的更多信息](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#value)。
2.  [阅读有关使用 #default_value 的更多信息](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#default_value)

例如改变，

```
$form['activity']['description'] = array(
  '#type' => 'textarea',
  '#title' => t('Enter Description'),
  '#value' => t($desc),
  '#description' => t('Please put description here.'),
); 
```

到

```
$form['activity']['description'] = array(
  '#type' => 'textarea',
  '#title' => t('Enter Description'),
  '#default_value' => t($desc),
  '#description' => t('Please put description here.'),
); 
```

此外，我强烈建议您查看[此链接](http://drupal.org/project/examples)，该链接提供了大量与 Drupal 交互的示例。

# java - JavaMail API Mac Mail.app 链接看起来像 x-msg://number/... 在其他情况下它是垃圾邮件、纯文本等

> ID：13787217
> 
> 赞同：0
> 
> 时间：2012-12-09T12:04:07.300
> 
> 标签：java, http, email, hyperlink, jakarta-mail

我是 JavaMail API 的新手，但遇到了问题。我的发送完成抛出 Google API，我的代码是：

```
final String username = from;
    final String password = passwd;

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props, new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress(from));
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipient));
        message.setSubject(subject);
        message.setContent(content, "text/html");

        Transport.send(message);

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    } 
```

我想将指向网页的链接分配给内容变量（电子邮件的正文）。这将是验证用户有效性的验证电子邮件，因此它类似于 mywebsite.com/user/2341341341（生成数字）。我已经尝试了很多组合 - http://mywebsite.com/user/2341341341 - [http://www.mywebsite.com/user/2341341341](http://wwww.mywebsite.com/user/2341341341) 等等链接在某些情况下显示为蓝色并带有下划线，在其他情况下它是纯文本（在雅虎邮件中，在 gmail 作品中），而在其他情况下，MacOS 中的 Mail.app 将其呈现为 x-msg://234/mywebsite.com/user/2341341341 （它看起来像一个链接，但它不是将我重定向到任何地方），在其他人中，gmail将电子邮件放入垃圾邮件中......

我想要一个跨平台解决方案或单击此处或只是[http://mywebsite.com/user/2341341341](http://mywebsite.com/user/2341341341)作为用户可以单击的链接

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:42:33.720

您是否使用正确的 html 标签将链接添加到您的 html 内容？

您无法控制邮件阅读器的行为方式。您无法控制他们认为是垃圾邮件的内容。您无法控制他们是否允许用户关注消息中的链接。您所能做的就是格式化您的 html 文本并正确链接，并确保它不是垃圾邮件。

# iphone - iOS 指针问题

> ID：13787225
> 
> 赞同：2
> 
> 时间：2012-12-09T12:04:55.693
> 
> 标签：iphone, objective-c, ios, xcode, pointers

我似乎有一个指针问题，我似乎无法修复它。有人可以帮我吗？

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"Finished Downloading Image: %@" ,[connection.originalRequest.URL absoluteString]);
    UIImage *CompiledImage=[UIImage imageWithData:ImageData];
    SEL selector=@selector(ImageDownloadingCompleted:Image:);
    if([[self Delegate] respondsToSelector:selector]){
        [[self Delegate] ImageDownloadingCompleted:self Image:CompiledImage];
    }
    else{
        if(Target){
            *Target=CompiledImage;
        }
    }
    // NSLog(@"Image Size:%i", [ImageData length]);
} 
```

`Target`是类型的私有变量`UIImage`（声明为`UIImage *Target;`：） `CompiledImage`也是 a `UIImage`。我想要做的是将目标地址的内容设置为 CompiledTarget 的内容。这会导致以下错误：

> 从不兼容的类型“UIImage *__strong”分配给“UIImage”

我试过 ：

```
memccpy(__bridge Target, &CompiledImage, sizeof(Target),sizeof(Target)); 
```

我得到这个错误：

> 预期表达

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T12:07:36.720

您只需将其设置为，

```
Target = CompiledImage; 
```

不需要`*`。由于两者都是指针，因此如果您使用上述代码，您基本上是在分配内存地址而不是复制内容。

附带说明，请以小写字母开头的变量名。`Target`通常代表一个类名。根据苹果编码约定，它应该是`target`.

根据您的评论，您可以执行以下操作，

在 ViewController 类中，将 a 声明`UIImage`为`@property`，

```
@property (nonatomic, retain) UIImage *downloadedImage; 
```

在进行 URL 调用时，

```
NSImageLoader *imageLoader = [[NSImageLoader alloc] init];
[imageLoader setTarget:self];//setting current viewController as target instead of UIImage 
```

下载图片时，

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"Finished Downloading Image: %@" ,[connection.originalRequest.URL absoluteString]);
    UIImage *CompiledImage=[UIImage imageWithData:ImageData];
    SEL selector=@selector(ImageDownloadingCompleted:Image:);
    if([[self Delegate] respondsToSelector:selector]){
        [[self Delegate] ImageDownloadingCompleted:self Image:CompiledImage];
    }
    else{
        if(Target){
            Target.downloadedImage = CompiledImage;//or [Target setDownloadedImage:CompiledImage];
        }
    }
    // NSLog(@"Image Size:%i", [ImageData length]);
} 
```

在您的 ViewController 类中，现在您可以访问图像，`self.downloadedImage`它`CompiledImage`与指向相同位置的相同内存地址相同。

另一种方法是`UIImage *Target`在`UIImage **Target`你的`NSImageLoader`类中声明。在调用`setTarget`方法时，使用`[imageLoader setTarget:&Target];`. 在此方法中，您需要将目标设置为`Target = Target;`

**更新：** 根据您的评论，它应该是这样的，

```
for( NSDictionary *CurrentActivity in [Profile UserActivities]) {
        ...
        UIImage *WineImage = [UIImage imageNamed:@"loader.gif"];
        NSImageLoader *loader=[[NSImageLoader alloc] initWithURLString:[NSString stringWithFormat:@"%@%@",[TempSettings URL],[CurrentActivity objectForKey:@"ImageURL"]]];
        [loader setTarget:&WineImage];
        [loader startDownloading];
        [self addSubview:Activity];
        Counter++;
    } 
```

然后在 NSImageLoader.h 文件@interface 中，

```
 __strong UIImage **Target; //This should be strong not autoreleasing 
```

在 NSImageLoader.m 文件中，

```
- (void)setTarget:(UIImage *__strong *)iTarget{ //change here also
     Target = target; 
} 

-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"Finished Downloading Image: %@" ,[connection.originalRequest.URL absoluteString]);
    UIImage *CompiledImage=[UIImage imageWithData:ImageData];
    SEL selector=@selector(ImageDownloadingCompleted:Image:);
    if([[self Delegate] respondsToSelector:selector]){
        [[self Delegate] ImageDownloadingCompleted:self Image:CompiledImage];
    }
    else{
        if(Target){
            *Target = CompiledImage;
        }
    }
    // NSLog(@"Image Size:%i", [ImageData length]);
} 
```

**更新2：**

使用传递 UIImageView 的方法，您可以执行以下操作，

```
 for( NSDictionary *CurrentActivity in [Profile UserActivities]) {
        ...
        UIImage *WineImage = [UIImage imageNamed:@"loader.gif"];
        NSImageLoader *loader=[[NSImageLoader alloc] initWithURLString:[NSString stringWithFormat:@"%@%@",[TempSettings URL],[CurrentActivity objectForKey:@"ImageURL"]]];
        [loader setTarget:Activity];//pass imageview and let the delegate method set image
        [loader startDownloading];
        [self addSubview:Activity];
        Counter++;
    }

-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    NSLog(@"Finished Downloading Image: %@" ,[connection.originalRequest.URL absoluteString]);
    UIImage *CompiledImage=[UIImage imageWithData:ImageData];
    SEL selector=@selector(ImageDownloadingCompleted:Image:);
    if([[self Delegate] respondsToSelector:selector]){
        [[self Delegate] ImageDownloadingCompleted:self Image:CompiledImage];
    }
    else{
        if(Target){
            Target.image = CompiledImage;
        }
    }
    // NSLog(@"Image Size:%i", [ImageData length]);
} 
```

在这里传递 imageview 并让委托方法在您下载图像后设置图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T20:13:58.967

使目标是 pTarget？一个指向指针的指针那么它是有意义的 `*pTarget = compiledImage` （因为它经常用 NSErrors 完成.. 例如在核心数据中）

你不能只是 memcpy 的东西，因为目标没有在堆上分配正确的大小。

* * *

您无法复制内存中的真实 UIImage 字节，因为您不知道这和实现细节。你甚至不知道它有多大！

但是您可以将指针复制到图像 - 它的内存地址

* * *

```
UIImage *pointer1 = [UIImage imageWithFoo];
UUImage *pointer2 = pointer1; 
```

现在您还可以声明一个空指针并稍后填充

```
UIImage *target = nil;
UIImage *pointer1 = [UIImage imageWithFoo];
target = pointer1; 
```

到目前为止一切都很好但是如果你想将目标传递给一个函数并且应该填充它呢？

```
target = [self calculateImage]; 
```

但现在你在异步函数中拥有它

```
[self asyncCalculateImage:&target]; // you pass it a POINTER to the POINTER to fill :)
...
- (void)asyncCalculateImage:(UIImage**)pTarget {
    UIImage *pointer1 = [UIImage imageWithFoo];
    *pTarget = pointer1; //DEREFERENCE and fill pTarget
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T12:08:24.350

怎么又放*了，这里CompiledImage本身就是一个指针。

只需使用`Target=CompiledImage;`

# javascript - 谷歌图表：如何设置最小值和 hAxis 位置

> ID：13787234
> 
> 赞同：1
> 
> 时间：2012-12-09T12:05:56.803
> 
> 标签：javascript, google-visualization

这是我的图表的简化版本：

```
<html>
  <head>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);    
                function drawChart() {
                    var jsonData = '{"cols":[{"id":"","label":"date","type":"string"},{"id":"","label":"a","type":"number"},{"id":"","label":"b","type":"number"}],"rows":[{"c":[{"v":"2012-05-01"},{"v":"1"},{"v":"8"}]},{"c":[{"v":"2012-05-02"},{"v":"1"},{"v":"7"}]},{"c":[{"v":"2012-05-03"},{"v":"1"},{"v":"38"}]}]}';

                    var data = new google.visualization.DataTable(jsonData);    
                    var options = {
                        title       : 'Company Performance',
                        pointSize   : 5,
                        chartArea: {width: 800, height: 800},
                        width: 800+300, height: 800+600,
                        legend:{position: 'bottom',maxLines: 3},
                        vAxis:  {direction:-1, minValue: 1, viewWindowMode: 'explicit', viewWindow:{min:1}},
                        colors      : ['#0E9DFF','#9616F3']
                    };

                var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                chart.draw(data, options);
              }
        </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

我的目标是将 vAxis 的最小值设置为 0。
它有效，但如何使其显示？
以及如何将水平轴移动到底部？

# html - 为什么我的水平导航栏会占用内容区域的空间？

> ID：13787237
> 
> 赞同：2
> 
> 时间：2012-12-09T12:06:26.190
> 
> 标签：html, css

我对水平导航栏有疑问。我想创建一个带有图像作为标题（高度：100px）、水平导航栏，最后是内容区域（高度：768px）的页面。我想知道为什么导航栏会放在内容区域中（这意味着内容区域会小于 768px）。我怎样才能避免这种行为？相反，我想将内容区域向下移动大约导航栏的大小。

这是我的 CSS 代码：

```
* {
         margin:0;
         padding:0;
}

body {
         background:#FFFFFF;
}

#frame {
         margin: auto;
         width: 1024px;
         height: 768px;
}

#header {
         width:100%;
         height:100px;
         background-image:url(image.jpg);
}

#navigation {
         width: 100%;
         float: left;
         list-style: none;
         background: #f2f2f2;
}

#navigation li {
         list-style: none;
         display: inline;
         float: left;
}

#navigation a {
         display: block;
         padding: 8px 15px;
         text-decoration: none;
         font-weight: bold;
         color: #069;
         border-right: 1px solid #ccc;
}

#navigation a:hover {
         color: #c00;
         background-color: #fff;
}

#content {
    background: #EBF7FF;
    width: 1024px;
    height:768px;       
    text-align: justify;
} 
```

这是html代码：

```
<html>
<head>
<title>test</title>

<link rel="stylesheet" type="text/css" href="style.css">

</head>
<body text="#000000" bgcolor="#FFFFFF" link="#FF0000" alink="#FF0000" vlink="#FF0000">

<div id="frame">

<div id="header">

</div>

 <ul id="navigation">
          <li><a href="main.html" target="_self">text1</a></li>
          <li><a href="text2.html">text2</a>
          <li><a href="text3.html">text3</a></li>
          <li><a href="text4.html">text4</a></li>          
 </ul>

<div id="content">

<font size="+3">Title</font>

<br>
<br>

Content...

<br>
<br>

</div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:35:00.427

如果您希望#navigation 显示为浮动，您可以将 clear:both 添加到您的#content。

```
#content {
   background: #EBF7FF;
   width: 1024px;
   height:768px;       
   text-align: justify;
   clear:both;
} 
```

但在我看来，更好的解决方案是将其显示为块，将 li 显示为内联块，或者将其显示为表格，将 li 显示为表格单元

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:13:35.420

您为 #navigation 指定 100% 的宽度，它包含在包含内容的容器 #frame 中。因此，#navigation 采用其容器的宽度，因此与该容器内的其余内容的宽度相同，因为容器恰好采用内部内容所需的宽度。

您将该导航*放置*在内容容器中，因此显然它必须在其中占据空间。如果您想避免这种情况，只需将导航放在内容容器上方：

```
<html>
<head>
<title>test</title>

<link rel="stylesheet" type="text/css" href="style.css">

</head>
<body text="#000000" bgcolor="#FFFFFF" link="#FF0000" alink="#FF0000" vlink="#FF0000">

<div id="header">
    <ul id="navigation">
          <li><a href="main.html" target="_self">text1</a></li>
          <li><a href="text2.html">text2</a>
          <li><a href="text3.html">text3</a></li>
          <li><a href="text4.html">text4</a></li>          
    </ul>
</div>

<div id="frame">
  <div id="content">
  <font size="+3">Title</font>
    <br>
    Content...
  </div>
</div>

</body>
</html>​ 
```

比较那个[提琴手](http://jsfiddle.net/eeswu/3/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T12:23:29.347

您的导航必须占据整个可用空间，并且将高度设置为 value.set`display:table`以供您的导航使用，因此它的高度会增长到它的内容，如下所示：

```
#navigation{
   display:table;
} 
```

检查[演示](http://jsfiddle.net/sRWTD/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T12:44:32.733

那是因为`#navigation`它漂浮在`#content`.

尝试添加它以强制`#content`在导航下方呈现：

```
#content {
    clear:both;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T14:52:53.893

当您这样做时，您不必担心导航后会发生什么。

```
#navigation:after {
   clear:both;
} 
```

# user-controls - 当集成到用户控件中时，RegisterClientScriptBlock 和 RegisterClientScriptInclude 在 Composite C1 中不起作用

> ID：13787239
> 
> 赞同：2
> 
> 时间：2012-12-09T12:06:37.693
> 
> 标签：user-controls, c1-cms

我尝试从 Composite C1 的用户控件中添加自定义 javascript 块。用户控件集成在嵌套母版页中（称为 Frontpage.master - 作为来自 Composite C1 的基础起始站点“ASP.NET 母版页”已被采用，我想尽可能地坚持使用它）。

为了分析问题，在用户控件中使用了非常简单的代码：

```
 string _jsScriptBlock = "alert('here');";

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.Page.IsPostBack)
        {
            ClientScriptManager scriptMgr = this.Page.ClientScript;
            if (!scriptMgr.IsClientScriptBlockRegistered(this.GetType(), "jsScriptBlock"))
            {
                scriptMgr.RegisterClientScriptBlock(this.GetType(), "jsScriptBlock", _jsScriptBlock, true);
            }
        }
    } 
```

相同的代码在另一个测试 ASP.NET 网站中工作，该网站在嵌套母版页中集成了用户控件。RegisterClientScriptInclude 在这里没有显示，但它是完全相同的问题。

作为一种解决方法，我可以直接在用户控件和母版页的标记中添加 Javascript 块和脚本链接，但我更喜欢“动态”解决方案，必要时通过注册。

有谁知道，如果这个问题是 Composite C1 框架的普遍问题？

# android - 在 Android 中扩展 View 类和布局

> ID：13787242
> 
> 赞同：0
> 
> 时间：2012-12-09T12:07:06.397
> 
> 标签：android, layout, android-custom-view

我正在使用 Android 中的布局和视图。我的布局看起来像：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >
        <com.mycode.MyView
            android:id="@+id/MyView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
        />

        <LinearLayout
            android:id="@+id/leftpane"
            android:layout_width="55dp"
            android:layout_height="wrap_content"
            android:layout_weight="0.95"
            android:background="@color/leftpane_background"
            android:gravity="center"
            android:orientation="vertical"
            android:scrollbarStyle="insideOverlay" >

        </LinearLayout>
</LinearLayout> 
```

如果我评论这些行`<com.mycode.MyView .... />`，则显示左侧线性布局（id为leftpane），否则不显示。如果我在左窗格布局之后添加另一个布局（例如滚动视图布局），它也不会显示。为什么使用我的自定义视图 (MyView) 会使所有其他布局消失？我想做的是为应用程序的背景设置我的自定义视图，我将在其中显示图像，以及背景上的其他一些视图，如滚动视图、按钮等。这是 MyView 类的代码。请记住，我需要在活动的背景上绘制图像（在整个背景上，显然不包括操作栏）：

```
/**
*/
class   MyView extends View
{
    TextPaint   text_paint;
    Paint       paint;

    private void    InitView()
    {
        text_paint = new TextPaint( Paint.ANTI_ALIAS_FLAG );
        text_paint.setColor( Color.BLACK );
        paint = new Paint();
    }

    public MyView(Context context)
    {
        super(context);
        InitView();
    }

    public MyView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        InitView();
    }

    public MyView(Context context, AttributeSet attrs, int defaultStyle)
    {   
        super(context, attrs, defaultStyle);
        InitView();
    }

    @Override
    protected void  onDraw( Canvas canvas )
    {
        super.onDraw(canvas);
        //int   w, h;
        //w = canvas.getWidth();
        //h = canvas.getHeight();
        //paint.setColor( Color.WHITE );
        //canvas.drawRect(0, 0, w-1, h-1, paint );
        //canvas.drawText( "ciao", 100, 100, text_paint);
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:09:34.907

尝试将视图的高度更改为：

```
android:layout_height="wrap_content" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:07:13.950

当您覆盖自定义 MyView 中的 onMeasure 方法时，您可能做了一些错误工作，因此 MyView 匹配所有父视图。你能在 MyView 的 onLayout 和 onMeasure 方法中显示你的代码吗？

# python - XMPP——openfire、PHP 和 python 网络服务

> ID：13787244
> 
> 赞同：0
> 
> 时间：2012-12-09T12:07:31.267
> 
> 标签：python, web-services, xmpp, openfire, strophe

我计划将实时通知集成到我目前正在开发的 Web 应用程序中。我决定为此使用 XMPP，并选择了我认为适合我需要的 openfire 服务器。

前端使用 strophe 库使用 BOSH 从我的 openfire 服务器获取通知。但是通知是通知，其他消息将由我的应用程序发布，因此我认为此代码需要驻留在后端。最初我想使用 XMPHP 和 JAXL 等 PHP XMPP 库，但后来我认为这会导致很多开销，因为每个脚本都必须执行相同的步骤，如连接、身份验证等，我认为这会使 PHP 结束有点慢并且反应迟钝。

现在我正在考虑创建一个中间件应用程序，充当 PHP 将调用的 Web 服务，并且该应用程序将使用 XMPP 服务处理这些内容。这样做的好处是这个应用程序（如果你愿意的话是一个服务器）只需连接一次，它就会坐在那里监听一个端口。我还计划以异步方式构建它，这样它将首先从我的 PHp 应用程序中获取所有请求，然后在没有更多请求时获取；去做通知发布的事情。我计划使用 SleekXMPP 在 Python 中创建此服务。

这正是我计划的。我是 XMPP 和整个 Web 服务的新手，我想就内存和 CPU 使用率、优势、劣势、可扩展性问题、安全性等问题发表您的意见。

提前致谢。

PS：--如果这样的东西已经存在（虽然我在谷歌上搜索了很多都没有找到）请指引我到那里。

编辑 --- 中级服务应该做以下（但不限于）： 1\. 为不同级别的组和社区页面发布通知。2\. 单个用户在某些事件上的通知。3.用户注册（虽然可以使用用户服务插件完成）。

编辑 --- 它还应该创建 pub-sub 节点并从这些 pub-sub 节点订阅和取消订阅用户。

我还想将通知和消息存储在数据库中（openfire 没有）。那会是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:07:50.617

在我看来，XMPP 对你正在做的事情来说是一种重量级的解决方案，因为通信只是单向的，而且你只是发送通知（没有实时多用户聊天等）。

我会考虑将 Socket.io (http://socket.io) 之类的东西用于服务器<=>客户端通道以及 Redis (http://redis.io) 用于持久性。

# ruby-on-rails - 乘客独立无法从 capistano 开始

> ID：13787247
> 
> 赞同：1
> 
> 时间：2012-12-09T12:07:59.363
> 
> 标签：ruby-on-rails, capistrano, passenger

在部署和相关的事情上，我有点新手，所以请宽容。

我正在为一堆爱好项目构建一个登台服务器，为此，我需要

*   支持多个 Ruby 版本
*   支持多个运行轨道/其他应用程序
*   支持多种数据库及相关软件

如果这一天到来，我还希望部署脚本允许部署到生产环境。

这种背景需要使用 RVM、Capistrano-multistage 和Passenger Standalone（另一种选择是 Mongrel，但由于我希望在生产中使用Passenger，我认为在分段中使用Passenger 也会更安全）。所有这些都让部署变得有点麻烦。

我已经很好地拼凑了一些东西，其他一切似乎都可以正常工作，但是由于某种原因，当 Capistrano 发出命令时，Passenger 无法启动。如果我 SSH 进入该框并在自己中键入命令，它会很好地工作。怎么了？

为了帮助您帮助我，这是我的 config/deploy.rb 的副本

```
set :application, "Appname"
set :repository,  "path-to-git-repo-over-ssh"

set :scm, :git

default_run_options[:pty] = true

set :rvm_ruby_string, ENV['GEM_HOME'].gsub(/.*\//,"")
set :rvm_install_ruby_params, '--1.9'      # for jruby/rbx default to 1.9 mode
set :rvm_install_pkgs, %w[libyaml openssl] # package list from https://rvm.io/packages
set :rvm_install_ruby_params, '--with-opt-dir=/usr/local/rvm/usr' # package support
set :use_sudo, false

before 'deploy:setup', 'rvm:install_rvm'   # install RVM
before 'deploy:setup', 'rvm:install_ruby'  # install Ruby and create gemset

require "rvm/capistrano"

require "bundler/capistrano"

require 'sidekiq/capistrano'

set :deploy_via, :remote_cache

set :stages, %w(staging production)
set :default_stage, "staging"
require 'capistrano/ext/multistage'

set :rails_env, lambda { stage }
set :startcmd, lambda { "cd #{current_path} && bundle exec passenger start -d -p #{passenger_port} -e #{rails_env}  --pid-file=#{current_path}/tmp/pids/passenger.#{passenger_port}.pid  #{current_path}" }

namespace :deploy do

  task :stop do
    run("cd #{current_path} && bundle exec passenger stop -p #{passenger_port}")
  end

  task :restart do
    run("cd #{current_path} && touch tmp/restart.txt")
  end

  task :start do
    run("#{startcmd}")
  end
end

after "deploy:update_code" do
  run "(echo \"@reboot /bin/bash -l -c '#{startcmd}' >>log/boot.out 2>>log/boot.err # from capistrano \" && cat #{release_path}/crontab.#{stage}) | crontab -"
end 
```

这是 config/deploy/staging.rb

```
set :deploy_to, "/var/www/appname"
set :user, 'app-specific-user'
set :password, 'super-secret-password'
set :domain, '1.2.3.4'
server domain, :app, :web
role :db, domain, :primary => true

set :passenger_port, 1234 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:15:04.167

好吧，该死的地狱。完全预感，我删除了

```
default_run_options[:pty] = true 
```

从文件中设置，就像魔术一样，它开始工作了。现在，如果只有有人会告诉我为什么。

# windows-phone-7-emulator - Windows Phone SDK 7.1 模拟器完成重新启动错误

> ID：13787249
> 
> 赞同：3
> 
> 时间：2012-12-09T12:08:00.080
> 
> 标签：windows-phone-7-emulator

感谢大家阅读这个冗长的问题。这真的很重要，如果您能帮助我，我将不胜感激:)

***问题 - - - -***

我已经使用 Windows 7.1 SDK 大约两个月了。模拟器到目前为止没有任何问题。但是，今天开始显示此错误（已保存状态（文件名）.dess 已损坏。请删除已损坏的已保存状态文件，然后重试）。我没有对我的项目代码进行任何重大更改，也没有移动任何文件。我刚刚为按钮添加了一些视觉状态动画。

正如它所建议的，我继续删除该文件。然后我再次开始调试。但是，模拟器现在打开并*显示消息（Windows Phone Emulator 正在执行完整的操作系统重新启动）。此消息显示了很长时间。我关闭了模拟器和项目。从那以后，我一直无法使用模拟器。*我可以在 Visual Studio 中正常编码，但我无法测试我的应用程序。

**我试过的------**

我阅读了这个问题，发现许多其他人面临同样的模拟器问题。按照他们的建议，我对 Windows Phone SDK 7.1 进行了一次修复。我也尝试过卸载然后重新安装 SDK 7.1 一次。

***系统规格-----***

我正在使用适用于 Windows Phone 的 Visual Studio Express 2010（Windows 7 64 位）

我已经从这个链接下载了 Windows Phone SDK 7.1：http: [//go.microsoft.com/fwlink/ ?LinkId=258412](http://go.microsoft.com/fwlink/?LinkId=258412)

我读过这个问题可能是因为某些硬件不兼容。但是，我认为我的机器与模拟器兼容。这是一些信息。

*   DirectX 版本：DirectX 11

*   8GB 内存

*   驱动器型号：WDM 1.1

附加信息：

我已阅读安装“一月更新”可能会解决此问题。我尝试从此链接下载更新：http: [//www.microsoft.com/enus/download/details.aspx?id=23854](http://www.microsoft.com/enus/download/details.aspx?id=23854)

但是，安装程序说更新与我正在使用的产品/版本不兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:51:04.633

通常 WP7.1 SDK 的修复功能足以修复所有问题。它再次运行模拟器保存状态的生成。

请先尝试删除**%ProgramData%\Microsoft\XDE**文件夹中的文件（确保将它们备份到其他地方。），然后运行模拟器。如果模拟器运行时显示消息“ *Windows Phone Emulator is doing a complete OS boot* ”，让它启动。不过这需要一些时间。这样你就会知道模拟器实际上可以在你的计算机上运行。这不会生成新的保存状态图像，但模拟器至少应该加载。

接下来，尝试从[http://www.microsoft.com/en-us/download/details.aspx?id=29233安装](http://www.microsoft.com/en-us/download/details.aspx?id=29233)*WP7.1.1 SDK 更新*。除了原来的 512MB 映像之外，此更新还安装了额外的 256MB 模拟器映像。它还会在此过程中生成模拟器的保存状态，从而可能解决问题。

如果一切都失败了，请尝试以下说明来修复模拟器的已保存状态：

1.  卸载*WP7.1 SDK*
2.  手动删除这些文件夹：
    *   **%ProgramData%\Microsoft\XDE**
    *   **%LocalAppData%\Microsoft\XDE**
3.  再次安装*WP7.1 SDK*。
4.  安装*WP7.1.1 SDK 更新*：[http](http://www.microsoft.com/en-us/download/details.aspx?id=29233) ://www.microsoft.com/en-us/download/details.aspx?id=29233 。

**编辑：** 顺便说一句，您是否尝试过重新启动计算机？一旦这为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:04:07.083

好吧，我设法解决了这个问题。我重新安装了 Windows 并再次下载了 SDK 7.1。模拟器现在工作正常！@Paulos，感谢您的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T12:45:38.713

很长一段时间我都有同样的问题。试试这个：启动 Visual Studio 2010，但在开始调试之前，单击所有打开页面的选项卡，以便可以加载所有 xaml 页面和页面背后的代码。

我在打开Visual Studio的时候就注意到了，但是第一个打开的页面是代码隐藏页面而不是xaml页面，所以当我第一次点击xaml页面的选项卡时，当然加载xaml页面需要一些时间进入编辑器。但是，当该页面和一个或多个打开的 xaml 页面也被加载时，模拟器在没有错误消息的情况下启动。

# java - 自定义加密 GSM 通话

> ID：13787251
> 
> 赞同：9
> 
> 时间：2012-12-09T12:08:03.293
> 
> 标签：java, android, java-me, gsm

是否可以使用 Java（JME 或 Android）捕获语音音频流，对其进行自定义加密，然后通过常规 GSM 呼叫将其作为常规流发送？当然，在其他手机上解密密码。是否允许应用程序级别的 java 拦截音频流或在硬件级别禁用它？

是否已经有应用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T12:51:36.170

根据上面的几条评论，语音通话的访问级别只能通过有根电话才能实现，甚至是特定于设备的。对于通用加密语音应用程序，您可以做的最好的事情是使用数据连接的 VOIP / SIP 风格的应用程序。

即使您可以通过模拟呼叫进行加密也并非易事。GSM 编解码器中使用的压缩针对语音进行了优化，并对信号的特性做出了某些假设。您不能只使用简单的模拟 -> 数字 -> 加密 -> 模拟 -> 电话网络 -> 模拟 -> 数字 -> 解密 -> 模拟类型的信号链。

您可能会注意到我已经将模拟作为一个步骤包括在内，因为对 GSM 网络的所有最终数字编码都是由 GSM 无线电芯片组执行的，即使您已植根，您也无法从任何手机访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T16:37:48.857

移动网络在语音信道上执行有损转码，例如

*   “本机”编码/解码
*   回声消除器，
*   噪声发生器或
*   编解码器更改。

因此，我怀疑加密的语音数据流是否能够以允许在接收端解密的方式通过移动网络进行传输。

简单的类比：音频 -> 加密 -> MP3 压缩 -> MP3 解码 -> 解密 -> 音频。这可能行不通。或者：如果您完成这项工作，那么您就有机会通过语音载体传输加密流。

您的选择是在数据载体上执行此操作，通过 IP 传输加密语音。但这需要在移动设备上安装单独的电话应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-09T23:10:44.890

GSM 全速率语音编解码器以 13 kbits/s 的速度运行并使用常规脉冲激励 (RPE) 编解码器 - 这意味着 GSM 中的麦克风和语音检测经过优化，可通过时分复用“数字”通道进行传输，然后进行调制使用 GMSK（一种连续相位频移键控调制方案）通过空中接口。

“平均”语音模式以外的噪声被严重失真（或抑制） - 例如，DTMF（音调）在设备上无法很好地接收，必须由网络核心传输，但专为听障人士设计的音调效果很好。语音在进入编解码器（麦克风设计）时被整形（过滤），以便在另一端实现最佳编解码器检测和再现。

总而言之 - 不可能在 GSM 系统中“重新调制”，因为入口点不是无线电（空中接口），甚至无法访问 GSM 数字帧。您唯一的语音通话访问权限是 GSM 编解码器，它在有限的音频频谱中期待语音。

但是 - 如果您可以为 GSM 编解码器创建类似语音的波形，那么您可能有前进的道路

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-09T07:03:19.747

我知道有些应用程序可以像语音转换器一样改变你的声音并通过 gsm 语音传输。也许您可以制作一个应用程序来接收语音，然后将其调制为相移键控或数字无线电单拨号，例如在甚高频和高频无线电通信中使用的火腿并将音频传输到 gsm，然后将其解调回语音，而不是直截了当调制解调，您可以添加 pgp、aes 或任何您喜欢的加密。我也很想看到这样的项目。

我认为如果您可以使用它通过语音 gsm 通道（如过去的 56k 调制解调器而不是 gprs 通道）传输数据，那将是非常棒的。

见参考

```
http://freedv.org/tiki-index.php

http://www.aprs.org 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-28T02:48:48.780

在扬声器/MIC 现场编码模拟语音更实用。或者，你必须root Android才能修改phone.APP。就像AECall一样。它加密和解密耳机。 [http://mrhyper.blogspot.tw/2015/12/iphone-encrypt-phone-call_9.html](http://mrhyper.blogspot.tw/2015/12/iphone-encrypt-phone-call_9.html)

# ruby-on-rails - Rails 测试文件上传收到错误“找不到文件”

> ID：13787253
> 
> 赞同：1
> 
> 时间：2012-12-09T12:08:16.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我正在使用 RSpec (Rails 3.2) 来测试我的控制器。我有一个控制器，其中还包含一个文件上传（使用 CarrierWave），但我不断收到错误消息：

> 失败/错误：“图像”=>fixture_file_upload(Rails.root.join('spec', 'fixtures', 'files', 'image.png'), 'image/png') RuntimeError: .../spec/固定装置/文件/image.png 文件不存在

在我的控制器中，我定义了这样的图像上传：

```
 def valid_attributes
{ "title" => "My own title",
  "description" => "Something cool",
  "image" => fixture_file_upload(Rails.root.join('spec', 'fixtures', 'files', 'image.png'), 'image/png')
} 
```

结尾

我当然检查过该文件是否存在，但可能还有其他我忽略的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:56:57.327

似乎您必须使用`Rack::Test::UploadedFile.new`而不是`fixture_file_upload`在 Rails 3.2 中：

```
def valid_attributes
  { "title" => "My own title",
    "description" => "Something cool",
    "image" => Rack::Test::UploadedFile.new(Rails.root.join('spec', 'fixtures', 'files', 'image.png'), 'image/png')
  }
end 
```

请参阅此 SO 问题/答案：[fixture_file_upload has {file} 不存在错误](https://stackoverflow.com/questions/9011425/fixture-file-upload-has-file-does-not-exist-error)

# web-services - Webservice 客户端程序无法调用服务

> ID：13787256
> 
> 赞同：1
> 
> 时间：2012-12-09T12:08:41.203
> 
> 标签：web-services, cxf

我已经编写了一个示例 CXF Web 服务程序并在本地机器上使用 Apache 进行部署。

这是我的 WSDL 网址：

```
http://localhost:8080/SubstractWebService/SubWS?wsdl 
```

我可以访问它。

但是当我尝试运行客户端程序时，它会抛出错误 -->

* * *

```
Exception in thread "main" javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:149)
    at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:97)
    at javax.xml.ws.Service.<init>(Unknown Source)
    at com.service.substract.subwsdlfile.SubWSDLFile_Service.<init>(SubWSDLFile_Service.java:43)
    at com.service.substract.subwsdlfile.SubWSDLFile_SubWSDLFileSOAP_Client.main(SubWSDLFile_SubWSDLFileSOAP_Client.java:53)
Caused by: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:94)
    at org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:203)
    at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:147)
    ... 4 more
Caused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: Problem parsing 'http://localhost:8080/SubstractWebService/SubWS?wsdl'.: java.io.FileNotFoundException: http://localhost:8080/SubstractWebService/SubWS?wsdl
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:244)
    at org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:191)
    at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:92)
    ... 6 more
Caused by: java.io.FileNotFoundException: http://localhost:8080/SubstractWebService/SubWS?wsdl
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    ... 12 more 
```

客户端代码

```
package com.service.substract.subwsdlfile;

/**
 * Please modify this class to meet your needs
 * This class is not complete
 */

import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.namespace.QName;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.xml.bind.annotation.XmlSeeAlso;

/**
 * This class was generated by Apache CXF 2.6.1
 * 2012-12-09T17:44:09.725+05:30
 * Generated source version: 2.6.1
 * 
 */
public final class SubWSDLFile_SubWSDLFileSOAP_Client {

    private static final QName SERVICE_NAME = new QName("http://substract.service.com/SubWSDLFile/", "SubWSDLFile");

    private SubWSDLFile_SubWSDLFileSOAP_Client() {
    }

    public static void main(String args[]) throws java.lang.Exception {
        URL wsdlURL = SubWSDLFile_Service.WSDL_LOCATION;
        if (args.length > 0 && args[0] != null && !"".equals(args[0])) { 
            File wsdlFile = new File(args[0]);
            try {
                if (wsdlFile.exists()) {
                    wsdlURL = wsdlFile.toURI().toURL();
                } else {
                    wsdlURL = new URL(args[0]);
                }
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }
        }

        SubWSDLFile_Service ss = new SubWSDLFile_Service(wsdlURL, SERVICE_NAME);
        SubWSDLFile port = ss.getSubWSDLFileSOAP();  

        {
        System.out.println("Invoking substractOp...");
        com.service.substract.substractwsschema.SubsbtractRequest _substractOp_substractRequest = new com.service.substract.substractwsschema.SubsbtractRequest();
        _substractOp_substractRequest.setParam1(-735195532);
        _substractOp_substractRequest.setParam2(633197322);
        com.service.substract.substractwsschema.SubstractResponse _substractOp__return = port.substractOp(_substractOp_substractRequest);
        System.out.println("substractOp.result=" + _substractOp__return);

        }

        System.exit(0);
    }

}

package com.service.substract.subwsdlfile;

import java.net.MalformedURLException;
import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.ws.WebEndpoint;
import javax.xml.ws.WebServiceClient;
import javax.xml.ws.WebServiceFeature;
import javax.xml.ws.Service;

/**
 * This class was generated by Apache CXF 2.6.1
 * 2012-12-09T17:44:09.805+05:30
 * Generated source version: 2.6.1
 * 
 */
@WebServiceClient(name = "SubWSDLFile", 
                  wsdlLocation = "http://localhost:8080/SubstractWebService?wsdl",
                  targetNamespace = "http://substract.service.com/SubWSDLFile/") 
public class SubWSDLFile_Service extends Service {

    public final static URL WSDL_LOCATION;

    public final static QName SERVICE = new QName("http://substract.service.com/SubWSDLFile/", "SubWSDLFile");
    public final static QName SubWSDLFileSOAP = new QName("http://substract.service.com/SubWSDLFile/", "SubWSDLFileSOAP");
    static {
        URL url = null;
        try {
           //url = new URL("http://localhost:8080/SubstractWebService?wsdl");
            url = new URL("http://localhost:8080/SubstractWebService");
        } catch (MalformedURLException e) {
            java.util.logging.Logger.getLogger(SubWSDLFile_Service.class.getName())
                .log(java.util.logging.Level.INFO, 
                     "Can not initialize the default wsdl from {0}", "http://localhost:8080/SubstractWebService?wsdl");
        }
        WSDL_LOCATION = url;
    }

    public SubWSDLFile_Service(URL wsdlLocation) {
        super(wsdlLocation, SERVICE);
    }

    public SubWSDLFile_Service(URL wsdlLocation, QName serviceName) {
        super(wsdlLocation, serviceName);
    }

    public SubWSDLFile_Service() {
        super(WSDL_LOCATION, SERVICE);
    }

    /**
     *
     * @return
     *     returns SubWSDLFile
     */
    @WebEndpoint(name = "SubWSDLFileSOAP")
    public SubWSDLFile getSubWSDLFileSOAP() {
        return super.getPort(SubWSDLFileSOAP, SubWSDLFile.class);
    }

    /**
     * 
     * @param features
     *     A list of {@link javax.xml.ws.WebServiceFeature} to configure on the proxy.  Supported features not in the <code>features</code> parameter will have their default values.
     * @return
     *     returns SubWSDLFile
     */
    @WebEndpoint(name = "SubWSDLFileSOAP")
    public SubWSDLFile getSubWSDLFileSOAP(WebServiceFeature... features) {
        return super.getPort(SubWSDLFileSOAP, SubWSDLFile.class, features);
    }

} 
```

# python - Windows 上的 PyCrypto 安装错误

> ID：13787258
> 
> 赞同：16
> 
> 时间：2012-12-09T12:09:12.137
> 
> 标签：python, python-3.x, distutils, pycrypto

我正在尝试在我的计算机上安装[PyCrypto 2.6](http://pypi.python.org/pypi/pycrypto/2.6)库。但我不断收到以下错误

```
D:\Software\Python\package\pycrypto-2.6>python setup.py build
running build
running build_py
running build_ext
warning: GMP or MPIR library not found; Not building Crypto.PublicKey._fastmath.

building 'Crypto.Random.OSRNG.winrandom' extension
error: Unable to find vcvarsall.bat 
```

我的系统有 Windows 8 Pro 64 位、Visual Studio Enterprise 2012 和 Python 3.3

为了修复错误，我尝试按照fmuecke 在帖子错误中的`VS90COMNTOOLS=%VS110COMNTOOLS%`建议设置环境变量[：无法找到 vcvarsall.bat](https://stackoverflow.com/a/10558328/777593)但它对我不起作用。

谁能告诉我如何解决这个错误。

仅供参考，我不安装 VC2008 等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T13:04:37.353

我设法通过使用来自[The Voidspace Python Modules 的 Python3.3的](http://www.voidspace.org.uk/python/modules.shtml#pycrypto)[预构建二进制文件](http://www.voidspace.org.uk/downloads/pycrypto26/pycrypto-2.6.win-amd64-py3.3.exe)来安装 PyCrypto 2.6 。

它实际上并没有修复`error: Unable to find vcvarsall.bat`没有可用预构建二进制文件的其他包。

然而，它消除了构建 PyCrypto 包的需要，允许我在我的系统上安装 PyCrypto 而不会出现错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-26T16:15:04.943

我刚用过

[https://www.microsoft.com/en-gb/download/details.aspx?id=44266](https://www.microsoft.com/en-gb/download/details.aspx?id=44266)

使用 setuptools > 6.0 并运行

'点安装 pycrypto'

它奏效了

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-15T19:26:45.190

我知道这是一个老问题，但我今天也需要很多时间来获得 paramiko wokring。我想使用 Python 3.4，在 voidspace 上，没有 3.4 的预构建二进制文件。

最后，我通过安装“Microsoft Studio Express 2010 C++”得到了一个 wokring pycrypto，并从 pycrypto 2.7 文件夹运行：

```
python setup.py build --compiler msvc
python setup.py install
python setup.py bdist_wininst 
```

所有带有环境变量的“技巧”对我都不起作用。

如果它对某人有帮助，所有感谢都归于： http: [//flintux.wordpress.com/2014/04/30/pycrypto-for-python-3-4-on-windows-7-64bit/](http://flintux.wordpress.com/2014/04/30/pycrypto-for-python-3-4-on-windows-7-64bit/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-21T19:11:38.317

**对于 Python 3.5**，您可以这样做：

从此站点安装 PyCrypto 二进制文件： [https ://github.com/sfbahr/PyCrypto-Wheels](https://github.com/sfbahr/PyCrypto-Wheels)

最好的方法是：

**64位Python**

c:\Python35\Scripts\pip.exe 安装 --use-wheel --no-index --find-links= [https://github.com/sfbahr/PyCrypto-Wheels/raw/master/pycrypto-2.6.1 -cp35-none-win_amd64.whl](https://github.com/sfbahr/PyCrypto-Wheels/raw/master/pycrypto-2.6.1-cp35-none-win_amd64.whl) pycrypto

**32位Python**

c:\Python35\Scripts\pip.exe 安装 --use-wheel --no-index --find-links= [https://github.com/sfbahr/PyCrypto-Wheels/raw/master/pycrypto-2.6.1 -cp35-none-win32.whl](https://github.com/sfbahr/PyCrypto-Wheels/raw/master/pycrypto-2.6.1-cp35-none-win32.whl) pycrypto

当然用你的 python pip 路径替换*c:\Python35\Scripts\pip.exe*

要了解您的 python 版本，请运行 python 并查看括号中显示的体系结构：

C:\Users\utilisateur>python Python 3.5.1 |Anaconda 4.0.0（64 位）| （默认，2016 年 2 月 16 日，09:49:46）win32 上的 [MSC v.1900 **64 位**( **AMD64** )] 键入“帮助”、“版权”、“信用”或“许可证”以获取更多信息。

希望这能有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-15T14:11:37.777

您可以安装 mingw64，然后从 PyCrypto 解压缩文件目录运行：

python setup.py build --compiler=mingw32

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-05T09:06:39.820

有一个简单的方法，因此分享

1.  [从https://www.dropbox.com/s/fhsvbl6d6ecs303/pycrypto-2.6.1.win-amd64-py3.4.exe?dl=0](https://www.dropbox.com/s/fhsvbl6d6ecs303/pycrypto-2.6.1.win-amd64-py3.4.exe?dl=0)下载 exe
2.  跑`easy_install C:\your\pathToDownloadedFile\Downloads\pycrypto-2.6.1.win-amd64-py3.4.exe`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-03T15:10:17.027

**2021 年的更新答案**（许多其他答案已过时）

Python 2.7 是 EOL（生命周期结束），微软已经删除了 Visual C++ 8.0 编译器的下载链接，这是编译原生 Python 2.7 模块所必需的（后来他们称之为“Python 2.7 的 C++ 编译器”之类的东西） , `VCForPython27.msi`)。因此`pip install pycrypto`不再起作用。

To see for yourserlf, check out [this answer](https://stackoverflow.com/a/35119348/2279059) with a now defunct download link. Don't search for `VCForPython27` on GitHub - you will find projects, but they are not official Microsoft projects, so you may want to stay away from those.

If you find yourself in this situation, then seriously, it's high time to migrate to Python 3\. Don't download old builds of PyCrypto or Visual C++ 8.0 from random websites or from web archive links, especially not since this is a library for cryptography that should be kept up to date.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-13T19:11:52.857

我正在使用 Windows 10 - 我需要做的就是使用我在此页面上找到的 Visual C++ Build Tools 2015 更新我的系统：[https ://blogs.msdn.microsoft.com/pythonengineering/2016/04/11/unable-找到-vcvarsall-bat/](https://blogs.msdn.microsoft.com/pythonengineering/2016/04/11/unable-to-find-vcvarsall-bat/)

在页面中间，你会看到一些下载选项 - 选择你的 python 版本并下载正确的包

然后我重新导入了我试图安装的程序，没有更多错误！呜呼！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-20T00:04:29.977

如果你是 VS 2010

设置 VS90COMNTOOLS=%VS100COMNTOOLS%

对比 2012

设置 VS90COMNTOOLS=%VS110COMNTOOLS%

对比 2013

设置 VS90COMNTOOLS=%VS120COMNTOOLS%

然后 python setup.py install

# c# - 如何从 SQL 数据库中获取数据到表单中的几个组合框

> ID：13787259
> 
> 赞同：1
> 
> 时间：2012-12-09T12:09:11.740
> 
> 标签：c#, sql

**关于我的申请**

它存储了汽车服务中心的客户信息、车辆详细信息和服务详细信息！

**我做了什么**

*   我在 SQL 数据库中有一个表，用于存储（城市、州、Pincode ......）的名称
*   `TblState`我有一个表单，它将,中的值加载`TblCity`到`CustomerEntry`（表单）

这是代码......它工作得很好！

```
private void CustomersEntry_Load(object sender, EventArgs e)
        {
            cn = new SqlConnection(@"Data Source=Nick-PC\SQLEXPRESS;Initial Catalog=AutoDB;Integrated Security=True");
            cmd = new SqlCommand("select * from TblState", cn);
            cn.Open();
            SqlDataReader dr;

            try
            {
                dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    SelectState.Items.Add(dr["State"].ToString());
                }

            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }

            finally
            {
                cn.Close();
            } 
```

**结果**

*   `CustomerEntry`从 SQL 中获取数据并在下拉列表中返回。
*   我有一个`SubForm`向 SQL 数据库添加新数据，它工作正常并保存数据。

**我的问题**

当我尝试在 中添加新的状态名称`SubForm`并保存时，它不会反映 中的更改`CustomerEntry`，除非我关闭并重新打开它。

有没有办法可以在关闭`CustomerEntry`后立即刷新？`SubForm`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:17:17.233

关闭.Put 查询以刷新...`SubForm`的关闭事件时的下拉数据`SubForm`

```
 private void Sub_FormClosed(object sender, FormClosedEventArgs e)
     {
              CustomerEntry_Load(object sender, EventArgs e);
              //or it may be your logic to refresh the code on CustomerEntryForm
     } 
```

# linux - Subversion over ssh - 从 Windows 主机访问 Linux 上的远程存储库

> ID：13787260
> 
> 赞同：1
> 
> 时间：2012-12-09T12:09:15.483
> 
> 标签：linux, svn, tortoisesvn

我在**Mandriva Linux**中创建了一个存储库，并希望从 Windows 主机访问它。

```
mkdir /home/user/myrepo/
svnadmin create /home/user/myrepo/ 
```

为此，我安装了一个客户端 TortoiseSVN 1.7.9。

我设置路径 -

```
svn+ssh://user@ip/home/user/myrepo/ 
```

其中 ip== 远程 linux 主机的 ip。

我正在尝试对存储库进行审查，但出现错误 -

```
Unable to connect to a repository at URL 'svn+ssh://user@ip/home/user/myrepo/' Can't create tunnel. 
```

错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:15:24.103

你需要编辑你的配置文件（%appdata%\Subversion\config），有一个部分叫做`tunnels`你有一个这样的注释行：

```
ssh = C:\\Program Files\\TortoiseSVN\\bin\\TortoisePlink.exe 
```

如果您使用密钥进行授权，您可以添加此参数以跳过密码输入部分：

```
-i c:\\Path\\to\\putty-ssh-key.ppk 
```

# actionscript-3 - AS3 - 拦截和替换输入文本

> ID：13787261
> 
> 赞同：1
> 
> 时间：2012-12-09T12:09:16.530
> 
> 标签：actionscript-3

在文本字段中键入文本时是否有某种方法可以截取文本并在出现之前将其替换为其他内容？

我正在开发一个用于学习法语的 Flash 游戏，我希望允许用户在美式键盘上键入重音符号。在法语键盘上，“é”由“2”键产生。由于游戏不需要数字，我希望用户能够按“2”并在文本字段中显示“é”（其他重音符号也类似）。

我希望能够使用这样的 key_down 事件处理程序：

```
function myInputOnKeyDown(event:KeyboardEvent) {
     if (event.keyCode == 50) {
         event.charCode = 233; // = the code for 'é'
     }
} 
```

这在其他平台上有效，但在 Actionscript 3 中似乎根本不起作用。我尝试使用 key_down、key_up、text_input 事件，以十几种不同的方式调整事物，但没有成功：我似乎没有能够更改事件属性，只需阅读它们。

我还尝试停止事件传播并手动插入重音字符。这在正常使用中效果很好（`appendText()`例如，使用 ），但是复制文本字段的所有行为将需要太多编码：在光标处插入，而不仅仅是在结尾处；替换任何选定的文本，等等。

到目前为止，我想出的最好的方法是向 key_up 处理程序添加一个替换函数，如下所示：`text.replace(/2/, 'é')`。这样做的问题是，在数字 2 被重音字符替换之前，用户可以看到半秒钟：换句话说，它看起来很业余。我希望字符只是出现，就好像他们正在使用法语键盘一样。

我会很感激任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:29:10.510

按键处理程序和 event.stopImmediatePropagation() 应该可以解决问题。

# templates - 在 angularjs 视图之外进行更改

> ID：13787263
> 
> 赞同：3
> 
> 时间：2012-12-09T12:09:22.747
> 
> 标签：templates, binding, routing, angularjs

我正在使用 Angular 的 Routeprovider 和 ngView 来制作我的 webapp。但是，ng-view 是页面主体内的一个 div，但是当当前路由发生变化时，我还想更改标题标签，可能还有一些元标签。最好的方法是什么？将另一个 ng-controller 附加到 html 标签，并使用 $location 服务从那里控制标题和元标签的内容？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:17:21.210

那么这很容易做到。在不给你代码的情况下，我正在分享已经给出的解决方案的链接。[http://www.bennadel.com/blog/2425-Decorating-Scope-Methods-In-The-AngularJS-Prototype-Chain.htm](http://www.bennadel.com/blog/2425-Decorating-Scope-Methods-In-The-AngularJS-Prototype-Chain.htm)

# c# - 动态返回控制器的所有动作

> ID：13787265
> 
> 赞同：0
> 
> 时间：2012-12-09T12:09:46.507
> 
> 标签：c#, asp.net-mvc-3

我发现以下代码可以从控制器名称中获取所有操作。

```
Type t = typeof(YourControllerType);
MethodInfo[] mi = t.GetMethods();
foreach (MethodInfo m in mi)
{
    if (m.IsPublic)
        if (typeof(ActionResult).IsAssignableFrom(m.ReturnParameter.ParameterType))
            methods = m.Name + Environment.NewLine + methods;
} 
```

我想通过传递控制器名称使以下代码动态作为函数，如下所示：

```
 public string get_all_action(type ob)
        {
            string methods = "";
            Type t = typeof(ob);
            MethodInfo[] mi = t.GetMethods();

            foreach (MethodInfo m in mi)
            {
                if (m.IsPublic)
                    if (typeof(ActionResult).IsAssignableFrom(m.ReturnParameter.ParameterType))
                        methods = m.Name + Environment.NewLine + methods;
            }

            return methods;
        } 
```

但是我很困惑在定义和调用函数时应该将什么类型的参数传递给函数。我有以下代码来获取所有控制器并将控制器名称传递给 get_all_action()。

```
var asm = Assembly.GetExecutingAssembly();
            var controllerTypes = from d in asm.GetExportedTypes() where typeof(IController).IsAssignableFrom(d) select d;
            foreach(var val in controllerTypes)
            {                
               string actionname = get_all_action(val.Name);

            } 
```

在这里， val.Name 是字符串类型，因此它会引发异常：

```
Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:13:24.727

您的`get_all_action`方法期望接收 Type 作为输入参数，而您尝试使用 String（即类型名称）作为输入参数来调用它。

这里的行：

```
string actionname = get_all_action(val.Name); 
```

应该改为：

```
string actionname = get_all_action(val); 
```

您的方法的前几行`get_all_action`应更改为：

```
public string get_all_action(Type controllerType)
{
    string methods = "";
    MethodInfo[] mi = controllerType.GetMethods(); 
```

# laravel - Laravel 自定义验证

> ID：13787266
> 
> 赞同：3
> 
> 时间：2012-12-09T12:09:57.737
> 
> 标签：laravel, laravel-3

*--- 自定义验证类 (application/libraries/validator.php) ---*

```
 class Validator extends Laravel\Validator {
    public function validate_passwdU($attribute, $value, $parameters){
        $r_uppercase    = '/[A-Z]/';  //Uppercase
        $default_min = 1;
        if(is_numeric($parameters[0])>=$default_min){
        $default_min = $parameters[0];
        }
        return (preg_match_all($r_uppercase,$value, $matches)>=$default_min);       
    }
} 
```

*--- 应用程序/语言/en/validation.php ---*

```
 "passwdU" => "The :attribute must be at least :size uppercase characters." 
```

*- - 控制器 - -*

```
 $rules = array(
        'passwd' => 'required|min:8|passwdU:2'
    );

    $validation = Validator::make($input, $rules);

    if ($validation->fails())
    {
        return Redirect::to('URL')->with_errors($validation);
    } 
```

*- - 输入 - -*

密码 = 11111111

*- - 看法 - -*

```
<pre>
<?php print_r($errors); ?>
</pre> 
```

*- - 输出 - -*

```
Laravel\Messages Object
(
    [messages] => Array
    (
        [passwd] => Array
            (
                [0] => validation.passwdU
            )

    )
    [format] => :message
) 
```

为什么我没有收到我在语言文件中定义的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:24:19.067

将消息方法传递给视图

```
return Redirect::to('login')
    ->withErrors($validator->messages()) 
```

并用get方法打印

```
{{ $errors->get('email') }} 
```

为我工作：

```
The email field is required. 
```

# knockout.js - 敲掉，用按钮可见的切换不起作用

> ID：13787267
> 
> 赞同：1
> 
> 时间：2012-12-09T12:10:01.443
> 
> 标签：knockout.js

我已经尝试过用于简单切换 3 div 的淘汰赛 js。似乎当我通过复选框切换值时，它正在工作，但是如果我更新模型值。它根本无法正常工作，我尝试了 if 和可见绑定。

下面是链接。

http://jsfiddle.net/xP579/1/

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:18:39.543

当您使用`ko.observable`调用定义一个可观察对象时，它将返回一个`function`. 因此，当您想为 observable 分配新值时，您需要将其作为函数调用，并以新值作为参数：

```
self.goDefineForm = function () {
            self.defineParticipant(false);
            self.defineForm(true);
            self.defineOutcome(false);
} 
```

一个工作的[JSFiddle](http://jsfiddle.net/nemesv/xP579/3/)

您可以从文档中了解有关[可观察对象的更多信息。](http://knockoutjs.com/documentation/observables.html)

# iphone - 将委托添加到自定义 UITableView

> ID：13787270
> 
> 赞同：0
> 
> 时间：2012-12-09T12:10:44.523
> 
> 标签：iphone, objective-c, ios, uitableview, delegates

我`UITableView`在我的 中集成了一个自定义`ViewController`，包含更多元素，并且我尝试添加到`UITableView`控件以刷新其内容，例如 twitter 应用程序。问题是我无法在 ViewController 中捕获 tableview 的滚动。如果我设置了`delegate`custom `UITableView`，那么我可以捕获滚动，但我会遇到自定义表格行为的问题。所以，我不知道有什么更好的方法，要么找到为滚动添加委托而不覆盖任何内容的方法，要么找到一种方法来添加控件以从 ViewController 刷新表格，而不是从 UITableView 类。

更详细的案例是：

*   自定义 UITableView 的库。它用于绘制消息应用程序之类的对话。所以我只是将信息传递给表格，表格绘制它。我什么也不做，不委托，什么都没有，只是将表添加到我的 ViewController 中。

*   我将滚动委托的方法放在我的 ViewController 中，当我在表格中滚动时，我什么也没有得到（应用程序没有进入滚动的委托方法）。如果我将表的委托设置为 self，滚动可以工作，但我从表中得到一些随机问题（我不知道它是如何制作表的），所以我必须放弃这个选项（设置委托）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:33:17.673

尝试使用 UIRefreshControl 对象。您在 viewDidLoad 方法的 viewController 中定义此对象，并在其值更改时将目标添加到您的 tableView，这是一个示例：

```
self.refreshControl = [[UIRefreshControl alloc] init];
[self.refreshControl addTarget:self.tableView action:@selector(reloadData) forControlEvents:UIControlEventValueChanged]; 
```

但是，您的 viewController 必须是 UITableViewController。要启动和结束刷新，请使用以下方法：

```
[self.refreshControl beginRefreshing];
[self.refreshControl endRefreshing]; 
```

# objective-c - 使用 Json 解析字符串时出现链接器错误

> ID：13787274
> 
> 赞同：1
> 
> 时间：2012-12-09T12:11:57.663
> 
> 标签：objective-c, json

我正在尝试使用 JSON 来解析我从 ASIHttpRequest 获得的刺痛，但我发现链接器错误，例如

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_SBJsonParser", referenced from:
objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation 
```

下面是我正在使用的代码。有关更多详细信息，我已经在项目中添加了 Json 类。

```
(void)requestFinished:(ASIHTTPRequest *)request{
    // Use when fetching text data
    NSString *responseString = [request responseString];

    SBJsonParser *parser=[[SBJsonParser alloc]init ];
    NSDictionary *obj=[parser objectWithString:responseString error:NULL];
    NSArray *list=[obj objectForKey:@"lessons"];
    // Use when fetching binary data
   //  NSData *responseData = [request responseData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:10:01.703

从搜索中我发现我们必须在编译源中包含 .m Json 文件。我们可以通过单击项目->目标->构建阶段->编译源->添加所有 json .m 文件来完成此操作

# python - 如何查看 matplotlib 旁边的图例？

> ID：13787275
> 
> 赞同：4
> 
> 时间：2012-12-09T12:12:04.280
> 
> 标签：python, matplotlib

我在 matplotlib 中有一个情节，其中有很多行。我有一个相当广泛的图例，我使用以下代码将它放在我的情节旁边：

```
fontP = FontProperties()
fontP.set_size('small')
plt.legend(variablelist, loc=0, prop = fontP, bbox_to_anchor=(1.0, 1.0))
plt.savefig(filename+'.png') 
```

结果如下： ![在此处输入图像描述](../Images/938d518b765fc917b098af7d607c77c0.png)

但是，如您所见，图例在右侧被截断。有没有办法可以在图像的右侧创建更多空间，以便我可以看到完整的图例？

欢迎所有提示！

作为对@mmgp 的回应，我在下面发布了以下代码。正如您从他的回答中看到的那样，我忘记添加`bbox_inches='tight'`到 savefig 部分。因此，为了让未来的读者拥有一个完整工作的代码，我刚刚`bbox_inches='tight'`在下面的代码中添加了它，这使它工作得非常好.. :) ：

```
from random import random
import matplotlib.pyplot as plt
from matplotlib.font_manager import FontProperties

mylist = []
for a in range(10):
    mylist.append([])
    for b in range(10):
        mylist[a].append(random())

x = range(len(mylist))
for enum, i in enumerate(mylist):
    plt.plot(x, mylist[enum], label='label_'+str(enum))

plt.grid(b=True)
fontP = FontProperties()
fontP.set_size('small')

variablesList = []
for i in range(10):
    variablesList.append('label_'+str(i))

legenda = plt.legend(variablesList, loc=0, prop = fontP, bbox_to_anchor=(1.0, 1.0))
plt.savefig('testplot.png', bbox_extra_artists=[legenda], bbox_inches='tight') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T13:37:39.553

现在差不多了，只需在`savefig`:中添加一个新参数`bbox_inches = 'tight'`。这使得 matplotlib 为您的绘图计算出所需的大小。

# php - 使用表单加载php文件，在html中提交按钮

> ID：13787281
> 
> 赞同：0
> 
> 时间：2012-12-09T12:12:53.197
> 
> 标签：php, html

以下代码是 HTML 和 php 代码。我想要如果按下提交按钮而不是执行 practice.php 文件（制作 test.txt 文件）。但是如果我按下按钮 php 不会生成文件。有谁知道这个？？

```
<HTML>
    <HEAD>
    </HEAD>
    <BODY onLoad="tid=setInterval('refresh()',1000);">
        <div id="outputDiv"></div>
        <form method=post action="practice.php">
            <script language="JavaScript">
            function refresh()
            {           
                var HTML = "";
                HTML += "<input type=submit value=makefile>";
                document.getElementById("outputDiv").innerHTML = HTML;
            }
            </script>
        </form>
    </BODY>
</HTML> 

<html>
    <head><meta http-equiv="Content-Type" content="text/html" charset="utf-8">
    </head>

    <body>
                <?
                    $fp = fopen("test.txt", "w") or die("cannot open file");
                    $data = "!!!!!!!!!!!!!!!!!!!";
                    fwrite($fp, $data);
                    fclose($fp);
                    echo "!!!!!!!!!!!!!!!";
                ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T12:21:30.977

使用“a”标志，如果文件不存在，它将自动创建。

```
$fp = fopen("test.txt", "a") 
```

使用 JQuery，它会很简单。

```
<input type="submit" value="Load file" id="button"/>
<script>
//If document is ready.
$(document).ready(function(){

  //If button is clicked.
  $("#button").click(function(){

   //Load a file in "outputdiv" div.
   $("#outputDiv").load("test.txt");

   //Assuming you are trying to refresh div after 1000 ms sec, Therefor:
   setInterval(function(){

    $("#outputDiv").load("test.txt");

     },1000);
   });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T12:24:06.513

您必须将提交按钮放在表单元素内。该脚本将提交按钮放在`<div id="outputDiv"></div>`表单元素之外的元素内。当您按下提交时，浏览器不知道要提交哪个表单。

例如，这会更好：

```
<HTML>
    <HEAD>
    </HEAD>
    <BODY onLoad="tid=setInterval('refresh()',1000);">
        <form method=post action="practice.php" id="form">
            <script language="JavaScript">
            function refresh()
            {           
                var HTML = "";
                HTML += "<input type=submit value=makefile>";
                document.getElementById("form").innerHTML += HTML;
            }
            </script>
        </form>
    </BODY>
</HTML> 
```

# php - 包括调用相同定义文件的多个文件

> ID：13787283
> 
> 赞同：0
> 
> 时间：2012-12-09T12:13:33.587
> 
> 标签：php, oop

我的`require_once`代码有问题。

我有一个名为的文件`definitions.php`，它存储了我所有的基本 DEFINE，例如数据库密码、用户名、一些链接等...

然后我有一个名为 的文件`config.php`，我在其中构建了基本类，并从该文件中调用`definitions.php`with 。`require_once`

然后我有多个文件，存储我使用的基本类和函数的扩展。

我想要一个文件`includes.php`，其中列出了所有这些文件，因此在页面上，我只调用`includes.php`.

我曾尝试仅列出文件中的文件`includes.php`，`require_once`但我收到了一个错误，即 DEFINE 已定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:28:03.957

答案是检查是否在末尾附加了“_once”。错过了那个。Tnx伊万。

# google-apps-script - 尝试为我的 UI 部署 Web 应用程序失败：“缺少未定义的文档（可能已删除？）”

> ID：13787285
> 
> 赞同：1
> 
> 时间：2012-12-09T12:14:13.947
> 
> 标签：google-apps-script

我正在尝试将我的脚本部署为我在电子表格中创建的 Web 应用程序。我已按照 google 的说明处理了版本管理问题，但是当我尝试部署应用程序时，当我尝试为我的最新代码测试网络应用程序时收到以下消息：“缺少未定义的文档（也许它已被删除？）

我知道电子表格存在。我正在部署应用程序，因为我需要应用程序 URL 作为我的代码的一部分。我正在尝试通过电子邮件自动化审批流程。部署应用程序时，我选择了最新版本，选择以“用户访问网络应用程序”的身份执行应用程序，因为我想共享此应用程序，并将谁可以访问该应用程序设置为“只有我自己”。当我单击发送到我的电子邮件的应用程序 URL 时，我还被告知“您请求的页面（或文档）不存在”。

我对此很陌生。我按照本教程获得了我所拥有的：http: [//youtu.be/K2uLzJdEVCA](http://youtu.be/K2uLzJdEVCA)

然而，在视频中，它不称为部署 Web 应用程序，而是称为发布脚本。我想这是新的东西。无论如何，我需要应用程序 URL。

这是我的代码，以防其中有缺陷。

```
function approve() {
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = spreadsheet.getSheetByName('Editors');
  var data = sheet.getDataRange().getValues();
  for (var i = 0; i < data.length; i++) {
    var row = data[i];
    var fName = row[1];
    var lName = row[2];
    var email = row[3];
    var approved = row[4];
    var notified = row[5];

    if(approved.toLowerCase() == 'yes' && notified.toLowerCase() != 'yes'){
      GmailApp.sendEmail(email, "Request Approved: CI&W Community Edit Permission", "You may now make edits to the site!") ;
      data[i][5]= 'yes';
     }
  }
  sheet.getDataRange().setValues(data);

}

function onOpen() {
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  spreadsheet.addMenu('Functions', [
    { name: 'Approve', functionName: 'approve' }
                     ]);

}

function onFormSub(event) {
  var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = spreadsheet.getSheetByName('Editors');
  var fName = event.namedValues["First Name"];
  var lName = event.namedValues["Last Name"];
  var email = event.namedValues["Email"];
  var url = 'I paste in the app URL i am given here';
  url += '&spreadsheetId=' + spreadsheet.getId();
  url += '&row=' + sheet.getLastRow();
  Browser.msgBox(spreadsheet.getId())
  var message = 'Name: ' + fName + ' ' + lName + '\nEmail: ' + email + '\nApprove: ' + url;
  MailApp.sendEmail('fakeemail@gmail.com', 'New Edit Request: CI&W', message);

}

function doGet(event) {
  var spreadsheetId = event.parameter['spreadsheetId'];
  var spreadsheet = SpreadsheetApp.openById(spreadsheetId);
  var sheet = spreadsheet.getSheetByName('Editors');
  var row = event.parameter['row'];

  sheet.getRange(row,5).setValue('yes');
  var app = UiApp.createApplication();
  var label = app.createLabel();
  label.setText('The request was approved');
  app.add(label);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:10:20.643

Webapp url 需要有 2 个参数：电子表格 ID 和行号。您是否使用正确添加的参数对其进行了测试？这也可以在视频中看到（但由于暴力视频压缩而难以阅读） ![在此处输入图像描述](../Images/05c4a701015bf96ce05a2aa73e77bf46.png)

关于发布/部署为 webapp，您是对的：进程的名称已更改，但大致相同......不用担心。

* * *

**编辑：**经过进一步检查，有一个“？” 在网址末尾和参数之前缺少！（这种变化来自 webapp url 的新构造方式）

代码应该是这样的：

```
 function onFormSub(event) {
      var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
      var sheet = spreadsheet.getSheetByName('Editors');
      var fName = event.namedValues["First Name"];
      var lName = event.namedValues["Last Name"];
      var email = event.namedValues["Email"];
      var url = 'https://script.google.com/macros/s/AKfycbyIfU-Qxp7urPdsD1iuYY2arBIeHya2Z7UPgdvMib67kFHNUWbQ/exec?';
      url += '&spreadsheetId='+spreadsheet.getId()
      url += '&row=' + sheet.getLastRow();
      Browser.msgBox(spreadsheet.getId())
      var message = 'Name: ' + fName + ' ' + lName + '\nEmail: ' + email + '\nApprove: ' + url;
      MailApp.sendEmail('xxxx@gmail.com', 'New Edit Request: CI&W', message);
} 
```

# android-fragments - Android - NestedFragments 参与填充选项菜单

> ID：13787287
> 
> 赞同：15
> 
> 时间：2012-12-09T12:14:28.780
> 
> 标签：android-fragments, fragmentpageradapter

我正在实现新的嵌套片段功能并且偶然发现了一个问题。我的观点基本上是这样的：一个主要活动（**A**）包括一个片段（**B**），这个片段（**B**）包括一个分页适配器，它有 3 个页面，每个页面也是一个片段（**C**）。在新的 getchildfragmentmanger 之前，这是不可行的，但它工作得很好。但是确实出现了一个问题，我希望片段 C 能够参与填充选项菜单。我厌倦了将 setHasOptionsMenu(true) 放在我的每个**C**片段的 onActivityCreated 方法中，并覆盖 onCreateOptionsMenu 但没有任何反应......如果我尝试从片段**B填充菜单**（这是寻呼机适配器的容器）我可以更改菜单项...

有什么想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T18:00:32.353

是的他们可以。

使用 android 4.2 或支持库修订版 11 嵌套片段参与填充选项菜单，因为您始终需要`setHasOptionsMenu(true)`在`onCreate()`.

但是如果你使用 ActionBarSherlock 他们不会，你必须从父片段`onCreateOptionsMenu()`嵌套片段方法手动调用`onCreateOptionsMenu()`。

**更新**：[问题](https://github.com/JakeWharton/ActionBarSherlock/issues/828)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-09T13:15:27.090

`FragmentManager`从我对源代码的阅读来看，似乎`Activity`只有根的`FragmentManager`实现才能添加到选项菜单/操作栏，而不是子`FragmentManager`实例。

片段 B 可能需要代表 的内容管理选项菜单/操作栏，`ViewPager`根据分页器中显示和隐藏的页面更改选项菜单/操作栏中的内容。

# css - CSS：如果元素为 display:none，则保持对象的浮动和 nth-child 清除

> ID：13787288
> 
> 赞同：1
> 
> 时间：2012-12-09T12:14:33.090
> 
> 标签：css, css-float, responsive-design, css-selectors

这很难解释，这就是为什么我创建了一个[jsfiddle](http://jsfiddle.net/K4rXM/embedded/result/)来可视化我的问题。

我有一个元素网格，其中每四个元素都会被清除`clear:left`。

我有一个切换（在我的真实情况下是一个过滤器），它隐藏了一些浮动元素，我想向上移动其余元素并仍然保持 4by4 网格。

```
<div class="item"> 1 </div>
<div class="item"> 2 </div>
…

.item:nth-of-type(4n+1) { clear: left; } 
```

请参阅此示例：http: [//jsfiddle.net/K4rXM/](http://jsfiddle.net/K4rXM/)

当点击“做它！” 链接`nth-of-type`规则有点被忽视。突然所有元素都向左浮动，并且在第 4 个元素之后没有清晰。

这实际上只是稍微描述了我的问题。实际上，像我这样的响应式布局有点复杂。

对我有什么想法和提示吗？提前谢谢你，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:29:04.910

```
$('#test').click(function(e) {
e.preventDefault();
$('.item').hide();
$('.call').show();
$('.item:visible').each(function (i) {
if (i % 4 == 0) $(this).addClass('clearLeft');
});
});

.clearLeft{clear:left;} 
```

在我的评论中，它仍在计算隐藏的 div，您必须检查哪些是可见的，然后应用一个类。 [http://jsfiddle.net/calder12/K4rXM/4/](http://jsfiddle.net/calder12/K4rXM/4/)

# entity-framework - 实体框架 5 工作单元模式 - 我应该在哪里调用 SaveChanges？

> ID：13787289
> 
> 赞同：3
> 
> 时间：2012-12-09T12:14:45.320
> 
> 标签：entity-framework, asp.net-mvc-4, repository-pattern, unit-of-work, savechanges

如果这似乎是一个重复的问题，请提前道歉。[这个问题](https://stackoverflow.com/questions/2075754)是我能找到的最接近的问题，但它并不能真正解决我面临的问题。

我在 ASP.NET MVC4 应用程序中使用 Entity Framework 5 并尝试实现工作单元模式。

我的工作单元类实现`IDisposable`并包含我的派生对象上下文类的单个实例`DbContext`，以及许多存储库，每个存储库都派生自公开所有常用存储库功能的通用基础存储库类。

对于每个 HTTP 请求，Ninject 创建一个 Unit of Work 类的实例并将其注入控制器，并在请求完成时自动释放它。

由于 EF5 抽象了数据存储，而 Ninject 管理对象上下文的生命周期，因此它似乎是使用代码访问内存中实体对象的完美方式，而无需显式管理它们的持久性。换句话说，为了优化关注点分离，我设想我的控制器操作方法能够使用和修改存储库数据，而无需`SaveChanges`事后显式调用。

我第一次（天真的）尝试实现这个想法，`SaveChanges`在每个修改数据的存储库基类方法中调用了一个调用。当然，我很快意识到这既不是性能优化（尤其是在对同一个方法进行多次连续调用时），也不能适应操作方法直接修改从存储库中检索到的对象的属性的情况。

因此，我改进了我的设计，以消除这些过早的调用，`SaveChanges`并在处理 Unit of Work 实例时将它们替换为单个调用。这似乎是 MVC 中工作单元模式最简洁的实现，因为工作单元自然地限定为请求。

不幸的是，在构建了这个概念之后，我发现了它的致命缺陷——在 a 中添加或删除的对象在被调用之前[不会被反映，甚至在本地](https://stackoverflow.com/questions/6990618)`DbContext`也不会被反映。`SaveChanges`

那么，您对消费代码应该能够在不显式持久化对象的情况下使用对象的想法有何看法？而且，如果这个想法似乎有效，那么使用 EF5 实现它的最佳方法是什么？

非常感谢您的建议，

蒂姆

更新：根据@Wahid 的回复，我在下面添加了一些测试代码，这些代码显示了消费代码必须显式调用的一些情况`SaveChanges`：

```
var unitOfWork = _kernel.Get<IUnitOfWork>();
var terms = unitOfWork.Terms.Entities;

// Purge the table so as to start with a known state 
foreach (var term in terms)
{
    terms.Remove(term);
}

unitOfWork.SaveChanges();

Assert.AreEqual(0, terms.Count());

// Verify that additions are not even reflected locally until committed.
var created = new Term { Pattern = "Test" };
terms.Add(created);
Assert.AreEqual(0, terms.Count());

// Verify that additions are reflected locally once committed.
unitOfWork.SaveChanges();
Assert.AreEqual(1, terms.Count());

// Verify that property modifications to entities are reflected locally immediately 
created.Pattern = "Test2";
var another = terms.Single(term => term.Id == created.Id);
Assert.AreEqual("Test2", another.Pattern);
Assert.True(ReferenceEquals(created, another));

// Verify that queries against property changes fail until committed
Assert.IsNull(terms.FirstOrDefault(term => term.Pattern == "Test2"));

// Verify that queries against property changes work once committed
unitOfWork.SaveChanges();
Assert.NotNull(terms.FirstOrDefault(term => term.Pattern == "Test2"));

// Verify that deletions are not even reflected locally until committed.
terms.Remove(created);
Assert.AreEqual(1, terms.Count());

// Verify that additions are reflected locally once committed.
unitOfWork.SaveChanges();
Assert.AreEqual(0, terms.Count()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T13:07:20.800

**首先**，根本不`SaveChanges`应该**在存储库中**。因为那会导致您失去`UnitOfWork`.

**其次**，您需要制作一种特殊的方法来保存`UnitOfWork`.

如果你想自动调用这个方法，那么你可以使用其他一些解决方案，比如`ActionFilter`或者让你的所有控制器都从`BaseController`类继承并处理`SaveChanges`它。

**无论如何，`UnitOfWork`应该总是有`SaveChanges`方法。**

# php - 使用 MD5 并防止 SQL 注入

> ID：13787293
> 
> 赞同：0
> 
> 时间：2012-12-09T12:15:18.407
> 
> 标签：php, sql-injection

> **可能重复：**
> [如何防止 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

我需要知道在 php 网站中停止 SQL 注入的最佳方法是什么。我也有问题。当我触发任何包含具有“或”的数据的查询时，查询不会执行其功能。这是什么原因以及可能的解决方案是什么？我还需要知道什么是 MD5 以及我如何使用它用于存储数据的代码。另外，是否可以将 MD5 文本恢复为原始文本？

我如何使用 MD5 哈希将密码存储在 php.ini 中。以及以后如何使用它们，据我所知，不可能恢复 MD5。

# drupal-7 - Drupal 7：支持文件实体字段的多重上传

> ID：13787298
> 
> 赞同：1
> 
> 时间：2012-12-09T12:16:14.327
> 
> 标签：drupal-7, filefield, multifile-uploader

有没有办法通过“文件实体”/“文件实体内联”支持进行多文件上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:43:41.883

据我所知，开箱即用的 Drupal 中不支持多次上传。但是有几个提供该功能的贡献模块 - 查看此比较列表：[Node 的多个文件上传](http://groups.drupal.org/node/155764)。

对于图像，我使用[Plup](http://drupal.org/project/plup)模块，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:22:21.073

是的，您可以使用 [http://drupal.org/sandbox/fangel/1652676](http://drupal.org/sandbox/fangel/1652676)媒体多选模块 media-2.x-dev file_entity-2.x-dev [http://drupal.org/project/plupload](http://drupal.org/project/plupload) [http://drupal .org/project/multiform](http://drupal.org/project/multiform)

注意：这不使用 file_entity_inline 组合，但每个文件旁边都有一个编辑按钮。

# javascript - 在 Javascript 中使用 Sleep 迭代数组

> ID：13787300
> 
> 赞同：0
> 
> 时间：2012-12-09T12:16:51.167
> 
> 标签：javascript, jquery, ruby-on-rails, arrays, json

嗨，我正在 RubyOnRails 中创建一个站点。我在客户端显示一些内容时遇到问题。我想要做的就像新闻一样，每 10 秒后，新闻就会改变。我所做的是我做了一个 ajax 从我的服务器获取新闻，服务器在 json 响应中返回数组。现在我在客户端拥有了所有的新闻数组，我想以 10 秒的间隔一个一个地显示。我已尝试使用此代码，但除了最新消息外，它没有显示任何内容。

```
function get_news(){
    $.ajax({
          url : "my.json",
          success:function(data){
              // data is array of json like [{"html" : "dfsf"},{"html":"ddd"}]
              news_change(data);
          }
    });
}

get_news();

function news_change(feed){
    $.each(feed,function(index,f){
        var feed_html = f.html;
        $('#news_div').fadeOut('slow', function(){
          $('#news_div').html(feed_html);
          $('#news_div').fadeIn('slow');
        });
        sleep(10000);
    });
}

function sleep(milliseconds) {
    var start = new Date().getTime();
    for (var i = 0; i < 1e7; i++) {
        if ((new Date().getTime() - start) > milliseconds){
          break;
        }
    }
} 
```

当我执行此代码时，它只显示最后的新闻。它还挂起我的浏览器。请告诉我这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:21:30.340

使用 setTimeout 或 setInterval，它们会在一定的毫秒数后异步执行代码。循环是同步的，并在执行时锁定浏览器。

```
// this will execute get_news every 10,000 ms
var newsInterval = setInterval(get_news, 10000);

// if you ever want to stop the interval, use clearInterval
clearInterval(newsInterval); 
```

请注意，`get_news`执行 ajax 调用可能需要一些时间，这意味着您的新闻不会每 10 秒更新一次。

编辑：要每 10 秒遍历一次新闻数组，您需要将该`news_change`函数传递给 setInterval：

```
var newsInterval;

function get_news(){
    $.ajax({
        url : "my.json",
        success:function(data) {
            newsInterval = setInterval(function () {
                news_change(data);
            }, 10000);
        }
    });
}

get_news();

// if you ever want to stop the interval, use clearInterval
clearInterval(newsInterval); 
```

# performance - visual studio 2012 web 性能测试，在 post 请求中出现 Validation of viewstate MAC failed 错误

> ID：13787301
> 
> 赞同：2
> 
> 时间：2012-12-09T12:16:59.297
> 
> 标签：performance, validation, testing, web, viewstate

在 Visual Studio 2012 中使用 Web 性能测试时，仅对发布请求运行测试后会导致以下错误：

视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:41:18.657

问题已解决 我从 web.config 禁用了 enableEventValidation、enableViewStateMac

# javascript - jQuery隐藏 - 如何知道元素是否已经开始隐藏但仍然可见？

> ID：13787302
> 
> 赞同：1
> 
> 时间：2012-12-09T12:17:04.333
> 
> 标签：javascript, jquery, hide

我有输入的表格。输入的答案和可见性可能会影响位于其下方的其他输入的可见性。

我有 javascript 函数，当某些输入的值发生变化时会调用该函数。该功能正在检查每个输入并检查其可见性和答案。根据该信息，它可能会隐藏或显示一些其他输入。一个循环就足够了，因为元素的可见性不会影响先前元素的可见性。

```
$(".test_this").each(function() {
    var id_number = $(this).attr("id").split("_")[1];
    var tested_id = parseInt(id_number) + 1;
    if ($(this).find("input:checked").val() != 1 || $(this).is(":hidden")) {
        if ($("#element_"+tested_id).is(":visible")) {
            $("#element_"+tested_id).hide();
        }
    }
    else {
        if ($("#element_"+tested_id).is(":hidden")) {
            $("#element_"+tested_id).show(500);   
        }                     
    }                  
}); 
```

我的代码运行良好，但我想为隐藏功能添加持续时间，但随后我的可见性检查失败。是否有可能知道某些元素是否已经开始隐藏但仍然可见？

我不想使用回调函数，因为它是在延迟之后执行的。其次，我不想更改隐藏输入的值。一种解决方案是添加一些可以检查存在的额外类，但是有没有更好的方法来做到这一点？

我在小提琴中的代码：http: [//jsfiddle.net/nmUPj/3/](http://jsfiddle.net/nmUPj/3/)

有关更多信息，我的实际代码要复杂得多，并且从 MySQL 获取有关表单的信息并使用 PHP 生成表单和 javascript 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:22:07.853

您可以通过以下方式检查元素是否仍在动画：

```
$("#element_"+tested_id).is(":animated") 
```

或者，你可以给你的 show() 一个回调函数，

```
$("#element_"+tested_id).show(5000, function(){
    alert('animation completed');
}); 
```

# mysql - MySQL查询列出我发过消息或收到消息的朋友

> ID：13787311
> 
> 赞同：4
> 
> 时间：2012-12-09T12:18:32.053
> 
> 标签：mysql, sql

这是我的两张表：

```
TABLE: friends

'id' // primary id, auto increment
'uid' // user id who sent friend request
'fid' // friend id who received friend request
'status' //status of friendship, 1=active 
```

.

```
TABLE: messages

'id' // message id (primary id), auto increment
'uid' // user who sent the message
'fid' // friend who received the message
'time' // time when the message was sent
'status' // status of message, read or unread. 
```

我只想显示我发送消息或接收消息的朋友列表，按最后一次发送消息的时间（由朋友或我）排序。一位朋友应该只列出一次。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:53:22.783

> 我只想显示我发送消息或接收消息的朋友列表，按最后一次发送消息的时间（由朋友或我）排序。

尝试这个：

```
SELECT DISTINCT friends.id
FROM messages m
INNER JOIN
(
    SELECT uid id FROM friends WHERE status = 1 AND fid = myuserid
    UNION ALL
    SELECT fid FROM friends WHERE status = 1 AND uid = myuserid
) friends ON m.fid = friends.id OR m.uid = friends.id 
```

但是，如果有一个`users`表，你可以这样做：

```
SELECT 
  senders.name 'From', 
  recievers.name 'To', 
  m.id, 
  m.body, 
  m.messagetime,
  m.status
FROM messages m
INNER JOIN
(
    SELECT uid id FROM friends WHERE status = 1 AND fid = 1
    UNION ALL
    SELECT fid    FROM friends WHERE status = 1 AND uid = 1
) friends ON m.fid = friends.id OR m.uid = friends.id
INNER JOIN users senders ON m.uid = senders.id
INNER JOIN users recievers ON m.fid = recievers.id
WHERE m.uid = 1 
   OR m.fid = 1
ORDER BY m.messagetime ASC OR DESC 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/cb0db/1)

例如，这将为您提供：

```
| FROM | TO | ID |   BODY | MESSAGETIME | STATUS |
--------------------------------------------------
|   Me |  B |  1 |  hiiii |  2012-12-01 |      1 |
|    c | Me |  7 | sadfds |  2012-12-01 |      1 |
|   Me |  B |  8 |    ddd |  2012-12-10 |      1 | 
```

* * *

## 这个查询是如何工作的？

查询：

```
SELECT uid id FROM friends WHERE status = 1 AND fid = myuserid
UNION ALL
SELECT fid    FROM friends WHERE status = 1 AND uid = myuserid 
```

会给你你朋友的名单，你的朋友是：

*   用户向您发送了友谊请求并接受了，或者
*   用户向他发送友谊请求，他接受了。

这就是为什么我在您的用户 ID 中使用 a 的原因`UNION ALL`，`fid =`并且我还假设这`status = 1`意味着友谊请求被接受。

这些是你的朋友。然后，要获取您已向其发送消息或从其接收消息的朋友列表，我们必须将此结果集与`messages`表连接起来。但是要获取发送给您的消息或您发送的消息，我们必须选择加入条件`m.fid = friends.id OR m.uid = friends.id`。而已。

# api - 场地历史分页

> ID：13787313
> 
> 赞同：0
> 
> 时间：2012-12-09T12:19:14.363
> 
> 标签：api, pagination, foursquare

我们应该如何通过`venuehistory`( [https://developer.foursquare.com/docs/users/venuehistory](https://developer.foursquare.com/docs/users/venuehistory) ) 端点进行分页？在文档中，它提到了两个参数`beforeTimestamp`和`afterTimestamp`，但结果集不包含要从中分页的参考时间戳点。我错过了什么吗？

***背景***

我目前正在测试一个包含 22 个项目的帐户，所以分页可能还没有开始，但覆盖这种情况仍然很好。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:13:39.703

/users/venuehistory 返回用户的整个场地历史，因此通常不需要对其进行分页。如果您只想显示某个时间段的历史记录（例如仅显示 1 月份的签到，用于签到的日历视图），则使用 beforeTimestamp 和 afterTimestamp。

# javascript - Three.js 代码在场景中什么都没有显示？

> ID：13787314
> 
> 赞同：0
> 
> 时间：2012-12-09T12:19:24.080
> 
> 标签：javascript, three.js

我已经使用 Three.js 创建了简单的示例，我之前用它构建了一些代码，但它没有组织为类，问题是在 mof=defying 代码之后视图中没有显示任何内容。

HTML 文件

```
<!DOCTYPE html>
<html>
<head>
    <title> </title>
</head>
<body>

<div id="scenecontainer"></div>

<script src="../js/libs/three.js/three.js"></script>
<script src="../js/libs/Detector.js"></script>
<script src="../js/libs/stats.min.js"></script>
<script src="../js/libs/RequestAnimationFrame.js"></script>

<script src="../js/lab/common/CommonExperiment.js"></script>
<script src="../js/lab/common/commonMain.js"></script>
</body>
</html> 
```

main.js

```
var viewport;
var commonExperiment;

function main() {
    viewport = document.getElementById("scenecontainer");
    commonExperiment = new CommonExperiment(viewport);
    commonExperiment.addTestCube();
    commonExperiment.animate();
}

main(); 
```

CommonExperiment.js

```
function CommonExperiment(domElement, renderStatistics) {
    this.testMesh = undefined;

    this.scene = undefined;
    this.renderer = undefined;
    this.stats = undefined;
    this.camera = undefined;
    this.renderStatistics = ( renderStatistics != undefined ) ? renderStatistics : true;
    this.domElement = domElement;

    this.init();
}

CommonExperiment.prototype.init = function () {
    if (Detector.webgl) {
        this.renderer = new THREE.WebGLRenderer({
            antialias:true, // to get smoother output
            preserveDrawingBuffer:true
        });
    } else {
        Detector.addGetWebGLMessage();
        return;
    }

    this.renderer.setSize(window.innerWidth, window.innerHeight);
    this.domElement.appendChild(this.renderer.domElement);

    if (this.renderStatistics) {
        this.stats = new Stats();
        this.stats.domElement.style.position = 'absolute';
        this.stats.domElement.style.bottom = '0px';
        document.body.appendChild(this.stats.domElement);
    }

    // create a scene
    this.scene = new THREE.Scene();

    // put a camera in the scene
    this.camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    this.camera.position.z = 1000;
    this.scene.add(this.camera);

};

CommonExperiment.prototype.animate = function () {
    requestAnimationFrame(this.animate.bind(this));

    this.render();
//    console.log("ahmed");

    if (this.stats) {
        this.stats.update();
    }
};

// just test donot use
CommonExperiment.prototype.addTestCube = function () {
    var geometry = new THREE.CubeGeometry(200, 200, 200);
    var material = new THREE.MeshBasicMaterial({ color:0xff0000, wireframe:true });
    this.testMesh = new THREE.Mesh(geometry, material);
    this.scene.add(this.testMesh);
};

// to be overide
CommonExperiment.prototype.render = function () {
    this.testMesh.rotation.x += 0.01;
    this.testMesh.rotation.y += 0.02;
}; 
```

有什么帮助吗？不胜感激:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:32:45.283

对不起，我忘了添加

```
this.renderer.render(this.scene,this.camera); 
```

在渲染循环结束时。

谢谢 ：） 。

# c# - 我的 Ace oledb 连接字符串的语法是否正确？

> ID：13787315
> 
> 赞同：1
> 
> 时间：2012-12-09T12:19:37.217
> 
> 标签：c#, winforms, oledb, ms-jet-ace

我刚开始学习编程，我正在尝试在 c# 中创建一个 windows 窗体，这将允许我通过数据网格查看 excel 文件，并能够使用 Oledb 的 ace 连接来操作数据。所以我把这个连接字符串放在我的表单加载中，但问题是它不会填充我设置的数据网格。任何形式的帮助都可以，如果您需要更多信息，请告诉我。

```
 private void Form1_Load(object sender, EventArgs e)
    {

        con = new OleDbConnection(@"provider=microsoft.ace.oledb.12.0; data source=<<file path goes here>>;Extended Properties=""Excel 12.0 Xml;HDR=YES";"");
        loaddata();
        showdata();

    }
    void loaddata()
    {
        da = new OleDbDataAdapter("select * from [assets$]", con);
        ds = new DataSet();
        da.Fill(ds, "assets");
        ds.Tables[0].Constraints.Add("pk_Userno", ds.Tables[0].Columns[0], true);
        //this can be changed to any other item that you want to use as a primary key.)
        dataGridView1.DataSource = ds.Tables[0];
    }
    void showdata()
    {
        usertxtbx.Text = ds.Tables[0].Rows[Userno][0].ToString();
        brandtxtbx.Text = ds.Tables[0].Rows[Userno][1].ToString();
        modeltxtbx.Text = ds.Tables[0].Rows[Userno][2].ToString();
    } 
```

# django - Django NoReverseMatch 外壳错误

> ID：13787316
> 
> 赞同：0
> 
> 时间：2012-12-09T12:19:45.283
> 
> 标签：django, permalinks

我在这里看到了很多关于它的问题，但仍然不明白这个话题。我的 model.py 中有一个 Task 类和一个 File 类：

```
class File(models.Model):
    timestamp = models.DateTimeField()
    file_name = models.CharField(max_length=140)
    file = models.FileField(upload_to='task_files') # add separation by tasks
    description = models.TextField()
    class Meta:
        ordering = ['timestamp']
    def __unicode__(self):
        return str(self.id)+" "+self.file_name
    @models.permalink
    def get_absolute_url(self):
        return ('todoes.views.test_task',('one_time',str(self.id)),{})
        # return ('food.views.restaurant_details', (), {'restaurant_id': [str(self.id)]})
        # return ('food.views.restaurant_details', (str(self.id),), {})

class Task(models.Model):
    name = models.CharField(max_length=140)
    description = models.TextField()
    # client = models.ForeignKey(Client)
    priority = models.PositiveSmallIntegerField()
    category = models.ForeignKey(Categories)
    start_date = models.DateTimeField()
    due_date = models.DateTimeField()
    done_date = models.DateTimeField(blank = True, null = True)
    when_to_reminder = models.DateTimeField()
    # worker = models.ForeignKey(Worker)
    worker = models.ForeignKey(Person, related_name = "worker_for_task",blank = True, null = True)
    client = models.ForeignKey(Person, related_name = "client_for_task",blank = True, null = True)
    resource = models.ForeignKey(Resource, blank = True, null = True)
    note = models.ManyToManyField(Note, related_name = "for_task",blank = True, null = True)
    file = models.ForeignKey(File, related_name = "for_task", blank = True, null = True)
    percentage = models.PositiveSmallIntegerField()
    pbu = models.ForeignKey(ProblemByUser)
    pbw = models.ForeignKey(ProblemByWorker,blank = True, null = True)
    confirmed = models.BooleanField(default=False)
    confirmed_date = models.DateTimeField(blank = True, null = True)
    children_task = models.ManyToManyField('Task',related_name = "parent_task",blank = True, null = True)
    deleted = models.BooleanField(default=False)
    acl = models.TextField(default=False)
    def __unicode__(self):
        return u";".join((str(self.id),self.name,"\t"+self.worker.fio))
    class Meta:
        ordering = ['priority','due_date'] 
```

我通过管理面板上传了任务文件，并希望显示该文件的链接：views.py

```
...
        try:
            if task_type == 'one_time':
                files = File.objects.filter(for_task=task_full).order_by('-timestamp')
            if task_type == 'regular':
                files = File.objects.filter(for_regular_task=task_full).order_by('-timestamp')
        except File.DoesNotExist:
            files = ('Нет подходящих заметок',)
... 
```

任务.html

```
<ul>
    {% for file in files %}
        <li> <a href="{{file.get_absolute_url}}">{{file.name}}</a>
    {% endfor %}
</ul> 
```

但我什么也没看到。我尝试用 shell 检查它并得到那个错误：

```
$ python manage.py shell
Python 2.7.2 (default, Dec  3 2011, 00:02:07)
[GCC 4.2.2 20070831 prerelease [FreeBSD]] on freebsd9
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from tasks.todoes.models import Note, Resource, File, Person, Task, ProblemByWorker, ProblemByUser, Categories, RegularTask
>>> files = File.objects.filter(for_task='102').order_by('-timestamp')
>>> file = files[0]
>>> file
<File: 1 ReklamaRestart.vbs>
>>> file.get_absolute_url
<bound method File.get_absolute_url of <File: 1 ReklamaRestart.vbs>>
>>> file.get_absolute_url()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/django/utils/functional.py", line 55, in _curried
    return _curried_func(*(args+moreargs), **dict(kwargs, **morekwargs))
  File "/usr/local/lib/python2.7/site-packages/django/db/models/base.py", line 887, in get_absolute_url
    return settings.ABSOLUTE_URL_OVERRIDES.get('%s.%s' % (opts.app_label, opts.module_name), func)(self, *args, **kwargs)
  File "/usr/local/lib/python2.7/site-packages/django/db/models/__init__.py", line 35, in inner
    return reverse(bits[0], None, *bits[1:3])
  File "/usr/local/lib/python2.7/site-packages/django/core/urlresolvers.py", line 391, in reverse
    *args, **kwargs)))
  File "/usr/local/lib/python2.7/site-packages/django/core/urlresolvers.py", line 337, in reverse
    "arguments '%s' not found." % (lookup_view_s, args, kwargs))
NoReverseMatch: Reverse for 'todoes.views.test_task' with arguments '('one_time', '1')' and keyword arguments '{}' not found. 
```

我做错了什么？

# java - Java.util.zip 替换单个 zip 文件

> ID：13787318
> 
> 赞同：8
> 
> 时间：2012-12-09T12:20:02.320
> 
> 标签：java, zipoutputstream

## 问题

我有一个现有的 zip 文件“main.zip”。我想替换其中的一个文件，“比如 main.zip/foo”。

## 我知道：

[http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipOutputStream.html](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipOutputStream.html)

但是，这并不能满足我的要求，因为它会创建一个新的 Zip 文件——因此我还必须在 main.zip 中添加所有现有条目。

## 问题：

有没有办法在 Java 的 Zip 存档中“替换”单个文件？（无需重新创建新的 zip 存档并复制所有旧数据）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-09T13:41:08.303

我认为你很幸运。

将 java 7与我`java.nio.file.FileSystem`一起使用，`Files.copy()`我设法在瞬间将一个文本文件插入到一个大的 zipfile 中。

```
public static void main(String[] argv) {
    Path myFilePath = Paths.get("c:/dump2/mytextfile.txt");

    Path zipFilePath = Paths.get("c:/dump2/myarchive.zip");
    try( FileSystem fs = FileSystems.newFileSystem(zipFilePath, null) ){
        Path fileInsideZipPath = fs.getPath("/mytextfile.txt");
        Files.copy(myFilePath, fileInsideZipPath);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

它使用 ZipFileSystem 提供程序“挂载”zip。然后，您可以将任何您想要的内容复制到其中。这些变化似乎发生在`fs.close()`

[阅读更多@甲骨文](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)

# java - 从类路径访问资源文件

> ID：13787319
> 
> 赞同：2
> 
> 时间：2012-12-09T12:20:33.010
> 
> 标签：java, web-services, classpath

我正在尝试从我的类路径访问我的资源文件。我已将所有资源存储在一个名为“config”的文件夹中，该文件夹已添加到我的构建路径中。现在的问题是，我无法访问它们。我尝试了以下选项，但它们似乎都不起作用。一切都返回 null。

```
String resourceName = "/config/LPANewCommonModelSchema.xsd";
System.out.println(getClass().getClassLoader().getResource(resourceName));
System.out.println(getClass().getResource(resourceName));
System.out.println(Thread.currentThread().getContextClassLoader().getResource(resourceName));

String resourceName = "config/LPANewCommonModelSchema.xsd";
System.out.println(getClass().getClassLoader().getResource(resourceName));
System.out.println(getClass().getResource(resourceName));
System.out.println(Thread.currentThread().getContextClassLoader().getResource(resourceName));

String resourceName = "/LPANewCommonModelSchema.xsd";
System.out.println(getClass().getClassLoader().getResource(resourceName));
System.out.println(getClass().getResource(resourceName));
System.out.println(Thread.currentThread().getContextClassLoader().getResource(resourceName));

String resourceName = "LPANewCommonModelSchema.xsd";
System.out.println(getClass().getClassLoader().getResource(resourceName));
System.out.println(getClass().getResource(resourceName));
System.out.println(Thread.currentThread().getContextClassLoader().getResource(resourceName)); 
```

编辑：有人要求等级制度， ![在此处输入图像描述](../Images/961103729d6c71ce98fc58d16ae3586b.png)

在此先感谢，哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:31:54.897

试试这个（假设当前的 calss 在资源文件夹旁边）

> ```
> InputStream in = this.getClass().getClassLoader()
>                                 .getResourceAsStream("config/LPANewCommonModelSchema.xsd"); 
> ```

或这个

> ```
> InputStream in = this.getClass().getResourceAsStream("/config/LPANewCommonModelSchema.xsd"); 
> ```

# java - 在 Nimbus 中更改选项卡的颜色

> ID：13787320
> 
> 赞同：-1
> 
> 时间：2012-12-09T12:20:53.867
> 
> 标签：java, swing, look-and-feel, nimbus

> **可能重复：**
> [覆盖每个组件实例的 Swing Nimbus L&F 原色](https://stackoverflow.com/questions/6922368/override-swing-nimbus-lf-primary-color-per-component-instance)

如何更改 Nimbus PLAF 中选项卡的默认颜色？

选择选项卡时，颜色将为橙色，未选择的选项卡应为灰色。请给我一些代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:24:46.463

我只是谷歌它看到这也许可以帮助 [http://www.jasperpotts.com/blog/2008/08/nimbus-uimanager-uidefaults/](http://www.jasperpotts.com/blog/2008/08/nimbus-uimanager-uidefaults/)

# c++ - 字符串流未完全填充

> ID：13787323
> 
> 赞同：0
> 
> 时间：2012-12-09T12:21:10.367
> 
> 标签：c++, sstream

为什么这段代码片段：

```
 if (iErr) {
    std::stringstream ss;
    string serror("error");
    ss << "lua error code " << iErr << ": " << lua_tostring(lua, -1);
    ss >> serror;

    Log *log= StandardLog::getInstance();
    log->logError("Lua error following in next line");
    log->logError(serror);

    //lua_pop(lua, 1);/* pop error message from the stack */
    return 1;
 } 
```

只需打印：

```
Lua error following in next line
lua 
```

代替

```
Lua error following in next line
lua error code 3: lua/generator/generator_example_nodenavigator.lua:10: attempt to call global 'require' (a nil value) 
```

Logger 行如下所示：

```
void Logger::log(char message[]){
    string smessage(message);
    log(smessage);
}

void Logger::log(string smessage){
    ...
} 
```

但似乎记录器没有错，因为我使用 cerr 得到了相同的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:24:09.830

输入运算符`>>`只提取直到下一个空格。使用[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)或[`stringstream::str`](http://en.cppreference.com/w/cpp/io/basic_stringstream/str)函数来获取字符串。

我的建议是更改为[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)并使用[`std::ostringstream::str`](http://en.cppreference.com/w/cpp/io/basic_ostringstream/str)：

```
std::ostringstream oss;

oss << "lua error code " << iErr << ": " << lua_tostring(lua, -1);

Log *log= StandardLog::getInstance();
log->logError("Lua error following in next line");
log->logError(oss.str()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:24:14.103

您正在使用的提取运算符从输入流中读取以*空格分隔的字符串。*因此，当它到达我们输入的第一个空格时它会停止。

只需更换

```
log->logError(serror); 
```

和

```
log->logError(ss.str()); 
```

（你根本不需要`serror`）。

# c# - 使用 ServiceStack 使用 REST Web 服务时的用户身份验证

> ID：13787324
> 
> 赞同：9
> 
> 时间：2012-12-09T12:21:26.730
> 
> 标签：c#, json, web-services, authentication, servicestack

[ServiceStack](http://www.servicestack.net)文档充满了关于如何使用*服务器端*实现用户身份验证的示例。但是如何在客户端设置用户凭据？

我使用 ServiceStack 来使用这样的`JSON REST`服务：

```
var restClient = new JsonServiceClient (baseUri);
var response = restClient.Get<MyResponse> ("/some/service"); 
```

如何向请求添加任何形式的身份验证？我想使用的网络服务使用`OAuth 1.0`，但我也有兴趣添加自定义身份验证。

在我的代码中，我之前已成功执行 OAuth 令牌交换，因此我已经拥有一个有效的访问令牌，现在需要使用此访问令牌及其`token_secret`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T18:12:26.743

ServiceStack 的[AuthTests](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/AuthTests.cs#L108)显示了使用 ServiceStack 服务客户端时的不同身份验证方式。默认情况下，BasicAuth 和 DigestAuth 内置在客户端中，例如：

```
var client = new JsonServiceClient(baseUri) {
    UserName = UserName,
    Password = Password,
};

var request = new Secured { Name = "test" };
var response = client.Send<SecureResponse>(request); 
```

在幕后，ServiceStack 将尝试正常发送请求，但当请求被服务器拒绝和质询时，客户端将自动重试相同的请求，但这次使用 Basic/Digest Auth 标头。

当您知道您正在访问安全服务时，要跳过额外的跃点，您可以告诉客户端始终发送 BasicAuth 标头：

```
client.AlwaysSendBasicAuthHeader = true; 
```

验证的另一种方法是显式调用`Auth`服务（这需要启用 CredentialsAuthProvider），例如：

```
var authResponse = client.Send<AuthResponse>(new Auth {
    provider = CredentialsAuthProvider.Name,
    UserName = "user",
    Password = "p@55word",
    RememberMe = true,  //important tell client to retain permanent cookies
});

var request = new Secured { Name = "test" };
var response = client.Send<SecureResponse>(request); 
```

成功调用`Auth`服务后，客户端已通过身份验证，如果设置了**RememberMe**，客户端将保留服务器在后续请求中添加的会话 Cookie，这使得来自该客户端的未来请求能够通过身份验证。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-09T19:47:02.153

回答我自己，因为我找到了一种使用`LocalHttpWebRequestFilter`钩子的好方法`JsonServiceClient`：

为了使用 OAuth 1.0a 保护 Web 服务，每个 http 请求都必须发送一个特殊的[`Authorization:`](https://www.rfc-editor.org/rfc/rfc5849#section-3.5.1)标头。在此标头字段中，必须发送使用请求的某些特征作为输入数据的哈希（签名），例如主机名、请求 url[等](https://www.rfc-editor.org/rfc/rfc5849#section-3.4)。

现在看来`LocalHttpWebRequestFilter`，ServiceStack 在发出 http 请求之前就调用了它，并公开了底层`HttpWebRequest`对象，人们可以在其中添加额外的标头并访问请求的所需字段。

所以我的解决方案现在基本上是：

```
var client = new JsonServiceClient (baseUri);

client.LocalHttpWebRequestFilter += (request) => {
    // compute signature using request and a previously obtained
    //  access token 
    string authorization_header = CalculateSignature (request, access_token);

    request.Headers.Add ("Authorization", authorization_header);
};
var response = client.Get<MySecuredResponse> ("/my/service"); 
```

请注意，我使用[Devdefined.OAuth](https://github.com/bittercoder/DevDefined.OAuth)库在`CalculateSignature()`. 在上述服务调用之前，OAuth 要求的请求令牌的创建、获取用户授权以及将请求令牌交换为访问令牌是在 ServiceStack 之外完成的。

# javascript - 提取句子的一部分

> ID：13787333
> 
> 赞同：0
> 
> 时间：2012-12-09T12:22:14.070
> 
> 标签：javascript, regex, string

我怎样才能提取这样的句子的一部分：

```
var sentence = "This is my sentence. I want to extract a part of it (in javascript !)";
var subSentence1 = "nt t";
var subSentence2 = "t (in javasc";

var result1 = f(sentence,subSentence1);
var result2 = f(sentence,subSentence2); 
```

我想要：

> 结果1 =“想要”

和

> result2 =“它（在javascript中”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:40:15.087

你必须逃避你的`subSentence`变量，所以`(`应该是`\(`哪个手段`t (in javasc`应该是`t \(in javasc`。

对正则表达式中使用的所有字符串变量使用字符串替换。

```
var subSentence1 = subSentence1.substring('(', '\('); 
```

将给出所需结果的正则表达式是这些。

```
var patt = new RegExp("[^\s]*nt t.*?(?=\s)")
var patt = new RegExp("[^\s]*t \(in javasc.*?(?=\s)") 
```

所以你把你的 subSentence 变量放在`[^\s]*`和之间`.*?(?=\s)`。

构造一个正则表达式字符串，如

```
var patt = new RegExp("[^\s]*" + subSentence + ".*?(?=\s)") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:15:18.853

如果您不熟悉正则表达式，我建议您看看这个必备[参考](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)。在我没有使用正则表达式并且忘记了语法之后，我个人总是会参考它。

# c# - 如果值不正确，则将焦点重新设置在 ComboBox 上

> ID：13787335
> 
> 赞同：0
> 
> 时间：2012-12-09T12:22:50.157
> 
> 标签：c#, combobox, lostfocus

我正在尝试设置我的 ComboBoxes，以便用户可以从列表中选择或设置自己的值（组合框用于自定义分辨率，因此会有默认值，或者他们可以提供自己的值）。

我正在尝试这样做，以便如果它们的值不正确（低于 0 或不是 Int），那么它会显示一个工具提示并防止它失去焦点。这是我的代码：

```
private void cmbX_Graphics_Width_LostFocus(object sender, EventArgs e)
{
    int i = 0, width = 0;

    TLQAShared._debug("Lost Focus Fired");

    for (i = 0; i < cmbX_Graphics_Width.Items.Count; i++)
    {
            if (cmbX_Graphics_Width.Text.Equals(cmbX_Graphics_Width.Items[i].ToString()))
            {
                Properties.X.Default.Graphics_Width = int.Parse(cmbX_Graphics_Width.Items[i].ToString());
                TLQAShared._debug("FOUND!");

                return;
            }

            TLQAShared._debug("FOR: " + i.ToString() + "/" + (cmbX_Graphics_Width.Items.Count - 1).ToString() + ": " + cmbX_Graphics_Width.SelectedText + ":" + cmbX_Graphics_Width.Items[i].ToString());
    }

    TLQAShared._debug("Not true: '" + cmbX_Graphics_Width.Text + "'");

    if (int.TryParse(cmbX_Graphics_Width.Text.ToString(), out width))
    {
        TLQAShared._debug("TryParse: true");

        Properties.X.Default.Graphics_Width = width;
    }
    else
    {
        tt.SetToolTip(cmbX_Graphics_Width, "You must supply a valid integer");

        this.ActiveControl = cmbX_Graphics_Width;
        TLQAShared._debug("TryParse invalid.");
    }
} 
```

但是，如果控件失去焦点，此代码将执行两次，第一次在此部分停止：

```
TLQAShared._debug("Not true: '" + cmbX_Graphics_Width.Text + "'"); 
```

然后再次执行，但执行整个代码，但不会阻止控件失去焦点。

我有两个问题：首先：这是最佳做法吗？如果不是，我应该怎么做？其次：如果这是最佳实践，我将如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-22T11:42:24.450

用于`combobox1.Select();`组合框中的焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:25:57.940

我认为这不是一个好习惯。我会这样做：

1.  创建一个函数来检查输入是否有效（int > 0）
2.  当用户尝试输入输入时调用此函数
3.  如果输入无效调用`combobox.focus()`

# php - Javascript：如果用户在下拉菜单中选择了不同的选项，如何清除验证错误

> ID：13787338
> 
> 赞同：0
> 
> 时间：2012-12-09T12:23:10.157
> 
> 标签：php, javascript

我在下面有一个 javscript 验证功能：

```
function editvalidation() {
    var isDataValid = true;

    var currentCourseO = document.getElementById("currentCourseNo");
    var newCourseNoO = document.getElementById("newCourseNo");
    var newCourseNameO = document.getElementById("newCourseName");
    var newCourseDurationO = document.getElementById("newDuration");
    var currentCourseMsgO = document.getElementById("currentAlert");
    var newCourseIdMsgO = document.getElementById("courseidAlert");
    var newCourseNameMsgO = document.getElementById("coursenameAlert");
    var newDurationMsgO = document.getElementById("durationAlert");

    newCourseIdMsgO.innerHTML = "";
    newCourseNameMsgO.innerHTML = "";
    newDurationMsgO.innerHTML = "";
    currentCourseMsgO.innerHTML = "";

    if (currentCourseO.value == "") {
        $('#targetdiv').hide();
        currentCourseMsgO.innerHTML = "Please Select a Course to edit from the Course Drop Down Menu";
        isDataValid = false; 
    } else {
        if (newCourseNoO.value == "") {
            $('#targetdiv').hide();
            newCourseIdMsgO.innerHTML = "Please fill in the Course ID in your Edit";
            isDataValid = false;
        }

        if (newCourseNameO.value == "") {
            $('#targetdiv').hide();
            newCourseNameMsgO.innerHTML = "Please fill in the Course Name in your Edit";
            isDataValid = false;        
        }

        if (newCourseDurationO.value == "") {
            $('#targetdiv').hide();
            newDurationMsgO.innerHTML = "Please select a Course Duration in your Edit";
            isDataValid = false;   
        }

        return isDataValid;
    }
} 
```

它说`currentCourseO.value == ""`的是，说明选择的下拉选项值是否为“”，或者换句话说，请选择。但我还想检查的是，如果用户从下拉菜单中选择了另一个选项，它会清除验证错误消息。但我该怎么做呢？

下拉菜单如下：

```
$courseHTML = '<select name="courses" id="coursesDrop">'.PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

$courseInfo = array();

while ( $courseqrystmt->fetch() ) {
    $courseHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbCourseId,$dbCourseNo,$dbCourseName) . PHP_EOL; 

    $courseData = array();
    $courseData["CourseId"] = $dbCourseId;
    $courseData["CourseNo"] = $dbCourseNo;
    $courseData["CourseName"] = $dbCourseName;
    $courseData["Duration"] = $dbDuration;

    array_push($courseInfo, $courseData);
}

$courseHTML .= '</select>'; 
```

更新：

下面是表格：

```
$editcourse = "
<form id='updateCourseForm'>

    <p><strong>Current Course Details:</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='currentCourseId' name='CourseIdcurrent' value='' /> </td>
    </tr>
    <tr>
    <th>Course ID:</th>
    <td><input type='text' id='currentCourseNo' name='CourseNocurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Course Name:</th>
    <td><input type='text' id='currentCourseName' name='CourseNamecurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Duration (Years):</th>
    <td><input type='text' id='currentDuration' name='Durationcurrent' readonly='readonly' value=''/> </td>
    </tr>
    </table>
    <div id='currentAlert'></div>

    <p><strong>New Course Details:</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='newCourseId' name='CourseIdnew' value='' /></td>
    </tr>
    <tr>
    <th>Course ID:</th>
    <td><input type='text' id='newCourseNo' name='CourseNoNew' value='' />
    <div id='courseidAlert'></div>
    </td>
    </tr>
    <tr>
    <th>Course Name:</th> 
    <td><input type='text' id='newCourseName' name='CourseNameNew' value='' /> 
    <div id='coursenameAlert'></div>
    </td>
    </tr>
    <tr>
    <th>Duration (Years):</th> 
    <td id='data'>{$durationHTML}
    <div id='durationAlert'></div></td>
    </tr>
    </table>

    </form>

    <p id='submitupdatebtn'><button id='updateSubmit'>Update Course</button></p>

";

echo $editcourse; 
```

发生的情况是，当单击提交按钮时，我使用 javascript 来确定是否满足 editvalidation() 函数，如果没有错误则显示确认，否则它将显示来自 editvalidation() 的相关错误消息。我意识到我实际上有一个更改 jquery 功能，如果下拉菜单确实更改了选项，那么它会做一些事情。所以我猜这将是关键功能

```
function showConfirm() {
    var courseNoInput = document.getElementById('newCourseNo').value;
    var courseNameInput = document.getElementById('newCourseName').value;
    var durationInput = document.getElementById('newDuration').value;

    if (editvalidation()) {
        var confirmMsg=confirm("Are you sure you want to update the following:" + "\n" + "Course ID: " + courseNoInput +  "\n" + "Course Name: " + courseNameInput + "\n" + "Duration (Years): " + durationInput);

        if (confirmMsg==true) {
            submitform();   
        }
    }
} 

$('#coursesDrop').change(function() {
     $('#newDuration')[0].selectedIndex = this.selectedIndex;
}); 

$('body').on('click', '#updateSubmit', showConfirm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:44:36.780

```
$("#currentCourseNo").change(function(){
    if($("#currencCourseNo").val()!="")
    {
        $("#currentAlert").html("");
    } else {
        $("#currentAlert").html("error message here");
    }
}); 
```

无论如何，您都在使用 jQuery，只需使用`onchange`表单元素的事件并动态*显示/隐藏*错误即可。在这种情况下，真的不需要等待提交函数。

# mysql - 网站; 让用户添加位置并获取坐标

> ID：13787339
> 
> 赞同：2
> 
> 时间：2012-12-09T12:23:18.550
> 
> 标签：mysql, web, maps, coordinates

我一直在开发一个网站，用户可以在其中添加一个地方（比如城市中的商店）并将其存储在数据库中。现在我希望能够在我的网站上的交互式地图上显示这些地方。我有一个 bing 地图开发人员密钥，但如果我有坐标（经度/纬度），我似乎只能显示数据。真的吗？如果是这样，一旦用户添加新数据，我如何自动获取坐标？

例如：您在 City XYZ 添加 Store XYZ，但您不必输入坐标。现在，此信息已存储，但我没有坐标..

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:29:05.063

如果您没有任何计划允许您的用户在地图中插入地点位置或通过填写一些纬度/经度数据，我建议您使用谷歌网络服务来获取这些地点的地理位置。您需要将您发送的输入格式化为地址之类的内容，以使其正常工作。

[请参阅此 Google 文档](https://developers.google.com/maps/documentation/geocoding/)

# php - 登录 PHP 脚本显示错误

> ID：13787340
> 
> 赞同：-1
> 
> 时间：2012-12-09T12:23:19.387
> 
> 标签：php, login

请不要在这里评论告诉我我的 SQL 注入，我已经知道了 :)...

每次我使用我的 login.html 页面（链接到 login.php 文件）时，代码都会生成以下消息：“请输入有效的用户名和密码！” 代码之前工作正常，所以我不确定我做错了什么......

代码如下：

```
<?php
$username = $_POST['username'];
$password = $_POST['password'];

if ($username&&$password)
{
    $connect = mysql_connect("localhost","user_ben","password") or die ("Couldn't Connect!");
    mysql_select_db("user_phplogin"); //select database

    $query = mysql_query("SELECT * FROM users WHERE username='$username'");
    if(mysql_num_rows($query))
    {
        while ($row = mysql_fetch_assoc($query))
        {
            $dbusername = $row['username'];
            $dbpassword = $row['password'];
        }
        // check to see if they match

        if ($username==$dbusername&&$password==$dbpassword)
        {
            echo "Youre in! <a href='members.php'> Visit your user profile! </a>";
        }
        else
        {
            echo "Incorrect Password! <a href='login.html'> Return to login page</a>";
        }
    }
    else
    {
        die("That user doesnt exist! <a href='login.html'> Return to login page</a>");
    }
}
else
{
    die("Please enter a valid username and a password! <a href='login.html'> Return to login page</a>");
}

?> 
```

这是我的表单代码...

```
<form action='login.php' method='submit'>
    Username: <input type='text' name='username'/><br>
    Password: <input type='password' name='password'/><br>
    <input type='submit' value='Log In'/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:34:07.243

检查喜欢

```
if(!empty($username) && !empty($password)) 
```

它会检查非空用户名和密码是否已设置

和

```
<form action='login.php' method='POST'> 
```

因为它[**默认是`GET`**](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)（这意味着如果你不输入方法，它将是 GET）

你也在使用`method="submit"`没有任何提交方法

```
method      (GET|POST)     GET       -- HTTP method used to submit the form-- 
```

[**w3 form:17.3 表单元素**](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:34:19.740

改变

```
<form action='login.php' method='submit'> 
```

到

```
<form action='login.php' method='POST'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T12:42:46.013

改变

```
<form action='login.php' method='submit'> 
```

到

```
<form action='login.php' method='POST'> 
```

用这行开始 login.php 并回答：

```
<?php print_r($_POST); 
```

看看帖子里有什么

# c - 在另一个字符串中搜索最右边的字符串 - 在 c 中

> ID：13787348
> 
> 赞同：0
> 
> 时间：2012-12-09T12:24:39.807
> 
> 标签：c, string, string-search

> **可能重复：**
> [strstr 是否有反向 fn()](https://stackoverflow.com/questions/1634359/is-there-a-reverse-fn-for-strstr)

我编写了这个 main 和函数，它获取两个字符串并检查第二个字符串是否存在于第一个字符串中，然后返回最右边的索引出现位置。如果没有找到返回`-1`。

这是我写的代码：

```
#include <stdio.h>

int strindex(char[], char[]);

int main()
{
    char a[100];
    char b[100];
    int search;
    printf("Enter two strings, To search the second one in the first one:\n");
    printf("Enter the first string to search in:\n");
    fgets(a,100,stdin);
    printf("Enter the second string to search in the first:\n");
    fgets(b,100,stdin);
    printf("\n\n THE FIRST STRING IS:%s\n\n THE SEARCH STRING IS:%s",a, b);
    printf("\n\n");
    search = strindex(a, b);
    if(search==-1)
        printf("The second String didnt found in the first string\n");
    else printf("The second string appear in the first string at most right at index:%d\n",search);
    return 0;
}

int strindex(char s[], char t[])
{
    int foundIndex = -1;
    int tempFound, startNext;
    int i,j;
    i = j = 0;
    while (s[i]!='\0')
    {
        if(s[i]==t[j])
        {
            startNext = i+1;
            tempFound = i;
            while(s[i]!='\0' && t[j]!='\0' && s[i]==t[j])
                i++,j++;
            if (t[j]=='\0') /**check if it null**/
            {
                printf("found match");
                foundIndex = tempFound;
            }
            i = startNext;
            j = 0;
        }
        else i++;
    }
    return foundIndex;
} 
```

我认为我在这一行有问题：

```
if (t[j]=='\0') /**check if it null**/ 
```

因为我尝试将第二个字符串包含在第一个字符串中，但是虽然`t[j]`等于 null 它不执行内部 if 语句。

*   我知道还有很多其他方法可以编写这个程序。但我知道这个也应该工作，我正在努力让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:07:47.557

您正在处理索引，这很令人困惑。索引只用于一个目的，不要随意设置和重置。我建议稍微重写你的函数并清理使用的索引

```
int strindex(char s[], char t[])
{
    int foundIndex = -1;
    int i,j;
    for (i = 0; s[i]!='\0'; i++)
    {
        if(s[i]==t[0])
        {
            for(j = 1; s[i + j]!='\0' && t[j]!='\0' && s[i + j]==t[j]; j++)
                ;

            if (t[j]=='\0') /**check if it null**/
            {
                printf("found match");
                foundIndex = i;
            }
        }
    }

    return foundIndex;
} 
```

当然，您可以替换内部循环[`strncmp`](http://linux.die.net/man/3/strncmp)。

现在回答你的问题;-)。您的`strindex`作品按预期进行。正如@wildplasser 已经指出的那样，[`fgets`](http://linux.die.net/man/3/fgets)将最后的换行符存储`\n`在缓冲区中。由于要搜索的字符串中除了末尾没有换行符，因此如果要搜索的字符串位于中间而不是末尾，则永远不会得到匹配项。

当您从`a[]`and中删除换行符时`b[]`，您会看到 strindex 有效。另一种方法可能是在命令行上给出字符串，而不是使用 fgets 读取。

```
int main(int argc, char **argv)
{
    int search;
    printf("\n\n THE FIRST STRING IS:%s\n\n THE SEARCH STRING IS:%s", argv[1], argv[2]);
    printf("\n\n");
    search = strindex(argv[1], argv[2]);
    if(search==-1)
        printf("The second String didnt found in the first string\n");
    else printf("The second string appear in the first string at most right at index:%d\n",search);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T17:59:12.273

好的朋友。这是有效的解决方案:-)：感谢 Olaf Dietsche

```
#include <stdio.h>

int strindex(char[], char[]);

int main()
{
    char a[100];
    char b[100];
    int search;
    printf("Enter two strings, To search the second one in the first one:\n");
    printf("Enter the first string to search in:\n");
    fgets(a,100,stdin);
    printf("Enter the second string to search in the first:\n");
    fgets(b,100,stdin);
    printf("\n\n THE FIRST STRING IS:%s\n\n THE SEARCH STRING IS:%s",a, b);
    printf("\n\n");
    search = strindex(a, b);
    if(search==-1)
        printf("The second String didnt found in the first string\n");
    else printf("The second string appear in the first string at most right at index:%d\n",search);
    return 0;
}

int strindex(char s[], char t[])
{
    int foundIndex = -1;
    int tempFound, startNext;
    int i,j;
    i = j = 0;
    while (s[i]!='\n')
    {
        if(s[i]==t[j])
        {
            startNext = i+1;
            tempFound = i;
            while(s[i]!='\n' && t[j]!='\n' && s[i]==t[j])
                i++,j++;
            if (t[j]=='\n')
                foundIndex = tempFound;
            i = startNext;
            j = 0;
        }
        else i++;
    }
    return foundIndex;
} 
```

# java - 如何为可运行的 jar 添加 jvm 参数？

> ID：13787353
> 
> 赞同：5
> 
> 时间：2012-12-09T12:25:33.823
> 
> 标签：java, eclipse, jar, jvm-arguments

对于我正在创建的可运行 jar。它需要 xmlx1024 作为 JVM 参数。我怎样才能做到这一点 ？还是有其他选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T12:31:10.730

您可以为程序打算在其上运行的每个平台提供启动脚本。例如在 Linux 上，您可以拥有`program.sh`

```
java -mx1024 -jar lib/artifact.jar arg1 arg2 
```

显然，您必须告诉用户该程序打算从启动脚本运行，因为如果他们尝试手动启动 jar，它将失败。

如果 VM 已使用所需的参数启动，您甚至可以检查您的程序，如果没有，则很快就会失败。参考[这个答案](https://stackoverflow.com/a/1518250/315306)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-24T03:23:47.790

有像[Capsule](https://github.com/puniverse/capsule)这样的工具可以将可执行 jar 与 JVM args 甚至特定于平台的启动脚本捆绑在一起。

# spring - Struts2 Spring Hibernate 应用程序

> ID：13787354
> 
> 赞同：0
> 
> 时间：2012-12-09T12:25:46.840
> 
> 标签：spring, hibernate, struts2

嗨，我正在开发一个将 struts2 与休眠结合在一起的项目，所以当我运行该项目时，我收到以下消息：

> Grave: Erreur lors de la configuration de la classe d'écoute de l'application (application listener) com.sun.faces.config.ConfigureListener java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener at org.apache。 catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676) 在 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521) 在 org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java: 415) 在 org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118) 在 org.apache.catalina.core.StandardContext .listenerStart(StandardContext.java:4660) 在 org.apache.catalina.core。StandardContext$1.call(StandardContext.java:5226) at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java。 util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(来源不明）。在 java.lang.Thread.run(Unknown Source) 处运行(Unknown Source)。在 java.lang.Thread.run(Unknown Source) 处运行(Unknown Source)。

请我需要帮助。非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-01T14:27:14.147

Struts Hibernate 示例

```
<servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>
        org.apache.struts.action.ActionServlet
    </servlet-class>
    <init-param>
        <param-name>config</param-name>
        <param-value>
            /WEB-INF/struts-config.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

# php - 如何根据某些标准确定要实例化父级的哪个子类？

> ID：13787356
> 
> 赞同：1
> 
> 时间：2012-12-09T12:26:02.240
> 
> 标签：php

我将尝试尽可能深入地解释我对班级模型的想法，以便（希望）为潜在的答案提供更好的基础。

我构建了一个类，它解析来自应用程序的数据，这些应用程序共享一个 txt 文件或 html 文件中呈现的通用布局，但具有动态数据。我决定尝试使用数据处理程序继承解析器类的模型来构建它。

解析器类解析导出的数据并创建一个多维`$this->parsed`数组。然后子类必须处理数据，并且在某些数据相似但布局不同的情况下，其他类会继承该子类。这方面的一个例子是 1) 员工列表 2) 一名员工的详细视图。在这种情况下，子类`Employee`包含处理数据的多维数组，并具有用于计算年龄等的通用方法。由于导出的数据会以不同的方式布局（在案例 1 中是几个员工的列表，案例 2 只有一个员工)，我又写了两节课。

这可能是`$this->parsed`员工列表的数据数组

```
$parsed[0][0] = Name
$parsed[0][1] = D.O.B.
$parsed[0][2] = E-mail address
$parsed[0][3] = Department
$parsed[1][0] = John Smith
$parsed[1][1] = 1980-3-5
$parsed[1][2] = john@smith.com
$parsed[1][3] = Economics
$parsed[2][0] = Jane Smith
$parsed[2][1] = 1964-1-12
$parsed[2][2] = jane@smith.com
$parsed[2][3] = PR 
```

以及`$this->parsed`员工详细视图的数据

```
$parsed[0][0] = Name
$parsed[0][1] = John Smith
$parsed[1][0] = D.O.B.
$parsed[1][1] = 1980-3-5
$parsed[2][0] = E-mail address
$parsed[2][1] = john@smith.com
$parsed[3][0] = Department
$parsed[3][1] = Economics 
```

由于数据相似，我有一个扩展 Parser 类的 Employee 类

```
abstract class Employee extends Parser {

    $handledData = array();

    abstract public function Populate();

    public function CalculateAge($employeePointer = 0) {

        $dob = $this->handledData[$employeePointer]['dob'];
        // Calculate...

    }

} 
```

由于解析后的数据布局不同，我使用两个子类以`$this->parsed`不同方式读取数组并将数据设置为 $handledData

```
class EmployeeListView extends Employee {

    public function Populate() {

        array_shift($this->parsed); // Remove the "header row"

        foreach ($this->parsed as $employeeArray) {

            list($name, $dob, $email, $dep) = $employeeArray;
            $this->handledData[] = array('name' => $name, 'dob' => $dob, 'email' => $email, 'dep' => $dep);

        }

    }

} 
```

我对详细视图使用类似的过程，但我认为这个想法很清楚，所以我不会写一个例子。

我偶然发现了使用此布局的问题。由于导出的数据是动态的，它将以多种形式出现。虽然不是无限的，但变化量可能高达 100 甚至更多。现在，在这两个类中，我编写`Validate()`了递归获取数组大小`$this->parsed`并检查其内容以验证数据应该由该类处理的方法。只要我具体知道要使用哪个类，那效果就很好。但是，我希望我的用户能够将文件上传到解析器，而不必花时间滚动浏览大量潜在的处理程序类来查找哪个适合他们上传的文件。

如何动态选择要使用的子类？我可能会做这样的事情：

```
$buffer = file_get_contents($uploadedFile);
$classes = array('EmployeeListView', 'EmployeeDetailView');
foreach ($classes as $className) {
    $loadedClass = new $className();
    $loadedClass->Parse($buffer);
    if ($loadedClass->Validate() === true) { $found = true; break; }
}

if (!$found) { die("Unable to properly parse the uploaded file."); } 
```

然而，这种做事方式并不适合我，而且我确信有更好的方式来做这件事。

希望我说清楚了。

# c++ - C ++如何更改新数组的输出

> ID：13787361
> 
> 赞同：-2
> 
> 时间：2012-12-09T12:26:20.837
> 
> 标签：c++, arrays, perfect-square

所以我写了一个程序，它应该从一个数组中选择完美的正方形并将其放入另一个数组中。示例：（2,4,13,5,25,66）和第二个数组（结果）应该是这样的（4,25）我的结果是这样的（0,4,0,0,25,0） ......所以它的一半好......如何让它只显示 4,25 ？

```
#include<iostream.h>
#include<math.h.>

int main()
{
    int A[100],i,n,p,j;

    cout << "Number of array elements=";
    cin >> n;

    for(i=1;i<=n;i++)
    {
        cout<<"A["<<i<<"]=";
        cin>>A[i];
    }

    for(i=1;i<=n;i++)
    {
        p=sqrt(A[i]) ;   
        if(p*p==A[i])
            A[j]=A[i];
        else
            A[i]=0;

        cout << A[i] << " ";
    }

    return 0;
} 
```

仅使用 c++ 基本命令...就像我一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:30:28.150

您需要单独计算您找到了多少完美正方形，并使用它来将您的答案放入完美正方形数组中：

```
int squares[???];
// ...
if(p*p==A[i]) {
  squares[squaresFound]=A[i];
  squaresFound++;
} 
```

现在的问题是决定`squares`阵列应该有多长。你不知道你会得到多少个正方形。您是否要将其大​​小与其他部分相同`A`并用 s 填充`0`？还是您希望正方形数组的大小正好合适？

如果您希望它的大小合适，最好使用 a `std::vector`：

```
std::vector<int> squares;
// ...
if(p*p==A[i]) {
  squares.push_back(A[i]);
} 
```

但我认为你愚蠢的“只有基本的 C++ 命令”限制不允许你这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:31:07.567

您谈论的是第二个数组（结果），但您的代码只声明了一个数组！此外，您引用了`A[j]`，但`j`尚未初始化。

您应该声明另一个数组`B[100]`，初始化`j`为零，然后在找到正方形时使用此代码：

```
int j = 0;
for (int i=0 ; i != n ; i++) {
    int p = sqrt(A[i]);
    if(p*p==A[i]) {
        B[j++] = A[i];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T12:39:00.713

```
#include <cmath>
#include <iostream>
using namespace std;

int main()
{
    int A[100];
    int n;

    cout << "Number of array elements = " << endl;
    cin >> n;
    for(int i = 0; i < n; i++)
    {
        cout << "A[" << i << "] = ";
        cin >> A[i];
    }

    int B[100];
    int cnt_sqr = 0;
    for(int i = 0; i < n; i++)
    {
        int p = sqrt(A[i]);
        if (p * p == A[i])
        {
            B[cnt_sqr++] = A[i];
        }
    }

    for (int i = 0; i < cnt_sqr; i++)
    {
        cout << B[i] << ' ';
    }
    return 0;
} 
```

关于上面告诉你的内容的完整代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T13:18:55.943

如果您不想修改代码，可以编写以下代码：

```
for(i=1;i<=n;i++)
{
    p=sqrt(A[i]) ;   
    if(p*p==A[i])
    {
        cout << A[i] << " ";
    }
} 
```

它只会打印出完美的正方形。

如果要将元素复制到另一个数组：

```
int squares[100] = {0}; // Assuming that all values can be perfect squares
int square_count = 0;

for(i=1;i<=n;i++)
{
    p=sqrt(A[i]) ;   
    if(p*p==A[i])
    {
        squares[square_count++] = A[i];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T12:30:17.663

创建另一个数组，从 resultArray 中删除所有出现的 0 并将非 0 添加到 newArray。

或者

```
int j=0
if(A[i]==p*p) 
  squares[j++]=A[i]; 
```

# jquery - jquery replaceWith 和引导模式

> ID：13787369
> 
> 赞同：0
> 
> 时间：2012-12-09T12:28:37.743
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap, bootstrap-sass

我正在使用带有 rails 3.2.9 的 bootstrap-sass 2.1.1.0。我在模态中有一个 ajax 表单。像这样：

```
section#avatars_form_edit
  = simple_form_for [user, avatar], html: { class: 'edit-avatar' }, remote: true do |f|
    - %w(x y w h).each do |attribute|
      = f.hidden_field "crop_#{attribute}"
    a.btn href='#' data-dismiss='modal' = t '.cancel'
    = f.button :submit, value: t('.confirm') 
```

提交成功后我想隐藏模态并替换模态下页面中的元素：（update.js.erb）

```
<% if @avatar.errors.any? %>
  <% error = @avatar.errors[:image].first %>
  $('#avatars_form').
    find('.modal-body').prepend('<%= j render "shared/embedded_notify", key: "alert", msg: error %>');
<% else %>
  $('#avatars_modal').modal('hide');
  $('#avatars_avatar_medium').
    replaceWith('<%= j render "avatar_medium", avatar: @avatar, user: @user %>');
  $('#avatars_avatar_medium').
    on('hover', function() { $(this).find('.edit-bar').toggleClass('invisible'); });
<% end %> 
```

问题是：**有时**（90% 的时间），replaceWith($('#avatars_avatar_medium').replaceWith('<%= j render "avatar_medium", avatar: @avatar, user: @user %>'); ) 似乎不起作用。它不会更新我的页面。我不擅长 javasript 你能说出问题吗？谢谢！

# wpf - 如何将字体大小绑定到可变网格大小

> ID：13787378
> 
> 赞同：4
> 
> 时间：2012-12-09T12:29:23.040
> 
> 标签：wpf, grid, font-size

我有一个 2 列 2 行的网格。一个单一的字符 (Unicode U+2699) 被放置在右下角的网格区域内。它看起来像这样：

![目前网格](../Images/4cc8ac5b603b26a3f7e2d54b1d56377c.png)

我希望角色自动调整其字体大小以适应它所在的网格字段（在这种情况下，它应该绑定到第二个网格行的高度，但由于在某些情况下可能不清楚网格的高度或宽度更小，知道如何绑定到这两个值中的最低值也很好）。

到目前为止，我的实现类似于以下内容（我在此示例中对其进行了一些简化）：

```
<Grid>
   <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition x:Name="heightToBind" Height="40"/>
   </Grid.RowDefinitions>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="14*" />
      <ColumnDefinition Width="*" />
   </Grid.ColumnDefinitions>

   <Button FontSize="{Binding ElementName=heightToBind, Path=Height.Value, Mode=OneWay}" Content="&#x2699;" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Right" />
</Grid> 
```

这里的问题是，它**只有在高度是**RowDefinitions 中的固定值时才有效。我希望它使用以下定义：

```
<Grid.RowDefinitions>
   <RowDefinition Height="4*"/>
   <RowDefinition x:Name="heightToBind" Height="*"/>
</Grid.RowDefinitions> 
```

作为一个额外的问题，我也很感兴趣，为什么角色放置得太低以至于它在底部被切断（我尝试`VerticalAlignment="Center"`了按钮但没有效果）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T12:51:50.313

您可以尝试使用 a`ViewBox`作为按钮的内容：

```
<Button Grid.Row="1" Grid.Column="1">
    <Button.Content>
        <Viewbox  StretchDirection="Both" HorizontalAlignment="Stretch">
            <TextBlock Text="&#x2699;" />
        </Viewbox>
    </Button.Content>
</Button> 
```

[ViewBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)可以拉伸和缩放他的孩子以填充所有可用空间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:41:45.297

您可以尝试绑定到`ActualHeight`而不是`Height`：

```
<Button FontSize="{Binding ElementName=heightToBind, Path=ActualHeight.Value, Mode=OneWay}"
        Content="&#x2699;" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Right" /> 
```

这应该有效。

网格上的`*`定义意味着将可用空间作为高度，因此只有在页面布局准备好布局时才确定。如果高度未设置或更改，则在`ActualHeight`属性中返回实际高度。

# android - 如何在 Android 中下载文件并显示进度？

> ID：13787380
> 
> 赞同：2
> 
> 时间：2012-12-09T12:29:58.650
> 
> 标签：android, concurrency, download

1.  我正在尝试在 android 中下载文件并在进度条中显示下载进度

    1.  在 textview 中显示下载速度
    2.  在 textview 中显示文件的大小

    **在下载文件时**

我已经能够同时显示进度条，但是在 for 循环中，在我运行代码的那一刻给我错误：**NullPointerExceptoin**。但没有说它在哪一行也给了我**FileNotFoundException**。而且我不知道我做错了什么。**我对 Android 很陌生，**所以如果有人可以提供帮助，那就太好了。这是代码。我已经在清单文件中提供了权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
     <uses-permission android:name="android.permission.INTERNET"></uses-permission>
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
     <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission> 
```

这是活动，我只使用这个活动。

```
public class DownloadActivity extends Activity implements OnClickListener {

    TextView view1;
    TextView view2;
    TextView view3;
    ProgressBar bar;
    Button startButton;
    String contents;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_download);
        startButton = (Button) findViewById(R.id.button1);
        bar = (ProgressBar) findViewById(R.id.progressBar1);
        startButton.setOnClickListener((OnClickListener) this);
//        contents = urlToString("https://www.dropbox.com/home/Music/FOX%20-%20Pokazn%D0%BE%CC%81%20(2012)");
        contents = "http://sdlc-esd.sun.com/ESD6/JSCDL/jdk/7u9-b05/jre-7u9-windows-i586.exe?AuthParam=1355055216_89a14482cb59e95946db732dc4341468&GroupName=JSC&FilePath=/ESD6/JSCDL/jdk/7u9-b05/jre-7u9-windows-i586.exe&File=jre-7u9-windows-i586.exe&BHost=javadl.sun.com";
        urlToString(contents);
//        http://ipv4.download.thinkbroadband.com/10MB.zip
//        http://sdlc-esd.sun.com/ESD6/JSCDL/jdk/7u9-b05/jre-7u9-windows-i586.exe?AuthParam=1355055216_89a14482cb59e95946db732dc4341468&GroupName=JSC&FilePath=/ESD6/JSCDL/jdk/7u9-b05/jre-7u9-windows-i586.exe&File=jre-7u9-windows-i586.exe&BHost=javadl.sun.com
    }

    public void onClick(View view) {

        // detect the view that was "clicked"
        switch (view.getId()) {
        case R.id.button1:
            new LongOperation().execute(1000 + "");
            break;
        }
    }

    private class LongOperation extends AsyncTask<String, Integer, String> {

        @Override
        protected String doInBackground(String... sUrl) {
            try {
                URL url = new URL(sUrl[0]);
                URLConnection connection = url.openConnection();
                connection.connect();

                // this will be useful so that you can show a typical 0-100% progress bar
                int fileLength = connection.getContentLength();

                // download the file
                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream(contents);

                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) 
                {
                    total += count;
                    // publishing the progress.... triggers the onProgressUpdate!
                    publishProgress((int) (total * 100 / fileLength));

                    output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
            } catch (Exception e) {
            }

            for (int i = 0; i < 100; i++) {
                try {

                    Thread.sleep(500);
                     publishProgress(i+1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            return "URL:" + contents;
        }

        @Override
        protected void onPostExecute(String result) {
            TextView txt = (TextView) findViewById(R.id.textView1);
            txt.setText(result);
        }

        @Override
          protected void onProgressUpdate(Integer... values) {
           // TODO Auto-generated method stub
            bar.setProgress(values[0]);
            view1 = (TextView) findViewById(R.id.textView1);
            view2 = (TextView) findViewById(R.id.textView2);
            view3 = (TextView) findViewById(R.id.textView3);

            view1.setText("URL: " +  contents);
            view2.setText("File Size: "  + "x");
            view3.setText("Transfer Rate: "  + "y" );
          }
    }

//  Log.v("********", getLinkRate());

    private String urlToString(String address) {
        HttpURLConnection con = null;
        URL url;
        InputStream is = null;
        try {
            url = new URL(address);
            con = (HttpURLConnection) url.openConnection();
            con.setReadTimeout(10000);
            con.setConnectTimeout(15000);
            con.setRequestMethod("GET");
            con.connect();
            is = con.getInputStream();
        } catch (IOException e) {
            e.printStackTrace();
        }

        BufferedReader reader = null;
        StringBuilder sb = new StringBuilder();
        try {
            reader = new BufferedReader(new InputStreamReader(is));
            String line = "";
            while ((line = reader.readLine()) != null) {
                sb.append(line);

                Log.d("*******", line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (reader != null) {
                try {
                    reader.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        return sb.toString();
    }
} 
```

日志猫：

```
12-09 12:53:57.608: D/*******(824): Ty���mk�B$1�-2
12-09 12:53:57.648: D/dalvikvm(824): GC_FOR_MALLOC freed 202K, 62% free 7797K/20487K, external 1625K/2137K, paused 31ms
12-09 12:53:57.648: I/dalvikvm-heap(824): Forcing collection of SoftReferences for 7981588-byte allocation
12-09 12:53:57.669: D/dalvikvm(824): GC_FOR_MALLOC freed 1K, 62% free 7796K/20487K, external 1625K/2137K, paused 26ms
12-09 12:53:57.669: E/dalvikvm-heap(824): Out of memory on a 7981588-byte allocation.
12-09 12:53:57.669: I/dalvikvm(824): "main" prio=5 tid=1 RUNNABLE
12-09 12:53:57.678: I/dalvikvm(824):   | group="main" sCount=0 dsCount=0 obj=0x4001f1a8 self=0xce48
12-09 12:53:57.678: I/dalvikvm(824):   | sysTid=824 nice=0 sched=0/0 cgrp=default handle=-1345006528
12-09 12:53:57.678: I/dalvikvm(824):   | schedstat=( 6672852716 8933397811 8674 )
12-09 12:53:57.678: I/dalvikvm(824):   at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:~95)
12-09 12:53:57.678: I/dalvikvm(824):   at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:153)
12-09 12:53:57.678: I/dalvikvm(824):   at java.lang.StringBuilder.append(StringBuilder.java:217)
12-09 12:53:57.678: I/dalvikvm(824):   at tees.ac.uk.L1087591.DownloadActivity.urlToString(DownloadActivity.java:156)
12-09 12:53:57.678: I/dalvikvm(824):   at tees.ac.uk.L1087591.DownloadActivity.onClick(DownloadActivity.java:54)
12-09 12:53:57.678: I/dalvikvm(824):   at android.view.View.performClick(View.java:2485)
12-09 12:53:57.678: I/dalvikvm(824):   at android.view.View$PerformClick.run(View.java:9080)
12-09 12:53:57.678: I/dalvikvm(824):   at android.os.Handler.handleCallback(Handler.java:587)
12-09 12:53:57.678: I/dalvikvm(824):   at android.os.Handler.dispatchMessage(Handler.java:92)
12-09 12:53:57.678: I/dalvikvm(824):   at android.os.Looper.loop(Looper.java:123)
12-09 12:53:57.678: I/dalvikvm(824):   at android.app.ActivityThread.main(ActivityThread.java:3683)
12-09 12:53:57.678: I/dalvikvm(824):   at java.lang.reflect.Method.invokeNative(Native Method)
12-09 12:53:57.678: I/dalvikvm(824):   at java.lang.reflect.Method.invoke(Method.java:507)
12-09 12:53:57.678: I/dalvikvm(824):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 12:53:57.678: I/dalvikvm(824):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 12:53:57.678: I/dalvikvm(824):   at dalvik.system.NativeStart.main(Native Method)
12-09 12:53:57.688: D/AndroidRuntime(824): Shutting down VM
12-09 12:53:57.688: W/dalvikvm(824): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-09 12:53:57.688: E/AndroidRuntime(824): FATAL EXCEPTION: main
12-09 12:53:57.688: E/AndroidRuntime(824): java.lang.OutOfMemoryError
12-09 12:53:57.688: E/AndroidRuntime(824):  at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:95)
12-09 12:53:57.688: E/AndroidRuntime(824):  at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:153)
12-09 12:53:57.688: E/AndroidRuntime(824):  at java.lang.StringBuilder.append(StringBuilder.java:217)
12-09 12:53:57.688: E/AndroidRuntime(824):  at tees.ac.uk.L1087591.DownloadActivity.urlToString(DownloadActivity.java:156)
12-09 12:53:57.688: E/AndroidRuntime(824):  at tees.ac.uk.L1087591.DownloadActivity.onClick(DownloadActivity.java:54)
12-09 12:53:57.688: E/AndroidRuntime(824):  at android.view.View.performClick(View.java:2485)
12-09 12:53:57.688: E/AndroidRuntime(824):  at android.view.View$PerformClick.run(View.java:9080)
12-09 12:53:57.688: E/AndroidRuntime(824):  at android.os.Handler.handleCallback(Handler.java:587)
12-09 12:53:57.688: E/AndroidRuntime(824):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-09 12:53:57.688: E/AndroidRuntime(824):  at android.os.Looper.loop(Looper.java:123)
12-09 12:53:57.688: E/AndroidRuntime(824):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-09 12:53:57.688: E/AndroidRuntime(824):  at java.lang.reflect.Method.invokeNative(Native Method)
12-09 12:53:57.688: E/AndroidRuntime(824):  at java.lang.reflect.Method.invoke(Method.java:507)
12-09 12:53:57.688: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-09 12:53:57.688: E/AndroidRuntime(824):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-09 12:53:57.688: E/AndroidRuntime(824):  at dalvik.system.NativeStart.main(Native Method)
12-09 12:53:59.688: I/Process(824): Sending signal. PID: 824 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:34:25.213

您必须调试您的活动以找出哪一行引发 NullPointerException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:39:47.323

在您的 OnCreate 函数中，您正在使用一种名为 urlToString 的方法，该方法创建一个 HTTPURLConnection，如果您在 4.0 以上运行它，那么您的代码将崩溃，因为 HHTP 连接应该在后台线程而不是主线程中处理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T12:43:14.577

检查您正在运行的代码是否实际通过`try{}catch(){}`块，然后才继续执行其余代码，因为如果找不到文件，您应该停止 AsyncTask 并显示错误消息

你正在像这样调用你的 AsyncTask

```
new LongOperation().execute(1000 + ""); 
```

所以你是`1000 + ""`作为 url 参数传递的？当您像这样声明 AsyncTAsk

```
private class LongOperation extends AsyncTask<String, Integer, String> 
```

您假设将 String 作为参数传递，您将 Integer 作为 onProgressUpdate() 的进度，最后将 String 作为 AsyncTask 的结果

你也不能在`onCreate()`你调用的主线程上有网络

```
urlToString(contents); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T12:56:49.283

您正在使用“new LongOperation().execute(1000 + "")”启动 AsyncTask，因此字符串“1000”被传递给 doInBackground 方法，然后您使用字符串“1000”启动了一个 URLConnection，但是“1000”是无效的网址。也许这就是错误。

# postgresql - 在触发器中使用光标

> ID：13787383
> 
> 赞同：0
> 
> 时间：2012-12-09T12:30:17.913
> 
> 标签：postgresql

我正在尝试编写一个在执行插入时执行的触发器函数。条件是，如果 id 已经存在，那么 time_create 现在应该是 time_dead。

```
 CREATE function archive_temp() returns trigger as '
 begin
   insert into  temporary_archive
  values
 (
 OLD.id,
   OLD.time_create,
   OLD.time_dead,
    OLD.fname,
    current_user,
    now(),
      now(),
  TG_OP
    );
     return null;
    end;
   ' LANGUAGE 'plpgsql';
     -----------------------------

CREATE TRIGGER archive_temps 
AFTER DELETE OR UPDATE 
on temporary_object
FOR EACH ROW
DECLARE 
temporary_archive temporary_object.id%type;
begin
if inserting then 
select id into temporary_archive
from temporary_object
where id = :old.id;
if temporary_archive is not null then

 EXECUTE PROCEDURE archive_temps();
 end if;
 end if;ins 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:04:04.330

从您的示例中，我看起来就像您正在尝试以 Oracle 的方式做事。PostgreSQL 是不同的。我也没有在代码中的任何地方看到游标的任何用途，所以这个问题可能会产生误导。

在 PostgreSQL 中，触发器只能调用过程并且过程必须在很大程度上是自包含的。本质上，您将不得不稍微重构您的代码。之后唯一接受的语法`FOR EACH ROW`是`EXECUTE PROCEDURE`，因此您的其他逻辑必须移至用户定义的函数中。如果需要，您可以`WHEN`通过调用函数在条件中应用该函数（如果您的函数返回 bool）。或者您可以将其构建到您的触发逻辑中。

# java - 使用 IMAP 或 Exchange Web 服务从 Exchange Server 为 GWT 应用程序获取电子邮件的最快方法是什么？

> ID：13787388
> 
> 赞同：1
> 
> 时间：2012-12-09T12:31:39.570
> 
> 标签：java, gwt, exchange-server, exchangewebservices, ewsjavaapi

我正在尝试使用[EWSJ API](http://www.javaexchangeconnector.com/)从 Microsoft Exchange 服务器获取电子邮件，该 API使用 Exchange Web 服务；但我想知道；使用 IMAP 获取电子邮件会很快吗？

由于我们有 GWT，因此无论哪种情况，我们都无法从客户端直接连接到 Exchange；我们希望最大限度地减少在服务器端获取电子邮件然后使用序列化 POJO 将其传递到客户端的周转时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:34:25.413

根据我的经验，IMAP 目前似乎是最快的。我曾经用它来创建一个可以从 GMail 获取电子邮件的小程序。一个好处是您可以从 IMAP 界面将电子邮件标记为“已读”。

如果我必须选择，我会选择 IMAP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:20:50.643

Apache [Hupa](http://james.apache.org/hupa/)是 Apache James 项目的一个子项目，它是一个使用 GWT 开发的 webmail 客户端，它使用能够从任何启用 IMAP 的服务器获取消息的服务器端（它使用 javax.mail api）。

虽然您可以直接使用 Hupa 使用您的电子邮件服务器读取和发送电子邮件（有一个属性文件来定义 imap 和 smtp 参数），但在您的情况下，您可以让服务器端连接到您的服务器并使用任何 GWT ajax 机制来像 Hupa 客户端那样获取消息。

[在这里](http://james.zones.apache.org/)，您可以看到 Hupa 的现场演示。

# lucene - 按照lucene中的用户名查询

> ID：13787389
> 
> 赞同：0
> 
> 时间：2012-12-09T12:31:42.813
> 
> 标签：lucene, full-text-search

我想在博客网站上提供搜索功能。但我不仅想搜索整个文档，还想只搜索一个作者的文档。
由于我想使用 lucene 提供全文索引，创建索引时如何执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:52:42.547

将作者姓名作为单独的字段进行索引可以让您搜索所有包含“Lucene”且作者为“fisher”的文档，例如（QueryParser 语法中的“lucene author:fisher”）。

# python - 带有相关变量的 Jinja2 中的 For 循环

> ID：13787392
> 
> 赞同：2
> 
> 时间：2012-12-09T12:31:54.497
> 
> 标签：python, for-loop, jinja2

我很难在 Jinja 模板中编写一个 for 循环，该循环遍历包含水果名称的变量，并且在正文中是该水果的特征，该特征也作为变量提供。

所以假设我们有以下变量

```
fruit=apple,banana,grapes
apple_color=red
apple_weight=1kg
banana_color=yellow
banana_weight=2kg
grapes_color=green
grapes_weight=3kg 
```

我很难创建一个迭代水果变量的 for 循环，然后在正文中调用仅特定于被迭代的水果的变量。因此，在第一次迭代中，当 value 为 apple 时，body 必须使用变量 apple_color 和 apple_weight，类似地，对于第二次迭代 banan，body 中的变量是banana_color 和banana_weight。

这是否需要使用列表来做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:11:07.237

在您的代码中：

```
fruits = {'apple' : {'color', apple_color, 'weight' : apple_weight}, 'banana' : {'color' : banana_color, 'weight' : banana_weight}, 'grapes' : {'color' : grapes_color, 'weight' : grapes_weigh}} 

or if you use your already defined variables like  : apple_color = 'red'

fruit_names = ['apple', 'banana', 'grapes']
fruits = {}
for each in fruit_names :
    fruits[each] = {}
    fruits[each]['color'] = globals()['%s_%s' %(each, 'color')]
    fruits[each]['weight'] = globals()['%s_%s' %(each, 'weight')] 
```

在您的模板中：

```
{% for each in fruits %}
    {{ fruits[each].color }}
    {{ fruits[each].weight }}
{% endfor %}

or :

{% for key, value in fruits.items() %} 
    {{ key }}
    {{ value.color }} 
    {{ value.weight }} 
{% endfor %} 
```

# perl - 将多管道输出重定向到 perl 中的文件句柄

> ID：13787403
> 
> 赞同：0
> 
> 时间：2012-12-09T12:34:41.300
> 
> 标签：perl

我想将此 awk 输出重定向到文件句柄，但没有运气。

代码：

```
open INPUT,"awk -F: '{print $1}'/etc/passwd| xargs -n 1 passwd -s | grep user";
while (my $input=<INPUT>)

{
...rest of the code
} 
```

错误：

```
Use of uninitialized value in concatenation (.) or string at ./test line 12.
readline() on closed filehandle INPUT at ./test line 13. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:45:23.427

显示的错误消息与主题中的问题没有直接关系。

1.  为了在 Perl 中打开管道并检索结果，您必须在调用`|`的最后添加“” 。`open`
2.  错误消息来自 Perl 解释`$1`您在该双引号字符串中使用的事实。但是，您的意图是将其逐字传递给`awk`. 因此，您必须`$`在 Perl 方面使用`\$`.
3.  `/etc/passwd`论点前面缺少一个空格。

摘要：这应该会更好：

```
open INPUT,"awk -F: '{print \$1}' /etc/passwd| xargs -n 1 passwd -s | grep user|"; 
```

但是，您还应该检查错误等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:42:01.190

看起来`$1`你传递的字符串让 Perl 寻找一个`$1`你没有定义的变量。尝试通过在字符串前面`$`放置 a来转义字符串。`\`

因为字符串无效，所以它不会打开，然后会产生第二个错误。

# java - 如何使 log4j 不打印标准输出、线程名称

> ID：13787407
> 
> 赞同：2
> 
> 时间：2012-12-09T12:35:09.877
> 
> 标签：java, logging, log4j, jboss7.x

为什么 log4j 打印：

```
17:58:30,623 INFO  [stdout] (http--127.0.0.1-8080-5) 
```

完整的消息是：

```
17:58:30,623 INFO  [stdout] (http--127.0.0.1-8080-5) 2012-12-09 17:58:30.623 [INFO] com.edfx.adb.web.controller.AuthController#login - A message 
```

我正在使用 JBoss AS7，并且排除了 log4j，例如：

```
<jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name="org.apache.log4j" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

我`log4j.properties`的是：

```
log4j.rootLogger=INFO, CA

log4j.appender.CA=org.apache.log4j.ConsoleAppender

log4j.appender.CA.layout=org.apache.log4j.PatternLayout
log4j.appender.CA.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%p] %c#%M - %m%n 
```

我想将消息打印为：

```
2012-12-09 17:58:30.623 [INFO] com.edfx.adb.web.controller.AuthController#login - A message 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:12:15.397

这是因为 JBoss STDIO 包装了 stdout 和 stderr 以及 log4j`ConsoleAppender`输出到 stdout。

您可以通过配置日志子系统而不是使用 log4j.properties 文件来完成您尝试做的相同事情。使用日志子系统也没有理由排除`jboss-deployment-structure.xml`.

```
<subsystem xmlns="urn:jboss:domain:logging:1.1">

    <console-handler name="CONSOLE">
        <level name="INFO"/>
        <formatter>
            <pattern-formatter pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%p] %c#%M - %m%n"/>
        </formatter>
    </console-handler>

    <!-- other handlers and loggers -->

    <root-logger>
        <level name="INFO"/>
        <handlers>
            <handler name="CONSOLE"/>
        </handlers>
    </root-logger>
</subsystem> 
```

# macos - 无法重新安装 Homebrew

> ID：13787408
> 
> 赞同：0
> 
> 时间：2012-12-09T12:35:22.000
> 
> 标签：macos, homebrew

我正在尝试删除 Homebrew，以便可以将其安装在另一个帐户上。但在某个地方，我一定搞砸了。我遵循了常见问题解答中的卸载提示，我想我设法部分删除了它。现在，当我尝试 brew doctor 时，我得到：

```
-bash: brew: command not found 
```

所以我认为它已部分卸载。但是当我运行 Homebrew 安装脚本时，我收到以下消息：

```
It appears Homebrew is already installed. If your intent is to reinstall you
should do the following before running this installer again:
rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup 
```

所以我尝试 rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup 并得到：

```
rm: /usr/local/.git/branches: Permission denied
rm: /usr/local/.git/config: Permission denied
rm: /usr/local/.git/description: Permission denied
rm: /usr/local/.git/FETCH_HEAD: Permission denied
rm: /usr/local/.git/HEAD: Permission denied
rm: /usr/local/.git/hooks/applypatch-msg.sample: Permission denied
rm: /usr/local/.git/hooks/commit-msg.sample: Permission denied
rm: /usr/local/.git/hooks/post-update.sample: Permission denied
rm: /usr/local/.git/hooks/pre-applypatch.sample: Permission denied
rm: /usr/local/.git/hooks/pre-commit.sample: Permission denied
rm: /usr/local/.git/hooks/pre-rebase.sample: Permission denied
rm: /usr/local/.git/hooks/prepare-commit-msg.sample: Permission denied
rm: /usr/local/.git/hooks/update.sample: Permission denied
rm: /usr/local/.git/hooks: Permission denied
rm: /usr/local/.git/info/exclude: Permission denied
rm: /usr/local/.git/info: Permission denied
rm: /usr/local/.git/logs/refs/remotes/origin/master: Permission denied
rm: /usr/local/.git/logs/refs/remotes/origin: Permission denied
rm: /usr/local/.git/logs/refs/remotes: Permission denied
rm: /usr/local/.git/logs/refs: Permission denied
rm: /usr/local/.git/logs: Permission denied
rm: /usr/local/.git/objects/info: Permission denied
rm: /usr/local/.git/objects/pack/pack-f61919e44996693539de9ee7986ee3c78a0b7c2a.idx: Permission denied
rm: /usr/local/.git/objects/pack/pack-f61919e44996693539de9ee7986ee3c78a0b7c2a.pack: Permission denied
rm: /usr/local/.git/objects/pack: Permission denied
rm: /usr/local/.git/objects: Permission denied
rm: /usr/local/.git/refs/heads: Permission denied
rm: /usr/local/.git/refs/remotes/origin/master: Permission denied
rm: /usr/local/.git/refs/remotes/origin: Permission denied
rm: /usr/local/.git/refs/remotes: Permission denied
rm: /usr/local/.git/refs/tags: Permission denied
rm: /usr/local/.git/refs: Permission denied
rm: /usr/local/.git: Directory not empty 
```

现在我不知道该怎么做，所以我可以重新安装它。我对终端命令不太熟悉，所以可能是我遗漏了一些简单的东西，但请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:41:02.077

尝试

`sudo rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup`

那么你应该得到许可。但是，`brew cleanup`当 brew 命令不再存在时，无论如何都不会工作。但也许它会允许你在那之后重新安装 Homebrew。

# java - Java中的算术向量运算

> ID：13787411
> 
> 赞同：2
> 
> 时间：2012-12-09T12:35:35.693
> 
> 标签：java, vector, arithmetic-expressions

我有四个向量具有相同的维度（1 维）和相同的大小。我的向量被构造为：

```
Vector<Integer> v1=new Vector<Integer>(5);
Vector<Integer> v2=new Vector<Integer>(5);
Vector<Integer> vp=new Vector<Integer>(5);
Vector<Integer> vs=new Vector<Integer>(5); 
```

例如：vp=v1*v2

```
<1 3 4 1 2>
<0 0 2 2 3>
<0 0 8 2 6> 
```

和向量减法，例如 vs=1-v1

```
1-v1= <0 -2 -3 0 -1> 
```

java中是否有任何函数可以将向量相乘的结果分配给向量“vp”和“vs”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T20:06:17.757

您可以使用[vecmath](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/j3dapi/javax/vecmath/package-summary.html)进行矢量运算。它非常精确。没有舍入错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:41:17.357

我认为没有为此提供API方法。

看起来定义可能会从一变为一，我们为此手动实施。

# c# - Folderbrowserdialog 浏览远程电脑

> ID：13787413
> 
> 赞同：1
> 
> 时间：2012-12-09T12:36:02.363
> 
> 标签：c#, folderbrowserdialog, file-browser, filebrowse

当我浏览到远程计算机时，我有一个关于文件夹浏览器的问题，该对象下没有显示任何内容。

但是，如果我使用 fileopen 并浏览到它列出所有文件夹和文件的相同位置，fileopen 是否会发生某种身份验证？

如果是这样，我如何进行身份验证以便我可以使用文件夹浏览器进行浏览？一旦我使用了fileopen，我就可以使用文件夹浏览器，但这并不理想

```
 FolderBrowserDialog f = new FolderBrowserDialog();

        f.ShowNewFolderButton = false;

        DialogResult ropen = f.ShowDialog(); 
```

# java - 支持事务处理的 Java 技术

> ID：13787417
> 
> 赞同：2
> 
> 时间：2012-12-09T12:37:00.340
> 
> 标签：java

我得到了这个关于支持事务处理的 Java 技术的考试问题，答案是：

**一种。RMI B. 科尔巴 C. JTS D. JMAPI e. JDBC**

我很困惑**：RMI B. 科尔巴 C. JTS**和**一个。RMI D. JMAPI e. JDBC**

请告知正确答案是什么，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:44:15.163

**b) CORBA，c) JTS**和**e) JDBC**支持事务。

RMI 不支持事务（如何回滚方法调用？）。我假设 JTS = Java Transaction Service，作为 JTA（Java Transaction API）的一部分。

JMAPI 似乎是 Java Mail API。邮件协议也不支持交易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:45:34.417

我认为正确的答案是[JTS](http://en.wikipedia.org/wiki/Java_transaction_service)。

但其他（[JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)、[ODBC](http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture)、[RMI](http://en.wikipedia.org/wiki/Java_remote_method_invocation)）也可以直接/间接地提供事务服务。

# javascript - 如何在box2D中获得世界上其他物体的静态圆形框架形状？

> ID：13787422
> 
> 赞同：1
> 
> 时间：2012-12-09T12:38:30.327
> 
> 标签：javascript, box2d

我正在学习用于 JavaScript 和 HTML5 画布的 box2DWeb。我想知道如何创建一个带有 box2d 形状的圆形框架，以便其他形状将在孔内，并且可以在留在孔内的同时沿其曲线移动？

# ruby - rvm pkg install ree_dependencies 给出关于 autoreconf 的错误

> ID：13787425
> 
> 赞同：1
> 
> 时间：2012-12-09T12:38:48.860
> 
> 标签：ruby, rvm, linux-mint

我在 Linux Mint 14 Mate 上运行这个命令：

```
rvm pkg install ree_dependencies --verify-downloads 1 
```

我得到这个错误：

```
Fetching ncurses-5.7.tar.gz to /home/john/.rvm/archives
Extracting ncurses to /home/john/.rvm/src/ncurses-5.7
Prepare ncurses in /home/john/.rvm/src/ncurses-5.7.
Error running 'autoreconf -is --force', please read /home/john/.rvm/log/ncurses/autoreconf.log
Configuring ncurses in /home/john/.rvm/src/ncurses-5.7.
Error running './configure --prefix=/home/john/.rvm/usr --with-shared --disable-rpath --without-debug --without-ada --enable-safe-sprintf --enable-sigwinch --without-progs', please read /home/john/.rvm/log/ncurses/configure.log
Compiling ncurses in /home/john/.rvm/src/ncurses-5.7.
Error running 'make', please read /home/john/.rvm/log/ncurses/make.log 
```

这是日志文件：

```
configure:5967: error: possibly undefined macro: AC_DIVERT_HELP
    If this token and others are legitimate, please use m4_pattern_allow.
    See the Autoconf documentation.
autoreconf: /usr/bin/autoconf failed with exit status: 1 
```

我搜索了解决方案，但一无所获。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T14:25:26.703

而不是`ree_dependencies`你应该阅读的输出`rvm requirements`- 它会告诉你需要安装什么。

忠告 - REE 基于不再维护的 Ruby 1.8，几个月内只会发布安全修复程序，你真的应该尝试像 1.9.3 这样更新的 ruby​​，或者如果它是新项目 - 试试 ruby​​ 2.0.0预览2：

```
rvm install ruby-2.0.0 
```

# autocomplete - 如何在 DocBlock 中声明无限/可变参数？

> ID：13787426
> 
> 赞同：18
> 
> 时间：2012-12-09T12:38:48.577
> 
> 标签：autocomplete, ide, documentation, docblocks

假设我有一个函数（显然是一个微不足道的例子）：

```
public function dot(){
    return implode('.', func_get_args());
} 
```

现在我知道我可以将其修改为

```
public function dot(array $items){
    return implode('.', $array);
} 
```

但有些功能不是一个选项。那么，您将如何使用 docBlock 记录函数的第一个版本，以便 IDE 可以解释它可以接收无限参数？

我见过一些使用的方法：

```
/**
 * Joins one or more strings together with a . (dot)
 * @param string $string1
 * @param string $string2
 * @param string $_ [optional]
 * @return string
 */
public function dot($string1, $string2, $_ = null) {
    return implode('.', func_get_args());
} 
```

在 IDE 中看起来像![自动完成示例](../Images/e1a7dd1467a7fda8186a57c39b0abe27.png)

但这对我来说就像是一个黑客，有没有办法只使用 docBlock 来做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-20T22:42:45.257

**[2015-01-08 更新]**

在 PHPDoc 中执行此操作的旧方法是：

[http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html)

```
/**
 * @param int $param,...
 **/ 
```

但是，这不再受支持。从 PHP 5.6 开始，可变参数方法参数是 PHP 语言的一部分，如果我没记错的话，PHPDoc 已经更新以反映 PHPDoc 2.4 的这一点。这也在 EAP 139.659 的 PhpStorm IDE 中（应该在 8.0.2 及更高版本中）。不确定其他 IDE 的实现。

[https://youtrack.jetbrains.com/issue/WI-20157](https://youtrack.jetbrains.com/issue/WI-20157)

在任何情况下，用于可变参数参数的 DocBlocks 的正确语法是：

```
/**
 * @param int ...$param
 **/ 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-21T00:38:20.293

由于可变参数是在 PHP 5.6 中实现的，所以[PHPDocumentor从](http://www.php.net/manual/en/functions.arguments.php#functions.variable-arg-list)[2.4 版本](https://github.com/phpDocumentor/phpDocumentor2/releases/tag/v2.4.0)开始应该支持以下语法。

```
/**
 * @param Type ...$value
 * Note: PHP 5.6+ syntax equal to func_get_args()
 */
public function abc(Type ...$value) {} 
```

这应该是描述这种签名的正确方式。这[可能](https://github.com/phpDocumentor/fig-standards/issues/40)会包含在[PSR-5](https://github.com/php-fig/fig-standards/pull/169)中。一旦被接受，IDE 就应该支持这个“官方”建议。

但是，与此同时，一些 IDE 对他们认为正确的内容有了*更好的理解。*努力让 IDE 供应商支持从 5.6 开始支持的官方 PHP 语法，或者使用同时有效的任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T13:13:27.943

在 php 中，不存在 valist 或“可选参数”列表的概念。

该`$_`变量将只包含您给出的第三个字符串。允许数组或字符串的唯一方法是测试第一个参数`is_array()`

```
public function dot($arg1){
   if(is_array($arg1)){
       return implode('.',$arg1);
   }
   else if $arg1 instanceof \Traversable){
       return implode('.',iterator_to_array($arg1));
   }
   else{
       return implode('.',func_get_args());
   }
} 
```

现在您已经处理了您想要的行为，您必须记录它。在 php 中，由于不允许重载，因此如果要提供多种类型，约定是使用“混合”作为类型。

```
/**
*@param mixed $arg1 an array, iterator that will be joined OR first string of the list
*@return string a string with all strings of the list joined with a point
*@example dot("1","2","3"); returns 1.2.3 dot(array(1,2,3)); returns 1.2.3
*/ 
```

此外，根据[phpdocumentor 文档](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html)，您可以使用

```
/**
*@param string ... list of strings
*/ 
```

# c++ - 将普通指针转换为 std::shared_ptr 似乎不起作用

> ID：13787429
> 
> 赞同：1
> 
> 时间：2012-12-09T12:39:01.510
> 
> 标签：c++, pointers, casting, c++11, shared-ptr

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:44:44.833

你应该说：

```
std::map<std::string, std::shared_ptr<sf::Texture>> resources;
      // ^^^ "const" is redundant

// ...

resources.insert(std::make_pair("1", std::make_shared<sf::Texture>(tempResource))); 
```

如果您的平台支持它，您甚至可以说：

```
resources.emplace("1", std::make_shared<sf::Texture>(tempResource)); 
```

或者：

```
resources.emplace("1", new sf::Texture(tempResource)); 
```

但这不如`make_shared`, 效率更高，而且它违反了永远不要使用的规则`new`。无论哪种方式，重点`emplace`是它允许显式构造函数，不像`insert`.

* * *

更好的是，根本不使用临时：

```
resources.emplace("1", std::make_shared<sf::Texture>()).second->loadFromFile("1.PNG"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:44:55.710

您要做的是`shared_ptr`从以前非托管的内存中创建一个。`dynamic_pointer_cast`不是工作的工具。相反，这应该有效：

```
resources.insert(std::pair<const std::string, std::shared_ptr<sf::Texture>>("1", std::shared_ptr<sf::Texture>(new sf::Texture(tempResource)));
//or:
resources.insert(std::make_pair("1", std::shared_ptr<sf::Texture>(new sf::Texture(tempResource))); 
```

然而`shared_ptr`，从新分配的内存构造一个有点浪费。因为这会进行两次分配（一个用于内存，一个用于内部数据`shared_ptr`）。如果你使用`std::make_shared(tempResource)`这两个分配可以组合成一个更高的效率。

C++11 也允许`resources.emplace("1", std::make_shared(tempResource)`就地构造该对，但上次我检查编译器对它的支持有些欠缺。

作为旁注：如果您不再需要`tempResource`，您可能需要考虑移动（而不是通过使用`std::move(tempResource)`而不是`tempResource`构造新分配的对象将其复制到数据结构中。取决于`sf::texture`此可能（或可能不）的实现效率更高。如果对象不是真正可移动构造的（因此移动构造与副本基本相同），您可能希望`Texture`直接将其构造为 a`shared_ptr`并在该对象上调用 load：

```
auto tempResource = std::make_shared<sf::Texture>();
tempResource->loadFromFile("1.PNG");
resources.emplace("1",std::move(tempResource));//or insert if emplace isn't availible 
```

# knockout.js - 如何从 html 访问 viewmodel 中的属性？

> ID：13787430
> 
> 赞同：0
> 
> 时间：2012-12-09T12:39:15.373
> 
> 标签：knockout.js

我有一个视图模型如下：

```
define(
    ['jquery', 'knockout', 'knockout.mapping', 'data/data', 'infra/store', 'infra/util', 'nls/nls', 'models/models'],
    function ($, ko, mapping, data, store, util, resources, models) {
        var
            post  = {},

            getPost = function (param) {
                $.when(data.deferredRequest('postDetail', param.id))
                 .done(function (result) {
                     mapping.fromJS(result, {}, post);
                 });
            };

        return {
            post   : post,
            getPost: getPost
        };
    }); 
```

和上面的html文件如下

```
<section id="section-post-detail" class="view">
    <div class="page-header">
        <label data-bind="text: post.title"></label>
    </div>
</section> 
```

我将视图模型应用于 html 文件，但是即使 post 对象中的 title 属性具有值，html 中的标题标签也不显示任何值。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:07:42.387

它应该是这样的：

```
<label data-bind="text: post().title"></label> 
```

因为 post 属性是可观察的，所以在尝试读取子属性之前调用 post() 作为函数（以获取其当前值）很重要。

# ruby-on-rails - 使用 will_paginate gem 在 Rails 3.2.3 中调用 Ajax

> ID：13787431
> 
> 赞同：3
> 
> 时间：2012-12-09T12:39:32.990
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, coffeescript, partial-views

我试图用 will_paginate gem 实现 Ajax 调用，我发现这个指南[http://ramblinglabs.com/blog/2011/11/rails-3-1-will_paginate-and-ajax](http://ramblinglabs.com/blog/2011/11/rails-3-1-will_paginate-and-ajax)这似乎是一个简单的解决方案，虽然它包括我不熟悉的咖啡脚本，所以如果有人有不同的解决方案，请告知..

我的代码如下

我的观点

```
<div class="container">
 <div class="row">
  <div id="userRecipes">
   <%= render partial: 'userrecipes' %>
 </div>
</div><!--/row--> 
```

我的部分（用户食谱）

```
 <% @recipes.each do |r| %>
  <div class="span3">
   <div class="thumbnail">
    <%= image_tag r.avatar.url(:myrecipes) %>
   </div>
   <h4><%= link_to r.dish_name, r %></h4>
   <hr>
    <p><%= truncate r.description, :length => 90 %></p>
    <p><%= link_to "Edit Recipe", edit_recipe_path(r.id) %></p>
    <p><%= link_to "Delete Recipe", recipe_path(r.id), :confirm => "Are you sure?", :method => :delete %></p>
    <p><%= link_to "Add to favorites",  {:controller => 'favourites', :action => 'create', :recipe_id => r.id}, {:method => :post } %></p>
   </div><!--/span3-->
   <% end %>
   <%= will_paginate @recipes %> 
```

更新了 userrecipes.js.erb 文件

```
$('#userRecipes').html('<%= escape_javascript(render partial: 'userrecipes') %>');
$.setAjaxPagination(); 
```

咖啡脚本

```
$ ->
$.setAjaxPagination = ->
$('.pagination a').click (event) ->
  event.preventDefault()
  loading = $ '<div id="loading" style="display: none;"><span><img src="/assets/loading.gif" alt="cargando..."/></span></div>'
  $('.other_images').prepend loading
  loading.fadeIn()
  $.ajax type: 'GET', url: $(@).attr('href'), dataType: 'script', success: (-> loading.fadeOut -> loading.remove())
  false

  $.setAjaxPagination() 
```

当我单击下一个锚标记以显示下一组结果时，页面保持原样并且没有新内容出现

使用控制台查看是否有任何错误时，我可以看到任何错误，输出为

```
GET http://localhost:3000/my_recipes?page=2&_=1355055997639 
```

我在这里错过了什么吗？还是我的 userrecipes.js.erb 文件有问题，因为在其他 Ajax 示例中我看到你在渲染部分时使用了 escape_javascript？

编辑

在控制台中检查响应时，它还显示正在加载要加载的新配方，但视图中没有发生任何事情

任何指针表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T15:21:52.977

为什么不尝试一种更简单的方法，创建一个具有以下内容的新助手（例如 app/helpers/will_paginate_helper.rb）：

```
module WillPaginateHelper
  class WillPaginateJSLinkRenderer < WillPaginate::ActionView::LinkRenderer
    def prepare(collection, options, template)
      options[:params] ||= {}
      options[:params]['_'] = nil
      super(collection, options, template)
    end

    protected
    def link(text, target, attributes = {})
      if target.is_a? Fixnum
        attributes[:rel] = rel_value(target)
        target = url(target)
      end

      @template.link_to(target, attributes.merge(remote: true)) do
        text.to_s.html_safe
      end
    end
  end

  def js_will_paginate(collection, options = {})
    will_paginate(collection, options.merge(:renderer => WillPaginateHelper::WillPaginateJSLinkRenderer))
  end
end 
```

然后在您的视图中使用此标签进行 ajax 分页：

```
<%= js_will_paginate @recipes %> 
```

请记住，分页链接将包含 url 的现有参数，您可以排除这些，如下所示。这是标准的分页功能：

```
<%= js_will_paginate @recipes, :params => { :my_excluded_param => nil } %> 
```

希望能解决您的问题。

**解释：**

Will_paginate 允许您创建自己的**自定义渲染器**。WillPaginateJSLinkRenderer 就是这样一个自定义渲染器，这个类可以在任何地方定义，它不必在辅助模块中定义。自定义渲染器扩展了标准渲染器（LinkRenderer），只重新定义了两个方法。

重写**prepare 方法**以显式删除[cache buster 参数](https://stackoverflow.com/questions/5355667/strange-underscore-param-in-remote-links)，因为 will_paginate 使用呈现页面时存在的所有参数创建页面 url，并且我们不想重用 cache buster 参数。

**链接方法**是原始[LinkRenderer 源代码](https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/view_helpers/link_renderer.rb)的复制粘贴，但使用 remote: true 创建链接以使其成为 JS 请求。

最后，**js_will_paginate**方法是一个标准的视图助手方法，用于调用普通的 will_paginate 视图助手方法，但将我们的自定义渲染器添加到选项中，以便使用它来代替普通渲染器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-28T10:53:31.360

以防万一有人正在寻找 Rails 4 解决方案。我喜欢 Pierre Pretorius 的回答，但它在 4.1.1 上对我来说失败了，因为**link_to_function的****“方法未定义”**就行了：

 **```
@template.link_to_function(text.to_s.html_safe, ajax_call, attributes) 
```

我刚刚将行替换为：

```
@template.link_to(text.to_s.html_safe, '#', attributes.merge(:onclick => "#{ajax_call} event.preventDefault();")) 
```

我希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T15:28:12.537

您没有在 js.erb 中转义 javascript，这应该是问题所在。

```
$('#userRecipes').html('<%= escape_javascript(render partial: 'userrecipes') %>');
$.setAjaxPagination(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T09:46:19.737

ajax_will_paginate 是一个极好的方法，但不幸的是它弄乱了分页的 UI。我采用了另一种 javascript 方法以获得更大的灵活性。我在 pageRender 上调用了这个方法。

```
function checkForAjaxPaginate(controller,make_ajax){
    var href = "";
    $(".pagination").find("ul").each(function(){
        $(this).find("li").each(function(){
            $(this).find("a").each(function(){
                href = $(this).attr("href");
                if(href.indexOf(controller+".js") != -1){
                    if(make_ajax){
                        $(this).attr("data-remote","true");
                    }
                    else{
                        $(this).attr("href",href.replace(".js",""));
                    }
                }
            });
        });
    });
} 
```

为了获得更大的灵活性，您只需在“控制器”变量中传递操作名称，如果要将其转换为 ajax，则将 true 传递给 make_ajax。我所做的只是检查href链接是否为“.js”，如果make_ajax为真，然后添加一个attr“data-remote = true”，在我们的ROR应用程序中使其成为ajax。如果 make_ajax 不正确，那么我只是删除“.js”，这样代码就不会混乱。我希望这有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-30T20:40:24.433

Pierre Pretorius 的回答很好，但我必须做更多的工作才能让它对我有用，这还不清楚。也许这会对其他初学者有所帮助。

除了制作那个助手和使用`js_will_paginate`标签之外，我还这样做了：

在将我试图分页的内容移动到部分（`_recipes.html.erb`在上面的例子中）之后，我还创建了一个`show.js.erb`文件（在与部分相同的视图中），其文本类似于：

```
$('#recipes').html('<%= escape_javascript(render partial: 'recipes') %>'); 
```

然后我不得不将 js_will_paginate 标记也移动到底部的部分（因此它会在我分页或单击下一个/上一个时更新）。然后我必须将渲染部分帮助程序包装在您在 js 文件中定位的 div id 中，因此在此示例中：

```
<div id="recipes">
  <%= render partial: "recipes" %> 
</div> 
```

这对其他人来说可能非常清楚，但我不确定 OP 中的哪些步骤必须保留，哪些是不必要的。这些步骤对我有用。您不需要在控制器中添加 respond_to js，因为助手会处理这些或有一个咖啡脚本文件。**

# batch-file - 存在逗号时，值未正确从参数传递到变量（批处理文件）

> ID：13787432
> 
> 赞同：0
> 
> 时间：2012-12-09T12:39:36.240
> 
> 标签：batch-file, parameter-passing

用法：abc.bat /c 1,2,3

代码：

```
@echo off
echo %1
set variable=%2
echo %variable% 
```

输出：

```
/c
1 
```

如何防止参数值在传递给变量时被剪切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:30:06.553

用双引号将它们括起来。调用你的脚本使用

```
abc.bat /c "1,2,3" 
```

# c# - 阻止 Windows 8 中的特定应用程序功能

> ID：13787434
> 
> 赞同：2
> 
> 时间：2012-12-09T12:39:41.530
> 
> 标签：c#, windows-8

根据[msdn](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)：

> 需要以编程方式访问图片库等用户资源或网络摄像头等连接设备的 Windows 应用商店应用必须声明适当的功能。

有没有办法以编程方式识别应用程序何时请求特定功能，并允许/拒绝请求？

我更喜欢 c# 解决方案，但任何其他方式都可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:28:19.173

> 有没有办法以编程方式识别应用程序何时请求特定功能，并允许/拒绝请求？

你没有。Windows 会处理这个问题（用户输入适当）。如果您想阻止某些软件包安装，AppLocker 是 Windows 功能。

# java - 在less和coffeescript之间共享变量？

> ID：13787439
> 
> 赞同：1
> 
> 时间：2012-12-09T12:40:26.123
> 
> 标签：java, javascript, css, coffeescript, playframework-2.0

是否可以在 Play 中的(CSS) 和(JavaScript) 之间**共享**变量。`Less``CoffeScript`

较少的：

```
@width: 600px;
@height: 800px;

.right {
  width: @width;
  height: @height;
} 
```

咖啡脚本：

```
width = 600
height = 800

stage = new Kinetic.Stage(
  container: 'mainCanvas'
  width: width
  height: height
) 
```

我发现必须在两个文件中重复自己非常不方便。

自然，我希望能够在更高的抽象层定义宽度和高度。

当然，任何更通用且可应用于任何框架的技术也是值得赞赏的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:08:13.187

就我而言，没有办法。

也许您可以在 CSS 中定义一个类并仅从样式调整宽度和高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:33:50.677

如果您只是尝试通过 jquery 设置 css 类怎么办？

```
stage = new Kinetic.Stage
    container: 'mainCanvas'
    width: 0
    height: 0

mc = $("#mainCanvas")
#assuming that mainCanvas is the element you want to style
mc.addClass "right" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T09:14:04.303

[罗塞塔](https://npmjs.org/package/rosetta)是您正在寻找的。

* * *

从 npm 页面...

示例假设您想要创建一个共享变量：

```
$thumbnailSize = 250px 
```

Rosetta 允许您在 Javascript 中使用此变量：

```
var rosetta = require('./rosetta');
console.log('Thumbnail size is:', rosetta.thumbnailSize.val); 
```

...和您的 CSS（在本例中为 Stylus 文件）：

```
@import rosetta
.thumb { 
  width: $thumbnailSize
  height: $thumbnailSize
} 
```

# java - 为什么Java反射可以访问私有字段/方法？

> ID：13787440
> 
> 赞同：1
> 
> 时间：2012-12-09T12:40:36.820
> 
> 标签：java, code-access-security

在Java中，我们可以写

```
Foo f = new Foo();
Method method = f.getClass().getDeclaredMethod("say", null); // private void say() 
method.setAccessible(true);
method.invoke(f, null); 
```

为什么Java反射API可以访问这样的方法？JVM有什么魔力吗？

这是一些“java安全属性”吗？

我尝试使用 asm.jar 编写对此类方法/字段的字节码 dicty 访问，但失败了。它总是抛出：

```
Exception in thread "main" java.lang.IllegalAccessError: tried to access field org.nutz.Abc.name from class sun.net.wendal.V$1
    at sun.net.wendal.V$1.run(V.java:14)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.wendal.V.main(V.java:11) 
```

我尝试围绕 AccessController.doPrivileged 调用它，但也失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:40:02.200

JVM 可以通过一种称为运行时类型信息 (RTTI) 的技术在运行时检查任何类。这是通过一种称为**类**对象的特殊对象来完成的，该对象包含有关类的信息。

类**Class**和**java.lang.reflect**库支持反射的概念。因此使用类**Class**的对象，jvm 可以实例化并且还可以调用该类的方法/构造函数。

请检查类 API：[http ://docs.oracle.com/javase/7/docs/api/java/lang/Class.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:32:29.247

拥有私有方法和可以通过某些方式访问但不能通过其他方式访问的字段是很神奇的。能够访问所有内容是最简单的情况，也是本机级别的默认设置。当您使用`setAccessible(true)`它时，只需关闭访问检查，这就是为什么即使您知道您可以访问它也可以使用它，因为它可以加快调用（）

# gantt-chart - 是否有任何可以由团队自己设置的基于网络的甘特图工具？

> ID：13787441
> 
> 赞同：1
> 
> 时间：2012-12-09T12:40:49.830
> 
> 标签：gantt-chart

伙计们

是否有任何可以由团队自己设置的基于网络的甘特图工具？我知道有很多基于网络的甘特图工具（例如 TeamGantt）。但似乎他们都要求您将数据存储在他们的服务器上。是否有任何工具可以由团队自己设置并且只能在我们的 Intranet 中看到？

我不喜欢桌面工具（例如 OpenProj 或 GanttProject），因为很难在团队成员中共享。

谢谢和BR，林茂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-24T13:57:48.933

您可以查看[dhtmlxGantt](http://www.dhtmlx.com/docs/products/dhtmlxGantt/index.shtml)，一个可以添加到网页上的 JavaScript 甘特图。它是开源的 (GPL)，允许您为您的应用程序创建可自定义的交互式甘特图。

（免责声明：我为 DHTMLX 工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-09T04:01:06.080

我会检查[jsGanttImproved](https://github.com/jsGanttImproved/jsgantt-improved)，因为它不需要任何额外的库并且是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T11:33:59.123

抱歉，如果答案为时已晚，但我使用了两个基于网络的甘特图：

*   js甘特图
*   Dojo 框架 + Dojox + dojox.gantt

你可以很容易地用谷歌搜索它们。他们将接受包含任务、资源和依赖项的 JSON 字符串并绘制您的甘特图。

可能需要一些编码来适应您的环境。

# android - CREATE TABLE 中的 FOREIGN KEY 语法错误

> ID：13787443
> 
> 赞同：11
> 
> 时间：2012-12-09T12:41:02.457
> 
> 标签：android, sql, android-sqlite

我在调试器上得到以下输出。我不确定缺少什么语法。

SQL 代码是：

```
CREATE TABLE weeks(Week_Id INTEGER PRIMARY KEY, 
  Day TEXT, 
  Start_Time Text, 
  End_Time Text, 
  Break_Time Text );
CREATE TABLE projects(Project_Id INTEGER PRIMARY KEY,
  Name TEXT, 
  Description Text, 
  Client_Name Text, 
  Location Text );  
CREATE TABLE timesheets(Timesheet_Id INTEGER PRIMARY KEY,
  Project_Id  INTEGER,
  FOREIGN KEY (Project_Id) REFERENCES projects (Project_Id),
  Week_Id INTEGER,
  FOREIGN KEY (Week_Id) REFERENCES weeks (Week_Id)); 
```

错误归结为：

```
12-09 12:34:20.782: E/SQLiteLog(6490): (1) near "Week_Id": syntax error 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-09T13:03:22.583

尝试将`FOREIGN KEY`列表移动到创建变量之后。

```
CREATE TABLE timesheets(Timesheet_Id INTEGER PRIMARY KEY,
  Project_Id  INTEGER,
  Week_Id INTEGER,
  FOREIGN KEY (Project_Id) REFERENCES projects (Project_Id),
  FOREIGN KEY (Week_Id) REFERENCES weeks (Week_Id)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T14:09:21.860

根据 SQLite 语法 (http://www.sqlite.org/lang_createtable.html) 你也可以这样写：

```
CREATE TABLE timesheets(Timesheet_Id INTEGER PRIMARY KEY,
Project_Id  INTEGER REFERENCES projects (Project_Id),
Week_Id INTEGER REFERENCES weeks (Week_Id)); 
```

这合并了声明和外键。

# javascript - 引导工具提示右移

> ID：13787454
> 
> 赞同：1
> 
> 时间：2012-12-09T12:42:27.920
> 
> 标签：javascript, html, twitter-bootstrap, tooltip

一切都很好，但在一瞬间工具提示变得疯狂。

[http://jsfiddle.net/AJkJa/10/](http://jsfiddle.net/AJkJa/10/)工具提示应该在文本附近，但它在右边框上。如果我设置小宽度，它将在文本的这个宽度上。

我做错了什么？

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <script>
        $(document).ready(function () {
            $("[rel=tooltip]").tooltip();
        });
    </script>
</head>
<body>
<div rel="tooltip" data-original-title="tooltip" data-placement="right">hover me. tooltip should be here.but it's shifted right</div>
</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:50:56.400

工具提示不会“变得疯狂”！当你放置它时，`right`它会找到容器的末端，并且因为`<div>`它`display:block`会在很远的地方找到末端。

一个简单的方法来证明它是给`background-color:red`那个 div 的，你会看到发生了什么。

要仅让**悬停我**获得悬停效果，请仅将工具提示提供给它，例如：

```
<div>
  <span rel="tooltip" data-original-title="tooltip" data-placement="right">hover me</span>. 
  tooltip should be here.but it's shifted right
</div> 
```

updated example: [http://jsfiddle.net/AJkJa/11/](http://jsfiddle.net/AJkJa/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:50:31.300

div 扩展到[整个可用空间](http://s.gullipics.com/image/1/5/m/59hli2-jh80wa-y24s/tooltip.png)。如果您提供宽度或显示样式，则它适合。

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <script>
        $(document).ready(function () {
            $("[rel=tooltip]").tooltip();
        });
    </script>
</head>
<body>
<div rel="tooltip" data-original-title="tooltip" style="width:350px;" data-placement="right">hover me. tooltip should be here.but it's shifted right</div>
</body>
</html> 
```

# windows-phone-7 - 如何在 Windows Phone 7 上测试我的应用程序

> ID：13787457
> 
> 赞同：0
> 
> 时间：2012-12-09T12:43:18.710
> 
> 标签：windows-phone-7

我制作了一个 windows phone 7 应用程序及其在模拟器上的工作，但我需要测试传感器......所以要测试传感器我想在我的手机中安装应用程序......我该怎么做？我不想把它投放市场，我只是想要它给我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:57:45.597

你需要有一个开发者解锁设备来安装你自己的应用程序。并且您可以在设备上安装的数量也有限制。

如果您是学生，您可以在 Dreamspark 免费订阅

# android - 何时使用 bindService 以及何时使用 startService 是明智的

> ID：13787460
> 
> 赞同：58
> 
> 时间：2012-12-09T12:44:22.157
> 
> 标签：android

这可能是一个愚蠢的问题，但我想知道什么时候使用它很聪明，`bindService`什么时候使用`startService`.

例如：

如果我使用`bindService`with `BIND_AUTO_CREATE`，服务将自动启动和创建，如下所示：http: [//developer.android.com/reference/android/content/Context.html#BIND_AUTO_CREATE](http://developer.android.com/reference/android/content/Context.html#BIND_AUTO_CREATE)

那么什么时候使用它是聪明的`bindService`，什么时候使用`startService`呢？我真的没有正确理解这两个。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-09T13:15:39.053

`bindService()`如果您的调用组件（`Activity`）需要`Service`通过`ServiceConnection`. 如果您不想与您通信，`Service`您可以使用 just `startService()`。您可以在下面看到服务和绑定服务之间的差异。

从文档：

> **开始**
> 
> 当应用程序组件（例如活动）通过调用 startService() 启动服务时，服务被“启动”。一旦启动，服务可以无限期地在后台运行，即使启动它的组件被破坏。通常，启动的服务执行单个操作并且**不会将结果返回**给调用者。例如，它可能通过网络下载或上传文件。操作完成后，服务应自行停止。
> 
> **边界**
> 
> 当应用程序组件通过调用 bindService() 绑定到服务时，服务被“绑定”。绑定服务提供了一个客户端-服务器接口，允许组件与服务交互、发送请求、**获取结果**，甚至通过进程间通信 (IPC) 跨进程执行此操作。绑定服务仅在另一个应用程序组件绑定到它时运行。多个组件可以一次绑定到服务，但是当所有组件都解除绑定时，服务将被销毁。

您可以在此处阅读更多内容：[Android 服务](http://developer.android.com/guide/components/services.html)、[绑定服务](http://developer.android.com/guide/components/bound-services.html)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-07-28T08:54:48.230

我同意@Ovidiu Latcu，但有一个重要说明：使用绑定服务时，服务会在启动它的活动结束时结束（如果它是绑定到该服务的唯一活动）。

因此，如果您想在应用程序处于后台时在后台运行服务（例如，活动已暂停并且用户不可见），那么您必须启动服务而不绑定它并与之通信，`BroadcastReceiver`例如.

# ios - C++ 代码在 iOS 上的 ARC 下如何表现？

> ID：13787467
> 
> 赞同：5
> 
> 时间：2012-12-09T12:45:02.007
> 
> 标签：ios, automatic-ref-counting, objective-c++

在 ARC 下，编译器添加了保留、释放调用。C++ 指针会发生什么？Objective C 编译器可以忽略它们吗？我没有太多将 C++ 与 Objective C 混合的经验，我正在关注一个 box2d 教程，该教程在 c++ 中包含整个引擎，但该示例在 ARC 之前。

我必须做一些特别的事情吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T12:54:51.210

ARC 是自动引用计数，只影响 NSObjects 等。al（objC 对象）
它不会影响 C 或 C++ 代码（您必须管理的那些对象！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T12:56:34.710

从您的评论中：

> 如果 C++ 指针指向在 C++ 代码中使用 new 分配的内存位置，ARC 会为其添加保留调用吗？

您不能保留释放 C++ 对象——它们不是 Objective-C 对象。关于这一点，您的其他问题的答案如下：

> C++ 指针会发生什么？

没有。

> 我必须做一些特别的事情吗？

不。

# php - 需要根据经度和纬度从数据库中显示地图上的地点

> ID：13787468
> 
> 赞同：-2
> 
> 时间：2012-12-09T12:45:14.003
> 
> 标签：php, javascript, google-maps

在我的 Api 中，我必须在地图中显示几个地方，其经度和纬度是从数据库中获取的，我正在使用 php，这将如何完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:48:11.373

谷 [**歌教程**](https://developers.google.com/maps/articles/phpsqlajax_v3)非常好。但由于它使用了已弃用的 mysql_ 扩展，我已将其修改为使用[**PDO**](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)。[**在这里**](http://daviestrachan.co.uk/maps/markerMap.php)查看地图[](http://daviestrachan.co.uk/maps/markerMap.php)

 **```
<?php
require("phpsqlajax_dbinfo.php");

// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);

// Opens a connection to a MySQL server
$dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
try {
     $stmt = $dbh->query('SELECT * FROM markers WHERE 1');  
     // setting the fetch mode  
     $stmt->setFetchMode(PDO::FETCH_ASSOC);
     header("Content-type: text/xml");
    // Iterate through the rows, adding XML nodes for each
    while($row = $stmt->fetch()) {  
        // ADD TO XML DOCUMENT NODE
        $node = $dom->createElement("marker");
        $newnode = $parnode->appendChild($node);
        $newnode->setAttribute("name", $row['name']);
        $newnode->setAttribute("address", $row['address']);
        $newnode->setAttribute("lat", $row['lat']);
        $newnode->setAttribute("lng", $row['lng']);
        $newnode->setAttribute("type", $row['type']);
    }
echo $dom->saveXML();
}
catch(PDOException $e) {
    echo "Error .". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", phpsqlajax_genxml.php , ". $e->getMessage()."\r\n", FILE_APPEND);  
 }
//Close the connection
$dbh = null; 
?> 
```

[**您可以在此处**](http://daviestrachan.co.uk/maps/mapPDO.php)查看生成的 XML[](http://daviestrachan.co.uk/maps/mapPDO.php)

 ****phpsqlajax_dbinfo.php**

```
<?
$username="username";
$password="password";
$database="username-databaseName";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:53:34.483

这是参考。它可以帮助你[https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)****

# c++ - 使用按位运算符编写程序以确定正余数

> ID：13787471
> 
> 赞同：1
> 
> 时间：2012-12-09T12:45:39.983
> 
> 标签：c++

> 编写一个程序，从键盘读取一个整数值到一个 int 类型的变量中，并使用一个位运算符（即不是 % 运算符！）来确定除以 8 时的正余数。
> 
> 例如，29 = (3x8)+5 和 14 = (2x8)+2 除以 8 时分别具有正余数 5 和 2。

我试图搜索如何解决它。我所做的是将给定的示例数字分解为二进制。

```
29 => 101001
8  => 001000
5 =>  000101 
```

我不知道我应该用 29 和 8 做什么操作才能得到二进制结果 5。

在搜索时，有些人说我们应该做（和操作 7 ）

```
remainder = remainder & 7 ; 
```

然后我尝试用 Value 本身来做到这一点

```
value = value & 7 ; 
```

这是我的代码之后......

```
#include <iostream>

using std::cout;
using std::endl;
using std::cin;

int main()
{
  int value = 0;
  int divisor = 8;
  int remainder = 0;

  cout << "Enter an integr and I'll divide it by 8 and give you the remainder!"
       <<endl;
  cin >> value;

  value = value & 7;
  remainder = value & divisor;
  cout << remainder;

  return 0;
} 
```

当我使用值 29 时，它给了我结果 0。我不知道我写的是对还是错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T12:52:05.797

只需`&`数字本身与 7。此外，`29 = 0b11101`。概括地说，除以一个数字时的余数`2 ^ n`是通过`&`使用`(2 ^ n) - 1`( `^`== power of)找到的

`modulo 16`因此，用 15来获得余数，`&`以此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T12:53:58.357

因为 8 正好是`2^3`，所以任何数的模 8 余数由它的最后三个二进制数字组成，即它等于数字按位加 7：

```
unsigned rem8 = number & 7; 
```

（7 是`111`二进制的，这就是原因。）

# java - 如何访问和控制其他窗口..java？

> ID：13787472
> 
> 赞同：1
> 
> 时间：2012-12-09T12:45:39.530
> 
> 标签：java, swing, listener

我喜欢做一个可以控制其他程序（窗口）的程序。我希望我的程序自动单击按钮并获取其他状态。但现在我只是问如何使用 java 访问这个其他程序/进程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T13:14:07.427

试试 java.awt.Robot

如何按键

```
import java.awt.Robot;
import java.awt.event.KeyEvent;

Robot robot = new Robot();

static int keyInput[] = { KeyEvent.VK_SPACE };
robot.keyPress(keyInput[i]); 
```

如何操作鼠标

```
import java.awt.event.InputEvent;

robot.mouseMove(300, 550);//MOVING MOUSE
r.mousePress(InputEvent.BUTTON1_MASK); // CLICKING MOUSE 
```

`InputEvent.BUTTON1_MASK`= 左键

`InputEvent.BUTTON2_MASK`= 中间按钮

`InputEvent.BUTTON3_MASK`= 右键

[这是](http://forum.codecall.net/topic/54172-robot-class/#axzz2EYmtmdJu)一个很好的教程开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T13:01:07.013

试着看看Java`Robot`类。

# android - Android：Andengine 设置适用于所有设备的精灵位置

> ID：13787473
> 
> 赞同：1
> 
> 时间：2012-12-09T12:45:43.803
> 
> 标签：android, andengine, dimension

我正在使用 And Engine 制作游戏，当我尝试以适用于所有设备的通用方式制作游戏时，我遇到了麻烦......

我需要在应该在所有屏幕上工作的背景精灵的特定位置上设置一个精灵......我的背景屏幕的尺寸与设备的尺寸相同......

我尝试使用像素，比如说 Glaxy S3 ha 尺寸**720*1280**

我根据它在位置**（584,608）设置我的精灵**

和我的 HTC experia ha 尺寸**(320,480)**

所以我需要将其设置为**(244,172)** ....

我已经尝试了以下所有方法来以通用方式设置精灵的位置，但如果任何工作都没有......

我已经尝试了很多以下方法来制作一些让我能够做到但找不到任何公式的公式。请告知

```
final Display display = getWindowManager().getDefaultDisplay();
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

 metrics.density;
 metrics.densityDpi;
 metrics.heightPixels);
 metrics.scaledDensity);
 metrics.widthPixels);
 metrics.xdpi);
 metrics.ydpi);

Point point = getDisplaySize(display);
 CAMERA_WIDTH = point.x;
 CAMERA_HEIGHT = point.y;
 DisplayMetrics dm = new DisplayMetrics();     getWindowManager().getDefaultDisplay().getMetrics(dm);
 double x = Math.pow(dm.widthPixels/dm.xdpi,2); 
 double y = Math.pow(dm.heightPixels/dm.ydpi,2);
 double screenInches = Math.sqrt(x+y);
 int widthPix = (int) Math.ceil(dm.widthPixels * (dm.densityDpi / 160.0));

//CAMERA_WIDTH = display.getWidth();
//CAMERA_HEIGHT = display.getHeight(); 
```

问题有点复杂.. 正如我上面所说的，我尝试使用像素，比如说 Glaxy S3 ha ***dimensions 720*1280 并且所需的精灵位置是（584,608）所以我以方式设置（CAMERA_WIDTH/1.233f，CAMERA_HEIGHT/2.112f） ***

但是 HTC experia 的尺寸为***320*480 所以根据 (CAMERA_WIDTH/1.233f,CAMERA_HEIGHT/2.112f) 所需的位置是 (2599.5,227.27)*** 但根据显示这是错误的......当我将它设置为**(244,172)对于 experia，它的工作完美。**... 请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:37:31.700

AndEngine 提供多种解析策略。它们用于确定 的大小`RenderSurfaceView`，从而确定屏幕上游戏的实际大小，具体取决于屏幕大小。

您应该使用`RatioResolutionPolicy`：它将使用尽可能大的尺寸，同时保持宽度和高度之间的恒定比率。通过保持相机的尺寸不变，它显示的所有内容都将按照这个恒定比例进行缩放，该比例在不同的设备上会有所不同。

示例：让`CAMERA_WIDTH = 720`和`CAMERA_HEIGHT = 480`。如果我们以这种方式创建相机和引擎选项：

```
this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
EngineOptions options = new EngineOptions(..., new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera); 
```

比率为`720 / 480 = 1.5`。在场景中放置精灵时，使用常量坐标。假设我们把它放在屏幕中间：

```
Sprite sprite = new Sprite(CAMERA_WIDTH / 2, CAMERA_HEIGHT / 2, ...); 
```

**所以**：

*   在屏幕尺寸为 720x480 的设备上，精灵将放置在 (360, 240) 屏幕坐标处。
*   在屏幕尺寸为 480x320 的设备上，精灵将放置在 (240, 160) 屏幕坐标处。
*   在屏幕尺寸为 800x480 的设备上，精灵将放置在 (400, 240) 屏幕坐标处。

等等...

# python - 使用 vim 打开新的 python 文件时自动标头

> ID：13787475
> 
> 赞同：8
> 
> 时间：2012-12-09T12:45:57.940
> 
> 标签：python, vim, header, snipmate, autocmd

> **可能重复：**
> [如何在使用 vim 创建新文件时自动添加一些骨架代码](https://stackoverflow.com/questions/162617/how-can-i-automatically-add-some-skeleton-code-when-creating-a-new-file-with-vim)

我在 SO 上搜索并搜索了一种在创建新 python 文件时创建自动标题的方法。我希望用 snipMate 找到一些东西，但找不到任何东西。我使用提供此功能的[bash-suport](https://github.com/vim-scripts/bash-support.vim)和[perl-support并喜欢它。](https://github.com/vim-scripts/perl-support.vim)如果它可以帮助我也是[python模式的用户](https://github.com/klen/python-mode)

1.  有没有办法用 snipMate 生成自动标题？
2.  如果没有，我在哪里可以找到示例？

我想要这样的东西：

```
#!/usr/bin/python
#-*- coding: utf-8 -*-
#===============================================================================
#
#         FILE: test.py
#
#        USAGE: ./test.py  
#
#  DESCRIPTION: 
#
#      OPTIONS: ---
# REQUIREMENTS: ---
#         BUGS: ---
#        NOTES: ---
#       AUTHOR: YOUR NAME (), 
# ORGANIZATION: 
#      VERSION: 1.0
#      CREATED: 09/12/2012 13:38:51
#     REVISION: ---
#===============================================================================

def main():
    """docstring for main"""
pass 
```

非常感谢阅读

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T14:51:12.177

你不需要 Snipmate。将您的标头保存到文件中，然后将以下内容添加到您的`.vimrc`：

```
au BufNewFile *.py 0r /where/you/saved/your/header.template 
```

这会自动为每个`.py`文件插入标题。

如果您想要一个带有变量的标题（例如更改日期、修订号、文件名等），[请参阅这篇文章](http://www.thegeekstuff.com/2008/12/vi-and-vim-autocommand-3-steps-to-add-custom-header-to-your-file/)和[这篇](http://vim.wikia.com/wiki/Use_eval_to_create_dynamic_templates)文章以获得更多帮助。但是还有[其他插件](http://www.vim.org/scripts/script.php?script_id=1160)可以帮助您。

# html - 每一页都会改变的东西

> ID：13787476
> 
> 赞同：1
> 
> 时间：2012-12-09T12:45:58.423
> 
> 标签：html, footer

我想知道是否有办法在我创建的每个页面上更改某段 HTML 代码。简单来说，例如，我制作了一个名为**1.html**的 HTML 页面并添加了页脚代码。例如`<div class="footer">`，我需要将此页脚添加到我制作的每一页。但是，我不想在每个页面上手动添加此页脚代码，因为这需要时间。

所以让它变得更简单，我制作了**1.html**、**2.html**和**3.html**并制作了**footer.html**并在其中添加了页脚代码。因此，我没有在每个页面上添加实际的页脚代码，而是将 footer.html 添加到**1.html**、**2.html**和**3.html**，然后编辑将在**1.html**、**2.html**和**3 上更新的 footer.html 。 .html** _

希望你明白我的意思。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T12:53:05.493

在纯 HTML 中无法做到这一点。您要么必须使用脚本语言（如 Python、Ruby、PHP...），要么必须使用静态网站生成器（如[jekyll](http://jekyllrb.com/)或[hyde](http://ringce.com/hyde)）。

如果您只是编写静态 HTML 文件，我会采用第二种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:54:06.480

您可以使用像 PHP 这样的服务器端语言来做到这一点

**1.php**

```
<html>
    <body>
        Title 1
        <?php include('footer.html') ?>
    </body>
</html> 
```

**2.php**

```
<html>
    <body>
        Title 2
        <?php include('footer.html') ?>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:07:55.073

如果您的网络服务器支持它（很多支持），您可以使用[Server Side Includes](https://en.wikipedia.org/wiki/Server_Side_Includes)。

粗略总结：

*   将 html 文件的扩展名更改为`.shtml`

*   将此添加到您希望页脚出现的任何位置

    `<!--#include virtual="../path/to/footer.txt" -->`

*   页脚文件应该只包含您需要替换 SSI 标记的 HTML 片段，这样当标签替换为页脚时，您就有了一个格式良好的 HTML 页面

在您的[pastebin 示例](http://pastebin.com/8qSiyNjV)中，您的“footer.txt”文件应包含以下内容：

```
<div class="footer">
  bla bla here....
</div> 
```

您希望在其中显示页脚的 .shtml 文件应如下[所示](http://pastebin.com/REQpRj3x)

（这假设您的 footer.txt 文件与 .shtml 文件位于同一文件夹中）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T13:51:31.677

无论您使用 php 还是 ssi，请记住“footer.html”只能是出现在普通 html 页面中“body”标签之间的代码，否则您将重复。

# c++ - 如何避免 shared_ptr 歧义？（stl与升压）

> ID：13787477
> 
> 赞同：7
> 
> 时间：2012-12-09T12:46:19.047
> 
> 标签：c++, ambiguity

> **可能重复：**
> [为什么是“使用命名空间标准；” 在 C++ 中被认为是一种不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

我在我`stl`的`shared_ptr`代码中使用了很多地方，并且在我使用过的任何地方都使用了以下`using`语句`shared_ptr`：

```
using namespace std::tr1; 
```

现在我需要使用`boost::bimap`. 所以我必须在我的代码中包含以下头文件：

```
#include <boost/bimap.hpp> 
```

一旦包含`bimap`头文件，`shared_ptr`类型就会变得不明确，我必须更改 to 的所有`shared_ptr`用法`std::tr1::shared_ptr`。由于这使我的代码变得丑陋，我正在寻找一种方法来避免这种歧义，而无需在`shared_ptr`任何地方使用完全限定的名称进行声明。我正在考虑使用`typedef`for `std::tr1::shared_ptr`，但也许也有更好的方法。任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T12:48:32.070

干脆就不介绍了。避免一般`using namespace ...`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T12:49:02.273

以下情况如何：

```
using shared_ptr = std::tr1::shared_ptr; 
```

但是，正确的答案实际上是不使用该`using namespace ...`语句，或者仅使用它来创建命名空间别名。

顺便说一句，你知道`std::tr1`自从去年 C++11 标准化以来它已经过时了吗？

# jquery - jConfirm 忽略取消确认

> ID：13787478
> 
> 赞同：1
> 
> 时间：2012-12-09T12:46:58.467
> 
> 标签：jquery

我在我的 JSP 页面中使用 jConfirm 来取消提交按钮单击。

如下代码，虽然我点击了取消按钮，但没有返回，然后继续下面的操作。

为什么以及如何？

还是有其他问题？

我也尝试过 jquery-ui-dialog，但结果是相同的忽略取消。

```
$("#dtdetailsubm").click(function() {

  .....

  jConfirm('Really post ?', 'Post confirmation', function (r){

    if (r == false) {

      return false;

    }

  });

  ..... 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:02:19.850

尝试拦截表单提交本身而不是提交按钮的点击。

```
$("#dtdetailForm").on('submit', function() {
  .....
  if(!confirm('Really post?') {
      return false;
  }
  else {
      ..... 
      return true;
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T00:17:59.463

请参阅[使用 jConfirm 来阻止脚本运行，如本机确认](https://stackoverflow.com/questions/3523700/prevent-script-from-running-using-jconfirm-like-native-confirm) 您可以使用 preventDefault() 函数停止操作（事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:47:48.380

谢谢你的建议。确认对话框效果很好，但我在 IE9 上使用 jConfirm。仍然跳过或忽略。

[http://labs.abeautifulsite.net/archived/jquery-alerts/demo/](http://labs.abeautifulsite.net/archived/jquery-alerts/demo/)

# c++ - 您如何使用类型特征进行条件编译？

> ID：13787490
> 
> 赞同：9
> 
> 时间：2012-12-09T12:49:19.833
> 
> 标签：c++, conditional-compilation, typetraits

我正在尝试编写类似[此处](https://stackoverflow.com/questions/3366818/conditional-compile-using-boost-type-traits)的代码，但使用 C++11 功能，而不使用 Boost。

从[这个例子](https://stackoverflow.com/a/257315/111307)开始，我试图定义一个`response_trait`基于特征结果的条件编译。我怎样才能使这项工作？

```
#include <vector>
using namespace std ;

struct Vector{ float x,y,z ; } ;
struct Vertex { Vector pos ; } ;
struct VertexN { Vector pos, normal ; } ;
struct Matrix {} ;

template <typename T>
struct response_trait {
  static bool const has_normal = false;
} ;

template <>
struct response_trait<VertexN> {
  static bool const has_normal = true;
} ;

template <typename T>
struct Model
{
  vector<T> verts ;

  void transform( Matrix m )
  {
    for( int i = 0 ; i < verts.size() ; i++ )
    {
      #if response_trait<T>::has_normal==true
      puts( "Has normal" ) ;
      // will choke compiler if T doesn't have .normal member
      printf( "normal = %f %f %f\n", verts[i].normal.x, verts[i].normal.y, verts[i].normal.z ) ;
      #else
      puts( "Doesn't have normal" ) ;
      printf( "pos = %f %f %f\n", verts[i].pos.x, verts[i].pos.y, verts[i].pos.z ) ;
      #endif
    }
  }

} ;

int main()
{
  Matrix m ;
  Model<Vertex> model ;
  model.verts.push_back( Vertex() ) ;
  model.transform( m ) ;

  Model<VertexN> modelNormal ;
  modelNormal.verts.push_back( VertexN() ) ;
  modelNormal.transform( m ) ;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-09T12:55:21.880

你可以尝试这样的事情：

```
void transform_impl(Matrix const & m, std::true_type const &)
{
    // has normal
}

void transform_impl(Matrix const & m, std::false_type const &)
{
    // doesn't have normal
}

template <typename T>
void transform(Matrix const & m)
{
    transform_impl(m, response_trait<T>());
} 
```

您只需要稍微修改一下您的特征：

```
#include <type_traits>
template <typename> struct response_trait : std::false_type { };
template <> struct response_trait<VertexN> : std::true_type { }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:28:28.253

如果您的代码可以放入函数中而不会使您的设计繁琐（例如，当您需要访问对象的大量成员变量时），这是一个替代解决方案。当然，有时最好将整个班级专门化。

```
#include <vector>
#include <stdio.h>

using namespace std ;

struct Vector{ float x,y,z ; } ;
struct Vertex { Vector pos ; } ;
struct VertexN { Vector pos, normal ; } ;
struct Matrix {} ;

template <typename T>
void printVertex(T vert)
{
      printf( "Doesn't have normal" ) ;
      printf( "pos = %f %f %f\n", vert.pos.x, vert.pos.y, vert.pos.z ) ;
}

template <>
void printVertex(VertexN vert)
{
      printf( "Has normal" ) ;
      printf( "normal = %f %f %f\n", vert.normal.x, vert.normal.y, vert.normal.z ) ;
}

template <typename T>
struct Model
{
  vector<T> verts ;

  void transform( Matrix m )
  {
    for( int i = 0 ; i < verts.size() ; i++ )
    {
        printVertex(verts[i]);
    }
  }
} ;

int main()
{
  Matrix m ;
  Model<Vertex> model ;
  model.verts.push_back( Vertex() ) ;
  model.transform( m ) ;

  Model<VertexN> modelNormal ;
  modelNormal.verts.push_back( VertexN() ) ;
  modelNormal.transform( m ) ;
} 
```

# winapi - 是否有 winapi 调用或键盘快捷键可以将 Windows 控制台输入“标记”模式？

> ID：13787491
> 
> 赞同：0
> 
> 时间：2012-12-09T12:49:34.903
> 
> 标签：winapi, console

通常用户通过在控制台标题栏中单击鼠标右键然后选择“编辑”并最后选择“标记”来执行此操作。-> [http://www.megaleecher.net/Copy_Paste_Text_Dos_Window](http://www.megaleecher.net/Copy_Paste_Text_Dos_Window)

那么有没有办法从控制台应用程序中通过将消息/api调用/键盘序列发送到它自己的窗口来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:10:15.940

如果这是您自己的应用程序，并且您想要 Windows 应用程序而不是控制台应用程序的更丰富的行为和灵活性，那么请使用 Windows 应用程序。否则，您可以尝试通过模拟输入来自动执行这些步骤`SendInput`。我建议不要这样做，因为它需要两个步骤（一次用于右键单击，一次用于选择“标记”）。这意味着如果有人在这两个事件之间点击了其他东西，你的顺序就会被打破。此外，您确实依赖于随时可能更改的实现细节的自动化。

查看[Console Functions](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)，似乎没有任何东西可用于设置选择。最接近的是[GetConsoleSelectionInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683173%28v=vs.85%29.aspx)。

如果您想处理控制台应用程序中的信息，更好的选择是将其通过管道传输到您自己的进程并在那里处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:58:07.387

成立：`PostMessage(GetConsoleWindow(), WM_COMMAND, 65522, 0);`

# php - jQuery keydown 功能不起作用

> ID：13787493
> 
> 赞同：0
> 
> 时间：2012-12-09T12:50:01.840
> 
> 标签：php, javascript, jquery, html, ajax

我需要一些帮助才能使以下代码正常工作：

```
$('#entry').keydown(function(e) {
    alert(e.keyCode);
}); 
```

使用此文本区域字段：

```
<textarea id="entry" placeholder="Type message here"></textarea> 
```

我已经检查了在括号外添加警报，并且文档已加载并且工作正常。我什至在此之后立即从数据库中提取了一系列条目，没有错误。

我要在这里做的是一个文本字段，当按下 Enter 时，它只是将`.val()`字段的 发送到另一个负责 AJAX 请求的函数。但很明显，当我无法进入该功能时，我无法到达那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T12:52:15.793

```
$(function() {
    $('#entry').on('keyup', function(e) {
        if (e.which == 13) someotherFunction(this.value);
    });
}); 
```

[**小提琴**](http://jsfiddle.net/krWLA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T12:55:34.510

尝试：

```
$('#entry').live('keydown',function(e) {
    alert(e.keyCode);
}); 
```

# android - 将对象从 Activity 传递给另一个时出错（使用 Parcelable）

> ID：13787497
> 
> 赞同：6
> 
> 时间：2012-12-09T12:50:38.183
> 
> 标签：android, android-intent, parcelable

我尝试使用 Parcelable 将一个对象类从一个活动传递给另一个活动

我创建了一个班级并将其命名为学生

```
package com.example.test08_passobjectoverintent;

import android.os.Parcel;
import android.os.Parcelable;

public class Student implements Parcelable
{

    private String st_AcadimicNumber ;
    private String st_Name ;
    private String st_Class ;
    public String getSt_AcadimicNumber() {
        return st_AcadimicNumber;
    }
    public void setSt_AcadimicNumber(String st_AcadimicNumber) {
        this.st_AcadimicNumber = st_AcadimicNumber;
    }
    public String getSt_Name() {
        return st_Name;
    }
    public void setSt_Name(String st_Name) {
        this.st_Name = st_Name;
    }
    public String getSt_Class() {
        return st_Class;
    }
    public void setSt_Class(String st_Class) {
        this.st_Class = st_Class;
    }   

    public Student(String st_AcadimicNumber, String st_Name, String st_Class) {
        super();
        this.st_AcadimicNumber = st_AcadimicNumber;
        this.st_Name = st_Name;
        this.st_Class = st_Class;
    }
public Student() {
    super();
}
    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        // TODO Auto-generated method stub

    }

} 
```

在主要活动中，我使用此代码传递对象...

```
 Student st = new Student("aaa","bbb","ccc");
                Intent intent = new Intent(MainActivity.this,Main2Activity.class);
                intent.putExtra("stu", st);
                startActivity(intent); 
```

在第二个活动中（检索一个）

我使用此代码（错误在这里）

```
 Student model = (Student)getIntent().getParcelableExtra("stu"); 
```

LogCat 错误

```
12-09 15:50:06.068: E/Trace(30655): error opening trace file: No such file or directory (2)
12-09 15:50:06.188: D/libEGL(30655): loaded /system/lib/egl/libEGL_mali.so
12-09 15:50:06.188: D/libEGL(30655): loaded /system/lib/egl/libGLESv1_CM_mali.so
12-09 15:50:06.193: D/libEGL(30655): loaded /system/lib/egl/libGLESv2_mali.so
12-09 15:50:06.193: D/(30655): Device driver API match
12-09 15:50:06.193: D/(30655): Device driver API version: 10
12-09 15:50:06.193: D/(30655): User space API version: 10 
12-09 15:50:06.193: D/(30655): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Wed Sep 12 17:53:53 KST 2012 
12-09 15:50:06.218: D/OpenGLRenderer(30655): Enabling debug mode 0
12-09 15:50:08.033: D/GestureDetector(30655): [Surface Touch Event] mSweepDown False, mLRSDCnt : -1 mTouchCnt : 4 mFalseSizeCnt:0
12-09 15:50:08.123: D/AndroidRuntime(30655): Shutting down VM
12-09 15:50:08.123: W/dalvikvm(30655): threadid=1: thread exiting with uncaught exception (group=0x40e372a0)
12-09 15:50:08.128: E/AndroidRuntime(30655): FATAL EXCEPTION: main
12-09 15:50:08.128: E/AndroidRuntime(30655): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test08_passobjectoverintent/com.example.test08_passobjectoverintent.Main2Activity}: android.os.BadParcelableException: Parcelable protocol requires a Parcelable.Creator object called  CREATOR on class com.example.test08_passobjectoverintent.Student
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.os.Looper.loop(Looper.java:137)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.ActivityThread.main(ActivityThread.java:4898)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at java.lang.reflect.Method.invoke(Method.java:511)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at dalvik.system.NativeStart.main(Native Method)
12-09 15:50:08.128: E/AndroidRuntime(30655): Caused by: android.os.BadParcelableException: Parcelable protocol requires a Parcelable.Creator object called  CREATOR on class com.example.test08_passobjectoverintent.Student
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.os.Parcel.readParcelable(Parcel.java:2086)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.os.Parcel.readValue(Parcel.java:1965)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.os.Parcel.readMapInternal(Parcel.java:2226)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.os.Bundle.unparcel(Bundle.java:223)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.os.Bundle.getParcelable(Bundle.java:1165)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.content.Intent.getParcelableExtra(Intent.java:4451)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at com.example.test08_passobjectoverintent.Main2Activity.onCreate(Main2Activity.java:22)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.Activity.performCreate(Activity.java:5191)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
12-09 15:50:08.128: E/AndroidRuntime(30655):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
12-09 15:50:08.128: E/AndroidRuntime(30655):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T13:06:37.680

您需要实现代码以从包裹中写入和读取您的类字段。

在`writeToParcel`：

```
@Override
public void writeToParcel(Parcel dest, int flags) {
      dest.writeString(st_AcadimicNumber);
      dest.writeString(st_Name);
      dest.writeString(st_Class);
} 
```

包裹创建者：

```
public static final Parcelable.Creator<Track> CREATOR
= new Parcelable.Creator<Track>() {
    public Student createFromParcel(Parcel in) {
        return new Track(in);
    }

    public Student[] newArray(int size) {
        return new Track[size];
    }
}; 
```

和构造函数：

```
public Student (Parcel source){
      /*
       * Reconstruct from the Parcel. Keep same order as in writeToParcel()
       */
      st_AcadimicNumber = source.readString();
      st_Name = source.readString();
      st_Class = source.readString();
} 
```

它已经完成了。

问候

# database - 云数据库或本地数据库

> ID：13787512
> 
> 赞同：1
> 
> 时间：2012-12-09T12:52:48.247
> 
> 标签：database, cloud, clouddb

我想用大数据库实现网站，每个表大约有 500 万行，并且想知道什么工作对我来说更好，在云中拥有数据库或拥有本地数据库。云数据库有ping问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:57:59.277

我正在将云数据库用于类似的事情，并且效果很好。我认为使用云数据库没有问题。

# android - 膨胀类片段的 InflateException 错误

> ID：13787517
> 
> 赞同：1
> 
> 时间：2012-12-09T12:53:17.967
> 
> 标签：android, fragment

启动具有片段的活动时，我不断收到该错误。

这是我的代码的概述：

*家庭*活动从*启动*屏幕活动开始

**home.xml** (每个片段有 50% `layout_weight`)

```
<LinearLayout>
    <fragment android:name="com.example.test.FragmentClass1" ...>
    <fragment android:name="com.example.test.FragmentClass2" ...>
</LinearLayout> 
```

**片段1.xml**

```
<LinearLayout>
    //some EditTexts and Buttons here
<LinearLayout> 
```

**片段2.xml**

```
<LinearLayout>
    <ListView ... />
</LinearLayout> 
```

**FragmentClass1.java**

```
public class FragmentClass1 extends Fragment{
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view = inflater.inflate(R.layout.fragment1, container, false);
        return view;
    }
} 
```

**片段类2.java**

```
public class FragmentClass2 extends ListFragment{
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        View view = inflater.inflate(R.layout.fragment2, container, false);
        return view;
    }
} 
```

**主页.java**

```
public class Home extends Activity{
    public View onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);
        //still empty
    }
} 
```

错误日志是这样的：

```
12-09 20:39:00.317: E/AndroidRuntime(18214): FATAL EXCEPTION: main
12-09 20:39:00.317: E/AndroidRuntime(18214): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Home}: android.view.InflateException: Binary XML file line #10: Error inflating class fragment
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.os.Looper.loop(Looper.java:137)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at java.lang.reflect.Method.invokeNative(Native Method)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at java.lang.reflect.Method.invoke(Method.java:511)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at dalvik.system.NativeStart.main(Native Method)
12-09 20:39:00.317: E/AndroidRuntime(18214): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class fragment
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.Activity.setContentView(Activity.java:1881)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at com.example.test.Home.onCreate(Home.java:16)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.Activity.performCreate(Activity.java:5104)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-09 20:39:00.317: E/AndroidRuntime(18214):    ... 11 more
12-09 20:39:00.317: E/AndroidRuntime(18214): Caused by: java.lang.ClassCastException: com.example.test.Fragment1 cannot be cast to android.app.Fragment
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.Fragment.instantiate(Fragment.java:585)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.Fragment.instantiate(Fragment.java:560)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.app.Activity.onCreateView(Activity.java:4709)
12-09 20:39:00.317: E/AndroidRuntime(18214):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
12-09 20:39:00.317: E/AndroidRuntime(18214):    ... 21 more 
```

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T12:56:04.107

如果您尝试使用 Android Support 包的片段的反向移植，您需要让您的活动继承自`FragmentActivity`（或从其他继承自的东西`FragmentActivity`，例如`SherlockFragmentActivity`）。

* * *

**更新**

堆栈跟踪的关键行是：

```
12-09 20:39:00.317: E/AndroidRuntime(18214): Caused by: java.lang.ClassCastException: com.example.test.Fragment1 cannot be cast to android.app.Fragment 
```

现在，您提供的源代码中没有任何名为`com.example.test.Fragment1`. 如果这确实是您在列表中所拥有的`com.example.test.FragmentClass1`，那么`Fragment`您所继承的可能不是`android.app.Fragment`。在这种情况下，最有可能的是`android.support.v4.app.Fragment`——`Fragment`来自 backport 的类。如果是这种情况，请更改导入语句（以及其余代码库中的任何其他有缺陷的语句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:09:59.437

你必须写

```
super.onCreateView(inflater, container, savedInstanceState); 
```

在您的 onCreateView 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T16:27:52.000

我有这个问题。我通过在清单中添加以下行来修复它。

```
<meta-data android:name="com.google.android.gms.version"
       android:value="@integer/google_play_services_version"/> 
```

# css - 通过选中的选择器隐藏前一个元素

> ID：13787520
> 
> 赞同：1
> 
> 时间：2012-12-09T12:53:49.713
> 
> 标签：css

我想使用 css3 功能来隐藏以前的元素。

基本上，

我想使用复选框来隐藏以前的兄弟元素而不使用 javascript。

我已经为入口点准备了一个样本。

[http://cssdesk.com/5zccy](http://cssdesk.com/5zccy)

谢谢

编辑：

*   我已经改变了样本。
*   我的用例：我想在我的网站上有可折叠的部分。由一个简单的复选框分隔的两个区域并选中它将精美地隐藏以前的兄弟姐妹。

我相信使用纯 css 可以让我减少使用 javascript 来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:03:08.447

没有 css 选择器来选择匹配元素的前一个标签。仅使用 css 可以获得的最接近的方法是为下一个元素执行此操作：

```
<input class="hider" type="checkbox" /> child
<div class="parent">
    Parent
</div>​

.hider:checked + * {
    display:none;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:04:58.347

您不能隐藏前面的元素 - 只能使用[通用兄弟选择器隐藏以下元素](http://reference.sitepoint.com/css/generalsiblingselector)

[**演示**](http://cssdesk.com/qZ8AM)

然后您可能能够定位元素，因此在实际页面上，复选框将出现在`.parent`div 之后。

# c++ - 转换向量 > 到矢量 ， 是否可以？

> ID：13787521
> 
> 赞同：1
> 
> 时间：2012-12-09T12:53:51.040
> 
> 标签：c++, boost, shared-ptr

我有一个函数，它接受一个指向 Foo 的指针的 stl 向量作为参数。

但是，我也有对象是指向同一个类 Foo 的共享指针。我也希望能够调用这个函数来提供其他对象。我必须重载该功能吗？我似乎无法将其动态`vector<shared_ptr<Foo>>`转换为`vector<Foo*>`.

我知道可以使用 Get() 方法将 shared_ptr 转换为指针，但这又如何呢？有任何想法吗？

**更新问题**：

我已经实现了下面建议的解决方案，但是现在，在为模板函数声明所有可能的类型时，我得到：

“'void my_func(std::vector&, std::vector&) [with Ptr_Jet1 = Jet*, Ptr_Jet2 = Jet*]' 的显式实例化，但没有可用的定义”

对于所有其他组合（例如，Ptr_Jet1 是 shared_ptr 而不是 Jet*.

在 .cpp 文件中，我有：

```
template<typename Ptr_Jet1, typename Ptr_Jet2>
void my_func(vector<Ptr_Jet1> vec1, vector<Ptr_Jet2> vec2){
//definition
} 
```

在 .h 文件中，我有：

```
typedef boost::shared_ptr<Jet> ptr_jet;

template<typename Ptr_Jet1, typename Ptr_Jet2>
void my_func(vector<Ptr_Jet1> vec1, vector<Ptr_Jet2> vec2);
//
template void my_func(vector<Jet*> vec1, vector<Jet*> vec2);
template void my_func(vector<Jet*> vec1, vector<ptr_jet> vec2);
template void my_func(vector<ptr_jet> vec1, vector<Jet*> vec2);
template void my_func(vector<ptr_jet> vec1, vector<ptr_jet> vec2); 
```

我不明白这里有什么问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:08:22.213

`shared_ptr<T>`并且`T*`是不同的类型，因此您不能简单地从`vector<shared_ptr<T>>`to 转换`vector<T*>`。如果您确实需要一个`vector<T*>`（意味着您不能按照 Barnabas Szabolcs 的回答更改您的函数），您需要手动将指针从源向量中复制出来。由于您无论如何都在使用 boost，我认为使用`Boost.Range`是可以的。如果你可以使用 C++11，这很简单：

```
vector< shared_ptr<Foo> > foo;
auto range = foo | boost::adaptors::transform([](shared_ptr<Foo>& ptr) { return ptr.get(); };
std::vector<Foo*> bar(range.begin(), range.end()); 
```

这将 C++11 用于 lambda 函数（可以很容易地被 c++03 代码的函子/functionptr 替换）并`auto`保存范围。IIRC 的文档中未指定范围转换的返回类型`Boost.Range`，因此硬编码可能不是一个好主意。要摆脱`auto`c++03 代码，您可以使用 `boost::copy_range`：

```
struct transformation //using a functor instead of a plain function will enable inlining of the transformation, which is liekly benefitial for performance
{ Foo* operator()(shared_ptr<Foo>& ptr) { return ptr.get();}};

std::vector<Foo*> bar = boost::copy_range<std::vector<Foo*>>(foo | boost::adaptors::transform(transformation())); 
```

当然你可以使用`transform_iterator`from`Boost.Iterators`代替，但我发现使用`Range`会导致更可读的代码。

当然，如果您将`vector<Foo*>`only 作为函数的参数，您可以跳过将其写入变量并直接调用`myFunc(copy_range<std::vector<Foo*>>(...))`，这可能会使编译器跳过几个副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T12:58:41.667

如果您编写了该函数，**我建议您使用模板化**，因为 shared_ptr`operator*`就像您使用原始指针一样。

```
template<typename _Tp_ptr_Foo>
void your_fun(const vector<_Tp_ptr_Foo>& ); // or something alike here 
```

在这种情况下，模板化与函数重载基本相同，但通过模板化可以避免重复代码。

如果您无法控制该函数，则需要转换整个向量。如果它不超过 1000 个元素并且你不做超过几百次，那么就没有太多的性能损失可担心了。

不幸的是，您不能将一个动态转换为另一个，因为它们不是通过继承相关的。虽然长得很像，`vector<T>`但一点关系都没有`vector<U>`。

更新：
我同意 Grizzly 的观点，模板参数是自动推导出来的，所以你不需要明确地写出来。所以你可以继续调用它`your_fun(v)`。

唯一需要注意的是：如果您分别使用头文件和代码文件，则需要[明确指示编译器应该创建两个函数](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fexplicit_instantiation.htm)，如下所示：

```
//header file:

template<typename _Tp_ptr_Foo>
void your_fun(const vector<_Tp_ptr_Foo>& ); 

template void your_fun(const vector<Foo*>& ); 
template void your_fun(const vector<shared_ptr<Foo> >& ); 

//code file:

template<typename _Tp_ptr_Foo>
void your_fun(const vector<_Tp_ptr_Foo>& )
{
  // implementation
} 
```

* * *

UPDATE2：（回答 Elelias 的评论）

您的模板声明应如下所示：

```
// header file:

template<typename _Tp1, typename _Tp2, typename _Tp3>
void your_fun(const vector<_Tp1>&, const vector<_Tp2>&, const vector<_Tp3>& ); 
```

之后，您有 2 个选择：

1.  您可以将定义放入单独的代码文件中。在这种情况下，您需要在头**文件的实现文件中使用 6 个显式模板实例化，**每个组合一个。

2.  **您可以将定义放入标题中**，然后您不需要 6 个显式实例化。在这种情况下，我宁愿建议这样做。虽然它没有将声明和实现分开，但它并不是那么糟糕的解决方案。我也在严肃的 c++ 库中看到过这种方法，例如，您可以查看 OpenCV 中的 operations.hpp。

# wpf - 在 WPF 用户控件中填充 Datagrid

> ID：13787522
> 
> 赞同：1
> 
> 时间：2012-12-09T12:53:55.493
> 
> 标签：wpf, datagrid, user-controls

我对通过 WPF 用户控件中的 DataContext 属性（绑定 DataTable）进行非常简单的 Datagrid 填充感到疯狂。我将代码从用户控制项目传输到 WPF Windows 项目，它工作正常。发生什么了？下面是在 WPF 窗口中工作但在 WPF 用户控件中不起作用的代码：

XAML：

```
<DataGrid AutoGenerateColumns="true" ItemsSource="{Binding}" Height="282" HorizontalAlignment="Left" Margin="6,6,0,0" Name="datGrdFalhas" VerticalAlignment="Top" Width="494" FontWeight="Normal" IsReadOnly="True" FontSize="14" TabIndex="211" /> 
```

代码： ...

```
 DataTable datTblFalhas = new DataTable();
        datTblFalhas.Columns.Add("Alarme",
                                 typeof(string)
                                );
        datTblFalhas.Columns.Add("Momento",
                                 typeof(string)
                                );

        DataRow datRowAlarme = datTblFalhas.NewRow();
        datRowAlarme[0] = "a";
        datRowAlarme[1] = "b";
        datTblFalhas.Rows.Add(datRowAlarme);

        datGrdFalhas.DataContext = datTblFalhas; 
```

...

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:18:06.943

```
<UserControl x:Class="ProMaqWPFLib.UsrCtrGestaoProducao" Name="usrCtrGestao"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
         xmlns:comCtrls="clr-namespace:ComControlsLib;assembly=ComControlsLib"
         mc:Ignorable="d" 
         d:DesignHeight="388" d:DesignWidth="1339" Loaded="usrCtrGestao_Loaded">
<UserControl.Resources>
    <Visibility x:Key="VisibilidadeSerieEntradaDispParada"/>
    <Visibility x:Key="VisibilidadeSerieSaidaEficiencia"/>
    <Visibility x:Key="VisibilidadeSerieRefugoQualidade"/>
    <Visibility x:Key="VisibilidadeSerieOEE"/>
    <Visibility x:Key="VisibilidadeSeriePareto"/>
</UserControl.Resources>
<Grid Height="Auto" Name="grid1" Width="Auto">
     ...
</Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:50:05.853

好吧朋友们，经过太多的测试，我发现了一个非常非常愚蠢的错误：在清理数据网格的方法中（在tabitem show中调用），我输入了命令：

```
 datGrdFalhas.ItemsSource = null; 
```

并不是

```
 datGrdFalhas.DataContext = null; 
```

清理 WPF 中编写的 {Binding} 操作。

现在工作正常。非常感谢您的关注和解答，不便之处敬请谅解。

# image - 在运行时使用外部文件创建 SWC 图像/文件库

> ID：13787525
> 
> 赞同：0
> 
> 时间：2012-12-09T12:54:35.697
> 
> 标签：image, actionscript, swc, pack, assets

我正在开发一个 Flash GUI 项目，其中有许多图像需要在运行时动态加载。

**问题：** 目前，每次类初始化时，它都会从 HDD 加载其资产（图像），但这通常需要很长时间（例如：我有一个包含 100 个项目的列表，每个项目都有相同的背景，这是一个存储在HDD，但它必须从 HDD 加载图像 100 次才能呈现列表，因为项目的类要被初始化 100 次）。另外，我希望对用户隐藏资产，因此我想以某种方式将其打包到一个文件中。

**解决方案：** 我想到了SWC。我听说它是​​一种用于 Flash 的库。但我几乎没有使用 SWC 的经验。并且图像太多，手动导入并将每个图像的类名放入 FLA 库中需要很长时间。但我已经有一个 XML 文件，它存储类名和每个类资产的路径。所以我可以将所有图像加载到一个变量中，但我不知道如何将该变量实际写入 HDD 上的 SWC 文件，以便稍后将其作为库加载。

[MyButton.png] --*加载到 RAM* --> [myButton:Bitmap] --***写入 HDD 上的 SWC 文件***--> [Assets.swc] --*在运行时导入 SWC 文件*--> [addChild(assets.我的按钮）]

粗体字是我缺少的部分。

谢谢你的时间！任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:52:03.950

SWC 是您“预编译”的文件，它与 swf 几乎相同，但实际上没有您“即时创建”的内容。最大的区别是 swc 是“编译成”一个 swf 而不是动态加载的东西。也就是说，您不能在运行时加载 swc 文件，它是在编译时提供的。

所以，添加到 swc 的每张图片都会增加它的大小，好处是它可以在不同的 swf 文件之间共享。

现在，如果我理解错了，请纠正我，但似乎每当使用该图片时，您都会从硬盘驱动器重新加载图片？那么链接到图片“Ball.png”的“Ball”的 100 个实例会加载该文件 100 次？

如果是这样的话，为什么不创建一个 ImageManager 并让它保留一个已加载图像的实例，然后在使用该图像的所有实例之间共享它呢？

AFAIK 没有简单的方法可以做到这一点，但是如果您对缓存加载图像的示例感兴趣，我写了一篇博文（因为我找不到更好的方法来为您提供该解决方案）。

它非常幼稚并且围绕静态 ImageManager 旋转，仅加载图像，通过它们的 url-id 缓存它们，然后如果它们已经加载，则提供位图数据的新实例。然而，它就像一个魅力，它比总是从硬盘驱动器加载图像更有效率。

您可以在此处找到博客文章：http: [//messer1024.blogspot.se/2012/12/caching-loaded-images-in-as3.html](http://messer1024.blogspot.se/2012/12/caching-loaded-images-in-as3.html)

# button - Pin It Button，它可以与 OG 一起使用，就像 Facebook like 或 G+ 一样？

> ID：13787527
> 
> 赞同：0
> 
> 时间：2012-12-09T12:54:50.307
> 
> 标签：button, plugins, pinterest

有没有办法让 Pin It 按钮与 OG 一起使用

```
<a href="http://pinterest.com/pin/create/button/?url=["pull from OG"]&media=["Pull from OG"]&description=["Pull from OG"]" class="pin-it-button" count-layout="vertical"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>
<script type="text/javascript">
(function (w, d, load) {
 var script,
 first = d.getElementsByTagName('SCRIPT')[0],  
 n = load.length,
 i = 0,
 go = function () {
   for (i = 0; i < n; i = i + 1) {
     script = d.createElement('SCRIPT');
     script.type = 'text/javascript';
     script.async = true;
     script.src = load[i];
     first.parentNode.insertBefore(script, first);
   }
 }
 if (w.attachEvent) {
   w.attachEvent('onload', go);
 } else {
   w.addEventListener('load', go, false);
 }
}(window, document,
 ['//assets.pinterest.com/js/pinit.js']
));    
</script> 
```

Just wonder if this is something that someone has already figured out or not? Would be nice if this could work that way, will make life simple.

Thanks in advance for any help you can offer!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:03:59.327

这是我为使其工作所做的工作，但不确定这是否是最好的方法，因为它需要使用 php echo 来回显开放图形元内容的内容。

```
<meta property="og:title" content="Family Budget Spreadsheet for Excel"> 
<meta property="og:type" content="product"> 
<meta property="og:url" content="<?php $og_url = $_SERVER['HTTP_HOST'].$_SERVER['SCRIPT_NAME']; echo $og_url ?>"> 
<meta property="og:image" content="<?php $og_image = 'http://www.mysite.com/images/imageIneed.jpg' ; echo $og_image ?>">
<meta property="og:site_name" content="My Sites Name"> 
<meta property="og:description" content="<?php $og_description = 'My page description'; echo $og_description ?>"> 
```

然后添加了以下取自 Pinterest 的代码

```
<a href="http://pinterest.com/pin/create/button/?url=<?php echo $og_url ?>&media=<?php echo $og_image ?>&description=<?php echo $og_description ?>" class="pin-it-button" count-layout="vertical"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>
<script type="text/javascript">
(function (w, d, load) {
 var script,
 first = d.getElementsByTagName('SCRIPT')[0],  
 n = load.length,
 i = 0,
 go = function () {
   for (i = 0; i < n; i = i + 1) {
     script = d.createElement('SCRIPT');
     script.type = 'text/javascript';
     script.async = true;
     script.src = load[i];
     first.parentNode.insertBefore(script, first);
   }
 }
 if (w.attachEvent) {
   w.attachEvent('onload', go);
 } else {
   w.addEventListener('load', go, false);
 }
}(window, document,
 ['//assets.pinterest.com/js/pinit.js']
));    
</script> 
```

它工作得很好，但我相信有更好的方法可以做到这一点，所以如果你有一个，请在这里分享。

# php - php 中超过 53 位的浮点精度？

> ID：13787528
> 
> 赞同：0
> 
> 时间：2012-12-09T12:55:01.837
> 
> 标签：php, floating-point, precision, mandelbrot

> **可能重复：**
> [如何在 PHP 中使用高精度小数](https://stackoverflow.com/questions/8485932/how-do-i-work-with-high-precision-decimals-in-php)

对于 mandelbrot 分形，我需要更多的浮点精度，而不是 php 中的 53 位。这可能吗？我读过这篇关于 php 浮点的帖子，但很难理解：[http ://www.mysqlperformanceblog.com/2008/01/10/php-vs-bigint-vs-float-conversion-caveat/](http://www.mysqlperformanceblog.com/2008/01/10/php-vs-bigint-vs-float-conversion-caveat/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:03:16.703

如果您正在查看浮点数，我认为您可能仅限于 PHP 的本机双精度（53 位精度）浮点数或[BC Math 的东西](http://php.net/manual/en/ref.bc.php)（任意精度）。

他们也有一个[GMP 扩展](http://php.net/manual/en/book.gmp.php)，但是在内存不足的情况下，我的 GMP 东西在我身上猛烈地死去，这在通用库中是不可原谅的。尽管如此，如果你避免这些情况，它*会非常*快。PHP 包目前似乎只支持 GMP 的整数方面，因此您必须使用缩放整数（即定点）来获得非整数功能。这可能比它的价值更麻烦。

# android - 在画廊中滚动子视图

> ID：13787533
> 
> 赞同：0
> 
> 时间：2012-12-09T12:55:41.757
> 
> 标签：android, scroll, gallery, ontouchlistener

我画廊中的每个项目都是一个自定义视图。孩子的视图之一是gridView。当我滚动画廊时，一切正常，但它不会通过触摸 gridView 滚动。很难解释，希望有人能理解我！触摸和滚动自定义视图的任何部分是否会触发滚动？或者也许只有 imageView 会触发滚动？

```
public View getView(int position, View convertView, ViewGroup parent) {

    final SubProduct subProduct=subProducts.get(position);
    int quantity=subProduct.getQuantity();
    int size=subProduct.getSizes().get(0).getWidth();
    String productName=subProduct.getProductName();
    int productPrice=subProduct.getSizes().get(0).getPrice();
    int columnWidth = 0;

    View view=convertView;

    if (view==null){

        holder=new SubProductHolder();

        //The main container
        holder.myLinearLayout= new LinearLayout(this.myContext);
        holder.myLinearLayout.setOrientation(1);//vertical

        //The custome button
        LayoutInflater inflater =  (LayoutInflater)
                myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v=(View)inflater.inflate(R.layout.custom_sub_product_layout, null);
        LinearLayout btnLayout = (LinearLayout)v.findViewById(R.id.customSunProductButtonLayout);
        LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(PRODUCT_BOTTUN_WIDTH,PRODUCT_BOTTUN_HEIGHT);
        btnLayout.setLayoutParams(llp);
        tvSubProductDescription=(TextView)v.findViewById(R.id.tvSubProductDescription);
        tvSubProductPrice=(TextView) v.findViewById(R.id.tvSubProductPrice);

        holder.btnProduct=btnLayout;
        holder.btnProduct.setGravity(Gravity.CENTER);
        holder.TvLinearLayout= new LinearLayout(this.myContext);
        holder.TvLinearLayout.addView(holder.btnProduct);

        //frame                 
        holder.image = new ImageView(this.myContext);
            holder.image.setBackgroundColor(Color.WHITE);
        LinearLayout.LayoutParams llp2 = new LinearLayout.LayoutParams(FRAME_WIDTH,FRAME_WIDTH);
        holder.image.setLayoutParams(llp2);

        //grid
        holder.grid=new GridView(myContext);
        //the number of rows is the round number of quantity sqaure
        int numberOfColomns=(int) Math.floor((int) Math.sqrt(quantity));
        holder.grid.setNumColumns(numberOfColomns);
        holder.grid.setLayoutParams(new RelativeLayout.LayoutParams(PRODUCT_PICTURE_WIDTH,PRODUCT_PICTURE_WIDTH));

    }else{
        holder=(SubProductHolder)view.getTag();
    }

    //set text in description tv
    tvSubProductDescription.setText(quantity+" "+productName+" "+size+"X"+size);
    tvSubProductPrice.setText("$"+productPrice);

    //set the grid 
    holder.grid.setAdapter(new emptySquaresAdapter(quantity,myContext,columnWidth,columnHeight));
    holder.relativeGridLayout=new RelativeLayout(myContext);
    holder.relativeGridLayout.addView(holder.image);

     holder.relativeGridLayout.addView(holder.grid);

    //set button and picture to layout
    holder.myLinearLayout.addView(holder.relativeGridLayout);
    holder.myLinearLayout.addView(holder.TvLinearLayout);

    return holder.myLinearLayout;
}

static class SubProductHolder
{
    ImageView image;
    GridView grid;
    RelativeLayout relativeGridLayout;

    LinearLayout btnProduct;
    LinearLayout TvLinearLayout;

    LinearLayout myLinearLayout;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:01:58.307

您必须为galleryView 使用TouchListeners，因为单击其子视图不会触发galleryView 的滚动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T14:45:49.633

你必须使用 TouchListeners。此外，您最好使用 ViewPager 并使用片段。据我所知，Gallery 已被弃用。

# javascript - 在 Chrome 扩展中将文本复制到剪贴板

> ID：13787540
> 
> 赞同：6
> 
> 时间：2012-12-09T12:57:01.757
> 
> 标签：javascript, jquery, google-chrome, clipboard, add-on

我正在编写一个 Google Chrome 扩展程序，我想在内容脚本的剪贴板中复制一些文本。我尝试选择它，然后`document.execCommand('copy')`- 它不起作用。我不想要 Flash，因为它不是简单而优雅的方式来实现它。我尝试了背景页面和 <input> - 它不起作用。

是否有任何**有效**、优雅和简单的方法可以将文本复制到 Chrome 扩展中的剪贴板？它也可以使用 jQuery。

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T20:39:41.037

这是一些复制/粘贴的工作（Coffeescript）代码：[https ://github.com/philc/vimium/blob/master/lib/clipboard.coffee](https://github.com/philc/vimium/blob/master/lib/clipboard.coffee)

注意上面的代码是在后台页面运行的；前段时间有一个错误，它破坏`execCommand`了内容脚本，我不确定它是否已经修复。

# c# - PSI 项目发布需要很长时间

> ID：13787545
> 
> 赞同：0
> 
> 时间：2012-12-09T12:58:22.667
> 
> 标签：c#, psi

我开发了一个新的 Webpart 用于更新 Project Server 2010 项目自定义字段，当我的代码更新和发布项目时，它需要 3-4 分钟在 PS 作业队列中并且项目在此期间没有出现在项目中心并且系统变成太慢了，但是没有错误，并且自定义字段更新成功。 **有什么办法可以避免这种延迟？**

注意：我有两个服务器前端和数据库服务器。

```
**`Guid sessionUid = Guid.NewGuid();
Guid jobUid = Guid.NewGuid();                   
PSProject.CheckOutProject(projectId, sessionUid, "Updating Custom Fields");
jobUid = Guid.NewGuid();                                                      
PSProject.QueueUpdateProject(jobUid, sessionUid, PSProjectDataset, false);
jobUid = Guid.NewGuid();                                 
PSProject.QueueCheckInProject(jobUid, projectId, false, sessionUid, "Updating CF");                                
PSProject.QueuePublish(jobUid, projectId, true, null);`** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:41:38.850

它运行缓慢的原因有很多。例如，数据库服务器很慢 - 发布本身包括将数据从草稿数据库复制到已发布，项目计划非常大 - 项目越大，发布时间越长，有一些事件处理程序会停止事件队列一段时间。

以下是我可以建议您解决发布问题的方法：

*   [使用ULS Viewer](http://archive.msdn.microsoft.com/ULSViewer)检查 Sharepoint 日志。它将为您提供发布阶段的所有时间 - 大约有 100 次操作
*   检查参与项目工作的所有服务器的性能：前端服务器和数据库服务器之一：磁盘、CPU、网络

当然，微软建议安装所有最新的更新和修补程序。

# python - 内存消耗和临时对象的生命周期

> ID：13787549
> 
> 赞同：1
> 
> 时间：2012-12-09T12:58:46.813
> 
> 标签：python

我有一个 python 代码，其中内存消耗随着时间的推移而稳步增长。虽然有几个对象可以合法地增长得相当大，但我试图了解我观察到的内存占用是否是由于这些对象造成的，还是只是我在内存中乱扔了没有得到正确处理的临时对象--- 作为最近从手动内存管理世界转变过来的人，我想我只是不完全了解 python 运行时如何处理临时对象的一些非常基本的方面。

考虑一个大致具有这种一般结构的代码（我省略了不相关的细节）：

```
def tweak_list(lst):
    new_lst = copy.deepcopy(lst)
    if numpy.random.rand() > 0.5:
        new_lst[0] += 1  # in real code, the operation is a little more sensible :-)
        return new_lst
    else:
        return lst

lst = [1, 2, 3]
cache = {}

# main loop
for step in xrange(some_large_number):

    lst = tweak_list(lst)    # <<-----(1)

    # do something with lst here, cut out for clarity

    cache[tuple(lst)] = 42   # <<-----(2)

    if step%chunk_size == 0:
        # dump the cache dict to a DB, free the memory (?)
        cache = {}           # <<-----(3) 
```

问题：

1.  `new_list`在 a 中创建的 a的生命周期是`tweak_list`多少？它会在退出时被销毁，还是会被垃圾收集（此时？）。是否会反复调用`tweak_list`生成大量的小列表而长时间徘徊？
2.  `list`将 a 转换为 a`tuple`以用作`dict`密钥时是否有临时创建？
3.  将a设置`dict`为空会释放内存吗？
4.  或者，我是从一个完全错误的角度来处理手头的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:18:19.480

1.  `new_lst`当函数存在时被清理而不返回。它的引用计数下降到 0，它可以被垃圾收集。在立即发生的当前 cpython 实现上。

    如果返回，*则*`new_lst`替换引用的值`lst`；引用的列表`lst`看到它的引用计数减少了 1，但最初引用的值`new_lst`仍然被另一个变量引用。

2.  `tuple()`键是存储在 中的值，`dict`因此这不是临时的。除了该元组之外，不会创建任何额外的对象。

3.  用新的 dict替换旧的`cache`dict 会将引用计数减少一。如果`cache`是对 dict 的唯一引用，它将被垃圾收集。然后，这会导致所有包含的元组键的引用计数减少 1。如果没有其他对这些的引用，这些引用将被垃圾收集。

4.  请注意，当 Python 释放内存时，这并不一定意味着操作系统会立即回收它。大多数操作系统只会在其他需要时回收内存，而不是假定程序可能很快会再次需要部分或全部内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:10:36.103

您可能希望将[Heapy](http://guppy-pe.sourceforge.net/#Heapy)视为一种分析内存使用情况的方法。我认为[PySizer](http://pysizer.8325.org/)在某些情况下也用于此目的，但我不熟悉它。[ObjGraph](http://mg.pov.lt/objgraph/)也是一个强大的工具来看看。

# javascript - Javascript 和 MongoDB - 写入文件

> ID：13787552
> 
> 赞同：1
> 
> 时间：2012-12-09T12:59:02.483
> 
> 标签：javascript, mongodb, benchmarking, writetofile

我在 ubuntu 服务器上使用 mongoDB。但是我使用 javascript 来存储数据并做一些 map/reduce。我想测量这些操作并将结果写入文件。不知何故，我无法打开文件并写入文件。我尝试了以下方法：

```
f = new File("myfile.txt");
if(f.open("w") == true)
{   
    f.write("test");
 f.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:04:52.550

简单的答案：您不能使用 Javascript 编写文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:05:34.123

最好使用 println 写入控制台并将输出重定向到文件，将 javascript 文件作为参数传递给 mongo。

```
mongo someprocess.js > outpout 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:21:12.803

spidermonkey 中的`file`对象（MongoDB 使用的 JS 引擎，巧合的是控制台）已过时：[https](https://developer.mozilla.org/en-US/docs/SpiderMonkey/File_object) ://developer.mozilla.org/en-US/docs/SpiderMonkey/File_object 。不仅如此，而且它不是蜘蛛猴的标准，所以这是一个很长的镜头。

正如@gkamal 所说，最好的方法是像这样通过管道输出 MongoDB 控制台的输出：

```
mongo someprocess.js > outpout 
```

# x11 - 检测 X11 窗口是否有装饰

> ID：13787553
> 
> 赞同：2
> 
> 时间：2012-12-09T12:59:10.387
> 
> 标签：x11, motif

此 C 函数可用于禁用或启用许多窗口管理器中的窗口装饰。如果 'mode' 是 'd' 窗口将隐藏装饰，否则如果 'mode' 是 'D' 窗口将显示它们。

```
void window_tune_decorations(Display *disp, Window win, char mode) {
    long hints[5] = { 2, 0, 0, 0, 0};
    Atom motif_hints = XInternAtom(disp, "_MOTIF_WM_HINTS", False);

    switch (mode) {
        case 'D':
            hints[2] = 1;
            /* fall through */
        case 'd':
            XChangeProperty(disp, win, motif_hints, motif_hints, 32, PropModeReplace, (unsigned char *)hints, 5);
            break;
        default:
            fputs("Invalid mode.\n", stderr);
    }
} 
```

我想实现一个“切换模式”。所以我的问题是，有没有办法检测窗户是否有装饰品？我尝试将 XGetWindowProperty 与 _MOTIF_WM_HINTS 一起使用，但我不确定如何解释输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T15:49:17.163

您以与`XGetWindowProperty`解释发送到的数据相同的方式解释获得的数据`XChangeProperty`。

如果`_MOTIF_WM_HINTS`它是一个 5 s 的数组`long`，或者可能是`struct MwmHints`(syn. `MotifWmHints`)。它是 5 个`long`字段的结构，外加几个`#define`d 位标志。它继承自 Motif 窗口管理器，但现在我们通常不保留 Motif 包含和库，因此该结构被复制到各个地方（不好的做法，但每个人都在这样做）。`xprops.h`您可以在Gnome 和其他几个地方找到它的定义。在 'net 上查找并复制到您的代码中，或者在您已经依赖的包含文件中找到它，或者只是查看定义并继续使用 5 `long`s 的数组，您可以选择。

您需要检查正确字段中的正确标志。对于装饰，首先检查窗口是否覆盖重定向。如果是，它是未装饰的（显然），你不能添加任何装饰。如果窗口管理器没有运行，它也没有装饰，在这种情况下你也不能添加任何装饰。

否则，如果窗口根本没有属性（`XGetWindowProperty`设置`type`为`None`），您可能会认为它已被装饰。

如果它确实具有该属性，并且`MWM_HINTS_DECORATIONS`在 中设置了位`flags`，那么它完全具有位值在`decorations`字段中指定的修饰。`MWM_DECOR_*`如果该字段不为零，则存在*一些*装饰。AFAIK 如果`MWM_HINTS_DECORATIONS`未设置，则窗口（令人惊讶地）被装饰。但是请您自己测试一下，我不记得了，目前没有X11机器，所以无法检查。

自然，一些窗口管理器不使用`_MOTIF_WM_HINTS`（例如，在 Motif 之前出现的那些）。如果您有其中之一，则无法使用此方法检查或设置装饰。

别忘了`XFree(hints)`。

# php - 未定义变量错误

> ID：13787557
> 
> 赞同：1
> 
> 时间：2012-12-09T12:59:42.710
> 
> 标签：php

嗨，我是 Denis，我是 php 新手。我父亲是一名 PHP 开发人员，但我想自己做这件事。我现在11岁了！！！:)

我为我的 php 东西做了一个安装程序，我收到了这个错误：

```
Notice: Undefined variable: config in \path\to\core.php on line 20 
```

这是失败的部分：

```
$system['home_url'] = "".$config['home']['url'].""; 
```

但是如果我之前包含了配置文件并且这个变量不是未定义的，它怎么会失败！

我做了：`require('config.php');`

config.php 文件代码为：

```
$config['home']['url'] = "http://localhost/"; 
```

我使用的变量对吗？我搜索了所有的互联网，我只找到了使用的解决方案，`global`但我真的不知道它是如何工作的..

再见！！！谢谢:)))

编辑——Core.PHP

```
<?PHP
/*=======================================================================
| #######################################################################
| This program is free software: you can redistribute it and/or modify
| it under the terms of the GNU General Public License as published by
| the Free Software Foundation, either version 3 of the License, or
| (at your option) any later version.
| #######################################################################
| This program is distributed in the hope that it will be useful,
| but WITHOUT ANY WARRANTY; without even the implied warranty of
| MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
| GNU General Public License for more details.
\======================================================================*/
require('config.php');

$system['home_url'] = "".$config['home']['url']."";
$system['updates_enabled'] = "".$config['updates']['enabled'].""; 
$system['update_url'] = "".$config['update']['url']."";
$system['language'] = $config['language'];
$system['favicon'] = "".$config['favicon'].""; 
$system['maintenance_status'] = "".$config['maintenance']['status'].""; 
$system['version'] = "".$config['version'].""; 
$system['master_user'] = "".$config['master']['user']."";
$system['master_password'] = "".$config['master']['password']."";
$system['config_path'] = "config.php";

/*====================================================================*/

$site['name'] = "".$config['site']['name']."";
$site['desc'] = "".$config['site']['desc'].""; 

/*====================================================================*/

$cloud_panel['reload_time'] = "".$config['reload']['time']."";

/*====================================================================*/

require "".$system['home_url']."lang/lang_".$system['language'].".php";

/*====================================================================*/

$template['id'] = "".$config['template']['id']."";
$template['webgallery_type'] = "".$config['webgallery']['type']."";
$template['webgallery_url'] = "".$config['webgallery']['url'].""; 

/*====================================================================*/

if(isset($_GET['help'])) { header('Location: '.$system['home_url'].'help.php'); }

/*====================================================================*/

if ($template['webgallery_type'] == 1) { $template['my_webgallery'] = "".$system['home_url']."cdn/web-gallery"; } else { $template['my_webgallery'] = $template['webgallery_url']; }

/*====================================================================*/

?> 
```

配置.PHP

```
<?PHP
/*=======================================================================
| #######################################################################
| This program is free software: you can redistribute it and/or modify
| it under the terms of the GNU General Public License as published by
| the Free Software Foundation, either version 3 of the License, or
| (at your option) any later version.
| #######################################################################
| This program is distributed in the hope that it will be useful,
| but WITHOUT ANY WARRANTY; without even the implied warranty of
| MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
| GNU General Public License for more details.
\======================================================================*/

$config['site']['name'] = "heya";
$config['site']['desc'] = "heya";
$config['home']['url'] = "http://localhost/";
$config['updates']['enabled'] = "1";
$config['update']['url'] = "http://localhost/update";
$config['language'] = "es";
$config['favicon'] = "favicon.ico";
$config['maintenance']['status'] = "1";
$config['reload']['time'] = "10";
$config['version'] = "1.3.4";
$config['master']['user'] = "heya";
$config['master']['password'] = "heya";
$config['template']['id'] = "9";
$config['webgallery']['type'] = "1";
$config['webgallery']['url'] = "heya";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:01:54.193

使用前检查变量，`isset($config['home']['url'])`您也可以使用`!empty($config['home']['url'])`

# java - 组件的奇怪问题

> ID：13787558
> 
> 赞同：1
> 
> 时间：2012-12-09T12:59:44.623
> 
> 标签：java, swing, jpanel

我正在我的 Java 类上开发一个应用程序，但遇到了一个奇怪的问题。我需要在网格中表示数据，因此使用*GridLayout*是一个明显的选择，但这里有一个问题。**我继续得到几乎空的框架**（注意左上角的小白色矩形）。

![问题](../Images/6f9d91fa4d52fc66961a0029cf97331f.png)

这是产生此结果的代码片段

```
//not important class code 
public static void main(String args[]) {    
    JFrame frame = new JFrame("Wolves & Rabbits");
    frame.setSize(640, 480);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //want to create a 12x9 grid with 2 black and 4 pink rectangles
    Board board = new Board(12, 9, 2, 4, 1000);

    frame.add(board);

    frame.setResizable(false);
    frame.setVisible(true);
}

//Board.java (Board class) extends JPanel
public JPanel fields[][];
private Integer boardWidth, boardHeight;
private ArrayList<AnimalThread> animals;
private Integer wolvesCount, rabbitsCount;

public Board(int w, int h) {
    super(new GridLayout(h, w, 4, 4));

    fields = new JPanel[w][h];
    boardWidth = new Integer(w);
    boardHeight = new Integer(h);
    animals = null;
    wolvesCount = new Integer(0);
    rabbitsCount = new Integer(0);

    //creating white rectangles
    for (int i = 0; i < boardHeight; i++)
        for (int j = 0; j < boardWidth; j++) {
            fields[j][i] = new JPanel(true);
            fields[j][i].setBackground(AnimalThread.NONE);
            this.add(fields[j][i]);
        }

    AnimalThread.setLinkToBoard(this);
}

public Board(int w, int h, int wolves, int rabbits, int k) {
    this(w, h);

    animals = new ArrayList<AnimalThread>();

    while (boardWidth*boardHeight < 2*wolves*rabbits) {
        wolves--;
        rabbits--;
    }       
    wolvesCount = wolves;
    rabbitsCount = rabbits;

    WolfThread.setRabbitsCount(rabbitsCount);

    //randomly place colored rectangles
    this.randomize(wolves, rabbits, k);     
} 
```

奇怪的是，根本没有改变 Board 类，只对 main 方法做了一点改变，我就能够显示正确的网格。

![问题解决了](../Images/24a119739fb7b87c20d35b7dc36f6361.png)

在这种情况下，主要方法是

```
//not important class code
public static void main(String args[]) {    
    JFrame frame = new JFrame("Wolves & Rabbits");
    frame.setSize(640, 480);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    Board board = new Board(12, 9, 2, 4, 1000);

    //THE CHANGE!
    JPanel panel = new JPanel(new GridLayout(12, 9, 4, 4));
    for (int i = 0; i < 9; i++)
        for (int j = 0; j < 12; j++) {
            JPanel tmp = board.fields[j][i];
            panel.add(tmp);
        }
    frame.add(panel);

    frame.setResizable(false);
    frame.setVisible(true);
} 
```

任何人都知道是什么导致了这个恼人的问题？任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:19:14.623

当您使用 Swing 时，您**必须**在 EDT 上执行 Swing UI 代码。所以至少你的主要方法应该是这样的：

```
public static void main(String args[]) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame frame = new JFrame("Wolves & Rabbits");
            frame.setSize(640, 480);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            // want to create a 12x9 grid with 2 black and 4 pink rectangles
            Board board = new Board(12, 9, 2, 4, 1000);

            frame.add(board);

            frame.setResizable(false);
            frame.setVisible(true);
        }
    });
} 
```

从其他线程访问作为 Swing 对象的变量，然后 EDT 将导致问题。其中许多问题将是间歇性的并且难以追踪（就像大多数并发问题一样）。

“AnimalThread”对象的名称似乎暗示它是一个线程。你不能（实际上你可以像你演示的那样:-) 直接摆动在 EDT 上“活动”的对象。如果另一个线程想要更​​改 EDT 上的某些内容，则需要使用“SwingUtilities.invokeLater”或“SwingUtilities.invokeAndWait”方法。

# sencha-touch - 在 mac book 上安装 sencha touch 2 时遇到一些问题

> ID：13787563
> 
> 赞同：0
> 
> 时间：2012-12-09T13:00:39.273
> 
> 标签：sencha-touch, sencha-touch-2

[我从这个链接](http://www.sencha.com/products/touch/download/sencha-touch-2.1/) 下载了 Sencha touch `Download for 2.1 GPL`。然后我解压到 XAMPP/htdocs 文件夹。[然后我从这个链接](http://www.sencha.com/products/sdk-tools/download)下载了 Senchatouch sdk 工具。我将它安装在 /Applications 文件夹中。然后在`Terminal`我`cd`来`Applications/SenchaSDKTools-2.0.0-beta3`。在这里我运行`sencha`命令。但它在屏幕截图中显示以下输出

![在此处输入图像描述](../Images/b75805df15ee75478c052ff3193b3761.png)

我还检查了显示以下输出的 PATH

![在此处输入图像描述](../Images/d60e3d03b780185b3251072b8c5839e7.png)

我在整个互联网上搜索以找到它的解决方案，但没有一个对我有用。

我还关注了以下链接

[链接 1](https://stackoverflow.com/questions/10508857/sencha-touch-2-cannot-find-module-sencha-sdk-dir-command-sencha-js) [链接 2](https://stackoverflow.com/questions/13291742/warn-the-current-working-directory-c-xampp-htdocs-sencha-folder-is-not-a-re)

请帮助我如何解决？

**更新**

在关注@TDeBailleul 之后，我遇到了同样的错误。

![在此处输入图像描述](../Images/52f869100a2fb18615cb71d536682664.png)

我首先安装了 JRE，然后是 compass，然后是 senchaCmd。我在文件夹中安装了 senchaCmd `/Applications/XAMPP/htdocs/sencha/`。[然后我从这个链接](http://www.sencha.com/products/touch/download/sencha-touch-2.1/)下载 Sencha Touch SDK 。然后我`cd`发出命令`Applications/XAMPP/htdocs/senchatouch/Sencha/Cmd/3.0.0.250/`，`sencha`但再次得到上述输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:50:26.490

您需要在Sencha Touch 2.1中使用**Sencha Command**而不是**Sencha SDK Tools**

看看我在这里的回答：

[生成一个煎茶触摸应用](https://stackoverflow.com/questions/13497247/generate-a-sencha-touch-app/13500700#13500700)

跳这有帮助

# javascript - 如何在 JavaScript 中创建一个简单的历史跟踪器？

> ID：13787564
> 
> 赞同：1
> 
> 时间：2012-12-09T13:00:58.603
> 
> 标签：javascript

寻找一种方法来跟踪 JavaScript 中的点击。我在单独的 div 包装器中有一系列 javascript 控制的边。我需要一个计数器来记录上一张被点击的幻灯片编号。这将用于在新 div 加载时淡出以前的 div。HTML 页面不会重新加载，所以我认为我不能使用浏览器历史记录功能作为选项。我真的只需要知道上一张幻灯片编号，因为幻灯片编号可以按顺序点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:20:11.447

最好的选择是使用[History.js](https://github.com/balupton/History.js/)，但这有点矫枉过正。好处是它是语义的，并且会在浏览器重新加载时保持状态。后退按钮也转到上一个选项卡。

其他解决方案取决于您的设置和可用的库（jQuery 等）。如果您使用标准插件来做某事，它们通常会在状态更改时进行回调。检查 API。

基本算法是对每个按钮应用一个点击处理程序。您可以存储包含当前状态的全局变量。`.slideButtons`为绝对按钮（page1、page2、page3 等）提供一个类，并有选择地为下一个和上一个按钮提供一个 id`#nextSlide`和一个 id。`#prevSlide`在处理程序中，检查类和 id。如果是nextSlide，或者prevSlide，加一，或者减一，然后更新。如果它是绝对类之一，则在父节点中搜索并计算匹配的类，直到找到您要查找的类。当你到达你按下的按钮时你的计数器的数字是新的状态。设置它，然后更新滑块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:10:19.987

您可以创建一个变量并在每次单击新幻灯片时对其进行更新，但我认为将所有幻灯片淡出然后淡入单击的幻灯片会更容易。

这样您就不需要知道当前显示的是哪张幻灯片。

莱昂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:17:28.010

如果您希望用户永远不会重新加载页面，那么是什么让您无法简单地使用常规 JavaScript 变量？

```
var currentSlideIndex = 0;
function nextSlide() {
  currentSlide = currentSlide + 1;
  if (currentSlide >= slideCount) {
    currentSlide = 0;
  }
} 
```

您会发现许多类似的 HTML5-slide 包，在浏览器的文档片段标识符中跟踪当前幻灯片。当您这样做时，幻灯片可以在 F5 中保留，并且用户可以通过复制/粘贴地址来发送指向当前幻灯片的链接。

# python - 为什么需要设置WORKON_HOME环境变量？

> ID：13787566
> 
> 赞同：12
> 
> 时间：2012-12-09T13:01:11.287
> 
> 标签：python, virtualenv

我有一段时间没有使用我的 python/虚拟环境了，但我也安装了虚拟环境包装器。

我的问题是，在文档页面中它说要这样做：

```
export WORKON_HOME=~/Envs
$ mkdir -p $WORKON_HOME
$ source /usr/local/bin/virtualenvwrapper.sh
$ mkvirtualenv env1 
```

我只是在提示下这样做了：

```
source /usr/local/bin/virutalenvwrapper.sh 
```

现在我可以通过以下方式列出和选择环境：

```
>workon

>workon envtest1 
```

我的问题是，既然这对我有用，我很困惑为什么我应该创建一个环境变量 WORKON_HOME 并将其指向 ~/Envs 文件夹？那有什么作用，我的工作如何在没有它的情况下正常工作？我也没有那个 /Envs 文件夹（我知道脚本会创建它）。

参考：http: [//virtualenvwrapper.readthedocs.org/en/latest/](http://virtualenvwrapper.readthedocs.org/en/latest/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T13:38:33.703

如果`WORKON_HOME`未设置，您的默认 virtualenv 文件夹将设置为`~/.virtualenvs`
（请参阅[virtualenvwrapper.sh l.118](https://bitbucket.org/dhellmann/virtualenvwrapper/src/a766226010beb5df341bcb4bceb2befaba8603d4/virtualenvwrapper.sh?at=default#cl-118)）

您还将使用`WORKON_HOME`指定要`pip`使用的文件夹 ( `export PIP_VIRTUALENV_BASE=$WORKON_HOME`)

来源：[virtualenvwrapper.readthedocs.org：绑定到 pip 的 virtualenv 支持](http://virtualenvwrapper.readthedocs.org/en/latest/tips.html#tying-to-pip-s-virtualenv-support)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-25T17:49:58.743

> 我很困惑为什么我应该创建一个环境变量 WORKON_HOME 并将其指向 ~/Envs 文件夹？

这是可选的。您很困惑（就像我一样），因为文档令人困惑。

> 那有什么作用，我的工作如何在没有它的情况下正常工作？

它告诉`virtualenvwrapper`要搜索 Python 环境的文件夹。该命令`workon`搜索路径`WORKON_HOME`是否已定义或未定义，`~/.virtualenvs`这就是它默认工作的原因。

定义不同`WORKON_HOME`目录的一个用例是，如果您希望使用不同的环境`virtualenvwrapper`。例如，如果您将虚拟环境备份保存到不同的文件夹或有多个用户想要维护自己的环境。

# sql-server - 在架构内创建多个视图 - SQL Server

> ID：13787567
> 
> 赞同：3
> 
> 时间：2012-12-09T13:01:14.223
> 
> 标签：sql-server, tsql, view, sql-server-2008-r2

如何在`CREATE SCHEMA`语句中创建多个视图？

我想`SCHEMA`在同一个语句中创建一个 , 并在其中创建两个视图，所以所有这些语句都作为一个单元工作？一起成功或失败！

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/ms189462.aspx](http://msdn.microsoft.com/en-us/library/ms189462.aspx)

> “CREATE SCHEMA 可以在单个语句中创建模式、表和视图，以及对任何安全对象的 GRANT、REVOKE 或 DENY 权限。CREATE SCHEMA 事务是原子的。如果在执行 CREATE SCHEMA 语句期间发生任何错误，没有创建任何指定的安全对象，也没有授予任何权限。”

,

我怎样才能做到这一点？我试过这个：

```
CREATE SCHEMA [MYSCHEMA] AUTHORIZATION [dbo]
    CREATE VIEW [VIEW1]
    AS 
        SELECT [ID]
               ,[NAME]
                FROM [dbo].[TABLE1]
        /* Here is the Problem */
        GO

        CREATE VIEW [VIEW2]
        AS
        SELECT [ID]
               ,[NAME]
                FROM [dbo].[TABLE2]
        GO 
```

如果我`GO`在第一个视图创建之后包含一个语句，那么脚本会运行，但第二个视图`VIEW2`是在`dbo`模式下创建的，而不是在 下`MYSCHEMA`，并且也不会作为一个单元运行。

如果我在第一个视图之后删除`GO`，那么它会给出一个错误说

> *CREATE VIEW 必须是批处理的第一条语句*

对于第二个`CREATE VIEW`声明。

我该如何解决这个问题并创建两个视图作为`CREATE SCHEMA`语句的一部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:11:20.807

```
CREATE SCHEMA [MYSCHEMA] AUTHORIZATION [dbo]

CREATE VIEW [VIEW1] AS SELECT [ID], [NAME] FROM [dbo].[TABLE1]
CREATE VIEW [VIEW2] AS SELECT [ID], [NAME] FROM [dbo].[TABLE2]
GO 
```

# stored-procedures - 我听说我们可以使用存储过程验证来自源的传入数据。可以用更广泛的方式解释这一点吗？

> ID：13787571
> 
> 赞同：1
> 
> 时间：2012-12-09T13:01:24.923
> 
> 标签：stored-procedures

如何使用存储过程实时验证传入数据？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:27:49.860

你可以，但我认为这是一个坏主意。业务逻辑不属于数据库。它属于服务代码（应用程序的中间层）。数据库的作用是检索和保存数据，而不是验证它。至少在应用业务规则的意义上不是。

现在，您可以在检查约束和外键验证的意义上在数据库中进行“验证”，但这不会在存储过程中完成。这是大多数现代数据库系统内置的原生支持。

所以，在我看来，忘记在存储过程中进行数据验证。正如我所说，验证不属于那里，而且它会比使用 C++、C# 等将逻辑放在中间层慢得多。

# android - 尝试发送到 JSON 时，应用程序在 HttpGet(url) 上崩溃

> ID：13787574
> 
> 赞同：0
> 
> 时间：2012-12-09T13:01:40.083
> 
> 标签：android, json, web-services, http-get

我的应用程序多年来一直使用相同的代码，它向我的 JSON Web 服务站点发送电子邮件地址和密码，然后检索给定的信息。我现在正在尝试发送一些额外的信息以进行更新，但是当我添加两个额外的值时，应用程序崩溃了。

```
private void doTfr() {
  String result = "";
  String mailAddr = " ";
  String feedback = " ";
  String lectName = MyLecturesActivity.LectName;
  String url = "http://jobtracker.myweb.com/jsonWeb/Default.aspx";

  mailAddr = "s.chase@testweb.com";     
  EditText fBack = (EditText) findViewById(R.id.myfeedback_feedback2);
  feedback = fBack.getText().toString();
  lectName = "Test Android";

  url = url + "?maddr=" + mailAddr + "&pwd=FB&lect=" + "\"lectName\"&fb=\"" + feedback + "\""; 

  //url = url + "?maddr=" + mailAddr + &pwd=BI"; Using this url works!                    
  try {

    HttpClient httpclient = new DefaultHttpClient();

        HttpGet httpget = new HttpGet(url);   ****Crashes here

        HttpResponse response;

        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();

        if (entity != null) {

          InputStream instream = entity.getContent();
          result = convertStreamToString(instream);
          result = result.replaceAll("&quot;", "\"");

          JSONObject json=new JSONObject(result);
          JSONArray nameArray=json.names();
          JSONArray valArray=json.toJSONArray(nameArray);
        endif
          nstream.close();
        }

    } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    } catch (IOException e) {
           // TODO Auto-generated catch block
            e.printStackTrace();
    } catch (JSONException e) {
        }
      }
} 
```

当我使用注释掉的网址时，它可以工作。有人可以告诉我为什么添加两个新值会导致它崩溃，可能是字符串的大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:05:47.210

您需要对该 URL 进行编码以处理引号。

```
String encodedUrl = URLEncoder.encode(url, "UTF-8"); 
```

# android - Android：提高服务中运行的音频性能

> ID：13787578
> 
> 赞同：3
> 
> 时间：2012-12-09T13:01:53.110
> 
> 标签：android, android-asynctask, android-service, android-mediaplayer

我正在开发一个基于 AOSP 音乐播放器项目的安卓音乐播放器。

音频在前台服务中运行，但我发现歌曲偶尔会“跳过”，轨道中会出现小的可听见的“打嗝”。

还有其他方法可以提高音频性能吗？有没有办法提高服务的优先级，或者以其他方式保护音频流？

感谢你的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:30:04.763

自从发布此消息以来，我已经确定大多数问题是由我的手机上的自定义 ROM 引起的。

# git - git 分支 -- 包含问题

> ID：13787580
> 
> 赞同：0
> 
> 时间：2012-12-09T13:02:05.593
> 
> 标签：git, git-branch

在我的远程仓库中，我运行 git log --oneline -2 --all 来查找最后一次提交，我有一个与 SHA1 和 SHA2 提交相关的输入

但我运行 git branch --contains SHA(1/2)，我没有输出。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:40:16.400

`git log -2`显示当前提交（又名 HEAD）及其父级。这些提交可能是分支的一部分，但不是必须的。

在您的情况下，似乎 HEAD 指向未包含在任何分支中的提交。它可能看起来像这样：

```
o-o-o-o master
   `o-o HEAD 
```

您可以使用 进行检查`git branch`，它将列出所有本地分支并指示您所在的分支。在您的情况下，它可能会说“无分支”。（又名分离的头）

您还可以尝试`git branch -r --contains HEAD`检查是否存在包含您的提交的远程分支。

以图形方式找出正在发生的事情的一个好方法也是`gitk`.

PS：您很可能不直接在远程存储库上工作。您通常首先克隆它，从而创建一个本地存储库，然后在该存储库上工作。

# java - 如何在java中扫描对象？

> ID：13787584
> 
> 赞同：-1
> 
> 时间：2012-12-09T13:02:52.507
> 
> 标签：java, object

我正在制作与此链接中完全相同的 Java 程序：

[没有“抽象”的Java中的运行时多态性？](https://stackoverflow.com/questions/12709033/run-time-polymorphism-in-java-without-abstract)

但我在主应用程序中遇到问题。

在我的问题中，我必须要求用户输入他想要的类型（自行车、山地自行车、公路自行车）。

然后我将他选择的类型添加到 5 个索引的数组中。

我怎样才能做到这一点？

请给我一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:05:28.927

我不知道您如何从用户那里寻找答案，但如果您使用的是按钮，您可以在用户按下特定按钮时添加请求的对象类型。

但是你必须做的是`ArrayList<Bicycle>`，然后添加扩展 Bicycle 的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:11:29.050

您应该创建一个返回 Bicycle 实例的工厂方法：

例如：

```
public Bicycle createBicycle(String type) {
    if (type.equals("Bicycle")) {
        return new Bicycle(20, 10, 1);
    } else if (type.equals("MountainBike")) {
        return new MountainBike(20, 10, 5, "Dual");
    }
    //and so on..
} 
```

并像这样使用它，例如：

```
Bicycle[] bicycles = new Bicycle[5];
bicycle[0] = createBicycle("Bicycle"); 
```

# ios - 如何将点击动作添加到自定义 UIButton？

> ID：13787588
> 
> 赞同：4
> 
> 时间：2012-12-09T13:03:20.333
> 
> 标签：ios, uibutton, action, customization, programmatically-created

我有一个加载 Nib 的子类 UIButton：

```
@implementation BlaButtonVC

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *subViews = [[NSBundle mainBundle] loadNibNamed:@"BlaButton" owner:self options:nil];
        [self addSubview:subViews[0]];
    }
    return self;
}

@end 
```

我可以将此按钮添加到视图中，如下所示：

```
// ViewController.m
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    BlaButtonVC *button = [[BlaButtonVC alloc] initWithFrame:CGRectMake(10, 10, 280, 44)];

    button.titleXLabel.text = @"Bls";
    button.descLabel.text = @"Kues";

    [button addTarget:self action:@selector(tap:) forControlEvents:UIControlEventTouchUpInside];

    [button becomeFirstResponder];

    [self.view addSubview:button];
}

-(IBAction)tap:(id)sender
{
    NSLog(@"sssss");
} 
```

我的问题是 tap: 方法不会被调用。还尝试了一个普通的 UIButton，它确实有效，所以它一定是自定义 xib 文件的问题，我真的不知道哪个视图首先响应点击动作？如何将按钮设置为响应点击操作的按钮？

我错过了什么？

在这里您可以找到完整的 xcode 项目：
[https ://www.dropbox.com/s/zjhwy7jm8jcywz4/blabla1_111.zip](https://www.dropbox.com/s/zjhwy7jm8jcywz4/blabla1_111.zip)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:20:34.037

禁用视图的子视图，因为它们会触动。
在 xib ( `userinteraction enabled`) 或代码中：

`((UIView *)subViews[0]).userInteractionEnabled = NO;`

# php - 如何将信息添加到采购表中

> ID：13787590
> 
> 赞同：0
> 
> 时间：2012-12-09T13:03:39.197
> 
> 标签：php, mysql

我在向表中添加购买信息时遇到问题。我创建了一个购物车，结账时有一个购买按钮。在我继续之前，这是我的表格的结构方式：

购买（表）：

*   购买 ID（主键）
*   FrameNumber（外键）
*   日期
*   电子邮件

自行车库存：

*   帧号（主键）
*   购买 ID（外键）- 链接到购买表。
*   BikeCode（外键） - 自行车表的链接。

当有人点击购买表时，我想输入一个购买 ID，从 Bikecode = '我希望购买的自行车的代码'的 Bikestock 表中获取 FrameNumber。

我到目前为止是这样的：

```
<?php
session_start();
include ("connection.php");

$sql = "SELECT b.FrameNumber, b.BikeCode, p.FrameNumber FROM BikeStock b LEFT JOIN Purchase p on b.FrameNumber = p.FrameNumber WHERE b.bikecode = 'MABE2012-5'";
$result = mysqli_query($con, $sql) or die('Query1 failed: ' . mysqli_error($con));

while($row = mysqli_fetch_array($result)) {
$framenumber = $row[0];

echo $framenumber . "<br>";

}
$PurchaseID = (rand(1,24));
$date = date("d/m/Y");
$Email = $_SESSION["user"];

$sql1 = "INSERT INTO Purchase VALUES (\"$date\",\"$PurchaseID\",\"$Email\", \"$framenumber\")";
$result1 = mysqli_query($con, $sql1) or die('Query2 failed: ' . mysqli_error($con));

    echo $date . "<br>";
    echo $PurchaseID . "<br>";
    echo $Email . "<br>";

?> 
```

我不确定如何添加 $bikecode 信息，而且我不断使用主键获取重复条目，因为它选择随机数并且帧号不断被复制，但它是一个外键，所以如果使用一个帧号，它必须选择另一个如果它的帧数用完，我希望它说缺货。

非常感谢您的帮助，如果我不清楚，请告诉我在哪里，我会解决的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:23:35.317

一些建议：

1）更改您的购买表以包含自动增量主键。不要使用随机数。
2）更改此插入：

> 插入购买价值

更像是：

> 插入购买 (PurchaseID, FrameNumber, ...) VALUES ?, ?, ...

并使用准备好的语句。

3) 如果您将日期格式化为 YYYY-MM-DD，MySQL 会更满意。
4) 在将其添加到购物车之前检查“框架缺货”。

# php - 有序列表及其结构方式

> ID：13787592
> 
> 赞同：1
> 
> 时间：2012-12-09T13:04:01.037
> 
> 标签：php

你们！所以我要做的是两个部分：首先，必须知道我已经在 phpMyAdmin 上创建了一个数据库，其中包含一个名为“lists”的表，其中包含“id”、“name”、“times”列、“级别”、“电子邮件”和“号码”。(1) 我希望能够称这些列中的每一列都通过它们的 id 来引用它们。(2) 然后我希望能够按从最低到最高的顺序打印出一个基于我的“级别”数据（这是一个介于 0 和 3 之间的数值）的有序表，这将保持顺序即使更多的输入被放入数据库。唯一的问题是我对 (1) 的实现似乎不起作用，因为我制作的网站上的表格中没有任何内容打印出来。这是我所拥有的：

```
// configuration
require("../includes/config.php"); 

for ($num = 0; $num < 255; $num++)
{
    // get info from database
    $rows = query("SELECT id FROM list WHERE id = ?", $num);
}    

if ($rows === false)
{
    apologize("Oops, something went wrong with the database.");
}

// look up list info
$positions = [];
foreach ($rows as $row)
{
    $positions[] = [
    "name" => $row["name"],
    "times" => $row["times"],
    "level" => $row["level"],
    "email" => $row["email"],
    "number" => $row["number"]
    ];
}  

// render list of people
render("list_form.php", ["positions" => $positions, "title" => "List"]); 
```

?>

顺便说一下，“list_form.php”是一个 html 文件，其中包含应该打印数据的表格，并且理想情况下按照“级别”中的数据进行排序。

```
<thead>
    <tr>
        <th>Name</th>
        <th>Times Available</th>
        <th>Level of Play</th>
        <th>Email Address</th>
        <th>Phone Number</th>
    </tr>
</thead>

<tbody>

<?php 

    foreach ($positions as $position)
    {
        printf("<tr>");
        printf("<td>%s</td>", htmlspecialchars($position["name"]));
        printf("<td>%s</td>", htmlspecialchars($position["times"]));
        printf("<td>%s</td>", htmlspecialchars($position["level"]));
        printf("<td>$%s</td>", htmlspecialchars($position["email"]));
        printf("<td>$%s</td>", htmlspecialchars($position["number"]));
        printf("</tr>");
    }

?>
<center>
    <a href="index.php">Index</a></li>
</center>

</tbody> 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:14:56.353

首先：

```
for ($num = 0; $num < 255; $num++)
{
    // get info from database
    $rows = query("SELECT id FROM list WHERE id = ?", $num); // IF YOU DON'T SAVE THIS IN AN ARRAY, YOU COULD NOT HAVE INFOS...
} 
```

您可以通过这种方式只运行一个查询：

```
$maxID = 255;
$rows = query("SELECT id FROM list WHERE id < ? ORDER BY level asc", $maxID); 
```

# java - Java 替代 PHP Tokenizer

> ID：13787596
> 
> 赞同：1
> 
> 时间：2012-12-09T13:04:28.117
> 
> 标签：java, tokenize

是否有任何 Java 替代 PHP Tokenizer？

[http://php.net/manual/en/book.tokenizer.php](http://php.net/manual/en/book.tokenizer.php)

编辑：我的意思是像 PHP Tokenizer 一样解析 Java 的 Java 类解析 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:08:05.963

我快速扫描了您链接到的文档。它看起来像是解析 PHP 代码的功能。

如果这确实是您正在寻找的，您可能会发现[JavaParser 项目](http://javaparser.org/)很有用。它包含解析 Java 源代码的功能。

[此页面](https://github.com/javaparser/javaparser/wiki/Manual)包含一些使用示例。

# php - 将 LTR 更改为 RTL 的自动化脚本

> ID：13787597
> 
> 赞同：1
> 
> 时间：2012-12-09T13:04:35.460
> 
> 标签：php, wordpress

我想尝试一个自动脚本，将 LTR Wordpress 主题更改为 RTL Wordpress 主题。基本上，我想在主题的 style.css 文件中将“左”更改为“右”，将“右”更改为“左”；我尝试将**str_replace()**单词“left”更改为“right”，反之亦然，但是在将“left”更改为“right”之后，在执行第二个 str_replace() 后将其更改回“left” .

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:37:07.760

由于我正在使用双语 wordpress，我可以建议您使用 qTranslate 插件。

然后您可以使用以下方式切换主题：

```
 <?php if (qtrans_getLanguage() == 'ar'): #use your own language name here. ?>
        <link rel="stylesheet" type="text/css" media="all" href="<?php echo get_template_directory_uri() . "/style_rtl.css"; ?>" />
        <?php else: ?>
        <link rel="stylesheet" type="text/css" href="<?php bloginfo('stylesheet_url'); ?>">
        <?php endif; ?> 
```

# javascript - 如何在 jQuery 中使用“this”？

> ID：13787599
> 
> 赞同：1
> 
> 时间：2012-12-09T13:04:37.207
> 
> 标签：javascript, jquery, jquery-selectors, jquery-events

我有一些重复的代码，如下所示，我想删除重复的代码，以实现“DRY”（不要重复自己）原则。任何人都可以帮助我，将不胜感激！

Javascript代码如下：

```
<script type="text/javascript">
    $(document).ready(function () {

        $(".adjustLineFeedProductName").ready(function () {
            var str = "";
            for (i = 0; i < $(".adjustLineFeedProductName").html().length; i += 66) {
                str = str + "<p style=\"margin: 0px 0px 0px 0px;\">" + $(".adjustLineFeedProductName").html().substring(i, i + 66) + "</p>";
            }
            $(".adjustLineFeedProductName").html(str);
        });

        $(".adjustLineFeedQuantityPerUnit").ready(function () {
            var str = "";
            for (i = 0; i < $(".adjustLineFeedQuantityPerUnit").html().length; i += 66) {
                str = str + "<p style=\"margin: 0px 0px 0px 0px;\">" + $(".adjustLineFeedQuantityPerUnit").html().substring(i, i + 66) + "</p>";
            }
            $(".adjustLineFeedQuantityPerUnit").html(str);
        });

    });
</script> 
```

html代码如下：

```
<div class="elaborate" style="margin: 0px 0px 0px 0px; padding: 0px 0px 3px 10px;"><b class="adjustLineFeedProductName"><%: (string)Model.Product.ProductName %></b></div>
<div class="elaborate" style="margin: 0px 0px 0px 0px; padding: 3px 0px 0px 10px;"><span class="adjustLineFeedQuantityPerUnit">Quantity/Unit : <%: (string)Model.Product.QuantityPerUnit %></span></div> 
```

我想使用下面的 Javascript 来代替上面的 Javascript，但它不起作用：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".adjustLineFeed").ready(function () {
            var str = "";
            for (i = 0; i < this.html().length; i += 66) {
                str = str + "<p style=\"margin: 0px 0px 0px 0px;\">" + this.html().substring(i, i + 66) + "</p>";
            }
            this.html(str);
        });
    });
</script> 
```

我尝试使用下面的 html 代码而不是上面的 html 代码，但它不起作用：

```
<div class="elaborate" style="margin: 0px 0px 0px 0px; padding: 0px 0px 3px 10px;"><b class="adjustLineFeed"><%: (string)Model.Product.ProductName %></b></div>
<div class="elaborate" style="margin: 0px 0px 0px 0px; padding: 3px 0px 0px 10px;"><span class="adjustLineFeed">Quantity/Unit : <%: (string)Model.Product.QuantityPerUnit %></span></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:07:46.853

在 jQuery 块中，`this`将引用`HTMLDomElement`实例。在这一点上，您可以执行诸如`innerHTML`etc 之类的操作，但显然您不能执行 jQuery 方法，因为它不是 jQuery 对象。

要创建一个 jQuery 对象，请将 DOM 元素传递给`$`like ；

```
$(this) 
```

* * *

其他几点；

1.  `$(".adjustLineFeedProductName").ready()`是没有意义的。A`span`或 a`br`永远*不会* `ready`；我很惊讶这甚至有效。将代码放在 a`$(document).ready()`中就足够了。您可能想要使用的是`jQuery.each()`这样您就可以定位页面上的*所有*实例（如果只有一个实例，请考虑使用 ID）。`.adjustLineFeedProductName``.adjustLineFeedQuantityPerUnit`

    ```
    $(".adjustLineFeedProductName").each(function () {
        var str = "";
        for (i = 0; i < $(this).html().length; i += 66) {
            str = str + "<p style=\"margin: 0px 0px 0px 0px;\">" + $(this).html().substring(i, i + 66) + "</p>";
        }
        $(this).html(str);
    }); 
    ```

2.  缓存 的响应`$()`。`$(this)`. `$()`每次调用它时都会在幕后工作。虽然这不是很多工作`DOMElements`，但养成缓存这些内容的习惯是一个好习惯。例如，jQuery 选择器执行的 DOM 查找并不简单。

    ```
    $(".adjustLineFeedProductName").each(function () {
        var str = "";
        var self = $(this); // cache

        for (i = 0; i < self.html().length; i += 66) { // use self
            str = str + "<p style=\"margin: 0px 0px 0px 0px;\">" + self.html().substring(i, i + 66) + "</p>"; // use self
        }
        self.html(str);
    }); 
    ```

3.  与 #2 类似`html()`，出于同样的原因，缓存也是如此。

    ```
     $(".adjustLineFeedProductName").each(function () {
        var str = "";
        var self = $(this); // cache
        var html = self.html();

        for (i = 0; i < html.length; i += 66) { // use self
            str = str + "<p style=\"margin: 0px 0px 0px 0px;\">" + html.substring(i, i + 66) + "</p>"; // use self
        }
        self.html(str);
    }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:07:24.293

正确的代码是这样的：

```
$(this).html() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:08:05.350

改变这个：

```
this.html(str); 
```

对此：

```
$(this).html(str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T13:34:40.117

谢谢“马特”！！！我按照您的建议修改了代码，它完美无缺！！！

Javascript代码如下：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".adjustLineFeed").each(function () {
            var str = "";
            var self = $(this); // cache
            var html = self.html();
            for (i = 0; i < html.length; i += 66) {
                str = str + "<p style=\"margin: 0px 0px 0px 0px;\">" + html.substring(i, i + 66) + "</p>";
            }
            self.html(str);
        });
    });
</script> 
```

html代码如下：

```
<div class="elaborate" style="margin: 0px 0px 0px 0px; padding: 0px 0px 3px 10px;"><b class="adjustLineFeed"><%: (string)Model.Product.ProductName %></b></div>
<div class="elaborate" style="margin: 0px 0px 0px 0px; padding: 3px 0px 0px 10px;"><span class="adjustLineFeed">Quantity/Unit : <%: (string)Model.Product.QuantityPerUnit %></span></div> 
```

# extjs - Sencha Touch 当前工作目录 (/Developer/SDKs/MacOSX10.6.sdk/sencha-touch-2.1.0) 不是公认的 Sencha SDK 或应用程序文件夹

> ID：13787600
> 
> 赞同：2
> 
> 时间：2012-12-09T13:04:39.400
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-architect

我已经在 /Developer/SDKs/MacOSX10.6.sdk 下安装了 sencha-touch-2.1.0-gpl 和 sencha SDK Tool。, 在 Terminal 中浏览到文件夹 sencha-touch-2.1.0-gpl 并给出命令 sencha 会导致警告

```
[WARN] The current working directory (/Developer/SDKs/MacOSX10.6.sdk/sencha-touch-2.1.0) is not a recognized Sencha SDK or application folder. Running in backwards compatible mode. 
```

有什么建议么 ！！？？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:52:15.533

您需要在Sencha Touch 2.1中使用**Sencha Command**而不是**Sencha SDK Tools**

看看我在这里的回答：

[生成一个煎茶触摸应用](https://stackoverflow.com/questions/13497247/generate-a-sencha-touch-app/13500700#13500700)

跳这有帮助

# php - PHP检查域名正则表达式（没有tld部分）

> ID：13787601
> 
> 赞同：2
> 
> 时间：2012-12-09T13:04:48.333
> 
> 标签：php, expression

我正在使用此代码来验证网址：

```
if(!filter_var($check_url, FILTER_VALIDATE_URL))
{ echo "URL is not valid"; }
else { echo "OK, valid"; } 
```

现在在大多数情况下这没问题，但这会解析：`http://www.--tester.com` as A VALID DOMAIN ? 并且一开始就不允许使用破折号！？

是否有一个正则表达式只检查 NAME （没有扩展部分，因为它只会注册 .com 域，因此会自动添加，不需要检查它）......所以只检查实际名称，如果它是“好去”...

我猜输入必须只检查字母、数字和破折号（但前提是它们不在开头），没有点和其他字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:39:33.573

抱歉，如果其他人需要，请提供：

```
^([a-zA-Z0-9][-a-zA-Z0-9]*[a-zA-Z0-9])$ 
```

# autohotkey - 按下带有 postmessage 的按钮

> ID：13787604
> 
> 赞同：1
> 
> 时间：2012-12-09T13:05:22.387
> 
> 标签：autohotkey

有一种方法可以使用 postmessage 进行鼠标单击，一种无需移动鼠标的解决方案（不单击 x，y）？

例如：

```
loop{   
      hotkey,ctrl,pressb
} 
```

新闻b：

```
msgbox a button

      PostMessage, 0x0201, , 9765141, ahk_class #32770

      PostMessage, 0x0202, , 9765141, ahk_class #32770

      ; or ControlClick, x95 y115, ahk_class #32770

return 
```

函数 PostMessage 和 ControlClick 不起作用，未按下按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:03:57.643

这些中的每一个都应该工作

*   `ControlClick, Button1, ahk_class #32770`
*   `ControlClick, OK, ahk_class #32770`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T22:48:06.457

我有同样的问题（直到最近）。大多数 AutoHotKey 交互命令（如 SendMessage、ControlClick、SendRawMessage 等）在 32700 窗口（对话框）以及其他窗口中都不起作用。

解决方案：如果您运行的是 Windows 7。您需要以管理员身份运行 AHK 脚本。为此，请右键单击您的 AutoHotKey 脚本，然后单击“以管理员身份运行”。

# charts - Ricksahw Graph as 'NXY' (one x multiple y) from array可能？

> ID：13787608
> 
> 赞同：1
> 
> 时间：2012-12-09T13:05:34.383
> 
> 标签：charts, rickshaw

我使用 shutterstock 人力车[图表](http://code.shutterstock.com/rickshaw/)库通过 ajax-php-sql 可视化一些传感器数据。

在所有示例中，人力车依赖于表格中的系列数据

```
[ [ { x: xval1, y: yval1}, { x: xval2, y: yval2}, ...] 
  [ { x: xval1, y: yvalS2_1}, { x: xval2, y: yvalS2_2}, ...]
] 
```

与例如 xmgrace 的“nxy”模式相比，我觉得有点乏味：一个 x 列，n 个 y 列——这正是我从 sql 查询中得到的（因为我的传感器以相同的时间戳进行采样）。

所以问题是是否有可能让人力车的数据输入总是相同的 x 数据向量和单独的 y 数据向量，保存在一个数组中？

谢谢你！亚历克斯

# python - '[.\n]' 不代表任何字符吗？

> ID：13787609
> 
> 赞同：-1
> 
> 时间：2012-12-09T13:05:38.503
> 
> 标签：python, regex

```
content = 'abcdd'

import re,os,sys
def test():
    print content
    list = re.findall(r'[.\n]+',content)
    print list

if __name__ == '__main__':
    test() 
```

我知道 '。' 表示除 '\n' 以外的任何字符

所以 [.\n] 应该代表任何字符

但结果是 []

为什么

你能帮助我吗 ？

谢谢你在avdanvce！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:08:06.637

`.`内部字符类`[]`失去了“所有字符（除了换行符或不取决于标志）”的特殊含义，并且只是一个普通的句号`.`。

所以`[.\n]`只匹配句号`.`或换行符。

如果你想匹配任何字符（无例外），一个技巧是形成一个互补字符类的字符类，例如`[\s\S]`. 当语言的正则表达式不支持 DOTALL 选项时，这很有用，它可以`.`匹配任何字符。

**但是**，由于 Python 支持 DOTALL 选项（[`re.DOTALL`](http://docs.python.org/2/library/re.html#re.DOTALL)），所以您可以使用它。

请注意，对于 Python，`.`仅排除`\n`. 对于其他语言，它可能会排除更多：[Javascript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:11:06.160

得到一切：

```
content = 'abcdd'

import re,os,sys
def test():
    print content
    list = re.findall(r'.+', content, re.DOTALL)
    print list

if __name__ == '__main__':
    test() 
```

结果：

```
>>> 
abcdd
['abcdd'] 
```

你需要使用 DOTALL （这意味着`.`也意味着`\n`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:14:54.557

从[文档](http://docs.python.org/2/library/re.html)中：

> 特殊字符在集合中失去其特殊意义。例如，[(+*)] 将匹配任何文字字符 '('、'+'、'*' 或 ')'。

尝试`'.|\n'`改用，或者如前所述，使用 re.DOTALL。

# assembly - 在程序集中列出目录内容？

> ID：13787616
> 
> 赞同：1
> 
> 时间：2012-12-09T13:06:36.043
> 
> 标签：assembly, x86, dos, interrupt, directory

我想打印当前工作目录及其内容。该程序将在 x86、16 位 Intel 语法、使用中断的 DOS 汇编中完成。我将使用的汇编器将是 Turbo 汇编器。到目前为止，这是我的代码（不多）：

```
ASSUME  cs:code,    ds:data
data segment
buffer  db  64  dup  (0) ; buffer for the current directory name
data ends
code segment
start:
mov     ax,     data ;
mov     ds,     ax   ; move data segment into ds, es registers
mov     es,     ax   ;

mov     dl,     0             ; default drive 
mov     si,     offset buffer ; put current directory in buffer
mov     ah,     47h  ; GET CURRENT DIRECTORY
int     21h                  

; appending '$' to buffer end
    ; search until 0 found
mov     cx,     64  ; search over all buffer 
cld                                 ; starting from the beginning  
    end_string:                         
lodsb                               ; get current byte in al register
cmp     al,     0   ; compare it with 0
jne     continue                    ; if not equal jump to continue label
mov     al,     36  ; if equal copy 36('$' - ASCII) in al
mov     di,     si  ; set destination index to source index
sub     di,     1           ; decrement di 
stosb                               ; store in es:di the value contained in al
mov     cx,     1   ; stop looping by setting cx to 1
    continue: 
    loop end_string
    ; print string obtained 
mov     dx,     offset buffer  ; ds:dx - string start
mov     ah,     09h            ; WRITE STRING TO STANDARD OUTPUT
int     21h

mov     ax,     4c00h          ; end program with exit code 0
int     21h
    code ends
    end start 
```

我设法让它运行并显示当前的工作目录。但是现在我不知道如何获取他的子目录以及目录中包含的文件。所以我的问题是：我如何得到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:37:29.070

使用 DOS 服务`FindFirst`( `0x4e`) 和`FindNext`( `0x4f`) 获取给定目录中的条目列表。然后，您可以根据返回的属性区分子目录和文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T07:42:10.713

但在调用“FindNext”之前获取 DTA。
DTA - 磁盘传输区：[http ://stanislavs.org/helppc/dta.html](http://stanislavs.org/helppc/dta.html)

RBIL->inter61b.zip->INTERRUP.F

```
--------D-212F-------------------------------
INT 21 - DOS 2+ - GET DISK TRANSFER AREA ADDRESS
AH = 2Fh
Return: ES:BX -> current DTA
Note:   under the FlashTek X-32 DOS extender, the pointer is in ES:EBX
SeeAlso: AH=1Ah 
```

短剑

# csv - 函数 top(Infinity) 的含义

> ID：13787619
> 
> 赞同：-1
> 
> 时间：2012-12-09T13:06:43.703
> 
> 标签：csv, d3.js

我是 d3js 的新手，在 d3js 中遇到了以下代码：

数据=距离。顶部（无穷大）；

其中“距离”是从 csv 文件中读取的列。

这段代码究竟做了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:30:36.373

这看起来像一个 Crossfilter 维度，因此请查看有关[dimension.top](https://github.com/square/crossfilter/wiki/API-Reference#wiki-dimension_top)的 API 参考。

> 如果根据交叉过滤器的所有过滤器选择的记录少于 k 个，则将返回一个小于 k 的数组。例如，要按总额降序检索所有选定的付款：
> 
> `var allPayments = paymentsByTotal.top(Infinity);`

# magento - Magento 子类别中的品牌

> ID：13787621
> 
> 赞同：0
> 
> 时间：2012-12-09T13:07:06.270
> 
> 标签：magento

我正在尝试解决 Magento 顶部导航的问题。

我拥有的顶部导航目前显示顶级类别及其子类别。我想要做的是在每个包含该子类别中的品牌的子类别下添加另一个级别，如下所示（http://cl.ly/image/3A3D1i1D3j3x）

我希望从父子类别（夹克等）中产品的“品牌”属性中检索品牌项目，而不是在每个产品类型子类别中创建一堆品牌子类别，因为这是管理系统的噩梦.

如果有人知道一个很好的免费或付费扩展可以做到这一点，我也愿意走这条路。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:52:05.257

我现在正在做类似的事情。它不完全适合，因为它不会与您的菜单集成，但我建议为此使用[Amasty 改进的分层导航](http://amasty.com/improved-navigation.html)。

它允许您添加水平分层导航块并进行设置，以便您可以根据属性按品牌进行过滤。您可以使用默认的制造商属性，但我发现添加一个名为 Brands 的新属性不太成问题。该模块允许您将图像分配给属性值，因此您可以列出您品牌的所有徽标，并且用户可以通过单击徽标来过滤产品。

然后，您还可以在产品列表页面和产品视图页面中使用相同的品牌图像。

这对您的客户来说非常容易管理，他们只需在创建产品时为其分配品牌属性。

这是到目前为止我正在处理的网站的屏幕截图（还没有完成，所以有些粗糙的边缘）所以你可以明白我的意思。那里只有一些测试产品，我使用的是垂直块而不是水平块，但你明白了。用户只需单击徽标即可过滤列表。

![在此处输入图像描述](../Images/7b2da8cb23f6c22e2c071f1d6dd367a7.png)

除此之外，该模块还有许多其他方便的方面，包括用于过滤其他属性（重量、价格和任何数字）的滑块。

# javascript - 使用 jquery 提交 csv 表单数据，然后显示为 json

> ID：13787642
> 
> 赞同：0
> 
> 时间：2012-12-09T13:08:52.540
> 
> 标签：javascript, jquery, json, forms, csv

我是 jquery 的初学者，所以这可能很愚蠢。我想从用户那里获取 csv 数据并将其转换为 json。找到了一个不错的库，但不太了解如何在 jquery 中完成提交。

例如，如果我有一个观点

```
<script type="text/javascript" src="<?php echo site_url('public/js/jquery.js') ?>" ></script>
<script type="text/javascript" src="<?php echo site_url('javascript/main.js') ?>" ></script>

    <div id="message"><p></p></div>

    <form id="convertForm" name="convertForm" onsubmit="return false; ">
        CSV<br /><textarea id="csv" name="csv" rows="10" cols="60"></textarea><br /><br />

        JSON<br /><textarea id="json" name="json" rows="10" cols="60" readonly="readonly"></textarea><br /><br />

        <input type="button" value="Convert" id="submitButton"/> <input type="reset" />
    </form> 
```

和 main.js 文件

```
function parseCSVLine (line)

            {
                line = line.split(',');
                for (var i = 0; i < line.length; i++)
                {
                    var chunk = line[i].replace(/^[\s]*|[\s]*$/g, "");
                    var quote = "";
                    if (chunk.charAt(0) == '"' || chunk.charAt(0) == "'") quote = chunk.charAt(0);
                    if (quote != "" && chunk.charAt(chunk.length - 1) == quote) quote = "";

                    if (quote != "")
                    {
                        var j = i + 1;

                        if (j < line.length) chunk = line[j].replace(/^[\s]*|[\s]*$/g, "");

                        while (j < line.length && chunk.charAt(chunk.length - 1) != quote)
                        {
                            line[i] += ',' + line[j];
                            line.splice(j, 1);
                            chunk = line[j].replace(/[\s]*$/g, "");
                        }

                        if (j < line.length)
                        {
                            line[i] += ',' + line[j];
                            line.splice(j, 1);
                        }
                    }
                }

                for (var i = 0; i < line.length; i++)
                {
                    // remove leading/trailing whitespace
                    line[i] = line[i].replace(/^[\s]*|[\s]*$/g, "");

                    // remove leading/trailing quotes
                    if (line[i].charAt(0) == '"') line[i] = line[i].replace(/^"|"$/g, "");
                    else if (line[i].charAt(0) == "'") line[i] = line[i].replace(/^'|'$/g, "");
                }

                return line;
            }

            function csvToJson ()
            {
                var message = "";
                var error = false;
                var f = document.forms["convertForm"];
                var csvText = f.elements["csv"].value;
                var jsonText = "";

                setMessage(message, error);

                if (csvText == "") { error = true; message = "Enter CSV text below."; }

                if (!error)
                {
                    benchmarkStart = new Date();
                    csvRows = csvText.split(/[\r\n]/g); // split into rows

                    // get rid of empty rows
                    for (var i = 0; i < csvRows.length; i++)
                    {
                        if (csvRows[i].replace(/^[\s]*|[\s]*$/g, '') == "")
                        {
                            csvRows.splice(i, 1);
                            i--;
                        }
                    }

                    if (csvRows.length < 2) { error = true; message = "The CSV text MUST have a header row!"; }
                    else
                    {
                        objArr = [];

                        for (var i = 0; i < csvRows.length; i++)
                        {
                            csvRows[i] = parseCSVLine(csvRows[i]);
                        }

                        benchmarkParseEnd = new Date();

                        for (var i = 1; i < csvRows.length; i++)
                        {
                            if (csvRows[i].length > 0) objArr.push({});

                            for (var j = 0; j < csvRows[i].length; j++)
                            {
                                objArr[i - 1][csvRows[0][j]] = csvRows[i][j];
                            }
                        }

                        benchmarkObjEnd = new Date();

                        jsonText = JSON.stringify(objArr, null, "\t");

                        benchmarkJsonEnd = new Date();

                        f.elements["json"].value = jsonText;

                        benchmarkPopulateEnd = new Date();

                        message = getBenchmarkResults();

                    }
                }

                setMessage(message, error);
            }

$(document).ready(function(){

            $('#submitButton').on('click', function(){

                console.log('i got here');
                csvToJson;

            });

}); 
```

这工作得很好，但 console.log 从未显示。

如果我尝试从 csvToJson 函数返回 jsonText，然后将其附加到第二个 textarea，那也不起作用。

```
function csvToJson ()

{

//same code here

return jsonText;

}

$(document).ready(function(){

            $('#submitButton').on('click', function(){

                console.log('i got here');
                jsont = csvToJson();
                                $("#json").val(jsonT);

            }); 
```

这显然是我无法提交的东西。我应该使用 jquery .submit() 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:45:25.167

`csvToJson`在单击处理程序内调用时，您缺少括号。

改变：

```
$('#submitButton').on('click', function(){ 
                csvToJson;
}); 
```

到

```
$('#submitButton').on('click', function(){ 
                csvToJson();
}); 
```

演示：http: [//jsfiddle.net/MRmJM/1/](http://jsfiddle.net/MRmJM/1/)

注意：如果 CSV 用分号分隔（并不罕见），解析器代码无法创建正确的对象

# javascript - Object.defineProperty 获取/设置闭包

> ID：13787643
> 
> 赞同：5
> 
> 时间：2012-12-09T13:08:56.830
> 
> 标签：javascript, object, get, set

好的，我尝试以这种方式创建新对象：

```
var src = {a:'a', b:'b', c:'c'};
var out = {};
for(var prop in src){   
    Object.defineProperty(out, prop,{
        get: function(){
            return src[prop];
        },
        set: function(val){
            src[prop]=val;
        }
    })
} 
```

并得到一个不好的结果：

```
out = {a:'c', b:'c', c:'c'} 
```

我知道创建此对象的其他方法，例如：

```
for (var prop in src) {
    (function(prop) {
        Object.defineProperty(out, prop, {
            get: function() {
                return src[prop];
            },
            set: function(val) {
                src[prop] = val;
            }
        })
    })(prop)
} 
```

或者：

```
Object.keys(src).map(function(prop){
    Object.defineProperty(out, prop,{
        get: function(){
            return src[prop];
        },
        set: function(val){
            src[prop]=val;
        }
    })
}) 
```

但是我不明白为什么在第一种方法中，字符串参数“prop”会通过链接发送到函数“defineProperty”。请帮助我理解这一点。抱歉英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:33:43.130

当您在循环中创建函数时，您会围绕该循环中使用的变量创建一个闭包。在这种情况下， 周围有一个闭包`prop`。每个函数（getter）都有一个引用，`prop`因此当稍后调用它们时（使用 getter 时），它们使用的值`prop`恰好是循环中分配的最后一个值。

换句话说，由于 getter 是稍后调用的，所以 in 的值`prop`是它最后设置的任何值。`defineProperty`另一方面，由于没有闭包，因此获得了正确的值。它在调用时使用值调用，而不是在循环完成后调用。

# regex - 谷歌分析正则表达式

> ID：13787646
> 
> 赞同：0
> 
> 时间：2012-12-09T13:09:12.383
> 
> 标签：regex, google-analytics

我正在尝试设置一个 Google Analytics 目标 url 正则表达式来匹配：

任意数量的任意字符后跟“首次登录”？后跟任意数量的任意字符。

例子：

*   /user/452/first-login?uid=452
*   /bob-smith/first-login?fish=tuna

看起来很简单，但我是正则表达式的菜鸟。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:12:21.260

您可以使用简单`indexOf`的方法来搜索`first-login?`URL 中的子字符串。

如果这不可能，下面的 Perl 兼容正则表达式将匹配包含`first-login?`作为子字符串的 URL。根据您使用的语言，您可能需要添加分隔符或字符串转义。

```
^.*first-login\?.*$ 
```

（注：答案已编辑以匹配问题）

# php - PHP计算下拉输入到总数

> ID：13787649
> 
> 赞同：0
> 
> 时间：2012-12-09T13:09:31.727
> 
> 标签：php, drop-down-menu, echo

我有一个插件，可以很好地完成他的工作。我只需要一个额外的选项。该表格与总价相呼应。我需要根据下拉菜单中的选择在总价中添加运费。下面是下拉列表，标签中是总价格的输出，具体取决于所选的产品。我希望有人可以提供帮助。

```
<table>
<select name="shipper">
<option value="25">Netherlands</option>
<option value="49">Europe</option>
</select>

<td><strong>
  <?php 
    echo $this->output_currency(
      $totalPrice + $totalShipping + $shipper, 
      $currencySymbol, 
      $decimalPoint, 
      $thousandsSeperator) 
  ?></strong></td>
</table> 
```

我已经尝试了以下所有解决方案，但没有一个有效。Tim 的版本显示了总价和运输选项，但没有添加两者。另一个给出NaN。也许您需要更多代码，因为回显代码属于带有更多代码的购物车插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:52:19.360

I have tryed playing arround with the old code i made. And could not find what was wrong with it, but i have posted a total type of script now. "Remember you have to have the jquery-1.8.2 java library included like:

```
<?
$totalPrice = '100';
$totalShipping = '100';
$currencySymbol = '100';
$decimalPoint = '100';
$thousandsSeperator = '100';
?>
<script type="text/javascript" src="inset the link til the jquery 1.8.2 javascript file here." ></script>
<script>
$(document).ready(function() {
    $('.calculate').change(function() {
        var total = 0;
        $('.calculate').each(function() {
            var value = $(this).val();
               if(value != 0) {
                 total += parseFloat(value);
            }
        });
        total = total + parseFloat(<?php echo $totalPrice; ?>);
        total = total + parseFloat(<?php echo $totalShipping; ?>);
        total = total + parseFloat(<?php echo $currencySymbol; ?>);
        total = total + parseFloat(<?php echo $decimalPoint; ?>);
        total = total + parseFloat(<?php echo $thousandsSeperator; ?>);
        $('#total').text('' + total.toFixed(0));
    });
});
</script>

<select class="calculate" name="shipper">
<option value="25">Netherlands</option>
<option value="49">Europe</option>
</select>
<br>
<span id="total"></span> 
```

You can decide the data of the strings yourself in the top of the file. But this one is testet and are working on a apache server with the latest updates of php5 and apache.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:20:16.877

您可能希望为此使用 jQuery - 每次“select[name=shipper]”更改时，更新您的价格。您可能有一个不可见的成本价值，但运输和只需使用 jQuery 更新它，就像这样：

```
<script>
    $("select[name=shipper]").change(function() {
        var value=$(this).val();
        var cost = $("input[name=cost]").val();
        document.getElementById('cost').innerHTML = cost+value;
    }
</script>

<input type="hidden" name="cost" value="<?php your_cost(); ?>" />
<select name="shipper">
    <option value="25">Netherlands</option>
    <option value="49">Europe</option>
</select>

<td><strong id="cost"></strong></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T14:13:15.107

使用 JQuery 的 Ajax 方法

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
        $(document).ready(function()
        {
            $.calTotal = function()
            {
                var shipper = $('#shipper').val();
                $.get('http://localhost/ajax/calTotal.php?shipper='+shipper, function(data) {
                    $('#cost').html(data);              
                });
            }

            $("#shipper").change($.calTotal);
            $.calTotal(); //Calling calTotal Method to get Amount for default shipper
        });
    </script>

    <table>
    <select id="shipper" name="shipper">
        <option value="25">Netherlands</option>
        <option value="49">Europe</option>
    </select>   

    <td><strong>
    <span id='cost'></span>
    </strong></td>
    </table> 
```

PHP 文件 (http://localhost/ajax/calTotal.php)

```
<?php 
    if(isset($_GET['shipper'])){
        $shipper_cost = $this->getShippingCost($_GET['shipper']);   
        echo $this->output_currency(
            $totalPrice + $totalShipping + $shipper_cost, 
            $currencySymbol, 
            $decimalPoint, 
            $thousandsSeperator
        );
    }else{
        echo 'Please select shipper';
    }
?> 
```

您必须定义 getShippingCost() 方法以从数据库中获取托运人成本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T13:37:53.780

```
<table>
   <select name="shipper">
      <option value="25" data-cost="1.99">Netherlands</option>
      <option value="49" data-cost="5.99">Europe</option>
   </select> 
```

//这里包含jquery库

```
<script>
   var totalPrice = '<?php echo $totalPrice; ?>';
   var totalShipping = '<?php echo $totalShipping; ?>';
   var shipper = '<?php echo $shipper; ?>';
   var currencySymbol = '<?php echo $currencySymbol; ?>';  
   var decimalPoint = '<?php echo $decimalPoint; ?>';
   var thousandsSeperator = '<?php echo $thousandsSeperator; ?>';

   $(function(){
      $('select[name=shipper]').change(function(){
         var shipping_append = $(this).children('option:selected').data('cost');
         totalShipping += shipping_append;
         var text_string = ((totalPrice*1) + (totalShipping*1))
                           + ' ' + shipper + ' ' + currencySymbol + decimalPoint + thousandsSeperator.

         $('#output').text(text_string);
      });
   });
</script>

<td id="output"><strong>
  <?php 
    echo $this->output_currency(
      $totalPrice + $totalShipping + $shipper, 
      $currencySymbol, 
      $decimalPoint, 
      $thousandsSeperator) 
  ?></strong></td>
</table> 
```

# jquery - 错误：jQuery UI 选项卡：片段标识符不匹配

> ID：13787650
> 
> 赞同：1
> 
> 时间：2012-12-09T13:09:40.823
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

使用 jQuery UI 选项卡时收到此错误消息：`Uncaught Error: jQuery UI Tabs: Mismatching fragment identifier.`

在此代码中使用 jQuery 1.8.3 和 jQuery-UI 1.9.2。

HTML：

```
<div class="tabs">
    <ul>
        <li><a href="#div_default">Default</a></li>
        <li><a href="#div_size">Size</a></li>
        <li><a href="#div_advanced">Advanced</a></li>
    </ul>
    <div id="div_default">...</div>
    <div id="div_size">...</div>
    <div id="div_advanced">...</div>
</div> 
```

jQuery：

```
 $(function() {
     $('.tabs').tabs();
     $('.tabs').removeClass('ui-widget ui-widget-content ui-corner-all');
     $('.tabs ul').addClass('ui-widget ui-widget-content ui-corner-all');
 }); 
```

如果我回退到 jQuery-UI 1.8.23，那么没有错误消息并且同样无法使用选项卡。

这里有什么问题，或者我怎样才能获得更多信息表单浏览器？（使用 Chrome 和 Firefox）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:08:35.033

我使用了旧版本的`TinyMCE`with `jQuery`。如果升级或删除 TinyMCE，那么一切正常。

# asp.net-mvc - 已经返回redirecttoaction 但仍然不是所有的代码路径都返回一个值

> ID：13787652
> 
> 赞同：0
> 
> 时间：2012-12-09T13:09:55.527
> 
> 标签：asp.net-mvc

我需要这样的函数，但它的语法不正确。那么，如果我想保留函数的所有含义，该如何解决这个错误呢？

```
public ActionResult Permission(long? id)
    {

            if (id == null)
                throw new ApplicationException("Không có mục này. Bạn hãy chọn mục khác!");
            Shipping shipping = ShippingRepository.RetrieveById(id.Value);
            if (shipping == null)
                throw new ApplicationException("Không có mục này. Vui lòng chọn cái khác!");
            User _user = null;
            _user = UserRepository.RetrieveByUserID(shipping.OwnerId);
            if (DateTime.Now >= _user.Profiles.AccExpriedDate)
                Acc_Payment(_user.UserId);
            else 
                return RedirectToAction("Details", "Shipping");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:15:38.003

您没有在下面的块中返回值。

```
if (DateTime.Now >= _user.Profiles.AccExpriedDate)
{
    Acc_Payment(_user.UserId);
    //return an ActionResult here
}    
else 
    return RedirectToAction("Details", "Shipping"); 
```

# javascript - 按下回车键如何跳到下一行

> ID：13787653
> 
> 赞同：0
> 
> 时间：2012-12-09T13:09:59.863
> 
> 标签：javascript, drop-down-menu

我有一个简单的表格，我希望按回车键进入下一个下拉列表。

```
<tbody>
      <tr id="line1">
      <td style="width: 20px; text-align: center; padding-right: 10px; padding-right: 10px;">1</td>
      <td><input type="text" name="quantity1" value="" id="quantity01" class="text" style="width: 70px; text-align: center;"></td>
      <td><select name="product1" id="product01" class="chzn-select chzn-done" data-placeholder="Choose a Product" style="width: 270px; display: none;">
<option value="0"></option>
<option value="1">123456 TEXT </option>
<option value="2">5454654 TEXT 2</option>
</select>
      <td><select name="tax_rate1" id="tax_rate01" class="chzn-select chzn-done" data-placeholder="Select..." style="width: 110px; display: none;">
<option value="0"></option>
<option value="1">Option 1</option>
<option value="2" selected="selected">Option 2</option>
<option value="3">Option 3</option>
</select>
      <td><input type="text" name="input" value="" id="input" class="text" style="width: 100px; text-align: right;"></td>
      </tr> 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:20:05.303

```
$("select").keypress(function(e){

var key = (e.which) ? e.which : e.keyCode;

// If keycode is 13, this means it's "enter"
if(key == 13)
    $(this).next().focus();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:51:04.053

ParPar 的答案错过了函数的“n”（我编辑了它）但有效。

[这是JSFiddle](http://tinyurl.com/d83mjbh)的一个工作示例。

# iphone - 向 iPhone 发送 GSM/AT 命令

> ID：13787654
> 
> 赞同：1
> 
> 时间：2012-12-09T13:10:07.400
> 
> 标签：iphone, gsm

我需要哪种工具链/协议通过 Dock 连接器和/或蓝牙向 iPhone 发出 AT/GSM 命令。

任何建设性的帮助表示赞赏。

斯特凡

# c++ - 使用带有 qmake 的 subdir 结构避免重复的目标文件

> ID：13787660
> 
> 赞同：3
> 
> 时间：2012-12-09T13:10:26.493
> 
> 标签：c++, qt, project, qmake, object-files

我有一个游戏，有两个单独的项目，用于应用程序本身和测试。我正在源代码中构建所有项目。这是我的项目结构的缩短版本：

```
game
    game.pro
    app
        app.pro
        Entity.h
        Entity.cpp
        Entity.o
        moc_Entity.cpp
        moc_Entity.o
    tests
        layer
            layer.pro
            Entity.o (duplicated)
            moc_Entity.cpp (duplicated)
            moc_Entity.o (duplicated)
            tst_Layer.cpp 
```

**应用程序专业版：**

```
QT += core gui

greaterThan(QT_MAJOR_VERSION, 4) {
    QT += widgets
}

TARGET = cotw-clone
TEMPLATE = app

MOC_DIR = .moc
OBJECTS_DIR = .obj

HEADERS += MainWindow.h \
    Map.h \
    Tile.h \
    Character.h \
    Layer.h \
    NewGameDialog.h \
    GameController.h \
    Stair.h \
    Random.h \
    MapGenerator.h \
    TileData.h \
    Statistics.h \
    StatisticsDialog.h \
    StatisticWidget.h \
    Range.h \
    Level.h \
    RandomMapGenerator.h \
    AiController.h \
    MonsterJournalWidget.h \
    InventoryDialog.h \
    PathSearch.h \
    PathNode.h \
    Path.h \
    Geometry.h \
    EntityDatabase.h \
    EntityData.h \
    Entity.h \
    CharacterData.h \
    EntityMetadata.h

SOURCES +=\
    MainWindow.cpp \
    Map.cpp \
    Tile.cpp \
    Character.cpp \
    Layer.cpp \
    NewGameDialog.cpp \
    GameController.cpp \
    Stair.cpp \
    TileData.cpp \
    Statistics.cpp \
    StatisticsDialog.cpp \
    StatisticWidget.cpp \
    Level.cpp \
    RandomMapGenerator.cpp \
    AiController.cpp \
    MonsterJournalWidget.cpp \
    InventoryDialog.cpp \
    PathSearch.cpp \
    PathNode.cpp \
    Path.cpp \
    EntityDatabase.cpp \
    EntityData.cpp \
    Entity.cpp \
    CharacterData.cpp \
    main.cpp

FORMS += MainWindow.ui \
    NewGameDialog.ui \
    StatisticsDialog.ui \
    StatisticWidget.ui \
    MonsterJournalWidget.ui \
    InventoryDialog.ui

RESOURCES += \
    icons/icons.qrc \
    tiles/tiles.qrc

RESOURCES += \
    entities/entities.qrc 
```

我的问题是所有`tests`项目都使用项目中的类`app`，这意味着它们正在编译所有这些类，即使它们在`app`构建时已经被编译。以`layer`测试项目为例：

**层.pro：**

```
QT += testlib
QT -= gui

greaterThan(QT_MAJOR_VERSION, 4) {
    QT += widgets
}

TARGET = tst_LayerTest
CONFIG += console
CONFIG -= app_bundle

TEMPLATE = app

SOURCES += tst_LayerTest.cpp
DEFINES += SRCDIR=\\\"$$PWD/\\\"

HEADERS += "../../app/Entity.h"
SOURCES += "../../app/Entity.cpp" 
```

那么如何将 qmake 指向已经生成的`.o`（和`qrc_`等）文件？为此目的是否有一些 qmake 变量，或者我的项目结构是否存在根本缺陷？`.moc``app`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:11:59.590

您可以在 qmake .pro 文件中使用通配符，以节省维护所有文件名列表的麻烦。

例如，

```
SOURCES += *.cpp 
```

每次运行 qmake 时，该模式`*.cpp`都会扩展为与该模式匹配的当前文件列表。

`-=`如果您有要排除的特定文件名，您还可以使用删除文件名。

例如：

```
SOURCES += *.cpp
SOURCES -= main.cpp 
```

**编辑**

我几乎在我之前的回答中建议您使用 qt 的 lib 模板引入一个库来包含您的公共代码。

然后您的构建结构将如下所示 - 假设您可以将文件从 app/ 移动到 lib/：

```
game
    game.pro
    app
        app.pro
        main.cpp
    lib
        lib.pro
        Entity.h
        Entity.cpp
        Entity.o
        moc_Entity.cpp
        moc_Entity.o
    tests
        layer
            layer.pro
            tst_Layer.cpp 
```

您可以[在 Qt 网站的“构建库”中找到有关库项目的一些信息](http://doc.qt.digia.com/qt/qmake-common-projects.html#building-a-library)

如果由于某种原因，您无法移动文件，那么您可以为库引入一个新目录，并让它从 app 目录中拉取源文件 - 但这肯定更荒谬，更令人困惑：

```
game
    game.pro
    app
        app.pro - builds only main.o
        main.cpp
        Entity.h
        Entity.cpp
        moc_Entity.cpp
    lib
        lib.pro
        Entity.o
        moc_Entity.o
    tests
        layer
            layer.pro
            tst_Layer.cpp 
```

**编辑 2**

您遇到的一个问题是将目标文件放入 LIBS 变量中，该变量定义了您的代码将链接到哪些库。这就是为什么您会收到这些文件错误的原因。

尝试将那些 LIBS 使用改为 OBJECTS，它可能会起作用。

如果没有，请阅读这个[线程](http://www.qtcentre.org/archive/index.php/t-48959.html)，它的要求几乎相同。

特别是，请参阅“2012 年 5 月 13 日 10:14”的 ChrisW67 的回答，该回答开始了；

> 尝试：
> 
> 对象 += f1.o f2.o f3.o f3.o
> 
> 尽管我认为，如果您有源代码，直接或通过库将其构建到您的应用程序中是一个更好的选择。

# python - Python中的变量范围

> ID：13787666
> 
> 赞同：1
> 
> 时间：2012-12-09T13:11:17.947
> 
> 标签：python, maya

我对 Python 变量的范围有一个疑问。这是我在 Maya 中使用 pymel 编写的脚本。这个 readyButton 函数在 classA 里面

```
import pymel as pm

def readyButton(self,*args):
    previewMode = pm.button('previewBttn',q=True,bgc=True)
    if previewMode == [0,0,0] :
        pm.button('previewBttn',e=True,bgc =[.608,0,.157],l='On used')
        if (globals().has_key('objList') == False):
            exec('objList = {}') in globals() 
```

当我检查它时，使用相同的

```
globals().has_key('objList') 
```

它在类外返回 False 值，在类 A 内返回 True。我还需要这个变量来使用classB，那么我怎样才能在全局变量中声明它呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:37:07.493

请注意`has_key()`，在 Python 2.7 中不推荐使用`k in d`

请问 和 的返回值是`'A' in globals()`多少`'B' in globals()`？

# java - 代码中的 MultiSelectListPreference

> ID：13787671
> 
> 赞同：1
> 
> 时间：2012-12-09T13:12:09.610
> 
> 标签：java, android, sharedpreferences, preferenceactivity

我想知道如何在代码中使用**MultiSelectListPreference首选项。**

以下代码取自 API 示例文件 PreferencesFromCode.java，如果有人可以为 MultiSelectListPreference 提供类似的示例，您会很高兴:)

```
// List preference
ListPreference listPref = new ListPreference(this);
listPref.setEntries(R.array.entries_list_preference);
listPref.setEntryValues(R.array.entryvalues_list_preference);
listPref.setDialogTitle(R.string.dialog_title_list_preference);
listPref.setKey("list_preference");
listPref.setTitle(R.string.title_list_preference);
listPref.setSummary(R.string.summary_list_preference);
dialogBasedPrefCat.addPreference(listPref); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:47:20.747

我在网上找不到任何例子，但我把它放在一起，它可以工作。

**编辑：**此解决方案仅适用于 ICS+。Honeycomb 完全忽略 .setValues() 并且传递给侦听器的 HashSet 包含不同的值。这是一个已知的错误，但我希望这能帮助想要在 Android v4+ 中实现的人

```
 MultiSelectListPreference listPreference = new MultiSelectListPreference(context);
    listPreference.setTitle(R.string.configure_category_title);
    listPreference.setDialogTitle(R.string.configure_category_title);
    listPreference.setSummary(R.string.configure_category_summary);
    listPreference.setEntries(R.array.configure_category_array);
    listPreference.setEntryValues(new CharSequence[]{
            ProcessList.PREF_SERVICES + mAppWidgetId,
            ProcessList.PREF_INACTIVE + mAppWidgetId,
            ProcessList.PREF_INTERNAL + mAppWidgetId
    });

    //Create a Set<String> with list items that should be selected
    SharedPreferences sharedPref = PreferenceManager.getDefaultSharedPreferences(context);
    boolean showServices = sharedPref.getBoolean(ProcessList.PREF_SERVICES + mAppWidgetId, true);
    boolean showInactive = sharedPref.getBoolean(ProcessList.PREF_INACTIVE + mAppWidgetId, true);
    boolean showInternal = sharedPref.getBoolean(ProcessList.PREF_INTERNAL + mAppWidgetId, true);

    String[] strings = new String[3];
    int cnt = 0;
    if (showServices)
        strings[cnt++] = ProcessList.PREF_SERVICES + mAppWidgetId;
    if (showInactive)
        strings[cnt++] = ProcessList.PREF_INACTIVE + mAppWidgetId;
    if (showInternal)
        strings[cnt] = ProcessList.PREF_INTERNAL + mAppWidgetId;

    Set<String> mySet = new HashSet<String>();
    Collections.addAll(mySet, strings);

    //Add the set
    listPreference.setValues(mySet);

    //Listen for changes, I'm not sure if this is how it's meant to work, but it does :/
    listPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
        public boolean onPreferenceChange(Preference preference, Object o) {

            HashSet hashSet = (HashSet) o;
            Iterator stringIterator = hashSet.iterator();
            boolean[] states = {false, false, false};
            String prefString;

            while (stringIterator.hasNext()) {

                prefString = (String) stringIterator.next();

                if (prefString == null)
                    continue;

                if (prefString.compareTo(ProcessList.PREF_SERVICES + mAppWidgetId) == 0)
                    states[0] = true;
                else if (prefString.compareTo(ProcessList.PREF_INACTIVE + mAppWidgetId) == 0)
                    states[1] = true;
                else if (prefString.compareTo(ProcessList.PREF_INTERNAL + mAppWidgetId) == 0)
                    states[2] = true;

            }

            PreferenceManager
                    .getDefaultSharedPreferences(getActivity())
                    .edit()
                    .putBoolean(ProcessList.PREF_SERVICES + mAppWidgetId, states[0])
                    .putBoolean(ProcessList.PREF_INACTIVE + mAppWidgetId, states[1])
                    .putBoolean(ProcessList.PREF_INTERNAL + mAppWidgetId, states[2])
                    .commit();

            return true;
        }
    });

    preferenceCategory.addPreference(listPreference); 
```

# assembly - 在程序集中增加起始打印地址

> ID：13787675
> 
> 赞同：0
> 
> 时间：2012-12-09T13:12:33.523
> 
> 标签：assembly, masm

我有以下代码：

```
mov   ecx, 0
mov   eax, offset ReadWritten
RottenApple:
    push ecx
    push eax

    push 0
    push eax
    push 1
    push offset bytearray
    push consoleOutHandle
    call WriteConsole

    pop eax
    pop ecx
    inc     ecx
    inc     eax
    cmp     ecx, 10
    jne     RottenApple 
```

目的是打印，如果用户输入的是“123456”，拳头 1，然后是 2，等等……但它只打印 10 个 1。增加偏移量有什么问题，为什么没有任何区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:29:45.710

请注意，`eax`它被调用破坏`WriteConsole`（它将包含返回值），因此您必须像使用`ecx`.

**更新**：

仔细观察，您调用的`WriteConsole`是错误的参数。正如您在问题中所说，您想增加偏移量，但您没有这样做。尝试类似：

```
 mov   ecx, 0
    mov   eax, offset bytearray
RottenApple:
    push ecx
    push eax

    push 0
    push offset ReadWritten
    push 1
    push eax
    push consoleOutHandle
    call WriteConsole

    pop eax
    pop ecx
    inc     ecx
    inc     eax
    cmp     ecx, 10
    jne     RottenApple 
```

# iphone - 使用 CGAffineTransformTranslate 移动视图时如何获取当前中心点？

> ID：13787679
> 
> 赞同：0
> 
> 时间：2012-12-09T13:13:05.327
> 
> 标签：iphone, transform, frame, cgaffinetransform, nslog

我使用 移动视图`CGAffineTransformTranslate`，当我使用时`NSlog: view.center.x`，这个值在我移动时不会改变吗？但是我`NSlog: view.frame.orgin.x`，这个当前值总是在我移动的时候改变！那么，移动时如何获取当前值中心呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T13:29:30.817

你必须得到框架的中心。这可以相当容易地完成。

定义一个这样的函数：

```
CGPoint CGRectCenter(CGRect rect)
{
    return CGPointMake(CGRectGetMidX(rect), CGRectGetMidY(rect));
} 
```

然后您可以通过以下方式获得视图的中心：

```
CGRectCenter(view.frame); 
```

编辑：

我刚刚查看了[property的](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW5)[文档`frame`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW5)，它说如果应用了转换，则 value`frame`是未定义的。您可能会更好地使用`view.layer.frame`，因为 CALayer 的文档没有带有相同的警告。然而，我怀疑 UIView 方法只是调用 CALayer 方法，所以你可能没问题。

# jsp - 模型从spring控制器传递到jsp，添加一些属性并传递给另一个控制器，不起作用

> ID：13787681
> 
> 赞同：2
> 
> 时间：2012-12-09T13:13:39.377
> 
> 标签：jsp, spring-mvc, modelattribute

该过程是：在表格中显示收到的消息列表，每个消息前面都有一个回复链接。紧迫的答复转到此控制器：

```
 @RequestMapping("/createMessage")
public String createMessage(@RequestParam("receiver") String receiver, HttpSession session, Model model){
  try{  

    Message message = new Message();
    //sender, Date, and receiver are known and are added to the object      

    model.addAttribute(message);

    return "newMessage";

  } catch (Exception e){
        model.addAttribute("message", "Can't create message!");
        return "error"; 
  } 
```

newMessage.jsp 如下。它接收模型，因为正确填写了 from:、To: 和 Date: 字段：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Send Message</title>
</head>
<body>
<form:form modelAttribute="message" method="POST" action="sendMessage">
<table border="1">
<tr>
  <th>To: </th><td>${message.userName}</td>
</tr>
<tr>
  <th>from: </th><td>${message.fromUser}</td>
</tr>
    <tr>
  <th>Date: </th><td>${message.messageDate}</td>
</tr>
<tr>
  <th>Message</th>
  <td>
    <form:textarea path="message"/>
  </td>            

</table>
<input type="submit" value="send Message">
</form:form>  

</body>
</html> 
```

当按下发送按钮时，以下控制器负责在数据库中创建对象（使用 Hibernate），但它给出了“fromUser 列不能为空”的错误。表明与数据库的连接正在工作，但对象未传递给此控制器。为什么？

```
@RequestMapping("/sendMessage")
public String sendMessage(HttpSession session,@ModelAttribute("message") Message message, Model model){

    try{
    MessageDAO mDao = new MessageDAO();
    Message message2 = mDao.create(message);

    model.addAttribute("message", "Message was sent");
    return "success";

    } catch(Exception e){
        model.addAttribute("message", "Can't create message!");
        return "error";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:25:15.790

调试您的 sendMessage 例程。您的表单仅包含消息字段，其他字段在技术上不是表单的一部分。要么您想将您的消息对象存储到会话中，以便 java bean 在两个请求中存活，要么您可以重复 userName、fromName 等作为隐藏字段，因此它们被映射到为 sendMessage 创建的新请求 bean。

# php - 'while(doSome())' 我可以这样做吗？

> ID：13787682
> 
> 赞同：0
> 
> 时间：2012-12-09T13:13:49.627
> 
> 标签：php

所以...

```
class postQuery {

public function __construct($args = NULL){

    $post_type = $args['post_type'];
    $limit = $args['limit'];
    $category = $args['cat'];

    global $sql;

    $sql = $sql->query('SELECT * FROM posts');
    $sql = $sql->fetchAll(PDO::FETCH_ASSOC);
}

public function havePosts() {

    global $sql;
    global $rowNum;

    $rowNum = 0;
    $rowMax = count($sql);

    while($rowNum <= $rowMax) {
        return $rowNum;
        $rowNum++;
    }

}
} 
```

havePosts() 函数应该在 $rowNum < $rowMax... 时运行...到目前为止一切正常...

但现在，我想用这个函数创建一个 while 语句，如下所示：

```
$con = new postQuery();

while($con->havePosts()){
    global $sql;
    global $rowNum;

    return $sql[$rowNum]['title'];
} 
```

如何在函数中一一返回我的 WHILE 给出的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:17:49.557

您的`postQuery`课程可能如下所示：

```
class postQuery() {

  private $currentRow = 0;

  public function havePosts() {
    global $sql;
    if ($this->currentRow == count($sql) - 1)
      return FALSE;
    $this->currentRow++;
    return $this->currentRow - 1;
  }
} 
```

然后你可以循环浏览帖子：

```
while(($rowNum = $conn->havePosts()) !== FALSE) {
  echo $sql[$rowNum]['title'];
} 
```

请注意，我的示例根本不是最佳实践。您应该避免使用全局变量和可以存储到类成员变量（例如`count($sql)`）的大量数据。您还应该修复我的算术，以避免使用像`$this->currentRow + 1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:24:51.173

将结果放入数组并返回该数组，您可以稍后访问

```
public function havePosts() {
  global $sql;
  global $rowNum;

  $rowNum = 0;
  $rowMax = count($sql);
  $titles=array();
 while($con->havePosts()){
    global $sql;
    global $rowNum;

   $titles[]= $sql[$rowNum]['title'];
  }

  return $titles; 
```

}

# php - accdb 和 PDO php 连接错误

> ID：13787686
> 
> 赞同：0
> 
> 时间：2012-12-09T13:14:20.257
> 
> 标签：php, database, pdo

我正在尝试使用 PDO（在 localhost - xampp 上）创建一个简单的连接：

```
<?php
try{
   // Connect
   //$dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=.\db\icr.accdb;Uid=Admin");
   $dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=C:\xampp\htdocs\bd\db\icr.accdb;Uid=Admin");

    /*** The SQL SELECT statement ***/
    $sql = "SELECT * FROM Miasta";
    foreach ($dbh->query($sql) as $row)
        {
        print $row['Nazwa'] .' - '. $row['IDWojewództwa'] . '<br />';
        }

    /*** close the database connection ***/
    $dbh = null;
}
catch(PDOException $e)
    {
    echo $e->getMessage();
    }
?> 
```

但后来我得到这个错误：

```
SQLSTATE[HY000] SQLDriverConnect: 63 [Microsoft][Driver ODBC Microsoft Access]General error Unable to open registry key  Temporary (volatile) Ace DSN for process 0x5f8 Thread 0x1124 DBC 0x3608134 Jet. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T17:32:07.970

非常感谢vodich，这是解决方案：

```
$dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};Dbq=C:\\xampp\\htdocs\\bd\\db\\icr.accdb;Uid=Admin"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:51:11.973

这个怎么样

```
 PDO("odbc:Driver={Microsoft Access Driver (*.mdb)};
      Dbq=C:\xampp\htdocs\bd\db\icr.accdb;Uid=Admin"); 
```

# google-chrome - Teamcity showAgreement.html 有太多重定向

> ID：13787689
> 
> 赞同：1
> 
> 时间：2012-12-09T13:14:29.163
> 
> 标签：google-chrome, redirect, teamcity

我刚刚在我的 ubuntu 上安装了 Teamcity 7.1.2。当我启动teamcity时，它正在配置一些东西，然后它显示以下站点：

localhost:8111/showAgreement.html 出现以下错误：

Fehler 310 (net::ERR_TOO_MANY_REDIRECTS)：Zu viele Umleitungen。

我使用谷歌浏览器，但我用 safari 和 firefox 对其进行了测试。

我在 vm fusion 虚拟环境中使用 Ubuntu 12.04。

有人知道我该如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:31:50.120

嗯..好的，我现在从计算机中删除了teamcity，再次重新启动它并再次安装了teamcity，看看它，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T09:20:49.763

对我来说，当 Teamcity 没有对其安装目录的写入权限时，就会发生这种情况。

执行“chown teamcity-user:teamcity-user teamcity-top-dir”为我解决了这个问题。无需重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-02T16:39:21.493

在 docker 上，运行已安装的文件夹：

```
chown -R 1000:1000 data/ log/ 
```

# java - 将 Eclipse 插件项目转换为 Eclipse RCP 应用程序

> ID：13787700
> 
> 赞同：2
> 
> 时间：2012-12-09T13:15:47.057
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, eclipse-juno

我有一个不同插件的列表（它们一起构成一个 Eclipse 插件），我想从它们创建一个 Eclipse 4 Juno RCP 应用程序。这样做的步骤是什么？

在此先感谢和亲切的问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T14:06:18.957

您基本上可以在[这里](http://www.vogella.com/articles/EclipseRCP/article.html#plugin_creatinge4)按照 Lars Vogel 的说明进行操作。

他正在描述如何**将**Eclipse 插件转换**为 Eclipse 4 应用程序**。

*就像添加的 tkotisis：*按照 Vogella 的描述创建应用程序后，您需要将所有插件添加到一个或多个功能。然后将它们包含在您的产品配置中。

# c++ - 在 C++ 中比较 2 个日期

> ID：13787702
> 
> 赞同：6
> 
> 时间：2012-12-09T13:16:48.803
> 
> 标签：c++

我想知道 C++ 中是否有任何相对简单和简短的日期比较函数。我的日期类型为`char*`，格式如下：`DD\MM\YYYY`

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:41:42.967

Parsing is usually done on streams, not strings, but you can use a `stringstream`.

```
std::istringstream date_s( "04\\10\\1984" );
struct tm date_c;
date_s >> std::get_time( &date_c, "%d\\%m\\%Y" );
std::time_t seconds = std::mktime( & date_c ); 
```

Now you can compare seconds using `<` to determine which was earlier.

Note, [`std::get_time`](http://en.cppreference.com/w/cpp/io/manip/get_time) is new in C++11\. It is defined in terms of `strptime`, which is from POSIX but not part of the C99 standard. You can use [`strptime`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strptime.html) if a C++11 library is not available. If you're brave, you can also use the `std::time_get` facet… it's ugly though.

If you don't want to know anything about the dates other than which is earlier, you can use `std::lexicographical_compare`. It would be a one-liner but the function name is so long.

```
// return true if the date string at lhs is earlier than rhs
bool date_less_ddmmyyyy( char const *lhs, char const *rhs ) {
    // compare year
    if ( std::lexicographical_compare( lhs + 6, lhs + 10, rhs + 6, rhs + 10 ) )
        return true;
    if ( ! std::equal( lhs + 6, lhs + 10, rhs + 6 ) )
        return false;
    // if years equal, compare month
    if ( std::lexicographical_compare( lhs + 3, lhs + 5, rhs + 3, rhs + 5 ) )
        return true;
    if ( ! std::equal( lhs + 3, lhs + 5, rhs + 3 ) )
        return false;
    // if months equal, compare days
    return std::lexicographical_compare( lhs, lhs + 2, rhs, rhs+2 );
} 
```

See also [how to convert datetime to unix timestamp in c?](https://stackoverflow.com/questions/1002542/how-to-convert-datetime-to-unix-timestamp-in-c) .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T13:51:42.200

如果这真的是一个固定格式，你可以通过简单的 C 字符串比较来做到这一点

```
int date_cmp(const char *d1, const char *d2)
{
    int rc;
    // compare years
    rc = strncmp(d1 + 6, d2 + 6, 4);
    if (rc != 0)
        return rc;

    // compare months
    rc = strncmp(d1 + 3, d2 + 3, 2);
    if (rc != 0)
        return rc;

    // compare days
    return strncmp(d1, d2, 2);
} 
```

这就像[`strncmp`](http://linux.die.net/man/3/strncmp). `d1`如果早于，则返回小于 0 的值`d2`，如果两者是相同日期则返回 0 ，如果`d1`晚于则返回大于 0 的值`d2`。

另一种方法是将其转换为[`strptime`](http://linux.die.net/man/3/strptime)and [`mktime`](http://linux.die.net/man/3/mktime)to`time_t`并将它们与[`difftime`](http://linux.die.net/man/3/difftime)

```
struct tm tm;
time_t t1, t2;
strptime(d1, "%d\\%m\\%Y", &tm);
t1 = mktime(&tm);
// do the same with d2
double diff = difftime(t1, t2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:47:53.057

You need to extract the numeric data from the string. Worst case scenario is a bunch of loops and string to integer conversion functions.

You can do it easily with sscanf and sprintf. If you're used to [`printf`](http://en.cppreference.com/w/cpp/io/c/fprintf) and [`scanf`](http://en.cppreference.com/w/cpp/io/c/fscanf) then this is simple to understand, and you can easily adapt it to other cases. There are no secret magic function calls.

```
#include <stdio.h>
void main()
{
    char* date1 = "9\\12\\2012"; 
    char* date2 = "6\\11\\2013"; 

    int day1,month1,year1;
    int day2,month2,year2;

    sscanf(date1,"%d\\%d\\%d",&day1,&month1,&year1); //reads the numbers
    sscanf(date2,"%d\\%d\\%d",&day2,&month2,&year2); //from the string

    if (year1<year2 || month1<month2 || day1<day2) //compares 2 dates
    {
        printf("date1 < date2\n");
    }
    else
    {
        printf("date1 >= date2\n");
    }

    char newdate[15];

    sprintf(newdate,"%d\\%d\\%d",13,2,1998); //make a date string from numbers
    printf("%s\n",newdate);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-31T21:01:43.347

一个有效的解决方案怎么样？如果您忽略斜线，您的固定大小日期只需要 8 个字符。因此，通过一些移位和字节交换，您可以将它们与 64 位整数进行比较。这比作为字符串进行比较要快。

```
using std::cout;
using std::endl;
typedef unsigned __int16 U2;
typedef unsigned __int32 U4;
typedef unsigned __int64 U8;
#define bswap2 _byteswap_ushort
#define bswap4 _byteswap_ulong
#define bswap8 _byteswap_uint64

const int YYYYMMDD = 0;
const int YYYY_MM_DD = 1;
const int DDMMYYYY = 2;
const int DD_MM_YYYY = 3;

// compiler will optimize the if's out.
template <int FMT>
U8 DateToInt(char* sz) {
    if (FMT == YYYYMMDD) {
        return bswap8(*(U8*)sz);
    }
    if (FMT == YYYY_MM_DD) {
        U4 y = *(U4*)sz, m = *(U2*)(sz + 5), d = *(U2*)(sz + 8);
        return ((U8)bswap4(y) << 32) | (bswap2(m) << 16) | bswap2(d);
    }
    if (FMT == DD_MM_YYYY) {
        U4 y = *(U4*)(sz + 6), m = *(U2*)(sz + 3), d = *(U2*)sz;
        return ((U8)bswap4(y) << 32) | (bswap2(m) << 16) | bswap2(d);
    }
}

template<int FMT1, int FMT2 = FMT1>
__int64 CompareDate(char* sz1, char* sz2) {
    return DateToInt<FMT1>(sz1) - DateToInt<FMT2>(sz2);
}

void main() {
    cout << CompareDate<YYYYMMDD>("20151025", "20151026") << endl;
    cout << CompareDate<YYYYMMDD>("20151025", "20151024") << endl;
    cout << CompareDate<YYYYMMDD, YYYY_MM_DD>("20151025", "2015/10/26") << endl;
    cout << CompareDate<YYYYMMDD, YYYY_MM_DD>("20151025", "2015/10/24") << endl;
    cout << CompareDate<YYYYMMDD, DD_MM_YYYY>("20151025", "26/10/2015") << endl;
    cout << CompareDate<YYYYMMDD, DD_MM_YYYY>("20151025", "24/10/2015") << endl;
} 
```

输出

```
-1
1
-1
1
-1
1 
```

# c++ - 导致 .exe 中的错误的警告？

> ID：13787706
> 
> 赞同：0
> 
> 时间：2012-12-09T13:17:15.087
> 
> 标签：c++, warnings

嘿，我只是想知道这些警告中的任何一个是否会导致 .exe 在启动时崩溃。以下是警告：

```
Warning 1   warning C4244: '=' : conversion from 'double' to 'int', possible loss of data   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\stats.cpp 54  1   MaroonedCA2
Warning 2   warning C4244: 'argument' : conversion from 'time_t' to 'unsigned int', possible loss of data   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\player.cpp    75  1   MaroonedCA2
Warning 3   warning C4244: 'argument' : conversion from 'time_t' to 'unsigned int', possible loss of data   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\player.cpp    92  1   MaroonedCA2
Warning 4   warning C4018: '<' : signed/unsigned mismatch   c:\users\conor\documents\college\dkit - year 2 - repeat\dkit - year 2 - semester 1 - repeat\games programming\maroonedca2\maroonedca2\inventory.cpp 63  1   MaroonedCA2 
```

**1**

```
int stats[SIZE];
    stats[0] = Status.health;
    stats[1] = Status.strength;
    stats[2] = Status.hitpoints;
    stats[3] = Status.armour;
    stats[4] = Status.luck; 
```

运气是双重的，没有被铸造。

**2**

```
 int Player :: hitPoints()
    {
        srand(time(0)); // seed random number generator based on current time
        int randomNumber= rand(); // generate random number
        int hitPoints = (randomNumber% 15) + 1; // get a number between 1 and 20
        return hitPoints;
    } 
```

**3**

```
int Player :: fatigue()
{
    srand(time(0)); // seed random number generator based on current time
    int randomNumber= rand(); // generate random number
    int fatigue = (randomNumber% 5) + 1; // get a number between 1 and 5
    return fatigue;
} 
```

**4**

```
for (int i= 0; i< inventory.size(); ++i)
        cout<< inventory[i] << endl;
    }
    cout << "\n-----------------------------------------\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:25:21.287

我能看到的唯一一个真正有可能导致崩溃的将是最后一个。如果`inventory.size() > INT_MAX`，那么在一个典型的实现中，你最终会从一个负索引中读取。

假设您的程序实际上在启动过程中崩溃了，但如果这是问题的根源，我会感到相当惊讶。这更像是一种理论上的可能性，而不是可能的问题来源。首先，在启动时，我猜inventory.size() 可能是0，所以不会发生溢出。其次，我猜你只显示库存以响应命令，而不是在启动期间 - 所以这段代码可能不会在启动期间执行。

其他人有问题，但根本没有可能导致崩溃的问题。

例如，您的示例 #2 和 #3 使用不正确 - 大多数正常程序，几乎`srand`可以肯定包括这个，应该在程序启动时只调用一次，并且永远不会再次调用它*。*这将导致您的“随机”数字比应有的更可预测，但不会崩溃。`srand`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:22:31.977

单独来看，这些警告都不会导致崩溃。但是，它们可能会导致其他函数被错误地调用，这些函数对意外值的响应不佳。

您应该获得崩溃的堆栈跟踪，以了解它发生的原因。调试是一个单独的主题，您可以通过 Google 获得大量信息 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:28:16.710

你的程序会崩溃吗？

好吧，通常这些警告不会引起太多问题，除非例如您错过了程序中的一些特殊情况，例如将 double 转换为 int 但不检查此 int 是否变为 0 并且除以 0。

让我们来看看所有的警告：

```
Warning 1   warning C4244: '=' : conversion from 'double' to 'int', possible loss of data 
```

很明显， int 不能存储 double 的所有值，但只要记住它可能已成为可能导致问题的值（如转换为 0），转换它就没有错，但这取决于你用你的 int 做什么。尝试`int toint = static_cast<int>(yourdouble);`不应该发出警告。

```
Warning 2   warning C4244: 'argument' : conversion from 'time_t' to 'unsigned int', possible loss of data 
```

time_t 通常有 8 个字节，uint 只有 4 个，所以显然它不能在里面存储所有信息。当您期望一个值但您得到一个不同的值时，数据丢失可能会导致混乱。

```
Warning 4   warning C4018: '<' : signed/unsigned mismatch 
```

再次没有问题。它只是告诉您，一方面可能是负值，另一方面是不可能的，或者一侧的最大值高于另一侧的最大值。非常常见的警告，通常是由于程序员在只需要无符号时将整数定义为无符号的懒惰而发生的。

编辑：我假设您使用的是 VC。这是一个关于如何忽略警告的示例，如果您确定无法摆脱它们并且可以完全安全地忽略它们（我强烈建议使用 once 参数）：

[http://msdn.microsoft.com/en-us/library/2c8f766e(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/2c8f766e(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T13:38:54.797

每个警告都表明有些事情不太正确。这可能会影响其他代码。

* * *

在 …

```
int stats[SIZE];
stats[0] = Status.health;
stats[1] = Status.strength;
stats[2] = Status.hitpoints;
stats[3] = Status.armour;
stats[4] = Status.luck; 
```

使用`Status.luck`of type `double`，您要么丢失信息，要么使用过于通用的类型。信息丢失可能会导致以后崩溃。过于笼统的类型可能会导致其他地方出现错误。

修复取决于这两种可能性中的哪一种。

* * *

在

```
int Player :: hitPoints()
{
    srand(time(0)); // seed random number generator based on current time
    int randomNumber= rand(); // generate random number
    int hitPoints = (randomNumber% 15) + 1; // get a number between 1 and 20
    return hitPoints;
} 
```

你依赖于从类型`time(0)`到参数类型的隐式转换`srand`。

`time`作为游戏的熵源可能是可以的（但对于重复调用的掷骰子程序则不行）。但一定要`static_cast`在这里使用。到*记录*的形式参数类型。

* * *

在

```
int Player :: fatigue()
{
    srand(time(0)); // seed random number generator based on current time
    int randomNumber= rand(); // generate random number
    int fatigue = (randomNumber% 5) + 1; // get a number between 1 and 5
    return fatigue;
} 
```

您正在*重新初始化*随机数生成器。这很可能是一个错误。我无法想象您希望每次玩家感到疲劳时都重复相同的行为。

* * *

在

```
for (int i= 0; i< inventory.size(); ++i)
    cout<< inventory[i] << endl;
    }
cout << "\n-----------------------------------------\n"; 
```

您缺少一些大括号或大括号，和/或缩进问题。不幸的是它编译了。但修复它。

有*符号/无符号不匹配*是关于有符号`i`与无符号`size_t`的比较`inventory.size()`。在某些情况下，这可能会导致令人讨厌的错误。例如，表达式

```
string( "hello" ).size() < -3 
```

`true`由于**隐式提升**为无符号类型，将始终为，`-3`并带有环绕。这是非常愚蠢的。非常值得关注。

循环的最佳解决方法是使用`size`将大小值转换为有符号的函数，例如

```
typedef ptrdiff_t Size;

template< class Item >
Size size( std::vector<Item> const& v ) { return v.size(); } 
```

然后

```
for (int i= 0; i < size( inventory ); ++i)
{
    cout<< inventory[i] << endl;
} 
```

这集中了解决方案，以便它适用于所有未来的代码。

将循环控制变量更改为无符号类型只会将问题（特别是隐式转换问题）推到另一个地方。请注意，通常您*不会收到*有关此类隐式转换的任何警告。大多数编译器只对直接比较发出警告。

对于更通用的`size`功能，您可以将其定义为

```
template< class Container >
Size size( Container const& c ) { return end( c ) - begin( c ); } 
```

哪里`begin`和`end`是`<utility>`头文件中的 C++11 函数。*

# java - 如何在java中开发服务器端分页？

> ID：13787711
> 
> 赞同：0
> 
> 时间：2012-12-09T13:17:36.687
> 
> 标签：java, search-engine

我用java开发了一个搜索引擎。在服务器端使用 java Servlet。问题是每个查询都会出现大量结果。每个结果都表示为一个字符串。如何实现服务器端分页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T17:30:26.233

分页的一般思想是使用跳过/限制参数。您应该通过检查此参数将跳过/限制参数设置到客户端和服务器端的查询中，您应该返回预期的结果。

参数说明如下：

```
skip : skips the number of results and return the others
limit : return the given number of results. 
```

例如：假设您的查询返回 25 结果并且您想对其进行分页。然后，对于您的第一页，您应该通过检查此参数在客户端和服务器端设置 skip=0、limit=10，您应该跳过 0 结果并返回其中的 10 个。然后它将返回第一页的 0-9 之间的结果。

For second page, you should send query with skip=10, limit=10 and result will be between 10-19.

For last page your query will be skip=20, limit=10 and it will return you the results between 20-25.

This is the general idea how pagination work. To use pagination you should implement it by yourself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:19:36.033

如果您使用过 Spring MCV，请查看此链接：[http ://blog.fawnanddoug.com/2012/05/pagination-with-spring-mvc-spring-data.html](http://blog.fawnanddoug.com/2012/05/pagination-with-spring-mvc-spring-data.html)

大多数 Java 服务器框架应该提供类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:33:32.737

实施取决于您使用的技术，例如您使用缓存、您使用的数据库以及您使用新技术的开放程度

假设您只想使用 servlet...您可以使用 rownum 功能根据页码显示结果单击您的 jsp..

如果您愿意使用新技术....使用 springdata，jparespositiry [http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-seven-pagination/](http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-seven-pagination/)

# css - 在不影响子 div 的情况下使用 CSS 悬停更改颜色

> ID：13787719
> 
> 赞同：0
> 
> 时间：2012-12-09T13:18:19.307
> 
> 标签：css, hover

我最初的问题涉及 div 内的引导图标，它会在悬停时改变颜色。为简单起见，我使用以下代码制作了 jsfiddle 来解释问题

html:

```
<div id="parent">
    <div id="child">
    </div>
</div>​ 
```

CSS：

```
#parent{
 background-color:red;
 width:100px;
 height:100px;   
}

#parent:hover #child{
 background-color:blue;  
 display:block;    
}
#child{
 background-color:transparent;  
 width:10px;
 height:10px;  
 display:none;
 border: 1px solid black;
} 
```

jsfiddle 可以在[这里找到](http://jsfiddle.net/qTdkt/1/)

**问题**：

这段代码的结果不是我想要完成的。我想`#child`出现`background-color: tranparent`，但`#parent`将颜色更改为蓝色。

我知道我`:hover`错了，但是如何在一个上应用 2 种不同的东西`:hover`（改变颜色`#parent`和显示`#child`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:23:44.973

你必须使用两个选择器，你不能只用一个，所以你可以写如下内容：

```
#parent:hover{
 background-color:blue;   
}
#parent:hover #child {
 display:block;
} 
```

**演示：http:** [//jsfiddle.net/qTdkt/2/](http://jsfiddle.net/qTdkt/2/)

# github - 使用 GitHub 作为教程项目的代码存储库

> ID：13787720
> 
> 赞同：1
> 
> 时间：2012-12-09T13:18:27.600
> 
> 标签：github

我正在计划一个项目，并且想知道使用 GitHub 作为项目的代码存储库是否是个好主意。

该项目只是我一步一步创建一个应用程序。事实上，这更像是我学习如何去做，记录我的过程，让其他人跟着做。

所以第 1 步可能是设置项目，第 2 步如何组织文件，第 2 步连接到数据库，第 3 步如何做 UI 等等。（顺便说一句。这不是项目的设置方式）

该文档将包含一个网站，其中包含每个步骤的文章，以及每个步骤，我希望访问者能够下载/查看项目的代码，直到我们在这个过程中。

我不知道如何使用 GitHub，但我也打算学习它。GitHub 是共享此类项目代码的好方法吗？

GitHub 中有没有办法拍摄快照，例如第 1 步、第 2 步等，或者为此使用分支或分叉会更好？

如果我在第一步中发现错字，一个不错的功能是能够更正整个步骤链。

有谁知道以类似方式设置的现有 GitHub 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:45:38.503

您可以使用 GitHub，前提是您还为每个重要步骤推送**标签**。
（如“[如何使用 github 标签为我的项目创建下载？](https://stackoverflow.com/questions/5312651/how-do-i-use-github-tags-to-create-downloads-for-my-project) ”中所述）

这样，您可以为每个标签提供下载链接，即使对于没有安装 Git 的读者也是如此。

请参阅“[所有下载。一个大按钮。](https://github.com/blog/729-all-of-your-downloads-one-big-button) ”

![下载](../Images/8600b1391b37fb2986e796e5f491519f.png)

# android - 模拟器和手机的android屏幕设置

> ID：13787721
> 
> 赞同：0
> 
> 时间：2012-12-09T13:18:40.167
> 
> 标签：android, android-emulator

我正在为我的手机（三星 Galaxy i8150 W）开发应用程序。我应该为真屏幕使用哪些设置。我的手机是3.7寸的。屏幕 480x800 像素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:18:21.940

如果我正确理解了您的问题：“启动”您的 AVD，然后将出现“启动选项”，然后切换复选框“将显示缩放为实际大小”，设置所需的设置，最后“启动”您的 AVD。

# c# - 试图同时反序列化多个对象

> ID：13787723
> 
> 赞同：-1
> 
> 时间：2012-12-09T13:18:49.437
> 
> 标签：c#, serialization

我试图将一些对象从服务器发送到客户端。我的问题是，当我只发送 1 个对象时，一切正常。但是在我添加另一个对象时，会引发异常-“二进制流不包含有效的二进制头”或“没有对象映射（随机数）”。我的想法是反序列化不了解流的开始/结束位置，我希望你们能在这里帮助我。

这是我的反序列化代码：

```
public void Listen()
        {
            try
            {
                bool offline = true;
                Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal,
                    new Action(() => offline = Offline));
                while (!offline)
                {
                    TcpObject tcpObject = new TcpObject();
                    IFormatter formatter = new BinaryFormatter();
                    tcpObject = (TcpObject)formatter.Deserialize(serverStream);

                    if (tcpObject.Command == Command.Transfer)
                    {
                        SentAntenna sentAntenna = (SentAntenna)tcpObject.Object;

                        int idx = 0;
                        foreach (string name in SharedProperties.AntennaNames)
                        {
                            if (name == sentAntenna.Name)
                                break;
                            idx++;
                        }

                        if (idx < 9)
                        {
                            PointCollection pointCollection = new PointCollection();
                            foreach (Frequency f in sentAntenna.Frequencies)
                                pointCollection.Add(new Point(f.Channel, f.Intensity));

                            SharedProperties.AntennaPoints[idx] = pointCollection;
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message); // raise an event
            }
        } 
```

序列化代码：

```
case Command.Transfer:
                            Console.WriteLine("Transfering");
                            Thread transfer = new Thread(new ThreadStart(delegate
                            {
                                try
                                {
                                    string aName = tcpObject.Object.ToString();
                                    int indx = 0;
                                    foreach (string name in names)
                                    {
                                        if (name == aName)
                                            break;
                                        indx++;
                                    }

                                    if (indx < 9)
                                    {
                                        while (true) // need to kill when the father thread terminates
                                        {
                                            if (antennas[indx].Frequencies != null)
                                            {
                                                lock (antennas[indx].Frequencies)
                                                {
                                                    TcpObject sendTcpObject = new TcpObject();
                                                    sendTcpObject.Command = Command.Transfer;
                                                    SentAntenna sa = new SentAntenna(antennas[indx].Frequencies, aName);
                                                    sendTcpObject.Object = sa;
                                                    formatter.Serialize(networkStream, sendTcpObject);
                                                }
                                            }
                                        }
                                    }
                                }
                                catch (Exception ex) { Console.WriteLine(ex); }
                            }));
                            transfer.Start();
                            break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:13:50.100

有趣的。在您的序列化代码中没有什么特别奇怪的地方，而且我过去曾看到人们对多个对象使用香草连接，尽管我实际上一直建议不要这样做，因为 BinaryFormatter 没有明确声称这种情况是可以的。但是：如果不是，我唯一能建议的就是实现你自己的框架；所以你的写代码变成：

*   序列化为空的 MemoryStream
*   记下长度并将长度写入 NetworkStream，例如作为简单的固定宽度 32 位网络字节顺序整数
*   将有效负载从 MemoryStream 写入 NetworkStream
*   冲洗，重复

读取的代码变为：

*   准确读取 4 个字节并计算长度
*   将那么多字节缓冲到 MemoryStream 中
*   从 NetworkStream 反序列化

（注意在这两种情况下将 MemoryStream 的位置在写入和读取之间设置回 0）

如果您想在读取时避免使用缓冲区，您还可以实现一个限制长度的 Stream 子类，这更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:37:18.530

显然我想出了一个非常简单的解决方案。我只是确保只允许 1 个线程同时传输数据，所以我更改了这行代码：

```
formatter.Serialize(networkStream, sendTcpObject); 
```

到这些代码行：

```
if (!transfering) // making sure only 1 thread is transfering data
{
    transfering = true;
    formatter.Serialize(networkStream, sendTcpObject);
    transfering = false;
} 
```

# android - 从服务提醒用户 (Android)

> ID：13787725
> 
> 赞同：0
> 
> 时间：2012-12-09T13:18:55.210
> 
> 标签：android, android-service, android-notifications, android-notification-bar

所以，我有一个在后台工作的服务（当应用程序关闭时），它每 2 分钟连接到互联网并从数据库中获取一些数据，如果出现问题，我想用某种哔声提醒用户和屏幕上的消息，甚至在通知栏中更好。是否有可能做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:23:16.813

我认为最好的解决方案是使用`SystemBar` [`Notification`](http://developer.android.com/guide/topics/ui/notifiers/notifications.html).

使用 ，[`Notification.Builder`](http://developer.android.com/reference/android/app/Notification.Builder.html)您可以使用 为通知添加自定义声音`setSound(Uri sound)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:21:21.620

您想到的在 Android 中称为“通知”。您可以[在此处](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)找到有关如何创建一些的更多信息。

# linux-kernel - 如何使用wake_up_interruptible

> ID：13787726
> 
> 赞同：6
> 
> 时间：2012-12-09T13:19:03.507
> 
> 标签：linux-kernel

我想知道如何使用wake_up_interruptible，如果它返回无效：[http](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/linux/wait.h#L161) ://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/linux/wait.h#L161 （_wake_up 函数返回无效）。例如，down_interruptible 函数返回 int：[http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/kernel/semaphore.c#L75](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/kernel/semaphore.c#L75)这允许编写这样的代码，例如：

```
if ( down_interruptible(&dev->sem) )
    return -ERESTARTSYS;
// continue: down_interruptible succeeded 
```

当我调用wake_up_interruptible 并且它被中断时，如果它返回void，我怎么知道？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T15:53:44.307

我想正常的使用场景是，在一个线程中：

```
为了 （;;） {
   wait_event_interruptible（等待队列，条件）；
   /* 一些处理 */
}

```

并从其他一些线程：

```
如果（某事发生）
   唤醒中断（等待队列）；

```

这将导致一个`wait_queue`处于`TASK_INTERRUPTIBLE`状态的进程被唤醒和评估`condition`

[在这里](http://www.linuxjournal.com/article/8144)查看更多示例，有点过时的位给出了一个想法

# sql - 从 SQL Server 2008 中的两个表中检索独占记录

> ID：13787729
> 
> 赞同：2
> 
> 时间：2012-12-09T13:19:49.527
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子。`Table2`正在*引用* *EmployeeID*。`Table1`_ 我想**从 Table1 中选择 EmployeeID 不在 Table2 中的记录**。我在 SQL Server2008 中编写了以下 SQL 查询，但它没有显示所需的结果：

 ***```
SELECT distinct e1.EmployeeID 
FROM   Employee as e1, EmployeeTimeIn as e2
WHERE  e1.EmployeeID <> e2.EID; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:21:38.263

使用`LEFT JOIN`和`IS NULL`

```
SELECT  a.*
FROM    Table1 a
        LEFT JOIN Table2 b
            ON a.EmployeeID = b.EmployeeID
WHERE   b.EmployeeID IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/e00a7/1)***

# iphone - 在 MapView 上点击注释时隐藏弹出窗口

> ID：13787731
> 
> 赞同：3
> 
> 时间：2012-12-09T13:20:06.500
> 
> 标签：iphone, objective-c, ios, xcode, mkmapview

我正在创建一个在地图上显示大量图钉的 iPhone 应用程序。我需要该应用程序推送另一个视图，该视图将显示该位置的大量信息，当点击该图钉时。

在我的 viewDidAppear 中，我有一段代码设置引脚的标题和副标题值，仅用于测试目的。

```
-(void)viewDidAppear:(BOOL)animated
{
            pin.title = @"Some title";
            pin.subtitle = @"Some subtitle";
} 
```

在我的 didSelectAnnotationView 委托中，我有一些类似的东西

```
- (void)mapView:(MKMapView *)mapView
didSelectAnnotationView:(MKAnnotationView *)view
{    
    [self performSegueWithIdentifier:@"showPinDetails" sender:self];    
} 
```

现在，当我点击图钉时，会出现一个短暂的弹出窗口，在弹出窗口中显示标题和副标题，然后 segue 推送详细信息视图。当我点击后退按钮以返回地图视图时，弹出窗口仍然可见。我怎样才能以某种方式完全隐藏或禁用弹出窗口？如果我不设置标题和副标题值，则根本不会调用 didSelectAnnotationView 委托。如果您需要我，我很乐意发布额外的代码，我只是想让事情尽可能简单。

我做错了吗？我应该使用一些不同的方法来实现我需要做的事情吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T15:02:33.073

你没有设置`canShowCallout`

**canShowCallout** -> 一个布尔值，指示注释视图是否能够在标注气泡中显示额外信息。

**讨论**-> 如果此属性的值为 YES，则当用户点击选定的注释视图时会显示标准标注气泡

有关更多信息，您可以访问[MKAnnotationView 类参考](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T13:49:24.417

好的，我很愚蠢，添加引脚时我需要做的就是设置引脚属性**canShowCallout**：

```
annotationView.canShowCallout = NO; 
```

# c# - EntityFramework 5 和投影/延迟加载

> ID：13787737
> 
> 赞同：0
> 
> 时间：2012-12-09T13:20:50.590
> 
> 标签：c#, .net, entity-framework, lazy-loading

我有以下 EF 5.0 实体：

```
public class Pack {
  public Int32 Id { get; set; }
  public virtual ICollection<File> Files { get; set; }
} // Pack

public class File {
  public Int32 Id { get; set; }
  public Byte[] Data { get; set; }
} // File 
```

使用通用存储库，我需要获取一个包及其文件 ID，而不是数据。

在我的通用存储库中，我有以下方法：

```
public T First<T>(Expression<Func<T, Boolean>> criteria) where T : class {
  return _context.Set<T>().FirstOrDefault(criteria);
} // First 
```

我正在获取 Pack 并映射到 PackDtoModel，如下所示：

```
Pack pack = _repository.First<Pack>(x => x.Id == packId);

PackDtoModel model = new PackDtoModel  {
  Id = pack.Id,
  FilesIds = pack.Files.Select(x => x.Id).ToList()
} 
```

**这是加载文件数据字段吗？我不要那个！**

我应该使用投影来避免加载文件数据吗？

如果是，如何？第一个方法返回 T 而不是 IQueryable。

我正在使用 Configuration.LazyLoadingEnabled = true ...

使用表拆分我可以使用以下内容：

```
create table dbo.Packs
(
  Id int identity not null
    constraint Packs_Id_PK primary key clustered (Id)
);

create table dbo.Files
(
  Id int not null
    constraint Files_Id_PK primary key clustered (Id),
  Data varbinary (max) filestream null
    constraint Files_Data_DF default (0x),  
  [Key] uniqueidentifier rowguidcol not null
    constraint Files_Key_U unique,      
  Mime nvarchar (200) not null,
    CONSTRAINT Files_ID_Mime_UQ UNIQUE (Id, Mime) 
) filestream_on [STORAGE];

add constraint Files_Id_FK foreign key (Id) references dbo.Packs(Id) on delete cascade on update cascade; 
```

所以文件 ID 与包 ID 相同。

我添加了一个约束，以便文件 ID 和 MIME 是唯一的。

所以现在在我的应用程序中我会使用：GET FILE WITH ID = PACKID & MIME = "image/jpg"。

拿到包的那一刻，我就知道与该包关联的文件的 ID。

我只需要指定我想要的版本（mime）...

你怎么看？

我现在的问题是如何将其映射到实体...

从理论上讲，我仍然应该在一个包中有很多文件：

```
public class Pack {
  public Int32 Id { get; set; }
  public virtual ICollection<File> Files { get; set; }
} // Pack 
```

但是如何设置这种关系呢？

谢谢你，米格尔

# python - Python 3 中数字的格式化显示

> ID：13787739
> 
> 赞同：2
> 
> 时间：2012-12-09T13:20:52.070
> 
> 标签：python, python-3.x

我想知道如何在 Python 3 中截断数字？例如，`87.28197`to `87.281` The standard in Python 2 was using `%`，但不再使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T13:22:41.247

`%`字符串格式化程序在 Python 3 中仍然可用。最好使用字符串`''.format()` [格式化语法](http://docs.python.org/2/library/string.html#format-string-syntax)，它还支持指定浮点精度。

这两项工作：

```
>>> yournumber = 87.28197
>>> "{0:.3f}".format(yournumber)
'87.282'
>>> "%.3f" % yournumber
'87.282' 
```

如果它*只是*您要转换为字符串的一个浮点数，那么该[`format()`函数](http://docs.python.org/3/library/functions.html#format)可能更方便，因为您不需要使用`{0:..}`占位符：

```
>>> format(yournumber, '.3f')
'87.282' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T13:22:14.287

尝试：

```
print("{0:.2f}".format(87.23197)) 
```

另请参阅详细信息的方法[格式](http://docs.python.org/2/library/string.html#formatstrings)。

# actionscript-3 - 动作脚本类

> ID：13787742
> 
> 赞同：1
> 
> 时间：2012-12-09T13:21:14.880
> 
> 标签：actionscript-3, flash

好的，我的问题是我创建了一个名为 alarmclock.fla 的 fla 文件和一个名为 alarmclock.as 的 as 文件

但是我想在另一个名为 mycoursework.fla 的 fla 文件中使用 as 文件

这可能吗？

我试图通过将 mycoursework.fla 上的对象（movieclip）链接到alarmclock.as 来做到这一点，但错误 1120 也出现了未定义属性 clock_txt 和其他各种访问。但是* 我已经为clock_txt 创建了一个实例名称。

我必须在 fla 文件中再次创建 var 吗？还是因为我已经将它链接到一个对象？

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:37:56.510

只需复制 as 文件，根据需要重命名包，并将其链接到 fla（作为属性面板中的文档类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:20:55.933

您的每个文档类都需要继承自`AlarmClock.as`. 但是，由于这实质上使 AlarmClock 成为文档类，因此 AlarmClock 需要扩展`Sprite`。

例子：

**AlarmClock.as**（共享文档类）

```
package
{
    //Imports
    import flash.display.Sprite;

    //Class
    public class AlarmClock extends Sprite
    {
        //Constructor
        public function AlarmClock(message:String)
        {
            trace(message);
        }
    }
} 
```

**DocumentA.fla 与 DocumentA.as 作为文档类**

```
package
{
    //Imports
    import AlarmClock;

    //Class
    public class DocumentA extends AlarmClock
    {
        //Constructor
        public function DocumentA()
        {
            super("Called From DocumentA");
        }
    }
} 
```

**DocumentB.fla 与 DocumentB.as 作为文档类**

```
package
{
    //Imports
    import AlarmClock;

    //Class
    public class DocumentB extends AlarmClock
    {
        //Constructor
        public function DocumentB()
        {
            super("Called From DocumentB");
        }
    }
} 
```

更多信息： [继承（面向对象编程）](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)

# ios - 关于如何制作这个 iPad 界面的任何想法？

> ID：13787743
> 
> 赞同：1
> 
> 时间：2012-12-09T13:21:19.313
> 
> 标签：ios, ipad

华纳兄弟在一年前发布了电影“福尔摩斯：暗影游戏”的促销 iPad 应用程序。该应用程序是免费的，可以在这里下载：[https ://itunes.apple.com/us/app/sherlock-holmes-game-shadows/id515031420?mt=8](https://itunes.apple.com/us/app/sherlock-holmes-game-shadows/id515031420?mt=8)

我认为它的界面很棒（带有视差滚动和背景照片的淡入/淡出等），类似的界面非常适合我计划设计的应用程序。

我想问一下您是否知道他们可能使用什么工具来创建它（例如，它是一个在另一个之上的滚动视图，是 cocoa2d 吗）。

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:35:43.237

我认为它是 HTML 5。可能类似于[PhoneGap](http://phonegap.com/)。

# ruby - 创建线程安全的临时文件名

> ID：13787746
> 
> 赞同：37
> 
> 时间：2012-12-09T13:21:23.553
> 
> 标签：ruby, thread-safety, filenames, temp

当使用`Tempfile`Ruby 创建一个具有线程安全和进程间安全名称的文件时。这样我只需要一个文件名。

我想知道是否有比以下更直接的方法：

```
t = Tempfile.new(['fleischwurst', '.png'])
temp_path = t.path
t.close
t.unlink 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-09T13:35:52.440

## 目录::Tmpname.create

你可以使用`Dir::Tmpname.create`. 它计算出要使用的临时目录（除非您将目录传递给它）。考虑到它需要一个块，使用起来有点难看：

```
require 'tmpdir'
# => true
Dir::Tmpname.create(['prefix-', '.ext']) {}
# => "/tmp/prefix-20190827-1-87n9iu.ext"
Dir::Tmpname.create(['prefix-', '.ext'], '/my/custom/directory') {}
# => "/my/custom/directory/prefix-20190827-1-11x2u0h.ext" 
```

该块用于测试文件是否存在并引发代码，`Errno::EEXIST`以便可以生成一个新名称，并在末尾附加递增值。

## Rails 解决方案

[Ruby on Rails](https://github.com/rails/rails/pull/31462/files)实现的解决方案很简短，与最初在 Ruby 中实现的解决方案相似：

```
require 'tmpdir'
# => true
File.join(Dir.tmpdir, "YOUR_PREFIX-#{Time.now.strftime("%Y%m%d")}-#{$$}-#{rand(0x100000000).to_s(36)}-YOUR_SUFFIX")
=> "/tmp/YOUR_PREFIX-20190827-1-wyouwg-YOUR_SUFFIX"
File.join(Dir.tmpdir, "YOUR_PREFIX-#{Time.now.strftime("%Y%m%d")}-#{$$}-#{rand(0x100000000).to_s(36)}-YOUR_SUFFIX")
=> "/tmp/YOUR_PREFIX-20190827-1-140far-YOUR_SUFFIX" 
```

## Dir::Tmpname.make_tmpname（Ruby 2.5.0 及更早版本）

> Dir::Tmpname.make_tmpname 在 Ruby 2.5.0 中被移除。在 Ruby 2.4.4 之前，它可以接受目录路径作为前缀，但从 Ruby 2.4.4 开始，目录分隔符被删除。

深入研究`tempfile.rb`你会发现`Tempfile`其中包括`Dir::Tmpname`. 在里面你会发现[`make_tmpname`](http://rxr.whitequark.org/mri/source/lib/tmpdir.rb#108)哪个可以满足你的要求。

```
require 'tmpdir'
# => true
File.join(Dir.tmpdir, Dir::Tmpname.make_tmpname("prefix-", nil))
# => "/tmp/prefix-20190827-1-dfhvld"
File.join(Dir.tmpdir, Dir::Tmpname.make_tmpname(["prefix-", ".ext"], nil))
# => "/tmp/prefix-20190827-1-19zjck1.ext"
File.join(Dir.tmpdir, Dir::Tmpname.make_tmpname(["prefix-", ".ext"], "suffix"))
# => "/tmp/prefix-20190827-1-f5ipo7-suffix.ext" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-27T18:02:17.363

由于[在 Ruby 2.5.0 中](https://medium.com/@maciejmensfeld/ruby-2-5-0-upgrade-remarks-100d7c0dd73d)`Dir::Tmpname.make_tmpname`被删除，这个回退到使用：`SecureRandom`

```
require "tmpdir"

def generate_temp_filename(ext=".png")
  filename = begin
    Dir::Tmpname.make_tmpname(["x", ext], nil)
  rescue NoMethodError
    require "securerandom"
    "#{SecureRandom.urlsafe_base64}#{ext}"
  end
  File.join(Dir.tmpdir, filename)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-16T23:00:18.290

[由于您只需要文件名，因此使用SecureRandom](https://ruby-doc.org/stdlib-2.5.1/libdoc/securerandom/rdoc/SecureRandom.html)怎么样：

```
require 'securerandom'

filename =  "#{SecureRandom.hex(6)}.png" #=> "0f04dd94addf.png" 
```

你也可以使用`SecureRandom.alphanumeric`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-02-25T21:43:21.647

我发现 Dir:Tmpname 解决方案对我不起作用。在评估这个时：

```
Dir::Tmpname.make_tmpname "/tmp/blob", nil 
```

在 MRI Ruby 1.9.3p194 下，我得到：

```
uninitialized constant Dir::Tmpname (NameError) 
```

在 JRuby 1.7.5 (1.9.3p393) 下，我得到：

```
NameError: uninitialized constant Dir::Tmpname 
```

你可以尝试这样的事情：

```
def temp_name(file_name='', ext='', dir=nil)
    id   = Thread.current.hash * Time.now.to_i % 2**32
    name = "%s%d.%s" % [file_name, id, ext]
    dir ? File.join(dir, name) : name
end 
```

# android - 来自两个不同 APK 的 Android 服务相同

> ID：13787747
> 
> 赞同：2
> 
> 时间：2012-12-09T13:21:31.573
> 
> 标签：android, service, binding

假设我们有两个安装的 APK，每个 APK 具有相同的服务和相同的操作。就像使用的一种或图书馆一样。

我知道从服务的角度来看，最后安装的 APK 实际上是负责的。

当任何 APK 绑定到提及操作的服务时，我实际上无法指定要绑定到哪个服务器。或者我可以吗？

这一点很重要，我有两个不同版本的用于构建这些 APK 的同一个库。我来自某个 APK 的代码可能期望该服务是基于某些考虑构建的。

严格来说，我需要知道如果多个服务具有相同的名称、包名称（与实际的包名称不同）和操作，我如何绑定到特定服务。

读了这么痛苦的书，我很抱歉……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:53:16.307

> 这暂时无法更改。

有才华的程序员可以在一两分钟内改变这一点。

> 我知道从服务的角度来看，最后安装的 APK 实际上是负责的。

实际上，AFAIK，第一个获胜，而不是最后一个。

> 如果有多个同名，包名（与实际包名不同）和动作。

这是不可能的，因为您不能同时安装两个具有相同包名的应用程序。

可以使用不同*的*包名称安装两个应用程序，但它们包含`Service`具有相同的完全限定类名并使用`<intent-filter>`共享相同的操作字符串导出的应用程序。正如我在对这个问题的评论中指出的那样，这是一个糟糕的设计。

话虽如此，您可以使用with`setComponent()`等来识别有问题的。您将需要使用[双重](http://developer.android.com/reference/android/content/ComponentName.html#ComponentName%28java.lang.String,%20java.lang.String%29)[构造函数](http://developer.android.com/reference/android/content/ComponentName.html#ComponentName%28java.lang.String,%20java.lang.String%29)，在第一个参数中提供 APK 的包名，在第二个参数中提供完全限定的类名。`Intent``startService()``Service`[`String`](http://developer.android.com/reference/android/content/ComponentName.html#ComponentName%28java.lang.String,%20java.lang.String%29)`Service`

# java - 致命错误 - 无法使用 Java 代码解析 XML 文档

> ID：13787753
> 
> 赞同：0
> 
> 时间：2012-12-09T13:22:19.560
> 
> 标签：java, xml

我有一个要解析的 XML 文件（如下）。我在mykong上使用了一个例子来学习 - [http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/comment-page-2/#comment-125087](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/comment-page-2/#comment-125087) 但是我收到一个错误“[致命错误] flight.xml:3:15：与元素类型“id”关联的属性“{1}”需要打开报价。”

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:android="www.google.com">
<passenger id=001>
<name>Tom Cruise</name>
</passenger>
<passenger id=002>
<name>Tom Hanks</name>
</passenger>
</root> 
```

我更改了打印语句，但它不起作用。

```
System.out.println("Passenger id : " + getTagValue("passenger id", eElement));
System.out.println("Name : " + getTagValue("name", eElement)); 
```

如何编辑 mykong 中的代码以使其适合我？

**更新 -** 我进行了如下所述的更改。但是，现在我在输出中看不到乘客 ID 和姓名。我该如何解决？

新的 XML 文件在这里 -

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:android="www.google.com">

<passenger id="001">
<name>Tom Cruise</name>
</passenger>

<passenger id="002">
<name>Tom Hanks</name>
</passenger>

</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:30:58.720

任何 xml 解析器都不会接受 id=001。它应该是 id="001" 或 id='001'。这些是所谓**格式良好的**xml 文档的最低要求，否则它不是 xml 文档

```
•XML documents must have a root element
•XML elements must have a closing tag
•XML tags are case sensitive
•XML elements must be properly nested
•XML attribute values must be quoted 
```

此外，对代码进行此更改

```
public static void main(String argv[]) throws Exception {
    File fXmlFile = new File("c://file.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(fXmlFile);
    doc.getDocumentElement().normalize();
    System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
    NodeList nList = doc.getElementsByTagName("passenger");
    System.out.println("-----------------------");
    for (int temp = 0; temp < nList.getLength(); temp++) {
        Node nNode = nList.item(temp);
        if (nNode.getNodeType() == Node.ELEMENT_NODE) {
            System.out.println("Passenger id : " + e.getAttribute("id"));
            System.out.println("Name : " + e.getElementsByTagName("name").item(0).getTextContent());
        }
    }
} 
```

输出

```
Root element :root
-----------------------
Passenger id : 001
Name : Tom Cruise
Passenger id : 002
Name : Tom Hanks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:42:27.390

id 属性应该以双引号开始和结束。

```
<passenger id="001"> 
```

并且不要忘记关闭您的 passanger 标签（在您的示例中没有看到）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:28:36.263

您关闭名称标签两次，即使您只打开一次。你应该想写这样的东西。

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:android="www.google.com">
<passenger id=001>
<name>Tom Cruise</name>
<passenger id=002>
<name>Tom Hanks</name>
</root> 
```

# flash - FlasCC 样本 01 添加 -O4 标志时无输出

> ID：13787758
> 
> 赞同：0
> 
> 时间：2012-12-09T13:22:39.657
> 
> 标签：flash, flascc

我只在 Flascc SDK 1.0 示例 01_helloworld 项目中将 -O4 -flto-api=exports.txt 添加到 Makefile 脚本

这是最终的 Makefile 内容：

```
 "$(FLASCC)/usr/bin/gcc" $(BASE_CFLAGS) hello.c -O4 -flto-api=exports.txt -emit-swf -swf-size=200x200 -o hello.swf 
```

export.txt 是从 09_Pthreads 复制的，内容如下：

```
# built in symbols that must always be preserved
_start1
malloc
free
memcpy
memmove
flascc_uiTickProc
_sync_synchronize

# symbols for C++ exception handling
_Unwind_SjLj_Register
_Unwind_SjLj_Resume
_Unwind_SjLj_Unregister
_Unwind_SjLj_RaiseException 
```

构建完成后，我用 flash debug APP 11.5 打开它，但上面什么都没有。

![我的HelloWorld在哪里](../Images/8e80bab156aca5c72337762b5080e1f7.png)

我能做些什么来找出原因吗？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T09:15:32.620

使用这个 - 或者只添加你的 export.txt：__muldi3 和 vglttyioctl

_start1 malloc free memcpy memmove flascc_uiTickProc vglttyioctl __muldi3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:28:00.167

正如paleozogt 所提到的，如果您在使用导出文件时遇到符号ater 的引用错误，则意味着您的导出文件没有保护足够的符号。将“_vglttyioctl”添加到您的exports.txt 文件中应该可以解决问题。

如果 LLVM 可以看到使用符号的代码，则符号通常默认受到保护。例外情况是唯一的引用来自它看不到的 AS3 代码。在这种情况下，默认控制台实现希望能够调用 vglttyicotl 函数，但它已被条带化，因为它在导出文件或其余位码中未提及。

# node.js - JSON 响应：节点服务器和 Sencha

> ID：13787761
> 
> 赞同：3
> 
> 时间：2012-12-09T13:22:58.020
> 
> 标签：node.js, extjs, express

我很难理解为什么我在 Sencha 视图中没有得到任何东西。我相信在服务器和 Sencha 代理之间传输的 json 存在问题。我有一个用 node 和 express 编码的服务器和一个在 Sencha 中的代理阅读器。但是 Sencha 无法读取数据。

服务器端：

```
 app.get('/weather/fulljson',function(req, res) { 
    var obj = {data: [{ from_user: 'world', data: 'inter' }, { from_user: 'world2', data: 'interw' }, { from_user: 'world3', data: 'interw' }]};

    jsonP = false;
    var cb = req.query.callback;
    console.log(cb);
    if (cb != null) {
        jsonP = true;
        res.writeHead(200, {
            'Content-Type': 'text/javascript', 
            'connection' : 'close'
        });
    } else {
        res.writeHead(200, {'Content-Type': "application/x-json"});
    }
if (jsonP) {
    res.end(cb +  "(" + JSON.stringify(obj) + ");" );
}
else { res.end(JSON.stringify(obj));
}
 )};

}); 
```

煎茶视图：

```
Ext.define('Epic.view.Weather', {
    xtype: 'graph',
    extend: 'Ext.DataView',
    //requires: ['Epic.store.SWeather'],
    requires: ['Epic.model.MWeather', 'Ext.data.proxy.JsonP'],
    config: {
        store: {
        autoLoad: true,
        fields: ['from_user', 'data'],

        proxy: {
            type: 'jsonp',
            url: 'http://localhost:3000/weather/fulljson',
            reader: {
                type: 'json',
                rootProperty: 'data'
            }
        }
    } 
    },

            itemTpl: '{from_user}'
}); 
```

铬响应：

```
Ext.data.JsonP.callback1({"data":[{"from_user":"world","data":"inter"},{"from_user":"world2","data":"interw"},{"from_user":"world3","data":"interw"}]}); 
```

但是视图中什么也没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:41:59.933

您在加载后检查过您的商店吗？它是否包含您发送的数据？如果是 - 在这种情况下，您的观点有问题。您可以使用调试器工具并获取您的组件并检查存储。您还可以展示您的模型 Epic.model.MWeather 吗？实际上，如果您有模型，则不必向商店添加字段。

# mysql - 如何在 MysqlQuery 浏览器中导入 sql 文件

> ID：13787762
> 
> 赞同：1
> 
> 时间：2012-12-09T13:23:03.210
> 
> 标签：mysql

我已经使用 musqldump 创建了 sql 文件，现在我试图在 mySqlQuery 浏览器中使用这个 sql 文件来获取完整的数据库。

这是我放在mysqlquery浏览器中的sql文件，当我尝试执行时，它说：

```
 Variable 'sql_notes' can't be set to the value of 'NULL' 
```

这是我的 sqlFile。

## -- MySQL 转储 10.13 Distrib 5.5.27，适用于 Win64 (x86)

-- 主机：localhost 数据库：mydb

* * *

-- 服务器版本 5.5.27

```
 /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
             /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
             /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
             /*!40101 SET NAMES utf8 */;
             /*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
             /*!40103 SET TIME_ZONE='+00:00' */;
            /*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
           /*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS,      FOREIGN_KEY_CHECKS=0 */;
          /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
          /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

--

## -- 当前数据库：`mydb`

```
 CREATE DATABASE /*!32312 IF NOT EXISTS*/ `mydb` /*!40100 DEFAULT CHARACTER SET utf8 */;

              USE `mydb`; 
```

--

## -- 表的表结构`analysismode`

```
 DROP TABLE IF EXISTS `analysismode`;
                 /*!40101 SET @saved_cs_client     = @@character_set_client */;
                 /*!40101 SET character_set_client = utf8 */;
           CREATE TABLE `analysismode` (
          `AnalysisModeId` int(10) unsigned NOT NULL AUTO_INCREMENT,
           `AnalysisModeDesc` varchar(45) NOT NULL,
          PRIMARY KEY (`AnalysisModeId`)
        ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;
        /*!40101 SET character_set_client = @saved_cs_client */; 
```

--

## -- 为表转储数据`analysismode`

```
 LOCK TABLES `analysismode` WRITE;
               /*!40000 ALTER TABLE `analysismode` DISABLE KEYS */;
               INSERT INTO `analysismode` VALUES (1,'Analyse 2050'),(2,'Analyse 2033'),       (3,'Analyse 2035'),(4,'Analyse 2044');
               /*!40000 ALTER TABLE `analysismode` ENABLE KEYS */;
                UNLOCK TABLES;

            LOCK TABLES `warranties` WRITE;
             /*!40000 ALTER TABLE `warranties` DISABLE KEYS */;
            INSERT INTO `warranties` VALUES (8,'des','ty',2,'0000-00-00',1,'2012-11-       27',0,3,4,74),(10,'desc','87',97,'0000-00-00',87,'2012-12-18',0,7,7,84),      (11,'desc','87',97,'0000-00-00',87,'2012-12-18',0,7,7,84),(12,'desc','87',97,'0000-00-       00',87,'2012-12-18',0,7,7,84),(13,'desc','87',97,'0000-00-00',87,'2012-12-18',0,7,7,84), (18,'desc','87',97,'0000-00-00',87,'2012-12-18',0,7,7,84),(19,'desc','87',97,'0000-00- 00',87,'2012-12-18',0,7,7,84),(20,'desc','87',97,'0000-00-00',87,'2012-12-18',0,7,7,84), (21,'desc','87',97,'0000-00-00',87,'2012-12-18',0,7,7,84),(22,'desc','type',11,'0000-00- 00',11,'2012-12-25',0,33,11,102),(23,'desc','wa',798,'0000-00-00',768,'2012-12- 25',0,798,789,103),(24,'DESC','786',8,'0000-00-00',8,'2012-12-25',0,88,97,104); 
```

/*!40000 更改表`warranties`启用键*/; 解锁表；/* !40103 设置 TIME_ZONE=@OLD_TIME_ZONE */;

```
 /*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
                     /*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
                      /*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
                      /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
                       /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS  */;
                     /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
                   /*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */; 
```

-- 转储于 2012-12-09 12:23:41 完成

# python - PIL 安装在哪里？潮汐SDK python

> ID：13787764
> 
> 赞同：1
> 
> 时间：2012-12-09T13:23:26.567
> 
> 标签：python, tidesdk

我正在使用 Tidesdk 和 windows7。

PIL 安装在 python 中，如下所示。

C:\ProgramData\TideSDK\modules\win32\python 使用 TideSDK Developer 进行考试。

如果它打包，它会停止工作。

如果查看打包的 python，则不会安装 PIL。

如果 PIL 安装在哪里，它会起作用吗？

# php - 如何使用数组

> ID：13787767
> 
> 赞同：0
> 
> 时间：2012-12-09T13:23:42.397
> 
> 标签：php, arrays

> **可能重复：**
> [如何在 PHP 中将多维数组“展平”为简单数组？](https://stackoverflow.com/questions/526556/how-to-flatten-a-multi-dimensional-array-to-simple-one-in-php)

我怎么转

```
Array  
(  
    [0] => Array 
  (
      [id] => 33          
      [name] => Robb's Event  
  )  
) 
```

进入这个

```
Array  
(  
   [id] => 33             
   [name] => Robb's Event  
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T13:25:20.480

```
$array = $array[0]; 
```

请学习一些有关[数组](http://php.net/manual/en/language.types.array.php)的基础知识！

# css - 为什么我的 Div 标签被向左推了几个像素？

> ID：13787770
> 
> 赞同：0
> 
> 时间：2012-12-09T13:23:49.650
> 
> 标签：css, html, tags, css-float

我正在尝试为一些课程建立一个网站，但由于某种原因，我的两个中间栏被推到了左边。页眉、导航栏和页脚都垂直对齐，但中间的两个浮动 div 被强制向左。

![http://i.stack.imgur.com/nJ0UB.jpg](../Images/9b84ee39c6ecbe3357f564b109f266d2.png)

**HTML**

```
<html>
<head>
    <title>Churches Of Norwich</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="site.css"> 
</head>

<body>
     <div id="bg"> 
        <div id="content">
            <div id="headboxspacer"></div>
            <div id="head-box">Churches of Norwich</div>
            <div id="navbar" style="float: none">
                <div id="tabs">
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="map.html">Map</a></li>
                        <li><a href="churches.html">Churches</a></li>
                        <li><a href="comments.html">Comments</a></li>
                        <li><a href="gallery.html">Gallery</a></li>
                    </ul>
                </div>
            </div>
            <div id="container" style="overflow:hidden;width: 100%">
                <div id="homeboxleft" style="clear: both">Testing</div>
                <div id="homeboxright" style="clear: both" >Right</div>
            </div>
            <div id="footer"> footer </div>
            <div id="bottomspacer"></div>
        </div>
    </div>
</body>
</html> 
```

**CSS**

```
#content {
width: 1200px ;
height: max-content;
margin-left: auto ;
margin-right: auto ;
}

#headboxspacer{
height:50px;
width:100%;
}

#head-box{
background-color: #003651;
height: 120px;
width: 100%;
padding: 10px;
margin: 5px;
text-orientation: inherit;
font-family: sans-serif;
font-size: 65pt;
color: #FEE7BE;
font-style: normal;
text-align: center;
}

#navbar{
height: 50px;
background-color: #003651;
width: 100%;
margin: 5px;
padding: 10px;

font-family: sans-serif;
font-size: 20pt;
color: #FEE7BE;
font-style: normal;
text-align: center;
text-decoration-line: underline;;
width: 100%;
} 

#tabs ul {
margin: 0 ;
padding: 0 ;
list-style: none ;
display: inline ;
}

#tabs ul li {
margin: 0 ;
padding: 10px ;
display: inline ;
text-align: center ;
list-style: none ;
font-family: Arial, Helvetica, sans-serif ;
}

#tabs li a {
color: #FEE7BE;
background-color: #003651 ;
padding: 8px ;
text-decoration: none ;
display: inline ;
} 

#tabs li a:hover {
color: gainsboro ;
background-color: #003651 ;
}

#container{
width: 1200px;
}

#homeboxleft{
background-color: #FEE7BE;
height: 500px;
width: 50%;

float: right;

margin: 0px;
opacity: 10%;
filter:alpha(opacity=10);

text-orientation: inherit;
font-family: sans-serif;
font-size: 10pt;
color: #003651;
font-style: normal;
text-align: center;
}

#homeboxright{
background-color: #FEE7BE;
height: 500px;
width: 50%;
float: left;    
margin: 5px;
text-orientation: inherit;
font-family: sans-serif;
font-size: 10pt;
color: #003651;
font-style: normal;
text-align: center;
}

#mainbox{

background-color: #FEE7BE;
height: 500px;
width: 100%;
opacity: 0.6; 
}

#footer{
background-color: #003651;
height: 120px;
width: 100%;
padding: 10px;
margin: 5px;
text-orientation: inherit;
font-family: sans-serif;
font-size: 65pt;
color: #FEE7BE;
font-style: normal;
text-align: center;
clear: both;
}

#bottomspacer{
height:100px;
width:100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:32:25.937

因为导航栏的填充被添加到导航栏的宽度。

您必须使用带有内部 div 的盒子模型解决方案 [http://css-discuss.incutio.com/wiki/Box_Model_Hack#Box-in-a-box](http://css-discuss.incutio.com/wiki/Box_Model_Hack#Box-in-a-box)

那么你在所有浏览器中都有相同的宽度和外观

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:52:57.393

我还附上了截图。

这是小提琴的全屏预览：

> **[http://fiddle.jshell.net/zHBhs/2/show/](http://fiddle.jshell.net/zHBhs/2/show/)**

我认为你的问题是这里的内联 css：

```
<div id="homeboxleft">Testing</div>
<div id="homeboxright">Right</div>
//-------------------^-------------just removed the clear:both inline css here 
```

并且在您的这个 css 类中刚刚删除了 margin 属性：

```
#homeboxright{
    background-color: #FEE7BE;
    height: 500px;
    width: 50%;
    float: left;
    margin: 0; //  <------------------made margin for all sides to 0
    text-orientation: inherit;
    font-family: sans-serif;
    font-size: 10pt;
    color: #003651;
    font-style: normal;
    text-align: center;
} 
```

试试这个，看看这是否解决，在这里检查小提琴：http: [//jsfiddle.net/zHBhs/2/](http://jsfiddle.net/zHBhs/2/)

也对这些 css 类做一些工作：

```
#head-box{
    padding:0;    // change paddings to 0
    margin: 5px 0; // just apply to top and bottom margins
}

#navbar{
    margin: 0;      // change paddings to 0
    padding:10px 0; // just apply to top and bottom margins
}

#footer{
   margin: 0;      // change paddings to 0
   padding:10px 0; // just apply to top and bottom margins
} 
```

![在此处输入图像描述](../Images/668717c8d0f5bba77db3f4f326d0c4ac.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T18:59:01.387

在主 div 中获取左右两边。然后应用这个css：

```
#maindiv{
overflow:hidden;
border-bottom:1px solid rgba(200,200,200,0.3);
border-top:1px solid rgba(200,200,200,0.3);
}
#left{
width:60%;
float:left;
overflow:hidden;
}
#right{
overflow:hidden;
} 
```

注意：右边的 div 会和左边的 div 连在一起，如果要向右浮动，应用 float:right; 给它。但建议只向左浮动:)

[双方](http://jsbin.com/ilahat/2/)使用上述技巧的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T13:34:49.650

包含两列的“容器”设置为“宽度 = 100%”。这意味着 div 将分布在页面的整个宽度上。

尝试删除此宽度属性，然后删除所有浮动属性。

# grails - grails g：字段错误未显示

> ID：13787772
> 
> 赞同：0
> 
> 时间：2012-12-09T13:24:32.957
> 
> 标签：grails

我有这个设置，但验证不起作用

索引.gsp：

```
<g:form  name="loginForm" autocomplete="off" controller="company"  action ="save">

<table >

  <tr>

    <td><g:field type="text" name="company" required="true" value="${c?.companyName}" /></td>

  </tr>
</table> 
```

控制器：

```
def index = { 
def c  =new Company()

//c=params
return [c:c]

}
def save ={} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:42:51.680

`hasErrors`您需要使用表单中的方法检查错误：

```
<div class="fieldcontain ${hasErrors(bean: yourBean, field: 'yourField', 'error')} required">
    <label for="yourField">
        <g:message code="yourBean.yourField.label" default="yourField" />
        <span class="required-indicator">*</span>
    </label>
    <g:textField name="content" required="" value="${yourBean?.yourField}"/>
</div> 
```

Grails [hasErrors](http://grails.org/doc/2.1.x/ref/Tags/hasErrors.html)文档。

如果验证已通过，请检查您的控制器（保存操作）：

```
 if (!yourBean.save(flush: true)) {
        render(view: "create", model: [yourBean: yourBean])
        return
    } 
```

# java - 如何在不知道密钥/名称字符串的情况下解码 json？

> ID：13787775
> 
> 赞同：0
> 
> 时间：2012-12-09T13:24:37.080
> 
> 标签：java, android, json

我收到以下格式的 json 字符串：

```
{"27":{"id":"27","uid":"4","title":"teamer.zapto.org","url":"www.google.jo","ip":"74.125.234.63","enabled":"1","services":{"Http 1":{"status":"1","ts":"1355058071"}},"fetch_interval":"60","ping_shift":"0"},

"30":{"id":"30","uid":"4","title":"google","url":"www.google.com","ip":"74.125.234.114","enabled":"1","services":{"Http 1":{"status":"1","ts":"1355058079"}},"fetch_interval":"60","ping_shift":"0"},

"31":{"id":"31","uid":"4","title":"facebook.com","url":"facebook.com","ip":"69.171.247.21","enabled":"1","services":{"Http 1":{"status":"1","ts":"1355058095"}},"fetch_interval":"60","ping_shift":"0"},

"32":{"id":"32","uid":"4","title":"ebir","url":"www.ebir.com","ip":"74.52.50.226","enabled":"1","services":{"Ftp":{"status":"1","ts":"1355058073"},"Http 1":{"status":"1","ts":"1355058073"}},"fetch_interval":"60","ping_shift":"0"},

"33":{"id":"33","uid":"4","title":"zapto","url":"teamer.zapto.org","ip":"200.35.150.6","enabled":"1","services":{"Http 1":{"status":"0","ts":"1355056146"}},"fetch_interval":"3600","ping_shift":"2"},

"35":{"id":"35","uid":"4","title":"vogella.com","url":"vogella.com","ip":"46.163.79.226","enabled":"1","services":{"Ftp":{"status":"1","ts":"1355058098"},"Http 1":{"status":"1","ts":"1355058098"}},"fetch_interval":"60","ping_shift":"0"},

"36":{"id":"36","uid":"4","title":"msn","url":"www.msn.com","ip":"131.253.13.140","enabled":"1","services":{"Http 1":{"status":"1","ts":"1355058103"}},"fetch_interval":"60","ping_shift":"0"},

"37":{"id":"37","uid":"4","title":"dubizzle.com","url":"www.dubizzle.com","ip":"94.236.93.152","enabled":"1","services":{"Http 1":{"status":"1","ts":"1355058068"}},"fetch_interval":"60","ping_shift":"0"},

"38":{"id":"38","uid":"4","title":"olx.jo","url":"olx.jo","ip":"204.74.99.100","enabled":"1","services":{"Http 1":{"status":"1","ts":"1355058108"}},"fetch_interval":"60","ping_shift":"0"},

"40":{"id":"40","uid":"4","title":"www.sukar.com","url":"www.sukar.com","ip":"72.52.8.195","enabled":"1","services":{"Ftp":{"status":"0","ts":"1355058092"},"Http 1":{"status":"1","ts":"1355058092"}},"fetch_interval":"60","ping_shift":"0"}} 
```

如您所见，键是数字（27、30、31，...）并且不是连续的。我怎样才能从这样的json中获取数据？我知道它必须是某种取决于长度的循环，但我无法弄清楚如何做到这一点。通常我会使用`jObject.getString("id")`，但由于我不知道字符串是什么，我能做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T13:32:13.293

如果您有 a`JSONObject`作为根，您应该能够执行以下操作：

```
JSONObject root = new JSONObject(jsonString);
JSONArray names = root.names();
for(int i = 0; i < names.length(); i++) {
    String tag = names.getString(i);
    ...
} 
```

将`tag`是您引用的数字标签。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T13:46:16.363

```
JSONObject questionMark = new JSONObject(jsonString);
    Iterator keys = questionMark.keys();
while(keys.hasNext()) {
    // loop to get the dynamic key
    String currentDynamicKey = (String)keys.next();

    // get the value of the dynamic key
    JSONObject currentDynamicValue = questionMark.getJSONObject(currentDynamicKey); 
```

# c++ - C++ 防止复制成员数据

> ID：13787786
> 
> 赞同：2
> 
> 时间：2012-12-09T13:26:38.207
> 
> 标签：c++

我有一个不寻常的情况，

假设我有一个像下面这样的课程，

```
template <typename T>
class C
{
    public :

    C (int size) : value_(size), some_other_member_(size) {}

    T &value () {return value_;}
    const T &value() const {return value_;}

    private :

    T value_;
    SomeOtherType some_other_member_;
 }; 
```

该类设计为客户端可以对成员具有完全访问权限`value_`，就像`std::vector`'s`operator[]`将返回一个引用一样，该类也*必须*通过返回一个引用来授予客户端完全访问权限。一个 setter/getter 对是不行的。

但是，与 不同`std::vector`的是，我不想让客户能够完全替换该成员。即客户端可以调用`const`或非`const`成员`value_`，但不允许进行以下操作，

```
 C<SomeType> c(10);
 SomeType another_value(5);
 c.value() = another_value; // This shall not be allowed 
```

有什么可能的方法可以让客户完全访问`value_`. 从某种意义上说，类`C`应该像一个容器，但是一旦它包含的东西被初始化（通过构造函数，对 有要求`T`，但这里不相关），客户端只能`value_`通过`T`的成员函数修改，不能替换`value_`通过分配。

但是，要求`T`不可复制对我来说不是一个选择。因为类`C`可以复制。问题的核心，是在类中看到的`C`，`C`有几个成员，他们都有一个`size`属性，在构造的时候，它们都构造了相同的`size`，如果`value_`允许通过赋值替换，那么它允许数据结构被破坏，因为成员可能不再具有相同的`size`属性。

要求`T`仅在大小相同时允许复制或分配也不是一种选择。因为，在复制`C`对象时，源和目标之间的大小可能不同。例如，

```
C c1(10);
C c2(20);
c1 = c2; 
```

完全合理。的大小`c1`变了，但它的所有成员也都改成了同样的新大小，所以没关系。

我希望我已经把问题说清楚了。我总结一下，我希望`C`对 没有太多限制`T`，`T`基本上可以是任何类型，带有所需的构造函数。`T`可以复制和分配。我不希望客户做的唯一事情是分配到`value_`through `C::value()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T13:36:44.233

如果您希望用户能够在对象上调用非常量成员函数并且想要返回对实际对象的引用，则不能完全禁止赋值，因为赋值运算符基本上就是这样（您可以重写`a = b`作为`a.operator=(b)`）。因此，您要么只需要返回一个对您的对象的 const 引用，要么制作包含的对象，`non_copyable`要么接受它可以分配给它的事实。

我个人建议重新考虑设计。即使您可以禁止分配，也不能保证该对象没有成员函数，它的想法基本相同（`.swap(...)`是典型的候选者），所以只要您允许调用，您就没有真正赢得任何东西非常量成员函数。

但是，如果您只关心不允许意外分配，则可以使执行此类分配变得更加困难。如果你`T`不是内置的，你可以创建一个派生类，它不公开公共赋值运算符并返回对它的引用：

```
template <typename T>
class C{
public :
    class Derived: public T {
    private:
       Derived(int size):T(size) {}
       Derived& operator=(const Derived&) = default; //used C++11 syntax for brevity, for C++03 code it has to be implemented here
       Derived(const Derived&) = default; //don't want this class to be copyied outside of C
       ~Derived() = default;
       friend class C;    
    };

    C (int size) : value_(size), some_other_member_(size) {}
    Derived& value () {return value_;}
    const Derived& value() const {return value_;}
 private :
    Derived value_;
    SomeOtherType some_other_member_;
 }; 
```

这将通过继承提供对所有公共成员的访问权限，但隐藏赋值运算符（和构造函数）。当然，如果您使用 c++11，则可以通过使用/定义移动构造函数/赋值和使用完美转发来增强此代码，以允许不同的构造函数。请注意，Derived 的 T 部分仍然可以分配给 using `static_cast<T&>(C.value()) = foo`;

要支持无法从（内置...）派生的类型，您需要创建一个代理，它公开除分配之外的所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:34:17.903

至于你的 getter/setter 问题，我会写

```
const T& value() const; // as getter
void value(const T&); // as setter 
```

返回`const T&`(const-reference) 完全反对类似的情况`c.value() = 10`（参见 Scott Meyers 的 Effective C++，第 23 条）。

我认为这也解决了复制问题：您的课程仍然是可复制的。

# android - 显示图像视图

> ID：13787787
> 
> 赞同：0
> 
> 时间：2012-12-09T13:27:10.770
> 
> 标签：android

如果我有一个 ImageView 并且我想在 sum = 10 时显示它，否则它必须隐藏我如何在 java 中做到这一点

```
 <ImageView android:id="@+id/a"
            android:src="@drawable/cancel" 
            android:layout_width="25dp"
            android:layout_height="50dp"
            android:layout_marginTop="20dp"
              android:layout_marginLeft="20dp"
            android:contentDescription="@string/delete"

           ></ImageView> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:30:07.813

把这段代码

```
if(sum !=10)
{
  imageView.setVisibility(View.GONE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:30:00.217

利用

```
imageView.setVisibility(View.GONE); 
```

隐藏你的图像视图

# c# - 如何在 LINQ 的帮助下从字符串中检索字符？

> ID：13787788
> 
> 赞同：1
> 
> 时间：2012-12-09T13:27:22.497
> 
> 标签：c#, .net

我有字符串：

```
string str = "GoodDay"; 
```

我需要在 LINQ 的帮助下检索前三个字符。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:29:57.173

如果你必须使用 LINQ，你可以这样做：

```
foreach ( char c  in str.Take(3)) {
    ...
} 
```

`Substring`但是，对于字符串，使用s更为传统：

```
foreach (char c in str.Substring(0, 3)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T13:29:30.937

字符串是`IEnumerable<char>`这样你可以查询它。使用`Enumerable.Take`方法：

```
IEnumerable<char> firstThreeChars = str.Take(3); 
```

如果您不需要使用 LINQ，那么更好的选择是使用`str.Substring(0,3)`- 这将返回包含前三个字符的子字符串。

# javascript - Javascript无法将未定义转换为对象

> ID：13787791
> 
> 赞同：1
> 
> 时间：2012-12-09T13:27:32.143
> 
> 标签：javascript

我有以下代码

```
for(i = 0; i < num; i++) {
    var yPos = 10*i;
    var numCells = wid/30;

    for(j = 0; j < numCells; j++) {
        blocks[i][j] = 1;
    }                       
} 
```

和

```
blocks = new Array(); 
```

但是，当我执行代码时，我收到一条错误消息：

```
can't convert undefined to object 
```

有任何想法吗？：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:30:11.100

```
var blocks = [];
for(i = 0; i < num; i++) {    
    var yPos = 10*i;
    var numCells = wid/30;
    blocks[i] = []; // here is a fix

    for(j = 0; j < numCells; j++) {
        blocks[i][j] = 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:17:39.523

在您的特定情况下，由于所有行都被初始化为相同（一系列 1），您也可以这样做

```
var blocks = new Array(),
    blockRow = new Array();
for (var i = 0; i < numCells; i++) {
    blockRow.push(1);
}
for (var i = 0; i < num; i++) {
    blocks.push(blockRow.slice());  // slice() makes a copy of blockRow
} 
```

# c# - 迭代静态类中的属性

> ID：13787797
> 
> 赞同：4
> 
> 时间：2012-12-09T13:28:18.253
> 
> 标签：c#, properties, static

我有一个静态类，它存储有关我的程序的一些参数，如下所示，

```
public static class Parameters
{
    public static string Path = "C:\\path.txt";
    public static double Sigma = 0.001;
    public static int Inputs = 300;
} 
```

我想要一个函数，它把这个类的所有`names`和`values`作为一个字符串值，比如：

```
public static string LogParameters()
{
     return "Path = C:\\path.txt" + Envrironment.NewLine + 
            "Sigma = 0.001" + Environment.NewLine + 
            "Inputs = 300";
} 
```

我尝试了这个类似的 SO 问题，[如何遍历一个类的所有属性？](https://stackoverflow.com/questions/531384/how-to-loop-through-all-the-properties-of-a-class)，但是在这个例子中，他们使用了一个非静态类，他们可以将其称为对象。所以，我无法使用他们的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T13:32:08.847

这些不是属性 - 它们是字段：

```
foreach(FieldInfo field in typeof(Parameters).GetFields()) {
    Console.WriteLine("{0}={1}", field.Name, field.GetValue(null));
} 
```

（显然，将上面的内容调整为写入 StringBuilder 而不是控制台）

# version-control - 如何在相对目录上执行“化石”命令？

> ID：13787801
> 
> 赞同：0
> 
> 时间：2012-12-09T13:28:40.397
> 
> 标签：version-control, fossil

我想将我的 linux 配置保留在化石 scm 系统中。

这是我在初始阶段所做的。

```
$ cd /
$ fossil new b.fsl
$ fossil open b.fsl
$ fossil add etc/group
$ fossil add boot/grub/menu.lst
$ fossil ci -m 'init commit' 
```

我想做一些事情（像 hg/git 一样操作）。

```
$ cd etc
$ fossil status group
$ fossil add motd 
```

它将显示错误消息：

```
fossil: current directory is not within an open checkout 
```

所以，我的临时脏解决方案是

```
$ cd /
$ fossil status etc/group
$ fossil add etc/motd
$ fossil add /etc/motd # this line will cause problem 
```

对于我的 git/hg 经验，它应该可以工作。

```
$ cd /
$ hg init
$ hg add etc/group boot/grub/menu.lst
$ hg ci -m 'init commit'
$ cd etc
$ hg status group  # it works
$ hg add motd # it works too 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T16:16:49.443

命令前

```
$ fossil new b.fsl 
```

输入命令

```
$ cd etc 
```

如果要将化石存储库存储在另一个文件夹中，请更改命令

```
$ fossil new b.fsl
$ fossil open b.fsl 
```

至

```
$ fossil new path_to_repo/b.fsl
$ fossil open path_to_repo/b.fsl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T08:05:17.513

所有提到的命令“add”和“status”以及所有与结帐相关的化石命令都必须在当前目录设置在结帐目录树中的某个位置时执行。

您不能自己将检出目录指定为命令行选项。

似乎化石中存在一个错误（或故意引入的功能），阻止它搜索打开的结帐文件（“.fslchkout”或“ *FOSSIL* ”）直到根目录。这就是为什么在这种情况下，当您在此结帐时执行命令时，您必须位于根目录中。

当然，在这种情况下，所有化石的执行都必须具有 root 权限。否则，即使在根目录中，您也会收到“不在结帐内”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T02:57:54.803

中详细介绍了这种情况`User Guide`，我衷心推荐。

[http://www.fossil-scm.org/schimpf-book/home](http://www.fossil-scm.org/schimpf-book/home)

特别是，请参阅 2.0 版的`fossilbook.pdf`第 2 节，标题为“单一用户”，该节以：

> 我有一个名为 FOSSIL 的目录，其中保存了我所有的存储库，Fossil 不在乎，但它可以帮助我将它们全部保存在一个地方，以便我可以备份它们。

那里的第一个命令显示了如何调用相对目录：

```
$ fossil new ../FOSSIL/FossilBook.fossil 
```

# java - 使用 Java 将对象添加到另一个对象

> ID：13787802
> 
> 赞同：0
> 
> 时间：2012-12-09T13:28:51.087
> 
> 标签：java, oop, object

我最近花了几个月的时间在 C# 上给 Java，只是赶上了一些我不确定如何格式化的东西。

我整理了一个小例子来解释我的问题。

我正在尝试将“Creature”类型的对象添加到“Player”类型的对象中

目前是这样的：

```
 //Null items are objects
Player newPlayer = new Player("This", "Is", "Here", 1 , 1, 1, null, null, null);        

Creature c = null;                                  //Null items are objects
c = new Creature("Name", "Species",  100, 5.5, 10.5, 1, 100, null, null, null);

newPlayer.addCreature(c); 
```

但是我遇到的问题是`java.lang.NullPointException`.

播放器类可以在这里看到：

```
public Player(String Username, String Password, String Email, int Tokens, int Level, int Experience, Vector<Creature> Creature, Vector<Food> Food, Vector<Item> Item) {
    m_username = Username;
    m_password = Password;
    m_email = Email;
    m_tokens = Tokens;
    m_level = Level;
    m_experience = Experience;
    m_creature = Creature;
    m_food = Food;
    m_item = Item;

}   

public void addCreature(Creature c)
{
    m_creature.add(c);      
} 
```

还有那个生物：

```
public Creature(String Name, String Species, int Health, double Damage, double Regen, int Level, int Exp, Vector<Effect> ActiveEffect, Vector<Attack> Attack, Vector<Specialisation> Specialisation )
{
    m_name = Name;
    m_species = Species;
    m_health = Health;
    m_damageMultiplier = Damage;
    m_regenRate = Regen;
    m_level = Level;
    m_experience = Exp;
    m_activeEffect = ActiveEffect;      
    m_attack = Attack;
    m_specialisation = Specialisation;      

} 
```

如何使用它创建实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:38:25.387

那是因为对您存储的向量的引用是`null`. 您正在`null`为构造函数传递 s 。

当您通过时，`new vector<Creature>()`您实际上是在传递对新构造的向量的引用。它还没有包含任何生物对象。早些时候它失败了，因为您试图`add(..)`在设置为 null 的引用上调用函数。

试试这个：

```
Player newPlayer = new Player("This", "Is", "Here", 1 , 1, 1, new Vector<Creature>(), new Vector<Food>(), new Vector<Item>());
                                                              ^ new empty vector      ^ new empty vector  ^ new empty vector 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:31:49.097

不看`addCreature`实现就不能说。仔细查看异常的 Stackstrace，它会显示异常发生的确切行号。

# java - 将字符串从数据库传递到 drawString()

> ID：13787811
> 
> 赞同：2
> 
> 时间：2012-12-09T13:30:09.133
> 
> 标签：java, swing, awt, drawstring

我有一个数据库，所有值都存储在一个表中。我想使用 drawString() 方法从表中打印一个名称。我创建了一个结果集和数组列表。有没有办法在drawString方法中从数据库中传递一个字符串？

请给我一个代码或代码链接，因为我是新手。谢谢。

```
public class AB1 extends JPanel
{   public static void main(String a[]) throws Exception
{
    int ID,TC;
    String FROM, TO, ATS, DTS, SOURCE, DSTN, TS, ST;
    ResultSet rs;

    ArrayList<AB> ab = new ArrayList<AB>();

    //DATABASE CONNECTION

    String TrainNo = "287972";
    try
    {
    Class.forName("oracle.jdbc.driver.OracleDriver");
    String url = "jdbc:oracle:thin:@127.0.0.1:1521:xe";
    Connection c = DriverManager.getConnection(url, "system", "mypcdatabase");

    // STORING TABLE IN RESULTSET

    int rows = 0;

    PreparedStatement st=c.prepareStatement("select * from MT_TRAIN_CONSIST where TRAIN_NUMBER = ?" );
    rs=st.executeQuery();

    PreparedStatement st1=c.prepareStatement("select * from MT_RAKE_TRAIN_LINK_MASTER where TRAIN_NUMBER = ?");
    rs = st1.executeQuery();

    PreparedStatement st2=c.prepareStatement("select * from MT_SLIP_TRAIN_INFO  where TRAIN_NUMBER = ?");
    rs = st2.executeQuery();

    while(rs.next())
    {

    ID = rs.getInt("ID_TRAIN_DEF");
    FROM = rs.getString("COACH_FROM");
    TO = rs.getString("COACH_TO");
    TC = rs.getInt("NUMBER_OF_COACHES");
    ATS = rs.getString("ATTACH_TRANSFER_STATION");
    DTS = rs.getString("DETACH_TRANSFER_STATION");
    SOURCE = rs.getString("TRAIN_SRC");
    DSTN = rs.getString("TRAIN_DSTN");
    TS = rs.getString("TRANSFER_STATION");
    ST = rs.getString("slip_type");

    AB obj = new AB();

    obj.id = ID;
    obj.tc = TC;
    obj.from = FROM;
    obj.to = TO;
    obj.ats = ATS;
    obj.dts = DTS;
    obj.src = SOURCE;
    obj.dstn = DSTN;
    obj.ts = TS;
    obj.st = ST;
    ab.add(obj);

    rows++;
    }
}

catch(Exception ex)
{
    ex.printStackTrace();
}

getImg(new FileOutputStream("C:\\A&B" + TrainNo + ".jpg"), ab);
}

public static void getImg(OutputStream out, ArrayList<AB> ab) throws IOException
{    int imgWidth = 1024, imgHeight = 768;

BufferedImage image = new BufferedImage(imgWidth,imgHeight, BufferedImage.TYPE_INT_ARGB);
Graphics2D gx = image.createGraphics();
gx.setColor(Color.BLUE);

gx.setColor(Color.BLACK);
gx.drawLine(60,350,970,350);
gx.drawLine(970,350,960,340);
gx.drawLine(970, 350, 960, 360);
gx.drawString("", 30 , 330);
gx.drawString("", 960 , 330);

ImageIO.write(image, "PNG", out);
out.close();        
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T14:28:06.907

在你的这些行中

```
PreparedStatement st = c.prepareStatement("select * from MT_TRAIN_CONSIST where TRAIN_NUMBER = ?");
rs=st.executeQuery(); 
```

您忘记为**?** ， 就像是

```
PreparedStatement st = c.prepareStatement("select * from MT_TRAIN_CONSIST where TRAIN_NUMBER = ?");
st.setString(1, TrainNo);
rs=st.executeQuery(); 
```

请学习[**Java 命名约定**](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)并遵守它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:32:46.197

@ gagandeep bali 这条线是正确的 String TrainNo = "287972"; 此值代替**?**

# random - 从 HashMap 中获取随机值

> ID：13787813
> 
> 赞同：1
> 
> 时间：2012-12-09T13:30:13.353
> 
> 标签：random, hashmap

我想获得 HashMap 的随机值，但只能从一个键。

这就是我构建 HashMap 的方式。每个键都有多个值。

```
ArrayList<HashMap<String, String>> items = new ArrayList<HashMap<String, String>>();
for (.....) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        map.put(KEY_1, parser.getValue(e, KEY_1));
        map.put(KEY_2, parser.getValue(e, KEY_2));
// adding HashList to ArrayList
        items.add(map);
} 
```

所以键“KEY_1”有多个值，“KEY_2”也是如此。现在我想使用键“KEY_1”获取随机值。怎么做 ？

编辑：我想我知道问题出在哪里，虽然还不知道如何解决这个问题。问题是定义 size(); 我需要以某种方式获取大小，而不是从“items.size();”之类的所有 HashMap 项目中获取大小。但更类似于“items.KEY_1.size();”

使用此代码获取 NullPointerException

```
int index = random.nextInt(items.size());
    HashMap<String, String> randomitem = new HashMap<String, String>(); 
    randomitem = items.get(index);
    System.out.println(randomitem.get(KEY_1)); 
```

使用此代码，我可以获得非随机的值：

```
int index = 2;
    HashMap<String, String> randomitem = new HashMap<String, String>(); 
    randomitem = items.get(index);
    System.out.println(randomitem.get(KEY_1)); 
```

**编辑：**使用此代码，我可以获得随机值，但我从所有键中获取值。如何仅从一键获取值？

```
Random rand = new Random();
indexx = rand.nextInt(items.size());
System.out.println(items.get(indexx)); 
```

**解决**了这个代码我可以从某个键中获取随机值。

```
Random rand = new Random();
indexx = rand.nextInt(items.size());
HashMap<String, String> randomitems = items.get(indexx);

System.out.println(randomitems.get(KEY_1)); 
```

# ruby-on-rails - 使用railsinstaller for windows在rails上安装ruby

> ID：13787815
> 
> 赞同：3
> 
> 时间：2012-12-09T13:30:32.713
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我已经下载了适用于 windows 的 railsinstaller 软件包并成功安装了它。

之后，我按照这些步骤成功运行了 localhost:3000 窗口。

但是现在当我再次启动它时，会出现以下错误（**在图片链接中**）。

[http://tinypic.com/r/11ch4ix/6](http://tinypic.com/r/11ch4ix/6)

我该怎么做才能解决这个问题？

**ruby -v**命令也被应用并且一切都被正确安装。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:33:43.113

Ruby on Rails 需要在您的计算机上安装 Javascript 运行时。

首先，您应该尝试再次将 ExecJS gem 放入注释中（在您的 gemfile.rb 中）。

否则，您可以安装 NodeJS，因为它包含一个 Javascript 运行时（V8 - Chrome 使用）。

祝你好运！

# c# - WP7 - 尽管检查文件是否存在，但错误“XmlException 未处理”

> ID：13787819
> 
> 赞同：1
> 
> 时间：2012-12-09T13:30:59.797
> 
> 标签：c#, .net, xml, xml-parsing, windows-phone

我正在尝试从 WP7 中的 XML 文档中读取并遇到了一个奇怪的错误，当我在重新启动 WP7 模拟器后第一次运行我的程序时遇到了一个我根本没有得到的奇怪错误，但如果我在调试中运行它而不关闭模拟器它给了我运行时错误：'XmlException 未处理在应用程序 xap 包中找不到文件'appdata.xml'。这很奇怪，因为我首先检查文件是否存在：

```
using (var store = IsolatedStorageFile.GetUserStoreForApplication())
{
    if (store.FileExists("appdata.xml"))
    {
        XDocument loadedData = XDocument.Load("appdata.xml"); // <-- runtime error
        //code for parsing xml to variables
    }
} 
```

它进入 if 语句，因此文件应该存在，但 XDocument 由于某种原因不喜欢它，有人有什么想法吗？

为了进一步参考，当我点击应用程序中的按钮时，我如何保存数据，**如果不调用此函数，也不会发生错误**：

```
private void SaveData()
{
    rulesData = new AppData(StartCashRule.Text, LandGoRule.Text, FreeParkingRule.Text, FullCircuitRule.Text, AuctionRule.Text);

    using (var store = IsolatedStorageFile.GetUserStoreForApplication())
    {
        IsolatedStorageFileStream ifStream = new IsolatedStorageFileStream("appdata.xml", FileMode.OpenOrCreate, store);

        using (XmlWriter writer = XmlWriter.Create(ifStream))
        {
            writer.WriteStartDocument();
            writer.WriteStartElement("myData");

            writer.WriteElementString("Starting_Cash", rulesData.myStartingCash);
            writer.WriteElementString("Land_on_Go_Data", rulesData.myLandOnGo);
            writer.WriteElementString("Free_Parking_Data", rulesData.myFreeParking);
            writer.WriteElementString("Full_Circuit_Data", rulesData.myFullCircuit);
            writer.WriteElementString("Auction_Data", rulesData.myAuction);

            writer.WriteEndElement();
            writer.WriteEndDocument();
        }

        ifStream.Close();
    }
} 
```

谢谢 - 瑞安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:58:04.247

您正在将名称“appdata.xml”传递给 XDocument.Load，而没有对文件实际存在的 IsolatedStorage 存储的任何引用。

你应该写这样的东西

```
XDocument loadedData = XDocument.Load(store.OpenFile("appdata.xml", FileMode.Open)); 
```

# html - awk中如何读取和处理多个输入文件？

> ID：13787821
> 
> 赞同：1
> 
> 时间：2012-12-09T13:31:19.813
> 
> 标签：html, parsing, awk

我保存了很多 .html 文件，并且我已经为 Windows 编写了一堆 awk 代码，它们可以进行我需要的进一步文本处理，并且可以完美地处理一个文件，但是我找不到读取所有文件的解决方案一个接一个的文件并将其放入results.txt？

```
awk -f C:/PLT2/parse.txt input_files > C:/PLT2/results.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:43:07.170

这是您的操作系统的问题，而不是 awk。UNIX 的答案是：

awk -f C:/PLT2/parse.txt input_file1 input_file2 input_fie3.... > C:/PLT2/results.txt

但你没有使用 UNIX，所以....

# java - 如何使 listFooter 不可点击

> ID：13787824
> 
> 赞同：9
> 
> 时间：2012-12-09T13:31:37.090
> 
> 标签：java, android, android-layout

所以这就是交易，我已经尝试在这里查看其他类似的线程 [https://stackoverflow.com/questions/12479909/how-to-make-list-header-and-footer-not-click-able](https://stackoverflow.com/questions/12479909/how-to-make-list-header-and-footer-not-click-able)

但它不起作用。我无法“在点击时什么也不做”。

但问题不在于处理单击列表时发生的情况，即列表正在提供反馈，就好像它已被单击（IE 亮起），我不希望那样。

我不明白为什么下面的部分不起作用（即它仍然是可选择/可点击的）

```
ViewGroup footer = (ViewGroup)inflater.inflate(R.layout.listview_footer_row, null, false);//This is not working as it should
        listView.addFooterView(footer); 
```

任何人都知道为什么我的页脚是可点击/可选择的，尽管我在方法中添加了错误的声明？

这是我的代码

```
import java.util.ArrayList;

import android.content.Intent;
import android.annotation.SuppressLint;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;

public class PortfolioFragMent extends Fragment{

    private ListView listView;
    private Button goButton;
    private String[] listheader = {"Idag","Senaste","Antal","Avkastning %","Avkastning","Tot Värde"};
    private static ShareHoldingAdapter adapter;
    private int totalElemInlist = listheader.length;
    private int currentelemInList=0;
    private ArrayList<ShareHolding> allShareHoldings = new ArrayList<ShareHolding>(); 
    private Button buyButton;

    @SuppressLint("NewApi")
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @SuppressLint({ "NewApi", "NewApi" })
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        allShareHoldings = Portfolio.getPortfolio().getAllShareHoldings();

        super.onCreate(savedInstanceState);
        View view = inflater.inflate(R.layout.portfolioframe, container, false);    
        listView = (ListView)view.findViewById(R.id.listView1);
        String[] array = new String[] {"one", "two", "three"};
        /**********************************/
        adapter = new ShareHoldingAdapter(getActivity(), R.layout.listview_item_row, allShareHoldings); 
        /***********************************/

        ViewGroup header = (ViewGroup)inflater.inflate(R.layout.listview_header_row, null, false);
        ViewGroup footer = (ViewGroup)inflater.inflate(R.layout.listview_footer_row, null, false);//This is not working as it should
        listView.addHeaderView(header);
        listView.addFooterView(footer);

        goButton = (Button)view.findViewById(R.id.testButton);
        goButton.setText(listheader[currentelemInList]);

        listView.setAdapter(adapter);
        goButton.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                String buttonPressed = (String) ((Button) view).getText();
                currentelemInList++;
                if(currentelemInList>=totalElemInlist){
                    currentelemInList=0;
                }
                adapter.setButtonPressed(currentelemInList);
                goButton.setText(listheader[currentelemInList]);
            }
        });

        listView.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> adapter, View view, int position, long arg) {
               /*
                * Have to catch Nullpointer exception here since I have two elements in list plus 1 header and 1 footer.
                * When I click the footer I sent the number 3 to my next intent (4-1). But I don't want the footer to fire on click at all
                */
               if(position<Portfolio.getPortfolio().count()){//Just to check that I havn't clicked listFooter.
               System.out.println("Klicka i listan");
                Intent intent = new Intent(getActivity().getApplicationContext(),
                DetailShareHoldingActivity.class);
                intent.putExtra("new_variable_name","value");
                intent.putExtra("bookPositionInList",(position-1));//Just so that the top of the list is not clicked
                System.out.println(position);

                startActivity(intent);  
               }
           } 
        });

        buyButton = (Button)view.findViewById(R.id.buyNewShares);
        buyButton.setOnClickListener(new OnClickListener() {public void onClick(View view) {

            buyShares();

        }});
        return view;    
    }

    @SuppressLint({ "NewApi", "NewApi" })
    private void buyShares(){
            System.out.println("Köpt tryckt");
        Intent intent = new Intent(getActivity().getApplicationContext(),
                BuyNewSharesActivity.class);
                startActivity(intent);  
        }

    @SuppressLint({ "NewApi", "NewApi" })
    public void onListItemClick(ListView l, View v, int position, long id) {
        System.out.println("Klicka i listan");
        Intent intent = new Intent(getActivity().getApplicationContext(),
        DetailShareHoldingActivity.class);
        intent.putExtra("new_variable_name","value");
        intent.putExtra("bookPositionInList",position);
        startActivity(intent);  
    }
      public static ShareHoldingAdapter getPortfolioFragmentShareHoldingAdapter(){
            return adapter;
        }
} 
```

这是我的 listview_footer_row.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
        <TableLayout
            android:id="@+id/book_detailTable"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_gravity="top"
            android:layout_weight="1"
            android:paddingTop="0dip" >
            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="top"
                android:paddingTop="0dip" >
                <TextView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:ems="10"
                    android:gravity="left"
                    android:text="Namn"
                    android:textColor="#ababab"
                    android:textSize="25dip" />
            </TableRow>
    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-09T13:41:05.300

而不是使用

```
addFooterView(v) 
```

采用

```
List.addFooterView(v, data, isSelectable); 
```

并设置 isselectable = false

```
List.addFooterView(v, null,false); 
```

所以你的 footerView 不再可选择

# php - 未定义的变量：如果行计数导致未定义的无对象的状态

> ID：13787836
> 
> 赞同：1
> 
> 时间：2012-12-09T13:32:47.760
> 
> 标签：php, login, pdo

昨天，脚本工作得很好，当我填写正确的信息时，我仍然被重定向，但是当我没有时，我得到了以下错误：

> 注意：未定义变量：第 26 行 C:\xampp\htdocs\webshop\resources\library\login.class.php 中的状态
> 
> 致命错误：在第 26 行的 C:\xampp\htdocs\webshop\resources\library\login.class.php 中的非对象上调用成员函数 rowCount()

```
<?php
        require_once('../resources/config.php');
        class user
        {
            private $db;

            public function __construct()
            {
                $this->db = new config();
                $this->db = $this->db->dbConnect(); 
            }

            public function login($name, $pass)
            {
                if(!empty($name) && !empty($pass))
                {
                //parameter query to prevent sql injection
                $state = $this->db->prepare("select * from users where name=? and pass=?");
                $state->bindParam(1, $name);
                $state->bindParam(2, $pass);
                $state->execute();
                }

                if($state->rowCount() == 1)
                {
                        header('location: index?page=basket.php');
                        echo "you have been loged in as <b>$dbuser</b>";

                    }else{

                        echo "incorrect user";
                    }

            }
        }

        ?> 
```

用法

```
<?php
require_once('../resources/library/login.class.php');

    if(isset($_POST['submit']))
    {
        $name = $_POST['user'];
        $pass = $_POST['pass'];

        $obj_login = new user();
        $obj_login->login($name, $pass);
    }   
?>

<form method="post" action="index.php?page=login.php">
    username: <input type="text" name="user"/>
    password: <input type="text" name="pass"/>
    <input type="submit" name="submit" value="Login"/>
</form> 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:38:40.613

如果其中一个`$name`或`$pass`为空，`$state`则未定义（由于您的`if`-statement）。稍后您假设`$state`存在并尝试访问其方法。

这会导致您的错误。

最简单的解决方法是在`if($state->rowCount() == 1)`之后移动其“真实”分支`$state->execute()`，因此仅在执行状态时才检查状态。

如果用户已登录，则从函数返回。因此，您可以离开`echo "incorrect user";`处理登录失败的情况。

```
public function login($name, $pass)
{
    if(!empty($name) && !empty($pass))
    {
        //parameter query to prevent sql injection
        $state = $this->db->prepare("select * from users where name=? and pass=?");
        $state->bindParam(1, $name);
        $state->bindParam(2, $pass);
        $state->execute();

        if($state->rowCount() == 1)
        {
            header('location: index?page=basket.php');
            // do NOT output content after you set this header!
            // echo "you have been loged in as <b>$dbuser</b>";
            return true;
        }
    }
    echo "incorrect user";
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T13:38:22.313

您没有定义`$state`name 或 pass 何时为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:39:09.663

您必须在登录 PHP 代码中添加此代码：

```
require_once('../resources/config.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T13:49:27.307

您的错误是仅在两者都不为空`user::login()`时才准备语句。但是，如果它们是，代码仍会尝试执行该语句。显然，在该条件下，语句对象从未实例化，这就是您收到错误的原因。`$name``$pass`

您可以通过简单地检查提交请求时用户名和密码是否为空来解决此问题。一个小建议也是**不要**依赖一个值来告诉您请求中使用的**HTTP 请求方法**。我强烈建议您不要依赖这种行为，特别是因为已知某些浏览器根本不发送提交输入类型的值。而是使用`$_SERVER['REQUEST_METHOD']`来确定请求方法是`POST`或`GET`（除非您不在乎，但在您的表单中请求方法设置为`post`所以我假设你这样做）。此外，您不需要将 $_POST 变量复制到另一个变量中，只是为了将它们传递给对象的方法。那是一种浪费。您还可以从代码中的任何范围访问像 $_POST 这样的超级全局变量（*仅供参考*）。

```
<?php
require_once('../resources/library/login.class.php');

if(isset($_SERVER['REQUEST_METHOD']) && strtoupper($_SERVER['REQUEST_METHOD']) == 'POST')
    {
        if (empty($_POST['user']) || empty($_POST['pass']))
            {
                echo "Please supply a username and password!";
            } else {
                $obj_login = new user();
                $obj_login->login($_POST['user'], $_POST['pass']);
            }
    }   
?>

<form method="post" action="index.php?page=login.php">
    username: <input type="text" name="user"/>
    password: <input type="text" name="pass"/>
    <input type="submit" name="submit" value="Login"/>
</form> 
```

# events - 如何覆盖 wxProcess::OnTerminate

> ID：13787847
> 
> 赞同：0
> 
> 时间：2012-12-09T13:33:52.020
> 
> 标签：events, wxwidgets, overriding

如何覆盖`wxProcess::OnTerminate`函数以接收有关使用 wxWidgets 终止进程的事件？

我试图创建类覆盖`wxProcess`和函数`OnTerminate`，但没有关于它的事件。

我怎样才能覆盖它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T16:36:55.613

您可以`OnTerminate()`在派生类中覆盖**或**处理`EVT_PROCESS`事件。这两者是互斥的，即如果您覆盖该方法，您将不会获得该事件。如果您只想处理事件，则无需覆盖任何内容。

# android - 如何为 Overlays 创建触摸事件？

> ID：13787848
> 
> 赞同：0
> 
> 时间：2012-12-09T13:33:55.150
> 
> 标签：android, overlay

我将叠加层添加到我的地图视图中，并且我想要在触摸叠加层时发生的事件。我使用过 onTap，但它仅用于单击覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:17:00.193

子类`Overlay`和覆盖`onTouchEvent()`。您可以在那里进行任何您想要的触摸处理。

# java - java.lang.UnsatisfiedLinkError：否 在 java.library.path 中

> ID：13787849
> 
> 赞同：2
> 
> 时间：2012-12-09T13:34:02.907
> 
> 标签：java, eclipse, java-native-interface, shared-libraries

## 问题

我一直在尝试在我自己的 Mac 上运行单元测试。测试在 Linux 服务器上运行良好，但在本地失败并出现以下跟踪：

```
java.lang.UnsatisfiedLinkError: no fedel_client in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1758)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1045)
    .... 
```

## 我试过的

### `.so`从服务器复制文件

我已经`fedel_client.so`从服务器复制到`/workspace/dapper/java/lib/native/macosx`我的本地机器上，并将其添加到`java.library.path`：

```
-Djava.library.path=/workspace/dapper/java/lib/native/macosx:... 
```

### 创建符号链接

我已经创建了一个从`fedel_clinet`to的符号链接`fedel_clinet.so`，以防 Java 正在寻找前者（没有`.so`扩展名）。

### 将`.so`目录添加到 .bashrc

我尝试将`.so`目录添加到`PATH`：

```
PATH=$PATH:/Users/adamatan/workspaces/trunk/dapper/java/lib/native/macosx 
```

并`LD_LIBRARY_PATH`：

```
export LD_LIBRARY_PATH="/Users/adamatan/workspaces/trunk/dapper/java/lib/native/macosx" 
```

### 打印`java.library.path`

我打印`java.library.path`了 Eclipse 环境中的更改是否已传播到 JVM：

```
System.out.println(System.getProperty("java.library.path")); 
```

并得到：

```
/workspace/dapper/java/lib/native/macosx:.... 
```

我放置在 Eclipse 配置中的确切值。

## 调试思路？

我对所有上述解决方案都遇到了完全相同的错误。知道如何调试这个问题吗？我可以从 Java 获得更详细的错误消息吗？是找不到文件，还是没有加载？如果没有加载，那是为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T17:09:53.973

我可能读错了，但听起来您已将本机库 ( `libfedel_client.so`) 从 Linux 服务器复制到您自己的 Mac。如果是这样的话，这肯定行不通。您不能在 Mac 上使用 Linux 本机库，您需要在 Mac 上重新编译它以生成`libfedel_client.dylib`.

根据您使用的 Apple Java 运行时版本，您可能需要使用该`.jnilib`扩展。早期的运行时使用`.jnilib`扩展而不是`.dylib`，并且仍然支持这两个扩展（尽管`.dylib`现在是默认的。）

# c# - 尝试使用通用对象序列化新的 XML 文件

> ID：13787850
> 
> 赞同：2
> 
> 时间：2012-12-09T13:34:05.907
> 
> 标签：c#, xml, file, xmlserializer, generic-list

我正在尝试使用序列化和自定义类创建一个 xml 文件，但出现异常：“生成 xml 文档时出错。”

我用一个字符串列表试过它，它可以工作，但不能用自定义类型......有没有人有 idia 为什么？

```
public class MyXML
{
    List<MyClass> Mylist;
    public XmlSerializer serialize;

    public MyXML()
    {
        Mylist=new List<MyClass>();
        serialize = new XmlSerializer(typeof(List<MyClass>));
    }

    public void Save(List<MyClass> newList)
    {
        using (FileStream writer = File.OpenWrite(Directory.GetCurrentDirectory()  + "/files/MyNewFile.xml"))
        { serialize.Serialize(writer, newList); }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:42:13.347

Here's the trick: take your current code and wrap it in:

```
try {
    // create and use serializer
} catch(Exception ex) {
    while(ex != null) {
        Debug.WriteLine(ex.Message);
        ex = ex.InnerException;
    }
    throw;
} 
```

XmlSerializer actually gives you very detailed reasons when it can't serialize/deserialize something - but they are hidden in the inner-exceptions. With the above, you'll be able to see what the problem is in the debug output.

Usual suspects:

*   type must be fully-public
*   type must have a public parameterless constructor
*   if the actual instance is a sub-class, that must be declared in advance

# spring - GAE 上的 Spring mvc + JSF

> ID：13787857
> 
> 赞同：1
> 
> 时间：2012-12-09T13:35:35.403
> 
> 标签：spring, google-app-engine, model-view-controller, jsf

我在 GAE 上实现 spring mvc + primeFaces 时遇到问题，我认为一切正常，除非我尝试通过发送帖子来修改我的 bean 的值，值保持与以前相同。这是代码：

**web.xml**

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/main-servlet.xml</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>

     <context-param>
      <param-name>com.sun.faces.enableThreading</param-name>

      <param-value>false</param-value>

        </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

<servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

     <listener>
    <listener-class>
      com.remote.control.web.ApiKeyInitializer
    </listener-class>
  </listener>

    <servlet>
        <servlet-name>main</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>main</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>  

 <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <security-constraint>
        <web-resource-collection>
            <url-pattern>/home</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>*</role-name>
        </auth-constraint>
    </security-constraint>

  <servlet> 
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping>
</web-app> 
```

**主servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

     <beans>

    <context:component-scan base-package="com.remote.control.controller" />
     <context:component-scan base-package="com.remote.control.service" />

    <mvc:annotation-driven />

    <mvc:resources mapping="/res/**" location="/WEB-INF/res/"  />  

    <bean
        id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver" >

        <property
            name="prefix"
            value="/WEB-INF/jsp/" />

        <property
            name="suffix"
            value=".xhtml" />
    </bean>

</beans> 
```

**面孔-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config >

    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>

    </application>

</faces-config> 
```

**家庭控制器.java**

```
@Controller
public class HomeController {

      private Logger logger = Logger.getLogger(getClass().getName());

      @Autowired
      Bean bean;

    @RequestMapping(value="/home", method=RequestMethod.GET)
    public ModelAndView homeGet() {
        ModelAndView mv=new ModelAndView("index");  
        bean.setParam1("111111111");
        bean.setParam2("22222222222");
        bean.setParam3("3333333333");
        mv.addObject("task",bean);      
        return mv;
    }

    @RequestMapping(value="/home", method=RequestMethod.POST)
    public ModelAndView homePost() {
        ModelAndView mv=new ModelAndView("index");

            logger.warning("param1"+ bean.getParam1());
            logger.warning("param2" + bean.getParam2());
            logger.warning("param3" + bean.getParam3());

            mv.addObject("task",bean);

    }

} 
```

**Bean.java**

```
@Component
@Scope(value="session", proxyMode=ScopedProxyMode.TARGET_CLASS)
public class Bean implements Serializable {

    private String param1;
    private String param2;
    private String param3;
    public String getParam1() {
        return param1;
    }
    public void setParam1(String param1) {
        this.param1 = param1;
    }
    public String getParam2() {
        return param2;
    }
    public void setParam2(String param2) {
        this.param2 = param2;
    }
    public String getParam3() {
        return param3;
    }
    public void setParam3(String param3) {
        this.param3 = param3;
    }

} 
```

**索引.xhtml**

```
<html>

<ui:composition template="baseLayout.xhtml">
    <ui:define name="content">

                <form action="home" method="post">
                <h:panelGrid style="margin-top:20px;" columns="2" cellpadding="10">

                    <p:outputPanel autoUpdate="true">

                        <p:inputText value="#{task.param1}" />
                        <p:inputText value="#{task.param2}" />

                        <p:inputTextarea value="#{task.param3}" id="text" rows="10" cols="50" />

                    </p:outputPanel>

                </h:panelGrid>
                <button value="submit" />

            </form>

    </ui:define>
</ui:composition>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:52:27.717

只要转

```
<form action="home" method="post">
    <h:panelGrid style="margin-top:20px;" columns="2" cellpadding="10">
        <p:outputPanel autoUpdate="true">

            <p:inputText value="#{task.param1}" />
            <p:inputText value="#{task.param2}" />

            <p:inputTextarea value="#{task.param3}" id="text" rows="10" cols="50" />

        </p:outputPanel>
    </h:panelGrid>
    <button value="submit" />

</form> 
```

进入

```
<h:form>
    <h:panelGrid style="margin-top:20px;" columns="2" cellpadding="10">
        <p:outputPanel autoUpdate="true">

            <p:inputText value="#{task.param1}" />
            <p:inputText value="#{task.param2}" />

            <p:inputTextarea value="#{task.param3}" id="text" rows="10" cols="50" />

        </p:outputPanel>
    </h:panelGrid>
    <p:commandButton value="submit" action="#{task.myMethod}"/>

</h:form> 
```

用下面的方法

```
public void myMethod(){
    System.out.println(param1);
    System.out.println(param2);
    System.out.println(param3);
} 
```

# ios - GKPeerPickerController 抛出异常“预期表达式”

> ID：13787861
> 
> 赞同：1
> 
> 时间：2012-12-09T13:35:47.697
> 
> 标签：ios, expression, alloc, gkpeerpickercontroller

我写了这段小代码：

> GKPeerPickerController *picker = [[GKPeerPickerController alloc] init];

但即使在重新启动我的 Mac XCode 后告诉我：“预期的表达”！任何人有任何想法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:51:47.470

我认为您正在 switch 案例中创建选择器对象。将您的代码放在花括号中。

```
case k:
{
     GKPeerPickerController *picker = [[GKPeerPickerController alloc] init];
     //your code
} 
```

# css - Mapbox - 层中奇怪的白线

> ID：13787865
> 
> 赞同：2
> 
> 时间：2012-12-09T13:36:33.827
> 
> 标签：css, twitter-bootstrap, layer, mapbox

我正在嵌入一个 mapbox 地图 - 我发现在地图中间放置了一个空白行，正如您从所附图像中看到的那样。

![在此处输入图像描述](../Images/5bba7c2c641290f3bfbd132ccee772a2.png)

有谁知道问题是什么？

我也在使用 twitter-bootstrap 框架。

这是我使用的地图 div html/css：

```
<div class="map"></div>

    .map{
        max-width:none !important;
        width:100% !important;
        height:250px !important;
        max-height:250px;
        position: relative;
        margin:0 auto !important;
    } 
```

这是我的js：

```
var map = mapbox.map(_element);
map.addLayer(mapbox.layer().id('examples.map-uh4ustwo'));

// Create an empty markers layer
var markerLayer = mapbox.markers.layer();

// Add interaction to this marker layer. This
// binds tooltips to each marker that has title
// and description defined.
mapbox.markers.interaction(markerLayer);
map.addLayer(markerLayer);

map.zoom(3).center({ lat: _json.lat, lon: _json.lon });

// Add a single feature to the markers layer.
// You can use .features() to add multiple features.
markerLayer.add_feature({
    geometry: {
        coordinates: [_json.lon, _json.lat]
    },
    properties: {
        'marker-color': '#F96363',
        'marker-symbol': 'circle-stroked',
        /*title: 'Example Marker',
        description: 'This is a single marker.'
        */
    }
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T16:50:37.840

首先，检查您没有打开任何“响应式图像”的东西，这会弄乱地图图像的大小。

然后，尽量不要使用`!important`这么多。

最后，检查您的浏览器是否未放大或缩小。在 Chrome 中，点击`⌘0`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-25T15:25:02.253

问题与以下事实有关：默认情况下，leaflet.js 使用 CSS3 3D 转换来定位图块，并且操作系统和浏览器的某些组合无法正确处理该问题。

解决方案是在加载实际库之前禁用 3D 转换：

```
<script>L_DISABLE_3D = true;</script>
<script src="mapbox.js"></script> 
```

这解决了我在 Firefox for Bootstrap/Mapbox 应用程序中出现白线的问题

# java - 使用网格布局添加按钮

> ID：13787873
> 
> 赞同：4
> 
> 时间：2012-12-09T13:37:38.110
> 
> 标签：java, swing, jpanel, jbutton, grid-layout

我正在尝试创建一个由 9x9 JButtons 制成的简单井字游戏板。我使用了一个二维数组和一个网格布局，但结果什么都没有，一个没有任何按钮的框架。我做错了什么？

```
import java.awt.GridLayout;
import javax.swing.*;

public class Main extends JFrame
{
    private JPanel panel;
    private JButton[][]buttons;
    private final int SIZE = 9;
    private GridLayout experimentLayout;
    public Main()
    {
        super("Tic Tac Toe");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(500,500);
        setResizable(false);
        setLocationRelativeTo(null);

        experimentLayout =  new GridLayout(SIZE,SIZE);

        panel = new JPanel();
        panel.setLayout(experimentLayout);

        buttons = new JButton[SIZE][SIZE];
        addButtons();

        add(panel);
        setVisible(true);
    }
    public void addButtons()
    {
        for(int k=0;k<SIZE;k++)
            for(int j=0;j<SIZE;j++)
            {
                buttons[k][j] = new JButton(k+1+", "+(j+1));
                experimentLayout.addLayoutComponent("testName", buttons[k][j]);
            }

    }

    public static void main(String[] args) 
    {
        new Main();

    }

} 
```

addButton 方法将按钮添加到数组中，然后直接添加到面板中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T13:40:30.080

您需要将按钮添加到您的`JPanel`：

```
public void addButtons(JPanel panel) {
   for (int k = 0; k < SIZE; k++) {
      for (int j = 0; j < SIZE; j++) {
         buttons[k][j] = new JButton(k + 1 + ", " + (j + 1));
         panel.add(buttons[k][j]);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T13:42:47.927

```
// add buttons to the panel INSTEAD of the layout
// experimentLayout.addLayoutComponent("testName", buttons[k][j]);
panel.add(buttons[k][j]); 
```

进一步的建议：

1.  不要扩展`JFrame`，只要需要就保留一个引用。仅在添加或更改功能时扩展框架..
2.  而不是`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`使用[这个答案](https://stackoverflow.com/a/7143398/418556)`setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`中看到的。
3.  而不是`setSize(500,500);`使用`panel.setPreferredSize(new Dimension(500,500));`. 或者更好的是，扩展`JButton`以使`SquareButton`返回的首选大小等于宽度或高度的最大首选。最后一个将确保 GUI 是它需要的大小，正方形并留出足够的空间来显示文本。
4.  而不是在第 2 点链接的答案中看到的`setLocationRelativeTo(null);`使用。`setLocationByPlatform(true);`
5.  添加`pack()`之前`setVisible(true);`确保 GUI 是显示内容所需的大小。
6.  而不是`setResizable(false)`调用`setMinimumSize(getSize())`。
7.  启动并更新 EDT 上的 GUI。有关更多详细信息，请参阅[Swing 中的并发。](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)

# c++ - DFS图记录路径（寻路）

> ID：13787877
> 
> 赞同：3
> 
> 时间：2012-12-09T13:38:03.220
> 
> 标签：c++, graph, path-finding

我已经实现了一个简单的 DFS（非递归），它“测试” **StartNode**和**EndNode**之间的路径是否存在。它按预期工作（处理双向/定向图）-但我只是不知道*如何存储路径*以供以后使用。

目前我正在调试打印访问的节点，但这不是应该存储的内容。

有人可以帮我/解释一下 - 我到底应该存储什么以及在什么时候将节点列表从 NodeStart 返回到 NodeEnd ？

这是示例图表：

![图形](../Images/89e2eb556a8c665bc42cee658228b122.png)

这是DFS遍历函数：

```
bool DFS(CNavigationGraph *pNavGraph, CNavigationGraphNode* pFromNode, CNavigationGraphNode* pToNode)
{
    assert(pNavGraph);
    assert(pFromNode);
    assert(pToNode);

    std::vector<CNavigationGraphNode*> vpVisitedNodes;
    std::vector<CNavigationGraphNode*> stack;

    stack.push_back(pFromNode);

    while(!stack.empty())
    {
        CNavigationGraphNode     *pTop = stack.back();
        stack.pop_back();

        // Ok We've reached pToNode - means, path pFromNode to pToNode available
        if(pTop == pToNode)
        {
            for(int a = 0; a < vpVisitedNodes.size(); a++)
            {
                CLogger::Instance()->Write(XLOGEVENT_LOCATION, "{VISITED} %s",vpVisitedNodes[a]->GetNodeName().data());
            }
            return true;
        }

        // Add to visited list
        vpVisitedNodes.push_back(pTop);

        // Look for adjacent Nodes for pTop
        std::vector<CNavigationGraphNode*> vpAdjacentNodes;
        pNavGraph->GetAdjacentNodes(pTop->GetNodeName(), vpAdjacentNodes);
        for(int x = 0; x < vpAdjacentNodes.size(); x++)
        {
            // Add to stack if not visited
            if(IsVisited(vpVisitedNodes, vpAdjacentNodes[x]) == false)
                stack.push_back(vpAdjacentNodes[x]);
        }
    }

    // Path not found
    return false;
} 
```

这是调试输出：

查找 Node1 和 Node3 之间的路径

```
<main> [] DFS TRAVERSE TEST (DIRECTIONAL)
<DFS> [] {VISITED} Node1
<DFS> [] {VISITED} Node4
<DFS> [] {VISITED} Node5
<main> [] Path from Node1 to Node3 - YES 
```

查找 Node3 和 Node1 之间的路径

```
<main> [] DFS TRAVERSE TEST (DIRECTIONAL)
<main> [] Path from Node3 to Node1 - NO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T13:52:32.363

如果我正确理解了您的算法（并且它是 DFS），
那么您将从起点向第一个未访问节点的方向迈出一步。如果没有从该节点到您的目标的路线，则您退后一步并尝试转到下一个未访问的节点，同时仔细管理访问了哪些节点。

**您需要添加的只是一个堆栈**，您始终将要执行的节点推送到该堆栈，如果必须后退，则将其从堆栈中弹出。**此堆栈将存储您**从 start_node 到目标的路线。它还可以帮助您确定退后的位置。

这是您的代码，最后它比我想象的要长一些，但它是：

```
// I call fromNode: start_node, toNode: target_node.

std::stack<CNavigationGraphNode*> DFS(CNavigationGraph *pNavGraph, CNavigationGraphNode* start_node, CNavigationGraphNode* target_node)
{
    using namespace std;

    stack<CNavigationGraphNode*> route; // route to target
    unordered_set<CNavigationGraphNode*> visited_nodes;  // hash set on who is visited
    vector<CNavigationGraphNode*> adjacent_nodes;

    CNavigationGraphNode* current_node = start_node;
    while(current_node!=target_node)
    {
      pNavGraph->GetAdjacentNodes(current_node->GetNodeName(), adjacent_nodes); 

      // "for each"; you can use any form of looping through the neighbors of current_node.
      bool found_non_visited = false;
      for(auto node : adjacent_nodes) 
      {
        if(visited_nodes.find(node) == visited_nodes.end())
        {
          route.push(current_node);
          visited_nodes.insert(node);
          current_node = node;
          found_non_visited = true;
          break;
        }
      }
      if(found_non_visited) 
        continue;

      if(route.empty())
        return route; // empty route means no route found
      current_node = route.pop();
    }
    route.push(target);
    return route;
} 
```

现在，您可以`pop_back`按照自己的方式从开始到目标或`pop`从目标到开始。如果路由为空，则对应于从原始函数返回 false。

在 STL 中对 unordered_set和[stack的](http://www.cplusplus.com/reference/stack/stack/)[引用。](http://en.cppreference.com/w/cpp/container/unordered_set)它是用一个桶实现的，所以它比通常用红黑树实现的 set 或 map 快得多。

备注：是一个 C++11 扩展，如果你使用 C++03 ，请`std::unordered_set`随意替换为较慢的。`std::set`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T13:50:47.277

好吧，你可以有一个*地图*（地图：顶点->顶点） ，而不是一个`visited` *集合。*`parent`

 *在遍历图表时修改地图，如果您`v`从 node发现 node `u`，请添加`parent[v] = u`。初始化`parent[source] = NULL`。

现在，您所要做的就是迭代（伪代码）：

```
current <- dest
while current != NULL:
   print current
   current <- parent[current] 
```

它将以相反的顺序为您提供路径。如果要实现路径的原始顺序，您可以存储到堆栈（而不是 print 语句）并迭代堆栈。

这与线程中为 BFS 解释的想法非常相似：[如何找到 BFS 找到的实际路径？](https://stackoverflow.com/q/9590299/572670)*

# c# - 如何在 C# 中获得前 5 个重复的 Regex.Matches？

> ID：13787878
> 
> 赞同：0
> 
> 时间：2012-12-09T13:38:03.180
> 
> 标签：c#, .net, regex

我想构建一个程序来抓取一些网站，检查 style.css 文件，打开它，并使用正则表达式，`#([a-z]|[A-Z]|[0-9])([a-z]|[A-Z]|[0-9])([a-z]|[A-Z]|[0-9])([a-z]|[A-Z]|[0-9])([a-z]|[A-Z]|[0-9])([a-z]|[A-Z]|[0-9])(?=;)`我想获得 style.css 的前 5 种颜色

如果我的正则表达式结果中有 200 种颜色，我想获得前 5 个含义。

例如，我的正则表达式会找到这个颜色 #ffffff 100 次，这意味着这将是我的第一个颜色。

颜色#343434 将被找到 98 次，这将是我的第二个颜色。

依此类推，从 style.css 文件中获取前 5 种颜色。

关于如何实现这一点的任何想法？

我在这里找到了这样的例子：

```
var l1 = new List<int>() { 1,2,3,4,5,2,2,2,4,4,4,1 };

        var g = l1.GroupBy( i => i );

        foreach( var grp in g )
        {
           Console.WriteLine( "{0} {1}", grp.Key, grp.Count() );
        } 
```

但这并不是我真正想要的。

欢迎任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:43:27.427

您可以尝试以下方法：

```
var topMatches = Regex.Matches(stringToCheck, RegExPattern)
    .Cast<Match>()
    .GroupBy(m => m.Value)
    .Select(m => new{ Colour = m.Key, Count = m.Count() })
    .OrderByDescending(g => g.Count)
    .Take(5)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:44:34.010

```
var colors = l1.GroupBy(x => x)
                .OrderByDescending(g => g.Count())
                .Select(g => g.Key)
                .Take(5)
                .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:44:32.177

像这样的东西：

```
var g = <your matches>.
    GroupBy(i => i).
    OrderByDescending(grp => grp.Count()).
    Take(5).
    Select(k => k.Key).
    ToList(); 
```

# android - Toast 类型中的方法 makeText 不适用于参数

> ID：13787881
> 
> 赞同：3
> 
> 时间：2012-12-09T13:38:23.673
> 
> 标签：android, android-fragments, android-viewpager, toast

当我们滚动到下一个片段页面时，我正在使用 ViewPageIndicator 并尝试使用 Toast 来显示。

我让他跟随错误

```
The method makeText(Context, CharSequence, int) in the type Toast is not applicable for the arguments (PlaceDetailsFragment, String, int) 
```

**PlaceDetailsFragment.java**

```
public class PlaceDetailsFragment extends SherlockFragment {
    ImageFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_place_details, container,
                false);

        mAdapter = new ImageFragmentAdapter(getActivity()
                .getSupportFragmentManager());

        mPager = (ViewPager) view.findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
        ((CirclePageIndicator) mIndicator).setSnap(true);

        mIndicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                Toast.makeText(PlaceDetailsFragment.this, "Changed to page " + position, Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            }

            @Override
            public void onPageScrollStateChanged(int state) {
            }
        });
        return view;
    }

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-09T13:40:18.983

片段不扩展上下文。您必须让活动作为上下文传递。

```
Toast.makeText(PlaceDetailsFragment.this.getActivity(), "Changed to page " + position, Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:49:35.790

PearsonArtFoto 已经给了你答案，但我想补充一些信息：你必须使用 getActivity() 因为你不是在 Activity（或扩展 Activity 的东西）中调用它。活动是一个上下文（它扩展了上下文），片段不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-18T17:21:33.993

使用片段的容器参数

```
Toast.makeText(container.getContext(), picture, Toast.LENGTH_LONG).show(); 
```

# wpf - WPF：当对齐为中心时，图像的坐标检索不正确

> ID：13787886
> 
> 赞同：0
> 
> 时间：2012-12-09T13:38:50.287
> 
> 标签：wpf, image, alignment, transform, center

我在 WPF 中的网格上设置了一个图像控件：

```
<Window x:Class="Window.PhotoViewer"
    Title="PhotoViewer" Height="768" Width="1024" BorderThickness="0,0,0,0">

<Grid Name="ViewerGrid">
    <Image Name="imageBox" Width="980" Height="615" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,50,0,0" Stretch="None" />
</Grid> 
```

我使用函数**TransformToAncestor**来获取 imageBox 的位置：

```
 Point leftTop = imageBox.TransformToAncestor(this).Transform(new Point(-imageBox.ActualWidth/2, -imageBox.ActualHeight/2));
  Point rightButtom = imageBox.TransformToAncestor(this).Transform(new Point(imageBox.ActualWidth/2, imageBox.ActualHeight/2)); 
```

然后我画一条线来连接这两点：

```
Line line = new Line();
line.Stroke = System.Windows.Media.Brushes.OrangeRed;
line.X1 = leftTop.X;
line.Y1 = leftTop.Y;
line.X2 = rightButtom.X;
line.Y2 = rightButtom.Y;
line.HorizontalAlignment = HorizontalAlignment.Center;
line.VerticalAlignment = VerticalAlignment.Center;
line.StrokeThickness = 5;
ViewerGrid.Children.Add(line); 
```

结果是错误的。**当对齐为中心**时如何获得控制器的正确位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T18:05:19.367

不太确定您要做什么，但我想以下 XAML 应该可以在没有任何 TransformToAncestor 调用的情况下完成这项工作：

```
<Grid Name="ViewerGrid">
    <Image Name="imageBox" Width="980" Height="615" Stretch="None"
           VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,50,0,0" />

    <Line HorizontalAlignment="{Binding HorizontalAlignment, ElementName=imageBox}"
          VerticalAlignment="{Binding VerticalAlignment, ElementName=imageBox}"
          Margin="{Binding Margin, ElementName=imageBox}"
          X2="{Binding ActualWidth, ElementName=imageBox}"
          Y2="{Binding ActualHeight, ElementName=imageBox}"
          Stroke="OrangeRed" StrokeThickness="5"/>
</Grid> 
```

或者，更简单的是，另一个 Grid 中的 Image 和 Line 采用 Horizo​​ntalAlignment、VerticalAlignment 和 Margin 属性：

```
<Grid Name="ViewerGrid">
    <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,50,0,0">
        <Image Name="imageBox" Width="980" Height="615" Stretch="None"/>
        <Line X2="{Binding ActualWidth, ElementName=imageBox}"
              Y2="{Binding ActualHeight, ElementName=imageBox}"
              Stroke="OrangeRed" StrokeThickness="5"/>
    </Grid>
</Grid> 
```

如果由于某种原因您需要使用 TransformToAncenstor，我想您将不得不像这样获得图像框：

```
var transform = imageBox.TransformToAncestor(this);
Point topLeft = transform.Transform(new Point());
Point bottomRight = transform.Transform(new Point(imageBox.ActualWidth, imageBox.ActualHeight)); 
```

`HorizontalAlignment.Left`而且您必须`VerticalAlignment.Top`在 Line 控件上进行设置。

# javascript - 关闭 DIV 弹出窗口在其外部单击

> ID：13787888
> 
> 赞同：2
> 
> 时间：2012-12-09T13:38:54.587
> 
> 标签：javascript, jquery, css, html, popup

我有这段代码，我想`<div>`通过单击它外部来关闭此弹出窗口，而不仅仅是单击关闭按钮。

我怎样才能做到这一点？

```
<script language="JavaScript">
 <!--
function displayPopup(alert_MSG) {

    var theDetail = document.getElementById(alert_MSG);
        theDetail.style.display="block";
}

function closePopup(alert_MSG) {

    var theDetail = document.getElementById(alert_MSG);

    if (theDetail.style.display=="block") {
        theDetail.style.display="none";
    }
}
-->
</script> 
```

这是HTML链接：

```
<a href="javascript:displayPopup(<?=$id_pic?>)">open div here</a> 
```

这是我的弹出窗口：

```
<div id="<?=$id_pic?>" class="myPopup" style="display:none;">
<div class="closeButton">
<a href="javascript:closePopup(<?=$id_pic?>)">Close</a>
</div>
Popup content here
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:25:26.317

```
$(document).click(function(event) {
    if ( $(event.target).closest(".myPopup").get(0) == null ) {         
    alert('clicked outside');           
    } else{
    alert('clicked inside');
    }
}); 
```

这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:52:19.843

观看此 webkit。[CodePen.IO](http://codepen.io/joe/pen/feJrj)

```
#overlay {
  top: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: red;
  z-index: 40;
} 
```

和：

```
document.getElementById("overlay").addEventListener("click", closePopup, false );
document.getElementById("popup").addEventListener("click", stopPropagation, false ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:42:07.693

Try:

```
document.onmousedown = function(){
    if(event.target.className != 'myPopup')
        document.getElementsByClassName('myPopup')[0].style.display = 'none';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T13:44:52.830

```
$('body').click(function(){
   $(".myPopup").hide();
}); 
```

**Edit:**

Maybe you can wrap your code in this:

```
<body>
   <a href="javascript:closePopup(<?=$id_pic?>)" style="curser:default">
      // all your code
   </a>
</body> 
```

# javascript - HtmlUnit - 如何显示 iframe 内容

> ID：13787890
> 
> 赞同：2
> 
> 时间：2012-12-09T13:39:14.843
> 
> 标签：javascript, iframe, htmlunit

我正在使用 HtmlUnit 创建一个网络爬虫。我正在处理的网站充满了 iframe，但 HtmlUnit 不会自动加载 iframe 的内容。

我怎样才能做到这一点，或者通过 DOM 设置 iframe 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:58:27.327

也许它是加载到您的 iframe 中的另一个网站？[在这种情况下，由于同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法获取内容。

# c++ - 确保派生类构造函数必须调用特定的基类方法

> ID：13787901
> 
> 赞同：3
> 
> 时间：2012-12-09T13:40:39.237
> 
> 标签：c++, inheritance, c++03

在 C++(03) 类中，我有一个成员变量，*必须*在对象构造期间为其赋值。但是，只有派生类可以计算所需的值。正如这篇文章中所讨论的，[C++ 是否要求您从其派生类初始化基类成员？](https://stackoverflow.com/questions/12169194/does-c-require-you-to-initialize-base-class-members-from-its-derived-class)，我知道派生类不能*初始化*基类成员，但是赋值对我来说就足够了。

因此，我在基类中提供了一个方法来分配一个值，但我不知道如何强制派生类调用它。下面的示例代码说明了这一点。

```
class Base {
public:
    Base() {}
    setFoo(unsigned inFoo) { foo = inFoo; }
private:
    unsigned foo;
};

class Derived : public Base {
    Derived() : Base() { 
        unsigned desired = ... // do calculations to get the desired value
        setFoo(desired);  // --> how to ensure that derived class calls this?
    }
}; 
```

然后`foo`由其他几个基类方法使用。即使我在 中设置了“标志” `setFoo()`，也没有可以检查它的“后构造函数”方法。在使用的基类中还有其他几种方法`foo`。我*可以*在那里检查它，但这样做太乏味、容易出错且效率低下。

如果以前有人问过这个问题，我深表歉意。在通过搜索“确保派生类构造函数必须调用特定的基类方法”和“强制派生类分配基类成员”来询问之前，我确实尝试在这里找到它。我遇到了一些有用的帖子[如何在 C++ 中的派生类的构造函数中初始化基类的 const 变量？](https://stackoverflow.com/questions/3904759/how-can-i-initialize-a-const-variable-of-a-base-class-in-a-derived-class-constr)并[强制派生类使用基类的构造函数](https://stackoverflow.com/questions/12783643/force-a-derived-class-to-use-the-constructor-of-the-base-cass)，但不幸的是他们没有解决我的问题。

您能否建议我一种合适的方法来解决这种情况？编译时检查解决方案是可取的，但如果不可能，运行时检查也会有所帮助。虽然我不能使用 C++11 来解决我的问题，但我也很乐意学习任何 C++11 解决方案。感谢您的考虑。

**编辑**当然，将其记录为要求也是一种选择，但我想了解是否有程序化解决方案。

**Edit2**我同意应该在构造函数参数中传递值的答案，如果我必须`Base`从头开始编写，我不会要求这种方法。问题是由于遗留原因，`Base`已经有几个构造函数参数（9），我希望通过将它们“卸载”到构造函数主体来避免添加更多参数（3）。但从长远来看，必须重构代码。

**Edit3**对这么多的编辑感到抱歉。我*可以随意*修改`Base`课程，但`Derived`课程在客户端代码中，我无法控制。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T13:47:40.987

如果派生类的构造函数必须调用`setFoo()`，那么我认为这是一个设计问题。最好设计基类，使其构造函数将所需值作为参数，并让派生类将计算值传递为：

```
class Base {
public:
    Base(unsigned int foo) : m_foo (foo) {}  //define this constructor
private:
    unsigned int m_foo; //member data
};

class Derived : public Base {
    Derived() : Base(computeValue()) 
    { 
    }
private:
    static unsigned int computeValue() //it may take argument(s)
    {
        unsigned int desired = ... //do calculations to get the desired value
        return desired;
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T13:50:28.350

如果一个对象的构造需要一个值，它应该是构造函数的参数。

```
class Base {
public:
    Base(unsigned inFoo) { setFoo(inFoo); }
    setFoo(unsigned inFoo) { foo = inFoo; }
private:
    unsigned foo;
};

class Derived : public Base {
    Derived() : Base(compute_desired()) { }

}; 
```

这里`compute_desired`可以是 的成员`Derived`，也可以是任何进行计算的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:57:11.610

我认为不可能强制派生类在其构造函数中调用基类方法。您可能能够通过其他响应中的技术强制实现/调用，但据我所知，绝对确保它在 Derived 的构造函数中完成是不可能的，除非可以修改基类

# java - GWT Eclipse change web page background color?

> ID：13787904
> 
> 赞同：-1
> 
> 时间：2012-12-09T13:41:00.630
> 
> 标签：java, eclipse, gwt

How to change the background color of a web page in GWT? I am coding in MVP and using absolute panel as the base panel e.g.

```
AbsolutePanel absolutePanel;
etc..
absolutePanel = new AbsolutePanel();
absolutePanel.setSize(Window.getClientWidth() + "px", Window.getClientHeight() +        "px");
absolutePanel.addStyleName("boardBackground");
initWidget(absolutePanel); 
```

The problem is when I ran the program, there is a white border around the panel, is there other way to color the whole page? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:09:47.513

# ****请详细说明问题****

**如果您想更改网页背景颜色，请在您的应用程序 HTML 文件中进行。如果您想为您的面板执行此操作，请使用样式名称并做任何您想做的事情......如果样式在您的 css 类中被覆盖，请使用***!important*****

# php - Displaying php output with html

> ID：13787909
> 
> 赞同：0
> 
> 时间：2012-12-09T13:41:26.563
> 
> 标签：php, ajax, html

I am having trouble displaying output from a php script in html for a countdown timer. The times required are input through.

```
<div id="countdown">                                                                <!--        Display input for the kitchen timer     -->
                 <form method="post" action="display_timer()">
                        <br>
                        <br>
                        <h1>Enter the hours required:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="hours"><br></h1>
                        <h2>Enter the Minutes required:&nbsp;&nbsp;<input type="text" name="minutes"><br></h2>
                        <h3>Enter the Seconds required:&nbsp;&nbsp;<input type="text" name="seconds"><br></p>
                        <br>
                        <br>
                   <h4><input type="submit" name="Submit" value="Submit"></h4>
                 </form>

            </div> 
```

Called from a php script with ajax below

```
function display_timer(){

        var myAjax9 = new XMLHttpRequest;
        myAjax9.open("GET", "timer.php");  
        myAjax9.onreadystatechange =    function(){
            if (myAjax9.readyState == 4 && myAjax7.status == 200){

                document.getElementById("timerdisplay").innerHTML = hours+" hours, "+minutes+" minutes, "+seconds+" seconds";
                IT=window.setTimeout( "setcountDown()", 10 );
                if (hours == '00' && minutes == '00' && seconds == '00') { 
                    seconds = "00"; 
                    window.clearTimeout(IT);
                    window.alert("Time is up. Press OK to continue.");
                }   
            }
        }
} 
```

and displayed with

```
 <div id="timerdisplay"> <?php echo "$hoursLeft hours, $minutesLeft minutes, $secondsLeft seconds";?></div>     <!--       Display output for the kitchen timer     --> 
```

I can put the timer php code on if required.

I am new to php and Ajax so may be doing something hopelessly wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T16:04:23.387

如果您需要将时间数据发送到 PHP，那么您需要解决这个问题：

*   表单的[Action](http://www.w3.org/TR/html401/interact/forms.html#h-17.3)属性应该具有将接收提交数据的表单的 url。
*   但是：如果您想发送数据 throw ajax 那么您可能需要更改`action="display_timer()"`for ，并在函数的最后一行`onsubmit="return display_timer()"`添加 a （这将取消提交，以便您可以使用 ajax）。`return false``display_timer`
*   此外，如果要检索您的数据，则抛出一个 ajax 调用，那么您`timer.php`应该发送类似这样的内容（JSON 表达式）：

    > `&lt;?php echo "{\"hours\":\"$hoursLeft\", \"minutes\":\"$minutesLeft\", \"seconds\":\"$secondsLeft\"}";?&gt;`

然后，您的`display_timer`功能将是：

```
function display_timer(){
    var cParams =   "hours=" + escape(document.getElementsByName("hours")[0].value) +
                    "&minutes=" + escape(document.getElementsByName("minutes")[0].value) +
                    "&seconds=" + escape(document.getElementsByName("seconds")[0].value);

    var myAjax9 = new XMLHttpRequest();
    myAjax9.open("GET", "timer.php" + "?" + cParams);  
    myAjax9.onreadystatechange =    function(){
        if (myAjax9.readyState == 4 && myAjax7.status == 200){
            var oMyTime = JSON.parse(myAjax9.responseText);
            oMyTime.totalSeconds = oMyTime.hours*3600+oMyTime.minutes*60+oMyTime.seconds;
            oMyTime.toString = function(){
                return oMyTime.hours+" hours, "+oMyTime.minutes+" minutes, "+oMyTime.seconds+" seconds"
            };

            var oDisplay = document.getElementById("timerdisplay");
            oDisplay.innerHTML = oMyTime.toString();

            var fUpdateTimer = function(){
                if(oMyTime.totalSeconds>0){
                    oMyTime.totalSeconds--;
                    oMyTime.hours = Math.floor(oMyTime.totalSeconds/3600); 
                    oMyTime.minutes = Math.floor((oMyTime.totalSeconds-oMyTime.hours*3600)/60); 
                    oMyTime.seconds = oMyTime.totalSeconds%60; 
                    oDisplay.innerHTML = oMyTime.toString();
                }else{
                    window.clearInterval(IT);
                    window.alert("Time is up. Press OK to continue.");
                }
            };
            var IT=window.setInterval(fUpdateTimer, 1000);
        }
    }
    return false;
}//END display_timer() 
```

# java - 创建静态抽象类的实例

> ID：13787910
> 
> 赞同：2
> 
> 时间：2012-12-09T13:41:30.393
> 
> 标签：java, android, abstract-class

我知道抽象类不能被实例化。但我对下面的代码有疑问。此代码是 android 位图趣味演示 ( [http://commondatastorage.googleapis.com/androiddevelopers/shareables/training/BitmapFun.zip](http://commondatastorage.googleapis.com/androiddevelopers/shareables/training/BitmapFun.zip) ) 的一部分。

```
// ImageWorkerAdapter class is nested in another abstract class ImageWorker
public static abstract class ImageWorkerAdapter
{
public abstract Object getItem(int num);
public abstract int getSize();
}

//this snippet is seen in Images.java
public final static ImageWorkerAdapter imageWorkerUrlsAdapter = new ImageWorkerAdapter() { 
@Override
public Object getItem(int num) {
return Images.imageUrls[num];
} 
```

我无法理解如何创建抽象类的实例。请帮助我理解这段代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T13:44:52.507

`ImageWorkerAdapter`此代码表示扩展抽象类的匿名类的初始化：

```
new ImageWorkerAdapter() { 
    @Override
    public Object getItem(int num) {
    return Images.imageUrls[num];
} 
```

实际上，**匿名**实现是在花括号之间定义的。

作为一个匿名类，依赖抽象类或接口是完全有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T13:45:43.990

您显示的代码未显示正在实例化的抽象类。

它显示了一个正在实例化的[匿名类。](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)在这种情况下，匿名类扩展了一个抽象类。您还可以在匿名类中实现接口，`Runnable`这是一个非常常见的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T13:46:28.943

您的代码没有实例化抽象类，而是定义了新的匿名抽象类，其中包括扩展和实现（覆盖）其他抽象类。

# java - Eclipse 看不到我的 listview 自定义布局

> ID：13787914
> 
> 赞同：0
> 
> 时间：2012-12-09T13:41:48.467
> 
> 标签：java, android, eclipse, listview, layout

一开始：我是 Android 和 Java 编程的新手，但我对其他编程语言如 C、C++、Perl、PerlTk、OpenGL、Pascal、微控制器编程（C、Assembly）等有很多经验......我进行了一项研究，我尝试了很多东西，但没有任何帮助。

所以我想在我的列表视图中更改字体大小和字体颜色。我找到了2个解决方案：

1.  破解风格。这是可行的，但是如果我修改我的样式而不是修改所有其他元素，那么从这种样式构建的是什么。所以不，如果我仍然选择这种方法，我将无法修改 listview 按下和未按下状态背景颜色。

2.  自定义布局。我更喜欢这种方法，但是如果我参考布局，日食会说：“无法解析，或者不是字段”

我的代码：

```
public class Btcall extends Activity 
{
  private ListView list;
  final int REQUEST_ENABLE_BT = 1;
  TextView kiirni;
  TextView scanned;
  View view2;
  View view3;
  Button connectbutton;
  private ArrayAdapter<String> founddevices = null;

  @Override
  protected void onCreate(Bundle savedInstanceState) 
  {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_btcall);
    view2=(View) findViewById(R.id.view2);
    view3=(View) findViewById(R.id.view3);
    connectbutton=(Button) findViewById(R.id.button1);
    kiirni=(TextView)findViewById(R.id.text1);
    scanned=(TextView)findViewById(R.id.scanned);
    list = (ListView) findViewById(R.id.list1);
  }

  public void irddki(View v) 
  {
    BluetoothAdapter bluetooth = null;
    BroadcastReceiver mReceiver = null;
    bluetooth = BluetoothAdapter.getDefaultAdapter();
    founddevices = null;
    if(bluetooth != null)
    {
      String status;
      if (bluetooth.isEnabled()) 
      {
        String mydeviceaddress = bluetooth.getAddress();
        String mydevicename = bluetooth.getName();
        status = mydevicename + " : " + mydeviceaddress;
        Toast.makeText(this, status, Toast.LENGTH_LONG).show();

        bluetooth.startDiscovery(); 
        mReceiver = new BroadcastReceiver() 
        {
          public void onReceive(Context context, Intent intent) 
          {
            String action = intent.getAction();

            if (BluetoothDevice.ACTION_FOUND.equals(action)) 
            {
              BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

              founddevices.add(device.getName() + "\n" + device.getAddress());
            }
          }
        };
        scanned.setVisibility(View.VISIBLE);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        lp.setMargins(470, 270, 0, 0);
        connectbutton.setLayoutParams(lp);
        connectbutton.setText("Scan again");
        kiirni.setVisibility(View.GONE);
        list.setBackgroundResource(R.color.Lightgrayy);
        list.setVisibility(View.VISIBLE);

        view2.setVisibility(View.VISIBLE);
        view3.setVisibility(View.VISIBLE);
        /*HERE IS THE PROBLEM--->*/
        founddevices = new ArrayAdapter<String>(this, android.R.layout.mylist);
        list = (ListView) findViewById(R.id.list1);
        list.setAdapter(founddevices);

        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND); 
        registerReceiver(mReceiver, filter);
      }
      else
      {
        if (!bluetooth.isEnabled()) 
        {
          Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
          startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
      }
    }
  }

  public void close(View v) 
  {
    moveTaskToBack(true);
  }
} 
```

我写了一个自定义布局，我把它放在 layouts 文件夹中，它也在 R 文件夹中。

Eclipse 仍然看不到它......也许我必须导入一些东西？我确信这是一个菜鸟 Q，但我会很感激答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:13:25.930

尝试仅使用：

```
R.layout.mylist 
```

代替：

```
android.R.layout.mylist 
```

# php - 测试文本输入中的空格键值

> ID：13787916
> 
> 赞同：-3
> 
> 时间：2012-12-09T13:41:54.707
> 
> 标签：php

有没有办法测试是否在表单文本输入中按下了空格键。我知道 nthe value 或 keycode 是 32 并尝试了使用以下语句的各种选项：

```
elseif($rec =='' || $rec == 32 || $rec == ' ') 
```

但仍然无法识别。我将不胜感激，我发布的代码只是我用来检查价值的相关代码的一部分。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:46:22.073

查看`trim()`和`strstr()`函数。我认为这是你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:52:05.467

使用[`preg_match()`](http://php.net/manual/en/function.preg-match.php)

```
$subject = "abcdef";
$pattern = '/\s/';
if (preg_match($pattern,)) {...} 
```

使用 PHP [`strpos()`](http://php.net/manual/en/function.strpos.php)：

```
$mystring = 'Hello world';
$findme   = ' ';
$pos = strpos($mystring, $findme);

// Note our use of ===.  Simply == would not work as expected
// because the position of 'a' was the 0th (first) character.
if ($pos === false) {
    echo "no spaces :(";
} else {
    echo "Spacing out !!! :)";
} 
```

# internet-explorer - IE does not scale my images in a fluid layout but instead cuts them off. Also: position:fixed does wild things

> ID：13787917
> 
> 赞同：1
> 
> 时间：2012-12-09T13:42:03.233
> 
> 标签：internet-explorer, scale, percentage, image-resizing, fluid-layout

I have this fluid layout concept which works kinda okayish in Firefox, opera, chrome, but goes awry when opened wih IE7\. I do not have to bother with IE6, but would like to avoid browser-specific CSS files.

The problem is that a) IE does not resize my funky little balls and b) does cut them off at the sides when I make the window smaller horizontally.

the weird thing is that the cutting off does not happen vertically, even if it should be the same.

Take mind that I am a graphic designer, not at all an programmer. My code is probably awful, and I will probably not understand answers too exhaustive or too short...

here is an exerpt of my code:

```
#body {
height: 100%;
width: 100%;
margin-top: 0px;
margin-right: 0px;
margin-bottom: 0px;
margin-left: 0px;
background-color:white;
font-size:100%;
}

#gesamt {
position: absolute;  
height: 100%;
width: 100%;
margin-top: 0px;
margin-right: 0px;
margin-bottom: 0px;
margin-left: 0px;
min-width:800px;
background-color:yellow;
}

#bg2k {
background-image: url(object23.png);    
background-size: 100%;  
width: 20%;         
height: 100%;           
background-repeat: no-repeat;   /* kein repeat des hintergrunds */
position: absolute;    
bottom: -70%;   
left: 2%;
z-index:8;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-o-user-select: none;
user-select: none;
}

#bg2l {
background-image: url(object24.png);    
background-size: 100%;  
width: 20%;         
height: 100%;           
background-repeat: no-repeat;   
position: absolute;    
bottom: -70%;  
left: 9%;
z-index:7;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-o-user-select: none;
user-select: none;
}

#bg2m {

background-image: url(object25.png);    
background-size: 100%;  
width: 20%;         
height: 100%;           
background-repeat: no-repeat;   
position: absolute;    
bottom: -70%;   
left: 16%;
z-index:6;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-o-user-select: none;
user-select: none;
} 
```

another interesting problem is that, as soon as I say position: fixed with any of my little objects, all hell broke lose, and the layout splattered all over the page. Why?

Oh, and I just found that I never put a # before body. does it matter?

# hibernate - configuring Hibernate with Spring MVC Template in STS

> ID：13787925
> 
> 赞同：0
> 
> 时间：2012-12-09T13:43:22.940
> 
> 标签：hibernate, spring-mvc, configure, hibernate.cfg.xml

I use STS and i've created MVC template project. I want to use hibernate but i don't know where to put hibernate.cfg.xml. In default projects i just put it in src/ folder.

```
 static {

        try {

            // Create the SessionFactory from hibernate.cfg.xml
            //AnnotationConfiguration
            sessionFactory = new Configuration().configure().buildSessionFactory();

        } catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {

        return sessionFactory;

    }
} 
```

I know that i can strictly add path to Hibernate.cfg.xml like that:

```
sessionFactory = new Configuration().configure("XXX").buildSessionFactory(); 
```

where XXX is the path to hibernate.cfg.xml. Where should i put hibernate.cfg.xml if i will use "/hibernate.cfg.xml" like path? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:49:38.643

您必须将默认包放入源目录（无论其名称如何）中，以便 Eclipse 在编译时将其复制到目标文件夹，从而在执行应用程序时在类路径的根目录中可用。

# ios - 重用组件的最佳方式？

> ID：13787938
> 
> 赞同：0
> 
> 时间：2012-12-09T13:44:55.520
> 
> 标签：ios, objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。为了能够重用代码，我创建了一个名为 elements.rb（一个模块）的文件，其中有许多函数可以呈现不同的内容。一切正常。

这是功能之一：

```
def create_nav_button (hash = {})

    # Set the default values

    defaultFont = UIFont.fontWithName('Avenir-Medium', size:13)
    buttonNormal = UIImage.imageNamed('navbar/button.png')
    buttonSelected = UIImage.imageNamed('navbar/button_selected.png')

    # Create the button

    button = UIBarButtonItem.alloc.init
    button.title = hash[:title]
    button.action = hash[:action] || 'open'
    button.target = self
    button.setBackgroundImage(buttonNormal, forState:UIControlStateNormal, barMetrics:UIBarMetricsDefault)
    button.setBackgroundImage(buttonSelected, forState:UIControlStateHighlighted, barMetrics:UIBarMetricsDefault)
    button.setTitleTextAttributes({UITextAttributeFont => defaultFont}, forState:UIControlStateNormal)

    # Add button to navbar

    if (hash[:position] == 'right')

      self.navigationItem.rightBarButtonItem = button

    else

      self.navigationItem.leftBarButtonItem = button

    end

  end 
```

这就是我在控制器文件中调用它的方式：

```
create_nav_button (:title => 'Info', :action => 'project_details', :position => 'right') 
```

这是重用元素的好方法吗？如何动态更改按钮的标题？

感谢所有输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:37:42.863

这样可行。您需要在方法结束时返回按钮：

```
def create_nav_button(hash={})
  # lots of stuff
  button
end 
```

然后像这样调用它：

```
@right_button = create_nav_button (:title => 'Info', :action => 'project_details', :position => 'right') 
```

我不知道您可以更改标题的简单方法。您可以随时删除按钮并重新添加新标题。

# c# - 在 Windows 8 中，在页面之间传递对象是传递它们的引用还是传递它们的副本？

> ID：13787944
> 
> 赞同：0
> 
> 时间：2012-12-09T13:45:59.047
> 
> 标签：c#, reference, windows-8, pass-by-reference

我有以下情况：

```
Image img = new Image();
img.Visibility = false;
img.Source = "..some path here..";
Frame.Navigate(typeof(Photos), img); 
```

在导航到新的照片页面时，我传递了`image`我刚刚创建的对象。

这个新`image`对象是否会作为原始对象的副本传递，从而分配更多的内存，或者这个对象是否会作为引用继续到新页面上？

如果这不能作为参考传递 - 你将如何实现它？在我的应用程序的生命周期中将对象从一个页面移动到另一个页面，而不必每次都重新创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:49:23.093

由于 Image 是引用类型，因此传递了一个引用。

我建议从头到尾阅读 C# 初学者书籍——引用类型的概念是整个语言设计的核心基础。

# nant - Nant and satellite assemblies

> ID：13787953
> 
> 赞同：0
> 
> 时间：2012-12-09T13:47:24.077
> 
> 标签：nant, satellite-assembly

Am looking for a Nant sample with satellite assemblies. I googled now for hours without success.

I got this far:

```
<resgen todir="${build}">
  <resources>
     <include name="${src}/Resources/*.resx" />
  </resources>
</resgen> 
```

and the csc subelement:

```
<resources prefix="Resources">
  <include name="${build}/ResourceManagement.resources" />            
</resources> 
```

But how do I do create the satellite assemblies? When I try to include non neutral resources I get a strange error (for example ResourceManagement.de.resources:

```
System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.RuntimeCompatibilityAttribute' from assembly 'myassembly' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:57:42.507

好的，我会回答我的问题，也许有更好的解决方案：

我没有找到创建附属程序集的任务。但是，您可以使用**al**任务创建一个。

```
<al output="${build}/de/myassembly.resources.dll" 
          target="lib"
          culture="de-CH">

         <sources>
            <include name="${build}/Resources.ResourceManagement.de.resources" />            
         </sources>        

</al> 
```

由于我没有找到如何为资源文件设置命名空间，我只是将其重命名：

```
<move file="${build}/ResourceManagement.de.resources"
               tofile="${build}/YourNamespace.ResourceManagement.de.resources"
               overwrite="true"/> 
```

# php - PHP：如果正确，则更新数据库

> ID：13787954
> 
> 赞同：-1
> 
> 时间：2012-12-09T13:47:25.137
> 
> 标签：php, sql, if-statement, sql-update, joomla2.5

我开始编写一个脚本来检查用户在数据库中的注册日期，如果用户“过期”，该脚本会阻止他访问该站点。该脚本应该每天自动运行（cron 作业？）并且每次都重复相同的过程。不幸的是，由于某种原因，UPDATE 功能不起作用，我不明白为什么。提前致谢！

编码：

```
// Connect to server and select databse.

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// To protect MySQL injection (more detail about MySQL injection)

$sql="  SELECT id, group_id, registerDate
    FROM w9phl_users
    INNER JOIN w9phl_user_usergroup_map ON w9phl_users.id = w9phl_user_usergroup_map.user_id
    WHERE registerDate < NOW( )
    AND group_id = 3 
    ";

$result=mysql_query($sql);

if (!$result) {
    die('Could not query:' . mysql_error());
}

while ($details = mysql_fetch_assoc($result)) {

if ($details['id'] > 904)

   {$sql=" UPDATE w9phl_users
        SET block=1 
        WHERE id > 904";
   }

else
  {
  echo "only IDs greater than 904 is permitted.";
  }     

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T13:50:13.950

您忘记运行查询。您只是将它保存在一个变量中，但没有执行。

```
$sql = "UPDATE w9phl_users
        SET block=1 
        WHERE id > 904";
mysql_query($sql); 
```

# c++ - Call function parameters in C++11 using variadic templates

> ID：13787955
> 
> 赞同：3
> 
> 时间：2012-12-09T13:47:34.150
> 
> 标签：c++, templates, c++11

Following on [@Xeo's excellent code](https://stackoverflow.com/questions/8476975/call-function-with-parameters-extracted-from-string):

I'm wondering how to template the function's return type, so that instead of interpreting the return through:

```
std::string* out_opt 
```

it could instead return the appropriate type for a given function.

Also, following on @Xeo's example code, I wondering what the best way to bind member functions that have multiple arguments would be...

```
func_dict["someFunc"] = stream_function<int(int,int)>( std::bind( &MyClass::functionName, instanceOfMyClass, std::_1, std::_2 ) ); 
```

Is this a good approach? Is there any way to do away with needing to explicitly state _1, _2, etc.?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:58:03.303

如果这是 C++11，为什么不

```
func_dict["someFunc"] = stream_function<int(int,int)>( 
    [&](int x, int y)
    {
      MyClass::functionName(instanceOfMyClass, x, y);
    }); 
```

否则，我认为您总是需要以一种或另一种方式明确说明论点。

# c# - How to determine if a process is running by process name

> ID：13787957
> 
> 赞同：-1
> 
> 时间：2012-12-09T13:47:39.923
> 
> 标签：c#, windows-mobile, compact-framework

> **Possible Duplicate:**
> [How to get all processes running in .net cf](https://stackoverflow.com/questions/7430982/how-to-get-all-processes-running-in-net-cf)

I have a process called `myprocess.exe`. How can I know if this process is running in my smart device? On the device is installed Windows Mobile 6.1.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:01:09.283

[我在http://code.google.com/p/win-mobile-code/source/browse/#svn%2Ftrunk%2Fcpumon%2FProcessorUsage%2FCpuMon2](http://code.google.com/p/win-mobile-code/source/browse/#svn%2Ftrunk%2Fcpumon%2FProcessorUsage%2FCpuMon2)有一个名为 cpumon2 的谷歌代码项目

这显示了如何构建可用于搜索命名进程的正在运行的进程列表，然后您就知道它是否正在运行。代码使用reateToolhelp32Snapshot，见[http://code.google.com/p/win-mobile-code/source/browse/trunk/cpumon/ProcessorUsage/CpuMon2/Process.cs](http://code.google.com/p/win-mobile-code/source/browse/trunk/cpumon/ProcessorUsage/CpuMon2/Process.cs)

我不能在这里发布代码，因为它被分成几个文件（类）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T19:58:26.387

如果您只想直观地验证您的进程是否正在运行，您可以使用作为 VS2008 远程工具的一部分提供的 Remote Process Viewer。我假设您的设备是通过 ActiveSync 或 WMDC 连接的。

# actionscript-3 - 条件编译与多个声明？

> ID：13787959
> 
> 赞同：0
> 
> 时间：2012-12-09T13:47:49.547
> 
> 标签：actionscript-3, apache-flex, flex4.5

我有 3 个项目依赖于同一个共享库。

库中有一个单例类，它在整个项目中提供全局共享对象，无论如何，这个全局共享对象是一个类的实例，这取决于平台，例如：

在移动应用程序上：

```
public static var message : TMobileMessage; 
```

在桌面应用程序上：

```
public static var message : TDesktopMessage; 
```

在网络应用程序上：

```
public static var message : TWebApplication; 
```

*   如何在声明上实现条件编译，因为以下代码不起作用：

    ```
    If( CONFIG::applicationType == 'mobile' )
        public static var message : TMobileMessage;
    else
       If( CONFIG::applicationType == 'desktop' )
           public static var message : TDesktopMessage;
       else
           If( CONFIG::applicationType == 'web' )
               public static var message : TWebApplication; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:21:02.573

我建议以下。

1.  像这样使用条件编译器的声明：

    CONFIG::MOBILE { public static var message : TMobileMessage; }

    CONFIG::DESKTOP { public static var message : TDesktopMessage; }

    CONFIG::WEB { public static var message : TWebApplication; }

2.  为每个配置创建一个 flex-config.xml。在每个 config.xml 中声明这些条件：

**弹性配置-mobile.xml**

```
<compiler>
        <define>
            <name>CONFIG::MOBILE</name>
            <value>true</value>
        </define>
        <define>
            <name>CONFIG::DESKTOP</name>
            <value>false</value>
        </define>
        <define>
            <name>CONFIG::WEB</name>
            <value>false</value>
        </define>
</compiler> 
```

**flex-config-desktop.xml**

```
<compiler>

        <define>
            <name>CONFIG::MOBILE</name>
            <value>false</value>
        </define>
        <define>
            <name>CONFIG::DESKTOP</name>
            <value>true</value>
        </define>
        <define>
            <name>CONFIG::WEB</name>
            <value>false</value>
        </define>

</compiler> 
```

**弹性配置 web.xml**

```
<compiler>

        <define>
            <name>CONFIG::MOBILE</name>
            <value>false</value>
        </define>
        <define>
            <name>CONFIG::DESKTOP</name>
            <value>false</value>
        </define>
        <define>
            <name>CONFIG::WEB</name>
            <value>true</value>
        </define>

</compiler> 
```

1.  在构建脚本或 IDE 中使用适当的 flex-config。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:50:48.027

如果将 CONFIG 定义为编译器参数，或修改 flex_config.xml，则可以使用以下内容：

（ TDesktopMessage、TMobileMessage 等应该扩展 IMessage 或任何你想要的。）

```
public static var message:IMessage;

CONFIG::mobile
{
  msg = "mobile"; //or msg = messages[mobile] or however you want to declare
}

CONFIG::desktop
{
  msg = "desktop";
}

CONFIG::web
{
  msg = "web";
} 
```

# bash - bash：flock 会阻止一起运行脚本吗？

> ID：13787964
> 
> 赞同：2
> 
> 时间：2012-12-09T13:48:16.507
> 
> 标签：bash, flock

对不起，我不能完全集中我的问题。

我正在尝试使用flock 来避免同时运行脚本，就像在接受的答案中描述的那样： [如何防止脚本同时运行？](https://stackoverflow.com/questions/169964/how-to-prevent-a-script-from-running-simultaneously)

我记得有人说这样可能会出现根本无法运行脚本之类的问题。

有人知道这种可能性吗？

我尝试了以下场景：

1.  运行脚本后立即运行它 - 它第二次完美运行
2.  `CTRL`用+中断脚本，`C`然后再次运行 - 第二次运行没问题
3.  在脚本运行时突然关闭机器，打开机器电源并重新运行脚本 - 结果相同：没问题

我想不出更复杂的可能性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T14:04:03.927

顾名思义，该`flock`实用程序包装了`flock(2)`系统调用，其[文档](http://linux.die.net/man/2/flock)指出它将锁与打开文件表中的 fd 条目相关联。当最后一个文件描述符关闭时，打开的文件会被删除，并且描述符本身就是临时资源，当进程以任何方式退出时会自动清理，包括`kill -9`. 强制关闭机器会擦除正在运行的系统的整个状态，因此与打开的文件相关的锁也无法在这种情况下存活。因此，及时退出的脚本不应阻塞系统。

想到的一种现实的阻塞可能性是脚本有一个导致它无限期挂起的错误，这确实会阻止其他实例运行。如果在实践中预计会发生这种情况，可以通过`$$`在获取锁后立即将脚本 PID ( ) 写入锁文件中来处理。在获取锁之前，等待锁的进程将使用`-w`to 选项指定超时`flock`。如果超时，它将从锁文件中读取挂锁所有者的PID，杀死所有者，并重复锁定过程。

一个理论上的问题是硬编码的文件描述符编号 200。如果您的脚本打开了 200 个文件，或者是从一个打开 200 个文件但没有 close-on-exec 位的程序生成的，您将破坏现有的文件描述符。这在实践中极不可能发生。

# java - 令牌构造不正确

> ID：13787967
> 
> 赞同：0
> 
> 时间：2012-12-09T13:48:38.087
> 
> 标签：java, text, tokenize

我正在尝试使用以下代码标记文本文件：

```
 String fileContent = "";  
    String fileContentTokens[];  
    try{  
        fileContent = new Scanner(new File(fname)).useDelimiter("\\Z").next();   
    } catch(Exception ex)  {  
        System.out.println(ex.getMessage());  
    }  

    fileContent = fileContent.replaceAll("\\s*([,.?!\"'()-:*;])\\s*", " $1 ");
    //System.out.println(fileContent);
    fileContentTokens = fileContent.split(" "); 
```

问题是标记没有正确形成，我的意思是有些单词仍然带有引号，有些单词仍然带有撇号。上面的代码应该在每个标点符号之间放置空格，因此它不会附加到它自己的单词上。例如：“那很酷”应该是“那很酷”。但出于某种原因，它没有这样做。它只是为一些单词而不是全部这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:49:49.003

来自 Java API：**请注意，替换字符串中的反斜杠 (\) 和美元符号 ($) 可能会导致结果与将其视为文字替换字符串时的结果不同；见** `Matcher.replaceAll`。**如果** `Matcher.quoteReplacement(java.lang.String)` **需要，用于抑制这些字符的特殊含义**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T14:12:34.540

# c++ - 在更接近零的有限大小数组中选择浮点数的有效方法是什么？

> ID：13787968
> 
> 赞同：4
> 
> 时间：2012-12-09T13:48:46.507
> 
> 标签：c++, math, floating-point

对于每个函数，我得到/拥有一个需要选择的有限大小的浮点数组。

所以如果我有类似的东西

1)

```
 {-0.02, 0.5, 0.98, -0.15, etc... } 
```

我会从这个列表中选择“-0.02”。

2)

```
 {-0.78, 0.003, 0.1, -1.8, etc... } 
```

现在，我会从这个列表中选择“0.003”。

这只是一个例子。在我的真实程序中，我有 5-6 个小数点的浮点数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T14:04:09.577

[`std::min_element`](http://en.cppreference.com/w/cpp/algorithm/min_element)有一个采用比较函数对象的重载；这就是我在这里使用的：

```
float val = *std::min_element(std::begin(v), std::end(v),
    [](float a, float b) { return fabs(a) < fabs(b); } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T13:52:52.737

无论如何，您必须遍历数组上的每个数字，因此最有效的答案将在 O(n) 中。

一旦你知道了这一点，你就会意识到，只要检查每个数字并检查你选择的最后一个数字是否接近于零，就可以达成交易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T14:30:21.890

使用带有比较功能的[std::min_element](http://en.cppreference.com/w/cpp/algorithm/min_element)应该归档您想要的内容。

```
template<class T> 
const T& abs_min(const T& a, const T& b)
{
    return (fabs(a) < fabs(b)) ;
}

const SIZE = 5;
float v[SIZE ] {-0.78, 0.003, 0.1, -1.8, 0.8};
float val = *std::min_element(v, v+SIZE , min_abs); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T14:09:22.760

*   如果您必须使用数组并且它的大小很小 - 只需像这样迭代`std::min_element`
*   如果您可以自由选择订购的容器，请使用`std::set<>`。然后使用并与`it=std::set::lower_bound(0)`比较。这将更好地扩展大数据大小`*it``*(it+1)`

# objective-c - UIBezierPath containsPoint：不能正常工作？（更新：superview中的触摸位置如何处理？）

> ID：13787971
> 
> 赞同：2
> 
> 时间：2012-12-09T13:48:56.193
> 
> 标签：objective-c, ios, uibezierpath

所以我有 2 个 UIViews 女巫可以绘制一个 bezierpath 然后返回路径。然后我需要检查路径是否包含我在帮助下执行此操作的点`[path containsPoint:currentObject.position]`，它适用于其中一个视图，但不适用于另一个视图。一个视图位于 iPhone 的上半部分，另一个视图位于下半部分。最下面的那个不行。我试图切换视图，然后它是同样的问题，底部的不起作用。

这是一些代码：

在主视图控制器中：

```
-(void)didEndPath:(UIBezierPath *)path DrawView:(DrawView *)draw {
    if ([path containsPoint:currentObject.position]) {
        //do stuff
    }
} 
```

在drawview touches结束时我这样做：

```
[self.delegate didEndPath:currentPath DrawView:self]; 
```

为什么它不起作用，是不是视图有另一个来源然后self.view？我如何解决它？

编辑：

好的，所以我找到了问题，但没有找到解决方案。

如果我将 UIView 中的触摸方法从 this: `startPoint = [touch locationInView:self];`更改为 this，`startPoint = [touch locationInView:self.superview];`那么它会正确读取触摸，但我的路径不会绘制。问题仍然只是底部的uiview。那么我该如何更改，以便它在超级视图中返回一个带有触摸位置的路径，但在它自己内部绘制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T17:04:28.563

我通过制作2条路径解决了这个问题。一个有superview的观点，一个没有。它有效，但我不知道它是否是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T15:02:03.653

查看文档：

```
A point is not considered to be enclosed by the path if it is inside an open subpath,   
regardless of whether that area would be painted during a fill operation. Therefore, to
determine mouse hits on open paths, you must create a copy of the path object and  
explicitly close any subpaths (using the closePath method) before calling this method. 
```

我的猜测是你打开了一个子路径，所以 containsPoint 返回 NO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T00:03:07.877

您应该能够像这样转换视图之间的点

```
CGPoint locationInSuperView = [self convertPoint:point toView:self.superview]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-24T09:44:18.390

我有一个类似的问题，`containsPoint:`总是返回`NO`

我最终制作了自己的方法来检查是否`CGPoint`在`bounds``UIBezierPath`

```
- (BOOL)bezierPath:(UIBezierPath*)bezierPath containsPoint:(CGPoint)point
{
    CGRect bezierRect = bezierPath.bounds;

    if( bezierRect.origin.x < point.x && bezierRect.origin.x + bezierRect.size.width > point.x &&
       bezierRect.origin.y < point.y && bezierRect.origin.y + bezierRect.size.height > point.y ){
        return YES;
    }
    return NO;
} 
```

旁注：你也可以把它变成一个类别方法，我不需要那个。

# windows - How to have application download and install upgrade?

> ID：13787972
> 
> 赞同：2
> 
> 时间：2012-12-09T13:49:02.950
> 
> 标签：windows, windows-installer, setup-deployment, auto-update

Is it possible for a Windows application to download and install a new version of itself *without* the use of a `Windows Service`?

How would this work when using `MSI` based installations?

If the app checked periodically for a new version, eg. once per day, could the new `MSI` be downloaded and then installed automatically so that it replaced the existing version of the app?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:58:14.390

Windows Installer 是用于在 Windows 上安装应用程序的 Windows 服务。它包含在所有当前版本的 Windows 中。因此，您无法在不运行该服务的情况下安装 Windows Installer 程序包。

如果系统上未安装 Windows Installer 服务，则需要使用[Windows Installer Bootstrapping](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/122ea601-68a1-43c0-a8d1-42a881401ee1)方法来安装该服务。

# java - Wicket 与主方法（Wicket 是如何工作的？）

> ID：13787973
> 
> 赞同：4
> 
> 时间：2012-12-09T13:49:05.963
> 
> 标签：java, wicket, main

我是 Wicket 的新手，想了解这个框架是如何工作的。

在普通的 Java 应用程序中，程序计数器从 main 方法开始。为了从头了解应用程序，我通常将eclipse断点放在该方法的开头，然后一步一步地进行。

我的问题是，当 Wicket 应用程序启动时，首先会发生什么？如何遵循某些 Wicket 应用程序中的序列？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-09T16:37:42.287

Wicket 是一个 Java Web 应用程序框架，所以首先你必须了解一下。首先，请查看[Java EE 教程](http://docs.oracle.com/javaee/1.4/tutorial/doc/)。

在 Web 应用程序服务器的某个地方，实际上有一个 main 方法，它在服务器启动时运行*。*但是与使用 Wicket 编写的 Web 应用程序的连接非常松散。

当您编写和构建一个 wicket 应用程序时，您要做的一件事是创建一个 web.xml 文件，该文件向 Web 应用程序容器描述如何加载您的应用程序。这通常包括对[`WicketFilter`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/protocol/http/WicketFilter.html)应用程序的[WebApplication](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/protocol/http/WebApplication.html)子类的引用和引用。

该类`WicketFilter`拦截请求并将它们发送到您的应用程序。

此过程的更详细描述在[Wicket 应用程序的 wiki 页面 LifeCycle 上](https://cwiki.apache.org/WICKET/lifecycle-of-a-wicket-application.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-04T17:57:48.810

作为 Apache Wicket 的原始创建者，我建议您尽可能远离 Java EE。Wicket 背后的驱动理念是将面向对象的编程引入网络。还有其他框架可以做到这一点，但 Wicket 非常擅长。因此，关于 Wicket 如何使用 Servlet API 创建这种抽象的所有这些血腥细节确实是您无需担心的。如果您只是好奇并且真的想看看会发生什么，请在 WicketServlet 和/或 WicketFilter 中设置断点并单步执行。

现在有很多关于 Wicket 的书：

[https://wicket.apache.org/learn/books/index.html](https://wicket.apache.org/learn/books/index.html)

此外，网站上的参考指南非常完整：

[https://ci.apache.org/projects/wicket/guide/9.x/single.html](https://ci.apache.org/projects/wicket/guide/9.x/single.html)

特别看一下“请求处理的底层”部分以及“组件生命周期”部分：

[https://ci.apache.org/projects/wicket/guide/9.x/single.html#_under_the_hood_of_the_request_processing](https://ci.apache.org/projects/wicket/guide/9.x/single.html#_under_the_hood_of_the_request_processing) [https://ci.apache.org/projects/wicket/guide/9.x/single.html#_components_lifecycle](https://ci.apache.org/projects/wicket/guide/9.x/single.html#_components_lifecycle)

这应该让你对所发生的事情有一个很好的了解。但同样，你真的不需要知道任何这些东西就可以很好地利用这个框架。

——乔恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-16T00:42:13.783

您的 Wicket 应用程序依赖于您的 web.xml 文件的配置。话虽如此，您需要在该 web.xml 文件中指定 Wicket 过滤器，并将您自己的代表 Wicket 入口点的类传递给它们，该类 ( `WicketApplication`) 必须从类扩展`WebApplication`。

```
<filter>
    <filter-name>wicket.quickstar-wicket-example</filter-name>
    <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>
    <init-param>
        <param-name>applicationClassName</param-name>
        <param-value>com.quickstar.wicket.example.WicketApplication</param-value>
    </init-param>
</filter> 
```

在该类 ( `WicketApplication`) 中，您需要覆盖某些方法：

```
@Override
public Class<? extends WebPage> getHomePage()
{
    return HomePage.class;
} 
```

当您点击页面的 URL 时，您`HomePage.class`将是作为主页返回的网页。除了`HomePage.java`，您还必须将 HomePage.html 放在同一个包中，处于同一级别。

# graph - 将一个图表拟合到另一个图表中

> ID：13787981
> 
> 赞同：3
> 
> 时间：2012-12-09T13:49:53.467
> 
> 标签：graph

我正在尝试解决一个问题，该问题包括将图 A 拟合到另一个图 B 中。将要在 (A) 中拟合的图比另一个图 (B) 具有更少的节点和边。

我必须找到一种方法，用图 A 中的标签重新标记图 B，使图 A 中的所有边仍然存在于重新标记的图 B 中。

我相信图论中必须存在一个可以帮助我这样做的概念。甚至可能是一种有用的算法。所以，如果有人能指出我正确的方向，我会很高兴。

提前致谢。

# perl - 服务器看不到 cookie

> ID：13787982
> 
> 赞同：1
> 
> 时间：2012-12-09T13:50:04.553
> 
> 标签：perl, cookies, mechanize

服务器实际上无法识别我在下面的代码中使用 WWW::Mechanize 设置的 cookie 的原因是什么？

```
#!/usr/bin/perl

use strict;
use warnings;
use HTTP::Cookies;
use WWW::Mechanize;

my $cookie_jar = HTTP::Cookies->new(
    file => "$ENV{'HOME'}/lwp_cookies.dat",
    autosave => 1,
    ignore_discard => 1
);

my $mech = WWW::Mechanize->new(
    agent => 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13',
    cookie_jar => $cookie_jar
);

$mech->get("http://somesite.ru");

$cookie_jar->set_cookie(1, "__cookie", '1', "/", ".somesite.ru");

#the following line prints the cookie's data
print $cookie_jar->as_string, "\n";

$mech->post("http://somesite.ru/action.php",
    ['foo' => 'bar']); 
```

如您所见，服务器运行 php。如果我放入那个 action.php 脚本：

```
var_dump($_COOKIE); 
```

无论如何，我会得到一个空数组...谢谢您的所有建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T15:35:29.860

试试这个（删除域名之前的时期）：

```
$cookie_jar->set_cookie(1, "__cookie", '1', "/", "somesite.ru"); 
```

如果您访问，则将Cookie`.example.com`发送到服务器，依此类推，但如果您访问，*则不*发送。这是因为不匹配。`www.example.com``somehost.example.com`*`example.com``.example.com``example.com`*

# java - JBoss 7 JMX 文档

> ID：13787997
> 
> 赞同：0
> 
> 时间：2012-12-09T13:51:16.793
> 
> 标签：java, jboss7.x, jmx

我们有一个使用 JMX 来监控各种应用服务器的通用系统，我现在需要为 JBoss 7 配置监控。

我们过去依赖于这样一个事实，即以前版本的 JBoss 实现了 JSR-77 来识别“有趣的”MBean，并让用户可以选择他们想要查看的数据类型。根据[这个文档](https://docs.jboss.org/author/display/AS7/Getting+Started+Guide)和我在 JConsole 中看到的内容，JBoss 7 不再支持 JSR-77，而且我读到整个 JMX 子系统都进行了重新设计。

是否有描述新设计的 API 文档？

我想知道 MBean 是否以某种系统化的方式组织起来，这将使我更容易以编程方式扫描和配置它们。例如，对于 JSR-77，我可以使用 j2eeType 和 name 键属性来允许我的用户收集特定类型的 J2EE 对象的特定统计信息（例如所有 servlet 的服务时间），而无需编写知道的代码每一种 J2EE 类型。

我怎样才能用 JBoss 7 做这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T21:19:55.837

不幸的是，我不知道有关此的任何文档。对于 JBoss 7，Red Hat 想要显着减少 MBean（用户应该更喜欢 CLI）。但是在一些用户抗议之后，他们又在 7.2 版本中扩展了 MBean。

# c# - InstallShield 设置 c#

> ID：13787998
> 
> 赞同：0
> 
> 时间：2012-12-09T13:51:19.877
> 
> 标签：c#, installshield

我们经常需要在不同版本的平台代码发布时创建它们的设置。现在我们手动创建它。
任务真的很简单。有一个文件夹始终包含需要打包的文件。我需要的是一种使用 C# 应用程序创建设置的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:17:15.333

最简单的灵魂是使用： `New Project->Other Project Types->Setup AndDeployment VisualStudio Installer -> Setup Wizard`

只需按照说明进行操作

它就像使用任何工具箱项目一样简单。

在属性窗口中编辑项目属性

右键单击项目并为所有其他选项使用添加/查看菜单

见： [http ://www.dreamincode.net/forums/topic/58021-deploying-ac%23-application-visual-studio-setup-project/](http://www.dreamincode.net/forums/topic/58021-deploying-a-c%23-application-visual-studio-setup-project/)

[http://msdn.microsoft.com/en-us/library/cc766795.aspx](http://msdn.microsoft.com/en-us/library/cc766795.aspx)