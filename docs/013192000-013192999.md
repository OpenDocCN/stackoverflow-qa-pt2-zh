# StackOverflow 问答 13192000-13192999

# algorithm - 算法的内存和执行时间减少

> ID：13192002
> 
> 赞同：2
> 
> 时间：2012-11-02T08:49:24.670
> 
> 标签：algorithm, vba, memory, excel

我被要求再次提出这个问题，但背景略有不同。这是之前的帖子：

[找到组合后在 VBA 中过滤](https://stackoverflow.com/questions/12957778/filtering-in-vba-after-finding-combinations)

我想用 100 个不同的变量使这段代码成为可能，而不会导致 excel 内存不足并显着减少执行时间。

下面代码的问题是，如果我有 100 个盒子，excel 将在“结果（0 到 2 ^ NumFields - 2）”行中耗尽内存（该代码适用于 < 10 个盒子）

这是我的输入：

```
3   A   B   C   D   E ...
7.7 3   1   1   1   2 ...
5.5 2   1   2   3   3 ... 
```

这是代码：

```
Function stackBox()
    Dim ws As Worksheet
    Dim width As Long
    Dim height As Long
    Dim numOfBox As Long
    Dim optionsA() As Variant
    Dim results() As Variant
    Dim str As String
    Dim outputArray As Variant
    Dim i As Long, j As Long
    Dim currentSymbol As String
    '------------------------------------new part----------------------------------------------
    Dim maxHeight As Double
    Dim maxWeight As Double
    Dim heightarray As Variant
    Dim weightarray As Variant
    Dim totalHeight As Double
    Dim totalWeight As Double
    '------------------------------------new part----------------------------------------------

    Set ws = Worksheets("Sheet1")
    With ws
        'clear last time's output
        height = .Cells(.Rows.Count, 1).End(xlUp).row
        If height > 3 Then
            .Range(.Cells(4, 1), .Cells(height, 1)).ClearContents
        End If

        numOfBox = .Cells(1, 1).Value
        width = .Cells(1, .Columns.Count).End(xlToLeft).Column
        If width < 2 Then
            MsgBox "Error: There's no item, please fill your item in Cell B1,C1,..."
            Exit Function
        End If

        '------------------------------------new part----------------------------------------------
        maxHeight = .Cells(2, 1).Value
        maxWeight = .Cells(3, 1).Value
        ReDim heightarray(1 To 1, 1 To width - 1)
        ReDim weightarray(1 To 1, 1 To width - 1)
        heightarray = .Range(.Cells(2, 2), .Cells(2, width)).Value
        weightarray = .Range(.Cells(3, 2), .Cells(3, width)).Value
        '------------------------------------new part----------------------------------------------

        ReDim optionsA(0 To width - 2)
        For i = 0 To width - 2
            optionsA(i) = .Cells(1, i + 2).Value
        Next i

        GenerateCombinations optionsA, results, numOfBox

        ' copy the result to sheet only once
        ReDim outputArray(1 To UBound(results, 1) - LBound(results, 1) + 1, 1 To 1)
        Count = 0
        For i = LBound(results, 1) To UBound(results, 1)
            If Not IsEmpty(results(i)) Then
                'rowNum = rowNum + 1
                str = ""
                totalHeight = 0#
                totalWeight = 0#
                For j = LBound(results(i), 1) To UBound(results(i), 1)
                    currentSymbol = results(i)(j)

                    str = str & currentSymbol 'results(i)(j) is the SYMBOL e.g. A, B, C

                    'look up box's height and weight , increment the totalHeight/totalWeight
                    updateParam currentSymbol, optionsA, heightarray, weightarray, totalHeight, totalWeight

                Next j
                If totalHeight < maxHeight And totalWeight < maxWeight Then
                    Count = Count + 1
                    outputArray(Count, 1) = str
                End If

            '.Cells(rowNum, 1).Value = str
            End If
        Next i
        .Range(.Cells(4, 1), .Cells(UBound(outputArray, 1) + 3, 1)).Value = outputArray
    End With

End Function

Sub updateParam(ByRef targetSymbol As String, ByRef symbolArray As Variant, ByRef heightarray As Variant, ByRef weightarray As Variant, ByRef totalHeight As Double, ByRef totalWeight As Double)
Dim i As Long
Dim index As Long
index = -1
For i = LBound(symbolArray, 1) To UBound(symbolArray, 1)
    If targetSymbol = symbolArray(i) Then
        index = i
        Exit For
    End If
Next i

If index <> -1 Then
    totalHeight = totalHeight + heightarray(1, index + 1)
    totalWeight = totalWeight + weightarray(1, index + 1)
End If
End Sub

Sub GenerateCombinations(ByRef AllFields() As Variant, _
                                             ByRef Result() As Variant, ByVal numOfBox As Long)

  Dim InxResultCrnt As Integer
  Dim InxField As Integer
  Dim InxResult As Integer
  Dim i As Integer
  Dim NumFields As Integer
  Dim Powers() As Integer
  Dim ResultCrnt() As String

  NumFields = UBound(AllFields) - LBound(AllFields) + 1

  ReDim Result(0 To 2 ^ NumFields - 2)  ' one entry per combination
  ReDim Powers(0 To NumFields - 1)          ' one entry per field name

  ' Generate powers used for extracting bits from InxResult
  For InxField = 0 To NumFields - 1
    Powers(InxField) = 2 ^ InxField
  Next

 For InxResult = 0 To 2 ^ NumFields - 2
    ' Size ResultCrnt to the max number of fields per combination
    ' Build this loop's combination in ResultCrnt

    ReDim ResultCrnt(0 To NumFields - 1)
    InxResultCrnt = -1
    For InxField = 0 To NumFields - 1
      If ((InxResult + 1) And Powers(InxField)) <> 0 Then
        ' This field required in this combination
        InxResultCrnt = InxResultCrnt + 1
        ResultCrnt(InxResultCrnt) = AllFields(InxField)
      End If
    Next

    If InxResultCrnt = 0 Then
        Debug.Print "testing"
    End If
    'additional logic here
    If InxResultCrnt >= numOfBox Then
        Result(InxResult) = Empty

    Else
         ' Discard unused trailing entries
        ReDim Preserve ResultCrnt(0 To InxResultCrnt)
        ' Store this loop's combination in return array
        Result(InxResult) = ResultCrnt
    End If

  Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:52:03.963

这是一个在变体数组中完成所有繁重工作的版本

（基于[Joubarc的](https://stackoverflow.com/users/369428/joubarc)[This Answer](https://stackoverflow.com/a/7202691/445425)的这个答案的组合逻辑）

这在 100 个盒子的样本数据集上运行，返回 > 40,000，并且在 < 1 秒内

笔记：

1.  如果框的最大数量增加，执行时间会迅速增加（例如 100 中的 4：大约 13 秒）
2.  如果返回结果的数量超过 65535，则将数组转置到工作表中的代码失败（子的最后一行）如果需要处理这种可能的结果，则需要更改结果返回工作表的方式

* * *

```
Sub Demo()
    Dim rNames As Range
    Dim rHeights As Range
    Dim rWeights As Range

    Dim aNames As Variant
    Dim aHeights As Variant
    Dim aWeights As Variant

    Dim MaxNum As Long
    Dim MaxHeight As Double
    Dim MaxWeight As Double

    ' *** replace these six line with your data ranges
    Set rNames = Range([F5], [F5].End(xlToRight))
    Set rHeights = rNames.Offset(1, 0)
    Set rWeights = rNames.Offset(2, 0)
    MaxNum = [C5]
    MaxHeight = [C6]
    MaxWeight = [C7]

    aNames = rNames
    aHeights = rHeights
    aWeights = rWeights

    Dim Result() As Variant
    Dim n As Long, m As Long
    Dim i As Long, j As Long
    Dim iRes As Long
    Dim res As String
    Dim TestCombin() As Long
    Dim TestWeight As Double
    Dim TestHeight As Double
    Dim idx() As Long

    ' Number of boxes
    ReDim TestCombin(0 To MaxNum - 1)
    n = UBound(aNames, 2) - LBound(aNames, 2) + 1

    ' estimate size of result array = number of possible combinations
    For m = 1 To MaxNum
        i = i + Application.WorksheetFunction.Combin(n, m)
    Next
    ReDim Result(1 To 3, 1 To i)

    ' allow for from 1 to MaxNum of boxes
    iRes = 1
    For m = 1 To MaxNum
        ReDim idx(0 To m - 1)
        For i = 0 To m - 1
            idx(i) = i
        Next i

        Do
            'Test current combination
            res = ""
            TestWeight = 0#
            TestHeight = 0#
            For j = 0 To m - 1
                'Debug.Print aNames(1, idx(j) + 1);
                res = res & aNames(1, idx(j) + 1)
                TestWeight = TestWeight + aWeights(1, idx(j) + 1)
                TestHeight = TestHeight + aHeights(1, idx(j) + 1)
            Next j
            'Debug.Print
            If TestWeight <= MaxWeight And TestHeight <= MaxHeight Then
                Result(1, iRes) = res
                ' optional, include actual Height and Weight in result
                Result(2, iRes) = TestHeight
                Result(3, iRes) = TestWeight
                iRes = iRes + 1
            End If

            ' Locate last non-max index
            i = m - 1
            While (idx(i) = n - m + i)
                i = i - 1
                If i < 0 Then
                    'All indexes have reached their max, so we're done
                    Exit Do
                End If
            Wend

            'Increase it and populate the following indexes accordingly
            idx(i) = idx(i) + 1
            For j = i To m - 1
                idx(j) = idx(i) + j - i
            Next j
        Loop
    Next

    ' Return Result to sheet    
    Dim rng As Range
    ReDim Preserve Result(1 To 3, 1 To iRes)

    ' *** Adjust returnm range to suit
    Set rng = [E10].Resize(UBound(Result, 2), UBound(Result, 1))
    rng = Application.Transpose(Result)
End Sub 
```

# ruby - 类变量何时真正有用？

> ID：13192008
> 
> 赞同：1
> 
> 时间：2012-11-02T08:49:43.443
> 
> 标签：ruby

如果你环顾四周，你会[发现类变量与类实例变量的一些比较，](https://stackoverflow.com/questions/7072269/should-i-use-class-variables-or-class-instance-variables-for-class-static-variab)我听到的关于类变量的最好的说法是“这可能是你想要的”，但我从未听过有人说这*就是*他们想要的，或者在整个继承树中共享变量的情况可能更有用。

所以**在实践中**，什么时候类变量比类实例变量更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:06:32.527

另一个例子（你想要每个对象的唯一名称）

```
class Foobar
    @@uniqueId = 0        
    def initialize
       @@uniqueId += 1
    end        
    def unique_name
       "Foobar_" + @@uniqueId.to_s
    end
end
a = Foobar.new
puts a.unique_name

a = Foobar.new
puts a.unique_name 
```

这将输出

> Foobar_1
> 
> Foobar_2

编辑：单例模式也是静态变量[链接的好例子](http://dalibornasevic.com/posts/9-ruby-singleton-pattern-again)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:57:45.260

最简单的示例是您使用类变量来存储该类的一些概览状态或所有实例的共享状态。

```
class Foobar
  @@total = 0

  def initialize
    @@total += 1
  end

  class << self
    def all
      @@total
    end
  end
end

5.times { Foobar.new }
Foobar.all #=> 5 
```

所以这里*@@total*将向您显示总共创建了多少个实例。

Rails 的***ActiveRecord#FinderMethods#all***只返回数组的大小。但是如果一个类的所有实例都没有包装在一个数组中，那么使用类变量返回“all”也是一种解决方案。

# django - Django Tastypie - 自动获取当前用户资源

> ID：13192015
> 
> 赞同：3
> 
> 时间：2012-11-02T08:50:12.350
> 
> 标签：django, tastypie

在我的发布方法中，我想用当前用户自动填充“所有者”字段（我使用的是 BasicAuthentication）。我在这里遵循了一些代码：[How to get authorized user object in django-tastypie](https://stackoverflow.com/questions/9785454/how-to-get-authorized-user-object-in-django-tastypie) - 但我还没有完全让它正常工作。

资源.py：

```
class QuestionResource(ModelResource):
    owner = fields.ForeignKey(UserResource, 'owner')
    class Meta:
        queryset = Question.objects.all()
        allowed_methods = ['get','post']
        fields = ['title','type']
        resource_name = 'question'
        include_resource_uri = True
        serializer = PrettyJSONSerializer()
        authentication = BasicAuthentication()
        authorization = Authorization()

    def obj_create(self, bundle, request=None, **kwargs):
        bundle = self.full_hydrate(bundle, request)
        return bundle

    def obj_update(self, bundle, request=None, **kwargs):
        bundle = self.full_hydrate(bundle, request)
        return bundle

    def full_hydrate(self, bundle, request=None):
        bundle = self.hydrate(bundle, request)
        return bundle

    def hydrate(self, bundle, request=None):
        bundle.obj.owner = User.objects.get(pk = request.user.id)
        return bundle 
```

如果我发出以下内容：

```
curl -u USERNAME:XXXXXXX --dump-header - -H "Accept: application/json" -H "Content-Type: application/json" -X POST --data "{\"title\":\"my new question\",\"type\":\"multichoice\"}" http://localhost/python/mquiz/api/v1/question/ 
```

我得到回应：

```
HTTP/1.1 201 CREATED
Date: Fri, 02 Nov 2012 08:28:05 GMT
Server: Apache/2.2.22 (Ubuntu)
Vary: Accept-Language,Cookie,Accept-Encoding
Location: http://localhost/python/mquiz/api/v1/question/None/
Content-Language: en-us
Content-Length: 0
Content-Type: text/html; charset=utf-8 
```

所以看起来好像一切正​​常，但没有任何内容添加到数据库中，并且位置看起来错误（最后是 /None/）。

我确定这与“bundle.obj.owner = User.objects.get(pk = request.user.id)”行有关。如果我使用“bundle.obj.owner = request.user.id”，则会收到错误消息：

```
"error_message": "Cannot assign \"3L\": \"Question.owner\" must be a \"User\" instance." 
```

据我所知，bundle.obj.owner 需要采用以下形式：'/python/mquiz/api/v1/user/3/' - 如果我在 curl 请求中的数据中使用它作为所有者参数（并删除我的自定义水合物方法），然后一切正常并添加到数据库中。那么如何将我的 User 实例转换为可以接受的形式呢？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:10:14.790

啊……现在明白了。什么有效：

```
class QuestionResource(ModelResource):
    owner = fields.ForeignKey(UserResource, 'owner')
    class Meta:
        queryset = Question.objects.all()
        allowed_methods = ['get','post']
        fields = ['title','type']
        resource_name = 'question'
        include_resource_uri = True
        serializer = PrettyJSONSerializer()
        authentication = BasicAuthentication()
        authorization = Authorization()

    def hydrate(self, bundle, request=None):
        bundle.obj.owner = User.objects.get(pk = bundle.request.user.id)
        return bundle 
```

我需要 bundle.request.user.id 而不仅仅是 request.user.id。也许我正在查看的另一个问题是指旧版本的 TastyPie - 似乎旧版本在捆绑包中没有可访问的请求？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T10:25:04.223

当前经过验证的答案是次优的，因为它会导致 2 个 SQL 查询。

您应该按如下方式修改您的查询集：

```
queryset = Question.objects.select_related('owner').all() 
```

这样，“所有者”数据将连接到一个 SQL 查询中。

# c# - 如何查找可调整大小/滚动文本框中显示的子字符串的索引？

> ID：13192016
> 
> 赞同：2
> 
> 时间：2012-11-02T08:50:19.203
> 
> 标签：c#, string, textbox, indexing

我正在计划一个 C# 应用程序，其中一些相当大的字符串将显示在可滚动/可调整大小的文本框中。

当用户关闭应用程序并稍后返回时，我想从它们显示的位置重新显示这些字符串`lostFocus`。

有没有办法在全文中获取文本框中显示的第一个字符的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:58:45.540

这两个应该可以帮助您获得插入符号的位置。在关闭应用程序之前获取插入符号位置，然后使用`SelectionStart`属性将其设置回来：

```
textBox1.SelectionStart;
textBox1.SelectionLength; 
```

**编辑：** 这行得通，刚刚经过测试，正如我所说，使用`SelectionStart`属性和`ScrollToCaret()`方法很重要。您必须获取第一次可见的字符的索引，为此您应该使用以下`GetCharIndexFromPosition()`方法`TextBox`：

```
 int selectionStart;

        private void button1_Click(object sender, EventArgs e)
        {
            Graphics g = textBox1.CreateGraphics();
            SizeF size = g.MeasureString("A", textBox1.Font);
            g.Dispose();
            int index = textBox1.GetCharIndexFromPosition(new Point(0, (int)(2 * size.Height + 0.5)));
            selectionStart = index;
        }

        private void button3_Click(object sender, EventArgs e)
        {
            textBox1.SelectionStart = selectionStart;
            textBox1.ScrollToCaret();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:20:56.240

我没有得到你的问题，但据我了解

`TextBox.CaretIndex`将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:06:30.323

如果您使用的是 WPF 或 Silverlight；有`System.Windows.Controls.TextBox`一个方法[`TextBox.GetFirstVisibleLineIndex()`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.getfirstvisiblelineindex%28v=vs.85%29.aspx)。
将此与[`MaxLines`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.maxlines%28v=vs.85%29.aspx)和[`MinLines`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.minlines%28v=vs.85%29.aspx)属性结合使用以保存状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T22:37:25.457

谢谢大家！

我猜尼克刚刚解决了它（谢谢！）。GetCharIndexFromPosition() 是要走的路。我已经阅读了有关该函数调用的信息，但我不知道如何创建一个引用 TextBox 中第一个“插入点”的 Point 对象。

亲切的问候，

杰拉伊塔

# asp.net-mvc-3 - 当将 url 从一个浏览器复制到另一个浏览器时，我的会话数据没有进入 asp.net MVC3

> ID：13192018
> 
> 赞同：0
> 
> 时间：2012-11-02T08:50:22.100
> 
> 标签：asp.net-mvc-3

当我从一个浏览器复制 URL 以将其粘贴到另一个浏览器时，我的会话数据未检索到它显示“对象引用未设置为对象的实例”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:07:39.467

（请注意 - 此答案假设您尚未使用无 cookie 会话）

会话在 ASP.NET 中的工作方式是，当您第一次访问站点时，cookie 文件会放置在您的浏览器 cookie 存储中。cookie 包含一个会话 ID，因此下次您从该浏览器访问该站点时，该 ID 将传递给 Web 应用程序，并且它知道要加载哪个会话状态。

但是，每个浏览器都实现了自己的 cookie 存储，因此切换浏览器意味着站点无法确定您的会话 ID。

解决此问题的一种方法是使用[无 cookie 会话](http://msdn.microsoft.com/en-us/library/aa479314.aspx)。但是，它们存在许多与可用性和[安全性](http://msdn.microsoft.com/en-us/library/aa479314.aspx#cookieless_topic5)相关的问题，因此在决定它们是否适合您之前，请仔细考虑。

另一种选择是将[您的授权和会话系统捆绑在一起](https://stackoverflow.com/questions/6066554/is-there-any-good-reason-why-the-authentication-cookie-and-the-session-state-coo)。但是，通常也不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:07:51.160

您将无法跨多个浏览器访问会话值。

此外，**您应该检查该值是否存在于 Session 中以避免服务器错误。**

```
if(Session["Key"] != null)
{
//Write your code here
}
else
{
 //Alternative code (redirection code)
} 
```

# r - 逐行操作data.frame中的一列的更快方法是什么？

> ID：13192030
> 
> 赞同：2
> 
> 时间：2012-11-02T08:51:30.087
> 
> 标签：r, dataframe

我有一个带有数字纬度和经度值的数据框。data.frame 有 14K 行和 40 列。

我想在数据框中添加一个名为“半球”的类别列，以便轻松区分北部（纬度 > 0）和南部位置（纬度 < 0）。这就是我所做的：

```
for (r in 1:nrow(myDataFrame)) {
  if (myDataFrame[r, "latitude"] > 0) {
    myDataFrame[r, "hemisphere"] <- "North"
  } else {
    myDataFrame[r, "hemisphere"] <- "South"
  }
} 
```

在我的 MacBook Pro 上运行这个代码块大约需要一分钟，也许两分钟——比我预期的要长得多。似乎有些东西使它效率很低，应该有更好的方法。有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:09:01.753

@baptiste 的`ifelse`解决方案是加快与矢量化比较的一般习惯用法，但在这种情况下，一些明智的子集和使用`sign`可能会更快：

```
myDataFrame$hemisphere <- c("South","Equator","North")[sign(myDataFrame$latitude)+2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T09:28:36.753

`ifelse`很快，但如果需要效率，您可能最好使用基于子集的方法。

给定一些示例数据：

```
set.seed(1)
df <- data.frame(site = 1:14000, latitude = rnorm(14000)) 
```

我对@James 在他的答案中所做的事情的版本只是比较`latitude > 0`哪个返回一个逻辑向量并添加`1`到这个（所以我们有一个`1`s 和`2`s 的数字向量。然后用它来索引可能性向量`c("South","North")`。

```
df$hemisphere <- c("South","North")[(df$latitude > 0 ) + 1] 
```

这使

```
> head(df)
  site   latitude hemisphere
1    1 -0.6264538      South
2    2  0.1836433      North
3    3 -0.8356286      South
4    4  1.5952808      North
5    5  0.3295078      North
6    6 -0.8204684      South 
```

# linux - 在 Eclipse 中调试 ncurses 应用程序

> ID：13192033
> 
> 赞同：4
> 
> 时间：2012-11-02T08:51:40.430
> 
> 标签：linux, debugging, gdb, eclipse-cdt, ncurses

我正在尝试在 Eclipse CDT 中调试 ncurses 应用程序。我已经设法使用[这篇文章](https://stackoverflow.com/questions/3938291/debugging-ncurses-with-eclipse-cdt)将控制台输出重定向到真实终端。

然而，终端上的刷新率似乎被破坏了——它不断地向文本发送垃圾邮件，并且似乎没有响应输入（闪烁时很难分辨）。

我认为这是一个 Eclipse 配置问题而不是 gdb 问题，因为如果我按照[此处](http://dirac.org/linux/gdb/07-Debugging_Ncurses_Programs.php)所述手动调试它，这不会发生，并且如果我尝试在 Eclipse 中“正常”调试它，控制台输出会快速滚动同样的方法。

我将终端设置为`sleep 100000000`避免 Bash 争夺控制台输入，所以我认为也不是这样。

有没有人成功地做到这一点？

# python - Python Parse.Find 如果存在

> ID：13192038
> 
> 赞同：0
> 
> 时间：2012-11-02T08:52:06.417
> 
> 标签：python, json

我创建了一个 python 解析器，它将访问一个网页，然后从源内部的 div 中获取信息，就像一个小 API。但是对于不同的帐户，会有更多的 DIVS，它会作为错误的读数返回。

每当我进入管理员帐户时，它总是显示 {"PlayerExists": false}。

我的代码：

```
if 'PlayerName' in self.request.GET:
            self.response.headers['Content-Type'] = 'application/json'
            docType = '{http://www.w3.org/1999/xhtml}'
            PlayerName = self.request.GET['PlayerName']
            gamertagava = self.request.GET['PlayerName']
            output = {}
            try:
                msPageHandle = urllib.urlopen('http://nflplayers.mobi/'+PlayerName+'.html')
                msPage = msPageHandle.read()
                msPageHandle.close
                parse = ET.fromstring(msPage)
            except:
                output['PlayerExists'] = False
                self.response.write(json.JSONEncoder().encode(output))
                return      
output['AdminTeam'] = parse.find('.//*[@id="AdminTeam"]')   
output['AdminLaunchTeam'] = parse.find('.//*[@id="AdminLaunchTeam"]')   
output['Old Skool Player'] = parse.find('.//*[@id="Old Skool Player"]') 

            output['PlayerName'] = parse.find('.//*[@id="PlayerName"]').text
            output['Playerscore'] = parse.find('.//*[@id="Playerscore"]').text
            if output['Playerscore']=='--':
                output['PlayerExists'] = False
                output['Playerscore'] = 0
            else:
                output['GamertagExists'] = True
                output['Playerscore'] = int(output['Playerscore']) 
```

管理员有一个额外的 DIV，所以我不知道这是否是问题所在。就是这样。欢迎任何帮助。

```
 <div id="AdminTeam">
        <label>Admin&nbsp;Team</label>
        <div class="Badges">

            <div id="AdminLaunchTeam" class="Badge"></div>

            <div id="Old Skool Player" class="Badge"></div>

        </div>
    </div> 
```

谢谢。雷米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:59:24.613

在您的 XML 中，没有与这些 XPath 表达式匹配的元素：

```
.//*[@id="PlayerName"]
.//*[@id="Playerscore"] 
```

所以这一行会抛出一个错误：

```
parse.find('.//*[@id="PlayerName"]').text 
```

# iphone - 如何检测 2 个 UIImageViews 的形状完美交集

> ID：13192039
> 
> 赞同：1
> 
> 时间：2012-11-02T08:52:07.843
> 
> 标签：iphone, objective-c, xcode, uiimageview

请问，如何检测两个图像视图之间的精确交集。在每个图像视图中都是透明的 png 并且我不想检测他们的矩形框架内的交叉点而不是他们的真实形状？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:59:59.537

试试这个，这肯定是你的答案

```
if(CGRectIntersectsRect(imageview1.frame, imageview2.frame)) {

//They are intersecting
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:01:40.693

[DCInstrospec](https://github.com/domesticcatsoftware/DCIntrospect)
DCIntrospect 将为您提供帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T08:54:57.437

您将使用 CGRectIntersectsRect() 来查看是否有任何 UIImageView 与另一个相交。

# jquery - 在 jQuery 中出现和消失

> ID：13192040
> 
> 赞同：2
> 
> 时间：2012-11-02T08:52:10.393
> 
> 标签：jquery

我想为 jQuery 创建两个新方法，使对象出现和消失。我不想使用 jQuery 方法`show()`和`hide()`（既不是`fadeIn()`或`fadeOut()`），因为：

*   效果不是渐进的
*   当 a 时`div` `hides`，该对象不再出现在页面中并且所有其他`div`移动。

我的代码不起作用：对象消失但不出现。

有什么线索吗？

```
jQuery.fn.disappear = function() {
    this.fadeTo('slow', 0, function() {
    this.css('visibility', 'hidden');
});
}; 
```

和

```
jQuery.fn.appear = function() {
     this.css('visibility', 'visible');
     this.fadeTo('slow', 1);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:55:23.060

尝试：

```
jQuery.fn.disappear = function() {
    $(this).fadeTo('slow', 0, function() {
    });
};
jQuery.fn.appear = function() {
    $(this).fadeTo('slow', 1, function(){
        console.log(this);
    });
}; 
```

您的`this`. [http://jsfiddle.net/jywkW/4/](http://jsfiddle.net/jywkW/4/)

可见性规则是不必要的，但如果您愿意，可以保留它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:57:40.713

为什么这么难？只使用fadeOut 和fadeIn 来消失：

```
jQuery.fn.disappear = function(duration,callback) {
 this.animate({opacity:0},duration,callback);
}; 
```

并出现：

```
jQuery.fn.appear = function(duration,callback) {
 this.animate({opacity:1},duration,callback);
}; 
```

并访问它，你可以这样做：

```
$(function(){
  $.appear(1000,function(){
    // Write a callback
    // Like $(this).css('visibility','visible');
  });
  $.disappear(1000,function(){
    // Write a callback
    // Like $(this).css('visibility','hidden');
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:26:19.600

当 'this' 用于自定义 jQuery 函数时，它的值是一个 jQuery 对象。当在回调函数中使用“this”时，它是一个 DOM 对象。

正确的代码是：

```
jQuery.fn.disappear = function() {
    this.fadeTo('slow', 0, function() {
    jQuery(this).css('visibility', 'hidden');
});
}; 
```

和

```
jQuery.fn.appear = function() {
     this.css('visibility', 'visible');
     this.fadeTo('slow', 1);
}; 
```

# javascript - 如何优化 javascript/jquery 代码以加快其性能？

> ID：13192045
> 
> 赞同：8
> 
> 时间：2012-11-02T08:52:54.057
> 
> 标签：javascript, jquery, performance

在我的一个网络项目中，我使用了大量的 javascript/jQuery 代码，这在浏览器（Windows 7 x64）上非常慢，尤其是在 IE 上。

我只在主页上同时使用 3 个 Ajax 请求。

在搜索页面上，我还使用 ajax 请求，这些请求在滚动事件、任何“搜索标签”（简单的锚标签）点击事件等上触发，这通常会使数据加载非常缓慢。

我使用 jQuery 插件，例如，Anythingslider、jquery coockies 插件、Raty（评级插件）、Tipsuy、jQuery coreUISelect、jScrollPane、鼠标滚轮等。我已经缩小并组合在 jquery.plugins.js 文件中的所有这些第 3 方插件，其中几乎是 80KB。

我用 jQuery 选择了很多 DOM 元素。例如，我使用以下代码：

```
$("#element") 
```

代替：

```
document.getElementById('element'); 
```

我还有一个大的 CSS 文件，超过 5 000 行，因为我已经将所有 3rd 方 jQuery 插件的 css 文件合并到一个文件中，用于缓存和减少 HTTP 请求。

1.  好吧，我想知道，我可以做些什么来优化我的代码以获得更好的性能并加快网页加载速度？

2.  我可以使用什么样的工具来调试我的 JS 代码？我忘了提一下，当我在 Google Chrome 或 Firefox 中刷新页面并打开 firebug 或 Chrome 原生开发工具时，在这种情况下页面加载速度也很慢。有时 Firefox 甚至被压垮了。

3.  使用原始 js 选择 DOM 元素会给我一种更好更快的方式来解析文档吗？还是我应该离开，jQuery 选择？谈论的是大约50个元素。

4.  我应该分开并在之后缩小外部插件，例如Anythingslider吗？或者当我拥有“一体式”js文件时会更好吗？

5.  将 jQuery 插件的 css 代码与 main style.css 分开会更好吗？因为即使悬停在元素上并影响 css 文件中的 :hover 状态，也非常慢。

好吧，伙计们，我真的很指望你们。

我一直在谷歌上搜索我的问题的答案，并真的希望在这里找到它。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T09:06:23.503

1）缩小它

2) 所有浏览器都自带调试工具

3）通过将引用存储在变量中来减少对dom的访问，不要两次查找相同的元素

4）分离并使用众所周知的cdn

5）分开只是因为它更容易管理

更多 jQuery 技巧在这里：[jquery-performance-rules](http://www.artzstudio.com/2009/04/jquery-performance-rules/)和这里：[improv-your-jquery-25-excellent-tips](http://www.tvidesign.co.uk/blog/improve-your-jquery-25-excellent-tips.aspx)。

确保所有静态资源都被缓存，没有磁盘查找

[这个图书馆](http://vanilla-js.com/)很酷

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:04:54.210

您可以在此处比较选择器性能：http: [//jsperf.com/](http://jsperf.com/)

只需设置您的 HTML 代码，包括 jQuery 库并将您想要比较的每个选择器作为各种测试用例进行比较。

许多[jquery-performance-rules](http://www.artzstudio.com/2009/04/jquery-performance-rules/)仍然适用，

也看看这里[jquery-proven-performance-tips-tricks](http://www.slideshare.net/AddyOsmani/jquery-proven-performance-tips-tricks)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T09:12:26.440

由于有很多方法可以改进代码，特别是对于像您这样的大型网站，我认为只发布外部链接会更有用，因为这些都是非常好的编写和简洁的教程和工具。这里是其中的一些：

*   [雅虎的教程](http://developer.yahoo.com/performance/rules.html)，我知道的最完整的教程之一
*   [W3Schools](http://www.w3schools.com/css/css_image_sprites.asp)使用图片精灵的教程，当页面上有很多小图片时特别有用
*   [高效使用 jQuery 的技巧](http://www.sitepoint.com/efficient-jquery-selectors/)
*   [Firebug](http://getfirebug.com/)，用于调试 javascript、html、css 的 Firefox 插件
*   [HTML 验证器](http://validator.w3.org/#validate_by_input)，对于快速查找标记中的错误非常有用
*   [用于压缩 HTML 代码的HTML 压缩器](http://htmlcompressor.com/compressor.html)（网络上有很多工具可以用于此目的，只需找到最好的工具即可）
*   [CSS 压缩器](http://www.csscompressor.com/)，和 HTML 一样

我还推荐 IDE 用于构建称为[JetBrains 的 PHPStorm](http://www.jetbrains.com/phpstorm/)的 Web 应用程序/网站。它是商业软件，但绝对物有所值，因为它在打字时提供了改进的提示和技巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-07T06:05:03.803

原始性能可能不是您的问题。如果您发现页面加载性能不佳，请参阅我专门撰写的关于在页面初始化时最小化 javascript 执行的这篇文章。

[http://blog.lavoie.sl/2013/12/optimizing-page-loads-by-reducing-javascript.html](http://blog.lavoie.sl/2013/12/optimizing-page-loads-by-reducing-javascript.html)

# php - 在选择框选项上激活/停用 spry 验证

> ID：13192046
> 
> 赞同：0
> 
> 时间：2012-11-02T08:52:56.333
> 
> 标签：php, javascript, spry

我正在尝试根据在选择框中选择的内容快速激活/停用验证。

添加地址是可选的，如果选择了地址，则会显示国家和地区字段，并且 spry_country、spry_region 将需要验证。

价格是可选的，如果添加价格，则会显示价格和价格税字段，并且 spry_price 和 spry_price_tax 将需要验证等等。

我有以下代码似乎可以正常工作，但是，如果您选择地址然后改变主意然后决定不输入地址，该代码将隐藏字段但似乎仍然尝试验证隐藏字段，因为我无法提交表单. 希望这是有道理的:)

```
/* If address selected */
$("#location_option").change(function() {
    if ($("#location_option").val() == "address"){
        $(".show_location").show();
        /* activate spry */
        var spryselect4 = new Spry.Widget.ValidationSelect("spry_country", {isRequired:true});
        var spryselect5 = new Spry.Widget.ValidationSelect("spry_region", {isRequired:true});
    }
    else{
        $(".show_location").hide();
        var spryselect4 = new Spry.Widget.ValidationSelect("spry_country", {isRequired:false});
        var spryselect5 = new Spry.Widget.ValidationSelect("spry_region", {isRequired:false});
    }
});
$("#location_option").change();

/* If price selected */
$("#price_option").change(function() {
    if ($("#price_option").val() == "price"){
        $(".show_price").show();
        /* activate spry */
        var sprytextfield2 = new Spry.Widget.ValidationTextField("spry_price", "none", {isRequired:true});
        var spryselect7 = new Spry.Widget.ValidationSelect("spry_price_tax", {isRequired:true});
    }
    else{ 
        $(".show_price").hide();
        var sprytextfield2 = new Spry.Widget.ValidationTextField("spry_price", "none", {isRequired:false});
        var spryselect7 = new Spry.Widget.ValidationSelect("spry_price_tax", {isRequired:false});
    }
});
$("#price_option").change();

/* If date selected */
$("#date_option").change(function() {
    if ($("#date_option").val() == "date"){
        $(".show_date").show();
        /* activate spry */
        var sprytextfield3 = new Spry.Widget.ValidationTextField("spry_start_date", "none", {isRequired:true});
        var sprytextfield4 = new Spry.Widget.ValidationTextField("spry_finish_date", "none", {isRequired:true});
    }
    else{ 
        $(".show_date").hide();
        var sprytextfield3 = new Spry.Widget.ValidationTextField("spry_start_date", "none", {isRequired:false});
        var sprytextfield4 = new Spry.Widget.ValidationTextField("spry_finish_date", "none", {isRequired:false});
    }
});
$("#date_option").change(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:31:20.120

而不是这样做：

```
var spryselect4 = new Spry.Widget.ValidationSelect("spry_country", {isRequired:false}); 
```

放：

```
spryselect4.reset(); // remove the error message
spryselect4.destroy(); // remove the validation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:33:44.440

我使用以下方法对其进行了排序：

```
spryselect4 = new Spry.Widget.Utils.destroyWidgets("spry_country"); 
```

# mod-rewrite - mod_rewrite 不递归执行？[回答：用户错误]

> ID：13192053
> 
> 赞同：0
> 
> 时间：2012-11-02T08:53:18.473
> 
> 标签：mod-rewrite

好的，所以我正在尝试将所有对 pdf 的请求重定向到将记录请求的脚本。更多的是概念证明，因此我可以记录所有下载以获取更广泛的文件。

/test 中的 .htaccess 文件：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} .*\.pdf$ 
RewriteRule (.*) /download.php?file=$1 [R,L] 
```

为了找出问题所在，它已经被简化了很多。

它重定向 /test/something.pdf 但不是 /test/sub/something.pdf

我究竟做错了什么？

# coldfusion - 找不到coldfusion application.cfc

> ID：13192056
> 
> 赞同：2
> 
> 时间：2012-11-02T08:53:22.847
> 
> 标签：coldfusion, application.cfc

几个星期以来，我一直遇到一个零星的问题，在重新启动 CF 服务器（企业 9）时，我的一个应用程序在 ColdFusion 没有引用 Application.cfc 文件中的所有变量的情况下运行。它与 CFML 页面位于同一文件夹中，它被正确大写为 Application.cfc，但似乎只是被忽略了。显然，这会导致数据源名称和我在 Application.cfc 中设置的所有其他变量出现问题。作为参考，我正在使用基于 Ben Nadel 在[http://www.bennadel.com/blog/726-ColdFusion-Application-cfc-Tutorial-And-Application-cfc-Reference.htm](http://www.bennadel.com/blog/726-ColdFusion-Application-cfc-Tutorial-And-Application-cfc-Reference.htm)上的出色介绍的 Application.cfc 文件. 通常我请求的模板作为包含运行，我可以使用调试输出在堆栈中看到它，现在我根本看不到它。就好像文件没有'

有没有其他人经历过这种情况，或者你能想到可能的解决方案吗？请注意，有时重新启动会使整个事情运行得非常顺利。

重新文件夹结构非常简单：Application.cfc 文件与可执行的 CFML 模板一起位于 Web 根目录中 - 包含的模板、图像、CSS 等位于通过相对路径引用的单独文件夹中。

另一个应用程序具有自己的类似 Application.cfc 文件，位于 Web 根目录的子目录中。这是完美的运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:01:48.030

尝试清除您的模板缓存。我已经看到 CF 只是变得不稳定并且缓存文件导致问题的情况。另一种选择：ColdFusion 是否有权读取/执行 Application.cfc？如果这是一个问题但不再是问题，我已经看到模板缓存导致找不到这些文件的情况。再次，删除这些文件（从磁盘，而不是 cfadmin）并重试。

# android - 跳回上一个活动

> ID：13192067
> 
> 赞同：-2
> 
> 时间：2012-11-02T08:54:19.453
> 
> 标签：android, android-activity

> **可能重复：**
> [Android：返回上一个活动](https://stackoverflow.com/questions/4038479/android-go-back-to-previous-activity)

如何跳回 Android 中的上一个活动？我如何找到哪个是以前的活动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T08:55:42.913

`finish()`在当前活动中返回上一个活动调用。

当您调用`finish()`时，正在恢复的结果活动将是您之前的活动。

有关更多详细信息，请研究[活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)。它将让您更好地了解活动和活动之间的导航......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T09:02:12.620

并且，如果您没有在之前的活动中调用完成（）。只需完成（）当前活动，它会自动显示以前的活动。（不推荐，因为整个活动都将存储在内存中。）

# sql-server - TSQL DateRange 逐日计数

> ID：13192073
> 
> 赞同：0
> 
> 时间：2012-11-02T08:54:40.923
> 
> 标签：sql-server, tsql, date-range

我解决了需要 1 天的问题，但是当我将这些天分成 1 天时，我遇到了问题。

```
 declare @Start datetime
    declare @Finish datetime
    declare @TimeRange int

    set @Start = N'2012-10-16 00:00:00.000'
    set @Finish = N'2012-10-19 00:00:00.000'
    set @TimeRange = 1 

    declare @TimeRanges as TABLE (SessionStart datetime, SessionEnd datetime);

    with TimeRanges as 
    (   select @Start as StartTime, DATEADD(day, @TimeRange, @Start) as EndTime
        union all
        select DATEADD(day, @TimeRange, StartTime), DATEADD(day, @TimeRange, EndTime)
        from TimeRanges
        where EndTime  < @Finish 
    ) 
```

timeRanges 表将@Start 和@Finish 分成几天。

这是问题的开始：

```
 select StartTime, EndTime,TMP.NoOfCalls    
    from (SELECT TOP 1 DATEADD(SECOND, Number, c.SessionStartTime) CallTime, COUNT(C.ScenarioID) NoOfCalls FROM test c
INNER JOIN Numbers N ON N.Number <= DATEDIFF(SECOND, C.SessionStartTime, C.SessionCloseTime) 
where c.SessionStarttime >= @Start and  c.SessionCloseTime <= @Finish
GROUP BY DATEADD(SECOND, Number, c.SessionStartTime)
ORDER BY NoOfCalls DESC
)as TMP left outer join TimeRanges as TR on @Start <= TR.StartTime   and   TR.EndTime <= @Finish
        group by TR.StartTime, TR.EndTime,TMP.NoOfCalls
        order by TR.StartTime 
```

这是我得到的结果：

![在此处输入图像描述](../Images/fef868457edc353a6b3fe4a5feeca57a.png)

实际上 260 是 N'2012-10-17 00:00:00.000' 和 N'2012-10-18 00:00:00.000' 之间的结果，但我想要单独的结果。

我的样品测试表：

```
SessionID    SessionStartTime              SessionCloseTime
24       2012-10-16 01:00:06.000           2012-10-16 01:01:22.000
24       2012-10-16 01:00:08.000           2012-10-16 01:01:10.000
24       2012-10-16 01:00:16.000           2012-10-16 01:01:12.000
24       2012-10-16 01:00:30.000           2012-10-16 01:01:48.000
24       2012-10-16 01:00:41.000           2012-10-16 01:02:08.000
24       2012-10-16 01:00:48.000           2012-10-16 01:01:34.000
24       2012-10-16 01:00:56.000           2012-10-16 01:03:09.000
24       2012-10-16 01:01:02.000           2012-10-16 01:02:13.000
24       2012-10-16 01:01:05.000           2012-10-16 01:03:16.000
24       2012-10-16 01:01:09.000           2012-10-16 01:02:42.000
24       2012-10-16 01:01:15.000           2012-10-16 01:02:48.000
24       2012-10-16 01:01:18.000           2012-10-16 01:02:14.000
24       2012-10-16 01:01:18.000           2012-10-16 01:02:06.000
24       2012-10-16 01:01:42.000           2012-10-16 01:03:16.000
24       2012-10-16 01:01:45.000           2012-10-16 01:03:04.000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:35:56.717

您的问题是左连接，但您的查询似乎过于复杂。

尝试

```
 with TimeRanges as 
    (   select @Start as StartTime, DATEADD(day, @TimeRange, @Start) as EndTime
        union all
        select DATEADD(day, @TimeRange, StartTime), DATEADD(day, @TimeRange, EndTime)
        from TimeRanges
        where EndTime  < @Finish 
    )
        select TimeRanges.StartTime, TimeRanges.EndTime, COUNT(*)
        from TimeRanges
            inner join YourTable Sess
                on sess.sessionstarttime>TimeRanges.StartTime 
                and sess.sessionclosetime< TimeRanges.EndTime
        group by TimeRanges.StartTime, TimeRanges.EndTime 
```

# java - ehcache - 任何访问过期元素内容的解决方案？

> ID：13192074
> 
> 赞同：1
> 
> 时间：2012-11-02T08:54:41.573
> 
> 标签：java, ehcache

我用ehcache缓存数据，一般是24h过期时间。我想在元素过期时采取元素单独的操作。因此我需要元素内容。我注册了一个 CacheEventListener 以便在元素过期的情况下获得通知（notifyElementExpired）。不幸的是，在通知时只知道密钥 - 内容已经被丢弃，这有点痛苦！

在到期时访问元素内容的任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:04:16.003

您可以创建自定义驱逐`Policy`，将所有调用委托给您使用的实际策略。在您的实现中，您需要覆盖`selectedBasedOnPolicy`方法，您可以在其中指定您的操作：

```
class MyEvictionPolicy extends LruPolicy { // you can subclass FifoPolicy or LfuPolicy here
    @Override
    public Element selectedBasedOnPolicy(Element[] sampledElements, Element justAdded) {
        Element candidate = super.selectedBasedOnPolicy(sampledElements, justAdded);
        if (candidate.isExpired()) {
            // perform your action here
        }
        return candidate;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:09:59.147

看看[我](https://stackoverflow.com/questions/13942814/ehcache-based-on-date/13952527#13952527)对类似问题的回答。您可以在`isExpired`方法中添加一些代码并在结果为`true`.

是的，这可能不是最干净的方法，但它应该可以工作。

# php - 403服务器访问权限

> ID：13192077
> 
> 赞同：0
> 
> 时间：2012-11-02T08:54:49.727
> 
> 标签：php, .htaccess

我正在编程，突然间我无法访问我的网站。

错误：

```
Forbidden

You don't have permission to access / on this server.

Additionally, a 403 Forbidden error was encountered while trying to use an ErrorDocument to handle the request.

Apache/2 Server at project.vanmarijn.nl Port 80 
```

我的服务器被屏蔽了吗？？？而且我现在无法在直接管理员上查看我是否被阻止或取消阻止自己f，那么在这种情况下我该如何取消阻止自己？？？

它发生在我使用和更改 .htaccess 文件时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:56:23.367

从 SSH 或 FTP 客户端删除或重命名 .htaccess。

它基本上说您的 .htaccess 的内容很糟糕。

# c# - Devexpress ListBoxControl 添加具有多种颜色的项目

> ID：13192080
> 
> 赞同：0
> 
> 时间：2012-11-02T08:55:11.477
> 
> 标签：c#, .net, winforms, devexpress

我正在寻找一种解决方案，在同一个 ex 中添加`Item`不同`ListBoxControl`颜色的`Row`
：'imported company [XCompany]' - 我需要灰色的'imported company'，其余的
也需要黑色，以防万一我有错误（红色的）

我找不到（如果存在）添加`Html`文本的方法

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:21:10.567

您可以通过[ListBoxControl.AllowHtmlDraw](http://help.devexpress.com/#WindowsForms/DevExpressXtraEditorsBaseListBoxControl_AllowHtmlDrawtopic)属性激活 ListBoxControl 中的[HTML 文本格式](http://help.devexpress.com/#WindowsForms/CustomDocument4874)功能：

```
listBoxControl.AllowHtmlDraw = DevExpress.Utils.DefaultBoolean.True;
listBoxControl.Items.AddRange(new object[] {
    "Color <color=Red>Red</color>",
    "Color <color=Green>Green</color>",
    "Color <color=Blue>Blue</color>"
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-13T14:27:14.843

另一种方法是使用以下方法实现`DrawItem`事件`ListBox`：

```
 internal static void DrawListBox(object sender, DevExpress.XtraEditors.ListBoxDrawItemEventArgs e)
    {
        e.Cache.DrawString(e.Item.ToString(), e.Appearance.Font, new SolidBrush(Color.White),
            e.Bounds, e.Appearance.GetStringFormat());
        e.Handled = true;
    } 
```

在这种情况下，所有项目都被绘制在 中`Color.White`。

当然，您可以通过`ListBoxDrawItemEventArgs`.

# php - 将 3 个查询的结果合并为一个结果

> ID：13192083
> 
> 赞同：0
> 
> 时间：2012-11-02T08:55:27.017
> 
> 标签：php, mysql, sql, date

我有 3 个查询，我希望使用 array_merge 和 array_unique 将所有结果都放在一个结果中。

这是查询：

```
 $query1 = mysql_query("SELECT * FROM prereservation where '$arival' BETWEEN arrival and departure and room_id ='11' and status = 'active'");  
        while($rows1 = mysql_fetch_assoc($query1)){
        echo $rows1['id']. " - ". $rows1['qty'];
        echo "<br />";
        }

        $query2 = mysql_query("SELECT * FROM prereservation where '$departure' BETWEEN arrival and departure and room_id ='11' and status = 'active'");
        while($rows2 = mysql_fetch_assoc($query2)){
        echo $rows2['id']. " - ". $rows2['qty'];
        echo "<br />";
        }

        $query3 = mysql_query("SELECT * FROM prereservation where arrival > '$arival' and departure < '$departure' and room_id ='11' and status = 'active'");
        while($rows3 = mysql_fetch_assoc($query3)){
        echo $rows3['id']. " - ". $rows3['qty'];
        echo "<br />";
        }

example result is:    
for       $rows1     |     $rows2     |     $rows3
        id  |  qty   |   id  |  qty   |   id  |  qty
       -----|--------|-------|--------|-------|------
        01  |   1    |   01  |   1    |   02  |   1
        03  |   1    |   02  |   1    |   03  |   1
        04  |   1    |   03  |   1    |   04  |   1
        08  |   1    |   05  |   1    |   05  |   1 
```

我不知道这是否正确？

```
$sample = array_unique(array_merge($rows1['id'], $rows2['id'], $rows3['id'])) 
```

我想为每个结果的 id 使用 array_merge 和 array_unique，所以将留下的 id 的最终结果是

```
01, 02, 03, 04, 05, 08. 
```

对于下一个查询，我想要的是这些 id 的总和（数量）。但我不知道如何为此编写查询，这是我的示例：

```
$query = mysql_query("SELECT sum(qty) FROM prereservation where id = $sample");

        while($rows = mysql_fetch_array($query))
          {
          $total_qty = $rows['sum(qty)'];
          } 
```

所以总和（数量）等于6。请纠正我的编码错误，谢谢大家...

**最后我找到了解决方案，在这里..**

```
$a = $p['id'];
        $query1 = mysql_query("SELECT DISTINCT id, SUM(qty)
        FROM prereservation 
        WHERE 
        (
            ( '$arival1' BETWEEN arrival AND departure ) OR 
            ( '$departure1' BETWEEN arrival AND departure ) OR 
            ( arrival > '$arival1' AND departure < '$departure1' )
        )
            AND room_id ='$a' 
            AND STATUS = 'active'");  
        while($rows1 = mysql_fetch_assoc($query1)){
        $set1 = $rows1['SUM(qty)'];
        }   
        ?> 
        <select id="select" name="qty[]" style=" width:50px;" onchange="checkall()">
        <option value="0"></option>
        <? $counter = 1; ?>
        <? while ($counter <= ($p['qty']) - $set1){ ?>
        <option value="<?php echo $counter ?>"><?php echo $counter ?></option>
        <? $counter++;
        }?>
        </select> 
```

**解决方案是结合你所有的答案，谢谢你们..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:59:09.370

而不是结合使用子查询`UNION ALL`中的三个查询并计算它们的总数`qty`？

```
SELECT SUM(qty)
FROM tableName
FROM
    (
        SELECT * 
        FROM prereservation 
        where ('$arival' BETWEEN arrival and departure) and 
                room_id ='11' and 
                status = 'active'
        UNION ALL
        SELECT * 
        FROM prereservation 
        where ('$departure' BETWEEN arrival and departure) and 
                room_id ='11' and 
                status = 'active'
        UNION ALL
        SELECT * 
        FROM prereservation 
        where (arrival > '$arival' and departure < '$departure') and 
                room_id ='11' and 
                status = 'active'
    ) a
GROUP BY colName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:59:18.377

您可以将 3 个 SQL 语句组合成一个 using`OR`子句，因为您基本上是`SELECT`针对`*`3 种不同情况使用同一张表。这样您就可以确保获得所有独特的结果。

就像是：

```
SELECT * FROM prereservation where
(
(arrival > '$arival' and departure < '$departure')
or ('$departure' BETWEEN arrival and departure)
or ('$arival' BETWEEN arrival and departure)
) and room_id ='11' and status = 'active' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:59:24.327

您可以使用以下命令将所有三个查询合并为一个查询`select ... union select ...`：

```
$query1 = mysql_query("SELECT * FROM prereservation where '$arival' BETWEEN arrival and departure and room_id ='11' and status = 'active' union SELECT * FROM prereservation where '$departure' BETWEEN arrival and departure and room_id ='11' and status = 'active' union SELECT * FROM prereservation where arrival > '$arival' and departure < '$departure' and room_id ='11' and status = 'active'"); 
```

然后，您不需要将多个结果合并为一个。

但是，一种更简单且成本更低的方法是将`where`子句合并为一个并使用它：

```
select * from prereservation
where ('$arival' between arrival and departure
       or '$departure' between arrival and departure
       or arrival > '$arival' and departure < '$departure')
      and room_id ='11' and status = 'active' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:06:01.683

更好地将您的 3 个查询合并为 1 个

```
SELECT id, SUM(qty) as sumQty 
FROM prereservation 
WHERE 
(
    ( arival BETWEEN '$arrival' AND 'departure' ) OR 
    ( departure BETWEEN '$arrival' AND '$departure' ) OR 
    ( arrival > '$arival' AND departure < '$departure')
)
    AND room_id ='11' 
    AND status = 'active'
GROUP BY id 
```

你可以`echo $rows3['id']. " - ". $rows3['sumQty'];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:07:46.550

您应该在条件之间使用带有 OR 的单个查询，并使用 DISTINCT 确保没有重复项。至于最后一个查询：

```
"SELECT sum(qty) FROM prereservation where id = $sample GROUP BY id;" 
```

# numpy - 用相同的数字填充一个numpy数组？

> ID：13192089
> 
> 赞同：14
> 
> 时间：2012-11-02T08:55:55.577
> 
> 标签：numpy

我知道如何在 100 个元素的数组中填充零：

```
np.zeros(100) 
```

但是如果我想用 9 填充呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-02T13:08:23.133

您可以使用：

```
a = np.empty(100)
a.fill(9) 
```

或者，如果您更喜欢切片语法：

```
a[...] = 9 
```

`np.empty`与 , 等相同`np.ones`，但可以更快一些，因为它不初始化数据。

在较新的 numpy 版本（1.8 或更高版本）中，您还拥有：

```
np.full(100, 9) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:43:03.960

如果您只想在整个数组中使用相同的值并且您从不想更改它，您可以通过将其设为零来欺骗步幅。通过这种方式，您只需将内存用于单个值。但是你会得到一个任意大小和形状的虚拟 numpy 数组。

```
>>> import numpy as np
>>> from numpy.lib import stride_tricks
>>> arr = np.array([10])
>>> stride_tricks.as_strided(arr, (10, ), (0, ))
array([10, 10, 10, 10, 10, 10, 10, 10, 10, 10]) 
```

但是，请注意，如果您修改任何一个元素，数组中的所有值都会被修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T20:28:45.103

这个问题已经在前面讨论过，请参阅[NumPy 数组初始化（使用相同的值填充）](https://stackoverflow.com/questions/5891410/numpy-array-initialization-fill-with-identical-values/13034424#13034424)，以及哪种方法最快。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T09:03:52.013

据我所知，没有专门的函数可以用 9s 填充数组。`np.empty(100)`因此，您应该使用9s 或循环中的任何内容创建一个空（即未初始化的）数组。

# xcode - 无法使用“stringByAppendingPathComponent”（基础）附加文件名

> ID：13192091
> 
> 赞同：0
> 
> 时间：2012-11-02T08:55:56.247
> 
> 标签：xcode, nsstring, filesystems, nsfilemanager, foundation

这里的问题是我无法使用“stringByAppendingPathComponent”附加文件名 fma 是 NSFileManager。

在职的：

```
[fma changeCurrentDirectoryPath: [NSHomeDirectory() stringByAppendingPathComponent: @"Music/iTunes/iTunes Media/Music/ABC/DEF"]];
NSLog(@"Current Directory Path: %@", [fma currentDirectoryPath]); 
```

输出：当前目录路径：/Users/plusa/Music/iTunes/iTunes Media/ABC/DEF

不工作：

```
[fma changeCurrentDirectoryPath: [NSHomeDirectory() stringByAppendingPathComponent: @"Music/iTunes/iTunes Media/Music/ABC/DEF/a.mp3"]];
NSLog(@"Current Directory Path: %@", [fma currentDirectoryPath]); // No change 
```

* * *

**更新**

我要做的是创建一个简单的文件管理器。

主文件

```
#import <Foundation/Foundation.h>
#import "fileManager.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSLog(@"Welcome to File Manager.");

        fileManager *fma = [[fileManager alloc] init];

        NSLog(@"Current Directory Path: %@", [fma currentDirectoryPath]);
        [fma changeCurrentDirectoryPath: [NSHomeDirectory() stringByAppendingPathComponent: @"Music/iTunes/iTunes Media/Music"]];
        NSLog(@"Directory Path changed to iTunes Music source base");

        [fma readCurrentItem];

    }
    return 0;
} 
```

文件管理器.h

```
#import <Foundation/Foundation.h>

@interface fileManager : NSFileManager {
    NSArray *list;
}

-(int) readCurrentItem;

@end 
```

文件管理器.m

```
#import "fileManager.h"

@implementation fileManager

-(int) readCurrentItem
{
    int i = 1;

    NSLog(@"Current Directory Path: %@", [self currentDirectoryPath]);
    NSLog(@"Reading Directory Path...");

    if(NSFileTypeDirectory == [[self attributesOfItemAtPath: [self currentDirectoryPath] error: nil] objectForKey: @"NSFileType"]) {
        list = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[self currentDirectoryPath] error: nil];
    } else {
        NSLog(@"File");
        return 0;
    }

    i = 1;
    for (NSString *item in list)
        NSLog(@"Item #%i: %@", i++, item);

    NSLog(@"The item to read:");
    scanf("%i", &i);

    if (i == 0) {
        NSLog(@"Shutdown.");
        return 0;
    }

    [self changeCurrentDirectoryPath: [[self currentDirectoryPath] stringByAppendingPathComponent: [list[(i - 1)] lastPathComponent]]];

    [self readCurrentItem];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:59:26.570

因为您的第二个示例指的是文件，而不是目录。

据推测，路径正在正确组合，但`NSFileManager`并没有更改文件的路径 - 再次，因为它不是目录。

# sql - SQL Server：将 char 转换为浮点数并舍入它

> ID：13192092
> 
> 赞同：0
> 
> 时间：2012-11-02T08:56:00.143
> 
> 标签：sql, sql-server

我有一个数据库，其中有一列`VARCHAR2`类型保持如下值：`398566,569885`

我需要的是将此数字转换为浮点数，然后使其看起来像：`398566,56` 将其转换为浮点数**并不是**那么重要，如果可以修剪数字也可以。

我尝试过的是：

```
select
cast (p1.VALUE as float) as Total
from Workflow p
LEFT JOIN PA_PARAMETER p1 on p1.ID=p.ID AND p1.NAME = 'Total'
WHERE p.TYPE = 'Marketing' 
```

有没有办法修剪这些数字或以某种方式对其进行舍入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:57:11.977

这将四舍五入你的数字

```
select cast(value as decimal(9,2)) 
from workflow... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:00:02.467

你可以做

```
declare @a nvarchar(max)
select @a = '398566,569885'
select cast(@a as decimal(29, 2)) 
```

但是由于四舍五入，您将收到**398566.57**
要获得**398566.56**，您必须使用带有指定第三个参数的 round 函数 - [http://msdn.microsoft.com/en-us/library/ms175003.aspx](http://msdn.microsoft.com/en-us/library/ms175003.aspx)（当值不是 0 时指定， numeric_expression 被截断。）

```
select cast(round(cast(@a as decimal(29, 10)), 2, 1) as decimal(29, 2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:22:53.400

据我所知，您只想将包含一些（欧洲）十进制文本的 VARCHAR 列重新格式化为 2 个位置。

```
select
left(p1.value, charindex(',', p1.value + ',')+2) as Total
from Workflow p
LEFT JOIN PA_PARAMETER p1 on p1.ID=p.ID AND p1.NAME = 'Total'
WHERE p.TYPE = 'Marketing'; 
```

如果你一直想要小数点后 2 位，那么

```
select
left(p1.value + ',00', charindex(',', p1.value + ',')+2) as Total
from Workflow p
LEFT JOIN PA_PARAMETER p1 on p1.ID=p.ID AND p1.NAME = 'Total'
WHERE p.TYPE = 'Marketing'; 
```

# c++ - 如何在 C++ 中创建动态数组的数组

> ID：13192093
> 
> 赞同：3
> 
> 时间：2012-11-02T08:56:13.350
> 
> 标签：c++

我正在尝试学习 C++ 并尝试为类似以下结构的简单哈希表编写代码：

```
array[0][0] array[0][1] array[0][2]
key 1        value 1      value 2

array[1][0] array[1][1] 
key 2        value 3     

array[2][0] array[2][1] array[2][2]
key 3        value 4      value 5 
```

表示动态数组的数组。现在，我不明白如何定义这样的数组？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T09:36:26.093

如果您**确实**需要创建动态数组的动态数组，则必须使用`new`两个数组的关键字来完成。例如：

```
// an array of int pointers... each points to the start of an array
int** arrays = new int*[10]; 
arrays[0] = new int[99]; // populate the first element of the array of arrays
arrays[1] = new int[47]; // arrays don't have to be the same size. 
```

当然，我强烈建议不要这样做。然后，您必须记住`delete[]`在每个成员上使用`arrays`以及在`arrays`其自身上使用。

真的，您应该为此使用内置`std::vector`类型。这就是它存在的原因（我投票支持其他答案！）。

请注意，这也不是连续的内存。此外，如果您确实希望成员数组的大小相同，则可以在`for`循环中分配它们的内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T08:59:11.867

在 C++ 中，您将使用 a`std::vector<T>` 并嵌套其中两个以获得 2D 数组。

```
 std::vector<std::vector<my_type>> vec;
 std::vector<my_type> v;
 vec.push_back(v);
 v.push_back(mytype); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T08:59:06.300

创建一个`vector <vector <T> >`.

例如

```
vector <vector <string> > array;

vector <string> temp;
temp.push_back(key1);
temp.push_back(value1);
temp.push_back(value2);
array.push_back(temp);
.
.
. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T16:02:59.753

这是旧的，我敢肯定我不会写任何答案海报在他们的脑海中不知道的东西，但 OP 看起来他正在做家庭作业。我的作业要求我在不使用任何 STL 资源的情况下编写例程。在这种情况下，这里唯一可能的答案是第一个。一开始的家庭作业不是关于效率，而是展示课程材料的使用。

不幸的是，很多时候他们想让你展示的东西从来没有在课程中说明过。这带来了像这样的 OP 来挖掘网络以寻找难以找到的参考。很难找到，因为没有人真正按照他们要求的方式去做。

我关注了这个链接，因为标题让我相信我会找到动态数组的静态数组的资源。因此，我将发布该应用程序以防其他人正在寻找该参考。

```
int main()
{

    int* time[2];

    int userInp;

    userInp = 5;

    time[0] = new int[userInp];

    time[0][1] = 6;

    cout << time[0][1];

    delete time[0];

    return 0;   
} 
```

# javascript - 在不同的 B2G/Firefox OS 应用中注册事件

> ID：13192098
> 
> 赞同：1
> 
> 时间：2012-11-02T08:56:32.407
> 
> 标签：javascript, firefox, web-applications, gecko, firefox-os

我正在为 Firefox OS 的主屏幕创建一个小部件。我已将小部件分离为 B2G 中的另一个应用程序，在主屏幕中，我将小部件的内容加载到 iframe 中。因为它来自不同的域，所以我修改了域，使它们相等，但是当我注册事件处理程序时，它仍然不起作用：

（widget 是 iframe 对象， foo 是我的函数。） widget.contentWindow.oncontextmenu = foo;

我的处理程序仍未响应“上下文菜单”事件而被调用。

但是，当我将小部件模块放在主屏幕模块中并让它们成为一个网络应用程序时，它可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T13:58:19.857

contentWindow 不可跨域访问。不同的应用程序有不同的来源。

如果您将 mozbrowser iframe 添加到主屏幕应用程序，则可以从该 iframe 中的 URL 加载小部件并侦听 iframe 上的 mozbrowsercontextmenu 事件。

```
<iframe id="widget" mozbrowser=true></iframe>

var widget = document.getElementById('widget');
widget.addEventListener('mozbrowsercontextmenu', eventHandler); 
```

有关如何处理 contextmenu 事件的示例，请参阅浏览器应用程序[https://github.com/mozilla-b2g/gaia/blob/master/apps/browser/js/browser.js#L1021](https://github.com/mozilla-b2g/gaia/blob/master/apps/browser/js/browser.js#L1021)

这需要向主屏幕应用程序添加“浏览器”权限。

如果您想将其作为应用程序加载，那么您也需要 iframe 上的 mozapp 属性，并且需要指向应用程序的清单。这就是系统应用程序中的窗口管理器将应用程序嵌入 iframe 的方式。

# iphone - 不再有 FlurryAnalytics 和 FlurryAppCircle？

> ID：13192102
> 
> 赞同：0
> 
> 时间：2012-11-02T08:56:49.007
> 
> 标签：iphone, ios, flurry

当我下载flurry sdk v4.0.6 时，有flurry 和flurryads 的文件夹，但没有FlurryAnalytics 和FlurryAppCircle 的文件夹。我需要获取 libFlurryAnalytics.a 和 libFlurryAppCircle.a 文件来运行我的上级传递的应用程序。无论如何，我可以下载 FlurryAnalytics 和 FlurryAppCircle？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:31:10.397

4.x Flurry iOS SDK 是模块化的，允许开发人员准确地选择他们希望集成到他们的应用程序中的组件。请注意 FlurryAPI (2.x) 或 FlurryAnalytics (3.x) 现在只是 Flurry。替换现有调用中与使用 Flurry 捕获分析数据相关的 FlurryAPI/FlurryAnalytics。同样，将现有调用中与应用推荐相关的 FlurryAPI 或 FlurryAppCircle/FlurryClips/FlurryReengagement 替换为 FlurryAds。SDK 文件夹和 support.flurry.com 中提供了新的集成说明。但是，如果您仍需要旧版本的 SDK，请写信至 support@flurry.com。（全面披露：我在 Flurry 的支持团队工作）

# nhibernate - 找不到属性 - 从 NHibernate 3 切换到 3.3.1 后出现异常

> ID：13192103
> 
> 赞同：4
> 
> 时间：2012-11-02T08:56:51.223
> 
> 标签：nhibernate, nhibernate-mapping

我有一个领域的类：

```
 protected DateTime insertDate; 
```

这是此字段的映射：

```
 <property name="InsertDate" access="field.camelcase" update="false" /> 
```

使用 ctor 时设置此字段

```
 public DocuBase(DateTime insertDate) 
```

并且仅在将行添加到数据库时才会持久化。**我根本不需要它的财产，没有 setter 也没有 getter。**我在 NHibernate 3 工作过。

现在，我已经从 NHiberbate 3 迁移到 NHibernate 3.3.1，并且在创建会话工厂时出现此异常：

> 在类“XXXX”中找不到与字段“insertDate”关联的属性“InsertDate”

为什么会发生以及如何更改映射以消除异常？

**编辑：**下面的答案是完全正确的。但是对于那些不需要/不想拥有属性并且只有字段的人来说，还有另一种解决方案：

*   将 name 属性设置为字段名称（在我的情况下是**insertDate**）并记住具有正确的列名

    ```
    <property name="insertDate" column="InsertDate" access="field.camelcase" update="false" /> 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:19:27.653

这是**区分大小写**的，这将起作用。

```
<property name="insertDate" column="InsertDate" update="false" /> 
```

看起来在 3.1.0 版中，发生了[重大变化](https://nhibernate.jira.com/browse/NH-2556)

*NH 今天接受以下代码。如果这会抛出会更好 - 当使用公共接口的属性名称（或成员信息）以其他方式配置 NH（或 3rd 方工具）时，它会导致问题，而不是通过 hbm。*

```
[hbm]
<property name="Name" access="field.camelcase" />

[code]
string name;
public virtual string SomeThingCompletelyDifferent{
                                  get {return name;}
                                  set{name=value;}
} 
```

**注意：这将是一个重大更改。**

ps - 更新答案以删除对使用私有集的属性的引用，因为这不是正在寻找的内容，并且上述重大更改更相关。

# bash - 使用 bash 以科学计数法读取数字

> ID：13192108
> 
> 赞同：1
> 
> 时间：2012-11-02T08:57:17.743
> 
> 标签：bash, bioinformatics, scientific-notation, blast

作为新鱼基因组注释管道的一部分，*我*需要比较来自 BLAST 的 e 值，以查看它们是否低于某个阈值。

为了获得正确的语义，我首先评估了爆炸输出中的其他列之一，它可以像这样正常工作：

```
for f in FOLDER/*; do 
myVar=$(head -1 $f | awk '{print $4}') ;
if [[ $myVar -gt 50 ]]; then echo ..... ;done 
```

然后 $4 是 BLAST 输出中的一列，其中包含整个数值（命中长度或其他内容）

但是，当我尝试将脚本更改为使用 e 值时，科学记数法等的解释存在一些问题......

我想要的是这样的：

```
for f in FOLDER/*; do 
myVar=$(head -1 $f | awk '{print $11}') ;
if [[ $myVar -gt 1.0e-10 ]]; then echo ..... ;done 
```

其中 $11 指向每个命中的 e 值。

这可以在bash中以一种不繁琐的方式完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:32:51.487

，有`awk`可能：

```
for f in FOLDER/*; do awk '$11 < 1e-10 {print $11}' "$f"; done 
```

这不需要首先定义变量。

# llvm - 如何更改类型：定义前使用全局变量

> ID：13192118
> 
> 赞同：3
> 
> 时间：2012-11-02T08:57:40.363
> 
> 标签：llvm, llvm-c++-api

就我而言，我需要在模块中创建对全局变量的引用，然后在引用之后定义全局变量。

当我创建将使用全局变量的指令时，我不知道变量的类型。即使我实际上只需要符号的地址，我仍然需要通过指定类型来创建 llvm::GlobalVariable 对象。

这导致了一个问题，当我稍后定义全局变量时，我知道类型但不幸的是我无法替换我之前创建的 GlobalVariable 对象。

这是伪代码：

```
llvm::Value *val = new llvm::GlobalVariable(module, llvm::Type::getInt32Ty(), false
          , llvm::GlobalValue::ExternalLinkage, 0, "myvar");

//.... create instructions
builder.CreatePtrToInt(val, llvm::Type::getInt32Ty());

//Here I need to define and intialize the global variable. 
//Now I know the exact type of   the variable. It's different as int32 
//for example it's int16.

llvm::Value *real_val = new llvm::GlobalVariable(module, llvm::Type::getInt16Ty()
          , false,llvm::GlobalValue::ExternalLinkage, 0, "myvar"); 
```

显然，我不能创建另一个具有相同名称的变量。但是如何将第一个 GlobalVariable 对象转换为实际类型并为其提供初始化程序？

有没有其他方法可以在不创建 GlobalVariable 对象的情况下获取符号地址？

# javascript - AJAX 调用 struts 动作不起作用

> ID：13192123
> 
> 赞同：0
> 
> 时间：2012-11-02T08:57:47.790
> 
> 标签：javascript, ajax, struts

嗨，我有一个要求，我必须检查 struts 动作类中的某些内容，然后使用在 JS fx 中调用的 ajax 调用将结果发送回浏览器。问题是我无法点击动作类并且控制台正在抛出以下错误： **org.apache.struts.action.RequestProcessor processActionCreate No action instance for path /ChangePwdAjax could be created java.lang.ClassNotFoundException:test.ChangePwdAjaxAction.java**

类已编译且包上下文有效 test.ChangePwdAjaxAction.java

任何想法我做错了什么以及在哪里做错了？

这是我到目前为止所写的。

JS代码

```
function checkError()
{
var valuePassword="test";

var url = "/test/ChangePwdAjax.do?newPass="+valuePassword;
        var xmlHTTP = getXMLHTTPRequest();

        xmlHTTP.onreadystatechange = function() { 
        handleResponse(xmlHTTP); }

        xmlHTTP.open("GET",url,true);

        xmlHTTP.send();

}

function handleResponse(xmlHTTP){
    alert("handleResponse");
        if (xmlHTTP.readyState == 4 && xmlHTTP.status == 200) {
            alert("handleResponse");
            var xmlDoc = xmlHTTP.responseXML;

            alert(xmlDoc.documentElement.getElementsByTagName("pwdFlag")[0].text);

        }       
    }

function getXMLHTTPRequest(){
    alert("getXMLHTTPRequest");
        if (window.XMLHttpRequest) {
            return new XMLHttpRequest();
        }
        // IE
        else if (window.ActiveXObject) {
            return new ActiveXObject("Microsoft.XMLHTTP");
        }
        else{
        alert("XMLHttpRequest is not supported!");
        }
    } 
```

动作类代码

```
public class ChangePwdAjaxAction extends Action {

    public ActionForward execute(final ActionMapping mapping, final ActionForm form,
            final HttpServletRequest request,final HttpServletResponse response)

    {

        System.out.println("----IN--AJAX ACTION----------");
        final HttpSession session= request.getSession(false);

        if(session==null || session.getAttribute("user_id")==null){

            return mapping.findForward("sessionexpired");
        }

        final String user_id=(String)session.getAttribute("user_id");

        try{

            final BusinessDelegate busdel=new BusinessDelegate(user_id,session.getId());

            String newpwd = (String)request.getParameter("newPass");

            boolean b=busdel.checkOldPWd(user_id, newpwd);
            //checking return values from bus delegate
            response.setContentType("text/xml");
            PrintWriter printwriter = response.getWriter();

            printwriter.println("<?xml version=\"1.0\"?>");
            printwriter.println("<Root>");

            if(b)
            {
                System.err.println("----New password Failed--Y--------");   
            printwriter.println("<pwdFlag>"+"Y"+"</pwdFlag>");
            }
            else
            {
                System.out.println("----New password OK---N-------");   
                printwriter.println("<pwdFlag>"+"N"+"</pwdFlag>");
            }

            printwriter.println("</Root>");

            }catch(Exception e){
                logger.logCommon("Login Action : Login Process in Action : ", "EXCEPTION");
                logger.logError(e);

            }

        return null;
    }

} 
```

Struts-config 入口

```
<action path="/ChangePwdAjax" type="test.ChangePwdAjaxAction.java"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:46:25.330

哎呀，这必须是

> 动作路径="/ChangePwdAjax" type="test.ChangePwdAjaxAction"/>

而不是

> 动作路径="/ChangePwdAjax" type="test.ChangePwdAjaxAction.java"/>

# java - 找不到公理类

> ID：13192131
> 
> 赞同：1
> 
> 时间：2012-11-02T08:58:15.287
> 
> 标签：java, axis2

我正在尝试编译 Axis2 附带的一个简单的 SOAP 客户端示例。但是 Java 编译器找不到导入：

```
import org.apache.axiom.om.OMAbstractFactory;
import org.apache.axiom.om.OMElement;
import org.apache.axiom.om.OMFactory;
import org.apache.axiom.om.OMNamespace;
import org.apache.axis2.AxisFault;
import org.apache.axis2.addressing.EndpointReference;
import org.apache.axis2.client.Options;
import org.apache.axis2.client.ServiceClient; 
```

我检查了我的类路径变量在命令行上是最新的，它包括：

```
C:\axis2-1.6.1\lib 
```

我还检查了 lib 目录是否包含所需的 Axiom jar（确实如此）

```
axiom-api-1.2.12
axiom-dom-1.2.12
axiom-impl-1.2.12 
```

并且这些 jar 与我正在导入的包匹配（它们确实如此）。我怎么仍然收到错误：

```
 error: package org.apache.axiom.om does not exist 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:03:17.033

[Asix2 用户指南](http://axis.apache.org/axis2/java/core/docs/userguide.html#distributions)描述了目录结构和 Axis2 工具的使用，以防止需要设置 CLASSPATH 环境变量：

> bin 目录包含许多有用的脚本。它们包括axis2.bat（或axis2.sh），它使您能够轻松执行Java 命令，而无需手动将所有Axis2 jar 文件添加到类路径中

# windows-8 - 如何开始将 Windows 8 应用程序移植到 Windows Phone 8？

> ID：13192132
> 
> 赞同：2
> 
> 时间：2012-11-02T08:58:16.633
> 
> 标签：windows-8, windows-phone-8

有一些文件可以将应用程序从 Windows Phone 7 移植到 Windows 8。我需要相反的，但 Windows Phone 8。

是否有任何帮助文档可以轻松地将我的 Windows 8 应用程序移植到 Windows Phone 8？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:59:08.240

可能这篇文章会有所帮助： [Windows Phone 8 和 Windows 8 平台比较](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681690%28v=vs.105%29.aspx) [最大化 Windows Phone 8 和 Windows 8 之间的代码重用](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681693%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T09:21:19.627

这得看情况。

Build 中有几个演示视频。他们讨论了 WinRT 和 Windows Phone 8 之间的代码共享和可移植性。

一般的想法是您应该将应用程序逻辑提取到`Portable Class Library`. 您的 Windows 8/WinRT 和 Windows Phone 8 应用程序可以共享相同的应用程序逻辑并拥有各自独立的 UI。

当然，这并不适用于所有情况，因为某些 api 不是交叉兼容的。但对于一般情况，它应该可以正常工作。

观看构建视频，您会发现很多帮助

[http://channel9.msdn.com/home](http://channel9.msdn.com/home)

# python - .gitignore 不忽略文件 Django

> ID：13192134
> 
> 赞同：3
> 
> 时间：2012-11-02T08:58:33.327
> 
> 标签：python, django, git, heroku, gitignore

所以我正在使用一个名为 hellodjango 的虚拟应用程序测试 Heroku，并将所有内容推送到 git。

添加了我的 .gitignore 文件（如果我错了告诉我，我创建了一个名为 django.gitignore 的文本文档，内容为 1 行，没有空格，venv*.log*.pot*.pyclocal_settings.py。

不知道我做错了什么，但这是我的目录

```
hellodjango/
    django.gitignore
    manage.py
    requirements.txt
    hellodjango/
        __init__.py
        __init__.pyc
        settings.py
        settings.pyc
        urls.py
        urls.pyc
        wsgi.py
        wsgi.pyc
    venv/
        Include/
        Lib/
        Scripts/ 
```

所以我不想暂存任何 .pyc 文件或 venv 文件夹。

在我的命令行中，我输入

> 混帐初始化

```
Initialized empty Git repository in /Users/Chris/hellodjango/.git/
>git add .
>git status 
```

当我进入 git status 时，venv 和 .pyc 中的所有文件都被暂存。为什么 .gitignore 不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:00:32.497

gitignore 文件只需要在点前`.gitignore`不带 a命名`django`。

您可以在官方网站上的 ProGit 书中找到有关忽略文件和可能支持的模式的更多信息：[ProGit Chapter 2-2](http://git-scm.com/book/ch2-2.html)。

# codeigniter - 在 CodeIgniter 中捕获 url

> ID：13192136
> 
> 赞同：1
> 
> 时间：2012-11-02T08:58:45.107
> 
> 标签：codeigniter

我得到像**http://localhost/webpt/ipn/checkout/?token=EC-2YD51592ET0280122&PayerID=VNH3J2KQEK8AS 这样的网址**，并想在我的控制器中附加。在我的控制器代码中

```
function checkout($token = array()) {
        echo"<pre>";
        print_r($token);
        echo"</pre>";
    } 
```

但它显示空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:11:15.837

好的，我只是`$config['uri_protocol'] = 'AUTO';`在**config.php**中设置& 使用 `echo ($_GET['token']);`或`print_r($this->input->get()); // print all the get values`& 它工作正常，谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:03:38.070

您可以获取令牌的值，`$this->input->get('token');`因为它是在问号后的 url 中传递的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:04:59.640

如果您的意思是要捕获参数`token`，则有两种选择：

**将您的网址格式化为** `http://localhost/webpt/ipn/checkout/nouman`

然后你像这样在你的控制器中捕获它：

```
function checkout($token) {
    echo $token;
} 
```

**或使用** `$this->input->get('token')`

```
function checkout() { // http://localhost/webpt/ipn/checkout/?token=8767&param2=333
 echo $this->input->get('token'); // echo the name param
 print_r($this->input->get()); // print all the get values
} 
```

# windows-phone-7 - 在 windows phone 7 中弹出可编辑文本

> ID：13192141
> 
> 赞同：0
> 
> 时间：2012-11-02T08:59:06.137
> 
> 标签：windows-phone-7, popup

我想给用户重命名文件的特权。为此，当用户单击菜单项“重命名”时，弹出对话框和可编辑文本框应该显示“确定”和“取消”按钮？我该如何实施？如果有，请分享代码。

兄弟，基努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:07:51.880

您可以使用`InputPrompt`来自[Coding4fun Tookit](http://coding4fun.codeplex.com/)

该文档可在 Codeplex 上找到：[http ://coding4fun.codeplex.com/wikipage?title=InputPrompt&referringTitle=Documentation](http://coding4fun.codeplex.com/wikipage?title=InputPrompt&referringTitle=Documentation)

调用它很简单：

```
var input = new InputPrompt();
input.Completed += InputCompleted;
input.Title = "Rename file";
input.Message = "Enter a new name for the file:";
input.Show(); 
```

然后你只需要在回调中检索值：

```
private void InputCompleted(object sender, PopUpEventArgs<object, PopUpResult> e)
{
    MessageBox.Show(e.Result);
} 
```

# android - 打开相机和getParameters时出错

> ID：13192144
> 
> 赞同：0
> 
> 时间：2012-11-02T08:59:08.737
> 
> 标签：android, android-manifest, android-camera

这是我的 MainActivity 中的代码：

```
package com.simple.flashlight;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Camera;
import android.hardware.Camera.Parameters;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_menue);

        Button turnOnButtOn = (Button) findViewById (R.id.button1);
        Button turnOnButtOff = (Button) findViewById (R.id.button2);
        Camera mCam = Camera.open(); //here is an error
        Parameters p = mCam.getParameters(); //here is an error

        turnOnButtOn.setOnClickListener(new Button.OnClickListener(){
            public void onClick(View cameraButton){
                //Turn ON
            }
        });

        turnOnButtOff.setOnClickListener(new Button.OnClickListener(){
            public void onClick(View cameraButton){
                //Turn OFF
            }
        });
    }
} 
```

这就是我在清单文件中的内容：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.simple.flashlight"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.CAMERA" />

    <uses-feature android:name="android.hardware.camera" />

    <permission
        android:name="android.permission.FLASHLIGHT"
        android:permissionGroup="android.permission-group.HARDWARE_CONTROLS"
        android:protectionLevel="normal" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我收到错误，`Camera mCam = Camera.open();`错误`Parameters p = mCam.getParameters();`是：
1\. 方法 open() 未定义为 Camera 类型。
2\. 方法getParameters() 对Camera 类型未定义。

我是Android开发的新手，所以也许我错过了一些非常愚蠢的东西，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:09:42.553

删除`import android.graphics.Camera;`
It's 混淆你的调用并且没有 open() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T15:30:57.673

删除导入android.graphics.Camera；并且在导入时，导入“Camera”（android.hardware）而不是“Camera”（android.graphics）。

# sql-server - SQL 分别返回两个表行

> ID：13192145
> 
> 赞同：1
> 
> 时间：2012-11-02T08:59:09.980
> 
> 标签：sql-server, sql-server-2008, tsql

我有两个表，想返回两个表的行。两个表没有任何关系。

`Table 1`有列`userid, name`，还有其他列......并且`Table 2`只有两列`id, name`。

我希望两个表结果都在一个查询结果集中。

表格结果：

```
userid name and other columns from Table 1.
id     name and NULL, NULL should show as Table 2 do not have extra columns. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:00:21.213

用一个`union`

```
select userid, name, col1, col2, col3 from table1
union all
select id, name, null, null, null from table2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:07:03.993

```
select userid, name, col1, col2, col3 from table1
union all
select id, name, null, null, null from table2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:04:16.587

这应该有效：

```
(SELECT userid, name, column3, column4, column5 FROM table1)
UNION ALL
(SELECT id, name, NULL, NULL, NULL FROM table2) 
```

# php - PHP在存在时抛出未定义的函数

> ID：13192146
> 
> 赞同：0
> 
> 时间：2012-11-02T08:59:10.533
> 
> 标签：php, undefined, runtime-error

我正在编写一个配置文件解析器，并在我的 Config.php 文件中有一个名为 getVals() 的函数，但显然当我在测试中调用它时，它会引发“未定义函数”错误。

配置文件

```
<?php

require_once '../extlib/pear/Config/Lite.php';

class Config {

private $config;

function __construct($conf) {
    $this->config = new Config_Lite();
    echo "calling open...<br>";
    $this->open($conf);
    echo "open done...<br>";
}

function open($cfile) {
    if (file_exists($cfile)) {
        $this->config->read($cfile);
    } else {
        file_put_contents($cfile, "");
        $this->open($cfile);
    }
}

function getVals() {
    return $this->config;
}

function setVals($group, $key, $value) {
    $this->config->set($group, $key, $value);
}

function save() {
    $this->config->save();
}

}

?> 
```

cfgtest.php 中的测试类

```
<?php

error_reporting(E_ALL);
ini_set("display_errors", 1);

require_once '../util/Config.php';

$cfile = "../../test.cfg";
$cfg = new Config($cfile);
if (is_null($cfg)) {
    echo "NULL";
} else {
    echo $cfg.getVals();
}

?> 
```

输出

```
calling open...
open done...
Fatal error: Call to undefined function getVals() in cfgtest.php on line 13 
```

我想知道当函数已经存在时为什么会出现未定义的函数错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T09:01:02.897

在 php 中调用方法或对象的成员，使用 -> 操作符：

```
if (is_null($cfg)) 
{
     echo "NULL"; 
} 
else 
{
     echo $cfg->getVals(); 
} 
```

[在PHP 的网站](http://www.php.net/manual/en/language.oop5.basic.php)上了解有关 PHP 面向对象编程的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:02:14.747

呼叫应使用 -> 运算符

```
$cfg.getVals(); 
```

应该

```
$cfg->getVals(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:02:36.537

使用 `$cfg->getVals();`而不是`$cfg.getVals();` 现在您正在尝试进行连接！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:07:12.823

哎呀...错过了'->'。哈哈。对所有人都有好处。

# iphone - 如何将对象添加到数组内的数组中？

> ID：13192158
> 
> 赞同：0
> 
> 时间：2012-11-02T08:59:42.943
> 
> 标签：iphone, ios, nsmutablearray

我正在尝试将对象添加到数组内的数组中。

![屏幕](../Images/ef1cdd7c5cb4f3b47aab2aea5c0b5b86.png)

这是我的故事板。屏幕 A 是一个简单的 tableView，其中包含一个带有对象 A 的数组，屏幕 B 将新对象添加到屏幕 A。每个对象 A 都包含一个带有详细信息的数组（对象 B），这些详细信息显示在屏幕 C 中，您可以向对象 A 添加详细信息屏幕 D。

![数组](../Images/9ae928d69429bf4f87fc82f9dc8368c7.png)

所以我的模型就像你在上面看到的那样。我得到了包含对象 A 的数组 A，每个对象都包含包含对象 B 的数组 B。我的两个数组都是可变的。

对象 A = 预算 对象 B = 项目

我不知道如何将对象 B 添加到数组 B。

```
- (void)addItemViewController:(AddItemViewController *)controller didFinishAddingItem:(Item *)item

    int newRowIndex = [self.budgets.items count];
[self.dataModel.budgetsList addObjectFromArray:item];

NSLog(@"Item with name %@ added", item.name);

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:newRowIndex inSection:0];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
[self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

[self dismissViewControllerAnimated:YES completion:nil]; 
```

这就是我正在做的票价。我的问题是我将项目（对象 B）添加到预算数组（数组 A）中。：/

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:12:54.717

当你这样做时：

```
NSArray *indexPaths = [NSArray arrayWithObject:indexPath]; 
```

您正在将演示文稿与数据混合。您在这里需要的是获取此 indexpath 对应的对象元素（在您的情况下为数组）。根据表视图设计模式，每个表视图都从底层数据对象集合中读取其单元格。您是否定义了这个对象（最好在单独的objective-c .m 和.h 文件中）？

至于将数组添加到另一个数组中，NSArray 只期望 NSObject 作为元素，因此将一个添加到另一个数组中非常简单。

```
NSArray *arrayB = [[NSArray alloc] init]; //any other initialization is good as well
NSArray *arrayA= [NSArray arrayWithObject:arrayB]; 
```

上面的代码对代码中的任何一对 NSArray 都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:18:16.497

If you want to add an object to Array B, then Use:

```
[[[array A objectAtIndex:indexPath] arrayB] addObject:yourObject]; 
```

Or you can use (this is an expansion of above code):

```
ObjectA *temp = [array A objectAtIndex:indexPath];

NSMutableArray *tempArray = [temp arrayB];

[tempArray addObject:yourObject]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:18:50.787

投射你的对象 B`Item`然后做

```
[self.dataModel.budgetList replaceObjectAtIndex:11 withObject:(Item)item]; 
```

此代码假设您要替换 A 中的现有对象，并且索引为 11。如果要添加，只需使用`insertObjectAtIndex: withObject:`

# iframe - 网络中心 iframe 问题

> ID：13192159
> 
> 赞同：1
> 
> 时间：2012-11-02T08:59:51.760
> 
> 标签：iframe, webcenter

我正在使用 WebCenter，并且正在使用 iframe 在链接下方的单独框架中打开文档。当我尝试这样做时，它包括主页框架，而不仅仅是加载文档内容。所以我最终得到了来自主页的框架，中间的新文档再次被主页框架包围。如何阻止主页框架显示并只加载文档页面？我只想让底部框架刷新并显示内容。

有任何想法吗

-乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T16:27:47.807

您需要创建一个没有任何您不想要的东西的新页面模板。

然后，创建一个不嵌套在主空间内的新空间。称之为最小空间。然后将您想要框架的页面添加到具有自己的页面模板的新空间中。

那会做你想做的事。

# android - Android中的图像变形效果

> ID：13192166
> 
> 赞同：4
> 
> 时间：2012-11-02T09:00:16.653
> 
> 标签：android, image-processing

> **可能重复：**
> [如何在 Android 中实现图像失真效果](https://stackoverflow.com/questions/13137115/how-to-implement-image-distortion-effects-in-android)

只是想知道如何使用图像处理（变形），我想有变形效果到图像的能力

类似下面给出的这个应用程序的东西

[1.人脸效果](https://play.google.com/store/apps/details?id=com.appspot.swisscodemonkeys.warp&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hcHBzcG90LnN3aXNzY29kZW1vbmtleXMud2FycCJd)

[2.照片变形](https://play.google.com/store/apps/details?id=hu.tonuzaba.android&feature=search_result#?t=W251bGwsMSwxLDEsImh1LnRvbnV6YWJhLmFuZHJvaWQiXQ..)..

我尝试了[位图网格代码](http://code.google.com/p/android-examples/source/browse/trunk/BitmapMesh/src/com/android/bitmapmesh/BitmapMesh.java?r=5)，但这不是我想要的。

任何**想法/提示/链接**都可以理解。

# c++ - 显示对话框后运行功能

> ID：13192167
> 
> 赞同：4
> 
> 时间：2012-11-02T09:00:17.487
> 
> 标签：c++, mfc, cpropertysheet

我正在使用带有 CPropertyPages 的 MFC 向导。显示页面后有什么方法可以调用函数吗？目前，当我点击上一页的“下一步”按钮时，该功能开始。

我试图从 OnShowWindow、OnCreate、OnSetActive、DoModal 调用该函数，但它们都不起作用。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:39:52.350

通常重写 OnSetActive() 就足够了。但是，此方法在 CPropertyPage 变得可见和聚焦之前被调用。*如果您必须在页面显示后*执行任务，您必须在 OnSetActive 中发布您自己的消息：

```
// This message will be received after CMyPropertyPage is shown
#define WM_SHOWPAGE WM_APP+2

BOOL CMyPropertyPage::OnSetActive() {
    if(CPropertyPage::OnSetActive()) {
        PostMessage(WM_SHOWPAGE, 0, 0L); // post the message
        return TRUE;
    }
    return FALSE;
}

LRESULT CMyPropertyPage::OnShowPage(UINT wParam, LONG lParam) {
    MessageBox(TEXT("Page is visible. [TODO: your code]"));
    return 0L;
}

BEGIN_MESSAGE_MAP(CMyPropertyPage,CPropertyPage)
    ON_MESSAGE(WM_SHOWPAGE, OnShowPage) // add message handler
    // ...
END_MESSAGE_MAP() 
```

# php - mysql日期显示今天/昨天/周的结果

> ID：13192170
> 
> 赞同：7
> 
> 时间：2012-11-02T09:00:24.903
> 
> 标签：php, mysql, unix, date, time

我正在从表中检索数据并显示条目的总和。我想要做的是显示在今天、昨天和本月所做的条目的总和。该表使用 unix 时间戳格式（例如 1351771856）。

目前我正在使用这条线来显示今天的结果：

```
AND comment_date > UNIX_TIMESTAMP() - 24 * 3600"; 
```

但这只是给了我过去 24 小时的条目。

**示例**：假设它是星期五，下午 17:00 - 它给了我从星期四 17:00 PM 到星期五 17:00 PM 的计数

**我想要**的是得到结果

*   星期四 00:00:00 - 23:59:59（本例为昨天）
*   今天的结果 (00:00:00 - 23:59:59)
*   上周，从星期一 00:00:00 到“今天”（在本例中为星期五）开始的结果。

我在 MySQL 文档中找不到实现此目的的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:11:02.313

这个mysql代码应该适合你：

```
// Today
AND DATE(from_unixtime(comment_date)) = CURRENT_DATE

// Yesterday
AND DATE(from_unixtime(comment_date)) =  DATE_SUB(CURRENT_DATE,INTERVAL 1 DAY)

// This week
AND YEARWEEK(from_unixtime(comment_date), 1) =  YEARWEEK(CURRENT_DATE, 1)

// This month
AND YEAR(from_unixtime(comment_date)) = YEAR(CURRENT_DATE)
AND MONTH(from_unixtime(comment_date)) = MONTH(CURRENT_DATE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:14:09.663

只需使用这个：

```
AND comment_date > date_sub(current_date, interval 1 day) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:36:46.653

*在这里查看我的答案，我认为这很相关。*

[从订单表中提取本周的记录](https://stackoverflow.com/questions/13115130/pull-records-from-orders-table-for-the-current-week-php-mysql-codeigniter/13115178#13115178)

**[**考虑与MySQL 的 GROUP BY**](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html)**亲密接触**。如果您使用 MySQL，您很可能需要知道这一点。**

# php - æ ø å 的服务器问题

> ID：13192173
> 
> 赞同：3
> 
> 时间：2012-11-02T09:00:45.990
> 
> 标签：php, html, special-characters

我有一个 UNIX 服务器正在运行。我有一个程序，可以将图像上传到我的服务器。

但我对这些字符有一些问题：``ø`` ``æ`` ``å``

在我的程序中，我使用

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

**示例**：

我上传了一张名为`påske.png`

在我的服务器上，我可以看到图片被称为`påske.png`

在我的数据库中，名称`påske.png`也被保存。

如果我随后手动尝试查看我的图片，则会收到错误消息

我输入：`www.myserver.com/uploads/påske.png`

```
Error: /uploads/pÃ¥ske.png was not found on this server. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:05:40.180

您不应该将特殊字符直接保存为文件名。给他们一个新的名字，比如**时间戳**，或者用英文等价物替换空格字符。

你所拥有的是正常的，那么你的服务器/网络服务器有一个默认的字符集，例如**UTF-8**。Linux 中的特殊字符显示在此字符集中。

**编辑：**

[在使用 PHP 上传文件之前替换特殊字符](https://stackoverflow.com/questions/9838994/replace-special-characters-before-the-file-is-uploaded-using-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:28:56.673

或者，您可以使用此类[并](http://www.phpclasses.org/package/115-PHP-Convert-special-string-into-normal-string-.html)在上传期间更改文件名

```
* normal - converts each special character (áéíÁÈÒÖ) to their 
normal character (aeiAEOO)

string $class->normal(string string);

Example: 
print $strings->normal("faço áeéíàÒ");
# will output: faco aeeiaO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T14:32:34.580

试试这个。

```
function de_danishify_filename_on_upload($filename) {
if("do a check") return $filename; // Checks to see if a string is utf8 encoded

$filter_chars = array(
    // Character mapping from UTF-8 characters to ASCII characters. 
    chr(195).chr(134) => 'AE',  // &AElig; to Ae
    chr(195).chr(166) => 'ae',  // &aelig; to ae
    chr(195).chr(152) => 'OE',  // &Oslash; to OE
    chr(195).chr(184) => 'oe',  // &oslash; to oe
    chr(195).chr(133) => 'AA',  // &Aring; to AA
    chr(195).chr(165) => 'aa'   // &aring; to aa
);
$translated = strtr($filename,$filter_chars); // Translate characters

return $translated;
} 
```

# java - 使用 Java 调用 .dll 的方法

> ID：13192177
> 
> 赞同：1
> 
> 时间：2012-11-02T09:01:09.003
> 
> 标签：java, dll

我有几个 .dll 文件，我必须从 Java 调用这些 .dll 文件的方法。我怎样才能做到这一点 ？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:04:12.817

您可以使用 Java 本机接口 (JNI)。您可能需要修改/添加具有适当签名的方法到您的 DLL，或者为它编写一个 C/C++ 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:10:50.753

调用本机函数的标准方法是使用 JNI，但您也可以查看 Java Native Access ( [JNA](http://en.wikipedia.org/wiki/Java_Native_Access) )。在 JNA 的帮助下，您可以从 dll 调用本机函数，而无需编写样板代码。

# c# - imagelist set imagesize 不会调整随后添加的图像的大小

> ID：13192181
> 
> 赞同：0
> 
> 时间：2012-11-02T09:01:26.427
> 
> 标签：c#, winforms, listview

在调整显示图像大小的功能中`CurrentImages`，突然间，仅在此生产版本中，而不是在以前的测试版本中，图像似乎无法缩放。

相反，它们被剪裁了。

```
private void ResizeCurrentImages(double zoom)
{
    foreach (Image image in this.CurrentImages.Images)
    {
        image.Dispose();
    }

    this.CurrentImages.Images.Clear();
    this.CurrentImages.ImageSize = new Size((int)Math.Floor(this.MAX_WIDTH * zoom), (int)Math.Floor(this.MAX_HEIGHT * zoom));    

    foreach (Image image in this.OriginalImages.Images)
    {
        this.CurrentImages.Images.Add(image);
    }
} 
```

哪里`MAX_WIDTH = 161`和`MAX_HEIGHT = 256`。

根据 MSDN 文档，我遵循正确的步骤，首先设置新的图像大小，然后添加图像。

以前有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:03:14.700

事实证明，错误出在代码的其他地方。还有另一部分更改了图像，它使用原始大小而不是缩放大小创建了位图。

# jquery - $.ajax PUT 给我 http 状态码 0

> ID：13192186
> 
> 赞同：1
> 
> 时间：2012-11-02T09:01:47.850
> 
> 标签：jquery, google-chrome, asp.net-mvc-4

> **可能重复：**
> [Put 方法无法通过 AJAX 在 Google Chrome 中运行](https://stackoverflow.com/questions/12489582/put-method-not-working-in-google-chrome-through-ajax)

这让我很精神：

在页面 javascript

```
 var ajaxResponse = $.ajax(url, {
                type: "PUT",
                data: video
            }); 
```

和一个 web api 方法

```
public HttpResponseMessage Put(int id, Video video)
{
    // Never reaches here in Google chrome, unless i call the ajax method 2 times
} 
```

这适用于最新的 IE 和 Mozilla Firefox，也尝试使用[curl](http://curl.haxx.se/)来确定。GET 和 POST 版本适用于所有浏览器。

然而，在 Google Chrome 上，我收到 http 状态代码 0。我必须调用 ajax 方法 2 次，接收 http 状态代码 0 两次，然后才调用 PUT web api 控制器方法。我在 Google Chrome 的开发者控制台中没有发现任何错误。

# xampp - 配置防火墙以启用 XAMPP 在 LAN 上工作

> ID：13192193
> 
> 赞同：14
> 
> 时间：2012-11-02T09:02:21.127
> 
> 标签：xampp, firewall, lan

当我关闭防火墙时，我可以通过其他局域网计算机访问我的 XAMPP 网站。当我打开防火墙时，我无法再连接到机器了。有人可以告诉我发生了什么吗？

我的操作系统是windows xp。谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-07-04T09:21:25.610

转到控制面板->转到Windows防火墙->然后高级设置->

1.  单击入站规则
2.  右键单击入站规则并选择“新建规则...”
3.  选择选项端口，然后单击下一步
4.  为 apache 服务器选择所有本地端口或您的端口号。然后点击下一步
5.  选择选项允许连接，然后单击下一步
6.  下一个
7.  给 Xampp 命名允许所有本地端口

试试这个，我希望它对你有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T23:07:20.080

好吧，首先，主机上的防火墙阻止了您的连接。如果您使用的是 Windows 防火墙或任何其他防火墙，您需要为 XAMPP 制定一个例外规则。

因此，在托管网站的计算机上，转到控制面板-> Windows 防火墙并取消选中*不允许例外*复选框。现在打开*Exceptions*选项卡并单击按钮 Add program 并找到 Xampp 和 Apache。将它们添加到防火墙例外规则。

也许您应该在某些虚拟机（VMware、Virtualbox..etc）上进行此测试，**因为如果该机器连接到 Internet，则打开端口并添加例外**是不安全的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-05T06:18:54.010

我知道这是一个老问题，`Windows XP`但现在对于使用当前操作系统的用户`Windows 10`来说，对我有用的选项是可以将入站规则配置文件设置`Public`为默认`Apache Http Server`设置为`Private`。

[![在此处输入图像描述](../Images/3541aafa17eb1856555e2c448ee9657b.png)](https://i.stack.imgur.com/Y1XZ1.png)

配置文件可以在`Apache Http Server`入站规则属性的“高级”选项卡中设置，如下所示（可以通过右键单击`Apache Http Server`并选择属性打开属性对话框）：

[![在此处输入图像描述](../Images/659dcdcbc3661367c223bac0039e0b09.png)](https://i.stack.imgur.com/qi9zV.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-06T03:05:26.543

就我而言，（windows 10 和 xampp v3.3.2） 1\. 打开控制面板 2\. 搜索 windows 防火墙 3\. 单击高级设置 4\. 单击入站规则 5\. 允许名称为 Apache HTTP Server 和 mysqld 的所有阻止规则

[![在此处输入图像描述](../Images/e75479ee9b88805d18ba1993724025d8.png)](https://i.stack.imgur.com/6JxrR.jpg)

# wcf - WCF 流式传输大文件

> ID：13192198
> 
> 赞同：0
> 
> 时间：2012-11-02T09:02:34.510
> 
> 标签：wcf, wcf-data-services, wcf-binding, wcf-client

我读了这篇文章[http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)通过 WCF 上传大文件。

我创建了相同的配置，但即使我添加了属性，我也只是上传了 48kb 文件`maxReceivedMessageSize ="2147483647"`。当我尝试上传超过 48kb 的文件时出现错误

> *远程服务器返回错误：（413）请求实体太大。*

我错了还是错过了什么？下面是我的配置

服务器配置：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime executionTimeout="4800" maxRequestLength="2097150"/>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <!--BINDING-->
    <bindings>
      <basicHttpBinding>
        <binding name="TransferService" 
                 closeTimeout="00:10:00"
                 maxBufferPoolSize="2147483647"
                 maxBufferSize="2147483647"
                 maxReceivedMessageSize ="2147483647" 
                 openTimeout="00:10:00" 
                 receiveTimeout="00:10:00" 
                 sendTimeout="00:10:00" 
                 messageEncoding="Text"
                 transferMode="Streamed"
                 >
          <readerQuotas
            maxDepth="2147483647" 
            maxStringContentLength="2147483647"
            maxBytesPerRead="2147483647" 
            maxNameTableCharCount="2147483647" 
            maxArrayLength="2147483647"/>
        </binding>
        </basicHttpBinding>
    </bindings>

    <!--SERVICE-->
    <services>
      <service name="TransferService.TransferService" 
               behaviorConfiguration="TransferServiceBehavior" >
         <endpoint  
             address="" 
             binding="basicHttpBinding" 
             bindingConfiguration="TransferService" 
             contract="TransferService.ITransferService" >
        </endpoint>
      </service>
    </services>

    <!--BEHAVIOR-->
    <behaviors>
      <serviceBehaviors>
        <behavior name="TransferServiceBehavior">
          <serviceMetadata httpGetEnabled="true"  />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceThrottling maxConcurrentCalls="500" maxConcurrentSessions="500" maxConcurrentInstances="500" />
        </behavior>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
 <system.webServer>
   <security>
     <requestFiltering>
       <requestLimits maxAllowedContentLength="500000000"></requestLimits>
     </requestFiltering>
   </security>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

网络客户端配置：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ITransferService" />
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint name="BasicHttpBinding_ITransferService" 
          address="http://localhost/transfer/TransferService.svc"
          binding="basicHttpBinding" 
          bindingConfiguration="BasicHttpBinding_ITransferService"
          contract="TransferService.ITransferService" />
    </client>
  </system.serviceModel> 
```

请提出任何解决方案。

提前致谢

* * *

现在我已经按照您的建议更改了配置，但它仍然引发相同的错误 400 或 413。下面是我的测试项目。我不知道为什么？（环境：Window 7 Pro 64 位，IIS7，WCF 4.0）

[https://skydrive.live.com/redir?resid=BFE92959302FBAA0!105&authkey=!ANO_URChpql9gKE](https://skydrive.live.com/redir?resid=BFE92959302FBAA0!105&authkey=!ANO_URChpql9gKE)

我花了两个星期来研究，但这是同样的错误。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:27:43.277

好吧，客户端配置还**必须**定义相同的绑定配置（具有更大的传输大小），并在其端点配置中指定该绑定配置！

因此，将您的客户端配置更改为：

```
<system.serviceModel>
   <bindings>
      <basicHttpBinding>
        <binding name="TransferService" 
                 closeTimeout="00:10:00"
                 maxBufferPoolSize="2147483647"
                 maxBufferSize="2147483647"
                 maxReceivedMessageSize ="2147483647" 
                 openTimeout="00:10:00" 
                 receiveTimeout="00:10:00" 
                 sendTimeout="00:10:00" 
                 messageEncoding="Text"
                 transferMode="Streamed"
                 >
          <readerQuotas
            maxDepth="2147483647" 
            maxStringContentLength="2147483647"
            maxBytesPerRead="2147483647" 
            maxNameTableCharCount="2147483647" 
            maxArrayLength="2147483647"/>
        </binding>
        </basicHttpBinding>
    </bindings>

    <client>
      <endpoint name="BasicHttpBinding_ITransferService" 
          address="http://localhost/transfer/TransferService.svc"
          binding="basicHttpBinding" 
          bindingConfiguration="TransferService"
          contract="TransferService.ITransferService" />
    </client>
  </system.serviceModel> 
```

然后您*应该*在客户端和服务器上具有相同的设置，*然后*这些设置将变得有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:54:45.853

我检查了你的项目，用这个替换你的 webconfig 并更新服务参考再试一次，

```
 <?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime executionTimeout="4800" maxRequestLength="2097150"/>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <!--BINDDING-->
    <bindings>
      <basicHttpBinding>
      </basicHttpBinding>
      <customBinding>
        <binding name="LargeSilverlight" closeTimeout="00:21:00" openTimeout="00:20:00"
          receiveTimeout="00:20:00" sendTimeout="00:50:00">
          <textMessageEncoding maxReadPoolSize="2147483647" maxWritePoolSize="2147483647">
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
              maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          </textMessageEncoding>
          <httpTransport maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
            maxBufferSize="2147483647" />
        </binding>
      </customBinding>
    </bindings>
    <client>
    </client>
    <!--SERVICE-->
    <services>
      <service name="TransferService.TransferService"  behaviorConfiguration="SilverlightWCFLargeDataApplication" >
        <endpoint  address="" binding="customBinding" bindingConfiguration="LargeSilverlight" behaviorConfiguration="SilverlightWCFLargeDataApplication" contract="TransferService.ITransferService" >
        </endpoint>

      </service>
    </services>

    <!--BEHAVIOR-->
    <behaviors>
      <serviceBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>

      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

  </system.serviceModel>
  <system.webServer>

    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="500000000"></requestLimits>
      </requestFiltering>
    </security>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T02:01:04.707

我面临同样的问题。我在配置文件中使用了这个代码然后我可以上传 25MB 文件试试这个

```
<system.serviceModel>
      <bindings>
           <basicHttpBinding>
               <binding name="webserviceMOSSuiteSoap" 
              closeTimeout="00:01:00" 
              maxBufferPoolSize="20000000" 
              maxBufferSize="20000000" 
              maxReceivedMessageSize="20000000" 
              openTimeout="00:01:00" 
              receiveTimeout="00:10:00" 
              sendTimeout="00:01:00" 
              messageEncoding="Text" 
              transferMode="Buffered" 
              allowCookies="false" 
              bypassProxyOnLocal="false" 
              hostNameComparisonMode="StrongWildcard"                        
              textEncoding="utf-8"                       
              useDefaultWebProxy="true">
              <readerQuotas maxDepth="32" 
                            maxStringContentLength="20000000" 
                            maxArrayLength="20000000" 
                            maxBytesPerRead="20000000" 
                            maxNameTableCharCount="20000000"/>
              <security mode="None">
              <transport clientCredentialType="None" 
                    proxyCredentialType="None" 
                    realm=""/>
            <message clientCredentialType="UserName" 
                 algorithmSuite="Default"/>
                          </security> 
                    </binding>
            </basicHttpBinding>   
      </bindings>
<client>      
        <endpoint address="http://localhost/WebServiceConnect/webservice.asmx" 
                  binding="basicHttpBinding" 
                  bindingConfiguration="webserviceMOSSuiteSoap" 
                  contract="ServiceReference1.webserviceMOSSuiteSoap" 
                  name="webserviceMOSSuiteSoap"/>
    </client>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" 
                               multipleSiteBindingsEnabled="true"/>
</system.serviceModel> 
```

# ssl - 具有多级子域的通配符 SSL 证书注册

> ID：13192200
> 
> 赞同：4
> 
> 时间：2012-11-02T09:02:36.197
> 
> 标签：ssl, dns, subdomain

我的客户拥有“domain.com”。我们需要为内部和外部访问提供各种应用程序友好的名称。这些应用程序是具有不同身份验证级别的 WCF Web 服务和 MVC Web 应用程序（在 AD 域内和跨 AD 域的 Windows 身份验证以及纯文本身份验证）。它看起来有点像这样：

**UAT 环境**

*   service1.uat.services.domain.com
*   service2.uat.services.domain.com
*   service3.uat.services.domain.com
*   service4.uat.services.domain.com
*   application1.uat.apps.domain.com
*   application2.uat.apps.domain.com

**生产环境**

*   service1.services.domain.com
*   service2.services.domain.com
*   service3.services.domain.com
*   service4.services.domain.com
*   application1.apps.domain.com
*   application2.apps.domain.com

我们可能有更多的子域，并且一切都需要使用 SSL 保护。

我们已经多次改变了如何配置它的想法，但现在我们遇到了一个可能的限制。我们认为通配符 SSL 证书可能有效，但显然它们仅适用于单个级别的子域，即 *.services.domain.com。

由于预算原因，我们想注册一个通配符 SSL 证书并将其应用于多个服务器（属于多个 AD 域，以及我们 DMZ 中的一些服务器）。

今天早上我有了一个想法，但我对这件事的了解还不够，无法做出明确的决定。你们中是否有人预见到使用以下命名约定而不是上述命名约定的任何限制？

*   service1-uat-services.domain.com
*   service2-uat-services.domain.com
*   service3-uat-services.domain.com
*   service4-uat-services.domain.com
*   application1-uat-apps.domain.com
*   application2-uat-apps.domain.com

*   service1-services.domain.com

*   service2-services.domain.com
*   service3-services.domain.com
*   service4-services.domain.com
*   application1-apps.domain.com
*   application2-apps.domain.com

这样，我们可以为 *.domain.com 注册一个通配符，并为每个应用程序/服务使用一个单级子域，但仍然允许我们在逻辑上保持一切独立。使用此设置是否有任何人可以识别的任何技术问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:16:49.863

那应该没有什么问题。

# c - 为什么这段代码中 K 的值没有增加？

> ID：13192202
> 
> 赞同：0
> 
> 时间：2012-11-02T09:02:36.997
> 
> 标签：c

`#include<stdio.h>`

```
int main()

{
int i=-3, j=2, k=0, m;
m = ++i && ++j || ++k;
printf("%d, %d, %d, %d\n", i, j, k, m);
return 0;
} 
```

如果我使用 ||，k 的值会增加 运算符，但如果 && 值没有增加，那是什么原因，我很困惑。

输出为 -2,3,0,1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:06:00.707

您的代码中有一个测试：

```
m = ++i && ++j || ++k; 
```

当您像这样使用多个测试时，您将首先评估`++i && ++j`. 如果它是真的，你**永远不会**评估这个`|| ++k`部分（因为`m`无论如何都是真的）。这称为[**惰性求值**](http://en.wikipedia.org/wiki/Lazy_evaluation)。

如果`++i && ++j`在您的示例中为假，`k`则会增加，因为测试的最后一部分将被评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:04:23.583

它被称为惰性评估。无论 b 是什么，假 && b 总是假的。

在您的情况下：
`m = ++i && ++j || ++k;`评估由于懒惰`m = true || ++k;`而导致不被评估。`++k`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T09:04:46.653

因为`++k`不评估为`++i && ++j`评估为真。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T09:54:44.233

如果“&&”的运算符不为零，则为真，则其余部分不使用。在c中，如果不为零，则为真。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T09:04:55.227

OR 条件是惰性求值的。

永远不会执行，因为条件的`++k`第一部分不正确。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-02T09:05:59.040

`||`当它之前的值评估为 true之后的表达式将不会被评估。

`(c=10)|| (y=20)`

在此示例中，`c=10`计算结果为`true`，因此`y=20`不会被计算。

# javascript - 如何嵌入 youtube 播放列表？

> ID：13192203
> 
> 赞同：0
> 
> 时间：2012-11-02T09:02:48.853
> 
> 标签：javascript, jquery, youtube-api, html5-video

我实现了一个网站，我想在其中嵌入一个 youtube 视频播放列表，我想像这样显示 - [http://www.youtube.com/user/icicibank/home](http://www.youtube.com/user/icicibank/home) - 使用 HTML5、javascript 和 youtube api。那么我应该如何像上面的例子那样实现 youtube 播放列表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:06:48.530

这似乎是一种定制设计，与嵌入的标准 YouTube 列表播放器不同。（如果你想看看标准嵌入的样子，[这篇博](http://apiblog.youtube.com/2012/03/new-player-options-for-lists-of-videos.html)文有一个例子。）

我认为这里没有人可以就如何复制别人的设计给你确切的说明。这确实超出了 Stack Overflow 的范围。

# javascript - jquery .scrollTo 在表中

> ID：13192213
> 
> 赞同：0
> 
> 时间：2012-11-02T09:03:32.717
> 
> 标签：javascript, jquery, html

我正在做一个项目，我必须在其中显示某些数据行。我为此目的使用表格。

这是[表格的演示](http://nitinkabra.com/table)

现在的问题是，每当我更改行的选择或滚动当前行时，它就会向上或向下隐藏。如何修复滚动以显示当前行？

如何实现 .scrollTo()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:48:28.043

您可以使用`scrollIntoView()`which 用于滚动元素以在页面中可见。它基于 DOM 元素工作。将`selectedRow`类添加到 selected`tr`并使用该 DOM 元素。

```
 $('table').find('tr.selectedRow')[0].scrollIntoView() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:28:49.313

试试这个，但我没有测试代码。

```
var pos_top = 0 ;

jQuery('tr').click(function(){

    var element_pos = jQuery(this).position();
    pos_top = element_pos.top;
});

jQuery('.change_but').click(function(){

    jQuery('tbody').scrollTop(pos_top);   
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T08:50:04.560

该功能不适用于 TR 元素（我不知道为什么），但适用于 TD。使用：
$('table').find('tr.selectedRow').find('TD').get(0).scrollIntoView();

# pyqt4 - 如何调整包含 QTableView 的小部件的大小？

> ID：13192216
> 
> 赞同：0
> 
> 时间：2012-11-02T09:03:52.233
> 
> 标签：pyqt4, qtableview

我在小部件内的布局本身中有一个 QTableView。如何在调用 tableView.resizeColumnsToContents() 后设置 Widget 大小以便具​​有相同大小的表格（并且不需要滚动条）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T19:20:57.167

如果我正确理解您想要的是将容器小部件的水平大小调整为表格*内容*的大小（不一定是表格大小）。以下方法适用于我的 20 行 3 列小表：

*   向表模型询问总列数（它应该由您的`columnCount`方法实现返回）
*   使用该方法向视图询问每列的宽度`columnWidth`并计算列的总宽度
*   最后调整容器小部件的大小，考虑到列的总宽度、表格垂直标题的宽度和自动滚动边距

所以代码看起来像：

```
my_table_view.resizeColumnsToContents()
w = 0
for c in range(my_table_model.columnCount()):
    w = w + my_table_view.columnWidth(c)
container_widget.resize(w + my_table_view.verticalHeader().width() + my_table_view.autoScrollMargin()*1.5, container_widget.size().height()) 
```

正如我所说，我假设您想要水平调整小部件的大小。

# mysql - Mysql 嵌套循环中的大多数外部表可见性

> ID：13192221
> 
> 赞同：0
> 
> 时间：2012-11-02T09:04:11.913
> 
> 标签：mysql, sql

假设我有 4 个表：
'users'（id，username），
'photos'（id，user_id，name），
'photos_comments'（id，photo_id，user_id，text），'photos_likes'（id，photo_id，user_id，测试）。

我想计算每个用户在他所有上传的照片中的所有评论和喜欢的总和。为此，我正在尝试构建一个查询：

```
SELECT users.*,
    (SELECT SUM(count) as rating FROM(
   SELECT COUNT(*) as count FROM photos_likes
     WHERE photos_likes.photo_id IN (SELECT photos.id FROM photos WHERE photos.user_id = users.id)
            UNION
   SELECT COUNT(*) as count FROM photos_comments
     WHERE photos_comments.photo_id IN (SELECT photos.id FROM photos WHERE photos.user_id = users.id)
 ) as total_rating) as rating FROM users 
```

它返回“WHERE 子句中的未知 users.id 列”错误。所以看起来它在大多数内部查询中看不到 users 表。我不明白为什么会发生这种情况，因为另一个类似的查询可以正常工作：

```
SELECT users.*,
    (SELECT COUNT(*) as count FROM photos_likes
  WHERE photos_likes.photo_id IN (SELECT photos.id FROM photos WHERE photos.user_id = users.id)) as likes_count,

   (SELECT COUNT(*) as count FROM photos_comments
     WHERE photos_comments.photo_id IN (SELECT photos.id FROM photos WHERE photos.user_id = users.id)) as comments_count FROM users 
```

在此查询中，它可以从大多数内部查询中的用户表行中获取 id。为什么它会这样工作？感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:50:08.000

查看[FROM 子句中的子查询](http://dev.mysql.com/doc/refman/5.5/en/from-clause-subqueries.html)：

> FROM 子句中的子查询不能是相关子查询，除非在 JOIN 操作的 ON 子句中使用。

在第二个示例中，您在`where`子句中使用子查询。这就是区别。

另请参见[相关子查询](http://dev.mysql.com/doc/refman/5.5/en/correlated-subqueries.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:09:27.980

```
select 
    photos.userid, 
    photos.photoid, 
    count(distinct commentid), 
    count(distinct likeid),
    count(distinct commentid) + count(distinct likeid) as total
from
    photos 
         left join photos_comments on photos.photoid=photos_comments.photoid
         left join photos_likes on photos.photoid=photos_likes.photoid
group by photos.userid, photos.photoid 
```

# paypal - 如何限制通过paypal账户付款？

> ID：13192223
> 
> 赞同：0
> 
> 时间：2012-11-02T09:04:12.643
> 
> 标签：paypal

我正在使用 AdaptivePayments API。

当我创建一个未指定发件人的新交易时，重定向到 PayPal 后，登录表单可以选择登录到您的 PayPal 帐户，或通过信用卡付款。

我要做的是“删除”信用卡付款方式，只允许拥有 PayPal 帐户的用户完成付款。

有什么办法可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:14:10.183

在网站付款首选项下的 PayPal 帐户配置文件中，您应该看到 PayPal 帐户可选选项。确保已禁用此功能，并且应该取消没有帐户的付款选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:50:01.010

我在 x.com 论坛上找到了解决方案 - 支付请求的关键指令是“fundingConstraint” - [https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPayAPI#id098QF000M7Q](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPayAPI#id098QF000M7Q) .

# objective-c - 如何检查 smtp 服务器（如 gmail.com / hotmail.fr）是否存在？

> ID：13192226
> 
> 赞同：-1
> 
> 时间：2012-11-02T09:04:21.053
> 
> 标签：objective-c, http, nsurlrequest, http-status-code-200

您好，我正在为 iOS 编写一个 Objective-c 程序，我只想通过 ping 或对其执行 HTTP 请求来检查 smtp 服务器（在 @ 之后）是否存在并返回状态（ 200 ）。

我现在正在做的是获取 UITextField.text，剪切它，获取 @ 之后的子字符串并执行此操作……但它不起作用……

```
 NSError *error = nil;
        NSURL *url = [NSURL URLWithString:@"gmail.com"];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];;
        NSURLResponse *response = nil;
        NSData *data=[[NSData alloc] initWithData:[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]];
        NSString* retVal = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        // you can use retVal , ignore if you don't need.
        NSInteger httpStatus = [((NSHTTPURLResponse *)response) statusCode];
        NSLog(@"responsecode: %d", httpStatus);
        // there will be various HTTP response code (status)
        // you might concern with 404
        if(httpStatus == 200)
        {
            NSLog(@"FEELIX CONTENT");
            // do your job
        }
        else
        {
            NSLog(@"FOCK!");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:07:32.407

如果您有域，则该域的邮件服务器由 MX DNS 记录指定。例如：

```
$ host -t MX gmail.com
gmail.com mail is handled by 5 gmail-smtp-in.l.google.com.
gmail.com mail is handled by 30 alt3.gmail-smtp-in.l.google.com.
gmail.com mail is handled by 10 alt1.gmail-smtp-in.l.google.com.
gmail.com mail is handled by 40 alt4.gmail-smtp-in.l.google.com.
gmail.com mail is handled by 20 alt2.gmail-smtp-in.l.google.com. 
```

该数字是优先级指示。要检查服务器，请检查您是否可以连接到该服务器的端口 25。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:11:56.533

我不确定你想在这里做什么。但也许你错过了一些东西：

@ 符号后面的部分不一定是 SMTP 服务器。SMTP 服务器是通过向 DNS 查询返回 SMTP 服务器的 MX 记录（邮件交换）来确定的。

在 Windows 上，您可以在命令行上执行以下操作：

```
nslookup -type=mx gmail.com 
```

获取 SMTP 服务器。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/MX_record 。](http://en.wikipedia.org/wiki/MX_record)

# android - 将 yahoo messenger 与 Android 应用程序集成

> ID：13192228
> 
> 赞同：3
> 
> 时间：2012-11-02T09:04:23.060
> 
> 标签：android, yahoo-api, yahoo-messenger

我上网寻找一些代码片段或一些帮助将 yahoo messenger 集成到 android 应用程序中。我找不到有用的东西。

请通过提供一些链接、教程或代码示例来帮助我，以便我可以集成 yahoo messenger。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:15:51.953

终于得到了 yahoo messenger 集成的解决方案我使用了 openymsg 一个库并使用下面的链接

[http://edwin.baculsoft.com/2011/11/creating-a-simple-yahoo-messenger-auto-response-with-java-and-openymsg-library/](http://edwin.baculsoft.com/2011/11/creating-a-simple-yahoo-messenger-auto-response-with-java-and-openymsg-library/)

更改了我在活动中的代码，如下所示就像一个魅力:)

```
public class SimpleYahoo extends Activity implements SessionListener{
/** Called when the activity is first created. */
private Logger logger = Logger.getAnonymousLogger();
        private Session session = new Session();
        Button sendButton;
        boolean isLoginsuccess;
        ListView resultTextView;
        EditText editText;
        Handler handler;
        ArrayList<String> replymessage;
        String reply;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            replymessage=new ArrayList<String>();
             try {
                session.login("yahooid", "password");
            } catch (AccountLockedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (LoginRefusedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (FailedLoginException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                session.addSessionListener(this);
            sendButton=(Button) findViewById(R.id.button);
            resultTextView=(ListView) findViewById(R.id.result);
            editText=(EditText) findViewById(R.id.input);
            sendButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    doLogin();
                }
            });
            handler=new Handler()
            {
                @Override
                public void handleMessage(Message msg) {
                    // TODO Auto-generated method stub
                    super.handleMessage(msg);
                    if(msg.what==0)
                    {
                        replymessage.add(reply);
                        setListAdapter();
                    }
                }
            };

        }

        private void doLogin() {
            try {
                // insert your yahoo id
                // as for this example, im using my yahoo ID "dombaganas"

                session.sendMessage("targetyahooid", editText.getText().toString());

            } catch (Exception e) {
                Log.e(e.getMessage(), e.getMessage());

            }
        }

        @Override
        public void dispatch(FireEvent fe) {
            // TODO Auto-generated method stub
             ServiceType type = fe.getType();
                SessionEvent sessionEvent = fe.getEvent();

                if (type == ServiceType.MESSAGE) {
                    try {
                        // log request message
                        reply=sessionEvent.getMessage();
                        Log.i("message","message from " + sessionEvent.getFrom() + " \nmessage " + sessionEvent.getMessage() );

                        // give an automatic response
                   // session.sendMessage(sessionEvent.getFrom(), "hi, you are sending " + sessionEvent.getMessage());
                   // session.
                    handler.sendEmptyMessage(0);
                    } catch (Exception e) {
                        Log.e(e.getMessage(), e.getMessage());
                    }
                }

        }
        public void setListAdapter()
        {
            ArrayAdapter<String> arrayAdapter=new ArrayAdapter<String>(this,R.layout.multi_line_list_item,replymessage);
            resultTextView.setAdapter(arrayAdapter);
            resultTextView.setSelection(replymessage.size()-1);

        } 
```

}

# boilerplatejs - 我们如何在boilerplate.js 中创建子模块

> ID：13192229
> 
> 赞同：0
> 
> 时间：2012-11-02T09:04:32.537
> 
> 标签：boilerplatejs

我有一个设计，

我有很多产品，然后每个产品都有很多子产品。

所以现在在第一个屏幕中，我想显示一个仪表板，它将显示我的所有产品。

单击**每个产品时，我想打开一个单独的视图，该视图**具有自己的左侧导航栏和详细视图。 *这些将是我的主要模块*

现在左侧菜单栏中的选项将成为我的子产品。现在单击任何子产品。我想更改我的详细视图。 *这些将是我的子模块*

如果您自己有，请分享一些示例

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:37:38.610

BoilerplateJS 支持嵌套上下文。更多信息可在[boilerplatejs.org](http://boilerplatejs.org/)的“产品模块”部分中找到。可以通过在创建嵌套上下文时将父上下文传递给子上下文来创建嵌套上下文。您可以为每个产品创建上下文。在这种情况下，您可以创建模块，这将是您的子产品。拥有这种类型的模块化结构将有助于您维护代码。

可以通过多种方式实现您的要求。

一种方法是按如下方式构建应用程序的 url：

```
www.myapp.com/index.html#productA/submodule1
www.myapp.com/index.html#productB/submodule1 
```

您可以将菜单实现为一个单独的模块，它将根据您的 URL 的第一部分（productA，productB）更改需要显示的菜单，并且您的子模块可以根据其余部分激活/停用URL 部分的。此方法允许您为页面添加书签，并在触发带有书签的链接时使其处于相同状态。

# java - 我想从语句 Android 中搜索带有空格的特定单词

> ID：13192231
> 
> 赞同：-1
> 
> 时间：2012-11-02T09:04:40.623
> 
> 标签：java, android

我想在通过触发 api 获得的列表中搜索。

我目前正在使用 indexof () 进行搜索，但如果我在单词后提供空格，则它正在搜索但列表未正确更新。

示例：我在列表 1 中有两条记录。Qtlist 和使用 2.android
如果我搜索“和”，那么它必须只显示 1。但它显示 1。和 2。两者。

我的功能

```
 private ArrayList<BusinessDetails> GetSearchAdapterData(String searchKeyword) {

            final ArrayList<BusinessDetails> listData = new ArrayList<BusinessDetails>();
            String searchWith = "";
            Log.i("BusinessArray  ", "size is "
                    + sitesList.getBusinessArray().size());

            list.clear();

            if (sitesList.getBusinessArray() != null
                    && sitesList.getBusinessArray().size() > 0) {

                for (int i = 0; i < sitesList.getBusinessArray().size(); i++) {
                    // String searchWith = "";
                    searchWith += sitesList.getBusinessArray().get(i).busName;
                    Log.i("businessName ", "Bus_Name is "
                            + sitesList.getBusinessArray().get(i).busName
                            + " startwith " + startsWith);

                    if (searchWith.toLowerCase().indexOf(searchKeyword.toLowerCase()) != -1) {
                        listData.add(sitesList.getBusinessArray().get(i));
                    }

                }
                Log.i("List data is inside loop call", "Listdata" + listData.size());
            } else {
                Log.i("sitesList.getBusinessArray() is zero", "size Zero");
            }

            return listData;
        } 
```

我对我的功能所做的更改是：

```
 private ArrayList<BusinessDetails> GetSearchAdapterData(String searchKeyword) {

            final ArrayList<BusinessDetails> listData = new ArrayList<BusinessDetails>();
            String searchWith = "";
            Log.i("BusinessArray  ", "size is "
                    + sitesList.getBusinessArray().size());

            if (sitesList.getBusinessArray() != null
                    && sitesList.getBusinessArray().size() > 0) {

                for (int i = 0; i < sitesList.getBusinessArray().size(); i++) {

                    searchWith += sitesList.getBusinessArray().get(i).busName;
                }

                for (int i = 0; i < sitesList.getBusinessArray().size(); i++) {
                    if (searchWith.matches(".*\\b" + searchKeyword + "\\b.*")) {
                        listData.add(sitesList.getBusinessArray().get(i));
                        Log.i("Match Word fromList", "" + listData.get(i).busName);
                    }
                }
                    Log.i("List data is inside loop call", "Listdata" + listData.size());
            } else {
                Log.i("sitesList.getBusinessArray() is zero", "size Zero");
            }

            return listData;
        } 
```

任何帮助将不胜感激，请...帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:25:39.513

如果我正确理解问题

```
sitesList.getBusinessArray().size() == 2  
sitesList.getBusinessArray().get(0).busName == "Qtlist and Uses"  
sitesList.getBusinessArray().get(1).busName == "android" 
```

的第一个值`searchWith`将是“Qtlist and Uses”，第二个值`searchWith`将是“Qtlist and Usesandroid”，因为您将 busName 附加到`searchWith`. 因此，两者都匹配 indexof 测试是正确的。

省略“+”并使用是否足够

```
searchWith = sitesList.getBusinessArray().get(i).busName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:03:13.547

您可以使用字符串匹配方法和 reg ex 来匹配整个单词。以下是您可以用于解决问题的小示例。

```
String[] ss={"Qtlist and Uses","android"};

        for(String s:ss){
            System.out.println("s is "+s+"  and it matches with "+s.matches(".*\\band\\b.*"));
        } 
```

以下是程序的输出：

```
s is Qtlist and Uses  and it matches with true
s is android  and it matches with false 
```

这里`\b`已经使用了mark这个词的边界。希望它能解决你的问题。

编辑1：尝试替换以下代码：

```
if (searchWith.toLowerCase().indexOf(searchKeyword.toLowerCase()) != -1) {
                        listData.add(sitesList.getBusinessArray().get(i));
                    } 
```

和

```
if (sitesList.getBusinessArray().get(i).busName.matches(".*\\band\\b.*")){
     listData.add(sitesList.getBusinessArray().get(i));
} 
```

可以使用以下正则表达式匹配任何单词

```
".*\\banyword\\b.*" 
```

# php - PHP 循环列出服务器中的文件夹

> ID：13192237
> 
> 赞同：0
> 
> 时间：2012-11-02T09:05:04.587
> 
> 标签：php, list, loops, smarty

我正在“随时随地”学习 PHP，因为我正在为一个我必须在工作中做的网站编辑模板，我有点迷路了。原始代码如下所示：

```
<!-- start of top menubar -->
<table border="0" cellpadding="0" cellspacing="0" width="{$web_var_main_width}" align="center">
<tr style="background-color:#{$web_var_top_tabs_background};">
{php}
    global $lang;
    $this->assign('web_var_top_folder', $this->get_template_vars('web_var_top_folder_'.$lang));
{/php}
<td align="right" style="{if $web_var_top_tabs_image ne "" and $web_var_top_tabs_image ne 0}background:url(http://{$lang}.{$website_name}/{$RSwebPath}utilities/getScaledPicture.php?imageID={$web_var_top_tabs_image}&w={$web_var_top_tabs_image_x}&h={$web_var_top_tabs_image_y}&adj=d) top left repeat-y;{/if}background-color:#{$web_var_top_tabs_background_right};">
{if $folders_structure|@count gt 0}
{if $web_var_top_folder gt 0}
{section name=findtop loop=$folders_structure}
{if $folders_structure[findtop].key eq $web_var_top_folder}{assign var="top_menu" value=$folders_structure[findtop].childs}{/if}
{/section}
{if $top_menu|@count gt 0}
<table border="0" cellpadding="0" cellspacing="0" align="right">
<tr>
{if $web_var_top_font_size eq "small"}
    {assign var="web_var_top_font_size" value="10px"}
{elseif $web_var_top_font_size eq "medium"}
    {assign var="web_var_top_font_size" value="12px"}
{elseif $web_var_top_font_size eq "large"}
    {assign var="web_var_top_font_size" value="14px"}
{elseif $web_var_top_font_size eq "extra large"}
    {assign var="web_var_top_font_size" value="16px"}
{/if} 
{section name=mytopsec loop=$top_menu}
    <td width="5"></td>
{strip}
{if $top_menu[mytopsec].key eq $folders_selected[1]}
    {assign var="topsel" value="1"}
    <td bgcolor="#{$web_var_top_selected_tabs_color}" style="padding:6px 30px"><span style="font-family:{$web_var_top_font_family}; color:#{$web_var_top_font_color}; font-size:{$web_var_top_font_size}; font-weight:{$web_var_top_font_weight}; font-style:{$web_var_top_font_style}; text-decoration:none">{$top_menu[mytopsec].name}</span></td>
{else}
    <td bgcolor="#{$web_var_top_tabs_color}" onMouseOver="this.style.backgroundColor='#{$web_var_top_tabs_hover}'; style.cursor='pointer'; style.cursor='hand'" onMouseOut="this.style.backgroundColor='#{$web_var_top_tabs_color}'" style="padding:6px 30px"><a href="index.php?folderID={$top_menu[mytopsec].key}" style=" font-family:{$web_var_top_font_family}; color:#{$web_var_top_font_color}; font-size:{$web_var_top_font_size}; font-weight:{$web_var_top_font_weight}; font-style:{$web_var_top_font_style}; text-decoration:none">{$top_menu[mytopsec].name}</a></td>
{/if}
{/strip}
{/section}
</tr>
</table>
{/if}
{/if}
{/if}
</td>
</tr>
<!-- end of top menubar --> 
```

我必须发送一个文件夹 ID，这是代码扫描到并显示其所有子项的文件夹 ID。

扫描文件夹并将它们列为菜单项的功能是这个：

```
<?
include_once "folderFunctions.php";

global $lang;

$global_deep=0;

$this->assign("folder_structure",getFolderChilds(0,$_SESSION["rs_domain_id"],$lang,"WEB",0,$global_deep));
$this->assign("folder_deep",$global_deep);
?> 
```

它使用来自 folderFunctions.php 的函数 GetFolderChilds：

```
function getFolderChilds($identification,$website,$lang,$type,$local_deep,&$global_deep){
    $child_list=array();

    $childs = @mysql_query("SELECT `HB_IDENTIFICATION`,`HB_TITLE`,`HB_DESCRIPTION`,`HB_IMAGE_IDENTIFICATION`,`HB_LINK` FROM `hb_folders` WHERE `HB_PARENT_IDENTIFICATION` = ".$identification." AND `HB_DELETED`=0 AND `HB_PUBLISHED`=1 AND HB_WEBSITE_ID=".$website.(($type=='image')?(''):(" AND HB_LANGUAGE_ID='".$lang."'"))." AND HB_TYPE='".$type."' ORDER BY HB_ORDER");

    $local_deep++;
    if($local_deep>$global_deep&&@mysql_num_rows($childs)>0) $global_deep=$local_deep;

    while($child = @mysql_fetch_assoc($childs)){
        //$auxPermissions=getPermissions($_SESSION["rs_user_login"],$_SESSION["rs_user_pass"],$website,$child['HB_IDENTIFICATION'],'FOLDER');
        //if($auxPermissions['read']==1){
            $child_list[]=array("key"=>$child['HB_IDENTIFICATION'], "name"=>$child['HB_TITLE'], "desc"=>$child['HB_DESCRIPTION'], "image"=>$child['HB_IMAGE_IDENTIFICATION'], "link"=>$child['HB_LINK'], "childs"=>getFolderChilds($child['HB_IDENTIFICATION'],$website,$lang,$type,$local_deep,$global_deep));
        //}
    }

    return $child_list;
} 
```

它的输出是这样的（当鼠标在它上面时选项卡会改变颜色，等等）：

![实际代码结果](../Images/678f306460e97e981b0972b195108ad9.png)

嗯，这就是我直到现在才想到的。

问题是我想用这些 PHP 函数做一个菜单，也就是说，在服务器中创建文件夹并循环扫描并在我的菜单中显示它们。

问题是，该代码使用表格，并且有很多我不需要的东西，例如图像选项卡等（我只想有一个没有图像的文本菜单）。

我的问题是，我怎样才能实现获取文件夹并将它们列出的功能不是在表格中，而是在列表中，所以输出与此类似（我想尽可能简单以了解什么正在任何时候完成）？

```
<header>

       <ul class="navigation0">

            <li><a href="#" class="active">start</a></li>
            <li><a href="#">about us</a></li>
            <li><a href="#">contact</a></li>

    </ul> 
</header> 
```

这表明：

![预期结果](../Images/92c99091bb73f7d33141638a459cfe31.png)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:41:24.210

我相信我已经解决了它：

```
{php}
    global $lang;
    $this->assign('web_var_top_left_folder', $this->get_template_vars('web_var_top_left_folder_'.$lang));
{/php}

{if $folders_structure_left|@count gt 0}
{if $web_var_top_left_folder gt 0}
{section name=findtopleft loop=$folders_structure_left}
{if $folders_structure_left[findtopleft].key eq $web_var_top_left_folder}{assign var="top_left_menu" value=$folders_structure_left[findtopleft].childs}{/if}
{/section}
{if $top_left_menu|@count gt 0}

{if $web_var_top_font_size eq "small"}
    {assign var="web_var_top_font_size" value="10px"}
{elseif $web_var_top_font_size eq "medium"}
    {assign var="web_var_top_font_size" value="12px"}
{elseif $web_var_top_font_size eq "large"}
    {assign var="web_var_top_font_size" value="14px"}
{elseif $web_var_top_font_size eq "extra large"}
    {assign var="web_var_top_font_size" value="16px"}
{/if} 

<ul class"leftmenu">
{section name=mytopsecleft loop=$top_left_menu}
{strip}
    {if $top_left_menu[mytopsecleft].key eq $folders_selected[1]}
    {assign var="topselleft" value="1"}
    <li><span style="font-family:{$web_var_top_font_family}; color:#{$web_var_top_font_color}; font-size:{$web_var_top_font_size}; font-weight:{$web_var_top_font_weight}; font-style:{$web_var_top_font_style}; text-decoration:none">{$top_left_menu[mytopsecleft].name}</span></li>
{else}
    <li onMouseOver="style.cursor='pointer'; style.cursor='hand'><a href="index.php?folderID={$top_left_menu[mytopsecleft].key}" style=" font-family:{$web_var_top_font_family}; color:#{$web_var_top_font_color}; font-size:{$web_var_top_font_size}; font-weight:{$web_var_top_font_weight}; font-style:{$web_var_top_font_style}; text-decoration:none">{$top_left_menu[mytopsecleft].name}</a></li>
{/if}
{/strip}
{/section}
</ul>

{/if}
{/if}
{/if} 
```

# javascript - 谷歌网站。JS与电子表格的连接

> ID：13192245
> 
> 赞同：1
> 
> 时间：2012-11-02T09:05:32.050
> 
> 标签：javascript, google-sites

使用 Google 站点，如何使用用户名和密码连接到另一个用户电子表格，就像通常使用 mysql 一样？

我尝试了以下方法，但没有奏效：

```
var opts = {dataType:'json',username:'xxxxx',password:'xxxxxx'};
var query = new google.visualization.Query(urlTable, opts); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:02:37.050

是的，我需要连接到一个电子表格，所有者是其他用户（电子表格在其他帐户中），来自我在此线程的第一篇文章中发布的前两行代码 JS

使用我拥有的用户名和密码

我看到这个[https://developers.google.com/gadgets/docs/oauth#examples](https://developers.google.com/gadgets/docs/oauth#examples)但我不太明白

谢谢

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-02T11:22:13.327

站点中的错误是访问被拒绝，因为文档的所有者是其他 gmail 帐户...

# c# - 在单独的线程上时视图不会更新

> ID：13192247
> 
> 赞同：0
> 
> 时间：2012-11-02T09:05:33.773
> 
> 标签：c#, wpf, multithreading, dispatcher

我正在尝试在单独的线程中加载一些数据，然后将加载的数据添加到 ObservableCollection 并通过 ba 绑定更新视图。

首先，我正在执行以下操作：

```
public OverviewViewModel()
{
    Thread thread = new Thread(new ThreadStart(delegate
    {
        TheTVDB theTvdb = new TheTVDB();
        foreach (TVSeries tvSeries in theTvdb.SearchSeries("Dexter"))
        {
            this.Overview.Add(tvSeries);
        }
    }));
    thread.SetApartmentState(ApartmentState.STA);
    thread.Start();
} 
```

这给出了以下错误：

> 这种类型的 CollectionView 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。

所以我在这个论坛上读到我应该使用 Dispatcher，所以我`this.Overview.Add(tvSeries)`打电话给 Dispatcher。

```
Dispatcher.CurrentDispatcher.BeginInvoke((Action)delegate
{
    this.Overview.Add(tvSeries);
},
DispatcherPriority.Normal); 
```

现在，它不再崩溃，但视图没有更新。什么都没有发生，视图只是空的。我已经通过在主线程上运行它来测试功能。然后正确更新视图。

有谁知道为什么视图没有更新以及如何解决这个问题？

**更新**

以下方法似乎有效，并且似乎异步执行所有操作。谁能确认这是异步做事的正确方法？

```
Dispatcher.CurrentDispatcher.BeginInvoke(new Action(delegate
{
    TheTVDB theTvdb = new TheTVDB();
    foreach (TVSeries tvSeries in theTvdb.SearchSeries("Dexter"))
    {
        this.Overview.Add(tvSeries);
    }
}),
DispatcherPriority.Background); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:42:35.980

这是因为您需要告诉 WPF Dispatcher 来处理线程活动。

查看[这篇文章](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)了解更多核心细节，[这篇](http://weblogs.asp.net/pawanmishra/archive/2010/06/06/understanding-dispatcher-in-wpf.aspx)文章了解一些额外的例子。

阅读内容可能有点繁重，但如果您使用的是 WPF，那么非常值得了解 Dispatcher 的工作原理。

编辑：第二篇文章实际上明确提到了您的问题。

最后，不要忘记 ObservableCollection 只会为添加/删除操作触发 INPC 事件，而不是单个元素更改。为此，您需要在基础项目本身上实施 INPC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:11:57.640

我会选择线程安全的`ObservableCollection<T>`，这样您就不必每次都编组调用:)

查看 Sasha Barber 的实现：[ThreadSafeObservableCollection « Sacha 的博客](http://sachabarbs.wordpress.com/2009/01/31/threadsafeobservablecollectiont/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:21:31.733

还尝试将方法从 BeginInvoke 更改为 Invoke。

## 编辑

试试看：

```
this.Dispatcher.Invoke(new Action(()=>
{
    this.Overview.Add(tvSeries);
}); 
```

# scala - 可遍历 => Java 迭代器

> ID：13192249
> 
> 赞同：8
> 
> 时间：2012-11-02T09:05:46.037
> 
> 标签：scala, scala-collections, scala-java-interop

我有一个 Traversable，我想把它变成一个 Java 迭代器。我的问题是我希望一切都懒惰地完成。如果我在可遍历对象上执行 .toIterator，它会急切地生成结果，将其复制到 List 中，然后返回 List 上的迭代器。

我确定我在这里遗漏了一些简单的东西......

这是一个小测试用例，说明了我的意思：

```
class Test extends Traversable[String] {
      def foreach[U](f : (String) => U) {
         f("1")
         f("2")
         f("3")
         throw new RuntimeException("Not lazy!")
     }
}

val a = new Test
val iter = a.toIterator 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:39:24.277

您不能从可遍历对象中懒惰地获取迭代器的原因是您本质上不能。Traversable 定义了`foreach`, 并且`foreach`不间断地遍历所有内容。那里没有懒惰。

所以你有两个选择，都很糟糕，让它变得懒惰。

首先，您可以每次都遍历整个内容。（我打算使用 Scala 迭代器，但 Java 迭代器基本相同。）

```
class Terrible[A](t: Traversable[A]) extends Iterator[A] {
  private var i = 0
  def hasNext = i < t.size   // This could be O(n)!
  def next: A = {
    val a = t.slice(i,i+1).head  // Also could be O(n)!
    i += 1
    a
  }
} 
```

如果你碰巧有高效的索引切片，这没问题。如果不是，每个“下一个”将花费迭代器长度的线性`O(n^2)`时间，用于遍历它的时间。但这也不*一定*是懒惰的；如果您坚持必须是您必须`O(n^2)`在所有情况下强制执行并执行

```
class Terrible[A](t: Traversable[A]) extends Iterator[A] {
  private var i = 0
  def hasNext: Boolean = {
    var j = 0
    t.foreach { a =>
      j += 1
      if (j>i) return true
    }
    false
  }
  def next: A = { 
    var j = 0
    t.foreach{ a => 
      j += 1
      if (j>i) { i += 1; return a }
    }
    throw new NoSuchElementException("Terribly empty")
  }
} 
```

对于通用代码来说，这显然是一个糟糕的主意。

另一种方法是使用线程并阻止 foreach 的遍历。没错，您必须对每个元素访问进行线程间通信！让我们看看它是如何工作的——我将在这里使用 Java 线程，因为 Scala 正在转换到 Akka 风格的演员（尽管任何旧演员或 Akka 演员或 Scalaz 演员或 Lift 演员或（等）将起作用）

```
class Horrible[A](t: Traversable[A]) extends Iterator[A] {
  private val item = new java.util.concurrent.SynchronousQueue[Option[A]]()
  private class Loader extends Thread {
    override def run() { t.foreach{ a => item.put(Some(a)) }; item.put(None) }
  }
  private val loader = new Loader
  loader.start
  private var got: Option[A] = null
  def hasNext: Boolean = {
    if (got==null) { got = item.poll; hasNext }
    else got.isDefined
  }
  def next = {
    if (got==null) got = item.poll
    val ans = got.get
    got = null
    ans
  }
} 
```

这避免了`O(n^2)`灾难，但会占用一个线程并且逐个元素的访问速度极慢。我在我的机器上每秒获得大约 200 万次访问，而典型的可遍历则超过 100M。对于通用代码来说，这显然是一个可怕的想法。

所以你有它。一般来说，Traversable 并不懒惰，没有什么好的方法可以让它变得懒惰而不极大地影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:59:01.643

我之前遇到过[这个问题](https://issues.scala-lang.org/browse/SI-3958#comment-51475)，据我所知，没有人对让你更容易获得`Iterator`当你定义的所有内容是`foreach`.

但正如您所指出的，`toStream`这是问题所在，因此您可以覆盖它：

```
class Test extends Traversable[String] {
  def foreach[U](f: (String) => U) {
    f("1")
    f("2")
    f("3")
    throw new RuntimeException("Not lazy!")
  }
  override def toStream: Stream[String] = {
    "1" #::
    "2" #::
    "3" #::
    Stream[String](throw new RuntimeException("Not lazy!"))
  }
} 
```

另一种选择是定义 an`Iterable`而不是 a `Traversable`，然后您将`iterator`直接获得该方法。您能否再解释一下您`Traversable`在实际用例中所做的事情？

# actionscript-3 - 从库中获取对象的宽度 (AS3)

> ID：13192256
> 
> 赞同：0
> 
> 时间：2012-11-02T09:06:13.017
> 
> 标签：actionscript-3, object, actionscript

如何在 Actionscript 3 中获取库中的宽度和高度对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:16:15.277

要在运行时获取库资源的宽度和高度，您需要创建它的一个实例，将其添加到舞台，然后查询`getRect()`或查询`getBounds()`创建的实例。如果您现在不需要该实例，只需将其从阶段中删除。

```
var temp:DisplayObject=new YourLibraryAsset();
stage.addChild(temp); 
var r:Rectangle=temp.getRect(stage);
stage.removeChild(temp); 
```

如果当前班级无权访问舞台，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:24:10.243

要在运行时获取库资源的宽度和高度，您需要创建它的一个实例，并获取宽度/高度。（无需添加到舞台）

```
import flash.display.MovieClip;

var symbol:MovieClip = new Symbol1();
trace(symbol.width, symbol.height); 
```

# ruby-on-rails - 在 Ruby on Rails 中重构 group_by 的切换块语句

> ID：13192265
> 
> 赞同：4
> 
> 时间：2012-11-02T09:07:03.533
> 
> 标签：ruby-on-rails, ruby

如何重写此代码，使其完全动态，并且我不必使用该`case`子句手动列出 的所有可能值`@group`？

```
# Grouping
@group = params[:group] if !params[:group].blank?
case @group
  when 'category_id'
    @ideas_grouped = @ideas.group_by { |i| i.category_id }
  when 'status_id'
    @ideas_grouped = @ideas.group_by { |i| i.status_id }
  when 'personal_bias'
    @ideas_grouped = @ideas.group_by { |i| i.personal_bias }
  when 'business_value'
    @ideas_grouped = @ideas.group_by { |i| i.business_value }
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:19:19.617

您可以使用某种元编程 上面的代码可以通过一种方式进行重构

```
if params[:group].present? && ["category_id","status_id","personal_bias","business_value"].include?(params[:group])
    @ideas_grouped = @ideas.group_by { |i| i.send(params[:group]) }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:24:53.407

试试这个：

```
@ideas_grouped = @ideas.group_by { |i| i.send(:"#{@group}")} if (@group = params[:group]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T09:54:28.823

如果您不需要白名单：

```
@ideas_grouped = if (group = params[:group]).present?
  @ideas.group_by(&group.to_sym)
end 
```

如果您需要白名单，您可以`include?`先致电（请参阅 Amar 的回答），但要添加新内容，让我用声明性方法推动它（`Object#whitelist`留给读者作为练习，`maybe`来自[Ick](http://ick.rubyforge.org/)）：

```
@ideas_grouped = params[:group].whitelist(IdeaGroupers).maybe do |group|
  @ideas.group_by(&group.to_sym)
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-07T23:39:27.160

关于什么 ：

```
@group = params[:group] if !params[:group].blank?
@ideas_grouped = ideas_hash.fetch(@group)

def ideas_hash
  {
    'category_id'     => ideas_by_category_id,
    'status_id'       => ideas_by_status_id,
    'personal_bias'   => ideas_by_personal_bias
    'business_value'  => ideas_by_business_value
  }
end

def ideas_by_category_id
  @ideas.group_by { |i| i.category_id }
end

def ideas_by_status_id
  @ideas.group_by { |i| i.status_id }
end

def ideas_by_personal_bias
  @ideas.group_by { |i| i.personal_bias }
end

def ideas_by_business_value
  @ideas.group_by { |i| i.business_value }
end 
```

我还将ideas_hash 和所有其他方法设为私有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:55:41.560

好的，我上次接触 Ruby 的时间太久远了，所以我不能给你举个例子。据我了解您的问题，您正在那里进行映射（组-> 访问器方法）。因此，要么使用映射对象，要么使用 lambda 构建映射函数。

# android - 在android中为按钮设置字体，抛出异常应用程序已停止

> ID：13192268
> 
> 赞同：1
> 
> 时间：2012-11-02T09:07:19.307
> 
> 标签：android, android-widget

我想在我的应用程序中为我的小部件设置自定义字体。我为此使用了以下代码：

```
Context context = getBaseContext();
Typeface font = Typeface.createFromAsset(context.getAssets(), "fonts/tahoma.ttf");
Button bt = (Button)findViewById(R.id.txt_username);
bt.setTypeface(font); 
```

但是当我运行我的程序时，模拟器显示“**不幸的是，firstTest 已停止**”。

# python - 睡眠程序直到按键

> ID：13192270
> 
> 赞同：1
> 
> 时间：2012-11-02T09:07:23.380
> 
> 标签：python, sleep, interrupt, key-bindings, hotkeys

我有以下代码

```
#!/usr/bin/python
import keybinder

def Mark(args):
    print "Why, hello!"

keybinder.bind("<Super>m", Mark, "junk")
KEYBINDER.MAIN_LOOP_KEYPRESS() 
```

换句话说，我想制作一个程序，它在后台静默休眠，直到在系统中的任何位置按下组合键。Keybinder 似乎是获得按键的好方法，但我不确定如何执行最后一行暗示的睡眠部分。似乎导入一个像 GTk 这样的大型框架对于这个应用程序来说太过分了，我宁愿避免一个繁忙的循环。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:57:52.270

也许只是：

```
while not key_pressed:
    time.sleep(0.2) 
```

# jsf - 仪表板primefaces：如何在仪表板的列之间添加一条线？

> ID：13192271
> 
> 赞同：0
> 
> 时间：2012-11-02T09:07:29.390
> 
> 标签：jsf, primefaces, dashboard

如何在展示中的仪表板中的列之间添加一条线：http: [//www.primefaces.org/showcase/ui/dashboard.jsf](http://www.primefaces.org/showcase/ui/dashboard.jsf)

![在此处输入图像描述](../Images/b7221a6c42e99ee8b373f166fbc4fcf4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T19:42:18.043

使用 css 为 ui-dashboard-column 类添加边框样式，例如

```
.ui-dashboard-column
{
border-style:solid;
border-width:5px;
...
} 
```

风格根据您的需要

# java - PhoneGap：在Android上通过Java在页面加载时将JS注入HTML

> ID：13192272
> 
> 赞同：2
> 
> 时间：2012-11-02T09:07:30.967
> 
> 标签：java, javascript, android, cordova

当应用程序通过 Java 完成加载时，我喜欢将 js 代码注入 html。实际上，我有一些我不希望任何人在提取应用程序 apk 时看到的代码，并且当特定的 js 嵌入到 Java 代码中时，提取起来会有点困难。我知道apk的完整java代码可以被反编译，但这会让事情变得不那么困难。有人可以帮忙吗？

我正在为 Android 使用 PhoneGap/Cordova 2.1.0。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:08:41.507

一些解决方案：

1.  编写插件，在 cordova.ready 回调中调用你的代码
2.  扩展 droidgap 并调用`super.loadUrl("javascript:window.alert()");`

我建议第一个。

# python - 如何使用 python 使用 hadoop 处理 apache 日志文件

> ID：13192283
> 
> 赞同：-1
> 
> 时间：2012-11-02T09:08:27.720
> 
> 标签：python, apache, hadoop, hadoop-streaming, log-files

我是hadoop的新手，无法很好地理解这个概念，我遵循了以下过程

1.  [通过查看此处](http://hadoop.apache.org/docs/r0.15.2/quickstart.html)安装了 Hadoop

2.  [通过查看此处](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)和 python 中的 worcount 示例来尝试教程中的基本示例，并与它们一起正常工作。

实际上我正在尝试做的/我得到的要求是`/var/log/httpd`使用以下格式的 python 处理位于 hadoop的 fedora(linux) 中的 apache 日志文件

```
IP address    Count of IP   Pages accessed by IP address 
```

我知道apache日志文件有两种

1.  访问日志

2.  错误日志

但我真的无法理解 apache 日志文件的格式。

我的 apache 日志文件内容如下所示

```
::1 - - [29/Oct/2012:15:20:15 +0530] "GET /phpMyAdmin/ HTTP/1.1" 200 6961 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.77 Safari/537.1"
::1 - - [29/Oct/2012:15:20:16 +0530] "GET /phpMyAdmin/js/cross_framing_protection.js?ts=1336063073 HTTP/1.1" 200 331 "http://localhost/phpMyAdmin/" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.77 Safari/537.1"
::1 - - [29/Oct/2012:15:20:16 +0530] "GET /phpMyAdmin/js/jquery/jquery-1.6.2.js?ts=1336063073 HTTP/1.1" 200 92285 "http://localhost/phpMyAdmin/" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.77 Safari/537.1" 
```

谁能解释一下上面/apache日志文件的结构

我对如何使用数据 IP 地址、IP 地址计数、IP 地址访问的页面处理日志文件感到困惑

谁能让我知道我们如何使用 python 和上述信息使用 haddop 处理 apache 日志文件，并以上述格式存储结果

也可以请任何人提供python中的基本代码来处理上述格式的apache日志文件，以便我实时了解如何使用python代码处理文件并根据需要扩展它们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:12:40.320

这只是部分答案，但我希望您会发现它有用，如果您需要更具体的内容，请使用您的代码和您遇到的具体问题更新您的问题。

**文件处理的东西**

[Python 文档](http://docs.python.org/2/tutorial/inputoutput.html)很好地解释了文件处理。

如果您想实时监控日志文件（我认为这就是您的问题的意思...），请[在此处查看此问题](https://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python)。它还与监视日志文件有关。我不太喜欢接受的答案，但有很多不错的建议。

**线处理东西**

一旦您设法从日志文件中获取单独的行，那么您将需要处理它们。它们只是字符串，所以只要您知道格式就很简单。我再次参考[python 文档](http://docs.python.org/2/library/time.html)。如果您想做任何激烈的事情，您可能需要检查一下。

现在给出你给我们的行的格式：

**编辑**给定日志行的实际格式，我们现在可以取得进展......

因此，如果您从日志文件中获取一行：

```
line = '::1 - - [29/Oct/2012:15:20:15 +0530] "GET /phpMyAdmin/ HTTP/1.1" 200 6961 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.77 Safari/537.1"' 
```

第一步是将其分成不同的部分。我利用了日期和时间被“[...]”包围的事实

```
lElements = line.split('[')
lElements = lElements[0] + lElements[1].split(']') 
```

这给我们留下了：

```
lElements[0] = '::1 - - ' #IPv6 localhost = ::1
lElements[1] = '29/Oct/2012:15:20:15 +0530'
lElements[2] = ' "GET /phpMyAdmin/ HTTP/1.1" 200 6961 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.77 Safari/537.1"' 
```

日期元素[可以转换成更友好的格式](http://docs.python.org/2/library/time.html)

'url' 元素包含有关实际请求的内容（HTTP 动词、HTTP 版本、一个神秘数字和一堆用户代理内容）。

**编辑**添加代码以获取 url 和 ip 地址。忽略时间的东西

```
ip_address = lElements[0].split('-')[0] # I'm just throwing away those dashes. are they important?
http_info = lElements[2].split('"')[1] # = 'GET /phpMyAdmin/ HTTP/1.1'
url = http_info.split()[1]  # = '/phpMyAdmin/'

"""
so now we have the ip address and the url. the next bit of code updates a dictionary dAccessCount as the number of url accesses increases...
dAccessCount should be set to {} initially
"""

if ip_address in dAccessCount:
    if url in dAccessCount[ip_address]:
        dAccessCount[ip_address][url]+=1
    else:
        dAccessCount[ip_address][url]=1
else:
    dAccessCount[ip_address] = {url:1} 
```

所以dAccessCount的key是访问过任意url的所有ip地址，dAccessCount[some_ip_address]的key是该ip_address访问过的所有url，最后：dAccessCount[some_ip_address][some_url] =次数some_url 是从 some_ip_address 访问的。

# javascript - preventDefault() 无法正常工作

> ID：13192284
> 
> 赞同：0
> 
> 时间：2012-11-02T09:08:31.333
> 
> 标签：javascript, events

```
<script>
function confirmDel(evt)
{var con =false;
    con=confirm('Do you really want to remove this purchase?.');
    if(con)
    {
        return true;
    }else
    {
        event.preventDefault();
    }
}
</script> 
```

我的 html

```
 <a title="View Log" onclick="return confirmDel(this);" href="index.php?mod=tech_support">delete</a> 
```

上面的代码在 chrome 浏览器中运行良好，但在 Mozilla 中失败。但是当我使用`return false`而不是`event.preventDefault();`它时，两者都可以正常工作。谁能解释为什么会这样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:17:44.657

问题出在`event.preventDefault()`. 你传递的事件是`evt`，不是`event`。你必须使用：

```
evt.preventDefault(); 
```

`event.preventDefault()`在 Chrome 中工作，因为它模仿旧的 IE 行为以实现向后兼容性（就像它也有`innerText`）。

在旧 IE 中，事件对象是`window.event`. 所以调用`event.preventDefault()`调用全局事件对象，它适用于 Chrome 和 IE，但不是 Firefox，它没有实现这种非标准行为。

# c# - 通用 - 编译器警告 CS0693 或错误

> ID：13192295
> 
> 赞同：0
> 
> 时间：2012-11-02T09:09:20.757
> 
> 标签：c#, generics, compiler-errors, warnings

我有我的通用类和两个接受委托作为参数的方法（无论是否通用）

```
public sealed class MyClass<TResult>
{
   public MyClass ContinueWith(ThreadInfo.Parameterized arg)
   {
   }

   public MyClass<TResult> ContinueWith<TResult>(ThreadInfo<TResult>.Parameterized arg)
   {
   }
} 
```

在哪里：

```
public sealed class MyClass
{
} 
```

我有[编译器警告（level3）CS0693](http://msdn.microsoft.com/en-us/library/0ah54ze5%28v=vs.80%29.aspx)，但如果我`<TResult>`从第二种方法中删除：

```
public MyClass<TResult> ContinueWith(ThreadInfo<TResult>.Parameterized arg) 
```

我不能再使用这种方法了，如果我尝试我得到一个编译器错误，因为编译器认为我想使用第一种方法。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:10:49.443

听起来你*真的*想要：

```
public MyClass<TResult> ContinueWith(ThreadInfo<TResult>.Parameterized arg) 
```

换句话说，使用在*类型*级别`TResult`声明的参数。

 *如果你真的想让它成为一个泛型方法（即引入一个新的类型参数）你必须给它一个不同的名字：

```
public MyClass<T2> ContinueWith<T2>(ThreadInfo<T2>.Parameterized arg) 
```

（您可能希望在此处*返回*a`MyClass<TResult>`或类似的东西 - 我们真的不知道您想要实现什么，这使得很难提供详细的帮助。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:19:05.670

您必须使用不同的参数名称。所以这取决于你想要实现什么。

我认为你需要这样的东西，其中返回类型是类型`MyClass<TResult>`，你可以选择类型`ThreadInfo<>`：

```
public MyClass<TResult> ContinueWith<T1>(ThreadInfo<T1>.Parameterized arg)
{
   //...
} 
```

或者，如果您只想在创建对象实例时选择类型：

```
public MyClass<TResult> ContinueWith(ThreadInfo<TResult>.Parameterized arg)
{
   //...
} 
```*

# matlab - 将数据从 .cnv 文件导入 matlab

> ID：13192302
> 
> 赞同：0
> 
> 时间：2012-11-02T09:09:45.467
> 
> 标签：matlab, import

我正在尝试从 .cnv 文件中读取一些数据。我可以打开文件：

```
TopFolder = 'Name_of_my_file';
SubFolder = dir(fullfile(TopFolder,'*.cnv'));
fid = fopen(fullfile(TopFolder,SubFolder{i})); 
```

所有数据都位于字符串 END 之后，该字符串位于与其他标题不同的行上。我想导入存储在此字符串后面的行中的数据。如何做到这一点？

例如.cnv文件的a部分如下：

```
# datcnv_in = D:\data\110606_000.hex D:\instrument software\Seabird 2010-07\Seabird Con Files\SBE19_2108_ScufaTOBS.con
# datcnv_skipover = 0
# file_type = ascii
*END*
     -0.051     0.0312    15.4328   138.1551     0.0000     0.0000     0.0000     0.0000  0.000e+00
     -0.033     0.0305    15.4277   138.1551     0.0000     0.0000     0.0000     0.0000  0.000e+00 
```

所以，我想在*End之前避免这些行*

也许第一步是找到 END 的行号？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:50:29.887

首先打开文件并搜索行，直到找到' *END* '

```
fid = fopen('yourfile.cnv')     % open file to read
fseek(fid,0,-1);                % set read position to beginning of file
while strcmp(fgetl(fid),'*END*') == 0 end        % go through lines until '*END*' 
```

接下来逐行读取数据到矩阵 ( `data`) 中：

```
n=1;                            
while 1
    tline = fgetl(fid)                 % read in line
    if ~ischar(tline), break, end       % if eof, break and finish
    data(:,n) = sscanf(tline,'%f')     % put numbers in a matrix (in columns)
    n=n+1
end

fclose(fid)    % close file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:15:33.890

在 matlab 中使用导入向导时，您可以指定标题行数。如果将其设置为 4，它应该在此示例中有效。

使用导入向导后，如果您希望将来自动化该过程，您可以让它生成代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:27:45.510

试试这个：

```
L = '';
while isempty(findstr(L,'*END*'))  % if the line doesn't contain *END* => read a new line
    L = fgetl(fid);                % read next line of file
end
a = fscanf(fid,'%g %g %g %g');     % add as many %g as columns in your data
fclose(fid); 
```

我已经添加了一些关于它是如何工作的评论。基本上，这会逐行读取打开的文件，直到找到包含`*END*`.

`strcmp(L,'*END*')`如果有超过 1 行可能包含相同的字符，则可以使用。

警告：此代码假定您正在阅读的文件至少包含一行具有`*END*`字符的行，否则，当您尝试读取超出 EOF 时会出现错误。

希望这可以帮助。

# path - 在 Red5 中自定义流播放路径以访问共享机器中的文件

> ID：13192303
> 
> 赞同：0
> 
> 时间：2012-11-02T09:09:46.197
> 
> 标签：path, customization, directory, red5

我已经安装了 Red5 服务器。我创建了一个与 oflaDemo 相同的自定义应用程序。我可以在我的应用程序的 /streams 文件夹中播放视频，我的应用程序名称是 demo。我想将我的应用程序从中访问视频的目录 RED5_HOME/demo/webapps/streams 更改为共享机器中的文件夹。我可以切换到本地机器中的目录，例如“c:\streams”。我已经使用实现 IStreamFilenameGenerator 的 CustomFileNameGenerator 实现了这一点。但我无法访问共享文件夹。这是我的 CustomFileNameGenerator 类

```
 import java.io.File;

   import org.apache.log4j.Logger;
   import org.red5.server.api.scope.IScope;
   import org.red5.server.api.stream.IStreamFilenameGenerator;

   public class CustomFilenameGenerator implements IStreamFilenameGenerator {

   Logger log = Logger.getLogger(CustomFilenameGenerator.class);

   /** Path that will store recorded videos. */
   /public String recordPath = "recordedStreams/";/
   /** Path that contains VOD streams. */
   public String playbackPath;

   /** Set if the path is absolute or relative */
   public Boolean resolvesAbsolutePath;

   public String generateFilename(IScope scope, String name, GenerationType type) {
   // Generate filename without an extension.
   return generateFilename(scope, name, null, type);

   }
   public String generateFilename(IScope scope, String name, String extension,               GenerationType type) {
   String filename = null;
   if (type == GenerationType.PLAYBACK)
   {
   filename = playbackPath + name;
   }
   log.info("file Name " + filename);
   if (extension != null)
   // Add extension
   filename += extension;
   log.info("Extension and file name " + filename);

   return filename;
   }
   public boolean resolvesToAbsolutePath()
   {

   log.info("resolvesAbsolutePath" + resolvesAbsolutePath);
   return resolvesAbsolutePath;
   }
   public void setPlaybackPath(String playbackPath) {
   this.playbackPath = playbackPath;
   }
   public void setResolvesAbsolutePath(Boolean resolvesAbsolutePath) {
   this.resolvesAbsolutePath = resolvesAbsolutePath;
   }

   } 
```

以下是我的 red5-web.properties 文件中的属性：

```
 webapp.contextPath=/demo
   webapp.virtualHosts=*, 192.168.1.20, 192.168.1.20:8088, 127.0.0.1:8088,       192.168.1.20:1935

   playbackPath=C://streams/
   resolvesAbsolutePath=true 
```

以下是我的 red5-web.xml 文件中的 bean 定义

```
 <bean id="streamFilenameGenerator" class="com.abhinow.demo.CustomFilenameGenerator" >

   <property name="playbackPath" value="${playbackPath}" />
   <property name="resolvesAbsolutePath" value="${resolvesAbsolutePath}" />
   </bean> 
```

上面给出的代码工作正常，我可以在 C:\streams 文件夹中播放视频，但是当我将播放路径更改为 /192.168.1.20/streams 之类的共享文件夹时，它不起作用。我正在使用windows电脑。我还尝试使用 Windows 中的映射网络驱动器功能将共享文件夹 /192.168.1.20/streams 映射到网络驱动器，并将该驱动器命名为 Z:。然后我尝试给出路径 Z://streams 现在它也不起作用。任何人都请帮助我在哪里弄错了。我已经为此苦苦挣扎了两天。请帮我解决这个问题。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:34:23.933

如果你调试过

```
generateFilename 
```

在你的应用程序中被调用过吗？首先可能是在代码中添加一些 log.debug 语句并查看 red5.log（或 std.out）。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:36:19.627

尝试：

> public String generateFilename(IScope scope, String name, String extension, GenerationType type) { ...
> 
> 返回播放路径+文件名；
> 
> }

# javascript - JS - 难以使用正则表达式允许空格

> ID：13192309
> 
> 赞同：1
> 
> 时间：2012-11-02T09:10:24.707
> 
> 标签：javascript, regex

我在使用正则表达式允许 js 中的空格时遇到问题。我不确定它是什么，但我一直在寻找并且无法找到有效的答案。

我对正则表达式真的很陌生，所以请不要对这么简单的事情一无所知。

这是我目前允许的字符： `var validChar = /^[A-Z0-9]+$/i;` 如果我在其中添加空格，它将不起作用：`/^[A-Z 0-9]+$/i`

我必须做什么才能让它识别空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:14:22.523

正则表达式中的空格字符定义为“ **\s** ”：

```
/^[A-Z0-9\s]+$/i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:15:25.010

最后添加空格，像这样 `var validChar = /^[A-Z0-9\s]+$/i;`

# javascript - Chrome 中的子窗口全尺寸

> ID：13192313
> 
> 赞同：4
> 
> 时间：2012-11-02T09:10:33.463
> 
> 标签：javascript, google-chrome, childwindow

我需要在 Chrome 浏览器中打开一个全尺寸的子窗口，以下代码在 Firefox 16.0.2 和 IE 9 中运行良好，但在 Google Chrome 22 中运行良好。我错过了什么？

```
window.open(href,"_blank","scrollbars=1,fullscreen=yes,status=no,toolbar=no,menubar=no,location=no"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:37:38.847

该`fullscreen`选项仅受 IE 支持；你很“幸运”，FF现在似乎接受了，但谷歌浏览器不支持这个功能......

您只能在弹出窗口上强制宽度和高度

[http://www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# java - Apns：连接被远程主机关闭

> ID：13192314
> 
> 赞同：1
> 
> 时间：2012-11-02T09:10:40.143
> 
> 标签：java, apple-push-notifications

我有一个 Java 应用程序，它与 Apple Push Notification Server (APNS) 一起使用。我使用 lib: **JavaPNS.jar**向 iDevices 发送推送消息。但是，有时推送通知不起作用，我发现了这样的错误：

> [16:35:40] Andrew Balakhanov：2012-10-27 04:00:00,616 WARN [com.notnoop.apns.internal.ApnsConnectionImpl] 无法发送消息 com.notnoop.apns.EnhancedApnsNotification@af310b99 ......再试一次java.net.SocketException：com.sun.net.ssl.internal.ssl.AppOutputStream.write 的 com.sun.net.ssl.internal.ssl.SSLSocketImpl.checkWrite(SSLSocketImpl.java:1339) 的远程主机关闭了连接(AppOutputStream.java:44) 在 java.io.OutputStream.write(OutputStream.java:58) 在 com.notnoop.apns.internal.ApnsConnectionImpl.sendMessage(ApnsConnectionImpl.java:161) 在 com.notnoop.apns.internal。 ApnsServiceImpl.push(ApnsServiceImpl.java:46) 在 com.notnoop.apns.internal.AbstractApnsService.push(AbstractApnsService.java:52) 在 com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:36) 在 com .clinics.core.api.util.APN。sendReminderAlert(APN.java:55) 在 com.clinics.core.api.services.schedule.reminder.impl.ReminderSenderMobile.prepareAndSend(ReminderSenderMobile.java:190) 在 com.clinics.core.api.services.schedule.reminder。 impl.ReminderSenderMobile.send(ReminderSenderMobile.java:132) 在 com.clinics.core.api.services.schedule.reminder.AbstractReminderFacade.generateAndSendReports(AbstractReminderFacade.java:53) 在 com.clinics.core.api.services.schedule。在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl. java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.springframework.util.MethodInvoker。在 org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86) 在 org.springframework.scheduling.quartz.QuartzJobBean.execute(QuartzJobBean.java:86) 在 org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:264) 调用(MethodInvoker.java:273) .quartz.core.JobRunShell.run(JobRunShell.java:202) 在 org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525)

你能告诉我，错误是什么意思吗？是不是意味着，Apple 服务器禁止了我，是否意味着我向它发送了太多请求？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T15:50:57.487

此错误的最可能原因是您将生产令牌发送到沙盒服务器或将沙盒令牌发送到生产服务器。

我今天得到了这种确切的行为，直到我发现我已经使用 Ad Hoc 配置文件签署了我的应用程序，这使得应用程序使用生产推送服务器生成令牌，而我的服务器正在与沙盒推送服务器通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T13:36:50.440

当有效负载太长时，也可能出现此错误。

您可以通过调用`PayloadBuilder`'s`isTooLong()`函数进行检查。

```
PayloadBuilder payload = APNS.newPayload();

// build your payload               

if (payload.isTooLong())
{
    // your payload is too long, a push() will result in the above exception
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-27T14:58:44.167

我面临的问题是我用来生成`.p12`证书文件的说明不正确。我最终遵循了[NWPusher](https://github.com/noodlewerk/NWPusher)的指示，这些指示对我有用。

# php - Facebook 应用用户报告错误的 ssl 但我们无法复制

> ID：13192321
> 
> 赞同：2
> 
> 时间：2012-11-02T09:11:15.630
> 
> 标签：php, facebook, ssl

我们为竞赛条目创建了一个 Facebook 应用程序，以符合 Facebook 的条款和条件。它已经运行了几个月，没有任何问题，但只有少量条目。

我们最近增加了奖项，并且看到参赛作品的数量增加了 900% 以上。只有当您喜欢我们公司的页面时，该应用程序才会继续运行，但突然间我们收到有人说他们喜欢该页面但无法继续的报告。最简单的解决方案是暂时删除该代码。

这似乎解决了大多数人的问题，但有人报告说他们的浏览器报告说由于自签名 ssl 内容不安全。安装的 SSL 是 alpha ssl，当我们连接它时，它就是我们收到的证书。我们的主机是一个 plesk 平行面板，这个人正在接收标准的自签名证书，但我们无法复制。

我想知道的是是否存在证书冲突或浏览器缓存它们或解决此问题的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:17:56.457

没有浏览器会出现告诉您证书是我所知道的“自签名”证书。首先使用如下工具确认您的 SSL 设置正确：

[http://www.sslshopper.com/ssl-checker.html](http://www.sslshopper.com/ssl-checker.html)

只要一切都过去了，听起来您所描述的就是在您的安全页面上呈现不安全的内容。不同的浏览器对此有不同的处理。例如，在 Chrome 中，您只需在地址栏左侧看到一个警告图标，但是上次我检查 IE8/9 时会弹出错误消息，然后让您继续加载页面的其余部分。

例如在您的页面上：

[https://www.example.com/](https://www.example.com/)

您将来自 Google 的 CDN 的 jquery 包含在以下标签中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

某些浏览器中的用户会收到我描述的错误消息。如果您将路径更改为 https:// 或完全删除该方案并仅使用 //ajax.google ..... 你会没事的。

# jenkins - 如何更改詹金斯的主目录？

> ID：13192322
> 
> 赞同：25
> 
> 时间：2012-11-02T09:11:18.443
> 
> 标签：jenkins, continuous-integration, home-directory

简单问题：如何更改 jenkins 主目录位置？默认情况下它指向`/var/lib/jenkins`而我希望它指向`/home/jenkins`. 我已更改`$JENKINS_HOME`为，`/home/jenkins`但对我没有帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-09-01T00:03:37.880

对于我在 RHEL 7.2 上的 Jenkins 2.7.2 上已经启动 jenkins 并配置构建后，我需要：

1）更改jenkins用户的主目录

```
sudo su -
service jenkins stop
vi /etc/passwd
#  change the /var/lib/jenkins to /home/jenkins or whatever 
```

2）更改启动脚本中的设置以也找到它

```
vi /etc/sysconfig/jenkins
#   change the JENKINS_HOME to /home/jenkins or what ever 
```

3）将所有数据复制到新位置（例如：/home/jenkins）

```
cd /home
cp -Rf /var/lib/jenkins .
chown -R jenkins:jenkins * 
```

4）启动它备份

```
service jenkins start 
```

这似乎对我来说已经完成了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-24T19:12:17.080

要更改 Jenkins 主目录，您只需设置“JENKINS_HOME”环境变量以指向新位置。您还可以将 JENKINS_HOME 设置为系统属性或 JNDI 环境条目，如文档中所述。

[詹金斯文档](https://wiki.jenkins-ci.org/display/JENKINS/Administering+Jenkins)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T12:49:18.370

Jenkins 通常与自己的用户一起运行，
因此更改该用户的主目录应该可以完成这项工作。

如果不确定，只需使用 shell 命令（如“id”或“whoami”或“env”）运行测试作业，即可找到 Jenkins 使用的用户。

另外，请注意“ `Started by user anonymous`”消息并不意味着 Jenkins 以匿名用户身份开始 -
请参阅[Sagar](https://stackoverflow.com/users/289812/sagar)和[Peter Tran](https://stackoverflow.com/users/783051/peter-tran)的相关答案：

**[如何以不同的用户身份运行詹金斯](https://stackoverflow.com/questions/6692330/how-to-run-jenkins-as-a-different-user)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-31T18:34:24.650

我正在使用 Ubuntu 服务器并使用 Jenkins 版本（2.277.4 +）。我能够通过以下方式更改 Jenkins 主目录：

1.  将 JENKINS_HOME 值更改`/etc/default/jenkins`为所需的文件夹名称。
2.  更新目标文件夹的权限，使`jenkins`用户对该文件夹具有读、写、执行权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-07T01:22:22.403

我尝试设置 PATH 的东西，但它似乎不起作用，因为它可能必须在没有真正的 unix 用户帐户的 Jenkins 用户下。我发现该变量也可以在 /etc/sysconfig/jenkins 中访问，这在我重新启动 Jenkins 时起到了作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-24T22:23:40.263

**[A]**找到你当前的 jenkins 主文件夹，如果你不知道它在哪里？
Jenkins -> 管理 Jenkins -> 配置系统 -> 检查标签“主目录”

**[B]**将当前 Jenkins 主文件夹移动到新目录。请按照以下步骤操作：-

1.  停止 Jenkins 服务 - 通过终止进程

2.  按照以下方法之一为 JENKINS 设置新的主文件夹。

    ```
    a) By default Jenkins home directory is set to ~/.jenkins
    b) "JENKINS_HOME" environment variable setup in operating system.
    c) "JENKINS_HOME" entry in JNDI environment.
    d) "JENKINS_HOME" system property to the servlet container.
            Tomcat context descriptor of the servlet, you can set below field in apache-tomcat-8.5.28/conf/context.xml :
            <Context ...>
              <Environment name="JENKINS_HOME" value="/path/to/jenkins_home/" type="java.lang.String"/>
            </Context>

    e)  If jenkins.war file is deployed in a tomcat server , then even appending below content in bin/catalina.sh will setup JENKINS_HOME.
                CATALINA_OPTS="-DJENKINS_HOME=/path_to/jenkins_home/" 
    ```

3.  手动将 Jenkins 主文件夹内容从旧主文件夹复制到新主文件夹。（在 windows 中， ctrl + c / v 。在 Unix 中，使用 cp 命令）。建议不要移动，而是复制步骤保留一份备份。稍后我们可以删除旧工作区。

4.  现在启动 Jenkins，然后它将从 JENKINS_HOME 变量中提到的路径中选择新的主目录。

    *注意： - 只需将上述变量“JENKINS_HOME”设置为不同的路径，不会自动将文件从当前 Jenkins 主路径复制到新路径。此复制步骤 - 您必须自己手动完成。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-22T06:52:06.747

遵循*步骤*：

*   `sudo su`
*   `service jenkins stop`
*   `nano /etc/default/jenkins`
*   将`JENKINS_HOME`变量更改为您想要的任何文件夹
*   保存
*   `service jenkins start*`

# java - 从 java 对象中添加和删除属性

> ID：13192324
> 
> 赞同：4
> 
> 时间：2012-11-02T09:11:34.007
> 
> 标签：java

我怎样才能在java中实现这一点。我有一个对象`properties`。

```
public class Object {

    private final Credentials Credentials;
    private final int PageSize;
    private final int PageStart;
    private final int DefaultFilterId;

    public Object(Credentials Credentials, int PageSize, int PageStart, 
int DefaultFilterId) {
            this.Credentials = Credentials;
            this.PageSize = PageSize;
            this.PageStart = PageStart;
            this.DefaultFilterId = DefaultFilterId;
       }

    } 
```

现在我正在形成一个这样的对象

```
Object obj = new Object(args); 
```

在某些时候我需要相同的对象，新`properties`添加但删除`some`。

我在javascript中做这样的事情。

```
var myCars=new Array();
myCars[0]="Saab";
myCars[1]="Volvo";
myCars[2]="BMW";

delete myCars[1]; or myCars.splice(1,1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:15:51.157

将对象的所有实例放入集合中，然后您可以将其从集合中删除。

```
List<YourObject> list = new ArrayList<YourObject>();
YourObject obj1 = new YourObject("abc");
list.add(obj1);
YourObject obj2 = new YourObject("xyz");
list.add(obj2); 
```

现在你的两个对象都在一个列表中。稍后您可以使用 remove 方法删除它们。

```
 list.remove(obj1); 
```

并且只是一个指针，将您的类命名`Object`为所有`extend`来自`java.lang.Object`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:14:36.230

你不能在java中做到这一点。最好的近似是使用 HashTable 或类似的。

```
Hashtable ht = new Hashtable();
ht.put("key", value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:15:29.790

您可以将 ArrayList 作为私有属性添加到您的班级。而不是构建允许您添加和删除条目的访问功能。你不能完全像在 JavaScript 中那样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T09:17:56.553

```
public class Object {

    private Credentials credentials;
    private int PageSize;
    private int PageStart;
    private int DefaultFilterId;

    public Object(Credentials credentials, int PageSize, int PageStart, int DefaultFilterId) {
        this.credentials = credentials;
        this.PageSize = PageSize;
        this.PageStart = PageStart;
        this.DefaultFilterId = DefaultFilterId;
    }

    // do that for the properties you want to be able to modify
    public void setCredentials(Credentials newCredentials) {
         this.credentials = newCredentials;
    }

} 
```

你使用它：

```
object.setCredentials(yourNewCredentials) 
```

此外，您不应该将您的对象命名为“Object”，它是 Java 中所有类的基类。

# mysql - 如何告诉 Hibernate 通过其外键指向的实体删除表行？

> ID：13192325
> 
> 赞同：1
> 
> 时间：2012-11-02T09:11:36.930
> 
> 标签：mysql, hibernate, jpa, foreign-keys, many-to-one

我的数据库中有三个表；一个 Author 表，它有一个 id 列，一个 Publisher 表，它有一个 id 列，一个 Book 表，它有一个 id 列，一个 authorId 外键列，到 Author id，一个 publisherId 外键列，到发布者 ID。更新/删除选项的外键都设置为“NO ACTION”，但据我了解，Hibernate 应该能够自己处理这些。

作者实体有一组书籍，其中包含出版商 ID，但不知道作者。我已将其设置如下：

```
@Entity
@Table(name="author")
public class Author {
    private Integer id;
    private Set<Book> books;

    @Id @GeneratedValue
    public Integer getId() {
        return id;
    }

    @OneToMany(fetch=FetchType.EAGER, cascade=CascadeType.ALL) {
    @JoinColumn(name="authorId")
    public Set<Book> getBooks() {
        return books;
    }

    public void setBooks(Set<Book> books) {
        this.books = books;
    }
}

@Entity
@Table(name="book") {
    private Integer id;
    private Integer publisherId;

    @Id @GeneratedValue
    public Integer getId() {
        return id;
    }

    @ManyToOne(FetchType.EAGER)
    @JoinColumn(name="publisherId")
    public Integer getPublisherId() {
        return publisherId;
    }

    public void setPublisherId(Integer publisherId) {
        this.publisherId = publisherId;
    }
} 
```

我的问题是，当我尝试从作者的书籍中删除一本书时，Hibernate 尝试将 authorId 外键更新为 null，并且我收到 Book 表中的 authorId 列不能为 null 的错误。我想要发生的是完全删除该行。

我还尝试将 'orphanRemoval=true' 添加到 OneToMany 注释，并设置更新/删除到 Cascade，但我得到了同样的错误。

我可以使用哪些注释来指示当从作者的书集中删除一本书时，我希望删除 Book 表中的该行？这是否可能与我如何建立我的关系，如果没有，有什么更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:29:07.877

数据库中的 AuthorId 列是否设置为 NOT NULL？可能是 Hibernate 将在两遍中删除该行。第一遍使外键引用为空，第二遍然后删除该行。我正在使用 NHibernate 并且肯定看到过类似的行为。如果是这种情况，那么您应该能够通过将 AuthorId 设置为 NULLable 来解决您的问题。

# java - 通用图像加载器：如何捕获浏览图像的 id？

> ID：13192326
> 
> 赞同：3
> 
> 时间：2012-11-02T09:11:52.680
> 
> 标签：java, android, universal-image-loader

我正在向 ImagePagerActivity 添加一个按钮以将图像设置为手机的背景。功能本身运行良好（如果我设置，我可以将应用程序的图标设置为 bg `R.drawable.icon`）。

问题是我完全不知道如何捕获图像 id，以便人们可以将他们当前正在浏览的图像设置为 bg。我尝试了很多东西，但没有任何效果。

例如，`R.id.image`发送“false”，`R.layout.item_pager_image`发送 XML 路径（好吧，这很正常，只是为了测试）等等......我真的不知道我可以用什么值来说“嘿，把这张图片我”我看着，作为我的新手机背景”。

`}`这是我在最后一个in之前使用的代码`ImagePagerActivity.java`。（是的壁纸代码已注释，我打印值进行调试）

谢谢你的帮助 ！

```
 public void onWallpaperClick(View view) {
        openMyDialog(null);
    }   

    public void openMyDialog(View view) {
        showDialog(10);
    }

    //@Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case 10:
            // Create our AlertDialog
            Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Définir cette photo comme fond d'écran de votre appareil ?")
                    .setCancelable(true)
                    .setPositiveButton("Oui",
                            new DialogInterface.OnClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // Ends the activity
                                    //HomeActivity.this.finish();
                                    WallpaperManager myWallpaperManager
                                    = WallpaperManager.getInstance(getApplicationContext());
                                   //try {
                                   //myWallpaperManager.setResource(R.id.image);
                                   //} catch (IOException e) {
                                   // e.printStackTrace();
                                  // }
                                    Toast.makeText(getApplicationContext(),
                                            R.drawable.icon,
                                            Toast.LENGTH_SHORT).show();

                                }
                            })
                    .setNegativeButton("Non",
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    Toast.makeText(getApplicationContext(),
                                            "Ok !",
                                            Toast.LENGTH_SHORT).show();
                                }
                            });

            return builder.create();
        }
        return super.onCreateDialog(id);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:18:01.717

如果这些方法与显示器的相同活动有关，您可以试试这个：

在 ImageLoadingListener::OnLoadingComplete(Bitmap bitmap) 方法上，您可以获得加载的位图，因此使用属性处理位图。

```
public class myActivity {
    Bitmap current_bitmap;
{...}
    imageLoader.displayImage(images[position], imageView, options,
        new ImageLoadingListener() {
            @Override
            public void onLoadingComplete(Bitmap loadedImage) {
                current_bitmap = loadedImage;
            }
            {...}
        }
} 
```

你可以让它与 WallpaperManager 一起使用

```
WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());
try {
  myWallpaperManager.setBitmap(current_bitmap);
} catch (IOException e) {
  e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:17:20.913

将图像可绘制 id 设置为其标记，在 xml 中使用 android:tag 或以编程方式使用 ImageView.setTag()，然后使用 ImageView.getTag() 方法获取它。

# php - PHP preg_match_all/preg_match

> ID：13192329
> 
> 赞同：2
> 
> 时间：2012-11-02T09:12:01.637
> 
> 标签：php, regex

我正在尝试为我们的防火墙创建一个报告功能。防火墙规则以 json 格式存储。

这是字符串的示例。

```
[{"id":1,"enabled":true,"description":"TEMP","matchers":{"javaClass":"java.util.LinkedList","list":[{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1.1.1.1","matcherType":"DST_ADDR"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"80","matcherType":"DST_PORT"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1,3,2","matcherType":"DST_INTF"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"2.2.2.2","matcherType":"SRC_ADDR"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1,2,wan","matcherType":"SRC_INTF"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"UDP,TCP,any","matcherType":"PROTOCOL"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"svrbjgu","matcherType":"DIRECTORY_CONNECTOR_USERNAME"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"intern-it","matcherType":"DIRECTORY_CONNECTOR_GROUP"}]},"ruleId":5001,"javaClass":"com.untangle.node.firewall.FirewallRule","block":false,"log":true}] 
```

我有 preg_match_all 过滤器：

```
 preg_match_all('/\"description":"(.*?)\","matchers"/',$str,$description);
preg_match_all('/\"id":(.*?)\,"/',$str,$id);
preg_match_all('/\"ruleId":(.*?)\,"/',$str,$rule_id);
preg_match_all('/\"enabled":(.*?)\,"description"/',$str,$enable);
preg_match_all('/\"block":(.*?)\,"/',$str,$block);
preg_match_all('/\"log":(.*?)\}/',$str,$log);
preg_match_all('/\"value":"(.*?)\","matcherType":"DST_ADDR"/',$str,$dest_add);
preg_match_all('/\"value":"(.*?)\","matcherType":"DST_PORT"/',$str,$dest_port);
preg_match_all('/\"value":"(.*?)\","matcherType":"DST_INTF"/',$str,$dest_int);
preg_match_all('/\"value":"(.*?)\,","matcherType":"SRC_ADDR"/',$str,$src_add);
preg_match_all('/\"value":"(.*?)\","matcherType":"SRC_INTF"/',$str,$src_int);
preg_match_all('/\"value":"(.*?)\","matcherType":"PROTOCOL"/',$str,$protocol);
preg_match_all('/\"value":"(.*?)\","matcherType":"DIRECTORY_CONNECTOR_USERNAME"/',$str,$user);
preg_match_all('/\"value":"(.*?)\","matcherType":"DIRECTORY_CONNECTOR_GROUP"/',$str,$group); 
```

发生的情况是每个匹配器的开始都是 VALUE":" 当我打印 $dest_port 我得到`"1.1.1.1","matcherType":"DST_ADDR"},`{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"80 ” 而不是只有 80 个。

任何有 preg_match_all 的人先找到 matchertype，然后将 backwords 读取到“value”：“？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:18:29.853

```
$xyz = <<<EOX
[{"id":1,"enabled":true,"description":"TEMP","matchers":{"javaClass":"java.util.LinkedList","list":[{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1.1.1.1","matcherType":"DST_ADDR"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"80","matcherType":"DST_PORT"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1,3,2","matcherType":"DST_INTF"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"2.2.2.2","matcherType":"SRC_ADDR"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1,2,wan","matcherType":"SRC_INTF"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"UDP,TCP,any","matcherType":"PROTOCOL"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"svrbjgu","matcherType":"DIRECTORY_CONNECTOR_USERNAME"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"intern-it","matcherType":"DIRECTORY_CONNECTOR_GROUP"}]},"ruleId":5001,"javaClass":"com.untangle.node.firewall.FirewallRule","block":false,"log":true}]
EOX;

var_dump(json_decode($xyz)); //execute other operations, iteration etc here 
```

这比正则表达式好得多。返回结构化数据，可以迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:14:16.600

最终与 json_decode 一起使用。

样本：

```
$jsondata ='[{"id":1,"enabled":true,"description":"TEMP","matchers":{"javaClass":"java.util.LinkedList","list":[{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1.1.1.1","matcherType":"DST_ADDR"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"80","matcherType":"DST_PORT"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1,3,2","matcherType":"DST_INTF"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"2.2.2.2","matcherType":"SRC_ADDR"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"1,2,wan","matcherType":"SRC_INTF"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"UDP,TCP,any","matcherType":"PROTOCOL"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"svrbjgu","matcherType":"DIRECTORY_CONNECTOR_USERNAME"},{"invert":false,"javaClass":"com.untangle.node.firewall.FirewallRuleMatcher","value":"intern-it","matcherType":"DIRECTORY_CONNECTOR_GROUP"}]},"ruleId":5001,"javaClass":"com.untangle.node.firewall.FirewallRule","block":false,"log":true}]';
$data = json_decode($jsondata,true);
echo '<table><tr><th WIDTH="10">Nr.</th><th WIDTH="10">RuleID</th><th WIDTH="150">Description</th><th WIDTH="100">Protocol</th><th WIDTH="75">Src Int</th><th WIDTH="150">Src Address</th><th WIDTH="100">Src Port</th><th WIDTH="75">Dest. Int</th><th WIDTH="150">Dest Address</th><th WIDTH="100">Dest. Port</th><th WIDTH="50">Action</th><th WIDTH="50">Log</th><th WIDTH="50">Enabled</th></tr>';
echo "<tr><td>test.</td><td> {$data[0]['ruleId']} </td><td>{$data[0]['description']}</td><td>{$data[0]['enabled']}</td></tr>" ; 
```

# php - 在提交时隐藏或清除 PHP 表单

> ID：13192336
> 
> 赞同：-2
> 
> 时间：2012-11-02T09:13:04.030
> 
> 标签：php, forms, submit, hide, captcha

我有一个 php 联系表单，它在验证等方面都能很好地工作，但我有一个小问题。我调整的原始代码将页面重定向到一个新页面，并在提交时收到一条我不满意的感谢消息，因此我设法在原始页面上显示了一条感谢消息，但是输入表单内容仍然存在，我宁愿它没有。更好的是，我希望能够完全隐藏表单并用谢谢替换它。

我应该提一下，完成后它会与其他项目一起放在一个页面上，所以它只是我隐藏或清除之后的表单。

这是标题中的代码

```
<?php 
$your_email ='email@example.com';

session_start();
$errors = '';
$name = '';
$company = '';
$visitor_email = '';
$phone = '';
$user_message = '';

if(isset($_POST['submit']))
{

$name = $_POST['name'];
$company = $_POST['company'];
$visitor_email = $_POST['email'];
$phone = $_POST['phone'];
$user_message = $_POST['message'];
///------------Do Validations-------------
if(empty($name)||empty($visitor_email))
{
    $errors .= "\n Name and Email are required fields. ";   
}
if(IsInjected($visitor_email))
{
    $errors .= "\n Bad email value!";
}
if(empty($_SESSION['6_letters_code'] ) ||
  strcasecmp($_SESSION['6_letters_code'], $_POST['6_letters_code']) != 0)
{
//Note: the captcha code is compared case insensitively.
//if you want case sensitive match, update the check above to
// strcmp()
    $errors .= "\n The captcha code does not match!";
}

if(empty($errors))
{
    //send the email
    $to = $your_email;
    $subject="New form submission";
    $from = $your_email;
    $ip = isset($_SERVER['REMOTE_ADDR']) ? $_SERVER['REMOTE_ADDR'] : '';

    $body = "A user  $name submitted the contact form:\n".
    "Name: $name\n".
    "Company: $company\n".

    "Email: $visitor_email \n".
    "Phone: $phone\n".

    "Message: \n ".
    "$user_message\n".
    "IP: $ip\n";    

    $headers = "From: $from \r\n";
    $headers .= "Reply-To: $visitor_email \r\n";

    mail($to, $subject, $body,$headers);

    //header('Location: #thanks');
    $myForm =  '< style="visibility: hidden;">';
    $thankyou = file_get_contents("thank-you.html"); 
}
}

// Function to validate against any email injection attempts
function IsInjected($str)
{
 $injections = array('(\n+)',
          '(\r+)',
          '(\t+)',
          '(%0A+)',
          '(%0D+)',
          '(%08+)',
          '(%09+)'
          );
  $inject = join('|', $injections);
  $inject = "/$inject/i";
if(preg_match($inject,$str))
{
return true;
}
else
{
return false;
}
}

?> 
```

这是表单本身减去一大块我认为与问题无关的javascript验证

```
<?php
if(!empty($errors)){
echo "<p class='err'>".nl2br($errors)."</p>";
}
?>
<div id="footer">
    <div class="twelve-column-wrapper">
        <div class="six-column-wrapper">
            <div class="six-column">
                <h3>Why not get in touch</h3>
            </div>
            <div id='contact_form_errorloc' class='err'></div>
            <form method="POST" name="contact_form" 
action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
                <div class="three-column">
                    <p>
                        <label for='name'>Name: </label>
                        <br>
                        <input type="text" name="name" value='<?php echo htmlentities($name) ?>'>
                    </p>
                </div>
                <div class="three-column">
                    <p>
                        <label for='company'>Your Company: </label>
                        <input type="text" name="company" id="company" value='<?php echo htmlentities($company) ?>'/>
                    </p>
                </div>
                <div class="three-column">
                    <p>
                        <label for='email'>Email: </label>
                        <br>
                        <input type="text" name="email" value='<?php echo htmlentities($visitor_email) ?>'>
                    </p>
                </div>
                <div class="three-column">
                    <p>
                        <label for='phone'>Phone No. </label>
                        <input type="text" name="phone" id="phone" value='<?php echo htmlentities($phone) ?>'/>
                    </p>
                </div>
                <div class="six-column">
                    <p>
                        <label for='message'>Message:</label>
                        <br>
                        <textarea name="message" rows=8 cols=30><?php echo htmlentities($user_message) ?></textarea>
                    </p>
                </div>
                <div class="three-column">
                    <p> <img src="captcha_code_file.php?rand=<?php echo rand(); ?>" id='captchaimg' ><br>
                        <label for='message'>Enter the code above here :</label>
                        <br>
                        <input id="6_letters_code" name="6_letters_code" type="text">
                        <br>
                        <small>Can't read the image? click <a href='javascript: refreshCaptcha();'>here</a> to refresh</small> </p>
                    <input id="submit"  type="submit" value="Submit" name='submit'>
                </div>
                <div class="six-column"> <?php echo $thankyou; ?> </div>
            </form>
        </div>
    </div>
</div> 
```

我尝试了一些通过搜索找到的方法，但主要是由于我对 PHP 的基本了解而失败了。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:17:29.347

```
<?php
if(!empty($errors)){
echo "<p class='err'>".nl2br($errors)."</p>";
}
?>
<div id="footer">
    <div class="twelve-column-wrapper">
        <div class="six-column-wrapper">
            <div class="six-column">
                <h3>Why not get in touch</h3>
            </div>
            <div id='contact_form_errorloc' class='err'></div>
<?php
if(!isset($_POST['submit'])):
?>
            <form method="POST" name="contact_form" 
action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
                <div class="three-column">
                    <p>
                        <label for='name'>Name: </label>
                        <br>
                        <input type="text" name="name" value='<?php echo htmlentities($name) ?>'>
                    </p>
                </div>
                <div class="three-column">
                    <p>
                        <label for='company'>Your Company: </label>
                        <input type="text" name="company" id="company" value='<?php echo htmlentities($company) ?>'/>
                    </p>
                </div>
                <div class="three-column">
                    <p>
                        <label for='email'>Email: </label>
                        <br>
                        <input type="text" name="email" value='<?php echo htmlentities($visitor_email) ?>'>
                    </p>
                </div>
                <div class="three-column">
                    <p>
                        <label for='phone'>Phone No. </label>
                        <input type="text" name="phone" id="phone" value='<?php echo htmlentities($phone) ?>'/>
                    </p>
                </div>
                <div class="six-column">
                    <p>
                        <label for='message'>Message:</label>
                        <br>
                        <textarea name="message" rows=8 cols=30><?php echo htmlentities($user_message) ?></textarea>
                    </p>
                </div>
                <div class="three-column">
                    <p> <img src="captcha_code_file.php?rand=<?php echo rand(); ?>" id='captchaimg' ><br>
                        <label for='message'>Enter the code above here :</label>
                        <br>
                        <input id="6_letters_code" name="6_letters_code" type="text">
                        <br>
                        <small>Can't read the image? click <a href='javascript: refreshCaptcha();'>here</a> to refresh</small> </p>
                    <input id="submit"  type="submit" value="Submit" name='submit'>
                </div>

            </form>
<?php
endif;
?>
            <div class="six-column"> <?php echo $thankyou; ?> </div>
        </div>
    </div>
</div> 
```

这将隐藏表单。但这不会阻止您收到垃圾邮件。例如，如果您不想被垃圾邮件发送到必须跟踪 IP，并且在提交电子邮件之前检查 IP 是否尚未发送电子邮件，比如说在最后 30 秒内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:17:43.027

```
if(empty($_POST)){
//You form goes here;
}
else{
echo $thankyou;
} 
```

你也可以有类似的东西：

```
if(empty($thankyou)){
//You form goes here;
}
else{
echo $thankyou;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:25:41.393

您最好创建单独的操作文件并用于显示感谢消息使用：

```
if(isset($_SESSION['msg'])){
echo $_SESSION['msg'];
}
else{
//display from here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:26:34.433

您可以在表单上触发此功能**onsubmit**或**onclick**事件

```
 <script>
    function hideform()
    {
    document.forms['contact_form'].style.visibility = 'hidden';
    }
    </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:29:46.080

您可以使用 jQuery 在成功提交时清除表单 div。

```
$('#myform').submit(function(){
    $('#formcontainer').empty;
}); 
```

其中 myform 和 form container 是表单的 id 和包含表单的 div

# joomla - Joomla 2.5 组件升级同时保持文件不变

> ID：13192337
> 
> 赞同：0
> 
> 时间：2012-11-02T09:13:05.580
> 
> 标签：joomla, components, upgrade

我编写了一个自定义的 joomla 2.5 组件，并将其部署在各个站点上，每个站点都在服务器上更改了自己的样式表。有没有办法可以继续升级组件（添加新功能等），但要确保特定的 css文件是不是没变？即保持与每个网站上的更新相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:16:06.747

考虑到您已将 xml 文件正确设置为方法升级 `<extension type="component" version="1.6.0" method="upgrade">`，只需跳过 `<folder>css</folder>`升级包中的选项即可。

```
 <files folder="site">
        <filename>index.html</filename>
        <filename>keywords_editor.php</filename>
        <filename>controller.php</filename>
        <filename>router.php</filename>
        <folder>views</folder>
        <folder>css</folder> // This should not be included in your case
        <folder>models</folder>
        <folder>controllers</folder>
        <folder>helpers</folder>
    </files> 
```

正如 Valentin 所提到的，如果您正在升级组件而不是全新安装，旧文件将保留在服务器上。

# android - 如何在 Android 中获取和解析 JSON 对象？

> ID：13192347
> 
> 赞同：-8
> 
> 时间：2012-11-02T09:14:17.473
> 
> 标签：android, json

> **可能重复：**
> [如何从 Java HTTPResponse 解析 JSON？](https://stackoverflow.com/questions/2845599/how-do-i-parse-json-from-a-java-httpresponse)
> [如何在Android中解析json字符串？](https://stackoverflow.com/questions/8091051/how-to-parse-json-string-in-android)

我如何解析这个 json 字符串

```
{
"apiVersion": "2.1",
"data": {
    "id": "pHuoDqcIyqk",
    "uploaded": "2012-10-29T16:08:15.000Z",
    "updated": "2012-11-02T08:48:28.000Z",
    "uploader": "googlenexus",
    "category": "Tech",
    "title": "Nexus: Ask Me Anything",
    "description": "The Best of Google, now in 3 sizes. Introducing Nexus 4, Nexus 7 and Nexus 10\. The new smartphone and tablets from Google. Shop now at play.google.com/nexus",
    "thumbnail": {
        "sqDefault": "http://i.ytimg.com/vi/pHuoDqcIyqk/default.jpg",
        "hqDefault": "http://i.ytimg.com/vi/pHuoDqcIyqk/hqdefault.jpg"
    },
    "player": {
        "default": "http://www.youtube.com/watch?v=pHuoDqcIyqk&feature=youtube_gdata_player",
        "mobile": "http://m.youtube.com/details?v=pHuoDqcIyqk"
    },
    "content": {
        "5": "http://www.youtube.com/v/pHuoDqcIyqk?version=3&f=videos&app=youtube_gdata",
        "1": "rtsp://v8.cache5.c.youtube.com/CiILENy73wIaGQmpyginDqh7pBMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp",
        "6": "rtsp://v7.cache4.c.youtube.com/CiILENy73wIaGQmpyginDqh7pBMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp"
    },
    "duration": 61,
    "aspectRatio": "widescreen",
    "rating": 4.8985643,
    "likeCount": "5227",
    "ratingCount": 5363,
    "viewCount": 1038854,
    "favoriteCount": 0,
    "commentCount": 1442,
    "accessControl": {
        "comment": "allowed",
        "commentVote": "allowed",
        "videoRespond": "moderated",
        "rate": "allowed",
        "embed": "allowed",
        "list": "allowed",
        "autoPlay": "allowed",
        "syndicate": "allowed"
    }
}
} 
```

谁能告诉我如何调用上面的 URL 并获取 JSON 对象，然后解析它以获取所需的信息作为字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:27:23.927

有几种方法可以做到这一点。一种简单的方法是定义一个与您的数据匹配的对象结构并使用[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)来填充它：

```
final URL url = new URL("http://yourURL.com");
final InputStream openStream = url.openStream();
final InputStreamReader inputStreamReader = new InputStreamReader(openStream);
final SearchResult searchResult = new Gson().fromJson(inputStreamReader, SearchResult.class); 
```

如果您的 searchResult 类包含一个字段，例如 apiVersion，它将填充来自 JSON 的数据。然后你有一个数据字段，里面有其他字段等。这是填充数据的一种非常简单的方法，但是你必须在你的对象模型中镜像 JSON 流的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:22:02.277

你问的问题太宽泛了..

1)在 URL 上执行[http get请求。](http://developer.android.com/reference/org/apache/http/client/methods/HttpGet.html)（或使用[此](https://stackoverflow.com/questions/1162260/how-to-work-with-an-image-using-url-in-android)方法）并获取响应字符串，即 JSON。[这里](https://stackoverflow.com/questions/10455831/http-get-request-in-android-2-3-3)有一些例子

2）请参阅[此](https://stackoverflow.com/questions/8294062/android-json-object)答案以了解如何解析 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:22:47.777

简单简单....

```
String str = "" // your JSON string
JSONObject json = new JSONObject(str);
String apiVersion = json.getString("apiVersion");
 // continue as before for the rest of it... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:23:12.597

你可以试试下面的方法。您可以传递 URL 并将响应作为**结果**字符串获取。公共静态字符串结果；

```
public static boolean connect(String url) {
        boolean flag = false;
        HttpClient httpclient = new DefaultHttpClient();

        // Prepare a request object
        HttpGet httppost = new HttpGet(url);
        Log.e("url", url);

        // Execute the request
        HttpResponse response;
        try {

            // https://api.vkontakte.ru/method/audio.search?uid=163398985&q=akoncount=100&access_token=2a4db0e223f0f5ab23f0f5ab5f23da5680223f023f1f5a3c696b018be9b17b9

            response = httpclient.execute(httppost);
            // Examine the response status
            Log.i("vkontake", response.getStatusLine().toString() + "\n"
                    + response);

            // Get hold of the response entity
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            // to worry about connection release

            if (entity != null) {

                // A Simple JSON Response Read
                InputStream instream = entity.getContent();
                Log.d("Jsomn Activity", "---- is --- " + instream);
                result = convertStreamToString(instream);
                Log.d("Jsomn Activity", "---- Result --- " + result);

                // now you have the string representation of the HTML request
                instream.close();

            } else {
                Log.d("Jsomn Activity", "---- is --- null ");
            }
            flag = true;
            net = false;
        } catch (Exception e) {
            Log.d("Jsomn Activity", "---- Catch --- " + e.toString());
            flag = false;
            e.printStackTrace();
        } finally {
            return flag;
        }

    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T09:18:21.650

JSON.org[站点](http://json.org/)包含不少于 20 种不同的 JSON 解析器 Java 实现。

# gcc - 英特尔汇编语法 OFFSET

> ID：13192353
> 
> 赞同：6
> 
> 时间：2012-11-02T09:14:58.287
> 
> 标签：gcc, assembly, x86, nasm, masm

现在我知道你可以将 gcc 用于 Intel 语法，而不是使用默认的 at&t

> gcc -S -masm=intel test.c

有这条线

> mov DWORD PTR [ebp-16], OFFSET FLAT:base

是一样的`mov dword[ebp-16], base`吗？否则我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T12:08:46.363

是的，`mov dword [ebp - 16], base`应该没问题。我已经有`offset flat:`一段时间没看到了——我认为它已经过时了，但这是 AT&T`.intel_syntax`过去所要求的想法（我必须查看 Gas 的源代码才能找到它）。`offset`与 Masm 或 Nasm 中未经修饰的变量名的含义相同。

# ide - 版本 11.1.2.2.0 中缺少 Jdeveloper 运行配置

> ID：13192354
> 
> 赞同：0
> 
> 时间：2012-11-02T09:15:00.270
> 
> 标签：ide, jdeveloper

只是想知道是否有其他人在使用 JDeveloper 11.1.2.2.0 和单击运行和调试按钮旁边的下拉菜单时出现的运行配置选项时遇到问题？

在以前的版本中，我总是有几个可用的选项 - 用于启动客户端/服务器/等。然而，在这个版本中，除非我点击进入不同的项目，然后点击回到我想要运行的项目，否则我并不总是得到下拉菜单。如果有人发现了一个更永久的解决方法，我很想听听。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:25:58.737

这也是我偶然发现的一个错误。您可以尝试的唯一其他事情是使用运行菜单并检查您是否在其中看到选项。

我个人使用你已经知道的技巧（切换项目）。

# java - Java - 将不同的对象发送到接口方法

> ID：13192356
> 
> 赞同：1
> 
> 时间：2012-11-02T09:15:15.137
> 
> 标签：java

当我发送这个时我有错误：

```
myClaass.put(new ImenResult(1).Show());
myClaass.put(new ImenResult(2)); 
```

我明白为什么我会遇到这个问题，因为我发送到具有接口参数的类。我的问题是：我必须添加到接口以发送此数据并且没有出错，因为此结构必须相同（不是我的决定），因为稍后我可以发送字符串或其他东西（类）。我知道这是一个非常困难的问题。

程序：

```
Class_1 myClaass = new Class_1();
myClaass.put(new ImenResult(1).Show());
myClaass.put(new ImenResult(2));
myClaass.put(new ImenResult(3)); 
```

Imen结果：

```
public class ImenResult implements IImenResult{

    public Integer i;

    public ImenResult(Integer  i ) {
        this.i = i;
    }

    @Override
    public Integer Show() {

        return i;
} 
```

Class_1

```
public class Class_1 implements IQRack{

    public List<IAdant> adan;

    public void put(IAdant value) {
        adan.add(value);
    }

    } 
```

伊丹

```
public interface IAdant  {

} 
```

感谢您的帮助，我告诉过您这是一个困难的问题（当然对于不是 Java 专家的人来说），但主题是固定的。我给你加分了。再次感谢您的帮助。[关闭]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:25:39.483

您应该实现该方法`put(Integer)`以`Class_1`使其正常工作

```
public class Class_1 implements IQRack {

    public List<IAdant> adan;

    public void put(IAdant value) {
        adan.add(value);
    }

    void put(Integer Show) {
        throw new UnsupportedOperationException("Not yet implemented");
    }
} 
```

**更新** 在您发表评论后，我认为这就是您要尝试做的事情：

```
public class Class_1 implements IQRack {

    private List<IAdant> adan = new ArrayList<IAdant>();

    public Class_1(IAdant i) {
        this.put(i);
    }

    void put(IAdant Show) {
        throw new UnsupportedOperationException("Not yet implemented");
    }
}

public class IAdant {

    Boolean bValue;
    String sValue;
    Integer iValue;

    public IAdant(Object o) {
        if (o.getClass().isInstance(new Integer(1))) {
            iValue = (Integer) o;
        } else if (o.getClass().isInstance(false)) {
            bValue = (Boolean) o;
        } else if (o.getClass().isInstance("")) {
            sValue = (String) o;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T09:19:49.947

行：`myClaass.put(new ImenResult(1).Show());`将失败，因为`myClaass.put()`期望获得一个实现的对象`IAdant`，但您正在发送 and `Integer`。`Integer`不执行`IAdant`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T09:22:41.420

```
myClaass.put(new ImenResult(1).Show());
myClaass.put(new ImenResult(2)); 
```

第一种情况是文件，因为您的 put 方法需要 IAdant（任何实现 IAdant 的方法），并且您正在传递一个整数，因为 show 方法将返回一个。

第二种情况会失败，原因与您的 ImenResult 类未实现或 IAdant 类型相同。

如果您希望第二种情况起作用，请在 ImenResult 类中实现 IAdant。

```
public class ImenResult implements IImenResult,IAdant{
//implement the methods from both the interfaces
} 
```

now`myClaass.put(new ImenResult(2));`行可以在没有任何编译器错误的情况下工作。

如果你想得到第一个案例 myClaass.put(new ImenResult(1).Show()); 要编译，您必须重载 myClass 类中的 put 方法。

```
public void put(int val) {
        //do your logic here
    } 
```

# php - 500 秒后对等方重置连接

> ID：13192363
> 
> 赞同：3
> 
> 时间：2012-11-02T09:15:32.157
> 
> 标签：php, cron

当我在 make 中运行导入 cronjob 时，我遇到了这个奇怪的问题。它处理一个 1.5GB 的 XML 文件，其中包含大约 400.000 个产品。该脚本运行良好，需要几个小时才能完成，但大约 500/600 秒后，我收到了来自 cron-deamon 的以下电子邮件。

> PHP 警告：file_get_contents(http://test.nl/admin/cron_index.php?route=module/EZImport&cron)：打开流失败：HTTP 请求失败！第 8 行 /home/test.nl/public_html/admin/controller/tool/EZImport_cron.php 中的 HTTP/1.1 500 内部服务器错误
> 
> 警告：file_get_contents(http://test.nl/admin/cron_index.php?route=module/EZImport&cron)：打开流失败：HTTP 请求失败！第 8 行 /home/test.nl/public_html/admin/controller/tool/EZImport_cron.php 中的 HTTP/1.1 500 内部服务器错误 bool(false)

我的 apache 错误日志说：

> [Fri Nov 02 09:43:39 2012] [warn] [client 176.9..174] (104) Connection reset by peer: mod_fcgid: 从 FastCGI 服务器读取数据时出错 [Fri Nov 02 09:43:39 2012] [error ] [client 176.9..174] 脚本头过早结束：cron_index.php

这是 cronjob 调用的 cron 文件

```
    require_once('../../config.php');
    $opts = 数组（'http' =>
        数组（'超时' => 36000）
    );
    $context = stream_context_create($opts);
    $url = HTTP_SERVER."cron_index.php?route=module/cronMod&cron";
    $result = file_get_contents($url, false, $context);
    var_dump($result);
    死（）;

```

我需要通过 file_get_contents 运行这个 cron

环境：

Debian, OpenCart

webmin (php config) 中的最大执行时间设置为 36000 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:28:51.547

> 处理一个 1.5GB 的 XML 文件

呃，这有点傻——你至少需要通过 2 次才能验证文档格式是否正确，并且有很多坏事发生的空间。

> webmin (php config) 中的最大执行时间设置为 36000 秒

到底是为了什么？

您还需要为 Web 服务器和客户端和服务器之间的链中的所有其他组件配置超时，但是尝试通过 HTTP 传输 1.5Gb 文件只是愚蠢的——你可能会让它工作——但这​​不是正确的方法解决这个问题。将其分解为更易于管理的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:19:13.423

尝试`set_time_limit(0)`在脚本中使用或更改 php.ini 中的时间限制

# ms-access - VBA 在后台创建 PDF

> ID：13192366
> 
> 赞同：1
> 
> 时间：2012-11-02T09:15:45.033
> 
> 标签：ms-access, pdf-generation, vba

我在 Access 中维护一个 VBA 应用程序，该程序的很大一部分是制作 PDF 和电子邮件。我已经编写了使用 PDF995 创建 PDF 的代码，但问题是它不断提示保存位置和一堆其他问题。是否有任何解决方案可以让我在后台创建 PDF 而无需提示用户任何内容？我知道它需要保存在哪里，我知道它将如何命名，所以这不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:20:25.553

您使用的是哪个 Access 版本？
在 Access 2007 及更高版本中，您可以开箱即用地创建 PDF 文件，而无需提示保存位置等内容。
下面是一个示例：
[以编程方式执行 Access 2007 报告并将该报告导出为 PDF？](https://stackoverflow.com/questions/3602864/execute-access-2007-report-and-export-that-report-to-pdf-programmatically)
请注意，在 Access 2007 中，您必须[安装加载项](http://www.microsoft.com/en-us/download/details.aspx?id=9943)才能使其正常工作！

对于 Access 2003 及更低版本，有[Steven Lebans 的 ReportToPDF](http://www.lebans.com/reporttopdf.htm)。

# php - 从 timezone_identifier -php 中检索语言环境

> ID：13192368
> 
> 赞同：3
> 
> 时间：2012-11-02T09:15:55.680
> 
> 标签：php, timezone, locale

有没有一种简单的方法可以从 中检索语言环境`timezone_identifier`？

例如：

```
date_default_timezone_set('Europe/Berlin'); 
```

在这种情况下，语言环境应该`de_DE`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:24:29.750

如前所述`deceze`，这是不可能的。但是您可以从时区获取位置信息。正如[php.net](http://www.php.net/manual/en/datetimezone.getlocation.php)所说

```
$tz = new DateTimeZone("Europe/Prague"); 
print_r($tz->getLocation());
print_r(timezone_location_get($tz)); 
```

将输出

```
Array
(
 [country_code] => CZ
 [latitude] => 50.08333
 [longitude] => 14.43333
 [comments] => 
)
Array
(
 [country_code] => CZ
 [latitude] => 50.08333
 [longitude] => 14.43333
 [comments] => 
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:18:27.170

不，因为不存在这样的 1:1 相关性。以比利时为例，他们在同一时区正式使用三种语言。

# python - 字典键不是串行的

> ID：13192373
> 
> 赞同：2
> 
> 时间：2012-11-02T09:16:48.807
> 
> 标签：python, django, list, dictionary

> **可能重复：**
> [如何按照插入的顺序从字典中检索项目？](https://stackoverflow.com/questions/60848/how-do-you-retrieve-items-from-a-dictionary-in-the-order-that-theyre-inserted)

我对 django 视图和模板有疑问

在获得与会议相关的详细信息后，例如

```
 for meeting in get_meetings:
           if meeting.venue_id ==None:
                 mee_data = {} 
                 mee_data['id'] = meeting.id
                 getdate = meeting.meeting_datetime
                 mee_data['date'] = getdate.strftime("%Y-%m-%d")
                 mee_data['end_time'] = meeting.end_time
                 mee_data['meeting_duration'] = meeting.meeting_duration 
                 mee_data['start_time'] = meeting.start_time 
                 mee_data['meetingID'] = meeting.meetingID
                 mee_data['id'] = meeting.id
                 mee_data['start_time'] = meeting.start_time 

                 mee_data['name'] = meeting.name

                 getall.append(mee_data) 
```

getall 是我在上面声明的列表

现在在附加字典数据之后。

我期待我的模板中的结果就像

```
[{"id": "REG_431103567", "date": "", "end_time": "", "meeting_duration": "", "start_time": "2012-10-29", "meetingID": 192dnjd, "name": "TEsts"},...] 
```

基本上是键的顺序，但不幸的是结果就像 .

```
[{"meetingID": "REG_431103567", "start_time": "", "meeting_duration": "", "end_time": "", "date": "2012-10-29", "id": 192, "name": "TEsts"},...] 
```

请建议我在这里应该做什么，以便我能够以正确的方式获取密钥及其相应的值。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:18:14.387

I'd suggest use an [`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict) to get the data in the order it was inserted.

Dictionaries don't maintain the order but an [`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict) which is a sub-class 0f `dict` can maintain the order.

**Example:**

```
>>> from collections import OrderedDict
>>> d=OrderedDict()
>>> d["key1"]="foo"
>>> d["key2"]="bar"
>>> d
OrderedDict([('key1', 'foo'), ('key2', 'bar')]) 
```

Note: `OrderedDict` was introduced in python 2.7, so will not work in previous versions.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:20:04.663

使用`OrderedDict`而不是正常的`dict`.

```
from collections import OrderedDict

for meeting in get_meetings:
           if meeting.venue_id ==None:
                 mee_data = OrderedDict()
                 ... 
```

# mysql - MySQL：访问子子查询中的“根”值

> ID：13192375
> 
> 赞同：0
> 
> 时间：2012-11-02T09:16:51.603
> 
> 标签：mysql, group-by, subquery, parent

我在 MySQL 查询上有一点问题，目前在网站上找不到答案（也许我错过了？）

问题是在子查询中检索根父级的值。

很快，该项目就是一个广告经理。我想找到一个月中花费的钱，对于一个广告系列，它可以包含多个广告，每个广告可以有不同的价格。所以，结果是按 Campaign 分组的，但是花费的钱必须先按 Ad 分组，然后才能按 Campaign 分组；我需要获取一些其他信息，这就是我进行子查询的原因。

实际查询是：

```
SELECT
    COUNT(l.lgs_mkt_user_campaign_keyid) AS nbClics, 
    l.mkt_user_ad_keyid,
    a.mkt_user_ad_ppc,
    a.usr_user_keyid,
    r.mkt_rel_user_campaign_ad_score,
    c.mkt_user_campaign_ppm,
    (
        SELECT SUM(usr_user_money_spent) FROM (
            SELECT 
                (a2.mkt_user_ad_ppc * COUNT(l2.lgs_mkt_user_campaign_keyid)) AS usr_user_money_spent
            FROM
                lgs_mkt_user_campaigns l2
            LEFT JOIN
                mkt_user_ads a2 ON a2.mkt_user_ad_keyid = l2.mkt_user_ad_keyid
            WHERE
                l2.mkt_user_campaign_keyid = l.mkt_user_campaign_keyid
            GROUP BY
                l2.mkt_user_ad_keyid
        ) AS Sub
    ) AS usr_user_money_spent
FROM
    lgs_mkt_user_campaigns l
LEFT JOIN
    mkt_user_ads a ON a.mkt_user_ad_keyid = l.mkt_user_ad_keyid
LEFT JOIN 
    mkt_rel_user_campaigns_ads r ON r.mkt_user_ad_keyid = l.mkt_user_ad_keyid
LEFT JOIN 
    mkt_user_campaigns c ON c.mkt_user_campaign_keyid = l.mkt_user_campaign_keyid
WHERE
    l.lgs_mkt_user_campaign_datecrea BETWEEN '2012-11-01' AND '2012-11-30'
    AND l.lgs_mkt_user_campaign_is_clic = 1
GROUP BY
    c.mkt_user_campaign_keyid 
```

问题出在第 17 行的 WHERE 子句中：`l2.mkt_user_campaign_keyid = l.mkt_user_campaign_keyid`

子查询无法处理别名“l”（我没有找到任何其他解决方案来实现这一点......）

我真的不想在这个 WHERE 子句中编写另一个子查询来检索相同的`l.mkt_user_campaign_keyid`，我认为这将是一个坏主意，因为它会为此给出一个“只是”巨大的请求......

有谁知道如何实现这一目标？

非常感谢，1）对不起我的英语；），2）对不起，如果解决方案已经在stackoverflow上，我没有找到它：/

**[编辑]**

解释子查询的一些细节：

*   `mkt_user_campaigns`: 包含所有活动，用户作为外键
*   `mkt_user_ads`: 包含所有广告，用户作为外键
*   `mkt_rel_user_campaigns_ads`：将广告与广告系列绑定
*   `lgs_mkt_user_campaigns`：记录广告的所有点击

主要查询检索有关活动的一些信息，我需要知道活动的成本。子查询尝试检索每个活动的成本。

具有更多详细信息的子查询：

它试图为一个活动查找所有被点击的广告、点击次数以及最终成本（ppc = 每次点击的价格）。在这里，WHERE 子句遗漏了一些细节，例如日志的 datecrea，但我将其简化为更具可读性。

此子查询必须返回与主查询相同的 Campaign 的结果，这就是这里的难点

# c# - 使用 Asp-C# 写入 Xml 文件

> ID：13192378
> 
> 赞同：4
> 
> 时间：2012-11-02T09:17:06.287
> 
> 标签：c#, asp.net, xml

我正在尝试将一些值存储到 xml 文件中。我已经创建了一个 Xml 文件并尝试覆盖数据。代码给了..

```
/*storepassword.cs *//

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

public class StorePassword
{
    public StorePassword()
    {
    }
    public void  store(NewPassword nps)
    {
       XmlDocument XmlDoc = new XmlDocument();

       //XmlDoc.Load(@"Password.xml");
       XmlDoc.LoadXml("Password.xml");

       XmlNode root = XmlDoc.DocumentElement;
       XmlNode myNode1 = root.SelectSingleNode("UserName");
       XmlNode myNode2 = root.SelectSingleNode("PassWord");
       myNode1.Value = "sjn";
       myNode2.Value = "sjn123";
       XmlDoc.Save(@"Password.xml");
   }
}

//NewPassword.cs

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public class NewPassword
{

    public NewPassword()
    {

    }
    public string username{ get; set; }
    public string Password{ get; set; }
} 
```

在按钮点击..

```
NewPassword nps = new NewPassword();
nps.username = TxtUser.Text;
nps.Password = TxtNewPassword.Text;
StorePassword sp=new StorePassword();
sp.store(nps); 
```

现有的 Xml 文件包含以下内容。

```
<?xml version="1.0" encoding="utf-8"?>
<ROOT>
  <UserName>abc</UserName>
  <PassWord>123</PassWord>
</ROOT> 
```

但它不工作..

> 根级别的数据无效。第 1 行，位置 1

出现这个错误。。

我将代码更改为`XmlDoc.Load(@"Password.xml");`

现在错误更改为

```
Root element is missing.

   Description: An unhandled exception occurred during the execution of the current web                  request. Please review the stack trace for more information about the error and where it   originated in the code. 

Exception Details: System.Xml.XmlException: Root element is missing. 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:34:32.163

尝试使用 XML 序列化：

```
public static partial class ObjectXMLSerializer<T> where T : class
{
            private static void SaveToDocumentFormat(T serializableObject, System.Type[] extraTypes, string path, IsolatedStorageFile isolatedStorageFolder)
            {
                using (TextWriter textWriter = CreateTextWriter(isolatedStorageFolder, path))
                {
                    XmlSerializer xmlSerializer = CreateXmlSerializer(extraTypes);

                    //Cuong: set name space to null
                    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
                    ns.Add("", "");
                    xmlSerializer.Serialize(textWriter, serializableObject, ns);
                }
            }
            public static void Save(T serializableObject, string path)
            {
                    SaveToDocumentFormat(serializableObject, null, path, null);
            }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:31:33.690

当您加载您的 Xml 时，您需要使用 Server.MapPath 。`XmlDoc.LoadXml(Server.MapPath("Password.xml"));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:59:38.677

删除

```
<?xml version="1.0" encoding="utf-8"?> 
```

从

```
<?xml version="1.0" encoding="utf-8"?>
<ROOT>
  <UserName>abc</UserName>
  <PassWord>123</PassWord>
</ROOT> 
```

我不知道它为什么起作用，但我们一直在代码中这样做。是的，您应该使用[XmlDocument.Load](http://msdn.microsoft.com/en-us/library/875kz807.aspx)而不是[XmlDocument.LoadXml](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)

# mysql - 在 MySQL 中将非常规字符串转换为 mysql 日期时间

> ID：13192379
> 
> 赞同：0
> 
> 时间：2012-11-02T09:17:17.080
> 
> 标签：mysql, sql

我想将表示日期时间但当前是 VARCHAR 的字段转换为 DATETIME 字段。目前表示形式如下：'Sun May 20 01:04:39 +0000 2012' 我想在查询中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:24:25.410

利用**[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)**

```
SELECT STR_TO_DATE('Sun May 20 01:04:39 +0000 2012', '%a %M %d %H:%i:%S +0000 %Y') 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/d41d8/3321)
*   [**日期格式**](http://davidwalsh.name/format-date-mysql-date_format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:19:04.777

使用[日期](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)函数。

这可以完成工作并且可以在查询中使用。

# javascript - 如何将 twitter 时间线小部件放在 iframe 中？

> ID：13192382
> 
> 赞同：0
> 
> 时间：2012-11-02T09:17:27.523
> 
> 标签：javascript, iframe, twitter

我试图在 iframe 中放置一个 twitter 时间线小部件（https://dev.twitter.com/docs/embedded-timelines），但它似乎不起作用。

有谁知道如何让这个工作？

是的，我确实需要它在 iframe 中。

编辑：我意识到它通常在 iframe 中。我想将该 iframe 放在 iframe 中。

# macos - 在 Webview 中缩放 html 内容

> ID：13192385
> 
> 赞同：1
> 
> 时间：2012-11-02T09:17:38.080
> 
> 标签：macos, safari, webview

我将本地 HTML 模板加载到`WebView`. 我的 webview 的框架尺寸非常小（250X300）。我用它来只显示预览。问题是，我在 webview 中看不到整个 html 内容。我只能看到左上角。我必须滚动才能看到全部内容。那么有没有可能为 webview 设置比例或缩放因子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:07:18.937

如果仅缩放文本就足够了，请使用方法`-[WebView makeTextSmaller:]`和`-[WebView makeTextLarger:]`重置文本大小`-[WebView makeTextStandardSize:]`，如`WebView`. 这些方法对应于Safari中的“Cmd -”和“Cmd +”和“Cmd 0”。

如果要缩放包括图像在内的 WebView 的全部内容，我使用以下方法：

```
- (void) zoomWebView:(WebView *)aWebView withFactor:(float)fac
{
    NSString *script = @"document.body.style.zoom";
    float oldFac = [[aWebView stringByEvaluatingJavaScriptFromString:script] floatValue];
    if( oldFac==0 ){ oldFac = 1.0; }
    NSString *res = [aWebView stringByEvaluatingJavaScriptFromString:
            [NSString stringWithFormat:@"%@='%1.2f';", script, (oldFac*fac)]];
    [aWebView setNeedsDisplay:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T10:05:18.840

玩了一会儿我得到了答案。

```
 [[[[[previewWeb mainFrame] frameView] documentView] superview] scaleUnitSquareToSize:NSMakeSize(.5, .5)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:59:06.800

您可以使用未记录的

```
- (void)_setZoomMultiplier:(float)m isTextOnly:(BOOL)isTextOnly 
```

**注意**：这可能会导致提交到 App Store 时出现问题。

# eclipse - Eclipse-Maven：不显示来自 SCM 的 Maven 项目

> ID：13192393
> 
> 赞同：3
> 
> 时间：2012-11-02T09:18:07.653
> 
> 标签：eclipse, svn, maven, version-control

我已经为 sublipse 安装了 Maven 插件和 svn 连接器。然后我在项目资源管理器（空工作区）中右键单击并单击*New -> Other -> Maven -> Maven project from SCM*，输入 URL 并开始下载。

下载完成后，它没有出现在“项目资源管理器”中。我需要做什么才能从 SVN 签出一个 Maven 项目，以便它显示在“Project-Explorer”中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:45:02.903

为了让“Checkout as Maven Project”功能正常工作，我必须安装以下内容：

来自 Eclipse 市场：

1.  Eclipse 的 Maven 集成
2.  子剪辑

从 m2eclipse-extras 更新站点（[http://m2eclipse.sonatype.org/sites/m2e-extras/](http://m2eclipse.sonatype.org/sites/m2e-extras/)）：

1.  Subclipse 的 Maven SCM 处理程序

编辑：

还要确保您的项目资源管理器视图设置正确。验证您的顶级项目是项目。

# python - 调用 get_multi 时如何防止应用程序调用 datastore_v3.next()？

> ID：13192395
> 
> 赞同：1
> 
> 时间：2012-11-02T09:18:10.007
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb, appstats

我正在运行一个 keys_only 查询，它获取 20 个结果。

```
result_keys, cursor, more = ActivityIndex.query(cls.followers  == key)\
                                        .order(-cls.date_created)\
                                        .fetch_page(num_results,
                                                    start_cursor = cursor,
                                                    keys_only=True) 
```

然后我得到activityIndex对象的父母：

```
keys = []
for k in result_keys:
    for pair in k.parent().pairs():
        keys.append(ndb.Key(pairs=[pair]))

activities_related = ndb.get_multi(keys) 
```

我认为这会很快，因为我正在按键获取一批对象。但是，查询似乎 call `datastore_v3.Next`，根据[appstats 文档](https://developers.google.com/appengine/docs/python/tools/appstats)，它是“坏的”，并且占用了很大一部分执行时间。

> 避免不必要的 Next 调用可能会加快您的应用程序！

上述查询的 Appstats（使用 get_multi 调用） ![启用 get_multi 的 Appstats 视图](../Images/cc116755eb43c00cf6eae454c516088b.png)

上述查询的 Appstats 但没有调用 get_multi（next() 响应时间短）。 ![下一个响应的时间很短](../Images/05a7e69db217f28604b75056f151b9cf.png)

为什么`datastore_v3.next()`调用时调用需要这么长时间才能执行`get_multi()`？它是否取决于 get_multi 将返回的结果数量？get_multi 中返回的一些对象具有列表属性（列表中最多 10 个项目），这会对性能产生影响吗？

为避免此问题，是否最好更改设计并在 tasklet 中获取所需的实体？还有其他建议吗？

**编辑：**

关于我正在尝试做的更多信息：我的应用程序中有一个活动流，它显示所有用户活动，例如 Rob 对 Picture 等的评论。要显示此信息，我认为我需要 User 对象和 Picture对象来建立活动描述和要显示的信息。我将所有这些对象的键设置为`ActivityIndex`. 因此，从上面的查询中，`ndb.get_mult(keys)`将获取 Activity、User 和 Picture 对象。**键列表可能包含 50 个或更多键**，因此这可能是导致长时间`datastore_v3.Next`调用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T05:33:16.797

您是在 dev_appserver 中执行此操作吗？（我希望不会，因为它的性能与生产环境的性能完全无关，我们都在浪费时间讨论这个问题。）

似乎有什么可疑的事情发生了。ISTR 认为 Next 调用是异步安排的，在某些情况下实际上不需要。这可以解释即使您没有重叠调用，第一个图表显示 Next 重叠 memcache get 调用。

但是，仍然不应该有那么大的延迟。在调用 get_multi() 之前，您是否正在做您没有显示的额外内容？

顺便说一句，您对这些对所做的事情看起来过于复杂。如果有任何父母有一对以上，这将产生无效的密钥。我*认为*只有一个级别的父母，你只想得到那些——如果是这样，这就足够了：

```
keys = [k.parent() for k in result_keys] 
```

最后，请参阅问题 118：[http](http://code.google.com/p/appengine-ndb-experiment/issues/detail?id=118) ://code.google.com/p/appengine-ndb-experiment/issues/detail?id=118 - 我们测量了您似乎正在尝试的技巧，只有当您的命中率真的很高。

# objective-c - Automatic Reference Counting still produces memory leaks?

> ID：13192398
> 
> 赞同：1
> 
> 时间：2012-11-02T09:18:16.910
> 
> 标签：objective-c, memory-management, memory-leaks, automatic-ref-counting

I have app for editing images. I decided to enable ARC to forget memory managment. But I guess it was not a good idea. My app's image opening works like that:

```
 NSBitmapImageRep -> CIImage -> CIFilter -> NSBitmapImageRep -> CGImage -> other OpenGL texture -> 
                   CGImage ->                                                                                                   draw everything to seperate Framebuffers and then these framebuffers to main framebuffer and then to screen
                              OpenGL texture
File -> NSImage ->
                   CIImage -> CIFilters -> second CIImage -> NSBitmapImageRep -> CIImage on other class
                           -> NSBitmapImageRep -> CIImage on other class 
```

When I launch my app I have:

![在此处输入图像描述](../Images/95be660168fba4e9aaa26a7a7ab14f70.png)

打开 5.3MB 大小的图像 (3200x2000) 后，我有：

![在此处输入图像描述](../Images/bea2c21bbbcb92ee327dbd819b9b8cc2.png)

而且它永远不会下降。也许我没有足够的关于使用 ARC 的信息？但据我了解，它几乎可以管理与内存管理相关的所有内容，不是吗？

* * *

检漏仪输出：

运行我的应用程序后：

```
Leaked Object   #   Address Size    Responsible Library Responsible Frame

__NSMallocBlock__   507 < multiple >    31.69 KB         
     __NSMallocBlock__  1   0x10eadc1c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc220 64 Bytes         
     __NSMallocBlock__  1   0x10eadc270 64 Bytes         
     __NSMallocBlock__  1   0x10eadc2b0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc320 64 Bytes         
     __NSMallocBlock__  1   0x10eadc390 64 Bytes         
     __NSMallocBlock__  1   0x10eadc3e0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc420 64 Bytes         
     __NSMallocBlock__  1   0x10eadc460 64 Bytes         
     __NSMallocBlock__  1   0x10eadc4a0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc4e0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc540 64 Bytes         
     __NSMallocBlock__  1   0x10eadc580 64 Bytes         
     __NSMallocBlock__  1   0x10eadc5c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc620 64 Bytes         
     __NSMallocBlock__  1   0x10eadc660 64 Bytes         
     __NSMallocBlock__  1   0x10eadc6d0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc740 64 Bytes         
     __NSMallocBlock__  1   0x10eadc780 64 Bytes         
     __NSMallocBlock__  1   0x10eadc7c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc800 64 Bytes         
     __NSMallocBlock__  1   0x10eadc840 64 Bytes         
     __NSMallocBlock__  1   0x10eadc8b0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc8f0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc930 64 Bytes         
     __NSMallocBlock__  1   0x10eadc970 64 Bytes         
     __NSMallocBlock__  1   0x10eadc9b0 64 Bytes         
     __NSMallocBlock__  1   0x10eadc9f0 64 Bytes         
     __NSMallocBlock__  1   0x10eadca30 64 Bytes         
     __NSMallocBlock__  1   0x10eadcaa0 64 Bytes         
     __NSMallocBlock__  1   0x10eadcae0 64 Bytes         
     __NSMallocBlock__  1   0x10eadcb20 64 Bytes         
     __NSMallocBlock__  1   0x10eadcb90 64 Bytes         
     __NSMallocBlock__  1   0x10eadcbd0 64 Bytes         
     __NSMallocBlock__  1   0x10eadcc10 64 Bytes         
     __NSMallocBlock__  1   0x10eadcc50 64 Bytes         
     __NSMallocBlock__  1   0x10eadcc90 64 Bytes         
     __NSMallocBlock__  1   0x10eadcce0 64 Bytes         
     __NSMallocBlock__  1   0x10eadcd40 64 Bytes         
     __NSMallocBlock__  1   0x10eadcd80 64 Bytes         
     __NSMallocBlock__  1   0x10eadcdc0 64 Bytes         
     __NSMallocBlock__  1   0x10eadce00 64 Bytes         
     __NSMallocBlock__  1   0x10eadce40 64 Bytes         
     __NSMallocBlock__  1   0x10eadcea0 64 Bytes         
     __NSMallocBlock__  1   0x10eadcee0 64 Bytes         
     __NSMallocBlock__  1   0x10eadcf50 64 Bytes         
     __NSMallocBlock__  1   0x10eadcfb0 64 Bytes         
     __NSMallocBlock__  1   0x10eadcff0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd030 64 Bytes         
     __NSMallocBlock__  1   0x10eadd070 64 Bytes         
     __NSMallocBlock__  1   0x10eadd0b0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd0f0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd130 64 Bytes         
     __NSMallocBlock__  1   0x10eadd170 64 Bytes         
     __NSMallocBlock__  1   0x10eadd1c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd200 64 Bytes         
     __NSMallocBlock__  1   0x10eadd240 64 Bytes         
     __NSMallocBlock__  1   0x10eadd280 64 Bytes         
     __NSMallocBlock__  1   0x10eadd2c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd300 64 Bytes         
     __NSMallocBlock__  1   0x10eadd360 64 Bytes         
     __NSMallocBlock__  1   0x10eadd3a0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd3e0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd420 64 Bytes         
     __NSMallocBlock__  1   0x10eadd460 64 Bytes         
     __NSMallocBlock__  1   0x10eadd4a0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd510 64 Bytes         
     __NSMallocBlock__  1   0x10eadd550 64 Bytes         
     __NSMallocBlock__  1   0x10eadd590 64 Bytes         
     __NSMallocBlock__  1   0x10eadd5f0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd630 64 Bytes         
     __NSMallocBlock__  1   0x10eadd670 64 Bytes         
     __NSMallocBlock__  1   0x10eadd6b0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd6f0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd750 64 Bytes         
     __NSMallocBlock__  1   0x10eadd790 64 Bytes         
     __NSMallocBlock__  1   0x10eadd800 64 Bytes         
     __NSMallocBlock__  1   0x10eadd840 64 Bytes         
     __NSMallocBlock__  1   0x10eadd880 64 Bytes         
     __NSMallocBlock__  1   0x10eadd8c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadd900 64 Bytes         
     __NSMallocBlock__  1   0x10eadd940 64 Bytes         
     __NSMallocBlock__  1   0x10eadd980 64 Bytes         
     __NSMallocBlock__  1   0x10eadd9c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadda00 64 Bytes         
     __NSMallocBlock__  1   0x10eadda40 64 Bytes         
     __NSMallocBlock__  1   0x10eadda80 64 Bytes         
     __NSMallocBlock__  1   0x10eaddac0 64 Bytes         
     __NSMallocBlock__  1   0x10eaddb00 64 Bytes         
     __NSMallocBlock__  1   0x10eaddb40 64 Bytes         
     __NSMallocBlock__  1   0x10eaddb80 64 Bytes         
     __NSMallocBlock__  1   0x10eaddbc0 64 Bytes         
     __NSMallocBlock__  1   0x10eaddc00 64 Bytes         
     __NSMallocBlock__  1   0x10eaddc40 64 Bytes         
     __NSMallocBlock__  1   0x10eaddc90 64 Bytes         
     __NSMallocBlock__  1   0x10eaddcd0 64 Bytes         
     __NSMallocBlock__  1   0x10eaddd10 64 Bytes         
     __NSMallocBlock__  1   0x10eaddd50 64 Bytes         
     __NSMallocBlock__  1   0x10eaddd90 64 Bytes         
     __NSMallocBlock__  1   0x10eadddd0 64 Bytes         
     __NSMallocBlock__  1   0x10eadde20 64 Bytes         
     __NSMallocBlock__  1   0x10eadde60 64 Bytes         
     __NSMallocBlock__  1   0x10eaddea0 64 Bytes         
     __NSMallocBlock__  1   0x10eaddf10 64 Bytes         
     __NSMallocBlock__  1   0x10eaddf50 64 Bytes         
     __NSMallocBlock__  1   0x10eaddf90 64 Bytes         
     __NSMallocBlock__  1   0x10eaddfd0 64 Bytes         
     __NSMallocBlock__  1   0x10eade010 64 Bytes         
     __NSMallocBlock__  1   0x10eade050 64 Bytes         
     __NSMallocBlock__  1   0x10eade090 64 Bytes         
     __NSMallocBlock__  1   0x10eade0e0 64 Bytes         
     __NSMallocBlock__  1   0x10eade120 64 Bytes         
     __NSMallocBlock__  1   0x10eade160 64 Bytes         
     __NSMallocBlock__  1   0x10eade1a0 64 Bytes         
     __NSMallocBlock__  1   0x10eade200 64 Bytes         
     __NSMallocBlock__  1   0x10eade240 64 Bytes         
     __NSMallocBlock__  1   0x10eade280 64 Bytes         
     __NSMallocBlock__  1   0x10eade2d0 64 Bytes         
     __NSMallocBlock__  1   0x10eade310 64 Bytes         
     __NSMallocBlock__  1   0x10eade350 64 Bytes         
     __NSMallocBlock__  1   0x10eade390 64 Bytes         
     __NSMallocBlock__  1   0x10eade3d0 64 Bytes         
     __NSMallocBlock__  1   0x10eade410 64 Bytes         
     __NSMallocBlock__  1   0x10eade470 64 Bytes         
     __NSMallocBlock__  1   0x10eade4b0 64 Bytes         
     __NSMallocBlock__  1   0x10eade4f0 64 Bytes         
     __NSMallocBlock__  1   0x10eade530 64 Bytes         
     __NSMallocBlock__  1   0x10eade5a0 64 Bytes         
     __NSMallocBlock__  1   0x10eade5f0 64 Bytes         
     __NSMallocBlock__  1   0x10eade630 64 Bytes         
     __NSMallocBlock__  1   0x10eade670 64 Bytes         
     __NSMallocBlock__  1   0x10eade6b0 64 Bytes         
     __NSMallocBlock__  1   0x10eade6f0 64 Bytes         
     __NSMallocBlock__  1   0x10eade750 64 Bytes         
     __NSMallocBlock__  1   0x10eade7a0 64 Bytes         
     __NSMallocBlock__  1   0x10eade7e0 64 Bytes         
     __NSMallocBlock__  1   0x10eade820 64 Bytes         
     __NSMallocBlock__  1   0x10eade880 64 Bytes         
     __NSMallocBlock__  1   0x10eade8c0 64 Bytes         
     __NSMallocBlock__  1   0x10eade900 64 Bytes         
     __NSMallocBlock__  1   0x10eade940 64 Bytes         
     __NSMallocBlock__  1   0x10eade980 64 Bytes         
     __NSMallocBlock__  1   0x10eade9c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadea00 64 Bytes         
     __NSMallocBlock__  1   0x10eadea70 64 Bytes         
     __NSMallocBlock__  1   0x10eadeab0 64 Bytes         
     __NSMallocBlock__  1   0x10eadeaf0 64 Bytes         
     __NSMallocBlock__  1   0x10eadeb30 64 Bytes         
     __NSMallocBlock__  1   0x10eadeb70 64 Bytes         
     __NSMallocBlock__  1   0x10eadebb0 64 Bytes         
     __NSMallocBlock__  1   0x10eadebf0 64 Bytes         
     __NSMallocBlock__  1   0x10eadec30 64 Bytes         
     __NSMallocBlock__  1   0x10eadec70 64 Bytes         
     __NSMallocBlock__  1   0x10eadecc0 64 Bytes         
     __NSMallocBlock__  1   0x10eaded00 64 Bytes         
     __NSMallocBlock__  1   0x10eaded40 64 Bytes         
     __NSMallocBlock__  1   0x10eaded80 64 Bytes         
     __NSMallocBlock__  1   0x10eadedc0 64 Bytes         
     __NSMallocBlock__  1   0x10eadee00 64 Bytes         
     __NSMallocBlock__  1   0x10eadee40 64 Bytes         
     __NSMallocBlock__  1   0x10eadee80 64 Bytes         
     __NSMallocBlock__  1   0x10eadeec0 64 Bytes         
     __NSMallocBlock__  1   0x10eadef00 64 Bytes         
     __NSMallocBlock__  1   0x10eadef40 64 Bytes         
     __NSMallocBlock__  1   0x10eadef80 64 Bytes         
     __NSMallocBlock__  1   0x10eadefc0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf000 64 Bytes         
     __NSMallocBlock__  1   0x10eadf040 64 Bytes         
     __NSMallocBlock__  1   0x10eadf0b0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf0f0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf130 64 Bytes         
     __NSMallocBlock__  1   0x10eadf170 64 Bytes         
     __NSMallocBlock__  1   0x10eadf1b0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf1f0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf230 64 Bytes         
     __NSMallocBlock__  1   0x10eadf270 64 Bytes         
     __NSMallocBlock__  1   0x10eadf2c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf300 64 Bytes         
     __NSMallocBlock__  1   0x10eadf340 64 Bytes         
     __NSMallocBlock__  1   0x10eadf380 64 Bytes         
     __NSMallocBlock__  1   0x10eadf3c0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf430 64 Bytes         
     __NSMallocBlock__  1   0x10eadf4a0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf4e0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf520 64 Bytes         
     __NSMallocBlock__  1   0x10eadf560 64 Bytes         
     __NSMallocBlock__  1   0x10eadf5a0 64 Bytes         
     __NSMallocBlock__  1   0x10eadf5e0 64 Bytes         
     __NSMallocBlock__  1   0x101379560 64 Bytes         
     __NSMallocBlock__  1   0x1013795a0 64 Bytes         
     __NSMallocBlock__  1   0x101379970 64 Bytes         
     __NSMallocBlock__  1   0x101379ce0 64 Bytes         
     __NSMallocBlock__  1   0x10137b690 64 Bytes         
     __NSMallocBlock__  1   0x10137b980 64 Bytes         
     __NSMallocBlock__  1   0x10137b9c0 64 Bytes         
     __NSMallocBlock__  1   0x10137ba30 64 Bytes         
     __NSMallocBlock__  1   0x10137baa0 64 Bytes         
     __NSMallocBlock__  1   0x10137bcf0 64 Bytes         
     __NSMallocBlock__  1   0x10137bfc0 64 Bytes         
     __NSMallocBlock__  1   0x10137eaf0 64 Bytes         
     __NSMallocBlock__  1   0x10137eb30 64 Bytes         
     __NSMallocBlock__  1   0x10137eb90 64 Bytes         
     __NSMallocBlock__  1   0x10137ebd0 64 Bytes         
     __NSMallocBlock__  1   0x101381790 64 Bytes         
     __NSMallocBlock__  1   0x1013817d0 64 Bytes         
     __NSMallocBlock__  1   0x101381810 64 Bytes         
     __NSMallocBlock__  1   0x101381850 64 Bytes         
     __NSMallocBlock__  1   0x101381890 64 Bytes         
     __NSMallocBlock__  1   0x1013818d0 64 Bytes         
     __NSMallocBlock__  1   0x101381910 64 Bytes         
     __NSMallocBlock__  1   0x101381950 64 Bytes         
     __NSMallocBlock__  1   0x101381990 64 Bytes         
     __NSMallocBlock__  1   0x1013819d0 64 Bytes         
     __NSMallocBlock__  1   0x101381a40 64 Bytes         
     __NSMallocBlock__  1   0x101381a80 64 Bytes         
     __NSMallocBlock__  1   0x101381ac0 64 Bytes         
     __NSMallocBlock__  1   0x101381b00 64 Bytes         
     __NSMallocBlock__  1   0x101381b40 64 Bytes         
     __NSMallocBlock__  1   0x101381b80 64 Bytes         
     __NSMallocBlock__  1   0x101381bc0 64 Bytes         
     __NSMallocBlock__  1   0x101381c00 64 Bytes         
     __NSMallocBlock__  1   0x101381c40 64 Bytes         
     __NSMallocBlock__  1   0x101381c80 64 Bytes         
     __NSMallocBlock__  1   0x101381cc0 64 Bytes         
     __NSMallocBlock__  1   0x101381d00 64 Bytes         
     __NSMallocBlock__  1   0x101381d40 64 Bytes         
     __NSMallocBlock__  1   0x101381d80 64 Bytes         
     __NSMallocBlock__  1   0x101381dc0 64 Bytes         
     __NSMallocBlock__  1   0x101381e10 64 Bytes         
     __NSMallocBlock__  1   0x101381e50 64 Bytes         
     __NSMallocBlock__  1   0x101381e90 64 Bytes         
     __NSMallocBlock__  1   0x101381ed0 64 Bytes         
     __NSMallocBlock__  1   0x101381f40 64 Bytes         
     __NSMallocBlock__  1   0x101381f90 64 Bytes         
     __NSMallocBlock__  1   0x101381fd0 64 Bytes         
     __NSMallocBlock__  1   0x101382010 64 Bytes         
     __NSMallocBlock__  1   0x101382050 64 Bytes         
     __NSMallocBlock__  1   0x101382090 64 Bytes         
     __NSMallocBlock__  1   0x1013820d0 64 Bytes         
     __NSMallocBlock__  1   0x101382110 64 Bytes         
     __NSMallocBlock__  1   0x101382150 64 Bytes         
     __NSMallocBlock__  1   0x101382190 64 Bytes         
     __NSMallocBlock__  1   0x1013821d0 64 Bytes         
     __NSMallocBlock__  1   0x101382220 64 Bytes         
     __NSMallocBlock__  1   0x101382260 64 Bytes         
     __NSMallocBlock__  1   0x1013822a0 64 Bytes         
     __NSMallocBlock__  1   0x1013822e0 64 Bytes         
     __NSMallocBlock__  1   0x101382320 64 Bytes         
     __NSMallocBlock__  1   0x101382360 64 Bytes         
     __NSMallocBlock__  1   0x1013823c0 64 Bytes         
     __NSMallocBlock__  1   0x101382400 64 Bytes         
     __NSMallocBlock__  1   0x101382440 64 Bytes         
     __NSMallocBlock__  1   0x101382480 64 Bytes         
     __NSMallocBlock__  1   0x1013824f0 64 Bytes         
     __NSMallocBlock__  1   0x101382530 64 Bytes         
     __NSMallocBlock__  1   0x101382570 64 Bytes         
     __NSMallocBlock__  1   0x1013825b0 64 Bytes         
     __NSMallocBlock__  1   0x1013825f0 64 Bytes         
     __NSMallocBlock__  1   0x101382630 64 Bytes         
     __NSMallocBlock__  1   0x101382670 64 Bytes         
     __NSMallocBlock__  1   0x1013826b0 64 Bytes         
     __NSMallocBlock__  1   0x1013826f0 64 Bytes         
     __NSMallocBlock__  1   0x101382730 64 Bytes         
     __NSMallocBlock__  1   0x101382770 64 Bytes         
     __NSMallocBlock__  1   0x1013827c0 64 Bytes         
     __NSMallocBlock__  1   0x101382800 64 Bytes         
     __NSMallocBlock__  1   0x101382840 64 Bytes         
     __NSMallocBlock__  1   0x101382880 64 Bytes         
     __NSMallocBlock__  1   0x1013828c0 64 Bytes         
     __NSMallocBlock__  1   0x101382900 64 Bytes         
     __NSMallocBlock__  1   0x101382940 64 Bytes         
     __NSMallocBlock__  1   0x101382980 64 Bytes         
     __NSMallocBlock__  1   0x1013829c0 64 Bytes         
     __NSMallocBlock__  1   0x101382a20 64 Bytes         
     __NSMallocBlock__  1   0x101382a60 64 Bytes         
     __NSMallocBlock__  1   0x101382ab0 64 Bytes         
     __NSMallocBlock__  1   0x101382af0 64 Bytes         
     __NSMallocBlock__  1   0x101382b50 64 Bytes         
     __NSMallocBlock__  1   0x101382b90 64 Bytes         
     __NSMallocBlock__  1   0x101382bd0 64 Bytes         
     __NSMallocBlock__  1   0x101382c10 64 Bytes         
     __NSMallocBlock__  1   0x101382c70 64 Bytes         
     __NSMallocBlock__  1   0x101382ce0 64 Bytes         
     __NSMallocBlock__  1   0x101382d20 64 Bytes         
     __NSMallocBlock__  1   0x101382d60 64 Bytes         
     __NSMallocBlock__  1   0x101382da0 64 Bytes         
     __NSMallocBlock__  1   0x101382e10 64 Bytes         
     __NSMallocBlock__  1   0x101382e50 64 Bytes         
     __NSMallocBlock__  1   0x101382e90 64 Bytes         
     __NSMallocBlock__  1   0x101382ed0 64 Bytes         
     __NSMallocBlock__  1   0x101382f10 64 Bytes         
     __NSMallocBlock__  1   0x101382f50 64 Bytes         
     __NSMallocBlock__  1   0x101382f90 64 Bytes         
     __NSMallocBlock__  1   0x101382fd0 64 Bytes         
     __NSMallocBlock__  1   0x101383010 64 Bytes         
     __NSMallocBlock__  1   0x101383050 64 Bytes         
     __NSMallocBlock__  1   0x101383090 64 Bytes         
     __NSMallocBlock__  1   0x1013830d0 64 Bytes         
     __NSMallocBlock__  1   0x101383110 64 Bytes         
     __NSMallocBlock__  1   0x101383150 64 Bytes         
     __NSMallocBlock__  1   0x101383190 64 Bytes         
     __NSMallocBlock__  1   0x1013831d0 64 Bytes         
     __NSMallocBlock__  1   0x101383210 64 Bytes         
     __NSMallocBlock__  1   0x101383250 64 Bytes         
     __NSMallocBlock__  1   0x101383290 64 Bytes         
     __NSMallocBlock__  1   0x1013832d0 64 Bytes         
     __NSMallocBlock__  1   0x101383320 64 Bytes         
     __NSMallocBlock__  1   0x101383360 64 Bytes         
     __NSMallocBlock__  1   0x1013833a0 64 Bytes         
     __NSMallocBlock__  1   0x101383400 64 Bytes         
     __NSMallocBlock__  1   0x101383480 64 Bytes         
     __NSMallocBlock__  1   0x1013834c0 64 Bytes         
     __NSMallocBlock__  1   0x101383500 64 Bytes         
     __NSMallocBlock__  1   0x101383540 64 Bytes         
     __NSMallocBlock__  1   0x101383580 64 Bytes         
     __NSMallocBlock__  1   0x1013835c0 64 Bytes         
     __NSMallocBlock__  1   0x101383600 64 Bytes         
     __NSMallocBlock__  1   0x101383640 64 Bytes         
     __NSMallocBlock__  1   0x101383680 64 Bytes         
     __NSMallocBlock__  1   0x1013836c0 64 Bytes         
     __NSMallocBlock__  1   0x101383700 64 Bytes         
     __NSMallocBlock__  1   0x101383740 64 Bytes         
     __NSMallocBlock__  1   0x1013837b0 64 Bytes         
     __NSMallocBlock__  1   0x1013837f0 64 Bytes         
     __NSMallocBlock__  1   0x101383830 64 Bytes         
     __NSMallocBlock__  1   0x101383870 64 Bytes         
     __NSMallocBlock__  1   0x1013838b0 64 Bytes         
     __NSMallocBlock__  1   0x1013838f0 64 Bytes         
     __NSMallocBlock__  1   0x101383930 64 Bytes         
     __NSMallocBlock__  1   0x101383970 64 Bytes         
     __NSMallocBlock__  1   0x1013839b0 64 Bytes         
     __NSMallocBlock__  1   0x1013839f0 64 Bytes         
     __NSMallocBlock__  1   0x101383a30 64 Bytes         
     __NSMallocBlock__  1   0x101383a70 64 Bytes         
     __NSMallocBlock__  1   0x101383ab0 64 Bytes         
     __NSMallocBlock__  1   0x101383af0 64 Bytes         
     __NSMallocBlock__  1   0x101383b40 64 Bytes         
     __NSMallocBlock__  1   0x101383b80 64 Bytes         
     __NSMallocBlock__  1   0x101383bc0 64 Bytes         
     __NSMallocBlock__  1   0x101383c00 64 Bytes         
     __NSMallocBlock__  1   0x101383c40 64 Bytes         
     __NSMallocBlock__  1   0x101383c80 64 Bytes         
     __NSMallocBlock__  1   0x101383cc0 64 Bytes         
     __NSMallocBlock__  1   0x101383d00 64 Bytes         
     __NSMallocBlock__  1   0x101383d40 64 Bytes         
     __NSMallocBlock__  1   0x101383d80 64 Bytes         
     __NSMallocBlock__  1   0x101383dc0 64 Bytes         
     __NSMallocBlock__  1   0x101383e00 64 Bytes         
     __NSMallocBlock__  1   0x101383e70 64 Bytes         
     __NSMallocBlock__  1   0x101383eb0 64 Bytes         
     __NSMallocBlock__  1   0x101383f10 64 Bytes         
     __NSMallocBlock__  1   0x101383f50 64 Bytes         
     __NSMallocBlock__  1   0x101383f90 64 Bytes         
     __NSMallocBlock__  1   0x101383fd0 64 Bytes         
     __NSMallocBlock__  1   0x101384010 64 Bytes         
     __NSMallocBlock__  1   0x101384050 64 Bytes         
     __NSMallocBlock__  1   0x101384090 64 Bytes         
     __NSMallocBlock__  1   0x1013840e0 64 Bytes         
     __NSMallocBlock__  1   0x101384120 64 Bytes         
     __NSMallocBlock__  1   0x101384160 64 Bytes         
     __NSMallocBlock__  1   0x1013841a0 64 Bytes         
     __NSMallocBlock__  1   0x1013841e0 64 Bytes         
     __NSMallocBlock__  1   0x101384220 64 Bytes         
     __NSMallocBlock__  1   0x101384260 64 Bytes         
     __NSMallocBlock__  1   0x1013842a0 64 Bytes         
     __NSMallocBlock__  1   0x1013842e0 64 Bytes         
     __NSMallocBlock__  1   0x101384320 64 Bytes         
     __NSMallocBlock__  1   0x101384360 64 Bytes         
     __NSMallocBlock__  1   0x1013843a0 64 Bytes         
     __NSMallocBlock__  1   0x1013843e0 64 Bytes         
     __NSMallocBlock__  1   0x101384420 64 Bytes         
     __NSMallocBlock__  1   0x101384480 64 Bytes         
     __NSMallocBlock__  1   0x1013844c0 64 Bytes         
     __NSMallocBlock__  1   0x101384500 64 Bytes         
     __NSMallocBlock__  1   0x101384540 64 Bytes         
     __NSMallocBlock__  1   0x101384580 64 Bytes         
     __NSMallocBlock__  1   0x1013845d0 64 Bytes         
     __NSMallocBlock__  1   0x101384610 64 Bytes         
     __NSMallocBlock__  1   0x101384650 64 Bytes         
     __NSMallocBlock__  1   0x101384690 64 Bytes         
     __NSMallocBlock__  1   0x1013846d0 64 Bytes         
     __NSMallocBlock__  1   0x101384720 64 Bytes         
     __NSMallocBlock__  1   0x101384760 64 Bytes         
     __NSMallocBlock__  1   0x1013847a0 64 Bytes         
     __NSMallocBlock__  1   0x1013847e0 64 Bytes         
     __NSMallocBlock__  1   0x101384830 64 Bytes         
     __NSMallocBlock__  1   0x101384890 64 Bytes         
     __NSMallocBlock__  1   0x1013848d0 64 Bytes         
     __NSMallocBlock__  1   0x101384930 64 Bytes         
     __NSMallocBlock__  1   0x101384980 64 Bytes         
     __NSMallocBlock__  1   0x1013849c0 64 Bytes         
     __NSMallocBlock__  1   0x101384a00 64 Bytes         
     __NSMallocBlock__  1   0x101384a70 64 Bytes         
     __NSMallocBlock__  1   0x101384ab0 64 Bytes         
     __NSMallocBlock__  1   0x101384af0 64 Bytes         
     __NSMallocBlock__  1   0x101384b30 64 Bytes         
     __NSMallocBlock__  1   0x101384b70 64 Bytes         
     __NSMallocBlock__  1   0x101384bb0 64 Bytes         
     __NSMallocBlock__  1   0x101384bf0 64 Bytes         
     __NSMallocBlock__  1   0x101384c30 64 Bytes         
     __NSMallocBlock__  1   0x101384c70 64 Bytes         
     __NSMallocBlock__  1   0x101384cc0 64 Bytes         
     __NSMallocBlock__  1   0x101384d00 64 Bytes         
     __NSMallocBlock__  1   0x101384d40 64 Bytes         
     __NSMallocBlock__  1   0x101384d80 64 Bytes         
     __NSMallocBlock__  1   0x101384df0 64 Bytes         
     __NSMallocBlock__  1   0x101384e30 64 Bytes         
     __NSMallocBlock__  1   0x101384e70 64 Bytes         
     __NSMallocBlock__  1   0x101384eb0 64 Bytes         
     __NSMallocBlock__  1   0x101384ef0 64 Bytes         
     __NSMallocBlock__  1   0x101384f30 64 Bytes         
     __NSMallocBlock__  1   0x101384f80 64 Bytes         
     __NSMallocBlock__  1   0x101384fc0 64 Bytes         
     __NSMallocBlock__  1   0x101385000 64 Bytes         
     __NSMallocBlock__  1   0x101385050 64 Bytes         
     __NSMallocBlock__  1   0x101385090 64 Bytes         
     __NSMallocBlock__  1   0x1013850f0 64 Bytes         
     __NSMallocBlock__  1   0x101385130 64 Bytes         
     __NSMallocBlock__  1   0x101385190 64 Bytes         
     __NSMallocBlock__  1   0x1013851d0 64 Bytes         
     __NSMallocBlock__  1   0x101385210 64 Bytes         
     __NSMallocBlock__  1   0x101385250 64 Bytes         
     __NSMallocBlock__  1   0x101385290 64 Bytes         
     __NSMallocBlock__  1   0x1013852d0 64 Bytes         
     __NSMallocBlock__  1   0x101385310 64 Bytes         
     __NSMallocBlock__  1   0x101385370 64 Bytes         
     __NSMallocBlock__  1   0x1013853c0 64 Bytes         
     __NSMallocBlock__  1   0x101385400 64 Bytes         
     __NSMallocBlock__  1   0x101385440 64 Bytes         
     __NSMallocBlock__  1   0x101385480 64 Bytes         
     __NSMallocBlock__  1   0x1013854d0 64 Bytes         
     __NSMallocBlock__  1   0x101385510 64 Bytes         
     __NSMallocBlock__  1   0x101385550 64 Bytes         
     __NSMallocBlock__  1   0x101385590 64 Bytes         
     __NSMallocBlock__  1   0x1013855d0 64 Bytes         
     __NSMallocBlock__  1   0x101385610 64 Bytes         
     __NSMallocBlock__  1   0x101385660 64 Bytes         
     __NSMallocBlock__  1   0x1013856a0 64 Bytes         
     __NSMallocBlock__  1   0x1013856e0 64 Bytes         
     __NSMallocBlock__  1   0x101385730 64 Bytes         
     __NSMallocBlock__  1   0x101385770 64 Bytes         
     __NSMallocBlock__  1   0x1013857b0 64 Bytes         
     __NSMallocBlock__  1   0x1013857f0 64 Bytes         
     __NSMallocBlock__  1   0x101385830 64 Bytes         
     __NSMallocBlock__  1   0x101385870 64 Bytes         
     __NSMallocBlock__  1   0x1013858b0 64 Bytes         
     __NSMallocBlock__  1   0x1013858f0 64 Bytes         
     __NSMallocBlock__  1   0x1013859a0 64 Bytes         
     __NSMallocBlock__  1   0x1013859e0 64 Bytes         
     __NSMallocBlock__  1   0x101385a20 64 Bytes         
     __NSMallocBlock__  1   0x100204290 64 Bytes         
     __NSMallocBlock__  1   0x1002042e0 64 Bytes         
     __NSMallocBlock__  1   0x100204320 64 Bytes         
     __NSMallocBlock__  1   0x1002043c0 64 Bytes         
     __NSMallocBlock__  1   0x100206200 64 Bytes         
     __NSMallocBlock__  1   0x1002062a0 64 Bytes         
     __NSMallocBlock__  1   0x1002062e0 64 Bytes         
     __NSMallocBlock__  1   0x100206350 64 Bytes         
     __NSMallocBlock__  1   0x1002063d0 64 Bytes         
     __NSMallocBlock__  1   0x1002064e0 64 Bytes         
     __NSMallocBlock__  1   0x1002065d0 64 Bytes         
     __NSMallocBlock__  1   0x100206670 64 Bytes         
     __NSMallocBlock__  1   0x1002066b0 64 Bytes         
     __NSMallocBlock__  1   0x100206b60 64 Bytes         
     __NSMallocBlock__  1   0x100206ba0 64 Bytes         
     __NSMallocBlock__  1   0x100206c10 64 Bytes         
     __NSMallocBlock__  1   0x100206db0 64 Bytes         
     __NSMallocBlock__  1   0x100206ec0 64 Bytes         
     __NSMallocBlock__  1   0x100206ff0 64 Bytes         
     __NSMallocBlock__  1   0x1002070d0 64 Bytes         
     __NSMallocBlock__  1   0x100207360 64 Bytes         
     __NSMallocBlock__  1   0x1002073a0 64 Bytes         
     __NSMallocBlock__  1   0x100207990 64 Bytes         
     __NSMallocBlock__  1   0x1002079e0 64 Bytes         
     __NSMallocBlock__  1   0x100207ba0 64 Bytes         
     __NSMallocBlock__  1   0x100207be0 64 Bytes         
     __NSMallocBlock__  1   0x100207d40 64 Bytes         
     __NSMallocBlock__  1   0x100207f10 64 Bytes         
     __NSMallocBlock__  1   0x100207f50 64 Bytes         
     __NSMallocBlock__  1   0x100208160 64 Bytes         
     __NSMallocBlock__  1   0x100208210 64 Bytes         
     __NSMallocBlock__  1   0x1002087e0 64 Bytes         
     __NSMallocBlock__  1   0x100208b70 64 Bytes         
     __NSMallocBlock__  1   0x100209150 64 Bytes         
     __NSMallocBlock__  1   0x1002091b0 64 Bytes         
     __NSMallocBlock__  1   0x1002ae910 64 Bytes         
     __NSMallocBlock__  1   0x1002ae950 64 Bytes         
     __NSMallocBlock__  1   0x1002ae990 64 Bytes         
     __NSMallocBlock__  1   0x1002ae9d0 64 Bytes         
     __NSMallocBlock__  1   0x1002aea40 64 Bytes         
     __NSMallocBlock__  1   0x1002aea80 64 Bytes         
     __NSMallocBlock__  1   0x1002aeac0 64 Bytes         
     __NSMallocBlock__  1   0x1002aeb00 64 Bytes         
     __NSMallocBlock__  1   0x1002aeb40 64 Bytes         
     __NSMallocBlock__  1   0x1002aeb80 64 Bytes         
     __NSMallocBlock__  1   0x1002aebc0 64 Bytes         
     __NSMallocBlock__  1   0x1002aec00 64 Bytes         
     __NSMallocBlock__  1   0x1002aec40 64 Bytes         
     __NSMallocBlock__  1   0x1002aec80 64 Bytes         
     __NSMallocBlock__  1   0x1002aecc0 64 Bytes         
     __NSMallocBlock__  1   0x1002aed00 64 Bytes         
     __NSMallocBlock__  1   0x1002aed40 64 Bytes         
     __NSMallocBlock__  1   0x1002aed80 64 Bytes         
     __NSMallocBlock__  1   0x1002aedc0 64 Bytes         
     __NSMallocBlock__  1   0x1002aee00 64 Bytes         
     __NSMallocBlock__  1   0x1002aee70 64 Bytes         
     __NSMallocBlock__  1   0x1002af020 64 Bytes

Malloc 548.00 KB        1   0x106983000 548.00 KB 
```

并且在打开图像时/之后没有检测到泄漏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:45:18.780

> 也许我没有足够的关于使用 ARC 的信息？但据我了解，它几乎可以管理与内存管理相关的所有内容，不是吗？

几乎没有——它只管理 ObjC 对象。

例如：如果您使用不透明的 C 类型（例如 CFString `malloc`、`new`CGColor），您仍然需要显式管理这些分配或它们的引用计数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T09:26:25.763

即使使用 ARC，也至少有两种可能性：

1.  一些 API，例如[`[UIImage imageNamed:]`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)，将缓存它们创建的对象。
2.  ARC 作为一种引用计数机制，容易受到引用循环的影响。如果一个对象（直接或间接）指向它自己，它——以及它指向的所有其他对象——将永远不会被释放。

您是否通过检漏仪运行您的应用程序？

# testing - 通过单击它（比如下午 12:50）插入文本检查点并运行它时，它给出的结果为失败？

> ID：13192400
> 
> 赞同：0
> 
> 时间：2012-11-02T09:18:23.540
> 
> 标签：testing, build-automation, qtp

当我单击它并确定运行测试时，它确实给出了通过的结果，但是当我将它的值为 (1[012]|[1-9]):[0-5][0-9 ] (am|pm) 并检查正则表达式并保存。运行它时，测试失败了。（我在 worldtimeserver.com 上尝试过）表达式是

Browser("当前本地时间").Page("当前本地时间").Check CheckPoint("印度当前本地时间")

> 它没有显示我选择的时间，而是显示为“在是和星期一之间选择的支票”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:10:07.303

您的正则表达式看起来对时间无效。使用检查点中的正则表达式评估器工具来验证 RegEx。

1.  从对象存储库中，选择检查点。
2.  在“常量”右侧，单击“常量值选项”按钮。
3.  单击“值”右侧的“右箭头”按钮。
4.  从下拉列表中，单击“打开正则表达式评估器...”。
5.  使用该工具评估您的正则表达式。

# java - 使用长轮询实现 android 聊天模块

> ID：13192407
> 
> 赞同：1
> 
> 时间：2012-11-02T09:19:03.090
> 
> 标签：java, android, wcf, long-polling, instant-messaging

我正在编写一个 Android 应用程序，其中包含一个聊天模块。我选择使用长轮询来实现聊天。

因为我试图避免耗尽用户手机电池，所以我考虑在实现中添加一个 GCM 消息平台来通知设备有关新消息的信息。

这个想法是在用户在他的屏幕上打开应用程序时使用长轮询，因此参与实时聊天会很快并且不涉及发送大量 GCM 消息，而当空闲时，服务器会知道用户正在当前没有轮询，并且会在新消息到达时向设备发送 GCM 消息以将其唤醒。

我正在努力解决实现此方法的一些问题：

1.  了解用户状态的最佳方式是什么 - 他是现在轮询还是等待推送消息将其唤醒。我应该将应用程序设置为在它进入睡眠状态时通知服务器还是服务器应该自行检测它？

2.  如果我将其设置为应用程序将通知服务器何时在模式之间切换，如果此通知未通过，我该如何恢复。（当客户端正在等待 gcm 并且服务器认为它正在轮询并且不会发送一个..）

3.  我遇到了一些客户端正在轮询并且服务器即使收到新消息也没有响应的情况。也许客户端不知道服务器上的某种超时......如果这是一个错误，我会修复它，但是如果客户端认为它正在轮询而服务器不知道它，我该怎么办（请求的超时时间太长，无法等待下一次轮询）。

我的客户端是原生 Android，Web 服务是 WCF (C#)。

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:42:41.043

我没有使用过 GCM，但我在移动设备上使用过很多消息传递应用程序，因此我将尝试解释我们遵循的内容。

> > 了解用户状态的最佳方法是什么

首先 - 当应用程序在前面时进行长轮询并不是接收即时消息的最佳方式。您需要保持 tcp 连接打开才能立即接收！（希望您的通知也应该包含消息）任何类型的轮询都将确保您浪费电池并且不会收到*即时*消息。其次 - 我认为客户端应该通知服务器其状态（前景/背景），以便服务器知道如何响应。所以我的建议是对 CIR 使用 TCP 套接字并在后台使用 poll 作为备份（以防服务器丢失“客户端转到后台消息”）

1.  要恢复使用长轮询（10 分钟）从服务器获取更新并通知服务器您的状态。

2.  如果您使用我提到的方法（使用 tcp 套接字），只要连接处于活动状态，服务器就应该知道您的应用程序处于前台。此外，服务器应始终使用增量更新来响应轮询（您的轮询应在服务器上次发送内容时发送）

希望这可以帮助。

# jboss7.x - 无法登录到 Windows 上的 jboss 7.1 管理控制台

> ID：13192416
> 
> 赞同：26
> 
> 时间：2012-11-02T09:19:49.597
> 
> 标签：jboss7.x

无法在 windows Server 2008 HPC Edition 上登录 jboss 7.1 和 7.1.1 管理控制台。我也尝试添加一个新用户（add-user.bat）。即使是默认用户：admin=admin 也不起作用。

此问题发生在域和独立上。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-02T09:33:36.343

与`add-user.bat`：

```
Realm (ManagementRealm) : ManagementRealm
Username : q
Password : superpassword
Re-enter Password : superpassword 
```

问题是 *领域（ManagementRealm）*值必须相同：`ManagementRealm`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-11T14:39:20.163

如果您不想添加可能会再次忘记密码的第二个用户，那么有一个更好的解决方案。

请按照以下步骤操作：

1.  打开`jboss-as-x.x.x.Final\standalone\configuration\mgmt-users.properties`并删除用户（即删除具有您要使用的用户名的行，例如`admin=2c7123264278731425d1f53aeb55da1e`）
2.  打开`jboss-as-x.x.x.Final\domain\configuration\mgmt-users.properties`并删除用户（即删除具有您要使用的用户名的行，例如`admin=2c7123264278731425d1f53aeb55da1e`）
3.  `jboss-as-x.x.x.Final\bin\add-user.bat`按以下方式运行并添加用户：

    3.1 选择用户类型`a`

    3.2 领域（ManagementRealm）：`ManagementRealm`

    3.3 用户名：`admin`

    3.4 密码：`password`

    3.5 重新输入密码：`password`

如果`JBAS015243: The user ‘admin’ already exists in at least one properties file.`出现错误，则说明您没有完成第 1 步和第 2 步。

# java - 将 JComboBox 项目中的值的工具提示设置为 JTable 中的 CellEditor

> ID：13192419
> 
> 赞同：1
> 
> 时间：2012-11-02T09:19:54.363
> 
> 标签：java, swing, jtable, tooltip, jcombobox

我想为自定义组合框中的值设置工具提示值。基本上，我的组合框包含一个人的姓名首字母列表 - 当他们悬停在我希望它显示该人的全名时。我的组合框基本上是一个 JTable 的单元格/列，它有自己的 TableCellRenderer 和 DefaultCellEditor。该列表是一个 JList（模型中的内部类） - iv 尝试直接设置“setToolTipText”方法，但这似乎不起作用。

这是代码：

*JTable 中的代码：*

```
public void setupUserCombo(Container container){
      TableColumn col = getColumnModel().getColumn(3);
      Set<ComboUser> values = new LinkedHashSet<ComboUser>();

      ComboUser comboUser = new ComboUser(new User("Test User"));
      values.add(comboUser);

      col.setCellEditor(new MyComboBoxEditor((ComboUser[])values.toArray(new ComboUser[0])));
      col.setCellRenderer(new MyComboBoxRenderer((ComboUser[])values.toArray(new ComboUser[0])));
      repaint();
}

public class MyComboBoxRenderer extends JComboBox implements TableCellRenderer {
    private static final long serialVersionUID = 1L;

    public MyComboBoxRenderer(ComboUser[] items) {
        super(items);
        repaint();
    }

    public Component getTableCellRendererComponent(JTable table, Object value,
            boolean isSelected, boolean hasFocus, int row, int column) {
        if (value != null){
            System.out.println("Setting tooltip");
            ((ComboUser)value).setToolTipText("TESTING!!");
        }
        setSelectedItem(value);

        return this;
    }
}

public class MyComboBoxEditor extends DefaultCellEditor {
    private static final long serialVersionUID = 1L;

    public MyComboBoxEditor(ComboUser[] items) {
        super(new JComboBox(items));
    }
} 
```

*模型内的子类：*

```
public class ComboUser extends JLabel{

    private User user;

    public ComboUser(User user){
        if (user != null){
            this.user = user;
        } else {
            this.user = new User("");
        }
    }

    @Override
    public String toString() {
        return user.getInitials();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:46:36.457

如果您想在编辑组合框中显示工具提示，则必须在该组合框的自定义渲染器中这样做。下面是一个简短的例子：

```
// some data
User[] users = new User[] { 
        new User("Clara Zetkin", "CZ"),
        new User("Rosa Luxemburg", "RL"),
        new User("Susan Sontag", "SS"),
};
// the renderer for use in the editor
ListCellRenderer comboRenderer = new DefaultListCellRenderer() {

    @Override
    public Component getListCellRendererComponent(JList<?> list,
            Object value, int index, boolean isSelected,
            boolean cellHasFocus) {
        if (value instanceof User) {
            setToolTipText(((User) value).getName());
            value = ((User) value).getInitials();
        } else {
            setToolTipText(null);
        }
        return super.getListCellRendererComponent(list, value, index, isSelected,
                cellHasFocus);
    }

};
JComboBox editingCombo = new JComboBox(users);
editingCombo.setRenderer(comboRenderer);

JTable table = new JTable(3, 2);
// set up the editor for the first column
table.getColumnModel().getColumn(0).setCellEditor(new DefaultCellEditor(editingCombo));
// the renderer to use in the table
TableCellRenderer renderer = new DefaultTableCellRenderer() {

    @Override
    protected void setValue(Object value) {
        if (value instanceof User) {
            setToolTipText(((User) value).getInitials());
            value = ((User) value).getName();
        } else {
            setToolTipText(null);
        }
        super.setValue(value);
    }

};
table.getColumnModel().getColumn(0).setCellRenderer(renderer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:24:58.453

[参见 JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#celltooltip)，测试代码示例，例如

```
import java.awt.BorderLayout;
import javax.swing.DefaultCellEditor;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JList;
import javax.swing.plaf.basic.BasicComboBoxRenderer;

public class TableRenderDemo extends JPanel {

    private static final long serialVersionUID = 1L;

    public TableRenderDemo() {
        super(new BorderLayout(5, 5));
        final JTable table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        table.setFillsViewportHeight(true);
        table.setRowHeight(20);
        JScrollPane scrollPane = new JScrollPane(table);
        initColumnSizes(table);
        setUpSportColumn(table, table.getColumnModel().getColumn(2));
        add(scrollPane, BorderLayout.CENTER);
        JButton resetButton = new JButton("Reset to default");
        resetButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                for (int i = 0; i < table.getRowCount(); i++) {
                    table.getModel().setValueAt("None of the above", i, 2);
                }
            }
        });
        add(resetButton, BorderLayout.SOUTH);
    }

    private void initColumnSizes(JTable table) {
        MyTableModel model = (MyTableModel) table.getModel();
        TableColumn column = null;
        Component comp = null;
        int headerWidth = 0;
        int cellWidth = 0;
        Object[] longValues = model.longValues;
        TableCellRenderer headerRenderer = table.getTableHeader().getDefaultRenderer();
        for (int i = 0; i < 5; i++) {
            column = table.getColumnModel().getColumn(i);
            comp = headerRenderer.getTableCellRendererComponent(null, column.getHeaderValue(), false, false, 0, 0);
            headerWidth = comp.getPreferredSize().width;
            comp = table.getDefaultRenderer(model.getColumnClass(i)).getTableCellRendererComponent(table, longValues[i], false, false, 0, i);
            cellWidth = comp.getPreferredSize().width;
            column.setPreferredWidth(Math.max(headerWidth, cellWidth));
        }
    }

    private void setUpSportColumn(JTable table, TableColumn sportColumn) {
        ArrayList<String> listSomeString = new ArrayList<String>();
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
        listSomeString.add("Pool");
        listSomeString.add("None of the above");
        JComboBox comboBox = new JComboBox();
        comboBox.addItem(new Item(1, "-"));
        comboBox.addItem(new Item(2, "Snowboarding"));
        comboBox.addItem(new Item(3, "Rowing"));
        comboBox.addItem(new Item(4, "Knitting"));
        comboBox.addItem(new Item(5, "Speed reading"));
        comboBox.addItem(new Item(6, "Pool"));
        comboBox.addItem(new Item(7, "None of the above"));
        comboBox.setMaximumRowCount(3);
        comboBox.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                JComboBox comboBox = (JComboBox) e.getSource();
                Item item = (Item) comboBox.getSelectedItem();
                System.out.println(item.getId() + " : " + item.getDescription());
            }
        });
        //comboBox.setRenderer(new ItemRenderer());
        sportColumn.setCellEditor(new DefaultCellEditor(comboBox));
        DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
        renderer.setToolTipText("Click for combo box");
        sportColumn.setCellRenderer(renderer);
    }

    class ItemRenderer extends BasicComboBoxRenderer {

        @Override
        public Component getListCellRendererComponent(JList list, Object value,
                int index, boolean isSelected, boolean cellHasFocus) {
            super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            if (value != null) {
                Item item = (Item) value;
                setText(item.getDescription().toUpperCase());
            }
            if (index == -1) {
                Item item = (Item) value;
                setText("" + item.getId());
            }
            return this;
        }
    }

    class Item {

        private int id;
        private String description;

        public Item(int id, String description) {
            this.id = id;
            this.description = description;
        }

        public int getId() {
            return id;
        }

        public String getDescription() {
            return description;
        }

        @Override
        public String toString() {
            return description;
        }
    }

    class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
        private Object[][] data = {{"Kathy", "Smith", "Snowboarding", new Integer(5), false},
            {"John", "Doe", "Rowing", new Integer(3), true}, {"Sue", "Black", "Knitting", new Integer(2), false},
            {"Jane", "White", "Speed reading", new Integer(20), true}, {"Joe", "Brown", "Pool", new Integer(10), false}};
        public final Object[] longValues = {"Jane", "Kathy", "None of the above", new Integer(20), Boolean.TRUE};

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public int getRowCount() {
            return data.length;
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        @Override
        public Class<?> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        @Override
        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
            System.out.println("New value of data: " + getValueAt(row, col));
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableRenderDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TableRenderDemo newContentPane = new TableRenderDemo();
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# ruby - 使用 odbc 驱动程序从 ruby 访问数据库（补救措施）

> ID：13192426
> 
> 赞同：1
> 
> 时间：2012-11-02T09:20:07.623
> 
> 标签：ruby, ruby-on-rails-3, remedy

我的机器上安装了 Remedy odbc 驱动程序。我可以通过 excel 从 Remedy 中提取数据，只需在我的连接中指定此驱动程序即可。

有什么办法可以在 Ruby / Ruby on rails 中使用这个驱动程序来连接到数据库并从数据库中读取？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T11:27:25.577

我还没有找到使用 Ruby 的 Remedy ODBC 驱动程序的方法。此外，我怀疑使用似乎已经过时并且在从 Excel 中使用时已经抛出一些神秘错误的驱动程序可能并不容易使用。

我能够通过 RODBC 通过 R 进行连接，因此可以为您提取数据并写入 CSV 的 R 脚本可能是一种解决方案。

我实际使用的——在我看来是最简单的实现方式——直接与 Remedy SQL 后端对话。您所要做的就是在从数据库中提取数据时对其进行解析，这很容易设置（优先级、服务类型、状态存储为整数，而不是实际名称，时间戳采用纪元格式）。

# c - C 中数组的理想数据类型，级别 2

> ID：13192427
> 
> 赞同：0
> 
> 时间：2012-11-02T09:20:12.350
> 
> 标签：c, arrays, static, initialization

现在[我找到了一种](https://stackoverflow.com/questions/13162733/ideal-data-type-for-an-array-in-c)静态初始化项目数组的方法，我需要一个更复杂的结构，而不是一个 char* 作为值，我需要一个结构（名为 atom_s）。

```
typdef struct atom_s {
  const char *val;
  const char *filter;
} atom_t;

struct
{
  const char *key;
  const atom_t **values;
} key_to_values[] =
{
  { .key = "foo", .values = (const atom_t *[]) { NULL } },
  { .key = "bar", .values = (const atom_t *[]) { { .val = "foo", .filter = "bar" }, NULL } },
}; 
```

问题是：我不知道如何在上面的数组声明中初始化 atom_s，或者是否有可能。数组的第二行（key = "bar"）无法编译：

```
warning: braces around scalar initializer  
warning: (near initialization for '(anonymous)[0]')
error: field name not in record or union initializer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:28:10.410

```
{ 
   .key = "bar", 
   .values = (const atom_t *[]) {
       (const atom_t []) {
           { .val = "foo", .filter = "bar" }
           // how is the user going to know this array has one element?
       },
       NULL 
   }
}, 
```

指向的数组的每个元素都`values`指向一个数组`atom_t`（除了最后一个，它是空的）。您可能还需要某种方法来终止每个内部数组，除非它们的长度始终相同。

# security - 我在哪里可以下载任何浏览器的 JRE 7u5 插件？

> ID：13192432
> 
> 赞同：0
> 
> 时间：2012-11-02T09:20:38.410
> 
> 标签：security, plugins, java, exploit, metasploit

我一直在寻找一个好的漏洞利用作为我的安全类的最终项目，所以我想使用 Metasploit 来利用 JRE 7u5 漏洞。

我可以在哪里下载该版本的 FireFox/IE/Chrome 插件，适用于任何浏览器？

我用谷歌搜索了几个小时，但找不到链接=？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:31:13.653

虽然不再列出较旧的下载，但我认为您会发现它们遵循明确定义的命名模式。例如查看本页的下载链接，根据需要修改： [http ://www.oracle.com/technetwork/java/javase/downloads/jre7u9-downloads-1859586.html](http://www.oracle.com/technetwork/java/javase/downloads/jre7u9-downloads-1859586.html)

不确定 Chrome，但我相信在 Windows 上安装 JRE 会将其添加为 IE 和 Firefox 的浏览器插件。如果没有，请按照[这些说明](http://java.com/en/download/help/enable_browser.xml)进行操作。

# animation - GIFEncoder.Class.php 和一个无循环 GIF 动画

> ID：13192436
> 
> 赞同：2
> 
> 时间：2012-11-02T09:21:09.207
> 
> 标签：animation, loops, encoding, gif

我正在使用 GIFEncoder 类将一系列 GIF 图像转换为动画 Gif。

我想要做的是设置循环，使其不会重复。

当我将循环设置为 1 时，在 Chrome 和 IE 中它不会播放一次......但会循环一次（所以播放两次）。在 Firefox 中，虽然它按预期工作，但播放不循环。

这是 GIFEncoder 中的错误吗？

难道我做错了什么？

我该如何解决这个问题？

我的代码

```
$gif = new GIFEncoder   (
                            $frames, // frames array
                            $time, // elapsed time array
                            1, // loops (0 = infinite)
                            0, // disposal
                            3, 2, 1,
                            0,// rgb of transparency
                            "url" // source type
        ); 
```

GIFEncoder 类

```
Class GIFEncoder {
    var $GIF = "GIF89a";            /* GIF header 6 bytes   */
    var $VER = "GIFEncoder V3.00";  /* Encoder version              */

    var $BUF = Array ( );
    var $OFS = Array ( );
    var $SIG =  0;
    var $LOP =  0;
    var $DIS =  2;
    var $COL = -1;
    var $IMG = -1;

    var $ERR = Array (
            'ERR00'=>"Does not supported function for only one image!",
            'ERR01'=>"Source is not a GIF image!",
            'ERR02'=>"Unintelligible flag ",
            'ERR03'=>"Does not make animation from animated GIF source",
    );

    /*
    :::::::::::::::::::::::::::::::::::::::::::::::::::
    ::
    ::      GIFEncoder...
    ::
    */
    function GIFEncoder     (
                                                    $GIF_src, $GIF_dly, $GIF_lop, $GIF_dis,
                                                    $GIF_red, $GIF_grn, $GIF_blu, $GIF_ofs,
                                                    $GIF_mod
                                            ) {
            if ( ! is_array ( $GIF_src ) && ! is_array ( $GIF_dly ) ) {
                    printf  ( "%s: %s", $this->VER, $this->ERR [ 'ERR00' ] );
                    exit    ( 0 );
            }
            if ( is_array ( $GIF_ofs ) && count ( $GIF_ofs ) > 1 ) {
                    $this->SIG = 1;
                    $this->OFS = $GIF_ofs;
            }
            $this->LOP = $GIF_lop === false ? false : (( $GIF_lop > -1 ) ? $GIF_lop : 0);
            $this->DIS = ( $GIF_dis > -1 ) ? ( ( $GIF_dis < 3 ) ? $GIF_dis : 3 ) : 2;
            $this->COL = ( $GIF_red > -1 && $GIF_grn > -1 && $GIF_blu > -1 ) ?
                                            ( $GIF_red | ( $GIF_grn << 8 ) | ( $GIF_blu << 16 ) ) : -1;

            for ( $i = 0; $i < count ( $GIF_src ); $i++ ) {
                    if ( strToLower ( $GIF_mod ) == "url" ) {
                            $this->BUF [ ] = fread ( fopen ( $GIF_src [ $i ], "rb" ), filesize ( $GIF_src [ $i ] ) );
                    }
                    else if ( strToLower ( $GIF_mod ) == "bin" ) {
                            $this->BUF [ ] = $GIF_src [ $i ];
                    }
                    else {
                            printf  ( "%s: %s ( %s )!", $this->VER, $this->ERR [ 'ERR02' ], $GIF_mod );
                            exit    ( 0 );
                    }
                    if ( substr ( $this->BUF [ $i ], 0, 6 ) != "GIF87a" && substr ( $this->BUF [ $i ], 0, 6 ) != "GIF89a" ) {
                            printf  ( "%s: %d %s", $this->VER, $i, $this->ERR [ 'ERR01' ] );
                            exit    ( 0 );
                    }
                    for ( $j = ( 13 + 3 * ( 2 << ( ord ( $this->BUF [ $i ] { 10 } ) & 0x07 ) ) ), $k = TRUE; $k; $j++ ) {
                            switch ( $this->BUF [ $i ] { $j } ) {
                                    case "!":
                                            if ( ( substr ( $this->BUF [ $i ], ( $j + 3 ), 8 ) ) == "NETSCAPE" ) {
                                                    printf  ( "%s: %s ( %s source )!", $this->VER, $this->ERR [ 'ERR03' ], ( $i + 1 ) );
                                                    exit    ( 0 );
                                            }
                                            break;
                                    case ";":
                                            $k = FALSE;
                                            break;
                            }
                    }
            }
            GIFEncoder::GIFAddHeader ( );
            for ( $i = 0; $i < count ( $this->BUF ); $i++ ) {
                    GIFEncoder::GIFAddFrames ( $i, $GIF_dly [ $i ] );
            }
            GIFEncoder::GIFAddFooter ( );
    }
    /*
    :::::::::::::::::::::::::::::::::::::::::::::::::::
    ::
    ::      GIFAddHeader...
    ::
    */
    function GIFAddHeader ( ) {
            $cmap = 0;

            if ( ord ( $this->BUF [ 0 ] { 10 } ) & 0x80 ) {
                    $cmap = 3 * ( 2 << ( ord ( $this->BUF [ 0 ] { 10 } ) & 0x07 ) );

                    $this->GIF .= substr ( $this->BUF [ 0 ], 6, 7           );
                    $this->GIF .= substr ( $this->BUF [ 0 ], 13, $cmap      );

                    if($this->LOP !== false)
                    {

                            $this->GIF .= "!\377\13NETSCAPE2.0\3\1" . GIFEncoder::GIFWord ( $this->LOP ) . "\0";
                    }
            }
    }
    /*
    :::::::::::::::::::::::::::::::::::::::::::::::::::
    ::
    ::      GIFAddFrames...
    ::
    */
    function GIFAddFrames ( $i, $d ) {

            $Locals_str = 13 + 3 * ( 2 << ( ord ( $this->BUF [ $i ] { 10 } ) & 0x07 ) );

            $Locals_end = strlen ( $this->BUF [ $i ] ) - $Locals_str - 1;
            $Locals_tmp = substr ( $this->BUF [ $i ], $Locals_str, $Locals_end );

            $Global_len = 2 << ( ord ( $this->BUF [ 0  ] { 10 } ) & 0x07 );
            $Locals_len = 2 << ( ord ( $this->BUF [ $i ] { 10 } ) & 0x07 );

            $Global_rgb = substr ( $this->BUF [ 0  ], 13,
                                                    3 * ( 2 << ( ord ( $this->BUF [ 0  ] { 10 } ) & 0x07 ) ) );
            $Locals_rgb = substr ( $this->BUF [ $i ], 13,
                                                    3 * ( 2 << ( ord ( $this->BUF [ $i ] { 10 } ) & 0x07 ) ) );

            $Locals_ext = "!\xF9\x04" . chr ( ( $this->DIS << 2 ) + 0 ) .
                                            chr ( ( $d >> 0 ) & 0xFF ) . chr ( ( $d >> 8 ) & 0xFF ) . "\x0\x0";

            if ( $this->COL > -1 && ord ( $this->BUF [ $i ] { 10 } ) & 0x80 ) {
                    for ( $j = 0; $j < ( 2 << ( ord ( $this->BUF [ $i ] { 10 } ) & 0x07 ) ); $j++ ) {
                            if      (
                                            ord ( $Locals_rgb { 3 * $j + 0 } ) == ( ( $this->COL >> 16 ) & 0xFF ) &&
                                            ord ( $Locals_rgb { 3 * $j + 1 } ) == ( ( $this->COL >>  8 ) & 0xFF ) &&
                                            ord ( $Locals_rgb { 3 * $j + 2 } ) == ( ( $this->COL >>  0 ) & 0xFF )
                                    ) {
                                    $Locals_ext = "!\xF9\x04" . chr ( ( $this->DIS << 2 ) + 1 ) .
                                                                    chr ( ( $d >> 0 ) & 0xFF ) . chr ( ( $d >> 8 ) & 0xFF ) . chr ( $j ) . "\x0";
                                    break;
                            }
                    }
            }
            switch ( $Locals_tmp { 0 } ) {
                    case "!":
                            $Locals_img = substr ( $Locals_tmp, 8, 10 );
                            $Locals_tmp = substr ( $Locals_tmp, 18, strlen ( $Locals_tmp ) - 18 );
                            break;
                    case ",":
                            $Locals_img = substr ( $Locals_tmp, 0, 10 );
                            $Locals_tmp = substr ( $Locals_tmp, 10, strlen ( $Locals_tmp ) - 10 );
                            break;
            }
            if ( ord ( $this->BUF [ $i ] { 10 } ) & 0x80 && $this->IMG > -1 ) {
                    if ( $Global_len == $Locals_len ) {
                            if ( GIFEncoder::GIFBlockCompare ( $Global_rgb, $Locals_rgb, $Global_len ) ) {
                                    $this->GIF .= ( $Locals_ext . $Locals_img . $Locals_tmp );
                            }
                            else {
                                    /*
                                     *
                                     * XY Padding...
                                     *
                                     */
                                    if ( $this->SIG == 1 ) {
                                            $Locals_img { 1 } = chr ( $this->OFS [ $i ] [ 0 ] & 0xFF );
                                            $Locals_img { 2 } = chr ( ( $$this->OFS [ $i ] [ 0 ] & 0xFF00 ) >> 8 );
                                            $Locals_img { 3 } = chr ( $this->OFS [ $i ] [ 1 ] & 0xFF );
                                            $Locals_img { 4 } = chr ( ( $this->OFS [ $i ] [ 1 ] & 0xFF00 ) >> 8 );
                                    }
                                    $byte  = ord ( $Locals_img { 9 } );
                                    $byte |= 0x80;
                                    $byte &= 0xF8;
                                    $byte |= ( ord ( $this->BUF [ 0 ] { 10 } ) & 0x07 );
                                    $Locals_img { 9 } = chr ( $byte );
                                    $this->GIF .= ( $Locals_ext . $Locals_img . $Locals_rgb . $Locals_tmp );
                            }
                    }
                    else {
                            /*
                             *
                             * XY Padding...
                             *
                             */
                            if ( $this->SIG == 1 ) {
                                    $Locals_img { 1 } = chr ( $this->OFS [ $i ] [ 0 ] & 0xFF );
                                    $Locals_img { 2 } = chr ( ( $$this->OFS [ $i ] [ 0 ] & 0xFF00 ) >> 8 );
                                    $Locals_img { 3 } = chr ( $this->OFS [ $i ] [ 1 ] & 0xFF );
                                    $Locals_img { 4 } = chr ( ( $this->OFS [ $i ] [ 1 ] & 0xFF00 ) >> 8 );
                            }
                            $byte  = ord ( $Locals_img { 9 } );
                            $byte |= 0x80;
                            $byte &= 0xF8;
                            $byte |= ( ord ( $this->BUF [ $i ] { 10 } ) & 0x07 );
                            $Locals_img { 9 } = chr ( $byte );
                            $this->GIF .= ( $Locals_ext . $Locals_img . $Locals_rgb . $Locals_tmp );
                    }
            }
            else {
                    $this->GIF .= ( $Locals_ext . $Locals_img . $Locals_tmp );
            }
            $this->IMG  = 1;
    }
    /*
    :::::::::::::::::::::::::::::::::::::::::::::::::::
    ::
    ::      GIFAddFooter...
    ::
    */
    function GIFAddFooter ( ) {
            $this->GIF .= ";";
    }
    /*
    :::::::::::::::::::::::::::::::::::::::::::::::::::
    ::
    ::      GIFBlockCompare...
    ::
    */
    function GIFBlockCompare ( $GlobalBlock, $LocalBlock, $Len ) {

            for ( $i = 0; $i < $Len; $i++ ) {
                    if      (
                                    $GlobalBlock { 3 * $i + 0 } != $LocalBlock { 3 * $i + 0 } ||
                                    $GlobalBlock { 3 * $i + 1 } != $LocalBlock { 3 * $i + 1 } ||
                                    $GlobalBlock { 3 * $i + 2 } != $LocalBlock { 3 * $i + 2 }
                            ) {
                                    return ( 0 );
                    }
            }

            return ( 1 );
    }
    /*
    :::::::::::::::::::::::::::::::::::::::::::::::::::
    ::
    ::      GIFWord...
    ::
    */
    function GIFWord ( $int ) {

            return ( chr ( $int & 0xFF ) . chr ( ( $int >> 8 ) & 0xFF ) );
    }
    /*
    :::::::::::::::::::::::::::::::::::::::::::::::::::
    ::
    ::      GetAnimation...
    ::
    */
    function GetAnimation ( ) {
            return ( $this->GIF );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:40:38.510

找到解决方案...只需将循环设置为 False

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T11:41:27.330

这个类有错误。请将所有“ **$$this->OFS** ”替换为“ **$this->OFS** ”

```
$gif = new GIFEncoder (

    // 1\. frames
    array('1.gif', '2.gif', '3.gif'), 

    // 2\. speed - array for frames or number
    //array(500,500,500),
    20,

    // 3\. loops - number or false
    0,

    // 4\. disposal ??? - what is it?
    2,

    // 5-7\. transparent RGB
    0,0,0,

    // 8\. padding array with point(x,y) or 0
    array(
        array(0,50),
        array(0,0)
    ),

    // 9\. source 'url' or 'bin'
    "url"
); 
```

# asp.net - 仅从某些页面获取重定向错误

> ID：13192438
> 
> 赞同：0
> 
> 时间：2012-11-02T09:21:26.403
> 
> 标签：asp.net

我的 Site.Master 文件中有一个菜单，其代码如下；

```
<nav>
    <ul id="css3menu1" class="topmenu">
        <li class="topfirst"><a href="Default.aspx"><span>Home</span></a>
            <ul>
               <li><a href="../Account/Login.aspx">Employee Login</a></li>
               <li><a href="../Account/Login.aspx">Customer/Distributor Login</a></li>
            </ul>
        </li>
        <li class="topmenu"><a href="#"><span>Products</span></a>
            <ul>
                <li><a href="Page1.aspx">Page1</a></li>
                <li><a href="Page2.aspx">Page2</a></li>
                <li><a href="Page3.aspx">Page3</a></li>
            </ul>
        </li>
        <li class="topmenu"><a href="InvestorInfo.aspx"><span>Investor Info</span></a>
            <ul>
                <li><a href="InvestorInfo.aspx">Quarterly Filings</a></li>
                <li><a href="InvestorInfo.aspx">Press Releases</a></li>
                <li><a href="#">Investor Updates</a></li>
                <li><a href="#">Company Presentations</a></li>
                <li><a href="BioPages/ManagementTeam.aspx">Management Team</a></li>
            </ul>
        </li>
    </ul>
</nav> 
```

当我进入网站登录页面但未登录并尝试进入菜单中的任何链接时，我收到一个 404 错误页面，提示我正在尝试重定向到 /Account/Page1.aspx。

当来自 Site.Master 的路径显然只是 Page1.aspx 时，为什么“Account/”会被插入到该路径中。我尝试将页面名称的 href 更改为`~/`和前面`../`，但这会产生不同类型的错误，尽管它仅在登录页面（位于帐户文件夹中）时正确重定向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:32:11.260

更好的做法是使用波浪号而不是相对路径，但是您需要使用

```
runat="server" 
```

在标签中。你用这种方法遇到的其他错误是什么？

编辑

```
<li><a runat="server" href="~/Account/Login.aspx">Employee Login</a></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:55:04.807

当您访问 Login.aspx 页面时，它将位于“Account”文件夹目录中。当您尝试访问菜单中的其他链接时，如果页面存在，它将首先检查当前的“帐户”目录，否则将显示页面，否则会引发错误。

我建议您为此需要动态菜单。当您访问“帐户”目录页面时，它将根据“帐户”目录和链接更改菜单。

您可以使用文字控制和 Literal1.Text = 'HTML Menu Code'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T16:22:12.300

使用 Page.ResolveURL("~/Account/Login.aspx") 更容易，更实用的解决方案。我对菜单中的所有链接都使用了 Page.ResolveURL，现在它可以无缝运行

# android - Vimeo 嵌入式代码在 Android 4 中不起作用

> ID：13192441
> 
> 赞同：1
> 
> 时间：2012-11-02T09:21:40.063
> 
> 标签：android, html, android-4.0-ice-cream-sandwich

我在我的网页中嵌入了一个 vimeo 代码，在这里我在 Android ver.4 及更高版本的平板电脑中查看该视频时遇到了问题。但在三星 2.2 和 Kindle 设计中它运行良好 任何人都可以帮我解决这个问题............

# servicestack - ServiceStack 中的版本控制 - 再次

> ID：13192442
> 
> 赞同：3
> 
> 时间：2012-11-02T09:21:43.050
> 
> 标签：servicestack, dto

我已经阅读了@mythz [https://stackoverflow.com/a/12413091/1095655](https://stackoverflow.com/a/12413091/1095655)的这篇文章，但我的声誉还不够高，无法发表评论

我有一个问题是工作。如果您收到带有版本 1 DTO 的请求，则传输的数据中不存在该版本，因为版本 1 DTO 没有 Version 属性。当 ServiceStack 反序列化请求时，它会创建一个 DTO 对象（版本 3），并将版本设置为 2，并且由于未从传输的数据中接收到版本，因此版本不会像预期的那样覆盖为 0。正如我所看到的，您需要从一开始就在您的 DTO 中实施 Version，否则它将无法工作。

希望我错了，有人可以澄清我所缺少的吗？这可以解决吗，因为我在生产中有一个没有实施版本的 DTO？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T00:13:25.520

是的，当您第一次添加信息时这可能会很棘手，`Version`因为您希望在构造函数中拥有版本号，因此每次调用都被分配其隐式版本，同时每当您反序列化到新的 DTO 时都会使用相同的构造函数。

不幸的是，由于原始 DTO 中没有版本，因此它没有序列化到线路上，因此它永远不会覆盖隐式分配的版本字段。

为了解决这个问题（并在构造函数中保留隐式分配的版本号），您需要有效地重置反序列化中使用的版本。

您可以通过覆盖`JsConfig.ModelFactory`on App_Start（即在您的 AppConfig 中）使用 JSON/JSV 序列化程序来执行此操作，这允许您控制为反序列化中使用的每个 POCO 类型创建的实例。

在这种情况下，我们希望将任何具有版本的 DTO 重置为`0`没有版本号的 DTO 被分配的方式，而具有版本号的`0`DTO 将覆盖它：

```
 JsConfig.ModelFactory = type => {
    if (typeof(IHasVersion).IsAssignableFrom(type))
    {
        return () => {
            var obj = (IHasVersion)type.CreateInstance();
            obj.Version = 0;
            return obj;
        };
    }
    return () => type.CreateInstance();
}; 
```

为了简单起见，我在`IHasVersion`这里使用了显式接口，但您也可以轻松地使用反射来检测和重新分配包含版本号的类型。

这是一个原始 DTO 的示例，其中没有 Version 属性反序列化为具有隐式分配的版本号的 DTO：

```
public class Dto
{
    public string Name { get; set; }
}

public interface IHasVersion
{
    int Version { get; set; }
}

public class DtoV1 : IHasVersion
{
    public int Version { get; set; }
    public string Name { get; set; }

    public DtoV1()
    {
        Version = 1;
    }
} 
```

现在，当您将原始 DTO 反序列化为较新`DtoV1`的 DTO 时，它保留为 0：

```
var dto = new Dto { Name = "Foo" };
var fromDto = dto.ToJson().FromJson<DtoV1>();
fromDto.Version // 0
fromDto.Name    // Foo 
```

如果您使用新的 DTO，它会填充版本号：

```
var dto1 = new DtoV1 { Name = "Foo 1" };
var fromDto1 = dto1.ToJson().FromJson<DtoV1>();
fromDto.Version // 1
fromDto.Name    // Foo 1 
```

# powershell - Powershell v3.0 管道问题

> ID：13192447
> 
> 赞同：50
> 
> 时间：2012-11-02T09:21:58.267
> 
> 标签：powershell, active-directory, powershell-3.0

我在使用此命令时遇到问题：

```
gc .\domains.txt | Get-ADDomain 
```

顾名思义，domains.txt 包含要查询的 Active Directory 列表（所有域都在同一个林中）。

如果我在我的 Windows 8 机器上运行它，一切正常，我得到预期的结果，而不是在带有 WMF 3.0 的 Windows 2008 R2 SP1 成员服务器（不是 DC）上，我只从列表中的第一个域和其他：

```
Get-ADDomain : A referral was returned from the server 
```

如果我使用以下命令查询列表中的域：

```
Get-ADDomain <Domain name here> 
```

它工作正常。

# 我的工作站

Microsoft Windows 8 企业版 (6.2.9200) x64

```
PS D:\Tools\Powershell> $PSVersionTable

Name                           Value
----                           -----
PSVersion                      3.0
WSManStackVersion              3.0
SerializationVersion           1.1.0.1
CLRVersion                     4.0.30319.18010
BuildVersion                   6.2.9200.16384
PSCompatibleVersions           {1.0, 2.0, 3.0}
PSRemotingProtocolVersion      2.2 
```

# 服务器

Microsoft Windows Server 2008 R2 标准 SP1 (6.1.7601) x64

```
PS C:\Tools\Powershell> $PSVersionTable

Name                           Value
----                           -----
WSManStackVersion              3.0
PSCompatibleVersions           {1.0, 2.0, 3.0}
SerializationVersion           1.1.0.1
BuildVersion                   6.2.9200.16398
PSVersion                      3.0
CLRVersion                     4.0.30319.269
PSRemotingProtocolVersion      2.2 
```

# 更新

如果我在服务器上运行：

```
gc .\domains.txt | %{ Get-ADDomain $_ } 
```

它运行良好

# 痕迹

```
trace-command -Name ParameterBinding { "DOMAIN_1","DOMAIN_2" | Get-ADDomain } -PSHost 
```

服务器： http: [//pastebin.com/sRVJHaCU](http://pastebin.com/sRVJHaCU)

工作站： http: [//pastebin.com/kj3JV6nV](http://pastebin.com/kj3JV6nV)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:28:43.510

我找到了一篇可能有帮助的文章。

[http://technet.microsoft.com/en-us/library/ee617224.aspx](http://technet.microsoft.com/en-us/library/ee617224.aspx)

从脚本的外观来看，您正在使用文本文件提供服务器。问题是否可能是您运行 PowerShell 脚本的 Windows 2008 服务器不在同一个域中，或者您登录的用户无权访问其他服务器所属的域？

上述文章的片段：

> - 如果指定了 Server 参数而未指定 Credential 参数： -- 域设置为指定服务器的域，并且 cmdlet 检查以确保服务器在 LocalComputer 或 LoggedOnUser 的域中。然后使用当前登录用户的凭据来获取域。当服务器不在 LocalComputer 或 LoggedOnUser 的域中时返回错误。

您可以尝试为 Get-ADDomain 命令行开关添加其他参数，例如 -Identity、-AuthType 和 -Credential

> 获取-ADDomain [-Identity] [-AuthType { | }] [-凭据] [-服务器] []

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T00:46:58.200

[Powershell v3.0 管道问题](https://stackoverflow.com/questions/13192447/powershell-v3-0-pipe-issue)

我只是尝试运行 cmdlet 'gc .\text.txt | 从我拥有的虚拟 Server 2008 R2 框中获取-ADDomain'。我以以下格式构建了一个文本文件：

```
 Domain1
 Domain2
 Domain3 
```

要确定的一件事是，每个域都在文本文件中它自己的行上。我可以理解为什么当您将 STDOUT 传送到以下位置时，一种语法会起作用：

```
%{ Get-ADDomain $_} 
```

因为您正在遍历文本文件中包含的所有信息，并且一次只能让 cmdlet 处理一个值。不幸的是，我的 Win 8 桌面上没有 RSAT 包，所以我无法从我的桌面上进行测试。希望这会有所帮助。

# castle-windsor - 温莎城堡 3.0 组件注册“服务类型”

> ID：13192449
> 
> 赞同：5
> 
> 时间：2012-11-02T09:22:11.973
> 
> 标签：castle-windsor

我正在将一些代码从 Castle 2.5.2 移动到 3.0，我有一组预定义的注册（在我的引导代码中），它们根据以下约定执行一些操作，例如：

```
container.Register
(
    AllTypes.FromAssemblyInDirectory( new AssemblyFilter( "." ) )
        .IncludeNonPublicTypes()
        .Where( t => conventions.IsViewModel( t ) && !conventions.IsExcluded( t ) )
        .WithService.Select( ( type, baseTypes ) => conventions.SelectViewModelContracts( type ) )
        .Configure( r =>
        {
                    r.Properties( PropertyFilter.IgnoreAll );

            if( conventions.IsShellViewModel( r ) )
            {
                r.LifeStyle.Is( LifestyleType.Singleton );
            }
            else
            {
                r.LifeStyle.Is( LifestyleType.Transient );
            }
        } )
); 
```

在 Windsor 2.5.2 中，ComponentRegistration 类有一个 ServiceType 属性，在 3.0 中有一个 Services 属性，但是是“内部受保护的”。

我的约定处理依赖于我需要知道哪些是服务的事实。

我怎样才能得到这些信息？

.m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:15:05.760

.WithServiceSelect 不能满足您的需求吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:06:15.147

我今天也遇到了同样的事情。像下面这样解决它，因为我们遵循一些约定，所以它很有效。虽然感觉不是很好的解决方案...

```
.Configure(x => x.Named("I"+x.Implementation.Name)) 
```

# namespaces - 没有要加载的文件——redis-namespace

> ID：13192450
> 
> 赞同：0
> 
> 时间：2012-11-02T09:22:13.680
> 
> 标签：namespaces, redis, ruby-on-rails-2

我正在努力`Rails 2.3.8`。我有以下`environment.rb`

```
config.gem "redis"
config.gem "redis-namespace", :lib => "redis/namespace" 
```

当我列出我的 redis gem 时，我看到：

```
redis (2.0.3)
redis-namespace(0.7.0) 
```

当我运行时`rake gems:install`，我收到一条错误消息：

```
no such file to load -- redis-namespace 
```

不应该要求“redis/namespace”解决问题吗？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:37:29.273

听起来好像`rake gems:install`取决于它尝试安装的 gem。

尝试使用[`rails_gem_install`](http://sleeplesscoding.blogspot.com/2010/07/install-rails-apps-dependencies-where.html)or[`bundler`](https://stackoverflow.com/questions/7067457/rails-gem-config-rake-gemsinstall-no-such-file-to-load)代替。

# javascript - 带有点赞和评论选项的评论框代码

> ID：13192452
> 
> 赞同：0
> 
> 时间：2012-11-02T09:22:24.283
> 
> 标签：javascript, asp.net, html, css

我正在创建一个网站，我想在其中包含类似于 facebook 的评论框，其中包含任何评论的回复和点赞选项。因此，我需要为此编写代码。我正在使用 C#.net 和 SQL 服务器。请如果任何1 有评论框的代码与回复和喜欢选项然后只发布代码...目前我正在使用没有回复和喜欢选项的评论框使用转发器作为在facebook或任何社交网站中的评论

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:25:47.063

为什么不使用 facebook 评论框而不是创建自己的评论框，除非您有任何 facebook 评论框无法满足的要求？

**[评论插件](http://developers.facebook.com/docs/reference/plugins/comments/)**

**对于 SEO：** 您可以通过图形 API 访问您网站上留下的所有评论。只需从 API 中获取评论并将它们呈现在评论框后面的页面正文中。

![在此处输入图像描述](../Images/e1156b81187d703a69769d8235c7d531.png)

# java - 队列线程池

> ID：13192453
> 
> 赞同：3
> 
> 时间：2012-11-02T09:22:27.777
> 
> 标签：java

> **可能重复：**
> [ThreadPool 和 JobQueue](https://stackoverflow.com/questions/13179399/threadpool-and-jobqueue)

1.  Manager 将作业指定到作业队列中（队列大小不固定）。
2.  线程由固定数量的 ThreadPool 维护。
3.  每当作业队列中有作业时，Frame 将 ThreadPool 中的线程分配给作业。
4.  如果队列中没有作业，那么线程需要等待作业到达。（重复第 3 步和第 4 步）

如果可能的话，我如何实现这些，也可以提及代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:29:11.173

您需要[`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)将您的任务排队并[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)与工作人员一起处理您的任务。

**示例源代码：**

```
 final BlockingQueue<String> queue = new LinkedBlockingQueue<String>();
    queue.put("test");// Add item here
    ExecutorService service = Executors.newFixedThreadPool(10);// specifynumber
                                                                // of thread
            int numWorkers = 10;
    for (int i = 0; i < numWorkers; i++) {
        service.submit(new Runnable() {

            @Override
            public void run() {
                while (!Thread.currentThread().isInterrupted()) {
                    try {
                        String item = queue.take();
                        // Process item
                    } catch (InterruptedException ex) {
                        Thread.currentThread().interrupt();
                        break;
                    }
                }
            }
        });
    } 
```

**解释：**

> Manager 将作业指定到作业队列中（队列大小不固定）。

*声明一个阻塞队列来保存你的 Job。`String`type 在这里代表 Job。*

```
final BlockingQueue<String> queue = new LinkedBlockingQueue<String>(); 
```

> 线程由固定数量的 ThreadPool 维护。

*`ExecutorService`与`FixedThreadPool`大小一起使用。*

```
ExecutorService service = Executors.newFixedThreadPool(10); 
```

> 每当作业队列中有作业时，Frame 将 ThreadPool 中的线程分配给作业。

*使用操作将作业提交到队列`put`。*

```
queue.put("test"); 
```

*使用`take()`阻塞的操作*

```
queue.take();//When there is job it will return the value else will get block 
```

* * *

参考：

*   [`BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)
*   [`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:32:34.673

我会使用 ExecutorService 对您的任务进行排队并管理您的线程池。

> Manager 将作业指定到作业队列中（队列大小不固定）。

向 ExecutorService 提交任务以处理每个作业，使用`submit(Runnable)`

> 线程由固定数量的 ThreadPool 维护。

A`Executors.newFixedThreadPool(n_threads)`是固定大小的线程池

> 每当作业队列中有作业时，Frame 将 ThreadPool 中的线程分配给作业。

ExecutorService 将在线程空闲时将它们分配给线程。

> 如果队列中没有作业，那么线程需要等待作业到达。

没有任务的线程是空闲的，对资源的影响很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:25:16.530

如果您使用JDK 5 或更高版本，请使用 JDK 中的[Executors 。](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)您的作业是 Callable 接口的实现。ExecutorService 是执行器的外观。

# c# - 将数据从 Excel 表传输到 SQL 数据库表时的进度条

> ID：13192459
> 
> 赞同：1
> 
> 时间：2012-11-02T09:22:57.160
> 
> 标签：c#, jquery, .net

谁能告诉我在将数据从 Excel 工作表传输到 SQL 数据库表时如何显示动画进度条？

我在`.aspx`页面中有一个表格。在该表单中，有一个`FileUpload`控件可以上传 Excel 文件。在上传该文件并将其保存在服务器上的同时，我将数据从 Excel 表传输到 SQL 表。在此传输过程中，我想显示一个`ProgressBar`并且在传输所有数据后它将自动删除..

我能做些什么来实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:35:54.650

我可能会使用 jQuery 的 ajaxForm() 提交表单。

然后，onSuccess 调用一个函数，该函数开始进一步的 AJAX 请求，以使用 JSON 轮询来自您的网络服务器的上传进度。除了有一个 URL 来处理 ASP.NET 中的文件上传之外，您还需要有另一种方法来以 JSON 格式返回某种异步工作者的进度。

获取 JSON 后，您可以将其提供给 jQueryUI 进度条。

例如，在一个 ASP .NET MVC 应用程序中，我做了这样的事情：

**在视图 Upload.aspx 中，开始提交**

```
<% using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data", id = "UploadForm" }))
   { %>
    <div>
        <input type="file" name="CSVFile" id="CSVFile" />
        <button>Upload</button>
    </div>
<% } %>

        var pb = $('#prog');
        var pbContainer = $('#pbcont');
        var pbPercent = $('#progp');
        var uploadForm = $('#UploadForm');
        var status = $('#StatusDetail');

        uploadForm.ajaxForm({
            iframe: true,
            dataType: 'jason',
            success: function (data) {
                beginProcessing($.parseJSON($(data).text()), '" + Url.Action("UploadStatus", "Upload") + @"', pb, pbContainer, status, pbPercent);
            },
            error: function (xhr, textStatus, error) {
                alert('Error: ' + textStatus);
            }
        }); 
```

**处理初始上传的控制器方法**

在这里，我正在为上传开始时创建一个唯一 ID，这样我可以稍后在我想知道它的进度时识别上传。

我正在使用我编写的一个工作类来异步处理处理 - 这是您希望异步开始将数据插入数据库的地方。

当我们到达这个控制器方法时，FileStream 应该已经到达服务器，因此我们可以将它传递给我们的工作人员以读取流、解析 CSV 并完成数据库工作。请注意，在这里，我将 StreamReader 传递给我的工作人员，以便它可以处理所有这些。

```
 // NOTE: The parameter to this action MUST match the ID and Name parameters of the file input in the view;
    // if not, it won't bind.
    [HttpPost]
    public JsonResult Upload(HttpPostedFileBase CSVFile)
    {
        try
        {
            if (CSVFile == null || String.IsNullOrWhiteSpace(CSVFile.FileName))
                return Json("You must provide the path to your CSV file", "text/plain");

            if (!CSVFile.FileName.ToLower().Contains(".csv"))
                return Json("You can only upload CSV files", "text/plain");

            Guid id = worker.BeginImport(dataReporistory, new StreamReader(CSVFile.InputStream));

            //return some JSON
            var json = new 
            {
                ID = id,
                name = CSVFile.FileName,
                size = CSVFile.ContentLength
            };

            return Json(json, "text/plain");
        }
        catch (Exception e)
        {
            return Json(Utilities.DisplayExceptionMessage(e), "text/plain");
        }
    } 
```

**返回进度更新的控制器方法**

```
 [HttpPost]
    public JsonResult UploadStatus(Guid id)
    {
        UploadJob job = Worker.GetJobStatus(id);
        return Json(job);
    } 
```

**视图中的 JavaScript 处理进度条更新**

正如您将在上面看到的，当文件完成上传时，ajaxForm.Submit() 方法将在 onSuccess 事件期间从此处调用 beginProcessing()。

它还将传递从 Upload() 控制器方法获得的 JSON，该方法告诉我们的视图在从我们的工作人员获取作业进度时要传递给更新 URL 的上传 ID。

调用 beginProcessing 后，它会做一些工作来设置进度条，但基本上随后会在设置的计时器间隔内开始调用 updateProgress()。updateProgress 是完成从网络服务器的 UploadStatus 页面获取 JSON 的所有工作的函数。

一旦 updateProgress 从网络服务器获取 JSON 更新，它会做一些工作来将其馈送到插入到页面上 div 中的 jQuery UI 进度条中。

```
<div id="pbcont">
    <p style="display: inline-block;"><strong>Processing...</strong></p>
    <h3 style="display: inline-block;" id="progp"></h3>
    <div id="prog"></div>
    <br />
    <div id="StatusDetail"></div>
</div>

function beginProcessing(response, url, pb, pbContainer, statusContainer, pbPercent) {
    if (!response.ID) {
        alert('Error: ' + response);
        return;
    }

    pb.progressbar({
        value: 0
    });

    pbContainer
        .css('opacity', 0)
        .css('display', 'block');

    //Set the interval to update process.
    var hasUpdated = false;
    var intervalID = setInterval(function () {
        updateProgress(url + '/' + response.ID, pb, statusContainer, pbPercent, intervalID);
    }, 500);
}

function updateProgress(url, pb, statusContainer, pbPercent, intervalID) {
    //Make an AJAX post to get the current progress from the server

    $.post(url,
    function (job) {
        var newValue = 0;
        var currentValue = pb.progressbar('value');

        //The percentage value retrived from server:
        newValue = (job != null && job.TotalItems != 0 ? (job.ProcessedItems / job.TotalItems * 100) : 0);

        if (newValue > 0)
            hasUpdated = true;

        if (hasUpdated && job == null) {
            newValue = 100;
            statusContainer.html("<strong>Status:</strong> Finished");
            clearInterval(intervalID);
        }

        if (!hasUpdated)
            currentValue = currentValue + 1;

        newValue = Math.max(currentValue, newValue);
        pb.progressbar("value", newValue);
        pbPercent.text(Math.round(newValue, 0) + '%');
        if (job != null)
            statusContainer.html("<strong>Upload:</strong> " + job.Status);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:35:05.853

您可以尝试以下方法：

1) 在 FileLoadButton 上显示 ProgressBar 单击使用 javascript

2) 当服务器完成加载文件时，在 .aspx.cs`ScriptManager.RegisterStartupScript`中使用运行 javascript 来隐藏 ProgressBar

# android - 同一个列表项中的多个 TextView

> ID：13192465
> 
> 赞同：2
> 
> 时间：2012-11-02T09:23:33.527
> 
> 标签：android

我正在使用`ListView`带有数组适配器的 a 来显示多个列表项。我想根据[图片](http://tinypic.com/r/mr8rk8/6)`TextView`在列表项中有多个

我目前正在使用似乎不适合的线性布局......相对布局会帮助我实现这一目标吗？

示例代码或教程链接会很酷

干杯 ListView xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listViewTest"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout>

ArrayAdapter xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="89dp"
        android:layout_marginLeft="4px"
        android:layout_marginRight="10px"
        android:layout_marginTop="4px"
        android:layout_weight="0.34"
        android:src="@drawable/ic_launcher" >

    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_weight="0.97"
        android:gravity="center"
        android:text="@+id/label"
        android:textSize="30dp" >

    </TextView>

</LinearLayout> 
```

我正在尝试在 Eclipse 中使用图形布局选项卡在现有 textView 下添加另一个 textView，但我的 noobieness 妨碍了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:31:56.000

按照链接。它会帮助你..

[android 多选ListView & Textview](https://stackoverflow.com/questions/10481066/android-multiple-selection-listview-textview)

和

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

列表操作的 Main.xml

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="785dp"
            android:choiceMode="multipleChoice" >
        </ListView>
    </LinearLayout> 
```

和 Row.xml 作为，..

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TableRow>

    <TextView
        android:id="@+id/StudNo"
        android:layout_width="50px"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:padding="5px" />

</TableRow>
  <TableRow>
    <TextView
        android:id="@+id/StudNo"
        android:layout_width="50px"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:padding="5px" />

</TableRow>

  </TableLayout> 
```

并尝试使用自定义代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:34:07.273

链接的图片只有两个`TextViews`在另一个下方。如果您**只**使用2 `TextViews`，那么垂直`LinearLayout`应该可以解决问题。但是，如果您打算在其中使用两个以上，`Views`那么`ListItem`我建议您使用`Relative Layout`它，因为在将它们相互对齐时，它在保持多个子视图方面更加灵活。

您可以在此处遵循 Google 提供的一个非常简单的教程： [相对布局](http://developer.android.com/guide/topics/ui/layout/relative.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:43:55.307

此链接在单个列表视图中使用多个文本...

[http://publicstaticdroidmain.com/2011/12/building-a-custom-multi-line-listview-in-android/](http://publicstaticdroidmain.com/2011/12/building-a-custom-multi-line-listview-in-android/)

使用代码如下..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center_horizontal"
    android:text="Custom ListView Example" />

<ListView
    android:id="@+id/srListView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

和，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:paddingBottom="10dip"
android:paddingLeft="10dip"
android:paddingTop="10dip" >

<TextView
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="#C20000"
    android:textSize="14sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/cityState"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/phone"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:49:03.190

为包含两个文本视图的列表项制作 xml 布局

```
 **listItem.xml**

    <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:orientation="horizontal"
            android:gravity="center"
            android:layout_height="fill_parent" >
            <TextView
                android:id="@+id/textview1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="@android:color/black"

                android:gravity="center"
                android:text=""
                android:textAppearance="?android:attr/textAppearanceMedium" />
            <TextView
                android:id="@+id/textview2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="@android:color/black"

                android:gravity="center"
                android:text=""
                android:textAppearance="?android:attr/textAppearanceMedium" />

        </LinearLayout>

  ///*now in set this layout in your listview using Adapter as following*/
        mlistview.setAdapter(new ArrayAdapter<String>(this,
                R.layout.spinneritem, StringArray) {

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View v = null;
                if (v == null) {
                    if (DiscountActivity.this != null) {
                        LayoutInflater vi = (LayoutInflater) DiscountActivity.this
                                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        v = vi.inflate(R.layout.listItem, null);
                    }
                }

                TextView txtview1 = (TextView) v.findViewById(R.id.textview1);
                TextView txtview2 = (TextView) v.findViewById(R.id.textview2);

                txtview1.setText("textview1");
                txtview2.setText("textview2");

                v.setTag(campaign);
                return v;
            }

        }); 
```

# javascript - 如何抑制“{variable} 最好用点表示法编写。”

> ID：13192466
> 
> 赞同：64
> 
> 时间：2012-11-02T09:23:36.733
> 
> 标签：javascript, syntax, properties, jshint

是否有选项和/或如何抑制如下错误？

> 175,14:['tracker'] 最好用点表示法编写。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-02T09:26:02.847

如果它是一项功能而不是错误，请将其放在文件的顶部。

```
/*jshint sub:true*/ 
```

如果它是一个错误，你应该重构你的代码

```
foo['tracker'] = bar // from this...
foo.tracker = bar;   // to this! 
```

关于原因的好帖子：[https ://stackoverflow.com/a/2001410/94668](https://stackoverflow.com/a/2001410/94668)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-26T17:48:15.707

在 JSHint 1.0.0 及更高版本中，您可以使用[特殊选项语法](http://jshint.com/docs/#options)忽略任何警告。此警告的标识符是*W069*。

这意味着您可以告诉 JSHint 不要使用该`/*jshint -W069 */`指令发出此警告。

您甚至可以包装几行代码，然后重新启用警告，如下例所示（并说明未来您为什么​​这是一个好主意）：

```
/*jshint -W069 */
/*Disable Warning Justification:
    Using bracket notation so Google Closure Compiler 
    ADVANCED_OPTIMIZATIONS will keep the original property names. */
obj['prop1'] ='foo';
obj['prop2'] ='bar';
/*jshint +W069 */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-21T19:51:38.643

我假设您询问的是 Dreamweaver 或其他编辑器。

**织梦者**

你可以去**编辑**->**首选项**-> **Linting**

在下拉列表中选择**JS并点击****Edit & Apply changes**

寻找

```
 "sub": false, 
```

并将其更改为**true**。保存文件，该通知将消失。

如果您有其他想要编辑的 Linting 内容，您可以在[https://jshint.com/docs/options/找到一个有用的列表。](https://jshint.com/docs/options/)

# c# - GridView 单元格宽度始终为 0

> ID：13192470
> 
> 赞同：0
> 
> 时间：2012-11-02T09:23:42.340
> 
> 标签：c#, asp.net, gridview

我有一个`GridView`，其中每列的宽度是动态的，并根据`DataSet`. 我需要获取每列的宽度，但列/单元格宽度始终为“0”，大概是因为我没有设置宽度属性。

有没有解决的办法？

这是代码：

```
 gridResult.DataSource = dtResult;
    gridResult.DataBind();

    for (int i = 0; i < gridResult.Rows.Count; i++)
    {
        for (int j = 0; j < gridResult.Rows[i].Cells.Count; j++)
        {
            string encoded = gridResult.Rows[i].Cells[j].Text;
            gridResult.Rows[i].Cells[j].Text = Context.Server.HtmlDecode(encoded);

        }
    }

    GridView2.ShowHeaderWhenEmpty = true;

    int tblCols = gridResult.HeaderRow.Cells.Count;

    Table tbl = new Table();
    TableRow tr = new TableRow();
    double check = gridResult.Columns[0].ItemStyle.Width.Value;
    double check2 = gridResult.Rows[0].Cells[0].Width.Value;
       // TableRow tr = new TableRow();
        for (int j = 0; j < tblCols; j++)
        {

            // Add the table to the placeholder control
            TableCell td = new TableCell();
            td.Text = gridResult.HeaderRow.Cells[j].Text;
            td.Attributes.Add("width", gridResult.HeaderRow.Cells[j].Width + "px");
            td.HorizontalAlign = HorizontalAlign.Center;
            tr.Cells.Add(td);
            td.BorderWidth = 1;
            td.BorderColor = System.Drawing.Color.Black;

        }
        tbl.Rows.Add(tr);
    PlaceHolder1.Controls.Add(tbl); 
```

# javascript - 我如何获得特定类的多个 id？

> ID：13192471
> 
> 赞同：-5
> 
> 时间：2012-11-02T09:23:43.150
> 
> 标签：javascript, html, web-applications

这就是我现在正在做的事情。

HTML：

```
 <div class="animateripad" id="ipad">
 <div class="animateripad" id="pong"> 
```

Javascript：

我正在使用“document.getElementById”，但它只返回一个 id。我想获取两个 id，然后在 if 条件下使用它们

例如

```
if (id=="ipad")
{
do something.
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:25:15.600

HTML 中不应该有具有相同 id 的元素。这是您应该使用类的地方。它不是有效的 HTML

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:33:10.483

`getElementById`如果要获取具有特定类的所有元素，则不应使用。使用`getElementsByClassName`：

```
function getIdsForClass(classStr)
{
   var i, all = document.getElementsByClassName(classStr),ids = [];
   for(i=0;i<all.length;i++)
   {
       ids.push(all[i].id);//<-- push id as a string
       //or
       ids.push(all[i]);//<-- push reference to dom element
   }
   return ids;
}
var animateripadIds = getIdsForClass('animateripad');
//if you used ids.push(all[i].id);
animateripadIds[0];//<-- ipad
//if you pushed all[i]
animateripadIds[0].id;//<-- ipad 
```

如果要全部处理，取决于 id：

```
for (var i=0;i<animateripadsIds.length;i++)
{
    switch(animateripadsIds[i].id)
    {
        case 'ipad':
            //do something with animateripadsIds[i]
        break;
        case 'pong':
            //do something else with animateripadsIds[i]
        break;
        case undefined:
            //do nothing?
        break;
        default: 
            //?
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:28:40.917

Id 是独一无二的，因此拥有两个相同的 DOM 元素是错误的。您应该改用“类”，它在语义上是正确的，您可以选择多个。

编辑：document.getElementById 返回一个 Dom 元素。所以你应该这样做：

```
var ping = document.getElementById('ping');
var pong = document.getElementById('pong'); 
```

如果您使用 getElementById。

如果要在类中选择元素，则不应使用 document.getElementById。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:25:24.297

ID 应该唯一标识一个元素，因此您不应该在一个元素上有两个 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:34:37.117

**document.getElementById**

通过其 ID 返回对元素的引用。

**句法**

```
element = document.getElementById(id); 
```

在哪里

`element`是对 Element 对象的引用，如果具有指定 ID 的元素不在文档中，则为 null。

`id`是一个区分大小写的字符串，表示正在查找的元素的唯一 ID

.

# security - IIS 7 X509 证书问题

> ID：13192472
> 
> 赞同：2
> 
> 时间：2012-11-02T09:23:50.550
> 
> 标签：security, ssl, iis-7, x509, certificate

我正在构建一个需要通过 https 调用第 3 方 Web 服务的站点。该服务需要 X509 证书进行身份验证。

我可以使用控制台应用程序或在 Visual Studio Web 服务器中运行的 Web 应用程序成功调用该服务并获得响应，这向我表明第三方提供的代码和证书都可以。

一旦我在 IIS 中部署站点，它就无法连接到服务，我收到“请求被中止：无法创建 SSL/TLS 安全通道”错误。我花了几个小时试图弄清楚这一点，假设它与在网络服务下运行的 IIS 应用程序池等权限相关。

证书安装在本地机器存储中，而不是当前用户，并且我已使用 winhttpcertcfg 工具并在 MMC > Manage Private Keys 中手动授予网络服务（还添加了每个人都是绝望的！），因此我确信网络服务帐户有权访问证书。

我还使用了 FindPrivateKey 工具并检查了物理 windows 文件和权限看起来没问题！我尝试在配置中使用身份模拟，使用我的 Windows 帐户，但这并没有什么不同。

我正在用这个拔头发，有人可以给我任何关于下一步尝试的建议吗？

干杯

# java - 制作 Set 的一般副本 在构造函数中

> ID：13192474
> 
> 赞同：2
> 
> 时间：2012-11-02T09:23:57.047
> 
> 标签：java, collections, clone, defensive-copy

我没有找到这个特定问题的直接答案，所以......假设类：

```
class MyClass {
    private final Set<String> tags;

    MyClass(Set<String> initialTags) {
        this.tags = ???(initialtags);
    }
} 
```

我只想要一个副本而不关心集合的确切实现，开销最小，所以基本上是任何内部状态 initialTags 的直接副本。我不能使用`clone`，因为 Set 是接口。这是可能的，还是我必须使用类似的东西`new HashSet<String>(tags);`，需要对类型做出决定？

假设：设置项目类型被限制为不可变。我可以相信调用者*不会*传递一个损坏的`initialTags`Set 实现，并且我可以相信它有足够好的性能用于此类中的任何内部使用。

我正在考虑尝试反射和克隆（），但这似乎有点脏......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:39:09.773

Guava为此提供了一种方法：

```
 /**
   * Returns an immutable set containing the given elements, in order. Repeated
   * occurrences of an element (according to {@link Object#equals}) after the
   * first are ignored. This method iterates over {@code elements} at most once.
   *
   * <p>Note that if {@code s} is a {@code Set<String>}, then {@code
   * ImmutableSet.copyOf(s)} returns an {@code ImmutableSet<String>} containing
   * each of the strings in {@code s}, while {@code ImmutableSet.of(s)} returns
   * a {@code ImmutableSet<Set<String>>} containing one element (the given set
   * itself).
   *
   * <p>Despite the method name, this method attempts to avoid actually copying
   * the data when it is safe to do so. The exact circumstances under which a
   * copy will or will not be performed are undocumented and subject to change.
   *
   * @throws NullPointerException if any of {@code elements} is null
   */
  public static <E> ImmutableSet<E> copyOf(Iterable<? extends E> elements) {
    return (elements instanceof Collection)
        ? copyOf(Collections2.cast(elements))
        : copyOf(elements.iterator());
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:05:10.370

根据 initialTags 的预期大小，您可能更喜欢不同的实现；下面的代码显示了基于构造函数的副本的更快时间`i is < 100000`，但克隆在 时更快`i > 1000000`。如果您真的想使用`clone`，您可以始终使用`isinstance`来确定它是（6）个众所周知的具体实现（即实现`cloneable`）中的哪一个，除此之外，您无法保证`initialTags`拥有它。

```
static Set<String> byCloning(HashSet<String> initialTags) {

    return (Set<String>) initialTags.clone();
}

static Set<String> byConstructor(Set<String> initialTags) {

    return new HashSet<String>(initialTags);
}

public static void main(String[] args) {

    int N = Integer.parseInt(args[0]);

    HashSet<String> mySet = new HashSet<String>();
    for (int n = 0 ; n < N ; n++) mySet.add(Integer.toString(n));

    long start = System.currentTimeMillis();
    byCloning(mySet);
    long end = System.currentTimeMillis();
    System.out.println(" time take in milli seconds for cloning = " + (end-start) );

    start = System.currentTimeMillis();
    byConstructor(mySet);
    end = System.currentTimeMillis();
    System.out.println(" time take in milli seconds by constructor = " + (end-start) );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:31:57.443

根据您需要的集合访问类型来决定类型，或者您可以尝试使用[Collections.unmodifiableSet](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableSet%28java.util.Set%29) () ：

```
class MyClass {
    private final Set<String> tags;

    MyClass(Set<String> initialTags) {
        this.tags = Collections.unmodifiableSet(initialTags);
    }
} 
```

# perl - Perl 捕获运行时错误

> ID：13192476
> 
> 赞同：1
> 
> 时间：2012-11-02T09:24:10.523
> 
> 标签：perl, runtime, try-catch

我正在编写一个 perl 脚本来打开一个文本文件并对其执行一些转换。每当文本文件不可用时，脚本都会引发错误，提示“不存在此类文件或目录”。

我想抓住那个错误然后创建文本文件。

```
while (<>) {       #i am passing filename from the batch file
    #some task
}
# if the above while loop fails it throws no such file or directory exists error. I want to  catch it and do some other task. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:29:44.840

这些特定的错误是由后面的“魔术”发送给 STDERR 的警告`ARGV`。为什么不直接重定向 STDERR？

```
perl script.pl foo bar 2>error.log 
```

如果这还不够好，您将不得不开始使用`$SIG{__WARN__}`(yuck) 或停止使用`ARGV`(`<>`没有文件句柄默认为 using `ARGV`)。

```
for my $argv (@ARGV ? @ARGV : '-') {
    open(my $argv_fh, $argv)
       or do {
             ... print message to log file ...
             next;
          };

    while (<$argv_fh>) {
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:56:59.653

与其尝试捕获文件不存在的警告，不如尝试通过[getopt传递文件路径并在使用](http://perldoc.perl.org/Getopt/Std.html)[文件测试运算符](http://perldoc.perl.org/functions/-X.html)打开之前测试文件的存在/可读性。

编辑：更新示例

```
#!/usr/bin/perl

use strict;
use warnings;
use Getopt::Std;

my %opts;
getopt('f', \%opts);

die "use -f to specify the file" unless defined $opts{f};

if(! -e $opts{f} ){
    print "file doesn't exist\n";
}
elsif(! -r $opts{f} ){
    print "file isn't readable\n";
}
elsif(! -f $opts{f} ){
    print "file is not a normal file\n";
}
else{
    open( my $fh, '<', $opts{f} ) or print "whatever error handling logic\n";
} 
```

# java - 在 Java 中调用存储的函数错误

> ID：13192477
> 
> 赞同：0
> 
> 时间：2012-11-02T09:24:16.557
> 
> 标签：java, oracle, function, stored-procedures, jdb

我正在尝试在 Java 中调用存储函数。函数没有包，它被放在用户（模式） USER 下并返回一个游标。我尝试了两种方法来调用它，但这些都不起作用。

第一

```
Query query = coreDao.getEntityManager().createNativeQuery("{call USER.gen_rephead_sm_task_report(?, ?) }");
query.setParameter(1, dateFrom);
query.setParameter(2, dateTo);
List<?> queryResult = query.getResultList(); 
```

我有一个`not a procedure or not defined`

我也尝试过这种方法

```
select gen_rephead_sm_task_report(?, ?) from dual 
```

作为 createNativeQuery 参数，但结果相同。

第二个

```
Connection connection = dataSource.getConnection();//javax.sql.DataSource
CallableStatement statement = connection.prepareCall("{? = call USER.gen_rephead_sm_task_report(?, ?) }");
statement.registerOutParameter(1, OracleTypes.CURSOR);//oracle.jdbc.OracleTypes
statement.setDate(2, new java.sql.Date(dateFrom.getTime()));
statement.setDate(3, new java.sql.Date(dateTo.getTime()));
statement.executeQuery();
ResultSet set = ((OracleCallableStatement) statement).getCursor(1); 
```

我`ClassCastException`在最后一行得到了（显然 OracleCallableStatement 没有实现 CallableStatement）。那么我应该在这里使用哪些类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:14:14.337

好的，所以我找到了一个可以解决我的问题的链接（[iDevelopment](http://www.idevelopment.info/data/Programming/java/jdbc/PLSQL_and_JDBC/RefCursorExample.java)）。这是我用的

```
connection = dataSource.getConnection();
CallableStatement statement = connection.prepareCall(TIMESHEET_QUERY);
statement.registerOutParameter(1, OracleTypes.CURSOR);
statement.setDate(2, new java.sql.Date(dateFrom.getTime()));
statement.setDate(3, new java.sql.Date(dateTo.getTime()));
statement.execute();

ResultSet set = (ResultSet) statement.getObject(1); 
```

一切都是直接的，`javax.sql.*`因此不需要 Oracle 特定的 API。

# php - Magento 产品订购报告 - 捆绑产品

> ID：13192481
> 
> 赞同：0
> 
> 时间：2012-11-02T09:24:33.673
> 
> 标签：php, magento

我正在考虑自定义 Magento 报告。我了解默认产品订单报告从汇总数据表中获取产品销售数据。但是，这些仅包含捆绑中简单产品类型的信息，而不是捆绑产品 ID 本身。

如何为捆绑产品销售生成一份报告？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:49:12.703

看看[http://magentocoder.jigneshpatel.co.in/create-custom-reports-in-magento-admin/](http://magentocoder.jigneshpatel.co.in/create-custom-reports-in-magento-admin/)

你应该可以通过改变这行代码来完成你想要的

```
$compositeTypeIds = Array (
                    '0' => 'grouped',
                    '1' => 'simple',
                    '2' => 'bundle'
                    );

$productTypes = $this->getConnection()->quoteInto(' AND (e.type_id NOT IN (?))', $compositeTypeIds); 
```

到

```
$compositeTypeIds = Array (
                    '2' => 'bundle'
                    );

$productTypes = $this->getConnection()->quoteInto(' AND (e.type_id IN (?))', $compositeTypeIds); 
```

# eclipse - 让 gwt hibernate 示例代码与 eclipse 一起工作

> ID：13192482
> 
> 赞同：2
> 
> 时间：2012-11-02T09:24:48.183
> 
> 标签：eclipse, hibernate, gwt

我从 GWT 和休眠开始。我正在阅读[https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)上的教程。

我下载了教程提供的示例代码 (http://google-web-toolkit.googlecode.com/files/gwt_hibernate_base.zip)。这是一个简单的音乐商店，您可以在其中添加帐户和记录。通过执行以下命令，我可以运行它并成功地将帐户和记录添加到数据库中：

```
(in the data directory) java -cp ../lib/hsqldb.jar org.hsqldb.Server

ant build hosted 
```

这是用于构建它的 build.xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<project name="Guestbook" default="build" basedir=".">

  <!-- Define gwt.home, gwt.dev.jar, appengine.sdk.home -->
  <property file="build.properties"/>

  <path id="project.class.path">
    <pathelement location="war/WEB-INF/classes"/>
    <pathelement location="${gwt.home}/gwt-user.jar"/>
    <!-- Add any additional non-server libs (such as JUnit) -->
    <fileset dir="war/WEB-INF/lib">
      <include name="**/*.jar"/>
    </fileset>
  </path>

  <target name="libs" description="Copy libs to WEB-INF/lib">
    <mkdir dir="war/WEB-INF/lib" />
    <copy todir="war/WEB-INF/lib" file="${gwt.home}/gwt-servlet.jar" />
    <!-- Add any additional server libs that need to be copied -->
    <copy todir="war/WEB-INF/lib" flatten="true">
      <fileset dir="lib/">
        <include name="**/*.jar"/>
      </fileset>
    </copy>
  </target>

  <target name="javac" depends="libs" description="Compile java source">
    <mkdir dir="war/WEB-INF/classes"/>
    <javac srcdir="src" includes="**" encoding="utf-8"
        destdir="war/WEB-INF/classes"
        source="1.5" target="1.5" nowarn="true"
        debug="true" debuglevel="lines,vars,source">
      <classpath refid="project.class.path"/>
    </javac>
  </target>

  <!-- can add additional arguments like -logLevel INFO or -style PRETTY -->
  <target name="gwtc" depends="javac" description="GWT compile to JavaScript">
    <java failonerror="true" fork="true" classname="com.google.gwt.dev.Compiler">
      <classpath>
        <pathelement location="src"/>
        <path refid="project.class.path"/>
        <pathelement location="${gwt.home}/${gwt.dev.jar}"/>
      </classpath>
      <!-- add jvmarg -Xss16M or similar if you see a StackOverflowError -->
      <jvmarg value="-Xmx256M"/>
      <arg value="com.google.musicstore.MusicStore"/>
    </java>
  </target>

  <target name="hosted" depends="javac" description="Run hosted mode">
    <java failonerror="true" fork="true" classname="com.google.gwt.dev.DevMode">
      <classpath>
        <pathelement location="src"/>
        <path refid="project.class.path"/>
        <pathelement location="${gwt.home}/${gwt.dev.jar}"/>
      </classpath>
      <jvmarg value="-Xmx256M"/>
      <arg value="-startupUrl"/>
      <arg value="MusicStore.html"/>
      <arg value="com.google.musicstore.MusicStore"/>
      <!-- Additional arguments like -style PRETTY or -logLevel DEBUG -->
    </java>
  </target>

  <target name="build" depends="gwtc" description="Build this project" />

  <target name="clean" description="Cleans this project">
    <delete dir="war/WEB-INF/classes" failonerror="false" />
    <delete dir="war/musicstore" failonerror="false" />
  </target> 
```

现在我想让这个简单的例子在 Eclipse 中工作。我使用 gwt eclipse 插件创建了一个名为 MusicStore 的项目。然后我复制了教程文件而不更改它们。我无法发布图片，但这里是我的 Eclipse 项目结构的链接：

[http://oi50.tinypic.com/t6rn2w.jpg](http://oi50.tinypic.com/t6rn2w.jpg)

再次，我从跑步开始

```
(in the data directory) java -cp ../lib/hsqldb.jar org.hsqldb.Server 
```

然后我尝试在 Eclipse 中运行我的项目，但休眠不起作用。当我尝试在 UI 中添加帐户时，它会提示“保存帐户失败”并且我收到错误 java.lang.NoClassDefFoundError: org/hibernate/Session。

请让我知道我应该如何让示例代码与 eclipse 一起工作。我认为许多刚接触 hibernate 的用户也会想要这样做。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:29:49.370

基本上eclipse找不到你的hibernate库。那是因为您的 build.xml 用于构建战争文件。Eclipse 不会读取它，因此它没有任何构建信息。

一个快速的解决方案是转到 Eclipse 中的“构建路径”属性，并确保您的 /lib 目录包含在“库”选项卡中。然后 eclipse 会知道你在哪里保存你的库。

更好的解决方案是使用 Maven 之类的东西。然后 Eclipse 的 Maven 插件将自动查看 Maven 构建文件并配置 Eclipse 项目，以便它可以检测库的保存位置等......

# c# - Roslyn CTP 是否仍可用于 Visual Studio 2010 SP1

> ID：13192484
> 
> 赞同：4
> 
> 时间：2012-11-02T09:24:54.223
> 
> 标签：c#, visual-studio-2010, roslyn

我的 Google-fu 失败了：我只能找到与 Visual Studio 2012 兼容的下载。

我记得它最初适用于 2010 年：

[介绍 Microsoft “Roslyn” CTP - Visual Studio 博客 - 网站主页 - MSDN 博客](http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)

Roslyn CTP 是否仍可用于 VS2010 SP1？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T09:27:30.083

[最新版本不支持 Visual Studio 2010](https://blogs.msdn.com/b/csharpfaq/archive/2012/09/17/microsoft-quot-roslyn-quot-september-2012-ctp-now-available.aspx)，现在 Visual Studio 2012 已经推出：

> 继上周三[正式发布](http://msdn.com/vstudio)Visual Studio 2012 之后，我们很高兴地宣布 Roslyn 2012 年 9 月 CTP 现在[可供](http://msdn.com/roslyn)下载，并[提供](http://go.microsoft.com/fwlink/?LinkID=228400)对 VS 2012 RTM 的支持。请注意，此 CTP 不再支持 Visual Studio 2010。

[NuGet](https://nuget.org/packages/Roslyn)上仍然可以使用较旧的二进制文件（一直向下滚动到版本历史记录），它仍应与 VS2010 兼容，但如上所述，这些是较旧的版本。必须与时俱进，他们说...

# c# - WPF 模拟 Application.Activated 事件

> ID：13192491
> 
> 赞同：0
> 
> 时间：2012-11-02T09:25:31.870
> 
> 标签：c#, wpf

我想`Application.Activated`在 WPF 中使用事件，但我没有 Application 对象或 Windows。其他元素可以使用这个事件还是有机会模拟激活的事件？

# objective-c - 如何从 Facebook API 中仅选择 1 个朋友 - FriendPickerSample？

> ID：13192498
> 
> 赞同：1
> 
> 时间：2012-11-02T09:25:53.727
> 
> 标签：objective-c, xcode, facebook, ios-simulator

提前感谢您帮助我

我是 iOS 开发和开发与 Facebook 有一定联系的游戏的新手。我从 Facebook 下载 Facebook SDK 并用 XCode 执行 FriendPickerSampedle，我可以得到我选择的朋友的名字，但问题是，如何从列表中只选择一个朋友？

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:15:59.357

来自：[https ://developers.facebook.com/docs/reference/ios/3.0/class/FBFriendPickerViewController/](https://developers.facebook.com/docs/reference/ios/3.0/class/FBFriendPickerViewController/)

FBFriendPickerViewController 有一个属性： allowedMultipleSelection 一个布尔值，指定是否启用多选。

@property (nonatomic) BOOL 允许MultipleSelection；

```
FBFriendPickerViewController *fbfriendsVC = [[FBFriendPickerViewController alloc] init];
fbfriendsVC.allowsMultipleSelection = NO; 
```

# objective-c - 自定义框架到外部类

> ID：13192499
> 
> 赞同：0
> 
> 时间：2012-11-02T09:25:58.423
> 
> 标签：objective-c, ios, frameworks, abstract-class, external

[我一直在使用这个有用的指南](http://codefriend.blogspot.de/2011/09/creating-ios-framework-with-xcode4.html)为我的项目创建一个很好的静态自定义框架

但现在我意识到它需要访问**外部类**的几个方法。

那么如何处理呢？我应该创建一个像[这里](https://stackoverflow.com/questions/1034373/creating-an-abstract-class-in-objective-c)显示的抽象接口并将其放入框架中吗？*所以我可以访问这个外部类*的一些方法吗？

还是我应该以其他方式进行？喜欢使用一些*框架依赖项*？

以前有人遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T12:48:50.797

**使用抽象接口工厂**等设计模式解决了问题，[如下](http://www.oodesign.com/factory-pattern.html)所示！

# android - 在Android中查询特定包的API版本

> ID：13192500
> 
> 赞同：0
> 
> 时间：2012-11-02T09:25:59.780
> 
> 标签：android, api, package

根据[链接](https://stackoverflow.com/questions/3423754/retrieving-android-api-version-programmatically)，我尝试了以下代码

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.FROYO){
    // Do something for froyo and above versions
} else{
    // do something for phones running an SDK before froyo
} 
```

但它只获取当前包的当前 API 版本。有没有办法让我通过其他方式查询其他包 API 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:15:24.840

> 但它只获取当前包的当前 API 版本。

不，它获取设备上运行的操作系统的 API 级别。

> 有没有办法让我通过其他方式查询其他包 API 版本？

Android中没有这样的概念。

> 这意味着我想知道我的 Android 系统中特定应用程序的 API 版本，因为我目前正在使用包管理器来检索包名称

Android中没有这样的概念。

> 是的，我的具体问题是因为我必须检测到 android.WRITE_EXTERNAL_STORAGE 权限，所以我必须为 API 级别 < 4 和 API 级别 > 4 做某些事情

欢迎您使用您的问题中的代码，根据设备的 API 级别在您的应用程序中“做某些事情”。欢迎所有其他应用程序根据设备的 API 级别做自己的“某些事情”。

# javascript - 寻找像stackoverflow这样的鼠标悬停功能

> ID：13192515
> 
> 赞同：2
> 
> 时间：2012-11-02T09:27:11.753
> 
> 标签：javascript, jquery, tooltip, mouseover

我喜欢 StackOverflow 的悬停效果。

![在此处输入图像描述](../Images/f9a638aaab92182d69ef40de65ae1011.png)

我想在我的网络应用程序中使用类似的功能。有人可以让我知道吗？这个功能叫什么？有没有可用的图书馆？我使用过[jQuery Tooltip](http://jqueryui.com/tooltip/)，但对它印象不深。

目前我在我的应用程序中使用[了 overLib](http://www.bosrup.com/web/overlib/)，它已经很老了。

**编辑：** Impressed 在这里听起来不太好，**我只是想要像 stackoverflow 这样的鼠标悬停效果**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:00:54.790

新的 jQuery UI 工具提示相当不错：http: [//jqueryui.com/tooltip/#custom-style](http://jqueryui.com/tooltip/#custom-style)

动画是可控的，工具提示是可样式化的，你几乎可以像工具提示一样模仿 StackOverflow。

请注意，我将您链接到“自定义样式”示例。它向您展示了如何为工具提示制作自定义样式。

此外，默认情况下，工具提示显示元素的标题属性。有一个示例： http: [//jqueryui.com/tooltip/#custom-content](http://jqueryui.com/tooltip/#custom-content)以不同方式设置自定义内容以向您显示一些选项。

我不确定缺少什么功能。

编辑：示例站点上的自定义内容演示存在错误，请在全页视图中检查：http: [//view.jqueryui.com/menubar/demos/tooltip/custom-content.html](http://view.jqueryui.com/menubar/demos/tooltip/custom-content.html)

EDIT2：**新解决方案**

看着安东的回答，我认为这可以通过在原始 div 中添加工具提示的 div 并引入 hoverintent 来正确完成。还需要对代码进行一些清理。检查：http: [//jsbin.com/anegip/2/edit](http://jsbin.com/anegip/2/edit)

[http://jsbin.com/anegip/3/edit](http://jsbin.com/anegip/3/edit)

只需一点设计，这就是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-10T07:28:57.127

我知道这很旧，但我一直在寻找同样的东西，而且......如果有人想要看起来像*StackOverflow*的标签工具提示的东西......（你为什么不呢？他们太棒了）

演示：http: [//jsbin.com/korehubi/10](http://jsbin.com/korehubi/10)

代码：http: [//jsbin.com/korehubi/10/edit](http://jsbin.com/korehubi/10/edit)

通过查看 StackOverflow 的代码精心复制。

用法：

```
<div class="firstElement">The thing to hover over.</div>
<div class="coolTip" id="firstElement">This is the tooltip content.</div> 
```

*   将“coolTip”类分配给工具提示 div。
*   还要为其分配一个与您要悬停的元素上的类集相匹配的 ID。
*   `coolTips()`在页面加载时运行。

注意上面例子中tooltip div的内容只是为了演示使用。您需要对工具提示内容使用 HTML 标记，如 jsbin 链接中所示，以便拥有 StackOverflow 格式的工具提示。您还需要那里显示的所有 CSS。

享受 ：）

**更新：**现在检查工具提示是否会从窗口边框泄漏，并在这些情况下从右侧或底部进行动画处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:37:14.900

请看看这个插件。使用它可以达到与stackoverflow相同的效果。 [点击这里](http://jquery.bassistance.de/tooltip/demo/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:39:50.973

只需使用[(link)](http://www.kriesi.at/archives/create-simple-tooltips-with-css-and-jquery)自己制作即可。根据您的需要添加 html 和自定义 css。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:54:05.653

您可以`.animate`像我在 jsfiddel [http://jsfiddle.net/qJ8NB/1/中制作的这个演示一样使用](http://jsfiddle.net/qJ8NB/1/)

只需在 div 上添加一些漂亮的 css，您就可以让它看起来像 SO。

这是一个**更新** [http://jsfiddle.net/qJ8NB/11/](http://jsfiddle.net/qJ8NB/11/)

# objective-c - Objective-C: .a 超过 armv6/7 的 fat 文件

> ID：13192521
> 
> 赞同：0
> 
> 时间：2012-11-02T09:27:34.953
> 
> 标签：objective-c, xcode, static-libraries, armv6

虽然我在 XCode 中设置了我的静态库项目来构建 armv6、armv7、i386 和 x86_64，但它并没有构建完整的 fat 文件:-(

`lipo -info lib...a`告诉我这是一个带有 armv6 和 armv7 的胖文件，没有别的，里面没有更多的架构。

如何将它们全部放入一个文件中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:31:51.313

您可能设置了“有效架构”( `VALID_ARCHS`) 构建设置来缩小构建目标的架构集。

# linux - 分析接管原始磁盘的 vmcore

> ID：13192522
> 
> 赞同：1
> 
> 时间：2012-11-02T09:27:41.323
> 
> 标签：linux, linux-kernel, crash-dumps

我有一台 Red Hat Linux 机器的核心转储 (vmcore) 接管了原始磁盘分区。生成了 vmcore，我可以在我的串行控制台输出中看到它。我已经触发了核心转储过程，`echo c > /proc/sysrq-trigger`但我不知道如何分析它。

文件中指定的选项`/etc/kdump.conf`是`"raw /dev/sda5"`. 我事先使用 fdisk 命令创建了 /dev/sda5 分区，并将其作为转储文件的位置。我还做了其他事情，比如为崩溃保留内存等。

谷歌搜索给出了一些如下信息： -

“原始磁盘分区和专用文件系统选项允许您仍然转储到本地系统，但不必重新挂载可能损坏的文件系统，从而减少无法捕获 vmcore 的机会。假设 /dev/ sda5 未格式化，kdump.conf 可以配置为“raw/dev/sda5”，vmcore 文件将通过 dd 直接复制到 partition/dev/sda5”。

`/proc/vmcore`机器重新启动后（转储后）我找不到。有人可以提供我如何分析该转储的任何线索/步骤吗？我是否需要做“dd”或“mknod”或类似的事情（在谷歌上有一些不清楚的提示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:53:55.227

嘿，我碰巧看到你的问题。不知道你是否已经得到答案..无论如何..

vmcore 将被复制到 /var/crash/ 或路径参数中定义的位置（如果有）。

定义了 save_raw 函数。

```
function save_raw()
{
        local raw_part=$(awk '$1 ~ /^raw$/ { print $2; }' $KDUMP_CONFIG_FILE)
        local kdump_dir
        if [ "$raw_part" ]; then
                [ -b "$raw_part" ] || {
                        echo "raw partition $raw_part not found"
                        return 1
                }
                kdump_dir=`grep ^path $KDUMP_CONFIG_FILE | cut -d' '  -f2-`
                if [ -z "${kdump_dir}" ]; then
                        coredir="/var/crash/`date +"%Y-%m-%d-%H:%M"`"
                else
                        coredir="${kdump_dir}/`date +"%Y-%m-%d-%H:%M"`"
                fi
                mkdir -p "$coredir"
                [ -d "$coredir" ] || {
                        echo "failed to create $coredir"
                        return 1
                }
                if makedumpfile -R $coredir/vmcore <$raw_part >/dev/null 2>&1; then
                        # dump found
                        echo "Dump saved to $coredir/vmcore"
                        # wipe makedumpfile header
                        dd if=/dev/zero of=$raw_part bs=1b count=1 2>/dev/null
                else
                        rm -rf "$coredir"
                fi
        fi
        return 0
} 
```

该函数在重新启动后启动 kdump 时调用。

```
function start()
{
        save_raw 
```

# jquery - jquery中重叠的幻灯片，div重叠

> ID：13192524
> 
> 赞同：1
> 
> 时间：2012-11-02T09:27:49.890
> 
> 标签：jquery

这里的第一个块是每 5 秒后自动滑动 div

```
$(document).ready(function(){

                    var refreshId = setInterval( function() 
                    {    
                        $('.box').each(function() {
                            if ($(this).offset().left < 0) {
                                $(this).css("left", "150%");
                            } else if ($(this).offset().left > $('#container').width()) {
                                $(this).animate({
                                    left: '50%'
                                }, 500 );
                            } else {
                                $(this).animate({
                                    left: '-150%'
                                }, 500 );
                            }
                        });
                    },5000);

 //the second block is to move the div's to left on clicking the leftbutton               

         $(".leftbutton").click(function(){
                    $('.box').each(function() {
                        if ($(this).offset().left < 0) {
                            $(this).css("left", "150%");
                        } else if ($(this).offset().left > $('#container').width()) {
                            $(this).animate({
                                left: '50%'
                            }, 500 );
                        } else {
                            $(this).animate({
                                left: '-150%'
                            }, 500 );
                        }
                    });
                });
the third block is to move the div's to right side on click of right button

               $(".rightbutton").click(function(){
                    $('.box').each(function() {
                        if ($(this).offset().left < 0) {
                            $(this).animate({
                                left: '50%'
                            }, 500 );
                        } else if ($(this).offset().left > $('#container').width()) {
                            $(this).css({
                                'left': '-150%'
                            } );
                        } else {
                            $(this).animate({
                                left: '150%'
                            }, 500 );
                        }
                    });
                });
            });

//the below is the HTML

<div id="container">

        <div id="box1" class="box">Div #1</div>
        <div id="box2" class="box">Div #2</div>
        <div id="box3" class="box">Div #3</div>

    </div>

// the below is the CSS

 body {
        padding: 0px;    
    }

    #container {
        position: absolute;
        margin: 0px;
        padding: 0px;
        width: 100%;
        height: 100%;
        overflow: hidden;  
    }

    .box {
        position: absolute;
        width: 50%;
        height: 300px;
        line-height: 300px;
        font-size: 50px;
        text-align: center;
        border: 2px solid black;
        left: 50%;
        top: 100px;
        margin-left: -25%;
    }

    #box1 {
        background-color: green;
        left: -150%;
    }

    #box2 {
        background-color: yellow;
    }

    #box3 {
        background-color: red;
        left: 150%;
    } 
```

所以基本上经过几次试验和错误后，div 1,2 和 3 是重叠的，只有一个 div 是可见的。我想您将不得不在解决问题之前尝试几次代码。​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:01:04.280

```
$(document).ready(function(){
    var refreshId;
    var restartAnimation = function() {
        clearInterval(refreshId);
        refreshId = setInterval( function() 
        {    
            $('.box').each(function() {
                if ($(this).offset().left < 0) {
                    $(this).css("left", "150%");
                } else if ($(this).offset().left > $('#container').width()) {
                    $(this).animate({
                        left: '50%'
                    }, 500 );
                } else {
                    $(this).animate({
                        left: '-150%'
                    }, 500 );
                }
            });
        },1000);
    }

    restartAnimation()

    $(".leftbutton").click(function(){
        restartAnimation();
        $('.box').each(function() {
            if ($(this).offset().left < 0) {
                $(this).css("left", "150%");
            } else if ($(this).offset().left > $('#container').width()) {
                $(this).animate({
                    left: '50%'
                }, 500 );
            } else {
                $(this).animate({
                    left: '-150%'
                }, 500 );
            }
        });
    });
    $(".rightbutton").click(function(){
        restartAnimation();
        $('.box').each(function() {
            if ($(this).offset().left < 0) {
                $(this).animate({
                    left: '50%'
                }, 500 );
            } else if ($(this).offset().left > $('#container').width()) {
                $(this).css({
                    'left': '-150%'
                } );
            } else {
                $(this).animate({
                    left: '150%'
                }, 500 );
            }
        });
    });
}); 
```

// 上面的javascript完全解决了问题，现在通过调用重置自动动画的函数避免了手动和自动动画同时出现。这不会让 div 重叠。这不是我想出来的。我得到了别人的帮助。但我仍然想为可能遇到类似问题的人分享答案。

# javascript - 使用 jasmine 进行 Jquery 测试

> ID：13192525
> 
> 赞同：5
> 
> 时间：2012-11-02T09:27:58.563
> 
> 标签：javascript, jquery, jasmine

我是茉莉花的初学者。我不知道如何使用 jasmine 测试以下 jquery 代码。

```
 if ($('.data-block').length > 0) {
   $('.span4:even', '.data-block').addClass('even');
   $('.span4:odd', '.data-block').addClass('odd');
 } 
```

你能告诉我我是如何使用 jasmine 编写关于这个 jquery 程序的测试代码的吗？谢谢您的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T09:37:36.473

您可以使用 Jasmine-JQuery 插件并针对注入的 DOM 进行测试：

[https://github.com/velesin/jasmine-jquery](https://github.com/velesin/jasmine-jquery)

该插件提供自定义匹配器，例如：

```
expect($('.span4:even')).toHaveAttr('class', 'even') 
```

Ps 这里有一个[简短的介绍](http://testdrivenwebsites.com/2010/07/29/html-fixtures-in-jasmine-using-jasmine-jquery/)。

# android - Appcelerator Titanium：如何录制视频？

> ID：13192528
> 
> 赞同：2
> 
> 时间：2012-11-02T09:28:18.413
> 
> 标签：android, titanium, video-capture, titanium-mobile, titanium-modules

如何在 Appcelerator Titanium 中录制视频并存储在特定位置？

我使用的是 Android 2.3.6 设备。

这个要点：[https](https://gist.github.com/832488) ://gist.github.com/832488似乎没有按建议/预期工作。它启动视频捕获意图

`var intent = Titanium.Android.createIntent({ action: 'android.media.action.VIDEO_CAPTURE' });`

作为`activityForResult`但回调

`Titanium.Android.currentActivity.startActivityForResult(intent, function(e) { ... });`

永远不会被调用，代码中的任何通知都不会出现，并且视频存储在某个默认位置。

KitchenSink 应用程序没有任何视频示例[适用于 Android]，只有一个摄像头示例代码。它确实有一个用于 android 视频捕获的[record_video](https://github.com/appcelerator-developer-relations/KitchenSink/blob/06d3f89623597981fa1b7dc0bab5bf65e61fc29d/Resources/ui/common/phone/record_video.js)模块，但它只设法捕获图片。线

`mediaTypes: Titanium.Media.MEDIA_TYPE_VIDEO,`

似乎没有工作

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:21:03.053

事实证明，这完全是一个“上下文”游戏。

[在http://developer.appcelerator.com/question/137709/startactivityforresult-and-callback-function-problem#244265](http://developer.appcelerator.com/question/137709/startactivityforresult-and-callback-function-problem#244265)找到了原因

*   问题实际上是 SDK 在 Android 中使用重量级窗口，这意味着新的 Javascript 上下文。
*   当您从 TabGroup 内部打开一个新窗口时，总是会创建一个重量级窗口。

因此，鉴于相机不是从选项卡组的内部（内部）启动的，以下要点：[https ://gist.github.com/832488 有效。](https://gist.github.com/832488)

# r - 自动为 r 中的图形生成图例？

> ID：13192535
> 
> 赞同：2
> 
> 时间：2012-11-02T09:28:37.913
> 
> 标签：r, styles, plot, legend

是否有可能在 R 中自动生成图例？真正让我烦恼的一件事是冗余信息，我必须输入这些信息才能显示图例（例如线条颜色，...）

```
plot(
  c(1:5), c(.7, 2.2, 3.1, 3.9, 5.2),
  col=1,
  pch=3,
  type="b"
)

lines(
  c(1:5), c(1:5),
  col=2,
  pch=6,
  type="o"
)

legend(
  "topleft",
  legend=c("data", "expactation"),
  col=c(1, 2),
  pch=c(3, 6),
  lty=c(2 ,1)
) 
```

我已经在命令`plot`和`lines`. 如果我不必在图例中再次添加此信息，那就太好了。

例如，是否可以将“线条”对象和“绘图”对象存储在变量中，并且只将这些对象传递给图例（图例在其中找到所需的信息）？

```
p = plot(...)
l = lines (...)
legend("topleft", p, l) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:33:50.600

> 例如，是否可以将“线条”对象和“绘图”对象存储在变量中，并且仅将这些对象传递给图例（图例找到所需信息的位置）

不容易。但是，ggplot2 为您提供了此功能。例如，

```
##Create some data and load the library
dd = data.frame(x = c(1:5,1:5), y = c(.7, 2.2, 3.1, 3.9, 5.2, 1:5), 
                type=rep(c("data", "expectation"), each=5))

require(ggplot2) 
```

接下来我们创建一个`plot`对象`：

```
##Legend is automatically generated
g = ggplot(data=dd, aes(x = x, y=y)) + 
    geom_point(aes(colour=type, pch=type))
g 
```

不是我们在“绘图对象”中添加一些行：

```
g + geom_line(aes(colour=type, pch=type)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:34:50.057

不，不是没有大量的工作和一个包装`plot`函数，这样你就可以记录一次指定的样式并将它们传递给各种绘图函数和图例。

ggplot2和**lattice包是更高级别的方法，在****这些**方法中，这类事情*会*为您自动完成。

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:40:35.307

如果您希望它看起来像您的情节，则需要自定义图例。Lattice 在技术上得到了`auto.key`选项，但它为您提供了丑陋的默认颜色和点类型。但是您可以在制作绘图之前轻松存储参数的值，然后将它们传递给相应的参数。下面是一个格子的例子：

```
#your example data
d <- data.frame(a=rep(1:5,2), b=c(.7, 2.2, 3.1, 3.9, 5.2, 1, 2, 3, 4, 5), 
                c=rep(c("data", "expactation"),each=5))
#your `pch` and 'col` you pass to the plot
pch.a <- c(3,6)
col.a <- 1:2
library(lattice)
xyplot(a ~ b, groups=c, data = d, type="o", col=col.a, pch=pch.a, aspect=1/2,
       key = list(points=list(pch=pch.a, col=col.a), text=list(levels(d$c)))) 
```

![在此处输入图像描述](../Images/8e04cb357fa5726b6f3655048e03f469.png)***

# java - 相机中止时应用程序崩溃

> ID：13192538
> 
> 赞同：0
> 
> 时间：2012-11-02T09:28:49.687
> 
> 标签：java, android, camera, nullpointerexception

我使用此代码启动标准相机应用程序：

```
CAMERA_REQUEST += 1;
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

而这段代码来获取图像：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == CAMERA_REQUEST) {

            if (data.getAction() != null) {

                Bitmap photo = (Bitmap) data.getExtras().get("data");

                if (imageView1.getDrawable() == null) {
                    imageView1.setImageBitmap(photo);
                } else if (imageView2.getDrawable() == null) {
                    imageView2.setImageBitmap(photo);
                } else if (imageView3.getDrawable() == null) {
                    imageView3.setImageBitmap(photo);
                }

            }

        }
    } 
```

但是，当我在制作照片时在我的 android 设备上按“返回”时，应用程序崩溃了，这是我的 logcat：

当有人点击 imageView 时，是否可以查看完整的图像？

```
11-02 10:21:41.883: E/AndroidRuntime(9801): FATAL EXCEPTION: main
11-02 10:21:41.883: E/AndroidRuntime(9801): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=3, result=0, data=null} to activity {com.obat.tabtasks/com.obat.tabtasks.photo.TakePicture}: java.lang.NullPointerException
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2994)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3037)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.app.ActivityThread.access$1100(ActivityThread.java:128)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1191)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.os.Looper.loop(Looper.java:137)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.app.ActivityThread.main(ActivityThread.java:4514)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at java.lang.reflect.Method.invokeNative(Native Method)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at java.lang.reflect.Method.invoke(Method.java:511)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at dalvik.system.NativeStart.main(Native Method)
11-02 10:21:41.883: E/AndroidRuntime(9801): Caused by: java.lang.NullPointerException
11-02 10:21:41.883: E/AndroidRuntime(9801):     at com.obat.tabtasks.photo.TakePicture.onActivityResult(TakePicture.java:50)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
11-02 10:21:41.883: E/AndroidRuntime(9801):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2990) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:41:20.950

试试这个：

```
if(data != null && data.getData() != null){

}
else
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:31:56.383

正如 LogCat 中所指定的，它是一个`NullPointerException`. 数据可能为空。使用以下代码片段：

```
 if (data != null && data.getAction() != null) {
            //....
        } 
```

# vb.net - 如何处理 Excel 中的日期格式？

> ID：13192542
> 
> 赞同：0
> 
> 时间：2012-11-02T09:29:01.180
> 
> 标签：vb.net, excel-2007, vb6-migration

我们有用于将数据从 FlexGrid 导出到 Excel 的 VBA。这是通过将单元格格式分配给列来完成的。我们正在将项目迁移到 VB.NET，在其中我们通过将日期格式分配给单元格来遵循相同的过程，如下所示：

```
objWorkSheet.Cells(irow, icol).EntireColumn.NumberFormat = "dd/mm/yyyy" 
```

导出后，我可以在 Excel 中看到正确的日期格式。例如：“2010 年 10 月 30 日”。但在此日期显示为“10/30/2010”的测试环境中情况并非如此。我已经在另一台也显示“10/30/2010”的开发人员机器上进行了测试，尽管它在我的机器上正确显示，其日期格式为“dd/MM/yyyy”。

我不明白这是怎么回事？

# ruby-on-rails - rabl视图中的片段缓存？

> ID：13192550
> 
> 赞同：3
> 
> 时间：2012-11-02T09:29:23.350
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, caching, rabl

我阅读[了 rabl 缓存文档](https://github.com/nesquena/rabl/wiki/Caching-in-RABL)，但不知道如何缓存代码片段。我有这样的观点（有更多代码，但为了简单起见，我将其删除）：

```
object @video

attributes :id, :user_id, :event_id

child :event do
  attributes :id
  node(:name) { |event| event.name }
end

child :user do
  attributes :id
end 
```

我想缓存 :event child 两个小时。我怎样才能做到这一点？

我正在使用 rabl(0.7.6)、rails(3.2.0)、ruby(1.9.3p125)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T08:52:26.440

在[这个](https://github.com/nesquena/rabl/issues/351)线程之后，我将 :event child 移动到部分并缓存这个部分。

显示.rabl.json：

```
object @video

attributes :id, :user_id, :event_id

child :event do
  extends "event"
end

child :user do
  attributes :id
end 
```

事件.rabl.json：

```
object @event
cache @event, :expires_in => 2.hour

attributes :id
node(:name) { |event| event.name } 
```

它对我很有用。

# android - 如何在刷新android中的listview时删除页脚

> ID：13192551
> 
> 赞同：2
> 
> 时间：2012-11-02T09:29:26.250
> 
> 标签：android

我想在刷新列表视图后删除我在列表视图中添加的页脚。我也可能需要在以后的执行中添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:35:23.853

我认为这样做没有任何问题，您只需像您一样正常添加页脚，然后调用

```
mListView.removeFooterView(footer_view); 
```

当您需要删除页脚时。只要确保当您必须再次重新添加页脚时，您添加它，然后再次添加`setAdapter`您的 ListView。

因为众所周知，

> 注意：在调用 setAdapter 之前调用它。这样 ListView 就可以将提供的光标与一个也将考虑页眉和页脚视图的光标包装起来。

# actionscript-3 - 如何将 Flash 显示影片剪辑添加到八哥精灵？

> ID：13192553
> 
> 赞同：1
> 
> 时间：2012-11-02T09:29:35.813
> 
> 标签：actionscript-3, flash, mask, movieclip, starling-framework

我使用八哥框架，我想将 flash.display.MovieClip 添加到八哥精灵？

我想在八哥精灵上使用面具，但我没有找到如何做到这一点。这就是为什么我要使用 flash.diplay.MovieClip 的蒙版方法。

谢谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:21:06.720

您可以通过将带有蒙版的“普通”影片剪辑绘制到位图来展平影片剪辑，并将其用作八哥影片剪辑中的子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T12:57:26.037

不，如果你使用 flatten 方法，它会删除它的所有属性。它将使其成为简单的图像。仅对没有任何子属性或没有任何功能的单个图像使用 flatten 方法。对于这些情况，只有 flatten 方法可以工作。

# javafx-2 - 缩放文本框而不截断其中的文本

> ID：13192557
> 
> 赞同：1
> 
> 时间：2012-11-02T09:29:55.293
> 
> 标签：javafx-2, javafx

我正在尝试创建一个简单的“页面”，其中一段文本以矩形（页面）为界。我希望能够在矩形内放置大量文本，如果文本不适合矩形，那么它会按比例缩小吗？这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:07:35.707

```
import javafx.application.Application;
import javafx.geometry.Bounds;
import javafx.scene.Scene;
import javafx.scene.layout.Pane;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class Test extends Application {

    @Override
    public void start( Stage stage ) throws Exception {
        double width = 100;
        // create rectangle of specified width
        Rectangle r = new Rectangle( 90, 200, width, 20 );
        // get bounds of the rectangle
        Bounds rb = r.getBoundsInLocal();
        // create two identical texts for comparison
        Text t1 = new Text(50, 170, "Some long text that would not fit.");
        Text t2 = new Text(50, 190, "Some long text that would *** fit.");
        // get bounds of the text
        // this will return how much space the text actually takes
        Bounds t2b = t2.getBoundsInLocal();
        // find the scale down amount
        double scalex = rb.getWidth()/t2b.getWidth();
        // scale the text down to what the rect is
        t2.setScaleX( scalex );

        Pane root = new Pane();
        root.getChildren().addAll( r, t1, t2 );

        stage.setScene( new Scene( root, 800, 600 ) );
        stage.show();
    }

    public static void main( String args[] ) {
        launch( args );
    }
} 
```

# asp.net - System.Net.WebClient 并非从文件中返回所有数据

> ID：13192565
> 
> 赞同：1
> 
> 时间：2012-11-02T09:30:33.287
> 
> 标签：asp.net, .net, webclient

我尝试`download file via WebClient`，但它不是从文件中返回所有字节。`Original file has 45Kb`，它`download only 8kb`来自总文件。它发生在我添加*用户代理*标头之后。

我的代码是：

```
using (ZipFile zip = new ZipFile())
{
     foreach (KeyValuePair<string, string> i in filesToInclude)
     {
         System.Net.WebClient wc = new System.Net.WebClient();
         wc.Credentials = System.Net.CredentialCache.DefaultCredentials;
         wc.UseDefaultCredentials = true;
         wc.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
         string downloadUrl = SPContext.Current.Site.Url + i.Key;    
         AppClass.WriteToLog(string.Format("downloadUrl: {0}", downloadUrl));
         byte[] img = wc.DownloadData(downloadUrl);
         zip.AddEntry(i.Value, img);
      }
      zip.Save(Response.OutputStream);
    } 
```

你有什么想法吗？

**更新：**在以前的版本`url`中没有正确构建。我将代码更改为：

```
using (ZipFile zip = new ZipFile())
{
     foreach (KeyValuePair<string, string> i in filesToInclude)
     {
          System.Net.WebClient wc = new System.Net.WebClient();
          wc.Credentials = System.Net.CredentialCache.DefaultCredentials;
          wc.UseDefaultCredentials = true;
          wc.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
          string downloadUrl = SPContext.Current.Site.Url + i.Key;
          Uri uri = new Uri(downloadUrl);
          AppClass.WriteToLog(string.Format("downloadUrl: {0}\nUri.AbsoluteUri: {1}", downloadUrl, uri.AbsoluteUri));
          byte[] img = wc.DownloadData(uri.AbsoluteUri);

          if (!wc.ResponseHeaders.Get(0).Contains("OK"))
          {
               AppClass.WriteToLog("Unable to donwload the file");
          }
          zip.AddEntry(i.Value, img);
      }

      zip.Save(Response.OutputStream);
} 
```

现在我还有另一个问题。`The remote server returned an error: (403) Forbidden`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:47:25.933

可能是错误消息或类似的东西。您可能并没有真正从文件中下载字节。尝试将结果作为字符串读取，以查看它是否不是错误消息。或者尝试从 WebClient 获取 HTTP 响应代码。

这是一种不好的方法，但是您应该像这样进行一些错误检查：

```
> using (ZipFile zip = new ZipFile()) {
>      foreach (KeyValuePair<string, string> i in filesToInclude)
>      {
>          System.Net.WebClient wc = new System.Net.WebClient();
>          wc.Credentials = System.Net.CredentialCache.DefaultCredentials;
>          wc.UseDefaultCredentials = true;
>          wc.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
>          string downloadUrl = SPContext.Current.Site.Url + i.Key;    
>          AppClass.WriteToLog(string.Format("downloadUrl: {0}", downloadUrl));
>          byte[] img = wc.DownloadData(downloadUrl);
>          if (!wc.ResponseHeaders[0].Contains("OK"))
>          {
>            throw new Exception("Unable to donwload the file");
>          }
>          zip.AddEntry(i.Value, img);
>       }
>       zip.Save(Response.OutputStream); 
> } 
```

# java - struts2 - 为什么使用声明式验证？

> ID：13192567
> 
> 赞同：2
> 
> 时间：2012-11-02T09:31:02.680
> 
> 标签：java, xml, validation, struts2, declarative

在 struts2 中，基本上有两种方法来引入验证：你可以这样做

*   以编程方式，或
*   声明式地。

**编程**验证主要涉及`Validatable`在您的操作类上实现接口，为此`void validate();`需要充实该方法。如果要将验证问题报告给用户，则存在一个更复杂的界面`ValidationAware`。

在**声明**式验证中，每个要验证的操作都有自己的验证文件调用`myactionname-validation.xml`，其中使用 XML 描述语言声明验证器。

* * *

在我工作的公司，我们使用程序化验证原则，使用小型验证框架（内部编写）来帮助重用常见的验证器模式。然而，我刚刚读过一本 struts2 的书，声明式验证是首选的方式。这本书提供了很多关于*如何*设置声明式验证的说明，但是它几乎没有触及*为什么*声明式方式更可取的主题。

我看到了一些一般性的论点，它们有时支持声明式 XML 样式的配置，但我看不到它们在这里适用：更改此配置（即验证）与处理的模型紧密耦合通过用于修改模型值的操作和 GUI。这不是需要在不重新编译的情况下“即时”配置的东西。

*在 struts2 中使用声明式样式验证有哪些论据？*

深入研究另一种 XML 标记方言并为处理单独的validation.xml 文件而烦恼是否值​​得？以编程方式执行它不是更容易，而且可能更易于维护，因为 Java 源代码（或者更确切地说是您选择的 IDE）将为您提供重构工具、结构化搜索等，而 XML 配置支持通常充其量是可以容忍的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:18:48.343

声明式验证更具可读性、功能强大且可自定义。在编写良好的 Web 应用程序中（良好的 DTO 或 VO 定义，每个要执行的逻辑操作一个操作），您可以通过多种方式共享它。

例如，如果您使用访问者验证器（验证来自 JSP 的对象列表），则将 .xml 文件放在对象包（带有对象名称）中，而不是放在操作包中，并且如果您在多个操作，您编写其验证规则一次，并重复使用它多少次。

我不是 XML 配置的粉丝，但是在以旧方式进行的几个项目之后，我发现了这种验证的全部潜力，我不会再回来了。

看看[这个](http://andrealigios.blogspot.it/2012/06/struts-2-struts-2-xml-validation.html)你可能想知道的一些提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:08:48.943

> 以编程方式执行它不是更容易[...]

不是真的，尽管它也不是特别难。构建错误消息是一个更加手动的过程，但是，大多数人并没有使用 XML 中的全部功能。

> [...] 可能更易于维护 [...]

不是真的，尽管它也不是特别难。

对于具有代码生成的代码库，IMO 构建 XML 比构建 Java 更容易，但大多数代码库并没有在那个深度使用代码生成。

为了生成人类可读的文档，XML 和注释比 Java 代码更容易处理。

我使用具有相当不错的 S2 支持的 IDE，我从来没有想过“如果我用代码编写它会容易得多”，而且我不记得做过很多（如果有的话）重构我的验证让我希望它是在代码中而不是在 XML 中。

关键是在现有机制存在时重用它们：它是一种微不足道的、已知的机制，集成在框架中，并且每个在 S2 应用程序上工作的人都知道它是如何工作的。

# wpf - MS UI 自动化 - 自定义 DataGrid

> ID：13192569
> 
> 赞同：2
> 
> 时间：2012-11-02T09:31:11.790
> 
> 标签：wpf, user-interface, ui-automation

目前我正在使用 WPF（在 Excel vba 中）自动化我的一个基于 .net 的应用程序。UI 间谍没有将其中一个控件（网格）识别为对象。有没有办法从网格中选择一个不是由 UI 间谍识别。

提前致谢 问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:35:37.160

您可以尝试使用 Snoop 来识别 UI 控件。[这](http://snoopwpf.codeplex.com/)是下载它的 codeplex 链接。

在 UI Spy 放弃的很多情况下，Snoop 都为我工作。

# jquery - jquery通过url或链接打开标签

> ID：13192572
> 
> 赞同：0
> 
> 时间：2012-11-02T09:31:23.407
> 
> 标签：jquery, url, hyperlink, tabs

我有一个标准的选项卡部分，可以将内容分成单独的选项卡，类似于 jQuery 选项卡。我的问题，如何通过 url (www.domain.com/content#tab2) 打开特定标签。在这种情况下，通过将标签内容添加到 url 不起作用

```
 $(document).ready(function() {

        //Default Action
        $(".tab_content").hide(); //Hide all content
        $("ul.tabs li:first").addClass("active").show(); //Activate first tab
        $(".tab_content:first").show(); //Show first tab content

        //On Click Event
        $("ul.tabs li").click(function() {
            $("ul.tabs li").removeClass("active"); //Remove any "active" class
            $(this).addClass("active"); //Add "active" class to selected tab
            $(".tab_content").hide(); //Hide all tab content
            var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
            $(activeTab).fadeIn(); //Fade in the active content
            return false;
        });

    });

    <ul class="tabs">
    <li><a href="#welcome">welcome</a></li>
    <li><a href="#one">tab 01</a></li>
    <li><a href="#two">tab 02</a></li>
   </ul>

    <section class="tab_container">
    <article id="welcome" class="tab_content"><p>content</p></article>
    <article id="one" class="tab_content"><p>content</p></article>
    <article id="two" class="tab_content"><p>content</p></article>
    </section> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:36:42.910

把它放在你的`$(document).ready`功能中

```
 hash = window.location.hash;
    elements = $('a[href="' + hash + '"]');
    if (elements.length === 0) {
        $("ul.tabs li:first").addClass("active").show(); //Activate first tab
        $(".tab_content:first").show(); //Show first tab content
    } else {
        elements.click();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:38:29.097

您可以使用 jQueryTab 的“选定”选项来设置当前选项卡，您将必须捕获 URL 选项并在页面加载事件上设置选项卡。

`$("#SimpleTab").tabs("option", "selected", 2);`

请参阅我博客中的示例：http: [//csharp-guide.blogspot.in/2012/07/aspnet-jquery-ui-tab-set-active-tab.html](http://csharp-guide.blogspot.in/2012/07/aspnet-jquery-ui-tab-set-active-tab.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:28:22.700

这就是我现在准备好的文件

```
hash = window.location.hash;
elements = $('a[href="' + hash + '"]');
if (elements.length === 0) {
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content
} else {
    elements.click();
}    

if($('.tab2').length>0){
   $(".tab_content").hide(); //Hide all content
   $("ul.tabNav li:first").addClass("active").show(); //Activate first tab
   $(".tab_content:first").show(); //Show first tab content

       //On Click Event
   var z = 100;
   $('ul.tabNav li a').each(function() {
      z--;
      $(this).css('z-index', z);
   });
   $("ul.tabNav li").click(function() {
      $("ul.tabNav li").removeClass("active"); //Remove any "active" class
      $(this).addClass("active"); //Add "active" class to selected tab
      $(".tab_content").hide(); //Hide all tab content
      var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
      $(activeTab).fadeIn(); //Fade in the active content
      return false;
    });
 } 
```

# android - 如何在异步任务完成之前停止 UI 线程的执行以返回在 android 的 AsyncTask 中获得的值

> ID：13192573
> 
> 赞同：2
> 
> 时间：2012-11-02T09:31:27.467
> 
> 标签：android, android-asynctask, return-value, execution, ui-thread

我有一个类，我在其中编写了一个 AsyncTask 从网络获取 Json。

```
public class MyAsyncGetJsonFromUrl extends AsyncTask<Void, Void, JSONObject> {
    Context context_;
    String url_;
    List<NameValuePair> params_;

    public MyAsyncGetJsonFromUrl(Context context_, List<NameValuePair> params_, String url_) {
        this.context_ = context;
        this.params_ = params_;
        this.url_ = url_;
    }

    @Override
    protected JSONObject doInBackground(Void... params) {
        JSONObject jObj_ = null;
        try {
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_);
            httpPost.setEntity(new UrlEncodedFormEntity(params_));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            InputStream is_ = httpEntity.getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is_.close();
            String json_ = sb.toString();
            Log.e("JSON", json);

            jObj_ = new JSONObject(json_);
        } catch (Exception e) {
            e.printStackTrace();
        }

        return jObj_;
    }

    protected void onPostExecute(JSONObject jObj_) {
        jObj = jObj_;
    }
} 
```

在这个类中还有一个方法可以将此 Json 对象返回给调用该方法的 Activity。

```
public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {
    new MyAsyncGetJsonFromUrl(context, params, url).execute();
    return jObj;
} 
```

现在的问题是在立即启动 AsyncTask 之后调用`new MyAsyncGetJsonFromUrl(context, params, url).execute();`该行`return jObj;`并返回 null。所以我想停止执行，直到异步任务完成。并且请不要重复提及这个问题，因为没有其他问题与这种情况完全相同

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:38:57.033

异步任务是异步的。这意味着它们独立于程序当前线程在后台执行（它们在后台线程中运行）。因此，在异步任务完成之前，您不应尝试停止程序的执行。

所以你有2个选择：

*   在 UI 线程本身而不是在异步任务中运行您的代码

*   从异步任务`onPostExecute()`方法中分配您的价值

如果您决定使用异步任务并使用选项 B，那么您可以拥有一些静态变量或类似的东西，JSON 对象的值可以在异步任务结束时分配给这些变量，并且可以在以后访问。您还可以在方法本身中对 JSON 对象进行任何需要执行的后处理`onPostExecute()`（例如：解析对象并将其显示给用户），因为此方法在异步任务完成其操作后在 UI 线程上运行后台线程。

如果您需要异步任务的返回值，您可以执行以下操作：

```
jObj = new MyAsyncGetJsonFromUrl(context, params, url).execute().get(); 
```

在这种情况下，程序将等待计算完成，除非出现异常，例如线程被中断或取消（由于内存限制等）。但一般不建议采用这种方法。异步任务的重点是允许异步操作，您的程序执行不应因此而停止。

返回值将`doInBackground()`作为参数传递给`OnPostExecute()`方法。您不必在 onPostExecute 中输入返回值，因为它在 UI 线程本身上执行。只需使用结果并使用它做你需要做的事情。

# ruby - 获取包含在两个特定单词之间的子字符串

> ID：13192578
> 
> 赞同：8
> 
> 时间：2012-11-02T09:31:32.633
> 
> 标签：ruby, regex, ruby-on-rails-3, substring

当我对使用 ruby​​ 的特定单词之间包含的文本感兴趣时，我想知道如何进行。例如。

```
@var = "Hi, I want to extract container_start ONLY THIS DYNAMIC CONTENT container_end from the message contained between the container_start and container_end " 
```

现在我想从字符串中提取大写内容，即动态但始终包含在两个容器（`container_start`和`container_end`）中

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-02T10:37:29.590

简单的正则表达式可以：

```
@var = "Hi, I want to extract container_start **ONLY THIS DYNAMIC CONTENT** container_end from the message contained between the container_start and container_end "
@var[/container_start(.*?)container_end/, 1] # => " **ONLY THIS DYNAMIC CONTENT** " 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-23T15:35:04.540

使用 Victor 给出的相同正则表达式，您也可以这样做

```
var.split(/container_start(.*?)container_end/)[1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-01T03:33:59.027

只是为了提供非正则表达式的答案，您还可以使用两个 .splits 来选择数组条目。

```
=> @var = "Hi, I want to extract container_start ONLY THIS DYNAMIC CONTENT container_end from the message contained between the container_start and container_end "
=> @var.split("container_start ")[1].split(" container_end")[0]
=> "ONLY THIS DYNAMIC CONTENT" 
```

.split 在引号中的文本处拆分字符串。[1] 选择该文本之后的部分。对于第二次切割，您需要“container_end”之前的部分，因此您选择 [0]。

您需要在两个 .split 子字符串中保留空格以删除前导和尾随空格。或者，使用 .lstrip 和 .rstrip。

如果有更多的“container_start”和“container_end”字符串，您需要调整数组选择器以在这两个子字符串之间选择正确的 @var 部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-22T17:22:59.790

我只是想添加一些我从[这里得到的重要内容](https://ruby-doc.org/core-2.4.1/Regexp.html)

```
@var = "Hi, I want to extract container_start \n\nONLY \nTHIS\n DYNAMIC\n CONTENT\n\n container_end from the message contained between the container_start and container_end "
@var[/container_start(.*?)container_end/m, 1] 
```

拿了除了：

```
/./ - Any character except a newline.
/./m - Any character (the m modifier enables multiline mode) 
```

# java - GAE 搜索 API：排序中的默认值 SortExpression

> ID：13192580
> 
> 赞同：1
> 
> 时间：2012-11-02T09:31:45.253
> 
> 标签：java, google-app-engine, gae-search

在 SortExpression.Builder 中设置排序选项时，严格要求设置一个`defaultValue(String,Numeric or Date)`.

此设置的目的是什么以及它如何影响搜索结果或结果排序顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:48:56.240

索引中的文档不需要都具有相同的字段。如果您尝试对某些文档不包含的字段进行排序，我们会为该文档使用适当的默认值。例如，如果我有以下文件：

```
doc A: NumberField(name=x, value=7), TextField(name=y, value="hello")
doc B: NumberField(name=x, value=20), TextField(name=y, value="world")
doc C: TextField(name=y, value="hello") 
```

在这种情况下，如果我们对`x`默认数值为 的字段进行排序`10`，我们得到`A, C, B`，但如果默认数值为`0`，我们得到 `C, A, B`。

# java - 以编程方式在 Mac 上的 Java 中设置 dock:name

> ID：13192586
> 
> 赞同：3
> 
> 时间：2012-11-02T09:31:58.027
> 
> 标签：java, macos, swing

我希望能够在 Mac 上设置我的 Java 应用程序的停靠点：名称。

我知道我可以通过 Java VM 的 -Xdock:name="Xyz" 选项来做到这一点，但我想直接在我的程序中做到这一点。

根据[这个问题](https://stackoverflow.com/questions/2553941/programatically-setting-the-dockname-java-mac-os-x-jvm-property)，可以通过设置“com.apple.mrj.application.apple.menu.about.name”属性来完成，但我根本无法让它工作。

考虑这个程序：

```
import javax.swing.*;

public class Abc extends JFrame {
    public Abc() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(200, 200);
        setVisible(true);
    }

    public static void main(String[] args) {
        try {
            System.setProperty("com.apple.mrj.application.apple.menu.about.name", "Xyz");
            System.setProperty("apple.laf.useScreenMenuBar", "true");
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }
        catch(Exception e) {
            System.out.println("Exception: " + e.getMessage());
        }

        SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    new Abc();
                }
            });
    }
} 
```

我原以为这会起作用，但事实并非如此。我使用的是 OS X 10.8.2 (Mountain Lion) 和 Java 1.7.0_09，它们都是非常新的版本。也许API已经改变了？

我究竟做错了什么？

# javascript - Google Charts：如何更改 controlType 中的默认选定值：ControlWrapper 的 CategoryFilter

> ID：13192590
> 
> 赞同：0
> 
> 时间：2012-11-02T09:32:31.603
> 
> 标签：javascript, visualization, google-visualization

我有一个类别过滤器，用于选择绑定到饼图的日期。目前它显示默认标题（“选择一个值”）。我想将其默认值设置为包含的值之一，比如上次日期。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:15:16.560

A little late but checkout this example:

```
 // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {

    // Create the data table.
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      title: 'Company Performance'
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
    //============All=U=Need============
    chart.setSelection([{'column': 1}]);
    //============All=U=Need============
  } 
```

:D

# git - 在 git 中添加补丁，所有匹配文件中的正则表达式的帅哥

> ID：13192594
> 
> 赞同：26
> 
> 时间：2012-11-02T09:32:49.590
> 
> 标签：git

有没有办法在匹配正则表达式的文件中添加所有大块？

我知道我可以用 / 搜索给定的块，但只能找到第一个块。我想添加所有匹配。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-09-18T21:12:05.437

## 解决方案

以下单线对我有用，其中`<regex>`是*POSIX Extended Regular Expression*。这需要[grepdiff](http://linux.die.net/man/1/grepdiff)但它已经包含在我的 Ubuntu 发行版中。

```
git diff -U1 -G<regex> --pickaxe-regex \
| grepdiff -E <regex> --output-matching=hunk \
| git apply --cached 
```

## 这个怎么运作

第一行显示所有差异，其补丁文本包含匹配的添加/删除行`<regex>`。问题是这适用于文件级别。这意味着将包含文件中至少有一个匹配块的任何更改。

因此我们需要第二行。从它收到的所有帅哥中，`grepdiff`只会打印那些包含`<regex>`. 这里的问题是，它不仅会匹配实际更改的行，还会匹配差异上下文。这就是为什么差异上下文通过传递`-U1`到最小化¹ `git diff`。

最后，第三行采用过滤后的差异并将其应用于索引，例如对其进行分级。

## 结论

总而言之，这意味着在某些极端情况下，这会增加超出预期的数量。但是这些可能可以通过稍微调整正则表达式来避免。

感谢@VonC 提供指向其他 SO 问题的链接。它有所有的部分，它们只需要适当地组合在一起。

* * *

¹：您也可以通过`-U0`完全省略上下文。虽然这完全消除了第一行中预过滤的需要，但生成的补丁将不再适用于第三行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-02T10:29:46.323

可悲的是，[2011 年 7 月的补丁](http://git.661346.n2.nabble.com/feature-request-git-add-interactive-patch-on-regex-matched-hunks-only-td6614839.html)现在无处可去。
它会引入一个`git add --hunks=magic`选项。

现在，您将不得不处理：

*   根据您的正则表达式提取补丁：请参阅“[使用正则表达式过滤差异](https://stackoverflow.com/questions/8219900/filtering-a-diff-with-a-regular-expression)”
*   git stash 你的更改
*   应用你的补丁和`git add`
*   重置您的索引并应用您的存储 ( `git stash pop`)

相当繁琐的过程。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-08-26T08:34:49.723

除了@raphinesse 的答案和@rubystallion 的评论之外，除了有关如何从[此处](https://stackoverflow.com/questions/3321492/git-alias-with-positional-parameters)格式化它的提示之外，我还创建了一个 git 函数来使用正则表达式作为唯一输入来执行此操作。只需将其输入到您的 gitconfig 中（我使用了我的全局 gitconfig）并将其与`git regexadd <regex>`.

```
[alias]
        regexadd = "!f() { git diff -U0 \
                | grepdiff -E $1 --output-matching=hunk \
                | git apply --cached --unidiff-zero; }; f" 
```

# c - 此行有多个标记 - 语法错误（日食）

> ID：13192595
> 
> 赞同：1
> 
> 时间：2012-11-02T09:32:57.783
> 
> 标签：c, eclipse, i2c

我为 i2c 创建了一个头文件，来自 Peter Fleury。我在 Eclipse 中重写并在下面的列表程序的第二行中收到错误警告“此行有多个标记 - 语法错误 - 预期标识符或 '(' 在 'unsigned' 之前”

```
>#define    i2c_read(ack)   (ack) ? i2c_readAck() : i2c_readNak();
>
>unsigned char  i2c_read (unsigned char ack); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:39:08.733

What are you trying to achieve? If you preprocess the #define macro you'll get:

```
unsigned char (unsigned char ack) ? i2c_readAck() : i2c_readNak();; 
```

This isn't a legal C. I'm not familiar with i2c, and I don't know what you are trying to do. If you are trying to declare a new variable and initialize it with a value (and call the correct method), you should:

```
#define  i2c_read(ack)   (ack) ? i2c_readAck() : i2c_readNak()
unsigned char new_var = i2c_read (ack); 
```

Note that I'm assuming ack is defined somewhere else. If you are trying to achieve something else, please specify it in your question. Also note I removed one semicolon from the '#define'. It is a common mistake, which typically only generate a warning or go unnoticed.

Oh, and if you are trying the declare a function, then it should have a different name than the macro.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:39:22.830

You have defined a macro and declared a function with same name.
Perhaps you should change the macro name or function name.

# c++ - linux：如何断开远程用户访问？

> ID：13192599
> 
> 赞同：0
> 
> 时间：2012-11-02T09:33:15.220
> 
> 标签：c++, linux, qt, remote-access

我正在设计一个应用程序来通过 Qt 中的 QProcess 使用 vncviewer 访问远程屏幕。（我在远程桌面上使用vino-server）登录到远程屏幕（全屏模式）后，我想断开远程共享并切换回本地屏幕。

有什么Qt方法可以做到吗？

如何通过linux命令行实现这一点？

我正在使用 Linux 操作系统（ubuntu）。

任何想法/建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:59:00.597

我找到了解决这个问题的方法。

考虑到系统处于远程访问状态。要断开它与远程用户的连接，只需停止 vnc 服务器，然后在需要时重新启动它或使用计时器，几秒钟后重新启动它。这将断开远程用户与服务器的连接。

使用命令行，它可以完成如下：

1.  要停止 VNC 服务器，请打开终端并键入以下命令：

    ```
     $ gconftool-2 -s -t bool /desktop/gnome/remote_access/enabled false 
    ```

2.  要启动 VNC 服务器，请打开终端并键入以下命令：

    ```
     $ gconftool-2 -s -t bool /desktop/gnome/remote_access/enabled true 
    ```

通过创建两个 bash shell 脚本可以更加简化：

启动vnc.sh

```
 #!/bin/bash
    #
    # This script starts enables System -&gt; Preferences -&gt; Remote Desktop

    gconftool-2 -s -t bool /desktop/gnome/remote_access/enabled true</pre> 
```

停止vnc.sh

```
 #!/bin/bash
    #
    # This script starts enables System -&gt; Preferences -&gt; Remote Desktop

    gconftool-2 -s -t bool /desktop/gnome/remote_access/enabled false</pre> 
```

创建这些脚本后，使用以下命令使它们可执行：

```
 $ chmod +x startvnc.sh
    $ chmod +x stopvnc.sh 
```

如果需要，请为它们设置别名。在文本编辑器中打开 ~/.bashrc，滚动到底部，然后输入以下两行：

```
 alias startvnc=/path/to/your/startvnc.sh
    alias stopvnc=/path/to/your/stopvnc.sh</pre> 
```

现在，当您 SSH 进入您的盒子（或打开命令行）时，您只需键入

```
 $ startvnc 
```

[启用远程桌面]，或

```
 $ stopvnc 
```

[禁用远程桌面]。

现在，在 Qt 中，使用 QProcess 可以很容易地实现。

# testing - 如何为所有浏览器测试我的 html/php/css 文件？

> ID：13192606
> 
> 赞同：0
> 
> 时间：2012-11-02T09:33:50.560
> 
> 标签：testing, browser, web

是否有程序或方法可以在我的计算机（本地主机）上针对所有浏览器（尤其是 IE 版本）测试我的网站？我一般使用 IE 测试器，但它仅适用于 IE 和 IE7，不能在本地主机上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:38:40.840

Adobe has a service called browserlab which allows you to view snapshots of your site across all browsers. Take a look [here](https://browserlab.adobe.com/en-us/index.html)

# java - android中的多线程：消息传递

> ID：13192607
> 
> 赞同：2
> 
> 时间：2012-11-02T09:33:53.527
> 
> 标签：java, android, multithreading, concurrency, android-handler

**Android [Handler](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/os/Handler.java)是并[发消息传递](http://en.wikipedia.org/wiki/Message_passing#Synchronous_versus_asynchronous_message_passing)的实现吗？**

似乎通过使用`HandlerThread`，可以很容易地在多个工作线程之间进行通信。但是，据我了解，并发消息传递是基于使用共享内存。我试图了解Handler的实现机制，但对我来说仍然不清楚。

`Handler`简而言之，Android 是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:55:39.310

是的，a`Handler`提供了一种线程间消息传递的形式。`Handler`对象本身是可从多个线程访问的“共享内存”，但它是线程安全的并为您管理细节。

更具体地说，a是与给定线程的[消息队列](http://en.wikipedia.org/wiki/Message_queue)( )`Handler`交互的便捷工具。当您将 a或发布到 a时，它们将被添加到for the的线程中。就线程本身而言，它运行一个[事件循环](http://en.wikipedia.org/wiki/Event_loop)( )，持续处理线程队列中的消息。[`MessageQueue`](http://developer.android.com/reference/android/os/MessageQueue.html)`Runnable``Message``Handler``MessageQueue``Handler`[`Looper`](http://developer.android.com/reference/android/os/Looper.html)

如果您想了解 Android 实现的细节，`Handler.java`可以[在 GrepCode](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/os/Handler.java)上查看（Android 4.1.1 中）的代码。该类的文档非常详细，并且代码平易近人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:38:23.410

简短的回答：是的

长答案：@acj 答案是对`Handler`/ `Looper`/细节的简短而简洁的解释`MessageQueue`。但是，它确实错过了几点。

每个线程都可以有关联的消息队列，发送给它的消息被存储在其中，直到线程开始执行它们。消息在线程上运行的循环中按顺序处理。其他线程可以将消息发布到队列中；但是，消息处理是异步的，其他线程通常不会阻塞它。

有许多标准化消息（如`Runnable`消息）由循环的操作系统实现执行。但是，应用程序代码也可能支持处理自定义消息。

`Handler`只是将消息`Handler`从其他线程发布到特定线程（通常是创建对象的线程）的消息队列的便捷方式。请注意，`Handler`只能在进程内使用，并且在单个进程中，所有内存在所有线程中都是通用的，因此消息队列不需要保存在“共享内存”中（该术语用于多个进程可访问的内存区域通常）。

所有这一切要记住的一件具体事情是，使用 a 发布消息`Handler`并不能保证它正在处理。线程在收到您的消息之前可能出于多种原因退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:46:55.463

如您所知，您只能在 UI 线程中对 UI 进行更改。因此，当您需要在后台执行某些操作并在 UI 中显示结果但由于某种原因您不想使用 AsyncTasks（例如，您需要一次运行多个任务）时，您可以使用 Handler。它可以接收来自非 UI 线程的消息，并且由于这些消息对 UI 进行更改（当然是在 UI 线程中）。

例如我们在 OnCreate() 方法中实现处理程序：

```
TextView tvInfo = (TextView) findViewById(R.id.tvInfo);
Handler h = new Handler() {
  public void handleMessage(android.os.Message msg) {
    tvInfo.setText("received: " + msg.what);
  };
}; 
```

并实现一些线程，它将向我们的处理程序发送消息到其他地方（例如在 onClickListener 中）：

```
Thread t = new Thread(new Runnable() {
    public void run() {
      for (int i = 1; i <= 10; i++) {
        // some long action
        downloadFile();
        h.sendEmptyMessage("downloading of file " + i + " complete");
      }
    }
});
t.start(); 
```

# twitter-bootstrap - 如何使用 Bootstrap 在 Yii 框架上响应式地制作普通的 div 块？

> ID：13192611
> 
> 赞同：0
> 
> 时间：2012-11-02T09:34:01.840
> 
> 标签：twitter-bootstrap, yii

我已经设法使用 YII 框架构建了一个站点。我还安装了 Bootstrap 扩展，它允许我轻松实现响应式小部件。我的问题出现在网站的其余部分。假设我想要：

*   一个标题
*   一份菜单
*   主要内容
*   页脚

菜单是最简单的部分，因为我只是像这样使用 Bootstrap 小部件：

```
<?php 
     $this->widget('bootstrap.widgets.TbMenu', array(
     'type'=>'tabs', // '', 'tabs', 'pills' (or 'list')
     'stacked'=>false, // whether this is a stacked menu
     'items'=>array(
       array('label'=>'Home', 'url'=>array('/site/index')),
       array('label'=>'About', 'url'=>array('/site/page', 'view'=>'about')),
       array('label'=>'Contact', 'url'=>array('/site/contact')),
     ),
   )); 
?> 
```

所以我的问题是让网站的其余部分响应。那么：有没有一种简单的方法来创建也会自动响应的“块”？还是仅仅是创建 div 并响应式地对其进行样式设置的问题？换句话说，引导扩展是否仅限于特定组件，因此剩余的布局依赖于设计人员使用 CSS 进行整理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:51:15.800

这完全取决于您在内容中添加的内容。`<div>`默认情况下标签不是固定宽度的，默认情况下也不是任何其他 HTML 标签。在你的标签上使用`width: 100%`and也可以覆盖你的大部分基础，让它们以合理的限制灵活地调整到它们的父宽度。`max-width: Xpx``<img>`

在那之后，唯一限制布局的就是你添加的东西。因此，当您添加内容时，请务必考虑在页面缩小和扩展时您希望此内容发生什么。

如果你有一个更具体的案例，你正在努力寻找一个好的折衷方案，那么 bootstrap 和 Yii 有大量的资源。

# objective-c - UILongPressGesture 检测两次

> ID：13192614
> 
> 赞同：2
> 
> 时间：2012-11-02T09:34:15.967
> 
> 标签：objective-c, uigesturerecognizer

在我的长按手势中，我遇到了一个问题，例如，

```
*mypressrec = [[UILongPressGestureRecognizer alloc]
                                         initWithTarget:self 
                                         action:@selector(pressdetected:)];
    mypressrec.minimumPressDuration = 3;
    [self addGestureRecognizer:mypressrec];
    [mypressrec release]; 
```

我的功能：

```
 -(void)pressdetected:(UILongPressGestureRecognizer*)recognizer{
     //My code goes here
  a=90;
   NSLog(@"value of my A",a);
} 
```

在这里，当我按下超过 3 秒时，我的 A 的值正在打印**TWICE**。为什么会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:37:56.590

To check the state of the UILongPressGestureRecognizer just add an if statement on the selector method:

```
- (void)pressdetected:(UILongPressGestureRecognizer*)sender { 
if (sender.state == UIGestureRecognizerStateEnded) {
    NSLog(@"Long press Ended");
}
else {
    NSLog(@"Long press detected.");
}
} 
```

# extjs - 如何在extjs中的buttonclick上将输入值插入存储

> ID：13192615
> 
> 赞同：0
> 
> 时间：2012-11-02T09:34:16.273
> 
> 标签：extjs

我正在用 extjs 实现项目。我想在单击确定按钮时将文本字段值插入存储。我将表格设计为-

模型-

```
Ext.define('AM.model.User', {
    extend: 'Ext.data.Model',
    fields: ['Question', 'Option']
}); 
```

店铺-

```
Ext.create('Ext.data.Store', {
    model: 'User',
    proxy: {
               type: 'localstorage',
           }
    autoLoad: true
}); 
```

控制器-

```
Ext.define('AM.controller.Users', {
     extend: 'Ext.app.Controller',
     views: [
                'user.List',
            ],
     store: ['Users'],
     model: ['User'],
     init: function() {
        this.control({
            "button": {
                click: this.onButtonClick
            }
        });
      },    
      onButtonClick: function(button){
      var form = button.up('form').getForm ();

      // Validate the form
      if (form.isValid ()) {
        var values = form.getFieldValues ();
        store.add ({
          Question: values.Question,
          Option: values.Option
        });
      }
      else {
          alert("Insert values in textfields");       
      } 
    }
    }); 
```

看法-

```
Ext.create('Ext.form.Panel', {
    title: 'Question-option',
    width: 300,
    bodyPadding: 10,
    renderTo: Ext.getBody(),        
     items: [{
        xtype: 'textfield',
        name: 'Question',
        fieldLabel: 'Question',
        allowBlank: false  
    }, 
    {
        xtype: 'textfield',
        name: 'Option',
        fieldLabel: 'Option',
    },
    {xtype: 'button', text: 'Ok'}] 
```

但是当我将上面的 onbuttonclick 操作添加到我的控制器代码中时，它没有显示任何输入字段。所以有人可以帮助我以显示视图并将这些输入插入存储中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:00:39.987

由于以下原因，我已经浏览了上面的代码片段。
1) Json 语法错误。
2) 你搞砸了 Ext.define 和 Ext.Create

我已经更新了您的脚本并在我的本地计算机上对其进行了测试。它的工作！

//控制器 - 应用程序/控制器

```
 Ext.define('AM.controller.Users', {
        extend: 'Ext.app.Controller',

         views: [
                    'user.List'
                ],
         stores: ['Users'],
         models: ['User'],
        init: function() {
            console.log('controller initialized');
            this.control({
                'viewport panel button': {
                    'click': this.onButtonClick
                }
            });
        },

        onButtonClick: function(button, e, eOpts ) {
            var form = button.up('form').getForm();
            var model = this.getModel('AM.model.User');

          // Validate the form
          if (form.isValid ()) {
            var question = model.create(form.getFieldValues());
            console.log(question.data);
          }
          else {
              alert("Insert values in textfields");       
          } 
        }

    },function(){
        console.log("Users Controller created");
    }); 
```

// 视图 - 应用程序/视图/用户/列表

```
 Ext.define('AM.view.user.List', {
        extend: 'Ext.form.Panel',
        alias: 'widget.userlist',
        title: 'Question-option',
        width: 300,
        bodyPadding: 10,
        renderTo: Ext.getBody(),        
         url: 'some url',// in case of ajax
        //  initComponent: function(){
        items: [{
            xtype: 'textfield',
            name: 'Question',
            fieldLabel: 'Question',
            allowBlank: false  // requires a non-empty value
        }, {
            xtype: 'textfield',
            name: 'Option',
            fieldLabel: 'Option'
            vtype: 'email'  // requires value to be a valid email address format
        },
        {
        xtype:'button',
        text:'Save'

       }
        ]

    },function(){
    console.log("List view was created");
    }); 
```

更新您的 JS 文件并运行！如果您遇到任何问题，请在此处评论

# c# - DeviceIoControl 未设置输出缓冲区

> ID：13192616
> 
> 赞同：2
> 
> 时间：2012-11-02T09:34:16.653
> 
> 标签：c#, pinvoke, deviceiocontrol

我遇到了一些问题`DeviceIOControl`。我正在尝试从物理驱动器读取磁盘几何形状，但从未设置输出缓冲区。

这是我的代码示例，它是一个简单的函数，应该获取磁盘几何形状并返回磁盘是否可移动：

```
public static bool IsDeviceRemovable(int DriveNo) {
    string Filename=@"\\.\Physicaldrive"+DriveNo;

    SafeFileHandle drive=CreateFile(
        Filename,
        FileAccess_e.None,
        FileShare_e.Write|FileShare_e.Read,
        IntPtr.Zero,
        CreationDisposition_e.OpenExisting,
        FileAttributes_e.None,
        IntPtr.Zero
    );

    if(drive.IsInvalid) {
        throw new IOException("Unable to access drive. Win32 Error Code: "+Marshal.GetLastWin32Error());
    }

    uint bytesReturned=0;
    DISK_GEOMETRY dg=new DISK_GEOMETRY();

    if(!DeviceIoControl(
        drive,
        IOControlCode_e.DiskGetDriveGeometry,
        IntPtr.Zero,
        0,
        dg,
        (uint)Marshal.SizeOf(dg),
        ref bytesReturned,
        IntPtr.Zero
        )) {
        throw new Exception("Unable to get properties from device. Win32 Error Code: "+Marshal.GetLastWin32Error());
    }

    drive.Close();
    return dg.MediaType==MEDIA_TYPE.RemovableMedia;
} 
```

还有一些数据结构：

```
[DllImport("Kernel32.dll", SetLastError=false, CharSet=CharSet.Auto)]
private static extern bool DeviceIoControl(
    SafeFileHandle hDevice,
    IOControlCode_e IoControlCode,
    [MarshalAs(UnmanagedType.AsAny)]
    [In] object InBuffer,
    uint nInBufferSize,
    [MarshalAs(UnmanagedType.AsAny)]
    [Out] object OutBuffer,
    uint nOutBufferSize,
    ref uint pBytesReturned,
    IntPtr Overlapped
    );

[DllImport("kernel32.dll", SetLastError=true, CharSet=CharSet.Auto)]
private static extern SafeFileHandle CreateFile(
    string lpFileName,
    FileAccess_e dwDesiredAccess,
    FileShare_e dwShareMode,
    IntPtr lpSecurityAttributes,
    CreationDisposition_e dwCreationDisposition,
    FileAttributes_e dwFlagsAndAttributes,
    IntPtr hTemplateFile
    );

private enum MEDIA_TYPE {
    Unknown=0x00,
    F5_1Pt2_512=0x01,
    F3_1Pt44_512=0x02,
    F3_2Pt88_512=0x03,
    F3_20Pt8_512=0x04,
    F3_720_512=0x05,
    F5_360_512=0x06,
    F5_320_512=0x07,
    F5_320_1024=0x08,
    F5_180_512=0x09,
    F5_160_512=0x0a,
    RemovableMedia=0x0b,
    FixedMedia=0x0c,
    F3_120M_512=0x0d,
    F3_640_512=0x0e,
    F5_640_512=0x0f,
    F5_720_512=0x10,
    F3_1Pt2_512=0x11,
    F3_1Pt23_1024=0x12,
    F5_1Pt23_1024=0x13,
    F3_128Mb_512=0x14,
    F3_230Mb_512=0x15,
    F8_256_128=0x16,
    F3_200Mb_512=0x17,
    F3_240M_512=0x18,
    F3_32M_512=0x19
}

[StructLayout(LayoutKind.Sequential)]
private struct DISK_GEOMETRY {
    public Int64 Cylinders;
    public MEDIA_TYPE MediaType;
    public Int32 TracksPerCylinder;
    public Int32 SectorsPerTrack;
    public Int32 BytesPerSector;
} 
```

我使用的枚举来自

*   [pinvoke.net: 创建文件 (kernel32)](http://www.pinvoke.net/default.aspx/kernel32.createfile)

*   [pinvoke.net: deviceiocontrol (kernel32)](http://www.pinvoke.net/default.aspx/kernel32.deviceiocontrol)

`bytesReturned`变量被设置（在本例中为 24），但变量`dg`全为零。

我尝试了其他几个`DeviceIoControl`具有相同结果的函数：`bytesReturned`已设置但输出缓冲区全为零。

我的测试环境

*   操作系统：Windows 7 Pro 64
*   IDE：Visual Studio 2010
*   目标框架：.Net 4.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:19:31.430

DISK_GEOMETRY 声明是问题所在。它被编组为一个对象，但它被声明为一个结构。这意味着它将被**装箱**，只有装箱的副本会被 pinvoke 调用更新。您正在读取原始值，因此得到全零。

简单的解决方法是将其声明为*类*而不是结构。

# javascript - 谷歌图表 - 值为零时不显示点

> ID：13192622
> 
> 赞同：7
> 
> 时间：2012-11-02T09:34:34.613
> 
> 标签：javascript, google-visualization

我正在使用 Google Charts 来显示一些时间序列数据，如下所示。通常，数据的零值比例很高，因此您会在 x 轴上获得很多点。我认为这会使图表看起来杂乱无章，我不想显示 y=0 的点。

任何想法/指针都非常感谢。

谢谢，

ct

![包含 y=0 的数据点的繁忙图表](../Images/199bf4d2e806973cad08935e7958a66a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-16T16:02:28.607

最好的选择是使用 null 而不是 0（会有缺失的点）。然后你可以使用选项 interpolateNulls 来加入这些值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T13:53:46.923

将您的数据设置为`null`而不是`0`. 但是，在示例图表中，如果第一个值是 say`5`并且第 2 到第 20 被`0`设置为第 2 和第 20 到`0`和第 3 到第 19 到`null`。这将正确显示图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:03:34.933

如果您不希望它具有真实值之间的所有点，则可以从数据中完全删除这些值。在值之后保留第一个 0 点，在再次获得值之前保留 0 点。

这个：

```
[1000, 12],
[1001, 16],
[1002, 0],
[1003, 0],
[1004, 0],
[1005, 0],
[1006, 4],
[1007, 2],
[1008, 0],
[1009, 14] 
```

变成：

```
[1000, 12],
[1001, 16],
[1002, 0],
[1005, 0],
[1006, 4],
[1007, 2],
[1008, 0],
[1009, 14] 
```

这应该只在 1002 处显示一个零点，在 1005 处显示一个零点，以及它们之间没有点的线。

# c# - 如何在 Silverlight 的 Treeview 中添加子节点

> ID：13192624
> 
> 赞同：0
> 
> 时间：2012-11-02T09:34:46.493
> 
> 标签：c#, silverlight-4.0, treeview, treeviewitem

我在silverlight Page中有一个Treeview。现在我必须在Treeview中以编程方式将节点添加到每个节点的子节点。我该怎么做？

我的代码是这样的

```
 TreeViewItem item1 = new TreeViewItem();
 item1.Header = "Products";
 item1.Items.Add(new TreeViewItem() { Header = "Media Players" });
 item1.Items.Add(new TreeViewItem() { Header = "Games" });
 item1.Items.Add(new TreeViewItem() { Header = "Charts" });
 MyTreeView1.Items.Add(item1); 
```

现在这会给我这样的输出

```
Products
   Media Players    
   Games
   Charts 
```

但我想要这样的输出

```
Products
   Media Players 
      Games
         Charts 
```

意味着必须将节点添加到新创建节点的子节点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:43:56.637

那这个呢？

```
 var products = new TreeViewItem {Header = "Products"};
    var mediaPlayers = new TreeViewItem() {Header = "Media Players"};
    var charts = new TreeViewItem() { Header = "Charts" };
    var games = new TreeViewItem() { Header = "Games" };

    products.Items.Add(mediaPlayers);
    mediaPlayers.Items.Add(games);
    games.Items.Add(charts);

MyTreeView1.Items.Add(products); 
```

# php - PHP 和 JavaScript 中浮点数的正则表达式

> ID：13192630
> 
> 赞同：-1
> 
> 时间：2012-11-02T09:35:30.727
> 
> 标签：php, javascript

> **可能重复：**
> [PHP 正则表达式 - 有效的浮点数](https://stackoverflow.com/questions/3941052/php-regex-valid-float-number)

php 中的正则表达式以及浮点数的 javascript 中的正则表达式是什么？

我想匹配 3、3.3 或 0.3 和 0 之类的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:36:37.730

浮点数没有标记。如果要匹配浮点数，则必须使用数字 + 点 + 数字，如下所示：

```
\d+(\.\d+)? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:39:19.313

PHP：

```
is_numeric($nb); 
```

JS：

```
!isNaN(+nb); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:42:20.137

如果要检查给定字符串是否为 int/float：

```
/^\d+(\.\d+){0,1}$/ 
```

如果要匹配给定字符串中的*所有*数字：

```
/\b\d+(\.\d+){0,1}\b/g 
```

那应该给你你需要的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:45:34.777

浮点数也可以写成`.3`，在这种情况下，这等于`0.3`覆盖您需要的所有内容：

```
/((?:\d)?(?:.\d+)?)/ 
```

这会将结果分组为一个完整的字符串，而不会将其拆分为子结果。

所以这将匹配`33`, `3.3`&`.33`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:47:01.440

这取决于你想要什么：只检查？正如 Florian Margaine 所说：`is_numeric($nb)`在 PHP 中用于浮点数和`ctype_digits($nb)`整数。在 JS`!isNaN(+nb);`中用于浮点数和`typeof($nb) == "Integer"`整数。

如果您想转换您的号码（并同时签入）：

```
//for floats
$floatNb = (float) $nb;
if($floatNb != 0 || $nb === "0")//now you are sure that $nb was a float and $floatNb is the float representation 
```

如果您有国际号码，请使用intl extension中的[数字格式化程序：](http://www.php.net/manual/en/numberformatter.parse.php)

```
<?php
$fmt = numfmt_create( 'de_DE', NumberFormatter::DECIMAL );
$num = "1.234.567,891";
echo numfmt_parse($fmt, $num)."\n"; 
```

正则表达式永远不适合类型检查

# sql-server-2008-r2 - SQL Server - 查找查询使用的所有表/列

> ID：13192632
> 
> 赞同：2
> 
> 时间：2012-11-02T09:35:40.283
> 
> 标签：sql-server-2008-r2

我想分析一个查询列表以找出报告与某些表/字段的依赖关系，以尝试记录数据结构重构的影响。

有没有办法（可能利用 SQL Server 查询解析器）根据查询字符串输入找出正在使用的表/字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T18:31:56.523

如果您为查询创建视图或存储过程，则[sys.dm_sql_referenced_entities](http://msdn.microsoft.com/en-us/library/bb677185.aspx)将列出对其他数据库对象的依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:05:07.530

您可以查看查询的执行计划，然后对该输出进行后处理以接近您要查找的内容。

[http://msdn.microsoft.com/en-us/library/ms187735(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms187735(v=sql.105).aspx)

是 SHOWPLAN_ALL T-SQL 命令的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:59:48.807

您可以发出`SET SHOWPLAN_XML ON`并运行查询（在另一批中）。

这将返回您`XML`预期的执行计划。

您可以搜索`//ColumnReference`包含`@Database`、`@Schema`和`@Table`的内容`@Column`。

但是请注意，优化器可能会决定扩展视图（如果您正在使用它们），优化一些表（如果它决定不需要它们）等。这也可能有助于重构。

您也可以运行`SET STATISTICS IO ON`并读取输出。它将显示引擎使用的表上的实际 I/O。

# c# - 使用 Path 类 ASP.NET MVC 3 全面获取特定文件夹路径

> ID：13192637
> 
> 赞同：1
> 
> 时间：2012-11-02T09:36:00.203
> 
> 标签：c#, asp.net-mvc-3

我有以下完整路径：

`D:\Test1\Test1_1\Test2_1\Test3_1\Test4_1`

如果我打电话

`Path.GetFileName(abovePath)`将返回`Test4_1`

[从完整路径获取目录](https://stackoverflow.com/questions/670819/get-directory-from-full-path)

出色地。

例如，我想得到`Test2_1\Test3_1`。

如果可能的话，如何在`Path`课堂上做到这一点？如果没有，如何进行？

我想要一个通用的例子，不要只关注我给定的完整路径。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:56:29.570

使用 DirectoryInfo 和 Parent，例如

```
var directoryInfo = new DirectoryInfo(abovePath);
var parentDirectoryName = directoryInfo.Parent.Name;
var grandParentDirectoryName = directoryInfo.Parent.Parent.Name; 
```

请注意，您需要对这些进行空检查，但这是一般的想法

# javascript - 如何在jquery中调用onfocus事件的函数

> ID：13192638
> 
> 赞同：3
> 
> 时间：2012-11-02T09:36:00.727
> 
> 标签：javascript, jquery

其实我的问题是不同的。

我在我的小盒子中的第一个表单元素的 .focus 事件上调用了一个函数，如下所示。

```
 $(".tbox :input:visible:enabled:first").focus(function () {
            tabIndexForm();
         }); 
```

它工作得很好，但这正在替换我自己在我手动设置的表单的第一个元素上调用 onfocus 事件的函数。这个怎么做。我的表格是：

```
 <form name="exampleform">
  <input type="text" name="a" onfocus="somefunction();"/>
  <input type="text" name="b"/>
  </form> 
```

现在，当我打开小盒子时，tabIndexForm 函数完美调用，但是 somefunction() 不起作用，因为我认为 tabIndexForm 替换了这个函数。如何更新以下代码以同时工作。

```
 $(".tbox :input:visible:enabled:first").focus(function () {
            tabIndexForm();
         }); 
```

重要提示：我不能在 tinybox.js 中调用“somefunction()”，因为这对所有小盒子都很常见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:42:24.010

“焦点”函数/绑定/事件处理程序到元素。

尝试新的“on”函数，它/adds/ 一个事件处理程序。

```
$(".tbox :input:visible:enabled:first").on('focus', function () {
        tabIndexForm();
}); 
```

**编辑**第一次尝试不起作用。

这应该会更好：

```
$(".tbox").on('focus', ":input:visible:enabled:first", function () {
        tabIndexForm();
}); 
```

这样，事件处理程序就不会附加到元素上，因此它不会覆盖旧的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:40:27.890

这应该有效：

```
var elem = $(".tbox :input:visible:enabled:first");
var oldFunc = elem[0].onfocus;
elem.focus(function () {
    if(typeof oldFunc == 'function') oldFunc.call(elem[0]);
    tabIndexForm();
}); 
```

检查这个**演示**：http: [//jsfiddle.net/8JbvY/](http://jsfiddle.net/8JbvY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:43:28.103

`onfocus`从元素中删除属性：

```
<form name="exampleform">
  <input type="text" name="a"/>
  <input type="text" name="b"/>
</form> 
```

并将您的 javascript 更改为：

```
$(".tbox input[name='a']").focus(somefunction);

$(".tbox :input:visible:enabled:first").focus(function () {
     tabIndexForm();
}); 
```

这也是处理事件处理程序的一种更简洁的方式，因为您将逻辑保存在一个地方。

# asterisk - 无法创建类型为“DAHDI”的频道（原因 17 - 用户忙）

> ID：13192639
> 
> 赞同：1
> 
> 时间：2012-11-02T09:36:05.797
> 
> 标签：asterisk

我的 PC 中有 6 个带 TDM2400p 的红色 FXO。我已经安装了星号和 dahdi 驱动程序。情景是

jitsi-----> 星号服务器-----> 模拟 PBX ----> 固定电话

我将此方案配置如下

在 chan_dahdi.conf 文件中

```
; General options
[channels]
usecallerid=yes
hidecallerid=no
callwaiting=yes
threewaycalling=yes 
transfer=yes
echocancel=yes
echocancelwhenbridged=yes
rxgain=0.0 
txgain=0.0
;FXO Modules
group=2
echocancel=yes
signalling=fxs_ks
context=Incoming
channel=1-20 
```

在 astrisk 中加载模块后，在下面给出 o/p

```
module load chan_dahdi.so
Loaded chan_dahdi.so
== Parsing '/etc/asterisk/chan_dahdi.conf':   == Found
== Parsing '/etc/asterisk/users.conf':   == Found
-- Registered channel 1, FXS Kewlstart signalling
-- Registered channel 2, FXS Kewlstart signalling
-- Registered channel 3, FXS Kewlstart signalling
-- Registered channel 4, FXS Kewlstart signalling
-- Registered channel 5, FXS Kewlstart signalling
-- Registered channel 6, FXS Kewlstart signalling
-- Registered channel 7, FXS Kewlstart signalling
-- Registered channel 8, FXS Kewlstart signalling
-- Registered channel 9, FXS Kewlstart signalling
-- Registered channel 10, FXS Kewlstart signalling
-- Registered channel 11, FXS Kewlstart signalling
-- Registered channel 12, FXS Kewlstart signalling
-- Registered channel 13, FXS Kewlstart signalling
-- Registered channel 14, FXS Kewlstart signalling
-- Registered channel 15, FXS Kewlstart signalling
-- Registered channel 16, FXS Kewlstart signalling
-- Registered channel 17, FXS Kewlstart signalling
-- Registered channel 18, FXS Kewlstart signalling
-- Registered channel 19, FXS Kewlstart signalling
-- Registered channel 20, FXS Kewlstart signalling
-- Automatically generated pseudo channel
[Nov  2 14:38:50] WARNING[1886]: chan_dahdi.c:17278 process_dahdi: Ignoring any changes to 'userbase' (on reload) at line 23.
[Nov  2 14:38:50] WARNING[1886]: chan_dahdi.c:17278 process_dahdi: Ignoring any changes to 'vmsecret' (on reload) at line 31.
[Nov  2 14:38:50] WARNING[1886]: chan_dahdi.c:17278 process_dahdi: Ignoring any changes to 'hassip' (on reload) at line 35.
[Nov  2 14:38:50] WARNING[1886]: chan_dahdi.c:17278 process_dahdi: Ignoring any changes to 'hasiax' (on reload) at line 39.
[Nov  2 14:38:50] WARNING[1886]: chan_dahdi.c:17278 process_dahdi: Ignoring any changes to 'hasmanager' (on reload) at line 47.
== Registered channel type 'DAHDI' (DAHDI Telephony Driver)
== Manager registered action DAHDITransfer
== Manager registered action DAHDIHangup
== Manager registered action DAHDIDialOffhook
== Manager registered action DAHDIDNDon
== Manager registered action DAHDIDNDoff
== Manager registered action DAHDIShowChannels
== Manager registered action DAHDIRestart
Loaded chan_dahdi.so => (DAHDI Telephony Driver) 
```

在我的 extension.conf 文件中，我为用户编写了拨号计划，因此 sandeep 是 jitsi 用户，81 和 88 是固定电话号码。

```
[general]
static=yes
writeprotect=no
clearglobalvars=no

[Incoming]
exten => s,1,Answer
exten => s,2,Dial(DAHDI/g1,20,rt)
exten => s,3,Voicemail(1000,u)
exten => s,103,Voicemail(1000,b)
exten => sandeep,1,Dial(SIP/sandeep)
exten => sandeep,n,Hangup()

exten => 1004,4,Dial(SIP/sandeep)
exten => 1004,n,Hangup()
; Testing extension, prepare to be insulted like a
; Monthy Python knight

exten => 81,1,Dial(DAHDI/1,20,rt)
exten => 81,n,Hangup()

exten => 88,1,Dial(DAHDI/1,20,rt)
exten => 88,n,Hangup()

exten => 8500,1,VoiceMailMain
exten => 8501,1,MusicOnHold
exten => _9.,1,Dial(DAHDI/g2/www${EXTEN:1})
exten => _9.,2,Congestion

exten => 201,1,Answer()
exten => 201,n,Playback(tt-monty-knights)
exten => 201,n,Hangup()

; Echo-test, it is good to test if we have sound in both directions.
; The call is answered
exten => 202,1,Answer()
; Welcome message is played
exten => 202,n,Playback(welcome)
; Play information about the echo test
exten => 202,n,Playback(demo-echotest)
; Do the echo test, end with the # key
exten => 202,n,Echo()
; Plays information that the echo test is done
exten => 202,n,Playback(demo-echodone)
; Goodbye message is played
exten => 202,n,Playback(vm-goodbye)
; Hangup() ends the call, hangs up the line
exten => 202,n,Hangup() 
```

加载分机和 dahdi 后，我从 jitsi 打来电话并拨了 81，但星号给出如下所示的 o/p 并且 jitsi 出现忙音

```
-- Executing [81@myphones:1] Dial("SIP/sandeep-00000000", "DAHDI/1,20,rt") in new stack
-- Called 1
[Nov  2 14:45:31] WARNING[2145]: chan_dahdi.c:7536 handle_alarms: Detected alarm on channel 1: Red Alarm
-- Hanging up on 'DAHDI/1-1'
-- Hungup 'DAHDI/1-1'
== Everyone is busy/congested at this time (1:0/0/1)
-- Executing [81@myphones:2] Hangup("SIP/sandeep-00000000", "") in new stack
== Spawn extension (myphones, 81, 2) exited non-zero on 'SIP/sandeep-00000000' 
```

任何帮助解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:16:41.363

我的问题得到了解决。电池电压不正确。非常感谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T17:11:01.650

看起来 FXO 端口未插入（或电池电量不足）。它在模拟 FXO 端口上显示 RED ALARM，这意味着该卡无法检测到电话公司提供的电池电压的存在。

此外，通常当您通过 FXO 端口拨出时，您需要提供要拨打的数字。喜欢拨号（DAHDI/1/xxxx）。

# c - 如何将队列传递给c中的另一个函数

> ID：13192642
> 
> 赞同：1
> 
> 时间：2012-11-02T09:36:09.757
> 
> 标签：c

我试图将队列传递给c中的另一个函数以便对其进行一些操作，我试图发送它的引用并在函数参数中放入一个指针，但这没有意义！

这就是我所做的：

这是来电者：

```
G = my_job(&qu, inducing_cell, target_cell, G, vertices_number, cells_number); 
```

这是功能：

```
graph* my_job(Queue *qu, Position inducing_cell, Position target_cell, graph* G, unsigned long vertices_number, unsigned long cells_number) {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:43:48.993

您需要将变量的地址传递给`Queue`结构。

所以如下：

```
 Queue q; //create a queue instance
 G =  my_job(&q /*Pass in address to Q*/, inducing_cell, target_cell, G, vertices_number, cells_number); 
```

或者您可以创建一个指向 a 的指针`Queue`并将其传入：

```
 Queue* q = malloc(sizeof(Queue)); //Make sure you have allocated the pointer (unless my_job allocates it inside)
 G = my_job(q /*Pass in pointer (pointer is copied)*/, inducing_cell, target_cell, G, vertices_number, cells_number);
 //Do stuff with q
 free(q); // Free the memory. 
```

如果你想传入一个指针来改变它所指向的内容并在函数返回时查看变化，你需要传入a，`Queue**`因为指针是按值传递的，即它被复制到函数中。因此，如果您更改它指向内部的内容，则在函数返回时不会看到该更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:40:15.830

我认为您需要详细说明您正在执行的操作类型。qu 是变量还是指针？

如果 qu 是一个指针，那么你只需要传递指针，而不是它的地址。但是，如果要在函数中修改指针本身，函数参数必须是`Queue** que`，并且需要将qu的地址传递给函数。将其定义为 C 中的简单规则；如果要修改函数中的变量，则需要将变量的地址传递给函数。

# javascript - 是否可以从 JavaScript 访问 SQLite 数据库？

> ID：13192643
> 
> 赞同：112
> 
> 时间：2012-11-02T09:36:12.747
> 
> 标签：javascript, html, database, sqlite

我有一组 HTML 文件和一个 SQLite 数据库，我想使用 file:// 方案从浏览器访问它们。是否可以使用 JavaScript 访问数据库并创建查询（和表）？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-02T09:46:11.197

其实答案是肯定的。这是一个如何执行此操作的示例：http: [//html5doctor.com/introducing-web-sql-databases/](http://html5doctor.com/introducing-web-sql-databases/)

坏事是浏览器对它的支持非常有限。

此处提供更多信息[HTML5 IndexedDB、Web SQL 数据库和浏览器大战](https://stackoverflow.com/questions/3971813/html5-indexeddb-web-sql-database-and-browser-wars)

PS：正如@Christoph 所说[，Web SQL 不再处于主动维护状态，Web 应用程序工作组也不打算进一步维护它，](http://www.w3.org/TR/webdatabase/)所以请看这里[https://developer.mozilla.org/en-US/docs/IndexedDB](https://developer.mozilla.org/en-US/docs/IndexedDB)。

## SQL.js

*编辑*

[正如@clentfort 所说，您可以使用SQL.js](https://github.com/sql-js/sql.js)使用客户端 JavaScript 访问 SQLite 数据库。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-11-02T09:52:00.780

您可以使用[**SQL.js**](https://github.com/sql-js/sql.js)，它是编译为 JavaScript 的 SQLlite 库，并将数据库存储在 HTML5 中引入的本地存储中。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-05-29T19:36:42.707

# 最新答案

我的 sql.js 分支现在已合并到[kriken 的 repo 上的原始版本中](https://github.com/kripken/sql.js)。

[好的文档](http://kripken.github.io/sql.js/documentation)也可以在原始仓库中找到。

# 原始答案（已过时）

您应该使用[较新版本的**sql.js**](https://github.com/lovasoa/sql.js)。它是 sqlite 3.8 的一个端口，有一个[很好的文档](http://lovasoa.github.io/sql.js/documentation)并且（由我）积极维护。它支持预处理语句和 BLOB 数据类型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-02T10:02:31.660

其中最有趣的功能之一`HTML5`是能够在本地存储数据并允许应用程序脱机运行。有三种不同的 API 可以处理这些功能，选择一种取决于您想要对计划在本地存储的数据做什么：

1.  Web 存储：用于具有键/值对的基本本地存储
2.  离线存储：使用清单缓存整个文件以供离线使用
3.  Web数据库：用于关系数据库存储

如需更多参考，请参阅[介绍 HTML5 存储 API](http://www.adobe.com/devnet/html5/articles/html5-storage-apis.html)

以及如何使用

[http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html](http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-02T16:47:10.543

使用 PouchDB 之类的东西怎么样？[http://pouchdb.com/](http://pouchdb.com/)

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2016-01-30T13:50:49.953

恕我直言，最好的方法是通过 AJAX 使用 POST 调用 Python，并在 Python 中对 DB 执行所有操作，然后将结果返回给 javascript。Python 中的 json 和 sqlite 支持非常棒，它 100% 内置在 Python 的最新版本中，因此没有“安装这个，安装那个”的痛苦。在 Python 中：

```
import sqlite3
import json 
```

......这就是你所需要的。它是每个 Python 发行版的一部分。

@Sedrick Jefferson 要求提供示例，所以（有点迟到）我在[这里编写了 Javascript 和 Python 之间的独立来回。](http://fyngyrz.com/?p=2802)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2021-06-24T17:47:53.470

最好用 python 和 flask 编码。如果您将[WebSQL](http://html5doctor.com/introducing-web-sql-databases/)与 JavaScript 一起使用，那么它只会保存单个窗口的数据，而不是全球范围内的数据，因为它是一个浏览器 cookie。[Flask](https://www.tutorialspoint.com/flask/index.htm)是一个 python 网络服务器，一旦你用它创建一个页面，你就可以[导入 sqlite3](https://www.tutorialspoint.com/flask/flask_sqlite.htm)。另一种方法是使用 php，但要点是使用 JavaScript 是个坏主意。

PS 实际上你可以尝试使用[loaclStorage](https://www.w3schools.com/jsref/prop_win_localstorage.asp)我听说它可以保存数据只要你想保存它。

# php - Ajax 链式选择框不刷新

> ID：13192644
> 
> 赞同：1
> 
> 时间：2012-11-02T09:36:14.043
> 
> 标签：php, javascript, ajax

好的，所以我创建了一个 Javascript/PHP/Ajax 应用程序。我有一系列 6 个选择框。第一个是用 HTML 硬编码的。当您更改选择时，它会通过 Ajax 向 PHP 发送一个变量，PHP 使用该变量来查询数据库。当第二个框发生变化时，它会发送前一个选择框的 2 个变量。

每次更改选择框时，都会添加另一个要发送的变量。最后总共有 5 或 6 个变量，这一切都很好，一切都运行良好，几乎在做我想做的事情。

我的问题出现在选择框 3 和 6 上。

最初它们工作正常。但是当您返回更改选择框 2 时，数字 3 不会刷新。值与以前保持一致。与数字 6 相同，当我更改数字 3 时，框 4 会更改，并且按顺序框 5 会更改，但是框 6 仍与之前的查询相同。使用的所有 Ajax 代码都是相同的，只是变量名称和相关元素发生了变化。

有人可以帮忙吗？我将发布应用程序的链接和相关的 ajax 代码。

只是让您知道最初只有选择框 1 可见，其余的由 php/ajax onchange 生成。

这是有问题的代码

```
function getHTTPObject(){
 if (window.ActiveXObject) 
   return new ActiveXObject("Microsoft.XMLHTTP");
 else if (window.XMLHttpRequest) 
   return new XMLHttpRequest();
 else {
  alert("Your browser does not support AJAX.");
  return null;
 }
 }

function doWork(){ 
var selectBox = document.getElementById("SelectManufacturer"); // get  HTML select box by id
httpObject = getHTTPObject();

    httpObject.open("GET", "http://4udev.refixstudios.co.uk/wp-content/martTest/bNbAjax.php?inputText="
        +selectBox.options[selectBox.selectedIndex].text , true);

    httpObject.onreadystatechange=function()
            {
            if (httpObject.readyState==4 && httpObject.status==200)
                    {
                    document.getElementById('selectModel').innerHTML =  httpObject.responseText;;
                    }
}
httpObject.send()
}

function networkSelector()
{ 
var selectBox2 = document.getElementById("SelectManufacturer"); // get  HTML select box by id
var selectModel = document.getElementById("modelSelector");
httpObject2 = getHTTPObject();

httpObject2.open("GET", "http://4udev.refixstudios.co.uk/wp-content/martTest/NetworkAjax.php?inputText2=" +selectBox2.options[selectBox2.selectedIndex].text +"&modelText2="+selectModel.options[selectModel.selectedIndex].text, true); 

    httpObject2.onreadystatechange = function()
{

if(httpObject2.readyState == 4 && httpObject2.status==200){

  document.getElementById("networkSelect").innerHTML = httpObject2.responseText;
}

}
httpObject2.send();
}

function minuteSelector(){ 
    var selectBox3 = document.getElementById("SelectManufacturer"); // get  HTML select box by id
    var selectModel3 = document.getElementById("modelSelector");
    var NetworkSelect3 = document.getElementById("networkSelector");

    httpObject3 = getHTTPObject();

    httpObject3.open("GET", "http://4udev.refixstudios.co.uk/wp-content/martTest/minuteAjax.php?inputText3="+selectBox3.options[selectBox3.selectedIndex].text+"&modelText3="+selectModel3.options[selectModel3.selectedIndex].text+"&networkText3="+NetworkSelect3.options[NetworkSelect3.selectedIndex].text, true);

    httpObject3.onreadystatechange = function(){

if(httpObject3.readyState == 4 && httpObject3.status==200){

    document.getElementById("minuteSelect").innerHTML =httpObject3.responseText;
}

}
httpObject3.send();
}

function textSelector(){ 
    var selectBox4 = document.getElementById("SelectManufacturer"); // get  HTML select box by id
    var selectModel4 = document.getElementById("modelSelector");
    var networkSelect4 = document.getElementById("networkSelector");
    var minuteSelect4 = document.getElementById("minutesSelector");

    httpObject4 = getHTTPObject();

    httpObject4.open("GET", "http://4udev.refixstudios.co.uk/wp-content/martTest/textAjax.php?inputText4=" +selectBox4.options[selectBox4.selectedIndex].text+"&modelText4="+selectModel4.options[selectModel4.selectedIndex].text+"&networkText4="+networkSelect4.options[networkSelect4.selectedIndex].text +"&minuteText4="+minuteSelect4.options[minuteSelect4.selectedIndex].text, true);

    httpObject4.onreadystatechange = function(){

if(httpObject4.readyState == 4 && httpObject4.status==200){

    document.getElementById("textSelect").innerHTML =httpObject4.responseText;
}

}
httpObject4.send();
}

function dataSelector(){ 
    var selectBox5 = document.getElementById("SelectManufacturer"); // get  HTML select box by id
    var selectModel5 = document.getElementById("modelSelector");
    var networkSelect5 = document.getElementById("networkSelector");
    var minuteSelect5 = document.getElementById("minutesSelector");
    var textsSelector5 = document.getElementById("textsSelector");

    httpObject5 = getHTTPObjectAgainB();

    httpObject5.open("GET", "http://4udev.refixstudios.co.uk/wp-content/martTest/dataAjax.php?inputText5="+selectBox5.options[selectBox5.selectedIndex].text+"&modelText5="+selectModel5.options[selectModel5.selectedIndex].text+"&networkText5="+networkSelect5.options[networkSelect5.selectedIndex].text +"&minuteText5="+minuteSelect5.options[minuteSelect5.selectedIndex].text+"&textText5="+textsSelector5.options[textsSelector5.selectedIndex].text, true);

    httpObject5.onreadystatechange = function (){

if(httpObject5.readyState == 4){

    document.getElementById("dataSelect").innerHTML = httpObject5.responseText;
}

}
httpObject5.send()
} 
```

这是应用程序的链接[http://4udev.refixstudios.co.uk/csv-test/](http://4udev.refixstudios.co.uk/csv-test/)

最好的测试方法是购买选择任何制造商和型号然后选择网络，然后选择Apple---The New Ipad 4G，这就是你注意到它没有变化的方式。此选择仅应将橙色带回网络

这是它调用的 PHP

```
<?php

if (isset($_GET['inputText2'])) 
{
    $manufacturer = ($_GET['inputText2']);

    if (isset ($_GET['modelText2']))
    {

        $model = ($_GET['modelText2']);

    }

}

$conA = mysql_connect("localhost","****","*****");
if (!$conA)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("refixstu_4udev", $conA);
$selectApplea = mysql_query("SELECT DISTINCT network FROM wp_selector_apple WHERE model = '$model' ");
$selectBlackberry = mysql_query("SELECT DISTINCT network FROM wp_selector_blackberry    WHERE model = '$model'");
$selectDoro = mysql_query("SELECT DISTINCT network FROM wp_selector_doro WHERE model = '$model'");
$selectHTC = mysql_query("SELECT DISTINCT network FROM wp_selector_htc WHERE model = '$model'");
$selectLG = mysql_query("SELECT DISTINCT network FROM wp_selector_lg WHERE model = '$model'");
$selectMotorola = mysql_query("SELECT DISTINCT network FROM wp_selector_motorola WHERE model = '$model'");
$selectNokia = mysql_query("SELECT DISTINCT network FROM wp_selector_nokia WHERE model = '$model'");
$selectSamsung = mysql_query("SELECT DISTINCT network FROM wp_selector_samsung WHERE model = '$model'");
$selectSony = mysql_query("SELECT DISTINCT network FROM wp_selector_sony WHERE model = '$model'");
$selectSonyE = mysql_query("SELECT DISTINCT network FROM wp_selector_sonyericsson WHERE model = '$model'");
$selectZte = mysql_query("SELECT DISTINCT network FROM wp_selector_ZTE WHERE model = '$model'");

?>

<select id="networkSelector" style="width:100px;" align="right"  onchange="minuteSelector()"> 
<option> Select Network </option>
<?php

                        // Start Apple Testing

                        if($manufacturer == "Apple")
                        {

                                    while($rowa = mysql_fetch_array($selectApplea))

                                    { 
                                            foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }
                        else if($manufacturer == "BlackBerry")
                        {                           
                            while($rowa = mysql_fetch_array($selectBlackberry))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }
                        }
                        else if($manufacturer == "Doro")
                        {                           
                            while($rowa = mysql_fetch_array($selectDoro))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }
                        }
                        else if($manufacturer == "HTC")
                        {                           
                            while($rowa = mysql_fetch_array($selectHTC))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }
                        }
                        else if($manufacturer == "LG")
                        {

                                    while($rowa = mysql_fetch_array($selectLG))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }
                        else if($manufacturer == "Motorola")
                        {

                                    while($rowa = mysql_fetch_array($selectMotorola))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }
                        else if($manufacturer == "Nokia")
                        {

                                    while($rowa = mysql_fetch_array($selectNokia))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }
                        else if($manufacturer == "Samsung")
                        {

                                    while($rowa = mysql_fetch_array($selectSamsung))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }
                        else if($manufacturer == "Sony")
                        {

                                    while($rowa = mysql_fetch_array($selectSony))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }
                        else if($manufacturer == "Sone Ericsson")
                        {

                                    while($rowa = mysql_fetch_array($selectSonyE))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }
                        else if($manufacturer == "Zte")
                        {

                                    while($rowa = mysql_fetch_array($selectLG))

                                    { 
                                        foreach(array_unique($rowa) as $model)
                                        {
                                            echo"<option>"; echo $rowa['network']; echo"</option>";

                                        }

                                    }

                        }

                        mysql_close($conA);
                        ?>

                        </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:22:51.623

i have solved the problem. My onchange called networkSelector(). I had a HTML form element named the same and that was conflicting. I have simple changed the function name and it works on my test server yay! thank you for the help. Muchly appreciated

# iphone - 停止在 PC 上打开 iphone 网站

> ID：13192645
> 
> 赞同：0
> 
> 时间：2012-11-02T09:36:15.640
> 
> 标签：iphone, .htaccess

我的 iphone 网站在谷歌搜索上的可见度比原始网站更多。而且它作为一个 iphone 站点在 PC 上运行，这有点让人分心。如果不是 iphone 设备，我想重定向到主站点。

我尝试了这个 htaccess 代码，但它对我不起作用：

```
RewriteCond %{HTTP_USER_AGENT} !^"iPhone" [NC]
RewriteRule .? http://www.example.com%{REQUEST_URI} [R=301,L] 
```

# android-intent - setting group owner in android wifi direct

> ID：13192649
> 
> 赞同：2
> 
> 时间：2012-11-02T09:36:30.393
> 
> 标签：android-intent, p2p, intentfilter, wifi-direct

Device with the higher intent becomes the group owner is said in the following link: [http://developer.bada.com/help_2.0/index.jsp?topic=%2Fcom.osp.cppappprogramming.help%2Fhtml%2Fdev_guide%2Fnet%2Fwi-fi_direct_connectivity.htm](http://developer.bada.com/help_2.0/index.jsp?topic=%2Fcom.osp.cppappprogramming.help%2Fhtml%2Fdev_guide%2Fnet%2Fwi-fi_direct_connectivity.htm)

I tried the following in the google-demo project of wifi-direct. In the main activity class from where broadcast receiver was called I set the priority as follows while running in one device.

```
public void onResume() {
    super.onResume();
    receiver = new WiFiDirectBroadcastReceiver(manager, channel, this);
    intentFilter.setPriority(999);
    registerReceiver(receiver, intentFilter);
} 
```

While running the code in next device I didn't set the priority.

```
public void onResume() {
    super.onResume();
    receiver = new WiFiDirectBroadcastReceiver(manager, channel, this);        
    registerReceiver(receiver, intentFilter);
} 
```

So as per the link the device with the higher priority should have been the group owner but setting priority does not seem working. Is there a way to explicitly assign a particular device as the group owner while connection establishes between two devices ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-10T15:32:52.170

在你的 connect 方法中设置 WifiP2pConfig 对象的 groupOwnerIntent，取值范围是 0 到 15。0 表示最小的倾向是 GO，15 表示最高的倾向是 GO：

WifiP2pConfig 配置 = 新 WifiP2pConfig();

```
 config.groupOwnerIntent = 0;  //Less probability to become the GO
    config.deviceAddress = service.device.deviceAddress;
    config.wps.setup = WpsInfo.PBC; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T19:35:25.520

首先，您提供的链接是针对 bada 手机的。我对该操作系统了解不多，但分配可能会有所不同。

无论如何，您可以为您想要的任何设备手动分配意图值。例如，假设您要将单击连接按钮的用户设置为组所有者。根据定义，组所有者应该具有最高的倾向，这意味着大于 0。检查[此](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pConfig.html#groupOwnerIntent)链接。

要将同级分配为组所有者，只需将其分配给 15

```
config.groupOwnerIntent = 15; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T10:54:08.443

当我使用 config.groupOwnerIntent = 0 连接到远程设备时，这是否意味着我的设备将成为组所有者或远程设备将成为组所有者？

鉴于远程设备的意图值大于 0 ，您的 config.groupOwnerIntent = 0 设备应该成为客户端。如果两个设备都具有相同的意图值，那么决胜局就会出现。“intent 值越大，成为 GO 的机会越大”。我们不能简单地通过将 Intent 值设置为 zer0 来使设备充当组所有者。这也取决于其他连接设备的 Intent 值。

# php - JS / PHP datetimes & timezones , user comments that expires on a specific datetime

> ID：13192654
> 
> 赞同：2
> 
> 时间：2012-11-02T09:36:54.470
> 
> 标签：php, javascript, browser, timezone, webserver

On my app users can posts comments and specify the comment's expire datetime.

The process is simple:

They choose a date and the date is inserted inside DB with the comment by PHP in format (Y-m-d H:m:s).

Then when i visualize comments i put a JS countdown on each one comment.

Countdown is calculated by JS from the current JS datetime until the DB stored expiration_datetime CONVERTED IN JS,and this is for each one comment.

So i'm wondering while, inserting i use PHP, then outputting i use JS, will this produce any problem related to timezones and user's browsers datetime vs server datetime?

in PHP i do:

`$expiration_datetime = date('Y-m-d H:m:s');`

in JS i convert :

`var expiration_datetime = new Date(<?php $expiration_datetime[0]?>,<?php $expiration_datetime[1]?>,<?php $expiration_datetime[2]?>,<?php $expiration_datetime[3]?>,<?php $expiration_datetime[4]?>,<?php $expiration_datetime[5]?>,);`

So i'm wondering if converting datetime by JS will produce any kind of problem for users with different timezones, at the end, what you suggest to pay attention on, or to do, for using best practices out there?

**MORE ABOUT:**

i'm thinking that maybe setting server and js fixed timezone for dates and datetimes will be unique for all users coming to site, did you agree?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:54:57.090

JavaScript Date() 对象将日期存储为距纪元 (01/01/1970) 的毫秒数的偏移量，因此以您建议的方式简单地构造日期将考虑用户的时区。

如果您将存储在数据库中的日期标准化为 GMT，那么您可以采用带和大括号的方法并使用：

```
var expiration_datetime = new Date(Date.UTC(
    <?php $expiration_datetime[0]?>, <?php $expiration_datetime[1]?>,
    <?php $expiration_datetime[2]?>, <?php $expiration_datetime[3]?>,
    <?php $expiration_datetime[4]?>, <?php $expiration_datetime[5]?>,
)); 
```

这应该向 JS 解析器表明它正在接收的日期信息是 GMT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:41:41.187

使用 unix 时间戳并使用 buildin JS Date 构造函数从中构造日期：

```
php:  time()
js: new Date(ms) 
```

注意：php 函数返回秒，js - 使用毫秒。不要忘记乘以 1000

# c - command line argument and file input C

> ID：13192655
> 
> 赞同：3
> 
> 时间：2012-11-02T09:36:55.480
> 
> 标签：c, input, parameters, command-line-arguments

I don't really know how to ask this...

Supposed I want to read a file from my function, but I have no idea what will be the filename that I want to read because the filename will be passed in my main function as command line argument (argv[])

so my main looks like :

```
int main(int argc, char *argv[]) 
```

my function will look like:

```
int get_corners(FILE *input, int size, and so on) 
```

What I've tried in my function:

```
*input = fopen(argv[1], "r"); 
```

but, compiler said it doesn't recognize variable argv

So, can someone please help me understand how to call input file when you are not in main and have to deal with command line parameter?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T09:40:36.793

首先你不应该取消引用 a `FILE*`，结构是*不透明*的。这意味着您只需传递指针。

其次，您想要的可能是将您从命令行获得的文件名作为函数参数传递给您的函数。在 C 中，变量不会在运行时或编译时从其他函数的范围继承。

像这样的东西

```
int main(int argc, char* argv[])
{
   if (argc < 2)
     return 1;

   printf("%d corners\n", getCorners(argv[1]));
}

int getCorners(char* file) {
    FILE* input = fopen(file, "r");

    .. do soemthing interesting ...

    return cornerCount;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:39:32.643

argv is just a parameter to a function like anything else. Unless you make it global or pass it to "get_corners" it's not visible within that function.

To be honest you're probably better handling that file separately from the "get_corners" work anyway, it would appear to be cleaner. Try having a function to open and manage errors on the file read, then pass it's output to get_corners. Also you'll need to more carefully parse the command line than just casually passing it about. You could look at getopts in *NIX to help you, there are plenty of other libs around to make that task easier.

i.e.

```
FILE *readfile(filename)
{
    FILE *f = fopen(filename, "r");
    // Do some error checking
    return f;
}

main (int arc, char *argv[])
{
    FILE *myfile;
    myfile = readfile(argv[1]);
    get_corners(myfile, ...);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:03:33.037

如果它是`get_corners()`需要 a的要求`FILE *`，那么您只需在可用的位置打开文件`main()`，`argv`并将结果指针传递给函数：

```
int main(int argc, char *argv[])
{
  if(argc > 1)
  {
    FILE *input = fopen(argv[1], "r");
    if(input != NULL)
    {
      const int corners = get_corners(input);
      fclose(input);
      /* Do something with corners here ... */
    }
  }

  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:58:58.803

如果你写了这一行

```
*input = fopen(argv[1], "r"); 
```

在`get_corners()`函数下，所以你必须知道 argv 不是全局变量。`main()`它是仅由函数看到的变量

你也必须修复这条线

```
*input = fopen(argv[1], "r"); 
```

经过

```
input = fopen(argv[1], "r"); 
```

并将其直接放在`main()`函数下，以便查看 argv 参数

# class - 在 for() 循环中声明和初始化的 VBA 对象的范围

> ID：13192656
> 
> 赞同：2
> 
> 时间：2012-11-02T09:36:55.843
> 
> 标签：class, vba, scope

我有一个类“投资组合”（其中类“股票”作为它的字段之一）方法，代码如下：

```
For i = 1 To n
    Dim TempStock As New Stock
    TempStock.Set_Stock            'sets TempStock    
    ...
Next i 
```

其中“Stock”是我的用户定义类，具有这样的结构、构造函数和析构函数：

```
Private StockName As String
Private CurDate As Date
Private BidPrice As Double
Private AskPrice As Double
Private StockDivs As Dictionary

Private Sub Class_Initialize()
    Set StockDivs = New Dictionary
End Sub
Private Sub Class_Terminate()
    Set StockDivs = Nothing
End Sub 
```

我的意思是，在每个循环中，我都会用空字段声明和初始化新的临时对象。但是在逐步运行我的程序之后，在我看来 Class_Terminate() 在循环结束时没有被调用。并且在下一步中，所有字段`TempStock`都已经设置为它们在前一个循环中的状态。所以，我不明白以下几点：

1) 为什么不`Class_Terminate()`叫 at `Next i`？什么时候调用？现在写对了吗？或者我是否也应该编写代码将每个非对象归档设置为空值？

2）好的，它没有被调用，但我仍然有`Dim TempStock As New Stock`？它不应该给我双重声明错误吗？或者`TempStock`至少设置为新的空对象？

3）有什么区别：

```
 Dim TempStock As New Stock 
```

和：

```
 Dim TempStock As Stock
 Set TempStock = New Stock 
```

它与我的问题有关吗？

对我的问题的任何部分的帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:01:47.947

VBA 中没有块级作用域；所有声明 ( `dim`) 都被提升到包含过程的顶部，并且仅在例程结束时超出范围。

您是正确的，因为您看到的行为归结为`As New`，目前该类将在循环内实例化一次，并且在过程返回时它退出范围之前不会终止。

要获得您想要的行为，您必须使用：

```
 Dim TempStock As Stock
 Set TempStock = New Stock 
```

因为它是`set`显式地强制分配一个新的对象实例`TempStock`

当声明被提升时，该行`Dim TempStock As New Stock`实际上并没有立即创建 的新实例`Stock`，而是这种对象创建方式为跨类型变量的每次调用插入存根代码，该类型变量`Stock`显示“如果我不是有效的引用，现在自动创建我”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:17:16.870

如果应用语法：

```
Dim TempStock As Stock
Set TempStock = New Stock 
```

析构函数被调用。
VBA 中的对象破坏发生在引用对象的引用计数为零（无）时。
在这种情况下，在每个循环中，您使用相同的变量“TempStock”来实例化一个*全新的*“Stock”对象，这会导致前一个对象从内存中释放。

这段代码是不必要的，因为无论如何该对象都会被销毁：

```
Private Sub Class_Terminate()
    Set StockDivs = Nothing
End Sub 
```

如果您在主子程序中将 StockDivs*显式*设置为空，您会注意到将调用 Class_Terminate 事件，因此在这种情况下，对象在引用计数已经为零时第二次收到另一个释放消息（否则此事件不会已被调用）。

关于：

```
Dim TempStock As New Stock 
```

根据微软的说法，这两个公式是等价的：http:
[//msdn.microsoft.com/en-us/library/Aa903373](http://msdn.microsoft.com/en-us/library/Aa903373)

但是，等价并不意味着它们是相同的。
在声明中直接使用 New 关键字确实也会实例化 Stock 对象，但正如您所注意到的，构造函数只被调用一次，而析构函数只会在循环结束时被调用。这隐含地意味着您在每个循环上一遍又一遍地使用相同的对象，同时重新分配同一对象的属性（但没有实际释放它）。
此公式的典型特征还在于，对象上的初始化程序不会在声明时调用，而是仅在第一次使用后调用。
在大多数用例中，两者最终都可以使用相同的结果。

我猜你可能有用的是下面的代码。除非您想将多个股票添加到集合中（您也可以使用字典），否则我看不到在分配属性时多次循环同一类的直接原因。

```
Option Explicit

Sub Stocks()

Dim oCollection         As Collection
Dim TempStock           As Stock
Dim lCnt                As Long

Set oCollection = New Collection

For lCnt = 1 To 5

    Set TempStock = New Stock

    TempStock.Set_Stock ("Stock_" & lCnt)       'sets TempStock name eg. 
    oCollection.Add TempStock
Next lCnt

End Sub 
```

您可以在其中将多个库存添加到集合中。

# javascript - Nodejs Error: EMFILE

> ID：13192660
> 
> 赞同：3
> 
> 时间：2012-11-02T09:37:07.067
> 
> 标签：javascript, node.js, express

I need to open a directory containing files.. open readstream for each and write the data from all the files into a single file. But I keep getting Error: EMFILE, open 'chunks/piece96.data'

My ulimit was 256 and I increased it to 1024\. I have 127 files in the directory to open, read and write into a single file.

My code is below

```
 var DIR='chunks/';
    var files=fs.readdirSync(DIR);
    var filename='bach.mp3';

    files.forEach(function(singlebit){
        //console.log(files);
        var bit=fs.createReadStream(DIR+singlebit);
        var resultfile=fs.createWriteStream(filename,{
            flags:'r+',
            encoding:null,
            mode:0666
        });
        bit.on('data',function(bitdata){ 
                resultfile.write(bitdata); 
                console.log(bitdata);
            }).on('end',function(){
                resultfile.end();
            });
        });
    console.log('file complete'); 
```

How can I prevent the EMI file error. I am not opening many files at once since I am using readdirSync and not opening all of them at once. I need a way to read all the files and write to a single file.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:25:21.507

我刚刚自己写了一小段代码来解决这个问题，我不使用流，但这应该可以适应您的需求：

```
// Queuing reads and writes, so your nodejs script doesn't overwhelm system limits catastrophically
global.maxFilesInFlight = 100; // Set this value to some number safeish for your system
var origRead = fs.readFile;
var origWrite = fs.writeFile;

var activeCount = 0;
var pending = [];

var wrapCallback = function(cb){
    return function(){
        activeCount--;
        cb.apply(this,Array.prototype.slice.call(arguments));
        if (activeCount < global.maxFilesInFlight && pending.length){
            console.log("Processing Pending read/write");
            pending.shift()();
        }
    };
};
fs.readFile = function(){
    var args = Array.prototype.slice.call(arguments);
    if (activeCount < global.maxFilesInFlight){
        if (args[1] instanceof Function){
            args[1] = wrapCallback(args[1]);
        } else if (args[2] instanceof Function) {
            args[2] = wrapCallback(args[2]);
        }
        activeCount++;
        origRead.apply(fs,args);
    } else {
        console.log("Delaying read:",args[0]);
        pending.push(function(){
            fs.readFile.apply(fs,args);
        });
    }
};

fs.writeFile = function(){
    var args = Array.prototype.slice.call(arguments);
    if (activeCount < global.maxFilesInFlight){
        if (args[1] instanceof Function){
            args[1] = wrapCallback(args[1]);
        } else if (args[2] instanceof Function) {
            args[2] = wrapCallback(args[2]);
        }
        activeCount++;
        origWrite.apply(fs,args);
    } else {
        console.log("Delaying write:",args[0]);
        pending.push(function(){
            fs.writeFile.apply(fs,args);
        });
    }
}; 
```

# python - Python Subprocess cannot read all outputs in shell

> ID：13192662
> 
> 赞同：2
> 
> 时间：2012-11-02T09:37:18.230
> 
> 标签：python, shell, ide, subprocess, popen

I implemented a python program using subprocess.Popen to execute commands from server to Ubuntu client. The subprocess must read all outputs line by line. **My program operates perfectly in Eclipse environment**. All outputs print as I expected. But when I run the program under Python interactive shell (in both Windows and Linux), subprocess.Popen didnot read all command outputs. The outputs only show little and then Python crashes without any error. Here is my program codes:

```
def execute(self, IP_Instance, command):

    keypairs_directory = Config.keypairs_directory

    cmd = 'ssh ubuntu@%s'%IP_Instance+' -i %s'%keypairs_directory+' %s'%command

    cmd_run = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=True)
    for line in cmd_run.stdout:
        print line         
    cmd_run.wait() 
```

For example, when I send a command:

```
a.execute('xxx.xxx.xxx.xxx', 'ls -l') 
```

I have output

```
total 0 
```

It is OK. But when I send:

```
a.execute('xxx.xxx.xxx.xxx', 'sudo apt-get update') 
```

The program only runs to

```
Fetched 8,364 kB in 6s (1,205 kB/s)
Reading package lists... 
```

and then Python backs to

```
>>> 
```

I had tried communicate()[0], poll() but they did not bring effectiveness. I use Python 2.7 for all machines. What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:43:46.417

该`apt-get update`命令也以标准错误返回数据，因此您还需要捕获`stderr`数据：

```
subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=True) 
```

然后你必须同时使用`Popen.stdout`和`Popen.stderr`。

# c++ - how to unit test an exception thown from a call back function

> ID：13192665
> 
> 赞同：0
> 
> 时间：2012-11-02T09:37:31.140
> 
> 标签：c++, unit-testing, callback, cppunit

I am trying to unit test a function which returns instantly and then returns the actual result by a callback function. Can anybody help me in how to unit test this function using cppunit.

for eg .

MyFunction(callback call) { .....

}

MyFunction returns success instantly and then the actual result in a callback function, from the callback an exception myexception is thrown how can I unit test to make sure that myexception is thrown?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:59:24.780

MyFunction 立即返回的唯一方法是拥有一个最终调用回调函数的工作线程。如果是这样，那么就不可能在您的代码中捕获从该工作线程抛出的异常。您必须从工作线程中捕获所有异常并在那里处理它们。在异常处理程序中，您仍然可以使用表示发生异常的参数调用回调函数，并通知用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:51:13.880

我会使用[xUnit++](http://bitbucket.org/moswald/xunit)，并分两个阶段执行此操作：测试`MyFunction`和测试回调。

```
FACT("MyFunction returns immediately")
{
    struct callback
    {
        callback()
            : success(false)
        {
        }

        void operator()() const
        {
            if (!success)
            {
                Assert.Fail() << "MyFunction executed callback before returning.";
            }
        }

        bool success;
    } cb;

    MyFunction(cb);

    cb.success = true;
}

FACT("The real callback throws an exception when complete")
{
   auto e = Assert.Throws<MyException>(myCallback);

   // further asserts for the value of e
} 
```

# sql - Is there a performance difference when we encrypt a database?

> ID：13192667
> 
> 赞同：0
> 
> 时间：2012-11-02T09:37:36.437
> 
> 标签：sql, sql-server-2008

I am just wondering to whether is there any performance difference in stored procedures and inline queries when database encryption is turned on?

If yes, could you explain when the performance is good and when it's bad?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:25:53.827

根据我对 SQL2008 的 DBA 经验，对最终用户的性能影响很小，原因是：

加密仅在写入和读取数据库文件 (.DBF) 和备份时发生。一旦数据在内存中，它是未加密的，查询运行速度与正常运行一样快。

整个加密过程在 SQL 2005 中曾经很可怕，并且存在显着的性能损失，但在 SQL 2008 中，加密表或整个数据库的过程只需几分钟（而且方向很容易遵循 - [http:// msdn.microsoft.com/en-us/library/cc278098(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/cc278098(v=sql.100).aspx) )。

该过程基本上分为三个步骤：

1.  创建公共/私人证书密钥（有一个存储过程）。
2.  打开数据库的加密。
3.  然后保存分贝。

当数据库文件以加密形式重写时，被加密的数据库将切换到单用户模式一两分钟，但这不会花费很长时间。例如，转换一个 50GB 的文件最多需要几分钟。

祝您好运并确保您**不会丢失证书密钥**！将它们通过电子邮件发送给您自己，因为如果您需要从备份中恢复或将 MDF 文件移动到另一台服务器，那么您在没有证书文件的情况下会被搞砸。（别担心，我列出的 MS 文档中都有详细说明）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:40:56.250

@AnandPhadke - 米奇的意思是*会有*开销。需要进行加密和解密，因此无论何时发生这些操作都会产生开销。

> 在软件 SQL Server 2008 的 Enterprise 和 Developer 版本中，包含了透明数据加密 (TDE) 的新安全功能。它对 SQL Server 优化有轻微的负面整体性能影响。它达到 3% 到 5% 的程度。但是，如果大部分数据都存储在内存中，则影响较小。

资料来源：[SQL Server 优化和加密对性能的影响](http://www.streetdirectory.com/travel_guide/125755/security/sql_server_optimization_and_the_performance_impact_of_encryption.html)

> “如果 SQL Server 实例上的任何其他数据库使用 TDE 加密，则 tempdb 系统数据库将被加密。这可能会对同一 SQL Server 实例上的未加密数据库产生性能影响。有关 tempdb 系统数据库的更多信息，请参阅 tempdb 数据库。”</p>

来源：[透明数据加密 (TDE)](http://msdn.microsoft.com/en-us/library/bb934049.aspx)

# java - How do you test Wicket TextFields for read-only?

> ID：13192669
> 
> 赞同：0
> 
> 时间：2012-11-02T09:37:42.687
> 
> 标签：java, unit-testing, wicket, readonly, wicket-tester

I want to test that my Wicket `TextField` is set to `readonly`. I have set up my `WicketTester` but that just supports `assertDisabled()` which is useless and fails in my case.

I already tried `tester.getComponentFromLastRenderedPage(compName).getString("readonly")` and `tester.getComponentFromLastRenderedPage(compName).getMarkupAttributes().get("readonly")` which both sounded somewhat promising to me but failed to deliver.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:35:20.087

这应该可以通过以下方式解决：

```
TagTester ttest = tester.getTagByWicketId(compName);
assertNotNull(ttest.getAttribute(READONLY)); 
```

或非常相似的东西。我现在无法测试这个，所以我不能更具体。有关更多详细信息，请查看[TagTester的 JavaDocs](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/util/tester/TagTester.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:12:37.407

不幸的是，`WicketTester`这并不容易直接做到这一点，但是......

由于`AttributeModifier`是一种行为，您可以调用

```
Component component = tester.getComponentFromLastRenderedPage("path");
List<IBehavior> behaviors = component.getBehaviors(); 
```

并从列表中拉出`AttributeModifier`实例（使用`instanceof` 或`isAssignableFrom`检查）。然后经过一些反思以使事情可以访问，您可以检查是否有一个符合您预期的`AttributeModifier`.

# objective-c - UIButton touch up inside 事件仅在标题中完成时触发

> ID：13192673
> 
> 赞同：0
> 
> 时间：2012-11-02T09:37:55.540
> 
> 标签：objective-c, ios, uitableview, uibutton

我正在`UITableViewCell`使用几个子视图自定义 a：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
  self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
  if (self) {
    _mainView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 40.0f)];

    _hiddenOptionsView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 40.0f)];

    _menuView = [[CellMenuView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 20.0f)];

    [self addSubview:_menuView];
    [self addSubview:_hiddenOptionsView];
    [self addSubview:_mainView];
  }
  return self;
} 
```

该类`CellMenuView`是一个`UIView`子类，它有两个`UIButtons`在初始化时设置对应的目标操作：

```
- (id)initWithFrame:(CGRect)frame {   
  self = [super initWithFrame:frame];
  if (self) {
    UIImageView *background = [[UIImageView alloc] initWithFrame:frame];
    [background setImage:[UIImage imageNamed:@"cell_menu_bg.png"]];
    [self addSubview:background];

    CGFloat buttonX = frame.origin.x;
    CGFloat buttonY = frame.origin.y + 3.0f;
    CGFloat buttonWidth = frame.size.width / 2.0f;
    CGFloat buttonHeight = 10.0f;

    _editButton = [UIButton buttonWithType:UIButtonTypeCustom];
    _editButton.frame = CGRectMake(buttonX, buttonY, buttonWidth, buttonHeight);
    _editButton.backgroundColor = [UIColor clearColor];
    _editButton.titleLabel.shadowColor = [UIColor blackColor];
    _editButton.titleLabel.shadowOffset = CGSizeMake(0.0f, -1.5f);
    _editButton.titleLabel.font = [UIFont boldSystemFontOfSize:22.0f];
    [_editButton setTitle:@"Edit" forState:UIControlStateNormal];
    [_editButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [_editButton addTarget:self action:@selector(editButton:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:_editButton];

    _fireButton = [UIButton buttonWithType:UIButtonTypeCustom];
    _fireButton.frame = CGRectMake(buttonWidth, buttonY, buttonWidth, buttonHeight);
    _fireButton.backgroundColor = [UIColor clearColor];
    _fireButton.titleLabel.shadowColor = [UIColor blackColor];
    _fireButton.titleLabel.shadowOffset = CGSizeMake(0.0f, -1.5f);
    _fireButton.titleLabel.font = [UIFont boldSystemFontOfSize:22.0f];
    [_fireButton setTitle:@"Fire" forState:UIControlStateNormal];
    [_fireButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [_fireButton addTarget:self action:@selector(fireButton:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:_fireButton];

    return self;
  }
} 
```

我已经实现了目标操作方法，但它们没有被执行。相反，`didSelectRowAtIndexPath:`每次我按下其中一个按钮时，它都会优先于按钮内的修饰事件。

我能够在按钮上触发事件的唯一方法是确保`UIButton's`标题中的一个字母被触摸（当然使用模拟器）。

我必须说它`_menuView`隐藏在其他子视图后面，并在按下单元格中的自定义附件按钮时显示在单元格下方。它通过修改 Y 原点出现，并通过`0.0f`再次设置它消失。

我认为这可能与视图层次结构有关，因为我过去通过直接向单元格添加按钮没有任何问题。但我只是在这里猜测。

如何使按钮上的事件优先于`didSelectRowAtIndexPath:`方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:42:43.500

实施

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

并为您不想选择的 indexPath 返回 nil；这将防止`didSelectRowAtIndexPath`在该单元格上被调用，并且（希望）将调用您的自定义操作。

**更新：**在我自己实现之后（为按钮添加边框），这就是我所拥有的。![在此处输入图像描述](../Images/128b829e843c4141292fd09d8d92f69d.png)

实现此目的的代码（与您的不同）如下：

*单元菜单视图.m*

```
 self.backgroundColor = [UIColor blackColor];
    _editButton.layer.borderColor = [UIColor whiteColor].CGColor;
    _editButton.layer.borderWidth = 2;
    _fireButton.layer.borderColor = [UIColor whiteColor].CGColor;
    _fireButton.layer.borderWidth = 2; 
```

*UITableViewCell 子类*

```
 // Change in height to make it taller
    _menuView = [[TestBtn alloc] initWithFrame:CGRectMake(0.0f, 20.0f, 320.0f, 60.0f)]; 
```

*UITableViewController 子类*

```
 self.tableView.rowHeight = 100; 
```

经过测试，我的工作正常。如果我在白色方块内单击，按钮操作将正常执行，并且`didSelectRowAtIndexPath`不会被调用。`didSelectRowAtIndexPath`仅在我单击按钮外部时调用。

我认为这里的问题可能是您的按钮高度/框架，以及您的行高。为您的按钮添加边框，以检查其可点击区域，并增加按钮的高度以增加可点击区域。

# iphone - ViewController inheritance. can not find interface

> ID：13192678
> 
> 赞同：0
> 
> 时间：2012-11-02T09:38:13.407
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiviewcontroller

I've got a base view controller:

```
@interface NEViewControllerWithSidebarMenu : UIViewController <UITableViewDataSource, UITableViewDelegate>
{
    UIView *viewWithContent;
    UIView *sidebarView;
    UITableView *sidebarTableView;
}

@property (nonatomic, retain) UIView *viewWithContent;
@property (nonatomic, retain) UIView *sidebarView;
@property (nonatomic, retain) UITableView *sidebarTableView;

-(void)menuButtonPressed:(id)sender;
-(void)loadSidebar;

@end 
```

and it's implementation:

```
#import "NEViewControllerWithSidebarMenu.h"

@interface NEViewControllerWithSidebarMenu ()

@end

@implementation NEViewControllerWithSidebarMenu

@synthesize sidebarView, sidebarTableView;
@synthesize viewWithContent;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Actions

-(void)menuButtonPressed:(id)sender
{
    ... do some things here
}

-(void)loadSidebar
{
    .....        
    UIButton *menuButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    [menuButton setFrame:CGRectMake(0.0, 0.0, 80, 40)];
    [menuButton setTitle:@"Меню" forState:UIControlStateNormal];
    [menuButton addTarget:self action:@selector(menuButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *menuBarButtonItem=[[UIBarButtonItem alloc] initWithCustomView:menuButton];
    self.navigationItem.leftBarButtonItem=menuBarButtonItem;
    .....

}

-(void)changeToViewController:(UIViewController *)viewController
{
    UINavigationController *navController = self.navigationController;
    [navController popViewControllerAnimated:NO];
    [navController pushViewController:viewController animated:NO];
}

-(void)popViewControllerAnimated
{
    [self.navigationController popViewControllerAnimated:YES];
}

-(void)pushViewControllerAnimated:(UIViewController *)viewController
{
    [self.navigationController pushViewController:viewController animated:YES];
}

#pragma mark - UITableViewDataSourse

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    switch (section)
    {
        case 0:
        {
            return 6;
            break;
        }
        default:
        {
            NSLog(@"PANIC: unknown section index");
            return 13;
            break;
        }
    };
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ......
}

#pragma mark - UITableViewDelegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    .......
}

@end 
```

Now I'm declaring a controller that inherits from NEViewControllerWithSidebarMenu I get error:

```
@interface NECompanyRootViewController : NEViewControllerWithSidebarMenu
{
    //
}

@end 
```

can not find interface declaration for 'NEViewControllerWithSidebarMenu', superclass of 'NECompanyRootViewController

Help me please. Why I get this error and how can I solve it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:41:13.383

**先导入Header**

```
#import "NEViewControllerWithSidebarMenu.h" 
@interface NECompanyRootViewController : NEViewControllerWithSidebarMenu
{
    //
}

@end 
```

# objective-c - ScrollToPosition 总是滚动到我部分的最后一行

> ID：13192689
> 
> 赞同：0
> 
> 时间：2012-11-02T09:38:43.360
> 
> 标签：objective-c, ios, uitableview, scroll

我有一个带有部分的表格视图。每个部分为一个月。所以我有六月，七月，八月的部分，......

我现在要做的是当 tableview 出现时，它会立即向下滚动到今天的月份。我有以下功能。

```
-(void)scrollToPosition{
  NSDate *now = [NSDate date];
    NSString *strDate = [[NSString alloc] initWithFormat:@"%@",now];
    NSArray *arr = [strDate componentsSeparatedByString:@" "];
    NSString *str;
    str = [arr objectAtIndex:0];
    NSLog(@"strdate: %@",str); // strdate: 2011-02-28

    NSArray *arr_my = [str componentsSeparatedByString:@"-"];

    NSInteger month = [[arr_my objectAtIndex:1] intValue];
    NSLog(@"month - 5 %d",month -5);

    NSIndexPath *path = [NSIndexPath indexPathForRow:1 inSection:month -5];
    NSLog(@"path = %@",path);
    [self.tableView scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionMiddle animated:YES];

} 
```

我做**第 5 个月**的原因是我的表格视图从六月开始。我的问题是，它向下滚动到该部分的最后一行而不是第一行。有谁能够帮助我？

亲切的问候，

**编辑**

```
My tableview looks likes this. 

---Section 1: June -----
    - row 1 (12-06-2012)
    - row 2 (14-06-2012)
    - row 3 (20-06-2012)
    - row 4 (22-06-2012)
---Section 2: July -----
    - row 1 (2-07-2012)
    - row 2 (14-07-2012)
    - row 3 (21-07-2012)
    - row 4 (27-07-2012)
---Section 3: August -----
    - row 1 (2-08-2012)
    - row 2 (14-08-2012)
---Section 4: September -----
    - row 1 (17-09-2012)
---Section 5: Oktober -----
    - row 1
    - row 2
    - row 3
    - row 4
---Section 6: November -----
    - row 1
    - row 2
    - row 3
    - row 4
---Section 7: December -----
    - row 1
    - row 2
    - row 3
---Section 8: January -----
    - row 1
    - row 2 
```

**编辑：截图**

在这里，您可以看到滚动后我的表格视图的屏幕截图。[截屏](http://www.flickr.com/photos/74322780@N08/8147273451/in/photostream)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:09:26.930

问题是，节索引从**0**而不是**1**开始。

因此，当您返回的月份为**6**时，您的电话：

```
NSIndexPath *path = [NSIndexPath indexPathForRow:1 inSection:1]; // month - 5 = 1
[self.tableView scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionMiddle animated:YES]; 
```

但你应该打电话：

```
NSIndexPath *path = [NSIndexPath indexPathForRow:1 inSection:0]; 
```

因此，您滚动到您实际想要滚动到的部分**下方1 的部分。**这就是为什么它看起来好像会滚动到上一节的最后一行。

替换`month - 5`为`month - 6`，它应该可以按您的意愿工作。

顺便说一句，我建议修改您的代码以检索当前月份，如下所示：

```
NSDate *now = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM"];
int month = [[dateFormatter stringFromDate:now] intValue];
//... 
```

# tridion - Tridion UI 2012 - 错误“项目 tcm:280-29837-64 不存在。”

> ID：13192690
> 
> 赞同：4
> 
> 时间：2012-11-02T09:38:45.310
> 
> 标签：tridion, tridion-2011

当我们尝试通过 Tridion UI 中的 PageType 创建新页面时，它会抛出以下错误 -

```
"The item tcm:280-29837-64 does not exist." 
```

它是我要创建的页面的 ID，因为它不再存在于 tridion 中吗？

任何机构都可以在这方面帮助我吗？

注意：-我们为那些已经存在并发布的页面定义了页面类型。

**Edit-1**当我们点击“创建页面”按钮（见附件截图），上面提到的错误弹出。

![在此处输入图像描述](../Images/71a43e0a8543b6004580d4ed922a27f6.png)

在下面的 cd_core.log 文件中出现错误和警告——

错误 XMLConfigurationReader - 使用架构“schemas/cd_ambient_conf.xsd”验证文件“cd_ambient_conf.xml”时出错。cvc-complex-type.2.4.a：发现以元素“ClaimStoreProvider”开头的无效内容。需要“{Cookies}”之一。

WARN AmbientDataContext - 没有当前环境数据上下文 - 环境数据框架未正确初始化

**Edit-2**现在与 AmbientDataWork 相关的错误已解决，但我们仍然遇到同样的问题。UI 中有两个选项（a）“新页面”（b）创建和插入内容。当我们使用“创建和插入内容”选项时也会出现此错误。每次单击“创建页面”或“创建并插入内容”时，它都会为页面生成一个新的 ID（XXX-59248 -64，然后是 XXX-59249-64 等），并为组件生成相同的方式，并引发上述错误消息。

> 注意：- 我们使用的是 IIS 6。

**Edit-3** - 我在我的页面模板中使用 VB 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:43:51.830

如果有人使用 VB 脚本页面模板，则需要安装 UI_2012.0.0.81248 修补程序才能在 UI 2012 中创建新页面。我不知道这一点，所以问题中没有提到使用 VB 脚本的事实。所以我我再次更新我的问题，以帮助社区成员朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T16:08:21.613

它“看起来”页面的创建在 CM 方面以某种方式失败（但我在这里根据非常有限的数据做了很多解释......）。

您能否验证
1\. 您可以在 ID 为 280 的出版物中的内容管理资源管理器中创建页面
2\. 您的 UI 2012 蓝图上下文设置是否正确（是否应在 ID 为 280 的出版物中创建新页面/组件？）
3.您没有工作流或事件系统干扰页面的创建

我还希望 Tridion/Tridion Content Manager 事件日志中有一个事件日志条目，其中包含详细的堆栈跟踪...

# c# - Mapping stored procedures to entities with additional computed column

> ID：13192696
> 
> 赞同：0
> 
> 时间：2012-11-02T09:39:14.960
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, stored-procedures

I am currently stuck with one of my projects and need some help..

I created a table valued function in MSSQL that returns a table and a computed column (Distance) and have mapped it in Entity Framework 5 using the Entity Designer.

The problem is that I can only map the results either as a complex type or an entity that is in my model class. I need to use one of the Navigation Property in the entity and hence, I am stuck with using my entity class.

However, because the column Distance is not a real column in my table, I have no way of getting that value for every entity for the table valued function.

Is there any way of hacking around this? I've tried using a partial class but the function would not map the Distance column as a property for me.

Here's a little code to explain what I'm trying to do here :

```
IQueryable<Deal> deals = context.GetDealsByTypeLocationSearch(latitude, longitude);
foreach (var d in deals)
{
  Console.Write(d.Distance); 
} 
```

The distance value is null when I tried to create a partial class for my entity Deal.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:35:14.363

只是在[这里](https://stackoverflow.com/questions/6944904/how-should-i-access-a-computed-column-in-entity-framework-code-first)解释答案，使用以下属性：

```
[DatabaseGenerated(DatabaseGeneratedOption.Computed)] 
```

编辑：考虑到使用数据库优先方法，您是否考虑过调整[DefiningQuery](http://blogs.microsoft.co.il/blogs/gilf/archive/2008/05/14/how-why-use-definingquery-element.aspx)？

# asp.net-mvc - 在单元测试中使用自定义 ModelMetadataProvider

> ID：13192697
> 
> 赞同：1
> 
> 时间：2012-11-02T09:39:16.807
> 
> 标签：asp.net-mvc, unit-testing, asp.net-mvc-4, moq, modelmetadataprovider

MVC 很新，所以希望这是一个简单的问题。

我编写了一个自定义绑定属性，需要访问`httpContext`. 为了`httpContext`在单元测试期间注入模拟，我编写了一个`InjectingMetadataProvider`填充`Context`我的任何自定义属性的属性。

我已经设法让它在以下测试中工作：

```
[TestMethod]
public void Marker_ShouldBind_Id()
{
    // Arrange
    var formCollection = new NameValueCollection 
    { 
        { "id", "2" }
    };

    var context = new Mock<HttpContextBase>();
    context.Setup(c => c.User).Returns((IPrincipal)null); 

    var metaProvider = new InjectingMetadataProvider(context.Object);
    ModelMetadataProviders.Current = metaProvider;  //why do I need this?

    var bindingContext = new ModelBindingContext
    {
        ModelName     = string.Empty,
        ValueProvider = new NameValueCollectionValueProvider(formCollection, null),
        ModelMetadata = metaProvider.GetMetadataForType(null, typeof(Marker)),
    };

    var binder = new DefaultModelBinder();

    // Act
    var marker = (Marker)binder.BindModel(new ControllerContext(), bindingContext);

    // Assert
    marker.Id.Should().Be(2);
} 
```

但是，如果我注释掉将 my 设置`InjectingMetadataProvider`为的行`ModelMetadataProviders.Current`，那么我的`InjectingMetadataProvider.CreateMetadata()`覆盖将获得一个空白的属性列表，因此测试失败，因为我的自定义属性没有设置它们的上下文。

为什么我需要将它设置为`Current`当我明确使用它时？我不想在我的测试中设置静态的东西。

我可能正在做一些愚蠢的事情，因为由于我对框架的不熟悉，我现在有点摸不着头脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:01:13.783

在 DefaultModelBinder 内部，调用 BindComplexElementalModel 时会创建一个新的绑定上下文。请注意，它从 ModelMetadataProviders.Current 获取元数据，而不是您的自定义模型元数据提供程序。

```
 internal ModelBindingContext CreateComplexElementalModelBindingContext(ControllerContext controllerContext, ModelBindingContext bindingContext, object model) {
        BindAttribute bindAttr = (BindAttribute)GetTypeDescriptor(controllerContext, bindingContext).GetAttributes()[typeof(BindAttribute)];
        Predicate<string> newPropertyFilter = (bindAttr != null)
            ? propertyName => bindAttr.IsPropertyAllowed(propertyName) && bindingContext.PropertyFilter(propertyName)
            : bindingContext.PropertyFilter;

        ModelBindingContext newBindingContext = new ModelBindingContext() {
            ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => model, bindingContext.ModelType),
            ModelName = bindingContext.ModelName,
            ModelState = bindingContext.ModelState,
            PropertyFilter = newPropertyFilter,
            ValueProvider = bindingContext.ValueProvider
        };

        return newBindingContext;
    } 
```

# svn - SVN Patch - with multiple files

> ID：13192699
> 
> 赞同：11
> 
> 时间：2012-11-02T09:39:20.927
> 
> 标签：svn, command-line, diff, patch

I am trying to make a patch with multiple files in different directories. I don't want to include all my uncommitted files as I have a lot not applicable to the patch.

I know of this command to create a patch with a specific file, only issue is this is one file:

```
svn diff -up original.php > filename.patch 
```

Is there any way to do this with multiple files in different directories ?

Thanks

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T10:16:40.627

您可以尝试使用：`svn diff -r BEGIN_REVISION:END_REVISION > patch_file.patch` 这将使所有修改过的文件上的补丁。

如果要为具体文件创建补丁，可以在`>`.

`svn diff dir_name_1/first.php dir_name_2/second.php > patch_file.patch`

对于一个目录： `svn diff -uRp dir_name > patch_file.patch`

我希望它对你有帮助。

# c# - Windows 8 Metro 应用程序图表

> ID：13192705
> 
> 赞同：2
> 
> 时间：2012-11-02T09:39:56.273
> 
> 标签：c#, xaml, windows-8

谁能建议我一些 API 来为使用 C# 和 XAML 创建的 Windows 8 Metro 应用程序创建动态图表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:14:29.070

你可以看看[WinRT XAML Toolkit](http://winrtxamltoolkit.codeplex.com/)：它包含支持饼图、条形图、散点图等的控件（从 Silverlight Toolkit 的 Chart 移植）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T09:45:09.577

[Google Chart Image Api](https://developers.google.com/chart/image/) & [Google Chart](https://developers.google.com/chart/)是用于创建图表的不错的 API。

> Google Chart API 允许您**使用 URL 字符串动态生成图表**。您可以将这些图表嵌入到您的网页中，或**下载图像以供本地或离线使用。**

[![线](../Images/e5d783a28442cdf19026eca814982149.png)](https://i.stack.imgur.com/66MMm.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/cbuu3mlc.wbh.png)）]

[![酒吧](../Images/0e7b31bf7cf9cefe019a02ce2fe7dcf9.png)](https://i.stack.imgur.com/0ok5x.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/vej5zo0c.xk3.png)）]

这适用于...我使用 API`C#`制作了一个天气应用程序。`2007`

[![卡普](../Images/4387e627a71930767d8bf6f80e12b46b.png)](https://i.stack.imgur.com/q9eYw.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/xdrhydlu.byi.png)）]

这里和那里有一些视觉错误，但从那时起 API 已经更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:45:13.263

我们使用微软图表。

[下载：Microsoft Chart Controls for .NET Framework 文档 - Microsoft 下载中心 - 下载详细信息](http://www.microsoft.com/en-gb/download/details.aspx?id=11001)

它适用于 .NET 4 和 3.5 - 我还没有在 4.5 上尝试过，但我应该认为它有效。

不过，它可能不适用于 Metro App，如果这是您想要的（您没有在问题中指定它是否适用于 Windows RT）

# javascript - Dojo 1.6 自定义构建错误 - 无效的属性 ID

> ID：13192710
> 
> 赞同：0
> 
> 时间：2012-11-02T09:40:19.497
> 
> 标签：javascript, dojo, custom-build

我正在尝试为我的应用程序使用 dojo 自定义构建并为其设置标准配置文件。当我运行 build.sh 我得到这个：

```
(...)
release:      ../../release/dojo/dojox/layout/resources/FloatingPane.html
release:  Optimizing (shrinksafe) file: ../../release/dojo/dojo/k11CustomDojo.js
js: line 42106: invalid property id

js:         this.loadingPane = dojo.create("div", {class:"chart-preloader"}, this.containerNode, "last");
js: .........................................^ 
```

好像是在抱怨`dojo.create()`来电！？有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T11:40:06.103

`class`是 javascript 中的保留字。

加`class`引号

```
this.loadingPane = 
  dojo.create("div", {"class":"chart-preloader"}, this.containerNode, "last"); 
```

[http://jsfiddle.net/cswing/twbfs/](http://jsfiddle.net/cswing/twbfs/)

# eclipse-rcp - 如何在 rcp 中为特定透视图创建工具栏？

> ID：13192712
> 
> 赞同：0
> 
> 时间：2012-11-02T09:40:21.240
> 
> 标签：eclipse-rcp, rcp

我对rcp很陌生。在我的插件中，我有三个透视图，在一个透视图中，我有 4-5 个视图，我想创建一个特定于所选透视图的工具栏。我为此搜索了很多，但找不到任何答案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:10:54.627

一种解决方案是使用 org.eclipse.ui.actionSets 创建一个扩展，其中包含一组您希望在选择特定透视图时显示在工具栏中的操作。然后有一个名为 org.eclipse.ui.perspectiveExtensions 的扩展点，您可以在其中将操作集 ID（您创建的 ID）与透视 ID 相关联，并且该操作集仅在透视处于活动状态时显示。在“创建自己的工具栏”方面很清楚。总是只有一个工具栏，但基于透视/视图选择项可以隐藏或激活。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-15T20:53:14.250

该线程已死，发布的答案不再有效。所以它对我没有帮助。请参考下面的链接。

这个问题是正确的，在最后一次回答之后没有人回答。Last repose 对于当前的 eclipse 开发来说是不正确的，因为 actionSets 现在是一个弃用的 API。下面的链接清楚地提到这已被弃用。

[http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_actionSets.html](http://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_actionSets.html)

我有同样的相关问题并创建了另一个线程，它也解决了这个问题。希望这会有所帮助。

[在 RCP Eclipse(Neon) Development 中，如何启用创建的透视图](https://stackoverflow.com/questions/42820623/in-rcp-eclipseneon-development-how-to-enable-a-created-perspective)

# java - 花更多时间从没有互联网的类路径加载 spring-*.xsd 文件

> ID：13192713
> 
> 赞同：0
> 
> 时间：2012-11-02T09:40:25.280
> 
> 标签：java, xml, spring, xsd

最初，我有 appcontext.xml 的标题，如下所示。

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:util="http://www.springframework.org/schema/util"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.1.xsd
http://www.springframework.org/schema/util 
http://www.springframework.org/schema/util/spring-util-3.1.xsd"> 
```

如果没有互联网连接，这将不起作用。因此改变了上面的 xsi:schemaLocation 如下

```
 xsi:schemaLocation="http://www.springframework.org/schema/beans
  classpath:/org/springframework/beans/factory/xml/spring-beans-3.1.xsd
   http://www.springframework.org/schema/context
   classpath:/org/springframework/context/config/spring-context-3.1.xsd
   http://www.springframework.org/schema/util
    classpath:/org/springframework/beans/factory/xml/spring-util-3.1.xsd" 
```

上述方法需要很长时间来加载 xsd 文件并运行应用程序。

是否有任何其他方法可以最大限度地减少加载时间。我看到 classpath:/.. 是在没有互联网连接时加载 xsd 的唯一选项。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:48:26.213

更多信息`schemaLocation`可在此处获得：

*   [http://www.w3.org/TR/xmlschema-1/#xsi_schemaLocation](http://www.w3.org/TR/xmlschema-1/#xsi_schemaLocation)
*   [http://www.w3.org/TR/xmlschema-0/#schemaLocation](http://www.w3.org/TR/xmlschema-0/#schemaLocation)

`xmlns`如果您使用安装在 Eclipse 中的 Spring IDE，IDE 已经拥有您提供的 s所需的 XSD 的自己的副本。因此，它不需要通过`schemaLocation`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T10:42:51.950

您不必更改架构位置以引用类路径以使其工作；Spring*应该*在其 jar 文件中嵌入自己的模式文件副本，并且*应该*使用那些优先连接到 Internet 的模式文件。但是，我注意到您已经在它们的 URL 中指定了确切的模式版本，我的理解是 Spring 只会检查*与 spring in use 版本完全匹配的版本*化模式。在这种情况下，如果您没有使用 Spring 3.1.x，它不会使用自己的内部版本，而是会尝试下载它。切换到*没有*版本号（向后兼容）的模式位置，它应该使用其内部缓存。

# java - java swing设计创建文本字段

> ID：13192716
> 
> 赞同：1
> 
> 时间：2012-11-02T09:40:44.483
> 
> 标签：java, swing, jtextfield, jtextarea, preferredsize

我想创建一个具有确定大小的 jtext 字段，但我希望它在输入增长时像滚动窗格一样扩展。这是我到目前为止所拥有的：

```
JButton b,b1;

JLabel j1,j2,j3;

JTextField t1,t2;
public Window(){

    super("frame");
    //new Thread(this).start();
    b=new JButton("Click");
    j1=new JLabel("VALUE1");
    t1=new JTextField(30);
    j2=new JLabel("VALUE2");j3=new JLabel(" ");
    t2=new JTextField(30);
    j1.setBounds(100, 50, 150, 50);
    t1.setBounds(150, 50, 200, 50);
    j2.setBounds(200, 150, 250, 150);
    t2.setBounds(250, 150, 200, 50);j3.setBounds(300, 150, 250, 150);
    b.setBorder(new LineBorder(Color.black));
    b.setBackground(Color.black);
    b.setForeground(Color.white);
    b1=new JButton("Exit");
    super.setSize(300,300);
    super.setLocation(250,150);
    super.setLayout(new FlowLayout());
    super.setVisible(true);
    add(j1);add(t1);add(j2);add(t2); add(j3);
    add(b);add(b1);
    b.addActionListener(this);
    b1.addActionListener(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:54:09.780

如果您不想使用 JScrollPane 这是您正在寻找的东西 -

我创建了一个示例程序来自动调整 JTextField 的大小，即如果添加文本，它的大小会增加，如果删除文本，它的大小会减小。

我使用 KeyListener 的 - keyTyped 事件来检测和更新文本字段的大小。您也可以添加文档侦听器来做同样的事情。

这是我的示例代码 -

```
import java.awt.Dimension; 
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.JFrame; 
import javax.swing.JTextField; 
public class AutoResizeTest 
{      
    public AutoResizeTest(){
        JFrame frame = new JFrame("Auto-Resizable TextField");         
        frame.setLayout(null);

        MyCustomTextField expandableText = new MyCustomTextField(20);
        expandableText.setBounds(10, 10, 200, 30);
        expandableText.setPreferredSize(new Dimension(200,30));
        expandableText.setMaximumSize(new Dimension(600,30));

        frame.add(expandableText);
        frame.setBounds(100,100,700,100);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);       
        frame.setVisible(true);
    }

    public static void main(String[] args) 
    {         
        AutoResizeTest test = new AutoResizeTest();
    }      

    class MyCustomTextField extends javax.swing.JTextField{

        private int originallimit;
        int previousLength;
        int length;

        public MyCustomTextField(int limit){

            previousLength=0;
            originallimit = limit;

            this.addKeyListener(new KeyAdapter() {
                public void keyTyped(KeyEvent e) { 

                    JTextField textField = (JTextField) e.getSource();                 
                    length = textField.getText().length();

                    if(length >= originallimit){

                        if(length > previousLength){
                            textField.setSize(new Dimension(textField.getWidth()+10, textField.getHeight()));
                        }
                        else{
                            if(length < previousLength)
                            textField.setSize(new Dimension(textField.getWidth()-10, textField.getHeight()));
                        }
                        previousLength = length;

                    }else{
                        textField.setSize(textField.getPreferredSize());
                    }
                }
            });
        }

    }
} 
```

在这段代码中，我将大小增加/减小了 10。您可以输入所需的值。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:46:13.250

**将设置JTextField**的默认大小，并为 JTextField 提供一个**ScrollPane**，这将使字段在必要时扩展。

```
Try the following

JTextField jtext = new JTextField(pane);
JScrollPane scroll = new JScrollPane(jtext); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:35:19.667

将**TextArea**与**BorderLayout**放在一个单独的**JPanel**中并放在中心，当内容增加时，面板会自动展开。

 **```
textArea = new JTextArea(2, WIDTH);
textArea.setLineWrap(true);
textArea.getDocument().putProperty("filterNewlines", Boolean.TRUE); 
```**

# ruby - 如何在 Redhat 上安装 ruby ？找不到红宝石包

> ID：13192717
> 
> 赞同：4
> 
> 时间：2012-11-02T09:40:44.740
> 
> 标签：ruby, rhel

我不知道为什么我无法在我的 RHEL6.2 中通过 yum 安装 ruby​​ 我该如何修复它。我不想通过源安装。任何想法？

```
[root@kithost ~]# yum install ruby
Loaded plugins: product-id, refresh-packagekit, security, subscription-manager
Updating certificate-based repositories.
Setting up Install Process
No package ruby available.
Error: Nothing to do 
```

RVM 是一种解决方案，但不是我想要的。

我想知道的是，一旦我们从 yum 找不到任何包，我们应该修复什么样的东西才能让 yum 找到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:44:35.400

安装和管理 Ruby 的最佳方式可能是使用[RVM](https://rvm.io/)。此外，您可以通过 RVM 使用多个 ruby​​ 版本。我敢打赌，这真的是你可能会喜欢的东西。百胜有时是一个诅咒:-)。

遵循他们的[安装指南](https://rvm.io/rvm/install/)，因为有不同的安装方法（有优缺点），并选择您喜欢的一种。我很确定，你也会喜欢的。

但是，如果您仍在考虑使用它，您可以按照[本指南](http://www.techotopia.com/index.php/Getting_and_Installing_Ruby)进行操作。请注意，我不知道它是否有效，因为我没有尝试过。当我已经在使用最好的一个时，为什么我还要尝试其他东西:)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T05:21:47.413

Redhat 没有免费的 repo 列表，除非您付费或订阅它们。

我无法安装 ruby​​ 的原因是没有可用的 repo 列表

查看

/etc/repo.list

您可以将一个从 CentOS 复制到 Redhat。

然后你的 yum 可以搜索一个可用的 repo 服务器并使你的 ruby​​ 可以下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:39:50.760

RVM 是一个很好的解决方案，但我发现[rbenv](https://github.com/sstephenson/rbenv)更好，包括当您必须在服务器上使用 Ruby 时。

[您可以在README](https://github.com/sstephenson/rbenv#-2-installation)中找到如何安装 rbenv 。

# javascript - jQuery Mobile 滑块中的浮点数

> ID：13192720
> 
> 赞同：0
> 
> 时间：2012-11-02T09:40:52.393
> 
> 标签：javascript, jquery, jquery-mobile, jquery-ui-slider

你好 stackoverflow 社区，

我目前正面临 jQuery 移动滑块的问题。我强烈修改了滑块。它正在处理包含滑块允许采用的值的数组。

如果您滑动到不在数组中的位置，它将滑动到数组中最接近的值。

我现在的问题是：数组包含浮点数

```
var m2 = [19.5, 16.5, 14.5, 15, 10, 13]; 
```

如果我的滑块需要滑到 16.5，它会滑到 17。滑块的实际值确实是 16.5，但条形滑到 17。我认为问题不是由我的代码引起的，因为所有值都正确输出.

我现在的问题是：有人对滑块有类似的问题吗？该问题是否有任何可能的解决方法（甚至修复）？

我放了剧本。你可以在这里访问它：[http ://workidtest.de/ui/new.html](http://workidtest.de/ui/new.html)

受影响的滑块是中间的滑块。

我也把代码放在这里： http: [//pastie.org/5171015](http://pastie.org/5171015)

在此先感谢，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:54:53.360

问题是 jQuery 移动滑块四舍五入滑块值。

我想如果你想使用 0.5 比例，你可以将所有最大值乘以 2，并假设 0 代表 0，1 代表 0.5，2 代表 1。

只需将您的数组值乘以 2。

# jquery - （jquery？）自动完成以两行或多行显示？

> ID：13192722
> 
> 赞同：0
> 
> 时间：2012-11-02T09:40:55.000
> 
> 标签：jquery, autocomplete, lines

几年来，我一直在使用一个 ajax 自动完成脚本，它为搜索提出了预选的关键字。现在，我想扩展它以实际显示（数据）变量的名称，但是可以扩展到 100 个字符。因此，结果需要在下拉框中以多行（至少两行）显示。

我找到了一个 jquery 自动完成插件：[http](http://code.drewwilson.com/entry/autosuggest-jquery-plugin) ://code.drewwilson.com/entry/autosuggest-jquery-plugin 。

而这个：[http ://www.web2ajax.fr/2008/02/03/facebook-like-jquery-and-autosuggest-search-engine/](http://www.web2ajax.fr/2008/02/03/facebook-like-jquery-and-autosuggest-search-engine/)

否则，那里没有太多的东西，这是我的印象。

还有另一个挑战：我希望自动完成功能不仅可以搜索名称的开头，还可以搜索字段的任何部分。（我猜，这是服务器端的事情，对吧？）

您能推荐任何稳定且不太花哨的解决方案吗？

感谢您的任何提示和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:12:13.263

jQuery 本身有自动完成小部件。它会像你期望的那样工作。检查此链接。

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

[http://jqfaq.com/category/widgets/autocomplete/](http://jqfaq.com/category/widgets/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-26T21:45:55.660

以下是我使用 jquery ui 的**_renderItem** 方法的方法： 请注意，我必须将一个长段落分成宽度为 50 个字符的行。

```
$("#id_info").autocomplete({
    source: function(request, response) {
        $.ajax({
            type: "POST",
            url: "/api",
            contentType: "application/json; charset=utf-8",
            headers: {'X-CSRFToken': '{{ csrf_token }}'},
            timeout: 5000,
            data: JSON.stringify({
                term: request.term,
                task: 'search',
            }),
            success: response,
            dataType: 'json',
        });

    },
    minLength: 0,
    select: function(event, ui) {
        ui.item.value = ui.item.id;
    }
}).autocomplete( "instance" )._renderItem = function( ul, item ) {
  var width = 50; // num of characters
  var broken_para = '';
  var pre_ind = 0;
  var ind = item.label.indexOf(' ', width);
  while(ind > 0){
    broken_para = broken_para + '<br>' + item.label.substring(pre_ind, ind);
    pre_ind = ind;
    ind = item.label.indexOf(' ', ind + width);
  }
  broken_para = broken_para + '<br>';

  return $( "<li>" )
    .append(broken_para)
    .appendTo( ul );
}; 
```

这是一个[有用的链接](http://jqueryui.com/autocomplete/#custom-data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T22:16:05.237

我发现了一个简单的解决方案：

```
$('.ui-autocomplete').css('max-width','25%'); 
```

# microsoft-sync-framework - 使用 Microsoft Sync 框架更改数据库架构，而不会丢失任何跟踪表数据

> ID：13192728
> 
> 赞同：1
> 
> 时间：2012-11-02T09:41:48.847
> 
> 标签：microsoft-sync-framework

我正在使用 Microsoft Synch Service Framework 4.0 将 Sql server 数据库表与 Ipad 端的 SqlLite 数据库同步。

在 Sql Server 数据库中进行任何数据库架构更改之前，我们必须取消配置数据库表。此外，在进行架构更改后，我们重新配置表。现在在这个过程中，跟踪表（即同步信息）被删除。

我希望在重新配置后恢复跟踪表信息。如何才能做到这一点？是否可以在不取消配置的情况下进行数据库更改。

例如，应用程序是 2.0 版，同步工作正常。现在在下一个版本 3.0 中，我想做一些数据库更改。SO，在Deprovisioning-Provisioning的过程中，跟踪信息。被删除。因此，以前版本的所有跟踪信息都丢失了。我不想丢失跟踪信息。如何从以前的版本中恢复此跟踪信息。

我相信我们必须在取消配置之前编写自定义代码或触发器来存储跟踪信息。任何人都可以提出一个合适的方法或提供一些关于这个问题的有用链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T04:12:55.137

配置过程应自动为您填充跟踪表。您不必自己复制和重新加载它们。

现在，如果您认为跟踪表是框架存储之前同步的内容的位置，那么答案是否定的。

跟踪表只存储插入/更新/删除的内容。它用于更改枚举。有关先前同步内容的信息存储在 scope_info 表中。

当您取消配置时，您会清除此同步元数据。当你同步时，就像两个副本以前从未同步过一样。因此，当框架尝试应用目标上已经存在的行时，您将遇到冲突。

您可以在此处找到有关如何“破解”同步 fx 创建的对象以影响某些类型的架构更改的信息。

[修改同步框架范围定义 - 第 1 部分 - 简介](http://jtabadero.wordpress.com/2011/03/21/modifying-sync-framework-scope-definition-part-1-introduction/)

[修改 Sync Framework 范围定义 - 第 2 部分 - 解决方法](http://jtabadero.wordpress.com/2011/03/24/modifying-sync-framework-scope-definition-part-2-workarounds/)

[修改 Sync Framework 范围定义 - 第 3 部分 - 解决方法 - 添加/删除列](http://jtabadero.wordpress.com/2011/04/13/modifying-sync-framework-scope-definition-part-3-workarounds-addingremoving-columns/)

[修改 Sync Framework 范围定义 - 第 4 部分 - 解决方法 - 将表添加到现有范围](http://jtabadero.wordpress.com/2011/04/28/modifying-sync-framework-scope-definition-part-4-workarounds-adding-a-table-to-an-existing-scope/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:20:28.347

假设我有一个要同步的表“用户”。将创建一个跟踪表“User_tracking”，同步后会出现一些同步信息。

当我进行任何数据库更改时，将删除此跟踪表“User_tracking”和跟踪信息。将在 Deprovisioning-Provisioning 过程中丢失。

我的解决方法：在取消配置之前，我将编写一个脚本将所有“User_tracking”数据复制到另一个临时表“User_tracking_1”中。因此所有现有的跟踪信息都将存储在“User_tracking_1”中。当我重新配置表时，将创建一个新的跟踪表“User_Tracking”。重新配置后，我会将表“User_tracking_1”中的数据复制到“User_Tracking”，然后删除表“User_Tracking_1”中的内容。UserTracking 信息将被恢复。

这是正确的方法吗...

# ruby-on-rails-3 - RVM 安装

> ID：13192730
> 
> 赞同：-1
> 
> 时间：2012-11-02T09:41:55.667
> 
> 标签：ruby-on-rails-3, rvm

我正在尝试在 ubuntu 11.10 上安装 rvm。我已经通过 curl 使用以下命令安装了它。

`curl -L get.rvm.io | bash -s stable --auto-dotfiles`

在终端上，它指定 rvm 已正确安装，并且我已检查 .rvm 目录已在我的主目录中正确创建，并且 .rvm 目录中存在版本文件，但是当我在终端上编写 rvm -v 时，它会给出以下消息

`~$ rvm -v The program 'rvm' is currently not installed. You can install it by typing: sudo apt-get install ruby-rvm`

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:21:00.443

您是否将 PATH 添加到您的 .bashrc 文件中？

```
[[ -s "$HOME/.rvm/src/rvm/scripts/rvm" ]] && . "$HOME/.rvm/src/rvm/scripts/rvm" 
```

添加后，重新加载它：

```
source ~/.bashrc 
```

编辑：这不是 RVM 推荐的方式，rvm 会执行 shell 文件初始化，如果你需要强制这个进程运行`rvm get head --auto-dotfiles`

# c++ - win32 API在图片控件c++中打开一个jpg

> ID：13192731
> 
> 赞同：2
> 
> 时间：2012-11-02T09:41:56.933
> 
> 标签：c++, api, winapi, jpeg

我想知道是否有办法将 jpg 打印到图片控制矩形（我用 ResEdit 构建）应该打印图像的操作是 case IDC_BUTTON1: 并且我想查看图像的目标是在图片控件中id：IDC_STATIC

```
BOOL CALLBACK AppDlgProc(HWND hDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  switch(uMsg)
  {

  case WM_INITDIALOG:
      DragAcceptFiles(hDlg,true);
    SetClassLongPtr(hDlg, GCLP_HICON, (long)LoadIcon(0, IDI_APPLICATION));
    return 1;
  case WM_COMMAND:
   switch(wParam)
    {
    case IDOK:
  return 0;
case IDCANCEL:
  EndDialog(hDlg, 0);
}
 switch(wParam)
        {
            case IDC_BUTTON1:
               ShellExecute(hDlg,
         "open",
         "C:\immagine1.jpg",
         NULL,
         NULL,
         SW_SHOWDEFAULT);
            break;
        }

  switch(wParam)
        {
            case IDC_BUTTON4:
               ShellExecute(hDlg,
         "open",
         "C:\log.txt",
         NULL,
         NULL,
         SW_SHOWDEFAULT);
            break;
        }

  }
  return 0;
} 
```

而不是使用打开默认查看器的shell执行谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T20:00:12.903

[`OleLoadPicturePath`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678485%28v=vs.85%29.aspx)API 函数可以加载 JPEG 文件。

那么这只是访问位的问题。

还有[Windows Imaging Component](http://msdn.microsoft.com/en-us/library/ee719902%28v=VS.85%29.aspx) API，但我没有使用过。

不过，我怀疑它也可以工作，而且它可能比处理 OLE 的东西更简单，但我在这里举例说明`OleLoadPicturePath`.

在尝试修改下面的代码之前，您应该：

*   确保图片控件资源的类型设置为 BITMAP（本质上，在 .rc 文本级别，它具有`SS_BITMAP`样式）。

*   将 ID 更改为唯一的，而不是`IDC_STATIC`.

![在此处输入图像描述](../Images/46a3c4cbd4ce75c277e14ae0f81fc98d.png)

```
#include <header_wrapper/olectl_h.h>        // IPicture
#include <header_wrapper/windows_h.h>
#include "resource.h"       // IDD_DEMO_DIALOG, IDC_PICTURE

#include <progrock/cppx/throwx.h>           // hopefully, throwX, std::exception
#include <progrock/cppx/size.h>             // size
#include <progrock/winapi/path.h>           // *
#include <progrock/winapi/ComPointer.h>     // ComPointer
using namespace progrock;

#include <assert.h>         // assert
#include <iostream>
#include <stdlib.h>         // EXIT_FAILURE, EXIT_SUCCESS
using namespace std;

using cppx::hopefully;
using cppx::size;
using cppx::throwX;

using winapi::String;

struct IsHrSuccess
{
    friend bool operator>>( HRESULT const hr, IsHrSuccess const& )
    {
        return SUCCEEDED( hr );
    }
};

IsHrSuccess const   isHrSuccess = IsHrSuccess();

short kindOf( IPicture const& pic )
{
    short kind  = 0;
    const_cast< IPicture& >( pic ).get_Type( &kind )
        >> isHrSuccess || throwX( "kindOf: IPicture::get_Type failed" );
    return kind;
}

bool isBitmap( IPicture const& pic )
{
    return (kindOf( pic ) == PICTYPE_BITMAP);
}

OLE_HANDLE handleOf( IPicture const& pic )
{
    OLE_HANDLE  result  = 0;
    const_cast< IPicture& >( pic ).get_Handle( &result )
        >> isHrSuccess || throwX( "handleOf: IPicture::get_Handle failed" );
    return result;
}

HBITMAP bmpHandle( IPicture const& pic )
{
    assert( isBitmap( pic ) );
    return reinterpret_cast< HBITMAP >( handleOf( pic ) );
}

namespace g {
    winapi::ComPointer<IPicture>  pPicture;
}  // namespace g

INT_PTR CALLBACK demoDialogProc(
    HWND const      window,
    UINT const      messageId,
    WPARAM const    wParam,
    LPARAM const    lParam
    )
{
    switch( messageId )
    {
    case WM_INITDIALOG:
        ::SendDlgItemMessage(
            window, IDC_PICTURE, STM_SETIMAGE,
            IMAGE_BITMAP,
            reinterpret_cast< LPARAM >( bmpHandle( *g::pPicture ) )
            );
        break;
    case WM_CLOSE:
        ::EndDialog( window, IDCANCEL );
        break;
    case WM_COMMAND:
        ::EndDialog( window, wParam );
        break;
    }
    return 0;
}

struct Com
{
    Com() { ::CoInitialize( 0 ) >> isHrSuccess || throwX( "::CoInitialize failed" ); }
    ~Com() { ::CoUninitialize(); }
};

void cppMain()
{
    Com usingCom;
    String const    picFileName     = L"image.jpg";
    String const    picFilePath     = winapi::path::combine( winapi::exeFolder(), picFileName );

    ::OleLoadPicturePath(
        const_cast< wchar_t* >( picFilePath.c_str() ),
        nullptr, 0, 0,
        IID_IPicture,
        g::pPicture.asOutArgument()
        )
        >> isHrSuccess || throwX( "OleLoadPicturePath failed" );
    assert( isBitmap( *g::pPicture ) );

    ::DialogBox( ::GetModuleHandle( 0 ), MAKEINTRESOURCE( IDD_DEMO_DIALOG ), 0, demoDialogProc );
}

int main()
{
    try
    {
        cppMain();
        return EXIT_SUCCESS;
    }
    catch( exception const& x )
    {
        wcout << "!" << x.what() << endl;
    }
    return EXIT_FAILURE;
} 
```

# java - 使用 pojo/java bean 的 getter 方法获取属性/字段名称？

> ID：13192734
> 
> 赞同：20
> 
> 时间：2012-11-02T09:42:10.677
> 
> 标签：java, reflection

我有一个下面的类，我需要使用 java 反射从 getter 方法获取字段名称。是否可以使用 getter 方法获取字段名称或属性名称？

```
class A {

    private String name;
    private String salary;

    // getter and setter methods
} 
```

我的问题是：我可以通过 getter 方法获取字段/属性名称吗？如果我使用 getName()，我可以获得 name 属性吗？我需要 name 属性，但不需要它的值。是否可以通过java反射？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-22T14:14:58.983

是的，这是 100% 可能的..

```
public static String getFieldName(Method method)
{
    try
    {
        Class<?> clazz=method.getDeclaringClass();
        BeanInfo info = Introspector.getBeanInfo(clazz);  
        PropertyDescriptor[] props = info.getPropertyDescriptors();  
        for (PropertyDescriptor pd : props) 
        {  
            if(method.equals(pd.getWriteMethod()) || method.equals(pd.getReadMethod()))
            {
                System.out.println(pd.getDisplayName());
                return pd.getName();
            }
        }
    }
    catch (IntrospectionException e) 
    {
        e.printStackTrace();
    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-10-24T11:54:51.360

[反射实用程序](https://github.com/cronn/reflection-util)库提供了一种以类型安全的方式确定属性（名称）的方法。例如通过使用 getter 方法：

```
String propertyName = PropertyUtils.getPropertyName(A.class, A::getSalary); 
```

在这种情况下， 的值`propertyName`将是。`"salary"`

*免责声明*：我是[反射实用程序](https://github.com/cronn/reflection-util)库的作者之一。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-07T19:38:51.063

仅删除“get”或“is”前缀并将第一个字母小写是不够的。例如，getID 的适当 bean 名称将是 ID 而不是 iD。

获取 bean 名称的最简单方法是去掉 get 或 is 前缀，然后将结果传递给[Introspector.decapitalize](http://docs.oracle.com/javase/8/docs/api/java/beans/Introspector.html#decapitalize-java.lang.String-)。

这是我写的一个方法来做这件事：

```
private String getBeanName(String methodName)
{
    // Assume the method starts with either get or is.
    return Introspector.decapitalize(methodName.substring(methodName.startsWith("is") ? 2 : 3));
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-02T09:45:08.520

您无法使用反射检查代码的作用。

你可以假设一个`getName()`方法读取了一个被调用的字段`name`并且什么都不做。但是，没有要求这样做。例如，字段名称可能是`m_name`或甚至不是字段`_name`。`nameField`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-02T09:47:22.767

你可以

```
Field[] declaredFields = A.class.getDeclaredFields();
        for(Field f:declaredFields){
            System.out.println(f.getName());
        } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-06-25T15:00:20.093

您可以使用[lombok 的](https://projectlombok.org/features/experimental/FieldNameConstants) `@FieldNameConstants`注释。

注释你的类：

```
import lombok.experimental.FieldNameConstants;
import lombok.AccessLevel;

@FieldNameConstants
public class FieldNameConstantsExample {
  private final String name;
  private final int rank;
} 
```

在后台生成以下代码：

```
public class FieldNameConstantsExample {
  private final String name;
  private final int rank;

  public static final class Fields {
    public static final String name = "name";
    public static final String rank = "rank";
  }
} 
```

因此，您可以通过以下方式访问属性名称：

```
FieldNameConstantsExample.Fields.name 
```

这是字符串`"name"`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-02T09:45:01.403

如果您的 bean 遵循 JavaBean 约定，那么您使用反射来获取所有“get”和“is”方法，并从检索到的方法名称中删除“get”或“is”前缀，并且您拥有字段名称。

*更新*

```
// Get the Class object associated with this class.
    MyClass myClass= new MyClass ();
    Class objClass= myClass.getClass();

    // Get the public methods associated with this class.
    Method[] methods = objClass.getMethods();
    for (Method method:methods)
    {
        String name=method.getName();
        if(name.startsWith("get") || name.startsWith("is"))
        {
           //...code to remove the prefixes
        }
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-22T21:51:52.790

使用反射 API，可以按如下方式检索 POJO 字段。继承的类可能会在这里发现问题。

```
TestClass testObject= new TestClass().getClass();
Fields[] fields = testObject.getFields();
for (Field field:fields)
{
    String name=field.getName();
    System.out.println(name);
} 
```

或者通过使用反射 API，还可以检索类中的所有方法并遍历它以查找属性名称（标准 POJO 方法以 get/is/set 开头）......这种方法对我来说适用于继承的类结构。

```
TestClass testObject= new TestClass().getClass();
Method[] methods = testObject.getMethods();
for (Method method:methods)
{
    String name=method.getName();
    if(name.startsWith("get"))
    {
        System.out.println(name.substring(3));
    }else if(name.startsWith("is"))
    {
        System.out.println(name.substring(2));
    }
} 
```

然而，更有趣的方法如下：

在 Jackson 库的帮助下，我能够找到 String/integer/double 类型的所有类属性，以及 Map 类中的相应值。（*全部不使用反射 api！*）

```
TestClass testObject = new TestClass();
com.fasterxml.jackson.databind.ObjectMapper m = new com.fasterxml.jackson.databind.ObjectMapper();

Map<String,Object> props = m.convertValue(testObject, Map.class);

for(Map.Entry<String, Object> entry : props.entrySet()){
    if(entry.getValue() instanceof String || entry.getValue() instanceof Integer || entry.getValue() instanceof Double){
        System.out.println(entry.getKey() + "-->" + entry.getValue());
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-02T09:47:12.237

您应该通过该方法访问。目前 getter 会返回成员`name`，*但将来可能会改变*。它可以懒惰地从数据库或 Web 服务实例化它，从名字/姓氏等构建它。该`name`字段很可能不存在。

所以总是通过方法（即使通过反射）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-02T09:51:10.610

如果知道方法名，只需要去掉“get”，将后面的字母转换成小写，就不需要反思了。

如果 getter 方法 (getName()) 返回名称与“名称”不同的属性，则无法从方法名称中获取属性名称。

如果您不知道方法的名称，通过反射您可以获得所有方法，您也可以获得所有名称的属性。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-11-02T11:35:51.120

尝试以下

```
class A{

       private String name;
       private String salary;

   //getter and setter methods

       public void setName(String name){
          this.name = name;
        }

       public void setSalary(String salary){
           this.salary = salary;

         }

        public String getName(){
          return name;
          }

        public String getSalary(){
          return salary;
          } 
```

}

**get**方法用于从程序方法或数据库中动态检索数据。它将仅反映值而不是值的属性。

# mysql - 编写一个 Select 查询以从另一个表中扣除一个表

> ID：13192736
> 
> 赞同：1
> 
> 时间：2012-11-02T09:42:15.693
> 
> 标签：mysql, sql, select, join

我对如何编写以下查询有点困惑：

我有两张桌子

```
tbl_one
ID      TEXT
1       test1
2       test2
3       test3
4       test4
5       test5 
```

和

```
tbl_two
ID      userID      tblone_ID
1       50          1
2       100         1
3       100         2 
```

我正在寻找未出现在 tbl_two 中但针对特定用户的 tbl_one 行。

例如通过下面的选择：

```
select * from tbl_one, tbl_two 
where (tbl_two.tblone_ID !=tbl_one.ID and tbl_two.userID==50) 
```

我的愿望结果将是

```
Desire resalt:
ID      TEXT
2       test2
3       test3
4       test4
5       test5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:49:08.863

```
SELECT  a.*
FROM    tableA a
        LEFT JOIN tableB b
          on a.ID = b.tblone_ID AND
              b.userID = 50
WHERE   b.tblone_ID IS NULL 
```

*   [***SQLFiddle 演示***](http://sqlfiddle.com/#!2/abf52/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:49:33.803

> ```
> select * from tbl_one where tbl_one.ID not in ( Select tblone_ID
> FRom tbl_two where userID=50)
> 
> SELECT * from tbl_one inner Join tbl_two on tbl_one.ID !=tblone_ID  where userID=50 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:43:36.900

```
select * 
from tbl_one 
where ID not in (select tblone_ID 
                 from tbl_two 
                 where userID = 50) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:44:55.897

```
SELECT * FROM tbl_one
LEFT JOIN tbl_two on tbl_one.ID = tbl_two.tblone_ID
WHERE tbl_one.ID IS NULL AND tbl_two.userID = 50 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:45:31.743

你可以试试这个

```
select * from tbl_one t1 
where t1.id not in (select tblone_id from tbl_two where tbl_two.userid=50) 
```

# three.js - 具有几何形状的不匹配图像纹理

> ID：13192741
> 
> 赞同：1
> 
> 时间：2012-11-02T09:42:38.273
> 
> 标签：three.js

我创建了一个平面几何和一个由 ImageUtils 和 CanvasRenderer 制作的纹理，然后我创建了一个网格并完成了所有相关参数的设置。结果是一个PlaneGeometry的图像纹理在空间中，但是出现了一条**对角线**，而且，一个图像被这条对角线**分成两部分，因此****这两个部分上的图像变得不匹配。**我应该如何解决它？关键代码如下：

```
 var planeGeo=new THREE.PlaneGeometry(2000,3000);
    var map = THREE.ImageUtils.loadTexture( 'images/greenLines.png' );
    map.wrapS=map.wrapT = THREE.RepeatWrapping;
    map.repeat.set(2,2);
    map.anisotropy = 16;
    var planeMaterial=new THREE.MeshBasicMaterial({color:0xFFBBEE,map:map,overdraw:true});
    var planeMesh=new THREE.Mesh(planeGeo,planeMaterial);
    planeMesh.position.set(2000,-2000,5000);
    scene.add(planeMesh); 
```

**注意**：图像由绿色线条构成。结果显示线条被切割，一条线变成了两条线，位于两个分割的三角形上。 **现在我应该如何修改我的代码，以使该图像的两个部分看起来匹配良好而没有位移！对角线可以去掉吗？**

# jquery - 寻找最近的元素

> ID：13192761
> 
> 赞同：0
> 
> 时间：2012-11-02T09:44:17.863
> 
> 标签：jquery, jquery-selectors

如果我有以下 HTML

```
<div class="main">
    <div class="header">

    </div>
    <div class="sub_header">
        <input type="text" class="txtBox" />
    </div>
    <div class="content">

    </div>
    <div class="footer">

    </div>
</div> 
```

使用`txtBox`作为起点，我如何找到最接近的`content`，以便我可以添加一些东西？

如果我目前拥有的完整脚本在这里：

```
$(document).ready(function() {
    var myDate = new Date();
    var todaysDate = myDate.getDate() + '/' + (myDate.getMonth()+1) + '/' + myDate.getFullYear();

    get_data( todaysDate );

    $(".txtBox").val(todaysDate).datepicker( {
        changeMonth: true,
        changeYear: true,
        yearRange: "+0:+1",
        showButtonPanel: false,
        dateFormat: "d/mm/yy",
        onSelect: function(dateText, obj){
            get_data( $(this), dateText );
        }
    } );

    function get_data( that, dateText ) {

        if ( typeof that != "undefined" )
        {
            that.closest('.main').find('.content').empty().append( dateText );
        }
        else
        {
            $(".content.new").append( dateText ).removeClass('new');
        }

    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:45:57.010

## *[jsBin 演示](http://jsbin.com/etuvoj/1/edit)*

```
$('.txtBox').closest('.main').find('.content').text('Hello oshirowanen!'); 
```

或者：

```
$('.txtBox').closest('div').next('.content').text('Hello oshirowanen!'); 
```

或者：

```
$('.txtBox').parent().next('.content').text('Hello oshirowanen!'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:45:38.517

您必须转到 div 文本框的父级并在其兄弟姐妹中查找，

**[现场演示](http://jsfiddle.net/wHRv4/1/)**

```
var content = $('.txtBox').parent().siblings('.content'); 
```

如果给定的 html 具有恒定结构，您也可以使用文本框的父级的下一个。

**[现场演示](http://jsfiddle.net/wHRv4/2/)**

```
var content = $('.txtBox').parent().next('.content'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:51:07.507

```
$('.txtBox').parent().next('.content').html('Whatever') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:47:35.543

```
$('.content').closest('div').css('background-color', 'red'); 
```

这会改变 .content 类最近的 div 的 baground clour

# jquery - NyroModal，从父页面访问数据

> ID：13192763
> 
> 赞同：0
> 
> 时间：2012-11-02T09:44:21.607
> 
> 标签：jquery, nyromodal

我通过 target=_blank 使用带有 Iframe 的 nyroModal。在父页面中，我有一组复选框，根据检查的内容，我想向模式窗口添加一些额外的数据。

有没有我可以从模式访问这些复选框的方法？

我还尝试修改页面链接并使用复选框将信息作为参数发送给他们

```
 $(mapModalSelector).nyroModal();
    $(mapModalSelector).click('click', function (e) {
        e.preventDefault();
        var link = 'base/view/'+jsonData;
        $.nmManual(link);

        return false;
   }); 
```

但以这种方式它以某种方式循环，我得到额外的关闭按钮并且页面没有呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:59:36.680

尝试这样的事情，例如阅读父母上的文本框

```
 parent.document.getElementById('myTxtBoxId').value 
```

# android - 詹金斯 + 曲棍球套件

> ID：13192767
> 
> 赞同：2
> 
> 时间：2012-11-02T09:44:42.370
> 
> 标签：android, ios, continuous-integration, jenkins, ota

我正在开发 iOS/Android 应用程序。我想使用 Jenkins + HockeyKit 来部署我的应用程序。我想在我的服务器上托管 HockeyKit。这是个好主意吗？你能告诉更多 HockeyKit 的开源替代品吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:35:28.227

另一种选择是 TestFlight：
[https ://testflightapp.com/](https://testflightapp.com/)

他们提供托管解决方案，因此它不是托管在您自己的服务器上，但是它们提供了很多功能。

还有一个 Jenkins 插件，允许您将构建发布到 TestFlight：
[https ://wiki.jenkins-ci.org/display/JENKINS/Testflight+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Testflight+Plugin)

还有 HockeyApp：
[http](http://hockeyapp.net/) ://hockeyapp.net/ 他们使用 HockeyKit 提供托管解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T21:15:19.100

如果您正在寻找 HockeyKit 的开源替代品，请查看[Knappsack](http://knappsack.com "背包")。

还有一个带有免费层的托管解决方案可能对您有用。这是 GitHub 上的源链接：[Knappsack Source](https://github.com/sparcedge/knappsack "背包来源")

目前，没有任何方法可以将 Knappsack 与您的构建服务器集成，因此需要定制解决方案。

# android - Android：应用程序适用于除三星以外的所有设备。怎么解决？致命异常：AsyncTask #2

> ID：13192772
> 
> 赞同：0
> 
> 时间：2012-11-02T09:44:51.097
> 
> 标签：android, android-asynctask, samsung-mobile

我目前正在构建的应用程序适用于除三星设备之外的所有设备。并且该错误与 Android 版本无关。

这是我在三星 Galaxy 或三星标签 10.1 上运行应用程序时的错误报告：

```
11-02 10:04:49.748: I/System.out(11183): Wrong XML file structure: Unexpected token (position:TEXT File does not ex...@1:20 in java.io.StringReader@418eb450) 
11-02 10:04:49.748: W/dalvikvm(11183): threadid=15: thread exiting with uncaught exception (group=0x40c511f8)
11-02 10:04:49.763: E/AndroidRuntime(11183): FATAL EXCEPTION: AsyncTask #2
11-02 10:04:49.763: E/AndroidRuntime(11183): java.lang.RuntimeException: An error occured while executing doInBackground()
11-02 10:04:49.763: E/AndroidRuntime(11183):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.lang.Thread.run(Thread.java:856)
11-02 10:04:49.763: E/AndroidRuntime(11183): Caused by: java.lang.NullPointerException
11-02 10:04:49.763: E/AndroidRuntime(11183):    at com.lgsvcacademy.lgrepairsupport.ErrorCodeList$GetDataTask.doInBackground(ErrorCodeList.java:167)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at com.lgsvcacademy.lgrepairsupport.ErrorCodeList$GetDataTask.doInBackground(ErrorCodeList.java:1)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-02 10:04:49.763: E/AndroidRuntime(11183):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-02 10:04:49.763: E/AndroidRuntime(11183):    ... 4 more 
```

在第 167 行附近的 ErrorCodeList 中添加了代码：

```
String feedURL="...";
String xml = XMLfunctions.getXML(feedURL);
Document doc = XMLfunctions.XMLfromString(xml);

int numResults = 1;

if((numResults <= 0)){
   Toast.makeText(ErrorCodeList.this, "No results found", Toast.LENGTH_LONG).show();  
   finish();
}      

/*Line 167>*/ NodeList troubles = doc.getElementsByTagName("trouble");
for (int i = 0; i < troubles.getLength(); i++) {
String troubleTypeAtt;

HashMap<String, String> map = new HashMap<String, String>();

Element e = (Element)troubles.item(i);
troubleTypeAtt = e.getAttributes().getNamedItem("type").getNodeValue();
if((troubleTypeAtt.equals("error")) || (troubleTypeAtt.equals("notification"))) {
... 
```

可能是什么问题呢？我的 AsyncTask 在任何其他设备上都能完美运行。三星手机有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:18:21.127

好的，我解决了。@Janusz 一点点调试就可以了。问题不在于 XML 结构，也不在于错误仅发生在三星设备上。发生的事情是我的 XML 超链接侦听设备的语言，然后获取正确的 XML 文件。但是在开发过程中，我在服务器上没有特定的语言，但碰巧我从同事那里得到的所有三星设备都使用了特定的语言。哦！永远感谢您与我一起思考！

# backbone.js - 取消对“失去焦点”的事件处理程序的委托

> ID：13192778
> 
> 赞同：0
> 
> 时间：2012-11-02T09:45:04.503
> 
> 标签：backbone.js

我试图尽可能清楚地表达这一点。

我有一个显示表单的视图。我将事件处理程序绑定到提交按钮，如下所示：

```
events: {
    'click #bsubmit': 'save'
} 
```

在保存功能中，成功后，我会在导航离开之前注意 undelegateEvents()：

```
...
that.undelegateEvents();
window.router.navigate('#/home');
... 
```

所以如果有人来到这个页面，提交页面并转到（实际上是：被送回）主页，一切都很好。

但是，那里还显示了一个“主页”链接，它是顶层模板的一部分。它是这样指定的：

```
<a href="#/home">Home</a> 
```

因此，如果有人来到这个页面，点击主页链接，然后（从那里）返回到这个页面，事件就会被第二次映射。现在，当有人提交表单时，它会被提交两次。

鉴于我有很多视图，并且导航可以通过多种方式发生，当导航以更高（不可控制）的方式发生时，取消委托事件的常见模式是什么？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T23:48:41.663

在您的情况下，您不需要取消委托事件。只需从 DOM 中删除您的表单`$('el').remove()`，javascript 事件将自动被删除

最好的解决方案是将 a`HomepageView`和`FormView`each 放在同一个容器中（比如说`.container`）。

完整场景示例：

*   用户转到#homepage，我们实例化 a`HomepageView`并将其渲染`.container`
*   用户转到#form，我们实例化 a`FormView`并将其渲染`.container`
*   用户转到#homepage，我们实例化 a`HomepageView`并将其渲染`.container`
*   ……等等等等

因此，每次用户导航到新路线时，先前的视图都会被新的视图替换。

由于以前的视图 HTML 不再属于 DOM，因此您不再需要取消委托事件。

当然，`.container`元素不属于我们的视图，每个视图都有自己的元素呈现在`.container`元素内部。

阅读这篇[博文](http://jules.boussekeyt.org/2012/memory-free-backbone-router.html)了解更多信息。

# ios - iPad 第 4 代和 Ipad mini 的新设备型号是什么？

> ID：13192786
> 
> 赞同：2
> 
> 时间：2012-11-02T09:45:29.317
> 
> 标签：ios, ipad, ipad-mini

我想弄清楚哪些设备型号是新的 iPad 4th 和 iPad mini。

我有一个新的 Ipad 4th Wifi，型号是`iPad3,4`. 有人知道 iPad 4 代或 iPad mini 吗？

我对其他 Ipad 型号的猜测是：（作为 Ipad 3th gen）

*   `iPad3,5` 适用于 iPad 第 4 代 GSM
*   `iPad3,6` 适用于 iPad 第 4 代 CDMA

**更新**

Ipad mini Wifi 是`iPad2,5`

GSM和CDMA？

# c# - 在 windows azure 中存储 blob 存储附加数据，例如 DB 中的内容类型

> ID：13192788
> 
> 赞同：0
> 
> 时间：2012-11-02T09:45:32.547
> 
> 标签：c#, sql-server-2008, azure, azure-storage

我们有一个相当大的解决方案，它使用 FileStream 在 Sql Server 2008 中存储大量图像、视频、文档。我们已经开始迁移到使用 Windows azure blob 存储来利用地理复制，这意味着将 varbinary(max) 列更改为相对 url，我们将附加指向我们的存储帐户的自定义子域。

这一切都很好，我们很高兴进行测试，但是我们目前使用 varbinary 数据存储 Filename、extension 和 contentType。

我的问题是，如果我们只是去一个相对的 url，如果需要的话，它会有文件扩展名，我们需要存储这些额外的数据吗？我们正在办公室辩论，共识似乎是保持简单，只存储 URL。

大多数人在这种情况下会做什么？存储这些额外数据的用途/好处是什么？

非常感谢您对此的想法，外部意见可能会解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:01:05.910

我倾向于将任何关于我存储在 Azure 中的文件的元数据（我认为可能有用的）保存在 SQL 和 URI 中。

**什么是“有用的”？**
这实际上取决于您的情况。例如，我发现（从操作/监控的角度来看）根据 URI 存储文件大小很有用，这样我就可以轻松快速地查看文件存储使用情况。我还存储文件扩展名/内容类型。基本上，我尝试在本地保存任何可以节省我的元数据，否则我不得不实际离开并与 Azure 交谈，a) 以提高速度/性能和 b) 最大限度地减少 API 上的命中数（从而降低成本 - 只是真的如果你做了很多点击）

所以我知道，对于任何可能需要详细文件可用的报告需求/UI，我可以生成一些有用的元数据，而不必去 Azure 附近的任何地方。然后只有在我确实需要获取文件时才真正接触 Azure。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:08:10.410

您可能会发现有两件事很有用：每个 blob 都有一个“内容类型”系统属性，可以在上传 blob 时设置（您也可以稍后更改它）。另一件事是，您也可以使用 blob 以键值对的形式指定自定义元数据。但是元数据不可搜索。因此，如果您想根据一些自定义属性搜索 blob，最好将它们存储在 blob（SQL 服务器）之外。元数据的另一件事是它的最大大小。如果我没记错的话，有 8 KB 的限制。

# jquery - 无法将数据添加到 indexeddb 对象存储

> ID：13192793
> 
> 赞同：1
> 
> 时间：2012-11-02T09:45:40.573
> 
> 标签：jquery, jquery-plugins, indexeddb

我正在使用[jquery-indexed-db 插件](https://github.com/axemclion/jquery-indexeddb/blob/gh-pages/docs/README.md)制作一个示例项目，只是为了学习[indexeddb](http://www.w3.org/TR/IndexedDB/)。

**JS代码**

```
$(function() {
    /*Loggers*/
    write = function(info) {
        console.info(info);
    }

    writeError = function(e) {
        console.info(e);
    }

    /*Settings*/
    dbName = "testDB";
    osName = "list";

    /*DB Init*/
    db = $.indexedDB(dbName).then(write, writeError)

    /*ObjectStore Init*/
    objectStore = db.objectStore(osName, false);

    /*Adding a new record*/
    $("#submit").click(function(){
        objectStore.add( 
            {
                "Name": $("#name").val(),
                "Age": $("#age").val()
            },
            $("#id").val()
        ).then(write, writeError);

        $("#id").val("");
        $("#name").val("");
        $("#age").val("");

    });

}); 
```

**代码**

```
<ul>
    <li>
        <input type="text" id="id" placeholder="Id" />
    </li>
    <li>
        <input type="text" id="name" placeholder="Name" />
    </li>
    <li>
        <input type="text" id="age" placeholder="Age" />
    </li>
    <li>
        <input type="button" id="submit" name="submit" value="Submit"/>
    </li>
</ul> 
```

单击提交按钮时出现异常。错误如下

```
IDBDatabaseException
code: 11
message: "InvalidStateError: DOM IDBDatabase Exception 11"
name: "InvalidStateError"
stack: "Error: An operation was called on an object on which it is not allowed or at a time when    it is not allowed.↵    at null.<anonymous>    (file:///*****/js/jquery.indexeddb.js:468:33)↵    at n (file:///******/js/jquery.js:1:14837)↵    at Object.o.add [as done] (file:///******/js/jquery.js:1:15052)↵    at Object.h.then (file:///******/js/jquery.js:1:16026)↵    at Object.<anonymous> (file:///******/js/jquery.indexeddb.js:465:17)↵    at Function.f.extend.Deferred (file:///******/js/jquery.js:1:16742)↵    at Object.$.extend.transaction (file:///******/js/jquery.indexeddb.js:464:15)↵    at Object.<anonymous> (file:///******/js/jquery.indexeddb.js:516:11)↵    at Function.f.extend.Deferred (file:///******/js/jquery.js:1:16742)↵    at op (file:///******/js/jquery.indexeddb.js:501:16)" type: "exception" 
```

难道我做错了什么？

我正在使用谷歌浏览器（版本 22.0.1229.94）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T06:29:53.997

您需要先创建事务，然后才能打开对象存储。

```
$.indexedDB(dbName).transaction([osName], 1).then(function(transaction){
    objectStore = transaction.objectStore(osName);
}); 
```

顺便说一句，那是您提供的完整脚本吗？我错过了创建对象存储的部分。

# android - 动态创建按钮

> ID：13192795
> 
> 赞同：1
> 
> 时间：2012-11-02T09:45:44.027
> 
> 标签：android, widget

嘿，伙计们需要一点帮助........我的目的是开发一个只包含一个按钮的应用程序......点击它必须在屏幕上动态创建另一个按钮......

这是我的代码...

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
            Button bee=new Button(getBaseContext());
            bee.setText("hello:");
             RelativeLayout a;
            a=(RelativeLayout)findViewById(R.layout.activity_main);
    a.addView(bee,new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        }
    }); 
```

此代码没有错误，但执行时显示“不幸的是 'myapplication' 已停止”....

请帮帮家伙..（我的唯一目标是动态创建小部件，因此尝试了 dis 程序）。如果您有任何其他建议，请发表评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:50:58.990

```
 a=(RelativeLayout)findViewById(R.layout.activity_main); 
```

activity_main 是一个布局，而不是一个 RelativeLayout 小部件！

你应该使用

```
 a=(RelativeLayout)findViewById(R.id.my_relative_layout); 
```

请发布堆栈跟踪（logcat），以便您获得更好更快的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:53:31.747

您正在查找 id 而不是 layout

所以改变这一行：

```
a=(RelativeLayout)findViewById(R.id.activity_main); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T09:54:45.553

试试这个代码我认为你只是因为没有正确设置参数而遇到问题所以检查这个代码 -

```
 LinearLayout container = (LinearLayout)findViewById(R.id.container);

    Button btn = new Button(this);
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
      LinearLayout.LayoutParams.MATCH_PARENT, 
      LinearLayout.LayoutParams.WRAP_CONTENT);
    btn.setLayoutParams(lp);

    container.addView(btn); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:52:23.457

您正试图“找到”一个不存在的布局！请确保您已`RealtiveLayout`使用有效 id 定义 a 然后执行

`a=(RelativeLayout)findViewById(R.id.valid_layout_id);`

代替

`a=(RelativeLayout)findViewById(R.layout.activity_main);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T09:52:27.857

尝试这个。

```
RelativeLayout rLayout = (RelativeLayout )findViewById(R.id.relativeLayout); // Here this should be id of your relative layout.
Button btn = new Button(this);
rLayout.addView(btn); 
```

# java - 在java中禁用从jar文件中提取

> ID：13192796
> 
> 赞同：0
> 
> 时间：2012-11-02T09:45:47.367
> 
> 标签：java, swing, jar, inno-setup, executable-jar

我想为 java swing 应用程序制作安装文件。

我通过编写脚本文件并将源文件选择为 jar 和其他必要资源来创建设置。

现在我想让我的 jar 禁用提取。

有什么方法可以确保没有人可以从我的 jar 文件中访问资源，无论是类文件还是图像等。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:53:09.537

你可以让你的资源更难获得，但你不能让它变得不可能。顺便说一句，这不是 Java 问题，而是分布式软件的一般问题。为了访问您的资源，您的程序（或者在 Java 的情况下是运行时环境）必须能够解压缩它们。即使您以某种方式对其进行加密，程序也需要包含解密密钥和解密算法。坚定的用户可以通过逆向工程找到这些，并使用它们来获取您的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:59:38.460

您可以尝试混淆您的代码。

这是我用来混淆的一个。

```
 http://www.zelix.com/klassmaster/ 
```

你可以找到更多的工具。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T10:02:05.973

您可以使用 java webstart，您的 jar 将保存在缓存中，因此很难访问。

[Java 网络入门指南](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/contents.html)

# javascript - 使用 fabric.loadSVGFromString 扭曲的结果

> ID：13192798
> 
> 赞同：1
> 
> 时间：2012-11-02T09:45:53.630
> 
> 标签：javascript, html5-canvas, fabricjs

我用 inkscape 编辑了一个 SVG：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg id="svg2816" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/">
 <defs id="defs2818"></defs>
 <metadata id="metadata2821">
  <rdf:RDF>
   <cc:Work rdf:about="">
    <dc:format>image/svg+xml</dc:format>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:title/>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <g id="layer1" stroke-linejoin="miter" stroke="#ce3762" stroke-linecap="butt">
  <path id="path2828" style="stroke-dasharray:none;" d="M40,3,35,3,20,18,10,18s-5,5,0,10h10l15,15h5v-40z" transform="translate(-5,0)" stroke-miterlimit="4" stroke-width="0.5" fill="#42101e"/>
  <path id="path2830" d="m37,13s2,7.5359,0,15" transform="translate(0,2)" stroke-width="1px" fill="none"/>
  <path id="path2834" d="m40,11s3,10,0,19" transform="translate(0,2)" stroke-width="1px" fill="none"/>
  <path id="path2836" d="m43,6s6,14,0,29" transform="translate(0,2)" stroke-width="1px" fill="none"/>
 </g>
</svg> 
```

它应该如下所示：

![在此处输入图像描述](../Images/db29ab7489a9fa1b7b8caa7a9d473623.png)

当我使用 fabricjs 导入它时：

```
// volumeOnPrint is the string pasted before
fabric.loadSVGFromString(volumeOnPrint, function(objects, options) {
    var widget = new fabric.PathGroup(objects, options);
    // root is my fabricjs canvas
    root.add(widget);
}); 
```

它得到：

![在此处输入图像描述](../Images/63aac866b51b966bf259f19c2e37bca5.png)

（背景不是问题，这是我的画布之一）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:21:42.530

原来这是Fabric中的一个错误。

我刚刚[修复它并推送了](https://github.com/kangax/fabric.js/commit/a83b97a4e47f539c602d43de56ba635ce06ba26e)新版本（0.9.21）。

通常，使用 Inkscape 创建的 SVG 文件比使用 Illustrator 创建的文件更难解析。但我们正在变得越来越好:)

有一个不断增长的[可视化测试套件](http://fabricjs.com/svg_rendering/)，我在其中添加了您的形状以避免将来出现回归（如果可以，请告诉我）。小心，因为加载/解析所有形状可能需要一段时间。

# php - 连接两个数组的困惑

> ID：13192800
> 
> 赞同：-2
> 
> 时间：2012-11-02T09:46:01.307
> 
> 标签：php, arrays

```
<?php
    $arr1=array("jol","pop","hari","john");//the array count is not limited to 4
    $arr2=array('germany','america','holland','america');
    ?> 
```

现在我想链接

```
Name: jol(1),pop(2),hari(3),john(2)

Address:germany(1),america(2),holland(3) 
```

我们得到这个名字是因为`pop(2)` 两者`john(2)`都来自同一个国家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:54:12.683

假设这两个数组将始终具有相同数量的条目，您可以使用如下代码执行此操作：

```
for($i=0; $i<count(@arr2); $i++) {
    if(!isset($country[$arr2[$i]])) {
        $country[$arr2[$i]] = $i;
    }
    $link[$arr1[$i]] = $country[$arr2[$i]];
} 
```

循环的第一部分存储每个国家/地区的第一个匹配项的索引。第二部分查找每个名称的相应索引。

当然，您需要为用户找不到国家/地区的情况添加错误检查（例如，数组中的元素数量不匹配）。

# git - 如何使用本地提交生成 git 补丁

> ID：13192806
> 
> 赞同：6
> 
> 时间：2012-11-02T09:46:36.170
> 
> 标签：git

我正在为一个开源项目的开发做出贡献，该项目使用 git 作为源代码的存储库。

在对源代码进行一些修改后，我想生成一个包含我的签名（电子邮件地址和我的姓名）的补丁并将其发送给开源项目维护者。

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T09:46:36.170

1）从git存储库下载源代码：

```
git clone git://address.of.repository/project/ /folder/path/on/my/computer 
```

2）对源代码进行一些修改。可以在项目中添加新文件/文件夹

3) 为 git commit 签名设置您的电子邮件地址和您的姓名：

```
git config --global user.name "Your Name"
git config --global user.email you@example.com 
```

完成此操作后，您可以通过以下方式修复用于此提交的身份：

```
git commit --amend --reset-author 
```

4）在提交更改之前。我们必须将新文件/文件夹添加到本地 git 存储库：

源码的项目文件夹下

```
git add <Newfolder>
git add <Newfile> 
```

4）然后在本地提交修改：

源码的项目文件夹下

```
commit -a 
```

这将打开一个interactif窗口

您可以检查提交是否检测到已编辑的文件和以下新文件：

```
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   bin/Makefile.am
#       modified:   configure.ac
#       new file:   src/new.c 
```

在 的 窗口下`commit -a`，您必须为您的修改输入注释

然后用`Ctrl`+ `O`（WriteOut）保存你的提交，然后`Enter`你的提交现在就被保存了

然后用+ (Exit)退出`commit -a`窗口`Ctrl``X`

5）现在你可以生成你的补丁：

源码的项目文件夹下

```
git format-patch -1 
```

这将生成一个名称如下的补丁文件`0001-...-...-.. .patch`

如果你想生成补丁，`signed-off-by`只需添加`-s`：

```
git format-patch -1 -s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-27T20:33:10.007

注意：关于该`git format-patch`部分，您将（git 2.0.x/git 2.11，Q3 2014）添加在文件中定义的签名。

请参阅[Jeremiah Mahler的](https://github.com/jmahler)[提交 7022650](https://github.com/git/git/commit/7022650f61ff7d7c9297db4a04f4e93ae14e1750) ( [)](https://github.com/jmahler)[`jmahler`](https://github.com/jmahler)

### `format-patch`: 添加 " `--signature-file=<file>`" 选项

> 为格式补丁添加一个选项，用于从文件中读取签名。

```
$ git format-patch -1 --signature-file=$HOME/.signature 
```

> config 变量`format.signaturefile`也可用于将其设为默认值。

```
$ git config format.signaturefile $HOME/.signature
$ git format-patch -1 
```

# javascript - 如何在 Chrome 下使用 javascript 获取整个 xml 节点？

> ID：13192814
> 
> 赞同：0
> 
> 时间：2012-11-02T09:47:18.730
> 
> 标签：javascript, xml, google-chrome

```
var xml = '<books><book><id>1</id></book></books>';
var xmlDoc = $.parseXML(xml);
$(xmlDoc).find("book").each(function(){
  alert($(this));
}); 
```

我想看到的是：

```
<book><id>1</id></book> 
```

在 IE 中，我可以使用 $(this)[0].xml。但是在 Chrome 中，没有 xml 属性。那我该怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:49:06.393

最简单的方法是使用浏览器的内置`XMLSerializer`实现（存在于所有主流浏览器的当前版本中，包括 IE 9）：

```
function serializeXmlNode(xmlNode) {
    if (typeof window.XMLSerializer != "undefined") {
        return new window.XMLSerializer().serializeToString(xmlNode);
    } else if (typeof xmlNode.xml != "undefined") {
        return xmlNode.xml;
    }
    return "";
}

var xml = '<books><book><id>1</id></book></books>';
var xmlDoc = $.parseXML(xml);
$(xmlDoc).find("book").each(function(){
    alert( serializeXmlNode(this) );
}); 
```

参考：

*   [W3C 规范](http://domparsing.spec.whatwg.org/)
*   [MDN](https://developer.mozilla.org/en-US/docs/XMLSerializer)
*   [IE 9 支持](http://blogs.msdn.com/b/ie/archive/2010/10/15/domparser-and-xmlserializer-in-ie9-beta.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:49:13.257

~~如果要查看`1`（`id`元素内`book`元素的文本），请使用~~

 ~~```
alert($(this).find('id').text()); 
```~~ 

~~实例 | 来源~~

*（您的格式完全改变了问题——首先正确格式的重要性！）*

**更新**：

~~我相信获得这个的唯一方法（除了编写自己的 DOM-to-XML 序列化程序）~~ *（不，还有[另一种可能更好](https://stackoverflow.com/a/13193743/157247)的方法）*是将它包装在另一个元素中并使用`html`：

```
alert($("<x>").append(this).html()); // <== Probably dangerous 
```

...但这会将*元素*移出原始文档。所以你可以通过克隆来避免这种情况：

```
alert($("<x>").append(this.cloneNode(true)).html()); 
```

[实例](http://jsbin.com/enubom/3)| [来源](http://jsbin.com/enubom/3/edit)

# wpf - 通过后面的代码更新 WPF DataGrid 列标题文本

> ID：13192823
> 
> 赞同：3
> 
> 时间：2012-11-02T09:48:04.167
> 
> 标签：wpf, datagrid

如何通过后面的代码更改 WPF DataGrid 列标题文本？我尝试了下面的代码，但它不起作用。

```
this.sampleDataGrid.Columns[0].Header = "New Header"; 
this.sampleDataGrid.Refresh(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:02:18.777

如果您的 DataGridColumn 是一个模板，那么您需要在代码中更改它的模板。

```
 var template = new DataTemplate();
    template.VisualTree = new FrameworkElementFactory(typeof(TextBlock));
    template.VisualTree.SetValue(TextBlock.TextProperty, "New Header");
    dataGrid.Columns[0].HeaderTemplate = template; 
```

# sql-server - SQL Service Broker — 一个中央 SQL 和多个附属 SQL……传输状态“禁用或未配置”

> ID：13192824
> 
> 赞同：1
> 
> 时间：2012-11-02T09:48:05.243
> 
> 标签：sql-server, service-broker

**摘要：**我确实观察到“Service Broker 协议传输已禁用或未配置”。在`transmission_status`队列中。似乎应该设置更多细节。或者我错过了什么？

[这个问题与我之前的问题的答案](https://stackoverflow.com/a/11704632/1346705)直接相关。我确实遵循了使用特殊技巧`GRANT CONNECT ON ENDPOINT::[<brokerendpointname>] TO [public]`来简化受信任本地网络中的插件类型配置的建议：

```
create message type...
create contract ...
create queue ...
create service [tcp://MACHINE3:4022/Satellite] 
   on ...
   ([...]);
grant send on service::[tcp://MACHINE3:4022/Satellite] to [public];
create route transport with address = 'TRANSPORT'; 
```

对于细节可能起作用的情况，这里是真实代码的摘录：

```
USE [MySatelliteDB];

CREATE MESSAGE TYPE [//x/y/RequestMessage]
  VALIDATION = WELL_FORMED_XML;

CREATE MESSAGE TYPE [//x/y/ReplyMessage]
  VALIDATION = WELL_FORMED_XML;

CREATE CONTRACT [//x/y/SimpleContract]
  ([//x/y/RequestMessage] SENT BY INITIATOR,
   [//x/y/ReplyMessage]   SENT BY TARGET);

CREATE QUEUE GenericQueue;
CREATE SERVICE [tcp://192.168.4.120:4022/GenericService]
  ON QUEUE GenericQueue ([//x/y/SimpleContract]);

GRANT SEND ON SERVICE::[tcp://192.168.4.120:4022/GenericService] TO [public];

CREATE ROUTE transport WITH ADDRESS = 'TRANSPORT'; 
```

中央机器使用相同的数据库名称和 IP 地址（在这种情况下以 158 结尾）。然后我尝试发送明确的虚拟消息......

```
DECLARE @InitDlgHandle UNIQUEIDENTIFIER;
DECLARE @RequestMsg NVARCHAR(100);

BEGIN TRANSACTION;

BEGIN DIALOG @InitDlgHandle
     FROM SERVICE [tcp://192.168.4.120:4022/GenericService]
     TO SERVICE N'tcp://192.168.4.158:4022/GenericService'
     ON CONTRACT [//x/y/SimpleContract]
     WITH
         ENCRYPTION = OFF;

SELECT @RequestMsg = N'<RequestMsg>Message for Target service.</RequestMsg>';

SEND ON CONVERSATION @InitDlgHandle
     MESSAGE TYPE [//x/y/RequestMessage]
     (@RequestMsg);

SELECT @RequestMsg AS SentRequestMsg;

COMMIT TRANSACTION;
GO 
```

它显示了

```
SentRequestMsg
<RequestMsg>Message for Target service.</RequestMsg> 
```

...显然是最后一次选择的结果。这样我猜就`COMMIT TRANSACTION`成功了。（未观察到错误消息。）

然后我打开另一个 SQL 服务器的 SSMS 窗口并尝试接收...

```
DECLARE @RecvReqDlgHandle UNIQUEIDENTIFIER;
DECLARE @RecvReqMsg NVARCHAR(100);
DECLARE @RecvReqMsgName sysname;

BEGIN TRANSACTION;

WAITFOR
( RECEIVE TOP(1)
    @RecvReqDlgHandle = conversation_handle,
    @RecvReqMsg = message_body,
    @RecvReqMsgName = message_type_name
  FROM GenericQueue
), TIMEOUT 1000;

SELECT @RecvReqMsg AS ReceivedRequestMsg;

IF @RecvReqMsgName =
   N'//x/y/RequestMessage'
BEGIN
     DECLARE @ReplyMsg NVARCHAR(100);
     SELECT @ReplyMsg =
        N'<ReplyMsg>Message for Initiator service.</ReplyMsg>';

     SEND ON CONVERSATION @RecvReqDlgHandle
          MESSAGE TYPE
            [//x/y/ReplyMessage] (@ReplyMsg);

     END CONVERSATION @RecvReqDlgHandle;
END

SELECT @ReplyMsg AS SentReplyMsg;

COMMIT TRANSACTION;
GO 
```

它显示了两个具有意外值的结果

```
ReceivedRequestMsg
NULL
---------------------------------------------
SentReplyMsg
NULL 
```

未观察到错误消息。

运行脚本时...

```
USE [MySatelliteDB];

SELECT * FROM GenericQueue WITH (NOLOCK);
SELECT * FROM sys.transmission_queue; 
```

我可以看到某些东西不能正常工作（是一行，手动包装）

```
conversation_handle                   to_service_name                        
1A227CA7-6F24-E211-B1EC-004063F5CE90  tcp://192.168.4.158:4022/GenericService  
------------------------------------------------------------------------------...
to_broker_instance                    from_service_name
<empty>                               tcp://192.168.4.120:4022/GenericService
------------------------------------------------------------------------------...
service_contract_name                 enqueue_time
//x/y/SimpleContract                  2012-11-01 22:01:15.440
------------------------------------------------------------------------------...
message_sequence_number  message_type_name  
0                        /x/y/RequestMessage
------------------------------------------------------------------------------...
is_conversation_error    is_end_of_dialog    message_body   
0                        0                   0x3C0052006...snip...3E00
------------------------------------------------------------------------------...
transmission_status                                                    priority
The Service Broker protocol transport is disabled or not configured.   5 
```

我应该关注什么才能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:17:48.057

> Service Broker 协议传输已禁用或未配置

表示端点未启动。试试[`ALTER ENDPOINT [<brokerendpointname>] STATE=STARTED;`](http://technet.microsoft.com/en-us/library/ms186332.aspx)。如果语句成功但问题仍然存在，请检查 ERRORLOG，它应该在您运行此语句后不久显示一条错误消息，说明它为什么无法启动端点。很可能存在侦听端口冲突。

# javascript - 集成angularjs和d3，简单的数据绑定示例

> ID：13192829
> 
> 赞同：4
> 
> 时间：2012-11-02T09:48:25.440
> 
> 标签：javascript, d3.js, angularjs

我在编写一个使用 angularjs 更新 d3 圆位置的简单指令时遇到问题。

这是示例 - [http://jsfiddle.net/hKxmJ/3/](http://jsfiddle.net/hKxmJ/3/)

这是模型：

```
 app.controller('AppCtrl', function ($scope) {
   $scope.d = [5, 10, 70, 6, 40, 45, 80, 30, 25];
 }); 
```

该示例应该做的是当输入框中的数字发生变化时，能够同时更新圆圈位置和输入旁边的文本。现在，除了指令的初始加载之外，没有任何作用。

### 更新

[http://jsfiddle.net/hKxmJ/5/](http://jsfiddle.net/hKxmJ/5/)

我已将范围更改为

```
app.controller('AppCtrl', function ($scope) {
  $scope.d = [{v: 5}, {v: 10}, {v: 70}, {v: 6}, {v: 40}, {v: 45}, {v: 80}, {v: 30}, {v: 25}];
}); 
```

并且文本正在更新，但指令上的手表仍未更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:07:01.350

我设法在谷歌论坛上找到了一些帮助 - [https://groups.google.com/forum/?fromgroups=#!topic/angular/NblckkSF6EM](https://groups.google.com/forum/?fromgroups=#!topic/angular/NblckkSF6EM)

事实证明，范围可以传递一个可选的 objectEquality 参数（http://docs.angularjs.org/api/ng.$ro​​otScope.Scope）

```
objectEquality (optional) – {boolean=} – Compare object for equality rather than for reference. 
```

现在手表功能将起作用。

```
 scope.$watch(attr.ghBind, function(value){
    vis.selectAll("circle").data(value)
       .attr("cy", function(d){return d.v;});
    }
 , true); 
```

小提琴在这里：http: [//jsfiddle.net/hKxmJ/6/](http://jsfiddle.net/hKxmJ/6/)

### 更新

我还设法使用鼠标生成数据的双向绑定来更新数据点。关键是跟踪鼠标位置，然后使用反函数更新项目的位置，然后调用scope.$apply()。此处突出显示：

```
 .on('drag', function(d, i) {
        var sel = d3.select('.drag'),
          cy = sel.attr('cy');
        sel.attr('cy', parseInt(cy)+d3.event.dy); // Update mouse postion
        d.v = height-Math.round(cy);              // Calculate value using an inverse function
        scope.$apply();                           // Call scope.$apply()
        console.log(d,i,cy);
      }) 
```

小提琴在这里：http: [//jsfiddle.net/hKxmJ/7/](http://jsfiddle.net/hKxmJ/7/)

# memory - Hadoop 名称节点内存使用情况

> ID：13192835
> 
> 赞同：2
> 
> 时间：2012-11-02T09:48:52.307
> 
> 标签：memory, hadoop, distributed-computing

我对 hadoop namenode 内存问题感到困惑。

1.  当namenode内存使用率高于一定百分比（比如75%）时，通过hadoop api读写hdfs文件会失败（比如调用一些open()会抛出异常），是什么原因？有没有人有同样的事情？PS.这次namenode磁盘io不高，CPU比较空闲。

2.  什么决定了namenode'QPS（每秒查询）？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:11:17.450

由于 namenode 基本上只是一个管理`HashMap`块的 RPC 服务器，因此您有两个主要的内存问题：

1.  Java`HashMap`非常昂贵，它的冲突解决（单独的链接算法）也很昂贵，因为它将冲突的元素存储在链表中。
2.  RPC 服务器需要线程来处理请求 - Hadoop 带有他自己的 RPC 框架，您可以使用默认设置为 10 的数据节点来配置它。或者您可以`dfs.namenode.service.handler.count` **为**`dfs.namenode.handler.count` **其他**`JobClients`想要运行的客户端（例如 MapReduce 作业）配置它一份工作。当一个请求进来并且它想要创建一个新的处理程序时，它可能会耗尽内存（新线程也分配了大量的堆栈空间，也许你需要增加这个）。

所以这些就是你的namenode需要这么多内存的原因。

```
What determines namenode'QPS (Query Per Second) ? 
```

我还没有对它进行基准测试，所以我不能给你很好的建议。当然，微调处理程序计数高于可以并行运行的任务数+推测执行。根据您提交工作的方式，您还必须微调其他属性。

当然，您应该始终为 namenode 提供足够的内存，这样它就有足够的空间来不陷入完整的垃圾回收周期。

# php - 从搜索返回的内容中更新所有内容

> ID：13192844
> 
> 赞同：0
> 
> 时间：2012-11-02T09:49:34.643
> 
> 标签：php, yii

我是 Yii 的绝对初学者，我发现很难深入这些水域。无论如何，我的问题是我设法进行搜索（）来过滤我需要的内容，然后我想根据搜索返回的内容将一个列更新为特定的内容，这是我的代码

```
if(isset($_POST['Manual']))
    $m->attributes=$_POST['Manual'];
$m->search(); 
```

我检查了 search() 返回了我需要的内容，但我无法编写更新查询。这是我尝试的方法...... `$m()->updateAll(array('toname'=>'123456'), $res);` 任何建议都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:56:08.710

updateAll 函数使用以下语法。

```
$criteria = new CDbCriteria;
$criteria->addInCondition( "id" , $ids ) ; // $ids = array ( 1, 2, 3, 4 );
YourModel::model()->updateAll(array('toname'=>123456),$criteria); 
```

您的代码中的 $res 是什么？

# c - C 新手，在理解以下函数时需要帮助

> ID：13192845
> 
> 赞同：-1
> 
> 时间：2012-11-02T09:49:35.183
> 
> 标签：c, linux

```
case 1:
    if (fork())
        wait(0);
    else
        execlp("ls", "ls", (char *)NULL);
    break; 
```

有人告诉我用 C 语言制作一个用户界面文本显示菜单，这是以前在 Shell 脚本的帮助下制作的。我已经浏览了 ncurses 库，但如果有人可以指导我使用以前使用 ncurses 实现的代码，用于 Linux 的 C 中的菜单，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:56:04.740

您显示的代码只是一个片段，它不是“函数”。`switch`它看起来像是从语句中间复制出来的。

如果被开启的表达式的值为1，它将`fork()`是一个新的进程。然后子进程将`execlp()`运行该`ls`程序。父母将等待孩子完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:01:08.053

关于代码：

```
case 1:
    if (fork())
        wait(0);
    else
        execlp("ls", "ls", (char *)NULL);
    break; 
```

`fork()`创建一个新的过程，一个精确的副本。Fork 将子进程的 PID 返回给父进程（因此它将执行`wait(0)`）和`0`子进程（因此它将执行`execlp()`）。

随着`execlp()`您的变化过程（指示可执行文件和参数）。您应该咨询相应的`man pages`：

*   [叉子（）](http://linux.die.net/man/2/fork)

*   [执行（）](http://linux.die.net/man/3/execlp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:00:44.723

那么，秘密就在叉子上。

> 成功时，子进程的PID返回给父进程，0返回给子进程。失败时，-1 被返回给父进程并且不创建子进程，并且 errno 被适当地设置。

当你分叉时，你会得到另一个进程，与第一个进程完全相同。唯一的区别是在子进程中fork返回了不同的值。

您的代码基本上是在说：

如果我是家长，请稍等。

如果我是孩子，做工作 - 在你的情况下，获取目录列表。

目录列表完成后，我假设孩子死了，父母重新开始生活。

这是做你正在做的事情的相当典型的代码。您有一个主应用程序，即“菜单”，并且您正在生成自己的临时副本，只需执行菜单所需的 shell 命令，然后恢复正常。

退房`man fork`...[叉子](http://linux.die.net/man/2/fork)

# javascript - 如何恢复dojo dgrid中的单个编辑行？

> ID：13192846
> 
> 赞同：0
> 
> 时间：2012-11-02T09:49:43.827
> 
> 标签：javascript, dojo, grid, dgrid

有没有办法恢复/重置 dojo-dgrid 中已编辑的行？

我可以看到 grid.revert() 确实清除了脏项目并调用了刷新方法，这将刷新整个网格。我不想要整个网格刷新。

是否可以在单击操作列上的还原/取消图标时仅重置/还原单个编辑的行（这将是[此处](https://stackoverflow.com/questions/13027345/dojo-dgrid-multiple-cells-edit)和[此处](https://stackoverflow.com/questions/13176157/dojo-editable-tree-dgrid-create-or-generate-a-new-row-like-store-newitem-sup)提到的网格中的最后一列）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T15:10:16.180

如果您使用[*Observable*](http://dojotoolkit.org/reference-guide/1.8/dojo/store/Observable.html)包装您的商店，您可以使用*notify()*来更新单行。

例如，您可以为 Revert/Cancel 按钮的*onClick*事件创建以下代码：

```
 renderCell: function(object, data, cell){

   var btnRevert = new Button({
     label: "Revert",
     // ...
     onClick: function(evt){
       var dirty = that.grid.dirty,
           id = object.id;

       if(dirty.hasOwnProperty(id)){
         // remove dirty data
         delete dirty[id];
         // ..and notify the store to update
         myStore.notify(object, object.id);
       }
     }
   }, cell.appendChild(put("div")) );

   return btnRevert;
 } 
```

这是一个带有示例的 jsfiddle：[revert example](http://jsfiddle.net/knokit/KFkNB/4/)

# sql-server-2008 - 如何使用 c# 将文本文件数据上传到 sqlserver 数据库？

> ID：13192852
> 
> 赞同：0
> 
> 时间：2012-11-02T09:50:02.507
> 
> 标签：sql-server-2008, c#-4.0, xml-parsing

我的文本文件是这样的。

```
name :Settings, id :1, preference :Mail
name:test ,id:2,preference :testMail 
```

我需要阅读该文本文件并将其作为记录放在 sqlserver 数据库中。

```
name         id   preference
 settings     1      Mail
 test         2      testMail 
```

如何像上面那样解析那个文本文件。请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:25:35.167

使用 C#.net 的 SQLbulkcopy 方法将文本文件数据插入到 sql server 表中。

检查此[**链接**](http://www.codeproject.com/Articles/57243/Reading-CSV-File-and-Inserting-Data-to-SQL-Table-u)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:56:38.873

使用生成 SSIS 包的 SQL Management Studio“导入数据”任务。

# visual-studio-2010 - 如何从关联的编码 UI 测试自动将步骤添加到 MS 测试管理器中的测试用例

> ID：13192857
> 
> 赞同：2
> 
> 时间：2012-11-02T09:50:23.697
> 
> 标签：visual-studio-2010, coded-ui-tests, microsoft-test-manager

我开始使用 Coded UI 和 Microsoft 测试管理器 (MTM)。考虑一下，我通过一些步骤在 MTM 中创建了测试用例。我可以手动运行它并记录我每一步的操作。然后我可以将 CodedUI 测试与 MTM 中的测试用例相关联。VisualStudio 自动为具有相同名称的 c# 方法生成记录的步骤。

```
 this.UIMap.OpenSAV();
     this.UIMap.AcceptTerms();
     this.UIMap.LoginAsInternal();
     this.UIMap.DeclineUpdates();
     this.UIMap.SelectEffectivity(); 
```

我需要逆问题。我想用一些方法创建 CodedUI 测试，将它与测试用例相关联，以便在 MTM 的测试用例中发生带有方法名称的步骤。

链接到 MTM 中的步骤图像。[MTM 中的步骤](http://www.screencast.com/t/Ntz7bD0fE1Nc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:52:18.060

这不是受支持的方案。您可以使用探索性测试工具快速运行测试并为您生成测试步骤，然后与编码的 ui 测试进行关联。

# gwt - GWT 编译错误 - GXT 3.0，GWT 2.4

> ID：13192861
> 
> 赞同：1
> 
> 时间：2012-11-02T09:50:35.813
> 
> 标签：gwt, gxt

我正在使用带有 GXT 3.0.0b 的 GWT 2.4.0 我正在尝试 Google 编译应用程序，但每次我收到此错误。

```
 org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding
  [ERROR] at AddNewCompDtlsForCombo.java(5): class AddNewCompDtlsForCombo 
     com.google.gwt.dev.jjs.ast.JClassType
Exception in thread "UnitWriteThread" java.lang.NullPointerException
at com.google.gwt.dev.util.DiskCache.transferToStream(DiskCache.java:182)
at com.google.gwt.dev.util.DiskCacheToken.writeObject(DiskCacheToken.java:91)
at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeObject(Unknown Source)
at         com.google.gwt.dev.javac.PersistentUnitCache$UnitWriter.run(PersistentUnitCache.java:226) 
```

问题是什么？是否缺少一些罐子/插件？早些时候我使用 GWT 2.1 和 Gxt 2.4，它曾经编译得很好。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-13T10:24:03.400

根据此页面：[https ://docs.sencha.com/gxt/3.1/getting_started/Versions.html](https://docs.sencha.com/gxt/3.1/getting_started/Versions.html)

GWT 2.4.0 可能与 GXT 3.0.0b 不兼容。切换到 GWT 2.5.1 应该会有所帮助。

# jenkins - 如何让詹金斯使用已经签出的代码库？

> ID：13192862
> 
> 赞同：5
> 
> 时间：2012-11-02T09:50:42.250
> 
> 标签：jenkins

我刚刚开始`Jenkins 1.487`并想将 Jenkins 集成到我的 Ant 项目中。但是在配置它时，我找不到任何方法让 Jenkins 重新使用已经签出的代码库，而不是下载相对于其工作区根目录的新副本。有没有办法做到这一点 ？

我尝试手动指定一个自定义工作区（我的代码库已经签出），然后单击“立即构建”。结果是它清除了我当前签出的代码说

```
"Checking out a fresh workspace because there's no workspace at /home/daud/Work
Cleaning local Directory ." 
```

连个警告都没有。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:03:52.143

如果您真的想从文件系统某处的现有签出处构建，请不要使用 Jenkins 的“源代码管理”部分。将其保留为**“无”**

*   直接进入**“构建”**部分
*   点击“添加构建步骤”
*   选择调用 Ant"
*   单击高级
*   在“构建文件”下，提供文件系统上 ant 构建文件的完整路径。您必须包含驱动器号（如果在 Windows 上）或前导 /（如果在 Linux 上）以脱离工作区（默认情况下，此路径是相对于工作区的）。或者，如果需要，使用大量 ../../../..。

但就像其他人所说的那样，这不是 CI 系统应该使用的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:52:20.250

Jenkins 和 CI 背后的想法是它适用于代码库的*新*副本。Jenkins 完成的每个构建都不应该*依赖*于任何外部前提条件，并且应该是可重现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T21:16:36.547

您可能想尝试使用 Jenkins 的[克隆工作区 SCM 插件](https://wiki.jenkins-ci.org/display/JENKINS/Clone+Workspace+SCM+Plugin)。它将允许您从一项工作压缩工作空间，并使用它为另一个工作创建工作空间。我已经将它用于需要对先前工作的工作采取行动的下游工作。

如果您使用 Git 之类的东西进行源代码控制并希望避免第二次 Git 克隆（或 SVN 签出），这也很有帮助。此外，您可以限制用于重新创建工作空间的 zip 文件的内容，例如避免将不必要的文件（例如，`.git`或`.svn`目录）传送到下游。

# backbone.js - Attach Backbone.Marionette Layout to the "body"

> ID：13192863
> 
> 赞同：4
> 
> 时间：2012-11-02T09:50:47.233
> 
> 标签：backbone.js, marionette

I have a marionette layout, which I want to attach directly to the element of the page.

```
App.Views.Layouts.Unauthenticated = Backbone.Marionette.Layout.extend
  template: "layouts/unauthenticated"
  regions:
   content: "#content"
   header: "#header"
   footer: "#footer"  
  views: {}

 initialize:->
  @el = $("body")
  @delegateEvents() 
```

then later in the app, I do this

```
App.layouts.unauthenticated = new App.Views.Layouts.Unauthenticated()
App.layouts.unauthenticated.render() 
```

The layout is not attached to the page. How do I attach it to the body, while I already used body as an "el", since I don't need extra wrappers.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T11:59:48.097

You need to set the `el` in the definition of the view, not in the initializer.

```
 App.Views.Layouts.Unauthenticated = Backbone.Marionette.Layout.extend
  el: "body"
  template: "layouts/unauthenticated"
  regions: ... 
```

# javascript - 为什么浏览器在更改hash时会跳转到ID？

> ID：13192871
> 
> 赞同：2
> 
> 时间：2012-11-02T09:51:21.807
> 
> 标签：javascript, anchor, hashtag

假设我有以下标记：

```
<div id ="About" style="height: 2000px">
    About
</div>
<div id="Work" style="height: 2000px">
    Work
</div> 
```

当我运行`location.hash = 'Work';`浏览器时，会直接跳到“工作”元素的位置。我期待具有名称属性的锚标记的行为。但在我们的例子中，它是一个`div`带有 ID 的容器。我在 IE8/9 和 Chrome 中对此进行了测试。

**为什么浏览器`div`在更改哈希时会跳转到容器？**

为了您的方便，我打开了一个[jsFiddle](http://jsfiddle.net/S5Rbt/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:53:42.130

它不仅仅是带有名称属性的锚点，任何带有 ID 的东西都可以使用 location.hash 或只是 URL 中的 #Work 跳转到。

比如点击[这里](https://stackoverflow.com/questions/13192871/why-does-the-browser-jumps-to-id-when-changing-hash/13192907#show-editor-button)`#show-editor-button`会带你到这个页面中的id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:58:53.720

这是一个特点。[它是这样设计的，您可以在rfc2854](http://www.ietf.org/rfc/rfc2854.txt)中了解它。让我为你引用它：

> 片段标识符
> 
> URI 规范 [URI] 指出，片段标识符（“#”之后的 URI 的一部分）的语义是
> 检索操作产生的数据的属性，并且片段标识符的格式和
> 解释取决于检索结果的媒体类型。
> 
> 对于标记为 text/html 的文档，片段标识符
> 指定了相应命名的元素；任何元素都可以
> 用“id”属性命名，A、APPLET、FRAME、IFRAME、IMG 和
> MAP 元素可以用“name”属性命名。这在 [HTML40] 第 12 节中有详细描述。

# jquery - jquery数据表中的自定义日期排序

> ID：13192872
> 
> 赞同：3
> 
> 时间：2012-11-02T09:51:22.910
> 
> 标签：jquery

我正在使用 jquery 数据表，而我的 html 表的其中一列包含日期。

那么我们如何编写自定义日期排序函数呢？它默认排序为字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T09:55:44.407

您可以使用 jquery 数据表中提供的自定义排序功能。使用此链接： [http ://datatables.net/plug-ins/sorting](http://datatables.net/plug-ins/sorting)

# audio - 如何将音频扩展到指定长度

> ID：13192873
> 
> 赞同：4
> 
> 时间：2012-11-02T09:51:25.733
> 
> 标签：audio, scripting, sox

我有一堆 wav 文件，我想用静音填充它们以使它们的长度完全相同。理想情况下，我想从命令行执行此操作。

我试过使用 sox 的 pad 命令，但这只会增加固定长度的静音。有什么办法可以让它只是填充**到**固定长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:15:08.890

好的，我已经解决了这个问题 - 创建一个适当数量的静音文件（通过在任何随机文件上使用 pad 和 trim），然后将它与输入文件混合：

```
sox -m -v 1 input.wav silence.wav output.wav 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:02:50.270

pad 效果不支持相对于总长度规范。假设 bash 脚本可用（未测试），您可以计算所需的样本数长度：

```
total_length=48000
pad_len=$(( total_length - $(soxi -s file_to_pad.wav) ))
sox file_to_pad.wav file_padded.wav pad 0 $pad_len 
```

# html - 哪个 Android Target 支持 Safari 或 Google Chrome？

> ID：13192875
> 
> 赞同：2
> 
> 时间：2012-11-02T09:51:34.033
> 
> 标签：html, google-chrome, android-emulator, safari

我正在尝试在 Android 模拟器上运行一个应用程序，并且在当前目标中我正在使用动画停止工作 - 但我认为这只是因为我正在使用的目标中不支持 Safari 和谷歌浏览器（它是4.1.2)。是否有支持其中任何一个的目标？

非常感谢xxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:18:27.440

根据 Google chrome 规范，它可以在 android 4.0 及更高版本上运行，因此您应该在移动设备上试用。

# c++ - 我需要在这段代码中调用 SafeArrayUnLock 吗？

> ID：13192879
> 
> 赞同：0
> 
> 时间：2012-11-02T09:51:47.110
> 
> 标签：c++, safearray

我是团队的新成员，我阅读了下面的代码。我想知道我需要在 dctor 中调用 SafeArrayUnLock 吗？我试图在没有明确线索的情况下在网上搜索。非常感谢您的帮助！

代码：

```
class Trasaction
{
private:
    CComSafeArray m_saCache;
public:
    //ctor
    Transaction(CComQIPtr<Reader>& pReader)
    {
        //This call need a SAFEARRAY** as its 3rd parameter
        pReader->ReadData(start, size, &m_saCache);
        SafeArrayLock(m_saCache.m_psa);
    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:13:17.190

当您通过 CComSafeArray（一个 RIIA）类持有 SAFEARRAY 对象时，该类将 SafeArray 保持在锁定状态 - 并且当您直接修改指针而不是调用 Attach 方法时，您必须显式调用 SafeArrayLock。但是您不必在析构函数中调用 unLock，因为 CComSafeArray 的析构函数会执行 Unlock。

为了避免将来对 SafeArrayLock 的虚假调用和缺少的 SafeArrayUnLock 产生进一步的疑问 - 我建议使用 CComSafeArray 的 Attach 方法，首先在普通的 SAFEARRAY* 中获取返回值。

# excel - 从 Excel 中的按钮运行 Sikuli

> ID：13192888
> 
> 赞同：0
> 
> 时间：2012-11-02T09:52:20.017
> 
> 标签：excel, sikuli, vba

我是 VBA 新手。在 Excel 表中我有数据。在每一行的末尾，我都有一个 onclick 按钮。

我的要求是当我单击一个按钮时，它必须从命令提示符运行 Sikuli。

哪个命令用于在 VBA 中打开和运行命令提示符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:16:02.730

我不知道 sikuli，但是如果您想在单击按钮时从 VBA 代码运行命令行，请查看 Shell 命令。

```
Private Sub CommandButton1_Click()
  dblRetVal = Shell("java -jar %SIKULI_HOME%\script.jar path\yourScript.sikuli", vbHide)
  'VBHIDE HIDES SHELL WINDOW (BLACK DOS WINDOW)
End Sub 
```

# unix - 使用 diff 忽略换行符

> ID：13192890
> 
> 赞同：16
> 
> 时间：2012-11-02T09:52:22.557
> 
> 标签：unix, diff

当我比较 c 源文件时，我想忽略换行符。例如，我想报告以下两个代码它们是相同的。

```
// codeA
int main(int argc, char *argv[]) 
{

// codeB
int main(int argc, char *argv[]) { 
```

我已经尝试了以下选项，但无法得到结果。

```
diff -b codeA codeB
diff -w codeA codeB 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T11:39:18.020

有一个名为“word diff”的工具（工具命令行必须是“wdiff”）可能会有所帮助。[http://www.gnu.org/software/wdiff/manual/wdiff.html](http://www.gnu.org/software/wdiff/manual/wdiff.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T09:56:53.743

您可以使用例如 GNU Indent、[http:](http://www.gnu.org/software/indent/) //www.gnu.org/software/indent/ 漂亮地打印这两个文件，然后将它们与 diff 进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-08T15:33:11.150

如果您想要一个全有或全无的答案，您可以首先删除换行符的文件：

```
cat file.txt | tr -d '\n' > stripped.txt 
```

当然，这对于发现实际差异非常无助。

# php - 如何在 PHP 中提取“日期字符串”的“格式字符串”

> ID：13192897
> 
> 赞同：1
> 
> 时间：2012-11-02T09:53:06.467
> 
> 标签：php, datetime, format

日期时间从外部资源中读取并存储在 $dt 中，它可以是任何*有效*的 PHP 日期时间格式（有效意味着日期时间已经由包含[php.net 手册](http://www.php.net/manual/en/function.date.php)中描述的字母的字符串格式化）。

我需要做的是获取日期时间字符串的格式，因此在根据系统需要操作日期之后，我可以将其重新格式化为相同的字符串并将其存储在数据库中。简单地说：与 DateTime::format 方法相反

是否有任何特定方法可以提取格式化日期时间的“格式字符串”？或可用的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:11:35.960

这是不可能的，因为格式化的日期不能包含足够的信息。您将不得不编写一组正则表达式来匹配您真正用作输入的格式 - 一个接一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:19:52.630

您可以将它们全部带到一个 unix 时间戳，然后使用 date 来获得一个标准化的形式。或者您可以首先标准化您的输入（这通常是更容易的选择 - 因为错误捕获将是一件麻烦事！）

```
\\$dt your datetime input
$timestring = strtotime($dt);
$datetime = date("H:i:s j M Y", $timestring); 
```

当然，`strtotime`如果你的输入很奇怪，你可能会得到一些有趣的输出。

# c# - C 程序的 C# GUI

> ID：13192900
> 
> 赞同：2
> 
> 时间：2012-11-02T09:53:18.803
> 
> 标签：c#, c, user-interface

我正在编写一个在 C/C++ 中操作文件的程序，并且我想用 C# 制作的漂亮 GUI 来包装它。有没有办法将 C# gui 与 C 程序混合在一起？如果有多个，最好的方法是什么？（我坚持要在两者之间使用命名管道进行通信，但这似乎有点混乱）。是否可以使用 Unity 之类的东西创建 GUI，或者我应该使用 XNA 之类的库来创建它？（GUI 必须是“花哨的”，例如 Steam 或 Xbox 仪表板）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:09:31.240

看看互操作，它将为您提供我认为您需要知道的内容。尽管您需要一个好的 API 才能使互操作真正有效地工作。

'互操作性使您能够保留和利用对非托管代码的现有投资。在公共语言运行时 (CLR) 控制下运行的代码称为托管代码，而在 CLR 之外运行的代码称为非托管代码。COM、COM+、C++ 组件、ActiveX 组件和 Microsoft Win32 API 是非托管代码的示例。

[http://msdn.microsoft.com/en-us/library/ms173184.aspx](http://msdn.microsoft.com/en-us/library/ms173184.aspx)

# iphone - 如何在 UITabbar 控制器上创建 UIPickerView？

> ID：13192904
> 
> 赞同：2
> 
> 时间：2012-11-02T09:53:30.447
> 
> 标签：iphone

在我的应用程序中，我有一个`UITabBarController`。`UIViewController`我想要一个`UIPickerView`。我在 . `xib`通过将其添加到单独的视图中并将其保持在框架之外直到用户点击按钮来文件本身。当用户点击按钮时，我取消隐藏此视图并设置像键盘一样的动画。但我的问题是，当`UIPickerView`它来临时在`UITabBarController`ie下，标签栏控制器隐藏了一半。`UIPickerView`我想保留我`UIPickerView`的那个。我该`UITabBarController`怎么做。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:17:22.090

添加pickerView后（我认为它在你的`UIViewController`）

```
- (void)viewDidLoad
{
    ...
    [self.view addSubview:self.pickerView];
    [self.view bringSubviewToFront:self.pickerView];
    ...
} 
```

# db2 - VARGRAPHIC 这个名字的由来

> ID：13192911
> 
> 赞同：3
> 
> 时间：2012-11-02T09:54:07.623
> 
> 标签：db2, history, column-types

我刚刚了解了 DB2 数据类型 VARGRAPHIC，我想知道为什么它有这个名称？似乎与图形没有任何关系。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T15:18:15.413

从[信息中心](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0008471.html)：

> *图形字符串*是表示双字节字符数据的字节序列。

该名称可能源自[RFC on ASCII](https://www.rfc-editor.org/rfc/rfc20)，其中非控制或字母数字字符被称为“图形字符”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:48:04.497

在我看来，图形字符不是拉丁字符，例如 [a-zA-Z]，包括 ñéóíúá，以及德语、法语等的字符。

图形字符更多地是其他语言中的字符，例如普通话（中文）、希伯来语、阿拉伯语、日语，甚至盲文中的字符。它们与任何拉丁字符都非常不同，希伯来语和阿拉伯语是从右到左书写的，而普通话是上下颠倒的，因此它们就像西方世界的图形（基于拉丁字符）。

因为字符太多，所以他们用两个字节（16bits）来表示一个字符。有了这种能力，它们可以表示 65535 个不同的字符。(2^16=65535)

一个单字节字符被限制为 256 (2^8)，因此这个小容量有不同的映射。

# netty - 当 allocateMemory,Netty 显示 OutOfMemoryError

> ID：13192920
> 
> 赞同：1
> 
> 时间：2012-11-02T09:54:50.813
> 
> 标签：netty, out-of-memory

我使用Netty3.2.4进行长连接，当服务器启动时，它工作正常，但几天后，服务器可能会显示OutOfMemoryError，详细日志信息是：

```
<Error> <HTTP> <BEA-101017> <[weblogic.servlet.internal.WebAppServletContext@5cd7f9 - appName: 'perbank', name: 'perbank', context-path: '/perbank'] Root cause of ServletException.
java.lang.OutOfMemoryError

    at sun.misc.Unsafe.allocateMemory(Native Method)
    at java.nio.DirectByteBuffer.<init>(DirectByteBuffer.java:99)
    at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:288)
    at org.jboss.netty.channel.socket.nio.SocketSendBufferPool$Preallocation.<init>(SocketSendBufferPool.java:155)
    at org.jboss.netty.channel.socket.nio.SocketSendBufferPool.<init>(SocketSendBufferPool.java:42)
    Truncated. see log file for complete stacktrace
> 
```

可能是 JVM 没有做 GC，也可能是因为网络不稳定，使用了很多 socket 连接，不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:41:17.540

[我将升级到最新的 3.5.9.Final 并查看此修复程序](https://github.com/netty/netty/issues/638)是否解决了问题。

# javascript - Asp.Net Ajax 脚本管理器

> ID：13192927
> 
> 赞同：1
> 
> 时间：2012-11-02T09:55:12.443
> 
> 标签：javascript, asp.net, asp.net-ajax

是否可以在不使用 asp:script 管理器的情况下在 java 脚本中调用方法 Type.registerNamespace() 和 Type.registerClass？

这些函数调用在javascript中的实际用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:10:00.680

如果不使用这样的 asp 脚本管理器，您将无法创建对象：

函数 MyNS.MyClass() { }

但由于不支持点符号的功能，它在没有 asp 脚本的情况下无法工作。这可以通过定义如下命名空间在 javascript 中实现。

var MyNS = MyNS || { };

使用变量是创建名称空间的一种选择。所以这个函数的实际用途是在java脚本中定义一个命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:56:53.600

要使用这些方法，您需要在 MicrosoftAjax javascript 库上添加参考。默认情况下，ScriptManager 控件会为您执行此操作，但您可以从以下链接手动引用此库而无需 ScriptManager：

[ASP.NET Web 窗体和 Ajax 4](http://www.asp.net/ajaxlibrary/CDNAjax4.ashx)或 [http://www.asp.net/ajaxlibrary/CDNAjax35.ashx](http://www.asp.net/ajaxlibrary/CDNAjax35.ashx)

对于 Type 类参考，请点击此链接：[Type Class](http://msdn.microsoft.com/en-us/library/bb397568.aspx)

简而言之，这个库允许您创建从某些现有类继承它们的客户端对象类型。通常此库用于扩展具有客户端功能的 ASP.NET Web 窗体服务器控件。

# javascript - 我可以在 asp.net mvc3 中的 javascript 上使用断点吗？

> ID：13192931
> 
> 赞同：2
> 
> 时间：2012-11-02T09:55:25.070
> 
> 标签：javascript, asp.net-mvc, visual-studio-2010, visual-studio, asp.net-mvc-3

我想在 JavaScript 中使用断点来查看功能。

有没有办法在asp.net mvc3中做到这一点，我使用的是Visual Studio 2010？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:13:58.187

如果添加调试器语句不起作用并且您使用的是 IE，请检查高级设置。您应该取消选择禁用javascript调试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:04:58.693

[FireBug](http://getfirebug.com)提供了多种调试网页中 javascript 部分的方法 - 包括停止点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T09:59:57.103

如果您使用的是 IE，那么您可以在您的 javascript 中添加一个调试器标志，

```
function someJavaScriptMethod(eventSay) {
    debugger;
} 
```

其他浏览器（如 Chrome 和 FireFox）具有开发工具，可让您检查 js 并在其中放置断点。看你喜欢什么。

# asp.net - 带有 VirtualPathProvider 的 ASP.NET MVC4 布局页面

> ID：13192932
> 
> 赞同：1
> 
> 时间：2012-11-02T09:55:31.060
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-4

自从从 ASP.NET MVC3 升级到 MVC4 以来，我遇到了一个问题。该应用程序的大部分控制器和视图嵌入到主项目引用的 dll 中，并且该解决方案依赖于标准 VirtualPathProvider，它检查请求的视图是否存在于 dll 中，如果存在则返回它。

升级到 MVC4 后，布局页面的请求不再通过 VirtualPathProvider，导致整个应用程序崩溃。包括局部视图在内的所有其他视图都得到了正确处理并从程序集中加载。

升级到 MVC4 后有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T04:38:00.270

在没有看到您的错误消息的情况下，我会好好猜测一下。找到项目中的所有 web.config 文件，并确保引用最新版本的 MVC 4。

# c++ - 参数依赖名称查找和 typedef

> ID：13192947
> 
> 赞同：11
> 
> 时间：2012-11-02T09:56:36.067
> 
> 标签：c++

我没想到这段代码会编译，但确实如此。我的理解是，`func(d)`它在全局命名空间中查找名为“func”的函数，但也在任何传入参数的命名空间中查找（依赖于参数的查找）

但在这种情况下，参数位于全局命名空间中。那么为什么它会在 ns 命名空间中找到“func”呢？是否有特殊规则说如果参数类型是 typedef 则它使用基础类型的命名空间而不是实际参数的命名空间？

这似乎是真的，但我找不到任何支持这一点的东西......这是预期的行为吗？

```
namespace ns
{
    struct data {};
    void func(ns::data item) {}
};

// Create an alias "datatype" in the global namespace for ns::data
typedef ns::data datatype;

int main()
{
    datatype d;
    func(d);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T10:01:46.127

该参数`d`是本地的`main`。`datatype`只是类型的别名，`ns::data`所以`d`有 type `ns::data`。

`ns::data`是命名空间的 [direct] 成员，因此`ns`命名空间中的此函数`ns`将被考虑用于 ADL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T01:44:11.523

其他答案已经提供了原因，如果不是理由的话：

> A`typedef`是类型的别名，编译器会将其解析为实际类型。依赖于参数的查找是基于基础类型完成的，而不是 typedef。

这个设计决策的基本原理实际上是 ADL 在语言中的原因。ADL 被添加到语言中以支持运算符重载。在任何其他用例中，用户*可以*显式声明函数的命名空间，但在运算符重载的情况下，这将导致反直觉的复杂代码：

```
std::string s("Hi");
std::cout.operator<<(s); // or is it std::operator<<(std::cout,s)?? 
```

So the language added rules for lookup to find operators (and functions) in different namespaces, and in particular in the namespace of the arguments to the function. In this case inside `std::` in case the `operator<<` that takes a `std::string` is not a member of `std::cout`. The same behavior is extended to all free functions in the same namespace (why not?) allowing the interface of a type to include not only member functions but also free functions in the same namespace.

Now if you focus on this, the purpose is accessing functions that are part of the interface of the type, and those are defined *with* the type. When you add a typedef in a different namespace you are just creating a shorthand to refer to the original type. All of the functions that were provided with the type (for example `operator<<(std::ostream&,MyType)`) are in the original namespace, no in the namespace of the `typedef`. You *want* ADL to look into the namespace where the real type was defined, not where the alias was created.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T10:34:46.833

此行为由标准指定（我的重点）：

> ### 3.4.2 依赖于参数的名称查找 [basic.lookup.argdep]
> 
> 2 - 对于函数调用中的每个参数类型`T`，有一组零个或多个关联的命名空间和一组零个或多个关联的类需要考虑。命名空间和类的集合完全由函数参数的类型（以及任何模板模板参数的命名空间）决定。**用于指定类型的Typedef 名称和*using-declarations*不构成此集合。**

这有点不幸。这意味着例如代码（改编自[ADL，带有来自另一个命名空间的 typedef](https://stackoverflow.com/questions/4155450/adl-with-typedefs-from-another-namespace)）：

```
std::vector<int> v;
count(v.begin(), v.end(), 0); 
```

将取决于它的有效性和含义是否`std::vector<T>::iterator`是 typedef`T *`或某个类型 in `namespace std`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-02T10:15:07.190

需要注意的主要一点是 a`typedef`没有引入新类型，而是另一种类型的同义词。`d`类型也是如此`ns::data`。

现在 ADL 应用并且函数`func`将在命名空间中找到`ns`。

另外：为了防止 ADL，您可以编写`(func)(d)`.

# javascript - Jquery 响应 find() 失败？

> ID：13192949
> 
> 赞同：0
> 
> 时间：2012-11-02T09:56:39.813
> 
> 标签：javascript, jquery, find

我发现这段代码可以让我遍历一些 xml 元素：

```
$(somexml).find('company[id="'+id+'"] customers customer').each(function()
{
     var $tmp = $(this);
     alert($tmp.attr('customerid'));
}); 
```

似乎工作得很好。但由于我是 Javascript/Jquery 的新手，我有一些问题：

1.  当 find() 失败...没有匹配项时，我该如何响应？

2.  为什么 '$' 在 tmp 之前？为什么不只是**var tmp = $(this);**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:11:09.537

1：`each`返回它被调用的对象，即`$(x).each`返回`$(x)`。因此，将每个结果分配给一个变量并检查其长度：

```
var obj = $(somexml).find(whatever).each(function() {
    ...
});
if(!obj.length)
     nothing has been found... 
```

2：`$tmp`而不仅仅是`tmp`一个[“匈牙利”](http://en.wikipedia.org/wiki/Hungarian_notation)约定来表示 jQuery 对象。您不需要使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:58:50.053

当 find() 失败...没有匹配项时，我该如何响应？

> 将结果分配给某个变量

```
result = $(somexml).find('company[id="'+id+'"] customers customer');

if(result.length > 0)
{
   result.each(function()
   {
       var $tmp = $(this);
       alert($tmp.attr('customerid'));
   });    
}    
else
{
   alert("No results");
} 
```

> 为什么 '$' 在 tmp 之前？为什么不只是 var tmp = $(this);

```
You do not need to use $ before tmp. using $ 

var tmp = $(this); 
```

# javascript - Javascript停止图像加载

> ID：13192951
> 
> 赞同：6
> 
> 时间：2012-11-02T09:56:51.317
> 
> 标签：javascript, jquery, html, image

我正在制作一个网站，其中一个页面正在使用来自外部网站的 javascript 文件

该外部 js 包含（实际上加载）我的页面上不需要的图像。

如何停止加载该图像（假设 img url 是“http://image.com/img.png”）？是否有任何javascript代码可以做到这一点？

感谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T10:37:45.463

加载 DOM 后，停止下载任何资源（`window.stop()`对于现代浏览器，`document.execCommand("Stop", false)`对于 IE）。然后找到您需要的资源并要求浏览器下载它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T10:02:29.887

您可以选择带有 URL 的图像并将其从 DOM 中删除

```
$(document).ready(function(){
    $('img[src="http://image.com/img.png"]').remove();
}); 
```

**更新1：**

由于您可能想要部分匹配，请试试这个：

```
$(document).ready(function(){
   $('img[src*="image.com/img.png"]').remove(); 
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T12:25:48.690

您不能使用 JavaScript 取消单个资源的下载。正如@nkamm 回答的那样，您可以调用该`window.stop()`方法，但随后它会停止下载任何资源（例如按下浏览器中的“停止”按钮）。

如果您尝试停止下载的图像不会在 DOM 中呈现，是否值得取消页面中的所有其他下载？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-06T09:26:05.777

完全控制它的唯一方法是 WebWorkers。

基本上，您创建一个 xhr.worker.js，它只有一个 HTTP 请求来加载图像（通过消息接收 URL）。

在他加载图像后，图像将在浏览器缓存中，因此您只需将 src='' 设置为图像 URL 即可显示它。

**如果你杀死特定的 webworker，图像加载也会被取消！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T10:23:55.630

```
$(window).load(function(){
    $('img[src="http://image.com/img.png"]').remove();
}); 
```

# android - Android ListView 高度超过屏幕高度

> ID：13192952
> 
> 赞同：0
> 
> 时间：2012-11-02T09:56:51.573
> 
> 标签：android

所以我正在使用列表视图（实际上是[PullToRefresh](https://github.com/johannilsson/android-pulltorefresh)）

当我指定我希望视图填充父视图时，它实际上超出了屏幕。我通过看到滚动条消失来注意到这一点，但我仍然可以滚动一下。

这是我在 xml 中的视图：

```
<eu.erikw.PullToRefreshListView
    android:id="@+id/transactionList"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_column="0"
    android:layout_gravity="top"
    gridlayout:layout_columnSpan="2"
    gridlayout:layout_row="1"
    android:background="@android:color/white"
    android:cacheColorHint="@android:color/white"
    android:isScrollContainer="false" /> 
```

作为 hack，我可以使用以下代码在我的 Galaxy Nexus 上修复此问题，此修复程序是特定于设备的，因为在 Galxay SII 上查看时，屏幕底部有一个间隙。我觉得这与像素密度有关。

请注意，下面的 290 值最初是 120，因为这是屏幕顶部视图的组合高度。然后我将其更改为 290 以获得完美契合。不知道额外的 170 是从哪里来的。

```
timelineList = (PullToRefreshListView)getActivity().findViewById(R.id.timelineList);        

    WindowManager wm = (WindowManager)getActivity().getSystemService(Context. WINDOW_SERVICE);
    int height = wm.getDefaultDisplay().getHeight() - 290;
    int width = wm.getDefaultDisplay().getWidth();

    GridLayout.LayoutParams glp = new GridLayout.LayoutParams(); //LayoutParams.FILL_PARENT,height/2);
    glp. height = height;
    glp. width = width;

    timelineList .setLayoutParams(glp); 
```

关于为什么会发生这种情况或如何为所有设备修复它的任何想法？

**更新：完整布局文件**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:gridlayout="http://schemas.android.com/apk/res/com.product.package"
    android:id="@+id/content_frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg_default_2x"
    android:isScrollContainer="false"
    android:orientation="vertical" >

    <include
        android:layout_gravity="top"
        layout="@layout/header_bar" />

    <ProgressBar
        android:id="@+id/prgLoading"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_gravity="center" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <com.gridlayout.GridLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="top"
            android:layout_marginTop="45dip"
            gridlayout:columnCount="2"
            gridlayout:rowCount="2" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="75dp"
                android:layout_column="0"
                gridlayout:layout_columnSpan="2"
                gridlayout:layout_row="0"
                gridlayout:layout_rowSpan="1"
                android:background="@drawable/profile_bg_2x"
                android:contentDescription="@string/bg_image" >
            </ImageView>

            <ImageView
                android:id="@+id/imgAvatar"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:layout_column="0"
                android:layout_marginLeft="25dp"
                android:layout_marginTop="11dip"
                gridlayout:layout_row="0"
                android:background="#FFFFFF"
                android:contentDescription="@string/Product"
                android:src="@drawable/profile_photo_placeholder" />

            <ImageView
                android:id="@+id/imgProductLogo"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:layout_column="1"
                android:layout_gravity="right"
                android:layout_marginRight="10dp"
                android:layout_marginTop="11dip"
                gridlayout:layout_row="0"
                android:contentDescription="@string/Product"
                android:src="@drawable/Productlogo" />

            <ListView
                android:id="@+id/timelineList"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_column="0"
                android:layout_gravity="top"
                gridlayout:layout_columnSpan="2"
                gridlayout:layout_row="1"
                android:background="@android:color/white"
                android:cacheColorHint="@android:color/white"
                android:fastScrollEnabled="false" />

            <TextView
                android:id="@+id/timelineEmptyMessage"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_column="0"
                android:layout_marginLeft="25dp"
                android:layout_marginRight="25dp"
                android:layout_marginTop="50dp"
                gridlayout:layout_columnSpan="2"
                gridlayout:layout_row="1"
                android:gravity="center"
                android:text="@string/timeline_blank_message"
                android:textColor="@color/purple_text"
                android:visibility="invisible" />
        </com.gridlayout.GridLayout>
    </LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:05:38.570

您可以尝试使用其他 PullToRefresh 实现[，例如](https://github.com/chrisbanes/Android-PullToRefresh)，如果您有相同的错误，那么我们需要尝试修复其他问题，向 PullToRefreshListView 的开发人员报告问题并使用其他库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:49:00.697

我通过将列表视图移到 GridLayout 之外解决了这个问题，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:gridlayout="http://schemas.android.com/apk/res/com.product.package"
    android:id="@+id/content_frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg_default_2x"
    android:isScrollContainer="false"
    android:orientation="vertical" >

    <include
        android:layout_gravity="top"
        layout="@layout/header_bar" />

    <ProgressBar
        android:id="@+id/prgLoading"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_gravity="center" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <com.gridlayout.GridLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="top"
            android:layout_marginTop="45dip"
            gridlayout:columnCount="2"
            gridlayout:rowCount="2" >

            <!-- ## OTHER VIEWS HERE -->

        </com.gridlayout.GridLayout>

        <ListView
            android:id="@+id/timelineList"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_column="0"
            android:layout_gravity="top"
            gridlayout:layout_columnSpan="2"
            gridlayout:layout_row="1"
            android:background="@android:color/white"
            android:cacheColorHint="@android:color/white"
            android:fastScrollEnabled="false" />

        </LinearLayout>

</FrameLayout> 
```

# php - 如何从 html 文本中导出 img url

> ID：13192953
> 
> 赞同：0
> 
> 时间：2012-11-02T09:56:51.193
> 
> 标签：php, url

我有以下内容：

```
$input = '<p>This is a sample of a content I am working with <br /> Check out this image <img src="http://mydomain.com/1.png" /> or this one <img src="http://mydomain.com/2.png" />'; 
```

如何在数组中获取这两个 url？

```
['<img src="http://mydomain.com/1.png" />','<img src="http://mydomain.com/2.png" /'>] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:03:24.490

要解析 HTML，建议使用 PHP 的 DOMDOCUMENT，如下所述： [Parse HTML with PHP's HTML DOMDocument](https://stackoverflow.com/questions/2571232/parse-html-with-phps-html-domdocument)

```
$dom = new DOMDocument();
$dom->loadHTML($input);

foreach($dom->getElementsByTagName('img') as $img) {
        echo $img->getAttribute('src') . "<br />\r\n";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:01:44.187

这可能会帮助你： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:03:42.897

我认为这个功能会更适合你的目的： [http ://www.php.net/manual/en/function.preg-replace-callback.php](http://www.php.net/manual/en/function.preg-replace-callback.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T10:08:54.033

简单的！检查[HTMLSQL](https://github.com/hxseven/htmlSQL)

使用 HTMLSQL，您可以过滤所有 html 标签。

# c# - 从套接字读取 json 字符串

> ID：13192955
> 
> 赞同：3
> 
> 时间：2012-11-02T09:56:56.987
> 
> 标签：c#, java, sockets

我有 java 服务器，我正在编写服务器从客户端读取命令，

用 C# 编写的客户端通过套接字以 json 字符串的形式发送命令。命令看起来像这样

```
{
 "command": "blah",
 "key1": "value1",
 "key2": "value3",
 "key3": "value4",
} 
```

json 字符串每次可能有不同数量的 key-val 对，因此没有静态计数来衡量 json 命令中的行数。

这是 C# 客户端如何将 json 字符串发送到 java 服务器

```
 String json = JsonConvert.SerializeObject(map, Formatting.Indented);            
        streamWriter.WriteLine(json);
        streamWriter.Flush(); 
```

我想在用android编写的java代码中读取json。它看起来如下所示，**它正确读取 json 行，但在读取 json 命令的最后一行后会阻塞**我不确定知道该命令已结束的体面方法是什么..

```
 serverSocket = new ServerSocket(4444);   
        clientSocket = serverSocket.accept();
        InputStream inStream = clientSocket.getInputStream();           
        InputStreamReader inStreamReader = new InputStreamReader(inStream);          
        BufferedReader buffReader = new BufferedReader(inStreamReader );    

        String input = "";                        

        while((input = buffReader.readLine())!= null)
        {
            command += input;                     
        }

             //Does not get to this point, blocks above on the readLine after reading full json..

        JSONObject jsObj = new JSONObject(input);
        Object ovj = jsObj.get("command"); 
```

我知道我可以在发送 json 之前发送行数并在 while 循环中读取多次？但这看起来像是一个肮脏的解决方案，请告知正确的方法。

谢谢，艾哈迈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:20:57.730

如果你删除`Formatting.Indented`，每个`buffReader.readLine()`都会返回一个不同的（完整的）json。将反序列化代码移动到 while 循环中。

# c# - 使用 C#/.Net 时，只读对目录有何影响？

> ID：13192956
> 
> 赞同：3
> 
> 时间：2012-11-02T09:56:58.280
> 
> 标签：c#, .net, windows

我发现我可以写入（例如，将文件复制到）只读目录。也就是说，带有`...Attributes = FileAttributes.ReadOnly`.I 的目录甚至可以更改其名称。我发现唯一不能做的就是删除它。这真的是唯一`ReadOnly`能阻止的事情吗？

编辑：

这是代码：（目录为空。）

```
(new DirectoryInfo(path)).Attributes = FileAttributes.ReadOnly;
Directory.Delete(path); 
```

它抛出一个`Access to the path 'c:\... is denied.`异常。

但是改成之后`ReadOnly`就`Normal`可以正常使用了。

那么， a能阻止什么，什么不能阻止*？*`ReadOnly`（当然，以编程方式。*不是*：通过 Windows 资源管理器。）

编辑2：

我收到了链接到文档的答案，说`ReadOnly`在目录上不尊重，这可能`.Net`是删除失败的原因。*所以我将改写这个问题：“使用 C#/.Net 时*，只读对目录有何影响？”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:27:01.523

正如 Damien_The_Unbeliever 所提到的，如果我们查看 FILE_ATTRIBUTE_READONLY 的 Win32 API，它会提到：

> 目录不支持此属性。

另请参阅：http: [//go.microsoft.com/fwlink/p/ ?linkid=125896](http://go.microsoft.com/fwlink/p/?linkid=125896)

因此，您似乎确实可以使用 win32 或资源管理器简单地删除此类目录。然而，.NET 似乎会在删除目录之前检查它们的标志。例如，您可以在 Directory.Delete 上使用 DotPeek 或 Reflector 来查看这一点。这就是导致您的“访问被拒绝”错误的原因。

编辑：

我对此进行了更详细的研究，似乎不是 .NET 引发了拒绝访问错误。考虑以下测试代码：

```
using System;
using System.IO;
using System.Runtime.InteropServices;

namespace ReadOnlyDirTest
{
   class Program
   {
      [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true, BestFitMapping = false)]
      extern static bool RemoveDirectory(string path);

      static String CreateTempDir()
      {
         String tempDir;
         do
         {
            tempDir = Path.Combine(Path.GetTempPath(), Path.GetRandomFileName());
         } while (Directory.Exists(tempDir));

         Directory.CreateDirectory(tempDir);
         return tempDir;
      }

      static void Main(string[] args)
      {
         var tempDir = CreateTempDir();

         // Set readonly.
         new DirectoryInfo(tempDir).Attributes |= FileAttributes.ReadOnly;

         try
         {
            Directory.Delete(tempDir);
         }
         catch (Exception e)
         {
            Console.WriteLine("Directory.Delete: " + e.Message);
         }

         if (!Directory.Exists(tempDir))
            Console.WriteLine("Directory.Delete deleted directory");

         try
         {
            if (!RemoveDirectory(tempDir))
               Console.WriteLine("RemoveDirectory Win32 error: " + Marshal.GetLastWin32Error().ToString());
         }
         catch (Exception e)
         {
            Console.WriteLine("RemoveDirectory: " + e.Message);
         }

         if (!Directory.Exists(tempDir))
            Console.WriteLine("RemoveDirectory deleted directory");

         // Try again without readonly, for both.
         tempDir = CreateTempDir();
         Directory.Delete(tempDir);
         Console.WriteLine("Directory.Delete: removed normal directory");

         tempDir = CreateTempDir();
         if (!RemoveDirectory(tempDir))
            Console.WriteLine("RemoveDirectory: could not remove directory, error is " + Marshal.GetLastWin32Error().ToString());
         else
            Console.WriteLine("RemoveDirectory: removed normal directory");

         Console.ReadLine();
      }
   }
} 
```

在我的机器上运行它（win 7）我得到以下输出：

```
    Directory.Delete：拒绝访问路径“C:\...\Local\Temp\a4udkkax.jcy”。
    删除目录 Win32 错误：5
    Directory.Delete：删除正常目录
    RemoveDirectory：删除正常目录

```

我们看到我们得到错误代码 5，根据[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms681382(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms681382(v=vs.85).aspx)，这是一个拒绝访问错误。

然后我只能假设资源管理器在删除目录之前取消设置只读属性，这当然很容易完成。该命令`rmdir`还删除标记为只读的目录。

由于文档表明 readonly 标志不应该在目录上得到尊重（即使它似乎在 Win 7 中），我不会依赖这种行为。换句话说，我不会依靠 readonly 来阻止任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:37:47.940

文件系统中目录条目的只读属性的用处有限。大多数用户都希望目录中的所有文件也变为只读。但这不是 NTFS 的工作方式，属性仅适用于文件系统对象本身，而不是像安全属性那样“继承”。

请注意资源管理器如何修改属性在其 UI 中的工作方式，当您打开它时，它会执行任何用户期望的操作，它将所有文件设为只读，而不是在目录本身上设置属性。

但是，是的，它*确实*有效，它可以防止修改目录对象本身。因此，如果您在代码中打开它，那么确实会阻止删除目录。就像处理文件一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T11:19:25.637

它没有。剥去足够多的层，你会发现用来改变目录属性的函数是[`SetFileAttributes`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365535%28v=vs.85%29.aspx)：

> 设置文件或目录的属性。

并注意：

> FILE_ATTRIBUTE_READONLY 1 (0x1) 只读文件。应用程序可以读取该文件，但不能写入或删除它。**该属性在目录上不受支持**。有关详细信息，请参阅“在 Windows Server 2003、Windows XP 或 Windows Vista 中，您无法查看或更改文件夹的只读或系统属性。

（我的重点）

# c# - 转换/映射模型

> ID：13192959
> 
> 赞同：0
> 
> 时间：2012-11-02T09:56:59.683
> 
> 标签：c#, .net, oop, design-patterns, automapper

我有一个通用模型，用于使用 ORM 技术存储所有数据。这个模型必须偶尔转换成另一个模型来“做某事”。目前我正在使用这种（简化的）方法，其中通用模型以千克为单位存储重量，而目标模型以磅为单位存储重量：

```
public class GenericModelClassA
{
    public virtual double Weight { get; set; } 
}

public interface IModelX
{
    double Weight { get; set; }
}

public class ModelXClassA : GenericModelClassA, IModelX
{
    private const double WeightConversionFactor = 2.20462;

    public override double Weight
    {
        set
        {
        base.Weight = value / WeightConversionFactor;
        }
        get
        {
        return base.Weight * WeightConversionFactor;
        }
    }
} 
```

这是解决问题的好方法吗？我听说过用于查询/查看/转换/操作 (QVTO) 的模型驱动转换 (MDT) 语言。我的做法是不是太天真了？你会推荐 MDT 语言吗？任何反馈/意见将不胜感激。

非常感谢。

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:04:52.103

从 OO 的角度来看，有一些不是明确模型的概念可能在这种情况下有所帮助。在这种情况下，您用数字表示绝对数量及其计量单位（您不能向其委派任何责任，因为它不是对象）并在模型对象中吸收该转换责任。在我看来，您应该创建一个更丰富的模型来代表这种情况：

*   类 WeightUnit，具有子类 Kilo 和 Pound。
*   类重量，具有绝对数量和重量单位。换句话说，“重量”是一个值加上赋予该值意义的重量单位。
*   您的模型类有一个权重变量。

我对 C# 不熟悉，所以请耐心等待：

```
abstract public class WeightUnit
{
    abstract public function convertValueToKilo(float value);
    abstract public function convertValueToPounds(float value);
}

public class Kilo extends WeightUnit
{
    public function convertValueToKilo(float value) {return value;}
    public function convertValueToPounds(float value) {return value * 2.20462262;}
}

public class Pounds extends WeightUnit
{
    public function convertValueToKilo(float value) {return value / 2.20462262;}
    public function convertValueToPounds(float value) {return value;}
}

public class Weight
{
    protected WeightUnit unit;
    protected float value;

    public function Weight(float value, WeightUnit unit)
    {
      //set the internal state
    }

    public function toKilo()
    {
       return new Weight(this.unit.convertValueToKilo(this.value), new Kilo());
    }

    public function toPounds()
    {
       return new Weight(this.unit.convertValueToPounds(this.value), new Pounds());
    }
} 
```

此实现的问题之一是转换量随着您拥有的重量单位的增加而爆炸式增长。对于这些情况，您通常选择一个“默认”单位（例如公斤），而所有其他单位都知道如何转换为公斤/从公斤转换。在这种情况下，添加一个新单元意味着添加一个类和两个方法。但是，执行这种双重转换可能会产生一些舍入错误。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:34:46.440

我就是这样做的。

**领域**

```
public class Weight
{
   public Weight(decimal miligrams) { InMiligrams= miligrams;}

   public decimal InMiligrams {get;private set;}

   public decimal InGrams { get { return InMiligrams*1000; }}

   /* other conversions as properties */
} 
```

**持久性**

```
 public class StorageModel
 {
     public virtual decimal Weight {get;set;}
 } 
```

**映射**

***域 -> 持久性***

```
storage.Weight = weight.InMiligrams; 
```

***持久性 -> 域***

```
weight = new Weight(storage.Weight); 
```

Persistence 层和 Domain 层知道在内部所有权重都以毫克（或您想要的任何其他度量单位）表示。

# asp.net-mvc - 使用 ASP.Net MVC 从数据库中检索和显示图像

> ID：13192960
> 
> 赞同：3
> 
> 时间：2012-11-02T09:57:07.687
> 
> 标签：asp.net-mvc, image

我想从数据库中检索图像，然后将其发送到查看并显示为缩略图。这是我的代码，但它有一些错误，我无法正确返回图像。我正在使用 ASP.Net MVC 和 aspx 页面。

控制器 ：

```
public ActionResult showImg(int id)
{
   var imageData = from m in db.Products
                   where m.ShopId == 3
                   select Image.FromStream(new MemoryStream(m.Product_img.ToArray()));

   return new FileStreamResult(new System.IO.MemoryStream(imageData), "image/jpeg");
} 
```

看法 ：

```
<img src='<%= Url.Action("showImg", "image", new { id = ViewData["imageID"] } ) %>' /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T10:30:15.227

看起来您不需要`Image`在 linq 语句中重新创建对象，只需返回流并将其传递给您`FileStreamResult`：

```
var image = (from m in db.Products
             where m.ShopId == 3
             select m.Product_img).FirstOrDefault();

var stream = new MemoryStream(image.ToArray());

return new FileStreamResult(stream, "image/jpeg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:22:24.410

非常感谢尼克。您的代码现在是正确的。我是这样写的：

```
 var stream = (from m in db.Products where m.ShopId == 3 select m.Product_img).FirstOrDefault();

            return File(stream, "image/jpeg"); 
```

# php - 如何在“快速编辑”中引入“编辑标签”几个输入和文本区域字段

> ID：13192962
> 
> 赞同：1
> 
> 时间：2012-11-02T09:57:20.290
> 
> 标签：php, api, wordpress

有没有可能我可以从编辑标签页面中引入`"Archive Headline"`和`"Archive Intro Text"`进入。`"Quick Edit" (inline-edit)`

> **我没有尝试创建新的自定义输入或文本区域字段**

我只是在谈论是否有任何机会或方式可以使用编辑页面选项`"Quick Edit"`。我已经阅读了很多教程，`manage_posts_custom_column` `quick_edit_custom_box`但他们并没有告诉我可以做到这一点。

正如我告诉你的，我试图在**快速编辑标签**上添加字段，所以帖子类型是`post_tag`.

![在此处输入图像描述](../Images/8025c2fdfd5458c18f47517da2164eae.png)

**这就是我想要做的。**

![在此处输入图像描述](../Images/96af352776963bbdcea8f908a79ac757.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:40:22.760

是的，你可以这样做。

WP 表的工作方式 - 有一个类 'WP_List_Table' ( `/wp-admin/includes/class-wp-list-table.php`) 用作所有表（帖子、类别、用户、媒体等）的基础，然后为其创建扩展器以制作这些表. 在`class-wp-terms-list-table.php`，在`inline_edit()`函数中，有一个`action`你需要挂钩的。

第 356+ 行读取 -

```
foreach ( $columns as $column_name => $column_display_name ) {
    if ( isset( $core_columns[$column_name] ) )
        continue;

    do_action( 'quick_edit_custom_box', $column_name, 'edit-tags', $tax->name );
} 
```

这样做的好处是，如果您愿意，您可以为您的自定义内容创建看起来像 WP 标准表格的表格。这对于插件开发人员或网站管理员特别有用，因为用户不是那么先进并且只使用一种表格格式感到“舒适”。

要将框添加到快速编辑中，您需要如下所示。顶部的三个变量需要更改为您自己的设置，您应该在将字段添加到“编辑”分类屏幕时定义这些设置 -

```
/**
 * Adds columns to quick edit
 *
 * @param $column_name string The name of the column that is currently being actioned
 * @param $screen string The screen that is currently being viewed
 * @param $tax string The name of the Taxonomy whose Terms are being listed
 * @return string Current value of the sort_order setting
 */
function my_custom_box( $column_name, $screen, $name ) {

    $my_fields = array(
        array(
            'column_name' => 'archive_headline',
            'field_title' => 'Archive Headline',
            'field_name' => 'archive_headline',
        ),
        array(
            'column_name' => 'archive_intro_text',
            'field_title' => 'Archive Intro Text',
            'field_name' => 'archive_intro_text',
        )
    );

    foreach ($my_fields as $field) :

        if ( $column_name === $field['column_name'] && $screen === 'edit-tags' ) :

            print( '<fieldset><div class="inline-edit-col">' );
            print( '<label>' );
            printf( '<span class="title">%1$s</span>', _e( $field['field_title'] ) );
            printf( '<span class="input-text-wrap"><input type="text" name="%1$s" class="ptitle" value=""></span>', $field['field_name'] );
            print( '</label>' );
            print( '</div></fieldset>' );

        endif;

    endforeach;

}
add_action( 'quick_edit_custom_box', 'my_custom_box', 10, 3 ); 
```

**编辑**

您已经提到您希望这些值位于表的“快速编辑”部分中，而不是表本身。这是可能的，但您必须隐藏数据。由于快速编辑部分是通过 AJAX 使用表格中的数据填充的，因此它必须存在。

您可以使用下面的代码添加列（您应该只需要修改实际获取数据的位，因为我不知道它来自哪里）。

```
/**
 * Add custom data to tables with a low priority, so that post types and taxonomies have already been added
 */
add_action('init', 'add_custom_columns', 110, 0);
function add_custom_columns(){

    $taxonomy = 'post_tag';

    /** Add the column */
    add_filter("manage_edit-{$taxonomy}_columns", 'show_custom_tag_columns', 5);

    /** Populate the column */
    add_action("manage_{$taxonomy}_custom_column", 'fill_custom_tag_columns_by_return', 5, 3);

}

/**
 * Shows custom columns and removes built-in ones based on the page being shown
 *
 * @param required array $columns The current columns for the table
 * @return array $columns The updated columns array
 */
function show_custom_tag_columns($columns){

    if($pagenow === 'edit-tags.php' && !isset($_GET['post_type'])) :

        $columns['archive_headline'] = __('Archive Headline');
        $columns['archive_intro_text'] = __('Archive Intro Text');

    endif;

}

/**
 * Adds the IDs to the ID column where data must be returned
 *
 * @param required array $value Not sure what this is...
 * @param required array $column_name The name of the current column
 * @param required array $object_id The object ID
 * @return array $defaults Updated list of table columns
 */
function fill_custom_tag_columns_by_return($column_values, $column_name, $object_id){

    global $wpdb;

    echo $column_values; // Output any pre-existing column values so they don't get over written

    if($column_name === 'archive_headline') :
        // Do what ever you do to get the data for this column
        return $archive_headline;
    endif;
    if($column_name === 'archive_intro_text') :
        // Do what ever you do to get the data for this column
        return $archive_intro_text;
    endif;

} 
```

并隐藏列，添加以下 CSS -

```
table.widefat th.column-archive_headline,
table.widefat th.column-archive_intro_text{
    display: none;
} 
```

# c# - 如果在我的 WPF 项目中找不到 xml 文件，如何编写创建新的 xml？

> ID：13192963
> 
> 赞同：2
> 
> 时间：2012-11-02T09:57:21.023
> 
> 标签：c#, wpf, xml, linq-to-xml

我目前正在使用 WPF 应用程序。现在，我想将我的数据保存到 XML 文件中。如果项目中没有找到xml文件，则新建一个。有人可以教我怎么做吗？

我认为代码将是这样的

```
public MainWindow()
    {
        InitializeComponent();
        loadXML();
     }

public void loadXML()
{
    xDocument doc = xDocument.load("MyXmlFile.xml");

    if(doc.exist== false)
    {
     //create new xml
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T10:01:40.387

在这种情况下，最简单的做法是使用[File.Exists](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)检查文件是否确实存在于磁盘上。如果没有，那么我们可以保存它，否则我们加载它：

```
public void loadXML()
{
    XDocument document = new XDocument();

    if(!File.Exists("MyXmlFile.xml")){
        //Populate with data here if necessary, then save to make sure it exists
        document.Save("MyXmlFile.xml");
    }
    else{
        //We know it exists so we can load it
        document.load("MyXmlFile.xml");
    }

    //Continue to work with document

} 
```

# java - Java - 对象属性没有区别

> ID：13192965
> 
> 赞同：3
> 
> 时间：2012-11-02T09:57:34.580
> 
> 标签：java

```
ClassName ref = new ClassName();
ref.setCredentials(Credentials);
ref.setVal(value);
ref.setUser(user); 
```

现在，当我创建同一个类引用的新对象时，我仍然会得到我之前设置的值。为什么会这样？

```
ClassName ref2 = new ClassName();
ref2.setVal(value);
ref2.setUser(user);
ref2.setSomethingNew(somethingNew); 
```

My`ref`和`ref2`实例具有所有值 [ `Credentials, Value, User and SomethingNew`]。我想区分这两种情况。是因为它拿着同一个物体吗？

**更新我的失误：**

它实际上是`ref2`而不是`ref`。我得到了`ref2`我没有设置`ref`的值，并且也保存了我在`ref2`. 两者都在相同的上下文中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:59:25.917

请注意，`ref2`您只是在创建对象，但您将值设置为`ref`. 你需要：

```
ClassName ref2 = new ClassName();
ref2.setVal(value);
ref2.setUser(user);
ref2.setSomethingNew(somethingNew); 
```

请注意`ref2`更改而不是`ref`.

如果您`ClassName`正在覆盖该`equals`方法，并且所有内部对象也相等，则在 and 之间具有相等性是正常`ref`的`ref2`。您可以使用`Object.equals`实现来检测对象是否不同（注意`different`与`equal`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T09:59:18.500

如果您`ref`在创建后仍然设置，`ref2`这就是您应该期待的。做这个：

```
ref2.setVal(value); 
```

**注意：**不要这样做：

```
ref.setCredentials(Credentials); 
```

它将*课程* `Credentials`设置为`ref`.

# windows-phone-8 - 应用程序的独立存储在 Windows Phone 8 上可以有多大？

> ID：13192968
> 
> 赞同：2
> 
> 时间：2012-11-02T09:58:17.223
> 
> 标签：windows-phone-8

在应用程序的独立存储中最多可以存储多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T10:32:03.550

隔离存储对 WP8 没有限制。

但是，如果在写入新数据时空间不足，当然会出现异常，因此您必须正确处理。

请参阅该页面的底部：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769544%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769544%28v=vs.105%29.aspx)

> Windows Phone 应用程序对磁盘存储配额没有限制。配额 API 反映了这一点，而 GetUserStoreForSite 不可用。

# jdeveloper - 将供应配置文件添加到 JDeveloper - 移动应用程序

> ID：13192973
> 
> 赞同：0
> 
> 时间：2012-11-02T09:58:36.750
> 
> 标签：jdeveloper, oracle-adf

我正在尝试开发一个 Hello World 应用程序并在我的 iphone 上运行它。我已经成功创建了项目等，但最终出现以下错误。如何将配置文件添加到 JDeveloper？

```
Cannot deploy iOS application to an archive or iTunes because the signature or provisioning profile is missing. 
```

编辑

我还访问了 JDeveloper --> 工具 --> ADF 移动设备 --> 平台 -->（选择 ios） --> 浏览到我安装了配置文件的位置。

这里还有一个文本字段，上面写着；`Certificate`. 我应该在这里添加什么？

*   MAC 操作系统 10.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:48:08.460

关于 ADF Mobile for iOS 的有趣视频：http: [//download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/adfmobiledeployios.html](http://download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/adfmobiledeployios.html)

您应该在那里找到所有已部署的信息。

# php - php-oci8 编码问题

> ID：13192974
> 
> 赞同：3
> 
> 时间：2012-11-02T09:58:44.967
> 
> 标签：php, oracle, character-encoding, apache2, oci8

有人问过类似的问题，但常规的解决方案对我不起作用。可能我错过了一些东西。我快要失去理智了:(((

从标题可以理解，我有一个非ascii内容的**oracle数据库。**我想使用**oci8用****php**查询/显示它。

 **首先，数据库在ISO8859P9，即查询

```
select parameter, value from v$nls_parameters where parameter in ('NLS_CHARACTERSET', 'NLS_LANGUAGE', 'NLS_TERRITORY') 
```

返回

```
NLS_LANGUAGE        AMERICAN
NLS_TERRITORY       AMERICA
NLS_CHARACTERSER    WE8ISO8859P9 
```

所以我相应地设置了NLS_LANG 变量，即getenv("NLS_LANG") 返回"AMERICAN_AMERICA.WE8ISO8859P9"。

我插入`AddDefaultCharset ISO-8859-9`到 /etc/apache2/conf.d/charset 文件中，并且总是包含`<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-9">`在 php 文件的 html 内容的 head 部分中。因此，当我通过 firebug 检查时，我看到响应的“Content-Type”标头是“text/html; charset=ISO-8859-9”。

最后，我在 /etc/php5/apache2/php.ini 文件中有一行，`default_charset = "ISO-8859-9"`在输出 phpinfo() 的核心部分，我看到 default_charset 是 ISO-8859-9。

毕竟这些东西，当我检索一个带有字符的字符串`İ`并回显它时，它显示为'？'。那就是问题所在！！！当我查询时`select dump(nameofthatstring, 16)...`，我看到它的字节值是 DD，即根据 8859-9 是正确的。

我不确定它是否相关，但我会给出最后的细节：当我`ı`在表单中输入一个字符并在GET中通过ajax提交时，它被转换为％FD，即8859-9对应的值，没有问题.

当我对它进行 urldecode 并回显它时，它又可以了，我明白了`ı`。但是当我有一个包含`ı`在其 where 子句中的字符串的查询时（在接收到 ajax 请求之后），它返回空集。

但是，如果我使用 CHR(253) 选择行，则会正确选择行，但再次打印这些行会导致“？” 人物。

我真的被困住了。任何帮助将不胜感激。提前致谢。

**编辑：**

```
$database = "(DESCRIPTION= (ADDRESS= (PROTOCOL=TCP)(HOST=XXXX)(PORT=1521)) (CONNECT_DATA= (SERVER=dedicated)(SERVICE_NAME=sname)))"; 
```

首先，我试过这个：

```
oci_pconnect($username, $password, $database, "AMERICAN_AMERICA.WE8ISO8859P9"); 
```

但是没有解决，所以我设置了 NLS_LANG 变量，改成如下：

```
oci_pconnect($username, $password, $database); 
```

没有改变...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:04:25.667

尝试像这样连接：

```
putenv("NLS_LANG=AMERICAN_AMERICA.WE8ISO8859P9");
$db = "(DESCRIPTION=
     (ADDRESS_LIST=
       (ADDRESS=(PROTOCOL=TCP)
         (HOST=$dbhost)(PORT=$dbport)
       )
     )
       (CONNECT_DATA=(SID=$dbname))
 )";
 $conn = OCILogon($dbuser, $dbpasswd, $db); 
```

`$db*`根据您的配置设置变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T11:04:01.917

我假设你在windows环境中。

我有同样的问题，我通过
* 创建一个 Windows 环境变量
NLS_LANG FRENCH_FRANCE.WE8ISO8859P1
* 将这些行添加到我的 httpd.conf
SetEnv NLS_LANG FRENCH_FRANCE.WE8ISO8859P1来修复它

注意：用适当的值替换 FRENCH_FRANCE.WE8ISO8859P1**

# vba - 在多个列上执行“文本到列” - 需要循环

> ID：13192981
> 
> 赞同：1
> 
> 时间：2012-11-02T09:59:03.033
> 
> 标签：vba, excel, excel-2010

我有一些代码用于对列执行文本，它对我来说在一列上运行良好。

不幸的是，我有多达 60 列需要拆分为列（在表 3 中）。我想将工作表 3 中的 a 列复制到工作表 4 中的 a 列，并对其上的列执行文本。然后我想将工作表 3 中的 B 列复制到工作表 4 中的下一个可用行（在分隔文本之后），然后重复该过程。

当我在下面启动我的宏时，它似乎正在循环通过表 3，但在运行它之后，表 4 中没有任何内容。

```
Sub LoopColumns()

Dim i As Integer, j As Integer

For i = 1 To 60
'Check to see if column is blank
If WorksheetFunction.CountBlank(ActiveSheet.Columns(i)) <> 1048576 Then
Columns(i).Select
Selection.Copy
Sheets("Sheet4").Select

For j = 1 To 10000
If WorksheetFunction.CountBlank(ActiveSheet.Columns(j)) <> 1048576 Then
Columns(j).Select
ActiveSheet.Paste
Columns(j).Select
Application.CutCopyMode = False
Selection.TextToColumns Destination:=Range("A1"), DataType:=xlDelimited, _
TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, _
Semicolon:=False, Comma:=False, Space:=True, Other:=False, FieldInfo _
:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
Array(7, 1), Array(8, 1)), TrailingMinusNumbers:=True
End If
Next j

End If
Sheets("Sheet3").Select
Next i

End Sub 
```

我觉得我的逻辑没问题。你能看到我到底哪里错了吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:54:41.067

像这样更简单的东西应该可以做到：

```
Sub LoopColumns()

Dim i As Integer, x As Integer

For i = 1 To 60

    If Excel.WorksheetFunction.CountBlank(Excel.Sheets("Sheet3").Columns(i)) <> 1048576 Then

        Excel.Sheets("Sheet3").Columns(i).Copy

        x = Excel.Sheets("Sheet4").Cells(1, Columns.Count).End(Excel.xlToLeft)(1, 2).Column

        If x = 2 Then
        x = 1
        Else: x = x
        End If

        Excel.Sheets("Sheet4").Select
        Excel.Sheets("Sheet4").Columns(x).EntireColumn.Select
        Excel.ActiveSheet.Paste

        Excel.Application.CutCopyMode = False
        Selection.TextToColumns Destination:=Cells(1, x), DataType:=xlDelimited, _
                TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, _
                Semicolon:=False, Comma:=False, Space:=True, Other:=False, FieldInfo _
                :=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
                Array(7, 1), Array(8, 1)), TrailingMinusNumbers:=True

    End If

Next i

Excel.Sheets("Sheet3").Select

End Sub 
```

**编辑**删除上面稍微奇怪的`IF`声明

```
Sub LoopColumns()

Dim i As Integer, x As Integer

For i = 1 To 60

    If Excel.WorksheetFunction.CountBlank(Excel.Sheets("Sheet3").Columns(i)) <> 1048576 Then

        Excel.Sheets("Sheet3").Columns(i).Copy

        x = Excel.Sheets("Sheet4").Cells(1, Columns.Count).End(Excel.xlToLeft).Column

        Excel.Sheets("Sheet4").Select

        If Cells(1, x) <> "" Then x = x + 1

            Excel.Sheets("Sheet4").Columns(x).EntireColumn.Select
            Excel.ActiveSheet.Paste

            Excel.Application.CutCopyMode = False
            Selection.TextToColumns Destination:=Cells(1, x), DataType:=xlDelimited, _
                    TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=True, Tab:=False, _
                    Semicolon:=False, Comma:=False, Space:=True, Other:=False, FieldInfo _
                    :=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
                    Array(7, 1), Array(8, 1)), TrailingMinusNumbers:=True

    End If

Next i

Excel.Sheets("Sheet3").Select

End Sub 
```

# r - 显示大于或等于号

> ID：13192984
> 
> 赞同：43
> 
> 时间：2012-11-02T09:59:12.093
> 
> 标签：r, ggplot2, plotmath

我有一个这样生成的图：

```
ggplot(dt.2, aes(x=AgeGroup, y=Prevalence)) + 
    geom_errorbar(aes(ymin=lower, ymax=upper), colour="black", width=.2) +
    geom_point(size=2, colour="Red") 
```

我像这样控制 x 轴标签：

```
scale_x_discrete(labels=c("0-29","30-49","50-64","65-79",">80","All")) + 
```

这可行，但我需要将“>80”标签更改为“≥80”。

但是“≥80”显示为“=80”。

如何显示大于或等于号？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-02T13:53:15.643

使用表达式的替代方法是 Unicode 字符，在这种情况下是 Unicode 字符 'GREATER-THAN OR EQUAL TO' (U+2265)。复制@mnel 的示例

```
.d <- data.frame(a = letters[1:6], y = 1:6)

ggplot(.d, aes(x=a,y=y)) + geom_point() + 
    scale_x_discrete(labels = c(letters[1:5], "\u2265 80")) 
```

如果您难以记住复杂的表达式语法，或者如果您需要换行符，那么 Unicode 是一个不错的选择，而这些表达式不允许。不利的一面是，特定的 Unicode 字符是否有效取决于您选择的图形设备和字体。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-02T11:19:23.077

您可以传递一个表达式（包括在参数中`phantom(...)`伪造一个前导`>=``label``scale_x_discrete(...)`

例如

```
 .d <- data.frame(a = letters[1:6], y = 1:6)

 ggplot(.d, aes(x=a,y=y)) + geom_point() + 
    scale_x_discrete(labels = c(letters[1:5], expression(phantom(x) >=80)) 
```

![在此处输入图像描述](../Images/72303e7f78abfdb7b994a8026c95546e.png)

有关`?plotmath`创建数学表达式和 [此](https://stackoverflow.com/questions/5293715/how-to-use-greek-symbols-in-ggplot2) 相关 SO 问题和答案的更多详细信息，请参阅

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-30T09:18:49.100

```
plot(5, ylab=expression("T ">="5")) 
```

[![在此处输入图像描述](../Images/8969df50274990e71808bb14595d44ee.png)](https://i.stack.imgur.com/QUphl.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-21T14:43:44.583

您可以使用

```
expression("">=80) 
```

所以你的全轴标签看起来像：

```
scale_x_discrete(labels=c("0-29","30-49","50-64","65-79",expression("">=80),"All")) + 
```

使用 unicode 导出绘图时遇到问题，但表达式函数更一致。

# c# - 如何写入和锁定文件

> ID：13192990
> 
> 赞同：0
> 
> 时间：2012-11-02T09:59:30.207
> 
> 标签：c#, filesystems, locking

我知道使用 c# API 创建文件。我的要求有点不同，就像我想创建一个文件，该文件将被我们的系统锁定，这样另一个第 3 部分应用程序可以读取该文件，但最重要的是第 3 部分应用程序在此期间何时读取文件没有身体不能移动，复制和删除这个文件。寻找建议如何用 c# 来做。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:05:55.163

只需使用以下命令打开文件`FileShare.Read`：

```
using (var f = File.Open(filename,
                    FileMode.Open, FileAccess.Write, FileShare.Read) 
```

这正是您想要的：现在没有其他人可以写入、重命名或删除文件。但是，他们仍然可以复制它，因为如果您可以读取字节，则无法阻止有人将它们写入其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:07:32.217

你可以做服务。服务将为每个请求返回基本文件的新副本。第三部分应用程序将在请求时获得实际文件。

# python - Foreman start 找不到 Procfile，将 Django 应用程序部署到 Heroku

> ID：13192994
> 
> 赞同：5
> 
> 时间：2012-11-02T09:59:47.277
> 
> 标签：python, django, heroku, gunicorn

似乎是一个相当简单的问题，但似乎无法弄清楚。我一直在遵循 Heroku 的 Django 说明（https://devcenter.heroku.com/articles/django#using-a-different-wsgi-server）

我正在尝试创建一个 Procfile，使用 Foreman start 在本地运行它。我已经下载并安装了 Gunicorn 和 Gevent，在我的根目录中手动添加了一个名为 Procfile 的 .txt 文件（让我知道是否有更好的方法来执行此操作，然后添加新的文本文件并将其命名为 Procfile），但工头开始不断返回

```
 (venv)c:\users\chris\hellodjango>foreman start    
 ERROR: Procfile does not exist. 
```

这是我的目录：

```
hellodjango/
.gitignore
manage.py
requirements.txt
Procfile.txt
hellodjango/
    __init__.py
    __init__.pyc
    settings.py
    settings.pyc
    urls.py
    urls.pyc
    wsgi.py
    wsgi.pyc
venv/
    Include/
    Lib/
    Scripts/ 
```

我的 requirements.txt 内容是

```
Django==1.4.2
distribute==0.6.28
dj-database-url==0.2.1
psycopg2==2.4.5
wsgiref==0.1.2
gunicorn==0.15.0 
```

我的 Procfile.txt 内容是

```
web: gunicorn hellodjango.wsgi -b 0.0.0.0:$PORT 
```

我错过了什么，为什么我的应用找不到 ProcFile？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T10:10:25.083

Procfile 不应具有“.txt”扩展名。您已将其称为“Procfile.txt”。应该只是“Procfile”。