# StackOverflow 问答 15692000-15692999

# django - 何时在渲染上使用 render_to_response 的示例

> ID：15692001
> 
> 赞同：0
> 
> 时间：2013-03-28T20:57:23.807
> 
> 标签：django

从文档中：

**使成为**

> 将给定的模板与给定的上下文字典相结合，并返回一个带有渲染文本的 HttpResponse 对象。
> 
> render() 与使用强制使用 RequestContext 的 context_instance 参数调用 render_to_response() 相同。

**render_to_response**

> 使用给定的上下文字典渲染给定的模板，并返回带有该渲染文本的 HttpResponse 对象。

您能否提供一个面向任务的示例以及何时选择在视图中使用`render_to_response`与在视图中使用的描述`render`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T21:43:13.723

唯一的区别是，使用 render_to_response 你可以传入不同的上下文字典来查看（模板）。默认情况下，RequestContext 将通过设置文件 TEMPLATE_CONTEXT_PROCESSORS 中定义的 Django 中间件函数建立一个“上下文”。

# java - 如何在多线程应用程序中使用 Java JMS 会话？

> ID：15692003
> 
> 赞同：0
> 
> 时间：2013-03-28T20:57:29.597
> 
> 标签：java, jms

我正在开发独立的多线程应用程序，其中使用纯 JMS API 使用 P2P 机制同步发送和接收消息。当多个线程正在运行时，使用消费者对象（每个线程一个消费者对象）接收数据时抛出异常，说 IllegalStateException: Session is closed。我尝试了以下两种方式。

1）在单例类中创建连接和会话对象，并在发送和接收消息时使用这些对象。同步发送和接收消息的代码。

2）创建了 SessionPool 类（单例），它创建了 5 个会话。由于我的应用程序仅限于线程池计数 20，并且每个线程从会话池中检索会话并在收到消息后返回会话。这适用于 5 个线程，后来抛出异常说会话已关闭。

请帮助我了解如何有效地使用会话对象，而无需为每个线程创建一个会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:26:59.733

您可能需要重新考虑您的架构。

JMS 是一种在 JMS 提供者和 JMS 消费者之间进行通信的方式。这更像是一种客户端-服务器架构。我不建议将其用于 p2p。

# android - 带有 MODE_WORLD_WRITEABLE 的 Android getDir() 不起作用

> ID：15692005
> 
> 赞同：0
> 
> 时间：2013-03-28T20:57:31.730
> 
> 标签：android, internal, file-access

我希望能够编辑存储在应用程序内部存储器中的文件，该文件可通过[Context.getDir()](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29)使用任何可用的外部文本编辑器通过`Intent.ACTION_VIEW`以类型`"text/plain"`和文件 URI 作为参数启动。虽然外部编辑器可以很好地处理 sdcard 上的文件，但他们无法访问[Context.getDir()](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29)下的文件。

我正在调用`getDir()`，`Context.getDir("data", Context.MODE_WORLD_WRITEABLE)`但在通过意图将 URI 传递给外部编辑器时仍然出现访问被拒绝错误。

根据传递给的文档[`MODE_WORLD_WRITEABLE`](http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_WRITEABLE)，`getDir()`应该足以让其他应用程序访问和修改文件，但情况似乎并非如此。还是我错过了什么？

所以问题是如何让其他应用程序修改特定文件`/data/data/app.package/`而不在sdcard上创建文件副本或诉诸root超级权力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:25:07.797

您可以创建自己的 API 来实现这一点。

例如，您创建自己的库并将访问您的内部文件，而其他应用程序将访问该库。您甚至可以使用广播接收器或其他您认为合适的方式来实现此目的。

或者，您也可以为此设计一个内容提供者。

另一种方法是，如果您使用这些命令创建文件，`Context.getExternalCacheDir()` 或者`Context.getExternalFilesDir(type)`，文件将在 SD 卡上创建，您将能够使用直接路径访问该文件。

# data-mining - Weka Apriori 的输入 arff 文件

> ID：15692012
> 
> 赞同：1
> 
> 时间：2013-03-28T20:57:54.353
> 
> 标签：data-mining, weka

我正在尝试对版本历史进行关联挖掘。我在 mysql 中有我的交易数据。Weka apriori 算法需要一定格式的 arff 或 csv 文件。它必须有每个项目的列。对于事务中的每个项目，值将被指定为 TRUE 或 FALSE。我正在寻找一种使用 Weka InstanceQuery 创建此文件的方法。如果交易数据很大，还有哪些选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:04:10.897

我可以回答第二部分：交易数据巨大时的选项。Weka 是一个很好的软件，但是它们的先验实现速度非常慢。我推荐[http://fimi.ua.ac.be/src/](http://fimi.ua.ac.be/src/)上的实现（我使用了 Ferenc Bodon 列表中的第一个）。

Bodon 的实现使用 Trie 数据结构而不是 Weka 使用的哈希表。正因为如此，我在工作中发现，Weka 需要 3 天时间才能完成 Bodon 的实现可以在不到一个小时内完成的事情（是的，差别如此之大！！）。

此外，Bodon 的实现使用了一种简单的输入格式：每笔交易一行，项目用空格分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T03:19:52.700

如果您想要 FPGrowth 或 Apriori 的快速 Java 实现，请查看我的项目 SPMF。SPMF 中的 FPGrowth 实现在某些数据集上比 Weka 实现高出两个数量级。例如，您可以看到以下性能比较：

[http://www.philippe-fournier-viger.com/spmf/performance/chess_fpgrowth_spmf_vs_weka.png](http://www.philippe-fournier-viger.com/spmf/performance/chess_fpgrowth_spmf_vs_weka.png)

这是主要的项目网页：

[http://www.philippe-fournier-viger.com/spmf/index.php](http://www.philippe-fournier-viger.com/spmf/index.php)

此外，请注意，SPMF 提供了超过 50 种算法用于项集挖掘、关联规则挖掘、顺序模式挖掘等。此外，SPMF 的 GUI 版本还支持 Weka 使用的 ARFF 格式。

# php - 链接图像 symfony

> ID：15692013
> 
> 赞同：0
> 
> 时间：2013-03-28T20:57:55.620
> 
> 标签：php, css, .htaccess, symfony1, symfony-1.4

我对使用 Symfony 1.4 开发的网站有一个小问题，问题是视图模板中的图像链接以及 OVH 服务器上的 css 中的链接不起作用。

例如链接“/images/logo.png”在远程服务器（plesk）和我的本地机器上工作得很好，但在OVH服务器中没有显示徽标......这给了我

```
failed to load the given URL 
```

就在OVH服务器上？！

编辑 ：

在萤火虫中，当我将 /images/logo.png 更改为 ../images/logo.png 时，图像的链接工作得很好！！

编辑 1：

你不明白，我有很多图片都在这个链接/images/...，所以我必须更改所有链接？？！！你能知道任何方法来更改配置或 htaccess 以将其直接重定向到文件夹图像？

# emacs - Emacs：将shell命令应用于kill ring和yank中的顶部项目

> ID：15692016
> 
> 赞同：1
> 
> 时间：2013-03-28T20:58:03.230
> 
> 标签：emacs

假设我在 Emacs 的剪贴板（杀死环）中有一些文本。我想设置一个键盘快捷键：

在对这个文本应用某个 shell 命令后拉出文本：例如：

```
 printf $1 | sed 's@^\\@/samba/@;s@\\@/@g' 
```

（在这种情况下`$1`是剪贴板中的文本）

我怎样才能在 Emacs 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T00:37:07.670

除非 shell 命令始终相同，否则没有理由为此编写任何 elisp：

`C-y``C-u``M-|` `sed 's@^\\@/samba/@;s@\\@/@g'` `RET`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T00:31:35.473

这是一个通用的`shell-command-on-string`

```
(defun shell-command-on-str (cmd &optional str)
  "Insert result of calling CMD with STR as input.

STR is current-kill if unspecified.
"
  (interactive (list (read-shell-command "Shell command on region: ")))
  (setq str (or str
                (current-kill 0)))
  (insert (with-temp-buffer
            (insert str)
            (shell-command-on-region (point-min) (point-max) cmd nil 'replace)
            (buffer-string)))) 
```

您可以定义自己的函数来使用它：

```
(defun my-sed-on-kill ()
  (interactive)
  (shell-command-on-str "sed 's@^\\@/samba/@;s@\\@/@g'")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:13:14.740

要直接回答您的问题，您可以利用 Emacs `shell-command-on-region`：

```
(defun sed-yank ()
  "Yank the kill ring, then run sed on it"
  (interactive)
  (yank)
  (shell-command-on-region (point) 
                           (mark) 
                           "sed 's@^\\\\@/samba/@;s@\\\\@/@g'" 
                           (current-buffer)
                           t)) 
```

您可以将任何您想要的命令放在“sed ...”行中。问题是反斜杠需要在 elisp 引号内转义，因此您的原始内容`\\`变为`\\\\`.

也就是说，除非您的 shell 脚本特别涉及，否则我怀疑您最好直接在 Emacs 中进行所有处理，而不是将其移植到 sed。

# javascript - 在 D3 库中为曲线设置动画的最少资源方式

> ID：15692028
> 
> 赞同：2
> 
> 时间：2013-03-28T20:58:48.953
> 
> 标签：javascript, animation, path, d3.js, bezier

D3 是否有内置方法来动画绘制曲线？
我的项目中需要很多动画曲线。我已经尝试过 Jason Davies 解决方案[**链接到示例**](http://www.jasondavies.com/animated-bezier/)，[**链接到 js 文件**](http://www.jasondavies.com/animated-bezier/animated-bezier.js)，它工作正常，但即使是 Chrome 浏览器也开始滞后于 30 多条动画曲线。
在我的情况下，每条曲线都有自己的坐标，所以浏览器应该处理所有这些的路径，我理解这一点，但是 Jason 的解决方案会在每次迭代时重新计算所有路径，据我所知，这样做是为了能够通过灰色动态改变路径点。
我是 d3 库的新手，所以我无法意识到，是否可以计算一次所有路径，然后简单地绘制从 0% 到 100% 的动画曲线？还是一切都变得更容易了，并且有简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-20T08:28:53.833

使用 d3.js 动画贝塞尔曲线的一种廉价而简单的方法是转换`stroke-dasharray`属性。这个想法是从整条线开始作为一个空白，并以这条线作为一个破折号结束。

有关此想法的简单实现，请参见此 jsfiddle：http: [//jsfiddle.net/nj37gkgq/](http://jsfiddle.net/nj37gkgq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:16:58.560

设置路径的`d`参数将使用 d3 的默认动画进行动画处理。所以这应该正确动画：

```
var svg = d3.select('#myelement').append('svg'),
    curve = svg.append('path')
                 .attr('d', 'M100,200 C100,100 250,100 250,200S400,300 400,200');

curve.transition()
       .attr('d', 'M0,0 C100,100 250,100 250,200S400,300 400,200'); 
```

[在JsFiddle](http://jsfiddle.net/x22xE/)上看到这个。

有关曲线命令的其他文档，请参阅[官方文档](http://www.w3.org/TR/SVG/paths.html#PathDataCurveCommands)。

# php - PHP在做curl时将连字符转换为三个点

> ID：15692033
> 
> 赞同：0
> 
> 时间：2013-03-28T20:59:14.570
> 
> 标签：php, soap, curl

我正在尝试使用 PHP 中的 Curl 调用 .net 网络服务。每次我尝试这样做时，都会收到编码错误。它说不支持 utf...8。当我检查 tcpdump (PacketPeeper) 时，我看到由于某种原因 curl 正在将字符串“utf-8”转换为“utf...8”。实际上，它将所有“-”转换为“...”。

知道为什么吗？

```
$req = "<?xml version=\"1.0\" encoding=\"utf‐8\"?>
    <soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema‐instance\"
    xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"
    xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">
    <soap:Body>
        <GenerateLink>
        ..............  
        </GenerateLink>
        </soap:Body>
    </soap:Envelope>";
$soap_do = curl_init(); 
curl_setopt($soap_do, CURLOPT_URL,            "http://www.myurl.com/serv.asmx" );   
curl_setopt($soap_do, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($soap_do, CURLOPT_RETURNTRANSFER, true );
curl_setopt($soap_do, CURLOPT_POST,           true ); 
curl_setopt($soap_do, CURLOPT_POSTFIELDS,     $req); 
curl_setopt($soap_do, CURLOPT_HTTPHEADER,     array('Content-Type: text/xml; charset: utf-8' ,'SOAPAction: "http://www.myurl.com/serv.asmx"', 'Content-Length: '.strlen($req) )); 

$response = curl_exec($soap_do); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:07:18.590

当我在应用程序之间复制粘贴代码时，我遇到了这个问题，并且在粘贴（通常使用 Office 应用程序）时，连字符变成了非中断连字符或除了简单的连字符之外很难区分的字符。我使用十六进制编辑器查看存储字符串（部分）的文件，该文件将提供给 CURL。您应该`ord($req{33})==45`在调试时爆炸前检查！（检查我的索引 33，这只是一个快速计数！）

# javascript - JavaScript：打印整个网页时，IE 似乎没有在页面上打印 iFrames 的内容

> ID：15692036
> 
> 赞同：8
> 
> 时间：2013-03-28T20:59:23.550
> 
> 标签：javascript, internet-explorer, iframe, printing

客户的网站上有产品列表。产品价格通过页面底部的 iFrame 动态拉入。页面上有 Javascript，一旦加载，它会根据 iFrame 内容的大小自动将此 iFrame 调整为正确的高度。

客户报告说，在打印页面时，他们从 iFrame 中看不到任何价格应该是的东西 - 显然它不是在 IE 中打印，只是主页本身。

我在 Mac 上，所以无法在 IE 中测试，所以我很难尝试这个。

**任何人都可以澄清这种情况下的预期行为吗？是否可以让 IE 默认同时打印页面*和*包含的 iFrame，如果可以，我将如何执行此操作？**我只能找到从父窗口打印特定框架的示例。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:50:28.253

预期的**行为**应该是您在其他浏览器中遇到的。如果页面被打印，则 iframe 应该与它一起打印。很难想象其他人都弄错了，而 IE 在这种情况下正确。

以下是关于问题*可能是什么的一些***猜测**，但如果不了解更多/查看代码，很难知道具体细节：

 *此问题可能是由于您的页面上可能有一些 css。我读过类似的`iframe`打印问题，最初`visibility`设置为`hidden`导致`iframe`打印不正确。为了解决这种特定情况，用户必须将`width`and设置`height`为`0px`. 在不了解您网站的更多信息的情况下，我无法正确预测这种情况正在发生。

另一个问题可能是您根据 iframe 的内容动态调整大小。一个简单的测试是将该部分注释掉并设置一个通用的`width`并查看打印问题是否仍然存在。也许这些动态样式没有被转移到打印样式表中并且没有被应用（因此根本没有出现）。 `height``iframe`

作为一个快速建议，请查看[`css media types`](http://www.w3.org/TR/CSS2/media.html)：

**打印**

> 用于分页材料和在打印预览模式下在屏幕上查看的文档。[有关分页媒体](http://www.w3.org/TR/CSS2/page.html)特有的格式问题的信息，请参阅分页媒体部分。

**有用的链接**：[打印规范](http://www.whatwg.org/specs/web-apps/current-work/#printing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T20:03:17.143

试试这个插件它会解决你的问题 [http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:40:48.917

这是一个有趣的点，所以我使用 IE8 进行了测试（在服务器上，而不是本地）。

我在 IE8 中打印了一个网页，其中包含我构建的 iframe。它第一次打印了一些内容（其他内容显示为黑色）。我第二次打印时，iframe 内容都是黑色的。

但是，在我的示例中，iframe 中的内容不断变化（淡入淡出的图像和文本），其背后的 css 背景是黑色的。

该测试的 iFrame 内容与主页面的内容位于不同的主机服务器上。但据我所知，这里有一个跨域策略文件。

跨域策略问题是我的第一个猜测，但完全有可能 Internet Explorer 在将屏幕截图发送到打印机时呈现屏幕截图的方式存在一些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T15:39:23.507

我无法解释为什么 IE 不起作用，但也许您可以通过将这部分代码添加到父页面来解决问题，以强制刷新每个 iframe：

```
$(document).ready(function() {
    if($.browser.msie) {//Only for IE
        $('iframe').each(function() {
          $(this).attr('src', $(this).attr('src'));
        });
     }
}); 
```

为了获得浏览器，我使用[这种](http://api.jquery.com/jQuery.browser/)方法。
而且我不使用`contentDocument.location.reload(true);`方法来确保刷新 iframe。请参阅[SO 主题](https://stackoverflow.com/questions/4249809/reload-an-iframe-with-jquery)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T12:31:02.767

如果您使用的是 Javascript，那么为什么不尝试`window.print()`使用`print media CSS`.*

# c# - 匹配字段中的多个项目

> ID：15692050
> 
> 赞同：3
> 
> 时间：2013-03-28T20:59:46.377
> 
> 标签：c#, linq

我正在尝试使用 linq 创建有效的搜索

用户输入他们的搜索关键字（或前几个字符），我将其解析为一个数组。

对于第一部分，我想找到找到所有单词的搜索字段的实例。（后来，我搜索任何，但那部分工作）

```
string[] arSearchString = searchString.Split(',', ' ', ';');
var codes = from c in CodeList
            where arSearchString.All(val => c.Description.StartsWith(val) || 
                                            c.Description.Contains(" " + val))
            select c; 
```

这不返回任何内容。

我想要发生的是返回在描述字段中找到数组中所有单词的项目例如，如果他们输入“猫狗”，我应该得到如下内容：

```
"A Cat and a Dog"
"Dogs and Cats"
"Catatonic Dogma" 
```

但不是仅匹配其中一个键的项目（例如，“我的狗生活”）

谁能发现我做错了什么或提供解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T21:01:39.227

**确保将大小写考虑在内**。使用`ToUpper`它针对字符串比较进行了优化。**编辑：我已经为了`ToUpperInvariant`文化安全:)**

尝试这个：

```
string[] arSearchString = searchString.Split(',', ' ', ';');
var codes = from c in CodeList
        where arSearchString.All(val => c.Description.ToUpperInvariant().StartsWith(val.ToUpperInvariant()) || 
                                 c.Description.ToUpperInvariant().Contains(" " + val.ToUpperInvariant()))
        select c; 
```

**但我真的很想将其转换为链接，因为它有点乱**。我更喜欢这个，但你可以选择：

```
string[] arSearchString = searchString.Split(',', ' ', ';');
var codes = CodeList
    .Where(c => arSearchString
        .All(val => c.Description.ToUpperInvariant().StartsWith(val.ToUpperInvariant()) 
            || c.Description.ToUpperInvariant().Contains(" " + val.ToUpperInvariant()))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:07:07.713

该查询将区分大小写，因此，在您的示例中，您不会仅仅因为您搜索`cat`但不匹配而得到任何结果`Cat`。尝试将搜索字符串和比较转换为`.ToUpper()`or`.ToLower()`

# iphone - 从笔尖切换到情节提要

> ID：15692060
> 
> 赞同：0
> 
> 时间：2013-03-28T21:00:26.200
> 
> 标签：iphone, ios

我正在将 ViewController 转换为情节提要，但它没有执行该方法，因为它是情节提要而不是笔尖。（我不太确定，也很迷茫）。在这里，我的 LoginViewController.m 中的部分无法正常工作

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        NSLog(@"call init");
        self.factory = [[NavigationBarFactory alloc] init];
        self.service = [[LoginService alloc] initWithDelegate:self];
        self.animateSize = 60;
    }
    return self;
} 
```

我如何在故事板设置中完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:09:26.297

这就是您要替换 initWithNibName 函数的内容：

```
-(void)viewDidLoad
{
        [super viewDidLoad];
        self.factory = [[NavigationBarFactory alloc] init];
        self.service = [[LoginService alloc] initWithDelegate:self];
        self.animateSize = 60;
} 
```

# ios - iOS CoreLocation 未获取 GPS 坐标

> ID：15692067
> 
> 赞同：0
> 
> 时间：2013-03-28T21:00:51.147
> 
> 标签：ios, objective-c, core-location

所以我是 iOS 开发的新手，我只是想用我当前的 GPS 坐标更新标签。我在编译时没有问题，但我的坐标显示为`0.00000, 0.00000`.

这是我的 .h 文件的代码：

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface ViewController : UIViewController{
    IBOutlet CLLocationManager *locationManager;
    IBOutlet UILabel *location;
}

//@property (nonatomic, retain) IBOutlet CLLocationManager *locationManager;
//@property (weak, nonatomic) IBOutlet UILabel *location;
@end 
```

这是我的 .m 文件的代码：

```
@implementation ViewController

- (void) updateLabel
{
    NSObject *latitude = [NSString stringWithFormat:@"%f", locationManager.location.coordinate.latitude];
    NSObject *longitude = [NSString stringWithFormat:@"%f", locationManager.location.coordinate.longitude];

    location.text = [NSString stringWithFormat: @"%@,%@", latitude, longitude];
}

- (void)viewDidLoad
{

    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    [self updateLabel];
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:58:56.333

修复：

我没有实现任何委托方法，也没有实现 [locationManager startUpdatingLocation]。现在我知道得更清楚了。

.h 文件：

```
@interface MapViewController : UIViewController <CLLocationManagerDelegate>
@property (nonatomic, retain) IBOutlet CLLocationManager *locationManager;
@property (strong, nonatomic) IBOutlet UILabel *location;
@end 
```

.m 文件：

```
- (void) updateCurrentLabel
{
    NSObject *latitude = [NSString stringWithFormat:@"%f", locationManager.location.coordinate.latitude];
    NSObject *longitude = [NSString stringWithFormat:@"%f", locationManager.location.coordinate.longitude];

    self.location.text = [NSString stringWithFormat: @"Current Location: %@,%@", latitude, longitude];
}

- (void)viewDidLoad
{
    [self getCurrentLocation];
    [super viewDidLoad];
}
-(void) locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    [self updateCurrentLabel];
}

-(void) getCurrentLocation
{
    self.locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    locationManager.distanceFilter = kCLDistanceFilterNone;
    [locationManager startUpdatingLocation];
} 
```

感谢您指出我是多么的笨拙。弄清楚了。多谢你们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T05:39:50.433

一旦尝试这样，在 ViewDidLoad 中：

```
 locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = (id)self;
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    [locationManager startUpdatingLocation];
    [self updateLabel]; 
```

使用此委托方法，否则您将获得 0 个值：

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
   //No need to do any code...
   // NSLog(@"Got location %f,%f", newLocation.coordinate.latitude,   newLocation.coordinate.longitude);

 } 
```

在更新标签方法中：

```
- (void) updateLabel
{
   //Getting Current Latitude and longitude..

    CLLocation *location = [locationManager location];
    float longitude=location.coordinate.longitude;
    float latitude=location.coordinate.latitude;
    NSLog(@"latitude,longitudes are >> %f,%f",latitude,longitude);
    locationlabel.text =  [NSString stringWithFormat:@"%f,%f",longitude,latitude];

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:16:49.600

不要使用`locationManager.location.coordinate.latitude`，而是保留类型的实例变量`CLLocationCoordinate2D`。你可以称它为`currentLocation`. 然后当你在委托方法中得到一个值时`locationManager:didUpdateLocations:`，设置它的值`currentLocation`。

您还必须调用`[locationManager startUpdatingLocation]`并设置它的委托（以及实现该委托方法）。

您目前使用位置管理器的方式是错误的，我认为您最好按照教程来了解基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-19T13:19:49.270

我发现将 location 用作单例并将值保存到 default user 是很有趣的。我是年轻的程序员，正在尝试用 oop 编写所有代码。我使用它如下（此代码仍然需要重构，并且 alertUserWithTitle: 是 NYMessageToUser 的类方法来提醒用户）：

```
//##Header file:
@interface NYLocationManager : NSObject<CLLocationManagerDelegate>
{
    CLLocationManager *locationManager;
    float lonngitude;
    float latitude;
    float altitude;
}
@property(nonatomic,retain)CLLocationManager *locationManager;
@property(nonatomic,readwrite)float longitude;
@property(nonatomic,readwrite)float latitude;
@property(nonatomic,readwrite)float altitude;

+(NYLocationManager *) getInstance;

-(void)startUpdatingLocation;
-(void)stopUpdatingLocation;
-(double)getDistanceFromUserLocationToCordinatesLatitude:(float)lat Longitude:(float)lon;

@end

//### implementation file: 

@implementation NYLocationManager

@synthesize locationManager;
@synthesize latitude;
@synthesize longitude;
@synthesize altitude;

+ (id)getInstance
{
    static NYLocationManager *Instance = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        Instance = [[self alloc] init];
    });
    [Instance startUpdatingLocation];
    return Instance;
}

- (id)init
{
    if (self = [super init])
    {

        latitude    =0.0;
        longitude   =0.0;
        altitude    =0.0;
        if([[NSUserDefaults standardUserDefaults] objectForKey:@"locationLongitude"] != nil)
        {
            NSUserDefaults *savedLocation=[NSUserDefaults standardUserDefaults];
            latitude    =[[savedLocation objectForKey:@"locationLatitude"] floatValue];
            longitude   =[[savedLocation objectForKey:@"locationLongitude"] floatValue];
            altitude    =[[savedLocation objectForKey:@"locationAltitude"] floatValue];
        }
        locationManager = [[CLLocationManager alloc] init];
        locationManager.distanceFilter  = kCLDistanceFilterNone;
        locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
        locationManager.delegate        = self;
        if ([CLLocationManager locationServicesEnabled])
        {
            [locationManager startUpdatingLocation];
        } else
        {
            [NYMessageToUser  alertUserWithTitle:@"Location Services is Disabled!!!" withMessage:@"This app is designed to share images with location, Please enable location for this app and relucnh the app"];
        }
    }
    return self;
}

- (void)dealloc
{
    // Should never be called, but just here for clarity really.
}
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *loc =[locations lastObject];
    self.longitude  =loc.coordinate.longitude;
    self.latitude   =loc.coordinate.latitude;
    self.altitude   =loc.altitude;
    NSUserDefaults *savedLocation=[NSUserDefaults standardUserDefaults];
    [savedLocation setObject: [NSString stringWithFormat:@"%f", self.longitude] forKey:@"locationLongitude"];
    [savedLocation setObject: [NSString stringWithFormat:@"%f", self.latitude] forKey:@"locationLatitude"];
    [savedLocation setObject: [NSString stringWithFormat:@"%f", self.altitude ] forKey:@"locationAltitude"];
    [savedLocation synchronize];

    [locationManager stopUpdatingLocation];
}
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    [locationManager stopUpdatingLocation];
    [NYMessageToUser alertUserWithTitle:@"Location Error!!!" withMessage:@"This app is designed to use with valid location, Please enable location for this app and relucnh the app"];
}
-(void)startUpdatingLocation
{
    if ([CLLocationManager locationServicesEnabled])
    {
        [locationManager startUpdatingLocation];
    } else
    {
        [NYMessageToUser alertUserWithTitle:@"Location Services is Disabled!!!" withMessage:@"This app is designed to share images with location, Please enable location for this app and relucnh the app"];
    }
}

-(void)stopUpdatingLocation
{
    [locationManager stopUpdatingLocation];
}
-(double)getDistanceFromUserLocationToCordinatesLatitude:(float)lat Longitude:(float)lon
{
    CLLocation *locA = [[CLLocation alloc] initWithLatitude:self.latitude longitude:self.longitude];

    CLLocation *locB = [[CLLocation alloc] initWithLatitude:lat longitude:lon];

    CLLocationDistance distance = [locA distanceFromLocation:locB];
    return distance;
}
@end 

//### How to use

NYLocationManager *loc  =[NYLocationManager getInstance];
 NSLog(@"longitude: %f, latitude: %f, altitude: %f",loc.longitude,loc.latitude,loc.altitude); 
```

# case - PHP案例错误

> ID：15692069
> 
> 赞同：-6
> 
> 时间：2013-03-28T21:00:52.067
> 
> 标签：case, php

```
Line 9: Parse error: syntax error, unexpected T_CASE:
line:"case "reinstall" 
```

代码：

```
 if ( check_permissions( "hardware_info", "" ) )
    {
        $link_hardware_info = link_to( $label = $singlerow_hardware['display'], $path = "hardware/info/{$singlerow_setup['hardware_id']}" );
        $col2_array[] = li_links( "{$img_arrow_up} {$link_hardware_info}" );
    }
    break;
case "reinstall" :
    do
    {
        $module_page_title = translate_text( "tpl_store_reinstall" );
        $singlerow_install = query_singlerow( $table = "store_installs", "`id` = '{$load_module_id}'" );
        $singlefield_hardware_id = query_singlefield( $table = "store_setups", "hardware_id", "`id` = '{$singlerow_install['setup_id']}'" );
        $label_display_store = query_singlefield( $table = "store_produts", "display", "`id` = '{$singlerow_install['product_id']}'" );
        $link_information_up = link_to( $label = $label_display_produtct, $link = "installs/info/{$load_module_id}" );
        $col2_array[] = li_links( "{$img_arrow_up} {$link_information_up}" );
        $dbform_array['file_id'] = $singlerow_install['file_id'];
        $html_main .= form_default( $path = "installs/reinstall/{$load_module_id}" );
        $html_main .= form_fieldset( );
        $html_main .= form_legend( $legend = translate_text( "tpl_auto_install" )." ".translate_text( "tpl_package" ) );
        if ( !empty( $postdata_valid['file_id'] ) )
        {
            $setup_type = query_singlefield( $table = "store_files", "setup", "`id` = '{$postdata_valid['file_id']}'" );
            if ( $setup_type == "archive" )
            {
                $link_store_reinstall_id = squeezebox( $label = translate_text( "tpl_store_reinstall", "lower" ), $link = "connect/reinstall/{$load_module_id}/?reinstall_file_id={$postdata_valid['file_id']}" );
            } 
```

我已经尝试过另一种解决方案但没有奏效，

```
case "reinstall":do_function_reinstall();do_function_reinstall();  break;function do_function_reinstall(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:08:12.707

`case`关键字只能出现在一个块`switch`中。确保您的代码与此类似：

```
switch($variable) {
    case "foo":
        // code to handle when $variable == "foo"
    break;
    case "reinstall":
       do
       {
           // loop content
       } while (condition); // make sure there is a semicolon here.
    break;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-28T21:10:20.707

你的代码不够清晰！因为 CASE 语句是在使用 switch 语句之后使用的，但我看到它们在您的代码中没有 switch 语句，所以我不知道这是否是一种类型

那么案例的使用必须是这样的：

```
switch(VARIABLE_NAME)
    {
        case "reinstall":{//Here put your instructions}
    } 
```

试试这个并告诉我结果:)

# ios - iOS，UIView动画，动画自己的内容

> ID：15692074
> 
> 赞同：0
> 
> 时间：2013-03-28T21:01:05.070
> 
> 标签：ios, animation, uiview

我有一个 UIView 的子类，它显示自己的内容。我想为内容制作动画。

内容是在自己的 drawRect 中自行绘制的：我想知道有什么可能对其进行动画处理。内容本身由改变其形式的图形形状组成。

我看不到用子视图构建内容的方法，然后可以自己动画。

有没有办法使用 UIView 动画块？

还有其他可能性吗？我不想使用 OpenGL ES 对此进行动画处理，这将是我的最后选择。

感谢您的任何提示托斯滕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:10:50.510

你确定你不能使用CALayer？他们是为此而生的！你可以创建复杂的帧/纹理（你写过你有几何形状）并对它们应用动画变换。

考虑一下，如果您的形状不适合（非常广泛的可能性）形状，您基本上可以使用 CALayer 绘制任何线条：您创建一个适当长度和宽度的图层，然后根据需要简单地平移和旋转它（当然翻译和旋转是“动画的”）。

# sql - 如何将返回集的多行中的列的 int 值递增一？

> ID：15692075
> 
> 赞同：0
> 
> 时间：2013-03-28T21:01:07.877
> 
> 标签：sql, sql-server, tsql

我希望能够将多行结果集中返回的列的 int 值增加 1。例如，以下查询将从如下所示的表中返回结果集：

```
select numinbatch from items i where i.ID > @itemID and i.BatchID = @batchID

4
5
6
7 
```

我想通过将它们增加 1 来更新这些值，以便：

```
5
6
7
8 
```

我现在有以下内容，但我在加号下得到了一条红色的波浪线错误线。

```
declare @idToIncrement as int
declare cur cursor fast_forward for select numinbatch from items i where i.ID > @itemID and i.BatchID = @batchID

    open cur
    fetch next from cur into @idToIncrement

    while @@FETCH_STATUS = 0
    Begin
    EXEC

    --increment numinbatch or @idToIncrement
    @idToIncrement= @idToIncrement + 1

     fetch next from cur into @field1, @field2
    END

    close cur
    deallocate cur 
```

我知道游标对性能不利，因此如果有人有更好的解决方案，请随时分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:03:21.623

我会这样做：

```
select numinbatch + 1 numinbatch_increased_by_1
  from items i
 where i.ID > @itemID and i.BatchID = @batchID 
```

如果要将`UPDATE`值放入表中，则

```
UPDATE items i
   SET numinbatch = numinbatch + 1
 WHERE i.ID > @itemID AND i.BatchID = @batchID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:04:08.997

```
SELECT numinbatch + 1 FROM items WHERE ID > @itemID AND BatchID = @batchID 
```

假设 numinbatch 是数字。不需要光标。

# jquery - Jquery 验证有限的非重复字符集

> ID：15692084
> 
> 赞同：0
> 
> 时间：2013-03-28T21:01:40.347
> 
> 标签：jquery, validation

如何使用 Jquery Validate 将用户输入验证为有限的字符集，然后使这些字符不重复？

可接受的数据输入必须是：

1.  正好七个字符长
2.  大写
3.  仅使用字符“23456789FHLMQRSWXY”
4.  单个字符不能多次使用

我使用 Jquery Validate 正确验证了以下代码：

```
<style type="text/css">
  .upper {text-transform:uppercase;}
</style> 
```

和

```
<input type="text" name="referrer" maxlength="7" class="required upper" minlength="7" size="8" /> 
```

但我需要完成 3\. & 4\. 以确保用户只能输入以下有限字符集之一，它们是非重复的。

谢谢

# iphone - 未越狱 iPhone 上的 IOS 出厂重置/覆盖

> ID：15692088
> 
> 赞同：0
> 
> 时间：2013-03-28T21:01:53.027
> 
> 标签：iphone, ios, erase

是否有允许从 Windows 恢复出厂设置的 API 或方法？我已经为 android 和 blackberry 编写了一个 windows 应用程序和应用程序来恢复出厂设置并覆盖这些手机，但 IOS 似乎更复杂地以编程方式擦除。我的公司希望这个过程自动化，这样当员工上交他们的旧手机时，我们将它们插入并按下按钮。

# c - 硬件仿真的正确实现是什么？

> ID：15692091
> 
> 赞同：3
> 
> 时间：2013-03-28T21:02:11.153
> 
> 标签：c, optimization, emulation

我将编写一个[Game Boy](https://en.wikipedia.org/wiki/Game_Boy)模拟器（[Z80](https://en.wikipedia.org/wiki/Zilog_Z80)是 CPU，以防有人不熟悉它），在我进行研究时，我发现了一些我不太确定的东西。

第一个是 C 是这里选择的编程语言。这不是什么大问题，但我想从今天的角度听听你的意见。甚至不推荐使用 C++。

我发现的第二件事是每个操作码每个人都使用一个函数。这似乎是合乎逻辑的，因为它只是一个函数调用，并且可能比为“ADD”指令使用一个函数更好地优化，然后你必须找出这里使用了哪些寄存器。但今天这有多大必要？如果我注意到另一种可能更方便的方式并没有减少它（现在或多或少现代游戏机出现在我的脑海中），我应该坚持还是我应该重写我的模拟器？

此外，一遍又一遍地编写“将该寄存器添加到该寄存器”的函数有点令人沮丧。有没有办法从操作码映射或类似的东西自动化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-20T07:54:02.360

我主要同意 WingsOfIcarus 的观点。我已经写了一些模拟器，所以这是我的见解：

1.  **使用函数指针是个好主意**（为了代码的速度和清晰度）
2.  **OOP 不是问题**

    是的，成员调用有点慢，但如果你小心它不会对性能产生太大影响。另一方面，OOP 仿真代码更易于管理/阅读/理解。

3.  **使用指令数据库而不是固定的指令解码。**

    我正在使用一个文本文件，其中包含所有指令的所有必要信息。模拟器在初始化期间解析它（提供函数指针和操作数的数组......）。在这种架构中，很容易纠正指令集中的错误，而无需更改任何代码。

    复杂的指令集文档在某些方面几乎总是有缺陷的。最坏的情况是**Z80**（我从未见过 100% 无错误的指令集）。所以使用更多的指令集，比较它们并创建一个无错误的集（如果可以的话）。

4.  **将声音、视频、键盘和鼠标添加到您的仿真中**

    这通常不是问题。在**Windows**上使用**WaveOut**而不是**DirectSound**。它更稳定、更快（DSound 的可用延迟有时甚至 > 400 毫秒）。使用 WaveOut，我可以将延迟控制在 20-80 毫秒，这没问题。

5.  **以每秒模拟 CPU 的 T 个周期应用限制速度**

    我正在使用机器周期正确的时间，这要慢得多，但允许我正确地实现任何硬件外围仿真（FDC、DMAC、声音芯片......没有任何黑客）

6.  **为模拟平台应用文件的加载/保存**

例如，这是我的指令集的一部分（直接提供给 CPU 仿真：

```
opc      T0 T1 MC1   MC2   MC3   MC4   MC5   MC6   MC7   mnemonic

B8       04 00 M1R 4 ... 0 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,B
B9       04 00 M1R 4 ... 0 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,C
BA       04 00 M1R 4 ... 0 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,D
BB       04 00 M1R 4 ... 0 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,E
BC       04 00 M1R 4 ... 0 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,H
BD       04 00 M1R 4 ... 0 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,L
BE       07 00 M1R 4 MRD 3 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,(HL)
BF       04 00 M1R 4 ... 0 ... 0 ... 0 ... 0 ... 0 ... 0 CP A,A
C0       11 05 M1R 5 MRD 3 MRD 3 ... 0 ... 0 ... 0 ... 0 RET NZ
C1       10 00 M1R 4 MRD 3 MRD 3 ... 0 ... 0 ... 0 ... 0 POP BC
C2L2H2   10 10 M1R 4 MRD 3 MRD 3 ... 0 ... 0 ... 0 ... 0 JP NZ,U16
C3L1H1   10 00 M1R 4 MRD 3 MRD 3 ... 0 ... 0 ... 0 ... 0 JP U16
C4L2H2   17 10 M1R 4 MRD 3 MRD 4 MWR 3 MWR 3 ... 0 ... 0 CALL NZ,U16
C5       11 00 M1R 5 MWR 3 MWR 3 ... 0 ... 0 ... 0 ... 0 PUSH BC
C6U2     07 00 M1R 4 MRD 3 ... 0 ... 0 ... 0 ... 0 ... 0 ADD A,U8
C7       11 00 M1R 5 MWR 3 MWR 3 ... 0 ... 0 ... 0 ... 0 RST 00H
C8       11 05 M1R 5 MRD 3 MRD 3 ... 0 ... 0 ... 0 ... 0 RET Z
C9       10 00 M1R 4 MRD 3 MRD 3 ... 0 ... 0 ... 0 ... 0 RET
CAL2H2   10 10 M1R 4 MRD 3 MRD 3 ... 0 ... 0 ... 0 ... 0 JP Z,U16

opc:    operation code [hex]
        L1,H1,U1,S1 means first operand direct number or address
        L2,H2,U2,S2 means second operand direct number or address
        L3,H3,U3,S3 means third operand direct number or address
        H,L ... U16 high and low byte
        U   ... U8 unsigned byte
        S   ... S8 signed byte

T0      normal instruction duration [T] always 2 decimal digits
T1      instruction duration if condition not met [T] always 2 decimal digits

MC1++   Machine cycle first is type,second is duration [T] always 1 decimal digit
        ...     unused
        M1R     M1 cycle
        MRD     memory read
        MWR     memory write
        IOR     IO read
        IOW     IO write
        NON     no external operation (internal computation)
        INT     interrupt cycle

mnem    instruction text (mnemonic) 
```

*   `opc`用于指针数组中的地址
*   `mnemonic`用于选择正确的函数指针和操作数类型
*   `T0`并`T1`用于指令计时（这对于粗略的仿真来说已经足够了）
*   `MC1++`用于正确的 MC 时序（实现正确的硬件仿真和争用时序）

这是[我的 Zilog Z80A 完整指令集，带有机器周期时序](http://ulozto.net/xGYKSRRs/zilog-z80-instruction-set-zip)链接供下载。随意使用（只需在某处提及我的昵称）。在移植到这个之后，我终于能够 100% 通过**ZEXALL**测试。有关详细信息，请参阅*[用 C 或 C++ 编写图形 Z80 仿真器](https://stackoverflow.com/a/19218993/2521214)*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T01:35:43.183

第一个建议，你不应该使用嵌套的 switch 语句，你应该使用函数指针数组，更快 -> 更好的模拟，更好的代码，嵌套的 switch-es 也会有点混乱，这里有一些你可以的链接阅读有关这些数组的更多信息
[http://www.newty.de/fpt/fpt.html](http://www.newty.de/fpt/fpt.html)
[http://www.multigesture.net/wp-content/uploads/mirror/zenogais/FunctionPointers.htm](http://www.multigesture.net/wp-content/uploads/mirror/zenogais/FunctionPointers.htm)

第二个建议，是的，您可以在 C#、Java、C++ 中执行此操作，但是由于您想要 CPU 周期的每一位，因此您可以获得尽可能接近的仿真 - 以最少的 CPU 周期模拟目标架构的一个 CPU 周期curret 架构，在这种情况下，从我从人们那里听到/读到的内容来看，OOP 并不是那么好。其中一件事是性能，第二件事非常明显，正如您可能注意到的那样，仿真是非常复杂的任务，并且将其包装在 OOP 中可能会给颈部带来不必要的痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T23:48:32.040

这是使用 NES 模拟器的一些操作码的一个非常酷的实现：

[http://bisqwit.iki.fi/jutut/kuvat/programming_examples/nesemu1/](http://bisqwit.iki.fi/jutut/kuvat/programming_examples/nesemu1/)

这是随附的 youtube 视频，对正在发生的事情有更多解释

[http://www.youtube.com/watch?v=y71lli8MS8s](http://www.youtube.com/watch?v=y71lli8MS8s)

它使用 C++ 模板和一些额外的 C++11 特性。至于您是选择 C++ 还是 C，这取决于您，但这并不重要。如果你只是在模仿一个游戏机，我怀疑速度在现代处理器上是否会成为一个问题，所以尽量只使用你喜欢的任何东西。

# xaml - Windows Phone 8 中 ScrollViewer 的内存使用情况

> ID：15692094
> 
> 赞同：0
> 
> 时间：2013-03-28T21:02:18.810
> 
> 标签：xaml, memory, windows-phone-8

我想知道是否有人知道在手机应用程序上设置属性或设置的方法，以便 ScrollViewer 使用更少的内存缓存。我目前有一个在屏幕上显示图像的应用程序，即使使用确保只有靠近或与屏幕相交的图像可见的算法，当我碰巧放大很多时，我仍然偶尔会耗尽内存附近的图像。

例如，下面的 XAML 将占用 300 个中的 125MB，而这只是空白的白色画布。

```
<phone:PhoneApplicationPage
x:Class="DemoScroller.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}" Margin="12,0"/>
        <TextBlock Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <Canvas Width="2000" Height="8000">
                <Canvas Width="990" Height="1990" Background="White"/>
                <Canvas Width="990" Height="1990" Canvas.Left="1010" Background="White"/>
                <Canvas Width="990" Height="1990" Canvas.Top="2000" Background="White"/>
                <Canvas Width="990" Height="1990" Canvas.Left="1010" Canvas.Top="2000" Background="White"/>
                <Canvas Width="990" Height="1990" Canvas.Top="4000" Background="White"/>
                <Canvas Width="990" Height="1990" Canvas.Left="1010" Canvas.Top="4000" Background="White"/>
            </Canvas>
        </ScrollViewer>
    </Grid>
</Grid>

</phone:PhoneApplicationPage> 
```

我不能使用列表框或类似的东西，因为图像在我的应用程序中并没有很好地排列。

有什么建议么？谢谢！托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:19:55.490

使图像不可见并不能阻止它被解码成未压缩的形式，这会占用大量内存，尤其是在它很大的情况下。

您将需要一种更有效的“虚拟化”图像的方法，以便在图像不在视野范围内时完全卸载它们。这就是 LongListSelector 可以给你的。ScrollViewer 不这样做。

# css - css 伪类选择器

> ID：15692096
> 
> 赞同：1
> 
> 时间：2013-03-28T21:02:19.887
> 
> 标签：css, pseudo-class, css-selectors

我想使用 css 选择我的标记中的第二个 div **:nth-child**但我不能让它工作。

我有一个插件生成的这个标记：

```
<div class="single-container">
                <div class="toggle-default">
                    <div class="toggle">
                    <div class="toggle_title toggle_active">FIRST</div>
                    <div class="toggle_content" style="display:block;">Lorem ipsum sit dolor amet</div></div>

                    </div>

    <div class="toggle-default">
                    <div class="toggle">
                    <div class="toggle_title toggle_active">SECOND </div>
                    <div class="toggle_content" style="display:block;">Lorem ipsum sit dolor amet</div></div>

                    </div>

    <div class="toggle-default">
                    <div class="toggle">
                    <div class="toggle_title toggle_active">THIRD </div>
                    <div class="toggle_content" style="display:block;">Lorem ipsum sit dolor amet</div></div>

                    </div>

    </div> 
```

我试过这个：`.toggle-deafult .toggle:nth-child(2) { background:red; }`这个`.toggle div:nth-child(2)`但它不起作用。

有人可以帮我弄这个吗 ？

谢谢 ！

后期编辑：我已经修改了标记，这是我需要修改的：`<div class="toggle_title toggle_active">SECOND </div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:59:39.897

```
.toggle-default:nth-child(2) .toggle_title{ background:#f00;} 
```

这是您要修改的第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:11:19.787

你需要`.toggle-default:nth-of-type(2n) { color: red; }`（注意*2n*）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:12:37.507

```
.toggle-default:nth-child(2) {
    background-color: red;
} 
```

# java - 如何在 android 项目中创建新活动而不在示例文件夹下创建它

> ID：15692097
> 
> 赞同：-2
> 
> 时间：2013-03-28T21:02:20.807
> 
> 标签：java, android, eclipse

每当我使用 Mac 在 eclipse 中创建新的 android 活动时，该活动都会在示例文件夹下创建。像 src.com.example。我想做的是在预先存在的文件夹下创建一个活动。像 src.com.already_created_folder。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-28T21:05:05.167

您可以只复制源文件（通过选择它们，然后点击 command_c，然后将它们粘贴到您创建的其他文件夹中。

更好的选择可能是将文件夹重命名为您想要的名称。去做这个：

1.  右键单击要重命名的文件夹
2.  选择“重构”
3.  选择“重命名”

# python - dict中的python 33泡菜类实例

> ID：15692105
> 
> 赞同：0
> 
> 时间：2013-03-28T21:02:44.130
> 
> 标签：python, python-3.x, pickle, cpython

以下代码

```
import pickle
class Member:
    global members
    try:
        with open('member dict.txt','rb') as f:
            members=pickle.load(f)
    except:
        members={}

    def __init__(self,name,info,new=True):
        if name in members and new:
            print('name is taken')
            self.name='Void'
            self.info={'Void':'Void'}
        else:
            self.info=info
            self.name=name
            members[name]=self
            if new:
                with open('member dict.txt','wb') as f:
                    pickle.dump(members,f)
    def __getstate__(self):
        return[self.name,self.info]
    def __setstate__(self,d):
        return Member(d[0],d[1],False) 
```

然后在空闲（在第一个代码中按 f5 之后）我输入

`PJ=member('P',{})`

我关闭空闲然后重新打开它并输入

```
members 
```

它返回`{}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:38:26.740

我自己运行了你的代码，*第二*次运行你的程序时，错误是`AttributeError: 'module' object has no attribute 'Member'`. 您正试图在正确构建之前解开您的课程。为了扩展第一条评论，放入`members`类定义*是*使您的代码失败的原因。将其移至类定义下方，它将起作用。

```
class Member:
    def __init__(self, name, info, new=True):
        ...
    ...

try:
    with open('member dict.txt', 'rb') as f:
        members = pickle.load(f)
except Exception as e:
    members = {} 
```

# html - IE7：将 Bootstrap 表单水平字段集/图例样式设置为看起来像控制组标签

> ID：15692107
> 
> 赞同：1
> 
> 时间：2013-03-28T21:02:48.960
> 
> 标签：html, css, twitter-bootstrap, internet-explorer-7, fieldset

我正在使用[Bootstrap](http://twitter.github.com/bootstrap/)构建标准表单。一些表单字段包括复选框或单选选项，因此我想雇用`fieldset`和服务员`legend`将选项与其类别相关联。

如果您以前听说过这个，请阻止我，但我在为 IE7 设置表单时遇到问题。具体来说：

1.  `legend`似乎导致换行，所以
2.  我似乎无法让单选按钮（或复选框）“留在”右栏中。

这张图片展示了第一行的“坏”布局（红色框内），以及我试图在第二行上实现的布局（绿色框内）。

![<code>legend</code> 似乎导致换行，所以我似乎无法让单选按钮（或复选框）](../Images/6714daaf2b6e879876be00fd49de6315.png)

让我们转到 HTML：

```
<form name="form_search" id="form_search" action="acrq_results.html" method="post" class="form-horizontal">
<fieldset>
    <legend>Regular legend not classed `.control-label`</legend>
    <div id="div_search_type" class="control-group">
    <fieldset>
        <legend class="control-label">With fieldset and legend.control-label</legend>
        <div class="controls">
            <label for="p_search_type1" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type1" value="both" checked="checked"  />Option 1</label>
            <label for="p_search_type2" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type2" value="passport_only"/>Option 2</label>
            <label for="p_search_type3" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type3" value="crba_only" />Option 3</label>
        </div>
    </fieldset>
    </div>
    <div id="div_other_reason" class="control-group">
        <label class="control-label">no fieldset or legend</label>
        <div class="controls">
            <label for="p_search_type1" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type1" value="both" checked="checked"  />Option 1</label>
            <label for="p_search_type2" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type2" value="passport_only"/>Option 2</label>
            <label for="p_search_type3" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type3" value="crba_only" />Option 3</label>
        </div>
    </div>
</fieldset>
</form> 
```

我添加了这些 CSS 规则来补充 Bootstrap 附带的内容（但它没有起到作用）：

```
legend.control-label, legend.control-label > span {
    border-bottom: 0;
    color: #000;
    cursor: pointer;
    display:inline-block;
    float:left;
    *display:inline;
    *float:none;
    font-size: 14px;
    font-weight: normal;
    line-height: 20px;
    margin-bottom: 5px;
} 
```

[我已经在http://jsfiddle.net/jhfrench/zTAHh/](http://jsfiddle.net/jhfrench/zTAHh/)的 JSFiddle 中打包了所有这些。同样，*这个*问题是针对 IE7 的；它在 Chrome 中看起来不错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T16:05:18.030

既然你试过

```
*display:inline;
*float:none; 
```

尝试将其定位为绝对。

HTML

```
<div id="div_search_type" class="control-group">
<fieldset class="group">
    <legend class="control-label">With fieldset and legend.control-label</legend>
    <div class="controls">
        <label for="p_search_type1" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type1" value="both" checked="checked"  />Option 1</label>
        <label for="p_search_type2" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type2" value="passport_only"/>Option 2</label>
        <label for="p_search_type3" class="radio inline span2"><input type="radio" name="p_search_type" id="p_search_type3" value="crba_only" />Option 3</label>
    </div>
</fieldset>
</div> 
```

CSS

```
legend.control-label {
    position:absolute;
    left:0;
}
fieldset.group{
    padding-left: 200px; /*width of legend[160px] + space of 40px*/
    position: relative;
} 
```

# sql - 我有 2 个日期字段，我想要属于 1 或两者的记录

> ID：15692109
> 
> 赞同：0
> 
> 时间：2013-03-28T21:03:19.337
> 
> 标签：sql, date, where

我有 2 个日期字段，我试图在 where 子句中使用 OR。举个例子，

```
Select customer_records.customer_id, customer_records.join_date, rejected_customers.rejected_date, status_lookup.status_description 
From customer_records, rejected_customers, status_lookup
Where status_lookup.status_id(+) = customer_records.status_id and customer_records.customer_id = rejected_customers.customer_id
and (customer_records.join_date between to_date('01-10-2012','dd-mm-yyyy') and to_date('01-11-2012','dd-mm-yyyy') or rejected_customers.rejected_date between to_date('01-10-2012','dd-mm-yyyy') and to_date('01-11-2012','dd-mm-yyyy') 
```

所以，基本结果应该是，当加入日期或被拒绝的日期落入我的日期字段时，我想要 customer_id。我似乎无法让它工作，任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:08:14.703

```
Select cr.customer_id, cr.join_date, rej.rejected_date
from customer_records cr left join rejected_customers rej on cr.customer_id=reg.customer_id
where (cr.join_date between to_date('01-10-2012','dd-mm-yyyy') and to_date('01-11-2012','dd-mm-yyyy')) or (rej.rejected_date between to_date('01-10-2012','dd-mm-yyyy') and to_date('01-11-2012','dd-mm-yyyy')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:07:52.190

当你说你似乎无法让它工作时，我认为你运行了查询并且你没有得到预期的结果并且你没有得到任何错误。有时，一些日期字段与时间分数一起存储在数据库中。所以你需要使用“trunc”功能。请参阅 Oracle 数据库中的此示例：

```
SQL> select to_char(sysdate,  'dd/mm/yyyy hh:mi:ss') date_no_trunc from dual;

DATE_NO_TRUNC
-------------------
28/03/2013 10:04:27

SQL> select to_char(trunc(sysdate),  'dd/mm/yyyy hh:mi:ss') date_with_trunc from dual;

DATE_WITH_TRUNC
-------------------
28/03/2013 12:00:00

SQL> 
```

所以你需要改变你的查询是这样的：

```
Select c.customer_id,
       c.join_date,
       r.rejected_date
From   customer_records c,
       rejected_customers r
Where  c.customer_id = r.customer_id
and   ( trunc(c.join_date) between to_date('01-10-2012','dd-mm-yyyy') and to_date('01-11-2012','dd-mm-yyyy')
        or
        trunc(r.rejected_date) between to_date('01-10-2012','dd-mm-yyyy') and to_date('01-11-2012','dd-mm-yyyy')
      ) 
```

此外，为长表名提供别名总是一个好主意，这会使您的查询更短并使用更少的内存。

# c++ - GCC 4.8 正在反转可变参数模板参数包

> ID：15692112
> 
> 赞同：23
> 
> 时间：2013-03-28T21:03:32.993
> 
> 标签：c++, templates, gcc, c++11, variadic

我刚刚升级到 GCC 4.8，一些可变参数模板代码不再正确编译。我在下面创建了一个最小的示例：

```
#include <tuple>
#include <iostream>

template <class T, class ... OtherT>
void something( std::tuple<T, OtherT...> & tup )
{
  std::cout << std::get<1>(tup) << std::endl;
}

int main()
{
  std::tuple<int, char, bool> myTuple(3, 'a', true);

  // Compiles OK in GCC 4.6.3 but NOT 4.8
  something<int, char, bool>( myTuple );

  // Compiles OK in GCC 4.8 but NOT 4.6.3
  something<int, bool, char>( myTuple );

  return 0;
} 
```

其输出将是（如果注释掉 GCC 4.6.3/4.8 的不正确版本）'a'。

GCC 4.6.3 产生的错误是：

```
./test.cpp: In function ‘int main()’:
./test.cpp:18:39: error: no matching function for call to ‘something(std::tuple<int, char, bool>&)’
./test.cpp:18:39: note: candidate is:
./test.cpp:5:6: note: template<class T, class ... OtherT> void something(std::tuple<_Head, _Tail ...>&) 
```

GCC 4.8 产生的错误是：

```
./test.cpp: In function ‘int main()’:
./test.cpp:15:39: error: no matching function for call to ‘something(std::tuple<int, char, bool>&)’
   something<int, char, bool>( myTuple );
                                       ^
./test.cpp:15:39: note: candidate is:
./test.cpp:5:6: note: template<class T, class ... OtherT> void something(std::tuple<_El0, _El ...>&)
 void something( std::tuple<T, OtherT...> & tup )
      ^
./test.cpp:5:6: note:   template argument deduction/substitution failed:
./test.cpp:15:39: note:   mismatched types ‘bool’ and ‘char’
   something<int, char, bool>( myTuple ); 
```

似乎在 GCC 4.8 中，可变参数模板类型在扩展时被反转，但奇怪的是，它们并没有“真正”被反转，正如输出所证明的那样——无论排序如何，它都将是“a”。Clang 3.3 与 GCC 4.6.3 输出一致。

这是 GCC 4.8 中的错误还是其他错误？

编辑：在此处向 GCC 添加了错误报告：http: //gcc.gnu.org/bugzilla/show_bug.cgi?id= [56774](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56774)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T21:11:54.597

这对我来说似乎是一个错误，GCC 4.8.0 和 GCC 4.7.2 似乎受到了影响。Clang 3.2 和 GCC 4.6.3 同意第一次调用`something`是正确的，我真的看不出 GCC 4.7.2+ 如何认为第二次调用是可以接受的。

我会说：报告针对 GCC 的错误。

* * *

**更新：**我在 GCC 错误报告中添加了一个简约示例，只是为了帮助他们并证明这是一个纯编译器错误，与`std::tuple`. 这是简化的代码：

```
template< typename... > struct X {};

template< typename T, typename... Ts >
void f( X< T, Ts... >& ) {}

int main()
{
    X< int, bool, char > t;
    f< int, char, bool >(t);
} 
```

* * *

**更新 2：**现在已为 GCC 4.7.3、GCC 4.8.1 和 GCC 4.9 修复 - 感谢 GCC 团队的快速修复！

# jquery - jquery 和 html 输入标签

> ID：15692113
> 
> 赞同：0
> 
> 时间：2013-03-28T21:03:44.643
> 
> 标签：jquery

大家好，我真的希望你能帮助我解决这个问题，

所以我有这个滑块，我需要知道的是如何使用 jquery 提取信息，我只需要滑块的名称和当前设置的值。

```
<div class="Filter">
  <div class="FilterName">
    <p>saturation</p>
  </div>

  <div class="FilterSetting">
    <input type="range" min="-100" max="100" step="1" value="0" data-filter="saturation"        >
    <span class="FilterValue">0</span>
  </div>
</div> 
```

这是我试图提取我需要的信息我实际上在这个网站上找到了这个例子，

```
function displayValues()
    {
        var bright = $('#saturation').slider('value');
        alert('bright');
    } 
```

提前感谢你们给我的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:11:24.860

尝试以下操作：

```
var value = $('#brightness').val();
alert(value); 
```

在这个 jsfiddle 中工作：http: [//jsfiddle.net/jatin146/dqmXf/](http://jsfiddle.net/jatin146/dqmXf/)

================================

或者你可以这样做：

```
var value = $('#brightness').attr('value');
alert(value); 
```

==============================

看起来滑块（）是一个不存在的方法......你在使用任何插件吗？

# jquery - scrollTop 回调

> ID：15692118
> 
> 赞同：5
> 
> 时间：2013-03-28T21:03:57.137
> 
> 标签：jquery

```
$("html").scrollTop($(document).height(),function(){
    $("#page_jump_input").focus();
}); 
```

我无法获得回调函数来处理该方法`scrollTop()`。

滚动有效，但回调不会。我哪里错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T21:15:00.937

这可以解决你的问题

```
$('html').animate({
   scrollTop: $(document).height()
}, function(){
   $("#page_jump_input").focus();
}); 
```

它使用 jQuery [animate](http://api.jquery.com/animate/)因为`scrollTop()`没有回调函数。

# c# - 从类中动态获取属性值

> ID：15692119
> 
> 赞同：0
> 
> 时间：2013-03-28T21:04:01.193
> 
> 标签：c#, winforms

我有一个类，我想动态地从中检索一个属性

这是课堂上的一个样本

```
namespace TEST
{
    public class Data
    {
        public string Username { get; set; }
        public string Password { get; set; }
    }
} 
```

我正在尝试使用 GetProperty，但它总是返回 null

```
static object PropertyGet(object p, string propName)
{
    Type t = p.GetType();
    PropertyInfo info = t.GetProperty(propName);
    if (info == null)
        return null;
    return info.GetValue(propName);
} 
```

像这样

```
 var data = new Data();

    var x = PropertyGet(data, "Username");
    Console.Write(x?? "NULL"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:07:05.830

此行是错误的，应该为您抛出异常：

```
return info.GetValue(propName); 
```

您需要传入从中提取属性的对象，即

```
return info.GetValue(p); 
```

另请注意，当前`data.Username` *为*空。你想要这样的东西：

```
var data = new Data { Username = "Fred" }; 
```

我已经验证了通过这两个更改，它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:17:09.513

这有效：

```
public class Data
{
    public string Username { get; set; }
    public string Password { get; set; }
}

public class Program
{
    static object PropertyGet(object p, string propName)
    {
        Type t = p.GetType();
        PropertyInfo info = t.GetProperty(propName);

        if (info == null)
        {
            return null;
        }
        else
        {
            return info.GetValue(p, null);
        }
    }

    static void Main(string[] args)
    {
        var data = new Data() { Username = "Fred" };

        var x = PropertyGet(data, "Username");
        Console.Write(x ?? "NULL");
    }
} 
```

# xslt - 使用 XSLT 选择整个文档中的最后一个元素

> ID：15692123
> 
> 赞同：0
> 
> 时间：2013-03-28T21:04:13.370
> 
> 标签：xslt, xpath, xslt-2.0, saxon

我想在文档中的任何位置选择与特定模式匹配的最后一个节点。

我正在尝试类似的东西

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <xsl:copy-of select="//node_name[last()]"/>
  </xsl:template>
</xsl:stylesheet> 
```

但是，当在以下文档上使用 Saxon 9.4 运行它时：-

```
<a>
  <node_name attr="1"/>
  <b>
    <c>
    </c>
    <node_name attr="2"/>
  </b>
</a> 
```

我在复制语句所在的位置得到这个输出：-

```
<node_name attr="1"/><node_name attr="2"/> 
```

而我实际上想要输出： -

```
<node_name attr="2"/> 
```

我在这里错过了什么？

此外，我的文档的性质是，我事先不知道该节点的确切路径是什么（因为它由一堆递归元素组成）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:24:49.103

您不是在寻找`node_name`最后一个，而是在寻找所有节点名称中的最后一个。因此，以下 XPath 表达式应该可以工作：

```
(//node_name)[last()] 
```

# java - 旧正则表达式代码的必要说明

> ID：15692125
> 
> 赞同：4
> 
> 时间：2013-03-28T21:04:27.350
> 
> 标签：java, regex

我遇到了几年前自己编写的旧代码。但是，现在，我不知道它为什么会起作用。在继续进行代码更改之前，我需要了解它的工作原理。

我有 CSV 格式的数据

```
"abc",123456789,"def" 
```

有时，服务器会返回我

```
"abc",123,456,789,"def" 
```

因此，我编写了以下代码来解决它。

```
public class Sandbox {

    private static final Pattern digitPattern = Pattern.compile("(\",)|,(?=[\\d,]+,\")");
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // "abc",123,456,789,"def"
        String data = "\"abc\",123,456,789,\"def\"";

        final String result = digitPattern.matcher(data).replaceAll("$1");

        // "abc",123456789,"def"
        System.out.println(result);
    }
} 
```

但是，当我回顾代码时，我不知道为什么`|,`并且`[\\d,]+`能够帮助我删除逗号。输入的哪一部分`|,`匹配？

非常感谢您逐步解释解析工作的方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:17:51.100

你正在更换

```
(\",)|,(?=[\\d,]+,\") 
```

和

```
$1 
```

换句话说，您将在**双引号之后立即留下任何逗号**（即`(\",)`, 捕获到`$1`），但**删除后跟 1 个或多个数字和逗号、逗号和双引号的逗号**（这是先行断言，`(?=[\\d,]+,\")`）。使用交替 ( `|`) 时，它是从左到右的优先级，所以如果前半部分匹配，*即*逗号紧跟在双引号后面，那么就是这样，所以引擎继续前进，寻找下一个逗号。如果后半部分匹配，`$1`则不会被捕获，因此有效地将匹配项（逗号）替换为空字符串。

# c# - 非托管代码中的内存泄漏？

> ID：15692126
> 
> 赞同：2
> 
> 时间：2013-03-28T21:04:31.920
> 
> 标签：c#, memory-leaks, unmanaged

我已经追踪了很远的泄漏，但我自己似乎无法理解（修复）它。我首先使用 ANTS 内存分析器来确保我的代码实际上是在堆叠内存。它从使用 25 MB 开始，但在一个小时左右的时间内使用超过 100 MB。我正在为其编写此代码的朋友实际上一直在使用这个有问题的程序，他用了整个 18 GB 的内存并得到了内存不足的异常。

泄漏部分对程序来说并不重要，但如果没有 RefreshSessions() 方法，它几乎没有用处。

我一直在从 Code Project扩展项目[Vista Core Audio API Master Volume Control 。](http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control)

这是似乎泄漏的部分。通过不使用它进行测试，然后它不会泄漏。

更新：

```
public void RefreshSessions()
    {
        Marshal.ThrowExceptionForHR(_AudioSessionManager.GetSessionEnumerator(out _SessionEnum));
        _Sessions.Refresh(_SessionEnum);
    } 
```

（从这里删除了类代码）

我没有写太多代码，所以我可能遗漏了一些东西，但如果需要更多细节，你可以实际下载源代码，或者我可以尽我所能回答。

（此处删除了不必要的代码）

使用这个简单的控制台应用程序测试了泄漏：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            MMDeviceEnumerator DevEnum = new MMDeviceEnumerator();
            MMDevice device = DevEnum.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);

            Console.ReadKey();
            int i = 0;
            while (i < 10000)
            {
                device.AudioSessionManager.RefreshSessions();
                i++;
            }
            Console.ReadKey();
        }
   }
} 
```

更新 2

我想我把它修好了。必须运行一些更长的测试，但至少看起来内存使用情况已经稳定。这个想法来自 dialer，他找到了 C++ 泄漏的修复方法。

```
public void RefreshSessions()
        {
            _Sessions.Release(); //added this
            IAudioSessionEnumerator _SessionEnum;
            Marshal.ThrowExceptionForHR(_AudioSessionManager.GetSessionEnumerator(out _SessionEnum));
            _Sessions.Refresh(_SessionEnum);
        } 
```

这是中的部分`SessionCollection`：

```
public void Release()
        {
            Marshal.ReleaseComObject(_AudioSessionEnumerator);
        } 
```

这不完全是建议的代码拨号器（我最终还是使用了它），但仍然如此。正如他所说，这可能不是实现这一目标的最佳方式，但我会继续使用它，因为它似乎对我的应用程序没有任何不利影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:35:08.753

# 另一个编辑

```
public void RefreshSessions()
{
    if (_SessionEnum != null)
    {
        Marshal.ReleaseComObject(_SessionEnum);
    }
    Marshal.ThrowExceptionForHR(_AudioSessionManager.GetSessionEnumerator(out _SessionEnum));
} 
```

上面的代码显式释放了 SessionEnum 并修复了 C# 中的泄漏。**不过，这可能应该以更好的方式处理。**

**编辑：**

下面的 C++ 程序等效于您在循环测试程序中所做的。`Release`for 循环末尾的调用修复了泄漏。我今天需要去，也许你可以玩一会儿，试着自己解决。或者也许其他人可以找出并解释为什么 CLR 垃圾收集器不会`Release`在上面的 C# 程序中的某个时间点自动调用。

```
#include <stdio.h>
#include <tchar.h>
#include <audiopolicy.h>
#include <mmdeviceapi.h>

#define SAFE_RELEASE(p) { if ( (p) ) { (p)->Release(); (p) = 0; } }
#define CHECK_HR(hr) if (FAILED(hr)) { goto done; }

const CLSID CLSID_MMDeviceEnumerator = __uuidof(MMDeviceEnumerator);
const IID IID_IMMDeviceEnumerator = __uuidof(IMMDeviceEnumerator);
const IID IID_IAudioSessionManager2 = __uuidof(IAudioSessionManager2);

int _tmain(int argc, _TCHAR* argv[])
{
    HRESULT hr;

    CoInitialize(0);

    IMMDeviceEnumerator *deviceEnum = 0;
    CHECK_HR(hr = CoCreateInstance(
        CLSID_MMDeviceEnumerator, NULL,
        CLSCTX_ALL, IID_IMMDeviceEnumerator,
        (void**)&deviceEnum));;

    IMMDevice *endpoint = 0;
    CHECK_HR(deviceEnum->GetDefaultAudioEndpoint(eRender, eMultimedia, &endpoint));

    getchar();

    // lazy initialization as found in MMDevice.AudioSessionManager..get
    IAudioSessionManager2 *m = 0;
    CHECK_HR(endpoint->Activate(IID_IAudioSessionManager2, CLSCTX_ALL, 0, (void **)&m));

    for (int i = 0; i < 100000; i++)
    {
        IAudioSessionEnumerator *sessEnum = 0;
        m->GetSessionEnumerator(&sessEnum);
        sessEnum->Release(); // leak
    }

    getchar();

    printf("success");
    return 0;

done:
    printf("failure");
    return 1;
} 
```

* * *

老的

我的**猜测**：

`_AudioSessionManager.GetSessionEnumerator(out _SessionEnum)`产生一个枚举器。当你调用构造函数`SessionCollection(_SessionEnum)`时， then`_SessionEnum`正在被枚举。每个枚举步骤都会检索一个实际的*非托管*对象。

如果它是一个值类型，那么它*实际上*会被复制到会话集合中（请记住，`List(IEnumerable e)`构造函数*复制*每个元素）。然后副本将被垃圾收集，但原始对象是从非托管代码中分配的并产生泄漏。如果是这种情况，您应该在调用 Collection 构造函数后立即使用一些不受管理的内存释放函数释放内存。

如果它是引用类型，它也不会被释放，因为内存中的*实际*对象没有被垃圾回收，因为它是从非托管代码中分配的。如果是这种情况，您需要在不再需要对象时使用非托管库函数释放它们的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:30:26.580

如果您有非托管代码，_Sessions 内存何时释放？如果您只是重新分配私有字段，则永远不会释放内存。

这是一个例子： [http ://social.msdn.microsoft.com/forums/en-US/clr/thread/b2162d42-0d7a-4513-b02c-afd6cdd854bd](http://social.msdn.microsoft.com/forums/en-US/clr/thread/b2162d42-0d7a-4513-b02c-afd6cdd854bd)

您需要使用 dll 的方法来释放内存（C++ 中的 delete[]）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:44:13.430

.NET 总是能够轻松泄漏内存 - 或者更确切地说，它会处理未收集的垃圾，因为 GC 认为它们正在使用中，所以它们永远不会被清理。最著名的事件是 DARPA 挑战小组，他们相信这种炒作，并认为漏洞存在于他们的 C 驱动程序代码中，可怜的人。

从那时起，出现了相当多的内存泄漏分析器。[我认为Redgate 的 ANTS](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)中最著名的一个，但还有很多其他的。运行您的应用程序，查看哪些对象受到欢迎，查看哪些对象引用了它们，在正确的位置放置一些代码以取消引用它们（例如，更多的 Dispose 和/或 using 语句）。

# python - 打印字符映射

> ID：15692127
> 
> 赞同：2
> 
> 时间：2013-03-28T21:04:33.920
> 
> 标签：python, python-3.x

我需要编写一个程序，给出下表的输出：

```
chr:      !   "   #   $   %   &   '   (   )   *   +   ,   -   .   /  
asc: 32  33  34  35  36  37  38  39  40  41  42  43  44  45  46  47  
chr:  0   1   2   3   4   5   6   7   8   9   :   ;   <   =   >   ?  
asc: 48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  
chr:  @   A   B   C   D   E   F   G   H   I   J   K   L   M   N   O  
asc: 64  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  
chr:  P   Q   R   S   T   U   V   W   X   Y   Z   [   \   ]   ^   _  
asc: 80  81  82  83  84  85  86  87  88  89  90  91  92  93  94  95  
chr:  `   a   b   c   d   e   f   g   h   i   j   k   l   m   n   o  
asc: 96  97  98  99  100 101 102 103 104 105 106 107 108 109 110 111  
chr:  p   q   r   s   t   u   v   w   x   y   z   {   |   }   ~    
asc: 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 
```

任何帮助将不胜感激，尽管我想要求不要给出完整的答案，而是给出提示，所以对我来说有一些挑战。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T21:07:09.310

`ord`和函数将`chr`帮助您：

```
ord('a')  # 97
chr(97)   # 'a' 
```

添加到一个`range`，你就开始炖了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T21:08:04.283

```
for i in range(32,128):
    print (i, chr(i)) 
```

或者更接近你想要的：

```
#!/usr/bin/python3
def f(x,y):
    for i in range(x,y):
        print ('%3d '%i,end=''),
    print()
    for i in range(x,y):
        print ('%3s '%chr(i),end='')
    print()
for x in range(32,128,16):
    f(x,x+16) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:06:02.097

```
print '''chr: ! " # $ % & ' ( ) * + , - . /
asc: 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47
chr: 0 1 2 3 4 5 6 7 8 9 : ; < = > ?
asc: 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63
chr: @ A B C D E F G H I J K L M N O
asc: 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79
chr: P Q R S T U V W X Y Z [ \ ] ^ _
asc: 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95
chr: ` a b c d e f g h i j k l m n o
asc: 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111
chr: p q r s t u v w x y z { | } ~
asc: 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127''' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-16T07:49:01.083

提示：在给定范围的循环中使用循环，从而将行区分为案例。转换后的字符可以作为字符串一起添加，并且只有在添加了所有字符串后才打印该行。

完整的代码是：

```
for i in range (2,14): 
 #range(1,13 would have been correct as well, but I want to use the parity)
if i%2==0: #use even numbers for "chr..." line
  a="chr:  "
  for j in range(int((i/2-1)*16+32),int((i/2-1)*16+48)):
#range is a bit complicated due to the i-range
     b=str(chr(j))
#the following ifs are used to regulate space depending on character length
     if len(b)==1:
        s="   "
     if len(b)==2:
        s="  "
     if len(b)==3:
        s=" "
     a=a+b+s #add new characters with space to the previous ones
  print(a)
if i%2==1: #use odd numbers for asc:... line
  a="asc: "
  for j in range(int(((i-1)/2-1)*16+32),int(((i-1)/2-1)*16+48)):
     b=str(j) #in this line you need only the numbers
#the following ifs are used to regulate space depending on character length
     if len(b)==1:
        s="   "
     if len(b)==2:
        s="  "
     if len(b)==3:
        s=" "
     a=a+b+s
  print(a) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-04T17:05:34.063

一个好朋友给了我这个提示，它很有效！剩下要做的就是调整占位符：

```
 for i in range (0, 12):
       if i%2 ==0:
         content ="chr:"
         for j in range (32, 48):
            content=content+"   "+str(chr(j+(i//2)*16))
          print (content)    
        if i%2 ==1:
          content = "asc:"
          for j in range (32, 48):
             content=content+"  "+str(j+(i//2)*16)
          print (content) 
```

# javascript - 从另一个函数返回一个自执行函数 (IIFE)

> ID：15692128
> 
> 赞同：0
> 
> 时间：2013-03-28T21:04:39.140
> 
> 标签：javascript

```
(function($) {

    var foo = (function(){

        //some functions

    })();

    // I can access foo here
    var f = new foo();

})(jQuery);

// But obviously not here since it's in another scope 
```

如何返回`foo`窗口范围，以便可以在外部 IIFE 之外访问它？我试过`return foo;`了，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:06:07.197

只需将其设置为窗口属性：

```
(function($) {

    var foo = (function() {

        // some functions

    })();

    window.foo = foo;
//  ^^^^^^^^^^^^^^^^^

})(jQuery);

foo(); 
```

但是，将全局对象设置为对象的属性`window`通常被看不起。也许您可以通过管理自己的自定义“全局”对象来模拟这种能力。例如：

```
var global = {};

(function($) {

    global.foo = (function() {

        // define

    })();

})(jQuery);

global.foo(); 
```

这样，您在处理各种范围和对象时就不会发生名称冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:47:48.207

使用全局属性是通向意大利面条代码的快捷票。您的整个应用程序应该尽可能少地存在于全局对象中的元素中，理想情况下只有一个。

从长远来看，这更加优雅和安全。

```
var MYAPP = {}; //declaring with var is not necessary here, but it's good to keep constant.

MYAPP = (function($, MYAPP) {

    var foo = (function(){

        //some functions

    })();

    // enrich your object
    MYAPP.foo = foo;
    return MYAPP;

})(jQuery, MYAPP); 
```

然后你可以使用你的“丰富的” MYAPP 对象。

```
MAYPP.foo(); 
```

JavaScript 之神 Douglas Crockford 提出了一个类似的模式。

# php - 将 2 个数组合并为一个

> ID：15692130
> 
> 赞同：0
> 
> 时间：2013-03-28T21:04:41.943
> 
> 标签：php, arrays

我有2个数组：

```
 $ping_array = array();
  $ping_array[] = '400';
  $ping_array[] = '200';
  $ping_array[] = '600';
  $ping_array[] = '100';

  $timestamp_array = array();
  $timestamp_array[] = '2013-03-25 16:30:07';
  $timestamp_array[] = '2013-03-25 16:30:39';
  $timestamp_array[] = '2013-03-25 18:30:06';
  $timestamp_array[] = '2013-03-25 18:45:49'; 
```

我想做这样的东西（我不知道它是怎么称呼的）：

```
 $combined_array = array( 
                    'time' => $timestamp_array,
                    'ping' => $ping_array

                   ); 
```

所以后来我可以使用像这样组合的2个数组：

```
foreach ($combined_array as $ca=> $values) {
echo $values['ping'];
echo $values['time']; 
```

}

Thx 伙计们，这个 combine_array 太棒了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:08:45.847

试试这个：

```
$combined_array = array();
foreach ($ping_array as $key => $value){
    $combined_array[] = array(
        'time' => $timestamp_array[$key],
        'ping' => $value
    );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:07:01.117

那这个呢？

```
for ($i=0; $i<count($timestamp_array); $i++) {
     $combined_array[$i]["ping"] = $ping_array[$i];
     $combined_array[$i]["time"] = $timestamp_array[$i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:08:47.187

[PHPs array_combine](http://php.net/manual/en/function.array-combine.php)：“通过使用一个数组作为键和另一个作为它的值来创建一个数组”

```
$combined_array = array_combine($timestamp_array, $ping_array); 
```

然后只需重复类似于您包含的内容：

```
foreach($combined_array as $time => $ping) {
    echo $ping;
    echo $time;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:11:57.050

php'array_merge_recursive'怎么样？它完全符合您的要求。它可以在 php 4 及更高版本上找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T21:15:17.177

您可以做的是制作对象数组，如下所示：

```
class PingInfo {
    public $ping;
    public $time;
    public function PingInfo($ping, $time) {
        $this->ping = $ping;
        $this->time = $time;
    }
}

$pingInfos = array();
$pingInfos[] = new PingInfo('400', '2013-03-25 16:30:07');
$pingInfos[] = new PingInfo('300', '2013-03-25 16:50:13'); 
```

您可以像这样从两个数组构建它：

```
$pingInfos = array();
for ($i = 0; $i < count($ping_array); $i++)
    $pingInfos[] = new PingInfo($ping_array[$i], $timestamp_array[$i]); 
```

现在您可以像这样访问它：

```
foreach ($pingInfos as $pingInfo) {
    echo $pingInfo->ping;
    echo $pingInfo->time;
} 
```

# javascript - 服务器端浏览器

> ID：15692132
> 
> 赞同：9
> 
> 时间：2013-03-28T21:04:46.873
> 
> 标签：javascript, html, browser, server-side, html-rendering

我想知道是否可以在服务器端运行浏览器（特别是浏览器引擎）。我不只是要渲染一个页面，而是要让浏览器保持打开一段时间，运行一些 JS，做一些点击或按下一些键，同时获取图形输出。

有谁知道如何做到这一点？到目前为止，我唯一的想法是在 VNC、RDP 等会话中运行浏览器，但这对我来说似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T20:43:00.327

PhantomJS 做你所描述的。它基本上是一个无头浏览器 - [http://phantomjs.org/](http://phantomjs.org/)

您可以通过任何服务器端语言在服务器端运行它。请参阅下面的一些 NodeJS 和 PHP 集成模块

节点JS

[https://npmjs.org/package/node-phantom](https://npmjs.org/package/node-phantom)

[https://github.com/sgentle/phantomjs-node](https://github.com/sgentle/phantomjs-node)

PHP

[https://github.com/diggin/php-PhantomjsRunner](https://github.com/diggin/php-PhantomjsRunner)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:03:28.480

是的，很可能在服务器上运行 Web 浏览器。例如，Ubuntu Server 可以通过简单地安装 firefox 和 xserver 来运行 firefox。

```
$ sudo apt-get install firefox
$ sudo apt-get install xserver-xorg 
```

然后让firefox运行类型：

```
$ X 
```

这将留下一个空白屏幕，因为显示器上还没有运行任何应用程序。您需要使用 Ctrl-Alt-F2 切换回新终端。Ctrl-Alt-F1 现在持有 X 进程。

登录到新终端并将环境的显示变量设置为 :0 并启动 firefox。

```
$ export DISPLAY=:0
$ firefox & 
```

Firefox 现在应该正在运行，但您会注意到它有一些怪癖。如果您决定要继续进行此操作，则应安装窗口管理器。我会选择一个轻量级的平铺窗口管理器并运行 firefox 和任何其他应用程序需要在该窗口管理器中进行图形输出。

# php - 如果是特定子域，则使用 preg_match 替换 CSS 文件

> ID：15692133
> 
> 赞同：0
> 
> 时间：2013-03-28T21:04:59.707
> 
> 标签：php, regex, preg-match

正则表达式仍然是我的绊脚石。你们能帮帮我吗，伙计们？

我有这段代码用于 CMS 中的钩子。实际上它是包含在函数中的整个代码由主代码执行。

```
if (preg_match('#^/member/helpdesk/index.*#i', $_SERVER['REQUEST_URI'])) //do it only for specific url
{
    $event->replace('#(<h1>Tickets.*</h1>)#i', '$1<div>Some content</div>');
} 
```

但我真正想要的是检查页面是否属于子域`member.site.com`，找到`<link rel="stylesheet" href="http://site.com/orange.css"/>`并替换`orange.css`为`blue.css`

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:50:12.243

如果你想检查完整的域名使用

```
 if( strtolower($_SEVER['HTTP_HOST'])=='member.site.com' ){
      // other stuff
    } 
```

如果您需要使用 REQUEST_URI 检查它而不是

```
 if( preg_match('@^/member@i',$_SERVER['REQUEST_URI']) ){
      // other stuff
    } 
```

从完整的 url 检查主机名

```
 if( preg_match('@^(?:http[s]*://)?([^/]+)@i',$url) ){
      // other stuff
    } 
```

注意：请记住，如果真的有一条线，这将适用于捕捉线的开头

```
preg_match('@^/member/@i','/member/blahstuftuff/member/member/member/me?user=amigo&dir=mber/member') 
```

你可以在这里测试正则表达式：[RegExp 在线版](http://www.gskinner.com/RegExr/)

* * *

**编辑**

如果您想在用户位于成员站点并且如果已登录会话时更改 css，则只需设置：

`$_SESSION['member']=true;`登录时，

并在页面的一部分（标题或您计划编写 css 文件的任何地方）执行此操作：

**使用以'/member'**开头的请求 uri ：
`echo '<link rel="stylesheet" href="http://site.com/'.(preg_match('@^/member@i',$_SERVER['REQUEST_URI'])==true&&$_SESSION['member']==true?'blue.css':'orange.css').'"/>';`

使用会员域名**“member.site.com”**：
`echo '<link rel="stylesheet" href="http://site.com/'.(strtolower($_SEVER['HTTP_HOST'])=='member.site.com'&&$_SESSION['member']==true?'blue.css':'orange.css').'"/>';`

如果您希望即使是未登录的访客用户也能看到**blue.css**，而不仅仅是删除会话变量比较！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:53:51.140

我的意思是，从本质上讲，我认为您正在尝试这样做：

```
$str = '<html><head><link rel="stylesheet" href="http://site.com/style.css"/></head></html>'
if (preg_match('#member\.site\.com#i'), $_SERVER['HTTP_HOST'])){
    $str = preg_replace('#http://site\.com/style\.css#', 'http://site.com/style-member.css', $str);
} 
```

但是，也许您应该首先考虑您要替换的东西是如何生成的？也许这是一张可以放在那个位置的支票？此外，如果您要修改 html 文档，我强烈建议您使用某种解析器。如果你要做第一个，也许是这样的：

```
$head = '<head><link rel="stylesheet" href="http://site.com/style';
if (preg_match('#member\.site\.com#i'), $_SERVER['HTTP_HOST'])){
    $head .= '-member';
}
$head .= '.css"></head>'; 
```

但是如果你坚持解析一个html文档：

```
$str = '<html><head><link rel="stylesheet" href="http://site.com/style.css"/></head></html>'
$dom = new DOMDocument();
$dom->loadHTML($str);
if (preg_match('#member\.site\.com#i'), $_SERVER['HTTP_HOST'])){
    $links = $dom->getElementsByTagName('link');
    foreach ($links as $link){
        $attr = $link->attributes;
        if ($attr 
                && $attr->getNamedItem('rel')->nodeValue == 'stylesheet'
                && $attr->getNamedItem('href')->nodeValue == 'http://site.com/style.css'){
            $attr->getNamedItem('href')->nodeValue = 'http://site.com/style-member.css'
        }
    }
}
$str = $dom->saveHTML(); 
```

# php - WordPress评论顺序

> ID：15692135
> 
> 赞同：1
> 
> 时间：2013-03-28T21:05:09.907
> 
> 标签：php, wordpress

我在 WordPress 上使用评论插件，它使用评论功能留下评论，但这些跨越多个页面。现在默认情况下 WordPress 将较旧的评论放在最前面，但我想知道是否有办法颠倒该顺序。

我环顾四周，发现这可以解决问题：

```
<?php wp_list_comments(array('reverse_top_level' => false)); ?> 
```

但这不会改变所有评论的顺序，它只会改变该特定页面上显示的评论的顺序。所以在第一页你有可以追溯到 2011 年的评论，那时我希望这些是本月的评论。

先谢谢了。

这是网站 btw [http://www.redbarninc.com/customer-service/customer-reviews/](http://www.redbarninc.com/customer-service/customer-reviews/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:09:46.797

您可以在 wp-admin 的设置中更改它:)

设置 -> 讨论 -> 评论应在每页顶部显示 [older/newer] 评论。

# forms - 在 Magento 中提交自定义联系表单后重定向到自定义 php 文件

> ID：15692138
> 
> 赞同：-2
> 
> 时间：2013-03-28T21:05:17.463
> 
> 标签：forms, magento, action

我创建了一个 CMS 页面以包含我创建的表单，但希望将表单操作发送到 /template/contacts/report.phtml

目前我的表格中有这个，但我知道它不正确。

```
<form action="report.phtml" id="contactForm" method="post"> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T23:38:25.063

Magento 内置了 magento 标准联系表格。您可以从浏览器 www.yourdomain.com/contacts 访问它

这是由*app/code/core/Mage/Contacts/controllers/indexController.php*中的控制器和调用的函数管理的

> 公共*函数*indexAction()

表单上的操作位于[http://www.yourdomain.com/contacts/index/post/](http://www.yourdomain.com/contacts/index/post/)中，由同一个控制器和一个名为

> 公共*函数*postAction()

如果您的目标是完全自定义表单（通过添加额外的字段），Magento 方式，您需要创建一个扩展并拥有自己的控制器，您可以从浏览器访问它。

或者

黑客方式，您可以使用与 postAction() 相同的代码创建名为 customAction() 的新函数。您可以复制*app/code/ **core** /Mage/Contacts/controllers/indexController.php并在**app/code/* ***local*** */Mage/Contacts/controllers/indexController.php*中创建新文件

 **并复制整个

> 公共函数 postAction(){

直到函数结束。

> }

并将其粘贴并重命名函数 customAction()。如果你想自定义重定向。您可以更改 customAction() 中的代码

```
Mage::getSingleton('customer/session')->addSuccess(Mage::helper('contacts')->__('Your inquiry was submitted and will be responded to as soon as possible. Thank you for contacting us.'));
$this->_redirect('*/*/'); 
```

至

```
Mage::getSingleton('customer/session')->addSuccess(Mage::helper('contacts')->__('Your inquiry was submitted and will be responded to as soon as possible. Thank you for contacting us.'));
$this->_redirect('http://yourdomain/redirect_url'); 
```

您可以将表单上的操作指向[http://www.yourdomain.com/contacts/index/custom/](http://www.yourdomain.com/contacts/index/custom/)

希望这会有所帮助。**

# linux-kernel - 为 Linux x86_64 上的 32 位进程报告了虚假的第一个系统调用参数？

> ID：15692139
> 
> 赞同：2
> 
> 时间：2013-03-28T21:05:21.750
> 
> 标签：linux-kernel

在 Linux x86_64 系统（至少运行 2.6.32 的 RHEL 6.4）上，`/proc/pid/syscall`32 位进程报告的第一个系统调用参数似乎是虚假的……我想确定原因。

例如，如果一个进程在执行 openat(AT_FDCWD, ...) 时被阻止，我会在`/proc/pid/syscall`...

64 位：

```
257 0xffffffffffffff9c ... 
```

32 位：

```
295 0xffffffff810495c0 ... 
```

`AT_FD_CWD == -100 == 0xffffffffffffff9c`，所以 64 位的情况看起来是正确的，但 32 位的值似乎已被破坏（其他参数看起来正确）。

我知道我可以在堆栈顶部找到一个 struct pt_regs，我可以通过 ...

```
#define task_pt_regs(tsk)       ((struct pt_regs *)(tsk)->thread.sp0 - 1) 
```

我看到那里的虚假价值。

然而...... strace 似乎能够找到第一个参数的正确值，即使在 32 位的情况下也是如此。它执行 ptrace(PTRACE_PEEKUSER)，AFAIK 只是查看相同的结构 pt_regs。

我一定遗漏了一些东西...... strace 发生了什么神奇的事情，它允许它通过 PTRACE_PEEKUSER 查看有效的寄存器值？如通过 所见，破坏第一个参数会发生什么`/proc/pid/syscall`？

# c# - 使用 AJAX 调用 C# Web 服务时出错 - 结果是数据集

> ID：15692143
> 
> 赞同：0
> 
> 时间：2013-03-28T21:05:33.867
> 
> 标签：c#, ajax, web-services

这是我对 C# Web 服务和 AJAX 的第一次体验……我想构建一个像 Facebook 这样的页面，当我们向下滚动时它会加载下一组记录……

我正在尝试使用该代码，但它**根本**不起作用......你能帮帮我吗？

**HTML 代码**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="auto-load.aspx.cs" Inherits="auto_load" %>

<!DOCTYPE html>

<html>
    <head>
        <title>AEM - Comments</title>
    <link href="Style.css" rel="Stylesheet" />

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>
    <script>
        var isLoading = false;
        var v_page_number = 1, v_page_size = 5;

        $(document).ready(function () 
        {
            loadComments();

            $(window).scroll(function () 
            {
                // Start loading when 200px from the bottom
                if ($(window).scrollTop() + $(window).height() > $('#main').height() - 200 && !isLoading) 
                {
                    loadComments();
                }
            });
        });

        function loadComments() 
        {
            isLoading = true;

            $.ajax(
            {
                    type: 'POST',
                    url: "auto-load.aspx/GetComment",
                    data: '{ "p_page_number" : ' + v_page_number + ', "p_page_size" : ' + v_page_size + ' }',
                    //contentType: "application/json; charset=utf-8",
                    dataType: "xml",
                    success: OnSuccess,
                    error: OnError
            });

        }

        // 
        function OnSuccess(data)
        {
            ShowXMLData(data);
        }

        // 
        function OnError(p_error)
        {

            if (p_error.status != 200) 
            { 
                $("#loading").html('Error:' + p_error.responseText + '<br /><br /><br /> Status: ' + p_error.status);
                //alert('Error:' + err.responseText + '  Status: ' + err.status); 
            }
        }

        function ShowXMLData(xml)
        {
            debugger;
            try
            {
                var v_comment = $(xml).find('Table');

                for (var i = 0; i < v_comment.length; i++) 
                {
                    var v_time_log_id  = v_comment[i]["time_log_id"];
                    var v_description  = v_comment[i]["description"];
                    var v_hours        = v_comment[i]["hours"];

                    // 
                    var v_comment = $('<div>');
                    var v_h2_description = $('<h2>');
                    var v_span_hours = $('<span>');

                    v_h2_description.html(v_description + ' / Id = ' + v_time_log_id + '</h2>');
                    v_span_hours.html('Number of hours: ' + v_hours + '</span>');

                    v_comment.append(v_h2_description);
                    v_comment.append(v_span_hours);
                    v_comment.append('</div>');

                    $('#feed').append(v_comment);

                });
            }

            catch(err)
            {
                var txt  = "There was an error on this page.\n\n";
                    txt += "Error description: " + err.description + "\n\n";
                    txt += "Click OK to continue.\n\n";

                alert(txt);
            }
        }

    </script>
</head>
<body>
    <form id="frmMain" runat="server">
    <div id="main">
        <h1>AEM - Comments</h1>
        <p>Showing Comments for AEM</p>
        <div id="feed">
        </div>
        <div id="loading">
            Loading Comments...
        </div>
    </div>
    </form>
</body> 
```

**C# 代码**

```
 using System;
    using System.Data;
    using System.Configuration;
    using System.Collections;
    using System.Web;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Web.UI.WebControls.WebParts;
    using System.Web.UI.HtmlControls;

    using LibAEM;

    using System.Data.SqlClient;
    using System.Web.Services;

    public partial class auto_load : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        [WebMethod]
        public string GetComment(int p_page_number, int p_page_size)
        {

            // ------------------------------------------------------------------------------------------
            // Variable declaration
            // ------------------------------------------------------------------------------------------
            string v_connection_string = LibNamtek.CConnection.GetDBConnection();   // Data Source=192.168.2.40;Initial Catalog=AEM;User ID=aem;Password=aem
            SqlConnection v_connection = new SqlConnection(v_connection_string);

            try
            {
                // ------------------------------------------------------------------------------------------
                // Main program
                // ------------------------------------------------------------------------------------------

                // Open Connection
                v_connection.Open();

                SqlCommand cmd = new SqlCommand("pr_get_paging", v_connection);
                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.Add("@p_page_number", SqlDbType.Int);
                cmd.Parameters["@p_page_number"].Value = p_page_number;

                cmd.Parameters.Add("@p_page_size", SqlDbType.Int);
                cmd.Parameters["@p_page_size"].Value = p_page_size;

                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataSet ds = new DataSet("TimeLog");
                da.Fill(ds);

                string v1 = ds.GetXml();
                return v1;
            }

            catch (Exception ex)
            {
                throw ex;
            }

            finally
            {
                if (v_connection != null)
                {
                    v_connection.Close();
                }
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:13:17.977

您能否向我们展示您的 Web 服务正在检索的 XML 示例？您的 XML 可能包含在“d”标记中，但如果不查看 AJAX 调用的结果，就无法判断。

# css - 如何使最后一个孩子的导航子菜单反转

> ID：15692146
> 
> 赞同：0
> 
> 时间：2013-03-28T21:05:39.683
> 
> 标签：css

我有一个下拉导航，想要反转最后一个孩子留在页面上。我怎样才能做到这一点？

```
/* Sub Menu */
/* Drop Down Box BKGD  & STYLE*/
.menu ul {
    z-index:8000;
    position: absolute;
    top: 45px;
    left:0px;
    opacity: 0;
    background:url(../images/BKGDRepeat3_03.png);
    -moz-box-shadow:0 3px 5px #666;
    -webkit-box-shadow:0  3px 5px #666;
     box-shadow: 0  3px 5px #666;
    -webkit-border-radius: 5px 5px 5px 5px;
    -moz-border-radius: 5px 5px5px 5px;
    border-radius: 5px 5px5px 5px;
    -webkit-transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    transition: opacity .25s ease .1s;
}

.menu ul:last-child {
    color:#C00;
    right:0px;
    left:auto;
} 
```

html

```
<div style="clear:both" id="nav_bar"> 
<ul class="menu">

    <li><a href="index.php">Home</a></li>
    <li><a href="about.php">one</a>
        <ul>
            <li><a href="#">One</a></li>
            <li><a href="#">Two</a></li>

        </ul>
    </li>
    <li><a href="#">Directory</a>
        <ul>
            <li><a href="#">One</a></li>
            <li><a href="#">Two</a></li>

        </ul>
    </li>

    <li><a href="#">Contact</a>
        <ul>
            <<li><a href="#">One</a></li>
            <li><a href="#">Two</a></li>

        </ul>
     </li>

</ul> <!-- end .menu -->
</div> 
```

这目前影响所有子菜单，而不仅仅是最后一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:12:57.253

没有看到您的 html... 听起来您需要针对 li，而不是 ul。

```
.menu ul li:last-child {
    color:#C00;
    right:0px;
    left:auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:17:23.373

做这个：

```
.menu ul:last-of-type {
    //
} 
```

假设每个 ul 是一个子菜单。否则，您正在寻找 li 的样式。

# python - 使用 sys.stdin 进行多行输入

> ID：15692149
> 
> 赞同：5
> 
> 时间：2013-03-28T21:05:45.180
> 
> 标签：python, sys

我有以下功能：

```
def getInput():
    # define buffer (list of lines)
    buffer = []
    run = True
    while run:
        # loop through each line of user input, adding it to buffer
        for line in sys.stdin.readlines():
            if line == 'quit\n':
                run = False
            else:
                buffer.append(line.replace('\n',''))
    # return list of lines
    return buffer 
```

在我的函数 takeCommands() 中调用它，调用它来实际运行我的程序。

但是，这没有任何作用。我希望将每一行添加到一个数组中，一旦 line == 'quit' 它停止接受用户输入。我都试过了`for line in sys.stdin.readlines()`and `for line sys.stdin`，但它们都没有注册我的任何输入（我在 Windows 命令提示符中运行它）。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T22:00:09.743

因此，将您的代码从函数中取出并运行一些测试。

```
import sys
buffer = []
while run:
    line = sys.stdin.readline().rstrip('\n')
    if line == 'quit':
        run = False
    else:
        buffer.append(line)

print buffer 
```

变化：

*   删除了“for”循环
*   使用“readline”而不是“readlines”
*   输入后去掉'\n'，因此之后的所有处理都容易得多。

其他方式：

```
import sys
buffer = []
while True:
    line = sys.stdin.readline().rstrip('\n')
    if line == 'quit':
        break
    else:
        buffer.append(line)
print buffer 
```

取出“运行”变量，因为它并不是真正需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T21:08:28.830

我会用`itertools.takewhile`这个：

```
import sys
import itertools
print list(itertools.takewhile(lambda x: x.strip() != 'quit', sys.stdin)) 
```

另一种方法是使用 2 参数`iter`形式：

```
print list(iter(raw_input,'quit')) 
```

这样做的好处是`raw_input`可以处理所有的行缓冲问题，并且它已经为您去除换行符——但是如果用户忘记将 a 添加`quit`到脚本中，它将循环直到内存不足。

这两个都通过了测试：

```
python test.py <<EOF
foo
bar
baz
quit
cat
dog
cow
EOF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:41:01.197

此代码有多个单独的问题：

```
while run:
    # loop through each line of user input, adding it to buffer
    for line in sys.stdin.readlines():
        if line == 'quit':
            run = False 
```

* * *

首先，您有一个内部循环，直到所有行都被处理后才会结束，即使您在某个时候键入“quit”。设置`run = False`不会跳出那个循环。它不会在您键入“quit”后立即退出，而是会继续运行，直到查看完所有行，*然后*在您在任何时候键入“quit”时退出。

您可以通过`break`在`run = False`.

* * *

但是，不管有没有这个修复，如果你在第一次通过外循环时*没有*输入“quit”，因为你已经阅读了所有的输入，没有其他东西可以阅读，所以你只会继续运行一个空的内循环一遍又一遍，你永远无法退出。

您有一个循环，意思是“读取并处理所有输入”。你想只做*一次*。那么，外循环应该是什么？无论如何都不应该；做某事的方法是不使用循环。`run`所以，要解决这个问题，摆脱`while run:`循环；只需使用内部循环。

* * *

然后，如果您键入“quit”，`line`实际上将是`"quit\n"`，因为`readlines`不会删除换行符。

您可以通过测试`"quit\n"`或`strip`ping 行来修复此问题。

* * *

最后，即使你解决了所有这些问题，在做任何事情之前你仍然会永远等待。`readlines`返回`list`一行。它可能做到这一点的唯一方法是读取所有将出现的行`stdin`。在阅读完所有这些行之前，您甚至无法开始循环。

当标准输入是一个文件时，文件结束时会发生这种情况，所以这并不算*太*糟糕。但是当标准输入是 Windows 命令提示符时，命令提示符永远不会结束。*因此，这需要永远。您不必开始处理行列表，因为等待行列表需要很长时间。

解决方案是不使用`readlines()`. 真的，从来没有一个很好的理由来呼吁或不呼吁`readlines()`任何事情。`stdin`任何可以`readlines`工作的东西都*已经*是一个充满线条的可迭代对象，就像给你的那样`list`，`readlines`除了它是“懒惰的”：它可以一次给你一个线条，而不是等待并一次给你所有线条。（即使你真的需要这个列表，也可以`list(f)`代替`f.readlines()`.）

所以，而不是`for line in sys.stdin.readlines():`，只是做`for line in sys.stdin:`（或者，更好的是，完全替换显式循环并使用一系列迭代器转换，如 mgilson 的回答。）

* * *

JBernardo、Wing Tang Wong 等提出的修复都是正确且必要的。他们都没有解决您的问题的原因是，如果您有 4 个错误并修复了 1 个，您的代码仍然无法正常工作。这正是为什么“不起作用”不是衡量编程中任何事情的有用衡量标准的原因，您必须调试实际出了什么问题才能知道您是否正在取得进展。

* * *

`stdin`*我对永远不会完成有点撒谎。如果您键入 control-Z（您可能需要也可能不需要在它后面加上一个 return），那么`stdin`就完成了。但是，如果您的任务是让它在用户键入“quit”< 时立即退出，则只有在用户键入“quit”然后返回时才退出的东西，control-Z，再次返回可能不会被认为是成功的。

# php - PHP 未定义索引 - 使用 isset() 开关语句

> ID：15692150
> 
> 赞同：-1
> 
> 时间：2013-03-28T21:05:54.327
> 
> 标签：php, arrays

我知道有很多关于这个问题的帖子。我看过很多帖子，但出于某种原因，我似乎可以找到答案！

任何帮助将不胜感激。我对 PHP 还很陌生，所以如果我说错了什么，我深表歉意。

我正在尝试使用数组创建一个基本的篮子系统。我在网上不断收到一个错误未定义的索引`$_SESSION['cart'][$app_ID]++;`有趣的是它所有的功能都正确！我想解决错误，而不仅仅是关闭错误报告。

```
 if(isset($_GET['id'])){

$app_ID = $_GET['id'];   //the item id from the URL 
$action = $_GET['action']; //the action from the URL 

$total = 0;

if (isset($app_ID)){

switch($action) {       

    case "add":
        $_SESSION['cart'][$app_ID]++;
    break;

    case "remove":
        $_SESSION['cart'][$app_ID]--; 
        if($_SESSION['cart'][$app_ID] == 0) unset($_SESSION['cart'][$app_ID]); 
    break;

    case "empty":
        unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart. 
    break; 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:09:15.023

要使用 $_SESSION，您必须先调用 session_start ()，然后再发送任何标头信息

我希望这对你有帮助，

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:09:21.297

```
session_start(); // at the top

case "add":
    if (isset( $_SESSION['cart'][$app_ID] )){
        $_SESSION['cart'][$app_ID]++;
    } else {
        $_SESSION['cart'][$app_ID] = 1;
    }
break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:17:12.420

值得一提的是，这只是一个通知，而不是一个错误。您基本上必须检查数组索引是否存在并在引用它之前对其进行初始化。

```
if (isset($app_ID)) {
    switch($action) {       

        case "add":
            if (!isset($_SESSION['cart']) {
                $_SESSION['cart'] = array();
            }

            if (!isset($_SESSION['cart'][$app_ID]) {
                $_SESSION['cart'][$app_ID] = 0;
            }

            $_SESSION['cart'][$app_ID]++;
        break;

        case "remove":
            if (isset($_SESSION['cart'] && isset($_SESSION['cart'][$app_ID]) {
                $_SESSION['cart'][$app_ID]--; 
                if ($_SESSION['cart'][$app_ID] <= 0) {
                   unset($_SESSION['cart'][$app_ID]);
                }
            }
        break;

        case "empty":
            unset($_SESSION['cart']); //unset the whole cart, i.e. empty the cart. 
        break;
    }
} 
```

为了安全起见，我也改`== 0`了。`remove``<= 0`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:24:42.427

您应该在任何地方使用`isset($_SESSION['cart'][$app_ID])`，也许`isset( $_SESSION['cart'])`在此之前使用。

通常，您必须确保在引用它之前存在数组索引。您可以使用isset() 或在这种情况不可避免的情况下编写代码（例如，在更早的地方添加索引）来执行此操作。

我想你问题的另一部分是你的代码为什么有效。解释很简单。当您引用不存在的索引时，会发出您观察到的通知（在非生产环境中），但这不会停止程序。由于没有要使用的内容，`null`因此为该数组值返回。所以该值被假定为null，并且`++`取值，作为整数，并且null被转换为整数0，然后加一。由于`++`是一个写入操作符，它将为您创建数组项。由于`$a++`被定义为`$a=$a+1`很容易看出您所写的`$_SESSION['cart'][$app_ID]=$_SESSION['cart'][$app_ID]+1`内容依次`$_SESSION['cart'][$app_ID]=null+1`执行`null+1`为`0+1`产生 0，因此将 0 分配给（以前缺少的）数组项。希望这有助于看清楚。;)

# python - Python - 无需预定义即可定义新数组或变量

> ID：15692155
> 
> 赞同：-1
> 
> 时间：2013-03-28T21:06:10.027
> 
> 标签：python, arrays, eval

```
n = input(': ')

eval('Array'+n)=[] 
```

我想它会是这样的，但这只会产生 - '不能分配给函数调用'，有什么帮助吗？如果可以的话，那就是...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:07:46.683

使用字典：

```
arrays = {}
n = input(': ')
arrays['Array%s' % n] = [] 
```

# jquery - 如何更改添加了哪些元素 parsley-error

> ID：15692164
> 
> 赞同：0
> 
> 时间：2013-03-28T21:06:42.290
> 
> 标签：jquery, parsley.js

我正在使用 parsley.j，当发生错误时，它会向输入元素添加一个 parsley-error 类。有没有办法改变它，以便将它添加到链上的另一个元素。

```
<div class="control-group email">
 <div class="controls"><div class="input-prepend">
  <span class="add-on">
  </span>
  <input class="string email optional input parsley-validated parsley-error" data- trigger="change" data-type="email" id="user_email" name="user[email]" placeholder="Enter your email" size="200" type="text" value="">
  </div>
 </div>
</div> 
```

我想将 parsley-error 类添加到第一个 div 而不是输入类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:09:41.030

如果你看这里[http://parsleyjs.org/documentation.html#parsleyclasses](http://parsleyjs.org/documentation.html#parsleyclasses)，你可以通过一个回调函数在 Parsley 配置中确定你希望 Parsley 将错误/成功类放在哪个 dom 元素上

```
$('#form').parsley( {
    errors: {
        classHandler: function ( elem, isRadioOrCheckbox ) {
            return $( elem ).parent();
        }
    }
} ); 
```

如果这样做，请不要删除该`data-validate="parsley"`属性。

您还可以使用侦听器，`onFieldError`并`onFieldSuccess`在您想要的 div 上添加适当的类。

# java - 如何对不同的包进行不同的日志记录？

> ID：15692165
> 
> 赞同：5
> 
> 时间：2013-03-28T21:06:43.790
> 
> 标签：java, logging, logback

在 Log4j 中，很容易在应用程序中以不同级别记录不同的包（这对于调试特别有用）。除了创建自己的过滤器之外，还有其他简单的方法吗？

我尝试在根标记内或在其名称之后创建一个标记是包（即让人想起 Log4J），然后将它的附加程序放在但是，但它没有工作。

那么，对于某些不需要自定义过滤器实现的包，是否有内置的 LogBack 方法来定义记录器和/或记录级别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T06:26:33.737

我正在使用播放器！Web 应用程序，并且针对不同的包具有不同的日志级别。您可以在 [`<logger>`元素](http://logback.qos.ch/manual/configuration.html#loggerElement)名称中指定包。

我的配置是：

```
<configuration>

    <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel"/>

    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>${application.home}/logs/application.log</file>
        <encoder>
            <pattern>%date - [%level] - from %logger in %thread %n%message%n%xException%n</pattern>
        </encoder>
    </appender>
    <appender name="TIMESTAMP_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">

        <file>${application.home}/logs/batches/current.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy" maxHistory="720">
            <fileNamePattern>${application.home}/logs/batches/archived/%d{yyyy/MM/dd}.gz</fileNamePattern>
        </rollingPolicy>
        <encoder>
            <pattern>{mpoplib} %date - [%level] in %thread %n%message%n%xException%n</pattern>
        </encoder>
    </appender>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%coloredLevel %logger{15} - %message%n%xException{5}</pattern>
        </encoder>
    </appender>

    <logger name="play" level="INFO">
        <appender-ref ref="FILE"/>
    </logger>
    <logger name="application" level="INFO">
        <appender-ref ref="FILE"/>
    </logger>
    <logger name="ru.kupikupon.mpoplib" level="DEBUG">
        <appender-ref ref="TIMESTAMP_FILE"/>
    </logger>

    <root level="DEBUG">
        <appender-ref ref="STDOUT"/>
    </root>

</configuration> 
```

# c++ - 在 C++ 中抛出关键字

> ID：15692168
> 
> 赞同：-5
> 
> 时间：2013-03-28T21:07:02.237
> 
> 标签：c++, exception-handling, stack, throw

有人可以指出用异常处理来执行这个程序的正确方法吗？这是一个堆栈程序。

```
1)#include<iostream>
2)#include<stdlib.h>
3)#include<string.h>
4)using namespace std;
5)
6)template<class T>
7)class Stack {
8)private:
9)  int max;
10) int top;
12) T* items;
13)public:
14) Stack(int size) {
15)     max = size;
16)     top = -1;
17)     items = new T[max];
18) }
19) ~Stack(){delete [] items;}
20)
21) void push(T data) throws Exception{
22)     if(full()) {
23)         throw new StackException("Out of space!");
24)     }
25)     items[++top] = data;
26) }
27) T pop(){
28)     if(empty()) throws Exception {
29)         throw new StackException("No more elements to delete"); 
30)     }
31)     return items[top--];
32) }   
33) 
34) bool full() { return top == max-1; }
35) bool empty() { return top == -1; }
36)};
37)
38)int main() {
39)    try{
40)     Stack<int> s(10);
41)     s.push(1);
42)     s.push(2);
43)     cout<<s.pop()<<endl;
44)    } 
45)    catch(StackException e){
46)     cout<<e.what()<<endl;
47)    }
48)    return 0;
49)} 
```

编辑：我收到以下错误。我是 C++ 异常处理的新手，想知道我是否做得对——

```
 3stacks.cpp:20:18: error: expected ‘;’ at end of member declaration
     3stacks.cpp:20:20: error: ‘throws’ does not name a type
     3stacks.cpp:26:8: error: expected ‘;’ at end of member declaration
     3stacks.cpp:26:10: error: ‘throws’ does not name a type 
     3stacks.cpp: In function ‘int main()’:
     3stacks.cpp:44:8: error: expected type-specifier before ‘StackException’
     3stacks.cpp:44:23: error: expected ‘)’ before ‘e’
     3stacks.cpp:44:23: error: expected ‘{’ before ‘e’
     3stacks.cpp:44:23: error: ‘e’ was not declared in this scope
     3stacks.cpp:44:24: error: expected ‘;’ before ‘)’ token 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:11:24.563

您尚未`StackException`在程序中的任何地方定义。您必须自己创建它。还要从您的函数签名中删除`throws Exception`，因为您也从未定义过该类型（并且它被称为`throw Exception`）。

此外，实际上没有必要在签名中声明哪些异常是可能的，但最好声明一个函数永远不会抛出（`noexcept`在 C++11 中使用）。在文档中说明可能的例外情况。此外，您错过了一个可能的`bad_alloc`.

总而言之，剥离所有代码并使用`std::stack`和`<stack>`剥离那些 C 库。但是，这是一个示例，您可以如何做到这一点：

```
template<class T>
class Stack {
private:
    int max;
    int top;
    T * items;
public:
    struct out_of_space{};
    struct empty_stack{};
    Stack(int size) {
        if(size)
            max = size;
        top = -1;
        items = new T[max];
    }
    ~Stack(){delete[] items;}

    void push(const T & data){
        if(full()) {
            throw out_of_space();
        }
        items[++top] = data;
    }
    T pop(){
        if(empty()){
            throw empty_stack();
        }
        return items[top--];
    }   

    bool full() const { return top == max-1; }
    bool empty() const { return top == -1; }
};

int main() {
    try{
     Stack<int> s(10);
     s.push(1);
     s.push(2);
     cout<<s.pop()<<endl;
    } catch(const Stack<int>::out_of_space& e){
     cout<< "stack out of space" <<endl;
    } catch(const Stack<int>::empty_stack & e){
     cout<< "stack is empty" <<endl;
    }
    return 0;
} 
```

要实际使用`e.what()`，您必须自己实现它。或者您可以继承`std::exception`、重载它并直接捕获`const std::exception&`。

# websocket - 将 WebSocket 连接到正在监听的 Titanium Ti.Network.Socket.TCP？

> ID：15692170
> 
> 赞同：0
> 
> 时间：2013-03-28T21:07:04.557
> 
> 标签：websocket, titanium

我正在尝试将浏览器中的 WebSocket 连接到基于 Titanium 的 iOS 应用程序上的侦听 Socket 服务器。

设备和浏览器机器在同一个无线路由器上，但​​我只能得到

[16:01:09.282] Firefox 无法与位于 ws://192.168.0.190:8080/ 的服务器建立连接。

这与协议“ws://”有关吗？Titanium Socket 侦听器如何知道期望该协议？

这是我的钛插座代码：

```
var hostname = Ti.Platform.address;

//Create a socket and listen for incoming connections
var listenSocket = Ti.Network.Socket.createTCP({
    host : hostname,
    port : 8080,
    accepted : function(e) {
        // This where you would usually store the newly-connected socket, e.inbound
        // so it can be used for read / write operations elsewhere in the app.
        // In this case, we simply send a message then close the socket.
        Ti.API.info("Listening socket <" + e.socket + "> accepted incoming connection <" + JSON.stringify(e.inbound) + ">");
        e.inbound.write(Ti.createBuffer({
            value : 'Hi from iOS.\r\n'
        }));
//        e.inbound.close();
        // close the accepted socket

    },
    error : function(e) {
        Ti.API.error("Socket <" + e.socket + "> encountered error when listening");
        Ti.API.error(" error code <" + e.errorCode + ">");
        Ti.API.error(" error description <" + e.error + ">");
    }
});
// Starts the socket listening for connections, does not accept them
listenSocket.listen();
Ti.API.info("Listening now...");

// Tells socket to accept the next inbound connection. listenSocket.accepted gets
// called when a connection is accepted via accept()
Ti.API.info("Calling accept.");
listenSocket.accept({
    timeout : 10000
}); 
```

这是浏览器中的代码：

```
function sensorClient(host, port) {
    if ("WebSocket" in window) {
        alert("WebSocket is supported by your Browser!");
        // Let us open a web socket
        var ws = new WebSocket("ws://" + host + ":" + port);
        ws.onopen = function () {
            // Web Socket is connected, send data using send()
            ws.send("hi from the browser");
        };
        ws.onmessage = function (evt) {
            var received_msg = evt.data;
            alert("Message received..." + received_msg);
        };
        ws.onclose = function () {
            // websocket is closed.
            alert("Connection is closed...");
        };
    }
    else {
        // The browser doesn't support WebSocket
        alert("WebSocket NOT supported by your Browser!");
    }
} 
```

# c# - 无法将类型“int”隐式转换为“Foo.Bar.Delegates.Program.ParseIntDelegate”

> ID：15692175
> 
> 赞同：2
> 
> 时间：2013-03-28T21:07:16.540
> 
> 标签：c#, delegates

我正在尝试学习 C# 代表。编译这段代码时，我在主题行中收到此错误消息。

> 无法将类型“int”隐式转换为“Foo.Bar.Delegates.Program.ParseIntDelegate”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Foo.Bar.Delegates
{
    class Program
   {
        private delegate int ParseIntDelegate();

        private static int Parse(string x)
        {
            return int.Parse(x);
        }

        static void Main()
        {
            string x = "40";
            int y = Parse(x); //The method I want to point the delegate to

            ParseIntDelegate firstParseIntMethod = Parse(x); 

           //generates complier error: cannot implicity convert type int 
           //to 'Foo.Bar.Delegates.Program.ParseIntDelegate'

           ParseIntDelegate secondParseIntMethod = int.Parse(x); //Same error

           Console.WriteLine("Integer is {0}", firstParseIntMethod()); 
        }
    }
} 
```

所以我被困住了，直到我明白我做错了什么。如果有人可以帮助我解决这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:10:55.467

首先，您的委托类型应该是：

```
private delegate int ParseIntDelegate(string str); 
```

委托类型应与您要转换的方法的签名相匹配。在这种情况下`Parse`，接受一个`string`参数并返回一个`int`.

由于您的`Parse`方法具有兼容的签名，因此您可以直接从中创建一个新的委托实例：

```
ParseIntDelegate firstParseIntMethod = Parse; 
```

然后你可以像普通的方法应用程序一样调用它：

```
Console.WriteLine("Integer is {0}", firstParseIntMethod(x)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:18:10.260

有几件事让我很震惊：

在 Main() 中，您有

```
ParseIntDelegate firstParseIntMethod = Parse(x); 
```

这试图将 Parse(x) 的结果存储到 firstParseIntMethod 中。你在这里*调用*Parse，而不是指它。

您可以通过删除参数来解决此问题：

```
ParseIntDelegate firstParseIntMethod = Parse ; 
```

现在你会有一个不同的错误，抱怨 Parse 的签名。

```
private delegate int ParseIntDelegate();

private static int Parse(string x) 
```

Parse 不能“适应”到 ParseIntDelegate，因为它需要一个字符串参数。您可以更改 ParseIntDelegate 以采用字符串来解决问题。

# java - 当事务因 SQLException（超时）而回滚时，如何停止计时器在 Weblogic 10.3（EE 容器）中重试？

> ID：15692179
> 
> 赞同：0
> 
> 时间：2013-03-28T21:07:25.900
> 
> 标签：java, timer, ejb-3.0, weblogic-10.x, jta

基本上我有 EJB3 计时器调用另一个 EJB 3 (DAO) - 这个调用被包裹在 catch 块中。另一个 EJB 在尝试获取与 DS 的连接时抛出超时 SQL 异常（向调用者抛出异常）。在日志中，我看到这个超时一直在尝试一次又一次地执行。有哪些选项可以防止它再次尝试？

```
..
// Timer
@Timeout
public void timeout(Timer timer) { // keeps on coming here 
...
try {

 dao.processJob();
} catch (SQLException) { // catches the timeout
log
}

// dao
@Resource(...)
private Datasource ds

public void process() throws SQLException {
ds.getConnection() // throws timeout here
..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:07:55.313

从文档：

> 如果 bean 在回滚的事务中取消计时器，则计时器取消将回滚。在这种情况下，**计时器的持续时间会被重置，就好像取消从未发生过一样**。

因此，计时器可能不会被取消。这可能是不断重试的可能原因。

*   您可以尝试在`process`方法中捕获异常，而不是抛出它 & 可以返回`null`。
*   或者，您可以拥有`TransactionAttributeType.REQUIRES_NEW`for 方法`process`，这将成为新交易的一部分。

# jquery - Jquery表单提交问题

> ID：15692180
> 
> 赞同：-3
> 
> 时间：2013-03-28T21:07:31.073
> 
> 标签：jquery, jquery-validate, form-submit

我有一个简单的几个 html 控件的表单。我想在 ajax jquery 中将数据保存到 mysql。但它没有总结它。这是我尝试过的

```
$('#myForm').ajaxForm({

          beforeSubmit : function() { 

          var lookup          = true;

          var validate        = false;
          $.ajax({

             async: false,

             url: 'user.php?username='+$('#username').val(),

             success: function(data) { }

         })
 validate =  $("#myForm").validate({rules: { price: { number: true, }, size: { number: true, }} , errorClass: 'form_fields_error',  errorPlacement: function(error, element) {}}).form() ;
if(lookup && validate ){

                return true;

            }

            else{

                return true;

            }

          },
       target: '#showdata',

          success: function() { }

        });

      });

    $("#myForm").submit(function()
  {

 alert('this is not fired');
//e.preventDefault();
var formData = $(this).serialize();

$.ajax(
{
    type:'post',
    url:'administration/save_users.php',
    data:formData,
    beforeSend:function()
    {
       // launchpreloader();
    },
    complete:function()
    {
       // stopPreloader();
    },
    success:function(result)
    {
         alert(result);
    }

});

}); 
```

表单提交没有被解雇......我错过了什么？我有表单 action="#"....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:36:00.883

根据您的代码，大概您正在使用[jQuery Validate plugin](http://docs.jquery.com/Plugins/Validation)。

```
validate =  $("#myForm").validate({rules: { price: { number: true, }, size: { number: true, }} , errorClass: 'form_fields_error',  errorPlacement: function(error, element) {}}).form() ; 
```

您的代码充满了多次`ajax`调用和多余的`submit`处理程序。它格式不佳的事实无助于我们解开和排除故障。

[根据 jQuery Validate 文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，

> **submitHandler**，回调，默认：默认（本机）表单提交
> 
> 回调，用于在表单有效时处理实际提交。获取表单作为唯一参数。替换默认提交。**验证后通过 Ajax 提交表单的正确位置。**

这意味着您应该将您的`ajax`放在`submitHandler`插件的回调函数中。

你...

*   不需要使用`submit`处理程序（这是内置在插件中的）

*   在提交/点击之前/期间不需要测试表单的有效性（这也内置在插件中）

尝试这样做...

**见演示：http: [//jsfiddle.net/zuXYR/](http://jsfiddle.net/zuXYR/)**

```
$(document).ready(function () {

    $('#myForm').validate({ // initialize the plugin
        rules: { 
            price: { 
                number: true 
            }, 
            size: { 
                number: true
            }
        }, 
        errorClass: 'form_fields_error',  
        errorPlacement: function(error, element) {
            // return false;  // this will suppress errors
            error.insertAfter(element); // the default function
        },
        submitHandler: function (form) {
            // your ajax code here
            return false; // required when using ajax to prevent a page reload
        }
    });

}); 
```

另外，我不确定您为什么希望`errorPlacement`回调函数为空。如果要抑制错误消息，请使用`return false`. 否则，如果您想使用默认行为，请`errorPlacement`完全忽略回调。

# android - Android 操作栏微调器项

> ID：15692184
> 
> 赞同：1
> 
> 时间：2013-03-28T21:07:46.600
> 
> 标签：android, android-actionbar

我在我的应用程序中实现了一个操作栏微调器，它确实显示了我添加到与其关联的 ArrayAdapter 的两个值中的选定值。但是，令我惊讶的是，当我触摸微调器项目（并选择其中一个适配器成员）时，操作系统不会调用 onOptionsItemSelected()。

我不知道为什么我认为它会，回想起来，但在我看来它确实应该。谁能告诉我在这种情况下是否有办法强制调用 onOptionsItemSelected() - 或者如果这是它应该工作的方式，我将不得不找到一种不同的方式来完成功能??

最后，我没有使用 Action Bar Sherlock——在此之前它似乎没有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:23:51.250

你需要看看的是..

```
ActionBar.setListNavigationCallbacks(SpinnerAdapter adapter, OnNavigationListener callback) 
```

您将在 onCreate 代码中运行它。除了将您的 ArrayAdapter 传递给它之外，您还可以在上面传递一个 OnNavigationListener 来处理 ActionBar 微调器上的点击。

# jquery-mobile - 页面加载时的 jQuery Mobile 对话框

> ID：15692186
> 
> 赞同：3
> 
> 时间：2013-03-28T21:07:58.693
> 
> 标签：jquery-mobile, dialog, pageshow

开发我的第一个 jQuery Mobile 应用程序。有一个 localStorage 值必须在整个应用程序中都有一个值，所以我点击了 pageshow 事件来检查这个值：

```
$(function () {
$("div[data-role='page']").on("pageshow", function (event, ui) {
    if (getValue() == null) {
        // show the dialog
        $.mobile.changePage("#dialog");
    }
});
}); 
```

这在浏览各个页面时有效，但在第一页加载时永远不会被调用。我尝试将上面的 If 语句再次复制到我添加 pageshow 侦听器的部分下方，但它具有显示对话框、隐藏它然后再次显示它的效果。

在第一页上，似乎打开对话框正在触发 pageshow（考虑到我的选择器，这很奇怪），这反过来又触发了另一个对话框。有没有人有关于如何解决这个问题的建议，或者有更好的方法来解决整个问题？

**更新#1：**我试过了

```
$.mobile.changePage( "#mypage", { allowSamePageTransition: true, transition: "none" } ); 
```

但它与我最初的问题具有相同的效果，即启动对话框，然后隐藏它，然后再次显示它。似乎以某种方式启动对话框正在触发 pageshow 事件，即使我试图在我的选择器中过滤掉它。请注意，如果您删除**转换：“无”**选项，则根本不会出现对话框。

**更新#2：**我还尝试创建一个空白初始页面，然后进行简单的页面转换

```
$.mobile.changePage("#mypage"); 
```

但它仍然没有正确的行为。在这种情况下，它确实将我带到了下一页，但 pageshow 事件没有触发，因为我的对话框没有出现。我知道它没有触发，因为我可以从导航菜单中选择另一个页面并且确实出现了对话框。

**更新#3：**我更改了我的选择器，我在其中附加了 pageshow 侦听器。我没有选择 where data-role="page"，而是通过 id 选择特定页面。然后我重新尝试了我在前两次更新中描述的两种方法，但它仍然无法正常工作。首先，当我尝试使用 allowSamePageTransition 刷新初始页面时，似乎 pageshow 触发了两次，因为对话框启动了两次。然后，当我尝试使用空白初始页面，然后在附加 pageshow 侦听器后立即执行重定向时，什么也没有发生，对话框也永远不会出现。如果我导航到任何其他页面，对话框将按预期工作。我不明白为什么第一页这么麻烦。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T14:48:35.410

设置显示对话框的时间间隔，而不是在显示页面后调用它。

```
$(document).on('pageshow', '#myPage' ,function () {
 if (getValue() == null) {
  setTimeout(function () {
   $.mobile.changePage('#dialog');
  }, 100); // delay above zero
 }
}); 
```

这样，对话框将在`pageshow`事件时弹出一次，并且只会弹出一次。

> **更新**

[我在这个博客](http://bradbroulik.blogspot.co.nz/2011/12/jquery-mobile-events-diagram.html)上发现了这个有趣的 jQueryMobile 事件图。它解释了为什么在多页结构的情况下，对话框或弹出窗口在第一页而不是其余页面上被触发两次。一旦页面准备好进入 DOM 并再次打开时，它似乎就会触发`pageshow`。设置超时可防止对话框在 上触发`pageinit`，因此会跳过该事件，直到`pageshow`被触发。

![在此处输入图像描述](../Images/8e2b4e90fe229d894688b2425c20c797.png)

> **图片/图表来源**：[http ://bradbroulik.blogspot.co.nz/2011/12/jquery-mobile-events-diagram.html](http://bradbroulik.blogspot.co.nz/2011/12/jquery-mobile-events-diagram.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:53:49.063

很可能是在第一页上，当您的代码被执行时，该事件已经被触发。这就解释了为什么你只在第一页什么都得不到。

关于您的第二点，这很正常，因为 changePage 会将页面“更改”为对话框，一旦您关闭对话框，它将返回到您的上一页。因此，if 被执行了 2 次。

我的建议是，第一次进入第一页，注册pageshow事件回调后，可以重新跳转到同一个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T00:49:37.523

我使用了“pagecreate”，这似乎解决了我的问题（到目前为止......）

```
$(document).on('pagecreate', "#page-formyID", function () {

//whatever

}); 
```

# python - 鼠兔没有属性日志

> ID：15692187
> 
> 赞同：1
> 
> 时间：2013-03-28T21:08:02.163
> 
> 标签：python, tornado, pika

我正在尝试运行一些使用 pika 和龙卷风的 python 代码。我都安装了，但得到错误

```
File "tornado_conn.py", line 90, in <module>
   pika.log.setup(color=True)
AttributeError: 'module' object has no attribute 'log' 
```

两个包都安装在`/usr/local/lib/python2.7/dist-packages/`

这是我第一次玩python，所以我真的不知道为什么它找不到它。代码中的一切似乎都是正确的：

```
# Helper class PikaClient
application.pika = PikaClient()

# Set our pika.log options
pika.log.setup(color=True)
# Start the HTTP Server
pika.log.info("Starting Tornado HTTPServer on port %i" % PORT)
http_server = tornado.httpserver.HTTPServer(application)
http_server.listen(PORT) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T00:48:21.320

查看[最新的 Pika 版本](https://github.com/pika/pika/tree/0.9.12/pika)，似乎他们前段时间[删除了日志模块。](https://github.com/pika/pika/commit/b84d2bc0023790beca407ee30fe01df42c98d8d7)

# .net - 将 OrderedDictionary 转换为 Dictionary 的更好方法

> ID：15692191
> 
> 赞同：1
> 
> 时间：2013-03-28T21:08:10.193
> 
> 标签：.net, .net-4.0

您如何以简洁但高效的方式从`OrderedDictionary`to转换？`Dictionary<string, string>`

**情况：**

我有一个无法触摸的库，希望我通过`Dictionary<string, string>`. 我想建立一个`OrderedDictionary`，因为顺序在我的部分代码中非常重要。所以，我正在使用一个`OrderedDictionary`，当需要访问库时，我需要将它转换为`Dictionary<string, string>`.

**到目前为止我已经尝试过：**

```
var dict = new Dictionary<string, string>();
var enumerator = MyOrderedDictionary.GetEnumerator();
while (enumerator.MoveNext())
{
    dict.Add(enumerator.Key as string, enumerator.Value as string);
} 
```

这里一定有改进的余地。有没有更简洁的方式来执行这种转换？任何性能考虑？

我正在使用.NET 4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T21:17:32.240

只需对您的代码进行两项改进。首先，您可以使用`foreach`代替`while`. 这将隐藏 GetEnumerator 的详细信息。

其次，您可以在目标字典中预先分配所需的空间，因为您知道要复制多少项。

```
using System.Collections.Specialized;
using System.Collections.Generic;
using System.Collections;

class App
{
  static void Main()
  {
    var myOrderedDictionary = new OrderedDictionary();
    myOrderedDictionary["A"] = "1";
    myOrderedDictionary["B"] = "2";
    myOrderedDictionary["C"] = "3";
    var dict = new Dictionary<string, string>(myOrderedDictionary.Count);
    foreach(DictionaryEntry kvp in myOrderedDictionary)
    {
      dict.Add(kvp.Key as string, kvp.Value as string);
    }
  }

} 
```

另一种方法是使用 LINQ 就地转换字典，如果你想要一个字典的新实例，而不是填充一些现有的实例：

```
using System.Linq;
...
var dict = myOrderedDictionary.Cast<DictionaryEntry>()
.ToDictionary(k => (string)k.Key, v=> (string)v.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:13:11.287

如果您改用泛型[`SortedDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)，则可以简单地使用`Dictionary<TKey, TValue>`带有参数的构造`IDictionary<TKey, TValue>`函数：

```
var dictionary = new Dictionary<string, string>(MyOrderedDictionary); 
```

**注意：**您将*无法*使用同一个类来维护顺序和派生自，`Dictionary`因为其中的方法`Dictionary`不是虚拟的。库创建者应该使用`IDictionary`而不是`Dictionary`公开公开的库方法，但他们没有，所以现在你必须处理它。

# android - 我如何获得 androids 默认控制图像

> ID：15692195
> 
> 赞同：1
> 
> 时间：2013-03-28T21:08:14.210
> 
> 标签：android, radio-button

我想更改用于指示选定单选按钮的颜色。我找到了如何做到这一点的[解释。](https://stackoverflow.com/questions/2715950/any-way-to-change-the-color-of-a-radio-button)我唯一缺少的是要使用的图像来源。为了保持一致的外观，我想采用默认使用的现有图像并重新着色它们。我曾经看过一个指南解释如何获取图像，但是当我尝试搜索时，我无法找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:09:41.633

您可以在 SDK 中找到这些图像：

> x:\path\to\SDK\platforms\android-17\data\res\drawable-mdpi

单选按钮中的图像以 开头`btn_radio`。

正如[cafelatte](https://stackoverflow.com/users/276183/cafelatte)所说，您需要提供 4 种不同的[密度](http://developer.android.com/guide/practices/screens_support.html#range)。有四种类型：

*   **ldpi**：用于低密度 (ldpi) 屏幕 (~120dpi) 的资源
*   **mdpi**：中等密度 (mdpi) 屏幕 (~160dpi) 的资源。（这是基线密度。）
*   **hdpi**：用于高密度 (hdpi) 屏幕 (~240dpi) 的资源。
*   **xhdpi**：超高密度 (xhdpi) 屏幕 (~320dpi) 的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:13:29.773

要么创建你自己的资源，要么从 SDK 中提取你需要的资源。

在`${your-sdk-dir}\platforms\android-${apilevel}\android.jar`

**只需从res\drawable***子目录下获取您需要的资源。如果需要，不要忘记提供 [l/m/h/x]dpi 资源。

# jquery - jQuery 搜索过滤器

> ID：15692202
> 
> 赞同：0
> 
> 时间：2013-03-28T21:08:35.807
> 
> 标签：jquery

我正在使用此代码过滤搜索。我试图只使用 .filter 类来获取我想要过滤的 2 列。问题是脚本现在要求文本在两列中都匹配，以便它过滤结果。如何使它从任一列中找到结果，而不是从两者中找到结果？

```
$(document).ready(function() {
    var $rows = $('#orders tbody .filter');
    $('#filtersearch').keyup(function() {
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();

        $rows.closest('tr').show().end().filter(function() {
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return !~text.indexOf(val);
        }).closest('tr').hide();
    });
    $('#filtersearch').keyup();
}); 
```

以及带有数据的表格

```
<table border="0" align="center" cellpadding="5" cellspacing="0" id="orders">
<thead>
<tr>
<th colspan="6">
            <form name"searchfilter">
            <input type="text" id="filtersearch" name="filtersearch" placeholder="Search by name or phone number" value="<?php echo $search; ?>">
            </form>
            </th>
</tr>
<tr>
<th width="15%">Date</th>
<th width="30%">Name</th>
<th width="30%">Phone</th>
<th width="15%">Location</th>
<th width="10%">Picked Up</th>
</tr>
</thead>
<tbody>
<?php
/* 
        VIEW.PHP
        Displays all data from 'players' table
*/

        // connect to the database
        include('connect-db.php');

        // get results from database
        $result = mysql_query("SELECT * FROM orders") 
                or die(mysql_error());  

        // loop through results of database query, displaying them in the table
        while($row = mysql_fetch_array( $result )) {
     $src = '';
     switch( $row['Location'] ) {
          case '1':
              $src = 'images/rear_icon.png';
              break;
          case '2':
              $src = '2.jpg';
              break;
          default:
              $src = 'default.jpg';

            }      // echo out the contents of each row into a table
                echo "<tr>";
                echo '<td>' . $row['date'] . '</td>';
                echo '<td class="filter">' . $row['Name'] . '</td>';
                echo '<td class="filter">' . $row['Phone'] . '</td>';
                echo '<td><img src="'.$src.'"></td>';
                echo '<td><a href="delete.php?id=' . $row['id'] . '"><img src="images/icons/checkmark.png"></a></td>';
                echo "</tr>"; 
        } 

?>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:12:15.807

你可以更换

```
 $rows.closest('tr').show().end().filter(function() {
        var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
        return !~text.indexOf(val);
    }).closest('tr').hide(); 
```

和

```
 $rows.closest('tr').hide().each(function(){
       if ($('td', this).filter(function(){
            var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
            return text.indexOf(val)!=-1; // too much wine to play with ~ things
       }).length>0) $(this).show();
   }) 
```

个人评论：命名`$rows`单元格不会使代码更易于阅读和修复。

# c++ - 了解 Windows 语音 API

> ID：15692209
> 
> 赞同：0
> 
> 时间：2013-03-28T21:08:54.267
> 
> 标签：c++, windows, text-to-speech, sapi

我想发送一个用于 TTS 合成的 SSML。

我尝试在 TTS 客户端应用程序上进行调用：

```
CComPtr<ISpVoice> pVoice;
pVoice->Speak(ssml, SPF_ASYNC | SPF_PARSE_SSML, NULL); 
```

这是合成 SSML 的正确方法吗？

我也在实现 SAPI 语音。

我实现了以下接口：`ISpTTSEngine`, `ISpObjectWithToken`. 但是当我`SPF_PARSE_SSML`设置标志发送时，`ISpObjectWithToken::SetObjectToken`调用了，但`ISpTTSEngine::Speak`不显示！

我的实现类似于本教程： http: [//www.codeproject.com/Articles/6190/Creating-Microsoft-SAPI-Compliant-Application-s](http://www.codeproject.com/Articles/6190/Creating-Microsoft-SAPI-Compliant-Application-s)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:49:00.857

有两个问题。

SAPI 不接受 SSML。它支持 SSML 标签。我无法发送完整的 SSML。

使用`SPF_PARSE_SSML`并不意味着该`Speak`操作将完成。

# http - 搜索引擎的 HTTP 中的 301 和 302 有什么区别

> ID：15692210
> 
> 赞同：5
> 
> 时间：2013-03-28T21:08:56.020
> 
> 标签：http, redirect, seo, http-status-code-302

我读了这个[问题](https://serverfault.com/questions/110227/whats-the-difference-between-301-and-302-in-http)，知道 HTTP 中的 301 和 302 有什么区别，但我的问题是搜索引擎的 HTTP 中的 301 和 302 有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T11:40:48.350

@dani 这不是真的...

它被称为服务器状态代码，每个搜索引擎都按照以下列表处理它们：

[http://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

301 状态码意味着页面已永久移动到另一个位置，搜索引擎会将旧页面值、排名和其他重要信息传递给新创建的页面。为了获得这一好处，需要将旧页面永久移动到新创建的页面。

302 状态码表示页面暂时不可用，此代码将向搜索引擎确认该页面暂时不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:12:43.900

它与网站的分数有关。这是每个搜索引擎的内部问题，因此没有一个真正的答案。但是 - 在 301（永久）上，所有链接都会为目标地址添加分数，而在 302 中它们不会。

您应该为此查看 Google 指南。但它们并不是唯一的搜索引擎，而且它们往往每隔几个月就会改变一次规则......

（例如，他们可以从搜索结果中删除您的原始地址一次 301，并将所有搜索定位到重定向的地址，如果是 302，则不要这样做）。

# ruby-on-rails - 在设计注册控制器中添加用户配置文件

> ID：15692212
> 
> 赞同：3
> 
> 时间：2013-03-28T21:08:57.003
> 
> 标签：ruby-on-rails, devise

我有一个 Rails 应用程序，其中包含三种用户，专业人士、学生和普通公民。因此，我使用三种不同的配置文件使用户模型具有多态性。

用户.rb

```
belongs_to :profile, polymorphic: true 
```

专业.rb

```
 has_one :user, as: :profile, dependent: :destroy 
```

学生.rb

```
has_one :user, as: :profile, dependent: :destroy 
```

公民.rb

```
has_one :user, as: :profile, dependent: :destroy 
```

我想使用设计作为中央注册并为用户模型创建设计

```
rails generate devise User 
```

然后我创建了一个继承自 Devise Registrations 控制器的 Registrations 控制器，在 after_sign_up_path_for 方法中，我将用户分配给用户在注册表单上选择的任何配置文件。

```
class RegistrationsController < Devise::RegistrationsController
  protected

  def after_sign_up_path_for(user)

    if user.professional === true

      user.profile = ProfessionalProfile.create!
      user.save!
    elsif
       .... 

  end
end 
```

现在，这是可行的，因为通过覆盖 `def after_sign_in_path_for(resource)`应用程序控制器中的 ，我可以将用户重定向到他们创建的任何配置文件

```
 def after_sign_in_path_for(resource)

     if current_user.profile_type === 'ProfessionalProfile'
        professional_profile_path(current_user)

     elsif 
        ....
    end 
```

然而，即使这可行，我对 Rails 的经验也很少（在制作我自己的应用程序方面；我已经遵循了一些教程）和设计，所以我想知道，在我继续开发应用程序之前，如果我通过以这种方式创建配置文件，将会遇到设计或其他任何问题。有一个更好的方法吗？

我想作为一种可能的选择，我想知道是否应该尝试覆盖 Devise 的创建用户操作，以便它同时创建相关的配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T17:57:25.660

您可以使用以下代码将列添加到用户表：

```
rails generate migration add_professional_to_users professional:boolean 
```

同样地

```
rails generate migration add_student_to_users student:boolean 
```

并且

```
rails generate migration add_citizen_to_users citizen:boolean 
```

根据我的说法，这是一种更好的方法，因为 devise 描述了类似的方法来创建管理员，请在此处查看：[devise,option1](https://github.com/plataformatec/devise/wiki/How-To%3a-Add-an-Admin-role)

同样，您可以添加这些角色。只是一种选择，但我觉得更好。

# git - 为什么 git pull 会导致我没有进行的本地更改

> ID：15692216
> 
> 赞同：2
> 
> 时间：2013-03-28T21:09:09.020
> 
> 标签：git, github, git-diff

我正在与 git 存储库中的两个协作者一起工作。我最近在本地提交了一些更改，然后从我们的 github 存储库中提取了该工作。这引起了我解决的几个冲突。然而，除了导致这些小冲突的拉取之外，我现在在我的本地存储库中还有一堆其他文件标记为已更改。检查文件的差异，我可以看到这些是我的合作者必须做出的改变。我认为他们一定已经提交了它们，因为那将是它们最终出现在我的本地存储库中的唯一方式。但是，他们提交的更改如何最终出现在我的本地存储库中，就好像它们是我现在需要提交的更改一样？PS我可能是一个长期的Subversion用户，对git很陌生......

根据下面的评论和@wmfairuz 的回答，我了解到，当我在本地提交对文件 A 的更改时，拉一个修改文件 A 和 B 的变更集，我需要在解决 A 中的更改后提交两个文件 A 和 B，即使我的冲突解决方案只修改了文件 A，对吗？

现在，问题实际上有点复杂。我实际上已经提交了对文件 A 的更改，此外，我还对一组文件 C 进行了未提交的更改。我不希望提交文件 C - 它们主要是存储在存储库中的 LaTeX 和 Python 输出文件，以便于更新由于在其源上运行 Python 和 LaTeX，但我不想记录这些更改。然后我提取了一个修改文件 A 和一组文件 B 的变更集。由于我对 git 的无知，在提交已解析的文件 A 时，我取消了对文件集 B 的自动暂存更改。现在我无法再区分集 C 和B. 我应该怎么做才能正确完成合并并避免以某种方式破坏文件集 B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:29:18.507

这是正常的。

假设冲突文件是修改文件 A（冲突文件）和文件 B 的提交的一部分。当合并失败时，提交处于挂起状态，直到您修复冲突并自行合并。因此，在您的情况下，文件 B 显示为已更改文件是正常的。

因此，在每次合并冲突时，您需要做的是：修复冲突，添加冲突文件并添加提交中的所有更改文件。然后合并。所以最后，你会有一个稍微不同的提交（文件 A 略有不同 + 文件 B 的正常更改）

# android - 将 s3 下载从 iOS / Android 应用程序迁移到 CloudFront

> ID：15692231
> 
> 赞同：4
> 
> 时间：2013-03-28T21:10:10.960
> 
> 标签：android, ios, amazon-s3, amazon-cloudfront

我们有 iOS 和 Android 应用程序可以为 s3 下载文件。由于我们拥有全球客户，因此我们希望迁移到 CloudFront。

我知道为了做到这一点，我需要从 / 构造一个 url 并发送 NSURLRequest。这意味着我不再使用专用的 S3GetObjectRequest 从存储桶中获取对象。

我想知道这是否是唯一的方法，还是有办法使用 cloudFront 处理 s3 类？

这是我的代码（iOS）：

```
- (int) request:(NSString*)request response:(NSData**)response
{    
    NSInteger httpStatus = 0;
    NSData* theData = NULL;
    NSString* cloudFrontDomain = [self cloudFrontDomain];
    if(cloudFrontDomain){
        NSString *urlString = [cloudFrontDomain stringByAppendingPathComponent: request];
        NSURL *url = [[NSURL alloc] initWithString:urlString];
        NSURLRequest *theRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
        NSError *error = nil;
        NSHTTPURLResponse *httpResponse = nil;
        theData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&httpResponse error:&error];
        httpStatus = [httpResponse statusCode];
    }
    else{
        NSString* bucket = [self s3BucketName];
        S3GetObjectRequest* s3Request = [[S3GetObjectRequest alloc] initWithKey: request withBucket:bucket];
        S3GetObjectResponse* s3Response = [s3Service getObject:s3Request];
        theData = [s3Response body];
        httpStatus = [s3Response httpStatusCode];
        [s3Request release];
    }

    if (httpStatus == 200)  {
        *response = [[NSData alloc] initWithData:theData];
    } 
    return httpStatus;
} 
```

安卓：

```
byte[] request(String key) {    
    String cloudFrontDomain = getCloudFrontDomain();
    if (cloudFrontDomain != null){
        try {
            String url = cloudFrontDomain + "/" + key;
            URL myFileURL = new URL(url);
            InputStream response = myFileURL.openStream();
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            IOUtils.copy(response, outputStream);
            return outputStream.toByteArray();
        } catch ... {
            ....
        }
    }
    else{
        String bucket = getS3BucketName();
        GetObjectRequest request = new GetObjectRequest(bucket, key);
        try {
            S3Object response = s3Service.getObject(request);
            if (null != response){ 
                ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
                IOUtils.copy(response.getObjectContent(), outputStream); 
                return outputStream.toByteArray();
            }
            else {
                return null;
            }
        }catch ... {
            ...
        }
    }
} 
```

# python - Python 数据库 API，用什么写的？

> ID：15692234
> 
> 赞同：0
> 
> 时间：2013-03-28T21:10:25.140
> 
> 标签：python

只是一个快速快速的问题，因为我无法在任何地方找到答案。Python Database API v2.0 是用什么编程语言编写的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:13:10.793

由于它只是一个 API，它实际上是[用简单的英语编写的](http://www.python.org/dev/peps/pep-0249/)。这取决于驱动程序*实现*的语言- 有纯 Python DB 客户端，也有用 C 编写的。

# git - 如何推送本地创建的分支

> ID：15692239
> 
> 赞同：1
> 
> 时间：2013-03-28T21:10:47.003
> 
> 标签：git

我使用 Git GUI 创建了一个新的本地分支。我承诺了。我想推动它，使其备份。

我只是`git push`想它会知道该怎么做。认为它会推动我的分支并在服务器上创建一个。

这个 Q/A 似乎说它应该：

[如何创建远程 Git 分支？](https://stackoverflow.com/questions/1519006/git-how-to-create-remote-branch)

但是，我收到此错误。

> ！[远程拒绝] MyBranchName -> MyBranchName（没有这样的参考）
> 
> 错误：未能将一些引用推送到“http_link_not_allowed_by_SO”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:18:13.060

似乎远程仓库已损坏。那是一个词。在服务器上，在 refs/heads/ 中是分支的一个文件夹，这使它看起来已经到了推送和死亡的地步。

所以我重命名它并再次推送，它很好。

**更新**

实际上，问题似乎再次出现。就像我只能推送一次分支一样。

# javascript - 在 Javascript 中，如何重命名/重新编号一组属性？

> ID：15692241
> 
> 赞同：-1
> 
> 时间：2013-03-28T21:10:49.923
> 
> 标签：javascript

这是我什至羞于问的问题之一，但我正在使用外部 JSON 源，我被迫做一些丑陋的事情。所以这里...

我有“脏”的 Javascript 对象，其属性名称末尾包含一个数字：

```
{ "Friend1" : "Bob",
  "Friend6" : "Fred",
  "Friend632" : "Gonzo",
  "FriendFinder1" : "Dolly",
  "FriendFinder4294" : "Jan"
} 
```

我试图找出一种方法来清理/“零索引”这些属性名称，以便对象看起来像：

```
{ "Friend0" : "Bob",
  "Friend1" : "Fred",
  "Friend2" : "Gonzo",
  "FriendFinder0" : "Dolly",
  "FriendFinder1" : "Jan"
} 
```

我正在引用这个 indexOf/Regex 代码： [是否有 JavaScript 的 String.indexOf() 版本允许使用正则表达式？](https://stackoverflow.com/questions/273789/is-there-a-version-of-javascripts-string-indexof-that-allows-for-regular-expr)

你可以推荐什么策略来做到这一点？我会在稍后发布我所在的位置。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:19:03.533

获取键的“基数”并使用原始索引将具有公共基数的项目附加到数组中。（这会产生一个稀疏数组。）然后通过将具有公共基础的每个项目枚举到一个带有`'base'+enumeratedindex`.

这里的技巧是使用`forEach`枚举数组之类的方法——这只会访问稀疏数组中分配的项目，允许您仅使用键的原始索引部分来确定排序顺序。

如果您无权访问`forEach`，则可以通过在数组项中包含键来完成类似的任务。而不是像这样的中间数组：

```
{Friend: [undefined, "Bob", undefined, undefined, undefined, undefined, "Fred"]} 
```

你有一个这样的：

```
{Friend: [[6, 'Fred'],[1, 'Bob']]} 
```

然后对数组进行排序并在 foreach 循环中访问每个项目，提取第二个项目。

这是代码：

```
function rekey(obj) {
    var rekey = /^(.*?)(\d+)$/;
    var nestedobj = {}, newobj = {};
    var key, basekeyrv, newkey, oldidx, newidx;
    function basekey(key) {
        return rekey.exec(key).splice(1);
    }
    for (key in obj) {
        if (obj.hasOwnProperty(key)) {
            basekeyrv = basekey(key);
            newkey = basekeyrv[0];
            oldidx = parseInt(basekeyrv[1], 10);
            if (!nestedobj[newkey]) {
                nestedobj[newkey] = [];
            }
            nestedobj[newkey][oldidx] = obj[key];
        }
    }
    for (key in nestedobj) {
        if (nestedobj.hasOwnProperty(key)) {
            newidx = 0;
            nestedobj[key].forEach(function(item){
                newobj[key+newidx++] = item;
            });
        }
    }
    return newobj;
}

rekey({
  "Friend1" : "Bob",
  "Friend6" : "Fred",
  "Friend632" : "Gonzo",
  "FriendFinder1" : "Dolly",
  "FriendFinder4294" : "Jan"
}); 
```

生产

```
{Friend0: "Bob",
 Friend1: "Fred",
 Friend2: "Gonzo",
 FriendFinder0: "Dolly",
 FriendFinder1: "Jan"} 
```

或者，不使用`forEach`：

```
function rekey(obj) {
    var rekey = /^(.*?)(\d+)$/;
    var nestedobj = {}, newobj = {};
    var key, basekeyrv, newkey, oldidx, newidx;
    function basekey(key) {
        return rekey.exec(key).splice(1);
    }
    for (key in obj) {
        if (obj.hasOwnProperty(key)) {
            basekeyrv = basekey(key);
            newkey = basekeyrv[0];
            oldidx = parseInt(basekeyrv[1], 10);
            if (!nestedobj[newkey]) {
                nestedobj[newkey] = [];
            }
            nestedobj[newkey].push([oldidx, obj[key]]);
        }
    }
    for (key in nestedobj) {
        if (nestedobj.hasOwnProperty(key)) {
            nestedobj[key].sort();
            for (newidx = 0; newidx < nestedobj[key].length; newidx++) {
                newobj[key+newidx] = nestedobj[key][newidx][1];
            }
        }
    }
    return newobj;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:18:46.120

您可以尝试执行以下操作：

```
{
 friend: new Array(),
 friendFinder: new Array()
} 
```

那么你就可以：

friend.push() - 添加到数组

var index =friend.indexOf("Bob") - 在数组中查找

friend.splice(index, 1) - 从数组中删除索引 1 是要删除的数字。

# c# - 我有一个基于 TextBox 的自定义控件，但 TextChanged 处理程序中的文本没有更改

> ID：15692242
> 
> 赞同：0
> 
> 时间：2013-03-28T21:10:52.510
> 
> 标签：c#, xaml, windows-phone-8

这是我的自定义控件，具有自定义 xaml 样式：

```
using System.Windows.Controls;

namespace MyControls
{
    public class CustomTextBox : TextBox
    {
    }
}

<Style TargetType="controls:CustomTextBox">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="controls:CustomTextBox">
                <StackPanel>
                    <TextBlock Text="" />
                    <TextBox Text="{TemplateBinding Text}" />
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

并且在使用时，处理程序由于某种原因`TextChanged`没有得到更新的字段。`Text`

```
<controls:CustomTextBox x:Name="ControlInstance"
                        TextChanged="OnTextChanged"
                        InputScope="EmailNameOrAddress" />

private void OnTextChanged(object sender, TextChangedEventArgs e)
{
    // ControlInstance.Text is always ""!
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:26:59.570

那是因为您正在更改`Text`模板中内部 TextBox 的属性，而不是`Text`您的 CustomTextBox 本身的属性。

我建议您查看[http://www.geekchamp.com/articles/creating-a-wp7-custom-control-in-7-steps](http://www.geekchamp.com/articles/creating-a-wp7-custom-control-in-7-steps)以获取有关创建自定义控件的帮助。

# c# - 我的 windows 服务在 sql server 服务之前启动

> ID：15692245
> 
> 赞同：1
> 
> 时间：2013-03-28T21:11:03.550
> 
> 标签：c#, service

我有一个用 c# 编写的 windows 服务，它在运行时连接到一个 sql server 数据库。

当服务首次启动时，它会连接到数据库以获取服务运行所需的各种信息。

该服务设置为在安装它的服务器重新启动时自动启动。

如果服务在 sql server 服务启动之前启动。我的服务在启动时显然在尝试连接到数据库时出现初始执行错误。为了解决这个问题，如果发生异常，我在尝试再次连接到数据库之前添加了一个短暂的延迟，我会继续这个 n 次直到它连接

我的问题是，是否有任何替代解决方案可以替代我已经在做的事情

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:15:16.760

使您的服务依赖于 SQL Server，使用“sc”完成。

使用轮询，就像你现在所做的那样，如果你的服务在 SQL Server 之后启动，你仍然需要它，因为你永远无法确定 SQL Server 那时已经完全启动。

# c# - TabControl 与 Alignment=Bottom 和 Appearance=Buttons

> ID：15692250
> 
> 赞同：2
> 
> 时间：2013-03-28T21:11:25.090
> 
> 标签：c#, winforms, visual-studio, windows-forms-designer

有谁知道是否有办法使用 Visual Studio 设计器在 .NET/WinForms 中解决此问题？

基本上，如果您采用空白表单并添加 TabControl，然后将 Alignment 属性设置为 Bottom 并将 Appearance 属性设置为 Buttons（或 FlatButtons），则 TabControl 没有可使用的面板。我根本无法向 TabPage 添加任何控件。有解决办法吗？我有一个嵌套的 TabControl，我想使用底部/按钮选项卡外观，但我根本无法让它工作。我想我可以使用带有面板的标准按钮来切换可见性，但这并不理想。

![在此处输入图像描述](../Images/fde40586d4fb1b19aa3e429a5281d7c3.png)

奖金问题：

为什么当我将对齐设置为向右或向左（外观 = 按钮）时，选项卡与选项卡页中的实际面板之间存在如此巨大的差距？

![在此处输入图像描述](../Images/5f85d93d027f8529a35c885bcd17b788.png)

谢谢！

编辑：使用 .NET 4.0 w/VS2012

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-06T09:32:52.387

外观属性 = 按钮是问题所在。将其修改为正常。

# python - 在 mac 终端中使用 Python 2.7.3 进行网络爬取的代码？

> ID：15692252
> 
> 赞同：0
> 
> 时间：2013-03-28T21:11:37.427
> 
> 标签：python, screen-scraping, wget, web-crawler

在编码方面，我是一名社会科学家，也是一个完整的新手/菜鸟。我已经搜索了其他问题/教程，但无法获得如何抓取专门针对评论部分的新闻网站的要点。理想情况下，我想告诉 python 抓取一些页面并将所有评论作为 .txt 文件返回。我试过了

```
from bs4 import BeautifulSoup
import urllib2
url="http://www.xxxxxx.com" 
```

在我收到一条错误消息说`bs4`不是模块之前，这就是我所能做到的。我将不胜感激任何形式的帮助，如果您决定回应，请为我 DUMB IT DOWN！

我可以`wget`在终端上运行并从网站上获取各种文本，如果我能真正弄清楚如何将单个输出 html 文件保存到一个大的 .txt 文件中，那就太棒了。我将对任何一个问题作出回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:15:14.123

尝试[刮擦](http://scrapy.org/)。它是一个快速的高级屏幕抓取和网络抓取框架，用于抓取网站并从其页面中提取结构化数据。它可用于广泛的用途，从数据挖掘到监控和自动化测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:44:11.620

您很可能会在使用过程中遇到这种情况，但在某些情况下，如果该网站使用第三方服务（例如 Disqus）进行评论，您会发现您无法以这种方式将评论拉下来。只是一个抬头。

我以前走这条路，不得不根据特定站点的布局/设计/等来定制脚本。

如果您不介意使用 Python 的字符串处理函数进行后处理，我发现 libcurl 非常方便。

如果你不需要纯粹在 Python 中实现它，你可以利用 wget 的递归镜像选项来处理内容拉取，然后编写你的 python 代码来解析下载的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:15:17.510

我也会在这里加两分钱。

首先要检查的是您安装了漂亮的汤，并且它位于可以找到的地方。这里有各种各样的问题。

我的经历与你的相似：我在一家网络创业公司工作，我们有很多注册用户，但没有向我们提供有关他们工作的信息（这对我们来说实际上很重要）。所以我的想法是从他们的电子邮件地址中的域中抓取主页和“关于我们”页面，并尝试围绕我捕获的数据放置一个学习算法来预测他们的工作。每个域的结果都存储为文本文件。

不幸的是（对你来说......对不起），我最终得到的代码有点复杂。问题是当你进行抓取时你最终会得到很多垃圾，你必须过滤掉它。您还将遇到编码问题，并且（假设您想在这里进行一些学习）您将不得不摆脱低价值的单词。总代码大约 1000 行，如果您有兴趣，我会在这里发布一些可能对您有所帮助的重要部分。

# css - WordPress；.current-menu-item 显示图像链接的悬停状态

> ID：15692257
> 
> 赞同：1
> 
> 时间：2013-03-28T21:11:55.477
> 
> 标签：css, wordpress, anchor, nav

所以我有一个导航栏，它使用图像而不是文本，一个图像是正常状态，另一个是悬停状态。

在 wordpress 中，您可以使用内置的 .current-menu-item 类影响您当前所在页面的菜单项，这对文本非常有效，但我似乎无法让它适用于图像。

在特定页面上时，我希望关联的菜单项显示在悬停状态下使用的图像。

这是链接：[http](http://ericbrockmanwebsites.com/dev4/) ://ericbrockmanwebsites.com/dev4/这里的代码一目了然。

CSS（一旦我进一步投入生产，我将使用精灵）：

```
 #access {
    display:block;
    float:left;
    margin:30px 0;
    padding:0;
    list-style:none;
  }

 #access li {
    display:block;
    float:left;
    margin:0 5px;
    padding:0;
    list-style:none;
  }

  #access .home a {
    display: block;
    background-image: url(images/nav-btn-home.png);
    background-repeat: no-repeat;
    width: 164px;
    height: 164px;
    text-indent: -9000px;
  }

  #access .home a:hover, #access .home .current-menu-item {
    display: block;
    background-image: url(images/nav-btn-home-hover.png);
    background-repeat: no-repeat;
    width: 164px;
    height: 164px;
    text-indent: -9000px;
  }

  #access .music a {
    display: block;
    background-image: url(images/nav-btn-music.png);
    background-repeat: no-repeat;
    width: 164px;
    height: 164px;
    text-indent: -9000px;
  }

  #access .music a:hover,   #access .music a:active {
    display: block;
    background-image: url(images/nav-btn-music-hover.png);
    background-repeat: no-repeat;
    width: 164px;
    height: 164px;
    text-indent: -9000px;
  } 
```

标记（使用内置自定义菜单的 WP）：

```
<nav id="access">
    <?php wp_nav_menu( array( 'theme_location' => 'main-nav' ) ); ?>
</nav> <!-- access --> 
```

非常感谢提供解决该问题的好文章的建议或链接！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:28:16.200

看起来您正在尝试选择同时**包含**`li`the和**类**的。您的选择器将选择任何具有 的项目，这些项目是*该类*项目的子项目。**`home` **`current-menu-item``current-menu-item`*`home`*****

 *****但是，这应该对您有用：

```
#access .home a:hover, #access .home.current-menu-item > a {
    display: block;
    background-image: url(images/nav-btn-home-hover.png);
    background-repeat: no-repeat;
    width: 164px;
    height: 164px;
    text-indent: -9000px;
} 
```

`.home`注意和之间没有空格`.current-menu-item`。此选择器将选择具有**这两个**类的任何元素。

另请注意，看起来命名的图像`nav-btn-home-hover.png`不存在（或者至少由于某种原因它不会加载到我的检查器中）。

玩得开心！*****

# c# - 我正在尝试从位于索引零的数据表中检索数据，但我无法访问它 C#

> ID：15692258
> 
> 赞同：1
> 
> 时间：2013-03-28T21:11:56.750
> 
> 标签：c#, ado.net

```
byte[] file = (byte[]) dt1.Rows[0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:20:37.883

你可以试试这个方法：

byte[] 文件 = (byte[])dt.Rows[0]["ColumnName"];

或者

byte[] 文件 = (byte[])dt.Rows[0][ColumnIndex];

或者

您还可以使用 DataReader 而不是 DataTable 来获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:16:48.490

您不能将数据表行强制转换为`byte[]`. 您还需要指定单元格...

```
byte[] file = (byte[])dt1.Rows[0][0] 
```

假设您想要第 0 行第 0 列的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:17:55.130

你可以试试这样的东西吗？

```
var file = dt1.Rows[0]["FieldName"] 
```

# javascript - 将数据加载到静态 html 表单页面或 XML 并使用 javascript

> ID：15692262
> 
> 赞同：0
> 
> 时间：2013-03-28T21:12:10.940
> 
> 标签：javascript, html, css, xml

我有一个文本数据 (CSV) 文件，需要将其转换为静态 HTML 页面以供用户查看。在 HTML 页面中，用户需要能够将数据过滤到视图中。每个 HTML 文件都将被存档。

我计划将 JavaScript 用于用户过滤功能。我计划使用 Perl 脚本将 CSV 文件转换为 HTML 文件，并在其顶部包含一个用于用户过滤器选项的表单。HTML 文件将引用 JavaScript 文件。

我的问题是：

1.  我正在考虑将数据转换为 XML。这是更好的做法吗？
2.  如果是这样，是否可以在 XML 中使用 Web 表单并运行 javascript 函数？
3.  我有一个用于 HTML 文件的 CSS。我必须对 XML 使用 XSLT 吗？
4.  有没有办法将 XML 和 HTML 组合成一个文件？这有什么好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:57:54.453

您可以将 XML 用作 SOURCE 而不是 CSV，因为 XML 定义了更简洁的数据处理方式（值中的逗号、分号、' 和 "）。

如果内容是静态的，并且您将存储它，那么我建议您使用最接近最终结果的格式。那将是 HTML+JS+CSS 文件。（JS 和 CSS 可帮助您将一些重复信息排除在 HTML 之外）。

现在有一点背景。默认情况下，XML 是不可见的，您应该将它与 XSLT 文件一起使用。发生的情况是浏览器通过使用 XSLT 将 XML 转换为 HTML 来“打开”XML。在这种情况下，您需要额外的 XSLT 文件和能够运行它的客户端（现在大多数浏览器都非常擅长）。但是您只会出于三个原因使用此解决方案。1) 如果您有太多 XML 文件（已经在手边），您不想用 XSLT 处理它们并保存生成的 HTML 而不是它们，并将这种（浪费重复的）计算负担留给客户端。2) XML 文件还有其他用途。3) 生成的 HTML 比源 XML 大得多，它会带来存储问题（尽管 CSS 和 JS 文件应该足以避免这种情况）。

# c# - 如何将大文本加载到textview

> ID：15692265
> 
> 赞同：0
> 
> 时间：2013-03-28T21:12:18.227
> 
> 标签：c#, gtk

我正在加载一个大文本（100 000+ 行文本），textview 需要很长时间才能显示它。我知道很难加载这么多的文本，但是至少有一种方法可以在加载所有文本之前禁用 textview 控件，这样用户就不能滚动它，或者在它被加载到 textview 期间进行修改？

我宁愿将其变灰（敏感 = false）并在加载文本时显示“正在加载”。或者，如果可能的话，只需以某种方式加载它即可立即加载（例如仅渲染部分文本）

我现在使用的代码真的很简单，巨大的文字在 StringBuilder 里面

第一个变体：

```
// everything is StringBuilder
simpleview.Buffer.Text = everything.ToString();
if (ScrollingEnabled)
{
    simpleview.ScrollToIter(simpleview.Buffer.GetIterAtLine(ContentLines.Count), 0, true, 0, 0);
} 
```

第二个（在我看来更快一点）

```
 simpleview.Buffer.Text = "";
            simpleview.Buffer.InsertAtCursor(everything.ToString());
            if (ScrollingEnabled)
            {
                simpleview.ScrollToIter(simpleview.Buffer.GetIterAtLine(ContentLines.Count), 0, true, 0, 0);
            } 
```

我不需要一次显示所有文本，但我想让用户尽可能滚动和浏览所有文本。另外我想注意到，这不仅对于 100 000 行来说很慢，甚至对于 1000 行来说实际上也很慢，而且那是一段相当短的文本......

# javascript - 为什么 JS 添加的元素样式与页面加载时的样式不同？

> ID：15692267
> 
> 赞同：1
> 
> 时间：2013-03-28T21:12:21.847
> 
> 标签：javascript, html, css

我有一种情况，有时元素是在页面加载时加载的，有时它们是由 JavaScript 在以后生成的，那里没什么特别的。然而，动态生成的元素在 Chrome、FireFox 和 Safari 中的间距明显不同。

下面是一个 HTML 页面，其中一个元素块在页面加载时位于 DOM 中，而这些元素的精确副本在页面加载后由 JavaScript 添加。出于某种原因，尽管所有样式和布局都相同，但JS 添加的元素（位于 中的元素`#added-late`）的样式与 中的元素不同。`#exists-at-page-load`

**问题**：为什么静态生成的元素（位于 中的元素）`#exists-at-page-load`周围有额外的空间？

```
<!DOCTYPE html>
<html>
    <style>
      .dark-section-header {
        background-color: #222;
        margin-bottom: 5px;
      }

      .dark-section-header div {
        display: inline-block;
        height: 30px;
        width: 20px;
        margin: 0;
        margin-left: 10px;
      }

      .dark-section-header .track-menu {
        outline: 1px dashed #f00;
      }

      .dark-section-header .play-button {
        outline: 1px dashed #0f0;
      }

      .dark-section-header .star-button {
        outline: 1px dashed #77f;
      }
    </style>

  </head>
  <body>
    <div id="exists-at-page-load">
      <div class="dark-section-header">
        <div class="play-button"></div>
        <div class="track-menu"></div>
        <div class="star-button"></div>
      </div>
    </div>

    <div id="added-late"></div>

    <script>
      setTimeout(function(){
        document.getElementById( 'added-late' ).innerHTML =
          '<div class="dark-section-header">' +
            '<div class="play-button"></div>' +
            '<div class="track-menu"></div>' +
            '<div class="star-button"></div>' +
          '</div>';
      }, 0 );
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:15:40.197

要么让javascript在div之间插入空格：

```
setTimeout(function(){
  document.getElementById( 'added-late' ).innerHTML =
    '<div class="dark-section-header"> ' +
      '<div class="play-button"></div> ' +
      '<div class="track-menu"></div> ' +
      '<div class="star-button"></div> ' +
    '</div>';
}, 0 ); 
```

或者确保您的 HTML 不会：

```
<div id="exists-at-page-load">
    <div class="dark-section-header">
        <div class="play-button"></div><!--
     --><div class="track-menu"></div><!--
     --><div class="star-button"></div>
    </div>
</div> 
```

[这](http://jsfiddle.net/vWsyF/)是 js 和间距的所有组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:16:47.643

因为它们显示为 inline-block 换行符导致它们有空格

如果我将您的静态 div 更改为

```
 <div class="play-button"></div><div class="track-menu"></div><div class="star-button"></div> 
```

空白消失

# c# - 条件 linq 查询行为

> ID：15692268
> 
> 赞同：0
> 
> 时间：2013-03-28T21:12:32.757
> 
> 标签：c#, linq, linq-to-sql

我觉得标题有误导性，如果您愿意，请编辑。当我这样做时：

```
var q  = (condition)?(from ...Select(..)): (from.. Select(..)); 
```

我在“：”处收到错误说

```
Type of conditional expression could not be determined because 
there is no implicit conversion between anonymous types. 
```

但如果我这样做：

```
var b = some base linq query;
var q = (condition)?(use b here one way):(use b here differently); 
```

没什么好抱怨的。为什么？第二种方式有什么不同？

编辑：

在任何地方，我的最终预测都是一样的。（最终的 .Select(....) 到处都有相同的字段）

编辑2：

**我道歉..我的错字。各处的 Select() 都不相同。如果投影“匹配”，方法 1 也可以正常工作**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:17:01.790

如果你在你的 LINQ 查询之后做了一个演员，一切都会好起来的。

它与您遇到的问题相同，然后您执行类似的操作

```
int? val = true ? 1 : null; 
```

那是行不通的，但是如果您像这样转换 null ：

```
int? val = true ? 1 : (int?)null; 
```

确实如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:18:32.777

条件表达式需要它评估的两个操作数是相同的类型。所以如果你这样做

```
var a = (condition)? "A" : "B"; 
```

... "A" 和 "B" 都属于同一类型（字符串），因此结果 ,`a`将属于`string`.

您的错误消息告诉您的是，您的两个操作数（两个`from ... Select`语句）评估为匿名类型，但不是相同的匿名类型，并且它不能将一种匿名类型转换为另一种匿名类型。因此它不知道结果`q`应该是什么类型。

虽然我不是 100% 肯定，但我相信即使你的两个表达式完全相同，它们也会是不同的匿名类型。无论如何，您收到该错误的事实表明它们不是相同的匿名类型。

使用第二组语句，您首先设置`b`为等于 linq 查询的结果。因此它有一个类型。尽管您的陈述确实如此，但代码编译的事实意味着`(use b here one way)`并`(use b here differently)`返回相同类型的结果。例如，如果它们都返回与 相同类型`b`的实例，则它们将属于相同类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T21:18:48.563

它认为错误消息解释了这一点：

> 无法确定条件表达式的类型，因为匿名类型之间没有隐式转换。

这

```
var x = 0 < 2 ? new { a = 1 } : new { a = 2 } 
```

会编译。但是这个

```
var x = 0 < 2 ? new { a = 1 } : new { b = 2 }; 
```

会给出上面的错误，因为 `{a=1}`and`{b=2}`不是相同的匿名类型。

# c++ - 请解释这个 c++ 语法

> ID：15692269
> 
> 赞同：0
> 
> 时间：2013-03-28T21:12:34.587
> 
> 标签：c++, syntax

有人可以从 c++ 类模板中解释以下代码段的语法吗？

```
public:
explicit Foo(size_t ratio = 500)
    :list(Bar<I>())
    ,vec(Bar<iterator>())
    ,n(0), r(ratio){} 
```

我有良好的编程经验并且理解大多数概念，但是这背后的语法对我来说太陌生了，我无法理解。`I`是泛型类型。具体来说，我不确定显式在这里做了什么，除了当人们执行一些代码时会发生什么，例如`Foo<int> myfoo;`.

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:16:00.597

该`explicit`关键字确保您的构造函数不会被选为用户定义的转换序列的一部分，以在使用 type 的值进行复制初始化时执行隐式转换`size_t`。

例如，如果没有`explicit`关键字，以下所有内容都是有效的：

```
Foo<int> bar(Foo<int> f) 
{ 
    return 0; // OK
}

Foo<int> f = 1729; // OK
bar(42); // OK 
```

将构造函数声明为`explicit`可防止上面的初始化编译。

* * *

构造函数签名之后是一个[**初始化列表**](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)，它用于在进入构造函数的主体之前构造类的基类子对象和数据成员子对象。

当您*不*使用初始化列表时，您的类的数据成员是默认构造的。但是，如果您的类具有`const`数据成员、引用类型的数据成员或没有默认构造函数的类类型的数据成员，则这可能不是一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:15:48.970

这是 class 的构造函数`Foo`，但我相信你已经知道了。

`explicit`表示此构造函数必须接收`size_t`. 也就是说，不能传入任何会被隐式转换为类型的东西`size_t`（例如：） `int`。

其余的东西是构造函数的一部分`initializer list`，这意味着构造函数`list`用`Bar<I>()`等初始化数据成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:17:05.897

这是构造函数的定义`Foo`。构造函数是`explicit`，这意味着它不会参与隐式转换。例如，考虑：

```
void bar(Foo);
bar(10); // Error - would require an implicit conversion 
```

将构造函数标记为`explicit`可防止此类转换。

之后的所有`:`内容都是成员初始化列表。它按名称列出 的成员，`Foo`括号中包含用于初始化它们的表达式。例如，`list`将使用创建的临时对象进行初始化，使用 进行`Bar<I>()`初始化`n`等`0`。

# c - 如何使用 C 在 Linux 上以编程方式杀死进程树

> ID：15692275
> 
> 赞同：6
> 
> 时间：2013-03-28T21:12:45.550
> 
> 标签：c, linux, process, tree, kill

我正在尝试编写一个生成子进程的函数，让它运行一段时间，如果它没有完成则将其杀死：

```
int sysExecTimeout(const char * exePath, int timeoutSec); 
```

在函数中，我使用`fork`and`execl`来生成孩子，当超时时，我使用`kill(pid, SIGTERM)`and`kill(pid, SIGKILL)`在 2 秒后确保孩子死亡：

```
pid_t pid = fork();

if(pid == 0) {
    execl("/bin/sh", "sh", "-c", exePath);
    exit(127);
} else if(pid != -1) {
    // timeout code
    if(timeout) {
        kill(pid, SIGTERM);
        sleep(2);
        kill(pid, SIGKILL);
    }
} 
```

我正在使用Linux，似乎当父进程死亡时，子进程不会自动被杀死。所以这两个`kill`调用只会杀死`/bin/sh`进程并让`exePath`命令继续运行，因为它是`/bin/sh`.

我正在尝试编写`sysExecTimeout`函数，以便它杀死以 为根的整个进程树`pid`，其中`pid`PID 来自`pid = fork()`

我需要这个，因为该`exePath`命令会产生其他命令，这些命令也可能产生其他命令，这些命令可能会卡住并消耗资源。

我无法控制`exePath`执行的二进制文件/脚本，因此我无法在其中编写自己的父死子逻辑。

我尝试使用`kill(0, SIGTERM)`，这几乎完成了这项工作，除了它也杀死了我自己的进程:)

我想知道是否有一个标志可以在 C 中以编程方式打开，上面写着“嘿，伙计，当我死时，带走我所有的孩子并杀死他们，并为他们的孩子递归重复”，这样整个进程树就从那个程序开始模具（假设可以遵循 PID/PPID 链）。

我可以在这里使用该标志：

```
if(pid == 0) {
    turnOnRecursiveDeathFlag();

    system(exePath);
    //execl("/bin/sh", "sh", "-c", exePath);
    exit(127);
} 
```

有没有办法做到这一点？我已经搜索了一段时间，但我能找到的只是使用 hack`ps -ef`或修改您正在运行的子进程等。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-28T21:35:46.797

在子进程中使用 setpgid 将其 GPID 设置为等于它自己的 PID。然后父级可以 kill(-pid,...) 向整个组发出信号。

```
pid_t pid = fork();

if(pid == 0) {
    setpgid(0, 0);
    execl("/bin/sh", "sh", "-c", exePath);
    exit(127);
} else if(pid == -1) {
    // timeout code
    if(timeout) {
        kill(-pid, SIGTERM);
        sleep(2);
        kill(-pid, SIGKILL);
    }
} 
```

那应该这样做。

还有一件事，当你生成一个 shell 时，确保它没有启用作业控制。否则，它将创建自己的进程组。你的“/bin/sh -c”没问题。

# iphone - IOS 上的端口转发

> ID：15692280
> 
> 赞同：0
> 
> 时间：2013-03-28T21:13:08.693
> 
> 标签：iphone, xcode, networking, tcp

对于我的 iPhone 应用程序，我想让所有传入的 tcp 连接到我的 iPhone/iPad 的端口 1000（例如 IP：10.1.2.10），以转发到主机 10.1.2.250 上的端口 1000。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:16:54.273

您将使用 TCP 和类似[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)和/或[SocketKit](https://github.com/unixpickle/SocketKit)的东西。

关于 SO 的其他相关问题：

[在 Cocoa 中构建服务器/客户端应用程序](https://stackoverflow.com/questions/7047250/building-a-server-client-application-in-cocoa)

# ninject - ninject.mvc3 不加载模块

> ID：15692286
> 
> 赞同：0
> 
> 时间：2013-03-28T21:13:26.507
> 
> 标签：ninject

我在 MVC4 webapi 应用程序中通过 nuget 使用 ninject mvc3。没有对 global.asax 进行任何更改 我创建了一个 ninjectmode 并将其放在 bin 文件夹中。我注意到 NinjectWebCommon.cs 中的“bootstrapper.Initialize(CreateKernel)”行正在引发异常“序列不包含元素”。如果我删除包含我的 ninject 模块的 dll，错误就会消失。我究竟做错了什么？我希望能够使用 NinjectModules 来分离我的应用程序中的关注点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:23:14.447

Figured it out. Apparently, when you add Ninject.MVC3 to a class library project via Nuget, it adds an "App_Start" folder similar to how it does for a web application project. This was causing the above error. I removed the App_Start folder and life is good once again.

# javascript - 我如何 .removeClass('active') 只为我的一个 带有 jQ uery 的元素？

> ID：15692291
> 
> 赞同：0
> 
> 时间：2013-03-28T21:13:39.290
> 
> 标签：javascript, jquery, html

我在弄清楚如何从我的一个列表中删除一个 class ="active" 时遇到了一些问题。

我有一个导航栏：

```
<div class="container">
  <ul class="nav">
    <li class="active"><a href="#"></a>Home</li>
    <li><a href="#"></a>About</li>
    <li><a href="#"></a>Contact</li>
  </ul>
</div> 
```

我在 Home 中也有一个菜单：

```
<div class="container_2">
  <ul>
    <li class="left-main-list active"><a href="#">Subject 1</a></li>
      <ul class="list-in-list">
        <li><a href="#">Sub subject 1</a></li>
        <li><a href="#">Sub subject 2</a></li>
      </ul>
    <li class="left-main-list><a href="#">Subject 2</a></li>
    <li class="left-main-list><a href="#">Subject 3</a></li>
  </ul>
</div> 
```

当我在主页上浏览菜单时，我想在单击时将活动列表项类更改为活动，所以我现在有了这个 jQuery 代码：

```
$(document).ready(function() {

     $('li').click(function() {
        $('li').removeClass('active'); 
        $(this).addClass('active'); 
    });

 }); 
```

这适用于我的菜单，类更改为当前菜单，但它也删除了我不想要的导航栏类。:)

我试过类似的东西：

```
$(document).ready(function() {

    $('.left-main-list').click(function() {
       $('.left-main-list li').removeClass('active'); 
       $(this).addClass('active'); 
    });

}); 
```

我试过 '.left-main-list li' & 'li.left-main-list' 没有任何成功。

非常适合回答这个问题，我希望我的问题（这次）比我以前的问题更准确。:)

/账单

ps：一个子主题和一个主主题是否可以同时处于活动状态，并且该子主题的活动类别，如果您例如单击另一个子主题，则将其删除，但主要项目仍然具有其活动类别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:19:30.530

> 当我在主页上浏览菜单时，我想在单击时将活动列表项类更改为活动

您可以只针对`li`相关的 s `div`，类似于：

```
$(document).ready(function() {
    var $listItems = $('div.container_2 li');

    $listItems.click(function() {
        $listItems.removeClass('active'); 
        $(this).addClass('active'); 
    });
 }); 
```

* * *

[**DEMO**](http://jsfiddle.net/AYna5/) -仅`li`范围内`.container_2`

* * *

> 一个子主题和一个主要主题是否可以同时处于活动状态，并且如果您例如单击另一个子主题但主要项目仍然具有它的活动类别，那么该子主题的活动类别会被删除吗？

仍然以容器为目标，您可以使用 jQuery 的[**parent()**](http://api.jquery.com/parent/)，类似于：

```
$(document).ready(function () {
    $('div.container_2 li').click(function () {
        var $this = $(this);
        var $children = $this.parent().find('li');

        $children.removeClass('active');
        $this.addClass('active');
    });
}); 
```

* * *

[**DEMO**](http://jsfiddle.net/QEHd4/) -`parent()`用于允许活动菜单和子菜单，但在主菜单更改时不允许

* * *

当在位于不同主菜单元素内的子菜单之间切换时，我研究了使其更加动态的可能性，以便在链上添加项目的激活。

修复嵌套 s 的 HTML，`ul`从而使您的嵌套`ul`s 在`li`s 内部而不是仅在上部内部，`ul`您可以进行完全动态的实现。

假设你的 HTML 是这样的：

```
<div class="container">
    <ul class="nav">
        <li class="active"><a href="#"></a>Home</li>
        <li><a href="#"></a>About</li>
        <li><a href="#"></a>Contact</li>
    </ul>
</div>
<div class="container_2">
    <ul>
        <li class="left-main-list active"><a href="#">Subject 1</a>

        </li>
        <li>
            <ul class="list-in-list">
                <li><a href="#">Sub subject 1</a>

                </li>
                <li><a href="#">Sub subject 2</a>

                </li>
                <li>
                    <ul class="list-in-list">
                        <li><a href="#">Sub subject 1</a>

                        </li>
                        <li><a href="#">Sub subject 2</a>

                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li class="left-main-list"><a href="#">Subject 2</a>

        </li>
        <li class="left-main-list"><a href="#">Subject 3</a>

        </li>
    </ul>
</div> 
```

现在，使用以下脚本，您还可以在从子菜单更改到另一个主菜单项中的另一个时使任何子菜单项的父项处于活动状态，类似于：

```
$(document).ready(function () {
    $('div.container_2 li>a').click(function () {
        var $this = $(this);
        var $relatedElements = $this.parents('ul').find('li');

        if($this.hasClass('active')){
            return;
        }

        $relatedElements.removeClass('active');
        $this.parent('li').addClass('active');

        var $parents = $this.parents('li');

        $parents.each(function(){
            $(this).not($this.parent()).prev().addClass('active');
        });
    });
}); 
```

* * *

[**DEMO**](http://jsfiddle.net/e7dY7/) - 链式激活

* * *

我认为这应该有所有可能的例子来让你从这里开始。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:19:08.840

试试这个：

```
$("li").click(function() {
    $(this.parentNode).children("li").removeClass("active");
    $(this).addClass("active");
}); 
```

这只会影响您单击的元素的兄弟姐妹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:18:11.207

```
$('.left-main-list').click(function() {   
   $('.left-main-list').removeClass('active');
   $(this).addClass('active'); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:23:53.753

我认为您正在寻找的是：

```
$(document).ready(function() {
   $('li').click(function() {
    $('li.left-main-list').removeClass('active'); 
    $(this).addClass('active'); 
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T21:26:47.027

怎么样

`$('li').on ('click', function (){ $(this).addClass ('active').siblings ('li').removeClass ('active'); })`

# python - Python 从列表中删除数据以添加到新列表中

> ID：15692293
> 
> 赞同：2
> 
> 时间：2013-03-28T21:13:48.563
> 
> 标签：python, list, word, add

问题：如何从列表中删除第一个单词以添加到名为的新列表中`car_list`，并保留其余单词以添加到另一个列表中`other_list`。

在`other_list`我把剩下的放进字典里

比如当我阅读文件时，我得到类似的东西

`data_file = ['1911 Overland OctoAuto', '1913 Scripps-Booth Bi-Autogo','1920 Briggs and Stratton Flyer'`

`car_list = []` `other_list = []`

***我如何得到如下结果***

```
car_list = [Overland, Scripps-Booth, Briggs]

other_list = [1911,OctoAuto, 1913, Bi-Autogo, 1920, and Stratton flyer] 
```

***这是我所拥有的***

```
data_file = open("facts.txt", 'r')

def clean_list(data_file):
    new_list =[]
    clean_list =[]
    car_list = []
    other_list = []
    D = {}
    for i in data_file:
        new_list = data_file.split('\n') #change split by new line or word

    clean_list = [(x.strip(' ')) for x in new_list]
    car_list = (clean_list.strip().split(' ')[2:], ' ') 
    other_list = dict(zip(keys, values))# Just an example
    return car_list

car_list = clean_list(data_file) 
```

我想`car_list = (clean_list.strip().split(' ')[2:], ' ')`

会工作，但我收到以下错误。

```
car_list = (clean_list.lstrip().split(' ')[2:], ' ') 
```

`AttributeError: 'list' object has no attribute 'split'`

`AttributeError: 'list' object has no attribute 'lstrip'`

我认为通过拼接会起作用，但没有骰子。

我试过`car_list = clean_list.split(' ',2)[2]`了，什么也没打印

有任何想法吗？我知道文件正在被读取，但我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T21:19:33.143

我对您的警告是，这`other_list`看起来像是不同类型数据的混合。这通常是不明智的。有了这个免责声明，这里有一个尝试：

```
data_file = ['1911 Overland OctoAuto', 
             '1913 Scripps-Booth Bi-Autogo',
             '1920 Briggs and Stratton Flyer']

car_list = []
other_list = []
for entry in data_file:
    year, make, model = entry.split(' ',2)
    car_list.append(make)
    other_list.append(year)
    other_list.append(model)

print car_list
>>>> ['Overland', 'Scripps-Booth', 'Briggs']
print other_list
>>>> ['1911', 'OctoAuto', '1913', 'Bi-Autogo', '1920', 'and Stratton Flyer'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:21:55.390

最终，您也可以使用正则表达式来拆分字符串。

```
import re
data_file = ['1911 Overland OctoAuto', 
             '1913 Scripps-Booth Bi-Autogo',
             '1920 Briggs and Stratton Flyer']

car_list = []
other_list = []
delimiter_space = re.compile(' ')
for entry in data_file:
    year, make, model = delimiter_space.split(entry,maxsplit=2)
    car_list.append(make)
    other_list.append(year)
    other_list.append(model)

print car_list
>>>> ['Overland', 'Scripps-Booth', 'Briggs']
print other_list
>>>> ['1911', 'OctoAuto', '1913', 'Bi-Autogo', '1920', 'and Stratton Flyer'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:48:44.860

```
T = [x.split(' ', 2) for x in data_file]
car_list = [ x[1] for x in T]
other_list =  [ v for x in T for v in x if v != x[1]]
print car_list
print other_list 
```

**输出**

```
['Overland', 'Scripps-Booth', 'Briggs']
['1911', 'OctoAuto', '1913', 'Bi-Autogo', '1920', 'and Stratton Flyer'] 
```

# jquery - jQuery克隆太多？

> ID：15692294
> 
> 赞同：0
> 
> 时间：2013-03-28T21:13:53.627
> 
> 标签：jquery

这可能是一个非常简单的概念，我只是误解了这个 jsFiddle：

HTML

```
<nav>
    <ul>
        <li>item 1</li>
        <li>item 2</li>
        <li>item 3</li>
    </ul>
</nav> 
```

JS

```
var items = $('ul li').clone();

var cloner = $('ul').clone().addClass('before');

cloner.prependTo('nav');

items.appendTo('ul'); 
```

[http://jsfiddle.net/WZykS/3/](http://jsfiddle.net/WZykS/3/)

为什么`ul`我克隆的项目有 1,2,3,1,2,3...不应该只是 1,2,3 吗？

我正在尝试复制当前`ul`并在其之前添加该副本，然后复制第一个列表中的项目并复制其中的项目，但我最终得到的项目在两者中都重复，我不希望这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:16:45.803

那是因为您*克隆*了这些项目。你永远不会将它们从 dom 中删除。我认为您正在寻找[detach()](http://api.jquery.com/detach/)。Detach 也会从 dom 中移除元素。

这也会移动 ul 元素中的所有 li 元素。但是请记住，这将针对您页面上的*所有*ul 元素并将它们移动到 nav （制作更具体的选择器。如 id 或类）。

[**演示**](http://jsfiddle.net/WZykS/4/)

```
$('ul').detach().appendTo('nav'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:17:39.340

`$('ul').clone()`将克隆`<ul>` *及其*所有子项。因此，当您这样做时，`cloner.prependTo('nav')`您正在将`<ul>`其添加`<li>`到 DOM 中。

然后你做`items.appendTo('ul')`。这会将`<li>`克隆的 3 附加到页面上的*所有* `<ul>`s。

不需要`var items = $('ul li').clone()`or `items.appendTo('ul')`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:18:31.253

我没有看到问题。

```
items.appendTo('ul'); 
```

将项目 1,2,3 添加到两者，`<ul />`而不仅仅是第一个/最后一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:19:03.387

那是因为您将项目附加到最后一行的两个列表中。选择`ul`器将匹配两个列表。

如果您交换代码中的最后两行，您只会将项目添加到当时存在的一个列表中：

```
var items = $('ul li').clone();

var cloner = $('ul').clone().addClass('before');

items.appendTo('ul');

cloner.prependTo('nav'); 
```

[http://jsfiddle.net/Guffa/WZykS/5/](http://jsfiddle.net/Guffa/WZykS/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T21:22:31.057

```
// this creates a copy of each li
var items = $('ul li').clone();

// this clones the ul (and its children) and adds the class
var cloner = $('ul').clone().addClass('before');

// the cloned ul (with its children) are prepended to the nav element
cloner.prependTo('nav');

// the copied li are now appended to all found "ul" elements.
items.appendTo('ul'); 
```

做你想做的最快的方法是：

```
$('ul').clone().prepandTo('nav'); 
```

或者如果您真的想清除它并再次添加它们：

```
$('ul').clone().empty().prependTo('nav');
$('li').clone().appendTo('ul:nth-child(1)'); 
```

# c++ - 如何制作一个接收枚举的函数

> ID：15692296
> 
> 赞同：-2
> 
> 时间：2013-03-28T21:14:09.353
> 
> 标签：c++, function, enums

```
class Shapemaker
{
public:
  static Shape * shapeCreate(CDrawView::shape sh);
}; 
```

我的 CDrawView 类的枚举是

```
enum shape{line, rect, elli};
shape current_shape; 
```

当我打电话`Shapemaker::shapeCreate(current_shape)`时，我收到错误 c2653 `CDrawView`: is not a class or namespace name on`shapemaker.h`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:35:26.420

这可能是最简单的事情：

```
class Shapemaker{
    public:
    enum Color { //your colors here }
};

class Otherclass{
    void fun(Shapemaker::Color);
}; 
```

现在，如果您的编译器无法将 Shapemaker 识别为类名，那么我认为您在声明 Otherclass 之前没有包含它的头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:25:33.567

> 我试图传递颜色变量枚举，但它给了我一个编译错误，说“nameoftheclass”不是类或命名空间

您需要在使用它之前放置一个声明，这意味着您需要正确的头文件：

**我的类.h**

```
class MyClass {
    public:
        enum Color {
            Red,
            Green,
            Blue
        };
}; 
```

**我的其他类.h**

```
#include "MyClass.h" // This is required.

// Now you can use MyClass::Color freely. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:15:46.313

如果它是`enum`另一个类的成员，那么您可以将其引用为`nameoftheClass::Color`，但它必须是公开可见的：

```
void function(nameoftheClass:Color input); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:16:21.380

假设您有以下内容：

```
class C {
    public:
        enum E {
            HERP,
            DERP
        };
 }; 
```

采用该枚举的函数如下所示：

```
void foo(C::E e) {
   // do stuff with e
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T21:18:27.603

这最终都是命名空间的问题。也看看这个问题的答案，绝对不能`enum`在函数的参数列表中使用关键字，直接使用带有适当命名空间的枚举名称。

[枚举类型的命名空间 - 最佳实践](https://stackoverflow.com/questions/482745/namespaces-for-enum-types-best-practices)

# batch-processing - Sybase ASE 数据清除批处理 - 设计和性能

> ID：15692299
> 
> 赞同：1
> 
> 时间：2013-03-28T21:14:35.730
> 
> 标签：batch-processing, sap-ase

我正在开发一个 Sybase ASE（迁移到 15.7）数据清除实用程序，供多个表/数据库使用，以删除大量不需要的旧数据。

1.  收到输入表名后，自动找出子表并删除数据。但是，我找不到像 Oracle 的“Connect by .. Prior”子句这样的分层查询子句。还有其他方法可以实现吗？
2.  我通过以小增量循环多个事务/提交来删除数据。删除后，我应该在什么时间间隔进行“重组重建”？
3.  我需要更新统计信息吗？如果必须，在更新统计数据之前我应该​​考虑什么标准？
4.  某些表可能已分区。从分区的角度来看，我需要考虑什么吗？
5.  我们的一些数据库（我猜是索引..？）是聚集的。我对聚类没有太多想法。我需要从聚类的角度考虑什么吗？
6.  在处理结束时发送电子邮件。是否内置了类似于 oracle 的 UTIL_SMTP 的电子邮件包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:30:40.983

有些点现在是空白的，我会在有机会的时候填补它们。

1 - 查看[这篇关于在 Sybase ASE 中复制此功能的帖子](https://stackoverflow.com/questions/6401222/connect-by-or-hierarchical-queries-in-rdbms-other-than-oracle)。

2 -[我在 dba 堆栈上的帖子涵盖了很多关于确定何时运行*重组的关键点*](https://dba.stackexchange.com/questions/35253/sybase-ase-15-reorg-rebuild-fixes-performance-issues-why-and-how-to-tell-whe)

3 - 由于更新统计信息可以比重组（也更新统计信息）更快地完成，它有时用于帮助提高重组之间的性能。决定何时运行它们将取决于执行清除时性能下降的速度。 [**sp_sysmon**](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00842.1570/html/spsysmon/title.htm)是一个有价值的工具，它可以捕获指标以帮助您做出决定。

4 - 分区表不应该真正影响您的清除。这是另一种可以提高删除性能的情况，因为可以比其他配置更快地访问数据。

5 - 不是真的。从理论上讲，如果您的删除使用聚集索引，您的删除应该会更快一些。聚集索引用于在插入记录时保持数据页的顺序，而不是堆积插入。

6 - 对于基于 Windows 的系统，可以使用**xp_sendmail 。**对于基于 *nix 的系统，**xp_cmdshell**可用于访问*sendmail*。这些[扩展存储过程的文档在这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc36273.1570/html/sprocs/X35170.htm)。

# java - 多请求响应转发

> ID：15692300
> 
> 赞同：1
> 
> 时间：2013-03-28T21:14:57.163
> 
> 标签：java, jsp, servlets, requestdispatcher

我目前正在`ArrayList's`使用以下代码将一些从我的 servlet 传递到我的 JSP 页面。

```
 RequestDispatcher rd = null;
    request.setAttribute("date",al);
    request.setAttribute("bau",al1);
    request.setAttribute("project",al2);
    rd = request.getRequestDispatcher("ResourceChart.jsp");
    rd.forward(request,response); 
```

问题是当我单击页面上的刷新时，再次传递相同的日期，我最终得到奇怪的结果。我是否也应该转发到 JSP 页面以避免 servlet 重新生成变量并传递它们？

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:22:17.323

您显然正在刷新 POST 请求并忽略/确认浏览器的内置警告，即数据将被重新发送。在这种情况下，该`doPost()`方法确实会使用先前提交的数据重新执行，这些数据最终只会出现在数据库中的重复条目中。

避免在刷新 POST 请求时重复提交的规范方法是在 POST 请求之后发送重定向。重定向会隐式创建一个新的 GET 请求。然后刷新将导致仅重新执行 GET 请求，这是完全无害的。

为此，请`doPost()`用以下单行替换所有显示的问题行

```
response.sendRedirect(request.getContextPath() + "/ResourceChart"); 
```

*（假设您的 servlet 映射到 的 URL 模式`/ResourceChart`）*

并创建一个新`doGet()`方法，在其中将所有已删除的行放回原处，以及准备列表的必要逻辑。您需要做的唯一更改是将 JSP 文件放在`/WEB-INF`文件夹中，以避免最终用户能够通过输入/猜测其 URL 而无需`doGet()`首先调用 servlet 来直接打开它。

```
request.getRequestDispatcher("/WEB-INF/ResourceChart.jsp").forward(request, response); 
```

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)

# html - HTML中心内容通过边距自动不起作用

> ID：15692302
> 
> 赞同：4
> 
> 时间：2013-03-28T21:15:01.153
> 
> 标签：html, css

我有以下 HTML 代码

```
<div id="team">
    <h1>Team</h1>
    <img src="assets/divider.png" id="divider">
    <img src="assets/team.png" id="team_pic">
</div> 
```

下面的 CSS

```
div#team {
    margin: 0 auto;
    margin-left:auto;
    margin-right:auto;
    right:auto;
    left:auto;
} 
```

但是，子元素分隔符和团队图片一直在左侧。我虽然 margin:auto 会将所有内容居中。

然后我将以下内容放入子元素中。

```
div#team img#team_pic {
    width:704px;
    height:462px;
    margin-left:auto;
    margin-left:auto;
} 
```

不，什么都没有发生，元素仍然向左而不是居中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T21:20:41.983

您需要将宽度设置为#team，例如：

```
div#team {
   margin: 0 auto;
   width: 800px;
} 
```

...这是以下的简写版本：

```
div#team {
    margin-top: 0;
    margin-left: auto;
    margin-bottom: 0;
    margin-right: auto;
    width: 800px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-26T19:38:50.047

默认情况下，图像是内联级元素。`display:block;`如果您希望图像和边距正常工作，则需要使用。

```
img{
 display: block;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T21:20:34.367

团队需要有一个宽度才能使用边距：自动。

```
div#team {
    margin: 0 auto;
    width: 400px;
} 
```

这是一个小提琴：[JS Fiddle](http://jsfiddle.net/btevfik/JHyVn/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-05T06:09:00.303

float 也会对此感到不安。 `float:none;`如果您认为它可能从某个地方的另一个规则继承了“float”指令，那么它就可以解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T21:31:29.123

```
#team { 
    margin: auto; 
    width: 400px;
} 
```

当且仅当我们想在页面中心显示我们的 div 时，边距基本上**取决于宽度。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-30T07:22:39.467

****使用显示：块；对于图像类。****

# assembly - 使用汇编在屏幕上显示字符

> ID：15692303
> 
> 赞同：1
> 
> 时间：2013-03-28T21:15:01.747
> 
> 标签：assembly, command-prompt

我一直很难让这段代码工作，这是我第一次使用汇编。我使用 NASM 创建了一个 .com 文件，没有任何错误，但仍然没有显示字符，使用 AFD 进行调试我意识到一切正常，但是这一行 mov word [es:di], 0x0720, 这是为了在di 指向的方向，但未显示，我尝试将 0x0720 更改为空格以外的代码，但仍然没有显示字符。

```
[org 0x100]
                mov ax, 0xb800
                mov es, ax
                mov di, 0

nextchar:       mov   word [es:di], 0x0720
                add   di, 2
                cmp   di, 4000
                jne   nextchar

        mov ax, 0x4c00
        int 0x21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:24:53.670

先尝试设置[合适的视频模式](http://www.ctyme.com/intr/rb-0069.htm)。例如：

```
mov ax,0x0003  ; 80x25 text mode, 16 colors
int 0x10 
```

# uml - 用例图 < >

> ID：15692305
> 
> 赞同：0
> 
> 时间：2013-03-28T21:15:10.297
> 
> 标签：uml, diagram, use-case

我为我提议的系统创建了下图，但有几个问题。

该项目包含三个组件：程序 (Java)、网站和数据库。

使用该程序，用户可以生成数据并将其提交到数据库。然后，用户可以通过 Web 界面查看。

从图中可以看出，我有“导出数据” `<<extend>>`“将信息传递到网站”。（数据库通过PHP从数据库中检索数据）。这是否意味着“导出数据”需要在“网站界面边界”中。

另外，如果我要添加第三个边界 - 那是不好的做法吗？

![建议的用例](../Images/7ef3dc91675f24faf065bf2b0876a367.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:32:39.023

为了具体回答您的主要问题，对用例（例如扩展）和用例包含（例如包或系统边界）之间的链接没有强烈要求

但除此之外，请允许我对您的图表说一些看起来很尴尬的事情：

*   我们应该在图中包含以下信息：哪个参与者执行此用例？这里我假设数据库不是执行者，所以除了底部的三个用例之外，这个图中的用例没有遵守这个规则。
*   您只能在参与者和用例之间画线，不能在两个用例之间画线。在这里，例如在导出数据和查询数据库之间，您是什么意思？如果你的意思是导出数据过程的一部分会查询数据库，那么你需要一个`<<include>>`关系，箭头指向查询数据库，这意味着查询数据库是导入数据的强制子用例。但好吧，这是一个疯狂的猜测......
*   我也不确定你`<<extend>>`的 s 是否正确。这意味着当您授予权限时，您可以选择检查凭据，并且当您将信息传递到网站时，您可以选择导出数据。我很确定这不是你的意思。

总结最后两点：

```
Main use case ------------> sub use case
              <<include>>

Main use case <------------ optional sub use case
               <<extend>> 
```

在 UML 语法中，箭头在 include 和 extend 之间颠倒是相当痛苦的，但它就是这样工作的。不是我的错 ：）

# c# - 无法生成测试 X509Certificate

> ID：15692311
> 
> 赞同：1
> 
> 时间：2013-03-28T21:15:30.563
> 
> 标签：c#, x509certificate2, makecert

我在商店中创建可在 WCF 中使用的测试 X509Certificate 时遇到问题。当我尝试在 WCF 通道工厂中使用它时，我创建的所有证书都具有相同的结果 - “X.509 证书中不存在私钥”。

```
channelFactory.Credentials.ClientCertificate.SetCertificate(StoreLocation.CurrentUser, StoreName.TrustedPeople, X509FindType.FindBySubjectName, "MyClientCert"); 
```

我已经尝试将证书放在 LocalMachine 中，让它自签名与测试 CA。没有任何帮助，证书始终具有属性 HasPrivateKey 等于 false。

**更新：按照**[http://msdn.microsoft.com/en-us/library/ff650751.aspx](http://msdn.microsoft.com/en-us/library/ff650751.aspx) 上的说明，我已经解决了上述问题。但是，当我尝试将消息发送到队列时，我遇到了一个新问题，证书现在会生成一个新错误。错误是：

发送到队列时出错：加密函数失败。(-1072824272, 0xc00e0030)。确保 MSMQ 已安装并正在运行。如果要发送到本地队列，请确保队列存在并具有所需的访问模式和授权。

同样，如果我使用真实证书而不是测试证书，则该过程有效，因此它似乎必须与证书相关。

# c++ - 无法将“this”的引用传递给另一个类的构造函数

> ID：15692312
> 
> 赞同：1
> 
> 时间：2013-03-28T21:15:37.393
> 
> 标签：c++, object, reference

我们有一个`class CJ`that 在创建时，它会创建一个不同的`class BA`对象，它希望向其传递对自身的引用，如下所示：

```
BA:BA(const CJ& myCJRef); 
```

编译器总是出错：

> 错误：未初始化的引用成员 BA::myCJRef

`CJRef`在类中定义`BA`为类类型`CJ`

现在的数量`&`，`*`或者什么都不做，只会导致同样的错误。初始化很困难，因为初始化`myCJRef`需要传递另外两个类，但它会指向错误的对象。

我是一个'C'家伙......这令人困惑。

谢谢大家！

* * *

按照下面的答案，我到了使用这个指针调用 CJ 对象中的方法的地步，真正的代码如下：

InputPoolBufferAdapter::InputPoolBufferAdapter (CJpsMixerChannel& _CJ, int jitter, int maxBuffers, unsigned long maxBufferAge): myCJpsMixerChannel (_CJ)

```
{
        myCJpsMixerChannel = _CJ;

        myJitter = jitter;  // assuming jitter will be the number of floats

        myJitterCounter = 0;

        myMaxBuffers = maxBuffers;

        myMaxBufferAge = maxBufferAge;

        myPopulateMetadataRequests = 0;

        mySendDataReadyAlert = true;

        clearBufferAdapterThreshhold = CLEAR_BUFFER_ADAPTER_THRESHHOLD;
};    

void InputPoolBufferAdapter::returnDataBufferToPool (ChannelBuffer_t buf) 
{
    void CJpsMixerChannel::myCJpsMixerChannel->returnBufferToInputPool(ChannelBuffer_t *returnBuffer_p);
};

void InputPoolBufferAdapter::notifyDataAvailable ()
{
    void myCJpsMixerChannel.notifyDestinationsDataAvailable(void);
};

void InputPoolBufferAdapter::bufferAdapterError (int a)
{
    void &myCJpsMixerChannel.inputBufferAdapterError(int error_code);
}; 
```

* * *

如您所见，我尝试了几件事，但无法编译，错误是：

InputPoolBufferAdapter.cpp：在成员函数'virtual void InputPoolBufferAdapter::returnDataBufferToPool(ChannelBuffer_t)'中：InputPoolBufferAdapter.cpp:33:50：错误：'->'令牌之前的预期初始化程序 InputPoolBufferAdapter.cpp：在成员函数'virtual void InputPoolBufferAdapter:: notifyDataAvailable()': InputPoolBufferAdapter.cpp:38:32: error: '.' 之前的预期初始化程序 令牌 InputPoolBufferAdapter.cpp：在成员函数“virtual void InputPoolBufferAdapter::bufferAdapterError(int)”中：InputPoolBufferAdapter.cpp:43:32：错误：“。”之前的预期初始化程序 令牌

我很茫然，对于这个不再“困惑”但绝对是“迷惑”的软件人的任何想法（我不敢相信在“C”嵌入式系统工作了 25 年后，这让我搞砸了！）。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:19:42.203

我需要猜测一下，但是您的类`BA`也有一个名为 的成员变量`myCJRef`，对吗？它的类型是`const CJ&`，就像参数一样。在这种情况下，您需要这样做：

```
BA::BA( const CJ& r ) : myCJRef( r )
{
  // note: myCJRef = r; would not work here.
} 
```

因为你需要初始化成员变量。该错误不涉及您的ctor的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:19:27.170

大概`BA`有一个非静态成员`const CJ& myCJRef`。引用类型对象不能保持未初始化，因此您需要确保此引用已由构造函数的成员初始化列表初始化。所以构造函数的定义看起来像这样：

```
BA::BA(const CJ& myCJRef)
  : myCJRef(myCJRef)
{
  // ...
} 
```

之后的所有`:`内容都是成员初始化列表。`myCJRef`在这种情况下，它表示使用参数初始化成员`myCJRef`（它们具有相同的名称是可以的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:21:42.467

你应该发布一些代码。无论如何，不​​使用任何 C++11 语法，这就是我要走的路：

```
CJ::CJ() : BA(*this) { //CJ constructor here }

BA::BA(const CJ& myCJ) : myCJref(myCJ) { //BA constructor here } 
```

这里我只写了 CJ 和 BA 构造函数。BA 必须有一个数据成员 const CJ& myCJref 才能工作。

# android - GridView 项目选择器选中状态未出现

> ID：15692328
> 
> 赞同：2
> 
> 时间：2013-03-28T21:16:44.890
> 
> 标签：android, android-gridview, android-selector

我有`GridView`一堆使用自定义适配器填充的项目。网格视图`CHOICE_MODE_MULTIPLE_MODAL`在 java 中设置为，我可以使用上下文操作栏选择内容（所有这些都很好）。

我希望网格项目在按下时突出显示，并在选择时具有不同的突出显示（正是您将在 ICS 的图库应用程序中看到的行为）。

我有一个在网格视图 XML 中指定的选择器，如下所示`listSelector="@drawable/grid_item_selector"`：我也指定了`android:drawSelectorOnTop="true"`。这是选择器 XML：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/grid_item_selected" android:state_activated="true"/>
<item android:drawable="@drawable/grid_item_selected" android:state_checked="true"/>
<item android:drawable="@drawable/grid_item_selected" android:state_selected="true"/>
<item android:drawable="@drawable/grid_item_pressed" android:state_pressed="true"/>
<item android:drawable="@android:color/transparent"/>

</selector> 
```

按下状态完美运行。但是，选中/选中状态永远不会出现。

即使我在我的 java 代码中设置了要检查的项目，检查状态也永远不会出现。

我无法将选择器设置为网格项目本身的背景，因为我需要将选定的可绘制状态作为前景，而不是背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T13:58:03.960

选择器仅显示在您正在触摸的东西上。一旦你离开你的手指，它就不再显示了。

所以，我最终做的是在布局底部有一个视图（所以它出现在顶部），背景设置为选择器。选择器只有 state_selected 的任何内容。操作系统处理其余部分。

不完全是最好的，但它确实有效......

# hadoop - Hadoop FS 分隔符

> ID：15692340
> 
> 赞同：1
> 
> 时间：2013-03-28T21:17:06.017
> 
> 标签：hadoop, filesystems

我正在尝试使用 hadoop fs -copyToLocal 将表复制到文件中。该命令可以流畅地工作，减去我所有的字段都合并在一起的事实。有没有办法指定分隔符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:30:36.580

你是从 Hive 表中复制的吗？而且你是直接从仓库目录复制的吗？请提供您正在使用的完整命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:53:52.687

我已经看到了完全相同的问题，将 Hive 表复制到本地文件系统将所有字段添加到一个大行中，并且在表中每一行的末尾不使用 '\n' 字符。

您最好的选择是使用自定义 SerDe（Serializer 和 DeSerializer）将 hive 导出到 CVS，如此[处](http://dev.bizo.com/2010/11/csv-and-hive.html)所述。您也可以从[github](https://github.com/ogrodnek/csv-serde)获取源代码。

# jquery - jQuery .load() 问题

> ID：15692344
> 
> 赞同：0
> 
> 时间：2013-03-28T21:17:15.370
> 
> 标签：jquery, html

我正在玩弄 jQuery 的美妙世界（因为我最终想要制作好的 web 应用程序/游戏）并且我进入了 .load 和 .get 主题。我看到（这里和其他一些地方）如果需要，您可以将页面的 html 插入到 div 中。[我在 jsFiddle 上尝试过这个，](http://jsfiddle.net/ccQ8A/)但结果是他们应该的。我究竟做错了什么？

```
<button id="btn1" type="button">Click!</button>
<div id="box1" style="width: 100px; height:100px"></div>
<div id="box2" style="width: 100px; height:100px"></div> 
```

和

```
$('#btn1').click(function () {
    $('#box1').load('http://stackoverflow.com');
    $('#box2').load('http://stackoverflow.com');
}); 
```

我在一堆不同的浏览器中尝试了相同的代码，但仍然没有运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:33:58.540

[由于同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法执行此操作

您无法从调用脚本之外的域加载数据

# php - PHP中的多个if语句

> ID：15692347
> 
> 赞同：0
> 
> 时间：2013-03-28T21:17:23.523
> 
> 标签：php, switch-statement, conditional, case

我知道这不是这样做的方法，但我在尝试使用条件语句设置变量时遇到了一些麻烦。

对于某些上下文，`$foo`和`$foo_1`正在`$foo_2`检查是否设置了表单字段，如果是，则设置为`$bar`等于每个条件附带的计算。

```
if(isset($foo)) {
    $bar = ($baz * 52) * ($qux);
} 

if(isset($foo_1)) {
    $bar = ($baz_1 * 12) * ($qux);
}

if(isset($foo_2)) {
    $bar = ($baz_2 * $qux);
} 
```

这是因为现有代码在计算中使用了 $bar

```
$a = ($b / $bar) 
```

并`$a`在各种情况下进一步向下传递。

实际上，只有第一个`$foo`条件`$bar`正确通过，所有其他条件 $bar 输出为 NULL。

**编辑**：澄清上面的代码（这是不正确的）并在下面更新我的示例：

```
$foo = isset($form['first'] ? $form['first'] : '';
$foo_1 = isset($form['second'] ? $form['second'] : '';
$foo_2 = isset($form['third'] ? $form['third'] : '';
if(isset($foo)) {
    $bar = ($foo * 52) * $qux;
} 

if(isset($foo_1)) {
    $bar = ($foo_1 * 12) * $qux;
}

if(isset($foo_2)) {
    $bar = $foo_2 * $qux;
} 
```

Revent、Oswald 和 RoyalBG 的建议指出我的代码没有正确设置变量，事实就是如此。`$baz`, `$baz_1`,`$baz_2`已弃用且不存在，并替换为`$foo`, `$foo_1`,`$foo_2`以伴随所需输入的条件。一旦我清理了这个，我将使用 switch 语句而不是我上面写的。下面的所有评论都非常有帮助感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:24:42.577

`$foo_1`并且`$foo_2`永远不会设置。这就是为什么如果`$foo`没有设置，`$bar`也不会设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:32:02.967

如果您的条件中的代码没有传递给 PHP 引擎，当您要求设置变量时，很可能没有设置...您也可以尝试使用 switch/case 块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:26:59.470

请进一步澄清您的代码，因为我看不到您的 $baz_1 变量状态和初始化位置？

正如逻辑所说，您必须将 $foo_1 乘以 $qux 我不知道 $baz_1,$baz_2 变量是什么意思

然后，如果您正在测试 $foo_1,$foo_2 您必须根据测试变量而不是可能未设置的新变量进行计算

更多解释如果设置了 $foo,$foo_1,$foo_2 但未设置 $baz,$baz_1,$baz_2 我没有看到对 $baz 变量的任何操作，请澄清情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:47:12.257

Oswald 和 Royal Bg 是正确的，您的变量可能永远不会设置。我会以这种方式编写代码（假设您允许 $baz 和 $qux 变量的值为零）：

```
$bar = 0;   // initialize the variable so it won't be null
if(isset($foo) && isset($baz) && isset($qux)) {
  $bar = ($baz * 52) * ($qux);
} 
else if(isset($foo_1) && isset($ba_1z) && isset($qux)) {
  $bar = ($baz_1 * 12) * ($qux);
}
else if(isset($foo_2) && isset($baz_2) && isset($qux)) {
  $bar = ($baz_2 * $qux);
} 
```

然后，您可以使用 empty() 函数检查 $bar 的值，如果值为 null、零或空字符串，则返回 true。

# php - pecl 安装 apc 不工作。shtool 不存在

> ID：15692349
> 
> 赞同：19
> 
> 时间：2013-03-28T21:17:31.883
> 
> 标签：php, apc, pecl

我是一个绝对的新手……直到一个小时前才了解 SSh，并在 2 小时前获得了我的第一个 VPS。还在学习！

所以我正在安装 MediaWiki 并需要添加 APC 扩展。但是遇到了小麻烦。有什么想法/提示吗？

```
[root@www ~]# pecl install apc`
downloading APC-3.1.13.tgz ...
Starting to download APC-3.1.13.tgz (171,591 bytes)
.....................................done: 171,591 bytes
55 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
shtool at '/var/tmp/APC/build/shtool' does not exist or is not executable.
Make sure that the file exists and is executable and then rerun this script.` 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-06-26T23:46:53.463

使用以下命令从 /var/tmp 目录中删除 noexec 标志

```
挂载 -o 重新挂载，执行 /var/tmp/
```

您可以使用相同的命令添加 noexec 标志

```
mount -o remount,noexec /var/tmp/
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-11-30T14:53:19.997

试试这个，复制自[http://blog.litespeedtech.com/2013/04/05/trouble-shooting-pecl-install-doesnt-work/](http://blog.litespeedtech.com/2013/04/05/trouble-shooting-pecl-install-doesnt-work/)

> 更合适的解决方法是将 PECL 指向`temp_dir`允许执行的分区或路径：
> 
> ```
> mkdir /root/tmp
> pecl config-set temp_dir /root/tmp 
> ```
> 
> 或者
> 
> ```
> pear config-set temp_dir /root/tmp 
> ```
> 
> （有一个已知错误`pecl config-set`不起作用但`pear config-set`确实起作用。如果您遇到这种情况，只需使用 PEAR config 命令。PECL 将在安装时使用 PEAR。）
> 
> 此解决方法保留了将 /tmp 设置为 noexec 的任何安全优势，但也允许安装 PECL。

# python - 访问 2.6.2 需要 python 2.6？

> ID：15692352
> 
> 赞同：1
> 
> 时间：2013-03-28T21:17:36.233
> 
> 标签：python, visualization

我安装了 visit 2.6.2 ( [https://wci.llnl.gov/codes/visit/home.html](https://wci.llnl.gov/codes/visit/home.html) )，当我尝试运行它时，它给了我以下错误：

```
"error while loading shared libraries: libpython2.6.so.1.0: cannot open shared object file: No such file or directory" 
```

我已经启动并运行了 python 2.7.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:20:17.110

如果你已经安装了 python2.6，那么这看起来你需要设置你的`ldconfig`（假设你在 *nix 上）。添加一行`/etc/ldconfig`列出`libpython2.6.so.1.0`安装的目录，然后运行`ldconfig`：

```
# We can try to find libpython2.6.so...
find / -name libpython2.6*

# Suppose it's in /usr/local/lib, add that line to /etc/ldconfig
echo '/usr/local/lib' | sudo tee -a /etc/ldconfig

# Update ldconfig, and you should be golden!
sudo ldconfig 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T05:14:14.400

你应该添加这个：

```
/----/VisIt/current/linux-x86_64/lib 
```

到`LD_LIBRARY_PATH`环境变量，然后访问就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T16:14:55.960

不能投票上面的答案，但他是对的：在 linux 上，您不需要在系统范围内安装 python 2.6。

在 opensuse 12.2 上，以下内容对我有用（在 /home/me/bin/visit/bin 中）：

env LD_LIBRARY_PATH=/home/me/bin/visit/current/linux-x86_64/lib ./visit

# canvas - 为 Canvas 圆圈设置动画以在加载时进行绘制

> ID：15692353
> 
> 赞同：6
> 
> 时间：2013-03-28T21:17:36.500
> 
> 标签：canvas, jquery-animate, draw, radial

好的你好。

我决定开始为我的一个小项目使用 HTML 画布。

还没有真正的开始。我只是在学习 Canvas 的基础知识，我想制作一个圆圈的动画

```
<!DOCTYPE html>
<html>
 <head>
  <meta charset="UTF-8">
  <title>title</title>
    <style>
      body {
        margin: 0px;
        padding: 0px;
        background: #222;
      }

     </style>
  <link rel="stylesheet" href="style.css" type="text/css">
 </head>
<body>
<canvas id="myCanvas" width="578" height="250"></canvas>

    <script>
      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');
      var x = canvas.width / 2;
      var y = canvas.height / 2;
      var radius = 75;
      var startAngle = 1.5 * Math.PI;
      var endAngle = 3.2 * Math.PI;
      var counterClockwise = false;
      context.beginPath();
      context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
      context.lineWidth = 15;
      // line color
      context.strokeStyle = 'black';
      context.stroke();
    </script>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
  <script src="//ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js" type="text/javascript"></script>
 </body>
</html> 
```

这是我想要实现的一个小提琴[http://jsfiddle.net/oskar/Aapn8/ 。](http://jsfiddle.net/oskar/Aapn8/)我不会对“反弹”效果大惊小怪。

但我基本上希望它在页面加载时绘制并停在所需的弧度角度这是我迄今为止创建的小提琴。

[http://jsfiddle.net/skerwin/uhVj6/](http://jsfiddle.net/skerwin/uhVj6/)

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-28T22:24:50.503

**[现场演示](http://jsfiddle.net/loktar/uhVj6/4)**

```
// requestAnimationFrame Shim
(function() {
  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                              window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.requestAnimationFrame = requestAnimationFrame;
})();

var canvas = document.getElementById('myCanvas');
 var context = canvas.getContext('2d');
 var x = canvas.width / 2;
 var y = canvas.height / 2;
 var radius = 75;
 var endPercent = 85;
 var curPerc = 0;
 var counterClockwise = false;
 var circ = Math.PI * 2;
 var quart = Math.PI / 2;

 context.lineWidth = 10;
 context.strokeStyle = '#ad2323';
 context.shadowOffsetX = 0;
 context.shadowOffsetY = 0;
 context.shadowBlur = 10;
 context.shadowColor = '#656565';

 function animate(current) {
     context.clearRect(0, 0, canvas.width, canvas.height);
     context.beginPath();
     context.arc(x, y, radius, -(quart), ((circ) * current) - quart, false);
     context.stroke();
     curPerc++;
     if (curPerc < endPercent) {
         requestAnimationFrame(function () {
             animate(curPerc / 100)
         });
     }
 }

 animate(); 
```

基本上我使用了您发布的演示链接中的相同公式。然后我添加了一个动画函数，调用该函数时会更新圆圈，直到达到所需的结束百分比。

动画由[requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)持续调用，这是使用画布执行任何类型动画的首选方式。每次`animate`调用当前百分比增加一，然后用于重新绘制圆弧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:35:32.780

三个步骤：

```
1) Make an "init" function which will assign the variables (they aren't in any   
function).  
2) Then use requestAnimationFrame, or setInterval with your   
drawing function you will create.  
3) In this "drawing/updating" function you're going to   
write your code to do the maths and then just animate the updated circle. 
```

您的代码中没有任何功能。如果您不知道如何制作函数并使用它们+什么是全局变量，最好先阅读有关该内容的教程，但无论如何我会尝试为您举个例子:)

# php - PHPMailer 挂起发送

> ID：15692354
> 
> 赞同：8
> 
> 时间：2013-03-28T21:17:38.057
> 
> 标签：php, apache, wamp, phpmailer, wampserver

我已经成功地在少数人内部使用的桌面上使用 WAMPSERVER 设置了一个 Web 应用程序，这使用 PHPMailer 到一个内部 SMTP 服务器，没有加密或身份验证，它工作。

那个桌面崩溃了，我已经迁移到一个“新”桌面。我有一个 SVN 设置，所以我什至使用了大部分相同的文件和配置。可能重要的一个区别是旧桌面是 64 位，而新桌面是 32 位。这意味着我正在使用不同版本的 WAMPSERVER。

邮件只是挂起。我没有收到 PHP 错误或 PHP 超时。我只是从来没有达到我的剧本的结尾。最疯狂的部分是它可以与身份验证、ssl 和 gmail 一起使用。它只是不适用于我需要的额外简单的情况。

这有效：

```
<?php
require('class.phpmailer.php');
$mail=new PHPMailer();
$mail->ISSMTP();
$mail->Host='smtp.gmail.com';
$mail->Subject='test subj';
$mail->Body='the body email test';
$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port for the GMAIL server
$mail->Username   = "myemail@gmail.com";  // GMAIL username
$mail->Password   = "mypassword";            // GMAIL password
$mail->AddAddress('toemail@supersecret.com', 'John Doe');
$mail->SetFrom('something@gmail.com', 'First Last');
$mail->Send();
?> 
```

这曾经是，但现在不是：

```
<?php
require('class.phpmailer.php');
$mail=new PHPMailer();
$mail->ISSMTP();
$mail->Host='smtp.internal.com';
$mail->Subject='test subj';
$mail->Body='the body email test';
$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
$mail->Port       = 25;                   // set the SMTP port for the GMAIL server
$mail->AddAddress('myaddress@somewhere.com', 'John Doe');
$mail->SetFrom('someaddress@mightbereal.com', 'First Last');
$mail->Send();
?> 
```

我从调试中得到的唯一东西是

> 客户端 -> SMTP：EHLO 桌面主机名

页面上没有显示任何错误，apache 日志中也没有显示任何错误，如果它们没有显示，我通常会在其中得到 PHP 错误。

我可以通过 25 端口从桌面远程登录到主机，甚至可以输入 EHLO 命令并从服务器获得良好的响应。

我不记得以前有过这个问题，尽管我可能已经解决过一次。我在这里或 Google 上找不到任何有用的东西。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-06-14T23:14:23.550

劫持帖子说我有同样的问题，但在默认情况下设置 TLS 的示例中，将端口设置为 465 而没有将 SMTPSecure 设置为“ssl”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T17:51:38.157

可悲的是，这可能永远不会帮助遇到同样问题的其他人，但我只需将端口更改为 465 就可以让一切正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-31T16:55:43.407

最终为我的配置找到了解决方案。
只需将 ssl:// 添加到 smtp.google.com
`$mail->Host = 'ssl://smtp.gmail.com';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-27T14:57:34.180

我遇到过同样的问题。在发送方法之后没有任何显示。我意识到加密是错误的，我确实使用了 SMTPS

```
$mail->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS;
// Enable TLS encryption, `PHPMailer::ENCRYPTION_SMTPS` also accepted 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-16T01:56:37.763

如果你有一个托管在 Hostgator 中的服务器（共享主机），这就是为我解决的问题：（
`$mail->SMTPSecure = PHPMailer::ENCRYPTION_SMTPS;`
即使[PHPMailer](https://github.com/PHPMailer/PHPMailer)中的官方示例建议使用`ENCRYPTION_STARTTLS`）

# python-2.7 - 如何为嵌入 IPython Interactive Shell 的 Python 应用程序编写单元测试

> ID：15692356
> 
> 赞同：2
> 
> 时间：2013-03-28T21:17:39.797
> 
> 标签：python-2.7, ipython, python-mock

我有一个长时间运行的模拟，我需要在模拟的给定时间停止并检索和观察一些信息，然后让模拟继续。我最近开始使用测试驱动设计方法，不幸的是我不知道如何对放入交互式外壳的应用程序进行单元测试。

这是我正在尝试做的基本想法：

```
# peekaboo.py
from IPython import embed
from IPython.config.loader import Config

PAB_HEADER = 'Hello, my name is PAB. How may I help you?'
PAB_EXIT_MESSAGE = 'Goodbye, sir.'
PAB_PROMPT_IN_TEMPLATE = 'In [PAB \\#]: '
PAB_PROMPT_IN2_TEMPLATE = '   .\\D.: '
PAB_PROMPT_OUT_TEMPLATE = 'Out [PAB \\#]: '

def activate(**vars):
    """
    Activate PAB 0.1 by starting an interactive shell and putting
    the variables in the scope of the caller into the scope of this
    method.
    """
    # Add variables from caller to this scope
    locals().update(vars)
    cfg = None
    try:
        get_ipython
    except NameError:

        cfg = Config()
        prompt_config = cfg.PromptManager
        prompt_config.in_template = PAB_PROMPT_IN_TEMPLATE
        prompt_config.in2_template = PAB_PROMPT_IN2_TEMPLATE
        prompt_config.out_template = PAB_PROMPT_OUT_TEMPLATE

    embed(config=cfg, header=PAB_HEADER, exit_msg=PAB_EXIT_MESSAGE) 
```

以下是 peek_a_boo 模块如何使用的示例：

```
# long_running_app.py
import peek_a_boo
import datetime
import random

start_dt = datetime.datetime(2013,1,1)
datetimes = [start_dt + datetime.timedelta(days=i) for i in range(10)]
dt_of_interest = datetime.datetime(2013, 1, 8)
def long_running_process(dts):
    """
    simulate long running process
    """
    some_data = {}
    for dt in dts:
        some_data[dt] = random.random()
        if dt.date() == dt_of_interest.date():
            peek_a_boo.activate(**locals())

    return some_data

if __name__ == '__main__':
    data = long_running_process(datetimes)
    print data 
```

我的第一个倾向是使用模拟并修补嵌入方法并验证它是否已使用正确的参数调用，但我想知道是否有人有其他建议？

**更新：**

所以我使用鼻子进行单元测试，我尝试了以下方法：

```
# test_peek_a_boo.py
import nose
import mock

class TestPeekABoo(object):
    def setup(self):
        pass

    def teardown(self):
        pass

    @mock.patch('IPython.embed')
    def test_activate(self, mock_embed):
        """
        Test that the activate method calls IPython embed with the correct arguments
        """
        import peek_a_boo
        a = 'Hello'
        b = 'World'
        peek_a_boo.activate(**locals())
        mock_embed.assert_called_once_with(header=peek_a_boo.PAB_HEADER, ...) 
```

但是当我运行时：

> 鼻子测试 test_peek_a_boo.py

进程挂起。如果我运行：

> 鼻子测试 test_peek_a_boo.py -s

我可以看到我的过程正在进入交互式外壳。

**更新 2：**

我能够通过在测试类的 test_method 中导入 peek_a_boo 来运行上面的测试。

这个嵌入的测试实际上是调用的，但我希望能够测试 a 和 b 是否都进入了 activate 方法的本地范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:50:23.770

我想出的解决方案似乎可行，因此我将其作为解决方案发布。

```
# test_peek_a_boo.py
import nose
import mock

class TestPeekABoo(object):
    def setup(self):
        pass

    def teardown(self):
        pass

    @mock.patch('IPython.embed')
    def test_activate(self, mock_embed):
        """
        Test that the activate method calls IPython embed with the correct arguments
        """
        import peek_a_boo
        a = 'Hello'
        b = 'World'
        peek_a_boo.activate(**locals())
        mock_embed.assert_called_once_with(header=peek_a_boo.PAB_HEADER, ...) 
```

# apache - 如果我使用 apache 作为反向代理并使用 https 访问它，Web 应用程序是否受到保护

> ID：15692358
> 
> 赞同：0
> 
> 时间：2013-03-28T21:17:45.460
> 
> 标签：apache, servlets, ssl, https, reverse-proxy

我有一个运行带有 Apache 2.4.4 的 LAMP 堆栈的 Apache 服务器。我有一些 Web 应用程序在不同端口上的不同 Tomcat servlet 中运行，例如：www.example.com:8180, www.example.com:8280

在我的 apache 服务器上，我为反向代理配置进行了以下设置

```
 ProxyPass /webapp1 _http://www.example.com:8180/webapp1_
    ProxyPassReverse /webapp1 http://www.example.com:8180/webapp1

    ProxyPass /webapp2 http://www.example.com:8280/webapp2
    ProxyPassReverse /webapp2 http://www.example.com:8280/webapp2 
```

一切似乎都检查了我可以访问*http://www.example.com/webapp1*和*https://www.example.com:8443/webapp1*

Web 应用程序 servlet 未启用 https。

当使用*https://www.example.com:8443/webapp1*时，我真的使用 https 协议和 webapp1 上的页面，用户和 webapp1 之间的信息加密了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:53:14.513

不，您在浏览器和 Apache HTTPD 之间使用 HTTPS，在它和 Tomcat 之间使用 HTTP。但是，如果你做对了，Tomcat*认为*它是 HTTP，有可用的客户端证书（如果有的话）等等。

# audio - 文件和麦克风录音之间的音频信号差异

> ID：15692365
> 
> 赞同：1
> 
> 时间：2013-03-28T21:18:14.243
> 
> 标签：audio, audio-recording, audio-processing, portaudio, emotion

我正在开发用于现场录音的语音情感识别系统。我正在使用[OpenSMILE](http://opensmile.sourceforge.net/)库进行特征提取。我收集了一组包含不同类别语音类型的音频文件，并从中提取特征并训练基于支持向量机的分类器进行情感识别。然而，当在现场演讲中进行测试时，这完全失败了。原因是现场语音中的信号以及因此的特征分布（MFCC、LSP、音高、强度、F0）与文件中的完全不同。OpenSMILE 库使用[portaudio](http://www.portaudio.com/)来访问来自麦克风的音频信号。

我尝试通过无线方式播放文件（f_original）并通过麦克风录制，然后让 OpenSMILE 保存它（f_distorted）。我发现 f_original 和 f_distorted 在播放时听起来与人耳没有太大区别。[然而，在大胆](http://audacity.sourceforge.net/)可视化时的音频信号差异很大，从 f_original 和 f_distorted 中提取的特征差异很大。文件 f_original 为 16000Hz，我在特征提取之前将其上采样到 44100Hz。麦克风以 44100Hz 的频率录制。

虽然我确实预计通过麦克风录制时会出现一些失真，但我看到的失真量是极端的。

有没有其他人遇到过类似的问题？有关如何解决此问题的任何指示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T22:56:34.490

这在很大程度上取决于录音的环境因素，包括房间、扬声器/麦克风组合的频率响应以及它们在录音室内的类型/位置。该软件可能可以帮助您清理它，但获得干净的录音将是影响您的软件分析能力的最重要的因素。

假设您的录音电平设置正确，并且您的麦克风和扬声器具有相对平坦的频率响应，您仍将根据环境转换声音的频率分布。

这种效果在播放时可能不会立即明显，但会有一些声音元素受到不利影响。这已被作曲家使用，效果很好。

请参阅 Alvin Lucier在[http://www.ubu.com/sound/lucier.html上的《](http://www.ubu.com/sound/lucier.html)*我坐在房间里*》，以获取此类作品的精美示例。

您在该录音中听到的许多瞬态拖尾效应会极大地影响语音分析，因此需要非常详细地考虑录音的设置。最好与音响工程师交谈以获取有关录音设置的提示，因为这似乎是您似乎正在努力解决的部分。例如，您没有提及您正在使用的房间的声学特性或音频设置。

您还可以对您打算使用的房间/麦克风/扬声器设置进行脉冲响应，然后用脉冲对录制的语音进行反卷积，理论上这应该将录音减少到原始信号的完美表示。这很棘手，但可以提供一些令人瞠目结舌的结果。

# c# - C# NullReferenceException 未被用户代码处理

> ID：15692380
> 
> 赞同：1
> 
> 时间：2013-03-28T21:19:00.703
> 
> 标签：c#, asp.net, sql, nullreferenceexception, visual-web-developer-2010

对此的任何帮助将不胜感激。每当我运行我的程序时，我都会得到一个 NullReferenceException 未被用户代码处理。

因此，当我启动程序时，我会出现一个表单，我应该从名称列表中选择并能够更新详细信息或删除它们，但下拉列表中没有任何内容。

我在以下位置获得空参考：

```
comm.Parameters["@EmployeeID"].Value =
employeesList.SelectedItem.Value; 
```

这是 CS 文件中的选择按钮：

```
protected void selectButton_Click(object sender, EventArgs e)
{
    // Declare objects
    SqlConnection conn;
    SqlCommand comm;
    SqlDataReader reader;
    // Read the connection string from Web.config
    string connectionString =
        ConfigurationManager.ConnectionStrings[
        "HelpDesk"].ConnectionString;
    // Initialize connection
    conn = new SqlConnection(connectionString);
    // Create command
    comm = new SqlCommand(
        "SELECT FirstName, LastName, Username, Address, City, County, Post Code, " +
        "HomePhone, Extension, MobilePhone FROM Employees " +
        "WHERE EmployeeID = @EmployeeID", conn);
    // Add command parameters
    comm.Parameters.Add("@EmployeeID", System.Data.SqlDbType.Int);
    comm.Parameters["@EmployeeID"].Value =
        employeesList.SelectedItem.Value;
    // Enclose database code in Try-Catch-Finally
    try
    {
        // Open the connection
        conn.Open();
        // Execute the command
        reader = comm.ExecuteReader();
        // Display the data on the form
        if (reader.Read())
        {
            firstnameTextBox.Text = reader["FirstName"].ToString();
            lastnameTextBox.Text = reader["lastName"].ToString();
            userNameTextBox.Text = reader["Username"].ToString();
            addressTextBox.Text = reader["Address"].ToString();
            cityTextBox.Text = reader["City"].ToString();
            countyTextBox.Text = reader["county"].ToString();
            postcodeTextBox.Text = reader["Post Code"].ToString();
            homePhoneTextBox.Text = reader["HomePhone"].ToString();
            extensionTextBox.Text = reader["Extension"].ToString();
            mobilePhoneTextBox.Text = reader["MobilePhone"].ToString();
        }
        // Close the reader 
        reader.Close();
        // Enable the Update button
        updateButton.Enabled = true;
        // Enable the Delete button
        deleteButton.Enabled = true;
    }
    catch
    {
        // Display error message
        dbErrorLabel.Text =
            "Error loading the employee details!<br />";
    }
    finally
    {
        // Close the connection
        conn.Close();
    }
} 
```

这是aspx文件中的代码：

```
<p>
<asp:Label ID="dbErrorLabel" ForeColor="Red" runat="server" />
Select an employee to update:<br />
<asp:DropDownList ID="employeesList" runat="server" />
<asp:Button ID="selectButton" Text="Select" runat="server"
    onclick="selectButton_Click" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T21:34:10.720

在以下位置设置断点：

```
comm.Parameters["@EmployeeID"].Value =
        employeesList.SelectedItem.Value; 
```

当您运行程序时，检查以下值：

```
employeesList.SelectedItem 
```

如果没有选择任何项目，这很可能为 null。在使用之前尝试检查空值：

```
 if (employeesList.SelectedItem != null)
 {
comm.Parameters["@EmployeeID"].Value =
    employeesList.SelectedItem.Value;
 }
 else
 {
// Handle this case
 } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T05:45:09.247

首先，您必须从数据库中可用的表中将数据填充到下拉列表中。

示例代码：在 Page_Load 中，

```
if (!IsPostBack)
{
   ddlName.DataSource=ds;
   ddlName.DataValueField="ID";
   ddlName.DataTextField="NAME";
   ddlName.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:48:28.880

您似乎没有在下拉列表中添加任何项目。

你有：

```
<p>
<asp:Label ID="dbErrorLabel" ForeColor="Red" runat="server" />
Select an employee to update:<br />
<asp:DropDownList ID="employeesList" runat="server" />
<asp:Button ID="selectButton" Text="Select" runat="server"
    onclick="selectButton_Click" /> 
```

但是下拉列表应该包含以下项目：

```
<asp:DropDownList ID="employeesList" runat="server">
    <asp:ListItem Text="Item 1" Value="1" Selected="true" />
    <asp:ListItem Text="Item 2" Value="2"/>
</asp:DropDownList> 
```

# jquery - 如何在悬停在另一个 div 上时更改一个 div 的外观？

> ID：15692397
> 
> 赞同：0
> 
> 时间：2013-03-28T21:19:51.670
> 
> 标签：jquery, css, html, hover, fluid-layout

对于初学者，我使用的是 DW 的流式布局格式。我的布局中有多个容器，我正在寻找的是当您将鼠标悬停在图稿按钮 1 上时，图稿 1 和按钮 1 的不透明度都会改变，然后更改为图稿 12 和按钮 12。反之亦然。我尝试过使用一些 javascript - 特别是这个：[jsfiddle](http://jsfiddle.net/gU4sw/7/)

我想知道这是否与我没有相互连接的div有关。但是，如果您查看我提供的图像，我想要影响的是在主 .gridContainer 下。黑盒子已经分配了 dv id，并且属于按钮 div - 这是正确的做事方式，因为我对这一切都很陌生。

```
</head>
<body>
<div class="gridContainer clearfix">
<div id="buttons">
<div id="button1">
<div id="artwork">
<div id="artwork1"> 
```

我会提供更多信息，但我想尽可能简单。作为对所有这一切都非常陌生，我不想让这更加混乱。我认为我的问题在于尝试将 div id 分配给另一个 div 内的元素，但我真的不确定。需要一些聪明人的认真帮助！谢谢。我的声誉还不够高，无法发布图片来展示我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:40:18.333

看看 jQuery [fadeTo](http://api.jquery.com/fadeTo/)、[hover](http://api.jquery.com/hover/)和[not](http://api.jquery.com/not/)

我不知道这是否是您想要的确切效果，但它应该给您一些想法。
[http://jsfiddle.net/gU4sw/655/](http://jsfiddle.net/gU4sw/655/)

```
$('.item,.region').hover(
//Hover In
function () {
$('.item,.region').not(this).not($("#" + $(this).attr('id') + 'match')).fadeTo("fast",.5);
}, 
//Hover out
function () {
$('.item,.region').fadeTo("fast", 1);
}); 
```

# xsd - 如何限制包含的架构

> ID：15692400
> 
> 赞同：1
> 
> 时间：2013-03-28T21:20:10.423
> 
> 标签：xsd, xml-namespaces

每个人

我有一个 xsd 模式 (cft.xsd)，它描述了一个非常通用的顶级结构：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:cft="http://www.foo.com/xsd/cft" targetNamespace="http://www.foo.com/xsd/cft" elementFormDefault="qualified">
    <xsd:complexType name="dirType">
        <xsd:choice minOccurs="1" maxOccurs="unbounded">
            <xsd:element name="dir" type="cft:dirType"/>
            <xsd:element name="txt">
                <xsd:complexType>
                    <xsd:simpleContent>
                        <xsd:extension base="xsd:string">
                            <xsd:attribute name="Name" use="required">
                                <xsd:simpleType>
                                    <xsd:restriction base="xsd:string">
                                        <xsd:pattern value="[0-9a-zA-Z_]+\.txt"/>
                                    </xsd:restriction>
                                </xsd:simpleType>
                            </xsd:attribute>
                        </xsd:extension>
                    </xsd:simpleContent>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="xml">
                <xsd:complexType>
                    <xsd:sequence maxOccurs="1" minOccurs="1">
                        <xsd:any/>
                    </xsd:sequence>
                    <xsd:attribute name="Name" use="required">
                        <xsd:simpleType>
                            <xsd:restriction base="xsd:string">
                                <xsd:pattern value="[0-9a-zA-Z_]+\.xml"/>
                            </xsd:restriction>
                        </xsd:simpleType>
                    </xsd:attribute>
                </xsd:complexType>
            </xsd:element>
        </xsd:choice>
    </xsd:complexType>

    <xsd:element name="root" type="cft:dirType"/>
</xsd:schema> 
```

还有第二个模式 (dictionary.xsd)，它将描述需要在 <cft:xml> 节点中的内容：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:l="http://www.foo.com/xsd/dictionary" xmlns:cft="http://www.foo.com/xsd/cft" targetNamespace="http://www.foo.com/xsd/dictionary" elementFormDefault="qualified">
  <xsd:element name="root">
    <xsd:simpleType>
      <xsd:attribute name="Version" type="xsd:string" use="required"/>
    </xsd:simpleType>
  </xsd:element>
</xsd:schema> 
```

这样文件就会是这样的：

```
<cft:root xmlns:cft="http://www.foo.com/xsd/cft" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.foo.com/xsd/cft cft.xsd">
    <cft:xml Name="dictionary.xml">
        <root xmlns="http://www.foo.com/xsd/dictionary" Version="17.0"/>
    </cft:xml>
</cft:root> 
```

我的问题是： 1\. 我如何在 dictionary.xsd 中指定，在那里定义的 <root> 元素只能嵌套在 <cft:xml> 元素中 - 那是 <cft:root> 元素的子元素 -这有它的名称属性“dictionary.xml” 2\. 如何限制 cft.xsd 中的 <cft:xml> 元素，使其唯一的元素名为 <root> 来自与 cft**不同的命名空间？**

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:12:16.287

首先，您的**dictionary.xsd**应该如下所示（修复：`complexType`而不是元素`simpleType`的类型）。`root`

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:l="http://www.foo.com/xsd/dictionary" xmlns:cft="http://www.foo.com/xsd/cft" targetNamespace="http://www.foo.com/xsd/dictionary" elementFormDefault="qualified">
  <xsd:element name="root">
    <xsd:complexType>
      <xsd:attribute name="Version" type="xsd:string" use="required"/>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

*   1：你不能；无法控制一个 XSD 文件中的全局元素如何在另一个 XSD 文件中使用。

*   2：你不能；无法控制可以作为通配符匹配的元素的名称。只能`xsd:any`使用 namespace="##other" 属性来限制你 - 但这是你能做到的。

唯一可以让您获得所需的 XSD 1.0 替代方案是重新调整您`cft.xsd`的如下：

*   使您的`xml`全球类型
*   在另一个 XSD 文件（重新定义 cft.xsd）中使用**xsd:redefine并在需要强制执行此规则的任何地方使用该文件。**

注意：XSD 不支持**xsd:redefine到代码绑定工具，因此您必须考虑您的 XSD 使用。**

以下是修改后的**cft.xsd 示例**：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:cft="http://www.foo.com/xsd/cft" xmlns="http://www.foo.com/xsd/cft" targetNamespace="http://www.foo.com/xsd/cft" elementFormDefault="qualified">
    <xsd:complexType name="dirType">
        <xsd:choice minOccurs="1" maxOccurs="unbounded">
            <xsd:element name="dir" type="cft:dirType"/>
            <xsd:element name="txt">
                <xsd:complexType>
                    <xsd:simpleContent>
                        <xsd:extension base="xsd:string">
                            <xsd:attribute name="Name" use="required">
                                <xsd:simpleType>
                                    <xsd:restriction base="xsd:string">
                                        <xsd:pattern value="[0-9a-zA-Z_]+\.txt"/>
                                    </xsd:restriction>
                                </xsd:simpleType>
                            </xsd:attribute>
                        </xsd:extension>
                    </xsd:simpleContent>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="xml" type="atype"/>
        </xsd:choice>
    </xsd:complexType>
    <xsd:complexType name="atype">
        <xsd:sequence>
            <xsd:any/>
        </xsd:sequence>
        <xsd:attribute name="Name" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:pattern value="[0-9a-zA-Z_]+\.xml"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
    </xsd:complexType>

    <xsd:element name="root" type="cft:dirType"/>
</xsd:schema> 
```

然后，您可以使用**custom-cft.xsd**来验证您的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XSR Module (http://www.paschidev.com)-->
<xsd:schema xmlns="http://www.foo.com/xsd/cft" xmlns:dict="http://www.foo.com/xsd/dictionary" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.foo.com/xsd/cft" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:redefine schemaLocation="cft.xsd">
        <xsd:complexType name="atype">
            <xsd:complexContent>
                <xsd:restriction base="atype">
                    <xsd:sequence>
                        <xsd:element ref="dict:root"/>
                    </xsd:sequence>
                </xsd:restriction>
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:redefine>
    <xsd:import schemaLocation="dictionary.xsd" namespace="http://www.foo.com/xsd/dictionary"/>
</xsd:schema> 
```

作为最后一项建议，我建议不要使用诸如`xml`根据[XML 1.0 规范](http://www.w3.org/TR/REC-xml/#sec-common-syn)的 since 名称：*以字符串“xml”开头的名称，或任何匹配的字符串 (('X'|'x') ('M '|'m') ('L'|'l'))，保留用于本规范的这个或未来版本的标准化。*我见过一些产品简单地拒绝`xml`用作标记名称的 XML 文档，因此出于互操作性的原因，最好避免使用它。

# javascript - 按间隔更新 Div/PartialView

> ID：15692404
> 
> 赞同：0
> 
> 时间：2013-03-28T21:20:22.070
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-mvc-4

我有这个进行 Ajax 调用并返回结果并且工作正常。

```
@foreach (var fighter in Model.Fighters)
{
@Ajax.ActionLink(fighter.FirstName + " " + fighter.LastName, "ShowResults",new            {id        =fighter.FighterID }, new AjaxOptions { HttpMethod = "get", InsertionMode = InsertionMode.Replace, OnSuccess = "SuccessFunction", UpdateTargetId = "results" })
}
<div id="results">
@Html.Partial("Partial1", Model)
</div>

 [HttpGet]
    public ActionResult ShowResults(int id)
    {
        ViewBag.Id = id;
        Fight fight = db.Fights.Find(id);
        if(Request.IsAjaxRequest())
        {
            ViewBag.Message = "The ID is: " + id;
            return PartialView("Partial1", fight);
        }
        return View(fight);
    } 
```

但是，我正在尝试做同样的事情，但要在设定的时间间隔内重新加载部分视图。我确实这样做了：

```
 $(document).ready(function () {

    $("#round").load("/Fight/ShowResults");

    setInterval(function () {
        $("#results").load("/Fight/ShowResults");
    }, 100000); //Refreshes every 30 seconds

    $.ajaxSetup({ cache: false });  //Turn off caching
});
</script> 
```

但似乎什么也没做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:49:09.393

我解决了这个问题，我有很多问题需要解决。在问之前我应该​​仔细看看。这不会运行的原因是因为我需要在布局页面中创建一个脚本部分，因为我试图运行 RenderBody 部分的这个脚本。

# javascript - Node.js Web 应用程序的架构建议和指南？

> ID：15692405
> 
> 赞同：3
> 
> 时间：2013-03-28T21:20:27.910
> 
> 标签：javascript, node.js, web-applications, database-design, architecture

我渴望开始一个用于学习目的的辅助项目，并且我正在寻求一些关于使用哪些技术/框架/库以及如何构建应用程序的指导，至少在高层次上。我是一名前端开发人员，虽然我在服务器端编程、数据库等方面做过一些杂项工作，但这将是我第一次尝试亲自创建一个全栈应用程序。我决定使用 Node.js 作为服务器端环境，但这是我唯一的坚定要求。

我已经想出了一个应用程序的想法。以下是有关其功能的一些说明：

*   这是另一个待办事项列表应用程序。它与您的基本清单的主要区别在于它对[GTD 系统](http://en.wikipedia.org/wiki/Getting_Things_Done)的某些方面的适应，以及列表的嵌套/树结构（与平面列表或 GTD 使用的单级嵌套相反）。我正在利用树的比喻，其中树干是列表的基础，分支是项目和子项目，叶子是单独的任务。
*   项目（分支）可以有很多子项目（其他分支的分支），项目和子项目都可以有很多任务（叶子）。项目是您最终可以完成但实际上无法实际完成的任何多步骤*过程*。与 GTD 一样，您只能*执行*定义为物理动作的任务。例如，“获得银行贷款”是一个项目（这是一个可定义的目标），“研究贷款人的利率”是一个子项目（它推动您完成该目标），以及“致电当地富国银行分行” “访问chas.com 的借贷部分”和“向Bob 发送电子邮件以获得他的推荐”都是任务（它们是您可以采取的具体物理动作来推进项目/子项目）。
*   一旦你完成了一个项目中的所有任务（修剪了所有的叶子），这个项目就被认为是完整的（分支被切断了）。您的目标是不断修剪树木以防止其过度生长。
*   如果你像我一样，你有一个庞大的项目清单，这些项目永远完成并被新项目取代。除了存储您的列表之外，此应用程序的价值还在于它能够指导您下一步工作。为此，您可以定义关于每个任务的各种元数据（仅针对任务；您不能对项目执行此操作，因为它们只是用于组织任务组的存储桶）。
*   此元数据包括有关您可以排序和搜索的每个任务的附加信息。例如：
    *   背景：完成任务需要哪些工具/情况？例如，要更新您的驾照，您可能需要完成文书工作，并且在工作日工作时间内在特定地点。
    *   截止日期：这可以随时完成，还是有一个很难完成的日期？
    *   重要性：这是您*想做*的事情，还是您*需要*做的事情？
    *   时间：您估计完成任务需要多少时间？
*   鉴于此元数据，您可以随时打开应用程序并快速确定下一步要做什么，考虑到您当前（或即将）的背景、即将到来的截止日期、哪些任务最重要、您在下一次承诺之前还有多少时间，等等。这使您不必日复一日地扫描相同的平面列表并进行相同的心理计算，而无需任何有组织/存储的关于每个任务的元数据。您可以查看即将到来的截止日期以确定下一步需要做什么，或者您可以选择当前可用的资源，从而将列表缩小到仅可能完成的任务。

此应用程序中的实用程序将来自其易用性/使用速度以及在简单性和可扩展性之间取得适当的平衡。对于前一点，您应该能够在适当的位置编辑项目/任务描述，单击以切换元数据，拖放以将任务移动到不同的项目等。应该有最小的列表管理开销。对于后一点，您应该只需要输入您关心或对您有用的关于每项任务的元数据，从而从应用程序中获得尽可能多的实用程序。如果您只想使用该应用程序来记录和更新您的列表项，那很好；如果您想精细管理最后期限，请指定*每个*任务等，那也没关系。你投入的越多，你得到的就越多，但除了每个项目/任务的简单行项目描述之外，没有强制数据输入。

这一切都向我暗示了一个单页 Web 应用程序（理想情况下，最终对移动设备友好）在后台永久保存。您应该能够登录，移动一些东西，将一些东西标记为已完成，然后关闭它。没有手续，就像一个书面清单。这将是一个不断发展的列表，最终应该可以节省您的时间，而不是增加额外的开销来跟踪您所有的日常小任务。

因此，鉴于所有这些，我正在寻求一些有关如何开发此应用程序的建议；本质上，如何构建它。我应该使用 Ember.js 或 Backbone.js 之类的客户端 MVC 框架吗？哪种数据库最适合存储此类数据，我的架构应该是什么样的？如何处理 CRUD/REST 和路由？作为一个单页应用程序，我是否必须求助于一个巨大的控制器？我在服务器和浏览器之间传输的数据是什么样的？同样，我唯一的艰难决定是在服务器上使用 Node.js，因为这项工作的重点主要是利用我的 JavaScript 技能进一步深入堆栈（并希望提出一个有用的应用程序！） . 其他一切都可以接受建议。

鉴于您的建议，我相信我可以深入研究这些技术的细节并弄清楚这些部分是如何配合的；我现在几乎不知所措，因为*有*关于如何构建应用程序的许多选项和方法，虽然我在这里和那里修复了 Rails 视图中的错误，但我从未构建过完整的应用程序；我不完全理解这一切如何结合在一起的基本原理。我希望得到一些反馈，例如“列表中的每个任务都可以是一个文档；使用 Redis 存储一个带有任务属性的 JSON 对象，当用户在浏览器中更新任务时，编写并发送这个对象从客户端到您的控制器以更新 Redis 文档”。这可能是完全的恶意，但希望你明白这一点。任何指向教程、演示或其他示例的链接也非常感谢 - 我已经阅读和观看了很多，但我似乎永远无法将这些更一般的解释映射到我的特定用例。

请让我知道是否有任何我特别幼稚的事情，或者我遗漏了任何重要的细节，或者我的要求是否不完全清楚。

我也意识到这类问题不是 SO 的理想用例，因为没有“正确”答案，但我认为最好的答案就是最有帮助的答案。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:31:29.170

如果我正在构建这个，我会使用 Backbone.js，并使用一个简单的 RESTful CRUD 接口（Backbone 的默认同步方法是为它构建的），但这只是我。

使用这种方法，您可以拥有一个任务模型，将其扩展到子任务模型（添加父属性），并让每个任务（以及子任务）具有一组子任务。

同步很简单，因为您可以使用 Backbones 构建同步方法和基本的 RESTful CRUD 服务器。

您可以在 Backbone 模型中包含您想要的任何验证，并通过侦听该集合上的自定义事件（当该集合状态中的模型更改时触发）绑定到任务子任务以确定任务（和所有子任务）是否完全的。

我知道这篇文章非常支持 Backbone，但这是一个主观问题，这是我的观点。

服务器端我建议使用 Express，您可以使用[express-resources](https://github.com/visionmedia/express-resource)模块来简化 REST 实现。

同样，这只是我的意见。随意问的问题。

# .net - 当父窗体有边框时，在自定义控件中使用 DrawToBitmap 不起作用 vb.net

> ID：15692412
> 
> 赞同：0
> 
> 时间：2013-03-28T21:21:04.990
> 
> 标签：.net, custom-controls, transparency, drawtobitmap

好的，所以...我正在尝试创建一个自定义复选框，该复选框实际上根据字体大小调整字形的大小（请转到 MS，因为它永远不会实现此功能）。为了正确执行此操作，我必须完全覆盖控件中的 OnPaint 事件。但是，当控件设置为透明时，我遇到了问题。

当父控件（我现在只做一层透明度）没有边框（特别是设置为 FormBorderStyle = None 的窗口窗体时，它工作得很好。但是，如果我将它设置为除此之外的任何东西，坐标关闭并抓住我的位图的错误部分。我在代码下方发布了屏幕截图的链接以演示差异。我无法弄清楚为什么它不能正确定位边框。我认为它与客户端尺寸有关，但可以'不正确。此外，使用'drawtobitmap'函数，OnPaint 会大量递归自身，并减慢绘制控件的速度，有没有办法阻止它？

这是相关代码

```
 Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)
    OnPaintBackground(e)
    If MyBase.Appearance = Appearance.Button Then
        MyBase.OnPaint(e)
    Else

    End If
End Sub
Protected Overrides Sub OnPaintBackground(ByVal e As System.Windows.Forms.PaintEventArgs)

    If BackColor = Color.Transparent Then
        Dim ctl As Control = Parent
        Dim bmp As New Bitmap(ctl.ClientSize.Width, ctl.ClientSize.Height)
        ctl.DrawToBitmap(bmp, New Rectangle(0, 0, ctl.ClientSize.Width, ctl.ClientSize.Height))

        Dim rect As New Rectangle((ctl.Size.Width - ctl.ClientSize.Width) + Left, (ctl.Size.Height - ctl.ClientSize.Height) + Top, ClientSize.Width, ClientSize.Height)

        e.Graphics.FillRectangle(New TextureBrush(CropImage(bmp, rect)), ClientRectangle)
        ctl.Text = ((ctl.Size.Width - ctl.ClientSize.Width) + Left).ToString + " " + ((ctl.Size.Height - ctl.ClientSize.Height) + Top).ToString + " " + ClientSize.Width.ToString + " " + ClientSize.Height.ToString
        bmp.Dispose()
    Else
        e.Graphics.FillRectangle(New SolidBrush(MyBase.BackColor), ClientRectangle)
    End If

End Sub
Private Function CropImage(ByVal source As Image, ByVal crop As Rectangle) As Bitmap
    Dim bmp = New Bitmap(crop.Width, crop.Height)
    Using gr = Graphics.FromImage(bmp)
        gr.DrawImage(source, New Rectangle(0, 0, bmp.Width, bmp.Height), crop, GraphicsUnit.Pixel)
    End Using
    Return bmp
End Function 
```

[带边框](http://s3.postimg.org/fzhgq1f5b/withborder.jpg)

[无边无界](http://s3.postimg.org/ngqo594of/withoutborder.jpg)

# django - 使用前导斜杠存储 Django FileField

> ID：15692413
> 
> 赞同：0
> 
> 时间：2013-03-28T21:21:17.433
> 
> 标签：django, django-storage

我有一个由两个不同系统使用的数据库，因此我实际上需要 FileField 值有一个前导斜杠，如下所示：

```
/dirs/filename.ext 
```

然而，在 Django 中，FileField 值不能有前导斜杠，因为它破坏了它们与`MEDIA_ROOT`.

所以我怀疑我要么必须创建一个自定义存储类，要么以某种方式自定义 FileField，以便在读取时删除前导斜杠并在保存时恢复。

* * *

如果有人想知道我为什么要这样做：我将文件镜像到单独的***非*Django**服务器上。

在 Django 服务器上，文件是相对于媒体根目录的。因此，假设媒体根目录为`/path/to/myapp/media`，则具有该路径的文件`dirs/filename.ext`将存在于`/path/to/myapp/media/dirs/filename.ext`.

同时，当镜像到另一台服务器时，它们是相对于 webroot 存储的。所以路径等价于文件的绝对URL（例如文件`dirs/filename.ext`存储在`/path/to/example.com/dirs/filename.ext`，访问为`http://example.com/dirs/filename.ext`）。

两台服务器都使用相同的数据库。

我意识到一个解决方案是在另一台服务器上使用该字段的任何地方都添加一个斜杠，但这是跨越许多不同的源文件，而在 Django 中，由于记录模型，我*应该*能够仅在`models.py`文件中进行更改它将适用于整个 Django 站点。

* * *

到目前为止，我已经尝试创建一个自定义版本，`FileField`它正确地预先设置`/`了查找和保存*，但是*在 Django 应用程序中使用时，我无法让它*删除前导斜杠。*

* * *

### 例子

想象一个名为 Tool 的记录，其中包含一个 PDF 文件作为其手册。在 Django 服务器上，它将因此显示在模板中：

```
<h1>{{ tool.name }}</h1>
<p>{{ tool.description }}</p>
<p><a href="{{ MEDIA_URL }}{{ tool.file.url }}">Link to Manual</a></p> 
```

同时在另一台服务器上它更像（这是 CF 代码）：

```
<h1>#GetTool.tool_name#</h1>
<p>#GetTool.tool_description#</p>
<p><a href="#GetTool.tool_file#">Link to Manual</a></p> 
```

在第二个服务器示例中，它必须是绝对 URL。

所以，要清楚：

*   第二台服务器不是 Django 项目
*   在第二台服务器上更改代码会比在第一台服务器上更耗时
*   因此 FileField 中的值需要是绝对 URL 才能与 Django 兼容，但需要使用前导斜杠保存以便与第二个服务器兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:26:58.203

您可以尝试创建自定义字段。就像是：

```
class MyFileField(models.Field):
    attr_class = MyFieldFile

    def get_directory_name(self):
        return os.path.normpath(force_unicode(datetime.datetime.now().strftime(smart_str(self.upload_to))))

    def get_filename(self, filename):
        return os.path.normpath(self.storage.get_valid_name(os.path.basename(filename)))

    def generate_filename(self, instance, filename):
        return os.path.join(self.get_directory_name(), self.get_filename(filename))

    def get_prep_lookup(self, lookup_type, value):
        if hasattr(value, 'name'):
            value = value.name
        return super(FileField, self).get_prep_lookup(lookup_type, value)

    def get_prep_value(self, value):
        "Returns field's value prepared for saving into a database."
        # Need to convert File objects provided via a form to unicode for database insertion
        if value is None:
            return None
        return unicode(value) 
```

这是默认的 django-1.4 代码。你应该修改它以在需要的地方添加斜杠

您还应该将 django.db.models.fields.files.FieldFile 子类化（您可以在示例中看到 MyFieldFile），因为当您访问字段值时，您实际上会获得此类。并且此类具有修改保存路径的保存方法。所以删除该类中的斜线。

这两个类的方法调用存储类的方法，因此另一种选择是创建替代存储

```
from django.core.files.storage import FileSystemStorage

class MyStorage(FileSystemStorage):
    def path(self, name):
        try:
            path = safe_join(self.location, name)
        except ValueError:
            raise SuspiciousOperation("Attempted access to '%s' denied." % name)
        return os.path.normpath(path)

    def _save(self, name, content):
        full_path = self.path(name)
        # many lines of code
        return name  # this is used as filename in database 
```

在 django 设置中配置默认​​存储：

```
DEFAULT_FILE_STORAGE = 'yourapp.import.path.MyStorage' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:21:42.567

如果我理解正确，那么你为什么不能只做一个附加或删除该字段的斜线而不是做一个特殊字段的方法？

这有点骇人听闻，但我想它可以工作。

```
class MyModelWithAppendingSlash(models.Model):
    my_file = FileField(options_go_here)

    def my_file_appended(self):
        return path = '/' + self.my_file.filename

    def my_file_slash_removed(self):
        return my_file.filename[1:] 
```

然后，当您在 django 应用程序中引用模型时，请执行`myModelWithAppendingSlashInstance.my_file_appended()`或`.my_file_slash_removed()`

我剪掉了很多代码，你必须修改它，但你得到了我在这里想要实现的要点。这对您来说可能完全错误，但这就是我解释您的问题的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:00:49.820

如果没有一行代码，您可以使用数据库中的 VIEW 来解决这个问题。只需创建一个连接“/”（或“ `http://example.com/`”，如果您希望 url 真正是绝对的）和路径的视图。

```
CREATE VIEW CF_appname_tool AS
SELECT [other attributes], '/' + file as file
FROM appname_tool; 
```

我需要知道您[使用的是 SQL server](https://stackoverflow.com/questions/15692413/storing-django-filefield-with-leading-slash#comment22616692_15692413)，因为每个 DBMS 的字符串连接运算符都不同。

我怀疑更改 CF 代码以从 CF_appname_tool 中进行选择太麻烦了。您可以将数据从 appname_tool 移动到并在 Django Tool 模型上`some_other_name`设置[db_table选项：](https://docs.djangoproject.com/en/dev/ref/models/options/#db-table)

```
class Tool(model.Model):
    class Meta:
        db_table = 'some_other_name' 
```

并将`appname_tool`VIEW 创建为以下选项`some_other_name`：

```
CREATE VIEW appname_tool AS
SELECT [other attributes], '/' + file as file
FROM some_other_name; 
```

如果您想在生产中以编程方式创建 VIEW，您可以收听[post_syncdb信号。](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_syncdb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T20:04:52.463

终于想出了如何做到这一点。除了 FileField 之外，诀窍还在于继承 FieldFile：

```
class LeadingSlashFieldFile(files.FieldFile):
    def __init__(self, instance, field, name):
        name = re.sub(r'^/', '', name)
        super(LeadingSlashFieldFile, self).__init__(instance, field, name)

class LeadingSlashFileField(models.FileField):
    attr_class = LeadingSlashFieldFile

    def get_prep_lookup(self, lookup_type, value):
        if hasattr(value, 'name'):
            value = value.name
        if value[0] <> '/':
            value = "/" + value
        return super(LeadingSlashFileField, self).get_prep_lookup(lookup_type, value)

    def get_prep_value(self, value):
        value = super(LeadingSlashFileField, self).get_prep_value(value)
        if value is None:
            return None
        value = unicode(value)
        if value[0] <> '/':
            value = "/" + value
        return value 
```

这似乎有效。

# ruby-on-rails - Rails 错误不理解 newb 期望 tASSOC

> ID：15692415
> 
> 赞同：0
> 
> 时间：2013-03-28T21:21:28.530
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我提前道歉这是我第一次发布问题。这是我的错误，我不理解或不知道如何纠正这是导致错误的代码一切正常，直到这

c:/Sites/helpdesk/app/controllers/tickets_controller.rb:99: 语法错误，意外'='，期待 tASSOC redirect_to :action => 'show', :id = flash[:ticket_id] ^

```
#action
def ticket_action
  @act = Action.new(
        "ticket_id" => flash[:ticket_id],
        "description" => params[:description]['description'],
        "user_id" => params[:actUser]['user_id']
    )

  id @act.save
    flash[:notice] = 'Action was successfully added'
    redirect_to :action => 'show', :id = flash[:ticket_id]
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:31:22.727

`unexpected '=', expecting tASSOC redirect_to :action => 'show', :id = flash[:ticket_id]`

`tASSOC`是`=>`符号，所以 ruby​​ 期待`=>`而不是`=` 在行中替换它：

```
redirect_to :action => 'show', :id => flash[:ticket_id] 
```

这相当于：

```
redirect_to { :action => 'show', :id => flash[:ticket_id] } 
```

Ruby 允许您省略`{}`when last 参数是`Hash`

加

```
id @act.save 
```

应该

```
if @act.save 
```

# c++ - 在一行中删除多个指针。C++

> ID：15692418
> 
> 赞同：15
> 
> 时间：2013-03-28T21:21:36.710
> 
> 标签：c++, pointers, comma-operator

这会删除所有指针还是仅删除第一个指针 p1？

```
delete p1,p2,p3,p4,p5; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T21:24:23.697

它相当于：

```
(((((delete p1),p2),p3),p4),p5); 
```

也就是说，它`delete`s`p1`然后将逗号运算符应用于结果（没有结果）和`p2`。`p2`简单地`p5`评估表达式并丢弃结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T21:30:27.093

因为 ',' 是逗号运算符，显然只有指向的第一个对象被删除，而其余的表达式被评估并被丢弃：

```
class A{
  public:
    string name_;

    A(){}
    A(string name):name_(name){}
    ~A(){cout<<"~A"<<name_;}
};

int main(){
    A* a1=new A("a1");
    A* a2=new A("a2");
    delete a1, a2;
    cout<<"\n.....\n";
    delete a2, a1;
//... 
```

输出：

~Aa1

……

~Aa2

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:26:45.067

它删除了第一个。

逗号运算符评估逗号前面的内容，然后将其丢弃。

# dynamics-crm-2011 - 在 CRM 2011 中的插件上检索“两个选项”字段值

> ID：15692419
> 
> 赞同：1
> 
> 时间：2013-03-28T21:21:40.077
> 
> 标签：dynamics-crm-2011, crm

我正在尝试根据帐户表单中的“两个选项”字段更新子联系人。如果“两个选项”字段设置为“是”，我会将所有子联系人更新为父帐户的更新地址。我尝试使用以下代码检索值，

```
bool? updateContactsValue 
  = entity.GetAttributeValue<bool?>("abc_yesNoField");

if (updateContactsValue)
{
  String[] details = new string[7];
  String telephoneNum = String.Empty, ... , country = String.Empty;

  telephoneNum = entity.GetAttributeValue<String>("telephone1");
  details[0] = telephoneNum;
  ...

  UpdateContact(service, entity.Id, details);
} 
```

但是我发现即使选择的选项是“是”，地址字段也没有被更新。我在这里错过了什么吗？

大家好，我修改代码如下

```
bool? updateContactsValue=null; 
updateContactsValue = entity.GetAttributeValue<bool?> ("abc_yesNoField").GetValueOrDefault();

throw new Exception( "My custom Exception"+" "+entity.GetAttributeValue<bool?>("abc_yesNoField").GetValueOrDefault().ToString()); 
```

即使我选择了“是”，系统也会抛出“假”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:14:49.410

这只是从臀部的一个镜头，因为我现在不在电脑前，但我很确定你（出于某种我现在无法判断的原因）未能获取值并获得*布尔值*为空。并且更新的执行以它为条件为*true*。

您需要以不同的方式检查该字段的值。

我不确定，但我希望 yes/no 元素是*bool*而不是可为*空的 bool*。如果你这样走会怎样？它编译吗？

```
bool updateContactsValue 
  = entity.GetAttributeValue<bool>("abc_yesNoField");

if (updateContactsValue) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-27T12:31:47.303

问题可能是由于您使用的是**Scheema Name**即混合大小写。 **abc_yesNoField**不能是属性 bcoz 的名称，它使用大小写混合。它应该像 abc_yesnofield 一样**小写**

```
bool? updateContactsValue= entity.GetAttributeValue<bool?>("abc_yesnofield"); 
```

始终使用属性的**逻辑名称**，即**名称**（始终小写）在：
1\. Xrm
2\. c# 代码后期绑定

使用**Scheema**属性名称，即（混合大小写或驼峰式大小写）：
1\. REST/oData/JSON 对象模型
2\. c# 早期绑定类 (LINQ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T12:47:50.707

错误在查询语句中，请确保您已在其中插入属性。如果它没有被插入，它总是会给你错误的值，例如：

```
QueryExpression query = new QueryExpression("ntw_abc");
query.ColumnSet = new ColumnSet("ntw_referencenumber", "abc_yesNoField"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T21:29:00.700

可能你写错了你的字段名，它不能是“updatechildcontacts”。因为是自定义字段，它必须以前缀开头，例如 new_updatechildcontacts

# apache - Apache https 客户端身份验证或重定向

> ID：15692422
> 
> 赞同：2
> 
> 时间：2013-03-28T21:21:56.880
> 
> 标签：apache, redirect, https, mod-ssl, authentication

我想知道是否有办法从网页重定向浏览器，如果它没有提供有效的客户端证书。

**例如**：

我网站上的这一部分需要相互 SSL 身份验证：

```
subdomain.domain.com 
```

这是我网站的主要部分，它是公开的：

```
domain.com 
```

用于身份验证的客户端证书由我自己的 CA 颁发，自签名。服务器证书相同。“已知”客户还将我的 CA 添加到他们受信任的 CA 存储中。

如果存在没有有效客户端证书访问 subdomain.domain.com 的 3rd 方客户端，则应将其重定向到 domain.com

我正在考虑 VHOSTs 区域中的一些配置。我玩过

```
RewriteCond %{SSL:SSL_CLIENT_VERIFY} !=SUCCESS 
```

或与

```
SSLVerifyClient optional / required / optional_no_ca 
```

但它似乎没有像我想要的那样工作。

我发现这篇文章 [http://mail-archives.apache.org/mod_mbox/httpd-docs/201204.mbox/%3Ch15hm6ny7srm9zeidijezwJv4X.penango@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/httpd-docs/201204.mbox/%3Ch15hm6ny7srm9zeidijezwJv4X.penango@mail.gmail.com%3E)

并以某种方式理解它在说什么，但不确定是否没有其他方法可以解决它，或者它可能是同时修复的（不仅仅是文档）

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-06T22:28:14.137

我认为你在正确的轨道上。当向服务器提供有效的客户端证书时，Apache 的 mod_ssl 将设置一些 Apache 环境变量。如果 SSL_CLIENT_S_DN_CN Apache 环境变量为空，则以下配置块应重定向。

```
<Location /path/to/protect/>
    SSLVerifyClient optional
    SSLVerifyDepth  1
    SSLOptions      +StdEnvVars

    RewriteEngine   on
    RewriteCond     %{SSL:SSL_CLIENT_S_DN_CN} =""
    RewriteRule     (.*) http://domain.com
</Location> 
```

如果请求中未提供客户端证书，则 SSL_CLIENT_S_DN_CN 将为空并用作重写条件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T12:12:22.570

这是我对此任务的配置

```
<Directory "c:/inetPub/../sd">

    SSLVerifyClient optional
    SSLVerifyDepth  1

    RewriteEngine   on
    RewriteCond     %{SSL:SSL_CLIENT_VERIFY} !^SUCCESS$
    RewriteRule     (.*) http://other_domain.com [R]
</Directory> 
```

# android - 从活动更新片段

> ID：15692425
> 
> 赞同：2
> 
> 时间：2013-03-28T21:22:04.753
> 
> 标签：android, android-viewpager, fragment

我不明白如何将数据从片段活动传输到片段，我有：

MainScreen.class

```
public class MainScreen extends FragmentActivity {
CollectionPagerAdapter mCollectionPagerAdapter;
ViewPager mViewPager;

public static String currentCityId;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs_collection);

    mCollectionPagerAdapter = new CollectionPagerAdapter(getSupportFragmentManager());

    final ActionBar actionBar = getActionBar();

    actionBar.setDisplayHomeAsUpEnabled(false);
    actionBar.setTitle(getString(R.string.app_name));
    actionBar.setIcon(R.drawable.device_access_brightness_high);

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mCollectionPagerAdapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.mainmenu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.action_refresh:
            Log.w("Refresh", "refresh");

            break;
        case R.id.action_options:

            break;
        case R.id.submenu_about:

            break;
        case R.id.submenu_help:

            break;
        case R.id.submenu_buy:

            break;
        case R.id.submenu_settings:

            break;
        case R.id.submenu_share:

            break;
        default:
            break;
    }

    return true;
}

public class CollectionPagerAdapter extends FragmentStatePagerAdapter {
    FragmentManager fm;

    public CollectionPagerAdapter(FragmentManager fm) {
        super(fm);
        this.fm = fm;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
            case 0:
                return new FragmentDay();
            case 1:
                return new FragmentHour();
            case 2:
                return new FragmentDaily();
            default:
                return new FragmentDay();
        }
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0:
                return getString(R.string.tab_day);
            case 1:
                return getString(R.string.tab_hour);
            case 2:
                return getString(R.string.tab_daily);
            default:
                return getString(R.string.tab_day);
        }
    }
} 
```

FragmentDay.class

```
public class FragmentDay extends Fragment {
TextView currentTemp;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.hour_screen, container, false);
    Bundle args = getArguments();
    currentTemp = (TextView)rootView.findViewById(R.id.day_current_temp);
    return rootView;
} 
```

}

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:layout_height="match_parent"
            android:layout_width="match_parent"
            android:background="@drawable/bk_new">

<android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    <android.support.v4.view.PagerTitleStrip
            android:id="@+id/pager_title_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:background="#33b5e5"
            android:textColor="#fff"
            android:paddingTop="4dp"
            android:paddingBottom="4dp"/>
</android.support.v4.view.ViewPager> 
```

和片段.xml：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/dayScreen"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bk_new">

<TextView
        android:id="@+id/day_current_temp"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_centerHorizontal="true"
        android:text="22 C"
        android:textColor="#FFFFFF"
        android:textSize="38dp"
        android:layout_marginTop="270dp"/> 
```

阅读这些文章（[ViewPager Activity 以通知特定事件的 Fragment ，](https://stackoverflow.com/questions/8956803/viewpager-activity-to-notify-a-fragment-of-a-specific-event)从[ViewPager 中的 Activity 更新片段](https://stackoverflow.com/questions/12341591/updating-fragments-from-activity-in-a-viewpager)，[ViewPager - 从活动更新片段](https://stackoverflow.com/questions/15662721/viewpager-update-fragment-from-activity)）并且不明白该怎么做！我将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:33:03.237

当您说“传输数据”时，我假设您的意思是变量，因此您可以以任何方式调整片段。

您可以随时使用 getActivity() 方法在片段中访问活动对象并将其转换为您的活动实现......

```
// Code in the fragment
((MainScreen) getActivity()).getSomeDataFromActivity() 
```

[Google在这里](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)也有一篇文章描述了 Fragment 和 Activity 之间的通信模式。

# ios - 本地化现有的 iOS 应用程序

> ID：15692432
> 
> 赞同：2
> 
> 时间：2013-03-28T21:22:28.447
> 
> 标签：ios, xcode, localization, nslocalizedstring

我不敢相信以前没有人问过这个问题（我的编码实践太杂乱无章，或者我没有使用正确的关键字）：如何本地化不使用 NSLocalizedString 的现有 iOS 应用程序（特别是只是第一步，将所有字符串文字转换为 NSLocalizedString）？

我了解本地化过程的工作原理，但我不想自己更改所有文本。当然必须有一个可以转换`@"Hello World"`为`NSLocalizedString(@"Hello World", nil)`.

当然，我可以通过搜索和替换手动执行此操作，但我不敢相信没有工具可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T16:01:56.903

我写了一个 xcode 插件来做这种工作。xcode中执行脚本很慢，所以我没有选择写s脚本来做。虽然写 Xcode 插件有点难，也没有官方文档，但是习惯了之后，玩起来还是蛮有趣的。

链接在这里：

[https://github.com/nanaimostudio/Xcode-Quick-Localization](https://github.com/nanaimostudio/Xcode-Quick-Localization)

安装：

1.  使用 Xcode 构建项目。

用法：

1.  选择多行，按 Option+Shift+D

2.  如果没有选择，它将只转换当前行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T16:06:02.803

我会写一个简单的`bash`脚本来搜索文本

```
@"Your Text" 
```

并将其替换为

```
NSLocalizedString(@"Your Text", nil); 
```

它们可以是非常强大的东西

# javascript - 如何在 Acrobat 中动态设置字段的“必填”状态？

> ID：15692435
> 
> 赞同：1
> 
> 时间：2013-03-28T21:22:36.847
> 
> 标签：javascript, validation, acrobat

我有一个 Acrobat PDF，一位同事希望在 Acrobat 为您提供的简单选项之外添加一些表单验证，而无需使用 javascript。据我所知，将需要 Javascript 来执行此操作。我**认为**该行为应该可以通过单选按钮组的“属性”->“操作”中的“添加操作->MouseDown->运行 Javascript”选项来完成。

基本上我有一组带有 3 个按钮的单选按钮。如果按下 buttonA，我希望 fieldA 是必需的。如果按下 buttonB，我希望 fieldB 是必需的。buttonC/fieldC 也一样。

我知道我的伪代码会是什么样子，但我无法将它翻译成 javascript

```
onSelectionChanged(selection) {
    fieldA.required = false;
    fieldB.required = false;
    fieldC.required = false;

    if (selection == 'A') { fieldA.required = true; }
    if (selection == 'B') { fieldB.required = true; }
    if (selection == 'C') { fieldC.required = true; }
} 
```

谁能指出我正确的方向？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:35:01.900

做了更多的挖掘，这是最终的解决方案（放置在单选按钮组的“MouseUp->Run a Javascript”中：

```
var f = this.getField("ServiceType");

var ins = this.getField("InstallationDateTime");
var rem = this.getField("RemovalDateTime");
var ser = this.getField("ServiceRequestDateTime");

console.println(f.value);

ins.required = false;
rem.required = false;
ser.required = false;

if (f.value === "Install") {
    ins.required = true;       
}
if (f.value === "Removal") {
    rem.required = true;       
}
if (f.value === "Service") {
    ser.required = true;       
} 
```

考虑到所有事情都很容易，找到[以下](http://livedocs.adobe.com/acrobat_sdk/10/Acrobat10_HTMLHelp/wwhelp/wwhimpl/js/html/wwhelp.htm?href=Acrobat_SDK_whats_new.14.7.html&accessible=true)对于调试非常有用：

```
f = this.getField("myField");

for ( var i in f ) {
    try {
        if ( typeof f[i] != "function" ) {    // Do not list field methods
            console.println( i + ":" + f[i] ) 
        }
    } catch(e) {
    }           // An exception occurs when we get a property that does not apply to this field type.
} 
```

# python - Ident 连接通过 psycopg2 失败，但通过命令行工作

> ID：15692437
> 
> 赞同：3
> 
> 时间：2013-03-28T21:22:51.070
> 
> 标签：python, postgresql, authentication, psycopg2

当我尝试使用类似这样的代码（以“用户名”运行 python）通过 psycopg2 连接到我的 postgres 服务器时：

```
psycopg2.connect(database="apis_master") 
```

我收到一个错误

```
psycopg2.OperationalError: FATAL:  Ident authentication failed for user "username" 
```

但是当我像这样直接从命令行（作为用户“用户名”）运行 psql 时：

```
psql -d apis_master 
```

我连接没有问题。

我看不出这两种连接方法有什么不同。我是否缺少 psycopg2 的一些配置选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:37:20.310

你的命令行用户和你的 python 用户*是*不同的。当您实例化 psycopg2 对象时，传递用户凭据：

```
db = psycopg2.connect(
                     host = 192.168.0.1, # example IP, use 'localhost' if local, otherwise the IP of the server where Postgre is located.
                     database = 'apis_master'
                     user = 'my_db_user',
                     password = 'my_db_password'
                     ) 
```

这应该可以解决您的连接问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:06:47.327

问题是这个系统上运行了两个 PGSQL 实例。一个是 8.4 并且未配置为与我的用户名相同，另一个是 9.1 并且具有我的用户名。命令行 psql 自动选择在非标准端口上运行的 9.1，而 psycopg2 使用默认端口。在 psycopg2 连接行中指定端口解决了这个问题。

# python - 查询集上的upper()

> ID：15692439
> 
> 赞同：0
> 
> 时间：2013-03-28T21:22:56.083
> 
> 标签：python, django

有没有办法在下面的查询中获取大写的 values_list ？

```
dict(Territory.objects.values_list('name'.upper(),'code')) # in pseudocode 
```

还是我需要做一个列表理解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:25:39.593

```
dict([(name.upper(), code.upper()) for name,code in Territory.objects.values_list('name','code')]) 
```

# javascript - prev 或兄弟姐妹选择 jQuery

> ID：15692441
> 
> 赞同：-1
> 
> 时间：2013-03-28T21:23:13.443
> 
> 标签：javascript, jquery

```
<li class="page_item "><a href="javascript:">A</a>
<ul class="children">
    <li class="page_item"><a href="javascript:">1</a></li>
    <li class="page_item"><a href="javascript:">2</a></li>
</ul>
</li>
<li class="page_item "><a href="javascript:">B</a>
<ul class="children">
    <li class="page_item"><a href="javascript:">1</a></li>
    <li class="page_item"><a href="javascript:">2</a></li>
    <li class="page_item"><a href="javascript:">3</a></li>
    <li class="page_item"><a href="javascript:">4</a></li>
</ul>
</li>

$('.children a').click(function(event){ 
    event.stopPropagation();
        $('ul.children').prev().css('background','red');  
}); 
```

在线示例：http: [//jsfiddle.net/uybPf/](http://jsfiddle.net/uybPf/)

我想实现当我点击A或B的子菜单时，A或B就会高亮显示。但我的代码突出显示了所有这些。我不想使用`toggleClass()` 请有人帮忙修复我的代码。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:25:59.703

那是因为您正在使用which 将为该集合中的**每个**元素`ul.children`执行代码。试试这个：

 **```
$('.children a').click(function(event){ 
    event.stopPropagation();
    $("ul.children").prev().css('background','none');
    $(this).closest("ul.children").prev().css('background','red');  
}); 
```

演示：http: [//jsfiddle.net/uybPf/6/](http://jsfiddle.net/uybPf/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:25:29.497

```
$('.children a').click(function(event) {
    event.stopPropagation();
    $(this).closest('ul.children').prev().css('background', 'red');
}); 
```

[http://jsfiddle.net/uybPf/2/](http://jsfiddle.net/uybPf/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:28:10.887

您应该使用`closest`or`parent`方法：

```
$('.children a').click(function (event) {
    event.stopPropagation();
    $('.page_item a').removeClass('highlight'); // remove previously active class
    $(this).closest('.children').prev().addClass('highlight');
}); 
```

[http://jsfiddle.net/uybPf/3/](http://jsfiddle.net/uybPf/3/)

您应该更好地使用`addClass`和`removeClass`方法，而不是因为您已经在 CSS 中`css`定义了类。`.highlight`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:31:54.630

试试这个

```
$('.children a').click(function(event){ 
    event.stopPropagation();
    $('>a:first', $(this).closest('.children').closest('.page_item')).css('background', '#f00')
}); 
```

但是，这不会*取消*突出显示先前突出显示的父级

**阅读您的问题的评论后，编辑：**

添加

```
$('.page_item > a').css('background','transparent'); 
```

后

```
event.stopPropagation(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T21:47:17.523

试试这个

```
$('.children a').click(function (event) {
    event.stopPropagation();
    $(this).closest('ul.children').parent().children('a').css('background', 'red');
}); 
```

[http://jsfiddle.net/uybPf/2/](http://jsfiddle.net/uybPf/2/)**

# java - 如何从 .t xt 文件中读取双打

> ID：15692443
> 
> 赞同：0
> 
> 时间：2013-03-28T21:23:23.237
> 
> 标签：java

我能够读取字符串变量，但由于某种原因它不会读取双精度。我该怎么做才能让它读取双倍？

```
public class RundraiserApp
{

/**
 * @param args
 * 
 */
public static void main(String[] args)
{
    Fundraising[] dList = new Fundraising[10];

    String name = null;
    String address = null;
    String cityStateZip = null;
    double donation = 0;
    int i = 0, ctr = 0;

    Scanner in;
    File file = new File("Donations.txt");
    try
    {
        in = new Scanner(file);

        while (in.hasNext() && i < dList.length)
        {
            name = in.nextLine();
            address = in.nextLine();
            cityStateZip = in.nextLine();
            donation = in.nextDouble();
            i++;
        }
        ctr++;
    }
    catch (FileNotFoundException e1)
    {
        e1.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:31:07.183

考虑下面的文件结构

```
Name
Address
Zip
2000.50 
```

改变捐赠之类的。

```
donation = Double.parseDouble(in.nextLine()); 
```

# java - 得墨忒耳定律和集合组合如何协同工作？

> ID：15692448
> 
> 赞同：13
> 
> 时间：2013-03-28T21:23:29.053
> 
> 标签：java, oop, law-of-demeter

我已经阅读了几乎所有标记为 Law-of-Demeter 的问题。我的具体问题在任何其他问题中都没有得到回答，尽管它非常相似。我的主要问题是，当您有一个具有多层组合的对象，但需要从各种对象中检索属性值时，您如何实现这一点以及为什么采用一种方法而不是另一种方法？

假设您有一个由其他对象组成的非常标准的对象，如下所示：

```
public class Customer {
  private String name;
  private ContactInfo primaryAddress;
  private ContactInfo workAddress;
  private Interests hobbies;
  //Etc...

  public getPrimaryAddress() { return primaryAddress; }
  public getWorkAddress() { return workAddress; }
  public getHobbies() { return hobbies; }
  //Etc...
}

private ContactInfo {
  private String phoneNumber;
  private String emailAddress;
  //Etc...

  public getPhoneNumber() { return phoneNumber; }
  public getEmailAddress() { return emailAddress; }
  //Etc...
}

private Interests {
  private List listOfInterests;
} 
```

以下都违反了得墨忒耳法则：

```
System.out.println("Phone: " + customer.getPrimaryAddress().getPhoneNumber());
System.out.println("Hobbies: " + customer.getHobbies().getListOfInterests().toString()); 
```

我认为这也违反了得墨忒耳法则（澄清？）：

```
ContactInfo customerPrimaryAddress = customer.getPrimaryAddress();
System.out.println("Phone: " + customerPrimaryAddress.getPhoneNumber()); 
```

因此，据推测，您将向 Customer 添加一个“getPrimaryPhoneNumber()”方法：

```
public getPrimaryPhoneNumber() {
  return primaryAddress.getPhoneNumber();
} 
```

然后简单地调用： System.out.println("Phone: " + customer.getPrimaryPhoneNumber());

但随着时间的推移，这样做似乎实际上会带来很多问题，并且违背了得墨忒耳法则的意图。它使 Customer 类变成了一个巨大的 getter 和 setter 包，它们对自己的内部类有太多的了解。例如，似乎有朝一日 Customer 对象可能会有不同的地址（不仅仅是“主要”地址和“工作”地址）。甚至 Customer 类也可能只是有一个 ContactInfo 对象的列表（或其他集合），而不是特定命名的 ContactInfo 对象。在这种情况下，你如何继续遵循得墨忒耳法则？这似乎违背了抽象的目的。例如，在客户有一个 ContactInfo 项目列表的情况下，这似乎是合理的：

```
Customer.getSomeParticularAddress(addressType).getPhoneNumber(); 
```

当您想到某些人拥有手机和固定电话时，这似乎会变得更加疯狂，然后 ContactInfo 必须拥有电话号码的集合。

```
Customer.getSomeParticularAddress(addressType).getSomePhoneNumber(phoneType).getPhoneNumber(); 
```

在这种情况下，我们不仅指的是对象内的对象内的对象，而且我们还必须知道有效的地址类型和电话类型是什么。我绝对可以看到这个问题，但我不知道如何避免它。特别是当任何班级打电话给这个时，可能确实知道他们想要为相关客户的“主要”地址提取“移动”电话号码。

这怎么能被重构以符合得墨忒耳法则，为什么会这样呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-28T20:22:47.880

根据我的经验，显示的`Customer`示例不是“由其他对象组成的标准对象”，因为该示例采取了将其组成部分实现为内部类的附加步骤，并且进一步将这些内部类设为私有。这不是一件坏事。

一般来说，私有访问修饰符会增加信息隐藏，这是得墨忒耳法则的基础。暴露私人课程是矛盾的。NetBeans IDE 实际上包含一个针对“通过公共 API 导出非公共类型”的默认编译器警告。

我会断言，将私有类暴露在其封闭类之外总是不好的：它减少了信息隐藏并违反了得墨忒耳法则。因此，要回答有关返回外部实例的澄清问题`ContactInfo`：`Customer`是的，这是违规行为。

`getPrimaryPhoneNumber()`添加方法的建议解决方案`Customer`是一个有效的选项。困惑就在这里：“客户……对自己的内部类了解太多了。” 那是不可能的；这就是为什么这个例子不是一个标准的组合例子很重要。

封闭类具有任何嵌套类的 100% 知识。总是。无论这些嵌套类如何在封闭类（或其他任何地方）中使用。这就是为什么封闭类可以直接访问其嵌套类的私有字段和方法的原因：封闭类天生就知道它们的一切，因为它们是在其中实现的。

给定一个类 Foo 的荒谬示例，它有一个嵌套类 Bar，它有一个嵌套类 Baz，它有一个嵌套类 Qux，它不会违反 Demeter for Foo（内部）调用 bar.baz.qux 。方法（）。Foo 已经知道关于 Bar、Baz 和 Qux 的一切；因为他们的代码在 Foo 内部，所以没有通过长方法链传递额外的知识。

然后，根据得墨忒耳法则，解决方案是`Customer`不返回中间对象，无论其内部实现如何；即是否`Customer`使用多个嵌套类实现或不使用，它应该只返回其客户端类最终需要的内容。

例如，最后一个代码片段可能被重构为， `customer.getPhoneNumber(addressType, phoneType);`

或者如果只有少数选项， `customer.getPrimaryMobilePhoneNumber();`

这两种方法都会导致`Customer`类的用户不知道其内部实现，并确保这些用户不必通过他们不直接感兴趣的对象进行调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-27T18:10:38.083

重要的是要记住，尽管**得墨忒耳法则** **是****一个指导方针**，而不是实际的法则。我们需要在更深的层次上检查它的目的，以确定在这里做什么是正确的。

得墨忒耳法则的目的是防止外部物体能够访问另一个物体的内部。访问内部有两个问题：1）它提供了太多关于对象内部结构的信息，2）它还允许外部对象修改类的内部。

对此问题的正确回应是**将 Customer 方法返回的对象从内部表示中分离出来**。换句话说，我们没有返回对 ContactInfo 类型的私有内部对象的引用，而是定义了一个新类 UnmodifiableContactInfo，并**让 getPrimaryAddress 返回 UnmodifiableContactInfo，创建它并根据需要进行填充。**

这让我们都受益于得墨忒耳法则。返回的对象不再是 Customer 的内部对象，这意味着 Customer 可以随意修改其内部存储，并且我们对 UnmodifiableContactInfo 所做的任何操作都不会影响 Customer 的内部。

（实际上我会重命名内部类并将外部类保留为 ContactInfo，但这是一个小问题）

所以这实现了得墨忒耳法则的目标，但看起来我们仍然在打破它。我的想法是 getAddress 方法不是返回一个 ContactInfo 对象，而是实例化它。这意味着在 Demeter 规则下，我们可以访问 ContactInfo 的方法，并且您上面编写的代码并不违反。

当然，您必须注意，尽管在访问 Customer 的代码中发生了“违反 Demeter 定律”，但需要在 Customer 中进行修复。一般来说，修复是一件好事 - 提供对内部对象的访问是不好的，无论是否使用多个“点”访问它们。

一些笔记。很明显，过于严格地应用得墨忒耳定律会导致白痴，例如：

```
int nameLength = myObject.getName().length() 
```

这是我们大多数人每天都在做的技术违规。大家也这样做：

```
mylist.get(0).doSomething(); 
```

这在技术上是违规行为。但现实情况是，除非我们实际上允许外部代码基于检索到的对象影响主对象（客户）的行为，否则这些都不是问题。

# 概括

这是您的代码应如下所示：

```
public class Customer {
    private class InternalContactInfo {
        public ContactInfo createContactinfo() {
            //creates a ContactInfo based on its own values...
        }
        //Etc....
    }
   private String name;
   private InternalContactInfo primaryAddress;
   //Etc...

   public Contactinfo getPrimaryAddress() { 
      // copies the info from InternalContactInfo to a new object
      return primaryAddress.createContactInfo();
   }
   //Etc...
}

public class ContactInfo {
   // Not modifiable
   private String phoneNumber;
   private String emailAddress;
   //Etc...

   public getPhoneNumber() { return phoneNumber; }
   public getEmailAddress() { return emailAddress; }
   //Etc...
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-29T17:09:39.517

如何创建另一个名称为`CustomerInformationProvider`. 您可以将您的`Customer`对象作为构造函数参数传递给他的新类。然后你可以在这个类中编写所有获取电话、地址等的具体方法，同时保持`Customer`类干净。

# ios - 快速显示和隐藏 CALayer 的似乎很慢

> ID：15692449
> 
> 赞同：0
> 
> 时间：2013-03-28T21:23:42.787
> 
> 标签：ios, core-animation, calayer

在我的原型应用程序中，大约有 100 个 CALayer，它们位于不同但固定的位置，并具有与内容相同的小图像。现在唯一需要做的是`hidden`反复且非常快速地切换属性。

这可行，但它明显慢于我之前使用`UIImage`'`drawAtPoint:`方法 in的方法`drawRect`。

我想要一个闪光灯般的外观，没有过渡。这就是我使用`hidden`而不是使用的原因`opacity`，但是，它看起来好像有一个淡入淡出，这告诉我它很慢。使用`drawAtPoint:`- 方法看起来不错，但它对 CPU 的负担很重。

出于这个原因，我使用 CALayer 重写了它，现在我很困惑为什么它这么慢。

你能给我建议如何调查这个吗？使用 Instruments，我没有获得任何见解。它告诉我它以 59-60 FPS 的速度渲染，但明显要慢得多。

（触摸）事件与隐藏或显示图层生效之间似乎存在延迟。

这就是我初始化图层的方式：

```
layers[i] = [CALayer layer];
layers[i].frame = frameForLayer(i);
layers[i].contents = (__bridge id)image;
[layers[i] setContentsScale:scale];
layers[i].hidden = YES;
[[self layer] addSublayer:layers[i]]; 
```

所有这些都`awakeFromNib`在我的主要观点中。
后来，只有`hidden`属性被修改，其余的保留。

**编辑：** 而不仅仅是`someLayer.hidden = NO`，我现在正在写

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue
                 forKey:kCATransactionDisableActions];
someLayer.hidden = NO;
[CATransaction commit]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:41:09.240

尝试在 CATransaction 块中执行上述代码并设置动画持续时间，如下所示：

```
[CATransaction setValue:[NSNumber numberWithInt:0] forKey:kCATransactionAnimationDuration]; 
```

您可能还需要像这样禁用转换：

```
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions]; 
```

我相信当你设置它们的内容时，CALayers 有一个默认的“动画”。

# c++ - 使函数返回类类型

> ID：15692455
> 
> 赞同：-1
> 
> 时间：2013-03-28T21:24:02.947
> 
> 标签：c++, class

我有一个名为 Duration 的结构，我将如何更改此函数以使其返回 Duration 类型的对象？另一个问题是，如果我必须重载函数，我将如何让它接受持续时间对象？

```
void all(clock_t t, int &hours, int &minutes, int &seconds, int &ticks) {
    ticks = t % CLOCKS_PER_SEC;
    seconds = t / CLOCKS_PER_SEC;
    minutes = seconds / 60;
    seconds %= 60;
    hours = minutes / 60;
    minutes %= 60;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:51:54.300

假设您的`Duration`结构是这样的：

```
struct Duration {
   int hours, minutes, seconds, ticks;
}; 
```

现在您的`all()`方法可能如下所示：

```
Duration all(clock_t t) {
    Duration duration;
    duration.ticks = t % CLOCKS_PER_SEC;
    duration.seconds = t / CLOCKS_PER_SEC;
    duration.minutes = duration.seconds / 60;
    duration.seconds %= 60;
    duration.hours = duration.minutes / 60;
    duration.minutes %= 60;
    return duration;
} 
```

并被称为：

```
clock_t t = ...;
Duration duration = all(t); 
```

要回答您的另一个问题，如果您想重载`all()`以接受`Duration`for 输出，它可能如下所示：

```
void all(clock_t t, Duration &duration) {
    duration.ticks = t % CLOCKS_PER_SEC;
    duration.seconds = t / CLOCKS_PER_SEC;
    duration.minutes = duration.seconds / 60;
    duration.seconds %= 60;
    duration.hours = duration.minutes / 60;
    duration.minutes %= 60;
} 
```

并被称为：

```
clock_t t = ...;
Duration duration;
all(t, duration); 
```

如果您重载，您可以使用另一个重载来实现一个重载以减少重复代码，如下所示：

```
Duration all(clock_t t) {
    Duration duration;
    duration.ticks = t % CLOCKS_PER_SEC;
    duration.seconds = t / CLOCKS_PER_SEC;
    duration.minutes = duration.seconds / 60;
    duration.seconds %= 60;
    duration.hours = duration.minutes / 60;
    duration.minutes %= 60;
    return duration;
}

void all(clock_t t, Duration &duration) {
    duration = all(t);
} 
```

或这个：

```
void all(clock_t t, Duration &duration) {
    duration.ticks = t % CLOCKS_PER_SEC;
    duration.seconds = t / CLOCKS_PER_SEC;
    duration.minutes = duration.seconds / 60;
    duration.seconds %= 60;
    duration.hours = duration.minutes / 60;
    duration.minutes %= 60;
}

Duration all(clock_t t) {
    Duration duration;
    all(t, duration);
    return duration;
} 
```

# c# - 如何使用 ReSharper 列出解决方案中未使用的方法？

> ID：15692456
> 
> 赞同：94
> 
> 时间：2013-03-28T21:24:17.237
> 
> 标签：c#, asp.net, resharper

在我继承的一个遗留的 ASP.NET 项目中，定义了许多绝对无处使用的方法。

我熟悉“查找用法”功能，但希望能够生成一个在应用程序任何地方都没有调用的方法列表。是否存在这样的功能？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2013-03-28T21:33:55.130

您可以在解决方案中选择 ReSharper => Inspect => Codes Issues；在那里，您可以按“问题类型”分组，您应该看到所有与“类型或类型成员从未使用”匹配的问题（未使用的方法在那里）

（如果你点击它，你可以选择：“只显示“类型或类型成员从未使用过”问题”..你去吧;）

![ReSharper[1]](../Images/0d296389d96227e5d7ca2df3c213cfea.png)

# java - Java SE和Android平台的正则表达式不同

> ID：15692458
> 
> 赞同：11
> 
> 时间：2013-03-28T21:24:26.910
> 
> 标签：java, android

我有以下**Java SE**代码，可在 PC 上运行

```
public static void main(String[] args) {
    // stringCommaPattern will change
    // ","abc,def","
    // to
    // ","abcdef","        
    Pattern stringCommaPattern = Pattern.compile("(\",\")|,(?=[^\"[,]]*\",\")");
    String data = "\"SAN\",\"Banco Santander, \",\"NYSE\"";
    System.out.println(data);
    final String result = stringCommaPattern.matcher(data).replaceAll("$1");
    System.out.println(result);
} 
```

我得到了预期的结果

```
"SAN","Banco Santander, ","NYSE"
"SAN","Banco Santander ","NYSE" 
```

但是，当谈到**Android**时。

```
Pattern stringCommaPattern = Pattern.compile("(\",\")|,(?=[^\"[,]]*\",\")");
String data = "\"SAN\",\"Banco Santander, \",\"NYSE\"";
Log.i("CHEOK", data);
final String result = stringCommaPattern.matcher(data).replaceAll("$1");
Log.i("CHEOK", result); 
```

我越来越

```
"SAN","Banco Santander, ","NYSE"
"SAN","Banco Santandernull ","NYSE" 
```

***任何建议和解决方法，我如何才能使此代码的行为与 Java SE 相同？***

* * *

## 附加说明：

其他模式也产生相同的结果。看来，**Android 对不匹配的组使用空字符串，而 Java SE 对不匹配的组使用空字符串。**

采取以下代码。

```
public static void main(String[] args) {
    // Used to remove the comma within an integer digit. The digit must be located
    // in between two string. Replaced with $1.
    //
    // digitPattern will change
    // ",100,000,"
    // to
    // ",100000,"        
    final Pattern digitPattern = Pattern.compile("(\",)|,(?=[\\d,]+,\")");
    String data = "\",100,000,000,\"";
    System.out.println(data);
    final String result = digitPattern.matcher(data).replaceAll("$1");
    System.out.println(result);
} 
```

## Java SE

```
",100,000,000,"
",100000000," 
```

## 安卓

```
",100,000,000,"
",100null000null000," 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T09:17:31.930

不是原因，但作为一种解决方法，您可以自己执行`appendReplacement`循环而不是使用`replaceAll`

```
StringBuffer result = new StringBuffer();
Matcher m = digitPattern.matcher(data);
while(m.find()) {
  m.appendReplacement(result, (m.group(1) == null ? "" : "$1"));
}
m.appendTail(result); 
```

这应该适用于 JavaSE 和 Android。

或者通过更改正则表达式完全回避问题

```
Pattern commaNotBetweenQuotes = Pattern.compile("(?<!\"),(?!\")");
String result = commaNotBetweenQuotes.matcher(data).replaceAll(""); 
```

在这里，正则表达式只匹配您想要更改的逗号，而不是您想要保持不变的逗号，因此您可以将它们全部替换`""`为无需捕获组。

# ios - 定义委托属性时的 id vs 类名

> ID：15692459
> 
> 赞同：0
> 
> 时间：2013-03-28T21:24:31.857
> 
> 标签：ios, objective-c

我正在研究我的应用程序中的授权委托模式。

我之前看到的大多数东西都使用类似的东西：

```
@property (weak) id<Delegate> delegate; 
```

这是否使它比说的更弱

```
@property (weak) UIViewController<Delegate> *delegate; 
```

我意识到我在第一个中要求任何指针，而在第二个中我期待一个类型化的指针。但我只希望我的委托是 UIViewController 或子类。

谁能解释一下区别和利弊？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:30:22.450

> 但我只希望我的代表成为一个`UIViewController`或子类。

然后走第二种方式——第一种表示它可以是任何符合`<Delegate>`协议的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:38:35.130

没有真正的优点或缺点。只是合同不一样。一个说“我不在乎它是什么类，只要它符合该协议”，另一个说“我想要一个 UIViewController 的子类，它也符合该协议”。

这里唯一的一点是 Cocoa 中的“委托”模式的想法通常是为 API 的客户端提供一种创建对象的方法，该对象将自定义一个或多个其他组件的行为。

由于您希望此属性成为视图控制器，因此语义不仅仅是一个委托，所以我不会称它为委托，而是一个 xxxViewController，其中“xxx”是您的对象和该视图控制器之间的实际功能关系。

# php - PHP foreach - 用逗号分隔每个循环，除了最后一个元素

> ID：15692464
> 
> 赞同：3
> 
> 时间：2013-03-28T21:24:44.630
> 
> 标签：php

这就是我的意思：

```
foreach ($array as $a) {
 echo $a.',<br/>';
} 
```

当前输出为：

```
a,
a,
a,
a, 
```

我希望输出是这样的：

```
a,
a,
a,
a 
```

（所有 'a' 用逗号分隔，当涉及到最后一个循环时，它不写逗号）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T21:26:21.863

试试这个：

```
echo implode(",<br/>", $array); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-22T19:40:38.460

如果数组的长度太大或者您有多维数组，请使用以下代码

```
<?php $len=count($array);
    foreach($array as $a){ 
        echo $a; 
        if( $len > 1) echo ','; 
        $len--;
 } ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T21:27:43.290

如果您还想将数组中的任何换行符转换为`<br />`，如果您正在输出，这可能是理想的：

```
echo nl2br(implode(',' . PHP_EOL, $array)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T21:26:35.923

PHP 有这样的[`implode`](http://php.net/manual/en/function.implode.php)功能：

```
 implode(",<br>", $array); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-17T14:55:45.477

没有人说你可以这样：

```
foreach($array as $element) { 
    $separator = ($element != end($array)) ? ",<br />" : '';
// or $separator = ($element == end($array)) ? '' : ",<br />";   
    echo $element.$separator;
} 
```

我想这将准确地输出你想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T21:31:30.337

你应该使用`implode`除了一种情况。

如果输出很大，并且您不想在发送到输出之前将其保存在内存中（例如逐项处理），那么您应该执行以下操作：

```
$remain=count($array);
foreach ($array as $a) {
    echo $a;
    if($remain-->0) echo ',';
    echo '<br/>';
} 
```

# html - 打印时用文本替换 HTML 对象

> ID：15692467
> 
> 赞同：-1
> 
> 时间：2013-03-28T21:24:51.813
> 
> 标签：html, object

我有下面的行来显示和内联 PDF

```
<div id="pdf"><object data="foo.pdf" type="application/pdf">
</object></div> 
```

效果很好，但是当打印页面时，我想用文本替换 PDF。

有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:37:20.037

更多关于评论；

你可以有另一个 div 是`display:none`

并仅在媒体类型为打印并隐藏 pdf 的 div 时才显示它。

```
@media print {
     #pdf{
        display:none;
     }
     #txt{
        display:inline;
     }
} 
```

这是小提琴[http://jsfiddle.net/btevfik/SQ9Pv/](http://jsfiddle.net/btevfik/SQ9Pv/)

# java - 如何在两个不同的 Jpanels 中转移焦点？

> ID：15692471
> 
> 赞同：0
> 
> 时间：2013-03-28T21:25:17.693
> 
> 标签：java, swing, netbeans, jpanel, enter

我独立开发了一个完全支持键盘的 openbravo 版本（一个开源 erp/pos），这样买不起触摸屏硬件的人可以免费获得一个好的销售点。那么，当它们位于不同的 Jpanels 中时，如何在 java（netbeans 环境）中使用 enter 键在两个元素之间跳转？特别是当涉及其他按钮时。提前致谢！Ps.由于这是一个非常图形化的任务，这里有一些基本的截图来理解这个问题：[http](http://matheus25.site90.net/first.jpg) ://matheus25.site90.net/first.jpg , [http://matheus25.site90.net/second.jpg](http://matheus25.site90.net/second.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:45:02.673

见`KeyboardFocusManager.setDefaultFocusTraversalKeys(...)`。您应该能够添加 Enter 作为第二个制表键。

虽然，我同意吉尔伯特的观点，这会让用户感到困惑。

# c++ - 继承问题，类？

> ID：15692476
> 
> 赞同：0
> 
> 时间：2013-03-28T21:25:44.560
> 
> 标签：c++, class, inheritance, text

我正在用 C++ 创建一个基于文本的冒险游戏，这是我的玩家类，我从健康、耐力和键参数开始，它运行良好。

```
class Player
    {
    public:
        Player();

        Player(int health, int stamina, int keys, Items weapon, Items armour, Items gold);

        void setHealth(int healthParam);
        int getHealth() const;

        void setStamina(int staminaParam);
        int getStamina() const;

        void setKeys(int keysParam);
        int getKeys() const;

        void setWeapon(Items weaponParam);
        Items getWeapon() const;

        void setArmour(Items armourParam);
        Items getArmour() const;

        void setGold(Items goldParam);
        Items getGold() const;

    private:
        int health;
        int stamina;
        int keys;
        Items weapon;
        Items armour;
        Items gold;

    }; 
```

然后我创建了一个名为 items（如下）的类，我希望我的播放器从该类继承变量

```
class Items
{
public:
    Items();

    void setWeapon(string weaponParam);
    string getWeapon() const;

    void setArmour(string armourParam);
    string getArmour() const;

    void setGold(int goldParam);
    int getGold() const;

private:
    string weapon;
    string armour;
    int gold;

};

#endif 
```

如您所见，我的玩家类中有一个重载的构造函数，我希望玩家获取属性武器、盔甲和金币，但在我的主要部分我遇到了问题（主要如下）

```
int currentKeys = 0;
string userInput;

Player player(100, 100, currentKeys, "", "", 0); 
```

我得到的错误是告诉我我没有与我的播放器类中的构造函数匹配的构造函数实例，我只想知道是否有人可以帮助我解决我的问题？在字符串的情况下，我所有的属性最初都设置为 0 或 ""，所以我不知道该怎么做，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:31:36.537

你似乎很困惑。这与继承无关。这是组合。

每个类型的对象都`Items`将具有`weapon`、`armour`和`gold`成员。你的`Player`类有*三个*类型的对象`Items`。这意味着它有`weapon`、`armour`和三个批次`gold`。我相当确定你希望你`Player`只有一套`Items`. 所以改变：

```
Items weapon;
Items armour;
Items gold; 
```

只是：

```
Items items; 
```

现在让你的`Player`构造函数只接受一个`Items`对象：

```
 Player(int health, int stamina, int keys, Items items); 
```

`items`它应该用这个参数初始化成员。现在你可以`Player`像这样创建你的：

```
Items items;
items.setWeapon("Battle Axe");
items.setArmour("Gold Chest Plate");
items.setGold(10);
Player player(10, 20, 1, items); 
```

但是，我建议去掉 setter 函数，`Items`让它有一个构造函数，你可以像这样使用它：

```
Items items("Battle Axe", "Gold Chest Plate", 10);
Player player(10, 20, 1, items); 
```

* * *

另一种设计是完全摆脱`Items`类，只制作`weapon`,`armour`和`gold`的成员`Player`：

```
int health;
int stamina;
int keys;
std::string weapon;
std::string armour;
int gold; 
```

那么构造函数应该是这样的：

```
Player(int health, int stamina, int keys, std::string weapon, std::string armour, int gold); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:31:51.660

我建议创建一个 Items 构造函数

```
Items(string weapon, string armour, int gold); 
```

并将您的播放器构造函数更改为

```
Player(int health, int stamina, int keys, Items items); 
```

然后，您可以`Items`在`Player`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:53:45.730

你的编译器是对的，没有匹配的构造函数。

你用过：

```
Player(int,int,int,const char*,const char*,int) 
```

这与以下内容不同：

```
Player(int,int,int,Item,Item,Item) 
```

在你的标题中

# django - Django Social Auth检查用户是否是新用户

> ID：15692479
> 
> 赞同：1
> 
> 时间：2013-03-28T21:26:07.410
> 
> 标签：django, django-socialauth

我正在为我的网站使用@Omab 的 django-social-auth。

在设置中，我已`SOCIAL_AUTH_NEW_USER_REDIRECT_URL`设置为`/profile`. 我的问题是，在视图中，我如何检查用户是否是新用户？有我可以访问的变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:50:36.627

我假设这`SOCIAL_AUTH_LOGIN_REDIRECT_URL`两者`SOCIAL_AUTH_NEW_USER_REDIRECT_URL`都指向`/profile`. 并且您希望在用户被定向到`/profile`使用`SOCIAL_AUTH_NEW_USER_REDIRECT_URL`.

最简单的方法是使用这样的新 url 模式：

### 网址.py

```
urls = [
    (r'^profile/$', 'profile'),
    (r'^profile/new/$', 'profile', {'new_user': True}),
]

urlpatterns = patterns('project.app.views', *urls) 
```

### 视图.py

```
from django.shortcuts import render
def profile(request, new_user=False):
    if new:
         # if user is new code
    return render(request, 'path/to/template.html', {'new_user': new_user}) 
```

### 设置.py

```
SOCIAL_AUTH_LOGIN_REDIRECT_URL = '/profile'
SOCIAL_AUTH_NEW_USER_REDIRECT_URL = '/profile/new' 
```

在这里阅读：[https ://docs.djangoproject.com/en/1.5/topics/http/urls/#passing-extra-options-to-view-functions](https://docs.djangoproject.com/en/1.5/topics/http/urls/#passing-extra-options-to-view-functions)

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:09:34.530

找到了解决方案。

变量`is_new`在变量中设置`request.session`。您可以按如下方式访问它：

```
name = setting('SOCIAL_AUTH_PARTIAL_PIPELINE_KEY', 'partial_pipeline')
if name in request.session:
    if request.session[name]['kwargs']['is_new'] == True:
        #Do something. 
```

感谢您的回答！

# android - Android 构建：使用“mm”将 1 个 C 文件构建为 2 个可执行文件

> ID：15692483
> 
> 赞同：0
> 
> 时间：2013-03-28T21:26:18.480
> 
> 标签：android

我有一个如下所示的 C 文件，它内置于 2 个可执行文件 test0 和 test1 中。但是，foo.c 不是为 test1 构建的，尽管当我使用“mm”时它具有不同的标志，并且“mm -B”是可以的。这是一个错误吗？

foo.c #ifdef TEST1 ... #else ... #endif

makefile 是这样的。安卓.mk

```
LOCAL_PATH := $(call my-dir)
##### build for test 0 ####
include $(CLEAR_VARS)
LOCAL_SRC_FILES := foo.c
LOCAL_MODULE := test0
    ...
include $(BUILD_EXECUTABLE)

##### build for test 1 ####
include $(CLEAR_VARS)
LOCAL_SRC_FILES := foo.c
LOCAL_MODULE := test1
LOCAL_CFLAGS := TEST1
    ...
include $(BUILD_EXECUTABLE)
##### end of Android.mk ########## 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T05:46:05.020

You need to define TEST in the LOCAL_CFLAGS using -D. This is standard compile ( gcc ) behaviour, The build for test 1 fragment should look like this

```
##### build for test 1 ####
include $(CLEAR_VARS)
LOCAL_SRC_FILES := foo.c
LOCAL_MODULE := test1
LOCAL_CFLAGS := -DTEST1
...
include $(BUILD_EXECUTABLE) 
```

Touching the file is not required as Android compiles the object files to an intermediate directory found in the out directory tree, so in this case they will be named as follows

out/target/product/[PRODUCT_DEVICE]/obj/EXECUTABLES/test0_intermediates out/target/product/[PRODUCT_DEVICE]/obj/EXECUTABLES/test1_intermediates

# css - 这是一个 CSS 盒子阴影吗？在左边和右边？

> ID：15692486
> 
> 赞同：0
> 
> 时间：2013-03-28T21:26:20.823
> 
> 标签：css, shadow

我很抱歉在这里问这个问题，因为我很确定这不是 100% 这个论坛的用途（尽管我认为它是 CSS），但我在另一个论坛上问过，没有人明白我在说什么！所以我想：我100%肯定这里有人会知道！

他们在这样的网站上使用的网站框阴影是什么（我认为它是 CSS 框阴影？）：

[http://www.rcgp.org.uk/](http://www.rcgp.org.uk/)

- 我的意思是盒子阴影在我认为是正文容器的左右两侧，它有助于为页面提供一个总体框架 - 请注意，阴影会在“查找课程和活动”结束时慢慢消失并完全消失' 盒子。

提前谢谢你，我很感激你的智慧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:33:13.750

此页面对所有内容使用固定宽度的容器 (940px, `#wrapper`)。阴影只是具有正确尺寸的图像：

```
body{
    /* ... */
    url("../images/main-bg.jpg") no-repeat scroll center top transparent;
} 
```

# html - 使用 HTML5 和 javascript 构建的 QR 扫描，通过 phonegap 构建变成手机应用程序？

> ID：15692488
> 
> 赞同：1
> 
> 时间：2013-03-28T21:26:22.313
> 
> 标签：html, qr-code, phonegap-build, getusermedia

在网上看到了很多关于此的帖子，但没有进一步了解是否可以这样做......

已经看到[http://www.webqr.com/](http://www.webqr.com/)推荐，但我尝试将 .zip 从 github（[https://github.com/LazarSoft/jsqrcode](https://github.com/LazarSoft/jsqrcode)）上传到 phonegap，编译的应用程序在 android 上失败，显示“对不起，此浏览器不支持本机网络摄像头流式传输 (getusermedia)”

好吧，我并没有真正尝试使用网络摄像头，如果可能的话，我想访问手机/ipad 上的摄像头。

是否真的可以从 HTML5 执行此操作，还是需要适当的本机应用程序？（所以我想到的ipad应用程序的xcode）

我还看到了一些用于“phonegap”的插件（而不是phonegap build），它们也需要一个mac/xcode，所以这不是我想要接近它的角度，因为如果可能的话，我正试图从windows完成这一切.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T00:31:52.683

这可能会有所帮助。它是一个 js 插件。在 phonegap 插件页面中搜索“扫描仪”

[https://build.phonegap.com/plugins/2421](https://build.phonegap.com/plugins/2421)

[https://github.com/wildabeast/BarcodeScanner/tree/c74e37a](https://github.com/wildabeast/BarcodeScanner/tree/c74e37a)

# c++ - 为什么我有内存泄漏？

> ID：15692489
> 
> 赞同：2
> 
> 时间：2013-03-28T21:26:27.737
> 
> 标签：c++, visual-studio-2010, memory, memory-leaks

我正在使用 VLD 来检测我用 C++ 编写的游戏中的内存泄漏。它直到最近才报告没有泄漏。我有一个 SettingsManager 类（所有静态方法），它加载设置并可以保存它们（文件 I/O）。这是我将“key = value”设置列表加载到向量中的方法：

```
std::vector<Setting*> settings;
SettingsManager::loadFromFile(settingsLocation + "display" + settingsExtension, settings); 
```

该向量已正确填充，我可以进一步处理数据。loadFromFile() 方法实现如下：

```
std::ifstream file;
file.open(filename);
if(file.is_open())
{
    std::string line;
    unsigned pos;
    while(file.good())
    {
        Setting* s = new Setting;
        getline(file, line);
        if(line.empty())
        {
            // do not read empty lines
            continue;
        }
        // parse to Setting
        pos = line.find('=');
        s->key = line.substr(0, pos);
        s->value = line.substr(pos + 1);
        // add to vector
        settings.push_back(s);
    }
    file.close();
    return true;
}
else
{
    return false;
} 
```

因此，这会分配 Settings（这是一个带有两个 std::string 变量的简单结构）。我使用以下方法调用从调用 loadFromFile 方法的位置删除它们：

```
SettingsManager::deleteSettings(settings); 
```

实现如下：

```
void SettingsManager::deleteSettings(std::vector<Setting*>& settings)
{
    for(std::vector<Setting*>::iterator it = settings.begin(); it != settings.end(); ++it)
    {
            delete (*it);
    }
} 
```

当我调试时，在 deleteSettings 调用后，向量中的所有元素都是 Bad Ptr（Visual Studio 2010 Express）。如果我在删除语句之后将 NULL 分配给 *it，它们都是 NULL。所以我真的看不出为什么这会给我带来内存泄漏。

有人有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T21:28:17.183

该`continue`声明导致至少一次泄漏。循环的开始分配一个新`Setting`值并继续离开循环体而不释放内存。您需要删除它以防止泄漏。

```
Setting* s = new Setting;
getline(file, line);
if(line.empty()) {
  delete s;
  continue;
} 
```

总的来说，尽管您在这里使用手动内存管理，但很容易出错。我强烈建议您考虑使用 like`shared_ptr<Setting>`而不是 raw类型`Setting*`。它将使您的代码更加健壮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:35:18.927

移动

```
Setting* s = new Setting; 
```

在将解决您的问题的继续循环之后。

编辑：

我会更详细地解释。您当前正在为每一行甚至是空行创建一个新的设置对象。但是，只有非空行的设置对象存储在您的容器中，我假设您稍后会使用它来释放内存。

通过将创建设置对象的代码放在评估空行的语句之后，您应该可以解决此问题。

# c - gcc -nostdlib 导致 SDL_OpenAudio() 中的分段错误

> ID：15692490
> 
> 赞同：2
> 
> 时间：2013-03-28T21:26:28.517
> 
> 标签：c, linux, audio, gcc, sdl

当我使用 gcc -nostartfiles 或 -nostdlib 编译以下代码时，运行生成的程序会在调用 SDL_OpenAudio() 时导致音频系统深处崩溃。如果没有这个调用，一切正常，甚至其他库也能正常工作。在没有 -nostartfiles/-nostdlib 的情况下编译（并将 _start 重命名为 main 并注释程序集退出调用）它工作正常。

我的问题：是什么导致了对 gcc 启动代码的这种依赖性，如何在不删除 -nostartfiles / -nostdlib 的情况下修复它？

我正在使用 gcc 4.7.2 在 x86_64 上为 linux 64 位编译

```
void _start()
{
    SDL_AudioSpec fmt;

    fmt.freq = 44100;
    fmt.format = AUDIO_S16;
    fmt.channels = 1;
    fmt.samples = 4096;
    fmt.callback = mixaudio;
    fmt.userdata = NULL;
    if ( SDL_OpenAudio(&fmt, NULL) < 0 ) SDL_Quit();
    SDL_PauseAudio(0);
    while(1){SDL_Delay(20);}

    asm("xorq %rax, %rax \n movq 42, %ebx \n int 0x80");
} 
```

# c# - asp.net 4.0 中的页面路由（无扩展 url）与 PageHandlerFactory (*.aspx)

> ID：15692499
> 
> 赞同：3
> 
> 时间：2013-03-28T21:27:11.617
> 
> 标签：c#, asp.net, routing, webforms, httphandlerfactory

请解释一下，这两种技术有何不同。我假设，根据我下面描述的经验和[本文](http://blogs.msdn.com/b/tmarq/archive/2010/05/26/how-extensionless-urls-are-handled-by-asp-net-v4.aspx)，在应用路由时，不会调用 PageHandlerFactory。

我有我自己的派生类`PageHandlerFactory`，每当用户访问页面时都应该调用它。

当我不通过路由访问页面时，使用 web.config 中的这行代码一切都很好

```
<httpHandlers>
      <add verb="*" path="*.aspx" type="MyProject.Web.DependencyInjectionPageHandlerFactory, MyProject.Web" />
    </httpHandlers> 
```

但是当我通过路由访问页面时，例如

```
RouteTable.Routes.MapPageRoute("Login", "login", "~/Pages/Login.aspx"); 
```

处理程序未应用。我什至通过在我的处理程序的构造函数中放置一个断点来测试它，当我通过路由访问页面时它没有被调用。由于我在我的项目中使用 IoC/DI，即使我使用路由，我也想继续使用它将 DI 注入我的 aspx 页面。

我将如何在 web.config 中管理它？或者至少在代码中。

* * *

**编辑：**我发现每次加载页面时都会引发事件，无论如何。在 Global.asax 中是

```
Application_PostRequestHandlerExecute 
```

现在，我可以很容易地知道，它是如何通过解析 URL 来调用的。有没有办法，如何在某些页面上应用我的 PageHandlerFactory？

# ms-access - Access iif 函数似乎改变了 where 子句中标准的解释方式

> ID：15692501
> 
> 赞同：0
> 
> 时间：2013-03-28T21:27:15.023
> 
> 标签：ms-access, iif

我正在根据前一个工作日发生的事件在 Access 2007 中自动生成一些报告。周二至周六，前一个工作日是前一天。在星期一，前一个工作日是两天前。其中一份报告涉及带有时间戳的小额现金支付。使用 Date() 函数和 Between 语句很容易获取上一个工作日的记录：

```
WHERE Paid_Out_Datetime Between Date()-1 AND Date() 
```

这将返回从前一天到现在的付款列表（这将是当天凌晨 4 点左右）。但是如果你把它放在一个 iif 函数中：

```
WHERE Paid_Out_Datetime =  iif(Weekday(Date())=2,Paid_Out_Datetime Between Date()-2 AND Date(), Paid_Out_Datetime Between Date()-1 AND Date()) 
```

...没有返回记录。如果您只是使用`Paid_Out_Datetime = Date()-1`，您将不会获得任何记录，除非付款恰好在前一天的同一时间进行。将 Between 标准放在 iif 函数中似乎会导致它的行为与作为单个标准不同。我的 where 子句看起来很简单；任何想法为什么它不起作用？

# c# - RSA创建时间，为什么在16384bit之后下降？

> ID：15692503
> 
> 赞同：3
> 
> 时间：2013-03-28T21:27:31.227
> 
> 标签：c#, cryptography, rsa

我正在玩 RSA 密钥创建并开始测量创建具有特定位强度的 RSA 密钥所需的时间。
我的关键问题是，创建一个 16384 位 RSA 密钥需要多长时间（大约 140 秒）。
我期望一个稳定的对数增长，但我得到了这个：（x：位；y：秒）

![图 1](../Images/8a150691f043f0a0169c86b0821937c3.png) ![图 2](../Images/d85200d808151d4645430d583e2320f2.png)

所有密钥均使用以下命令创建：
csp = new RSACryptoServiceProvider(keyStrength); (c#, net 4.0) 那么为什么我会得到这个锯齿波呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:50:26.787

好吧，很明显，该图暗示他们没有通过对每个素数随机生成的数字进行经典素数测试来生成 RSA 密钥来生成素数。

所以，唯一剩下的假设是他们使用了某种在预分段范围内工作的素数族生成器。

您可以在此处阅读更多信息： [https ://crypto.stackexchange.com/questions/71/how-can-i-generate-large-prime-numbers-for-rsa](https://crypto.stackexchange.com/questions/71/how-can-i-generate-large-prime-numbers-for-rsa)

# postgresql - 复制 postgresql 数据库的更快方法（或最佳方法）

> ID：15692508
> 
> 赞同：80
> 
> 时间：2013-03-28T21:27:45.807
> 
> 标签：postgresql

我做了一个数据库的 pg_dump，现在正试图将生成的 .sql 文件安装到另一台服务器上。

我正在使用以下命令。

```
psql -f databasedump.sql 
```

我今天早些时候启动了数据库安装，现在 7 小时后数据库仍在填充。我不知道这是否应该花多长时间，但我继续监视它，到目前为止，我已经看到超过 12 万个插入和计数。我怀疑有一种更快的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2014-06-04T23:45:44.507

创建你的转储

```
pg_dump -Fc -Z 9  --file=file.dump myDb 
```

`Fc`

> 输出适合输入到 pg_restore 的自定义存档。这是最灵活的格式，因为它允许重新排序加载数据和对象定义。默认情况下，此格式也是压缩的。

`Z 9: --compress=0..9`

> 指定要使用的压缩级别。零表示没有压缩。对于自定义存档格式，这指定了单个表数据段的压缩，默认为中等压缩级别。对于纯文本输出，设置非零压缩级别会导致整个输出文件被压缩，就好像它是通过 gzip 输入的一样；但默认是不压缩的。tar 归档格式目前根本不支持压缩。

并用

```
pg_restore -Fc -j 8  file.dump 
```

`-j: --jobs=number-of-jobs`

> 使用多个并发作业运行 pg_restore 中最耗时的部分——加载数据、创建索引或创建约束的部分。此选项可以显着减少将大型数据库恢复到运行在多处理器机器上的服务器的时间。
> 
> 每个作业是一个进程或一个线程，具体取决于操作系统，并使用与服务器的单独连接。
> 
> 此选项的最佳值取决于服务器、客户端和网络的硬件设置。因素包括 CPU 内核的数量和磁盘设置。一个很好的起点是服务器上的 CPU 内核数，但在许多情况下，大于该值的值也会导致更快的恢复时间。当然，过高的值会因为抖动而导致性能下降。
> 
> 此选项仅支持自定义和目录归档格式。输入必须是常规文件或目录（例如，不是管道）。发出脚本而不是直接连接到数据库服务器时，将忽略此选项。此外，多个作业不能与选项 --single-transaction 一起使用。

链接：

[pg_dump](https://www.postgresql.org/docs/current/app-pgdump.html)

[pg_restore](https://www.postgresql.org/docs/current/app-pgrestore.html)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-12-30T15:53:57.777

# 改进 pg 转储和恢复

PG_DUMP | 始终使用带有`-j`选项的格式目录

```
time pg_dump -j 8 -Fd -f /tmp/newout.dir fsdcm_external 
```

PG_RESTORE | 始终使用带有格式目录的 postgres.conf 调整`-j`选项

```
work_mem = 32MB
shared_buffers = 4GB
maintenance_work_mem = 2GB
full_page_writes = off
autovacuum = off
wal_buffers = -1

time pg_restore -j 8 --format=d -C -d postgres /tmp/newout.dir/` 
```

欲了解更多信息

[https://gitlab.com/yanar/Tuning/wikis/improve-pg-dump&restore](https://gitlab.com/yanar/Tuning/wikis/improve-pg-dump&restore)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-28T22:31:35.767

为什么要生成原始 .sql 转储？[pg_dump](http://www.postgresql.org/docs/9.2/static/app-pgdump.html)的开头描述推荐“自定义”格式`-Fc`。

然后您可以使用 pg_restore 来恢复您的数据（或其中的选定部分）。有一个“作业数量”选项`-j`可以使用多个核心（假设您的磁盘还不是限制因素）。在大多数情况下，在现代机器上，您至少可以从中获得一些收益。

现在你说“我不知道这需要多长时间”。好吧，在您完成一些恢复之前，您不会知道。一定要监控你的系统在做什么，以及你是否受到 CPU 或磁盘 I/O 的限制。

最后，您想要用于恢复数据库的配置设置并不是您想要运行它的那些。几个有用的启动器：

1.  增加[maintenance_work_mem](http://www.postgresql.org/docs/9.2/static/runtime-config-resource.html#RUNTIME-CONFIG-RESOURCE-MEMORY)，以便您可以在更大的块中构建索引
2.  在还原期间关闭[fsync 。](http://www.postgresql.org/docs/9.2/static/runtime-config-wal.html#RUNTIME-CONFIG-WAL-SETTINGS)如果你的机器崩溃了，你无论如何都要从头开始。

请记住在恢复后重置它们。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-28T22:00:47.100

的用法`pg_dump`一般建议搭配使用`pg_restore`，而不是搭配使用`psql`。`--jobs`此方法可以在内核之间拆分，以通过传递标志来加速加载过程：

```
$ pg_restore --jobs=8 dump.sql 
```

Postgres 本身有关于批量加载数据的[指南。](http://www.postgresql.org/docs/current/interactive/populate.html)

我还建议大量调整您的`postgresql.conf`配置文件并为`maintenance_work_mem`和值设置适当的高`checkpoint_segments`值；更高的值可能会显着提高您的写入性能。

# c# - C#：异常处理 - 定位错误

> ID：15692509
> 
> 赞同：0
> 
> 时间：2013-03-28T21:27:48.680
> 
> 标签：c#, exception, exception-handling, object-reference

我有这个代码：

```
private void btnNext_Click(object sender, RoutedEventArgs e){
  try
      {
         // Lots of codes in here
      }

  catch (Exception ex)
      {
        System.Windows.MessageBox.Show(ex.Message + Environment.NewLine + ex.StackTrace.ToString()) 
      }
  finally
      {}
} 
```

它正在捕获异常，但没有告诉我代码中异常发生的位置。我唯一得到的是这个。

```
 Object reference not set to an instance of an object
   at ProjectPath.btnNext_Click(Object sender, RoutedEventArgs e) 
```

发布代码在很多机器上都可以正常工作，但在少数机器上，它会抛出这个异常。我只是无法弄清楚在这些机器上运行时异常发生在代码的哪个位置。有没有办法找到发生异常的确切行？`ex.StackTrace`没有完成工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:30:00.863

理想情况下，您应该在您认为会引发异常的区域周围放置单独的 try-catch 块 - 而不是将所有内容放在同一个区域中。

否则，当您调试时，它会创建 pdb 文件，如果它们存在于执行文件的文件夹中，您可以获得行号。

也就是说，这个错误很常见，你在某处有一个空值。

补充：在这里我假设由于某种原因您无法让调试器停止异常，和/或无法跟踪它，因为您将其部署到第三方或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T19:14:37.133

要找到确切的位置——源代码中的特定行——如果您在调试器中运行代码并在异常处理程序中设置断点，这会有所帮助。

如果您检查作为异常处理程序参数引用的数据结构（`ex`在示例中），您会发现一个名为 的数据成员`StackTrace`。如果位置在任何地方，它就会在这里。例如，这里是我正在处理的异常的字符串：

```
at DOffice.BrMan.getLastReportRefreshed() in E:\\src\\BrMan.cs:line 5370
at DOffice.BrParms.lookupParmByParmName(String parmName) in E:\\src\\BrParms.cs:line 169
at DOffice.BrMan.populateAllFromTextFile(String workDirectory) in E:\\src\\BrMan.cs:line 3218
at DOffice.BrMan.setWorkPath(String pathOfCurrentDoc) in E:\\src\\BrMan.cs:line   1686
at DOffice.Form_Dash.InitWork(Object sender) in E:\\src\\Form_Dash.cs:line 1261 
```

# django - 使用 Haystack 设置弹性搜索

> ID：15692512
> 
> 赞同：1
> 
> 时间：2013-03-28T21:28:15.150
> 
> 标签：django, elasticsearch, django-haystack

我曾经用作`Whoosh`搜索后端，但现在我正在切换到`elasticsearch`并试图让事情正常进行。

尝试重建索引时出现错误：

```
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=8000): Max retries exceeded with url: /_bulk?op_type=create (Caused by <class 'socket.error'>: [Errno 61] Connection refused) 
```

以下在我的 settings.py 中：

```
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine',
        'URL': 'http://localhost:8000/',
        'INDEX_NAME': 'haystack',
    },
} 
```

我的问题是，URL 是做什么用的，我在这里放什么？我在本地运行东西进行开发，我部署在 Heroku 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T23:28:06.380

端口应该是 9200。

```
HAYSTACK_CONNECTIONS = {
'default': {
        'ENGINE': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine',
        'URL': 'http://127.0.0.1:9200/',
        'INDEX_NAME': 'haystack',
    },
} 
```

此外，您必须确保您使用的是 haystack 的开发版本（2.0）。

* * *

*编辑：*

您可能希望首先通过执行以下命令来确保 ElasticSearch 正在运行：

```
curl -XGET 'http://127.0.0.1:9200/my_index/_mapping?pretty=1' 
```

# php - PHP SoapClient 构造函数非常慢

> ID：15692517
> 
> 赞同：9
> 
> 时间：2013-03-28T21:28:21.447
> 
> 标签：php, soap, wsdl

我是 Web 服务的新手。我正在经历莫名其妙的随机 SoapClient 构造函数执行时间。通常通话大约需要 10 秒。有时它需要不到一秒钟的时间，但这种情况发生的频率较低。

[PHP SoapClient 构造函数极慢](https://stackoverflow.com/questions/7506853/php-soapclient-constructor-extremely-slow)

[PHP：SoapClient 构造函数非常慢（需要 3 分钟）](https://stackoverflow.com/questions/5944067/php-soapclient-constructor-is-very-slow-takes-3-minutes)

[连接到 WCF Web 服务的速度莫名其妙](https://stackoverflow.com/questions/6034479/connecting-to-wcf-web-service-is-inexplicably-slow)

我的情况与上述线程中的情况相似，但其中提供的解决方案并没有解决我的问题。

```
// config params
$params = array(
    'trace'        => 1,
    'soap_version' => SOAP_1_1,
    'cache_wsdl'   => WSDL_CACHE_MEMORY
);
// this call takes about 10 seconds to remote WSDL
$soap_client = new SoapClient(WSDL_URL,$params); 
```

我玩过不同的 wsdl 缓存参数，发现 WSDL_CACHE_MEMORY 是最快的。使用其他缓存选项时，调用平均需要大约 25 秒。

我没有使用多个用户。

我已将 wsdl_cache_dir 更改为 php.ini 中的 Windows 友好目录。

我的问题有两个：

1.  为什么 SoapClient 构造函数的执行时间看起来是随机的？为什么通常需要更长的时间，但有时只需要一秒钟？有没有我可以执行的测试来了解它为什么会这样？

2.  我是否应该缓存/保存 SoapClient 对象或资源，以便当我的页面访问者从一个页面移动到另一个页面时，我不需要创建新的 SoapClient 并再次重新解析 WSDL？实现这一目标的推荐方法是什么？

任何朝着正确方向的帮助或推动都将非常有义务。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T12:54:00.590

# 检查 TTL

TTL 定义了 WSDL 在缓存中的生存时间。

```
 soap.wsdl_cache_ttl integer 
```

> 设置将使用缓存文件而不是原始文件的秒数（生存时间）。

[http://www.php.net/manual/en/soap.configuration.php#ini.soap.wsdl-cache-ttl](http://www.php.net/manual/en/soap.configuration.php#ini.soap.wsdl-cache-ttl)

# 在本地存储 WSDL

您也可以将 WSDL 下载到本地文件系统并将其用作`SoapClient`

```
$client = new SoapClient("file://path/wsdl.file", array(
    'location' => "http://domain/ws-endpoint",
)); 
```

# php - 为什么这个 php 代码有效？

> ID：15692519
> 
> 赞同：0
> 
> 时间：2013-03-28T21:28:55.953
> 
> 标签：php

什么是 php 中的“_”，以及为什么它在未定义时是有效函数。

```
# code will pass that check. and it will print "_"
if(function_exists("_"))
{
    print f('_');
} 
```

当我尝试打印时（它有效，但给了我通知）

```
print _; 
```

php 给我通知。

```
Notice: Use of undefined constant _ - assumed '_' 
```

所以我使用常量函数并尝试获取他的值，

```
print constant("_"); 
```

但我得到的是

```
Warning: constant() [function.constant]: Couldn't find constant _ in 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:30:38.273

该函数是翻译函数[gettext](http://www.php.net/manual/en/function.gettext.php)`_`的快捷方式。`http://php.net/_`

`print _;`打印常量`_`，同时`print _();`显示 _ 函数的输出（不带参数调用时出现错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T21:32:09.963

因为 _() 是一个有效的函数，

它用于本地化。

当您只是打印时，`_`您正在尝试打印常量，添加括号`()`使其成为函数调用。

你的`function_exists`支票应该告诉你的！

[http://www.php.net/_](http://www.php.net/_)

# svn - 颠覆：禁止访问：当我没有对 root 的读取权限时，无法在 tortoise svn 客户端窗口内提交

> ID：15692520
> 
> 赞同：1
> 
> 时间：2013-03-28T21:28:58.563
> 
> 标签：svn, tortoisesvn

我知道 subversion 这种类型的问题已经被问过很多次了，但是各种解决方案都没有奏效，具体的设置也不一样。

我们使用 Tortoise SVN 作为客户端。当用户对 subversion 中的子文件夹具有读/写访问权限时，例如 /project1 和对 root (/) 的读访问权限，在工作副本和 tortoise svn 客户端窗口中一切正常。

但是，如果我从根 (/) 中删除读取访问权限，只保留对 /project1 的读/写访问权限，则用户无法在 Tortoise 客户端窗口中提交到 project1。我们可以在使用工作副本时提交，但不能在客户端窗口中提交。

这里发生了什么？

Windows 7 64bit，tortise svn 64bit 1.7.10 Subversion 服务器在 apache 上运行：“Powered by Subversion version 1.6.11 (r934486)。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:02:07.577

Wrikken 摇晃着我的大脑，我发现这是我们 svnauthorization.conf 的错误配置。

我应该提到我们正在使用 CollabNet subversion，这个链接也有帮助：[http ://www.rahulsingla.com/blog/2012/01/collabnet-subversion-restricting-user-access-to-repositories](http://www.rahulsingla.com/blog/2012/01/collabnet-subversion-restricting-user-access-to-repositories)

我们基本上有这样的设置：

```
[groups]
admins= me, domain\me
users= you, domain\you

[/]
@admins = rw
@users = r

[repo:/project1]
@users = rw

[repo:/project2]
@users = r 
```

你看到问题了吗？我没有，但是在这里，当我们应该授予对 repo 根目录的读取权限时，我们授予了对顶级根目录的读取权限：

```
[/]
@admins = rw

[repo:/]
@users = r

[repo:/project1]
@users = rw

[repo:/project2]
@users = r 
```

# wireshark - Wireshark 如何影响网络流量？

> ID：15692527
> 
> 赞同：3
> 
> 时间：2013-03-28T21:29:23.017
> 
> 标签：wireshark, hyper-v, packet-sniffers, winpcap

在我们的团队中，我们有一个标准化的开发设置，我们有一个 Win8 工作站，其中包含在 Hyper-V 上运行的各种 VM。所有开发都在虚拟机上进行。

我遇到了一个问题，我无法使用 VS2012 从 Team Foundation Server 签出项目，它会开始签出，但随后连接断开。我启动了 Wireshark 来检查发生了什么，但它运行良好。我仔细检查了：

*   当在工作站上运行的 Wireshark（或者更确切地说是进行实际捕获的 WinPcap）从 VM 的虚拟 NIC 捕获数据包时，一切正常。
*   一旦我停止捕获，TFS 就无法签出。

所以我什至无法正确检查网络流量来诊断问题，因为检查流量的行为会改变它。海森堡会感到自豪！

我认为这可能是 Wireshark 覆盖某些校验和卸载设置的问题，但似乎并非如此。

那么运行 Wireshark 还会影响什么？我宁愿认为数据包嗅探器的重点是它们在捕获数据包**时不会**更改数据包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T18:37:59.420

这意味着您正在选择通常不会被 vmnic 选择的流量。尝试检查 mac 地址级别发生了什么。也许虚拟机之间的mac地址冲突？

附言。您可以在没有混杂模式的情况下进行 whireshark。海森堡规则不应该适用:)

# android - Android Chrome：HTML不检查

> ID：15692528
> 
> 赞同：3
> 
> 时间：2013-03-28T21:29:24.827
> 
> 标签：android, html, webkit, label, radio

我有一个带有 CSS 样式的表单和模拟选项卡式结构的单选按钮。只有 s 是可见的并且应该是可点击的。

它看起来像：[经济|商业|第一]

HTML：

```
<span id="containerEconomy" class="radio-wrap three"><input name="fltCabin" type="radio" id="rdoEconomy" class="custom-radio" checked=""><label for="rdoEconomy" onclick="">economy</label></span>
<span id="containerBusiness" class="radio-wrap three"><input name="fltCabin" type="radio" id="rdoBusiness" class="custom-radio"><label for="rdoBusiness" onclick="">business</label></span>
<span id="containerFirst" class="radio-wrap three"><input name="fltCabin" type="radio" id="rdoFirst" class="custom-radio"><label for="rdoFirst" onclick="">first</label></span> 
```

CSS：

```
形式 .radio-wrap { 位置：相对；向左飘浮; 显示：块；高度：4rem；框尺寸：边框框；}
形成 .radio-wrap.three { 宽度：33.3% }
表单输入[type="radio"].custom-radio { position:absolute; 剪辑：矩形（0,0,0,0）；}
表单 input.custom-radio ~ label { position:absolute; 顶部：0；对：0；底部：0；左：0；显示：内联块；背景图像：-webkit-渐变（线性，左上，左下，从（#ededed），到（#fff））；边框：.1rem 实心#ccc；右边框：无；行高：3.4rem；颜色：#7f7f7f; 文本对齐：居中；光标：指针；}
form .radio-wrap:last-child input.custom-radio ~ label {border-right:.1rem solid #ccc; }
表单 input.custom-radio:checked ~ label { background-image:none; 背景颜色：#fff; 颜色：#000; }
form.cball fieldset.tab input.custom-radio:checked ~ label {border-top:none; }

```

因此，用户基本上可以看到标签并点击以检查“不可见”单选按钮。由于 each 有一个 for=，因此应选中单选按钮。

这适用于桌面 Chrome 浏览器，以及 iPhone 和 iPad 上的桌面 Safari 和移动 Safari。

但是，它不适用于我正在测试的任何 Android 设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T11:33:26.550

尝试从标签中删除边框。它帮助了我。

# plone - 将 Archetype 新闻项目迁移到 Dexterity 内容类型

> ID：15692531
> 
> 赞同：6
> 
> 时间：2013-03-28T21:29:49.030
> 
> 标签：plone, dexterity, archetypes

我正在尝试将新闻项目中的内容复制到我编写的其他内容类型。在我的脚本中，我有`news`项目和`project`项目。第二个，`project`是使用 Dexterity 定义的内容类型。如果我能以下一种方式将图像和正文从`news`to复制出来，那就太好`project`了。

```
project.text = news.text
project.image = news.image 
```

其中文本和图像在`project`架构中定义为 RichText 和 NamedBlobImage。我不知道新闻项目中的属性如何。我只知道我可以使用该方法获取新闻项中的图像，`getImage()`但是将其分配给项目会在渲染项目时产生错误。

所以我需要一些指针来解决我的基本问题：

1.  我如何知道 Archetype 内容类型的属性名称。例如，在这种情况下，我需要知道新闻项目正文的属性名称。

2.  如何将附加到新闻项目的图像转换为附加到灵巧内容类型的图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T21:42:40.957

1.  您使用 Archetypes 模式中的字段来检索值，在这种情况下最好是原始值。您传入对象，然后调用`.get()`or `.getRaw()`：

    ```
    schema = news.Schema()
    news = schema.getField('text').getRaw(news)
    imageField = schema.getField('image')
    image = imageField.getRaw(news)
    content_type = imageField.getContentType(news)
    filename = imageField.getFilename(news) 
    ```

2.  调用返回的对象`ImageField.getRaw()`基本上是一个`OFS.Image`实例。您可以调用`str()`它来获取原始图像数据。

    要*设置*图像对象，您真的想从模式中获取图像字段并将其`._type`属性用作工厂：

    ```
    project.image = IProjectInterface.image._type(str(image),
        contentType=content_type, filename=filename) 
    ```

    这里的内容类型是可选的；和类型`NamedImage`也会`NamedBlobImage`自动嗅出内容类型。

# c++ - 比较两个字符串数组c ++

> ID：15692534
> 
> 赞同：1
> 
> 时间：2013-03-28T21:30:06.417
> 
> 标签：c++

我正在为一个更大的程序验证一个数据文件。我在代码的最后一部分，并试图通过字符串本身确保两个单独的数组彼此“相等”。我已经包含了我最近尝试的代码。请原谅我，因为我已经发布了整个功能。

这里是：

```
//
//  validateDataFile.cpp
//  P1
//
//  Created by xxxxxxx on 3/26/13.
//  Copyright (c) 2013 xxxxxxx. All rights reserved.
//

#include "p1.h"

void validateDataFile (string fileName) {
fstream file;
file.open (fileName.c_str());

if (file.is_open()) {
    unsigned int i, j, x = 0, y = 0, a;
    int flag = 0, check = 0;
    string fileData, word, strg[200];

    getline (file, fileData);

    for (i = 0; i < fileData.length(); i++) {
        if ((fileData[i] == ' ') || (fileData[i] < 48) || (fileData[i] > 57)) {
            cout << "fileData[i]: " << fileData[i] << endl;
            cout << "Incorrect DataFile!\nFirst line should contain a positive"
            " integer and no white space" << endl;
            return;
        }
    }

    int numberOfNodes = convertToInt(fileData);

    string list[numberOfNodes];

    if (numberOfNodes < 0) {
        cout << "Number of Nodes: " << numberOfNodes << endl;
        cout << "Incorrect DataFile!\nFirst character should be a positive"
        "integer" << endl;
        return;
    }

    getline (file, fileData);
    stringstream stream (fileData);

    while (getline (stream, word, ' ')) {
        list[x++] = word;

            for (a = 0; a < numberOfNodes; a++) {
                    cout << "list of nodes: " << list[a] << endl;   //testing only
            }
    }

    if (x != numberOfNodes) {
        cout << "Incorrect DataFile!\nList of strings has more strings than"
        " the number of nodes specified in the first line." << endl;
        return;
    }

    while (!file.eof()){
        getline (file, fileData);
        stringstream ss (fileData);

        while (getline (ss, word, ' ')) {

            if (convertToInt(word) < 0) {
                flag = 0;
                for (i = 0; i < y; i++) {
                    if (strg[i] == word) flag = 1;
                }

                if (flag == 0) strg[y++] = word;
            }
        }
    }

    for (i = 0; i < y; i++) {               //<- my problem starts here
        check = 0;
        for (j = 0; j < x; j++) {
            if (strg[i].compare (list[j]) == 0) {
                check = 1;                  //<- my problem ends here
                break;
            }
        }
    }
    if (check == 0) {
        cout << "Incorrect DataFile!\nStrings listed should match Node Strings" << endl;
        return;
    }
}
else {
    cout << "ERROR!\n DataFile not present." << endl;
    return;
}

file.close();

} 
```

它编译没有错误，但没有做我想要的。

我故意更改了我的数据文件以创建错误，但由于某种原因它没有告诉我我的比较不正确。

这是我的数据文件的一小部分：

```
16
Cape Birmingham Boston Chicago Dallas Detroit KansasCity LosAngeles Memphis Minneapolis Omaha Orlando Richmond SanFrancisco Seattle StLouis 
Atlanta Chicago 718
Atlanta Dallas 781
Atlanta Orlando 439
Birmingham Atlanta 146
Birmingham Detroit 723
Birmingham Richmond 678
Boston Atlanta 1099
Boston Detroit 716
Boston Memphis 1311
Chicago Atlanta 718
Chicago Boston 983
Chicago KansasCity 526 
```

我故意将第一个城市从“亚特兰大”改为“开普”。有人可以告诉我我的错误并告诉我需要做些什么来纠正它吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:50:30.317

只有当它是您检查列表的最后一个节点时，您才会发现错误值。您需要将检查循环更改为如下所示：

```
for (i = 0; i < y; i++) {               //<- my problem starts here
    check = 0;
    for (j = 0; j < x; j++) {
        if (strg[i].compare (list[j]) == 0) {
            check = 1;                  //<- my problem ends here
            break;
        }
    if( check == 0 ) // value not found, break out of verification loop to report this.
        break;
    } 
```

一旦被检查的项目不在列表中，这将停止验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:42:42.413

代码太多了，很多人（比如我）甚至都不会开始阅读它。尝试编写一个更短的程序来重现该问题。

另外我建议您 仔细阅读[http://www.cplusplus.com/reference/string/string/compare 。](http://www.cplusplus.com/reference/string/string/compare)

# c++ - 使用向量 push_back 分配内存

> ID：15692541
> 
> 赞同：0
> 
> 时间：2013-03-28T21:30:27.957
> 
> 标签：c++, memory, vector, push-back

我今天学到了一些有趣的东西：如果我有一个标准向量 v 并且我运行如下代码：

```
std::vector<float> v;
for (int i = 0; i < 2; i++) v.push_back(2.); 
```

如果我打电话`v[2]`，我不会得到分段错误，因为`operator[]`不做边界检查。我得到了一些荒谬的小数字，但我很好奇 push_back 的默认行为是什么，以及溢出向量边界我应该期待什么。我认为它必须分配比下一个浮点数更多的空间。多少？这是标准中的，还是特定于编译器的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:31:50.593

> 我今天学到了一些有趣的东西

所以是时候学习一些*更*有趣的东西了：你的代码有**Undefined Behavior**，因为使用下标运算符的前提条件是索引小于向量的大小。

根据 C++11 标准的表 101，表达式`a[n]`等价于`*(a.begin() + n)`. 由于`v.begin() + 2`是指向容器末尾以外位置的迭代器`v`，因此取消引用它会导致未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:31:42.333

> 如果我打电话`v[2]`，我不会得到分段错误，因为`operator[]`不做边界检查

两人没有这种关系...

您的代码调用**未定义的行为，**因此它可以做*任何事情。*

# python - uWSGI 重复执行长时间运行的 Flask app.route() 函数

> ID：15692543
> 
> 赞同：2
> 
> 时间：2013-03-28T21:30:35.480
> 
> 标签：python, flask, uwsgi

我目前正在通过命令行使用 Flask Web 应用程序运行 uWSGI。使用的命令是：

```
uwsgi --http :80 --file /scripts/flaskWebApp/app.py --callable app --processes 4 --threads 2 -b 25000 -M 
```

绑定到 Flask 的函数`@app.route()`似乎执行了两次。请记住，这是一个运行时间较长的任务 > 60 秒。我已经通过向函数添加打印语句验证了这一点。uWSGI 会将其记录为以下内容：

```
10.10.10.36 [pid: 6490|app: 0|req: 3/9] 10.10.10.77 () {38 vars in 659 bytes} [Thu Mar 28 17:20:42 2013] GET /versions/1.3.0/availableQualifiers/a/incrementals/ => generated 15 bytes in 1161 msecs (HTTP/1.1 200) 2 headers in 79 bytes (1 switches on core 0)
Deploying system
17:20:46      03-28-2013
Deploying system
17:21:46      03-28-2013 
```

我假设这是由某种请求超时引起的。我一直在尝试为工人和 harakiri 设置超时（这些都没有帮助）。有没有我错过的超时？

我正在使用 jQuery 的 ajax 调用`$.post()`（同步）来触发 REST 调用。不过，我怀疑这是问题所在，因为 Flask 内置的简单 Web 服务器并没有发生这种情况。

# asp.net-mvc - DNN 6.2 服务框架中的路由

> ID：15692545
> 
> 赞同：1
> 
> 时间：2013-03-28T21:30:52.570
> 
> 标签：asp.net-mvc, dotnetnuke

所以我在基于 MVC 的 DNN 6.2 服务框架中运行了基本的 Hello World 服务。路线，取自示例，是：

```
routeManager.MapRoute("MyServices", "{controller}/{action}", new[] { "HelloWorldServices" }); 
```

当我的操作转到 ~/DesktopModules/MyServices/API/Welcome/HelloWorld 时，它会调用 HelloWorld 函数并运行。到目前为止，我已经设法弄清楚我可以做到这一点：

```
routeManager.MapRoute("MyServices", "{controller}/{action}/{userID}", new[] { "HelloWorldServices" }); 
```

当我转到 ~/DesktopModules/MyServices/API/Welcome/users 时，它会调用 users 函数，该函数具有 ID 的可选参数，并且可以正常工作。但现在我想创建一个端点 ~/DesktopModules/MyServices/API/Welcome/locations，它可以采用位置 ID。我不能只写这个：

```
routeManager.MapRoute("MyServices", "{controller}/{action}/{locationID}", new[] { "HelloWorldServices" }); 
```

甚至

```
routeManager.MapRoute("MyServices", "{controller}/locations/{locationID}", new[] { "HelloWorldServices" }); 
```

它不是那样工作的。哪个是第一个（用户或位置）识别 ID，哪个第二个不识别。虽然我可以弄清楚什么不起作用，但我不知道什么会起作用，并且尽管进行了大量搜索，但仍然无法找到。我还发现了一些看起来像这样的例子：

```
routeManager.MapRoute("Html", "default", "", new { controller = "Service", action = "GetTabs" }, new[] { "DotNetNuke.Modules.Html" }); 
```

但我也无法弄清楚它是如何工作的。最终我也想做“~/DesktopModules/MyServices/API/Welcome/users/userid/locations/”。如果有人能给我一些例子，那将不胜感激！

**更新**：根据我查找 MVC 路由的答案。我意识到我必须通用地编写它，现在让这些工作：

```
{controller}/{action}
{controller}/{action}/{id}
{controller}/{action}/{id}/{secondaction}
{controller}/{action}/{id}/{secondaction}/{secondid} 
```

“id”、“secondaction”和“secondid”都是可选的字符串参数。所以我可以有“users/userid/locations/locationid”......“locations/locationid”部分在“users”函数中处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:38:13.097

我在这里的一般建议是使用类似的路线图

```
{controller}/{action}/{id} 
```

这是典型的默认 ASP.NET MVC 路由样式。然后你可以有一个作为可选 id 参数的用户方法，以及一个带有可选 id 参数的位置方法等。

这将为您提供真正动态的路线，并且更易于管理

# c# - UploadProgressChanged 与 Foreach

> ID：15692549
> 
> 赞同：0
> 
> 时间：2013-03-28T21:31:08.007
> 
> 标签：c#, foreach, webclient

好的，我有这个：

```
foreach (FileInfo fileinfo2 in Arquivos2)
{
    label8.Text = "Enviando(NFe): " + fileinfo2.Name + "...";
    label8.Update();
    WebClient client = new WebClient();
    client.Credentials = new System.Net.NetworkCredential(usuario, senha);
    client.UploadProgressChanged += new UploadProgressChangedEventHandler(UploadProgressCallback);
    client.UploadFile(new Uri("ftp://" + ftp + "/" + caminho + "//nf//" + fileinfo2.Name), "STOR", @"C:\\NFe\" + fileinfo2.Name);
    bar++;
    backgroundWorker1.ReportProgress(bar);
} 
```

它工作正常，但我有：

```
private void UploadProgressCallback(object sender, UploadProgressChangedEventArgs e)
{
    progressBar2.Value = e.ProgressPercentage;
    progressBar2.Update();
} 
```

并且progressBar2没有任何反应......

如何使用上传进度更新我的 progressBar2？我不能将 UploadFile 与 UploadProgressChanged 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:45:19.417

根据[http://msdn.microsoft.com/en-us/library/system.net.webclient.uploadprogresschanged.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.uploadprogresschanged.aspx)

> 每次异步上传进行时都会引发此事件。

它仅由 3 个异步事件引发。您正在调用的版本是一个阻塞方法，在它完成之前不会返回并且不会引发进度事件。

# c# - 使用 Aforge.net 或 c# 执行类似于 Photoshop 的 Auto Tone 的操作

> ID：15692554
> 
> 赞同：5
> 
> 时间：2013-03-28T21:31:24.943
> 
> 标签：c#, image, aforge, adjustment, accord.net

我正在开发一个图像皮肤检测应用程序。

但是我的相机有一个问题，试图补偿光线，结果图像很差，在大多数情况下，我对图像有冷或暖效果。当我使用 Photoshop 时，有 AutoTone 功能可以标准化图像并减少此问题。

![图片](../Images/2d8af5c619df4d16623a2843a051639a.png)

![Photoshop AutoTone 后的图像](../Images/b706798c1be83601b23e26d6ac4ea71f.png)

使用 aforge 我想使用 HistogramEqualization() 过滤器，但结果非常糟糕：

![直方图均衡后的图像](../Images/1c662571fee40a1b6f49d8e977b52d2c.png)

```
// create filter
HistogramEqualization filter = new HistogramEqualization( );
// process image
filter.ApplyInPlace( sourceImage ); 
```

所以我的问题是：Accord 或 Aforge 中是否有一个功能可以与 Photoshop 的自动色调效果相同？如果没有，是否有一些库或脚本可以做到这一点？

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:17:51.510

我使用 LevelsLinear 过滤器并将其基于图像统计信息：

```
ImageStatistics stats = new ImageStatistics(sourceImage);
LevelsLinear levelsLinear = new LevelsLinear {
    InRed = stats.Red.GetRange( 0.90 ),
    InGreen = stats.Green.GetRange( 0.90 ),
    InBlue  = stats.Blue.GetRange( 0.90 )
};

levelsLinear.ApplyInPlace(sourceImage); 
```

您可以使用范围来调整结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:39:32.023

您可能不想均衡直方图，因为如您所见，通常不会有太多红色的照片会产生大量红色并使其看起来很讨厌。相反，您可能想要检查几乎无处不在的色调的偏差。例如，您的原始照片可能几乎每个像素都偏向蓝色，因此可能不应该存在。寻找最小偏差并在任何地方删除该数量。

更实用的解决方案是尝试相机上的白平衡设置，看看什么能给你最好的结果。选择正确的预设，将利用可能与您手动编写的算法一样好的算法。但也许你这样做是为了学习。

# ruby-on-rails - 如何安装和使用将在 rails 视图中使用的新字体？

> ID：15692563
> 
> 赞同：2
> 
> 时间：2013-03-28T21:31:48.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有谁知道如何将我的一些自定义字体安装到 rails 并在我的应用程序中使用它来显示在 view.html.erb 中（例如），以便每个人都可以看到用新字体编写的文本？

我正在使用导轨 3

**编辑：**

我看到我必须纠正自己。我使用字体`.ttf`，因为这是我找到的唯一一种。如果这有什么不同的话。

我想使用经典`CSS`或使用`HAML`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:57:34.663

创建一个名为`fonts`in的文件夹，`app/assets/`然后将所有自定义字体移到那里（[示例](https://github.com/meurio/panela-de-pressao/tree/master/app/assets/fonts)）。

重新启动服务器以使新资产可用并创建一个样式表来声明您的字体，例如`app/assets/stylesheets/fonts.css`，然后编写：

```
@font-face {
  font-family: 'My Custom Font';
  src: font-url('mycustomfont-regular.eot');
  font-weight: normal;
  font-style: normal;
}

// bold
@font-face {
  font-family: 'My Custom Font';
  src: font-url('mycustomfont-bold.eot');
  font-weight: bold;
  font-style: normal;
}

// italic
@font-face {
  font-family: 'My Custom Font';
  src: font-url('mycustomfont-italic.eot');
  font-weight: normal;
  font-style: italic;
} 
```

（[示例](https://github.com/meurio/panela-de-pressao/blob/master/app/assets/stylesheets/font.sass)）。现在您可以使用设置自定义字体`font-family: "My Custom Font"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:37:13.963

除非您希望 Rails 以特定字体呈现图像，然后将其发送到客户端，否则您正在寻找的是[Web 字体](http://en.wikipedia.org/wiki/Web_typography#Web_fonts)，您可以在 CSS 中指定如何呈现文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:51:17.287

用这个创建一个 CSS：

```
@font-face{
  font-family: Sabon;
  src: asset-url('Sabon-Roman.otf', font);
} 
```

并将您的字体放在 app/assets/fonts 中。

它适用于 OTF 字体。

# avr - 构建失败...未定义构建工具。AVR 工作室 4.19

> ID：15692568
> 
> 赞同：3
> 
> 时间：2013-03-28T21:32:05.453
> 
> 标签：avr

当我尝试使用 AVR studio 4 调试一小段代码时，我收到了这个错误：

```
Build failed... No build tools defined. 
```

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-12T17:22:55.237

在 AVRStudio 4.19 中，Atmel 对以前的版本进行了一些重大更改。特别是在使用工具链时。安装[WinAVR](http://winavr.sourceforge.net/download.html)（最新版本，2010...）后，在 Avrstudio 中打开一个新项目，从现在开始，每次创建新项目时都必须执行以下步骤：

1.  转到“项目”选项卡
2.  转到“配置选项”
3.  然后一直到“自定义选项”。
4.  到达那里后，您会看到一个名为“使用 AVR 工具链”的复选框，取消选中该选项。（出于某种原因，AVRStudio 4.19 不会自动链接来自 WINAVR 的工具链，因此您必须手动进行）。
5.  在此之后，它启用以下两个选项。
6.  对于`avr-gcc`，您浏览到下一个方向：`C:\ProgramFiles\WINAVR20100110\bin\avr-gcc.exe`
7.  对于`make`，您浏览到下一个方向：`C:\ProgramFiles\WINAVR20100110\utils\bin\make.exe`

**这个方向取决于你在哪里安装了 WINAVR。我记得默认位置是“C:\”，但是当我安装 WINAVR 时，我将其更改为“ProgramFiles”**

8.  单击“确定”。

完成这些步骤后，您应该能够编译和运行您的代码。干杯，希望它有所帮助！

PD：几个月前我也遇到了同样的问题。看看 www.avrfreaks.net，对于 AVR 编程的新手和专业人士来说，这是一个非常好的网页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:21:30.603

You need to install WinAVR or Atmel's "AVR Toolchain." If you already have one of these and still get this message, you may need to tweak the System Variables.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T21:07:25.160

先连接编程器，然后运行avr studio。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T23:57:04.837

当我尝试打开在另一个版本的 AVR Studio 中制作的项目（或由其他人升级到另一个版本）时，我遇到了这个错误。

# c++ - 在二进制文件中查找特定原语

> ID：15692570
> 
> 赞同：0
> 
> 时间：2013-03-28T21:32:12.433
> 
> 标签：c++, file, binary, primitive-types

有什么方法可以在二进制文件中找到特定的原语（例如 MATLAB 中的 fread 或 Mathematica 中的 BinaryReadLists）？具体来说，我想扫描我的文件，直到它达到，比如一个 int8_t 精度数，然后将它存储在一个变量中，然后扫描另一个原语（无符号字符、双精度等）？

我正在从 MATLAB 重写执行此操作的代码，因此文件的格式是已知的。

我想读取文件中仅指定类型（32 位 int、char、..）的 n 个字节。例如：如果它们返回为 8 位整数，则仅读取我文件的前 12 个字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:10:45.337

你的问题对我来说毫无意义，但这里有一堆关于如何读取二进制文件的随机信息：

```
struct myobject { //so you have your data
    char weight;
    double value;
};
//for primitives in a binary format you simply read it in
std::istream& operator>>(std::istream& in, myobject& data) {
    return in >> data.weight >> data.value; 
    //we don't really care about failures here
}
//if you don't know the length, that's harder
std::istream& operator>>(std::istream& in, std::vector<myobject>& data) {
    int size;
    in >> size; //read the length
    data.clear();
    for(int i=0; i<size; ++i) { //then read that many myobject instances
        myobject obj;
        if (in >> obj)
            data.push_back(obj);
        else //if the stream fails, stop
            break;            
    }
    return in;
}
int main() {
    std::ifstream myfile("input.txt", std::ios_base::binary); //open a file
    std::vector<myobject> array;
    if (myfile >> array) //read the data!
        //well that was easy
    else
        std::cerr << "error reading from file";
    return 0;
}; 
```

此外，如果您碰巧知道在哪里可以找到您要查找的数据，您可以使用 的`.seek(position)`成员`ifstream`直接跳到文件中的特定点。

哦，您只想将文件的前 12 个字节读取为 8 位整数，然后将接下来的 12 个字节读取为 int32_t？

```
int main() {
    std::ifstream myfile("input.txt", std::ios_base::binary); //open a file

    std::vector<int8_t> data1(12); //array of 12 int8_t
    for(int i=0; i<12; ++i) //for each int
        myfile >> data1[i]; //read it in
    if (!myfile) return 1; //make sure the read succeeded

    std::vector<int32_t> data2(3); //array of 3 int32_t
    for(int i=0; i<3; ++i) //for each int
        myfile >> data2[i]; //read it in
    if (!myfile) return 1; //make sure the read succeeded

    //processing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:12:31.673

也许您的问题的解决方案是了解这两个文档页面之间的区别：

[http://www.mathworks.com/help/matlab/ref/fread.html](http://www.mathworks.com/help/matlab/ref/fread.html) [http://www.cplusplus.com/reference/cstdio/fread/](http://www.cplusplus.com/reference/cstdio/fread/)

两个版本的 fread 都允许您从二进制文件中拉入一组项目。我从你的问题中假设你知道你需要的数组的大小和形状。

```
#include <stdio.h>

int main() {
  const size_t NumElements = 128; // hopefully you know
  int8_t myElements[NumElements];
  FILE *fp = fopen("mydata.bin", "rb");
  assert(fp != NULL);
  size_t countRead = fread(myElements, sizeof(int8_t), NumElements, fp);
  assert(countRead = NumElements);

  // do something with myElements
} 
```

# android - 地理编码器无法使用 ICS，但可以在 Gingerbeard 中使用

> ID：15692574
> 
> 赞同：2
> 
> 时间：2013-03-28T21:32:36.940
> 
> 标签：android, google-maps, android-4.0-ice-cream-sandwich

好吧，我制作了一个使用谷歌地图的应用程序。

我目前正在使用 Tap on Map 通过地理编码器获取地址，但它不起作用。

我已经尝试过 Gingerbeard 中的代码，例如 HTC chacha、Samsung Galaxy S2(Gingerbeard) 它运行良好并获取地址但无法在 ICS 中获取地址

是的，我使用了 Google API 14，使用了所有权限，还使用了在 Manifest 中声明 google 地图库。并且还拥有正确的密钥库密钥

我尝试了 Google 示例代码示例，例如：http: [//developer.android.com/training/basics/location/currentlocation.html](http://developer.android.com/training/basics/location/currentlocation.html)

HTC 欲望 X，ICS：

![HTC DESIRE X, ICS](../Images/2b082519d95c44373e853686cc88d2cd.png)

HTC 查查截图：

![HTC 查查截图](../Images/5fa4067c729c938a9219261f52535eca.png)

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:30:40.957

```
GeoPoint point = new GeoPoint(
                        (int) (LATITUDE * 1E6),
                        (int) (LONGITUDE * 1E6));

String n;

public void someRandomMethod() {
        n = convertPointToLocation(point);
}

public String convertPointToLocation(GeoPoint point) {
        String address = "";
        Geocoder geoCoder = new Geocoder(
                getBaseContext(), Locale.getDefault());
        try {
            List<Address> addresses = geoCoder.getFromLocation(
                    point.getLatitudeE6()  / 1E6,
                    point.getLongitudeE6() / 1E6, 1);

            if (addresses.size() > 0) {
                for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                    address += addresses.get(0).getAddressLine(index) + " ";
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        }

        return address;
    } 
```

# html - 使网站适应所有显示尺寸 - HTML

> ID：15692575
> 
> 赞同：1
> 
> 时间：2013-03-28T21:32:48.410
> 
> 标签：html, css, web

我正在用 HTML 和 CSS 编写一个网站。我的问题是，例如，当我在浏览器中运行我的网站时，我会用百分比调整所有边距。但是，当我全屏运行浏览器或调整窗口大小时，网站的不同部分会分崩离析，无法按应有的方式组合在一起。为什么百分比单位不能解决这个问题，因为它与窗口的大小有关？

CSS：

```
#aboutMeDiv
{
    background-image: url('noisyBlue.png');
    position: absolute;
    width: 100%;
    height: 118px;
    margin-top: 13.6em;
    margin-left: -0.7%;
    opacity: 0.5;
    transition: opacity 0.3s;
} 
```

即使窗口发生变化，我怎样才能使其“以相同的方式”？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:42:25.000

如果没有看到您的代码，就无法给出更准确的答案，但这个问题可能可以通过在容器元素中添加`min-width`and来解决。`max-width`

例如，如果结构在宽度小于 700 像素和大于 1500 像素时似乎分崩离析，您可以使用以下命令：

```
.container {
    max-width: 1500px;
    min-width: 700px;
} 
```

当然，这可能会抑制响应式设计——尤其是对于移动浏览器。看看一些已经制作好的 CSS 框架，比如[Twitter Bootstrap](http://twitter.github.com/bootstrap/)和[Gumby 框架](http://gumbyframework.com/)，可能是个好主意。

* * *

**编辑以下代码添加到问题：**

> 即使窗口发生变化，我怎样才能使其“以相同的方式”？谢谢！

如果`#aboutMeDiv`即使窗口大小发生变化，您也想“以同样的方式”，您应该使用具体数字而不是 div 大小的百分比；即更改`width: 100%;`为类似的东西`width: 700px;`。然后，如上所述，您可以使用 a`min-width`确保屏幕显示 div 中的所有内容。

# f# - 如何在 F# 3.0 中使用不同类型两次继承相同的泛型接口

> ID：15692576
> 
> 赞同：2
> 
> 时间：2013-03-28T21:32:59.093
> 
> 标签：f#, f#-3.0

我正在尝试使用 .Net 驱动程序[Neo4jClient为](http://hg.readify.net/neo4jclient/wiki/Home)[Neo4j](http://www.neo4j.org/)实现对象模型。我收到编译错误

> 这种类型在不同的泛型实例化`'IRelationshipAllowingParticipantNode<Person>'`和`'IRelationshipAllowingParticipantNode<Company>'`. 在此版本的 F# 中不允许这样做。

这是这些接口的实现（来自 Neo4jClient 源代码）

```
public interface IRelationshipAllowingParticipantNode<out TNode>
{
}
public interface IRelationshipAllowingSourceNode<out TNode>
    : IRelationshipAllowingParticipantNode<TNode>
{
}
public interface IRelationshipAllowingTargetNode<out TNode>
    : IRelationshipAllowingParticipantNode<TNode>
{
} 
```

这是我没有编译的类

```
type FollowRelationship(target) =
    inherit Relationship(target)
    interface IRelationshipAllowingSourceNode<Person>
    interface IRelationshipAllowingTargetNode<Company>

    override this.RelationshipTypeKey
        with get() = "follow" 
```

怎么会在这里？我怎样才能避免这个错误？我可以使用 F# 中的 Neo4jClient 库吗？

# android - 如何更改从代码完全创建的片段视图的主题

> ID：15692582
> 
> 赞同：0
> 
> 时间：2013-03-28T21:33:14.193
> 
> 标签：android, android-fragments, theming

我正在寻找一种方法来设置由我的数据库在代码中动态创建的视图主题。我找到了从 xml 扩展视图的方法，但不幸的是我的视图已经创建，所以我不明白为什么它没有在我的清单中使用我的预定义主题。

我的应用程序的主题是 android:Theme.Light.NoTitleBar

因此，我的应用程序中的所有内容看起来都像 2.3 应用程序，但突然间，当我通过特定片段而不是 xml 中的代码添加这些文本框和微调器时，它会将它们添加为全息主题项目，即使我没有定义任何全息我代码中任何地方的主题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:30:39.107

所以事实证明，我必须对我在 xml 布局的代码中创建的每个视图进行膨胀。因此，例如，我必须在只有 id、宽度和高度的 xml 布局中创建一个 BASIC textview，然后当我动态创建视图时，我使用了..

正确的

Textview tv = (TextView) inflater.inflate(R.layout.textview, null);

这允许我动态创建的视图采用 xml 的主题，它显然使用 AppTheme，而不是调用时使用的任何基本主题。

不正确

TextView tv = new TextView();

# c# - EF 5，代码优先 - 创建一个新数据库并以编程方式运行所有迁移

> ID：15692584
> 
> 赞同：10
> 
> 时间：2013-03-28T21:33:17.597
> 
> 标签：c#, entity-framework, entity-framework-migrations

我正在使用 Entity Framework Code First 迁移，并且我有一个场景，我想运行一套集成测试。每次测试运行时，我都想重新创建数据库，并应用所有迁移

步骤应该是：

1.  删除现有的测试数据库（如果有）
2.  创建一个新的测试数据库，并应用所有迁移
3.  种子数据

这是我添加了迁移的现有项目，我使用 Enable-Migrations 命令创建了一个“InitialCreate”迁移，其中包含将所有表添加到我的数据库的代码。

我自定义的代码`IDatabaseInitializer`如下：

```
public void InitializeDatabase(MyContext context)
{
    //delete any existing database, and re-create
    context.Database.Delete();
    context.Database.Create();            

    //apply all migrations
    var dbMigrator = new DbMigrator(new Configuration());
    dbMigrator.Update();

    //seed with data
    this.Seed(context);

    context.SaveChanges();
} 
```

此代码未调用我的`Up`InitialCreate 迁移方法，这不是我所期望的。相反，所有表都是在`Database.Create()`调用该方法时创建的。我需要运行 InitialCreate 迁移，因为我有额外的代码来创建存储过程。

所以我的问题是，如何以编程方式创建新数据库并运行所有迁移（包括 InitialCreate 迁移）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T00:01:25.473

以下代码使我能够满足问题中概述的集成测试场景的需求，但肯定有更好的方法吗？

```
public void InitializeDatabase(MyContext context)
{
    //delete any existing database, and re-create
    context.Database.Delete();

    var newDbConnString = context.Database.Connection.ConnectionString;
    var connStringBuilder = new SqlConnectionStringBuilder(newDbConnString);
    var newDbName = connStringBuilder.InitialCatalog;

    connStringBuilder.InitialCatalog = "master";

    //create the new DB
    using(var sqlConn = new SqlConnection(connStringBuilder.ToString()))
    {
        using (var createDbCmd = sqlConn.CreateCommand())
        {
            createDbCmd.CommandText = "CREATE DATABASE " + newDbName;
            sqlConn.Open();
            createDbCmd.ExecuteNonQuery();
        }
    }

    //wait up to 30s for the new DB to be fully created
    //this takes about 4s on my desktop
    var attempts = 0;
    var dbOnline = false;
    while (attempts < 30 && !dbOnline)
    {
        if (IsDatabaseOnline(newDbConnString))
        {
            dbOnline = true;
        }
        else
        {
            attempts++;
            Thread.Sleep(1000);
        }
    }

    if (!dbOnline)
        throw new ApplicationException(string.Format("Waited too long for the newly created database \"{0}\" to come online", newDbName));

    //apply all migrations
    var dbMigrator = new DbMigrator(new Configuration());
    dbMigrator.Update();

    //seed with data
    this.Seed(context);

    context.SaveChanges();
}

private bool IsDatabaseOnline(string connString)
{
    try
    {
        using (var sqlConn = new SqlConnection(connString))
        {
            sqlConn.Open();
            return sqlConn.State == ConnectionState.Open;
        }
    }
    catch (SqlException)
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-19T18:10:18.647

只需删除“创建数据库”步骤并自行使用迁移。[我在GitHub 上](https://github.com/mmckech/EntityExamples/blob/master/AnimalsTests/DatabaseTests.cs)放了一个示例项目，但重要的是

```
Configuration config = new Configuration();
DbMigrator migrator = new DbMigrator(config);

foreach (string s in migrator.GetPendingMigrations())
{
    migrator.Update(s);
} 
```

# c# - 获取文本框中所选文本在字符串中的位置

> ID：15692586
> 
> 赞同：2
> 
> 时间：2013-03-28T21:33:21.947
> 
> 标签：c#, textbox, selectedtext

好的，我正在尝试在这里做一些具体的事情。我想在文本框中获取所选文本的位置。

详细说明-我可以使用位置来选择文本。如果我有一个 textBox1 我可以这样做：

```
textBox1.SelectionStart = 1;
textBox1.SelectionLength = 4; 
```

这将从第二个字母开始并选择 4 个字母。

我想做的恰恰相反：当用户选择文本时，我想找出开始是什么，长度是多少（或者开始是什么，结束是什么。两者都可以）。

我考虑只搜索选定文本（textBox1.SelectedText）的字符串。如果它是一个常用词或多次使用的字符串，就会出现问题。例如。

> 这是一只猫。这是一只猫。这是一只猫。

如果他们选择第二个句子，使用 SelectedText 搜索该特定句子的字符串对我没有好处。它可以是 3 个中的任何一个。

所以，我的问题是：当用户点击一个按钮时，我如何确定用户选择的确切元素，以便我以后可以操作这些特定元素？重要的是要注意后面的部分-我可能不仅想在按下按钮时操作文本。我还想稍后再操作它，此时文本可能不再突出显示。这意味着我要存储一些东西来告诉我我正在处理的句子的具体部分。如果该解决方案不可行，是否有您可以想到的解决方案，在上面的“这是一只猫”示例中，用户可以选择第二个句子，点击一个按钮，然后我知道选择了哪个句子当他按下那个按钮时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T21:36:58.010

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionstart.aspx)，可以设置和读取`SelectionStart`。`SelectionLength`就用那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:41:23.967

您甚至不需要知道所选文本的位置来操作它们，要编辑您在文本中选择的文本，您可以简单地将`SelectedText`属性设置为新的编辑值。

```
// if textBox1.text = "Hello World World"; with first "World" selected
textBox1.SelectedText = textBox1.SelectedText.Replace("World", "Raj");
// then it becomes "Hello Raj World" 
```

# java - RestFul服务问题

> ID：15692588
> 
> 赞同：0
> 
> 时间：2013-03-28T21:33:33.600
> 
> 标签：java, rest

尝试设置一个更新数据库表的宁静服务组件。尝试同时使用 Spring RestTemplate 和 apache commons restful impl，但似乎都没有工作。

关于使用
选项 1：使用 Spring RestTemplate：导致以下错误
**com.fasterxml.jackson.databind.JsonMappingException：无法从 START_ARRAY 令牌中反序列化 java.util.LinkedHashMap 的实例**
选项 2：使用 org.apache.commons.httpclient。方法.PostMethod; 导致以下错误
服务器端错误：
**org.codehaus.jackson.JsonParseException：意外字符（'<'（代码 60））：预期有效值（数字、字符串、数组、对象、'true'、'false' 或 '空值'）**

客户端错误： **服务器拒绝此请求，因为请求实体的格式不受所请求方法 () 的请求资源支持。**
我的 Restful 服务方法被注释为“Post”并使用“JSON”。我的客户端控制器启动 RestFul 调用，代码如下

```
 @RequestMapping(value="/update", consumes="application/json")
public void updateMaintReport(
        @RequestBody Map<String, String> formModelData, 
        HttpServletRequest request, 
        HttpServletResponse response) 
        throws IOException,JsonMappingException {
    logger.log(LogLevel.DEBUG, "REACHED method updateMaintReport..");
    System.out.println("Reached method updateMaintReport.....");
    boolean errorEncountered = false;
    ReportingSession repSession = null;
    HttpSession session = request.getSession(false);

    if(session==null) {
        // TODO: code for handling invalid/expired session
    } else {
        repSession = (ReportingSession)session.getAttribute(ReportingWebConstants.REPORTING_SESSION);
        if(repSession==null) {
            errorEncountered = true;
        } 
    }

    if(!errorEncountered) {

        ServiceClient serviceClient = new ServiceClient();

        String servicesUrl = this.environment.getProperty("service_url_reports_data");
        String servicesName = this.environment.getProperty("service_name_reports_update_fnol");
        String serviceUrl = VIPUrlFactory.getServiceUrl(servicesUrl+servicesName);
        logger.log(LogLevel.DEBUG, "For update : serviceUrl: "+serviceUrl);

//Option 1: Using Spring RestTemplate :             
        LinkedMultiValueMap<String,String> headers = new LinkedMultiValueMap<String,String>();
        headers.add("Accept","application/json");
        headers.add("Content-type","application/json");
        List list = new ArrayList<Map<String, String>>(); list.add(formModelData);
        RestTemplate restTemplate = new RestTemplate();
        HttpEntity<List> requestEntity = new HttpEntity<List>(list, headers);

        ResponseEntity<List> fList = restTemplate.exchange(serviceUrl,
                HttpMethod.POST, 
                 requestEntity,
                List.class);

//Option 2: using org.apache.commons.httpclient.methods.PostMethod; -- Will be commented when option 1 block is uncommented     
        serviceClient.setParams(formModelData);
        serviceClient.setServiceUrl(serviceUrl);
        serviceClient.callRestServicePost();

        logger.log(LogLevel.DEBUG, "Posting data to service - to execute the update");

    }

} 
```

在上面的代码中，选项 1 和选项 2 块不会同时执行。

下面是接受 Restful 调用的代码块，我的服务器端代码。

```
 @RequestMapping(value = "/update", method = RequestMethod.POST)
public void updateMainRptData(@RequestBody Map<String, String> formModelData) throws ReportingIntegrationException,
        IOException, JsonMappingException {
    String updateStmt = "UPDATE CL_SCRIPTS SET DELETE_IND = #{delete_ind},  SCRIPT_DESC = #{script_desc}, SCRIPT_TXT = #{script_txt}WHERE   COMPANY_CD = #{company_cd} AND SCRIPT_NAME = #{script_name}AND PROMPT_ID = #{prompt_id}";
    ParameterObjectDTO paramObjDTO = new ParameterObjectDTO();

    logger.log(LogLevel.DEBUG,"In Services Web: updateMainRptData()");

    if(!formModelData.isEmpty()) {
        Set<String> keySet = formModelData.keySet();
        StringBuilder sb = new StringBuilder();
        for (String key : keySet) {
            sb.append(key).append(" -- ").append(formModelData.get(key)).append("\n");
        }
        logger.log(LogLevel.DEBUG, sb.toString());
    }

    paramObjDTO.setModalForQuery(formModelData);
    paramObjDTO.setUpdateSqlStmt(updateStmt);
    maintReportingSvc.updateMaintReport(paramObjDTO);

} 
```

我在浏览器中看到的错误消息没有帮助，但我相信我的 JSON 数据是有效的。任何帮助表示赞赏。谢谢。 ![在此处输入图像描述](../Images/3f1ec120fdc557c5256cef48c93cbfd7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T15:56:41.323

后来我更改了方法 updateMainRptData 的签名并添加了一个返回类型和@ResponseBody 来解决这个问题。

# jquery - Codeigniter 多选 JSON

> ID：15692589
> 
> 赞同：0
> 
> 时间：2013-03-28T21:33:41.680
> 
> 标签：jquery, json, codeigniter

我在一个对话框中有一个表单，我在其中询问用户他希望他的比赛在哪个锦标赛中注册。我使用这样的多选下拉列表来做到这一点：（Codeigniter）

```
<?php
foreach ($kampioenschappen as $kampioenschap) {
   $options3[$kampioenschap->kampioenschapsId] = $kampioenschap->naam;
}
// Er moeten meerdere kampioenschappen geselecteerd kunnen worden
echo form_multiselect('kampioenschap', $options3, '', 'id="kampioenschap" class="text ui-widget-content" style="width:300px" size=' . count($kampioenschappen));
?> 
```

所以用户可以选择多个冠军。

```
var dataString = $("#JqAjaxForm:eq(0)").serialize();
alert(dataString);
$.ajax({
   type: "POST",
   url: site_url + "/reeks_beheren/update",
   async: false,
   data: dataString,
   dataType: "json",
   error: function(a, b, c) {
     alert(a.responseText);
     alert(c);
   }
}); 
```

此代码段会将带有 json 的表单发送到控制器

```
$kampioenschappen = $this->input->post('kampioenschap'); 
```

这就是我遇到麻烦的地方，当我提醒数据字符串 .serialize 给出了所有选定的冠军，但我没有在控制器中收到它们。

有没有我忘记的步骤，或者我在这里做的事情完全错误？

提前感谢您提供可能的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:10:15.977

问题是您的多选下拉列表不是数组表示法。您应该在`[]`其名称中添加方括号以对其进行定义。

```
echo form_multiselect('kampioenschap[]', $options3, '', 'id="kampioenschap" class="text ui-widget-content" style="width:300px" size=' . count($kampioenschappen)); 
```

我假设您的问题是您的控制器没有收到 ajax 请求。也许将来尝试对您的问题更具描述性。:)

# java - 平等地抢占多余空间

> ID：15692590
> 
> 赞同：0
> 
> 时间：2013-03-28T21:33:42.310
> 
> 标签：java, layout, swt

在同一空间内的多个 SWT 控件上使用“抓取多余的水平空间”时，默认行为不会完全平均地划分它们之间的空间。似乎进行了某种幕后计算以将其“某种程度”平分，但为较大的控件提供了更高的比率。

![示例图像](../Images/016d1f085918f7fbdf933616b5cdd1f6.png)

在我的示例中，我使用网格布局创建了一个自定义的类似表格的控件，用户可以在其中添加任意数量的行，以及为每一行单独添加任意数量的框（自定义画布）。我的意图是让给定行中的所有框都具有相同的大小-因此，具有相同数量框的所有行将具有相同大小的框，尽管它们是分开的。但是，在我的示例中，您可以看到其中包含标签文本的一个框比同一行上的框占用更多空间，因为计算认为它比其他框“需要更多”。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:42:57.447

您可以尝试使用[`makeColumnsEqualWidth`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/layout/GridLayout.html#makeColumnsEqualWidth)from [`GridLayout`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Flayout%2FGridLayout.html)。

# ember.js - 不懂 emberjs {{view.x}}

> ID：15692594
> 
> 赞同：0
> 
> 时间：2013-03-28T21:33:57.707
> 
> 标签：ember.js

在文档中，第一个视图示例如下所示：

HTML：

```
<html>
  <head>
    <script type="text/x-handlebars" data-template-name="say-hello">
      Hello, <b>{{view.name}}</b>
    </script>
  </head>
</html> 
```

JS：

```
var view = Ember.View.create({
  templateName: 'say-hello',
  name: "Bob"
}); 
```

也许我是个布偶，但我真的不明白发生了什么。有人可以帮忙吗。

我有点理解`{{view}}{{view}}`一些 html/handlebars 的情况，其中动作和事件将从 javascript 中的视图定义中应用。另外，我很欣赏您可以拥有一个无块的单块`{{view MyApp.thingView}}`，它将视图中指定的模板呈现到使用视图助手的位置（以及在视图定义中提供可用属性）。

是`{{view.x}}`实例化视图吗？如果是，为什么示例使用创建而不是扩展。或者是指全局变量视图的视图（我假设不是，因为这是把手。）可以使用扩展。这个表单是否只是想说您可以在视图定义已`templateName`设置为模板的模板中访问视图的属性？

感谢您的任何澄清

更新：再次查看示例后，看起来 var 用于其他片段中的编程附加。所以我们可以假设这就像在两个 {{view App.aView}}{{/view}} 元素和视图中拥有模板。表单允许您获取 App.aView 中的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:47:59.993

**<更新>**

针对问题中的更新：

`{{#view App.SomeView}} ... {{/view}}`如果该视图没有与之关联的任何模板，则应使用该视图。另一方面，`{{view App.SomeView}}`如果已通过命名约定或`templateName`属性为此视图创建了模板，则应使用该模板。例子：

```
{{view Ember.TextField valueBinding="view.userName"}} 
```

**</更新>**

当您`{{view.propertyName}}`在 Handlebars 模板中看到时，这意味着您正在使用/呈现您所在视图中的属性，因此您最初的假设是正确的。例如：

```
App = Em.Application.create();

App.HelloView = Em.View.extend({
    welcome: 'Willkommen',
    userName: 'DHH',
    greeting: function() {
        return this.get('welcome') + ' ' + this.get('userName');
    }.property('welcome', 'userName')
}); 
```

然后在您的应用程序模板中：

```
<script type="text/handlebars">
<h1>App</h1>
{{#view App.HelloView}}
    {{view.greeting}}
{{/view}}
</script> 
```

在这种情况下，该`{{view.greeting}}`部件将在 View ( `HelloView`) 的范围内查找名为的属性`greeting`（对于任何这些属性都是相同的），而不是在父视图中（`ApplicationView`这是隐含的）。您必须`{{view.propertyName}}`在调用视图中定义的属性时使用。控制器中定义的属性可以直接访问，无需前缀。

原因之一是确保您调用了正确的属性。考虑以下：

```
App = Em.Application.create();

App.ApplicationView = Em.View.extend({
    userName: 'David'
});

App.HelloView = Em.View.extend({
    welcome: 'Willkommen',
    userName: 'DHH',
    greeting: function() {
        return this.get('welcome') + ' ' + this.get('userName');
    }.property('welcome', 'userName')
}); 
```

现在，应用程序视图和内部视图都定义了一个属性，命名`userName`为表示略有不同的事物。为了区分哪个是哪个，您可以使用`view`and`parentView`关键字来访问属性：

```
<script type="text/handlebars">
<h1>App</h1>
<!-- this comes from the ApplicationView -->
<h3>{{view.userName}}'s Profile</h3> 
{{#view App.HelloView}}
    <!-- this comes from the HelloView -->
    {{view.welcome}} {{view.userName}}
{{/view}}
</script> 
```

如果你想/需要在这个例子中使用真实姓名和昵称，你必须：

```
<script type="text/handlebars">
<h1>App</h1>
{{#view App.HelloView}}
    <!-- this comes from the ApplicationView -->
    <h3>{{parentView.userName}}'s Profile</h3> 
    <!-- this comes from the HelloView -->
    {{view.welcome}} {{view.userName}}
{{/view}}
</script> 
```

相关参考：

*   [http://emberjs.com/api/classes/Ember.View.html](http://emberjs.com/api/classes/Ember.View.html)
*   [http://emberjs.com/api/classes/Ember.TextField.html](http://emberjs.com/api/classes/Ember.TextField.html)

# jsf - PrimeFaces TabView + Layout：奇怪的行为

> ID：15692596
> 
> 赞同：0
> 
> 时间：2013-03-28T21:34:04.070
> 
> 标签：jsf, jsf-2, primefaces, firebug

我正在使用最新的 PrimeFaces (3.6-SNAPSHOT)。在火狐上测试。

我一直在尝试隔离问题。这是我发现的。

我的页面设计如下：一个[TabView](http://www.primefaces.org/showcase/ui/tabview.jsf) - 它的每个选项卡都包含另一个 TabView，它的每个选项卡都包含一个[Layout](http://www.primefaces.org/showcase/ui/layoutElement.jsf)。

问题是在某些选项卡上，布局没有出现。当我使用 PrimeFaces 3.4.2 编译时，无论我是否单击另一个选项卡，然后单击返回缺少布局的选项卡，都不会显示丢失的布局。但是，当我使用 PrimeFaces 3.6-SNAPSHOT 编译时（单击另一个选项卡，然后单击缺少布局的选项卡） - 出现缺少的布局。疯了吧？

真正疯狂的是，当我看到布局不可见时，我用 firebug 检查它，发现它的 HTML 与它显示时的不同......

怎么可能？？我以为我得到了一个静态页面（带有一些 Javascript，但 HTML 本身仍然没有变化）。这超出了我的理解。

例如，重新启动 Firefox，加载页面并尝试按以下顺序单击选项卡：(1,1) (1,2) (1,3) (1,4) 一切正常。现在单击选项卡 2（标题）。您是否看到选项卡 (2,1) 中的布局消失了？现在单击 (2,2) 并返回 (2,1) - 现在布局就在那里。奇怪的东西。

知道发生了什么吗？

它可能与这个问题有关： [https ://stackoverflow.com/questions/13978438/primefaces-layout-not-working-inside-tabview](https://stackoverflow.com/questions/13978438/primefaces-layout-not-working-inside-tabview)

这是代码，您可能想尝试一下。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:head>

</h:head>
<h:body>

    <p:tabView id="tabView">  

        <p:tab id="tab1" title="Godfather Part I">  
            <h:panelGrid columns="2" cellpadding="10">  
                <p:graphicImage id="tab1Img" value="/images/godfather/godfather1.jpg" />  
                <h:outputText id="tab1Text"  
                    value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.  
                    His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T  
                    hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,  
                    but given to ruthless violence whenever anything stands against the good of the family." />  
            </h:panelGrid> 

            <p:tabView id="tabView1">  

                <p:tab id="tab1" title="Godfather Part I">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab1Img" value="/images/godfather/godfather1.jpg" />  
                        <h:outputText id="tab1Text"  
                            value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.  
                            His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T  
                            hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,  
                            but given to ruthless violence whenever anything stands against the good of the family." />  
                    </h:panelGrid>

                    Layout (1,1)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout1">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

                <p:tab id="tab2" title="Godfather Part II">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab2Img" value="/images/godfather/godfather2.jpg" />  
                        <h:outputText id="tab2Text" value="Francis Ford Coppola's legendary continuation and sequel to his landmark 1972 film, The_Godfather, parallels the young Vito Corleone's rise with his son Michael's spiritual fall, deepening The_Godfather's depiction of the dark side of the American dream.  
                        In the early 1900s, the child Vito flees his Sicilian village for America after the local Mafia kills his family. Vito struggles to make a living, legally or illegally, for his wife and growing brood in Little Italy,  
                        killing the local Black Hand Fanucci after he demands his customary cut of the tyro's business. With Fanucci gone, Vito's communal stature grows."/>  
                    </h:panelGrid>

                    Layout (1,2)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout2">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

                <p:tab id="tab3" title="Godfather Part III">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />  
                        <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.  
                            Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>  
                    </h:panelGrid>

                    Layout (1,3)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout3">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>

                <p:tab id="tab4" title="Godfather Part IV">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />  
                        <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.  
                            Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>  
                    </h:panelGrid>

                    Layout (1,4)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout4">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

            </p:tabView>

        </p:tab>  

        <p:tab id="tab2" title="Godfather Part II">  
            <h:panelGrid columns="2" cellpadding="10">  
                <p:graphicImage id="tab2Img" value="/images/godfather/godfather2.jpg" />  
                <h:outputText id="tab2Text" value="Francis Ford Coppola's legendary continuation and sequel to his landmark 1972 film, The_Godfather, parallels the young Vito Corleone's rise with his son Michael's spiritual fall, deepening The_Godfather's depiction of the dark side of the American dream.  
                In the early 1900s, the child Vito flees his Sicilian village for America after the local Mafia kills his family. Vito struggles to make a living, legally or illegally, for his wife and growing brood in Little Italy,  
                killing the local Black Hand Fanucci after he demands his customary cut of the tyro's business. With Fanucci gone, Vito's communal stature grows."/>  
            </h:panelGrid>

            <p:tabView id="tabView2">  

                <p:tab id="tab1" title="Godfather Part I">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab1Img" value="/images/godfather/godfather1.jpg" />  
                        <h:outputText id="tab1Text"  
                            value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.  
                            His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T  
                            hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,  
                            but given to ruthless violence whenever anything stands against the good of the family." />  
                    </h:panelGrid>

                    Layout (2,1)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout1">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

                <p:tab id="tab2" title="Godfather Part II">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab2Img" value="/images/godfather/godfather2.jpg" />  
                        <h:outputText id="tab2Text" value="Francis Ford Coppola's legendary continuation and sequel to his landmark 1972 film, The_Godfather, parallels the young Vito Corleone's rise with his son Michael's spiritual fall, deepening The_Godfather's depiction of the dark side of the American dream.  
                        In the early 1900s, the child Vito flees his Sicilian village for America after the local Mafia kills his family. Vito struggles to make a living, legally or illegally, for his wife and growing brood in Little Italy,  
                        killing the local Black Hand Fanucci after he demands his customary cut of the tyro's business. With Fanucci gone, Vito's communal stature grows."/>  
                    </h:panelGrid>

                    Layout (2,2)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout2">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

                <p:tab id="tab3" title="Godfather Part III">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />  
                        <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.  
                            Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>  
                    </h:panelGrid>

                    Layout (2,3)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout3">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>

                <p:tab id="tab4" title="Godfather Part IV">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />  
                        <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.  
                            Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>  
                    </h:panelGrid>

                    Layout (2,4)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout4">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

            </p:tabView>

        </p:tab>  

        <p:tab id="tab3" title="Godfather Part III">  
            <h:panelGrid columns="2" cellpadding="10">  
                <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />  
                <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.  
                    Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>  
            </h:panelGrid>

            <p:tabView id="tabView3">  

                <p:tab id="tab1" title="Godfather Part I">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab1Img" value="/images/godfather/godfather1.jpg" />  
                        <h:outputText id="tab1Text"  
                            value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.  
                            His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T  
                            hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,  
                            but given to ruthless violence whenever anything stands against the good of the family." />  
                    </h:panelGrid>

                    Layout (3,1)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout1">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

                <p:tab id="tab2" title="Godfather Part II">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab2Img" value="/images/godfather/godfather2.jpg" />  
                        <h:outputText id="tab2Text" value="Francis Ford Coppola's legendary continuation and sequel to his landmark 1972 film, The_Godfather, parallels the young Vito Corleone's rise with his son Michael's spiritual fall, deepening The_Godfather's depiction of the dark side of the American dream.  
                        In the early 1900s, the child Vito flees his Sicilian village for America after the local Mafia kills his family. Vito struggles to make a living, legally or illegally, for his wife and growing brood in Little Italy,  
                        killing the local Black Hand Fanucci after he demands his customary cut of the tyro's business. With Fanucci gone, Vito's communal stature grows."/>  
                    </h:panelGrid>

                    Layout (3,2)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout2">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

                <p:tab id="tab3" title="Godfather Part III">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />  
                        <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.  
                            Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>  
                    </h:panelGrid>

                    Layout (3,3)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout3">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>

                <p:tab id="tab4" title="Godfather Part IV">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />  
                        <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.  
                            Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>  
                    </h:panelGrid>

                    Layout (3,4)

                    <p:layout style="min-width:400px;min-height:200px;" id="layout4">  
                        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">  
                            West  
                        </p:layoutUnit>  

                        <p:layoutUnit position="center">  
                            Center  
                        </p:layoutUnit>  
                    </p:layout>

                </p:tab>  

            </p:tabView>

        </p:tab>  

    </p:tabView>

</h:body>

</html> 
```

# python - Python：获取对象的str时的最大递归深度

> ID：15692597
> 
> 赞同：2
> 
> 时间：2013-03-28T21:34:10.203
> 
> 标签：python, recursion

我正在制作一个程序来获取数字中的字母数量：

```
def convert(number):
    lettercount = 0

    numstr = str(number)

    # One's places
    if len(numstr) is 1:
        if number == 1 or number == 2 or number == 6:
            lettercount += 3

        elif number == 4 or number == 5 or number == 9:
            lettercount += 4

        else:
            lettercount += 5

    # Ten's places
    elif len(numstr) is 2:
        if number == 10:
            lettercount += 3

        elif number == 11 or number == 12:
            lettercount += 6

        elif number == 15 or number == 16:
            lettercount += 7

        elif number == 13 or number == 14 or number == 19:
            lettercount += 8

        elif number == 17 or number == 18:
            lettercount += 9

        elif number == 20 or number == 30 or number == 40 or\
            number == 80 or number == 90:
            lettercount += 6

        else:
            lettercount += convert(int((numstr)[-1]))
            lettercount += convert(int(round(number, -1)))

    return lettercount

print "88 has %i letters in its name." % convert(88)
print "23 has %i letters in its name." % convert(23)
print "46 has %i letters in its name." % convert(46) 
```

它工作得很好，并为 88 和 23 返回了正确的响应，但它在 46 上给出了递归深度错误。我很困惑；为什么它只发生在 46 上？

* * *

固定代码：

```
def convert(number):
    lettercount = 0

    numstr = str(number)

    # One's places
    if len(numstr) == 1:
        if number == 1 or number == 2 or number == 6:
            lettercount += 3

        elif number == 4 or number == 5 or number == 9:
            lettercount += 4

        else:
            lettercount += 5

    # Ten's places
    elif len(numstr) == 2:
        if number == 10:
            lettercount += 3

        elif number == 40 or number == 50:
            lettercount += 5

        elif number == 11 or number == 12 or number == 20 or number == 30 or\
            number == 80 or number == 90:
            lettercount += 6

        elif number == 15 or number == 16:
            lettercount += 7

        elif number == 13 or number == 14 or number == 19:
            lettercount += 8

        elif number == 17 or number == 18:
            lettercount += 9

        else:
            lettercount += convert(int((numstr)[-1]))
            lettercount += convert((int(numstr) // 10) * 10)

    return lettercount

print "88 has %i letters in its name." % convert(88)
print "23 has %i letters in its name." % convert(23)
print "46 has %i letters in its name." % convert(46) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:40:30.197

因为当你这样做时

```
convert(int(round(number, -1))) 
```

你在打电话`convert(50)`。由于您的`if`语句未涵盖 50，因此它会`else`再次调用，并再次调用`convert(50)`，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:41:26.247

这里的问题是`round(46, -1)`会产生 value `50`。当`convert`使用该值调用时，`50`它将转到完全相同的行

```
lettercount += convert(int(round(number, -1))) 
```

`round(50, -1)`调用将产生，`50`此时`convert`函数将无限执行

# http - 没有 http 的链接：像 //code.jquery.com/etc

> ID：15692601
> 
> 赞同：5
> 
> 时间：2013-03-28T21:34:20.160
> 
> 标签：http, web, hyperlink, protocols

最近我注意到一些网站（例如[jsFiddle](http://jsfiddle.net/)）和一些小部件（例如 pinterest 提要小部件）以及许多其他小部件。

他们开始使用格式的链接

*   *`//code.jquery.com/jquery-1.9.1.js`*
*   *`//assets.pinterest.com/js/pinit.js`*

    1.  是什么`//`意思？
    2.  是一样的`http`吗？
    3.  if`//`与`http`为什么使用它而不是 http 相同？
    4.  如果两者不同，我可以用它来链接我的网站吗？

*作为补充：我不确定，但我认为我似乎有些用`//name:sub.domaine.com`，我错了吗？如果这些存在，它们是什么意思？*

### 编辑：

正如下面的答案中所解释的，我可以使用该`//`符号来缩短链接，但是当我将它用于我的网站时：**Chrome**将链接更改为：*`file:///`*这不是我所期望的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T21:37:10.177

这是一个*相对于协议的*URL。如果包含它的页面使用 HTTP，那么它就是 HTTP。如果包含它的页面使用 HTTPS，则它使用 HTTPS。

这很方便，因此您可以确保不会在安全页面中获取不安全的资源（这会导致您可能已经看到的“混合内容”警告），而无需担心交付的页面中 SSL/TLS 的开销无论如何未加密。

这类似于如何以单个开头的 URL`/`相对于当前协议和主机名进行解析，并且没有前导`/`或方案的 URL 相对于当前页面的目录进行解析。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-28T21:40:28.977

为了简单起见：大多数网络浏览器现在不再需要完整的 [http://www]。所以，是的，为了酷并保持 URL 的简短，您可以跳过完整的 [http://www.] 并使用 //

# javascript - 我在哪里可以找到简单而小型的 Javascript 灯箱插件或教程？

> ID：15692603
> 
> 赞同：-4
> 
> 时间：2013-03-28T21:34:34.080
> 
> 标签：javascript, html, css

有谁知道制作一个简单的灯箱来显示一个简单的 HTML 表单的插件或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:37:29.997

嗯，标题说对话框，但问题说灯箱。

对于对话框，您可以使用[jQuery Dialog](http://jqueryui.com/dialog/)。

对于灯箱，您可以使用[FancyBox](http://fancybox.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:49:08.790

我喜欢[影盒](http://shadowbox-js.com/)。它是一个 jQuery 插件，所以你必须运行 jQuery；但它几乎可以显示您想要的任何内容：HTML、视频、图像等等。如果您对 HTML/CSS 有一定的了解，那么它很容易安装、使用和设置样式。

它还允许您下载版本......做任何你想做的事。因此，如果您只希望它显示 HTML，那很好。只需下载那个位，等等。

# mysql - 改进可怕的 annotate() 查询

> ID：15692605
> 
> 赞同：1
> 
> 时间：2013-03-28T21:34:40.313
> 
> 标签：mysql, django

这是我`order_item`按最新时间戳排序的当前查询。

```
order_items.annotate(newest_note_time=Max('ordernotes__timestamp')).
    order_by('newest_note_time') 
```

有用。但是，在查看它时，`debug-toolbar`它给了我两个残酷的查询，几乎是相同的。我试过做：

```
order_items = order_items.order_by('-ordernotes__timestamp') 
```

但这会导致不正确的查询给我重复的结果。

有没有更好的方法来执行此查询而无需在这里跳入原始 SQL？

这是其中一个查询（第二个基本相同，不知道为什么会生成第二个......）

```
SELECT ••• FROM `order_orderitem`
INNER JOIN `order_orderitemstatus` ON (`order_orderitem`.`status_id` = `order_orderitemstatus`.`id`)
INNER JOIN `order_order` ON (`order_orderitem`.`order_id` = `order_order`.`id`)
INNER JOIN `title_title` ON (`order_orderitem`.`title_id` = `title_title`.`id`)
INNER JOIN `home_service` ON (`order_orderitem`.`service_id` = `home_service`.`id`)
LEFT OUTER JOIN `order_ordernotes` ON (`order_orderitem`.`id` = `order_ordernotes`.`order_item_id`)
WHERE NOT (`order_orderitemstatus`.`name` IN ('Complete', 'Live', 'Archived'))
GROUP BY
  `order_orderitem`.`id`, `order_orderitem`.`order_id`, `order_orderitem`.`title_id`, `order_orderitem`.`service_id`,
  `order_orderitem`.`metadata_locale_id`, `order_orderitem`.`purchase_order`, `order_orderitem`.`due_date`, `order_orderitem`.`feature`,
  `order_orderitem`.`trailer`, `order_orderitem`.`artwork`, `order_orderitem`.`chaptering`, `order_orderitem`.`cc`,
  `order_orderitem`.`metadata`, `order_orderitem`.`subtitles`, `order_orderitem`.`forced_narrative`, `order_orderitem`.`qc_note`,
  `order_orderitem`.`audio`, `order_orderitem`.`dub_card`, `order_orderitem`.`live_url`, `order_orderitem`.`metadata_valid`,
  `order_orderitem`.`status_id`, `order_orderitem`.`date_created`, `order_order`.`id`, `order_order`.`number`, `order_order`.`provider_id`,
  `order_order`.`date_created`, `order_order`.`date_ordered`, `order_order`.`is_archived`, `title_title`.`id`, `title_title`.`film_id`,
  `title_title`.`name`, `title_title`.`provider_id`, `title_title`.`original_locale_id`, `title_title`.`country_of_origin_id`,
  `title_title`.`synopsis`, `title_title`.`production_company`, `title_title`.`copyright`, `title_title`.`run_time`,
  `title_title`.`original_theatrical_release`, `title_title`.`color`, `title_title`.`film_type`, `title_title`.`no_cc_reason`,
  `title_title`.`includes_hd`, `title_title`.`provider_identifier`, `title_title`.`episode_production_number`, `title_title`.`container_position`,
  `title_title`.`season_id`, `home_service`.`id`, `home_service`.`name`, `home_service`.`notes`, `order_orderitemstatus`.`id`,
  `order_orderitemstatus`.`name`, `order_orderitemstatus`.`department_id`, `order_orderitemstatus`.`is_finished`,
  `order_orderitemstatus`.`ordering` ORDER BY NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:41:52.160

```
.select_related(depth=1) 
```

将其添加到原始查询的末尾，看看是否发生了任何魔术。

我拥有的糟糕查询的另一个可能的解决方法是只缓存页面。将以下内容添加到文件顶部：

```
from django.views.decorators.cache import cache_page 
```

然后就在您的定义上方...添加：

```
@cache_page(60 * 5) 
```

即 60 秒 * 5，持续 5 分钟。将时间更改为适合您的时间。

# redis - 使用 SignalR 和 Redis 的组

> ID：15692606
> 
> 赞同：0
> 
> 时间：2013-03-28T21:34:46.867
> 
> 标签：redis, signalr

SignalR.Redis 是否支持组？我正在尝试使用 Redis 实现 SignalR，并且消息在发送到所有客户端时会正确传递，但在发送到组时不会传递。

我正在将客户添加到组中，如下所示：

```
public override System.Threading.Tasks.Task OnConnected()
{
    return Groups.Add(Context.ConnectionId, "group1");
} 
```

并像这样发送到组：

```
internal static void ShowMessage(string message)
{
    GlobalHost.ConnectionManager.GetHubContext<ProcessorHub>().Clients.Group("group1").showMessage(message);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:36:57.347

SignalR 横向扩展提供程序当前尚未准备好使用。等待下一个版本（扩展提供程序的测试版）使用它们。

关于下一个版本的 Redis 横向扩展提供程序和组的实施：是的，它将支持组。

# cocos2d-iphone - 如何在 Cocos2D,Box2D 中移动一个球，就像轻弹一个真正的球一样，触摸？

> ID：15692607
> 
> 赞同：0
> 
> 时间：2013-03-28T21:34:54.057
> 
> 标签：cocos2d-iphone, physics, box2d-iphone, touch-event

我正在尝试在 cocos2d 中学习 box2d。我搜索了在线教程，ray Wenderlich 的教程似乎是最好的！我正在以缓慢但稳定的速度学习！我目前正在开发一个应用程序，其中我将在屏幕中包含一个球，每次我触摸/点击这个球时，它都会像有人在轻弹足球一样移动。当触摸/轻敲它时，我已经为球的向上运动（y 轴）编写了代码。我遇到的问题是我找不到一种方法来给球适当的角度以便在 x 轴上旋转和移动。让我给你举个例子。想象一下，您正在轻弹一个足球，您将球向上踢，但球上有一个旋转力。我正在尝试开发跨 x 轴部分的旋转和移动。我想触摸球，在它的右下角 例如，以逼真的方式旋转和移动。当球在空中时触摸它的右下角，意味着球将移动并旋转到屏幕的左侧。我希望我澄清了情况！如果有人能帮助我理解这种运动，我将不胜感激！如果你还没有理解我的游戏概念，搜索“parksoccer”，你就会明白我想要开发的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:48:18.703

我昨天才这样做。在这种情况下，您可以做的是当您触摸或点击屏幕时，您在 ccTouchesBegan 中获取该点，然后通过身体上的 GetPostion() 方法找到球的位置。比你必须计算这两个点之间的角度，并找出球将从这两个点朝哪个方向移动。现在你有了球的角度和方向，所以通过 ApplyLinearForce(b2vec2 forceangle, body->GetPosition()) 应用线性力。而已。

享受。

# java - 使用 gson 在 Android 中转换 JSON 对象

> ID：15692612
> 
> 赞同：0
> 
> 时间：2013-03-28T21:35:17.137
> 
> 标签：java, android, wcf

我是 Java 和 Android 的新手，所以请多多包涵。我正在尝试创建一个函数，该函数调用 wcf 服务并将返回的结果从 JSON 转换为 Java 对象（我将类型作为 object 传递`t`），但它抛出了一个空指针异常`t`，这一定是`null`我只想传递正确类型的对象，以便在转换时填充。请帮助我。

```
 public static String Post(String serviceURL, Map<String, String> entites,
        Class<?> t) {
    String responseString = "";
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);

            Gson gson = new GsonBuilder().create();
            //now we will try to convert the class to the specified type.
            t = (Class<?>) gson.fromJson(responseString, t);

    } catch (Exception e) {

        responseString = e.toString();

    }
    return responseString; 
```

非常感谢。

经过一些尝试，我最终得到了这段代码，但我仍然面临空指针异常。

```
 MemberInfo mem = new MemberInfo();

    TypeToken<MemberInfo> m = null ;
    ServiceCaller.Post(getString(R.string.LoginService), values , m);

            Gson gson = new GsonBuilder().create();
            //now we will try to convert the class to the specified type.
            t = (TypeToken<T>) gson.fromJson(responseString, (Type) t); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T15:53:10.153

据我所知，这是不可能的。为了做到这一点，gson 必须能够*仅从序列化的字符串*中检测到正确的类。但是，可以通过多种有效方式解释单个字符串。例如，以 gson 网站上的示例为例：

```
class BagOfPrimitives {
  private int value1 = 1;
  private String value2 = "abc";
  BagOfPrimitives() {
    // no-args constructor
  }
} 
```

`Gson.toJson`在此类的实例上使用会产生以下字符串：

```
{"value1":1,"value2":"abc"} 
```

但是，如果我创建了另一个在所有方面都与第一个相同的类，但名称：

```
class SackOfPrimitives {
  private int value1 = 1;
  private String value2 = "abc";
  SackOfPrimitives() {
    // no-args constructor
  }
} 
```

然后这也将序列化为相同的字符串：

```
{"value1":1,"value2":"abc"} 
```

我的观点是，给定一个类似的字符串`{"value1":1,"value2":"abc"}`，gson 无法确定是否应该将其反序列化为 type`BagOfPrimitives`或 type的对象`SackOfPrimitives`。因此，您始终必须为 gson 提供正确的类型，因为 gson 无法自行解决。

# php - 使用新的应用程序池标识功能时在 PHP/IIS 8 中创建符号链接

> ID：15692614
> 
> 赞同：3
> 
> 时间：2013-03-28T21:35:22.573
> 
> 标签：php, iis, symlink, pool

我正在运行 IIS 8，Server 2012。我有一个 Web 应用程序，程序员想要在其中创建符号链接。这是一些示例代码：

```
$target = 'symlink.php';
$link = 'symlink-link.php';

symlink($target, $link);
echo readlink($link); 
```

我收到以下错误：

```
PHP Warning:  symlink(): Cannot create symlink, error code(1314) in E:\...\test.php on line 7 
```

我已授予“IIS APPPOOL\apppooluser”NTFS 修改权限。我已将用户权限分配授予“创建符号链接”的同一用户。

我无法让此应用程序创建链接。有什么建议么？使用 IIS APP POOL 是不可能的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:39:03.083

尝试[在 php.net 上的评论中写的答案](http://www.php.net/manual/en/function.symlink.php#109607)

> 在 IIS（Internet 信息服务）上，您需要设置权限以允许创建符号链接。
> 
> 转到本地安全策略 -> 本地策略 -> 用户权限分配，然后右键单击创建符号链接 -> 属性 -> 添加用户或组并添加“IUSR”用户，该用户应该是与 IIS 关联的用户。可能需要重新启动。
> 
> 如果这不起作用，请转到 IIS 管理器 -> 身份验证 -> 选择匿名身份验证 -> 编辑并输入您当前登录的用户，该用户应该是管理员。点击 OK，现在 php 中的 symlink() 函数应该可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:43:01.460

通过在站点下单击身份验证->匿名身份验证->特定用户并让站点在真实的 Windows 帐户下运行，我能够使符号链接正常工作。该帐户具有创建链接的 NTFS 权限和用户权限分配，但不是管理员。

应用程序池仍然可以在应用程序池标识下运行。

但是，据我了解，使用应用程序池标识应该是更安全的方法。我仍然想知道是否有办法在使用应用程序池标识时使符号链接工作。

# python - Python Pexpect：使用 spawn 到 SSH 并运行命令

> ID：15692615
> 
> 赞同：1
> 
> 时间：2013-03-28T21:35:24.057
> 
> 标签：python, pexpect

我有一个脚本，我在其中`ssh`输入多个框并更新日期。我的问题是`ssh`在我的第二个命令成功后没有被执行。我这样做正确吗？

**代码：**

```
command1 = "/usr/bin/ssh %(username)s@%(hostname)s" % locals()
command2 = " /usr/bin/date -s\"%(easterndate)s\"" % locals()

p = pexpect.spawn((command1 + command2), timeout=360) 
```

**输出：**

-Desktop:~/Desktop$ ./pexpect_test.py /usr/local/lib/python2.6/dist-packages/pytz/tzinfo.py:5: DeprecationWarning: sets 模块从 sets import Set 中弃用

command1 + command2 是：/usr/bin/ssh id@something.url.com /bin/date -s"Thu Mar 28 17:21:52 EDT 2013"

初始 pexpect 命令输出：1

登录框

登陆成功

设定时间...

# java - Java 字节码检测：对 defineClass 的反射调用中的 NullPointerException

> ID：15692621
> 
> 赞同：5
> 
> 时间：2013-03-28T21:35:54.033
> 
> 标签：java, osgi, classloader, instrumentation, jvmti

**意图**：

我正在使用[java.lang.instrument](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/package-summary.html)包为 Java 程序创建一些工具。这个想法是我通过这个系统使用字节码操作，以便在每个方法的开头和结尾添加方法调用。一般来说，修改后的 Java 方法如下所示：

```
public void whateverMethod(){
    MyFancyProfiler.methodEntered("whateverMethod");
    //the rest of the method as usual...
    MyFancyProfiler.methodExited("whateverMethod");
} 
```

`MyFancyProfiler`是一个相对复杂的系统的入口点，它在`premain`方法期间被初始化（它是 的一部分`java.lang.instrument`）。

*编辑*-包含一个静态 API，它将通过类似于[此问题的解决方案中](https://stackoverflow.com/questions/2063829/how-can-i-use-java-lang-instrument-in-an-eclipse-rcp-application)`MyFancyProfiler`描述的机制获得对系统其余部分的引用。引用以 . 的形式获得，并通过反射进行适当的调用，因此即使当前的 ClassLoader 不知道底层类，它仍然可以工作。`Object`

**困难**

对于一个简单的 Java 程序，该方法可以正常工作。对于“真正的”应用程序（如窗口应用程序，尤其是*RCP/OSGi*应用程序），我遇到了`ClassLoaders`. 有些`ClassLoaders`人不知道如何找到这个`MyFancyProfiler`类，所以当它试图调用`MyFancyProfiler`.

我对此的解决方案（以及我真正的问题正在发生的地方）目前是通过反射调用“注入”`MyFancyProfiler`到每个遇到的. 它的要点是：`ClassLoader``defineClass`

```
public byte[] transform(ClassLoader loader, String className, /* etc... */) {
  if(/* this is the first time I've seen loader */){
    //try to look up `MyFancyProfiler` in `loader`.
    if(/* loader can't find my class */){
      // get the bytes for the MyFancyProfiler class
      // reflective call to 
      // loader.defineClass(
      //   "com.foo.bar.MyFancyProfiler", classBytes, 0, classBytes.length);
    }
  }
  // actually do class transformation via ASM bytecode manipulation
} 
```

*编辑以获取更多信息*- 这种注入的原因是为了确保每个类，无论是哪个 ClassLoader 加载它，都能够`MyFancyProfiler.methodEntered`直接调用。一旦它进行调用，`MyFancyProfiler`将需要使用反射与系统的其余部分进行交互，否则当它尝试直接引用时，我将得到一个 InvocationTargetException 或 NoClassDef 异常。我目前正在运行它，因此唯一的“直接”依赖项`MyFancyProfiler`是 JRE 系统类，所以它似乎很好。

**问题**

这甚至有效！大多数时候！但是对于我在尝试跟踪 Eclipse（从命令行启动 IDE）时遇到的至少两个单独的 ClassLoader，我`NullPointerException`从方法内部得到了一个`ClassLoader.defineClass`：

```
java.lang.NullPointerException
    at java.lang.ClassLoader.checkPackageAccess(ClassLoader.java:500)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    // at my code that calls the reflection 
```

*ClassLoader.java*的第 500 行是对 的调用`domains.add(pd)`，其中`domains`似乎是在构造函数时初始化的 Set，并且`pd`（`ProtectionDomain`据我所知）应该是“默认值” `ProtectionDomain`。所以我看不到这条线导致`NullPointerException`. 目前我很困惑，我希望有人可以对此提供一些见解。

什么可能导致`defineClass`以这种方式失败？如果没有明显的解决方案，您能否为我的整体问题提供一种潜在的替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:44:47.530

尝试在引导类加载器中加载包含 MyFancyProfiler 的 jar，而不是向 ClassLoaders 注入代码。最简单的方法是将以下行添加到 javaagent jar 的清单中：

```
Boot-Class-Path: fancy-profiler-bootstrap-stuff.jar 
```

这将使所有类加载器都可以访问该 jar 中的所有内容，包括我相信 OSGi 和朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-16T00:02:17.270

你得到了`NullPointerException`因为`this`在这种情况下是空的。如果您想使用引导类加载器（即）加载一个类，您需要通过使用作为 ClassLoader 和作为 ProtectionDomain的方法`null`来绕过安全检查。`sun.misc.Unsafe.defineClass(String name, byte[] b, int off, int len, ClassLoader loader, ProtectionDomain protectionDomain);``null``null`

# ruby - 初学者的除法和循环

> ID：15692622
> 
> 赞同：1
> 
> 时间：2013-03-28T21:35:58.893
> 
> 标签：ruby, loops, recursion

有人可以帮我弄清楚如何在 Ruby 中做到这一点吗？

我有一个整数数组。对于这些整数中的每一个，我需要找到一个两位数长的除数（整数也是如此）。现在，代码正在无限循环。我试图得到的答案是：

```
int_a = 2, int_b = 11, and x = 22 
```

这是代码：

```
[22, 33].each do |x| 
  x.to_f
  int_a = 1
  int_b = x.quo(int_a)

     until int_a > 15 || int_b%2==0 && sprintf("%g", int_b).to_s.length == 2 
        puts "#{x}"
        puts "#{int_a}"
        puts "#{int_b}"  
     end  
  int_a += 1
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:06:16.630

我无法理解您的代码，但根据您的定义：

对于这些整数中的每一个，我需要找到一个两位数长的除数（整数也是如此）

试试这个：

```
numbers = [22,33]
numbers.map do |n|
  raise "invalid number" if n < 10
  div = 10.0
  div += 1 while (n%div) != 0
  div
end
#result: [11,22] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:34:26.830

作为@fotanus，我无法理解您的代码，但是在回答您的问题时，我不久前使用此代码来查找除数：

```
require 'prime'

def divisors_for(n)
  n.prime_division.map do |n,mp|
    (0..mp).map { |i| n**i }
  end.inject([1]) do |a, factor_group|
    a.product(factor_group)
  end.map do |factors|
    factors.flatten.reduce(:*)
  end - [n]
end

[22, 23].map do |n|
  divisors_for(n).select { |d| d.to_s.size == 2 }
end 
```

# java - TextArea 多色文本

> ID：15692623
> 
> 赞同：1
> 
> 时间：2013-03-28T21:36:23.583
> 
> 标签：java, syntax-highlighting

对于我的应用程序，我将在文本框中突出显示语法。我不确定的是如何在一个盒子里做多色而不是只用一种颜色。

我知道我可以做到这一点，但它会将所有文本设置为一种颜色。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ssccee;

import java.awt.Color;
import java.awt.Font;
import javax.swing.JFrame;
import javax.swing.JTextArea;

/**
 *
 * @author ryannaddy
 */
public class Sscce extends JFrame{

    JTextArea txt = new JTextArea();

    public Sscce(){

        setLayout(null);

        txt.setBounds(3, 3, 300, 200);
        add(txt);

        Font font = new Font("Verdana", Font.BOLD, 12);
        txt.setFont(font);
        txt.setForeground(Color.BLUE);

        txt.setText("\n \n JTextArea font & color change example");
    }

    public static void main(String[] args){

        Sscce jtxt = new Sscce();
        jtxt.setSize(313, 233);
        jtxt.setTitle("JTextArea font & color settings");
        jtxt.show();

    }
} 
```

那么，我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:07:56.643

A`JTextArea`是纯文本组件。它可以显示不同字体的文本，但所有文本都使用相同的字体。你会想要使用类似[JSyntaxPane](http://code.google.com/p/jsyntaxpane/)的东西。

> 一个非常易于使用和扩展的 JEditorKit，支持几种语言。主要目标是让外观漂亮的 Java Swing 编辑器变得容易，并支持语法突出显示。

# visual-c++ - 如何在 Visual C++ 6 中向我的项目添加新类

> ID：15692624
> 
> 赞同：0
> 
> 时间：2013-03-28T21:36:24.690
> 
> 标签：visual-c++

我想使用类向导向我的 Visual C++ 6 项目添加一个新类。我不希望这个类继承任何东西。我的班级有一个函数可以接受输入为整数，并对其进行处理

类向导要求我添加一个基类和一个 DialogID 。我应该选择哪一个基类和对话框 ID？我是一名 C# 开发人员，发现它真的很烦人。我应该手动添加我的课程吗？我如何在 Visual C++ 6 中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:59:56.257

不要使用`Class Wizard`（用于创建可视对话框，这就是它需要对话框 id 的原因）。

`Project->Add`从菜单中使用。您可以将其他几种不涉及可视对话框的内容添加到项目中，例如标头 ( `.h`) 和源代码 ( `.cpp`) 文件。

# c# - 使用 Linq、实体框架和数据库索引进行正确搜索

> ID：15692627
> 
> 赞同：4
> 
> 时间：2013-03-28T21:36:56.067
> 
> 标签：c#, .net, linq, entity-framework, database-design

我需要通过数据库中的产品搜索产品，并且我希望以正确的方式进行设置，以便在有很多行（1,000,000）时能够获得可靠的性能。我对 LINQ 和 EF 有一定的经验，但从未编写过任何搜索算法，并且我有以下代码，但只是有一些挥之不去的问题。

```
context.products.Where(i => i.Name.ToLower().Contains(searchText.ToLower()); 
```

我还需要搜索描述。

```
context.products.Where(i => i.Description.ToLower().Contains(searchText.ToLower()); 
```

1.  `.ToLower()`在这种情况下会降低性能吗？

2.  我有一个关于描述的常规`Name`索引`FullText`？这是否合适，并且常规索引是否可以很好地使用`.contains()`？

3.  我应该使用 LINQ 还是其他方法？

4.  有没有办法做到这一点，我可以获得搜索文本在名称/描述中出现的次数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:50:37.557

就我而言，我不想使用存储过程。我正在使用实体框架，这就是我想要使用的！

看看这个方法对你有没有帮助。

```
 public static IQueryable<T> LikeOr<T>(this IQueryable<T> source, string columnName, string searchTerm)
    {
        IEnumerable<string> words =
            searchTerm.Split(new[] {" "}, StringSplitOptions.RemoveEmptyEntries).Where(x => x.Length > 1);

        var sb = new StringBuilder();
        for (int i = 0; i < words.Count(); i++)
        {
            if (i != 0)
                sb.Append(" || ");

            sb.Append(string.Format("{0}.Contains(@{1})", columnName, i));
        }

        return source.Where(sb.ToString(), words.ToArray());
    } 
```

上述所有方法都会构建一个 SQL 字符串，然后将其传递给动态 LINQ Where 方法。在高层次上，所有这些都允许您仅在需要的地方使用直接的 sql，而不是用 SQL 编写整个查询。它被这样的东西调用：

```
 public List<Book> SearchForBooks(string phrase)
    {
        return _db.Books.Include(x=> x.Images).LikeOr("Title", phrase).OrderBy(x => x.Title)
            .Take(6).Select(x => x).ToList()
            .OrderByCountDescending("Title", phrase);
    } 
```

它是由 Microsoft 创建但未包含在框架中的动态 LINQ dll 实现的。[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)这将使您在某些方面更加灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:40:19.360

1.  请不要使用较低的，因为它会显着影响性能。
    使用以下方法之一：

    > StringComparison.OrdinalIgnoreCase
    > StringComparison.CurrentCultureIgnoreCase

2.  由于您使用的是包含，它将被翻译为“%text%”，因此 sql server 不太可能使用索引。如果实现全文搜索，则必须使用存储过程来利用全文搜索的优势。

3.  Linq 总是比手写的 sql 语句慢。我在[dapper.net 网站上看到了一些性能指标](https://code.google.com/p/dapper-dot-net/)

一般来说，如果您使用的是最新的实体框架，您应该会获得相当不错的性能，因为它们在版本 5 中有一些显着的性能改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T21:42:47.017

我会认真考虑编写一个存储过程来执行此操作，或者在 DbContext 中使用`SqlQuery`. 如果我正在编写这段代码，那就是我会做的。对我来说，EntityFramework 和 performant 从来没有真正走到一起。

# bash - bash 查找变量是否包含符号并将其转义

> ID：15692631
> 
> 赞同：0
> 
> 时间：2013-03-28T21:36:57.763
> 
> 标签：bash, sed

我为 Mac OS X 编写了一个 bash 脚本，它收集大量计算机信息并将其写入 MySQL 数据库。除了一件事，一切都很好。我收集的信息之一是计算机名称。大约 90% 的计算机的名称中可能都有撇号。问题是当我尝试将变量写入 MySQL 时，由于撇号而出错。

有没有办法找出变量是否包含撇号以及是否用转义字符重写变量？我确定我需要使用 sed，但我对此还是很陌生。

例如，如果我有以下变量：

```
COMPUTER_NAME="Fred Flintstone's MacBook Air" 
```

如何将变量更改为：

```
COMPUTER_NAME="Fred Flintstone\'s MacBook Air" 
```

我可以将它传递给我**需要**的 perl，但我宁愿将它保留在 BASH 中。

我也不想重命名这些计算机，因为它们有 300 多台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:42:21.673

这将转义尚未转义的撇号：

```
${COMPUTER_NAME/[^\\]\'/\\\'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:08:06.977

尝试这样做来逃避你想要的：

```
string="Hello, c'est bientôt l'été ?"
printf '%q\n' "$string" 
```

## 输出

```
$'Hello, c\'est bient\303\264t l\'\303\251t\303\251 ?' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:39:52.583

您可以使用带替换的参数扩展：

```
COMPUTER_NAME="${COMPUTER_NAME//\'/\'}" 
```

# c - 如何使用自定义引导加载程序加载外部代码？

> ID：15692634
> 
> 赞同：0
> 
> 时间：2013-03-28T21:37:05.437
> 
> 标签：c, assembly, operating-system

我正在编写自己的操作系统，到目前为止，我只能用汇编语言编写它，因为我真的不明白如何使用多种文件/语言来设置它。我以前写过带有可执行代码的引导加载程序，但我不明白的是**如何让引导加载程序知道自身之外的其他文件。**我如何能够在汇编中编写引导加载程序，然后告诉它加载，例如，用 C 语言编写的内核在不同的文件中？我是否必须将内核编译中的 .o 文件捆绑到 fdd 映像中并告诉引导加载程序加载/执行它们，还是比这更复杂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:36:22.750

由于看起来您正在尝试掌握系统的窍门，因此可能值得看看一些“较小的”嵌入式系统，以了解一旦加电/芯片复位后会发生什么。在此处查看 U-Boot：http: [//www.denx.de/wiki/U-Boot](http://www.denx.de/wiki/U-Boot)

它是一个非常流行的引导加载程序，尤其适用于嵌入式系统，并且可以启动各种操作系统。主线也支持大量不同的配置。我认为，如果您对 C 感到满意，那么在上电期间会发生什么是相对简单的。

要更具体地回答您的问题，例如使用 U-Boot，您可以将参数构建到 u-boot 映像中，以了解您将在何处加载代码，它可以在启动时从配置文件中读取映像文件的存储位置， u-boot 可以从您的网络某处自动加载配置，您甚至可以告诉 u-boot 从其命令行界面加载的位置和内容。看看你是否还有其他问题。

# jsf - JSF2 或 primefaces p:selectManyCheckbox 带有图标的样式

> ID：15692638
> 
> 赞同：3
> 
> 时间：2013-03-28T21:37:17.973
> 
> 标签：jsf, checkbox, primefaces, styling, selectmanycheckbox

一个问题是谁用图标设计了许多复选框？

```
<p:selectManyCheckbox value="#{Step4Bean.selectedItems}" id="tag-list" >
                        <f:selectItems value="#{Step4Bean.allItems}" var="item" itemLabel="#{item}" itemValue="#{item}"/>
                    </p:selectManyCheckbox> 
```

我有 6 个项目的复选框，我必须有 2 行，每行 3 个项目，每个项目附近必须有一个图标。我们如何解决这个问题？这是一个输出示例链接

[http://jpeg.am/images/?i=5692b9db7ea1d060bc7c97bcc788d6b8.jpg](http://jpeg.am/images/?i=5692b9db7ea1d060bc7c97bcc788d6b8.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-20T20:48:01.107

PF 已经有这个组件的网格布局。

```
<h3>Grid Layout</h3>
<p:selectManyCheckbox id="grid" value="#{checkboxView.selectedCities}" layout="grid" columns="3">
    <f:selectItems value="#{checkboxView.cities}" var="city" itemLabel="#{city}" itemValue="#{city}" />
</p:selectManyCheckbox> 
```

但是最新的 PF 5.2.3 和 5.3-SNAPSHOT 有自定义布局选项

```
<h3>Custom Layout (since v5.2.3)</h3>
<p:outputPanel id="customPanel" style="margin-bottom:20px">
    <p:selectManyCheckbox id="custom" value="#{checkboxView.selectedConsoles2}" layout="custom">
        <f:selectItem itemLabel="Xbox One" itemValue="Xbox One" />
        <f:selectItem itemLabel="PS4" itemValue="PS4" />
        <f:selectItem itemLabel="Wii U" itemValue="Wii U" />
    </p:selectManyCheckbox>

    <div class="ui-grid ui-grid-responsive">
        <div class="ui-grid-row">
            <div class="ui-grid-col-4">
                <p:checkbox id="opt1" for="custom" itemIndex="0" />
            </div>
            <div class="ui-grid-col-4">
                <p:checkbox id="opt2" for="custom" itemIndex="1" />
            </div>
            <div class="ui-grid-col-4">
                <p:checkbox id="opt3" for="custom" itemIndex="2" />
            </div>
        </div>
        <div class="ui-grid-row">
            <div class="ui-grid-col-4">
                <h:outputLabel for="opt1" value="Xbox One" />
            </div>
            <div class="ui-grid-col-4">
                <h:outputLabel for="opt2" value="PS4" />
            </div>
            <div class="ui-grid-col-4">
                <h:outputLabel for="opt3" value="Wii U" />
            </div>
        </div>
    </div>
</p:outputPanel> 
```

不确定最新功能如何以及是否可以与一个`<f:selectItems/>`或仅与多个`<f:selectItem/>`. 我怀疑后者

**另见：** - 见[http://www.primefaces.org/showcase/ui/input/manyCheckbox.xhtml](http://www.primefaces.org/showcase/ui/input/manyCheckbox.xhtml)

（取自 PF 展示柜的示例！）

# ios - iCloud 键值生命周期

> ID：15692647
> 
> 赞同：0
> 
> 时间：2013-03-28T21:37:47.300
> 
> 标签：ios, icloud, nsubiquitouskeyvaluestore

鉴于在卸载创建它们的应用程序时不会删除 iCloud 键值存储条目，那么何时删除数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:27:03.387

当应用调用`-[NSUbiquitousKeyValueStore removeObjectForKey:]`. 这可能包括所有数据，或仅部分数据。

当用户在“设置”（iOS 上）或“系统偏好设置”（Mac OS X 上，是的，即使它是仅限 iOS 的应用程序）的 iCloud 部分中删除数据时，数据将被*完全删除。*

# javascript - 使用 Require JS 扩展主干对象的正确方法

> ID：15692648
> 
> 赞同：0
> 
> 时间：2013-03-28T21:37:58.910
> 
> 标签：javascript, backbone.js, requirejs

我将requireJS与骨干结合使用：

```
define([

        "jquery",
        "underscore",
        "backbone",
        "models/modelA"

        ], function( $, _, Backbone, MyModel ) {

        var viewA = Backbone.View.extend({
            initialize: function() {
                 this.model = new MyModel();
            }
        });

        return viewA;

}); 
```

我想创建一个新的 View 模块 ViewB，它具有与 viewA 相同的所有方法，但使用不同的模型代替 modelA。我知道我可以重写初始化函数，但我想知道是否有更简洁的方法，以避免重复代码......

```
 define([

        "jquery",
        "underscore",
        "backbone",
        "views/viewA",
        "models/modelB"

        ], function( $, _, Backbone, ViewA, myModel ) {

        var viewB = ViewA.extend({
                initialize: function() {
                     this.model = new MyModel();
                }
        });

        return viewB;

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:43:08.680

```
define(['views/ViewA'], function() {
    var ViewA = require('views/ViewA'), // require ViewA
    ViewB = ViewA.extend({
        // add all your ViewB specific methods/properties here
    });

    return ViewB; // return ViewB from the RequireJS module so it can be used elsewhere
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T23:49:18.140

如果两个视图完全相同，只需传入实例化的模型，而不是在初始化中创建它。然后你只需要定义一个视图。

```
define([

        "jquery",
        "underscore",
        "backbone"
        // no model module needed here.

        ], function( $, _, Backbone ) {

        var viewA = Backbone.View.extend({
            initialize: function() {
            }
        });

        return viewA;

}); 
```

然后在其他一些`require`既是模型又是视图的模块中：

```
var modelA = new ModelA();
var modelB = new ModelB();
// create 2 instances of ViewA with different model passed in
var viewA = new ViewA({model: modelA});
var viewB = new ViewA({model: modelB}); 
```

当这样创建时，每个视图都将`this.model`设置为您传入的实例。

# c# - FacebookWebContext.Current 始终为空

> ID：15692649
> 
> 赞同：0
> 
> 时间：2013-03-28T21:38:01.273
> 
> 标签：c#, asp.net, facebook

我正在尝试编辑大约两年前编写的一些代码。基本上，它是 Facebook 连接，用户可以使用 Facebook 应用程序注册我的网站。我的 Facebook 连接 javascript 代码是：

```
<div id="fb-root"></div>

<script src="http://connect.facebook.net/tr_TR/all.js"></script>
<script>

    FB.init({ appId: '<%=Facebook.FacebookApplication.Current.AppId %>', status: true, cookie: true, xfbml: true });    

    FB.Event.subscribe('auth.login', function (response) {
        window.location.href = UrlAmpReplace('<%=this.FacebookLoginURL %>');
    });

    FB.Event.subscribe('auth.logout', function (response) {
        window.location.href = UrlAmpReplace('<%=this.FacebookLogoutURL %>');
    });

</script> 
```

如果用户单击 Facebook 按钮，则会出现一个 Facebook 弹出页面并要求进行身份验证和授权。在那之后，用户重定向我自己的注册页面，我使用`Facebook.Web.dll`如下：

```
 var fb = new FacebookWebClient(FacebookWebContext.Current);

 var result = (IDictionary<string, object>)fb.Get("/me");

 this.smFacebookUserID = FacebookWebContext.Current.Session.UserId; 
```

...做一些动作..

我的问题是； `FacebookWebContext.Current`总是返回 null，我无法进一步处理。你知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:15:52.587

我找到了解决问题的方法，我认为问题与我使用的 FB js 事件（auth.login）有关。所以这就是我所做的：

而不是以下 js 方法：

```
 FB.Event.subscribe('auth.login', function (response) {
        window.location.href = UrlAmpReplace('<%=this.FacebookLoginURL %>');
    }); 
```

我使用了以下内容：

```
 FB.Event.subscribe('auth.authResponseChange', function(response) {
    if (response.status === 'connected') {

       var accessToken = response.authResponse.accessToken;
       window.location.href = 'myURL.aspx?token='+accessToken;

    } 
}); 
```

然后在我的`myURL.aspx`，使用来自查询字符串的 accessToken，我可以到达：

```
var client = new FacebookClient(accessToken); 
```

# javascript - 使用 Colfusion/JavaScript/Other 进行网站使用跟踪

> ID：15692651
> 
> 赞同：5
> 
> 时间：2013-03-28T21:38:29.933
> 
> 标签：javascript, coldfusion

我们的网站开发团队在我们的 INTRAnet 上管理着许多网站（每个网站都有不同的虚拟 URL）。我们想要实现一些东西（代码片段），很容易添加 Application.cfm/OnRequestEnd.cfm 页面，该页面将在数据库中插入一条记录，跟踪页面、url、查询字符串、用户 ID 等 - 基本内容。插入记录没什么大不了的。我想知道的是从性能的角度来看，你们会推荐什么，以便我们不会在员工访问各个站点时遇到插入排队的瓶颈。我们不能使用 jQuery，因为不是每个站点都有相同版本的 jQuery，所以我们真的仅限于使用 Coldfusion——我想。

理想情况下，我们希望能够在我们的主服务器上创建一个主跟踪文件，并从我们所有其他站点引用该文件。然后，如果/当我们需要进行更新时，我们可以进行全局更改 - 有点像 Google Analytics 所做的那样，只是没有那么多细节。

在我们支持的所有网站上，我们的页面上都有我们的部门徽标。我考虑过在图像加载中建立一个跟踪过程，就像他们对电子邮件所做的那样。

如果您有更好的想法，对此的任何想法将不胜感激 - 我全神贯注。

**更新**
关于图像处理，我找不到来自 easycfm.com 的教程的原始链接，但我发现这里的代码似乎相同： [http ://www.experts-exchange.com/Software/Server_Software/Web_Servers/ ColdFusion/A_2386-Track-your-Emails-using-coldfusion.html](http://www.experts-exchange.com/Software/Server_Software/Web_Servers/ColdFusion/A_2386-Track-your-Emails-using-coldfusion.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T22:53:28.510

我会说你不应该尝试过早地优化它，直到你有理由这样做。如果你发现你在赛道上遇到了问题，那么你可以处理它。

创建一个 Logging CFC 并实现一个方法，该方法接收您希望记录的指标，然后将其包装成一条记录以插入数据库，并用于`<cfquery>`将它们写入数据库表。从 OnRequestEnd.cfm 调用函数。

我特别建议将其滚动到 Logging CFC 中，因为如果您以后需要更改日志记录方式的实现，您可以只更改日志记录方法的内部工作原理，而不必弄乱您的所有站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:30:02.480

亚当卡梅隆的回答可能是你应该走的路。最重要的是，我建议将这些记录插入没有附加索引的表中。这将导致插入非常快。然后，您可以使用计划的数据库作业将这些数据移动到一个可以快速分析的规范化模式中。

我不会因为每个站点都有不同版本的 JQuery 就放弃使用 JavaScript。在 JQuery 存在之前，人们仍然能够完成工作，它只是一个 JavaScript 库。动态包含一个脚本文件是非常基本的 JavaScript，该脚本文件使用相关参数指向您的跟踪文件。

```
<script type="text/javascript">
    var script = document.createElement("script");
    var body = document.getElementsByTagName("body")[0];
    script.setAttribute("src", "http://www.yourdomain.com/trackingfile.cfm?" + yourparams);
    body.appendChild(script);
</script> 
```

如您所见，不需要 JQuery。

# visual-paradigm - 视觉范式在同一个项目中的两个数据库

> ID：15692657
> 
> 赞同：0
> 
> 时间：2013-03-28T21:38:57.960
> 
> 标签：visual-paradigm

如何在 Visual Paradigm 10 的同一个项目中拥有两个数据库？现在我为每个数据库创建了两个**实体关系图一个。**

问题是当我转到**工具 > 数据库 > 生成**时，我只能选择一个特定的数据库，并且两个图表都应用于它。

我希望每个文件都应用于它自己的数据库。

![在此处输入图像描述](../Images/a50c555caa7bc4ac7ddc3402bd820cfb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:49:22.177

Visual Paradigm 可以为项目定义多个数据库（每个 DBMS 一个），但任何实例都只会选择一个（默认的）用于代码/DDL 生成。在一个项目中，所有模型都应该在同一个数据库中。我建议您可以将您的请求发送给 Visual Paradigm 的支持团队 (support@visual-paradigm.com)，详细讨论您的使用情况，看看他们如何提供帮助。

# java - 将“隐形”字符更改为字母，刽子手游戏

> ID：15692659
> 
> 赞同：0
> 
> 时间：2013-03-28T21:39:11.037
> 
> 标签：java, methods, character, hidden

所以在我的程序中，我试图将几个不同的类合并到我正在编写代码的主程序中。

我得到了什么

```
 Dictionary() {
        dictionary = new String[NUMBER_OF_WORDS];
        Scanner inputStream = null;
        try {
            inputStream = new Scanner(new File(FILE_NAME));
        }catch (FileNotFoundException e) {
            System.out.println("Dictionary class cannot find file \"dictionaryData.txt\".");
            System.out.println("Please make sure that the file is in the project folder.");
            System.exit(0);
        }
        for (int i = 0; i < NUMBER_OF_WORDS; i++) {
            dictionary[i] = inputStream.next();
        }
    }

    public String getRandomWord(){
        Random generator = new Random();
        String temp = new String();
        temp += dictionary[generator.nextInt(NUMBER_OF_WORDS)];
        return temp;
    }

    public boolean find(String word) {
        int count = 0;
        int lowerIndex = 0;
        int upperIndex = NUMBER_OF_WORDS - 1;
        int middleIndex;
        while(lowerIndex <= upperIndex){
            middleIndex = (lowerIndex + upperIndex) / 2;
            count++;
            if(word.equalsIgnoreCase(dictionary[middleIndex])) { // found it
                return true;
            }
            else if (word.compareToIgnoreCase(dictionary[middleIndex]) < 0) { // word smaller than middle
                upperIndex = middleIndex - 1;
            }
            else { // word is larger than middle
                lowerIndex = middleIndex + 1;
            }
        }
        return false;
    }
} 
```

连同另一个类 WordHider

```
 WordHider() {
        secretWord = new String();
        wordMask = new String();
    }

    public String getWordMask() {
        return wordMask;
    }

    public String getSecretWord() {
        return secretWord;
    }

    public void setSecretWord(String newSecretWord) {
        secretWord = newSecretWord.toLowerCase();
        if (secretWord.length() > 0) {
            wordMask = HIDE_CHAR;
            for (int i = 1; i < secretWord.length(); i++) {
                wordMask += HIDE_CHAR;
            }
        }
    }

    public boolean isHiddenWordFound() {
        for (int i = 0; i < wordMask.length(); i++) {
            if(wordMask.charAt(i) == HIDE_CHAR.charAt(0)) {
                return false;
            }
        }
        return true;
    }
    public int revealLetter(String letter) {
        int count = 0;
        String newFoundWord = "";
        if (letter.length() == 1) {
            for (int i = 0; i < secretWord.length(); i++) {
                if ((secretWord.charAt(i) == letter.charAt(0))
                        && (wordMask.charAt(i) == HIDE_CHAR.charAt(0))) {
                    count++;
                    newFoundWord += letter;
                }
                else {
                    newFoundWord += wordMask.charAt(i);
                }
            }
        }
        wordMask = newFoundWord;
        return count;
    }
} 
```

并使用这些类，我必须想出如下代码：

```
Word: **********   Guesses Left: 5
Enter your guess: a
Miss!
Word: **********   Guesses Left: 4
Enter your guess: e
Miss!
Word: **********   Guesses Left: 3
Enter your guess: i
Word: i**i*i****   Guesses Left: 3
Enter your guess: o
Word: i**i*i*o**   Guesses Left: 3 
```

我有几个关于这个的问题，

> 1）我有一个dictionaryData.text，我必须在我的代码中实现它。它包含一个 81,000 个单词的列表，我不确定如何让我的程序在那里识别它。字典类找不到文件“dictionaryData.txt”。请确保该文件位于项目文件夹中。^ 当我尝试打印一个随机单词时出现该错误
> 
> 2）如何让我的程序将单词的字母更改为星号（隐藏单词）
> 
> 3）把它全部放在一个循环中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:58:20.740

缺少 Dictionary 类和 WordHider 类的部分内容。不过，我会尽力回答你的问题。

1）就像我说的，你缺少 Dictionary 类的一部分。你像这样合并这个类：

```
Dictionary dictionary = new Dictionary();
String word = dictionary.getRandomWord(); 
```

2）像这样：

```
wordHider.setSecretWord(word); 
```

3）我不确定“它”是什么，但是是的，您的用户必须猜测一个字母。然后你必须检查字母是否在单词中。像这样：

```
wordHider.revealLetter(letter); 
```

然后你必须显示这个词，让用户猜另一个字母。这个猜测/检查/显示必须在一个循环中。

# c++ - 通过 using 声明为函数加好友是否合法？

> ID：15692660
> 
> 赞同：5
> 
> 时间：2013-03-28T21:39:12.457
> 
> 标签：c++, language-lawyer

以下[（此处为 LiveWorkspace）](http://liveworkspace.org/code/2NVszT)被 GCC 4.7.2、GCC 4.8.0 和 ICC 13.0.1 拒绝。

```
namespace A {
    namespace B {
        void C();
    }
    using B::C;
}

class D {
    friend void A::C();
}; 
```

此外，它会使 Clang 3.2 (!) 崩溃。我已经为崩溃错误提交了错误报告和[补丁](http://lists.cs.uiuc.edu/pipermail/cfe-commits/Week-of-Mon-20130318/076411.html)，但我不能 100% 确定这段代码是否真的有错误，因为我在**§7.3.3 [namespace.udecl]**或**§11.3 [class.friend]**明确解决了这种情况，但也许在我错过的各种名称说明符术语之一的定义中有些东西。

此外，似乎所有四个编译器都接受以下内容[（此处为 LiveWorkspace）](http://liveworkspace.org/code/2rWG6L)：

```
namespace A {
    namespace B {
        class C;
    }
    using B::C;
}

class D {
    friend class A::C;
}; 
```

这两个案例似乎没有什么根本不同，所以我很好奇 GCC 和 ICC 拒绝第一个例子但不是这个例子的理由是什么，如果有的话。任何更熟悉该标准的人都可以找到解决此问题的任何内容吗？

这绝对是一个小问题，但由于我正在修补它，我想确保我做的是正确的事情......

**编辑**：[现在在 clang/trunk 中进行了修补！](http://lists.cs.uiuc.edu/pipermail/cfe-commits/Week-of-Mon-20130401/077351.html)

**新编辑**：Johannes 在下面的回答解释了为什么我的原始示例被拒绝，但似乎没有解释为什么 GCC 和 ICC 也拒绝以下内容[（此处为 LiveWorkspace）](http://liveworkspace.org/code/OZOR5)：

```
namespace A {
    namespace B {
        void C();
    }
    using B::C;

    class D {
        friend void C();
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:45:57.957

8.3p1：

> 当 declarator-id 被限定时，声明应引用限定符所指的类或命名空间的先前声明的成员（或者，在命名空间的情况下，该命名空间的内联命名空间集合的元素（7.3 .1)) 或其专业化；**该成员不应仅由声明符 id 的嵌套名称说明符指定的类或命名空间范围内的 using 声明引入。**

A `class foo;`or`class foo::bar;`不包含 declarator-id，因此不受此规则的影响。相反，它`foo::bar`是详细类型说明符（7.1.6.3）的一部分。

# string - 在iis7上重写字符串查询规则

> ID：15692661
> 
> 赞同：0
> 
> 时间：2013-03-28T21:39:24.473
> 
> 标签：string, iis-7, web-config, translate

我正在运行 IIS7 的服务器上的基于 WordPress 的网站上设置 S2Members，并且需要更改一些设置以允许将受限文件下载给成员。

为此，我需要将此规则从 apache .htaccess 转换为 iis7 web.config。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} (^|\?|&)s2member_file_download\=.+ [OR]
RewriteCond %{QUERY_STRING} (^|\?|&)no-gzip\=1
RewriteRule .* - [E=no-gzip:1]
</IfModule> 
```

我做了一些实验，但最终导致网站崩溃，所以我认为最好在这里问一个真正知道他们在做什么的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:23:21.960

当提供查询字符串 no-gzip == 1 或其他 member_file_download... 条件时，上面的规则似乎试图禁用 GZIP 压缩。

要在 IIS 中使用 URL 重写来实现这一点，您需要在 web.config 中使用相同的逻辑，但使用它来覆盖/删除 Accept-Encoding 标头，以便服务器看不到“接受编码 gzip/deflate”告诉它压缩。

所以有两个步骤：
首先，在 \windows\system32\inetsrv\config\ApplicationHost.config 中添加一个服务器变量设置，以便服务器允许覆盖服务器设置（您也可以在 UI 中使用服务器变量链接）。

```
 <system.webServer>
        <rewrite>
            <allowedServerVariables>
                <add name="HTTP_ACCEPT_ENCODING" />
            </allowedServerVariables>
        </rewrite>
    </system.webServer> 
```

然后你想在你的 web.config 中添加实际的重写规则，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="DisableGZIP">
                    <match url=".*" ignoreCase="false" />
                    <conditions logicalGrouping="MatchAny">
                        <add input="{QUERY_STRING}" pattern="(^|\?|&amp;)s2member_file_download\=.+" ignoreCase="false" />
                        <add input="{QUERY_STRING}" pattern="(^|\?|&amp;)no-gzip\=1" ignoreCase="false" />
                    </conditions>
                    <action type="None" />
                    <serverVariables>
                        <set name="HTTP_ACCEPT_ENCODING" value="" />
                    </serverVariables>
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

这应该有效，要对其进行测试，您可以将查询字符串 ?no-gzip=1 传递给任何 URL，并且您不应将它们压缩。

# jquery - 拖放区域受限

> ID：15692662
> 
> 赞同：2
> 
> 时间：2013-03-28T21:39:28.163
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-draggable

这是我第一次尝试使用拖放控件，但我在弄清楚它是如何工作的时候遇到了问题。目前我有两个 DIV，我想将元素从一个 div 移动到另一个。使用可拖动允许我将 DIVS 放置在我不想要的任何地方，我想限制元素可拖动的区域。

另一方面，我看过 jquery UI 示例，它们都与 droppable 元素交互，但我需要从 draggable 元素中获取 id 属性。这是我到目前为止所做的，现在我不仅无法让 div 保持在他们应该在的有限区域内，而且我也无法获得可拖动元素的 Id 属性。

任何帮助，将不胜感激。谢谢。

[http://jsfiddle.net/LPWhc/1/](http://jsfiddle.net/LPWhc/1/)

```
$(function() {
  $(".draggable").draggable();
  $(".droppable").droppable({
    drop: function(event, ui) {
      var id, state;
      state = $(this).attr("name");
      id = $(this).closest(".droppable").attr("id");
      alert("Element Id: " + id);
      alert("Element New State: " + state);
    }
  });
}); 
```

**这是一个更新的小提琴，它显示了我现在遇到的可拖动效果的错误。 [http://jsfiddle.net/LPWhc/3/](http://jsfiddle.net/LPWhc/3/)**

```
$(function() {
    $(".draggable").draggable({ revert: 'invalid'});

    $(".droppable").droppable({
        accept: '.draggable',
        drop: function(event, ui) {
            $(this).append($(ui.helper));
            $(".draggable").addClass("item"); 
            $(".item").removeAttr("style");
            $(".item").draggable({
                revert: 'invalid'
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:14:41.507

**HTML：**

```
 <div name="list-a" class="droppable">
  <h3>List A</h3>
  <div class="task-wrapper">
      <div class="draggable" id="1" name="1">
          <a href="#">Element 1</a>
      </div>
      <div class="draggable" id="2" name="3">
          <a href="#">Element 2</a>
      </div>
      <div class="draggable" id="3" name="3">
          <a href="#">Element 3</a>
      </div>
  </div>
</div>
<div name="list-b" class="droppable">
  <h3>List B</h3>
  <div class="task-wrapper">
      <div class="draggable" id="5" name="5">
          <a href="#">Element 5</a>
      </div>
      <div class="draggable" id="6" name="6">
          <a href="#">Element 6</a>
      </div>
  </div>
</div> 
```

**jQuery：**

```
$(document).ready(function(){
    $( ".draggable" ).draggable({
    start: function( event, ui ) {
        var id = $(this).closest(".draggable").attr('id');
    }
});

$( ".droppable" ).droppable({
    accept: '.draggable',
    drop: function(event, ui){
        var id = ui.draggable.attr("id");
        alert(id);  
    }
    });
}); 
```

# solr - Solr DataImport“无法执行查询”

> ID：15692665
> 
> 赞同：0
> 
> 时间：2013-03-28T21:39:32.950
> 
> 标签：solr, tomcat6

我正在尝试通过 /dataimport?command=full-import 导入数据库。这是（我理解的）相关信息：

在 Xubuntu 12.04 上使用 Solr Tomcat6 我最初通过 apt-get install solr-tomcat 安装了 solr 我通过 service tomcat6 start 运行 solr

Solr 规范版本：3.6.1.2012.09.06.10.36.26 Solr 实现版本：3.6.1 debian - buildd - 2012-09-06 10:36:26 Lucene 规范版本：3.6.1 Lucene 实现版本：3.6.1 debian - buildd - 2012-09-06 10:34:37 当前时间：2013 年 3 月 28 日星期四 14:13:45 PDT 服务器开始时间：2013 年 3 月 28 日星期四 13:41:30 PDT

我的数据-config.xml：

```
 <dataConfig>
     <dataSource type="JdbcDataSource"
        driver="org.postgresql.Driver"
        url="jdbc:postgresql://<ip>:<port>;databaseName=<myDB>"
        user="<user>"
        password="<password>"
        readOnly="True"/>

     <document>
      <entity name="library" query="<query that works everywhere but via solr for 'id' and 'value'>">
       <field column="id" name="id" />
       <field column="value" name="title" />
      </entity>
     </document>
    </dataConfig> 
```

日志：

```
 Mar 28, 2013 1:41:36 PM org.apache.solr.common.SolrException log
    SEVERE: Full Import failed:java.lang.RuntimeException: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: SELECT id, value FROM pg_evergreen.metabib.title_field_entry Processing Document # 1
         at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:264)
         at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:375)
         at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:445)
         at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:426)
    Caused by: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: SELECT id, value FROM pg_evergreen.metabib.title_field_entry Processing Document # 1
         at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:621)
         at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:327)
         at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:225)
         ... 3 more
    Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: SELECT id, value FROM pg_evergreen.metabib.title_field_entry Processing Document # 1
         at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72)
         at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.<init>(JdbcDataSource.java:253)
         at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:210)
         at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:39)
         at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59)
         at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73)
         at org.apache.solr.handler.dataimport.EntityProcessorWrapper.pullRow(EntityProcessorWrapper.java:330)
         at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:296)
         at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:683)
         at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:619)
         ... 5 more
    Caused by: java.lang.NullPointerException
         at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.<init>(JdbcDataSource.java:241)
         ... 13 more

    Mar 28, 2013 1:41:36 PM org.apache.solr.update.DirectUpdateHandler2 rollback
    INFO: start rollback
    Mar 28, 2013 1:41:36 PM org.apache.solr.update.DirectUpdateHandler2 rollback
    INFO: end_rollback 
```

我试过了：

*   data-config.xml 中的 batchSize（从 -1 到 1000）、readTimeout（从 60000 到 120000）和 ReadOnly 的变化
*   创建了许多以前会发出“警告”的文件和文件夹（如此[处](https://stackoverflow.com/questions/9011480/dataimporthandlerexception-unable-to-execute-query)及以后所建议的）
*   确保查询在此实例之外有效，并且我的所有数据库信息都是准确的
*   搜索“'无法执行查询'数据导入”时，谷歌搜索并尝试了前 3 页中的所有内容（这似乎有点帮助）
*   重新安装并重新校准了几次 solr，尝试使用 jetty 和 jboss 以及各种版本的 solr 运行

关于为什么 dataimport 无法执行我的查询的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:34:08.007

正如[arun](https://stackoverflow.com/users/1333610/arun)所建议的，我将我的 URL 语法更改为`url="jdbc:postgresql://<IP>:<PORT>/<DATABASE>`并且它有效！

# javascript - T恤图片悬停（根据颜色不同）

> ID：15692669
> 
> 赞同：0
> 
> 时间：2013-03-28T21:40:06.600
> 
> 标签：javascript, jquery, image, hover

所以我看到了一些jquery悬停效果，但没有一个可以做多项选择悬停。基本上我有 5 种 T 恤颜色选择，当每一种都悬停在上面时，它应该会弹出当前（绿色 T 恤）所在的位置。

继承人链接 - [http://musclefire.com/26.php](http://musclefire.com/26.php)

注意：此页面上还会有其他 T 恤样式，因此不确定这是否会导致代码/复杂性过多而无法正常工作。

ps - 谁钉它并获得完美的代码，我会送出一个免费的发球台给你！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:04:22.203

我很确定这就是你要找的东西：

> ### 演示：[http ://plnkr.co/edit/jiNxcw9nHQD5gV4vvwlj?p=preview](http://plnkr.co/edit/jiNxcw9nHQD5gV4vvwlj?p=preview)

### HTML

```
<div id="main">
    <img class="active" src="http://musclefire.com/gear/muskull-green.png" />
    <img src="http://musclefire.com/gear/muskull-red.png" />
    <img src="http://musclefire.com/gear/muskull-blue.png" />
    <img src="http://musclefire.com/gear/muskull-charcoal.png" />
    <img src="http://musclefire.com/gear/muskull-yellow.png" />
</div>
<div id="thumbs">
    <img src="http://musclefire.com/gear/muskull-green.png" />
    <img src="http://musclefire.com/gear/muskull-red.png" />
    <img src="http://musclefire.com/gear/muskull-blue.png" />
    <img src="http://musclefire.com/gear/muskull-charcoal.png" />
    <img src="http://musclefire.com/gear/muskull-yellow.png" />
</div> 
```

### CSS

```
#main {
    border: solid 1px #eee;
    text-align: center;
}
#thumbs {
    border: solid 1px #eee;
    text-align: center;
}
#main img {
    width: 300px;
    display: none;
}
#main img.active {
    display: inline-block;
}
#thumbs img {
    width: 50px;
    height: auto;
} 
```

### jQuery

```
$(function(){
   $('#thumbs img').bind('hover', function(){
      var which = $(this).attr('src');
      $("#main img:visible").hide();
      $('#main img[src="' + which +'"]').stop().fadeIn(800);
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:59:55.540

我只知道你不能用 css 做到这一点。因此，您应该为此使用**javascript**或**jquery**。使用 CSS 执行此操作的唯一方法是，如果要影响的元素是后代元素或相邻兄弟元素。

例如：

```
.parent:hover .child{}
.child{}

<div class="parent">
    <div class="child"></div>
</div> 
```

你可以用jquery做你想做的事，

现场演示：http: [//jsfiddle.net/XUM8R/](http://jsfiddle.net/XUM8R/)

# php - 在 else 中创建错误

> ID：15692670
> 
> 赞同：1
> 
> 时间：2013-03-28T21:40:10.890
> 
> 标签：php, javascript, html

基本上我想添加最后一个验证，如果在项目页面上没有选择任何内容，则会出现错误或用户返回到另一个页面。

选择提交后，表单操作将其发送到确认页面并执行以下操作，如果输入 1 个或多个 if ($partno == $varname & $qty > 0) 但我不知道要做什么，则显示所选项目放入 else 部分以返回错误或将用户带回上一页。

```
<?php
            $visitor = $_POST['visitor'];
            echo "<p>" . 'Hello ' . "<b>" . $visitor . "</b>&nbsp;" . 'please confirm your purchase(s) below.' . "</p>";

            if (!($data = file('items.txt'))) {
                echo 'ERROR: Failed to open file! </body></html>';
                exit;
            }
            $total = 0;
            foreach ($_POST as $varname => $varvalue) {
                $qty = $varvalue;
                foreach ($data as $thedata) {
                    list($partno, $name, $description, $price, $image) = explode('|', $thedata);
                    if ($partno == $varname & $qty > 0) {
                        echo "<tr><td><img src='$image' width='50' height='50' alt='image'</td>
                        <td>$partno<input type='hidden' name='$partno' value=$partno></td><td>$name</td><td>&pound;$price</td>
                            <td>&nbsp;&nbsp;&nbsp;&nbsp;$qty</td><td><input type='hidden' name='visitor' value=$visitor></td>
                                <td><input type='hidden' name='qty' value=$qty></td></tr>";
                        $total = $total + $price * $qty;
                    } else {

                    }
                }
            }
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:00:38.637

在 If 语句中抛出异常，然后将数据放入 try/catch 块中，因此如果发生错误，它将捕获异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:58:23.073

你会有这样的事情：

```
$errors = array();
foreach(...) {
   if ($partno == $varname & $qty > 0) {
      ... code for "ok" stuff
   } else {
      $errors[] = "$partno is incorrect";
   }
}
if (count($errors) > 0) {
    die("Errors: " . implode($errors));
}
... proceed to "success" code ... 
```

基本上，对于每个失败的测试，您都会记录一条消息。循环退出后，如果有任何错误消息，则显示它们并中止处理。如果没有错误，则继续执行其余代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:00:26.590

为什么不使用 try catch 块？

```
try {
    if (isset($_POST)) {

      if (!$email) {
          throw new Exception('email is not valid', 100);
      }

      // everything is good process the request
    }

    throw new Exception('Error!', 200);
} catch (Exception $e) {
    if ($e->getCode == 200) {
       // redirect
    } else {
       // do something else
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T22:13:24.657

考虑以下方法：表单和用于处理表单数据的 php 代码都在同一页面上。如果表单已发布，您将首先检查表单是否正常，然后您将对提交的数据进行处理。如果表单无效，则显示错误消息。

优点是：代码中间没有 die()，没有奇怪的重定向，一切都在一个脚本中。

```
// simplified code in example.php
<?php

// in this variable we'll save success/error messages to print it
$msg = "";

// run this php code if the form was submitted
if(isset($_POST['submit'])) {

  // is the form valid? 
  if (strlen($_POST['username']) == 0) {
        $msg = "Please enter a username";
  } 
  else {
        // all validation tests are passed, give the user a nice feedback
       // do something with the data, e.g. save it to the db
       $msg = "Your data was saved. Have a great day";
  }
}

?>

<div class="msg"><?php print $msg; ?></div>

<form method="post">
<input type="text" name="username">
<input type="submit" name="submit" value="Submit">
</form> 
```

# c# - 如果参数超出范围，DrawLine 的行为是否可以预测？

> ID：15692674
> 
> 赞同：0
> 
> 时间：2013-03-28T21:40:22.767
> 
> 标签：c#, visual-c#-express-2010

DrawLine 可以处理定义区域之外的坐标吗？

例如`myGraphics.DrawLine(MyPen, -20, -80, 20, 90);`

我希望这能正确生成一条线，就好像它使用了无限画布但只绘制了我图形中的部分。

我的代码如下。我正在根据数据库中记录的坐标绘制运动。有时，主体移动得比预期的更远，超出了我的位图边缘。我没有检查这种情况，因为我依靠 DrawLine 来处理它。

```
Bitmap Border = new Bitmap(5000, 5000);
Border.SetResolution(254, 254);

Graphics MyGraphics= Graphics.FromImage(Border);
Pen MyPen = new Pen(Color.Black, 1);

for (Int32 Point = 1; Point <= Points; Point++)
{
   XCoord2 = XCoord1;
   YCoord2 = YCoord1;
   XCoord1 = *READ FROM DATABASE*
   YCoord1 = *READ FROM DATABASE*

   if (Point > 1)
   {
        MyGraphics.DrawLine(MyPen, XCoord1, YCoord1, XCoord2, YCoord2);
   }
} 
```

实际上，我的情节大部分时间都有效。但是，我确实偶尔会看到缺少线条或源自奇怪坐标的模糊线条的图形。

总之，DrawLine 的行为应该可以用不寻常的参数来预测。我应该引入一些三角函数来强制绘图始终在我的网格内吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:50:42.630

实际限制是十亿个正数或负数，请参阅这个过去的问题（使用 .net ）

[在 GDI+ 中绘制坐标的硬边界是什么？](https://stackoverflow.com/questions/3468495/what-are-the-hard-bounds-for-drawing-coordinates-in-gdi)

我的猜测是您的数据库拉取错误，如果您使用字符串数据存储并强制对其进行解析，则可能会发生这种情况。

添加一个 thread.sleep() 并让它 Debug.WriteLine 新的拉动（或只是断点的东西），可能有一个奇怪的值或被奇怪地解析的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:46:03.467

经过更多的实验，我终于解决了我的问题......

```
SolidBrush WhiteBrush = new SolidBrush(Color.White);
myGraphics.FillRectangle(WhiteBrush,0,0,5000,5000); 
```

即，在我画任何线条之前，我给我的图形一个纯白色背景。在我在 NULL 背景上画一条黑线之前。我不知道为什么这会影响任何事情，但确实如此！

# jquery - Ajax 表单提交在 joomla 2.5.9 中不起作用

> ID：15692678
> 
> 赞同：1
> 
> 时间：2013-03-28T21:40:49.450
> 
> 标签：jquery, ajax, joomla2.5

我的弹出窗口中有一个注册表单。提交表单后，我需要在弹出窗口本身中显示我的服务器端错误。为此，我使用了ajax。但是成功消息正在进入 ajax 成功函数，并且页面正在重定向到其他页面。请帮助我处理我的 ajax 功能。在这里，我发布我的代码

```
jQuery(document).ready(function(){
    jQuery("#login-form").validate({
    //var formToken = jQuery(".form_token").val();

        submitHandler: function(form){
        var form_data = jQuery("#login-form").serialize();
        jQuery.ajax({
            method:"post",
            url:"index.php?option=com_users&task=registration.register&"+<?php echo JUtility::getToken(); ?>+"=1",
            data:form_data,
            dataType:html,
            success:function(res){
            alert(res)
                if( res == 1 ){
                    jQuery("#form_msg").val(res);
                }
            }
        })
        }
    }); 
```

请尽快回复我..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:44:33.697

经过长时间的搜索，我找到了我的问题的解决方案 [http://extensions.bowthemes.com/bt-login.html](http://extensions.bowthemes.com/bt-login.html) 使用这个模块..这将有助于在 joomla 2.5.9 中使用 ajax 创建注册玩得开心:)

# scala - 类型不匹配; 发现：scala.concurrent.Future[play.api.libs.ws.Response] 需要：play.api.libs.ws.Response

> ID：15692681
> 
> 赞同：5
> 
> 时间：2013-03-28T21:41:01.033
> 
> 标签：scala, playframework, future, playframework-2.1

我正在尝试向 Pusher api 发出发布请求，但我无法返回正确的类型，我的类型不匹配；发现：scala.concurrent.Future[play.api.libs.ws.Response] 需要：play.api.libs.ws.Response

```
def trigger(channel:String, event:String, message:String): ws.Response = {
val domain = "api.pusherapp.com"
val url = "/apps/"+appId+"/channels/"+channel+"/events";
val body = message

val params = List( 
  ("auth_key", key),
  ("auth_timestamp", (new Date().getTime()/1000) toInt ),
  ("auth_version", "1.0"),
  ("name", event),
  ("body_md5", md5(body))
).sortWith((a,b) => a._1 < b._1 ).map( o => o._1+"="+URLEncoder.encode(o._2.toString)).mkString("&");

    val signature = sha256(List("POST", url, params).mkString("\n"), secret.get); 
    val signatureEncoded = URLEncoder.encode(signature, "UTF-8");
    implicit val timeout = Timeout(5 seconds)
    WS.url("http://"+domain+url+"?"+params+"&auth_signature="+signatureEncoded).post(body
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:51:03.973

您发出的请求`post`是异步的。该调用立即返回，但不返回`Response`对象。相反，它返回一个对象，一旦异步完成 http 请求，该对象`Future[Response]`将包含该对象。`Response`

如果要在请求完成之前阻止执行，请执行以下操作：

```
val f = Ws.url(...).post(...)
Await.result(f) 
```

[在这里](http://docs.scala-lang.org/overviews/core/futures.html)查看更多关于期货的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T21:50:52.267

只需附加一个`map`：

```
WS.url("http://"+domain+url+"?"+params+"&auth_signature="+signatureEncoded).post(body).map(_) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T22:11:04.043

假设您不想创建阻塞应用程序，您的方法也应该返回一个`Future[ws.Response]`. 让你的 future 冒泡到你返回`AsyncResult`using的 Controller`Async { ... }`并让 Play 处理剩下的事情。

控制器

```
def webServiceResult = Action { implicit request =>
  Async {
    // ... your logic
    trigger(channel, event, message).map { response =>
      // Do something with the response, e.g. convert to Json
    }
  }
} 
```

# ruby - png 图像没有嵌入到 HTML 输出中

> ID：15692682
> 
> 赞同：0
> 
> 时间：2013-03-28T21:41:05.500
> 
> 标签：ruby, cucumber

我使用以下代码更改了 html“格式化程序”以嵌入我的图像：

```
@builder.div(:id => 'image') do
   @builder << '<div style="float:center";><img SRC="/home/abc/cert-image.png" ALT="Image"> </div>'
 end 
```

HTML 文件具有以下标记，但 HTML 页面内没有编码图像。

```
div id="image"><div style="float:center";><img SRC="/home/abc/cert-image.png" ALT="Image"> 
```

现在，如果我在浏览器（Chrome）中打开它，它不会显示图像。如果我在本地笔记本电脑上更改上面的路径并指向图像，它就可以工作（即正确显示）。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:47:43.337

`/home/abc/cert-image.png`是 HTML 文件的相对路径。html 或格式化程序没有任何问题，但您的路径可能是错误的。

尝试单击图像应该在的位置并在新窗口中打开图像的 URL。这将为您提供 img 标签指向的绝对 URL，您可以从那里修复/调试。

**编辑**

忽略这一点，我在您的格式化程序中发现了错误：

```
@builder.div(:id => 'image') do
  @builder << '<div style="float:center;"><img SRC="/home/abc/cert-image.png" ALT="Image" /> </div>'
end 
```

**编辑 2**

由于您只想使用数据 uri 对图像进行 base64 编码，因此可以执行以下操作：

```
require 'base64'

file = File.open("/home/abc/cert-image.png", "rb").read
b64 = Base64.encode64(file) 
```

然后在您的格式化程序中：

```
@builder.div(:id => 'image') do
  @builder << '<div style="float:center;"><img SRC="data:image/png;base64,' + b64 + '" ALT="Image" /> </div>'
end 
```

# javascript - facebook api 调用限制

> ID：15692689
> 
> 赞同：0
> 
> 时间：2013-03-28T21:41:50.013
> 
> 标签：javascript, asp.net-mvc, facebook, facebook-graph-api, xfbml

最近我们已经达到了 Facebook 的 api 调用限制。看起来非常过分的一件事是所有来自 fxbml 类似按钮的调用，有些页面上有多达 30 个类似按钮，它们在 html 中看起来像这样：

```
<fb:like href="..." ... /> 
```

并且对于每一个浏览器都会调用 Facebook，就像这样

```
https://www.facebook.com/plugins/like.php?api_key=11111111&locale=en_US& .... 
```

这个调用是因为，我假设无论用户是否已经喜欢该 url，Facebook 都会呈现一个不同的按钮。有谁知道 - 这些电话是否计入每个 AuthToken 允许您拨打的电话数量？

# ruby-on-rails-3 - 如果用户属性为真，Rails 3 发送邮件程序？

> ID：15692696
> 
> 赞同：0
> 
> 时间：2013-03-28T21:42:24.437
> 
> 标签：ruby-on-rails-3, devise, actionmailer

每当在我的 Rails 3 应用程序中创建新记录时，我都会发送一封电子邮件。

```
def new_resource_notification(resource)
  @resource = resource
  mail(:to => "admin@domain.com", :bcc => User.all.map(&:email), :subject => "New item added")
end 
```

**资源控制器**

```
# POST /resources
  # POST /resources.json
  def create
    @resource = Resource.create( params[:resource] )
    @resource.uploadedip_string = request.env['REMOTE_ADDR']

    respond_to do |format|
      if @resource.save

        UserMailer.new_resource_notification(@resource).deliver

        format.html { redirect_to @resource, notice: 'Resource was successfully created.' }
        format.json { render json: @resource, status: :created, location: @resource }
      else
        format.html { render action: "new" }
        format.json { render json: @resource.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我正在使用 Devise 进行用户身份验证，并添加了一个名为`email_subscribe`. 我还在用户配置文件视图中添加了一个简单的复选框来启用和禁用订阅。

目前一切正常。创建新记录后，所有用户都会收到一封电子邮件，用户可以设置和取消订阅。我现在要做的是让两者一起工作。

如何只向 email_subscribe 为 true 的用户发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:49:08.687

```
mails = User.where(:email_subscriber => true)
mail(:to => "admin@domain.com", :bcc => mails, subject => "New item added") 
```

# php - 取两个变量作为日期和时间，并组合成一个日期

> ID：15692704
> 
> 赞同：5
> 
> 时间：2013-03-28T21:42:48.040
> 
> 标签：php, pdo

我想取两个变量，一个代表日期，另一个代表时间，然后将它们组合成一个日期。

然后我想使用该组合日期和时间来检查当前日期和时间是否距离组合日期和时间 24 小时或更短。

```
$game_date = $game['date'];
$game_time = $game['time'];

$combined_date_and_time = date('$game_date $game_time'); 
```

$game_date 读取存储为：03/28/2013

$game_time 读取存储为：07:05 pm

在输出中，$combined_date_and_time 读取为：

```
$2pm03America/Los_Angeles_28pm31America/Los_Angeles $2pm03America/Los_Angeles_313803America/Los_Angeles 
```

这当然是不对的。

是否可以将两者合并为一个日期然后进行比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T21:51:13.997

```
$game_date = game['date'];
$game_time = game['time'];

$combined_date_and_time = $game_date . ' ' . $game_time;
$past_date = strtotime($combined_date_and_time);

$hours = 24;

// Check if date is more recent than the specified number of hours
if ((time() - $past_date) < (60 * 60 * $hours))
{
    echo 'Yes!';
} 
```

不过要小心！如果您的日期曾经以欧洲格式 ( `dd/mm/yyyy`) 存储，则您需要在解析日期之前更改顺序，否则它将不起作用。

如果日期分隔符是`-`或`.`，则假定为欧洲格式。

```
if (strpos($game_date, '-') !== false)
{
    list($day, $month, $year) = explode('-', $game_date);
    $game_date = $month . '/' . $day . '/' . $year;
}
else if (strpos($game_date, '.') !== false)
{
    list($day, $month, $year) = explode('.', $game_date);
    $game_date = $month . '/' . $day . '/' . $year;
} 
```

上面的代码将在日期变量的初始化和 combine_date_and_time 变量之间进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:45:24.263

使用[`strtotime`](http://php.net/manual/en/function.strtotime.php)代替`date`：

```
php > $dt = strtotime("03/28/2013 07:05 pm");
php > echo date("Y-m-d H:i:s", $dt);
2013-03-28 19:05:00 
```

（另外，变量不会在单引号`'`字符串中展开，而是使用双引号`"`字符串）

# php - 更改 PHP 文件上传的默认临时目录

> ID：15692705
> 
> 赞同：8
> 
> 时间：2013-03-28T21:42:53.180
> 
> 标签：php, file-upload

我正在本地创建一个允许上传 .pdf 文件的网站，当这些文件在本地上传时它们会转到`C:\xampp\tmp`但是当我在我的大学服务器上托管该网站时，我无权访问临时目录，有什么办法吗？可以更改文件的默认临时位置吗？

在此先感谢，戴夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:47:20.587

[可以使用upload_tmp_dir](http://www.php.net/manual/en/ini.core.php#ini.upload-tmp-dir)配置选项配置上传文件的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-30T13:02:21.363

尝试这个。

```
putenv('TMPDIR=/path/to/dir'); 
```

比你可以检查你的 tmp 目录

```
sys_get_temp_dir() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:53:46.153

我不相信您无权访问该`temp`目录。在`temp`目录中存储会话数据。

您应该使用以下命令检查临时目录：

```
sys_get_temp_dir() 
```

# jena - 如何使用jena为资源设置标签

> ID：15692707
> 
> 赞同：0
> 
> 时间：2013-03-28T21:42:55.973
> 
> 标签：jena

在我的本体中，我使用的是[SKOS](http://www.w3.org/2004/02/skos/)概念。在文档中有标签（如`prefLabel`等`mentioned`）：`http://www.w3.org/TR/skos-reference/#labels`。如何通过定义语言为 Jena 中的资源设置这样的标签？我添加概念的示例如下所示：

```
 Resource skosConcept = infModel.createResource("http://www.w3.org/2004/02/skos/core#Concept");
 Resource instance =  infModel.createResource("http://eg.com#Instance");
 infModel.add(instance, RDF.type, skosConcept); 
```

但是我如何定义，例如，`skos:prefLabel`？对我的实例资源有一个属性？以及如何设置语言？[OntResource](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntResource.html)类似乎有这样一个属性，用于添加带有 language 的标签。但我使用的是[InfModel](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/InfModel.html)，所以我无法将资源作为`OntResource`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:27:24.850

就像您使用 createResource 创建资源一样，您可以使用[createProperty](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/ModelCon.html#createProperty(java.lang.String))创建属性，然后以您已经使用的相同方式将所需的三元组添加到模型中。[可以使用createLiteral](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/Model.html#createLiteral%28java.lang.String,%20java.lang.String%29)创建具有语言类型的文字。

```
import com.hp.hpl.jena.rdf.model.InfModel;
import com.hp.hpl.jena.rdf.model.Literal;
import com.hp.hpl.jena.rdf.model.Model;
import com.hp.hpl.jena.rdf.model.ModelFactory;
import com.hp.hpl.jena.rdf.model.Property;
import com.hp.hpl.jena.rdf.model.Resource;
import com.hp.hpl.jena.reasoner.Reasoner;
import com.hp.hpl.jena.reasoner.ReasonerRegistry;
import com.hp.hpl.jena.vocabulary.RDF;

public class SKOS {
    public static void main(String[] args) {
        Model model = ModelFactory.createDefaultModel();
        Reasoner reasoner = ReasonerRegistry.getOWLReasoner();
        InfModel infModel = ModelFactory.createInfModel(reasoner, model);

        String skos = "http://www.w3.org/2004/02/skos/core#";

        Resource skosConcept = infModel.createResource( skos+"Concept" );
        Resource instance =  infModel.createResource("http://eg.com#Instance");

        infModel.add(instance, RDF.type, skosConcept);

        Property prefLabel = infModel.createProperty( skos+"prefLabel" );
        Literal label = infModel.createLiteral( "a preferred label in English", "en" );

        // either of these lines is fine
        instance.addLiteral( prefLabel, label );
        infModel.add( instance, prefLabel, label );

        model.write( System.out, "N3" );
    }
} 
```

此代码还显示了模型，以便我们可以看到属性被设置为

```
<http://eg.com#Instance>
  a       <http://www.w3.org/2004/02/skos/core#Concept> ;
  <http://www.w3.org/2004/02/skos/core#prefLabel>
          "a preferred label in English"@en . 
```

# java - 将按钮的文本颜色更改为默认值时出错？

> ID：15692712
> 
> 赞同：0
> 
> 时间：2013-03-28T21:43:09.927
> 
> 标签：java, android

我有一个设置颜色代码的按钮：

```
buttonClicked.setTextColor(Color.GRAY); 
```

现在，当我完成计时器时，所有按钮的文本都会重置为其他内容，因此我需要将该文本恢复为默认值。我试过这个，但我得到了错误（我在我的代码末尾为那个错误写了一条评论）：

```
final OnClickListener clickListener = new OnClickListener() {

            private Button buttonClicked;
            private int brojacKlikova = 0;

            public void onClick(View v) {
                brojacKlikova++;
                if (brojacKlikova < 16) {

                Button button = (Button) v;
                button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x003333));

                if (buttonClicked == null) {
                    // first button is clicked
                    buttonClicked = button;
                } else {
                    // second button is clicked
                    if (buttonClicked.getTag().equals(button.getTag())) {
                        button.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0x66FF33));
                        buttonClicked.setEnabled(false);
                        button.setEnabled(false);
                        counter = counter + 5;
                        score.setText("Poeni: " + counter);
                    } else {
                        buttonClicked.setEnabled(false);
                        buttonClicked.setTextColor(Color.GRAY);
                        buttonClicked.getBackground().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0xFFCC99));
                        button.getBackground().clearColorFilter();
                    }
                    buttonClicked = null;
                }
                }else{
                buttonClicked = null;
                buttonClicked.setTextColor(Color.WHITE); //<--- here I get error
                brojacKlikova = 0;
                brojacVremena.cancel();
                mHandler.postDelayed(mLaunchTask,2200);
         }
            }
     }; 
```

如何将按钮的文本颜色重置为默认值？

这是logcat：

```
03-28 23:59:29.357: W/dalvikvm(27918): threadid=1: thread exiting with uncaught exception (group=0x40018560)
03-28 23:59:29.467: E/AndroidRuntime(27918): FATAL EXCEPTION: main
03-28 23:59:29.467: E/AndroidRuntime(27918): java.lang.NullPointerException
03-28 23:59:29.467: E/AndroidRuntime(27918):    at rs.androidaplikacije.spojnice.Spojnice$1.onClick(Spojnice.java:77)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at android.view.View.performClick(View.java:2506)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at android.view.View$PerformClick.run(View.java:9112)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at android.os.Handler.handleCallback(Handler.java:587)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at android.os.Looper.loop(Looper.java:130)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at android.app.ActivityThread.main(ActivityThread.java:3835)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at java.lang.reflect.Method.invokeNative(Native Method)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at java.lang.reflect.Method.invoke(Method.java:507)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
03-28 23:59:29.467: E/AndroidRuntime(27918):    at dalvik.system.NativeStart.main(Native Method)
03-28 23:59:31.167: I/Process(27918): Sending signal. PID: 27918 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:46:49.817

```
buttonClicked = null;
buttonClicked.setTextColor(Color.WHITE); 
```

问题就在这里。您被分配了按钮**`NULL`**，然后您在其上调用属性。这总是抛出**`NPE`**。解决方案是删除第一行，它应该可以工作。

# mysql - 可以用单引号将 SQL 语句中的所有值括起来吗？

> ID：15692715
> 
> 赞同：3
> 
> 时间：2013-03-28T21:43:20.877
> 
> 标签：mysql, sql, sql-server, database, tsql

可以用单引号将 SQL 语句中的所有值括起来吗？例如：

这是一个简单的表格，称为书籍：

```
id  |  title
1   |  Some book name
2   |  Second book name 
```

可以这样写语句：

```
SELECT * FROM books WHERE id = '1' 
```

我已经在 SQL Server 2008 和 MySQL 5 中测试了该查询，它运行良好，但我很好奇是否存在任何性能问题，因为 ID 字段是整数。

第二个问题可以这样写：

```
SELECT * FROM books WHERE id = N'1' 
```

N 前缀在 SQL Server 中用于 UTF-8 字段，但我已经在 SQL Server 和 MySQL 中对其进行了测试，并且都可以正常工作。我不知道 SQLite 是否支持 N 前缀，因为我没有测试过。

我问这个的原因是因为我正在构建可以与流行的 SQL 数据库（SQL Server、MySQL、SQLite 和 MS Access）一起使用的数据库类，所以在执行选择、插入或更新数据时我不必担心关于字段数据类型。我总是可以用 N'Some value' 括起来值，但我很好奇这是否正确，是否存在任何性能问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T21:52:36.817

在 SQL Server 中，您可以在执行此操作时获得隐式转换。有时它不会影响计划或对性能有明显影响，但有时可能会。他们通常被认为是坏的。针对 AdventureWorks2012 检查这两个查询的计划：

```
SELECT * FROM Sales.SalesOrderHeader WHERE SalesOrderID = 43659;

SELECT * FROM Sales.SalesOrderHeader WHERE SalesOrderID = '43659'; 
```

后者包含一个`CONVERT_IMPLICIT`（将鼠标悬停在 CI 搜索的工具提示上）。

您还需要非常小心地在`VARCHAR`和之间切换`NVARCHAR`- 在某些情况下，这可能会降低性能，具体取决于底层数据类型以及文字是否具有`N`前缀。

长话短说：不要这样做。编写你的 ORM 东西，以便它理解不同的数据类型并适当地处理它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T21:48:38.230

`SELECT ... WHERE int_type = '123'`很好。SQL 将转换`'123'`为整数一次并完成它。

但是，`SELECT ... WHERE char_type = 123`这不行，因为 SQL 必须将每个单元格转换为整数。看到 char_type = '0123' 和 char_type = '00123' 也将匹配。所以它必须做更多的工作。

感谢@MartinSmith 指出了铸造优先资源：http: [//msdn.microsoft.com/en-us/library/ms190309.aspx](http://msdn.microsoft.com/en-us/library/ms190309.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T21:52:59.367

[SQL Server](http://msdn.microsoft.com/en-us/library/aa224021%28v=sql.80%29.aspx)和[MySQL](http://dev.mysql.com/doc/refman/5.1/en/type-conversion.html)都执行隐式类型转换，但这并不是一个好的实践；尽可能使用适当的本机类型。这将使您避免试图发现以下之间的区别：

```
SELECT * FROM books WHERE id = '1' 
```

和

```
SELECT * FROM books WHERE id = 'l' 
```

和

```
SELECT * FROM books WHERE id = 'O' 
```

和

```
SELECT * FROM books WHERE id = '0' 
```

（分别是 1、小写 L、大写 'o' 和 0）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T22:05:43.677

这是 MySQL 中的一个示例错误，它说从带引号的数字字符串到整数的隐式类型转换会导致严重的性能问题： [http ://bugs.mysql.com/bug.php?id=43319](http://bugs.mysql.com/bug.php?id=43319)

最好*不要*引用数字。

# mysql - 如何在现有数据库中生成唯一 ID-s？

> ID：15692716
> 
> 赞同：0
> 
> 时间：2013-03-28T21:43:34.243
> 
> 标签：mysql, sql

我有一个名为 Food 的 mysql 表。我有 560 行，所有行的 ID 列都设置为空。我想为 ID-s 生成随机的 10 个长度的唯一字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:47:26.357

最简单的就是只创建一个函数来生成一个随机字符和一个唯一索引来保证唯一性，如果由于重复而插入失败，只需再试一次。

```
CREATE FUNCTION random_char() RETURNS CHAR(1)
RETURN ELT(FLOOR(1 + (RAND() * 62)), 
    'a','b','c','d','e','f','g','h','i','j','k','l','m',
    'n','o','p','q','r','s','t','u','v','w','x','y','z',
    'A','B','C','D','E','F','G','H','I','J','K','L','M',
    'N','O','P','Q','R','S','T','U','V','W','X','Y','Z',
    '0','1','2','3','4','5','6','7','8','9');

CREATE UNIQUE INDEX id_ux ON test (id);

UPDATE test 
SET id=CONCAT(random_char(), random_char(), random_char(), random_char(),
              random_char(), random_char(), random_char(), random_char(),
              random_char(), random_char())
WHERE id IS NULL;

DROP INDEX id_ux on test; 
```

# c++ - 在 C++ 窗口中显示文本

> ID：15692717
> 
> 赞同：1
> 
> 时间：2013-03-28T21:43:39.553
> 
> 标签：c++, text

我正在尝试在一个小型且非常基本的游戏中在屏幕上显示分数。

我用这个函数来显示这个词`Score:`：

```
void drawBitmapText(char *string, int score, float r, float g, float b, float x,float y,float z) {  
   char *c;
   glColor3f(r,g,b);
   glRasterPos3f(x,y,z);
   for (c=string; *c != '\0'; c++) { 
        glutBitmapCharacter(GLUT_BITMAP_HELVETICA_10, *c); }
} 
```

我使用以下方法调用上述`function()`内容：`drawBitmapText("score: ",score,0,1,0,10,220,0);`

它成功地`Score:`在正确的位置显示了这个词，但我遇到的问题是包括`int`表示它旁边的分数的实际。

如何合并`int`要显示的内容？我顺利通过了。

我已经尝试将它转换为 a`string/char`并添加/连接它，但它只显示随机字母......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:54:56.720

由于您使用的是 C++，因此开始使用 C++ 库来处理字符串会容易得多。您可以使用[`std::stringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)来连接标题和分数。

```
using namespace std;

void drawBitmapText(string caption, int score, float r, float g, float b, 
   float x,float y,float z) {  
   glColor3f(r,g,b);
   glRasterPos3f(x,y,z);
   stringstream strm;
   strm << caption << score;
   string text = strm.str();
   for(string::iterator it = text.begin(); it != text.end(); ++it) {
        glutBitmapCharacter(GLUT_BITMAP_HELVETICA_10, *it); 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:50:16.480

采用`std::stringstream`

例如

```
std::stringstream ss;

ss << "score: " << score; 
```

然后打电话

```
ss.str().c_str(); 
```

输出交流字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T21:53:19.103

您可以使用它`snprintf`来创建格式化字符串，就像使用 printf 将格式化字符串打印到控制台一样。这是重写它的一种方法：

```
void drawBitmapText(char *string, int score, float r, float g, float b, float x,float y,float z) {
    char buffer[64]; // Arbitrary limit of 63 characters
    snprintf(buffer, 64, "%s %d", string, score);
    glColor3f(r,g,b);
    glRasterPos3f(x,y,z);
    for (char* c = buffer; *c != '\0'; c++)
        glutBitmapCharacter(GLUT_BITMAP_HELVETICA_10, *c);
} 
```

# ember.js - 计算属性取决于@each 的所有属性

> ID：15692718
> 
> 赞同：3
> 
> 时间：2013-03-28T21:43:43.060
> 
> 标签：ember.js

我之前使用过的计算属性类型如下所示：

```
isAnyoneHungry: function () {
  var everyone = this.get('everyone'),
      anyoneHungry = false;
  everyone.forEach(function(person) {
    if (person.get('isHungry')) {
      anyoneHungry = true;
    }
  });
  return anyoneHungry;
}.property('everyone.@each.isHungry'),

everyone: Ember.A() // an array that will hold person models 
```

用于基于数组中每个对象的一个​​属性计算某些东西。

是否可以根据数组中每个对象的*每个*属性创建计算属性？假设该`person`模型具有许多布尔属性，例如`isHungry`, `isTired`, `isCranky`, ... 我希望能够在其中任何一个发生更改时重新计算此属性。但我很懒，不想像这样输入每个属性：

`function(){...}.property('everyone.@each.isHungry', 'everyone.@each.isTired', 'everyone.@each.isCranky'.`

相反，我想要这样的东西：

```
isAnyoneUnhappy: function () {
  var everyone = this.get('everyone'),
      isAnyoneUnhappy = false;
  everyone.forEach(function (person) {
    if (person.get('isHungry') || person.get('isTired') || person.get('isCranky')) {
      isAnyoneUnhappy = true;
    }
  });
  return isAnyoneUnhappy;
}.property('everyone.@each.iWantEveryPropertyHere') 
```

这在 Ember 中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:04:20.460

理想情况下，您应该在 person 上有一个属性来汇总不愉快的属性，例如：

```
isUnhappy: function () {
  if (this.get('isHungry') || this.get('isTired') || this.get('isCranky')) {
    return true;
  }
}.property('isTired', 'isHungry', 'isCranky') 
```

然后`isAnyoneUnhappy`只是观察`everyone.@each.isUnhappy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:59:23.583

您是否尝试过以下操作？

```
isAnyoneUnhappy: function () {
  var everyone = this.get('everyone'),
      isAnyoneUnhappy = false;
  everyone.forEach(function (person) {
    if (person.get('isHungry') || person.get('isTired') || person.get('isCranky')) {
      isAnyoneUnhappy = true;
    }
  });
  return isAnyoneUnhappy;
}.property('everyone.@each.*') 
```

我查看了 Ember 源代码，似乎有一些处理星号的逻辑。不过我不确定。

# capybara - 如何在 Capybara 表中使用管道 ('|') 字符包含正则表达式

> ID：15692727
> 
> 赞同：1
> 
> 时间：2013-03-28T21:44:53.997
> 
> 标签：capybara

黄瓜中的这个水豚表定义：

```
And the developer adds these attributes:
| el_name        | value          |
| field_regex    | ^area_cd$      |
| default_format | text           | 
```

这不会：

```
And the developer adds these attributes:
| el_name        | value           |
| field_regex    | ^(area|zip)_cd$ |
| default_format | text            | 
```

正则表达式中的管道字符正在破坏表解析。我已经尝试了我能想到的所有包装和转义机制。没有喜悦。

建议？

# mongodb - MongoDB 2.2 - 更新数组嵌套文档

> ID：15692728
> 
> 赞同：2
> 
> 时间：2013-03-28T21:44:59.077
> 
> 标签：mongodb

是否可以使用 $update 和 $elemMatch 更新 Level3 数组中的单个文档字段？我意识到在这种情况下我不能多次使用位置运算符，并且从历史上看，我已经修改了 Level2 嵌套文档，并进行了所需的更深层次的更改，因为这些文档不是很大。我希望有一些语法可以使用 $elemMatch 更新 Level3 数组文档，而无需知道目标文档在 Level3 数组中的位置或在 Level2 中包含文档。

例子：

```
db.collection.update({_id:'123', level2:{$elemMatch:{'level3.id':'bbb','level3.e1':'hij'}},{'level2.level3.createdDate':new Date()})

{
    _id:'123',
    f1:'abc',
    f2:'def',
    level2:[
        {_
            id:'aaa',
            e1:'hij',
            e2:'lmo'
            level3:[
                {
                    name:'foo',
                    type:'bar',
                    createdDate:'2013-3-28T05:18:00'
                }]
        },
        {_
            id:'bbb',
            e1:'hij',
            e2:'lmo'
            level3:[
                {
                    name:'foo2',
                    type:'bar2',
                    createdDate:'2013-3-28T05:19:00'
                }]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T00:23:24.303

由于您提到的原因，目前无法使用常规更新操作来执行此操作。

目前唯一可以使用的解决方法是向文档添​​加版本控制，并通过阅读文档来使用乐观锁定，在应用程序中找到要修改的适当元素，更改它们的值，然后使用`update`包含版本的读取文档（这样如果其他线程在您的查询和更新之间更新了文档，您就不会覆盖更改，但必须重新加载文档并重试。

版本控制策略不必基于整个文档，您可以对第一级数组元素进行版本控制，然后您就可以只更新您关心的子数组（通过 $set 更新）。

# xcode - 在 Cocoa Applescript (ApplScriptObjC) (Xcode) 中运行 bash 文件

> ID：15692730
> 
> 赞同：0
> 
> 时间：2013-03-28T21:45:13.987
> 
> 标签：xcode, macos, cocoa, bash, applescript

我正在尝试制作一个由与 bash 文件交互的 AppleScript 组成的程序（以便获得精美的 Cocoa GUI）。我认为这是一项简单的任务，因为新文件菜单 (cmd+n) 中的文件类型之一是 shell 脚本 (.sh)。

我已经做了一些半途而废的尝试来让它工作（做shell脚本“sh file.sh”），但我不知道如何运行这些文件。

有没有高手可以帮助我？:3

如果有任何不清楚的地方，请随时提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:19:02.123

如果您只想从 Cocoa gui 启动 shell 脚本，则不需要 AppleScriptObjC 桥，在 Objective-C 中制作 Cocoa 程序并使用 NSTask 类：[https ://developer.apple.com/library/mac/ #documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)。

# c++ - 在 C++ 中的#pragma 注释之前搜索可用的库？

> ID：15692737
> 
> 赞同：2
> 
> 时间：2013-03-28T21:45:44.563
> 
> 标签：c++, c, linker, static-libraries

我有一段代码依赖于 Windows 提供的“Xinput.lib”文件，以便与 xbox 控制器交互。

最近我安装了 VS2012，这似乎导致编译器不再可以使用“Xinput.lib”。我找到了一种解决方法，我改为在运行 VS2012 编译器的系统上使用“Xinput9_1_0.lib”。然而，这会导致一个问题，因为我正在多个系统上进行开发，其中一个运行 VS2012，另一个运行 VS2010。要编译，我必须在代码中的“Xinput9_1_0.lib”和“Xinput.lib”之间进行更改。

我想知道是否有办法在使用#pragma 注释链接库之前搜索可用库？

像这样的东西（我意识到这绝不是有效的，只是意图的证明）：

```
if("Xinput.lib" exists) {
#pragma comment(lib,"Xinput.lib")
}
else if("Xinput9_1_0.lib" exists) {
#pragma comment(lib,"Xinput9_1_0.lib")
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T21:51:43.303

将宏用于您感兴趣的特定版本的 VS：

```
#ifdef MSC_VER < 1700 //pre 2012
#pragma comment(lib,"Xinput.lib")
#else
#pragma comment(lib,"Xinput9_1_0.lib")
#endif 
```

# zend-framework - Zend_Service_Twitter 和 Twitter API 1.1 (ZF 1.12.3)

> ID：15692744
> 
> 赞同：3
> 
> 时间：2013-03-28T21:46:26.437
> 
> 标签：zend-framework, twitter

我已经升级到 Zend Framework v1.12.3，因为它支持带有 Zend_Service_Twitter 的 TwitterAPI v1.1。之前，我使用过运行良好的 TwitterAPI 1.0（之前的 ZF 1.12.3），但这种情况会[在 2013 年 3 月发生变化](https://dev.twitter.com/blog/changes-coming-to-twitter-api)。

如果我使用以下 ZF 1.12.3 代码调用 TwitterAPI v1.1，我会不断收到一个我无法向自己解释的奇怪错误：

代码：

```
 $twitterService = new Zend_Service_Twitter(array(
            'consumerKey'    => $this->config['consumerKey'],
            'consumerSecret' => $this->config['consumerSecret'],
            'username'       => $twitterVO->getTwitterUserName(),
            'accessToken'    => $accessToken // unserialized object
));

 $response = $twitterService->statusesUpdate("TEST"); 
```

这就是我得到的错误。我调用哪个函数并不重要（在本例中是 statusesUpdate("Test")）：

![在此处输入图像描述](../Images/189835d84c63d3c0a129c2fed3f4a1c9.png)

消息是“无效的块大小”“无法读取块体”。数组中的“type”属性显示一个“->”。这也有点可疑，但我不知道它来自哪里。

有人有 Zend Framework 1.12.3 的工作示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:12:16.843

从 ZF 1.12 开始，Twitter 应用程序 Oauth 参数可以在 Zend_Service_Twitter 构造函数中给出，但 consumerKey 和 consumerSecret 必须放在 "oauthOptions" 数组下。

这对我有用：

```
$accessToken = new Zend_Oauth_Token_Access();
$accessToken->setToken('YourAccessToken');
$accessToken->setTokenSecret('YourAccessTokenSecret');

$twitter = new Zend_Service_Twitter(
    array(
        'username' => 'YourUsername',
        'accessToken' => $accessToken,
        'oauthOptions' => array(
            'consumerKey' => 'YourConsumerKey',
            'consumerSecret' => 'YourConsumerSecret'
        )
    )
);

$result = $twitter->statusesUserTimeline('TEST'); 
```

# c++ - 您可以将一个异常继承层次结构包装到另一个中吗？- 或者，另一种处理这个问题的干净方法？

> ID：15692745
> 
> 赞同：5
> 
> 时间：2013-03-28T21:46:27.193
> 
> 标签：c++, stl

假设我有两个在 C++ 中处理的继承层次结构。一个继承自`std::exception`（新层次结构），另一个继承自`Exception`（遗留 C++ Builder VCL 基异常类）。如果我调用可能引发任何类型异常的代码，我必须编写如下代码：

```
try {
    // do stuff....
    Function1();
    Function2();
} catch (std::exception &ex) {
    std::cout << "STL exception caught: " << ex.what() << std::endl;
} catch (Exception &ex) {
    std::cout << "Legacy exception caught: " << ex.Message.c_str() << std::endl;
} catch (SomeOtherVendorLibraryException &ex) {
    // etc.
} 
```

问题是每个调用者都需要拥有所有这些 catch 子句来尝试获取最后一种类型的异常，因为 C++ 没有一个真正的、强制的异常基类，您可以将其用作包罗万象的`System.Exception`类（例如 C# 中的类）。（`catch (...)`这是一个非首发，因为你没有办法知道你捕获了什么，并且一些危险的系统异常，如访问冲突，也可能被捕获，最好不要陷入困境。）

我想将这些“遗留”异常包装到`std::exception`层次结构中的一个类中。这种将第 3 方异常包装到您自己的异常系统中的概念并非完全没有先例。例如，.NET Framework 包含了其他系统中的大量错误（例如`COMException`）。理想情况下，我希望看到这样的东西：

```
class LegacyException : public std::runtime_error {
public:
    // construct STL exception from legacy exception
    LegacyException(const Exception &ex) : std::runtime_error(ex.Message.c_str()) {}
};

try {
    // In reality, this throw will happen in some function we have no control over.
    throw Exception("Throwing legacy exception!");
} catch (std::exception &ex) {
    // Ideally, the compiler would use the LegacyException constructor
    // to cast the thrown Exception to a LegacyException, which ultimately
    // inherits from std::exception.
    std::cout << ex.what() << std::endl;
} 
```

可以理解的是，异常永远不会被捕获——它会要求编译器使用相当多的魔法来捕获它。

是否有可能与上述类似的解决方案来包装遗留异常并实现这些目标？

*   一个“catch”子句或类似子句，因此一般异常处理逻辑只需要编写一次。
*   从一种异常类型转换为另一种异常类型的逻辑必须集中。
*   尽可能避免使用宏。
*   不使用 lambda 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:01:32.417

在使用 BC++Builder 之后，我遇到了同样的问题，而宏似乎是当时唯一的解决方案。

“更清洁”（嗯...）解决方案可能是“双重尝试捕获”：内部尝试捕获将您的遗留异常转换为标准类，而外部实际处理异常。

我手头没有代码（已经好几年了），但基本上可以归结为：

```
#define DTRY  try { try
#define DCATCH catch (Exception& e) { throw LegacyException(e); } } catch

DTRY {
   ...
}
DCATCH(std::exception& e) {
    // handle the exception
} 
```

是的，我知道这很丑，但是当我与 Borland 合作时，我没有发现更好的东西。事实是，当时 Borland 非常不标准，我不知道它是如何演变的，也许你现在可以做得更好。无论如何，希望这会有所帮助。

# php - 使用 jQuery 在 cakephp 布局中向 body 添加背景图像

> ID：15692746
> 
> 赞同：0
> 
> 时间：2013-03-28T21:46:33.673
> 
> 标签：php, javascript, jquery, cakephp

我正在使用 cakephp 2，我试图让我的用户上传一张图片，然后将其用作他们页面的背景。

我的图像上传正常并保存到（webroot）文件/用户/$userid/$bodybgimage。我还得到了数据库中图像的名称。

麻烦是我想要的，因为我事先不知道什么用户 ID 将请求他们的背景图像我不能将他们的背景放在样式表中，所以我试图将它添加到默认布局中。我尝试使用 jquery 添加：（图像文件名在 $bodybgimage 中）

```
<?php if(!$bodybgimage == '') {?>
    $('body').css('background-image', 'url('<?php echo '../files/User/'.$userId.'/'.$bodybgimage; ?>')');
    <?php  }?> 
```

但这似乎只是消除了我对身体的所有风格！

我还尝试将其直接添加到 body 标签中，如下所示：

```
<body<?php if(!$bodybgimage == '') echo ' style="background-image:url(../files/User/'.$userId.'/'.$bodybgimage.')"';?>> 
```

但再次无济于事。谁能帮我吗。我知道图像并且一切都在那里，因为如果我将背景图像样式放在样式表中，图像就会弹出。必须有一种明智的方法来做到这一点，我错过了。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:08:55.800

请您尝试省略文件前的“../”，因为我假设您的图像不是在脚本旁边名为 files 的文件夹中创建的吗？

# sql - 将 NOT EXIST 查询与最新值组合的 SQL 术语

> ID：15692748
> 
> 赞同：0
> 
> 时间：2013-03-28T21:46:40.630
> 
> 标签：sql

我是一个有基础知识的初学者。我有一个表，我试图提取过去一年中表中没有特定代码的所有 UID。

我的桌子看起来像这样：（但当然要大得多）

```
FACID   DPID    EID DID UID DT  Code    Units   Charge  ET  Ord
1   1   6   2   1002    15-Mar-07   99204   1   180 09:36.7 1
1   1   7   5   10004   15-Mar-07   99213   1   68  02:36.9 1
1   1   24  55  25887   15-Mar-07   99213   1   68  43:55.3 1
1   1   25  2   355688  15-Mar-07   99213   1   68  53:20.2 1
1   1   26  5   555654  15-Mar-07   99213   1   68  42:22.6 1
1   1   27  44  135514  15-Mar-07   99213   1   68  00:36.8 1
1   1   28  2   3244522 15-Mar-07   99214   1   98  34:59.4 1
1   1   29  5   235445  15-Mar-07   99213   1   68  56:42.1 1
1   1   30  3   3214444 15-Mar-07   99213   1   68  54:56.5 1
1   1   33  1   221444  15-Mar-07   99204   1   180 37:44.5 1 
```

我正在尝试使用以下内容，但这不适用于我的时间范围限制。

```
select distinct UID from PtProcTbl
 where DT<'20120101'
 and NOT EXISTS (Select Distinct UID
                  where Code in ('99203','99204','99205','99213',
                                 '99214','99215','99244','99245')) 
```

我需要知道如何确保我要提取的 UID 在 2012 年 1 月 1 日截止日期之后没有包含不存在代码之一的 DT。
上面的查询返回的 UID 实际日期在 2012 年 1 月 1 日之后确实包含上述​​代码之一......

不知道我做错了什么，或者我是否完全不基于此..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:54:25.297

你确定你需要`NOT EXISTS`吗？相反如何： `AND Code NOT IN ('99203','99204','99205','99213','99214','99215','99244','99245')`

# jquery - 在 jquery 的下拉列表中选择特定选项

> ID：15692761
> 
> 赞同：0
> 
> 时间：2013-03-28T21:48:12.297
> 
> 标签：jquery

我试图制作这个小脚本，您只能在一系列下拉框中使用一次数字，所以.. [1] [3] [2] [2] [3] [1] [2] [1] [3 ] 一切都很好，但不是 [2] [2] [1] [1] [1] [3] ..

我想我已经完成了一半。

```
$("#left").focus(function () {
    // Store the current value on focus, before it changes
    previous = this.value;
}).change(function() {
    // Do soomething with the previous value after the change
    var num1 = $("#left option:selected").text();

    if ( $("#middle option:selected").text() == num1){
    $("#middle option:selected").text(previous)
    }

    if ( $("#right option:selected").text() == num1){
    $("#right option:selected").text(previous)
    }       
}); 
```

这是完整内容的链接：http: [//jsfiddle.net/U3WSz/](http://jsfiddle.net/U3WSz/)

它工作了一点，但我意识到下拉选项开始改变。如果你玩得够多，你会注意到我所看到的。

我还注意到我是如何重复大量代码的。让我知道是否有更好的方法来编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:28:39.290

# [*jsFiddle*](http://jsfiddle.net/mohammadAdil/U3WSz/1/)

像这样向选项添加值属性

```
<option value='2'>2</option> 
```

**JS：**

```
 $("#left").focus(function () {
    // Store the current value on focus, before it changes
     previous = $(this).val();

    }).change(function () {
    // Do soomething with the previous value after the change
    var num1 = $("#left option:selected").val();

    if ($("#middle option:selected").val() == num1) {
        // $('body').append(previous);
        $("#middle").val(previous)
    }

    if ($("#right option:selected").val() === num1) {
        $("#right").val(previous);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T21:58:28.907

试试这个

```
$("#left").focus(function () {
    // Store the current value on focus, before it changes
    previous = this.value;
}).change(function() {
    // Do soomething with the previous value after the change
    var num1 = $("#left option:selected").text();

    if ( $("#middle option:selected").text() == num1){
    $("#middle option[value='"+previous+"']").attr('selected','selected')
    }

    if ( $("#right option:selected").text() == num1){
    $("#right option[value='"+previous+"']").attr('selected','selected')
    }       
}); 
```

此代码使选择的选项，在`#middle`和`#right`选择框中，具有`value`等于`previous`变量的值。

# java - 将对象列表安全地传递给重新调度自身的线程

> ID：15692769
> 
> 赞同：3
> 
> 时间：2013-03-28T21:49:05.843
> 
> 标签：java

我有一个线程负责从 MySQL 数据库中清除旧数据。我们分批删除，因此如果有大量清除，则不会消耗数据库，因此线程执行清除，等待几秒钟，然后再次调用自身以继续清除（如果还有任何记录）。

我的问题是我们允许人们为需要清除的内容设置多个规则。在一个不批量执行任何操作的旧系统中，我们只需遍历每个“清除规则”并运行查询。

但是，现在我们有了一个线程再次自行调度的系统，我可以从中删除规则`ArrayList`了，因为`ConcurrentModificationException`

我有一个`ArrayList<QueryParameters>`我们迭代的。如果没有要清除的记录，我们应该从列表中删除规则，以便下次线程运行时不会重复它。

如何正确地从列表中删除规则但无法获得 CME？我想我可以使用 ConcurrentHashMap 但我不想真正想要存储键-> 值。

该代码是一个更大的 java 应用程序的插件，我们正在使用他们的线程调度程序，仅供参考。

我尝试了两种方法来迭代数组列表、for循环和使用迭代器

```
public class PurgeTask implements Runnable {

    private Prism plugin;
    private ArrayList<QueryParameters> paramList;
    private int total_records_affected = 0, cycle_rows_affected = 0;
    private int purge_tick_delay;

    /**
     * 
     * @param plugin
     */
    public PurgeTask( Prism plugin, ArrayList<QueryParameters> paramList, int purge_tick_delay ){
        this.plugin = plugin;
        this.paramList = paramList;
        this.purge_tick_delay = purge_tick_delay;
    }

    /**
     * 
     */
    public void run(){
        if(paramList.size() > 0){
            ActionsQuery aq = new ActionsQuery(plugin);
            // Execute in batches so we don't tie up the db with one massive query
            for (Iterator<QueryParameters> it = paramList.iterator(); it.hasNext(); ) {
                QueryParameters param = it.next();

                cycle_rows_affected = aq.delete(param);
                plugin.debug("Purge cycle cleared " + cycle_rows_affected + " rows.");
                total_records_affected += cycle_rows_affected;

                // If nothing (or less than the limit) has been deleted this cycle, we need to move on
                if( cycle_rows_affected == 0 || cycle_rows_affected < plugin.getConfig().getInt("prism.purge.records-per-batch") ){

                    // Log final count of cleared records
                    plugin.log("Cleared " + total_records_affected + " rows from the database. Using:" + param.getOriginalCommand() );
                    total_records_affected = 0;

                    // Remove the purge rule from the list so we don't repeat
                    paramList.remove(param);

                } else {

                    // Items we're deleted. Leave params in queue and re-schedule this task
                    plugin.deleteTask = plugin.getServer().getScheduler().runTaskLaterAsynchronously(plugin, new PurgeTask( plugin, paramList, purge_tick_delay ), purge_tick_delay);

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:00:56.263

由可能同时修改它的`ArrayList`多个线程迭代。如果您不希望您的清除任务同时运行，您可以同步`ArrayList`访问：

```
public void run {
   synchronized(paramList) {
       ...
   }
} 
```

如果您需要并发性，一个更好的数据结构将是[CopyOnWriteArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)，它可以在迭代列表时保证列表的完整性，但删除操作的成本更高。仍然比同步访问整个列表更有效。

此外，您需要使用`List.remove()`方法删除参数：`paramList(remove);`，不支持迭代器操作`CopyOnWriteArrayList`。

此外，最好在您的`PurgeTask`类中使用`List`接口，而不是实现，这样更容易更改幕后的数据结构。

# facebook-graph-api - 在最新版本的 fb 上创建页面选项卡的最简单方法是什么？

> ID：15692776
> 
> 赞同：0
> 
> 时间：2013-03-28T21:49:38.277
> 
> 标签：facebook-graph-api, iframe, tabs

我想做的就是在我们的商业 Facebook 页面上为我们的粉丝和客户创建几个带有注册表单的页面。

我创建了新应用程序，将其命名并继续进行基本设置。据我所知，我只需要设置“页面标签”信息。我为标签命名，输入页面标签网址，安全页面标签网址并上传标签图片。

然后我等待它出现在我们的 fb 页面上。我刷新页面，几秒钟后，标签列表中似乎正在加载某些内容。但随后它停止并且默认选项卡（照片、喜欢和事件）的布局保持不变。

该选项卡应链接到应用程序 url，该应用程序 url 应加载到 iframe 中，该 iframe 将具有来自我们 Web 服务器的 html。

反正我是这么理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:13:11.883

You must add manually the application on your page through this URL: [http://www.facebook.com/dialog/pagetab?app_id=APP_ID&redirect_uri=https://www.facebook.com/](http://www.facebook.com/dialog/pagetab?app_id=APP_ID&redirect_uri=https://www.facebook.com/)

Remember to replace APP_ID first.

# c# - 在 MVC4 视图中针对 ViewModel 执行客户端验证

> ID：15692779
> 
> 赞同：4
> 
> 时间：2013-03-28T21:49:44.540
> 
> 标签：c#, asp.net-mvc, validation, asp.net-mvc-4, client-side-validation

我想知道针对放置在 ViewModel 字段上的属性处理客户端、javascript 或 jQuery 驱动的 MVC4 字段验证的最佳方法是什么。

首先，我们来举个例子。首次启动应用程序时会显示管理员的登录创建屏幕（只是不要对站点所有者说“第一次使用 admin/admin 作为登录”）。

视图模型：

```
public class AdministratorViewModel : AbstractViewModel
{
    [Required]
    [Display(ResourceType = typeof(ManageAdminsViewModelResources), Name = "lblUsername")]
    public string Username { get; set; }

    [Required]
    [Display(ResourceType = typeof(ManageAdminsViewModelResources), Name = "lblEmailAddress")]
    [EmailAddress]
    public string EmailAddress { get; set; }

    [Required]
    [Display(ResourceType = typeof(ManageAdminsViewModelResources), Name = "lblPassword")]
    [AdminPassword]
    public string Password { get; set; }

    [Required]
    [Display(ResourceType = typeof(ManageAdminsViewModelResources), Name = "lblPasswordConfirm")]
    [Compare("Password")]
    public string PasswordConfirm { get; set; }

    [Display(ResourceType = typeof(ManageAdminsViewModelResources), Name = "lblLastLogin")]
    public DateTime? LastLogin { get; set; }

    [Display(ResourceType = typeof(ManageAdminsViewModelResources), Name = "lblPasswordExpiry")]
    public DateTime? PasswordExpiry { get; set; }

    [Display(ResourceType = typeof(ManageAdminsViewModelResources), Name = "lblBlocked")]
    public bool Blocked { get; set; }
} 
```

部分视图（创建第一个管理员时只需要几个字段）

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(false)
    @Html.AntiForgeryToken()

    <fieldset>
        <legend>@ManageAdminsViewResources.legendCreateAdmin</legend>

        <div class="desktoptile">
            @Html.LabelFor(m=>m.Username)
            @Html.EditorFor(m => m.Username)
            @Html.ValidationMessageFor(m => m.Username)
        </div>

        <div class="desktoptile">
            @Html.LabelFor(m=>m.Password)
            @Html.PasswordFor(m => m.Password)
            @Html.ValidationMessageFor(m => m.Password)
        </div>

        <div class="desktoptile">
            @Html.LabelFor(m=>m.PasswordConfirm)
            @Html.PasswordFor(m => m.PasswordConfirm)
            @Html.ValidationMessageFor(m => m.PasswordConfirm)
        </div>

        <div class="desktoptile">
            @Html.LabelFor(m=>m.EmailAddress)
            @Html.EditorFor(m => m.EmailAddress)
            @Html.ValidationMessageFor(m => m.EmailAddress)
        </div>

        <input type="submit" value="@ManageAdminsViewResources.btnCreate"/>
    </fieldset>
} 
```

控制器

```
 [AllowAnonymous]
    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult CreateFirst(AdministratorViewModel viewModel)
    {
        if (!ModelState.IsValid) return View(viewModel);
        [...................] 
```

### 目前

如果我在表单中输入无效的电子邮件地址、空密码等并**点击**提交，我会*正确地*收到错误通知。好的，我们继续

### 我想要的是

因为我正在做一个 Metro 风格的设计，所以我希望每次用户不关注该字段的文本框验证时都会发生这种情况。

编写硬编码的 jQuery 片段并不是最好的选择。我想要一种数据驱动的方法，可能嵌入在我目前正在学习的 MVC4 中。

因此，给定具有标准**和**自定义属性的 ViewModel（无论如何，都需要一点 Javascript，请考虑`Org.Zighinetto.AdminPasswordAttribute`检查密码复杂性的方法），**我如何**以最不显眼的方式强制执行客户端验证，而不指定客户端-每个 html 标记上的侧标记并编写尽可能少的代码？

在 ASP.NET MVC 4 验证中是否还有任何我必须取消隐藏的秘密？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:05:45.340

好吧，您**必须**使用 jQuery 调用 jQuery 验证（因为它是用 jQuery 编写的 :)）

您可以为您的输入添加一个全局事件，然后在模糊元素上调用它。就像是：

```
$("input").blur(function () {
    $(this).valid();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T22:25:18.653

从我（学习）的角度来看，正确的答案应该是：

## 解释：

当 jQuery Unobtrustive Validator 加载到页面中时，MVC4 会自动完成公共属性的验证，否则只执行服务器端验证。

大多数（如果不是全部）MVC4`ValidationAttribute`实现`IClientValidation`. 此接口将 jQuery Validator 验证函数包装在服务器端代码中。很难解释它究竟是如何工作的，但是说这个接口返回客户端函数的名称（由 jQuery 分发提供或由用户实现），虽然**基本上是错误**的，但至少给新手用户提供了这个想法试图理解验证如何工作。

## 回答：

继续使用数据驱动的模型/视图模型注释。检查页面中是否加载了NuGet包jQuery Unobtrusive Validation，然后`IClientValidation`根据需要实现（我在[这里](http://blogs.captechconsulting.com/blog/shradha-kaldate/handling-multiple-validation-rules-aspnet-mvc-using-dataannotations-and-unobtr-0)找到了一个关于多个错误的教程），字段自动验证。

# python - 全局处理来自 webob 的 unicode 解码错误

> ID：15692781
> 
> 赞同：0
> 
> 时间：2013-03-28T21:49:50.317
> 
> 标签：python, unicode, wsgi, webob

我有一个在 WSGI 之上编写的大型 Web 系统，它使用 webob 访问表单数据（不涉及任何框架）。随机地，我们会从浏览器（或机器人）中获得未处理的 UnicodeDecodeError 异常，这些异常在查询字符串或 POST 数据中发送不可解码的转义序列。我正在寻找一种不涉及我收到未处理的异常电子邮件的良好默认行为。

我的第一个想法是编写一个站点范围的中间件，该中间件使用返回 400 的异常处理程序访问 webob 请求对象的参数（或者可能去除不可解码的数据）。

其他系统/框架如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:04:41.867

经过一番挖掘，我发现应该在请求上使用 .decode() 方法来创建解码请求。如果失败并出现 UnicodeDecodeError，我会发回 400。例如：

```
 try:
        req = webob.Request(environ).decode('ascii')
    except UnicodeDecodeError, e:
        return webob.Response(status=400, body="""
            <h1>Bad Request</h1>
            <p>We apologize. Your request includes characters the server
            cannot understand. Please click the back button and
            check your request for non-standard characters like accent
            marks and copy-paste data from word processing
            programs.</p>""")(environ, start_response) 
```

# java - 如何在 /sys/ 上写入？安卓

> ID：15692783
> 
> 赞同：0
> 
> 时间：2013-03-28T21:50:04.387
> 
> 标签：java, android, file-io, root

我正在尝试写入**“/sys/devices/virtual/timed_output/vibrator/amp”**文件。

我可以很好地阅读它，问题是当我尝试编写它时。

这是我的代码：

```
public static void writeValue(String filename, String value) {
    //FileOutputStream fos = null;
    DataOutputStream os = null;
    try {
        /*fos = new FileOutputStream(new File(filename), false);
        fos.write(value.getBytes());
        fos.flush();*/

        Process p;

        p = Runtime.getRuntime().exec("su");
        os = new DataOutputStream(p.getOutputStream());  

       os.writeBytes(value + " > " + filename + "\n");
       os.writeBytes("exit\n");

       Log.w(TAG, value + " >> " + filename);

       os.flush();           
    } catch (IOException e) {
        Log.w(TAG, "Could not write to " + filename);
    } finally {
        if (os != null) {
            try {
                os.close();
            } catch (IOException e) {
                Log.d(TAG, "Could not close " + filename, e);
            }
        }
    }
} 
```

我总是收到来自`Log.w(TAG, "Could not write to " + filename);`

我该如何处理呢？我必须使用一些权限吗？是否必须全部重新制作以匹配 root 访问权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:52:11.897

普通的 SDK 应用程序只能读取系统的该部分。您将需要 root 设备，并在`su`shell 中执行命令以在此处写入。

此外，该`amp`文件并非在所有设备上都存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:13:06.843

```
os.writeBytes(value + " > " + filename + "\n"); 
```

是错的。尝试

```
os.writeBytes("echo '"+value + "' > " + filename + "\n"); 
```

或者

```
os.writeBytes("echo -n '"+value + "' > " + filename + "\n"); 
```

.

# visual-c++ - 管理多个 CDHtmlDialog 窗口之间的焦点

> ID：15692785
> 
> 赞同：0
> 
> 时间：2013-03-28T21:50:13.727
> 
> 标签：visual-c++, mfc

我创建一个模态 CDHtmlDialog 作为我的根窗口，然后创建一个非模态 CDHtmlDialog 窗口。根据事件，在两个窗口之间单击会转移焦点，但根窗口始终位于后面。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:45:06.783

无模式对话框始终位于根对话框之上，因为无模式对话框是作为根对话框的子级创建的。您可以通过使无模式对话框成为桌面窗口的子级来更改此设置，如下所示：

```
m_MyModelessDlg.Create(IDD_DIALOG1, GetDesktopWindow());
m_MyModelessDlg.ShowWindow(SW_SHOWNORMAL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:54:01.213

使用桌面似乎没有帮助。我怀疑是因为 CDialogs 的行为。我通过创建一个隐藏的根窗口并将我的所有对话框（CDHtmlDialog's）作为它的子级来修复它。

# jquery - 用于 Chrome 打包应用程序的 jQuery？

> ID：15692787
> 
> 赞同：0
> 
> 时间：2013-03-28T21:50:19.617
> 
> 标签：jquery, html, google-chrome

我对编写 chrome 应用程序完全陌生。我现在要做的是一个简单的抽认卡应用程序。如何让 jQuery 在我的打包应用程序中工作？这是html：

```
<!DOCTYPE html>
<html>

<link rel="stylesheet" href="style.css" type="text/css">

<head>
    <script src="jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $('#navbar').fadeOut(500);
        });
    </script>
</head>

<body>
    <div id="navbar">
        <ul>
            <li>Add</li>
            <li>Edit</li>
            <li>My Stacks</li>
        </ul>
    </div>
</body>

</html> 
```

我只是想淡出我的导航栏来测试 jQuery 是否有效（它没有）。我试图在本地和从谷歌链接到 jQuery，但都不起作用。我尝试在 manifest.json 中使用 content_scripts 添加它，但是当我重新加载应用程序时，它说 content_scripts 仅允许用于扩展和旧版打包应用程序。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:41:59.267

我想到了。你不能有内联脚本，你必须从外部链接到它们。

# c# - EF Code First 比较空值会生成奇怪的查询

> ID：15692788
> 
> 赞同：5
> 
> 时间：2013-03-28T21:50:22.907
> 
> 标签：c#, linq, entity-framework, ef-code-first

我正在尝试列出一些类别（父子关系），并且我有以下命令仅列出父类别

```
context.Categories.Where(c => c.ParentId == null) 
```

但是EF生成的sql查询没有返回任何东西

EF生成的sql查询

```
SELECT 
CAST(NULL AS int) AS [C1], 
CAST(NULL AS varchar(1)) AS [C2], 
CAST(NULL AS bit) AS [C3], 
CAST(NULL AS int) AS [C4]
FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
WHERE 1 = 0 
```

类别模型

```
public class Category
{
  public int Id { get; set; }
  public string Name { get; set; }
  public bool IsActive { get; set; }
  public virtual IList<Category> SubCategories { get; set; }
  internal int? ParentId { get; set; }
  public virtual Category Parent { get; set; }

  public override bool Equals(object obj)
  {
    var categoryToCompare = obj as Category;
    if (categoryToCompare == null) return false;

    return categoryToCompare.Id == Id;
  }

  public override int GetHashCode()
  {
    return Id.GetHashCode();
  }
} 
```

映射

```
public class CategoryConfiguration : EntityTypeConfiguration<Category>
{
  public CategoryConfiguration()
  {
    ToTable("tbl_category");
    HasKey(c => c.Id);
    Property(c => c.Id).HasColumnName("cd_category");
    Property(c => c.Name).HasColumnName("ds_category");
    Property(c => c.IsActive).HasColumnName("fl_active");
    Property(c => c.ParentId).HasColumnName("cd_base_category").IsOptional();
    HasMany(c => c.SubCategories).WithRequired(c => c.Parent).HasForeignKey(c => c.ParentId);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:21:32.830

我将其发布为答案，因为其中之一**肯定**会起作用：

您的`ParentId`财产需要`public virtual`- 尝试先改变它。

那么，试试`context.Categories.Where(c => !c.ParentId.HasValue)`

那么，试试`context.Categories.Where(c => c.Parent == null)`

我有上述工作正常的应用程序。

那么，试试`context.Categories.Where(c => object.Equals(c.Parent, null))`

最后一个[有点来自 MS 的某个人的黑客攻击](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/d00f5611-4fce-4da4-8f79-802336fdfe1a#42146558-3e0b-4fd6-a11b-6855881f9724)，但显然应该可以工作。

# windows - 让 Maven 只吐出项目的版本（而不是其他以 [INFO] 开头的东西）

> ID：15692789
> 
> 赞同：0
> 
> 时间：2013-03-28T21:50:24.207
> 
> 标签：windows, maven

我曾经`2.1.1:evalute -Dexpression=project.version`获得我的项目的版本，但这也会将其他内容打印到标准输出。无论如何要“关闭”这些`[INFO]`线路吗？

我想应该可以只获得评估表达式的值，在这种情况下，它就是版本。

`grep`顺便说一句，这是在 Windows 上，所以我不能`awk`。

```
 C:\Users\Owner\ mvn org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate  \         
  -Dexpression=project.version

    [INFO] Scanning for projects...
    [INFO] ------------------------------------------------------------------------
    [INFO] Building myproject
    [INFO]    task-segment: [org.apache.maven.plugins:maven-help-plugin:2.1.1:evaluate] (e)
    [INFO] ------------------------------------------------------------------------
    [INFO] [help:evaluate {execution: default-cli}]
    0.1.1-SNAPSHOT
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESSFUL
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 2 seconds
    [INFO] Finished at: Thu Mar 28 17:42:49 EDT 2013
    [INFO] Final Memory: 9M/106M
    [INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:53:49.587

您可以获得的最接近的是`-q`较新版本的 maven 上的命令行选项。

它可能不会剥离一切，但应该剥离噪音

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T00:56:17.150

即使没有`grep`on `Windows`，也有一个[findStr](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/findstr.mspx?mfr=true)。

> **/l**：按字面意思使用搜索字符串。
> 
> **/r**：使用搜索字符串作为***正则表达式***。Findstr 将所有元字符解释为正则表达式，除非您使用**/l**。

此外， [GNUWin](http://gnuwin32.sourceforge.net/)还提供了[用于 Windows 的 Grep](http://gnuwin32.sourceforge.net/packages/grep.htm)。

我希望这可能会有所帮助。

# mongodb - mongodb 数据库快照或插入标志

> ID：15692795
> 
> 赞同：0
> 
> 时间：2013-03-28T21:50:58.180
> 
> 标签：mongodb

我有大量的插入操作（每个操作 1000 个文档），并且可能在我的代码工作期间它会失败。

我可以制作某种快照或将一些标志放入数据库，如果出现问题，然后将 db 恢复为标志/快照？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T13:32:34.947

MongoDB 有意[不包括对 ACID 事务的支持](http://docs.mongodb.org/manual/faq/fundamentals/#does-mongodb-support-transactions)，但是您可以根据您的用例实现自己的事务语义。

对于批量插入，一个简单的方法是：

*   在要插入的文档中包含具有唯一批次 ID 的字段
*   使用 MongoDB[批量插入](http://docs.mongodb.org/manual/core/write-operations/#bulk-inserts)方法提高效率
*   出错时，删除失败的 batchID 中的文档（假设您希望插入全有或全无）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:14:31.337

没有简单的方法可以做到这一点，比如一个简单的标志。我认为对您来说最好的选择是实施两阶段提交方法，在这里您可以看到实施它的详细说明：http: [//docs.mongodb.org/manual/tutorial/perform-two-phase-commits/](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)

问候， 莫西

# iphone - UI Activity View Controller 以不同的语言显示？-iOS

> ID：15692800
> 
> 赞同：3
> 
> 时间：2013-03-28T21:51:18.263
> 
> 标签：iphone, objective-c, ipad, uiactivityviewcontroller

我正在创建一个应用程序，用户可以在其中共享不同的表单。奇怪的是，当我在 iPhone 上测试应用程序时，Activity View 控制器工作正常![在此处输入图像描述](../Images/9a847dad82be44fc9a8862ce300c984c.png)

但是当我在 ipad 上做完全相同的事情时，但在不同的故事板上。它这样做：

![在此处输入图像描述](../Images/834e0dd17808aac31019cc8e2c00047c.png)

以下是这两个视图获取操作的代码：

```
#import "FluteS.h"
#import "TUSafariActivity.h"
#import "ARChromeActivity.h"
@interface FluteS ()

@end

@implementation FluteS

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
   self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
   if (self) {
    // Custom initialization
   }
return self;
}

-(IBAction)actionButton:(id)sender;{

    NSLog(@"actionButton pressed");
    NSBundle *bundle=[NSBundle mainBundle];
    NSString *filePath = [bundle pathForResource:@"Flute" ofType: @"pdf"];
    NSURL *fileURL= [NSURL URLWithString:@"http://www.friendswoodmustangband.org/wp-content/uploads/2012/04/Flute-Audition-Scales1.pdf"];
    NSURL *fileUrl = [NSURL fileURLWithPath:filePath];

    NSArray *activityItems = @[fileUrl, fileURL];
    ARChromeActivity *chromeActivity = [[ARChromeActivity alloc] init];

    TUSafariActivity *TUSafari = [[TUSafariActivity alloc] init];

    NSArray *applicationActivities = [NSArray arrayWithObjects:TUSafari,chromeActivity, nil];

    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities: applicationActivities];
    activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:applicationActivities];

    activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePostToWeibo];
    [self presentViewController:activityVC animated:YES completion:nil];
}
- (void)viewDidLoad
{
   [super viewDidLoad];
    NSBundle *bundle=[NSBundle mainBundle];
    NSString *filePath = [bundle pathForResource:@"Flute" ofType: @"pdf"];
    NSURL *fileUrl = [NSURL fileURLWithPath:filePath];
    NSURLRequest *request = [NSURLRequest requestWithURL:fileUrl];
    [_webView loadRequest:request];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我已经检查了 Info.plist 的本地化部分，但我无法弄清楚为什么它可以在 iPhone 上运行，但在 iPad 上却不行。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:35:52.140

在呈现视图控制器时，您必须使用当前设备的适当方式来执行此操作。在 iPad 上，您必须在弹出窗口中显示视图控制器。在 iPhone 和 iPod touch 上，您必须以模态方式呈现。

您可以将以下代码用于 iPad。

```
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[@"something"] applicationActivities:nil];
self.popover = [[UIPopoverController alloc] initWithContentViewController:activityViewController];
self.popover.delegate = self;
[self.popover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

希望它可以帮助你。

# nhibernate - 休眠和窗口函数

> ID：15692807
> 
> 赞同：0
> 
> 时间：2013-03-28T21:51:45.257
> 
> 标签：nhibernate, window-functions

有什么方法可以让 NHibernate 使用 Window 函数？

具体来说，我希望创建如下查询：

```
SELECT
  date,
  SUM(Price) OVER (ORDER BY date)
FROM purchases
GROUP BY date 
```

我在网上搜索并找不到任何关于窗口函数和 NHibernate 的信息

具体来说，我使用 NHibernate 的 QueryOver 接口。

如果不可能，还有哪些其他解决方案可以在我的代码中保持数据库独立性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:06:41.850

As far as I know, you can't do that with the `QueryOver` API.

What I would do to keep as DB independant as possible would be to consider the windowed query as a join between your table and a group by query. Then to write a QueryOver which would lead this join.

Considering you query it would lead to this : (though the example does not seem to really show the need for a windowed query)

```
SELECT
  purchases.date,
  purchasesGroup.priceSum
FROM 
     purchases
INNER JOIN 
     (SELECT date, SUM(Price) as priceSum  FROM purchases GROUP BY date) 
       AS purchasesGroup
on purchases.date = purchasesGroup.date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:37:07.647

您可能会为此使用视图。尽管您实际上是在将依赖项迁移到数据库模式，但这至少可以抽象出一点。

我最近也遇到了这种问题，我开始意识到我经常尝试以一种与持久实体无关的方式使用 NHibernate。如果我是 Ayende Rahien，我可能会知道该怎么做，但因为我不是，所以当我只需要只读聚合结果（例如数据统计信息）时，我通常会混入一点 Dapper。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:02:43.350

好问题，但不幸的是，我从未在 NHibernate 本身中看到任何允许它生成这样一个窗口函数的代码。

您唯一的选择是使用命名查询。在您的命名查询中，您可以手动输入 SQL 或调用存储过程。

您说您希望保持您的解决方案数据库独立。我个人从来没有关心过像我一直使用 SQL Server 那样做的事情，但我能理解你来自哪里。我听说有几个人使用内存中的 SQLite 解决方案运行他们的集成测试，然后在 SQL Server 或 Oracle 上运行他们的实际代码。

在您的情况下，我不相信您问题中的 SQL 无论如何都符合 ANSI，因此如果您使用命名查询使其独立于数据库，那么不幸的是，您必须以不同的方式重新编写它。

# c# - XNA 游戏在非常奇怪的情况下无法启动

> ID：15692809
> 
> 赞同：1
> 
> 时间：2013-03-28T21:51:52.173
> 
> 标签：c#, c#-4.0, xna, xna-4.0

首先要让路，对不起，如果我遗漏了一些（非常）明显的东西，我对此还是有点陌生​​。

无论如何，我一直在 XNA 中研究小行星克隆，由于某种原因，如果我点击 Start Debugging 按钮，它偶尔会无法启动。我将问题跟踪到我的 AsteroidsManager 类，该类需要一个 int 的初始小行星来生成、最小和最大速度和旋转速度，以及小行星和粒子的两个纹理列表。现在奇怪的是：

```
temp = new AsteroidManager(1, 20, 50, 1, 2, asteroids, particles, true); //With this constructor, the game always starts fine... 
```

但是，如果我增加初始小行星的数量：

```
temp = new AsteroidManager(10, 20, 50, 1, 2, asteroids, particles, true); //This seems to start about 1/3 times in the Visual Studio debugger, but if I launch it without debugging or from the bin folder, it works fine. 
```

最后，如果我将小行星设置为超过 ~20，它永远不会在调试器中启动，如果我尝试从文件夹启动它，进程会出现在任务管理器中，但什么也没有发生。或者它只是在启动时崩溃。老实说，我不知道是什么原因造成的，如果需要，我很乐意提供任何代码，但这是我认为相关的：

完整的小行星管理器：

```
public class AsteroidManager
{
    #region Declarations

    public List<GameObject> Asteroids { get; set; }
    public bool RegenerateAsteroids { get; set; }

    public readonly int InitialAsteroids;
    public readonly float MinVelocity;
    public readonly float MaxVelocity;
    public readonly float MinRotationalVelocity; //in degrees
    public readonly float MaxRotationalVelocity; //in degrees
    public readonly List<Texture2D> Textures;
    public readonly List<Texture2D> ExplosionParticleTextures;

    List<ParticleEmitter> emitters;
    Random rnd;

    const int MINPARTICLES = 50;
    const int MAXPARTICLES = 200;
    const int PARTICLEFTL = 40;

    #endregion

    public AsteroidManager(
        int initialAsteroids,
        float minVel,
        float maxVel,
        float minRotVel,
        float maxRotVel,
        List<Texture2D> textures,
        List<Texture2D> explosionParticleTextures,
        bool regenAsteroids)
    {
        rnd = new Random();

        InitialAsteroids = initialAsteroids;
        MinVelocity = minVel;
        MaxVelocity = maxVel;
        MinRotationalVelocity = minRotVel;
        MaxRotationalVelocity = maxRotVel;
        Textures = textures;
        ExplosionParticleTextures = explosionParticleTextures;
        RegenerateAsteroids = regenAsteroids;

        Asteroids = new List<GameObject>();
        emitters = new List<ParticleEmitter>();

        for (int i = 0; i < InitialAsteroids; i++)
            addAsteroid();
    }

    public void Update(GameTime gameTime)
    {
        for (int i = 0; i < Asteroids.Count; i++)
            Asteroids[i].Update(gameTime);

        for (int i = 0; i < emitters.Count; i++)
            emitters[i].Update(gameTime);

        if (Asteroids.Count < InitialAsteroids && RegenerateAsteroids)
            addAsteroid();
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        for (int i = 0; i < Asteroids.Count; i++)
            Asteroids[i].Draw(spriteBatch);

        for (int i = 0; i < emitters.Count; i++)
            emitters[i].Draw(spriteBatch);
    }

    public void DestroyAsteroid(GameObject asteroid)
    {
        int x = rnd.Next(MINPARTICLES, MAXPARTICLES);
        List<Color> colors = new List<Color>();
        colors.Add(Color.White);

        emitters.Add(new ParticleEmitter( //TODO: Test
            x,
            asteroid.WorldCenter,
            ExplosionParticleTextures,
            colors,
            PARTICLEFTL,
            true,
            1,
            x,
            1f,
            0.3f,
            0f,
            180f));

        Asteroids.Remove(asteroid);
    }

    protected void addAsteroid()
    {
        GameObject tempAsteroid;
        bool isOverlap = false;

        do //Do-While to ensure that the asteroid gets generated at least once
        {
            Texture2D text = Textures.PickRandom<Texture2D>();

            float rot = MathHelper.ToRadians((float)rnd.NextDouble(0f, 359f));
            float rotVel = MathHelper.ToRadians((float)rnd.NextDouble(MinRotationalVelocity, MaxRotationalVelocity));

            int colRadius = (((text.Width / 2) + (text.Height / 2)) / 2); //Get the mean of text's height & width

            Vector2 vel = Vector2.Multiply( //calculate a random velocity
                rot.RotationToVectorFloat(),
                (float)rnd.NextDouble(MinVelocity, MaxVelocity));

            Vector2 worldPos = new Vector2(
                rnd.Next(Camera.WorldRectangle.X, Camera.WorldRectangle.Width),
                rnd.Next(Camera.WorldRectangle.Y, Camera.WorldRectangle.Height));

            tempAsteroid = new GameObject( //init a temporary asteroid to check for overlaps
                text, worldPos, vel, Color.White, false, rot, rotVel, 1f, 0f, colRadius);

            foreach (GameObject asteroid in Asteroids)
            {
                if (tempAsteroid.BoundingBox.Intersects(asteroid.BoundingBox))
                {
                    isOverlap = true;
                    break;
                }
            }

        } while (isOverlap); //if overlapping, loop

        Asteroids.Add(tempAsteroid); //add the temp asteroid
    }
} 
```

完整的游戏对象：

```
public class GameObject
{
    #region Declarations

    public Texture2D Texture { get; set; }
    public Vector2 Origin { get; set; }
    public Color TintColor { get; set; }
    public float Rotation { get; set; } //radians
    public float RotationalVelocity { get; set; }
    public float Scale { get; set; }
    public float Depth { get; set; }
    public bool Active { get; set; }
    public SpriteEffects Effects { get; set; }

    public Vector2 WorldLocation { get; set; }
    public Vector2 Velocity { get; set; }

    public int CollisionRadius { get; set; } //Radius for bounding circle collision
    public int BoundingXPadding { get; set; }
    public int BoundingYPadding { get; set; } //Padding for bounding box collision

    public int TotalFrames
    {
        get //simple get
        { return totalFrames; }
        set //check if given totalFrames is in possible range
        {
            if (value <= (Rows * Columns))
                totalFrames = value;
            else
                throw new ArgumentOutOfRangeException();
        }
    } //Used in spritesheet animation
    private int totalFrames;

    public int CurrentFrame
    {
        get { return currentFrame; }
        set
        {
            currentFrame = (int)MathHelper.Clamp(value, 0, totalFrames);
        }
    }
    private int currentFrame;

    public int Rows { get; set; }
    public int Columns { get; set; }
    public bool Animating { get; set; }

    public float RotationDegrees
    {
        get { return MathHelper.ToDegrees(Rotation); }
        set { Rotation = MathHelper.ToRadians(value); }
    }
    public float RotationVelocityDegrees
    {
        get { return MathHelper.ToDegrees(RotationalVelocity); }
        set { RotationalVelocity = MathHelper.ToRadians(value); }
    }

    public const float VELOCITYSCALAR = 1.0f / 60.0f; //Default to 60fps standard movement

    #endregion

    #region Properties

    public int GetWidth { get { return Texture.Width / Columns; } } //Width of a frame
    public int GetHeight { get { return Texture.Height / Rows; } } //Height of a frame
    public int GetRow { get { return (int)((float)CurrentFrame / (float)Columns); } } //Current row
    public int GetColumn { get { return CurrentFrame % Columns; } } //Current column

    public Vector2 SpriteCenter
    { get { return new Vector2(GetWidth / 2, GetHeight / 2); } } //Get this Sprite's center

    public Rectangle WorldRectangle //get rectangle in world coords with width of sprite
    {
        get
        {
            return new Rectangle(
                (int)WorldLocation.X,
                (int)WorldLocation.Y,
                GetWidth,
                GetHeight);
        }
    }

    public Rectangle BoundingBox //get bounding box for use in collision detection
    {
        get
        {
            return new Rectangle( //Get bounding box with respect to padding values
                (int)WorldLocation.X + BoundingXPadding, 
                (int)WorldLocation.Y + BoundingYPadding,
                GetWidth - (BoundingXPadding * 2),
                GetHeight - (BoundingYPadding * 2));
        }
    }

    public Vector2 ScreenLocation
    { get { return Camera.GetLocalCoords(WorldLocation); } } //get screen coordinates

    public Rectangle ScreenRectangle
    { get { return Camera.GetLocalCoords(WorldRectangle); } } //get screen rectangle

    public Vector2 WorldCenter
    { 
        get { return WorldLocation + SpriteCenter; }
        set { WorldLocation = value - SpriteCenter; }
    } //gets/sets the center of the sprite in world coords

    public Vector2 ScreenCenter
    { get { return Camera.GetLocalCoords(WorldLocation + SpriteCenter); } } //returns the center in screen coords

    #endregion

    public GameObject( //main constructor, /w added optional parameters and call to SpriteBase init
        Texture2D texture,
        Vector2 worldLocation,
        Vector2 velocity,
        Color tintColor,
        bool animating = false,
        float rotation = 0f, //default to no rotation
        float rotationalVelocity = 0f,
        float scale = 1f, //default to 1:1 scale
        float depth = 0f, //default to 0 layerDepth
        int collisionRadius = 0, //collision radius used in bounding circle collision, default to 0 or no bounding circle
        int xPadding = 0, //amount of x padding, used in bounding box collision, default to 0, or no bounding box
        int yPadding = 0, //amount of y padding, used in bounding box collision, default to 0, or no bounding box
        SpriteEffects effects = SpriteEffects.None,
        int totalFrames = 0,
        int rows = 1,
        int columns = 1)

    {
        if (texture == null) { throw new NullReferenceException("Null texture reference."); }
        Texture = texture; //assign parameters
        WorldLocation = worldLocation; 
        TintColor = tintColor; 
        Rotation = rotation;
        RotationalVelocity = rotationalVelocity;
        Scale = scale;
        Depth = depth;
        Effects = effects;
        Velocity = velocity;
        Animating = animating;
        Active = true;

        BoundingXPadding = xPadding; BoundingYPadding = yPadding; CollisionRadius = collisionRadius; //assign collision data
        Rows = rows; Columns = columns; this.TotalFrames = totalFrames; //assign animation data

        Origin = SpriteCenter; //assign origin to the center of a frame
    }

    #region Methods

    public virtual void Update(GameTime gameTime)
    {
        if (Active) //if object is active
        {
            WorldLocation += Velocity * (1f / 60f);
            Rotation += RotationalVelocity; //Rotate according to the velocity
            //Move by Velocity times a roughly 60FPS scalar

            if (TotalFrames > 1 && Animating)
            {
                CurrentFrame++;
                if (CurrentFrame >= TotalFrames)
                    CurrentFrame = 0; //Loop animation
            }

            if (Camera.IsObjectInWorld(this.WorldRectangle) == false)
            {
                if (Camera.LOOPWORLD) //if world is looping and the object is out of bounds
                {
                    Vector2 temp = WorldCenter; //temporary Vector2 used for updated position

                    //X-Axis Component
                    if (WorldCenter.X > Camera.WorldRectangle.Width)
                        temp.X = Camera.WorldRectangle.X - (GetWidth / 2); //If X is out of bounds to the right, move X to the left side
                    if (WorldCenter.X < Camera.WorldRectangle.X)
                        temp.X = Camera.WorldRectangle.Width + (GetWidth / 2); //If X is out of bound to the left, move X to the right side

                    //Y-Axis Component
                    if (WorldCenter.Y > Camera.WorldRectangle.Height)
                        temp.Y = Camera.WorldRectangle.Y - (GetHeight / 2); //If Y is out of bounds to the bottom, move Y to the top
                    if (WorldCenter.Y < Camera.WorldRectangle.Y)
                        temp.Y = Camera.WorldRectangle.Height + (GetHeight / 2); //If Y is out of bounds to the top, move Y to the bottom

                    WorldCenter = temp; //Assign updated position
                }

                if (Camera.LOOPWORLD == false)
                {
                    Active = false; //if the object is outside the world but the LOOPWORLD constant is false, set inactive
                }
            }
        }
    }

    public virtual void Draw(SpriteBatch spriteBatch)
    {
        if (Active)
        {
            if (TotalFrames > 1 && Camera.IsObjectVisible(WorldRectangle)) //if multi-frame animation & object is visible
            {
                Rectangle sourceRectangle = new Rectangle(GetWidth * GetColumn,
                    GetHeight * GetRow, GetWidth, GetHeight); //get source rectangle to use

                spriteBatch.Draw(
                    Texture,
                    ScreenCenter,
                    sourceRectangle, //use generated source rectangle
                    TintColor,
                    Rotation,
                    Origin,
                    Scale,
                    Effects,
                    Depth);
            }
            else //if single frame sprite
            {
                if (Camera.IsObjectVisible(WorldRectangle)) //check if sprite is visible to camera
                {
                    spriteBatch.Draw(
                        Texture,
                        ScreenCenter, //center of the sprite in local coords
                        null, //full sprite
                        TintColor,
                        Rotation,
                        Origin,
                        Scale,
                        Effects, //spriteeffects
                        Depth); //layerdepth
                }
            }
        }
    } 

    public bool IsBoxColliding(Rectangle obj) //bounding box collision test
    {
        return BoundingBox.Intersects(obj);
    }

    public bool IsBoxColliding(GameObject obj) //overload of previous which takes a GameObject instead of a rectangle
    {
        if (BoundingBox.Intersects(obj.BoundingBox))
            return true;
        else
            return false;
    }

    public bool IsCircleColliding(Vector2 objCenter, float objRadius)
    {
        if (Vector2.Distance(WorldCenter, objCenter) <
            (CollisionRadius + objRadius))  //if the distance between centers is greater than the sum
            return true;                    //of the radii, collision has occurred
        else
            return false; //if not, return false
    }

    public bool IsCircleColliding(GameObject obj) //overload of previous which takes a GameObject instead of loose values
    {
        if (Vector2.Distance(this.WorldCenter, obj.WorldCenter) <
            (CollisionRadius + obj.CollisionRadius))
            return true;
        else
            return false;
    }

    public void RotateTo(Vector2 point) //rotates the GameObject to a point
    {
        Rotation = (float)Math.Atan2(point.Y, point.X);
    }

    protected Vector2 rotationToVector()
    {
        return Rotation.RotationToVectorFloat();
    } //local version of extension method

    #endregion
} 
```

游戏1平局：

```
 protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        spriteBatch.Begin(); //BEGIN SPRITE DRAW

        fpsDisplay.Draw(spriteBatch);
        temp.Draw(spriteBatch);

        spriteBatch.End(); //END SPRITE DRAW
        base.Draw(gameTime);
    } 
```

游戏1更新：

```
 protected override void Update(GameTime gameTime)
    {
        InputHandler.Update(); //update InputHandler

        if (InputHandler.IsKeyDown(Keys.Left))
            Camera.Position += new Vector2(-3f, 0f);
        if (InputHandler.IsKeyDown(Keys.Right))
            Camera.Position += new Vector2(3f, 0f);
        if (InputHandler.IsKeyDown(Keys.Up))
            Camera.Position += new Vector2(0f, -3f);
        if (InputHandler.IsKeyDown(Keys.Down))
            Camera.Position += new Vector2(0f, 3f);

        fpsDisplay.Value = (int)Math.Round(1 / gameTime.ElapsedGameTime.TotalSeconds, 0);
        //calculate framerate to the nearest int

        temp.Update(gameTime);

        base.Update(gameTime);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:31:53.740

我猜你的重叠代码永远不会找到放置小行星的位置。它进入一个永不退出的近乎无限（或者如果空间被正确覆盖，则可能是无限）循环。您*可以*使用给出多次尝试的计数器，它只是“放弃”。或者你可以增加他们可以生成的游戏区域的最大大小，或者减小他们的大小；这将减少这种无限循环发生的可能性，但在有足够多的小行星的情况下不会使其成为不可能。

```
int attempts = 0;

do //Do-While to ensure that the asteroid gets generated at least once
{
    attempts++;
    ...
    foreach (GameObject asteroid in Asteroids)
    {
        if (tempAsteroid.BoundingBox.Intersects(asteroid.BoundingBox))
        {
            isOverlap = true;
            break;
        }
    }

} while (isOverlap && attempts < 20); //if overlapping, loop, give up after 20 tries

if (attempts == 20)
{
    //log it! Or fix it, or something!
} 
```

即使你通过增加游戏大小或减小小行星大小来“修复”这个问题，我仍然建议你让它运行最大次数以避免无限循环。

# android - 通过相机功能或照片库上传图像

> ID：15692812
> 
> 赞同：0
> 
> 时间：2013-03-28T21:51:58.830
> 
> 标签：android, android-camera, image-uploading, photo-gallery

我在上传图片时遇到了问题。我有一个应用程序，当用户单击“上传图像”时，它们会显示一个警告框，上面写着使用相机或使用照片库。

一旦用户选择了一个，它们就会被触发到相机意图或画廊意图，并且效果很好。获取图像也可以正常工作，即 onActivityResult。

但是，一旦拍摄/选择了图像，我想将其上传到我的服务器，这就是问题的发生。只有 CAMERA 图像可以添加到我的 BasicNameValuePair 我如何编码以便如果选择了相机选项然后添加该图像或者如果选择了照片库将该图像上传到服务器？？？？

线程加载线程 = 新线程（）{

```
 @Override
        public void run() {
            // TODO Auto-generated method stub
            try{

                if (cameraImage.getByteCount()!=0)
                {   
                    ByteArrayOutputStream BArrayOutPut = new ByteArrayOutputStream();
                    cameraImage.compress(Bitmap.CompressFormat.JPEG, 100, BArrayOutPut);
                    byte [] byteArray = BArrayOutPut.toByteArray();
                    String capturedImageInString = Base64.encodeBytes(byteArray);

                    Log.i("Camera_Image","Image " +capturedImageInString);
                    try {
                    nvp.add(new BasicNameValuePair("Camera_Image", capturedImageInString)); 
                    }catch (Exception e){Log.i("nvpADD","Error is " +e.toString());}
                }else if (uploadImage.getByteCount()!=0){
                    try{
                        ByteArrayOutputStream BArrayOutPut = new ByteArrayOutputStream();
                        uploadImage.compress(Bitmap.CompressFormat.JPEG, 100, BArrayOutPut);
                        byte [] byteArray = BArrayOutPut.toByteArray();
                        String uploadImageInString = Base64.encodeBytes(byteArray);

                        Log.i("log_Upload","UploadedImage " +uploadImageInString);

                        nvp.add(new BasicNameValuePair("Camera_Image", uploadImageInString));

                    }catch (Exception e){
                        Log.e ("LOG_IMAGEUPLOAD", "Error uploading Image "+e.toString());e.printStackTrace();
                        }

                }

                // Get input values of EditTexts
                String UserName = username.getText().toString().trim();
                String ProductTitle = productTitle.getText().toString().trim();
                String ProductPrice = productPrice.getText().toString().trim();
                String ProductDescription = productDescription.getText().toString().trim();
                String ProductCategory = productCategory.getSelectedItem().toString().trim();

                //Adding string values to the array
                nvp.add(new BasicNameValuePair("TextView_Username", UserName));                             
                nvp.add(new BasicNameValuePair("EditText_Title", ProductTitle));
                nvp.add(new BasicNameValuePair("EditText_Price", ProductPrice));
                nvp.add(new BasicNameValuePair("EditText_Description", ProductDescription));
                nvp.add(new BasicNameValuePair("Spinner_Category", ProductCategory));

                httpPost.setEntity(new UrlEncodedFormEntity(nvp));

            ResponseHandler<String> RegisterHandler = new BasicResponseHandler();
            final String respond = httpClient.execute(httpPost,RegisterHandler);

            runOnUiThread(new Runnable() { 
```

# wicket - Wicket 1.5.10 的 WiQuery 版本

> ID：15692813
> 
> 赞同：0
> 
> 时间：2013-03-28T21:52:01.093
> 
> 标签：wicket, wicket-1.5, wiquery

哪个 WiQuery 版本适用于 Wicket 1.5.10？它是 WiQuery 1.5.8（1.5.x 分支的最后一个）还是可以使用新版本 6.6.0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T17:03:51.803

正如[WiQuery 项目页面](https://code.google.com/p/wiquery/)所说，版本 6.x 已针对 Wicket 6.x 进行编译，因此您将无法将其与 Wicket 1.5 一起使用。

针对 1.5 编译并在 Maven 中心可用的最新 WiQuery 版本是 1.5.8。

# c++ - ld：找不到 -lboost_system 的库 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

> ID：15692814
> 
> 赞同：1
> 
> 时间：2013-03-28T21:52:06.390
> 
> 标签：c++, macos, boost

在尝试了几种解决方案之后，我想我需要一些帮助来了解如何为 Mac OSX Lion 正确构建 Boost，在 XCode 4 上构建跨平台应用程序但没有成功 =s

我已按照[本](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html)指南进行操作。并按顺序执行以下命令：

```
cd /Users/me/Documents/boost_1_53_0
./bootstrap.sh --prefix=installation
cd /Users/me/Documents/boost_1_53_0/tools/build/v2
./bootstrap.sh
./b2 install --prefix=installation
export PATH=$PATH:installation/bin
cd /Users/me/Documents/boost_1_53_0
./b2 --build-dir=installation toolset=darwin cxxflags="-arch i386" address-model=32 architecture=x86 stage 
```

尝试在 XCode 上编译应用程序后，我得到了问题标题中的错误，并进行了以下编辑：

将这些库添加到“构建阶段”下的“使用库链接二进制文件”中：

```
libboost_filesystem.dylib
libboost_system.dylib 
```

并将“$(SRCROOT)/../boost_1_53_0”添加到标题和库搜索路径。

在 Stackoverflow 上查看其他一些问题，很多人似乎使用 makefile 构建提升，并在 makefile 中传递诸如 LDFLAGS=-L/opt/local/lib 之类的东西；

我在哪里可以找到构建 boost 的好教程或示例？我没有制作自己的 makefile 的经验，尽管我在这里和那里进行了一些简单的编辑。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T06:49:29.407

检查你的 boost dylib 在哪里。可能是在“$(SRCROOT)/../boost_1_53_0”中的某个中间目录下？例如“$(SRCROOT)/../boost_1_53_0/lib”。如果是这样，将整个路径添加到构建设置中的“库搜索路径”。
顺便说一句：您确定要动态链接而不是静态链接吗？

# javascript - 将 onchange 事件添加到 FormHelper 表单

> ID：15692819
> 
> 赞同：0
> 
> 时间：2013-03-28T21:52:31.347
> 
> 标签：javascript, cakephp, forms, cakephp-2.2

我有一个充满复选框的表单，我正在尝试通过 AJAX 更新表单选项（因为选择了一个选项，其他选项受到限制）。我通过提交按钮完成了这项工作，但我想为选择框完成 onchange 。（是的，我知道提交表单是一种不寻常的用法）。

我尝试将 onchange 添加到输入的属性数组，但它不起作用。标签，类等其他东西都可以很好地应用，但 onchange 没有。这是复选框列表之一：

```
echo $this->Form->input('Sale.LocationID', array(
        'label' => 'LocationID:',
        'options'=>$locations,
        'multiple' => 'checkbox',
        'onchange'=>"this.form.submit()",
        )); 
```

有没有办法以 CakePHP 标准方式向我的复选框添加 onchange 事件，或者我必须在没有 Formhelper 的情况下构建复选框来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:16:50.097

使用内联事件处理效率不是很高，您是否考虑过使用 jQuery 和事件委托？

在视图文件的末尾；

```
// Using 'heredoc' here so we don't have to escape quotes
$script = <<< JS

    // this will handle click events on any checkbox on the page
    $(document).on("click", "input[type='checkbox']", function(){
        // or AJAX post here
        this.form.submit();
    });
JS;  // note: must be at the start of the line, no space before JS

// Append the script to the buffer
$this->Js->buffer($script); 
```

就在你的布局内部之前（例如default.ctp）

```
// output the JavaScript buffer
echo $this->Js->writeBuffer(); 
```

# c# - 后台工作程序运行时 WPF 更新文本框

> ID：15692820
> 
> 赞同：1
> 
> 时间：2013-03-28T21:52:31.593
> 
> 标签：c#, wpf, asynchronous, backgroundworker, thread-synchronization

我正在尝试在运行时不断更新我`TextBox`的`BackgroundWorker`。

我正在使用的代码冻结了我的应用程序：

```
worker.RunWorkerAsync();

int i = 1;

while (worker.IsBusy)
{
   myTextBox.Text = i;
   i++;
   System.Threading.Thread.Sleep(2000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:11:03.927

如评论中所述，您必须使用[BackgroundWorker.ReportProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress%28v=vs.100%29.aspx)方法来更新您的 UI 元素...

# sql - 如何为每一行将 DateTime 列增加一秒？

> ID：15692822
> 
> 赞同：2
> 
> 时间：2013-03-28T21:52:33.697
> 
> 标签：sql, sql-server, sql-server-2000

假设我有这个时间值：`09:00:00`

我有一个带有时间列的表，其中有三条记录。

我想用那个时间更新这 3 条记录，但每次（对于每条记录）时间值都会增加一秒。

像这样的东西：

```
ColumnA   ColumnB
1         09:00:00
2         09:00:01
3         09:00:02 
```

我怎样才能做到这一点？

**我的解决方案：**

在我自己的解决方案上工作了一段时间后，这就是我想出的

```
update tor1
set ColumnB = dateadd(s,tor2.inc, ColumnB)
from table1 tor1
inner join (select ColumnA, ROW_NUMBER() OVER (Order by ColumnA) as inc from table1) tor2 on tor1.ColumnA=tor2.ColumnA 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T22:05:28.583

您没有指定任何特定的顺序。

对于不确定/未记录的结果，您可以尝试古怪的更新方法。

```
CREATE TABLE table1
(
    ColumnB datetime NULL
);

INSERT INTO table1 DEFAULT VALUES;
INSERT INTO table1 DEFAULT VALUES;
INSERT INTO table1 DEFAULT VALUES;

DECLARE @ColumnB datetime;

SET @ColumnB = '19000101 09:00:00';

UPDATE table1
SET @ColumnB = ColumnB = DATEADD(s, 1, @ColumnB);

SELECT *
FROM table1;

DROP TABLE table1; 
```

否则，您将需要使用光标或`ROW_NUMBER`在 2000 中找到某种模拟方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T22:28:39.810

这是一个使用#temp 表但不使用不受支持的古怪更新（没有冒犯Martin）并且不依赖神奇的身份排序的版本，这不能保证（没有冒犯Richard）。

```
CREATE TABLE dbo.Whatever
(
  ColumnA INT IDENTITY(1,1), 
  ColumnB DATETIME
);

INSERT dbo.Whatever(ColumnB) SELECT '09:00';
INSERT dbo.Whatever(ColumnB) SELECT '09:00';
INSERT dbo.Whatever(ColumnB) SELECT '09:00';
INSERT dbo.Whatever(ColumnB) SELECT '09:00';
INSERT dbo.Whatever(ColumnB) SELECT '09:00';

-- just to demonstrate a gap
DELETE dbo.Whatever WHERE ColumnA = 3;

SELECT w.ColumnA, w.ColumnB, 
  c = (SELECT COUNT(*) FROM dbo.Whatever WHERE ColumnA < w.ColumnA)
INTO #x
 FROM dbo.Whatever AS w;

UPDATE w
  SET ColumnB = DATEADD(SECOND, x.c, w.ColumnB)
  FROM dbo.Whatever AS w
  INNER JOIN #x AS x
  ON x.ColumnA = w.ColumnA;

SELECT ColumnA, ColumnB FROM dbo.Whatever; 
```

结果：

```
ColumnA  ColumnB
-------  -----------------------
1        1900-01-01 09:00:00.000
2        1900-01-01 09:00:01.000
4        1900-01-01 09:00:02.000
5        1900-01-01 09:00:03.000 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T21:56:01.443

如果您可以假设`ColumnA`是您需要添加的秒数（或像您的示例那样成正比），那么您可以使用它。

```
UPDATE myTable SET ColumnB = DATEADD(s, (ColumnA - 1), ColumnB) 
```

如果没有，您将需要确定每列的排名（谷歌上有很多结果）并添加排名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T22:02:14.203

对于 SQL Server 2005 及更高版本，您可以使用 OVER 子句来控制更新的顺序。

```
;with T as (
    select *, rn=row_number() over (order by columnA)
    from Tbl)
update T
    set columnB = DateAdd(s, rn-1, '09:00:00'); 
```

[SQL小提琴](http://sqlfiddle.com/#!3/80103/2)

对于 SQL Server 2000，您可以使用临时表。使用[INSERT INTO..SELECT 来保证](http://blogs.msdn.com/b/sqltips/archive/2005/07/20/441053.aspx)IDENTITY 列的计算。

```
CREATE TABLE table1
(
    ColumnA int,
    ColumnB datetime NULL
);

INSERT INTO table1 values (1, null);
INSERT INTO table1 values (2, getdate());
INSERT INTO table1 values (3, '02:02:02');

create table #tmp (ColumnA int, ID int identity(0,1))

insert into #tmp
select ColumnA
from table1
order by ColumnA;

update a
set ColumnB = dateadd(s,t.ID,'09:00:00')
from #tmp t
join table1 a on a.ColumnA = t.ColumnA;

select * from table1; 
```

# android - Android：使用传入类的int数组时出错

> ID：15692827
> 
> 赞同：0
> 
> 时间：2013-03-28T21:52:43.007
> 
> 标签：android, arrays, view, android-activity, int

我正在将一个 int 数组从一个类传递到另一个类，但是当我尝试从中访问值时出现错误。我不知道为什么，希望有人能启发我吗？

这是调用第二个类的第一个类：

```
public class ConvertToGrid extends Activity{

DrawGrid v;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...code...
    int[] binArray = {Color.RED, Color.WHITE, Color.YELLOW, ...};

    v = new DrawGrid(this, binArray);
    setContentView(v);
}} 
```

这调用了我的 DrawGrid 视图：

```
public class DrawGrid extends View{

private int[] binary;

public DrawGrid(Context context) {
    super(context);
}

public DrawGrid(Context context, int[] inBinary) {
    super(context);
    binary = inBinary.clone();
}

int sq00c = binary[0];
...etc} 
```

我做错了什么以至于它无法访问这个称为二进制的 int 数组？如果我将 int 数组移动到 DrawGrid 中，它可以毫无问题地访问单元格，但是通过我的构造传递它似乎使它无法访问。如果有人问，我不能只在 DrawGrid 中定义数组，因为它是由 ConvertGrid 中的代码定义的。

也许我以错误的方式解决这个问题，并且有更好的方法来传递 int 数组？谢谢

编辑：

日志猫：

```
E/AndroidRuntime(12035): FATAL EXCEPTION: main
E/AndroidRuntime(12035): java.lang.RuntimeException: Unable to start activity ComponentInfo{bras2756.ox.ac.uk.colourgrid/bras2756.ox.ac.uk.colourgrid.ConvertToGrid}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:54:15.593

你不能这样做，因为你的`int sq00c = binary[0];`类型语句在方法体之外，因此在你的构造函数被调用之前被执行，这使得`binary`数组为空。因此，当您尝试访问其中的数据时，您会遇到`ArrayIndexOutOfBounds`异常。

尝试使用：

```
public class DrawGrid extends View{

    private int[] binary;
    private int sq00c;
    etc....

    public DrawGrid(Context context) {
        super(context);
    }

    public DrawGrid(Context context, int[] inBinary) {
        super(context);
        binary = inBinary;
        sq00c = binary[0];
        ...etc
    }
} 
```

我已经将 int 声明和赋值一分为二。int 仍然在类级别声明，但仅在调用构造函数时才被赋予一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:02:18.643

通过看到异常似乎这是你的问题

Clone() 创建一个浅拷贝检查这个[链接](https://stackoverflow.com/questions/5821851/does-calling-clone-on-an-array-also-clone-its-contents)

我认为以下修改将解决您的问题

```
public DrawGrid(Context context, int[] inBinary) {
super(context);
binary = inBinary; //update to this
} 
```

# google-places-api - Google Places Search - Next Page Token 返回相同的结果

> ID：15692829
> 
> 赞同：39
> 
> 时间：2013-03-28T21:52:47.713
> 
> 标签：google-places-api

当我打电话

```
https://maps.googleapis.com/maps/api/place/nearbysearch/xml?location=42.9825,-81.254&radius=50000&name=Medical%22Clinic&sensor=false&key=[KEY GOES HERE] 
```

我得到了一组带有 next_page_token 可用的结果

现在如果我也这样做

```
https://maps.googleapis.com/maps/api/place/nearbysearch/xml?location=42.9825,-81.254&radius=50000&name=Medical%22Clinic&sensor=false&key=[KEY GOES HERE]&next_page_token=[NEXT PAGE TOKEN GOES HERE] 
```

我得到与第一个查询相同的结果，而不是下一组结果

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-23T23:14:21.203

参数应该是`pagetoken`，而不是“next_page_token”。

试试这个：

```
https://maps.googleapis.com/maps/api/place/nearbysearch/xml?location=42.9825,-81.254&radius=50000&name=Medical%22Clinic&sensor=false&key=[KEY GOES HERE]&pageToken=[NEXT PAGE TOKEN GOES HERE] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-06T12:48:33.987

第一次请求必须使用不带 pagetoken 的参数，而以下请求仅使用 pagetoken 参数，例如：

第一个请求

```
https://maps.googleapis.com/maps/api/place/nearbysearch/xml?location=42.9825,-81.254&radius=50000&name=Medical%22Clinic&sensor=false&key=[KEY GOES HERE]
```

其他要求：

```
https://maps.googleapis.com/maps/api/place/nearbysearch/xml?key=[KEY GOES HERE]&pagetoken=[NEXT PAGE TOKEN GOES HERE]
```

如果在后续调用中输入除了 pagetoken 和 key 之外的任何参数，在响应中状态将设置为 INVALID_REQUEST

# ipad - iOS模拟器是否有能力模拟设备的相机？

> ID：15692838
> 
> 赞同：1
> 
> 时间：2013-03-28T21:53:40.983
> 
> 标签：ipad, ios6, ios-simulator, uiimagepickercontroller, xcode4.5

只是为了确保我的所有代码都正确，这是我的头文件：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIImagePickerControllerDelegate,UINavigationControllerDelegate> {

    IBOutlet UIImageView *imageView;
    IBOutlet UIButton *choosePhoto;
    IBOutlet UIButton *takePhoto;

}

@property(nonatomic, retain) UIButton *choosePhoto;

@property(nonatomic, retain) UIButton *takePhoto;

@property(nonatomic, retain) UIImageView *imageView;

-(IBAction)getPhoto:(id)sender;
-(IBAction)takePhoto:(id)sender;

@end 
```

然后这是我的实现：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize imageView,choosePhoto,takePhoto;

- (void)viewDidLoad
{
    [super viewDidLoad];

}

-(IBAction)getPhoto:(id)sender {

    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentViewController:picker animated:YES completion:nil];
}

-(IBAction)takePhoto:(id)sender {

    UIImagePickerController *picker2 = [[UIImagePickerController alloc] init];
    picker2.delegate = self;
    picker2.sourceType = UIImagePickerControllerSourceTypeCamera;
    [self presentViewController:picker2 animated:YES completion:nil];
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [picker dismissViewControllerAnimated:YES completion:nil];
    imageView.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
}

-(void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}

@end 
```

我的界面生成器中有两个`UIButtons`和一个`UIIImageView`。测试应用程序构建良好，完全没有问题，但是当我按下选择照片或拍照按钮时，应用程序崩溃。这仅仅是因为模拟器在技术上没有相机或照片库可供选择吗？这是它给我的错误： `UIStatusBarStyleBlackTranslucent`在此设备上不可用。

`Cameratest[8290:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'On iPad, UIImagePickerController must be presented via UIPopoverController`

非常感谢您的建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T22:18:41.230

来自苹果：

[http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.html](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.html)

> **硬件模拟支持**
> 
> iOS 模拟器不模拟加速度计或相机硬件。

此外，H2CO3 是正确的，您遇到了不同的问题，并且错误消息非常清楚：

'在 iPad 上，UIIMagePickerController 必须通过 UIPopoverController 呈现'

快速的谷歌搜索将我指向下面的链接。查看祖拜尔的回应。我认为您需要在 iPad 上运行时在弹出窗口中显示 UIImagePickerController。

[UIStatusBarStyleBlackTranslucent 在此设备上不可用](https://stackoverflow.com/questions/9971081/uistatusbarstyleblacktranslucent-is-not-available-on-this-device)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T07:38:07.213

没有模拟器不支持模拟相机。对于相机，您必须在设备上运行应用程序

# ruby-on-rails - 日志分析 gem 在生产环境中不起作用

> ID：15692845
> 
> 赞同：2
> 
> 时间：2013-03-28T21:54:01.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

由于在我的 rails 应用程序中发现了内存泄漏，我使用 request-log-analyzer 来分析日志。我在 Germfile 中添加了这个：

```
gem "request-log-analyzer" 
```

然后运行

```
$ bundle install 
```

之后我尝试分析日志文件：

```
$ request-log-analyzer log/production.log 
```

它在开发环境中工作。我将应用程序部署到生产环境，并在终端中运行相同的命令，它给出了以下错误：

```
request-log-analyzer: command not found 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T13:42:23.817

尝试使用'-'而不是使用下划线（_）

```
$ `request-log-analyzer log/production.log` 
```

# java - 运行一个简单的 Map-Reduce 示例

> ID：15692855
> 
> 赞同：-2
> 
> 时间：2013-03-28T21:54:38.293
> 
> 标签：java, maven, hadoop

我从这里找到了一个看起来很简单的例子：

[https://github.com/jsoftbiz/mapreduce_1](https://github.com/jsoftbiz/mapreduce_1)

不知道怎么运行？有人可以尝试看看我们如何让这个工作吗？它是命令提示符程序吗？我们应该运行一个 JAR 吗？我应该在 Maven 中为它制作一个包吗？

我确实在本地安装了 Cloudera Hadoop、HBase，并且可以`clusterstart`为此做一个。

但是好吧，假设我得到了一个像上面那样的 Map-Reduce 示例，我该如何运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T00:22:17.347

您真正需要的是在本地机器上下载 zip，然后使用 maven 构建 jar 文件。我做了一个快速的尝试，我能够相当快地构建 JAR，因为 pom.xml 已正确配置以构建 jar：

![在此处输入图像描述](../Images/1fe7db42d89de60ab510e05955bc0522.png)

jar 准备好后，您只需传递带有文件输入（以 zip 格式作为 input.txt 提供）和输出参数的 jar 文件。

# charts - 在 Google 交互式图表上触发切片鼠标悬停

> ID：15692856
> 
> 赞同：4
> 
> 时间：2013-03-28T21:54:41.847
> 
> 标签：charts, interactive

我正在为我的 Google 饼图创建自定义图例，因为我需要更多控制。

我希望我的图例与图表的交互方式与默认图例完全相同。我可以将侦听器添加到选择相应切片的图例行中，例如：

```
myChart.setSelection([{row: selectedIdx]); 
```

这会导致切片像我单击切片一样进行选择，也就是说，它将硬线渲染为距切片几个像素的位置。

没关系，但我真正想要的是复制切片鼠标悬停，即只是切片的“突出显示”。

我认为图表可能正在侦听鼠标悬停，然后检查事件以确定要突出显示的切片，因此我为其附加了一个 onmouseover 侦听器。这似乎是正确的，因为当我将鼠标悬停在一个饼片上时，传入的偶数是：

```
Object {row: 1, column: null} 
```

在我的图例行侦听器中，然后我触发了图表鼠标悬停并传递了相同的事件：

```
google.visualization.events.trigger(myChart, 'onmouseover', {row: selectedIndex, column: null}); 
```

但这没有用。我还尝试通过显式创建 JS 对象以及在所选索引上使用 parseInt。在 Firefox 调试器中，从侦听器的角度来看，这两件事（实际的鼠标悬停、图例触发器）看起来完全相同，但只有实际的鼠标悬停导致切片突出显示。

这让我很困惑。任何人都知道如何做到这一点？理想情况下，我正在寻找类似的东西：

```
var slice = myChart.getSlice(someIndex);
slice.setHighlighted(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T08:54:57.903

恐怕这在谷歌图表中是不可能的。但是，您可以编写代码来分解切片而不是突出显示。从用户的角度来看，它做同样的事情 IMO。

# javascript - 按外部值对多维对象字面量数组进行排序

> ID：15692857
> 
> 赞同：1
> 
> 时间：2013-03-28T21:54:46.597
> 
> 标签：javascript, multidimensional-array, sorting

我正在尝试为一个基于网格的 2D 顶视图棋盘游戏构建一个自制的视线。棋盘上有一个二维数组中的 div，它们全是黑色的，如果玩家在走廊中，它们也是透明的，走廊也是一个带有对象的二维数组。走廊里有各种各样的方块，我需要将它们考虑在内，这样如果 div 出现在玩家所在的走廊中，它们就不会变得透明。

所以我有一个想法，通过 x,y 值对玩家所在的给定走廊中的对象数组进行排序。

```
corridors[i].sort(
    function(a)
    {
        if(a.y > playerObj.position.y && a.x > playerObj.position.x) return 1;
        if(a.y < playerObj.position.y && a.x < playerObj.position.x) return -1;
        return 0;
    }); 
```

但这似乎不起作用。将 div 背景颜色更改为透明仍然从数组的第一个索引开始。我希望它从走廊中的玩家位置开始，然后向外工作，如下所示：

O 只是一个图块，P 是玩家，X 是刚刚透明的图块

噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢

噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢！

噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢

噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢噢！

但是为了让这个场景起作用，我需要找到如何正确地对我的数组进行排序，我希望你能帮我解决这个问题。我在网上看到的例子都有参数a和b，所以不能使用外部变量吗？我是否应该将玩家位置创建为新对象并将其推送到数组然后对数组进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-14T10:01:45.927

好的，我想我解决了。我只是将排序函数存储在一个新数组中并使用它。

# android - 使用 GCC 4.7 构建 Android NDK 时出现权限被拒绝错误

> ID：15692858
> 
> 赞同：0
> 
> 时间：2013-03-28T21:54:49.497
> 
> 标签：android, gcc, android-ndk

在我的`Application.mk`我有以下定义：

`NDK_TOOLCHAIN_VERSION=4.7`

但是我无法到达任何地方，因为我收到以下错误：

> /usr/local/android-ndk-r8d/ndk-build all
> make: execvp: /usr/local/android-ndk-r8d/toolchains/arm-linux-androideabi-4.7: 权限被拒绝

有人有什么想法吗？我检查了工具链子文件夹和 bin 目录的权限，它们在 4.6 和 4.7 中是相同的。

我正在使用带有 Eclipse 3.7.2 (Indigo) 和 Android NDK r8d 的 Ubuntu 12.04。

我刚刚更新到 Android NDK r8e，问题仍然存在。

# python - 如何从 CLI 将变量传递给 python 函数

> ID：15692861
> 
> 赞同：0
> 
> 时间：2013-03-28T21:55:03.723
> 
> 标签：python, command-line-interface

使用 CLI：如何将参数传递给 TOC.action 函数`[1, 'happy']`或`[2, 'sad']` 我尝试过：

> python TOC.action.py [1，“快乐”]
> 
> python TOC.py [1，“快乐”]

目录

```
#!/usr/bin/python
import sys

def one(var):
    print var

def two(var):
    print var

def main(do):
    print "now what"
    print do[0]
    if do[0]==1: one(do[1])
    if do[0]==2: two(do[1]) 

if __name__ == '__main__':
    main(argv)
    print 'Argument List:', str(sys.argv) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:00:27.447

您需要在 shell 中引用参数：

```
$ python TOC.py '[1, "happy"]' "[2, 'sad']" 
```

如果要将参数转换为 python 数据结构，请使用[`ast.literal_eval`](http://docs.python.org/3/library/ast.html#ast.literal_eval)：

```
for arg in sys.argv[1:]:
    print ast.literal_eval(arg) 
```

一旦这变得太复杂，使用[`argparse`](http://docs.python.org/3/library/ast.html#ast.literal_eval)模块来处理读取参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:03:09.753

如果您要使用命令行参数执行任何相当复杂的操作，那么`argparse`确实值得使用。如果您打算以任何频率使用此工具，则尤其如此。

也就是说，还有一些工具旨在让 CLI 更轻松地访问 python 方法，包括[fabric](http://docs.fabfile.org/en/1.6/)、[shovel](https://github.com/seomoz/shovel)（完全披露，我工作的公司编写了它）等。

# php - 将数组插入数据库语法错误

> ID：15692865
> 
> 赞同：0
> 
> 时间：2013-03-28T21:55:22.003
> 
> 标签：php, mysql, arrays, syntax-error

我正在使用[DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)解析来自朋友篮球网站的文章链接。我想将这些值存储在我的数据库中，但出现语法错误代码如下：

```
<?php
include_once ('connect_to_mysql.php');
    include_once ('simple_html_dom.php');
    $html = file_get_html('http://basket-planet.com/ru/');
    $main = $html->find('div[class=mainBlock]', 0);
    $items = array();
        foreach ($main->find('a') as $m){
            $items[] = "$m->plaintext, $m->href";
        }
    //print_r($items);
    $reverse = array_reverse($items);
    print_r($reverse);

    $sql = mysql_query ("INSERT INTO basket_news (article, link) VALUES ".(implode(',', $reverse))."") or die (mysql_error());
?> 
```

这是反向数组的输出（对不起，它是另一种语言）：

```
Array (
  [0] => 07:43 Видео. Дэвид Стерн и арбитры вручают "Лейкерс" победу над "Миннесотой" (1) , /ru/news/9234
  [1] => 07:51 "Чикаго" прервал победную серию "Майами" на отметке 27 (0) , /ru/news/9235
  [2] => 15:02 Кабмин выделил 200 млн грн на подготовку к Евробаскету (0) , /ru/news/9243
  [3] => 20:42 Евролига: ЦСКА ломает мадридский «Реал» (0) , /ru/news/9246
  [4] => 21:45 «Уникаха» побеждает в Стамбуле и молится на «Бамберг» (0) , /ru/news/9248 ) 
```

这是错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 
'07:43 Видео. Дэвид Стерн и ' at line 1 
```

我在这里做错了什么？请指教...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:01:23.380

改成：

```
foreach ($main->find('a') as $m)
{
  $items[] = "'$m->plaintext', '$m->href'";
} 
```

和

```
"INSERT INTO basket_news (article, link) VALUES (" . implode('), (', $reverse) . ")" 
```

此外，请确保您转义您的输入（或理想情况下使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:01:34.890

该字符串没有用引号分隔，也没有在您的代码中转义。如果你使用 mysql ，Values 字符串应该包含在`(`and`)` 所以正确的方式：

```
 $items[] = "('".mysql_real_escape_string($m->plaintext)."','".
                  mysql_real_escape_string($m->href)."')"; 
```

正如其他评论者所说，你应该试试`mysqli`，或者`PDO`在 php.ini 中。查询构建比`mysql_*`函数更容易、更安全。（并且`mysql_*`函数将在下一个版本的 PHP 中被弃用）

# css - css重复部分方式

> ID：15692868
> 
> 赞同：0
> 
> 时间：2013-03-28T21:55:49.583
> 
> 标签：css, repeat

有没有办法只在 div 中重复背景部分。我想为 90% 的 div 设置一个背景重复，然后为底部设置不同的背景。现在我有两个背景，但由于底部有一个渐变来清除它，它被上面的重复-y背景“覆盖”了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:58:33.720

我想说最简单的方法是`<div>`在您当前的内部创建一个额外的内部。将其`<div>`高度设置为 90% 并将背景分配*给*内部`<div>`。

例如

HTML

```
<div id="outer-div">
    <div id="inner-div">...content...</div>
</div> 
```

CSS

```
/* example outer div */
#outer-div
{
    height:500px; /* This is an example rule */
    width: 200px; /* This is an example rule */
}

#inner-div
{
    height:90%;
    background:#000;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:02:17.897

可以使用 CSS3 仅使用一个 div 创建多个背景：

```
background: 
   url(bottom.png) no-repeat,     /* On top,    like z-index: 2; */
   url(top.png) repeat-y,         /*            like z-index: 1; */ 
```

重复您的顶部图像，然后底部图像将显示在此之上。

# ajax - Ajax 正确返回并显示数据，但正在激活错误消息

> ID：15692869
> 
> 赞同：2
> 
> 时间：2013-03-28T21:55:51.067
> 
> 标签：ajax

我正在使用以下代码执行 AJAX：

```
function main() {

    // get the name fields
    var name1 = document.getElementById("name1").value;
    var name2 = document.getElementById("name2").value;

    // Encode the user's input as query parameters in a URL
    var url = "response.php" +
        "?name1=" + encodeURIComponent(name1) +
        "&name2=" + encodeURIComponent(name2);

    // Fetch the contents of that URL using the XMLHttpRequest object
    var req = createXMLHttpRequestObject();
    req.open("GET", url);

    req.onreadystatechange = function () {
        if (req.readyState == 4 && req.status == 200) {
            try {
                // If we get here, we got a complete valid HTTP response
                var response = req.responseText; // HTTP response as a string
                var text = JSON.parse(response); // Parse it to a JS array

                // Convert the array of text objects to a string of HTML
                var list = "";
                for (var i = 0; i < text.length; i++) {
                    list += "<li><p>" + text[i].reply + " " + text[i].name + "</p>";
                }

                // Display the HTML in the element from above.
                var ad = document.getElementById("responseText");
                ad.innerHTML = "<ul>" + list + "</ul>";
            } catch (e) {
                // display error message
                alert("Error reading the response: " + e.toString());
            }
        } else {
            // display status message
            alert("There was a problem retrieving the data:\n" + req.statusText);
        }
    }

    req.send(null);

}

// creates an XMLHttpRequest instance
function createXMLHttpRequestObject() {
    // xmlHttp will store the reference to the XMLHttpRequest object
    var xmlHttp;
    // try to instantiate the native XMLHttpRequest object
    try {
        // create an XMLHttpRequest object
        xmlHttp = new XMLHttpRequest();
    } catch (e) {
        // assume IE6 or older
        try {
            xmlHttp = new ActiveXObject("Microsoft.XMLHttp");
        } catch (e) {}
    }
    // return the created object or display an error message
    if (!xmlHttp) alert("Error creating the XMLHttpRequest object.");
    else return xmlHttp;
} 
```

这完全按计划工作，try 块中的代码完美执行。但是警报*“检索数据时出现问题：”*也被激活，并`req.statusText`显示“OK”。

这怎么可能？if 语句中的代码如何完美激活但同时激活 else 块？

我被难住了，有什么想法吗？

伺服器代码很简单：

```
<?php

if( $_GET["name1"] || $_GET["name2"] ) {
    $data = array(
     array('name' => $_GET["name1"], 'reply' => 'hello'),
     array('name' => $_GET["name2"], 'reply' => 'bye'),
    );
    echo json_encode($data);
}

?> 
```

和 HTML：

```
<input id="name1">
<input id="name2">
<div id="responseText"></div>
<button onclick="main();">Do Ajax!</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:11:45.077

您的条件可能在`req.readyState == 3`（内容已开始加载）时被激活。该`onreadystatechange`方法可以在同一个请求上多次触发。您只关心 4 时会发生什么，因此请重构您的方法以仅在为真时进行测试：

```
var req = createXMLHttpRequestObject();
req.open("GET", url);
req.onreadystatechange = function() {
    if (req.readyState == 4) {
        if (req.status == 200) {
            try {
                // If we get here, we got a complete valid HTTP response
                var response = req.responseText; // HTTP response as a string
                var text = JSON.parse(response); // Parse it to a JS array

                // Convert the array of text objects to a string of HTML
                var list = "";
                for (var i = 0; i < text.length; i++) {
                    list += "<li><p>" + text[i].reply + " " + text[i].name + "</p>";
                }

                // Display the HTML in the element from above.
                var ad = document.getElementById("responseText");
                ad.innerHTML = "<ul>" + list + "</ul>";
            } catch(e) {
                // display error message
                alert("Error reading the response: " + e.toString());
            }
        } else {
            // display status message
            alert("There was a problem retrieving the data:\n" + req.statusText);
        }
    }
};
req.send(null); 
```

# ruby-on-rails - to_json 中的 Mongoid 虚拟属性

> ID：15692872
> 
> 赞同：0
> 
> 时间：2013-03-28T21:56:24.350
> 
> 标签：ruby-on-rails, mongoid

我试图让一些虚拟（非持久）属性显示在一些 Mongoid 模型的 JSON 表示中，但似乎无法让它工作：

```
class MyModel
  include Mongoid::Document

  def virtual_attribute
    @my_attribute || false
  end

  def virtual_attribute=(value)
    @my_attribute=value
  end
end

class MyController
  def myaction
    false_values=MyModel.where( whatever )
    true_values=MyModel.where( something_else ).map{ |model| model.virtual_attribute=true }
    @val['my_models']=false_values+true_values
    render json: @val.to_json( :include => {:my_models => {:methods => %w(virtual_attribute)}} )
  end
end 
```

`virtual_attribute`没有出现在json中。我究竟做错了什么？

*编辑*-好的，所以我想我的实际问题是我无法弄清楚如何在`virtual_attribute`嵌套在根对象中的每个对象数组上调用该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:44:55.637

`to_json`将选项直接传递给数组和对象。`:include`只是一个 Mongoid 的东西：

```
render json: @val.to_json(methods: :virtual_attribute) 
```

# iphone - xamarin studio 在发布版本的设置中有一个调试主机选项吗？

> ID：15692873
> 
> 赞同：2
> 
> 时间：2013-03-28T21:56:29.663
> 
> 标签：iphone, xamarin.ios, xamarin

自从我开始使用新的 Xamarin Studio 构建以来，它已经添加（一遍又一遍 - 每次安装一次！）在我的应用程序的“设置”中添加一个名为“调试设置”的选项，并且“启用”为 ON，并且“Xamarin Studio Host”设置为自动...（这就是为什么我的设备无法再进行调试了吗？）

我的问题是.. 我刚刚使用 RELEASE / AppStore 构建构建，并且我确信 RELEASE 构建已经打开了这个.. 为什么？

我希望它不会出现在我昨天发送给 Apple 的 App Store 二进制文件中。我不希望在最终版本中出现这种垃圾......

我如何禁用正在创建的这个，它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T19:22:21.973

默认情况下，Xamarin Studio 不会在设置包中为 Release、Ad-Hoc 或 App Store 构建添加调试选项。如果您在项目选项中为这些构建配置启用了调试，它只会添加这些选项。

至于一遍又一遍地添加选项，该错误已在 Xamarin Studio 的较新版本中得到修复。

# python - 不必每次都指定命令行选项

> ID：15692874
> 
> 赞同：1
> 
> 时间：2013-03-28T21:56:38.357
> 
> 标签：python, scons

我正在使用 scons 在 Windows 上构建。我的 SConscript 文件采用某些命令行选项来构建，例如 OS=win7 CPU=x86_64 等。每次我从命令行运行 scons 时，我都必须输入这些选项，有没有办法可以将它们放入 SConscript 文件或设置环境变量这样我就不必每次构建时都输入它们。

我尝试设置 SCONSFLAGS 但它似乎没有用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T20:50:59.260

我让它工作，只是在 Windows 上设置一个环境变量， TEST ="OS=win7 CPU=x86_64" 然后运行 ​​scons 脚本作为 scons %TEST%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:24:56.710

如果你在 Windows 上编译，SCons 应该会检测到，所以你不需要设置`OS=win7`.

至于CPU，可以在创建Environment的时候设置，如下：

```
env = Environment(TARGET_ARCH = 'x86_64') 
```

[您可以在此处](http://www.scons.org/doc/production/HTML/scons-user/a5025.html)找到有关 TARGET_ARCH 构造变量的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:05:27.560

制作一个脚本来执行您需要的确切命令，例如：

```
#!/usr/bin/python
import subprocess
subprocess.call([
        'scons',
        'OS=win7',
        'CPU=x86_64']) 
```

# ios - 高分和当前分

> ID：15692877
> 
> 赞同：0
> 
> 时间：2013-03-28T21:57:17.747
> 
> 标签：ios, cocos2d-iphone, 2d-games

我想在屏幕上显示游戏的当前得分和历史最好得分。这是工作，但每次我重新启动游戏时，即使当前分数低于最佳分数，最佳分数也会改变。

```
CCLabelTTF *punteggio;
    NSString *stringa;
    NSString *stringa2;
    CCLabelTTF *punteggioMAX;

    int score;
    int scoreMAX; 
```

有保存分数、添加分数和在游戏结束时重置分数的方法。

```
-(void)aum{
    score++;
    stringa = [NSString stringWithFormat:@"Punteggio: %d",score];
    [punteggio setString:stringa];
}

-(void)res{
    score=0;
    stringa = [NSString stringWithFormat:@"Punteggio: %d",score];
    [punteggio setString:stringa];
}

-(void)sal{
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
    [ud setInteger:score forKey:@"Punteggio"];
    [ud synchronize];
}

-(void)sal2{
    NSUserDefaults *ud=[NSUserDefaults standardUserDefaults];
    [ud setInteger:scoreMAX forKey:@"Punteggio"];
    [ud synchronize];
} 
```

在init方法中：

```
 NSString *fontName = @"score.fnt";
        stringa = [NSString stringWithFormat:@"Punteggio: %d",score];
        punteggio = [CCLabelBMFont labelWithString:stringa fntFile:fontName];
        punteggio.scale = 0.4;
        punteggio.position=ccp(40,altezzaSchermo - 15);
        [self addChild:punteggio];
        NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
        score=[ud integerForKey:@"Punteggio"];

        stringa2 = [NSString stringWithFormat:@"Best Score: %d",score];
        punteggioMAX = [CCLabelBMFont labelWithString:stringa2 fntFile:fontName];
        punteggioMAX.scale = 0.4;
        punteggioMAX.position=ccp(40,altezzaSchermo - 35);
        [self addChild:punteggioMAX];
        scoreMAX=[ud integerForKey:@"punteggioMAX"];

 if(score>scoreMAX) scoreMAX = score;

        [self res]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:01:35.263

您没有保存`punteggioMAX`，因此当您从用户默认值中检索它时它将返回 0。

易于验证：设置断点，检查变量。

# javascript - 如何使用按钮调用javascript函数和代码

> ID：15692880
> 
> 赞同：1
> 
> 时间：2013-03-28T21:57:33.223
> 
> 标签：javascript, asp.net

如何使用按钮调用javascript函数和函数背后的代码？

```
<asp:button id="btnSave" onclick="btnSave();" onclientclick ="return javascriptfunction();" runat="server">

</asp:button> 
```

我也试过这样。但没有回应。

```
<asp:button id="btnSave" onclick="btnSave();" onclientclick ="return true;" runat="server">

</asp:button> 
```

甚至，javascript函数返回true，它没有调用代码隐藏函数。我可以知道原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:12:56.553

代码应该是这样的 -

**JavaScript：**

```
<script>
    function save() 
    {
        return confirm('Are you sure you want to continue?');            
    }
</script> 
```

**ASPX：**

```
<asp:Button ID="btnSave" OnClick="btnSave_Click" OnClientClick="return save();" 
   runat="server" /> 
```

**C#代码隐藏：**

```
protected void btnSave_Click(object sender, EventArgs e)
{
   // Do something
} 
```

它基本上在发回服务器之前调用 JavaScript 函数。是否回发到服务器取决于`return`JavaScript 函数的值。

按钮控件`OnClick`是服务器端事件，因此您需要附加到服务器端单击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:10:27.103

我发现做到这一点的最好方法是使用 RegisterStartupScript 从代码后面

```
 ScriptManager.RegisterStartupScript(this, this.GetType(), "name", "javascriptfunction();", true); 
```

# google-apps-script - 基于单元格值运行函数

> ID：15692886
> 
> 赞同：1
> 
> 时间：2013-03-28T21:57:52.717
> 
> 标签：google-apps-script

如果单元格值为“智能手机”，我想运行一个函数。我已经尝试了几种写这个的方法，但它一直失败并且无法找出正确的输入方法。

```
function ifTest(event){
if(SpreadsheetApp.getActiveSheet().getRange("B11").getValue() = "Smartphone"){ // mobile phone check
    emailMobileRequired(); // Launches the script
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:15:31.580

您需要使用两个等号而不是一个等号来比较两个值并测试是否相等。（阅读更多：[http](http://www.w3schools.com/js/js_comparisons.asp) ://www.w3schools.com/js/js_comparisons.asp ）

在 javascript 中，一个等号是赋值运算符。右边的表达式结果被赋值给左边的变量。（阅读更多：[http](http://www.w3schools.com/js/js_operators.asp) ://www.w3schools.com/js/js_operators.asp ）

# arrays - Prolog - 如何在一系列事实中使用事实？

> ID：15692888
> 
> 赞同：0
> 
> 时间：2013-03-28T21:57:59.243
> 
> 标签：arrays, prolog, label

初学者在这里序言；只是想问一个问题，以摆脱我对作业问题的一些困惑。

假设我有一份事实清单（在这种情况下，是一份他们吃的人和食物的清单以及物品数量），

```
label(test,
  [eats(george,apple,3),
   eats(bob,orange,1),
   eats(joe,steak,1)]). 
```

我如何使用这个数组中的事实？例如，我将如何让它工作？

```
eaten(Person,Food):-
  eats(Person,Food,_). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T23:21:45.907

由于缺乏上下文，我认为您的问题毫无意义。

将事实列表推送到数据库中的一种可能用法：

```
?- maplist(assert, [eats(george,apple,3), eats(bob,orange,1), eats(joe,steak,1)]).
true.

?- eats(Person,Food,_).
Person = george,
Food = apple ;
Person = bob,
Food = orange ;
Person = joe,
Food = steak. 
```

但同样，这都是关于你剩余的规则......

*编辑*通常“信息流”是相反的：我们从数据库事实开始，将相关数据收集到一个列表并处理该列表。Daniel 解释了如何访问列表中的元素。考虑从列表中断言事实之后，您的规则将可以访问事实。使用您列出的规则，之后：

```
?- retractall(eats(_,_,_)),
   maplist(assert, [eats(george,apple,3), eats(bob,orange,1), eats(joe,steak,1)]).

?- eaten(bob,X).
X = orange. 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:26:54.627

我想我明白你在问什么。答案是这样使用`member/2`：

```
eaten(Person, Food) :- 
  label(test, Eating),
  member(eats(Person, Food, _), Eating). 
```

这是你想要的结果吗？

```
?- eaten(P, F).
P = george,
F = apple ;
P = bob,
F = orange ;
P = joe,
F = steak. 
```

根据经验，传递列表可能比将其存储在这样的大块中更“标准”。我可能会说这是一个`eats/3` *结构*列表而不是*事实*，但是这种用法有点模糊了区别，因为数据库中的内容是一个称为 arity 2 的事实，`label`而不是一组称为 3 的事实`eats`。但它们实际上是在数据库中，以一种迂回的方式。有趣的。

这种`member`用于遍历列表的方法也常用于为过程提供选项。`open/4`例如，使用它。

# xml - 修改部分 XML 元素名称并替换为增量编号

> ID：15692889
> 
> 赞同：2
> 
> 时间：2013-03-28T21:58:00.500
> 
> 标签：xml, xslt

是否可以使用 XSLT 将元素名称的一部分更改为具有增量编号的另一个元素名称。

就像我只想在开头用 UPC_ 更改元素名称

```
<product>
    <UPC_US>123</UPC_US>
    <UPC_UK>223</UPC_UK>
    <UPC_JP>345</UPC_JP>
    <other>unchange</other>
</product>
<product>
    <UPC_US>1234</UPC_US>
    <UPC_CA>1235</UPC_CA>
    <other>unchange</other>
</product> 
```

到这个？

```
<product>
    <UPC_1>123</UPC_1>
    <UPC_2>223</UPC_2>
    <UPC_3>345</UPC_3>
    <other>unchange</other>
</product>
<product>
    <UPC_1>1234</UPC_1>
    <UPC_2>1235</UPC_2>
    <other>unchange</other>
</product> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T22:17:14.403

使用 XSLT 可以很容易地实现这一点。首先，您将创建一个模板来匹配以**UPC开头的元素**

```
<xsl:template match="product/*[starts-with(local-name(), 'UPC')]"> 
```

然后，您将根据元素的位置，使用修改后的名称创建一个新元素

```
<xsl:element name="UPC_{position()}"> 
```

请注意此处在创建名称时使用“属性值模板”。花括号表示这是一个要计算的表达式，而不是字面输出。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="product/*[starts-with(local-name(), 'UPC')]">
      <xsl:element name="UPC_{position()}">
         <xsl:apply-templates select="@*|node()"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用您的 XML 时，将输出以下内容

```
<products>
   <product>
      <UPC_1>123</UPC_1>
      <UPC_2>223</UPC_2>
      <UPC_3>345</UPC_3>
      <other>unchange</other>
   </product>
   <product>
      <UPC_1>1234</UPC_1>
      <UPC_2>1235</UPC_2>
      <other>unchange</other>
   </product>
</products> 
```

话虽如此，只有当您的 UPC 元素始终是第一个元素时，它才会起作用。如果你有这个作为输入

```
<product>
    <UPC_US>123</UPC_US>
    <UPC_UK>223</UPC_UK>
    <UPC_JP>345</UPC_JP>
    <other>unchange</other>
</product> 
```

输出将是这个

```
<products>
   <product>
      <UPC_1>123</UPC_1>
      <UPC_2>223</UPC_2>
      <other>unchange</other>
      <UPC_4>345</UPC_4>
   </product>
</products> 
```

如果这不是您想要的，您可以改为使用**xsl:number**来计算元素。试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="product/*[starts-with(local-name(), 'UPC')]">
      <xsl:variable name="count">
         <xsl:number count="*[starts-with(local-name(), 'UPC')]"/>
      </xsl:variable>
      <xsl:element name="UPC_{$count}">
         <xsl:apply-templates select="@*|node()"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

在这种情况下，第二个例子会产生这个

```
<products>
    <product>
        <UPC_1>123</UPC_1>
        <UPC_2>223</UPC_2>
        <other>unchange</other>
        <UPC_3>345</UPC_3>
    </product>
</products> 
```

在这两种情况下，请注意使用 Indentity Transform 模板按原样复制所有其他元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:17:06.377

是的，有可能。`xsl:element`允许您动态创建新元素名称。

# git - 从 Windows 通过 Cygwin 运行 Git

> ID：15692890
> 
> 赞同：32
> 
> 时间：2013-03-28T21:58:07.737
> 
> 标签：git, cygwin

我最近开始将 Cygwin 用于其他目的，并且已经在我的 PC 上安装了 Git。我知道我可以运行可执行文件并将 Git 安装到 Cygwin 中，但由于我已经安装了它，我希望 Cygwin 只使用我的 Windows 安装。我曾尝试研究如何以各种方式使路径重定向但没有成功，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-29T11:14:45.873

我确认 git 和 msysgit 可以在同一台计算机上共存，如“[使用 cygwin 或 msysGit 或两者的 GIT 版本？](https://stackoverflow.com/a/8371700/6309) ”中所述。

1.  适用于 Windows 的 Git (msysgit) 将在其自己的 shell 中运行（dos with[`git-cmd.bat`](https://github.com/msysgit/msysgit/blob/master/git-cmd.bat)或 bash with [`Git Bash.vbs`](https://github.com/msysgit/msysgit/blob/master/share/WinGit/Git%20Bash.vbs)）
    2016 年更新：[msysgit 已过时](https://stackoverflow.com/a/26826359/6309)，新[的适用于 Windows 的 Git](https://github.com/git-for-windows/git/releases)现在[使用 msys2](https://stackoverflow.com/a/35099458/6309)

2.  Cygwin 上的 Git 在[安装了它的包](http://www.celinio.net/techblog/?p=818)之后，将在它自己的 cygwin bash shell 中运行。

![Cygwin 上的 git 包选择](../Images/e9533f373cc9a5184299d9dfa4b50aa8.png)

3.  最后，自 2016 年第三季度和“Windows 10 周年更新”以来，您可以[在 bash（实际的 Ubuntu(!) bash](http://www.omgubuntu.co.uk/2016/08/enable-bash-windows-10-anniversary-update)）中使用 Git。

[![http://www.omgubuntu.co.uk/wp-content/uploads/2016/08/bash-1.jpg](../Images/08bda2190f479c2bdee923494c0508d4.png)](https://i.stack.imgur.com/hE8dn.jpg)

在那里，您可以在 WSL 容器的“本机”文件系统（见下文）或托管 Windows 的文件系统中通过目录层次结构中的项目源上执行并`sudo apt-get install git-core`开始使用*git 。*`/mnt/c/...``/mnt/d/...`

专门针对**Windows 上的 Bash**或**WSL**（Linux 的 Windows 子系统）：

*   它是一个轻量级的虚拟化容器（从技术上讲，是一个[“Drawbridge”微微进程](https://blogs.msdn.microsoft.com/wsl/2016/05/23/pico-process-overview/)，
*   托管未经修改的“无头”Linux 发行版（即*Ubuntu*减去内核），
*   [它可以执行基于终端的命令（如果安装了适用于*Windows*](https://sourceforge.net/projects/xming/)的 X-server，甚至可以执行 X-server 客户端应用程序），
*   具有[对 Windows 文件系统的模拟访问](https://blogs.msdn.microsoft.com/wsl/2016/06/15/wsl-file-system-support/)（这意味着，除了降低性能之外，模拟文件系统中的文件的*编码*`DrvFs`可能与本*机* `VolFs`文件系统上的文件表现不同）。

> *   不幸的是，它[不能调用回*Windows*可执行文件](https://stackoverflow.com/questions/38920710/how-can-a-run-windows-executable-from-wsl-ubuntu-bash)，或者
> *   与任何本机驱动程序交互（即[没有图形卡，还没有 USB 驱动器](https://blogs.msdn.microsoft.com/wsl/2016/04/22/windows-subsystem-for-linux-overview/)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-02T17:14:25.277

这不是像将 git install 添加到 Windows 路径一样简单吗？

例如`Win`+ `R` `rundll32.exe sysdm.cpl,EditEnvironmentVariables` Edit...PATH 附加您的 Mysysgit 安装路径，例如`;C:\Program Files (x86)\Git\bin`. 重新运行 Cygwin，瞧。由于 Cygwin 会在 Windows 环境中自动加载，因此您的本地 Git 安装也会如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T04:25:31.490

使用 as 参数调用您的 (windows-)git `cygpath`，以转换“调用路径”。我很困惑为什么这应该是一个问题。

# javascript - 退出函数后全局变量重置

> ID：15692896
> 
> 赞同：0
> 
> 时间：2013-03-28T21:58:46.127
> 
> 标签：javascript, jquery

我正在尝试创建一个非常简单的聊天应用程序，但我陷入了一种奇怪的 javascript 行为。

这是我的代码：

```
var msg = [];
  $(document).ready(function(){
    $.getJSON('chat_ajax.php?get=1', function(data) {
      $.each(data, function(key_i, val_i) {
        var node = [];
        $.each(val_i, function(key, val){
          node.push(val);
          //$('body').append('Test');
        });
        msg.push(node);
      });
    });
    for (var f=0;f<msg.length;f++){
        $('body').append('Test');
    }
  }); 
```

请注意，这包含在`<script>`之前的标记中，`</body>`并且该`?get=1`参数仅用于调试

问题是 for 循环没有被执行。经过一些调试后，我发现我的`msg`数组在退出 $.getJSON() 函数后被重置（如果我将 for 循环放入它可以工作）

这可能是一些基本的语法错误或我对 javascript 变量的错误理解，但我坚持了一段时间，我广泛的谷歌搜索没有产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:01:53.653

该`getJSON`方法异步完成。因此，`for`循环在将值添加到的回调函数之前执行`msg`。您需要将`for`循环移动到回调中。

```
var msg = [];
  $(document).ready(function(){
    $.getJSON('chat_ajax.php?get=1', function(data) {
      $.each(data, function(key_i, val_i) {
        var node = [];
        $.each(val_i, function(key, val){
          node.push(val);
          //$('body').append('Test');
        });
        msg.push(node);
      });

      for (var f=0;f<msg.length;f++){
        $('body').append('Test');
      }
    });
  }); 
```

# windows - 图标资源路径

> ID：15692904
> 
> 赞同：1
> 
> 时间：2013-03-28T21:59:21.350
> 
> 标签：windows, winapi

是否有任何 API 函数可以解析如下链接：`C:\Path\To\Exe.exe,1`？

它将在哪里解析路径和图标索引以便我可以`ExtractIcon`用来加载它？

由于`Exe.exe,1`是一个有效的文件名，我无法将它与常规路径区分开来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:07:34.857

您正在寻找[`PathParseIconLocation()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773737.aspx).

# python - Python：datetime tzinfo 时区名称文档

> ID：15692906
> 
> 赞同：34
> 
> 时间：2013-03-28T21:59:24.770
> 
> 标签：python, datetime, timezone

我有一个日期：

```
from datetime import datetime
from datetime import tzinfo
test = '2013-03-27 23:05'
test2 = datetime.strptime(test,'%Y-%m-%d %H:%M')
>>> test2
datetime.datetime(2013, 3, 27, 23, 5)

>>> test2.replace(tzinfo=EST)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'EST' is not defined

>> test2.replace(tzinfo=UTC)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'UTC' is not defined 
```

我在通话`names`中可以分配给 tzinfo的时区列表中找不到文档。`replace.tzinfo=`

我已阅读以下内容，但没有任何内容：

[http://docs.python.org/2/library/datetime.html#tzinfo-objects](http://docs.python.org/2/library/datetime.html#tzinfo-objects)

我也在谷歌搜索过。

**编辑**：我遵循了 unutbu 提供的解决方案，但得到以下信息：

```
>>> test = '2013-03-27 00:05'
>>> test
'2013-03-27 00:05'

>>> test2 = dt.datetime.strp(test, '%Y-%m-%d %H:%M')
>>> test2
datetime.datetime(2013, 3, 27, 0, 5)

>>> est = pytz.timezone('US/Eastern')
>>> utc = pytz.utc
>>> print(est.localize(test2))
2013-03-27 00:05:00-04:00
>>> print(utc.localize(test2))
2013-03-27 00:05:00+00:00

>>> print(est.localize(test2,is_dst=False))
2013-03-27 00:05:00-04:00
>>> print(est.localize(test2,is_dst=True))
2013-03-27 00:05:00-04:00
>>> 
```

正如您所看到的，即使我提供了`is_dst=`标志，偏移量仍然是“-04:00”，这是 EDT 而不是 EST。我很感激帮助。谢谢你。

该文档显示以下内容：

*如果你坚持使用当地时间，这个库提供了一种明确构建它们的工具：http: [//pytz.sourceforge.net/#problems-with-localtime](http://pytz.sourceforge.net/#problems-with-localtime)*

```
>>> loc_dt = datetime(2002, 10, 27, 1, 30, 00)
>>> est_dt = eastern.localize(loc_dt, is_dst=True)
>>> edt_dt = eastern.localize(loc_dt, is_dst=False)
>>> print(est_dt.strftime(fmt) + ' / ' + edt_dt.strftime(fmt))
2002-10-27 01:30:00 EDT-0400 / 2002-10-27 01:30:00 EST-0500 
```

东部在文档的前面被定义为`eastern = timezone('US/Eastern')`

这似乎表明该`is_dst=`标志应进一步指定是否指定了夏令时。我将不胜感激为什么这对我的情况不起作用。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-28T22:02:24.147

标准库没有定义任何时区——至少不是很好（[文档](http://docs.python.org/2/library/datetime.html#tzinfo-objects)中给出的玩具示例没有处理像[这里提到](http://pytz.sourceforge.net/#problems-with-localtime)的那些微妙的问题）。对于预定义的时区，请使用第三方[pytz 模块](http://pytz.sourceforge.net/)。

```
import pytz
import datetime as DT

eastern = pytz.timezone('US/Eastern')
utc = pytz.utc
test = '2013-03-27 23:05' 
```

这是一个“天真的”日期时间：

```
test2 = DT.datetime.strptime(test, '%Y-%m-%d %H:%M')   
print(test2)
# 2013-03-27 23:05:00 
```

这通过解释`test2`为好像它在 EST 时区中来生成一个时区感知的日期时间：

```
print(eastern.localize(test2))
# 2013-03-27 23:05:00-04:00 
```

这通过解释`test2`为好像它在 UTC 时区中来生成一个时区感知的日期时间：

```
print(utc.localize(test2))
# 2013-03-27 23:05:00+00:00 
```

或者，您可以使用以下方法将一个时区感知日期时间转换为另一个时区`astimezone`：

```
test2_eastern = eastern.localize(test2)
print(test2_eastern.astimezone(utc))
# 2013-03-28 03:05:00+00:00 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2020-11-16T15:49:20.390

自***Python 3.9***发布以来，标准库*确实*定义了时区，您可以通过

```
import zoneinfo
print(zoneinfo.available_timezones())

# {'America/Belem', 'Asia/Tel_Aviv', 'Australia/North', 'Asia/Omsk', 
#  'Europe/Isle_of_Man', 'America/New_York', 'Europe/Nicosia', 
#  'Pacific/Funafuti', 'America/Ensenada', 'Europe/Mariehamn', 
#  'America/Maceio', 'America/Guatemala', 'America/Guadeloupe', ... 
```

*   [文档 - zoneinfo](https://docs.python.org/3/library/zoneinfo.html#zoneinfo.available_timezones)
*   另请参见[tz 数据库时区列表](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
*   在 Windows 上：确保安装了[tzdata](https://pypi.org/project/tzdata/)并且是最新的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-07-14T10:41:48.150

正如@MrFuppes 所提到的，从 python **3.9**开始，您不需要安装 3rd 方`pytz`，而是使用 native `zoneinfo`。

```
from datetime import datetime
from zoneinfo import ZoneInfo

test = '2013-03-27 23:05'
test2 = datetime.strptime(test,'%Y-%m-%d %H:%M')
date_string = test2.replace(tzinfo=ZoneInfo('US/Eastern'))
print(datestring)
2013-03-27 23:05:00-04:00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-04T06:16:44.160

```
 import pytz
 timezones=pytz.all_timezones 
```

这给出了所有时区

# regex - MVC 验证的正则表达式

> ID：15692907
> 
> 赞同：1
> 
> 时间：2013-03-28T21:59:30.270
> 
> 标签：regex, asp.net-mvc

在域名中查找子字符串*`www.`*的正则表达式是什么。*`http://`*

基本上我正在编写一个 MVC 验证来禁止包含 *`www.`*,*`http://`*或其中的单词*`http://www.`*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:03:48.557

尝试：

```
Regex.IsMatch(myString, @"(www\.|http://)"); 
```

如果您想指定它们在字符串*的开头不允许，但在其他地方允许它们，请使用：*

```
Regex.IsMatch(myString, @"^(www\.|http://)"); 
```

# iphone - 使用 ASIHTTPRequest 从服务器下载文件夹

> ID：15692908
> 
> 赞同：0
> 
> 时间：2013-03-28T21:59:30.553
> 
> 标签：iphone, ios, asihttprequest

是否可以使用 ASIHTTPRequest 从服务器下载整个文件夹？如果没有，我可以压缩文件夹并下载它吗？根据我的阅读，ASIHTTPRequest 将解压缩压缩文件。我试过了，但似乎无法让它工作。我不确定我是否正确设置了路径。

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:urlOfFolder;
[request setDownloadDestinationPath:[NSString stringWithFormat:@"%@/%@", documentsDirectory, @"download_folder"]]; 
```

# mongoose - Mongoose：嵌套的 findById 返回 null

> ID：15692909
> 
> 赞同：2
> 
> 时间：2013-03-28T21:59:31.997
> 
> 标签：mongoose

我正在尝试进行嵌套`findById`调用以获取子记录。即使有一个与外部调用返回的文档上的属性匹配的线程，内部也会`findById`继续返回。我无法弄清楚我在这里做错了什么。`null``_id``post.thread``findById`

这是我的模式：

```
PostSchema = new mongoose.Schema({
    title: { type: String, required: true },
    message: { type: String },
    thread: { type: mongoose.Schema.Types.ObjectId, required: true }
});

ThreadSchema = new mongoose.Schema({
    url: { type: String, required: true, unique: true },
    title: String,
    pageCount: Number,
    thingsTheySaid: Array,
    lastScraped: Date
}); 
```

这是我要执行的代码：

```
Post.findById(req.params.post).lean().exec(function (err, post) {
    if (err) return res.send(500, err);
    Thread.findById(post.thread).lean().exec(function (err, thread) {
        if (err) return res.send(500, err);
        // thread is always null here, instead of the expected lean object
        if (!thread) return res.send(500, 'thread not found');
        post.thread = thread;

        res.render('posts/edit', post);
    });
}); 
```

这是 mongo CLI 中显示的数据：

```
// post
{ 
    "title" : "C1", 
    "thread" : ObjectId("5154b8bc741aa70000000001"), 
    "_id" : ObjectId("5154b8bf741aa70000000002"), 
    "__v" : 0 
}

// thread
{ 
    "lastScraped" : ISODate("2013-03-28T21:23:22.750Z"), 
    "pageCount" : 15, 
    "title" : "GDT: Game #25 : Kings @ Coyotes - Tuesday,  3/12/�13 @ 7:00 pm PDT - HFBoards", 
    "url" : "http://hfboards.hockeysfuture.com/showthread.php?t=1373783", 
    "_id" : ObjectId("5154b4cae60b210000000001"), 
    "thingsTheySaid" : [ /*snipped for Brevity*/ ]
} 
```

**解决方案使用`populate()`**

nevi_me 使用该`populate()`函数走在正确的轨道上，但这是我最终用来解决问题的代码。

```
PostSchema = new mongoose.Schema({
    title: { type: String, required: true },
    message: { type: String },
    thread: { type: mongoose.Schema.Types.ObjectId, ref: 'Thread', required: true }
});

Post.findById(req.params.post).populate('thread').exec(function (err, post) {
    if (err) return res.send(500, err);
    res.render('posts/edit', post);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:46:58.997

`populate()`在查询中 运行 a 可能会更好。`populate`将获取`ObjectId`并将其相应的文档附加到您的`post`. 尝试更改为以下内容

**架构**

```
PostSchema = new mongoose.Schema({
    title: { type: String, required: true },
    message: { type: String },
    thread: { type: mongoose.Schema.Types.ObjectId, ref: 'Thread', required: true }
}); 
```

**findById**

```
Post.findById(req.params.post).populate('thread').exec(function (err, post) {
    if (err) return res.send(500, err);
    res.render('posts/edit', post);
}); 
```

# recursion - d3.js 中的转换队列；逐个

> ID：15692910
> 
> 赞同：3
> 
> 时间：2013-03-28T21:59:34.210
> 
> 标签：recursion, d3.js, transition

我试图在 d3.js 中进行链式转换。为此，我在数组中定义了一组转换，并（尝试）创建一个函数以递归调用它们`.each("end", function())`，以便在前一个完成时开始转换，但我还没有结果。

行动清单

```
 animations = [  function(){  console.log(1); return circle.transition().duration(2e3).attr("cy", Math.random()*300); } ,
                    function(){  console.log(2); return rect.transition().duration(3e3).attr("fill", "#"+((1<<24)*Math.random()|0).toString(16)); },
                    function(){  console.log(3); return circle.transition().duration(1e3).attr("r", Math.random()*500); },
                    function(){  console.log(4); return circle.transition().duration(2e3).style("fill", "#"+((1<<24)*Math.random()|0).toString(16)); },
                    function(){  console.log(5); return circle.transition().duration(1e3).attr("cx", Math.random()*500); }] 
```

递归函数

```
 function animate(index){
        if(index < animations.length - 1){
            index = index + 1
            return animations[index]().each("end", animate(index))
        } else {
            return true
        }
    } 
```

jsfiddle 在[这里](http://jsfiddle.net/jbkunst/nGtbT/)，[这](http://bl.ocks.org/mbostock/1125997)是一个使用 recusive 函数的例子。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T22:49:42.417

您快到了！

代替

```
return animations[index]().each("end", animate(index)) 
```

你需要

```
return animations[index]().each("end", function() { animate(index) }) 
```

查看[更新的 jsFiddle](http://jsfiddle.net/nGtbT/1/)

# vb.net - VB.NET - 在每个循环上创建对象

> ID：15692912
> 
> 赞同：0
> 
> 时间：2013-03-28T21:59:40.287
> 
> 标签：vb.net

请看下面的代码：

```
 Public Sub MassDelete()
        Dim objCommand As SqlCommand
        Dim objCon As SqlConnection
        Dim objDR As SqlDataReader
        Try
            Dim _ConString As String = "Data Source=IANSCOMPUTER;Initial Catalog=Test5;Integrated Security=True;MultipleActiveResultSets=true"
            objCon = New SqlConnection(_ConString)
            Using objCon
                    objCommand = New SqlCommand("SELECT * FROM Person WHERE StartDate <= dateadd(-6,year," & Now & ")")
                objCommand.Connection = objCon
                Using objCommand
                    objCon.Open()
                    objDR = objCommand.ExecuteReader
                    Do While objDR.Read
                        'Send ID over web service
                        'Send email to person
                        'Add log entry to log file
                    Loop
                    objDR.Close()
                End Using
            End Using
        Catch ex As Exception
            Throw
        Finally

        End Try 
```

我从以前的开发人员那里看到了很多这样的代码，即一个循环遍历表（例如人、车辆、帐户等）并对数千甚至数百万条记录执行操作的函数。在上述情况下，人员在开始日期六年后被删除。while 循环的每次迭代都有三个操作，即通过 Web 服务发送 id、向人员发送电子邮件以及将日志条目添加到日志文件。在继续开发相关系统时，我正在尝试重构此代码。

我认为 Email、WebService 和 Log 应该有不同的类，而不是在 MassDelete 函数中完成所有工作；工作将在各个班级之间展开，例如电子邮件将从电子邮件班级发送。为循环的每次迭代创建 WebService、Email 和 Log 对象并使用它们的实例变量（在 Person 中循环可能有一百万条记录）是否有任何限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:27:48.280

虽然创建对象很*便宜*——也就是说，每个循环创建新对象不会对整体性能产生影响（取决于构造函数做了多少工作）——新对象只有在语义正确/有意义时才应该这样做。

在这种情况下，我主张将*服务*与仅传递给特定服务调用的*数据*（例如个人记录）分开。我实际上并不了解 VB.NET（我使用 C#），因此请根据需要调整语法。

```
' Note that the services are bound to some things - but NOT people
' I recommend using DI/IoC (Dependency Injection)
' Also the Logger is generally a larger application-wide service
Var mailer = New EmailService(SMTPServerString, SMTPTimeout)
Var ws = New WebService(WSEndpoint)
Var log = New LoggerService()
Var objCon = OpenConnection()

Using objCon
    Var objCommand = objCon.CreateCommand(..);
    Using objCommand
        Var objDR = objCommand.ExecuteReader
        Do While objDR.Read
            ' Person different per loop
            Var person = New Person(objDR) 
            ' But services are the same and are not "bound" to a person
            ws.RecordDelete(person.Id)
            mailer.Send(person.Email, Subject, Message)
            log.Log(Log.Information, "Deleted person: " & person.Id)
        Loop
    End Using
End Using 
```

当然，这段代码仍然不是很容错或可分发的。消息队列（例如 AMPQ）可能值得研究..

# php - php重定向成功后

> ID：15692913
> 
> 赞同：0
> 
> 时间：2013-03-28T21:59:45.770
> 
> 标签：php

您将如何显示成功消息，然后在 PHP 中重定向。我试过了， `header("Location: .php");`但它没有显示成功消息。如果`header("Location: details1.php");`取出，则显示成功消息但不会重定向。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:01:53.893

**第1页.php**

```
<html>
<body>
<div id="content">

<?php

if($someCondition){
    header("Location: page2.php?message=someMessage");
    exit; // don't forget to exit
}

?>

</div>
</body>

</html> 
```

**Page2.php**

```
<html>
<body>
<div id="content">

<?php

if(isset($_GET['message']){ // NOTE: THE MESSAGE VAR CAN BE ANY NAME (NOT JUST MESSAGE). JUST MAKE SURE IT MATCHES THE NAME OF THE VARIABLE YOU SENT FROM PAGE1.PHP
    $message = htmlspecialchars($_GET['message']);
    echo 'the message sent from redirection was: ' . $message;
}

?>

</div>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:07:38.043

我更喜欢在重定向成功/错误消息时使用会话：

**一个.php**

```
$_SESSION['error'] = 'You lost the Game!';

header('Location: two.php');

exit; 
```

**二.php**

```
if (isset($_SESSION['error']))
{

  echo $_SESSION['error'];

  unset($_SESSION['error']);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:02:05.297

您可以使用元刷新标签在一两秒后重定向：

```
<meta http-equiv="refresh" content="2;url=http://mysite.com/page.php"> 
```

* * *

您也可以将成功消息传递到下一页，并让它显示出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T22:05:01.417

我使用这个 PHP 函数

```
function redirects($URL,$msg,$secs){
    echo "<html>";
    echo "<head>";
    echo "<title> Cargando...</title>";
    echo "<meta http-equiv='refresh' content ='{$secs};url={$URL}'>";
    echo "</head>";
    echo "<body>";
    echo "<b>{$msg}...</b></br>";
    echo "another message and link to go to the site" 
    echo "</br>";
    echo "</body>";
    echo "</html>";
} 
```

当然你可以设计这个。

# sql - 在 SQLite 中检索会话

> ID：15692914
> 
> 赞同：0
> 
> 时间：2013-03-28T21:59:52.133
> 
> 标签：sql, sqlite

无论如何要检索 SQLite 中的上一个会话？一旦我重新启动会话，我创建的数据库就会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:41:22.317

为了保留数据库以供以后使用，您必须让 sqlite 在磁盘上为数据库创建一个文件。最常见的方法是在启动 sqlite 时提供数据库名称：

```
sqlite3 some_file.db 
```

如果文件不存在，它将被创建。如果它已经存在，那么 SQLite 将打开它。

另一种不太常见的方法是`sqlite3`不带参数启动，然后使用[该`ATTACH`语句](http://www.sqlite.org/lang_attach.html)连接数据库文件。这允许您在同一会话中打开多个数据库文件。

# asp.net-mvc - 使用 MSTest 应用程序调试 MVC Web API

> ID：15692921
> 
> 赞同：0
> 
> 时间：2013-03-28T22:00:15.167
> 
> 标签：asp.net-mvc, debugging, visual-studio-2012, asp.net-web-api, mstest

我才刚刚开始，希望能得到一些帮助。

我在解决方案中创建了一个 MVC 4 Web API 项目（VS 2012）和一个 MSTest 项目。

我在 MSTest 中编写了一个测试方法，并使用 WebClient 类通过如下 URL 调用 Web API 项目：

```
http://localhost:59466/api/values 
```

我希望这会导致 Web API 项目运行并调用作为默认值放入的示例值控制器。

当我运行测试时，我收到一个测试错误“无法连接到服务器”。

那么如何让 Web API 应用程序运行，以便我的 MSTest 项目可以调用它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:13:11.617

如果我理解你的问题。您发布的网址很可能来自 Visual Studio 开发服务器而不是 IIS。如果您将站点部署到 IIS 并尝试，我相信您的问题会得到解决。

如果您不在 IIS 中托管您的站点，则您的 MSTest 项目无法调用它，除非您的站点在 Visual Studio 中以 dubug 模式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T20:08:47.580

Web API 项目必须在运行 MStest 之前启动。我最终有两个 Visual Studio 2012 窗口，它们打开了相同的解决方案。一个用于启动 Web API，另一个可以使用 MSTest 运行/调试测试。

# java - Apache org.apache.commons.graph

> ID：15692922
> 
> 赞同：0
> 
> 时间：2013-03-28T22:00:19.227
> 
> 标签：java, apache, jar

我需要 org.apache.commons.graph 来运行 apache 代码，但我真的找不到它。我搜索了很多，但我找不到它的 jar 文件。我很感激一点帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:07:49.730

你是这个意思吗？

[http://mvnrepository.com/artifact/commons-graph/commons-graph/0.8.1](http://mvnrepository.com/artifact/commons-graph/commons-graph/0.8.1)

有一个jar下载。

# jquery - jQuery Mobile 和 Phonegap

> ID：15692923
> 
> 赞同：2
> 
> 时间：2013-03-28T22:00:20.123
> 
> 标签：jquery, xcode, cordova, jquery-mobile, mobile

嗨，我一直在研究开发一个移动应用程序，并且听说过 phonegap 将允许我使用本地语言，如 html5 css 和 javascript。从我读过的内容来看，我应该使用 jQuery mobile，这样我就可以执行幻灯片、点击等事件。在编写应用程序时，我注意到 jQuery 有一个`page`容器的数据属性，所以我会将我的整个应用程序编码在 1 个文档中，只为`page`我的每个页面编写数据属性，还是像我一样编写它通常会与一个网站，并有几个不同的页面链接到他们？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:07:17.093

就像您提到的那样，有两种不同的架构，一页架构和多页架构。根据我的经验，人们更喜欢单页架构，因为它更容易而且可能更快（因为你只需要加载所有的 javascript 和 css 一次）。

但请注意，由于您的所有“页面”现在都在一个页面中，因此您有可能达到 dom 最大大小限制。但这相对容易修复。

# vb.net - VB.NET 无法读取 Excel 单元格的值

> ID：15692936
> 
> 赞同：1
> 
> 时间：2013-03-28T22:01:04.640
> 
> 标签：vb.net, excel, user-defined-functions

VB6 可以打开 Excel 工作簿并读取单元格的值，即使该单元格包含使用用户定义函数的公式；但是，VB.NET 2012 总是返回错误代码 (0x800A07ED) 而不是值。有谁知道如何哄 VB.NET 返回单元格的实际值？

* * *

当单元格的公式包含 UDF 时，VB.NET 会失败。例如，单元格的公式可以是`=MyFunction(A1)`（其中 MyFunction 是公共模块中的公共函数）。

```
' A1's Value is "123".
' B1's Formula is "=MyFunction(A1)".
'
' After opening the workbook with VB.NET:
Dim rng1Cell As Excel.Range
rng1Cell = Sheet1.Range("B1")

Dim dblValue As Double
dblValue = CType(rng1Cell.Value, Double)

' dblValue now equals 0x800A07ED 
```

# svn - Jenkins 中“包含区域”的使用

> ID：15692937
> 
> 赞同：0
> 
> 时间：2013-03-28T22:01:10.373
> 
> 标签：svn, url, jenkins

我正在尝试在 Jenkins 中使用“包含区域”。

svn URL 示例：

```
http://svn.mydomain.com/svn/projects/branches/Anudeep 
```

`projects/branches/Anudeep/A1/A2/A3`是我从 SVN 签出的工作空间。

```
"SVN URL: http://svn.mydomain.com/svn/projects/branches/Anudeep" 
```

`A2`仅当文件夹发生更改时才需要触发构建。

请提出一些解决方案。我在詹金斯尝试了“帮助”。但它没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:58:34.103

为什么不能使用 URL：

```
http://svn.mydomain.com/svn/projects/branches/Anudeep/A1/A2 
```

svn可以做到。并配置 SCM： ![在此处输入图像描述](../Images/0fa92e82dff8d6958e9287b7fc63be70.png) 查看 cron 语法和配置 pull SCM。

# python - 传入函数的python变量

> ID：15692939
> 
> 赞同：0
> 
> 时间：2013-03-28T22:01:13.060
> 
> 标签：python, list, function

我的代码片段：

```
def determinewelltype(currentuwi,welltype):
    if current uwi in vertuwis:
        welltype = "Vertical"

currentuwi = "1aa010109306w400"
welltype = "UNKNOWN"
determinewelltype(currentuwi,welltype)
print currentuwi,welltype 
```

在我的代码的另一部分，我构建了一个名为 vertuwis 的列表，其中包含许多字符串。

此代码段试图确定 currentuwi 是否在 vertuwis 列表中。如果是，井型应该是垂直的。

我知道给定的 currentuwi 在我的列表中，但是当我在最后一行代码中打印井类型时，井类型是 UNKNOWN，这意味着我的代码不起作用。

我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:15:02.743

这更正了代码中的错误：

```
vertuwis = ['a', 'b', 'c']

def determinewelltype(currentuwi,welltype):
    if currentuwi in vertuwis:
        welltype = "Vertical"
    return welltype

currentuwi = "a"
welltype = "UNKNOWN"
welltype = determinewelltype(currentuwi,welltype)
print currentuwi,welltype   # prints out: a Vertical 
```

# node.js - 处理 NodeJS 的异步行为

> ID：15692946
> 
> 赞同：2
> 
> 时间：2013-03-28T22:01:38.233
> 
> 标签：node.js, mongodb, asynchronous, concurrency, redis

将 NodeJS 与 MongoDB+Mongoose 一起使用。

首先，我知道异步非阻塞代码的优点。所以我确实处理回调。但最后我遇到了以下问题。

假设我有一个用户可以随时调用的函数。而且有可能，一个超级“闪电般”的用户几乎同时调用了两次。

```
function do_something_with_user(user_id){
    User.findOne({_id:user_id}).exec(function(err,user){ // FIND QUERY
        // Do a lot of different stuff with user
        // I just cannot update user with a single query
        // I might need here to execute any other MongoDB queries
        // So this code is a set of queries-callbacks
        user.save() // SAVE QUERY
    })
} 
```

当然它是这样执行的：FIND QUERY, FIND QUERY, SAVE QUERY, SAVE QUERY

这完全打破了应用程序的逻辑（应该查找查询、保存查询、查找查询、保存查询）。所以我决定通过为特定用户“锁定”整个函数来防止异步行为（所以函数代码内部仍然是异步的）。

```
var lock_function_for_user = {}

function do_something_with_user(user_id){
    if(!lock_function_for_user[user_id]){
        lock_function_for_user[user_id] = true
        User.findOne({_id:user_id}).exec(function(err,user){
            // Same code as above
            user.save(function(){
                lock_function_for_user[user_id] = false
            })
        })
    } else {
        setTimeout(function(){
            do_something_with_user(user_id)
        },100) // assuming that average function execution time is 100ms in average
    }
} 
```

所以，我的问题是：这是一个好的做法，好的 hack 还是坏的 hack？如果这是一个糟糕的黑客，请提供任何其他解决方案。特别是，当我们扩展和启动多个 NodeJS 进程时，我怀疑这个解决方案是否会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T23:23:52.050

这是一种非常糟糕的做法，您永远不应该使用计时器来控制代码流。

这里的问题称为原子性。如果你需要做 find-save，find-save 那么你需要以某种方式打包这些操作（事务）。这取决于您使用的软件。在 redis 中，您有 multi 和 exec 命令。在 mongodb 中有 findAndModify()。另一种解决方案是使用索引。当您尝试两次保存同一字段时，您会收到错误消息。在 mongoose 的 schemaType 中使用属性“index: true”和“unique: true”：

```
var schema = mongoose.Schema ({
    myField: { type: String, index: true, unique: true, required: true },
}); 
```

这就是您需要[的：Mongodb - 隔离操作序列 - 执行两阶段提交](http://docs.mongodb.org/manual/tutorial/isolate-sequence-of-operations/)。但要考虑到，如果您需要进行大量事务，mongodb 可能不是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:22:41.737

你不想浪费内存，所以更换

```
lock_function_for_user[user_id] = false 
```

和

```
delete lock_function_for_user[user_id] 
```

除此之外：[如果发生冲突，您可以保持乐观并重试](http://late.am/post/2011/11/18/ensuring-write-your-own-reads-consistency-in-mongodb)。只需忽略锁定并确保数据库在出现问题时注意到（并在这种情况下重试）。当然，哪种方式更好取决于这种冲突真正发生的频率。

# javascript - 设置 HTML5 currentTime 向后在 Firefox 和 Chrome 中不起作用

> ID：15692947
> 
> 赞同：3
> 
> 时间：2013-03-28T22:01:43.287
> 
> 标签：javascript, html, html5-video

我正在尝试按照本教程制作视频按钮的控件，并且就我现在正在寻找按钮而言，一切正常。下面的代码在 Safari 和 Opera 上运行良好，但 Firefox 和 Chrome 什么也没做。

```
function initVideoDirectionStepButtons() {

    var _stepSize = 10.0;

    /* Add Code For Stepping Backward */

    $('.rewind_button a').each(function() {
        /*This code finds the video element and binds it to a click event.*/

        var $_video=findVideoForElement(this);

        $(this).click(function(e) {

             e.preventDefault();

             $_video.each(function(index, _video) {

                 _video.currentTime=_video.currentTime-_stepSize;

             });

        });

    }); 
```

这只是代码的开始。它只是在函数关闭之前对 fast_forward 重复相同的操作。然后在 html 准备好时调用它。

Firefox 和 chrome 在控制台中没有为我显示任何错误，与 safari 相比，它什么也不做，它会前后跳动。我环顾四周，看到许多其他示例也这样做，并且对他们有用。是在 Firefox 和 chrome 中设置 currentTime 无效，还是它不支持 webm 格式？

# python - Python 命名元组索引实例

> ID：15692950
> 
> 赞同：-1
> 
> 时间：2013-03-28T22:02:03.800
> 
> 标签：python, namedtuple

所以这是我目前正在从事的实验室编码项目的代码：

```
from collections import namedtuple
Restaurant = namedtuple('Restaurant', 'name cuisine phone dish price')

# Restaurant attributes: name, kind of food served, phone number, best dish, price of that dish

RC = [Restaurant("Thai Dishes", "Thai", "334-4433", "Mee Krob", 12.50), 
      Restaurant("Nobu", "Japanese", "335-4433", "Natto Temaki", 5.50), 
      Restaurant("Nonna", "Italian", "355-4433", "Stracotto", 25.50), 
      Restaurant("Jitlada", "Thai", "324-4433", "Paht Woon Sen", 15.50), 
      Restaurant("Nola", "New Orleans", "336-4433", "Jambalaya", 5.50), 
      Restaurant("Noma", "Modern Danish", "337-4433", "Birch Sap", 35.50), 
      Restaurant("Addis Ababa", "Ethiopian", "337-4453", "Yesiga Tibs", 10.50)] 
```

作为初学者，我的问题是：我应该使用什么方法来允许我的程序索引列表的特定部分？

例如，如何从更大的列表中索引所有餐厅的列表？此列表仅包括列表中的餐厅，而不是所有其他信息，例如电话号码等...

我已经使用了切片方法和列表函数来尝试自己解决这个问题，但它并没有被证明是有效的。>:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:13:21.673

如果您只是想要值或性能，我不确定您何时说索引。但是对于基本检索，你可以做这样的事情

```
[r.name for r in RC] 
```

这将为您提供您在 RC 中所有餐厅的名称

你可以变得更花哨，

```
RC = [...]
def getValues(name):
   return [getattr(r, name) for r in RC] 
```

然后你可以这样做，

```
getValues('name') 
```

如果需要缓存，可以考虑使用 memoize

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:46:22.040

不完全确定您所说的“索引”是什么意思，但这可能会满足您的要求：

```
from collections import namedtuple
Restaurant = namedtuple('Restaurant', 'name cuisine phone dish price')

# Restaurant attributes: name, kind of food served, phone number, best dish, price of that dish

RC = [Restaurant("Thai Dishes", "Thai", "334-4433", "Mee Krob", 12.50),
      Restaurant("Nobu", "Japanese", "335-4433", "Natto Temaki", 5.50),
      Restaurant("Nonna", "Italian", "355-4433", "Stracotto", 25.50),
      Restaurant("Jitlada", "Thai", "324-4433", "Paht Woon Sen", 15.50),
      Restaurant("Nola", "New Orleans", "336-4433", "Jambalaya", 5.50),
      Restaurant("Noma", "Modern Danish", "337-4433", "Birch Sap", 35.50),
      Restaurant("Addis Ababa", "Ethiopian", "337-4453", "Yesiga Tibs", 10.50)]

def retrieve(records, column):
    """ return list of values for column from a list of namedtuples """
    if records and column not in records[0]._fields:
        raise ValueError('invalid column name:' + repr(column))
    return [getattr(rec, column) for rec in records]

print retrieve(RC, 'name') 
```

输出：

```
['Thai Dishes', 'Nobu', 'Nonna', 'Jitlada', 'Nola', 'Noma', 'Addis Ababa'] 
```

# objective-c - 运行时用于记录的协议名称

> ID：15692964
> 
> 赞同：1
> 
> 时间：2013-03-28T22:02:52.607
> 
> 标签：objective-c, cocoa-touch, cocoa

例如，我有以下代码：

 `````
@interface LOSHeadlineMetricsService : NSObject {

    id<LOSHeadlineMetricsServiceDelegate>delegate;

} 
````  `协议看起来像

```
@protocol LOSHeadlineMetricsServiceDelegate <NSObject>

- (void) serviceDidComplete;

- (void) serviceFailed;

@end 
```

在委托的客户端运行时，我想引发一个异常，该异常通过反射抛出协议名称“LOSHheadlineMetricsServiceDelegate”。我怎样才能做到这一点？

```
if (self.delegate == nil) {
   [NSException raise:@"NOT IMPLEMENTED" format:@"%s", Reflection(self.delegate)]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:49:38.543

`property_getAttributes()`您可以从函数返回的属性属性中解析它。任何属性的类型都可以通过检查第一个字符（[定义为 'T'](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html#//apple_ref/doc/uid/TP40008048-CH101)）和第一个逗号之间的文本来确定。对于对象类型，此文本的格式为@"ClassName"。`id`类型属性将只有 @ 符号，没有引号、类名或协议名。无论您喜欢什么，您都可以在这里使用`NSScanner`相当有效的或正则表达式。

一个示例程序及其输出：

```
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

@protocol MyProtocol <NSObject>
- (void)someMethod;
@end

@interface MyObject : NSObject
@property (strong) id<MyProtocol> implementor;
@end

@implementation MyObject
@end

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        objc_property_t property = class_getProperty([MyObject class], "implementor");
        const char *propertyAttributes = property_getAttributes(property);
        NSLog(@"property attributes = %s", propertyAttributes);
    }
    return 0;
} 
```

程序的输出是

> `2013-03-28 16:39:17.401 PropertyReflection[56502:303] property attributes = T@"<MyProtocol>",&,V_implementor`

现在，正如 Kevin Ballard 指出的那样，谨慎地注意这种行为与文档相矛盾，文档指出 T 之后的`@encode`字符串是属性类型的字符串。当我写这篇文章时，我认为情况就是这样。但是经过检查，结果`@encode(id<MyProtocol>)`确实只是“@”，所以使用它需要您自担风险。当然，解析该字符串的任何代码都必须准备好优雅地失败，并且不依赖于关键任务数据提取。如果需要此信息更多是为了方便而不是硬必要，那么我认为这适合继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:14:02.443

你不能。obj-c 对象的静态类型信息在编译过程中被丢弃。在运行时，您只知道它是一个 obj-c 对象（在这种情况下，“它”是一个属性/ivar）。

* * *

**更新：** Carl Veazey 的回答表明该信息确实存在于协议中。在测试之后，我看到了同样的事情。但是，这完全没有文档记录，我建议不要将其用于实际代码。``

# php - 无法为 GET 变量构建永久链接

> ID：15692965
> 
> 赞同：0
> 
> 时间：2013-03-28T22:02:53.040
> 
> 标签：php, wordpress, get, taxonomy, permalinks

我使用分类“画廊”和蛞蝓“专辑”。在我的 WP 中，我有用于两种情况的模板 gallery-albums.php 页面： 1\. 用户获取带有画廊相册的页面；2.点击后，用户会转到一个带有一些画廊帖子的相册。这一切都在一页gallery-albums.php 中。为了定义要执行的代码部分，我使用了 GET 变量 ?album=title-of-album。如果此 GET 变量存在，我们将加载包含一张专辑的页面，否则将加载专辑列表。

所以，我有单独专辑的代码：`http://mysite.com/page_id=2688?album=some-albume`.

我需要使用永久链接。当我设置自定义永久链接结构 /%category%/%postname%/ 我得到链接：`http://mysite.com/albums/?album=some-albume`。“相册”是带有模板 gallery-albums.php 的页面名称。

我需要一个链接：`http://mysite.com/albums/one-albume`或`http://mysite.com/album/one-albume`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:20:53.860

据我了解，您是在询问重写目的，所以请看一下：[http ://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

希望对你有帮助 ：）

# javascript - 试图用 JS 解析 XML ......不工作

> ID：15692970
> 
> 赞同：1
> 
> 时间：2013-03-28T22:03:23.717
> 
> 标签：javascript, xml, xml-parsing

我在用 jS 解析 XML 时遇到问题。基本上，我想从 RSS 提要中获取内容并自动将其发布到我的网站上。我没有显示任何错误，但我可能是错的。好吧，如果没有任何错误，我想我错了。有任何想法吗？

```
 <script type="text/javascript">
 var xmlDoc;
 function loadxml() {
  xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
  xmlDoc.async = false;
  xmlDoc.onreadystatechange = readXML;
  xmlDoc.load("test.xml");
}

function readXML()
{
   if(xmlDoc.readyState == 4)
   {
    //Using documentElement Properties
    //Output company
    alert("XML Root Tag Name: " + xmlDoc.documentElement.tagName);

    //Using firstChild Properties
    //Output year
    alert("First Child: " + xmlDoc.documentElement.childNodes[1].firstChild.tagName);

 //Using lastChild Properties
 //Output average
 alert("Last Child: " + xmlDoc.documentElement.childNodes[1].lastChild.tagName);

 //Using nodeValue and Attributes Properties
 //Here both the statement will return you the same result
 //Output 001
 alert("Node Value: " + xmlDoc.documentElement.childNodes[0].attributes[0].nodeValue);
 alert("Node Value: " + xmlDoc.documentElement.childNodes[0].attributes.getNamedItem("id").nodeValue);

 //Using getElementByTagName Properties
 //Here both the statement will return you the same result
 //Output 2000
 alert("getElementsByTagName: " + xmlDoc.getElementsByTagName("year")[0].attributes.getNamedItem("id").nodeValue);

 //Using text Properties
 //Output John
 alert("Text Content for Employee Tag: " + xmlDoc.documentElement.childNodes[0].text);

 //Using hasChildNodes Properties
 //Output True
 alert("Checking Child Nodes: " + xmlDoc.documentElement.childNodes[0].hasChildNodes);
 }
 }
 </script>
 </head>

 <body onload="loadxml();">

 </body>
 </html> 
```

谢谢你的帮助！

# javascript - 单击时更改鼠标指针

> ID：15692971
> 
> 赞同：8
> 
> 时间：2013-03-28T22:03:28.443
> 
> 标签：javascript, html, css, mouse-cursor

我目前正在开展一个项目，该项目涉及将使用自定义鼠标指针的元素。我用于该功能的代码很简单：

```
.hand {
    cursor:url(/images/cursor1.gif);
} 
```

现在我的问题是：-我只是想知道（如标题所示）当您在 div 类“手”（？）内单击时，是否可以将光标更改为 cursor2.gif。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T22:06:05.557

使用[`:active`伪类](https://developer.mozilla.org/en-US/docs/CSS/%3aactive)：

```
.hand:active {
    cursor: url('/imgages/cursor1.gif');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:27:47.147

试试这个jquery

```
(function(){
$hand = $('.hand');
$hand.click(function() {
    $hand.css('cursor','url(YOURGIF.GIF)');
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T07:19:12.177

我认为困难在于您需要在单击*后*保持光标不变，而不仅仅是在按下按钮时。

这对你有用吗？

```
function toggle(){

    var body = document.body; 
    body.id = ( body.id ) ? body.id : 'body_id'; // ffox

    body.use_custom_cursor = !body.use_custom_cursor;

    body.style.cursor = body.use_custom_cursor ? 'url(/images/cursor1.gif)' : 'auto';

} 
```

接着...

```
<div onclick="toggle()">Target</div> 
```

我只用 Webkit 和 Firefox 测试过，不知道 IE 是否喜欢它。

# java - 使用 JAVA 在网页中自动填写用户名和密码字段

> ID：15692975
> 
> 赞同：-1
> 
> 时间：2013-03-28T22:03:53.703
> 
> 标签：java, mysql, url, gmail

所以这就是我想要做的，我需要java来自动打开一个像mail.google.com这样的网页，然后点击一个按钮将用户名和密码输入到相应的框中。现在我知道了打开浏览器并将其定位到提供的特定 url 的代码，我只是想知道是否有办法告诉 java 将用户名和密码填写到相应的框中。顺便说一句，我已经完成了使用 JAVA 将 MYSQL 数据库中的数据转换为字符串变量...任何帮助或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:08:27.727

使用硒。这是一个很好的库，您可以在其中操作网页操作。即 selenium.isElementPresent("这里是元素的 xpath"); 将检查元素是否已加载，如果是，您可以使用 selenium.type("xpath", String/integer) 来输入该字段。然后通过 selenium.click("element"); 您可以单击诸如提交按钮之类的元素

例如（不检查当前元素），应该打开 Google.com 并搜索“键入一些随机文本”：

```
package com.example.tests;

import com.thoughtworks.selenium.*;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import static org.junit.Assert.*;
import java.util.regex.Pattern;

public class Googletest {
    private Selenium selenium;

    @Before
    public void setUp() throws Exception {
        selenium = new DefaultSelenium("localhost", 4444, "*chrome", "https://www.google.com/");
        selenium.start();
    }

    @Test
    public void testGoogletest() throws Exception {
        selenium.open("/");
        selenium.type("//div[@id='gs_lc0']/input", "type some random text");
        selenium.click("//div[@id='gbqfbw']/button");
    }

    @After
    public void tearDown() throws Exception {
        selenium.stop();
    }
} 
```

# android - 当 AndroidManifest.xml 中有数据值时，getData() 返回 null

> ID：15692977
> 
> 赞同：1
> 
> 时间：2013-03-28T22:04:09.237
> 
> 标签：android, android-intent

我的 AndroidManifest.xml 中有这个

```
 <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
    <data android:scheme="http"/>
  </intent-filter> 
```

但是当我打电话时：

```
 Intent i = currentActivity.getIntent();
  Log.d("Logging", "i.getAction() is " + i.getCategories());
  Log.d("Logging", "i.getAction() is " + i.getAction());
  Log.d("Logging", "i.getData() is " + i.getData());
  Log.d("Logging", "scheme is " + i.getScheme()); 
```

我得到了这个：

```
D/Logging( 5050): i.getAction() is [android.intent.category.LAUNCHER]
D/Logging( 5050): i.getAction() is android.intent.action.MAIN
D/Logging( 5050): i.getData() is null
D/Logging( 5050): scheme is null 
```

有什么想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:19:11.280

您应该尝试`android:host="somehost.com"`在数据中指定，单独的方案没有任何意义，可能会被跳过和忽略，如果您指定没有方案的 url/host 也是如此——这些也将被忽略。

# actionscript-3 - (Flash-AS3)为什么主类看不到直接写在舞台上的实例名？

> ID：15692981
> 
> 赞同：0
> 
> 时间：2013-03-28T22:04:30.727
> 
> 标签：actionscript-3, flash

在 Flash Professional CS6 中，我的一个项目的主类没有看到直接写在对象属性窗口上的实例名称，我以前没有见过这个问题，它必须看到我的实例名称。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:41:53.363

您的`gotoAndStop()`语句不会立即强制 Flash 更改帧，因此如果您的这两个语句一个接一个地出现，它们都会在您的前一帧的上下文中执行，其中`Box1`仍然为空。当您在帧之间移动时，您应该使用一些原始变量（int、String，也许最多 Array 的东西）来支持数据完整性。这些将在某处初始化（如果是数组）并在整个时间轴代码中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:19:05.717

返回 (null) 表示它不存在，您如何实现它的一些代码会很好.. 这是确保您的变量在闪存中是全局的简单方法，

创建新的 flash 文件，创建一个空的movieClip“容器”，并将整个项目放在该MovieClip 中，将其视为主时间线，将所有动作脚本放在主舞台时间轴上，以便在引用某些内容时：

```
 container.myObject.x = 50 
     container.gotoAndStop(5); 
```

通过这种方式，一切都是可用的，我认为这是一种很好的做法，因为你永远不需要担心丢失的项目或变量。此外，由于所有内容都在 MovieClip(container) 中，因此可以更轻松地将项目从一个项目移动到另一个项目，这比在主时间轴上重新复制帧要容易得多。

# jira - JIRA 与 Service-Now 的软件项目管理

> ID：15692982
> 
> 赞同：2
> 
> 时间：2013-03-28T22:04:38.673
> 
> 标签：jira, agile-project-management, servicenow, jira-agile

我工作的公司将开始使用 ServiceNow 进行 IT 运营和呼叫中心管理，他们正在研究其 SDLC 模块以进行软件项目管理。然而，也有使用 JIRA+Greenhopper+Fisheye+Crucible 的推动（由我推动）。

有没有人通过这两个工具的功能比较来完成一个功能？

使用 ServiceNow 演示，听起来它非常通用，但我相信 Service-Now 自己为我们的呼叫中心进行了大量定制。

我最喜欢 JIRA 的最大优点之一是我们可以自行完成的极端定制化程度，并通过我们的回顾来改变我们的流程。我不完全相信 ServiceNow 可以提供这一点，我肯定希望听到更多。

我想在 ServiceNow 中使用 JIRA+Greenhopper 完成的一些功能：

*   跨多个项目冲刺（ServiceNow 中的 Scrum 产品？）

*   源代码/代码审查集成，如 Fisheye 和 Crucible

*   跨越多个项目的史诗管理

*   发布管理 - JIRA 版本与 ServiceNow 发布 - 一些团队计划未来的发布，而另一些团队只是根据发布分支上看起来不错的内容剪切构建标签。JIRA 让我有不同的操作流程来帮助潜在客户完成这项工作，以匹配他们“在现实生活中”所做的事情。

这两种产品之间的任何其他差异点都会很好。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:56:27.473

好消息是两 (2) 可以和平共存，您可以将每一个用于最适合您的团队/部门需求的目的。下面是一篇带有视频的文章，展示了集成的无缝性。

[http://www.john-james-andersen.com/blog/service-now/rest-based-servicenow-jira-integration-poc.html](http://www.john-james-andersen.com/blog/service-now/rest-based-servicenow-jira-integration-poc.html)

披露：我是 ServiceNow 员工。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T14:31:27.437

我同意这些是非常不同的工具，ServiceNow 并非设计为 ALM 或 SCCM，而 JIRA 是。例如，对于苹果与苹果的比较，我会看看 JIRA 与 TFS。

我认为 Jeremy 走上了正轨——ServiceNow 和 JIRA 是应该并存的工具，ServiceNow 管理 ITIL 服务台工作流，必要时集成到 JIRA SCCM 工作流中。

诚然，ServiceNow、JIRA 和类似的工具有一些 scrum 组件是从头开始设计的，以支持开发团队。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-18T23:54:10.507

很棒的讨论-非常有帮助。出于同样的原因，我的公司正在研究 servicenow。一些连接 servicenow 和 jira 的插件可能对我们有用。我查看了 jira 服务台，它看起来确实具有非常简单的无缝用户体验 - 我还没有看到该产品的集成深度......尤其是在资产管理方面。我见过使用jira服务台的大公司，所以我想知道他们是如何做这些事情的一个企业。是否有人将 JIRA Service Desk 与 ITIL 和资产管理集成一起使用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T06:22:41.640

（另一个免责声明 - 我也是一名员工）

Jira 是一个出色的敏捷工具集，公平地说，它可以为 SDLC 提供比 ServiceNow 更好的单点解决方案。

为了平衡这一点 - 您可以从使用 ServiceNow SDLC 获得的是访问单一的 IT 记录系统。因为您使用与 IT 运营团队相同的系统，所以您有机会对紧密集成 Dev 和 Ops 的流程进行建模（我们可以在这里加入 DevOps 流行语！）

如果您想要一个流程，您可以从客户那里获取新事件并轻松跟踪它的发布、软件版本，以及您需要 ServiceNow 的测试用例的要求。

同样，如果您想将软件功能成功的运营责任推给编写代码的开发人员，您希望流程之间的无缝交互。

如果您希望为您的敏捷团队提供最佳体验（我没有提到集成，这是另一种选择），请选择 Jira - 这是一个很棒的工具，我渴望在我的日常工具中使用它们的一些功能:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T20:15:34.827

注意 Atlassian 刚刚宣布的 JIRA 服务台附加组件。它可能会做一些你的团队想要 ServiceNow 的东西？

# c++ - 编译c++，Makefile基础：变量，包括库

> ID：15692983
> 
> 赞同：0
> 
> 时间：2013-03-28T22:04:50.320
> 
> 标签：c++, linux, compiler-errors

我正在努力理解如何编译一个小型 linux 应用程序 uvccapture。[它的来源在这里](http://staticwave.ca/source/uvccapture/)。我的问题围绕着 Makefile，并满足包含要求。

我需要知道的是我应该在哪里定义变量`MATH_LIB`，（如果有的话），什么`-ljpeg`意思，以及我需要做什么来满足它们。

我尝试了什么？阅读有关 makefile 的教程和参考资料，并尝试编译和更改选项。结果：普遍混乱！！！我几乎不知道该问什么。也许有人可以让我去。

我已将 jpeglib 和 uvccapture 的源代码放在以下目录中：

```
~/src/jpeglib
~/src/uvccapture 
```

`cd`到目前为止，当我进入`~/src/uvccapture`并运行时，我无法克服以下错误`make`：

```
jpeglib.h: No such file or directory 
```

我正在运行最新的 Raspbian 'Wheezy' 的 Raspberry Pi 上进行编译。

UVCCapture 的 Makefile 如下：

```
CC=gcc
CPP=g++
APP_BINARY=uvccapture
VERSION = 0.4
PREFIX=/usr/local/bin

WARNINGS = -Wall

CFLAGS = -std=gnu99 -O2 -DLINUX -DVERSION=\"$(VERSION)\" $(WARNINGS)
CPPFLAGS = $(CFLAGS)

OBJECTS= uvccapture.o v4l2uvc.o

all:    uvccapture

clean:
    @echo "Cleaning up directory."
    rm -f *.a *.o $(APP_BINARY) core *~ log errlog

install:
    install $(APP_BINARY) $(PREFIX)

# Applications:
uvccapture: $(OBJECTS)
    $(CC)   $(OBJECTS) $(XPM_LIB) $(MATH_LIB) -ljpeg -o $(APP_BINARY) 
```

源文件仅包含 uvccapture.c 和 v412uvc.h。uvccapture.c 的顶部有以下包含行：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <signal.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>
#include <jpeglib.h>
#include <time.h>
#include <linux/videodev.h>

#include "v4l2uvc.h" 
```

任何克服上述错误的帮助将不胜感激！作为奖励，可以编译整个内容。也许更简单的makefile可以做到？例如，我不知道我是否需要下载 MATH_LIB 文件，或者它们是否带有 gcc。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T22:16:21.210

`-ljpeg`表示与名为 libjpeg.a 的库链接。由于您也没有头文件，我猜您的系统上没有安装此库。答案是找到那个库并安装它。

# pandas - 调用函数时的 Pandas、大数据、HDF 表和内存使用情况

> ID：15692984
> 
> 赞同：6
> 
> 时间：2013-03-28T22:04:50.650
> 
> 标签：pandas, memory, hdf5, large-data

## 简短的问题

当 Pandas 在 HDFStore 上工作时（例如： .mean() 或 .apply() ），它是将完整数据作为 DataFrame 加载到内存中，还是作为 Serie 逐记录处理？

## 详细描述

我要处理大型数据文件，我可以指定数据文件的输出格式。

我打算使用 Pandas 来处理数据，并且我想设置最佳格式，以最大限度地提高性能。

我已经看到 panda.read_table() 已经走了很长一段路，但它仍然至少需要与我们要读取以转换为 DataFrame 的原始文件大小一样多的内存（实际上至少是内存的两倍） . 这可能适用于最大 1 GB 的文件，但大于？这可能很难，尤其是在在线共享机器上。

但是，我看到现在 Pandas 似乎支持使用 pytables 的 HDF 表。

我的问题是：当我们对整个 HDF 表进行操作时，Pandas 如何管理内存？例如 .mean() 或 .apply()。它是首先将整个表加载到 DataFrame 中，还是直接从 HDF 文件中处理函数而不存储在内存中？

附带问题：hdf5 格式在磁盘使用上是否紧凑？我的意思是，它是像 xml 一样冗长还是更像 JSON？（我知道有索引和东西，但我在这里对数据的简单描述感兴趣）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T00:24:49.820

我想我已经找到了答案：是与否，这取决于您如何加载 Pandas DataFrame。

与 read_table() 方法一样，您有一个“迭代器”参数，它允许获取一个生成器对象，该对象一次只能获取一条记录，如下所述：http: [//pandas.pydata.org/pandas-docs/开发/io.html#iterator](http://pandas.pydata.org/pandas-docs/dev/io.html#iterator)

现在，我不知道 .mean() 和 .apply() 之类的函数如何与这些生成器一起使用。

如果有人有更多信息/经验，请随时分享！

关于 HDF5 开销：

> HDF5 在内存中保留了一个 B 树，用于映射磁盘上的块结构。为数据集分配的块越多，B 树就越大。大型 B 树占用内存并导致文件存储开销以及更多磁盘 I/O 和更高的元数据缓存争用。因此，在内存和 I/O 开销（小 B-树）和访问数据的时间（大 B-树）之间取得平衡很重要。

[http://pytables.github.com/usersguide/optimization.html](http://pytables.github.com/usersguide/optimization.html)

# java - android从HttpGet检索大字符串

> ID：15692985
> 
> 赞同：0
> 
> 时间：2013-03-28T22:04:56.727
> 
> 标签：java, android, http-get

我有一个我创建的 httpclient 类。在其中我有一个静态方法“retrieveHttpGet(String url)”，它返回一个 JSON 对象。

我使用自己的 Web API 作为端点来检索数据。当我检索几行文本时，一切正常。我正在尝试检索更多数据。当我尝试提取大约 20k 个字符的文本时，出现以下错误

```
java.net.SocketException: Socket closed
at libcore.io.Posix.recvfromBytes(Native Method)
at libcore.io.Posix.recvfrom(Posix.java:131)
at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
at java.net.PlainSocketImpl.read(PlainSocketImpl.java:489)
at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:241)
at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
at org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:134)
at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:161)
at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:159)
at java.io.InputStreamReader.read(InputStreamReader.java:244)
at java.io.BufferedReader.fillBuf(BufferedReader.java:130)
at java.io.BufferedReader.readLine(BufferedReader.java:390) 
```

这是我尝试使用的方法

```
public static JSONObject retrieveHttpGet(String url)
{

DefaultHttpClient httpclient = new DefaultHttpClient();

// Prepare a request object
HttpGet httpget = new HttpGet(url); 
httpget.setHeader("Content-type", "application/json");

// Execute the request
HttpResponse response;
try {
    response = httpclient.execute(httpget);
    // Examine the response status
    Log.i("Praeda",response.getStatusLine().toString());

    // Get hold of the response entity
    HttpEntity entity = response.getEntity();
    // If the response does not enclose an entity, there is no need
    // to worry about connection release

    if (entity != null) {
        InputStream inputStream = null;
        String result = null;
        response = httpclient.execute(httpget);           

        inputStream = entity.getContent();

        result = convertStreamToString(inputStream);
        inputStream.close();
        // Transform the String into a JSONObject
        JSONObject jsonObjRecv = new JSONObject(result);
        // Raw DEBUG output of our received JSON object:
    //  Log.i(TAG,"<JSONObject>\n"+jsonObjRecv.toString()+"\n</JSONObject>");

        return jsonObjRecv;
    } 

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

return null;
}   

private static String convertStreamToString(InputStream is) {
        /*
         * To convert the InputStream to String we use the BufferedReader.readLine()
         * method. We iterate until the BufferedReader return null which means
         * there's no more data to read. Each line will appended to a StringBuilder
         * and returned as String.
         * 
         * (c) public domain: http://senior.ceng.metu.edu.tr/2009/praeda/2009/01/11/a-simple-restful-client-at-android/
         */
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    } 
```

# ruby-on-rails - 与不同命名空间下的类名称冲突

> ID：15692987
> 
> 赞同：0
> 
> 时间：2013-03-28T22:05:01.483
> 
> 标签：ruby-on-rails, ruby, rspec

我在不同的命名空间中定义了两次“ClassName”。结构如下所示

```
app
  -Folder1
    -Folder2
      -class_name.rb

app
  -Models
    -Folder3
      -class_name.rb 
```

当 rspec 尝试加载类时

```
Dir["#{Rails.root}/app/**/*.rb"].each { |f| load f } 
```

我在尝试加载时遇到异常`app/Folder1/Folder2/class_name.rb`：

> 预期 app/Folder1/Folder2/class_name.rb 定义 Folder1::Folder2::ClassName (LoadError)

我花了很多时间调试这个。任何帮助都会非常受欢迎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:58:57.193

问题不是它被定义了两次，而是被定义的类`app/Folder1/Folder2/class_name.rb`没有被调用`Folder1::Folder2::ClassName`

# php - codeignitier 购物车仅容纳 10 个项目，甚至将会话存储在数据库中

> ID：15692988
> 
> 赞同：0
> 
> 时间：2013-03-28T22:05:03.517
> 
> 标签：php, javascript, codeigniter, jquery, cart

我在这个论坛上看到了很多关于 codeignitier 购物车的问题，只有通过更改配置文件才能解决问题

但我仍然面临这个问题

我已经像这样更改了配置文件

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']          = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']      = FALSE;
$config['sess_use_database']        = TRUE;
$config['sess_table_name']          = 'ci_sessions';
$config['sess_match_ip']            = FALSE;
$config['sess_match_useragent']    = TRUE;
$config['sess_time_to_update']      = 600; 
```

并且在数据库中，ci_sessions 表，user_data 列中，item 可以存储超过 10 个 item

```
s:11:"total_items";i:12;s:10:"cart_total";i:420000;}} 
```

以及显示购物车项目的代码

```
foreach ($this->cart->contents() as $items): ?>{
    echo $items['id'];
    echo $items['image'];
    ....
} 
```

当我检查萤火虫时，我仍然收到有关超出 cookie 大小的错误

还有什么我应该检查来解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:03:12.690

您受到最大 cookie 长度的影响，因为 CodeIgniter 默认使用会话 cookie 来存储会话数据。每个域的 cookie 可以保存大约 4093 个再见数据（所以如果你有 2 个 cookie，它们的总大小不能超过这个值）。

如果你让 CI 使用数据库进行会话存储（就像你现在所做的那样），那么应该减少 cookie 的大小。CI 只会将[session 元数据放入 cooke](https://github.com/EllisLab/CodeIgniter/blob/2.1-stable/system/libraries/Session.php#L291-294)中，而将 userdata 放入数据库中。检查您的 CI 版本，也许您使用的是过时的版本。

或者，您可以查看 Session 库替换，例如[NativeSession](https://github.com/EllisLab/CodeIgniter/wiki/Native-session)，此代码将模仿相同的 API，但使用 php 的内置会话功能，因此您也可以轻松使用文件或 memcached 支持的存储。

# jquery - jQuery - 如何让 .change() 事件触发

> ID：15692989
> 
> 赞同：0
> 
> 时间：2013-03-28T22:05:04.333
> 
> 标签：jquery, onchange

我不知道我做错了什么，但我无法`change()`触发事件。

**JS：**

```
<script>
   $(document).ready(function () {
        $('#Textbox_Positions').change(Function())
           alert("test");
   })
</script> 
```

**HTML：**

```
 <input id="Textbox_Positions" type="text" placeholder="Search" style="width: 205px" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:07:41.997

尝试这样的事情：

```
<script>
   $(document).ready(function () 
   {
        $('#Textbox_Positions').on("change", function ()
        {
           alert("test");
        });
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:07:52.970

Javascript 区分大小写。

`Function`应该`function`

```
<script>
   $(document).ready(function () {
        $('#Textbox_Positions').change(function(){
           alert("test");
        });
   });
</script> 
```

加上你有一个语法错误，因为你没有正确地使用`{..}`你的函数代码创建一个块..

* * *

整体`function() {/*code here*/}`需要放在`change`括号内。

```
$('#Textbox_Positions').change(function(){/*code*/}); 
```

就像你为`$(document).ready`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T22:07:55.013

您确实错过了包含警报的函数上的 {}。

```
<script>
   $(document).ready(function () {
        $('#Textbox_Positions').change(function(){
           alert("test");
        });
   })
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T22:20:35.993

将元素连接到更改功能的答案是正确的，但如果您想测试它是否有效，您的问题的答案是`$('#Textbox_Positions').trigger('change');`.

我以这种方式使用 changed 事件通过嵌套的 jquery 元素传播更改，这些元素需要内部 update() 函数在其后代之一上的布局更改时触发。

# if-statement - 与 if_match 和 'and' 相得益彰

> ID：15692990
> 
> 赞同：5
> 
> 时间：2013-03-28T22:05:18.833
> 
> 标签：if-statement, conky

由于可搜索关键字的广泛含义，我很难在谷歌上搜索和搜索我正在尝试做的事情。

我正在尝试修改我的 .conkyrc 文件以根据温度更改字体颜色，这需要我编写如下内容：

```
if [ $test >="50" and $test <="60"]; 
```

我根本不希望上面的方法起作用，我知道语法都是错误的，但这是我描述我想要完成的最简单的方法

下面是我的配置中的一个实际部分，我试图在没有“and”或“or”的情况下做到这一点，但当然，它并没有像我希望的那样工作。

```
${goto 45}${if_match "${platform coretemp.0 temp 2}" >= "115"}${color4}${endif}${if_match "${platform coretemp.0 temp 2}" >= "125"}${color5}${endif}${if_match "${platform coretemp.0 temp 2}" >= "145"}${color6}${endif}${if_match "${platform coretemp.0 temp 2}" >= "155"}${color7}${endif}${if_match "${platform coretemp.0 temp 2}" >= "170"}${color8}${endif}${platform coretemp.0 temp 2}°F 
```

另外，我可以将 elseif 与 conky 一起使用吗？

```
${if_match "$test" >="113"}${color4}${elseif "$test1" <="120"}${color5}${endif} 
```

或类似的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-07T00:12:22.373

要模拟 AND，您可以使用两个嵌套的 IF，这样：

```
${if_match ${battery_percent BAT0} <= 60}${if_match ${battery_percent BAT0} >=50} my battery is between 50 and 60 ${endif}${endif} 
```

（注意**双 ${endif}**：如果你*打开*两个 IF，你应该*关闭*两个 IF）

您还可以模拟嵌套两个 IF 的 elseif：

```
${if_match "$test" >="113"}${color4}\
    ${else}${if_match "$test" <="120"}${color5}${endif}\
${endif} 
```

（反斜杠提高可读性）

# c++ - C++ - QtCreator 不显示任何输出

> ID：15692993
> 
> 赞同：3
> 
> 时间：2013-03-28T22:05:32.040
> 
> 标签：c++, qt, qt-creator

```
#include <QCoreApplication>
#include <QDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    qDebug() << "hello";

    return a.exec();
} 
```

在 QtCreator 2.6.2 中构建和运行时，此基本应用程序不起作用。我正在使用 Qt 5.0.1。

甚至我的程序都没有运行；唯一运行的是`qcreator_process_stub.exe`. 在我的`.pro`文件中，该行在`CONFIG += console`那里，在我的`.pro.user`文件中，`UseTerminal`设置为 true。

但我的问题是为什么我的程序没有显示，什么是`qcreator_process_stub.exe`？

编辑：标准输出甚至不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:06:08.233

[http://qt-project.org/doc/qt-5.0/qtcore/qdebug.html#details](http://qt-project.org/doc/qt-5.0/qtcore/qdebug.html#details)

`qcreator_process_stub.exe`是执行 Qt 控制台程序的默认终端。

[http://qt-project.org/doc/qt-5.0/qtcore/qtglobal.html#qDebug](http://qt-project.org/doc/qt-5.0/qtcore/qtglobal.html#qDebug)

> 如果在编译期间定义了 QT_NO_DEBUG_OUTPUT，则此函数不执行任何操作。

试着把它放在你的主要顶部：

```
#ifdef QT_NO_DEBUG_OUTPUT
#undef QT_NO_DEBUG_OUTPUT
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:59:31.920

我发现了问题。

QtCreator 在我的系统上检测到错误的 MinGW 版本（因为我为 Code::Blocks 使用了另一个版本）。我所做的是：

**工具 > 选项... > 构建和运行 > 套件**

然后我克隆了自动检测工具包，并将编译器更改为 QtCreator 附带的编译器。每次我创建一个项目时，我都必须使用该工具包来构建它。

# php - php-cgi.exe 正在打开大量实例

> ID：15692996
> 
> 赞同：3
> 
> 时间：2013-03-28T22:05:48.457
> 
> 标签：php, iis, service, web-deployment

我在 IIS 8 上托管 php 5.2。是的，我知道这是一个可怕的想法，但这是现实。

在我们的网站启动几个小时后服务器会耗尽资源，因为某些原因 php-cgi.exe 打开了几十次：

![在此处输入图像描述](../Images/bafbae233d3a3ed7231fda7b514b4e84.png)

我究竟做错了什么？也许 php.ini 文件有问题？

这可能是由于 mssql_result 没有关闭连接造成的吗？

我没有运气就遵循了这个漂亮的教程[http://www.iis.net/configreference/system.webserver/fastcgi/application](http://www.iis.net/configreference/system.webserver/fastcgi/application)

我实际上已经能够限制实例的数量，但是所有其他请求的处理速度都非常缓慢。

# c++ - 将空范围传递给采用一对迭代器的函数的简洁/简洁的方法是什么？

> ID：15692998
> 
> 赞同：8
> 
> 时间：2013-03-28T22:05:55.297
> 
> 标签：c++, stl, c++11

我有一个需要一对迭代器的函数。我想提供一个无参数版本的函数，它的行为就好像它被传递了一个空范围。

具体来说，假设第一个函数是：

```
void f(vector<int>::iterator b, vector<int>::iterator e) { // impl. } 
```

我想写这个：

```
void f() { f({}, {}); } 
```

我这里的初始化是否正确，{}、{} 应该是两个默认构造的 vector::iterator 类型？（它编译）。

我是否必须构造一个容器来获得一对比较相等的迭代器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T22:39:13.013

据我了解，这通常不能以符合标准的方式完成。

*24.2.1/5*：

> 迭代器也可以具有不与任何序列相关联的奇异值。[ 示例：在声明未初始化的指针 x 之后（与 int* x; 一样），必须始终假定 x 具有指针的奇异值。— 结束示例]**大多数表达式的结果对于奇异值是未定义的**；唯一的例外是销毁持有奇异值的迭代器，将非奇异值分配给持有奇异值的迭代器，并且对于满足`DefaultConstructible`要求，使用值初始化的迭代器作为复制或移动操作的源。[注意：此保证不适用于默认初始化，尽管区别仅适用于具有琐碎默认构造函数的类型，例如指针或持有指针的聚合。— 尾注] 在这些情况下，奇异值会像任何其他值一样被覆盖。可取消引用的值总是非单一的。

默认/值初始化显然与任何序列无关，因此迭代器是单数的。比较两个奇异的迭代器是未定义的行为。

```
std::vector<int>::iterator i;
std::vector<int>::iterator j = i; // UB, assignment of a non-a singular value
                                  // If you pass `i` to a function, a copy is done
                                  // which also results in UB (as in Andy's answer). 
```

下一次尝试，使用值初始化

```
std::vector<int>::iterator i{};
std::vector<int>::iterator j = i; // ok, i is value-initialized
i == j; // undefined, comparison is not explicitly non-undefined behavour
i == i; // undefined, comparison is not explicitly non-undefined behavour 
```

由于我们没有关于 的更多信息`vector<int>::iterator`，因此您的方法是错误的。

您可以做的是将您的更改`f`为模板并使用指针：

```
template <typename Iter>
void f(Iter b, Iter e);

int *p; f(p, p); // ok, defined for pointers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T22:07:57.600

我*相信*迭代器的默认构造函数总是等价于`end`. 也就是说，如果您将相同的迭代器传递给函数，那么根据定义，这也是一个空范围。

由于所有指针都是有效的迭代器，因此您应该能够将其`static_cast<int*>(NULL)`用作两个参数。（或`vector<int>::iterator()`）。

# java - Apache Commons 包中的 IntegerUtils 和 DoubleUtils

> ID：15692999
> 
> 赞同：6
> 
> 时间：2013-03-28T22:05:58.013
> 
> 标签：java, apache-commons-lang

我广泛使用 Apache Commons 包，尤其是 StringUtils、BooleanUtils、ObjectUtils、MapUtils 类，发现它们非常有用。我想知道是否有诸如 IntegerUtils、DoubleUtils 之类的类为它们各自的包装类提供类似的功能（我在 Apache Commons 包中找不到这样的类）。

谢谢，

文卡特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-19T14:54:44.303

我希望他们有一个与字符串一样有用的数字实用程序类。NumberUtils 类都是关于将数字转换为字符串/从字符串转换。

不过，您可以使用[ObjectUtils](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ObjectUtils.html)来执行空安全整数操作。

代替：

```
foo(Integer arg) {
  if(arg != null && arg == 1)
    doSomething();
} 
```

你可以做：

```
foo(Integer arg) {
  if(ObjectUtils.defaultIfNull(arg, 0) == 1)
    doSomething();
} 
```

如果`Integer`您要比较的是返回 an 的函数调用`Integer`，这将允许您只调用该函数一次，而不会创建一次性变量。