# StackOverflow 问答 15545000-15545999

# python - 指数衰减拟合

> ID：15545004
> 
> 赞同：2
> 
> 时间：2013-03-21T10:31:13.013
> 
> 标签：python, numpy, scipy

我试图拟合一些在指数衰减后分布的数据。我试图在网上遵循一些合适的例子，但我的代码不适合数据。拟合只产生一条直线。也许初始参数有问题？到目前为止，我只使用了高斯拟合和线拟合，使用相同的方法，这对于这种情况可能不正确。该代码从网络获取数据，因此可以直接执行。问题：为什么代码不适合？提前谢谢了。

```
#!/usr/bin/env python

import pyfits, os, re, glob, sys
from scipy.optimize import leastsq
from numpy import *
from pylab import *
from scipy import *

rc('font',**{'family':'serif','serif':['Helvetica']})
rc('ps',usedistiller='xpdf')
rc('text', usetex=True)
#------------------------------------------------------

tmin = 56200
tmax = 56249

data=pyfits.open('http://heasarc.gsfc.nasa.gov/docs/swift/results/transients/weak/GX304-1.orbit.lc.fits')
time  = data[1].data.field(0)/86400\. + data[1].header['MJDREFF'] + data[1].header['MJDREFI']
rate  = data[1].data.field(1)
error = data[1].data.field(2)
data.close()

cond = ((time > 56210) & (time < 56225))
time = time[cond]
rate = rate[cond]
error = error[cond]

right_exp = lambda p, x: p[0]*exp(-p[1]*x)
err = lambda p, x, y:(right_exp(p, x) -y)
v0= [0.20, 56210.0, 1]
out = leastsq(err, v0[:], args = (time, rate), maxfev=100000, full_output=1)
v = out[0] #fit parameters out
xxx = arange(min(time), max(time), time[1] - time[0])
ccc = right_exp(v, xxx)
fig = figure(figsize = (9, 9)) #make a plot
ax1 = fig.add_subplot(111)
ax1.plot(time, rate, 'g.') #spectrum
ax1.plot(xxx, ccc, 'b-') #fitted spectrum
savefig("right exp.png")

axis([tmin-10, tmax, -0.00, 0.45]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-02T18:43:53.333

您的问题是病态的，因为您的数组`times`包含大数字，在使用时`exp(-a*time)`给出的值接近`0.`，这会欺骗`err`函数，因为您的`rate`数组包含的小值也接近`0.`，导致小错误。换句话说，`a`指数函数的高值给出了一个很好的解决方案。

要解决这个问题，您可以：

*   更改衰减函数以包含初始时间：
    `exp(-a*(time-time0))`
*   将输入数据更改为从较小的数字开始：
    `time -= time.min()`

对于这两个选项，您必须更改初始猜测`v0`，例如`v0=[0.,0.]`。第一个解决方案似乎更强大，您不必管理`time`阵列中的更改。一个好的初步猜测`time0`是`time.min()`：

```
right_exp = lambda p, x: p[0]*exp(-p[1]*(x-p[2]))
err = lambda p, x, y:(right_exp(p, x) -y)
v0= [0., 0., time.min() ]
out = leastsq(err, v0, args = (time, rate))
v = out[0] #fit parameters out
xxx = arange(min(time), max(time), time[1] - time[0])
ccc = right_exp(v, xxx)
fig = figure(figsize = (9, 9)) #make a plot
ax1 = fig.add_subplot(111)
ax1.plot(time, rate, 'g.') #spectrum
ax1.plot(xxx, ccc, 'b-') #fitted spectrum
fig.show() 
```

给予：

![在此处输入图像描述](../Images/3f38845baa1ea1eab9819b170bdbce19.png)

尽管如此，最终结果仍取决于`v0`，例如，`v0=[1.,1.,time.min()]`它衰减太快并且找不到最佳值。

# java - 在 Jpanel 上绘制可移动的画布

> ID：15545006
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:31:18.417
> 
> 标签：java, swing, jpanel, java-canvas

我想画一个可以在 Jpanel 上移动的画布。那就是当用户点击画布并拖动它时，它必须移动到一个新的位置。我已经实现了 MouseMotionListener，但我不知道要在里面包含什么来使画布按照要求移动。这是 DisplayCanvas 类：

```
class DisplayCanvas extends Canvas
{
    public DisplayCanvas()
    {
        setBounds(20, 40, 300, 300);
        setBackground(Color.white);
    }
}
class shape extends JFrame  implements MouseMotionListener{

static JPanel panel;
static Container contentpane;
static DisplayCanvas canvas;
shape()
{
    canvas=new DisplayCanvas();
    canvas.addMouseMotionListener(this);
    panel= new JPanel();
    panel.setBounds(20,20,250,140);
    panel.setLayout(null);
    contentpane = getContentPane();
    contentpane.add(canvas);
    contentpane.add(panel);
}
@Override
public void mouseDragged(MouseEvent e) {}
@Override
public void mouseMoved(MouseEvent arg0) {}
} 
```

这就是我测试它的方式。

```
public class display 
{
    static JFrame frame;
    public static void main(String[] args) 
    {
        frame=new shape();
        frame.setBounds(380, 200, 500, 400);
        frame.setTitle("SHAPE AND COLOR");
        frame.setVisible(true);
    }
} 
```

注意：请不要建议我使用 JPanel 来使用画布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:55:23.567

您不想扩展的事实`JPanel`似乎很奇怪，但这并非不可行。然而，您可能会在某些时候遇到问题，因为您正在混合轻量级和重量级组件。您可能会遇到视觉故障和其他显示问题。

但是，我会提请您注意您在当前代码中犯的几个重要错误：

1.  如果不需要，不要扩展类（不需要扩展`JFrame`也不`Canvas`）
2.  `static`除非绝对必要，否则不要制造变量
3.  遵循 Java 命名约定：类名总是以大写字母开头
4.  不要使用`null` `LayoutManager`.

这是一个片段，说明了您可以使其工作的非常基本的方法（需要重构代码以正确分离各个方面）

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.LayoutManager2;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.LinkedHashMap;
import java.util.Map;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestHeavyweightLightweight {

    public class MyLayoutManager implements LayoutManager2 {

        private Map<Component, Rectangle> constraints = new LinkedHashMap<Component, Rectangle>();

        @Override
        public void addLayoutComponent(String name, Component comp) {
            constraints.put(comp, comp.getBounds());
        }

        @Override
        public void removeLayoutComponent(Component comp) {
            constraints.remove(comp);
        }

        @Override
        public Dimension preferredLayoutSize(Container parent) {
            Rectangle rect = new Rectangle();
            for (Rectangle r : constraints.values()) {
                rect = rect.union(r);
            }
            return rect.getSize();
        }

        @Override
        public Dimension minimumLayoutSize(Container parent) {
            return preferredLayoutSize(parent);
        }

        @Override
        public void layoutContainer(Container parent) {
            for (Map.Entry<Component, Rectangle> e : constraints.entrySet()) {
                e.getKey().setBounds(e.getValue());
            }
        }

        @Override
        public void addLayoutComponent(Component comp, Object constraints) {
            if (constraints instanceof Rectangle) {
                this.constraints.put(comp, (Rectangle) constraints);
            } else {
                addLayoutComponent((String) null, comp);
            }
        }

        @Override
        public Dimension maximumLayoutSize(Container target) {
            return new Dimension(Integer.MAX_VALUE, Integer.MAX_VALUE);
        }

        @Override
        public float getLayoutAlignmentX(Container target) {
            return 0;
        }

        @Override
        public float getLayoutAlignmentY(Container target) {
            return 0;
        }

        @Override
        public void invalidateLayout(Container target) {

        }

        public void setConstraints(Component component, Rectangle rect) {
            constraints.put(component, rect);
        }

        public class MouseDragger extends MouseAdapter {
            private Point lastLocation;
            private Component draggedComponent;

            @Override
            public void mousePressed(MouseEvent e) {
                draggedComponent = e.getComponent();
                lastLocation = SwingUtilities.convertPoint(draggedComponent, e.getPoint(), draggedComponent.getParent());
            }

            @Override
            public void mouseDragged(MouseEvent e) {
                Point location = SwingUtilities.convertPoint(draggedComponent, e.getPoint(), draggedComponent.getParent());
                if (draggedComponent.getParent().getBounds().contains(location)) {
                    Point newLocation = draggedComponent.getLocation();
                    newLocation.translate(location.x - lastLocation.x, location.y - lastLocation.y);
                    newLocation.x = Math.max(newLocation.x, 0);
                    newLocation.x = Math.min(newLocation.x, draggedComponent.getParent().getWidth() - draggedComponent.getWidth());
                    newLocation.y = Math.max(newLocation.y, 0);
                    newLocation.y = Math.min(newLocation.y, draggedComponent.getParent().getHeight() - draggedComponent.getHeight());
                    setConstraints(draggedComponent, new Rectangle(newLocation, draggedComponent.getSize()));
                    if (draggedComponent.getParent() instanceof JComponent) {
                        ((JComponent) draggedComponent.getParent()).revalidate();
                    } else {
                        draggedComponent.getParent().invalidate();
                        draggedComponent.getParent().validate();
                    }
                    lastLocation = location;
                }
            }

            @Override
            public void mouseReleased(MouseEvent e) {
                lastLocation = null;
                draggedComponent = null;
            }

            public void makeDraggable(Component component) {
                component.addMouseListener(this);
                component.addMouseMotionListener(this);
            }

        }

    }

    private Canvas canvas;
    private JPanel panel;

    protected void createAndShowGUI() {
        JFrame frame = new JFrame(TestHeavyweightLightweight.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        canvas = new Canvas();
        canvas.setBackground(Color.WHITE);
        panel = new JPanel();
        MyLayoutManager mgr = new MyLayoutManager();
        panel.setLayout(mgr);
        panel.add(canvas, new Rectangle(20, 40, 300, 300));
        MyLayoutManager.MouseDragger mouseDragger = mgr.new MouseDragger();
        mouseDragger.makeDraggable(canvas);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestHeavyweightLightweight().createAndShowGUI();
            }
        });
    }

} 
```

# scala - 列表上“不同”的更快代码

> ID：15545014
> 
> 赞同：1
> 
> 时间：2013-03-21T10:31:40.767
> 
> 标签：scala, optimization, code-generation, isabelle

*这个问题是指使用 Isabelle/HOL 定理证明器生成代码。*

当我`distinct`在列表中导出函数的代码时

```
export_code distinct in Scala file - 
```

我得到以下代码

```
def member[A : HOL.equal](x0: List[A], y: A): Boolean = (x0, y) match {
  case (Nil, y) => false
  case (x :: xs, y) => HOL.eq[A](x, y) || member[A](xs, y)
}

def distinct[A : HOL.equal](x0: List[A]): Boolean = x0 match {
  case Nil => true
  case x :: xs => ! (member[A](xs, x)) && distinct[A](xs)
} 
```

此代码具有二次运行时。有更快的版本吗？我想`"~~/src/HOL/Library/Code_Char"`在我的理论开始时导入字符串，并为列表设置有效的代码生成。一个更好的实现`distinct`是在 O(n log n) 中对列表进行排序并遍历列表一次。但我想一个人可以做得更好吗？

无论如何，是否有更快的实现`distinct`，也许还有其他`Main`可用的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:22:38.897

我不知道 Isabelle2013 的库中是否有任何更快的实现，但您可以自己轻松完成，如下所示：

1.  实现一个`distinct_sorted`确定排序列表的独特性的函数。
2.  证明`distinct_sorted`确实`distinct`在排序列表上实现
3.  证明实现`distinct`通过`distinct_list`和排序的引理，并将其声明为`distinct`.

总之，这看起来如下：

```
context linorder begin
fun distinct_sorted :: "'a list => bool" where
  "distinct_sorted [] = True"
| "distinct_sorted [x] = True"
| "distinct_sorted (x#y#xs) = (x ~= y & distinct_sorted (y#xs))"

lemma distinct_sorted: "sorted xs ==> distinct_sorted xs = distinct xs"
  by(induct xs rule: distinct_sorted.induct)(auto simp add: sorted_Cons)
end

lemma distinct_sort [code]: "distinct xs = distinct_sorted (sort xs)"
 by(simp add: distinct_sorted) 
```

接下来，您需要一个高效的排序算法。默认情况下，`sort`使用插入排序。如果从 HOL/Library 导入 Multiset，`sort`将通过快速排序实现。如果您从形式证明档案中导入[高效合并排序，您将获得合并排序。](http://afp.sourceforge.net/entries/Efficient-Mergesort.shtml)

While this can improve efficiency, there's also a snag: After the above declarations, you can execute `distinct` only on lists whose elements are instances of the type class `linorder`. As this refinement happens only inside the code generator, your definitions and theorems in Isabelle are not affected.

For example, to apply `distinct` to a list of lists in any code equation, you first have to define a linear order on lists: `List_lexord` in `HOL/Library` does so by picking the lexicographic order, but this requires a linear order on the elements. If you want to use `string`, which abbreviates `char list`, `Char_ord` defines the usual order on `char`. If you map characters to the character type of the target language with `Code_Char`, you also need the adaptation theory `Code_Char_ord` for the combination with `Char_ord`.

# string - 动态更改 url flash builder

> ID：15545019
> 
> 赞同：0
> 
> 时间：2013-03-21T10:31:55.697
> 
> 标签：string, flash-builder, dynamic-url

我正在尝试为每个单词
XML创建带有单词和声音列表的应用程序

```
<bla>
   <list>
         <word>Hello</word>
         <audio>Hello.mp3</audio>
   </list>
   <list>
         <word>Bye</word>
         <audio>bye.mp3</audio>
   </list>
</bla> 
```

资源 ：

```
<s:navigationContent>
        <s:Button label="Listan" click="playSound();"/>
</s:navigationContent> 
```

脚本 ：

```
<fx:Script>
     <![CDATA[
            import flash.media.*;

            [Embed(source="assent/sounds/{data.audio}")]

            [Bindable]
            public var sndCls:Class;
            public var snd:Sound = new sndCls() as Sound; 
            public var sndChannel:SoundChannel;

            public function playSound():void {
                sndChannel=snd.play();
            }   
            public function stopSound():void {
                sndChannel.stop();
            }   
        ]]>
    </fx:Script> 
```

我这里有错误：

```
[Embed(source="assent/sounds/{data.audio}")] 
```

错误信息 ：

```
Unable to transcode {data.audio}. 
```

我能做些什么来修复它：} 使用 Flash Builder 4.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:23:56.493

嵌入 = 编译器指令。Embed 根本没有任何运行时功能。您必须嵌入所有资产或动态加载它...

# iphone - 在 iPhone 应用程序中集成 vocal 套件库时出错

> ID：15545022
> 
> 赞同：0
> 
> 时间：2013-03-21T10:31:59.010
> 
> 标签：iphone, ios, speech-to-text

我正在开发一个应用程序，我想将语音转换为文本。[为此，我正在集成来自https://github.com/KingOfBrian/VocalKit](https://github.com/KingOfBrian/VocalKit)的 VocalKit 第三方库 。当我包含代码并编译它给我错误时。我已经进行了所有必要的更改并导入了框架。

这是我的代码

```
 (void) recognizedTextNotification:(NSNotification*)notification  {
    NSDictionary *dict = [notification userInfo]; NSString *phrase =
    [dict objectForKey:VKRecognizedPhraseNotificationTextKey];
    [patientId setText:phrase];  } 
```

我收到以下错误

```
Undefined symbols for architecture i386:  
"_VKRecognizedPhraseNotificationTextKey", referenced from:
      -[ViewController recognizedTextNotification:] in ViewController.o ld: symbol(s) not found for architecture i386 
```

# c# - Why IPAddress.Any needs to connect to remote host?

> ID：15545024
> 
> 赞同：0
> 
> 时间：2013-03-21T10:32:09.480
> 
> 标签：c#, tcp, tcplistener

I'm building one client server application in c# where server is remote host. I've router and firewall in my network.

My client side code is

```
hostSocket = new TcpClient();                
hostSocket.Connect(serverIp, serverPort); 
```

And My server side code was

`eqListner = new TcpListener(IPAddress.Parse(eqIp), eqPort);`

in this scenario I'm able to connect client on same pc by giving ip 127.0.0.1 but cannot connect when I ran server on another pc in my network.

Then I've changed my server side code by following:

```
IPAddress ipAddress = Dns.GetHostEntry(Dns.GetHostName()).AddressList[0];
IPEndPoint ipLocalEndPoint = new IPEndPoint(ipAddress, eqPort);
TcpListener eqListner = new TcpListener(ipLocalEndPoint); 
```

But still the result is same. Then I changed my server side code again by this:

`eqListner = new TcpListener(IPAddress.Any, eqPort);`

And this works perfectly fine. I've read msdn for `IPAddress.Any` and found that this property set server to listen for client activity on all network interfaces.

My question is why IPAddress.Any needs to connect to remote host? and other functions cannot connects?

Thanks in advance....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:44:45.950

问题可能出在第一行。

```
IPAddress ipAddress = Dns.GetHostEntry(Dns.GetHostName()).AddressList[0]; 
```

如果它正在运行，它将获得主机的第一个 ip。这可能是 IPv6 或 localhost 地址。如果你想在特定的地址收听，最好将其添加到[项目设置中](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)。它将存储在 app.config 中，您可以更改它而无需重新编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:43:25.683

> in this scenario I'm able to connect client on same pc by giving ip 127.0.0.1 but cannot connect when I ran server on another pc in my network

`127.0.0.1` is the loopback address that is always the local host. When the service and the client are only on the same machine this can be convenient.

You are better off coding services to listen on all interfaces, this way should the server change address your application doesn't need to be updated or restarted.

# c# - Performance profiling asp.net, what is ProcessRequestNotificationHelper?

> ID：15545025
> 
> 赞同：8
> 
> 时间：2013-03-21T10:32:11.657
> 
> 标签：c#, asp.net, iis-7, iis-7.5, performance-testing

I'm performance profiling an asp.net web application, on a load of 20 users per second. 20 users are basically crippling the application and nothing it loading.

I'm using the RedGate performance profiler, and I'm not sure what to make of it.

12% of the time is spent in my code (which I can dig in to and improve) but 88% of the time is spent in

System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr rootedObjectsPointer, IntPtr nativeRequestContext, IntPtr moduleData, int flags)

..I've not a clue what this is (well, I'm fairly sure it's something to do with IIS7...), and tackling a site that's not able to cope with 20 users a second, at 88% of the time taken, this seems like a good place to start.

Any ideas anyone?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-01T07:34:31.067

ProcessRequestNotificationHelper 只是分析工具捕获数据的入口点。Dynatrace 与 RedGate 一样，将其定义为 ASP.Net 传感器可以开始跟踪 ASP.Net 管道中传入请求的入口点。

[https://community.dynatrace.com/community/display/DOCDT60/ASP.NET+Sensor](https://community.dynatrace.com/community/display/DOCDT60/ASP.NET+Sensor)

# android - Android: InflateException in custom ListView

> ID：15545027
> 
> 赞同：3
> 
> 时间：2013-03-21T10:32:18.923
> 
> 标签：android, android-listview

While inflating custom ListView row layout I'm getting this exception.

```
E/AndroidRuntime(1241): android.view.InflateException: Binary XML file line #6: Error inflating class <unknown> 
```

See the code below for reference...

**CustomListViewAdapter.java**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    holder = null;
    ListViewRowData rowItems = (ListViewRowData) getItem(position);

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.list_row, null); //<- throws inflate exception here

        holder = new ViewHolder();
        holder.dataFields = items.get(position);
        holder.mDeleteCB = (CheckBox) convertView
                .findViewById(R.id.DeleteCB);

        holder.mSeatName = (TextView) convertView.findViewById(R.id.SeatNo);
        holder.mAddDesc = (TextView) convertView
                .findViewById(R.id.CallDesc);
        holder.mCallIcon = (ImageView) convertView
                .findViewById(R.id.PaxCallIV);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.mSeatName.setText(rowItems.getSeatName());
    holder.mAddDesc.setText(rowItems.getAddDesc());

    holder.mCallIcon.setImageDrawable(context.getResources().getDrawable(
            R.drawable.ic_launcher));

    return convertView;
} 
```

**list_row.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/SeatNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:padding="15dp"
        android:text="Seat"
        android:textSize="@android:attr/textAppearanceMedium"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/CallDesc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/SeatNo"
        android:padding="15dp"
        android:text="Description :"
        android:textSize="@android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/PaxCallIV"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:padding="10dp"
        android:src="@drawable/ic_launcher" />

    <CheckBox
        android:id="@+id/DeleteCB"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/PaxCallIV"
        android:paddingRight="15dp" />

</RelativeLayout> 
```

Any kind of help or suggestion is much appreciated. Thanks !

**Update**

below is the entire logcat,

```
android.view.InflateException: Binary XML file line #7: Error inflating class <unknown>
    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    at com.sample.ecabinservice.utility.CustomListViewAdapter.getView(CustomListViewAdapter.java:46)
    at android.widget.AbsListView.obtainView(AbsListView.java:2159)
    at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
    at android.widget.ListView.onMeasure(ListView.java:1158)
    at android.view.View.measure(View.java:15513)
    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:645)
    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:425)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1052)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:590)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    at android.view.View.measure(View.java:15513)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
    at android.view.View.measure(View.java:15513)
    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
    at android.view.Choreographer.doFrame(Choreographer.java:532)
    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
    ... 48 more
Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x1
    at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
    at android.widget.TextView.<init>(TextView.java:787)
    at android.widget.TextView.<init>(TextView.java:449) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T12:44:10.873

文本外观参考，如`@android:attr/textAppearanceMedium`，进入`android:textAppearance`属性，而不是`android:textSize`。

# asp.net - Http Error 500: Internal Server Error - Asp.Net

> ID：15545029
> 
> 赞同：0
> 
> 时间：2013-03-21T10:32:30.267
> 
> 标签：asp.net, httpwebrequest

I have a scenario where I need to call a webmethod on pageunload event of javascript.

1.  When I open multiple instances of same page in multiple browser tabs(eg greater than 10 tabs).
2.  Close the browser at once.

Pageunload for multiple instances of page is called and my error recording tool records the error "Http Error 500: Internal Server Error".

But, nothing is written in log files and I do not get any error message even if the application is in debug mode.

I need to troubleshoot the issue aand prevent it from occurring. Anyone has any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:45:12.807

使用此方法并尝试制作一个日志系统来识别错误。

```
 protected override void OnUnload(EventArgs e)
{
    base.OnUnload(e);
// your code here

} 
```

# c - 谁能给我这个算法的例子

> ID：15545032
> 
> 赞同：-6
> 
> 时间：2013-03-21T10:32:37.730
> 
> 标签：c, algorithm

这个算法写在写伟大的代码卷 1 书中，用于将十进制数字字符串转换为整数值：

1.  用零初始化一个变量；这将保持最终值。
2.  如果字符串中不再有数字，则算法完成，变量保存数值。
3.  从字符串中获取下一个数字（从左到右）。
4.  将变量乘以 10，然后将步骤 3 中获取的数字相加。
5.  转到第 2 步并重复。

我不知道转换是如何发生的。请举个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:38:24.910

```
/* warning: naive and unsafe implement. don't use it for important projects */
int strtod(const char *str)
{
    int ret = 0;
    while (*str)
        ret = ret * 10 + *str++ - '0';
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:37:47.630

这是您的标准字符串到整数的转换算法：

```
char *s = "12345";
int res = 0;              // 1\. Initialize a variable with zero
while (*s) {              // 2\. If there are no more digits in the string...
    int d = (*s++ - '0'); // 3\. Fetch the next digit
    res = 10*res + d;     // 4\. Multiply the variable by ten, and then...
}                         // 5\. Go to step 2 and repeat. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:49:57.187

考虑字符串“1134”

```
String        Variable

()1134        0
(1)134     0 * 10 + 1 =    1
1(1)34     1 * 10 + 1 =   11
11(3)4    11 * 10 + 3 =  113
113(4)   113 * 10 + 4 = 1134 
```

# ajax - 导航时替换引导输入提示

> ID：15545034
> 
> 赞同：4
> 
> 时间：2013-03-21T10:32:50.053
> 
> 标签：ajax, twitter-bootstrap, bootstrap-typeahead

我正在使用 Bootstrap Typeahead 来建议 som 搜索结果。结果是从 ajax 资源返回的，并且由于该资源会产生延迟，因此我遇到了不幸的影响。

示例：如果输入一个 4 个字母的单词，建议将出现在 2 个字母之后，然后我可以使用向上/向下键查看结果，但由于最后一个请求已完成，建议会突然重新加载。

如果用户当前正在使用向上/向下键来查看建议，是否有任何方法可以“取消”任何剩余？

```
('#query').typeahead({
        items: 4,
        source: function (query,process) {

            map = {};
            $.getJSON('/app_dev.php/ajax/autosuggest/'+query, function (data) {
                vehicles = [];
                $.each(data, function(i,vehicle){
                    map[vehicle.full] = vehicle;
                    vehicles.push(vehicle.full);
                });
                process(vehicles);
            });
        },
        updater: function (item) {
            // do something here when item is selected
        },
        highlighter: function (item) {
            return item;
        },
        matcher: function (item) {
            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:43:15.063

我**认为**以下内容将满足您的需求（很难准确复制）：

没有简单的方法来中止延迟的响应，但是您可以[按照我在这里](https://stackoverflow.com/a/13460392/1407478)的想法扩展 typeahead （无需修改 bootstrap.js）

这个概念是捕捉`keydown`，检测事件是否为`KEY_UP`or `KEY_DOWN`，设置一个标志`is_browsing`，然后`process`如果`is_browsing`为真则中止（即，如果用户点击了`KEY_UP`or`KEY_DOWN`之后没有其他键）。

**扩展预输入**：

```
// save the original function object
var _superTypeahead = $.fn.typeahead;

// add is_browsing as a new flag
$.extend( _superTypeahead.defaults, {
    is_browsing: false
});

// create a new constructor
var Typeahead = function(element, options) {
    _superTypeahead.Constructor.apply( this, arguments )
}

// extend prototype and add a _super function
Typeahead.prototype = $.extend({}, _superTypeahead.Constructor.prototype, {
    constructor: Typeahead

    , _super: function() {
        var args = $.makeArray(arguments)
        // call bootstrap core
        _superTypeahead.Constructor.prototype[args.shift()].apply(this, args)
    }

    //override typeahead original keydown
  , keydown: function (e) {
      this._super('keydown', e)
      this.options.is_browsing = ($.inArray(e.keyCode, [40,38])>-1)
    }

    //override process, abort if user is browsing
  , process: function (items) {
      if (this.options.is_browsing) return
      this._super('process', items)
    }

});

// override the old initialization with the new constructor
$.fn.typeahead = $.extend(function(option) {
    var args = $.makeArray(arguments),
    option = args.shift()

    // this is executed everytime element.modal() is called
    return this.each(function() {
        var $this = $(this)
        var data = $this.data('typeahead'),
            options = $.extend({}, _superTypeahead.defaults, $this.data(), typeof option == 'object' && option)

        if (!data) {
            $this.data('typeahead', (data = new Typeahead(this, options)))
        }
        if (typeof option == 'string') {
            data[option].apply( data, args )
        }
    });
}, $.fn.typeahead); 
```

这个 typeahead-extension 可以放在任何地方，例如在`<script type="text/javascript">`-section

**测试扩展**：

```
<input type="text" id="test" name="test" placeholder="type some text" data-provide="typeahead">
<script type="text/javascript">
$(document).ready(function() {
    var url='typeahead.php';
    $("#test").typeahead({
        items : 10,
        source: function (query, process) {
            return $.get(url, {  query: query }, function (data) {
                return process(data.options);
            });
        }
    });
});
</script> 
```

一个“服务器端”PHP 脚本，它返回许多带有强制延迟的随机选项，typeahead.php：

```
<?
header('Content-type: application/json');
$JSON='';
sleep(3); //delay execution in 3 secs
for ($count=0;$count<30000;$count++) {
    if ($JSON!='') $JSON.=',';
    //create random strings
    $s=str_shuffle("abcdefghijklmnopq");
    $JSON.='"'.$s.'"';
}
$JSON='{ "options": ['.$JSON.'] }';
echo $JSON;
?> 
```

它似乎真的对我有用。但我不能确定它是否适用于你的情况。现在让我看看你成功与否。

# ssrs-2008 - Visibility expression error in ssrs 2008 table column

> ID：15545035
> 
> 赞同：1
> 
> 时间：2013-03-21T10:32:54.003
> 
> 标签：ssrs-2008, reporting-services

![enter image description here](../Images/3fbd9d2d60cafa1b387ea6c91dc2487c.png)Dears,

I have a table that is grouped by Currency, and when i export to excel it splited into sheets based on Currency Grouping and each sheet has Currency Name.

![enter image description here](../Images/bdef39c6a56b1f75f8b67b2e45288f58.png)

i need to set Visibility Expression to last 2 columns to be hidden if the currency is USD.

ive tried

`=IIF(Fields!Currency1.Value="USD",True,False)`but all sheets are hidden

ive tried

`=IIF(Globals!PageName="USD",True,False)`it gave me error global variables can only be used in headers and footers.

also

=`IIF(First(ReportItems!Claim_Currency.Value)="USD",True,False)`also error.

can any one advise ,

Regards,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:29:19.560

而不是数据集字段值使用参数值来显示或隐藏。

例如：

=IIF(INSTR(Join(Parameters!Currency.Value,","),"USD")=0,True,False)

# c# - 用于 WinRT 的 MaskedTextBox

> ID：15545039
> 
> 赞同：1
> 
> 时间：2013-03-21T10:33:00.673
> 
> 标签：c#, wpf, xaml, microsoft-metro, winrt-xaml

我正在寻找一个用于 WinRT 的 MaskedTextBox，我似乎找不到任何...有人知道这样的文本框是否存在吗？

我从 ComponentOne 找到了一个，但那个是付费的，我正在寻找免费的解决方案。

如果有人知道 Silverlight 或 Windows 桌面的开源解决方案，**它**不像超过 2000 行代码，我愿意研究它并尝试将其转换为 WinRT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:06:51.290

我使用[行为](http://blindmeis.wordpress.com/2010/06/01/wpf-masked-textbox-behavior/)而不是 maskedtextbox 控件。但老实说，我不知道这是否适用于 WinRT

编辑：这是我的最新版本

```
public class TextBoxInputMaskBehavior : Behavior<TextBox>
{
    private WeakPropertyChangeNotifier _notifier;

    #region DependencyProperties

    public static readonly DependencyProperty InputMaskProperty =
      DependencyProperty.Register("InputMask", typeof(string), typeof(TextBoxInputMaskBehavior), null);

    public string InputMask
    {
        get { return (string)GetValue(InputMaskProperty); }
        set { SetValue(InputMaskProperty, value); }
    }

    public static readonly DependencyProperty PromptCharProperty =
       DependencyProperty.Register("PromptChar", typeof(char), typeof(TextBoxInputMaskBehavior), new PropertyMetadata('_'));

    public char PromptChar
    {
        get { return (char)GetValue(PromptCharProperty); }
        set { SetValue(PromptCharProperty, value); }
    }

    public static readonly DependencyProperty ResetOnSpaceProperty =
       DependencyProperty.Register("ResetOnSpace", typeof(bool), typeof(TextBoxInputMaskBehavior), new PropertyMetadata(false));

    public bool ResetOnSpace
    {
        get { return (bool)GetValue(ResetOnSpaceProperty); }
        set { SetValue(ResetOnSpaceProperty, value); }
    }

    #endregion

    public MaskedTextProvider Provider { get; private set; }

    public TextBoxInputMaskBehavior()
    {
        //defaults
    }

    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.Loaded += AssociatedObjectLoaded;
        AssociatedObject.PreviewTextInput += AssociatedObjectPreviewTextInput;
        AssociatedObject.PreviewKeyDown += AssociatedObjectPreviewKeyDown;

        DataObject.AddPastingHandler(AssociatedObject, Pasting);
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.Loaded -= AssociatedObjectLoaded;
        AssociatedObject.PreviewTextInput -= AssociatedObjectPreviewTextInput;
        AssociatedObject.PreviewKeyDown -= AssociatedObjectPreviewKeyDown;

        DataObject.RemovePastingHandler(AssociatedObject, Pasting);
    }

    /*
    Mask Character  Accepts  Required?  
    0  Digit (0-9)  Required  
    9  Digit (0-9) or space  Optional  
    #  Digit (0-9) or space  Required  
    L  Letter (a-z, A-Z)  Required  
    ?  Letter (a-z, A-Z)  Optional  
    &  Any character  Required  
    C  Any character  Optional  
    A  Alphanumeric (0-9, a-z, A-Z)  Required  
    a  Alphanumeric (0-9, a-z, A-Z)  Optional  
       Space separator  Required 
    .  Decimal separator  Required  
    ,  Group (thousands) separator  Required  
    :  Time separator  Required  
    /  Date separator  Required  
    $  Currency symbol  Required  

    In addition, the following characters have special meaning:

    Mask Character  Meaning  
    <  All subsequent characters are converted to lower case  
    >  All subsequent characters are converted to upper case  
    |  Terminates a previous < or >  
    \  Escape: treat the next character in the mask as literal text rather than a mask symbol  

    */
    void AssociatedObjectLoaded(object sender, System.Windows.RoutedEventArgs e)
    {
        this.Provider = new MaskedTextProvider(InputMask, CultureInfo.CurrentCulture);
        this.Provider.PromptChar = this.PromptChar;
        this.Provider.SkipLiterals = true;
        this.Provider.ResetOnSpace = this.ResetOnSpace;
        this.Provider.Set(AssociatedObject.Text);

        AssociatedObject.Text = GetProviderText();

        //seems the only way that the text is formatted correct, when source is updated
        //AddValueChanged for TextProperty in a weak manner
        this._notifier = new WeakPropertyChangeNotifier(this.AssociatedObject, TextBox.TextProperty);
        this._notifier.ValueChanged += new EventHandler(this.UpdateText);          
    }
    void AssociatedObjectPreviewTextInput(object sender, System.Windows.Input.TextCompositionEventArgs e)
    {
        e.Handled = true;

        this.TreatSelectedText();

        var position = this.GetNextCharacterPosition(AssociatedObject.CaretIndex);

        if (Keyboard.IsKeyToggled(Key.Insert))
        {
            if(!this.Provider.Replace(e.Text, position))
            {
                System.Media.SystemSounds.Beep.Play();
                return;
            }
        }
        else
        {
            if(!this.Provider.InsertAt(e.Text, position))
            {
                System.Media.SystemSounds.Beep.Play();
                return;
            }
        }

        var nextposition = this.GetNextCharacterPosition(position + 1);
        this.RefreshText(nextposition);
    }

    void AssociatedObjectPreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Space)//handle the space
        {
            e.Handled = true;

            this.TreatSelectedText();
            var position = this.GetNextCharacterPosition(AssociatedObject.CaretIndex);

            if (!this.Provider.InsertAt(" ", position))
            {
                System.Media.SystemSounds.Beep.Play();
                return;
            }

            this.RefreshText(AssociatedObject.CaretIndex + 1);
        }

        if (e.Key == Key.Back && AssociatedObject.CaretIndex > 0)//handle the back space
        {
            e.Handled = true;

            //wenn etwas markiert war und der nutzer Backspace klickt soll nur das markierte verschwinden
            if(this.TreatSelectedText())
            {
                this.RefreshText(AssociatedObject.CaretIndex);
                return;
            }

            var denDavor = AssociatedObject.CaretIndex - 1;

            if(this.Provider.IsEditPosition(denDavor))
            {
                if (!this.Provider.RemoveAt(denDavor))
                {
                    System.Media.SystemSounds.Beep.Play();
                    return;
                }
            }

            this.RefreshText(AssociatedObject.CaretIndex - 1);
        }

        if (e.Key == Key.Delete)//handle the delete key
        {
            e.Handled = true;

            //wenn etwas markiert war und der nutzer Delete klickt soll nur das markierte verschwinden
            if (this.TreatSelectedText())
            {
                this.RefreshText(AssociatedObject.CaretIndex);
                return;
            }

            var position = AssociatedObject.CaretIndex;

            if (this.Provider.IsEditPosition(position))
            {
                if (!this.Provider.RemoveAt(position))
                {
                    System.Media.SystemSounds.Beep.Play();
                    return;
                }
            }
            else
            {
                System.Media.SystemSounds.Beep.Play();
                return;
            }

            this.RefreshText(AssociatedObject.CaretIndex);
        }
    }

    /// <summary>
    /// Pasting prüft ob korrekte Daten reingepastet werden
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void Pasting(object sender, DataObjectPastingEventArgs e)
    {
        if (e.DataObject.GetDataPresent(typeof(string)))
        {
            var pastedText = (string)e.DataObject.GetData(typeof(string));

            this.TreatSelectedText();

            var position = GetNextCharacterPosition(AssociatedObject.CaretIndex);

            if (!this.Provider.InsertAt(pastedText, position))
            {
                System.Media.SystemSounds.Beep.Play();
            }
            else
            {
                this.RefreshText(position);
            }
        }

        e.CancelCommand();
    }

    private void UpdateText(object sender, EventArgs eventArgs)
    {
        //check Provider.Text + TextBox.Text
        if (this.Provider.ToDisplayString().Equals(AssociatedObject.Text))
            return;

        //use provider to format
        var success = this.Provider.Set(AssociatedObject.Text);

        //ui and mvvm/codebehind should be in sync
        this.SetText(success ? GetProviderText() : AssociatedObject.Text);
    }

    /// <summary>
    /// Falls eine Textauswahl vorliegt wird diese entsprechend behandelt.
    /// </summary>
    /// <returns>true Textauswahl behandelt wurde, ansonsten falls </returns>
    private bool TreatSelectedText()
    {
        if (AssociatedObject.SelectionLength > 0)
        {
            this.Provider.RemoveAt(AssociatedObject.SelectionStart, AssociatedObject.SelectionStart + AssociatedObject.SelectionLength - 1);
            return true;
        }
        return false;
    }

    private void RefreshText(int position)
    {
        SetText(GetProviderText());

        AssociatedObject.CaretIndex = position;
    }

    private void SetText(string text)
    {
        AssociatedObject.Text = String.IsNullOrWhiteSpace(text) ? String.Empty : text;
    }

    private int GetNextCharacterPosition(int caretIndex)
    {
        var start = caretIndex;

        var position = this.Provider.FindEditPositionFrom(start, true);

        if (position == -1)
            return start;
        else
            return position;
    }

    private string GetProviderText()
    {
        //wenn noch gar kein Zeichen eingeben wurde, soll auch nix drin stehen
        //könnte man noch anpassen wenn man masken in der Oberfläche vllt doch haben will bei nem leeren feld
        return this.Provider.AssignedEditPositionCount > 0
                   ? this.Provider.ToDisplayString()
                   : this.Provider.ToString(false, false);
    }

} 
```

# c# - C#/Json.Net 异常减慢解析速度

> ID：15545045
> 
> 赞同：0
> 
> 时间：2013-03-21T10:33:10.817
> 
> 标签：c#, json, parsing, try-catch, json.net

我使用 Newtonsoft.Json 来解析一个 json 字符串。

我正在解析的数据包含许多条目，其中包含大量属性，其中一些是可选的。

解析代码如下所示：

```
public bool Parse(string JSONString)
    {
        JObject o;

        try
        {
            jResponse = JObject.Parse(JSONString);
        }
        catch (JsonReaderException)
        {
            return false;
        }

        foreach (JObject jResult in jResponse[ParserConstants.ResultsTag])
        {

            MyObject myObject = new MyObject();

            try
            {
                myObject.Title = (string)jResult[ParserConstants.TitleTag];
            }
            catch
            {
                myObject.Title = String.Empty;
            }

            // This goes on for like 15 other elements
            // Some have a continue in catch, thats when the attribute is mandatory
            // Some have a deeper Structure like jResult[Tag1][Tag2][0][Tag3]

            Results.Add(c);
        }
        return (Results != null && Results.Count > 0);
    } 
```

所有这些都可以正常工作，但是解析非常慢，因为在没有价值的字段上出现了很多异常。（这就是我的猜测）解析所有数据时出现 1200 个异常。

例外情况如下：

**Newtonsoft.Json.DLL 中出现了“System.InvalidOperationException”类型的第一次机会异常**

我尝试了这样的事情，而不是 try catch：

```
if( jResult[TitleTag] != null && jResult[TitleTag].HasValues ){
    myObject.Title = (string) jResult[TitleTag];
} else {
    myObject.Title = String.Empty;
} 
```

不幸的是，它没有成功，并且无法正确解析数据。

有人可以帮助我替代 try-catch 方法来避免异常吗？

我会很高兴的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:42:06.217

`JObject`工作原理，`IDictionary<string, JToken>`所以有一个`TryGetValue`方法：

```
JToken token;
if (jResult.TryGetValue(TitleTag, out token)) {
    myObject.Title = (string)token;
} else {
    myObject.Title = String.Empty;
} 
```

# android - Answering a call programmatically in android

> ID：15545048
> 
> 赞同：0
> 
> 时间：2013-03-21T10:33:17.880
> 
> 标签：android, android-intent

When a call comes after checking certain condition if its satisfy i want to attend that call automatically, else it should decline. can any one help me how to attend or decline a call through my app. i tried to use the below code but i cannot able to import the package "com.android.internal.telephony.ITelephony"

```
private void getTeleService() {
    TelephonyManager tm = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    try {
        // Java reflection to gain access to TelephonyManager's
        // ITelephony getter
        Log.v(TAG, "Get getTeleService...");
        Class c = Class.forName(tm.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m.invoke(tm);
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG,
                "FATAL ERROR: could not connect to telephony subsystem");
        Log.e(TAG, "Exception object: " + e);
    }
  }

 telephonyService.answerRingingCall();
 telephonyService.endCall(); 
```

# ios - IOS自定义UIBarbuttonItem在详细视图中更改位置

> ID：15545051
> 
> 赞同：2
> 
> 时间：2013-03-21T10:33:21.780
> 
> 标签：ios, ios6, storyboard, uinavigationbar, uibarbuttonitem

我正在尝试自定义导航栏的 UIBarbuttonItem 以便我在我的 Appdelegate.m 中使用它

```
// didFinishLaunchingWithOptions: 

{
  UIImage *navBarImage = [UIImage imageNamed:@"nav-bar.png"];

  [[UINavigationBar appearance] setBackgroundImage:navBarImage
                                   forBarMetrics:UIBarMetricsDefault];

  [[UINavigationBar appearance] setTitleVerticalPositionAdjustment:5
                                                   forBarMetrics:UIBarMetricsDefault];

  UIImage *barButtonSave = [[UIImage imageNamed:@"nav-bar-button.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 2, 0, 2)];

[[UIBarButtonItem appearance] setBackgroundImage:barButtonSave
                                        forState:UIControlStateNormal
                                           style:UIBarButtonItemStyleDone
                                      barMetrics:UIBarMetricsDefault];

[[UIBarButtonItem appearance] setBackgroundVerticalPositionAdjustment:5 forBarMetrics:UIBarMetricsDefault];

return YES; 
```

}

完成此操作后，我只需将 UIBarbuttonItem 与 Storyboard 一起放置即可。关键是我注意到“保存”按钮在我的视图之间发生了变化！

看起来在我的 DetailView 中向下移动了几个像素：

![在此处输入图像描述](../Images/403a4debe8861efc157d3f5993df2992.png)

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:21:29.187

我仍然不知道为什么。但我解决了为我的自定义 UIbarbuttonItem 图像提供 30px 默认高度的问题。

[查看 UIBarButtonItem 在 UINavigationController 推送后向下移动的类似问题

# javascript - .off() / .on() jQuery 事件处理程序绑定组合的效率

> ID：15545053
> 
> 赞同：2
> 
> 时间：2013-03-21T10:33:29.477
> 
> 标签：javascript, jquery, optimization, backbone.js

我有一个对象，当该对象被实例化时，它会将单击事件处理程序附加到`<body>`. （附加过程发生在该对象的定义中）

当 URL 改变时（当用户导航到另一个页面时），这个对象被实例化。

此对象“每页”始终存在一种类型，并且如前所述，当面板更改时它会重新实例化，并且旧对象将不再存在。

附加过程如下所示：

```
var doc = $(document.body);

doc.off('click');

doc.on('click', function(){
   do_stuff();
}); 
```

我使用它是因为我注意到如果只是附加事件处理程序，省略`.off()`，当我浏览网站时，处理程序将在一次简单的单击时触发更多次（因为它已附加/注册到该对象的每个实例化）。

现在，我可以将这个附加过程移到其他地方，例如在发生实例化的代码部分中，因此它不会依赖于该对象并确保处理程序只会附加一次，但这会剥夺我对一些局部变量，我必须使它们可以访问该代码部分。

**我的问题是：**这在性能方面会花费很多吗？我注意到这里有一些关于 stackoverflow 的帖子，强调这不是最佳的，但大多数示例都显示了/binding*内部*`.off()`发生或解除绑定的代码。*`.on()`*

 ***重要提示：**我正在使用backbone.js。这是一个“单页网站”。对象基本上是视图，它们的实例化发生在路由器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:03:34.713

简而言之，不，使用`off`. 现在我不会在一堆圣经上发誓不可能`off`导致性能问题，但我会说，在 100 个中有 99 个（可能更像是 1,000 个中的 999 个或 10,000 个中的 9999 个）真实世界案例中，你永远不会有担心关闭会导致性能问题。

换句话说，`off`除非你用它做一些非常疯狂的事情，或者有一个非常疯狂的网站在不经意间做了一些非常疯狂的事情，否则不会导致明显的性能下降。

`off`另一方面，不调用可能会导致很多问题，与性能相关等等。*

# java - Nimbus: java.lang.ClassCastException: javax.swing.plaf.nimbus.DerivedColor$UIResource cannot be cast to javax.swing.Painter

> ID：15545055
> 
> 赞同：7
> 
> 时间：2013-03-21T10:33:36.133
> 
> 标签：java, swing, classcastexception, nimbus

I'm using the Nimbus look & feel in my swing application.

Sometimes, when a dialog is showed (with dialog.setVisible(true)) the Nimbus look & feel throws the following exception:

```
Caugth exception of type java.lang.ClassCastException with message javax.swing.plaf.nimbus.DerivedColor$UIResource cannot be cast to javax.swing.Painter 
java.lang.ClassCastException: javax.swing.plaf.nimbus.DerivedColor$UIResource cannot be cast to javax.swing.Painter
    at javax.swing.plaf.nimbus.NimbusStyle.getBackgroundPainter(NimbusStyle.java:708)
    at javax.swing.plaf.nimbus.SynthPainterImpl.paintBackground(SynthPainterImpl.java:99)
    at javax.swing.plaf.nimbus.SynthPainterImpl.paintPanelBackground(SynthPainterImpl.java:957)
    at javax.swing.plaf.synth.SynthPanelUI.update(SynthPanelUI.java:155)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:155)
    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182)
    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:219)
    at java.awt.Dialog.show(Dialog.java:1077)
    at java.awt.Component.show(Component.java:1651)
    at java.awt.Component.setVisible(Component.java:1603)
    at java.awt.Window.setVisible(Window.java:1014)
    at java.awt.Dialog.setVisible(Dialog.java:1003)
    at java_awt_Dialog$setVisible.call(Unknown Source)
    at org.openfidelia.views.core.impl.WorkbenchImpl$_showViewAsDialog_closure1.doCall(WorkbenchImpl.groovy:375)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSite.invoke(PogoMetaMethodSite.java:226)
    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:52)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at org.openfidelia.views.core.impl.WorkbenchImpl$_showViewAsDialog_closure1.doCall(WorkbenchImpl.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1047)
    at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:877)
    at groovy.lang.Closure.call(Closure.java:412)
    at groovy.lang.Closure.call(Closure.java:406)
    at groovy.lang.Closure.run(Closure.java:490)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:241)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:155)
    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:182)
    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:221)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:219)
    at java.awt.Dialog.show(Dialog.java:1077)
    at java.awt.Component.show(Component.java:1651)
    at java.awt.Component.setVisible(Component.java:1603)
    at java.awt.Window.setVisible(Window.java:1014)
    at java.awt.Dialog.setVisible(Dialog.java:1003)
    at java_awt_Dialog$setVisible.call(Unknown Source)
    at org.openfidelia.views.core.impl.WorkbenchImpl$_showViewAsDialog_closure1.doCall(WorkbenchImpl.groovy:375) 
```

I don't have any idea when this happens, it just rarely occurs, when a dialog is showed.

I've been searching in Google ([http://netbeans.org/bugzilla/show_bug.cgi?id=212757](http://netbeans.org/bugzilla/show_bug.cgi?id=212757)) and it's happened to more people, but nobody seems to know the cause of this problem.

Has this happened to anyone else? Maybe it's a Nimbus bug?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-27T14:19:17.487

What has just helped me track down the causes of such repaint issues is to dump out the current thread at the point in our application code that is triggering the UI update that ultimately causes the exception: `LOGGER.debug("Current thread: " + Thread.currentThread());`

If a thread is printed out that is something other than Thread[AWT-EventQueue-0,6,main] (where the numbers can be anything) then you are attempting to perform UI updates outside of the Swing Event Dispatch Thread and repaint issues are almost inevitable.

Making use of `SwingUtilities.invokeLater()` or `.invokeAndWait()` may mitigate against this but normally this issue would point to an error in the design of the application. In my case I was (unnecessarily) setting a cell renderer for a JTree as part of updating the tree model.

# regex - 在给定字符串中查找特定字符串的出现？

> ID：15545061
> 
> 赞同：0
> 
> 时间：2013-03-21T10:34:03.810
> 
> 标签：regex, perl

嗨，朋友们现在正在使用 perl，我需要使用 perl 检查一组数组中出现的字符串！我尝试了很多，但我做不到任何人？

```
open FILE, "<", "tab_name.txt" or die $!;
my @tabName=<FILE>;
my @all_files= <*>;
foreach my $tab(@tabName){

    $_=$tab;
    my $pgr="PGR Usage";
    if(m/$pgr/)
    {

        for(my $t=0;scalar @all_files;$t++){
            my $file_name='PGR.csv';            
            $_=$all_files[$t];          
            if(m\$file_name\)
            {

                print $file_name;           
            }           
        }

        print "\n$tab\n";   

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:47:17.927

这里有一个问题：

```
for(my $t=0;scalar @all_files;$t++){ 
```

for循环的第二部分需要是一个条件，例如：

```
for(my $t=0;$t < @all_files;$t++){ 
```

您编写的代码将永远不会结束。

但是，这要好得多：

```
foreach (@all_files){ 
```

此外，您的正则表达式有问题。正则表达式中的变量被视为正则表达式。`.`是匹配任何东西的特殊字符。因此，您的代码将匹配`PGR.csv`，但也匹配`PGRacsv`等。它还将匹配作为名称一部分的文件名，例如`FOO_PGR.csvblah`. 要解决这个问题：

*   使用引号文字 ( `\Q...\E`) 确保文件名按字面意思处理。
*   使用锚点来匹配字符串的开头和结尾（`^`, `$`）。

此外，反斜杠是有效的，但它们是一个奇怪的字符。

更正后的正则表达式如下所示：

```
 m/^\Q$file_name\E$/ 
```

此外，您应该将其放在您编写的每个脚本的顶部：

```
use warnings;
use strict; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:47:24.460

这一行：

```
for(my $t=0;scalar @all_files;$t++){ 
```

产生一个无限循环，你最好使用：

```
for(my $t=0;$t < @all_files;$t++){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:45:34.903

除了您在数组中遇到的问题之外，您还在寻找[substr](http://perldoc.perl.org/functions/substr.html)吗？

# c# - C# 委派成员 - Resharper

> ID：15545062
> 
> 赞同：1
> 
> 时间：2013-03-21T10:34:09.853
> 
> 标签：c#, resharper, delegation

[Resharper 可以创建委托成员](http://www.jetbrains.com/resharper/webhelp/Code_Generation__Delegating_Members.html)（Alt + Ins）

但是什么是委派成员？

我所做的大多数搜索都提出了无用的美国政治。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:37:35.070

委托方法只是直接通过某些包含对象的方法。

例如：

```
class MyClass
{
    private SomeType innerObj = new SomeType();
    public Bar GetFoo()
    {
        return innerObj.GetFoo();
    }

} 
```

# javascript - How to reset Twitter Bootstrap Bar Chart

> ID：15545069
> 
> 赞同：0
> 
> 时间：2013-03-21T10:34:19.807
> 
> 标签：javascript, twitter-bootstrap, reset, bar-chart

i need to reset a bootstrap bar chart before i set their values. So i need to reset chart completely, but i don't know how to reset values and animations without need to set them to "0". Any idea?

My .js looks like this:

```
function chart(){

$.get("/apicountryajax",function(data) {

    if($('.verticalChart')) {

        //NEED RESET HERE

        var i=0;

        $('.singleBar').each(function(){

            var dataObj=data['objects'][i];
            var cName=dataObj['countryName'];
            var cCount=parseFloat(dataObj['countryCount'])*100;
            var percent=cCount+"%";
            i++;

            $(this).find('.value').animate({height:percent}, 2000,                    function() {

                $(this).find('span').fadeIn();
                $(this).find('span').html(percent);

            });
            $(this).find('.title').html(cName); 
        }); 
    }
}); 
```

# php - html中的日期选择器代码

> ID：15545074
> 
> 赞同：1
> 
> 时间：2013-03-21T10:34:38.427
> 
> 标签：php, javascript, html, css

我们尝试了使用日期选择器显示日期的代码，它应该在一个页面中显示从和到日期两次，但它只显示从日期而不是到日期

```
<html>
<head>
    <link rel='stylesheet' id='admin-css'  href='admin.css' type='text/css' media='all' />
    <link rel='stylesheet' id='colors-fresh-css'  href='colors-fresh.css' type='text/css' media='all' />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function(){
        $( "#datepicker" ).datepicker();
        $("#icon").click(function() { 
            $("#datepicker").datepicker( "show" );
        })
    });
    </script>
</head>
<body>
    <input type="text" id="datepicker" name='from' size='9' value="" />  
    <img src='images/calender.PNG' id='icon' height='25px' width='25px'/ >
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:36:31.327

Why dont you use input type date

```
<input type="date" id="datepicker" name='from' size='9' value="" /> 
```

**[DEMO](http://jsfiddle.net/PRXMz/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:45:14.060

试试喜欢

```
$(function(){
    $( "#from_date,$to_date" ).datepicker();        
}); 
```

你的html应该是

```
<input type="text" id="from_date">
<input type="text" id="to_date"> 
```

而已

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:41:10.077

您的正文不包含`<input>`要附加日期选择器的第二个标签。

所以使用这样的东西。

```
<input type="text" id="datepicker_from" name='from' size='9' value="" />  <img src='images/calender.PNG' id='icon_from' height='25px' width='25px'/ >
<input type="text" id="datepicker_to" name='from' size='9' value="" />  <img src='images/calender.PNG' id='icon_to' height='25px' width='25px'/ > 
```

在您的 JS 代码中：

```
$( "#datepicker_from" ).datepicker();
$("#icon_from").click(function() { $("#datepicker_from").datepicker( "show" );})

$( "#datepicker_to" ).datepicker();
$("#icon_to").click(function() { $("#datepicker_to").datepicker( "show" );}) 
```

一个建议：防止在 ID 上使用 ID。很难维护。如果您想在不同的 DOM 元素上实现相同的目标，最好使用类选择器，就像@Pathik Gandhi 在他的回答中显示的那样：[https ://stackoverflow.com/a/15545224/735226](https://stackoverflow.com/a/15545224/735226)

一些附加说明：

将您自己的 javascript 包裹在 DOM 就绪事件周围，以防止您的 js 在 DOM 完成加载之前执行。您可以通过以下代码实现此目的：

```
$(document).ready(function() {
    // Place all of your JS code here, like your datepicker initializing.
}); 
```

还要在标签末尾之前加载您的 Javascript`<body>`以提高加载速度：

```
 /* ... */
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
</body> 
```

这些只是结构化 Web 开发的一些一般性建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:42:20.693

只需添加两个输入到同一类和日期选择器具有显示图标的内置功能。

```
<script>
    $(function()
    {
           $( ".datepicker" ).datepicker({
              showOn: "button",
              buttonImage: "images/calendar.gif",
              buttonImageOnly: true
            });
    });   

    </script>
    </head>
    <body>
            <input type="text" class="datepicker" name='from' size='9' value="" />
            <input type="text" class="datepicker" name='to' size='9' value="" />
    </body>
    </html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:43:14.117

You need to have two input fields if you want two datepickers

```
<input class="datepicker" type="text" id="fromdate" name='from' size='9' value="" />
<input class="datepicker" type="text" id="todate" name='from' size='9' value="" />

$(function(){
    $('.datepicker').datepicker()
}) 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/rPYax/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T10:43:55.650

I would recommend using class instead of id. ID should be unique and if its not then you will find yourself in trouble. Using class give you oportunity to work with many elements having the same class, in case of id it will process correctly for 1 id and will give not wanted results for others not mentioning it may cause other problems. Try this

```
$(function()
            {
                     $( ".datepicker" ).datepicker();
                     $(".icon").click(function() { $(".datepicker").datepicker( "show" );})
             });

 <input type="text" class="datepicker" name='from' size='9' value="" />  <img src='images/calender.PNG' class='icon' height='25px' width='25px'/ > 

 <input type="text" class="datepicker" name='to' size='9' value="" />  <img src='images/calender.PNG' class='icon' height='25px' width='25px'/ > 
```

Also check html5 date and datetime type example here: [http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_date](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_date)

# sql - sql查询计算表中的各个字段

> ID：15545076
> 
> 赞同：0
> 
> 时间：2013-03-21T10:34:45.243
> 
> 标签：sql, sql-server, sql-server-2008

我有查询表，字段如下

```
sno     confname         region       enquiry   status update    closed      approval
 1     Conf 2020     Madhya Pradesh     test           test      closed      reconsider
 2     Conf 2013     Maharashtra       test 123        abcde                reconsider
 3     Conf 2013     Maharashtra        test12         test      closed      approved
 4     Conf 2013     Maharashtra        test124       test1      closed      approved 
 5     Conf 3        Karnataka          test124       test1                  
 6     Conf 3        Karnataka          test876       test45       
 7     Conf 3        Karnataka          test365       test45      closed     approved 
```

我需要输出为

```
Region          Conf Name    Total No of Enq   No of Enq Closed    No of Enq Approved 
Maharashtra     Conf 2013                3                2                        2
Karnataka       Conf 3                   3                1                        1
Madhya Pradesh  Conf 2020                1                1 
```

我的 sql 查询是

```
SELECT confname,
       region,
       clsed ,
       apprstatus ,
       Count(region) AS totenq,
       Count(clsed) AS totenqclsd ,
       COUNT(apprstatus) AS totenqapproved
FROM [enquiries_dtls]
GROUP BY region,
         confname,
         clsed,
         apprstatus 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:53:17.137

您可以使用带有`CASE`表达式的聚合函数来获取结果：

```
select region,
  confname,
  count(*) TotalEnquiry,
  sum(case when closed is not null then 1 else 0 end) TotalClosed,
  sum(case when approval = 'approved' then 1 else 0 end) TotalApproved
from enquiries_dtls
group by region, confname 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/7db0f/1)

编辑，如果您需要根据这些列计算另一个值，请使用子查询：

```
select region,
  confname,
  TotalEnquiry,
  TotalClosed, 
  TotalApproved,
  TotalEnquiry - TotalApproved 
from
(
  select region,
    confname,
    count(*) TotalEnquiry,
    sum(case when closed is not null then 1 else 0 end) TotalClosed,
    sum(case when approval = 'approved' then 1 else 0 end) TotalApproved
  from enquiries_dtls
  group by region, confname
) src 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/7db0f/2)

# hibernate - 列出 add() 方法错误

> ID：15545078
> 
> 赞同：0
> 
> 时间：2013-03-21T10:34:49.737
> 
> 标签：hibernate, loops, for-loop, nested, add

```
trainDetailFrom = (ArrayList<TrainDetail>) session.createQuery("from TrainDetail where Station = '"+this.getFrom()+"'").list();
trainDetailTo =(ArrayList<TrainDetail>) session.createQuery("from TrainDetail where Station = '"+this.getTo()+"'").list();
for(TrainDetail trainFrom:trainDetailFrom)
{
    for(TrainDetail trainTo:trainDetailTo)
    {
        if(trainFrom.getTrain()==trainTo.getTrain() &&trainFrom.getDistance()<trainTo.getDistance())
        {
            this.train.add(trainFrom.getTrain());
        }
    }
} 
```

我无法在网页上获取训练值，当我运行此操作页面时，它不提供训练值，我认为 train.add() 没有设置值。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:58:00.850

如果火车未添加到集合*火车*中，请检查：

*   *trainDetailTo*和*trainDetailFrom*不为空。
*   比较对象是相同的 using `equals`()（按值比较）而不是比较 using `==`（按引用比较）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:21:44.127

我得到了解决方案。我没有初始化`train`哪个实例，`ArrayList<Train>`所以我初始化为`train=new ArrayList<Train>();`

# java - Android：确定在 xml 中未定义该按钮的情况下单击了哪个按钮

> ID：15545086
> 
> 赞同：3
> 
> 时间：2013-03-21T10:35:10.407
> 
> 标签：java, android, xml, button

在下面的活动中，我创建了一个表并动态地向它添加按钮。这些按钮未在 xml 中定义，我想知道在哪个位置单击了按钮（标记为“b”）。即：在其中 i 和 j 我尝试将 jClickable 设置为 i 但它设置为最终值，因为它是在创建表后单击的。

aFromA、aToA、mobileA、LnameA、FnameA、fullName、aIDa 都是字符串数组，我已经删除了它们的初始化部分，因为它需要大量的代码，由于拆分和其他操作。

任何帮助将不胜感激，在此先感谢。这是代码：

```
public class ViewAssistants extends Activity implements OnClickListener{

    Button back;
    Button b;

    EditText et;
    Button change;
    TextView text;

    String time;

    int jClicked;

    int i;
    int j;

    UserFunctions userFunction;

     String [] aFromA;
     String [] aToA;
     String [] mobileA;
     String [] LnameA;
     String [] FnameA;
     String [] fullName;
     String [] aIDa;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewassistants);

         text =  (TextView) findViewById(R.id.textView1);

         TableLayout tableLayout = (TableLayout) findViewById(R.id.myTableLayout);

         userFunction = new UserFunctions();
         String DR_ID = userFunction.drID;
         userFunction.viewingAssistants(DR_ID);

         String ifFull =userFunction.full;
         int ifFullint = Integer.parseInt(ifFull);

         if (ifFullint == 1){

        text.setText("");
         TableRow tableRow;
         TextView textView;

         for (i = 0; i < (FnameA.length)+1; i++) {
             tableRow = new TableRow(getApplicationContext());

             for (j = 0; j < 5; j++) {

             if(i==0){
             textView = new TextView(getApplicationContext());
             textView.setBackgroundResource(R.drawable.nm);
             textView.setTextColor(Color.BLACK);
             tableRow.addView(textView);

             switch (j){ 
             case 0:textView.setText(" ID ");break;
             case 1:textView.setText(" Name ");break;
             case 2:textView.setText(" Mobile "); break;
             case 3:textView.setText(" Shift starts "); break;
             case 4:textView.setText(" Ends "); break;
             default: textView.setText("..");
             }

             }
             else
             {

             b = new Button(getApplicationContext());
             b.setBackgroundResource(R.drawable.nm);
             b.setTextColor(Color.BLACK);

             tableRow.addView(b);

             for(int w=0;w<FnameA.length;w++){
                 fullName[w]= FnameA[w]+" "+LnameA[w];
             }

             switch (j){ 
             case 0:b.setText(""+aIDa[i-1]+"");break;
             case 1:b.setText(""+fullName[i-1]+"");break;
             case 2:b.setText(""+mobileA[i-1]+""); break;
             case 3:b.setText(""+aFromA[i-1]+"");  b.setOnClickListener(this);break;
             case 4:b.setText(""+aToA[i-1]+"");b.setOnClickListener(this);break;
            default: b.setText("..");
             }

             }
             }
             tableLayout.addView(tableRow);

             } 
         }
         else{

             text.setText("NO PATIENTS");
             System.out.println("fel elseeee");
         }

        back = (Button) findViewById(R.id.back);
        back.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // TODO Auto-generated method stub

                Intent dashboard = new Intent(getApplicationContext(), loginAsDr.class);
                // Close all views before launching Dashboard
                dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(dashboard);
                // Close Registration Screen
                finish();

            }

        });

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        et=(EditText)findViewById(R.id.shiftChange); 
        et.setVisibility(View.VISIBLE);

        change=(Button) findViewById(R.id.change);
        change.setVisibility(View.VISIBLE);

        change.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // TODO Auto-generated method stub

                jClicked=i;
                time=et.getText().toString();

                et.setText(" ");
                Log.d("TIME IS",time+"  "+jClicked);

            }

        });
    }
} 
```

这是xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
<HorizontalScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#3b3b3b" >
<TableLayout
    android:id="@+id/myTableLayout"
    android:layout_width="match_parent"
    android:layout_height="390dp" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="NO DOCTORS" />

</TableLayout>
</HorizontalScrollView>  

<Button
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="40dp"
    android:text="BACK" />

<EditText
    android:id="@+id/shiftChange"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:visibility = "gone"
    android:ems="10" />

<Button
    android:id="@+id/change"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@+id/shiftChange"
     android:visibility = "gone"
    android:text="Change please" />

</RelativeLayout> 
```

对不起，如果代码有点长。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:51:01.507

使用 setTag 将是您最好的选择。您可以在其中存储几乎任何数据结构。在这里，我推荐一个简单`Vector`的存储你的 i 和 j 的方法，即：

```
Vector<Integer> v = new Vector<Integer>();
v.add(i);
v.add(j);
b.setTag(v); 
```

然后在您的点击方法中：

```
public void onClick(View v) {
    Vector<Integer> v = (Vector<Integer>)v.getTag();
    int i = v.get(0);
    int j = v.get(1);
} 
```

# c# - 如何从点列表中找到可用的空闲区域（矩形）

> ID：15545091
> 
> 赞同：2
> 
> 时间：2013-03-21T10:35:31.500
> 
> 标签：c#, algorithm

我们提供的控制系统由分布在巨大 2D 坐标系中的模块组成。

我需要一种算法来定位尺寸至少为最小高度和宽度的可用空间。“可用”是指“不包含列表中的任何点”。如果算法可以接受不应与算法返回的任何矩形相交的矩形列表，这也是有利的。

我尝试了以下算法，但感觉不对。

*   选择不在先前返回的候选矩形或先前忽略的区域中的候选点。
*   水平生长，直到达到最小宽度。
*   垂直生长，直到达到最小高度。
*   此时，这是一个已获批准的候选矩形，但仍可能更大。
*   尽可能水平生长。
*   尽可能垂直生长。
*   按批准返回矩形。（如果第 2 点或第 3 点失败，则到目前为止覆盖的区域将被取消。

是否有任何聪明的头脑可以为此提出更好的算法？（编辑：注意矩形是轴对齐的）

# android-ndk - 在 ndk-build 期间禁用所有警告

> ID：15545099
> 
> 赞同：8
> 
> 时间：2013-03-21T10:35:50.657
> 
> 标签：android-ndk, java-native-interface, clang, compiler-warnings

我试图在“ndk-build”过程中禁用所有警告，以编译 CPP 代码以在 Android 上与 JNI 一起使用。

我正在使用`LOCAL_CFLAGS := -Wno-error`但没有成功。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T11:43:06.030

好的。知道了。将此行放入您的 Android.mk 文件中。

```
LOCAL_CFLAGS := -w 
```

希望能帮助到你

# c# - 如何处理资源 (.resx) 文件中的字符串文字

> ID：15545101
> 
> 赞同：1
> 
> 时间：2013-03-21T10:35:55.217
> 
> 标签：c#, winforms, resources, resx, string-literals

总而言之，我最近学习了很多关于本地化和资源文件 (.resx) 的使用。对于特定代码，我为每个 WinForm 有一个 .resx（以及相关的本地化版本 .de-DE.resx 等），两个用于代码（一个用于对象字符串 [列名等]，一个用于用户消息 [那些显示在消息框等]）。对于对象字符串，我没有任何问题，但是对于消息，我有以下问题......

以消息“搜索“SomeString”（3 个文件中的 23 个命中）”为例，消息开头的制表符在哪里。要创建这样的消息，我使用类似的代码

```
String.Format("\tSearch \"{0}\" ({1} hits in {2} files)\n",
              strSearchString,
              nTotalHits,
              nNumberOfFiles); 
```

现在的问题是，当我在资源文件中包含字符串时`"\tSearch \"{0}\" ({1} hits in {2} files)\n"`，我在运行时得到以下输出

```
\tSearch \"SomeString\" (23 hits in 3 files)\n 
```

显然，它没有像 C# 本身那样对待字符串文字。我知道要在资源​​文件中创建新行，我必须使用`Shift`+ `Return`，但是你对 tabs 等做了什么？请不要说复制到 Word 或 Notepad++ 并添加选项卡，然后复制回来，否则我会戳自己的眼睛。

**将资源文件中包含的字符串文字转换为C# 正确解释的*实际字符串文字的最佳方法是什么？***

请注意，这种转换只会发生在消息中，所以我什至愿意考虑运行时转换。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:38:36.330

恐怕你会戳到自己的眼睛，因为这*正是*你必须做的。我也对此感到沮丧。

您可以将选项卡作为单独的项目包括在内，如下所示：

```
String.Format("{0}Search \"{1}\" ({2} hits in {3} files)\n",
          "\t",
          strSearchString,
          nTotalHits,
          nNumberOfFiles); 
```

您也可以在数字键盘上键入 Alt-012 以进入选项卡。

`string.Replace("\\t", "\t")`最后，您可以通过在将字符串传递给`string.Format()`并将“\t”放入字符串资源之前自己“转义”选项卡。

这一切有点不满意！（而且我相信你自己已经想到了所有这些想法......）

# c++ - 对“AbstractClass::getInfo”的未定义引用

> ID：15545103
> 
> 赞同：0
> 
> 时间：2013-03-21T10:36:00.650
> 
> 标签：c++, abstract-class, undefined-reference

我有`AbstractClass`和`virtual int getInfo() = 0;`加上`static int info;` 我有`ConcreteClass`课

```
int ConcreteClass::getInfo()
{
    return info;
} 
```

但我得到错误

```
Undefined reference to 'AbstractClass::getInfo' 
```

和

```
collect2:error:ld returned 1 exit status 
```

请告诉我这是什么问题。

更新：我应该`int info`在`AbstractClass`构造函数中定义 my 吗？

# jquery - 当用户单击返回按钮时，Pageinit 未触发

> ID：15545104
> 
> 赞同：0
> 
> 时间：2013-03-21T10:36:02.437
> 
> 标签：jquery, jquery-mobile, back, page-init

我正在使用 JQM 创建和应用程序，但是我想保留一些历史记录，以便用户可以返回，但是当我返回它时它似乎在一个页面上，它无法加载 ajax。我所有的页面都是外部的，并在`pageinit`事件中加载。应该注意的是，相同的代码结构适用于除此页面之外的所有其他页面，但这不是我在代码中看到的错误。请看下面的代码：

**HTML：**

```
<!doctype html>
<html lang="en">
<head>
    <title>Music App</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1">
    <link rel="stylesheet" href="http://jquerymobile.com/demos/1.3.0/css/themes/default/jquery.mobile-1.3.0.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://jquerymobile.com/demos/1.3.0/js/jquery.mobile-1.3.0.js"></script>
    <script src="./javascript/music.js"></script>
    <script src="./javascript/soundmanager2.js"></script>
</head>
<body>
    <!--load all songs by genre-->
    <div data-role="page" data-add-back-btn="true" id="genretracks">
        <div data-role="header" data-position="fixed">
            <h1>Genre Tracks</h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-filter="true" data-filter-placeholder="Search list..." id="genretracklist">
            </ul>
        </div>
    </div>
</body>
</html> 
```

**JavaScript：**

```
 $(document).on( "pageinit", "#genretracks", function( e ) {
var passedId = (passDataObject.selectedHref != null ? passDataObject.selectedHref : window.location.href).replace( /.*id=/, "" );
var surl =  "http://localhost/musicapp/includes/genretracks.php";
$.ajax({
    type: "GET",
    url: surl,
    data:  "Genre="+passedId,
    dataType: "jsonp",
    cache : false,
    jsonp : "onJSONPLoad",
    jsonpCallback: "genretrackscallback",
    crossDomain: "true",
    }).done(function(){ 
        $("a").bind("click",function(){
            passDataObject.selectedHref = this.href;
        }); 
    }).fail(function(){ 
        alert("$.get failed!"); //replace with failed dialog 
    })
});

 function genretrackscallback(rtndata) 
 { 
var data="";
for(j=0;j<=rtndata.length -1;j++)
{
    data = data + "<li><a href='./player.html?id="+rtndata[j].track_id+"' data-transition='slide' id="+rtndata[j].track_name+"><h3>" + rtndata[j].track_name + "</h3><p><strong>" + rtndata[j].artist_name + "</strong></p><p>" + rtndata[j].genre_name + "</p></a></li>";
}
$('#genretracklist').html(data);
$('#genretracklist').listview('refresh'); 
 } 
```

当我单击由上面的函数创建的列表中的一个项目时，它会触发另一个基于 id 的 javascript 函数并将用户带到另一个外部页面。这一切都很好，但是当用户按下时，上面的功能在多次尝试后不会触发或触发一次。如何确保在用户返回时触发此功能？

# toolkit - 全新安装后 GWT Designer 不会启动

> ID：15545105
> 
> 赞同：1
> 
> 时间：2013-03-21T10:36:06.833
> 
> 标签：toolkit, gwt-designer, google-plugin-eclipse

我正在尝试安装 Google Web Toolkit 设计器，但到目前为止没有成功。经过几天的努力，我尝试了许多不同的方法，包括全新安装不同版本的 eclipse。我可以创建一个新的 Web 应用程序，它运行得很好。我现在的问题是启动 GWT 设计器。这是我得到的错误。

无法打开编辑器：无法实例化编辑器类。这通常表示缺少无参数构造函数或编辑器的类名在 plugin.xml 中输入错误。

这些是错误的详细信息

java.lang.ClassNotFoundException: org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513) 的 org.eclipse.osgi.internal 的 org.eclipse.wb.internal.core.editor.multi.DesignerEditor .loader.BundleLoader.findClass(BundleLoader.java:429) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417) 在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader .java:107) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247) 在 org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:345) 在 org.eclipse.osgi.framework。 internal.core.BundleHost.loadClass(BundleHost.java:229) 位于 org.eclipse.core.internal.registry.osgi 的 org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1207)。RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174) at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905) at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java: 243) 在 org.eclipse.ui.internal.WorkbenchPlugin$1.run(WorkbenchPlugin.java:268) 在 org.eclipse.swt 的 org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)。 custom.BusyIndi​​cator.showWhile(BusyIndi​​cator.java:70) at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:264) at org.eclipse.ui.internal.registry.EditorDescriptor.createEditor(EditorDescriptor.java: 235) 在 org.eclipse.ui.internal.EditorManager.createPart(EditorManager.java:875）在 org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:609) 在 org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465) 在 org.eclipse.ui.internal.WorkbenchPartReference .getPart(WorkbenchPartReference.java:595) 在 org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:289) 在 org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2945) 在 org. eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850) at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842) at org.eclipse.ui.internal.WorkbenchPage$10.run( WorkbenchPage.java:2793) 在 org.eclipse.swt.custom.BusyIndi​​cator.showWhile(BusyIndi​​cator.java:70) 在 org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789) 在 org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773) at org.eclipse.ui.actions.OpenWithMenu.openEditor(OpenWithMenu.java:331) at org.eclipse.ui.texteditor.AbstractDecoratedTextEditor$18.openEditor(AbstractDecoratedTextEditor .java:1969) 在 org.eclipse.ui.actions.OpenWithMenu$2.handleEvent(OpenWithMenu.java:179) 在 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 在 org.eclipse.swt .widgets.Widget.sendEvent(Widget.java:1053) 在 org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754 ) 在 org.eclipse.ui.internal.Workbench 的 org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665) 的 org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)。在组织访问 $4(Workbench.java:2499)。eclipse.ui.internal.Workbench$7.run(Workbench.java:679) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench (Workbench.java:668) 在 org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 在 org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123) 在 org. eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime。 internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run( EclipseStarter.java：179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect .Method.invoke(Method.java:597) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 在org.eclipse.equinox.launcher.Main.run(Main.java:1410)invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410)invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410)

我见过很多其他人有同样的问题，并且有不同的解决方案来解决这个问题。我已经尝试了在论坛上找到的所有歌曲（创建新工作区，尝试使用不同的 jdk 版本但没有成功。

我的环境：

Eclipse 靛蓝 3.7 Java 1.6.0_37 Windows 7

任何帮助将不胜感激。

谢谢，

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:24:23.377

看起来您可能需要一些窗口构建器插件，检查 indigo 更新站点（帮助 - > 安装新软件）...在“使用”中选择 indigo 更新站点（它应该在那里）。然后将过滤器文本设置为“窗口”之类的内容，您应该会在“通用工具”组下看到一些窗口构建器插件。我认为您可能需要“WindowBuilder Core”和“WindowBuilder Core UI”，我还安装了“WindowBuilder GroupLayout Support”，因此您可以根据需要添加它。

# android - 从联系人列表中获取不同的电子邮件 ID

> ID：15545107
> 
> 赞同：1
> 
> 时间：2013-03-21T10:36:12.043
> 
> 标签：android

我有一个联系人列表，其中有多个姓名具有相同的电子邮件 ID。如何修改下面的代码，以便我只获得具有不同电子邮件 ID 的姓名。

```
public ArrayList<String> getNameEmailDetails(){
        ArrayList<String> names = new ArrayList<String>();
        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                Cursor cur1 = cr.query( 
                        ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
                        ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                                new String[]{id}, null); 
                while (cur1.moveToNext()) { 
                    //to get the contact names
                    String name=cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    Log.e("Name :", name);
                    String email = cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                    Log.e("Email", email);
                    if(email!=null){
                        names.add(name);
                    }
                } 
                cur1.close();
            }
        }
        return names;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:40:41.663

sqlite中有一个游标来获取不同的值，true的使用只给出不同的值

```
Cursor cursor = sqliteDB.query(true,"window",new String[]{"MediaType","_id",TAG_DATA_OR_LOCATION}, null, null,"DataOrLocation", null, null, null); 
```

**公共游标查询（布尔不同，字符串表，字符串 [] 列，字符串选择，字符串 [] selectionArgs，字符串 groupBy，字符串有，字符串 orderBy，字符串限制）**

# android - 将本机应用程序与 Worklight 项目相结合

> ID：15545112
> 
> 赞同：1
> 
> 时间：2013-03-21T10:36:33.177
> 
> 标签：android, ibm-mobilefirst

我正在开发一个需要文件 IO 的工作灯应用程序。我已经在一个 android 项目中单独编写了该代码。谁能告诉我如何将两者合二为一？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T22:13:31.883

正如 Idan 所说，没有办法将您现有的本机应用程序移植到 Worklight 混合应用程序。但是，您可以利用在不同环境（例如 Android 和 iOS）中与 Worklight 混合应用程序一起工作的开箱即用的[文件 API 。](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#File)如果您创建一个[Cordova 插件](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#cordova)，您将需要为您希望支持的所有环境创建一个插件。

[以下是用于写入文件](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileWriter)的文件 I/O API 的快速示例：

```
// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
    writer.onwriteend = function(evt) {
        console.log("contents of file now 'some sample text'");
        writer.truncate(11);  
        writer.onwriteend = function(evt) {
            console.log("contents of file now 'some sample'");
            writer.seek(4);
            writer.write(" different text");
            writer.onwriteend = function(evt){
                console.log("contents of file now 'some different text'");
            }
        };
    };
    writer.write("some sample text");
}

function fail(error) {
    console.log(error.code);
} 
```

[这是读取](http://docs.phonegap.com/en/2.3.0/cordova_file_file.md.html#FileReader)文件的示例：

```
// Wait for Cordova to load
//
function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

// Cordova is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", null, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.file(gotFile, fail);
}

function gotFile(file){
    readDataUrl(file);
    readAsText(file);
}

function readDataUrl(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as data URL");
        console.log(evt.target.result);
    };
    reader.readAsDataURL(file);
}

function readAsText(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as text");
        console.log(evt.target.result);
    };
    reader.readAsText(file);
}

function fail(evt) {
    console.log(evt.target.error.code);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:01:23.520

无法将现有的 Worklight Hybrid 应用程序与现有的 Native 应用程序结合起来。Worklight 应用程序的正确方法是编写一个 Cordova 插件来在事物的本机方面执行您想要的操作。

请参阅这些培训模块，其中解释了如何做到这一点：[http ://www.ibm.com/developerworks/mobile/worklight/getting-started.html#cordova](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#cordova)

# java - 为什么这个 Java 计算不返回浮点值？

> ID：15545113
> 
> 赞同：0
> 
> 时间：2013-03-21T10:36:34.597
> 
> 标签：java, floating-point

只是想知道

```
float percent = 1 + (25/100); // percent value is 1.0 and not 1.25 
```

结果给出 1 但不是 1.25

谢谢赛卡特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:38:38.570

你正在做一个整数除法。让编译器知道您正在尝试通过明确地将您的操作数之一设为浮点文字来进行浮点除法。您可以通过将 F 或 f 附加到数字或将 .0 附加到数字来制作浮点文字。

```
25---> int literal
25.0---> float literal
25F----> float literal
25f----> float literal

float percent = 1 + (25F/100) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:39:21.180

我认为这是因为 Java 是这样看待它的：

```
(int) 1 + ( (int)25/ (int)100) = (int) 1 
```

然后它被存储到一个浮点数中。尝试使用`25.0`而不是`25`.

# mysql - 从 C# 调用 mysql 存储过程？

> ID：15545114
> 
> 赞同：0
> 
> 时间：2013-03-21T10:36:35.023
> 
> 标签：mysql, c#-4.0, stored-procedures

我试图从我的 c# 应用程序调用一个 mysql 存储过程，该过程有 3 个动态传递的参数，问题既不是错误也不是输出，只是我得到空数据表

```
 MySqlConnection con = new MySqlConnection(myConnectionString);
 con.Open();
 MySqlCommand cmd = new MySqlCommand("User_details", con);
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.AddWithValue("username", "aditya");
cmd.Parameters.AddWithValue("password", "123");
cmd.Parameters.AddWithValue("gender", "male");
 MySqlDataAdapter da= new MySqlDataAdapter(cmd);
 DataTable dt = new DataTable();
 da.Fill(dt);
 dataGridView2.DataSource = dt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:55:33.893

我认为这个例子会对你有所帮助

```
protected DataTable RetrieveEmployeeSubInfo(string employeeNo)
            {
                SqlCommand cmd = new SqlCommand();
                SqlDataAdapter da = new SqlDataAdapter();
                DataTable dt = new DataTable();
                try
                {
                    cmd = new SqlCommand("RETRIEVE_EMPLOYEE", pl.ConnOpen());
                    cmd.Parameters.Add(new SqlParameter("@EMPLOYEENO", employeeNo));
                    cmd.CommandType = CommandType.StoredProcedure;
                    da.SelectCommand = cmd;
                    da.Fill(dt);
                    dataGridView1.DataSource = dt;
                }
                catch (Exception x)
                {
                    MessageBox.Show(x.GetBaseException().ToString(), "Error",
                            MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
                finally
                {
                    cmd.Dispose();
                    pl.MySQLConn.Close();
                }
                return dt;
            } 
```

或使用相同的信息访问此页面[http://www.java2s.com/Code/CSharp/Database-ADO.net/ModifyDataTableinsertdatatodatabasetable.htm](http://www.java2s.com/Code/CSharp/Database-ADO.net/ModifyDataTableinsertdatatodatabasetable.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-08T23:46:05.270

试试这个代码

```
DataTable dt = new DataTable();
MySqlConnection connection = new MySqlConnection(MyConString);
MySqlDataAdapter da =new MySqlDataAdapter(nom_fonction,connection);
da.SelectCommand.CommandType = CommandType.StoredProcedure;
da.SelectCommand.Parameters.Add("id", MySqlDbType.Int64).Value = id;
da.Fill(dt);

connection.Close(); 
```

# r - Arima 对象的 R 条件标准差值

> ID：15545117
> 
> 赞同：0
> 
> 时间：2013-03-21T10:36:44.883
> 
> 标签：r, conditional, deviation

对于 Arima 对象，是否有与 sigma(object = "uGARCHfit") 类似的功能？

或者另一种获取 Arima 对象的条件标准偏差的方法。

谢谢。

# c# - 创建 iCal 文件时没有处理什么？

> ID：15545118
> 
> 赞同：1
> 
> 时间：2013-03-21T10:36:45.000
> 
> 标签：c#, asp.net, file, .net-2.0, filestream

关于我的问题，[我在阅读文件时做得对吗？](https://stackoverflow.com/questions/15544432/am-i-doing-it-right-while-reading-a-file/15544557?noredirect=1#15544557)

我正在使用此代码创建一个 iCal 文件，但不确定我是否做得对或需要处理任何内容以获取此错误，

```
System.IO.IOException: The process cannot access the file 'C:\doc.ics' because it is being used by another process.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.StreamWriter.CreateFile(String path, Boolean append)
   at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)
   at System.IO.StreamWriter..ctor(String path) 
```

我正在使用的代码是，

```
 String filePath = paramUri.LocalPath.ToString().TrimStart("filePath:///".ToCharArray());
    int lastSlash = filePath.LastIndexOf('\\');
    if(lastSlash > 0)
    {
        String folderPath = filePath.Substring(0, lastSlash);
        DirectoryInfo di = new DirectoryInfo(folderPath);
        if(!di.Exists)
            di.Create();
    }

    //Use a streamwriter to create a file in the location specified in the URI
    using (StreamWriter sw = new StreamWriter(filePath))
    {
        //Autoflush enabled so we don't have to worry about closing the streamwriter
        sw.AutoFlush = true;
        sw.WriteLine("BEGIN:VCALENDAR");
        sw.WriteLine("PRODID:-//Microsoft Corporation//Outlook 12.0 MIMEDIR//EN");
        sw.WriteLine("VERSION:2.0");
        sw.WriteLine("METHOD:PUBLISH");
        sw.WriteLine("X-MS-OLK-FORCEINSPECTOROPEN:TRUE");
        //I am adding more details but they are not relevant to post
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:53:56.490

由于构造函数中发生错误`StreamWriter`，文件可能没有被您包含的代码锁定。

我猜它被另一个进程锁定了，也许你在文本编辑器中打开它？

# maven-2 - 避免实例化 Maven 依赖插件

> ID：15545121
> 
> 赞同：1
> 
> 时间：2013-03-21T10:36:51.897
> 
> 标签：maven-2

我想使用 maven 的“部署”阶段将一些文件部署到我的设备（使用自定义 maven 插件），但我不需要 maven-deploy-plugin。

关于 stackoverflow 和网络的其他部分关于如何避免运行插件有几个答案，例如：

*   [在父 pom 中定义的 maven 排除插件](https://stackoverflow.com/questions/4839581/maven-exclude-plugin-defined-in-parent-pom)
*   [禁用父 POM 中定义的 Maven 插件](https://stackoverflow.com/questions/7821152/disable-a-maven-plugin-defined-in-a-parent-pom)

我试过设置`<phase>none`,`<skip>true`和`<inherited>false`. 但是，插件仍然配置，失败并显示消息：

> 无法为 org.apache.maven.plugins maven-deploy-plugin 2.4 配置插件参数

因为我的 pom.xml 中没有distributionManagement-element。

有没有办法从 Maven 生命周期中完全删除依赖插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:31:57.230

在我看来，即使使用这些变通方法也不太可能仅仅因为它`maven-deploy-plugin`是一个核心插件，无论喜欢与否。

因此，这是另一个 hack：

*   创建个人资料。

*   在其中定义您的插件并将其附加到`install`阶段。

*   通过调用您的配置文件来触发部署。

不像您希望的那样花哨，但它应该可以解决问题。如果有人有更好的想法，我也想听听他们的意见，因为我也遇到过这类问题。

# isabelle - “应用（规则）”或“证明”使用什么规则？

> ID：15545122
> 
> 赞同：7
> 
> 时间：2013-03-21T10:36:55.117
> 
> 标签：isabelle

当我`apply (rule)`在应用脚本中使用时，通常会选择适当的规则。这同样适用`proof`于结构化证明。我在哪里可以了解/查找使用的规则的名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:56:23.673

您可以尝试`rule_trace`如下使用：

```
lemma "a ∧ b"
  using [[rule_trace]]
  apply rule 
```

这将显示在输出中：

```
rules:
  ?P ⟹ ?Q ⟹ ?P ∧ ?Q
  ?P ⟹ ?Q ⟹ ?P ∧ ?Q 
proof (prove): step 2

goal (2 subgoals):
 1\. a
 2\. b 
```

如果需要规则的名称，您可以尝试使用`find_theorems`; 我不确定它们是否可以直接确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:54:35.180

声明为`Pure.intro`/ `intro`/ `iff`（或其变体之一`?`）的所有`!`内容都被视为默认引入规则（即，如果没有链接当前事实）。同样，声明为`Pure.elim`//的所有内容都被视为默认消除规则（即，如果当前事实被链接）`elim`。`iff`通常后面的声明优先于前面的声明（至少如果使用相同类型的声明......混合，例如，`Pure.intro?`with`intro`等，可能会产生不同的结果）。

然而，这只是回答了原则上考虑什么样的规则。我不知道直接找出应用了哪个规则的方法。但是`find_theorems intro`在您想知道的直线上方直接找到正确的规则是相对简单的。例如，

```
lemma "A & B"
find_theorems intro
proof 
```

将向您显示所有可以作为引入规则应用于目标的规则`A & B`。其中之一是应用的默认规则`proof`（您将通过获得的子目标识别它）。

对于消除规则，您可以使用，例如，

```
lemma assumes "A | B" shows "P"
using assms
find_theorems elim
proof 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T20:55:20.763

其他答案已经告诉您如何确定应用了哪些引理`rule`。注意`proof`不是调用的`rule`，而是方法`default`。大多数时候，`default`与 做相同`rule`的事情，但例如证明它调用的语言环境谓词`unfold_locales`。

我不知道有什么方法可以看到那里实际发生了什么。

# plsql - PLS-00103：遇到符号“，”

> ID：15545123
> 
> 赞同：1
> 
> 时间：2013-03-21T10:36:56.647
> 
> 标签：plsql, oracle11g

此过程出现以下错误。

```
CREATE OR REPLACE PROCEDURE SAMPLE
IS
BEGIN
EXECUTE IMMEDIATE
    'CREATE TABLE COLUMN_NAMES AS (
     SELECT LISTAGG(COLUMN_NAME, ',') WITHIN GROUP (ORDER BY COLUMN_NAME) AS STUDENTS
     FROM   
         (SELECT DISTINCT COLUMN_NAME
          FROM BW_COLUMN_ROW_CELL_JOIN)
     )';
END;
/ 
```

给出：

```
PLS-00103: Encountered the symbol "," when expecting one of the following:     
* & = - + ; < / > at in is mod remainder not rem return    
returning <an exponent (**)> <> or != or ~= >= <= <> and or   
like like2 like4 likec between into using || multiset bulk    member submultiset 
```

任何人都可以说这有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:42:46.827

Another way (in Oracle 10g and later) is to use the alternative string literal notation - this means you don't need to worry about correctly escaping all the single quotes in the string, e.g. `q'{my string's got embedded quotes}'`:

```
CREATE OR REPLACE PROCEDURE SAMPLE
IS
BEGIN
EXECUTE IMMEDIATE q'[
     CREATE TABLE COLUMN_NAMES AS (
     SELECT LISTAGG(COLUMN_NAME, ',') WITHIN GROUP (ORDER BY COLUMN_NAME) AS STUDENTS
     FROM   
         (SELECT DISTINCT COLUMN_NAME
          FROM BW_COLUMN_ROW_CELL_JOIN)
     )]';
END;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:48:50.450

我认为的问题是你在单引号中有单引号。我目前无法对此进行测试，但我建议您尝试以下操作（注意内引号是双引号`''`，它会转义它们：

```
CREATE OR REPLACE PROCEDURE SAMPLE 
IS
BEGIN 
    EXECUTE IMMEDIATE 'CREATE TABLE COLUMN_NAMES AS ( SELECT LISTAGG(COLUMN_NAME, '','') WITHIN GROUP (ORDER BY COLUMN_NAME) AS STUDENTS FROM (SELECT DISTINCT COLUMN_NAME FROM BW_COLUMN_ROW_CELL_JOIN) )'; 
END; 
/ 
```

我也会`create table`先尝试独立的代码部分，以确保它在将其包装到 proc 之前有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T11:02:00.713

你不能`single quotes`直接`select statement`使用`Execute Immediate`它需要使用编码`CHR(39)`

```
CREATE OR REPLACE PROCEDURE SAMPLE
IS
BEGIN
   EXECUTE IMMEDIATE
     'CREATE TABLE COLUMN_NAMES AS (
             SELECT LISTAGG(COLUMN_NAME,'||chr(39)||','||chr(39)||') WITHIN GROUP (ORDER BY COLUMN_NAME) AS STUDENTS
             FROM   
            (SELECT DISTINCT COLUMN_NAME FROM BW_COLUMN_ROW_CELL_JOIN))';
END; 
```

# android - 订阅 OpenTok 流给了我发布者视图的镜像

> ID：15545125
> 
> 赞同：2
> 
> 时间：2013-03-21T10:36:59.660
> 
> 标签：android, opentok

我想使用 Opentok 实现视频通话功能。

我按照[链接中给出的步骤](http://www.tokbox.com/blog/opentok-for-android/)

一旦会话在接收流中连接，我将获得发布者视图我正在编写代码

```
subscriber = session.createSubscriber(subscriberView,stream);
subscriber.connect(); 
```

它给出了发布者视图的镜像如何获取订阅者视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-17T06:10:33.673

打开`OpnTokConfig.java`

并设置`SUBSCRIBE_TO_SELF`为假

// 订阅此客户端发布的流。设置为 false 以仅订阅 // 其他客户端的流。

```
 public static final boolean SUBSCRIBE_TO_SELF = false; 
```

这就是导致您展示自己的视频的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:53:55.460

当您订阅视频流时，请确保您正在创建一个新的surfaceView 来放入视频。如果没有，您将使用新订阅的订阅源覆盖相同的surfaceView。

您获得发布者视图镜像的原因是因为您订阅了自己的视频，这很好，因为订阅有效。祝你好运！

# mysql - 使用 MySQL 中子查询的数据更新多列

> ID：15545131
> 
> 赞同：1
> 
> 时间：2013-03-21T10:37:20.940
> 
> 标签：mysql, subquery, average

我正在尝试使用子查询中多个列的数据更新一行中的多个列。

以下方法对我不起作用，我找不到适合我需要的不同方法：

```
UPDATE
    beers,
    (SELECT AVG(appearance) AS appearance, AVG(palate) AS palate, AVG(taste) AS taste, AVG(aroma) AS aroma, AVG(overall) AS overall, beer_id FROM reviews) AS review_total
SET
    beers.appearance = review_total.appearance, 
    beers.palate = review_total.palate, 
    beers.taste = review_total.taste, 
    beers.aroma = review_total.aroma, 
    beers.overall = review_total.overall
WHERE
    review_total.beer_id = beers.id
AND
    beers.id = 43 
```

我没有收到此错误，但有 5 个警告并且该行未更新：

```
Query OK, 0 rows affected, 5 warnings (0.01 sec) 
```

显示警告给了我：

```
+-------+------+----------------------------------------------------+
| Level | Code | Message                                            |
+-------+------+----------------------------------------------------+
| Note  | 1265 | Data truncated for column 'appearance' at row 9991 |
| Note  | 1265 | Data truncated for column 'palate' at row 9991     |
| Note  | 1265 | Data truncated for column 'taste' at row 9991      |
| Note  | 1265 | Data truncated for column 'aroma' at row 9991      |
| Note  | 1265 | Data truncated for column 'overall' at row 9991    |
+-------+------+----------------------------------------------------+ 
```

我知道这个问题与数据类型有关，但数据类型是浮点数，我相信这也是 AVG 的结果：

```
mysql> describe beers;
+-------------+---------------+------+-----+---------+----------------+
| Field       | Type          | Null | Key | Default | Extra          |
+-------------+---------------+------+-----+---------+----------------+
| id          | int(11)       | NO   | PRI | NULL    | auto_increment |
| name        | varchar(90)   | YES  |     | NULL    |                |
| aroma       | float         | YES  |     | NULL    |                |
| appearance  | float         | YES  |     | NULL    |                |
| palate      | float         | YES  |     | NULL    |                |
| taste       | float         | YES  |     | NULL    |                |
| overall     | float         | YES  |     | NULL    |                |
+-------------+---------------+------+-----+---------+----------------+ 
```

下一个查询略有不同：

```
UPDATE
    beers
SET
    beers.appearance = review_total.appearance, 
    beers.palate = review_total.palate, 
    beers.taste = review_total.taste, 
    beers.aroma = review_total.aroma, 
    beers.overall = review_total.overall
FROM
    INNER JOIN (SELECT AVG(appearance) AS appearance, AVG(palate) AS palate, AVG(taste) AS taste, AVG(aroma) AS aroma, AVG(overall) AS overall, beer_id FROM reviews) review_total ON review_total.beer_id = beers.id
WHERE
    beers.id = 43 
```

我得到的这个错误是：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FROM INNER JOIN (SELECT AVG(appearance) AS appearance, AVG(palate) AS palate, AV' at line 9 
```

我真的找不到让这个工作的方法，我希望有人看到我做错了什么。非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:11:51.970

```
 UPDATE beers b
    JOIN 
       ( SELECT beer_id
              , AVG(appearance) appearance
              , AVG(palate) palate
              , AVG(taste) taste
              , AVG(aroma) aroma
              , AVG(overall) overall
              , beer_id 
           FROM reviews
          GROUP
             BY beer_id
       ) review_total 
      ON review_total.beer_id = b.id
     SET b.appearance = review_total.appearance
       , b.palate = review_total.palate
       , b.taste = review_total.taste
       , b.aroma = review_total.aroma
       , b.overall = review_total.overall
   WHERE b.id = 43; 
```

或类似的东西

# visual-studio-2010 - VS Post 构建事件在 bat 文件中声明 var 并稍后使用

> ID：15545134
> 
> 赞同：3
> 
> 时间：2013-03-21T10:37:25.250
> 
> 标签：visual-studio-2010, visual-studio, batch-file, msbuild, post-build-event

我正在尝试使用 Visual Studio 2010 中的 signtool.exe 使用证书自动签署项目。这是我简化的构建后脚本：

> if $(ConfigurationName) == Debug ( call "$(VS100COMNTOOLS)VCVarsQueryRegistry.bat" call "$(WindowsSdkDir)bin/signtool.exe" sign /f "$(ProjectDir)my.pfx" /p mypass /t timstamp. dll "$(TargetPath)" )

`Debug`用于测试目的。我正在尝试模仿`Visual Studio command prompt`- 执行`$(VS100COMNTOOLS)VCVarsQueryRegistry.bat`它添加一些额外的变量，然后再使用它。`$(WindowsSdkDir)`是我需要的。

虽然该脚本在简单`bat`文件中完美运行，但它拒绝在 Visual Studio 中运行。输出是：

> 调用“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\Tools\VCVarsQueryRegistry.bat”调用“bin/signtool.exe”签名...

请注意，它无法识别在 VCVarsQueryRegistry.bat 中创建的 $(WindowsSdkDir)。

是否可以在 bat 中声明 var 并稍后在构建后使用它，或者我应该使用另一种方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:09:39.517

这有点棘手：

*   首先，对于 cmd 变量，您需要使用`%var%`语法而不是类似 msbuild`$(var)`
*   接下来，`call`批处理中的 SET 语句确实适用.. 但`if`主体会预先计算其变量，因此您需要几`if`行而不是一个`if`主体。这是对这种行为和其他避免它的方法的很好解释[.bat 文件中的奇怪范围问题](https://stackoverflow.com/questions/305605/weird-scope-issue-in-bat-file)

所以，这个应该工作：

```
if $(ConfigurationName) == Debug call "%VS100COMNTOOLS%VCVarsQueryRegistry.bat"
if $(ConfigurationName) == Debug call "%WindowsSdkDir%bin\signtool.exe" sign /f "$(ProjectDir)my.pfx" /p mypass /t timstamp.dll "$(TargetPath)" 
```

# joomla - 如何在 Joomla (Beez20) 中更改左侧菜单的宽度

> ID：15545138
> 
> 赞同：0
> 
> 时间：2013-03-21T10:37:35.850
> 
> 标签：joomla, joomla2.5

如何更改 Joomla 2.5 中 Beez20 模板附带的左侧菜单的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:51:08.973

这可以通过编辑`/templates/beez5/css/position.css`文件来完成。

寻找

```
.leftbigger
{
 width:15%
} 
```

并编辑`width:15%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:30:03.877

```
#wrapper2
{
    width: 50%;
    float:left;
    position:relative;
    padding-bottom:20px
} 
```

在同一个文件中可能还需要调整。在浏览器中使用 Firebug 或包含的开发工具可以告诉您更多信息。

# spring-mvc - Spring MVC 和 html 输入

> ID：15545148
> 
> 赞同：0
> 
> 时间：2013-03-21T10:38:02.470
> 
> 标签：spring-mvc

在 Spring 3.1 Web MVC 表单中，我使用以下字段从 datepicker 中获取日期，并将表单中定义为`String`. 我得到了所有的值，但我没有得到日期字段。

**第一次尝试**

```
<form:input id="fromDate" class="mydate" path="fromDate" size="10" maxlength="10" />
    <script type="text/javascript">
        Spring.addDecoration(new Spring.ElementDecoration({elementId : 'fromDate', widgetType : 'dijit.form.DateTextBox', widgetAttrs : {promptMessage: 'Enter From Date', invalidMessage: 'Please enter valid From Date', required: false, constraints: {datePattern : 'dd/MM/yyyy', required : false}, datePattern : 'dd/MM/yyyy'}}));
    </script> 
```

**第二次尝试**

```
<input id="toDate" class="mydate" path="toDate" size="10" maxlength="10" />
    <spring:bind path="schemeQuantity.toDate">
        ${status.value}
    </spring:bind>
    <script type="text/javascript"> 
```

是否可以使用简单的 HTML 输入标记并与 Spring MVC 绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:44:34.157

是的，可以使用简单的 html 输入标签。
在表单标签中添加这样的`commandName`属性

```
<form:form commandName="attribute" name="createForm" id="createForm" acceptCharset="UTF-8" method="post" action="create"> 
```

现在在你的控制器类中添加`@ModelAttribute`这样的。

```
@RequestMapping(value="create" , method=RequestMethod.POST)
public String createAttribute( Model model , @ModelAttribute YourPojoClass attribute,Errors errors) 
```

# html - 元元素的内容属性和样式属性可以包含换行符吗？

> ID：15545151
> 
> 赞同：1
> 
> 时间：2013-03-21T10:38:14.720
> 
> 标签：html

下面的html代码合法吗？

```
<meta name="keyword" content="
  keyword1,
  keyword2
  "> 
```

和：

```
<div style="
  color: white;
  background: green;
  "></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:57:55.903

以下标记确实使用[validator.w3.org/check进行验证](http://validator.w3.org/check)

```
<!DOCTYPE html>
<html>
<head>
  <title>asd</title>
  <meta name="keywords" content="
    keyword1,
    keyword2
  ">
</head>
<body>
<div style="
  color: white;
  background: green;
  "></div>
</body>
</html> 
```

但是，我建议不要这样做。原因是：

*   它在文档正文中添加了不必要的字符，从而增加了网页的整体大小。
*   这是不好的做法。
*   如果标签被限制为一行，则更容易阅读整个 HTML。在我看来，这更容易阅读：

    ```
    <meta name="keyword" content="keyword1, keyword2"> 
    ```

至于您的样式，我建议您为您的样式使用单独的 CSS 样式表，以便它们可重用并包含在单个区域中。

```
<div class="stylised"></div> 
```

CSS

```
.stylised {
    color: white;
    background: green;
} 
```

仅供参考，我需要将标签的`name`属性更改为，而不是使其生效。`<meta>``keywords``keyword`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:47:17.517

解析引擎通常会尝试忽略这些换行符，但为了安全起见，请使用[W3C 标记验证服务](http://validator.w3.org/)验证您的 HTML 标记。

# solr - 使用 NCrawler 运行增量爬网

> ID：15545152
> 
> 赞同：1
> 
> 时间：2013-03-21T10:38:19.343
> 
> 标签：solr, web-crawler

当我们将 NCrawler 与 SOLR 一起使用时，有没有办法运行增量爬取和索引？我不希望我的爬虫在每次爬取时都获取完整的数据。有什么方法可以使爬行增量？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:11:38.490

NCrawler 没有为此内置任何东西。您将需要创建自己的处理来处理此问题。但是，可扩展`IPipelineStep`机制将允许您围绕您想要的抓取创建任何进程。例如，您可以将每个访问过的 url 连同页面内容的哈希一起存储在数据库中，以确定页面何时更改并仅将更改的页面处理到索引中。

# sql - 执行 linq 语句时，行中缺少具有空值的数据库条目

> ID：15545163
> 
> 赞同：0
> 
> 时间：2013-03-21T10:39:02.750
> 
> 标签：sql, database, linq, null, missing-data

所以这里是sql查询：

```
Select distinct A.CategoryName, A.CategoryID, B.ProjectID 
from [EvalTool].[dbo].[Category] A
Left Join [EvalTool].[dbo].[CategoryAndProject2] B
On A.CategoryID = B.CategoryID AND B.ProjectID = 65 
```

和希望平等的 linq 声明：

```
int pID = (int)Session["projectSession"];
             ViewData.Model = (from c in _db.Category
                                join r in _db.CategoryAndProject2
                                on c.CategoryID equals r.CategoryID into join1
                                from j in join1.DefaultIfEmpty()
                                where j.ProjectID == pID
                                select new CategoryDTO
                                {
                                    CatID = c.CategoryID, 
                                    CatName = c.CategoryName,
                                    ProjID = (int) j.ProjectID
                                }).Distinct().ToList(); 
```

sql语句的结果如下表：

```
CategoryName    ID  ProjectID
- - - - - - - - - - - - - - - - - - 
x   1   NULL
y   2   NULL
z   3   NULL
m   4   NULL
n   5   NULL
i   6   NULL
o   7   NULL
r   8   NULL
s   9   65
u   10  65 
```

而 linq 语句仅列出 2 行，即那些没有空条目的行。

```
CategoryName    ID  ProjectID
- - - - - - - - - - - - - - - - - - 
s   9   65
u   10  65 
```

但我需要那些在我的视图中有一个空条目的行。

我怎样才能确保也选择那些？

非常感谢提前标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:42:38.507

违规的线路，

```
where j.ProjectID == pID 
```

正在过滤`ProjectID`，并且逻辑上不会返回空行，除非`pID`它本身为空。在您的情况下，它似乎是`65`，因此该行应更改为

```
where j.ProjectID == pID || j.ProjectID == null 
```

或者，如果你想把它放在`ON`连接的一部分，你可以这样做：

```
from c in _db.Category
join r in _db.CategoryAndProject2
   on new {c.CategoryID, ProjectID = pID} equals new {r.CategoryID, r.ProjectID} 
   into join1 
```

* * *

在此之后，分配

```
ProjID = (int) j.ProjectID 
```

在您的`select`陈述中将失败。您将不得不决定如何处理它。

# php - PHP 可以基于示例 XML 文件编写 SOAP 函数吗？

> ID：15545166
> 
> 赞同：3
> 
> 时间：2013-03-21T10:39:10.193
> 
> 标签：php, soap

我有一个示例 XML 文件，它连接到 SOAP 服务器并将“usero1”的“Tier”属性设置为“pkg01”。

在 SOAP UI 上运行此 XML 文件时，它可以工作。

我想通过 PHP 为这项工作创建一个 SOAP 函数。但我不知道如何开始，我必须调用多少个函数？任何人请帮助。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.subscriberservices.sandvine.com">
   <soapenv:Header xmlns:svsec="http://services.sandvine.com">
      <svsec:username>username</svsec:username>
      <svsec:password>password</svsec:password>
   </soapenv:Header>
   <soapenv:Body>
      <ws:SetSubscriberAttributesRequest>
         <Debug>false</Debug>
         <BulkOperationFailureBehaviour>AllOrNothing</BulkOperationFailureBehaviour>
         <SetSubscriberAttributeParameterSets>
            <SetSubscriberAttributeParameterSet>
               <SubscriberKey>
                  <SubscriberRealmKey>
                     <Name>DEFAULT</Name>
                  </SubscriberRealmKey>
                  <Name>user01</Name>
               </SubscriberKey>
               <SubscriberAttributeDefinitionKey>
                  <Name>Tier</Name>
               </SubscriberAttributeDefinitionKey>
               <Value>pkg01</Value>
            </SetSubscriberAttributeParameterSet>
        </SetSubscriberAttributeParameterSets>
         <ResponseGroups>
            <ResponseGroup>Subscriber.Shallow</ResponseGroup>
         </ResponseGroups>
      </ws:SetSubscriberAttributesRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:51:14.767

XML 文件未连接到 SOAP 服务器 - XML 文件表示 SOAP 请求。

您需要做的是为您的 SOAP 服务器编写一个 php SOAP 客户端。为此，您将需要：

1.  SOAP 服务器的 wsdl 文件的 uri（这本质上是允许您的客户端创建请求的元数据 - 它描述了服务器允许的功能）
2.  Zend_Soap_Client 类 - [http://framework.zend.com/manual/2.0/en/modules/zend.soap.client.html](http://framework.zend.com/manual/2.0/en/modules/zend.soap.client.html)

您可以在此处阅读有关 PHP 和 SOAP 的更多信息[使用 Zend 框架实现 SOAP 服务](http://www.ibm.com/developerworks/webservices/library/x-zsoap/index.html)

# .htaccess - htaccess 重定向和从 php 到 html 的重写

> ID：15545170
> 
> 赞同：2
> 
> 时间：2013-03-21T10:39:23.053
> 
> 标签：.htaccess, mod-rewrite

我被 .htaccess 修改困住了，需要一点帮助。
首先，这是我的 htaccess 里面的内容。

```
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php [nc] 
```

例如，我创建了名为 test.php 的文件并上传到我的服务器。

我希望我的服务器表现得像这样。

```
http://example.com/test/test.html -> http://example.com/test/test.html(as it is)
http://example.com/test/test.php -> http://example.com/test/test.html 
```

但是对于我现在拥有的 .htaccess，我仍然同时拥有 .php 和 .html ，这可能被谷歌机器人等搜索引擎爬虫视为文件复制（不是吗？）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:42:20.677

试试这个 .htaccess 代码

```
# Enable Rewrite Engine
RewriteEngine on

#Create friendly URL
RewriteRule ^test/(.*)\.html$ test/$1\.php [L] 
```

**或者**

```
RewriteCond %{REQUEST_URI} ^(.*)\.php$
RewriteRule ^(.*) /$1.html [L] 
```

**或者**

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## .php to .html
# To externally redirect /test/test.php to /test/test.html
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1.html [R,L,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:14:58.523

这是 apache '.htaccess' 的配置文件，如果您仍想配置然后更改

重写引擎开启

我希望这项工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:28:19.223

您可以在根目录中的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !\.html             [NC]
RewriteRule ^([^/]+)/([^.]+)\.php  /$1/$2.html [R=301,NC,L] 
```

对于静默映射，将 [R=301,NC,L] 替换为 [NC,L]

# android - 被替换的 Fragment 的 OnCreate 被称为 Twice。为什么？

> ID：15545172
> 
> 赞同：1
> 
> 时间：2013-03-21T10:39:34.263
> 
> 标签：android, android-fragments, android-fragmentactivity, fragment-tab-host

我`Fragments`在从`FragmnetActivity`. 我可以添加初始片段，然后根据我的应用程序设置，我正在替换片段。当我处于调试模式时，我观察到这一点，`onCreate`并且非常新的 Fragmnet 的其他`overriden`方法被调用了两次。为什么这样？以及如何限制它们只被调用一次。

以下是我在应用程序中使用 Fragments 的方式：

```
public class FragmentTabs extends FragmentActivity implements OnTabChangeListener {

private FragmentTabHost mTabHost;
private HomeFragment homeFragmnet;
private GroupFragment groupFragment;
private TemplateFragment templateFragment;
private SetingsFragment settingsFragment;
private CalendarViewFragment calendarViewFragment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.fragment_tabs);

    mTabHost = (FragmentTabHost) findViewById(android.R.id.tabhost);

    mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

    homeFragmnet = new HomeFragment();
    groupFragment = new GroupFragment();
    templateFragment = new TemplateFragment();
    settingsFragment = new SetingsFragment();
    calendarViewFragment = new CalendarViewFragment();

    mTabHost.setOnTabChangedListener(this);

    if (Database.getSharedObject(getApplicationContext()).getAppSettings().getListView() == 1) {
        mTabHost.addTab(mTabHost.newTabSpec("home").setIndicator("", getResources().getDrawable(R.drawable.home_tab)), HomeFragment.class, null);

    } else {
        mTabHost.addTab(mTabHost.newTabSpec("home").setIndicator("", getResources().getDrawable(R.drawable.home_tab)), CalendarViewFragment.class, null);
    }
    mTabHost.addTab(mTabHost.newTabSpec("groups").setIndicator("", getResources().getDrawable(R.drawable.groups_tab)), GroupFragment.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("templates").setIndicator("", getResources().getDrawable(R.drawable.templates_tab)),TemplateFragment.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("settings").setIndicator("", getResources().getDrawable(R.drawable.settings_tab)), SetingsFragment.class, null);

}

@Override
protected void onResume() {
    super.onResume();

}

private void showHomeFragment() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, homeFragmnet);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.disallowAddToBackStack();
    ft.commit();
}

private void showGroupsFragment() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, groupFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.disallowAddToBackStack();
    ft.commit();
}

private void showTemplateFragment() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, templateFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.disallowAddToBackStack();
    ft.commit();
}

private void showSettingsFragment() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, settingsFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.disallowAddToBackStack();
    ft.commit();
}

private void showCalendarViewFragment() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.realtabcontent, calendarViewFragment);
    ft.disallowAddToBackStack();
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.commit();
}

@Override
public void onTabChanged(String arg0) {

    if (mTabHost.getCurrentTab() == 0) {
        if (Database.getSharedObject(getApplicationContext()).getAppSettings().getListView() == 1) {
            showHomeFragment();
        } else {
            showCalendarViewFragment();
        }
    } else if (mTabHost.getCurrentTab() == 1) {
        showGroupsFragment();
    } else if (mTabHost.getCurrentTab() == 2) {
        showTemplateFragment();
    } else if (mTabHost.getCurrentTab() == 3) {
        showSettingsFragment();
    }
} 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:44:49.273

我改用 show() 和 hide()，效果很好。

```
private void showHomeFragment() {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

    if (homeFragmnet.isAdded())
        ft.show(homeFragmnet);
    else
        ft.add(R.id.realtabcontent, homeFragmnet);

    if (groupFragment.isAdded()) ft.hide(groupFragment);
    if (templateFragment.isAdded()) ft.hide(templateFragment);
    if (settingsFragment.isAdded()) ft.hide(settingsFragment);
    if (calendarViewFragment.isAdded()) ft.hide(calendarViewFragment);

    ft.commit();
} 
```

# paypal - PayPal Android SDK 将停产？

> ID：15545176
> 
> 赞同：2
> 
> 时间：2013-03-21T10:39:47.007
> 
> 标签：paypal

我了解到 PayPal 最近从 x.com 弃用了其开发者网站，并在 developer.paypal.com 推出了新网站。但是，在新站点上，我找不到对 Android SDK（或 Android 的 MLP）的任何引用，也找不到 Github 存储库（[https://github.com/paypal](https://github.com/paypal)）。

有谁知道 Android SDK 的未来是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:55:59.997

一切都还没有转移到新网站。有些东西在不同的阶段被转移。Android SDK 最终将被转移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T07:01:12.730

使用 rest api 并等待新的 paypall android sdk

# ios - 核心数据 - DENY 规则未删除与已删除源对象相关的目标对象

> ID：15545179
> 
> 赞同：1
> 
> 时间：2013-03-21T10:39:48.857
> 
> 标签：ios, core-data

我有两张桌子。作业和问题。这两个表之间的关系太多了。从作业到问题的删除规则是拒绝，从问题到作业的删除规则是无效。

删除作业后，我想删除与该作业相关的所有问题，留下仍然与其他作业有参考的问题。这就是从作业到问题设置拒绝删除规则的原因。

在删除作业之前，我确保从作业中删除问题参考，如下所示：

```
Assignment *assignment = assignment to be deleted;

for (SMQuestion *question in [assignment.questions allObjects])
{
//NSLog(@"The Question ID is %@",question.questionId);

//[question removeAssignmentsObject:assignment];
[assignment removeQuestionsObject:question];
//question.assignments = nil;
}

[[[CoreDataManager sharedObject] managedObjectContext] deleteObject:assignment];

[[[CoreDataManager sharedObject] managedObjectContext] save:&error]; 
```

但是在删除作业后，没有一个问题会从数据库中删除。我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:00:58.227

DENY 规则不会导致任何对象被删除。仅当源对象与目标对象有关系时，它才会阻止源对象被删除。

在这种情况下（从作业到问题的拒绝规则），如果作业与任何问题相关，则不能删除作业。

您的代码仅删除作业与问题的关系。您必须检查该问题是否还有其他作业，否则删除该问题。

另请注意，`question.assignments = nil;`在您的循环中，会从问题中删除*所有*作业，而不仅仅是一个“要删除的作业”。

# javascript - javascript/WebSQL：如何取消查询

> ID：15545180
> 
> 赞同：4
> 
> 时间：2013-03-21T10:39:52.240
> 
> 标签：javascript, sql, web-sql

我有这种情况，我执行一个复杂的查询，这需要一些时间。但有时我不再需要结果，所以我想取消它。这可能吗？这是基本结构：

```
db.transaction(
    function(tx) {
        tx.executeSql('SELECT * FROM ...JOIN ...', [a,b,c], callback) ;
    } 
    , function(err) { .... }
    , function() { /* transaction completed */ }
) ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T03:06:01.430

WebSQL API 中没有中止。建议的方法对要中止和回滚的活动事务调用无效的 SQL，如下所示：

```
var errback = {
  return true; // rollback
}
tx.executeSql('ABORT', [], null, errback); // yes, this will cause error 
```

# zend-framework2 - 如何为每个表单元素添加特殊标签？

> ID：15545182
> 
> 赞同：0
> 
> 时间：2013-03-21T10:40:03.933
> 
> 标签：zend-framework2, zend-form

我有带有字段的表格：

```
$this -> add(
        array(
            'name' => 'firstfield',
            'attributes' => array(
                'type'  => 'text',
                'id' => 'id_firstfield'
            ),
            'options' => array(
                'label' => 'firstfield'
            ),
        )
    );

$this -> add(
        array(
            'name' => 'secondfield',
            'attributes' => array(
                'type'  => 'text',
                'id' => 'id_secondfield'
            ),
            'options' => array(
                'label' => 'secondfield'
            ),
        )
    ); 
```

当我使用：

```
echo $this->formCollection($form); 
```

在我看来，我得到：

```
[...]
<label for="id_firstfield">first field</label>
<input name="firstfield" type="text" id="id_firstfield" value="">
<label for="id_secondfield">second field</label>
<input name="secondfield" type="text" id="id_secondfield" value="">
[...] 
```

但我想得到：

```
[...]
<div id="divforfirstfield">
    <label for="id_firstfield">first field</label>
    <input name="firstfield" type="text" id="id_firstfield" value="">
</div>
<div id="divforsecondfield">
    <label for="id_secondfield">second field</label>
    <input name="secondfield" type="text" id="id_secondfield" value="">
</div>
[...] 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:07:33.750

使用`formCollection()`this 是不可能的。但是，您可以这样做：

```
<div id="firstid">
    <?php echo $this->formRow($form->get('firstfield')); ?>
</div>
<div id="secondid">
    <?php echo $this->formRow($form->get('secondfield')); ?>
</div> 
```

如果您只想通过一个函数调用来呈现表单，您将不得不`formCollection()`使用您自己的一个来扩展视图助手。

# excel - 如何删除 Solver(SOLVER.XLAM) 代码

> ID：15545188
> 
> 赞同：2
> 
> 时间：2013-03-21T10:40:15.907
> 
> 标签：excel, solver, vba

打开几个编写宏/代码的示例，我突然被一个似乎安全的代码卡住了。求解器 (SOLVER.XLAM) 这是值得注意的，我想从我的系统中删除它。我想这不是一个相关的代码。谁能告诉我我应该怎么做？我已经安装了一些东西来删除密码，但是 SOLVER 仍然要求输入密码，我无法摆脱它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:59:44.193

Solver 是 Excel 插件。如果要删除它，请转到 Excel 应用程序 > 选项 > 搜索加载项 > 按类似“转到”按钮 > 取消选中列表中的求解器（我不能给你确切的路径，因为我有波兰语版本电子表格）。

最好不要尝试打开 Solver 的 VBA 代码，因为它受版权保护。

此外，我认为 Solver 在使用 Excel 或 VBA 时不会带来任何不便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:51:37.693

非常好，现在它不是更活跃了。对于想要停用此功能的人，您应该按照以下步骤操作。对于 Excell 2010。打开 Excel/转到选项/转到添加插件/转到页面顶部的活动插件/选择求解器/按开始（页面下方）/然后会弹出一个窗口，以便您可以取消选中或根据需要进行检查。这很容易做到。感谢Kaz为我指明了正确的方向！最好不要删除它们，也许你以后会需要它们

# .net - .NET XPath 从特定元素开始并反向引用它

> ID：15545193
> 
> 赞同：0
> 
> 时间：2013-03-21T10:40:42.253
> 
> 标签：.net, xpath

我有（实际上将有）一个应用程序，我需要使用 XPath 找到一个特定的 xml 元素（称为元素 A），然后找到由元素 A 引用的另一个元素（元素 B）。示例：

```
public static void Main(string[] args)
    {
        var s = @"
<Root>
    <Start refId = ""5""/>
    <Start refId = ""6""/>
    <Item id = ""5""/>
    <Item id = ""6""/>
</Root>
";

        var doc = new XmlDocument();
        using (var sr = new StringReader(s))
        {
            doc.Load(sr);
        }

        XmlNode nodeA = doc.SelectNodes(@"Root/Start[1]")[0];
        var selected = nodeA.SelectNodes(@"/Root/Item[@id = @refId]");
    } 
```

这里 nodeA 是我能找到的节点 A。selected 是我找不到的节点 B 的集合。我的问题出在 [@id = @refId] 中，我想返回从我开始的 nodeA 并获取其属性“refId”的值，但我找不到方法。这有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:22:12.360

**编辑：**我可以看到完成您在评论中描述的唯一方法是使用 LINQ to XML、XPath 变量或定义您自己的`current()`函数。XPath 变量和当前函数有点麻烦，因为它们需要编写您自己的类来处理它们，但是您可以使用这些相对简单的泛型类：

```
public class VariableContext : XsltContext
{
    IXPathNavigable CurrentNode;

    Dictionary<string, object> Values = new Dictionary<string, object>();
    public void SetValue(string name, object value)
    {
        Values[name] = value;
    }
    public void SetCurrentNode(IXPathNavigable currentNode)
    {
        CurrentNode = currentNode;
    }

    public override int CompareDocument(string baseUri, string nextbaseUri)
    {
        throw new NotImplementedException();
    }

    public override bool PreserveWhitespace(System.Xml.XPath.XPathNavigator node)
    {
        return false;
    }

    public override IXsltContextFunction ResolveFunction(string prefix, string name, System.Xml.XPath.XPathResultType[] ArgTypes)
    {
        if (name.Equals("current"))
        {
            return new CurrentFunction(CurrentNode);
        }
        throw new NotImplementedException();
    }

    public override IXsltContextVariable ResolveVariable(string prefix, string name)
    {
        object value;
        if (Values.TryGetValue(name, out value))
        {
            return new ContextVariable(name, value);
        }
        throw new ApplicationException("Unknown variable: " + name);
    }

    public override bool Whitespace
    {
        get { return false; }
    }
}

public class ContextVariable : IXsltContextVariable
{
    private string m_name;
    private object m_parameter;

    public ContextVariable(string name, object parameter)
    {
        m_name = name;
        m_parameter = parameter;

        IXPathNavigable navigable = m_parameter as IXPathNavigable;
        if (navigable != null)
        {
            m_parameter = navigable.CreateNavigator().Select(".");
        }
    }

    #region IXsltContextVariable Members

    public object Evaluate(XsltContext xsltContext)
    {
        return m_parameter;
    }

    public bool IsLocal
    {
        get { return true; }
    }

    public bool IsParam
    {
        get { return true; }
    }

    public XPathResultType VariableType
    {
        get
        {
            return XPathResultType.Any;
        }
    }

    #endregion
}

public class CurrentFunction : IXsltContextFunction
{
    private XPathNodeIterator CurrentNodeIterator;
    internal CurrentFunction(IXPathNavigable currentNode)
    {
        if (currentNode != null)
        {
            CurrentNodeIterator = currentNode.CreateNavigator().Select(".");
        }
    }

    public XPathResultType[] ArgTypes
    {
        get { return new XPathResultType[0]; }
    }

    public object Invoke(XsltContext xsltContext, object[] args, 
                         XPathNavigator docContext)
    {
        if (CurrentNodeIterator == null)
        {
            throw new ApplicationException("Current node is not set.");
        }
        return CurrentNodeIterator;
    }

    public int Maxargs
    {
        get { return 0; }
    }

    public int Minargs
    {
        get { return 0; }
    }

    public XPathResultType ReturnType
    {
        get { return XPathResultType.NodeSet; }
    }
} 
```

一旦你在某处定义了它，你可以执行以下操作：

```
VariableContext vc = new VariableContext();
XmlNode nodea = doc.SelectSingleNode("Root/Start[1]");
vc.SetValue("a", nodea);
XmlNodeList selected = doc.SelectNodes("/Root/Item[@id = $a/@refId]", vc); 
```

或使用自定义`current()`函数：

```
VariableContext vc2 = new VariableContext();
XmlNode nodea2 = doc.SelectSingleNode("Root/Start[1]");
vc2.SetCurrentNode(nodea2);
XmlNodeList selected2 = doc.SelectNodes("/Root/Item[@id = current()/@refId]", vc2);
PrintNodeList(selected2); 
```

工作理念：http: [//ideone.com/7wsQ46](http://ideone.com/7wsQ46)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:17:59.763

你可以这样做：

```
XmlNode nodeA = doc.SelectNodes(@"Root/Start[1]")[0];
var selected = nodeA.SelectNodes("/Root/Item[@id = " + nodeA.Attributes["refId"].Value + "]"); 
```

# django - Django：查询集错误

> ID：15545194
> 
> 赞同：0
> 
> 时间：2013-03-21T10:40:43.113
> 
> 标签：django, python-2.7

我有一个测试视图，其中一个数据聚合查询引发了我不理解的错误。如果有人可以对此发表评论并指出正确的方向，我将不胜感激。这是我的第一个 django 项目，我正在经历学习曲线，所以请多多包涵：

代码：

```
biz_group = BusinessGroup.objects.get(group_manager=user)
group_team = BusinessGroupToTeams.objects.get(group_id=biz_group.group_id) 
```

引发错误：

```
Traceback (most recent call last):
    File "<console>", line 1, in <module>
    File "/usr/lib/python2.7/dist-packages/django/db/models/manager.py", line 143, in get
     return self.get_query_set().get(*args, **kwargs)
    File "/usr/lib/python2.7/dist-packages/django/db/models/query.py", line 394, in get
     num = len(clone)
    File "/usr/lib/python2.7/dist-packages/django/db/models/query.py", line 90, in __len__
    self._result_cache = list(self.iterator())

    File "/usr/lib/python2.7/dist-packages/django/db/models/query.py", line 301, in iterator
     for row in compiler.results_iter():
    File "/usr/lib/python2.7/dist-packages/django/db/models/sql/compiler.py", line 775, in results_iter
     for rows in self.execute_sql(MULTI):
    File "/usr/lib/python2.7/dist-packages/django/db/models/sql/compiler.py", line 840, in execute_sql
cursor.execute(sql, params)
    File "/usr/lib/python2.7/dist-packages/django/db/backends/util.py", line 41, in execute
     return self.cursor.execute(sql, params)
    File "/usr/lib/python2.7/dist-packages/django/db/backends/postgresql_psycopg2/base.py", line 58, in execute
     six.reraise(utils.DatabaseError, utils.DatabaseError(*tuple(e.args)), sys.exc_info()[2])
    File "/usr/lib/python2.7/dist-packages/django/db/backends/postgresql_psycopg2/base.py", line 54, in execute
     return self.cursor.execute(query, args)
    DatabaseError: column businessgroup_to_teams.id does not exist
    LINE 1: SELECT "businessgroup_to_teams"."id", "businessgroup_to_teams"... 
```

BusinessGroupToTeams 模型如下所示：

```
class BusinessAreaToTeams(models.Model):

    group_id = models.DecimalField(max_digits=65535, decimal_places=65535)
    team_id = models.DecimalField(max_digits=65535, decimal_places=65535)

    class Meta:
        db_table = 'businessgroup_to_teams' 
```

我没有查询“id”，也没有“id”的模型字段。有人可以解释我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:44:33.870

在这里你没有提到任何主键，所以 django 自动创建了一个主键名称 id。在这里，您可以像这样设置主键：

```
group_id = models.DecimalField(max_digits=65535, decimal_places=65535, primary_key=True) 
```

然后它将 group_id 作为主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:29:36.827

看起来您正在尝试使用`BusinessAreaToTeams`. 与其让 group_id 和 team_id 成为包含原始 ID 的 DecimalFields，不如定义

```
group = ForeignKey(BusinessGroup)
team = ForeignKey(BusinessTeam)  #  guessing the model name here 
```

这将在您的表中创建一个 group_id 和 team_id 字段，并允许您使用 django 的 QuerySets 轻松管理关系。请查看[Django 书的第 10 章，了解有关](http://www.djangobook.com/en/2.0/chapter10.html)该主题的介绍。

# java - Java 字符串连接 - 有没有更好的方法？

> ID：15545195
> 
> 赞同：1
> 
> 时间：2013-03-21T10:40:45.110
> 
> 标签：java, string, concatenation

只是一个快速的形式问题。在下面的代码中，是否有更好的方法来连接字符串（即我可以将 tmpError 设置为等于新字符串而不是添加它吗？）

```
public void validate () throws Exception {
    String tmpError = "";
    if(paramA == null) tmpError = tmpError + "paramA was not set";

    if(paramB == null) tmpError = tmpError + "paramB was not set";

    if(paramC == null) tmpError = tmpError + "paramC was not set";

    if(!tmpError.equalsIgnoreCase("")){
        tmpError = "error occured" + tmpError;
        throw new Exception(tmpError);
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:47:22.887

我总是建议使用 StringBuilder

像这样的东西：

```
public void validate() throws Exception {
    StringBuilder error = new StringBuilder();
    if(paramA == null)
        error.append("paramA was not set");

    if(paramB == null)
        error.append("paramB was not set");

    if(paramC == null)
        error.append("paramC was not set");

    if(error.length() > 0) {

        throw new Exception("error occured " + error.toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T10:42:14.693

使用 . 可以很容易地提高效率[`StringBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)。

由于 的不可变特性`String`，每次使用加法 ( `+`) 运算符进行字符串连接时，`String`都会分配一个新对象（使用 时也是如此`String.concat()`）。

`StringBuilder`保留一个内部字符数组，以便在该数组上进行连接操作，并且在调用其方法`String`时只分配一个对象。`toString()`使用它的`append()`方法将文本附加到字符串的末尾，并使用`insert()`偏移量 0 来附加文本。

但是，您还应该考虑可读性。Dasblinkenlight 在他的[回答](https://stackoverflow.com/a/15545243/851811)中提出了一个很好的观点。正如 Anthony 已经指出的那样，您还可以使用`+=`复合赋值运算符来增强可读性。

```
public void validate () throws Exception {
    StringBuilder tmpError = new StringBuilder();
    if(paramA == null) tmpError.append("paramA was not set");

    if(paramB == null) tmpError.append("paramB was not set");

    if(paramC == null) tmpError.append("paramC was not set");

    if(tmpError.length() > 0){
        tmpError.insert(0,"error occured");
        throw new Exception(tmpError.getString());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:50:48.093

Fastest way to concatenation two strings is concat function of String class.

```
public void validate () throws Exception {
    String tmpError = "";

    if(paramA == null) tmpError = tmpError.concat("paramA was not set");
    if(paramB == null) tmpError = tmpError.concat("paramB was not set");
    if(paramC == null) tmpError = tmpError.concat("paramC was not set");
    if(!tmpError.equalsIgnoreCase("")){
        tmpError = "error occured".concat(tmpError);
        throw new Exception(tmpError);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T11:23:46.803

您可能想要使用[Guava](https://code.google.com/p/guava-libraries/) [Preconditions](https://code.google.com/p/guava-libraries/wiki/PreconditionsExplained)而不是上述任何一种。然后你可以写这样的代码：

```
import static com.google.common.base.Preconditions.*;
...
public void doSomething(String strA, String strB) {
  checkNotNull(strA, "strA is missing");
  checkArgument(strB.length() >= 6, "strB is too short");
  ...
} 
```

如果检查失败，则`Exception`抛出一个。它可能不像您最初的解决方案那么简洁，但您的意图在语义上是显而易见的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T10:42:02.023

您可以使用`+=`（加法/连接和赋值）运算符：

```
if(paramA == null) tmpError += "paramA was not set"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T10:43:00.100

This is not efficient, because with all three params missing you will create four string objects. You would be better off appending to a single [`StringBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html) object.

However, this is error reporting code which gets executed only when your code detects a programming error. Efficiency does not matter much in situations like that, because they are not supposed to happen in the first place. Use whatever you believe to be easier to understand.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-21T10:43:10.670

Do it like this:

```
public void validate () throws Exception {
    String tmpError = "";
    if(paramA == null) tmpError += "paramA was not set";

    if(paramB == null) tmpError += "paramB was not set";

    if(paramC == null) tmpError += "paramC was not set";

    if(!tmpError.equalsIgnoreCase("")){
        tmpError = "error occured" + tmpError;
        throw new Exception(tmpError);
    }
} 
```

Or alternatively, you can use a `StringBuilder` as pointed out by Xavi, but to me that would only make sense, if you were appending text inside some sort of loop.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T10:44:42.783

我会做如下的事情 public void validate () throws Exception {

```
public void validate () throws Exception {
    String tmpError = "";
    if(paramA == null) tmpError += "paramA was not set";
    if(paramB == null) tmpError += "paramB was not set";
    if(paramC == null) tmpError += "paramC was not set";

    if(!(tmpError.trim()).equalsIgnoreCase("")){
        tmpError = "error occured" + tmpError;
        throw new Exception(tmpError);
    }
} 
```

在检查变量是否为空之前，请参阅我已经使用`+=`并修剪了变量。`tmpError`

我认为在这里您不必担心太多，`StringBuilder`因为在这种情况下处理的内存不多。

如果您坚持使用 StringBuilder，那么您可以执行以下操作

```
public void validate () throws Exception {
    StringBuilder sb = new StringBuilder();
    if(paramA == null) sb.append("paramA was not set");
    if(paramB == null) sb.append("paramB was not set");
    if(paramC == null) sb.append("paramC was not set");

    if(!(sb.toString().trim()).equalsIgnoreCase("")){
        sb.Insert(0,"error occured");
        throw new Exception(sp.toString());
    }
} 
```

# java - Java 将字节写入串行端口 USB

> ID：15545196
> 
> 赞同：1
> 
> 时间：2013-03-21T10:40:45.740
> 
> 标签：java, byte, usbserial

我在下面有一个代码，我正在发送到串行 USB 端口......它正在工作，现在它没有！`akber()`如果发送了错误的字符串，函数就会死掉......

如果我发送`akber("1.0.0.0.1.5")`- 它可以完美运行，

如果我发送`akber("23.0.128.0.0.5")`- 它不起作用......

请参阅下面的代码

```
 public static byte[] akber(final String input) {
        StringTokenizer tokens = new StringTokenizer(input, ".");
        int numberOfArrays = tokens.countTokens();
        byte[][] byteArrays;
        byteArrays = new byte[numberOfArrays][4];
        int i = 0;
        int space = 0;
        while (tokens.hasMoreTokens()) {
            int x = Integer.valueOf(tokens.nextToken());
            if (x<256) { space++; } else { space+=2; }  
            byteArrays[i] = BigInteger.valueOf(x).toByteArray();
            i++;
        }
        final byte[] output = new byte[space];
        copySmallArraysToBigArray(byteArrays, output);
        return output;
    }

    public static void copySmallArraysToBigArray(final byte[][] smallArrays, final byte[] bigArray) {
        int currentOffset = 0;
        for (final byte[] currentArray : smallArrays) {
            System.arraycopy(currentArray, 0, bigArray, currentOffset, currentArray.length);
            currentOffset += currentArray.length;
        }
} 
```

* * *

从函数调用：

```
serialPort.writeBytes(akber(data)); 
```

我需要它来处理“数据”字符串中的任何数字组合，因此它将它们转换为正确的字节类型并写入端口……这不是我的代码，我不太明白，但是仍然需要修复它:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:57:09.030

更改此行：

```
if (x<256) { space++; } else { space+=2; } 
```

至

```
if (x<128) { space++; } else { space+=2; } 
```

我运行了你的代码，最初它会抛出一个 IndexOutOfBoundsException

```
akber("1.0.128.0.0.5"); 
```

所以检查你的代码，它没有在某处消耗异常，例如

```
try {
     exceptionThrowingMethod();
}      
catch(Exception e) {
} 
```

如果`exceptionThrowingMethod`抛出异常，代码将继续，就好像没有抛出异常一样（但`exceptionThrowingMethod`没有成功执行！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:53:59.650

实际上，虽然上面允许代码继续工作，但它并没有解决问题，因为 128 以上函数的字节值是负等值或什么的，并且发送了错误的值，所以 USB 硬件接收到不正确的字符并且不工作...通过查看stackoverflow上有关“Java 128字节”的其他帖子，发现它与128以上的字节码与其负等价物相同，因此通过反复试验解决了它，非常烦人 - 但改变了那条线至：

```
 if (x<128) { space++; } else { space+=2;
                int x2 = (x-128)*2;
                x=x-(x*2);
                if (x<-128) { x=x+x2; }
                } 
```

这似乎奏效了。如此快乐的日子，直到我发现另一个问题！对于希望将 127 以上的值转换为字节的人来说，这可能是一个简单的解决方案，而不是我看到但并不真正理解的更标准的 Java 解决方案，因为我更习惯于编写脚本。谢谢。

# c++ - Qt：QVBoxLayout 中的 Qlabel 和 QPushButton

> ID：15545198
> 
> 赞同：1
> 
> 时间：2013-03-21T10:40:50.620
> 
> 标签：c++, qt, layout

当我尝试将 QLabel 和 QPushbutton 对象添加到 QVBoxLayout 时，我遇到了问题。问题是，它在它们之间增加了太多的空间，就像图片中一样

![样本](../Images/4fed45fdf0aea4b3aacc76fb6e3fa44f.png)

这是创建布局和标签并添加它们的代码示例。我稍后会添加按钮，但这只是另一个 ->addWidget(button)。

```
jobbcimke= new QLabel(trUtf8("Jobb oldal"));
jobbkozepcimke= new QLabel(trUtf8("Jobb part"));
balcimke= new QLabel(trUtf8("Bal oldal"));
balkozepcimke=new QLabel(trUtf8("Bal part"));

jobbfelulet=new QVBoxLayout();
jobbkozepfelulet=new QVBoxLayout();
balkozepfelulet=new QVBoxLayout();
balfelulet=new QVBoxLayout();
osszefogo=new QHBoxLayout();

jobbfelulet->setAlignment(Qt::AlignRight);
jobbkozepfelulet->setAlignment(Qt::AlignRight);
balfelulet->setAlignment(Qt::AlignLeft);
balkozepfelulet->setAlignment(Qt::AlignLeft);

balfelulet->addWidget(balcimke);
balkozepfelulet->addWidget(balkozepcimke);
jobbfelulet->addWidget(jobbcimke);
jobbkozepfelulet->addWidget(jobbkozepcimke);

osszefogo->addLayout(balfelulet);
osszefogo->addLayout(balkozepfelulet);
osszefogo->addLayout(jobbkozepfelulet);
osszefogo->addLayout(jobbfelulet);

setLayout(osszefogo); 
```

我怎样才能删除它们之间的空间，或者有更好的方法来做到这一点？我已经为布局大小分配创建了标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:46:17.887

如果您深入研究文档，有一种`setSpacing(int x)`方法`QLayouts`可以让您编辑元素之间的间距，您可能还需要添加一些`QSpacerItems`以准确定位您想要的位置，或者使用该`setGeometry(QRect rect)`方法应用约束。

# coded-ui-tests - CUIT：VS 2010：我已经在 Windows 7 中录制了 CUIT 测试并在 Window XP 中播放它失败了

> ID：15545199
> 
> 赞同：0
> 
> 时间：2013-03-21T10:40:52.220
> 
> 标签：coded-ui-tests

我已经在 Windows 7 中录制了 CUIT 测试，但在 Window XP 中播放它失败了。

是记录XP和7的点击点差吗

如何解决这个限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-19T11:29:27.290

尝试识别控件然后单击。比录音好很多。

```
Mouse.Click(control); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:42:05.703

当我使用 Mouse.Click 时，我总是删除 Point() 参数。尝试删除该参数： Old: Mouse.Click(objectName, Point(12,34)); 新：Mouse.Click(objectName);

# font-face - 具有本地托管后备功能的 Google Font API

> ID：15545204
> 
> 赞同：3
> 
> 时间：2013-03-21T10:41:11.533
> 
> 标签：font-face, google-font-api

我正在使用为我正在处理的项目加载`Google Font API`字体（**CSS**，而不是字体加载器）。但是，我们不能保证使用网站和设备的用户将始终保持互联网连接。

我们正在使用**备用**方法从 CDN 加载 jQuery，但也想为字体实现备用方法。如果可以减少运行网站的设备上的负载，则最好从 Google Font API 加载字体，但如果没有互联网连接，我们希望回退到本地副本。我们有来自 FontSquirrel 的带有样式表等的本地副本，因此集成它是没有问题的。

我想知道的是，是否有办法检查字体是否已从 Google Font API 成功加载，以及是否不包含本地 CSS。

# php - PHP mail() 不显示 HTML

> ID：15545206
> 
> 赞同：2
> 
> 时间：2013-03-21T10:41:19.517
> 
> 标签：php, email, plesk

我们最近升级到了 Plesk Parallel Linux 服务器，它看起来好像 PHP 设置忽略了标题！电子邮件接收良好，但*显示*HTML 标记。

该`phpInfo()`文件可以在这里查看：[https ://www.pressgofer.com/phpInfo.php](https://www.pressgofer.com/phpInfo.php)

PHP 本身应该没问题，但无论如何都将它包含在此处。

**PHP 邮件代码**

```
$email = "example@example.com";
$message = "<h1 style='font-family:Helvetica,Arial;font-size:17px'>Your account has a password reset request</h1>";

$headers = "From: noreply@pressgofer.com \r\n";
$headers .= "Reply-To:  noreply@pressgofer.com \r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

mail($email, "Reset password notification", $message, $headers); 
```

非常感谢，尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:49:31.627

你的`phpinfo`节目`mail.add_x_header`是关闭的。你需要打开它

要启用`X-Mail`标头，`mail.add_x_header`请在您的`php.ini`

```
<?php
$to = "yourplace@somewhere.com";
$subject = "My HTML email test.";
$headers = "From: sinha.ksaurabh@gmail.com\r\n";
$headers .= "Reply-To: sinha.ksaurabh@gmail.com\r\n";
$headers .= "Return-Path: sinha.ksaurabh@gmail.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$message = "<html><body>";
$message .= "<h1> This is a test </h1>";
$message .= "</body></html>";

if ( mail($to,$subject,$message,$headers) ) {
   echo "The email has been sent!";
   } else {
   echo "The email has failed!";
   }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:39:29.317

[从 php 发送邮件：标题被解释为正文？](https://stackoverflow.com/questions/4415786/sending-mail-from-php-headers-are-interpreted-as-body)

问题与 MIME 类型和服务器解释相关 -`\r`不需要。

# c# - 图像调整大小类 Visual c# 中的错误

> ID：15545209
> 
> 赞同：0
> 
> 时间：2013-03-21T10:41:33.113
> 
> 标签：c#, image, resize, puzzle

我正在尝试在 microsoft visual c# 2010 中制作益智游戏，当我尝试调整图像大小以适合 groupbox 时，出现以下错误：

```
error CS1502: The best overloaded method match for
'System.Drawing.Graphics.DrawImage(System.Drawing.Image,
System.Drawing.PointF)' has some invalid arguments

error CS1503: Argument 1: cannot convert from 'PuzzleImage.Form1' to
'System.Drawing.Image'

error CS1503: Argument 2: cannot convert from
'System.Drawing.Rectangle' to 'System.Drawing.PointF' 
```

**注意**：错误在代码的第二部分，在私有 Bitmap CreateBitmapImage(Form1 image) 类中。

这是我的代码：

```
 OpenFileDialog openFileDialog = null;
    Form1 image;
    PictureBox picBoxWhole = null;

    private void buttonImageBrowse_Click(object sender, EventArgs e)
    {
        if (openFileDialog == null)
            openFileDialog = new OpenFileDialog();
        if (openFileDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {

            System.Drawing.Image image = new Bitmap(openFileDialog.FileName); 
                if(picBoxWhole== null)
                {
                    picBoxWhole= new PictureBox();
                    picBoxWhole.Height = groupboxPuzzle.Height;
                    picBoxWhole.Width =groupboxPuzzle.Width;
                    groupboxPuzzle.Controls.Add(picBoxWhole);
                }
            picBoxWhole.Image= image;
        }
    }

    private Bitmap CreateBitmapImage(Form1 image)
    {
        Bitmap objBmpImage = new Bitmap(groupboxPuzzle.Width, groupboxPuzzle.Height);
        Graphics objGraphics = Graphics.FromImage(objBmpImage);
        objGraphics.Clear(Color.White);
        int x = groupboxPuzzle.Width;
        int y = groupboxPuzzle.Height;
        objGraphics.DrawImage(image,  new Rectangle(0,0, x, y));
        objGraphics.Flush();

        return objBmpImage;

    } 
```

这是我目前正在关注[的教程。](http://jetgamedev.blogspot.ro/2012/05/lesson-0229-c-lab-4-create-image-puzzle.html)也有人说 77 步的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:46:57.083

为什么要`Form`在函数中传输参数`CreateBitmapImage()`？它在那篇教程中说接受`Image`类型参数。

```
private Bitmap CreateBitmapImage(Image image) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:49:54.257

你需要改变

```
 Form1 image; to  Image image; //only if you need this :) 
```

和

```
private Bitmap CreateBitmapImage(Form1 image) to private Bitmap CreateBitmapImage(Image image) 
```

# android - 当手机方向改变时，EditText 如何保留其值而不是 textview？

> ID：15545211
> 
> 赞同：11
> 
> 时间：2013-03-21T10:41:39.613
> 
> 标签：android, android-edittext, textview, android-orientation

Edittext 有什么特别之处，它可以保留值，但不能保留 Textview 和其他一些小部件，我们必须为它们使用 onSavedInstance() 方法。

EditText 背后的魔力是什么，它可以保留这些值？

如果有人能说出它在内部是如何工作的。

<----更新---->

它是如何在内部工作的，请指出解释这种情况的那部分代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-01T02:46:30.353

> EditText 背后的魔力是什么，它可以保留这些值？它是如何在内部工作的，请指出解释这种情况的那部分代码。

带来差异的是可选属性。[TextView.onSaveInstanceState](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.4.4_r1/android/widget/TextView.java?av=f#3482)中的以下`if`条件负责处理它。

```
@Override
public Parcelable onSaveInstanceState() {
    Parcelable superState = super.onSaveInstanceState();

    // Save state if we are forced to
    boolean save = mFreezesText;
    int start = 0;
    int end = 0;

    if (mText != null) {
        start = getSelectionStart();
        end = getSelectionEnd();
        if (start >= 0 || end >= 0) {
            // Or save state if there is a selection
            save = true;
        }
    }

    ...
} 
```

默认情况下`TextView`无法选择。因此`getSelectionStart()`并`getSelectionEnd()`返回`-1`，`save`变量持有错误值。要使其在方向更改时保留其内容，请将属性[textIsSelectable](http://developer.android.com/reference/android/R.styleable.html#TextView_textIsSelectable)设置为 true。

由于`EditText`默认情况下是可选的，`getSelectionStart()`并且`getSelectionEnd()`总是返回值> = 0，因此`save`变量保持真值并且内容被保存。

注意：默认情况下[freezesText](http://developer.android.com/reference/android/widget/TextView.html#attr_android:freezesText)是禁用的。因此`mFreezesText`价值是假的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-07T04:03:33.493

默认情况下，EditText 视图保存其状态 - 这是通过在代码中设置标志来告诉视图在视图不可见或失去焦点时保存状态来完成的。旋转设备后，文本会自动保存和恢复。通过将 android:saveEnabled 属性设置为 false，可以在 XML 布局文件中禁用 EditText 视图状态的自动保存：

```
 android:saveEnabled="false" 
```

或以编程方式调用`view.setSaveEnabled(false)`.

saveEnabled 控制是否启用保存此视图的状态（即是否会调用其 onSaveInstanceState() 方法）。请注意，即使启用了冻结，视图仍然必须分配一个 id（通过 setId()）才能保存其状态。该标志只能禁用该视图的保存；任何子视图可能仍保存其状态。saveEnabled 属性是 android View - [View Code](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.2_r1/android/view/View.java)的一部分。这是代码的相关部分：

```
public boolean isSaveEnabled() {
        return (mViewFlags & SAVE_DISABLED_MASK) != SAVE_DISABLED;
    } 
```

...

```
 public void setSaveEnabled(boolean enabled) {
        setFlags(enabled ? 0 : SAVE_DISABLED, SAVE_DISABLED_MASK);
    } 
```

...

```
 void setFlags(int flags, int mask) {
        int old = mViewFlags;
        mViewFlags = (mViewFlags & ~mask) | (flags & mask);

        int changed = mViewFlags ^ old;
        if (changed == 0) {
            return;
        }
        int privateFlags = mPrivateFlags;

        /* Check if the FOCUSABLE bit has changed */
        if (((changed & FOCUSABLE_MASK) != 0) &&
                ((privateFlags & HAS_BOUNDS) !=0)) {
            if (((old & FOCUSABLE_MASK) == FOCUSABLE)
                    && ((privateFlags & FOCUSED) != 0)) {
                /* Give up focus if we are no longer focusable */
                clearFocus();
            } else if (((old & FOCUSABLE_MASK) == NOT_FOCUSABLE)
                    && ((privateFlags & FOCUSED) == 0)) {
                /*
                 * Tell the view system that we are now available to take focus
                 * if no one else already has it.
                 */
                if (mParent != null) mParent.focusableViewAvailable(this);
            }
        } 
```

……

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T11:02:20.840

引用这篇文章：[https ://tekeye.uk/android/examples/saving-activity-state](https://tekeye.uk/android/examples/saving-activity-state)

“将设备从纵向切换到横向会导致 Android 停止并重新启动 Activity，从而使 Activity 有机会为不同尺寸重新绘制屏幕。通过停止和启动 Activity，如果输入不断丢失，用户会很恼火。Android活动有一对名为 onSaveInstanceState(Bundle) 和 onRestoreInstanceState(Bundle) 的方法，输入视图自动使用它们来保存它们的数据。这些方法只有在可以识别获取数据的视图时才有效，因此需要 EditText (和所有屏幕项目）都有一个 id。一个好处是这个方法对可以在一个活动中被覆盖，这样与输入字段无关的状态变量也可以被保存和恢复。

从编辑文本中删除 id 并尝试:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-07T05:33:40.523

试试这个为你的 textview 我认为它可以帮助你

```
<TextView 
 ... 
 android:freezesText="true" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-07T08:58:56.593

Android View 类具有受保护的方法

```
protected Parcelable onSaveInstanceState ()
protected void onRestoreInstanceState (Parcelable state) 
```

因此任何视图都可以覆盖这些方法并与它们一起保存视图的状态信息。

TextView 扩展了 View 类，并在其中实现了受保护的 Parcelable onSaveInstanceState() 和受保护的 void onRestoreInstanceState（Parcelable 状态）。

让我们看看 onSaveInstanceState() 的实现

```
@Override
public Parcelable onSaveInstanceState()
{
    Parcelable superState = super.onSaveInstanceState();

    // Save state if we are forced to
    boolean save = mFreezesText;
    int start = 0;
    int end = 0;

    if (mText != null) 
    {
        start = getSelectionStart();
        end = getSelectionEnd();
        if (start >= 0 || end >= 0)
        {
            // Or save state if there is a selection
            save = true;
        }
    }
    ...
} 
```

1.  如您所见，保存功能取决于单个标志“保存”，因此如果用户明确指定 mFreezesText = true 那么它将保存文本
2.  另一种可能性，如果有选择光标，那么它至少会返回 getSelectionStart() = 0 而不是 -1 这将导致 TextView 使 save=true 保存 TextView 的状态，这就是 EditText 发生的事情，因为 EditText 有选择光标并且它确实扩展文本视图。

# ios - 在 iTunes Connect 中等待上传时编辑排行榜和成就

> ID：15545212
> 
> 赞同：1
> 
> 时间：2013-03-21T10:41:40.260
> 
> 标签：ios, app-store-connect, publish

我在商店里已经有一个 iOS 应用程序，它是 V1.0。我在商店中添加了一个新版本 1.1 并将其设为“等待上传”。错误地，我忘记在我的新版本 1.1 中添加 Game Center 中的排行榜和成就。但在我的旧版本 V1.0 中也是如此。

有人可以告诉我他们是否允许我在上传二进制文件后将排行榜和成就更新到我的新版本？或者对于此类问题还有其他可用的替代方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:45:11.610

如果 GameCenter 代码已在 1.0 版中添加并在 iTunesConenct 中为 1.0 选择，则无需为 1.1 版选择相同的代码。有用。

只有在 1.1 版本中添加时才需要选择。

![在此处输入图像描述](../Images/0b53dbc5ae7d177317cbf9c0fa5c2651.png)

![在此处输入图像描述](../Images/b79e2ba42b03ef6462eabfe78a3b7148.png)

# android - Android：将 savedInstanceState 与片段一起使用

> ID：15545214
> 
> 赞同：3
> 
> 时间：2013-03-21T10:41:43.210
> 
> 标签：android, bundle, fragment

对第一次创建片段然后重新附加到活动时在片段的回调中获得的 savedInstanceState 包有疑问。

所以我使用 setRetainInstance(true)，因此片段不应该被破坏，而只是在活动被破坏时从活动中分离出来，然后在活动被重新创建时重新连接回来，例如配置更改。

所以，因为使用这个 setRetainInstance(true) 这将导致 savedInstanceState 包在片段的回调中**总是**为空，例如：`onActivityCreated()`等`onCreate()`。

到目前为止一切都很好，现在我从一些用户那里得到了一些崩溃（一个非常小的数字），这是由于这个 savedInstanceState 在片段上不是 null 引起的。

所以， onActivityCreated() 回调正在做这样的事情：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        adapter = new CustomAdapter(getActivity(), getListView(), data, savedInstanceState);
        setListAdapter(adapter);
        setupEmptyListView();
        getListView().setOnScrollListener(this);
    } 
```

CustomAdapter 在某个时候从其构造函数中调用了一个`loadInstanceState()`完成其工作的方法，代码如下：

```
@Override
    public void loadInstanceState(Bundle savedInstanceState) {
        if (savedInstanceState != null) {
         //do some stuff which is causing a crash
        }
    } 
```

现在我的问题是，当我传递的 savedInstanceState 应该始终为空时，如何才能进入该 if 语句。

现在的**问题**：

**Android 是否保证** `setRetainInstance(true)` **在片段上使用时，传递给回调的 savedInstanceState 包总是为空？**

谢谢你们的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:11:59.423

在这种情况下，我没有发现任何提及 savedInstanceState 捆绑包必须为空。[官方文档](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)说：

> 公共无效 setRetainInstance（布尔保留）
> 
> 控制是否在 Activity 重新创建期间（例如从配置更改）保留片段实例。这只能与不在后台堆栈中的片段一起使用。如果设置，片段生命周期将在重新创建活动时略有不同：
> 
> onDestroy() 将不会被调用（但 onDetach() 仍然会被调用，因为片段正在与其当前活动分离）。
> 
> **onCreate(Bundle) 不会被调用**，因为片段没有被重新创建。
> 
> onAttach(Activity) 和**onActivityCreated(Bundle) 仍将被调用。**

恕我直言，这是主要区别 - 改变了生命周期。

# javascript - 有没有办法在 Firefox 扩展中对控件进行分组？

> ID：15545215
> 
> 赞同：0
> 
> 时间：2013-03-21T10:41:44.677
> 
> 标签：javascript, firefox, xul

我来自 .net 世界，所以我知道它可以在那里完成，但我正在为 Firefox 制作工具栏，我希望它在单击一个按钮并显示时显示一组控件（某种形式）当我单击另一个按钮时，另一组。

问题是是否有一个选项可以对一些控件进行分组并隐藏它们，然后当单击按钮时，我只需要更改组的可见性或另一个选项，即仅在之后使用 javascript 添加这些控件按钮被点击？

我再次知道它可以使用 .net 轻松完成，但由于我是工具栏编程的新手，并且在网络上没有看到任何与此相关的内容，所以我在这里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:05:48.697

我认为基本原则是相同的，您只需在要分组的控件集周围添加一个“分组”元素。对于工具栏，您可以使用工具栏项 + vbox 的组合，以及其中的新工具箱。并且只需使用 javascript 通过 id 获取分组元素并隐藏/显示它。

就像是：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<toolbox>
  <toolbar>
    <toolbaritem>
      <hbox id="tbgroup1" hidden="true">
        <toolbarbutton label="button"/>
        <toolbarbutton label="button"/>
        <toolbarbutton label="button"/>
      </hbox>
      <hbox id="tbgroup2">
        <toolbarbutton label="button"/>
        <toolbarbutton label="button"/>
        <toolbarbutton label="button"/>
      </hbox>
    </toolbaritem>
   </toolbox>
</window> 
```

# android - 如何获取其他/邻近 GSM 运营商的名称（在我的位置）

> ID：15545217
> 
> 赞同：2
> 
> 时间：2013-03-21T10:41:56.547
> 
> 标签：android

我试图通过以下代码获取我所在位置可用的所有 GSM 网络的列表 -

```
 TelephonyManager telManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    telManager.listen(gsmListener, PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

    List<NeighboringCellInfo> cellInfo = telManager.getNeighboringCellInfo();
    StringBuilder sb =new StringBuilder("");
    for(NeighboringCellInfo nInfo : cellInfo) {
        sb.append("\ncid: "+ nInfo.getCid()+" lac: "+ nInfo.getLac()+" n/w type: "+ nInfo.getNetworkType()+" psc: "+ nInfo.getPsc()+" rssi: "+ nInfo.getRssi()+"\n");
    }
    String disp = "Connected to: "+telManager.getNetworkOperatorName()+"||"+telManager.getSimOperatorName() +"\nrssi: "+strength+" || "+telManager.getLine1Number()+"\n\nNeighbours "+cellInfo.size()+sb.toString();

   This gives me the cell id, LAC, network type, PSC, RSSI of neighbouring cell.

   How can i get the network operator's name of neighbouring cell. 
```

# php - php读取发布的数组

> ID：15545218
> 
> 赞同：0
> 
> 时间：2013-03-21T10:41:58.087
> 
> 标签：php, wordpress, http-post

这可能是一个简单的问题，但我已经尝试了几个小时而没有得到任何结果：

我正在定制一个开源 WordPress 插件。当我发布我的自定义 PHP 文件和变量时`var_dump()`，`$_POST`我得到以下信息：

```
array(7) { 
    ["hellomail"] => array(3) { 
        ["email"] => array(7) { 
            ["subject"]       => string(4) "asda" 
            ["from_name"]     => string(14) "Myplugin" 
            ["from_email"]    => string(12) "myplugin@myplugin.com" 
            ["replyto_name"]  => string(14) "Test" 
            ["replyto_email"] => string(12) "myplugin@myplugin.com" 
            ["params"]        => array(1) { 
                ["schedule"] => array(2) { 
                    ["day"] => string(10) "2013/03/21" 
                    ["time"] => string(8) "00:00:00" 
                } 
            } 
            ["email_id"] => string(2) "25" 
        } 
        ["campaign_list"] => array(1) { 
            ["list_id"] => array(1) { 
                [0] => string(1) "4" 
            } 
        } 
        ["campaign"] => array(1) { 
            ["campaign_id"] => string(2) "24" 
        } 
    } 
    ["receiver-preview"] => string(10) "myplugin@myplugin.com" 
    ["_wpnonce"]         => string(10) "999938595d" 
    ["_wp_http_referer"] => string(66) "/wp-admin/admin.php?page=testpage&action=editDetails&id=25" 
    ["action"]           => string(8) "savelast" 
    ["roll_redir"]       => string(0) "" 
    ["submit-send"]      => string(6) "Senden" 
} 
```

我需要的是`["campaign_id"]`和`["list_id"]`。我真的不知道如何获得这些值，有没有简单的方法来访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:56:51.137

php 世界 =)

```
echo $_POST["hellomail"]["campaign_list"]["list_id"]; // to get array
echo $_POST["hellomail"]["campaign_list"]["list_id"][0]; // to get first
echo $_POST["hellomail"]["campaign"]["campaign_id"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:57:05.537

这是数组的外观：

```
array(7) { 
    ["hellomail"]=> array(3) { 
        ["email"]=> array(7) { 
            ["subject"]=> string(4) "asda" 
            ["from_name"]=> string(14) "Myplugin" 
            ["from_email"]=> string(12) "myplugin@myplugin.com" 
            ["replyto_name"]=> string(14) "Test" 
            ["replyto_email"]=> string(12) "myplugin@myplugin.com" 
            ["params"]=> array(1) { 
                ["schedule"]=> array(2) { 
                    ["day"]=> string(10) "2013/03/21" 
                    ["time"]=> string(8) "00:00:00" 
                } 
            } 
            ["email_id"]=> string(2) "25" 
        } 
        ["campaign_list"]=> array(1) { 
            ["list_id"]=> array(1) { 
                [0]=> string(1) "4" 
            } 
        } 
        ["campaign"]=> array(1) { 
            ["campaign_id"]=> string(2) "24" 
        } 
    } 
    ["receiver-preview"]=> string(10) "myplugin@myplugin.com" 
    ["_wpnonce"]=> string(10) "999938595d" 
    ["_wp_http_referer"]=> string(66) "/wp-admin/admin.php?page=testpage&action=editDetails&id=25" 
    ["action"]=> string(8) "savelast" 
    ["roll_redir"]=> string(0) "" 
    ["submit-send"]=> string(6) "Senden" 
} 
```

尝试下面的代码片段来获取您正在寻找的特定数组元素。

```
echo $_POST["hellomail"]["campaign_list"]["list_id"][0]."<br/>"
    .$_POST["hellomail"]["campaign"]["campaign_id"]; 
```

# android - 如何比较两个日期和时间并在Android中获取日、月、小时、分钟？

> ID：15545220
> 
> 赞同：1
> 
> 时间：2013-03-21T10:42:12.300
> 
> 标签：android, date, android-date

我有这种类型的字符串格式的日期 01-18-2013 06:43:35 现在，我想将此日期与当前日期和时间进行比较，并得到日、月、小时、分钟、.. 我搜索了这个[链接](http://joda-time.sourceforge.net/)但没有'没有得到任何解决方案...请分享一些解决方案..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:50:51.207

This might help, [http://developer.android.com/reference/java/text/DateFormat.html](http://developer.android.com/reference/java/text/DateFormat.html)

You can parse the Date from string using

```
DateFormat df = DateFormat.getDateInstance();
myDate = df.parse(myString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:52:21.893

If I get your question, you would like to Compare a `Date` object with the current date..

Let's say that 'date' is the `Date` object you want to compare with the current date: Why don't you just do something like `date.after(new Date())` or `date.before(new Date())` as suggested form the [android doc](http://developer.android.com/reference/java/util/Date.html)?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:33:08.727

这可以帮助您以毫秒为单位计算不同的日期时间

```
try{
            Calendar calender = Calendar.getInstance();
            Calendar calDb = Calendar.getInstance();
            Calendar matchd = Calendar.getInstance();

            mYear = calender.get(Calendar.YEAR);
            mMonth = calender.get(Calendar.MONTH);
            mDay = calender.get(Calendar.DAY_OF_MONTH);

            mendYear = calDb.get(Calendar.YEAR);
            mendMonth = calDb.get(Calendar.MONTH);
            mendDay = calDb.get(Calendar.DAY_OF_MONTH);    
                       // Here you can change day values        
                    calDb.set(Calendar.DAY_OF_MONTH, mDay-1);

            strbeforedate = mDateFormat.format(calDb.getTime());
            curentdate = mDateFormat.format(calender.getTime());

            calDb.setTime(mDateFormat.parse(strbeforedate));
            calender.setTime(mDateFormat.parse(curentdate));

            String mydate = "2013.03.14 03:11";
            String mdatetime = "";

            deletepath =  new ArrayList<String>();          
            for(int i=0;i<result.length;i++){

                try{
                    // here your matching goes and pass date here 

                     matchd.setTime(mDateFormat.parse(mdatetime));
                     long diff = calDb.getTimeInMillis() - calender.getTimeInMillis();
                     long matchdiff = matchd.getTimeInMillis() - calender.getTimeInMillis();
                        if(diff < matchdiff){

                                     // do your work here
                        }else{

                         // do your else work here

                        }
                }catch(Exception e){
                    e.printStackTrace();
                }
            }

        }

        }catch(Exception e){
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T10:56:53.797

你可以得到UTC

```
new SimpleDateFormat("MM-dd-yyyy HH:mm:ss").parse("01-18-2013 06:43:35").getTime(); 
```

然后将结果与

```
System.currentTimeMillis(); 
```

# jquery - 无法读取未定义的属性“左侧”

> ID：15545226
> 
> 赞同：10
> 
> 时间：2013-03-21T10:42:22.893
> 
> 标签：jquery, web, scroll, scrollto

试图弄清楚为什么 chrome 会抛出错误

> “未捕获的类型错误：无法读取未定义的属性‘左’”

虽然`#explorenav`效果很好，但`#experiencenav`似乎不起作用。我错过了什么吗？

JS代码：

```
$('.nav li#explorenav a').click(function(){
    $('body').animate({scrollLeft: $("#explore").offset().left-15}, 1000, function(){
        $(this).parent().addClass('active');
    });

    return false;
});

$('.nav li#experiencenav a').click(function(){
    $('body').animate({scrollLeft: $("#experience").offset().left-15}, 1200, function(){
        $(this).parent().addClass('active');
    });

    return false;
}); 
```

HTML 代码：

```
<div id="explore">
    <div class="Features">
        <div class="Feature1" title="The Active Park Assist feature can find parking spaces for you and help manoeuvre your car into them, as if by magic.">
            &nbsp;
        </div>
        <div class="Feature2" title="The luxurious and athletic Interior has sports front seats with red stitching and belts, making you wish the journey never ended">
            &nbsp;
        </div>
        <div class="Feature3" title="With Collision Prevention Assist and Attention Assist you can rest assured that you’ll get to wherever you’re going, safely.">
            &nbsp;
        </div>
    </div>
</div>

<div id="experience">
    <div class="Video">
        <iframe id="Youtube" width="650" height="366" src="http://www.youtube.com/embed/XS6S8qSMvBE?wmode=opaque" frameborder="0" wmode="transparent" allowfullscreen  ALLOWTRANSPARENCY="true"></iframe>

        <button class="prev">&nbsp;</button>
        <button class="next">&nbsp;</button>
        <div class="VideoControls">
            <ul class="Vid">
                <li id="01" class="Video1" onClick="_gaq.push(['_trackEvent', 'Pulse', 'onClick', 'ENGLISH']);">
                    &nbsp;
                </li>
                <li id="02" class="Video2" onClick="_gaq.push(['_trackEvent', 'Performance', 'onClick', 'ENGLISH']);">
                    &nbsp;
                </li>
                <li id="03" class="Video3" onClick="_gaq.push(['_trackEvent', 'Parking Assist', 'onClick', 'ENGLISH']);">
                    &nbsp;
                </li>
                <li id="04" class="Video4" onClick="_gaq.push(['_trackEvent', 'Flow', 'onClick', 'ENGLISH']);">
                    &nbsp;
                </li>
                <li id="05" class="Video5" onClick="_gaq.push(['_trackEvent', 'Spike', 'onClick', 'ENGLISH']);">
                    &nbsp;
                </li>
                <li id="06" class="Video6" onClick="_gaq.push(['_trackEvent', 'Product film', 'onClick', 'ENGLISH']);">
                    &nbsp;
                </li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:19:43.127

在您的现场脚本中，您有以下代码：

```
$('.nav li#experiencenav a').click(function(){
     $('body').animate({scrollLeft: $("#experience .EmptyPage").offset().left-20}, 1200, function(){
      $(this).parent().addClass('active');
      $('li#homenav, li#discovernav, li#explorenav, li#downloadnav').removeClass('active');
     });
      return false;
    }); 
```

它找不到元素`$("#experience .EmptyPage")`。但是你的 div 里面有 div`#explore`有这个 div：

```
<div class="EmptyPage">
 &nbsp;
</div> 
```

这就是为什么您的代码适用于***explore link***，但不适用于其他链接。

# php - 使用比较函数基于子数组值对数组进行多阶段排序

> ID：15545230
> 
> 赞同：0
> 
> 时间：2013-03-21T10:42:32.947
> 
> 标签：php, multidimensional-array, comparison, sorting, usort

我处于一个棘手的情况，我需要按位于其子数组中的值对数组进行排序，但我需要暂存结果。换句话说，排序应该由一个或多个优先级来完成。

问题是整个排序过程是由用户配置的，所以硬编码任何东西都不是一种选择。我需要保持灵活性，但我通过提供预定义的排序功能来限制选项。

让我们开始吧：

在此示例中，我们将对打印格式列表进行排序。我们将只使用两个可能的属性。

用户在 INI 文件中配置排序过程：

```
sort_priority="special_deal:desc,ratio:asc" 
```

描述：

```
// special_deal -> This is a binary flag - if set to 1 the print format is a special deal and should therefore be presented first
// ratio -> This is the ratio of the given print format (i.e. 0.75 (that's a 3:4 format) or 1 (that's a 1:1 format)) 
```

在代码中，配置被分解：

```
$toSort=array(<OUR ARRAY WE WANT TO SORT>);

$sortKeys=explode(',', 'special_deal:desc,ratio:asc');

// we then iterate through the defined keys
foreach($sortKeys as $sortKey){

     // we put together the name of the predefined sort function
     if(strstr($sortKey, ':')) {
         list($skey,$sdir)=explode(':', $sortKey);
         $methodName='sort_by_'.$skey.'_'.$sdir;
     } else $methodName='sort_by_'.$sortKey.'_asc';

     // so $methodName can (for instance) be: sort_by_special_deal_asc
     // or: sort_by_ratio_desc

     // if the sort function is available, we apply it
     if(is_callable($methodName))
         usort($toSort, $methodName);
} 
```

我们的排序函数如下所示：

```
function sort_by_special_deal_asc($a, $b){
    return ($a['specialDeal']!=$b['specialDeal']);
}
function sort_by_special_deal_desc($a, $b){
    return ($a['specialDeal']==$b['specialDeal']);
}
function sort_by_ratio_asc($a, $b){
    if($a==$b) return 0;
    return $a['ratio']<$b['ratio'] ? -1 : 1;
}
function sort_by_ratio_desc($a, $b){
    if($a==$b) return 0;
    return $a['ratio']>$b['ratio'] ? -1 : 1;
} 
```

**关于手头的问题...**

上述解决方案工作正常，但仅适用于最后应用的排序功能。因此，当我们遍历要应用的排序函数时，每次调用*usort()*都会导致数组中所有元素的重新排序。问题是，我们希望分阶段（或堆叠）排序，所以在这个给定的例子中，这实际上意味着：

```
1.) Sort all entries so that the ones that are a special deal come first
2.) Then sort all entries by their ratio 
```

以下是有关数据外观的示例：

```
$formats=array(
     array(
         'format' => '30x40',
         'ratio' => 0.75
     ),
     array(
         'format' => '60x90',
         'ratio' => 0.667
     ),
     array(
         'format' => '50x50',
         'ratio' => 1
     ),
     array(
         'format' => '60x80',
         'ratio' => 0.75,
         'specialDeal' => 1
     )
); 
```

考虑到上述排序特征，期望的结果**应该**是：

```
$formats=array(
     array(
         'format' => '60x80',
         'ratio' => 0.75,
         'specialDeal' => 1
     ),
     array(
         'format' => '60x90',
         'ratio' => 0.667
     ),
     array(
         'format' => '30x40',
         'ratio' => 0.75
     ),
     array(
         'format' => '50x50',
         'ratio' => 1
     ),
); 
```

我希望这能正确解释这个问题。

有人可以在这里指出我正确的方向吗？我怎样才能通过使用*usort()*动态地实现这一点？

谢谢你！

编辑：请注意 - 我的比较功能（见上文）有问题。有两个问题：

1.) 返回布尔值是错误的 - 返回 -1、0 或 1 是要走的路。2.) 将 $a 和 $b 作为完整数组/对象进行比较是不正确的 - 正确的是比较这些数组中的特定值（函数应该比较的值）。

有关详细信息，请参阅接受的答案和相应的评论部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:55:54.780

通过解析用户的排序偏好来构建一个这样的数组：

```
$sortMethods = array('sort_by_ratio_desc', 'sort_by_special_deal_asc'); 
```

然后使用这样的比较进行排序：

```
usort($array, function ($a, $b) use ($sortMethods) {
    foreach ($sortMethods as $method) {
        $result = $method($a, $b);
        if ($result != 0) {
            break;
        }
    }
    return $result;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:01:33.250

查看 php.net 手册中对 uasort 的注释 - [http://php.net/manual/en/function.uasort.php](http://php.net/manual/en/function.uasort.php)

特别是 dholmes 发布的动态回调。

# php - 从 Javascript->HTML->PHP 传递文本

> ID：15545234
> 
> 赞同：1
> 
> 时间：2013-03-21T10:42:38.810
> 
> 标签：php, javascript, html

我有一个像这样的 JS 变量

```
totalItems = 'TOTAL ITEMS';
        if(rck > 0)
                totalItems = totalItems+" \nRack(s) "+rck;

        if(totflat > 0)
                totalItems = totalItems+" \nFlat Shelf(s) "+totflat;

        if(db > 0)
                totalItems = totalItems+" \nDisplay bar(s) "+db;

        if(totslan > 0)
                totalItems = totalItems+" \nSlanted shelf(s) "+totslan;
document.getElementById('totalitems').innerHTML = totalItems; 
```

这`totalitems`是我`<div>`的 HTML 格式的 id。文本在一行中打印，但我希望它们在每一行中

```
TOTALITEMS
Rack(s) 2
Flat Shelf(s) 2
... 
```

这该怎么做？我的另一个问题是我需要以相同的格式将该文本发送到我的 PHP 文件。如何将文本从 div 发布到 PHP？有什么建议？？？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:44:28.360

只需使用`<br>`而不是`\n`. 为了将它们传递给 PHP 脚本，您有多种方法。首先，您可以创建一个查询以使用 JQuery 发送它们，例如：

```
data = "Rack="+rck+"&Flat_shelf="+totalFlat+"&db="+db+"&totslan="+totslan; //These are your variables that you want to send to PHP script
var saveData = $.ajax({
      type: 'POST'
      url: "page.php",
      data: data,
      dataType: "text",
      success: function(resultData) { alert("sent") }
});
saveData.error(function() { alert("Something went wrong"); }); 
```

其次，您可以创建隐藏的输入元素，并将它们与表单一起发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:49:32.447

第 1 部分：在您的代码中替换`\n`为。`<br/>`

第 2 部分：需要更多信息：

*   你在服务器端做什么？（我在问，因为在大多数情况下，您最好简单地发送值并在服务器端以相同格式重建它。这避免了服务器和客户端逻辑之间的依赖关系）
*   您使用的是 jQuery 还是其他一些 Javascript 库？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:51:10.797

要在您的潜水中显示它，请使用其他答案中建议的`<br>`而不是。`\n`

然后使用 XmlHttpRequest（又名 AJAX 请求）将其发送到您的 PHP 服务器。在这种情况下，发送带有 的文本`\n`应该不是问题。

# svn - 将 svn 存储库文件推送到服务器

> ID：15545238
> 
> 赞同：1
> 
> 时间：2013-03-21T10:42:53.717
> 
> 标签：svn, tortoisesvn

目前我正在使用tortoisesvn。我的存储库位于 Windows 服务器（登台服务器）上。当连接到服务器的客户端进行更改时，它（存储库）会更新。我想更新对我的 LIVE 服务器（linux）的更改。我的 LIVE 服务器上没有颠覆设置。我只是想将文件从 Windows 服务器 Tortoisesvn 存储库复制到 LIVE 服务器（linux）。我尝试手动复制文件，但在存储库文件夹中找不到我的文件。有没有办法获取文件并传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:43:35.227

这在[Subversion 常见问题解答中得到解决](http://subversion.apache.org/faq.html#website-auto-update)

或者，检查您的实时服务器上的工作副本，登录并根据需要运行 svn update。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T01:36:07.817

这确实不是一个理想的解决方案，但您可以编写一个 bash 脚本，每隔 10 分钟左右重复调用 svn -update 。然后您只需将其添加到默认运行级别（取决于您使用的发行版）

# ios - 不同格式的 NSJSONSerialization 数据

> ID：15545250
> 
> 赞同：0
> 
> 时间：2013-03-21T10:43:14.557
> 
> 标签：ios, json, parsing, parse-platform, nsjsonserialization

我使用 Parse.com 作为我的应用程序的后端，我目前在那里存储数据。

数据是视频游戏机的列表。我能够输出它，但输出不是 JSON 数据，而是一个大的 NSMutableArray。

这是我的 viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString:@"https://api.parse.com/1/classes/Consoles"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    [request setURL:url];
    [request setHTTPMethod:@"GET"];
    [request setValue:@"APPLICATION_ID" forHTTPHeaderField:@"X-Parse-Application-Id"];
    [request setValue:@"REST_API_KEY" forHTTPHeaderField:@"X-Parse-REST-API-Key"];

    NSError *error;

    id listOfConsoles = [NSJSONSerialization JSONObjectWithData:[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil] options:NSJSONReadingMutableContainers error:&error];

    NSLog(@"The list: %@", listOfConsoles);
} 
```

输出：

```
The list: {
    results =     (
                {
            createdAt = "2013-03-21T07:26:04.149Z";
            name = PlayStation;
            objectId = vloIK0MZIA;
            updatedAt = "2013-03-21T07:26:04.149Z";
        },
                {
            createdAt = "2013-03-21T07:26:34.209Z";
            name = Wii;
            objectId = RIRpgbznlq;
            updatedAt = "2013-03-21T07:26:34.209Z";
        },
                {
            createdAt = "2013-03-21T07:26:39.391Z";
            name = Xbox;
            objectId = xBNgHtJbrV;
            updatedAt = "2013-03-21T07:26:39.391Z";
        }
    );
} 
```

我想要的输出是：

```
{
  "results" : [
    {
      "objectId" : "vloIK0MZIA",
      "updatedAt" : "2013-03-21T07:26:04.149Z",
      "createdAt" : "2013-03-21T07:26:04.149Z",
      "name" : "PlayStation"
    },
    {
      "objectId" : "RIRpgbznlq",
      "updatedAt" : "2013-03-21T07:26:34.209Z",
      "createdAt" : "2013-03-21T07:26:34.209Z",
      "name" : "Wii"
    },
    {
      "objectId" : "xBNgHtJbrV",
      "updatedAt" : "2013-03-21T07:26:39.391Z",
      "createdAt" : "2013-03-21T07:26:39.391Z",
      "name" : "Xbox"
    }
  ]
} 
```

**顺便一提**

为什么当我在代码中有一个单独的**NSData**时：

`NSData *JSONData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];`

并将我的**NSJSONSerialization**更改为：

`id listOfConsoles = [NSJSONSerialization JSONObjectWithData:JSONData options:NSJSONReadingMutableContainers error:&error];`

输出将是：

```
The list: {
    error = unauthorized;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:49:10.883

第一个列表是一个`NSDictionary`名为“results”的单个键，它有一个`NSArray`of `NSDictionaries`。

第二个列表是同样的事情..

**编辑 1.0：**

澄清一下，第二个输出是 JSON，好吗？就这样，只需[在此处](http://jsonlint.com/)检查并验证自己。第一个是输出的 JSON，它位于`NSObject`. 当然会有细微差别...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:45:33.673

您的身份验证未成功完成。请检查**APPLICATION_ID**和**REST_API_KEY**值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:19:27.203

我是个白痴。当我想要 JSON 数据时，我从未意识到我试图将 JSON 转换为其他东西。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString:@"https://api.parse.com/1/classes/Consoles"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    [request setURL:url];
    [request setHTTPMethod:@"GET"];
    [request setValue:@"APPLICATION_ID" forHTTPHeaderField:@"X-Parse-Application-Id"];
    [request setValue:@"REST_API_KEY" forHTTPHeaderField:@"X-Parse-REST-API-Key"];

    NSString *listOfConsoles = [[NSString alloc] initWithData:[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil] encoding:NSUTF8StringEncoding];

    NSLog(@"%@", listOfConsoles);
} 
```

# matlab - 如何在Matlab中将重复模式添加到不同长度的向量

> ID：15545254
> 
> 赞同：0
> 
> 时间：2013-03-21T10:43:27.133
> 
> 标签：matlab, vector

**问题**

假设我有两个任意长度的向量。让我们打电话`pattern`给另一个`series`。现在我想以自动方式将我的重复添加`pattern`到我的。`series`

通常可以假设它`pattern`比 短`series`，但如果另一种方法也有效，那就太好了。`pattern`在这种情况下，应该只使用前几个值。

**例子**

```
pattern = 1:3;
series = 1:10; 
```

应该给

```
 2     4     6     5     7     9     8    10    12    11 
```

**到目前为止我发现了什么？**

我四处寻找，但没有找到一种优雅的方式来实现我想要的。

*   我发现使用的最简单的解决方案`padarray`，但是我没有这个可用的
*   我自己的解决方案，我不认为是优雅的，是使用`repmat`重复图案足够的次数，然后切割结束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:16:15.963

您可以使用索引而不是 repmat：

```
result = series + pattern([mod(0:(numel(series) - 1), numel(pattern)) + 1]); 
```

# android - How garbage collector release AsyncTask allocated memory

> ID：15545255
> 
> 赞同：1
> 
> 时间：2013-03-21T10:43:27.383
> 
> 标签：android, memory, android-asynctask

In the MainActivity, every x seconds I create a new AsyncTask and I call execute with `new RTask(this).execute(param);` to send data to a server asyncronously. I think that create a new task so often can cause memory leaks. So when garbage collector release the memory and how can I set the task reference to null to allow to collect it? I've tried to use `this.cancel(true);` within `onPostExecute()` but I've read that, due to a bug of the Android framework, onpost is never called. Any suggestion will be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:45:24.510

实际上，回收不应该有任何问题，`AsyncTask`除非您持有对它的任何引用`param`或在内部产生内存泄漏`doInBackground()`。

所以，您可能会想，如果您要创建许多长时间运行的 AsyncTask，那么它会导致一些内存问题。实际上这不是真的（至少在最新的 Android 版本上）。`AsyncTask` [源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/os/AsyncTask.java/)表明

*   它使用单例有界执行器：

    ```
    private static final int CORE_POOL_SIZE = 5;
    private static final int MAXIMUM_POOL_SIZE = 128;
    private static final int KEEP_ALIVE = 1;

    public static final Executor THREAD_POOL_EXECUTOR
        = new ThreadPoolExecutor(CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE,
                TimeUnit.SECONDS, sPoolWorkQueue, sThreadFactory); 
    ```

    这意味着执行程序不会同时运行超过 128 个 AsyncTasks（根据我的理解，128 个并不是很大）。

*   它对 Executor 使用有界查询：

    ```
    private static final BlockingQueue<Runnable> sPoolWorkQueue =
            new LinkedBlockingQueue<Runnable>(10); 
    ```

所以，基于以上几点，同时创建和运行的数量`AsyncTasks`是有限的，不是那么大。因此，如果您的代码内部`AsyncTask`没有造成任何内存泄漏，那么根据我的理解，没有问题。同时 Android 不会让您使用`AsyncTasks`. 查看[ThreadPoolExecutors 描述](http://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html)以熟悉它管理内存的方式（如果您担心同时创建的线程过多）。

特别是在您的情况下，我认为在前一个请求尚未完成时向服务器执行另一个请求不是一个好主意（如果是类似请求），也没有必要执行许多频繁的小请求 - 您的应用在这种情况下会消耗电池太快。

关于`cancel()`调用，基于[AsyncTask 的 Android 文档](http://developer.android.com/reference/android/os/AsyncTask.html)：

> 取消任务
> 
> 可以通过调用 cancel(boolean) 随时取消任务。调用此方法将导致对 isCancelled() 的后续调用返回 true。调用此方法后，将在 doInBackground(Object[]) 返回后调用 onCancelled(Object)，而不是 onPostExecute(Object)。为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 doInBackground(Object[]) 定期检查 isCancelled() 的返回值。

所以，我不确定你的意思是“我试图在 onPostExecute() 中使用 this.cancel(true);”，而`cancel()`如果从`onPostExecute()`. 可以从`AsyncTask`或从调用它，如果你有一个循环，调用[isCancelled()](http://developer.android.com/reference/android/os/AsyncTask.html#isCancelled%28%29)`doInBackground()`是一个很好的做法，以便在调用后停止它的执行。`AsyncTask``cancel()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:11:47.253

> 垃圾收集器如何释放 AsyncTask 分配的内存

就像它为任何其他类释放内存一样。AsyncTask 没有什么特别之处。一旦任务完成，只要没有其他类引用它，它就会被垃圾收集。将任务引用设置为 null 会有所帮助。

# java - Error loading KeyStore(PKCS12)

> ID：15545258
> 
> 赞同：1
> 
> 时间：2013-03-21T10:43:48.197
> 
> 标签：java, keystore

I want to load a KeyStore with the load method but when I use it I got an error. I don't understant what ECParameter is.

```
try {
FileInputStream is =new FileInputStream(new File("D:\\UZ\\key_privateUZ.p12"));
ks = KeyStore.getInstance("PKCS12");
password="1234".toCharArray();
ks.load(is, password);
} catch (Exception e) {
e.printStackTrace();
} 
```

my error:

```
java.security.cert.CertificateParsingException: java.io.IOException: Only named ECParameters supported 
at sun.security.x509.X509CertInfo.<init>(X509CertInfo.java:171) 
at sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1788) 
at sun.security.x509.X509CertImpl.<init>(X509CertImpl.java:202) 
at sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:97) 
at java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:339) 
at sun.security.pkcs12.PKCS12KeyStore.loadSafeContents(PKCS12KeyStore.java:1441) 
at sun.security.pkcs12.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1313) 
at java.security.KeyStore.load(KeyStore.java:1214) 
at Main.main(Main.java:21) Caused by: java.io.IOException: Only named ECParameters supported 
at sun.security.ec.ECParameters.decodeParameters(ECParameters.java:202) 
at sun.security.ec.ECParameters.engineInit(ECParameters.java:319) 
at java.security.AlgorithmParameters.init(AlgorithmParameters.java:293) 
at sun.security.x509.AlgorithmId.decodeParams(AlgorithmId.java:139) 
at sun.security.x509.AlgorithmId.<init>(AlgorithmId.java:114) 
at sun.security.x509.AlgorithmId.parse(AlgorithmId.java:381) 
at sun.security.x509.X509Key.parse(X509Key.java:168) 
at sun.security.x509.CertificateX509Key.<init>(CertificateX509Key.java:75) 
at sun.security.x509.X509CertInfo.parse(X509CertInfo.java:705) 
at sun.security.x509.X509CertInfo.<init>(X509CertInfo.java:169) 
... 8 more 
```

Regars

Wazol

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:58:49.123

如果您进行搜索，您会发现大量有关 EC（椭圆曲线）参数的信息。特别是[引发该异常的 JDK 代码](http://j6a.ru/_e_c_parameters_8java_source.html)。

如果您查看相关方法，您将在异常后看到一个注释掉的部分，表示：

> 它作为一个完整的解析实现的起点

换句话说，JDK 不支持所有可能的编码。

使用通常比基本 JDK 具有更多功能的[Bouncy Castle](http://www.bouncycastle.org/wiki/display/JA1/Elliptic+Curve+Key+Pair+Generation+and+Key+Factories)可能会更好。

如果您解释密钥库中的数据是如何生成的，它也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T01:16:28.760

我解决了这个问题在 ECKey class ECParameterSpec papamSpec = ECNamedCurveTable.getParameterSpec(SECP);

# facebook - fql OR and order by desc with offset

> ID：15545259
> 
> 赞同：2
> 
> 时间：2013-03-21T10:43:49.337
> 
> 标签：facebook, facebook-fql

I have some issue with a Facebook's fql request :).

When I request like this

> SELECT uid, profile_url FROM user where contains('potatoe') OR uid in(select id from profile where contains ('potatoe')) ORDER BY mutual_friend_count desc LIMIT 0,2

I have always the same results, even if I change the offset...

But

*   If I change DESC to ASC the "offset" works...
*   If I change OR to AND and let the order by desc => the "offset" works too!

Something is wrong with my OR/desc/offset combo? Or I just have misunderstood something with "or" operators? :/

Thanks a lot.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:28:13.537

您应该这样编写 FQL 查询：

> 从用户中选择 uid、profile_url
> 
> where uid in(select uid from user where contains ('potatoe') )
> 
> > 或 uid in（从包含 ('potatoe') 的配置文件中选择 id）
> 
> ORDER BYmutual_friend_count desc
> 
> 限制 0,2

FQL 无法在布尔表达式中解释“包含”的结果，因此您的 OR 运算符在这里失败...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:36:59.033

我认为问题在于您的查询以两种不同的方式提出同一个问题：

*   显示我所有包含“土豆”的朋友用户资料**或**
*   显示属于我的朋友的用户的所有个人资料，其中包含“土豆”。

简化您的查询，看看它是否按预期工作。

```
SELECT uid, profile_url FROM user WHERE contains('potatoe')
   ORDER BY mutual_friend_count DESC LIMIT 0,2 
```

# android - how to keep application in running mode when create and launched in android?

> ID：15545261
> 
> 赞同：0
> 
> 时间：2013-03-21T10:43:52.000
> 
> 标签：android, android-activity, android-service

I want to keep android application run in background not in foreground when it launched. For Example, like Android Settings and Android Keyboard. Only Running Process List in display this application. Actually, this application is running in background and user can't display it in foreground.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:29:21.963

无论您想对您的应用程序做什么，如果您希望它在后台运行并且在不再显示时不会被破坏，您必须使用 Service。

这是解释它的 Android 开发者网站：http:
[//developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

这是一个很好的教程：
[http ://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

如果您的代码不适用于服务，则可能不是服务的错，而是您的代码的错，您应该发布另一个问题来准确解释您的问题。

# jquery - Why is .load() of iframe having trouble accessing page elements?

> ID：15545265
> 
> 赞同：1
> 
> 时间：2013-03-21T10:44:00.650
> 
> 标签：jquery, iframe

I am creating an iframe with jquery, both parent and child are in the same domain (no SOP errors).

Before creating the iframe, I attach a 'data' element to a page node like this

```
$('#anElement').data("test","This is a test");
console.log($('#anElement').data("test")); // This displays the correct "This is a test string" 
```

After this I create the iframe

```
var iframe = $('<iframe>')
        // Set source
        .attr('src',src)
        // Set function to be called on load
        .load(function(){

            $('body').find('iframe')[0].contentWindow.test(); // This function is inside the iframe and it's called correctly 
            console.log($('#anElement').data()); // This displays undefined in console. 
        });
$('body').append(iframe); // Add it to the page 
```

Note, if I do a

```
console.log($('#anElement')); 
```

within the 'load' function, the console displays the correct element.

I fear there's something very trivial preventing me to find the issue, does anyone now how to help me out?

# c# - 使用 Open XML 格式 SDK 2.0 CTP 创建文档时未保存

> ID：15545266
> 
> 赞同：1
> 
> 时间：2013-03-21T10:44:02.457
> 
> 标签：c#, asp.net, excel, openxml-sdk

我想使用 Open XML Format SDK 2.0 创建基于模板的 excel 文档。我已按照本教程[使用 Open XML 格式 SDK 2.0 CT 创建文档](http://msdn.microsoft.com/en-us/library/office/dd452407%28v=office.12%29.aspx)。我的问题是我放入文档的行和单元格没有得到保存。当我打开文档时，它看起来就像模板一样。

运行代码时没有抛出异常。我想我必须强制将更改保存在文档中，但我不知道如何。

这是我的一些代码：

```
 public static void GenerateExcelReportToDisk()
    {
        var factory = new Factory();
        var generated = "result.xlsx";
        var newFile = Util.GetReportTargetPath() + generated;
        var templateFile = Util.GetReportTemplatePath() + @"template.xlsx";
        File.Copy(templateFile, newFile, true);

        using (var myWorkbook = SpreadsheetDocument.Open(newFile, true))
        {
            var workbookPart = myWorkbook.WorkbookPart;
            var worksheetPart = workbookPart.WorksheetParts.First();
            var sheetData = worksheetPart.Worksheet.GetFirstChild<SheetData>();

            //Get data
            var data = factory.GetAllFixtures().Take(20);
            int rowIndex = 3;

            foreach (var fixture in data)
            {
                var pcRate = fixture.PCRate;
                var account = fixture.Charter != null ? fixture.Charter.Shortname : null;
                var region = fixture.Region != null ? fixture.Region.GroupName : null;

                //CreateContentRow is exactly like the tutorial linked above.
                var row = CreateContetRow(rowIndex, region, pcRate, account);
                rowIndex++;
                sheetData.AppendChild(row);
            }
            //Tried to add myWorkbook.WorkbookPart.Workbook.Save(); here, but it doesn't do anything
            myWorkbook.Close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:23:58.240

好吧，不久之后，我设法自己解决了这个问题。在这里发布答案以防它对某人（包括我自己）有所帮助：

在上面的行中`myWorkbook.Close();`添加`worksheetPart.Worksheet.Save();`

就如此容易...

# r - R maps package colour fill for a country gives strange results

> ID：15545271
> 
> 赞同：1
> 
> 时间：2013-03-21T10:44:14.963
> 
> 标签：r, maps

The following code gives very unexpected results.

I'm trying to colour a few countries with different colours in a map of Asia, and the colors are all jumbled up. What am I doing wrong?

```
library(maps)
data(world.cities)
ctrys1=c("China","India","Australia","Taiwan","Malaysia","Thailand","Japan","Singapore","South Korea","Indonesia","Hong Kong")
cols=c('red','orange','white','white','white','white','white','red','white','white','white')
a=map('world',regions=ctrys1,ylim=c(-50,55),xlim=c(70,180),mar=c(0,0,0,0),fill=1,col=cols) 
```

I've searched SO an the answers here [fill countries in a world map](https://stackoverflow.com/questions/11225343/how-to-create-a-world-map-in-r-with-specific-countries-filled-in) or this link from the r choropleth challenge don't seem to have an answer for this. I suspect it is because the regions aren't obvious but I'm not clear how to extract them.

[http://www.thisisthegreenroom.com/2009/choropleths-in-r/](http://www.thisisthegreenroom.com/2009/choropleths-in-r/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:59:13.813

您可以使用这样的`value = tag`格式并包含在对...`exact = TRUE`的调用中`map`

```
library(maps)
data(world.cities)
ctrys1=c("China","India","Australia")
cols=c("China"='red',"India"='orange',"Australia"='green')
a=map('world',regions=ctrys1, exact = TRUE , ylim=c(-50,55),xlim=c(70,180),mar=c(0,0,0,0),fill=1,col=cols) 
```

![在此处输入图像描述](../Images/3426113527da724b201fa44687f15c9a.png)

# asp.net - ADODB.Connection error

> ID：15545274
> 
> 赞同：1
> 
> 时间：2013-03-21T10:44:19.290
> 
> 标签：asp.net, adodb

I am trying to learn asp.net, and have hit a problem early on.

I am attempting to connect to a database that I have create on Net Registry's Cloud Hosting.

I just receive a 500 error when i try to access the page.

(I am on a Mac as well if this matters at all.)

Here is my code:

```
<% @ Language="VBScript" %>
<head>
<title>Form to database</title>
</head>
<body> 

<%
  Dim page: page = Request.ServerVariables("SCRIPT_NAME")

  If Request.Form <> "" Then

   Dim name: name= Request.Form("name")
   Dim email: email = Request.Form("email")
   Dim comments: comments = Request.Form("comments")
   Dim sql: sql = "INSERT INTO users_tbl " & _
                  "([name], email, comments) " & _
                  "VALUES ('" & name & "','" & email & "','" & comments & "')"

   Dim conn: Set conn = Server.CreateObject("ADODB.Connection")
   Dim str: str = "SERVER=MYSQL-5.idealinsurance.com.au;
DATABASE=ideal_idealinsurance_com_au; UID=XXXXXXXXXX;PASSWORD=XXXXXXXX; OPTION=3"

   conn.Open(str)
   conn.Execute(sql)
   conn.Close
   Set conn = Nothing

   Dim message: message = "The form information was inserted successfully."

  End If
%>

 <form action="<%=page%>" method="post">
  name:<input name="name"><br>
  email:<input name="email"><br>
  comments: <textarea name="comments"></textarea><br>
  <input name="submit" type="submit" value="Submit">
 </form>
 <p>

 <%=message%>

</body>
</html> 
```

# sublimetext2 - How to split window at sublime2 at the vintage mode on Mac

> ID：15545276
> 
> 赞同：2
> 
> 时间：2013-03-21T10:44:23.600
> 
> 标签：sublimetext2

I want to split window in sublime text editor.

```
{
    "keys": ["sp"],
            # I don't know how to call split window command. Please help!
    "command": "split_window_horizontaly",
    "context": [
        {"key": "setting.command_mode","operand": false},
        {"key": "setting.is_widget","operand": false}
    ]
    }, 
```

Do you have any idea? Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:00:37.053

所以键是键列表。因此，对于上述组合键，您需要类似`["s", "p"]`. 要手动进行拆分，您必须`set_layout`使用适当的参数调用命令。您可以通过打开控制台并输入来查看使用菜单时运行的命令`sublime.log_commands(True)`。

话虽如此，自己做可能比它的价值更麻烦。看看[Origami](https://github.com/SublimeText/Origami)插件和[Vintage-Origami](https://github.com/garyc40/Vintage-Origami)插件。Origami 插件提供了一些更好的窗格管理命令。Vintage-Origami 插件创建可在复古模式下使用的键绑定。如果您不喜欢这些绑定，可以将其用作创建您喜欢的绑定的指南。

希望有帮助。

# c# - C# Sending an object through HttpClient to a Web API

> ID：15545279
> 
> 赞同：0
> 
> 时间：2013-03-21T10:44:31.527
> 
> 标签：c#, asp.net, asp.net-web-api, dotnet-httpclient

I have a WindowsForm application and i want to send an List<> to the Web API

here is my code in the windows form app:

```
 Uri uri = new Uri("http://localhost/test/api/v1/name/testcontroller/");

        HttpClient client = new HttpClient();

        client.BaseAddress = uri;

        var mediaType = new MediaTypeHeaderValue("application/json");
        var jsonFormatter = new JsonMediaTypeFormatter();

        HttpContent content = new ObjectContent<List<TermbaseFile>>(termbaseList, jsonFormatter);
        HttpResponseMessage responseMessage = client.PostAsync(uri, content).Result; 
```

What should i put in the controller-method to get the List?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:47:41.650

您需要实现一个`Post`动作，该动作需要一个特定对象类型的列表，或者更具体地说，一个具有相同属性的对象，例如

```
public class TermbaseFilePostDto
{
    // relevant properties go here
}

public class TestController : ApiController
{
     public HttpResponseMessage Post(List<TermbaseFileDto> list)
     {
         ...
     }
} 
```

# css - 带有 CSS 升级的相对 URL

> ID：15545280
> 
> 赞同：0
> 
> 时间：2013-03-21T10:44:32.357
> 
> 标签：css, ruby-on-rails, ruby, ruby-on-rails-3, twitter-bootstrap-rails

我正在使用 Ruby on Rails 开发应用程序，并且正在使用引导程序来升级我的 CSS。

我的问题是：

如果我有下一个 URL 链接： `link href="css/bootstrap.css" rel="stylesheet"`

如何将 URL 重新定义为相对 URL，因此如果我重新排列我的 URL，它不会中断

项目文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:23:09.860

我认为最好的做法是将样式表放在以下目录中：

```
app/assets/stylesheets 
```

并使用：

```
stylesheet_link_tag 'name' 
```

但是，如果您使用的是 Bootstrap，我强烈建议您使用 Gem（例如[http://rubygems.org/gems/twitter-bootstrap-rails](http://rubygems.org/gems/twitter-bootstrap-rails)），这样它将自动处理框架的样式表和 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:47:41.460

使用 Rails 资产管道。请参阅本指南：

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# android - 如何在 Android 中使用 unordered_map？

> ID：15545283
> 
> 赞同：7
> 
> 时间：2013-03-21T10:44:35.590
> 
> 标签：android, c++, c++11, hashmap, unordered-map

我正在尝试使用在 Android NDK 中定义的 hash_map，但我收到“弃用警告”：

```
ndk/sources/cxx-stl/gnu-libstdc++/4.6/include/ext/../backward/backward_warning.h:33:2:
error: #warning This file includes at least one deprecated or antiquated header which may 
be removed without further notice at a future date. Please use a non-deprecated interface 
with equivalent functionality instead. For a listing of replacement headers and 
interfaces, consult the file backward_warning.h. To disable this warning use -Wno-
deprecated. [-Werror=cpp] 
```

而且由于“unordered_map”存在于 gnu-libstdc++/4.6/include/ 以及 gnu-libstdc++/4.6/include/tr1/ 中，我相信有一种使用它的方法。

关键是我找不到它。以下哪一项是正确的（如果有的话）：

```
#include <tr1/unordered_map.h>

#include <unordered_map> 
```

然后，如何使用它？__gnu_cxx::unordered_map 无法识别...而且我不知道如何找到此信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-08T12:11:21.063

如果您不想要/不需要 C++11 支持，您可以使用 STLPort 中的支持：

```
// Here we are referencing the stlport one:
#include <unordered_map>
...
std::tr1::unordered_map<int, int> test; 
```

这是因为 STLPort在**tr1**命名空间内定义了**unordered_map**，但 STLPort 标头不在任何**/tr1/**文件夹内。

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T07:09:55.517

我最终通过在我的 Android 项目中添加 C++11 支持找到了一种方法。当我们知道它时很容易，但我花了一些时间来弄清楚。既不需要 STLPort 也不需要 Boost。集成 C++11 后，我可以使用“ **unordered_map** ”，如下所示：

```
#include <unordered_map>
...
std::unordered_map<int, int> test; 
```

[我在这里](https://stackoverflow.com/questions/15616254/enable-c11-support-on-android)创建了一个新问题来解释如何在 Android 中启用 C++11 支持。****

# gdb - gdb 可以在每次中断时打印特定变量吗？

> ID：15545285
> 
> 赞同：20
> 
> 时间：2013-03-21T10:44:41.203
> 
> 标签：gdb

我需要检查一个变量以确定它是否设置正确，这可能会在几个循环后发生。

我现在正在做的事情如下：

```
(gdb) b myfile.cpp:180
(gdb) c
(gdb) p decoder.m_msg
(gdb) c
(gdb) p decoder.m_msg
(gdb) c
... 
```

`decoder.m_msg`每次程序中断时，我可以自动打印这个变量吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-21T11:56:10.523

使用`display`命令：

```
(gdb> display decoder.m_msg 
```

这将导致`decoder.m_msg`每次显示提示时打印（不仅在断点之后）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-21T11:59:30.847

是的，使用[断点命令列表](http://ftp.gnu.org/old-gnu/Manuals/gdb/html_node/gdb_34.html)：

```
$ break myfile.cpp:180
Breakpoint 1 at 0x46ba0e: file myfile.cpp, line 180.

$ commands 1
> print decoder.m_msg
> end
$ 
```

# javascript - 有什么方法可以减少所需的 togTriggers 数量吗？

> ID：15545291
> 
> 赞同：0
> 
> 时间：2013-03-21T10:44:52.740
> 
> 标签：javascript, toggle

我正在使用以下脚本在鼠标悬停并单击时打开一个框。在我的页面上有很多盒子要打开，还有更多要打开。我可以使这些盒子工作的唯一方法是让每个盒子制作一个新的togTrigger。即使同一个词在页面的不同位置打开同一个框，我也需要一个新的 togTrigger。最终我会以 togTrigger1 到 togTrigger200 或其他东西结束。这不是很实用。有什么方法可以减少所需的 togTriggers 数量吗？

```
<script type="text/javascript">
    <!-- HIDE FROM OLD BROWSERS
    /* <![CDATA[ */

    var oVTog = {
        toggle: function (el) {
            var container = el.parentNode;
            var para = container.getElementsByTagName('p')[0];
            para.style.display = "none";

            var isClicked = false;

            el.onmouseover = function () {
                para.style.display = '';
                return false;
            };
            el.onmouseout = function () {
                if (!isClicked)
                    para.style.display = 'none';
                return false;
            };
            el.onclick = function () {
                // if it's clicked, change it to TRUE
                // if it's clicked again, change it back to FALSE

                isClicked = !isClicked; // toggle

                para.style.display = ((isClicked) ? '' : 'none');
                return false;
            };
        }
    };
    window.onload = function () {
        var l = document.getElementById('togTrigger');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger2');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger3');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger4');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger5');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger6');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger7');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger8');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger9');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger10');
        oVTog.toggle(l);
        l = document.getElementById('togTrigger11');
        oVTog.toggle(l);
    };

    /* ]]> */
    //END HIDING -->
</script> 
```

这就是我在 div 内的正文中应用脚本的方式（页面由表中的许多 div 组成，尽管 /p 不应该在 div 内，但它正在工作）：

```
<a href="#" id="togTrigger"><i>text</i></a>
       <p class="togContent">
        text
        </p> 
```

当同一个 div 中有两个或多个文本框时，其他 togTriggers 在一个范围内：

```
<span><a href="#" id="togTrigger4"><i>text</i></a>
       <p class="togContent">
        text
        </p></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:53:02.050

您可以使用 for 循环：

```
// Handle the first one separately because it doesn't have  a number at the end
var l = document.getElementById('togTrigger'); 
oVTog.toggle(l);
for (var i=2;i< 12;i++){
    l = document.getElementById('togTrigger' + i);
    oVTog.toggle(l);
} 
```

还可以考虑为所有 togTrigger 元素分配一个类，选择它们，循环它们并调用`oVTog.toggle`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:28:33.833

正如我所提到的，正如马特更清楚地指出的那样，您可以以编程方式访问这些元素 - 无需通过名称来引用它们。这是一些可以解决问题的代码。（您可以忽略第一个脚本标记的第一个内容——它们是我在“blank.html”文件中的辅助函数——所有（我的）页面都来自该文件）

Javascript 数组为您提供了 forEach 函数，不幸的是，NodeLists 没有。您可以在 myInit2 中看到我是如何使用它的。虽然这个例子有点做作——每个元素只发生一件事，但我发现它是一个有用的模式——尽管没有在 NodeList 中的每个节点上调用的匿名（未命名）函数。

```
<!DOCTYPE html>
<html>
<head>
<script>
function byId(e){return document.getElementById(e);}
function newEl(tag){return document.createElement(tag);}
function newTxt(txt){return document.createTextNode(txt);}
function toggleClass(element, newStr)
{
    index=element.className.indexOf(newStr);
    if ( index == -1)
        element.className += ' '+newStr;
    else
    {
        if (index != 0)
            newStr = ' '+newStr;
        element.className = element.className.replace(newStr, '');
    }
}
function forEachNode(nodeList, func)
{
    var i, n = nodeList.length;
    for (i=0; i<n; i++)
    {
        func(nodeList[i], i, nodeList);
    }
}

window.addEventListener('load', mInit, false);

function mInit()
{
}

</script>

<script type="text/javascript">
    <!-- HIDE FROM OLD BROWSERS
    /* <![CDATA[ */

    var oVTog = {
        toggle: function (el) {
            var container = el.parentNode;
            var para = container.getElementsByTagName('p')[0];
            para.style.display = "none";

            var isClicked = false;

            el.onmouseover = function () {
                para.style.display = '';
                return false;
            };
            el.onmouseout = function () {
                if (!isClicked)
                    para.style.display = 'none';
                return false;
            };
            el.onclick = function () {
                // if it's clicked, change it to TRUE
                // if it's clicked again, change it back to FALSE

                isClicked = !isClicked; // toggle

                para.style.display = ((isClicked) ? '' : 'none');
                return false;
            };
        }
    };

    window.addEventListener('load', yourInit, false);
    window.addEventListener('load', myInit, false);
    window.addEventListener('load', myInit2, false);

    function yourInit() 
    {
        // 2 lines per element to toggle. 200items = 400 lines
        var l;
        l = document.getElementById('togTrigger');
        oVTog.toggle(l);

        l = document.getElementById('togTrigger4');
        oVTog.toggle(l);
    };

    function myInit() 
    {
        // 4 lines total. 200items = 4 lines
        var containerDiv = document.getElementById('myMethod');
        var i, nodeList = containerDiv.getElementsByClassName('togTrigger');
        for (i=0; i<nodeList.length; i++)
            oVTog.toggle(nodeList[i]);
    };

    function myInit2() 
    {
        var containerDiv = document.getElementById('mySecondMethod');
        var i, nodeList = containerDiv.getElementsByClassName('togTrigger');
        forEachNode(
                        nodeList, 
                        function(curItem, curIndex, ndeLst)
                        { 
                            oVTog.toggle(curItem) 
                        }
                    );
    };

    /* ]]> */
    //END HIDING -->
</script>

<style>
</style>
</head>
<body>
    <div id='yourMethod'>
        <a href="#" id="togTrigger"><i>text</i></a>
        <p class="togContent">text</p>

        <span>
            <a href="#" id="togTrigger4"><i>text</i></a>
            <p class="togContent">text</p>
        </span>
    </div>

    <div id='myMethod'>
        <a href="#" class="togTrigger"><i>text</i></a>
        <p class="togContent">text</p>

        <span>
            <a href="#" class="togTrigger"><i>text</i></a>
            <p class="togContent">text</p>
        </span>
    </div>

    <div id='mySecondMethod'>
        <a href="#" class="togTrigger"><i>text</i></a>
        <p class="togContent">text</p>

        <span>
            <a href="#" class="togTrigger"><i>text</i></a>
            <p class="togContent">text</p>
        </span>
    </div>
</body>
</html> 
```

# android - 使用服务从文本文件向服务器发送数据

> ID：15545296
> 
> 赞同：0
> 
> 时间：2013-03-21T10:45:01.910
> 
> 标签：android, android-service

我正在使用下面给出的服务代码将数据从文本文件发送到服务器。它逐行向服务器发送数据。我希望服务在后台连续运行。为此，我编写了 asyncTask。但它会发送一次所有数据然后停止。

```
public class BackgroundService extends Service
    {
        private static final String TAG = "BackgroundService";
        String line=null;
        Context mContext = null;
        File file;RandomAccessFile in = null;
        StringEntity se ;
        HttpEntity entity=null;
        final static int SERVICE_NAME = 1;
        int WORK_TYPE;
    public BackgroundService()
    {
        //super(TAG);
    }
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(),"in BackgroundService",       Toast.LENGTH_LONG).show();
         mContext = getBaseContext();
         WORK_TYPE = 2;
         new BackgroundTask(mContext).execute();
         return super.onStartCommand(intent, flags, startId);
    }

    public class BackgroundTask extends AsyncTask<String, String, Void>
    {

        Context mContext = null;String response;

       public BackgroundTask(Context context)
    {
        mContext = context;
    }

    protected void onPreExecute()
    {
        Toast.makeText(getApplicationContext(),"1", Toast.LENGTH_LONG).show();
    }

    protected Void doInBackground(final String... args)
    {
        switch (WORK_TYPE)
        {
            case 2:
                 File file = new File(Environment.getExternalStorageDirectory(),"/BPCLTracker/gpsdata.txt");
                  int i=0;

                  RandomAccessFile in = null;
            try {
                in = new RandomAccessFile(file, "rw");
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                while ((line = in.readLine()) != null)
                  {
                     String input = line.toString();
                     response = sendDataToServer(input);
                     // JsonUtils.parseServerData(response, hashMapObj);
                  }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                break;
        }//switch
        return null;
    }//doInBackground

    protected void onPostExecute(final Void unused)
    {
        Toast.makeText(getApplicationContext(),"3", Toast.LENGTH_LONG).show();
        switch (WORK_TYPE)
        {
            case 2:
                if (!"".equalsIgnoreCase(response) && response != null)
                {
                    //DeviceUtils.deviceRegistration(hashMapObj, mContext);   
                    callService(1);
                }
            try {
                if((line = in.readLine()) == null && entity!=null)
                {
                    file.delete();
                    new BackgroundTask(mContext).execute();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                break;
        }
    }
}

public void callService(int work)
{
    WORK_TYPE = work;
    new BackgroundTask(mContext).execute();
}

public String sendDataToServer(String data)
{
    StringBuffer sb = new StringBuffer("");
    String serverUrl = "http://67.23.166.35:80/android/insert.php" ;
    try
    {
        URL url = new URL(serverUrl);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.setConnectTimeout(6 * 10 * 1000);
        conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
        conn.setRequestMethod("POST");

        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write(data);
        wr.flush();

        // Get the response
        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

        String line = "";
        while ((line = rd.readLine()) != null)
        {
            // Process line...
            sb.append(line);
        }

        wr.close();
        rd.close();
        return sb.toString();
    }
    catch (Exception e)
    {
        Log.d("Exception : ", e.getStackTrace().toString());
    }

    return sb.toString();
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:20:43.887

我有修改你的代码：

**检查我的所有代码，这将让您了解有关发送行的信息。请以这种方式完成其余的逻辑。我也删除了一些方法。**

**这不是所有的代码，但它会给你 IDEA。**

```
package com.example.getjson;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.RandomAccessFile;
import java.net.HttpURLConnection;
import java.net.URL;

import org.apache.http.HttpEntity;
import org.apache.http.entity.StringEntity;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Environment;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class backservice extends Service {

    private static final String TAG = "BackgroundService";
    String line = null;
    Context mContext = null;
    File file;
    RandomAccessFile in = null;
    StringEntity se;
    HttpEntity entity = null;
    final static int SERVICE_NAME = 1;
    int WORK_TYPE;
    String response;
    String input = "";

    public backservice() {
        // super(TAG);
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        Toast.makeText(getApplicationContext(), "in BackgroundService",
                Toast.LENGTH_LONG).show();
        mContext = getBaseContext();
        WORK_TYPE = 2;
        // new BackgroundTask(mContext).execute();
        switch (WORK_TYPE) {
        case 2:
            File file = new File(Environment.getExternalStorageDirectory(),
                    "/BPCLTracker/gpsdata.txt");
            int i = 0;

            RandomAccessFile in = null;
            try {
                in = new RandomAccessFile(file, "rw");
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                while ((line = in.readLine()) != null) {
                    input = line.toString();
                    // response = sendDataToServer(input);
                    new BackgroundTask(mContext).execute();
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
        return super.onStartCommand(intent, flags, startId);
    }

    public class BackgroundTask extends AsyncTask<String, String, Void> {

        Context mContext = null;

        public BackgroundTask(Context context) {
            mContext = context;
        }

        protected void onPreExecute() {
            Toast.makeText(getApplicationContext(), "1", Toast.LENGTH_LONG)
                    .show();
        }

        protected Void doInBackground(final String... args) {
            response = sendDataToServer(input);
            return null;
        }

        protected void onPostExecute(final Void unused) {

        }
    }

    public void callService(int work) {
        WORK_TYPE = work;
        new BackgroundTask(mContext).execute();
    }

    public String sendDataToServer(String data) {
        StringBuffer sb = new StringBuffer("");
        String serverUrl = "http://67.23.166.35:80/android/insert.php";
        try {
            URL url = new URL(serverUrl);
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setConnectTimeout(6 * 10 * 1000);
            conn.setRequestProperty("Content-Type",
                    "application/x-www-form-urlencoded;charset=UTF-8");
            conn.setRequestMethod("POST");

            OutputStreamWriter wr = new OutputStreamWriter(
                    conn.getOutputStream());
            wr.write(data);
            wr.flush();

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    conn.getInputStream()));

            String line = "";
            while ((line = rd.readLine()) != null) {
                // Process line...
                sb.append(line);
            }

            wr.close();
            rd.close();
            return sb.toString();
        } catch (Exception e) {
            Log.d("Exception : ", e.getStackTrace().toString());
        }

        return sb.toString();
    }
} 
```

# sql - 子查询返回超过 1 个值。这是不允许的......或者当子查询用作表达式时

> ID：15545301
> 
> 赞同：2
> 
> 时间：2013-03-21T10:45:16.450
> 
> 标签：sql

```
SELECT DISTINCT( m.pm_name ) 
FROM   prime_minister AS m, 
       prime_minister AS p 
WHERE  m.state_born IS NOT NULL 
GROUP  BY m.pm_name, 
          m.birth_yr 
HAVING m.birth_yr = (SELECT Min(p.birth_yr) 
                     FROM   prime_minister) 
```

我的问题如下：

该查询应该会产生第一位出生在澳大利亚某个州的总理......因此`WHERE m.state_born IS NOT NULL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:47:43.660

为什么要在子查询中引用外部表？像这样写一个简单的子查询。

```
SELECT DISTINCT pm_name 
FROM prime_minister 
WHERE state_born IS NOT NULL 
AND birth_yr = (SELECT MIN(birth_yr) FROM prime_minister) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:52:42.853

Not sure I understand your question completely. But I don't see the reason for a `group by` or `having` at all:

```
SELECT m.pm_name
FROM   prime_minister
WHERE  m.state_born IS NOT NULL 
AND    m.birth_yr = (SELECT Min(p.birth_yr) 
                     FROM   prime_minister p
                     WHERE  p.state_born IS NOT NULL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:54:36.193

这行得通吗？

```
SELECT TOP 1 pm_name, MIN(birth_yr)
FROM   prime_minister
WHERE  birth_yr IS NOT NULL 
GROUP BY pm_name
ORDER BY pm_name, MIN(birth_yr) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:22:06.720

使用 EXISTS() 运算符尝试选项

```
SELECT m.pm_name
FROM prime_minister AS m     
WHERE EXISTS (
              SELECT 1
              FROM prime_minister p
              WHERE p.state_born IS NOT NULL
              HAVING MIN(p.birth_yr) = m.birth_yr
              ) AND m.state_born IS NOT NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:07:53.477

我认为您正在尝试找到每个州出生的第一位总理：

```
select pm_name, state_born from prime_minister m
inner join 
(
    select min(birth_yr) birth_yr, state_born
    from prime_minister
    where state_born is not null
    group by state_born
)
t
on m.state_born = t.state_born and m.birth_yr = t.birth_yr 
```

# ios - UIScrollView - 无法向下滚动很远（即使我已将 contentsize 设置为 1000）

> ID：15545302
> 
> 赞同：0
> 
> 时间：2013-03-21T10:45:17.763
> 
> 标签：ios, objective-c, uiscrollview

我想使用滚动视图来显示大约 20 行文本，底部有一个按钮。

但是，当我运行我的应用程序时，页面不会向下滚动到按钮所在的页面底部。

我尝试更改内容大小高度，但它根本不会更改滚动视图。

我正在运行 Xcode 4.6。

```
//.h
@property (strong, nonatomic) IBOutlet UIScrollView *theScroller;

//.m
- (void)viewDidLoad {
self.theScroller.contentSize=CGSizeMake(320.0,1000.0);
[super viewDidLoad] } 
```

任何想法为什么我只能向下滚动页面的一半？有没有更好的方法来显示20行文字+按钮？

编辑 - 我当前的框架矩形是 310W，500H 编辑 - 为了清楚起见，我可以向下滚动页面，但我不能一直滚动到底部。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:33:51.683

如果您没有在 iPhone5 中运行应用程序，问题可能是由于滚动视图框架。在这里，您将 scrollView 框架高度设置为 500 pix，即高度大于设备视图。尝试将大小减小到 480 以下。我们现在使用 300

# vb.net - 命令行参数适用于 Visual Studio，但不适用于 Visual Basic 中的 WindowsForm 项目的命令行

> ID：15545303
> 
> 赞同：2
> 
> 时间：2013-03-21T10:45:19.920
> 
> 标签：vb.net, visual-studio-2010, command-line-arguments

我在visual basic中做了一个小程序。它压缩文件并将文件上传到 ftp 服务器上。该程序本身运行良好。

我的问题是，如果它从命令行获取参数，我希望它具有不同的行为。如果给定参数，则不显示任何表单，如果没有，则加载表单。

从 Visual Basic 执行时，获取命令行参数的代码工作正常（项目属性 -> 调试 -> 启动选项 -> 命令行参数设置为文件路径）

但是当我使用这一行从 cmd 执行程序时： pogram.exe C:\Users\user\file.txt

表单出现，没有检测到任何参数。

这是调度的主要内容。
模块1.vb：

```
 Module Module1

Declare Function AttachConsole Lib "kernel32" (ByVal dwProcessId As Int32) As Boolean
Declare Function FreeConsole Lib "kernel32.dll" () As Boolean

Sub Main()
    Dim cmdArgs As String() = GetCommandLineArgs()
    Form2.loadData()
    If cmdArgs.Length = 0 Then ' NO ARGS MODE
        mainWindow.commandLineMode = False
        Application.Run(mainWindow)
    ElseIf cmdArgs.Length < 3 And Form2.TXTnumLicence.Text = "" Then ' BAD ARGS NUMBER
        Console.WriteLine("Aucun numero de licence definit. Usage : ./ODG_exchange ['filePath'] [numeroLicence [default = ./ODG_param.xml > numero_licence]]")
        Application.Exit()
    Else ' ARGS MODE
        mainWindow.commandLineMode = True
        mainWindow.commandeLine(cmdArgs)
    End If
End Sub 
```

在 Visual Studio 中，我还将启动对象定义为 Module1。也许它会有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:08:25.330

总有一个命令行 arg - 正在执行的程序的文件名。您需要将 if 语句更改为 cmdArgs.length = 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:40:49.500

那么7天后我找到了解决方案......只需使用好的.exe，它就可以像在Visual Studio中一样工作......

感觉好笨，多谢帮助

# android - Android 文字转图片

> ID：15545306
> 
> 赞同：2
> 
> 时间：2013-03-21T10:45:31.527
> 
> 标签：android, text, imageview

我想将字符串中的文本转换为图像并将其显示在 a`ImageView`中，此外我还想获取在运行时创建的图像的尺寸以供进一步使用。这是我在搜索中所做和使用的。

```
tv = new TextView(this);
    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, 60);

    tv.setLayoutParams(layoutParams);

    tv.setText("Some Text, can be long as much as required");
    tv.setTextColor(Color.BLACK);
    tv.setBackgroundColor(Color.WHITE);

    Bitmap testB;
    timer = new Timer();
    timer.schedule(new TickerTask(), 1000,25);
    testB = Bitmap.createBitmap(600, 20, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(testB);

    tv.layout(0, 0, 380, 100);
    tv.draw(c);

    iv = (ImageView) findViewById(R.id.menuIcon);
    iv.setLayoutParams(layoutParams);
    iv.setBackgroundColor(Color.GREEN);
    iv.setImageBitmap(testB); 
```

问题：参数没有按照代码中的设置工作。图像转换后不显示完整的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:15:45.060

我相信它占据了整个屏幕，因为您没有像 Linear Layout 这样的容器，该容器然后包含具有布局约束的 ImageView，因此 ImageView 会扩展以填充可用屏幕。试试这个：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = new TextView(this);
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(80, 100);
    tv.setLayoutParams(layoutParams);
    tv.setText("testing 1 2 3");
    tv.setTextColor(Color.BLACK);
    tv.setBackgroundColor(Color.TRANSPARENT);

    Bitmap testB;

    testB = Bitmap.createBitmap(80, 100, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(testB);
    tv.layout(0, 0, 80, 100);
    tv.draw(c);

    ImageView iv = (ImageView)findViewById(R.id.menuIcon);
    iv.setLayoutParams(layoutParams);
    iv.setBackgroundColor(Color.GRAY);
    iv.setImageBitmap(testB);
    iv.setMaxHeight(80);
    iv.setMaxWidth(80);
} 
```

在你的 main.xml 文件中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

  <ImageView android:id="@+id/menuIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:03:27.463

这对我有用，对于那些想要实现同样目标的人

```
 BitmapDrawable drawable = (BitmapDrawable) iv.getDrawable();
    Bitmap bitmap = drawable.getBitmap();
    //Bitmap bitmap = testB;
    File sdCardDirectory = Environment.getExternalStorageDirectory();
    File image = new File(sdCardDirectory, "test.png");

    boolean success = false;

    // Encode the file as a PNG image.
    FileOutputStream outStream;
    try {

        outStream = new FileOutputStream(image);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream); 
        /* 100 to keep full quality of the image */

        outStream.flush();
        outStream.close();
        success = true;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    if (success) {
        Toast.makeText(getApplicationContext(), "Image saved with success",
                Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(getApplicationContext(),
                "Error during image saving", Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T13:44:05.053

我尝试过[Text2Jpg](https://play.google.com/store/apps/details?id=net.andriodconnect.text2jpg)，它看起来很棒，可以将任何文本转换为带有或不带有背景自定义图像的 jpg 图像。

使用静态布局：

```
 TextPaint mTextPaint = new TextPaint();
    mTextPaint.setColor(bordercolor);
    mTextPaint.setTextSize(textSize);
    StaticLayout mTextLayout = new StaticLayout(text, mTextPaint, (int) (screen_width * .75f), Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false);
    // DynamicLayout mTextLayout = new DynamicLayout(text, mTextPaint,(int)(screen_width * .75f), Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false);
    //mTextPaint.setStrokeWidth(screen_width * .70f);
    canvas.translate(screen_width * .12f, screen_height * .06f); //position the text
    mTextLayout.draw(canvas); 
```

# bash - 为什么 ZSH 挂在空重定向上？

> ID：15545311
> 
> 赞同：10
> 
> 时间：2013-03-21T10:45:55.150
> 
> 标签：bash, shell, zsh

要在 unixy 环境中截断文件，您通常会使用：

```
$ > file 
```

在 bash（也是破折号）中，文件被截断（或者如果它不存在则创建），然后提示返回。在 zsh 中，文件被截断/创建，但它挂起。您必须`Ctrl-C`能够再次使用提示。

重定向非空输出没有问题：

```
zsh$ cat nonempty.file > file
zsh$ 
```

### 问题是：

这种行为是否预期？zsh**错了**吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T11:59:49.150

我不是真正的 zsh 用户，但在 zsh 中似乎与在 bash`> file`中相同。`cat > file`要在 zsh 中创建新文件或截断它，请使用`: > file`. 这也适用于 bash。

* * *

### 更新：

在 zsh 手册中找到了这个：

> **没有命令的重定向：**
> 
> > 当一个简单的命令由**一个或多个重定向运算符**和零个或多个参数分配组成，**但没有命令名称时，** `zsh`可以以多种方式运行。
> > 
> > 如果**`NULLCMD`**未设置参数或设置了选项`CSH_NULLCMD`，则会导致错误。这是 `csh` 行为，`CSH_NULLCMD`在模拟时默认设置`csh`。
> > 
> > 如果设置了该选项**`SH_NULLCMD`**，则内置**`:`**命令将作为具有给定重定向的命令插入。这是模拟**`sh`**或时的默认值**`ksh`**。
> > 
> > 否则，**如果`NULLCMD`设置了参数，则其值将用作具有给定重定向的命令。** 如果同时 设置`NULLCMD`和`READNULLCMD`，则当重定向是输入时，将使用后者的值而不是前者的值。 **is**和 for is**的默认值`NULLCMD``cat`**。`READNULLCMD``more`

在我的系统上，默认值为：

```
$ echo $ZSH_VERSION
4.3.10
$ echo $NULLCMD
cat
$ echo $READNULLCMD
/usr/bin/pager
$ 
```

# jquery - jQuery Ajax async true 不起作用，但似乎可以同步工作

> ID：15545312
> 
> 赞同：2
> 
> 时间：2013-03-21T10:45:58.463
> 
> 标签：jquery, asynchronous

我有一个包含更多 div 的网页。每个 div 通过 ajax 加载一个以 html 计算和显示报告数据的操作。

代码html：

```
<div class="divAutoLoading" data-href="/controller/action"></div> 
```

代码js：

```
$('.divAutoLoading').each(function () {
    var divAutoLoading = $(this);
    divAutoLoading.showLoading();
    $.ajax({
        type: 'POST',
        url: divAutoLoading.attr('data-href'),
        async: true,
        cache: false,
        success: function (html) {
            divAutoLoading.hideLoading();
            divAutoLoading.html(html);
        }
    });
}); 
```

然后我有 4 个 div，它们调用了四个不同的动作，每个动作都有不同的计算时间。我期望的是，当一个动作结束时，会显示结果，但看起来好像该动作已放入队列中，如果前一个动作未完成，则不会开始下一个动作。我究竟做错了什么？

PS jquery 版本为：1.8.2

# wordpress - wordpress 插件短代码缓冲区

> ID：15545314
> 
> 赞同：1
> 
> 时间：2013-03-21T10:46:17.283
> 
> 标签：wordpress, buffer

我开发的使用简码激活的 wordpress 插件破坏了我的管理区域，说无法修改标题。再深入一点我就知道，如果函数得到回显，那么如果我使用`return`than 就可以了。但是 return 的问题是：我使用 ajax 来检索 html，在这种情况下没有生成输出。

```
message Cannot modify header information - headers already sent by (output started at /var/www....    web/wordpress/wp-admin/admin-header.php

MyClass{

public function __construct()
         public $data;

    { 
                require_once(dirname(__FILE__) . '/class/class.another.php');
                $this->data = new Another(); 
        add_action( 'init', array( &$this, 'init' ) );      
    }

public function init()
    {
        add_shortcode( 'my_shortcode', array ($this, 'shortcode') );
                if(isset($_POST['id'])){

            $param = $this->data->output_ajax_html($_POST['id']);

            echo $this->shortcode_html_extended($param);
                        //this part breaks the buffer without echo is working   but the contertn won't show up      

        }       

    }

public function shortcode()
    {
        add_shortcode( 'my_shortcode', array ($this, 'shortcode_html') );   
    }

public function shortcode_html()
    {
        $html = "";
            $html .="";
            return $html;

    }

public function shortcode_html_extended($param)
    {
        $html = "";
            //mixed with php
            $html .="";
            return $html;
    }
} 

$test = new MyClass(); 
```

# jquery - 制作带有固定标题和固定侧边栏的可滚动表格

> ID：15545317
> 
> 赞同：4
> 
> 时间：2013-03-21T10:46:19.180
> 
> 标签：jquery, html, css, fixed-header-tables

我需要始终显示标题和侧边栏索引，但让内容可以自由滚动 x & y ...这个问题的任何解决方案？

我查看了 DataTables jQuery 插件（例如：[链接](http://datatables.net/release-datatables/extras/FixedHeader/top_bottom_left_right.html)），但我想知道是否有任何替代方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T10:53:56.810

你可以把一件事固定

水平滚动时的标题

演示：[水平滚动表](http://www.imaputz.com/cssStuff/bigFourVersion.html)

侧边栏如果垂直滚动

演示：[拨弄垂直滚动](http://bit.ly/10mixH6)

或者你的[奇怪]案例

演示：[两件事都已修复](http://bit.ly/WFUkui)// 不推荐

* * *

## 而你真正想要的就在这里

演示：~~[基本款式](http://acatalept.com/common/test/fixed-table.html)~~链接已损坏，[请改用此链接](http://goo.gl/1qIJHL)

源代码：[snipt.org](http://snipt.org/loz)

# c++ - 模板类型的引用是什么意思？

> ID：15545318
> 
> 赞同：2
> 
> 时间：2013-03-21T10:46:22.673
> 
> 标签：c++, templates, types, std

在我试图理解的代码中，我看到了这样的结构：`ref<date>(entry)`. 请任何人解释一下它的含义。

我假设我们创建了对`entry`对象的引用，但`date`类型是如何使用的。例如`ref<date>(entry)`and`ref<location>(entry)`将返回不同的值。它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:55:08.550

如果您有`using namespace std;`并且正在包含`<functional>`标题，则这是指该[`std::ref`](http://en.cppreference.com/w/cpp/utility/functional/ref)功能。

`std::ref`是一个函数，它将创建一个[`std::reference_wrapper`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper)包装您传递的对象。的全部意义`std::ref`在于你*不必*给出模板参数，因为它可以被推导出来。因此，如果您想要引用`entry`，那么您应该这样做：

```
std::ref(entry) 
```

这是一个方便的功能，可以让您在创建`std::reference_wrapper`. 如果您手动执行此操作，则必须执行以下操作：

```
std::reference_wrapper<date>(entry) 
```

那是因为`std::reference_wrapper`是模板类，模板类参数不能这样推导出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:55:27.730

函数模板用于为某个对象[`std::ref`](http://en.cppreference.com/w/cpp/utility/functional/ref)创建一个。`std::reference_wrapper`这允许通过对函数模板的引用传递对象，即使函数模板通过值获取相应的参数：

例如：

```
template<typename T>
void foo(T t)
{
    t = 42;
}

int x = 0;
foo(std::ref(x));
std::cout << x; // Will print 42 
```

请注意，`foo()`上面的函数是一个非常愚蠢的函数，我写它只是为了说明目的。更常见的是，您会发现`std::ref`或`std::cref`与 结合使用[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)，默认情况下会创建您提供的参数的*副本：*

```
template<typename T>
void bar(T v1, T& v2)
//              ^
//              Second argument accepted by reference this time...
{
    v2 = v1 + 42;
}

int x = 0;
auto f = std::bind(bar, 0, ref(x));
//                         ^^^
//                         ...but without this, a copy of x would be created!

f(x);
std::cout << x; // Will print 42 
```

另请注意，您通常不会为`std::ref`or显式指定模板参数`std::cref`，而是让函数模板推导出它。

# jquery - FIle upload control onchange call javascript function but not access file in IE7, IE8,IE9?

> ID：15545319
> 
> 赞同：1
> 
> 时间：2013-03-21T10:46:37.050
> 
> 标签：jquery, asp.net-mvc

# Html code

```
 <input type="file" id="fileuplaod" onchange="readURL();"/> 
```

# javascript

```
 <script type="text/javascript">

    function readURL() {
  var myFileList = document.getElementById("loadfile");
        alert(myFileList.files.length);
        // loop through files property, using length to get number of files chosen
        for (var i = 0; i < myFileList.files.length; i++) {
            // display them in the div
            alert("Run"); 
            document.getElementById("display").innerHTML += "<br/>" + myFileList.files[i].name;
        }
}
</script> 
```

all browser run but not in IE7,IE8,IE9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:13:08.213

这可能对您有帮助 [点击这里](http://jehiah.cz/a/firing-javascript-events-properly)

以下函数在 IE 调用 onchange() 上运行良好；

```
function fireEvent(element,event){
if (document.createEventObject){
    // dispatch for IE
    var evt = document.createEventObject();
    return element.fireEvent('on'+event,evt)
}
else{
    // dispatch for firefox + others
    var evt = document.createEvent("HTMLEvents");
    evt.initEvent(event, true, true ); // event type,bubbling,cancelable
    return !element.dispatchEvent(evt);
} 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-15T19:32:26.580

```
// FileUpload Control Change Event--
<input type="file" id="fileUpload1" onchange="readPicUrl(this)">

// JavaScript --
function(input)
{
    if(input.files && input.files[0]){ var xPic = new FileRead(); xPic.readAsDataUrl(input.files[0]);  x.onload = function(e){ 
 $("#imageId").attr("src",e.target.result);
 }
 }
} 
```

# matlab - 拟合正弦模型

> ID：15545322
> 
> 赞同：0
> 
> 时间：2013-03-21T10:46:56.460
> 
> 标签：matlab, noise, period, spectral

我试图通过以下模型拟合以下正弦模型，这意味着确定性模型+白噪声：

```
function [x]=generate(N,m,A3)
f1=100;
f2=200;
T=1/f1;
for t=0:N*T/m:N*T
    WN(t)=rand(1,t)*2-1;
    x(t)=20*sin(2*pi*f1*t)+30*cos(2*pi*f2*t)+A3*WN(t);
end; 
```

但是当我使用以下命令运行时：

```
generate(100,10,40) 
```

我收到以下错误：

```
Subscript indices must either be real positive integers or logicals.

Error in generate (line 6)
    WN(t)=rand(1,t)*2-1; 
```

那么有什么问题呢？据我所知，我可以为`rand`函数使用两个参数，对吗？这里有什么问题？

更新：这就是我为修复它所做的

```
function [ x]=generate(N,m,A3)
WN=[];
f1=100;
f2=200;
T=1/f1;
k=0;
for t=0:N*T/m:N*T
   % WN(k)=rand(1,1)*2-1;
   % x(k)=20*sin(2*pi*f1*t)+30*cos(2*pi*f2*t)+A3*WN(k);
    %k=k+1;
    WN=rand*2-1;
     disp(20*sin(2*pi*f1*t)+30*cos(2*pi*f2*t)+A3*WN);
end; 
```

和结果

```
 generate(1000,10,40)
   25.4143

   -1.4678

   66.9518

   -9.6293

   51.9928

   55.3843

   59.4956

   -3.2451

   21.9826

   10.7896

   54.0055 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:52:23.223

rand(1,t) 生成 1 by t 矩阵，要获得标量值，您可以使用 rand(1,1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:05:14.603

请注意， sin 和 cos 接受向量参数，因此不需要 for 循环，

```
T = 1 / fs;
t = (0:N-1)' * T; 
WN = rand(N, 1) * 2; 
WN = WN - mean(WN); 
x = 20 * sin(2*pi*f1*t) + 30 * cos(2*pi*f2*t) + A3 * WN; 
```

此外，您的 T 值应该是 1 / 采样率，而不是 1 / f1（除非您在此频率下采样，在这种情况下，您不能期望看到正确的结果，因为您的频率都高于 fs / 2 的奈奎斯特频率，所以会有混叠）。此外，您应该减去整个向量 WN 的平均值，而不是盲目地假设平均值为 0.5（或 1，一旦乘以 2）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T12:27:41.807

我已解决如下：

```
function x = generate(N,m,A3)
f1 = 100;
f2 = 200;
T = 1./f1;
t = (0:(N*T/m):(N*T))';
wn = rand(length(t),1).*2 - 1;
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*wn;
end 
```

# jquery - fancybox2.0 无法使用 jquery ajax responseText 打开

> ID：15545324
> 
> 赞同：1
> 
> 时间：2013-03-21T10:47:05.420
> 
> 标签：jquery, ajax, fancybox, fancybox-2

我正在使用 fancybox2 打开一个新的 html。这里我通过jquery ajax 方法生成html。但fancybox2 没有反应。这是代码

```
 var Line = $.ajax({ type: "GET",
           url: "/ajaxHTML",
           dataType: 'html',
           success: function(result){alert(result);},
           }).responseText;

 $.fancybox.open({ 'content' : Line}, {type: 'html'}); 
```

我用错了吗？我可以用简单的文本或html代码打开fancybox。但不是这个 responseText 变量。并且ajax可以成功获取html。警报功能起作用并显示整个 html 页面的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:18:26.930

尝试 ：

```
$.fancybox.open(Line,{
    type: 'html'
}); 
```

... 或者

```
$.fancybox.open({
    content : Line,
    type: 'html'
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/Ht2h6/)**

# macos - 如何在 Cocoa 中居中 2 个按钮？

> ID：15545325
> 
> 赞同：2
> 
> 时间：2013-03-21T10:47:06.677
> 
> 标签：macos, cocoa

我有一个带有 2 个按钮的 OS X 应用程序。按钮很好地居中。

![未调整大小的窗口](../Images/73cb08d238ede4b4c01d2247ff22274f.png)

但是当我调整窗口大小时，按钮会停留在同一个地方。

![调整大小的窗口](../Images/6fb869d4ef960d8567cb9c4d5d0d1ed4.png)

如何对齐按钮，以便在调整窗口大小时它们始终居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:09:50.327

在自定义视图中嵌入两个按钮。您将获得`Embed Objects In`选项 un Layout。

![在此处输入图像描述](../Images/177f15d40a0cb18bbf2fe866e23de77c.png)

自定义视图的自动调整大小

![在此处输入图像描述](../Images/29191ff9757ab571ae6fe8bd9c107e47.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:07:38.483

当您使用 XCode4.6 时，默认情况下这将处于自动布局模式。

您需要将其更改为手动布局（我觉得执行此任务更容易）

[下载工作模型。](http://www.keepandshare.com/doc/6035993/resize-and-buttons-in-center-38k?da=y)

步骤如何做：

**点击XIB**

**取消选中使用自动布局**

![在此处输入图像描述](../Images/da8265aeb061e239ef3099c1940dcd10.png)

**转到导航器-> 嵌入框中** ![在此处输入图像描述](../Images/406cddab564bae8b582217b22d4c4a44.png)

**选择 Box -> Attributes Inspector -> Title Position None & Border Type None。** ![在此处输入图像描述](../Images/1ef66224548dd6a7b3c00ddab9b055d8.png)

**选择 texFiled -> 尺寸检查器** ![在此处输入图像描述](../Images/4d7df7e5fb01d3f3685100bd8b0a0e63.png)

**选择框->** ![在此处输入图像描述](../Images/6a39ac71ea1e0d679b3b73dda0722933.png)

# java - java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter 启动简单 Struts2 应用程序时

> ID：15545326
> 
> 赞同：3
> 
> 时间：2013-03-21T10:47:09.100
> 
> 标签：java, eclipse, maven, tomcat, struts2

我正在尝试运行一个简单的 Struts2 应用程序，但它总是抛出以下异常：

```
java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter 
```

[我已按照Create Struts 2 Web Application Using Maven To Manage Artifacts and To Build The Application](https://struts.apache.org/getting-started/how-to-create-a-struts2-web-application.html#create-struts-2-web-application-using-maven-to-manage-artifacts-and-to-build-the-application)中的分步教程进行操作，但我无法使其工作。

我还设法找到了其他使用 maven 但都失败的 Struts2 教程。当我尝试运行应用程序时，它会引发相同的异常。

我使用了以下内容：

*   蚀
*   马文
*   雄猫
*   Struts2

根据其他讨论，依赖项 jar 文件（例如 struts2-core）必须放在 lib 文件夹中，但就我而言，我使用的是 Maven，因此所有依赖项都已包含在 Maven 依赖项下的构建路径中。

我什至尝试运行 Struts2 网站 ( [Basic_Struts_2_Maven_2_3_1_2.zip](https://code.google.com/p/struts2-examples/downloads/detail?name=Basic_Struts_2_Maven_2_3_1_2.zip&can=2&q=) ) 中给出的示例项目，但我仍然没有运气。构建它是成功的，但在服务器上运行它总是失败。

我错过了什么吗？

**这是`web.xml`：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>Basic_Struts2_Maven</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
     <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

**`pom.xml`：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>manning</groupId>
    <artifactId>Basic_Struts2_Mvn</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>Basic Struts 2</name>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <build>
        <finalName>Basic_Struts2_Mvn</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.3.1.2</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>
    </dependencies>
</project> 
```

**`struts.xml`：**

```
<?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
    <struts>
        <constant name="struts.devMode" value="true" />
        <package name="basicstruts2" extends="struts-default">
            <action name="index">
                <result>/index.jsp</result>
            </action>
        </package>
    </struts> 
```

**`.classpath`：**

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/classes" path="src/main/java"/>
    <classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources"/>
    <classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
    <classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/J2SE-1.5"/>
    <classpathentry kind="con" path="org.maven.ide.eclipse.MAVEN2_CLASSPATH_CONTAINER"/>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:13:40.700

使用此命令将 Maven 项目转换为 Eclipse 的动态 Web 项目：

```
mvn eclipse:eclipse -Dwtpversion=3.4.2 
```

你可以改变你使用的任何 WTP 版本

`.classpath`应该是这样的

```
<classpath>
  <classpathentry kind="src" path="src/main/java" including="**/*.java"/>
  <classpathentry kind="src" path="src/main/resources" excluding="**/*.java"/>
  <classpathentry kind="output" path="target/classes"/>
  <classpathentry kind="var" path="M2_REPO/asm/asm/3.3/asm-3.3.jar"/>
  <classpathentry kind="var" path="M2_REPO/asm/asm-commons/3.3/asm-commons-3.3.jar"/>
  <classpathentry kind="var" path="M2_REPO/asm/asm-tree/3.3/asm-tree-3.3.jar"/>
  <classpathentry kind="var" path="M2_REPO/commons-fileupload/commons-fileupload/1.2.2/commons-fileupload-1.2.2.jar" />
  <classpathentry kind="var" path="M2_REPO/commons-io/commons-io/2.0.1/commons-io-2.0.1.jar"/>
  <classpathentry kind="var" path="M2_REPO/commons-lang/commons-lang/2.5/commons-lang-2.5.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/freemarker/freemarker/2.3.18/freemarker-2.3.18.jar"/>
  <classpathentry kind="var" path="M2_REPO/javassist/javassist/3.11.0.GA/javassist-3.11.0.GA.jar"/>
  <classpathentry kind="var" path="M2_REPO/junit/junit/3.8.1/junit-3.8.1.jar"/>
  <classpathentry kind="var" path="M2_REPO/ognl/ognl/3.0.4/ognl-3.0.4.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/apache/struts/struts2-core/2.3.1.2/struts2-core-2.3.1.2.jar"/>
  <classpathentry kind="lib" path="C:/Program Files/Java/jdk1.6.0_32/lib/tools.jar"/>
  <classpathentry kind="var" path="M2_REPO/org/apache/struts/xwork/xwork-core/2.3.1.2/xwork-core-2.3.1.2.jar"/>
  <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
</classpath> 
```

构建 WAR 文件后应部署到`%CATALINA_BASE%\webapps`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:04:49.183

亲爱的 Struts 2 Core 2.2.3.1 API 的部分。

我试图运行你链接的项目，它对我来说是正确的。没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:50:53.263

I think you specified like this

```
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-core</artifactId>
    <version>X.X.X.X</version>
</dependency> 
```

try to add

```
<dependency>
     <groupId>org.apache.struts</groupId>
     <artifactId>struts2-core</artifactId>
     <version>2.1.6</version>
    </dependency> 
```

# python - 如何在 Python 中实现持久计数器

> ID：15545327
> 
> 赞同：3
> 
> 时间：2013-03-21T10:47:10.147
> 
> 标签：python

有没有办法让 Python 中的“最后一个已知”计数器在服务器重启后仍然存在？

我有一个按计划（由 cron）启动的 python 脚本。它读取具有预定义格式的文档 ID 的文件。我需要记住最后处理的文档 ID，以便忽略所有以前的文档 ID（如果有的话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:01:28.913

您希望在重新启动后仍然存在的任何值都需要放入持久存储中 - 即磁盘。这意味着某种文件，无论是简单的纯文本文件还是数据库文件，都取决于您。您在评论中表示您不认为这是“跨平台”，但它确实是一个没有某种文件系统支持的奇怪平台。

如果您需要结构化存储，那么 SQLite 支持内置于 Python 的[`sqlite3`](http://docs.python.org/2/library/sqlite3.html)模块中。但是，听起来您只需要存储一个 ID，一个简单的文件就足够了。我建议这样的事情：

```
import os

DATA_FILENAME = os.path.expanduser("~/document-counter.txt")

def update_document_id(new_id):
    with open(DATA_FILENAME, "w") as fd:
        fd.write(new_id + "\n")

def retrieve_document_id():
    with open(DATA_FILENAME, "r") as fd:
        return fd.readline().strip() 
```

您可能应该进行更好的错误检查（例如，如果文件不存在，则捕获引发的异常等），但这让您了解解决方案的简单程度。你最好捕捉异常（[EAFP](http://docs.python.org/2/glossary.html#term-eafp)通常被认为比[LBYL](http://docs.python.org/2/glossary.html#term-lbyl)更 Pythonic ），但如果你想显式检查文件是否存在，那么这也很容易以可移植的方式进行：

```
if not os.path.exists(DATA_FILENAME):
    print "No file found. Deal with it." 
```

如果您以后需要添加更多数据字段，我建议使用 SQLite - 它方便、健壮，并且允许您与其他语言的应用程序进行互操作，如果将来需要的话。此外，如果需要，您可以使用独立的 SQLite 命令行客户端来操作数据。您只需为该`sqlite3.connect()`方法提供一个文件名，因此它本质上就像打开文件一样简单，只是您可以向它抛出 SQL。

但是，对于一个简单的单一 ID，我只会坚持使用纯文本文件 - 你真的没有比这更兼容的了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:00:24.190

将其存储在数据库或文件中。您可以选择将其写入文件；您可以选择使用`ConfigParser`or `csv`; 或者您可能会选择使用[`shelve`](http://docs.python.org/2/library/shelve.html)（它很好用且易于使用；如果这就是您想要持久存储的全部，它可能是最直接的）。还有其他选择；看看[标准库](http://docs.python.org/2/library/)提供了什么来感受一下。您仍然需要指定要存储结果的文件，并且权限需要适当，但这应该不难。

# c++ - 循环计数器上缺少警告

> ID：15545330
> 
> 赞同：5
> 
> 时间：2013-03-21T10:47:18.360
> 
> 标签：c++

我很难理解为什么以下代码没有警告：

```
unsigned test = 0xffffffff;

for (unsigned char i = 0; i < test; i++)
{
    // Some code
} 
```

这是在 Visual Studio 2010 上，但 GCC 显然也没有警告。有谁知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:50:54.190

从语言的角度来看，没有什么可警告的。 在评估之前`i`被提升到。并且它是完全明确定义的，它增加一个这样它环绕到零。`unsigned int``<``unsigned char`

~~不幸的是，这段代码做了一些令人讨厌的事情。但目前尚不清楚编译器需要应用什么规则才能检测到这类事情。~~

**感谢下面评论中的@unwind：**您可以让 GCC 警告这样一个事实，即该比较必须始终使用[`-Wtype-limits`](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wtype_002dlimits-411)标志评估为真。

**更新 2：**显然上述选项在这种情况下不起作用（我现在手头没有“现代”版本的 GCC ......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:51:11.473

`i`被提升到`unsigned`，然后与 比较`test`。这里没有问题。出色地。i++ 会溢出字符，但这是一个运行时问题。我的意思是，在 255 之后它将为 0，这可能不是作者所期望的，如果没有其他形式的终止它（中断、重新调整等），则使循环可能无限，这是一个可能的“逻辑" 运行时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:55:12.120

从标准草案：

> **4.5 积分促销**
> 
> 如果 int 可以表示源类型的所有值，则可以将除 bool、char16_t、char32_t 或 wchar_t 的整数转换等级 (4.13) 小于 int 等级的整数类型的纯右值转换为 int 类型的纯右值; 否则，可以将源纯右值转换为 unsigned int 类型的纯右值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T10:53:35.640

因为比较`unsigned char`and`unsigned`是完全合法的。由于循环计数器明显溢出，问题才开始出现，但我不确定编译器是否会[*那么*聪明](http://en.wikipedia.org/wiki/Telepathy)。

# php - 如何从某行获取 MySQL 值？

> ID：15545332
> 
> 赞同：-3
> 
> 时间：2013-03-21T10:47:23.333
> 
> 标签：php, mysql

我有一张有 5 行的桌子。每次用户在表单中输入数据时，它都会被输入到表格中。我的第一列被称为`id`并保存帖子的编号。我想要做的是`id`从上一行获取值，添加一个并将其设置为当前帖子`id`字段中的值。我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T10:48:53.153

只需将该字段设置为`primary key`and `auto-increment`，它将自动为您执行此操作。你不必这样做，`fetch the previous row`下一个。`add``field value`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:48:45.753

您需要的 SQL 查询是：

```
SELECT max(id) 
FROM tableName; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T10:53:23.377

`auto increment`为包含 5 列的表中的“ID”字段设置属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T10:50:54.393

您可以使用 sql 查询，例如

```
"INSERT INTO my_table (id auto_increment,primary key(id))"; 
```

那么你可以得到...

并且每次您不必担心插入 id 时，它都会自动递增

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T10:50:54.870

我不建议这样做，因为它可能导致[竞争状况](http://en.wikipedia.org/wiki/Race_condition)。

更改表结构并将`id`字段设置为`primary key`并将其设置为`auto increment`。这样，无论何时添加新行，它都会自动神奇地分配下一个 ID。

有关如何设置自动增量的详细信息，请参阅[此答案。](https://stackoverflow.com/questions/2169080/mysql-alter-a-column-to-be-auto-increment)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-04T14:12:25.623

这是更改表的查询，它将您的字段或列设置为主键并自动递增它。

```
ALTER TABLE tbl ADD id INT PRIMARY KEY AUTO_INCREMENT; 
```

# networking - TCP 3_way 握手后 TCP 客户端和服务器是否处于等效状态

> ID：15545334
> 
> 赞同：3
> 
> 时间：2013-03-21T10:47:32.290
> 
> 标签：networking, tcp

当 TCP 客户端想要与 tcp 服务器建立 tcp 连接时，它需要发送 SYN 然后 ACK 而 tcp 服务器只发送 SYN/ACK 所以它们是不同的

但是，在3次握手之后，这个连接是不是对称的，即TCP客户端和服务器是否处于平等状态，例如，在3次握手之后，通常是客户端先发送数据包，TCP服务器可以先发送数据包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:59:10.477

连接建立后，两端确实是“对称的”。谁先发送由底层协议决定，并且在它们之间有所不同。

例如，HTTP 以`GET <path> HTTP/1.0`命令开头，而其他协议让服务器先给出问候语，然后客户端才发送其请求。

所以一般来说，两端都可以先发送他们的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:14:54.883

不，这个过程根本没有什么不同，但是服务器不是在两个不同的数据包中发送一个 SYN 然后一个 ACK​​，而是通过一个数据包发送它们来连接它们！

另一方面，请始终记住客户端/服务器命名是相对的。服务器是保持监听模式的一方，而客户端是发起连接的一方……连接
建立后，双方是等价的（和你说的一样的状态：ESTABLISHED）。因此，两者都可以发送 FIN 语句来关闭连接......

# java - 当我使用 httpurlconnection 时如何设置 tcp.nodelay

> ID：15545335
> 
> 赞同：1
> 
> 时间：2013-03-21T10:47:33.237
> 
> 标签：java, tcp

如何`tcp.nodelay`为以下给定代码设置：

```
URL url = new URL(urlText);
HttpURLConnection conn = (HttpURLConnection) url.openConnection(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:04:03.837

据我所知，您不能`tcp.noDelay`在“HttpURLConnection”上进行设置，因为这不允许任何接口更改底层 tcp 套接字。

我可以推荐的是尝试使用[Apache http 客户端](http://hc.apache.org/httpcomponents-client-ga/index.html)，因为它提供了设置多个 TCP 选项的机制。看看这个[DefaultHttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html)

# c - 进程名称来自其在 linux 中的 pid

> ID：15545341
> 
> 赞同：32
> 
> 时间：2013-03-21T10:47:43.860
> 
> 标签：c, linux, process, system, pid

如何从他的 pid 中获取进程名称？例如，我执行 cat file1.txt，但我想弄清楚 cat 命令及其参数，因为它在系统中是 pid。是否有一个结构来确定它或类似的东西？任何的想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-21T10:56:05.850

没有任何通用方法可以执行此 unix。
每个操作系统都有不同的处理方式，有些非常困难。不过，您提到了 Linux。对于 Linux，信息位于 /proc 文件系统中。
要获取进程 id 9999 的命令行，请读取文件`/proc/9999/cmdline`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-21T11:00:49.850

在 linux 上，您可以查看`/proc/`. 尝试输入`man proc`以获取更多信息。的内容`/proc/$PID/cmdline`将为您提供运行该进程的命令行`$PID`。还有`/proc/self`用于检查自己:)

另一种方法（例如在 Mac OS X 上）是使用`libproc`. 请参阅[libproc.h](http://www.opensource.apple.com/source/dtrace/dtrace-90/libproc/libproc.h)。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-06T03:32:52.910

POSIX C 不支持为通过 PID 获取进程名称提供标准 API。

在 linux 中，您可以通过 LINUX Proc API 获取名称：/proc/$PID/cmdline。代码如下所示：

```
const char* get_process_name_by_pid(const int pid)
{
    char* name = (char*)calloc(1024,sizeof(char));
    if(name){
        sprintf(name, "/proc/%d/cmdline",pid);
        FILE* f = fopen(name,"r");
        if(f){
            size_t size;
            size = fread(name, sizeof(char), 1024, f);
            if(size>0){
                if('\n'==name[size-1])
                    name[size-1]='\0';
            }
            fclose(f);
        }
    }
    return name;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-09-08T06:00:27.510

要获取进程 ID 的进程名称，例如 9000，请使用以下命令：

```
ps -p 9000 -o comm= 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-17T15:13:55.513

虽然已经回答了这个问题，但我想加上我的 2 美分。

就我而言，当进程通过（至少这是我听到的）`1111`创建进程时，不会给出正确的进程名称，而是给出类似. 我必须使用来获得正确的进程名称。`22222``pipe``/proc/2222/cmdline``1111_1``/proc/2222/comm`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-29T12:29:46.967

在 Linux 中使用以下命令

```
ls -l /proc/[pid]/exe 
```

它将给出进程/应用程序名称的名称

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-11T06:11:00.720

`ps --pid <pid> -o comm h`: 此命令给出可执行文件名。例如，如果您运行脚本 name.sh，则上述命令将输出为`bash`

`ps --ppid <pid> -o comm h`：此命令给出的输出为`name`

# java - 将捕获的图像发送到android中的Web服务器

> ID：15545343
> 
> 赞同：4
> 
> 时间：2013-03-21T10:47:51.443
> 
> 标签：java, android, web-services, android-intent

我想借助意图发送捕获的图像并将图像发送到远程服务器。我正在使用以下代码：

```
String image_str;
String URL =**************/image.php?;
ArrayList<NameValuePair> nameValuePairs;

imageview.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // TODO Auto-generated method stub
        TakePhoto();

    }
});

private void TakePhoto() {

    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
    startActivityForResult(intent, 0);

}

BitmapFactory.Options btmapOptions;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == 0 && resultCode == RESULT_OK) {
        if (data != null) {

            /*  photo = (Bitmap) data.getExtras().get("data");

            imageview.setImageBitmap(photo); *//* this is image view where you want to set image*/

            Log.d("camera ---- > ", "" + data.getExtras().get("data"));

            Toast.makeText(getApplicationContext(), getLastImageId(), Toast.LENGTH_LONG).show();
            btmapOptions = new BitmapFactory.Options();

            photo = BitmapFactory.decodeFile( getLastImageId(), btmapOptions);
            imageview.setImageBitmap(photo);

        }
        // sendImg();
        dialog = ProgressDialog.show(surakhaActivity.this, "", "Uploading file...", true);
        new Thread(new Runnable() {
            public void run() {
                runOnUiThread(new Runnable() {
                    public void run() {

                    }
                });                      
                sendImg();
                //  Toast.makeText(getBaseContext(), response, Toast.LENGTH_LONG).show();

            }
        }).start();    
    }
}

private String getLastImageId() {
    final String[] imageColumns = { MediaStore.Images.Media._ID,
                MediaStore.Images.Media.DATA };
    final String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
    Cursor imageCursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns,
                null, null, imageOrderBy);
    if (imageCursor.moveToFirst()) {
        int id = imageCursor.getInt(imageCursor
                    .getColumnIndex(MediaStore.Images.Media._ID));
        String fullPath = imageCursor.getString(imageCursor
                    .getColumnIndex(MediaStore.Images.Media.DATA));

        imageCursor.close();
        return fullPath;
    } else {
        return "no path";
    }
}

InputStream inputStream;
File f;
public String convertResponseToString(HttpResponse response) throws IllegalStateException, IOException {

    String res = "";
    StringBuffer buffer = new StringBuffer();
    inputStream = response.getEntity().getContent();
    int contentLength = (int) response.getEntity().getContentLength(); //getting content length…..
    Toast.makeText(surakhaActivity.this, "contentLength : " + contentLength, Toast.LENGTH_LONG).show();
    if (contentLength < 0) {
    }
    else {
        byte[] data = new byte[512];
        int len = 0;
        try {
            while (-1 != (len = inputStream.read(data)) ) {
                buffer.append(new String(data, 0, len)); //converting to string and appending  to stringbuffer…..
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        try {
            inputStream.close(); // closing the stream…..
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        res = buffer.toString();     // converting stringbuffer to string…..

        //  Toast.makeText(MainActivity.this, "Result : " + res, Toast.LENGTH_LONG).show();
    }
    return res;
}

public void sendImg() {

    ByteArrayOutputStream stream = new ByteArrayOutputStream();

    photo.compress(Bitmap.CompressFormat.PNG, 90, stream); //compress to which format you want.

    byte [] byte_arr =  stream.toByteArray();
        image_str = Base64.encodeBytes(byte_arr);
        nameValuePairs = new  ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("imgdata",image_str));

        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(URL);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            the_string_response = convertResponseToString(response);

            // editor.putString("imgRes", the_string_response);editor.commit();
            Toast.makeText(surakhaActivity.this, "Response " + the_string_response, Toast.LENGTH_LONG).show();
        } 
        catch(Exception e) {
            Toast.makeText(surakhaActivity.this, "ERROR " + e.getMessage(), Toast.LENGTH_LONG).show();

        }

        dialog.dismiss();   
        this.finish();
    }
} 
```

但是捕获图像和发送进度对话框会无限运行，并且不会发送图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T04:50:11.783

这看起来很腥...

```
dialog = ProgressDialog.show(surakhaActivity.this, "", "Uploading file...", true);
            new Thread(new Runnable() {
                   public void run() {
                        runOnUiThread(new Runnable() {
                               public void run() {

                               }
                           });                      
                        sendImg();
                  //  Toast.makeText(getBaseContext(), response, Toast.LENGTH_LONG).show();

                   }
                 }).start(); 
```

你能在 sendImg() 方法上放一个“Log”，看看它是否被调用过吗？

# android - 使用 android:process=":remote" 重新创建 android Application 对象

> ID：15545345
> 
> 赞同：5
> 
> 时间：2013-03-21T10:47:54.713
> 
> 标签：android, service, process

我在我的应用程序中使用 AIDL 服务。我还想运行另一个进程，所以我`android:process=":remote"`在清单中的服务声明中使用。

我的问题是，当`:remote`进程启动时，它显然会重新创建`Application`对象。

我真的不这样做，因为我覆盖了应用程序对象并在`onCreate()`方法中调用了很多客户端的东西。然而，我希望服务代码与客户端驻留在同一个 apk 中。

我能做到吗？`Application`新进程启动时是否总是重新创建对象？

感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:59:19.320

> 我也想运行另一个进程

为什么？这为用户增加了什么价值，以抵消额外的 RAM、CPU 和电池成本？很少有应用程序需要多个进程。

> 我的问题是，当 ':remote' 进程启动时，它显然会重新创建 Application 对象

当然。每个过程都有自己的。

> 我真的不这样做，因为我覆盖了应用程序对象并在“onCreate（）”方法中调用了很多客户端的东西

然后摆脱`android:process=":remote"`。您的用户会感谢您。

> 然而，我希望服务代码与客户端驻留在同一个 apk 中。

什么服务？

> 新进程启动时是否总是重新创建应用程序对象？

是的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-06T20:25:52.300

正如**CommonsWare**已经提到的，每个进程都有自己的`Application`对象。

在您的`Application.onCreate()`方法中，您可以检查是从主进程内还是从远程进程内调用该方法，并相应地初始化不同的东西。

```
@Override
public void onCreate()
{
    super.onCreate();

    if(isRemoteProcess(this))
    {
        // initialize remote process stuff here
    }
    else
    {
        // initialize main process stuff here
    }
}

private boolean isRemoteProcess(Context context)
{
    Context applicationContext = context.getApplicationContext();
    long myPid = (long) Process.myPid();
    List<RunningAppProcessInfo> runningAppProcesses = ((ActivityManager) applicationContext.getSystemService("activity")).getRunningAppProcesses();
    if (runningAppProcesses != null && runningAppProcesses.size() != 0)
    {
        for (RunningAppProcessInfo runningAppProcessInfo : runningAppProcesses)
        {
            if (((long) runningAppProcessInfo.pid) == myPid && "YOUR_PACKAGE_NAME:remote".equals(runningAppProcessInfo.processName))
            {
                return true;
            }
        }
    }
    return false;
} 
```

# regex - 如何将 vim 中的匹配规则合二为一？

> ID：15545348
> 
> 赞同：1
> 
> 时间：2013-03-21T10:48:00.757
> 
> 标签：regex, vim

我有一个日志文件，其中有 DEBUG、NORMAL 和 CRITICAL 条目以及一些不以常规（对于此类日志）数据开头的信息，例如`[20130313:123412]`

```
[210313:100114] NORMAL: this is normal log
[210313:100114] DEBUG: ../../common/
Additional info: 
number of .... 
```

我想删除这两个`DEBUG`条目以及那些不以`[`

我知道我可以这样做：

```
:g/DEBUG/d 
```

和

```
:g!/^\[/d 
```

我怎样才能把它合二为一？或者正确使用正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:52:17.367

将它们都转换为正面或负面规则（视情况而定），然后您可以使用`\|`（“或”）来匹配其中一个或另一个。

```
:g/^[^\[]\|DEBUG/d 
```

这样就可以了。`^[^\[]`对于以非开头的行`[`，或包含 的`DEBUG`行

# couchbase - CouchBase (2.0.1) 是否支持 Windows 32 位？

> ID：15545349
> 
> 赞同：1
> 
> 时间：2013-03-21T10:48:02.750
> 
> 标签：couchbase

[下载](http://www.couchbase.com/download)页面没有最新版本 - 2.0.1 的 Windows 版本。版本 2.0.0 有一个 Windows 64 位安装。

我想知道自 2.0.0 以来不支持 Windows 32 位以及自 2.0.1 以来根本不支持 Windows 的原因。

是不是他们不提供二进制文件，但仍然可以使用[构建指令](http://www.couchbase.com/wiki/display/couchbase/Building+Couchbase+from+Source+on+Windows)为 Windows 32 位构建它？

还是有更深层次的原因，例如使用 Windows 32 位 (2.0.0) 不可用或 Windows 根本不可用 (2.0.1) 的 API？

我之所以问，是因为我正在考虑在 32 位和 64 位的 Windows 上构建它，但想确保这项工作从一开始就注定不会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:52:03.507

我们非常了解这种情况。计划是尽快发布 64 位的 2.0.1。我们的 Windows 版本存在一些延迟，并希望确保质量尽可能高。所以期待一个 2.0.1 64bit 很快。

也就是说，我认为我们不会有 2.0.x 32 位的生产就绪版本。我们目前正在开发的是一个 32 位版本，人们可以使用它进行开发，但不建议在生产中使用（类似于我们的 Mac OS X 版本）。

我不能给你一个具体的时间表，但我认为我们正在谈论“周”。如果您想从其中一位开发人员那里获得直接反馈，请通过 Twitter (@trondn) 与 Trond Norbye 联系。

这回答了你的问题了吗？

# bigcommerce - BigCommerce JavaScript API

> ID：15545350
> 
> 赞同：2
> 
> 时间：2013-03-21T10:48:15.607
> 
> 标签：bigcommerce

在 BigCommerce 中，我可以使用 JavaScript 访问当前客户的记录吗？

我想根据当前客户所在的客户群更改产品页面上的某些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:22:09.400

Bigcommerce 还没有 JS SDK。但是，由于 API 是安静的，您应该能够执行一个简单的 GET 请求来获取客户的记录。唯一的挑战是您需要在他们登录商店时获取客户 ID/信息，然后获取他们的记录。

Bigcommerce 论坛上有一个关于使用 Javascript 为未登录的客户隐藏定价的示例。

[http://forum.bigcommerce.com/f4/global-variable-for-current-user-s-group-1815/index2.html](http://forum.bigcommerce.com/f4/global-variable-for-current-user-s-group-1815/index2.html)

这与客户端点 ( [http://developer.bigcommerce.com/api/customers](http://developer.bigcommerce.com/api/customers) ) 上的 GET 请求相结合，应该会让您朝着这个方向前进。

这有帮助吗？您在寻找代码示例吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-15T13:30:56.430

使用 Javascript 或 jQuery 来执行 IF 语句。然后使用 Ajax 请求您想要显示给用户的数据。

因此，要直接使用 Javascript 回答您的问题，您不能，而是将其与一些 PHP 结合起来，然后您使用 API 来做您想做的事情。

希望这可以帮助 ：）

# java - 使用 @FormParam 的 PUT 方法

> ID：15545351
> 
> 赞同：1
> 
> 时间：2013-03-21T10:48:16.583
> 
> 标签：java, json, rest, put, form-parameter

如果我有类似的东西：

```
@PUT
@Path("/login")
@Produces({"application/json", "text/plain"})
@Consumes("application/json")
public String login(@FormParam("login") String login, @FormParam("password") String password) throws Exception
{
    String response = null;
    response = new UserManager().login(login, password);
    return response;
} 
```

如何输入这两个参数来测试我的 REST 服务（在内容字段中）？不是这样的：

```
{"login":"xxxxx","password":"xxxxx"} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:52:41.217

Form parameter data will only be present when you submit ... form data. Change the `@Consumes` type for your resource to `multipart/form-data`.

```
@PUT
@Path("/login")
@Produces({ "application/json", "text/plain" })
@Consumes("multipart/form-data")
public String login(@FormParam("login") String login,
        @FormParam("password") String password) {
    String response = null;
    response = new UserManager().login(login, password);
    return response;
} 
```

Then on your client side, set:

*   Content-Type: multipart/form-data
*   Add form variables for `login` and `password`

On a side note, assuming this isn't for learning, you will want to secure your login endpoint with SSL, and hash the password before sending it across the wire.

* * *

***EDIT***

Based on your comment, I am including an example of sending a client request with the required form data:

```
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost post = new HttpPost(BASE_URI + "/services/users/login");

    // Setup form data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("login", "blive1"));
    nameValuePairs.add(new BasicNameValuePair("password",
            "d30a62033c24df68bb091a958a68a169"));
    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute request
    HttpResponse response = httpclient.execute(post);

    // Check response status and read data
    if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
        String data = EntityUtils.toString(response.getEntity());
    }
} catch (Exception e) {
    System.out.println(e);
} 
```

# android - 无法使用意图启动 Activity

> ID：15545352
> 
> 赞同：0
> 
> 时间：2013-03-21T10:48:17.667
> 
> 标签：android, android-intent, android-activity

我有一个初始化的按钮

```
button1= (Button)findViewById(R.id.button1); 
```

我有 OnClick() 函数

```
public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(this, MainActivity2.class);
        startActivity(intent);

    } 
```

我的新活动的名称是清单文件中的 MainActivity2

```
 <activity
            android:name="com.example.intent.MainActivity2"
            android:label="@string/title_activity_main_activity2" >
        </activity> 
```

但是第二个活动永远不会启动

请帮忙。

**活动一**

```
public class MainActivity extends Activity implements OnClickListener {

    Button button1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button1= (Button)findViewById(R.id.button1);

    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(this, MainActivity2.class);
        startActivity(intent);

    }

} 
```

**XML 布局**

```
<activity
            android:name="com.example.intent.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.intent.MainActivity2"
            android:label="@string/title_activity_main_activity2" >
        </activity>
    </application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:56:58.570

您没有将`onClick`事件注册到按钮。

**从：**

```
public class MainActivity extends Activity implements OnClickListener {

    Button button1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button1= (Button)findViewById(R.id.button1);

    }
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(this, MainActivity2.class);
        startActivity(intent);
    }
} 
```

**至：**

```
public class MainActivity extends Activity implements OnClickListener {

    Button button1;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button1= (Button)findViewById(R.id.button1);
        button1.setOnClickListener(this);
    }
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(this, MainActivity2.class);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:12:54.210

哥们，你只需要从你的代码中改变一个词..

```
public class MainActivity extends Activity implements OnClickListener {

Button button1;

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    if (R.id.button1) {
    Intent intent = new Intent(MainActivity.this, MainActivity2.class);
    startActivity(intent);
    }
}

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    button1= (Button)findViewById(R.id.button1);
    button1.setOnClickListener(this);
} 
```

这肯定会奏效....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:53:50.287

改变

```
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    Intent intent = new Intent(this, MainActivity2.class);
    startActivity(intent);

} 
```

至

```
button1.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    Intent intent = new Intent(this, MainActivity2.class);
    startActivity(intent);
   }
}; 
```

您应该将 onClicklistener 设置为按钮

# json - 如何从 Titanium 中的 JSON 字符串中转义“\”？

> ID：15545353
> 
> 赞同：2
> 
> 时间：2013-03-21T10:48:23.070
> 
> 标签：json, titanium, titanium-modules

我编写了一个原生 android 模块，在其中我将 Json 字符串返回到 JavaScript 层。但是在 javascript 层中，我在这个 json 字符串中添加了“\”，用于所有“”。如何从 json 字符串中转义这个“\”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:49:51.010

似乎您`json`不是“真正的 JSON 对象”，而只是一个字符串。这解释了为什么`"`符号被转义。尝试`JSON.parse()`在您的 javascript 中使用。

```
var my_json_string = "{\"my_key\": \"the_value\"}";
var my_json_object = JSON.parse(my_json_string);
// should render something like 
// Object {my_key: "the_value"} 
```

# mysql - Mysql为表的现有列加载数据

> ID：15545356
> 
> 赞同：5
> 
> 时间：2013-03-21T10:48:38.870
> 
> 标签：mysql, ubuntu, load-data-infile

最初我上传了 Using load Data Infile 行就像 100000 Im Using Ubuntu

示例：数据

ToneCode....艺术家...电影名...语言

1........Mj.............空............英语

3........AB.............空............英语

4........CD............空............英语

5........EF.............空............英语

但现在我必须更新从 ToneCode 1 到 100000 行的列 MovieName 我在 .csv 文件中有要更新的数据。请建议如何使用数据上传现有表的 .Csv 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:11:18.360

我认为使用纯 MySQL 且无需额外脚本的最快方法如下：

*   创建一个临时表，两列 ToneCode 和 MovieName 与目标表中的相同
*   使用 LOAD DATA INFILE 将新 CSV 文件中的数据加载到该文件中
*   使用[http://dev.mysql.com/doc/refman/5.1/en/update.html](http://dev.mysql.com/doc/refman/5.1/en/update.html)描述的类似 INNER JOIN 的语法更新您的目标表：

    `UPDATE items,month SET items.price=month.price WHERE items.id=month.id;`

    这将“连接”两个表`items`，并且`month`（通过仅使用“逗号语法”进行内部连接）使用`id`列作为连接条件，并使用`items.price`列的值更新`month.price`列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:08:53.230

正如你们上面提到的那样，我已经找到了解决方案

索恩：示例

创建表A（Id int主键，名称Varchar（20），艺术家Varchar（20），MovieName Varchar（20））；

使用添加我所有的 100000 行

将文件 '/Path/file.csv' 中的数据加载到表 tablename(A) 字段中以 ',' 结尾，并由 '"' 以 '\n' (Id,Name,Artist) 结尾的行结束，这里的电影值为 null

创建临时表 TA(Id int primary Key,MovieName Varchar(20));

将数据上传到临时表 TA 将文件 '/Path/file.csv' 中的数据加载到表 tablename(A) 字段中，以 ',' 结尾，由 '"' 括起来，行以 '\n'(IDx,MovieName) 结尾

现在像你说的那样使用join

更新 Tablename(TA),TableName(A) 设置 A.MovieName=TA.MovieName Where A.Id=TA.Id

# tcp - WIFI 问题以及如何激活 TCP Westwood

> ID：15545357
> 
> 赞同：3
> 
> 时间：2013-03-21T10:48:39.840
> 
> 标签：tcp, wifi, freeze

在 windows compact framework 2.0 (windows mobile) 上使用设备和在 windows server 2008 R2 上使用带有 IIS (7) 的服务器时，我们遇到了问题。我们在WIFI上。

我们遇到了许多延迟和冻结的问题。我们的应用程序非常简单。它只是向服务器发送一个非常小的请求（10 个字符的字符串），服务器将以相同长度的字符串进行响应。每 3 或 4 秒从设备向服务器发出一次请求。

它运行良好一段时间，突然冻结。它与其他客户端环境一样：因此唯一不同的是网络本身（不是设备或服务器，它们都单独和一起测试，并且它们在有线网络上表现良好）。

我们正在使用 TCP，我们读到它在 WIFI 上效果不佳，在有线网络（拥塞）上，数据包丢失并不总是由于相同的原因。

**有人在 WIFI 上的 TCP 上遇到过像我们这样的冻结问题吗？您认为我们指出了与您相同的问题（TCP over WIFI）吗？**

我们想更改使用的协议。我们想尝试的第一件事是 TCP Westwood。

**windows server 和 windows mobile 上不提供 TCP Westwood 吗？如果是，你如何激活它？**.

我们最后的解决方案是使用 UDP 构建我们自己的服务器和协议。但这是一项艰苦的工作。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-07T06:08:15.760

尝试将 TCP_NODELAY 套接字选项设置为发送小于 1500 的小块。这将提高有损网络的性能。

# html - href 不工作的 html

> ID：15545358
> 
> 赞同：-3
> 
> 时间：2013-03-21T10:48:41.537
> 
> 标签：html

我试图链接一个页面，但主页和登录的 href 不起作用。

```
<div id="menu_wrapper">
    <div id="container">
        <ul class="menu" rel="sam1">
            <li class="active"><a href="index.php">Home</a></li>
            <li class="menu_login"><a href="./login.php">Login</a></li>
        </ul>
    </div>
    </div> 
```

这是我的代码： [代码](http://jsfiddle.net/misel/fP5RC/2/)

它不会向我显示页面。在浏览器中输入 localhost/index.php，当我尝试单击登录时，我显示它发送到 localhost/index.php#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:02:46.620

您可以在*标题中设置***[基本](http://www.w3schools.com/tags/tag_base.asp)**标签：

 *```
<head>
<base href="http://stackoverflow.com">
</head>
<body>
<a href="index.php">base</a>
</body> 
```

你的链接是：

```
http://stackoverflow.com/index.php 
```

在所有**文件夹**和**子文件夹中。***

# java - 当我从 Eclipse (Juno) 运行声纳本地分析时出错 - 我使用 maven 构建

> ID：15545365
> 
> 赞同：2
> 
> 时间：2013-03-21T10:49:02.333
> 
> 标签：java, eclipse, maven-2, sonarqube

我正在使用声纳的 Maven 集成。我的服务器设置并正常运行，我可以在浏览器中查看报告，以及在 Eclipse 中查看违规行为。
我的问题是我想在 Eclipse 中运行本地分析，以便我可以重构违规并动态查看更改是 Eclipse 本身。
但是本地分析失败并显示下面提到的跟踪。

```
Runner configuration file: NONE<br>
Project configuration file: NONE<br>
Runner version: 2.0<br>
Java version: 1.6.0_41, vendor: Sun Microsystems Inc.<br>
OS name: "Windows 7", version: "6.1", arch: "amd64"<br>
Default locale: "en_US", source code encoding: "Cp1252"<br>
Server: [http://localhost:9000]<br>
Work directory: C:\dev\UPS Eclipse<br>
workspace\ips\.metadata\.plugins\org.eclipse.core.resources\.projects\ips-client\org.sonar.ide.eclipse.core<br>
Total time: 8.058s<br>
Exception in thread "main" org.sonar.runner.RunnerException: org.sonar.runner.RunnerException: No files matching pattern "dhbcore.jar" in directory "C:\Users\sg0213152\.m2\repository\com\ibm\com.ibm.dhbcore\7.5.0.0"<br>
    at org.sonar.runner.Runner.delegateExecution(Runner.java:288)<br>
    at org.sonar.runner.Runner.execute(Runner.java:151)<br>
    at org.sonar.runner.Main.execute(Main.java:84)<br>
    at org.sonar.runner.Main.main(Main.java:56)<br>
Caused by: org.sonar.runner.RunnerException: No files matching pattern "dhbcore.jar" in directory "C:\Users\sg0213152\.m2\repository\com\ibm\com.ibm.dhbcore\7.5.0.0"<br>
    at org.sonar.runner.internal.batch.SonarProjectBuilder.getLibraries(SonarProjectBuilder.java:440)<br>
    at org.sonar.runner.internal.batch.SonarProjectBuilder.cleanAndCheckModuleProperties(SonarProjectBuilder.java:327)<br>
    at org.sonar.runner.internal.batch.SonarProjectBuilder.cleanAndCheckProjectDefinitions(SonarProjectBuilder.java:305)<br>
    at org.sonar.runner.internal.batch.SonarProjectBuilder.generateProjectDefinition(SonarProjectBuilder.java:123)<br>
    at org.sonar.runner.internal.batch.Launcher.execute(Launcher.java:58)<br>
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br>
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br>
    at java.lang.reflect.Method.invoke(Method.java:597)<br>
    at org.sonar.runner.Runner.delegateExecution(Runner.java:285)<br>
    ... 3 more<br>
Final Memory: 1M/120M<br> 
```

PS：我在指定位置已经存在名为“com.ibm.dhbcore-7.5.0.0”的 jar。此外，如果我将此文件重命名为它正在搜索的确切字符串，则它会显示缺少其他一些 jar。我试着做了大约 10-15 个罐子，直到我最终放弃了。

版本：
Eclipse：Juno
Sonar：3.4.1
Sonar Java Analyzer（Eclipse 插件）：3.0

**解决方案 - 将 SonarQube 升级到最新版本 将**
SonarQube 升级到 3.7.2 将
Sonar Java Analyzer 升级到 3.2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T07:51:09.423

请检查您在 Eclipse 中的项目设置，尤其是“Java Build Path”=>“Libraries”。您应该有无效条目，例如“C:\Users\sg0213152.m2\repository\com\ibm\com.ibm.dhbcore\7.5.0.0\dhbcore.jar”

您也可以尝试使用更新版本的 SonarQube Eclipse（但这可能会迫使您也升级您的 SonarQube 服务器）。我们在 sonar.libraries 中添加文件之前添加了存在检查，以防止无效的 Eclipse 类路径。

# java - 从 Spring 托管 bean 向侦听器发送事件

> ID：15545368
> 
> 赞同：1
> 
> 时间：2013-03-21T10:49:13.097
> 
> 标签：java, spring

我想在我的存储库层中创建一个事件通知器，以便我可以添加侦听器。我正在使用 Spring，我想知道这是否是一种好的方法？还是有更好的方法在 Spring 中实现通知/侦听器？

```
@Repository
public class JdbcRepository {

    private List<InsertListener> insertListeners;

    public void insert(final SomeObject object) {
        // Ommited code for brewity
        for (InsertListener listener : insertListeners) {
            listener.notifiy(...);
        }
    }
} 
```

弹簧配置 xml

```
<bean id="jdbcRepository" class="mypackage.JdbcRepository">
    <property>
        <bean ref="myRepositoryListeners" />
    </property>
</bean>

<bean id="myRepositoryListeners" class="java.util.List">
    <constructor-arg>
    <list>
        <ref bean="..." />
        <ref bean="..." />
    </list>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:00:49.467

你可以这样做

```
public class JdbcRepository {
    @Autowired
    ApplicationContext context;
    Collection<InsertListener> listeners;

    @PostConstruct
    public void init() {
        listeners = context.getBeansOfType(InsertListener.class).values();
    }
... 
```

上下文.xml

```
<context:annotation-config />
<bean id="l1" class="InsertListener" />
<bean id="l2" class="InsertListener" />
<bean id="repo" class="JdbcRepository" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:59:14.000

查看[Guava 事件](https://code.google.com/p/guava-libraries/wiki/EventBusExplained) 和一些[Spring](http://pmeade.blogspot.com/2012/06/using-guava-eventbus-with-spring.html)对它的支持。

# c# - 通过 Windows 任务计划程序调用 SSIS 包时，发送邮件任务在 SSIS 中不起作用

> ID：15545370
> 
> 赞同：3
> 
> 时间：2013-03-21T10:49:18.557
> 
> 标签：c#, email, ssis, scheduled-tasks, windows-task-scheduler

我有一个 SSIS 包，它读取文件夹中存在的 csv 文件并将数据上传到数据库中。它还有一个发送邮件组件，用于在读取 csv 文件并上传数据后发送邮件。此包是从 C# 控制台应用程序以编程方式调用的。在控制台应用程序中，该包会为文件夹中存在的每个文件调用一次。此控制台应用程序计划通过 Windows 任务计划程序在每天的特定时间运行。

我面临的问题是，当我直接双击控制台应用程序的exe并运行它时，数据上传成功，邮件也正在发送。但是，当从任务计划程序调用同一个控制台应用程序的 exe 时，来自 csv 文件的数据已成功上传，但未发送邮件（在计划程序的情况下邮件功能不起作用）

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:49:02.567

最可能的原因是权限问题；运行控制台应用程序的帐户无权发送电子邮件，而您的帐户则有权发送电子邮件。控制台应用程序是否生成任何错误日志、Windows 事件日志条目等？

# javascript - 提交后清空文本区域的内容

> ID：15545379
> 
> 赞同：10
> 
> 时间：2013-03-21T10:49:49.577
> 
> 标签：javascript, jquery, asp.net, html

我在对话框中有一个评论框（textarea）。如果评论成功保存，我想清除文本区域的内容并关闭对话框。ATM 对话框将关闭，但我需要擦除其内容。

```
<textarea id="CommentBox" type="text" runat="server" rows="7" 
maxlength="2000" /> 

if (CommentSuccessfullyUpdated == "TRUE") 
{
//empty the comment box??
//something like
$("#CommentBox").empty();

//closes the dialog box
$("#dialog").dialog('close'); 
```

感谢您的任何回复

* * *

编辑：感谢您的帮助。它正在运行代码，但无法正常工作。我认为这与为了获取正确的 vales 并解决我必须使用的投标问题有关：

```
 function SubmitButton() {
            var commentBoxData = $('#<%=CommentBox.ClientID%>').val();
           } 
```

当使用断点运行时返回：

```
function SubmitButton() {
            var commentBoxData = $('#ctl00_ContentPlaceHolder1_CommentBox').val();
} 
```

和：

```
<textarea name="ctl00$ContentPlaceHolder1$CommentBox" id="ctl00_ContentPlaceHolder1_CommentBox" type="text" rows="7" maxlength="2000"> </textarea> 
```

所以我猜我在尝试清空它时没有引用相同的文本区域。也试过

```
$("#CommentBox.ClientID").val(''); 
```

但没有快乐....好主意？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T10:50:45.690

```
$('#CommentBox').val(''); 
```

Use the `val()` method, passing in an empty string.

Documentation: [http://api.jquery.com/val](http://api.jquery.com/val)

Also, your mark up is wrong. `textarea` isn't a self-closing element. You need a `</textarea>` tag. And the `type="text"` isn't necessary (probably not actually valid either)

As per your edit, you can either set the IDs to be static at the top of your .aspx file (I think it's `ClientID="static"`)

Or you can use a different selector:

```
$('textarea').filter('[id*=CommentBox]').val(''); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T10:51:03.567

您可以使用`val`：

```
$("#CommentBox").val(''); 
```

[http://api.jquery.com/val/](http://api.jquery.com/val/)

**JSFiddle**

[http://jsfiddle.net/KhPM6/1/](http://jsfiddle.net/KhPM6/1/)

**编辑**：

您没有`ASP.NET`正确引用生成的文本区域。正如您在问题中所示，您需要像这样引用它：

```
$('#<%=CommentBox.ClientID%>').val(''); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T10:52:10.540

```
 $('textarea#CommentBox').val(''); 
```

# python - 如何将函数传递给 Python 中的函数？

> ID：15545383
> 
> 赞同：2
> 
> 时间：2013-03-21T10:49:54.657
> 
> 标签：python, function-call, runge-kutta

我是 Python 的初学者/中级者。我已经将一个[四阶龙格-库塔方法 (RK4)](http://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods)编码到 Python 中。它基本上是在解决一个钟摆，但这不是重点。

我想通过以下方式改进 RK4 方法：我希望能够将函数 f 直接传递给 RK4 函数，即 RK4(y_0, n, h) 应该变为 RK4(f,y_0,n,h)。这将具有很大的优势，我可以将 RK4 用于描述其他系统的其他 f 函数，而不仅仅是这个钟摆。

我只是将简单的函数传递给 RK4，但我做错了。我如何在 Python 中做到这一点？

```
import numpy as np

def RK4(y_0, n, h):
    #4th order Runge-Kutta solver, takes as input
    #initial value y_0, the number of steps n and stepsize h
    #returns solution vector y and time vector t
    #right now function f is defined below

    t = np.linspace(0,n*h,n,endpoint = False)   #create time vector t
    y = np.zeros((n,len(y_0))) #create solution vector y
    y[0] = y_0 #assign initial value to first position in y
    for i in range(0,n-1):
        #compute Runge-Kutta weights k_1 till k_4
        k_1 = f(t[i],y[i])
        k_2 = f(t[i] + 0.5*h, y[i] + 0.5*h*k_1)
        k_3 = f(t[i] + 0.5*h, y[i] + 0.5*h*k_2)
        k_4 = f(t[i] + 0.5*h, y[i] + h*k_3)
        #compute next y        
        y[i+1] = y[i] + h / 6\. * (k_1 + 2.*k_2 + 2.*k_3 + k_4)
    return t,y

def f(t,vec):
    theta=vec[0]
    omega = vec[1]
    omegaDot = -np.sin(theta) - omega + np.cos(t)
    result = np.array([omega,omegaDot])    
    return result

test = np.array([0,0.5])
t,y = RK4(test,10,0.1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:52:25.307

Python 函数也是对象。您可以像传递任何其他对象一样传递它们：

```
>>> def foo(): print 'Hello world!'
...
>>> foo
<function foo at 0x10c4685f0>
>>> foo()
Hello world!
>>> bar = foo
>>> bar()
Hello world! 
```

只需将函数作为额外参数传递给您的`RK4`函数并将其用作局部变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:52:46.980

正如您所期望的那样，您可以将函数传递给 Python 中的函数：

```
def call_function(f):
    f()

def my_function():
    print "OK"

call_function(my_function)  # Prints OK 
```

也许您应该发布失败的代码？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T10:52:46.250

这很简单。像这样更改`RK4`函数的定义：

```
def RK4(f, y_0, n, h): 
```

在这里，我添加了一个额外的参数，函数。

然后，当您调用 时`RK4`，传递函数：

```
t, y = RK4(f, test, 10, 0.1) 
```

现在，当然，您可以替换不同的函数，而无需重新编写集成代码。

Python 中的函数只是另一种对象。你可以传递它们，就像你做更多平淡无奇的对象一样。

# c# - C# - HttpWebResponse 重定向检查器

> ID：15545388
> 
> 赞同：1
> 
> 时间：2013-03-21T10:49:58.667
> 
> 标签：c#, redirect, httpwebrequest, httpwebresponse

我正在尝试编写一个重定向检查器，我的解决方案今天早上刚刚组合在一起，所以它不是最有效的，但它可以完成我需要它做的所有事情，除了一件事：

它只在停止之前检查两个站点，没有发生错误，它只是在“request.GetResponse() as HttpWebResponse;”上停止。第三页的行。

我尝试过使用不同的站点并更改要检查的页面组合，但它只检查两个。

有任何想法吗？

```
 string URLs = "/htmldom/default.asp/htmldom/dom_intro.asp/htmldom/dom_examples2.asp/xpath/default.asp";
        string sURL = "http://www.w3schools.com/";
        string[] u = Regex.Split(URLs, ".asp");

        foreach (String site in u)
        {
            String superURL = sURL + site + ".asp";

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(superURL);

            request.Method = "HEAD";
            request.AllowAutoRedirect = false;

            var response = request.GetResponse() as HttpWebResponse;
            String a = response.GetResponseHeader("Location");

            Console.WriteLine("Site: " + site + "\nResponse Type: " + response.StatusCode + "\nRedirect page" + a + "\n\n");
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:52:24.497

除了如果 a`WebException`被抛出它会中断这一事实，我相信它只是停止的原因是你从不处理你的响应。如果您实际上有多个 URL 由同一个站点提供服务，它们将使用连接池 - 并且通过不处理响应，您不会释放连接。你应该使用：

```
using (var response = request.GetResponse())
{
    var httpResponse = (HttpWebResponse) response;
    // Use httpResponse here
} 
```

请注意，我在这里投射而不是使用`as`- 如果响应*不是*an `HttpWebResponse`，则`InvalidCastException`该行上的 an 比`NullReferenceException`下一行的 a 提供更多信息......

# sql-server-2008 - 用于 CASE 语句的 sql 别名列名

> ID：15545389
> 
> 赞同：5
> 
> 时间：2013-03-21T10:50:03.450
> 
> 标签：sql-server-2008

我有一个如下的sql查询，

```
select Site,DataSource,
(SELECT CASE 
   WHEN DataSource = 'RFQ' THEN 'ChangeOperator' 
   ELSE 'SameOperator' 
  END) AS OperatorScenario,

  (SELECT CASE 
   WHEN OperatorScenario = 'ChangeOperator' THEN '1' 
   ELSE '022' 
  END) AS OperatorScenario2
from tablename 
```

当我执行此查询时，我收到异常为 Invalid column name OperatorScenario。所以我尝试在第二个查询中使用别名中的单个代码，如下所示，

```
(SELECT CASE 
   WHEN 'OperatorScenario' = 'ChangeOperator' THEN '1' 
   ELSE '022' 
  END) AS OperatorScenario2 
```

所以它总是执行 else 部分。请给我一些建议。问候桑吉塔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:56:29.140

主要问题是您不能在同一查询中引用别名。此外，您还有括号和一个额外的`SELECT`关键字，使看起来像一个子查询，我不相信您打算这样做（您没有`FROM`子句）。

您可以再次复制整个内容（在此过程中修复您的查询）：

```
SELECT Site, DataSource,
    CASE 
       WHEN DataSource = 'RFQ' THEN 'ChangeOperator' 
       ELSE 'SameOperator' 
    END AS OperatorScenario,

   CASE 
       WHEN 
           CASE 
               WHEN DataSource = 'RFQ' THEN 'ChangeOperator' 
               ELSE 'SameOperator' 
           END = 'ChangeOperator' THEN '1' 
       ELSE '022' 
  END AS OperatorScenario2
from tablename 
```

或者，简化：

```
SELECT Site, DataSource,
    CASE 
       WHEN DataSource = 'RFQ' THEN 'ChangeOperator' 
       ELSE 'SameOperator' 
    END AS OperatorScenario,

   CASE 
       WHEN DataSource = 'RFQ' THEN '1' 
       ELSE '022' 
   END AS OperatorScenario2
from tablename 
```

* * *

或使用 CTE（再次修复您的查询）：

```
WITH cte AS
(
    SELECT Site, DataSource,
    CASE 
       WHEN DataSource = 'RFQ' THEN 'ChangeOperator' 
       ELSE 'SameOperator' 
    END AS OperatorScenario,
    FROM tablename
)
SELECT Site, DataSource, OperatorScenario,
    CASE 
        WHEN OperatorScenario = 'ChangeOperator' THEN '1' 
        ELSE '022' 
    END AS OperatorScenario2
FROM cte 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:57:08.260

您不能在此查询中访问同一级别的别名，请使用子查询或 cte：

```
WITH cte 
     AS (SELECT site, 
                datasource, 
                CASE 
                  WHEN datasource = 'RFQ' THEN 'ChangeOperator' 
                  ELSE 'SameOperator' 
                END AS OperatorScenario 
         FROM   dbo.tablename) 
SELECT site, 
       datasource, 
       operatorscenario, 
       CASE 
         WHEN operatorscenario = 'ChangeOperator' THEN '1' 
         ELSE '022' 
       END AS OperatorScenario2 
FROM   cte 
```

请注意，我还删除了额外的括号并在`CASE`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-28T15:17:36.723

我在开头设置了我的别名，如下所示：

```
SELECT [ALIAS] = CASE.... 
```

你的将是：

```
SELECT Site, DataSource,   
   [OperatorScenario] = CASE 
       WHEN DataSource = 'RFQ' THEN 'ChangeOperator' ELSE 'SameOperator' 
   END,

   [OperatorScenario2] = CASE 
       WHEN DataSource = 'RFQ' THEN '1' ELSE '022' 
   END
from tablename 
```

# android - 在活动之间传递您自己的对象

> ID：15545391
> 
> 赞同：1
> 
> 时间：2013-03-21T10:50:11.453
> 
> 标签：android, android-activity

我是 Android 开发的新手，我仍然不清楚数据如何从一个活动传递到另一个活动。
在活动之间传递自己的对象是一种好习惯吗？

他们可以有什么尺寸？

编辑：也许我没有解释清楚。我知道如何在活动之间传递数据。问题是：这是一个好习惯还是我应该更好地从 SQLlite 数据库中获取数据？在那种情况下，我可以通过哪个最大尺寸来获得良好的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:13:09.347

发送对象与发送字符串或变量等预定义对象相同，可以通过直接在意图上使用 putParceble() 或 putSerializable() 方法将对象绑定到 Intent 或将对象绑定到捆绑对象来完成。但是你必须确保你的类实现 Parcelable 或 Serializable。

像这儿：

```
 UserDefined myObject=new UserDefined();
     Intent i = new Intent(this, Activity2.class);
     Bundle b = new Bundle(); 
     b.putParcelable("myObject", myObject);
     i.putExtras(b);
     startActivity(i); 
```

在接收活动中：

```
 Bundle b = this.getIntent().getExtras();
  myObject = b.getParcelable("myObject"); 
```

您也可以在不使用 Bundle 的情况下发送对象：

```
 Intent i=new Intent(PicActivity.this,PostPhotoActivity.class);
    i.putExtra("myObject", myObject);
    startActivity(i); 
```

在接收活动：

```
 UserDefined myObj=(UserDefined)getIntent().getParcelableExtra("myObject"); 
```

在 Android 中，parcelable 是首选，而不是可序列化。

# python - 向字符串添加 1 位

> ID：15545393
> 
> 赞同：0
> 
> 时间：2013-03-21T10:50:19.137
> 
> 标签：python, string, md5, bit-manipulation

我正在寻找一种在 Python 中“将 '1' 位附加到消息”的方法，以便重新创建[此处](http://en.wikipedia.org/wiki/MD5#Pseudocode)提到的 MD5 算法。

这就是我所做的，但问题是它`msg`实际上是一个字符串：

```
msg.append(0x01)         
while len(msg)%56!=0: 
     msg.append(0x00) 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:19:13.313

用于`chr`将字节值转换为字符串。然后你可以将它们附加到`msg`.

```
msg += chr(0x01 << 8)
while len(msg)%56 != 0:
    msg += chr(0x00) 
```

在 Python 2.7 中，ASCII 字符串中的每个字符都是 8 位大。因此，使用这种方法，您并不是每次都真正添加“1 位”。这就是为什么有必要将 1 参数左移八次。否则，您将添加`0b00000001`到字符串而不是所需的`0b10000000`.

# hadoop - HBase 单机模式功能

> ID：15545394
> 
> 赞同：0
> 
> 时间：2013-03-21T10:50:20.593
> 
> 标签：hadoop, hbase

**当我在独立模式**（不是在分布式或伪分布式模式下）执行 start-hbase.sh 时，它不会执行启动区域服务器、动物园管理员、主备份，除了启动主服务器（因为没有 HDFS 文件系统它无法运行区域服务器）。这种模式是否会影响 HBase 的恢复部分。例如，当 HBase 数据仍在 memstore 中时使 VM 崩溃并重新启动 VM 和 HBase。

我试过上面的实验 HBase 无法恢复，请问是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:33:19.203

独立模式和伪分布式模式没有区别，但是在独立模式下写入 WAL 需要一些时间

# android - 已替换 Android 项目中的图像，但不会在应用中更新

> ID：15545395
> 
> 赞同：0
> 
> 时间：2013-03-21T10:50:24.193
> 
> 标签：android, image

我有一个 Android 项目，我想用更新的图像替换我在其中使用的两个图像。因此，使用 Eclipse，我只需删除旧的并用同名的新替换它。然后我刷新项目。当我在可绘制文件夹中看到它时，它被替换了，但是当我运行这个项目时，它仍然在我的应用程序中显示旧图像。请让我知道解决方案。这是非常紧急的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:52:27.837

First make sure you have replaced the image(s) in all `drawable-*` folders. If that is the case, doing `Project->Clean` (and selecting your project) in Eclipse after the refresh of the project files should do the trick. Also, before re-deploying on the device, uninstall the previous version of the app.

# primefaces - PrimeFaces + SWF：commandButton 不会触发 dataTable 中的任何动作/事件，具体取决于对象源

> ID：15545396
> 
> 赞同：0
> 
> 时间：2013-03-21T10:50:28.530
> 
> 标签：primefaces, datatable, flash, commandbutton

我遇到了一个奇怪的问题/错误，在任何地方都找不到有效的解决方案......

情况是：我有一个 Spring Web Flow 调用一个视图状态，其中包含一个显示对象列表的数据表，每个对象旁边都有一个“编辑”按钮。

这是 SWF 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>    
<flow xmlns="http://www.springframework.org/schema/webflow"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd"
parent="parent-flow" start-state="home">

<persistence-context />

<var name="myObject" class="com.domain.MyObject" />

<view-state id="home">
    <on-render>
        <evaluate expression="myObjectService.findAll()"
            result="viewScope.myObjectList" result-type="dataModel" />
    </on-render>
    <transition on="edit" to="editMO" />
    <transition on="search" to="home" />
</view-state>

<subflow-state id="editMO" subflow="myObject/addEdit">
    <input name="myObject" required="true" />
    <transition to="end" />
</subflow-state>

<end-state id="end"
    view="externalRedirect:servletRelative:/home" />

</flow> 
```

一些解释：

1）“MyObject”类是一个简单的pojo，带有一些属性和一个用于持久化的实体注释。

2）“myObjectService.findAll()”给了我所有存储的“MyObject”的列表。

现在这里是视图代码（使用模板standard.xhtml）：

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    template="/WEB-INF/layouts/standard.xhtml">

    <ui:define name="title"></ui:define>

    <ui:define name="content">
        <h:form>
                <div>

                    <p:dataTable id="tbl" value="#{myObjectList}" var="item">
                        <f:facet name="header">Result list</f:facet>
                        <p:column>
                            <f:facet name="header">Name</f:facet>#{item.name}
                        </p:column>

                        <p:column>
                            <f:facet name="header">Description</f:facet>#{item.description}
                        </p:column>

                        <p:column>
                            <f:facet name="header">Whatever</f:facet>#{item.whatever}
                        </p:column>

                        <p:column>
                            <f:facet name="header">Actions</f:facet>
                            <p:commandButton value="Edit" action="edit" icon="ui-icon-edit">
                                <f:setPropertyActionListener value="#{item}"
                                    target="#{myObject}" />
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </div>
            </p:panel>
        </h:form>
    </ui:define>

</ui:composition> 
```

当我单击“编辑”按钮之一时，跟踪告诉我视图正在重新呈现，但动作/事件“编辑”从未被触发、检测到或在任何地方捕获（至少我知道）。

有趣的是：如果我将对服务的调用（以加载对象列表）从 Flow 移动到视图内的 dataTable“值”属性，如下所示：

```
<p:dataTable id="tbl" value="#{myObjectService.findAll()}" 
```

一切正常！但后来我在每个渲染事件（最多看到十一个......）上都有很多调用，这显然是我不想要的。

我看到很多关于我的问题的主题的帖子，但没有一个可以解决它（试图将流重定向属性“redirect-in-same-state”更改为 false，强制惰性关闭，更改组件和变量的范围，强制服务或支持 bean 的范围，等等......）

所以，既然我的想法已经用完了，我想我会在这里试一试。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T12:44:28.083

好吧，这个问题是很久以前提出的，但我现在面临同样的问题。所以这就是我发现的。

最后一个 SWF Booking-faces (Web Flow: 2.4.0.M1) 示例有同样的问题。

在“main-flow.xml”它定义：

```
<view-state id="enterSearchCriteria">
    <on-render>
        <evaluate expression="bookingService.findBookings(currentUser?.name)" **result="viewScope.bookings"** result-type="dataModel" />
    </on-render>
    <transition on="search" to="reviewHotels"/>
    <transition on="cancelBooking">
        <evaluate expression="bookingService.cancelBooking(bookings.selectedRow)" />
    </transition>
</view-state> 
```

在“enterSearchCriteria.xhtml”中，它声明了一个`<p:dataTable>`迭代预订的 a。dataTable 具有此列定义：

```
<p:column>
    <f:facet name="header">Action</f:facet>
    <p:commandButton id="cancel" value="Cancel" action="cancelBooking" update=":bookings"/>
</p:column> 
```

当您单击取消按钮时，没有任何反应。我可以通过查看视图重新呈现的跟踪来看到，但从未调用方法“bookingService.cancelBooking(bookings.selectedRow)”。

但是，如果我将“bookings”变量的范围更改为“conversationScope”，它会起作用：

```
<view-state id="enterSearchCriteria">
    <on-render>
        <evaluate expression="bookingService.findBookings(currentUser?.name)" **result="conversationScope.bookings"** result-type="dataModel" />
    </on-render>
    <transition on="search" to="reviewHotels"/>
    <transition on="cancelBooking">
        <evaluate expression="bookingService.cancelBooking(bookings.selectedRow)" />
    </transition>
</view-state> 
```

这是 viewScope/flowScope 的错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T15:30:22.483

尝试将`immediate="true"`属性添加到`commandButton`. 这使按钮优先于验证，并且应该处理该操作。

# ms-access - 如何根据对同一表的查询结果在表/记录集中查找记录？

> ID：15545399
> 
> 赞同：2
> 
> 时间：2013-03-21T10:50:37.920
> 
> 标签：ms-access, vba

我正在尝试根据两个条件返回警报系统的记录。第一个条件是系统中有明天日期 [Date()+1] 的预订，类型值为 B。如果该 JobNumber 的类型值（在另一条记录中）也为 A 并且结果字段的值为“ Not Approved”我们需要返回一个警报。

示例表：

```
JobNumber   Type    Company Date            Result
58129       B       3       22/03/2013      
58129       A       3       20/03/2013      Not Approved
58129       C       3 
```

到目前为止，我已经能够在 VBA 中创建一个 SQL 查询来返回第一个条件的结果，并遍历结果以返回相关的 JobNumber。如何插入这些 JobNumbers 作为第二个 SQL 查询的条件，或者是否可以将所有条件组合到一个 SQL 语句中？

到目前为止我的 SQL：

```
strSQL1 = "SELECT I.JobNumber, I.Type, I.Company, I.Date, I.Result " & _
          "FROM tblInspection I " & _
          "WHERE (((I.Type)='B') AND ((I.Date)=Date()+1));"

strSQL2 = "SELECT I.JobNumber, I.Type, I.Company, I.Date, I.Result " & _
          "FROM tblInspection I " & _
          "WHERE (((I.Type)='A') AND ((I.Result)<>'approved'));" 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:25:21.573

您可以从同一个表或另一个表中获取一个字段。如果返回多于一行，这将给出错误，但是否返回多于一行取决于您的数据。如果可能，您将需要添加另一个标准，例如日期。

```
SELECT I.JobNumber, I.Type, I.Company, I.Date, I.Result,
    (SELECT Result 
     FROM tblInspection q 
     WHERE q.JobNumber=i.JobNumber 
     AND Result="Not Approved" 
     AND Type="A")
As ResultA
FROM tblInspection I
WHERE I.Type='B' AND I.Date=Date()+1 
```

# php - SELECT from database WHERE some parammeter is equal to a portion of a string var

> ID：15545400
> 
> 赞同：0
> 
> 时间：2013-03-21T10:50:43.140
> 
> 标签：php, mysql, sql

Im checking the "validity" (if is authorized to make something) of a domain trying to retrieve it from my database, the url came to my script over a GET var and then i just query the database:

```
$url = $_GET['url'];             // complete url of the site like: sub1.domain.com/page/1/some
$url = parse_url($_GET['url']);  // parsing the url http://php.net/manual/en/function.parse-url.php
$host = $url['host'];            // gives me sub1.domain.com 
```

After parsing:

```
$query = "SELECT * FROM domains_table WHERE domain = '" . $host . "'"; 
```

This works great, the think is sometimes domain.com have many sub domains and I cant save in database all the variations. It seems to me a lost of space if lets say domain.com have 30 sub domains and then I need to save sub1.domain.com sub2.domain.com and so...

Instead I was thinking in a more smart way, like saving in data base just ***.domain.com** and then somehow (and this is where i need help) in the query or in the php script (better if is in the query, personal taste) create something that tells * could be any string. How can i do this?

**EDIT:**

There is some confusion in the answers so I try to explain better my self:

If i have in my table saved on the url field: ***.domain1.com** how can i make something like this:

```
SELECT * FROM domain WHERE url LIKE "sub1.domain.com" 
```

To retrieve something.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:52:20.773

You want to use MySQL's **[Like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)** operator.

Example:

```
SELECT * FROM table WHERE value LIKE '%string%'; 
```

The *%* matches any string before or after the "string" part.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:52:11.257

您可以使用 % 作为星号（匹配之前或之后的任何内容）

```
$query = "SELECT * FROM domains_table WHERE domain LIKE '%" . $host . "%'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:52:48.793

you can use:

```
WHERE domain LIKE '%" . $host . "'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:22:03.110

不确定您是否可以在此处使用 LIKE，因为您的通配符将位于存储在表中的数据中，而不是您直接查找的数据中

更多的工作，但可能更好的是将域分成每个部分，然后在每个部分之间建立父子关系。

所以如果你有 shop.fred.com 和 news.fred.com，你就会有类似的东西。

```
id  parent  section
1   NULL    com
2   1   fred
3   2   shop
4   2   news 
```

然后向下钻取。递归执行查询的简单粗略方式，或使用嵌套集合方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:53:20.727

一种可能性是使用通配符选择器：

```
$query = "SELECT * FROM domains_table WHERE domain LIKE '%" . $host . "'"; 
```

有了这个，您可以匹配所有子域。所以随着

```
$host = '.domain.com'; 
```

您还可以检索所有子域。

但要小心，它很慢。

# xpages - ExtLib、iNotes 列表视图：如何从外部访问视图中选择的数据？

> ID：15545415
> 
> 赞同：1
> 
> 时间：2013-03-21T10:51:04.517
> 
> 标签：xpages, xpages-extlib

使用 Firebug，我发现 iNotes 列表视图对象有一个名为“getSelectedData()”的函数，提供类似于选定视图条目数组的内容（每个条目都包含项目特定的行数据，如Paul Withers描述的[此处](http://www.intec.co.uk/inotes-list-view-inotes-calendar-view-accessing-the-object/)的“ext”元素）。因此，使用列表视图的内部事件之一（如“onContextMenu”），我可以检索选定的数据并将它们放在其他地方。这太棒了！

但是，由于我从不满足于我所拥有的，现在我正在寻找一种方法来从***外部***处理列表视图的对象（例如，使用按钮）以类似甚至相同的方式访问选定的数据集合. 但无论我尝试什么，我似乎都无法从列表视图本身之外找到正确的对象。使用

```
dojo.byId("#{id:listView1}") 
```

给了我一个对象，但没有我需要的任何特定方法。Google、openNtf 或 ExtLib 书本身都没有这方面的任何信息。

有什么提示吗？

问候，洛萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:19:23.070

我想我解决了。我昨天已经关闭了，但是使用***dojo*** .byId 而不是***dijit*** .byId 阻止了它的工作：

```
var grid = dijit.byId("#{id:listView1}"); 
var sel = grid.getSelectedData(); 
```

结果是一个命名的行数据数组，其中每个行条目包含该行的所有相关视图条目数据。

奇迹般有效！- 洛萨

# c++ - 库通常带有头文件吗？

> ID：15545416
> 
> 赞同：4
> 
> 时间：2013-03-21T10:51:08.483
> 
> 标签：c++, windows, visual-studio, dll

我目前正在制作一个小型的可重用代码库，这些代码已经被证明是有用的，我想知道这些库通常是如何部署的？我的印象是 .dll 和 .lib 就足够了，但是，我如何引用类和函数？一个库是否也带有很多 .h 文件很常见，还是有更优雅的解决方案？

使用该库的实际应用程序的部署如何？静态链接后，我还需要发送 .dll 文件还是将库的内容复制到程序中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:57:21.533

根据经验，您将所有想要向最终用户公开的公共方法收集在一组称为 API 的标头中。此时，你应该区分内部头和API头，你会发现你的头文件数量（API头）会减少，文件结构的管理会容易很多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T11:10:33.777

交付库时包含三个基本组件：

*   库本身的几个版本：`.so`在 Unix`.dll`和`.lib`Windows 下，带有调试版本，优化版本，可能是多线程和单线程，可能是激活分析的版本......*并*支持静态链接（`.a`在 Unix 下，`.lib`在 Windows 下，但不是与您需要链接 DLL 的相同），

*   定义外部接口的标头，以及

*   文档，解释*如何*安装和链接库，每个版本需要哪些编译器选项等，以及库本身的文档（每个函数的前置和后置条件等）

少一点，客户就无法使用它。

关于部署，同样，这应该记录在案。如果客户端静态链接库，则不需要任何内容​​；如果他动态链接它，那么他也需要部署`.so`/`.dll`文件。

# javascript - 继承命名空间javascript

> ID：15545420
> 
> 赞同：0
> 
> 时间：2013-03-21T10:51:13.457
> 
> 标签：javascript, javascript-namespaces

如何在命名空间（范围）内继承对象变量？

```
var f2 = {
   a: 'test'
}

f2.history = {

  load: function(){ alert(this.a); }

}

// Turns out Undefined
f2.history.load(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:54:48.410

使用命名空间 f2，而不是`this`.

```
 load: function(){ alert(f2.a); } 
```

作品

* * *

```
var f2 = {
    a : 'test',
    init: function(a) {
        if (a) this.a = a; //set a, if a is defined
    },
};
function history(a) {
    function F() {};
    F.prototype = f2;
    var f = new F();
    f.init(a);
    load = function() {
        alert(f.a);
    }
    return this;
}

var h1 = history();
h1.load(); //alerts "test"

var h2 = history('history'); 
h2.load(); //alerts "history"

//but now h1 also holds history
h1.load(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:53:30.920

`f2.history`和之间没有联系`f2`。更一般地说，财产价值与其持有者之间没有联系。

你可以这样称呼它：

```
f2.history.load.call(f2); 
```

或者您可以使用工厂声明您的对象：

```
var f2 = (function(){
    var self = {
        a: 'test'
    };
    self.history = {
        load: function(){ alert(self.a); }
    };
    return self;
})(); 
```

这将允许

```
f2.history.load(); 
```

另一种变体可以让您以更分离的方式定义子模块：

```
var f2 = {
    a: 'test'
};
(function(f){
    f.history = {
        load: function(){ alert(f.a); }
    }
})(f2); 
```

最后一个结构的优点是很容易在不同的文件中声明子模块。

# iphone - 故事板控制器未释放

> ID：15545423
> 
> 赞同：1
> 
> 时间：2013-03-21T10:51:17.730
> 
> 标签：iphone, ios, objective-c, ios5, storyboard

我的情节提要的初始视图控制器使用`performSegue:withIdentifier`方法加载另一个视图控制器，该方法又使用相同的`performSegue:withIdentifier`方法加载其他一些控制器。

但是，初始视图控制器和第二个视图控制器都没有释放。正如通过仪器看到的那样，它们都倾向于具有 1 的参考计数。

当他退出应用程序时，我需要将用户发送回第一个控制器。到目前为止，我想到的唯一方法是使用`performSegue:withIdentifier`方法并将用户发送回初始控制器。

但是，我担心以前的控制器不会因此被释放，导致重新创建相同的视图控制器。

由于我需要将用户注销回到第一个屏幕，因此我想确保所有以前的视图控制器都已被释放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:40:35.397

当您执行推送或模态转场时，它不会（也不应该）释放您正在转场的视图控制器。它需要保留它，以便当您弹出/关闭它时，它仍然存在。此规则的例外是在使用拆分视图控制器并且您使用替换转场时。但那是个特例。

如果你想回到第一个场景，如果你使用导航控制器并且只使用 push segues，你可以使用`popToRootViewControllerAnimated`. （对于 iOS 5 的目标，我会一直使用导航控制器，如果我不希望它可见就隐藏导航栏，因为这个原因。能够弹出多个级别很方便。实现相同的效果很麻烦带有模态转场。）在 iOS 6 中，您可以使用[unwind segue](https://stackoverflow.com/a/15512018/1271826)，您可以在其中弹出/关闭任意数量的场景级别，例如，返回到初始场景。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:04:03.533

循环`performSegue`不是一个好主意..

如果您必须返回您的 VC 层次结构，您应该使用`UINavigationController`带有推送/弹出 VC 的 a，或者呈现/关闭模态 VC。您可以通过模态呈现一个`UINavigationController`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:56:38.213

在 iOS 6 之前，A`UIViewController`将保持活动状态，但其更昂贵的`UIView`将被释放以节省内存。与 a 相比，`UIViewController`它本身很轻`UIView`。从 iOS 6 开始，您应该根据文档覆盖`didReceiveMemoryWarning`

[UIViewController](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW56)的文档：

> 内存管理
> 
> 内存是 iOS 中的关键资源，视图控制器提供内置支持以减少关键时刻的内存占用。UIViewController 类通过其 didReceiveMemoryWarning 方法提供了一些低内存条件的自动处理，该方法释放不需要的内存。
> 
> 在 iOS 6 之前，当发生内存不足警告时，如果 UIViewController 类知道以后可以重新加载或重新创建它们，则它会清除其视图。如果发生这种情况，它还会调用 viewWillUnload 和 viewDidUnload 方法，让您的代码有机会放弃与视图层次结构关联的任何对象的所有权，包括从 nib 文件加载的对象、在 viewDidLoad 方法中创建的对象以及创建的对象在运行时懒惰地添加到视图层次结构中。在 iOS 6 上，视图永远不会被清除，并且这些方法永远不会被调用。如果您的视图控制器需要在内存不足时执行特定任务，它应该覆盖 didReceiveMemoryWarning 方法。

只要您管理正确，就可以做出正确的反应（取决于 iOS 版本）并解除分配视图，我认为这里没有问题。

# java - 通过单击菜单项刷新页面

> ID：15545426
> 
> 赞同：0
> 
> 时间：2013-03-21T10:51:34.193
> 
> 标签：java, zk

我有一个 zul 页面，其中包含指向不同 zul 页面的菜单项列表。我希望，当单击菜单项时，必须刷新该菜单项指出的页面。我尝试过使用 Events.sendEvent() 方法，但它不起作用。最好的方法是什么？提前致谢。这是代码：

```
 <menuitem id="Car" label="Car">
          <attribute name="onClick">
              {
                 inc.setSrc("/zul/car.zul");
                 Events.sendEvent(reload, event);
              }
          </attribute>
   </menuitem> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:32:43.477

不要`<include />`用于 zul 页面，最好这样做：

```
...
<div id="currentSite" width="800px" heigth="600px" /> 
... 
```

然后`onClick`在java中添加监听器，顺便说一句，不要在生产中使用像你这样的脚本。

```
@Listen("onClick = #Car")
public void carClicked(Event ev){
   // clear old content
   currentSite.getChildren().clear();
   // add the new
   Executions.createComponent("/zul/car.zul", currentSite, null);
} 
```

你有更多的控制和更少的痛苦；）

# node.js - 无法使用 node.js 和 Mongodb 包查询 MongoDB 数据库

> ID：15545427
> 
> 赞同：2
> 
> 时间：2013-03-21T10:51:36.263
> 
> 标签：node.js, mongodb, npm

我无法使用 node.js 和 Mongodb 包查询我的 MongoDB 数据库。

我已成功插入 2 个对象，如下所示：

```
var mongo = require("mongodb");
var host = "127.0.0.1";
var port = mongo.Connection.DEFAULT_PORT;
var db = new mongo.Db("nodejs-introduction", new mongo.Server(host, port, { }), {safe: true});
console.log(host);
db.open(function(error) {
    console.log("We are connected ", + host + ':' + port);

    db.collection("user", { w:1 }, function(error, collection){
        console.log("We have the collection");

        collection.insert({
            id: "1",
            name: "Foo Bar",
            twitter: "Foo_Bar",
            email: "info@nfoobar.com"
        }, {w:1}, function() {
            console.log("Succesfully inserted Foo Bar");
        });

        collection.insert({
            id: "2",
            name: "Bar Foo",
            twitter: "Bar_Foo",
            email: "info@tbarfoo.com"
        }, {w:1}, function() {
            console.log("Succesfully inserted Bar Foo");
        });
    });
}); 
```

这里一切正常，没有错误。但如果我想像这样查询项目：

```
var mongo = require("mongodb");
var host = "127.0.0.1";
var port = mongo.Connection.DEFAULT_PORT;
var db = new mongo.Db("nodejs-introduction", new mongo.Server(host, port, { }), {safe: false});
console.log(host);
db.open(function(error) {
    console.log("We are connected ", + host + ':' + port);

    //collection is sort of table
    db.collection("user", function(error, collection){
        console.log("We have the collection");
        collection.find({ "id": "1" }, function(error, cursor){
            cursor.toArray(function(error, users){
                if (users.length == 0) {
                    console.log("no user found");
                } else {
                    console.log("Found a user", users[0]); 
                }
            });
        });

    });
}); 
```

然后我收到以下错误：

```
127.0.0.1
We are connected  NaN:27017
We have the collection

/path/to/query.js:14
                if (users.length == 0) {
                         ^
TypeError: Cannot read property 'length' of null 
```

所以我的理解是变量 users 为空，它找不到任何匹配项，但我不知道为什么。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:23:05.167

找到了解决方案。MongoDB 没有运行。如果 Mongodb 没有运行，我怎么能插入到 MongoDB 而没有任何错误？

# php - 没有在php中创建数组的对象访问

> ID：15545428
> 
> 赞同：2
> 
> 时间：2013-03-21T10:51:37.153
> 
> 标签：php, arrays

```
class Car {

    function __construct() {
//        echo 'car con';
    }

    function setInfo($car_arr) {
            foreach ($car_arr as $key => $value) {
                $this->{$key} = $value;
            }

    }

} 
```

我尝试像下面这样访问

```
$car1 = new Car();
$car1->setInfo('make', 'Toyota')->setInfo('model', 'scp10'); 
```

这给了我以下错误

```
Call to a member function setInfo() on a non-object 
```

`$car1->setInfo('make', 'Toyota')->setInfo('model', 'scp10');`在该汽车类设置 $make = 'Toyota' 之后，我如何更改 setInfo() 方法调用 ，就像那样

我怎样才能像下面这样打印这个对象

```
make = Toyota
model = scp10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:53:03.870

You need to add `return $this;` in the end of your method for chain-like calls.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:53:16.320

更改 setInfo 代码以返回自身，如：

```
function setInfo($car_arr,$car_val=null) {

    if(is_array($car_arr)){
        foreach ($car_arr as $key => $value) {
            $this->{$key} = $value;
        }
    }else if(is_string($car_arr) && $car_val != null){
        $this->{$car_arr} = $car_val;
    }
    return $this;
} 
```

现在您可以链接这些函数，因为它会返回自身。

此外，如果您想像您想要的那样调用它（like `$this->setInfo("make","Ford")`），您需要添加一个 else on`is_array`并添加一个可选参数，如上面的代码所示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:57:39.780

将所有答案合二为一（好吧，@EaterOfCorpses 除外）：

```
<?php
class Car {
  private $data = array();

  function setInfo(array $carInfo) {
    foreach ($carInfo as $k => $v) {
      $this->data[$k] = $v;
    }
    return $this;
  }

  function __set($key, $val) {
    $this->data[$key] = $val;
  }
  function __get($key) {
    return $this->data[$key];
  }
}

$car = new Car();
$car->setInfo(['make' => 'Toyota', 'warranty' => '5 years']); 
```

请注意，`return $this`如果您一次设置所有属性，则没有理由这样做。

编辑添加：还包括来自 Mark Ba​​ker 的魔术 getter/setter 想法，只是为了好玩。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:53:14.027

You should use `$car1->setInfo('make', 'Toyota')` only once. That's because you create a car, then set info, and then you want to set info to info, but you can't set info to info.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:53:27.810

它被称为[`fluent interface`](http://en.wikipedia.org/wiki/Fluent_interface)

添加

```
return $this; 
```

作为 setInfo() 方法的最后一行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T10:53:44.440

使用数组语法：`$car1->setInfo(array('make', 'Toyota'))`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T10:54:00.450

您可以在函数中返回 $this（如果您有 php 5.4）：

```
function setInfo($car_arr) {

   ...

   return $this;
} 
```

# powershell - Get-PSSessionConfiguration 的 ErrorActionPreference 和 ErrorAction SilentlyContinue

> ID：15545429
> 
> 赞同：27
> 
> 时间：2013-03-21T10:51:38.183
> 
> 标签：powershell, error-handling, silent

我的情况：

```
$ErrorActionPreference = "Stop";
"1 - $ErrorActionPreference;"
Get-ChildItem NoSuchFile.txt -ErrorAction SilentlyContinue;
"2 - $ErrorActionPreference;"
Get-ChildItem NoSuchFile.txt -ErrorAction Stop;
"3 - $ErrorActionPreference;" 
```

输出：

> 1 - 停止；
> 2 - 停止；
> 并显示错误...

现在，

```
$ErrorActionPreference = "Stop";
"1 - $ErrorActionPreference;"
(Get-PSSessionConfiguration -Name "MyShellUri" -ErrorAction SilentlyContinue)
"2 - $ErrorActionPreference;" 
```

输出：

> 1 - 停止；
> 并显示错误...

为什么 Get-PSSessionConfiguration 不起作用 -ErrorAction SilentlyContinue) ？

**更新：**

现在，

```
$ErrorActionPreference = "Continue"
"1 - $ErrorActionPreference;"
(Get-PSSessionConfiguration -Name "MyShellUri" -ErrorAction SilentlyContinue)
"2 - $ErrorActionPreference;" 
```

输出：

> 1 - 继续；
> 2 - 继续；

现在，

```
$ErrorActionPreference = "SilentlyContinue"
"1 - $ErrorActionPreference;"
(Get-PSSessionConfiguration -Name "MyShellUri" -ErrorAction SilentlyContinue)
"2 - $ErrorActionPreference;" 
```

输出：

> 1 - 静默继续；
> 2 - 静默继续；

这个[参考](https://stackoverflow.com/questions/11198023/why-does-an-error-still-show-when-i-specify-erroraction-silentlycontinue)：

`ErrorAction`ubiquitous 参数可用于使用参数 value 使非终止错误静音，并可用于使用参数 value将`SilentlyContinue`非终止错误转换为终止错误`Stop`。但是，它不能帮助您忽略终止错误，在这种情况下，Stop-Transcript 会引发终止错误。如果您想忽略，请使用 try/catch 例如：

```
try { Stop-Transcript } catch {} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-21T11:47:45.307

对我来说一个解决方案：

```
$old_ErrorActionPreference = $ErrorActionPreference
$ErrorActionPreference = 'SilentlyContinue'
if((Get-PSSessionConfiguration -Name "MyShellUri" -ErrorAction SilentlyContinue) -eq $null) {
   WriteTraceForTrans "The session configuration MyShellUri is already unregistered."
}
else {        
   #Unregister-PSSessionConfiguration -Name "MyShellUri" -Force -ErrorAction Ignore
}
$ErrorActionPreference = $old_ErrorActionPreference 
```

或者使用 try-catch

```
try { 

(Get-PSSessionConfiguration -Name "MyShellUri" -ErrorAction SilentlyContinue)

} 
catch {

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:04:59.403

看起来这是一个“未处理的异常”，这意味着 cmdlet 本身没有被编码来识别和处理该异常。它在没有运行它的内部错误处理的情况下爆炸了，因此 cmdlet 上的 -ErrorAction 设置从未发挥作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T02:44:01.403

[提示 #2](http://windowsitpro.com/blog/what-do-not-do-powershell-part-2)

你不能使用经典的`2>`重定向运算符。

```
(Get-PSSessionConfiguration -Name "MyShellUri" -ErrorAction SilentlyContinue) 2> $NULL
if(!$?){
   'foo'
} 
```

我不喜欢错误，所以我不惜一切代价避免它们。

# actionscript-3 - 如何让我的 UILoader 播放 .SWF 一次然后消失？

> ID：15545430
> 
> 赞同：0
> 
> 时间：2013-03-21T10:51:47.460
> 
> 标签：actionscript-3, flash, list, uiloader

如何让我的 UILoader 播放 .swf 文件一次然后消失直到再次调用？

我正在创建一个吉他教程应用程序，向您展示和弦以及它们之间的过渡。为了显示和弦，我使用标准 Flash 图形，对于过渡，我使用 UI 加载器来显示 .swf 文件，例如，在 C 和弦框架上，手指就位，UI 加载器是顶部的一层其中，当从列表组件中选择和弦转换时，它会加载 chordtransition.swf。

问题是，一旦加载了 swf，它就会循环播放，我添加了“stop();” 正如人们建议的那样，在许多不同的地方，这并没有什么不同。

我希望能够单击组件列表上的“CD”，然后 .swf 播放一次然后消失。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:12:32.563

策略性放置的 stop() 应该可以工作（swf 中时间轴上的最后一帧）。您需要停止正确的影片剪辑 - 如果您的影片有嵌套剪辑，您可能会停止错误的剪辑。

但是，创建多个 swf 只是为了显示不同的和弦对我来说似乎有点矫枉过正。

创建在主时间线上显示所有和弦的剪辑，并添加帧标签以指示它们的开始位置并将 stop() 放在每个和弦动画的结尾（您使用动画吗？）。

使用movieclipWithChords.gotoAndPlay("chord_C"); 如果您不使用动画，则可以使用 movieclipWithChords.gotoAndStop("chord_C");

当然，您也可以创建像“C”和“D”这样的标签，并将它们用作和弦的直接映射。

更新：再次阅读您的问题后，我意识到您实际上是在展示从一个和弦到另一个和弦的过渡片段。在这种情况下，您仍然可以使用我上面的建议，只有您的标签不会用于单个和弦，而是用于和弦转换，例如“transition_C-D”或“transition_G-B”。

# java - 将速度模板中的 java 对象列表显示为 html 表

> ID：15545431
> 
> 赞同：3
> 
> 时间：2013-03-21T10:51:56.343
> 
> 标签：java, velocity

我正在从数据库中获取对象列表。我想使用速度模板将它们填充到 html 表中。

```
<table>
<thead>
<tr>
<td>$value1 </td>
<td>$value2 </td>
</tr>
</thead>
<tbody>
<!-- Iterate through the list (List<SomeObject>) and display them here,   -->
</tbody>
</table> 
```

对于标题我使用下面的代码，

```
VelocityContext context = new VelocityContext();
context.put("value1", "text1");
context.put("value2", "text2"); 
```

我从以下对象中获取数据，

```
List<SomeObject> obj = new ArrayList<SomeObject>();
obj.getItem1();
obj.getItem2(); 
```

所有单个项目都是字符串。如何填充表体内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T11:12:27.677

尝试以下操作：

```
<tbody>
#foreach( $obj in $objs )
    <tr><td>$obj.Item1</td><td>$obj.Item2</td></tr>
#end
<tbody> 
```

我假设您的列表放在名称下的速度上下文中，`objs`并且您的`SomeObject`类有 2 个字段：item1 和 item2 以及对应的 getter。

```
List<SomeObject> objs = ... //prepopulated
context.put("objs", objs); 
```

查看有关[速度文档](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html)的更多信息。

# java - Java：“使用未经检查或不安全的操作。重新编译...”

> ID：15545432
> 
> 赞同：1
> 
> 时间：2013-03-21T10:51:56.600
> 
> 标签：java, inner-classes, instanceof, comparable, nested-generics

尽管花费了大量时间在谷歌上搜索我的困境的答案并重新阅读了我的 Java 教科书中关于泛型的章节，但我似乎无法用以下代码解决问题：

```
public class RedBlackTree<I extends Comparable>
{
    private int count = 0;
    private RedBlackNode root;

    private RedBlackNode current;
    private RedBlackNode[] stack;

    /**
     * Inner class used for representing the nodes of the red-black balanced binary search tree object.
     */
    private class RedBlackNode implements Comparable
    {
        private I id;
        private boolean is_btree;
        private RedBlackNode[] links;

        /**
         * Constructor for objects of the RedBlackNode class.
         * 
         * @param id The ID of the node.
         */
        private RedBlackNode(I id)
        {
            if (id == null)
            {
                throw new NullPointerException("ID cannot be null.");
            }

            this.id = id;
            this.is_btree = true;
        }

        /**
         * Function for comparing the RedBlackNode object to another object.
         * 
         * @param obj The object to be compared.
         * @return If invocant > passed, returns 1; if invocant < passed, returns -1; if invocant = passed, returns 0.
         */
        private int compareTo(Object obj)
        {
            if (obj instanceof RedBlackTree.RedBlackNode)
            {
                RedBlackNode node = (RedBlackNode)obj;

                int result = id.compareTo(node.id);

                return result > 0 ? 1 : result < 0 ? -1 : 0;
            }
            else
            {
                throw new ClassCastException("Expected a RedBlackNode object.");
            }
        }
    }
} 
```

特别是，我收到一个弹出窗口，其中包含以下消息：

```
Warnings from last compilation

C:\Users\...\RedBlackTree.java uses unchecked or unsafe operations.
Recompile with -Xlint:unchecked for details. 
```

几乎所有 I here 或 Comparable there 的组合仍然会导致这样的弹出窗口。我正在使用 BlueJ 环境进行编程，这使得无法合并相关的编译器参数以查看任何细节。

据我到目前为止的研究可以看出，这与内部类使用 I 泛型类型有关，因此 RedBlackNode 内部类中的“RedBlackNode 实现 Comparable”和 compareTo 方法需要与之抗衡不知何故的事实。

我知道这个问题已经在 stackoverflow 和其他地方被问过并且回答了很多次，但我似乎无法将从这些实例中学到的东西应用到我的案例中。我对泛型很陌生，所以我能在这里得到的任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:55:31.740

[Comparable](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接受一个 Type 参数。编译器抱怨是因为您没有提供它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:01:48.437

警告是因为您使用的是原始类型`Comparable`而不是给它一个类型参数。您所要做的就是将类定义更改为

```
public class RedBlackTree<I extends Comparable<I>> 
```

和

```
private class RedBlackNode implements Comparable<RedBlackNode> 
```

并相应地调整`compareTo()`方法（这实际上会大大简化它，因为您不再需要类型检查和强制转换）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T11:08:21.563

进行以下更改

```
public class RedBlackTree<I extends Comparable<I>>

private class RedBlackNode implements Comparable<RedBlackNode>

    @Override
    public int compareTo(RedBlackNode node)
            int result = id.compareTo(node.id);
            return result > 0 ? 1 : result < 0 ? -1 : 0; 
```

在 compareTo 中删除类型检查。注意公众，因此始终使用`@Override`.

# php - 用户编辑表单数据时获取复选框值。PHP

> ID：15545435
> 
> 赞同：0
> 
> 时间：2013-03-21T10:52:07.857
> 
> 标签：php, forms, checkbox

我有一个带有复选框的表单，用户填写并提交。然后我有另一个表格，允许他们编辑他们提交的信息。第二个表单预先填充了他们在第一个表单上提交的信息。这对文本字段很好，但我如何预先填充复选框？即，如果他们在第一个表单上选中了一个复选框，我如何让第二个表单识别它并显示一个选中的复选框？

我是 Php 的新手，很抱歉我不能对这个查询更有技术性！

谢谢

卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:00:04.987

当您提交表单时，您会在下一页获得数据。所以如果有一个看起来像这样的复选框：

```
<input type="checkbox" name="over18" value="1" /> 
```

您必须检查此人是否选择了“18 岁以上”字段。

```
if ($_POST['over18'] == '1') {
  $checked = 'checked="checked"';
} 
else {
  $checked = ''; //If it's not checked
} 
```

然后您的复选框输出如下所示：

```
echo '<input type="checkbox" name="over18" value="1" ' . $is_checked .'/>'; 
```

因此，每次选中 Checkbox 时，下一页也会检查 Checkbox。

# python - 使用索引从两个列表制作字典

> ID：15545438
> 
> 赞同：1
> 
> 时间：2013-03-21T10:52:11.937
> 
> 标签：python

我有两个清单：

```
alist =  [11,12,13,11,15]
blist = ['A', 'A', 'B', 'A', 'B'] 
```

我想制作一个字典，其中 blist 中的项目是键，alist 中的项目是值，其中列表对应于两个列表中的索引：

结果应该是：

```
{'A': [11, 12, 11], 'B': [13, 15]} 
```

我试过这个：

```
dictNames = {}
for i in xrange(len(alist)):
    for letter in blist:
        if letter not in dictNames:
            dictNames[letter] = []
        else:
            dictNames[letter].append(alist[i]) 
```

这给出了结果：

```
{'A': [11, 11, 12, 12, 12, 13, 13, 13, 11, 11, 11, 15, 15, 15], 'B': [11, 12, 12, 13, 13, 11, 11, 15, 15]} 
```

为什么它不附加到字典中预先存在的字母，而不是在它已经在字典中时添加到它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:54:58.393

使用 a`defaultdict`方便：

```
from collections import defaultdict

dictNames = defaultdict(list)
for key, value in zip(blist, alist):
    dictNames[key].append(value) 
```

这将创建：

```
>>> dictNames
defaultdict(<type 'list'>, {'A': [11, 12, 11], 'B': [13, 15]}) 
```

`defaultdict`是 的子类，`dict`因此它仍然可以像其他任何`dict`.

如果没有`defaultdict`，您将不得不测试密钥是否已经存在`setdefault()`：

```
dictNames = {}
for key, value in zip(blist, alist):
    dictNames.setdefault(key, []).append(value) 
```

导致：

```
>>> dictNames
{'A': [11, 12, 11], 'B': [13, 15]} 
```

这里真正的技巧是使用[`zip()`](http://docs.python.org/3/library/functions.html#zip)组合键和值列表而不是双循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:00:32.760

首先，您遍历两个列表。对于 alist 中的每一项，它都会遍历 blist。所以内循环运行了 25 次。相反，您希望它运行 5 次，因此您只需要一个循环。

其次，如果列表尚不存在，则正确初始化列表，但在这种情况下，该数字不会添加到列表中。该号码应始终添加到列表中，即使它是一个新列表。

我更改了您的代码以将这两件事考虑在内，并且效果更好：

```
for i in xrange(len(alist)):
    letter = blist[i]
    if letter not in dictNames:
        dictNames[letter] = []
    dictNames[letter].append(alist[i]) 
```

输出：

```
{'A': [11, 12, 11], 'B': [13, 15]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:21:44.187

这是我目前能想到的最短的表达方式：

```
from itertools import groupby

{k: {x[1] for x in v} for k, v in groupby(sorted(zip(blist, alist)), lambda x: x[0])} 
```

相关（尚未提及）部分是对 的调用`groupby`，也在以下类似问题中进行了描述：[Python group by](https://stackoverflow.com/questions/3749512/python-group-by)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:21:05.513

这是一个单行解决方案：

```
 {k: [alist[i] for i in range(len(blist)) if blist[i] == k] for k in set(blist)} 
```

唯一的问题是在最坏的情况下时间复杂度为 O(n^2)，不适合大型列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:03:02.487

这种方式保持秩序

```
from collections import defaultdict

alist =  [11,12,13,11,15]
blist = ['A', 'A', 'B', 'A', 'B']

d = defaultdict(list)
seen = defaultdict(set)

for k, v in zip(blist, alist):
    if v not in seen[k]:
        d[k].append(v)
        seen[k].add(v)

print d 
```

* * *

```
defaultdict(<type 'list'>, {'A': [11, 12], 'B': [13, 15]}) 
```

# android - YotubePlayerSupportFragment 横向模式下的全屏视图

> ID：15545439
> 
> 赞同：7
> 
> 时间：2013-03-21T10:52:12.177
> 
> 标签：android, youtube-api

我正在尝试以横向模式全屏显示 youtube 播放器，但它不起作用。我放

```
player.setFullscreenControlFlags(YouTubePlayer.FULLSCREEN_FLAG_CONTROL_ORIENTATION);
player.setFullscreenControlFlags(YouTubePlayer.FULLSCREEN_FLAG_ALWAYS_FULLSCREEN_IN_LANDSCAPE); 
```

但是例外来了：

```
java.lang.IllegalArgumentException: Can not set FULLSCREEN_FLAG_FULLSCREEN_WHEN_DEVICE_LANDSCAPE without setting FULLSCREEN_FLAG_CONTROL_ORIENTATION
03-21 16:10:09.892: E/AndroidRuntime(15996):    at com.google.android.youtube.player.internal.r$a.handleMessage(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:02:37.057

flags 参数 to`setFullscreenControlFlags`是一个位掩码，因此您应该对所需的所有标志进行按位或运算，并通过一次调用来设置它们，`setFullscreenControlFlags`而不是使用多次调用。

# c++ - CUDA FFT 异常

> ID：15545442
> 
> 赞同：0
> 
> 时间：2013-03-21T10:52:17.823
> 
> 标签：c++, cuda, gpgpu, gpu

我正在尝试使用 CUDA FFT aka cufft 库

当 cufftPlan1d(..) 抛出异常时出现问题。

```
 #define NX 256
   #define BATCH 10

   cufftHandle plan;
   cufftComplex *data;
   cudaMalloc((void**)&data, sizeof(cufftComplex)*NX*BATCH);
   if (cudaGetLastError() != cudaSuccess){
         fprintf(stderr, "Cuda error: Failed to allocate\n");
         return;
   } 
   if (cufftPlan1d(&plan, NX, CUFFT_C2C, BATCH) != CUFFT_SUCCESS){
         fprintf(stderr, "CUFFT error: Plan creation failed");
         return;
   } 
```

当编译器点击 cufftPlan1d 命令时，VS08 上的输出窗口出现以下内容：

```
 first chance expection at 0x75af9617 in CudaFFTProject.exe Microsoft C++ exception: cufftResult_t at memory location 0x002df99c.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:14:48.470

该错误来自包含文件和链接器输入文件的混乱（不确定其中一个）。

我的个人电脑包括cuda toolkit 4.2 和cuda toolkit 5 安装。

在 VS08 中，项目属性：

附加包括：
使用`"$(CUDA_PATH_V4_2)\include"`
代替`$(CUDA_INC_PATH)`

链接器 --> 附加库目录 -->
使用`"(CUDA_PATH_V4_2)\lib\win32"`
而不是`$(CUDA_LIB_PATH)`

# sql - Oracle query performance degrades when inserting many rows in a single transaction

> ID：15545443
> 
> 赞同：1
> 
> 时间：2013-03-21T10:52:18.630
> 
> 标签：sql, performance, oracle

In a single transaction I am inserting may rows into a table, before inserting the row I perform a query to see if there is already a row with the key I am about to insert.

What I see is that the query to check the key exists gets very slow within my transaction, but from another transaction it is fast, and in the next transaction it is fast.

I cant break this work down into smaller transactions as the request I am processing needs to be in a single transaction.

Is there anything I can do to make the select query in this transaction fast?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:38:01.513

如果插入数百万条记录首先要做增量提交，因为您可能会遇到临时空间碎片或导致速度减慢的限制。这也可以在开始结束块中完成，这允许您通过添加索引

```
create index b indexName on table_name(col1, col2, col3); 
```

与先前的答案状态相比，合并更快。
或者添加所有忽略重复然后删除重复这可以通过
例如

```
begin
    insert into table_name select * from table_name; [ if pulling from another table]or[use values and column maps]
    delete from table_name A where rowid >(select min(rowid) from table_name B where A.key_value=B.key_value);
end 
```

如果在一个过程中，这也需要查询和删除都可以在开始结束块中并立即执行（'you ddl statement here';'）;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:00:11.020

所以，请添加约束/主键。这将允许您删除所有选择。可以考虑使用[MERGE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9016.htm)作为@Egor_Skriptunoff 推荐的方法。

或为您选择的列添加索引。

# css - div上方的空白

> ID：15545451
> 
> 赞同：0
> 
> 时间：2013-03-21T10:52:41.213
> 
> 标签：css

请看下面的图片.. ![在此处输入图像描述](../Images/cc12888d83e7633bb07a88e0435aa98e.png)

如您所见..我已在每条评论中添加了`:hover`属性。`div`但我得到一个小空白。当我使用 chrome 开发工具突出显示元素时，空白区域会出现在所有元素的区域之外。它似乎是两个 div 之间的空白。请帮我删除它。我添加`margin-top`了一个负值，但它在悬停时产生了抽搐效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:03:36.820

没有源代码继续下去，我只能推测 HTML，所以请耐心等待。

检查从`<div>`. 如果其中有 a `<p>`，则边距可能会超出 parent 的边界`<div>`。

如果是这种情况，那么这应该可以解决问题：

```
div p {
    margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:22:35.953

假设您的布局类似于：

```
<div>Line 1</div>
<div>Line 2</div>
<div>Line 3</div> ... 
```

您只需要重置他们的边距：

```
div {
    margin:0;
} 
```

您可能还需要将此应用于`div:hover`。

或者，您可以查看现有样式，并且（如果不是用户代理样式导致这种情况 - 这对于`div`元素来说不太可能），只需相应地更改您的自定义样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T03:57:37.477

多谢你们。我应该添加一个jsfiddle。

我在每条评论的底部都使用了一个 HR，这个 HR 在财产之后有一个利润。我删除了 hr 并为包含评论的 div 添加了一个边框底部。所以那个边距被删除了。:)

万分感谢！我添加了填充以给评论留出空间。

# asp.net - asp.net uploading image to server

> ID：15545456
> 
> 赞同：0
> 
> 时间：2013-03-21T10:52:47.887
> 
> 标签：asp.net

I am uploading image to the server in an asp.net page.Here is the code..

**Code**:

```
protected void Button2_Click1(object sender, EventArgs e)
        {

           //resimyolu = "~/r/" + FileUpload1.FileName;
           FileUpload1.SaveAs(Server.MapPath("~/r/a.png"));
           FileUpload1.SaveAs("d:/upresim/a.png");
           Image1.ImageUrl = "~/r/a.png";

        } 
```

the 'r' folder is the image folder in my project.when I add a picture to the 'r' folder at runtime,it works succesfully on local IIS ,but when I publish my project and host it on a server(remote server) the web page is opening in the browser ,but when I click button2 to add client image(which client user selected from his computer) to the project an error appears like below..

```
Runtime Error 
Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 

Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:14:35.740

问题是这条线。

```
FileUpload1.SaveAs("d:/upresim/a.png"); 
```

将其更改为将有所帮助。

```
FileUpload1.SaveAs("d:\\upresim\\a.png"); 
```

如果您的代码，请避免使用此类硬编码路径。更换机器时会遇到问题。`Server.MapPath`总是更好的方法。如果您不想保存在 Web 目录中，则应始终从配置中获取基本路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:56:05.443

按照错误消息中的建议，禁用 web.config 上的自定义错误以查看问题所在。

```
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

# html - Why does my whole page move when I change margin-top?

> ID：15545457
> 
> 赞同：0
> 
> 时间：2013-03-21T10:52:48.653
> 
> 标签：html, css, webpage

Alright, I am making this website, from a tutorial, yes I am still a beginner, no the tutorial did not explain why this things happens.

Basically, this is what happens, I have the CSS like this.

```
@charset "utf-8";
/* CSS Document */
body { font-family: Arial, Helvetica, sans-serif; }  

.container 
{  
    width: 800px;  
    margin: 0 auto;   
}  

body, div, h1, h2, h3, h4, h5, h6, p, ul, img {margin:0px; padding:0px; }  

#main   
{
    background: url(images/header.jpg) repeat-x;
}

#main .container
{
    background: url(images/shine_04.jpg) no-repeat;
}

#logo 
{  
    background: url(images/logo.png) no-repeat;  
    height:104px;
    width:301px;
}  

#logo h1
{
    text-indent: -9999px;
    margin-top: 40px;
} 
```

And my HTML like this, I only post the body.

```
 <div id="main">  
    <div class="container">
     <div id="header">  
       <div id="logo">  
         <h1>Logo</h1>
        </div>  
       <div id="tagline">  
         <h3>I Love Stuff</h3> 
        </div>
       <ul id="menu">  
         <li><a href="#">Home</a></li>  
         <li><a href="#">About</a></li>  
         <li><a href="#">Portfolio</a></li>  
         <li><a href="#">Contact</a></li>  
       </ul>  
     </div><!--end header -->  

     <div id="content">  
     <h2>Lorem ipsum, Dolor sit</h2>  
        <h3>Nullam vulputate felis id odio interdum nec malesuada mi pretium. </h3>  
        <p>Praesent luctus egestas nisl, vitae vehicula eros rhoncus vel.   
            Phasellus consequat arcu eu neque convallis eu vulputate diam vehicula. In eget venenatis nisl.   
            Vestibulum id nulla eu sapien pellentesque malesuada pharetra ac lacus.   
            Curabitur et ultricies quam. Aenean pretium aliquet velit, gravida vulputate urna tempus vel.  </p>  
        <p>Proin tempor erat sit amet nisl porta nec vulputate arcu imperdiet. Praesent luctus egestas nisl, vitae vehicula eros rhoncus vel.   
            Phasellus consequat arcu eu neque convallis eu vulputate diam vehicula. In eget venenatis nisl.   
            Vestibulum id nulla eu sapien pellentesque malesuada pharetra ac lacus. Curabitur et ultricies quam. Aenean pretium aliquet velit,   
        gravida vulputate urna tempus vel. Proin tempor erat sit amet nisl porta nec vulputate arcu imperdiet. </p>  
    <div id="news">  
        <h3>Latest Updates</h3>  
        <h4>Vestibulum id nulla eu sapien pellentesque</h4>  
        <small>June 1, 2009</small>  
        <p>Ut vel turpis a orci pulvinar tincidunt. Mauris id purus turpis. Aliquam metus arcu,   
            facilisis quis pellentesque vitae, dapibus non nulla. Nulla suscipit sagittis sodales.   
            Etiam laoreet ante in purus laoreet id malesuada dui pretium.<a href="#"> Read More</a></p>  
    <h4>Vestibulum id nulla eu sapien pellentesque</h4>  
    <small>June 1, 2009</small>  
    <p>Ut vel turpis a orci pulvinar tincidunt. Mauris id purus turpis. Aliquam metus arcu,   
        facilisis quis pellentesque vitae, dapibus non nulla. Nulla suscipit sagittis sodales.   
        Etiam laoreet ante in purus laoreet id malesuada dui pretium.<a href="#"> Read More</a></p>  
     </div><!--end news-->  

     </div><!--end content-->  

     <div id="sidebar">  
     <div id="subscribe">  
                    <h3>Subscribe!</h3>  
                    <ul>  
                        <li><a href="#">Subscribe via RSS</a></li>  
                        <li><a href="#">Get Email Updates</a></li>  
                        <li><a href="#">Follow us on Twitter</a></li>  
                    </ul>  
                </div>  
                <div id="popular">  
                    <h3>Popular Items</h3>  
                    <ul>  
                        <li><a href="#">Lorem ipsum dolor site amet</a></li>  
                        <li><a href="#">Ulvinar tincidunt, Mauris id</a></li>  
                        <li><a href="#">Lorem ipsum dolor site amet</a></li>  
                        <li><a href="#">Proin tempor erat sit tene</a></li>  
                    </ul>  
                </div>  
                <div id="contributors">  
                    <h3>Contributors</h3>  
                    <ul>  
                        <li><a href="#">John Smith, freelance writer</a></li>  
                        <li><a href="#">Jack McCoy, designer</a></li>  
                        <li><a href="#">Lenny Briscoe, editor</a></li>  
                        <li><a href="#">John Smith, martketing</a></li>  
                    </ul>  
                    <a href="#">Join Our Team</a>   
                </div>  

     </div><!--end sidebar-->  

    </div><!--end main container-->  
   </div><!--end main--> 

    <div id="footer">  
     <div class="container">  
          <p>Copyright © 2009  MySite <br />  
            All Rights Reserved</p>  
     </div><!--end footer container-->   

    </div><!--end footer--> 
```

In the CSS, I have the `#logo` h1 selector, as you can see from the parent `#logo` selector, I have a background, which is exactly the logo, now I want the damn logo to be positioned 40px slightly lower from the top, that's why I put `margin-top: 40px;` , and I don't understand why, but instead of just the logo moving 40px down, the whole page moves down! T_T, I have already spent almost 1 hour trying to deduce all the logic that my brain can handle behind this, but I just cant!

And my question is just like what I said, why does the whole page move downwards? the logo image is the only element that's supposed to move, but why the whole thing? and what do I do to fix it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:58:30.650

尝试在父容器上用 padding: 替换边距`padding-top: 40px`，即`#header`，因为您已经指定了背景图像`#logo`并且不必看到它移动。

为什么要在边距上使用填充？这很简单：利润有崩溃的倾向。W3C 有一个[综合部分](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)专门介绍管理保证金崩溃的规则。

p/s：为了便于故障排除，请尝试在 JSFiddle 上发布您的问题。它不仅有助于社区可视化您的问题，而且还有助于加快实际解决问题的过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:05:04.353

尝试

```
#logo 
{  
    background: url(images/logo.png) no-repeat;  
    height:104px;
    width:301px;
    background-attachment:fixed;
    background-position: 0px 40px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:10:07.710

尝试这个：

```
#logo 
{  
    background:url(images/logo.png) no-repeat;
    background-position: 0px 40px;
    height:144px;
    width:301px;
} 
```

# sql-server-2008 - Protect table update using database role (server role is over)

> ID：15545460
> 
> 赞同：0
> 
> 时间：2013-03-21T10:53:02.730
> 
> 标签：sql-server-2008, database-security

I have a database role named app_user with select, update, insert and delete rights on all tables except 2\. On this 2 tables app_user role has only select right.

But, some users have right to create database users (using create login, sp_adduser, sp_addrolemember). To be able to execute this procedures they must have sysadmin server role. In this case sysadmin role is over database role app_user and they can update this 2 tables. Currently, I'm giving them securityadmin role but they can execute only create login while creating db users.

To summarize, I want to protect updating 2 tables for all users except my sysadmin account, and I want some users to be able to create database users (my app executes sp which grant db permission for that kind of users).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:39:16.363

您可能会在 DBA 站点上得到更好的答案，但看起来您希望允许用户执行 3 个命令：`CREATE LOGIN`和`CREATE USER`（`sp_addrolemember`因为`ALTER ROLE`无法将成员添加到 SQL Server 2008 中的角色）。

根据文档，所需的最低权限是：

*   `CREATE LOGIN`-`ALTER (ANY) LOGIN`
*   `CREATE USER`-`ALTER ANY USER`
*   `sp_addrolemember`-`ALTER`角色权限

因此，如果您授予他们上面列出的权限，他们不应该需要任何一个`sysadmin`或权限。`db_owner`

# sql - 从多个表中选择多个列

> ID：15545464
> 
> 赞同：0
> 
> 时间：2013-03-21T10:53:10.423
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

例子。
我有两张桌子

```
CAR
id  name
1    bmw
2    fiat

Car_info
car_id  field_name   country
  1     year          2000
  1     country       germany
  2     year          1988
  2     country       italy 
```

如何在一个选择查询中得到这个？

```
id name  year  country
1   bmw  2000   germany
2   fiat 1988   italy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:07:32.403

理想情况下，您应该在 car_info 表中有一列指定该行上显示的信息类型。即类型 1 是年份，类型 2 是国家。

你可以通过加入 car_info 表两次来解决这个问题，在加入时指定一个“AND”条件，如下所示：

```
SELECT car.ID, car.Name, ci1.country as [YEAR], ci2.country as COUNTRY
FROM car
INNER JOIN car_info AS ci1 ON Car.ID = ci1.car_id AND ci1.field_name = 'year'
INNER JOIN car_info AS ci2 ON Car.ID = ci2.car_id AND ci2.field_name = 'country' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:09:07.493

```
WITH car AS (
  SELECT 1 AS id, 'BMW' AS name FROM dual
  UNION ALL
  SELECT 2, 'Fiat' FROM dual
)
, car_info AS (
  SELECT 1 AS car_id, 'Year' AS field_name, '2000' AS field_val FROM dual
  UNION ALL
  SELECT 1, 'Country', 'Germany' FROM dual
  UNION ALL
  SELECT 2, 'Year', '1988' FROM dual
  UNION ALL
  SELECT 2, 'Country', 'Italy' FROM dual
)
  SELECT c.*, car_year.field_val AS yr, car_country.field_val AS country
    FROM car c
    JOIN car_info car_year ON c.id = car_year.car_id AND car_year.field_name = 'Year'
    JOIN car_info car_country ON c.id = car_country.car_id AND car_country.field_name = 'Country'
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:09:42.920

试试这个：你可以使用`PIVOT`然后加入`Car`表

```
with cte as 
(
 Select car_id,[year],[country]
 from 
 (Select car_id,field_name,countryName
  from car_info
 )pv
 pivot 
 (
  max(countryName)
  FOR field_name IN ([year],[country])
 )pvt
 )
 Select c.name,ct.year,ct.country
 from car c inner join cte ct
 on ct.car_id=c.id 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/949f7/1)中的演示

# visual-studio-2012 - EF 中的 POCO 类未按预期工作

> ID：15545469
> 
> 赞同：6
> 
> 时间：2013-03-21T10:53:16.950
> 
> 标签：visual-studio-2012, entity-framework-5, poco, edmx

我在 SQL 中创建了一个数据库，并在 Visual Studio 2012 中创建了一个 EDMX。它自动创建了 POCO (TT) 类。一切看起来都很好。

现在我更改表的列名。我更新了 EDMX。在 XML 中打开 EDMX，一切看起来都很好。

# **问题 1**

在 TT 中运行自定义工具后，我看到另外创建了一个新属性，例如：

```
SQL table name : Student

Column name : sName 
```

在我的 POCO 课上

```
public int sName{ get; set; } 
```

自动创建的。

现在我将 SQL 中的列名更改为

```
Column name : studentName 
```

我的 POCO 课

```
public int sName{ get; set; }

public int studentName{ get; set; } 
```

这是一个错误还是我需要做些什么来解决这个问题？

我应该怎么做才能避免这种情况？

# **问题2**

此外，如果我更改任何 SQL 列的数据类型并从我的 EDMX 设计器中的数据库更新模型，则不会更新概念模型。我该怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-25T13:42:09.143

首先，要了解您的问题，您需要知道的是[EDMX](http://msdn.microsoft.com/en-US/data/jj650889)文件只是一个包含 3 个不同部分的 XML 文件：

*   CSDL：概念模式定义语言
*   SSDL：存储模式定义语言
*   MSL：映射规范语言

CSDL 包含构成概念模型的实体和关系。SSDL 描述您的数据库模型，而 MSL 是两者之间的映射。

“从数据库更新模型”过程将更新 SSDL（更改与当前数据库架构不一致的所有内容），它只会在您向数据库架构添加新内容的情况下修改 CSDL。

这是一种非常正常的行为，因为您的概念架构可能/应该与您的数据库架构不同（除非您希望您的域模型看起来完全像一个显然不像 OOP/DDD 最佳实践的数据库模型）。

至于@Peru，解决方案是删除相关实体（而不是整个 EDMX！），然后执行“从数据库更新模型”过程。

希望这可以帮助！

**编辑：**

有一个工具，不是免费的，它是一个 Visual Studio 插件，允许您将更改应用到数据库中，包括 CSDL 和 SSDL 文件：[Huagati DBML/EDMX 工具](http://www.huagati.com/dbmltools/)。唯一的“免费”解决方案是删除需要更新的实体（或该实体中的正确字段）。

请记住，CSDL 应该由开发人员维护，并且必须看起来像对象模型而不是数据库模型。假设您在实体之间设置了继承，或者您已将 1 个 DB 表拆分为 2 个 EDMX 实体，运行“从 DB 更新模型”不应覆盖所有内容！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-01T07:13:48.727

就个人而言，我会以 XML 格式打开 edmx 文件并找到问题节点并将其删除。该文件很容易理解 - 不要害怕至少尝试一下。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-04T14:29:59.907

我知道我在这里有点晚了，但是有*一种*相对简单的方法可以从 EDMX 设计器生成 POCO/更新 DbContext。

转到您的设计器，右键单击空白区域，单击“从数据库更新模型”，添加/更新您的表。这将更新您的 edmx XML。在您确认您的表已添加到 CSDL、SSDL 和 MSL 部分后，在解决方案资源管理器中右键单击您的 T4 模板（`<Name>.tt`， not `<Name>.Context.tt`）并单击“运行自定义工具” - 这将为任何更新生成 POCO对象。请注意，如果您正在创建新实体，它们不会被添加到您的 DbContext 类中，您仍然需要通过在类底部添加以下行来手动执行此操作：`public virtual DbSet<Entity_Name_Goes_Here> EntityNames { get; set; }`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-14T18:09:21.033

只有手动编辑适用于我项目中的视图。（从 smallint 到 decimal(18,2) ）

在文本编辑器中打开 .EDMX 文件，找到适当的部分，然后手动更改 Property Type="..." 值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-12-11T01:43:24.777

更新 Db 中的字段后，找到相应的 model.cs 文件，然后从模型中删除这些字段。现在更新 EDMX 文件（从数据库更新模型）。它对我有用。

# android - Forge.ui.enhanceInput - 输入时未触发更改事件

> ID：15545471
> 
> 赞同：1
> 
> 时间：2013-03-21T10:53:19.633
> 
> 标签：android, android-webview, trigger.io

我正在使用在 Android 上`Forge.ui.enhanceInput`显示本机时间选择器。`<input type="time">`

问题是当伪造本地时间选择器返回时，输入上没有触发任何更改事件。Forge.ui.enhanceInput 上也没有可用的回调，所以目前我不知道如何找出输入日期的时间。

是否有任何解决方案，所以我可以知道何时输入了日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:14:55.420

侦听输入元素上的“模糊”事件。由于我们的 v1.4.23 版本发布完成后，本机选择器会触发该事件： [http ://docs.trigger.io/en/v1.4/release-notes.html#v1-4-23](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-23)

# javascript - 使用复选框显示和隐藏 Div

> ID：15545479
> 
> 赞同：1
> 
> 时间：2013-03-21T10:53:40.437
> 
> 标签：javascript, jquery, html, css

![单因素身份验证](../Images/2aa1ec1cea7ee1abdab45c43a2301a3b.png)

我的要求是，如果我选择单一因素，我只能选择一种身份验证模式。如果选择了任何一种身份验证模式，则将显示相应的 div，在多个因素中，我可以选择两种身份验证模式，但如果我选择两种身份验证模式，则仅显示第一个选中的 div，但第二个选中的 div 不显示得到显示。选择 2 个选项时如何显示两个 div。

![多重因素](../Images/1be485fec5eba3a4f0022cdfaf4cd270.png)

我试过这个：

```
 if ($('#chkOTP').is(':checked')) {
        $('#OTPMain').show();
    } else if ($('#chkVoicePrint').is(':checked')) {
        $('#VoicePrintEmailCampMain').show();
    } else if ($('#chkPersonInfo').is(':checked')) {
        $('#RandomAuthMain').show();
    } else if ($('#chkPastHis').is(':checked')) {
        $('#PastHistoryMain').show();
    } else if ($('#chkSQ').is(':checked')) {
        $('#SqQuestionMain').show();
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:03:12.077

使用这个 .. 如果你使用 else if 只执行一个语句，那么你应该为每个复选框使用 if

```
 if ($('#chkOTP').is(':checked')) {
        $('#OTPMain').show();
    } 
    if ($('#chkVoicePrint').is(':checked')) {
        $('#VoicePrintEmailCampMain').show();
    } 
    if ($('#chkPersonInfo').is(':checked')) {
        $('#RandomAuthMain').show();
    } 
    if ($('#chkPastHis').is(':checked')) {
        $('#PastHistoryMain').show();
    } 
    if ($('#chkSQ').is(':checked')) {
        $('#SqQuestionMain').show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:22:28.560

稍加考虑可以为您节省相当多的代码。在您的 div 上放置一个与复选框的值匹配的类，您可以像这样在 jQuery 中单击：

```
<input type="checkbox" name="vehicle" value="first">First<br />
<input type="checkbox" name="vehicle" value="second">Second<br />
<input type="checkbox" name="vehicle" value="third">Third<br />
<input type="checkbox" name="vehicle" value="fourth">Fourth<br />
<div class="first">First</div>
<div class="second">second</div>
<div class="third">third</div>
<div class="fourth">fourth</div>

$('input:checkbox').on('click',function(){
    if($(this).is(':checked'))
    {
        $('.'+$(this).val()).show();
    } else {
        $('.'+$(this).val()).hide();
    }

}); 
```

演示：http: [//jsfiddle.net/calder12/jRZBX/1/](http://jsfiddle.net/calder12/jRZBX/1/)

# emacs - 标记区域并插入前缀

> ID：15545480
> 
> 赞同：2
> 
> 时间：2013-03-21T10:53:42.850
> 
> 标签：emacs, elisp

我最近从 vi 切换到 emacs，现在我正在将我最重要的宏移植到 emacs。我最需要的是能够为标记的文本区域添加一个字符串，包括页眉和页脚：

原来的：

```
line 1
line 2
line 3
line 4 
```

在标记第 2 行和第 3 行之后，我希望 emacs 向我询问一个数字，比如 002，然后执行以下操作，最好记住我的选择：

```
line 1
*#002# Start:
*$line 2
*$line 3
*#002# End.
line 4 
```

到目前为止，我已经设法使用以下代码插入开始和结束标签：

```
(defun comment-region (start end)
  "Insert COBOL comments."
  (interactive "r")
  (save-excursion 
    (goto-char end) (insert "*#xxx# End.\n")
    (goto-char start) (insert "*#xxx# Start:\n")
    )) 
```

但是，我似乎不知道如何为该区域中的所有行加上前缀，`*$`以及如何让 emacs 向我询问一个字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:18:22.577

[我最近通过使用yasnippet](https://github.com/capitaomorte/yasnippet)动态生成片段来解决这类问题。

这是代码：

```
(require 'yasnippet)
(defun cobol-comment-region (beg end)
  "comment a region as cobol (lines 2,3 commented)

line 1
*#002# Start:
*$line 2
*$line 3
*#002# End.
line 4
"
  (interactive "*r")
  (setq beg (progn
             (goto-char beg)
             (point-at-bol 1))
       end (progn
             (goto-char end)
             (if (bolp)
                 (point)
               (forward-line 1)
               (if (bolp)
                   (point)
                 (insert "\n")
                 (point)))))
  (let* ((str (replace-regexp-in-string
               "^" "*$" (buffer-substring-no-properties beg (1- end))))
         (template (concat "*#${1:002}# Start:\n"
                           str
                           "\n*#$1# End.\n"))
         (yas-indent-line 'fixed))
    (delete-region beg end)
    (yas-expand-snippet template))) 
```

# 包括视频，什么？？？

这是它的实际操作[视频](http://www.youtube.com/watch?v=8ljg7c2Up20)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:17:07.087

这是一个更好的方法，但它最后有点尴尬......

```
(defun comment-region (start end prefix)
  "Insert COBOL comments."
  (interactive "r\nsPrefix: ")
  (save-excursion
    (narrow-to-region start end)
    (goto-char (point-min))
    (insert "*#" prefix " #Start.\n")
    (while (not (eobp))
      (insert "*$")
      (forward-line))
    (insert "*#" prefix " #End.\n")
    (widen))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:47:53.930

您最好的选择是使用[cobol-mode](http://www.emacswiki.org/emacs/cobol-mode.el)而不是自己编写临时函数。

文件头包含有关如何使用它的详细说明。

然后只需使用`C-x C`which 运行命令`comment-region`，它会根据主要模式（在您的情况下为 cobol）评论该区域。

# view - Eclipse RCP - 防止将视图移动到另一个文件夹（或只是防止移动）

> ID：15545490
> 
> 赞同：0
> 
> 时间：2013-03-21T10:54:09.650
> 
> 标签：view, eclipse-rcp

在 Eclipse IDE 中，我们可以看到某些视图不能移动到另一个文件夹，例如视图“Package”不能移动到编辑器选项卡。那么，如何防止将视图移动到另一个文件夹？

我试图完全阻止移动视图，但我需要能够关闭选项卡，所以

```
layout.setFixed(true); 
```

不是解决方案。我的文件夹中有多个视图，并关注

```
folder = layout.createFolder(FOLDER_ID, IPageLayout.TOP,
    ratio, editorArea);
folder.addPlaceholder(View.ID + ":viewSecondaryID*");

String id = View.ID;
String secondaryId = Integer.toString(View.getCurrentId());
folder.addView(id + ":" + secondaryId); 

IViewLayout view = layout.getViewLayout(id + ":" + secondaryId);
view.setMoveable(false); 
```

不起作用。有人在这里有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:49:10.920

尝试在 plugin.xml 中定义它。

> > **moveable** - 可选属性，指定视图是否应该是可移动的。如果不存在，它将是可移动的。

例子：

```
 <view
  class="org.eclipsercp.hyperbola.ContactsView"
  icon="icons/groups.gif"
  moveable="false"
  id="org.eclipsercp.hyperbola.views.contacts"
  name="Contacts"/> 
```

# php - Magento - 具有值数组的单个自定义产品属性

> ID：15545494
> 
> 赞同：2
> 
> 时间：2013-03-21T10:54:19.243
> 
> 标签：php, magento, attributes, product

我需要在 Magento 中提供一个数组自定义产品属性，该属性将其所有值输出为列表项。基本前提是产品成分列表……在每个产品的基础上，我们需要输入（例如）水、盐、色素——并将这些内容作为列表呈现在前端。

到目前为止，我的逻辑是使用标准文本字段属性，在后端输入逗号分隔的值，然后尝试将该字符串用作数组，我可以从中使用 foreach 创建无序列表。

到目前为止，我可以将整个字符串作为一个列表项来回显，但是将字符串呈现为其单个值的数组到目前为止让我感到难过！见下文...

成分文本字段属性的值为“水”、“盐”、“色素”。- 添加引号和逗号只是假设这会将列表预先格式化为数组。

```
<?php
$ingredientsArrayContent = $this->getProduct()->getSpa_productingredients();
$ingredientsArray = array($ingredientsArrayContent);
?>
<ul>
    <?php
    reset($ingredientsArray);
    foreach ($ingredientsArray as $ingredientsValue) {
        echo "<li>$ingredientsValue</li>\n";
    }
    ?>
</ul> 
```

所以在前端这是输出：

```
<ul>
    <li>"water", "salt", "colourings"</li>
</ul> 
```

我当然希望实现的是：

```
<ul>
    <li>water</li>
    <li>salt</li>
    <li>colourings</li>
</ul> 
```

即使在 Magento 中，我是否过于复杂化并遗漏了一些非常明显的东西？任何指针都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:25:08.523

也许代替：

$ingredientsArray = 数组（$ingredientsArrayContent）；

尝试使用：

$ingredientsArray = array(explode(",",$ingredientsArrayContent));

根据您的属性是否设置为：“water,salt,colourings”或“water, salt, colourings”，您的分隔符可能需要更改，或者您设置属性值的方式可能需要更改。

# treeview - 如何在树视图中使用来自 2 个模型的字段？开瓶器

> ID：15545495
> 
> 赞同：1
> 
> 时间：2013-03-21T10:54:24.940
> 
> 标签：treeview, openerp

我有一棵树，它的字段与其他模型具有多对一关系，
我想根据其他模型中字段的值更改现有树视图的记录颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:10:10.603

您可以在这种情况下使用`related`字段：

像这样：

```
'plan_id': fields.many2one(
        'hr_evaluation.plan',
        'Appraisal Plan',
        ondelete='cascade',
        ),
'company_id': fields.related(
        'plan_id',
        'company_id',
        type='many2one',
        relation='res.company',
        string='Company',
        store=True,
        readonly=True,
        ), 
```

然后使用该`company_id`字段。

# java - 获取线条和形状的交点

> ID：15545496
> 
> 赞同：4
> 
> 时间：2013-03-21T10:54:33.323
> 
> 标签：java, math, geometry, computational-geometry, java-2d

我有一个自定义形状，如图所示。假设覆盖图像中形状的蓝色矩形描绘了该形状的边界框。

**如果我在边界矩形的对角线之一画线，我怎样才能得到交点（在图像中它们是使用绿色绘制的）？**

我正在使用 Java2D，我有一个 GeneralPath，其中包含我在屏幕上绘制形状的所有坐标。

![自定义形状](../Images/c32c67be8d059e007f64f8f60e3c98ca.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:14:23.950

## 主意

您可以使用 getPathIterator() 方法将 GenenralPath 解构为其段（移动到、行到、四边形、立方到、关闭）。现在，您可以按段搜索与该线的交点。

```
public static Point[] getIntersections(Path path, Line line) {
    List<Point> intersections = new ArrayList<Point>();
    PathIterator it = path.getPathIterator();
    double[] coords = new double[6];
    double[] pos = new double[2];
    while (!it.isDone()) {
        int type = it.currentSegment(coords);
        switch (type) {
        case PathIterator.SEG_MOVETO:
            pos[0] = coords[0];
            pos[1] = coords[1];
            break;
        case PathIterator.SEG_LINETO:
            Line l = new Line(pos[0], pos[1], coords[0], coords[1]);
            pos[0] = coords[0];
            pos[1] = coords[1];
            Point intersection = getIntersection(line, l);
            if (intersection != null)
                intersections.add(intersection);
            break;
        //...
        default:
            throw new IllegalStateException("unknown PathIterator segment type: " + type);
        }
        it.next();
    }
    return intersections.toArray(new Point[] {});
} 
```

## 线/线交叉点

线/线交点可以直接计算，例如，使用向量代数：

*   2d 点/线由 3d 向量 (x, y, w) 表示
*   点 (x, y) 由 (x, y, 1) 表示
*   通过点 p1 和 p2 的线由 p1 x p2 （叉积）给出
*   对于两条线 l1 = (a, b, c) 和 l2 = (d, e, f)，交点由 l1 x l2 （叉积）给出
*   要将交点投影到 2d 中，您必须将 x 和 y 坐标除以 w
*   如果 w = 0 则不存在单点交点

## 线/贝塞尔交叉口

路径可以包含二次和三次贝塞尔曲线。要查找直线和贝塞尔曲线之间的交点，可以使用多种算法，例如：

*   de Casteljau 分区
*   贝塞尔剪裁
*   牛顿法
*   多项式求根

De Casteljau 细分很容易实现，但在相对罕见的情况下会出现一些问题。如果您不想使用可以为您计算交点的数学库，我建议实施 de Casteljau 细分。

编辑：另一种选择是通过一些线段来近似路径的贝塞尔曲线段。然后你只需要找到线/线交叉点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:44:30.630

遍历定义形状的点列表。将 (x,y) 放在直线的方程中，看看它是否“求解”。伪代码 -

```
int threshold = 0.01
for point in points: 
  if (point.y - m * point.x + c)^2 < threshold : 
    print "solution found" 
```

# php - 如何在 PHP 中获取特定的子字符串

> ID：15545499
> 
> 赞同：1
> 
> 时间：2013-03-21T10:54:39.813
> 
> 标签：php, string, design-patterns, explode

我在 PHP 中有一些这样的字符串：

```
26301 - DEP : df 30 01 codename, CODE : cdef 
```

大写部分是常量，而其他部分是变量。

所以模式将是：

```
xxxxxx - DEP : yy zz kk wwwwwwww, CODE : ffff 
```

可变部分的长度可能不同，因此常量将只有：DEP，符号“：”，符号“，”，CODE，以及符号“：”。

有没有办法使用“模式”在 PHP 中提取这些部分，或者我必须用空格分解 id，然后检查所有位置以搜索常量？有什么建议吗？

我想从第一个字符串中生成：

```
$dep = "df 30";
$codenumber = "01";
$code = "cdef"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:01:48.227

sscanf() 是要走的路：[http ://www.php.net/manual/en/function.sscanf.php](http://www.php.net/manual/en/function.sscanf.php)

在你的情况下，它可能是这样的：

```
$var = "26301 - DEP : df 30 01 codename, CODE : cdef";
list($first, $second, $third, $fourth, $fifth, $sixth) = sscanf($var, "%d - DEP : %s %d %d %s, CODE : %s"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:13:07.240

使用正则表达式：

```
$str = '26301 - DEP : df 30 01 codename, CODE : cdef';
preg_match('/(.+) - DEP : (.+) (\d+) codename, CODE : (.+)/', $str, $array);
list($str, $line, $dep, $codenumber, $code) = $array;
echo "line: $line, dep: $dep, codenumber: $codenumber, code: $code";
// Result: line: 26301, dep: df 30, codenumber: 01, code: cdef 
```

# iphone - UITextField 编辑不正确

> ID：15545500
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:54:41.220
> 
> 标签：iphone, ipad, uitextfield

我有 3 `UITextField`s，它是动态给出的，如下所示：

```
if(a isEqualtoString:@"1")
{

UITextField *t=[[UITextField alloc]initWithFrame:CGRectMake(20,20,20,20)];
t.text=s;
t.delegale=self;
[scroll addSubview:t];

}
if(a isEqualtoString:@"2")
{
UITextField *t=[[UITextField alloc]initWithFrame:CGRectMake(20,20,20,20)];
t.text=p;
t.delegale=self;
[scroll addSubview:t];

}
if(a isEqualtoString:@"3")
{
UITextField *t=[[UITextField alloc]initWithFrame:CGRectMake(20,20,20,20)];
t.text=r;
t.delegale=self;
[scroll addSubview:t];

} 
```

我的问题出在`didBeginEditing`我写的这些文本字段中`errT.hidden=YES;`

这是我的代码，但我无法编辑这些文本字段，我在 .h 中给出了委托

还。该怎么办？我尝试了许多对我没有帮助的解决方案。帮我

更新：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField{
    if(textField==t)
    {
    err.hidden=YES;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:43:19.970

```
UITextField *t=[[[UITextField alloc]initWithFrame:CGRectMake(20,20,20,20)]autorelease];
t.delegale=self;
[scroll addSubview:t];

if(a isEqualtoString:@"1")
{
   t.text=s;
}
if(a isEqualtoString:@"2")
{
   t.text=p;
}
if(a isEqualtoString:@"3")
{
   t.text=r;
} 
```

//文本字段的代表

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
   if ([textField canResignFirstResponder])
   {
       [textField resignFirstResponder];
   }
    return YES;
}
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
    // add your method here
    return YES;
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:33:58.527

我不明白你的问题是否`textFieldDidBeginEditing`没有被调用。

如果是，请尝试这样做：如果“t”它是在 .m 文件上创建的，则必须使用标签跟踪它

```
t.tag = 1001;

-(void)textFieldDidBeginEditing:(UITextField *)textField{
    if(textField.tag == 1001) {
        err.hidden=YES;
    }
} 
```

**更新：** 尝试设置所有属性并更改文本字段的名称（有时有效）：

```
UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(20,20,20,20)];
textField.borderStyle = UITextBorderStyleRoundedRect;
textField.font = [UIFont systemFontOfSize:15];
textField.placeholder = @"enter text";
textField.autocorrectionType = UITextAutocorrectionTypeNo;
textField.keyboardType = UIKeyboardTypeDefault;
textField.returnKeyType = UIReturnKeyDone;
textField.clearButtonMode = UITextFieldViewModeWhileEditing;
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;    
textField.delegate = self;
[self.scroll addSubview:textField]; 
```

您是否尝试将文本字段放在视图上？`[self.view addSubview:textField];`它有效吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:01:25.467

尝试这个 ：：

```
if(a isEqualtoString:@"1")
{
    ....
    t.text = @"s";
    ....
}
if(a isEqualtoString:@"2")
{
    ....
    t.text = @"p";
    ....
}
if(a isEqualtoString:@"3")
{
    ....
    t.text = @"r";
    ....
} 
```

希望，它会帮助你。

# php - PHP 和谷歌地图

> ID：15545501
> 
> 赞同：0
> 
> 时间：2013-03-21T10:54:43.017
> 
> 标签：php

在我过滤了一个 xml 文件后，在尝试在地图上获取谷歌地图的绘图标记进行了大量试验和错误之后，我发现它可以工作。我遇到的问题是我需要更改地图 HTML 中的 URL 以显示我最初在 XML 文件中过滤的特定数字

这是我的搜索字符串

```
<form action="control_lbsresult.php" method="GET">
    <input type="text" name="query" />
    <input type="submit" value="Search" />
</form> 
```

它给了我过滤器，过滤器 URL 就是这样

```
/control_lbsresult.php?query=0716747329 
```

这是过滤 XML 文件的代码片段

```
// Select all the rows in the markers table
$msisdn = $_GET['msisdn'];
$query = "SELECT * FROM lbs_ WHERE msisdn='$msisdn' LIMIT 10";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Start XML file, echo parent node
echo '<lbs_>'; 
```

在地图 html 中，我一切正常，但根据底部代码的文件扩展名需要帮助

```
downloadUrl("phpsqlajax_genxml3.php?msisdn=0716747329", function(data) 
```

如果我在编码中保存数字 0716747329，它就可以工作。我需要的是在 msisdn=( *** *) 位之后插入数字的查找，但从搜索屏幕我们输入我输入的数字。

```
downloadUrl("phpsqlajax_genxml3.php?msisdn='$msisdn'", function(data) 
```

如何在此处插入 $msisdn 我使用了 $_GET 还是 $_POST 以及如何通知此页面查看搜索输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:29:09.947

我不确定你的意思，但它可以简单地是：

```
downloadUrl("phpsqlajax_genxml3.php?msisdn=" . $_GET['msisdn'], function(data) 
```

请注意，这是不安全的，您应该在使用之前清理 SQL 查询中的 $_GET['msisdn']。确保它是一个数字。

另外，请使用 PDO 库而不是 mysql_* 进行数据库查询。

# javascript - 流浪，一个身体..并且无法恢复

> ID：15545502
> 
> 赞同：0
> 
> 时间：2013-03-21T10:54:43.783
> 
> 标签：javascript, html, w3c, recover

我从 W3C 得到这些错误

**第 41 行，第 143 列：杂散的结束标签正文。**

…t1_02.gif','images/Part1_03.gif','images/Part1_04.gif','images/Part1_05.png')"> ✉ **第 41 行，第 143 列：可见正文开始标签，但元素相同类型已经打开。**

…t1_02.gif','images/Part1_03.gif','images/Part1_04.gif','images/Part1_05.png')"> ✉ **第 41 行，第 143 列：在最后一个错误后无法恢复。任何进一步的错误将是忽略。**

…t1_02.gif','images/Part1_03.gif','images/Part1_04.gif','images/Part1_05.png')">

我该如何解决这个问题，我的代码是：

[http://pastebin.com/g11fz1qP](http://pastebin.com/g11fz1qP)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:01:49.117

我已经检查了你的代码，这个错误是由于标签的关闭而发生的。您没有`img`正确关闭标签。

有效标签是：

```
<img src="link_to_image" alt=""/> 
```

使用反斜杠结束`img`标签。

# rdf - 在线新闻网站的 RDF 数据

> ID：15545509
> 
> 赞同：0
> 
> 时间：2013-03-21T10:55:03.330
> 
> 标签：rdf, semantics

我想获取不同语言的主要新闻网站列表。是否有任何提供商以 RDF 格式提供大部分主要网站详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T17:20:12.847

DBpedia 包含来自 Wikipedia 的信息，并具有 SPARQL 端点。维基百科中有一些相关类别可以帮助您找到您正在寻找的信息。例如，我们可以选择单个新闻站点并获得 302 个结果：

```
SELECT * WHERE { 
  ?newsSite dcterms:subject category:News_websites .
} 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=SELECT+%2a+WHERE+%7B+%0D%0A++%3FnewsSite+dcterms%3Asubject+category%3ANews_websites+.%0D%0A%7D+&format=text%2Fhtml&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on)

可靠地获取其他信息有点困难，因为某些信息可能不适用于页面，或者相同的信息可能存在于具有不同属性的不同页面上。例如，其中一些页面记录了他们的新闻站点`dbpprop:web`

```
SELECT * WHERE { 
  ?newsSite dcterms:subject category:News_websites .
  OPTIONAL { ?newsSite dbpprop:web ?web }
} 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=++++SELECT+%2a+WHERE+%7B+%0D%0A++++++%3FnewsSite+dcterms%3Asubject+category%3ANews_websites+.%0D%0A++++++OPTIONAL+%7B+%3FnewsSite+dbpprop%3Aweb+%3Fweb+%7D%0D%0A++++%7D+&format=text%2Fhtml&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on)

其他人使用`dbpprop:website`. 您可以`dbpprop:web`将前面的查询替换为`dbpprop:web|dbpprop:website`，尽管这在 DBpedia 端点上运行速度有些慢。您可以更详细地使用它来代替：

```
SELECT ?newsSite ?web WHERE { 
  ?newsSite dcterms:subject category:News_websites .
  OPTIONAL { 
    { ?newsSite dbpprop:web ?web }
    UNION
    { ?newsSite dbpprop:website ?web }

  }
} 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=++++SELECT+%3FnewsSite+%3Fweb+WHERE+%7B+%0D%0A++++++%3FnewsSite+dcterms%3Asubject+category%3ANews_websites+.%0D%0A++++++OPTIONAL+%7B+%0D%0A++++++++%7B+%3FnewsSite+dbpprop%3Aweb+%3Fweb+%7D%0D%0A++++++++UNION%0D%0A++++++++%7B+%3FnewsSite+dbpprop%3Awebsite+%3Fweb+%7D%0D%0A++++++%7D%0D%0A++++%7D+&format=text%2Fhtml&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on)

这仍然只能获取其中少数页面的网站。一些更多的用途`dbpprop:url`，所以我们有以下内容：

```
SELECT ?newsSite ?web WHERE { 
  ?newsSite dcterms:subject category:News_websites .
  OPTIONAL { 
    { ?newsSite dbpprop:web ?web }
    UNION
    { ?newsSite dbpprop:website ?web }
    UNION 
    { ?newsSite dbpprop:url ?web }
  }
} 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=++++SELECT+%3FnewsSite+%3Fweb+WHERE+%7B+%0D%0A++++++%3FnewsSite+dcterms%3Asubject+category%3ANews_websites+.%0D%0A++++++OPTIONAL+%7B+%0D%0A++++++++%7B+%3FnewsSite+dbpprop%3Aweb+%3Fweb+%7D%0D%0A++++++++UNION%0D%0A++++++++%7B+%3FnewsSite+dbpprop%3Awebsite+%3Fweb+%7D%0D%0A++++++++UNION+%0D%0A++++++++%7B+%3FnewsSite+dbpprop%3Aurl+%3Fweb+%7D%0D%0A++++++%7D%0D%0A++++%7D+&format=text%2Fhtml&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on)

# jsf - primefaces文件上传未显示

> ID：15545511
> 
> 赞同：2
> 
> 时间：2013-03-21T10:55:08.690
> 
> 标签：jsf, primefaces

在我的 web.xml 上

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

在我的 xhtml 上

```
<h:form enctype="multipart/form-data">  

    <p:fileUpload fileUploadListener="#{testController.handleFileUpload}"  
                  mode="advanced"   
                  update="messages"  
                  sizeLimit="100000"   
                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>  

    <p:growl id="messages" showDetail="true"/>  

</h:form> 
```

已经导入了 commons-fileupload 和 commons-io 库。

使用 JSF 2.0 和 Primefaces 3.5

我的问题是，上传布局没有显示，没有选择按钮，上传也没有取消。

代码参考在这里： http: [//www.primefaces.org/showcase/ui/file/upload/single.xhtml](http://www.primefaces.org/showcase/ui/file/upload/single.xhtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:27:54.033

您使用的是 MyFaces 还是 Mojarra？Primefaces 团队开发的想法只是为了在 Mojarra 上工作，例如，他们的 Ajax 实现不适用于 Composite:clientbehavior。

试试莫哈拉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:29:10.160

也许您页面的其余部分有问题。

你有*h:head*代替*head*和*h:body*代替*body*吗？如果你不这样做可能会导致你的组件不能正确渲染。

我会将此作为评论，但我还没有足够的积分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T23:53:47.317

我有同样的问题。我花了几天时间，最后我意识到我的库中有 RICHFACES 和 PRIMEFACES 所以我决定删除 RICHFACES 并且组件开始正确渲染！看看这个...

# java - 将字符串转换为带括号的数组

> ID：15545515
> 
> 赞同：0
> 
> 时间：2013-03-21T10:55:18.697
> 
> 标签：java, arrays, string

我有以下字符串

```
[http://images.com/1.jpg, http://images.com/2.jpg, http://images.com/3.jpg] 
```

我想将此数组的内容存储在字符串数组或字符串类型的数组列表中。

我尝试使用 .split 方法，但它失败主要是因为字符串还包含开头的括号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:05:45.603

```
String[] splittedString = theString.substring(1, theString.length()-1).split(", ") 
```

注意 split 方法中逗号后的空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:57:41.520

使用 substring 从括号中排除字符串：

```
mystring = mystring.substring(1,mystring.length()-1); 
```

然后分裂：

```
String[] myarray = mystring.split(", "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:05:36.700

```
String arry[] = yourstr.replace("[", "").replace("]", "").split(","); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:57:27.907

在使用 split() 方法之前，转义包含括号的字符串的第一个和最后一个字符，如下所示：

```
yourString= yourString.substring(1, yourString.length()-1));
// do your split() method 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-21T11:06:01.910

您可以选择使用`StringTokenizer`.

# c - 如何创建“C 单行注释”宏

> ID：15545520
> 
> 赞同：10
> 
> 时间：2013-03-21T10:55:29.010
> 
> 标签：c, gcc, macros, c-preprocessor

我正在尝试在**C**中创建一个“单行注释”宏，根据一些全局宏定义，它有条件地用于注释掉代码行。[这与本文](http://www.drdobbs.com/cc-tip-5-a-cc-comment-macro/184401344)所表达的想法相同。

尝试了此代码的许多排列，我不断收到来自编译器的错误消息。

例如，直接遵循该页面中的代码示例：

```
#define COMMENT SLASH(/)
#define SLASH(s) /##s
#define DEBUG_ONLY COMMENT
DEBUG_ONLY a = b;   // <-- line #83 
```

GCC 给出以下错误：

> prog.c:83:1：错误：粘贴“/”和“/”没有给出有效的预处理标记
> prog.c:83：错误：“/”标记之前的预期表达式

如前所述，我使用该主题并尝试了许多变体，但都未能给出类似的诊断。

我做错了什么，为什么文章中的代码编译不好？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-21T11:07:57.693

它不起作用，因为语言规范不允许这样做。实际上，注释删除发生*在*宏替换之前。删除评论后，`//`它就不是有效的令牌（如错误消息所述）。不能通过宏替换生成，不再是“注释”的意思。

这是标准中的“翻译阶段”。部分编号不同，但所有 C89、C99 和 C11 都在阶段 3 中定义：

> 每个注释被一个空格字符替换。

然后在第 4 阶段：

> 宏调用被扩展

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T11:00:38.720

调试宏：

```
#define DEBUG(x) x 
```

可以在生产中关闭，如下所示：

```
#define DEBUG(x) 
```

或 IIRC `#undef`（对不起，我的 C 生锈了）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-21T10:58:04.797

为什么不简单地使用例如

```
#ifdef DEBUG
a = b;
#endif  /* DEBUG */ 
```

更少的麻烦，同样可读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-09T11:57:14.097

我用于`#define cout(x) //cout<<x;`我的应用程序。你可能想像这样修改它

```
#ifdef DEBUG
#define cout(x) cout<<x;
#else
#define cout(x) 
```

并将其用作

```
cout(arg0<<arg1<<arg2); 
```

在这里，您不会评论该行，因此不需要单独的行来避免打印。此外，您可以在必须无条件进行打印的任何地方使用 cout。

```
cout("Print this when debugging");
cout<<"Always print this"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-24T03:04:44.967

使用宏，您*本身*`#define`不能注释掉整行，但可以注释掉直到下一个分号的所有内容。我发现这种方法效果很好。

 *```
#define LOG_LVL 111100011
//              987654321
#if(LOG_LVL%10   >= 1  )
    #define LOG1 if(1)
#else
    #define LOG1 if(0)
#endif//End LOG1 if-block

#if(LOG_LVL%1000 >= 100)
    #define LOG3 if(1)
#else
    #define LOG3 if(0)
#endif//End LOG3 if-block 
```

只要您小心使用分号，这应该可以正常工作。默认情况下，非括号`if`语句将仅执行以下行。

像这样进行日志记录的另一个好处是您可以微调您想要的日志记录级别。在此示例`LOG1`中启用和`LOG3`禁用。如果我希望我的日志记录更详细，我可以快速更改`LOG_LVL 111100011`为**3**`1`位数（或更高），以便启用。**`LOG3`***

# javascript - 如何创建一个包含多个 .click() 函数的 jQuery 函数？

> ID：15545523
> 
> 赞同：1
> 
> 时间：2013-03-21T10:55:35.957
> 
> 标签：javascript, jquery, html, css

我正在尝试创建的此功能如何或有什么好的方法？

my_script.js

```
$(document).ready(function() {

     $("#home").click(function() {
         $('.banner').animate({top:'370px', height:'250px', }, 1000)
         return false    
     })

     $("#about").click(function() {
         $('.banner').animate({top:'20px', height:'145px', }, 1000)
         return false
     })

     $("#games").click(function() {
         $('.banner').animate({top:'20px', height:'145px', }, 1000)
         return false
     })

     $("#district").click(function() {
         $('.banner').animate({top:'20px', height:'145px', }, 1000)
         return false
     })

     $("#contact").click(function() {
         $('.banner').animate({top:'20px', height:'145px', }, 1000)
         return false
     })

}) 
```

如果单击 ["about","contact","district", "games", "membership"] 中的 id，我想制作一些动画。但是如果 id = "home"，我想动画（或者如果已经在该页面上，则不要动画）它回来。

显然，我发布的这段代码不起作用。但是你们会建议什么样的方法呢？我应该把横幅的 id 放在我的页面顶部以数组的形式动画并循环遍历它吗？（看起来如何）或者我应该像现在一样创建许多不同的函数，每个 id 一个？

/W

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:57:00.290

分配一个公用`class`而不是使用`ids`除了 home，因为除了 home 之外的所有项目都有相同的代码。

```
$("#home").click(function() {
    $('.banner').animate({top:'370px', height:'250px', }, 1000)
     return false;    
});

$(".commonclassexcepthome").click(function() {
     $('.banner').animate({top:'370px', height:'250px', }, 1000)
     return false;    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:01:04.710

你可以这样尝试

```
$("#home").click(function() {
     $('.banner').animate({top:'370px', height:'250px', }, 1000)
     return false;    
 });

 $("#about,#contact,#games,#district").click(function() {
     $('.banner').animate({top:'20px', height:'145px', }, 1000)
     return false;
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:02:30.473

只需创建一个带参数的函数，因此当您单击时调用该函数并为该位置提供参数并简化它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:16:25.087

您在[这里](http://jsfiddle.net/TrVrN/)看到的是编写上述代码的更好方法。`.banner`您说如果您已经在该页面上（或者这仅适用于主页？）您不想制作动画，因此如果单击的项目有，该函数将返回 false`class="active"`

注意：我没有测试代码，因为我没有其余的代码。

# java - LWJGL 纹理立方体

> ID：15545524
> 
> 赞同：0
> 
> 时间：2013-03-21T10:55:38.607
> 
> 标签：java, textures, lwjgl, cube

我目前正在用 VBO 和颜色渲染一个立方体。我想在它们上面添加一些纹理，但我对此一无所知。仍在学习 OGL，但如何渲染带有纹理的立方体？我需要另一个用于纹理的 VBO？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:04:25.983

是的，你需要另一个 FloatBuffer，更不用说纹理了。将纹理映射到对象上时，需要使用纹理坐标（[opengl 纹理坐标如何工作？](https://stackoverflow.com/questions/5532595/how-do-opengl-texture-coordinates-work)）。用于`glTexCoordPointer()`将纹理映射到立方体上。您可以使用 LWJGL 附带的 slick 库加载纹理。

# c# - 使文本字段只读

> ID：15545525
> 
> 赞同：0
> 
> 时间：2013-03-21T10:55:40.443
> 
> 标签：c#, html, asp.net-mvc, razor

我正在使用下面的代码将文本条目设为只读，但这不会变成只读任何想法为什么会这样

```
@Html.EditorFor(model => model.UserName, new { Readonly = "Readonly"}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:57:39.410

为什么继续使用

```
@Html.EditorFor(model => model.UserName, new { @readonly = true}); 
```

或者你可以使用喜欢

```
@Html.EditorFor(model => model.UserName, new { @readonly = "readonly"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:57:02.807

尝试文本框

```
@Html.TextBoxFor(model => model.UserName, new { @readonly = true}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:35:26.567

HtmlHelper`EditorFor`没有采用 HTML 属性的重载。

而不是`EditorFor`一起去`TextBoxFor`

`@Html.TextBoxFor(model => model.UserName, new { disabled = "disabled", @readonly = "readonly"})`

希望能帮助到你

# sql - 视图的行号，其中数字不受 where 子句影响

> ID：15545526
> 
> 赞同：1
> 
> 时间：2013-03-21T10:55:43.960
> 
> 标签：sql, sql-server, view

SQL Server 2008

我有一个包含许多行的视图，其中也可以多次获得确切的行。我已经尝试将 ROW_NUMBER() OVER ( ORDER BY col1 ) 作为 row_id 但遇到了问题：

当使用 JOIN 或 WHERE 子句时，row_ids 会动态调整到新的结果集。相反，我需要的是 row_id 来表示在视图中为该行提供的 row_id 值，而没有任何 JOIN 或 WHERE 子句。

有任何想法吗？

编辑：我添加了一个示例，应该在发布之前完成。

没有 WHERE 子句：

> SELECT ROW_NUMBER() OVER ( ORDER BY col1 ) 作为 row_id, result.*
> FROM
> (
> 
> > SELECT 'Adam' col1, 'West' col2
> > UNION ALL
> > SELECT 'Adam' col1, 'Cole' col2
> > UNION ALL
> > SELECT 'Adam' col1, 'West' col2
> > UNION ALL
> > SELECT 'Danny' col1, 'West' col2
> 
> ） 结果

结果：

```
row_id  col1    col2
1       Adam    Cole
2       Adam    West
3       Adam    West
4       Danny   West 
```

现在当我使用 WHERE 子句时

> SELECT ROW_NUMBER() OVER ( ORDER BY col1 ) 作为 row_id, result.*
> FROM
> (
> 
> > SELECT 'Adam' col1, 'West' col2
> > UNION ALL
> > SELECT 'Adam' col1, 'Cole' col2
> > UNION ALL
> > SELECT 'Adam' col1, 'West' col2
> > UNION ALL
> > SELECT 'Danny' col1, 'West' col2
> 
> ) 结果
> WHERE col2='West'

结果：

```
row_id  col1    col2
1       Adam    West
2       Adam    West
3       Danny   West 
```

期望的结果：

```
row_id  col1    col2
2       Adam    West
3       Adam    West
4       Danny   West 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:04:29.620

您可以在子查询中生成行号。这些不受外部查询中的`join`or子句的影响：`where`

```
select  *
from    (
        select  row_number() over order by col1) as rn
        ,       *
        from    YourTable
        ) as YourTableWithRowNumber
join    OtherTable
on      YourTableWithRowNumber.id = OtherTable.YourTableId
where   YourTableWithRowNumber.col1 not like '%excludeme%' 
```

# c++ - glDeleteBuffers 在析构函数调用期间崩溃

> ID：15545528
> 
> 赞同：1
> 
> 时间：2013-03-21T10:55:47.783
> 
> 标签：c++, opengl-es, textures, blackberry-10, vbo

嗨，我正在使用 VBO 加载图像纹理，然后用 C++ 绘制它。VBO id 生成、绑定和绘制发生在这里

```
void ViewManager::render(){

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glEnable(GL_TEXTURE_2D);
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
if(decompressTileImage->tileTexure == 0)
    {
        loadTexture(decompressTileImage);
        glGenBuffers(1,&decompressTileImage->VBOId);
        glBindBuffer(GL_ARRAY_BUFFER,decompressTileImage->VBOId);
        glBufferData(GL_ARRAY_BUFFER,sizeof(*(this->tileCoordList))+sizeof(*(this->tileTextureCoordList)),0,GL_STATIC_DRAW);
        glBufferSubData(GL_ARRAY_BUFFER,0,sizeof(*(this->tileCoordList)),this->tileCoordList);
        glBufferSubData(GL_ARRAY_BUFFER,sizeof(*(this->tileCoordList)),sizeof(*(this->tileTextureCoordList)),this->tileTextureCoordList);

    }
    else
    {
        glBindBuffer(GL_ARRAY_BUFFER,decompressTileImage->VBOId);
        glBindTexture(GL_TEXTURE_2D, decompressTileImage->tileTexure);
    }

    glColor4f(1.0f, 1.0f, 1.0f, textureAlpha);

    if(textureAlpha < 1.0)
    {
        textureAlpha = textureAlpha + .03;
        this->tiledMapView->renderNow();
    }

glTexCoordPointer(3, GL_FLOAT, 0, (void*)sizeof(*(this->tileCoordList)));
glVertexPointer(3, GL_FLOAT, 0, 0);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
glBindBuffer(GL_ARRAY_BUFFER,0);
glDisable(GL_BLEND);
glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glDisable(GL_TEXTURE_2D);
} 
```

这个函数在一个名为`MapTile`. `MapTile`从 Internet 下载的 35 张图像创建了 35 次。`MapTile`然后一个线程为 35 个对象调用此方法 35 次并继续执行此操作。这就是为什么我首先检查是否是第一次调用该方法，以便我可以为每个`MapTile`对象加载数据并只生成一次 VBO id。我用`if(decompressTileImage->tileTexure == 0)`这条线检查这个。然后每次我只绑定 vbo id 来绘制。无需再次加载数据。

这里`decompressTileImage`有一`TextureImageInfo`堂课。实现是

```
#include "TextureImageInfo.h"
TextureImageInfo::TextureImageInfo(unsigned char * image,GLuint format,int texWidth,int texHeight,int imageWidth,int imageHeight,float tex_x,float tex_y)
{
// TODO Auto-generated constructor stub
this->format = format;
this->image = image;
this->imageHeight = imageHeight;
this->imageWidth = imageWidth;
this->texHeight = texHeight;
this->texWidth = texWidth;
this->tileTexure = 0;
this->VBOId = 0;
this->time = 0;

}

TextureImageInfo::~TextureImageInfo()
{
if(VBOId!=0)
    glDeleteBuffers(1,&VBOId);
} 
```

当我尝试清理`TextureImageInfo`此处给出的类的析构函数中的内存时，它可以绘制并执行所有操作但会崩溃。我不明白为什么。我检查了 VBOId 是否生成并在析构函数中的 if 条件下加载到内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:32:52.027

如评论中所述，OpendGL ES 命令应从创建上下文的同一线程提交。

来自 Blackberry docs [Parallel processing with OpenGL ES](http://developer.blackberry.com/native/documentation/bb10/parallel_processing_with_opengles.html)：

> 需要注意的是，每个 OpenGL ES 渲染上下文都针对单个执行线程。
> 
> 如果要渲染多个场景，可以将每个场景分离到自己的线程中，确保每个线程都有自己的上下文

# c# - MVC3 选中的复选框计数

> ID：15545531
> 
> 赞同：0
> 
> 时间：2013-03-21T10:55:52.053
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-3

在我的视图中，我想在编辑器字段中查看选中复选框的计数！我怎样才能提出我的请求？

控制器：如何在控制器中转换它？//

```
 public ActionResult Create()
    {
        return View();
    } 

    //
    // POST: /Projects/Create

    [HttpPost]
    public ActionResult Create(PPM_Project project)
    {
        if (ModelState.IsValid)
        {
            db.Project.Add(project);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        ViewBag.Status = new SelectList(new string[] { "----------", "running", "on hold", "finished", "not started", "cancelled" });
        return View(project);
    } 
```

视图：视图中要改变什么？

```
 <div class="editor-label-AI">
        @Html.LabelFor(model => model.Anzahl_Betroffene_BU_Einheiten)
    </div>
    <div class="editor-field-AZB">
        @Html.EditorFor(model => model.Anzahl_Betroffene_BU_Einheiten)
        @Html.ValidationMessageFor(model => model.Anzahl_Betroffene_BU_Einheiten)
    </div> 
```

在那里我想查看选中复选框的计数！

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:44:19.657

如果我正确理解了您的问题：您需要一个文本框来根据选中的复选框数量进行更新...

如果您使用 MVC，则需要在 JavaScript 中执行此操作。我创建了一个示例来展示此功能，该功能可能很容易适应您的项目。

[jsFiddle](http://jsfiddle.net/Tyriar/8uvs8/)

![在此处输入图像描述](../Images/dc1439a987f4b8b0893df98266e3f76a.png)

**HTML**

```
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />

<div class="editor-field-AZB">
    <input id="count" value="0" />
</div>

<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" /> 
```

**JavaScript**

```
var countInput = document.getElementById('count');
var checkboxes = document.querySelectorAll('input[type="checkbox"]');
for (var i = 0; i < checkboxes.length; i++) {
    checkboxes[i].onchange = countCheckboxes;
}

function countCheckboxes() {
    var count = 0;
    for (var i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i].checked) 
            count++;
    }
    countInput.value = count;
}
countCheckboxes(); 
```

# android - phonegap 应用程序的文档查看器

> ID：15545533
> 
> 赞同：3
> 
> 时间：2013-03-21T10:56:03.930
> 
> 标签：android, ios, cordova, phonegap-plugins

有没有人在android中使用Childbrowsers或InAppBrowser插件用于pdf / anydoc查看器......如果它是如何工作的......我需要为我的phonegap应用程序开发一个文档查看器......请提出一些建议......谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:44:55.307

Andrdoid 没有附带默认的 PDF 查看器。因此，您可能需要使用谷歌文档阅读器打开您的文档并显示在您的 InAppBrowser 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:41:48.197

请查看提供的文档或告诉我们您的尝试

InAppBrowser 是自 2.3.0 版以来标准 phonegap 版本的内置插件。Childbrowser 作为非默认插件用于之前的版本。

文档在 phonegap 网站上

[http://docs.phonegap.com/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.5.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T08:54:06.727

对于遇到这个问题的每个人来说，我终于发现了：

HTML 5 对象标签：不工作

嵌入标签：不工作

childBrowser Plugin：我认为它会起作用，但它是为 2.0.0 版本设计的。所以你会得到很多错误，所以我没有让它工作。

Phonegap InAppViewer：如果你这样使用它：

```
window.open('http://www.example.com/test.pdf', '_blank', 'location=yes') 
```

它不会工作。InAppViewer 无法打开 PDF，不管 PDF 是外部存储还是本地存储。

到目前为止我的解决方案（不是实际的想法）：

您可以使用 _system 调用窗口函数。像那样：

```
window.open('http://www.example.com/test.pdf', '_system', 'location=yes') 
```

这将在普通浏览器中打开 PDF 并下载。下载后会询问是否应该使用 PDF 查看器打开它。但是你必须回到你的应用程序并在那之后再次打开它。

另一种可能性是您只需使用 Phonegap Filesystem API 将其下载到您的 SD 卡，如下所示：

```
var fileTransfer = new FileTransfer();
fileTransfer.download(
"http://developer.android.com/assets/images/home/ics-android.png",
"file://sdcard/ics-android.png",
function(entry) {
    alert("download complete: " + entry.fullPath);
},
function(error) {
    alert("download error source " + error.source);
    alert("download error target " + error.target);
    alert("upload error code" + error.code);
}); 
```

我发现的最后一件事是，使用谷歌文档/驱动器通过链接到谷歌文档的 InAppViewer 打开它，如下所示：

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {

window.open('https://docs.google.com/viewer?url=http://www.example.com/test.pdf&embedded=true', '_blank', 'location=yes'); 
ref = window.open('index.html', '_self');
 } 
```

这将在应用程序中打开 PDF，在谷歌文档上查看它。您可以在此处生成您的永久链接：[https](https://docs.google.com/viewer) ://docs.google.com/viewer因此，即使您更改了 pdf 文件，它仍然可以使用

我希望这个总结能帮助你节省时间。如果有其他解决方案让我知道

# ios - 如何将 AUGraph 的输出写入 WAV 或 AIF 格式的外部音频文件？

> ID：15545538
> 
> 赞同：0
> 
> 时间：2013-03-21T10:56:09.973
> 
> 标签：ios, objective-c, core-audio, midi, audiounit

在我的 iOS 应用程序中，我正在使用音乐播放器和音乐序列播放 MIDI 文件。我通过调用音乐序列的“MusicSequenceGetAUGraph”方法来获取 AUGraph。现在我想将此 AUGraph 的相同输出保存到外部文件。我怎样才能做到这一点？谁能帮我？

这里我没有使用任何节点来创建 AUGraph。我直接从音乐序列中获取图表。

提前致谢。

这是我的 AUGraph

AudioUnitGraph 0x246104F：

会员节点：

```
node 1: 'aumu' 'samp' 'appl', instance 0x1c558830 O I
node 2: 'auou' 'rioc' 'appl', instance 0x1c54a550 O I 
```

连接：

```
node   1 bus   0 => node   2 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved] 
```

当前状态：mLastUpdateError=0，eventsToProcess=F，isRunning=T (1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:48:40.700

[这里](https://github.com/aranm/iPhone-ExtAudioFile-Record)有一个将 AUGraph 的输出写入文件的示例

# sockets - uwsgi 长超时

> ID：15545539
> 
> 赞同：1
> 
> 时间：2013-03-21T10:56:14.567
> 
> 标签：sockets, timeout, uwsgi

我正在使用带有套接字的 ubuntu 12、nginx、uwsgi 1.9、django 1.5。

配置：

```
[uwsgi]
base_path = /home/someuser/web/
module = server.manage_uwsgi
uid = www-data
gid = www-data
virtualenv = /home/someuser
master = true
vacuum = true
harakiri = 20
harakiri-verbose = true
log-x-forwarded-for = true
profiler = true
no-orphans = true
max-requests = 10000
cpu-affinity = 1
workers = 4
reload-on-as = 512
listen = 3000 
```

来自 Windows7 的客户端测试：

```
C:\Users\user>C:\AppServ\Apache2.2\bin\ab.exe -c 255 -n 5000 http://www.someweb.com/about/
This is ApacheBench, Version 2.0.40-dev <$Revision: 1.146 $> apache-2.0
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Copyright 2006 The Apache Software Foundation, http://www.apache.org/

Benchmarking www.someweb.com (be patient)
Completed 500 requests
Completed 1000 requests
Completed 1500 requests
Completed 2000 requests
Completed 2500 requests
Completed 3000 requests
Completed 3500 requests
Completed 4000 requests
Completed 4500 requests
Finished 5000 requests

Server Software:        nginx
Server Hostname:        www.someweb.com
Server Port:            80

Document Path:          /about/
Document Length:        1881 bytes

Concurrency Level:      255
Time taken for tests:   66.669814 seconds
Complete requests:      5000
Failed requests:        1
   (Connect: 1, Length: 0, Exceptions: 0)
Write errors:           0
Total transferred:      10285000 bytes
HTML transferred:       9405000 bytes
Requests per second:    75.00 [#/sec] (mean)
Time per request:       3400.161 [ms] (mean)
Time per request:       13.334 [ms] (mean, across all concurrent requests)
Transfer rate:          150.64 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    8 207.8      1    9007
Processing:    10 3380 11480.5    440   54421
Waiting:        6 1060 3396.5    271   48424
Total:         11 3389 11498.5    441   54423

Percentage of the requests served within a certain time (ms)
  50%    441
  66%    466
  75%    499
  80%    519
  90%   3415
  95%  36440
  98%  54407
  99%  54413
 100%  54423 (longest request) 
```

我也设置了以下选项：

```
echo 3000 > /proc/sys/net/core/netdev_max_backlog
echo 3000 > /proc/sys/net/core/somaxconn 
```

所以，

1）我非常快地发出前 3000 个请求。我在 ab 和 uwsgi 请求日志中看到了进展 -

```
[pid: 5056|app: 0|req: 518/4997] 80.114.157.139 () {30 vars in 378 bytes} [Thu Mar 21 12:37:31 2013] GET /about/ => generated 1881 bytes in 4 msecs (HTTP/1.0 200) 3 headers in 105 bytes (1 switches on core 0)
[pid: 5052|app: 0|req: 512/4998] 80.114.157.139 () {30 vars in 378 bytes} [Thu Mar 21 12:37:31 2013] GET /about/ => generated 1881 bytes in 4 msecs (HTTP/1.0 200) 3 headers in 105 bytes (1 switches on core 0)
[pid: 5054|app: 0|req: 353/4999] 80.114.157.139 () {30 vars in 378 bytes} [Thu Mar 21 12:37:31 2013] GET /about/ => generated 1881 bytes in 4 msecs (HTTP/1.0 200) 3 headers in 105 bytes (1 switches on core 0) 
```

我没有任何破损的管道或工人重生。

2) 下一个请求运行非常缓慢或超时。看起来一些缓冲区已满，我正在等待它变空。

3) 一些缓冲区变空。

4) 约 500 个请求的处理速度非常快。

5）一些超时。

6）见编号。4

7）见编号。5

8）见编号。4

9）见编号。5

……

……

需要你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:57:55.770

检查 netstat 和 dmesg。您可能已经用尽了临时端口或填满了 conntrack 表。

# javascript - 将 div 的当前内容替换为另一个页面响应

> ID：15545542
> 
> 赞同：0
> 
> 时间：2013-03-21T10:56:26.503
> 
> 标签：javascript, jquery, ajax, html

示例代码：

```
<html>
    <head>
        .....
    </head>
    <body>
        <div id="content">
            <form>
                ....
                <input type="submit" onclick="loadAnotherPage()"/>
            </form>
        </div>
    </body>
</html> 
```

我想在div 中加载另一个页面，比如**edit_profile.php**`content`。不刷新页面怎么实现？

我尝试使用 jQuery`load()`方法。但看起来我错过了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:58:41.660

当您单击`submit button`它的提交表单和页面刷新时，这就是它不起作用的原因。

**而不是输入提交设置按钮，然后设置功能`onclick`。**

```
function loadAnotherPage(){
    $("#content").load('edit_profile.php');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:18:55.123

尝试这个

```
<html>
 <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
 </head>
    <body>
     <div id="content"></div>
      <button id="loadpage">load new page</button>
<script>
 $(document).ready(function () {
    $("#loadpage").click(function() {
        $.get("edit_profile.php", function(response){
          $("#content").html(response);
        });
    })
 });
</script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:01:27.633

```
 $(document).ready(
            function() {
              $('#load_file').click(
            $.post('edit_profile.php',
             {},
             function(data){
                $("#content").html(data);
             },''
            )
               ); 
                }
                    ); 
```

# knockout.js - 自定义绑定 valueAccessor 有意外结果

> ID：15545547
> 
> 赞同：2
> 
> 时间：2013-03-21T10:56:53.010
> 
> 标签：knockout.js, ko-custom-binding

我对 knockout.js 的自定义绑定中的以下行为感到困惑：

```
ko.bindingHandlers.customBinding = {
    update: function(element, valueAccessor, allBindingsAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        console.log( JSON.stringify(value) );
    }
}

ko.applyBindings({
    someText: ko.observable("inital value")
}); 
```

和

```
<input type="text" data-bind="value: someText, customBinding: {some: 'option'}"> 
```

`valueAccessor()` *应该*给我绑定到元素值的视图模型属性（即 observable `someText`）。引用文档：

> `valueAccessor`— 一个 JavaScript 函数，您可以调用它来获取此绑定中涉及的当前模型属性。在不传递任何参数的情况下调用它（即 call `valueAccessor()`）以获取当前模型属性值。

然而，它*真正*做的是返回绑定值，即`{some: 'option'}`.

我错过了什么？

见[http://jsfiddle.net/j5y8H/](http://jsfiddle.net/j5y8H/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:06:22.943

您需要在自定义绑定调用中为您的 valueAccessor 传递所需的模型属性。在您的情况下，您需要模型属性 'someText' ：

```
<input type="text" data-bind="value: someText, customBinding: someText"> 
```

见[http://jsfiddle.net/j5y8H/1/](http://jsfiddle.net/j5y8H/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:31:20.460

您有点混淆了- *valueAccessor*参数可以访问**绑定**的值（就像您已经发现的那样）。

另一方面，“值”绑定只是另一个绑定，它甚至可能不存在于应用您的元素的元素上 - 或者根本无效（例如，在 div 上）。

如果您真的想访问绑定到*值*绑定的属性（并且很可能如果您这样做，您可能想重新考虑您的绑定处理程序），您可以通过*allBindingsAccessor*参数来实现，如下所示：

```
ko.utils.unwrapObservable(allBindingsAccessor().value); 
```

# powershell - powershell 将结果输出到文件

> ID：15545549
> 
> 赞同：0
> 
> 时间：2013-03-21T10:56:53.400
> 
> 标签：powershell, powershell-2.0

我正在尝试使用 Powershell V2.0 将 SQL 查询的内容写入文件。我可以成功使用 Write-Host CMDlet 写入控制台屏幕，但是当我更改为 Write-Output 时，test.txt 文件中只返回一个结果（而不是大约 700 个）。为什么会这样？

```
 foreach ($row in $DataSet.Tables[0].Rows){ 
    $name = $row[0].ToString().Trim()
    Write-Output $name >test.txt
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:07:22.403

您只得到一行（这是最后一个结果），因为`>`运算符覆盖了。`>>`附加。

但是获得相同结果的更有效方法（未经测试）是：

```
$DataSet.Tables[0].Rows|select-object -expandproperty NAMEOFFIRSTCOLUMN|out-file test.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:08:16.790

您在每条记录上使用 >（而不是 >>）重定向到输出文件。这会导致文件被每条记录重写，而您只剩下输出文件中的最后一条记录。

这应该会更好：

```
&{
  foreach ($row in $DataSet.Tables[0].Rows){ 
  $row[0].ToString().Trim()
  } }| set-content test.txt 
```

# php - Linux上使用php连接访问97

> ID：15545551
> 
> 赞同：1
> 
> 时间：2013-03-21T10:56:58.010
> 
> 标签：php, linux

你们聪明的人可能可以直接让我明白这一点，而无需我再浪费时间在互联网上拖网，所以这里......

我们公司仍然为一些遗留应用程序使用访问 97 mdb 文件，我希望能够使用在 Linux 机器上运行的 php/apache 连接和询问这些数据库。升级数据库不是一种选择，所以我必须以当前格式使用它们。

所以问题是，这是否可能，如果可以，我将如何去做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:17:04.203

代码下方的用户：

```
$dbName = $_SERVER["DOCUMENT_ROOT"] . "products\\products.mdb";
if (!file_exists($dbName)) {
    die("Could not find database file.");
}
$db = new PDO("odbc:DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=$dbName; Uid=; Pwd=;"); 
```

您应该在 PHP.INI 文件中启用 PDO 和 ODBC 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:01:46.253

谢谢人们。它给了我一个开胃菜。我将 mdbtools 与 unixODBC 一起使用。一旦信息在 odbc.ini 和 odbcinst.ini 文件中，我就可以使用以下方法链接到 mdb 文件： $conn=odbc_connect('dbname','',''); 我想我可能已经发现了 odbc_exec 的一个“错误”，但我会在别处发布。感谢您的帮助，我会尽快将其标记为已回答。

# wcf - 对象未从 wcf Web 服务返回

> ID：15545554
> 
> 赞同：0
> 
> 时间：2013-03-21T10:57:00.293
> 
> 标签：wcf

我在 wcf 中编写了一个返回对象的 Web 服务。但是当我从客户端代码调用它时，它不会返回任何对象。

我想返回的那个对象

```
[DataContract]
    public class OrderData
    {
        [DataMember]
        public List<ORDER_INFO> OrderInfoList { get; set; }
        [DataMember]
        public List<ORDER_PRODUCT_MAPPING> OrderProductMappingList { get; set; }
    }

My Service Interface 

[ServiceContract]
    public interface ISyncService
    {
        [OperationContract]
        OrderData InsertOrderData(decimal depotId);
    } 
```

接口实现类

```
public class SyncService : ISyncService
    {
        readonly InceptaDbContext _db = new InceptaDbContext();

        public OrderData InsertOrderData(decimal depotId)
        {
            var orderData = new OrderData
            {
                OrderInfoList = new List<ORDER_INFO>(),
                OrderProductMappingList = new List<ORDER_PRODUCT_MAPPING>()
            };

            var orderList = _db.ORDER_INFO
                .Where(m => m.D_ID.Equals(depotId)&& m.STATUS.Equals("1"));
                            //.Where(m => m.STATUS.Equals("1"));
            foreach (var orderInfo in orderList)
            {
                orderData.OrderInfoList.Add(orderInfo);
                orderData.OrderProductMappingList.AddRange(
                    _db.ORDER_PRODUCT_MAPPING.Where(m => m.ORDER_ID.Equals
                                                             (orderInfo.ORDER_ID)));
            }

            foreach (var orderInfo in orderList)
            {
                orderInfo.STATUS = "2";
                _db.Entry(orderInfo).State = EntityState.Modified;
            }
            _db.SaveChanges();

                return orderData;

        }
    } 
```

我的服务器网络配置

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
        <directoryBrowse enabled="true" />
  </system.webServer>
  <connectionStrings>
    <add name="InceptaDbContext" 
         connectionString="metadata=res://*/DbContext.Model1.csdl|res://*/DbContext.Model1.ssdl|res://*/DbContext.Model1.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=localhost/InceptaMSFA;PASSWORD=bs23;PERSIST SECURITY INFO=True;USER ID=BS&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

我的客户端应用程序是 C# 主程序中的控制台应用程序

```
class Program
    {
        static void Main(string[] args)
        {
            var client = new SyncServiceClient();
            var db = new InceptaDbContext();

            var order = client.InsertOrderData(1.0m);

            foreach (var s in order.OrderInfoList)
            {
                db.ORDER_INFO.Add(new ConsumeDataSyncService.DbContext.ORDER_INFO
                                      {
                                          ORDER_ID = s.ORDER_ID,
                                          CH_ID = s.CH_ID,
                                          D_ID = s.D_ID,
                                          EMP_ID = s.EMP_ID,
                                          ORDER_DATE = s.ORDER_DATE,
                                          ORDER_TYPE = s.ORDER_TYPE,
                                          PAY_OPTION = s.PAY_OPTION,
                                          PRODUCT_COUNT = s.PRODUCT_COUNT,
                                          STATUS = "2"
                                      });
                Console.WriteLine(s.ORDER_ID +"Inserted");
            }

            foreach (var s in order.OrderProductMappingList)
            {
                var orderProductMapping = new ConsumeDataSyncService.DbContext.ORDER_PRODUCT_MAPPING
                                              {
                                                  ID = s.ID,
                                                  ORDER_ID = s.ORDER_ID,
                                                  P_CODE = s.P_CODE,
                                                  QUANTITY = s.QUANTITY
                                              };
                db.ORDER_PRODUCT_MAPPING.Add(orderProductMapping);
                Console.WriteLine(s.ID + "Inserted");
            }
            db.SaveChanges();
            Console.ReadKey();
        }
    }

and app.config 

<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_ISyncService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:8092/SyncService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ISyncService" contract="OrderSyncService.ISyncService" name="BasicHttpBinding_ISyncService" />
    </client>
  </system.serviceModel>
  <connectionStrings>
    <add name="InceptaDbContext" connectionString="metadata=res://*/DbContext.Model1.csdl|res://*/DbContext.Model1.ssdl|res://*/DbContext.Model1.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=192.168.1.159/Incepta;PASSWORD=bs23;USER ID=BS&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration>

the error I got at the time of debugging

Failed to invoke the service. Possible causes: The service is offline or inaccessible; the client-side configuration does not match the proxy; the existing proxy is invalid. Refer to the stack trace for more detail. You can try to recover by starting a new proxy, restoring to default configuration, or refreshing the service.

The underlying connection was closed: The connection was closed unexpectedly.

Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at ISyncService.InsertOrderData(Decimal depotId)
   at SyncServiceClient.InsertOrderData(Decimal depotId)

Inner Exception:
The underlying connection was closed: The connection was closed unexpectedly.
   at System.Net.HttpWebRequest.GetResponse()`enter code here`
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:34:34.290

通常出现此错误，模型中似乎存在循环引用，因此无法序列化。启用[跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)以查看服务的日志，您可以在其中查看是什么异常导致服务意外关闭连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T05:32:11.203

感谢所有给我时间的人....我已经解决了这个问题。在 OrderData 类中有两个属性，它们也是另一个类。所以我在属性中的类（ORDER_INFO 和 ORDER_PRODUCT_MAPPING）和 [DataMember] 中添加了类似 [DataContract] 的属性并解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:07:25.147

通过添加尝试

```
[Serializable,DataContract()] 
```

在类名上方。

# javascript - 两个函数之间的延迟

> ID：15545555
> 
> 赞同：0
> 
> 时间：2013-03-21T10:57:00.330
> 
> 标签：javascript, jquery

我希望 Cols 和 Rows 函数之间有 2000 毫秒的延迟。（应该先绘制列，然后绘制行）

```
(function() {  
    var cols = $('.cols').hide();  
    var rows = $('.rows').hide();   
    $('.grid').click(function() {  
        var i = 0;  
        var j = 0;
        (function displayCols() {  
            cols.eq(i++).fadeIn(200, displayCols);  
        })();  
        (function displayRows() {  
            rows.eq(j++).fadeIn(100, displayRows);  
        })();  
    });    
})(); 
$('.rows').hide(); 
```

[小提琴](http://jsfiddle.net/xFTUB/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:01:49.367

您可以为第二个函数添加超时：

```
(function() {  
    var cols = $('.cols').hide();  
    var rows = $('.rows').hide();   
    $('.grid').click(function() {  
        var i = 0;  
        var j = 0;
        (function displayCols() {  
            cols.eq(i++).fadeIn(200, displayCols);  
        })();  
        setTimeout(function displayRows() {  
            rows.eq(j++).fadeIn(100, displayRows);  
        },2000);  
    });    
})(); 
$('.rows').hide(); 
```

[在此处](http://jsfiddle.net/xFTUB/4/)查看实际操作

当然，您可以只使用延迟 ( `rows.eq(j++).delay(2000).fadeIn(100, displayRows);`)，但如果您想在该函数中延迟其他内容，`setTimeout()`也会延迟该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:00:41.583

使用`delay(duration)`：

```
 (function displayRows() {  
        rows.eq(j++).delay(2000).fadeIn(100, displayRows);  
    })(); 
```

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# jquery - 如何使用 jQuery 触发输入事件？

> ID：15545557
> 
> 赞同：23
> 
> 时间：2013-03-21T10:57:02.900
> 
> 标签：jquery, triggers

单击按钮时，我想在输入值中添加“a”

这是我的代码（使用 jQuery 1.4.4）：

```
$("#button").click(function(){
    $("#input").trigger("focus");
    var e = jQuery.Event("keypress");
    e.which = '97';
    $("#input").trigger(e);
}) 
```

但是，它似乎只触发了“焦点”事件，而未能“按键”。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2017-05-25T10:22:49.920

我使用了[触发](https://api.jquery.com/trigger/)方法：

```
$('#selector').val(quantity).trigger("input"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-21T11:00:42.317

像这样？？对不起，我对你的文章感到困惑..

```
$("#button").click(function(){
    $("#input").trigger("keypress") // you can trigger keypress like this if you need to..
    .val(function(i,val){return val + 'a';});
}); 
```

参考：[.val（函数（索引，值））；](http://api.jquery.com/val/#val-functionindex--value)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T11:01:32.347

为什么不只是附加到`val()`？

```
$("#button").click(function(){
  $("#input").val(
    $("#input").val() + "a"
  );
}) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-21T11:05:21.820

我已经知道如何处理它了。

将 keypress 事件上的 eventListener 添加到输入并使用 val 更改值。

这样就不需要触发焦点事件。

```
$("#button").click(function(){
    var e = jQuery.Event("keypress");
    e.chara = 'a';
    $("#input").trigger(e);
});

$("#input").keypress(function(e){
    $(this).val(e.chara);
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T11:03:48.100

根据[文档](http://api.jquery.com/trigger/)

> 尽管 .trigger() 模拟了一个事件激活，并带有一个合成的事件对象，但它并不能完美地复制一个自然发生的事件。

所以你能做的最好的就是

```
$("#button").click(function(){
    $("#input").trigger("focus").val($("#input").val() + 'a');
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-04T06:04:29.153

如果您需要考虑当前光标和文本选择...

这不适用于 Chrome 上的 AngularJS 应用程序。有人指出触发事件不会使字符在输入字段中可见（至少，这是我所看到的）。此外，之前的解决方案没有考虑当前光标位置和输入字段中的文本选择。我不得不使用一个很棒的库[jquery-selection](http://madapaja.github.io/jquery.selection/)。

我有一个自定义的屏幕数字键盘，可以填写多个输入字段。我不得不...

1.  在焦点上，保存 lastFocus.element
2.  在模糊时，保存当前的文本选择（开始和停止）

    ```
    var pos = element.selection('getPos')
    lastFocus.pos = { start: pos.start, end: pos.end} 
    ```

3.  当按下我的键盘上的按钮时：

    ```
    lastFocus.element.selection( 'setPos', lastFocus.pos)
    lastFocus.element.selection( 'replace', {text: myKeyPadChar, caret: 'end'}) 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-15T10:48:15.537

尝试这个 ：

```
$("#triggerbtn").click(function(){
$("#InputField").trigger("keypress")
.val(function(i,val){
return val + 'j';
});
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-21T11:01:12.223

您不需要按键或任何其他输入事件，只需使用`val`.. 并将其聚焦...

尝试这个

```
 $("#button").click(function(){

   $("#input").val('a').focus();
}) 
```

[在这里摆弄](http://jsfiddle.net/bipen/daJSp/)

# c# - 插入前检查详细视图空字段

> ID：15545560
> 
> 赞同：1
> 
> 时间：2013-03-21T10:57:10.823
> 
> 标签：c#, asp.net, detailsview

我在 asp.net 中有详细视图，从中我将数据插入到 DB.Here 我想在插入之前检查任何字段是否为空，如果为空，则不要插入，否则插入到 db 我尝试了以下代码，但是它不起作用

```
protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
    {
     string unt = (string)e.Values["UNT_COD"];
     if (unt == "")
     {
         e.Cancel = true;  
     }
    } 
```

通过这段代码我没有达到我的目的请任何人帮助我找出检查的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:59:37.217

您可以使用字符串函数如下

```
if (string.IsNullOrEmpty(e.Values["UNT_COD"]))
{

}
else
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:02:24.347

```
string unt = e.Values["UNT_COD"]+"";
 if (unt == "")
 {
     e.Cancel = true;  
 } 
```

# centos - NoSuchMethodError SLF4J CentOS 5.8

> ID：15545561
> 
> 赞同：0
> 
> 时间：2013-03-21T10:57:14.077
> 
> 标签：centos, wicket, slf4j

我遇到了 wicket、slf4j 和 CentOS 5.8 的问题。这是我收到的 StackTrace：

```
Can't instantiate page using constructor public MyCompany.backenduser.NewBackendUser()
org.apache.wicket.WicketRuntimeException: Can't instantiate page using constructor public MyCompany.backenduser.NewBackendUser()
    at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:212)
    at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:57)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:298)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:320)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:234)
    at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:92)
    at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1250)
    at org.apache.wicket.RequestCycle.step(RequestCycle.java:1329)
    at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1436)
    at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
    at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:319)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:559)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
    at org.eclipse.jetty.server.Server.handle(Server.java:365)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:627)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:51)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:192)
    ... 65 more
Caused by: java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple;
    at org.slf4j.impl.Log4jLoggerAdapter.warn(Log4jLoggerAdapter.java:420)
    at org.apache.wicket.Localizer.getStringIgnoreSettings(Localizer.java:198)
    at org.apache.wicket.Localizer.getString(Localizer.java:313)
    at org.apache.wicket.model.StringResourceModel.getString(StringResourceModel.java:503)
    at MyCompany.controls.PermissionsControl.<init>(PermissionsControl.java:28)
    at MyCompany.backenduser.NewBackendUser.init(NewBackendUser.java:281)
    at MyCompany.backenduser.NewBackendUser.<init>(NewBackendUser.java:107)
    ... 70 more 
```

我只在 CentOS 5.8 上收到这个，在 Windows 上效果很好。我们使用 maven 来构建项目。在 pom.xml 中，我们从其他 jar 中排除了每个版本的 slf4j。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:11:29.213

很可能您的部署环境中某处有一个较旧的 slf4j-log4j.jar。在您的 Web 容器的 lib 目录中查找 slf4j* 文件，并检查它们的版本是否与您的应用程序中的 slf4j-api 版本一致。

# c# - 多个根元素 (DataContractSerializer)

> ID：15545563
> 
> 赞同：0
> 
> 时间：2013-03-21T10:57:27.273
> 
> 标签：c#, sdk, windows-phone-8

我正在尝试使用 DataContractSerializer 反序列化文件。我有这样的课：

```
[DataContract]
public class kontenerUstawienia
{
    [DataMember]
    public int[] stanGry;
    [DataMember]
    public int maxSize;
    [DataMember]
    public int[] stanOpcji;

    [DataMember]
    public int numerFlagi1;
    [DataMember]
    public int numerFlagi2;

    public kontenerUstawienia()
    {
    }

(...)
} 
```

在内部，将序列化的类实例保存到文件后，我读取了文件并尝试反序列化：

```
try
{
    zapiszObiektUstawien((kontenerUstawienia)deserializer.ReadObject(strumien));
}

catch (SerializationException e)
{
    System.Diagnostics.Debug.WriteLine("\n\n\n\n++++++\n" + 
    e.Message 
    + "\n+++++++++++++++++++++++++++++++++++++++++++++++");
} 
```

catch 打印我：

```
++++++
There was an error deserializing the object of type
WindowsPhoneGame1.kontenerUstawienia. There are multiple root elements. Line 1,
position 599.
+++++++++++++++++++++++++++++++++++++++++++++++ 
```

我究竟做错了什么？

编辑：这是我序列化并保存的代码：

```
public void zapiszDoPliku(string sciezkaDoPliku, IsolatedStorageFile katalog)
{
    IsolatedStorageFileStream strumien = katalog.CreateFile(sciezkaDoPliku); // tworzenie pliku

    MemoryStream ms = new MemoryStream();
    StreamReader r  = new StreamReader(ms);

    DataContractSerializer serializer = new DataContractSerializer(typeof(kontenerUstawienia));

    serializer.WriteObject(ms, this);

    ms.Position = 0;

    string daneDoZapisania = r.ReadToEnd();

    byte[] bytes = Encoding.Unicode.GetBytes(daneDoZapisania);

    strumien.Write(bytes, 0, bytes.Length);

    ms.Close();
    strumien.Close();
} 
```

编辑2：

文件已保存： [文件在这里](http://paste.org/62890)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:21:50.537

您确定文件在写入之前为空吗？

# mysql - Mysql函数返回相同的值

> ID：15545570
> 
> 赞同：0
> 
> 时间：2013-03-21T10:57:40.880
> 
> 标签：mysql, function

我需要 mysql 函数，但每次
这个 mysql 函数每次都给我相同的值，即 S_Start_ToBeStarted（第一个 If 的值）时给出相同的值

```
-- colorA
DELIMITER $$
DROP FUNCTION IF EXISTS `colorA`$$
CREATE FUNCTION `colorA`( 
    Appf VARCHAR(3), 
    Start_Datef DATETIME, 
    PDCf DATETIME
    ) RETURNS INT
    DETERMINISTIC
BEGIN
DECLARE finalcolor INT DEFAULT 0;
IF Appf = 'Yes' & IFNULL(Start_Datef, 'NULL' = 'NULL' & sysdate() <= PDCf
    THEN SET finalcolor = (SELECT `PP_Colors`.`S_Start_ToBeStarted` FROM `SCR_Sap`.`PP_Colors` LIMIT 1);

ELSE IF Appf = 'Yes' & IFNULL(Start_Datef, 'NULL') = 'NULL' & sysdate() > PDCf
    THEN SET finalcolor = (SELECT `PP_Colors`.`S_Start_Error` FROM `SCR_Sap`.`PP_Colors` LIMIT 1);

ELSE IF Appf = 'Yes' & IFNULL(Start_Datef, 'NULL') != 'NULL' & sysdate() <= PDCf
    THEN SET finalcolor = (SELECT `PP_Colors`.`S_Start_Ok` FROM `SCR_Sap`.`PP_Colors` LIMIT 1);

ELSE IF Appf = 'Yes' & IFNULL(Start_Datef, 'NULL') != 'NULL' & sysdate() > PDCf
    THEN SET finalcolor = (SELECT `PP_Colors`.`S_Start_LateStarted` FROM `SCR_Sap`.`PP_Colors` LIMIT 1);

ELSE SET finalcolor = (SELECT `PP_Colors`.`S_NotApplicable` FROM `SCR_Sap`.`PP_Colors` LIMIT 1);

END IF;
END IF;
END IF;
END IF;
    RETURN finalcolor;
    END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:07:51.343

Null 不适用于`=`and`!=`运算符，其结果`foobar=NULL`是 NULL（未知）而不是 true 或 false。使用`IS NULL`and`IS NOT NULL`代替

# java - 你可以扩展一个文本视图来改变边距的颜色吗？

> ID：15545575
> 
> 赞同：0
> 
> 时间：2013-03-21T10:58:01.790
> 
> 标签：java, android, textview

有没有办法扩展 textview 以将左边距的颜色更改为与第一个 textview 不同的颜色？

# snmp - 如何在 Nagios 中显示类似表格的信息？

> ID：15545576
> 
> 赞同：1
> 
> 时间：2013-03-21T10:58:02.737
> 
> 标签：snmp, nagios

我的设置是这样的。我有多个服务器。每台服务器都有多个相同服务的实例（多租户架构）。现在我想使用 SNMP 获取在所有服务器上运行的所有服务的状态。我面临的问题是，有人如何在 Nagios 中显示类似表格的信息？

即，当我单击任何特定服务器时，它会显示服务列表。现在，当我单击任何服务时，它应该再次给我该特定服务的实例列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:56:40.840

Nagios 中没有这样的功能。您需要为受监控主机上运行的每个服务设置检查。

# jquery - jQueryUI 可放置和可排序 - 无法更改顺序和一些我无法修复的错误

> ID：15545578
> 
> 赞同：0
> 
> 时间：2013-03-21T10:58:05.237
> 
> 标签：jquery, html, css, jquery-ui

我已经把大部分代码放在一起，只是不能让一些东西工作：-

1.  “选定的 DVD”区域中的项目我只需要能够更改此列表中这些 DVD 的顺序，因此我可以将顺序从 1、2、3 更改为 3、1、2。

2.  “未选择”区域中的项目不会向上拖动到选定的 dvds 区域

3.  如果我单击顶部的链接“添加所有未选择的 dvd”，然后单击链接“删除所有选定的 dvd”，它不会将它们添加到底部的正确区域。但是，如果您首先单击“删除所有选定的 dvds”链接......它可以工作

4.  在#3 之后，如果我在右上角添加新的 dvd，有时它会添加相同 dvd 的负载？

这是我到目前为止的工作演示：http: [//jsfiddle.net/BFWzS/1/](http://jsfiddle.net/BFWzS/1/)

上面的小提琴中有更多代码^

```
// let the gallery items be draggable
$( "li", $gallery ).draggable({
  cancel: "a.ui-icon", // clicking an icon won't initiate dragging
  revert: "invalid", // when not dropped, the item will revert back to its initial position
  containment: "document",
  helper: "clone",
  cursor: "move"
});

// let the trash be droppable, accepting the gallery items
$trash.droppable({
  accept: "#gallery > li",
  activeClass: "ui-state-highlight",
  drop: function( event, ui ) {
    deleteImage( ui.draggable );
  }
}); 
```

希望有人可以帮助我们，

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:15:35.020

正如我的评论所建议的那样，您应该将其分解为更具体的问题并将它们作为单独的问题提出。但这里有一些信息可以帮助您：

1.  查看[JQuery 可排序](http://jqueryui.com/sortable/)

2.  查看[连接列表选项](http://jqueryui.com/sortable/#connect-lists) **[EDIT]**在您的 JSFIddle 中，我不存在您的问题（在 Chrome 中）

3.  这应该是一个单独的问题（尽管您可能已经找到了这个问题的副本）

4.  如果您对 3 的回答没有解决，那么应该是一个附加问题

* * *

为了获得更有意义的答案，这里有一些示例代码显示了 JQuery Sortable 的使用：

```
<div class="container">
    <div class="header">Selected DVDs</div>
    <ul id="gallery" class="dvdlist">
        <li>DVD 1</li>
        <li>DVD 2</li>
        <li>DVD 3</li>
    </ul>
</div>
<div class="container">
    <div class="header">Un-selected DVDs</div>
    <ul id="trash" class="dvdlist">
        <li>DVD 4</li>
        <li>DVD 5</li>
        <li>DVD 6</li>
    </ul>
</div>

$("#gallery").sortable({
    connectWith: "#trash"
});
$("#trash").sortable({
    connectWith: "#gallery"
}); 
```

[你可以在这里看到这个。](http://jsfiddle.net/w3vvL/)

# networking - 无法通过带有 Rackspace 和 Azure 的站点到站点 VPN 使用 VPN 客户端连接到 Azure

> ID：15545582
> 
> 赞同：3
> 
> 时间：2013-03-21T10:58:28.203
> 
> 标签：networking, azure, vpn, rackspace

我们在 rackspace 和 azure 之间有一个站点到站点的 vpn 设置。当我在 rackspace 网络中（即远程桌面到 rackspace 服务器上）时，我可以毫无问题地连接到我们的 azure vms。但是，当我使用 vpn 客户端连接到 rackspace 时，我没有得到相同的行为。

Rackspace 告诉我数据包正在通过，但没有返回任何内容。他们告诉我这取决于 azure 端的 vpn 防火墙配置。我已经在 azure 的本地网络部分下添加了我们的 IP 范围。

任何帮助解决这个问题将不胜感激。

作为一些背景知识，我们走这条路线的唯一原因是因为我们不能直接将 vpn 连接到 azure （不想使用连接，因为我们想在路由器级别这样做）而且我们没有外部 ip，所以我们不能使用站点到办公室的 vpn 站点。

任何输入都非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:36:56.910

azure 团队提供直接支持

[http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesVirtualNetwork/thread/75c87385-fefc-4edc-876d-4be577986a27](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesVirtualNetwork/thread/75c87385-fefc-4edc-876d-4be577986a27)

# android - Android 片段，在 TabHost 中找不到 id 的视图

> ID：15545584
> 
> 赞同：4
> 
> 时间：2013-03-21T10:58:30.063
> 
> 标签：android, android-widget, android-fragments, android-tabhost

我有一个使用 Tabhost 和 Fragments 设置选项卡的简单 Android 应用程序。在其中一个标签页上，片段是一个列表视图。我想要做的是当用户单击列表视图的一个项目时，根据单击的项目打开一个包含更具体信息的新视图，但保留它以便选项卡仍然存在。

我的方法是当用户单击列表视图中的项目时，会创建一个新片段，然后从拥有所有这些片段并处理选项卡逻辑的主 FragmentActivity 类中，它将分离当前显示的片段并添加这个“新" (singleStationListItem) 片段。我遇到的问题是我无法使用 R.id.realtabcontent 将我的新片段添加到 fragmentTransaction 中，因此它没有正确添加。我得到：

03-21 10:50:01.862: E/FragmentManager(1136): 没有为片段 singleStationListItem{40d090a0 #2 id=0x1010000} 找到 id 0x1010000 (android:attr/theme) 的视图

其中 R.id.realtabcontent = 0x01010000;

我可以在没有 ID 的情况下附加它，但是用户无法返回（调用 addtobackstash() ）。我已经搜索了这个错误，但其他解决方案与 tabhost 无关，我似乎做了需要做的事情，比如在 onCreate() 中调用 setContextView(...) 到包含我的 framelayout 标记的布局的 xml 文件试图将我的片段附加到。我可以毫无问题地将标签片段添加到 R.id.realtabcontent。有谁知道可能导致我的错误以及如何解决它？

注意：我按照本教程让我的标签正常工作。我的代码非常相似。 [http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

我的代码：activiy_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_body"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0"
                android:padding="5dp" />

            <FrameLayout
                android:id="@+android:id/realtabcontent"  <--id that I want to set to
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1" />

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="-4dp"
                android:layout_weight="0"
                android:orientation="horizontal" />
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

main_activity.java //来自我的片段活动类的部分

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Step 1: Inflate layout
        setContentView(R.layout.activity_main);
        // Step 2: Setup TabHost
        initialiseTabHost(savedInstanceState);
        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); //set the tab as per the saved state
        }
    }

public void onTabChanged(String tag) { //handles tab changes
    TabInfo newTab = (TabInfo) this.mapTabInfo.get(tag);
    if (mLastTab != newTab) {
        FragmentTransaction ft =     this.getSupportFragmentManager().beginTransaction();
        if (mLastTab != null) {
            if (mLastTab.fragment != null) {
                ft.detach(mLastTab.fragment);
            }
        }
        if (newTab != null) {
            if (newTab.fragment == null) {
                newTab.fragment = Fragment.instantiate(this,
                        newTab.clss.getName(), newTab.args);
                ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag); //note it uses the R.id.realtabcontent without any issues here
            } else {
                ft.attach(newTab.fragment);
            }
        }

        Log.d("fragment manager in activity: ", "" + ft.isEmpty());
        mLastTab = newTab;
        ft.commit();
        this.getSupportFragmentManager().executePendingTransactions();
        Log.d("ft ID: ", ft.toString());
    }
}

//This is the callback function inside the listview fragment. I created an interface and it is overwritten in here as suggested by the Android SDK guide
public void onStationSelected(String station) {
    FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
    ft.addToBackStack(null);
    ft.addToBackStack(null);

    //create argument for new fragment that will be created
    Bundle b = new Bundle();
    b.putString("station", station);
    Fragment displayStationInfo = Fragment.instantiate(this, singleStationListItem.class.getName(), b);

    Fragment cur = getSupportFragmentManager().findFragmentById(R.id.realtabcontent);
    ft.detach(cur);
    ft.add(R.id.realtabcontent, displayStationInfo); <-- this line causes the error
    ft.commit();
    this.getSupportFragmentManager().executePendingTransactions();
} 
```

singleStationListItem.java 在这里

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle b = this.getArguments();

    getActivity().setContentView(R.layout.single_station_item_view);

    TextView txtStation = (TextView)   getActivity().findViewById(R.id.station_label);

    String station = b.getString("station");
    // displaying selected product name
    Log.d(TAG, "passed in station information: " + station);
    txtStation.setText(station);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v = (LinearLayout)inflater.inflate(R.layout.single_station_item_view, container, false);
    return v;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T21:44:31.990

我意识到这个问题是不久前被问到的，我正在为可能遇到这个问题的其他人发布答案。

据我所知，没有“realtabcontent”的Android id。在您的 XML 中，删除 .id 的 'android' 部分`FrameLayout`。

```
<FrameLayout
    android:id="@+id/realtabcontent"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" /> 
```

[开发者文档](http://developer.android.com/reference/android/app/TabActivity.html)上发布的完整 XML 代码如下：

```
<android.support.v4.app.FragmentTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@+id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

</LinearLayout> 
```

祝你好运，编码愉快！

# android - 在后台使用 do 时以编程方式创建重复的详细布局

> ID：15545590
> 
> 赞同：0
> 
> 时间：2013-03-21T10:59:07.417
> 
> 标签：android, android-layout, scrollview, repeat

我一直在周围，我已经看到重复的布局示例。我什至尝试了一些但无济于事。大多数都没有提供我在下面要完成的工作的真实表示。我确实遇到了一个似乎可以工作但导致错误的方法，因为我试图将 .add 用于父布局而 android 不喜欢它。我需要动态布局，这样我就可以在每个重复的项目上使用不同的细节，而不会覆盖以前的细节。

下面是重复布局的 XML，它与活动的布局不同，我不同意，如果有更好的方法我想知道。我确定我的结构有点过载，但我现在并不担心。

```
<?xml version="1.0" encoding="utf-8"?>

            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_marginBottom="5dp"
                android:layout_marginRight="5dp"
                android:background="@drawable/shop_item_banner"
                android:orientation="horizontal"
                android:padding="10dp" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <ImageView
                        android:id="@+id/ImageView01"
                        android:layout_width="55dp"
                        android:layout_height="55dp"
                        android:background="@drawable/shop_back_missing_image" />

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_weight="0.83"
                        android:orientation="vertical"
                        android:paddingLeft="5dp" >

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content" >

                            <TextView
                                android:id="@+id/textView1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="TextView" />
                            <TextView
                                android:id="@+id/textView3"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="TextView" />

                        </LinearLayout>

                        <TextView
                            android:id="@+id/textView2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="TextView" />
                    </LinearLayout>

                    <ImageView
                        android:id="@+id/imageView1"
                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:src="@drawable/shop_divider_section" />

                    <Button
                        android:id="@+id/button2"
                        android:layout_width="50dp"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="5dp"
                        android:background="@drawable/shop_big_button"
                        android:text="BUY"
                        android:typeface="normal" />

                </LinearLayout>

            </LinearLayout> 
```

下面是更新页面结构的代码。它正在更新一个位于 ScrollView 内的 LinearLayout，以便用户可以滚动项目。我开始缩减我的代码，以便调试我的问题。到目前为止，我只用了一个 while 循环来打印布局三遍。一旦工作正常，但在我让它运行不止一次之后，事情失败并且应用程序强制关闭。我收到一条警告，提示我无法再将项目添加到所选布局。

```
 public class LayoutStream extends AsyncTask<String, String, String>{

    String data = null;
    LinearLayout layoutList = (LinearLayout)findViewById(R.id.ScrollItem);

    protected void onPreExecute(){

    }

    @Override
    protected String doInBackground(String... params) {         
        return data;
    }

    protected void onPostExecute(String tpresult){
        int run = 5;
        View storeitems = getLayoutInflater().inflate(R.layout.shop_item, null);
        while (run > 3){

            layoutList.addView(storeitems);
            run--;
        }   
    }
} 
```

感谢您提供任何帮助，这是一个很大的障碍，我花了很多时间试图弄清楚为什么会这样。

错误代码是之前的。错误是在 postexecute() 期间尝试添加元素时

03-21 21:27:44.245: W/dalvikvm(30172): threadid=1: 线程退出未捕获异常 (group=0x40020ac0) 03-21 21:27:44.255: E/AndroidRuntime(30172): 致命异常: main 03-21 21:27:44.255: E/AndroidRuntime(30172): java.lang.IllegalStateException: 指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。03-21 21:27:44.255: E/AndroidRuntime(30172): 在 android.view.ViewGroup.addViewInner(ViewGroup.java:1970) 03-21 21:27:44.255: E/AndroidRuntime(30172): 在 android. view.ViewGroup.addView(ViewGroup.java:1865) 03-21 21:27:44.255: E/AndroidRuntime(30172): 在 android.view.ViewGroup.addView(ViewGroup.java:1822) 03-21 21:27: 44.255: E/AndroidRuntime(30172): 在 android.view.ViewGroup.addView(ViewGroup.java:1802) 03-21 21:27:44.255: E/AndroidRuntime(30172): 在 com.example.myapp.app。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:40:49.580

所以我找到了我的问题的答案。当我第一次开始使用它时，我已经接近解决方案了。这使我还可以定位正在创建的每个项目，以便在创建它们时对其进行更新。

```
public class LayoutStream extends AsyncTask<String, String, String>{

    String data = null;
    LinearLayout layoutList = (LinearLayout)findViewById(R.id.ScrollItem);

    protected void onPreExecute(){

    }

    @Override
    protected String doInBackground(String... params) {         
        return data;
    }

    protected void onPostExecute(String tpresult){
        int run = 5;
        LinearLayout layoutList = (LinearLayout)findViewById(R.id.ScrollItem);
        LayoutInflater IInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        while (run >= 1){

            View storeitems = IInflater.inflate(R.layout.shop_item, null);
            layoutList.addView(storeitems, 0);
            run--;
        }   
    }
} 
```

# python - 使用 python/BeautifulSoup 将 HTML 标签对替换为不同的标签对

> ID：15545594
> 
> 赞同：1
> 
> 时间：2013-03-21T10:59:15.560
> 
> 标签：python, html, replace, tags, beautifulsoup

我需要用另一个标签替换一对匹配的 HTML 标签。可能 BeautifulSoup (4) 将适合该任务，但我以前从未使用过它，也没有在任何地方找到合适的示例，有人可以给我一个提示吗？

例如，这个 HTML 代码：

```
<font color="red">this text is red</font> 
```

应该改成这样：

```
<span style="color: red;">this text is red</span> 
```

开始和结束 HTML 标记可能不在同一行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T11:25:14.607

用于[`replace_with()`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#replace-with)替换元素。将文档示例改编为您的示例给出：

```
>>> from bs4 import BeautifulSoup
>>> markup = '<font color="red">this text is red</font>'
>>> soup = BeautifulSoup(markup)
>>> soup.font
<font color="red">this text is red</font>
>>> new_tag = soup.new_tag('span')
>>> new_tag['style'] = 'color: ' + soup.font['color']
>>> new_tag.string = soup.font.string
>>> soup.font.replace_with(new_tag)
<font color="red">this text is red</font>
>>> soup
<span style="color: red">this text is red</span> 
```

# javascript - ChartWrapper 不显示图表

> ID：15545596
> 
> 赞同：2
> 
> 时间：2013-03-21T10:59:22.140
> 
> 标签：javascript, html, google-visualization

我正在使用 google-chart-api 使用 ChartWrapper 类和 ControlWrapper 类绘制图形。这是我一直在使用的代码。

这是加载硬编码数据的功能。

```
 function drawVisualization() {
    // Prepare the data
    var data = google.visualization.arrayToDataTable([
      ['TimeLine', 'Time-Option', 'LOC', 'Comments'],
      ['Monthly', '1', 200, 20],
      ['Monthly', '2', 300, 30],
      ['Weekly', '1', 150, 15],
      ['Weekly', '3', 35, 3],
      ['Daily', '1', 230, 23],
      ['Daily', '2', 178, 17],

    ]); 
```

这是我的 ControlWrapper。

```
 var timelinePicker = new google.visualization.ControlWrapper({
      'controlType': 'CategoryFilter',
      'containerId': 'control',
      'options': {
        'filterColumnLabel': 'Timeline',
        'ui': {
          'labelStacking': 'vertical',
          'allowTyping': false,
          'allowMultiple': false
        }
      }
    }); 
```

这是我的 ChartWrapper。

```
 var lineChart = new google.visualization.ChartWrapper({
        'chartType': 'LineChart',
        'containerId': 'chart',
        'options': {
          'width': 900,
          'height': 500,
          'chartArea': {top: 0, right: 0, bottom: 0}
        },

        'view': {'columns': [1, 2]}
      });

   new google.visualization.DashBoard(document.getElementById('chart')).bind(timelinePicker, lineChart).draw(data);
}
    google.setOnLoadCallback(drawVisualization); 
```

并查看图表，

```
 <body>
  <div id="chart">
  <table>
    <tr style='vertical-align: top'>
      <td style='width: 300px; font-size: 0.9em;'>
        <div id="control"></div>
      </td>
      <td style='width: 600px'>
        <div style="float: left;" id="chart"></div>
      </td>
    </tr>
  </table>
  </div>
  </body> 
```

但是，我仍然没有得到任何输出。知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T00:15:16.410

强烈建议：始终尝试先调试自己的代码。如果您使用 firebug 或类似工具来捕获错误，那么其中有很多粗心的错误很容易被捕获。

## 错误 #1：仪表板 -> 仪表板

错误的：`new google.visualization.DashBoard(document.getElementById('chart')).bind(timelinePicker, lineChart).draw(data);`

右：新 google.visualization.Dashboard(document.getElementById('chart')).bind(timelinePicker, lineChart).draw(data);`

## 错误 #2：时间线 -> 时间线

错误的：`'filterColumnLabel': 'Timeline',`

对：`'filterColumnLabel': 'TimeLine',`

## 错误 #3：图表 -> 仪表板

错误的：`new google.visualization.Dashboard(document.getElementById('chart')).bind(timelinePicker, lineChart).draw(data);`

对：`new google.visualization.Dashboard(document.getElementById('dashboard')).bind(timelinePicker, lineChart).draw(data);`

更正 HTML（您有两个带有“图表”ID 的 div）：

```
 <body>
  <div id="dashboard">
  <table>
    <tr style='vertical-align: top'>
      <td style='width: 300px; font-size: 0.9em;'>
        <div id="control"></div>
      </td>
      <td style='width: 600px'>
        <div style="float: left;" id="chart"></div>
      </td>
    </tr>
  </table>
  </div>
  </body> 
```

## 最终工作版本

```
<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1.1', {packages: ['controls']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Prepare the data
        var data = google.visualization.arrayToDataTable([
          ['TimeLine', 'Time-Option', 'LOC', 'Comments'],
          ['Monthly', '1', 200, 20],
          ['Monthly', '2', 300, 30],
          ['Weekly', '1', 150, 15],
          ['Weekly', '3', 35, 3],
          ['Daily', '1', 230, 23],
          ['Daily', '2', 178, 17],  
        ]);

        var timelinePicker = new google.visualization.ControlWrapper({
          'controlType': 'CategoryFilter',
          'containerId': 'control',
          'options': {
            'filterColumnLabel': 'TimeLine',
            'ui': {
              'labelStacking': 'vertical',
              'allowTyping': false,
              'allowMultiple': false
            }
          }
        });

        var lineChart = new google.visualization.ChartWrapper({
          'chartType': 'LineChart',
          'containerId': 'chart',
          'options': {
            'width': 900,
            'height': 500,
            'chartArea': {top: 0, right: 0, bottom: 0}
          },

          'view': {'columns': [1, 2]}
        });

        new google.visualization.Dashboard(document.getElementById('dashboard')).bind(timelinePicker, lineChart).draw(data);
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="dashboard">
      <table>
        <tr style='vertical-align: top'>
          <td style='width: 300px; font-size: 0.9em;'>
            <div id="control"></div>
          </td>
          <td style='width: 600px'>
            <div style="float: left;" id="chart"></div>
          </td>
        </tr>
      </table>
    </div>
  </body>
</html> 
```

# unix - AIX 二进制文件 - 大小和符号

> ID：15545601
> 
> 赞同：0
> 
> 时间：2013-03-21T10:59:29.867
> 
> 标签：unix, aix

在两个 AIX 系统上使用相同源构建的两个二进制文件之间的符号存在一些差异。“主要”的一个例子：

* * *

```
xxxx1: .main                T  4294975624 
```

* * *

```
xxxx2: .main                T  4294969472         516
xxxx2: main:F-1             -           0 
```

* * *

为什么大小不一样？

'T' 是手册页中的全局文本符号。什么是'F'？

此外，两个二进制文件的大小差异很大：3924048 与 17701460。为什么？

AIX 版本、编译器版本、makefile（相同的 CFLAGS）是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:01:57.640

我相当确定 F-1 是一个返回 int 的函数。它是一个“stab”字符串，当编译器给出 -g 选项时输出。这也是大小差异的原因。

你可以尝试做“大小”和“大小”。size 还可以选择使其更详细。你也可以做“文件”等，它会告诉你它是否被剥离。

在链接时 -g 和 strip 标志之间，我认为这将解释您所看到的差异。

高温高压

# iis - 如何从脚本备份和恢复 IIS 配置

> ID：15545603
> 
> 赞同：4
> 
> 时间：2013-03-21T10:59:34.080
> 
> 标签：iis, scripting, backup, windows-server-2008, restore

我正在编写一个在 Windows 中设置许多不同应用程序的脚本（主要是用于 http、dns、mail、ftp 和 db 的 svn 和开源服务器）。该脚本旨在为新开发人员在新的/干净的 Windows 工作站中执行，它会自动设置所有内容以创建与生产环境非常相似的环境。执行后，一切都在本地运行，开发人员可以立即开始工作。

这不仅对新开发人员有帮助，而且对所有现有开发人员都有帮助，每当整个系统发生变化时，所有内容都会在本地复制。

我仍然无法做的一件事是对运行 Web 应用程序的 IIS 服务器进行某种备份（它位于 Prod 服务器中）并将其自动还原到新开发人员的机器上，这样他就不必在本地安装/配置 IIS。

我已经阅读了有关使用 appcmd.exe 创建和恢复备份的信息，但这仅适用于同一台机器（它使用加密密钥并且这些密钥在计算机之间更改）。

有没有一种方法，一种可编写脚本的方法，可以从一台服务器获取与 IIS 相关的所有内容并将其还原到另一台服务器上，而无需用户干预，并且还原后的 IIS 与原始服务器完全相同？

提前致谢！

弗朗西斯科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-16T21:11:57.663

只需将其放在这里，任何遇到此问题的人都会了解为什么没有回答。一个网站有大量与之相关的变量，这些变量阻止了任何简单的方法通过一个甚至几个 cmdlet 复制其所有配置。

首先，您需要非常熟悉 applicationHost.config 文件以及如何使用[Get-WebConfigurationProperty](https://technet.microsoft.com/en-us/library/ee807821.aspx)访问其中的属性。熟悉如何针对 Web 配置属性编写脚本的一种方法是使用 IIS 中的配置编辑器。每当您在配置编辑器中进行更改时，在提交更改之前，都会有一个名为 Generate Script 的漂亮小链接，其中将有一个 Powershell 选项卡，您可以使用它来帮助您为 applicationHost 中的配置元素收集正确的 Get/Set 命令.config 文件。

我创建的东西几乎与 OP 正在寻找的东西完全一样，它跨越 4 个模块（超过 20,000 行代码），并有一个包含所有配置元素的 SQL 后端。

当网站拥有从可能需要注册的底层 DLL、IsapiCGI 限制和 IsapiFilters、与可能需要添加到服务器上某些本地组的 AppPool 绑定的帐户到需要在服务器上加载证书的安全绑定等所有内容时. 你可以看到这不是一个简单的任务。（这些只是网站可能包含的变量的一小部分）

但是，Microsoft 为您提供了很多开箱即用的 cmdlet，您可以利用这些 cmdlet 来帮助您在[WebAdministration 模块](https://technet.microsoft.com/en-us/library/ee790599.aspx)中开发类似的东西。我知道这已经四岁了，但希望任何偶然发现这一点的人都会发现上述内容很有用。

# c# - 在每个 C# 应用程序中可以找到哪些信息用作加密的唯一盐？

> ID：15545607
> 
> 赞同：7
> 
> 时间：2013-03-21T10:59:47.123
> 
> 标签：c#, dpapi

在每个 C# 应用程序中可以找到哪些信息可以用作加密的唯一盐，包括 Web 应用程序、Windows 服务和 wcf 层？

我想创建一个库，允许使用（DPAPI）`System.Security.Cryptography.ProtectedData.Protect()`和`System.Security.Cryptography.ProtectedData.Unprotect()`方法轻松加密存储在配置文件中的敏感数据。

该库还将由我正在制作的一个单独的应用程序使用，该应用程序可以在使用这些值的应用程序之外加密和解密配置值，允许更新配置文件而无需重新编译所有内容或需要访问原始源，尽管访问源应始终可用。

盐必须足够简单，以便在单独的应用程序中手动输入（例如，很难识别 GUID）。

`System.Reflection.Assembly.GetEntryAssembly()`看起来很有希望，**如果**这是调用我正在制作的这个库的应用程序/服务的程序集，我可以在那里使用一些东西。第一个想法是*“将 salt 设置为存储加密数据的配置文件名......”*，但对于网站来说，配置文件始终是 'web.config'。

欢迎任何其他想法。

更新...

'GetExecutingAssembly()'...与'GetEntryAssembly()' 有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:02:42.430

每个应用程序/程序集都有一个版本号，这可能是一个选项。

```
System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:50:09.547

`System.Reflection.Assembly.GetEntryAssembly().GetName().Name`...

似乎是 exe 或 DLL 的名称，或者更准确地说，VS2010 使用程序集名称作为 exe 的名称。我需要调查这如何与网站和服务一起使用。

如果我加密和解密配置值的外部应用程序（加密应用程序）也可以“窥视”请求的程序集的“名称”（使用加密配置的程序），那么任何使用加密库的应用程序都只使用该库而不提供盐，并且库可以为自己（谁在调用它）计算出程序集名称并将其用作盐。如果 dll 或 exe 被重命名，我有一个机制来检索程序集名称值，内置在加密应用程序中。

ps 我不想将自己的答案标记为“已接受”，因此请完善我的建议并将其放入您自己的答案中，如果我得到任何好的答案，我会保证将其中一个标记为“已接受”。

# asp.net-mvc - tinyMCE 未定义

> ID：15545608
> 
> 赞同：2
> 
> 时间：2013-03-21T10:59:49.503
> 
> 标签：asp.net-mvc, asp.net-mvc-3, tinymce

我在 ASP.NET MVC 3 中使用 TinyMCE，但我认为这不是问题。

错误：

jquery-1.9.0.min.js:3Uncaught ReferenceError: tinyMCE is not defined

本地主机：67678/Scripts/jquery-1.9.0.min.js

```
<!-- TinyMCE -->
<script type="text/javascript" src="~/Scripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
    tinyMCE.init({
        mode: "textareas",
        theme: "simple"
    });
</script>
<!-- /TinyMCE -->
<h3>
    Simple theme example</h3>
<p>
    This page shows you the simple theme and it's core functionality you can extend
    it by changing the code use the advanced theme if you need to configure/add more
    buttons etc. There are more examples on how to use TinyMCE in the <a href="http://tinymce.moxiecode.com/examples/">
        Wiki</a>.
</p>
<!-- Gets replaced with TinyMCE, remember HTML in a textarea should be encoded -->
<textarea id="elm1" name="elm1" rows="15" cols="80" style="width: 80%">
        &lt;p&gt;
            This is some example text that you can edit inside the &lt;strong&gt;TinyMCE editor&lt;/strong&gt;.
        &lt;/p&gt;
        &lt;p&gt;
        Nam nisi elit, cursus in rhoncus sit amet, pulvinar laoreet leo. Nam sed lectus quam, ut sagittis tellus. Quisque dignissim mauris a augue rutrum tempor. Donec vitae purus nec massa vestibulum ornare sit amet id tellus. Nunc quam mauris, fermentum nec lacinia eget, sollicitudin nec ante. Aliquam molestie volutpat dapibus. Nunc interdum viverra sodales. Morbi laoreet pulvinar gravida. Quisque ut turpis sagittis nunc accumsan vehicula. Duis elementum congue ultrices. Cras faucibus feugiat arcu quis lacinia. In hac habitasse platea dictumst. Pellentesque fermentum magna sit amet tellus varius ullamcorper. Vestibulum at urna augue, eget varius neque. Fusce facilisis venenatis dapibus. Integer non sem at arcu euismod tempor nec sed nisl. Morbi ultricies, mauris ut ultricies adipiscing, felis odio condimentum massa, et luctus est nunc nec eros.
        &lt;/p&gt;
    </textarea>
<br />
<input type="submit" name="save" value="Submit" />
<input type="reset" name="reset" value="Reset" />
<script type="text/javascript">
    if (document.location.protocol == 'file:') {
        alert("The examples might not work properly on the local file system due to security settings in your browser. Please use a real webserver.");
    }
</script> 
```

图片： ![在此处输入图像描述](../Images/445d111b936702aadd2ee982de19efce.png)

固定的：

这是有效的

../../Scripts/tiny_mce/tiny_mce.js

我的问题是为什么这不起作用？为什么 VS 2010 不显示路径错误？

~/Scripts/tiny_mce/tiny_mce.js

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:18:45.573

正确答案-> ../../Scripts/tiny_mce/tiny_mce.js

# css - File api :: 接收文件名而不是浏览、拖动、下垂

> ID：15545609
> 
> 赞同：0
> 
> 时间：2013-03-21T10:59:53.027
> 
> 标签：css, html, fileapi

我正在使用 Html 文件 Api 读取文件。使用我读取它。它将显示一个浏览按钮并选择文件并以这种方式读取 ..。

但是我想手动设置一个默认文件以每次读取一个默认文件，而不是上面的内容。不更改代码怎么可能。

在文件 Api 中，它使用 ---- 从浏览器读取文件

```
function resetFileUploader() {
   getElem("uploader").innerHTML= '<input id="filechooser" type="file" />'; 
    getElem("filechooser").addEventListener("change", getFile, false); 
```

}

# objective-c - 未捕获的系统异常：信号 11

> ID：15545611
> 
> 赞同：0
> 
> 时间：2013-03-21T10:59:57.243
> 
> 标签：objective-c, xcode

我的一些用户报告说有时他们会收到上述错误。不幸的是，我无法从日志文件中看出任何东西。可能在代码的某个地方，一个对象被过度释放了。我能以某种方式抓住它并记录下来吗？

通常我会使用 Instruments 和 NSZobieEnabled 但不幸的是它不会发生在我的机器上。是否有机会记录该对象？

```
1   ExceptionHandling                   0x00000001000879e2 -[NSExceptionHandler _handleException:mask:] + 168
    2   ExceptionHandling                   0x00000001000877ba NSExceptionHandlerUncaughtSignalHandler + 35
    3   libsystem_c.dylib                   0x00007fff9836d8ea _sigtramp + 26
    4   ???                                 0x0000000001440013 0x0 + 21233683
    5   CoreFoundation                      0x00007fff985b525f -[NSArray initWithArray:range:copyItems:] + 591
    6   AppKit                              0x00007fff94a193f3 recursivelyEncodeInvalidPersistentState + 1118
    7   AppKit                              0x00007fff94a194a6 recursivelyEncodeInvalidPersistentState + 1297
    8   AppKit                              0x00007fff94a194a6 recursivelyEncodeInvalidPersistentState + 1297
    9   AppKit                              0x00007fff94a194a6 recursivelyEncodeInvalidPersistentState + 1297
    10  AppKit                              0x00007fff94a194a6 recursivelyEncodeInvalidPersistentState + 1297
    11  AppKit                              0x00007fff94a178aa -[NSPersistentUIManager flushAllChangesOptionallyWaitingUntilDone:updatingSnapshots:] + 1037
    12  AppKit                              0x00007fff94a17467 -[NSPersistentUIManager flushPersistentStateAndClose:waitingUntilDone:] + 180
    13  AppKit                              0x00007fff94a7eba5 -[NSApplication terminate:] + 1701
    14  AppKit                              0x00007fff94aa357e -[NSApplication _terminateFromSender:askIfShouldTerminate:saveWindows:] + 280
    15  AppKit                              0x00007fff94aad4a2 __52-[NSApplication(NSAppleEventHandling) _handleAEQuit]_block_invoke_0 + 46
    16  libdispatch.dylib                   0x00007fff8bd9af01 _dispatch_call_block_and_release + 15
    17  libdispatch.dylib                   0x00007fff8bd970b6 _dispatch_client_callout + 8
    18  libdispatch.dylib                   0x00007fff8bd9c0c8 _dispatch_main_queue_callback_4CF + 275
    19  CoreFoundation                      0x00007fff985a20fe __CFRunLoopRun + 1614
    20  CoreFoundation                      0x00007fff985a16b2 CFRunLoopRunSpecific + 290
    21  HIToolbox                           0x00007fff93fbf0a4 RunCurrentEventLoopInMode + 209
    22  HIToolbox                           0x00007fff93fbed84 ReceiveNextEventCommon + 166
    23  HIToolbox                           0x00007fff93fbecd3 BlockUntilNextEventMatchingListInMode + 62
    24  AppKit                              0x00007fff94858613 _DPSNextEvent + 685
    25  AppKit                              0x00007fff94857ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    26  AppKit                              0x00007fff9484f283 -[NSApplication run] + 517
    27  AppKit                              0x00007fff947f3cb6 NSApplicationMain + 869 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:05:48.810

信号 11 表示您在某处出现分段错误......因此它可能与 Objective-C 对象以外的其他事物有关，因为在这种情况下，您更有可能遇到异常（即使也可能发生段错误）。

所以`NSZombieEnabled`在这里帮不上忙。

尝试学习 C 中的信号处理。您可以为信号 11 ( **SIGSEGV** ) 定义一个处理程序，这样您就可以记录一些事情。

（非常）基本上：

```
#include <signal.h>
#include <stdlib.h>

static void __handler( int sig );
static void __handler( int sig )
{
    /* Debug... */

    exit( EXIT_FAILURE );
}

int main( void )
{
    signal( SIGSEGV, __handler );

    return 0;
} 
```

# cordova - 背景图片修复设备大小phonegap

> ID：15545612
> 
> 赞同：0
> 
> 时间：2013-03-21T11:00:01.863
> 
> 标签：cordova, phonegap-plugins, phonegap-build

```
1.Load image fix size of image

(function($) {
    $.fn.fullBg = function() {
        var bgImg = $(this);
        function resizeImg() {
            var imgwidth = bgImg.width();
            var imgheight = bgImg.height();

            var winwidth = $(window).width();
            var winheight = $(window).height();

            var widthratio = winwidth / imgwidth;
            var heightratio = winheight / imgheight;

            var widthdiff = heightratio * imgwidth;
            var heightdiff = widthratio * imgheight;

            if (heightdiff > winheight) {
                bgImg.css({
                    width : winwidth + 'px',
                    height : heightdiff + 'px'
                });
            } else {
                bgImg.css({
                    width : widthdiff + 'px',
                    height : winheight + 'px'
                });
            }
        }
        resizeImg();
        $(window).resize(function() {
            resizeImg();
        });
    };
})(jQuery) 
```

2.index.html

```
<script type="text/javascript" charset="utf-8" src="js/main.js">
            $(window).load(function() {
                $("#background").fullBg();
            });
        </script>
    </head>
    <body>
        <img src="img/main_bg.png" alt="" id="background" />
        <div id="maincontent">
            <!-- Your site content goes here -->
        </div>
    </body> 
```

3 和 css 文件看起来像这样

```
 fullBg {
    position: fixed;
    top: 0;
    left: 0;
    overflow: hidden;
}

#maincontent {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 50;
} 
```

这张图片是可滚动的，所以他们看到四周都是空白

![获取图像](../Images/ccfc988d5d92bd47e1034c4ecd2ecdee.png)

![我想要的图像看起来像这样](../Images/cb497881164dbb85e3c3b090d526d191.png)

提前感谢朋友们。欢迎每一个想法谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:45:57.943

试试这个css背景属性，希望对你有帮助....

你的身体背景 div css 看起来像这样

```
<style type="text/css">
.backgroud {
    background:url(image.jpg) repeat;
    background-size: 100%;
}
</style> 
```

html看起来像这样

```
<body>
    <div class="background">
        <div class="content"> -- Page Content --- </div>
    </div>
</body> 
```

# ruby-on-rails - 添加到关系数据库rails

> ID：15545613
> 
> 赞同：0
> 
> 时间：2013-03-21T11:00:01.960
> 
> 标签：ruby-on-rails, database, rails-activerecord

我有两个模型一个地址模型

```
class Address < ActiveRecord::Base
attr_accessible :address1, :address2, :country, :county, :customer_id, :town
belongs_to :customer    
end 
```

和客户模型

```
class Customer < ActiveRecord::Base
attr_accessible :email, :firstname, :lastname, :password, :phone
has_one :address

end 
```

我有使用脚手架生成的 CRUD 功能。我想要做的是当我添加一个新客户时，我可以从文件中的地址中为客户选择一个地址，也可以不选择地址。我可以使用它查看客户及其地址。

```
def showaddress
@customer = Customer.find(params[:id])
@address = @customer.address
respond_to do |format|
format.html # show.html.erb
format.xml { render :xml => @customer }
end
end 
```

这是我当前用于创建新客户的控制器

```
def new
@customer = Customer.new

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @customer }
end
end 
```

所以基本上我想要做的是当我创建一个新客户时，有一个地址的下拉列表，用户可以点击它来将地址与客户相关联

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:05:25.303

**您可以在控制器的新**方法中初始化所有地址的变量，并在视图页面中使用该变量来填充表单中的选择框。

```
def new
  @customer = Customer.new
  @addresses = Address.all
  #...
end 
```

或者直接填写如下表格中的地址

```
select_tag 'address_id', options_for_select(Address.all.collect{ |a| [a.name, a.id] }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:07:50.667

试试这个，

```
<%= select_tag :address_id, Customer.all.collect {|p| [ p.address_title, p.id ] } %> 
```

# javascript - 如何将选择值传递给另一个函数并根据传递的值从 Json 获取数据？

> ID：15545617
> 
> 赞同：1
> 
> 时间：2013-03-21T11:00:06.407
> 
> 标签：javascript, jquery, html, json, option

我正在编写 html 和 javascript 代码以从 Json 文件中获取一些数据。我的html代码：

```
 <div class="section">
    <div class="sectionTitle">
      <h3>Configuration</h3>
    </div>
     <select name="selectDistribution" class="span12" onchange="callDist("value");"  

 onfocus="this.selectedIndex = -1;">
      <option >Choose from distributions.</option>
      <option value="1">Uniform</option>
      <option value="2">Normal</option>
      <option value="3">Exponential</option>
      <option value="4">Geometric</option>
</select>
    <div id="parameters"></div>
    <div id="distributionParams"> </div>
    <button class="btn btn-large btn-block btn-primary" type="button">Send</button>
  </div> 
```

当用户选择一种分布时，参数必须显示在选择下方。例如，当用户选择均匀分布最小值和最大值必须附加在下面并且我想在文本框中显示第一个最小值标签及其值时，对于最大值，过程是相同的。

我的 callDist() 函数 function callDist(type) {

```
$.getJSON('Dist.json', function(type){
    var $container = $('#parameters').empty();

    $.each(type.distributions, function(i, distributions) {
      if(type==1){

          $.each(distributions.type, function(key, value) {
          $container.append(key + ': ' + value + '<br />');
      }
      //And so on...

    });

    $container.append('<hr />');
  }
  );

 });

 } 
```

我的 Dist.Json 文件如下：

```
 {
 "distributions":[
  {

     "name":"Uniform",
     "type":"1",
     "parameters":[{ "minValue":"2" , "maxValue":"4" }], 
  },
  {  "name":"Normal",
     "type":"2",
     "parameters":[{ "mean":"5" , "standartDeviation":"3" }],
  },
  {
     "name":"Exponential",
     "type":"3",
     "parameters":[{"lamda":"2"}],
  },
  {
     "name":"Geometric",
     "type":"4",
     "parameters":[{"probability":0.2}],
  }
]
} 
```

如何在用户选择其中一种分布后立即显示参数并在动态创建的标签和文本框中显示参数。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:35:37.703

试试这个代码...

```
function callDist(value)
    {
    $.getJSON('Dist.json', function(type){
        for(i in type.distributions)
         {
            if(type.distributions[i].name==value)
             {
               for( j in type.distributions[i].parameters)
                {  
                   for( k in type.distributions[i].parameters[j])
                   {
                   var val1=distributions[i].parameters[j][k];
                   var val2=distributions[i].parameters[j][k];
                    }

                }

             }

         }

    });
    } 
```

# c# - 如何使用 asp.net 调用 javascript 函数？

> ID：15545629
> 
> 赞同：2
> 
> 时间：2013-03-21T11:00:47.787
> 
> 标签：c#, javascript, asp.net

这就是我正在尝试的。调用内联js的函数。但我没有工作。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="javascript_Tutorials.WebForm1" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title>javaScript Tutorials</title>
        <script type="text/javascript" language="javascript">
            function objects() {
                alert("Well come");
            }
        </script>

    </head>
    <body>
        <form runat="server" id="myform">
        <asp:Button onclick="<% objects(); %>" runat="server"  />
        </form>

    </body>
    </html> 
```

并出现以下错误：

**CS1061：“ASP.webform1_aspx”不包含“对象”的定义，并且找不到接受“ASP.webform1_aspx”类型的第一个参数的扩展方法“对象”（您是否缺少 using 指令或程序集引用？）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:02:07.633

改为使用[Button.OnClientClick](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)`onclick`来注册客户端 javascript 事件并为按钮分配一些 id。`onclick`用于注册服务器端事件。

```
 <asp:Button  id="yourButtonID"  runat="server" OnClientClick="objects();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:02:21.463

试试这个>>

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>javaScript Tutorials</title>

</head>
<body>
    <form runat="server" id="myform">
    <asp:Button onclick="<% objects(); %>" runat="server"  />
    </form>

</body>
</html>
<script type="text/javascript" language="javascript">
            function objects() {
                alert("Well come");
            }
        </script> 
```

当上述代码不起作用时，最后粘贴脚本也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:17:42.313

```
Remove Parenthesis after function call

<asp:Button ID="Button1" OnClientClick="objects;" runat="server"  /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:04:37.007

您可以使用以下代码：-

```
<asp:Button ID="Button1" OnClientClick="return objects();" runat="server"  /> 
```

# c# - 如何使用cultureinfo删除千位分隔符？

> ID：15545638
> 
> 赞同：5
> 
> 时间：2013-03-21T11:01:08.203
> 
> 标签：c#, winforms, formatting, string-formatting, cultureinfo

我尝试删除千位分隔符，所以我正在尝试一些代码，但它会抛出异常。我试过了`Convert.ToDouble`，`Convert.ToDecimal`等等。

它说：

> Convert.ToDouble("1.234,45") 抛出和异常 'System.FormatException'

转换是从以下行抛出的：`Convert.ToDouble()`

该参数`n2`使用 culturinfo，但我也尝试了“0.00”两者都抛出相同的异常

整个想法是：如何删除千位分隔符，我的输入始终采用这种格式：1.234,54（逗号作为十进制，点作为千位分隔符）......我喜欢在 Textbox GotFocus Event 中使用它......所以格式应该显示为 12345,45

所以：1.254,45 应该是 1254,45 和 1.254,00 应该是 1254,00

```
 //http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx

CultureInfo ci = CultureInfo.GetCultureInfo("NL-be");
NumberFormatInfo nfi = (NumberFormatInfo)ci.NumberFormat.Clone();
//Now force thousand separator to be empty string
nfi.NumberGroupSeparator = "";
//Format decimal number to 2 decimal places
string decimalFormatted = Convert.ToDouble("1.234,45").ToString("0.00", nfi);
string decimalFormatted = Convert.ToDouble("1.234,45").ToString("n2", nfi); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:03:57.813

使用转换指定文化，它将像这样工作：

```
CultureInfo ci = CultureInfo.GetCultureInfo("NL-be");
double d = Convert.ToDouble("1.234,45", ci); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:04:07.663

`Convert.ToDouble`您根本不指定格式的调用。你需要记住这一点：

```
string decimalFormatted = Convert.ToDouble("1.234,45").ToString("n2", nfi); 
```

相当于：

```
double tmp = string decimalFormatted = Convert.ToDouble("1.234,45");
string decimalFormatted = tmp.ToString("n2", nfi); 
```

失败的是第一行，而不是第二行……在第一行中，它将使用当前的线程文化。

我建议您`Double.Parse`改用，并在那里指定格式。（您可以`Convert.ToDouble`改用，但我通常更喜欢特定于类型的`Double.Parse`etc 调用。这意味着如果您移至 etc 则更改更少`TryParse`。）

如果确切的数字很重要，您*还*应该考虑使用`decimal`而不是。`double`例如，如果这是一个货币值，它在逻辑上更像是一个`decimal`数字而不是一个`double`数字。

# ruby - 无法使用 ruby 2.0.0 安装 ruby gems

> ID：15545639
> 
> 赞同：8
> 
> 时间：2013-03-21T11:01:08.680
> 
> 标签：ruby, macos, rubygems, zlib

我一直在尝试安装 ruby​​gems 几个小时，但它一直失败。错误是：

```
Installing rubygems-2.0.3 for ruby-2.0.0-p0..............................................................................................................................
Error running 'env GEM_PATH=/Users/Chris/.rvm/gems/ruby-2.0.0-p0:/Users/Chris/.rvm/gems/ruby-2.0.0-p0@global:/Users/Chris/.rvm/gems/ruby-2.0.0-p0:/Users/Chris/.rvm/gems/ruby-2.0.0-p0@global 
GEM_HOME=/Users/Chris/.rvm/gems/ruby-2.0.0-p0 /Users/Chris/.rvm/rubies/ruby-2.0.0-p0/bin/ruby -d /Users/Chris/.rvm/src/rubygems-2.0.3/setup.rb --verbose',
please read /Users/Chris/.rvm/log/ruby-2.0.0-p0/rubygems.install.log 
```

（对不起，如果这很难阅读，我不确定如何分解它。）

rubygems.install.log：

前几行：

```
[2013-03-21 06:55:13] /Users/Chris/.rvm/rubies/ruby-2.0.0-p0/bin/ruby
Exception `LoadError' at /Users/Chris/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/rubygems.rb:1073 - cannot load such file -- rubygems/defaults/operating_system
Exception `LoadError' at /Users/Chris/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/rubygems.rb:1082 - cannot load such file -- rubygems/defaults/ruby
mkdir -p /Users/Chris/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0
mkdir -p /Users/Chris/.rvm/rubies/ruby-2.0.0-p0/bin 
```

完整文件：[Pastebin](http://pastebin.com/NUnLyTVF)

我已经尝试重新安装 Xcode，确保我已经安装了 xcode 命令行工具、Rvm、ruby 2.0.0，几乎所有东西。我还尝试删除所有其他 ruby​​ 版本，但 rvm 要求并没有告诉我我需要任何我没有的东西。

有谁知道这可能是什么原因造成的？

编辑：另外，我刚刚设法用 ruby​​gems 1.9.3 重新安装了 1.9.3，绝对没问题。

EDIT2：好的，现在我收到错误：

```
/Users/Chris/.rvm/src/rubygems-2.0.0/lib/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- zlib (LoadError) 
```

在日志中。

编辑 3：运行 rvm 要求，我还没有。尝试安装 zlib 会给我配置和制作错误。

配置：

```
unknown option: --disable-shared 
```

制作：

```
make: *** No rule to make target `install'.  Stop. 
```

尝试手动配置和制作（没有禁用共享标志）会删除配置问题，但会留下制作问题。

编辑4：

所以在尝试了几种不同的东西之后，它突然起作用了。我决定最后一次尝试 rvm，一切正常。我会发布我所做的，但我真的不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:42:56.777

参考这个问题[Troubles with ruby​​-2.X installation using RVM](https://stackoverflow.com/questions/15232076/troubles-with-ruby-2-0-0-p0-installation-using-rvm/15233923#15233923)

差不多

```
$ rvm remove 2.0.0 # get rid of unsuccessful installation
$ rvm get head --autolibs=3 # get the latest RVM and build required libs
$ rvm requirements # just in case, install all other required stuff
$ rvm install ruby-2.0.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:35:41.790

我认为您在安装 ruby​​ 类型时缺少一些库

```
rvm requirements 
```

并查看您缺少哪些库并安装相同的库，特别是安装 zlib pkg 并且您还需要重新安装 ruby

```
rvm pkg install zlib
rvm reinstall ruby 
```

我正在使用 ubuntu，所以我可以像这样安装库

```
sudo apt-get install zlib1g-dev
rvm reinstall ruby 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:27:01.790

我试过了

```
$ rvm remove 2.0.0 # get rid of unsuccessful installation
$ rvm get head --autolibs=3 # get the latest RVM and build required libs
$ rvm requirements # just in case, install all other required stuff
$ rvm install ruby-2.0.0 
```

但它没有用。Ruby 2.0.0 似乎安装成功。

我打开一个新终端，然后

```
rvm use 2.0.0
rvm rubygems latest 
```

有用。希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-03T09:44:14.460

当您使用 ruby​​ -d 运行时，这是预期的输出。它没有任何问题。

# javascript - 在 Fancybox 敲除后重新应用绑定

> ID：15545641
> 
> 赞同：1
> 
> 时间：2013-03-21T11:01:16.603
> 
> 标签：javascript, html, knockout.js, fancybox-2, durandal

我正在尝试实现这样的结果，即当用户单击链接时，会打开一个带有 html 的内联花式框。当用户输入一个值并点击输入时，它应该更新（淘汰）我的视图模型，并且花哨的盒子应该面向一个方向。

到目前为止，这是我的代码，我知道我需要重新应用 mybindings 但不知道如何。

HTML：

```
<div style="display:none">
        <div id="inlineManufacturerAdder">
            <div style="width:1000px;">
                <!-- In deze div alle content -->
                <h2>Add new Manufacturer2</h2>
                <p>

                    <form data-bind="submit: vm.addManufacturer">
                        <input type="text" data-bind="value: vm.newManufacturer, valueUpdate: 'afterkeydown'" placeholder="New Manufacturer">
                    </form>
                </p>
            </div>
        </div>
    </div> 
```

Javascript（打字稿）：

```
export function viewAttached() {
    $("a.fancybox-link-add-manufacturer").click(function (e) {
        $.fancybox({
            content: $('#inlineManufacturerAdder').html(), //this is where it goes wrong, it gets the content and forgets the bindings I guess!
            type: 'html'
        });
        return false;
    });
} 
```

如果我以正常方式使用 div（设置为 display:none），那么没有fancybox，一切正常。

我应该怎么办？我正在使用杜兰达尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:20:09.620

您不需要重新应用绑定。只是不要传入innerHTML 内容，而是将元素节点（或jquery 实例）传入花哨的盒子。

例如：而不是：

`content: $('#inlineManufacturerAdder').html()`

做就是了：

`content: $('#inlineManufacturerAdder')`

[更新]

或者这些行很长的东西：

```
<a href="#inlineManufacturerAdder" class="fancybox-link-add-manufacturer" >Click me</a>
<div id="inlineManufacturerAdder" data-bind="html: msg"></div>

<script>
$(".fancybox-link-add-manufacturer").fancybox();
</script> 
```

这里的例子：http: [//jsfiddle.net/r83XF/2/](http://jsfiddle.net/r83XF/2/)

# android - BCGTAD v3.6的源码兼容吗？

> ID：15545647
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:01:30.943
> 
> 标签：android, commonsware

我刚刚开始学习 Android 应用程序开发，发现“Busy Coder's Guide to Android Development”非常适合我。

我正在阅读本书的v3.6。但是我在网站上提到的 github 存储库上找不到与该书兼容的源代码。

代码是否托管在其他地方？任何人都可以分享源代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:30:02.277

[您可以在`cw-android`GitHub 存储库](https://github.com/commonsguy/cw-android)中找到旧版本（3.7 和更早版本）的源代码。

# three.js - 我可以在粒子系统上使用着色器材质吗？

> ID：15545651
> 
> 赞同：0
> 
> 时间：2013-03-21T11:01:41.573
> 
> 标签：three.js, shader, fragment-shader, particle-system

我想要完成的是将不同的像素数据作为每个粒子的材质，这是我的思路：将画布设置为 PlaneGeometry 的纹理，通过片段着色器从 PlaneGeometry 获取像素数据块并放置不同的块通过粒子系统的片段着色器我想要的任何粒子的像素数据，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:29:22.843

是的，您可以将自定义`THREE.ShaderMaterial`与`THREE.ParticleSystem`s 一起使用。另外值得注意的是，如果你只是想用一个画布作为纹理，你不需要经过`PlaneGeometry`.

# fortran90 - 将变量读入打开的文件

> ID：15545656
> 
> 赞同：0
> 
> 时间：2013-03-21T11:01:54.427
> 
> 标签：fortran90

嘿，我对 Fortran 和堆栈溢出非常陌生.. 我想使用 fortran 进行分配，但我遇到了运行时错误.. 任何帮助将不胜感激

我正在尝试将两个变量读取到我打开的文件中。这是我的教授给我的示例代码，但它显示了运行时错误。请帮忙

```
 subroutine input_data
    implicit none
    real*8 a, b
    open(unit = 5, file = 'inputdata.dat', status = 'unknown')
    read(5,*) a,b
    close(5)
    return 
    end 
```

它在读取行显示运行时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:07:18.087

我假设您正在*从*文件中读取。如果是这样，您在公开声明中的状态不是未知，而是“旧”。如：

```
open(unit = 5, file = 'inputdata.dat', status = 'old') 
```

如果文件不存在，状态“未知”将创建该文件，然后尝试从中读取。但是，由于它是刚刚创建的，因此该文件中没有任何内容，因此您会收到错误消息。

状态“旧”会给你一个运行时错误，说明文件不存在，如果文件...不存在:)

# c# - 在代码中更改 reportviewer 值

> ID：15545658
> 
> 赞同：0
> 
> 时间：2013-03-21T11:02:04.080
> 
> 标签：c#, asp.net, reporting-services, reportviewer

我的数据库中存储了一个整数值，表示文档状态。

我想写一份报告，在其中一列中显示状态。

但是，我不想在列中显示原始整数值。我想显示一个将状态转换为人类可读格式的字符串。

例如：

```
1 -> New
2 -> Pending
3 -> Sent 
```

这感觉它需要的不仅仅是一个表达式 - 即：C# 代码。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:07:51.750

您还可以通过在用于选择的查询中使用 CASE 来解决问题。

```
SELECT 
CASE 
  WHEN Status = 1 THEN 'New'
  WHEN Status = 2 THEN 'Pending'
  WHEN Status = 3 THEN 'Sent'
END as "StatusStr"
FROM
...
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:32:05.257

如果您将整数参数传递给报表查看器，并且您想将其转换为某个“字符串”，您可以为列分配表达式，例如

```
=IIF(Fields!Status.Value = 1, "New", IIF(Fields!Status.Value = 2, "Pending", "Sent")) 
```

# sql-server - SQL Server 实例和数据库选择哪种排序规则？

> ID：15545662
> 
> 赞同：1
> 
> 时间：2013-03-21T11:02:21.387
> 
> 标签：sql-server, sql-server-2008-r2

我正在开发基于数据库 SQL Server 2008 R2 的 Windows 应用程序。此应用程序目前出售给比利时的公司，这些公司使用四种语言：英语、法语、荷兰语、德语。很快，该应用程序将销往欧洲其他国家，随后将销往美国。

以下是我问自己的问题：

*   对于 SQL Server 实例（按国家/地区）：

    *   选择哪种语言？
    *   我们是否应该在区分大小写和数据库的其他重音上做出相同的选择？
    *   必须有二进制排序规则？
    *   对临时治疗 (tempdb) 的影响 ?
*   对于数据库

    *   选择哪种语言？
    *   是否应该考虑与 Windows 客户端应用程序一起使用的语言环境？
*   用于开发环境和配方

    *   如何通过管理所有国家来开发和测试应用程序？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:10:07.837

在 SQL 中使用外语或多种语言时，我建议将排序规则设置为 CI_AI_SI 以防止与字符/字符串字段相关的任何特殊字符问题（即连接、强制转换等）。因此，语言也应该是 Unicode。考虑到您可能遇到的所有各种场景，这是一个包罗万象的场景。

我可能还建议使用 nvarchar 而不是标准 varchar 进行编程。是的，数据大小增加了一倍，但它应该有助于减轻您在存储过程中可能遇到的奇怪转换。

# javascript - 通过变量创建元素数量 - 而不是通过数组

> ID：15545665
> 
> 赞同：0
> 
> 时间：2013-03-21T11:02:25.423
> 
> 标签：javascript, knockout.js

我试图通过一个可观察的而不是通过数组来复制图像元素（代表正确/错误的答案）。可以这样做吗？（见 XXXXXXXXX 中标记的位置）。answerCorrect 和 answerfailed 在别处更新。

JS：

```
var singlePhase=function (phaseNo,questionsTotal)
{
    var self=this;
    self.phaseNo=phaseNo;
    self.answersTotal=questionsTotal;
    self.answerCorrect=ko.observable(0);
    self.answerfailed=ko.observable(0);
}

var QuestionViewModel = function () {
    var self = this;
    var tmpArrPhases = new Array(); 
    tmpArrPhases.push(new singlePhase(1,2));
    tmpArrPhases.push(new singlePhase(2,2));
    tmpArrPhases.push(new singlePhase(3,3));
    self.allPhases(tmpArrPhases);
} 
```

在 HTML 我想做的事：

```
 <div data-bind="foreach: allPhases">
            <div class="progress_bar_bottom_mustry" data-bind="foreach:XXXXXXXXX">
                <img src="images/correct.png" data-bind="visible:true">
                <img src="images/wrong.png" data-bind="visible:true">
            </div>
        </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:30:09.023

`foreach`您可以在绑定中创建一个空数组：

```
<div data-bind="foreach: allPhases">
    <div class="progress_bar_bottom_mustry" data-bind="foreach:new Array(YourObservalbe())">
        <img src="images/correct.png" data-bind="visible:true">
        <img src="images/wrong.png" data-bind="visible:true">
    </div>
</div> 
```

这是一个例子：http: [//jsfiddle.net/7UDfM/](http://jsfiddle.net/7UDfM/)

# css - 使用数据库值 MVC 3 更改背景

> ID：15545671
> 
> 赞同：0
> 
> 时间：2013-03-21T11:02:36.533
> 
> 标签：css, asp.net-mvc, master-pages

我正在使用 MVC 3 ASP.Net 创建一个网站。我想知道如何更改在我的主布局页面中设置的 div 标签的背景颜色。这将根据我的数据库值而改变。

一个例子是：首先在我的控制器中获取数据库值，然后在视图页面中呈现它。颜色在单独的 css 文件中设置。

有人对我如何做到这一点有任何想法或例子吗？

谢谢，拉詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:04:57.510

您可以通过css更改点击事件的颜色

```
.product:focus{
background:#ddd;

} 
```

或通过 jQuery

```
$(this).css("background","#ddd"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:50:54.773

**控制器动作**

您可以将属性设置为`ViewBag`数据库中的颜色。

```
ViewBag.DivColour = "redClass"; 
```

**看法**

然后在您的视图中使用该属性。

```
<div class="@ViewBag.DivColour">I'm coloured!</div> 
```

**CSS**

假设您的 CSS 中有一些内容，例如：

```
.redClass {
    background-color:red;
} 
```

# sql-server - 更快的方法来限制 sql server 中范围之间的记录

> ID：15545673
> 
> 赞同：2
> 
> 时间：2013-03-21T11:02:40.877
> 
> 标签：sql-server, sql-server-2008-r2, sql-limit, large-data

我的表中有大量记录，我希望在限制之间逐页记录，但为此我们只有一个解决方案

```
WITH data AS
(
    SELECT
        ID
       ,YourColumn
       ,ROW_NUMBER() OVER (ORDER BY ID) AS RowNum
    FROM
        YourTable
)
SELECT 
    *
FROM
    data
WHERE
    RowNum BETWEEN 5 AND 10 
```

但是为此我们需要一个外部查询，这将命中表两次，就像在 mysql 中一样，我们可以执行以下操作

```
select * from employee limit 2,4 
```

那么有什么方法可以通过单次点击获得范围之间的记录。bcoz 如果这是我们永远无法在 MSSQL 中获得更快的查询结果的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:59:41.860

虽然 SQL Server 版本之间的语法可能会发生变化，但它不会消除最初的性能问题。即使使用 SQL Server 2012 语法，如果您想要从表末尾开始的页面，也必须扫描整个表（或索引取决于排序顺序），这是非常低效的。

如果我假设表中关于您的页面的数据顺序不会经常更改，您可以构建自己的“页面索引”表。包含“页码”、“开始 ID”和“结束 ID”列的表。这样，您可以非常快速地获取给定页面的 id 范围。

现在当然你有维护那个索引表的问题。如果页面基于您的聚集索引并且该索引是自动标识，则您只需要关心删除。如果您没有 DELETE，那就更好了。如果您只删除块（通过存储过程）或分区，您可以在这些时候重建页面索引。如果您有单个删除，则需要编写删除触发器。

如果需要，这样的帮助表甚至可以帮助您处理可变页面大小。只需取一些任意页面大小（如 100）并使用该表来额外限制页面查询中的查询范围。您所需要的只是行 ID 和它在表中的位置之间的静态映射，用于多行。

编辑：当然你也必须关心插入。最好的办法是保留最后一页中有多少记录的计数器，并在超出页面限制时生成新的页面条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:22:54.993

您拥有的是 SQL Server 2008 中最好的

这是另一种方式：

```
--skip first 5 records and display next 5 records
SELECT TOP 5 * FROM data 
WHERE ID
NOT IN(SELECT TOP 5 ID FROM data ORDER BY ID) 
ORDER BY ID 
```

如果您有`Microsoft SQL Server 2012`：

```
SELECT * FROM TableName 
ORDER BY id 
OFFSET 10 ROWS 
FETCH NEXT 10 ROWS ONLY; 
```

offset -> # 跳过的行数

下一个 -> 必需的 # 下一行

# java - 在 Java RCP 应用程序中将文本更改为超链接

> ID：15545678
> 
> 赞同：0
> 
> 时间：2013-03-21T11:02:50.190
> 
> 标签：java, swt, eclipse-rcp, rcp

我的应用程序使用 Java RCP。在文本区域，我有很多段落文本。我想将其中一段更改为超链接。

当我使用这段代码时：

```
Link link = new Link (<parent composite>, SWT.UNDERLINE_LINK); 
```

创建的超链接位于父复合窗口下的新窗格中。

我希望同一复合窗口中的文本更改为超链接。

关于可以做些什么的任何建议？

# python - Django模型保存问题

> ID：15545680
> 
> 赞同：1
> 
> 时间：2013-03-21T11:02:51.137
> 
> 标签：python, django, model, save

我会在这里澄清我的情况。我有一些模型：

```
class Messages(models.Model):
    message_idnr = models.BigIntegerField(primary_key=True)
    mailbox_idnr = models.ForeignKey(Mailboxes, null=True, db_column='mailbox_idnr', blank=True)
    physmessage = models.ForeignKey(Physmessage, null=True, blank=True)

    def __unicode__(self):
        return '%s'%(self.physmessage)
    class Meta:
        db_table = u'messages'

class Mailboxes(models.Model):
    mailbox_idnr = models.BigIntegerField(primary_key=True)
    owner_idnr = models.ForeignKey(Users, null=True, db_column='owner_idnr', blank=True)
    name = models.CharField(max_length=255)
    permission = models.SmallIntegerField(default =2)
    seq = models.BigIntegerField(default = 0)
    class Meta:
        db_table = u'mailboxes'

class Users(models.Model):
    user_idnr = models.BigIntegerField(primary_key=True)
    userid = models.CharField(max_length=100, unique=True)
    passwd = models.CharField(max_length=130)
    last_login = models.DateTimeField()
    def __unicode__(self):
        return '%s'%(self.userid)

    class Meta:
        db_table = u'users'

class Physmessage(models.Model):
    id = models.BigIntegerField(primary_key=True)
    messagesize = models.BigIntegerField()
    rfcsize = models.BigIntegerField()
    internal_date = models.DateTimeField(null=True, blank=True)
    def __unicode__(self):
        return '%s'%(self.id)
    class Meta:
        db_table = u'physmessage' 
```

然后，我有一个views.py调用这个函数

```
def dbmail_move_email_to_dir(mailbox,maildir,mailvalue,destination):
    db_user = Users.objects.get(userid = mailbox.email)
    if maildir.lower() == 'inbox':
        db_source_dir = Mailboxes.objects.get(Q(owner_idnr = db_user),Q(name = 'INBOX'))
    else:
        db_source_dir = Mailboxes.objects.get(Q(owner_idnr = db_user),Q(name = 'INBOX.%s'%maildir))
    db_des_dir = Mailboxes.objects.get(Q(owner_idnr = db_user),Q(name = 'INBOX.%s'%destination))
    for value in mailvalue:
        print 'physical value of email %s'%value
        print 'from maildir id %s'%db_source_dir.mailbox_idnr
        print 'to maildir id %s'%db_des_dir.mailbox_idnr
        print Physmessage.objects.get(id = value)
        print len(Messages.objects.filter(physmessage = Physmessage.objects.get(id = value)))
        for row in Messages.objects.filter(physmessage = Physmessage.objects.get(id = value)):
            print 'delete each row %s'%row
            print 'current mailbox %s'%row.mailbox_idnr.mailbox_idnr
            row.mailbox_idnr=db_des_dir
            print 'current mailbox %s'%row.mailbox_idnr.mailbox_idnr
            row.save()
            print 'current mailbox %s'%row.mailbox_idnr.mailbox_idnr

    return True 
```

当我从测试文件运行这个函数时，我得到类似的结果

```
physical value of email 15
from maildir id 128
to maildir id 126
15
1
delete each row 15
current mailbox 128
current mailbox 126
current mailbox 126 
```

它会将mailbox_idnr 更改为新值，我在postgres 数据库中看到它。但是当我在视图中调用这个函数时，登录打印是一样的，但是mailbox_idnr没有改变。

```
physical value of email 46
from maildir id 125
to maildir id 128
46
1
delete each row 46
current mailbox 125
current mailbox 128
current mailbox 128 
```

希望每个人都可以建议修复它。我有登录管理员，也可以更改它。但在我看来，我无法改变它。也删不掉。

谢谢，

# authentication - Symfony 2 自定义身份验证提供程序用户 ID 为 0（零）

> ID：15545682
> 
> 赞同：2
> 
> 时间：2013-03-21T11:02:54.817
> 
> 标签：authentication, symfony, provider, hybridauth

我已经为 HybridAuth 2 库编写了自己的 Symfony 2 身份验证提供程序，并且身份验证过程工作得很好，但是在用户成功通过身份验证后，页面刷新并且当在用户提供程序中调用 refreshUser() 时 getId() 方法返回0（零）。如果我将 var_dump($user) 放在 refreshUser() 方法的开头，它会显示经过身份验证的用户对象，其中 id 参数设置为 1（不是零！！），但 getId() 方法仍然返回零。在我的 ORM 实体对象中，用户 getId 方法返回 $this->id。

如果我使用任何其他提供程序，它就可以正常工作，只有使用这个我才能将用户 ID 设为零。

如果我尝试在身份验证提供程序中使用 var_dump($user->getId())，就在它返回令牌之前，它会将用户 ID 显示为 1。

我不知道可能出了什么问题...

@edit：这是代码：

用户提供程序，它从数据库加载用户（来自 tabe "user_provider"）。它与用户具有 OneToOne 关系，并使用 getUser() 方法返回用户对象：

```
/**
 * {@inheritdoc}
 */
public function loadUserByHybridAuthUserResponse($providerId, $providedId)
{
    $userProvider = $this->userProviderManager->findOneByProvidedId($providerId, $providedId);

    if (null === $userProvider) {
        throw new AccountNotLinkedException(
            sprintf('Your %s account is not linked to any account.', ucfirst($providerId))
        );
    }

    $user = $userProvider->getUser();

    return $user;
} 
```

身份验证提供者：

```
/**
 * {@inheritDoc}
 */
public function authenticate(TokenInterface $token)
{
    if (! $this->supports($token)) {
        return null;
    }

    $provider = $token->getProviderAdapter();
    $userId   = $token->getUser();

    try {
        $user = $this->userProvider->loadUserByHybridAuthUserResponse($provider, $userId);
    } catch (AccountNotLinkedException $e) {
        $e->setProviderAdapter($token->getProviderAdapter());
        throw $e;
    }

    // Try to authenticate user
    $authenticatedToken = new HybridAuthToken($provider, $user, $user->getRoles());

    $this->userChecker->checkPostAuth($user);

    return $authenticatedToken;
} 
```

身份验证令牌：

```
/**
 * HybridAuth authentication token.
 */
class HybridAuthToken extends AbstractToken
{
/**
 * @var string
 */
private $providerAdapter;

/**
 * Constructor.
 * 
 * @param string $providerAdapter The HybridAuth provider adapter name
 * @param string $user            The provided user identifier, or a UserInterface instance
 *                                or an object implementing a __toString method.
 * @param array  $roles           An array of roles
 */
public function __construct($providerAdapter, $user, array $roles = array())
{
    parent::__construct($roles);

    $this->providerAdapter = $providerAdapter;

    $this->setUser($user);

    parent::setAuthenticated(count($roles) > 0);
}

/**
 * {@inheritDoc}
 */
public function getCredentials()
{
    return '';
}

/**
 * Return the HybridAuth provider adapter name.
 * 
 * @return string
 */
public function getProviderAdapter()
{
    return $this->providerAdapter;
}

/**
 * {@inheritDoc}
 */
public function serialize()
{
    return serialize(array(
        $this->providerAdapter,
        parent::serialize()
    ));
}

/**
 * {@inheritDoc}
 */
public function unserialize($serialized)
{
    list(
        $this->providerAdapter,
        $parent,
    ) = unserialize($serialized);

    parent::unserialize($parent);
} 
```

}

用户提供者实体（“user_provider”mysql 表）：

```
/**
 * @ORM\Entity
 * @ORM\Table("user_provider")
 */
class UserProvider implements UserProviderInterface
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 * 
 * @access protected
 * @var    integer
 */
protected $id;

/**
 * @ORM\OneToOne(targetEntity="Security\UserBundle\Entity\User")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 * 
 * @access protected
 * @var    UserInterface
 */
protected $user;

/**
 * @ORM\Column(type="string", length=50, name="provider_id")
 * 
 * @access protected
 * @var    integer
 */
protected $providerId;

/**
 * @ORM\Column(type="string", length=255, name="provided_id")
 * 
 * @access protected
 * @var    integer
 */
protected $providedId;

/**
 * {@inheritDoc}
 */
public function getId()
{
    return $this->id;
}

/**
 * {@inheritDoc}
 */
public function getUser()
{
    return $this->user;
}

/**
 * {@inheritDoc}
 */
public function setUser(UserInterface $user)
{
    $this->user = $user;
    return $this;
}

/**
 * {@inheritDoc}
 */
public function getProviderId()
{
    return $this->providerId;
}

/**
 * {@inheritDoc}
 */
public function setProviderId($providerId)
{
    $this->providerId = $providerId;
    return $this;
}

/**
 * {@inheritDoc}
 */
public function getProvidedId()
{
    return $this->providedId;
}

/**
 * {@inheritDoc}
 */
public function setProvidedId($providedId)
{
    $this->providedId = $providedId;
    return $this;
} 
```

}

用户实体（“用户”mysql表）：

```
/**
 * @ORM\Entity
 * @ORM\Table("user")
 */
class User implements UserInterface
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 * 
 * @access protected
 * @var    integer
 */
protected $id;

/**
 * @ORM\Column(type="string", length=255)
 * 
 * @access protected
 * @var    string
 */
protected $email;

/**
 * @ORM\Column(name="email_canonical", type="string", length=255, unique=true)
 * 
 * @access protected
 * @var    string
 */
protected $emailCanonical;

/**
 * @access protected
 * @var    string
 */
protected $plainPassword;

/**
 * @ORM\Column(type="string", length=255, nullable=true)
 * 
 * @access protected
 * @var    string
 */
protected $password;

/**
 * @ORM\Column(name="first_name", type="string", length=64)
 * 
 * @access protected
 * @var    string
 */
protected $firstName;

/**
 * @ORM\Column(name="last_name", type="string", length=64)
 * 
 * @access protected
 * @var    string
 */
protected $lastName;

/**
 * @ORM\Column(name="created_at", type="datetime")
 * 
 * @access protected
 * @var    DateTime
 */
protected $createdAt;

/**
 * @ORM\Column(name="last_login", type="datetime", nullable=true)
 * 
 * @access protected
 * @var    DateTime
 */
protected $lastLogin;

/**
 * @ORM\Column(name="confirmation_token", type="string", length=255, nullable=true)
 * 
 * @access protected
 * @var    string
 */
protected $confirmationToken;

/**
 * @ORM\Column(name="password_requested_at", type="datetime", nullable=true)
 * 
 * @access protected
 * @var    DateTime
 */
protected $passwordRequestedAt;

/**
 * @ORM\Column(type="boolean")
 * 
 * @access protected
 * @var    boolean
 */
protected $enabled;

/**
 * @ORM\Column(type="boolean")
 * 
 * @access protected
 * @var    boolean
 */
protected $locked;

/**
 * @ORM\Column(type="boolean")
 * 
 * @access protected
 * @var    boolean
 */
protected $expired;

/**
 * @ORM\Column(name="expires_at", type="datetime", nullable=true)
 * 
 * @access protected
 * @var    DateTime
 */
protected $expiresAt;

/**
 * @ORM\Column(name="credentials_expired", type="boolean")
 * 
 * @access protected
 * @var    boolean
 */
protected $credentialsExpired;

/**
 * @ORM\Column(name="credentials_expire_at", type="datetime", nullable=true)
 * 
 * @access protected
 * @var    DateTime
 */
protected $credentialsExpireAt;

/**
 * @ORM\Column(type="array")
 * 
 * @access protected
 * @var    array
 */
protected $roles;

/**
 * Constructor
 */
public function __construct()
{
    $this->createdAt          = new DateTime();
    $this->enabled            = true;
    $this->locked             = false;
    $this->expired            = false;
    $this->credentialsExpired = false;
    $this->roles              = array();
}

/**
 * Return the primary identifier.
 * 
 * @return integer
 */
public function getId()
{
    return $this->id;
}

/**
 * Return the username.
 * 
 * @return string
 */
public function getUsername()
{
    return $this->getEmail();
}

/**
 * Return the email address.
 * 
 * @return string
 */
public function getEmail()
{
    return $this->email;
}

/**
 * Set the email address.
 * 
 * @param  string $email
 * @return User
 */
public function setEmail($email)
{
    $this->email = $email;
    return $this;
}

/**
 * Return the canonical email address in search and sort queries.
 * 
 * @return string
 */
public function getEmailCanonical()
{
    return $this->email;
}

/**
 * Set the canonical email address in search and sort queries.
 * 
 * @param  string $emailCanonical
 * @return User
 */
public function setEmailCanonical($emailCanonical)
{
    $this->emailCanonical = $emailCanonical;
    return $this;
}

/**
 * Returns the plain password.
 * 
 * @return string
 */
public function getPlainPassword()
{
    return $this->plainPassword;
}

/**
 * Sets the plain password.
 * 
 * @param  string $plainPassword
 * @return self
 */
public function setPlainPassword($plainPassword)
{
    $this->plainPassword = $plainPassword;
    return $this;
}

/**
 * Returns the password.
 * 
 * @return string
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Sets the password.
 * 
 * @param  string $password
 * @return self
 */
public function setPassword($password)
{
    $this->password = $password;
    return $this;
}

/**
 * Erases the credentials.
 * 
 * @return null
 */
public function eraseCredentials()
{
    $this->plainPassword = null;
    return $this;
}

/**
 * Returns the salt.
 * 
 * @return null
 */
public function getSalt()
{
    return null;
}

/**
 * Returns the first name.
 * 
 * @return string
 */
public function getFirstName()
{
    return $this->firstName;
}

/**
 * Sets the first name.
 * 
 * @param  string $firstName
 * @return self
 */
public function setFirstName($firstName)
{
    $this->firstName = $firstName;
    return $this;
}

/**
 * Returns the last name.
 * 
 * @return string
 */
public function getLastName()
{
    return $this->lastName;
}

/**
 * Sets the last name.
 * 
 * @param  string $lastName
 * @return self
 */
public function setLastName($lastName)
{
    $this->lastName = $lastName;
    return $this;
}

/**
 * Retruns created at time.
 * 
 * @return DateTime
 */
public function getCreatedAt()
{
    if (! $this->createdAt) {
        $this->setCreatedAt(new DateTime);
    }
    return $this->createdAt;
}

/**
 * Sets created at time.
 * 
 * @param  DateTime $createdAt
 * @return self
 */
public function setCreatedAt(DateTime $createdAt)
{
    $this->createdAt = $createdAt;
    return $this;
}

/**
 * Returns the last login time.
 * 
 * @return DateTime
 */
public function getLastLogin()
{
    return $this->lastLogin;
}

/**
 * Sets the last login time.
 * 
 * @param  DateTime $lastLogin
 * @return self
 */
public function setLastLogin(DateTime $lastLogin)
{
    $this->lastLogin = $lastLogin;
    return $this;
}

/**
 * Returns the confirmation token.
 * 
 * @return string
 */
public function getConfirmationToken()
{
    return $this->confirmationToken;
}

/**
 * Sets the confirmation token.
 * 
 * @param  string $confirmationToken
 * @return self
 */
public function setConfirmationToken($confirmationToken)
{
    $this->confirmationToken = $confirmationToken;
    return $this;
}

/**
 * Return the password request at time.
 * 
 * @return  DateTime
 */
public function getPasswordRequestedAt()
{
    return $this->passwordRequestedAt;
}

/**
 * Sets the password requested at time.
 * 
 * @param  DateTime $passwordRequestedAt
 * @return self
 */
public function setPasswordRequestedAt(DateTime $passwordRequestedAt)
{
    $this->passwordRequestedAt = $passwordRequestedAt;
    return $this;
}

/**
 * Checks whether the user is enabled.
 * 
 * @return boolean
 */
public function isEnabled()
{
    return $this->enabled;
}

/**
 * Sets the enabled status of the user.
 * 
 * @param  boolean $enabled
 * @return self
 */
public function setEnabled($enabled)
{
    $this->enabled = $enabled;
    return $this;
}

/**
 * Checks whether the user is locked.
 * 
 * @return boolean
 */
public function isLocked()
{
    return ! $this->isAccountNonLocked();
}

/**
 * Checks whether the user is locked.
 * 
 * @return boolean
 */
public function isAccountNonLocked()
{
    return ! $this->locked;
}

/**
 * Sets the locked status of the user.
 * 
 * @param  boolean $locked
 * @return self
 */
public function setLocked($locked)
{
    $this->locked = $locked;
    return $this;
}

/**
 * Checks whether the user is expired.
 * 
 * @return boolean
 */
public function isExpired()
{
    return ! $this->isAccountNonExpired();
}

/**
 * Checks whether the user is expired.
 * 
 * @return boolean
 */
public function isAccountNonExpired()
{
    if (true === $this->expired) {
        return false;
    }

    if (null !== $this->expiresAt && $this->expiresAt->getTimestamp() < time()) {
        return false;
    }

    return true;
}

/**
 * Sets the expired status of the user.
 * 
 * @param  boolean $expired
 * @return self
 */
public function setAccountExpired($expired)
{
    $this->expired = $expired;
    return $this;
}

/**
 * Returns the expired at time.
 * 
 * @return DateTime
 */
public function getExpiredAt()
{
    return $this->expiresAt;
}

/**
 * Sets the expired at time.
 * 
 * @param  DateTime $expiresAt
 * @return self
 */
public function setExpiredAt($expiresAt)
{
    $this->expiresAt = $expiresAt;
    return $this;
}

/**
 * Check whether the user's credentials (password) has expired.
 * 
 * @return boolean
 */
public function isCredentialsExpired()
{
    return ! $this->isCredentialsNonExpired();
}

/**
 * Check whether the user's credentials (password) has expired.
 * 
 * @return boolean
 */
public function isCredentialsNonExpired()
{
    if (true === $this->credentialsExpired) {
        return false;
    }

    if (null !== $this->credentialsExpireAt && $this->credentialsExpireAt->getTimestamp() < time()) {
        return false;
    }

    return true;
}

/**
 * Set the user's credentials (password) expired status.
 * 
 * @param  boolean $credentialsExpired
 * @return self
 */
public function setCredentialsExpired($credentialsExpired)
{
    $this->credentialsExpired = $credentialsExpired;
}

/**
 * Return the credentials expired at time.
 * 
 * @return DateTime
 */
public function getCredentialsExpiredAt()
{
    return $this->credentialsExpireAt;
}

/**
 * Set the credentials expired at time.
 * 
 * @param  DateTime $credetialsExpiredAt
 * @return User
 */
public function setCredentialsExpiredAt($credentialsExpiredAt)
{
    $this->credentialsExpiredAt = $credentialsExpiredAt;
    return $this;
}

/**
 * Return list fo roles.
 * 
 * @return array
 */
public function getRoles()
{
    $roles = array_merge($this->roles, array('ROLE_USER'));

    /*foreach ($this->getGroups() as $group)
    {
        $roles = array_merge($roles, $group->getRoles());
    }*/

    return array_unique($roles);
}

/**
 * Compares this user to another to determine if they are the same.
 * 
 * @todo: Maybe we should refresh user in listener, to prevent logout after making changes?
 * 
 * @param  UserInterface $user
 * @return boolean True if equal, False otherwise.
 */
public function isEqualTo(SymfonyUserInterface $user)
{
    return
        md5($user->getUsername()) == md5($this->getUsername()) &&
        md5(serialize($user->getRoles())) == md5(serialize($this->getRoles()));
}

/**
 * @see \Serializable::serialize()
 */
public function serialize()
{
    return serialize(array(
        $this->id,
        $this->email,
        $this->emailCanonical,
        $this->plainPassword,
        $this->password,
        $this->firstName,
        $this->lastName,
        $this->createdAt,
        $this->lastLogin,
        $this->confirmationToken,
        $this->passwordRequestedAt,
        $this->enabled,
        $this->locked,
        $this->expired,
        $this->expiresAt,
        $this->credentialsExpired,
        $this->credentialsExpireAt,
        $this->roles,
    ));
}

/**
 * @see \Serializable::unserialize()
 */
public function unserialize($serialized)
{
    //$data = unserialize($serialized);
    // add a few extra elements in the array to ensure that we have enough keys when unserializing
    // older data which does not include all properties.
    //$data = array_merge($data, array_fill(0, 2, null));

    list (
        $this->id,
        $this->email,
        $this->emailCanonical,
        $this->plainPassword,
        $this->password,
        $this->firstName,
        $this->lastName,
        $this->createdAt,
        $this->lastLogin,
        $this->confirmationToken,
        $this->passwordRequestedAt,
        $this->enabled,
        $this->locked,
        $this->expired,
        $this->expiresAt,
        $this->credentialsExpired,
        $this->credentialsExpireAt,
        $this->roles,
    ) = unserialize($serialized);
}
} 
```

@edit 2：如果我在身份验证后立即捕获事件并从中拉出用户并调用 getId() 方法，它返回 id 1。所以我猜问题不在身份验证过程中......

如果我在身份验证适配器中返回 UsernamePasswordToken 而不是我自己的，也会发生同样的事情。它返回 getId() 为 0。

# php - 如何找到两个纬度经度的中心点？

> ID：15545685
> 
> 赞同：1
> 
> 时间：2013-03-21T11:03:06.183
> 
> 标签：php

我有两个纬度，经度，现在我如何找到这两个纬度经度的中心纬度，经度。有谁能够帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:06:09.600

为您定义什么是“中心”。大多数情况下，我使用简单的平均值。更好的解决方案是计算两个向量（从地球中心），将它们相加并归一化结果。[计算多个经纬度坐标对的中心点](https://stackoverflow.com/questions/6671183/calculate-the-center-point-of-multiple-latitude-longitude-coordinate-pairs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:16:34.593

另外，要注意经度。170° E 和 170° W 两点之间的中点应位于 180° E *（或 W）*，但最终可能是 0° E。

从 USGS下载*地图投影：工作手册*，作者 John P. Snyder。[http://pubs.er.usgs.gov/publication/pp1395](http://pubs.er.usgs.gov/publication/pp1395)。免费。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:12:16.993

将您的纬度和经度转换为弧度，然后

```
$deltaLongitude = $endPointLongitude - $startPointlongitude;

$xModified = cos($endPointLatitude) * cos($deltaLongitude);
$yModified = cos($endPointLatitude) * sin($deltaLongitude);

$midpointLatitude = atan2(
    sin($startPointlatitude) + sin($endPointLatitude),
    sqrt((cos($startPointLatitude) + $xModified) * (cos($startPointLatitude) + $xModified) + 
         $yModified * $yModified
    )
);
$midpointLongitude = $startPointLongitude +
    atan2($yModified, 
        cos($startPointLatitude) + $xModified
    ); 
```

# html - 如何在 MobileSafari iPad1 上对齐文本（右/中）

> ID：15545689
> 
> 赞同：0
> 
> 时间：2013-03-21T11:03:30.457
> 
> 标签：html, css, ipad, mobile-safari

我正在尝试将输入字段中心或右侧的文本和占位符对齐。这适用于使用该`text-align`属性的所有浏览器，但在 iPad 1 上的移动 Safari 中失败。文本本身是对齐的，但占位符文本始终保持在左侧。

见小提琴：[输入文本对齐](http://jsfiddle.net/tzWWM/)

如何在 iPad 1 上对齐占位符文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:03:20.137

尝试更改显示属性。这可能会解决您`display: inline-block;`对输入元素的此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:08:55.480

我没有 iPad 来测试它，但是由于 Safari 使用 web-kit 引擎，您可以尝试以下代码：

```
::-webkit-input-placeholder{
text-align:right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:23:29.087

```
form input {
    height: 40px;
    width: 200px;
    font-size: 18px;
    font-weight: bold;
    border: 1px solid  gray;
    text-align: center;

}

form {
    margin:auto;
    font-size: 18px;
    font-weight: bold;
    text-align: right;
} 
```

# javascript - javascript模块模式的差异

> ID：15545690
> 
> 赞同：0
> 
> 时间：2013-03-21T11:03:32.080
> 
> 标签：javascript, module

非常简单的问题，不确定这些创建javascript“模块”的方式是否有任何区别。我希望有人可以为我澄清一下。

一种）

```
var foo = function() {
    var bar = function() {
        console.log('test');
    };

    return {
        bar: bar
    };
}; 
```

二）

```
var foo = function() {
    function bar() {
        console.log('test');
    };

    return {
        bar: bar
    };
}; 
```

C）

```
var foo = function() {
    this.bar = function() {
        console.log('test');
    };

    return {    
        bar: this.bar
    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:28:39.383

A 和 B 本质上是相同的，尽管由于函数/变量提升，A 和 B 之间存在非常小的差异，理论上你可以编写可以在 B 中工作但在 A 中中断的代码，但实际上你必须真的为此编写奇怪的代码。

C 可以工作，但在概念上是错误的。在函数中使用的要点`this.funcName`是作为构造函数（使用`new Thing()`.它的实际目的是一个模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:31:32.313

起初，您忘记执行函数表达式：[模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)是一个 IEFE。您只需创建一个函数。

你的最后一个例子是胡说八道，它在分配属性时看起来像一个构造函数[`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)- 当作为 IEFE 执行时它会中断（并且使用它会`new`产生不良影响；当返回一个对象时它是无用的）。

有关第一个和第二个片段之间的区别，请参见[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)。在模块模式的上下文中，建议使用函数声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T07:59:54.303

```
//Javascript Module Pattern
var person = (function() {
  var cname = 'CheapFlight';
  return {
   name: "Santosh Thakur",
   getAge: function() {
    return cname;
   },
   growOlder: function() {
    return cname + " Updated";
 }
 };
}());
person.cname = "New Company"
console.log(person.cname);
console.log(person.name);
console.log(person.getAge());
console.log(person.growOlder());
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T11:08:24.110

在函数使其成为“类”-ish 之前添加前缀 var，这意味着您可以制作它的多个版本。这适用于 A

例如：

```
 var hi = function()
  {
    var bye = function()
    {
        alert("bye");
    }   
    bye(); // this will call bye
    var something = new bye(); // this will create a new instance of bye();
  }

  var something = new hi();
  something(); 
```

B 表示您只能调用 bar，而不能在函数内创建它的新实例。

C 与 bar 相同，因为它的范围

类：

```
var Dog = function( hair, type )
{
     this.hair = hair;
     this.type = type;
}

var fred = new Dog( "long", "Dalmation" );
alert( fred.hair );    

var dave = new Dog( "short", "Poodle" );
alert( dave.type); 
```

这是一堂课^

# c# - 覆盖 GetEnumerator 的默认行为

> ID：15545691
> 
> 赞同：2
> 
> 时间：2013-03-21T11:03:34.590
> 
> 标签：c#, list, ienumerable, ienumerator, callermembername

我有一个要求，我需要知道`GetEnumerator()`.

我能想到的最好的方法可能是将默认行为覆盖到`GetEnumerator`我创建的行为上，`GetEnumerator([CallerMemberName]string caller = null)`但我似乎无法这样做，因为任何调用它的东西仍然会使用原始行为。

```
public class MyItems : IEnumerable<string>
{
    private List<string> items = new List<string>();
    public MyItems()
    {
        items.Add("One");
        items.Add("Two");
        items.Add("Three");
        items.Add("Four");
        items.Add("Five");
        items.Add("Six");
    }

    public IEnumerator<string> GetEnumerator()
    {
        return items.GetEnumerator();
    }

    public IEnumerator<string> GetEnumerator([CallerMemberName]string caller = null)
    {
        var method = caller;
        return items.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }
} 
```

一些调用代码的示例可能是

```
private void button1_click(object sender,EventArgs e)
{
    MyItems items = new MyItems();
    foreach (var item in items)
    {

    }
} 
```

目的是我想知道`"button1_click"`例如`GetEnumerator()`方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:32:39.087

我认为不可能完全按照您的意愿去做，因为`foreach`据我所知，总是在`GetEnumerator()`没有任何参数的情况下调用 the 。但是，我看到您的问题有两种可能性

您可以使用 a[`StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)来获取调用方法：

```
public IEnumerator<string> GetEnumerator()
{
    StackTrace stackTrace = new StackTrace();
    Console.WriteLine(stackTrace.GetFrame(1).GetMethod().Name);
    return items.GetEnumerator();
} 
```

或者您可以使用另一种方法而不是`GetEnumerator()`采用该`[CallerMemberName]`属性的方法。

```
public IEnumerable<string> Iterate([CallerMemberName]string caller = null)
{
    Console.WriteLine(caller);
    return items;
}

foreach (var myItem in items.Iterate())
{
    //..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:38:23.430

好像，你需要使用 StackTrace 类

```
StackTrace st = new StackTrace();
        var fr = st.GetFrames();
        if(fr != null && fr.Any() &&fr.Count() >1)
        {
            MessageBox.Show(fr.ElementAt(1).GetMethod().Name);
        } 
```

# backbone.js - 主干.js 访问模型中的模型属性 - this.attribute VS this.get('attribute')？

> ID：15545697
> 
> 赞同：16
> 
> 时间：2013-03-21T11:03:51.530
> 
> 标签：backbone.js, model

根据我的理解，Backbone.js 模型的属性应该通过以下方式声明为有点私有的成员变量

```
this.set({ attributeName: attributeValue })
// accessing the value
this.get('attributeName'); 
```

但是当我在实际模型中编写函数时，这样说似乎要简单得多：

```
this.attributeName = attributeValue;
// accessing the value
this.attributeName; 
```

另外我会假设后一个版本处理起来会更快，因为它不经过backbone.js的事件管理。

所以我想知道您的专业人士如何处理主要在模型内部使用的属性。这些是人们实际上希望从外部屏蔽的属性，因此像在后一个示例中那样暴露它们可能仍然不正确。当我一直在查看没有 get 和 set 方法的主干.js 视图的示例时，像第二个示例中那样做似乎很好。那么在模型中编码时，何时使用 get/set(attribute) 或 this.attribute 有什么好的经验法则吗？或者也许是一个使这一点更清楚的模型示例？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-21T13:34:41.997

**何时使用`model.get(property)`和`model.set(...)`**

您应该使用`get`and`set`来访问模型的*数据*。这意味着作为模型序列化表示的一部分的任何属性都使用 检索`fetch`和持久化`save`。

**何时使用`model.attributes.property`**

绝不。

您应该始终使用`get`，尤其是`set`，而不是直接访问`model.attributes`对象，尽管我已经看到了关于此的相互矛盾的意见。我相信 a 和它的消费者之间有一个契约`model`，它保证消费者可以使用`change`事件被通知模型数据的任何变化。如果您直接修改内部属性对象，则不会发送事件并且此合同被破坏。骨干事件*非常*快，特别是如果您没有附加任何侦听器，并且这不是您从过度优化中受益的一点。

尽管直接访问属性而不是`get`它本身是无害的，但应该避免这种情况，以便`attributes`可以将对象视为完全、完全私有的。

如果您绝对需要防止某些更改触发事件，您可以使用`silent:true`选项：`model.set({key:val}, {silent:true})`. 这确实违反了上述合同，甚至 Backbone 自己的文档也给出了以下警告：

> 请注意，这很少，甚至可能永远不是一个好主意。通过选项中的特定标志让您的事件回调查看并选择忽略，通常会更好。

**何时使用`model.property`**

任何*不是数据*的属性，即临时状态变量、计算属性等，都可以直接附加到模型实体。这些属性应该被认为是临时的和传递的：它们可以在模型初始化时或在其生命周期内重新创建，但它们不应该被持久化，无论是公共的还是私有的。一个典型的命名约定是为私有属性添加前缀`_`，如下所示：

```
this._privateProperty = 'foo';
this.publicProperty = 'bar'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-11T17:06:29.593

从不是一个不完整的答案。

有时您希望访问模型属性的集合——无论这些属性是什么。考虑一种实用方法来对属性执行计算、格式化它们以进行输出等。

一个方便的方法是访问 model.attributes

考虑一种替代方案，如下：

```
var attributesNames = ['foo', 'bar', 'baz'];
var attributes = _(attributesNames ).map(function(attr) { return model.get(attr); });

callSomeUtilityMethod(attributes); 
```

两个问题：

*   我们在“attributeNames”集合中引入了耦合。如果该列表发生变化怎么办？
*   我们失去了名称/值的关联。我们可以重写上面的地图，但它变得更加工作。

在这种情况下，做这样的事情要方便得多：

```
callSomeUtilityMethod(model.attributes); 
```

# c# - 如何从视图模型（WPF，MVVM）更改文本框的可见属性

> ID：15545703
> 
> 赞同：5
> 
> 时间：2013-03-21T11:04:08.347
> 
> 标签：c#, wpf, mvvm, properties

我是 WPF 和 MVVM 的初学者。我在项目中的窗口上有某些控件。例如，我的窗口中有一个文本框。我正在使用 MVVM 模式，在这里我想从视图模型中更改文本框的可见属性。另一件事是，我想根据某些条件从视图模型中更改文本框的可见性。

好吧，我用谷歌搜索了它，谷歌向我提出了一些建议，这些建议都是不同的解决方案，我完全感到困惑。

猜猜有人可以帮我解决这个问题。

我知道这对于 WPF MVVM 专家来说是小菜一碟，但是由于我正在尝试学习这些东西，所以我需要一些代码作为示例。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:17:21.133

由于这是 MVVM，您不想*更改*您实际想要*禁用*某些*选项*的文本框的可见性。然后 - 该选项是启用还是禁用应该反映您的文本框的可见性。

所以基本上你想要一个`Property`在 ViewModel 中，例如：

```
public bool CanMyPropertyBeChanged {get; set;} 
```

您可以更改哪个（当然，如果您还没有[实现 INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms229614.aspx)
，您可能应该实现）... 并通过转换器将文本框的可见性绑定到此属性：

```
<TextBox Visibility="{Binding CanMyPropertyBeChanged, Converter={StaticResource boolToVis}}" /> 
```

您可以为此使用内置的**[BooleanToVisibilityConverter](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)**：

```
<BooleanToVisibilityConverter x:Key="boolToVis" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:20:54.967

在您的 XAML 文件中添加以下内容：

```
<Window.Resources>
        <ResourceDictionary>
            <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" />
        </ResourceDictionary>
<Window.Resources> 
```

在您的文本框中添加：

```
<TextBox .... Visibility="{Binding IsVisibleBoolean, Converter={StaticResourcebooleanToVisibilityConverter}}" /> 
```

在您的视图模型中添加 IsVisibleBoolean 属性：

```
public bool IsVisibleBoolean 
{
    get; set;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:18:59.053

你可以通过多种方式做到这一点

## 首先你可以直接绑定它

**XAML**

```
<TextBox  Visibility="{Binding myVisibility}"/> 
```

**虚拟机属性**

```
public Visibility myVisibility
    {
        get { return Visibility.Hidden; }
    } 
```

## 但你也可以使用转换器（推荐的方式）

**XAML**

```
 xmlns:local="clr-namespace:yourNamespace">
<Window.Resources>
    <local:BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
</Window.Resources>

<TextBox  Visibility="{Binding myVisibility,Converter={StaticResource BooleanToVisibility}}"/> 
```

**虚拟机属性**

```
public bool myVisibility
    {
        get { return false; }
    } 
```

**BooleanToVisibilityConverter.cs**

```
[ValueConversion(typeof(bool),typeof(Visibility))]
public sealed class BooleanToVisibilityConverter : IValueConverter
{
    public bool IsReversed { get; set; }
    public bool UseHidden { get; set; }
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var val = System.Convert.ToBoolean(value, CultureInfo.InvariantCulture);
        if (this.IsReversed)
        {
            val = !val;
        }
        if (val)
        {
            return Visibility.Visible;
        }
        return this.UseHidden ? Visibility.Hidden : Visibility.Collapsed;
    }
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# arrays - 修复了数组中的字体大小 - D3 Jason Davies 示例

> ID：15545704
> 
> 赞同：1
> 
> 时间：2013-03-21T11:04:12.987
> 
> 标签：arrays, d3.js, cloud, font-size

下面的代码是 Jason Davies 的 WordCloud 示例。我想插入一个具有固定字体大小的数组并随机集成它。

例如：

```
fontSize = [20,35,50,60,83,90]; 
```

我希望它修复，如上所述（不是范围 [x，x]），如下所示：

```
var fontSize = d3.scale.log().range([20, 90]); 
```

有人知道我如何实现它。

对不起，也许这是一个愚蠢的问题，不幸的是我还是一个初学者。

```
<script>
  var fill = d3.scale.category20();

  d3.layout.cloud().size([800, 800])
      .words([
        "Hello", "world", "normally", "you", "want", "more", "words",
        "than", "this"].map(function(d) {
        return {text: d, size: 10 + Math.random() * 90};
      }))
      .rotate(function() { return ~~(Math.random() * 2) * 90; })
      .font("Impact")
      .fontSize(function(d) { return d.size; })
      .on("end", draw)
      .start();

  function draw(words) {
    d3.select("body").append("svg")
        .attr("width", 800)
        .attr("height", 800)
      .append("g")
        .attr("transform", "translate(400,400)")
      .selectAll("text")
        .data(words)
      .enter().append("text")
        .style("font-size", function(d) { return d.size + "px"; })
        .style("font-family", "Impact")
        .style("fill", function(d, i) { return fill(i); })
        .attr("text-anchor", "middle")
        .attr("transform", function(d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; });
  }
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:53:58.637

您需要做的就是为您想要的单词修复这些大小，而不是随机生成它们。您可以将它们附加到具有随机大小的数组中：

```
var words = ["Hello", "world", "normally", "you", "want", "more", "words",
    "than", "this"].map(function(d) {
        return {text: d, size: 10 + Math.random() * 90};
    };
words.push({text: "foo", size: 20});
words.push(...); 
```

其余代码根本不需要任何修改。您发布的代码不使用任何比例尺，因此您生成和指定的字体大小是它实际使用的字体大小。

# asp.net-mvc - Durandal and ASP.NET MVC conventions

> ID：15545705
> 
> 赞同：15
> 
> 时间：2013-03-21T11:04:13.220
> 
> 标签：asp.net-mvc, architecture, conventions, durandal, hottowel

I'm currently evaluating **Durandal** for use in an enterprise **ASP.NET MVC** application.

However the default conventions used by Durandal seem to conflict with the MVC conventions I've grown accustomed to.

The HotTowel MVC template by John Papa is great, but this too seems to "do away" with MVC conventions in favour of Durandals by putting things in an App folder.

A couple of the issues I have with these conventions are:

*   Views are potentially split across two locations (/App/views and /Views).
*   Scripts are also split across two locations (/App/durandal and /Scripts).
*   Views are not in the default MVC locations for the `RazorViewEngine`.

I would prefer to keep each element contained in the appropriate MVC conventions e.g.

```
/Controllers/
---- HomeController
---- AdminController

/Scripts/    
---- durandal/    
---- viewmodels/    
-------- Home
-------- Admin

/Views/    
---- Home    
---- Admin 
```

My questions are:

1.  Is it possible to configure Durandal to achieve the above (or something similar)?

2.  Is it wise to venture away from the default Durandal conventions?

3.  What are the potential issues in doing so?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T01:49:14.340

## 1\. Is it possible to configure Durandal to achieve the above (or something similar)?

Yes, you can have any folder structure your heart desires. Durandal does not impose any folder structure on your application but it does have a default convention which is completely overridable.

If you are using Durandals [router](http://durandaljs.com/documentation/Router/) then you will want to look into how to configure it to find modules. There are many ways of doing this, I prefer to create my own convention by overriding the `router.autoConvertRouteToModuleId`.

If you are not using the router plugin then you will have to manage the uris for your modules yourself and this is done by following [requirejs'](http://requirejs.org/docs/api.html#jsfiles) convention and using this convention along w/ durandals [composition](http://durandaljs.com/documentation/Composition/) module.

Also, you can override how it finds the views to bind to your modules by overriding the [viewlocators](http://durandaljs.com/documentation/View-Locator/) convention. Durandal provides an very simplistic way of structuring small applications right out of the box but if you need to build larger applications then it is recommended you create your own conventions.

## 2\. Is it wise to venture away from the default Durandal conventions? 3\. What are the potential issues in doing so?

So, there are the conventions of how to discover modules and how to discover views which are completely overridable. And I recommend you do override these and choose a way that suites you best. But, as for placing durandal inside your scripts folder as you have listed above I dont think its a good idea.

The reason I dont recommend this is because I see the scripts folder as a place for all your third party scripts that are NON-AMD modules. This is because Durandal also comes with an [optimizer.exe](http://durandaljs.com/documentation/Optimizing-On-Dot-Net/) which makes minifying/compressing/uglifying all your html/css/js (amd) files into 1 file.

If you keep your entire application under an app folder and then have the durandal folder inside your app folder the optimizer just works because it lives inside the app/durandal/amd folder. So, when you execute it, it will transverse up 2 directories to your app folder and then scan every subfolder to create a [app.build.js](http://requirejs.org/docs/optimization.html) requirejs optimization file.. and then it will compress your entire application to one file for you.

This beats having to hand edit an app.build.js file everytime you add a new file to your project. Sure.. there are other tools out there which can do this too.. but you will have to spend time learning their api and how to configure them. If you dont feel like devoting the time to learning something like [grunt](http://gruntjs.com/) then this optimizer is kick ass. Personally, I like the ability to just double click something and have my whole application built for me.

As for placing all your third party libraries which are non-amd in a seperate scripts folder I would look into compressing those seperately like using [MVC's bundling](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification). The reason I would bundle those seperately is because you know those files arnt changing very often and if you bundle those into a seperate js file they can be cached by the browser seperately. Whereas if your spa is changing, which it it probably will.. then you want the browser to cache that seperately so it only has to re-download your compressed application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T15:00:23.513

What we do (this is what I have seen Rob doing too:) is that to create folders inside the /App folder depending on the functional areas of the app. Then just create view and view model file inside these folders.

Trick is to have a "viewUrl" property in each view model to tell durandal which view to use. This way of structuring the application is useful for large projects where there are many views/view models ; avoids confusion when your project grows.

```
define(['durandal/app', 'durandal/system', 'plugins/router'],
    function (app, system, router) {
        var vm = {
            viewUrl: 'myfolder/myview.html',
        };
        return vm;
    }
); 
```

You can still use viewLocator.useConvention(); when you bootstrap your application; durandal will still find the view as long as you have viewUrl property.

# git - Git 分支模型 - 在非顺序测试和发布设置中管理部署/集成分支

> ID：15545706
> 
> 赞同：1
> 
> 时间：2013-03-21T11:04:26.333
> 
> 标签：git, github, workflow

我们正在广泛采用基于[nvie.com 建议](http://nvie.com/posts/a-successful-git-branching-model/)的 git 分支模型。

我们还无法弄清楚如何管理 Deploy（又名集成）分支以进行多个版本的功能测试。尽管 Nvie 的模型将功能开发与发布跑道分离，但它似乎假设了一个用于开发、测试和发布功能的排队跑道。

如果我们想尽早开始测试两个月后到期的“大”功能（2.0）以及我们将在维护版本中更早发布（1.1）的代码，您对我们如何管理它有什么建议？

我考虑过将所有 Feature/FeatureName 分支单独合并到 Deploy 分支中，然后将它们单独合并到 Release/1.x 分支中，而不是将 Deploy 合并到 Release/1.x 中，后者假定您当前正在集成的所有内容测试将发出“下一个”。

欢迎提出建议！

# seo - 将主站点重定向到关键字丰富的子文件夹以进行 SEO

> ID：15545708
> 
> 赞同：0
> 
> 时间：2013-03-21T11:04:31.907
> 
> 标签：seo

我正在为一个欧洲非英语国家的当地汽车经销商网站进行 SEO。大多数用户都在搜索二手车：“汽车经销商 volkswagen Golf”，我们的排名非常好，因为我们的汽车网址是 example.com/car-dealer/volskwagen/golf。但是，我们的域不包含任何关键字，如果您搜索汽车经销商，即使我们经常在我们的主站点上使用此关键字，您也永远找不到我们（实际关键字带有重音，但用户搜索时没有重音 - 使用我们在第 4 页的口音）。所以我正在考虑将主站点移动到一个关键字丰富的子文件夹，并使用 301 重定向 -> example.com 到 example.com/car-dealer。你认为这值得吗？

我知道域中关键字的价值越来越小，但是有一个小竞争对手从来没有为seo做过任何事情，他甚至没有描述标签，他最多有5个入站链接，但是他的域名是“cardealerXYZ”，他在谷歌搜索结果的第一页。几乎所有处于更好位置的汽车经销商在他们的域名中都有关键字cardealer——大多数情况下他们没有为seo 做任何事情——就像我的客户没有做的一样。

更多见解：无法更改域名。域超过 5 年。那么您如何看待仅重定向到包含关键字的子文件夹？它也可以解决重音问题。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:13:06.747

是的你是对的。您必须将站点的所有内容移动到“Car-Dealer”文件夹并在根文件夹上创建一个 index.htm 文件，该文件会将您的用户重定向到子文件夹。

如果您知道编程，那么您可以重写 URL。意味着您可以像这样创建您的网址

[http://yourdomain.com/best-car-dealer/cars/cars-for-sale/YOURPPAGE.html](http://yourdomain.com/best-car-dealer/cars/cars-for-sale/YOURPPAGE.html)

URL 重写是创建搜索引擎友好 URL 的最佳实践。

请参见下面的示例：实际 URL： [http ://www.costumes4less.com/GroupDetail.aspx?Sku=Z804100](http://www.costumes4less.com/GroupDetail.aspx?Sku=Z804100)

重写后的网址：http: [//www.costumes4less.com/Princess-Cynthia-Child-Costume_Z804100_Prod.aspx](http://www.costumes4less.com/Princess-Cynthia-Child-Costume_Z804100_Prod.aspx)

第二个 URL 是搜索引擎友好的，但第一个不是。

# python - args/kwargs 的特殊使用

> ID：15545711
> 
> 赞同：3
> 
> 时间：2013-03-21T11:04:41.100
> 
> 标签：python, keyword-argument

我需要做这样的事情：

```
def func1(a, *args, b="BBB", **kwargs):
    print "a=%s b=%s args=%s kwargs=%s" % (a, b, args, kwargs) 
```

所以这样的调用：

```
func1("AAAA", h="HHH", j="JJJ") 
```

产生输出：

```
a=AAAA b=BBB args=() kwargs={'h': 'HHH', 'j': 'JJJ'} 
```

但是不可能在`*args`. ( `SyntaxError: invalid syntax`)

*   为什么不允许这样做？
*   有什么可读的方法来实现这个吗？我知道的唯一方法是`b=kwargs.pop("b", "BBB")`，但这不是很可读。我希望在函数调用定义中包含它，它所属的位置：它是一个*始终*具有值的参数，可以是默认值，也可以是用户给定的值。

# 编辑

我可以放在`b`前面`args`：

```
def func1(a, b="BBB", *args, **kwargs):
    print "a=%s b=%s args=%s kwargs=%s" % (a, b, args, kwargs) 
```

但这意味着这个电话：

```
func1("AAAA", "CCC", h="HHH", j="JJJ") 
```

分配`"CCC"`给`b`，我不想要。我想`b`成为一个命名的 arg，而不是一个位置的 arg。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:12:22.243

这在 Python 3 中完全有效（[演示](http://liveworkspace.org/code/gHHOt%244)）；[PEP 3102](http://www.python.org/dev/peps/pep-3102/)引入了**仅关键字参数**。

在 Python 2.x 中，您必须继续使用`kwargs.pop`或适当的装饰器：

*   [http://code.activestate.com/recipes/577940-emulate-keyword-only-arguments-in-python-2/](http://code.activestate.com/recipes/577940-emulate-keyword-only-arguments-in-python-2/)
*   [https://pypi.python.org/pypi/kwonly](https://pypi.python.org/pypi/kwonly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:22:38.100

[在 Python 2](http://www.python.org/dev/peps/pep-3102/)中，

> 当前的 Python 函数调用范例允许通过位置或关键字指定参数。参数可以通过名称显式填充，也可以通过位置隐式填充。

结果`def func1(a, *args, b="BBB", **kwargs)`是模棱两可的，因此是不允许的：在 call `func1(1, 2)`， should `args == ()`and `b == 2`， or `args = (2,)`and `b == "BBB"`?

这就是为什么`def func1(a, b="BBB", *args, **kwargs)`is，另一方面，被接受（即使它没有做你想要的）：`b`总是作为第二个参数传递，即使在像这样的调用中`func1(1, c=3, b=2)`（它相当于`func1(1, 2, c=3)`）。

正如 ecatmur 所指出的，Python 3 改变了处理参数的方式，这带来了您需要的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:14:19.127

```
def func1(a, *args, **kwargs):
    b, k = (lambda b="BBBB", **k: b, k)(**kwargs)
    print "a=%s b=%s args=%s kwargs=%s" % (a, b, args, k) 
```

可能是另一种选择。

# java - 我如何在java中替换©和'这些特殊字符？

> ID：15545712
> 
> 赞同：-2
> 
> 时间：2013-03-21T11:04:42.787
> 
> 标签：java, character-encoding, special-characters

我必须替换一些特殊字符，如 ' 和 © 因为当我将文本（包含这些特殊字符）存储到我的数据库中时，它们显示为 \xC2\xA9 ..（无效字符。）有人可以告诉我如何将它们存储到数据库中，因为它们看起来像或者如何替换它们（这是紧急的）。
感谢和问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:45:23.950

确保您的整个堆栈（数据库、JVM、容器、应用程序等）使用相同的字符集（最好是 UTF-8）。变化是好事，有些地方不是。这将导致像您描述的那样的编码错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:38:47.757

一种方法是在将字符串保存到数据库之前对此类字符串进行 URL 编码。当您从数据库中检索它们时，您可以在进一步使用它们之前对它们进行 URL 解码（或显示在 UI 上，具体取决于您的要求）。尽管这不是 URL 的情况，但它会将特殊字符替换为更兼容的字符。

URL 编码将替换这些字符，例如 © 将替换为 %40，'（单引号）将替换为 %27。有关 URL 编码的详细信息，请参阅此[URL 编码参考](http://www.w3schools.com/tags/ref_urlencode.asp)

对于 URL 编码，您可以使用[URLEncoder](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)类，对于 URL 解码，您可以使用[URLDecoder](http://docs.oracle.com/javase/6/docs/api/java/net/URLDecoder.html)类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:08:11.193

利用

```
String str = "text@";
String new_str = str.replace("@",""); 
```

# c# - GroupBy 和 Max 在单个查询中的 LINQ 查询

> ID：15545716
> 
> 赞同：1
> 
> 时间：2013-03-21T11:04:50.910
> 
> 标签：c#, linq

我有以下 LINQ 查询，但我想修改它，我想按 StaffId 分组，并只选择每个 StaffId 的 ObservationDate 为 Max 的那些记录。

```
from ob in db.TDTObservations.OfType<TDTSpeedObservation>()
select new
{
   Id = ob.ID,
   AcademicYearId = ob.Teachers.FirstOrDefault().Classes.FirstOrDefault().AcademicYearID,
   observationDate = ob.ObservationDate,
   schoolId = ob.Teachers.FirstOrDefault().Classes.FirstOrDefault().SchoolID,
   staffId=ob.Teachers.FirstOrDefault().ID
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:09:51.253

```
var observations = 
    from ob in db.TDTObservations.OfType<TDTSpeedObservation>()
    select new  {
       Id = ob.ID,
       AcademicYearId = ob.Teachers.FirstOrDefault().Classes.FirstOrDefault().AcademicYearID,
       observationDate = ob.ObservationDate,
       schoolId = ob.Teachers.FirstOrDefault().Classes.FirstOrDefault().SchoolID,
       staffId=ob.Teachers.FirstOrDefault().ID
    };

var result = from o in observations
             group o by o.staffId into g
             select g.OrderByDescending(x => x.observationDate).First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T09:50:37.343

怎么样：在此您首先将您的条目（教师）按他们的 ID 分组，然后从每个组（grp）中选择具有最新 ObservationDate 的那个

```
var observations = from d in db.TDTObservations.OfType<TDTSpeedObservation>()
                   group d by d.Teachers.FirstOrDefault().ID into grp
                   select grp.OrderByDescending(g => g.ObservationDate).FirstOrDefault(); 
```

# svn - VisualSvn 中的空 Repos-Path/Txn-Name

> ID：15545717
> 
> 赞同：1
> 
> 时间：2013-03-21T11:04:55.090
> 
> 标签：svn, batch-file, visualsvn-server, svn-hooks, pre-commit

我正在尝试设置一个简单的预提交钩子脚本，该脚本会在没有消息的情况下拒绝提交。我们使用 VisualSVN Server 2.5.8，并且我添加了一个指向 .bat 文件的预提交挂钩。

该文件已执行，但 REPOS-PATH 和 TXN-Name 的参数为空。在我的脚本中，我尝试将 %0 记录到文件中，我发现这只是返回脚本的路径。所以出于某种原因，VisualSVN Server 没有传递这些参数。有什么问题？

测试代码：

```
@echo off

setlocal enabledelayedexpansion

set REPOS=%1
set TXN=%2

set SVNLOOK="%VISUALSVN_SERVER%\bin\svnlook.exe"

echo "repos %REPOS%." >> C:\Repositories\Hooks\test.log
echo "txn %TXN%." >> C:\Repositories\Hooks\test.log

exit 0 
```

提交后， test.log 包含：

> “回购。”
> 
> “TXN。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:18:50.860

挂钩脚本在空环境中执行 - 没有设置变量，not `%PATH%`， not `%VISUALSVN_SERVER%`。您需要指定**完整路径**，`svnlook.exe`而不取决于脚本中未定义的环境变量。

对于丢失的`%REPOS%`and `%TXN%`，我在我的钩子中使用以下内容：

```
set "REPOS=%~1"
set "TXN=%~2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T12:42:16.137

您可以使用`VisualSVNServerHooks.exe check-logmessage`现代 VisualSVN 服务器版本附带的预提交挂钩，该挂钩位于`%VISUALSVN_SERVER%bin`目录中。这个简单的工具将帮助您定义日志消息中允许的最小字符数。

有关说明，请参阅文章[KB140：验证 VisualSVN 服务器](https://www.visualsvn.com/support/topic/00140/)中的提交日志消息。

# c# - XRM where 子句中的可空过滤器

> ID：15545718
> 
> 赞同：1
> 
> 时间：2013-03-21T11:04:55.140
> 
> 标签：c#, linq, dynamics-crm-2011, dynamics-crm, xrm

我在 WCF 项目中使用 XRM（早期绑定）类型，因此我可以访问 CRM 模型并且可以使用 LINQ 查询。但是我遇到了[这里描述的问题](http://weblogs.asp.net/pabloperalta/archive/2012/04/04/notsupportedexception-invalid-where-condition-an-entity-member-is-invoking-an-invalid-property-or-method.aspx)`where`，这是XRM LINQ 特定子句的限制：

> **where [条款限制]**
> 
> 子句的左侧必须是属性名称，子句的右侧必须是值。您不能将左侧设置为常数。子句的两边都不能是常数。
> 
> 支持字符串函数 Contains、StartsWith、EndsWith 和 Equals。

不断弹出的一项要求是，*当参数为空时，应返回所有实体，否则按参数过滤。*但是我想不出一种方法来做到这一点，而不打破上述要求，或者编写多个查询来处理它为空的场景。

这是我的一个查询示例，`typeFilter == null`这里的问题是我在 LHS 上使用了一个常量。在我的真实代码中，有一个指向另一个查询的保护子句，`typeFilter == null`但我现在必须添加一个开始/结束日期过滤器（均可为空），我无法表达我**不想**为每个可空值组合编写查询的程度。

```
private IQueryable<EventInfo> getAllEvents( DataContext context, EventType? typeFilter )
{
    return (
        from evt in context.new_eventSet
        where
        ( evt.statecode == new_eventState.Active ) &&
        ( typeFilter == null || evt.new_EventType.Value == (int) typeFilter.Value )
        select new EventInfo()
        {
            ID = evt.Id,
            EventType = (EventType) evt.new_EventType.Value
            ...
        } );            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:24:45.370

怎么样：

```
if (typeFilter == null)
{
        return (
        from evt in context.new_eventSet
        where
        ( evt.statecode == new_eventState.Active )
               select new EventInfo()
        {
            ID = evt.Id,
            EventType = (EventType) evt.new_EventType.Value
            ...
        } );   
}
else
{
        return (
        from evt in context.new_eventSet
        where
        ( evt.statecode == new_eventState.Active ) &&
        evt.new_EventType.Value == (int) typeFilter.Value )
        select new EventInfo()
        {
            ID = evt.Id,
            EventType = (EventType) evt.new_EventType.Value
            ...
        } );   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:55:31.450

如果要使用 Linq 语法，可以使用[LinqKit](http://www.albahari.com/nutshell/predicatebuilder.aspx)动态构造查询。

为此，我在我目前正在进行的 Dynamics CRM 项目中使用了它，并且它做得很好。

请参考以下答案，这是我的想法：[https ://stackoverflow.com/a/5152946/344988](https://stackoverflow.com/a/5152946/344988)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:52:35.673

我已经回答了我自己的问题！有时你只需要一个地方在你得到它之前发泄你的问题。

诀窍是不使用 LINQ 语法：

```
private IQueryable<EventInfo> getAllEvents( DataContext context, EventType? typeFilter, DateTime? startDateFilter, DateTime? endDateFilter  )
{
    var result = context.new_eventSet
        // active records
        .Where( evt => evt.statecode == new_eventState.Active )             
        // is publish-able
        .Where( ..etc.. );

    if ( typeFilter != null )
    {
        // filter by type
        result = result.Where( evt => evt.new_EventType.Value == (int) typeFilter.Value );
    }

    if( startDateFilter != null)
    {
        // filter by startDate
        result = result.Where(evt => evt.new_StartDate > startDateFilter.Value);
    }

    if( endDateFilter != null)
    {
        // filter by endDate
        result = result.Where(evt => evt.new_StartDate < endDateFilter.Value);
    }

    return result.Select( evt => new EventInfo()
        {
            ID = evt.Id,
            EventType = (EventType) evt.new_EventType.Value,
            ...
        }  );       
} 
```

# java - 如何修复 1 字节 UTF-8 序列的无效字节 1

> ID：15545720
> 
> 赞同：34
> 
> 时间：2013-03-21T11:05:00.583
> 
> 标签：java, xml, xml-parsing

我正在尝试使用 java 方法从 db 中获取以下 xml，但出现错误

用于解析 xml 的代码

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();

InputSource is = new InputSource(new ByteArrayInputStream(cond.getBytes()));

Document doc = db.parse(is);

Element elem = doc.getDocumentElement();

// here we expect a series of <data><name>N</name><value>V</value></data>
NodeList nodes = elem.getElementsByTagName("data");

TableID jobId = new TableID(_processInstanceId);
Job myJob = Job.queryByID(_clientContext, jobId, true);

if (nodes.getLength() == 0) {
    log(Level.DEBUG, "No data found on condition XML");

}

for (int i = 0; i < nodes.getLength(); i++) {
    // loop through the <data> in the XML

    Element dataTags = (Element) nodes.item(i);
    String name = getChildTagValue(dataTags, "name");
    String value = getChildTagValue(dataTags, "value");

    log(Level.INFO, "UserData/Value=" + name + "/" + value);

    myJob.setBulkUserData(name, value);
}

myJob.save(); 
```

数据

```
<ContactDetails>307896043</ContactDetails>
<ContactName>307896043</ContactName>
<Preferred_Completion_Date>
</Preferred_Completion_Date>
<service_address>A-End Address: 1ST HELIERST HELIERJT2 3XP832THE CABLES 1 POONHA LANEST HELIER JE JT2 3XP</service_address>
<ServiceOrderId>315473043</ServiceOrderId>
<ServiceOrderTypeId>50</ServiceOrderTypeId>
<CustDesiredDate>2013-03-20T18:12:04</CustDesiredDate>
<OrderId>307896043</OrderId>
<CreateWho>csmuser</CreateWho>
<AccountInternalId>20100333</AccountInternalId>
<ServiceInternalId>20766093</ServiceInternalId>
<ServiceInternalIdResets>0</ServiceInternalIdResets>
<Primary_Offer_Name  action='del'>MyMobile Blue &#163;44.99 [12 month term]</Primary_Offer_Name>
<Disc_Reason  action='del'>8</Disc_Reason>
<Sup_Offer  action='del'>80000257</Sup_Offer>
<Service_Type  action='del'>A-01-00</Service_Type>
<Priority  action='del'>4</Priority>
<Account_Number  action='del'>0</Account_Number>
<Offer  action='del'>80000257</Offer>
<msisdn  action='del'>447797142520</msisdn>
<imsi  action='del'>234503184</imsi>
<sim  action='del'>5535</sim>
<ocb9_ARM  action='del'>false</ocb9_ARM>
<port_in_required  action='del'>
</port_in_required>
<ocb9_mob  action='del'>none</ocb9_mob>
<ocb9_mob_BB  action='del'>
</ocb9_mob_BB>
<ocb9_LandLine  action='del'>
</ocb9_LandLine>
<ocb9_LandLine_BB  action='del'>
</ocb9_LandLine_BB>
<Contact_2>
</Contact_2>
<Acc_middle_name>
</Acc_middle_name>
<MarketCode>7</MarketCode>
<Acc_last_name>Port_OUT</Acc_last_name>
<Contact_1>
</Contact_1>
<Acc_first_name>.</Acc_first_name>
<EmaiId>
</EmaiId> 
```

错误

```
 org.apache.xerces.impl.io.MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-8 sequence. 
```

我在一些线程中读到这是因为 xml 中的一些特殊字符。如何解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-21T11:11:35.277

> 如何解决这个问题？

使用正确的字符编码读取数据。错误消息意味着您正在尝试将数据读取为 UTF-8（有意或因为这是未指定的 XML 文件的默认编码`<?xml version="1.0" encoding="somethingelse"?>`），但它实际上采用不同的编码，例如 ISO-8859-1或 Windows-1252。

为了能够建议您应该如何执行此操作，我必须查看您当前用于读取 XML 的代码。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-11-21T08:43:18.707

1.  在记事本中打开xml
2.  确保在文档的开头和结尾没有多余的空间。
3.  选择文件 -> 另存为
4.  选择另存为类型 -> 所有文件
5.  输入文件名作为 abcd.xml
6.  选择编码 - UTF-8 -> 点击保存

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-21T11:09:49.443

尝试：

```
InputStream inputStream= // Your InputStream from your database.
Reader reader = new InputStreamReader(inputStream,"UTF-8");

InputSource is = new InputSource(reader);
is.setEncoding("UTF-8");

saxParser.parse(is, handler); 
```

如果它不是 UTF-8，只需将编码部分更改为好的部分。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-25T17:07:41.933

我将 xml 作为字符串获取并使用 xml.getBytes() 并收到此错误。更改为 xml.getBytes(Charset.forName("UTF-8")) 对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-24T12:58:37.413

我在我的 JSF 应用程序中遇到了同样的问题，它在 XMHTL 页面中有一个包含一些特殊字符的注释行。当我在 Eclipse 中比较以前的版本时，它有一条评论，

```
//Some �  special characters found 
```

删除了这些字符，页面加载正常。它主要与 XML 文件有关，因此请与工作版本进行比较。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-03T13:29:13.130

我遇到了这个问题，但是文件是 UTF-8 格式的，只是以某种方式进入的字符没有以 UTF-8 编码。为了解决这个问题，我做了这个线程中所说的，即我验证了文件： [如何检查文件是否是有效的 UTF-8？](https://stackoverflow.com/questions/115210/utf-8-validation)

基本上你运行命令：

$ iconv -f UTF-8 your_file -o /dev/null

如果有些东西不是用 UTF-8 编码的，它会给你行号和行号，以便你找到它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-28T12:15:50.030

```
This error comes when you are trying to load jasper report file with the extension .jasper
For Example 
c://reports//EmployeeReport.jasper"

While you should load jasper report file with the extension .jrxml
For Example 
c://reports//EmployeeReport.jrxml"
[See Problem Screenshot ][1] [1]: https://i.stack.imgur.com/D5SzR.png
[See Solution Screenshot][2] [2]: https://i.stack.imgur.com/VeQb9.png 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-03T11:51:06.537

我有一个类似的问题。我将一些 xml 保存在一个文件中，当将其读入 DOM 文档时，由于特殊字符而失败。然后我使用以下代码修复它：

```
String enco = new String(Files.readAllBytes(Paths.get(listPayloadPath+"/Payload.xml")), StandardCharsets.UTF_8);

Document doc = builder.parse(new ByteArrayInputStream(enco.getBytes(StandardCharsets.UTF_8))); 
```

请让我知道这对你有没有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-03T14:48:57.070

由于 Ant 构建，我碰巧遇到了这个问题。

Ant 构建获取文件并应用`filterchain expandproperties`到它。在此文件过滤期间，我的 Windows 机器的隐式默认非 UTF-8 字符编码用于生成过滤后的文件 - 因此无法正确映射其字符集之外的字符。

一种解决方案是为 Ant 提供一个用于 UTF-8 的显式环境变量。在 Cygwin 中，在启动 Ant 之前：`export ANT_OPTS="-Dfile.encoding=UTF-8"`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-17T23:47:42.880

我遇到了同样的问题，在对我的 XML 文件进行长时间调查后，我发现了问题：几乎没有像`«` `»`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-15T18:30:50.627

像我这样了解字符编码原理的人[还阅读了 Joel 的文章](https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/)，这篇文章很有趣，因为它[包含错误的字符](https://twitter.com/felipeieder/status/930791632668119040)并且**仍然无法弄清楚到底是什么**（剧透警报，我是 Mac 用户），那么您的解决方案可以很简单**删除您的本地存储库并再次克隆它**。

自从上次运行正常以来，我的代码库没有改变，所以考虑到我们的构建系统从未抱怨过，出现 UTF 错误是没有意义的......直到我记得几天前我不小心拔掉了我的电脑使用 IntelliJ Idea 和整个运行（Java/Tomcat/Hibernate）

我的 Mac 做得非常出色，假装什么都没发生，我照常营业，但底层文件系统不知何故损坏了。浪费了一整天的时间试图弄清楚这一点。我希望它可以帮助某人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-13T09:40:03.200

我遇到过同样的问题。我的问题是它在 WebLogic 服务器的 statWeblogic.cmd 文件中的 JAVA_OPTION 下缺少“-Dfile.encoding=UTF8”参数。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-02T20:27:21.530

您有一个需要擦除的库 就像下面的库

```
 implementation 'org.apache.maven.plugins:maven-surefire-plugin:2.4.3' 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-10T23:54:29.577

这个错误让我在生产中感到惊讶......

错误是因为字符编码错误，所以最好的解决方案是实现一种自动检测输入字符集的方法。

这是一种方法：

```
...    
import org.xml.sax.InputSource;
...

InputSource inputSource = new InputSource(inputStream);
someReader(
    inputSource.getByteStream(), inputSource.getEncoding()
  ); 
```

输入样本：

```
<?xml version="1.0" encoding="utf-16"?>
<rss xmlns:dc="https://purl.org/dc/elements/1.1/" version="2.0">
<channel>
... 
```

# excel - 在工作表之间复制和粘贴行

> ID：15545724
> 
> 赞同：1
> 
> 时间：2013-03-21T11:05:13.647
> 
> 标签：excel, vba

我想要实现的是根据某些标准将数据从 WS1 复制到 WS3。

我有 2 个工作表：

```
WS1 = RAW DATA  
WS2 = ATLAS DATA 
```

在两者的 A 列中都有唯一标识符。我想做的是创建`WS3=Reconciliation`. 然后根据 WS1 在 WS2 中查找值。在找到匹配项的地方，我想将行从 WS1 复制到 WS3，我已经对一些代码进行了逆向工程并在下面提出了一个

```
Sub CopyAndPaste()
Dim x As String, CpyRng As Range
Dim mFIND As Range, mFIRST As Range

    With Sheets("RAW DATA")
        Range("A:A").Select
        On Error Resume Next
End With
With Sheets("ATLAS DATA")
        Set mFIND = .Range("A:A").Find(x, LookIn:=xlValues, LookAt:=xlWhole)
        If Not mFIND Is Nothing Then
            Set CpyRng = mFIND
            Set mFIRST = mFIND

            Do
                Set CpyRng = Union(CpyRng, mFIND)
                Set mFIND = .Range("A:A").FindNext(mFIND)
            Loop Until mFIND.Address = mFIRST.Address

            CpyRng.EntireRow.Copy Sheets("Rec").Range("A" & Rows.Count).End(xlUp).Offset(1)
        End If
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:40:22.853

根据您对问题的描述；试试这个

```
Option Explicit

Sub CopyAndPaste()
Application.ScreenUpdating = False

    Dim i As Long, j As Long, lastRow1 As Long, lastRow2 As Long, cnt As Long
    Dim ws1 As Worksheet, ws2 As Worksheet, ws3 As Worksheet
    Set ws1 = ActiveWorkbook.Sheets("RAW DATA")
    Set ws2 = ActiveWorkbook.Sheets("ATLAS DATA")
    Set ws3 = ActiveWorkbook.Sheets("Reconciliation")

    lastRow1 = ws1.Range("A" & Rows.Count).End(xlUp).Row
    lastRow2 = ws2.Range("A" & Rows.Count).End(xlUp).Row
    cnt = 1

    For i = 1 To lastRow1
        For j = 1 To lastRow2
            If StrComp(CStr(ws2.Range("A" & j).Value), _
                       CStr(ws1.Range("A" & i).Value), _
                       vbTextCompare) = 0 Then
                        ws1.Activate
                        ws1.Rows(i).Select
                        Selection.Copy
                        ws3.Activate
                        ws3.Range("A" & cnt).Select
                        Selection.PasteSpecial Paste:=xlPasteAllUsingSourceTheme
                        Application.CutCopyMode = False
                        cnt = cnt + 1
            End If
        Next j
    Next i
Application.ScreenUpdating = True
End Sub 
```

# excel - 有没有人实现使用从 Excel 文件到 Powerpivot 的 ODBC 连接？

> ID：15545725
> 
> 赞同：0
> 
> 时间：2013-03-21T11:05:18.740
> 
> 标签：excel, powerpivot

我已经为 Excel 2010 安装了 Powerpivot。我没有 Access 2010，所以我想我可以像处理数据库一样以类似的方式排列数据。

我想在 Powerpivot 中查询一个包含自生成数据行的 Excel 文件，以执行简单的数据透视表。从某种意义上说，试图获得有关数据集的信息的概述。

目前，我无法正确设置 ODBC，我希望我需要接受 Excel 文件并让 PowerPivot 接受来自 Excel 文件的数据库。

编辑：我明白我需要在 Excel 中正确设置表格，以便 ODBC 正常工作。我提供的图片是正确的摆桌方式还是其他方式？

![在此处输入图像描述](../Images/2cd11741921cea5a75309289d27fb792.png)

有没有人尝试过这样做，如果是这样，步骤是什么？

谢谢，彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:29:51.027

彼得，我的工作基础是您的数据位于工作表上可识别的表格中（并且您对通过“来自其他来源”使用标准 Excel 导入方法不感兴趣）

如果您以非常特殊的方式创建与 Excel 文件的连接，则可以像查询数据库一样查询它。

*   通过 Data>Connections>Add 在 Excel 中创建与相关电子表格的连接。

*   在设计选项卡上的 PowerPivot 窗口中，单击现有连接并找到您刚刚创建的连接。选择连接并打开。

*   您需要命名连接，然后您将获得正常的导入选项。选择您要从中获取表格的工作表（此时您选择哪个实际上并不重要）。

*   导入表后，您可以通过设计选项卡上的“表属性”重新输入设置，您现在可以“切换到”查询编辑器，此时您不仅可以编写 SQL 来查询您的数据库但请参考您喜欢的任何其他 .xlsx。

雅各布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:09:34.297

最简单的方法是使用包含数据的 excel 工作表中的链接表 - 你有什么理由不认为这是一个选项？

# javascript - Youtube JS API v2 在第一次点击时不会暂停/播放

> ID：15545730
> 
> 赞同：2
> 
> 时间：2013-03-21T11:05:33.570
> 
> 标签：javascript, youtube-javascript-api

我允许我的用户将他们自己的 YouTube 视频添加到他们的个人资料中。

作为该过程的一部分，我允许用户通过位于无铬播放器外部的按钮观看\暂停视频。

我正在 onStateChnage 事件中进行播放\暂停，我正在识别当前状态，并相应地设置新状态，同时更改播放\暂停按钮上的图标。

当我尝试运行调试器时，我惊讶地发现，导致这个 vbug 的原因是，在某些情况下，stateChange 事件会多次触发。

有没有办法防止这种情况发生？提前谢谢，O。

我的代码：

```
window['eventListener_'+settings.safeID] = function(status){

            var interval;
            if(status == 1){
            $('#togglePlayer').html('<i class="icon-pause"></i>');
                        elements.container.hasClass('playing');
                        // if(!$('div [classname^="flashContainer"]').hasClass('playing')){
                        //  $('div [classname^="flashContainer"]').addClass('playing');
                        //  $('div [classname^="controlDiv"]').removeClass('pause').addClass('play');
                        // }
            }   
            else if(status == 0 || status == 2){
            $('#togglePlayer').html('<i class="icon-play"></i>');

            // if($('div [classname^="flashContainer"]').hasClass('playing')){
            //  $('div [classname^="flashContainer"]').removeClass('playing');
            //  $('div [classname^="controlDiv"]').removeClass('play replay').addClass('pause');
            // }
        }
            // if(status == YT.PlayerState.PAUSED || status == YT.PlayerState.ENDED){
            //  console.log('22');
            // }
            if(status==-1)  // video is loaded
            {
            $('#togglePlayer').show();
            $('#togglePlayer').html('<i class="icon-play"></i>');
                if(!initialized)
                {
                    // Listen for a click on the control button:

                    $('#togglePlayer').click(function(){

                        // If the video is not currently playing, start it:
                        if(!elements.container.hasClass('playing')){                                
                            //regualar case
                            try{
                                elements.control.removeClass('play replay').addClass('pause');
                                elements.container.addClass('playing');
                                elements.player.playVideo();
                            }
                            catch(e){ // first time, elements don't have binding yet
                                document.getElementById('video_'+$playerID).playVideo();
                                if(!$('div [classname^="flashContainer"]').hasClass('playing')){
                                    $('div [classname^="flashContainer"]').addClass('playing');
                                }
                                $('div [classname^="controlDiv"]').removeClass('play replay').addClass('pause');

                            }
                        } else { // video is playing, pause it
                            //regular case
                            try{
                                elements.control.removeClass('pause').addClass('play');
                                elements.container.removeClass('playing');
                                elements.player.pauseVideo();
                            }
                            catch(e){
                                document.getElementById('video_'+$playerID).pauseVideo();
                                                if($('div [classname^="flashContainer"]').hasClass('playing')){
                                                    $('div [classname^="flashContainer"]').removeClass('playing');  
                                                }
                                                $('div [classname^="controlDiv"]').removeClass('pause').addClass('play');
                            }                           

                        }
                    });

                    initialized = true;

                }
                else{
                    // This will happen if the user has clicked on the
                    // YouTube logo and has been redirected to youtube.com

                    if(elements.container.hasClass('playing'))
                    {
                        elements.control.click();
                    }
                }
            }

            if(status==0){ // video has ended
                elements.control.removeClass('pause').addClass('replay');
                elements.container.removeClass('playing');
            }
        }

        // This global function is called when the player is loaded.
        // It is shared by all the videos on the page:

        if(!window.onYouTubePlayerReady)
        {

            window.onYouTubePlayerReady = function(playerID){
                $playerID =  playerID;
                $firsLoad = true;
                document.getElementById('video_'+playerID).addEventListener('onStateChange','eventListener_'+playerID);
                // document.getElementById('video_'+playerID).player.addEventListener('onStateChange', function(){alert('1515')});

            }
        }

    },'jsonp'); 
```

# c# - C# 实时收集 IOps 性能数据？

> ID：15545733
> 
> 赞同：0
> 
> 时间：2013-03-21T11:05:38.647
> 
> 标签：c#, performancecounter, provisioned-iops

我正在尝试构建一个可以从 Windows 机器收集性能数据的小型软件应用程序。

这是我使用的代码和 PrintScreen 的一部分，它给了我不正确的数字。请告诉我我的代码有什么问题以及为什么代码中的比例不正确。（默认比例为 1）

打印屏幕：http : [//postimage.org/image/6za0g7e4t/](http://postimage.org/image/6za0g7e4t/)

```
ManagementScope oMs = new System.Management.ManagementScope("root\\cimv2");
                //Inventory
                ObjectQuery InventQuery = new ObjectQuery("SELECT * FROM Win32_OperatingSystem");
                ManagementObjectSearcher Inventsearcher = new ManagementObjectSearcher(oMs, InventQuery);
                ManagementObjectCollection InventCollection = Inventsearcher.Get();

                foreach (ManagementObject mgt in InventCollection)
                {
                    outBox.AppendText(mgt["csname"].ToString() + "\n");
                }

                //Performance
                //ObjectQuery PerfQuery = new ObjectQuery("SELECT * FROM Win32_PerfRawData_PerfDisk_PhysicalDisk");
                ObjectQuery PerfQuery = new ObjectQuery("SELECT * FROM Win32_PerfRawData_PerfDisk_LogicalDisk");
                ManagementObjectSearcher Perfsearcher = new ManagementObjectSearcher(oMs, PerfQuery);
                ManagementObjectCollection PerfCollection = Perfsearcher.Get();

                foreach (ManagementObject mgt in PerfCollection)
                {
                    mgt.SetPropertyQualifierValue("DiskWritesPerSec", "DefaultScale", ScaleBox.Text);
                    mgt.SetPropertyQualifierValue("DiskReadsPerSec", "DefaultScale", ScaleBox.Text);
                    outBox.AppendText("Write IOps: " + mgt["Name"].ToString() + " ");
                    outBox.AppendText("Write IOps: " + mgt["DiskWritesPerSec"].ToString() + " ");
                    outBox.AppendText("Read  IOps: " + mgt["DiskReadsPerSec"].ToString() + "\n");
                } 
```

# sql - 在 SQL 中连接三个表

> ID：15545735
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:05:42.253
> 
> 标签：sql

我有三张桌子

```
File
- fileId(pk), code, & description
Hierarchy
 - fileId(fk), folderId(fk), folderKey(pk)
Folder
 - folderId(pk), folderName 
```

在 Hierarchy 表中，文件夹的 fileId 将为空，而文件的 folderId 将为空。我正在尝试加入所有三个以获取哪个文件在哪个文件夹中。

这个查询没有给我任何结果

```
SELECT File.fileId, File.code, File.description, Hierarchy.folderId, 
       Hierarchy.folderKey, Folder.folderName
FROM  File INNER JOIN
      Hierarchy ON File.fileId = Hierarchy.fileId INNER JOIN
      Folder ON Hierarchy.folderId = Folder.folderId 
```

有什么线索吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:14:24.647

尝试这个：

```
Select x.fileId, x.code, x.description, fd.folderId, x.folderKey, fd.folderName
From  Folder fd Left Join (
          select f.fileid, f.code, f.description, h.folderId, h.folderKey
          from [File] f join Hierarchy h 
                    on f.fileId = h.fileId ) x
         on fd.folderId = x.folderId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:14:36.987

如果所有表都有相互对应的数据，则查询没有问题。如果任何两个有并且第三个可能没有相应字段的数据，那么您的内部连接将不会产生任何结果。左加入您的表，其中可能没有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:10:57.603

这行得通吗？

```
SELECT     File.fileId, File.code, File.description, Hierarchy.folderId, 
           Hierarchy.folderKey, Folder.folderName
FROM       File 
JOIN       Hierarchy ON File.fileId = Hierarchy.fileId
LEFT JOIN  Folder ON Hierarchy.folderId = Folder.folderId 
```

# wpf - 如何在 WPF 中取消 Datagrid 选择更改事件？

> ID：15545736
> 
> 赞同：8
> 
> 时间：2013-03-21T11:05:44.703
> 
> 标签：wpf, datagrid

我知道以前有人问过这个问题，但我找不到我要找的东西。

```
 private void dataGrid1_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {

if (oOrdItem.ItemNo == 0)
                {
                    e.Handled = true;
                    MessageBox.Show("Please save the order item", "Save");
                    return;
                }
} 
```

即使我调用`e.Handled = true;` 它也会选择数据网格行。我不想打电话`dataGrid1.SelectedIndex =-1;`，因为它会再次触发 selectionchanged 事件。我也尝试过`dataGrid1.UnSelectAll();` 任何其他方式来取消 selectionchanged 事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-10-25T17:11:03.170

我使用了多种方法来尝试取消选择更改事件，包括选择答案中的方法，但都没有奏效。然而，这对我很有用：

使用数据网格的 PreviewMouseDown 事件处理程序：

```
private void dataGrid_PreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    //get the item I am clicking on (replace MyDataClass with datatype in datagrid)
    var myItem = (e.OriginalSource as FrameworkElement).DataContext as MyDataClass;

    //check if item is different from currently selected item
    if (myItem != dataGrid.SelectedItem)
    {
         //save message dialog
         MessageBoxResult result = MessageBox.Show("Changes will be lost. Are you sure?", "Confirmation", MessageBoxButton.YesNo, MessageBoxImage.Question);

         //if click no, then cancel the event
         if (result == MessageBoxResult.No)
         {
             e.Handled = true;
         }
         else
         {
           //otherwise, reinvoke the click event
           dataGrid.Dispatcher.BeginInvoke(
              new Action(() =>
              {
                 RoutedEventArgs args = new MouseButtonEventArgs(e.MouseDevice, 0, e.ChangedButton);
                 args.RoutedEvent = UIElement.MouseDownEvent;
                 (e.OriginalSource as UIElement).RaiseEvent(args);
              }),
              System.Windows.Threading.DispatcherPriority.Input);
           }
        }
    }
} 
```

如果用户单击“否”，这将成功保持当前行被选中，如果他们单击“是”，则执行将照常继续。希望这对将来的某人有所帮助，因为花了很长时间才找到可以解决看似简单的问题的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T11:24:27.570

您是否考虑过另一种实现方式？在`Binding`更改`SelectedItem`. 插图：

```
<DataGrid ItemsSource="..." SelectedItem="{Binding SelectedEntry}" /> 
```

底层虚拟机可能如下所示：

```
public class SampleVm : ViewModelBase//assuming that you are using such a base class
{
   private object _selectedEntry;
   public object SelectedEntry
   {
       get { return _selectedEntry; }
       set 
       {
           if (!SavePrevItem())
               return;

           _selectedEntry = value;
           RaisePropertyChanged("SelectedItem"); // or something similar
       }
   }

   private bool SavePrevItem()
   {
       // your logic here
   }
} 
```

# c# - 如何在 SQL Server 中保存 .rar 或 .zip 文件

> ID：15545738
> 
> 赞同：-3
> 
> 时间：2013-03-21T11:05:45.857
> 
> 标签：c#, sql-server, winforms, visual-studio-2010

我正在创建一个**c#** windows 应用程序，我想将**rar**或**zip**文件保存并检索到 sql server。有没有办法将 .rar 或 .zip 文件插入到 SQL Server 并再次取回？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:07:05.637

创建一个类型的列`varbinary(max)`。在 C# 中，您可以将内容插入/选择为`byte[]`. 您可以使用`File.ReadAllBytes`或`File.WriteAllBytes`获取文件内容作为`byte[]`或写入它。

请记住：*您也可以随时使用 Google！*

# android - Android - 如何从微调器中获取所选项目的值并将其放入字符串中？

> ID：15545741
> 
> 赞同：10
> 
> 时间：2013-03-21T11:05:57.217
> 
> 标签：android, spinner

我在这个线程上阅读了许多类似的问题，但没有一个对我有帮助......这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Spinner spinner = (Spinner) findViewById(R.id.imc_spinner);
    // Create an ArrayAdapter using the string array and a default spinner layout
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
    R.array.imc_array, android.R.layout.simple_spinner_item);
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    spinner.setAdapter(adapter);

}

public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    // An item was selected. You can retrieve the selected item using

    imc_met = parent.getItemAtPosition(pos).toString();

} 
```

我将 imc_met 声明为`public String imc_met;`. 问题是 imc_met 不包含微调器的选定项的值，但它是空的...

问题出在哪里？

提前谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-21T11:13:10.703

采用：

> imc_met=Spinner.getSelectedItem().toString();

反而：

> imc_met = parent.getItemAtPosition(pos).toString();

**更新：**

似乎您以不正确的方式将侦听器分配给您的微调器，请执行以下操作：

```
spin.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                String imc_met=spin.getSelectedItem().toString();

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T11:08:19.660

试试这个：

```
imc_met=Spinner.getSelectedItem().toString(); 
```

对不起。我忘了

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
        imc_met=Spinner.getSelectedItem().toString();
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-03T06:56:33.637

是

```
imc_met=spinner.getSelectedItem().toString(); 
```

不是

```
imc_met=Spinner.getSelectedItem().toString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-30T06:26:27.027

```
int position = Arrays.asList(getResources().getStringArray(R.array.country_value_array)).indexOf(address.getCountry()); 
```

这将按值获取索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-04T20:56:11.937

如果在 onCreate() 方法中没有定义微调器，那么必须使用这个：

```
String spinner_value = ((Spinner)findViewById(R.id.spinner1)).getSelectedItem().toString(); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-12-21T07:41:09.777

`onCreate()`在您的方法中尝试此代码：

```
spinner.setOnItemSelectedListener(this); 
```

# mod-rewrite - 用斜杠替换 get 变量

> ID：15545748
> 
> 赞同：0
> 
> 时间：2013-03-21T11:06:10.253
> 
> 标签：mod-rewrite

我想通过让每件事更简单来摆脱 url 栏中的 id 谁能告诉我如何制作这样的东西 /math/calculus/limits_topic/vidname

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:12:46.527

使用下面的 .htaccess 文件：

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

将 get 方法变量传递给 URL，然后将其分解

```
$variables = explode("/",$_SERVER['REQUEST_URI']); 
```

例如 ：

```
actual url : http://example.com/math.php?calculus=1&limits_topic=1&vidname=1
rewrite url : http://example.com/math/1/1/1 
```

# android - 如何在 onPostExecute() 中重绘视图

> ID：15545749
> 
> 赞同：0
> 
> 时间：2013-03-21T11:06:12.557
> 
> 标签：android, android-listview, android-asynctask

我正在使用 AsyncTask 获取数据以填充我的 listView。我正在更改列表视图的适配器`onPostExecute()`

```
protected void onPostExecute(ArrayList<JSONObject> result) {

    MarkersListAdapter adapter = (MarkersListAdapter) this.markersList.getAdapter();

    adapter.clear();
    adapter.addAll(result);

    this.markersList.setAdapter(adapter); 
```

然后我想对新视图进行一些更改，但是在程序从`onPostExecute()`. 我想强制 android 在`onPostExecute()`. 我已经尝试`notifyDatasetChanged()`过适配器和`invalidate()`列表视图，但都没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:42:10.730

我设法做到了修改列表并使listView无效。

首先将适配器设置为listView。

```
listView.setAdapter(new MyListAdapter(getActivity(), R.layout.list_cell_layout, objList)); 
```

每当您需要刷新列表时，只需对 objList 进行更改并对 listView 调用 invalidate，如下所示：

```
objList.remove(1);
listView.invalidateViews(); 
```

它对我有用。

# php - 从 Table1 中获取 Row 并从 Table2 中创建或更新 Column

> ID：15545750
> 
> 赞同：0
> 
> 时间：2013-03-21T11:06:13.053
> 
> 标签：php, mysql, database, forms

我想制作一个表，其中包含定义另一个表中的列的行条目。这样，如果表单的问题被更改或添加，我可以在以后轻松更新表格。

例如。

表 1：问题

```
Question            column_name     column_type   characters    default
What is your name?      name           Char         255           ''
When where you born?    birth          char         255           ''
What is today's date?   date           int                        ''
Do you have a pet?      pet            bin                        0 
```

表 2：结果

```
name        birth       date
Cammy      Teaneck      1988
Tommy      Tenefly      2001
Tasha      Brooklyn     1950 
```

在 php 表单中，检查所有列是否存在，如果不存在，则在 table2 中创建它们然后添加条目

```
$collect = db_query("SELECT column_name FROM {Table1}");
while ($data = db_fetch_array($collect)){

$name = $data['column_name'];
$stretch = db_query("SELECT $name FROM {Table2}");
if ($stretch == null or false){

UPDATE TABLE Table2 ($name   $type($char) DEFAULT $default)
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:24:41.953

您所要求的伪代码如下：

```
foreach column in table1 {
  $res = query("select column from table2");
  if( ! $res ) {
    query("alter table add field datatype(size) to table 2");
  }
} 
```

这是一个粗略的实现，我的想法来自： [http ://forums.phpfreaks.com/topic/193330-alter-table-add-column-if-not-exists-possible/](http://forums.phpfreaks.com/topic/193330-alter-table-add-column-if-not-exists-possible/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:28:55.683

请使用mysql中的信息模式来检查这个表是否包含这个字段你可以在信息模式中找到表名这个使用像这样

```
SELECT * FROM  information_schema.COLUMNS WHERE TABLE_NAME='Table2' and COLUMN_name IN ('name','birth','date') 
```

请试试这个

# c# - Windows azure 中默认配置文件提供程序的连接字符串应该是什么？

> ID：15545751
> 
> 赞同：2
> 
> 时间：2013-03-21T11:06:18.517
> 
> 标签：c#, azure, asp.net-mvc-4, asp.net-membership, azure-sql-database

我正在使用 system.web.providers 为我的 Windows azure 项目中的 API 实现基本身份验证。这是我正在使用的默认连接字符串

```
 <connectionStrings>
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-myProject.WebRole-20130117071735;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-myProject.WebRole-20130117071735.mdf;MultipleActiveResultSets=True" /> 
```

在我的 AppData 文件夹中，正在创建 .mdf 文件。但是当我部署到我的 azure 帐户时，出现以下错误。

```
{"Message":"An error has occurred.","ExceptionMessage":"The system cannot find the file specified","ExceptionType":"System.ComponentModel.Win32Exception","StackTrace":null} 
```

我知道该错误没有提供任何信息，但这仅发生在我已进行基本身份验证的 API 上，所以我猜问题是 .mdf 文件不是在云上创建的。

知道我部署到云时连接字符串应该是什么吗？

# android - 从android中的drawable文件夹随机生成图像

> ID：15545753
> 
> 赞同：3
> 
> 时间：2013-03-21T11:06:24.340
> 
> 标签：android, image, random

Android 版本：4.2
我正在开发一个 android 应用程序。我需要从可绘制文件夹随机生成图像。在我的可绘制对象中，我有 45 张不同名称的图像。我的xml代码是：

```
<ImageView
android:id="@+id/imageView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
/> 
```

我试过这段代码：

```
ImageView img=(ImageView)findViewById(R.id.imageView1);
Random rand = new Random();
int rndInt = rand.nextInt(52) + 1;
String drawableName = "photo"+ rndInt;

int resID = getResources().getIdentifier(drawableName, "drawable",  getPackageName());
img.setImageResource(resID); 
```

但是使用此代码，我需要将图像名称更改为`photo1`, `photo2`, ... 我不想这样做。

关于如何实施它的任何建议？谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T11:21:26.653

一种方法是创建一个具有所需图像 ID 的数组。并从该数组中随机取一个。该方法在其他答案中进行了解释。

`random_images_array.xml`另一种方法是在项目的文件夹中创建文件`values`并像这样填充它：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <array name="apptour">
        <item>@drawable/image_1</item>
        <item>@drawable/photo_2</item>
        <item>@drawable/picture_4</item>
    </array>

</resources> 
```

然后您可以从该 xml 数组中获取随机图像：

```
final TypedArray imgs = getResources().obtainTypedArray(R.array.random_images_array);
final Random rand = new Random();
final int rndInt = rand.nextInt(imgs.length());
final int resID = imgs.getResourceId(rndInt, 0); 
```

第三种方法是从 R.drawable 类中获取随机字段：

```
final Class drawableClass = R.drawable.class;
final Field[] fields = drawableClass.getFields();

final Random rand = new Random();
int rndInt = rand.nextInt(fields.length);
try {
    int resID = fields[rndInt].getInt(drawableClass);
    img.setImageResource(resID);
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:12:34.900

怎么样

```
long[] res = {R.drawable.image1, R.drawable.image2}; 
```

或者

```
int[] res = {R.drawable.image1, R.drawable.image2}; 
```

和

```
 int rndInt = rand.nextInt(res .length);

img.setImageDrawable(getResources().getDrawable(res[rndInt])); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T11:22:56.703

明确你的问题——你真正想做什么？

如果您想以随机顺序显示图像，这将是最好的

```
 int resId[]={R.drawable.p1,R.drawable.p2,R.drawable.p2};
         Random rand = new Random();
         int index = rand.nextInt((resId.length- 1) - 0 + 1) + 0;

         imgView.setImageResource(resId[index]); 
```

如果您希望图像的绝对文件路径对其进行重命名，请参阅[本文](http://maulik-dhameliya.blogspot.in/2013/03/how-to-get-absolute-path-of-drawable.html)了解详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T11:19:03.177

```
ImageView img=(ImageView)findViewById(R.id.imageView1);
String[] imageArray = {"Image1", "Image2", etc..};
Random rand = new Random();

int rndInt = rand.nextInt(52) + 1;
int resID = getResources().getIdentifier(imageArray[rand], "drawable",  getPackageName());
img.setImageResource(resID); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:17:05.313

您还必须看到这个问题或答案：-

[从资源android中随机化字符串](https://stackoverflow.com/questions/15517585/randomize-string-from-resources-android/15517657#15517657)

但你必须更换

```
textview.setText() 
```

到

```
img.setImageResource(ran.nextInt(trivias.length)]);` 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-28T17:37:57.410

我发现使用所有可绘制对象设置一个数组，然后通过随机数获取随机索引是可行的。

```
public int[] Images = {R.drawable.1, R.drawable.2, R.drawable.3}; 
```

进而

```
ImageView EightBallImage = findViewById(R.id.EightBallImage);
EightBallImage.setImageResource(Images[new Random().nextInt(Images.length)]); 
```

在点击侦听器内或仅在 onCreate 方法中

# objective-c - 具有 3 列可即时编辑的列表

> ID：15545759
> 
> 赞同：0
> 
> 时间：2013-03-21T11:06:50.473
> 
> 标签：objective-c, uitableview, uitextfield, uitextview, xcode4.5

我想在 iOS 应用程序中添加一个包含 3 列的列表，但我也希望每个字段都可以通过直接单击它来即时编辑，当我按下回车键时它会保存该字段。目前我正在使用 Xcode 4.6.1 和故事板。

这是想法：

![在此处输入图像描述](../Images/9879f50ff823fbf60bbc2b3b10dfb1db.png)

因为我是初学者，所以我想问你是否有办法通过使用 UITableViewCell、UITextField 和 UITextView 来做到这一点，或者还有其他方法可以更快地创建这个列表。你能给我一些教程或类似的链接吗？

另一个问题是：因为每个字段 (Label1,1; Label1,2; L1,3) 将引用同一个对象（例如：电缆；[尺寸]1米；[直径]1厘米），是不是更好NSMutuableArray 中的每一行还是将所有内容都放在 SQLLite 数据库中？

希望有一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:13:35.333

您可以创建自定义单元格。[我在这里](https://stackoverflow.com/questions/15331930/adding-uiimage-view-in-some-cells/15332284#15332284)回答了怎么做

并为单元格上的每个对象添加手势识别器。更改值并重新加载数据。

# entity-framework - 我如何保留我的数据库内容

> ID：15545762
> 
> 赞同：0
> 
> 时间：2013-03-21T11:07:08.153
> 
> 标签：entity-framework, asp.net-mvc-4, code-first

我正在使用实体框架代码拳头模型构建一个 Asp.net Mvc 项目。假设完成了这个项目。第二天，如果我更改模型代码，第一个初始化程序将删除并创建数据库。这是我的数千条记录发生的问题，我如何保存数据库记录？我无法保持种子方法数千记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:16:11.247

关键字是“数据库迁移”，例如在[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)中对 Code First 进行了描述。

# android - JSONArray 到字符串 []？

> ID：15545768
> 
> 赞同：0
> 
> 时间：2013-03-21T11:07:33.420
> 
> 标签：android, nullpointerexception, arrays

如何从 JSONArray 获取字符串数组？

```
String[] d;

protected void parseJsonString(ArrayList<String[]> deptList,String json){
        try {
            JSONArray array=new JSONArray(json);
            int dl = array.length();
            System.out.println(dl);

            for(int i=0;i<array.length();i++){
                d[i] = array.getString(i);

            }
            deptList.add(d);
            for (String e : d) {
                System.out.println(e);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
    } 
```

我调试这段代码，我在这里得到一个错误 NullPointerException：

```
d[i] = array.getString(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:08:36.900

你忘了

```
String[] d = new String[array.length]; 
```

所以字符串数组 d 永远不会被初始化..你尝试访问它的第一个元素说**d[i]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:09:43.677

您没有初始化字符串数组：

```
int dl = array.length();
System.out.println(dl); 
String[] d = new String[dl]; 
```

# android - 当我们扩展 BaseAdapter 时，它是如何工作的？

> ID：15545770
> 
> 赞同：4
> 
> 时间：2013-03-21T11:07:34.803
> 
> 标签：android

当我们扩展时，这些方法是如何工作`Baseadapter`的。

```
public int getCount() 
public Object getItem(int position) 
public long getItemId(int position) 
public View getView(int position, View convertView, ViewGroup parent) 
```

因为如果我们拥有`some_return_type_from_getCount()`，那么`getView()`将从中得到什么，以及当我们将其他人归还`getView()_return_type`给谁时`get_the_return_value_of getView()`。

我完全对这些方法感到困惑。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T11:24:33.323

下面的帖子是根据我的理解。因此，如果您想改进它而不是批评某个特定点，请随意。

`private ArrayList<HashMap<String, String>> mProjectsList = new ArrayList<HashMap<String, String>>();`（您可以使用任何实际包含数据的游标或数组，并希望使用适配器绑定它）

**public int getCount()** -> 为您提供适配器中存在的总元素（如数组的大小）

```
@Override
    public int getCount() {
        // TODO Auto-generated method stub
        return mProjectsList.size();
    } 
```

**public Object getItem(int position)** -> 告诉点击了哪个项目，只需按照我指定位置的方式返回这里。它实际上返回了您单击的整个 biwe 及其所有属性，这就是为什么我们只在此处返回我们单击的位置的视图，以便告诉 BASEADAPTER 类该视图已被单击

```
@Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return mProjectsList.get(position);
    } 
```

**public long getItemId(int position)**将在您点击某个列表项时给出您想要返回的主 ID。当您实际单击列表视图的某些项目时，它会返回长格式的主键和 int 格式的位置两件事。

从这个 getItemId() 方法实际上返回主键。

我们通常在数据库中将主键指定为“_id”，因此当我们使用简单的适配器而不是扩展 baseadapter 类时，它会自动返回 _id 字段作为长格式的主 id。但是我们必须在 BaseAdapter 中手动指定我们想要返回的内容

```
@Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return Long.parseLong(mProjectsList.get(position).get("ID")) ;
// retuning my Primary id from the arraylist by
    } 
```

**public View getView(int position, View convertView, ViewGroup parent)**实际上创建您绑定自定义布局的视图

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        //**position**  index of the item whose view we want.
        //**convertView**   the old view to reuse, if possible. Note: You should 
//check that this view is non-null and of an appropriate type before using. If it is 
//not possible to convert this view to display the correct data, this method can create a 
//new view.
  //                        (Lets see if you have total 100 elements in listview , but 
//currently only 10 are visible in screen. So it will create only 10 items at a time as 
//only those are visible.
                //and when you will scroll that listView it will use these same 10 
//Views(elemnts in rows to display new data, instead of creating 10 more new views, which 
//obviously will be efficeient)
                //While alternatively if we dont extend base adapter (but rather 
//use simple binding using simpleadapter) it will then generates whole list of 100 Views 
//in one short whic will be time consuimng/ memory consuming depending uopn the amount of 
//data to be bind   

        //**parent**    the parent that this view will eventually be attached to

        View rowView = convertView; 
        if (rowView == null) { //always required to be checked as mentioned in google docs 
                               // this line checks for if initially row View is null then we have to create the Row View. Once it will be created then it will always Surpass this check and we will keep on reusing this rowView (thats what actually we are looking for) 
          LayoutInflater inflater = mActivitycontext.getLayoutInflater();  // creating instance of layout inflater to inflate our custom layout
          rowView = inflater.inflate(R.layout.projectslist_row, null); //assigend our custom row layout to convertview whic is to be reused
          ViewHolder viewHolder = new ViewHolder();     // ViewHolder is a custom class in which we are storing are UI elaments of Row  
          viewHolder.mprojectslistRowView = (TextView) rowView.findViewById(R.id.projectslist_row); //assigned the id of actual textView thats on our custom layout to the instance of TextView in our static class       
          rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();
        String projectName = mProjectsList.get(position).get("ProjectName"); // here i am fetching data from my HashMap ArrayList
        holder.mprojectslistRowView.setText(projectName);       // here i am just assigning what to show in my text view 

        return rowView;
    }

    I created this as inner class 
    static class ViewHolder 
    {
        // create instances for all UI elemnts of your Row layout (here i am showing only text data as row of my list view so only instance of TextView has been created)
        // It is a statci class hence will keep this instance alive all the time and thats Why we will be able to  reuse it again and again.
        TextView mprojectslistRowView;
    } 
```

您只需将此适配器绑定到您的控件，因为我们在这里覆盖了方法，所有内容都将自行自动处理。

# symfony - Symfony2中Yaml中的参数作为数组

> ID：15545778
> 
> 赞同：32
> 
> 时间：2013-03-21T11:08:01.840
> 
> 标签：symfony, yaml

我正在这样做，效果很好：

```
parameters:
 array_name1: [a, b, c, d]
 array_name2: [x, y, a, b] 
```

现在我需要在 PHP 中添加 $array_name3[1] = array("a", "b", "c") 等，所以是这样的：

```
parameters:
 array_name3[1]: [1, 2, 3]
 array_name3[2]: [a, b, c]
 array_name3[3]: [x, y, z] 
```

...这当然行不通。我尝试的任何事情似乎都没有被接受。

如何在 Yaml (Symfony2) 中定义多维数组？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-21T11:09:23.140

试试这个

```
parameters:
   array_name3: 
      - [1, 2, 3]
      - [a, b, c]
      - [x, y, z] 
```

或者，如果您想让它具有关联性：

```
parameters:
   array_name3: 
      1: [1, 2, 3]
      2: [a, b, c]
      bla: [x, y, z] 
```

或者，如果您想要更多 -[阅读文档](http://symfony.com/doc/current/components/yaml/yaml_format.html#collections)

# replace - 第二次更换相同的 CCScene 后游戏崩溃

> ID：15545782
> 
> 赞同：0
> 
> 时间：2013-03-21T11:08:06.003
> 
> 标签：replace, cocos2d-iphone, scene, ccscene

这是一个有点简单的问题，但我无法弄清楚。

1-> 应用程序启动（带有 MainMenu 场景）

2-> 开始（子关卡场景被替换）

3->选择第一级（Level1Scene被替换。游戏开始。）

4-> 返回主菜单。（MainMenu 场景被替换）

5-> 开始（子关卡场景被替换）

6-> 选择第一级

7-> 崩溃。

box(32842,0x3f5c9d98) malloc: *** 对象 0x4bed44 错误：释放对象的校验和不正确 - 对象在释放后可能被修改。***在 malloc_error_break 中设置断点进行调试

当我将场景 a 替换为 b 时，a 是否已发布？

据我所知，只有 pushScene 将场景保存在内存中。

```
+(CCScene *) scene {

    CCScene *scene = [CCScene node];

    HelloWorldLayer *layer = [HelloWorldLayer node];

    [scene addChild: layer];

    return scene;
} 
```

场景和图层是自动释放对象。调用 replaceScene 时必须释放。（如果在替换场景时释放了先前的场景。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:56:13.953

我已经解决了这个问题。它很奇怪，但很有效。

我有一个名为 Collectable 的 CCSprite 子类的类。当第二次替换具有 Collectable 对象的场景时，它会发生崩溃。我现在将它转换为 CCNode 和它的作品。

也许它可以帮助某人。

# ios - iOS 开发者计划（99 美元/年）和 iOS 开发者企业计划（299 美元/年）之间的区别？

> ID：15545787
> 
> 赞同：5
> 
> 时间：2013-03-21T11:08:19.570
> 
> 标签：ios, app-store, enterprise-library

**我想知道iOS 开发者计划**和**iOS 企业计划**之间有什么区别以及如何在 iOS 企业计划中公开我的应用程序。有哪些可用的产品，我已经在 iOS 开发者计划（Appstore）中上传了其他我的应用程序，但我没有知道如何在 Enterprise Program 中发布。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T11:19:38.447

`iOS Enterprise Program`- 只能在企业内部分发应用程序，不能分发到 App Store。您可以将应用分发到的设备数量没有限制。可以限制成员可以请求开发人员证书的访问，管理员批准它。无法通过 AppStore 分发应用程序。

`iOS Developer Program`- 只能在最多 100 台设备上测试应用程序。将应用程序分发到 AppStore。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T11:17:56.147

使用企业计划，您只能在公司内分发应用程序，并且只能分发给该公司的员工。

使用普通的 iOS 开发者帐户，您只能通过 de AppStore 分发应用程序。

# version-control - 我应该将第三方 js 代码添加为 git 子模块，还是将其添加到我自己的 repo 中？

> ID：15545790
> 
> 赞同：3
> 
> 时间：2013-03-21T11:08:22.840
> 
> 标签：version-control, language-agnostic

[据我所知，添加像d3](https://github.com/mbostock/d3)这样的第三方代码的普遍接受的做法是将其添加为 git 子模块。这减少了主仓库的大小，但我想在主仓库中有 d3（例如）代码将有助于调试 d3 更改破坏某些使用它的代码的情况。

为什么我不应该只查看最新版本，使用它开发代码并将其推送到我自己的存储库，有什么理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T06:49:08.543

我真的很喜欢为此目的使用[git subtree 。](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)它允许您保留远程存储库的副本，但仍保留该存储库的历史记录，并可以随意推/拉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T22:53:19.177

唯一的原因是：你不需要它。只需使用一些自动管理依赖项的构建工具（如 grunt）。但如果出于任何原因，这不是您的选择，而是使用适合您需求的方式。您可以为 3rd 方库创建一个单独的目录，它会起作用。只是想办法让任何开发人员都可以轻松找出当前使用的版本（例如在文件名中使用版本）

# php - 根据数组结果 PHP 从第二个 bd_table 中选择

> ID：15545793
> 
> 赞同：1
> 
> 时间：2013-03-21T11:08:31.697
> 
> 标签：php, mysql, arrays

请耐心回答这个问题，因为我对 PHP 还很陌生（除了联系表单和登录表单等），但我确实需要一些与保存在 2 个单独表中的数组和数据相关的帮助。场景是我正在网站中构建一个事件部分，并且我将数据保存在“事件”表中：

event_id、event_name、event_time 等

然后我有一个表 (event_followers) 用于事件的追随者：

```
event_id | user_id
event_id | user_id
event_id | user_id 
```

我需要做的是选择特定用户关注的所有事件并将其显示为数组，然后以某种方式获取有关数组/结果中列出的每个事件的特定信息。有什么办法可以做到这一点？

如果这是基本的 php，我很抱歉，但正如我所说，我对它很陌生。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:24:18.603

试试这个 ：

```
$query  = mysqli_query("SELECT * FROM events 
                       LEFT JOIN  event_followers as fol ON event_followers.event_id = events.event_id 
                       WHERE event_followers.user_id='".$user_id "'");
while($row  = mysqli_fetch_assoc($query)){
   print_r($row);
} 
```

`mysql`* 函数已弃用，所以使用`mysqli_`* 或`PDO`，但我不擅长，所以我将代码写在`mysql`.

# sql - SQL - 保证执行所有语句

> ID：15545802
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:09:01.300
> 
> 标签：sql, insert, execution, sequential

我想运行一系列 SQL INSERT 语句。问题是我想要一种**全有或全无的**方法。它们要么全部执行，要么如果其中一个不执行，则不会对数据库进行任何更改。

我能想到的唯一解决方案是使用条件循环，但这意味着很多冗余代码（确定所做的更改、删除表等）是否有更简单的解决方案？

我已经广泛搜索了一个解决方案，但没有找到任何类似的问题，所以如果之前有人问过，我深表歉意

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:11:09.550

你需要使用一个，你可以[在这里](http://msdn.microsoft.com/en-us/library/ms188929.aspx)`Transaction`找到一个 MSDN 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:15:24.910

幸运的是，一个好的数据库具有四个 ACID 属性——原子、一致、集成和持久。

第一个属性 - 原子 - 指的是事务的行为，其中一次提交整个事务或根本不发生任何更改。

阅读 Korth 的《数据库系统概念》一书以供进一步参考。

如果您使用的是 Oracle、MS SQL Server、MySQL、DB2 等出色的数据库，您所要做的就是研究一下它们如何处理事务并将 DML 语句放入这些事务中。

[在此处](http://docs.oracle.com/cd/E11882_01/server.112/e10713/transact.htm)了解 Oracle 的事务支持。

PS-看起来你在银行领域工作。这些人对这些事情非常执着。

# linux - 如何从输入文件中读取路径

> ID：15545804
> 
> 赞同：3
> 
> 时间：2013-03-21T11:09:03.020
> 
> 标签：linux, bash, shell, sh

我有一个 txt 文件，其中包含 xml 文件的路径。现在我想从文本文件中读取路径并打印每个 xml 文件中存在的选项卡数。如何做到这一点？

这是我所做的

带有路径的txt文件

```
/home/user/Desktop/softwares/firefox/searchplugins/bing.xml
/home/user/Desktop/softwares/firefox/searchplugins/eBay.xml
/home/user/Desktop/softwares/firefox/searchplugins/answers.xml
/home/user/Desktop/softwares/firefox/searchplugins/wikipedia.xml
/home/user/Desktop/softwares/firefox/blocklist.xml 
```

计算每个文件中的标签的代码

代码：

```
#!/bin/sh
#
FILEPATH=/home/user/Desktop/softwares/firefox/*.xml
for file in $FILEPATH; do
    tabs=$(tr -cd '\t' < $file  | wc -c);
    echo "$tabs tabs in file $file" >> /home/user/Desktop/output.txt
done
echo "Done!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:15:55.207

其中`/home/user/Desktop/files.txt`包含 xml 文件的列表：

```
#!/bin/bash

while IFS= read file
do 
    if [ -f "$file" ]; then
       tabs=$(tr -cd '\t' < "$file"  | wc -c);
       echo "$tabs tabs in file $file" >> "/home/user/Desktop/output.txt"
    fi
done < "/home/user/Desktop/files.txt"
echo "Done!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:44:34.063

sudo_O 提供了一个很好的答案。但是，有可能不知何故，主要是由于文本编辑器的偏好，您的选项卡被转换为 8 个连续的空格。如果您也希望将它们视为选项卡，则将“选项卡”定义替换为：

```
tabs=$(cat test.xml | sed -e 's/ \{8\}/\t/g' | tr -cd '\t' | wc -c) 
```

完整代码：

```
#!/bin/sh

# original file names might contain spaces
# FILEPATH=/home/user/Desktop/softwares/firefox/*.xml
# a better option would be
FIREFOX_DIR="/home/user/Desktop/softwares/firefox/"

while read file
do
    if [[ -f "$file" ]] 
    then
        tabs=$(cat test.xml | sed -e 's/ \{8\}/\t/g' | tr -cd '\t' | wc -c)
        echo "$tabs tabs in file $file" >> /home/user/Desktop/output.txt
    fi
done < $FIREFOX_DIR/*.xml

echo "Done!" 
```

但这仅适用于您希望将 8 个连续空格计为制表符的情况。

# filter - wince 的 directshow 变换过滤器示例

> ID：15545809
> 
> 赞同：0
> 
> 时间：2013-03-21T11:09:13.770
> 
> 标签：filter, windows-ce, directshow

我为 win7 编写了 DirectShow 过滤器，但将其移植到 wince6 时遇到问题。

有没有将过滤器转换为畏缩的例子？我没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:21:55.847

您可以在此处找到一些带有源代码的 Windows Mobile Directshow fitler：[GDCL - 可供下载的工具和示例](http://www.gdcl.co.uk/downloads.htm)。

# ios - NSNumberFormatter 货币在 iOS 5.1 和 6.x 中显示不同

> ID：15545810
> 
> 赞同：1
> 
> 时间：2013-03-21T11:09:17.190
> 
> 标签：ios, nsnumberformatter

我目前正在开发一个必须显示取决于某种文化的货币的应用程序，我的代码是：

```
NSLocale* myLocale= [[NSLocale alloc] initWithLocaleIdentifier:myCurrency];
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[formatter setLocale:myLocale];
[formatter setGroupingSize:3];
[formatter setAlwaysShowsDecimalSeparator:NO];
[formatter setUsesGroupingSeparator:YES];
NSString *formattedString = [formatter stringFromNumber:[NSNumber numberWithFloat:myNumber]]; 
```

* * *

我的号码 = 1450.79

myCurrency= @"es-ES" (或@"es_ES") iOS 5.1: "€ 1.450,79" iOS 6.0: "1.450,79 €"

myCurrency= @"en-US"（或@"en_US"） iOS 5.1：“$1,450.79” iOS 6.0：“$1,450.79”

myCurrency= @"de-DE" (或@"de_DE") iOS 5.1: "1.450,79 €" iOS 6.0: "1.450,79 €"

据我猜测，iOS 在 5.1 中没有 es-ES（西班牙）的语言环境吗？

# javascript - 在底部附近拖动时在可多普的 DIV 内滚动

> ID：15545811
> 
> 赞同：7
> 
> 时间：2013-03-21T11:09:18.443
> 
> 标签：javascript, jquery, css, drag-and-drop

我在可滚动的 div 中有多个可拖动的 div。当我将它们拖到可放置区域（也是可滚动的 div）时，可放置的 DIV 不会向下滚动。只是页面在移动。怎么说，只有可放置的 div 应该在拖动时滚动？

这是我当前用于使 div 可拖动的 jquery 代码

```
$(".drag_item").draggable({
        helper: 'clone',
        scroll: true, 
        drag: function( event, ui ) {
            $(this).css('z-index','100');
        }
    }); 
```

![在此处输入图像描述](../Images/bbb45c848ad87b94d234e2efcc86f200.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-21T01:01:02.820

我想出了这个解决方案：

```
var direction = {};
var bound = {};
var scrolling = false;
var container = document.getElementById("container");

$('#table-container')
.on('dragstart', draggable, function(event, ui) {
  bound = {
    right : $(container).offset().left + $(container).width() - 50,
    left : $(container).offset().left + 50,
    top : $(container).offset().top + 50,
    bottom : $(container).offset().top + $(container).height() - 50
  };
})
.on('dragstop', draggable, function(event, ui) {
  direction = {};
})
.on('drag', draggable, function(event, ui) {
  direction.right = event.clientX - bound.right;
  direction.left = bound.left - event.clientX;
  direction.up = bound.top - event.clientY;
  direction.down = event.clientY - bound.bottom;

  if ((direction.right > 0 || direction.left > 0|| direction.up > 0 || direction.down > 0) && !scrolling) {
    scroll();
    scrolling = true;
  } else {
    scrolling = false;
  }
});

function scroll() {
  if (direction.right > 0) {
    container.scrollLeft = container.scrollLeft + (direction.right >> 1); //dividing by 2 to soften effect
  }
  if (direction.left > 0) {
    container.scrollLeft = container.scrollLeft - (direction.left >> 1);   
  }
  if (direction.down > 0) {
    container.scrollTop = container.scrollTop + (direction.down >> 1);
  }
  if (direction.up > 0) {
    container.scrollTop = container.scrollTop - (direction.up >> 1);
  }

  if (direction.right > 0 || direction.left > 0 || direction.up > 0 || direction.down > 0) {
    setTimeout(scroll, 100);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:29:41.653

使用“ `overflow=auto`”对我有用。

```
<div style="overflow:auto;"></div> 
```

或者

jQuery 现在支持 scrollTop 作为动画变量。

```
$("#id").animate({"scrollTop": $("#id").scrollTop() + 100}); 
```

您不再需要 setTimeout/setInterval 来平滑滚动。

# groovy - 如何使用geb groovy在组合框中选择一个值

> ID：15545815
> 
> 赞同：2
> 
> 时间：2013-03-21T11:09:25.477
> 
> 标签：groovy, geb

我试图通过 groovy(geb) 从组合框中选择一个值。html代码是：

```
<select id="entity-list-form:statusSearchBtn" name="entity-list-form:statusSearchBtn" size="1" style="width: 200px;">
  <option value="">alle</option>
  <option value="REGISTERED" selected="selected">Wartet auf Bestätigung</option>
  <option value="REJECTED">Registrierung zurückgewiesen</option>
  <option value="APPROVED">Registrierung angenommen</option>
  <option value="UNSUBSCRIBED">Abgemeldet</option>
</select> 
```

我试图通过访问这些元素

```
$("entity-list-form").statusSearchBtn = "alle" 
```

或者

```
$("entity-list-form").statusSearchBtn.value() == "alle" 
```

另一种方法是在页面中添加

```
statusSearchBtn { $('select[name$="entity-list-form:statusSearchBtn"]') } 
```

以及名称仅如实体列表形式的情况。在这种情况下，我尝试过

```
statusSearchBtn = "alle" 
```

或者

```
statusSearchBtn.value() == "alle" 
```

最后一个结束没有任何错误，但没有将所选值更改为“alle”。

前一个以 `No such property: statusSearchBtn for class: geb.navigator.EmptyNavigator.`

我非常感谢任何建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:27:12.740

我认为：

```
$("select", name : "entity-list-form:statusSearchBtn").value('alle')

$("select", name : "entity-list-form:statusSearchBtn").value() = 'alle' 
```

# c# - C# Outlook 附加组件：检查日历的可用性

> ID：15545818
> 
> 赞同：0
> 
> 时间：2013-03-21T11:09:35.823
> 
> 标签：c#, outlook-addin

我正在使用 C# 为 Outlook 开发一个加载项，我希望能够检查日历（我的和其他人的）的可用性。我尝试使用 GetSharedDefaultFolder()，但它只适用于那些特别允许我的人，即使我公司的所有日历都可以被其他人查看（我们可以看到约会的主题和时间）。无论如何我可以获得这些信息吗？谢谢。

**编辑**：我想强调我的问题在于 GetSharedDefaultFolder() 而不是 GetDefaultFolder() （即查看其他人的日历。）另外，我只需要能够检查其他人的日历可用性，而不是完全访问日历。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:15:36.767

试试这个>>

```
 public void GetAllCalendarItems()
        {
            Microsoft.Office.Interop.Outlook.Application oApp = null;
            Microsoft.Office.Interop.Outlook.NameSpace mapiNamespace = null;
            Microsoft.Office.Interop.Outlook.MAPIFolder CalendarFolder = null;
            Microsoft.Office.Interop.Outlook.Items outlookCalendarItems = null;

            oApp = new Microsoft.Office.Interop.Outlook.Application();
            mapiNamespace = oApp.GetNamespace("MAPI"); ;
            CalendarFolder = mapiNamespace.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders.olFolderCalendar);            outlookCalendarItems = CalendarFolder.Items;
            outlookCalendarItems.IncludeRecurrences = true;

            foreach (Microsoft.Office.Interop.Outlook.AppointmentItem item in outlookCalendarItems)
            {
                if (item.IsRecurring)
                {
                    Microsoft.Office.Interop.Outlook.RecurrencePattern rp = item.GetRecurrencePattern();
                    DateTime first = new DateTime(2008, 8, 31, item.Start.Hour, item.Start.Minute, 0);
                    DateTime last = new DateTime(2008, 10, 1);
                    Microsoft.Office.Interop.Outlook.AppointmentItem recur = null;

                    for (DateTime cur = first; cur <= last; cur = cur.AddDays(1))
                    {
                        try
                        {
                            recur = rp.GetOccurrence(cur);
                            MessageBox.Show(recur.Subject + " -> " + cur.ToLongDateString());
                        }
                        catch
                        { }
                    }
                }
                else
                {
                    MessageBox.Show(item.Subject + " -> " + item.Start.ToLongDateString());
                }
            }

        } 
```

似乎与此类似的问题>

[http://www.add-in-express.com/forum/read.php?FID=5&TID=8953](http://www.add-in-express.com/forum/read.php?FID=5&TID=8953)

因此，请关注此链接上的讨论。它可能对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:02:17.047

不要直接访问文件夹 - 使用 Recipient.FreeBusy 或 AddressEntry.GetFreeBusy

# php - 原则 2：无法正确设置 OneToMany 关系

> ID：15545820
> 
> 赞同：1
> 
> 时间：2013-03-21T11:09:40.470
> 
> 标签：php, join, doctrine-orm, codeigniter-2

我有 2 个实体：采访和评论。Interview 与 Comment 具有一对多的单向关系。

这是我用于评论的 yaml 映射文件：

```
Entities\Comment:
  type: entity
  table: Comment
  repositoryClass: Repositories\CommentRepository

  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    parentid:
      type: integer
      nullable: false
      column: parentid
    isactive:
      type: integer
      nullable: false
      column: isactive
    isremoved:
      type: integer
      nullable: false
      column: isremoved
    removaldate:
      type: datetime
      nullable: true
      column: removaldate
    user_name:
      type: string
      length: 255
      nullable: false
      column: user_name
    user_email:
      type: string
      length: 255
      nullable: false
      column: user_email
    user_avatar:
      type: string
      length: 255
      nullable: false
      column: user_avatar
    comment:
      type: text
      nullable: false
      column: comment
    creationdate:
      type: datetime
      nullable: false
      column: creationdate
    rating:
      type: integer
      nullable: false 
```

这是我面试的 yaml 映射文件：

```
Entities\Interview:
  type: entity
  table: Interview
  repositoryClass: Repositories\InterviewRepository

  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    isremoved:
      type: integer
      nullable: false
      column: isremoved
    removaldate:
      type: datetime
      nullable: true
      column: removaldate
    creationdate:
      type: datetime
      nullable: false
      column: creationdate
    rating:
      type: integer
      nullable: false
    anonstitle:
      type: string
      length: 1000
      nullable: false
      column: anonstitle
    anons:
      type: text
      nullable: false
      column: anons
    anonsphoto:
      type: string
      length: 255
      nullable: true
      column: anonsphoto
    interviewtitle:
      type: string
      length: 1000
      nullable: false
      column: interviewtitle
    interview:
      type: text
      nullable: true
      column: interview
    interviewphoto:
      type: string
      length: 255
      nullable: true
      column: interviewphoto
  manyToMany:
    comments:
      targetEntity: Comment
      joinTable:
        name: interviews_comments
        joinColumns:
          interview_id:
            referencedColumnName: id
        inverseJoinColumns:
          comment_id:
            referencedColumnName: id
            unique: true 
```

所以在将模式加载到数据库后，我有 3 个表。其中 2 个是实体表，一个是关系表，它只有 2 列：interview_id、comment_id。但是在为一些采访保留评论对象之后，我在连接表中看不到任何内容。找不到原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:16:46.050

> Interview 与 Comment 具有一对多的单向关系。

不，因为您将这种关系定义为`manyToMany`，`Entities\Interview`而不是在拥有方单向`oneToMany`。

`ManyToMany` mapping requeres a join table. Because one `Interview` can have many `Comment` and one `Comment` can have many `Interview`. This problem cannot be sloved with additional attributes in database tables, so the additional mapping table is created.

**Solution**: If you want to have a one `Interview` with many `Comment`, but one `Comment` have one `Interview`, you have to correct the mapping in yaml `Entities\Interview` to `oneToMany` without `joinTable` (as you defined and it is created).

# jsp - 谷歌折线图x轴在过渡时缩小

> ID：15545821
> 
> 赞同：0
> 
> 时间：2013-03-21T11:09:41.827
> 
> 标签：jsp, jquery, google-visualization

我在我的页面上使用谷歌折线图。每 5 秒刷新一次。但奇怪的是，每次刷新都会导致图表内的线条缩小，尽管图表大小保持不变。

我的剧本——

```
google.load('visualization', '1', {packages:['corechart']});
    google.setOnLoadCallback(drawLine); // call drawChart when google.load() completes
    function drawLine() {
        var gaugeData = new google.visualization.DataTable();
        gaugeData.addColumn('string', 'Time');    // X-Axis
        gaugeData.addColumn('number', 'Memory');    // Y-Axis
        gaugeData.addColumn('number', 'CPU');    // Y-Axis
        var gaugeOptions = {title: 'System Details'};    // Tile of chart
        var gauge;
        var tempArray;    // Store json object value from server
        var tempArray2;    // Modify json object value from server
        gauge = new google.visualization.LineChart(document.getElementById('line_chart_div'));
        setInterval(function(){$.ajax({
              url: "lineChart.jsp",    // Page from which json(new chart values) are fetched
              cache: false,
              data: {search: "test"},
              dataType: "json",
              success: function(json2) {
                  tempArray = (json2.Stats).toString().split(",");    // json2.Stats="1:45|34|56,1:55|67|43,......."
                  var colCount=0;
                  var i=0;    //rowCount
                  gaugeData.addRows(tempArray.length);   // length of array = no. of rows to be inserted(this is always constant)
                  for (i=0; i < tempArray.length; i++){
                      tempArray2 = tempArray[i].split("|");    // tempArray2={"1:45","34","56"}..
                      gaugeData.setValue(i,colCount++,tempArray2[0]);    // column1
                      gaugeData.setValue(i,colCount++,parseInt(tempArray2[1], 10));    // column2
                      gaugeData.setValue(i,colCount++,parseInt(tempArray2[2], 10));    // column3
                      colCount=0;
                  }
                  gauge.draw(gaugeData, gaugeOptions);
              }
          });}, 5000);
    } 
```

我该如何阻止这个！？:|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:21:52.560

找到了解决方案。我不断地向 DataTable 添加行而不删除旧的行。

现在我在更新图表中的新值之前这样做 -

```
gaugeData.removeRows(0,tempArray.length);    //tempArray.length=no. of old rows 
```

# ruby-on-rails - 在 Rails 中将对象（真正的 Mongoid 文档）序列化为任何二进制格式

> ID：15545824
> 
> 赞同：1
> 
> 时间：2013-03-21T11:09:43.397
> 
> 标签：ruby-on-rails, serialization, rabbitmq, amqp, binary-serialization

我实现了处理来自 mongodb 数据库的文档的异步进程。我有类似主线程的东西，它检查集合中是否存在新对象，然后将其放入队列（`RabbitMQ`），以及几个处理来自队列的消息的处理程序（当前是一个）。因此，当我将消息放入队列时，我需要将其序列化为二进制格式，因为我正在使用`amqp`协议。当处理消息时，我需要从二进制数据中返回我的对象​​。顺便说一句，我使用`rabbitmq`via`amqp gem`

我尝试用 做这些事情`BSON gem`，但它只处理哈希并抛出异常，然后尝试序列化对象本身。尝试`msgpack-rails gem`，但它会引发“未定义的方法 .to_msgpack”错误。

所以请帮助我快速到二进制序列化，以及从二进制反序列化。谢谢。

# io - 使用 MPI IO 并行输出到单个文件

> ID：15545828
> 
> 赞同：4
> 
> 时间：2013-03-21T11:09:58.787
> 
> 标签：io, parallel-processing, mpi, output

我有一个非常简单的任务要做，但不知何故我仍然卡住了。

我有一个大数据文件（“File_initial.dat”），应该由集群上的所有节点（使用 MPI）读取，每个节点将对这个大文件的一部分（File_size / number_of_nodes）执行一些操作，最后是每个节点将其结果写入一个共享的 BIG 文件（“File_final.dat”）。文件的元素数量保持不变。

1.  通过谷歌搜索，我了解到，将数据文件写为二进制文件（我在这个文件中只有十进制数字）而不是 *.txt" 文件要好得多。因为没有人会读这个文件，只有计算机会读。

2.  我试图实现自己（但使用格式化的输入/输出而不是二进制文件），但我得到了不正确的行为。

到目前为止，我的代码如下：

```
#include <fstream>
#define NNN 30

int main(int argc, char **argv)
{   
    ifstream fin;

    // setting MPI environment

    int rank, nprocs;
    MPI_File file;
    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &nprocs);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    // reading the initial file

    fin.open("initial.txt");
    for (int i=0;i<NNN;i++)
    {  
        fin  >> res[i];
        cout << res[i] << endl; // to see, what I have in the file
    }  
    fin.close();

    // starting position in the "res" array as a function of "rank" of process
    int Pstart = (NNN / nprocs) * rank ;
    // specifying Offset for writing to file
    MPI_Offset offset = sizeof(double)*rank;
    MPI_File file;
    MPI_Status status;

    // opening one shared file
    MPI_File_open(MPI_COMM_WORLD, "final.txt", MPI_MODE_CREATE|MPI_MODE_WRONLY,
                          MPI_INFO_NULL, &file);

    // setting local for each node array

    double * localArray;
    localArray = new double [NNN/nprocs];

    // Performing some basic manipulation (squaring each element of array)
    for (int i=0;i<(NNN / nprocs);i++)
    {
        localArray[i] = res[Pstart+i]*res[Pstart+i];
    }

    // Writing the result of each local array to the shared final file:

    MPI_File_seek(file, offset, MPI_SEEK_SET);
    MPI_File_write(file, localArray, sizeof(double), MPI_DOUBLE, &status);
    MPI_File_close(&file);

    MPI_Finalize();

    return 0;
} 
```

我知道，在尝试将 double 作为文本文件写入时，我做错了。

应该如何更改代码以便能够保存

1.  作为 .txt 文件（格式输出）
2.  作为 .dat 文件（二进制文件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:29:33.037

您的二进制文件输出几乎是正确的；但是您对文件中的偏移量和要写入的数据量的计算不正确。你希望你的偏移量是

```
MPI_Offset offset = sizeof(double)*Pstart; 
```

不是

```
MPI_Offset offset = sizeof(double)*rank; 
```

否则，您将让每个等级覆盖彼此的数据，因为（例如）等级 3`nprocs=5`开始写入文件中的双数 3，而不是 (30/5)*3 = 18。

另外，您希望每个等级都写`NNN/nprocs`双打，而不是`sizeof(double)`双打，这意味着您想要

```
MPI_File_write(file, localArray, NNN/nprocs, MPI_DOUBLE, &status); 
```

如何写成文本文件是一个更大的问题；您必须在内部将数据转换为字符串，然后输出这些字符串，通过仔细格式化确保您知道每行需要多少个字符。此站点上的[此答案](https://stackoverflow.com/questions/9777828/writing-a-matrix-into-a-single-txt-file-with-mpi)中对此进行了描述。

# python - python / django中的每小时日志轮换

> ID：15545829
> 
> 赞同：1
> 
> 时间：2013-03-21T11:10:00.123
> 
> 标签：python, django, logging

[当我在python logging](http://docs.python.org/2/library/logging.handlers.html#logging.handlers.TimedRotatingFileHandler)和一些实验中检查了 Python 文档时，我不太明白，

> 第一次计算下一次翻转时间时（当创建处理程序时），现有日志文件的最后修改时间，或者当前时间，用于计算下一次轮换发生的时间。

我发现每小时轮换的轮换时间受我开始记录的时间影响，比如 12:23:33 开始，下一次轮换是 13:23:33，这最终会混淆日志文件名。

代码就像，

```
TimedRotatingFileHandler(filename, when='h', interval=1, backupCount=0, encoding=None, delay=False, utc=False) 
```

任何强制每小时日志轮换的方式从 00 分钟开始，例如 13:00:00 而不是日志记录开始的时间，并且每个日志将仅包含其日志文件名指示的小时内的日志？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:57:02.563

查看 的代码`TimedRotatingFileHandler`，您不能强制它以特定的分钟值旋转：根据文档，`logfile last modification time + interval`如果日志文件已经存在或`current time + interval`不存在，则下一次翻转将发生。

但是由于您似乎知道文件名，您可以`TimedRotatingFileHandler`通过首先将日志文件的最后修改时间设置为当前时间来欺骗：

```
from    datetime import datetime
import  os, time

thishour = datetime.now().replace(minute = 0, second = 0, microsecond = 0)
timestamp = time.mktime(thishour.timetuple())

# this opens/creates the logfile...
with file(filename, 'a'):
    # ...and sets atime/mtime
    os.utime(filename, (timestamp, timestamp))

TimedRotatingFileHandler(filename, ...) 
```

（未经测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T12:09:36.883

我还附上另一个答案。Python 日志支持 WatchedFileHandler，如果发现文件信息更新，它将关闭并重新打开具有相同文件名的日志文件。它与 linux logrotate 守护程序一样的系统级日志轮换很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-26T11:47:26.017

```
 logger = logging.getLogger()

    log_format = '%(asctime)s - %(levelname)s - %(name)s - %(message)s'
    logging.basicConfig(format=log_format, level=level)

    # Create 'log' directory if not present
    log_path = os.path.dirname(logfile)
    if not os.path.exists(log_path):
        os.makedirs(log_path)

    handler = TimedRotatingFileHandler(
        logfile,
        when="H",
        interval=1,
        encoding="utf-8")

    handler.setFormatter(logging.Formatter(log_format))
    handler.extMatch = re.compile(r"^\d{8}$")
    handler.suffix = "%Y%m%d"
    handler.setLevel(level)

    logger.addHandler(handler) 
```

# wordpress - php mail() 函数在 Wordpress 中是否有效？

> ID：15545831
> 
> 赞同：0
> 
> 时间：2013-03-21T11:10:04.447
> 
> 标签：wordpress, email

这与我在这里发布的另一个问题有关，但这是另一回事，所以我希望人们不要认为我在重复发布。

我在 Wordpress 中有这样的电子邮件表单。

html

```
 <form action="" id="contactForm">
        <input type="text" id="contactName" placeholder="Name:">
        <input type="text" id="contactEmail" placeholder="Email:">
        <select id="form-subject">
          <option>Subject</option>
          <option>Accounts</option>
          <option>Bookkeeping</option>
          <option>Start Up</option>
          <option>CIS Returns</option>
          <option>Payroll</option>
          <option>Self Assessment</option>
          <option>Tax Returns</option>
          <option>VAT Returns</option>
                        <option>Other</option>
        </select>  
        <textarea id="contactMessage" rows="8" cols="40" placeholder="Message:"></textarea>
                    <p id="submit">Submit</p>
                    <div id="status">
          <p></p>
        </div>
    </form> 
```

jQuery

```
 $j('#submit').click(function(){     
        //
        var nameVal = $j('#contactForm #contactName').val();
        var emailVal = $j('#contactForm #contactEmail').val();
        var messageVal = $j('#contactForm #contactMessage').val();

        //
        $j.post('wp-content/code/contactEngine.php', { theName:nameVal, theEmail:emailVal, theMessage:messageVal }, function(data){
            $j("#status p").html(data);
            $j("#status p").show().fadeOut(3500);
            if(data.indexOf('Thank You')==0) {document.forms[0].reset();}
        });
    }) 
```

php

```
 <?php

      $errors = array();
      $required_fields = array('theName','theEmail','theMessage');
      foreach($required_fields as $fieldname){
         if(!isset($_POST[$fieldname]) || empty($_POST[$fieldname])){
            $errors[] = $fieldname;
         }
      }
      if(empty($errors)){
         $name_field = Trim(stripslashes($_POST['theName']));
         $name = explode(' ', $name_field);
         $firstname = ucfirst($name[0]);
         $email_field = Trim(stripslashes($_POST['theEmail']));
         $message = Trim(stripslashes($_POST['theMessage']));
         //
         $to = "info@ttmt.org.uk";
         $subject = "Email from Website";
         $body = "From: $name_field\n E-Mail: $email_field\n Message:\n $message";
         //
         mail($to, $subject, $body);

             //wp_mail($to, $subject, $body);   

         echo "Thank You $firstname";
      }else{
         echo "Please complete all fields.";
      }

    ?> 
```

php 位于 wp-content 文件夹中的文件夹中，因此 jquery 可以轻松访问它。

```
$j.post('wp-content/code/contactEngine.php', { theName:nameVal, theEmail:emailVal, theMessage:messageVal }, function(data){ 
```

如果表单是否完整，变量会到达 php 并回显回复。

未发送实际电子邮件 - php mail() 函数是否在 Worpdress 中工作。

我尝试了 wp_mail() 函数，但这完全停止了脚本并且我没有得到回声。

我知道有像 Contact Form 7 这样的电子邮件插件，但我认为它们不适用于这个网站。

这是一个具有自定义帖子类型的单页网站，我没有调用任何内容，我认为我需要使用联系表 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:14:55.753

PHP 邮件功能完全独立于 Wordpress。它是一个内置的 PHP 函数，理论上应该适用于所有平台。

我唯一想到的是您的服务器配置有问题。也许您的 hsoting 阻止了邮件功能，或者设置不正确。

查看此示例是否适用于独立文件（[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)）：

```
<?php
    $to      = 'nobody@example.com';
    $subject = 'the subject';
    $message = 'hello';
    $headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

    mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T10:24:03.753

我只是试图解决一个类似的问题。可能使它工作的事情可能包括：

1.  按照[这个](https://stackoverflow.com/questions/19484309/sending-emails-in-wordpress)例子（或类似的）来构建你的代码 - 不知道它是否有任何实际效果。

2.  尝试提供标题，包括此示例中的表单：

    `$headers = array('From: From someone <some@one.com>'. "\r\n",'Content-Type: text/html; charset=UTF-8');`

3.  不允许空变量进入消息、主题或标头 - 用空字符串或类似内容初始化它们 ->`$myvar='';`

4.  如果您的主题包含多字节字符或类似字符，请查看[此](https://stackoverflow.com/questions/447560/php-mail-encodes-subject-line)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T15:49:16.793

如果您不包括 wordpress 文件（wp-load.php 等），它是一个“普通”PHP，**除了它的 location 之外，**与其他 wordpress 文件没有任何共同之处，所以问题应该是 .htaccess 中的一些配置我猜是文件或其他目录配置。您是在为 WP 或类似的东西使用虚拟主机吗？

# actionscript-3 - as3文件下载限制？

> ID：15545834
> 
> 赞同：1
> 
> 时间：2013-03-21T11:10:08.317
> 
> 标签：actionscript-3, flash

我在我的网站上有一个 Flash 下载来下载 pdf 文件。

```
var myfileReference:FileReference = new FileReference();
down_mc.visible = false;
down_comp.visible = false;

var myRequest:URLRequest = new URLRequest("GEORGIA INCORPORATED.pdf");
myfileReference.addEventListener(IOErrorEvent.IO_ERROR, ioError);
output_txt.text = "";

function ioError(event:ErrorEvent):void {
output_txt.text = "Sorry that there is an IO error during the file downloading. The error is:" + "\n" + event;

}

myfileReference.addEventListener(ProgressEvent.PROGRESS, fileDownloadProgress);

function fileDownloadProgress(event:ProgressEvent):void {

    down_mc.visible = true;
}
myfileReference.addEventListener(Event.COMPLETE, fileDownloadCompleted);

function fileDownloadCompleted(evt:Event):void {
    down_mc.visible = false;
    down_comp.visible = true;

}

function downloadFile (event:MouseEvent):void {

    try {
        myfileReference.download(myRequest);
    } catch (error:SecurityError) {

        downloading. The error is:" + "\n" + error; 

    } catch (error:IllegalOperationError) {

        downloading. The error is:" + "\n" + error; 
    }
    }
b1.addEventListener(MouseEvent.CLICK, downloadFile); 
```

问题是有些人想要更改他们正在下载的文件的名称并更改扩展名 .pdf ，从而使文件无法使用。有什么办法可以阻止客户更改扩展名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:31:44.587

在纯 as3 中，您不能强制用户将文件保存在特定扩展名下。唯一的方法应该是使用 Air，让您可以通过 FileStream 对象对其进行控制（您可以选择文件名）。

如果你想用 Air 来做，那么你可以这样做：

```
// Assuming you get your pdf raw data
var pdfData : ByteArray;

var f : File = File.desktopDirectory.resolvePath("myPdf.pdf");

// When user have select a file
f.addEventListener(Event.SELECT, function(e:Event):void{
    var targetFile : File = e.target as File;

    // Check if the selected file have pdf extension
    if(targetFile.nativePath.substr(targetFile.nativePath.length - 4) != ".pdf")
        // If not, add it
        targetFile = new File(targetFile.nativePath + ".pdf");

    // Save the file
    var fs : FileStream = new FileStream();
    fs.open(targetFile, FileMode.WRITE);
    fs.writeBytes(pdfData);
    fs.close();
});

// Ask user to save a file (by default on user desktop)
f.browseForSave("Save PDF"); 
```

# c# - 根据文本框输入在堆栈面板中添加图像

> ID：15545839
> 
> 赞同：0
> 
> 时间：2013-03-21T11:10:20.303
> 
> 标签：c#, wpf, wpf-controls

我正在尝试在堆栈面板中添加存储在 ..\Resources\ebi.png 中的图像。大多数情况下，同一图像将显示在 Stackpanel 中，具体取决于文本框输入“EtReqCount”。以下是尝试过的示例代码，但出现错误提示

> “指定的视觉对象已经是另一个视觉对象的子对象或 CompositionTarget 的根”

以下是尝试过的代码：

```
 private BitmapImage bmp = new BitmapImage(new Uri("WpfApplication1;component/Resources/ebi.png", UriKind.RelativeOrAbsolute));

    private void EtReqCount_TextChanged(object sender, TextChangedEventArgs e)
    {
        StackPanel dynamicStackPanel = new StackPanel();
        dynamicStackPanel.Width = 300;
        dynamicStackPanel.Height = 200;
        dynamicStackPanel.Background = new SolidColorBrush(Colors.LightBlue);
        dynamicStackPanel.Orientation = Orientation.Vertical;
        if (EtReqCount.Text != "")
        {

            for (int k = 1; k <= Int32.Parse(EtReqCount.Text); k++)
            {

                Image img = new System.Windows.Controls.Image(); // This makes the difference.
                img.Source = bmp;
                dynamicStackPanel.Children.Add(img);
            }
        }
    } 
```

XAML 代码：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:16:08.960

很明显。同一个图像已经是 StackPanel 的子图像，您不能一次又一次地添加它。

此外，您应该使用私有成员来保存重复使用的 bmp 以节省资源：

在类方法之外，在 class.cs 内部：

```
private BitmapImage bmp=new BitmapImage(new Uri("/....../ebi.png", UriKind.RelativeOrAbsolute); 
```

您可以创建图像的新实例：

```
for(int i=0; i<...;i++)
{
    img = new System.Windows.Controls.Image();  // This makes the difference.
    img.Source = bmp;
    dynamicStackPanel.Children.Add(img);
} 
```

# opencl - 如何在 OpenCL 中使用 async_work_group_copy？

> ID：15545841
> 
> 赞同：15
> 
> 时间：2013-03-21T11:10:27.087
> 
> 标签：opencl

我想了解如何在 OpenCL 中正确使用 async_work_group_copy() 调用。让我们看一个简化的例子：

```
__kernel void test(__global float *x) {
  __local xcopy[GROUP_SIZE];

  int globalid = get_global_id(0);
  int localid = get_local_id(0);
  event_t e = async_work_group_copy(xcopy, x+globalid-localid, GROUP_SIZE, 0);
  wait_group_events(1, &e);
} 
```

参考[http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/async_work_group_copy.html](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/async_work_group_copy.html)说“从 src 到 dst 执行 num_elements gentype 元素的异步复制。异步复制由因此，工作组中的所有工作项和此内置函数必须由执行具有相同参数值的内核的工作组中的所有工作项遇到；否则结果未定义。”

但这并不能澄清我的问题......

我想知道，如果以下假设是正确的：

1.  对 async_work_group_copy() 的调用必须由组中的所有工作项执行。
2.  调用的方式应该是，所有工作项的源地址都相同，并指向要复制的内存区域的第一个元素。
3.  因为我的源地址是相对的，基于工作组中第一个工作项的全局工作项 ID。所以我必须减去本地 id 以使所有工作项的地址都相同......
4.  第三个参数真的是元素的数量（不是字节大小）吗？

奖励问题：

一个。我可以只使用 barrier(CLK_LOCAL_MEM_FENCE) 而不是 wait_group_events() 并忽略返回值吗？如果是这样，那可能会更快吗？

湾。本地副本对于在 CPU 上进行处理是否也有意义，还是因为它们共享缓存而产生的开销？

问候，斯特凡

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T13:10:49.100

存在此功能的主要原因之一是允许驱动程序/内核编译器有效地复制内存，而无需开发人员对硬件做出假设。

您将需要复制的内存描述为单线程副本，async_work_group_copy 使用并行硬件为您完成。

对于您的具体问题：

1.  我从未见过 async_work_group_copy 仅被组中的某些工作项使用。我一直认为这是因为它需要。我认为 wait_group_events 的阻塞性质迫使所有工作项成为副本的一部分。

2.  是的。所有工作项的源（和目标）地址必须相同。

3.  您可以减去您的本地 ID 以获得正确的地址，但我发现基于 groupId 的地址也可以解决此问题。(get_group_id)

4.  是的。最后一个参数是元素的数量，而不是字节大小。

一个。不会。基于事件的你会发现你的障碍几乎立即被工作项击中，数据不一定会被复制。这是有道理的，因为一些 opencl 硬件甚至可能根本不使用计算单元来执行实际的复制操作。

湾。我认为当您使用本地内存时，cpu opencl 实现可能会保证 L1 缓存的使用。确定这是否表现更好的唯一方法是使用各种设置对您的应用程序进行基准测试。

# matlab - 在 Matlab 中创建一个单元格，单元格的每个部分都有两个数量

> ID：15545844
> 
> 赞同：0
> 
> 时间：2013-03-21T11:10:42.253
> 
> 标签：matlab, matrix

假设我有两个矩阵，如下所述：

```
A =  17    33    49    65    81    97   113   129   145   161   177

B =  31    57    83   109   135 
```

我想把它们放在这样的单元格中：

```
[31, 17]      [57, 17]       [83, 17]      [109, 17]     [135, 17]
[31, 33]      [57, 33]       [83, 33]      [109, 33]     [135, 33]
[31, 49]      [57, 49]       [83, 49]      [109, 49]     [135, 49]
[31, 65]      [57, 65]       [83, 65]      [109, 65]     [135, 65]
[31, 81]      [57, 81]       [83, 81]      [109, 81]     [135, 81]
[31, 97]      [57, 97]       [83, 97]      [109, 97]     [135, 97]
[31, 113]     [57, 113]      [83, 113]     [109, 113]    [135, 113]
[31, 129]     [57, 129]      [83, 129]     [109, 129]    [135, 129]
[31, 145]     [57, 145]      [83, 145]     [109, 145]    [135, 145]
[31, 161]     [57, 161]      [83, 161]     [109, 161]    [135, 161]
[31, 177]     [57, 177]      [83, 177]     [109, 177]    [135, 177] 
```

如何在 Matlab 中使用 C 代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:20:10.037

```
output = zeros(length(A)*length(B),2);
for i=1:length(B)
  for j=1:length(A)
     output(length(A)*(i-1)+j,:) = [B(i) A(j)];
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:26:15.530

### 原生 MATLAB 解决方案

`meshgrid`有时对于生成来自不同集合的所有可能值对的列表很有用：

```
[X, Y] = meshgrid(B, A);
C = reshape(arrayfun(@horzcat, X(:), Y(:), 'Uniform', 0), numel(A), numel(B)); 
```

`C`保存您正在寻找的结果。

### 例子

让我们为以下`A`和做一个例子`B`：

```
A = [10 20 30 40];
B = [1 2 3]; 
```

的目的`meshgrid`是创建一个矩阵，该矩阵沿维度复制向量。所以向量`B`沿第一维`A`复制，并沿第二维复制。结果`[X, Y] = meshgrid(B, A)`是：

```
X =
    10    20    30    40
    10    20    30    40
    10    20    30    40

Y =
     1     1     1     1
     2     2     2     2
     3     3     3     3 
```

两个向量都被复制以产生相同维度的矩阵。

关于`X(:)`，这意味着将`X`其转换为列向量，逐列连接。所以`X(:)`结果`[10; 10; 10; 20; 20; 20; 30; 30; 30; ...]`。这同样适用于`Y(:)`。

现在棘手的部分：对输入向量中的每个元素单独`arrayfun`应用一个函数（在这种情况下，它只是意味着水平串联）。`horzcat`在我们的例子中，有两个输入向量`X(:)`和`Y(:)`，因此`arrayfun`适用`horzcat`于每对对应的元素，最终产生`X`和的所有可能组合`Y`。
此外，由于每个连接结果都是一个向量（包含两个值），因此 的输出`arrayfun`必须是一个元胞数组，因此必须将名为“UniformOutput”的标志设置为 false。
我建议您阅读[官方文档中的](http://www.mathworks.com/help/matlab/ref/arrayfun.html)`arrayfun`更多内容以更好地理解它。

最后一部分是`reshape`，它调整输出元胞数组的维度以匹配示例中的维度（行数与 的长度`A`匹配，列数与 的长度匹配`B`）。

希望这能稍微澄清一下这个解决方案。

# javascript - 无论输入如何，JQuery If 语句都返回相同的数字

> ID：15545845
> 
> 赞同：1
> 
> 时间：2013-03-21T11:10:42.887
> 
> 标签：javascript, jquery

我有一个非常简单的 HTML 表单和一些 JQuery 来计算一个数字。

我遇到的问题是 if 语句返回与输入无关的相同数字：

```
 $(document).ready(function()
    {
        $('input').change(function()
        {
            var behind = escape($('#behind').val());
            var speed = parseInt($('#speed').val());
            var diff;

if (behind = "nse") { diff = '0.83'; }
if (behind = "0.5") { diff = '1.66'; }
if (behind = "0.75") { diff = '2.49'; }

var hsr = speed-diff;
$('#hsr').html(hsr);

        });
    }); 
```

如果我在框中输入 nse，则计算使用 diff = '2.49' 而不是 diff = '0.83' ，因为我已经编程。

包含完整代码的 jsFiddle 页面位于[http://jsfiddle.net/Jucna/1/](http://jsfiddle.net/Jucna/1/)

请问有人可以解释代码有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:11:36.260

在 if 语句中使用比较运算符`==`而不是赋值运算符。`=`

**[现场演示](http://jsfiddle.net/Jucna/4/)**

```
if (behind == "nse") { diff = '0.83'; }
if (behind == "0.5") { diff = '1.66'; }
if (behind == "0.75") { diff = '2.49'; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:12:10.530

> == 比较
> 
> = 分配

```
if (behind == "nse") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:13:27.020

`=`if 语句中缺少 a

```
if (behind == "nse") { diff = '0.83'; }
if (behind == "0.5") { diff = '1.66'; }
if (behind == "0.75") { diff = '2.49'; } 
```

使用一个`=`分配一个值而不是比较它。

# jquery - 单击链接时切换显示两个 div

> ID：15545847
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:10:58.637
> 
> 标签：jquery, ajax

我的 HTML 中有两个 div，一个将显示来自 youtube 的嵌入视频，另一个将显示联系我们的输入表单。视频上方还有一个链接“联系我们”。

最初加载页面时会显示视频，但当用户单击“联系我们”链接时，视频应被隐藏，并且应在其位置显示联系我们的输入表单。

我想使用 jQuery 来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:14:29.953

使用 jQuery`toggle()`或任何其他方法来显示和隐藏您`<div>`的 s.

这是一个简单的例子（[http://jsfiddle.net/8wbXV/](http://jsfiddle.net/8wbXV/)）：

```
<div class="container">
    <div class="video">
        <a href="#">Contact us</a><br />
        Video here
    </div>
    <div class="contact">
        <a href="#">Return to video</a><br />
        Contact form here
    </div>
</div>

<script type="text/javascript">
$(document).ready(function () {
    $('a').click(function () {
        $('.container > div').toggle();
    });
});
</script> 
```

这只是一个简单的例子。链接上的选择器`$('a')`不是您通常使用的，但我在这里使用它只是为了说明。

查看[jQuery API](http://api.jquery.com/)了解更多详细信息。

# angularjs - 在使用 ng-repeat 以角度呈现的表中推送行

> ID：15545852
> 
> 赞同：10
> 
> 时间：2013-03-21T11:11:13.010
> 
> 标签：angularjs, ng-repeat

当客户端单击行时，我想在表格中插入额外的行。不应预取数据，因为我预计最多有 30 行，但每行都有关联的数据，这些数据一次获取是不合理的。

到目前为止，我的方法是使用 ng-repeat 来迭代我的集合并呈现一个表格。当客户端按下该行时，客户端期望该行的详细信息以内联方式显示为按下的行下方的额外行。

```
<tr ng-repeat="court in courts">            
  <td>{{court.name}}</td>
  <td>{{court.number}}</td>
  <td>{{court.nrOfPlayers}}</td>
  <td>
    <a href ng:click="toggle(court.number)">Details</a>  <!-- click toggles extra row with data loaded async -->
  </td>
</tr>
<!-- extra row here --> 
```

我已经设法用 ng-show 以一种骇人听闻的方式在表格下方显示了详细信息，但这不是我想要的。

您如何使用 angular.js 完成此任务？这样做的角度是什么？

这是一个愚蠢的壁球场示例[http://jsfiddle.net/HByEv/](http://jsfiddle.net/HByEv/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T12:20:45.350

我认为一个可能的解决方案可能是[http://jsfiddle.net/HByEv/2/](http://jsfiddle.net/HByEv/2/)。

如果您还想摆脱额外的`<tr ng-show="..."></tr>`.

**编辑：**

正如评论中所指出的，在 AngularJS 1.2+ 中，您现在可以使用`ng-repeat-start`and`ng-repeat-end`来解决这个问题。

Jossef Harush 提供了一个小提琴：http: [//jsfiddle.net/3yamebfw/](http://jsfiddle.net/3yamebfw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:04:58.150

一个样品

```
var app = angular.module('test-app', []);

app.controller('MyController', function($scope, $rootScope, $timeout){

    $scope.copy = {
        p1: ['c1 p1', 'c1 p2'],
        p3: ['c3 p1', 'c3 p2', 'c3 p3', 'c3 p4', 'c3 p5']
    }

    $scope.courts = [
        {
            "number": 1,
            "name": "the best court",
            "nrOfPlayers": 2
        }, {
            "number": 2,
            "name": "the bad court",
            "nrOfPlayers": 0
        }, {
            "number": 3,
            "name": "the other court",
            "nrOfPlayers": 5
        }
    ];

    $scope.loadPlayers = function(court){
        //Implement your logic here
        //Probably using ajax
        $timeout(function(){
            $scope.players = $scope.copy['p' + court.number] || [];
        }, Math.random() * 2000);
    }

    $scope.shouDetails = function(court){
        if(court.nrOfPlayers) {
            delete $scope.players;
            $scope.loadPlayers(court);
        } else {
            $scope.players = [];
        }
    }

}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/8UaML/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:51:35.953

出色地。事实上，您设计的主要问题是您希望在同一个表中显示数千行。它会起作用，但在某些浏览器（IE）中可能很难呈现。对于每一行，您将有一些绑定，并且每个绑定都会添加观察者。您应该始终尽量减少页面中的装订量。我建议您在阵列中使用分页系统。[使用 ng-repeat 对列表进行分页](https://stackoverflow.com/questions/11581209/angularjs-pagination-on-a-list-using-ng-repeater)

如果你真的想在不预渲染行的情况下做你想做的事，你将不得不编辑 dom，如果可以避免，这在 Angular 中不是一个好习惯。就我而言，我会将数据放在页面上的其他位置，在静态区域中。当我做这样的事情时，我在我的页面中添加了一个 twitter 引导模式，当用户单击“更多信息”时，模式会打开并显示所选对象的信息。

# ruby-on-rails - 使用不同的主键更新嵌套属性

> ID：15545855
> 
> 赞同：0
> 
> 时间：2013-03-21T11:11:15.430
> 
> 标签：ruby-on-rails, ruby, activerecord

我有 2 个模型，更新它们时遇到错误。我使用了嵌套属性。

```
 class Channel < ActiveRecord::Base
    self.primary_key = 'id'

    has_many :channel_mappings , primary_key: 'channel_name', foreign_key: 'channel_name'

    attr_accessible :channel_name, :channel_mappings_attributes

    validates_presence_of :channel_name

    accepts_nested_attributes_for :channel_mappings, :allow_destroy => true
end 
```

第二个模型

```
class ChannelMapping < ActiveRecord::Base
  self.primary_key = 'src_channel'

  belongs_to :channel, primary_key: 'channel_name', foreign_key: 'channel_name'

  attr_accessible :src_channel, :channel_name , :src_file_type 
end 
```

更新方法

```
def update
        @channel = Channel.find(params[:id])

        if @channel.update_attributes(params[:channel])
            redirect_to @channel, notice: 'Channel was successfully updated.'
        else
            render action: 'edit'
        end
    end 
```

错误

```
 Type: ActiveRecord::RecordNotFound
      Message:  Couldn't find ChannelMapping with ID=ANY NAME for Channel with ID=2 
```

我知道这与覆盖主键有关。任何帮助都会很有用

数据库/schema.rb

```
create_table "channels", :force => true do |t|
    t.text    "channel_name",                                  :null => false
    t.string  "internal_flag",                  :limit => nil
    t.string  "exception_flag",                 :limit => nil
  end

create_table "channel_mappings", :id => false, :force => true do |t|
    t.text    "src_channel",   :null => false
    t.text    "channel_name",  :null => false
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:50:31.927

好吧，在 Channel.rb 的第一行中，您将主键设置为“id”。那么为什么要在关联中指定 primary_key='channel_name' 呢？这似乎是错误的。

此外，在 db/schema.rb 中查看您对通道表的定义也会很有帮助。

**补充信息后更新**

在您的要点中，我看到您的参数在 channel_mappings_attributes 中包含一个 id 键。但是，您的 schema.rb 显示 channel_mappings 没有 id。这是您需要解决的第一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:13:54.923

你可以尝试 -`@channel.attributes = params[:channel]`而不是`@channel.update_attributes(params[:channel])`

这也将设置所有属性，但不保存。

然后你可以打电话 -

`@channel.save`

这将保存您的属性。

该错误似乎是找不到记录，而不是像更新恢复一样。

首先检查错误日志，如果需要，如果没有任何效果，请在此处发布。

最好使用 if else 条件：

```
if @channel.save
#record saved
else
#error in save
end 
```

然后你就可以知道它的去向。

# algorithm - 高效查询常见子串

> ID：15545856
> 
> 赞同：2
> 
> 时间：2013-03-21T11:11:17.723
> 
> 标签：algorithm, data-structures

我有一个对象的表示，例如 `SubObjects`: `H1`, `H2`, `F1`，`F2` 其中每个`H`anf`F`代表一个特定的较小对象。我希望轻松查询以检查具有 3 个共同子对象的所有表示，例如`H1,H4,F1,F2` 将返回，甚至`H1,H2,F1,F5`. 当我查询具有字符串表示的 3 个部分的对象时，它们共有`H1`, `H2`, `F1`, `F2`.

字符串位置很重要，因此, `H2`,`H1`与, , `F1`,`F2`不同。`H1``H2``F1``F2`

一个蛮力的行动计划是不可能的，因为我有数千个这样的字符串要比较。正在考虑通过使用后缀树来解决问题。

有没有更有效的数据结构可以用来解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:36:29.157

正如我在我的问题中所说，我使用了后缀树。这样的树可以让我真正快速地查询树以查找特定的子字符串并取回包含该特定子字符串的所有对象。我不知道是否存在更好的解决方案，但后缀树对我的问题很有效。 [后缀树：](http://en.wikipedia.org/wiki/Suffix_tree)

# events - NSTextView keyDown 事件

> ID：15545857
> 
> 赞同：2
> 
> 时间：2013-03-21T11:11:18.857
> 
> 标签：events, nstextfield, keydown, nstextview, first-responder

我想用每个 Key 动作触发 keyDown 事件。因此我创建了一个 NSView 的子类。

```
@interface CodrTextView : NSView {
    NSTextField *lineNumberSpace;
    NSTextView *mainTextView;
}

- (id) initWithTextView:(NSTextView *)textView lineNumberSpace:(NSTextField *)textField; 
```

我已经有了方法：

```
- (id) initWithTextView:(NSTextView *)textView lineNumberSpace:(NSTextField *)textField {
   self = [self init];
   if (self){
       mainTextView = textView;
       lineNumberSpace = textField;
   }
   return self;
}

- (BOOL) acceptsFirstResponder {
   return YES;
}

- (BOOL)canBecomeKeyView {
   return  YES;
} 
```

我的计划是计算 textView 中的行数并在 lineNumberSpace 中写入数字。我知道这些方法有效，因为我已经使用按钮上的 IBAction 对其进行了测试。这是方法：

```
- (long) getLineCount{
    NSString *content = [mainTextView string];
    NSUInteger numberOfLines, index, contentLength = [content length];
    for (index = 0, numberOfLines = 0; index < contentLength; numberOfLines++){
         index = NSMaxRange([content lineRangeForRange:NSMakeRange(index, 0)]);
    }

    NSLayoutManager *layoutManager = [mainTextView layoutManager];
    NSUInteger numberOfGlyphs =[layoutManager numberOfGlyphs];
    NSRange lineRange;
    for (numberOfLines = 0, index = 0; index < numberOfGlyphs; numberOfLines++){
         (void) [layoutManager lineFragmentRectForGlyphAtIndex:index
                                           effectiveRange:&lineRange];
          index = NSMaxRange(lineRange);
    }
    numberOfLines++;
    return numberOfLines;
}

- (void)keyDown:(NSEvent *)event {
     NSMutableString *lineNumberString = [NSMutableString string];
     long numberOfLines = [self getLineCount];

     for (int i = 1; i <= numberOfLines; i++){
         [lineNumberString appendString:([NSString stringWithFormat:@"%d \n", i])];
     }
     [lineNumberSpace setStringValue:lineNumberString];
} 
```

这种方法肯定有效。问题是，使用按钮，lineNumberSpace 中的数字正在正确更改，但使用 keyDown 事件它不起作用。我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:39:01.453

啊，看看你的代码，我现在意识到问题所在。

您的“ `CodrTextView`”对象不是“”的子类`NSTextView`（并且，当您以编程方式或通过 XIB 或 Storyboard 实例化对象时，请确保文本视图对象是“”的自定义类，`CodrTextView`而不仅仅是另一个“ `NSTextView`”），所以它是实际上也没有得到“ `acceptsFirstResponder`”或“ `canBecomeKeyView`”方法调用。

您需要`CodrTextView`从“ `NSTextView`”而不是“”下降“ `NSView`”，*或者*您需要创建另一个**将**接收“ ”事件的子类“ `NSTextView`”对象，然后它将调用计算进入“ ”的字符串的代码主视图。**`keyDown:``lineNumberSpace`**

 **这对你现在有意义吗？**

# c++ - openCV load_object_detect 函数

> ID：15545858
> 
> 赞同：0
> 
> 时间：2013-03-21T11:11:25.573
> 
> 标签：c++, opencv

我正在尝试在 openCV 中运行人脸检测代码，我不想使用命令提示符来运行它，但我不知道将什么作为 load_object_detect 的输入参数。这是代码中的示例：

```
 CvHaarClassifierCascade* cascade = load_object_detector(argv[2]); 
```

为了让上述命令执行代码应该从我现在试图避免的命令提示符运行......

我只知道它的输入类型是 const char* cascade_path...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:24:45.150

`argv[2] = whatever path you want to put;` 在调用函数之前尝试

像这样的东西

```
#include<iostream>
using namespace std;

int main(int argc , char *argv[])
{

argv[2] = "SuvP";

std::cout<<"Hey "<<argv[2]<<endl;

return 0;
} 
```

输出是`Hey SuvP`

命令行的参数存储在数组 argv 中。或者，我们在代码中的数组中填充数据，而不是在这种情况下从命令行填充数据。

# r - 处理可选包依赖项的正确方法

> ID：15545869
> 
> 赞同：7
> 
> 时间：2013-03-21T11:11:52.207
> 
> 标签：r, package, dependency-management

在我正在开发的一个包中，提供了几种不同的估计方法。通常，这些中的每一个都取决于其他包提供的功能（在某些情况下，具有版本要求）。

到目前为止，我只是将所有这些包放在我的描述文件的“依赖”部分，但是我自己的包现在“依赖”的包的数量，即使对于大多数用户来说，只有其中一个是相关的，所以我希望只能根据需要安装/加载软件包？关于编写 R 包的文档有时有点简洁，并且自最近的 R 版本以来已经发生了一些变化，所以也许这里的任何人都可以提供最新的？

只是为了说明，这是典型的模式：

```
doSomethingImportant<-function(params, workerFunction)
{
   #blabla
   workerFunction(partofparams)
   #moreblabla
} 
```

然后我会有

```
wfA<-function(partofparams)
{
   #use something from package A
} 
```

和

```
wfB<-function(partofparams)
{
   #use something from package B
} 
```

用户会调用这个函数：

```
result<-doSomethingImportant(params, wfA) 
```

每个用户通常都偏爱其中一个 wfX。理想情况下，当用户（第一次）使用其中一个 wfX 时，我希望按需安装/加载它，但如果这不可能，我希望尽快发出警告，它会失败（在事实上，就我而言，在实际尝试从 doSomethingImportant 调用 workerFunction 之前可能会进行大量准备工作，如果最终没有正确的包，这些准备工作将全部丢失。

您能否建议如何正确处理此问题并尽可能方便用户使用？

# python - 为什么不能在对象方法之外创建对象属性？

> ID：15545870
> 
> 赞同：0
> 
> 时间：2013-03-21T11:11:52.403
> 
> 标签：python

在研究python类属性和实例属性时，我知道不可能在对象方法（或者可能是类方法）之外创建对象属性。像下面的代码将在 python 中生成一个“NameError”。

```
class test(object):
    def __init__(self):
        self.lst = []
    self.str = 'xyz' 
```

为什么python不允许这样做？我不是质疑语言创造者的决定，而是质疑这背后的任何原因。就像，它在技术上是不正确的还是这种行为的任何其他缺点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:12:43.993

您正在定义一个类，因此没有实例可以指向外部方法。删除 `self:

```
class test(object):
    def __init__(self):
        self.lst = []
    str = 'xyz' 
```

`self`指向*实例*，而不是类。您要么需要创建一个实例并直接分配给属性 ( `test().str = 'xyz'`) *，要么*需要在方法内部（何时`self`可以实际引用实例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:14:29.623

`self`不是python中的特殊名称，您可以使用\

```
class test(object):
    def __init__(foo):
        foo.lst = [] 
```

如果你想。类的每个方法都将实例显式传递给它作为第一个参数，您可以随意调用它。试图访问方法范围之外的参数显然是行不通的。

# diagnostics - CAN 诊断

> ID：15545872
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:11:57.577
> 
> 标签：diagnostics, can-bus, obd-ii

我必须开发一个与汽车诊断工具通信的智能手机应用程序。一般来说，诊断中使用的协议是KWP2000、UDS和OBD。我的问题是“如何与汽车通信？以及如何使用这些协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-27T12:01:53.937

也可以参考UDS： http://neweagle.net/support/wiki/index.php?title= [Unified_Diagnostic_Services](http://neweagle.net/support/wiki/index.php?title=Unified_Diagnostic_Services)

如果您的汽车有 CAN 总线，那么您可能需要：

1.  使用一个CAN设备连接到CAN总线（分别配置）
2.  实现（从任何地方获取）TP CAN 消息支持
3.  在 TP CAN 消息上使用 UDS 协议编写您的实现。

问候，

德米特里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:36:58.710

*大多数*汽车都带有“[车载诊断端口](http://en.wikipedia.org/wiki/On-board_diagnostics)”。您可以使用此端口与汽车内部通信。汽车的引擎将在任何诊断协议（包括 KWP2000、ISO15765 等）中向此端口发送数据。

你应该设计一些可以从你的手机通信到这个端口的东西。它可以是支持蓝牙的设备，连接在此端口上，它将接收数据并通过蓝牙传输到您的手机。例如，[这个](https://rads.stackoverflow.com/amzn/click/com/B004KL0I9I)

从那时起，您可以出于任何原因处理手机中的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:18:36.280

自 2001 年以来的汽车在欧洲拥有 OBD-II 端口。美国自 1996 年以来我认为。

周围有各种类型的 OBD-II 连接器。内部的 ELM327 芯片使与汽车的通信变得容易，因为该芯片为我们提供了基于 ASCII 的通信。您所要做的就是发送正确的命令，您将得到 ASCII 格式的响应。

如果应用程序应该在智能手机上运行，​​我有几个警告要给你。大多数连接器都实现了蓝牙，Android 将支持它，但 WP7、Win8RT 和 iPhone 不支持您必须设置的蓝牙串行端口通信。还有基于 wifi ad-hoc 的连接器，它们可能是可能的。

[http://en.wikipedia.org/wiki/OBD-II_PIDs](http://en.wikipedia.org/wiki/OBD-II_PIDs)
在维基百科上有一个命令列表，您可以发送这些命令来检索实时数据。

# c++ - 从 BGL 图中提取邻接矩阵

> ID：15545877
> 
> 赞同：8
> 
> 时间：2013-03-21T11:12:09.733
> 
> 标签：c++, boost, boost-graph

使用**Boost Graph Library**我正在寻找一种从由或表示的底层图中**提取邻接矩阵**的方法。我想结合使用这个矩阵来求解联立线性方程组。`boost::adjacency_list``boost::adjacency_matrix``boost::numeric::ublas`

这是一个让您开始的最小示例：

```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/adjacency_matrix.hpp>

using namespace boost;

typedef boost::adjacency_list< listS, vecS, directedS > ListGraph;
typedef boost::adjacency_matrix< directedS > MatrixGraph;

int main(){ 

  ListGraph lg; 
  add_edge (0, 1, lg); 
  add_edge (0, 3, lg); 
  add_edge (1, 2, lg); 
  add_edge (2, 3, lg); 

  //How do I get the adjacency matrix underlying lg?

  MatrixGraph mg(3); 
  add_edge (0, 1, mg); 
  add_edge (0, 3, mg); 
  add_edge (1, 2, mg); 
  add_edge (2, 3, mg); 

  //How do I get the adjacency matrix underlying mg?

} 
```

如果有人能想出一种有效的方法来获得邻接矩阵，我将非常感激。理想情况下，该解决方案与 uBLAS 兼容。我想知道是否有一种方法可以避免整个图表的迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-20T22:54:45.443

将 adjacency_list 转换为 adjacency_matrix 的最简单方法是使用`boost::copy_graph`

您的代码`MatrixGraph mg`应修改如下

```
#include <boost/graph/copy.hpp>
#include <cassert>

using namespace boost;

typedef boost::adjacency_list< listS, vecS, directedS > ListGraph;
typedef boost::adjacency_matrix< directedS > MatrixGraph;

int main(){

    ListGraph lg;
    add_edge(0, 1, lg);
    add_edge(0, 3, lg);
    add_edge(1, 2, lg);
    add_edge(2, 3, lg);

    //How do I get the adjacency matrix underlying lg?

    //How do I get the adjacency matrix underlying mg?   
    MatrixGraph mg( num_vertices(lg));
    boost::copy_graph(lg, mg);
} 
```

现在，要使用 ublas 或类似的邻接矩阵，您可以编写一个简单的“访问”类以使语法更符合 ublas。继续前面的片段，我们得到：

```
template <class Graph>
class MatrixAccessor
{
public:
    typedef typename Graph::Matrix Matrix; //actually a vector<
    typedef typename Matrix::const_reference const_reference;

    MatrixAccessor(const Graph* g)
        : m_g(g)
    {
        static_assert(boost::is_same<size_t, typename Graph::vertex_descriptor>::value, "Vertex descriptor should be of integer type");
    }

    const_reference operator()(size_t u, size_t v) const
    {
        return m_g->get_edge(u, v);
    }

    const Graph* m_g;
};

void use_matrix(const MatrixGraph & mg)
{
    MatrixAccessor<MatrixGraph> matr(&mg);
    assert(matr(0, 1) == 1);
    assert(matr(0, 2) == 0);
} 
```

如果您的 adjacency_matrix 具有一些边缘捆绑属性，您可能需要修改 MatrixAccessor 中的 operator()。

根据您使用多少 uBLAS，您可以进一步细化 MatrixAccessor。例如，`out_edge_iterator`对于 MatrixGraph 的给定顶点，实际上是矩阵列上的迭代器；vertex_iterator 可以被视为矩阵行等的迭代器。

当然，图矩阵是不可变的，因此应谨慎使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-15T09:12:23.980

就像一个简单的方法，我不知道它有多少效率。这就是我想出的：

我使用了一个小世界图并打印了邻接矩阵。

```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/small_world_generator.hpp>
#include <boost/random/linear_congruential.hpp>

using namespace std;
using namespace boost;

typedef adjacency_list<vecS, vecS, undirectedS> Graph;
typedef small_world_iterator<boost::minstd_rand, Graph> SWGen;

int main()
{

    boost::minstd_rand gen;
    int N = 20;
    int degree = 4;
    double rewiring = 0.;

    Graph g(SWGen(gen, N, degree, rewiring), SWGen(), 20);

    cout << num_edges(g)<< '\n';

    typedef graph_traits<Graph>::edge_iterator edge_iterator;
    pair<edge_iterator, edge_iterator> ei = edges(g);

    for(edge_iterator edge_iter = ei.first; edge_iter != ei.second; ++edge_iter) {
        cout << "(" << source(*edge_iter, g) << ", " << target(*edge_iter, g) << ")\n";
    }
    vector<vector<int> > mat(N,vector<int>(N));

    for (edge_iterator edge_iter = ei.first; edge_iter != ei.second; ++edge_iter){
        int a = source(*edge_iter, g);
        int b = target(*edge_iter, g);
        mat[a][b] = 1;
        mat[b][a] = 1;
    }

    for (int i=0; i<N; i++){
        for (int j=0; j<N; j++){
            cout << mat[i][j]<<" ";
        }
        cout <<endl;
    }

  return 0;
} 
```

**输出：**

```
0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 
1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 
1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 1 
1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 1 
1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T14:44:35.697

的[当前版本](http://boost.cvs.sourceforge.net/viewvc/boost/boost/boost/graph/adjacency_matrix.hpp?revision=1.47&view=markup)有`adjacency_matrix`一个未记录的公共成员`m_matrix`（见第 640 行）。但是，它是元组的平面向量`<bool, bundled_properties>`（第 512 行）。由于底层存储看起来与 ublas 矩阵如此不同，因此除了迭代边之外，很可能无法将图转换为矩阵。

# spring-mvc - Spring mvc 3.2 和 extjs 4.1.3：我是否必须为所有 requestMapping 路径定义 mvc:resources 映射？

> ID：15545878
> 
> 赞同：3
> 
> 时间：2013-03-21T11:12:09.750
> 
> 标签：spring-mvc, extjs4

当 exjs 尝试加载我的控制器或我的图像时，我在使用 spring mvc 3 和 extjs 4 或更准确地说是路径问题时遇到问题。

我的 webapp 的结构是这样的：

```
src
-- webapp
   -- app
   -- extjs4.1.3
   -- css
   -- icons
   -- WEB-INF
      -- jsp
   app.js 
```

我有一个这样注释的控制器

```
@RequestMapping(value = "/path/init.do", method = RequestMethod.GET) 
```

它返回与我的 WEB-INF/jsp 文件夹中的 jsp 匹配的视图名称。这个jsp加载extjs文件。

视图解析器：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
        p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" /> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

<display-name>tiana Web Application</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:/spring/application-context.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

因为我的 url 模式是“/”，所以我不得不使用自 spring 3.0.5（大约）以来可用的 mvc:resources 魔术标签，如下所示：

```
<mvc:resources mapping="/css/**" location="/css/" />
<mvc:resources mapping="/app/**" location="/app/" />
<mvc:resources mapping="/extjs-4.1.3/**" location="/extjs-4.1.3/" />
<mvc:resources mapping="/app.js" location="/app.js" /> 
```

我知道如果我将所有这些东西放在资源文件夹中会更好。我只需要写：

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

但我不认为它会解决我的问题

我的jsp文件是这样的：

```
 <%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <html>
    <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>My jsp title</title>
    <link rel="stylesheet" type="text/css" href='<c:url value="/extjs-4.1.3/resources/css/ext-all.css" />'>

    <link rel="stylesheet" type="text/css" href='<c:url value="/css/myStyle.css" />'>
    <script type="text/javascript" src='<c:url value="/extjs-4.1.3/ext-all-debug.js" />'></script>
    <script type="text/javascript" src="<c:url value="/app.js" />"></script>
   </head>
   <body></body>
   </html> 
```

首先，我必须使用 jstl 标签编写对资源文件的引用。没有这些标签，如果我保留像 /myresource.xxx 这样的 url，则 url 将是

```
localhost:8080/myresource.xxx 
```

如果我写 myresource.xxx 没有斜线，它是

```
localhost:8080/mywebapp/path/myresource.xxx 
```

但它的工作原理是这样的，任何建议都可以跳过 jstl 依赖项，但它可以工作。

我真正的问题是我的 app.js 将加载 extjs 的控制器，为此它使用某种“window.location”来构造 url。就我而言，它将是

```
localhost:8080/mywebapp/path/app/controller/myController.js 
```

但我希望它是

```
localhost:8080/mywebapp/app/controller/myController.js 
```

如果我在我的 extjs 文件中放一个图标，我会遇到同样的问题，网址将是

```
localhost:8080/mywebapp/path/icons/myIcon.png 
```

并不是

```
localhost:8080/mywebapp/icons/myIcon.png as expected. 
```

我可以通过添加来解决这个问题

```
<mvc:resources mapping="/path/app/**" location="/app" />
<mvc:resources mapping="/path/icons/**" location="/icons" /> 
```

**但我可以相信，每次我在 Spring mvc 控制器中定义一个新的 requestMapping 时，例如“path2”，我都必须定义一个相应的 mvc:resources 映射。**

我试图在我的 jsp 文件中定义一个全局“baseUrl”javascript 变量，在 app.js 文件中用这个变量作为 appFolder 的前缀，并用这个变量作为 extjs 代码中使用的所有图标和东西的前缀，但这也不可接受。

我错过了什么？我用谷歌搜索了很多，我找到了这个“/” url-pattern 和 mvc:resources 方法（这对于 spring mvc webapp 来说似乎很干净）但我无法解决我的“uri”问题（我不知道路径是如何生成的requestMapping 以真正的英文调用）。

如果你能帮助我，非常感谢，如果不能，谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:06:58.917

您可以尝试将所有资源（我不确定您的哪些内容是静态资源）放入：

```
-- webapp
   --resources
      -- app
      -- extjs4.1.3
      -- css
      -- icons
   -- WEB-INF
   -- jsp
   app.js 
```

然后定义一个映射：

```
 <mvc:resources mapping="/resources/**" location="/resources/" /> 
```

此时，您将访问 css 文件夹，例如使用：

```
 <c:url value="/resources/css/myStyle.css" /> 
```

以及您的任何其他路径以相同的方式，或者您可以尝试使用（但未经测试）：

```
 <mvc:resources mapping="/**" location="/resources/" /> 
```

我想你会访问你的css文件夹：

```
 <c:url value="/css/myStyle.css" /> 
```

# java - 从 Gridview 水平和垂直地在图像中制作单词

> ID：15545880
> 
> 赞同：1
> 
> 时间：2013-03-21T11:12:13.027
> 
> 标签：java, android, gridview

我的问题是我想连接单词并从网格视图的单元格位置水平和垂直地读取它。我有 gridview 位置，我在 gridview 上放置的词是图像和代码。 ![在此处输入图像描述](../Images/b4858484836435ee7ab3bd5fe053ac08.png)

```
private  HashMap<String,String> result = new HashMap<String, String>();

 String postionOfCell = GridViewPosition;

 String alphabetName = imageView.getTag().toString();

   m.put(postionOfCell, name); 
```

我把名字和职位这样写。！

[取名 BAC ,BA , AA](https://i.stack.imgur.com/OFMvP.png)

# c# - 具有相关实体的 SQLBulk 复制（实体框架）

> ID：15545882
> 
> 赞同：1
> 
> 时间：2013-03-21T11:12:16.317
> 
> 标签：c#, .net, sql-server-2008, entity-framework, sqlbulkcopy

假设我有以下实体。（为简洁起见进行了大幅简化，但包括了关键属性）

```
public  class Crime 
{

       [Key]
       public int CrimeId {get;set;}
       public virtual ICollection<Victim> Victims {get;set;}
       public virtual CrimeDetail Detail {get;set}

}

public class Victim
{
       [Key]
       public int VictimId {get;set;}
       public string VictimCategory {get;set;}
}

public class CrimeDetail
{
       [Key]
       public int id {get;set;}
       public string DetailText {get;set;}
} 
```

我有 600,000+ 条记录要插入到 SQL Server 2008 Express R2 中，使用 Entity Framework 4.4 需要相当长的时间。

理想情况下，我想用`SQLBulkCopy`批量插入这些记录，但由于它不支持复杂类型（至少不是开箱即用），所以我试图找到其他一些潜在的解决方案。

如有必要，我愿意改变我的模型。

编辑：[MSDN 中的 AsDataReader Extension 方法](http://archive.msdn.microsoft.com/LinqEntityDataReader/Release/ProjectReleases.aspx?ReleaseId=389)在这种情况下会有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:18:28.017

当遇到同样的问题时，我们最终会使用 EF 生成代码优先的数据库和用于 SQLBulkCopy 的强类型生成数据集。

（我们从未真正编写过这些类，它们是使用 xsd 定义的 1-10gb xml 文件中的 xsd util 生成的。我现在正试图回想当我们没有从同一个 xsd 生成类型化数据集时，但这似乎与您的问题无关.)

根据您获取这 600k+ 记录的方式，您可以更改代码以使用生成的强类型数据集，或者使用一些对象到对象映射器将您的 EF POCO 对象映射到数据集，因为属性将被命名为相同。

这是一个关于生成强类型数据集的[链接。](http://msdn.microsoft.com/en-us/library/wha85tzb.aspx)

这是一个如何使用 SqlBulkInsert的[示例。](http://visualstudiomagazine.com/articles/2013/03/01/effective-use-of-sql-bulk-insert.aspx)

# java - sip servlet/rest 服务项目中的 Mobicent EJB 注入

> ID：15545888
> 
> 赞同：2
> 
> 时间：2013-03-21T11:12:38.207
> 
> 标签：java, rest, ejb, jboss7.x, sip

问题：在一个项目中使用 REST 服务和 SIP Servlet 会导致异常，如果还使用通过 EJB 的注入。

哪些步骤将重现该问题？

1.  在项目中添加 Sip Servlet 和 REST 服务（REST 服务通过扩展 Application 的类激活并使用 @ 注释`ApplicationPath`，这是 Java EE 6“无 XML”方法，激活 JAX-RS）

2.  使用 REST 服务和/或 SIP servlet 不会产生任何错误。

3.  通过@EJB 将注入的服务添加到项目中。

4.  使用 REST 服务会导致以下异常：

错误：

```
Exception sending request destroyed lifecycle event to listener instance of class org.jboss.weld.servlet.WeldListener: java.lang.NullPointerException
    at org.jboss.weld.context.AbstractBoundContext.deactivate(AbstractBoundContext.java:71) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.context.http.HttpRequestContextImpl.deactivate(HttpRequestContextImpl.java:86) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.jboss.weld.servlet.WeldListener.requestDestroyed(WeldListener.java:103) [weld-core-1.1.8.Final.jar:2012-04-29 10:45]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.16.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.16.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.16.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679) [jbossweb-7.0.16.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931) [jbossweb-7.0.16.Final.jar:]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37] 
```

我在用：

*   Mobicents：mss-2.0.0.FINAL-jboss-as-7.1.2.Final
*   操作系统：Mac OS X 10.6.8、Ubuntu 12.04、Windows 8

我还将问题发布到[Google Code](https://code.google.com/p/sipservlets/issues/detail?id=187)，其中已上传测试项目并可用于运行实际测试用例。src/test/java 中有一个测试文件正在调用部署的 REST 服务。在原始项目中，这应该会导致上述错误。

如果 SIP Servlet 未激活（例如通过重命名 sip.xml），调用 REST 服务时不会发生错误。

如果 SIP Servlet 被激活并且注入的服务`HelloWorldService`被移除，那么调用 REST 服务也不会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:56:49.030

有2个解决方案。您等到weld-core-1.1.8.FINAL.jar 更新！或者您获取源代码并在 org.jboss.weld.context.AbstractBoundContext 中进行硬修复：

```
public void deactivate() {
if (getBeanStore() != null )
{ getBeanStore().detach(); super.deactivate(); }
} 
```

有关更多信息，请参阅[https://issues.jboss.org/browse/WELD-1020?_sscc=t](https://issues.jboss.org/browse/WELD-1020?_sscc=t)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T17:49:19.573

我正在运行 mss-3.0.0-SNAPSHOT-jboss-as-7.1.3.Final，并通过使用 @EJB 而不是 @Inject 注入 EJB（并删除 beans.xml 文件）来解决此问题。

我的应用程序部署为由多个模块组装而成的 EAR：EJB、SIP servlet 和 web servlet 以及 JAX-RS/RESTEasy 应用程序和资源（打包在一起）。

# transparency - 盒子阴影中的透明度

> ID：15545897
> 
> 赞同：3
> 
> 时间：2013-03-21T11:12:56.287
> 
> 标签：transparency, css

我正在为我的网站创建一个标题。标题的背景设置为水平渐变，背景从左到右变得透明。

**我想做什么**

我可以为标题创建框阴影，以便阴影在从左到右时也变得透明。

**我尝试了什么**

```
width: 500px;
height: 50px;
position: absolute;
color: #535353;
left: 45%;
top: 50%;
margin-left: -150px;
margin-top: -200px;
background: -moz-linear-gradient(left, rgba(179,218,221,0.65) 0%, rgba(249,249,249,0) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(179,218,221,0.65)), color-stop(100%,rgba(249,249,249,0))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left, rgba(179,218,221,0.65) 0%,rgba(249,249,249,0) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left, rgba(179,218,221,0.65) 0%,rgba(249,249,249,0) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left, rgba(179,218,221,0.65) 0%,rgba(249,249,249,0) 100%); /* IE10+ */
background: linear-gradient(to right, rgba(179,218,221,0.65) 0%,rgba(249,249,249,0) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a6b3dadd', endColorstr='#00f9f9f9',GradientType=1 );
border-radius: 5px;

    box-shadow: -5px 0 4px -1px rgba(0, 0, 0, 0.5);
-moz-box-shadow: -5px 0 4px -1px rgba(0, 0, 0, 0.5);
-webkit-box-shadow: -5px 0 4px -1px rgba(0, 0, 0, 0.5); 
```

通过使用以下我几乎可以得到它，但是透明渐变看起来不太好。

**小提琴**

[http://jsfiddle.net/p7W7M/](http://jsfiddle.net/p7W7M/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:45:24.083

这可以工作，但并不完美[jugaad]

```
 box-shadow:60px 5px 0 #ffffff,60px -5px 0 #ffffff,-4px 0px 5px  #000000; 
```

[在小提琴](http://jsfiddle.net/sahilpopli/p7W7M/4/)

# javascript - 谷歌浏览器扩展 jquery 未加载

> ID：15545899
> 
> 赞同：2
> 
> 时间：2013-03-21T11:12:58.017
> 
> 标签：javascript, jquery, google-chrome-extension

在以下 google chrome 扩展文件中，为什么我不能在 myscript.js 文件中使用 jquery 脚本，jquery 是否未加载到 myscript.js 文件中，应在清单文件中进行哪些更改以在 myscript.js 中使用 jquery

清单.json

```
 {
    "manifest_version": 2,

    "name": "One-click Kittens",
    "description": "This extension demonstrates a browser action with kittens.",
    "version": "1.0",
     "background": { "scripts": ["jquery-1.9.1.min.js","myscript.js"] },

    "permissions": [
     "tabs", "http://*/*"
    ],
    "browser_action": {
      "default_icon": "icon.png",
      "default_popup": "popup.html"
    }
  } 
```

myscript.js

```
 alert($("#extension-command-list").val());    //undefined
 alert($("#extension-command-list").html());   //undefined
 $(document).ready(function() {
    alert("hello world");  //not seen
 }); 
```

编辑：

```
"background": { "scripts": ["jquery-1.9.1.min.js"] },

 "content_scripts": [
 {
  "matches": ["https://*/*"],
  "js": ["myscript.js"]   or "js": ["jquery-1.9.1.min.js","myscript.js"]
 }
], 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:52:20.137

您得到的原因`undefined`是因为您没有指定背景页面。

所以.. Chrome 生成的背景页面，看起来就像

```
<html>

    <head></head>

    <body>
        <script src="jquery-1.9.1.min.js"></script>
        <script src="myscript.js"></script>
    </body>

</html> 
```

如您所见，没有任何可以选择的元素，这就是为什么您的第一个也是`alert`return `undefined`。

无论如何，`alert("hello world")`也应该显示，因为应该以任何方式解雇`DOMContentLoaded` *或类似的。*

* * *

您是否想选择您正在访问的网站的元素？

如果是这样，您应该放入`myscript.js`内容[脚本](http://developer.chrome.com/extensions/content_scripts.html)而不是背景页面。在那里，您可以访问站点的 DOM。

* * *

所以问题是，你在做什么？

* * *

如果你真的想在你的背景页面中选择元素，你必须指定一个，看看[背景页面](http://developer.chrome.com/extensions/background_pages.html)网站会告诉你，它很简单：

> {
> "name": "我的扩展",
> ...
> "background": {
> "page": "background.html"
> },
> ...
> }

## 编辑：

*   “default_popup”：“popup.html”

指的是[浏览器操作弹出窗口](https://developer.chrome.com/extensions/browserAction.html#popups)。使用了浏览器操作

> [...] 将图标放在地址栏右侧的 Google Chrome 主工具栏中。除了图标之外，浏览器操作还可以有工具提示、徽章和弹出窗口。

所以

> 如果浏览器操作有弹出窗口，则当用户单击图标时会出现弹出窗口。弹出窗口可以包含您喜欢的任何 HTML 内容，并且会自动调整大小以适合其内容。要将弹出窗口添加到您的浏览器操作，请使用弹出窗口的内容创建一个 HTML 文件。在 manifest 中 browser_action 的 default_popup 字段中指定 HTML 文件，或者调用 setPopup 方法。

*   “背景”：”{...}”

> 扩展的一个常见需求是拥有一个长时间运行的脚本来管理某些任务或状态。背景页面进行救援。
> 正如架构概述所解释的，后台页面是在扩展进程中运行的 HTML 页面。它在您的扩展程序的整个生命周期内都存在，并且一次只有一个实例处于活动状态。

还可以通过后台脚本**访问 Chrome 扩展 Api 的所有部分。** `chrome.*` *如果您已分别请求权限*

* * *

现在让我们说，例如，您想用一些功能扩展 chrome 的 ContextMenu。

为此，您首先要在后台页面中创建一个 contextMenuEntry。
就像您的**背景页面**一次只有**一个**实例运行，并且在扩展的**生命周期**内，您的 contextMenuEntry 也应该只有**一个**实例，它在您的扩展运行时创建并在**生命周期**内保持你的分机。

现在假设您要在其中一个菜单条目中**显示您正在访问的页面的当前选定文本。**

为此，您**需要**访问`chrome.contextMenus`API 方法，但不允许 contentscript**使用**它。

要使其正常工作，您需要通过例如将带有所选文本**的消息传递到****背景页面**`chrome.extension.sendMessage`

然后，您可以在后台页面中**更新****现有的**上下文菜单条目以显示选定的文本。

*对不起，我现在想不出更好的例子*

# ember.js - 在 ember.js 中迭代和打印值

> ID：15545900
> 
> 赞同：0
> 
> 时间：2013-03-21T11:12:58.563
> 
> 标签：ember.js

我刚刚开始使用 ember.js。我的标记代码是

```
<script type="text/x-handlebars" data-template-name="home">
        <h1>Names: </h1>
        {{#each home in App.HomeController.content}}
                <h1>Name: </h1>
                {{home.name}}<br />            
        {{/each}}
</script> 
```

我的javascript代码是

```
App = Ember.Application.create();

App.Router.map(function() {
    this.route("home", {
        path: "/"
    });   
});

/*
 *  HomeController
 */
App.HomeController = Ember.ArrayController.extend({
    content: [],
    templateName: 'home',
    init: function(){
        var self = this;

        $.ajax({
            url: 'response.php',
            dataType: 'JSON',
            type: 'POST',            
            success: function(res){                
                self.set('content', res);                
            },
            error: function(){                

            }
        });

    }    

}) 
```

但似乎我无法打印姓名。我无法迭代和打印名称。有谁能够帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:10:25.913

您只需要提供`controller`，而不是完整路径（`App.HomeController.content`）：

```
{{#each home in controller}}
  <h1>Name: </h1>
  {{home.name}}<br />            
{{/each}} 
```

原因如下：

*   当您编写时`Ember.ArrayController.extend()`，您创建的是一个*类*，而不是一个*实例*。Ember 会自动为您创建实例。
*   给定模板中的`controller`变量指向与模板同名的控制器。在你的情况下：
    1.  模板名称：`home`
    2.  控制器：实例`App.HomeController`

此外，不需要指向`ArrayController`'s `content`，因为它只是一个代理，因此它是迭代的默认上下文。

# mysql - 在 Node.js 中解密 MySQL 的 AES_ENCRYPT

> ID：15545902
> 
> 赞同：3
> 
> 时间：2013-03-21T11:13:01.827
> 
> 标签：mysql, node.js, buffer, aes, node-mysql

我在将 AES 解密用于缓冲区对象时遇到问题，我希望有人知道我做错了什么......

MyExample：我有一个带有 AES_ENCRYPT 用户名和密码的 MySQL 表...

```
CREATE TABLE Accounts 
(
    id INT(4) NOT NULL AUTO_INCREMENT,
    username VARBINARY(128) NOT NULL,
    password VARBINARY(128) NOT NULL,
    PRIMARY KEY(id)
);

DELIMITER |
CREATE TRIGGER encodeAccounts BEFORE INSERT ON Accounts
FOR EACH ROW BEGIN
    SET NEW.username = AES_ENCRYPT(NEW.username, 'password');
    SET NEW.password = AES_ENCRYPT(NEW.password, 'password');
END; 
```

Node.JS：我正在使用 node-mysql 模块向我的数据发送查询：

```
SELECT * FROM Accounts; 
```

为密码和用户名返回此类值：

```
<Buffer 07 86 95 ee 77 df 86 50 ae 18 4c d5 3e 48 42 75> 
```

如何使用 Node.JS 解密方法对其进行解码？我的尝试都失败了...我希望正确选择 AES-128-ECB...

要解读 Node.JS 中的某些内容，应该如下所示：

```
var decipher = crypto.createDecipher('AES-128-ECB', 'password');
var dec = decipher.update(rows[i].username); // an example, value look like <Buffer ...
dec += decipher.final('utf8');
console.log('dec: ' + dec); 
```

感谢所有帮助:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-21T08:33:06.013

您的密码必须以与 MySQL 内部执行相同的方式进行转换。必须产生一个 16 字节长度的密码 XORd 以获得更长的密码或用 0 字节填充。这个功能应该做的工作：

```
function convertCryptKey(strKey) {
    var newKey = new Buffer([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);
    strKey = new Buffer(strKey);
    for(var i=0;i<strKey.length;i++) newKey[i%16]^=strKey[i];
    return newKey;
} 
```

**MySQL 兼容的加密**- 注意使用带有空 IV 的“createCipheriv”。（createCipher 创建一个自己的 IV，这与 MySQL 中的不同）

```
var c = crypto.createCipheriv("aes-128-ecb", convertCryptKey("myPassword"), "");
var crypted = c.update('Take a trip at galaxytrek.com :)', 'utf8', 'hex') + c.final('hex');
console.log(crypted.toUpperCase());
>> 92068A5DAECE1E080EF4BA08A45CFF8D2262401F988A9241F1E4CEAAAB80BEAF7E0B50A1D5FD57CA56E92621622F018D 
```

这与以下内容相同：

```
mysql> select hex(aes_encrypt('Take a trip at galaxytrek.com :)','myPassword'));
+--------------------------------------------------------------------------------------------------+
| hex(aes_encrypt('Take a trip at galaxytrek.com :)','myPassword'))                                |
+--------------------------------------------------------------------------------------------------+
| 92068A5DAECE1E080EF4BA08A45CFF8D2262401F988A9241F1E4CEAAAB80BEAF7E0B50A1D5FD57CA56E92621622F018D |
+--------------------------------------------------------------------------------------------------+ 
```

**解密**

```
var dc = crypto.createDecipheriv("aes-128-ecb", convertCryptKey("myPassword"), "");
var decrypted = dc.update('92068A5DAECE1E080EF4BA08A45CFF8D2262401F988A9241F1E4CEAAAB80BEAF7E0B50A1D5FD57CA56E92621622F018D', 'hex', 'utf8') + dc.final('utf8');
console.log(decrypted);
>> Take a trip at galaxytrek.com :) 
```

# java - 将 FileInputStream 转换为返回十六进制的流

> ID：15545903
> 
> 赞同：2
> 
> 时间：2013-03-21T11:13:06.300
> 
> 标签：java, stream, hex, binary-data

我需要将二进制文件中的数据作为十六进制字符串提供。当前的实现将整个文件加载到内存中，将其转换为十六进制字符串，并将十六进制字符串作为字节数组提供给另一个组件。

我现在面临的问题是这个文件有时非常大，所以我得到“OutOfMemoryException”。该组件还接受 InputStream 作为输入，所以我想我会将 FileInputStream 包装到另一个流中，该流将文件作为十六进制字符串返回。

但是我不确定如何做到这一点，虽然子类化 InputStream 看起来很简单，但我可以看到这在不同的读取方法和特殊情况下非常容易出错。如果这个轮子已经存在并且我不必重新发明它，那也很好。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:13:46.320

这是基本思想

```
class HexInputStream extends FilterInputStream {

    HexInputStream(InputStream in) {
        super(in);
    }

    @Override
    public int read(byte[] buff, int off, int len) throws IOException {
        int b = super.read();
        String hex = String.format("%02x", b);
        buff[0 + off] = (byte)hex.charAt(0);
        buff[1 + off] = (byte)hex.charAt(1);
        return 2;
    }
} 
```

我们创建一个 InputStream

```
InputStream is = new BufferedInputStream(new HexInputStream(new FileInputStream("1.test"))); 
```

并将其传递给组件。在 is.read 上，我们总是读取 1 个字节并将其转换为 2 个十六进制字符。

要使这个想法真正发挥作用需要付出一些努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:44:39.053

您应该通过扩展`FilterInputStream`（或`FilterReader`）和覆盖相关的读取方法和您想要的其他方法来实现这一点。例如，该`read()`方法需要读取一个字节，将其转换为两个十六进制字节，返回第一个字节，并保留第二个字节以供下次`read()`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:20:07.683

Apache Commons IO 为您的问题提供了一个实用程序，它还尝试涵盖复杂的 IO 场景。这是链接

[来自 apache commons 的 hexdump](http://commons.apache.org/proper/commons-io//apidocs/org/apache/commons/io/HexDump.html)

希望这可以帮助

# mips - MIPS - 加载单个位

> ID：15545910
> 
> 赞同：0
> 
> 时间：2013-03-21T11:13:19.720
> 
> 标签：mips, declaration, bits

SO用户，

如果我有一个值，比如 1010 保存在内存中，我如何一次加载从 MSB 到 LSB 的每个位？我的意思是，

```
while loop
    load $t1 with 1
    shift some number by the amount indicated by the value in $t1 (1)
    load $t1 with 0
    shift some number by the amount indicated by the value in $t1 (0)
    do the same until you load the LSB which is 0
    start again at MSB (rotate right?)
end loop 
```

我需要一些关于如何在`.data`段中首先在内存中声明这个值的提示。我是否将其声明为：

```
value: .byte 00001010 
```

以及如何将各个位加载到寄存器中？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:10:32.217

您可以使用[此处](http://en.wikipedia.org/wiki/MIPS_architecture#Logical)`SLT`描述的说明执行此操作。这是一些伪代码：

```
lbu $s0, value     # load the byte
sll $s0, $s0, 24   # shift it into the upper byte of $s0
for (i = 0; i < 8; i++) {
  # $t0 is set to 1 if the sign bit (i.e. bit 31) of $s0 is set
  slt  $t0, $s0, $zero   
  # $t0 now holds the value of the ith bit of value
  . . . .          # do something with $t0
  sll $s0, $s0, 1  # shift on to the next bit
} 
```

在汇编程序中实现`for`循环留给读者作为练习。

# r - 如何在R中将向量分成小组？

> ID：15545914
> 
> 赞同：0
> 
> 时间：2013-03-21T11:13:30.717
> 
> 标签：r

```
x<-rnorm(5000,5,3) 
```

我如何将 x 分成 500 组，每组有十个数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:25:51.003

答案#1：

```
x<-rnorm(5000,5,3)
y<-matrix(nr=500,nc=10)
y[]<-x 
```

答案#2：跳过第一步，直接创建矩阵。

```
y<-matrix(rnorm(5000,5,3),nr=500,nc=10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:08:32.497

您是否正在寻找这样的东西：

```
# create a vector of group labels

group <- rep(sample(1:500,replace=F,size=500),10)
group.name <- paste("group",as.character(group),sep=" ")

# create a dataframe of groups and corresponding values
df <- data.frame(group=group.name,value=rnorm(5000,5,3))

# check the dataframe
str(df)
'data.frame':   5000 obs. of  2 variables:
 $ group: Factor w/ 500 levels "group 1","group 10",..: 271 115 404 252 138 243 375 308 434 16 ...
 $ value: num  8.55 10.14 3.71 8.79 4.17 ...

head(df)
      group     value
1 group 342  8.547406
2 group 201 10.135465
3 group 462  3.713305
4 group 325  8.786934
5 group 222  4.171373
6 group 317  3.478123 
```

# ektron - 连接 Ektron 与第三方企业系统

> ID：15545917
> 
> 赞同：2
> 
> 时间：2013-03-21T11:13:47.013
> 
> 标签：ektron

我在 ektron 8.6 中工作。

我正在尝试将第三方企业系统连接到 ektron。

DxH 有一个预先构建的营销自动化连接器，即 Marketo。

我的第三方企业连接器也是一个营销自动化系统。

我正在关注开发人员网络研讨会来完成这项工作。

现在，我的问题是，尽管我通过 ConextBus API 建立了与第三方系统的连接，但我需要在工作区文件中进行一些更改以实现某些功能。

那么是否有必要通过 DxH 建立连接？与从 ektron 站点处理所有这些功能相比，这有什么意义？

谁能给我一些见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T02:31:07.003

如果您问“为什么要使用 DxH？” 主要答案是它与 Ektron 的紧密集成。您可以继续使用您的营销自动化系统，它将与 Ektron 共享相关数据。如果您希望从特定系统执行大规模迁移，您当然可以使用 API 将数据一次性导入 Ektron。不同之处在于您将远离第 3 方系统，而 DxH 及其 ContextBus 允许两个系统一起工作。

您提到了您正在关注的网络研讨会，所以您可能已经看过这个，但是这里有一个关于 DxH 的很好的网络研讨会：[http ://www.ektron.com/Webinars/Details/Digital-Experience-Hub---Developer -网络研讨会/](http://www.ektron.com/Webinars/Details/Digital-Experience-Hub---Developer-Webinar/)

# sql - 如何在 SQL 查询中使用索引

> ID：15545922
> 
> 赞同：5
> 
> 时间：2013-03-21T11:13:53.540
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, indexing

好吧，我对这些东西很陌生..我在一开始就在我的 SP 中创建了一个索引，如下所示

```
Create Index index_fab
ON TblFab (Fab_name) 
```

现在我有这个查询

```
select fab_name from TblFab where artc = 'x' and atelr = 'y'. 
```

现在是否有必要在 select 子句中使用这个索引名称，否则它会自动用于加速查询

我必须使用类似的东西吗

```
select fab_name from TblFab WITH(INDEX(index_fab)) where artc = 'x' and atelr = 'y'. 
```

或在查询中使用此索引的任何其他方法

如果我们在这个表上使用连接，如何使用索引？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T11:19:54.063

首先，你的意思是你在存储过程中创建索引？这是个坏主意 - 如果您运行存储过程两次，它将失败，因为索引已经存在。

其次，您的查询不使用索引中提到的列，因此不会产生任何影响。

第三，正如 JodyT 所写，查询分析器（SQL Server 本身）将决定使用哪个索引；它几乎肯定比你更擅长。

最后，为了加快您提到的查询，请在列 artc 和 atelr 上创建索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-04T20:50:59.783

当其他人回答您的问题以帮助您更好地理解时，我的意见是，您应该首先了解为什么需要使用索引。正如我们所知，索引可以提高性能，它们也可能会导致性能问题。最好知道什么时候需要使用索引，为什么需要使用索引而不是如何使用索引。

[你可以从这里](http://www.codeproject.com/Articles/190263/Indexes-in-MS-SQL-Server)阅读几乎每一个小细节。

关于您的示例，您的查询索引没有影响。因为它在查询的 where 子句中没有提到的列。

你也可以试试：

`CREATE INDEX yourIndexName ON yourTableName (column_you_are_looking_for1,column_you_are_lookingfor2`)

也很高兴知道：如果表上不存在索引，则必须对数据库查询中引用的每个表执行表扫描。表越大，表扫描所需的时间就越长，因为表扫描需要按顺序访问每个表行。尽管对于需要表中大部分行的复杂查询，表扫描可能更有效，但对于只返回一些表行的查询，索引扫描可以更有效地访问表行。（来自[这里](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/c0005052.htm)）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T11:14:58.267

SQL Server 的查询优化器将决定索引是否适合查询。你不能`force`使用特定的索引。您可以给出您希望它使用的提示，但这不能保证它会使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T11:19:22.237

如果您对使用它的表运行查询，则默认情况下应使用索引。但我认为在您发布的查询中不会使用它，因为您没有按创建索引的列过滤数据。我认为您必须为 artc 和 atelr 列创建索引才能从中获利。要查看是否使用了您的索引，请查看 SQL Management Studio 中使用的执行计划。

有关索引的更多信息：[使用索引卢克](http://use-the-index-luke.com/welcome)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-21T11:19:33.413

您不需要在查询中包含索引。它由 sql server 管理。此外，如果要加入此表，则不需要在 select 中包含索引。希望它清楚。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-21T11:24:12.233

您在 select 语句中使用了未过滤的“Fab_name”列，所以它没有用。

由于您是新手，因此您可能会从这样的索引中受益：

```
Create Index index_fab
ON TblFab (artc, atelr) 
```

或者像这样

```
Create Index index_fab
ON TblFab (atelr, artc) 
```

...是的，有很多微妙之处要学习。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-10-15T07:59:27.957

为了获得更好的性能：列出经常使用的列/表，仅在这些表/列上创建索引。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-21T11:18:10.563

如果索引设置正确，优化器将自动使用它。通过正确设置，我的意思是它具有足够的选择性，可以有效地帮助查询等。阅读它。您可以通过使用 ssms 中的“包含实际执行计划”选项自行检查是否正在使用索引。通常不建议使用 with(index()) 提示并让优化器自行决定，除非您更了解非常特殊的情况;)。

# php - 通过服务器发送电子邮件

> ID：15545928
> 
> 赞同：0
> 
> 时间：2013-03-21T11:14:13.843
> 
> 标签：php, ios, xcode, email

我有一个应用程序，人们可以在其中填写一些数据并将其发送到我的电子邮件。邮件已发送并且工作正常，只是邮件正文为空。

我的连接方法：

```
-(void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if( !(buttonIndex == [actionSheet cancelButtonIndex]) ) {

        NSString *post  = nil;
        post = [[NSString alloc] initWithFormat:@"Naam spel = %@ Uitleg= %@", spelnaam.text ,Uitleg.text];
        NSLog(@"dit wordt verstuurd %@", post); //works fine!

        NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
        NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
        NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
        [request setURL:[NSURL URLWithString:@"http://www.myserver.nl/theemailfile.php"]];
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:postData];
        [ NSURLConnection connectionWithRequest:request delegate:self ];

        [post release]; 
        [self displayAlert];
    }
} 
```

我的 php 文件：

```
<?php
 $message = $_REQUEST['message'] ;
 mail( "emailadres@gmail.com", "Test Message", $message );
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:23:52.023

在您的 HTTP 请求中，您说您在请求正文中发送的信息属于 type `application/x-www-form-urlencoded`，但事实并非如此。它似乎只是自由格式的文本。您应该符合[HTML 规范中描述的格式](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)。您正在发送如下所示的消息：

```
Naam spel = test Uitleg= test 
```

你需要发送这样的东西：

```
message=This+is+a+test&other=test 
```

# c# - 带有 Canvas 处理程序的 C# Image Resizer

> ID：15545940
> 
> 赞同：1
> 
> 时间：2013-03-21T11:14:48.130
> 
> 标签：c#, image, canvas, resize

我对 C# 非常陌生（今天才开始）

我需要能够使用画布处理程序制作 C# Image resizer。例如，一张 500 x 500 的图像需要保持其纵横比。它将被调整为 1024x500。为此，它将保持 500x500，但随后用空白（画布）填充其余空间。

我还将相同的原始图像调整为 300 x 500，其中图像将再次保持其 1:1 比例并调整为 300x300，剩余空间再次用作画布空白。

任何人都可以帮我为此制作一个我能理解的 C# 控制台应用程序吗？

这是我设法找到的我可以合理理解的内容（由于评论很好）。

我发现代码是我可以阅读的，但是当我真正写一些代码时，我就崩溃了。我主要做HTML和CSS。开始扩展到 JQuery 和 C#

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Drawing;
using System.Drawing.Imaging;

namespace ImageResizer
{

    class ImageResize
    {
        static void Main(string[] args)
        {
        }
        public void ResizeImage(string OriginalFile, string NewFile, int NewWidth, int MaxHeight, bool OnlyResizeIfWider)
        {
            System.Drawing.Image FullsizeImage = System.Drawing.Image.FromFile(OriginalFile);

            // Prevent using images internal thumbnail

            FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);

            FullsizeImage.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);

            if (OnlyResizeIfWider)
                {

                    if (FullsizeImage.Width <= NewWidth)
                {
                NewWidth = FullsizeImage.Width;
                }
                }

            int NewHeight = FullsizeImage.Height * NewWidth / FullsizeImage.Width;
            if (NewHeight > MaxHeight)
            {
            // Resize with height instead
                NewWidth = FullsizeImage.Width * MaxHeight / FullsizeImage.Height;
                NewHeight = MaxHeight;
            }
            System.Drawing.Image NewImage = FullsizeImage.GetThumbnailImage(NewWidth, NewHeight, null, IntPtr.Zero);

            // Clear handle to original file so that we can overwrite it if necessary
            FullsizeImage.Dispose();

            // Save resized picture
        NewImage.Save(NewFile);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:19:40.240

试试这个>>

```
private void resizeImage(string path, string originalFilename, 
                     /* note changed names */
                     int canvasWidth, int canvasHeight, 
                     /* new */
                     int originalWidth, int originalHeight)
{
    Image image = Image.FromFile(path + originalFilename);

    System.Drawing.Image thumbnail = 
        new Bitmap(canvasWidth, canvasHeight); // changed parm names
    System.Drawing.Graphics graphic = 
                 System.Drawing.Graphics.FromImage(thumbnail);

    graphic.InterpolationMode = InterpolationMode.HighQualityBicubic;
    graphic.SmoothingMode = SmoothingMode.HighQuality;
    graphic.PixelOffsetMode = PixelOffsetMode.HighQuality;
    graphic.CompositingQuality = CompositingQuality.HighQuality;

    /* ------------------ new code --------------- */

    // Figure out the ratio
    double ratioX = (double) canvasWidth / (double) originalWidth;
    double ratioY = (double) canvasHeight / (double) originalHeight;
    // use whichever multiplier is smaller
    double ratio = ratioX < ratioY ? ratioX : ratioY;

    // now we can get the new height and width
    int newHeight = Convert.ToInt32(originalHeight * ratio);
    int newWidth = Convert.ToInt32(originalWidth * ratio);

    // Now calculate the X,Y position of the upper-left corner 
    // (one of these will always be zero)
    int posX = Convert.ToInt32((canvasWidth - (originalWidth * ratio)) / 2);
    int posY = Convert.ToInt32((canvasHeight - (originalHeight * ratio)) / 2);

    graphic.Clear(Color.White); // white padding
    graphic.DrawImage(image, posX, posY, newWidth, newHeight);

    /* ------------- end new code ---------------- */

    System.Drawing.Imaging.ImageCodecInfo[] info =
                     ImageCodecInfo.GetImageEncoders();
    EncoderParameters encoderParameters;
    encoderParameters = new EncoderParameters(1);
    encoderParameters.Param[0] = new EncoderParameter(Encoder.Quality,
                     100L);            
    thumbnail.Save(path + width + "." + originalFilename, info[1], 
                     encoderParameters);
} 
```

# visual-studio-2005 - 系统命令未使用变量作为参数运行 exe 文件

> ID：15545942
> 
> 赞同：0
> 
> 时间：2013-03-21T11:14:52.167
> 
> 标签：visual-studio-2005

我正在编写代码以从 Visual Studio 2005（VC++）中的服务器下载应用程序。在我开始运行它时下载它后，第 3 行不运行 exe 文件，而如果我将它写为

```
system("c:/pg/ap/app.exe") 
```

它开始运行。谁能告诉我为什么会这样？

```
1.const char * str; 
2\. HRESULT hr = URLDownloadToFile ( NULL, _T("file_path/app.exe"),(LPCWSTR)str,0,NULL);
3\. system(str); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:41:47.453

而不是使用`System()`功能，尝试`ShellExecute()`，它会解决你的问题。

如需更多帮助，请参阅[此](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)

# sql - sql中最小值和计数的使用

> ID：15545943
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:14:52.837
> 
> 标签：sql

您可以使用 min(count()) 找到最少的条目数吗

还是有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:16:41.263

你可以使用这个模式，

```
SELECT  MIN(cnt) 
FROM
(
    SELECT  COUNT(colName) cnt
    FROM    tableName
    GROUP   BY ...
) s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:19:02.913

可以用group by，然后order by，选择top 1，这些都是非常非常标准的SQL命令，不粗鲁，但是[http://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)有一些非常好的教程，不错运气

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:50:37.357

在`ORACLE`我们可以使用嵌套的聚合函数，比如`MIN(COUNT(*))`and`MAX(COUNT(*))` 但问题是 select 中不应该有任何其他属性，否则它会出现错误，比如

`ORA-00937: not a single-group group function`

并且以同样的方式应该有一个`GROUP BY`与之关联的子句，否则它将引发错误

`ORA-00978: nested group function without GROUP BY`

要知道您的查询将是最少的记录重新创建

```
 select min(count(rec_recreation)) as cnt from table group by person; 
```

如果你想要像哪个人拥有最少的记录娱乐那么

```
select person,cnt from (select person,count(rec_recreation) cnt from table group by person)
where cnt = (select min(count(rec_recreation)) from table group by person) 
```

# tomcat - Tomcat servlet 映射错误 404

> ID：15545950
> 
> 赞同：2
> 
> 时间：2013-03-21T11:15:05.303
> 
> 标签：tomcat, servlets

对不起，如果这是一个常见的问题，但我会疯的。我开始使用在 Ubuntu Server 上运行的 Tomcat 进行 JSP 开发。我正在尝试运行我的第一个“Hello World”servlet，但没有成功。

我在服务器上有以下东西：

*   `webapps`目录是：`/var/lib/tomcat6/webapps/`
*   在`webapps`我创建了上下文根`hello/`目录
*   `hello/`包含`index.html`和`WEB-INF/`
*   `WEB-INF`包含`web.xml`和`classes/HelloServlet.class`

这是`index.html`：

```
<html>
        <body>
                Click to request the HelloServlet.

                <form action = "/hello/helloworld" method = "get" >
                        <input type = "submit" value = "REQUEST" />
                </form>
        </body>
</html> 
```

这是`WEB-INF/web.xml`：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5">

        <servlet>
                <servlet-name>test</servlet-name>
                <servlet-class>HelloServlet</servlet-class>
        </servlet>

        <servlet-mapping>
                <servlet-name>test</servlet-name>
                <url-pattern>/hello/helloworld</url-pattern>
        </servlet-mapping>

</web-app> 
```

最后这是源文件`HelloServlet`：

```
// HelloServlet.java, a simple Hello World servlet.

import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;

public class HelloServlet extends HttpServlet
{
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
        {
                response.setContentType("text/html");
                PrintWriter outputStream = response.getWriter();

                outputStream.println("<html>");

                outputStream.println("<head>");
                outputStream.println("<title>Hello, World!</title>");
                outputStream.println("</head>");

                outputStream.println("<body>");
                outputStream.println("Hello, world! This is my first servlet!");
                outputStream.println("</body>");

                outputStream.println("</html>");

                outputStream.close();
        }
} 
```

问题是，在客户端，只有`http://localhost/hello/`（即`index.html`页面）有效。如果我单击表单提交按钮，我会收到 http 404 错误（资源不可用）。

servlet-mapping 中可能存在错误，在 form 和/或 in 中`web.xml`，但我真的需要帮助才能发现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:59:08.400

```
<url-pattern>/hello/helloworld</url-pattern> 
```

不应在 servlet 的 URL 模式中包含上下文路径。它已经相对于上下文根。

摆脱它。

```
<url-pattern>/helloworld</url-pattern> 
```

* * *

**与具体问题无关**，在 servlet 中编写 HTML 代码是一种非常糟糕的做法。应该使用该 JSP。另请参阅[我们自己的 Servlets wiki 页面，其中包含健全的 Hello World 示例](https://stackoverflow.com/tags/servlets/info)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:09:55.587

将上下文根添加到 jsp 操作，以下更改可能对您有用。

```
<form action = "/hello/hello/helloworld" method = "get" >
  <input type = "submit" value = "REQUEST" />
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-18T13:15:04.820

404 可能导致：

1.  糟糕的映射场景（您可能包含了上面回答的额外上下文或滥用通配符模式）
2.  servlet 尚未启动（请参阅控制台或 catalina 文件中的启动日志堆栈，您应该会找到您的 servlet 失败异常跟踪）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-07T15:50:08.347

我花了很长时间才弄清楚这一点。就我而言，我得到了 404，因为我没有意识到 Tomcat **URL**是**区分大小写**的！

例如：

```
http://server:8080/acme.MyPackage/DoStuff 
```

...404！

```
http://server:8080/acme.myPackage/DoStuff 
```

...美好的。

疯狂。

# python - Django 查看模板的默认值

> ID：15545952
> 
> 赞同：1
> 
> 时间：2013-03-21T11:15:08.023
> 
> 标签：python, django, templates, views

有没有办法将变量传递给所有模板？例如，我有一个视图，其中包含

```
render_to_response('page.html', dictionary, \
context_instance = RequestContext(request)) 
```

我想将另一个变量传递给不在字典中的模板文件。

目的是什么？假设我在所有视图（几百个）中都需要这个变量，而且我很想在不接触字典的情况下将这个变量传递给模板文件。顺便说一下，这个变量是一个函数的结果，它有一个参数（请求）。

可行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:18:36.610

您需要编写一个自定义[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)。

> 上下文处理器有一个非常简单的接口：它只是一个 Python 函数，它接受一个参数，一个`HttpRequest`对象，并返回一个字典，该字典被添加到模板上下文中。每个上下文处理器*必须*返回一个字典。
> 
> 自定义上下文处理器可以存在于代码库中的任何位置。Django 所关心的是您的自定义上下文处理器是否由您的`TEMPLATE_CONTEXT_PROCESSORS`设置指向。

例如：

```
# in project/context_processors.py
def add_extra_variable(request):
    return {'extra': myfunction(request)}

# in settings.py:
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",
    "project.context_processors.add_extra_variable"
 ) 
```

PS：如果你使用`render`而不是`render_to_response`，你不需要通过`RequestContext`。

```
render('page.html', dictionary) 
```

# javascript - JavaScript: How to call functions from events

> ID：15545955
> 
> 赞同：3
> 
> 时间：2013-03-21T11:15:28.477
> 
> 标签：javascript, function, events, anonymous-function

I'm starting to learn JavaScript and I would know how to call a function from an event. The only way I know is with anonymous functions (see my code) and I don't know how to call it in a simpler way. Thanks in advance!

```
 function example (){
        document.getElementById("myDiv").onclick = function (){
            example2 ();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:16:26.620

You can just assign it by name:

```
function example (){
    document.getElementById("myDiv").onclick = example2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:17:19.187

Try

```
document.getElementById('myDiv').onclick=example2; 
```

# excel - 如何将范围值更改为单元格值？

> ID：15545956
> 
> 赞同：0
> 
> 时间：2013-03-21T11:15:28.480
> 
> 标签：vba, excel, vba

我有一个功能：

`=COUNTIF(Data!$V$6:$V$1029;Analyse_ALL!C7)`

目前我需要手动输入“1029”（列中包含单元格值的最后一行）。我制作了一个计算最后一行的[vba](/questions/tagged/vba "显示标记为“vba”的问题")函数，并将结果写入一个单元格。

如何将我的 vba 结果/单元格值带入我的函数？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:29:30.503

1.  您可以让 VBA 为您编写完整的公式，而不仅仅是 1029：

    `Range("**Coordinates of the formula**").Formula = "=COUNTIF(Data!$V$6:$V$"& **originalVBAresult** & ";Analyse_ALL!C7)"`

2.  您可以在 COUNTIF 中有一个 OFFSET，它链接到您将 1029 写入的单元格：

    `=COUNTIF(OFFSET(Data!$V$6;0;0;**Cell with 1029 in it**);Analyse_ALL!C7)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:31:01.393

你可以使用这样的东西

1.  检测Sheet中V列中最后使用的行`Data`
2.  如果该行超过 6，则将此公式添加到`A1`, `=COUNTIF(Data!$V$6:$VX;Analyse_ALL!C7)`（其中`X`是步骤 1 的最后一行）

**代码**

```
Sub InsertFormula()
Dim rng1 As Range
Set rng1 = Sheets("Data").Cells(Rows.Count, "V").End(xlUp)
If rng1.Row > 6 Then
[a1].FormulaR1C1 = "=COUNTIF(Data!R6C22:R" & rng1.Row & "C22,Analyse_ALL!R7C3)"
End If
End Sub 
```

# c# - 带有 KendoGrid 的 Kendo TabStrip 使用 JavaScript 进行事件处理

> ID：15545960
> 
> 赞同：5
> 
> 时间：2013-03-21T11:15:43.120
> 
> 标签：c#, javascript, asp.net-mvc, kendo-ui, kendo-grid

我有一个简单的页面，里面有 Kendo TabStrip

```
<div id="main-view" class="k-content">
    @(Html.Kendo().TabStrip()
            .Name("main-view-tabstrip")
            .Items(tabstrip =>
                {
                    tabstrip.Add().Text("My Notices").LoadContentFrom("MyNotices", "Notice").Selected(true);
                }))
</div> 
```

它按需为我加载内容，查询`NoticeController`. `NoticeController`有`MyNotices`回报我的行动`PartialView`。

```
public PartialViewResult MyNotices()
{
    // put some values into ViewData

    return PartialView();
} 
```

PartialView 本身看起来像这样：

```
<div style="margin: 20px; height: 700px;">
    @(Html.Kendo().Grid<NoticeViewModel>(Model)
      .HtmlAttributes(new { @class = "fullScreen" })
      .Name("NoticesList")
      .Columns(columns =>
          {
              columns.Bound(x => x.UniqueId).Title("UniqueId");
              columns.Bound(x => x.FormName).Title("Form");
              columns.Bound(x => x.Revision).Title("Revision");
              columns.Bound(x => x.Language).Title("Language");
              columns.Bound(x => x.Status).Title("Status");
          }
      )
      .Pageable()
      .Scrollable()
      .Sortable()
      .Selectable()
      .ToolBar(
          toolbar => toolbar.Create().Text("New")
      )
        .Editable(
            ed => ed.Mode(GridEditMode.PopUp)
                .TemplateName("NoticeCreate")
                .Window(w => w.Title("Create Notice")
                    .Name("createNoticeWindow1")
                    .HtmlAttributes(new { id = "createNoticeWindow" })
                    .Modal(true)
                    )
                .DisplayDeleteConfirmation(true)
                )
      .Resizable(resize => resize.Columns(true))
      .DataSource(dataSource => dataSource.Ajax()
                                          .PageSize(25)
                                          .ServerOperation(true)
                                          .Read("List", "Notice")
                                          .Create("NoticeCreate", "Notice")
                                          .Events(events => events.Error("errorHandler"))
                                          .Model(model => model.Id(x => x.UniqueId))

      ))
</div>

<script>
    function errorHandler(e) {
        if (e.errors) {
            var message = "Errors:\n";
            $.each(e.errors, function (key, value) {
                if ('errors' in value) {
                    $.each(value.errors, function () {
                        message += this + "\n";
                    });
                }
            });
            alert(message);
        }
    }
</script> 
```

当我运行代码时，我收到 JS 错误，`errorHandler`找不到。如您所见，我的`PartialView`.

```
<script>
    function errorHandler(e) {
        if (e.errors) {
            var message = "Errors:\n";
            $.each(e.errors, function (key, value) {
                if ('errors' in value) {
                    $.each(value.errors, function () {
                        message += this + "\n";
                    });
                }
            });
            alert(message);
        }
    }
</script> 
```

所以问题是如何在局部视图中使用 javascript，当你在 TabStrip 中显示它时？

当我`.Events(events => events.Error("errorHandler"))`从网格中删除时，一切正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T14:38:17.373

修复了这个问题，我不知道为什么，但是当我把 java 脚本块放在开头时它开始工作。

因此，如果有人遇到此类问题，只需`<script/>`在声明之前放置块`Kendo.Grid()`。

# .net - 是否可以按顺序运行多个powershell脚本，等待完成后再启动下一个？

> ID：15545964
> 
> 赞同：1
> 
> 时间：2013-03-21T11:15:54.960
> 
> 标签：.net, sharepoint, powershell, powershell-ise

我有 3 个 Powershell ISE 脚本。

Script1.ps1、Script2.ps1、Script3.ps1

是否可以按照给定的顺序运行所有脚本？当我问这个问题时，我并不是在暗示平行行为，而是一种同步行为。要执行 script2，它必须等待 script1 完成，要执行 script3 它必须等待 script2 完成，等等。

干杯...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:21:28.030

```
.\script1.ps1
.\script2.ps1
.\stript3.ps1 
```

全部在一个 *.ps1 文件中，您将在 PS 中启动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T21:32:42.790

```
for($i=1;$i-le3;$i++){
    & ".\script$i.ps1"
    if(!$?){
         Write-Error "Script $i failed; Exiting"
         return (-1)
    }
} 
```

美元？如果最后一个命令成功运行，则返回 true。

# ios - 为每个新推送添加一个新的 UITableViewCell

> ID：15545966
> 
> 赞同：0
> 
> 时间：2013-03-21T11:15:55.710
> 
> 标签：ios, push-notification, uitableview, uirefreshcontrol

我创建了我的第一个推送应用程序，但通过将推送数据传递给我的 viewController 时遇到了问题。我想为每个新的推送通知在我的 tableviewController 中创建并显示一个新单元格。我不知道我该怎么做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:17:59.037

您可以做的是，利用以下功能

`- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo`

在 AppDelegate 中添加该函数并实现将对象/数据添加到集合的逻辑，这将进一步用于在 tableViewController 中显示行。

# android - Andengine Loading 等待时间

> ID：15545967
> 
> 赞同：0
> 
> 时间：2013-03-21T11:16:07.080
> 
> 标签：android, andengine

我用 Andengine 开发了一个游戏！它有 100 张照片（大约 15mb）。当我运行这个应用程序时，它会黑屏大约 10 秒。我想在加载其他 100 张图像时加载图像。

```
public void onLoadResources() {

      for(i=0;i<100;i++)
      {
          textCircle[i]=new Texture(1024,512,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
          textRegCircle[i] = TextureRegionFactory.createFromAsset(textCircle[i], this, "circlesBlue/"+i+".jpg", 0, 0);
          mEngine.getTextureManager().loadTexture(textCircle[i]);

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:36:36.310

我添加了我的类来加载集合图像。

```
public class Game extends BaseGameActivity {

private Scene dScene;
private TextureRegion dLoadingRegion;

Handler dHandler = new Handler() {
    public void handleMessage(android.os.Message msg) {
        switch (msg.what) {
        case 0:
            setYourSceneData();
            break;
        }
    };
};

@Override
public Engine onLoadEngine() {
    return null;
}

public void onLoadResources() {
    BitmapTextureAtlas BitmapTextureAtlas = new BitmapTextureAtlas(512,
            512, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    dLoadingRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(BitmapTextureAtlas, this,
                    "your loading image path", 0, 0);
    getTextureManager().loadTextures(BitmapTextureAtlas);
}

private void loadOtherGameGraphics() {
    // here load your other region
           for(i=0;i<100;i++)
          {
               textCircle[i]=new Texture(1024,512,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
               textRegCircle[i] = TextureRegionFactory.createFromAsset(textCircle[i], this, "circlesBlue/"+i+".jpg", 0, 0);
               mEngine.getTextureManager().loadTexture(textCircle[i]);

          }
}

@Override
public Scene onLoadScene() {
    dScene = new Scene();
    dScene.attachChild(new Sprite(0, 0, Helper.CAMERA_WIDTH,
            Helper.CAMERA_HEIGHT, dLoadingRegion));
    new Thread(new Runnable() {
        @Override
        public void run() {
            loadOtherGameGraphics();
            dHandler.sendEmptyMessage(0);
        }
    }).start();
    return dScene;
}

public void setYourSceneData() {
    // here set your game data
    // and remove your loading image
}

@Override
public void onLoadComplete() {

} 
```

}

# c# - Code First 实体框架虚拟和外键混淆

> ID：15545977
> 
> 赞同：0
> 
> 时间：2013-03-21T11:16:45.137
> 
> 标签：c#, asp.net-mvc, entity-framework

所以我有一些 POCO 课程：

```
public class Device : DbEntity
{
  public string DeviceName {get;set;}
}
public class AUT : DbEntity
{
  public string ApplicationName {get;set;}
}
public class Setup : DeviceAppDbEntity
{
  public bool Worked {get;set;}
}

public class DbEntity
{
  public Guid ID {get;set;}
}
public class DeviceAppDbEntity : DbEntity
{
  public virtual AUT ApplicationUnderTesting {get;set;}
  public virtual Device DeviceUnderTesting {get;set;}
} 
```

因此，如果我想删除一个 AUT（应用程序），那么我几乎肯定会得到一个错误，因为 Setup 有一个 App 的外键。有人告诉我，如果你添加

```
public class DeviceAppDbEntity : DbEntity
{
  public virtual AUT ApplicationUnderTesting {get;set;}
  public Guid ApplicationUnderTestingId {get;set;} // THIS LINE ADDED

  public virtual Device DeviceUnderTesting {get;set;}
} 
```

然后将启用级联删除。这个对吗？

当我现在访问设置时

```
_repository.Setups.FirstOrDefault(x => x.ID.Equals(setupID)); 
```

导航属性`virtual AUT`&`virtual Device`应该自动填写？？会`Guid ApplicationUnderTestingId`自动填写吗？

当我想保存我的`Setup`实体时，我可以只填写 nav 属性吗？还是我也必须填写该`Guid ApplicationUnderTestingId`字段，还是我做相反的事情并且只填写`Guid ApplicationUnderTestingId`？

```
entityToSave.AUT = _repository.AUTs.FirstOrDefault(x => x.ID.Equals(vm.AppID)); 
```

或者

```
entityToSave.ApplicationUnderTestingId= vm.AppID;
entityToSave.AUT = _repository.AUTs.FirstOrDefault(x => x.ID.Equals(vm.AppID)); 
```

或者

```
entityToSave.ApplicationUnderTestingId= vm.AppID; 
```

这有点令人困惑。当您定义 a 时情况会变得更糟`List<entities>`，因为当您删除包含列表的实体时。它抱怨列表中的实体具有关系，您如何在这些实体上启用级联删除？

```
public class Blog: DbEntity
{
  public string Name {get;set;}
  public virtual Member {get;set;}

  public List<Comment> Comments {get;set;}
} 
```

我知道这似乎是很多问题，但它围绕实体框架中的一个主题。感谢您随时回答我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T17:20:38.197

要回答这个问题。

`Cascade On Delete`当您执行导航属性时启用，例如

```
public virtual SomeClass {get;set;}
public Guid SomeClassId {get;set;} 
```

您可以填写其中任何一个，它将保存到数据库中。

`No Cascade On Delete`

```
public virtual SomeClass SomeClass {get;set;} 
```

当您从数据库中读取时，我的操作如下：

```
var item = _repository.SomeClasses.FirstOrDefault(x => x.Id.Equals(id)); 
```

导航属性只有在你想访问的时候才会填写，懒加载，因为我用了关键字`virtual`

就目前`List<Post>`而言，如果你这样做：

```
public class Post
{
    public virtual Blog Blog {get;set;}
    public Guid BlogId {get;set;}
} 
```

那么当一个博客被删除时，与之相关的所有帖子都会被删除。我没有尝试看看如果你删除会发生什么`BlogId`，但我猜，当你删除博客时，不会删除任何帖子。但是，该`Blog => Post`模型并不是展示您为什么要这样做的模型。

我想我已经回答了我所有的问题。总而言之，这一切都取决于`public Guid SomeClassId {get;set;}`是否`Cascade On Delete`设置。

# objective-c - cocos2d改变精灵纹理

> ID：15545979
> 
> 赞同：2
> 
> 时间：2013-03-21T11:16:51.573
> 
> 标签：objective-c, cocos2d-iphone, cctexturecache

我想用精灵表中的另一个纹理更改精灵纹理

```
//normal sprite
character = [CCSprite spriteWithSpriteFrameName:@"char1.png"];

//change texture
[character setTexture:[[CCTextureCache sharedTextureCache] addImage:[CCSprite spriteWithSpriteFrameName:@"char2.png"]]]; 
```

但这给了我一个错误。我尝试过没有 spriteWithSpriteFrameName，它给了我一个空白纹理。

```
//error
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[CCSprite lastPathComponent]: unrecognized selector sent to instance 0xab32580' 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:21:48.203

AddImage 接受输入 imageName(NSString) 而不是 sprite(CCSprite)。

```
[[CCTextureCache sharedTextureCache] addImage:TEX_IMAGE_NAME]; 
```

这里有一些有用的代码可以解决你的崩溃：

```
CCSprite *sprite = [CCSprite spriteWithSpriteFrameName:@"char2.png"];
[crane setTexture:sprite.texture]; //Already allocated memory? if not thn try below
//crane = [CCSprite spriteWithTexture:sprite.texture];
//crane = [CCSprite spriteWithTexture:sprite.texture rect:rect]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:18:49.140

尝试在 CCSprite 上设置 displayFrame，例如，

```
[character setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] 
                        spriteFrameByName:@"char2.png"]; 
```

# python - 如何更改python时间序列中的重采样顺序

> ID：15545980
> 
> 赞同：3
> 
> 时间：2013-03-21T11:16:56.313
> 
> 标签：python, pandas

我有以下 python pandas 时间序列

```
index = pandas.date_range('4/1/2012','9/30/2012', freq='M')
df = pandas.DataFrame(numpy.random.randn(len(index),1), index=index)
df = 
2012-04-30 1.06
2012-05-31 0.82
2012-06-30 0.65
2012-07-31 1.12
2012-08-31 1.09
2012-09-30 0.65 
```

然后我将频率从一个月改为两个月

```
df_new = df.resample('2M') 
```

resample 函数从最早的日期开始到最后一个日期。我得到的输出如下：

```
df_new = 
2012-04-30 ...
2012-06-30 ...
2012-08-31 ...
2012-10-30 ... 
```

而我希望算法以相反的顺序重新采样。我想要这样的输出：

```
df_new = 
2012-05-31 ...
2012-07-31 ...
2012-09-30 ... 
```

任何人都可以请帮忙..提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T16:43:32.010

好的，这比它应该的要复杂 - 但是这里有

```
In [282]: df
Out[282]:
                   0
2012-04-30  0.583255
2012-05-31 -0.247403
2012-06-30  0.816290
2012-07-31 -1.989587
2012-08-31  0.740463
2012-09-30  0.971749

In [279]: df.resample('2M', how='last', closed='left', loffset='-1M')
Out[279]:
                   0
2012-05-31 -0.247403
2012-07-31 -1.989587
2012-09-30  0.971749

how='last' gets last value in group
closed='left' forces first date[2012-04-30] to be the start of the group (maybe side effect)
loffset='-1M' adjust label appropriately 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T16:01:22.300

使用`loffset`参数：

```
In [8]: df
Out[8]:
                   0
2012-04-30  0.667305
2012-05-31 -1.353332
2012-06-30  0.132986
2012-07-31 -0.697344
2012-08-31 -1.043487
2012-09-30 -0.050352

In [9]: df.resample('2M', loffset='M')
Out[9]:
                   0
2012-05-31  0.667305
2012-07-31 -0.610173
2012-09-30 -0.870416
2012-11-30 -0.050352 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:31:05.610

这些事情往往比你最初预期的要复杂得多。我同意 Chang 的观点，有一个非常清晰的例子来说明应该如何精确对齐会有所帮助。请注意，示例中的输入数据也具有每月频率也很重要。例如，如果输入频率为天，则上述解决方案的最终对齐方式会发生变化，请参阅：

```
import pandas as pd

index = pd.date_range('4/1/2012','9/30/2012', freq='D')
df = pd.DataFrame({'Date': index, 'Doy': index.dayofyear}, index=index) 

df.resample('2M', how='last', closed='left', loffset='-1M')

                           Date  Doy
2012-04-30  2012-05-30 00:00:00  151
2012-06-30  2012-07-30 00:00:00  212
2012-08-31  2012-09-29 00:00:00  273
2012-10-31  2012-09-30 00:00:00  274 
```

或者，可以使用“MS”频率，创建另一种方法：

```
df.resample('2MS', how='last', loffset='2M')

                           Date  Doy
2012-05-31  2012-05-31 00:00:00  152
2012-07-31  2012-07-31 00:00:00  213
2012-09-30  2012-09-30 00:00:00  274 
```

这一切都取决于您如何定义垃圾箱的开始和结束。

# javascript - 带有 Jquery Mobile 的 Javascript 切换按钮

> ID：15545981
> 
> 赞同：-1
> 
> 时间：2013-03-21T11:16:59.233
> 
> 标签：javascript, jquery-mobile, button, toggle

请问有谁知道如何使这个切换按钮按照下面的代码工作。它仅在第一次单击后有效，然后按钮值不会改变

[http://jsfiddle.net/ossama/2MbsG/](http://jsfiddle.net/ossama/2MbsG/)

```
<script type='text/javascript'>
    $(window).load(function () {
        fill.addEventListener("click", function (event) {

            if ($(this).attr('value') == 'Top Up') {
                $('#fill').prev('.ui-btn-inner').children('.ui-btn-text').html('Stop');
                $('#fill').buttonMarkup({
                    theme: "c"
                });
            } else {
                $('#fill').prev('.ui-btn-inner').children('.ui-btn-text').html('Stopping');
                $('#fill').buttonMarkup({
                    theme: "b"
                });
            }

        });
    });
</script>
</head>
<body>
    <input id="fill" type="button" data-inline="true" value="Top Up" data-mini="true"
    data-theme="c" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:36:59.013

我希望这个[修改过的小提琴按预期工作：](http://jsfiddle.net/uUYqY/)

```
fill.addEventListener("click", function(event)
{
        if ($(this).attr('value') == 'Top Up')
        {
            $(this).val('Stop');
            $(this).prev('.ui-btn-inner').children('.ui-btn-text').html('Stop');
            $(this).buttonMarkup({ theme: "c" });
        }       

       else
        {
            $(this).val('Stopping');
            $(this).prev('.ui-btn-inner').children('.ui-btn-text').html('Stopping');
            $(this).buttonMarkup({ theme: "b" });
        } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:30:06.383

`$(this)`在更改元素的 HTML 时更改值

```
$(this).val("Stop"); 
```

您修改后的代码 [http://jsfiddle.net/2MbsG/5/](http://jsfiddle.net/2MbsG/5/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T11:23:40.237

它应该如何工作。每次点击后你都不会改变它的`value`属性，所以`if`不会进入`else`选项。

# css - 如何使用 CSS 使 DIV 在 x 可滚动窗格中向左流动？

> ID：15545985
> 
> 赞同：0
> 
> 时间：2013-03-21T11:17:17.127
> 
> 标签：css, css-float, overflow, html

我想创建一个特定高度和宽度的 x 可滚动面板，其中 DIV 应位于左侧或底部的一行中（请参阅此示例：http: [//jsbin.com/ohahac/1/edit](http://jsbin.com/ohahac/1/edit)）。我想让这个面板只能向左滚动。

我在这里错过了什么或做错了什么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML+RDFa 1.1//EN">

<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>untitled</title>
        <meta name="generator" content="TextMate http://macromates.com/">
        <meta name="author" content="headkit-studio">
        <!-- Date: 2013-03-21 -->
        <style>
            *{
                margin:0;
                padding:0;
            }
            .blockdiv{
                height: 500px;
                float:left;
                min-height:400px;
            }

        </style>

    </head>
    <body>
        <div id="main" style="overflow:hidden;">
            <div class="leftbar" style="width:150px; height: 500px; position: relative; float: left; display: inline; background-color:black;">LEFT</div>
            <div id="content" style="width:100%">
                <div class="section">
                    <div class="region" style="overflow-x:scroll; width:1200px; border:1px dotted black; height: 500px;">
                        <div id="01" class="blockdiv" style="background-color:yellow; width:450px">1</div>
                        <div id="01" class="blockdiv" style="background-color:blue; width:690px">2</div>
                        <div id="01" class="blockdiv" style="background-color:silver; width:500px">3</div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

谢谢！！

编辑：适用于空白：nowrap；（看看： http: [//jsbin.com/ohahac](http://jsbin.com/ohahac)）但是这个解决方案在 div 元素之间增加了一些差距！垂直滚动条也是不行的。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:59:28.337

你`inline-block`只想要。不适用于区域包装器`float:left` 。`white-space:nowrap;`

[http://jsbin.com/ohahac/15/edit](http://jsbin.com/ohahac/15/edit)

这是一个更简单的

[http://jsfiddle.net/btevfik/JuEVy/](http://jsfiddle.net/btevfik/JuEVy/)

# c# - 如何检查文件上传是否在其他页面上完成

> ID：15545990
> 
> 赞同：1
> 
> 时间：2013-03-21T11:17:20.297
> 
> 标签：c#, asp.net, webforms

我想通过以下方式上传 xlxs 文件。

单击“上传”按钮，我正在使用 JS 函数 window.open（“此处为其他一些 aspx 页面地址”）打开新的弹出窗口。

在其他页面上，我有一个文件上传器控件、一个按钮和一个标签来显示某些状态。

我想在这里，当用户上传文件并成功完成后，我想在父页面上启用按钮。

有人可以帮我怎么做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:58:58.103

成功完成上传后，您必须吐出 JavaScript 代码以关闭正在上传的当前弹出窗口并启用父窗口上的按钮。基本上，您需要在文件成功上传后立即编写如下内容：

```
string code 
       = @"<script> 
              window.opener.document.getElemenById('buttonID').disabled=false;
              window.close();

         </script>";
Response.Write(code);
Response.End(); 
```

哪里`buttonID`需要替换为父页面中的实际 buttonID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:27:50.913

解决方案可能是一个 javascript 函数

```
window.opener.document.getelementbyid 
```

# jquery - 滚动到 jQuery / CSS 中的内容

> ID：15545991
> 
> 赞同：1
> 
> 时间：2013-03-21T11:17:20.747
> 
> 标签：jquery, css, drop-down-menu

我正在创建一个简单的选择框`jQuery`。一切都很好，除了它`scrolling`。

我需要用 设置`UL`高度`overflow`，这样我就可以有一个滚动条。

请参阅 jsfiddle：[这里](http://jsfiddle.net/3Jw7B/5/)

在 jsFiddle 上，您可以看到`onKeyDown`（键盘向下箭头）选择将向下移动。

但在其`height`限制之后，它不会自动向下滚动。

看起来我做错了什么，请帮助我。

谢谢。

更新 ：

> 伙计们，请理解给定的示例小提琴只是一个示例。实际的不同。我更新了我的小提琴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:40:24.887

您的标记无效：

```
<li class="option current">Option 1<li> 
```

你没有正确关闭`li`。应该：

```
<li class="option current">Option 1</li> 
```

[更新的小提琴](http://jsfiddle.net/3Jw7B/6/)

**编辑**将这段 jQuery 代码添加到你的末尾：

```
$("#select").animate({
   scrollTop: $(".current").offset().top
}, 100); 
```

这应该给你一个想法。

# eclipse - Eclipse 中的 Maven 项目显示重复的源

> ID：15545998
> 
> 赞同：2
> 
> 时间：2013-03-21T11:17:45.107
> 
> 标签：eclipse, maven

我在 Eclipse 中有 Maven 项目，里面有 java 类。

问题是我有两个文件夹可以查看源代码，一个是**Java Resources**，第二个是**src**。

![在此处输入图像描述](../Images/10f09ab40576265a3a623546525d3cfa.png)

为什么？以及如何摆脱**src**文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:00:27.360

右键单击项目->Maven->更新 Maven 项目。

这应该可以帮助您恢复正确的结构。