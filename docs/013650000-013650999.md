# StackOverflow 问答 13650000-13650999

# mysql - SQL 数据库中的非规范化或规范化（继承的数据）

> ID：13650002
> 
> 赞同：2
> 
> 时间：2012-11-30T17:21:19.187
> 
> 标签：mysql, inheritance, orm, normalization, denormalization

我继承了数据对象（例如，用户、员工、经理等）。我们使用自己编写的 ORM 来管理 MySql 数据库中的数据。如何更好地存储数据：

*   以标准化格式划分为以 1 对 1 关系链接的不同 MySql 表（并使用多个连接来管理数据）；

*   或者在一个物理表中使用非规范化方式，在每个特定情况下都有很多未使用的字段。

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T17:26:50.867

通常，除非您有充分的理由不这样做，否则您的数据库应该完全规范化。您对数据的反规范化越多，您可能遇到的同步问题就越多，您可能引入的错误就越多。

# c - C Segmentation Fault，多个警告

> ID：13650003
> 
> 赞同：0
> 
> 时间：2012-11-30T17:21:21.683
> 
> 标签：c, segmentation-fault, strcat

这是我在 stackoverflow 上的第一篇文章，我希望我没有违反任何规则或重新发布。我一直在寻找我的警告的答案。虽然我可以找到一些类似的实例，但我无法得到有效的修复。我希望能得到一些帮助。

我需要找到与 hashfunction(myname) 的哈希冲突。所以我做了一些研究并将这个递归函数放在一起，它将测试每个可能的字符串到指定的长度并在找到字符串时打印它。看一看。

```
void findCollision(char prefix[], int max_length);

int main() {
    printf("Finding collison\n");
    char blank[0] = {'a'};
    findCollision(blank,999);
    printf("Press Enter to Continue");
    while( getchar() != '\n' );
    return 0;
}

void findCollision(char prefix[], int max_length){
    char c;
    char temp[sizeof(prefix)+1];
    for(c = 'a'; c <= 'z'; c++){
        strcpy(temp, prefix);
        strcat(temp, c);
        if(hashFunction(temp) == -408228925 && temp != 'myname'){
            printf("found it! --->");
            printf("%s", temp);
        }
    }
    for(c = 'a'; c <= 'z'; c++){
        strcpy(temp, prefix);
        strcat(temp, c);
        if(sizeof(prefix) < max_length){
            findCollision(temp, max_length);
        }
    }
} 
```

当使用哈希码编译时（如果需要，我也可以提供）我得到这些错误。

```
----------Build Started--------
----------Building project:[ hash - Debug ]----------
/home/mustbelucky/hash/hash.c
22:2: warning: excess elements in array initializer [enabled by default]
22:2: warning: (near initialization for ‘blank’) [enabled by default]
34:3: warning: passing argument 2 of ‘strcat’ makes pointer from integer without a cast [enabled by default]
/usr/include/string.h
136:14: note: expected ‘const char * __restrict__’ but argument is of type ‘char’
/home/mustbelucky/hash/hash.c
35:50: warning: character constant too long for its type [enabled by default]
35:47: warning: comparison between pointer and integer [enabled by default]    
42:3: warning: passing argument 2 of ‘strcat’ makes pointer from integer without a cast [enabled by default]   
/usr/include/string.h
136:14: note: expected ‘const char * __restrict__’ but argument is of type ‘char’

----------Build Ended---------- 
```

我已经用谷歌搜索了它们，但没有成功找到成功的修复程序。有什么想法吗？这个项目将在 2 天内到期，我感觉它必须运行一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:27:18.730

`char blank[0] = {'a'};`

声明一个长度为零的字符数组，但你用长度为 1 的数组填充它

`strcat(temp, c);`

尝试 cat temp，它是一个 char[] 到 c，它是一个 char。两个参数都应该是 char* 或 char[]

我认为除了您提供的代码段之外，还报告了其他错误。

编辑：

`temp != 'myname'`

似乎正在尝试测试是否`temp`匹配`'myname'`，但`'myname'`它是一个字符文字（如果这甚至编译它可能是'm'，并且 temp 是一个 char []，你想使用`strcmp(temp, "myname") != 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:29:57.250

这里的警告实际上是不言自明的。

```
22:2: warning: excess elements in array initializer [enabled by default] 
```

这意味着您在数组中放置的元素比您腾出的空间要多。

```
34:3: warning: passing argument 2 of ‘strcat’ makes pointer from integer without a cast [enabled by default] 
```

这意味着第二个参数应该是一个指针，但你给它一个 char/int。

其他警告似乎来自其他代码。

您的段错误的至少一个原因是因为`sizeof`不会在这里做您想做的事情。

# java - 删除具有外键原子的实体吗？

> ID：13650004
> 
> 赞同：0
> 
> 时间：2012-11-30T17:21:25.120
> 
> 标签：java, hibernate, jpa

正在删除具有子/外键/`CascadeType.REMOVE`原子的实体吗？我需要交易还是可以省略？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:37:14.510

你**总是**需要一个事务，它不是可选的。**在**事务之外没有原子性保证。从理论上讲，如果您提供了确切的数据库实现和版本号的详细信息，则可能会证明在这种特殊情况下更新确实是原子的，但事实仍然是，这不是编写可靠软件的方法。

你可以[在这里阅读](http://docs.jboss.org/hibernate/orm/3.5/reference/en-US/html/transactions.html#transactions-basics-uow)Hibernate 对事务的态度。

# asp.net-mvc - 将 id 属性值发布到控制器 ASP.Net MVC

> ID：13650005
> 
> 赞同：1
> 
> 时间：2012-11-30T17:21:27.300
> 
> 标签：asp.net-mvc

假设我们在 asp.net mvc 中有三个超链接标签。每个标签都有一个唯一的 id 属性。如何将所选超链接的 id 属性值发布到控制器？

超链接是这样的：

```
 <a href="#" id="1" onclick="jQuery('#dialog').dialog('open'); return false; ">A</a>
    <a href="#" id="2" onclick="jQuery('#dialog').dialog('open'); return false; ">B</a>
    <a href="#" id="3" onclick="jQuery('#dialog').dialog('open'); return false; ">C</a> 
```

该对话框只是打开一个表单来上传图像并将图像发送到控制器。

```
<script type="text/javascript">
$(function () {
    $("#dialog").dialog({
        bgiframe: true,
        height: 170,
        modal: true,
        autoOpen: false,
        resizable: false
    })
}); 
```

并调用控制器方法：

```
<div id="dialog" title="A" >
          <% using (Html.BeginForm("myMethod", "Controller", new { @Id = Model.Id }, FormMethod.Post, new { enctype = "multipart/form-data" }))
               {%>
                <p><input type="file" id="fileUpload" name="fileUpload" style="width:23;"/> </p>
                <p><input type="submit" value="B" /></p>
          <% } %>

       </div> 
```

我不仅被迫发送身份证。However I have to send a different parameter when different hyperlink is selected to determine which of them is selected.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:54:14.253

做这样的事情

```
<a href="#" id="1" onclick="click(this);">A</a>
<a href="#" id="2" onclick="click(this)">B</a>
<a href="#" id="3" onclick="click(this)">C</a>
<script>
function click(a){
 var $a = $(a);
 //and do anything here
 //access the id like
 var id = $a.attr('id');
}
</script> 
```

# python - 输入的不确定性

> ID：13650006
> 
> 赞同：0
> 
> 时间：2012-11-30T17:21:28.703
> 
> 标签：python, stdout, stdin

我正在通过 python 执行一个外部程序，如果外部程序要求输入，那么我的 python 脚本必须提示我输入并继续使用这些输入再次执行。

**有什么方法可以查找进程的标准输入是否处于活动状态以接受输入？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:36:04.567

**假设如果控制台空闲 10 秒，它可能会等待输入**，
注意：并不总是这种情况，比如线程是否正在休眠等。
但为了简单起见，我假设前者。

所以，

```
process=subprocess.Popen(['some_process_with_inputs'],shell=true,stdin=subprocess.PIPE)  
start = time.time()  
time_to_wait_for_idleness=10  
while 1:  
    ret=process.poll()  
    if ret == None and (time.time() - start) > time_to_wait_for_idleness:  
        #Waiting for input possibly.. Do things here ie.. process.communicate() 
    time.sleep(1) 
```

只是一个建议，可能会对某人有所帮助。感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:38:57.770

看看 pexpect 模块：
[http ://www.noah.org/wiki/pexpect](http://www.noah.org/wiki/pexpect)

它允许您运行一个进程并等待某些模式，然后发送输入并读取结果。您需要知道您的期望，并且可能会等待某些超时，直到您收到输入提示。

如果您的程序在提示时是完全随机的，那将会复杂得多。

# html - 为什么我的标题比它应该的高？

> ID：13650007
> 
> 赞同：0
> 
> 时间：2012-11-30T17:21:29.170
> 
> 标签：html, css, wordpress

我正在使用我的正常网站[http://christianselig.com](http://christianselig.com)并将其转换为位于[http://christianselig.com/wp](http://christianselig.com/wp)的 Wordpress 网站。

我有问题。我在顶部的导航菜单的高度不同。它具有几乎相同的样式，所以我无法说明原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:31:28.923

HTML 和 CSS 在这两种情况下都有很大的不同，我发现的是

```
nav.main-navigation 
```

应用了 10px 填充。

尝试

```
body nav.main-navigation {paddng:0 0 7px 0;} 
```

这将删除顶部填充。

如果这没有帮助，请浏览所有 CSS 并检查应用了顶部和底部边距或填充的位置，然后根据您的需要对其进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:35:23.933

因为 li 标签中的 a 标签在一侧有 display:block 而在另一侧没有:)

# windows-8 - TextBox 中的双向绑定在失去焦点后未更新

> ID：13650010
> 
> 赞同：1
> 
> 时间：2012-11-30T17:21:34.573
> 
> 标签：windows-8

在下面的示例中，当我在 TextBox 中键入一个新字符串并用 Tab 标记出来时，TextBlock 会更新，但 TextBox 会保留我输入的值，而不是使用修改后的字符串进行更新。任何想法如何改变这种行为？

```
<Page
        x:Class="App1.MainPage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="using:App1"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d">

        <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}" Margin="106,240,261,187">
            <StackPanel>
                <TextBox Text="{Binding MyProp, Mode=TwoWay}"/>
                <TextBlock Text="{Binding MyProp}"/>
            </StackPanel>
        </Grid>
    </Page>

public class ViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public ViewModel()
        {
            MyProp = "asdf";
        }

        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
        protected bool SetField<T>(ref T field, T value, string propertyName)
        {
            if (EqualityComparer<T>.Default.Equals(field, value)) return false;
            field = value;
            OnPropertyChanged(propertyName);
            return true;
        }

        private string m_myProp;

        public string MyProp
        {
            get { return m_myProp; }
            set
            {
                m_myProp = value + "1";
                OnPropertyChanged("MyProp");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T04:46:12.833

您看到的行为在某种程度上是预期的行为。

当您跳出 TextBox 时，绑定会调用 MyProp 设置器。当您调用 OnPropertyChanged() 时，您仍处于原始绑定的上下文中，并且只有其他绑定会收到更改通知。（要验证它，在 Getter 上设置一个断点，并查看它仅在调用 OnPropertyChanged 后被命中一次。解决此问题的方法是在初始绑定完成更新后调用 OnPropertyChanged，这是通过调用方法来实现的异步并且不等待它返回。

将对 OnPropertyChanged("MyProp") 的调用替换为：

```
Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, new 
Windows.UI.Core.DispatchedHandler(() => { OnPropertyChanged("MyProp"); })); 
```

# javascript - 我可以通过哪些方式测试图像幻灯片 javascript 代码？

> ID：13650012
> 
> 赞同：1
> 
> 时间：2012-11-30T17:21:36.770
> 
> 标签：javascript, testing

我在页面上有图像（和链接）的幻灯片。这些图像是对页面加载后发送的请求的 JSON 响应的一部分。幻灯片设置为以 2 秒的间隔播放。幻灯片可以暂停、播放，以及普通幻灯片具有的所有其他控件。

作为一名 Rails 开发人员，我提出了 cucumber，但团队中的 javascript 人员对 ruby​​ 并不满意。我看到一些用于 javascript 库的黄瓜即将出现，仍处于实验阶段。

我查看了 jasmine 和相关教程，但我能从中得到的只是我如何进行任何内部功能测试，例如信用卡验证等——我认为这实际上可以在单元测试中处理？

（搞砸我所做的研究，并且）我应该如何测试这个和类似的组件？

# jquery - 带有空白“url”的jQuery中的AJAX

> ID：13650021
> 
> 赞同：2
> 
> 时间：2012-11-30T17:22:03.653
> 
> 标签：jquery, ajax, servlets

有一个站点，它传递给我一个参数`token`，只有当我调用该站点的基本 url 时。例如，只有当我调用`http://www.site.com`它时才会将其转换为`http://www.site.com?token=979797979`. 因此，`url-pattern`我的`web.xml`文档中的行如下所示：

```
<url-pattern>/</url-pattern> 
```

我有处理这个调用的 servlet，但是当我试图从 Jquery 调用一个 servlet 时`$.ajax`它不起作用，因为 URL 有空字符串但它需要有空字符串，因为对站点的调用是对主 URL .

```
$.ajax({
    type: "GET",
    url: "",
    success: function(data1){ alert(data1) }
} 
```

也许我不明白什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:28:54.953

试试 URL“/”。

然后 jQuery 应该在你的站点的根 URL 上执行一个 GET 请求——在你的例子中是“http://www.site.com”。

# asp.net-mvc - Ruby on Rails 3 或 ASP .NET MVC 4

> ID：13650022
> 
> 赞同：0
> 
> 时间：2012-11-30T17:22:15.177
> 
> 标签：asp.net-mvc, ruby-on-rails-3

这是我的问题，在工作安全和自由职业方面应该学习 Ruby on Rails 3 或 ASP .NET MVC 4。我住在东海岸（纽约市、新泽西州、康涅狄格州）。

感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:31:08.420

老实说，这完全取决于偏好。就个人而言，我喜欢 Ruby 作为一门语言，Rails 框架对它进行了很好的补充。我知道东海岸的许多公司都在积极寻找 Ruby 开发人员。

Ruby 社区非常活跃、热情且友好。我知道一些开发人员已经完成了从 .NET 到 Ruby 的转换，他们非常高兴。

我并不是说.NET 不好或类似的东西。也许其他人可以为您提供他们对 .NET 领域的见解。

一条建议是，您不应该只坚持一种特定的语言或框架。Rails 只是 Ruby 必须提供的众多框架之一。看看西纳特拉和帕德里诺。此外，学习不同的语言总是好的，因为你可以补充你的知识。Erlang、Scala 和 Javascript 是非常有趣的语言，您应该花时间研究一下。

希望这可以帮助！

# c++ - 使用 char ** 新元素覆盖以前的元素

> ID：13650025
> 
> 赞同：3
> 
> 时间：2012-11-30T17:22:19.487
> 
> 标签：c++, arrays, pointers

```
char ** Ptr;
char apple[15];
char cake[15];
Ptr = new char*[2];

Ptr[0]=apple;
Ptr[1]=cake; 
```

可惜更新后`Ptr[1]`，`Ptr[0]`变成`cake`除了`Ptr[1]`。我很确定问题是我如何声明`Ptr`我本质上希望它是一个字符串数组。有没有办法在我保留的地方做到这一点`char ** Ptr`？

**编辑：**

```
{
char **Ptr;
{
char apple[15];
Ptr = new char*[2];
for(int k=0;k<2;k++)
{
memset(apple,0,15);
//apple=
Ptr[k]=apple; //Note that apple in fact changes everytime
}
//Originally I had Ptr[k]=apple but it seemed I was merely copying the address of  
//apple which works great except when I leave the scope trying to call it the addr no 
//longer exists and I was getting lucky the last entry showed up at all. So I then 
//figured I would use

strcpy(Ptr[k],apple);

//I then checked the value for both was correct even when I deleted apple.
// Finally I leave the scope where all this is taking place
}
cout<<Ptr[0];
cout<<Ptr[1];
} 
```

幸运的是，它们实际上是等效的垃圾。前几个字符是相同的，但大多是垃圾。我认为可能是范围问题，`Ptr`所以基本上使它成为全球同样的问题。无论如何，我留下了最初的问题，即使它不包含任何问题，因为每个人都很好地指出，因为我已经制作了单独的变量`cake`（呜呜声）。任何帮助将不胜感激。

无论如何，感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:07:40.120

即使在您编辑之后，您的意思仍然不是很清楚，特别是因为您似乎确实了解指针和范围是什么。

> 不再存在，我很幸运最后一个条目出现了。所以我想我会用
> 
> ```
> strcpy(Ptr[k],apple); 
> ```

如果你像这样使用，那么你必须为堆上的*每个*`strcpy`分配内存，你的代码就可以正常工作。 *`Ptr[k]`*

 *但是，由于您使用 C++ 进行编码，因此最好坚持使用 C++ 功能。即，不是分配数组`chars`和指向 的指针`chars`，这是一种 C 方法，而是使用以下内容：

```
vector<string> Ptr;
{
    string apple;
    for(int k=0;k<2;k++)
    {
        //apple=
        Ptr.push_back(apple);
    }
}
cout<<Ptr[0];
cout<<Ptr[1]; 
```

为了清楚起见，在这里我将变量的名称和代码结构保持不变，尽管`Ptr`显然不再是指针。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-30T17:33:51.233

用于`Ptr = malloc(sizeof(char *) * 2);`代替`Ptr = new char*[2];`*

# xquery - 如何使用 Saxon 导入 xquery 模块

> ID：13650027
> 
> 赞同：1
> 
> 时间：2012-11-30T17:22:29.160
> 
> 标签：xquery, saxon

我在使用 Saxon9HE 运行 Xquery 时遇到了一些麻烦，它引用了外部模块。我希望 Saxon 使用相对路径相当绝对的来解析模块。

模块声明

```
module namespace common = "http://my-xquery-utils"; 
```

从主 xquery

```
import module namespace common = "http://my-xquery-utils" at "/home/myself/common.xquery"; 
```

从我的java代码

```
public class SaxonInvocator {

private static Processor proc = null;
private static XQueryEvaluator xqe = null;
private static DocumentBuilder db = null;
private static StaticQueryContext ctx = null;

/**
 * Utility for debug, should not be called outside your IDE
 *
 * @param args xml, xqFile, xqParameter
 */
public static void main(String[] args) {
    XmlObject instance = null;
    try {
        instance = XmlObject.Factory.parse(new File(args[0]));
    } catch (XmlException ex) {
        Logger.getLogger(SaxonInvocator.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex){
        Logger.getLogger(SaxonInvocator.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.print(transform(instance, args[1], args[2]));
}

public static String transform(XmlObject input, String xqFile, String xqParameter) {
    String result = null;
    try {
        proc = new Processor(false);
        proc.getUnderlyingConfiguration().getOptimizer().setOptimizationLevel(0);
        ctx = proc.getUnderlyingConfiguration().newStaticQueryContext();
        ctx.setModuleURIResolver(new ModuleURIResolver() {

            @Override
            public StreamSource[] resolve(String moduleURI, String baseURI, String[] locations) throws XPathException {
                StreamSource[] modules = new StreamSource[locations.length];
                for (int i = 0; i < locations.length; i++) {
                    modules[i] = new StreamSource(getResourceAsStream(locations[i]));
                }
                return modules;
            }
        });

        db = proc.newDocumentBuilder();
        XQueryCompiler comp = proc.newXQueryCompiler();
        XQueryExecutable exp = comp.compile(getResourceAsStream(xqFile));
        xqe = exp.load();
        ByteArrayInputStream bais = new ByteArrayInputStream(input.xmlText().getBytes("UTF-8"));
        StreamSource ss = new StreamSource(bais);
        XdmNode node = db.build(ss);
        xqe.setExternalVariable(
                new QName(xqParameter), node);
        result = xqe.evaluate().toString();
    } catch (SaxonApiException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return result;
}

public static InputStream getResourceAsStream(String resource) {
    InputStream stream = SaxonInvocator.class.getResourceAsStream("/" + resource);
    if (stream == null) {
        stream = SaxonInvocator.class.getResourceAsStream(resource);
    }
    if (stream == null) {
        stream = SaxonInvocator.class.getResourceAsStream("my/project/" + resource);
    }
    if (stream == null) {
        stream = SaxonInvocator.class.getResourceAsStream("/my/project/" + resource);
    }
    return stream;
} 
```

}

如果将其更改为相对路径，例如

```
import module namespace common = "http://my-xquery-utils" at "common.xquery"; 
```

我明白了

> 第 22 行第 1 列 XQST0059 出错：java.io.FileNotFoundException

我不确定应该如何使用 ModuleURIResolver。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:29:02.120

撒克逊人的问题最好在撒克逊人论坛[http://saxonica.plan.io](http://saxonica.plan.io)上提出——这里提出的问题最终可能会被注意到，但有时，就像这次一样，它们不是我们的首要任务。

基本答案是，对于要解析的相对 URI，需要知道基本 URI，这意味着您需要确保设置了 XQueryCompiler 中的 baseURI 属性。如果您从 File 编译查询，这会自动发生，但如果您从 InputStream 编译查询则不会。

如果您不知道要设置的合适的基本 URI，另一种方法是编写一个 ModuleURIResolver，例如，它可以通过对 getResourceAsStream() 进行另一个调用来获取模块。

# sql-server-2008 - SQL Server：单引号在一种环境中有效，但在另一种环境中无效

> ID：13650028
> 
> 赞同：2
> 
> 时间：2012-11-30T17:22:33.277
> 
> 标签：sql-server-2008

我构建了一个这样的存储过程：

```
create proc sp_test
  (@name nvarchar(100))
as
begin
    select * from company
    where company.companyname like '%'+@name+'%'
end
go 
```

现在我想测试我的存储过程。因为公司名称可能有一个单引号，例如：Bob's Warehouse，所以我使用这个名称作为参数在 DEV、SIT、UAT 等不同环境中运行我的存储过程。我用 2 个单引号替换单引号。我发现我可以在 DEV 中获得结果，但不能在 UAT 中获得结果。我不知道为什么。

```
exec sp_test 'Bob''s Warehouse' 
```

这与不同环境中的数据库设置有关吗？为什么完全相同的代码可以在一种环境中运行，而在另一种环境中却不行？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:42:02.343

如果仅仅是因为单引号，那么在一个环境而不是另一个环境上工作是没有意义的。尝试在不同的环境中备份和恢复相同的数据并尝试一下，这可能是因为脏数据。如果您有像 [Bob's Warehouse] 这样的特定记录在不同的环境中不起作用，请尝试检查您看到的单引号是否真的是 char(39)。您也可以尝试在不同的环境中运行 [exec sp_test 'Bob' + char(39) + 's Warehouse' ] 看看它是否有效。

# c# - 反向波兰表示法：忽略输入公式中的括号和空格

> ID：13650031
> 
> 赞同：2
> 
> 时间：2012-11-30T17:22:43.900
> 
> 标签：c#

我目前正在使用反向波兰符号计算器。它功能齐全，但我遇到了文本输入问题，然后将用于计算值。如果引入类似的公式，程序就会中断`( 8 5 + ) 6 * =`。有没有办法简单地忽略输入值中显示的任何括号？此外，我的程序确实会根据每个数字之间的空格进行拆分，但是如果我要在操作数或括号之间添加空格，它也会中断：`(8 5 +)6 * =`。如果它是无效的公式`12 + =`（缺少数字），我想忽略它们并在输出文本框中显示一条错误消息。

旁注：每个公式都由结尾触发`=`。

**代码**

```
namespace rpncalc
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

      private string inputValue = "";

        private void RPNCalc(string rpnValue)
        {
            Stack<int> stackCreated = new Stack<int>();
            stackCreated.Clear();
            string[] inputArray = rpnValue.Split();
            int end = inputArray.Length - 1;
            int numInput;
            int i = 0;

            do
            {
                if ("=+-*/%^".IndexOf(inputArray[i]) == -1)
                {
                    try
                    {
                        numInput = Convert.ToInt32(inputArray[i]);
                        stackCreated.Push(numInput);
                    }
                    catch
                    {
                        MessageBox.Show("Please check the input");
                    }
                }

                    else if (inputArray[i]== "+")
                    {
                        try
                        {
                            int store1 = stackCreated.Pop();
                            int store2 = stackCreated.Pop();
                            stackCreated.Push(store2 + store1);
                        }
                        catch
                        {
                        }
                    }

                    else if (inputArray[i]== "-")
                    {
                        try
                        {
                            int store1 = stackCreated.Pop();
                            int store2 = stackCreated.Pop();
                            stackCreated.Push(store2 - store1);
                        }
                        catch
                        {
                        }
                    }

                    else if (inputArray[i]== "%")
                    {
                        try
                        {
                            int store1 = stackCreated.Pop();
                            int store2 = stackCreated.Pop();
                            stackCreated.Push(store2 % store1);
                        }
                        catch
                        {
                        }
                    }

                    else if (inputArray[i]== "*")
                    {
                        try
                        {
                            int store1 = stackCreated.Pop();
                            int store2 = stackCreated.Pop();
                            stackCreated.Push(store2 * store1);
                        }
                        catch
                        {
                        }
                    }

                    else if (inputArray[i]== "/")
                    {
                        try
                        {
                            int store1 = stackCreated.Pop();
                            int store2 = stackCreated.Pop();
                            stackCreated.Push(store2 / store1);
                        }
                        catch
                        {
                        }
                    }

                    else if (inputArray[i] == "^")
                    {
                        try
                        {
                            int store1 = stackCreated.Pop();
                            int store2 = stackCreated.Pop();
                            stackCreated.Push((int)Math.Pow(store1, store2));

                        }
                        catch
                        {
                        }
                    }

            }
            while(i++ < end && inputArray[i]!= "=" && stackCreated.Count != 0);
            string result = inputValue + " " + stackCreated.Pop().ToString() + Environment.NewLine;
            TxtOutputBox.AppendText(result);
            TxtInputBox.Clear();

        }

        private void TxtOutputBox_TextChanged(object sender, EventArgs e)
        {

        }

        private void Btn_Calc_Click(object sender, EventArgs e)
        {
            inputValue = TxtInputBox.Text + " ";
            RPNCalc(inputValue);
        }
    }
} 
```

![在此处输入图像描述](../Images/a3a33d8ea8bc00f0a7b8ae2a0e3c5285.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:54:16.907

首先，做类似的事情

```
rpnValue = rpnValue.Replace(" ", "").Replace("(","").Replace(")",""); 
```

正如 Sam 对这个问题的回答所建议的那样，需要对整个算法进行重大重写。问题在于消除空格的 Replace(" ", "") 部分。但是，该算法依赖于拆分来标记输入。如果您在拆分之前消除空格，而不是获得一个数字和运算符数组，您将获得一个现有代码无法处理的单个字符串。更糟糕的是 "12 3 * =" 和 "1 23 * =" 都将被转换为 "123*=" !!!

为避免进行大的更改，请按如下方式更改代码：

在拆分之前插入以下代码：

```
rpnValue = rpnValue.Replace("("," ").Replace(")"," "); 
```

这确保了括号按要求被忽略，但以使 (8 5 +)6 * = 起作用的方式。

然后进行以下添加：

```
 if (" \t\n\r".IndexOf(inputArray[i]) != -1) {
                       continue;
                } else if ("=+-*/%^".IndexOf(inputArray[i]) == -1)
                ... 
```

循环结束时的代码也需要更改：

```
 while (i++ < end && inputArray[i] != "=");
        if(stackCreated.Count != 1)
            MessageBox.Show("Please check the input"); 
```

希望有帮助:-)

--------------------------正确的答案到此结束 ------------------ ----------------

补充建议：这个问题不涉及报错的问题，但我还注意到了其他一点：堆栈上的操作被try catch语句包围，catch部分没有任何反应。这样，格式错误的输入就不会被适当地标记。我建议删除那些 try catch 语句并在函数体周围放置一个语句。

一些有趣的事情：我的目标是只回答提出的非常具体的问题，但由于看到 LB 的漂亮代码被发布在这里，我更新了答案以包含 RPNCalc 的替代定义，它与您的原始方法一样简洁但更接近您的原始方法不依赖正则表达式（除了要计算的表达式不以 结尾`=`）。

```
 private void RPNCalc(string rpnValue)
    {
        Stack<int> stackCreated = new Stack<int>();

        try {

            var tokens = rpnValue.Replace("(", " ").Replace(")", " ")
                                 .Split().Where(s => !String.IsNullOrWhiteSpace(s));

            foreach (var t in tokens) {

                try {

                    stackCreated.Push(Convert.ToInt32(t));

                } catch {

                    int store1 = stackCreated.Pop();
                    int store2 = stackCreated.Pop();

                    switch(t) {
                        case "+": store2 += store1; break;
                        case "-": store2 -= store1; break;
                        case "*": store2 *= store1; break;
                        case "/": store2 /= store1; break;
                        case "%": store2 %= store1; break;
                        case "^": store2 = (int) Math.Pow(store2, store1); break; /* was (int) Math.Pow(store1, store2); in the original code*/  
                        default: throw new Exception();
                    }

                    stackCreated.Push(store2);
                }
            }

            if(stackCreated.Count != 1)
                MessageBox.Show("Please check the input");
            else
                textBox1.Text =   stackCreated.Pop().ToString();

        } catch {
            MessageBox.Show("Please check the input");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:25:54.133

如何从字符串中删除不重要的字符：

```
string str = inStr.Replace(" ", "").Replace("(","").Replace("etc.",""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:50:01.203

只是一个想法;

```
string input = @"( 8 5 + ) 6 *";
var tokens = Regex.Matches(input, @"(?<num>[0-9]+)|(?<op>[\+\-\*\/\^\%])").Cast<Match>()
                .Select(m=> String.IsNullOrEmpty(m.Groups["num"].Value)
                            ? new Tuple<string,string>("op",m.Groups["op"].Value)
                            : new Tuple<string,string>("num",m.Groups["num"].Value))
                .ToList();

var fxns = new Dictionary<string, Func<int, int, int>>()
{
    {"+",(i,j)=>j+i },
    {"-",(i,j)=>j-i },
    {"*",(i,j)=>j*i },
    {"/",(i,j)=>j/i },
    {"%",(i,j)=>j&i },
    {"^",(i,j)=>(int)Math.Pow(j,i) },
};

Stack<int> stack = new Stack<int>();

foreach (var token in tokens)
{
    if (token.Item1 == "num")
        stack.Push(int.Parse(token.Item2));
    else
        stack.Push(fxns[token.Item2](stack.Pop(), stack.Pop()));
}

int finalResult = stack.Pop(); 
```

# linux - linux下的思维导图工具

> ID：13650034
> 
> 赞同：1
> 
> 时间：2012-11-30T17:22:56.493
> 
> 标签：linux, ubuntu, mindmapping

我想做具有mindmeister质量的思维导图，你可以包含图片和链接等，并且能够很好地导出并打印它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:30:37.950

我喜欢 X-Mind。我不知道它是否满足您的需求，但我只使用了它的一小部分，它仍然很震撼！

它有一个非常完整的免费版本，永不过期，不包含垃圾软件。

[http://www.xmind.net/download/linux/](http://www.xmind.net/download/linux/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:32:52.040

我更喜欢 Freeplane，但 FreeMind 可以做同样的事情：

*   [http://freemind.sourceforge.net/wiki/index.php/FreeMind_on_Linux](http://freemind.sourceforge.net/wiki/index.php/FreeMind_on_Linux)
*   [http://sourceforge.net/projects/freeplane/](http://sourceforge.net/projects/freeplane/)

# android - Android ZXing 集成无法启动活动错误

> ID：13650035
> 
> 赞同：1
> 
> 时间：2012-11-30T17:23:01.047
> 
> 标签：android, zxing

在我的头撞到我的桌子上并雕刻了stackoverflow上的相关帖子之后，我不愿意发布这个问题，但就是无法解决问题。所以我们在这里。我正在尝试将**ZXing**集成到我的 Android 应用程序中，正如许多开发人员所尝试的那样，但一直遇到相同的错误：`Unable to start activity ComponentInfo`. 我添加了 core.jar 并将活动和相机权限添加到清单中。我知道我在这里缺少一些非常简单的事情要做。尝试使用意图进行扫描时出现以下错误。我已经尝试过浏览 ZXing 库并将所有 switch 语句更改为 if/else。我还尝试在 ZXing 布局中添加我的包名称，如下所示：[Android ZXing implementation](https://stackoverflow.com/questions/7171139/android-zxing-implementation-problem/7183137#7183137)

**爪哇：**

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainMenu extends Activity {

Button btn_scan

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_menu);

    btn_scan = (Button) findViewById(R.id.btn_scanbarcode);
    btn_scan.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Intent intent = new Intent(
                    "com.google.zxing.client.android.SCAN");
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
            startActivityForResult(intent, 0);

        }
    });

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            String contents = intent.getStringExtra("SCAN_RESULT");
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
            // Handle successful scan
        } else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
        }
    }
}

} 
```

**显现**

```
<activity
        android:name="com.google.zxing.client.android.CaptureActivity"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateAlwaysHidden" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.google.zxing.client.android.SCAN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

**日志猫：**

```
11-30 10:54:04.713: E/AndroidRuntime(15452): FATAL EXCEPTION: main
11-30 10:54:04.713: E/AndroidRuntime(15452): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.testapp/com.google.zxing.client.android.CaptureActivity}: android.view.InflateException: Binary XML file line #27: Error inflating class com.android.testapp
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2240)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2275)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.os.Looper.loop(Looper.java:156)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.ActivityThread.main(ActivityThread.java:5060)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at java.lang.reflect.Method.invokeNative(Native Method)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at java.lang.reflect.Method.invoke(Method.java:511)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at dalvik.system.NativeStart.main(Native Method)
11-30 10:54:04.713: E/AndroidRuntime(15452): Caused by: android.view.InflateException: Binary XML file line #27: Error inflating class com.android.testapp
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:278)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.Activity.setContentView(Activity.java:1897)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:143)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.Activity.performCreate(Activity.java:4543)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2196)
11-30 10:54:04.713: E/AndroidRuntime(15452):    ... 11 more
11-30 10:54:04.713: E/AndroidRuntime(15452): Caused by: java.lang.ClassNotFoundException: com.android.testapp
11-30 10:54:04.713: E/AndroidRuntime(15452):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
11-30 10:54:04.713: E/AndroidRuntime(15452):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
11-30 10:54:04.713: E/AndroidRuntime(15452):    ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:00:01.207

这里有几个问题，其中你试图在你的应用程序中声明我们的活动和命名空间。请不要这样做。它对您不起作用，并给我们的用户带来问题。

你似乎想这样做：[https ://github.com/zxing/zxing/wiki/Scanning-Via-Intent](https://github.com/zxing/zxing/wiki/Scanning-Via-Intent)

如果是这样，这比您在这里制作要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T22:30:33.960

您已将 zxing 项目作为库导入并删除不需要的类。这个过程很痛苦，但我得到了它的工作。

# regex - 如何替换在 linux 的特定文件夹中找到的所有电子邮件地址

> ID：13650037
> 
> 赞同：2
> 
> 时间：2012-11-30T17:23:05.633
> 
> 标签：regex, linux, awk, grep

我在某个文件夹中有一些脚本。喜欢`/var/www/sites`

现在我想替换所有文件夹和子文件夹中脚本中硬编码的所有电子邮件地址，并替换为我的电子邮件地址

我怎样才能做到这一点。

我可以找到使用

`grep -rn "abc@gmail.com" /var/www/sites/`

但我不知道如何使用正则表达式和替换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:25:46.657

试试 perl：

```
perl -p -i -e 's/abc@gmail.com/new@gmail.com/g' /var/www/sites/* 
```

或者使用 perl/find：

```
find /var/www/sites/ -exec perl -p -i -e 's/abc@gmail.com/new@gmail.com/g' {} \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:25:17.160

打开一个[shell](/questions/tagged/shell "显示标记为“外壳”的问题")，然后

如果你有[bash4](/questions/tagged/bash4 "显示标记为“bash4”的问题")：

```
oldmail="abc@gmail.com"
newmail="myemail@provider.tld"
shopt -s globstar
sed -i "/$oldmail/s/$oldmail/$newmail/g" /var/www/sites/**/* 
```

如果不 ：

```
oldmail="abc@gmail.com"
newmail="myemail@provider.tld"
find /var/www/sites -type f -exec sed -i "/$oldmail/s/$oldmail/$newmail/g" {} + 
```

此解决方案的优点是即使文件不包含搜索到的字符串**也不**`sed -i`修改文件中的时间戳，这与没有前一个的&`perl -i -pe`解决方案不同`grep`（我在这里使用`/pattern/`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:26:20.320

```
find /var/www/sites -type f | xargs sed --in-place 's/abc@gmail\.com/mynewemail@elsewhere.com/g' 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-30T17:24:44.520

试试sed。

```
grep -rl "abc@gmail.com" /var/www/sites/ | xargs sed -i 's/oldemail/newemail/g' 
```

编辑：

考虑了反馈。很抱歉之前的错误解决方案！

# javascript - jQuery Slider 的问题 - 无法正确关闭

> ID：13650039
> 
> 赞同：0
> 
> 时间：2012-11-30T17:23:14.117
> 
> 标签：javascript, jquery, jquery-ui

**[http://jsfiddle.net/waJzP/43/](http://jsfiddle.net/waJzP/43/)**

我将分解功能问题 -

1.  如果您单击打开（阶段 1），然后单击打开更多（阶段 2），然后单击关闭 - 打开更多（阶段 2）保持打开状态。但是，如果您单击打开更多（第 2 阶段），然后单击打开更多（第 3 阶段），然后单击关闭 - 它们都会正确关闭。为什么是这样？

2.  “打开图片”无法正常关闭。此外，如果您打开了“打开更多（第 2 阶段）”和“打开更多（第 3 阶段）”，当您单击打开的图片时，它们应该会关闭。但它没有！

我对 jquery 很陌生，这一切都非常令人困惑！

```
$(document).ready(function() {
  $('.stage1').hide();  
    $("#stage1").click(function () {
      $(".stage1").toggle("slide", { direction: "right" }, 1000);
    });
    $('.stage2').hide();  
      $("#stage2").click(function () {
        $(".stage2").slideToggle();
        e.preventDefault();
      });
      $('.stage3').hide();  
      $("#stage3").click(function () {
        $(".stage3").slideToggle();
        e.preventDefault();
      });
    $('.photos').hide();  
      $("#photos").click(function () {
        $(".photos").slideToggle();
        e.preventDefault();
      });
         $("#showmap").click(function () {
          if ($('.stage2, .stage3').is(':hidden'))
             {$(".stage1").toggle("slide", { direction: "right" }, 1000); }
             else
             {
              $(".stage3").slideToggle();
              $(".stage2").slideToggle();
              $(".stage1").delay(1000).toggle("slide", { direction: "right" }, 1000);
             }
        });
}); 
```

----------------------------------------- HTML -------------------- ---------

```
<div id="stage1">Open</div>      
<div id="showmap">close (closes all)</div>
<div class="map-wrapper">

<img src="http://placehold.it/1000x300" width="100%">
<div class="stage1 map-main-slider">   <br>
<div id="stage2">open more</div>
<div id="photos"> Open Pictures (Should close stages 2 and 3 if open) </div>
</div>
</div>
<div>
</div>
<div class="photos" style="color:#FFFFFF;font-size:14px;text-align:center;">
<div> <br> <br> <br> I am Photos <br> <br> <br>  </div>
</div>
<div class="stage2" style="color:#FFFFFF;font-size:14px;text-align:center;">
<div id="stage3"> <br> <br> <br> Open More <br> <br> <br>  </div>
<div class="stage3" style="color:#FFFFFF;font-size:14px;text-align:center;"><br> <br> <br>I am More Infmation <br> <br> <br> </div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

--------------------------------- CSS

```
.map-wrapper{
  position: relative;
}

.map-main-slider {
    background-color: rgba(233, 233, 233, 0.96);
    background-image: url("/wordpress/wp-content/themes/penrose/img/noise.png");
    bottom: 0;
    height: 100%;
    left: 0;
    margin: 0;
    position: absolute;
    right: 0;
    width: 100%;
}
.map-inner {
  padding:4%
}

.stage2{
background:blue;

}

.stage3{
background:red;

}
.photos {background:green;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:37:07.410

如果检查不正确，在 Showmap 中单击功能检查初始值。我已修改如下代码

```
$("#showmap").click(function () {
      if ($('.stage2').is(':hidden') && $('.stage3').is(':hidden'))
         {
             $(".stage1").toggle("slide", { direction: "right" }, 1000); }
         else
         {
          $(".stage3").slideToggle();
          $(".stage2").slideToggle();
          $(".stage1").delay(1000).toggle("slide", { direction: "right" }, 1000);
         }
    }); 
```

请提琴

[http://jsfiddle.net/waJzP/45/](http://jsfiddle.net/waJzP/45/) 谢谢

# .net - 为什么我的 .net 框架特别缺少 MS API（System.Management 类）中的类？

> ID：13650041
> 
> 赞同：0
> 
> 时间：2012-11-30T17:23:26.367
> 
> 标签：.net, visual-studio-2010, debugging, wmi

我正在尝试使用 System.Management 和 System.Management.Instrumentation 命名空间来获取有关我的程序正在运行的硬件的一些信息。但是 System.Management 下的类似乎丢失了。我可以导入命名空间，但它似乎不包含任何东西。Instrumentation Namespace 似乎有它的所有类。我确定我正在查看 .net 4 框架 API，它似乎应该在那里。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:35:06.867

一个命名空间可以分散在多个框架程序集中。System.Management.Instrumentation 肯定是这种情况，它出现在 System.Core.dll 中。这是一个程序集，由您选择的项目模板自动添加为参考，以启动您的项目。

System.Core 非常有用，例如它包含 Action<> 和 Func<> 委托类型。几乎所有程序都对它们有用，因此它会自动添加。System.Management.Instrumentation 命名空间随之而来。这对于 .NET 程序集并不典型，但 System.Core 有点特殊，它包含在 .NET 3.5 中添加的类，它们不想与 .NET 2.0 和 .NET 3.0 程序集混淆。

但是要使用 WMI 完成一些有用的事情，您需要像 ManagementQuery 这样的类，它们存在于另一个程序集 System.Management.dll 中。这不像 System.Core 那样自动完成，WMI 不是常用的东西。所以它是可选的，你必须要求它。

使用 Project + Add Reference 添加 System.Management

使用 MSDN Library 找出需要添加哪些程序集才能使用特定的类，文章顶部对此进行了详细记录。对于 ManagementQuery，您将看到：

**命名空间：** System.Management
**程序集：** System.Management（在 System.Management.dll 中）

最后一行是你的提示。

# objective-c - 如何在Objective-C中从集合结束而不是从开始实现for-in循环？

> ID：13650044
> 
> 赞同：1
> 
> 时间：2012-11-30T17:23:32.683
> 
> 标签：objective-c, ios, for-in-loop

我正在尝试通过 for in 循环迭代 NSDictionary。但我希望它从这个集合的末尾开始迭代到它的开头。我怎样才能实现这种回归？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T17:28:40.543

`NSDictionary`是无序的数据结构。没有前向迭代或后向迭代的概念。

当您在 foreach 循环中调用 NSDictionary 时，您正在迭代一个无序列表的键。迭代无序列表时，顺序未定义，因此颠倒顺序也是如此。这类似于将一副纸牌散落在地板上，然后要求某人颠倒顺序。

假设您的键有一些顺序层次结构（数字、字母等），您可以获取键集合，并将其排序为特定顺序，然后迭代键集合，或反向迭代。但是，如果这是您经常执行的操作，那么我怀疑这`NSDictionary`不是解决您的问题的数据结构的最佳选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T17:34:54.167

嗯...问题是 NSDictionary 本质上是无序的。

因此，一个可能的解决方案是用键创建一个 NSArray，用“reverseObjectEnumerator”反转该数组，然后在数组上循环并使用字典上的键。

像这样的东西：

```
NSDictionary *_dict = [NSDictionary dictionaryWithObjectsAndKeys:
                       @"firstValue",@"firstKey",
                       @"secondValue",@"secondKey",
                       @"thirdValue",@"thirdKey",
                       nil];

NSArray *keysNormal   = [_dict allKeys];
NSArray *keysReversed = [[[_dict allKeys] reverseObjectEnumerator] allObjects];

for(NSString *str in keysNormal)
{
    NSLog(@"%@", [_dict objectForKey:str]);
}

for(NSString *str in keysReversed)
{
    NSLog(@"%@", [_dict objectForKey:str]);
} 
```

日志是：

*   第三值
*   秒值
*   第一值
*   第一值
*   秒值
*   第三值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:29:06.220

```
NSArray * a = @[@"a",@"b",@"c"];
NSArray * b = [[a reverseObjectEnumerator] allObjects];
for (NSString * obj in b) {
    NSLog(@"%@",obj);
} 
```

打印 c,b,a。尝试像这样反转字典的键：

```
NSArray * key = [[[dict allKeys] reverseObjectEnumerator] allObjects]; 
```

# algorithm - 如何与 2 或 n 个进程并行遍历图

> ID：13650048
> 
> 赞同：6
> 
> 时间：2012-11-30T17:23:56.690
> 
> 标签：algorithm, graph-algorithm

我正在互联网上搜索，以找到一些可以使用 2 个或 n 个进程并行遍历图的算法，而无需一个进程进入另一个进程先前访问过的节点，这样我就可以加快整个图的总扫描任务，但我什么也找不到。有没有什么算法可以帮助我并行完成这样的任务？这值得么？

注意：n 个进程共享访问和访问节点的相同内存

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:45:51.537

除非大部分时间花在实际遍历上，否则您可以在单个线程上遍历图形，并将每个节点的工作排队，以便从多个进程并行处理。在队列中完成工作后，您可以使用简单的生产者-消费者模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:53:06.283

您可以尝试使用消费者-生产者模型来遍历图形 - 但对纯模型进行了一些修改：

*   以块为单位读取和写入队列，而不是一次一个元素，也`visited`以块为单位更新集合。它将为您节省同步时间 - 这将需要减少频率。
*   当您确实修改队列（并`visited`设置）时 - 您应该做一些额外的工作以确保您不添加自上次检查该集合以来已经访问过的数据。

请注意，使用这种方法 - 您更有可能搜索一些顶点几次 - 但您可以将其与队列和`visited`集合的更新频率绑定。

值得吗？在这些事情上很难说——它取决于很多事情（图结构、大小、队列实现……）。

您应该运行一些测试并尝试微调“更新频率”的参数，并根据经验检查哪个更好。您应该使用[统计工具](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)（[wilcoxon 测试](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)通常是这方面的事实标准）并确定一个是否比另一个更好。

# java - 在大文件中搜索字符串并将其保存在 Java 中的位置

> ID：13650050
> 
> 赞同：2
> 
> 时间：2012-11-30T17:23:57.943
> 
> 标签：java, randomaccessfile

我正在寻找一种方法来解析大文件（大约 5-10Go）并尽可能快地搜索一些循环字符串的位置（以字节为单位）。

我尝试通过执行以下操作来使用 RandomAccessFile 阅读器：

```
RandomAccessFile lecteurFichier = new RandomAccessFile(<MyFile>, "r");
while (currentPointeurPosition < lecteurFichier.length()) {
     char currentFileChar = (char) lecteurFichier.readByte();
     // Test each char for matching my string (by appending chars until I found my string)
     // and keep a trace of all found string's position
} 
```

问题是这段代码太慢了（可能是因为我逐字节读取？）。

我还尝试了下面的解决方案，它在速度方面非常完美，但我无法获得我的字符串的位置。

```
 FileInputStream is = new FileInputStream(fichier.getFile());

    FileChannel f = is.getChannel();

    ByteBuffer buf = ByteBuffer.allocateDirect(64 * 1024);

    Charset charset = Charset.forName("ISO-8859-1");
    CharsetDecoder decoder = charset.newDecoder();

    long len = 0;
    while ((len = f.read(buf)) != -1) {
        buf.flip();

        String data = "";
        try {
            int old_position = buf.position();
            data = decoder.decode(buf).toString();
            // reset buffer's position to its original so it is not altered:
            buf.position(old_position);
        }
        catch (Exception e) {
            e.printStackTrace();
        }

        buf.clear();
    }

    f.close(); 
```

有没有人可以提出更好的解决方案？

提前谢谢你（对不起我的拼写，我是法国人）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:56:22.860

由于您的输入数据以 8 位编码^*进行编码，因此您可以通过对搜索字符串进行编码而不是对文件进行解码来加快搜索速度：

```
byte[] encoded = searchString.getBytes("ISO-8859-1");

BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file));
int b;
long pos = -1;
while ((b = bis.read()) != -1) {
    pos++;
    if (encoded[0] == b) {
       // see if rest of string matches
    }
} 
```

A`BufferedInputStream`应该很快。使用 ByteBuffer 可能会更快，但这会使搜索逻辑更加复杂，因为字符串匹配的可能性比跨越缓冲区边界的可能性高。

然后有各种巧妙的方法来优化可以适应这种情况的字符串搜索......您正在搜索字节/字符流而不是字节/字符数组。[字符串搜索](http://en.wikipedia.org/wiki/String_searching_algorithm)的 Wikipedia 页面是一个很好的起点。

请注意，由于我们以字节方式读取和匹配，因此位置只是读取（或跳过）的字节数，因此无需使用随机访问文件。

* * *

^(* 事实上，这个技巧也适用于许多多字节编码。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:38:16.337

在“干草堆”中搜索“针”是一个经过充分研究的问题 - 这是 StackOverflow 本身的相关[链接](https://stackoverflow.com/questions/3183582/what-is-the-fastest-substring-search-algorithm)。我确信所讨论的算法的 java 实现也应该可用。为什么不尝试其中一些，看看它们是否适合这份工作？

# actionscript-3 - ActionScript 中有没有一种方法可以在事件发生后_not_ 强制立即更新舞台？

> ID：13650052
> 
> 赞同：0
> 
> 时间：2012-11-30T17:24:01.493
> 
> 标签：actionscript-3

我知道 MouseEvent.updateAfterEvent() 或 KeyboardEvent.updateAfterEvent() 方法，它将在事件处理后强制重新渲染舞台，而不是等待下一帧。

但是，我需要一种方法来在我调用它的那一刻强制立即渲染。有没有这样的方法？

实际上我的问题来自于 ActionScript 的打印 API (PrintJob) 的痴呆设计。与整个 ActionScript 体系结构不一致的是，当您调用 PrintJob.start() 时，在显示打印对话框时一切都完全冻结，直到用户单击打印或取消按钮。在 PrintJob.start() 调用之后的任何代码的执行在此之后恢复。

在这个巨大的设计缺陷带来的许多其他更糟糕的问题中，有我的：

```
public function someMouseOrKeyboardEventHandler() {
  somethingThatUpdatesTheDisplayList();
  var somePrintJob=new PrintJob();
  somePrintJob.start();
  //...
  somePrintJob.send();
} 
```

当我的这个处理程序被调用时，对显示列表所做的更改将在打印对话框关闭之前不可见，因此我无法在打开打印对话框之前在屏幕上显示某些内容。

updateAfterEvent() 无济于事（已经尝试过）。它不会改变任何事情，因为它只在事件处理程序代码执行后强制渲染。

有没有类似 updateRightNow() 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:46:07.793

不，很遗憾，您不能在代码中间强制更新。

但是，您可以等到下一帧调用`start()`PrintJob；这将使 Flash 有时间在一切冻结之前更新舞台。

# javascript - 如何使按钮在单击后保持“活动”？

> ID：13650053
> 
> 赞同：9
> 
> 时间：2012-11-30T17:24:04.127
> 
> 标签：javascript, html, css, button

我目前正在为我的菜单项使用以下代码：

HTML

```
<li>
<a id="About" class="button" href="About Us.cshtml">About Us</a>
</li>
<li style="margin-left: 30px;">
<a id="Services" class="button" href="Services.cshtml">Services</a>
</li>
<li style="margin-left: 30px;">
<a id="Contact" class="button" href="Contact Us.cshtml">Contact Us</a>
</li> 
```

CSS

```
#About {background-image: url(../Buttons/About.png); width: 87px;}
#Services {background-image: url(../Buttons/Services.png); width: 112px;}
#Contact {background-image: url(../Buttons/Contact.png); width: 117px;}
a.button {height: 20px; display: inline-block; background-repeat: no-repeat}
a.button:hover {background-position: 0 -20px;}
a.button:active {background-position: 0 -40px;} 
```

在单击按钮并且页面加载/刷新等后，我需要让按钮保持在“活动”状态。

如果解决方案需要 javascript，请记住，我是一名业余爱好者，所以我需要用外行的术语进行任何解释（最好带有示例）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:37:13.887

最好只坚持使用带有一些 JS 的 CSS 类。这样，您可以混合使用伪类 (:hover) 和 CSS 类的两种样式。

```
$('.myButtonLink').click(function() {
  $(this).addClass('active_class');
}); 
```

或者，如果您想切换它。

```
$('.myButtonLink').click(function() {
  $(this).toggleClass('active_class');
}); 
```

这样，如果您的布局有任何变化，您只需更新属于该类的 CSS 样式，而不必更新您的 JavaScript 代码。

您可以使用 window 或 localStorage 元素来保持跨页面刷新的阶段。

```
var key = getStorageKeyFromLink(link);
window.activeStateLookup = window.activeStateLookup || {};
window.activeStateLookup[key] = {
  element : link
}; 
```

现在，当您的页面加载时，您可以更新所有图像：

```
window.onload = function() {
  var lookup = window.activeStateLookup || {};
  for(var key in lookup) {
    var element = lookup[key].element;
    element.addClass('active_class');
  }
} 
```

- - 编辑 - -

这是您的演示。

该示例使用 localStorage，但它与 window 对象的工作方式相同。请务必复制并粘贴代码并在您的本地机器上试用，因为 jsfiddle 有一些阻止正在发生的事情。

[http://jsfiddle.net/GDXLb/7/](http://jsfiddle.net/GDXLb/7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T17:49:35.417

您需要确定您当前所在的页面。

```
var page = window.location.href;
page = page.substr((page.lastIndexOf('/') + 1));
page = page.split('.');
page = page[0];
//At this point you will have the current page only with no extension or query paramaters
//I.E. "About Us"
page = page.toUpperCase();
//This accounts for upper or lower casing of urls by browsers.
switch(page) {
    case "ABOUT US":
        $('#About').addClass('< name of active button class >');
        break;
    case "SERVICES":
        $('#Services').addClass('< name of active button class >');
        break;
    case "CONTACT US":
        $('#Contact').addClass('< name of active button class >');
        break;
} 
```

如果您不使用 jQuery，请替换此行：

```
$('#< element name >').addClass('< name of active button class >'); 
```

用这条线：

```
document.getElementById("< element name >").className += " < name of active button class >"; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:47:25.217

您可以使用一点`jquery`来查看它是什么`url`，解析它，然后将类重新应用`active`到适当的链接。

IE（我没有测试过这个......这更像是一个想法......）

```
var path = window.location.pathname;

$(a).each(function(){
    if (path.indexOf($(this).prop("href")) > 0){
        $(this).child("button").addClass("active");
        break;
    }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-30T17:28:41.277

```
$('.myButtonLink').click(function() {
 $(this).css('background-position', '0 0');
}); 
```

[**演示**](http://jsfiddle.net/bnaegele/XHBZf/2/)

# python - 使用 openpyxl 将边框应用于范围内的所有单元格

> ID：13650059
> 
> 赞同：8
> 
> 时间：2012-11-30T17:24:34.650
> 
> 标签：python, excel, openpyxl

我有一个脚本，它采用 pandas 数据框并将其分成几百块并将每个块保存为单独的 excel 文件。每个块将具有相同的列数，但行数会有所不同。我已经想出了如何使用 openpyxl 将所有其他必要的格式应用于这些文件，但我还没有确定应用边框的最快方法。另外，我认为我只是没有正确应用边框，因为下面的代码（我怀疑它不需要单独遍历每个单元格）没有应用任何边框。

```
from openpyxl.style import Border

wb = load_workbook(filename = _fname)
ws = wb.worksheets[0]  
for _row in ws.range('A1:L'+str(ws.get_highest_row() ) ):
    for _cell in _row:
            _cell.style.borders.left.border_style = Border.BORDER_THIN
            _cell.style.borders.right.border_style = Border.BORDER_THIN
            _cell.style.borders.top.border_style = Border.BORDER_THIN
            _cell.style.borders.bottom.border_style = Border.BORDER_THIN
wb.save(_fname) 
```

所以这段代码*有效*，但它没有应用我期望的边框（excel中的默认边框），而且它比我想要的要多得多。我的期望是我应该能够做这样的事情：

```
from openpyxl.style import Border

wb = load_workbook(filename = _fname)
ws = wb.worksheets[0]

_range = ws.some_range_func('A1:L'+str(ws.get_highest_row() ) ):
    _range.style.borders.all_borders = Borders.BORDER_THIN 
```

这个功能存在吗？如果没有，有人可以请至少解释一下如何应用默认边框样式而不是这个稍微厚一点的边框吗？Border.BORDER_THICK、Border.BORDER_MEDIUM、Border.BORDER_THIN 或 Border.BORDER_HAIR 似乎都不正确。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-08T09:23:40.273

可能这很方便：

```
from openpyxl.reader.excel import load_workbook
from openpyxl.style import Border

def set_border(ws, cell_range):
    rows = was[cell_range]
    for row in rows:
        row[0].style.borders.left.border_style = Border.BORDER_THIN
        row[-1].style.borders.right.border_style = Border.BORDER_THIN
    for c in rows[0]:
        c.style.borders.top.border_style = Border.BORDER_THIN
    for c in rows[-1]:
        c.style.borders.bottom.border_style = Border.BORDER_THIN

#usage example:
ws = load_workbook('example.xlsx').get_active_sheet()
set_broder(ws, "C3:H10") 
```

它执行得相当快。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-11-25T01:40:02.620

对于 openpyxl==3.0.5，以更 Python 的方式：

```
from openpyxl.styles import Border, Side

def set_border(ws, cell_range):
    thin = Side(border_style="thin", color="000000")
    for row in ws[cell_range]:
        for cell in row:
            cell.border = Border(top=thin, left=thin, right=thin, bottom=thin)

set_border(worksheet, 'A5:C10') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-07-30T08:51:13.217

@Karimov 对回答进行了轻微修改
以下是您的代码应该如何

```
from openpyxl.styles import Border, Side, Font, Alignment 
```

```
def __format_ws__(self, ws, cell_range):
     border = Border(left=Side(border_style='thin', color='000000'),
                    right=Side(border_style='thin', color='000000'),
                    top=Side(border_style='thin', color='000000'),
                    bottom=Side(border_style='thin', color='000000'))

      rows = ws[cell_range]
      for row in rows:
          for cell in row:
              cell.border = border 
```

下面是使用列表推导的一种更快的方法：

```
 def __format_ws__(self, ws, cell_range):

        #applying border and alignment
        font = Font(size=9)
        align=Alignment(horizontal='left', vertical='center')
        border = Border(left=Side(border_style='thin', color='000000'),
                        right=Side(border_style='thin', color='000000'),
                        top=Side(border_style='thin', color='000000'),
                        bottom=Side(border_style='thin', color='000000'))

        rows = [rows for rows in ws[cell_range]]
        flattened = [item for sublist in rows for item in sublist]
        [(setattr(cell,'border',border), setattr(cell,'font',font), setattr(cell,'alignment',align)) for cell in flattened] 
```

你使用它的方式是：

```
self.__format_ws__(ws=writer.book.worksheets[0], cell_range='A1:G10') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-30T06:08:24.103

适用于 openpyxl 2.3.5 的决定

```
from openpyxl.styles import Border, Side

def set_border(ws, cell_range):
    border = Border(left=Side(border_style='thin', color='000000'),
                right=Side(border_style='thin', color='000000'),
                top=Side(border_style='thin', color='000000'),
                bottom=Side(border_style='thin', color='000000'))

    rows = ws.iter_rows(cell_range)
    for row in rows:
        for cell in row:
            cell.border = border

set_border(worksheet, 'A5:C10') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-13T15:58:11.663

@user698585 您的方法看起来不错，但由于当前版本的 openpyxl 更改了实现，因此它不再起作用。所以这应该更新为例如

```
 ws.cell(row=1, column=1).style.border.top.border_style = borders.BORDER_MEDIUM 
```

但它会导致错误，即不允许更改样式。作为一种解决方法，我刚刚定义了一个专用样式，但它们只是当前样式加上边框定义的重复 - 只有当您知道更改下的单元格是什么样式时才有效的解决方案。

```
 border_style = Style(font=Font(name='Console', size=10, bold=False,
                         color=Color(openpyxl.styles.colors.BLACK)),
                         fill=PatternFill(patternType='solid', fgColor=Color(rgb='00C5D9F1')),
                         border=Border(bottom=Side(border_style='medium', color=Color(rgb='FF000000')))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T18:36:58.710

如果您需要 pandas excel 数据框的样式（边框...），我的 fork 刚刚合并到 master [https://github.com/pydata/pandas/pull/2370#issuecomment-10898427](https://github.com/pydata/pandas/pull/2370#issuecomment-10898427)

至于你的边界问题。一次设置所有边框并不能在 openpyxl 中工作。

```
In [34]: c.style.borders.all_borders.border_style = openpyxl.style.Border.BORDER_THIN

In [36]: c.style
'Calibri':11:False:False:False:False:'none':False:'FF000000':'none':0:'FFFFFFFF':'FF000000':'none':'FF000000':'none':'FF000000':'none':'FF000000':'none':'FF000000':'none':'FF000000':0:'thin':'FF000000':'none':'FF000000':'none':'FF000000':'none':'FF000000':'none':'FF000000':'general':'bottom':0:False:False:0:'General':0:'inherit':'inherit' 
```

单独设置有效（'瘦'：'FF000000'）

```
In [37]: c.style.borders.top.border_style = openpyxl.style.Border.BORDER_THIN

In [38]: c.style
Out[38]: 'Calibri':11:False:False:False:False:'none':False:'FF000000':'none':0:'FFFFFFFF':'FF000000':'none':'FF000000':'none':'FF000000':'thin':'FF000000':'none':'FF000000':'none':'FF000000':0:'thin':'FF000000':'none':'FF000000':'none':'FF000000':'none':'FF000000':'none':'FF000000':'general':'bottom':0:False:False:0:'General':0:'inherit':'inherit' 
```

可能是 openpyxl 中的错误。但没什么大不了的，只需在功能中设置底部、顶部、左侧、右侧

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-28T12:00:38.263

```
def set_border(ws, cell_range, style='thin'):
rows = ws[cell_range]
for row in rows:
    temp_row = copy(row[0].border)
    row[0].border = Border(left=Side(style=style), right=temp_row.right, top=temp_row.top, bottom=temp_row.bottom)

    temp_row = copy(row[-1].border)
    row[-1].border = Border(right=Side(style=style), left=temp_row.left, top=temp_row.top, bottom=temp_row.bottom)
for c in rows[0]:
    temp_row = copy(c.border)
    c.border = Border(top=Side(style=style), left=temp_row.left, bottom=temp_row.bottom, right=temp_row.right)
for c in rows[-1]:
    temp_row = copy(c.border)
    c.border = Border(bottom=Side(style=style), left=temp_row.left, top=temp_row.top, right=temp_row.right) 
```

这样可以保留侧面的现有边框，您还可以设置边框样式

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-07T13:26:02.260

有同样的问题，但由于折旧找不到任何解决 2019 年此问题的方法。我有一些可以在下面工作的东西..可能会更好，但适用于所有意图和目的。

```
def set_border(ws, cell_range):
    rows = ws[cell_range]
    for row in rows:
        if row == rows[0][0] or row == rows[0][-1] or row == rows[-1][0] or row == rows[-1][-1]:
            pass
        else:
            row[0].border = Border(left=Side(style='thin'))
            row[-1].border = Border(right=Side(style='thin'))
        for c in rows[0]:
            c.border = Border(top=Side(style='thin'))
        for c in rows[-1]:
            c.border = Border(bottom=Side(style='thin'))
    rows[0][0].border = Border(left=Side(style='thin'), top=Side(style='thin'))
    rows[0][-1].border = Border(right=Side(style='thin'), top=Side(style='thin'))
    rows[-1][0].border = Border(left=Side(style='thin'), bottom=Side(style='thin'))
    rows[-1][-1].border = Border(right=Side(style='thin'), bottom=Side(style='thin')) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-09-26T03:10:46.033

似乎这个任务没有内置的，我们必须自己做一些步骤，比如：

```
#need make conversion from alphabet to number due to range function
def A2N(s,e):
    return range(ord(s), ord(e)+1)
#B1 is the border you defined
#Assume you trying border A1-Q1 ... A3-Q3
X = A2N('A','Q')
#print X    
your_desired_sheet_range_rows = range(1,4)
#need two loop to go through cells
for row in your_desired_sheet_rows:
    for col in X:
        ca = chr(col)
        sheet[ca+str(row)].border=B1 
```

# django - Django/Celery 中的定期任务 - 如何在屏幕上通知用户？

> ID：13650060
> 
> 赞同：7
> 
> 时间：2012-11-30T17:24:35.537
> 
> 标签：django, celery, django-celery

我现在已成功设置 Django-celery 来检查我现有的任务，以便在任务到期时通过电子邮件提醒用户：

```
@periodic_task(run_every=datetime.timedelta(minutes=1))  
def check_for_tasks():      
    tasks = mdls.Task.objects.all()
    now = datetime.datetime.utcnow().replace(tzinfo=utc,second=00, microsecond=00)
    for task in tasks:
        if task.reminder_date_time == now:
            sendmail(...) 
```

到目前为止一切都很好，但是如果我还想向用户显示一个弹出窗口作为提醒呢？

Twitter bootstrap 允许创建弹出窗口并从 javascript 显示它们：

```
$(this).modal('show'); 
```

问题是，芹菜工人守护进程如何在用户的浏览器上运行这个 javascript？也许我走错了路，这根本不可能。因此问题仍然存在，可以使用芹菜上的 cronjob 在浏览器上实现 ui 通知吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T17:50:49.233

好吧，您不能使用[Django 消息框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)，因为任务无法访问用户的请求，并且您也不能将请求对象传递给工作人员，因为它们是不可挑选的。

但是你绝对可以使用[django-notifications 之](https://github.com/brantyoung/django-notifications)类的东西。您可以在任务中创建通知并将它们附加到相关用户。然后，您可以从视图中检索这些消息，并根据自己的喜好在模板中处理它们。用户将在他们的下一个请求中看到通知（或者您可以使用 AJAX 轮询进行实时通知或[使用 HTML5 websockets](http://dev.w3.org/html5/websockets/)进行实时通知 [参见[django-websocket](http://pypi.python.org/pypi/django-websocket) ]）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T17:51:45.603

是的，这是可能的，但这并不容易。执行/模拟服务器到客户端通信的方法：

**轮询** 最简单的方法是从 javascript 轮询服务器。您的 celery 任务可以在数据库中创建行，这些行可以通过 url 获取，例如`/updates`检查新更新，将行标记为已读并返回它们。

**长轮询** 通常称为*彗星*。客户端向服务器发出请求，直到服务器决定返回某些东西。例如，参见[django-comet](https://github.com/ziyan/django-comet)。

**websocket** 要启用真正的服务器到客户端通信，您需要从客户端到服务器的开放连接。[django-socketio](https://github.com/stephenmcd/django-socketio)和[django-websocket](http://pypi.python.org/pypi/django-websocket)是使这成为可能的可重用应用程序的示例。

根据您的问题的上下文，我的建议是：要么做一些基本的民意调查，要么坚持使用电子邮件。

# android - 相对布局：按钮将其他按钮推离屏幕

> ID：13650062
> 
> 赞同：2
> 
> 时间：2012-11-30T17:24:41.063
> 
> 标签：android, android-layout, button, android-relativelayout

我试图让三个按钮彼此相邻，左一个和右一个是小按钮，中间一个应该填满其余的宽度 - 2x2dp（=margin）。
我编写了以下代码，但它一直将我的右键从屏幕上推开，关于如何解决这个问题的任何想法？可能有一种方法可以授予左侧和右侧的特权？

```
<RelativeLayout
            android:id="@+id/rl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="10dp" >

            <Button
                android:id="@+id/bPreviousQuestion"
                android:layout_width="42dp"
                android:layout_height="42dp"
                android:background="#c8c8c8"
                android:text="&lt;"
                android:textColor="#ffffff"
                android:textSize="20dp"
                />

            <Button
                android:id="@+id/bBack"
                android:layout_width="fill_parent"
                android:layout_height="42dp"
                android:layout_toRightOf="@+id/bPreviousQuestion"
                android:background="#c8c8c8"
                android:text="Go Back"
                android:textColor="#ffffff"
                android:textSize="20dp"
                android:layout_marginLeft="2dp"
                android:layout_marginRight="2dp"  />

            <Button
                android:id="@+id/bNextQuestion"
                android:layout_width="42dp"
                android:layout_height="42dp"
                android:layout_toRightOf="@+id/bBack"
                android:background="#c8c8c8"
                android:text="&gt;"
                android:textColor="#ffffff"
                android:textSize="20dp" />
        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:30:14.770

尝试添加：

```
android:layout_toLeftOf="@+id/bNextQuestion" 
```

到您的“返回”按钮。在“下一步”中删除这一行：

 ~~~~```
android:layout_toRightOf="@+id/bBack" 
```~~ 

~~并添加：~~

 ~~```
android:layout_alignParentRight="true" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:29:08.327

试试这个：

将 {Previous} 设置为左​​对齐父级，宽度为 42dp。

将 {Next} 设置为以 42dp 宽度对齐父级。

将 {Back} 设置为 Prev 的右侧，Next 的左侧，宽度为 fill_parent。

如果我正确理解布局，这*应该用后退按钮填充按钮。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:29:48.393

使用`LinearLayout`而不是`RelativeLayout`

```
<LinearLayout
    android:id="@+id/rl"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="10dp"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/bPreviousQuestion"
        android:layout_width="42dp"
        android:layout_height="42dp"
        android:background="#c8c8c8"
        android:text="&lt;"
        android:textColor="#ffffff"
        android:textSize="20dp" />

    <Button
        android:id="@+id/bBack"
        android:layout_width="fill_parent"
        android:layout_height="42dp"
        android:layout_marginLeft="2dp"
        android:layout_marginRight="2dp"
        android:layout_weight="1"
        android:background="#c8c8c8"
        android:text="Go Back"
        android:textColor="#ffffff"
        android:textSize="20dp" />

    <Button
        android:id="@+id/bNextQuestion"
        android:layout_width="42dp"
        android:layout_height="42dp"
        android:background="#c8c8c8"
        android:text=">"
        android:textColor="#ffffff"
        android:textSize="20dp" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:28:27.267

你的第二个按钮的 layout_width 是“fill_parent”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T17:29:25.763

对于您的第二个按钮，即中间按钮，您正在使用 android:layout_width="fill_parent"。而不是使用 android:layout_width="42dp"，然后你会看到你的第三个~~~~

# excel - SUM 划分两个单元格的结果（SUMPRODUCT 而是划分）

> ID：13650069
> 
> 赞同：16
> 
> 时间：2012-11-30T17:25:12.730
> 
> 标签：excel, sum, excel-formula

我正在寻找`SUMPRODUCT`与除法相同的方法。有没有办法通过划分两个数组来添加结果？

示例：A 列的资产“寿命”以年为单位`(10, 20, 10)`。B 列具有资产的价值`(10,000, 20,000, 20,000)`。我想添加 的结果`(10,000/10) + (20,000/20) + (20,000/10) = 4,000`，但是当我添加具有生命和价值的行时，公式是动态的。

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T17:30:59.717

由于除法是乘法的倒数，因此您可以使用：

=SUMPRODUCT(1/A1:A3, B1:B3)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T17:34:53.597

你可以用这个公式做到这一点

`=SUMPRODUCT(B2:B10/A2:A10)`

A 列范围内不允许有空格或零...

编辑：错过动态部分....要么使用动态命名范围....或者您可以使用此数组版本来允许最多 1000 行，其中后面的为空白

`=SUM(IF(A2:A1000<>0,B2:B1000/A2:A1000))`

确认`CTRL+SHIFT+ENTER`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-13T06:57:45.663

实际上最好的公式是这个：

```
=SUMPRODUCT(SUM(E2:E10))/(SUM(D2:10)) 
```

您还可以将公式与另一个公式结合起来，如下所示：

```
=SUMPRODUCT(SUM(E2:10))/(count(D2:D10)) 
```

祝你好运

# video - 来自youtube的JPlayer视频

> ID：13650071
> 
> 赞同：-3
> 
> 时间：2012-11-30T17:25:26.420
> 
> 标签：video, youtube, jplayer

我想在 JPlayer 中播放来自 youtube 的视频，但我不知道该怎么做。

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-30T16:25:49.697

我也找不到答案，所以我不得不编写自己的集成。

这是一个[工作演示](https://codepen.io/renandecarlo/pen/yJqpPW)和[更好的解释](https://github.com/happyworm/jPlayer/issues/181#issuecomment-236373753)，以防将来有人需要它。

像这样使用它：

```
/* Load your playlist like this: ... */
[
    {
        title:"Finding Nemo Teaser",
        m4v: "http://www.jplayer.org/video/m4v/Finding_Nemo_Teaser.m4v",
    },

    /* YOUTUBE PART */
    {
        type: "youtube",
        title: "Finding Dory Trailer",
        m4v:"https://www.youtube.com/watch?v=cfLob5IYMp8",
    }
] 
```

和

```
/* Put this somewhere ... */

$(function() {  
    /* Youtube Integration Setup */
    var setupYoutube = function(whereDivTo, width, height) {
        $("<div>").attr("id", "ytplayer").appendTo(whereDivTo);

        onYouTubeIframeAPIReady = function() {
            youtubeApi = new YT.Player("ytplayer", {
                width: width,
                height: height,
                videoId: "cfLob5IYMp8",
                playerVars: {
                    "autoplay": 1,
                    "color": "white",
                    "modestbranding": 1,
                    "rel": 0,
                    "showinfo": 0,
                    "theme": "light"
                },
                events: {
                    "onReady": function() {
                        $(document).trigger("ready.Youtube");
                    },
                    "onStateChange": "youtubeStateChange"
                }
            });
        }

        $.getScript("//www.youtube.com/player_api");
    },
    loadYoutubeListeners = function(player, jplayer, id) {
        var container = $(player.options.cssSelector.gui, player.options.cssSelectorAncestor);

        youtubeStateChange = function(ytEvent) {
            switch(ytEvent.data) {
                case -1:
                    $(ytEvent.target.getIframe()).show();
                    $(jplayer).find('video').hide();
                    container.css({ 'opacity' : 0, 'z-index': -1, 'position' : 'relative' });
                    container.find('.jp-interface').slideUp("slow");
                break;

                case YT.PlayerState.ENDED:
                    $(jplayer).trigger($.jPlayer.event.ended);
                break;

                case YT.PlayerState.CUED:
                    $(jplayer).find('video').show();
                    $(ytEvent.target.getIframe()).hide();
                    container.css({ 'opacity' : 1, 'z-index': 0 });
                    container.find('.jp-interface').slideDown("slow");

            }
        };

        youtubeApi.loadVideoById(id);
    }

    $(document).on($.jPlayer.event.setmedia, function(jpEvent) {
        var player = jpEvent.jPlayer,
            url = player.status.src;

        if(!player.html.video.available) return;
        if(typeof player.status.media.type === "undefined" || player.status.media.type != 'youtube') {
            if(window['youtubeApi'])
                if(youtubeApi.getPlayerState() != YT.PlayerState.CUED && youtubeApi.getPlayerState() != YT.PlayerState.ENDED)
                    return youtubeApi.stopVideo();

            return;
        }

        var youtubeId = url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/)[1]

        if(window['youtubeApi'])
            loadYoutubeListeners(player, jpEvent.target, youtubeId);
        else {
            setupYoutube(jpEvent.target, player.status.width, player.status.height);

            $(document).on("ready.Youtube", function() {
                loadYoutubeListeners(player, jpEvent.target, youtubeId);
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T17:36:12.230

抱歉，您必须从 Youtube 下载视频并将其放在 Jplayer 所在的位置，然后进行配置

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T17:41:44.807

您必须执行一个脚本，从 youtube 服务器中找到视频文件的链接，然后他们添加此链接以在 Jplayer 上播放此视频

# full-text-search - 使用 SAS 从文本中提取日期和时间

> ID：13650076
> 
> 赞同：2
> 
> 时间：2012-11-30T17:25:42.353
> 
> 标签：full-text-search, text-files, sas

我有类似的东西，它是 .txt 格式的。

> '随机标题'
> 
> 随机的事情，00:00 AM，1 月 1 日
> 
> 2005 年，555 字，（英文）
> 
> '随机长标题'
> 
> 随机的事情，00:00 AM，2005 年 1 月 1 日，111 字，
> 
> （英语）

时间和日期需要以 yyyymmdd 和 hhmm 格式提取。我尝试使用逗号作为分隔符。

```
DATA News;
  INFILE 'C:xxxx/xxxx/xxxx' DLM',';
  INPUT Title $75\. Time $10\. Date $20\. Words $15\. Lang $10.;
PROC PRINT DATA=News;
  TITLE 'Time and Date';
  VAR Time Date;
RUN; 
```

但它失败了，这些条目包含多行并且格式也不正确。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:18:30.070

如果您的日期总是这样格式化：00:00 AM，2005 年 1 月 1 日

然后您可以使用 perl 正则表达式来查找它们。

```
data test;
input @;
_prx = prxparse('/\d\d:\d\d (?:AM|PM), \d{1,2} (?:January|February|March) \d{4}/');
start = 1;
stop = length(_infile_);
call prxnext(_prx, start, stop, _infile_, position, length);
   do while (position > 0);
      found = substr(_infile_, position, length);
      put found= position= length=;
      call prxnext(_prx, start, stop, _infile_, position, length);
   end;
datalines;
'random title'
random things , 00:00 AM, 1 January
2005, 555 words, (English)
'random long title'
random things , 00:00 AM, 1 January 2005, 111 words,
(English)
;;;;
run; 
```

然后像通常使用 SAS 字符变量一样使用 FOUND 值来获取日期和时间或日期时间信息。显然，将我的简短月份列表扩展为包含所有十二个月。

这找到了第二个示例，但不是第一个（在示例中使用数据线无法合理找到）；但是，如果您不使用数据线，而是使用文本文件，则可以操纵记录格式以删除换行和回车，从而将两者视为单个记录（因此匹配）。查看`RECFM=N`更多详细信息。

# jquery - 谷歌分析和 pinterest 事件跟踪

> ID：13650085
> 
> 赞同：3
> 
> 时间：2012-11-30T17:25:58.603
> 
> 标签：jquery, google-analytics, pinterest

我想就截至今天（2012 年 11 月 30 日）跟踪 pining 事件的最佳方式获得一些意见。据我了解，pinterest 正在开发一个 api，它有望具有真正的回调方法，如 fb 或 twitter，因为它的按钮与谷歌分析相关联。但截至目前，我们必须尽我们所能解决问题。

目前我将我的 pinterest 链接包装在一个 div 中，所以在 pinit.js 完成它并创建实际按钮之后，html 看起来像这样：

```
<div class="pin">
<a href="http://pinterest.com/pin/create/button/?url=mySite.com/path/to/content&description=yeah&media=yougetthepoint">
    <span class="PIN_1354295239838_hidden" id="PIN_1354295239838_pin_count_0"></span>
</a>                                        
</div> 
```

我的想法是使用 jQuery 在 pin 上添加跟踪事件，`div`就像这样

```
$(document).ready(function() {
    $('div.pin').click(function() {
        _gaq.push(['_trackEvent', 'Pinterest Pins', 'Article Pin', $(location).attr('href')]);
    });
}); 
```

我知道它不是 100% 知道用户实际上经历了固定过程，但我不确定除了等待更好的 api 还能做什么？

现在这听起来像是在 ga 中进行一些事件跟踪的好方法吗？或者有人对更好的解决方案有一些建议或提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T14:24:11.333

在这里回答我自己的问题。我继续并实现了这个 jQuery 函数：

```
$(document).ready(function() {
    $('div.pin').click(function() {
        _gaq.push(['_trackSocial', 'Pinterest', 'Article Pin', $(location).attr('href')]);
    });
}); 
```

它会找到`div`包含 pin 按钮的那个。每当它被点击时，它都会推送一个`_trackSocial`事件。它似乎正在工作。我也对固定的单个图像做同样的事情：

```
$('div.pinIt').click(function() {
    var imageURL = $(this).closest('div.showPin').find('img.lazy').attr('data-lazy-src'); 
    _gaq.push(['_trackSocial', 'Pinterest', 'Image Pin', imageURL]);
}); 
```

# php - Basecamp API 经典 - 按姓名排序人员（按字母顺序）

> ID：13650086
> 
> 赞同：0
> 
> 时间：2012-11-30T17:26:00.667
> 
> 标签：php, api, alphabetical, basecamp

我正在通过 Basecamp API 经典检索人员列表，但它似乎是按 ID 排序的。我按照文档这样做，这是回显部分的简化版本：

```
foreach($persons as $person) {
    $firstName = $person->getFirstname();
    $lastName = $person->getLastname();

    echo $firstName.' '.$lastName;
} 
```

知道如何按字母顺序排列此列表吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:46:24.160

您可以`sort()`在 $persons 上使用该功能

[http://uk.php.net/manual/en/function.sort.php](http://uk.php.net/manual/en/function.sort.php)

编辑：哦，等等，你能展示一个`print_r()`$persons 吗？

# c# - 无法打开共享内存区域错误

> ID：13650092
> 
> 赞同：1
> 
> 时间：2012-11-30T17:26:14.553
> 
> 标签：c#, linq-to-sql, sql-server-ce

我有一个用户在使用我的应用程序时报告此错误。

该应用程序是在 Windows XP Embedded 上运行的 .NET Winforms 应用程序，使用 SQL Server CE 3.5 sp1 和 Linq-To-SQL 作为 ORM。数据库本身位于我的应用程序在文件夹中创建的子目录中`My Documents`。用户帐户是系统上的管理员帐户。没有其他应用程序或进程连接到数据库。

在大多数情况下，该应用程序似乎运行良好。它启动，可以从数据库加载数据和将数据保存到数据库。用户每天可能使用该应用程序访问数据库数百次。他们收到此错误，但只是间歇性的。可能一天3-4次。

在代码本身中，对数据库的所有调用都使用包装在`using`子句中的 Linq-To-SQL 数据上下文。换句话说：

```
using(MyDataContext db = new MyDataContext(ConnectionString))
{
     List<blah> someList = db.SomeTable.Where(//selection criteria).ToList();

     return(someList);
} 
```

这就是几乎所有对数据库的调用的样子（除了那些保存数据的调用显然没有选择和返回任何东西）。正如我之前提到的，他们 99% 的时间都没有问题，但每天只会出现几次共享内存错误。

我当前的“修复”是在应用程序启动时，我只是从数据库中读取所有数据（没有很多）并将其缓存在内存中，并将我的数据库调用转换为从内存列表中读取。到目前为止，这似乎已经解决了这个问题。一天半以来，他们没有报告任何问题。但这仍然困扰着我，因为我不知道首先会导致错误的原因。

虽然应用程序每天访问数据库数百次，但通常不会快速连续。通常至少每隔几分钟一次。但是，在一个用例中，可能有两个呼叫一个接一个，尽可能快。换句话说，类似：

```
//user makes a selectio n on the screen
DatabaseCall1();
DatabaseCall2(); 
```

两者都将遵循上面代码块中的模式，它们创建一个新的上下文，工作，然后返回。但是这些调用不是异步的，所以我希望在调用 DatabaseCall2 之前关闭并处理掉连接。但是，可能是 SQL Server CE 端的某些东西没有足够快地关闭连接吗？它可以解释为什么它是间歇性的，因为也许大多数时候它没有问题？我还应该提到，这个没有修复的确切程序安装在其他几个具有完全相同硬件和软件的系统上（它们是彼此的克隆），并且其他系统的用户没有报告任何错误。

我一直摸不着头脑，因为我无法在我的开发机器或测试机器上重现此错误，并且此处和其他地方有关此异常的问题的答案通常围绕用户权限不足或共享网络文件夹上的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:46:24.007

看看这个之前的帖子，我想你会找到你的答案：-

[SQL Server CE - 内部错误：无法打开共享内存区域](https://stackoverflow.com/questions/2571847/sql-server-ce-internal-error-cannot-open-the-shared-memory-region)

# mysql - 复杂的mysql选择查询

> ID：13650094
> 
> 赞同：1
> 
> 时间：2012-11-30T17:26:24.080
> 
> 标签：mysql

数据：

1.  表格**形状**：shape_id、shape_name
2.  表**shape_forms**：shape_form_id、shape_id、shape_form
3.  shape_form 可以是：0 - **circle** , 1 - **square** , 2 - **triangle** - 每个形状的数量是无限的

我需要 2 个查询来选择

1.  shape_forms 中包含**圆形和三角形**或**仅圆形**但不包含正方形或仅三角形的所有形状
2.  所有在 shape_forms 中只包含三角形的形状

请给我一些解决此任务的提示！我被限制不要对 shape_forms 使用“分组依据”，但如果没有适当的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:32:02.043

1.

```
select s.shape_id
from shapes s
inner join shape_forms sf on sf.shape_id = s.shape_id
group by s.shape_id
having 
(
   sum(shape_form = 1) = 0
   and sum(shape_form in (0,2)) >= 2
)
or sum(shape_form <> 0) = 0 
```

2.

```
select s.shape_id
from shapes s
inner join shape_forms sf on sf.shape_id = s.shape_id
group by s.shape_id
having sum(shape_form <> 2) = 0 
```

# java - RGB像素阵列只有一维而不是向量中的3

> ID：13650095
> 
> 赞同：2
> 
> 时间：2012-11-30T17:26:26.510
> 
> 标签：java, android, rgb

你好。我想要这种格式的 rgb 值：在一维向量中，我想要第一个 R 值，然后是 G 值，然后是 B 值。我尝试使用此代码：

```
pixels = new int[bitmap.getHeight() * bitmap.getWidth()];
        bitmap.getPixels(pixels, 0, bitmap.getWidth(), 0, 0,
                bitmap.getWidth(), bitmap.getHeight());
        // int R, G, B,Y;
        for (int y = 0; y < bitmap.getHeight(); y++) {
            for (int x = 0; x < bitmap.getWidth(); x++) {
                int index = y * bitmap.getHeight() + x;
                int R = (pixels[index] >> 16) & 0xff; // bitwise shifting
                int G = (pixels[index] >> 8) & 0xff;
                int B = pixels[index] & 0xff;

                // R,G.B - Red, Green, Blue
                // to restore the values after RGB modification, use
                // next statement
                pixels[index] = 0xff000000 | (R << 16) | (G << 8) | B;
            }
        }

        bitmap.recycle();
    } catch (NullPointerException exception) {
        Log.e("Error Utils",
                "Photo is damaged or does not support this format!");
    }
    return pixels; 
```

但是，我仍然只有一个 300*200 的一维数组。不是 300*200*3 一维数组！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:05:47.933

也许这就是你试图做的

```
public static int[] getPixel(Bitmap bitmap) {
    final int width = bitmap.getWidth();
    final int height = bitmap.getHeight();

    int[] pixelIn = new int[width * height];
    bitmap.getPixels(pixelIn, 0, width, 0, 0, width, height);
    bitmap.recycle();

    int[] pixelOut = new int[width * height * 3];
    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++) {
            int index = y * height + x;
            int R = (pixelIn[index] >> 16) & 0xff;
            int G = (pixelIn[index] >>  8) & 0xff;
            int B = (pixelIn[index] >>  0) & 0xff;

            int indexOut = index * 3;
            pixelOut[indexOut++] = R;
            pixelOut[indexOut++] = G;
            pixelOut[indexOut  ] = B;
        }
    }
    return pixelOut;
} 
```

未经测试，但它应该创建一个`int[]`（你应该考虑`byte[]`）填充`[R][G][B][R][G][B]...`

* * *

字节相同

```
public static byte[] getPixelBytes(Bitmap bitmap) {
    final int width = bitmap.getWidth();
    final int height = bitmap.getHeight();
    final int total = width * height;

    int[] pixelIn = new int[total];
    bitmap.getPixels(pixelIn, 0, width, 0, 0, width, height);
    bitmap.recycle();

    byte[] pixelOut = new byte[total * 3];
    int indexOut = 0;
    for (int pixel : pixelIn) {
        byte R = (byte) ((pixel >> 16) & 0xff);
        byte G = (byte) ((pixel >>  8) & 0xff);
        byte B = (byte) ((pixel      ) & 0xff);
        pixelOut[indexOut++] = R;
        pixelOut[indexOut++] = G;
        pixelOut[indexOut++] = B;
    }
    return pixelOut;
} 
```

* * *

并把它放在三个单独的数组中，比如`[R R R R][G G G G][B B B B]`

```
public static byte[][] getPixelBytes(Bitmap bitmap) {
    final int width = bitmap.getWidth();
    final int height = bitmap.getHeight();
    final int total = width * height;

    int[] pixelIn = new int[total];
    bitmap.getPixels(pixelIn, 0, width, 0, 0, width, height);
    bitmap.recycle();

    byte[][] result = new byte[3][total];
    int index = 0;

    for (int pixel : pixelIn) {
        byte R = (byte) ((pixel >> 16) & 0xff);
        byte G = (byte) ((pixel >>  8) & 0xff);
        byte B = (byte) ((pixel      ) & 0xff);
        result[0][index] = R;
        result[1][index] = G;
        result[2][index] = B;
        index++;
    }
    return result;
} 
```

第 5 个（= 索引 4）像素的 rgb 值将是

```
byte R = result[0][4];
byte G = result[1][4];
byte B = result[2][4]; 
```

或者把它分成3个数组

```
byte[] rArray = result[0]; // each 0 .. (width x height - 1)
byte[] gArray = result[1];
byte[] bArray = result[2]; 
```

也不要忘记 Java`byte`是*-128* .. *127*，而不是*0* .. *255*。

# maven - 了解常见的 Maven 插件代码格式

> ID：13650098
> 
> 赞同：0
> 
> 时间：2012-11-30T17:26:31.083
> 
> 标签：maven, maven-plugin

浏览 maven-plugin 源代码（例如['clean-plugin'](http://svn.apache.org/repos/asf/maven/plugins/trunk/maven-clean-plugin/)），我遇到了[verify.bsh](http://svn.apache.org/repos/asf/maven/plugins/trunk/maven-clean-plugin/src/it/dangling-symlinks/verify.bsh)文件，其内容为

```
import java.io.*;
import java.util.*;
import java.util.jar.*;
import java.util.regex.*;

try
{
    File targetDir = new File( basedir, "target" );
    System.out.println( "Checking for absence of " + targetDir );
    if ( targetDir.exists() )
    {
        System.out.println( "FAILURE!" );
        return false;
    }
}
catch( Throwable t )
{
    t.printStackTrace();
    return false;
}

return true; 
```

我想知道，这究竟是什么？这似乎是 Java 代码，但我在这里看不到任何`class`or`method`或 a `main`。请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:35:21.233

它似乎是使用[maven-invoker-plugin](http://maven.apache.org/plugins/maven-invoker-plugin/examples/post-build-script.html)启动的集成测试的一部分。

您提到的测试会创建符号链接并检查 build clean 插件是否实际删除了其中包含符号链接的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:20:18.167

正如第一个答案中提到的，这是用于通过 maven-invoker-plugin 运行集成测试的[beanshell代码。](http://www.beanshell.org/)BeanShell 的问题在于，似乎不再有积极的开发（svn 存储库无法访问等）。我更喜欢 Groovy 来编写与集成测试相关的集成测试。

通过 maven-invoker-plugin 设置 maven 环境来完成代码的调用，该环境执行完整的 maven 调用，之后您可以检查目标文件夹的内容或者可能是 build.log 的内容（运行期间的 mvn 输出) 是否包含预期的内容。

在插件中，您[通常具有以下结构](http://maven.apache.org/plugins/maven-invoker-plugin/usage.html)：

```
./
+- pom.xml
+- src/
   +- it/
      +- settings.xml
      +- first-it/
      |  +- pom.xml
      |  +- src/
      +- second-it/
         +- pom.xml
         +- invoker.properties
         +- test.properties
         +- verify.bsh
         +- src/ 
```

**src/it**包含插件的集成测试。例如，第二个它包含一个带有 pom.xml 文件等的单独 maven 项目，它将在集成测试期间通过 maven 运行。verify.bsh 将在 Maven 调用结束后调用，以检查一切是否符合预期。

# xcode - Xcode OISdylib：被调用的对象类型不是函数或函数指针

> ID：13650103
> 
> 赞同：1
> 
> 时间：2012-11-30T17:26:54.737
> 
> 标签：xcode, macos

我有这个错误，我无法弄清楚问题是什么。错误是：kCGWindowBound <---称为对象类型'CFStringRef'（又名'const_CFString *'）不是OSX 10.7.4上的函数或函数指针Xcode 4.3.3

```
void MacMouse::_initialize(){   
mState.clear();     
mTempState.clear();     
mMouseWarped = false; 
// Hide OS Mouse
    CGDisplayHideCursor(kCGDirectMainDisplay);

    MacInputManager* im = static_cast<MacInputManager*>(mCreator);
    WindowRef win = im->_getWindow();

    if(win)
    {
        Rect clipRect = {0.0f, 0.0f, 0.0f, 0.0f};
        kCGWindowBounds(win, kWindowContentRgn, &clipRect);

        CGPoint warpPoint;
        warpPoint.x = ((clipRect.right - clipRect.left) / 2) + clipRect.left;
        warpPoint.y = ((clipRect.bottom - clipRect.top) / 2) + clipRect.top;
        CGDisplayMoveCursorToPoint(kCGDirectMainDisplay, warpPoint); //Place at display origin

        mMouseWarped = true;
    }

    //Now that mouse is warped, start listening for events
    EventTargetRef event = ((MacInputManager*)mCreator)->_getEventTarget();

    if(mouseEventRef != NULL)
        RemoveEventHandler(mouseEventRef);

    if(mWindowFocusHandler != NULL)
        RemoveEventHandler(mWindowFocusHandler);

    mouseEventRef = mWindowFocusHandler = NULL;

    if(InstallEventHandler(event, mouseUPP, GetEventTypeCount(mouseEvents), mouseEvents, this, &mouseEventRef) != noErr)
        OIS_EXCEPT( E_General, "MacMouse::_initialize >> Error loading Mouse event handler" );

    if(InstallEventHandler(event, mWindowFocusListener, GetEventTypeCount(WinFocusAcquired), WinFocusAcquired, this, &mWindowFocusHandler) != noErr)
        OIS_EXCEPT( E_General, "MacMouse::_initialize >> Error loading Mouse event handler" );      

    //Lock OS Mouse movement
    mNeedsToRegainFocus = false;
    CGAssociateMouseAndMouseCursorPosition(FALSE);
} 
```

# php - 基本的 JSON PHP 查询麻烦

> ID：13650105
> 
> 赞同：-1
> 
> 时间：2012-11-30T17:27:13.317
> 
> 标签：php, html, json, last.fm

我一直在尝试（几天以来）从 JSON 查询中显示一个项目，但是因为我对语法和功能很糟糕，所以我失败了......

我的代码如下所示

```
<p>I'm currently listening to

<?php

ini_set('display_errors',1); 
error_reporting(E_ALL);

$string = file_get_contents("http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=matt1319&api_key=de676fee34a484f0c7ea2bd1c959d2d2&format=json&limit=1");
$json = json_decode($string, true);

echo *****;
?>
</p> 
```

我想从 last.fm 中取出我最近播放的歌曲...

```
recenttracks.track[0].artist['#text'] (if I'm currently listening or..)     
recenttracks.track.artist['#text'] (If I'm not currently listening to a song) 
```

指向正确方向的任何帮助都会很棒。由于我对 PHP（HTML 背景）相当陌生，因此我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:31:51.043

`json_decode`将提供一个数组，应表示为：

```
$string = file_get_contents("http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=matt1319&api_key=de676fee34a484f0c7ea2bd1c959d2d2&format=json&limit=1");
$json = json_decode($string, true);

echo $json['recenttracks']['track'][0]['artist']['#text']; 
```

# asp.net-mvc-3 - 如何修改授权属性以允许 MVC 3 中的一组用户角色

> ID：13650109
> 
> 赞同：1
> 
> 时间：2012-11-30T17:27:21.130
> 
> 标签：asp.net-mvc-3, authorize-attribute

在我的 MVC3 wep 应用程序中，我扩展了 Authorize 属性，如下所示

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (Authenticate.IsAuthenticated() && httpContext.User.Identity.IsAuthenticated)
        {
            var authCookie = httpContext.Request.Cookies[FormsAuthentication.FormsCookieName];
            if (authCookie != null)
            {
                var ticket = FormsAuthentication.Decrypt(authCookie.Value);
                var roles = ticket.UserData.Split('|');
                var identity = new GenericIdentity(ticket.Name);
                httpContext.User = new GenericPrincipal(identity, roles);
            }
        }
        return base.AuthorizeCore(httpContext);
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {

        if (!Authenticate.IsAuthenticated())
            HandleUnauthorizedRequest(filterContext);

        base.OnAuthorization(filterContext);

    } 
```

在我的行动中，我使用它就像

```
 [MyAuthorize(Roles = "Member,Inspector,SalesRep,Admin,SuperAdmin")]
    public ActionResult OrderUpload() 
```

现在，我必须在每个操作中指定每个用户角色。我想做的是指定如下内容

```
 [MyAuthorize(Roles = "Member")]
    public ActionResult OrderUpload() 
```

这应该允许任何等于或高于“成员”的用户角色。因此，应允许“SalesRep”，而不应允许“会员”之下的“访客”。

所有用户角色都是数字增加的枚举

```
public enum UserAccountType
{
    Visitor = 5,
    Member = 10,
    Inspector = 15,
    SalesRep = 20,
    Admin = 25,
    SuperAdmin = 30
} 
```

如何修改 MyAuthorizeAttribute 以使其工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:23:55.573

这是我的工作代码

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (Authenticate.IsAuthenticated() && httpContext.User.Identity.IsAuthenticated)
        {
            var authCookie = httpContext.Request.Cookies[FormsAuthentication.FormsCookieName];
            string[] roles = null;

            if (authCookie != null)
            {
                var ticket = FormsAuthentication.Decrypt(authCookie.Value);
                roles = ticket.UserData.Split('|');
                var identity = new GenericIdentity(ticket.Name);
                httpContext.User = new GenericPrincipal(identity, roles);
            }

            if (Roles == string.Empty)
                return true;

            //Assuming Roles given in the MyAuthorize attribute will only have 1 UserAccountType - if more than one, no errors thrown but will always return false
            else if ((UserAccountType)Enum.Parse(typeof(UserAccountType), roles[0]) >= (UserAccountType)Enum.Parse(typeof(UserAccountType), Roles))
                return true;
            else
                return false;
        }
        else
            return false;

        //return base.AuthorizeCore(httpContext);
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (!Authenticate.IsAuthenticated())
            HandleUnauthorizedRequest(filterContext);

        base.OnAuthorization(filterContext);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:53:30.240

我不使用 AuthorizeAttribute 而是使用 ActionFilter（这只是我，这就是我学习它的方式）但我要做的是在 AuthorizeAttribute 上添加一个属性，当在操作之前触发属性时会更新该属性。

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    private string Role = "";

    public MyAuthorizeAttribute(string role){
        this.Role = role;
    }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
          :
          :
          :
          // now do a check if the Role is authorized or not using your enum. 
          // return error page if not
          if(RoleisAuthorized)
            return; 
          else
            // error page

    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
          :
          :
          :
    }
} 
```

现在获得角色后，从枚举中获取它并比较是否允许角色访问页面，如果不返回错误页面。因此，由于我不熟悉 OnAuthorization，因此我会将流程放在 AuthorizeCore 中。

# java - 调用 java2wsdl 时如何向 Ant 脚本添加 extraClasses 选项？

> ID：13650112
> 
> 赞同：1
> 
> 时间：2012-11-30T17:27:24.673
> 
> 标签：java, ant, axis2, axis, wsdl2java

我想在生成 java2wsdl 时传递 extraClasses 参数。这是我的 Ant 任务：

```
<target name="rews.all" depends="xews.aar">
    <echo message="${axis2.classpath}" />
    <delete file="${build.dir}/wsdl/XEWS.wsdl" />
    <taskdef name="java2wsdl"
             classname="org.apache.ws.java2wsdl.Java2WSDLTask"
             classpathref="axis2.classpath">                 
    </taskdef>
    <java2wsdl className="com.dd.xews.XEWS"
               outputLocation="${build.dir}/wsdl/"
               targetNamespace="http://xews.dd.com/"
               schemaTargetNamespace="http://xews.dd.com">
        <classpath>
            <pathelement path="${axis2.classpath}"/>
            <pathelement location="${build.dir}/classes"/>
            <pathelement location="${vendor.dir}/AWS/lib/aws-java-sdk-1.2.1.jar"/>
        </classpath>            
    </java2wsdl>
    <copy todir="${build.dir}/" file="${build.dir}/wsdl/XEWS.wsdl"/>
</target> 
```

尝试了一切，但没有运气。

有谁知道语法？我如何在这里添加额外的类？

**测试1（失败）**

这失败并出现错误`java2wsdl doesn't support the "extraClasses" attribute`：

```
<java2wsdl className             ="com.dd.xews.XEWS"
           outputLocation        ="${build.dir}/wsdl/"
           targetNamespace       ="http://xews.dd.com/"
           schemaTargetNamespace ="http://xews.dd.com"
           extraClasses          ="com.dd.xews.XEWS.Emailer.java">  
</java2wsdl> 
```

如何找出**支持****哪些属性`java2wsdl Ant task`**？

我的 Axis2 版本是 1.5.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:08:43.557

这是 Ant 任务源代码的链接：[Java2WSDLTask](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.axis2/axis2-ant-plugin/1.6.2/org/apache/axis2/tool/ant/Java2WSDLTask.java#Java2WSDLTask)。

`#setExtraClasses`接受 String 参数，然后尝试使用逗号分隔符将其拆分。所以尝试通过类似的东西

`<extraClasses>com.test.Class1,com.test.Class2</extraClasses>`

**编辑**

这在旧版本的 Axis2 中不起作用（更准确地说 - 1.6.0 之前的版本）。这是因为 'extraClasses' 属性被指定为数组类型，显然不支持作为 Ant 任务属性。您可以在此 JIRA 问题中找到所有详细信息：[AXIS2-4634: Ant task Java2WSDLTask does not allow the use of extraClasses](https://issues.apache.org/jira/browse/AXIS2-4634)

使其工作的最简单方法是将 Axis2 JAR 升级到更新的 1.6.x 版本。如果您由于某些特定项目的原因而被 Axis2 版本卡住（我认为应该没有），您可以从较新版本中获取 Java2WSDLTask 的源代码（参见上面的 GrepCode 链接），并制作一份这个任务在你的项目中（你必须使用不同的类名或包），然后像你现在使用它一样将它用作一个 Ant 任务。除了可以使用“extraClasses”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T20:57:07.563

Axis2 1.4 及更高版本支持“-xc”属性。我是这样做的：

```
<java classname="org.apache.ws.java2wsdl.Java2WSDL" fork="true">
   ....
   <arg value="-xc"/>
   <arg value="com.example.mypackage.MyClass"/>
   <arg value="-xc"/>
   <arg value="com.example.anotherpackage.MyOtherClass"/>
   ....
</java> 
```

# database - 阿姆斯壮公理证明

> ID：13650115
> 
> 赞同：1
> 
> 时间：2012-11-30T17:27:31.080
> 
> 标签：database, relational-database, functional-dependencies

我在使用 Armstrong 公理证明函数依赖时遇到问题。我正在努力解决这个问题。令 R(A,B,C,D,E) 为关系模式，F = {A→CD, C→E, B→D} 1\. 证明：F: BC-> DE

是）我有的：

1 给定 B->D 1\. 在 1 上增加 C，BC->DC

2.在2上分解，BC->D BC->C

3\. BC->C, BC->E 上的传递性

4\. BC 上的联合 ->D 和 and 4, BC->DE

不确定这是否是一个正确的解决方案。

也证明：AC-> BD 我不认为这可以被证明。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:31:26.587

除了一些明显的拼写错误外，您的解决方案是正确的：

1.  给定 B->D, C->E
2.  1 上的增强 C：BC -> DC
3.  分解 2：BC -> C (3.1), BC -> D (3.2)
4.  1, 3.1 的传递性：BC -> C, C -> E: BC -> E
5.  3.2 和 4 上的联合：BC -> DE

或者：

1.  B->D, C->E
2.  增强（1.1，c）：bc -> dc
3.  增强（1.2，d）：cd -> ed
4.  trans(2, 3): bc -> de (注意: bc -> dc <=> bc -> cd <=> cb -> cd <=> cb -> dc)

ac -> bd 通常无法证明：检查 armstrong 公理，您会注意到某些 X 出现在派生 fd 的右轴上，它必须出现在原始 fd 之一的右轴上，除了

1.  X 是原始 fd 的 lhs 上某个 X' 的子集

    或者

2.  fd 是通过用 X 增广推导出来的

1.) 构成从未提及的约束。如果 2.) 适用，X 也会出现在原始 fd 的 lhs 上。消除 X 的唯一方法是通过传递性，这要求 X 出现在原始 fd 之一的 rhs 上。

将 b 视为 X 以查看 ac -> bd 是不可证明的。

***缩写***：

| 速记 | 扩张 |
| --- | --- |
| fd(s) | 功能依赖(/-cies) |
| lhs | 左侧（方程/推导） |
| rhs | 右侧 |

# javascript - 基于日期的 Javascript 重定向

> ID：13650118
> 
> 赞同：3
> 
> 时间：2012-11-30T17:27:54.377
> 
> 标签：javascript, date, redirect

我希望用户在本月的第一天被定向到 bar.html，在本月的第二个被引导到 gjb.html，在每个月的第三个被引导到 guerr.html，在其他日期被引导到 error.html。

我究竟做错了什么？无论用户计算机上的日期如何，以下仅加载 bar.html。

```
<html>
<script type="text/javascript">
    currentTime = new Date();
    if (currentTime.getDate() = 1)
        window.location = "bar.html";
    else if (currentTime.getDate() = 2))
        window.location = "gjb.html";
    else if (currentTime.getDate() = 3))
        window.location = "guerr.html";
    else window.location = "error.html";
</script>
</html> 
```

我对这一切都很陌生，所以像你对一个白痴一样解释它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:30:56.643

只需要进行适当的相等检查，而不是您正在使用的赋值运算符：

```
<html>
<script type="text/javascript">
    var currentDate = new Date().getDate();
    if (currentDate === 1)
        window.location = "bar.html";
    else if (currentDate === 2))
        window.location = "gjb.html";
    else if (currentDate === 3))
        window.location = "guerr.html";
    else window.location = "error.html";
</script>
</html> 
```

我建议`===`结束，`==`因为它会进行正确的类型检查，并且保证您会获得整数，所以这是一个更安全的检查。如有疑问，`===`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:32:59.687

您正在使用 设置日期`currentTime.getDate() = 1`。尝试`currentTime.getDate() == 1`或`currentTime.getDate() === 1`。（我不是一直使用 js，但是 '=' 是错误的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:44:43.423

尝试使用双等号 (==)。单等号表示赋值，而双等号表示比较。

例子：

// 给一个 int 赋值 a = 1;

// 给 b 赋值 int b = 2;

//查看a是否等于b

```
if( a == b ) {
        System.out.println("They're equal!");
}
else {
         System.out.println("They're not equal!");
} 
```

# javascript - 多种图像大小与浏览器图像大小调整/缩放

> ID：13650119
> 
> 赞同：0
> 
> 时间：2012-11-30T17:27:55.140
> 
> 标签：javascript, html

我有一个页面，我将在其中加载几个不同尺寸的主图像；虽然不是所有的大图像都会一次加载。

剧情是这样的。。

我有一个滑块，其中包含所有较大图像的拇指；这些都在页面加载时加载。

默认的大图像在页面加载时加载，但其他大图像仅在用户单击该图像的缩略图时才会加载，然后我将大图像的 src 替换为这样..

```
function changeMainImage(image) {

    // Set big image
    var big_image = image + '-big.png'

    // Update main image url
    jQuery('#main_image').attr('src', big_image);

} 
```

现在因为页面加载时大图像不会加载，这会导致大图像显示的延迟很小，这是相当不可取的。

现在我在想我可以用一块石头杀死两只鸟，只加载大图像而没有拇指，只需让浏览器将大图像缩放为缩略图；我只是有点畏缩这样做，因为我一直讨厌使用这种方法作为拇指的网站，但在我的情况下，它似乎是有效的，因为我无论如何都需要加载大图像。

这将允许我减少 http 请求的数量，`1 * amount of pics`并在单击拇指后立即加载大图像。

我唯一关心的是试图弄清楚如何为浏览器提供正确的尺寸，以便图像缩放到正确的比例，以及如果页面有 12 个图像；这样，当用户甚至对查看全部 12 张图片都不感兴趣时​​，我就可以让用户一次下载全部 12 张大图片。

两个版本都有优点和缺点 - 有什么建议在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:34:27.083

你目前的方法是我更喜欢做的。加载可见的内容。

现在，为了让用户体验更好，许多网站使用了几种技术。第一个是预加载下一个或两个图像。如果您有类似幻灯片的显示方式，并且很清楚图像的显示顺序，那就太好了。

第二种是在大版本下载时显示缩略图。如果您的缩略图大小合适，这可以让用户获得点击有效的视觉反馈，并且在合适的连接上，图像将很快被下载。

最后，我建议使用渐进式 JPEG（如果您的图像是照片），以便它们在加载时得到增强。

对于有关大小的数据（和任何其他元数据），请将其保存在 JavaScript 对象数组中，或者保存在您存储图像数据的任何其他位置。您可以轻松地使用 JSON 从服务器传输。

# regex - Ant Build 从 svn 日志输出中读取版本号

> ID：13650127
> 
> 赞同：2
> 
> 时间：2012-11-30T17:28:27.650
> 
> 标签：regex, eclipse, svn, ant

要求：

运行`svn log -l 1`命令，这将有这样的输出。

> ```
>  ------------------------------------------------------------------------
>     r2633 | name | 2012-11-07 17:28:20 +0530 (Wed, 07 Nov 2012) | 1 line
>     My comment.
>     ------------------------------------------------------------------------ 
> ```

我需要提取修订号 2633 并将其分配为属性。我宁愿避免使用 ant-contrib。

我尝试了什么：

```
<echo>Run svn log -l 1</echo>
<exec executable="svn" outputproperty="svn.output" failonerror="false">
    <arg line="log -l 1"/>
</exec>   
<echo message="Output was: ${svn.output}" /> 
```

这会在属性 ${svn.ouput} 中获得上述输出，但我不确定如何从中提取版本。

其他选项是将变量写入文件中，但我又如何将版本提取到属性中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:35:05.117

没有一种干净的方法可以从标准 Ant 中的属性中提取子字符串。有关一些替代解决方案，请参阅[此 Stack Overflow 答案](https://stackoverflow.com/questions/945374/how-to-pull-out-a-substring-in-ant)。

# android - Meter Gauge Android 震动计

> ID：13650132
> 
> 赞同：-2
> 
> 时间：2012-11-30T17:28:41.710
> 
> 标签：android, shake, gauge, meter

如何在 Android 中创建类似于 Meter Gauge 的 Shake Meter？我可以使用进度条来做到这一点吗？

希望有人能给我一个指导，告诉我如何在检测到震动时创建仪表。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:12:56.260

这个库可以提供帮助：[https ://github.com/github/gauges-android](https://github.com/github/gauges-android)

如果你想自己做所有事情，或者这个线程：[如何在 Android 中创建仪表？](https://stackoverflow.com/questions/2335560/how-do-i-create-a-gauge-in-android)

# file - 文件系统写入缓冲区通常在几秒后被刷新？

> ID：13650134
> 
> 赞同：13
> 
> 时间：2012-11-30T17:28:49.187
> 
> 标签：file, file-io, filesystems, data-persistence

在覆盖文件中的数据之前，我想非常确定旧数据存储在磁盘上。它可能是一个非常大的文件（数 GB），因此需要就地更新。通常写入将是 2 MB 或更大（我的计划是使用 4 KB 的块大小）。

代替（或除此之外）调用 fsync()，我想保留（不覆盖）磁盘上的旧数据，直到文件系统写入新数据。我不想依赖 fsync() 的主要原因是：[大多数硬盘都在骗你做 fsync。](http://hardware.slashdot.org/story/05/05/13/0529252/your-hard-drive-lies-to-you)

所以我正在寻找的是文件系统、操作系统（例如 Windows）、硬盘驱动器的典型最大延迟，直到数据写入磁盘，而不使用 fsync 或类似方法。如果可能的话，我想拥有真实世界的数字。我不是在寻找使用 fsync 的建议。

我知道没有 100% 可靠的方法可以做到这一点，但我想更好地了解操作系统和文件系统在这方面是如何工作的。

到目前为止我发现的是：[30 秒是 / 是 /proc/sys/vm/dirty_expire_centiseconds 的默认值](http://www.westnet.com/~gsmith/content/linux-pdflush.htm)。然后“[脏页面被刷新（写入）到磁盘......（当）自从页面保持脏状态以来已经过去了太多时间](http://www.makelinux.net/books/ulk3/understandlk-CHP-15-SECT-3)”（但在那里我找不到默认时间）。所以对于 Linux，40 秒似乎是安全的。但这适用于所有文件系统/磁盘吗？Windows、Android 等呢？我想得到一个适用于所有常见操作系统/文件系统/磁盘类型的答案，包括 Windows、Android、普通硬盘、SSD 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:10:43.160

让我用稍微有点不友好的术语重申您的问题：您正试图控制其在操作系统中的驱动程序无法控制的物理设备的行为。如果你想要的是一个实际的保证，而不是一个很好的猜测，那么你试图做的似乎是不可能的。如果您想要的只是一个很好的猜测，那很好，但请注意这一点并相应地记录。

您也许可以使用正确的设备驱动程序来解决这个问题。例如，SCSI 协议在其和命令中有一个`Force Unit Access (FUA)`位，用于指示设备绕过任何内部缓存。即使数据最初是缓冲写入的，读取未缓冲的数据也应该能够验证它确实存在。`READ``WRITE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T03:16:19.860

可靠地确保数据已同步的唯一方法是使用操作系统特定的同步机制，并根据[PostgreSQL 的可靠性文档](http://www.postgresql.org/docs/current/static/wal-reliability.html)。

> 当操作系统向存储硬件发送写请求时，它几乎无法确保数据已到达真正的非易失性存储区域。相反，确保所有存储组件确保数据完整性是管理员的责任。

所以不，没有真正可移植的解决方案，但是可以（但很难）编写可移植的包装器并部署可靠的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T14:32:09.473

首先感谢硬盘关于刷新数据的信息，这对我来说是新的。

现在解决您的问题：您要确保写入的所有数据都已写入磁盘（最低级别）。您是说需要控制两个部分：操作系统写入硬盘的时间和硬盘写入磁盘的时间。

您唯一的解决方案是使用模糊逻辑计时器来估计何时写入数据。

在我看来，这是错误的方式。您可以控制操作系统何时写入硬盘驱动器，因此请使用并控制它！那么只有说谎的硬盘是你的问题。这个问题不能可靠地解决。我认为，您应该告诉用户/管理员，他在选择正确的硬盘驱动器时必须小心。当然，实现您建议的附加计时器可能是个好主意。
我相信，您可以开始使用不同的硬盘驱动器和 Brad Fitzgerald 的工具进行一系列测试，以很好地估计硬盘驱动器何时会写入所有数据。但当然——如果硬盘想撒谎，你永远无法确定数据是否真的已写入磁盘。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T21:26:21.473

为用户提供响应式系统涉及很多缓存。

有 cpu 缓存、内核/文件系统内存缓存、磁盘驱动器内存缓存等。您要问的是刷新所有缓存需要多长时间？

或者，另一种看待它的方式是，如果磁盘驱动器坏了会发生什么？所有刷新都不能保证成功的读取或写入操作。

磁盘驱动器最终会变坏。您正在寻找的解决方案是如何拥有一个冗余的 cpu/磁盘驱动器系统，以便系统在组件故障后仍能继续工作。

您可以提高系统在 RAID 阵列和其他高可用性配置等硬件的帮助下继续工作的可能性。

就软件解决方案而言，我认为答案是，相信操作系统会做最优化的事情。他们中的大多数定期刷新缓冲区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-02T19:42:27.923

[这是一个老问题，但在 2019 年仍然相关。对于 Windows，基于此](https://docs.microsoft.com/en-us/windows/win32/fileio/file-caching)，答案似乎是“至少每隔一秒” ：

> 为了确保进行适量的刷新，**缓存管理器每秒生成一个称为惰性写入器的进程**。惰性写入器进程将最近未刷新的页面的八分之一排队以写入磁盘。它不断地重新评估要刷新的数据量以获得最佳系统性能，如果需要写入更多数据，它会将更多数据排队。

需要明确的是，上面说懒惰的作家每秒钟都会**产生**一次，这与每秒写出数据不同，但这是我迄今为止在寻找类似问题的答案时能找到的最好的（在我的情况是，我有一个 Android 应用程序可以将数据延迟写回磁盘，并且在使用 3 秒的间隔时我注意到一些数据丢失，所以我将把它减少到 1 秒，看看是否有帮助......它可能损害性能，但如果您考虑*恢复*数据所需的时间，那么丢失数据会更严重地损害性能）。

# android - 滚动多个 WebView 时出现 onTouch 异常

> ID：13650136
> 
> 赞同：0
> 
> 时间：2012-11-30T17:29:02.417
> 
> 标签：android, android-webview, touch-event

我有一个应用程序，它使用多个`WebView`彼此相邻的 s 来显示内容。当垂直滚动一个时，我在第一个完全停止之前滚动另一个，我得到下面的堆栈跟踪异常。堆栈中的第一行对我来说是最令人费解的。我不知道 a`VelocityTracker`是什么，或者其他任何变量指的是什么。

```
11-30 10:47:04.740: E/webview(2199): Got null mVelocityTracker when mPreventDefault = 0 mDeferTouchProcess = false mTouchMode = 3
11-30 10:50:23.771: D/AndroidRuntime(2199): Shutting down VM
11-30 10:50:23.771: W/dalvikvm(2199): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-30 10:50:23.795: E/AndroidRuntime(2199): FATAL EXCEPTION: main
11-30 10:50:23.795: E/AndroidRuntime(2199): java.lang.NullPointerException
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.webkit.WebView.onTouchEvent(WebView.java:5283)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.View.dispatchTouchEvent(View.java:3885)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1702)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at android.app.Activity.dispatchTouchEvent(Activity.java:2132)
11-30 10:50:23.795: E/AndroidRuntime(2199):     at
... 
```

我正在使用 sub-classed `WebView`，但我没有覆盖该`onTouchEvent()`方法。

有趣的是，我只在我正在使用的 OS v2.3 设备以及任何 OS v2.x 模拟器上发现此错误。每当我在 4.x 设备上进行测试时，一切都很好，并且所有 WebView 都能够同时处理触摸和滚动。

到底是怎么回事？这是Android中的已知错误吗？我找不到任何类似情况的记录。任何解决方法的建议？只要其中一个正在滚动，我就可以防止其他`WebView`s 被触摸，但这似乎很荒谬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:00:36.073

我发现了我是如何导致问题的，但不是真正的问题。

我偶然发现了[这个链接](https://stackoverflow.com/questions/10570861/galaxy-nexus-4-0-2-gets-exception-on-webview-ontouchevent)，它描述了当 a`WebView`没有传递所有`onTouch`事件时的问题。我的 s 有一个`onTouchListener`集合，`WebView`它通过返回处理第一个`onTouch`事件，`true`然后通过返回传递后续事件`false`。

显然，当某些版本的操作系统无法处理所有`onTouch`事件时，它们就会变得一团糟。

# java - 当用户单击窗口的关闭按钮时隐藏框架而不是关闭

> ID：13650142
> 
> 赞同：2
> 
> 时间：2012-11-30T17:29:19.583
> 
> 标签：java, swing, scala, jframe

我有一个显示窗口的应用程序。当用户按下“关闭”按钮时，我不想关闭窗口，我只想隐藏这个窗口，我该怎么做？

这是我的代码（它不起作用，应用程序在点击时关闭）：

```
 object UxMonitor {

  def main(args: Array[String]) {
    val frame = new MainScreen()
    frame.peer.setDefaultCloseOperation(WindowConstants.HIDE_ON_CLOSE)
    initTrayIcon(frame.peer)
  } 
```

……

```
class MainScreen extends MainFrame {
      private val HEADERS = Array[Object]("Security", "Last Price", "Amount", "Cost")
      private val quotes = new Quotes()
      private val tableModel = new DefaultTableModel()

      title = "UX Monitor"

      tableModel.setColumnIdentifiers(HEADERS)

      private val table = new Table {
        model = tableModel
      }

      contents = new ScrollPane {
        contents = table
      }

      quotes.setListener(onQuotesUpdated)
      quotes.startUpdating

      peer.addWindowListener(new WindowAdapter{
        def windowClosing(e : WindowEvent){
            self.setVisible(false)
        }
      })

      pack 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:04:18.087

最简单的方法是：

```
final JFrame frame=...;

....

frame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE); 
```

或者，您可以通过添加`WindowAdapter`覆盖`windowClosed(...)`并在其中调用) 来实现相同的结果`setVisible(false)`，`JFrame`如下所示：

```
...

 frame.addWindowListener(new WindowAdapter() {
    @Override
  public void windowClosing(WindowEvent evt) {
    frame.setVisible(false);
  }
}); 
```

# wpf - 动画师控制的透明度

> ID：13650145
> 
> 赞同：0
> 
> 时间：2012-11-30T17:29:25.557
> 
> 标签：wpf, user-controls, transparency

我正在为动画编写用户控件。
它使用内部 ImageList 来存储动画图像并在循环中一个接一个地绘制。
这是整个代码：

```
public partial class Animator : UserControl
{
    public event EventHandler OnLoopElapsed = delegate { };
    private ImageList imageList = new ImageList();
    private Timer timer;
    private bool looping = true;
    private int index;
    private Image newImage;
    private Image oldImage;

    public Animator()
    {
        InitializeComponent();

        base.DoubleBuffered = true;

        timer = new Timer();
        timer.Tick += timer_Tick;
        timer.Interval = 50;
    }

    public bool Animate
    {
        get { return timer.Enabled; }
        set
        {
            index = 0;
            timer.Enabled = value;
        }
    }

    public int CurrentIndex
    {
        get { return index; }
        set { index = value; }
    }

    public ImageList ImageList
    {
        set
        {
            imageList = value;
            Invalidate();
            index = 0;
        }

        get { return imageList; }
    }

    public bool Looping
    {
        get { return looping; }
        set { looping = value; }
    }

    public int Interval
    {
        get { return timer.Interval; }
        set { timer.Interval = value; }
    }

    private void timer_Tick(object sender, EventArgs e)
    {
        if (imageList.Images.Count == 0)
            return;

        Invalidate(true);
        index++;

        if (index >= imageList.Images.Count)
        {
            if (looping)
                index = 0;
            else
                timer.Stop();

            OnLoopElapsed(this, EventArgs.Empty);
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
        if (oldImage != null)
            e.Graphics.DrawImage(oldImage, ClientRectangle);
        else
            e.Graphics.Clear(BackColor);
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        Graphics g = e.Graphics;

        if (imageList.Images.Count > 0)
        {
            newImage = imageList.Images[index];
            g.DrawImage(newImage, ClientRectangle);
            oldImage = newImage;
        }
        else
        {
            e.Graphics.Clear(BackColor);
        }
    }
} 
```

动画看起来非常漂亮和流畅，
但问题是它周围的矩形被涂成黑色。
我在这里想念什么？

我在 WPF 中看到了非常平滑的透明动画，[我](http://www.codeproject.com/Articles/23257/Beginner-s-WPF-Animation-Tutorial)
在它后面放置了一些标签，它们可以通过旋转轮看到，正如我希望的那样。
但我对 WPF 的了解还不够，无法在 WPF 中构建这样的控件。

任何想法或 WPF 示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:57:57.830

这是通过从构造函数中删除这一行来解决的：

```
base.DoubleBuffered = true; 
```

现在该控件是完全透明的，即使在更改其图像时也是如此。

# c# - 为什么我在模拟的测试对象上得到空引用异常？

> ID：13650151
> 
> 赞同：3
> 
> 时间：2012-11-30T17:29:39.027
> 
> 标签：c#, unit-testing, mocking, rhino-mocks, nullreferenceexception

我有以下

```
IdleClass idleSend = MockRepository.GenerateMock<IdleClass >();
SpeedClass speedSend = MockRepository.GenerateMock<SpeeClass >();
idleSend.Expect(x => x.IsUnitInSystem(networkID)).Return(true).Repeat.Any();
speedSend.Expect(x => x.IsUnitInSystem(networkID)).Return(true).Repeat.Any(); 
```

和原始 IsUnitInSystem(networkID) 函数（在 IdleClass 和 SpeedClass 的子类中）如下：

```
public bool IsUnitInSystem(string networkID)
        {
            DateTime outVal = default(DateTime);
            return m_list1.DoesListContainUnit(networkID) ||
                   m_list2.TryGetValue(networkID, out outVal) ||
                   m_list3.TryGetValue(networkID, out outVal) ||
                   m_list4.TryGetValue(networkID, out outVal) ||
                   m_list5.TryGetValue(networkID, out outVal);
        } 
```

我在 IsUnitInSystem 函数的返回行上恢复了 System.NullReferenceException。

堆栈跟踪：

```
IdleClass.IsUnitInSystem(String networkID)
PendingTest.<ResendClassTest>b__1b(IdleClass x)
RhinoMocksExtension.Expect[T,R](T mock, Function'2 action)
PendingTest.ResendClassTest() 
```

我不明白的是，当我为函数指定 .Expect 功能时，程序为什么以及如何进入函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T18:01:25.887

您尝试模拟的方法必须能够由模拟对象实现，这意味着如果您正在模拟具体类，则必须将其标记为虚拟。

查看以下帖子以获取更多信息：[Rhino Mocks 存根和模拟仅适用于接口？](https://stackoverflow.com/questions/2388033/rhino-mocks-stubs-and-mocks-are-only-good-for-interfaces)

# python - Python中的浮点精度

> ID：13650155
> 
> 赞同：2
> 
> 时间：2012-11-30T17:30:02.983
> 
> 标签：python, math, floating-point, precision, floating-point-precision

我在python中编写[了这个函数：](http://j.mp/QvmBlB)

```
import math

def radical(a, b, k): 
    return (1-((a**2-b**2)/a**2)*(math.sin(math.pi*(2*k-1)/180))**2)**.5

def f(a, b): 
 sigma = 0 
 for k in range(1,180/4):
    sigma = sigma + radical(a, b, k)
 return 8*a*math.sin(math.pi/180)*sigma

print f(25.,35.) 
```

当我在 Wolphramapha 和 Maple 中计算这个函数时，我会得到 189.797，但使用 python[我会得到 184.91089913](http://codepad.org/kEJuDC95) 我的程序有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T17:36:31.087

你差了一个。该`range`方法不包括终点。尝试添加一个：

```
for k in range(1,180/4 + 1): 
```

结果：[189.797208409](http://codepad.org/gdaQpYRC)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:35:52.060

嗯，首先，python 假设整数除法，所以这段代码有一些严重的舍入。我相信这有一个重要的部门。此外，以下是有关 python 的浮点算术问题/问题的一些信息：

[http://docs.python.org/2/tutorial/floatingpoint.html](http://docs.python.org/2/tutorial/floatingpoint.html)

# c# - 使用 C# 插入字段名称为 TA/TJ 的数据库

> ID：13650156
> 
> 赞同：2
> 
> 时间：2012-11-30T17:30:02.727
> 
> 标签：c#, sql-server, database

最近我被分配到一个项目，我们必须将旧的 VB3 进程迁移到 C#，这个进程从 Access 97 文件中获取数据并将其插入 SQL Server，问题是一些“天才”调用字段“Ta /Tj" 和 '/' 破坏了我们的代码，我们尝试了不同的方法但失败了。我们现在无法更改字段名称，因为我们不确切知道有多少程序使用该表。

这是我的代码

```
 OleDbConnection connectionEpsOle = new OleDbConnection();
        SqlConnection connectionEpsSql = (SqlConnection)GetConexion.GetConnectionIus();
        DbDataAdapter dataAdapter;
        long nIus;
        long nIdGenealogia;
        string sRubroStr;

        DataSet dataSet = new DataSet();
        DataRow dr;

        string sqlCadena = "SELECT * FROM Tesis WHERE ius =0";

        dataAdapter = new SqlDataAdapter();
        dataAdapter.SelectCommand = new SqlCommand(sqlCadena, connectionEpsSql);

        dataAdapter.Fill(dataSet, "Tesis");

        sRubroStr = tesisDto.RUBRO;
        sRubroStr = MiscFunct.QuitaCarCad(sRubroStr);
        sRubroStr = MiscFunct.ConvMay(sRubroStr);
        sRubroStr = MiscFunct.QuitaDblEspacio(sRubroStr);
        sRubroStr = sRubroStr.Trim();

        if (sRubroStr.Length > 250)
        {
            sRubroStr = sRubroStr.Substring(0, 250);
        }

        dr = dataSet.Tables["Tesis"].NewRow();

        dr["IUS"] = tesisDto.IUS;
        dr["Parte"] = 200;
        dr["Consec"] = 0;
        dr["Rubro"] = tesisDto.RUBRO;
        dr["Texto"] = tesisDto.TEXTO;
        dr["Prec"] = tesisDto.PRECEDENTES;
        dr["Epoca"] = tesisDto.Epoca;
        dr["Sala"] = tesisDto.Sala;
        dr["Fuente"] = tesisDto.Fuente;
        dr["Volumen"] = tesisDto.Volumen;
        dr["Tesis"] = tesisDto.Tesis;
        dr["Pagina"] = tesisDto.Pagina;
        dr["TA/TJ"] = tesisDto.TATJ;
        dr["Materia1"] = tesisDto.Materia1;
        dr["Materia2"] = tesisDto.Materia2;
        dr["Materia3"] = tesisDto.Materia3;
        dr["IdGenealogia"] = tesisDto.idGenealogia;
        dr["ConsecIndx"] = 0;
        dr["IdTCC"] = 0;
        dr["InfAnexos"] = 0; 
        dr["LocAbr"] = " ";
        dr["NumLetra"] = 0;
        dr["ConsecLetra"] = 0;
        dr["Instancia"] = 0;
        dr["ConsecInst"] = 0;
        dr["LocExp"] = " ";
        dr["RIndx"] = "RRR";
        dr["TIndx"] = "TTT";
        dr["PIndx"] = "PPP";
        dr["LIndx"] = "LLL";
        dr["Certificada"] = 0;
        dr["IdSubVolumen"] = 0;

        dataSet.Tables["Tesis"].Rows.Add(dr);

        //dataAdapter.UpdateCommand = connectionEpsSQL.CreateCommand();
        dataAdapter.InsertCommand = connectionEpsSql.CreateCommand();
        dataAdapter.InsertCommand.CommandText = "INSERT INTO Tesis(IUS,Parte,Consec,Rubro,Texto,Prec," +
                                                "Epoca,Sala,Fuente,Volumen,Tesis,Pagina,[TA/TJ],Materia1,Materia2,Materia3," +
                                                "IdGenealogia,ConsecIndx,IdTCC,InfAnexos,LocAbr,NumLetra,ConsecLetra,Instancia," +
                                                "ConsecInst,LocExp,RIndx,TIndx,PIndx,LIndx,Certificada,IdSubVolumen)" +
                                                " VALUES(@IUS,@Parte,@Consec,@Rubro,@Texto,@Prec," +
                                                "@Epoca,@Sala,@Fuente,@Volumen,@Tesis,@Pagina,@[TA/TJ],@Materia1,@Materia2,@Materia3," +
                                                "@IdGenealogia,@ConsecIndx,@IdTCC,@InfAnexos,@LocAbr,@NumLetra,@ConsecLetra," +
                                                "@Instancia,@                                                ConsecInst,@LocExp,@RIndx,@TIndx,@PIndx," +
                                                "@LIndx,@Certificada,@IdSubVolumen)";

        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@IUS", SqlDbType.BigInt, 0, "IUS");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Parte", SqlDbType.Int, 0, "Parte");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Consec", SqlDbType.Int, 0, "Consec");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Rubro", SqlDbType.Text, 0, "Rubro");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Texto", SqlDbType.Text, 0, "Texto");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Prec", SqlDbType.Text, 0, "Prec");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Epoca", SqlDbType.Int, 0, "Epoca");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Sala", SqlDbType.Int, 0, "Sala");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Fuente", SqlDbType.Int, 0, "Fuente");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Volumen", SqlDbType.Int, 0, "Volumen");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Tesis", SqlDbType.VarChar, 0, "Tesis");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Pagina", SqlDbType.VarChar, 0, "Pagina");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@[TA/TJ]", SqlDbType.Int, 0, "TA/TJ");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Materia1", SqlDbType.Int, 0, "Materia1");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Materia2", SqlDbType.Int, 0, "Materia2");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Materia3", SqlDbType.Int, 0, "Materia3");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@IdGenealogia", SqlDbType.BigInt, 0, "IdGenealogia");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@ConsecIndx", SqlDbType.Int, 0, "ConsecIndx");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@idTCC", SqlDbType.SmallInt, 0, "idTCC");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@InfAnexos", SqlDbType.TinyInt, 0, "InfAnexos");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@LocAbr", SqlDbType.NVarChar, 0, "LocAbr");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@NumLetra", SqlDbType.TinyInt, 0, "NumLetra");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@ConsecLetra", SqlDbType.Int, 0, "ConsecLetra");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Instancia", SqlDbType.SmallInt, 0, "Instancia");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@ConsecInst", SqlDbType.Int, 0, "ConsecInst");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@LocExp", SqlDbType.NText, 0, "LocExp");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@RIndx", SqlDbType.NText, 0, "RIndx");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@TIndx", SqlDbType.NText, 0, "TIndx");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@PIndx", SqlDbType.NText, 0, "PIndx");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@LIndx", SqlDbType.NText, 0, "LIndx");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@Certificada", SqlDbType.TinyInt, 0, "Certificada");
        ((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@IdSubVolumen", SqlDbType.Int, 0, "IdSubVolumen");

        dataAdapter.Update(dataSet, "Tesis");

        dataSet.Dispose();
        dataAdapter.Dispose();
        connectionEpsOle.Close(); 
```

该`Ta/Tj`列保存`tinyint`值

这是 SqlException 消息

> *第 1 行：'int' 附近的语法不正确。必须声明变量“@”。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:37:52.037

您可以让列和变量处于其不幸的状态。只需将您传递的参数名称更改为与 OLE 兼容的名称：

在 VALUES 列表中：使用`@TA_TJ`而不是`@[TA/TJ]`

在参数列表中更改为：

```
((SqlDataAdapter)dataAdapter).InsertCommand.Parameters.Add("@TA_TJ", SqlDbType.Int, 0, "TA/TJ"); 
```

# media-queries - 如何在不使用最大宽度的情况下媒体查询视网膜手机的风景？

> ID：13650160
> 
> 赞同：0
> 
> 时间：2012-11-30T17:30:13.663
> 
> 标签：media-queries, retina-display, screen-orientation, css

我正在我的 Galaxy S3 (1280x720 px) 上测试我的单页网站，但我似乎无法弄清楚最大宽度需要什么。我查了一下，找不到当前的答案——最明确的答案来自“pre-retina”。（或者他们还应该工作吗..？）

随着像素设备变化如此之快，有没有办法只通过设备的 orientatino 来定位媒体查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:17:57.043

媒体查询还具有“方向”功能，您可以在查询中使用它来检测纵向或横向模式。适合您情况的正确媒体查询是：

```
@media only screen and (min-device-width: 720px) and (max-device-width: 1280px) and (orientation: landscape) {
/* insert styles here */
} 
```

附带说明一下，如果您需要找出其他有效的媒体查询，我制作了一个带有可选设备预设的便捷媒体查询构建工具（我在这里使用的那个被列为“Galaxy Nexus，横向”）：[http://arcsec .ca/media-query-builder/](http://arcsec.ca/media-query-builder/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:40:36.933

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
 and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
} 
```

还有更多，请查看[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# macos - 在 OSX 上更新另一个应用程序的文本字段

> ID：13650164
> 
> 赞同：0
> 
> 时间：2012-11-30T17:30:50.110
> 
> 标签：macos, cocoa, accessibility

我正在尝试使用 Accessibility API 控制另一个应用程序。特别是，我需要更改文本字段的值。

我设法找到了相关的 AXUIElement。我可以读取当前值并写入一个新值。更新后的值在界面中可见。

但是，问题在于它没有被考虑在内 - 应用程序本身没有看到更改（如果有绑定，那么它还没有被激活）。刷新 UI 后，旧值就会恢复。

有谁知道我怎样才能强制改变产生效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:52:08.120

您是否尝试过发送`AXConfirm`到文本字段元素？（更改值后。）

# javascript - 如何使用基本身份验证从服务器动态加载 javascript 文件

> ID：13650169
> 
> 赞同：2
> 
> 时间：2012-11-30T17:30:56.267
> 
> 标签：javascript, jquery, asp.net-mvc-3, basic-authentication

我们有一个受基本身份验证保护的网站，下面有一个特定的 javascript 文件。

我想通过在加载文件时在身份验证标头上添加详细信息来从不同的 MVC3 站点加载该 javascript 文件，这就是我正在尝试的似乎不起作用的方法 - 它总是弹出基本身份验证登录对话框：

```
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <title>Auth test</title>
</head>
<body>
    <script src="~/Scripts/jquery-1.7.1.min.js"></script>
    <script src="~/Scripts/Base64.js"></script>
    <h2>Index</h2>

    <script type="text/javascript">

        $(document).ready(function () {

            var auth = make_base_auth('domain\user', 'password');

            $.ajaxSetup({
                headers: {
                    'Authorization': auth
                }
            });

            $.ajax({
                url: 'https://localhost/WebClient/scripts/bob.js',
                dataType: 'script',
                //username: 'domain\user',
                //password: 'password',
                //withCredentials: true,
                //crossDomain: true,
                //headers: { 'Authorization': auth },
                success: function (data) {
                    alert("Got the script!");

                    callFunctionInTheOtherJSFile();
                },
                async: false
            });

        });

        function make_base_auth(user, password) {
            var tok = user + ':' + password;
            var hash = Base64.encode(tok);
            return "Basic " + hash;
        }

    </script>
</body>
</html> 
```

我应该怎么做才能使代码正常工作？

正如您从各种注释掉的部分中看到的那样 - 我尝试了几种不同的方法（新旧的 jQuery 方法等）！

作为参考，Base64 JS 取自这里 - [http://www.webtoolkit.info/javascript-base64.html](http://www.webtoolkit.info/javascript-base64.html)如此处所述 - [http://coderseye.com/2007/how-to-do-http-basic- auth-in-ajax.html](http://coderseye.com/2007/how-to-do-http-basic-auth-in-ajax.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:21:43.070

您是否尝试过标准`http://user:pass@hostname/`语法？

# android - onActivityResult 调用太早

> ID：13650173
> 
> 赞同：2
> 
> 时间：2012-11-30T17:31:09.193
> 
> 标签：android, android-intent, timing

我有一个同步问题。我已经搜索并找不到与我的条件相同的问题。欢迎指点。

Eclipse 4.2.1 上的 Android 4.1.2

我有两个活动；我们称它们为 ListActivity 和 DetailActivity。在 ListActivity 上按下按钮，我启动 DetailActivity。当用户对 DetailActivity 中的数据进行更改然后单击后退按钮时，我想做两件事。首先，如果脏标志为真，我想保存对数据库的更改。其次，我想返回一个 Intent 给 ListActivity 的 onActivityResult() 方法。

问题是时机之一。由于我想做数据库更新，我读到最好在 DetailActivity 的 onStop() 方法中执行此操作。更新数据库后，我立即设置 Intent 并在 DetailActivity 中调用 setReult() 方法。

```
_resultIntent = new Intent();  
_resultIntent.putExtra(ListActivity .DETAIL_RESULT, _currentData);  
Log.d("ListActivity.setUpReturn()", "checkpoint");  
setResult(Activity.RESULT_OK, _resultIntent); 
```

在我有机会设置结果之前调用 ListActivity 的 onActivityResult() 方法。我在整个过程中都放置了 Log 调用，似乎发生的情况如下：

1) 用户在 DetailActivity 中并更改了一些数据，将脏标志设置为 true。
2) 用户点击系统返回按钮。
3) DetailActivity 从屏幕上消失。
4) ListActivity 重新出现。
5) 日志记录了 ListActivity 的 onActivityResult()、onRestart()、onStart() 和 onResume() 方法按该顺序执行
6) 记录了其他一些内容。
7) 日志最后注意到 DetailActiviy 的 onStop() 方法执行。

这意味着当我更新数据库并设置结果 Intent 时，调用活动已经超过了使用它的时间点。

我宁愿不经常更新数据库。我宁愿像最佳实践所说的那样将它放入 onStop() 方法中，但我不知道如何解决时间问题。有什么建议么？我在做一些明显错误的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:39:36.230

检查您是否将您的活动设置为“`SingleInstance`如果是”，然后进行`SingleTop`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:50:09.427

我宁愿依赖基于事件的代码逻辑而不是概率。您可以尝试以下方法。

* ***1) 用户在 DetailActivity 中并更改了一些数据，将脏标志设置为 true。2) 用户点击系统返回按钮。****

覆盖 onBackPressed 方法并在此处执行数据库操作，一旦执行 DB 操作，您可以调用 super.onBackPressed() 方法并让 Android Activity 堆栈接管。请注意，数据库操作可能很耗时，因此还建议使用带有回调的 AsyncTask，然后才调用 finish()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:39:21.337

这是因为`onPause()`在活动失去焦点后立即调用。然而`onStop()`，当 Activity 将被销毁时（通常在没有足够内存时）调用。因此，将您的代码放入`onPause()`方法中，您应该没问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T20:51:20.753

事实证明，对我来说最好的解决方案来自 PravinCG。我以后会用这个作为模式。

```
@Override
public void onBackPressed() {
    Log.d("DetailActivity.onBackPressed()", "checkpoint");
    if (_currentDataIsDirty) {
        DoDatabaseWork(_currentData);
    }
    _resultIntent = new Intent();
    _resultIntent.putExtra(ListActivity .DETAIL_RESULT, _currentData);
    setResult(Activity.RESULT_OK, _resultIntent);
    super.onBackPressed();
} 
```

多古拉斯

# javascript - 谷歌地图 gpx 导出 - 在 JavaScript 中保存对话框

> ID：13650174
> 
> 赞同：2
> 
> 时间：2012-11-30T17:31:10.293
> 
> 标签：javascript, maps, export, savefiledialog

我正在开发一个 GoogleMaps 项目，并希望为用户提供将当前路线保存为 GPX 文件的功能。我还没有找到任何功能或可能性来做到这一点。

所以我想也许可以通过 mapoverview 数组并在此之后保存坐标和数据。（使用 JavaScript 打开文件对话框）现在我只将数据附加到文本区域，但它会极大地减慢页面速度。

我没有找到任何东西可以提供能够下载的生成数据。-> 将其存储在变量中？

我读过 JavaScript 无法写入用户文件系统。但我只想提供要下载的数据或右键单击-另存为。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T11:45:26.093

新的谷歌地图在获取 GPS 坐标本身时有点棘手。

不久前，我编写了一个网络应用程序，它接受指向 Google 地图方向的链接并将其转换为 gpx 文件或 JSON。

[https://mapstogpx.com](https://mapstogpx.com)

也许它会有用。

# java - 如何制作后台线程以在 android 画廊小部件中加载图像

> ID：13650179
> 
> 赞同：0
> 
> 时间：2012-11-30T17:31:48.000
> 
> 标签：java, android, multithreading

我想从 URL 读取图像并将其显示在 android 图库小部件中。

所以我在 onCreate() 方法中写了下面的代码。

```
 list = GuideDAO.getAllImages(businessId);

        Gallery g = (Gallery) findViewById(R.id.gallery);
        g.setSpacing(2);

        // Set the adapter to our custom adapter (below)
        if(list.size() > 0)
        {
            g.setAdapter(new ImageAdapter(this,list));
        } 
```

这是我的图像适配器

```
public class ImageAdapter extends BaseAdapter {
       List<Images> glist = null;
       private String url;
        public ImageAdapter(Context c,List<Images> lst) {
            mContext = c;
            glist = lst;
            int i=0;
            for (Images id : glist) {
                 url = id.getImageURL(); // Getting URL
                 InputStream inStream = null;
                    if (url.startsWith("http")) {

                        url = url.replace(" ", "%20");
                        HttpURLConnection conn;
                        try {
                             conn = (HttpURLConnection)new URL(url).openConnection();
                             conn.setDoInput(true);
                             conn.connect();
                             inStream = conn.getInputStream();
                        } catch (MalformedURLException e) {

                            e.printStackTrace();
                        } catch (IOException e) {

                            e.printStackTrace();
                        }

                    } else {
                        try {
                            inStream = new FileInputStream(url);
                        } catch (FileNotFoundException e) {

                            e.printStackTrace();
                        }
                    }

                     BitmapFactory.Options options = new BitmapFactory.Options();
                     options.inPreferredConfig = Bitmap.Config.RGB_565;
                     options.inPurgeable = true;
                     Bitmap b = BitmapFactory.decodeStream(inStream, null, options);

                     mImageCollection[i]=b;

                i++;
            }
        }

        public int getCount() {
            return mImageIds.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            ImageView i = new ImageView(mContext);

            i.setImageBitmap(mImageCollection[position]);
            i.setScaleType(ImageView.ScaleType.FIT_XY);
            i.setLayoutParams(new Gallery.LayoutParams(136, 88));
            return i;
        }

        private Context mContext;
        private String[] mImageURLs = {};
        private Bitmap[] mImageCollection = {};

    } 
```

这抛出错误，因为它不在线程中。如何更改此代码以便在后台加载 URL 读取和图像？

所以我通过使用处理后台线程和缓存的 SmartImageView 更改了我的 ImageAdapter。

```
public class ImageAdapter extends BaseAdapter {
       List<ImageGallery> glist = null;
       private String url;
        public ImageAdapter(Context c,List<ImageGallery> lst) {
            mContext = c;
            glist = lst;
            int i=0;
            al = new ArrayList<String>(); 
            for (ImageGallery id : glist) {

                al.add(id.getImageURL());

            }   
        }

        public int getCount() {
            return mImageIds.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
           Log.d("deepak", "getview gallery");
            SmartImageView i = new SmartImageView(mContext);
            i.setImageUrl(al.get(position));
            i.setScaleType(ImageView.ScaleType.FIT_XY);
            i.setLayoutParams(new Gallery.LayoutParams(136, 88));
            return i;
        }

        private Context mContext;
        private String[] mImageURLs = {};
        private ArrayList<String> al; 
        private Bitmap[] mImageCollection = {};
        private Integer[] mImageIds = {};

    } 
```

但是我的 getView() 现在没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:40:17.800

您可以使用智能图像视图。SmartImageView 是 Android 标准 ImageView 的替代品，它还允许从 URL 或用户的联系人地址簿加载图像。图像缓存到内存和磁盘以实现超快速加载。请参阅以下链接以获取更多信息[https://github.com/loopj/android-smart-image-view](https://github.com/loopj/android-smart-image-view)。希望这可以帮助您完成您的任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:30:04.163

我建议编写一个 AsyncImageLoader 类并让它处理从 http 下载的图像。这样，您可以在单独的线程上缓存和管理所有内容，并在加载完成后将图像设置为视图。如果你想在其他地方下载图像，你也可以在整个应用程序中使用这个类。

你可以`mImageLoader.loadImage(myImageView, Url)`在你的适配器中调用类似的东西，一旦完成加载它就会把它放进去。

如果您想了解更多详细信息，请告诉我:)

# jquery - 移动滑块后 n 秒后做某事

> ID：13650185
> 
> 赞同：0
> 
> 时间：2012-11-30T17:32:04.523
> 
> 标签：jquery, delay, jquery-ui-slider

我想延迟处理滑块的值。所以如果我用滑块移动到 X 位置，我想让 jquery 函数在 n 秒后做一些事情。如果我再次在这 4 秒之间做某事 - 从头开始​​计时。

```
$('#slider1').slider({
      min: 0,
      max: diff,
      range: true,
      values: [diff-2 , diff],

      slide: function(event, ui) {
      },
      change: function(event, ui) {
         // n SECONDS after changing slider's value do something...
      }); 
```

我发现：

> $.throttle();

但它不起作用，或者我不知道如何使用它。

尝试添加到函数成功，像这样，但没有运气：

```
change: function(event, ui) {
     $.throttle( 4000, console.log('this should show after 4 seconds...') );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:36:25.240

你想让它在停止拖动 4 秒后“做某事”吗？

如果是这样，你想要一个*去抖动*功能。[Underscore.js 有一个很好的](http://underscorejs.org/#debounce)

Debounce 表示在事件停止发生后的某个时间执行函数。如果您在时间结束之前更改值，则计时器将重置。当您有大量事件时，这非常有用，并且只想用该洪水的设计最终值做一些事情。

```
var doSomething = function() { alert('hello!') };
doSomething = _.debounce(doSomething, 4000);

$('#slider1').slider({
  min: 0,
  max: diff,
  range: true,
  values: [diff-2 , diff],

  slide: function(event, ui) {
  },
  change: function(event, ui) {
    doSomething();
  });
}); 
```

* * *

另一个简单的去抖动示例：http: [//jsfiddle.net/bTzTW/](http://jsfiddle.net/bTzTW/)

```
var doSomething = function() {
    alert('fired debounced callback');
};
doSomething = _.debounce(doSomething, 4000);

$('#slider').change(doSomething);
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:37:32.537

使用内置的javascript`setTimeout()`并重置更改超时应该可以解决问题：

```
var timeout; // define somewhere in outer scope

change: function(event, ui) {
    clearTimeout(timeout);
    timeout = setTimeout("console.log('this should show after 4 seconds...')", 4000);
}); 
```

或者

```
var timeout;

change: function(event, ui) {
    clearTimeout(timeout);
    timeout = setTimeout(function() {
        // more complex code
    }, 4000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:09:08.980

去抖应该应用于整个功能......

```
$('#slider1').slider({
      min: 0,
      max: diff,
      range: true,
      values: [diff-2 , diff],

      slide: function(event, ui) {
      },
      change: _.debounce(function(event, ui) {
         console.log('just after four seconds');
         // now it works
      },4000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:36:16.490

如果您不死心使用`throttle`，则`setTimeout()`可以正常工作。

所以你会有：

```
change: function(event, ui) {
     setTimeout( function(){console.log('this should show after 4 seconds...')},4000 );
}); 
```

# wcf - 在反序列化数据合约代理中注入服务

> ID：13650186
> 
> 赞同：0
> 
> 时间：2012-11-30T17:32:18.717
> 
> 标签：wcf, autofac

我在项目中使用 Autofac 和 WCF 集成。我试图找出一种延迟初始化数据协定代理集合属性的方法，以避免通过网络传输整个对象图。

我目前的计划是在每个反序列化数据合约中注入 WCF 服务，以便他们调用该服务，获取集合属性数据并对其进行初始化。

我的问题是：有没有办法告诉 Autofac 在客户端反序列化的每个数据合约代理中注入服务？就像一些调整`DataContractSerializer`或什么的。

（没有服务定位器，请...）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:12:40.887

Unfortunately there is nothing like this available "out of the box" with Autofac. There is something similar in Autofac's MVC integration, but that's because MVC has a more specific integration point for that sort of thing (`IActionInvoker`).

You might be able to write a custom client-side behavior that intercepts certain known types (like collections) on the client and swaps in a lazy-initialized collection. [There's a similar question here asking about how to swap the `DataContractSerializer` out at runtime.](https://stackoverflow.com/questions/1971743/custom-wcf-datacontractserializer) You could use a mechanism like that.

# python - 试图在 python 中附加一个 jar 文件失败

> ID：13650189
> 
> 赞同：1
> 
> 时间：2012-11-30T17:32:25.487
> 
> 标签：python, jar, append

我正在尝试使用 python 将文件附加到 .jar 文件，但我一直遇到一个错误，指出找不到主类：jar。

```
def add_to_jar():
    jarfile = "jarfile.jar"
    skin_image= Skin_Name.text() #this stores the full path to to file to be appended
    cmd = 'java jar uf ' + jarfile + " " + skin_image
    proc = subprocess.Popen(cmd, shell=True) 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:35:43.167

这听起来像是 java 解释器的类路径的问题，它通常被定义为环境变量。你需要跑`jar`过去`java`吗？通常`jar`作为二进制命令自行安装。如果您将其更改为，它是否有效

```
cmd = 'jar uf ' + jarfile + " " + skin_image 
```

# javascript - 谷歌图表编号格式

> ID：13650191
> 
> 赞同：10
> 
> 时间：2012-11-30T17:32:35.177
> 
> 标签：javascript, google-visualization

当您将鼠标悬停在图表上时，我需要格式化我的饼图和柱形图以以货币格式（$###，###）显示 $ 和逗号。现在，它正在显示数字和百分比，但数字为#####.## 这是我的代码。任何帮助，将不胜感激。

```
// Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      var formatter = new google.visualization.NumberFormat({
            prefix: '$'
        });
        formatter.format(data, 1);

        var options = {
            pieSliceText: 'value'
        };

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
     function drawChart() {

                    // REVENUE CHART - Create the data table.
        var data4 = new google.visualization.DataTable();
        data4.addColumn('string', 'Status');
        data4.addColumn('number', 'In Thousands');
        data4.addRows([
          ['Net tution & Fees', 213.818],
          ['Auxiliaries', 30.577],
          ['Government grants/contracts', 39.436],
          ['Private grants/gifts', 39.436],
          ['Investments', 10.083],
          ['Clinics', 14.353],
          ['Other', 5.337]
        ]);

                    // EXPENSES CHART - Create the data table.
        var data5 = new google.visualization.DataTable();
        data5.addColumn('string', 'Status');
        data5.addColumn('number', 'Amount');
        data5.addRows([
          ['Instruction', 133.868],
          ['Sponsored Progams', 34.940],
          ['Auxiliaries', 30.064],
          ['Academic Support', 25.529],
          ['Depreciation & amortization', 18.548],
          ['Student Services', 22.626],
          ['Plant operations & maintenance', 18.105],
          ['Fundraising', 13.258],
          ['Geneal Administration', 11.628],
          ['Interest', 6.846],
          ['Student Aid', 1.886],
        ]);

                    // ENDOWMENT CHART - Create the data table.
        var data6 = new google.visualization.DataTable();
        data6.addColumn('string', 'Status');
        data6.addColumn('number', 'In Millions');
        data6.addRows([
          ['2010', 178.7],
          ['2011', 211.693],
          ['2012', 199.3]
        ]);

        // Set REVENUE chart options
        var options4 = {
                        is3D: true,
                        fontName: 'Arial',
                        colors:['#AFD8F8', '#F6BD0F', '#8BBA00', '#FF8E46', '#008E8E', '#CCCCCC', '#D64646', '#8E468E'],
                        'title':'',
                       'width':550,
                       'height':250};              
        // Set EXPENSES chart options
        var options5 = {
                        is3D: true,
                        fontName: 'Arial',
                        colors:['#AFD8F8', '#F6BD0F', '#8BBA00', '#FF8E46', '#008E8E', '#CCCCCC', '#D64646', '#8E468E'],
                        'title':'',
                       'width':550,
                       'height':250};
        // Set ENDOWMENT chart options
        var options6 = {
                        is3D: true,
                        fontName: 'Arial',
                        colors:['#AFD8F8', '#F6BD0F', '#8BBA00', '#FF8E46', '#008E8E', '#CCCCCC', '#D64646', '#8E468E'],
                        'title':'',
                       'width':450,
                       'height':250};

        // Instantiate and draw our chart, passing in some options.
        var chart4 = new google.visualization.PieChart(document.getElementById('chart_div4'));
        chart4.draw(data4, options4);
        var chart5 = new google.visualization.PieChart(document.getElementById('chart_div5'));
        chart5.draw(data5, options5);
        var chart6 = new google.visualization.ColumnChart(document.getElementById('chart_div6'));
        chart6.draw(data6, options6);} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-30T21:28:08.403

你需要改变：

```
 var formatter = new google.visualization.NumberFormat(
      {negativeColor: 'red', negativeParens: true, pattern: '$###,###'});
   formatter.format(data, 1); 
```

代替：

```
 var formatter = new google.visualization.NumberFormat({
        prefix: '$'
    }); 
```

编辑：看看这个[活生生的例子](http://jsfiddle.net/BrOSs/wL6Et/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T08:45:48.573

NumberFormat 仅用于简单的格式化。如果你想要的不仅仅是格式化，比如你想在上面放另一个文本、图像，甚至另一个图表，你应该看看这个惊人的技巧！谷歌**工具提示**。[这里](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content)

# ios - 如何在您的 iOS 应用收到新评分或评论时收到通知

> ID：13650194
> 
> 赞同：6
> 
> 时间：2012-11-30T17:32:52.890
> 
> 标签：ios, app-store

当我的 iOS 应用在 AppStore 中收到新的评分或评论时，我想收到某种通知。iTC Mobile 应用程序无法在添加新评级时提供接收通知的方法。

对于我的 Android 应用程序，我使用 Andlytics，它会在添加新评论或评分时显示通知 - 是否有任何人知道 iOS 的类似内容？

我不在乎它是对我的 iPhone 的推送通知、电子邮件、短信还是其他东西——我只是在寻找一种在此事件发生时得到通知的方法。

**编辑：**

我终于找到了完美的解决方案：LaunchKit w/slack integration。每次出现新的 iOS 评论时，我都会收到一条消息，这很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:04:33.300

我发现 App Annie 每天分发的邮件很好地汇总了销售数据和用户评论。 [http://www.appannie.com](http://www.appannie.com)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T18:53:05.657

我一直在使用[https://appbot.co](https://appbot.co)，它每天都会发送包含来自所有国家/地区的评论的电子邮件。一直工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T21:10:37.417

获取应用程序状态的另一个重要资源。 [https://github.com/mattlawer/appstat.git](https://github.com/mattlawer/appstat.git)

看看用法，挺爽的。无需注册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T14:21:39.700

无需使用 3rd 方服务。Apple 提供 RSS 提要：[应用商店中是否有用于 iOS 应用评论的 RSS 提要？](https://stackoverflow.com/questions/5891466/are-there-rss-feeds-for-ios-apps-reviews-on-the-app-store/14923036#14923036)

# java - 使用哪种模式来解析 2012-10-05T14:33:24.935Z

> ID：13650201
> 
> 赞同：-3
> 
> 时间：2012-11-30T17:33:18.747
> 
> 标签：java, android

我应该使用什么模式将`2012-10-05T14:33:24.935Z`String 解析为`SimpleDateFormat`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:35:05.537

这应该工作`yyyy-MM-dd'T'HH:mm:ss.SSSZ`

# c# - 实现gridview行点击事件的有效方法？

> ID：13650202
> 
> 赞同：2
> 
> 时间：2012-11-30T17:33:21.557
> 
> 标签：c#, asp.net, performance, gridview, postback

**我想做的事：**

我想实现一个gridview，用户可以在其中选择行并将所选行中单元格的文本显示在要编辑的页面上的多个文本框中。我还希望根据所选行中的文本更新图像。

**我现在是怎么做的：**

目前，我正在使用在[此处](http://aspadvice.com/blogs/joteke/archive/2006/01/07/14576.aspx "这里")找到的自定义可点击 gridview 控件。本质上，自定义控件会在单击行中的任意位置时导致回发，并提供一个“OnRowClicked”事件，我可以附加一个事件处理函数。在这个函数中，我将 rowindex 保存在视图状态中，然后使用如下代码：

```
protected void GridViewClicked(object sender, GridViewRowClickedEventArgs e){
    TextBox1.Text = System.Net.WebUtility.HtmlDecode(e.Row.Cells[0].Text);
} 
```

在文本框和代码中填充文本，如：

```
string filepath = "~/Bitmaps/" + TextBox1.Text + ".bmp";
    if (File.Exists(Server.MapPath(filepath)))
    {
        bitmap.ImageUrl = filepath;
    }
    else
    {
        bitmap.ImageUrl = "~/Bitmaps/NoImage.bmp";
    } 
```

根据单击的行更新我网页上的图像（最大大小 500kb）。

**所以有什么问题？**

好吧，一切都在正常运行。但是，问题是每次单击行在鼠标单击发生和字段/图像更新（约 0.5 秒）之间都有明显的延迟，这很烦人。但是，我不知道我可以做些什么来提高性能，或者即使这是代码或托管服务的问题。因此，我要问的是，所经历的延迟是可以修复的，还是我必须处理的？或者也许我以一种非常低效的方式实现了这个解决方案？任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:50:58.607

这个网格是 Ajax 控件吗？如果不是，则延迟可能只是您为每次点击发回。对于每个回发，网格需要重新生成所有 HTML 并将其发回，然后浏览器必须呈现它。这是很多活动！

您可以研究减少必须发送的数据量的方法，例如关闭某些控件的视图状态。或者，您可以查看 Ajax 解决方案。您在服务器端唯一需要做的就是检查图像是否存在：其他一切都可以在 Javascript 中完成。检查文件是否存在的 Ajax 调用在性能方面不会非常昂贵，并且编写起来也相对简单。

一条经验法则（如果您是高级编码人员并且已经知道这一点，我深表歉意）：需要的响应越快，您想要进行的回发和对服务器的调用就越少，您想要发送的数据就越少来回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:41:10.687

我认为单击的 gridview 行正在正常工作，并且您正在调用正确的函数。我认为是你的 File.IsFileExists 函数需要时间。一切都需要发回。我认为这是您的文件检查功能。也许缓存文件名或将其保存在数据库中。也许在数据库上做索引。我认为文件检查正在遍历所有文件。换句话说，Gridview 行单击速度很快，无需代码。

# xcode - 我的自定义音频单元在 AU Lab 中打开，但在 Garageband 或 Ableton 中没有打开

> ID：13650203
> 
> 赞同：2
> 
> 时间：2012-11-30T17:33:35.457
> 
> 标签：xcode, plugins, core-audio, audiounit

我在 Xcode 中为我正在学习的信号类创建了一个过滤器 AU，我可以在 AU Lab 中从我的组件文件夹中打开它，但我似乎无法在 DAW 中打开它。任何人都可以帮助我了解这一点吗？它可能是 .plist 文件中的设置吗？代码中没有错误，因为 AU 在 AU 实验室中完美运行。如果有人有想法帮助将不胜感激，我可以提供您可能需要的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T17:31:23.753

我进行了我在评论中提到的调查，因此我现在正在写一个真正的答案。

我证实了我的怀疑。如果您没有遇到 32/64 位构建模式的问题（就像其他人所说的那样），您可能会遇到与我相同的问题。

GarageBand 和 Mainstage（可能是其他人）不读取 `AudioComponents`捆绑包 plist 的键的键。他们只阅读已弃用的蹩脚碳资源。

我有一个证明（至少在我的系统上：Lion，GarageBand 6.0.5）：

*   我下载的大部分 AU 只提供了 Carbon 资源，并且在他们的 plist 中没有`AudioComponents`密钥（因为这是在 Lion 之前要走的路，只有像我这样的菜鸟会忽略这个事实）
*   一旦我将 Carbon 资源正确添加到我的单元中，它就会开始出现在 GarageBand 和 MainStage 中（youhou！）

如果您从 TremoloUnit 或 Apple 提供的其他项目的副本开始您的项目，您必须修复它们，因为他们的项目被搞砸了。显然，维护它们的可怜的灵魂和我一样对 AudioUnit 编程一无所知，他相信（就像我一样）那些来自黑暗时代的可怕 Carbon*东西*现在必须完全弃用，并且他从构建阶段取消了对它们的检查。由于生成的 AU 很好地加载`AU Lab`并验证了罚款，`auval`他很高兴并致力于他的工作。

要修复项目，您必须将资源源文件（以 结尾的文件`.r`）添加到构建阶段（它已经在项目中）。如果您从文件检查器中单击它，XCode 会（从文件扩展名）确定您要构建可怕的碳资源。*在那之后，由于Rez 搜索路径*错误，您肯定会遇到难以理解的构建失败。您还必须仔细检查该`.r`文件描述的内容与您的相同，`AudioComponents`因为 Apple 的示例项目 AUPinkNoise 在该主题上被破坏（子类型的 4 个字母代码在 plist 和 .r 资源源之间不匹配）

恭喜 Apple 构建了一个验证工具，它忽略了大多数 Apple 产品当前如何加载 AudioUnit。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-17T20:32:47.103

[这篇 All Things Arcane 文章](http://allthingsarcane.blogspot.com/2012/04/of-audio-units-and-xcode-43.html "这篇 All Things Arcane 文章")是一个很好的起点。

此外，对于来自 Apple 的 xcode 5.x 和现在的 (2015-05) 示例，还有一些额外的步骤可能也会有所帮助：

1\. 在“构建设置，Apple LLVM - 预处理”中添加预处理器宏“CA_USE_AUDIO_PLUGIN_ONLY=0”这使您能够在 .r 文件和 .exp 文件中使用旧样式入口点（允许您添加 _SinSynthEntry 和 _SinSynthFactory）

2\. 删除并重新添加“AUDispatch.cpp”和“AUDispatch.h”到您的项目（这是为了解决缺少的“CMgr_AudioUnitBase ...”链接引用）

3\. 如果您正在为 OS X 10.8 或更早版本构建，则必须修改 Apple 的 AUBase.cpp 以划分出 kAudioUnitProperty_NickName，它是在 10.9 中添加的，基于 OS 有条件地编译X 版。一个例子：

```
#if (MAC_OS_X_VERSION_MIN_REQUIRED > MAC_OS_X_VERSION_10_8) //加我！
    案例 kAudioUnitProperty_NickName：
        ca_require(inScope == kAudioUnitScope_Global, InvalidScope);
        outDataSize = sizeof(CFStringRef);
        可写=真；
        休息;
#endif //加我！

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:00:40.950

正如@admsyn 建议的那样，问题很可能是您正在构建一个 64 位插件，Xcode 默认会为您完成。您应该构建 32/64 位通用二进制文件（在调试*和*发布版本中），或者只构建 32 位。

此外，它可能有助于运行`auval -v`验证 AU，以确保没有问题。

# xcode - 没有互联网连接 xcode 警报视图

> ID：13650211
> 
> 赞同：1
> 
> 时间：2012-11-30T17:34:05.897
> 
> 标签：xcode, ios6

我是应用程序开发的新手，并且制作了一个使用多个视图控制器和 uiwebviews 的应用程序。我想在 iphone 未连接到互联网时添加警报视图。我尝试过实现不同的代码，但不会弹出警报视图。

这是我的代码。

```
//
//  ViewControllersocialgo.h
//  GO!SocialMedia
//
//  Created by Adam Rais on 28/11/2012.
//  Copyright (c) 2012 SocialGO. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "Reachability.h"

@interface ViewControllersocialgo : UIViewController <UIWebViewDelegate>
@property (strong, nonatomic) IBOutlet UIWebView *socialgo;

@end 
```

和 ViewControllerpractical.m

```
//
//  ViewControllerpractical.m
//  GO!SocialMedia
//
//  Created by Adam Rais on 28/11/2012.
//  Copyright (c) 2012 SocialGO. All rights reserved.
//

#import "ViewControllersocialgo.h"
#import <sys/socket.h>
#import <netinet/in.h>
#import <SystemConfiguration/SystemConfiguration.h>

@interface ViewControllersocialgo ()

@end

@implementation ViewControllersocialgo

-(BOOL) isInternetAvailable {
    struct sockaddr_in zeroAddress;
    bzero(&zeroAddress, sizeof(zeroAddress));
    zeroAddress.sin_len = sizeof(zeroAddress);
    zeroAddress.sin_family = AF_INET;

    SCNetworkReachabilityRef reachability =        SCNetworkReachabilityCreateWithAddress(kCFAllocatorDefault, (const struct     sockaddr*)&zeroAddress);
if(reachability != NULL) {
    //NetworkStatus retVal = NotReachable;
    SCNetworkReachabilityFlags flags;
    if (SCNetworkReachabilityGetFlags(reachability, &flags)) {
        if ((flags & kSCNetworkReachabilityFlagsReachable) == 0)
        {
            // if target host is not reachable
            return NO;
        }

        if ((flags & kSCNetworkReachabilityFlagsConnectionRequired) == 0)
        {
            // if target host is reachable and no connection is required
            //  then we'll assume (for now) that your on Wi-Fi
            return YES;
        }

        if ((((flags & kSCNetworkReachabilityFlagsConnectionOnDemand ) != 0) ||
             (flags & kSCNetworkReachabilityFlagsConnectionOnTraffic) != 0))
        {
            // ... and the connection is on-demand (or on-traffic) if the
            //     calling application is using the CFSocketStream or higher APIs

            if ((flags & kSCNetworkReachabilityFlagsInterventionRequired) == 0)
            {
                // ... and no [user] intervention is needed
                return YES;
            }
        }

        if ((flags & kSCNetworkReachabilityFlagsIsWWAN) ==     kSCNetworkReachabilityFlagsIsWWAN)
        {
            // ... but WWAN connections are OK if the calling application
            //     is using the CFNetwork (CFSocketStream?) APIs.
            return YES;
        }
    }
}

return NO;

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
[_socialgo setDelegate:self];
NSString *fullURL=@"http://adam182testing.comoj.com/socialgo.html";
NSURL *url=[NSURL URLWithString:fullURL];
NSURLRequest *requestOBJ=[NSURLRequest requestWithURL:url];
[_socialgo loadRequest:requestOBJ];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:22:42.613

不要等待错误告诉用户他没有互联网连接。使用 Apple 自己的方法来检测连接性 - [Apple 示例项目](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)或使用 ARC 的[此版本。](https://github.com/tonymillion/Reachability)如果用户失去连接，它会立即告诉您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:03:39.310

你的视图控制器必须实现`UIWebViewDelegate`，试试这个代码

视图控制器实用程序.h

```
//
//  ViewControllerpractical.h
//  GO!SocialMedia
//
//  Created by Adam Rais on 28/11/2012.
//  Copyright (c) 2012 SocialGO. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ViewControllerpractical : UIViewController <UIWebViewDelegate>
@property (strong, nonatomic) IBOutlet UIWebView *practical;

@end 
```

ViewControllerpractical.m

```
//
//  ViewControllerpractical.m
//  GO!SocialMedia
//
//  Created by Adam Rais on 28/11/2012.
//  Copyright (c) 2012 SocialGO. All rights reserved.
//

#import "ViewControllerpractical.h"

@interface ViewControllerpractical ()

@end

@implementation ViewControllerpractical

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                message:@"Can't connect. Please check your internet Connection"
                                               delegate:self
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil];
[alert show];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
[_practical setDelegate:self];
NSString *fullURL=@"http://adam182testing.comoj.com/practical.html";
NSURL *url=[NSURL URLWithString:fullURL];
NSURLRequest *requestOBJ=[NSURLRequest requestWithURL:url];
[_practical loadRequest:requestOBJ];
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

无论如何，正如 Eli Ganem 所说，使用可达性更好。

我在我的项目中使用这个功能：

```
-(BOOL) isInternetAvailable {
    struct sockaddr_in zeroAddress;
    bzero(&zeroAddress, sizeof(zeroAddress));
    zeroAddress.sin_len = sizeof(zeroAddress);
    zeroAddress.sin_family = AF_INET;

    SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithAddress(kCFAllocatorDefault, (const struct sockaddr*)&zeroAddress);
    if(reachability != NULL) {
        //NetworkStatus retVal = NotReachable;
        SCNetworkReachabilityFlags flags;
        if (SCNetworkReachabilityGetFlags(reachability, &flags)) {
            if ((flags & kSCNetworkReachabilityFlagsReachable) == 0)
            {
                // if target host is not reachable
                return NO;
            }

            if ((flags & kSCNetworkReachabilityFlagsConnectionRequired) == 0)
            {
                // if target host is reachable and no connection is required
                //  then we'll assume (for now) that your on Wi-Fi
                return YES;
            }

            if ((((flags & kSCNetworkReachabilityFlagsConnectionOnDemand ) != 0) ||
                 (flags & kSCNetworkReachabilityFlagsConnectionOnTraffic) != 0))
            {
                // ... and the connection is on-demand (or on-traffic) if the
                //     calling application is using the CFSocketStream or higher APIs

                if ((flags & kSCNetworkReachabilityFlagsInterventionRequired) == 0)
                {
                    // ... and no [user] intervention is needed
                    return YES;
                }
            }

            if ((flags & kSCNetworkReachabilityFlagsIsWWAN) == kSCNetworkReachabilityFlagsIsWWAN)
            {
                // ... but WWAN connections are OK if the calling application
                //     is using the CFNetwork (CFSocketStream?) APIs.
                return YES;
            }
        }
    }

    return NO;

} 
```

# sql-server - xml 列如何存储在 SQL Server 2008 中？

> ID：13650212
> 
> 赞同：8
> 
> 时间：2012-11-30T17:34:10.437
> 
> 标签：sql-server, xml, sql-server-2008, xml-column

我试图了解 SQL Server 2008 如何存储 xml 列以尝试估计我们产品中的表大小。

我`DATALENGTH(xml_column)`用来运行一些测试，结果令人不安：

```
Xml document length | Datalength | Bytes per character
175                 | 366        | 2.09
15                  | 38         | 2.53
314                 | 414        | 1.31 
```

`nvarchar(max)`显然，正如我在某处读到的那样，xml 列类型并不是伪装的。

它可能已压缩并存储为二进制文件，但在任何地方都找不到。

有人可以解释一下 xml 列是如何存储在 SQL Server 2008 中的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T18:13:07.140

XML 列以“紧凑的二进制格式”存储。

我怀疑微软会给你更多的细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T08:01:47.407

[正如rene](https://stackoverflow.com/users/578411/rene)所指出的，SQL Server 2008 使用[MS-BINXML](http://msdn.microsoft.com/en-us/library/ee208875%28v=sql.105%29.aspx)（一种紧凑的二进制格式）来存储 xml 列的内容。

# python - 如何将 python datetime.datetime 转换为列表

> ID：13650214
> 
> 赞同：4
> 
> 时间：2012-11-30T17:34:14.803
> 
> 标签：python, datetime

我有一个 datetime.datetime 对象。我想做的就是把它的数据拉出来，放到一个列表中。我发现的唯一方法是：

```
date_list=list(my_dt_ob.timetuple()) 
```

这似乎是一种非常复杂的方式来做一个概念上简单的事情。有人有更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:40:25.540

日期和时间的每个部分都可用作`datetime`对象的属性。您可以直接使用它们：

```
date_list = [my_dt_ob.year, my_dt_ob.month, my_dt_ob.day, my_dt_ob.hour, my_dt_ob.minute, my_dt_ob.second] 
```

# mongodb - MongoDb 复合索引优化

> ID：13650215
> 
> 赞同：0
> 
> 时间：2012-11-30T17:34:16.770
> 
> 标签：mongodb

我正在尝试对需要非常高的写入吞吐量和合理的读取吞吐量的数据库进行建模。我有一组分布式系统将“事件”数据添加到数据库中。

目前，事件记录的 id 是 Guid。我一直在读到 guid 不倾向于创建很好的索引，因为它们的随机分布意味着最近的数据将分散在磁盘中，这可能会导致分页问题。

所以这是我要验证的第一个假设：我假设我不想选择创建正确平衡树的 _id，例如自动编号。这将是有益的，因为最近的 2 个事件在磁盘上基本上彼此相邻。这是一个正确的假设吗？

假设 (1) 是正确的，那么我正在尝试找出生成此类 id 的最佳方法。我知道 Mongo 本身就支持 ObjectId，这对于可以将数据绑定到 Mongo 的应用程序很方便，但我的应用程序不是这样。由于有多个系统产生数据，模拟“自动编号”字段有点问题，因为 mongo 不支持服务器端的自动编号，所以生产者必须分配 id，如果他们不这样做很难不知道其他系统在做什么。

为了解决这个问题，我正在考虑使 _id 字段成为 { localId, producerId } 上的复合键，其中本地 id 是生产者可以生成的自动编号，因为 producerId 将使其唯一。ProducerId 是我可以在生产者之间协商的东西，以便他们可以提出唯一的 ID。

所以这是我的下一个问题：如果我的目标是从所有生产者那里获取最新数据，那么 { localId, producerId } 应该是首选的键排序，因为 localId 将是右派，而 producerId 将是一个小集群，我宁愿两个最近的事件彼此保持本地。如果我颠倒该顺序，那么我对树最终外观的推理将类似于以下内容：

```
 root
        /        |           \
       p0        p1          p2
       /         |            \
     e0..n      e0..n        e0..n 
```

其中 p# 是生产者 ID，e# 是一个事件。这似乎会将我的索引分割成 p# 数据集群，并且新事件不一定彼此相邻。我对首选排序的假设应该（请验证）看起来像这样：

```
 root
      /          |          \
     e0          e1         e2
     /            |           \
  p0..n         p0..n        p0..n 
```

这似乎使最近的事件彼此靠近。（我知道 Mongo 使用 B 树作为索引，但我只是想在这里简化视觉效果）。

我可以看到对 { localId, producerId } 的唯一警告是，用户的常见查询是按生产者列出最近的事件，{ producerId, localId } 实际上会处理得更好。为了让这个查询与 { localId, producerId } 一起工作，我想我还需要将 producerId 作为一个字段添加到文档中，并为其编制索引。

为了明确我的问题到底是什么，我想知道我是否正确地考虑了这个问题，或者是否有明显更好的方法来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:01:11.503

回答您的问题：如果您只是按 b 查询然后按 a 排序，像这样的复合：{a,b} 将以分散查询结尾。但它将使用索引进行排序。

如果使用 Document 而不是 ObjectId，_id 将被索引但不使用，但它不是复合索引！

例子：

鉴于 Collection 'a' 中的此 Documents 且没有附加索引：

```
{ "_id" : { "e" : 1, "p" : 1 } }
{ "_id" : { "e" : 1, "p" : 2 } }
{ "_id" : { "e" : 2, "p" : 1 } }
{ "_id" : { "e" : 1, "p" : 3 } }
{ "_id" : { "e" : 2, "p" : 3 } }
{ "_id" : { "e" : 2, "p" : 2 } }
{ "_id" : { "e" : 3, "p" : 1 } }
{ "_id" : { "e" : 3, "p" : 2 } }
{ "_id" : { "e" : 3, "p" : 3 } } 
```

像这样的查询：

```
db.a.find({'_id.p' : 2}).sort({'_id.e' : 1}).explain() 
```

不会使用索引：

```
{
    "cursor" : "BasicCursor",
    "nscanned" : 9,
    "nscannedObjects" : 9,
    "n" : 3,
    "scanAndOrder" : true,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {   
    }
} 
```

仅仅因为文档被索引。

如果您创建这样的索引：

```
db.a.ensureIndex({'_id.e' : 1, '_id.p' : 1}) 
```

然后再次查询：

```
db.a.find({'_id.p' : 2}).sort({'_id.e' : 1}).explain()

{
    "cursor" : "BtreeCursor _id.e_1__id.p_1",
    "nscanned" : 9,
    "nscannedObjects" : 3,
    "n" : 3,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "_id.e" : [
            [
                {
                    "$minElement" : 1
                },
                {
                    "$maxElement" : 1
                }
            ]
        ],
        "_id.p" : [
            [
                2,
                2
            ]
        ]
    }
} 
```

由于排序，它将查询索引（nscanned：9），然后获取对象：3，这比按 _id 排序（nscanned 和 nscannedObjects 为 9）要好。

[文档 .explain()](http://www.mongodb.org/display/DOCS/Explain)

因此，对于高写入吞吐量（每秒超过 15k 次写入），您可能会分片。如果设置了选项，两个索引都将保证唯一性。但是只有复合分片键可以帮助您进行直接查询，而不是分散收集。

使用 ({'_id.e' : 1, '_id.p' : 1}) 作为分片键将直接路由所有“_id.e”查询，而不是“_id.p”（没有“e”）查询，所以这些查询将发送到每个主机并以索引查找结束，但也可能很快（取决于网络等）。如果您想通过“p”对这些查询进行聚类，则必须将“_id.p”作为复合键的第一部分，如下所示：

```
{'_id.p' : 1, '_id.e' : 1} 
```

所以所有“p”查询都是直接查询。但是，是的，这会将最近发生的事件分散到整个集群中。因此，使用基于时间的键的单独索引可能会加快这些分散查询。

我会生成一些示例数据，并在开发系统上使用两个分片的设置中使用它，并使用 .explain() 来选择分片键 + 索引。

# c# - SHA512 加密 + 加盐

> ID：13650216
> 
> 赞同：-2
> 
> 时间：2012-11-30T17:34:20.173
> 
> 标签：c#, hash, passwords

我正在开发 C# Visual Studio Windows 窗体应用程序。然而，我在开发过程中被卡住了一半。

我试图在用盐加密之前询问用户他/她的密码。我如何使用 SHA 512 加密我的密码文本，并在以后对其进行加盐和解密？对我该怎么做有什么建议吗？与其他加密方法相比，SHA 512 是否足够安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:40:59.550

SHA512**不是**一种加密形式，它是一种散列形式。散列是单向的——即它不能被解密。从哈希中找到值的唯一方法是彩虹表，至少可以说这不是一门精确的科学。

因此，在密码方面，SHA512 比加密方法更安全，因为您永远不会存储可以轻松解密的东西，而只是与之发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T20:37:14.383

1.  不，SHA512 对于密码处理来说不够安全。SHA512 速度很快，而密码处理需要很慢，以防止在数据库被黑客转储的情况下对密码进行暴力搜索。此类事件经常发生！
2.  你以后不要解密它。相反，当您从用户那里获得明文密码时，您将其与数据库中的盐进行哈希处理，并将结果与​​数据库中的编码哈希进行比较。如果匹配，则用户通过身份验证。
3.  [此处](https://www.troyhunt.com/our-password-hashing-has-no-clothes)提供了有关 SHA512/SHA256/SHA1/MD5/anything fast 的问题的信息，包括显示如何使用更合适的函数 (PBKDF2) 进行密码处理的 .Net 代码。
4.  [Crackstation.net](https://crackstation.net/hashing-security.htm)还提供了有关如何进行密码处理的体面教育，但并非特定于 .Net。确保特别阅读“使密码破解更难：慢散列函数”以了解为什么 SHA512 不合适。
5.  在很多地方有很多关于密码处理的坏建议。您应该检查那些提供建议的人的安全声誉，以便区分好坏参半。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T21:36:52.757

其他人说“SHA-512 不是加密”，但忽略了说你可以，以及你怎么能，实际上用它加密。如果您使用的是 RSACryptoServiceProvider 和非对称加密，则加密需要公钥（用于加密）和私钥（用于解密），如下所示。由于您可以创建基于 SHA512 的散列密钥，因此您可以对它们进行加密/解密。对于做盐，您可能会查看[http://www.obviex.com/samples/EncryptionWithSalt.aspx](http://www.obviex.com/samples/EncryptionWithSalt.aspx)。在这里我不赘述。

对于那些可能在下面抱怨这个答案并说“使用 PBKDF2”的人：

1.  我不知道这是什么。不要期望每个开发人员都知道，以及如何像您一样轻松地实现它。
2.  在我的工作环境中，我们有一个未连接到 Internet 的单独的开发人员网络，因此如果我的组织看不到源，它会使诸如 3rd 方库和 NuGet 包之类的东西难以获取、更新、使用和获得批准用于项目的代码。

不是每个环境都会有这些限制——但对于专家来说：不要假设你有一个万能的解决方案。数据库连接的服务帐户密码以加密形式存在于我们的 web.config 和 app.config 文件中——这是我回答这个问题的角度。它们不能是域帐户，这将允许您执行以下操作`Integrated Security=SSPI`或`webService.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;`. 不要假设这些只会在数据库中 - 大多数数据库实际上都有自己的加密算法来处理。对于某些连接和环境，开发者社区 - 克服自己！实际上，您可能必须提供密码并将其存储在某个地方才能让您的应用程序运行！猜猜 NIST 没有禁止这样做，或者它没有您可以满足的加密标准（鼓励使用 SHA512）来接听这个电话。

因此，我将整理我所做的一些研究，以展示您可以使用的几条路线，以了解如何使用使用 SHA-512 哈希创建的密钥来实现这一点，然后您可以对其进行加密/解密。您可以通过创建证书或让 RSACryptoServiceContainer 为您提供一个来生成 SHA-512 密钥。

**证书方式**

在命令行上使用这些行创建您的证书：

```
makecert -r -pe -n "CN=MyCertificate" -a sha512 -b 09/01/2016 -sky exchange C:\Temp\MyCertificate.cer -sv C:\Temp\MyCertificate.pvk
pvk2pfx.exe -pvk C:\Temp\MyCertificate.pvk -pi "MyP@ssw0rd" -spc C:\Temp\MyCertificate.cer -pfx C:\Temp\MyCertificate.pfx -po "MyP@ssw0rd" 
```

然后将证书导入本地根授权存储并使用以下代码：

```
string input = "test";
string output = string.Empty;

X509Store store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly);

X509Certificate2Collection collection = store.Certificates.Find(X509FindType.FindBySubjectName, "MyCertificate", false);

X509Certificate2 certificate = collection[0];

using (RSACryptoServiceProvider cps = (RSACryptoServiceProvider)certificate.PublicKey.Key)
{
    byte[] bytesData = Encoding.UTF8.GetBytes(input);
    byte[] bytesEncrypted = cps.Encrypt(bytesData, false);
    output = Convert.ToBase64String(bytesEncrypted);
}

store.Close(); 
```

**参考**：[https ://social.msdn.microsoft.com/Forums/en-US/69e39ad0-13c2-4b5e-bb1b-972a614813fd/encrypt-with-certificate-sha512?forum=csharpgeneral](https://social.msdn.microsoft.com/Forums/en-US/69e39ad0-13c2-4b5e-bb1b-972a614813fd/encrypt-with-certificate-sha512?forum=csharpgeneral)

**使用 RSACryptoServiceProvider 生成密钥**

```
private static string privateKey = String.Empty;

private static void generateKeys()
{
    int dwLen = 2048;
    RSACryptoServiceProvider csp = new RSACryptoServiceProvider(dwLen);
    privateKey = csp.ToXmlString(true).Replace("><",">\r\n");
}

public static string Encrypt(string data2Encrypt)
{
    try
    {
        generateKeys();
        RSAx rsax = new RSAx(privateKey, 2048);
        rsax.RSAxHashAlgorithm = RSAxParameters.RSAxHashAlgorithm.SHA512;
        byte[] CT = rsax.Encrypt(Encoding.UTF8.GetBytes(data2Encrypt), false, true); // first bool is for using private key (false forces to use public), 2nd is for using OAEP
        return Convert.ToBase64String(CT);
    }
    catch (Exception ex) 
    { 
        // handle exception
        MessageBox.Show("Error during encryption: " + ex.Message);
        return String.Empty;
    }
}

public static string Decrypt(string data2Decrypt)
{
    try
    {
        RSAx rsax = new RSAx(privateKey, 2048);
        rsax.RSAxHashAlgorithm = RSAxParameters.RSAxHashAlgorithm.SHA512;
        byte[] PT = rsax.Decrypt(Convert.FromBase64String(data2Decrypt), true, true); // first bool is for using private key, 2nd is for using OAEP
        return Encoding.UTF8.GetString(PT);
    }
    catch (Exception ex) 
    { 
        // handle exception
        MessageBox.Show("Error during encryption: " + ex.Message);
        return String.Empty;
    }
} 
```

这些方法使用一个名为**RSAx.DLL的 DLL，它是使用**[https://www.codeproject.com/Articles/421656/RSA-Library-with-Private-Key-Encryption-in-Csharp](https://www.codeproject.com/Articles/421656/RSA-Library-with-Private-Key-Encryption-in-Csharp)的源代码构建的，这不是我的（作者：Arpan Jati），但我已经使用过它，并且它在[CodeProject 的 Open Source License](https://www.codeproject.com/info/cpol10.aspx)下可供开发人员社区使用。您也可以只从该项目中引入 3 个类，而不是：RSAx.cs、RSAxParameters.cs、RSAxUtils.cs

该代码将使这篇文章超过 30000 个字符的限制，所以我将发布 RSAx，以便您了解发生了什么，但所有 3 个类都是必需的。您必须更改命名空间并引用 System.Numerics 程序集。

**RSAx.cs**

```
// @Date : 15th July 2012
// @Author : Arpan Jati (arpan4017@yahoo.com; arpan4017@gmail.com)
// @Library : ArpanTECH.RSAx
// @CodeProject: http://www.codeproject.com/Articles/421656/RSA-Library-with-Private-Key-Encryption-in-Csharp  

using System;
using System.Collections.Generic;
using System.Security.Cryptography;
using System.Numerics;
using System.Linq;
using System.Text;
using System.IO;

namespace ArpanTECH
{
    /// <summary>
    /// The main RSAx Class
    /// </summary>
    public class RSAx : IDisposable
    {
        private RSAxParameters rsaParams;
        private RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();

        /// <summary>
        /// Initialize the RSA class.
        /// </summary>
        /// <param name="rsaParams">Preallocated RSAxParameters containing the required keys.</param>
        public RSAx(RSAxParameters rsaParams)
        {
            this.rsaParams = rsaParams;
            UseCRTForPublicDecryption = true;
        }

        /// <summary>
        /// Initialize the RSA class from a XML KeyInfo string.
        /// </summary>
        /// <param name="keyInfo">XML Containing Key Information</param>
       /// <param name="ModulusSize">Length of RSA Modulus in bits.</param>
       public RSAx(String keyInfo, int ModulusSize)
       {
            this.rsaParams = RSAxUtils.GetRSAxParameters(keyInfo, ModulusSize);
            UseCRTForPublicDecryption = true;
        }

        /// <summary>
        /// Hash Algorithm to be used for OAEP encoding.
        /// </summary>
        public RSAxParameters.RSAxHashAlgorithm RSAxHashAlgorithm
        {
            set
            {
                rsaParams.HashAlgorithm = value;
            }
        }

        /// <summary>
        /// If True, and if the parameters are available, uses CRT for private key decryption. (Much Faster)
        /// </summary>
        public bool UseCRTForPublicDecryption
        {
            get;  set;
        }

        /// <summary>
        /// Releases all the resources.
        /// </summary>
        public void Dispose()
        {
            rsaParams.Dispose();
        }

        #region PRIVATE FUNCTIONS

        /// <summary>
        /// Low level RSA Process function for use with private key.
        /// Should never be used; Because without padding RSA is vulnerable to attacks.  Use with caution.
        /// </summary>
        /// <param name="PlainText">Data to encrypt. Length must be less than Modulus size in octets.</param>
        /// <param name="usePrivate">True to use Private key, else Public.</param>
        /// <returns>Encrypted Data</returns>
        public byte[] RSAProcess(byte[] PlainText, bool usePrivate)
        {

            if (usePrivate && (!rsaParams.Has_PRIVATE_Info))
            {
                throw new CryptographicException("RSA Process: Incomplete Private Key Info");
            }

            if ((usePrivate == false) && (!rsaParams.Has_PUBLIC_Info))
            {
                throw new CryptographicException("RSA Process: Incomplete Public Key Info");
            }            

            BigInteger _E;
            if (usePrivate)
                _E = rsaParams.D; 
            else
                _E = rsaParams.E;

            BigInteger PT = RSAxUtils.OS2IP(PlainText, false);
            BigInteger M = BigInteger.ModPow(PT, _E, rsaParams.N);

            if (M.Sign == -1)
                return RSAxUtils.I2OSP(M + rsaParams.N, rsaParams.OctetsInModulus, false);            
            else
                return RSAxUtils.I2OSP(M, rsaParams.OctetsInModulus, false);                   
        }

        /// <summary>
        /// Low level RSA Decryption function for use with private key. Uses CRT and is Much faster.
        /// Should never be used; Because without padding RSA is vulnerable to attacks. Use with caution.
        /// </summary>
        /// <param name="Data">Data to encrypt. Length must be less than Modulus size in octets.</param>
        /// <returns>Encrypted Data</returns>
        public byte[] RSADecryptPrivateCRT(byte[] Data)
        {
            if (rsaParams.Has_PRIVATE_Info && rsaParams.HasCRTInfo)
            {
                BigInteger C = RSAxUtils.OS2IP(Data, false);

                BigInteger M1 = BigInteger.ModPow(C, rsaParams.DP, rsaParams.P);
                BigInteger M2 = BigInteger.ModPow(C, rsaParams.DQ, rsaParams.Q);
                BigInteger H = ((M1 - M2) * rsaParams.InverseQ) % rsaParams.P;
                BigInteger M = (M2 + (rsaParams.Q * H));

                if (M.Sign == -1)
                    return RSAxUtils.I2OSP(M + rsaParams.N, rsaParams.OctetsInModulus, false);
                else
                    return RSAxUtils.I2OSP(M, rsaParams.OctetsInModulus, false); 
            }
            else
            {
                throw new CryptographicException("RSA Decrypt CRT: Incomplete Key Info");
            }                             
        }        

        private byte[] RSAProcessEncodePKCS(byte[] Message, bool usePrivate)
        {
            if (Message.Length > rsaParams.OctetsInModulus - 11)
            {
                throw new ArgumentException("Message too long.");
            }
            else
            {
                // RFC3447 : Page 24\. [RSAES-PKCS1-V1_5-ENCRYPT ((n, e), M)]
                // EM = 0x00 || 0x02 || PS || 0x00 || Msg 

                List<byte> PCKSv15_Msg = new List<byte>();

                PCKSv15_Msg.Add(0x00);
                PCKSv15_Msg.Add(0x02);

                int PaddingLength = rsaParams.OctetsInModulus - Message.Length - 3;

                byte[] PS = new byte[PaddingLength];
                rng.GetNonZeroBytes(PS);

                PCKSv15_Msg.AddRange(PS);
                PCKSv15_Msg.Add(0x00);

                PCKSv15_Msg.AddRange(Message);

                return RSAProcess(PCKSv15_Msg.ToArray() ,  usePrivate);
            }
        }

        /// <summary>
        /// Mask Generation Function
        /// </summary>
        /// <param name="Z">Initial pseudorandom Seed.</param>
        /// <param name="l">Length of output required.</param>
        /// <returns></returns>
        private byte[] MGF(byte[] Z, int l)
        {
            if (l > (Math.Pow(2, 32)))
            {
                throw new ArgumentException("Mask too long.");
            }
            else
            {
                List<byte> result = new List<byte>();
                for (int i = 0; i <= l / rsaParams.hLen; i++)
                {
                    List<byte> data = new List<byte>();
                    data.AddRange(Z);
                    data.AddRange(RSAxUtils.I2OSP(i, 4, false));
                    result.AddRange(rsaParams.ComputeHash(data.ToArray()));
                }

                if (l <= result.Count)
                {
                    return result.GetRange(0, l).ToArray();
                }
                else
                {
                    throw new ArgumentException("Invalid Mask Length.");
                }
            }
        }

        private byte[] RSAProcessEncodeOAEP(byte[] M, byte[] P, bool usePrivate)
        {
            //                           +----------+---------+-------+
            //                      DB = |  lHash   |    PS   |   M   |
            //                           +----------+---------+-------+
            //                                          |
            //                +----------+              V
            //                |   seed   |--> MGF ---> XOR
            //                +----------+              |
            //                      |                   |
            //             +--+     V                   |
            //             |00|    XOR <----- MGF <-----|
            //             +--+     |                   |
            //               |      |                   |
            //               V      V                   V
            //             +--+----------+----------------------------+
            //       EM =  |00|maskedSeed|          maskedDB          |
            //             +--+----------+----------------------------+

            int mLen = M.Length;
            if (mLen > rsaParams.OctetsInModulus - 2 * rsaParams.hLen - 2)
            {
                throw new ArgumentException("Message too long.");
            }
            else
            {
                byte[] PS = new byte[rsaParams.OctetsInModulus - mLen - 2 * rsaParams.hLen - 2];
                //4\. pHash = Hash(P),
                byte[] pHash = rsaParams.ComputeHash(P);

                //5\. DB = pHash||PS||01||M.
                List<byte> _DB = new List<byte>();
                _DB.AddRange(pHash);
                _DB.AddRange(PS);
                _DB.Add(0x01);
                _DB.AddRange(M);
                byte[] DB = _DB.ToArray();

                //6\. Generate a random octet string seed of length hLen.                
                byte[] seed = new byte[rsaParams.hLen];
                rng.GetBytes(seed);

                //7\. dbMask = MGF(seed, k - hLen -1).
                byte[] dbMask = MGF(seed, rsaParams.OctetsInModulus - rsaParams.hLen - 1);

                //8\. maskedDB = DB XOR dbMask
                byte[] maskedDB = RSAxUtils.XOR(DB, dbMask);

                //9\. seedMask = MGF(maskedDB, hLen)
                byte[] seedMask = MGF(maskedDB, rsaParams.hLen);

                //10\. maskedSeed = seed XOR seedMask.
                byte[] maskedSeed = RSAxUtils.XOR(seed, seedMask);

                //11\. EM = 0x00 || maskedSeed || maskedDB.
                List<byte> result = new List<byte>();
                result.Add(0x00);
                result.AddRange(maskedSeed);
                result.AddRange(maskedDB);

                return RSAProcess(result.ToArray(), usePrivate);
            }
        }

        private byte[] Decrypt(byte[] Message, byte [] Parameters, bool usePrivate, bool fOAEP)
        {
            byte[] EM = new byte[0];
            try
            {
                if ((usePrivate == true) && (UseCRTForPublicDecryption) && (rsaParams.HasCRTInfo))
                {
                    EM = RSADecryptPrivateCRT(Message);
                }
                else
                {
                    EM = RSAProcess(Message, usePrivate);
                }
            }
            catch (CryptographicException ex)
            {
                throw new CryptographicException("Exception while Decryption: " + ex.Message);
            }
            catch
            {
                throw new Exception("Exception while Decryption: ");
            }

            try
            {
                if (fOAEP) //DECODE OAEP
                {
                    if ((EM.Length == rsaParams.OctetsInModulus) && (EM.Length > (2 * rsaParams.hLen + 1)))
                    {
                        byte[] maskedSeed;
                        byte[] maskedDB;
                        byte[] pHash = rsaParams.ComputeHash(Parameters);
                        if (EM[0] == 0) // RFC3447 Format : http://tools.ietf.org/html/rfc3447
                        {
                            maskedSeed = EM.ToList().GetRange(1, rsaParams.hLen).ToArray();
                            maskedDB = EM.ToList().GetRange(1 + rsaParams.hLen, EM.Length - rsaParams.hLen - 1).ToArray();
                            byte[] seedMask = MGF(maskedDB, rsaParams.hLen);
                            byte[] seed = RSAxUtils.XOR(maskedSeed, seedMask);
                            byte[] dbMask = MGF(seed, rsaParams.OctetsInModulus - rsaParams.hLen - 1);
                            byte[] DB = RSAxUtils.XOR(maskedDB, dbMask);

                            if (DB.Length >= (rsaParams.hLen + 1))
                            {
                                byte[] _pHash = DB.ToList().GetRange(0, rsaParams.hLen).ToArray();
                                List<byte> PS_M = DB.ToList().GetRange(rsaParams.hLen, DB.Length - rsaParams.hLen);
                                int pos = PS_M.IndexOf(0x01);
                                if (pos >= 0 && (pos < PS_M.Count))
                                {
                                    List<byte> _01_M = PS_M.GetRange(pos, PS_M.Count - pos);
                                    byte[] M;
                                    if (_01_M.Count > 1)
                                    {
                                        M = _01_M.GetRange(1, _01_M.Count - 1).ToArray();
                                    }
                                    else
                                    {
                                        M = new byte[0];
                                    }
                                    bool success = true;
                                    for (int i = 0; i < rsaParams.hLen; i++)
                                    {
                                         if (_pHash[i] != pHash[i])
                                        {
                                            success = false;
                                            break;
                                        }
                                    }

                                    if (success)
                                    {
                                        return M;
                                    }
                                    else
                                    {
                                        M = new byte[rsaParams.OctetsInModulus]; //Hash Match Failure.
                                        throw new CryptographicException("OAEP Decode Error");
                                    }
                                }
                                else
                                {// #3: Invalid Encoded Message Length.
                                    throw new CryptographicException("OAEP Decode Error");
                                }
                            }
                            else
                            {// #2: Invalid Encoded Message Length.
                                throw new CryptographicException("OAEP Decode Error");
                            }
                        }
                        else // Standard : ftp://ftp.rsasecurity.com/pub/rsalabs/rsa_algorithm/rsa-oaep_spec.pdf
                        {//OAEP : THIS STADNARD IS NOT IMPLEMENTED
                            throw new CryptographicException("OAEP Decode Error");
                        }
                    }
                    else
                    {// #1: Invalid Encoded Message Length.
                        throw new CryptographicException("OAEP Decode Error");
                    }
                }
                else // DECODE PKCS v1.5
                {
                    if (EM.Length >= 11)
                    {
                        if ((EM[0] == 0x00) && (EM[1] == 0x02))
                        {
                            int startIndex = 2;
                            List<byte> PS = new List<byte>();
                            for (int i = startIndex; i < EM.Length; i++)
                            {
                                if (EM[i] != 0)
                                {
                                    PS.Add(EM[i]);
                                }
                                else
                                {
                                    break;
                                }
                            }

                            if (PS.Count >= 8)
                            {
                                int DecodedDataIndex = startIndex + PS.Count + 1;
                                if (DecodedDataIndex < (EM.Length - 1))
                                {
                                    List<byte> DATA = new List<byte>();
                                    for (int i = DecodedDataIndex; i < EM.Length; i++)
                                    {
                                        DATA.Add(EM[i]);
                                    }
                                    return DATA.ToArray();
                                }
                                else
                                {
                                    return new byte[0];
                                    //throw new CryptographicException("PKCS v1.5 Decode Error #4: No Data");
                                }
                            }
                            else
                            {// #3: Invalid Key / Invalid Random Data Length
                                throw new CryptographicException("PKCS v1.5 Decode Error");
                            }
                        }
                        else
                        {// #2: Invalid Key / Invalid Identifiers
                            throw new CryptographicException("PKCS v1.5 Decode Error");
                        }
                    }
                    else
                    {// #1: Invalid Key / PKCS Encoding
                        throw new CryptographicException("PKCS v1.5 Decode Error");
                    }

                }
            }
            catch (CryptographicException ex)
            {
                throw new CryptographicException("Exception while decoding: " + ex.Message);
            }
            catch
            {
                throw new CryptographicException("Exception while decoding");
            }

        }

        #endregion

        #region PUBLIC FUNCTIONS

        /// <summary>
        /// Encrypts the given message with RSA, performs OAEP Encoding.
        /// </summary>
        /// <param name="Message">Message to Encrypt. Maximum message length is (ModulusLengthInOctets - 2 * HashLengthInOctets - 2)</param>
        /// <param name="OAEP_Params">Optional OAEP parameters. Normally Empty. But, must match the parameters while decryption.</param>
        /// <param name="usePrivate">True to use Private key for encryption. False to use Public key.</param>
        /// <returns>Encrypted message.</returns>
        public byte[] Encrypt(byte[] Message, byte[] OAEP_Params, bool usePrivate)
        {
            return RSAProcessEncodeOAEP(Message, OAEP_Params, usePrivate);
        }

        /// <summary>
        /// Encrypts the given message with RSA.
        /// </summary>
        /// <param name="Message">Message to Encrypt. Maximum message length is For OAEP [ModulusLengthInOctets - (2 * HashLengthInOctets) - 2] and for PKCS [ModulusLengthInOctets - 11]</param>
        /// <param name="usePrivate">True to use Private key for encryption. False to use Public key.</param>
        /// <param name="fOAEP">True to use OAEP encoding (Recommended), False to use PKCS v1.5 Padding.</param>
        /// <returns>Encrypted message.</returns>
        public byte[] Encrypt(byte[] Message, bool usePrivate, bool fOAEP)
        {
            if (fOAEP)
            {
                return RSAProcessEncodeOAEP(Message, new byte[0], usePrivate);
            }
            else
            {
                return RSAProcessEncodePKCS(Message, usePrivate);
            }
        }

        /// <summary>
        /// Encrypts the given message using RSA Public Key.
        /// </summary>
        /// <param name="Message">Message to Encrypt. Maximum message length is For OAEP [ModulusLengthInOctets - (2 * HashLengthInOctets) - 2] and for PKCS [ModulusLengthInOctets - 11]</param>
        /// <param name="fOAEP">True to use OAEP encoding (Recommended), False to use PKCS v1.5 Padding.</param>
        /// <returns>Encrypted message.</returns>
        public byte[] Encrypt(byte[] Message,  bool fOAEP)
        {
            if (fOAEP)
            {
                return RSAProcessEncodeOAEP(Message, new byte[0], false);
            }
            else
            {
                return RSAProcessEncodePKCS(Message, false);
            }
        }

        /// <summary>
        /// Decrypts the given RSA encrypted message.
        /// </summary>
        /// <param name="Message">The encrypted message.</param>
        /// <param name="usePrivate">True to use Private key for decryption. False to use Public key.</param>
        /// <param name="fOAEP">True to use OAEP.</param>
        /// <returns>Encrypted byte array.</returns>
        public byte[] Decrypt(byte[] Message, bool usePrivate, bool fOAEP)
        {
            return Decrypt(Message, new byte[0], usePrivate, fOAEP);
        }

        /// <summary>
        /// Decrypts the given RSA encrypted message.
        /// </summary>
        /// <param name="Message">The encrypted message.</param>
        /// <param name="OAEP_Params">Parameters to the OAEP algorithm (Must match the parameter while Encryption).</param>
        /// <param name="usePrivate">True to use Private key for decryption. False to use Public key.</param>
        /// <returns>Decrypted byte array.</returns>
        public byte[] Decrypt(byte[] Message, byte[] OAEP_Params, bool usePrivate)
        {
            return Decrypt(Message, OAEP_Params, usePrivate, true);
        }

        /// <summary>
        /// Decrypts the given RSA encrypted message using Private key.
        /// </summary>
        /// <param name="Message">The encrypted message.</param>
        /// <param name="fOAEP">True to use OAEP.</param>
        /// <returns>Decrypted byte array.</returns>
        public byte[] Decrypt(byte[] Message,  bool fOAEP)
        {
            return Decrypt(Message, new byte[0], true, fOAEP);
        }
        #endregion
    }
} 
```

# jquery - 最后的 选择器不工作

> ID：13650224
> 
> 赞同：0
> 
> 时间：2012-11-30T17:34:54.290
> 
> 标签：jquery, html-lists

试图选择此列表中的最后一个 LI 并向其添加一个类 - 似乎无法使其工作？有什么想法我在这里有什么问题吗？

Baiscally 想要将类“noBottomBorder”添加到子导航列表中的最后一个 LI - 例如，在此示例中为“商业”，但不能硬编码，因为子导航列表是动态 CMS 控制的...

jQuery：

```
<script type="text/javascript">
$("ul.subNavWrapper li:last-child").addClass("noBottomBorder");
</script> 
```

HTML：

```
<div class="navWrapper">
<ul>
<li><a href="#.html" target="_self" title="Navigate to the Home page" class="navButton primaryLink01">Home</a></li>
<li><a href="#.html" target="_self" title="Navigate to the Our Approach page" class="navButton primaryLink02">Our Approach</a></li>
<li><a href="#.html" target="_self" title="Navigate to the The Process page" class="navButton primaryLink03">The Process</a></li>
<li><a href="#.html" target="_self" title="Navigate to the Examples of Work page" class="navButton primaryLink04">Examples of Work</a>

<ul class="subNavWrapper">
<li><a href="#.html" target="_self" title="Navigate to the The Extenstions page" class="subNavButton">Extenstions</a></li>
<li><a href="#.html" target="_self" title="Navigate to the The Refurbishments page" class="subNavButton">Refurbishments</a></li>
<li><a href="#.html" target="_self" title="Navigate to the The Kitchens page" class="subNavButton">Kitchens</a></li>
<li><a href="#.html" target="_self" title="Navigate to the The Bathrooms page" class="subNavButton">Bathrooms</a></li>
<li><a href="#.html" target="_self" title="Navigate to the The Bespoke Carpentry page" class="subNavButton">Bespoke Carpentry</a></li>
<li><a href="#.html" target="_self" title="Navigate to the The General page" class="subNavButton">General</a></li>
<li><a href="#.html" target="_self" title="Navigate to the The Commercial page" class="subNavButton">Commercial</a></li>
</ul>

</li>
<li><a href="#.html" target="_self" title="Navigate to the Press page" class="navButton primaryLink05">Press</a></li>
<li><a href="#.html" target="_self" title="Navigate to the Testimonials page" class="navButton primaryLink06">Testimonials</a></li>
<li><a href="#.html" target="_self" title="Navigate to the Fees page" class="navButton primaryLink07">Fees</a></li>
<li><a href="#.html" target="_self" title="Navigate to the Contact page" class="navButton primaryLink08">Contact</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:39:58.150

更新答案：http: [//jsfiddle.net/YQdL9/](http://jsfiddle.net/YQdL9/)

只是`.subNavWrapper`上课`to ul`。

```
$(function(){ 
    $("ul.subNavWrapper li:last-child").addClass("noBottomBorder");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:43:13.607

试试这个：

```
$("div.subNavWrapper li:last-child").addClass("noBottomBorder"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:54:42.227

使用**:last**选择器

```
$(".subNavWrapper li:last").addClass("noBottomBorder");​ 
```

此外，您的 HTML 格式不正确。

`</li>` 应该是`<ul>`最后一个列表..

**[检查小提琴](http://jsfiddle.net/sushanth009/Ub3BY/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:01:36.223

简短的回答，我所掌握的信息很少：

我必须假设该`<script>`元素是在`<ul>...`构建菜单之前执行的。因此，选择器不会选择任何元素，因为它们尚不存在于 DOM 中。

jQuery 有一个方便的 DOM 就绪事件，称为`document.ready`，但它的简写是：

```
jQuery(function ($) {
    ...your code...
}); 
```

它类似于`onload`，但性能更高一些。

你的代码应该是：

```
jQuery(function ($) {
    $("ul.subNavWrapper li:last-child").addClass("noBottomBorder");
}); 
```

假设它们具有正确的名称，并且我没有打错任何字，那么应该选择正确的元素。

* * *

综上所述，在我看来，您只是想在每个元素之间放置一个边框，而底部没有悬挂边框。与其为每个元素添加底部边框，不如添加*顶部*边框并从第一个元素中删除边框：

```
li {
    border-top: 1px solid <color>;
}
li:first-child {
    border-top: 0;
} 
```

# desire2learn - 验证批准的应用程序 ID/密钥

> ID：13650226
> 
> 赞同：4
> 
> 时间：2012-11-30T17:34:56.663
> 
> 标签：desire2learn

我正在尝试针对我们的 LMS 环境之一对我的应用程序`ID`/进行身份验证。`Key`但是，当我尝试这样做时 - 我收到以下错误：

> “此应用程序未在此 LMS 实例上授权。请您的管理员授权此应用程序。”

我无法弄清楚差距可能在哪里，因为我们遵循相同的程序来验证我们以前的应用程序的`ID`/`Key`与它们各自的 LMS 环境。此外，如果我使用我在应用程序中使用的同一组 LMS 凭据，但通过浏览器将它们提交到 LMS，它可以正常工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:41:44.057

我刚刚得知我的应用程序和 LMS 尚未同步。这就是错误的原因。

# iphone - 设备特定的图像处理

> ID：13650231
> 
> 赞同：1
> 
> 时间：2012-11-30T17:35:06.657
> 
> 标签：iphone, ipad, uiimage

我有一个简单的问题。假设我有一个关于屏幕，我在其中显示公司徽标或应用程序徽标。

`64x64logo.png`

`128x128logo@2x.png`

关于屏幕加载了`logo.png` 我们如何为基于视网膜的 iphone 交换高分辨率图像

还是系统会自己做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:42:19.440

iOS 使用 @2x 识​​别视网膜图像，因此您无需为不同的设备明确选择图像。如果应用在非视网膜设备上，它将选择 logo.png 并且在视网膜设备上 logo@2x 将自动显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:43:33.480

您的 Retina 设备会处理它，您只需在资源中添加 2 张图像，一张用于非ratina UI，另一张用于ratina UI。

您唯一需要注意的是为两个图像赋予相同的名称并将@2x 后缀添加到ratina 图像。

像这样：

`for non-ratina device-logo.png`

`for nratina device-logo@2x.png`

请查看苹果[文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html)。

# dns - 注册商不允许 SES 要求的 CNAME 中的下划线

> ID：13650233
> 
> 赞同：25
> 
> 时间：2012-11-30T17:35:19.713
> 
> 标签：dns, cname, dkim

Amazon 的 SES 邮件服务需要 DKIM 身份验证。身份验证的一个步骤是将 CNAME 记录添加到您域的 DNS。

不幸的是，CNAME 记录有一个下划线。我的注册商 Network Solutions 不允许在 CNAME 记录中使用下划线。

有解决方法吗？转移到不同的注册商是一种选择，但显然是一个可怕的选择。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-11-01T19:48:05.310

在与 Network Solutions 客户服务通话两个多小时后，他们正在为我手动输入 Amazon SES DKIM 身份验证记录。

首先，他们不允许在他们`CNAME`的下划线的事实是不正确的行为。

根据 RFC 1034：

> 不是主机名的名称可以由任何可打印的 ASCII 字符组成。

根据 RFC 4871，DKIM 标准需要下划线：

> 所有 DKIM 密钥都存储在名为“_domainkey”的子域中。给定具有“example.com”的“d=”标记和“foo.bar”的“s=”标记的 DKIM 签名字段，DNS 查询将针对“foo.bar._domainkey.example.com” .

RFC 1034 描述了 CNAME 记录并指出它`CNAME RR`不是（必然） a `hostname`，因此应该允许任何可打印的 ASCII 字符。网络解决方案在这方面是错误的。

虽然 DKIM 记录可以存储为`TXT`记录，但 Amazon SES 使用 CNAME 记录以便它们可以轮换密钥。如果不是因为 Network Solution 的无能政策，这应该是可能的。

对于这方面的大多数信息，我推荐[这个站点](http://domainkeys.sourceforge.net/underscore.html)，它解释了任何不是的 DNS 条目`hostnames`（a 中的字段`CNAME`可以，但不一定）应该允许使用下划线。

为了最终让他们手动输入记录，他们需要升级工单。必须通过电话完成，我最初的电子邮件工单得到了令人失望的回复“你需要打电话进来”。

我不得不多次解释其他名称服务器允许在 CNAME 中使用下划线，如果它们不能容纳我们，我们将立即切换。

他们必须与主要帐户持有人（不是我，也不是技术人员）交谈，以“确认”这些 DNS 记录应该到位。尽管他只是打电话来“确认”，但他们还是让他在电话里跑了 70 多分钟。这个确认似乎完全没有必要，因为我的帐户被授权编辑 DNS 记录。

这是一次相当令人沮丧的经历，我计划尽快从网络解决方案迁移。所需的停机时间过去曾劝阻过我们，但在这一点上，我认为这是合理的。

虽然您可能能够说服他们手动输入记录，但如果可能的话，我建议您切换名称服务器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-30T19:20:44.310

DKIM 完成了`TXT`记录。当然，您可以拥有`CNAME`指向记录的记录（或链）`TXT`，但直接创建记录更为常见`TXT`。

您的 DNS 权威名称服务提供商应该允许您将带有下划线的标签（DKIM 要求）放入您域的区域文件中。如果没有，请选择其他 DNS 名称服务提供商或使用您自己的名称服务器。

您使用的DNS*注册商*与它无关。注册商不控制域的内容，他们甚至不会意识到它。

可能您的注册商和 DNS 名称服务提供商恰好是同一个组织，但它们是不同的角色，应该单独考虑。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-21T21:40:39.790

DKIM 需要名为`_domainkey`( [RFC 4871](https://www.rfc-editor.org/rfc/rfc6376#section-3.6.2.1) ) 的子域（并且[下划线对子域完全有效](https://stackoverflow.com/a/2183140/167897)）。

如果您的 DNS 提供商不允许它们怎么办？

1.  联系他们，他们应该解决它，如果可以的话，考虑更换供应商。
2.  作为*临时*解决方案，直接复制 TXT 记录（这是临时的，因为它可能会在某些时候发生变化，您必须更新），见下文：

例如，对于*SendGrid*，它会要求您将 CNAME`s1._domainkey.example.com`指向`s1.domainkey.u1234567.00000.sendgrid.net`，因此通过以下方式获取 TXT 记录：

```
$ host -t txt s1.domainkey.u1234567.00000.sendgrid.net
s1.domainkey.u1234567.00000.sendgrid.net descriptive text "k=rsa\; t=s\; p=SOMETHING+VERY+LOOOOOOOONG" 
```

现在为包含内容的子域创建一个 TXT 记录`s1._domainkey`（例如，请记住取消转义`\`）：

```
k=rsa; t=s; p=SOMETHING+VERY+LOOOOOOOONG 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-07T20:40:02.467

亚马逊论坛 ( [https://forums.aws.amazon.com/thread.jspa?threadID=119464](https://forums.aws.amazon.com/thread.jspa?threadID=119464) ) 说如果 CNAME 记录不起作用，您可以使用 TXT 记录：

"在我的 DNS 设置中设置一个 TXT 条目，该条目如下所示：名称：._domainkey.mydomain.com 类型：TXT 值："p=AAZZZZZZEEEEEEERRRRRRRTTTTTTTYYYYYYYYY..","

我还不能让它工作，但我认为这是正确的方向，因为我不太可能能够使用 yahoo et.al。更改其 DNS 策略。

# tcl - TCL 中 proc 的参数

> ID：13650239
> 
> 赞同：1
> 
> 时间：2012-11-30T17:35:36.780
> 
> 标签：tcl

有没有办法从命令行传递proc的参数？我在脚本中有我的过程。我想从命令行给出它的参数。shell脚本中是否有类似“$@”的等效命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:49:53.697

您可以使用这些预定义变量获取命令行参数。

```
$argc - number items of arguments passed to a script.
$argv - list of the arguments.
$argv0 - name of the script. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T07:00:28.690

命令行参数有很多部分：

*   `$argv`——一个“有用的”参数词的 Tcl 列表。不包括脚本的名称。
*   `$argc`——“有用的”参数词的数量（即 的长度`$argv`）；很少使用，因为它`[llength $argv]`也同样有效。
*   `$argv0`— 正在执行的主脚本的名称。
*   `[info nameofexecutable]`— 执行脚本的程序。通常称为`tclsh`或`wish`（或带有版本号和扩展名的一些变体）但绝对不一定如此。

将所有“有用的”参数词（您通常认为是参数的所有词）传递给过程的最简单方法是这样做（假设 Tcl 8.5 或更高版本）：

```
theProc {*}$argv 
```

请注意，这必须*在*所有调用`proc`完成之后进行；`proc`是定义过程的命令，而不是过程的声明。（不同之处？可以想象，可以在文件的更深处看到声明，但 Tcl 不能那样工作。）

我经常喜欢在生产代码中将上述内容包含在一些异常处理中，以便可以很好地报告任何错误，而不是转储堆栈跟踪：

```
if {[catch {theProc {*}$argv} msg]} {
    handleError $msg
} 
```

* * *

在 8.5 之前，您需要一种更丑陋的方式：

```
eval theProc $argv 
```

这仍然是安全的（在正式意义上），因为 Tcl 如何保证构造列表值，并且我们知道`$argv`这是一个正确的列表这一事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:13:40.753

还有`args`可变数量的参数。

```
proc foo args {
    foreach arg $args {
        puts "arg=$arg"
    }
} 
```

所以调用 foo 将打印这个：

```
% foo 1
arg=1
% foo 1 2 3
arg=1
arg=2
arg=3
% 
```

请注意，使用 $argv 调用此过程会将 $argv 的全部内容视为 $argc 列表中的单个元素：

```
$ cat ar.tcl
#!/usr/bin/tclsh
proc foo args {
    foreach arg $args {
        puts "arg=$arg"
    }
}

foo $argv
$ 
$ ./ar.tcl 1 2 3
arg=1 2 3 
```

你需要用它`[lindex $args 0]`来获得真正的`$argv`

# android - xampp 适用于 android 或 ipad 吗？也许在 USB 密钥上？

> ID：13650241
> 
> 赞同：0
> 
> 时间：2012-11-30T17:35:47.927
> 
> 标签：android, ipad, apache, xampp, tablet

为了给我的潜在客户做一些网络应用程序的演示，我想使用平板电脑，没有互联网连接，只是一个本地 apache 服务器。目前，我没有，但我打算买一个，可能是安卓或 iPad 上的。

我看到有一些便携式版本的 XAMPP 环境正在使用 USB 密钥。

我想知道是否可以在 Ipad 或 Android 平板电脑上使用这样的服务器？对于 android，我必须使用 LAMP 环境吗？

编辑：确切地说，我正在搜索类似这些服务器的东西：[http](http://www.uwamp.com/) ://www.uwamp.com/或[http://www.server2go-web.de](http://www.server2go-web.de)，它们适用于 Windows（我会考虑购买一个 MS 表面...)

感谢您的回复

巴斯蒂安

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T23:44:16.430

有人告诉我 KS Web，一个 android 应用程序。未测试。但似乎不管理innoDB。

巴斯蒂安

# java - GridBagLayout 未按预期工作

> ID：13650244
> 
> 赞同：3
> 
> 时间：2012-11-30T17:35:52.680
> 
> 标签：java, swing, gridbaglayout

我正在使用 GridBagLayout 编写地址簿 GUI。问题是，当我设置不工作的 gridx 和 gridy 时，它看起来因为没有使用布局并且组件落在 Frame 的中心。我不是将整个代码粘贴为 1 的一小段代码，`JButton` 让您看看发生了什么.. 请查看代码并指导我如何修复它，现在按钮落在了 `JFrame`

我只是初学者，所以请不要介意愚蠢的样式代码或任何类似的问题

```
public class rect  
{
 JFrame frame ; 
 JPanel panel1 ; 
 JButton b1;
 GridBagConstraints gbc; 

 public  rect()
{
    panel1 = new JPanel();  
    panel1.setSize(300,300);
    panel1.setLayout(new GridBagLayout());
    gbc = new GridBagConstraints();

    frame= new JFrame("Address ?ooK "); 
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300, 300);

    b1= new JButton () ;
    b1.setText("Hello ");
    gbc.gridx=1; 
    gbc.gridy=0; 

    panel1.add(b1, gbc) ; 

    frame.add(panel1);
    panel1.setVisible(true);
    frame.setVisible(true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:36:45.923

设置时

```
gbc.gridx = 1;
gbc.gridy = 0; 
```

因为`GridBagConstraints`，您不会像使用*绝对定位*那样设置绝对坐标。相反，您正在设置组件所在的网格单元。在上面的示例应用程序中，只有一个组件，因此只有一个网格单元，因此`JButton`默认情况下将位于中心位置。

为了突出这一事实，我们可以添加设置锚点`NORTH`并添加另一个按钮，创建 2 个网格单元：

```
gbc.anchor = GridBagConstraints.NORTH;
gbc.weightx = 1.0;
gbc.weighty = 1.0;

gbc.gridx = 1;
gbc.gridy = 0;

panel1.add(new JButton("Hello"), gbc);

gbc.gridx = 2; // now a 2nd cell exists
panel1.add(new JButton("Test"), gbc); 
```

请注意，我们还设置了`weightx`and`weighty`以便按钮可以在 的顶部占据它们的位置`JFrame`：

![带有 2 个 NORTH 锚定组件的 GridBagLayout](../Images/aadea2a1c90246c4127cea1fb6f177ef.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:42:30.377

您的最终目标缺少一些细节，但是：

您的框架没有布局管理器，因此您的 JPanel 最终将位于框架的中间。无论您添加到面板中的任何内容（例如 JButtons）都将根据 GridBagLayout 进行布局（但是您的框架不知道如何定位您的窗格，因为您的框架没有布局管理器）。将您的框架视为一个容器，将您的窗格视为另一个容器。

为您的框架设置一个 GridBagLayout，类似于为您的窗格设置它的方式。

* * *

此外，您的框架和面板设置为完全相同的尺寸 -

```
panel1.setSize(300,300);
...
frame.setSize(300, 300); 
```

您可能希望使您的框架更大，以便`panel1`根据框架的布局管理器实际查看 ' 定位更改的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:05:20.810

我建议使用不同的布局，例如 BorderLayout。例如你可以然后

```
panel1 = new JPanel();  
panel1.setSize(300,300);
panel1.setLayout(new BorderLayout());

frame= new JFrame("Address ?ooK "); 
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(300, 300);
b1= new JButton ("Hello") ;

panel1.add(gbc) ; 

frame.add(panel1,BorderLayout.CENTER));
frame.add(b1,BorderLayout.PAGE_END));
panel1.setVisible(true);
frame.setVisible(true); 
```

# java - 如何为 MPEG-4 音频制作 FormatConversionProvider？

> ID：13650245
> 
> 赞同：1
> 
> 时间：2012-11-30T17:35:56.707
> 
> 标签：java, audio, mp4, mpeg-4

我很想扩展一个旧的 Java 应用程序[dump3](http://dump3.sourceforge.net/)，它通过计算音频指纹来识别潜在的重复 mp3 文件。从我可以通过代码得知，它处理可以通过注册的[FormatConversionProvider](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/spi/FormatConversionProvider.html)转换的任何音频格式。

查找通过 Java 播放更现代的 iTunes 默认 mp4 文件的任何东西都需要一些谷歌搜索，我最终找到了[JAAD](http://jaadec.sourceforge.net/)和[jffmpeg](http://jffmpeg.sourceforge.net/)。我什至查看了 VLC 的 Java 绑定。太好了，我可以播放音频了。但似乎没有人支持 FormatConversionProvider！有谁知道如何将选项卡 A 插入插槽 B 并为 mpeg-4 音频启用 FormatConversionProvider？

# entity-framework - 使用 Code First 迁移添加外键

> ID：13650257
> 
> 赞同：25
> 
> 时间：2012-11-30T17:36:54.507
> 
> 标签：entity-framework, foreign-keys, entity-framework-migrations

添加迁移后尝试更新数据库时出现错误。

这是我在添加迁移之前的课程

```
public class Product
{
    public Product() { }

    public int ProductId { get; set; } 
    public string Name { get; set; }
    public decimal Price { get; set; }
    public bool Istaxable { get; set; }
    public string DefaultImage { get; set; }
    public IList<Feature> Features { get; set; }
    public IList<Descriptor> Descriptors { get; set; }
    public IList<Image> Images { get; set; }
    public IList<Category> Categories { get; set; }
}

public class Feature
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }

} 
```

现在我想在我的 Feature 类中添加一个外键并以这种方式重构这些类：

```
public class Product
{
    public Product() { }

    public int ProductId { get; set; } 
    public string Name { get; set; }
    public decimal Price { get; set; }
    public bool Istaxable { get; set; }
    public string DefaultImage { get; set; }
    public IList<Feature> Features { get; set; }
    public IList<Descriptor> Descriptors { get; set; }
    public IList<Image> Images { get; set; }
    public IList<Category> Categories { get; set; }
}

public class Feature
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public string Image { get; set; }
    public string VideoLink { get; set; }

    public int ProductId { get; set; }
    public Product Product { get; set; }
} 
```

`Add-Migration`我用命令添加了一个迁移。我添加了一个`Update-Database`命令，这是我得到的：

> ALTER TABLE 语句与 FOREIGN KEY 约束“FK_dbo.ProductFeatures_dbo.Products_ProductId”冲突。冲突发生在数据库“CBL”、表“dbo.Products”、列“ProductId”中

我可以做些什么来解决这个问题并使我的迁移恢复正常？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-03-28T13:58:31.383

解决这个问题的关键是将你的迁移分成两个迁移。首先，添加一个可为空的字段并填写数据。其次，使该字段成为必需的外键。

## 第一次迁移

1.  将新属性作为可空类型（例如 int？）添加到您的类中

    ```
    public class MyOtherEntity
    {
        public int Id { get; set; }
    }

    public class MyEntity
    {
        ...
        // New reference to MyOtherEntity
        public int? MyOtherEntityId { get; set; }
        ...
    } 
    ```

2.  创建迁移。注意：迁移名称并不重要，但“AddBlogPosts1”之类的名称使其易于阅读。

    ```
    > add-migration AddMyEntityMyOtherEntity1 
    ```

3.  这应该构建一个如下所示的迁移：

    ```
    public partial class AddMyTableNewProperty1 : DbMigration
    {
        public override void Up()
        {
            AddColumn("dbo.MyEntity", "MyOtherEntityId", c => c.Int());
        }
        public override void Down()
        {
            DropColumn("dbo.MyEntity", "MyOtherEntityId");
        }
    } 
    ```

4.  现在手动编辑生成的迁移，为新字段添加默认值。最简单的情况是默认值不变。如果需要，您可以在 SQL 中添加更多逻辑。此示例假定所有 MyEntity 实例都指向 ID 为 1 的同一 MyOtherEntity 实例。

    ```
    public partial class AddMyTableNewProperty1 : DbMigration
    {
        public override void Up()
        {
            AddColumn("dbo.MyEntity", "MyOtherEntityId", c => c.Int());

            // ADD THIS BY HAND
            Sql(@"UPDATE dbo.MyEntity SET MyOtherEntityId = 1
                  where MyOtherEntity IS NULL");
        }
        public override void Down()
        {
            DropColumn("dbo.MyEntity", "MyOtherEntityId");
        }
    } 
    ```

5.  更新数据库

    ```
    > update-database 
    ```

## 第二次迁移

1.  返回您的 MyEntity 类并更改新属性以表示强制外键。

    ```
    public class MyEntity
    {
        ...
        // Change the int? to int to make it mandatory
        public int MyOtherEntityId { get; set; }

        // Create a reference to the other entity
        public virtual MyOtherEntity MyOtherEntity { get; set; }
        ...
    } 
    ```

2.  创建另一个迁移

    ```
    > add-migration AddMyEntityMyOtherEntity2 
    ```

3.  这应该创建如下迁移：

    ```
    public partial class AddMyEntityMyOtherEntity2: DbMigration
    {
        public override void Up()
        {
            AlterColumn("dbo.MyEntity", "MyOtherEntityId", c => c.Int(nullable: false));
            CreateIndex("dbo.MyEntity", "MyOtherEntityId");
            AddForeignKey("dbo.MyEntity", "MyOtherEntityId", "dbo.MyOtherEntity", "Id");
        }
        public override void Down()
        {
            DropForeignKey("dbo.MyEntity", "MyOtherEntityId", "dbo.MyOtherEntity");
            DropIndex("dbo.MyEntity", new[] { "MyOtherEntityId" });
            AlterColumn("dbo.MyEntity", "MyOtherEntityId", c => c.Int());
        }
    } 
    ```

4.  更新数据库

    ```
    > update-database 
    ```

## 其他注意事项

1.  此技术适用于在应用程序启动期间应用的迁移。
2.  可以为 SQL 中的新列添加更复杂的映射，但此处未说明。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-02T13:58:53.723

这是一个老问题，但目前不需要创建单独的迁移，这个问题可以通过几个步骤来解决：

1.  使用实体更改运行 Add-Migration（添加了一个新的不可为空的引用属性，在本例中为 ProductId）以构建新的迁移类
2.  修改新添加的迁移以创建可空列（可空：true）而不是不可空
3.  在AddColumn下面添加Sql命令根据需要设置列的值
4.  下面添加 AlterColumn 命令，这将使列按预期不可为空

在上面的示例中，这看起来像：

```
 public override void Up()
    {
        AddColumn("dbo.ProductFeatures", "ProductId", c => c.Int(nullable: true));
        Sql("UPDATE [dbo].[ProductFeatures] SET ProductId = (SELECT TOP 1 [Id] FROM [dbo].[Products])");
        AlterColumn("dbo.ProductFeatures", "ProductId", c => c.Int(nullable: false));
        CreateIndex("dbo.ProductFeatures", "ProductId");
        AddForeignKey("dbo.ProductFeatures", "ProductId", "dbo.Products", "Id");
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-29T19:17:09.997

我今天遇到了这个问题。以下是我的处理方式。我确实必须让我的 FK 属性可以为空，这对我来说没什么大不了的。

我对我的 POCO 进行了更改，生成了迁移，然后将以下内容添加到迁移中。

```
public partial class LineItemProductionHistory_v4 : DbMigration
{
    public override void Up()
    {
        AddColumn("LineItemProductionHistories","TempLineItemId",c=>c.Int());
        Sql("Update LineItemProductionHistories Set TempLineItemId = LineItem_Id");
       .
       . Generated code
       .
        Sql("Update LineItemProductionHistories Set LineItemId = TempLineItemId");
        DropColumn("LineItemProductionHistories", "TempLineItemId");
    }
} 
```

我只是暂时存储所有外键，让迁移完成添加/删除内容，然后将外键放回新创建的 FK 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T19:31:14.827

当您尝试在已包含数据的表的不可为空的列上添加外键约束时，可能会发生这种情况。如果您的表包含数据，请先尝试删除它们，然后重试更新您的数据库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-01T06:19:39.510

快速回答是 - 首先为 ProductId 添加一个可为空的列，然后在所有现有行中设置一些默认值，然后将该列设置为非空（如果需要）以供将来插入，最后添加外键约束。

我为此写了一篇很长的博客文章，其中包含完整的源代码 - [http://nodogmablog.bryanhogan.net/2015/04/entity-framework-non-null-foreign-key-migration/](http://nodogmablog.bryanhogan.net/2015/04/entity-framework-non-null-foreign-key-migration/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-25T09:24:22.167

我不确定这个主题是否仍然是实际的，但至少使用 EF 6，您可以执行以下操作将默认值分配给新的外键。

这是 EF 默认创建新外键的方式：

```
 AddColumn("dbo.Table", "AnotherTableId", c => .Int(nullable: false));
            CreateIndex("dbo.Table", "AnotherTableId");
            AddForeignKey("dbo.Table", "AnotherTableId", "dbo.AnotherTable", "Id"); 
```

只需如下更改

```
 AddColumn("dbo.Table", "AnotherTableId", c => 
            { 
                var model = c.Int(nullable: false);
                model.DefaultValue = 1;
                return model; 
            });
            CreateIndex("dbo.Table", "AnotherTableId");
            AddForeignKey("dbo.Table", "AnotherTableId", "dbo.AnotherTable", "Id"); 
```

# jquery - jQuery - 不能将事件绑定到动态元素？

> ID：13650261
> 
> 赞同：5
> 
> 时间：2012-11-30T17:37:02.590
> 
> 标签：jquery, events, dom-manipulation

我来维护一段 javascript，它从服务器下载一些 JSON 数据，构建一个新的表行（如`$('<tr></tr')`）并将其插入到文档中。

该`a`节点在某一时刻是这样创建的：

```
var a = $('<a class="foo" href="#"></a>'); 
```

后来，一个事件像这样绑定到它：

```
a.click(function () {
  // yadda yadda

  return false;
}); 
```

唯一的问题是这似乎不起作用。通过绑定`on()`或弃用的`live()`. 处理程序被简单地“忽略”，从不触发并且页面滚动到顶部（由于`href="#"`）。绑定事件时，元素已经被`append`编辑到 DOM。任何帮助将不胜感激。

想到的一些上下文信息：元素是在迭代数据的循环中创建的，但这不应该成为问题，除非 javascript 在范围界定方面有一些*非常*奇怪的东西，加上我尝试使用该元素的所有其他工作*：*我可以更改它的内容、样式，只有事件绑定不起作用。当然，还有 jQuery 版本，即**1.8.3**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T17:43:57.557

**已编辑**

.on() 应该像这样设置以处理动态创建的元素。另外，请确保使用 Jquery 1.8 版（最新版本）

此外，如果您不想滚动到顶部，则需要阻止单击的标准操作。

这是一个有效的[**FIDDLE**](http://jsfiddle.net/videsignz/LN5JN/)

```
var a = $('<a class="foo" href="#">ASD</a>');

a.appendTo($("body"));

$('body').on('click', 'a', function(e) {
    e.preventDefault();
    $(this).after('<br/><a class="foo" href="#">ASD</a>');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-21T00:05:34.387

```
You have various options. You can bind to the element or to the document. 
```

绑定到文件：

```
 $(document).on("click", "a.foo", function(event){
//do stuff here 
 }); 
```

当你绑定到一个文档时，你可以自由地创建和销毁 a.foo 元素，它们都会响应你的函数。

绑定到元素：

```
$("a.foo").on("click", function(event){
//do stuff here
  }); 
```

当您绑定到一个元素时，该函数仅绑定到所有先前存在的***元素***。因此，请确保在文档加载结束或函数结束时执行此操作。

我建议始终绑定到文档！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:54:16.023

尝试这个：

```
var a = $('<a class="foo" href="#">ASD</a>');
$("body").html(a);
a.click(function() {
    alert('a');
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:44:40.557

您可以像这样使用事件委托。

```
$('body').on('click','.foo',function(){
    alert('foo');
}); 
```

这将允许您在元素出现之前设置事件处理程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-25T15:34:20.887

尝试在动态创建元素的函数范围内绑定函数。

```
$('a.foo').on('click',function(event){
 //your code goes here
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T17:41:18.583

我想到了两件事：

1.  该链接没有文本，因此您没有单击它。
2.  你甚至没有将它附加到dom。

[这里](http://jsfiddle.net/paska/b3Quw/)有一个与您的代码非常相似的小提琴。

```
var a = $('<a class="foo" href="#">ASD</a>');

a.click(function() {
    alert('a');
});

a.appendTo($("body")); 
```

# c - C奇怪的数组分配行为

> ID：13650264
> 
> 赞同：0
> 
> 时间：2012-11-30T17:37:09.417
> 
> 标签：c, memory-management

我将 xcode 与 c 一起使用，但下面的代码有一个奇怪的问题。

当算法到达我的 conv 函数中的 y[k] = 0.0 行时，x 数组被 0-s 填充，我必须明白为什么，我已经以自己的方式纠正了这个错误。当我在主函数中注释第二行并取消注释第三行时，问题没有出现（见下文）。我知道我在 generateSquareSignal 中重新分配了数组，但这不是我认为这个错误的原因。

```
 int length = 100;
 double *output = (double*) malloc(10 * length * sizeof(double));
 //double *output;
 output = generateSquareSignal(length);
 double *input1 = (double*) malloc(length * sizeof(double));
 double *input2 = (double*) malloc(length * sizeof(double));

 for (int i = 0; i < length; i++) {
        input2[i] = output[i];
        input1[i] = output[i];
                //printf("-%d=%lf\n",i ,input1[i]);
 }

 conv(input1, length, input2, length, output, 2 * length );

double* generateSquareSignal(int length) {

  printf("double* generateSquareSignal(int length)\n");

  double *signal = (double*) malloc(length * sizeof(double));

  int length_period = length / kPeriodSignal;
  for(int i=0; i < length; i++) {
    if (i % (length_period) < (length_period / 2)) {
        signal[i] = 1.0;
    } else {
        signal[i] = -1.0;
    }
    //printf("%d. - %lf\n", i, signal[i]);
 }

 return signal;
}

void conv( double *x,  int N_signal,
                         double *h, int N_kernel,
                         double *y, int N_output) {
int k;
for(k = 0; k < N_signal + N_kernel; k++) {
    y[k] = 0.0;
}

for (int i = 0; i < N_signal; i++) {
    printf("%lf-%lf\n", x[i], y[i]);
}

for(int i = 0; i < N_signal; i++) {
    for(int j = 0; j < N_kernel; j++) {
        double  xx = x[i];
        double  hh = h[j];
        double  yy = y[i + j];
        y[i + j] += x[i] * h[j];
        //printf("=%lf\n", y[i + j]);
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:46:36.933

您将输出设置为指向长度大小的分配数组。然后你会使用它。结果非常随机... 10*length 的 malloc 什么都不做（泄漏内存除外），因为您在下一行用 generateSquareSignal 的返回值覆盖了它的返回值...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:13:53.047

您的问题出在代码的这一部分（添加了行号）

```
 1 int length = 100;
 2 double *output = (double*) malloc(10 * length * sizeof(double));
 3 //double *output;
 4 output = generateSquareSignal(length);
 /* ... snipped line 5 to 12 */
13
14 conv(input1, length, input2, length, output, 2 * length ); 
```

在第 2 行，您分配内存以容纳 1000 个双精度数。

在第 4 行中，您使用对包含 100 个双精度的缓冲区的引用覆盖了对该内存的唯一引用。这会造成第 2 行中分配的内存的内存泄漏。

在第 14 行，您告诉`conv`函数该变量`output`（变为`y`inside `conv`）可以存储 200 个双精度数（并`conv`隐含地假定它可以在其中存储至少该数量的数据）。这不是真的，因为它实际上是指一个 100 个双打块。结果是`conv`写入超出了`output`and引用的缓冲区的范围`y`，这会导致未定义的行为。在您的情况下，未定义的行为恰好是溢出最终出现在下一个分配的内存块中，这是由`input1`and引用的内存块`x`。

最后，该错误的根本原因确实是新的分配`generateSquareSignal`覆盖了之前的分配`output`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:42:48.063

这里有很多问题......但其中大部分是风格。真正的问题只是你有内存泄漏，这就是你的问题。如果你要创建一个分配内存的函数，让它分配内存：

```
double *output = (double*) malloc(10 * length * sizeof(double));
output = generateSquareSignal(length); 
```

像这样更改这两行代码：

```
double *output;
output = generateSquareSignal(10 * length); 
```

将消除内存泄漏，并允许您的代码根据需要调整大小（一个足够大的数组，可容纳 1000 个双精度数）

* * *

只是为了好玩，以下是我正在考虑的其他几点：

1.  当你只在里面存放 200 个时，为什么你需要 1000 个双打的空间？
2.  `length`似乎是一个常数，您可以将其设为全局#define，然后您不必担心传递它
3.  如果要传递长度，则不需要将其传递两次，`conv()`因为`input`数组相同
4.  您只需将前 200 个点设置`y`为`conv()``0.0`

# android - android2.3中的下拉菜单

> ID：13650267
> 
> 赞同：3
> 
> 时间：2012-11-30T17:37:27.530
> 
> 标签：android, drop-down-menu

如何在android中创建下拉菜单？我试过微调器，但是当它处于横向模式时，它的对话框会覆盖整个屏幕。对话框的宽度也无法调整。我需要为andorid2.3工作的下拉菜单。任何人都可以帮助我，我是这个领域的新手吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:44:07.487

您可以使用[ActionBarSherlock](http://actionbarsherlock.com/)并使用 IcsSpinner 而不是常规微调器来获得下拉效果。它从 API 8 开始工作。

# java - 使用 IKVM 生成 dll 文件时如何添加对资源文件夹的引用

> ID：13650270
> 
> 赞同：2
> 
> 时间：2012-11-30T17:37:39.540
> 
> 标签：java, .net, ikvm, languagetool

`org\languagetool\resource`我的 jars 应用程序目录中有一些资源，例如 xml 文件、图像等。

我想知道在从 jar 文件构建 dll 时如何提供对这些资源的引用。
我尝试添加以下选项：
`-externalresource:org/languagetool/resources=org/languagetool/resources/`
但
`-resource:org/languagetool/resources=org/languagetool/resources/`
两者似乎都不起作用。

我的命令如下：

```
ikvmc.exe -target:library -out:LanguageTool.dll -resource:org/languagetool/rules=org/languagetool/rules/ -resource:org/languagetool/resources=org/languagetool/resources/ LanguageTool.jar 
```

PS：我正在为 LanguageTools 库 [http://www.languagetool.org/创建 dll](http://www.languagetool.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:48:54.890

-externalresource: 和 -resource: 选项都仅适用于单个文件，因此如果您想要多个资源，则必须明确包含所有资源（通过多次指定该选项）。

# javascript - 在 ExtJS 中，在单击打开文件上传字段之前触发事件

> ID：13650274
> 
> 赞同：1
> 
> 时间：2012-11-30T17:37:48.573
> 
> 标签：javascript, file-upload, extjs, dom-events

我有`Ext.form.field.File`，`buttonOnly`属性设置为`true`. 我的问题是，在我按下“浏览”按钮之后但在文件选择器弹出之前我可以执行任何事件。我希望选择器不会在我想检查的某些条件下弹出。有什么建议吗？我试过`show`了`keydown`。这两个都没有执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:18:38.377

是的，这有点棘手，但您正在寻找：

```
var file =Ext.create('Ext.form.field.File', {
        name: 'photo',
        fieldLabel: 'Photo',
        labelWidth: 50,
        msgTarget: 'side',
        allowBlank: false,
        anchor: '100%',
        buttonText: 'Select Photo...',
        renderTo:Ext.getBody(),
});

file.mon(file.triggerWrap, {
    click : function(){ 
        alert('yes you can'); 
        file.disable();
        Ext.defer(function(){file.enable();}, 10);        
    }
});​ 
```

disable() 方法用于防止引发其他事件（这将阻止打开选择文件的弹出窗口）

这里有一个工作示例：http: [//jsfiddle.net/lontivero/GmAUt/2/](http://jsfiddle.net/lontivero/GmAUt/2/)

# api - shopify 是否允许对订单进行部分退款？

> ID：13650278
> 
> 赞同：1
> 
> 时间：2012-11-30T17:38:06.473
> 
> 标签：api, shopify

我们可以在不取消 shopify 订单的情况下对订单进行部分退款吗？

而且我还尝试在取消订单时部分退还订单，但在该`Orders`API 调用中我没有找到退款金额。那么有什么方法可以让我在 API 调用中获得部分退款的金额。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:06:34.023

一旦获得订单金额，授权就不能再用于进行任何更改（即退款）

解决方法是通过支付处理器（即贝宝）或通过向客户发出固定金额折扣代码来发放退款。

# opengl - 在opengl中重新映射z坐标

> ID：13650281
> 
> 赞同：0
> 
> 时间：2012-11-30T17:38:24.970
> 
> 标签：opengl, glsl

我正在用 OpenGL（当前）编写星图，但由于星星处于天文距离，它们使近/远设置太大。这些旨在成为真实恒星的准确可视化。在通过投影矩阵后，我尝试重新缩放顶点着色器中点的 z 值，但由于透视分割，我似乎仍然让它们四处移动。有没有办法重新调整 Z 以适应更小的近/远范围，而不会在透视图中改变 x/Y？我可以用 W 坐标做点什么吗？请注意，星星只是一组点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:45:21.940

在无穷远处有一个远平面是完全可能的。GLM 库提供了一个函数`infinitePerspective`来为此类用途创建适当的投影矩阵。谷歌搜索“投影矩阵无限”会产生很多关于该主题的文章。

# java - JSP 视频流（带有 Servlet）

> ID：13650285
> 
> 赞同：1
> 
> 时间：2012-11-30T17:38:47.240
> 
> 标签：java, jsp, video

我正在使用@BalusC 图像 servlet [http://balusc.blogspot.com/2007/04/imageservlet.html](http://balusc.blogspot.com/2007/04/imageservlet.html)在我的网站上提供图像。事实证明，这个 servlet 是通用的，所以它最终也提供文档（如 PDF 文件），但它似乎不适用于视频。我目前正在使用[http://videojs.com](http://videojs.com)作为库来重现视频。

我有两个网站，一个在 Amazon S3 上托管上传的文件，另一个在本地托管文件。当文件托管在 S3 上时，视频流工作正常（没有 servlet，您只需指向 video.js 的视频 url）

但是，当尝试流式传输本地存储的文件（因此需要一个 servlet）时，视频根本不会再现。

问题：

1) 创建一个 servlet 来流式传输视频是否可以接受？

2) 如果 1 是肯定的，为什么 servlet 不流式传输视频？

3) 如果不是 1，我如何使用 JSP/Java 流式传输视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:04:04.537

许多媒体播放器要求服务器支持所谓的 HTTP 范围请求。即，它必须能够根据请求返回带有[`Range`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)标题的媒体文件的特定字节范围。例如，在 10MB 长的文件中，只有索引 1000 处的字节直到 2000 为止。这对于许多媒体播放器来说是强制性的，以便能够足够快地跳过特定范围的媒体流和/或通过创建多个连接来提高缓冲速度，每个连接都请求文件的不同部分。

然而，这是 servlet 中的大量附加代码，需要对 HTTP`Range`规范有很好的理解。由您找到的图像 servlet 的同一作者提供了一个现成的示例，以适应此[文件 servlet 。](http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html)

请注意，容器的内置默认 servlet 通常也支持这一点。因此，如果您有机会，您也可以将媒体文件直接放在 webapp 本身中，或者将带有媒体文件的文件夹作为新的 webapp 上下文添加到服务器配置中，这样就可以通过 URL 直接使用它而无需对于一个本土的servlet。

# c# - C# SQL 查询和撇号的

> ID：13650287
> 
> 赞同：-5
> 
> 时间：2012-11-30T17:38:56.890
> 
> 标签：c#, sql, sqldatareader

> **可能重复：**
> [SqlDataReader 参数不起作用](https://stackoverflow.com/questions/13647964/sqldatareader-parameter-not-working)

我正在尝试从文本框中获取 pc 名称到 Windows 窗体应用程序中的 sql 参数。当我输入如下参数时，它工作正常。

```
 string query = @"select stationipaddress from station where stationname = @Name";
                using (SqlCommand cmd = new SqlCommand(query, cs))
            {

               SqlParameter param = new SqlParameter();
                param.ParameterName = "@Name";
                param.Value = "demo";
                cmd.Parameters.Add(param);

                using (SqlDataReader dr = cmd.ExecuteReader())
                {

                    while (dr.Read())
                    {
                        label3.Text = dr.GetSqlValue(0).ToString();
                        results = dr.GetValue(0).ToString();
                        MessageBox.Show(dr.GetValue(0).ToString());
                        MessageBox.Show(results);
                    } 
```

但是当我尝试从文本框中获取数据时它什么也没做。

```
 string query = @"select stationipaddress from station where stationname = @Name";
            using (SqlCommand cmd = new SqlCommand(query, cs))
            {

                  SqlParameter param = new SqlParameter();
                param.ParameterName = "@Name";
                param.Value = textBox1.Text;
                cmd.Parameters.Add(param);

                using (SqlDataReader dr = cmd.ExecuteReader())
                {

                    while (dr.Read())
                    {
                        label3.Text = dr.GetSqlValue(0).ToString();
                        results = dr.GetValue(0).ToString();
                        MessageBox.Show(dr.GetValue(0).ToString());
                        MessageBox.Show(results);
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:42:11.780

我建议在您从数据库中检索结果之前移出所有 MessageBox 操作。将您的结果添加到强类型列表中，然后相应地显示消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:55:35.283

你为什么不去掉撇号，即

```
cmd.Parameters.AddWithValue("@StationName", textBox1.Text.Replace("'","") 
```

如果 StationName 中的数据库字段值包含撇号，那么您必须将 SQL 语句更改为：

```
select stationipaddress from station where replace(stationname,CHAR(39),'') = @StationName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:44:37.883

尝试使用双撇号，例如 '' -> "John's" --> "John's"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:49:38.513

调用后`AddWithValue`设置`DbType`参数。那应该正确引用您的字符串。

```
cmd.Parameters["@StationName"].SqlDbType = SqlDbType.NVarChar; 
```

编辑：对不起，我的意思是指定 SqlDbType

# svg - d3js 多点线显示为闭合形状

> ID：13650290
> 
> 赞同：0
> 
> 时间：2012-11-30T17:39:10.540
> 
> 标签：svg, line, d3.js

我正在尝试生成一条通过多个点的线。

```
var line = d3.svg.line()
    .x(function(d){return d[0];})
    .y(function(d){return d[1];})
    .interpolate("basis");

var data = [[10,20],[200,100],[80,120], [40, 80]];

svg.append("path")
    .attr("stroke", "black")
    .attr("stroke-width",1)
    .attr("d", line(data)); 
```

Line(outline) 绘制正确，但不是曲线，而是显示闭合形状。

完整代码在[http://jsbin.com/inehon/2](http://jsbin.com/inehon/2)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:52:36.333

没问题，您只需要禁用填充（根据定义，填充是一个封闭的形状）。

```
svg.append("path")
  .attr("stroke", "black")
  .attr("fill", "none")// <--- THIS
  .attr("stroke-width",1)
  .attr("d", line(data)); 
```

如果您愿意，也可以通过 CSS 实现这一点

```
svg path {
  fill: none;
  stroke: black;
} 
```

# ios - iOS / Cordova 应用程序启动画面在加载后移动

> ID：13650292
> 
> 赞同：0
> 
> 时间：2012-11-30T17:39:14.407
> 
> 标签：ios, cordova

我在使用 Cordova 2.2.0 时遇到了一些困难。

我目前将 AutoHideSplashScreen 设置为“否”。应用程序加载完成后，启动画面向上移动 10 像素，直到我运行*navigator.splashscreen.hide();* 真正摆脱启动画面。在它向上移动 10px 后，应用程序内容在剩下的 10px 空间中可见。

因为这只发生在应用程序加载后，所以当我将 AutoHideSplashScreen 设置为“YES”时，10px 移位不会发生。但是，我需要能够自己隐藏启动画面。

这只发生在 3.5" iOS 设备上。在 4" 设备上，启动画面表现正常。

有什么建议吗？在我看来，问题与*CDVViewController.m*中的*self.imageView.center 有关*，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:44:32.643

我通过更新 CDVViewController.m 解决了这个问题：

以前的：

```
Line 695: } else { // not iPad
Line 696:     orientedLaunchImageFile = launchImageFile;
Line 697: } 
```

新的：

```
Line 695: } else { // not iPad
Line 696:     orientedLaunchImageFile = launchImageFile;
Line 697:     center.y += MIN(statusBarFrame.size.width, statusBarFrame.size.height) / 2;
Line 698: } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T23:47:05.717

将“基于控制器的状态栏外观”添加到项目 .plist 文件并设置为“否”

这阻止了启动画面在 hide() 之前向上移动。

# python - 理解 Python 的“is”运算符

> ID：13650293
> 
> 赞同：122
> 
> 时间：2012-11-30T17:39:14.970
> 
> 标签：python, operators

> `is`运算符不匹配变量的值，而是实例本身。

它的真正含义是什么？

我声明了两个变量`x`，并`y`在两个变量中分配了相同的值，但是当我使用`is`运算符时它返回 false。

我需要澄清一下。这是我的代码。

```
x = [1, 2, 3]
y = [1, 2, 3]

print(x is y)  # It prints false! 
```

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-11-30T17:40:23.050

您误解了`is`操作员的测试内容。它测试两个变量是否指向*同一个对象*，而不是两个变量是否具有相同的值。

从[`is`操作员](http://docs.python.org/reference/expressions.html#is)的文档中：

> 对象身份的运算符`is`和测试：当且仅当和是同一个对象时为真。`is not``x is y``x``y`

请改用`==`运算符：

```
print(x == y) 
```

这打印`True`。`x`并且`y`是两个*单独*的列表：

```
x[0] = 4
print(y)  # prints [1, 2, 3]
print(x == y)   # prints False 
```

如果您使用该[`id()`功能](http://docs.python.org/library/functions.html#id)，您将看到它`x`并`y`具有不同的标识符：

```
>>> id(x)
4401064560
>>> id(y)
4401098192 
```

但如果你要分配`y`给`x`那么两者都指向同一个对象：

```
>>> x = y
>>> id(x)
4401064560
>>> id(y)
4401064560
>>> x is y
True 
```

并`is`显示两者是同一个对象，它返回`True`.

请记住，在 Python 中，[名称只是引用值的标签](https://nedbatchelder.com/text/names.html)；您可以有多个名称指向同一个对象。`is`告诉您两个名称是否指向同一个对象。`==`告诉您两个名称是否指代具有相同值的对象。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-09-10T05:38:57.873

[另一个重复](https://stackoverflow.com/questions/25757465/why-does-a-bc-result-in-a-different-non-is-string-from-abc)的问题是为什么两个相等的字符串通常不相同，这里没有真正回答：

```
>>> x = 'a' 
>>> x += 'bc'
>>> y = 'abc'
>>> x == y
True
>>> x is y
False 
```

那么，为什么它们不是同一个字符串？特别是考虑到这一点：

```
>>> z = 'abc'
>>> w = 'abc'
>>> z is w
True 
```

* * *

让我们稍微推迟第二部分。第一个怎么可能是真的？

解释器必须有一个“实习表”，一个将字符串值映射到字符串对象的表，因此每次您尝试使用内容创建一个新字符串时`'abc'`，都会返回相同的对象。[维基百科](http://en.wikipedia.org/wiki/String_interning)对实习的工作方式进行了更详细的讨论。

Python*有*一个字符串实习表；[`sys.intern`](https://docs.python.org/3/library/sys.html#sys.intern)您可以使用该方法手动实习字符串。

实际上，*允许*Python自动实习任何不可变类型，但不是*必须*这样做。不同的实现将实习不同的值。

CPython（如果您不知道您正在使用哪个实现，您正在使用的实现）自动实习小整数和一些特殊的单例，如`False`，但不是字符串（或大整数，或小元组，或其他任何东西）。你可以很容易地看到这一点：

```
>>> a = 0
>>> a += 1
>>> b = 1
>>> a is b
True
>>> a = False
>>> a = not a
>>> b = True
a is b
True
>>> a = 1000
>>> a += 1
>>> b = 1001
>>> a is b
False 
```

* * *

好的，但为什么`z`和`w`相同？

那不是解释器自动实习，而是编译器折叠值。

如果相同的编译时字符串在同一个模块中出现两次（这究竟意味着什么很难定义——它与字符串文字不同，因为`r'abc'`, `'abc'`, 和`'a' 'b' 'c'`都是不同的文字但相同的字符串——但很容易理解直观地），编译器只会创建一个字符串实例，有两个引用。

事实上，编译器可以走得更远：`'ab' + 'c'`可以`'abc'`由优化器转换为，在这种情况下，它可以与一个`'abc'`常量一起折叠在同一个模块中。

同样，这是 Python 允许但不是必须做的事情。但在这种情况下，CPython 总是折叠小字符串（以及，例如，小元组）。（尽管交互式解释器的逐语句编译器不会运行与一次模块编译器相同的优化，因此您不会以交互方式看到完全相同的结果。）

* * *

那么，作为程序员，你应该怎么做呢？

嗯……没什么。您几乎没有任何理由关心两个不可变值是否相同。如果您想知道什么时候可以使用`a is b`而不是`a == b`，那您就问错问题了。`a == b`除非在两种情况下，否则总是使用：

*   对于像`x is None`.
*   对于可变值，当您需要知道变异是否`x`会影响`y`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-30T17:44:11.033

`is`仅当它们实际上是同一个对象时才返回 true。如果它们相同，则对其中一个的更改也会出现在另一个中。这是一个不同的例子。

```
>>> x = [1, 2, 3]
>>> y = [1, 2, 3]
>>> print x is y
False
>>> z = y
>>> print y is z
True
>>> print x is z
False
>>> y[0] = 5
>>> print z
[5, 2, 3] 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-10T04:56:26.477

[在重复问题](https://stackoverflow.com/questions/25757465/string-identity-in-python)的提示下，这个类比可能有效：

```
# - Darling, I want some pudding!
# - There is some in the fridge.

pudding_to_eat = fridge_pudding
pudding_to_eat is fridge_pudding
# => True

# - Honey, what's with all the dirty dishes?
# - I wanted to eat pudding so I made some. Sorry about the mess, Darling.
# - But there was already some in the fridge.

pudding_to_eat = make_pudding(ingredients)
pudding_to_eat is fridge_pudding
# => False 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-12-03T01:42:55.667

`is`和`is not`是 Python 中的两个恒等运算符。`is`运算符不比较变量的值，而是比较变量的身份。考虑一下：

```
>>> a = [1,2,3]
>>> b = [1,2,3]
>>> hex(id(a))
'0x1079b1440'
>>> hex(id(b))
'0x107960878'
>>> a is b
False
>>> a == b
True
>>> 
```

`a`上面的示例向您展示了两个和的标识（也可以是 Cpython 中的内存地址）不同`b`（即使它们的值相同）。这就是为什么当您说`a is b`由于两个操作数的身份不匹配而返回 false 时。但是，当您说 时`a == b`，它返回 true，因为该`==`操作仅验证两个操作数是否具有相同的分配给它们的值。

有趣的例子（额外成绩）：

```
>>> del a
>>> del b
>>> a = 132
>>> b = 132
>>> hex(id(a))
'0x7faa2b609738'
>>> hex(id(b))
'0x7faa2b609738'
>>> a is b
True
>>> a == b
True
>>> 
```

在上面的示例中，即使`a`和`b`是两个不同的变量，也`a is b`返回`True`. 这是因为类型`a`是`int`不可变对象。所以python（我想是为了节省内存）`b`在创建它时分配了相同的对象以相同的值。所以在这种情况下，变量的身份匹配并且`a is b`结果是`True`。

这将适用于所有不可变对象：

```
>>> del a
>>> del b
>>> a = "asd"
>>> b = "asd"
>>> hex(id(a))
'0x1079b05a8'
>>> hex(id(b))
'0x1079b05a8'
>>> a is b
True
>>> a == b
True
>>> 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-29T11:59:35.063

`x is y`与 相同`id(x) == id(y)`，比较对象的身份。

正如@tomasz-kurgan 在下面的评论中指出的那样，`is`运算符对某些对象的行为异常。

例如

```
>>> class A(object):
...   def foo(self):
...     pass
... 
>>> a = A()
>>> a.foo is a.foo
False
>>> id(a.foo) == id(a.foo)
True 
```

参考；
[https://docs.python.org/2/reference/expressions.html#is-not](https://docs.python.org/2/reference/expressions.html#is-not)
[https://docs.python.org/2/reference/expressions.html#id24](https://docs.python.org/2/reference/expressions.html#id24)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-30T17:42:40.800

你可以在这里检查一个小整数。257 以上的数字不是小的整数，所以它被计算为不同的对象。

`==`在这种情况下最好改用。

更多信息在这里：[http ://docs.python.org/2/c-api/int.html](http://docs.python.org/2/c-api/int.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-30T17:40:31.623

X 指向一个数组，Y 指向另一个数组。这些数组是相同的，但`is`操作员将查看那些不相同的指针。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-30T17:41:35.523

它比较对象身份，即变量是否引用内存中的同一对象。这就像`==`在 Java 或 C 中（比较指针时）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-29T19:34:51.557

一个简单的水果例子

```
fruitlist = [" apple ", " banana ", " cherry ", " durian "]
newfruitlist = fruitlist
verynewfruitlist = fruitlist [:]
print ( fruitlist is newfruitlist )
print ( fruitlist is verynewfruitlist )
print ( newfruitlist is verynewfruitlist ) 
```

输出：

```
True
False
False 
```

如果你试试

```
fruitlist = [" apple ", " banana ", " cherry ", " durian "]
newfruitlist = fruitlist
verynewfruitlist = fruitlist [:]
print ( fruitlist == newfruitlist )
print ( fruitlist == verynewfruitlist )
print ( newfruitlist == verynewfruitlist ) 
```

输出不同：

```
True
True
True 
```

那是因为 == 运算符只比较变量的内容。要比较 2 个变量的身份，请使用**is**运算符

要打印识别号：

```
print ( id( variable ) ) 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2019-12-24T07:58:10.360

`is`运算符不过是英文版的`==`. 因为这两个列表的 ID 不同，所以答案是错误的。你可以试试：

```
a=[1,2,3]
b=a
print(b is a )#True 
```

*因为两个列表的 ID 相同

# sql - 为什么我会得到“过程或函数需要参数”？

> ID：13650295
> 
> 赞同：1
> 
> 时间：2012-11-30T17:39:17.357
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures, asp-classic

我正在从 Classic ASP 向 SQL Server 2005 数据库表中插入一行。

我收到以下错误：

> *过程或函数“replace_matl_form_insert”需要参数“@matl_no”，但未提供该参数。*

我正在提供参数。类型匹配，我仍然收到该错误。这是用于插入的经典 asp 代码

```
 set CMDInsForm = Server.CreateObject("ADODB.Command")
     CMDInsForm.ActiveConnection = CONN
     CMDInsForm.CommandText = "dbo.replace_matl_form_insert"

     set parm = CMDInsForm.CreateParameter ("matl_no", adChar, adParamInput, 8, Trim(matl_no))
     CMDInsForm.Parameters.Append parm
     For each X in CMDInsForm.Parameters
          Response.Write err_msg & X.Name & ":" & X.Value & "<BR>"
     Next

     CMDInsForm.Execute 
```

如您所见，我循环遍历参数并打印出它们的名称和值。`matl_no`打印名称和正确的值。

这是检索它的存储过程部分。

```
ALTER PROCEDURE [dbo].[replace_matl_form_insert]
    (@matl_no char(8))
 AS [...] 
```

我完全被难住了。有没有人对它可能是什么有**任何**建议，或者只是在黑暗中拍摄？我不在乎这听起来有多疯狂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:41:09.817

我认为您需要参数名称开头的“@”：

```
set parm = CMDInsForm.CreateParameter ("@matl_no", adChar, adParamInput, 8, Trim(matl_no)) 
```

**编辑**
另外，尝试设置`CommandType`为`4`（即`adCmdStoredProc`）：

```
CMDInsForm.CommandType = 4 
```

[http://www.w3schools.com/ado/prop_comm_commandtype.asp](http://www.w3schools.com/ado/prop_comm_commandtype.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T07:51:34.873

如果您不想将参数发送到您的 SP（在某些情况下），您可以为您的 SP 参数初始化一个默认值，例如

```
ALTER PROCEDURE [dbo].[replace_matl_form_insert]
    (@matl_no char(8)=NULL)
 AS [...] 
```

通过为您的参数分配 NULL 值，您将不会收到此错误

```
Procedure or function 'replace_matl_form_insert' expects parameter '@matl_no', which was not supplied. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:40:59.820

我认为您缺少`@`参数名称中的 。尝试：

```
set parm = CMDInsForm.CreateParameter ("@matl_no", ... 
```

代替 ：

```
set parm = CMDInsForm.CreateParameter ("matl_no", ... 
```

# service - 授权服务——返回授权资源列表

> ID：13650300
> 
> 赞同：8
> 
> 时间：2012-11-30T17:39:36.337
> 
> 标签：service, architecture, authorization

检索用户有权访问的所有资源列表的推荐方法是什么？

在我见过的许多示例中，授权被放置在一个单独的服务中——通常一个公开类似于 isAuthorized() 的方法，该方法可用于单个查询（“用户是否有权使用资源 ABC？”）作为以及批量查询（“用户是否有权使用以下任何资源列表？”）。

虽然*授权逻辑*存在于授权服务中，但授权策略的*实施*保留在应用程序本身内（例如，根据授权服务的结果实际实现对资源的访问的业务逻辑层；或表示层以根据授权服务等的结果显示/隐藏各个选项）。

例如，如果我的数据访问层有可能返回的数十亿“资源”，那么首选的方法是什么？我的业务逻辑层是否查询所有数据（通过网络传递所有数据），然后将该巨大列表转发到授权服务（再次通过网络），只得到一个巨大的“允许/拒绝”列表发回业务逻辑？显然这听起来不太对劲。

这是我们不能“干净”分离数据访问、授权逻辑和业务逻辑的情况吗？我是否应该要求我的数据访问层只向我返回用户有权访问的所有资源的列表，这最终可能被实现为简单的数据库连接，但随后需要一些用于确定谁的逻辑可以在什么条件下访问哪些资源（即授权策略）嵌入数据访问代码中，因此这些策略将分布在我的代码库中（例如，某些授权逻辑将在我的数据访问中层，有些会在我的授权层等）？

也许性能胜过“干净”的架构，但有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-09T17:29:00.847

身份验证最好外部化。授权通常过于依赖应用程序而无法外部化。它可能适用于小型系统。但是对于大型系统，您将遇到预期的扩展问题。

另一件事是返回巨大的数据集。在我看来，这更适合报告。因此，将具有不同要求的第一个流程模块与报告模块分开，因为在业务流程中您需要集中数据以及报告大量数据和抽象。

授权不是一层。这是一个方面。如果您不至少用适当的模拟替换它，则应用程序可能在没有层的情况下无法工作。但是，如果您删除方面，则运行应用程序应该不会有问题。也许您的程序不会记录任何内容，或者您​​将能够看到比您允许看到的更多的数据，但它仍然可以工作。

那么授权是否应该从应用程序域外部化？不。它应该与业务逻辑分开吗？是的。正确的机制：方面（AspectJ、Proxy-Pattern、Template-Class-Pattern）。这是我的一般建议。

我对业务流程中的“海量数据”的特别建议是：尝试正确划分您的领域模型，以减少集中数据（主题“可用性”或“用户体验”）。然后回到我的一般建议。

如果您必须在业务流程中处理大量数据：使用“让它工作，让它正确，让它快速”的最后一点。将其视为对特殊数据请求的优化，这些请求可能会或预计会很慢。在这种情况下，使用特殊的 sql 查询、预加载、缓存等。DAO-Layer 可能是正确的位置、缓存方面或 DAO-Layer 的优化方面，它使用替代实现来覆盖“工作缓慢”的实现——快速地。

我提出的建议是指正常的业务用例。我不是在谈论大数据或报告。正如我所提到的，这些部门有不同的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:15:34.827

我有一个萌芽的想法，不是基于任何实践经验，但乍一看似乎是合理的。

为什么我们有授权服务？我的主张是，我们具有该服务的某些功能，因为我们的数据源没有完成完整的工作。如果我们仅使用 RDBMS 数据库作为数据源，那么该数据库可以监管主要的授权类别。我们可以针对视图工作并授予访问这些视图的权限，从而根据需要保护表和列。那么就剩下这样的一套规则了

> 员工的工资信息可以显示到 a)。雇员，b)。他们的经理和二线经理，c)。人力资源薪酬团队成员。

我相信这样的授权规则具有业务语义，并且最好由授权服务实现，并且该服务的表达是根据业务对象：

```
 can This employee see That employee's salary? 
```

它不是以表、行和列的形式表示，而是以更粗略的、对业务有意义的粒度表示。实现这一点需要构建一个表达授权规则的数据模型，严格来说这是业务逻辑，我们只是选择重构为授权服务来封装实现。

将此与以视图、表和列表示的细粒度实体授权进行对比。我的主张是这正确地属于数据源，如果我们的数据源不能或没有实现它，那么我们需要在我们的数据访问层中实现它。DAO“知道”他们使用哪些视图/表，并且可能还知道代表谁运行请求的 id，因此决定是否允许访问。

松散地说：DAO 有 SQL，所以知道实体，所以可以决定。（是的，某些后端可能没有 SQL，但 DAO 是理解正在检索的内容的对象。）它可以通过一种方法来丰富，以列出给定用户允许哪些访问方法。

```
 CustomerDAO.whatIsAuthorised("joeCoder") => READ, QUERY

 CustomerDAO.whatIsAuthorised("phb") => READ, QUERY, UPDATE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:00:38.650

我对你的问题没有明确的答案，但我也许可以提供一些指示-

*   您问

    > 我的业务逻辑层是否查询了所有数据，然后将该巨大列表转发到授权服务，只是为了得到一个巨大的“允许/拒绝”列表发送回业务逻辑？

好吧，对我来说，这似乎不太可能发生。您能想到一种情况，您希望将*所有*可用记录呈现给用户吗？您希望进一步过滤这些记录（即按类型、日期等）不是更合理吗，并且您可能还希望对它们进行分页以便用户获得一口大小的结果集。

*   再加上您很可能只会在服务之间传递记录的标识符这一事实，您可能会发现这种方法对您来说是可行的。

*   另请注意，将您的授权逻辑作为“服务”并不一定意味着它必须驻留在不同的机器上；您可以将它实现为一个单独的逻辑模块，并且仍然让它在同一台机器上运行（如果您愿意，可能与您的应用程序在同一进程上），从而避免网络流量问题。

*   您认为将授权作为数据访问的一部分实施可能很棘手的观察是正确的。但是，有一些基础设施工具可以帮助您。例如 - oracle 的[虚拟私有数据库](http://docs.oracle.com/cd/B28359_01/network.111/b28531/vpd.htm)、[(n)hibernate 过滤器](http://ayende.com/blog/3993/nhibernate-filters)，我相信还有其他的。

同样，这些不是完整的答案，但它们可能会引导您找到适合您的解决方案。
我建议你谷歌“授权框架+ [你最喜欢的编程语言]”；我敢肯定有人以前已经做过了:)

# javascript - 如何在在线表格中验证验证码

> ID：13650302
> 
> 赞同：1
> 
> 时间：2012-11-30T17:39:40.363
> 
> 标签：javascript, forms, validation, captcha

我的工作是为比赛创建表格并收集数据。这些数据将由我们用来发送电子邮件的公司收集（想想 Mail chimp）。这家公司（通过他们的在线软件“campaign command”发送电子邮件）生成了下面的表格。如您所见，它不验证验证码。我需要什么代码才能在不离开表单的情况下验证验证码？该网站是用 PHP 开发的。谢谢您的帮助。上帝保佑我们。朱利安·P。

```
 <html>
                <head>
                <title>Webform</title>
                <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
                <script language="javascript">
                function isInteger(input,fieldName){
                var i;
                for(i=0;i<input.value.length;i++){
                var c=input.value.charAt(i);
                if(((c<'0')||(c>'9'))){
                alert('The number in '+fieldName+' is not valid.');
                input.focus();
                return false;
                }}
                return true;
                }
                var dtCh='/';
                var minYear=1900;
                var maxYear=2100;
                function isValidInteger(s){
                var i;
                for(i=0;i<s.length;i++){
                var c=s.charAt(i);
                if(((c<'0')||(c>'9'))) return false;
                }
                return true;
                }
                function stripCharsInBag(s,bag){
                var i;
                var returnString='';
                for(i=0;i<s.length;i++){
                var c=s.charAt(i);
                if(bag.indexOf(c)==-1) returnString+=c;
                }
                return returnString;
                }
                function daysInFebruary(year){
                return(((year%4==0)&&((!(year % 100 == 0))||(year%400==0)))?29:28);
                }
                function DaysArray(n){
                for(var i=1;i<=n;i++){
                this[i]=31;
                if(i==4||i==6||i==9||i==11){this[i]=30;}
                if(i==2){this[i]=29;}
                }
                return this;
                }
                function isDateOK(dtStr){
                if(dtStr=='') return true;
                var daysInMonth=DaysArray(12);
                var pos1=dtStr.indexOf(dtCh);
                var pos2=dtStr.indexOf(dtCh,pos1+1);
                var strDay=dtStr.substring(0,pos1);
                var strMonth=dtStr.substring(pos1+1,pos2);
                var strYear=dtStr.substring(pos2+1);
                strYr=strYear;
                if(strDay.charAt(0)=='0'&&strDay.length>1) strDay=strDay.substring(1);
                if(strMonth.charAt(0)=='0'&&strMonth.length>1) strMonth=strMonth.substring(1);
                for(var i=1;i<=3;i++){
                if(strYr.charAt(0)=='0'&&strYr.length>1) strYr=strYr.substring(1);
                }
                month=parseInt(strMonth);
                day=parseInt(strDay);
                year=parseInt(strYr);
                if(pos1==-1||pos2==-1){
                alert('The date format should be : dd/mm/yyyy.');
                return false;
                }
                if(strMonth.length<1||month<1||month>12){
                alert('Please enter a valid month.');
                return false;
                }
                if(strDay.length<1||day<1||day>31||(month==2&&day>daysInFebruary(year))||day>daysInMonth[month]){
                alert('Please enter a valid day.');
                return false;
                }
                if(strYear.length!=4||year==0||year<minYear||year>maxYear){
                alert('Please enter a valid 4 digit year between '+minYear+' and '+maxYear+'.');
                return false;
                }
                if(dtStr.indexOf(dtCh,pos2+1)!=-1||isValidInteger(stripCharsInBag(dtStr,dtCh))==false){
                alert('Please enter a valid date.');
                return false;
                }
                return true;
                }
                function modifyDateFormat(dt){
                var valuesTable=dt.value.split(dtCh);
                dt.value=valuesTable[1]+dtCh+valuesTable[0]+dtCh+valuesTable[2];
                }
                function isEmail(emailAddress){
                emailAddressValue=emailAddress.value.toLowerCase();
                var countryTLDs=/^(ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cat|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw)$/;
                var gTLDs=/^(aero|asia|biz|cat|com|coop|edu|geo|gov|info|int|jobs|mil|mobi|museum|name|net|org|post|pro|tel|travel)$/;
                var basicAddress=/^(.+)@(.+)$/;
                var specialChars='\\(\\)><@,;:\\\\\\\"\\.\\[\\]';
                var validChars='\[^\\s'+specialChars+'\]';
                var validCharset='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzöå0123456789\'-_.+';
                var quotedUser='(\"[^\"]*\")';
                var atom=validChars+'+';
                var word='('+atom+'|'+quotedUser+')';
                var validUser=new RegExp('^'+word+'(\.'+word+')*$');
                var symDomain=new RegExp('^'+atom+'(\.'+atom+')*$');
                var matchArray=emailAddressValue.match(basicAddress);
                if(emailAddress.value==''||emailAddress==null){
                return true;
                }
                if(matchArray==null){
                alert('The Email address doesn\'t seem to be correct,\nplease check syntax.');
                emailAddress.focus();
                return false;
                }else{
                var user=matchArray[1];
                var domain=matchArray[2];
                for(i=0;i<user.length;i++){
                if(validCharset.indexOf(user.charAt(i))==-1){
                alert('The Email address contains invalid characters,\nplease check the username.');
                emailAddress.focus();
                return false;
                }
                }
                for(i=0;i<domain.length;i++){
                if(validCharset.indexOf(domain.charAt(i))==-1){
                alert('The Email address contains invalid characters,\nplease check the domain.');
                emailAddress.focus();
                return false;
                }
                }
                if(user.match(validUser)==null){
                alert('The Email address doesn\'t seem to be correct,\nplease check the username.');
                emailAddress.focus();
                return false;
                }
                var atomPat=new RegExp('^'+atom+'$');
                var domArr=domain.split('.');
                var len=domArr.length;
                for(i=0;i<len;i++){
                if(domArr[i].search(atomPat)==-1){
                alert('The Email address doesn\'t seem to be correct,\nplease check the domain name.');
                emailAddress.focus();
                return false;
                }
                }
                if((domArr[domArr.length-1].length==2)&&(domArr[domArr.length-1].search(countryTLDs)==-1)){
                alert('The Email address doesn\'t seem to be correct,\nplease check domain suffix.');
                emailAddress.focus();
                return false;
                }
                if((domArr[domArr.length-1].length>2)&&(domArr[domArr.length-1].search(gTLDs)==-1)){
                alert('The Email address doesn\'t seem to be correct,\nplease check domain suffix.');
                emailAddress.focus();
                return false;
                }
                if((domArr[domArr.length-1].length<2)||(domArr[domArr.length-1].length>6)){
                alert('The Email address doesn\'t seem to be correct,\nplease check domain suffix.');
                emailAddress.focus();
                return false;
                }
                if(len<2){
                alert('The Email address doesn\'t seem to be correct,\nplease check missing hostname.');
                emailAddress.focus();
                return false;
                }
                }
                return true;
                }
                function mandatoryCheckBox(checkBox,fieldName){
                var nbcheck=0;
                if(checkBox.length==undefined){
                if(checkBox.checked){ nbcheck++; }
                }else{
                for (counter=0;counter<checkBox.length;counter++){
                if(checkBox[counter].checked){ nbcheck++; }
                }
                }
                if(nbcheck==0){
                alert('Please select your '+fieldName+'.');
                return false;
                }
                return true;
                }
                function mandatoryDropDown(dropDown,fieldName){
                if(dropDown.options[dropDown.options.selectedIndex].value == ""){
                alert('Please select your '+fieldName+'.');
                dropDown.focus();
                return false;
                }
                return true;
                }
                String.prototype.trim = function() { return this.replace(/^\s*(\b.*\b|)\s*$/, "$1");    }
                function mandatoryText(input,fieldName){
                if(input.value.trim()==''||input==null){
                alert('Please enter your '+fieldName+'.');
                input.focus();
                return false;
                } else {
                return true;
                }
                }
                function validForm(){
                if(!mandatoryText(document.getElementById('FIRSTNAME_FIELD'), 'First name')) return;
                if(!mandatoryText(document.getElementById('LASTNAME_FIELD'), 'Surname')) return;
                if(!mandatoryText(document.getElementById('DATEOFBIRTH_FIELD'), 'Date of birth')) return;
                if(!isDateOK(document.getElementById('DATEOFBIRTH_FIELD').value)) return;
                if(!mandatoryText(document.getElementById('EMAIL_FIELD'), 'Email')) return;
                if(!isEmail(document.getElementById('EMAIL_FIELD'))) return;
                if(!mandatoryText(document.getElementById('EMVCELLPHONE_FIELD'), 'Mobile')) return;
                if(!isInteger(document.getElementById('EMVCELLPHONE_FIELD'), 'Mobile')) return;
                if(!mandatoryDropDown(document.getElementById('STORE_NAME_FIELD'), 'Nearest shop')) return;
                if(!mandatoryCheckBox(document.getElementById('emvForm').OPTIN_FIELD, 'Opt in to marketing emails')) return;
                if(document.getElementById('DATEOFBIRTH_FIELD').value!='') modifyDateFormat(document.getElementById('DATEOFBIRTH_FIELD'));
                document.getElementById('emvForm').submit();
                if(document.getElementById('DATEOFBIRTH_FIELD').value!='') modifyDateFormat(document.getElementById('DATEOFBIRTH_FIELD'));
                }
                </script>
                </head>
                <body>
                <form name="emvForm" id="emvForm" action="http://tre.emv3.com/D2UTF8" method="POST" target="_top">
                <input type="hidden" name="emv_tag" value="876020001C384269" />
                <input type="hidden" name="emv_ref" value="EdX7CqkdLe_d8SA9MOPQNCffL0p6Hq3D-jmueKEyWsbQKbo" />
                <table>
                <tr>
                <td>
                First name
                </td>
                <td>
                <input type="text" id="FIRSTNAME_FIELD" name="FIRSTNAME_FIELD" value="" size="30" maxlength="64">
                </td>
                </tr>
                <tr>
                <td>
                Surname
                </td>
                <td>
                <input type="text" id="LASTNAME_FIELD" name="LASTNAME_FIELD" value="" size="30" maxlength="64">
                </td>
                </tr>
                <tr>
                <td>
                Date of birth
                </td>
                <td>
                <input type="text" id="DATEOFBIRTH_FIELD" name="DATEOFBIRTH_FIELD" value="" size="30" maxlength="64">
                </td>
                </tr>
                <tr>
                <td>
                Email
                </td>
                <td>
                <input type="text" id="EMAIL_FIELD" name="EMAIL_FIELD" value="" size="30" maxlength="64">
                </td>
                </tr>
                <tr>
                <td>
                Mobile
                </td>
                <td>
                <input type="text" id="EMVCELLPHONE_FIELD" name="EMVCELLPHONE_FIELD" value="" size="30" maxlength="64">
                </td>
                </tr>
                <tr>
                <td>
                Nearest shop
                </td>
                <td>
                <select id="STORE_NAME_FIELD" name="STORE_NAME_FIELD">
                <option selected value=""></option>
                <option value="Aberdeen ">Aberdeen </option>
                <option value="Acton ">Acton </option>
                <option value="Aldgate ">Aldgate </option>
                <option value="Ashford ">Ashford </option>
                <option value="Aylesbury ">Aylesbury </option>
                <option value="Baker Street ">Baker Street </option>
                <option value="Balham ">Balham </option>
                <option value="Ballymena ">Ballymena </option>
                <option value="Barnet ">Barnet </option>
                <option value="Beckenham ">Beckenham </option>
                <option value="Belfast ">Belfast </option>
                <option value="Bethnal Green ">Bethnal Green </option>
                <option value="Bexleyheath ">Bexleyheath </option>
                <option value="Biggleswade ">Biggleswade </option>
                <option value="Birmingham ">Birmingham </option>
                <option value="Birmingham New Street ">Birmingham New Street </option>
                <option value="Bishopsgate ">Bishopsgate </option>
                <option value="Bond Street ">Bond Street </option>
                <option value="Bromley ">Bromley </option>
                <option value="Camberwell ">Camberwell </option>
                <option value="Cambridge ">Cambridge </option>
                <option value="Camden Town ">Camden Town </option>
                <option value="Chelmsford ">Chelmsford </option>
                <option value="Chelsea ">Chelsea </option>
                <option value="Cheltenham ">Cheltenham </option>
                <option value="Chester ">Chester </option>
                <option value="Chiswick ">Chiswick </option>
                <option value="Clacton-on-Sea ">Clacton-on-Sea </option>
                <option value="Clapham High Street ">Clapham High Street </option>
                <option value="Clapham Junction ">Clapham Junction </option>
                <option value="Colchester ">Colchester </option>
                <option value="Coleraine ">Coleraine </option>
                <option value="Covent Garden ">Covent Garden </option>
                <option value="Coventry ">Coventry </option>
                <option value="Cricklewood ">Cricklewood </option>
                <option value="Crouch End ">Crouch End </option>
                <option value="Croydon ">Croydon </option>
                <option value="Dalston ">Dalston </option>
                <option value="Ealing ">Ealing </option>
                <option value="Earls Court ">Earls Court </option>
                <option value="Edgware ">Edgware </option>
                <option value="Exeter ">Exeter </option>
                <option value="Farringdon ">Farringdon </option>
                <option value="Fleet Street ">Fleet Street </option>
                <option value="Fulham ">Fulham </option>
                <option value="Glasgow ">Glasgow </option>
                <option value="Godalming ">Godalming </option>
                <option value="Golders Green ">Golders Green </option>
                <option value="Guildford ">Guildford </option>
                <option value="Hackney ">Hackney </option>
                <option value="Hammersmith ">Hammersmith </option>
                <option value="Hampstead ">Hampstead </option>
                <option value="Highbury ">Highbury </option>
                <option value="Holborn ">Holborn </option>
                <option value="Ipswich ">Ipswich </option>
                <option value="Angel ">Angel </option>
                <option value="Kensington ">Kensington </option>
                <option value="Kentish Town ">Kentish Town </option>
                <option value="Kilburn ">Kilburn </option>
                <option value="Kings Lynn ">Kings Lynn </option>
                <option value="Kingston ">Kingston </option>
                <option value="Knightsbridge ">Knightsbridge </option>
                <option value="Leadenhall Market ">Leadenhall Market </option>
                <option value="Lewisham ">Lewisham </option>
                <option value="Lisburn ">Lisburn </option>
                <option value="Lincoln ">Lincoln </option>
                <option value="Londonderry ">Londonderry </option>
                <option value="Luton ">Luton </option>
                <option value="Maidenhead ">Maidenhead </option>
                <option value="Maidstone ">Maidstone </option>
                <option value="Mansion House ">Mansion House </option>
                <option value="Marble Arch ">Marble Arch </option>
                <option value="Marlow ">Marlow </option>
                <option value="Marylebone ">Marylebone </option>
                <option value="Mayfair ">Mayfair </option>
                <option value="Milton Keynes ">Milton Keynes </option>
                <option value="Muswell Hill ">Muswell Hill </option>
                <option value="Newbury ">Newbury </option>
                <option value="Northampton ">Northampton </option>
                <option value="Norwich ">Norwich </option>
                <option value="Notting Hill Gate ">Notting Hill Gate </option>
                <option value="Oxford ">Oxford </option>
                <option value="Peckham ">Peckham </option>
                <option value="Peterborough ">Peterborough </option>
                <option value="Pimlico ">Pimlico </option>
                <option value="Portobello ">Portobello </option>
                <option value="Putney ">Putney </option>
                <option value="Queensway ">Queensway </option>
                <option value="Reading ">Reading </option>
                <option value="Richmond ">Richmond </option>
                <option value="Romford ">Romford </option>
                <option value="Shepherds Bush ">Shepherds Bush </option>
                <option value="Slough ">Slough </option>
                <option value="Soho ">Soho </option>
                <option value="South Kensington ">South Kensington </option>
                <option value="Southend ">Southend </option>
                <option value="St Johns Wood ">St Johns Wood </option>
                <option value="Staines ">Staines </option>
                <option value="Streatham ">Streatham </option>
                <option value="Surbiton ">Surbiton </option>
                <option value="Sutton ">Sutton </option>
                <option value="Swiss Cottage ">Swiss Cottage </option>
                <option value="Sydenham ">Sydenham </option>
                <option value="Tooting ">Tooting </option>
                <option value="Tottenham Court Road ">Tottenham Court Road </option>
                <option value="Tunbridge Wells ">Tunbridge Wells </option>
                <option value="Twickenham ">Twickenham </option>
                <option value="Uxbridge ">Uxbridge </option>
                <option value="Victoria ">Victoria </option>
                <option value="Walthamstow ">Walthamstow </option>
                <option value="Walworth Road ">Walworth Road </option>
                <option value="Wandsworth ">Wandsworth </option>
                <option value="Watford ">Watford </option>
                <option value="Welwyn Garden City ">Welwyn Garden City </option>
                <option value="Westminster ">Westminster </option>
                <option value="Wimbledon ">Wimbledon </option>
                <option value="Windsor ">Windsor </option>
                <option value="Wokingham ">Wokingham </option>
                <option value="Wood Green ">Wood Green </option>
                <option value="Woolwich ">Woolwich </option>
                </select>
                </td>
                </tr>
                <tr>
                <td>

                </td>
                <td>
                <input type="hidden" id="STORE_EMAIL_FIELD" name="STORE_EMAIL_FIELD" value="">
                </td>
                </tr>
                <tr>
                <td>

                </td>
                <td>
                <input type="hidden" id="WEB_HOME_FIELD" name="WEB_HOME_FIELD" value="">
                </td>
                </tr>
                <tr>
                <td>

                </td>
                <td>
                <input type="hidden" id="SOURCE_FIELD" name="SOURCE_FIELD" value="St Petes">
                </td>
                </tr>
                <tr>
                <td>
                Opt in to marketing emails
                </td>
                <td>
                <input type="checkbox" id="OPTIN_FIELD" name="OPTIN_FIELD" value="true">
                </td>
                </tr>

                <tr>
                    <td style="border:1px solid red">
                    <img id="captcha" src="/maininc/securimage/securimage_show.php" alt="CAPTCHA Image" />
                    </td>
                    <td>
                    <input type="text" name="captcha_code" size="10" maxlength="6" />
                <a href="#" onclick="document.getElementById('captcha').src = '/maininc/securimage/securimage_show.php?' + Math.random(); return false">[ Different Image ]</a>

                    </td>
                </tr>

                <tr>
                <td colspan="2" align="center">
                <input type="button" value="Submit Form" onClick="javascript:validForm();">
                </td>
                </tr>
                </table>
                </form>
                </body>
                </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:48:21.070

验证验证码*不是在客户端完成的*，有几个很好的理由：

1.  客户端可以禁用 JS
2.  用户可以看到您发送给客户端的任何代码，因此机器人很快就会获取验证码内容并向您的网站发送垃圾邮件
3.  仅 JS 验证是*远远*不够的

如果您粘贴的代码实际上是公司“出售”的代码，请寻找其他供应商（老实说，这是糟糕的代码）。
在不提交表单的情况下验证验证码的唯一方法是发送 AJAX 请求，但要小心！这意味着机器人可以随意尝试随机字符串，每次发送请求并获得即时反馈，而无需发送验证码以外的任何其他数据。

是的，验证码很烦人，很麻烦，是的，它们会破坏用户体验，是的，它们会激怒我们所有人，但它们是必要的邪恶。只需保留验证码，将其与表单一起发送，并希望您的用户能够理解它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:48:06.077

“在不离开表格的情况下验证 CAPTCHA”是什么意思？无论如何，您必须提交表单才能将数据发送到服务器，因此只需验证它即可。您可以添加一些预先验证的孩子以确保提供正确的答案，但是任何确定的垃圾邮件发送者都将能够删除您的客户端验证。您必须进行服务器端验证才能获得 CAPTCHA 提供的任何好处。

你有 CAPTCHA 图像制作工作吗？CAPTCHA 背后的大问题是，必须生成大多数人类可读但计算机 OCR 难以识别的单词或数字的图像，然后能够验证用户提供的输入是否与这些图像匹配。如果您是该领域的新手，这不是您可以自己做的事情。

如果您尚未制作 CAPTCHA 图像，请在线搜索[CAPTCHA 服务](https://www.google.com/search?q=captcha+service)提供商。甚至还有一些免费的，比如[captchas.net](http://captchas.net/)（虽然我不能保证它们的质量或可靠性）。

另外，我想补充一点，您可以采取一些措施来减少或消除不涉及验证码的垃圾邮件：

*   确保表单显示有一个隐藏字段，其中包含特定于当前会话的值。自动垃圾邮件发送者将不得不抓取您的表单。
*   将 cookie 设置为短时间间隔，看看它是否消失了。如果不是，那么它就不是真正浏览器的真正用户。
*   为子域设置 cookie，然后查看是否可以从同一顶级域的另一个子域访问它。如果可以，那么它不是真正的浏览用户。
*   让 javascript 执行一些相当复杂的计算（您已经知道正确的答案）并让它在隐藏的表单字段中提交答案。如果您改变计算和运行的代码，那么某人可能很难针对您的网站进行自动化处理。
*   速率限制连接到您的站点的尝试。特别是，如果有人要求填写至少需要一分钟的表格，请不要接受不到一分钟的帖子。
*   实际上，对于所有先前的想法，不是阻止垃圾邮件发送者，而是接受他们的帖子，但如果它被归类为非真实浏览器或垃圾邮件，则*仅*将其显示给原始 IP 地址/用户。他可能没有意识到该帖子没有向其他人展示，并且这种缺乏反馈将阻碍他向您的网站发送垃圾邮件的努力。
*   提供五个提交按钮，但使用 CSS 隐藏除一个之外的所有按钮。确保您点击了正确的 - 并使其具有一些在每次请求表单时都不同的代码。垃圾邮件发送者必须解析 CSS 规则以找出显示的是哪一个。
*   慢慢旋转表单目标、表单名称、表单元素名称和站点的一些基本 html 结构（以不改变最终结果的方式）。如果您旋转得太快，垃圾邮件发送者会弄清楚您在做什么。如果您的轮换只是每隔几天，垃圾邮件发送者将成功地编写您的网站（假设他克服了其他障碍）然后继续前进。但是然后你把所有东西都换了，他的剧本就坏了。
*   呈现一个表单，然后每分钟使用一次 ajax 来获取一个新的隐藏表单值。不要只返回一个值，而是返回运行以更新表单的 javascript。进取的自动垃圾邮件发送者将被迫解析 JSON 或 javascript，以找出如何让表单在正确的时间提交正确的值。当然，在服务器端，您会期望表单在提交时具有正确的值。
*   使用 javascript 记录接收焦点的控件。让用户点击他想要提交的每个表单字段，以便成功。浏览器保存了他不完整的表单数据的用户可能会感到不便，但正常使用该网站并且只是在表单中输入数据然后提交的人不会。
*   寻找会被非浏览器脚本遗漏的有效请求标头。当请求标头没有意义时，应用更高标准的表单验证（例如验证码）。
*   使用重定向来确保垃圾邮件发送者必须支持它们。
*   总而言之，做任何可以提高标准的事情，这样试图向您的网站发送垃圾邮件的自定义代码就会遇到问题。您可能必须采取特殊措施来为您的真实用户保留可用性，但我相信这是可以做到的。

PS您问题中的电子邮件地址验证不好。它将阻止使用许多完全有效的字符。例如，地址的名称部分应该允许的不仅仅是字母和数字。特别是，`+`是一个有效的字符，*许多*人使用。不要对你的用户这样做。

# excel - 从 A 列剪切值并将其粘贴到上一行的 B 列

> ID：13650310
> 
> 赞同：1
> 
> 时间：2012-11-30T17:40:23.340
> 
> 标签：excel, excel-2010, vba

我需要帮助为 Excel 2010 (Windows 7) 编写 VBA 脚本。

我有数千个这样的条目：

```
Data ID Number1 (A1)
Data Article Name1 (A2)
Data ID Number2 (A3)
Data Article Name2 (A4)
Data ID Number 3 (A5)
Data Article Name 3 (A6)
Data ID Number 3 (A7)
Data Article Name 3 (A8) 
```

==============

我需要它看起来像这样：

```
Data ID Number1 (A1)     Data Article Name1 (B1)
Data ID Number2 (A2)     Data Article Name2 (B2)
Data ID Number 3 (A3)    Data Article Name3 (B3)
Data ID Number 4 (A4)    Data Article Name4 (B4) 
```

我需要能够将其作为一个自动过程来执行，因为我有大量条目。

*编辑*更改了文章以使其更清晰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:21:04.810

这行得通吗？从您的问题中不确定是否要删除包含文章的原始行。

```
Dim row
Dim lastRow
lastRow = 8

For row = lastRow To 2 Step -1
    If row Mod 2 = 0 Then
        ' copy data
        Cells(row - 1, 2) = Cells(row, 1).Value
        ' delete row
        Cells(row, 1).EntireRow.Delete
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:38:19.180

此宏将遍历 A 列中的所有单元格。如果单元格行是偶数，则该值将移动到 B 列（偏移量为 (-1,1)。然后将单元格添加到一个范围为For 循环完成后删除。

```
Sub test()

    Dim i As Range
    Dim delrows As Range

    For Each i In Intersect(ActiveSheet.UsedRange, Range("A:A"))
        If (i.Row Mod 2) = 0 Then
            i.Offset(-1, 1).Value = i.Value

            If delrows Is Nothing Then
                Set delrows = i
            Else
                Set delrows = Union(i, delrows)
            End If
        End If
    Next i

    delrows.EntireRow.Delete

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:38:29.990

这段代码有点简单，但应该可以解决问题

```
Sub Shift()
'Set to your first value you want shifted. In your example A2.
Range("A2").Select

    Do

        ActiveCell.Cut
        ActiveCell.Offset(-1, 1).Select
        ActiveSheet.Paste
        ActiveCell.Offset(1, -1).Select
        ActiveCell.EntireRow.Select
        ActiveCell.Delete

    ActiveCell.Offset(1, 0).Select

    Loop Until ActiveCell.Value = "" And ActiveCell.Offset(-1, 0).Value = ""
End Sub 
```

祝你有美好的一天！

# ssh - 将文件复制并附加到远程计算机：cat 错误

> ID：13650312
> 
> 赞同：2
> 
> 时间：2012-11-30T17:40:24.573
> 
> 标签：ssh, append, scp, cat

所以，我有一点问题：

`scp`在我意识到 scp 覆盖而不是追加之前，我最初是用来将文件从本地机器复制到远程机器的。但我需要它附加。所以我做了一些谷歌搜索，这个替代方法使用`cat`并`ssh`弹出：

```
cat localfile | ssh user@remoteserver "cat >> remotefile" 
```

问题是，每当我使用该方法时，都会遇到这个有趣的错误：

```
bash: cat: command not found 
```

当我通常 ssh 到我的远程机器时，我就可以`cat`了，所以我正在寻找解决这个问题的帮助，或者找到一种方法来仅使用来自本地主机的命令进行附加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:30:23.810

通过 ssh 运行时，您`$PATH`可能会有所不同。

无论如何，您可以运行`which cat`以查找`cat`实际放置在远程计算机上的位置并在命令调用中硬编码路径。例如

```
ssh user@remoteserver "/sbin/cat >>remotefile" <localfile 
```

（顺便说一句，你真的不需要 local `cat`）。

另一种选择是使用支持附加的 SFTP 客户端。

# ruby - 如何检查文件是否正在被其他应用程序使用？

> ID：13650314
> 
> 赞同：5
> 
> 时间：2012-11-30T17:40:29.533
> 
> 标签：ruby, linux

我需要处理一个视频文件，并且我需要在打开它之前完成该文件。所以我需要在处理文件之前检查文件是否被打开，但被另一个进程打开。知道如何检查吗？我正在使用 Linux。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T17:43:14.513

没有任何额外的宝石，一个稍微浪费的方法可能是：

```
if %x[lsof -F n].split("\n").grep(/yourfilename/).empty?
  # all clear
else 

end 
```

或者

```
if system %Q[lsof #{filename}] 
  # still open..
else 
  # all clear
end 
```

或者，忽略我被黑的建议并为此使用 gem：[https ://github.com/jordansissel/fosl](https://github.com/jordansissel/fosl)

# sql-server - 特定格式的平均时间和显示（Coldfusion）

> ID：13650319
> 
> 赞同：1
> 
> 时间：2012-11-30T17:40:39.743
> 
> 标签：sql-server, coldfusion, date-format, datediff

**编辑：**多亏了 barnyr，我得到了以秒为单位的平均值，所以现在我只需要将其转换为正确的格式。不幸的是，Peter 提到的 Coldfusion 函数只接受一个 datetime 对象，所以我又被转换难住了。

我有两个问题。我需要生成 Y 用户完成任务的平均时间，然后以特定格式显示结果：x 年 x 月 x 周 x 天 x 小时 x 分钟 x 秒。

我的后端数据库是 SQL Server 2008，我通过 Coldfusion 10 运行查询。两列都是日期时间字段。

查询是（类似于）：

```
SELECT    Started_Date, Completed_Date
FROM      tbl_progress
WHERE     0=0 
```

然后我需要遍历查询结果，获取 Completed_Date 和 Started_Date 之间的差异（即持续时间），对结果进行平均，然后按上述方式显示。

从 Stackoverflow 上的另一个线程我得到了以下代码，但它只适用于所需格式的天/小时/分钟/秒部分。

```
<cfloop query="complete_time">
    <cfset completed = ParseDateTime(complete_time.Completed_Date) />
    <cfset started = ParseDateTime(complete_time.Started_Date) />
    <cfset difference = (completed - started) /> 
    <cfset fixed_diff = Fix(difference) />  
    <cfset days = fixed_diff /> 
    <cfset hours = TimeFormat(difference, "H") /> 
    <cfset minutes = TimeFormat(difference, "m") />  
    <cfset seconds = TimeFormat(difference, "s")/ >
</cfloop> 
```

我需要知道如何/在哪里进行平均，以及如何获得所需格式的年/月/周值。日期数学绝对不是我最好的科目！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:56:10.510

如果可以的话，我会在数据库中完成工作：

```
SELECT    Started_Date, 
          Completed_Date, 
          DATEDIFF(Second, Started_Date, Completed_Date) AS sec_diff
FROM      tbl_progress 
```

然后，您可以在 ColdFusion 中将秒计算为分钟、小时等。

在处理结果时，您可以总结这些`sec_diff`值。然后将它们除以结果集中的行数。

您还可以平均查询中的结果。看看 SQL 的`AVG()`函数。

我不在 SQL 服务器附近，但您可以使用以下内容：

```
SELECT    Started_Date, 
          Completed_Date, 
          DATEDIFF(Second, Started_Date, Completed_Date) AS sec_diff,
          AVG(DATEDIFF(Second, Started_Date, Completed_Date)) AS average_task_time
FROM      tbl_progress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:55:02.727

我建议使用`datediff`sql server 中的函数来获取秒数。然后在 ColdFusion 中，您不使用时间格式，而是进行数学运算。 `Timeformat()`接受一个日期时间对象并返回一个字符串。

# algorithm - 查找重复字符的函数式编程算法

> ID：13650326
> 
> 赞同：2
> 
> 时间：2012-11-30T17:41:08.193
> 
> 标签：algorithm, functional-programming, repeat

我正在将[“zxcvbn”密码强度算法](https://tech.dropbox.com/2012/04/zxcvbn-realistic-password-strength-estimation/)从 JavaScript 转换为 Scala。我正在寻找一种纯函数算法来查找字符串中的重复字符序列。

我知道我可以从 JavaScript 翻译命令式版本，但出于函数式编程通常给出的所有原因，我想尽可能地保持它没有副作用。

该算法可以是 Scala、Clojure、Haskell、F#，甚至是伪代码。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:37:03.867

使用 Haskell 的标准高阶函数：

*   `Data.List.group`查找列表中相等元素的运行：

    ```
    > group "abccccdefffg"
    ["a","b","cccc","d","e","fff","g"] 
    ```

*   我们关心这些运行的长度，而不是元素本身：

    ```
    > let ls = map length $ group "abccccdefffg"
    > ls
    [1,1,4,1,1,3,1] 
    ```

*   接下来，我们需要每个组的起始位置。这只是组长度的部分总和，我们可以使用 来计算`scanl`：

    ```
    > scanl (+) 0 ls
    [0,1,2,6,7,8,11,12] 
    ```

*   压缩这两个列表会给我们所有的起始位置对和相应的长度：

    ```
    > zip (scanl (+) 0 ls) ls
    [(0,1),(1,1),(2,4),(6,1),(7,1),(8,3),(11,1)] 
    ```

*   最后，我们删除长度小于 3 的组。

    ```
    > filter ((>= 3) . snd) $ zip (scanl (+) 0 ls) ls
    [(2,4),(8,3)] 
    ```

把它放在一起：

```
import Data.List (group)

findRuns :: Eq a => [a] -> [(Int, Int)]
findRuns xs = filter ((>= 3) . snd) $ zip (scanl (+) 0 ls) ls 
  where ls = map length $ group xs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:25:34.357

这是另一个 Scala 解决方案

```
def findRuns(password: String): List[(Int, Int)] = {
  val zipped = password.zipWithIndex
  val grouped = zipped groupBy { case (c, i) => c }
  val filtered = grouped.toList.filter{ case (c, xs) => xs.length >= 3 }
  val mapped = filtered map { case (c, xs) => xs }
  val result = mapped map (xs => (xs.head._2, xs.length))
  result.sorted
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T22:42:23.557

Clojure 版本的[hammar](https://stackoverflow.com/users/98117/hammar)算法

```
 (defn find-runs [s]
    (let [ls (map count (partition-by identity s))]
        (filter #(>= (% 1) 3) 
                (map vector (reductions + 0 ls) ls)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:51:57.727

这是我想出的 Scala 解决方案：

```
def repeatMatch(password: String): List[(Int, Int)] = {
  val length = password.length

  @tailrec
  def loop(offset: Int,
           result: List[(Int, Int)]): List[(Int, Int)] = {
    if (offset >= length) result.reverse
    else {
      val candidate = password.charAt(offset)
      val run = password.substring(offset).zip(Array.fill(length)(candidate)).
        takeWhile{case (first, second) => first == second}.length
      if (run > 2) loop(offset + run, (offset, run) :: result)
      else loop(offset + 1, result)
    }
  }

  loop(0, List.empty[(Int, Int)])
} 
```

对于测试用例`repeatMatch("abccccdefffg")`，结果是`List((2,4), (8,3))`

也许`run`可以改进计算。

# java - 在战争部署后更改 xml/property 文件而不重新启动 Tomcat 7

> ID：13650333
> 
> 赞同：2
> 
> 时间：2012-11-30T17:41:22.357
> 
> 标签：java, spring, maven, tomcat7, web-deployment

在我的网络应用程序（maven，spring）中，我有以下项目结构：

```
MyWebApp
--src
  --main
    --java
      ...
    --resources
      --spring
        spring_stuff.xml
        ...
      mywebapp.properties
      mylogs.xml
    --webapp
      --spring
        --appServlet
          servlet-context.xml
      ...
pom.xml 
```

一个我使用 将`WAR`文件部署到 Tomcat 服务器`Manager App`，war 被解压并且上面的文件在`webapp`文件夹中可用。但是，如果我不允许修改这些文件，因为它们已被 Web 服务器“使用”。为了能够在 Tomcat 运行时修改属性文件而无需重新启动它，我可以做些什么不同的事情？

有没有办法（可能在 maven/spring 中）设置一个项目，以便根据 WAR 的部署位置启用/禁用不同的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:10:17.637

我使用一个名为[Jrebel的程序](http://www.zeroturnaround.com/jrebel/)

它检查代码更改，并在编译时自动部署战争，而无需重新启动 tomcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T08:39:54.680

看起来像一个老问题，但这个问题中的问题陈述是使用 JMX 的完美案例，它是一个基于 Web 的控制台，可以在不重新启动服务器的情况下更新消息 bean。也有 JConsole，但它不是基于 Web 的。

# html - 在 html5 画布上绘画不是绘画

> ID：13650337
> 
> 赞同：1
> 
> 时间：2012-11-30T17:41:39.257
> 
> 标签：html, html5-canvas

我无法在 html5 画布上绘制矩形。我正在调用此函数，但没有显示任何内容。我知道它的工作方式，因为我可以向它添加警报并且它工作得很好。有什么想法还是我只是傻。如果您想查看完整代码，该项目位于[http://tetris.townsendwebdd.com](http://tetris.townsendwebdd.com)，谢谢

```
paintContainer: function(){//doesn't work
    var cont = this.container;
    this.context.fillStyle = cont.color;
    this.context.fillRect(cont.x, cont.y, cont.width, cont.height);
}

paintContainer: function(){//works just fine
            alert('hi');
    var cont = this.container;
    this.context.fillStyle = cont.color;
    this.context.fillRect(cont.x, cont.y, cont.width, cont.height);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:00:35.933

参考您网站上的代码，这是因为背景在您尝试绘制的填充已经绘制之后加载。因此，如果您将代码更改为：

```
background.onload = function() {
    context.drawImage(background, 0, 0);
    drawTitle();        
}

var b = new Board(context); 
```

而是绘制`Board`内部`onload`：

```
background.onload = function() {
    context.drawImage(background, 0, 0);
    drawTitle();    
    var b = new Board(context); 
} 
```

你会得到你想要的效果。我建议您创建一个在加载资源后继续游戏的方法内部调用的`onload`方法。

# r - R：将服务器上的软件包安装到 R 的非默认版本

> ID：13650354
> 
> 赞同：0
> 
> 时间：2012-11-30T17:43:05.917
> 
> 标签：r

我有自己的 R 包保存为`mypackage.tar.gz`文件。我想使用非默认版本的 R 将这个包安装到服务器上。到目前为止，我想到了类似的东西：

`"/dir/R-x.x-x/bin/R" CMD INSTALL mypackage.tar.gz`

但收效甚微。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:49:06.837

这是您可以执行的操作：

1.  将“另一个 R”放在一边

2.  扩展路径以包含它：`PATH="/opt/newR/bin:$PATH`

3.  调用 R 时使用它： `PATH="/opt/newR/bin:$PATH" R CMD INSTALL ...`

4.  简单地告诉`R CMD INSTALL`in 3\. 把东西放在哪里`--library | -l`

现在都在一起了：

`PATH="/opt/newR/bin:$PATH" R CMD INSTALL -l /opt/newRlib/ xts`

# jquery - ASP 相当于 isset($_POST)

> ID：13650363
> 
> 赞同：2
> 
> 时间：2012-11-30T17:43:42.610
> 
> 标签：jquery, asp.net, colorbox

我有一个在文档完成加载后在页面上打开的颜色框。问题是我只希望它在有人从链接单击时加载。我会在 PHP 中使用表单 POST 或 GET 变量执行此操作，但该站点是用 ASP 构建的，它是一个我无法从电子商务站点更改的框架。

我试图查看 ASP 中是否存在与 if isset($_POST) 等效的内容，但似乎没有。有没有办法在 ASP 中做到这一点？

```
<% IF (Request.Form("clicked")="clicked") %>

<script>
jQuery(document).ready(function(){
  jQuery.colorbox({
    iframe      : true,
    innerWidth  : 430,
    innerHeight : 208,
    href        : "/v/browse_market.asp"
  });
});
</script>
<%ELSE%>
<%END IF%> 
```

这很近吗？我在另一个页面上有一个表单，它向该页面提交了一个名为“clicked”和 value="clicked" 的隐藏帖子变量。它似乎仍然总是显示（无论我是否点击）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:47:33.050

`IF (request.form("element") <> "") THEN` 是 asp 中的正确方法（经典） `if(Request.Form["element"] <> "")`是 ASP.NET 中的正确方法

# c++ - Visual Studio 中 C++ 代码的变量依赖关系图

> ID：13650364
> 
> 赞同：0
> 
> 时间：2012-11-30T17:43:44.590
> 
> 标签：c++, c, visual-studio, graph

是否有任何工具可以让我清楚地看到使用 Visual Studio 在 C/C++ 中使用变量的位置？我需要重构和消除某些变量。手动追捕它们并不总是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:47:55.483

[Visual Assist X](http://www.wholetomato.com/)具有非常强大的重构功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:48:49.510

当然。更改变量的名称。尝试编译。注意错误在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:52:44.883

右键单击有问题的变量。在弹出菜单中单击“查找所有引用”。

# android - Android Facebook 教程 - 用户为空

> ID：13650365
> 
> 赞同：0
> 
> 时间：2012-11-30T17:43:56.057
> 
> 标签：android, facebook, facebook-android-sdk

我正在试用面向 Android 开发人员的 Facebook 教程，但在第[2 步遇到问题 - 个性化](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/personalize/)

我试图通过打字而不是复制和粘贴教程中的代码来学习，所以我可能打错了一些东西。我似乎找不到它。

我的 profilePicture 和用户名没有显示，因为即使我已授权该应用程序，用户似乎也为空。所以我的选择屏幕显示，但它显示的是一个空的用户配置文件。即使在上一个教程中，当我创建一个 LoginFragment 时，我的用户也没有显示在那里。有什么我做错了吗？

以下是我的完整代码减去导入语句和类声明

```
private static final int SPLASH = 0;
private static final int SELECTION = 1;
private static final int SETTINGS = 2;
private static final int FRAGMENT_COUNT = SETTINGS + 1;

private Fragment[] fragments = new Fragment[FRAGMENT_COUNT];
private static final String FRAGMENT_PREFIX = "fragment";

private static final String TAG = "MyFirstApp_FacebookMain.java";
private boolean isResumed = false;
private boolean restoredFragment = false;

private MenuItem settings;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_facebook_main);

    for(int i=0; i < fragments.length; i++) {
        restoreFragment(savedInstanceState, i);
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    FragmentManager manager = getSupportFragmentManager();

    // Since we are only adding one fragment at a time, we can only save one.
    Fragment f = manager.findFragmentById(R.id.body_frame);
    for(int i=0; i < fragments.length; i++) {
        if(fragments[i] == f) {
            manager.putFragment(outState, getBundleKey(i), fragments[i]);
        }
    }
}

@Override
public void onResume() {
    super.onResume();
    isResumed = true;
}

@Override
public void onPause() {
    super.onPause();
    isResumed = false;
}

@Override
protected void onSessionStateChange(SessionState state, Exception exception) {
    if(isResumed) {
        FragmentManager manager = getSupportFragmentManager();
        int backStackSize = manager.getBackStackEntryCount();
        for(int i=0; i < backStackSize; i++) {
            manager.popBackStack();
        }
        if(state.isOpened()) {
            FragmentTransaction transaction = manager.beginTransaction();
            transaction.replace(R.id.body_frame, fragments[SELECTION]).commit();
        } else if (state.isClosed()) {
            FragmentTransaction transaction = manager.beginTransaction();
            transaction.replace(R.id.body_frame, fragments[SPLASH]).commit();
        }
    }
}

@Override
protected void onResumeFragments() {
    super.onResumeFragments();
    Session session = Session.getActiveSession();
    if (session == null || session.getState().isClosed()) {
        session = new Session(this);
        Session.setActiveSession(session);
    }

    FragmentManager manager = getSupportFragmentManager();

    if (restoredFragment) {
        return;
    }

    // If we already have a valid token, then we can just open the session silently,
    // otherwise present the splash screen and ask the user to login.
    if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
        // no need to add any fragments here since it will be 
        // handled in onSessionStateChange
        session.openForRead(this);
    } else if (session.isOpened()) {
        // if the session is already open, try to show the selection fragment
        Fragment fragment = manager.findFragmentById(R.id.body_frame);
        if (!(fragment instanceof SelectionFragment)) {
            manager.beginTransaction().replace(R.id.body_frame, 
                    fragments[SELECTION]).commit();
        }
    } else {
        FragmentTransaction transaction = manager.beginTransaction();
        transaction.replace(R.id.body_frame, 
              fragments[SPLASH]).commit();
    }
}

private String getBundleKey(int index) {
    return FRAGMENT_PREFIX + Integer.toString(index);
}

private void restoreFragment(Bundle savedInstanceState, int fragmentIndex) {
    Fragment fragment = null;
    if(savedInstanceState != null) {
        FragmentManager manager = getSupportFragmentManager();
        fragment = manager.getFragment(savedInstanceState, getBundleKey(fragmentIndex));
    }
    if(fragment != null) {
        fragments[fragmentIndex] = fragment;
        restoredFragment = true;
    } else {
        switch(fragmentIndex) {
            case SPLASH:
                fragments[SPLASH] = new SplashFragment();
                break;
            case SELECTION:
                fragments[SELECTION] = new SelectionFragment();
                break;
            case SETTINGS:
                fragments[SETTINGS] = new LoginFragment();
                break;
            default:
                Log.w(TAG, "invalid fragment index");
                break;
        }
    }
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    FragmentManager manager = getSupportFragmentManager();
    Fragment currentFragment = manager.findFragmentById(R.id.body_frame);
    // only add the menu when the selection fragment is showing
    if (currentFragment == fragments[SELECTION]) {
        if (menu.size() == 0) {
            settings = menu.add(R.string.settings);
        }
        return true;
    } else {
        menu.clear();
        settings = null;
    }
    return false;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.equals(settings)) {
        FragmentManager manager = getSupportFragmentManager();
        FragmentTransaction transaction = manager.beginTransaction();
        transaction.add(R.id.body_frame, fragments[SETTINGS]).addToBackStack(null).commit();
        return true;
    }
    return false;
} 
```

在 SelectionFragment.java 中

```
public class SelectionFragment extends Fragment {
private ProfilePictureView profilePictureView;
private TextView userNameView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    View view = inflater.inflate(R.layout.selection, container, false);

    // Find the user's profile picture custom view
    profilePictureView = (ProfilePictureView) view.findViewById(R.id.selection_profile_pic);
    profilePictureView.setCropped(true);

    // Find the user's name view
    userNameView = (TextView) view.findViewById(R.id.selection_user_name);

    // Get the active session
    final Session session = Session.getActiveSession();
    if (session != null && session.isOpened()) {
        // if the session is open, make an API call to get user data
        // and define a callback to handle the response
        Request request = Request.newMeRequest(session, new Request.GraphUserCallback() {

            @Override
            public void onCompleted(GraphUser user, Response response) {
                // if the response is successful
                if (session == Session.getActiveSession()) {
                    if (user != null) {
                        // set the userid for the ProfilePictureView
                        // view that in turn displays the profile picture
                        profilePictureView.setProfileId(user.getId());
                        // set the textview to the user's name
                        userNameView.setText(user.getName());
                    }
                }
            }
        });
        Request.executeBatchAsync(request);
    }
    return view;
}
} 
```

最后是 SplashFragment.java

```
public class SplashFragment extends Fragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.splash, container, false);
    return view;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-15T15:45:38.543

user1258600，我有同样的问题，我解决了！！

您的代码没有任何问题...

您只是缺少 Android 清单中的 INTERNET 权限！

尝试添加

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

到你的 Android 清单，你会没事的！！

为了弄清楚这一点，我进入了发现用户为空的语句，并打印了错误，这表明我将 INTERNET 权限添加到我的 android 清单中。

```
@Override
public void onCompleted(GraphUser user, Response response) {
// If the response is successful
    if (session == Session.getActiveSession()) {
    System.out.println("user: " + user);
                if (user != null) {
                    // Set the id for the ProfilePictureView
                    // view that in turn displays the profile picture.
                    profilePictureView.setProfileId(user.getId());
                    // Set the Textview's text to the user's name.
                    userNameView.setText(user.getName());
                }
            }
            if (response.getError() != null) {
                // Handle errors!!
                System.out.println("response error: " + response.getError());
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:58:05.200

使用此代码登录 facebook

```
mFacebook = new Facebook(APP_ID);
SessionStore.restore(mFacebook, getApplicationContext());
mAsyncRunner = new AsyncFacebookRunner(mFacebook); 
```

这使用此功能获取个人资料图片**注释**根据您的需要修改它:)

```
void update_user_image() {
    Bundle params = new Bundle();
    params.putString("fields", "id,picture");
    mAsyncRunner.request("me", params, new AsyncRequestListener(this) {

        @Override
        public void onComplete(JSONObject obj, Object state) {
            try {
                String Image_url = obj.optString("picture");
                if (Image_url.contains("_q.jpg"))
                    Image_url = Image_url.replace("_q.jpg", "_n.jpg");
                if (Image_url.contains("_s.jpg"))
                    Image_url = Image_url.replace("_s.jpg", "_n.jpg");
                if (userImage != null && userImage.getImageUrl() != null)
                    if (!userImage.getImageUrl().equals(Image_url)) {
                        Editor editor = mActivity.getSharedPreferences("userInformation", Context.MODE_PRIVATE).edit();
                        editor.putString("ImageURL", Image_url);
                        editor.commit();
                        final String latest_image_url = Image_url;
                        main.this.runOnUiThread(new Runnable() {

                            @Override
                            public void run() {
                                userImage.setImageUrl(latest_image_url);                                
                                userImage.loadImage();

                            }
                        });
                    }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:07:37.197

出于绝望，我再次重新启动了整个项目，它现在可以工作了。我想我永远不会发现出了什么问题。:(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-04T01:20:16.903

作为 satoukum 帖子的后续内容，请确保将 INTERNET 权限标签放在 `<application>`标签之外。对于经验丰富的 Android 开发人员来说，这可能是轻而易举的事，但 Facebook 文档并未明确说明此标签不应驻留在`<application>`标签内

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.blah.blah" >

 <uses-permission android:name="android.permission.INTERNET"/>

<application>
</application>

</manifest> 
```

# java - 如何从 Java 中的 MIME 类型确定适当的文件扩展名

> ID：13650372
> 
> 赞同：37
> 
> 时间：2012-11-30T17:44:32.517
> 
> 标签：java, amazon-s3, apache-tika

我正在将文件上传到 Amazon s3 存储桶，并且可以访问 InputStream 和包含文件 MIME 类型但不包含原始文件名的字符串。在将文件推送到 S3 之前，由我实际创建文件名和扩展名。是否有库或方便的方法来确定从 MIME 类型中使用的适当扩展名？

我已经看到了一些对 Apache Tika 库的引用，但这似乎有点矫枉过正，我还不能让它成功检测文件扩展名。从我收集到的信息看来，这段代码应该可以工作，但是当我的类型变量是“image/jpeg”时，我只是得到一个空字符串

```
 MimeType mimeType = null;
    try {
        mimeType = new MimeTypes().forName(type);
    } catch (MimeTypeException e) {
        Logger.error("Couldn't Detect Mime Type for type: " + type, e);
    }

    if (mimeType != null) {
        String extension = mimeType.getExtension();
        //do something with the extension
    } 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-30T23:45:31.080

正如一些评论者所指出的，mimetypes 和文件扩展名之间没有通用的 1:1 映射......一些 mimetypes 有多个可能的扩展名，许多扩展名由多个 mimetypes 共享，而一些 mimetypes 没有扩展名。

只要有可能，您最好存储 mimetype 并继续使用它，而忘记扩展名。

也就是说，如果您确实想为给定的 mimetype 获取最常见的文件扩展名，那么 Tika 是一个不错的选择。[Apache Tika](http://tika.apache.org/)有大量它知道的 mimetypes，对于其中的许多它还知道用于检测、常见扩展、描述等的 mime 魔法。

如果您想获得 JPEG 文件的最常见扩展名，那么如[本 Apache Tika 单元测试](http://svn.apache.org/repos/asf/tika/trunk/tika-core/src/test/java/org/apache/tika/mime/PatternsTest.java)所示，您只需执行以下操作：

```
 MimeTypes allTypes = MimeTypes.getDefaultMimeTypes();
  MimeType jpeg = allTypes.forName("image/jpeg");
  String jpegExt = jpeg.getExtension(); // .jpg
  assertEquals(".jpg", jpeg.getExtension()); 
```

关键是您需要加载捆绑在 Tika jar 中的 xml 文件以获取所有 mimetypes 的定义。如果您可能也在处理自定义 mimetypes，那么 Tika 支持这些，并将第一行更改为：

```
 TikaConfig config = TikaConfig.getDefaultConfig();
  MimeTypes allTypes = config.getMimeRepository(); 
```

通过使用 TikaConfig 方法获取 MimeTypes，Tika 还将检查您的类路径中是否有自定义 mimetype 定义，并包含这些定义。

# java - 这红色 ！在eclipse中构建后标记

> ID：13650375
> 
> 赞同：0
> 
> 时间：2012-11-30T17:44:39.803
> 
> 标签：java, eclipse, build

我正在尝试在 Eclipse 中构建 Eclipse 源代码库。构建完成后，我有黄色！标记，红色！标记和红色 X 标记。

![在此处输入图像描述](../Images/0bd29ec3082919b8253675d657b3f756.png)

我认为黄色标记为警告，红色 X 标记为错误。但是，我不确定红色是什么！标记是为了什么？我打开了项目，但我在项目文件中看不到任何错误。

![在此处输入图像描述](../Images/1443450101f4c9c67769124588b563f3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:48:33.317

`Problems`您可以在View中找到有关这些错误的信息。

编辑
此[答案](https://stackoverflow.com/a/161493/1506264)可以帮助您从`Problems`View 中过滤掉不必要的内容并观察有关特定软件包的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:04:50.947

这红色 ！通常意味着项目配置有错误。最常见的错误是缺少 jar。

如果您认为一切就绪并且这是您第一次尝试构建此代码，则可能是您尚未启用 pre-req。例如，尝试创建一个新的 Eclipse 插件来启用 Eclipse 插件库。Problems 视图将告诉您找不到哪些类。从中您可以推断出缺少的罐子，并从中推断出要启用的先决条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:32:02.480

感谢 bellum 和 Chris，我可以设置为仅显示我单击的项目的错误和项目。

![在此处输入图像描述](../Images/360567c48fb45787930f9684d95ae16e.png)

现在我看到有 2 个错误导致“红色！” 为项目。

![在此处输入图像描述](../Images/b06bf368e8ad7d9717205a66a4f09d94.png)

# javascript - jQuery slickgrid 事件

> ID：13650376
> 
> 赞同：2
> 
> 时间：2012-11-30T17:44:40.020
> 
> 标签：javascript, jquery, slickgrid

我正在尝试在`slickgrid grid`. 我是根据这个例子做的：http: [//mleibman.github.com/SlickGrid/examples/example5-collapsing.html](http://mleibman.github.com/SlickGrid/examples/example5-collapsing.html)

该示例自然可以正常工作。所有内容都在正文部分`javascript`的页面内。`html`我将我的代码放在一个单独的文件中，在一个函数中，所以我猜这会以某种方式影响正确的功能。

这是我的代码：

```
function loadDrillGrid(){

     var options = {
      editable: true,
      enableAddRow: true,
      enableCellNavigation: true,
      asyncEditorLoading: false
    };

    var TaskNameFormatter = function (row, cell, value, columnDef, dataContext) {
      value = value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
      var spacer = "<span style='display:inline-block;height:1px;width:" + (15 * dataContext["indent"]) + "px'></span>";
      var idx = dataView.getIdxById(dataContext.id);
      if (data[idx + 1] && data[idx + 1].indent > data[idx].indent) {
        if (dataContext._collapsed) {
          return spacer + " <span class='toggle expand'></span>&nbsp;" + value;
        } else {
          return spacer + " <span class='toggle collapse'></span>&nbsp;" + value;
        }
      } else {
        return spacer + " <span class='toggle'></span>&nbsp;" + value;
      }
    };
    var data = [];
    var columns = [
      {id: "title", name: "Title", field: "title", width: 220, formatter: TaskNameFormatter, validator: requiredFieldValidator, cannotTriggerInsert: true},
      {id: "duration", name: "Duration", field: "duration", cannotTriggerInsert: true},
      {id: "%", name: "% Complete", field: "percentComplete", width: 80, resizable: false, formatter: Slick.Formatters.PercentCompleteBar, editor: Slick.Editors.PercentComplete, cannotTriggerInsert: true},
      {id: "start", name: "Start", field: "start", minWidth: 60, editor: Slick.Editors.Date, cannotTriggerInsert: true},
      {id: "finish", name: "Finish", field: "finish", minWidth: 60, editor: Slick.Editors.Date, cannotTriggerInsert: true},
      {id: "effort-driven", name: "Effort Driven", width: 80, minWidth: 20, maxWidth: 80,  field: "effortDriven", cannotTriggerInsert: true}
    ];
    //$(function () {
    var indent = 0;
    var parents = [];
    var grid;   

      // prepare the data
      for (var i = 0; i < 10; i++) {
        var d = (data[i] = {});
        var parent = null;

        if (Math.random() > 0.8) {
          indent++;
          parent = i - 1;
          parents.push(parent);
        } else if (Math.random() < 0.3 && indent > 0) {
          indent--;
          parent = parents.pop();
        } else if (parents.length > 0) {
          parent = parents[parents.length - 1];
        }

        if (indent == 0) {
          parent = null;
        }

        d["id"] = "id_" + i;
        d["indent"] = indent;
        d["parent"] = parent;
        d["title"] = "Task " + i;
        d["duration"] = "5 days";
        d["percentComplete"] = Math.round(Math.random() * 100);
        d["start"] = "01/01/2009";
        d["finish"] = "01/05/2009";
        d["effortDriven"] = (i % 5 == 0);
      }

    //initialize dataview
     dataView = new Slick.Data.DataView({ inlineFilters: true });
       // initialize the model

      dataView.beginUpdate();
      dataView.setItems(data);
      dataView.endUpdate();
      // initialize the grid
      grid = new Slick.Grid('#view-per-member-table', dataView, columns, options);

    grid.onClick.subscribe(function (e, args) {
        if ($(e.target).hasClass("toggle")) {
          var item = dataView.getItem(args.row);
          if (item) {
            if (!item._collapsed) {
              item._collapsed = true;
            } else {
              item._collapsed = false;
            }

            dataView.updateItem(item.id, item);
          }
          e.stopImmediatePropagation();
        }
      });
    //})
    } 
```

网格已成功加载示例数据，但是“ **grid.onClick.subscribe** ”事件在页面加载时不断被触发，不仅是在我单击网格时（至少这是我对此的理论行为的理解）和它给了我：

`Uncaught TypeError: Cannot call method 'subscribe' of null`.

我是一个真正的初学者`JS`，`jQuery`所以如果你能提供任何指示，我将不胜感激。干杯。

# layout - 同一页面上的多个d3强制布局实例

> ID：13650377
> 
> 赞同：6
> 
> 时间：2012-11-30T17:44:41.863
> 
> 标签：layout, d3.js, multiple-instances, force-layout

我的目标是使用 d3 强制布局来显示共享相同节点的两个不同网络。例如，在四个人中，您可以定义一个社交网络和一个家谱网络；节点将是相同的（人），但链接（关系）可能不同。**尽管创建了两个单独的力布局，两个单独的 svg 画布，并尝试定义单独的变量，但节点共享 x 和 y 位置信息。**这是一个最小的示例，其中一个网络上的拖动节点会更改它们在另一个网络中的位置：http: [//amath.colorado.edu/student/larremore/nodesSharingPositiond3](http://amath.colorado.edu/student/larremore/nodesSharingPositiond3)

下面，我发布了用于创建其中一个网络的函数，创建另一个网络的代码非常相似，但在所有实例中使用不同的变量名称。创建两个网络的注释代码可以在[http://amath.colorado.edu/student/larremore/nodesSharingPositiond3/lib/minimal.js](http://amath.colorado.edu/student/larremore/nodesSharingPositiond3/lib/minimal.js)中找到，用于定义变量的脚本可以在 /driver/minimalScript.js 中找到- 我没有足够的声誉直接链接这个。我很抱歉！

在 d3.force 工作方式的某个地方，位置信息是全局的或被全局选择的，或者其他什么。任何人都可以阐明这一点吗？我对保持位置信息分离的解决方案以及了解 d3.force 如何处理和更新位置计算都很感兴趣。

```
function makeYNet() {

// This populates the YactiveLinks variable with the proper YLinks. The goal is to be able to only display links whose value is above some threshold.
for (var i=0; i<YLinks.length; i++) {
    if (YLinks[i].link2 > thr) {
        YactiveLinks.push(YLinks[i]);
    }
}

// Add nodes and links to forceY
forceY
.nodes(YNodes)
.links(YactiveLinks);

// Draw lines
var Ylink = svgY.selectAll("line.link")
.data(YactiveLinks)
.enter()
.append("line")
.attr("class", "link")
.style("stroke-width", 2.0);

// Draw nodes
var Ynode = svgY.selectAll("circle.node")
.data(YNodes)
.enter().append("circle")
.attr("class", "node")
.attr("r", radius)
.attr("high",0)
.attr("id", function(d,i) {
      return ("idy" + i);
      })
.style("fill", function(d) { return color(d.group1); })
.call(forceY.drag)
;

// Define tick 
forceY.on("tick", function() {
          Ylink
          .attr("x1", function(d) { return d.source.x; })
          .attr("y1", function(d) { return d.source.y; })
          .attr("x2", function(d) { return d.target.x; })
          .attr("y2", function(d) { return d.target.y; });

          Ynode.attr("cx", function(d) { return d.x; })
          .attr("cy", function(d) { return d.y; });
          });

// Start 'er up
forceY.start();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:08:30.120

我写了一个工具，允许浏览生物[监管网络](http://www.regulatorynetworks.org)，并排显示两个 SVG 面板。每个面板都包含一个强制布局网络，由 d3.js API 绘制。

我发现完成这项工作的关键是给 DOM 中的每个元素一个唯一的名称，其中可能存在重复。

在我的例子中，我对每个面板元素使用`_left`和`_right`就足够了，其中元素分别位于左侧面板或右侧面板中。跟踪的工作量很大，但是网络渲染器可以将其调用和事件定位到正确的元素和网络。

在你的情况下：

```
.attr("id", function(d,i) {
      return ("idx" + i);
      }) 
```

您希望将`return`值替换为唯一寻址与节点关联的网络的值。无论您使用索引编号方案还是像我一样使用基于后缀的方法，诀窍是确保所有`id`名称都是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-24T01:45:40.730

Javascript 因混淆状态是否共享而臭名昭著。您的最小示例不再可用，但是当我遇到同样的问题时，我的结论是我只在需要完整克隆的地方制作浅拷贝。（我说的是 D3 作为输入的链接和节点。）

如您所见，如果没有真正的副本，结果行为将有点随机，这取决于 D3 代码是否选择“原位”修改任何共享数据。通常，出于性能原因，D3尽量*不*创建副本。

这就是 json 调用解决方法起作用的原因：通过将所有数据完全字符串化，您实际上是在强制执行克隆操作。

# android - 如何从Android中包含的库中调用函数

> ID：13650380
> 
> 赞同：0
> 
> 时间：2012-11-30T17:44:46.713
> 
> 标签：android, jar, call

我在我的 android 项目中包含了一个库，现在显示在“Android Dependencies”下。它的名字是MyLibrary，里面有显示功能，现在想调用库的那个功能，不知道怎么调用...有什么建议..??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:31:31.600

库中的所有函数都存在于不同的类中。首先访问类并创建其实例，然后调用 Display 函数。

第一步：首先你需要知道哪个类（在库中）有这个显示功能。假设 ABC 类具有您想在代码中使用的显示功能。

第 2 步：在您的代码中执行此操作

```
ABC abc = new ABC();
abc.Disaplay(); 
```

这将在 ABC 类上给出错误，这意味着您必须先导入类，所以在类的顶部写：

```
import PackageNnameOfClassInLibrary.ABC; 
```

`PackageNnameOfClassInLibrary`通常是这样的`com.actionbarsherlock.app`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:47:39.587

您现在应该看到与此库相关的所有类。只需导入必要的包。

例如在你的图书馆你有课

```
package com.example.MyClass;

class MyClass
{
     public void test() {}
} 
```

在您的主要项目中：

```
import com.example.MyClass; 
```

并使用这个类

```
MyClass myClass = new MyClass();
myClass.test(); 
```

# mvcsitemapprovider - 具有自定义路由的 MvcSiteMapProvider

> ID：13650381
> 
> 赞同：0
> 
> 时间：2012-11-30T17:44:48.397
> 
> 标签：mvcsitemapprovider

我有一个 Web 应用程序，它在 IIS 中包含一个虚拟 Web 应用程序。站点地图存在于父 Web 应用程序中，并希望将某些节点路由到虚拟应用程序视图。

我试图在父 web global.asax 中定义自定义路由，但提供者似乎默认将路由附加到每个节点，即使该节点没有配置路由。使用自定义路由或使用 MvcSiteMapProvider 路由到我的场景的适当方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:48:32.690

你有没有看过这个：

[https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps](https://github.com/maartenba/MvcSiteMapProvider/wiki/Dynamic-sitemaps)

创建动态节点时可以指定动作和控制器 - 看看这是否适用于两个不同的链接..

# python - pythonic方法来展平嵌套列表？

> ID：13650383
> 
> 赞同：-1
> 
> 时间：2012-11-30T17:44:50.887
> 
> 标签：python, list, flatten

> **可能重复：**
> [在 python 中加入列表列表 在 Python 中展](https://stackoverflow.com/questions/716477/join-list-of-lists-in-python)
> [平（不规则）列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)
> [如何在不拆分字符串的情况下展平列表？](https://stackoverflow.com/questions/5286541/how-can-i-flatten-lists-without-splitting-strings)

我有一个列表元组列表树，我想将它展平以进行查询，以便我可以打印每个元组的第一个列表的所有项目。

我可以通过 for 循环做到这一点

```
bigNest = [([item1,item2],[]),([item3],[item4])]
mergedlist = []
for listItem in bigNest:
   mergedlist += listItem[0]
print mergedList 
```

我想知道是否有一种更简单/更快的方法也适用于更大的元组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:49:24.253

编辑：对不起，最后一个帖子是错误的，你可以做一个列表理解：

```
mergedlist = []
foovar = [mergedlist.extend(i[0]) for i in bigNest] 
```

# ios - ios - 将外部文件添加到我的新项目的正确方法是什么？

> ID：13650384
> 
> 赞同：1
> 
> 时间：2012-11-30T17:44:51.097
> 
> 标签：ios, xcode, ios5

我有大约 20 个图像文件，我想要一个新项目。我试图让我的代码库干净，所以我在我打算放置图像的地方创建了一个组 src/img。

然后我尝试通过文件系统复制图像，显然我创建的组也没有创建文件夹。所以在我做任何会弄脏代码库的事情之前，我想在这里问一下。

添加我要添加的文件以便它们在 proj_name/src/img 下的组中呈现的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:55:30.543

Xcode 项目组不表示文件系统位置。

您创建的组应该由您组织，但 Xcode 还提供了有用的选项，例如当您向项目添加新文件时自动为文件夹复选框创建组。

将文件添加到项目后，您可以自由地将它们“移动”到其他组或重命名组，这些更改将存储在项目包中。当然，如果您对文件系统进行更改，则必须从项目中删除损坏的引用并重新创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:52:42.070

您可以先在文件系统的项目中创建一个文件夹 src/img，然后复制该文件夹中的所有图像。然后将整个 img 文件夹拖到 Xcode 中的项目中，但要确保在拖拽时不要勾选复制文件选项。但是，请选择创建组的选项，以便拖动的图像文件夹也是 Xcode 中的组

# jquery - Ajax 和 jquery 代码不确定它是如何工作的

> ID：13650385
> 
> 赞同：0
> 
> 时间：2012-11-30T17:44:57.157
> 
> 标签：jquery, ajax, json

有人帮我做了一些 ajax 和 jquery 代码，我正在实现新代码，但我被困在试图做一个效果。好吧，我有一个 Ajax 调用，它转到一个 API 并返回 11 个 div 并很好地显示 div，我想要做的是滑动 11 号 div，这样我就可以获得新东西推下旧东西的效果，我的div 11 有一个类“push-old-divs”我的问题是我不知道如何从 Ajax 返回“msg”中获取该 div。如何显示所有的 div 除了具有“push-old-divs”类的 div，然后在该 div 之前添加。

```
 $.ajax({
          url: "lead-activity.php?limit=0&limit_sup="+(limit+new_leads)+ "&newleadslast=" + new_leads,
            success: function(msg){ 
              $("#div_container_leads").html('<div id="div_before_new"></div>'+msg+'<div id="div_before_more"></div>');
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:05:08.570

我会首先`display:none;`在你的 php 中使用类 'push-old-divs' 放在 div 上，所以当它加载时它最初是隐藏的

然后像这样修改你的ajax成功函数

```
$.ajax({
    url: "lead-activity.php?limit=0&limit_sup="+(limit+new_leads)+ "&newleadslast=" + new_leads,
    success: function(msg){

        $("#div_container_leads").html('<div id="div_before_new"></div>'+msg+'<div id="div_before_more"></div>');
        $('.push-old-divs').slideDown(500);

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:48:09.963

所以我理解你的问题，你有 11 个 div，你想在 div#10 和 div#11 之间从 ajax msg 插入一个 div？

这是一个例子：

[http://jsfiddle.net/mnxWg/](http://jsfiddle.net/mnxWg/)

它使用`.hide(1000)`, 向上滑动，但您也可以使用 slideUp 方法

# magento - Magento - 可下载的产品冻结浏览器

> ID：13650389
> 
> 赞同：1
> 
> 时间：2012-11-30T17:45:32.610
> 
> 标签：magento, download, magento-1.4

我正在运行一个实时 Magento CE 1.4.0.1 站点。它出售可下载的文件（仅）。

目前，客户无法同时下载两个购买的文件。我的意思是点击第一个产品的链接，在下载的同时点击第二个，然后同时下载。

相反，当客户下载第一个文件时，它会冻结浏览器。下载声音时，网站的任何区域都不会接受点击输入。下载完成后，浏览器活动恢复正常。

在 CE 1.7 上也会出现此问题。论坛上有报告，但还没有解决方案：http: [//www.magentocommerce.com/boards/viewthread/69428/](http://www.magentocommerce.com/boards/viewthread/69428/)

客户希望同时下载所有购买的内容。当无法额外点击该网站时，他们也会感到困惑，并认为他们的浏览器已经崩溃。

有什么建议允许同时下载吗？

非常感谢您的想法。

# spring - Spring 集成组件 - 最佳实践

> ID：13650393
> 
> 赞同：1
> 
> 时间：2012-11-30T17:45:49.553
> 
> 标签：spring, spring-integration

我是 Spring 集成的新手，并且正在掌握这些组件。要求如下。获取 XML 消息，使用 Web 服务调用验证数据并相应地处理有效或无效数据。我们目前使用路由器来验证数据并根据验证结果路由原始有效负载。我想到了另一种方法来隔离这个流。我希望路由器只执行路由作业。对于 Web 服务验证，我正在考虑使用服务激活器。这反过来会将路由信息传递给路由器 - 可以通过使用标头丰富器。我在这里有一些问题。这是最佳做法吗？如果是这样，我们如何才能最好地将从 web 服务接收到的验证信息传递给路由器？另外，添加更多组件不会否定我们通过组件隔离获得的优势吗？请帮忙。

问候，阿拉文德。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:49:42.137

为了帮助采用最佳实践方法，请考虑明确划分职责以及将验证作为流程的一部分。例如，您可能认为验证实际上是一个过滤器，其中只有有效消息通过，无效消息被定向到拒绝通道。如果您可以将验证结果提取为布尔场景，则过滤方法将起作用。

（顺便说一句，尽量避免扩展 Spring Integration 类/接口，而是创建您可以引用的 POJO 服务。使其更易于测试和维护）

# c# - ASP.NET sessionID 不会更新

> ID：13650396
> 
> 赞同：3
> 
> 时间：2012-11-30T17:45:58.397
> 
> 标签：c#, asp.net, httpcontext, sessionid

我单击应该重新启动会话的刷新按钮：

```
protected void btnRefresh_Click(object sender, EventArgs e)
{

    HttpContext.Current.Session.Abandon();
    HttpCookie mycookie = new HttpCookie("ASP.NET_SessionId");
    mycookie.Expires = DateTime.Now.AddDays(-1);
    Response.Cookies.Add(mycookie);
    LblSessionID.Text = HttpContext.Current.Session.SessionID+
        " test btnRefresh_Click";
    LblIsNewSession.Text = Session.IsNewSession.ToString();
} 
```

但是当单击按钮时，SessionID 中的值`LblSessionID`仍然显示旧值，但另一个标签`LblIsNewSession`会将 IsNewSession 显示为 true。然后`LblSessionID`，当我使用具有`autopostback="true"`和从那里 SessionID 存在的 asp.net 控件（如下拉菜单）时，它将反映实际的 SessionID 值。

我确实使用 global.asax

知道为什么`LblSessionID`没有表现出应有的行为并且正在等待下一次回发以开始反映实际价值吗？

当我启动 Web 应用程序时，问题是相同的 -`LblSessionID`显示不同的值，然后在第一次回发后更改并从那里保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:59:12.920

这就是它的工作方式 - 如果你`Abandon`在会话中它不会反映，直到下一个请求。如果你仔细想想，它是有道理的......

假设您有一个用户访问您的站点并获得了一个会话 ID `123`（我知道，这不反映实际值）。当您单击按钮获取新的 Session ID 时，用户的请求来自旧 Session，这就是在 Session 中反映的值`Request`。一旦会话被重置（或放弃或其他），用户将获得一个新的 Session ID，`321`随后`Request`的 's 将反映该新的会话 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:50:48.877

SessionId 是不可靠的，除非您在会话中实际存储了一些东西（任何东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:51:39.533

尝试

```
 Session.RemoveAll();

    Session.Clear(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T13:21:18.933

这不是您的代码，而是记录在案的行为： *“Abandon 方法在会话状态对象中设置一个标志，指示应该放弃会话状态。在页面请求结束时检查该标志。因此，用户调用Abandon方法后仍然可以使用会话对象。页面处理完成后，会话被删除。* （来源： http: [//support.microsoft.com/kb/899918](http://support.microsoft.com/kb/899918)）

Abandon() 方法将会话集合标记为在请求结束时清除，它实际上并没有立即清除它。

您可以调用 RemoveAll() 或 Clear() 方法来即时删除对象，或者向页面本身发出 Response.Redirect 调用并重新测试数据是否存在。

# c# - 获得上个月的总访问量

> ID：13650397
> 
> 赞同：0
> 
> 时间：2012-11-30T17:46:00.397
> 
> 标签：c#, asp.net, sql

我正在尝试了解客户销售代表的访问次数。上个月我创建了这个 sql 来让我访问当前的客户，但我需要成为 Apple t 才能获得上个月的总访问次数 ![在此处输入图像描述](../Images/c65ee8b9db00566b20c24b627993836a.png)

```
declare @FromDate date, @ToDate date
set @FromDate = '11/01/2012'
set @ToDate = '11/30/2012'

SELECT COUNT(VisitTracking.customerID) AS #VISIT
FROM VisitTracking INNER JOIN Customers 
   ON VisitTracking.customerID = Customers.customerID  INNER JOIN Customer_Company 
   ON Customers.customerID = Customer_Company.customerID INNER JOIN Company 
   ON Customer_Company.companyID = Company.companyID
 WHERE VisitTracking.DateVisited  BETWEEN 
          DATEADD(m, datediff(DD, 0, @FromDate)-1, 0)  AND  
          DATEADD(M, datediff(month, 0, @ToDate)-1, 0) 
GO 

 SELECT     COUNT(VisitTracking.customerID) AS #VISIT
    FROM         VisitTracking 
    WHERE VisitTracking.DateVisited  BETWEEN DATEADD(m, datediff(DD, 0, @FromDate)-1, 0)  AND DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,@ToDate),0)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:55:11.627

嗯，也许你可以使用会话属性，，但是使用它，因为你可以达到它的优势，

就像是：

申请开始--->

> Application.add("UserCount",0);

会话开始--->

> int UserCount=int.parse(Appplication.get("UserCount").tostring()); 用户计数++；Application.set("UserCount",UserCount);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:22:59.640

使用此代码

```
declare @FromDate date
,@ToDate date
set @FromDate = '11/01/2012'
set @ToDate = '11/30/2012'

SELECT     COUNT(VisitTracking.customerID) AS #VISIT
FROM         VisitTracking 
WHERE VisitTracking.DateVisited  BETWEEN DATEADD(m, datediff(MM, 0, @FromDate)-1, 0)  and  DATEADD(s,-1,DATEADD(mm, DATEDIFF(m,0,@ToDate),0)) 
```

# php - 从 4 个表中获取信息并对其进行操作？

> ID：13650404
> 
> 赞同：2
> 
> 时间：2012-11-30T17:46:21.787
> 
> 标签：php, oracle

为了达到预期的结果，我在处理信息方面遇到了很多困难。通过查询，我加入了以下结果：

```
 Area     |  ID_AT  |     AT    | TYPE
-----------------------------------------
Informatica |    1    |  Sistemaa |  E
Informatica |    3    | engraçado |  E
Informatica |    3    | engraçado |  I
Gestão      |    2    |   aaaaa   |  I 
```

询问：

```
select a.Area, c.ID_AT, c.AT, dest.type 
from AREA_AT a
left join AT_C c on a.id_AREA_AT = c.id_AREA_AT
left join dest_atv d on d.id_AT = c.id_at and d.id_uo = c.id_uo
left join CLIE dest on d.id_CLIE = dest.id_CLIE
where id.uo = 1222 
order by a.id_AREA_AT, c.id_at, dest.type 
```

但我想要的是在 php 中创建一个表，如下所示：

```
 Area     |  ID_AT  |     AT    | E | I
-------------------------------------------
Informatica |    1    |  Sistemaa | X |
Informatica |    3    | engraçado | X | X
Gestão      |    2    |   aaaaa   |   | X 
```

简而言之，我打算在这里只显示一个表 ID ativ，显示可能存在或不存在类型 I 或 E，具体取决于查询的内容。

我是否必须修改查询以方便自己的工作？还是我必须在 php 中创建一个相当复杂的算法来执行此功能？安藤在这里转了几个小时，仍然找不到可以帮助我的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:56:05.800

听起来您需要进行[数据透视查询](https://stackoverflow.com/questions/4841718/oracle-sql-pivot-query)。就像是

```
select a.Area, 
       c.ID_AT, 
       c.AT, 
       max( case when dest.type = 'E' then 'X' else null end) E,
       max( case when dest.type = 'I' then 'X' else null end) I
  from AREA_AT a
       left join AT_C c on a.id_AREA_AT = c.id_AREA_AT
       left join dest_atv d on d.id_AT = c.id_at and d.id_uo = c.id_uo
       left join CLIE dest on d.id_CLIE = dest.id_CLIE
 where id.uo = 1222 
 group by a.area, c.id_at, c.at
 order by a.area, c.id_at 
```

请注意，如果您没有在此公式中选择（和分组依据）该列，您将无法访问`ORDER BY`该列。`a.id_area_at`我将其更改为排序依据`a.area`。

# javascript - 使用 java 脚本的表单验证在 IE-7 中失败，但从 IE-8 开始可以正常工作

> ID：13650405
> 
> 赞同：0
> 
> 时间：2012-11-30T17:46:22.317
> 
> 标签：javascript

我有一个用户注册页面，其中必填字段使用 java 脚本进行验证。它在所有浏览器和 IE-8,9 中都可以正常工作，但在 IE-7 中不起作用。

验证密码匹配时出现问题。以下是密码匹配的要求

1.  密码至少包含一个数字
2.  字母不重复
3.  它包含特殊字符。
4.  密码必须至少包含 6 个字母。

下面是我验证密码匹配的代码

```
function PasswordLenghtVal(pass)  // validating pass word length  
{
    if(/\d/.test(pass) && pass.length >= 6)
    {
        return true;
    }
    return false;
}

function FirstNonRepeatedChar(str)   //validating letters repeating or not  
{
    var i,j,repeated = 0;
    var len = str.length;

    for( i = 0; i < len-1; i++ )
    {
        repeated = 0;
        if(str[i] == str[i+1] ) // checking for existing or not 
        {

        repeated = 1;
        break;
        }
    }
        if( repeated == 0 )  
            return true;       
        else
        return false;
} 
```

这是我用于密码匹配的代码。IE-7 中唯一的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:58:27.000

好的。首先，您要在 IE8 和 IE7 中测试每个单独的组件。然后，让它在它的 IE7 中使用可以工作的东西（显然问题是`str[]`，但由于我不经常使用 JavaScript，所以我不能告诉自己。）只要有一个语句，如果它是重定向到一个工作代码段IE7或以下，否则它会去你所拥有的。

我的想法（不是真正的代码，只是为了说明我的意思——正如我所说，我不太起诉 JS）：

```
if(browser = "IE7") {
    //Code that works in IE7
} else {
    //Code that works in everything else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:52:31.907

IE7中不提供`[]`getter 语法。`string`

```
if(str[i] == str[i + 1]) // checking for existing or not 
```

改变它

```
if (str.charAt(i) == str.charAt(i+1)) 
```

你可以用正则表达式检查它：

```
function FirstNonRepeatedChar(str) {
  return !/(.)\1/.test(str);
} 
```

# javascript - 隐藏在 URL 中传递的变量

> ID：13650408
> 
> 赞同：9
> 
> 时间：2012-11-30T17:46:26.043
> 
> 标签：javascript, jquery, html, post, get

我们一直在开发一个 Web 应用程序，我们刚刚完成它，但有一件事情困扰着我们（尽管它绝不会停止生产。）

当我们调用其中一个页面（index.html）时，有时我们必须在 URL 中传递一个变量（searchid）。所以我们得到一个像`http://domain.com/index.html?searchid=string`.

理想情况下，我们不希望显示`?searchid=string`，但我不确定我们会如何做到这一点。

我的小组不拥有 index.html 页面（但我们正在与拥有的小组合作），所以我不知道我们能做多少类似`.htaccess`或类似的事情。

我正在考虑`POST`变量，但我不知道如何仅使用 HTML 和 jQuery 接收它。我小组中的另一个人认为，在页面加载后，我们可以将其从 URL 中删除，但我认为我们需要刷新页面，这样无论如何都会丢失数据。

我试图避免问题是 X 的 XY 问题，我问的是 Y，那么从 URL 中删除变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T17:51:54.457

您可以使用 History API，但它确实需要现代浏览器

```
history.replaceState({}, null, "/index.html"); 
```

这将导致您的 URL 显示为 /index.html 而无需重新加载页面

更多信息在这里：

[操纵浏览器历史记录](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:06:50.697

您的问题*似乎*表明目标页面不是**也不会**由某些服务器端脚本提供支持。如果是这种情况，我建议将查询字符串更改为哈希，其优点是可以**直接**编辑而不会触发页面加载：

[http://yourdomain.com/page.html#search=value](http://yourdomain.com/page.html#search=value)

```
<script type='text/javascript'>
  // grab the raw "querystring"
  var query = document.location.hash.substring(1);

  // immediately change the hash
  document.location.hash = '';

  // parse it in some reasonable manner ... 
  var params = {};
  var parts = query.split(/&/);
  for (var i in parts) {
    var t = part[i].split(/=/);
    params[decodeURIComponent(t[0])] = decodeURIComponent(t[1]);
  }

  // and do whatever you need to with the parsed params
  doSearch(params.search);
</script> 
```

不过，**最好**在这里涉及一些服务器端脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:54:01.777

您可以发布数据，然后让服务器在页面中包含发布的数据，例如：

```
echo "<script> post_data = ".json_encode($_POST)." </script>"; 
```

这适用于跨浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:51:13.793

可以使用 JavaScript 的历史 API 重写 URL。[History.js](https://github.com/balupton/History.js/)是一个做得很好的库。

话虽如此，我认为没有必要从 URL 中删除查询字符串，除非您动态更改页面内容以使当前查询字符串无关紧要。

# android - android phonegap 数据库连接

> ID：13650414
> 
> 赞同：0
> 
> 时间：2012-11-30T17:46:58.790
> 
> 标签：android, jquery, html, database, cordova

我想使用这个 html 并建立一个数据库连接来添加这些东西。但我真的不知道该使用什么或如何做。你能帮助我吗？

```
 <html>
      <head>
    <title>Ingredient</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="themes/receta.min.css" />
       <link rel="stylesheet" href="themes/receta.css" />
     <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
      <script src="js/recetas.js">  </script>  

</head>
<div>
<h1>RECETA</h1>
<label for="receta">Nombre Receta:</label><br>
<input type="text" name="receta" value="" maxlength="20" /><br>
</div>
<CENTER>
<body>

      <label>Instrucciones</label>
      <textarea style="width: 300px; height: 150px">

    </textarea>

     <label>Ingredientes</label>
     <ul style="width: 300px; height: 150px">
    <ul>

    </ul>

    <select onchange="selectIngredient(this);">
     <option value="Cheese">Cheese</option>
     <option value="Olives">Olives</option>
     <option value="Pepperoni">Pepperoni</option>
     <option value="Milk">Milk</option>
    </select>

<li style="width: 300px; height: 150px">
<button>GUARDAR</button>
<li><a href="consultas.html" data-transition="none" rel="external">CONSULTAR</a></li>
</body>
</center>
</html> 
```

这是我用来在 html 中制作列表的成分的功能：

```
function selectIngredient(select)
    { 
      var $ul = $(select).closest('.ui-select').prev('ul');
console.log($ul[0])
  if ($ul.find('input[value=' + $(select).val() + ']').length == 0) {
    console.log('s')
        $ul.append('<li onclick="$(this).remove();">' +
          '<input type="hidden" name="ingredients[]" value="' + 
          $(select).val() + '" /> ' +
          $(select).find('option:selected').text() + '</li>');
  }
    } 
```

我可以放一张图片，但我需要更多的声誉，请帮忙。

![在此处输入图像描述](../Images/e0c31eeda5199c7fe689687b953ca9a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:52:59.127

您不想从您的应用程序建立直接的数据库连接。如果您能够这样做，您可能会将您的数据库连接凭据暴露给全世界。这当然是不可取的。

您需要做的是放置您的应用程序调用的 Web 服务。然后，Web 服务将进行数据库交互。

# java - APImage 类的替代方案？

> ID：13650420
> 
> 赞同：0
> 
> 时间：2012-11-30T17:47:12.250
> 
> 标签：java, image

我从 2010 年开始从一本书中自学 Java，从那时起课程似乎发生了很大变化，所以我不能使用书中的当前代码。

他们使用 APImage 类，我想知道当前具有方法的类是什么：

*   图像（）
*   获取宽度（）
*   获取高度（）
*   获取像素（）
*   设置像素（）
*   画（）
*   克隆（）
*   节省（）
*   另存为（）

基本上，我正在尝试用图像做基本的事情，但我找不到这些方法是像它们一样的当前方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:37:19.783

看起来像[这样](http://home.wlu.edu/~lambertk/hsjava/edition4/whatsnew/imagedocs/index.html?images/APImage.html)。您可以从[这里](http://home.wlu.edu/~lambertk/hsjava/edition4/whatsnew/image.html)下载源代码。目测代码，它似乎是通常的 BufferedImage 和朋友。（澄清一下，APImage 类不是 Java API 的一部分，但它本身使用标准 Java 类。）

# facebook-graph-api - Facebook php sdk 将图像发布到墙上（源路径）

> ID：13650421
> 
> 赞同：1
> 
> 时间：2012-11-30T17:47:15.267
> 
> 标签：facebook-graph-api

源代码中的实际路径是什么？：

```
$photo = $facebook->api("/me/photos", "POST", array(
    source => "@" . "YOUR_IMAGE_PATH",
    message => "YOUR_MESSAGE"
)); 
```

来自服务器的图像路径（我应该先将图像上传到我的服务器吗？）还是 $_FILES['photo']['tmp_name']？

我刚刚得到 CurlExceptionfailed 创建 formpost 数据

我在哪里可以获得图像路径？谢谢

# ruby-on-rails-3 - 如何在视图中检查 Rails 路线的存在

> ID：13650423
> 
> 赞同：3
> 
> 时间：2012-11-30T17:47:21.803
> 
> 标签：ruby-on-rails-3

我想要这样的东西：

```
if has_route?(:controller => 'posts', :action => 'index')
  ... 
```

我怎么能在视图中做到这一点？

- - 解决方案 - -

```
def has_route? options
  Rails.application.routes.routes.map{|route| route.defaults}.include?(options)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:18:52.783

我知道这与您想要的相反，但是您可以执行以下操作：

`Rails.application.routes.recognize_path('/posts')`

这将返回一个像这样的哈希：

`{:controller=>"posts", :action=>"index"}`

但我不知道有一个 API 可以给它哈希并返回路径。

您可以查看[ActionDispatch::Routing::RouteSet](http://www.rubydoc.info/docs/rails/3.0.0/ActionDispatch/Routing/RouteSet) API。

另外，请注意，它`Rails.application.routes.routes`返回一个 Journey::Routes 对象数组，因此您可以`map`将此数组用于您想要的控制器/动作配对。但似乎这个 API 应该已经存在。如果没有，也许应该。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:51:15.993

你可以尝试类似的东西`respond_to?("[name of rails routing method]")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:03:26.077

通常路由以这种方式测试

```
it "routes to #index" do
  get("/projects").should route_to("projects#index")
end 
```

资源的脚手架将生成用于测试路由的规范文件，例如你可以看[这里](https://github.com/sevenmaxis/task_manager/blob/master/spec/routing/projects_routing_spec.rb)

# sql - 使用 UNION 查询连接三个表

> ID：13650429
> 
> 赞同：1
> 
> 时间：2012-11-30T17:47:35.377
> 
> 标签：sql, ms-access, join, union

我要做的是从三个不同的表中提取唯一的数据集，并使用 UNION 查询将它们一起显示。它们都有一个共同的领域，因此它们应该通过该领域进行链接。当我尝试运行显示“无法执行查询。使用多值字段的无效操作或语法”的查询时出现错误。我知道哪个字段导致了问题，它是“业务线”字段。我将如何解决这个问题，以便查询能够处理它？甚至可能吗？

这是我正在使用的 SQL 语句：

```
SELECT [Financial Bureau Reports].[Date Year], [Financial Bureau Reports].[Section Chief].[Financial Bureau Reports].[Outcome], [Financial Bureau Reports].[Type of Review]
FROM [Financial Bureau Reports]
WHERE (([Financial Bureau Reports].[CoCode (NAIC)]=[Forms]![Home Screen]![txtCoCode]))

UNION ALL

SELECT [Market Analysis Review].[Data Year], [Market Analysis Review].[Review Level], [Market Analysis Review].[Line of Business].[value], [Market Analysis Review].[Recommendation], [Market Analysis Review].[Analyst], [Market Analysis Review].[Action]
FROM [Market Analysis Review]
WHERE(([Market Analysis Review].[CoCode (NAIC)]=[Financial Bureau Reports].[CoCode(NAIC)]))

UNION ALL 

SELECT [MarketConductExams].[State], [MarketConductExams].[Report Date]
FROM [MarketConductExams]
WHERE [MarketConductExams].[CoCode (NAIC)]=[Market Analysis Review].[CoCode (NAIC)]; 
```

很抱歉缺少格式，显然 SQL 不能很好地传输。

另外，我在 Microsoft Access 2010 中使用 SQL。

如果问题太模糊或需要澄清，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:53:38.317

您不能将选择中列数不同的查询合并在一起。这些似乎甚至不是应该合并在一起的相关查询。我认为您需要向您的应用程序发送三个单独的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:59:26.120

我通常在联合周围有一个外部 SELECT 但其他人是正确的，您需要具有相同数量的字段和这些字段的相同名称。

使用 AS 同步字段名称。如果您有一些不在其他查询中的字段，那么您可以制造它们：null 作为 SomeOutputField 或 '' 作为 SomeOutputField。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:54:43.023

我不知道您为什么特别收到该消息，但 UNION 语句要求每个 SELECT 语句具有相同数量的列并且它们具有相同的数据类型。您发布的 SQL 语句并非如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:01:35.960

我认为您需要将您的表相互连接，而不是将它们联合在一起 - 如下所示：

```
SELECT [Financial Bureau Reports].[Date Year], 
       [Financial Bureau Reports].[Section Chief].[Financial Bureau Reports].[Outcome], 
       [Financial Bureau Reports].[Type of Review],
       [Market Analysis Review].[Data Year], 
       [Market Analysis Review].[Review Level], 
       [Market Analysis Review].[Line of Business].[value], 
       [Market Analysis Review].[Recommendation], 
       [Market Analysis Review].[Analyst], 
       [Market Analysis Review].[Action],
       [MarketConductExams].[State], 
       [MarketConductExams].[Report Date]
FROM [Financial Bureau Reports]
(JOIN [Market Analysis Review]
   ON [Market Analysis Review].[CoCode (NAIC)]=[Financial Bureau Reports].[CoCode(NAIC)]
 (JOIN [MarketConductExams]
    ON [MarketConductExams].[CoCode (NAIC)]=[Market Analysis Review].[CoCode (NAIC)]))
WHERE [Financial Bureau Reports].[CoCode (NAIC)]=[Forms]![Home Screen]![txtCoCode]; 
```

# c# - PartialView 不会在 ajax 发布调用上更新模型

> ID：13650431
> 
> 赞同：2
> 
> 时间：2012-11-30T17:47:44.313
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在尝试执行请求控制器上的操作并接收带有更新信息的模型的应用程序。步骤很简单，

1.  在表格上填写一些信息。
2.  单击某个按钮以调用控制器上的操作。
3.  该操作更新接收到的模型并使用 PartialView 方法将其发回。

但是，模型不回更新！

代码：

```
 <div id="div-dialog"> // THIS IS A DIALOG JQUERYUI
        <div id="div_toolbar" class="ui-widget-header ui-corner-all"> //THIS IS A TOOLBAR JQUERYUI
            <div style="margin-right: auto; margin-left: auto; width: 420px">
                <button id="btn_novo">Novo</button>
                <button id="btn_gravar">Gravar</button>
                <button id="btn_limpar">Limpar</button>
                <button id="btn_excluir">Excluir</button>
            </div>  
        </div>
    </div>
    <div id="partial-render"> //HERE GOES THE PARTIAL VIEW
        @Html.Partial("AvaliationPeriodPartial")
    </div>    

<script type="text/javascript">
    $(function () {
        $('#div-dialog').dialog({
            height: 'auto',
            width: 600
        });

        $('#btn_novo').button({ icons: { primary: "ui-icon-document"} }).button('enable').click(function () {

            /* ON THIS FUNCTION I SERIALIZE THE INPUTS TO SEND IT TO THE ACTION ON CONTROLLER
               TO UPDATE THE INFORMATION */

            var formData = $('input').serialize();

            $('input[disabled]').each(function () {
                formData = formData + '&' + $(this).attr('name') + '=' + $(this).val();
            });

            //HERE THE AJAX CALL
            $.post('@Url.Action("teste", "Import")', formData, function (html) {
                $('#partial-render').html(html);
            }, 'html');
    });
</script> 
```

这是_Layout页面代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Bem-vindo | @ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/redmond/jquery-ui-1.9.1.custom.min.css")" rel="stylesheet" type="text/css" />    
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.8.3.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.9.2.custom.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/MicrosoftAjax.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")"></script>
</head>

<body>
    @RenderBody()
</body>
</html> 
```

这是 PartialView 的代码：

```
@model GdaeMVC4.Models.ScreenModels.AvaliationPeriod
@Html.LabelFor(m => m.IdAvaliation)
@Html.TextBoxFor(m => m.IdAvaliation)
@Html.TextBoxFor(m => m.Description) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:56:46.247

中断您的 javascript 代码（例如使用 firebug）并验证您的 formdata 确实按预期发送。

如果 formData 似乎是正确的，请在 Controller Action 中打断并验证模型构建器是否已正确地将 formdata 转换为模型。

额外琐事：默认模型构建器不会将布尔值的“1”转换为“true”，也许这是你的问题？

# .net - 为什么 DataTable 比 DataReader 快

> ID：13650443
> 
> 赞同：20
> 
> 时间：2012-11-30T17:48:36.243
> 
> 标签：.net, data-access-layer, sqldatareader

因此，我们在工作中就采取哪种 DataAccess 路线进行了激烈的辩论：DataTable 或 DataReader。

**免责声明**我在 DataReader 方面，这些结果震撼了我的世界。

我们最终编写了一些基准来测试速度差异。人们普遍认为 DataReader 更快，但我们想看看能快多少。

结果让我们大吃一惊。DataTable 始终比 DataReader 快。有时接近两倍的速度。

所以我转向你们，SO 的成员。为什么，当大多数文档甚至 Microsoft 都声明 DataReader 速度更快时，我们的测试显示并非如此。

现在是代码：

**测试工具：**

```
 private void button1_Click(object sender, EventArgs e)
    {
        System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();
        sw.Start();

        DateTime date = DateTime.Parse("01/01/1900");

        for (int i = 1; i < 1000; i++)
        {

            using (DataTable aDataTable = ArtifactBusinessModel.BusinessLogic.ArtifactBL.RetrieveDTModified(date))
            {
            }
        }
        sw.Stop();
        long dataTableTotalSeconds = sw.ElapsedMilliseconds;

        sw.Restart();

        for (int i = 1; i < 1000; i++)
        {
            List<ArtifactBusinessModel.Entities.ArtifactString> aList = ArtifactBusinessModel.BusinessLogic.ArtifactBL.RetrieveModified(date);

        }

        sw.Stop();

        long listTotalSeconds = sw.ElapsedMilliseconds;

        MessageBox.Show(String.Format("list:{0}, table:{1}", listTotalSeconds, dataTableTotalSeconds));
    } 
```

**这是 DataReader 的 DAL：**

```
 internal static List<ArtifactString> RetrieveByModifiedDate(DateTime modifiedLast)
        {
            List<ArtifactString> artifactList = new List<ArtifactString>();

            try
            {
                using (SqlConnection conn = SecuredResource.GetSqlConnection("Artifacts"))
                {
                    using (SqlCommand command = new SqlCommand("[cache].[Artifacts_SEL_ByModifiedDate]", conn))
                    {
                        command.CommandType = CommandType.StoredProcedure;
                        command.Parameters.Add(new SqlParameter("@LastModifiedDate", modifiedLast));
                        using (SqlDataReader reader = command.ExecuteReader())
                        {
                            int formNumberOrdinal = reader.GetOrdinal("FormNumber");
                            int formOwnerOrdinal = reader.GetOrdinal("FormOwner");
                            int descriptionOrdinal = reader.GetOrdinal("Description");
                            int descriptionLongOrdinal = reader.GetOrdinal("DescriptionLong");
                            int thumbnailURLOrdinal = reader.GetOrdinal("ThumbnailURL");
                            int onlineSampleURLOrdinal = reader.GetOrdinal("OnlineSampleURL");
                            int lastModifiedMetaDataOrdinal = reader.GetOrdinal("LastModifiedMetaData");
                            int lastModifiedArtifactFileOrdinal = reader.GetOrdinal("LastModifiedArtifactFile");
                            int lastModifiedThumbnailOrdinal = reader.GetOrdinal("LastModifiedThumbnail");
                            int effectiveDateOrdinal = reader.GetOrdinal("EffectiveDate");
                            int viewabilityOrdinal = reader.GetOrdinal("Viewability");
                            int formTypeOrdinal = reader.GetOrdinal("FormType");
                            int inventoryTypeOrdinal = reader.GetOrdinal("InventoryType");
                            int createDateOrdinal = reader.GetOrdinal("CreateDate");

                            while (reader.Read())
                            {
                                ArtifactString artifact = new ArtifactString();
                                ArtifactDAL.Map(formNumberOrdinal, formOwnerOrdinal, descriptionOrdinal, descriptionLongOrdinal, formTypeOrdinal, inventoryTypeOrdinal, createDateOrdinal, thumbnailURLOrdinal, onlineSampleURLOrdinal, lastModifiedMetaDataOrdinal, lastModifiedArtifactFileOrdinal, lastModifiedThumbnailOrdinal, effectiveDateOrdinal, viewabilityOrdinal, reader, artifact);
                                artifactList.Add(artifact);
                            }
                        }
                    }
                }
            }
            catch (ApplicationException)
            {
                throw;
            }
            catch (Exception e)
            {
                string errMsg = String.Format("Error in ArtifactDAL.RetrieveByModifiedDate. Date: {0}", modifiedLast);
                Logging.Log(Severity.Error, errMsg, e);
                throw new ApplicationException(errMsg, e);
            }

            return artifactList;
        }
    internal static void Map(int? formNumberOrdinal, int? formOwnerOrdinal, int? descriptionOrdinal, int? descriptionLongOrdinal, int? formTypeOrdinal, int? inventoryTypeOrdinal, int? createDateOrdinal,
        int? thumbnailURLOrdinal, int? onlineSampleURLOrdinal, int? lastModifiedMetaDataOrdinal, int? lastModifiedArtifactFileOrdinal, int? lastModifiedThumbnailOrdinal,
        int? effectiveDateOrdinal, int? viewabilityOrdinal, IDataReader dr, ArtifactString entity)
    {

            entity.FormNumber = dr[formNumberOrdinal.Value].ToString();
            entity.FormOwner = dr[formOwnerOrdinal.Value].ToString();
            entity.Description = dr[descriptionOrdinal.Value].ToString();
            entity.DescriptionLong = dr[descriptionLongOrdinal.Value].ToString();
            entity.FormType = dr[formTypeOrdinal.Value].ToString();
            entity.InventoryType = dr[inventoryTypeOrdinal.Value].ToString();
            entity.CreateDate = DateTime.Parse(dr[createDateOrdinal.Value].ToString());
            entity.ThumbnailURL = dr[thumbnailURLOrdinal.Value].ToString();
            entity.OnlineSampleURL = dr[onlineSampleURLOrdinal.Value].ToString();
            entity.LastModifiedMetaData = dr[lastModifiedMetaDataOrdinal.Value].ToString();
            entity.LastModifiedArtifactFile = dr[lastModifiedArtifactFileOrdinal.Value].ToString();
            entity.LastModifiedThumbnail = dr[lastModifiedThumbnailOrdinal.Value].ToString();
            entity.EffectiveDate = dr[effectiveDateOrdinal.Value].ToString();
            entity.Viewability = dr[viewabilityOrdinal.Value].ToString();
    } 
```

这是 DataTable 的 DAL：

```
 internal static DataTable RetrieveDTByModifiedDate(DateTime modifiedLast)
        {
            DataTable dt= new DataTable("Artifacts");

            try
            {
                using (SqlConnection conn = SecuredResource.GetSqlConnection("Artifacts"))
                {
                    using (SqlCommand command = new SqlCommand("[cache].[Artifacts_SEL_ByModifiedDate]", conn))
                    {
                        command.CommandType = CommandType.StoredProcedure;
                        command.Parameters.Add(new SqlParameter("@LastModifiedDate", modifiedLast));

                        using (SqlDataAdapter da = new SqlDataAdapter(command))
                        {
                            da.Fill(dt);
                        }
                    }
                }
            }
            catch (ApplicationException)
            {
                throw;
            }
            catch (Exception e)
            {
                string errMsg = String.Format("Error in ArtifactDAL.RetrieveByModifiedDate. Date: {0}", modifiedLast);
                Logging.Log(Severity.Error, errMsg, e);
                throw new ApplicationException(errMsg, e);
            }

            return dt;
        } 
```

**结果：**

在测试工具中进行 10 次迭代

![在测试工具中进行 10 次迭代](../Images/51027b3b6a7899ee61f9346a105a73f4.png)

测试工具中的 1000 次迭代

![在此处输入图像描述](../Images/bd6997f8142936e3ad975a6b97b5f8ff.png)

这些结果是第二次运行，以减轻由于创建连接而产生的差异。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T18:13:06.033

我看到三个问题：

1.  您使用 DataReader 的方式通过将其转换为列表来否定它在内存中的单一项目优势，
2.  您正在以有利于 DataTable 的方式在与生产显着不同的环境中运行基准测试，并且
3.  您正在花时间将 DataReader 记录转换为在 DataTable 代码中不重复的 Artifact 对象。

DataReader 的主要优点是您不必一次将所有内容加载到内存中。这对于 Web 应用程序中的 DataReader 来说应该是一个巨大的优势，其中内存而不是 cpu 通常是瓶颈，但是通过将每一行添加到通用列表中，您已经否定了这一点。这也意味着即使您将代码更改为一次只使用一条记录，差异可能不会显示在您的基准测试中，因为您在具有大量可用内存的系统上运行它们，这将有利于 DataTable。此外，DataReader 版本花时间将结果解析为 DataTable 尚未完成的 Artifact 对象。

要修复 DataReader 使用问题，请更改`List<ArtifactString>`为`IEnumerable<ArtifactString>`到处，并在您的 DataReader DAL 中更改此行：

```
artifactList.Add(artifact); 
```

对此：

```
yield return artifact; 
```

这意味着您还需要将迭代结果的代码添加到 DataReader 测试工具中以保持公平。

我不确定如何调整基准以创建对 DataTable 和 DataReader 都公平的更典型场景，除了构建页面的两个版本，并在类似的生产级负载下为每个版本提供一个小时，所以我们有真正的内存压力……做一些真正的 A/B 测试。此外，请确保您涵盖将 DataTable 行转换为 Artifacts ......如果参数是您需要为 DataReader 执行此操作，而不是为 DataTable 执行此操作，那是完全错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:14:02.977

`SqlDataAdapter.Fill``CommandBehavior.SequentialAccess`使用set调用 SqlCommand.ExecuteReader 。也许这足以产生影响。

顺便说一句，我看到您的`IDbReader`实现出于性能原因缓存了每个字段的序数。这种方法的替代方法是使用[DbEnumerator](http://msdn.microsoft.com/en-us/library/system.data.common.dbenumerator.aspx)类。

`DbEnumerator`在内部缓存一个字段名 -> 序数字典，因此可以为您提供使用序数的许多性能优势以及使用字段名称的简单性：

```
foreach(IDataRecord record in new DbEnumerator(reader))
{
    artifactList.Add(new ArtifactString() {
        FormNumber = (int) record["FormNumber"],
        FormOwner = (int) record["FormOwner"],
        ...
    });
} 
```

甚至：

```
return new DbEnumerator(reader)
    .Select(record => new ArtifactString() {
        FormNumber = (int) record["FormNumber"],
        FormOwner = (int) record["FormOwner"],
        ...
      })
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T17:15:57.830

2 件事可能会减慢你的速度。

首先，如果您对性能感兴趣，我不会为每列执行“按名称查找序数”。请注意，下面的“布局”类负责此查找。并且布局提供者以后的可读性，而不是使用“0”、“1”、“2”等。它允许我编写接口（IDataReader）而不是具体的。

第二。您正在使用“.Value”属性。（我认为这确实会有所作为）

如果您使用具体的数据类型“getters”，您将获得更好的结果（恕我直言）。

GetString、GetDateTime、GetInt32 等。

这是我典型的 IDataReader 到 DTO/POCO 代码。

```
[Serializable]
public partial class Employee
{
    public int EmployeeKey { get; set; }                   
    public string LastName { get; set; }                   
    public string FirstName { get; set; }   
    public DateTime HireDate  { get; set; }  
}

[Serializable]
public class EmployeeCollection : List<Employee>
{
}   

internal static class EmployeeSearchResultsLayouts
{
    public static readonly int EMPLOYEE_KEY = 0;
    public static readonly int LAST_NAME = 1;
    public static readonly int FIRST_NAME = 2;
    public static readonly int HIRE_DATE = 3;
}

    public EmployeeCollection SerializeEmployeeSearchForCollection(IDataReader dataReader)
    {
        Employee item = new Employee();
        EmployeeCollection returnCollection = new EmployeeCollection();
        try
        {

            int fc = dataReader.FieldCount;//just an FYI value

            int counter = 0;//just an fyi of the number of rows

            while (dataReader.Read())
            {

                if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.EMPLOYEE_KEY)))
                {
                    item = new Employee() { EmployeeKey = dataReader.GetInt32(EmployeeSearchResultsLayouts.EMPLOYEE_KEY) };

                    if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.LAST_NAME)))
                    {
                        item.LastName = dataReader.GetString(EmployeeSearchResultsLayouts.LAST_NAME);
                    }

                    if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.FIRST_NAME)))
                    {
                        item.FirstName = dataReader.GetString(EmployeeSearchResultsLayouts.FIRST_NAME);
                    }

                    if (!(dataReader.IsDBNull(EmployeeSearchResultsLayouts.HIRE_DATE)))
                    {
                        item.HireDate = dataReader.GetDateTime(EmployeeSearchResultsLayouts.HIRE_DATE);
                    }

                    returnCollection.Add(item);
                }

                counter++;
            }

            return returnCollection;

        }
        //no catch here... see  http://blogs.msdn.com/brada/archive/2004/12/03/274718.aspx
        finally
        {
            if (!((dataReader == null)))
            {
                try
                {
                    dataReader.Close();
                }
                catch
                {
                }
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:59:45.633

我不认为它会解释所有差异，但尝试这样的事情来消除一些额外的变量和函数调用：

```
using (SqlDataReader reader = command.ExecuteReader())
{
    while (reader.Read())
    {
        artifactList.Add(new ArtifactString
        {
            FormNumber = reader["FormNumber"].ToString(),
            //etc
        });
     }
} 
```

# java - 添加秒时，日期/时间更改为 java 日历中的当前服务器时间

> ID：13650444
> 
> 赞同：0
> 
> 时间：2012-11-30T17:48:36.743
> 
> 标签：java, calendar, date-arithmetic

我从收到的字符串日期创建一个日历对象。

```
 Calendar cal = Calendar.getInstance();
    String date = "example Mon, 22 Oct 2012 23:58:31 GMT";
    SimpleDateFormat sdf = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z");
    sdf.setTimeZone (TimeZone.getTimeZone ("PST"));
    try {
        cal.setTime(sdf.parse(date));  
    } catch (ParseException e) {
        e.printStackTrace();

    }
   System.out.println("date "+sdf.format(cal.getTime())); 
```

此日期将 gmt 时间转换并打印为 pst 没有问题。

然后我循环遍历元素对象的数组并添加秒数

```
int offset = element.getSeconds;
cal.add(Calendar.SECOND, offset);
System.out.println("times cal offset: " + cal.getTime()); 
```

此 cal 现在打印服务器时间（即东部时间），而不是上面打印的转换后的 gmt。添加秒时，是否会绕过从字符串 gmt 日期创建的 cal？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:53:06.310

这是因为您不使用设置了 GMT 时区的 SDF 进行第二次打印。

# ruby-on-rails-3 - 我如何在没有测试的情况下使用 Capybara

> ID：13650450
> 
> 赞同：2
> 
> 时间：2012-11-30T17:49:18.980
> 
> 标签：ruby-on-rails-3, capybara

在 DB 中的 Rails 应用程序中，我有一些查询。

```
# PostController
@post.query # => 'blabla' 
```

我想把这个字符串放在谷歌或雅虎

在我使用的简单红宝石文件中

```
require ... all gems
Capybara.app_host = 'http://www.google.com/' 
```

和

```
class Google
  include Capybara::DSL
  def search
    visit('/')
    fill_in "q", :with => "blah blah" 
    click_button("Google")
    ... 
```

但是我怎样才能把这段代码放在控制器（或模型方法）中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:02:04.603

Capybara 不适合此类用途。您可能想尝试[机械化](https://rubygems.org/gems/mechanize)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:54:42.083

```
class PostsController < ApplicationController

require 'capybara'
require 'capybara/dsl'

include Capybara::DSL

Capybara.current_driver = :webkit

  def index
    @posts = Post.all
  end

  def show
    @post = Post.find(params[:id])
     visit(@post.search_type)
     fill_in "q", :with => @post.query 
     click_button("Google")

     loop_variable = 0
     num_of_page = 1
     max_count_of_page = 4
     flag_on_break = false

     while(loop_variable == 0) do
       has_on_page = page.has_content?(@post.search_question)

       if has_on_page
         loop_variable = 1
       else
         find('.b:last a').click
         num_of_page += 1
       end
         if num_of_page > max_count_of_page
           flag_on_break = true
           break
           end
         end

      if flag_on_break
        @number = 'Nothing not found'
      else
        @number = num_of_page
      end  
  end

  def new
    @post = Post.new
  end

  def create
    @post = Post.new(params[:post])

    if @post.save
      flash[:notice] = "Post created!"
      redirect_to root_path
    end
  end
end 
```

这是我的一段代码-但我认为主要思想是可以理解的

# java - 对象的Java部分（反）序列化

> ID：13650457
> 
> 赞同：3
> 
> 时间：2012-11-30T17:49:56.087
> 
> 标签：java, serialization, deserialization, binary-serialization

假设我们有 3 个类：

```
class foo { // not a singleton
    String s;
}
class bar {
    foo f;
    int i;
}
class baz {
    foo sameF;
} 
```

现在我们创建实例

```
foo onlyFoo = new foo("the only one");
bar theBar = new bar(onlyFoo, 123);
baz theBaz = new baz(onlyFoo); 
```

之后，我们希望将它们序列化存储在一个文件中。如果我们反序列化 theBaz，修改 onlyFoo 并再次反序列化 theBaz 到文件，theBar 仍然包含原来的 onlyFoo，所以 onlyFoo 有两个不同的版本。

相反，我想要的是我存储 theBaz 和 theBar**而没有**onlyFoo，分别存储三个对象，一旦有人反序列化 theBaz，我也想给他 onlyFoo。如果他再次反序列化更改后的 onlyFoo，theBaz**和**theBar 将具有相同的修改后的 onlyFoo，因此如果有人请求一个对象（例如 theBar），他将获得具有所有引用对象（onlyFoo）的完整序列化对象，就像正常的序列化过程将返回.

我知道我必须手动单独存储对象并保留引用，因为默认序列化无法处理此问题。**我不知道如何部分序列化/反序列化 Java 对象？**我需要将原语及其包装器与“更高”对象分开并单独存储这些对象。

**更新**

1.  我无法修改课程。
2.  我不知道所有的课程。它应该适用于我可能从未听说过的所有可序列化对象（*它们可能是也可能不是最终的*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:15:01.170

如果你想要更多的控制，你可以覆盖 writeObject() 和 readObject() 并自己序列化。

```
class bar {
    ...

    private void writeObject(ObjectOutputStream stream) throws IOException {
      // let version 1, later when you need to have versioning. 
      stream.writeInt(version);
      stream.writeInt(i);
      // leave out 
      // stream.writeObject(foo);

    }
}
// read object the analog, see 
```

[http://docs.oracle.com/javase/6/docs/platform/serialization/spec/output.html#861](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/output.html#861)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:52:34.920

标记您不想用瞬态关键字序列化的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:07:44.380

你可以做`foo` `transient`如下。

```
class bar {
    transient foo f;
    int i;
} 
```

# jquery - .data() 事件绑定

> ID：13650458
> 
> 赞同：3
> 
> 时间：2012-11-30T17:50:02.297
> 
> 标签：jquery, html, xcode, cordova, jquery-mobile

使用 JQ 和 JQM 开发 phonegap 应用程序，这 1 个奇怪的问题真的把我难住了。我真的可以使用我能得到的所有帮助，谢谢大家！

有点难以解释，但是当这 2 个事件处理程序看起来几乎完全相同时，无法让 .data() 在 2 个动态绑定事件处理程序中类似地工作。我一定是在什么地方漏掉了什么……叹息……

**HTML**

```
 <ul data-role="listview" id="notelist" data-split-icon="minus" data-split-theme="c">
                <li id="entrytemplate" style="display:none">
                    <a class="btnpopupdetails" href="#" data-position-to="window" data-rel="popup" data-transition="pop">
                        <h3>TEMPLATE Faulty lift</h3>
                        <p>TEMPLATE Lift A1, at lobby, Skyscraper Plaza, was reported broken down on 25th Dec 2012</p>
                    </a>
                    <a class="btndelete" href="#" data-position-to="window" data-rel="popup" data-transition="pop">Delete</a>
                </li>
            </ul> 
```

**JS**

```
// row is a single row from a resultset of a successful sql query

newrow.data('rowid', row.id); // integer

newrow.data('rowtitle', row.txttitle); // text

newrow.data('rowdescription', row.txtdescription); // text

console.log(newrow.data('rowtitle')); // value retrieved and displayed fine!

console.log(newrow.data('rowdescription')); // value retrieved and displayed fine!

newrow.appendTo('#notelist');

newrow.find('h3').text(row.txttitle);

newrow.find('p').text(row.txtdescription);

newrow.find('.btnpopupdetails').click(function() {

  selectedrow = $(this).parent();

  selectedrowid = selectedrow.data('rowid');

  selectedrowtitle = selectedrow.data('rowtitle');

  selectedrowdscription = selectedrow.data('rowdescription');

  console.log(selectedrow.data('rowid')); // "TypeError: 'undefined' is not an object"

  console.log(selectedrow.data('rowtitle')); // "TypeError: 'undefined' is not an object"

  console.log(selectedrow.data('rowdescription')); // "TypeError: 'undefined' is not an object"
});

newrow.find('.btndelete').click(function() {

  selectedrow = $(this).parent();

  selectedrowid = selectedrow.data('rowid');

  selectedrowtitle = selectedrow.data('rowtitle');

  selectedrowdscription = selectedrow.data('rowdescription');

  console.log(selectedrow.data('rowid')); // value retrieved and displayed fine!

  console.log(selectedrow.data('rowtitle')); // value retrieved and displayed fine!

  console.log(selectedrow.data('rowdescription')); // value retrieved and displayed fine! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:04:24.967

我知道可能会发生什么：当 jQM 增强一个链接的标记时，`<a>`它`<li>`实际上将它包含在 2 个 div 中。页面加载后检查您的标记以确认这一点。如果我将您的标记加载到 中`<li>`，第一个`<a>`包含在 2 个 div 中，第二个是 的直接子级，`<li>`因此这可以解释您所看到的行为。

这意味着当您表示`selectedrow = $(this).parent();`我怀疑它表示包含您`<a class="btnpopupdetails">`的而不是`<li>`您附加数据的 div 时；

而是尝试用这个替换该行：`selectedrow = $(this).closest('li');`或者给你`<li>`一个新的类并使用`$(this).closest('.newClass')`

试一试，让我知道结果如何。应该看起来像这样（这是两个元素的正确 1 处理程序）：

```
newrow.find('.btnpopupdetails, .btndelete').click(function() {  
  selectedrow = $(this).closest('li');    // THIS HAS CHANGED!
  selectedrowid = selectedrow.data('rowid');
  selectedrowtitle = selectedrow.data('rowtitle');
  selectedrowdscription = selectedrow.data('rowdescription');
  console.log(selectedrow.data('rowid')); // "TypeError: 'undefined' is not an object"
  console.log(selectedrow.data('rowtitle')); // "TypeError: 'undefined' is not an object"
  console.log(selectedrow.data('rowdescription')); // "TypeError: 'undefined' is not an object"
}); 
```

# php - 创建一个活动的 url 类

> ID：13650459
> 
> 赞同：0
> 
> 时间：2012-11-30T17:50:04.917
> 
> 标签：php, oop, codeigniter-url

您好，我刚开始使用 CI（codeigniter），到目前为止一切顺利，除了我的导航部分。我现在使用 url 类和 anchor 方法来创建 url，但我也希望当前 url 有一个 class="current" 例如，以便我可以设置它的样式。

有人可以告诉我如何做到这一点吗？

我的链接创建如下：

```
$this->load->helper('url');

$menu_item = array(
    '/home' => 'Home',
    '/schiphol' => 'Schiphol Service',
    '/tarieven' => 'Tarieven en Acties',
    '/kwaliteit' => 'Kwaliteit',
    //'/news' => 'news'
    '/contact' => 'Contact'
); 
```

在我看来

```
 <nav role="navigation" class="mainnav">
    <ul>
    <?php foreach ($menu_item as $menu => $key): ?>
        <li> <?php echo anchor($menu, $key) ?> </li>
    <?php endforeach ?>
    </ul>
    </nav> 
```

但是在锚方法中，我可以为类提供第三种方法，但我怎样才能只为当前的 url 执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:00:46.193

您可以提供第三个属性，而不是方法。

您必须使用 uri 类将当前 url 与循环中的 url 进行比较：http: [//ellislab.com/codeigniter/user-guide/libraries/uri.html](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)

```
<?php foreach ($menu_item as $menu => $key): ?>
 <li> 
 <?php echo anchor($menu, $key, $this->uri->segment(1) == $menu ? 'class="active"' : '') ?>
 </li>
<?php endforeach ?> 
```

# asp.net - ASP.NET 错误，必须在选择第二个下拉列表后声明标量变量“@ServerName”

> ID：13650461
> 
> 赞同：1
> 
> 时间：2012-11-30T17:50:10.250
> 
> 标签：asp.net

有 3 个父子下拉列表，选择第 3 个下拉列表后，DetailsView 将显示所有选择的 3 个下拉列表的结果。第一个是 ServerName，第二个是 Instance，第三个是 DatabaseName。选择服务器名称的第一个下拉列表后，实例值的新列表出现在第二个下拉列表中。当我在第二个下拉列表中选择任何内容时。有一条错误消息说，“必须声明标量变量“@ServerName””。我不明白这是什么意思，请帮忙。这里有一个下拉列表代码，

```
<ajaxToolkit:ComboBox ID="ComboBox1" runat="server" AutoCompleteMode="SuggestAppend" AutoPostBack="True" DataSourceID="SqlDataSource4" DataTextField="ServerName" DataValueField="ServerName" DropDownStyle="Simple" MaxLength="0" style="display: inline;">
</ajaxToolkit:ComboBox>
<asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [ServerName] FROM [tblServer]">
</asp:SqlDataSource>

<br />
<br />
<asp:Label ID="Label11" runat="server" Text="Select Instance:"></asp:Label>
<br />
<asp:DropDownList ID="DropDownInstance" runat="server" AutoPostBack="True" DataSourceID="Instance" DataTextField="Instance" DataValueField="Instance">
</asp:DropDownList>
<asp:SqlDataSource ID="Instance" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [Instance] FROM [tblDatabase] WHERE [ServerName] = @ServerName">
    <SelectParameters>
        <asp:ControlParameter ControlID="ComboBox1" Name="ServerName" PropertyName="SelectedValue" />
    </SelectParameters>
</asp:SqlDataSource>

<br />
<br />
<asp:Label ID="Label10" runat="server" Text="Select Database:"></asp:Label>
<br />
<asp:DropDownList ID="DropDownDatabase" runat="server" AutoPostBack="True" DataSourceID="SqlDataSource3" DataTextField="DatabaseName" DataValueField="DatabaseName">
</asp:DropDownList>
<asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [DatabaseName] FROM [tblDatabase] WHERE [ServerName] = @ServerName AND [Instance] = @Instance">
    <SelectParameters>
        <asp:ControlParameter ControlID="DropDownInstance" Name="Instance" PropertyName="SelectedValue" />
    </SelectParameters>
</asp:SqlDataSource> 
```

然后我将那些下拉列表函数传递给 SQLDataSource2 附带的 DetailsView，在 SQLDataSource2 中的 SelectCommand 上，我写了 `SelectCommand="SELECT * FROM [tblDatabase] WHERE (([DatabaseName] = @DatabaseName) AND ([Instance] = @Instance) AND ([ServerName] = @ServerName))"`

然后我添加 SelectParameter 代码，

```
<SelectParameters>
    <asp:ControlParameter ControlID="DropDownDatabase" Name="DatabaseName" PropertyName="SelectedValue" Type="String" />
    <asp:ControlParameter ControlID="DropDownInstance" Name="Instance" PropertyName="SelectedValue" Type="String" />
    <asp:ControlParameter ControlID="ComboBox1" Name="ServerName" PropertyName="SelectedValue" Type="String" />
</SelectParameters> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:12:13.710

在 SqlDataSource3 中，您的查询采用两个参数：@ServerName 和 @Instance。但是在选择参数中，你只定义了@Instance。是的，您在上一个数据源中定义了@ServerName，但在这个数据源中没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:23:51.320

我从 Jay 最近提到的内容中修复了另一个问题，我在实例和数据库下拉列表代码上修复了它，我修复了什么并且它工作正常。

```
<asp:Label ID="Label11" runat="server" Text="Select Instance:"></asp:Label>
    <br />
    <asp:DropDownList ID="DropDownInstance" runat="server" AutoPostBack="True" DataSourceID="Instance" DataTextField="Instance" DataValueField="Instance">
    </asp:DropDownList>
    <asp:SqlDataSource ID="Instance" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [Instance] FROM [tblDatabase] WHERE [ServerName] = @ServerName">
        <SelectParameters>
            <asp:ControlParameter ControlID="ComboBox1" Name="ServerName" PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:SqlDataSource>

    <br />
    <br />
    <asp:Label ID="Label10" runat="server" Text="Select Database:"></asp:Label>
    <br />
    <asp:DropDownList ID="DropDownDatabase" runat="server" AutoPostBack="True" DataSourceID="SqlDataSource3" DataTextField="DatabaseName" DataValueField="DatabaseName">
    </asp:DropDownList>
    <asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [DatabaseName] FROM [tblDatabase] WHERE [ServerName] = @ServerName AND [Instance] = @Instance">
        <SelectParameters>
            <asp:ControlParameter ControlID="DropDownInstance" Name="Instance" PropertyName="SelectedValue" />
            <asp:ControlParameter ControlID="ComboBox1" Name="ServerName" PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

# sql - 如果所有主键都已在另一个中用作外键，则返回的查询

> ID：13650470
> 
> 赞同：1
> 
> 时间：2012-11-30T17:50:49.643
> 
> 标签：sql

假设我们有三张桌子 Baseball_players, Bats, Plays_with_bat

**棒球运动员**

```
player_id | name 
----------+-------
1\. 01     | Jackson
2\. 02     | Smith
3\. 03     | Washington
3\. 04     | Stein 
```

和

**Plays_with_bat**

```
player_id | Bat_id 
----------+-------
1\. 01     | 01 
2\. 01     | 02      
3\. 02     | 01 
4\. 03     | 01 
5\. 04     | 01 
6\. 04     | 02 
```

和

**蝙蝠**

```
Bat_id | Manufacturer 
-------+-------
1\. 01  | Easton
2\. 02  | Rawlings 
```

我想知道的是如何返回所有使用`Bats`过一次的玩家。`Bat_id`是表中的外键，是`Plays_with_bat`表中的外键。`player_id``Plays_with_bat`

所以我想要的输出就像

```
player_id  
----------
01
04 
```

只有已经使用过所有球棒的球员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:56:24.360

你应该能够使用这样的东西：

```
select bp.player_id
from Baseball_players bp
inner join Plays_with_bat p
  on bp.player_id = p.player_id
group by bp.player_id
having count(distinct p.bat_id) = (select count(distinct bat_id)
                                   from bats) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/adc76/2)

结果：

```
| PLAYER_ID |
-------------
|         1 |
|         4 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:04:18.370

您可以使用一个非常简单的查询来比较计数：

```
select player_id from Baseball_players p
where (select count(*) from Plays_with_bat pb where pb.player_id=p.player_id)
       =
      (select count(*) from Bats) 
```

它说的是`Plays_with_bat`给定玩家的记录数必须等于 中的记录总数`Bats`。

[sqlfiddle 上的演示](http://sqlfiddle.com/#!3/5373a/2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:56:55.973

试试这个：

```
SELECT player_id
FROM Baseball_players p 
WHERE player_id IN
(
   SELECT player_id
   FROM
   (
      SELECT player_id, COUNT(bat_id) 
      FROM Plays_with_bat
      GROUP BY player_id
      HAVING COUNT(DISTINCT bat_id) = (SELECT COUNT(bat_id) FROM bats)
   ) t
) 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/a9b086/3)

# microcontroller - 如何在 MPLAB 中拥有多个 C18 源文件？

> ID：13650477
> 
> 赞同：1
> 
> 时间：2012-11-30T17:51:23.990
> 
> 标签：microcontroller, pic, pic18, mplab, c18

在许多语言中，例如 C++，有很多不同的源文件是正常的，但 PIC 微控制器程序似乎并不经常出现这种情况——至少在我读过的任何教程或书籍中都不是这样.

我想知道如何拥有一个包含一堆例程、全局变量和定义的源 (.c) 文件，这些文件可以由我的 main.c 文件使用。这甚至可能吗？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:44:34.120

这对于 PIC 开发是绝对可能的。从代码和数据的角度来看，大小当然是一个问题，但它仍然只是 C 代码，这意味着 C 规则的大多数（请参阅编译器文档了解例外情况）适用，包括将多个源文件编译并链接到单个输出（通常是 .十六进制文件）。例如，在与 main.c 不同的 C 文件中，如 test.c：

```
int AddNumbers(int a, int b)
{
  return a + b;
} 
```

然后您可以在头文件 test.h 中定义它：

```
int AddNumbers(int a, int b); 
```

在 main.c 文件的顶部包含 test.h：

```
#include "test.h" 
```

然后，您应该能够从 main.c 调用 AddNumbers(4,5)。我没有测试过这段代码，只是将它作为过程的一个例子提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:59:18.047

通常，PIC18 的大多数代码都包含在其他文件中。因此，与先编译然后链接的高级技术不同，更常见的是包含（并从包含中包含）所有代码，以便有一个流到编译器。我认为你可以在 PIC18 下做到这一点，但我从来没有花足够的时间让它工作。大多数库等都设计为包含文件，而不是单独翻译的单元。

这是一种不同的心态，但这是有原因的。我认为这是由于历史上需要尽可能小。因此，使用更多基于芯片的宏和更少的（可链接的）库开发来完成工作。

PIC32 编译器的库支持要好得多。

# android - GridView 可以包含一些默认图像吗？

> ID：13650483
> 
> 赞同：0
> 
> 时间：2012-11-30T17:51:52.850
> 
> 标签：android, gridview, scrollview, adapter

我有一个显示图像的网格视图。在一行网格中只包含三个图像（网格列大小为 3）。我在横向模式下使用我的应用程序，并希望默认情况下，如果网格中没有任何内容，我可以看到两行。如果网格的大小大于网格中的六个项目，这意味着两行然后滚动开始。

我可以给出一个场景：-

```
Image 1                            Image 2                              Image 3

Image 4                            Image 5                              Image 6 
```

放置图像并在横向模式下使用它。我需要如果我在网格中没有任何项目，这六个图像将始终显示，如果网格中的项目大于六个，那么这个网格会滚动滚动。请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:09:55.233

像下面这样子类化 GridView 并在您的布局文件中使用该自定义 GridView ，并添加一个用于禁用滚动 ( `disableScrolling`) 的字段并覆盖`setAdapter`以检查超过 6 个项目并`dispatchTouchEvent`处理滚动能力。

```
public class MyGridView extends GridView {
    boolean disableScrolling = false;

    public MyGridView(Context context) {
        super(context);    
    }

    public MyGridView(Context context, AttributeSet attrs) {
        super(context, attrs);    
    }

    public MyGridView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);    
    }

    @Override
    public void setAdapter(ListAdapter adapter) {
        if (adapter!=null && adapter.getCount() < 6){
            disableScrolling = true;
        } else {
            //adapter is null or count is greater than 6
            disableScrolling = false;
        }
        super.setAdapter(adapter);    
    }
    @Override
     public boolean dispatchTouchEvent(MotionEvent ev){
        if( disableScrolling  || ev.getAction()!=MotionEvent.ACTION_MOVE){
            return true;
        }
        return super.dispatchTouchEvent(ev);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:02:58.047

好吧，我会首先为默认图像的网格视图构造“默认”数组，然后在填充图像时替换图像（很像一个惰性加载器）。并根据需要将其应用于网格视图。

相关示例： http: [//www.stealthcopter.com/blog/2010/09/android-creating-a-custom-adapter-for-gridview-buttonadapter/](http://www.stealthcopter.com/blog/2010/09/android-creating-a-custom-adapter-for-gridview-buttonadapter/)

# java - 使用 Java API 对 Google Drive 进行身份验证时出现异常

> ID：13650485
> 
> 赞同：2
> 
> 时间：2012-11-30T17:52:17.847
> 
> 标签：java, google-drive-api, google-api-java-client

我在使用 Google Drive API 上传 .txt 文件时遇到了一些问题。这是我的代码：

```
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse;
import com.google.api.client.http.FileContent;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;

public class DriveCommandLine {

    private static String CLIENT_ID = "client_id";
      private static String CLIENT_SECRET = "client_secret";

      private static String REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";

      public static void main(String[] args) throws IOException {

        HttpTransport httpTransport = new NetHttpTransport();
        JsonFactory jsonFactory = new JacksonFactory();

        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
            httpTransport, jsonFactory, CLIENT_ID, CLIENT_SECRET, Arrays.asList(DriveScopes.DRIVE))
            .setAccessType("online")
            .setApprovalPrompt("auto").build();

        String url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build();
        System.out.println("Please open the following URL in your browser then type the authorization code:");
        System.out.println("  " + url);
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String code = br.readLine();

        GoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();
        GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response);

        //Create a new authorized API client
        Drive service = new Drive.Builder(httpTransport, jsonFactory, credential).build();

        //Insert a file  
        File body = new File();
        body.setTitle("Document Example");
        body.setDescription("This is a test of Google Drive SDK");
        body.setMimeType("text/plain");

        java.io.File fileContent = new java.io.File("document.txt");
        FileContent mediaContent = new FileContent("text/plain", fileContent);

        File file = service.files().insert(body, mediaContent).execute();
        System.out.println("File ID: " + file.getId());
      }

} 
```

问题出在这一行：

```
GoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute(); 
```

错误是：

```
Exception in thread "main" javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1836)
    at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1794)
    at sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1777)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1296)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1273)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:523)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1087)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)
    at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:79)
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:895)
    at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:299)
    at com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeTokenRequest.execute(GoogleAuthorizationCodeTokenRequest.java:147)
    **at DriveCommandLine.main(DriveCommandLine.java:43)**
Caused by: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    at sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:90)
    at sun.security.validator.Validator.getInstance(Validator.java:179)
    at sun.security.ssl.X509TrustManagerImpl.getValidator(X509TrustManagerImpl.java:314)
    at sun.security.ssl.X509TrustManagerImpl.checkTrustedInit(X509TrustManagerImpl.java:173)
    at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:186)
    at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:126)
    at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1319)
    at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154)
    at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)
    at sun.security.ssl.Handshaker.process_record(Handshaker.java:804)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:966)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1262)
    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1289)
    ... 10 more
Caused by: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
    at java.security.cert.PKIXParameters.setTrustAnchors(PKIXParameters.java:200)
    at java.security.cert.PKIXParameters.<init>(PKIXParameters.java:120)
    at java.security.cert.PKIXBuilderParameters.<init>(PKIXBuilderParameters.java:104)
    at sun.security.validator.PKIXValidator.<init>(PKIXValidator.java:88)
    ... 22 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T17:28:14.750

您不能将此示例（即基于 localhost（客户端）的 Google 应用程序）与为 WebApplication 提供的方法一起使用。您需要实例化一个 Google Web 应用程序（使用 HttpServlet 的服务器端）并使用 doGet 方法的重定向 URI 来自动捕获代码并交换数据以获得正确的授权。请参阅[WebApplication 的](https://developers.google.com/accounts/docs/OAuth2WebServer?hl=it)[OAuth 2.0](https://developers.google.com/glass/develop/mirror/authorization)和OAuth 2.0

# android - [AS3][Air for Android] 获取流式麦克风输入？

> ID：13650486
> 
> 赞同：3
> 
> 时间：2012-11-30T17:52:18.217
> 
> 标签：android, actionscript-3, flash, air

有没有办法获得真正的麦克风流输入？

我目前的示例代码看起来正在获取麦克风输入数据，并将其保存到声音对象并立即播放。

有没有办法正确传输它？

如果没有，在我的示例中，有没有办法获取麦克风输入数据，但静音音频，因为它会导致反馈循环（尽管 setLoopBack 设置为 false ..）

下面的代码：

```
import flash.display.*;
import flash.events.*;
import flash.media.*;
import flash.media.SoundTransform;
import flash.utils.*;

var _soundBytes:ByteArray = new ByteArray();
var _micBytes:ByteArray;
var son:Sound;
var sc:SoundChannel;
var pow:int = 0;
var myBar:Sprite;

stage.quality = "LOW";

// this code ended up muting the mic input oddly?
//SoundMixer.soundTransform = new SoundTransform(0);

init();

function init()
{
    myBar = new Sprite;
    micInit();
    soundInit();

    addEventListener(Event.ENTER_FRAME, visualise);
}

function micInit()
{
    var mic:Microphone = Microphone.getMicrophone();

    if(mic != null) {
        //mic.setUseEchoSuppression(true);
        mic.setLoopBack(false);
        mic.setSilenceLevel(0);
        mic.rate = 44;
        mic.gain = 60;
        mic.addEventListener(SampleDataEvent.SAMPLE_DATA, micSampleDataHandler);
    }
}

function micSampleDataHandler(event:SampleDataEvent):void
{
    _micBytes = event.data;
    sc = son.play();
}

function soundInit():void {
    son = new Sound();
    son.addEventListener(SampleDataEvent.SAMPLE_DATA, soundSampleDataHandler);
}

function soundSampleDataHandler(event:SampleDataEvent):void {
    for (var i:int = 0; i < 8192 && _micBytes.bytesAvailable > 0; i++) {
        var sample:Number = _micBytes.readFloat();
        event.data.writeFloat(sample);
        event.data.writeFloat(sample);
    }
}

function drawLines(e:Event):void{

    SoundMixer.computeSpectrum(_soundBytes, true);
    myBar.graphics.clear();
    myBar.graphics.lineStyle(2,0xabc241);
    for (var i=0; i < 256; i++) {
        pow = _soundBytes.readFloat()*200;
        pow = Math.abs(pow);
        myBar.graphics.drawRect(i*2, 0, 2, pow);
        addChild(myBar);
    }
} 
```

希望你能帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:38:01.597

要使用声学回声消除，请调用 Microphone.getEnhancedMicrophone() 以获取对增强型麦克风对象的引用。将 Microphone.enhancedOptions 属性设置为 MicrophoneEnhancedOptions 类的实例。这是一篇讨论这一切的文章。 [Adobe 上有关增强麦克风选项的文章](http://www.adobe.com/devnet/flashplayer/articles/acoustic-echo-cancellation.html)

编辑：我说得太早了。我以前使用过增强型麦克风很多次，但我决定自己阅读这篇文章，看看是否有什么有趣的东西我可以从中学到新的东西......我在接近尾声时发现了这个

AEC 的计算成本很高。目前，Flash Player 和 AIR 仅支持桌面平台

虽然我只是看了日期......去年，所以也许试一试现在支持它？！？

# java - 使用 Java 制作查询结果表 (GUI)

> ID：13650492
> 
> 赞同：1
> 
> 时间：2012-11-30T17:52:35.737
> 
> 标签：java, data-structures

我有一个面板，用户将通过输入姓氏或 ID 来搜索客户。我想实现某种表来显示每一行 SQL 查询结果。最好的方法是什么？我首先想到的是使用多维数组和 JTextArea。你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:54:09.237

你看过JTable吗？

编辑：这是我第一次回复，所以我想当我做错事时我会注意到。我最近创建了与您的目标类似的东西，所以这段代码可能会让您上路：

```
String[][] results = null;
    if(query != null){
        results = domeinController.Search(query);
    } else {
        results = domeinController.ReturnAllAccounts();
        txtSearch.setText("");
    }
    TableModel table = new DefaultTableModel(results, new String[] {d("LBL_SERVICE"), d("LBL_ACC_NAME"), d("LBL_PASSWORD"), d("LBL_EMAIL")});
    tblResults = new JTable(){
        public boolean isCellEditable(int roxIndex, int colIndex){
            return false;
        }
    };      
    jScrollPane1.setViewportView(tblResults);
    tblResults.setModel(table);
    tblResults.setAutoCreateRowSorter(true);
    tblResults.setBounds(55, 145, 423, 228);
    tblResults.getTableHeader().setAutoscrolls(true);
    tblResults.getTableHeader().setReorderingAllowed(false);
    tblResults.getTableHeader().setResizingAllowed(false);
    tblResults.setShowVerticalLines(false);
    tblResults.addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent evt) {
            tblResultsMousePressed(evt);
        }
    }); 
```

基本上，您创建一个带有二维数据数组作为第一个参数的 tableModel，以及一个带有标题的数组作为您的第二个参数。之后，您可以指定表的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:56:22.207

我强烈建议将[Glazed List](http://www.glazedlists.com/)考虑在内。

它是一个库，负责处理与在表格中显示表格数据相关的大部分繁重工作，同时具有过滤和排序功能。它还提供了一个多线程安全的数据模型。使用裸 Swing 和 Java 要正确实现它要困难得多。

[这](http://www.glazedlists.com/documentation/tutorial-100)是一个很好的教程。一旦有人开始编写 CRUD GUI，迟早所有人都会想要所谓的“标准功能”，所有面向表的 gui 都共享这些功能。当您可以建立经过验证的解决方案时，为什么要浪费时间发明这一切并冒着犯很多错误的风险。尤其是当它如此简单的时候。

一个示例，显示基于 XML 的 JTable：

```
import java.util.*;
import java.io.*;
import javax.swing.*;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.Insets;
// a simple issues library
import ca.odell.issuezilla.*;
// glazed lists
import ca.odell.glazedlists.*;
import ca.odell.glazedlists.swing.*;
/**
 * An IssueBrowser is a program for finding and viewing issues.
 * 
 * @author <href="mailto:jesse@odel.on.ca">Jesse Wilson</a>
 */
public class IssuesBrowser {

 /** event list that hosts the issues */
 private EventList issuesEventList = new BasicEventList();

 /**
  * Create an IssueBrowser for the specified issues.
  */
 public IssuesBrowser(Collection issues) {
   issuesEventList.addAll(issues);
 }

 /**
  * Display a frame for browsing issues.
  */
 public void display() {
   // create a panel with a table
   JPanel panel = new JPanel();
   panel.setLayout(new GridBagLayout());
   EventListModel issuesListModel = new EventListModel(issuesEventList);
   JList issuesJList = new JList(issuesListModel);
   JScrollPane issuesListScrollPane = new JScrollPane(issuesJList);
   panel.add(issuesListScrollPane, new GridBagConstraints(...));

   // create a frame with that panel
   JFrame frame = new JFrame("Issues");
   frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
   frame.setSize(540, 380);
   frame.getContentPane().add(panel);
   frame.show();
 }

 /**
  * Launch the IssuesBrowser from the commandline.
  */
 public static void main(String[] args) {
   if(args.length != 1) {
     System.out.println("Usage: IssuesBrowser <file>");
     return;
   }

   // load some issues
   Collection issues = null;
   try {
     IssuezillaXMLParser parser = new IssuezillaXMLParser();
     InputStream issuesInStream = new FileInputStream(args[0]);
     issues = parser.loadIssues(issuesInStream, null);
     issuesInStream.close();
   } catch(IOException e) {
     e.printStackTrace();
     return;
   }
   // create the browser
   IssuesBrowser browser = new IssuesBrowser(issues);
   browser.display();
 }
} 
```

# go - 多层次回报恐慌

> ID：13650493
> 
> 赞同：5
> 
> 时间：2012-11-30T17:52:38.590
> 
> 标签：go

有没有更好的方法从长序列的递归函数调用中返回？我目前对这样的标记值感到恐慌：

```
type exitNow int
...
panic(exitnow(0)) 
```

一次返回多个级别。在根函数中，对 recovery 的调用执行一般错误处理（将恐慌转变为错误）并将 exitNow 作为特殊情况处理。

这很好用，我只想知道是否有更好的方法。

我已经将 bool 返回值用于相关目的，但为此使用另一个返回值会很痛苦。（对每个函数的每次调用都需要一个 if 语句）

如果它有帮助的话，这是一个递归体面解析器的实施的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:26:02.177

我自己在解析器中使用这种方法。不过，我不会对整数值感到恐慌。我使用实际的当前错误作为恐慌信息。执行的顶级调用`recover()`只是附加一些文件/行/列信息，然后将其作为常规返回`error`。

这种方法，并且只从所有函数返回错误是在 Go 中执行此操作的唯一方法。对于解析器的情况，panic 方法要有效得多，因为它使词法分析器规则的实现（和阅读）变得相当简单，因为到处都没有`if err != nil { return }`散落的部分。

# file-upload - 如何将网站上传到服务器

> ID：13650498
> 
> 赞同：1
> 
> 时间：2012-11-30T17:52:50.250
> 
> 标签：file-upload, filezilla, publishing-site

我有一个问题....我正在使用 FileZilla 将我的 Eclipse 项目上传到服务器。现在，这是我第一次这样做，我不知道从哪里开始。（我真的不想做灾难）在这张图片中有文件夹的组成：左边是我的项目，右边是服务器的文件夹。 [http://img22.imageshack.us/img22/2519/jbecagca.png](http://img22.imageshack.us/img22/2519/jbecagca.png) 在 WebContent 文件夹中，我还有 4 个 html 文件，其中一个是 index.html，这是我编写 url 时必须显示的页面的网站。现在的问题是……我必须将我的 servlet 放在哪里？我的课在哪里？我的数据库的 sql 转储在哪里？我的html页面在哪里？我的 js 文件在哪里？我真的不知道。谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:57:31.327

转到您的网络主机询问 sql 数据库的地址，您需要在他们的任何服务器上创建一个数据库，然后可以使用它，您不能只通过上传来使用。js 文件和类将使用与开发时相同的层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:10:55.847

如果您正在上传项目，您可能应该保留项目的文件夹结构。您应该将整个项目文件夹按原样上传到 webroot，以便您可以从浏览器访问它

# java - 为什么这个 GWT DialogBox 不将它的两个按钮居中？

> ID：13650499
> 
> 赞同：1
> 
> 时间：2012-11-30T17:52:57.423
> 
> 标签：java, gwt, dialog

我希望 setHorizo​​ntalAlignment 将我的两个按钮从左侧移到中间。知道为什么这不起作用吗？所有相关代码都在下面并且非常简单。

![在此处输入图像描述](../Images/ac92fa4ebcd0ff6935ad880de38b0bb1.png)

```
public void onClick(ClickEvent event) {
            final DialogBox deleteDialog = new DialogBox();
            deleteDialog.setModal(false);
            deleteDialog.setGlassEnabled(true);

            HorizontalPanel buttonPane = new HorizontalPanel();
            buttonPane.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);

            buttonPane.add(deleteDialogOKButton);
            buttonPane.add(deleteDialogCancelButton);

            deleteDialog.center();      

            deleteDialog.add(buttonPane);       
            deleteDialog.setText("Delete this Station?");

            deleteDialogOKButton.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    stationService.deleteStation(station, new DeleteStationCallback());
                    deleteDialog.hide();
                }});

            deleteDialogCancelButton.addClickHandler(new ClickHandler() {
                public void onClick(ClickEvent event) {
                    deleteDialog.hide();
                }});

            deleteDialog.show();
            //stationService.deleteStation(station, new DeleteStationCallback());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T08:02:22.817

当您不为水平面板提供任何宽度时，它会占用其内容宽度的总和。因此`HasHorizontalAlignment.ALIGN_RIGHT`，`HasHorizontalAlignment.ALIGN_LEFT`或任何其他对齐方式都无关紧要，因为它适合给定区域。尝试设置以下内容，

```
buttonPane.setwidth(100%);
buttonPane.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_CENTRE); 
```

如果这也不起作用，那么您必须使用 API 设置单元格对齐

```
setCellHorizontalAlignment(Widget w,HasHorizontalAlignment.HorizontalAlignmentConstant align); 
```

# cpu-usage - 如何监控 Intel（Core 2 Duo）处理器的 C 状态？

> ID：13650503
> 
> 赞同：0
> 
> 时间：2012-11-30T17:53:11.897
> 
> 标签：cpu-usage, intel

我正在研究用户使用对功耗的影响。如何测量 Intel Core 2 Duo 处理器 (Windows 7) 中的 C 状态占用率？有没有可以在 Windows 中执行此操作的软件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:53:24.447

英特尔确实提供[了许多电源工具和指南](http://software.intel.com/en-us/energy-efficient-software)，特别是[电源检查器](https://software.intel.com/en-us/articles/using-intel-power-checker-to-measure-the-energy-performance-of-a-compute-intensive)将“基于核心的处理器”列为支持，并将 C 状态占用列为功能之一。

# c# - 一次写一条记录，使用一个静态类？

> ID：13650507
> 
> 赞同：1
> 
> 时间：2012-11-30T17:53:31.983
> 
> 标签：c#, .net, class

每次按下按钮时，我都会在文件中写入一行文本。

我已经定义了一个这样的静态类：

```
public static class PalletRecord
{
    public static string MachineName { get; set; }
    public static DateTime TimeStamp { get; set; }
    public static string BranchPlant { get; set; }
    public static string Location { get; set; }
    public static string Data { get; set; }
    public static string ItemCode { get; set; }
    public static string ItemDescription { get; set; }
    public static decimal Quantity { get; set; }
} 
```

每次我需要写入文件时，我都会填充静态类属性并使用 File.AppendAllLines 写入文本文件。

我应该用非静态类来做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T17:56:25.437

是的 ！使用静态来保持这样的状态会给你带来麻烦。如果您现在或将来可能需要多线程，这可能尤其如此，因为静态状态由所有线程共享。另一个问题可能是一个不完整的初始化错误，使您有 ½ 来自先前记录的状态和 ½ 来自新记录的状态。

一种更好的方法是使属性成为非静态的，并为每个记录创建一个具有正确属性的类实例。您可以创建一个设置属性的构造函数，这样您就知道只要有实例就拥有有效的记录（也可以考虑将属性设置器设为私有）。

这也更好地模拟了您正在处理的问题。您在文件中写入多个不同的记录，这最好由表示记录的类的实例来表示。在我看来，为你需要编写的每条记录使用你的类的实例是正确的干净的面向对象的方式来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:57:22.123

没有大的区别。如果它有效，它就有效。创建一个新类会占用更多内存。我会创建一个新课程，但无论如何也没什么大不了的。如果它保存在数据库中并被丢弃，则您的解决方案有效。如果记录保存在内存中，我将为每条记录创建一个新类。

# sql-server - SSRS 传递报告参数

> ID：13650508
> 
> 赞同：3
> 
> 时间：2012-11-30T17:53:32.577
> 
> 标签：sql-server, reporting-services, reportingservices-2005

我很难用这一天来解码潜在的问题

我有一个用户输入信息的表格。该信息通过 URL 传递到 SSRS

我收到错误

```
An error has occurred during report processing. (rsProcessingAborted)
Query execution failed for data set 'Report'. (rsErrorExecutingCommand)
Must declare the scalar variable "@ReportType". Must declare the scalar variable "@StoreNum". Must declare the scalar variable "@ReportType". Must declare the scalar variable "@StoreNum". 
```

查询是这样的

```
IF @ReportType = 'RE'
BEGIN
 exec  proc_Report_RETaxInvoices_InterActive @StoreNum, @StartDate, @EndDate, @TaxId, @BusinessName, @Attention, @LocatedIn, @Street, @AdditionalAddress, @City, @State, @PostalCode
END
ELSE IF @ReportType = 'RY'
BEGIN
 exec proc_Report_ARTaxInvoices_InterActive @StoreNum, @StartDate, @EndDate, @TaxId, @BusinessName, @Attention, @LocatedIn, @Street, @AdditionalAddress, @City, @State, @PostalCode
END 
```

我的报告参数看起来像这样 ![在此处输入图像描述](../Images/9cadec83cce9d3951550a4383ec6cd0e.png) url 又长又讨厌，但看起来有效

```
http://<SECRET>/ReportServer/Pages/ReportViewer.aspx?%2fSubway%2fAccounting%2fAccounting%2fTax+Report+Interactive&rs:Command=Render&rc:Parameters=false&ReportType=RE&StoreNum=25159&StartDate=11%2F1%2F2012&EndDate=11%2F1%2F2012&TaxId=1&BusinessName=1&Attention=1&LocatedIn=1&Street=1&AdditionalAddress=1&City=1&State=1&PostalCode=1 
```

请注意

```
&ReportType=RE&StoreNum=25159 
```

在查询字符串中

当我从 SSRS BIDS 环境中的查询编辑器运行报告时，会返回一个结果集。

所以我对这个错误不知所措

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T18:00:41.373

检查您的“报告参数”是否已作为“数据集参数”与您的数据集相关联：

![在此处输入图像描述](../Images/aaae4e78c1f64879d1feb4043011c668.png)

# jenkins - 无法将 Jenkins 的 XCode 插件设置为使用指定的钥匙串？

> ID：13650513
> 
> 赞同：2
> 
> 时间：2012-11-30T17:53:55.087
> 
> 标签：jenkins, xcodebuild, jenkins-plugins

XCode 插件似乎假设只有来自用户 jenkins 的钥匙串可用于签署 XCode 构建。

有一个名为 Keychain path 的部分，但是如果我进入以下内容，
`/Users/Me/Library/Keychains/login.keychain`

然后构建日志显示以下内容：

```
"Will not set default: file /Users/Shared/Jenkins/Library/Keychains/Users/Me/Library/Keychains/login.keychain does not exist" 
```

所以插件已将我输入的内容附加到 /Users/Shared/Jenkins/Library/Keychains/ 中。

如果我将其保留为默认值

```
${HOME}/Library/Keychains/login.keychain 
```

然后构建日志说：

```
"Will not set default: file /Users/Shared/Jenkins/Library/Keychains/login.keychain does not exist" 
```

因此，XCode 构建插件迫使用户成为 Jenkins——这意味着有必要以用户 Jenkins 的身份设置钥匙串吗？在这种情况下，这是如何完成的 - 当 Jenkins 安装到 Mac 上时，默认情况下会创建一个名为 jenkins 的用户，但 AFAIK 这是一个匿名用户，实际上不可能以用户 jenkins 身份登录机器。因此，如何为用户 jenkins 创建钥匙串？

为什么插件会强制执行此操作，为什么没有记录这方面的内容？

如果我可以使用来自不同用户的钥匙串，那么如何使用？- 它没有记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:11:34.753

保留 jenkins 的默认值，创建文件夹`/Users/Shared/Jenkins/Library/Keychains`并在那里放置一个名为`login.keychain`.

您可以通过菜单项使用钥匙串访问创建该文件`File - New Keychain...`。你放在那里的是缺少相关私钥的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T03:44:49.043

由于这个原因和其他几个原因，我已经放弃了那个插件，我正在运行我的 Xcode 构建并从命令行签名，使用“执行 Shell”步骤。

```
xcodebuild -verbose -alltargets -configuration Debug clean build CODE_SIGN_IDENTITY="${CODE_SIGN_IDENTITY}" PROVISIONING_PROFILE=${PROVISIONING_PROFILE}
&&
/usr/bin/xcrun -sdk iphoneos PackageApplication -v "${WORKSPACE}/client_trunk/build/Debug-iphoneos/${Application}.app" -o "${WORKSPACE}/client_trunk/build/Debug-iphoneos/${Application}-Debug-${shortVer}.${revVer}.ipa" --sign "${CODE_SIGN_IDENTITY}" --embed "/Users/[youruser]/Library/MobileDevice/Provisioning Profiles/${PROVISIONING_PROFILE}.mobileprovision" 
```

上面，`${CODE_SIGN_IDENTITY}`是一个看起来像`iPhone Developer: blah` 并且`${PROVISIONING_PROFILE}`是配置文件的十六进制数，如`F152C66E-B99A-47F6-B262-376CE4403D71`

要解决您的钥匙串问题，请尝试以下操作：

`security default-keychain -s <keychain-name>.keychain`

# ios - 当应用程序名称包含撇号和空格时符号化崩溃日志（已部署的应用程序）

> ID：13650516
> 
> 赞同：1
> 
> 时间：2012-11-30T17:54:04.510
> 
> 标签：ios, special-characters, symbolicatecrash, symbolicate

我在 App Store 上有一个应用程序崩溃了。我在 SO 上尝试了几种解决方案来象征我的应用程序，在不同的时间使用 Organizer、Terminal 和 Instruments。到目前为止没有任何效果 - 我的应用程序中方法的报告中的行从未符号化，即使 Apple 方法的行是符号化的。环顾一圈后，似乎这可能与应用程序名称有关，该名称与“Angie's List”类似——带有撇号和空格。现在更改应用程序名称为时已晚，因为它已在商店上线。我还没有在任何地方看到解决方案，并且希望朝着正确的方向推进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:38:50.460

通常应用程序名称无关紧要，除非我怀疑符号化脚本中存在错误。您是否检查过您是否有正确的 dSYM 可用？

如果您向下滚动最新的崩溃日志，请检查下面的第一行`Binary Images`，它看起来像这样

```
0x1000 -   0x24cfff +YourApp armv7  <f6012c517d783486ab53e45d948b92a2> /var/mobile/Applications/A8EC3C1F-44AF-169A-BC0E-FBBC0F04CDF5/YourApp.app/YourApp 
```

`f6012c517d783486ab53e45d948b92a2`是导致崩溃的可执行文件的 UUID。

您可以使用终端找到正确的 dSYM，如下所示：

```
mdfind "com_apple_xcode_dsym_uuids == F6012C51-7D78-3486-AB53-E45D948B92A2" 
```

该字符串`F6012C51-7D78-3486-AB53-E45D948B92A2`是将上述字符串重新格式化为大写和 8-4-4-4-12 组。我猜这个命令不会返回任何东西。

如果您有 dSYM（例如在 .xcarchive 中），您可以在终端中检查其 UUID，如下所示：

```
dwarfdump --uuid YourApp.app.dSYM 
```

如果符号化不能自动工作，您可以尝试按照此处发布的说明手动操作：[iOS 崩溃报告：atos not working as expected](https://stackoverflow.com/questions/13574933/ios-crash-reports-atos-not-working-as-expected/13576028#13576028)

如果应用程序中包含空格或撇号等特殊字符，则默认 Apple 工具链将无法对其进行符号化。原因是工具`otool`链中使用的工具无法处理。无论您如何传递文件名。因此，要解决此问题，您必须执行以下操作：

1.  重命名 dSYM 包并删除所有特殊字符，例如 from `My App's.app.dSYM`to`MyApps.app.dSYM`
2.  打开包内的内容并向下导航到`Contents/Resources/DWARF`
3.  像上面那样重命名文件

现在再试一次。避免这一切的最佳方法：**切勿**在您的应用名称中使用特殊字符。如果要调整屏幕上显示的名称，请使用`CFBundleDisplayName`或相应的 plist 条目。

# java - EJB 计时器服务：具有相同 ScheduleExpression 的超时顺序

> ID：13650517
> 
> 赞同：1
> 
> 时间：2012-11-30T17:54:08.740
> 
> 标签：java, timeout, ejb

我有许多使用相同 ScheduleExpression 的任务。但是我的问题是执行每个命令都必须有一个命令。我可以告诉定时器服务一个执行命令吗？

注意：任务没有持久性

提前致谢，

阿德拉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:59:33.583

在这种情况下，所有任务都使用相同的 ScheduleExpression，所有任务都在“同一时间”执行。一种解决方法是根据收到的任务增加 1 秒以强制执行订单。

# html - 悬停在弹出导航菜单上并根据悬停在菜单中的哪个元素有一个单独的弹出显示？

> ID：13650532
> 
> 赞同：1
> 
> 时间：2012-11-30T17:55:12.057
> 
> 标签：html, css, popup, hover

我正在一个具有悬停弹出导航菜单的网站上工作，该菜单完全按照我想要的方式工作。除了菜单之外，我想要的是在页面上的其他位置有另一个弹出窗口，其中包含有关用户当前悬停的元素的特定信息。如果导航菜单中没有任何元素被悬停，我希望隐藏弹出窗口。

我有一个**[jsFiddle](http://jsfiddle.net/apD26/5/)**，除了额外的弹出字段外，它有我想要的一切。

除了 JavaScript 解决方案（因为我不精通 JS），我已经尝试了所有我能想到的方法，但是，我不介意 JS 解决方案。我可以通过 JS 摸索我的方式并偶尔进行更改 - 我只是无法创建它。

这个悬停的弹出菜单有效（**[jsFiddle](http://jsfiddle.net/apD26/5/)**中的完整 HTML 和 CSS ）：

```
<ul>
    <li>Nav menu here
        <ul>
            <li>Sub menu items</li>
        </ul>
    </li>
    <li>More nav menu items</li>
</ul> 
```

将鼠标悬停在顶级菜单项之一上时，如何获得具有特定于悬停元素相关信息的附加弹出字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:14:41.167

这是您可以开始的事情。您可以使用 JavaScript 隐藏和取消隐藏信息。

检查这个 JSFiddle：http: [//jsfiddle.net/apD26/17/](http://jsfiddle.net/apD26/17/)

**示例 JS：**

```
 $(document).ready(function(){
        $('.info').hide();
        $('.parent').mouseover(function(){
            $('.info').show();
            $('.info').text($(this).attr('data-desc'));
        });  
        $('.parent').mouseout(function(){
            $('.info').hide();
        });        
    }); 
```

代替`$(this).text()`我用来显示文本的方法，您可以将描述存储`data`在每个菜单项的属性中并显示。

**编辑**

更新了 JSFiddle 和答案

# javascript - 如何在textarea中选择文本行

> ID：13650534
> 
> 赞同：10
> 
> 时间：2012-11-30T17:55:26.740
> 
> 标签：javascript, jquery, textarea

我有一个 textarea 用于保存大量 SQL 脚本以进行解析。当用户单击“Parse”按钮时，他们会获得有关 SQL 脚本的摘要信息。

我希望摘要信息是可点击的，这样当点击它时，SQL 脚本的行会在 textarea 中突出显示。

我已经在输出中有行号，所以我只需要 javascript 或 jquery 告诉它要突出显示 textarea 的哪一行。

是否有某种类型的“ *goToLine* ”功能？在我所有的搜索中，没有什么能完全解决我正在寻找的东西。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T18:33:06.377

此函数希望第一个参数是对您的 textarea 的引用，第二个参数是行号

```
function selectTextareaLine(tarea,lineNum) {
    lineNum--; // array starts at 0
    var lines = tarea.value.split("\n");

    // calculate start/end
    var startPos = 0, endPos = tarea.value.length;
    for(var x = 0; x < lines.length; x++) {
        if(x == lineNum) {
            break;
        }
        startPos += (lines[x].length+1);

    }

    var endPos = lines[lineNum].length+startPos;

    // do selection
    // Chrome / Firefox

    if(typeof(tarea.selectionStart) != "undefined") {
        tarea.focus();
        tarea.selectionStart = startPos;
        tarea.selectionEnd = endPos;
        return true;
    }

    // IE
    if (document.selection && document.selection.createRange) {
        tarea.focus();
        tarea.select();
        var range = document.selection.createRange();
        range.collapse(true);
        range.moveEnd("character", endPos);
        range.moveStart("character", startPos);
        range.select();
        return true;
    }

    return false;
} 
```

用法：

```
 var tarea = document.getElementById('myTextarea');
 selectTextareaLine(tarea,3); // selects line 3 
```

工作示例：

[http://jsfiddle.net/5enfp/](http://jsfiddle.net/5enfp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-14T19:27:24.123

darkheir 帖子中的代码无法正常工作。基于它，我缩短了代码并使其工作。

```
 function onClickSelection(textarea){
        if(typeof textarea.selectionStart=='undefined'){
            return false;
        }
        var startPos=(textarea.value.substring(0,textarea.selectionStart).lastIndexOf("\n")>=0)?textarea.value.substring(0,textarea.selectionStart).lastIndexOf("\n"):0;
        var endPos=(textarea.value.substring(textarea.selectionEnd,textarea.value.length).indexOf("\n")>=0)?textarea.selectionEnd+textarea.value.substring(textarea.selectionEnd,textarea.value.length).indexOf("\n"):textarea.value.length;
        textarea.selectionStart=startPos;
        textarea.selectionEnd=endPos;
        return true; 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-14T15:54:23.447

搜索行的一个更简洁的版本：

```
 function select_textarea_line (ta, line_index) {

        const newlines = [-1];   // Index of imaginary \n before first line
        for (let i = 0; i < ta.value.length; ++i) {
            if (ta.value[i] == '\n') newlines.push( i );
        }

        ta.focus();
        ta.selectionStart = newlines[line_index] + 1;
        ta.selectionEnd   = newlines[line_index + 1];

    } // select_textarea_line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-10T22:09:21.453

为了使函数对可能的错误输入更加宽容，请添加以下内容：

```
// array starts at 0
lineNum--; 
```

这段代码：

```
if (typeof(tarea) !== 'object' || typeof(tarea.value) !== 'string') {
  return false;
}

if (lineNum === 'undefined' || lineNum == null || lineNum < 0) {
  lineNum = 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-25T11:11:48.640

如何在textarea javascript中选择文本行双击特定行。

```
//This function expects first parameter to be reference to your textarea. 
function ondblClickSelection(textarea){
    var startPos = 0;
    var lineNumber = 0;
    var content = "";
    if(typeof textarea.selectionStart == 'undefined') {
        return false;
    }
    startPos = textarea.selectionStart;
    endPos = textarea.value.length;
    lineNumber = textarea.value.substr(0,startPos).split("\n").length - 1;
    content = textarea.value.split("\n")[lineNumber];
    var lines = textarea.value.split("\n");
    var endPos = lines[lineNumber].length+startPos;
    textarea.selectionStart = startPos;
    textarea.selectionEnd = endPos;
    return true; 
} 
```

# javascript - Javascript将数组添加到特定索引

> ID：13650539
> 
> 赞同：0
> 
> 时间：2012-11-30T17:55:47.290
> 
> 标签：javascript

当我的应用程序启动时有以下全局变量：

`events = [];`

然后，如果我使用以下简化的代码片段使用 ajax 获取一些东西：

```
events[0] = [];

setTimeout(function fetchEventsThisWeek(){

    $.ajax({
      url: '/event/getEventsBetweenDates',
      type: 'POST',
      data : { from_date : currentweek.from_date.toString("yyyy-MM-d") , to_date :  currentweek.to_date.toString("yyyy-MM-d"), limit : limit, offset : offset },
      success: function(data) {
            jQuery.each(data, function(index){
                events[0].push(data[index]['attributes']);
            });

            offset = offset + limit;
            entry_count = entry_count + data.length;

            if(data.length < limit) { // We reached the end of the table so we don't need to call the function again
                renderEvents(current, offset - limit, entry_count);
                //Make sure the current next week button gets enabled because we are done with the results

            } else {
                renderEvents(current,  offset - limit, offset);
                setTimeout(fetchEventsThisWeek, 150); // There are more results, continue
            }

      }
    })
}, 150); 
```

此递归函数仅获取两个日期之间的所有事件并不断调用自身，直到数据库中没有记录为止。我的问题是：

使用变量：

```
events[0] = []; 
```

我想将数组的索引指定为我的星期条目。因此，如果我寻找特定的一周，我可以通过数组索引获取已经从我的数组中获取的所有条目。

我的问题是，当我想获取更多周时，例如：

```
events[1] = [];// Index 1 would represent the next week 
```

数组只是在大小上扩展并且所有都附加到末尾，所以我有一个大数组而不是多维数组。为什么是这样？我怎样才能实现这种行为？

编辑：让我扩展我的问题。

我需要 events 变量中的几个 json 对象数组。所以..

```
events[0] = [ /*contains array of json objects */];
events[1] = [ /*contains array of json objects */];
events[2] = [ /*contains array of json objects */]; 
```

每个数组索引代表 1 周。所以索引 0 是当前周，索引 1 是第 1 周，索引 2 是第 2 周，依此类推。我什至想做以下事情，但我不知道这是否可能：

```
events[-1] = [ /*contains array of json objects */]; 
```

索引 -1 将是过去 1 周。有人可以让我知道这是否可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:59:04.443

您正在寻找`Array.unshift`：

```
events.unshift([]); 
```

[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/unshift)

# c# - 如何获得页面的高度？

> ID：13650558
> 
> 赞同：0
> 
> 时间：2012-11-30T17:56:58.560
> 
> 标签：c#, wpf, xaml

如何获得页面的高度？，即；页面中所有元素的高度。

例如，如果我有这个制作页面的 XAML，我如何在运行时获得高度？

```
<Page x:Class="DialogViews.SomeError"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="300" d:DesignWidth="400"
    Title="SomeMessage">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="50" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Label Grid.Row="0" Style="{StaticResource ResourceKey=DialogTitleError}">A Problem</Label>
        <TextBlock Grid.Row="1" Style="{StaticResource ResourceKey=DialogMsg}">
            Some message to user
        </TextBlock>
        <Label Grid.Row="2" HorizontalAlignment="Right">
            <Hyperlink>
                Some link for info
            </Hyperlink>
        </Label>
    </Grid>
</Page> 
```

**原因：**

我创建了一个自定义窗口，它将作为对话框消息显示给用户，该窗口包含一个框架，该框架又包含此页面。我正在尝试将窗口的高度固定为页面的高度。

**我试过了：**

```
myPage.Height; //NaN
myPage.ActualHeight; //0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:44:06.763

如果您想使 Window 的大小适合您的用户控件`Page`，那么我建议您尝试 Window 的[SizeToContent](http://msdn.microsoft.com/en-us/library/system.windows.sizetocontent.aspx)属性。

```
 <Window x:Class "MyNameSpace.MyWindow"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         SizeToContent="Height" /> 
```

高度 - 指定窗口将自动设置其高度以适应其内容的高度，而不是宽度。

Edit: This will stretch your Window to fit the Frame, which hopefully is set to change with the widths/heights of your Page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:11:28.857

你在寻找

```
 SystemParameters.FixedFrameVerticalBorderWidth
  SystemParameters.FixedFrameHorizontalBorderHeight
  SystemParameters.WindowCaptionHeight 
```

请检查这个[msdn 链接](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/87b7c373-2d44-4653-ac9f-4ba17a2c5b58)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:39:27.437

尝试

```
this.Height;<br/>
this.Width; 
```

# ruby-on-rails-3 - 尝试使用 phusion 乘客启动 Rails 应用程序时，US-ASCII 中的字节序列无效

> ID：13650562
> 
> 赞同：6
> 
> 时间：2012-11-30T17:57:20.140
> 
> 标签：ruby-on-rails-3, utf-8, bundler, passenger

我正在尝试使用 Phusion 乘客和 RVM 在 Ubuntu 生产服务器上部署 Rails 3 应用程序。我已成功安装 Phusion 乘客，但在浏览器上访问服务器时出现以下错误：

```
Ruby (Rack) application could not be started

These are the possible causes:

There may be a syntax error in the application's code. Please check for such errors and fix them.

A required library may not installed. Please install all libraries that this application requires.

The application may not be properly configured. Please check whether all configuration files are written correctly, fix any incorrect configurations, and restart this application.

A service that the application relies on (such as the database server or the Ferret search engine server) may not have been started. Please start that service. 
```

有关错误的更多信息可能已写入应用程序的日志文件。请检查它以便分析问题。

错误消息：US-ASCII 中的无效字节序列

异常类：ArgumentError

这是回溯：

```
0   /usr/lib/ruby/1.9.1/rubygems/specification.rb   575     in `normalize_yaml_input'
1   /usr/lib/ruby/1.9.1/rubygems/specification.rb   487     in `from_yaml'
2   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler.rb   294     in `block in load_gemspec_uncached'
3   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler.rb   291     in `chdir'
4   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler.rb   291     in `load_gemspec_uncached'
5   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler.rb   282     in `load_gemspec'
6   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/source.rb    411     in `block in load_spec_files'
7   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/source.rb    410     in `each'
8   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/source.rb    410     in `load_spec_files'
9   /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/source.rb    799     in `load_spec_files'
10  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/source.rb    381     in `local_specs'
11  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/source.rb    774     in `specs'
12  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/lazy_specification.rb    53  in `__materialize__'
13  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/spec_set.rb  86  in `block in materialize'
14  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/spec_set.rb  83  in `map!'
15  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/spec_set.rb  83  in `materialize'
16  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/definition.rb    113     in `specs'
17  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/definition.rb    158     in `specs_for'
18  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/definition.rb    147     in `requested_specs'
19  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/environment.rb   23  in `requested_specs'
20  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/runtime.rb   11  in `setup'
21  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler.rb   116     in `setup'
22  /var/lib/gems/1.9.1/gems/bundler-1.2.2/lib/bundler/setup.rb     17  in `'
23  /usr/lib/ruby/1.9.1/rubygems/custom_require.rb  59  in `require'
24  /usr/lib/ruby/1.9.1/rubygems/custom_require.rb  59  in `rescue in require'
25  /usr/lib/ruby/1.9.1/rubygems/custom_require.rb  35  in `require'
26  /home/juniormarketing/trndclone/config/setup_load_paths.rb  14  in `'
27  /usr/lib/ruby/1.9.1/rubygems/custom_require.rb  36  in `require'
28  /usr/lib/ruby/1.9.1/rubygems/custom_require.rb  36  in `require'
29  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/utils.rb    301     in `prepare_app_process'
30  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb     156     in `block in initialize_server'
31  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/utils.rb    563     in `report_app_init_status'
32  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb     154     in `initialize_server'
33  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  204     in `start_synchronously'
34  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  180     in `start'
35  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/rack/application_spawner.rb     129     in `start'
36  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    253     in `block (2 levels) in spawn_rack_application'
37  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   132     in `lookup_or_add'
38  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    246     in `block in spawn_rack_application'
39  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   82  in `block in synchronize'
40      prelude>    10:in `synchronize'
41  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server_collection.rb   79  in `synchronize'
42  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    244     in `spawn_rack_application'
43  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    137     in `spawn_application'
44  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/spawn_manager.rb    275     in `handle_spawn_application'
45  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  357     in `server_main_loop'
46  /var/lib/gems/1.9.1/gems/passenger-3.0.18/lib/phusion_passenger/abstract_server.rb  206     in `start_synchronously'
47  /var/lib/gems/1.9.1/gems/passenger-3.0.18/helper-scripts/passenger-spawn-server     99  in `' 
```

据我了解，启动应用程序时会调用 Bundler.setup() 并偶然发现一个非 ascii 字符。这是有道理的，因为该应用程序是针对法国网站的，但我确保`# -*- encoding : utf-8 -*-`在每个包含非 ascii 字符的源文件之上添加。

这是我的 Gemfile ：

```
# -*- encoding : utf-8 -*-
source 'https://rubygems.org'

gem 'rails', '3.2.7'
gem "will_paginate", :git => "https://github.com/p7r/will_paginate.git", :branch => "rails3"
gem "lorem"
gem 'paperclip'
gem 'rails3-jquery-autocomplete'
gem 'spreadsheet'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.10.0'
  gem 'faker', '0.3.1', :require => false
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
  gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails'
  gem 'jquery-ui-rails'
end

gem 'jquery-rails', '2.0.2'

group :test do
  gem 'capybara', '1.1.2'
    gem 'factory_girl_rails', '1.0'
  gem 'webrat'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
end

group :production do
  #gem 'pg', '0.12.2'
end 
```

关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T18:29:46.693

我在这篇文章中找到了解决方案：[When run bundle get invalid byte sequence in US-ASCII](https://stackoverflow.com/questions/7095845/when-run-bundle-get-invalid-byte-sequence-in-us-ascii)

我所要做的就是将这个添加到我的 Gemfile 之上：

```
if RUBY_VERSION =~ /1.9/
  Encoding.default_external = Encoding::UTF_8
  Encoding.default_internal = Encoding::UTF_8
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T18:46:30.020

我在运行 ruby​​ 1.9.3 的 Rails 2.3 应用程序中遇到了这个问题。一种解决方案是降级到 1.8.7，但这不是您真正想要的。如果在运行 rails 应用程序时发生此错误（例如浏览器显示错误消息），请将这些行放入您的 config/environment.rb （我将它们放在 RAILS_GEM_VERSION 行之后）：

```
 if RUBY_VERSION =~ /1.9/
        Encoding.default_external = Encoding::UTF_8
        Encoding.default_internal = Encoding::UTF_8
    end 
```

并重新启动应用程序（我总是重新启动整个 apache，还有其他方法）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T02:45:50.190

我遇到了这个问题，原来是消息文本中的引号不合适。

卷曲其中之一：'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-07T19:29:00.927

另一种选择是将`-E`命令行标志传递给 ruby​​：

```
export RUBYOPT=-EUTF-8:UTF-8 
```

在尝试恢复针对运行 10 年历史版本 Debian 的嵌入式设备的旧项目时遇到。

# linux - request_irq 成功但从未检测到中断

> ID：13650564
> 
> 赞同：1
> 
> 时间：2012-11-30T17:57:23.917
> 
> 标签：linux, serial-port, embedded-linux, atmel, irq

我在 ARM 处理器上运行嵌入式 linux 3.2.6。我正在使用修改版的 atmel 串行驱动程序来控制我设备上的 4 个 USART 端口。当我使用用内核编译的驱动程序时，一切正常。但我想将驱动程序作为内核模块运行。我进行了所有必要的更改并禁用了内部驱动程序，一切似乎都很好。4 个 tty 设备注册成功，我可以看到我的所有探测和初始化功能都正常工作。

所以这就是问题所在：当我尝试写入任何设备时，我的“开始传输”函数被调用，但随后等待来自 usart 的中断，该中断从未发生。所以写入只是挂起，使用逻辑分析仪我可以看到 RTS 被断言但 tx 线上没有字节显示。我知道我对 request_irq 的调用成功，但我从未在 /proc/interrupts 中看到任何 irq 条目。在驱动程序中，我还尝试使用 request_irq 为 gpio 线注册一个单独的中断处理程序，这工作正常。

我知道这是一个可能很难诊断的问题，但我正在寻找任何可能的建议，这些建议可以引导我朝着正确的方向寻找解决方案。如果您需要任何澄清，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:17:03.873

症状读起来就像没有启用（或关闭）的*外围时钟*：可以初始化设备而不会出现错误，并且可以设置 I/O 操作，但设备不执行任何操作；它玩死了。由于没有 I/O*启动*，您永远不会收到指示*完成*的中断！

要检查的另一件事是文件中硬件配置结构的条件编译指令`arch/arm/mach-xxx/zzz_devices.c`。
确保串行端口结构具有以下内容：

```
#if defined(CONFIG_SERIAL_ATMEL) || defined(CONFIG_SERIAL_ATMEL_MODULE) 
```

而不仅仅是

```
#if defined(CONFIG_SERIAL_ATMEL) 
```

# 附录

> 我可能是错的，但时钟不应该对导致中断的 CTS 引脚产生任何影响，对吧？

不对。
这些数字电路是同步状态机：没有时钟，就无法处理输入引起的状态变化。
此外，SoC 和现代 uController 使用外设时钟作为这些集成外设的开/关开关。硅芯片上的功能（即外围设备）通常比实际可用的要多得多，这主要是由于板上的引脚数量不足。因此，禁用未使用设备的时钟以降低功耗。

你太专注于中断。
您没有可解决的中断问题；这些是次要故障。
尝试传输时缺乏输出更为重要和具有启发性。
根本原因可能是 USART 设备的配置有缺陷，因为传输位是已配置和运行的 USART 的自动操作。
如果不工作与工作之间的区别是*可加载模块*与*静态链接*，那么根本原因将是一些基本（和微不足道）的东西，就像我的两个建议一样。

此外，您对 的缺乏确认 `#if defined()`，例如您没有回应*“哦，是的，我们已经知道了”*，会引发一个巨大的危险信号，上面写着**“先修复我！”**

# 附录 2

在发现无法使用 Atmel 串行驱动程序配置/构建为可加载模块后，我很想删除此答案`make menuconfig`（这是一半答案的前提）。（当然，该`Kconfig`文件*可以*被破解以使配置变量*三态*而不是*布尔值*来克服模块限制。）我已经为 OP 留下了评论。但我也想保留对 Stratton 先生的评论，指出`.config`文件中的符号是如何（不）使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T18:21:09.363

所以我终于解决了我的问题。感谢您的回复，他们都没有直接解决我的问题，但他们确实提示进一步检查我的代码。经过一些试验和错误，我终于让它工作了。我最初将每个 usart 的 platform_device 结构从 /mach-at91/xxx_devices.c 移动到我的可加载模块。好吧，由于某种原因，结构没有获得正确的数据以映射到硬件，我想是因为它没有正确链接来自内核的符号（虽然从未收到错误消息），所以一些注册功能不是' t 甚至被调用。我最终将结构和 platform_device_register 调用移回设备文件。我还决定使用原始的 atmel_serial.c 驱动程序来保留内置控制台的驱动程序。我必须在设备文件和内置 atmel_serial.c 文件中更改控制台的 platform_device 名称，以免它与我的 usart 端口驱动程序冲突。我发现将 usart 的 platform_device 和 platform_driver 名称从“atmel_usart”以外的任何名称更改都会导致 usart 传输失败。我真的不明白为什么，但我只是把它留作 atmel_usart 所以它可以工作。

再次感谢所有回答我问题的人。

# c# - 给定定义为父对象的对象列表，有没有办法从子类访问变量？

> ID：13650567
> 
> 赞同：2
> 
> 时间：2012-11-30T17:57:41.327
> 
> 标签：c#, oop, inheritance, casting, polymorphism

我目前正在开发一个小游戏，我有一个关于 OOP 实践的问题。我的问题是，如果您有一个列表或一个父类型的对象数组，是否有任何方法可以访问子类中的变量。

我现在正在学校上 CS 课程，所以我没有我的源代码，但它一直困扰着我，我也不太确定我应该在这里寻找什么，可能是演员表? 我的 OOP 知识有点分散（除了 Stack Overflow，很难在 OOP 上找到好的资源，如果你知道的话，请指出一个好的教程的方向）但我想实施好的实践，所以我不跑遇到问题（这是一个相当大的项目）

让我在这里说明一下我的意思（同样我没有我的消息来源，但它是这样的）：

```
 List<Tile> Tiles = new List<Tile>(); 
    Tiles.add(new Water()); 
    Tiles.add(new Sand()); 

    foreach(Tile tile in Tiles)
    {
         tile.variable_fromsand = 10; //hypothetical, how could I access a public
                                      //member from sand here, if at all
    } 
```

其中水和沙子是基类 Tile 的子类。

很抱歉，如果之前已经回答过这个问题，我不确定我在寻找什么。如果过去已充分回答，请指出正确的线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:00:03.460

您可以尝试投射它，或只选择`Sand`瓷砖：

```
// if tile is Sand then use casting
foreach(Tile tile in Tiles)
{
     if(tile is Sand)
     {
         ((Sand)tile).variable_fromsand = 10;
     }
}

// select only tiles which are of Sand type
foreach(Sand tile in Tiles.OfType<Sand>())
{
     tile.variable_fromsand = 10;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:02:22.037

铸造会起作用。

```
foreach(Tile tile in Tiles)
{
    if (tile is Sand)
         ((Sand)tile).variable_fromsand = 10; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T18:01:42.037

如果我理解正确，Sand 继承自 Tile，并且您想在遍历 Tiles 列表时读取其中一个属性。

您可以在 foreach 循环中强制执行此操作：

```
var sand = Tile as Sand;
if (sand != null)
{
    // do something with the property of Sand.
} 
```

通过使用`as`，只有当`tile`变量实际上是类型时，您才会强制转换为 Sand`Sand.`如果您`Water`在其中有对象，`as`则将返回`null`，并且您将没有您正在寻找的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T18:00:15.257

你可以做这样的事情，但我会质疑抽象。由于您没有具体说明您实际在做什么，因此很难给出“这是您*应该*做的答案”。

```
foreach(var sand in Tiles.OfType<Sand>())
{
} 
```

# java - 为什么客户端 B 没有得到完整的文件

> ID：13650574
> 
> 赞同：0
> 
> 时间：2012-11-30T17:58:17.760
> 
> 标签：java, swing, network-programming, thread-safety, swingworker

我正在尝试在 2 个 Java 套接字客户端之间建立文件传输机制。发件人客户端将包含以下代码片段：

```
 FileInputStream fis = null;
    BufferedInputStream bis = null;
    BufferedOutputStream outStream = null;
    byte[] fileBytes = new byte[(int) file.length()];
    int bytesRead = 0;

    try {
        fis = new FileInputStream(file);
        bis = new BufferedInputStream(fis);
        outStream = new BufferedOutputStream(socket.getOutputStream());
        bytesRead = bis.read(fileBytes, 0, fileBytes.length);
        outStream.write(fileBytes, 0, fileBytes.length);

    } catch (IOException _IOExc) {
        Logger.getLogger(ChatClient.class.getName()).log(Level.SEVERE, 
            null, _IOExc);
        //QuitConnection(QUIT_TYPE_DEFAULT);
    } 
```

服务器中介看起来像：

```
public void run() {
    assert (outSocket != null);
    byte[] bytes = new byte[fileSize];
    try {
        System.out.println("inStream " + inStream.available());
        outStream = new BufferedOutputStream(outSocket.getOutputStream());
        inStream.read(bytes, 0, fileSize);
        outStream.write(bytes, 0, fileSize);
        outStream.flush();

    } catch (IOException ex) {
        Logger.getLogger(FileTransport.class.getName()).log(Level.SEVERE, 
            null, ex);
    }
  } 
```

目标客户端：

```
 public void run() {
        try {
            System.out.println("Start reading...");
            int len = 1024;
            BufferedInputStream inStream = new BufferedInputStream 
                  (client.user.getClientSocket().getInputStream());
            while ((bytesRead = inStream.read(fileBytes, 0, len)) > 
                  0 && current < fileSize) {
                current = current + bytesRead;
                System.out.println("current "+ current);
                bos.write(fileBytes, 0, bytesRead < len ? bytesRead : len);
            }
            bos.flush();
            bos.close();
        } catch (IOException ex) {
            Logger.getLogger(ReadFileThread.class.getName()).log(Level.SEVERE, 
                null, ex);
        } catch (InterruptedException e) {
        }
    } 
```

服务器和目标客户端都提前传递了“fileSize”，现在的问题是服务器端获取的数据略少，而客户端 B 只从服务器读取 8192 字节的数据，永远无法退出循环。

非常感谢凯夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:23:43.807

不要忽略`read()`方法的结果。它返回已读取的字节数，不一定是文件的长度。`read()`必须始终在循环中调用，直到它返回 -1。

并且永远不要使用`available()`. 它不会返回您认为它返回的内容。只需循环直到`read()`返回 -1 或直到读取的字节数达到预期计数。

阅读[IO 教程](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)。

# matomo - Piwik 确定是移动用户还是计算机用户

> ID：13650575
> 
> 赞同：1
> 
> 时间：2012-11-30T17:58:18.333
> 
> 标签：matomo

我的问题是您是否可以在 piwik 中确定用户是否使用移动设备或计算机浏览您的网站/网页。如果是这样，您将如何处理？我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:53:50.920

查看[在线演示](http://demo.piwik.org/index.php?module=CoreHome&action=index&idSite=7&period=day&date=yesterday#module=UserSettings&action=index&idSite=7&period=day&date=yesterday)（您可能希望将语言设置更改为右上角），您可以在“访问者”->“设置”->“操作系统”下查看用户使用的操作系统。Android、iPhone、iPad、iPod、Windows Phone OS、Symbian 和 Windows Mobile 都在列表中。

# php - 在 PHP 中将特定字符串转换为时间

> ID：13650578
> 
> 赞同：4
> 
> 时间：2012-11-30T17:58:26.507
> 
> 标签：php, date, strtotime

我需要将字符串转换为日期格式，但它返回一个奇怪的错误。字符串是这样的：

```
21 nov 2012 
```

我用了：

```
$time = strtotime('d M Y', $string); 
```

PHP 返回错误：

```
Notice:  A non well formed numeric value encountered in index.php on line 11 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T18:00:49.890

你调用的函数完全错误。就通过吧

```
$time = strtotime('21 nov 2012') 
```

第二个参数用于传入与新时间相关的时间戳。它默认为`time()`.

**编辑：**这将返回一个 unix 时间戳。如果要对其进行格式化，请将新时间戳传递给`date`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T19:19:55.677

要将日期字符串转换为不同的格式：

```
<?php echo date('d M Y', strtotime($string));?> 
```

[`strtotime`](http://php.net/manual/en/function.strtotime.php)解析字符串返回表示的 UNIX 时间戳。 [`date`](http://php.net/manual/en/function.date.php)将 UNIX 时间戳（或当前系统时间，如果未提供时间戳）转换为指定格式。因此，要重新格式化日期字符串，您需要传递它`strtotime`，然后将返回的 UNIX 时间戳作为`date`函数的第二个参数传递。第一个参数`date`是您想要的格式的模板。

[单击此处](http://php.net/manual/en/function.date.php)了解有关日期格式选项的更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:00:09.997

您使用了错误的函数，`strtotime`仅返回自纪元以来的秒数，它不格式化日期。

尝试做：

```
$time = date('d M Y', strtotime($string)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-24T14:43:37.733

对于更复杂的字符串，请使用：

```
$datetime = DateTime::createFromFormat("d M Y H:i:s", $your_string_here);
$timestamp = $datetime->getTimestamp(); 
```

# java - 警告：无法自动创建类型

> ID：13650580
> 
> 赞同：0
> 
> 时间：2012-11-30T17:58:41.610
> 
> 标签：java, grails, groovy

我正在尝试使用参数构造一个对象，如下所示：

```
PublicationResource resourceAux = new PublicationResource (publication: pub, resource: res);
if (resourceAux)
{
    resourceAux.save(flush: true, failOnError: true);
} 
```

我收到此错误：

```
WARN 2012-11-20 22:52:35,775 [org.codehaus.groovy.grails.web.binding.GrailsDataBinder] Unable to auto-create type, Groovy Runtime error: java.lang.InstantiationException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T19:31:44.917

PublicationResource 类中的发布或资源的类型不是可静态类型（即抽象或接口）。

# android - 在 onClick 中放置一个 Spinner

> ID：13650581
> 
> 赞同：0
> 
> 时间：2012-11-30T17:58:44.340
> 
> 标签：android, dialog, android-spinner

我在一个活动中有四个按钮，所以我使用的是 onClick 方法。其中一个（这就是这里的问题Ee应该显示一个内部有两个微调器的对话框。这是代码：

```
public void onClick(View view) {

        switch (view.getId()) {

        case R.id.bAddNew:

        // first button - not related

            break;

        case R.id.bAdvancedSettings:

            // Spinner 1
            plan = (Spinner) findViewById(R.id.spinner1);
            ArrayAdapter<CharSequence> spinner1Adapter = ArrayAdapter
                    .createFromResource(this, R.array.paymentplan,
                            android.R.layout.simple_spinner_item);
            spinner1Adapter
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            plan.setAdapter(spinner1Adapter);
            plan.setSelection(0);
            plan.setOnItemSelectedListener(new MyOnItemSelectedListenerPlan());

            // Spinner 2
            display = (Spinner) findViewById(R.id.spinner2);
            ArrayAdapter<CharSequence> spinner2Adapter = ArrayAdapter
                    .createFromResource(this, R.array.quickview,
                            android.R.layout.simple_spinner_item);
            spinner2Adapter
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            display.setAdapter(spinner2Adapter);
            display.setSelection(0);
            display.setOnItemSelectedListener(new MyOnItemSelectedListenerDisplay());

            final Dialog dialog = new Dialog(ManageDebts.this);
            dialog.setContentView(R.layout.advanced);
            dialog.setTitle("Advanced Details");
            dialog.setCancelable(true);

            Button Submit = (Button) findViewById(R.id.buttonAdvancedSubmit);
            Submit.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    dialog.dismiss();

                }
            });

break;

// next two buttons 
```

}

这是我得到的 LogCat：

```
11-30 09:50:52.305: E/AndroidRuntime(10747): FATAL EXCEPTION: main
11-30 09:50:52.305: E/AndroidRuntime(10747): java.lang.IllegalStateException: Could not execute method of the activity
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.view.View$1.onClick(View.java:3597)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.view.View.performClick(View.java:4202)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.view.View$PerformClick.run(View.java:17340)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.os.Handler.handleCallback(Handler.java:725)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.os.Looper.loop(Looper.java:137)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.app.ActivityThread.main(ActivityThread.java:5039)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at java.lang.reflect.Method.invokeNative(Native Method)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at java.lang.reflect.Method.invoke(Method.java:511)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at dalvik.system.NativeStart.main(Native Method)
11-30 09:50:52.305: E/AndroidRuntime(10747): Caused by: java.lang.reflect.InvocationTargetException
11-30 09:50:52.305: E/AndroidRuntime(10747):    at java.lang.reflect.Method.invokeNative(Native Method)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at java.lang.reflect.Method.invoke(Method.java:511)
11-30 09:50:52.305: E/AndroidRuntime(10747):    at android.view.View$1.onClick(View.java:3592)
11-30 09:50:52.305: E/AndroidRuntime(10747):    ... 11 more
11-30 09:50:52.305: E/AndroidRuntime(10747): Caused by: java.lang.NullPointerException
11-30 09:50:52.305: E/AndroidRuntime(10747):    at com.---.---.ManageDebts.onClick(ManageDebts.java:211)
11-30 09:50:52.305: E/AndroidRuntime(10747):    ... 14 more 
```

第 211 行是

```
plan.setAdapter(spinner1Adapter); 
```

任何人都可以看到问题是什么？我做过很多对话和微调，但这是第一次在一起。不确定我是否只是不知道该怎么做，或者这只是我忽略的小事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:01:54.837

我想这是问题所在

```
 Button Submit = (Button) findViewById(R.id.buttonAdvancedSubmit); 
```

用。。。来代替

```
 Button Submit = (Button) dialog .findViewById(R.id.buttonAdvancedSubmit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:04:11.647

你的问题是你试图`Spinner`从你的`Activity`内容视图中找到。

只需致电：

```
plan = (Spinner) dialog.findViewById(R.id.spinner1); 
```

对于其中的所有其他视图`Dialog`

`dialog.setContentView()`在查找这些视图之前，您必须调用。

# android - AVD Manager - 没有为此目标安装系统映像

> ID：13650584
> 
> 赞同：35
> 
> 时间：2012-11-30T17:59:11.467
> 
> 标签：android

> **可能重复：**
> [无法创建 Android 虚拟设备](https://stackoverflow.com/questions/13488419/unable-to-create-android-virtual-device)

Android New AVD 弹出窗口中的 CPU/ABI 字段显示“没有为此目标安装系统映像”。

我该如何解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T18:02:42.910

打开您的 Android SDK 管理器并确保您下载/安装您正在开发的 API 级别的系统映像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T22:23:34.300

你应该 android sdk manager install 4.2 apı 17 -> ARM EABI v7a System Image

如果未安装 ARM EABI v7a System Image，则应全部安装。

# javascript - 如何量化 Javascript 正则表达式中的组？

> ID：13650586
> 
> 赞同：0
> 
> 时间：2012-11-30T17:59:12.343
> 
> 标签：javascript, regex, regex-group, quantifiers

假设我有一个字符串“QQxaxbxcQQ”，我想捕获所有 x 组，后跟任何字符。我也只想在QQ之间搜索（字符串中可能包含其他内容）。我认为这会奏效：

```
var matches = str.match(/QQ(x\w)+QQ/) 
```

然而，这似乎只是让我回到最后一场比赛（xc）。你能为我指出正确的方向吗？

编辑：我的问题的第一个版本过于简单化了。向原始响应者道歉。编辑以使其更接近我的实际问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:05:37.370

+ 运算符是贪婪的。`/(x\w)+/`应该匹配整个 string `'xaxbxc'`，并且捕获组将包含最终值以匹配`(x\w)`组件。在这种情况下`'xc'`。如果您希望捕获每个连续匹配，`/(x\w)+/`应该改为`/((?:x\w)+)/`. 这会在序列周围而不是在序列内部移动捕获组。`(?: )`代表非捕获组。

编辑：

如果您想要 的每个实例`(x\w)`，而不仅仅是连续实例，请不要使用 + 运算符或捕获组。只需使用全局正则表达式：`/x\w/g`.

`'QQxaxbQQxcQQ'.match(/x\w/g)`产量`['xa, 'xb', 'xc']`。

`'QQxaxbQQxcQQ'.match(/((?:x\w)+)/)`产量`['xaxb', 'xaxb']`。

编辑2：

如果您只想在`QQ`s 之间搜索，a`split`应该是最快的方法。（下划线在这里很有帮助。）

```
_.chain('xyQQxaxbQQxcQQxr'.split('QQ'))
.slice(1, -1)
.map(function (string) {
    return string.match(/x\w/g);
})
.flatten()
.compact()
.value() 
```

产生 ['xa', 'xb', 'xc']

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:06:13.033

您只需要`g`在正则表达式末尾添加参数。`g`flag 返回一个包含所有匹配项的数组，在我们的例子中是反向引用的所有匹配项`(x\w)`

这里用粗体表示：/QQ(x\w)+QQ/ **g**

```
var matches = str.match(/QQ(x\w)+QQ/g) 
```

匹配是一个数组

看看这个：http: [//jsfiddle.net/SZRSA/3/](http://jsfiddle.net/SZRSA/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:59:59.707

如果要捕获所有组，请使用以下命令：

```
var matches = str.match(/(x\w)/g) 
```

输出 ：

```
["xa", "xb", "xc"] 
```

我做了两个改变：

*   删除了`+`你似乎想要的每个 x 后跟一个 char
*   添加`g`修饰符以要求所有组

[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

编辑：如果你想要的是只在 QQ 和 QQ 之间获得匹配，你可以这样做：

```
var matches = str.split('QQ').filter(function(v,i){return i%2})
    .join(' ').match(/(x\w)/g) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:01:53.850

```
'xaxbxc'.match(/x\w/g); 
```

返回

```
["xa", "xb", "xc"] 
```

由于OP改变了问题。现在它是[JavaScript 正则表达式和子匹配](https://stackoverflow.com/questions/844001/javascript-regex-and-submatches)的重复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T18:03:44.573

也许将重复包装在捕获组中是您想要的（捕获`x\w`连接在一起的所有实例）：

```
var matches = str.match(/QQ((x\w)+)QQ/) 
```

这返回`"xaxbxc"`为`matches[1]`

# ruby-on-rails - Rails - 如何使用 has_and_belongs_to_many 与复合主键的关联

> ID：13650587
> 
> 赞同：8
> 
> 时间：2012-11-30T17:59:12.477
> 
> 标签：ruby-on-rails

我正在使用 Dr.Nic 的轨道复合主键 (http://compositekeys.rubyforge.org/)

在示例中，他有 has_many 和 belongs_to 关系，但没有 has_and_belongs_to_many

我的关联从书籍到流派很好（书籍具有标题和作者的复合初级键），但流派到书籍尝试查询连接表中不存在的 book_id 列，并引发错误。

```
class Book < ActiveRecord::Base
  self.primary_keys = :title, :author
  has_and_belongs_to_many :genres, foreign_key: [:title, :author]
end

class Genre < ActiveRecord::Base
  has_and_belongs_to_many :books, foreign_key: [:title, :author]
end 
```

编辑：我还使用`:association_foreign_key`流派模型上的选项让它工作

```
class Genre < ActiveRecord::Base
  has_and_belongs_to_many :books, association_foreign_key: [:title, :author]
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T18:29:24.467

根据[Ruby on Rails 样式指南](https://github.com/bbatsov/rails-style-guide)：

> 更喜欢 has_many :through 到 has_and_belongs_to_many。使用 has_many :through 允许连接模型上的附加属性和验证。

这将解决您的问题：您将只有 has_many 和 belongs_to 关系，没有 HABTM ;)

**在你的情况下：**

```
class Book < ActiveRecord::Base
  self.primary_keys = :title, :author
  has_many :book_genre_relations
  has_many :genres, through: :book_genre_relations
end

class Genre < ActiveRecord::Base
  has_many :book_genre_relations
  has_many :books, through: :book_genre_relations
end

class BookGenreRelation < ActiveRecord::Base # Sorry but couldn't find a better name...
  belongs_to :book
  belongs_to :genre
end 
```

您可能需要更改 foreign_key 的拼写错误，我不熟悉复合主键。

# php - 如何将数组项分组以输出到表中 PHP

> ID：13650592
> 
> 赞同：0
> 
> 时间：2012-11-30T17:59:35.677
> 
> 标签：php, html, arrays, api

我有一个这样的数组：

```
Array
(
    [0] => Array
        (
            [date] => 2012-11-29
            [description] => Work Done
            [hours] => 1.0
            [id] => 6502
            [person-id] => 8853
            [project-id] => 8928
            [todo-item-id] => 122353
            [person-name] => Jane Doe
        )

    [1] => Array
        (
            [date] => 2012-11-29
            [description] => Work Done 2
            [hours] => 1.0
            [id] => 6502
            [person-id] => 8853
            [project-id] => 8928
            [todo-item-id] => 122353
            [person-name] => Jane Doe
        )

    [2] => Array
        (
            [date] => 2012-11-28
            [description] => Work Done 3
            [hours] => 1.0
            [id] => 6502
            [person-id] => 8853
            [project-id] => 8928
            [todo-item-id] => 122353
            [person-name] => Jane Doe
        ) 
```

等等。

我想在按日期分组的表格中显示此信息。我正在使用 foreach 来获取每个值，但我试图弄清楚如何检查每个数组中的日期是否相同，如果是，则只回显一次日期。这就是我到目前为止所得到的......

```
<table>
     <tbody>
                <?php 

                  foreach($time as $log){
                    //tried this but it doesn't work 
                    //if(array_unique($log['date'])){
                      echo '<thead>
                              <tr class="info">
                                <td colspan="3">'.$log[date].'</td>
                              </tr>
                            </thead>';
                          //};

                  echo "<tr>";
                  echo "<td>{$log['todo-item-id']}</td>";
                  echo "<td>{$log['description']}</td>";
                  echo "<td>{$log['hours']}</td>";
                  echo "</tr>";
                } ?>

              </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:06:25.887

你只能有一个头。在循环结束时设置日期，或者在您完成以下比较之后：此日期是否不等于前一个日期，或未设置。如果是，则输出它，否则输出一个不间断的空格。

```
<?php 

foreach($time as $log) {
    // check if it is not set or not equal and output if needed
    echo '<tr class="info">
            <td colspan="3">'.(!isset($prevdate) || $prevdate!=$log[date]? $log[date] : '&nbsp;').'</td>
          </tr>
        ';

    echo "<tr>
        <td>{$log['todo-item-id']}</td>
        <td>{$log['description']}</td>
        <td>{$log['hours']}</td>
        </tr>";
    // set it
    $prevdate=$log[date];
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:03:57.297

在循环过程中，保存上一个日期，如果相同则不要回显它，否则将新日期保存为上一个日期并回显新日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:12:22.847

作为您的问题的解决方案，请参考以下代码片段。

```
 <table>
            <tbody>
            <?php 
    $a=array();
              foreach($time as $log){

                if(!in_array($log['date'],$a)) { array_push($a,$log['date']);

                  echo '<thead>
                          <tr class="info">
                            <td colspan="3">'.$log[date].'</td>
                          </tr>
                        </thead>';
                      }

              echo "<tr>";
              echo "<td>{$log['todo-item-id']}</td>";
              echo "<td>{$log['description']}</td>";
              echo "<td>{$log['hours']}</td>";
              echo "</tr>";
            } ?>

          </tbody>
    </table> 
```

# php - 如何在帖子中的每张图片下创建一个链接，该链接使用每张图片的标题和描述中包含的信息？

> ID：13650593
> 
> 赞同：0
> 
> 时间：2012-11-30T17:59:37.180
> 
> 标签：php, wordpress

我目前有以下代码将插入帖子中的任何图像包装到一组 div 中（用于样式目的；请参阅： http: [//natv.is/wp/](http://natv.is/wp/)）。我想扩展它，以便在每张照片下方显示文字“PHOTO CREDIT：”，后跟摄影师姓名（这是图像“标题”框的内容）作为摄影师作品集的超链接（这是内容图片的“描述”框）。问题是，我不确定如何调用这些框的内容或将它们放入 html 中。迄今为止所有的方法都无济于事。有任何想法吗？

```
function filter_images($content){
return preg_replace(
     '/<img (.*) \/>\s*/iU', '</div><div class="eightcol"><img \1 /></div><div class="onecol"></div><div class="sevencol">', $content);
} add_filter('the_content', 'filter_images'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:16:13.070

您好，您可以使用元框只需 google WordPress 元框，您就会知道之后您可以通过调用显示值

```
 <?PHP the_meta(); ?> 
```

如果您没有收到，请在您的模板文件中返回给我

# c - 如何确定 PIC32 中的 malloc 堆统计信息

> ID：13650596
> 
> 赞同：3
> 
> 时间：2012-11-30T17:59:43.057
> 
> 标签：c, memory-management, embedded, pic

我在 pic32 处理器上使用 malloc()/free() 和朋友，所以没有虚拟内存等等，只是我在链接时声明的固定大小的堆。有什么方法可以在运行时确定我目前 malloc 了多少？还有多少可用？我见过一些对 mallinfo() 函数的引用，但当前的 pic32 库似乎不支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:13:22.260

我已经使用了 PIC18 和 PIC24 处理器，并且发现堆要谨慎使用。`malloc()`一个技巧是在设备启动时，通过使用越来越大的内存块来确定堆大小，`free()`直到找到限制。然后，您可以自行跟踪分配的内存。

注意事项：

*   如果您分配/取消分配奇数或大块内存，所有赌注都`malloc()`将失败，如果您碰巧有足够的可用内存字节，但不在连续块中，则会失败。
*   `malloc()`如果您使用使用/的第三方代码，`free()`您还必须查看/修改他们的代码。

我发现可以在堆上完成的任何事情都可以通过静态内存或堆栈完成，但代价是重构代码。这对你来说是一个可行的选择吗？

在[electronics.stackexchange.com](http://electronics.stackexchange.com)上查看这个[相关问题](https://electronics.stackexchange.com/questions/7850/use-of-malloc-in-pic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:18:05.033

下面是为 Arduino 编写的内存分析器。它取自[Arduino 论坛](http://arduino.cc/forum/index.php/topic,27536.msg204023.html#msg204023)中的帖子。您将需要进行必要的修改以使其在 PIC 中正常工作。但它应该能够帮助您确定运行时的内存使用情况。

```
/*
 * Cut-and-pasted from www.arduino.cc playground section for determining heap and stack pointer locations.
 * http://www.arduino.cc/playground/Code/AvailableMemory
 *
 * Also taken from the Pololu thread from Paul at: http://forum.pololu.com/viewtopic.php?f=10&t=989&view=unread#p4218
 *
 * Reference figure of AVR memory areas .data, .bss, heap (all growing upwards), then stack growing downward:
 * http://www.nongnu.org/avr-libc/user-manual/malloc.html
 *
 */

extern unsigned int __data_start;
extern unsigned int __data_end;
extern unsigned int __bss_start;
extern unsigned int __bss_end;
extern unsigned int __heap_start;
//extern void *__malloc_heap_start; --> apparently already declared as char*
//extern void *__malloc_margin; --> apparently already declared as a size_t
extern void *__brkval;
// RAMEND and SP seem to be available without declaration here

int16_t ramSize=0;   // total amount of ram available for partitioning
int16_t dataSize=0;  // partition size for .data section
int16_t bssSize=0;   // partition size for .bss section
int16_t heapSize=0;  // partition size for current snapshot of the heap section
int16_t stackSize=0; // partition size for current snapshot of the stack section
int16_t freeMem1=0;  // available ram calculation #1
int16_t freeMem2=0;  // available ram calculation #2

/* This function places the current value of the heap and stack pointers in the
 * variables. You can call it from any place in your code and save the data for
 * outputting or displaying later. This allows you to check at different parts of
 * your program flow.
 * The stack pointer starts at the top of RAM and grows downwards. The heap pointer
 * starts just above the static variables etc. and grows upwards. SP should always
 * be larger than HP or you'll be in big trouble! The smaller the gap, the more
 * careful you need to be. Julian Gall 6-Feb-2009.
 */
uint8_t *heapptr, *stackptr;
uint16_t diff=0;
void check_mem() {
  stackptr = (uint8_t *)malloc(4);          // use stackptr temporarily
  heapptr = stackptr;                     // save value of heap pointer
  free(stackptr);      // free up the memory again (sets stackptr to 0)
  stackptr =  (uint8_t *)(SP);           // save value of stack pointer
}

/* Stack and heap memory collision detector from: http://forum.pololu.com/viewtopic.php?f=10&t=989&view=unread#p4218
 * (found this link and good discussion from: http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1213583720%3Bstart=all )
 * The idea is that you need to subtract your current stack pointer (conveniently given by the address of a local variable)
 * from a pointer to the top of the static variable memory (__bss_end). If malloc() is being used, the top of the heap
 * (__brkval) needs to be used instead. In a simple test, this function seemed to do the job, showing memory gradually
 * being used up until, with around 29 bytes free, the program started behaving erratically.
 */
//extern int __bss_end;
//extern void *__brkval;

int get_free_memory()
{
  int free_memory;

  if((int)__brkval == 0)
     free_memory = ((int)&free_memory) - ((int)&__bss_end);
  else
    free_memory = ((int)&free_memory) - ((int)__brkval);

  return free_memory;
}

void setup()                    // run once, when the sketch starts
{
  Serial.begin(57600);
}

void loop()                     // run over and over again
{
  Serial.print("\n\n--------------------------------------------");
  Serial.print("\n\nLOOP BEGIN: get_free_memory() reports [");
  Serial.print( get_free_memory() );
  Serial.print("] (bytes) which must be > 0 for no heap/stack collision");

  Serial.print("\n\nSP should always be larger than HP or you'll be in big trouble!");

  check_mem();

  Serial.print("\nheapptr=[0x"); Serial.print( (int) heapptr, HEX); Serial.print("] (growing upward, "); Serial.print( (int) heapptr, DEC); Serial.print(" decimal)");

  Serial.print("\nstackptr=[0x"); Serial.print( (int) stackptr, HEX); Serial.print("] (growing downward, "); Serial.print( (int) stackptr, DEC); Serial.print(" decimal)");

  Serial.print("\ndifference should be positive: diff=stackptr-heapptr, diff=[0x");
  diff=stackptr-heapptr;
  Serial.print( (int) diff, HEX); Serial.print("] (which is ["); Serial.print( (int) diff, DEC); Serial.print("] (bytes decimal)");

  Serial.print("\n\nLOOP END: get_free_memory() reports [");
  Serial.print( get_free_memory() );
  Serial.print("] (bytes) which must be > 0 for no heap/stack collision");

  // ---------------- Print memory profile -----------------
  Serial.print("\n\n__data_start=[0x"); Serial.print( (int) &__data_start, HEX ); Serial.print("] which is ["); Serial.print( (int) &__data_start, DEC); Serial.print("] bytes decimal");

  Serial.print("\n__data_end=[0x"); Serial.print((int) &__data_end, HEX ); Serial.print("] which is ["); Serial.print( (int) &__data_end, DEC); Serial.print("] bytes decimal");

  Serial.print("\n__bss_start=[0x"); Serial.print((int) & __bss_start, HEX ); Serial.print("] which is ["); Serial.print( (int) &__bss_start, DEC); Serial.print("] bytes decimal");

  Serial.print("\n__bss_end=[0x"); Serial.print( (int) &__bss_end, HEX ); Serial.print("] which is ["); Serial.print( (int) &__bss_end, DEC); Serial.print("] bytes decimal");

  Serial.print("\n__heap_start=[0x"); Serial.print( (int) &__heap_start, HEX ); Serial.print("] which is ["); Serial.print( (int) &__heap_start, DEC); Serial.print("] bytes decimal");

  Serial.print("\n__malloc_heap_start=[0x"); Serial.print( (int) __malloc_heap_start, HEX ); Serial.print("] which is ["); Serial.print( (int) __malloc_heap_start, DEC); Serial.print("] bytes decimal");

  Serial.print("\n__malloc_margin=[0x"); Serial.print( (int) &__malloc_margin, HEX ); Serial.print("] which is ["); Serial.print( (int) &__malloc_margin, DEC); Serial.print("] bytes decimal");

  Serial.print("\n__brkval=[0x"); Serial.print( (int) __brkval, HEX ); Serial.print("] which is ["); Serial.print( (int) __brkval, DEC); Serial.print("] bytes decimal");

  Serial.print("\nSP=[0x"); Serial.print( (int) SP, HEX ); Serial.print("] which is ["); Serial.print( (int) SP, DEC); Serial.print("] bytes decimal");

  Serial.print("\nRAMEND=[0x"); Serial.print( (int) RAMEND, HEX ); Serial.print("] which is ["); Serial.print( (int) RAMEND, DEC); Serial.print("] bytes decimal");

  // summaries:
  ramSize   = (int) RAMEND       - (int) &__data_start;
  dataSize  = (int) &__data_end  - (int) &__data_start;
  bssSize   = (int) &__bss_end   - (int) &__bss_start;
  heapSize  = (int) __brkval     - (int) &__heap_start;
  stackSize = (int) RAMEND       - (int) SP;
  freeMem1  = (int) SP           - (int) __brkval;
  freeMem2  = ramSize - stackSize - heapSize - bssSize - dataSize;
  Serial.print("\n--- section size summaries ---");
  Serial.print("\nram   size=["); Serial.print( ramSize, DEC ); Serial.print("] bytes decimal");
  Serial.print("\n.data size=["); Serial.print( dataSize, DEC ); Serial.print("] bytes decimal");
  Serial.print("\n.bss  size=["); Serial.print( bssSize, DEC ); Serial.print("] bytes decimal");
  Serial.print("\nheap  size=["); Serial.print( heapSize, DEC ); Serial.print("] bytes decimal");
  Serial.print("\nstack size=["); Serial.print( stackSize, DEC ); Serial.print("] bytes decimal");
  Serial.print("\nfree size1=["); Serial.print( freeMem1, DEC ); Serial.print("] bytes decimal");
  Serial.print("\nfree size2=["); Serial.print( freeMem2, DEC ); Serial.print("] bytes decimal");

  delay(3000);
} 
```

不是一个精确的解决方案，但它应该作为一个很好的起点。

# iphone - 通过 mac/pc 读取 iPhone 文件的任何脚本/代码/方式

> ID：13650600
> 
> 赞同：0
> 
> 时间：2012-11-30T17:59:49.577
> 
> 标签：iphone, file

我想知道是否有任何方法（通过任何排序代码）访问部署在 iPhone/iPad 上的应用程序的应用程序目录，当插入到 mac/pc 时，就像 iPhoneExplorer 所做的那样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:22:07.967

就在这里。（如果没有，iTunes 和 iPhoneExplorer 怎么能做到？）

您可以使用 MobileDevice 库（在 OS X 和 Windows 上都有）。它是一个使用 C 语言的私有库，但可以使用反向工程头文件（例如，[here](http://theiphonewiki.com/wiki/index.php?title=MobileDevice_Library)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:15:12.617

您应该打开 iTunes 并浏览到您的设备。在具有 iOS 主屏幕样式视图的应用程序列表中，底部有一个部分可以选择一个应用程序，并管理它的文档存储文件夹。

您无需同步即可在此屏幕中查看最新信息。您可以立即将应用程序中的数据保存到计算机上的某个位置。

![在此处输入图像描述](../Images/b984381cb526a2bee1de0c62f9bdf216.png)

请阅读博客[如何将 iTunes 文件共享与您的 ios 应用程序集成以](http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app)了解更多详细信息。

# c++ - 在类中初始化变量

> ID：13650603
> 
> 赞同：0
> 
> 时间：2012-11-30T18:00:00.423
> 
> 标签：c++, string, vector

我需要以这种方式在类中初始化向量

```
vector<string> test("hello","world"); 
```

但是当我这样做时，编译器将它识别为一个函数并给我错误之类的错误：字符串常量之前的预期标识符等。

当我这样做时

```
vector<string> test = ("hello","world") 
```

没关系..有什么办法可以做到`vector<string> test("xx")`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:07:41.273

std::vector 中没有这样的构造函数可以让你像那样初始化它。您的第二个示例评估为`"world"`（这就是`,`运算符所做的），这就是向量中的结果。

如果要在声明时初始化向量，请使用初始化列表：

```
vector<string> test = {"hello", "world"}; 
```

确保以 C++-11 模式构建源代码以使其正常工作。如果您没有与 C++-11 兼容的编译器，则必须在之后将值添加到向量中：

```
vector<string> test;
test.push_back("hello");
test.push_back("world"); 
```

# java - 插入失败后我可以继续数据库事务吗？

> ID：13650604
> 
> 赞同：2
> 
> 时间：2012-11-30T18:00:00.737
> 
> 标签：java, oracle, spring, hibernate

我们的应用程序是高度并发的。它正在获取 MQ 数据并将其保存到数据库中。有多个消息可能包含相同的数据。因此，一条消息可能包含营业时间，而第二条消息可能包含营业时间和位置。

所以第一条消息传来，我保存了工作时间数据。然后第二笔交易带有相同的营业时间数据。现在我需要保存位置数据，但营业时间是重复的。由于并发性，我无法检查数据库的运行时间（如果我检查，它可能不存在，那么当我保存它时，它可能已被另一个线程插入）。我也想快点。（这个装载机有很多负载。）

当前，一条消息获得一个事务（Propagation.REQUIRED）（使用 Spring 和 Hibernate）。我在每种数据插入后进行刷新。所以我保存了位置数据，然后刷新。然后我保存工作时间并冲洗。

如果我只是捕获错误消息（它在flush（）之后抛出）并吃掉它，那么保存的其他数据（位置数据）还会保存吗？数据库插入失败后，事务仍然可以使用吗？所以如果第一次保存失败，我希望第二次插入工作。

我一直在看 Propagation.REQUIRES_NEW 但遇到了一些麻烦。另外，我担心会减慢速度。我需要 3 笔交易（在这之前有一点逻辑。）

我们谈论的大部分信息都是关于回滚的，但我不想回滚。我只想继续前进。我可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:41:12.693

不，您无法捕获异常并尝试继续。这是[关于休眠文档的异常处理的章节](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation-exceptions)所说的：

> 如果 Session 抛出异常，包括任何 SQLException，立即回滚数据库事务，调用 Session.close() 并丢弃 Session 实例。Session 的某些方法不会使会话保持一致状态。Hibernate 抛出的任何异常都不能被视为可恢复的。

# benchmarking - WCAT 请求限制

> ID：13650606
> 
> 赞同：2
> 
> 时间：2012-11-30T18:00:08.023
> 
> 标签：benchmarking, throttling, wcat

我在 Windows Server 2008 Std 上对 IIS 7 的 WCAT 6.4 进行初始测试/配置时遇到问题。我们对 WCAT 还很陌生，所以这可能是一个相当幼稚的问题。

我们正在测试一个预计不会有大量流量的 Web 应用程序，我正在尝试实现一个 WCAT 场景，在该场景中我们限制请求数量并逐渐增加吞吐量以对 Web 应用程序进行基准测试。给定的脚本每秒产生大约 500 个请求，我们正试图开始比这更小！

阅读 WCAT 文档，似乎在场景文件中包含“throttle”属性是实现此目的的正确方法，但每当我尝试这样做时，我都会收到“收到无效代码”消息。我正在使用 WCAT 附带的预制样本测试脚本的（非常微调的）版本，只要我不包含“节流”元素，它们似乎就可以正常工作。（命令行和下面的“home.ubr”脚本）

通过在命令行语法中包含“-throttlerps”参数，我已经能够对每秒请求进行一些限制，但在让场景文件选项工作时仍然存在问题。命令行语法：

```
<directory>\wcat.wsf -terminate -run -clients localhost -t samples\scripts\home.ubr -f samples\scripts\settings.ubr -s localhost -throttlerps 1 
```

和场景文件：

```
scenario
{
name    = "IIS Home Page";

warmup      = 10;
duration    = 20;
cooldown    = 10;
//throttle  = 10;  //HERE is what throws an error!

/////////////////////////////////////////////////////////////////
//
// All requests inherit the settings from the default request.
// Defaults are overridden if specified in the request itself.
//
/////////////////////////////////////////////////////////////////
default
{
    // send keep-alive header
    setheader
    {
        name    = "Connection";
        value   = "keep-alive";
    }

    // set the host header
    setheader
    {
        name    = "Host";
        value   = server();
    }

    // HTTP1.1 request
    version     = HTTP11;

    // keep the connection alive after the request
    close       = ka;
}

//
// This script is made for IIS7
//
transaction
{
    id = "Default Web Site Homepage";
    weight = 1;

    request
    {
        url         = "/";
        statuscode  = 200;
    }

    request
    {
        url         = "/welcome.png";
        statuscode  = 200;
    }

    //
    // specifically close the connection after both files are requested
    //
    close
    {
        method      = reset;
    }
}

 transaction
{
    id = "Default Web Site Homepage";
    weight = 1;

    request
    {
        url         = "/";
        statuscode  = 200;
    }

    request
    {
        url         = "/welcome.png";
        statuscode  = 200;
    }

    //
    // specifically close the connection after both files are requested
    //
    close
    {
        method      = reset;
    }
}
} 
```

到目前为止，从谷歌搜索来看，这似乎不是一个常见的问题......任何洞察力将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T06:58:26.313

好的，所以找到了答案：WCAT 的文档有一个错字，给定的文件属性被列为“throttle”，但正确的版本是使用“throttlerps”作为场景文件中的元素名称，而不仅仅是“throttle”（到镜像命令行语法）。也许其他人会偶然发现这个......

# ios - iOS Voice Over 转子通知？

> ID：13650609
> 
> 赞同：2
> 
> 时间：2012-11-30T18:00:10.950
> 
> 标签：ios, keyboard, notifications, voiceover, rotor

Voice Over 转子选项之一是**打字模式**。
当打字模式为**标准**时，您触摸一个键以听到该键的作用，您必须双击它才能实际使用它。
当打字模式是**触摸打字**时，键盘的行为几乎就像没有打开旁白一样。

有没有办法知道“打字模式”何时改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:30:49.737

我向 Apple 询问过这个问题，但无法知道转子选项何时发生变化。

# c# - 引发事件的模式

> ID：13650610
> 
> 赞同：2
> 
> 时间：2012-11-30T18:00:13.960
> 
> 标签：c#, event-handling

我有一个抽象类 A，它具有检查阈值所需的功能。当违反阈值时，我希望引发一个通知我的事件。我在 Qt 中做过很多次这样的事情，但我似乎无法弄清楚如何将它转移到 C#。这是我目前想到的结构。

```
namespace N
{
  abstract class A
  {
    public delegate void Notify();
    public event Notify Notifier;
    public abstract void CheckThreshold();
  }

  class B : A
  {
    public override void CheckThreshold()
    {
       Notifier();
    }
  }

  class N
  {
    public AlertMe()
    {
    }
    public static Main()
    {
      var b = new B();
      b.Notifier += new A.Notify(AlertMe);

      b.CheckThreshold();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:36:59.133

通常，您要遵循的表格是这样的：

```
public event EventHandler<SomeEventArgs> SomeEvent = (s, e) => { };

protected virtual void OnSomeEvent(SomeEventArgs e)
{
    SomeEvent(this, e);
} 
```

所以在你的情况下你可能想要：

```
abstract class A {

    public event EventHandler<EventArgs> ThresholdExceeded = (s, e) => { };

    protected virtual void OnThresholdExceeded(EventArgs e)
    {
        ThresholdExceeded(e);
    }

    public abstract void CheckThreshold();
}

class B : A {
    public override void CheckThreshold()
    {
        if (/* your condition */) OnThresholdExceeded(new EventArgs());
    }
} 
```

现在有几件事 - EventHandler 类型是一些很好的语法糖，用于制作特定类型的事件。右侧的 lambda 表达式将其初始化为默认处理程序，因此您不必在调用它之前检查它是否为 null。

EventArgs 是特定于事件的信息 - 您没有，但如果您这样做了，您将继承 EventArgs 并放入您的事件接收器需要的任何数据。

`public event SomeEventName`和对的模式`protected virtual void OnSomeEvent`由 Microsoft 为 .NET 中的事件规定。您不必*遵循*这一点，但这是 .NET 程序员想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:06:06.593

您可以在基类 A 中定义一个辅助方法

```
protected void FireNotification() 
{
    if (Notifier != null)
        Notifier();
} 
```

并从被覆盖的`CheckTreshold`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:22:44.570

这段代码有几个问题。

首先，您应该使用 EventHandler 内置委托来定义事件。其次，您不能在定义它的类之外引发事件（这就是为什么您不能使用后代的 Notify() 的原因）。第三，您可以使用[模板方法设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)并更清楚地定义基类与其后代之间的契约，并实现阈值检查的一部分。

最后我完全不明白为什么你需要继承层次结构？也许您可以在一个类中实现所有必需的逻辑？但无论如何，这里的代码可以正确编译和运行：

```
 abstract class A
  {
    // Avoid defining custom delegate at all because there is a lot of 
    // build-in events for every case, like EventHandler<T>, 
    // Func<T>, Action<T> etc
    // public delegate void Notify();
    public event EventHandler ThreasholdViolated;

    protected void OnThreasholdViolated()
    {
       var handler = ThreasholdViolated;
       if (handler != null)
         handler(this, EventArgs.Empty);
    }

    public abstract void CheckThreshold();
  }

  class B : A
  {
    public override void CheckThreshold()
    {
       OnThreasholdViolated();
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:30:55.553

通常的模式是在基类中提供一个受保护的虚拟方法，如[http://msdn.microsoft.com/en-us/library/vstudio/9aackb16(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/9aackb16(v=vs.100).aspx)所示。该方法的名称约定是 On[EventName] 并采用事件 args 实例。

还要遵循对委托使用 EventHandler 或 EventHandler 的约定，并提供事件发起者和相应的参数。[您可以在http://msdn.microsoft.com/en-us/library/vstudio/ms229011(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms229011(v=vs.100).aspx)中找到更多相关信息。请注意，来自 MSDN 的示例不遵循所有这些约定。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-30T18:09:10.620

```
public abstract class A
{
    public EventHandler<EventArgs> OnThresholdViolated;

    public abstract void CheckThreshold();
}

public class B : A
{
    public B(EventHandler<EventArgs> alertMe) {
        OnThresholdViolated += alertMe;
    }

    public override void CheckThreshold()
    {
        if (null != OnThresholdViolated)
        {
            OnThresholdViolated(this, EventArgs.Empty);
        }
    }
} 
```

然后使用：

```
 B b = new B(AlertMe);

        b.CheckThreshold(); 
```

# python - 如何使 tkinter 中的 destroy() 方法与我的代码一起使用？

> ID：13650617
> 
> 赞同：8
> 
> 时间：2012-11-30T18:00:35.447
> 
> 标签：python, tkinter, destroy

```
from tkinter import *

class GameBoard(Frame):
  def __init__(self):
    Frame.__init__(self)
    self.master.title("test")
    self.grid()
    #button frame
    self.__buttonPane = Frame(self)
    self.__buttonPane.grid()
    #buttons
    self.__buttonA1 = Button(self.__buttonPane,text = "A1",command = self._close)
    self.__buttonA1.grid()

  def _close(self):
    GameBoard().destroy()

def main():
  GameBoard().mainloop()

main() 
```

我将如何使我的功能接近工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T18:58:46.583

```
GameBoard() 
```

创建 的新实例`GameBoard`。所以：

```
GameBoard().destroy() 
```

创建一个**新**实例并调用`destroy()`它，这对现有实例没有影响。

您希望通过以下方式访问`_close()`方法中的当前实例`self`：

```
def _close(self):
    self.destroy() 
```

但是，这只会破坏框架（及其子窗口，如按钮），而不是顶级窗口（主窗口）。

要完全关闭 UI，您可以调用`self.master.destroy()`或简单地调用`self.quit()`：

```
def _close(self):
    self.quit() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-23T19:06:54.733

self.master.destroy() 将关闭父进程和子进程（例如，参见 IE）。self.destroy 将关闭子进程。我知道这是一篇旧帖子，但我认为这些信息可能仍然适用于某人。

IE

```
def _close(self):
    self.master.destroy() 
```

# python - 用于带有分割下划线编码的等宽字体

> ID：13650618
> 
> 赞同：3
> 
> 时间：2012-11-30T18:00:37.753
> 
> 标签：python, fonts, sublimetext2

是否有任何带有单独下划线的等宽字体，例如：

![在此处输入图像描述](../Images/cd306f2537425df5570d6a028f6d41eb.png)

支持西里尔字母吗？Consolas 的下划线不是单独的，Adobe Source Code Pro 目前不支持 Cyrillic 脚本。或者，也许我可以在 sublime text 2 中启用用于拉丁脚本的 Adob​​e Source Code Pro 和用于 Cyrillic 脚本的 Consolas？我需要它在 sublime text 2 中用 python 编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T09:28:02.763

试试[Monofur](http://www.dafont.com/monofur.font)。它有单独的下划线，并有西里尔字母符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T22:59:47.240

试试 Inconsolata - 它不仅是流行和快速增长的字体之一，它有你想要的而且它是免费的。如果您使用的是 Ubuntu，您甚至可以通过以下方式安装：

> sudo apt-get install fonts-inconsolata

享受！

# sublimetext2 - sublime text 2 : 搜索特定的短语、变量、常量

> ID：13650622
> 
> 赞同：3
> 
> 时间：2012-11-30T18:00:51.527
> 
> 标签：sublimetext2

我想在所有特定项目的文件中搜索特定的常量。我喜欢 goto any 的模糊匹配能力，但我认为您不能以这种方式搜索特定的短语。我也通读了[http://sublimetext.userecho.com/topic/21604-search-replace-across-projectsdirectories/](http://sublimetext.userecho.com/topic/21604-search-replace-across-projectsdirectories/)，尽管大多数评论已经接近一年了。有人可以建议我现在在项目的所有文件中进行搜索和替换的最佳方法吗？

提前致谢。

账单

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T19:18:56.423

相信跨项目的查找和替换已经实施。调出“在文件中查找”提示（`ctrl+shift+f`在 linux 和 windows 或`super+shift+f`OS X 中）。通过将该`Where`字段留空，它应该搜索所有项目文件夹，以及不在项目中的打开文件。您可以使用正则表达式替换、区分大小写等，就像在单个文件中进行正常查找和替换一样。

希望有帮助。

# python - 在不修改的情况下在 Jython 中导入 Python 模块

> ID：13650623
> 
> 赞同：5
> 
> 时间：2012-11-30T18:00:54.950
> 
> 标签：python, jython, jsr223

在有人开始咆哮之前：

## 我已经在许多论坛上经历了几个类似的问题，但他们并没有有效地回答我的问题。

现在问题来了：尽管 Java 一直是我的首选语言，但过去几周我转向 Jython 来满足我的大部分需求。我的问题实际上从一开始就分成了两部分，我渴望得到一个明确的答案。

A. 可以在 jython 中按原样导入 python 模块吗？我在不同的论坛上读过很多这样的问题，但从未见过明确的答复。我想知道 Python 和 Jython 是否存在一些可能不允许这样做的根本差异，以及 Python 模块是否可以在不进行任何修改的情况下导入 Jython 脚本中。

B. 如何在 Java 中使用 Jython 类？一个简单的网络搜索显示，曾经有一个传说中的实体叫做`jythonc`可以将 python 代码编译为 java 字节码，但后来它已经灭绝了。从 Java 访问 jython 代码的唯一其他方法是使用 JSR 223 进行脚本编写，通过使用`ScriptEngine`该类，这引发了以下问题：是否仍然可以使用我在 Jython from Java 中定义的类？

*   如果是，那我该怎么办？例如，如何在 Java 中扩展一个类（用 Jython 编写）？
*   如果不是，那么是否有一些项目（工作或开发中）支持这种功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:13:02.230

我将尝试回答一个问题。

广告。答：这取决于。如果模块是 Python 代码，那么它可以用作普通模块。我用这种方式使用了一些模块，例如[python-gnupg](https://code.google.com/p/python-gnupg/)。如果模块使用诸如库之类的 C 库来访问 PostgreSQL 数据库，那么 Jython 就不能使用它们（它们甚至不可能从源代码安装在没有 C 编译器和 PostgreSQL 库和头文件的只有 Python 的环境中）。但是对于 PostgreSQL，我可以使用 JDBC 驱动程序，所以对我来说没问题。

所以你必须检查你想使用的模块是否是普通的 Python。虽然大多数模块都有`setup.py`. 您可以下载这样的模块，将其解压缩到某个目录中，然后`jython setup.py install`像这样使用：

```
C:\python_libs\fpconst-0.7.2>jython setup.py install
running install
running build
running build_py
running install_lib
copying build\lib\fpconst.py -> C:\jython2.5.3\Lib\site-packages
byte-compiling C:\jython2.5.3\Lib\site-packages\fpconst.py to fpconst$py.class
running install_egg_info
Writing C:\jython2.5.3\Lib\site-packages\fpconst-0.7.2-py2.5.egg-info

C:\python_libs\fpconst-0.7.2>jython
Jython 2.5.3 (2.5:c56500f08d34+, Aug 13 2012, 14:48:36)
[Java HotSpot(TM) Client VM (Oracle Corporation)] on java1.7.0_09
Type "help", "copyright", "credits" or "license" for more information.
>>> import fpconst
>>> fpconst
<module 'fpconst' from 'fpconst$py.class'> 
```

对于不支持的模块，将显示一些错误：

```
C:\python_libs\pyodbc-2.0.58>jython setup.py install
running install
running build
running build_ext
building 'pyodbc' extension
error: Compiling extensions is not supported on Jython 
```

# c# - 将多个 dll 与 SWIG 一起使用到 C#

> ID：13650625
> 
> 赞同：2
> 
> 时间：2012-11-30T18:00:55.353
> 
> 标签：c#, c++, dll, swig

我有 2 个原生 c++ dll，比如 A 和 B。X 类位于 A.dll 中，Y 类位于 B.dll 中，其接口需要`shared_ptr<X>`. 我想在 C# 应用程序中使用此接口实例化 X 并将其交给 Y。

因为这两种类型存在于不同的 dll 中，所以我使用`swig -dllimport A -c++ -csharp A.i`, 和`swig -dllimport B -c++ -csharp B.i`. 在 Ai 中，我使用`%shared_ptr(X)`宏允许我在所有需要的接口中流畅地使用 X 类型的对象`shared_ptr<X>`（前提是这些接口在 A.dll 中）。

我的问题是，如果 B.dll 中的 Y 类`shared_ptr<X>`在它的接口中使用 a 怎么办？我怎样才能让 Bi 知道`shared_ptr<X>`（它存在于 A.dll 中）的第二次痛饮构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T20:34:33.360

您正在寻找的是[`%import`](http://www.swig.org/Doc2.0/Modules.html#Modules_nn1)SWIG。您可以按如下方式使用它，例如与模块 test1 一起使用：

```
%module test1

%include <std_shared_ptr.i>

%shared_ptr(Foo);

%inline %{
  struct Foo {};
  std::shared_ptr<Foo> foo() {
    return std::make_shared<Foo>();
  }
%} 
```

可以从另一个模块 test2 中引用它：

```
%module test2

%import "test1.i"

%inline %{
  void bar(std::shared_ptr<Foo>) {
  }
%} 
```

什么`%import`（简而言之）是读取接口，但*不*为其生成任何包装代码。也就是说它会知道它的内容，但不会因为它而直接将任何东西输出到包装器中。

# python - 在线程中执行代码

> ID：13650626
> 
> 赞同：1
> 
> 时间：2012-11-30T18:01:00.750
> 
> 标签：python, multithreading, ipc

我正在使用 subprocess 模块来启动一个子进程（java 程序）并连接到它的输出流（stdout）。我尝试在一个类中执行以下代码并且它成功运行，但是当我尝试在一个线程中执行它时发生了一些奇怪的事情，程序无法运行。

```
class MiThread(threading.Thread,QMainWindow, Ui_MainWindow):  
      def __init__(self):  
          threading.Thread.__init__(self)   

      def run(self):

        print "si se puede"
        try:
            from Queue import Queue, Empty
        except ImportError:
    #from queue import Queue, Empty  # python 3.x
            print "error"

        ON_POSIX = 'posix' in sys.builtin_module_names

        def enqueue_output(out, queue):
            for line in iter(out.readline, b''):
                queue.put(line)
            out.close()

        p= Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/',stdout=PIPE, shell=True, bufsize= 4024)
        q = Queue()
        t = threading.Thread(target=enqueue_output, args=(p.stdout, q))
        #t = Thread(target=enqueue_output, args=(p.stdout, q))
        print "estoy en el hilo"
        t.daemon = True # thread dies with the program
        t.start()

# ... do other things here
        while True:

            try: line = q.get_nowait()
         # or q.get(timeout=.1)
            except Empty:
                print('')
            else: # got line
    # ... do something with line
                print "No esta null"
                print line 
```

class Workspace(QMainWindow, Ui_MainWindow): """ 此类用于管理整个 GUI `Workspace'。目前 Workspace 类似于 MainWindow """

```
 def __init__(self):

         #Llamar al hilo secundario
        t= MiThread()
        t.start() 
```

我想在一个线程中执行它！请帮忙！

# associations - 将文件扩展名与应用程序关联失败，文件名长

> ID：13650627
> 
> 赞同：0
> 
> 时间：2012-11-30T18:01:01.433
> 
> 标签：associations, filenames, long-integer

我有一个名为：“测试结果”的项目。它生成一个可执行的“测试结果”。如果我尝试将我的 info.plist 文件设置为与通过邮件接收的文件相关联，则邮件程序无法识别它。这是我的 info.plist：

```
CFBundleDevelopmentRegion
en
CFBundleDisplayName
${PRODUCT_NAME}
CFBundleDocumentTypes

        CFBundleTypeIconFiles

            Sandbox-icon.png

        CFBundleTypeName
        dep
        CFBundleTypeRole
        Viewer
        LSHandlerRank
        Default
        LSItemContentTypes

            araferna.${EXECUTABLE_NAME}.dep

CFBundleExecutable
${EXECUTABLE_NAME}
CFBundleIdentifier
araferna.${PRODUCT_NAME:rfc1034identifier}
CFBundleInfoDictionaryVersion
6.0
CFBundleName
${PRODUCT_NAME}
CFBundlePackageType
APPL
CFBundleShortVersionString
1.0
CFBundleSignature
????
CFBundleVersion
1.0
LSRequiresIPhoneOS
<true/>
UIRequiredDeviceCapabilities

    armv7

UISupportedInterfaceOrientations

    UIInterfaceOrientationPortrait
    UIInterfaceOrientationLandscapeLeft
    UIInterfaceOrientationLandscapeRight

UTExportedTypeDeclarations

        UTTypeConformsTo

            public.data

        UTTypeDescription
        Testing Results Document
        UTTypeIdentifier
        araferna.${EXECUTABLE_NAME}.dep
        UTTypeTagSpecification

            public.filename-extension
            dep
            public.mime-type
            application/${EXECUTABLE_NAME} 
```

我有另一个具有相同内容和相同 info.list 的项目，只是我将其称为“测试”并且效果很好。我猜该关联不需要带有“”（空格）的长文件名。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:13:49.683

我的解决方案是为我的产品名称（生成我的可执行文件名称）创建一个短名称（没有空格或禁止的字符）。它现在工作正常。但我想保留我的长名更有意义！！！所以问题断言仍然开放......如果有任何解决方案，请告诉我。谢谢。

# ruby - 我的 Treetop 语法有什么问题？

> ID：13650629
> 
> 赞同：3
> 
> 时间：2012-11-30T18:01:08.127
> 
> 标签：ruby, parsing, grammar, treetop

我有语法文件`alexa_scrape.tt`：

```
grammar AlexaScrape
  rule document
    category_listing*
  end
  rule category_listing
    category_line url_line*
  end
  rule category_line
    category "\n"
  end
  rule category
    ("/" [^/]+)+
  end
  rule url_line
    [0-9]+ ". " url "\n"
  end
  rule url
    [^\n]*
  end
end 
```

我有一个 ruby​​ 文件，它试图利用它：

```
#!/usr/bin/env ruby -I .
require 'rubygems'
require 'polyglot'
require 'treetop'
require 'alexa_scrape.tt'

parser = AlexaScrapeParser.new
p( parser.parse("") || parser.failure_reason )
p( parser.parse("/x\n") || parser.failure_reason ) 
```

但我没有得到预期的结果：

```
SyntaxNode offset=0, ""
"Expected one of /, \n at line 2, column 1 (byte 4) after /x\n" 
```

它正确解析空字符串（作为 , zeros 的平凡匹配`document`）`category_listing`，但无法解析`"/x\n"`（因为文档包含一个`category_listing`本身具有 zeros`url_line`的单个）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:10:02.320

看起来正则表达式`category`正在通过匹配所需的空白前进`category_line`......这样做：

```
 rule category
    ("/" [^/\s]+)+    # or perhaps ("/" [^/\n]+)+
  end 
```

（哇，*一个 Treetop 问题。*这是 SO 历史上的第 47 个问题，总共有 400 万个问题。87,000 个 SO 问题中有一个被标记为*Treetop）*。

# java - websphere 7.0 创建消息引擎

> ID：13650630
> 
> 赞同：0
> 
> 时间：2012-11-30T18:01:11.780
> 
> 标签：java, websphere, messaging

在 WebSphere 7.0 中在 BUS 上创建消息引擎的过程是什么。我有一辆公共汽车，但没有创建消息的选项，我不知道如何创建它或让它自动生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T01:21:46.183

您需要进入`Service Integration > Buses > Bus Member`面板将您的服务器添加为新成员。这会将消息传递引擎与总线相关联。有一个向导可以帮助您逐步配置它。

之后，您将不得不创建队列和主题。然后，您可以连接到这些队列和主题以发送和接收消息。就我个人而言，我使用[HermesJMS](http://www.hermesjms.com/confluence/display/HJMS/Home)来测试我的 JMS 代理。

# python - cx_Oracle 中的用户输入变量？

> ID：13650632
> 
> 赞同：5
> 
> 时间：2012-11-30T18:01:22.357
> 
> 标签：python, oracle, cx-oracle

我正在使用 cx_Oracle 来访问我们的数据库。我希望用户能够输入站 ID，例如：

stationID=（用户在提示时输入的内容）

```
cursor.execute('''select cruise, station, stratum
          from union_fscs_svsta
          where station=stationID
          order by cruise''') 
```

因为语句需要是字符串，如何合并用户定义的变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T18:53:39.700

如何*不*这样做：

```
id = raw_input("Enter the Station ID")
query = "select foo from bar where station={station_id}"
cursor.execute(query.format(station_id=id)) 
```

如果有人输入了恶意的 sql 字符串，就会被执行。

不要使用 python 来格式化字符串，而是让数据库后端为您处理它。具体如何执行此操作取决于您使用的数据库。我认为（？）这对 Oracle 来说是正确的，但我无法对其进行测试。一些数据库使用不同的字符（例如`?`，而不是`%s`在 SQLite 的情况下）。

```
id = raw_input("Enter the Station ID")
query = "select foo from bar where station=%s"
cursor.execute(query, [id]) 
```

**编辑**：显然，`cx_Oracle`默认为“命名”参数样式（您可以通过查看来检查`cx_Oracle.paramstyle`。）。在这种情况下，你会做这样的事情：

```
query = "select foo from bar where station=:station_id"
cursor.execute(query, station_id=id) 
```

# c# - 调试器直接进入引用的类，而不是调用它的类

> ID：13650636
> 
> 赞同：0
> 
> 时间：2012-11-30T18:01:35.480
> 
> 标签：c#, visual-studio-2010

当我过去执行我的代码时，我曾经能够在我的 PC 类中单步执行以下代码行，它转到了我的 GetProgramControl 方法，在那里我可以多步执行。

```
controls[i] = (Control)_type.InvokeMember("GetProgramControl", BindingFlags.Default | BindingFlags.InvokeMethod, null, _objectInstance, _parameters); 
```

出于某种原因，我曾一度涉足该领域，但在找到我的 SN.cs 时遇到了麻烦，我点击链接进行浏览以显示它在哪里。从那以后，每次我进入上面的行，它都会直接进入我的 SN 类的后面引用，并且调试器在那里的一个方法中。有什么想法可以让调试器在 PC 类 GetProgramControl 方法中停止吗？我不能在那里设置断点，因为它在我的班级之外正在调用它。

我查看了以下内容，但它有所不同，因为我的 SN 类不是 PC 的孩子，它是其中使用的参考。 [http://bytes.com/topic/c-sharp/answers/439984-cant-step-into](http://bytes.com/topic/c-sharp/answers/439984-cant-step-into)

我也看到了这个，它可能很相似，但看起来没有人为他提供解决方案：http: [//www.codeproject.com/Messages/2932838/Can-t-step-into-method-debug-with -F11-in-Visual-St.aspx](http://www.codeproject.com/Messages/2932838/Can-t-step-into-method-debug-with-F11-in-Visual-St.aspx)

我的问题是，如何让调试器首先直接进入 PC.cs 而不是 PC.cs 正在调用的 SN.cs 方法？我不确定该信息存储在哪里，或者是否可以重置某些内容以使 Visual Studio 直接进入 PC.cs。

# algorithm - 抽象出算法循环：如何保持算法干燥（不要重复自己）？

> ID：13650639
> 
> 赞同：1
> 
> 时间：2012-11-30T18:01:39.460
> 
> 标签：algorithm, generics, dry, abstraction

我正在为（PO）MDP 编写一个工具箱，并且看到出现了一个不好的模式。尤其是在实施强化学习算法时，我倾向于重复自己。请参阅以下伪算法：

```
arguments: epsilon

v <- initial V values
c <- initial C values

while not good-enough
   delta <- 0.0
   if in-place
        v_old <- copy(v)
    else
        v_old <- reference to v
    for s in ss
        a = some_value(s,old_v)
        old_v <- v_old[s]
        v[s] = c*a*v_old[s]
        delta = max(delta,old_v-v[s])
    if delta < epsilon
        good-enough <- true

return v 
```

现在看看这个几乎相同的算法：

```
arguments: epsilon,gamma

v <- initial V values
c <- initial C values

while not good-enough
    delta <- 0.0
    if in-place
        v_old <- copy(v)
    else
        v_old <- reference to v
    for s in ss
        a,o = get_a_and_o(s)
        old_v <- v_old[s]
        v[s] = c*v_old[s]*exp(o-a)
        delta = max(delta,old_v-v[s])
    if delta < epsilon(/1-gamma)
        good-enough <- true

return v 
```

这些算法之间有一些简单的区别，但我重复了很多次。现在我的问题是：**你如何抽象出这两个示例算法之间的共同部分**（适用于实际算法）？

我看过一种方法（在 python 中），你给算法一个 pre、一个 post 和一个循环函数，它们分别在每次迭代之前、之后和为每个迭代调用，并传递一个算法状态字典来保存变量。但是这种方法似乎不是很好。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:00:27.627

显然，这两种算法有很多共同点：整体工作流程/步骤几乎相同，唯一的区别是步骤中​​发生的具体情况。这是功能方法大放异彩的地方：您希望替换特定功能/评估，同时保持整体结构完整。

无需详细说明，查看您的代码，您可以看到：

1.  他们使用相同的输入 V
2.  在每次迭代中，使用 V 和一些参数，生成 V 的更新值
3.  在每次迭代中，使用新旧 V 以及一些参数，评估一个条件 - 新 V 是否足够好，或者算法是否应该继续？

这是一个关于如何处理它以避免重复的草图：

您可以将 2\. 改写为“在每次迭代中，我们将对 V 的当前值应用一个函数，这将返回一个更新后的值 V'” - 显然，该函数具有签名`Updater: fun 't -> 't`（Updater 函数接受类型 t，并返回相同类型的输出）。

类似地，第 3 步可以表述为“在每一步，我们将对 (V, V') 对应用一个函数，它会告诉我们是或否这是否足够好” - 这个函数需要一个类似的签名`Finished: fun ('t * 't) -> bool`. （给定一个 't 类型的两个项目的元组，评估并给我一个真/假答案）。

您现在可以提取 Updater 和 Finished 函数的细节，并将它们作为参数传递给主算法（我们称之为循环搜索），如下所示：

```
let Search (Updater: fun 't -> 't) 
           (Finished: fun ('t * 't) -> bool) 
           currentV: 't =
    v' = v
    while not Finished (v, v')
        v' <- Updater v
    return v 
```

（上面的示例实际上并不完全正确，但传达了精神。您通常会将其写为函数式的递归，如下所示：

```
let rec Search (Updater: fun 't -> 't) 
               (Finished: fun ('t * 't) -> bool) 
               currentV: 't =
    if Finished (v, v') 
        then return v'
    else
        Search Updater Finished v' 
```

现在不必重写整个循环，您可以定义要应用于更新步骤和完成步骤的特定函数，并且您的代码重复消失了 - 整个循环/结构保持不变，您只需编写完全具体到手头的问题。

我在这里做了很多手，希望这会有所帮助。如果您有兴趣，我可以提供 F# 或 C# 中的代码示例，说明有关工作代码的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:09:14.613

面向对象的方法是创建一个基类，其中包含算法的公共部分，但不包含特定于应用程序的部分（即 pre、post 或 loop 函数）。相反，它只是调用了它自己没有实现的虚拟方法。

然后，当您想实例化一个实际用例时，您将创建该基类的子类，其中仅包含基类代码需要调用的虚拟方法的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:16:11.667

Use first-class functions: Encapsulate the different argument types in another class (an array, tuple, etc.) and pass a function called, perhaps, `calculateDeltaFunction` to your function and then call it, i.e.,

```
def oneDeltaWay(s, myAlgorithmArgs) : 
  ...first example...

def anotherDeltaWay(s, myAlgorithmArgs) : 
  ...second example...

def commonStructure(calculateDeltaFunction, functionSpecificArgs) :
  ... common code ...  
  for s in ss
    delta = calculateDeltaFunction(s, functionSpecificArgs)
    if delta < epsilon(/1-gamma)
       good-enough <- true
  ...etc...

commonStructure(oneDeltaWay, firstTypeOfArgs)
commonStructure(anotherDeltaWay, secondTypeOfArgs) 
```

# java - 将 Spring 3.1 与 RequestMappingHandlerAdapter 一起使用时出现默认构造函数错误

> ID：13650641
> 
> 赞同：1
> 
> 时间：2012-11-30T18:01:47.197
> 
> 标签：java, spring, spring-3, spring-annotations, spring-test

我有一个自定义参数解析器`SecurityRequestParametersArgumentResolver`，它与 Spring 3.0.7 一起使用，但在 Spring 3.1.2 中失败。堆栈跟踪和测试驱动程序代码如下所示。
当我查看堆栈跟踪时，似乎`SecurityRequestParametersArgumentResolver.resolve( )`没有被调用。相反，我`HandlerMethodArgumentResolverComposite.resolve`在堆栈跟踪中看到。

建议？

我已经更新了要使用的 java 代码`HandlerMethodArgumentResolver`（它`AnnotationMethodHandlerAdapter`来自 3.0.7），但是在进行运行时集成测试时会出现此堆栈跟踪：

```
 Caused by: java.lang.NoSuchMethodException: xyz.security.web.SecurityRequestParameters.<init>()
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.getDeclaredConstructor(Unknown Source)
    at org.springframework.beans.BeanUtils.BeanUtils.BeanUtils.instantiateClass(Class<T>) line: 104     
                 ServletModelAttributeMethodProcessor(ModelAttributeMethodProcessor).createAttribute(String, MethodParameter, WebDataBinderFactory, NativeWebRequest) line: 132          
                 ServletModelAttributeMethodProcessor.createAttribute(String, MethodParameter, WebDataBinderFactory, NativeWebRequest) line: 81       
                ServletModelAttributeMethodProcessor(ModelAttributeMethodProcessor).resolveArgument(MethodParameter, ModelAndViewContainer, NativeWebRequest, WebDataBinderFactory) line: 103             
                HandlerMethodArgumentResolverComposite.resolveArgument(MethodParameter, ModelAndViewContainer, NativeWebRequest, WebDataBinderFactory) line: 75     
                ServletInvocableHandlerMethod(InvocableHandlerMethod).getMethodArgumentValues(NativeWebRequest, ModelAndViewContainer, Object...) line: 156     
                ServletInvocableHandlerMethod(InvocableHandlerMethod).invokeForRequest(NativeWebRequest, ModelAndViewContainer, Object...) line: 117     
                ServletInvocableHandlerMethod.invokeAndHandle(NativeWebRequest, ModelAndViewContainer, Object...) line: 96           
                RequestMappingHandlerAdapter.invokeHandlerMethod(HttpServletRequest, HttpServletResponse, HandlerMethod) line: 617            
                RequestMappingHandlerAdapter.handleInternal(HttpServletRequest, HttpServletResponse, HandlerMethod) line: 578         
                RequestMappingHandlerAdapter(AbstractHandlerMethodAdapter).handle(HttpServletRequest, HttpServletResponse, Object) line: 80    
                SecuritySystemTestStartUp$1(DispatcherServlet).doDispatch(HttpServletRequest, HttpServletResponse) line: 923                
                SecuritySystemTestStartUp$1(DispatcherServlet).doService(HttpServletRequest, HttpServletResponse) line: 852                
                SecuritySystemTestStartUp$1(FrameworkServlet).processRequest(HttpServletRequest, HttpServletResponse) line: 882               
                SecuritySystemTestStartUp$1(FrameworkServlet).doPost(HttpServletRequest, HttpServletResponse) line: 789                
                SecuritySystemTestStartUp$1(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 637              
                SecuritySystemTestStartUp$1(HttpServlet).service(ServletRequest, ServletResponse) line: 717                
                SecurityExternalAPISystemTest.testEncrypt() line: 86     
                 NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]        
                 NativeMethodAccessorImpl.invoke(Object, Object[]) line: not available               
                 DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: not available       
                 Method.invoke(Object, Object...) line: not available       
                 FrameworkMethod$1.runReflectiveCall() line: 44             
                 FrameworkMethod$1(ReflectiveCallable).run() line: 15 
                 FrameworkMethod.invokeExplosively(Object, Object...) line: 41              
                 InvokeMethod.evaluate() line: 20            
                 RunBeforeTestMethodCallbacks.evaluate() line: 74         
                 RunAfterTestMethodCallbacks.evaluate() line: 83            
                 SpringRepeat.evaluate() line: 72               
                 SecuritySpringJUnitRunner(SpringJUnit4ClassRunner).runChild(FrameworkMethod, RunNotifier) line: 231           
                 SecuritySpringJUnitRunner(BlockJUnit4ClassRunner).runChild(Object, RunNotifier) line: 49         
                 ParentRunner$3.run() line: 193 
                 ParentRunner$1.schedule(Runnable) line: 52     
                 SecuritySpringJUnitRunner(ParentRunner<T>).runChildren(RunNotifier) line: 191            
                 ParentRunner<T>.access$000(ParentRunner, RunNotifier) line: 42           
                 ParentRunner$2.evaluate() line: 184       
                 RunBefores.evaluate() line: 28  
                 RunBeforeTestClassCallbacks.evaluate() line: 61               
                 RunAfterTestClassCallbacks.evaluate() line: 71   
                 SecuritySpringJUnitRunner(ParentRunner<T>).run(RunNotifier) line: 236             
                 SecuritySpringJUnitRunner(SpringJUnit4ClassRunner).run(RunNotifier) line: 174               
                 JUnit4TestClassReference(JUnit4TestReference).run(TestExecution) line: 50      
                 TestExecution.run(ITestReference[]) line: 38      
                 RemoteTestRunner.runTests(String[], String, TestExecution) line: 467    
                 RemoteTestRunner.runTests(TestExecution) line: 683   
                 RemoteTestRunner.run() line: 390           
                 RemoteTestRunner.main(String[]) line: 197 
```

SecuritySystemTestStartUp 中的测试驱动程序代码使用@ContextConfiguration 进行注释：

```
 @RunWith(SecuritySpringJUnitRunner.class)
 @ContextConfiguration(loader = MockServletContextWebContextLoader.class,
         locations = { "classpath:/spring-system-test.xml" })
 public abstract class SecuritySystemTestStartUp
 {
     private static DispatcherServlet dispatcherServlet;

     ...     
     public static DispatcherServlet getDispatcherServlet()
     {
         try
         {
             if (dispatcherServlet == null)
             {
                 final GenericWebApplicationContext context = new GenericWebApplicationContext();

                 context.setParent(MockServletContextWebContextLoader.getInstance());
                 context.refresh();

                 dispatcherServlet = new DispatcherServlet(context);
                 dispatcherServlet.init(new MockServletConfig());
             }
         }
         catch (final Exception ex)
         ...
         return dispatcherServlet;
     }
 } 
```

参数解析器（与 Spring 3.0.7 兼容）用于 postProcessAfterInitialization。参数解析器的代码摘录如下所示。

> 公共类 AnnotationMethodHandlerBeanPostProcessor 扩展 InstantiationAwareBeanPostProcessorAdapter {
> 
> ```
> @Autowired
> public AnnotationMethodHandlerBeanPostProcessor(final SecurityRequestParametersArgumentResolver resolver)
> {
>     super();
>     _resolver = resolver;
> }
> 
> @Override
> public Object postProcessAfterInitialization(final Object bean, final String beanName)
> {
>      if (bean instanceof RequestMappingHandlerAdapter)
>     {
>         final RequestMappingHandlerAdapter adapter = (RequestMappingHandlerAdapter) bean;
>         final List<HttpMessageConverter<?>> converters =
>             adapter.getMessageConverters();
> 
>         converters.add(new BinaryMessageConverter());
>         List<HandlerMethodArgumentResolver> customArgumentResolvers = new ArrayList<HandlerMethodArgumentResolver>();
>         customArgumentResolvers.add(_resolver);
> 
>         adapter.setCustomArgumentResolvers(customArgumentResolvers);
>         adapter.setMessageConverters(adapter.getMessageConverters());
>     }
> 
>     return super.postProcessAfterInitialization(bean, beanName);
> }
> 
> ... 
> ```
> 
> }

并在 Spring Configuration 中指定为 ...

> ```
> <bean id="SecurityRequestParametersArgumentResolver"
>     class="xyz.security.web.SecurityRequestParametersArgumentResolver">
>     <constructor-arg ref="CredentialsManager" />
>     <constructor-arg ref="TokenService" />
> </bean>
> 
> <!-- A bean post-processor that registers the SecurityRequestParametersArgumentResolver. -->
> <bean class="xyz.security.web.AnnotationMethodHandlerBeanPostProcessor">
>     <constructor-arg index="0" ref="SecurityRequestParametersArgumentResolver" />
> </bean> 
> ```

参数解析器的流程如下：

> @Component public class SecurityRequestParametersArgumentResolver implements HandlerMethodArgumentResolver { @Autowired // 隐式自动装配（不在 xml 中） private RequestMappingHandlerAdapter requestMappingHandlerAdapter;
> 
> ```
> private final CredentialsManager _credentialsManager;
> private final TokenService _tokenService;
> 
> private RequestResponseBodyMethodProcessor requestResponseBodyMethodProcessor = null;
> 
> /* For the component scan... */
> SecurityRequestParametersArgumentResolver()
> {
>     this(null, null);
> }
> 
> public SecurityRequestParametersArgumentResolver(final CredentialsManager credentialsManager,
>         final TokenService tokenService)
> {
>     super();
>     _credentialsManager = credentialsManager;
>     _tokenService = tokenService;
> }
> 
> public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,
>         NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception
> {
> 
>     if (parameter != null && SecurityRequestParameters.class.equals(parameter.getParameterType()))
>     {
>         String productName = webRequest.getHeader(HttpHeader.PRODUCT_CONTAINER_HEADER.value());
> 
>         ...
> 
>         return new SecurityRequestParameters(credentials, contentType, acceptType, dataEncoding,
>                 sessionIdentifier, remoteIpAddress, securityProductName);
>     }
>     return new Object();
> }
> 
> public boolean supportsParameter(MethodParameter parameter)
> {
>     return getRequestResponseBodyMethodProcessor().supportsParameter(parameter);
> }
> 
> private RequestResponseBodyMethodProcessor getRequestResponseBodyMethodProcessor()
> {
>     if (requestResponseBodyMethodProcessor == null)
>     {
>         List<HttpMessageConverter<?>> messageConverters =
>                 requestMappingHandlerAdapter.getMessageConverters();
>         requestResponseBodyMethodProcessor = new RequestResponseBodyMethodProcessor(messageConverters);
>     }
>     return requestResponseBodyMethodProcessor;
> } 
> ```
> 
> }

最后......这是Spring配置中的注释驱动标签

```
 <mvc:annotation-driven>
    <mvc:argument-resolvers>
      <bean class="com.trgr.cobalt.security.web.SecurityRequestParametersArgumentResolver" />
    </mvc:argument-resolvers>
 </mvc:annotation-driven> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:50:27.200

鉴于您的评论，我认为您将不得不将您的更改`supportsParameter`为以下内容：

```
public boolean supportsParameter(MethodParameter parameter)
{
    return parameter.getParameterAnnotation(ParamResolver.class)!=null
} 
```

# java - 增加音池持续时间

> ID：13650642
> 
> 赞同：1
> 
> 时间：2012-11-30T18:01:49.733
> 
> 标签：java, android, soundpool

所以我的声音大概是 6.5 秒长，当我用 soundpool 播放它时，它只播放 5 秒……我尝试使用媒体播放器，但对于这种应用程序来说太慢了。声池代码：

```
 SoundPool sp;
    OnCreate
    sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
dub1s = sp.load(this, R.raw.dub1, 1);
Button
    if (dub1s != 0)
            sp.play(dub1s, 1, 1, 0, 0, 1);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:14:28.413

尝试使用以下加载函数。

```
public int load (FileDescriptor fd, long offset, long length, int priority) 
```

第三个参数是声音的长度。说，你正在阅读一个文件

```
FileInputStream in = new FileInputStream(new File(soundFile)); 
```

load() 应该看起来像

```
sp.load(in.getFD(), start, length, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-09T22:26:16.703

Better late than never, so for future reference, [Soundpool](https://developer.android.com/reference/android/media/SoundPool) has 1Mb buffer size limit per track. But this limit applies not to file size but to decompressed raw PCM data.

SoundPool is going to decompress the loaded audio to PCM data so it is ready to play instantly without the latency of decoding. If the audio you are loading is compressed heavily, such as MP3, then that can get blown up quite a bit.

You can use Soundpool for sounds longer than 5 seconds (I have played sounds around 30 seconds). But you might need to modify your files. You can try to convert your sound file to ogg, it seems to give better results with Soundpool.

Also, make these changes:

*   Change your sound file's sampling rate to 16000 Hz
*   Change your audio channel to mono, instead of stereo.
*   Make sure your file after these processes is smaller than 1 mb in size.

For these changes you can use an online converter such as this [one](http://audio.online-convert.com/convert-to-ogg).

# java - 在 JLabel 扩展类中找不到符号

> ID：13650645
> 
> 赞同：0
> 
> 时间：2012-11-30T18:02:02.147
> 
> 标签：java, swing, jlabel, actionlistener

这无效吗？

```
public class LayerItem extends JLabel{
    public LayerItem(){
        this.addActionListener(new java.awt.event.ActionListener(){
            @Override
            public void actionPerformed(java.awt.event.ActionEvent evt){

            }
        });
    }
} 
```

我在第 3 行收到一条错误消息：`cannot find symbol: method addActionListener(<anonymous ActionListener>)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:03:12.863

该方法`addActionListener`不适用于`JLabel`组件。

# javascript - 读取 javascript 对象属性

> ID：13650649
> 
> 赞同：-4
> 
> 时间：2012-11-30T18:02:28.733
> 
> 标签：javascript, jquery

假设我有一个这种形式的 JavaScript 对象：

```
var myJsObject = 
{
    A.b: 1
    A.c: 2
} 
```

我如何获得 let's say 的价值`A.c`？

我试过：

```
var value = myJsObject['A.c'] 
```

但这给了我错误`Uncaught TypeError: Cannot set property 'A.c' of undefined`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:04:37.000

您不需要“对象”关键字，应该引用属性。这在我的控制台中有效：

```
var myJsObject = { 'A.b': 1, 'A.c': 2 };
var value = myJsObject['A.c'];
console.log(value); // 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:08:52.583

你不能链接点符号。这应该有效：

```
var myJsObject = {
    A: {
      b: 1,
      c: 2
    }
} 
```

或者，如果您想拥有类似的属性名称`A.b`，则需要将其引用，如果名称包含特殊字符：

```
var myJsObject = 
{
    'A b': 1,
    'A.c': 2
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:10:38.170

编码

```
var myJsObject = 
{
    A.b: 1
} 
```

产生语法错误，因为必须引用句点，因为它们在语言中具有特殊含义。JavaScript 解释器读取`A.b`为尝试`b`从`A`对象获取属性，但它需要一个标识符名称，而不是一个操作。考虑一个类似的例子：

```
var myJsObject = 
{
    foo-bar: 1
} 
```

在这里，连字符被读取为减法运算符，并且还会产生语法错误。

相反，请使用带引号的属性名称：

```
var myJsObject = 
{
    "A.b": 1,
    "A.c": 2
} 
```

`"A.b": 1`（此外，您的代码在我添加的行之后也缺少逗号。）

# c# - 从文本文件中删除选定的索引

> ID：13650650
> 
> 赞同：0
> 
> 时间：2012-11-30T18:02:39.473
> 
> 标签：c#, selecteditem, selectedindexchanged

我有一个显示文本文件行的列表框。我怎样才能做到这一点，以便我可以单击列表框中的项目并将其从列表框和文本文件中删除

```
 private void Read()
    {
        string filePath = @"//Filepath";

        List<String> listOfDels = viewlist.listDeliveries();

        using (var streamReader = new StreamReader(filePath, Encoding.Default))
        {
            while (!streamReader.EndOfStream)
            {
                listOfDels.Add(streamReader.ReadLine());
                listBox1.Items.Clear();

                listBox1.Items.AddRange(listOfDels.ToArray());
            }
        }
    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    { //Remove line from txt file
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:05:14.270

```
string tempFile = Path.GetTempFileName();

using(var sr = new StreamReader("file.txt"))
{
using(var sw = new StreamWriter(tempFile))
{
    string line;

    while((line = sr.ReadLine()) != null)
    {
         if(line != "removeme")
             sw.WriteLine(line);
    }
}
}

File.Delete("file.txt");
File.Move(tempFile, "file.txt"); 
```

# git - 如何在 Git-Log-View 模式下获取缓冲区的提交元数据？

> ID：13650651
> 
> 赞同：0
> 
> 时间：2012-11-30T18:02:40.633
> 
> 标签：git, emacs, elisp

在 vc.el 的 Git-Log-View 模式下查看 git 日志时，我想编写一组 elisp 函数来操作由当前选定区域标识的提交。这些函数的一个公共子组件需要一个函数，该函数将获取 Git-Log-View 缓冲区中区域选择的提交列表的提交元数据，但我不知道如何编写这样的例程。我希望 vc.el 直接提供这样的机制，但从我可以通过 apropos 看到的情况来看，它没有。

我已经在 vc.el 和 vc-git.el 中四处寻找，试图了解 vc.el 的工作原理，但它是一个相当复杂的 elisp，我绝不是 elisp 专家。尽管 vc.el/vc-git.el 在某处有可用的提交元数据对我来说似乎是合理的，因为在 Git-Log-View 模式下，您可以执行诸如选择一个区域并请求该区域的变更集差异之类的操作，或者展开给定的提交以查看详细的提交信息，我只想构建一些类似的功能。

关于如何做到这一点的任何想法？我想我可以直接获取当前选择的文本并自己解析缩写的日志格式，但是如果 vc-mode 可以帮助我，这似乎是我想避免的大量工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:19:41.673

`vc-git`和其他后端并没有真正将大部分元数据保存在任何地方。对于大多数操作，后端调用相应的命令来获取所需的数据。

例如，`Git-Log-View`是 的美化输出`git log [-- filename]`。您在扩展提交时看到的摘要已经存在于命令输出中，只是被隐藏了，因此用户更容易扫描。为了显示区域上的变更集，`log-view-diff-changeset`查看哪些提交对应于区域边界，并委托给`vc-diff-internal`最终调用`git diff FROM TO`.

因此，您将获取该区域中每个提交的哈希值，然后调用一些 git 命令 ( `git show`?)`vc-git-command`或`vc-git--call`调用`vc-git--run-command-string`它们中的每一个并解析结果。`git log`如果您设法使其包含所有相关数据，也许只需一次调用所有这些数据。

# c# - 枚举 AppFabric 缓存会引发 NullReferenceException

> ID：13650654
> 
> 赞同：1
> 
> 时间：2012-11-30T18:02:46.877
> 
> 标签：c#, appfabric-cache

我们使用的是 Windows Server AppFabric 1.1（而不是 Azure），我认为我们已经设法污染了缓存，因此我们得到了一些奇怪的结果。

我们使用的是通读提供程序，因此如果密钥不在缓存中，则通读提供程序会转到数据库，填充缓存并将值返回给客户端。（顺便说一句，微软的团队决定要求通读提供程序应该存在于 GAC 中——这造成了无穷无尽的痛苦，所以我建议不要使用通读。我希望他们重新考虑这个选择。）

我的问题的症状是，当我尝试从缓存中获取项目时，当我希望通读提供程序从数据库中获取值时，它返回 null。重复调用返回 null 排除了数据库的任何暂时性问题。如果我从缓存中删除该项目并尝试再次获取它，它会成功。

为了尝试了解问题的严重程度，我想我会像这样枚举缓存中的所有项目：

```
foreach (string regionName in cache.GetSystemRegions())
{
    var objectsInRegion = cache.GetObjectsInRegion(regionName);

    try
    {
        foreach (var keyValuePair in objectsInRegion)
        {
            var result = string.Format(
                "Key: {0}. Value: {1}", keyValuePair.Key, keyValuePair.Value);
            Console.WriteLine(result);
        }
    }
    catch (NullReferenceException)
    {
        Console.WriteLine("Unable to get key value pair");
    }
} 
```

存在异常处理是因为在枚举特定区域的 objectsInRegion 时缓存始终抛出空引用异常。

从例外：

> Microsoft.ApplicationServer.Caching.Core
> 
> 在 Microsoft.ApplicationServer.Caching.ChunkStream..ctor(Byte[][] buffers, Boolean writable) 在 Microsoft.ApplicationServer.Caching.Utility 的 Microsoft.ApplicationServer.Caching.ChunkStream..ctor(Byte[][] buffers)。在 Microsoft.ApplicationServer.Caching.CacheEnumerator.MoveNext() 处反序列化(Byte[][] 缓冲区，布尔 checkTypeToLoad)\r\n

我怀疑我们的通读提供程序在错误情况下做错了，但我还没有证明这一点。但是，我不希望 AppFabric 像这样从它的核心抛出空引用异常。

这是一个已知问题吗？有没有人有任何进一步的信息可能会有所帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:43:26.753

完成一些测试后，AppFabric Cache 可以优雅地处理我们的通读提供程序抛出的异常。似乎更有可能是缓存因其中一台缓存服务器的故障而损坏。我们计划使用上面的代码来监控缓存。

可以更改上面的代码，通过清除发生空引用异常的区域来删除任何问题区域：

```
catch (NullReferenceException)
{
    Console.WriteLine("Unable to get key value pair. Clearing region: {0}", regionName);
    cache.ClearRegion(regionName);
} 
```

然后，通读提供程序可以再次填充缓存。

# javascript - 查找对象的值

> ID：13650656
> 
> 赞同：2
> 
> 时间：2012-11-30T18:03:02.677
> 
> 标签：javascript, jquery

**JavaScript**或**JQuery**中是否有任何**非基于循环的**方法可以检查对象属性中是否存在某些 VALUE。我的意思是如果我有

 ****```
obj = { prop1:val, prop2:val2 } 
```

是否有可能通过一个语句检查**val2**是否存在于**obj**的值中？

**更新1：**这里的循环不是关键！如果它包含在一些**JQuery**预定义函数中，我可以使用循环！

**更新 2：** 我认为编写手工函数并不那么优雅。我想为这种常见和常见的问题找到一些基于库的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:08:45.830

不，如果没有循环，您无法在一个语句中找到对象中是否存在值。

您可以使用本机 API 或库.. 但它们将在内部循环所有值。

任何其他方法的代价都将与迭代对象相同。所以我会编写一个简单的`for`循环来完成它。

我只需在我的脚本文件中编写这 4 行代码并包含该脚本文件而不是包含一个库.. 这将是相同的。[http://jsfiddle.net/sQW4P/2/](http://jsfiddle.net/sQW4P/2/) <-- 如果你需要这样的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:18:21.880

这适用于 jQuery：

```
$.grep($.map(obj, function(v,k){return v}), function(el){return el == val2}) 
```

你可以像这样包装它：

```
function hasVal(o, v) {
  $.grep($.map(o, function(v,k){return v}), function(el){return el == v}).length > 0
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T18:20:50.650

如果你可以使用外部库，[Underscore.js](http://underscorejs.org/)相当简洁：

```
_.contains(_.values(obj), "val2");
// true 
```

* * *

这是 Underscore 的[values](http://underscorejs.org/#values)方法：

> 返回对象属性的所有值。

这是[源代码](http://underscorejs.org/underscore.js)中的实现：

```
// Retrieve the values of an object's properties.
  _.values = function(obj) {
    var values = [];
    for (var key in obj) if (_.has(obj, key)) values.push(obj[key]);
    return values;
  }; 
```

如您所见，它只是遍历对象中的键，并将它们推送到数组中。所以，不，没有迭代就不可能做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:11:54.397

我能想到的唯一方法是 JSON：

```
new RegExp(':\"'+val+'\"').test(JSON.stringify(obj)) 
```

演示：http: [//jsfiddle.net/J4TDS/](http://jsfiddle.net/J4TDS/)

如果您可以使用函数，则无需查看库，只需几个字节：

```
function find(o, v) {
    for(var i in o) {
        if (o[i] === v) return true;
    }
}

find(obj, val2); 
```****

# c# - WPF Datagrid 水平滚动仅包含标题数据

> ID：13650658
> 
> 赞同：4
> 
> 时间：2012-11-30T18:03:11.057
> 
> 标签：c#, wpf, datagrid

我有一个`WPF` `Datagrid`，在初始阶段我将分配 100 个列标题`Datagrid`，但我无法水平滚动它来查看所有列标题。

`DataGrid`没有任何行，`ItemSource`为空。当我只有列标题（没有行）时，如何实现水平滚动。

我绑定`ItemSource`到一个只有列标题而没有行的 DataTable。

在这种情况下如何滚动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-28T08:58:07.627

这是解决此问题的一种解决方法，对我有用：只需将`DataGrid`a 放入 a`ScrollViewer`并制作 a`DataTrigger`以将 the 设置为`HorizontalScrollBarVisibility`if没有项目。`ScrollViewer``Visible``DataGrid`

```
<ScrollViewer VerticalScrollBarVisibility="Disabled">
    <ScrollViewer.Style>
        <Style TargetType="ScrollViewer">
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=dataGrid, Path=HasItems}" Value="False">
                    <Setter Property="HorizontalScrollBarVisibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ScrollViewer.Style>
    <DataGrid Name="dataGrid"/>
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:17:43.170

不幸的是，DataGrid 默认样式是不可能的，您必须覆盖模板并创建派生到主网格的自定义网格。[在这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/64b18ca9-f9f5-4748-86a8-c5b40815fd9b)您可以找到更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T08:25:37.170

正如 ArsenMkrt 所说，这是不可能的。但是，我认为您可以添加一行，`DataTable`但之后，您可以将其对应`DatagridRow`的可见性设置为隐藏。

当您`DataTable`使用实际数据填充时，只需清除 DataTable.Rows。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-30T18:24:26.963

你没有。你必须有一排。

将您的 ItemsSource 更改为不默认为 null。

如果允许添加行，则可以默认为空列表。

如果您不允许添加行，则需要默认为一个项目的列表。

```
List<object> olist = new List<object>();
olist.add(new object()); 
```

# c# - TextReader.Peek 行为和检测流/阅读器的结束

> ID：13650668
> 
> 赞同：8
> 
> 时间：2012-11-30T18:04:06.887
> 
> 标签：c#, .net, textreader

当我使用文本阅读器时，检测我实际上处于数据末尾的最佳方法是什么？执行此操作的通常方法*如下所示*，

```
 while(reader.Peek() != -1)
    {
       ///do stuff
    } 
```

[但是这里](http://msdn.microsoft.com/en-us/library/system.io.textreader.peek.aspx)的 msdn 文档说明了以下内容

> 表示要读取的下一个字符的整数，如果没有更多字符可用或读取器不支持查找，则为 -1。

所以我的问题是你如何判断你是否真的处于读者数据的末尾，或者读者/基础流根本不支持搜索，因为这里的返回值似乎是模棱两可的？如果例如我有以下

```
 public void Parse(TextReader reader)
    {
         while(reader.Peek() != -1) //am I really at the end
         {
            //do stuff
         }
    }

    Parse(new StreamReader(new NetworkStream(....))); 
```

因为 networkstream 不支持搜索。

还是我错过了什么？

**编辑：**

澄清一下，我可以使用更具体的 StreamReader 类轻松实现这一点，因为我可以检查 EoS。然而，为了让事情更笼统，我想使用 TextReader，所以我不仅仅局限于 StreamReader。但是 Peek 的语义似乎有点奇怪，如果不支持搜索，为什么它不直接抛出，为此为什么没有 TextReader 的 EoF 属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:12:30.423

除非您正在使用 Peek() 寻找特定值，否则为什么不使用 .Read()

例如

```
string line;
System.IO.StreamReader file = new System.IO.StreamReader(strfn);
while((line = file.ReadLine()) != null)
{
  this.richTextBox1.AppendText(line+"\n");//you can replace this line to fit your UseCase
} 
```

如果你想要一个更简洁的例子来说明如何做到这一点，你可以做一些我在它下面发布的可读的事情，你可以插入你自己的文本文件值并调试它以查看它是否可以工作。读写

```
string tempFile = Path.GetTempFileName();
using(var sr = new StreamReader("file.txt"))
{
  using(var sw = new StreamWriter(tempFile))
  {
    string line;
    while((line = sr.ReadLine()) != null)
    {
         if(line != "BlaBlaBla")
             sw.WriteLine(line);
    }
  }
} 
```

这是您可以尝试的另一种选择

从 a`Stream`中，如果你`Read(buffer, offset, count)`得到一个非阳性结果，如果你`Peek()`得到一个否定结果。

使用 a `BinaryReader`，[文档](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.peekchar.aspx)建议`PeekChar()`应该返回负数：

> ### 返回值
> 
> 类型：System.Int32 下一个可用字符，如果没有更多可用字符或流不支持查找，则为 -1。

你确定这不是一个*损坏*的流吗？即剩余的数据不能`char`从给定的编码中形成一个完整的？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T18:06:42.287

它应该是 reader.Read() == -1 不再存在，否则字符存在。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-01T09:02:05.900

这实际上取决于您在解析中所做的事情。

我通常只是`Read`，看看读了多少。我建议*不要*一次读一个字符：

```
char[] buffer = new char[1024 * 16];
int charsRead;
while ((charsRead = read.Read(buffer, 0, buffer.Length)) > 0)
{
    // Process buffer, only as far as charsRead
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T18:11:46.487

如果您只需要读取和处理所有数据直到流结束，那么您应该[`Read`](http://msdn.microsoft.com/en-us/library/0w3csw16.aspx)直接使用，如果没有更多字符可用，则返回 -1。

```
int nextByte;
while ((nextByte = reader.ReadByte()) != -1)
    // Process nextByte here. 
```

**编辑**：专门检查读者是否支持搜索的另一种方法是检查底层流：

```
bool canSeek = reader.BaseStream.CanSeek; 
```

如果返回`true`，`Peek`则只应在到达流末尾时返回 -1。

# .net - TEXT 的 SQL Server DataType 不维护格式

> ID：13650672
> 
> 赞同：0
> 
> 时间：2012-11-30T18:04:31.120
> 
> 标签：.net, sql-server, text, string-formatting, types

我必须在 SQL Server 2005 中使用数据类型为 TEXT 的列来存储我需要使用换行符和制表符格式化的字符串。

在调用存储过程之前，我添加了一个断点来查看我在 VS2010 的文本可视化器中发送的文本，并且所有格式都是我想要的，但是当我进入数据库中的单元格时，和复制出数据，格式丢失。据我所见，每次字符串中出现换行符或制表符时，文本数据类型都会用空格替换它。对于换行符，我使用 vbNewline，对于制表符，我使用 vbTab 或 Xml.Formatting.Indented

值得注意的是，我不能更改列的数据类型，因为它只是一个我必须用于特定目的的表。

关于使用文本数据类型在数据库中正确格式化此格式的任何建议？

例子：

表示表的 SQL 表脚本：

```
CREATE TABLE [dbo].[FooLog](
    [FooID] [int] IDENTITY(1,1) NOT NULL,
    [FooInfo] [text] NULL ) 
```

字符串生成器代码：

```
Dim sb As New StringBuilder()

sb.AppendFormat("{0}{1}", "Some text", vbNewLine)
sb.AppendLine("Some foo bar data")
sb.AppendLine(String.Format("{0}data{1}{0}some more data", vbTab, vbNewLine))

Dim stringToStoreInFooInfo As String = sb.ToString() 
```

存储在数据库中：

```
db.AddInParameter(cmd, "FooInfo", SqlDbType.Text, stringToStoreInFooInfo) 
```

我现在没有用代码读回它...我用 Ctrl-C 将它复制到单元格中或右键单击“复制”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:19:44.187

它确实保留了格式，您通过复制出 SSMS 单元格会丢失格式。

一旦你有代码拉出文本，你应该仍然有适当的格式。

例如，如果您在 SSMS 中运行以下命令，您将丢失换行符。我认为它会为其他空白字符切换空格。

```
Select
'
This
    is
some fomatted
text
' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-14T03:42:51.580

您可以启用“在复制或保存时保留 CR/FL”选项。

工具--> 选项--> 查询结果--> SQL Server--> 结果到网格[![在此处输入图像描述](../Images/5fdcf0811ec60121b26aec4b637a1e25.png)](https://i.stack.imgur.com/cazH9.jpg)

# sql - 如果客户指定了访问天数，如何按月计算访问量

> ID：13650675
> 
> 赞同：-1
> 
> 时间：2012-11-30T18:04:35.827
> 
> 标签：sql, sql-server, sql-server-2005, unpivot

我有这张桌子

```
customer sunday monday tuesday wedesneday thursday friday saturday
1        0      0       1       1          1       0       0
2        0      1       0       0          0       0       1
3        0      0       1       0          1       0       1
4        0      0       1       1          0       1       0
5        0      1       0       0          1       1       1
6        0      0       1       0          1       1       0
7        0      1       0       1          1       0       1
8        0      0       0       0          1       1       0
9        0      1       1       1          0       0       1 
```

现在我有下一个参数> 年和月 1 月、2 月、3 月（或任何用户选择） **按月安排的访问量如何？**

注意：每个月没有精确的从星期日开始或在星期六结束，并且 monts 没有相同数量的天数。

我相信我可以得到用户选择的每个月的第一天和最后一天

使用循环和选择 datepart > datepart(weekday,'1/'+(some month)+'\'+year_choosed_by_user)

我相信我能得到一些东西

```
month, startday, lastday, days
1        0         2       31
2        3         3       29
3        4         6       30 
```

其中 0 = 星期日和 6 = 星期六，有帮助吗？我将使用 datepart 得到这个#tmptable

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:42:27.120

我不太清楚您要做什么，但下面的解决方案创建了一个日期列表，`UNPIVOT`您的现有数据，然后计算每个月有多少约会：

```
;with dates (datevalue) as
(
  select cast('2012-10-01' as datetime)
  union all
  select dateadd(d, 1, datevalue)
  from dates
  where dateadd(d, 1, datevalue) <= cast('2012-12-01' as datetime)
) 
select count(*) TotalAppts, datename(month, d.datevalue) [Month]
from dates d
inner join 
(
  select client, value, col
  from yourtable
  unpivot
  (
    value
    for col in (Sunday, Monday, Tuesday, Wednesday, 
                Thursday, Friday, Saturday)
  ) unpiv
) src
  on datename(dw, d.datevalue) = col
where value = 1
group by datename(month, d.datevalue) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ee2c7/12)

结果：

```
| TOTALAPPTS |    MONTH |
-------------------------
|          5 | December |
|        122 | November |
|        125 |  October | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:28:46.850

您最好使用某种位掩码。例如，根据二进制数为星期几分配一个值：

```
Sunday     1
Monday     2
Tuesday    4
Wednesday  8
Thursday  16
Friday    32
Saturday  64 
```

一年中的几个月也是如此：

```
January       1
February      2
March         4
April         8
May          16
June         32
July         64
August      128
September   256
October     512
November   1024
December   2048 
```

在您的表结构中，您只需要如下三列：

```
customer_id (INT)  days (INT)   months (INT)
1                  28           0
2                  66           0
3                  84           0 
```

客户 1 在周二、周三和周四访问。如上例所示，这些值等于 28。对于任何给定的星期几组合，由于二进制加法，结果数字是唯一的。如果你解构整数 28，它具有二进制形式：

```
00011100 
```

如果您只考虑最后 7 个地方，则这些`1`值对应于周二、周三、周四，就像您的多个列一样。

那么这有什么帮助呢？您可以使用[按位运算符](http://msdn.microsoft.com/en-us/library/ms176122.aspx)来构造查询。

例如，如果您需要确定客户在星期一访问的内容，则需要`OR`天数列及其值 2。

对于在 5 月和 6 月访问的客户，您将使用值 48。

此建议可能对您减少列数和简化查询很有用，但我不能 100% 确定您在问什么。

# android - 无法重现 NumberFormatException

> ID：13650683
> 
> 赞同：0
> 
> 时间：2012-11-30T18:05:09.243
> 
> 标签：android, numberformatexception

最近我发布了我的 Android 应用程序[(GitHubRepo)](https://github.com/IntegersOfK/Beer-Converter)的更新，并且我已经开始通过 Play 商店从用户那里收到错误报告。我正在尝试进行故障排除，但我无法准确追踪错误的含义。

以下是报告的样子：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{ca.ajwest.BeerConverter/ca.ajwest.BeerConverter.BeerConverterActivity}: java.lang.NumberFormatException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NumberFormatException
at org.apache.harmony.luni.util.FloatingPointParser.parseDblImpl(Native Method)
at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:283)
at java.lang.Double.parseDouble(Double.java:318)
at java.lang.Double.valueOf(Double.java:356)
at ca.ajwest.BeerConverter.BeerConverterActivity.roundTwoDecimals(BeerConverterActivity.java:1513)
at ca.ajwest.BeerConverter.BeerConverterActivity.calculate(BeerConverterActivity.java:987)
at ca.ajwest.BeerConverter.BeerConverterActivity.access$0(BeerConverterActivity.java:757)
at ca.ajwest.BeerConverter.BeerConverterActivity$21.onTextChanged(BeerConverterActivity.java:469)
at android.widget.TextView.sendOnTextChanged(TextView.java:6584)
at android.widget.TextView.setText(TextView.java:2813)
at android.widget.TextView.setText(TextView.java:2671)
at android.widget.EditText.setText(EditText.java:178)
at ca.ajwest.BeerConverter.BeerConverterActivity.onCreate(BeerConverterActivity.java:541)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
... 11 more 
```

我是否正确假设它与我的舍入方法舍入的值有关？

```
double roundTwoDecimals(double d){
        DecimalFormat twoDForm = new DecimalFormat("#.##");
        return Double.valueOf(twoDForm.format(d));
    } 
```

当我似乎无法在我的设备上重现错误时，是否有人对如何进行操作有任何提示？该应用程序严重依赖用户输入数字，即使在我的领域中尝试了各种“凌乱”的数字（我已经尝试了一些非常长的数字），它对我来说仍然完美无缺。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:19:24.547

您可能没有考虑用户区域设置。许多语言环境使用逗号作为分隔符。

这将强制您的格式化程序使用点作为分隔符。

```
double roundTwoDecimals(double d){

    DecimalFormat twoDForm = new DecimalFormat("#.##");
    DecimalFormatSymbols dfSymbols = new DecimalFormatSymbols();
    twoDForm.setDecimalSeparator('.');
    format.setDecimalFormatSymbols(dfSymbols);

    return Double.valueOf(twoDForm.format(d));
} 
```

如果您的用户手动输入数字，您可以获取区域分隔符并改用它。

```
DecimalFormat.getInstance().getDecimalFormatSymbols().getDecimalSeparator(); 
```

PS。你的假设是正确的。通常，请仔细阅读堆栈跟踪，直到您从应用程序中看到包名称。这指向有问题的行，在这种情况下：

```
ca.ajwest.BeerConverter.BeerConverterActivity.roundTwoDecimals(BeerConverterActivity.java:1513) 
```

# java - Jenkins 中 JAR/WAR 清单的颠覆属性

> ID：13650689
> 
> 赞同：2
> 
> 时间：2012-11-30T18:05:39.227
> 
> 标签：java, svn, properties, jenkins, manifest

使用 Jenkins 和 Maven 构建 Java JAR/WAR 时，是否可以在 MANIFEST.MF 中获取 SVN 属性信息（特别是 svn:mergeinfo）？

我有一个设置，我们从主干合并到发布分支，以便使用目标环境的正确配置文件启动 Jenkins 构建 - 我们正在努力实现持续发布。

我希望能够通过检查 Tomcat webapp 中的清单来了解当前在服务器上部署了哪个主干修订版。svn:mergeinfo 属性似乎对此很有用，但如果有更好的方法，我愿意接受其他选择。

注意：分支可能自上次部署以来已经更新，所以我不能依赖分支中属性的当前值（这是我目前的方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:33:03.633

当您将子树与子树合并时， svn:mergeinfo 将出现（更新）在合并目标的根（在您的情况下为分支目录），而不是目标内的任何对象中。

即 - 你可以

*   获取合并信息
*   使用此新数据更新内部任何对象的属性

但不是在合并的时候，并且存储更改的数据将在合并提交后额外提交到分支

**添加在**

发现（偶然）新的 svn-command 和获取最新版本的最简单方法，并合并到 TARGET。

`svn mergeinfo FROM TO`将显示从 FROM 到 TO 合并的所有修订列表。`mergeinfo | tail -1`将被最新合并

# php - scandir() 与 php 从数组创建有序列表

> ID：13650693
> 
> 赞同：0
> 
> 时间：2012-11-30T18:06:01.150
> 
> 标签：php, scandir

继续阅读，在`scandir()`显示任何内容时遇到问题。

```
<?php
    $dir = 'http://www.universaldynamicmedia.com/sandbox/Images';
    $array = scandir($dir);
    foreach($array as $key => $value)
        {
            echo '<li><img src="' . $dir . $value . '" /></li>';
        }
?> 
```

我想我没有对目录做正确的`scandir()`事情，就像其他事情一样，我以前做过，而且效果很好。

目录权限会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:09:05.033

** 请注意，您不能使用 URL，您必须有权访问文件夹/文件

扫描目录（）：

```
$dir = "PATH_TO_DIRECTORY";
$exclude = array( ".","..","error_log","_notes" );
if (is_dir($dir)) {
    $files = scandir($dir);
    foreach($files as $file){
        if(!in_array($file,$exclude)){
            echo '<li><img src="' . $dir . $file . '" /></li>';
        }
    }
} 
```

读取目录（）：

```
$dir = "PATH_TO_DIRECTORY";
$exclude = array( ".","..","error_log","_notes" );
if (is_dir($dir)) {
    if ($dh = opendir($dir)) {
        while (($file = readdir($dh)) !== false) {
            if(!in_array($file,$exclude))
                 echo '<li><img src="' . $dir . $file . '" /></li>';
        }
        closedir($dh);
    }
}?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:07:30.150

`scandir()`仅适用于本地文件系统，您需要将其更改为：

```
$dir = '/path/to/document/root/sandbox/Images'; 
```

# java - 关于 Spring web.xml 的一些信息 和 标记（参考一个 Hello World 示例）

> ID：13650695
> 
> 赞同：15
> 
> 时间：2012-11-30T18:06:07.983
> 
> 标签：java, spring, spring-mvc, web.xml

我是 Spring MVC 世界的新手。今天我正在研究 STS 生成的简单“Hello World”示例：文件 ---> Spring 模板项目 ---> Spring MVC 项目

在 web.xml 我有 DispatcherServlet 的声明和它处理的请求映射......到这里一切都好

在 web.xml 我也有这部分代码：

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

阅读有关 ContextLoaderListener 的 Spring 文档，我读到此类执行侦听器的引导程序以启动 Spring 的根 WebApplicationContext 但是......它到底意味着什么？

另一个疑问是关于我传递给我的上下文的 contextConfigLocation 参数......究竟是什么？打开 /WEB-INF/spring/root-context.xml 文件，它似乎不包含任何配置......它是我的模板项目创建过程自动创建的无效配置文件吗？Spring项目中应该包含什么样的配置？

我认为这个 Hello World 项目中没有使用和标签，因为如果我删除这些标签，projext 仍然运行良好....对吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-30T18:18:58.317

`ContextLoaderListener`是一个启动 Spring 容器的类。基本上每个 Spring 应用程序都由几个 bean 和布线组成（对哪些 bean 相互依赖的声明性描述）。这个描述在历史上是用 XML 编写的（现在我们有注解、Java 配置、CLASSPATH 扫描等）

如果没有 Spring 容器，您的 bean 只是 Java 类，而 Spring 配置文件只是一个无用的 XML 文档。`ContextLoaderListener`读取该文件，找到您的类，实例化它们并连接。然后你所有的豆子都放在一个容器里。

另外`ContextLoaderListener`在应用程序关闭时关闭上下文（如果它们需要一些清理，则关闭所有 bean）。

# java - 嵌套复合组件中的 JSF 复合：actionSource

> ID：13650705
> 
> 赞同：0
> 
> 时间：2012-11-30T18:06:45.750
> 
> 标签：java, jsf-2, nested, composite-component

根据[JSF](http://javaserverfaces.java.net/nonav/docs/2.1/vdldocs/facelets/composite/interface.html)`<composite:interface>`文档：

> **复合组件的嵌套**
> 
> 实现必须支持复合组件的嵌套。具体来说，一个复合组件的部分必须可以作为另一个复合组件的使用页面。当复合组件向使用页面公开行为接口时，例如 、 或其他行为接口，在嵌套复合组件的情况下，必须能够“传播”此类接口的公开。复合组件作者必须确保名称属性的值在所有嵌套级别上完全匹配，以使这种公开工作。该实现不需要支持嵌套复合组件中名称的“重新映射”。

它继续展示了一个嵌套的例子，`<composite:actionSource>`但是，我一直在测试一个几乎完全一样的例子，但它不起作用。这是我的代码：

**内部复合组件：**

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:composite="http://java.sun.com/jsf/composite">

<composite:interface>
  <composite:attribute name="actionText" 
    type="java.lang.String" default="nestedastest action" />
  <composite:actionSource name="someaction" />
</composite:interface>

<composite:implementation>
  <h:commandLink id="someaction">#{cc.attrs.actionText}</h:commandLink>
</composite:implementation>
</html> 
```

**外部复合组件：**

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:composite="http://java.sun.com/jsf/composite"
  xmlns:test="http://java.sun.com/jsf/composite/components/test">

<composite:interface name="nestedActionTester"
  displayName="A test composite component for nested actions">
  <composite:attribute name="actionText" 
    type="java.lang.String" default="astest action" />
  <composite:actionSource name="someaction" />
</composite:interface>

<composite:implementation>
  <test:nestedastest actionText="#{cc.attrs.actionText}" />
</composite:implementation>
</html> 
```

**小面：**

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:test="http://java.sun.com/jsf/composite/components/test">

<h:head />
<h:body>
  <ui:composition template="template.xhtml">
    <ui:define name="content">
      <h:form id="communityMembersForm">
        <div>
          <test:astest>
            <f:actionListener for="someaction"
              binding="#{testController.someActionActionListener}" />
          </test:astest>
        </div>
        <div>
          <test:nestedastest>
            <f:actionListener for="someaction"
              binding="#{testController.someActionActionListener}" />
          </test:nestedastest>
        </div>
      </h:form>
    </ui:define>
  </ui:composition>
</h:body>
</html> 
```

**托管豆：**

```
package test.controller;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.event.AbortProcessingException;
import javax.faces.event.ActionEvent;
import javax.faces.event.ActionListener;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

@ManagedBean
@ViewScoped
public class TestController {
    private static Logger logger = 
            LoggerFactory.getLogger( TestController.class );

    public ActionListener getSomeActionActionListener() {
        return new ActionListener() {
            @Override
            public void processAction( ActionEvent event ) 
                    throws AbortProcessingException {
                logger.debug( "someaction occurred..." );
            }

        };
    }
} 
```

我正在使用 Mojarra 2.1.13：

```
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-api</artifactId>
  <version>2.1.13</version>
  <type>jar</type>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>com.sun.faces</groupId>
  <artifactId>jsf-impl</artifactId>
  <version>2.1.13</version>
  <type>jar</type>
  <scope>runtime</scope>
</dependency> 
```

在 Tomcat 6.0.32 上：

```
<dependency>
  <groupId>org.apache.tomcat</groupId>
  <artifactId>el-api</artifactId>
  <version>6.0.32</version>
  <type>jar</type>
  <scope>provided</scope>
</dependency>
<dependency>
  <groupId>org.apache.tomcat</groupId>
  <artifactId>servlet-api</artifactId>
  <version>6.0.32</version>
  <type>jar</type>
  <scope>provided</scope>
</dependency> 
```

当我运行这个应用程序时，链接`nestedastest action`（它是直接使用内部复合组件的链接）导致动作侦听器运行并打印日志消息。但是，当`astest action`单击（外部复合组件）时，没有任何反应。鉴于这几乎正是官方 JSF javadoc 中显示的示例，我希望它能够工作。知道为什么不是吗？

**- - - - - 编辑 - - - - -**

我发现如果我这样修改外部复合组件：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:composite="http://java.sun.com/jsf/composite"
  xmlns:test="http://java.sun.com/jsf/composite/components/test">

<composite:interface name="nestedActionTester"
  displayName="A test composite component for nested actions">
  <composite:attribute name="actionText" 
    type="java.lang.String" default="astest action" />
  <composite:actionSource name="someaction" targets="inner" />
</composite:interface>

<composite:implementation>
  <test:nestedastest id="inner" actionText="#{cc.attrs.actionText}" />
</composite:implementation>
</html> 
```

*请注意，我向 actionSource 添加了一个 targets 属性，并为嵌套的复合组件添加了一个匹配的 id*

它现在将适当地链接操作。这确实有道理，但文档让您相信这是不必要的。这是文档中的错误吗？还是在实现中（我在 Mojarra 2.1.13 和 MyFaces 2.1.10 上都试过了）？还是按照我的理解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:01:21.337

默认情况下，该算法尝试在每个嵌套级别中查找与 cc:actionSource 名称定义的组件具有相同 id 的组件。在这种情况下，组件 id 仅在内部级别上定义。如果您不想一直使用相同的 id 为每个组件，您可以使用“targets”属性指示哪个组件正在谈论的算法，并通过所有级别传递 actionListener。

# routes - 绘制航运路线

> ID：13650710
> 
> 赞同：1
> 
> 时间：2012-11-30T18:07:15.500
> 
> 标签：routes, google-earth

刚开始，我对GIS软件（主要是qGIS）只有一个基本的了解，主要使用GE Pro来创建可视化。我提前道歉，因为这可能是一个非常基本的问题，但任何帮助将不胜感激。

我的目标是在 Google 地球中显示船只路线/轨迹（作为叠加）以供进一步分析。我的数据集非常大，在 excel 中有 67000 行，其中包含（Lat、Lon、Ship Name、Date、Time）。

我的主要问题是：如何在每个地标之间创建线条以可视化船只正在行驶的路线？因为我的数据包含许多船只的运动，所以每艘船只都有自己的路径。

作为参考，这是一张绘制路线的地图：

[![绘制路线的地图](../Images/f3371d8aee851d1191c4783f732d61f6.png)](https://i.stack.imgur.com/8mmSd.png)
[（来源：[schwehr.org](http://schwehr.org/blog/attachments/2008-12/vos-vessel-tracks-in-ge.png)）]

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:09:54.227

1) 阅读 kml 教程[https://developers.google.com/kml/documentation/kml_tut](https://developers.google.com/kml/documentation/kml_tut)（或者至少是关于行定义的部分）。

2) 将您的坐标集从 excel 例如导出到 csv 文件中，以有用的方式格式化。

3）使用任何编程语言，可以根据你的csv文件生成一个简单的kml文件。bash 脚本的 python 脚本应该足够了。

# javascript - 关于画廊中 js/jquery 预加载器的一些混淆

> ID：13650713
> 
> 赞同：0
> 
> 时间：2012-11-30T18:07:23.177
> 
> 标签：javascript, jquery, gallery, preloader

我是 web-dev 的新手，所以如果这是一个愚蠢的问题，请向我道歉。我对图像预加载器感到困惑。我正在写一个包含或多或少 30-40 个大图像的画廊。gally 有一些拇指，如果单击它们，它会显示大拇指。

现在我的 HTML 看起来像这样：

```
<script type="text/javascript">
    var gallery_smallsize_urls = [
        "0_small.jpg", "1_small.jpg",
        "2_small.jpg", "3_small.jpg", 
        ...
        ];

    var gallery_fullsize_urls = [
        "0_full.jpg", "1_full.jpg",
        "2_full.jpg", "3_full.jpg",
        ...
        ];
</script>

<div id="gallery_thumbs">
    <ul>
        <li> <img id="gallery_thumb0" src="loading.gif" alt="0"> </li>
        <li> <img id="gallery_thumb1" src="loading.gif" alt="0"> </li>
        <li> <img id="gallery_thumb2" src="loading.gif" alt="0"> </li>
        <li> <img id="gallery_thumb3" src="loading.gif" alt="0"> </li>
        ...
    </ul>
</div> 
```

现在，我有两个特点：

1.  **加载队列**。页面已加载。在文档准备好时，js 开始拇指队列。这意味着：加载 1° 拇指，只有在完成后才开始加载 2°。等等。

2.  **预加载填充大小的图像**。当用户单击拇指时，必须等待更少的时间才能显示完整（因为完整大小的图像已经缓存在内存中）。

现在，我找到了这个[投票答案](https://stackoverflow.com/a/476681/433685)：

```
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
        // Alternatively you could use:
        // (new Image()).src = this;
    });
} 
```

但我认为这只是第 2 点的答案。这里会发生什么？图片是同时加载的吗？我不知道如何处理第 1 点。我认为最好的方法是使用[Deferred 对象](http://api.jquery.com/category/deferred-object/)....

一些忠告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:27:13.717

您可以使用图像预加载器插件（jQuery）。

[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

这将允许在显示之前预加载缩略图（这更有效，因为浏览器无论如何都会这样做）。

至于大图像，您可以使用该插件在后台加载所有图像。例如：

```
var sampleImage= new Image();
sampleImage.src = imageURL;

$(sampleImage).imagesLoaded({
    done: function($images){
              // do something when image is loaded
    });
}); 
```

# jquery - jquery根据容器高度显示更多文本

> ID：13650732
> 
> 赞同：0
> 
> 时间：2012-11-30T18:08:04.550
> 
> 标签：jquery, text-manipulation

我寻找了一个截断文本并根据**容器高度而不是文本字符限制**添加（更多）链接的插件。我找不到一个。

看来病得自己写一篇了。需要回答的问题是：

根据 div 的宽度和给定的高度，那里可以容纳多少文本（使用该 div 的字体样式）？

到目前为止，这看起来很有希望： [https ://developer.mozilla.org/en-US/docs/DOM/element.getClientRects](https://developer.mozilla.org/en-US/docs/DOM/element.getClientRects)

# sql - 使用 INNER JOIN 乘以选定的行？

> ID：13650733
> 
> 赞同：2
> 
> 时间：2012-11-30T18:08:09.510
> 
> 标签：sql, inner-join

有很多关于内部连接的帖子，但不确定它是否完全解决了我的问题？

我有四个我希望加入的表，其中前三个看起来是正确的，当我加入第四个表时，连接会增加行（表 AB * 表 C）。

第 4 个表只有 37 行，但是根据在第 1 个表中重复多次的 viewunitsonrun.strUnitCode 每行需要专门插入多次（tblawardedlearers）。

```
SELECT viewlearnersonrun.intRunID,
       intlearnerID,
       strFirstname, 
       strunitcode, 
       strGrade
  FROM tblawardedlearners
 INNER JOIN viewlearnersonrun
         ON viewlearnersonrun.intID = tblawardedlearners.intLearnerID
 INNER JOIN viewrun
         ON viewrun.intID = viewlearnersonrun.intRunID /*CORRECT TO THIS POINT */
 INNER JOIN viewunitsonrun
         ON viewunitsonrun.strUnitCode = tblawardedlearners.strUnitCode 
 WHERE viewlearnersonrun.intRunID = '200GE2'   /* display only one Course */ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:27:25.660

它导致笛卡尔积，因为两个连接都返回多个记录。为了在 first 之后保留结果`JOIN`，您必须确保其他加入是通过唯一键选择的。如果表没有供您选择的唯一键，您可以使用`DISTINCT`或`GROUP BY`使其按您的意愿工作。

样本：

```
SELECT viewlearnersonrun.intRunID,
       intlearnerID,
       strFirstname,
       strunitcode,
       strGrade
  FROM tblawardedlearners 
 INNER JOIN viewlearnersonrun
         ON viewlearnersonrun.intID = tblawardedlearners.intLearnerID
 INNER JOIN viewrun
         ON viewrun.intID = viewlearnersonrun.intRunID 
 INNER JOIN (SELECT DISTINCT strUnitCode --, others columns...
               FROM viewunitsonrun
            ) v
         ON  v.strUnitCode = tblawardedlearners.strUnitCode
 WHERE viewlearnersonrun.intRunID = '200GE2' 
```

# c# - 将 HTML 从另一个文件注入页面的选项

> ID：13650735
> 
> 赞同：0
> 
> 时间：2012-11-30T18:08:29.310
> 
> 标签：c#, html, asp.net-1.1

我正在尝试找出将本地 html 文件的内容注入网页的选项。我有一个计划任务，它`.html`从远程服务器获取文件列表并将它们存储在本地网络服务器上，这是我无法更改的。

如何`.html`通过代码隐藏将文件注入网页？我在可以放入的页面上有一个`Literal`控件，但是从文件`HTML`中获取的最佳方法是什么？`html`文件流？或者将那些包含部分 HTML 的文件放入 IIS 并以某种方式提供它们？

根据我对我的要求的理解，我不能使用 ajax 或 iframe。苏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:13:15.333

我认为您需要解析下载的 HTML 文件并获取所需的部分，然后在托管网页上使用 Literal。您需要在后面的代码中编写代码，通过从本地目录中打开相应的文件，如果需要解析它，然后将其设置为literal = htmlContent。它需要在页面加载期间发生，或者您创建一个静态页面并事先进行注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:07:12.127

您能否使 .html 文件在同一本地 Web 服务器上可用？如果你能做到这一点，那么你可以使用 Jquery 加载这个 .html 文件。

```
$('#loader').load('www.mywebserver.com/htmlrepository/test.html'); 
```

上面的 'loader' 是要加载 html 文件内容的 html 元素的 id。'test.html' 是下载的 html 文件。

[在此处](http://api.jquery.com/load/)查看更多信息

# java - dlopen：无法使用静态 TLS 加载更多对象

> ID：13650740
> 
> 赞同：5
> 
> 时间：2012-11-30T18:09:03.087
> 
> 标签：java, unix, fedora, dlopen, thread-local-storage

我有一个大型的混合 java/c++ 应用程序，可以将多个共享库加载到 java 中。它在我的 Ubuntu 12.04 32 位机器上运行良好，但在 Fedora 17 64 位机器上运行时遇到问题。一切都编译得很好，但是当我尝试运行它时，我得到：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: /pathto/libmylib.so: dlopen: cannot load any more object with static TLS 
```

任何帮助是极大的赞赏！

更新：我已将其缩小到 PCL（点云库）依赖项的问题。libmylib.so 依赖于 PCL，但如果未安装，也可以在没有 PCL 的情况下进行编译。没有 PCL 的编译工作正常。我正在等待 PCL 社区中的人们回复我，我将根据他们的建议更新此线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:55:19.350

看起来 PCL 库依赖于`libgomp`，您可能会遇到[这个](http://gcc.gnu.org/ml/gcc-patches/2012-04/msg01319.html)问题。

# vb.net - 从“DBNull”类型到“Decimal”类型的转换无效

> ID：13650750
> 
> 赞同：2
> 
> 时间：2012-11-30T18:09:25.873
> 
> 标签：vb.net, ado.net

我在标题“从类型 'DBNull' 到类型 'Decimal' 的转换无效”中收到错误消息。从这行代码

```
_event.TotalDollars = IIf((dr("TotalDollars") Is DBNull.Value), "$0", CType(dr("TotalDollars"), Decimal).ToString("c")) 
```

`_event.TotalDollars`是一个字符串

为什么要评估 IIF 语句的第三部分？这个 IIF 的重点是不尝试将 DBNull 值转换为小数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:12:55.993

两个问题：

`IIF`在返回之前评估 True 和 False 操作。

根据您拥有的 VS 版本，您可以`If(condition,true,false)`改用（不是）

另外，你可能最好用`IsDbNull(condition)`它来做测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T20:08:18.927

使用 DatasetExtensions 您也可以使用可为空的十进制类型来执行此操作。

```
_event.TotalDollars = if(dr.Field(of Decimal?)("TotalDollars"),0).ToString("c") 
```

# html - 如何删除 WordPress 评论表单中特定字段的“强制”

> ID：13650753
> 
> 赞同：0
> 
> 时间：2012-11-30T18:09:34.363
> 
> 标签：html, wordpress, validation

我已经使用引导主题在 WordPress 中启动了我的第一个网站。我的网站是[www.youthenext.com](http://www.youthenext.com)

即使我没有为 wesite 字段设置强制，表单也不会在没有填写表单字段的情况下提交。你可以[在这里看到表格](http://youthenext.com/tips-to-prepare-your-first-and-best-resume-2/)

我不知道我必须编辑哪个文件。

# django - 将选择字段作为电子邮件主题发送

> ID：13650755
> 
> 赞同：1
> 
> 时间：2012-11-30T18:09:41.507
> 
> 标签：django, django-forms

我的 forms.py 中有一个这样的选择字段：

```
ASSUNTO = ( ('1', u'Informações'), 
        ('2', 'Comercial'), 
        ('3', 'Financeiro'), 
        ('4', 'Outro')) 
```

在我的views.py中，当我从选择字段中发送选择的值作为电子邮件主题时，它就像：

在我的 html 页面中的表单中选择“**商业”**

收到的电子邮件主题为：“ **2 - MY COMPANY** ”

我的views.py中的代码：

```
from django.shortcuts import render
from forms import FormContato
from django.core.mail import send_mail

def HomeContato(request):
    form = FormContato()
    if request.method == 'POST':
        form = FormContato(request.POST)
        if form.is_valid():
            send_mail( form.cleaned_data['assunto'] + ' - MY COMPANY', 'Nome: ' + form.data['nome'] + ' ' + form.data['sobrenome'] + ' :: ' + 'E-mail: ' + form.data['email'] + ' :: ' + 'Mensagem: ' + form.data['menssagem'], 'noreply@email.com.br', ['email@gmail.com'], fail_silently=False)
            return render(request, 'contato/contato.html', locals())
        else:
            return render(request, 'contato/contato.html', locals())
    else:
        return render(request, 'contato/contato.html', locals()) 
```

如何使用此命令将主题设为：“商业 - 我的公司”？

在此先感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:25:17.450

这不是很漂亮，但以下应该做到这一点：

```
{choice[0]:choice[1] for choice in form.fields['assunto'].choices}[form.cleaned_data['assunto']] 
```

**注意：**阅读其他答案后，您可以这样做`dict(form.fields['assunto'].choices)[form.cleaned_data['assunto']]`- 我不认为使用内置函数而不是理解

另外你得到“2”的原因是选择元组是一个值元组=>标签元组。

如果您希望该值不是无意义的整数，请将其设置为：

```
ASSUNTO = ( (u'Informações', u'Informações'), 
    ('Comercial', 'Comercial'), 
    ('Financeiro', 'Financeiro'), 
    ('Outro', 'Outro')) 
```

然后保持您的视图与您当前的视图相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:10:37.197

采用：

```
dict(ASSUNTO)[form.cleaned_data['assunto']] + ... 
```

# html - 如何使 iframe 调整内容的高度

> ID：13650756
> 
> 赞同：0
> 
> 时间：2012-11-30T18:09:41.243
> 
> 标签：html, iframe, web, height

我正在构建一个网页，我需要在其中制作不同的部分，并且我希望页面将高度调整为在某个时刻正在查看的部分。实现这一目标的最佳方法是什么？我试图用 iframe 和目标打开来做到这一点

```
 <a href="/example" target="myframe"> 
```

但我不能让 iframe 适应显示的内容。

任何帮助将不胜感激！提前致谢

我想要的是每当有人点击“更多信息”时从页面底部展开的窗口。我以为我可以用 iframe 实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:15:01.143

这适用于所有浏览器

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>auto iframe height adjust</title>
<style>
</style>
<script type="text/javascript">
<!--//
function sizeFrame() {
var F = document.getElementById("myFrame");
if(F.contentDocument) {
 F.height = F.contentDocument.documentElement.scrollHeight+30; //FF 3.0.11, Opera 9.63, and    Chrome
} else {
F.height = F.contentWindow.document.body.scrollHeight+30; //IE6, IE7 and Chrome
}
}
window.onload=sizeFrame;
//-->
</script>
</head>
<body> 
```

查看此网站需要支持 iframe 的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:14:38.267

我找到了这个解决方案，它完美地解决了我的问题！它甚至可以选择调整宽度。

```
<script type='text/javascript'>

function setIframeHeight( iframeId ) /** IMPORTANT: All framed documents *must* have a DOCTYPE applied **/
{
var ifDoc, ifRef = document.getElementById( iframeId );

 try
 {   
 ifDoc = ifRef.contentWindow.document.documentElement;  
 }
 catch( e )
 { 
  try
  { 
   ifDoc = ifRef.contentDocument.documentElement;  
  }
  catch(ee)
  {   
  }  
 }

 if( ifDoc )
 {
  ifRef.height = 1;  
  ifRef.height = ifDoc.scrollHeight;

  /* For width resize, enable below.  */

  // ifRef.width = 1;
  // ifRef.width = ifDoc.scrollWidth; 
 }
}

</script>

<iframe id = "myIframe"  onload = "setIframeHeight( this.id )"> 
```

I found it here: [http://www.sitepoint.com/forums/showthread.php?747398-IFRAME-Auto-Height](http://www.sitepoint.com/forums/showthread.php?747398-IFRAME-Auto-Height)

# javascript - 带有一些倾斜/旋转的 JQuery 抖动效果

> ID：13650762
> 
> 赞同：1
> 
> 时间：2012-11-30T18:10:18.213
> 
> 标签：javascript, jquery

我正在尝试创建一种效果，在单击按钮时，div 会左右摇晃并左右倾斜约 10 度，因此在用两只手摇晃物体时看起来像是自然运动。我能够创建左右摇晃效果，但似乎无法将其与旋转联系起来。我也需要它在 IE8 中工作，所以 css3 不是一个选项。我正在使用 JQuery UI 和 .rotate() 但如果有更好的方法请告诉我。我需要在单击按钮时摇动大约 3-4 次。

```
 <div class="container">
<div class="globe-main" id="globe">
    <div class="content"></div><!-- end .content -->
</div><!-- end .globe-main -->
    </div><!-- end .container -->

    <script>

var times = 4;
var loop = setInterval(rota, 300);

function rota() {
    times--;
    if(times === 0){clearInterval(loop);}
    $(".globe-main").rotate({animateTo:10, duration: 500, });
    //$(".globe-main").effect("shake", { times:3, distance:30 }, 800);

}
rota(); 

    </script> 
```

这是我到目前为止所拥有的[FIDDLE](http://jsfiddle.net/J2ySt/)

谢谢

更新

这是更新的[FIDDLE](http://jsfiddle.net/J2ySt/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:19:42.013

jQuery 没有称为`rotate`. 这大概就是问题所在。

**编辑**

根据您的评论，我猜您可以创建自己的队列...

```
rotationAnimationQueue = {
   queue: [],
   addAnimation: function( $jQueryObject, params ) {
      // add animation to the queue
      this.queue.push( {
         $jQueryObject: $jQueryObject,
         params: params
      } );
      // if only animation in queue, begin processing
      if ( this.queue.length === 1 ) this.processQueue();
   },
   processQueue: function() {
      var self = this;
      var animation = this.queue[ 0 ];
      animation.params.callback = function() {
         self.queue.shift();
         if ( self.queue.length > 0 ) self.processQueue();
      };
      animation.$jQueryObject.rotate( animation.params );
   }
}; 
```

在此处查看实际操作：http: [//jsfiddle.net/UnyYh/1/](http://jsfiddle.net/UnyYh/1/)

您可能想要修改队列代码，以便它跟踪每个 jQuery 对象的一个​​队列。这样，如果需要，您可以同时在多个对象上发生抖动动画，而不是总是按顺序执行动画。

# php - 每分钟间隔触发 x 个动作的最有效方法是什么？

> ID：13650767
> 
> 赞同：1
> 
> 时间：2012-11-30T18:10:37.967
> 
> 标签：php, timer, intervals

想象一个呼叫中心，每分钟不能被超过 2 个呼叫淹没的客户。因此，超出该范围的任何人都将获得电子邮件支持链接 ($bTrigger = FALSE)。其他所有人 ($bTrigger = TRUE) 都会获得技术支持电话号码。

脚本是PHP。那么，构建这个的最有效和最准确的方法是什么？

这是我到目前为止所拥有的，但不幸的是它每分钟只触发一次。我似乎无法弄清楚为什么它不会每分钟运行两次。

```
<?php

$bTrigger = FALSE;
$sDir = dirname(__FILE__);
$sDir = rtrim($sDir,'/');
$sFile = $sDir . '/MINUTE-TIMER.txt';

$sLine = @ file_get_contents($sFile);
$sLine = str_replace("\r\n",'',$sLine);
$sLine = str_replace("\r",'',$sLine);
$sLine = str_replace("\n",'',$sLine);
$sLine = str_replace("\t",'',$sLine);
$asParts = explode(',',$sLine);
$nLetThru = @ $asParts[0];
$nLetThru = intval($nLetThru);
$nLastMin = @ $asParts[1];
$nLastMin = intval($nLastMin);
$nCurMin = intval(date('i'));
if (empty($sLine)) {
  $nLetThru = 0;
  $nLastMin = 0;
}

$nMaxLetThru = 2;

if ($nCurMin != $nLastMin) { // meaning, a new minute since last checked
  if ($nLetThru <= $nMaxLetThru) { // meaning, we haven't hit more than max allowed
    $bTrigger = TRUE;
    ++$nLetThru;
    file_put_contents($sFile,"$nLetThru,$nCurMin");
  } else {
    file_put_contents($sFile,"0,$nCurMin");
  }
}

if ($bTrigger) {
  echo 'TRIGGERED!!!!';
} else {
  echo 'not triggered';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:13:08.723

问题是一个简单的编码错误：当分钟改变时，$nLetThru 没有被重置。（另外，你的 <= 应该是 <，但你已经注意到了。）

这是固定代码（基于原始版本，在问题中）：

```
if (empty($sLine)) {
  $nLastMin = -1; # (instead of 0) just affects the 1st time thru, 1 chance in 60
} 
```

...

```
if ($nCurMin != $nLastMin) { // new minute
  $bTrigger = TRUE;
  $nLetThru = 1;
} else { // another hit, same minute
  if ($nLetThru < $nMaxLetThru) { // not too many yet
    $bTrigger = TRUE;
    ++$nLetThru;
  }
}
if ($bTrigger) {
  file_put_contents($sFile,"$nLetThru,$nCurMin");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:59:28.810

```
<?php

$bTrigger = TRUE;
$config = (object) array();
$config->THROTTLE_ENABLED = TRUE;
$config->THROTTLE_MAX_PER_MINUTE = 2;
if ($config->THROTTLE_ENABLED) {

    $bThrottleTrigger = FALSE;
    $sDir = dirname(__FILE__);
    $sDir = rtrim($sDir,'/');
    $sFile = $sDir . '/MINUTE-TIMER.txt';

    $sLine = @ file_get_contents($sFile);
    $sLine = str_replace("\r\n",'',$sLine);
    $sLine = str_replace("\r",'',$sLine);
    $sLine = str_replace("\n",'',$sLine);
    $sLine = str_replace("\t",'',$sLine);
    $asParts = explode(',',$sLine);
    $nLetThru = @ $asParts[0];
    $nLetThru = intval($nLetThru);
    $nLastMin = @ $asParts[1];
    $nLastMin = intval($nLastMin);
    $nCurMin = intval(date('i'));
    if (empty($sLine)) {
        $nLetThru = 0;
        $nLastMin = 0;
    }

    if ($nCurMin != $nLastMin) { // meaning, a new minute since last checked
        if ($nLetThru < $config->THROTTLE_MAX_PER_MINUTE) { // meaning, we haven't hit more than max allowed
            $bThrottleTrigger = TRUE;
            ++$nLetThru;
            @ file_put_contents($sFile,"$nLetThru,$nLastMin");
        } else {
            @ file_put_contents($sFile,"0,$nCurMin");
        }
    } else {
        @ file_put_contents($sFile,"0,$nCurMin");
    }

    if (!$bThrottleTrigger) { // will be like most of the time
        $bTrigger = FALSE; // don't show the number
    }

} // end if ($config->THROTTLE_ENABLED) 
```

# html - 删除 li 和 li:hover 背景图像上的多余空间

> ID：13650770
> 
> 赞同：0
> 
> 时间：2012-11-30T18:10:59.073
> 
> 标签：html, css

我使用背景图像和悬停效果创建了一个导航栏。我正在尝试学习如何在网站上正确实施它们。

我已经设计了 90% 的导航，但我遇到的问题是，当我将鼠标悬停在其中一个项目上时，悬停图像不会与原始图像重叠并产生额外的空间。

**CSS：**

```
#bg {
    background-color: #EAEAEA;
    width: 761px;
}
#menu {
    background-color: #EAEAEA;
    height: 58px;
    list-style-type: none;
    padding-left: 1px;
}
#menu li.first a {
    background: url("../images/top_nav_f.png") no-repeat scroll 0 0 transparent;
    height: 180px;
}
#menu li a {
    background: url("../images/top_nav_f.png") no-repeat scroll 0 0 transparent;
    float: left;
    width: 190px;
    height: 180px;
}
#menu li.first a:hover {
    background: url("../images/menu_hover_f.png") no-repeat scroll 0 0 transparent;
} 
#menu li a:hover {
    background: url("../images/menu_hover.png") no-repeat scroll right top transparent;
    color: #FFFFFF;
    height: 58px;
}
#menu li.last a {
    background: url("../images/top_nav_n.png") no-repeat scroll 0 0 transparent;
}
#menu li.last a:hover {
    background: url("../images/menu_hover_r.png") no-repeat scroll 0 0 transparent;
}
.bar {
    margin-right: 38px;
    padding-top: 5px;
    text-align: center;
}
.n1, .n2 {
    color: #333333;
} 
```

**HTML：**

```
 <nav id="bg">
            <ul id="menu">
           <li class="first">
            <a href="">
            <div class="bar">
              <div class="n2">Link 1 </div>
            </div>
           </a>

           </li>

            <li><a class="" href="">
            <div class="bar">
              <div class="n2">link 2 </div>
            </div>
             </a>
             </li>

            <li><a class="" href="">
            <div class="bar">
              <div class="n2">link 3 </div>
            </div>
            </a>
            </li>

             <li class="last"><a href="">
            <div class="bar">
              <div class="n2">link 4 </div>
            </div>
            </a>
            </li>
</ul>

</nav> 
```

演示：[http ://tinyurl.com/cqus3fb](http://tinyurl.com/cqus3fb)

我一直试图让它工作近 3 天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:12:56.953

问题在于以下`#menu li a:hover`规则：

```
#menu li a:hover {
    background: url("../images/menu_hover.png") no-repeat scroll right top transparent;
    color: #FFFFFF;
    height: 58px;
} 
```

您需要将后台规则更改为：

```
 background: url("../images/menu_hover.png") no-repeat scroll 0 0 transparent; 
```

原因是在您的背景简写声明中，您已将背景位置设置为`right`以及`top`所有其他规则设置为`0`和的位置`0`。所以基本上你的背景是从右边而不是左边定位的，因为它`a`是 190px 宽，而图像是 180px 宽，它看起来像是有 10px 的间隙。

# javascript - 将 req.body 属性移动到模型对象的有效方法

> ID：13650771
> 
> 赞同：1
> 
> 时间：2012-11-30T18:11:02.693
> 
> 标签：javascript, node.js

我正在寻找一些我在创建 crud REST api 时一直在做的乏味样板代码的捷径。我正在使用快递并发布我希望保存的对象。

```
app.post('/', function(req, res){
  var profile = new Profile();

  //this is the tedious code I want to shortcut

  profile.name = req.body.name;
  profile.age = req.body.age;
  ... and another 20 properties ...

  //end tedious code

  profile.save()
}); 
```

有没有一种简单的方法可以将所有 req.body 属性应用于配置文件对象？我将为不同的模型编写相同的 crud 代码，并且在开发过程中属性会经常变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:17:52.830

*假设您将生成一个好的模式来放置值，那么for-in*循环怎么样`new Profile()`，这将避免 req.body 搞砸您。

```
for (var key in profile) {
  if (profile.hasOwnProperty(key) && req.body.hasOwnProperty(key))
    profile[key] = req.body[key];
} 
```

更准确地说，在这种情况下，您的每个模块都应该有一个 parse/stringify 函数。这样您就可以简单地调用：

```
var profile = Profile.parse(req.body); 
```

事实上，如果你在使用非 IE 浏览器或在 node.js/rhino 中玩游戏，并且你的 req.body 是*clean*，你可以这样做：

```
var profile = req.body;
profile.__proto__ = Profile.prototype; 
```

你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:13:53.460

可以做这样的事情：

```
for(key in req.body) {
  profile[key] = req.body[key];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:18:45.607

遍历所有键可能是个坏主意。更好的是：

```
['name', 'age', ...].forEach(function(key) {
    profile[key] = req.body[key];
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-02T18:38:51.470

最简单的方法是使用扩展运算符 (...)。

```
app.post('/', function(req, res){
  var profile = new Profile({...req.body});
  profile.save()
}); 
```

# emacs - 按完整路径对目录中的文件进行排序

> ID：13650776
> 
> 赞同：2
> 
> 时间：2012-11-30T18:11:30.590
> 
> 标签：emacs, dired

我正在使用 find-name-dired 来查找多个具有相同名称（称为 foo.txt）但位于不同目录中的文件实例。我想要按文件路径的字母顺序列出的文件。但是，它们以看似随机的顺序列出。[dired-sort-menu](http://www.emacswiki.org/DiredSortMenu)和[dired-sort-chiesa](http://www.emacswiki.org/emacs/DiredSortBySizeAndExtension)都不会对 find-name-dired 的输出进行排序，即使它适用于其他 dired 缓冲区（其格式看起来非常相似）。如果我将 dired 缓冲区的内容写入文件，我可以打开 shell 并将文件提交给 shell 中的排序命令，该命令使用第 9 个字段（路径）作为键。这会产生看起来正确的输出，但当然它不再是一个 dired 缓冲区。

有没有办法我可以

1.  读入该外部排序的文件并以“模式”（类似于编译模式）打开它，
2.  在仍处于 dired 模式时对 find-name-dired 的输出进行排序，或
3.  从 find-name-dired 生成输出，从一开始就按照我想要的方式排序？

更新：

只是为了让事情更具体一点，这里是当前缓冲区：

```
/home/afrankel/Documents/emacs_test/:
find . \( -iname foo.txt \) -exec ls -ld \{\} \;
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 a/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 b/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 d/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 c/z/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 c/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 f/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 e/foo.txt

find finished at Fri Nov 30 17:00:41 
```

按“s”（这将对大多数 dired 缓冲区进行排序）给出错误“无法排序这个 dired 缓冲区”。

我希望缓冲区看起来像这样：

```
/home/afrankel/Documents/emacs_test/:
find . \( -iname foo.txt \) -exec ls -ld \{\} \;
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 a/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 b/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 c/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 c/z/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 d/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 e/foo.txt
-rw-r--r--   1 afrankel users        4 Nov 30 16:59 f/foo.txt

find finished at Fri Nov 30 17:00:41 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T12:16:30.423

当你输入`s`一个“正常”的 Dired 缓冲区时，Dired 实际上并没有对缓冲区进行排序。它所做的是更改 的值，`dired-actual-switches`以便它包含（或不包含）`-t`选项（“按修改时间排序”），然后调用which使用新选项`revert-buffer`重新运行。`ls`这显然在运行产生的 Dired 缓冲区中不起作用`find`。

您需要做的是安排`find`使用以下`-s`选项运行：

```
 -s      Cause find to traverse the file hierarchies in lexicographical
         order, i.e., alphabetical order within each directory. 
```

`find-dired`您可以通过评估来执行（对于所有命令）

```
(setq find-program "find -s") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:33:29.070

这是通过临时更改配置手动执行此操作的一种方法：

1.  运行 Mx customize-group find-dired。
2.  更改“查找 Ls 选项”字段的内容。它最初应为“-exec ls -ld {} \;”。附加文本使其显示为“-exec ls -ld {} \; |sort --key=9”。（换句话说，按字段 9 排序，它是将完整路径视为单个字符串。）
3.  仅为当前会话设置选项。

更新：最好使用 defadvice，就像我在其他（后来的）答案中所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:22:26.890

好的，我想出了如何使用 defadvice 在执行我的新包装函数（find-name-dired-sorted）时自动更改 find-ls-option 的值，然后将其更改回其原始值.

```
(defadvice find-name-dired (around find-name-dired-around)
  "Advice: Sort output by path name."
  (let ((find-ls-option (list "-exec ls -ld {} \\; |sort --key=9")))
   ad-do-it))

(defun find-name-dired-sorted (dir pattern)
    "Sort the output of find-name-dired by path name."
    (interactive
     "DFind-name (directory): \nsFind-name (filename wildcard): ")
    (ad-activate 'find-name-dired)
    (find-name-dired dir pattern)
    (ad-deactivate 'find-name-dired)) 
```

# java - 如何读取和下载存储在 Bucket 中的文件？

> ID：13650780
> 
> 赞同：2
> 
> 时间：2012-11-30T18:11:49.493
> 
> 标签：java, google-app-engine, google-cloud-storage

我正在尝试从我的存储桶中获取存储的 PDF 文件。该文件没有公共权限，但设置为项目私有

我使用以下代码：

```
String filename = "/gs/" + BUCKETNAME + "/" + FILENAME;
AppEngineFile readableFile = new AppEngineFile(filename);
FileReadChannel readChannel = fileService.openReadChannel(readableFile, false);
BufferedReader reader = new BufferedReader(Channels.newReader(readChannel, "UTF8"));
String line = reader.readLine();
resp.getWriter().println("READ:" + line);
readChannel.close(); 
```

在我用我的服务帐户名称设置我的 Acl 之前

```
<Entry>
<Scope type="UserByEmail">
  <EmailAddress>
     your-application-id@appspot.gserviceaccount.com
  </EmailAddress>
</Scope>
<Permission>FULL_CONTROL</Permission>
</Entry> 
```

当我运行我的应用程序时，我会在 FileReadChannel readChannel = fileService.openReadChannel(readableFile, false); 行收到此错误：

```
java.io.IOException
at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:615)
at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:588)
at com.google.appengine.api.files.FileServiceImpl.open(FileServiceImpl.java:521)
at com.google.appengine.api.files.FileServiceImpl.openForRead(FileServiceImpl.java:481)
at com.google.appengine.api.files.FileServiceImpl.openForRead(FileServiceImpl.java:473)
at com.google.appengine.api.files.FileServiceImpl.openReadChannel(FileServiceImpl.java:197)
at it.tiquadra.webso.controller.MainController.readFile(MainController.java:386)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:43)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
at java.lang.Thread.run(Thread.java:679)
Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 8: 
    at java.lang.Thread.getStackTrace(Thread.java:1495)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:107)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:56)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:584)
    ... 40 more

Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 8: 
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:783)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:823)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.failure(RpcStub.java:814)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:900)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:803)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1063)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:911)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2267)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2068)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2000(RpcNetChannel.java:143)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3129)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:599)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:417)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:578)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:1002)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:884)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInfo.java:136)
    at com.google.net.eventmanager.EventManagerImpl$WorkerThread.run(EventManagerImpl.java:1855) 
```

我的代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T07:21:51.250

您的阅读器使用的是 utf8，它是一种字符编码。PDF 是二进制文件。尝试使用字节流读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:51:02.820

我建议使用带有 BlobKey 的[BlobReader](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass#BlobReader)类，该 BlobKey 指向您在 Cloud Storage 中的对象。

您可以使用[createGsBlobKey](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#createGsBlobKey(java.lang.String))生成 BlobKey 。

# python - 我希望能够动态地向 python 类添加函数，而不是事先知道它们的名字

> ID：13650784
> 
> 赞同：1
> 
> 时间：2012-11-30T18:12:06.567
> 
> 标签：python, class, dynamic, methods, instance

假设我有一个名字列表。我希望能够将这些作为实例函数动态添加到类实例中。我知道 types.MethodType 但从那里到这里我有点新手。基本上我想做的是：

```
class foo( object ):
     def __init__(self):
         pass

f = foo()
names = ["a","b","c"]
for name in names:
    add name() to f  # not sure what to do here
    # what I wanted added to instance "f" is this for each name:
    def name(self, *args, **kwargs):
        print( "My name is %s" % inspect.stack()[0][3]   )       
        print( "__called, args=%r, **kwargs=%r" % (args, kwargs) )

f.a() # ==> calls f.a()
f.b(1,2,3) # calls f.b(1,2,3 )and so on 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:23:45.137

如果您将函数创建为嵌套函数，则更容易；`name`然后是从嵌套范围中获取的变量：

```
import types
def buildMethod(name, instance):
    def namefunc(self, *args, **kwargs):
        print "My name is %s" % name
        print "__called, args=%r, **kwargs=%r" % (args, kwargs)
    namefunc.__name__ = name
    setattr(instance, name, types.MethodType(namefunc, instance, type(instance)))

f = foo()
names = ["a","b","c"]
for name in names:
    buildMethod(name, f) 
```

这导致：

```
>>> f.a
<bound method instance.a of <__main__.foo instance at 0x100d8e560>>
>>> f.a.__name__
'a'
>>> f.a()
My name is a
__called, args=(), **kwargs={}
>>> f.b()
My name is b
__called, args=(), **kwargs={}
>>> f.c()
My name is c
__called, args=(), **kwargs={} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:17:29.690

我错了，`setattr`独自一人就足够了。但是，这有效：

```
import inspect
import types

class foo( object ):
     def __init__(self):
         pass

def namefunc(self, *args, **kwargs):
    print( "My name is %s" % inspect.stack()[0][3]   )       
    print( "__called, args=%r, **kwargs=%r" % (args, kwargs) )

f = foo()
names = ["a","b","c"]
for name in names:
    setattr(f, name, types.MethodType(namefunc, f))

f.a() # ==> calls f.a()
f.b(1,2,3) # calls f.b(1,2,3 )and so on 
```

# c# - WP8 LongListSelector - 重新分配 ItemsSource 无效

> ID：13650788
> 
> 赞同：9
> 
> 时间：2012-11-30T18:12:36.517
> 
> 标签：c#, xaml, windows-phone, windows-phone-8

我正在使用新的 Windows Phone 8`LongListSelector`控件，它的`ItemsControl`分配`List<Group<object>>`如下：

```
 List<Group<PlacePoint>> searchResults; 

    async void doSearch()
    {
        this.searchResults = await SearchHelper.Instance.getSearchResults(txtSearchTerm.Text);
        longList.ItemsSource = this.searchResults;
    } 
```

不幸的是，我第二次搜索时，重新设置 .ItemsSource 属性没有效果，控件只是显示旧的列表。

如何更改绑定？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T18:16:06.177

似乎重新分配 longList.ItemsSource 没有任何效果，无论这是一个错误还是我不能说的设计。

但是，一个简单的解决方法是简单地使用 ObservableCollection>，然后使用此集合而不是重新分配 ItemsSource。

示例代码：

```
 ObservableCollection<Group<PlacePoint>> searchResults = new ObservableCollection<Group<PlacePoint>>();

    public SearchPage()
    {
        InitializeComponent();

        longList.ItemsSource = this.searchResults;
    }

    async void doSearch()
    {
        List<Group<PlacePoint>> tempResults = await SearchHelper.Instance.getSearchResults(txtSearchTerm.Text);

        // Clear existing collection and re-add new results
        this.searchResults.Clear();
        foreach (Group<PlacePoint> grp in tempResults )
        {
            this.searchResults.Add(grp);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T21:11:22.990

有时它有助于将 ItemsSource 设置为 null，然后立即设置为您的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T18:49:45.737

您需要使用**async**定义 doSearch() 方法，以便 await 正常运行。

尝试像这样声明你的方法：

```
private async Task doSearch() {

} 
```

# amazon-web-services - Apache 响应缓慢，但 CPU 和内存未达到最大值

> ID：13650790
> 
> 赞同：3
> 
> 时间：2012-11-30T18:12:41.693
> 
> 标签：amazon-web-services, apache

**问题**

2`apache`台服务器的响应时间很长，但我没有看到 CPU 或内存达到最大值。

**细节**

我有 2 `apache`台服务器为客户端提供静态内容。

*   这个网站有很多流量。
*   在高流量时，我每秒有大约 10 个请求（html、css、js、图像）。
*   每个 HTML 向服务器发出 30 个其他请求以加载 js、css 和图像。
*   Safari 开发者工具显示，每次我点击一个 html 页面时，都会传输 2MB
*   这两个服务器正在运行`Amazon Web Service`
*   两个实例都是 m1.large (2 CPUS, 7.5 RAM)
*   我在同一台服务器上提供图像
*   服务器在美国，但很多流量来自欧洲

**我试过了**

*   从 prefork 变为 worker
*   增加进程
*   增加线程
*   增加超时

我正在使用`ab`(apachebench) 运行基准测试，但没有看到任何改进。

**我的问题是：**

*   提供图像和像js（400k）这样的大型资源是否可能会减慢服务器的速度？
*   是否有可能每台服务器每秒 5 个请求只是过多的流量并且我无法进行调整，所以唯一的解决方案是添加更多服务器？
*   `amazon web services`带宽有问题吗？

## 新信息

**正在从 GlusterFS 上的挂载目录中读取我的文件**

使用 ab (apache bench) 收集的指标在同一网络上的 EC2 实例上运行

```
Connections: 500
Concurrency: 200

Server with files on mounted directory (files on glusterfs)
    Request per second: 25.26
    Time per request: 38.954
    Transfer rate: 546.02

Server without files on mounted directory (files on local storage)
    Request per second: 1282.62
    Time per request: 0.780
    Transfer rate: 27104.40 
```

## 新问题

**从挂载目录（NFS 或 GlusterFS）读取资源（htmls、js、css、图像）是否可能会*显着*降低 Apache 的性能？**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:33:09.997

提供大型静态资源绝对有可能（并且确实很可能）会降低您的服务器速度。在下载这些内容中的每一个的整个过程中，您都必须打开 Apache 工作线程。文件越大，下载的时间越长，您需要保持线程打开的时间越长。在达到为 Apache 设置的任何类型的内存限制之前，您可能已经达到最大线程限制。

首先，我建议将您的所有静态内容从您的服务器上移到 Cloudfront 或类似的 CDN 中。这将使您的 Web 服务器只需要担心主要的 Web 请求。这可能会使每秒请求数（以及相关的打开 Apache 线程数）从 10 个请求/秒降低到 0.3 个请求/秒（基于主要请求与次要内容请求的 30:1 比率）。

将您服务的请求数量减少一个数量级以上肯定会提高服务器性能，并且可能允许您减少到单个服务器（或者如果您仍然需要多个服务器 - 这是一个好主意）可能会减少你的服务器。

您会发现基本上所有大容量网站的一个共同点是，它们将提供静态内容的业务留给了 CDN。一旦你达到了成为一个大容量站点的地步，你必须绝对考虑这一点（或者至少使用 Nginx、Lighty 或其他一些比 Apache 更适合提供静态内容的 Web 服务器提供来自不同服务器的静态内容）。

卸载静态流量后，您可以真正开始考虑调整 Web 服务器以处理主要请求。当你达到这一点时，你需要知道一些事情：

*   单个请求线程的平均内存使用量
*   您分配给 Apache 的内存量（如果这是专用的 Apache 服务器，可能是整个实例内存的 70-80%）
*   应用程序响应请求的平均时间

基于此，这是一个非常简单的公式，可以作为调整最大线程设置的良好起点。

假设您有以下内容：

```
Apache memory: 4000KB
Avg. thread memory: 20KB
Avg. time per request: 0.5 s 
```

这意味着您的配置可以按如下方式处理请求吞吐量：

```
100 requests/second = 4000kb / (20kb * 0.5 seconds/request ) 
```

由于每个请求平均为 0.5 秒，您可以假设您需要 50 个线程来处理此吞吐量。

显然，您可能希望将最大线程数设置为高于 50 以解决请求峰值等问题，但至少这为您提供了一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:19:09.360

1.  尝试启动/停止实例。这会将您转移到其他主机。如果您的实例所在的主机有任何问题，那将减轻它。
2.  除了检查系统负载数之外，还要查看内存使用情况、IO 和 CPU 使用情况。
3.  查看您的系统日志，看看是否有任何东西产生了可以解释当前情况的错误。

结帐 Eric J. 在此线程中回答[Amazon EC2 Bitnami Wordpress 极慢](https://stackoverflow.com/questions/11302739/amazon-ec2-bitnami-wordpress-extremely-slow)

# perl - 从 Perl 中的一段文本中提取一个人的全名？

> ID：13650795
> 
> 赞同：3
> 
> 时间：2012-11-30T18:12:59.550
> 
> 标签：perl, parsing, nlp, cpan, named-entity-recognition

我需要使用 Perl 从文本块中提取名称（包括不常见的名称）。我研究了[这个](http://search.cpan.org/~dbourget/Text-Names-0.19/lib/Text/Names.pm)模块来提取名字，但它只有 1990 年以来美国最受欢迎的 1000 个名字和姓氏；我需要一些更全面的东西。

我曾考虑使用社会保障指数来建立一个数据库进行比较，但这似乎非常繁琐且处理密集。有没有办法使用另一种方法从 Perl 中提取名称？

要解析的文本示例：

> **LADNIER** Louis Anthony Ladnier，[Louie] 48 岁，来自阿拉巴马州莫比尔，于 2012 年 11 月 16 日星期五在家中去世。
> 路易 1964 年 1 月 9 日出生于阿拉巴马州莫比尔。他是 John E. Ladnier, Sr. 和 Gloria Bosarge Ladnier 的儿子。他毕业于 McGill-Toolen 高中，并就读于南阿拉巴马大学。他一直受雇于 Bayou La Batre 警察局担任通讯主管，直至医疗退休。
> 他的父亲约翰先于他去世。他的母亲格洛丽亚、侄子多米尼克拉德尼尔和克里斯蒂安卢比奥幸存下来，他深爱并帮助抚养他们成为自己的儿子、姐妹 Marj Ladnier 和 Morgan Gordy [Julian]，以及兄弟 Eddie Ladnier [Cindy]，以及侄子 Jamie，乔伊、埃迪、威尔、本和侄女、安娜和伊丽莎白。
> 追悼会将于周三下午 1 点在莫比尔的圣多米尼克天主教堂举行。
> 宁静殡仪馆负责安排。
> 代替鲜花，可将纪念物寄至 St. Dominic Sc​​hool, 4160 Burma Road Mobile, AL 36693, education fund for Christian Rubio and McGill-Toolen High School, 1501 Old Shell Road Mobile, AL 36604, education Fund for Dominic Ladnier。
> 家人感谢这段时间的所有祈祷和支持。路易对我们所有人来说都是一块石头和快乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T22:12:21.653

Use Stanford's NER (GPL). Demo:

[http://nlp.stanford.edu:8080/ner/process](http://nlp.stanford.edu:8080/ner/process)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:38:14.777

由于英语的性质，没有确定的方法可以做到这一点。您要么需要列表来（模糊）比较，要么必须接受重大的准确性惩罚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T13:52:09.700

Apache 基金会有几个项目涵盖了实体提取主题，这些项目使用特定的预训练英文名称模型 (nameFinder)。我会推荐 openLNP 或 Stanbol。同时，如果您只有几个查询，我在[http://www.augmentedintel.com/apps/csharpnlp/extract-names-from-text.aspx](http://www.augmentedintel.com/apps/csharpnlp/extract-names-from-text.aspx)的应用程序部分中使用 C# 实现了 NLP 。

最好的，

大学教师

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:56:22.250

您正在尝试实现[命名实体识别](https://en.wikipedia.org/wiki/Named_entity)。坏消息是这*真的*很难。您可以尝试[Lingua::EN::NamedEntity](https://metacpan.org/module/Lingua::EN::NamedEntity)，但是：

```
$ perl -MLingua::EN::NamedEntity -nE 'say $_ for map { $_->{class} eq "person" ? $_->{entity} : () } extract_entities($_)' names.txt 
Louie
Louis Anthony Ladnier
Louie
John E
Bayou La Batre Police Department
Gloria
Julian
Cindy
Eddie Ladnier
Eddie
John
Catholic Church
Christian Rubio
Dominic Ladnier
Burma Road Mobile
Louie 
```

您还可以使用[Calais](http://viewer.opencalais.com/)，这是一个用于自然语言处理的路透社网络服务，它提供了更好的结果：

![calais](../Images/f09a78e62ca45dd56beed4dc4e4b72e7.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T21:20:10.723

我想你想谷歌这样的东西：

```
perl part of speech tagging 
```

# ruby-on-rails - 从数据行中堆叠具有 id 的列对

> ID：13650804
> 
> 赞同：3
> 
> 时间：2012-11-30T18:13:42.593
> 
> 标签：ruby-on-rails, ruby, excel, sorting, vba

您好我正在尝试对产品及其属性进行排序，但问题是属性的标题不是基于产品的名称和描述。所以例如我有：

```
Product id | attribute 1 name | attribute 1 desc | attribute 2 name | attribute 2 desc
1001       | screen size      | 15"              | DCR              | 10,000:1
1002       | DCR              | 200,000:1        | Widescreen       | yes 
```

这一行一直持续到产品有多少属性。

我需要的是会吐出的东西：

```
Product id, attribute 1 name, attribute 1 desc
Product id, attribute 2 name, attribute 2 desc 
```

所以它看起来像这样：

```
1001, screen size, 15"
1001, DCR, 10,000:1
1002, DCR, 200,000:1
1002, widescreen, yes 
```

有谁知道对这些信息进行排序的最佳方法是什么？

我一直在尝试一些 excel vba 脚本，但我想知道是否有办法用 ruby​​ 来做这件事，因为这就是我现在正在学习的东西，这将是一个很好的现实世界的例子来深入研究 ruby​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:54:06.560

您可以通过将属性分离到它们自己的模型中来大大简化此过程。

应用程序/模型/product_attribute.rb

```
class ProductAttribute < ActiveRecord::Base
  attr_accessible :name, :desc, :product_id
  belongs_to :product
  #...
end 
```

应用程序/模型/product.rb

```
class Product < ActiveRecord::Base
  # ...
  has_many :product_attributes
  # ...

  def self.sorted_attributes
    Product.all.collect{|prod| prod.sorted_attributes}
  end      

  def sorted_attributes
    product_attributes.all(order: "name ASC").collect{|attr| [self.id, attr.name, attr]}
  end
end 
```

然后，您将能够通过调用 Product.sorted_attributes 并编写视图代码来获得所需的信息以显示生成的二维数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T00:27:35.873

这是约翰·布斯托斯在评论中提到的内容的充实版本。

我正在使用此示例数据（[此处为完整工作簿](https://dl.dropboxusercontent.com/u/10791482/SO_StackingPairsOfCols.xlsm)）

![样本数据](../Images/3f007ac20b66ed1fd66dab68d063c6de.png)

这个想法是使用 VBA 循环遍历成对的列，并将它们输出到一个又长又瘦的表中。

```
Sub MakeSkinny()
    Dim rng As Range
    Dim clOutput As Range
    Dim cl As Range

    Set rng = Range("A3").CurrentRegion ' raw data'
    Set clOutput = Range("A9") ' Where to output results'

    Set cl = clOutput
    ' Add headers to the new table'
    cl.Offset(0, 0).Value = "Item"
    cl.Offset(0, 1).Value = "Attribute"
    cl.Offset(0, 2).Value = "Value"
    Set cl = cl.Offset(1, 0) ' go to the next row of output'

    For i = 2 To rng.Rows.Count
        iCol = 2 ' Start at column 2'
        Do Until iCol >= 7 ' set to however many cols you have'
            'Check for blank attribute name'
            If rng.Cells(i, iCol) <> "" Then
                cl.Offset(0, 0) = rng.Cells(i, 1) ' Item ID'
                cl.Offset(0, 1) = rng.Cells(i, iCol) ' Attribute Name'
                cl.Offset(0, 2) = rng.Cells(i, iCol + 1) ' Attribute Value'
                Set cl = cl.Offset(1, 0) ' go to the next row of output'
            End If
            iCol = iCol + 2 'Advance to next set of attributes'
        Loop
    Next i
End Sub 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T00:57:52.303

谢谢您的帮助。其实我前一阵子就想通了。我只是对 lineemup 宏做了一些细微的调整

```
Sub lineemupSAS()

Dim i As Long

Dim dr As Long

For i = 2 To Cells(2, Columns.Count).End(xlToLeft).Column Step 2

dr = Cells(Rows.Count, 1).End(xlUp).Row + 1

Cells(2, 1).Resize(6500).Copy Cells(dr, 1)

Cells(2, i).Resize(6500).Copy Cells(dr, 2)

Cells(2, 1 + i).Resize(6500).Copy Cells(dr, 3)

Next i

End Sub 
```

其中 6500 表示数据集中的行数。

# php - 哪一个是更好的复合 pk 或在黑名单设计中使用自然键

> ID：13650807
> 
> 赞同：1
> 
> 时间：2012-11-30T18:13:58.297
> 
> 标签：php, mysql, composite-primary-key

我将在 php 列表中设计我的黑名单和收藏夹，用户可以将其列入黑名单和收藏其他人，现在我只想知道这样设计是否更好

```
+-----+------+------------+
| uid(pk) | name | family |
+-----+------+------------+ 
```

和另一个像这样的表，它是复合主键

```
+-----+------+------------------------+
| uid(pk) | blacklisted_person_id(pk) |
+-----+------+------------------------+ 
```

或在其中包含主键和外键的设计，在这种情况下我不知道如何设计用户不能将自己列入黑名单或将某人列入黑名单 2 次。如果有人能描述一下，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:16:56.283

您的解决方案很好，但我建议您只在您的用户表中调用您的 PK，`id`然后`uid`在您的映射黑名单表中将其称为`user_id`（如果用户是用户表的名称）和`blacklisted_user_id`. 这样一来，这些单独的列是哪个表的外键就没有歧义了。

它是一个很好的解决方案的原因是它可以防止输入重复项，而无需创建额外的唯一复合键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:33:40.900

我认为您在标题中使用的术语令人困惑，并且与您稍后在问题中描述的内容不符。

1.  始终使用人工键并尽量避免使用自然键。这是一个很好的做法，因为您几乎永远不知道以后必须更改哪些数据，这可能会影响您的自然密钥。

`| uid(pk) | name | family |`

上面的设计是一个好的开始。

1.  在不牺牲数据一致性的情况下，尽可能少地限制数据模型。

在这种情况下，复合键的`UID, black_listed_ID`限制可能有点过于严格，原因是稍后您可能决定保留谁在不同时间将谁列入黑名单的日志，那么您的复合键设计就会中断。

现在只使用简单的一对多关系，描述一个用户对多条记录的偏好。

例如，可以包括黑名单、白名单等的用户操作的数据模型可以是这样的：

`UID, AFFECTED_USER_ID, ACTION_ID, ACTION_DT`

其中 ACTION_ID 是描述黑名单、白名单、灰名单等的“ACTION 查找表”的 FK。

您还可以拥有描述当前事务状态的表，但也可以从上述数据中计算或检索当前状态。

# sed - sed 换行错误信息

> ID：13650812
> 
> 赞同：-1
> 
> 时间：2012-11-30T18:14:24.743
> 
> 标签：sed, edit

我有一个需要更改的配置文件（再次），该行是

```
set wrapper_code=C:\windows\drivers\cache 
```

我需要将其更改为

```
set wrapper_code=/home/harry/solo/run 
```

我写

```
cat Proxy.bat | sed -i.bk -e 's/\(^set wrapper_home\=\).*/\/home/'1${dbuser}'/gateway/service\'  Proxy.bat 
```

我收到一条错误消息

```
sed: -e expression #1, char 37: unknown option to `s' 
```

我的代码字符串有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:23:09.443

如果您使用`/`的模式分隔符是`sed`，则必须转义字符串（路径）中的斜杠。为避免这种情况，请使用不同的分隔符：

```
sed -i.bk -e 's%\^set wrapper_code=C:\\windows\\drivers\\cache%set wrapper_code=/home/harry/solo/run%'  Proxy.bat 
```

您还必须转义反斜杠，因为它们在`sed`.

`cat`部分没用。

# iphone - UISegmentedControl backgroundImageForState 不返回我的图像

> ID：13650814
> 
> 赞同：3
> 
> 时间：2012-11-30T18:14:33.600
> 
> 标签：iphone, objective-c, uisegmentedcontrol, uiappearance

我`UIApperance`用来在我的 中设置背景图像`UISegmentedControl`，如下所示：

```
[[UISegmentedControl appearance] setBackgroundImage:normalBackgroundImage
                                           forState:UIControlStateNormal 
                                         barMetrics:UIBarMetricsDefault];

[[UISegmentedControl appearance] setBackgroundImage:selectedBackgroundImage 
                                           forState:UIControlStateSelected 
                                         barMetrics:UIBarMetricsDefault]; 
```

但是，我的图像高于标准`UISegmentedControl`尺寸。所以稍后，我试图获取控件的背景图像，以便调整控件的大小，如下所示：

```
UIImage *imageForHeight = [self.segmentedControl 
                                backgroundImageForState:UIControlStateNormal 
                                             barMetrics:UIBarMetricsDefault]; 
```

这个方法调用返回`nil`，我无法弄清楚为什么。该控件实际上是使用我放入的图像`UIAppearance`。有谁知道为什么这种方法不返回我的图像，或者以不同的方式将背景图像从分段控件中取出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T05:04:31.130

您在外观代理上设置图像，但试图从实例中获取它。尝试在实例本身上设置图像，它应该可以工作。

如果您需要使用代理（比如超过 1 个控件），我建议您事先计算图像大小并调整框架。

# java - 获取选定的分享意图

> ID：13650824
> 
> 赞同：1
> 
> 时间：2012-11-30T18:15:36.973
> 
> 标签：java, android, facebook, android-intent, share

我正在使用以下代码通过 gmail、facebook、twitter 等分享一些文本：

```
 Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_TEXT, "The status update text");
startActivity(Intent.createChooser(intent, "Dialog title text")); 
```

问题是我想检查选择的意图是否是`Facebook`，如果是，我会做一些其他的编码，而不是像往常一样提示共享意图。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:40:15.893

我刚刚找到以下链接：[http ://clickclickclack.wordpress.com/2012/01/03/intercepting-androids-action_send-intents/](http://clickclickclack.wordpress.com/2012/01/03/intercepting-androids-action_send-intents/)

它描述了如何执行此类任务，您需要做的就是创建一个行布局，然后就完成了。我试过了，效果很好！

**编辑：**函数 中的文章有错误`show`，应该是以下内容：

`final ShareIntentListAdapter adapter = new ShareIntentListAdapter((Activity)context, R.layout.basiclistview, activities.toArray());`

感谢@imram khan 提到这一点。

如果有人想使用我的 xml 行布局：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <TextView android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:textSize="20sp"
    android:gravity="center"
    android:layout_alignParentRight="true"
    android:layout_marginRight="50dp"
/>

    <ImageView android:id="@+id/logo2"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:padding="10dp"
    android:src="@drawable/number1"
    android:layout_gravity="center_vertical"
    android:layout_alignParentRight="true"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T16:49:47.610

有同样的问题，想要检测 facebook 共享选项并采用不同的逻辑路径（主要是因为通过常规 android 共享的 facebook 共享是有限的）

我的解决方案

```
public void shareIt(View view){
    //sharing implementation
    List<Intent> targetedShareIntents = new ArrayList<Intent>();
    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    String shareBody = "string of text " + txt_var + " more text! Get the app at http://someapp.com";

    PackageManager pm = view.getContext().getPackageManager();
    List<ResolveInfo> activityList = pm.queryIntentActivities(sharingIntent, 0);
    for(final ResolveInfo app : activityList) {

         String packageName = app.activityInfo.packageName;
         Intent targetedShareIntent = new Intent(android.content.Intent.ACTION_SEND);
         targetedShareIntent.setType("text/plain");
         targetedShareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "share");
         if(TextUtils.equals(packageName, "com.facebook.katana")){
             targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, "http://someurl.com");
         } else {
             targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareBody);
         }

         targetedShareIntent.setPackage(packageName);
         targetedShareIntents.add(targetedShareIntent);

    }

    Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Share Idea");

    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));
    startActivity(chooserIntent);

} 
```

这在此 Q 和 A 中列出 [根据他们选择共享的方法来分支 Android Share Intent 额外内容](https://stackoverflow.com/questions/14450867/branching-the-android-share-intent-extras-depending-on-which-method-they-choose)

# c++ - 整数读取是否需要受临界区保护？

> ID：13650829
> 
> 赞同：10
> 
> 时间：2012-11-30T18:16:01.933
> 
> 标签：c++, winapi, concurrency, critical-section

我遇到了 C++03 一些采用这种形式的代码：

```
struct Foo {
    int a;
    int b;
    CRITICAL_SECTION cs;
}

// DoFoo::Foo foo_;

void DoFoo::Foolish()
{
    if( foo_.a == 4 )
    {
        PerformSomeTask();

        EnterCriticalSection(&foo_.cs);
        foo_.b = 7;
        LeaveCriticalSection(&foo_.cs);
    }
} 
```

`foo_.a`是否需要保护读取？例如：

```
void DoFoo::Foolish()
{
    EnterCriticalSection(&foo_.cs);
    int a = foo_.a;
    LeaveCriticalSection(&foo_.cs);

    if( a == 4 )
    {
        PerformSomeTask();

        EnterCriticalSection(&foo_.cs);
        foo_.b = 7;
        LeaveCriticalSection(&foo_.cs);
    }
} 
```

如果是这样，为什么？

请假设整数是 32 位对齐的。平台是ARM。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T18:19:46.337

技术上是的，但在许多平台上都没有。首先，让我们假设它`int`是 32 位（这很常见，但几乎不是通用的）。

`int`可能会分别读取或写入32 位的两个字（16 位部分） 。`int`在某些系统上，如果没有正确对齐，它们将被单独读取。

想象一个系统，您只能执行 32 位对齐的 32 位读取和写入（以及 16 位对齐的 16 位读取和写入），并且`int`跨越这样的边界。最初`int`是零（即`0x00000000`）

一个线程写入`0xBAADF00D`，`int`另一个“同时”读取它。

写入线程首先`0xBAAD`写入`int`. 阅读器线程然后读取整个`int`（高和低）获取`0xBAAD0000`- 这是一个`int`从未被故意放入的状态！

然后写入器线程写入低位字`0xF00D`。

如前所述，在某些平台上，所有 32 位读/写都是原子的，所以这不是问题。然而，还有其他担忧。

大多数锁定/解锁代码都包含对编译器的指令，以防止跨锁重新排序。如果没有防止重新排序，编译器可以自由地重新排序，只要它在单线程上下文中表现得“好像”，它就会以这种方式工作。因此，如果您在代码中阅读`a`then `b`，编译器可以在 read`b`之前阅读`a`，只要它没有看到`b`在该时间间隔内进行修改的线程内机会。

因此，您正在阅读的代码可能正在使用这些锁来确保变量的读取按照代码中写入的顺序发生。

下面的评论中提出了其他问题，但我觉得没有能力解决它们：缓存问题和可见性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:33:46.850

从[这个](http://en.wikipedia.org/wiki/Memory_ordering)角度来看，arm 似乎具有相当宽松的内存模型，因此您需要一种内存屏障形式来确保一个线程中的写入在您期望它们在另一个线程中时是可见的。所以你在做什么，或者在你的平台上使用 std::atomic 似乎是必要的。除非您考虑到这一点，否则您可能会在不同的线程中看到无序更新，这会破坏您的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T18:20:20.440

我认为您可以使用 C++11 来确保整数读取是原子的，使用 (例如) `std::atomic<int>`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T19:45:32.877

C++ 标准规定，如果一个线程写入一个变量的同时另一个线程从该变量读取，或者如果两个线程同时写入同一个变量，则存在数据竞争。它进一步说数据竞争会产生未定义的行为。因此，正式地，您**必须**同步这些读取和写入。

当一个线程读取另一个线程写入的数据时，会出现三个不同的问题。首先，存在撕裂：如果写入需要多个总线周期，则可能在操作过程中发生线程切换，而另一个线程可能会看到写入一半的值；如果读取需要多个总线周期，则会出现类似的问题。其次，可见性：每个处理器都有自己最近处理的数据的本地副本，写入一个处理器的缓存并不一定会更新另一个处理器的缓存。第三，有编译器优化，以在单个线程中可以接受的方式重新排序读取和写入，但会破坏多线程代码。线程安全代码必须处理**所有这三个**问题。这就是同步原语的工作：互斥体、条件变量和原子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T18:27:50.287

尽管整数读/写操作确实很可能是原子的，但如果您没有正确执行，编译器优化和处理器缓存仍然会给您带来问题。

解释一下 - 编译器通常会假设代码是单线程的，并进行许多依赖于此的优化。例如，它可能会改变指令的顺序。或者，如果它看到变量只被写入而从不被读取，它可能会完全优化它。

CPU 还将缓存该整数，因此如果一个线程写入它，另一个线程可能要到很久以后才能看到它。

你可以做两件事。一种是像原始代码一样包含在关键部分中。~~另一种是将变量标记为`volatile`。这将向编译器发出信号，表明该变量将被多个线程访问，并将禁用一系列优化，以及在访问变量周围放置特殊的缓存同步指令（又称“内存屏障”）（或者我理解）。~~显然这是错误的。

**补充：**另外，正如另一个答案所指出的，Windows 具有`Interlocked`可用于避免非`volatile`变量的这些问题的 API。

# android - 在 ViewPager 中更改片段 (Android 4.2)

> ID：13650831
> 
> 赞同：0
> 
> 时间：2012-11-30T18:16:20.967
> 
> 标签：android, user-interface

我想更改位于 3 列 ActionBar 下方的 ViewPager 中的片段（我在新向导中选择了标准的 3 列启动项目）。我研究了整个stackoverflow，找不到一个好的解决方案......

基本上我有 3 个屏幕 AB C。在屏幕 BI 上想要实现一个按钮来切换到另一个页面：

1) ABC 2) AXC

使用新的 Android API 应该有一种简单的方法（嵌套片段）吗？请帮助提供一个小代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:37:48.673

在布局中使用 ViewFlipper [http://developer.android.com/reference/android/widget/ViewFlipper.html 。](http://developer.android.com/reference/android/widget/ViewFlipper.html)

```
<ViewFlipper>
   <LinearLayout1/>
   <LinearLayout2/>
</ViewFlipper> 
```

onButtonClick 你可以调用

```
viewFlipper.ShowNext();
viewFlipper.ShowPrevious(); 
```

您还可以在页面转换时添加动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:20:41.080

您可以在按钮单击侦听器内的 viewPager 对象上使用 setCurrentItem 方法：

```
myViewPager.setCurrentItem(2); // integer 2 is a page number which is your fragment 
```

# ip - 如何在 VxWorks 中验证网络设备是否具有 IP 地址

> ID：13650832
> 
> 赞同：4
> 
> 时间：2012-11-30T18:16:28.050
> 
> 标签：ip, vxworks

我正在尝试验证设备上的以太网设备是否正常工作。我正在运行命令：

```
ifconfig("interfaceName dhcp") 
```

对于每个以太网接口。

我还想做的是验证每个设备是否也有一个 IP 地址。我知道我可以自己运行“ifconfig”并查看输出，但我正在编写自动化测试代码。那么有没有一个函数可以返回VxWorks中特定接口的ip地址呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T19:42:01.117

我相信 ifLib.h 中的 ifAddrGet() 可能是您正在寻找的。第一个参数采用接口名称，第二个参数采用缓冲区，地址将返回到该缓冲区。

我没有在实际目标上测试以下内容，但它应该是您需要的开始：

```
#include <stdlib.h>
#include <stdio.h>
#include "inetLib.h"
#include "ifLib.h"

void print_if_address (void);

void print_if_address ()
{
    char if_name[] = "dhcp";
    char ip_address[INET_ADDR_LEN] = {0};

    ifAddrGet (if_name, ip_address);

    printf ("%s\n", ip_address);
} 
```

# android - ICS httppost NullPointerException

> ID：13650835
> 
> 赞同：0
> 
> 时间：2012-11-30T18:16:39.237
> 
> 标签：android, nullpointerexception, http-post, android-4.0-ice-cream-sandwich

尝试访问远程数据库时遇到问题。此问题仅在 ICS 或更高版本上出现，但在旧版 Android 上运行良好。我一生都无法弄清楚这一点，并且已经坚持了好几个星期。我真的需要弄清楚这一点，这样我就可以在我的另一个更重要的应用程序中使用这里的解决方案。

任何帮助将不胜感激。如果需要更多信息，请告诉我。

现在该应用程序甚至无法启动，启动时获得以下信息：

```
11-30 15:42:46.970: W/dalvikvm(10028): threadid=1: thread exiting with uncaught exception (group=0x40d04210)
11-30 15:42:46.970: E/AndroidRuntime(10028): FATAL EXCEPTION: main
11-30 15:42:46.970: E/AndroidRuntime(10028): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.defsoftsol.db.check/com.defsoftsol.db.check.MainActivity}: java.lang.NullPointerException
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.os.Looper.loop(Looper.java:137)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.main(ActivityThread.java:4428)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.reflect.Method.invokeNative(Native Method)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.reflect.Method.invoke(Method.java:511)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at dalvik.system.NativeStart.main(Native Method)
11-30 15:42:46.970: E/AndroidRuntime(10028): Caused by: java.lang.NullPointerException
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.Activity.findViewById(Activity.java:1794)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at com.defsoftsol.db.check.MainActivity.<init>(MainActivity.java:43)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.Class.newInstanceImpl(Native Method)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at java.lang.Class.newInstance(Class.java:1319)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-30 15:42:46.970: E/AndroidRuntime(10028):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
11-30 15:42:46.970: E/AndroidRuntime(10028):    ... 11 more 
```

更新的代码：（现在是整个应用程序的代码）

```
public class MainActivity extends Activity {

String deviceID="",dateStamp="",buff="",db_id="",db_device_id="",db_install_date="";       
byte[] data;    
HttpPost httppost;    
StringBuffer buffer;    
HttpResponse response;    
HttpClient httpclient;    
InputStream inputStream;    
List<NameValuePair> nameValuePairs;
int ID,activeinstalls;
long diff;
TableLayout tl=(TableLayout)findViewById(R.id.db_data);

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button refresh = (Button)findViewById(R.id.btnrefresh);
    refresh.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            new MyAsyncTask(MainActivity.this).execute();

        }
    });
}

@SuppressWarnings("unused") 
public class MyAsyncTask extends AsyncTask<Void, Void, Void> 
{ 

    ProgressDialog mProgressDialog;
    private Context context;

    public MyAsyncTask(Context context) { 
        this.context = context;
    }

    @Override
    protected void onPostExecute(Void result) {
        mProgressDialog.dismiss();
    } 

    @Override 
    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(MainActivity.this, "Loading...", "Data is Loading..."); 
    } 

    @Override
    protected Void doInBackground(Void... params) {
        update(); 
        return null; 
    }
}

private final SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd"); 
private final long ONE_DAY = 24 * 60 * 60 * 1000;

@SuppressWarnings("unused")
public void update()
{
    int activeinstalls = 0;
    Date now = new Date();
    dateStamp = formatter.format(now);

    runOnUiThread(new Runnable(){ 
        @Override 
        public void run(){ 
            UISetup();
        }
    });

    ID = 1;
    try
    {
        do
        {
            try 
            {                    
                httpclient = new DefaultHttpClient();                    
                httppost = new HttpPost("http://#.#.#.#/***.php"); //Address cut for server security                    

                nameValuePairs = new ArrayList<NameValuePair>(1);                   
                nameValuePairs.add(new BasicNameValuePair("_id", String.valueOf(ID)));                    
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                response = httpclient.execute(httppost);                    
                inputStream = response.getEntity().getContent();                     
                data = new byte[256];                     
                buffer = new StringBuffer();                    
                int len = 0;                    
                while (-1 != (len = inputStream.read(data)) )                    
                {                        
                    buffer.append(new String(data, 0, len));                    
                }
                inputStream.close();
            } catch (Exception e) {                    
                Toast.makeText(MainActivity.this, "error"+e.toString(), Toast.LENGTH_LONG).show();                
                e.printStackTrace();
            }

            if(buffer.charAt(0)=='Y')
            {
                ID++;
                buff = buffer.toString();
                db_id = buff.substring(1, buff.indexOf("."));
                db_device_id = buff.substring(buff.indexOf(".")+1, buff.indexOf(","));
                db_install_date = buff.substring(buff.indexOf(",")+1, buff.length());

                Date before = null;
                try {
                    before = (Date)formatter.parse(db_install_date);
                } catch (ParseException e) {
                    e.printStackTrace();
                }
                diff = now.getTime() - before.getTime(); 

                runOnUiThread(new Runnable(){ 
                    @Override 
                    public void run(){ 
                        UIAdd(diff,db_id,db_device_id,db_install_date);
                    }
                });

            } else { //IF buffer returns N
                //  TODO: Fill in
            }
        } while(buffer.charAt(0)=='Y');

        UIFinish();

    } catch(Exception err) {
        err.printStackTrace();
    }
}
@SuppressWarnings("deprecation")
public void UISetup()
{
    tl.removeAllViews();
    dbline();
    TableRow titr = new TableRow(this); 
    titr.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
    TextView dbid0 = new TextView(this); 
    TextView dbdevid0 = new TextView(this);
    TextView dbindate0 = new TextView(this);
    dbid0.setText("|   " + "_id");
    dbdevid0.setText("|   " + "device_id");
    dbindate0.setText("|   "+ "install_date"+"    |");

    titr.addView(dbid0); 
    titr.addView(dbdevid0);
    titr.addView(dbindate0);
    tl.addView(titr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    dbline();
}
@SuppressWarnings("deprecation")
public void UIAdd(long diffr, String dbidn,String did,String idate)
{
    long days;
    days = diffr / ONE_DAY;
    TableRow tr = new TableRow(this); 
    tr.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
    TextView dbid = new TextView(this); 
    TextView dbdevid = new TextView(this);
    TextView dbindate = new TextView(this);
    dbid.setText("|   " + dbidn);
    dbdevid.setText("|   " + did);
    dbindate.setText("|   " + idate+"   |");

    if(days <= 7)
    {
        activeinstalls++;
        if(days <= 3) 
        {
            dbid.setTextColor(Color.GREEN); 
            dbdevid.setTextColor(Color.GREEN);
            dbindate.setTextColor(Color.GREEN);
        } else {
            dbid.setTextColor(Color.MAGENTA);
            dbdevid.setTextColor(Color.MAGENTA);
            dbindate.setTextColor(Color.MAGENTA);
        }

    } else {
        dbid.setTextColor(Color.RED); 
        dbdevid.setTextColor(Color.RED);
        dbindate.setTextColor(Color.RED);
    }

    tr.addView(dbid); 
    tr.addView(dbdevid);
    tr.addView(dbindate);
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
}
public void UIFinish()
{
    dbline();

    TextView te = (TextView)findViewById(R.id.totalentries);
    te.setText(String.valueOf(ID-1));
    TextView au = (TextView)findViewById(R.id.activeusers);
    au.setText(String.valueOf(activeinstalls));
}
@SuppressWarnings("deprecation")
public void dbline()
{
    TableLayout tl=(TableLayout)findViewById(R.id.db_data);
    TableRow tr = new TableRow(this); 
    tr.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
    TextView dbid = new TextView(this); 
    TextView dbdevid = new TextView(this);
    TextView dbindate = new TextView(this);
    dbid.setText("+---------");
    dbdevid.setText("+-------------------------------");
    dbindate.setText("+--------------------+");

    tr.addView(dbid); 
    tr.addView(dbdevid);
    tr.addView(dbindate);
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:04:03.790

您在 try 块中得到一个异常，并且不初始化缓冲区。这就是你得到 Null 指针的原因。

你应该把所有东西都放在 try-catch 中。或者更好地考虑如何处理它。

而且，您还应该从控制台中的 try catch 中输出错误。并展示给我们。我们可以看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:21:13.417

尝试使结构像这样

```
public class MyAsyncTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        // Do network oprations here
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        // Update UI here
        super.onPostExecute(result);
    }

} 
```

# kml - GE 7.0.1.8244 中的 ALTITUDE_CLAMP_TO_GROUND 错误

> ID：13650836
> 
> 赞同：1
> 
> 时间：2012-11-30T18:16:41.090
> 
> 标签：kml, google-earth

我想我在 GE V7.0.1.8244 中发现了一个错误。我创建了一个 KML 路线文件并将其显示为`setAltitudeMode`设置为`ALTITUDE_CLAMP_TO_GROUND`. 在 GE V6.2.2.6613 中它显示正确，但在 V7.0.1.8244（当前为测试版）中却没有。相同的程序源，相同的数据。在此处查看附图：

![http://www.gtrek.co.uk/ge.jpg](../Images/7757c132248999dcfbdb1fc5f4d33812.png).

除了安装其他版本的 GE 之外，还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:48:00.983

这显然是 GE 7.0 中的一个错误。KML 测试文件中的一些元素出现故障，但不会导致此问题。即使您降低高度值并将altitudeMode更改为*relativeToGround*，它也会变得更糟而不是更好。DirectX 或 OpenGL 模式都没有区别。

您可以在此处报告问题以获取有关问题的任何更新： [http ://code.google.com/p/earth-issues/issues/list](http://code.google.com/p/earth-issues/issues/list)

可能是高程数据中的错误。如果您靠近路径缩放，您也可以在[示例线示例](http://kml-samples.googlecode.com/svn/trunk/kml/Placemark/LineString/tessellate.kml)中看到此错误。

如果要正确查看此 KML，只有短期修复会恢复到 GE 6.2.2，否则，请等待修复。

[更新：可以在此处](http://code.google.com/p/earth-issues/issues/detail?id=1503)找到 Google 地球问题跟踪器中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:08:37.583

它看起来确实像一个错误，而不是降级，尽管您可以考虑使用其中一个[Google 地球扩展](https://developers.google.com/kml/documentation/kmlreference#kmlextensions)- 特别是`gx:altitudeOffset`元素。从文档...

> Google 扩展命名空间中的 KML 扩展，用于修改高度值的呈现方式。此偏移量允许您将整个线性环作为一个单元向上或向下移动，而无需修改构成线性环的所有单个坐标值。（虽然 LinearRing 使用高度偏移值显示，但原始高度值保留在 KML 文件中。）单位为米。

这应该允许您将路径抬高一米，以免发生剪裁。还值得注意的是...

> 在 Google 地球中，带有 clampToGround 的 Polygon 遵循恒定方位线；但是，带有clampToGround 的LinearRing（单独）遵循大圆线。

因此，也许您需要调整路径以解决这种差异？

# c++ - 将 DLL 链接到 LIB 的未解决的外部符号错误

> ID：13650838
> 
> 赞同：2
> 
> 时间：2012-11-30T18:16:59.440
> 
> 标签：c++, linker-errors, lnk2019

我的 C++ 解决方案（VS2012）中有一个 LNK2019。我有以下内容：

*   带有`class Matrix {...}`内部的静态 .lib
*   将使用此 .lib 的 dll。我已经在 gui 中设置了一个项目引用，我可以看到链接器下的“命令行”属性页上列出了 .lib。

我把下面的简单代码放在一起

```
void Test()
{
    Matrix m(10,10);
    int z = m.Rows();
} 
```

这会生成一个 LNK2019 寻找`public: int __thiscall Common::Matrix::Rows(void) ...`.

我不明白为什么会发生链接错误：据我所知，我已经添加了 .lib 引用，并设置了所有需要的标头等，但它不会链接。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:54:27.977

LNK2019 的 MSDN 文档应该能够提供帮助：http: [//msdn.microsoft.com/en-us/library/799kze2z%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/799kze2z%28v=vs.110%29.aspx)

# sparql - 在 sparql IN 子句中使用另一个 sparql

> ID：13650840
> 
> 赞同：9
> 
> 时间：2012-11-30T18:17:03.743
> 
> 标签：sparql

我正在使用 SPARQL，我想知道是否可以在子句中放入一个 sparql？更具体地说，我需要获取对此 sparql 查询具有特定条件的实体（s1，s2）[s1 在字段上的聚合值超过 5]

```
select 
?s1 ?x ?s2.
WHERE {
         {?s1 rdf:type dbpedia-owl:Scientist.}
         {?s2 rdf:type dbpedia-owl:Scientist.}
         {?s2 dbpedia-owl:field ?x.}
         {?s1 dbpedia-owl:field ?x.}
} 
```

所以我需要像这样添加一个额外的 IN 子句

```
SELECT
?s1 ?x ?s2.
WHERE {
      {?s1 rdf:type dbpedia-owl:Scientist.}
      {?s2 rdf:type dbpedia-owl:Scientist.}
      {?s2 dbpedia-owl:field ?x.}
      {?s1 dbpedia-owl:field ?x.}
      {?s1 IN 
            {
             SELECT  ?s1  WHERE {
                                    SELECT ?s1 (COUNT(?p) AS ?prizes) {
                                    ?s1 dbpprop:prizes ?p.
                                    } group by (?s1) 
                                 }FILTER (?prizes > 2) 
             }
       }
 } 
```

但是我在 sparql 查询解析器上遇到错误.....有人知道如何解决它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T18:34:09.227

`IN`SPARQL 在 SPARQL 中的用法与 SQL 有所不同，它只能在`FILTER`类似的情况下使用：

```
FILTER(?s IN (<this>, <that>, <another>)) 
```

然而，由于 SPARQL 评估的自下而上连接语义，仅使用它自己的子查询应该会给你想要的结果：

```
SELECT ?s1 ?x ?s2
WHERE 
{
  ?s1 rdf:type dbpedia-owl:Scientist.
  ?s2 rdf:type dbpedia-owl:Scientist.
  ?s2 dbpedia-owl:field ?x.
  ?s1 dbpedia-owl:field ?x.
  {
    SELECT ?s1 WHERE 
    {      
      ?s1 dbpprop:prizes ?p.
    }
    GROUP BY ?s1 
    HAVING (COUNT(?p) > 2) 
  }
} 
```

您可能会注意到我还简化了查询的其他部分。无需使用两个嵌套子查询，因为您可以使用该`HAVING`子句指定聚合条件。

此外，您不需要放置`{ }`每个单独的三重模式，实际上这样做可能会严重损害性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-29T04:06:38.300

根据官方[W3C](https://www.w3.org/TR/sparql11-query/#func-in)文档，

**在**

```
boolean  rdfTerm IN (expression, ...) 
```

IN 运算符测试是否在右侧的表达式列表的值中找到左侧的 RDF 项。测试使用“=”运算符完成，该运算符测试相同的值，由运算符映射确定。

右侧的零项列表是合法的。

如果正在测试的 RDF 术语在术语列表的其他位置没有找到，则比较错误会导致 IN 表达式引发错误。

IN 运算符等价于 SPARQL 表达式：

(lhs = 表达式1) || (lhs = 表达式2) || ...

**例子：**

[![在此处输入图像描述](../Images/85451e3bfc496099a213b48673075ab4.png)](https://i.stack.imgur.com/ARsTr.jpg)

因此，**IN**运算符接受**vales 列表，**当我们使用 select 运算符（如您的示例所示）使用嵌套 SPARQL 查询时，它返回**Resultset**，您可以将其视为语句列表。因此你不能那样做。

但是下面是一个示例，您可以按照 SPARQL **FILTER +IN**语法尝试：

```
SELECT
?s1 ?x ?s2.
WHERE {
      {?s1 rdf:type dbpedia-owl:Scientist.}
      {?s2 rdf:type dbpedia-owl:Scientist.}
      {?s2 dbpedia-owl:field ?x.}
      {?s1 dbpedia-owl:field ?x.}
      FILTER (?s1 IN (<http://example.com/#1>,<http://example.com/#2>, <http://example.com/#3>)) 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-12T22:04:49.860

您可能想尝试 FILTER(EXISTS ...)

```
SELECT
  ?s1 ?x ?s2
WHERE {
      {?s1 rdf:type dbpedia-owl:Scientist.}
      {?s2 rdf:type dbpedia-owl:Scientist.}
      {?s2 dbpedia-owl:field ?x.}
      {?s1 dbpedia-owl:field ?x.}
      FILTER (EXISTS {
        SELECT ?sx
        WHERE {
          {
            SELECT ?sx (COUNT(?p) AS ?prizes) 
            {?sx dbpprop:prizes ?p.}
            GROUP BY ?sx
            HAVING (?prizes > 2)
          } .
          FILTER(?sx = ?s1)
        }
      })
 } 
```

# java - 如果参数的值为字符串或数组，则验证 JSON 字符串

> ID：13650853
> 
> 赞同：1
> 
> 时间：2012-11-30T18:18:36.823
> 
> 标签：java, json, servlets, gson

这是 JSON 字符串 1

```
{"title":["1","2"], "amount":["1","2"]} 
```

这是 JSON 字符串 2

```
{"title":"", "amount":""} 
```

字符串 1 是在我在表单中输入值时创建的，而字符串 2 是在我不输入时创建的，我想知道字符串是格式 1 的标题是数组 ["1", "2"] 还是格式 2在我解析它之前，标题只是 servlet 中服务器端的字符串“”。有什么办法吗？

这是我之前的问题， [如何在 servlet 中使用 GSON 解析这个 JSON 字符串](https://stackoverflow.com/questions/13648273/how-do-i-parse-this-json-string-using-gson-in-servlet/13648576#comment18727247_13648576)

这已解决，但正如您所见，我有类 Data，它具有 ArrayList 类型的实例变量，所以当我用这一行解析它时

```
Data data = gson.fromJson(param, Data.class); 
```

它抛出异常

```
 com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was STRING at line 1 column 24 
```

因为正如我声明的 ArrayList，它只期望 json 中的数组来解析它，没有任何异常......但是当我不在我的表单中输入值时，它不会创建 json 字符串为

```
{"title":[], "amount":[]} 
```

而是像这样创建

```
{"title":'', "amount":''} 
```

以字符串为值，导致解析抛出异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-15T05:55:20.030

也有这个问题，这就是我解决它的方法

在您的数据对象中有

```
public class Data {
    // This is a generic object whose type is determined when used by GSON
    private Object title;

    // get the type of object and return as string
    public String getTitleObjType() {
            String objType = title.getClass().toString();
        return objType;
    }

    // used if the object is an ArrayList, convert into an ArrayList<Object>
    public ArrayList<String> getTitleArrayList() {
        // Turn the Object into an arraylist
        @SuppressWarnings("unchecked")  // This is to counter the fact that the cast is not type safe
        ArrayList<String> titleArrayList = (ArrayList<String>) title;
        return titleArrayList;
    }

    // used if the object is not an array
    public String getTitleStr() {
            return title.toString();
    }
} 
```

当 GSON 构建它将创建的对象时，每个对象都是 String 或 ArrayList

然后当你想使用这些对象时，测试看看它们是什么

```
ArrayList<String> titleValArrayList = new ArrayList<String>();
String titleValStr = "";

if(getTitleObjType.equals("class java.util.ArrayList")) {
         titleValArrayList = getTitleArrayList();
         //do whatever you like
}
else if(getTitleObjType.equals("class java.util.String")) {
         titleValStr = getsTitleStr();
         //do whatever you like
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:29:50.623

检查[Google GSON](http://code.google.com/p/google-gson/)，它允许您解析 JSON 服务器端。

它是这样的：

```
 String jsonString = request.getParameter("jsonParemeter");
 Gson gson = new Gson();
 Map fromJsonMap = gson.fromJson(jsonString, HashMap.class);

 Object object = fromJsonMap.get("title");
 if (object instanceof Collection) {
  // then is it's your array
 }
 else {
   // it's not
 } 
```

例如，如果我运行以下示例代码：

```
String json1 = "{\"title\":[\"1\",\"2\"], \"amount\":[\"1\",\"2\"]}";
String json2 = "{\"title\":\"\", \"amount\":\"\"}";

Gson gson = new Gson();
HashMap map = gson.fromJson(json1, HashMap.class);
HashMap map2 = gson.fromJson(json2, HashMap.class);

System.out.println(map);
System.out.println(map2);

System.out.println(map.get("amount").getClass());
System.out.println(map2.get("amount").getClass()); 
```

我得到输出：

```
{amount=[1, 2], title=[1, 2]}
{amount=, title=}
class java.util.ArrayList
class java.lang.String 
```

如果我理解正确，我认为它适合你 100%

**更新**

由于您尝试将 JSON 字符串直接反序列化为 Data 对象，因此如果您想继续进行直接反序列化，则必须使用[自定义反序列化机制](https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)

# javascript - 使用 jquery ui 禁用可排序或拖动

> ID：13650859
> 
> 赞同：0
> 
> 时间：2012-11-30T18:19:02.173
> 
> 标签：javascript, jquery, jquery-ui

我在 div 中有一个 div，我不想拖动它，因为它是一个导航元素。

例子：

```
$(function() {
    $( "#container" ).sortable();
    $( "#container" ).disableSelection();
});

<div id="container">
   <div class="move">drag me around</div>
   <div class="nav">Don't move me</div>
</div> 
```

基本上 .nav 我不想拖拽我试过了，但没用

```
$( "#sortable1" ).sortable({
            items: "li:not(.ui-state-disabled)"
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:41:08.407

只需过滤掉您不想排序的项目：

```
$('#container').sortable({
    items: 'div:not(.nav)'
}); 
```

您当前的过滤器正在作用于`li`元素，您正在使用`div`元素。

# git - Jenkins 扩展电子邮件不会打印 $GIT_BRANCH 或 $GIT_COMMIT

> ID：13650860
> 
> 赞同：2
> 
> 时间：2012-11-30T18:19:03.753
> 
> 标签：git, jenkins

在 Jenkins“扩展电子邮件通知”插件中，我创建了一个关于 Build 和 Git 版本号的表格，通过 Jenkins 设置的环境变量获取值。除了 $GIT_COMMIT 和 $GIT_BRANCH 部分之外，所有表条目都很好。它分别输出字符串“$GIT_COMMIT”和“$GIT_BRANCH”。我尝试在环境变量名称周围使用 {}，但对输出没有影响。

```
<table border="0">
<tr><td><b>Project:</b>  </td><td> <b>$PROJECT_NAME</b></td></tr>
<tr><td>Build #:         </td><td> $BUILD_NUMBER</td></tr>
<tr><td>Status:          </td><td> $BUILD_STATUS</td></tr>
<tr><td>Git reversion #: </td><td> $GIT_COMMIT</td></tr>
<tr><td>Git branch:      </td><td> $GIT_BRANCH</td></tr>
<tr><td>Changes:         </td><td> $CHANGES</td></tr>
</table> 
```

我检查这些环境变量是否存在于构建命令行输出中。为什么它们没有出现在电子邮件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T20:33:30.317

构建变量，例如`$PROJECT_NAME`和`$BUILD_NUMBER`可直接使用，因为它们是在此构建会话中创建的。

对于环境变量，您必须使用以下语法：
`${ENV, var="GIT_COMMIT"}`

# ruby-on-rails - 高性能 REST API - 哪种语言/堆栈？

> ID：13650861
> 
> 赞同：6
> 
> 时间：2012-11-30T18:19:11.693
> 
> 标签：ruby-on-rails, api, node.js, scala, rest

我正在使用 Ruby on Rails 开发一个网站。我想单独开发 REST API (JSON) 以最大限度地提高性能，Rails 堆栈带走了太多东西。

那里有任何性能基准吗？你认为什么会产生最好的性能？我目前正在考虑以下内容，因为这是我的经验。还有什么我应该考虑的吗？它应该是轻量级的。

*   节点.js
*   斯卡拉喷雾 (http://spray.io/)
*   红宝石辛纳屈

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-30T18:29:59.640

**摘要**：最大化您作为开发人员的表现。使用你最了解的堆栈。首先让它工作，**然后**让它快速。

> 那里有任何性能基准吗？

那里有各种各样的基准。比方说，node.js 可以处理 100k HPS（每秒 helloworlds），而 Sinatra 只能处理 80k。它告诉你什么？没有什么。

此外，有时更高的性能需要付出巨大的代价。以 ruby​​ C 扩展为例。当然，C 比 Ruby 运行得更快，但它会阻止其他线程在其他内核上运行（因为 GIL）。

因此，不要仅根据互联网上的基准数据来选择技术。除了原始 HPS 数字外，还有很多因素需要考虑。

**LINK** : 如果你觉得 Rails 太重，你应该试试[rails-api](https://github.com/rails-api/rails-api)。它基本上是 Rails 的精简版本（您不需要 api 服务器中的 cookie 身份验证或 MSIE 渲染帮助程序之类的东西）。

* * *

### 个人故事

我运行一个处理一些负载的 API 服务器。第一个版本是用 Rails 编写的。然后我想“嘿，Rails 臃肿（c），让我们用 Sinatra 重写一切”。然后一波又一波的挫败感袭来。事实证明，Rails 做了很多我不欣赏的小而有用的事情。我放弃了，再次用 Rails 重写了它（应用经验教训），从此过着幸福的生活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:23:25.867

这属于“我是否应该使用自定义的网络服务器用 C 重写我的 apache/php 站点，因为它很慢”。

我投票选择你最喜欢的堆栈来工作，并利用良好的缓存并使用你可用的任何操作码优化，如果你的代码没有被编译。然后确保您有足够的服务器资源并在需要处理流量时进行水平负载平衡。

我还没有看到许多 API 的性能不佳的主要原因是技术堆栈的选择，除非它们正在处理 facebook/twitter 大小的流量或进行计算密集型工作。

如果正确利用更多延迟，您将在您选择的任何堆栈中看到：

1.  向客户端传输不必要的大量数据
2.  由于糟糕的 SQL 或其他数据源获取缓慢而导致性能下降

如果您已经在使用 RoR 堆栈来坚持使用它，我也强烈建议您使用它。尝试在不同的堆栈中进行优化和编码通常会导致两者中的代码较弱——让您的开发人员的大脑一次专注于一个futz池。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T19:13:42.167

这实际上取决于您的用例和团队经验/偏好 - 但是，如果您对任何堆栈都真正开放，我们的个人经验是：

*   Scala + Scalatra + Jetty 很简单而且速度很快。
*   Node + Express 的速度惊人地接近——但（在我们的例子中）具有灵活的 Javascript 代码的好处。
*   Ruby 的性能远不如两者，但代码很酷。

Scala 是赢家，因为我们的商店在 JVM 方面拥有丰富的经验。然而，我们希望在未来更多地利用节点来做到简单。

我确信有经验的 Ruby 人可以改进和调整一些东西，但是对于我们和初学者来说，学习曲线是不值得的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T07:10:55.687

查看[spray——](http://spray.io)我喜欢它，因为它轻量级且设计良好（模块化、异步、健全的 API）。对于 web 服务的东西，大多数 web 框架都带有太多的包袱。

# clang - /proc/self/exe 的结果在 clearcase 视图中不友好

> ID：13650862
> 
> 赞同：1
> 
> 时间：2012-11-30T18:19:12.410
> 
> 标签：clang, clearcase

如果我在 clearcase 视图中执行二进制文件，并在 Linux 上查看 /proc/self/exe ，我会看到如下内容：

```
$ cd /proc/19220
$ ls -l exe
lrwxrwxrwx 1 peeterj pdxdb2 0 2012-11-30 13:04 exe -> /home/peeterj/views/peeterj_clang-7.vws/.s/00024/8000028250b8f1d1llvm-config 
```

clang llvm-config 程序不无道理地使用此输出来尝试找出它所在的绝对完全限定路径（我假设 argv[0] 不是完全限定的）。

有没有办法在对应的视图中找到位置。例如，在这种情况下，llvm-config exe 实际上在：

/vbs/bldsupp/linuxamd64/clang/debug/bin

（我想知道是否可以修改 clang 的 GetExecutablePath() 函数来解决这个问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:40:20.823

这里没有简单的解决方案（尽管对于旧版本的 ClearCase）：

技术说明“ [PK27447：在清除动态视图中，Linux 上的 READLINK() 调用返回可执行文件的 /PROC/SELF/EXE 值的错误路径](http://www-01.ibm.com/support/docview.wss?uid=swg1PK27447)”建议：

> 本地修复
> 
> 1.  在预定用于 VOB/视图上下文的应用程序中使用`getcwd()`, `get_current_dir_name()`,`getwd()`
> 2.  创建一个 interposer 库来拦截`readlink()`调用，并修改为使用上述任何调用来返回正确的数据

原因：

> `/proc/self/exe`成功时返回不正确的路径`getcwd`。
> 
> 不幸的是，`/proc/self/exe`要返回正确的值 [从 VOB/视图上下文中] 将需要在 Linux 内核中进行更改以允许 MVFS “覆盖”当前设置。
> 
> IBM LTC 一直致力于让 Linux 社区采用此更改，以便我们可以在 MVFS 中合并新功能。

相关：[错误 Sun 6189256](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6189256)。

# mysql - 在sql中给定字母顺序时查找上一个/下一个记录？

> ID：13650865
> 
> 赞同：5
> 
> 时间：2012-11-30T18:19:22.643
> 
> 标签：mysql, sql

我有一张桌子`people`

```
id    name
----+-----
54    Tango
76    Alpha
95    Radio 
```

在网络上显示记录时，这些名称按字母顺序排列

```
Alpha, Radio, Tango 
```

假设我们正在查看详细信息并希望使用一些链接`Radio`导航到下一个`(Tango)`或上一个记录。`(Alpha)`

我怎样才能找到那些`id's`来创建所需的链接？

寻找下一个上级或下级是`id`行不通的。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:25:18.347

它还没有这样做。

上一页

```
SELECT Id FROM people WHERE name < 'Radio' ORDER BY name DESC LIMIT 1 
```

下一个

```
SELECT Id FROM people WHERE name > 'Radio' ORDER BY name ASC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T18:25:03.090

你可以这样做：

```
SELECT name
FROM
(
   SELECT name, (@rownum := @rownum + 1) rank
   FROM people, (SELECT @rownum := 0) t
   ORDER BY name
) t WHERE rank = @n 
```

您应该使用新的排名数字列`rank`来创建这些链接。然后你应该控制参数的值`@n`来获取上一个或下一个。

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/fee74/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:47:15.973

您可以使用 max() 选择以前的名称。

```
select max(name) as name
from people
where name < 'Radio'; 
```

然后，您可以将该查询用作 JOIN 中的派生表。

```
select id
from people
inner join 
  (select max(name) as name
   from people
   where name < 'Radio') as t2 on t2.name = people.name 
```

下一个名称类似，使用 min() 和`>`运算符。

如果您的设计允许重复名称，则派生表将返回多行。这通常是人工钥匙的问题。

当您以 {100, 'Obama'} 开头并且您的数据*包括*

```
{ 50, 'Romney'}
{150, 'Romney'}
{843, 'Romney'} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T19:07:57.037

如果名称可以重复，当您要查找上一行和下一行时，如何识别“当前”行？我假设您通过 id 识别它。在任何情况下，您都需要有某种方法来唯一地寻址行。

我测试了这个：

```
USE test;
DROP TABLE IF EXISTS t;
CREATE TABLE t (id INT PRIMARY KEY, name VARCHAR(10));

INSERT INTO t (id, name) VALUES
(54, 'Tango'),
(76, 'Alpha'),
(78, 'Alpha'),
(95, 'Radio');

(SELECT * FROM t WHERE id >= 76 ORDER BY id ASC LIMIT 2)
UNION
(SELECT * FROM t WHERE id <= 76 ORDER BY id DESC LIMIT 2)
ORDER BY id ASC; 
```

UNION 负责消除 id=76 的重复行

结果如下：

```
+----+-------+
| id | name  |
+----+-------+
| 54 | Tango |
| 76 | Alpha |
| 78 | Alpha |
+----+-------+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T08:25:37.740

这是最干净，最有效的方法：下一步：

```
 select min(name) people where name > 'RADIO'; 
```

要获得上一个：

```
 select max(name) people where name < 'RADIO'; 
```

# heroku - 在 heroku pgbackups 上获得“找不到备份”

> ID：13650867
> 
> 赞同：2
> 
> 时间：2012-11-30T18:19:28.400
> 
> 标签：heroku, backup, restore, pg

我想将备份从登台还原到演示

我按照heroku上的文档进行了梳理，但到目前为止还没有运气。

我使用的是 Windows 7，版本是：

heroku/toolbelt/2.33.2 (i386-mingw32) ruby​​/1.9.2 Ruby: ruby​​ 1.9.3p194 (2012-04-20) [i386-mingw32] Rails: 3.2.7

脚步：

```
$heroku pgbackups:capture

HEROKU_POSTGRESQL_ONYX_URL (DATABASE_URL)  ----backup--->  b004

←[0KCapturing... donet |
←[0KStoring... done

$heroku pgbackups:url
"https://s3.amazonaws.com/hkpgbackups........." 
```

我知道上面的命令不是必需的，但我还是这样做只是为了确保为备份数据库生成一个 url。

和恢复命令：

```
$heroku pgbackups:restore --remote demo DATABASE 'heroku pgbackups:url'

 **!    Backup not found** 
```

可以肯定的是，我尝试了以下其他格式的命令：

```
heroku pgbackups:restore --remote demo DATABASE 'heroku pgbackups:url --remote staging'

heroku pgbackups:restore --app demoapp DATABASE 'heroku pgbackups:url --app stagingapp' 
```

它们都导致找不到备份错误

我还尝试使用演示中的数据库名称：

```
$heroku pgbackups:restore HEROKU_POSTGRESQL_ROSE 'heroku pgbackups:url --remote staging' --remote demo
 !    Backup not found 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:44:59.253

使用反引号而不是单引号。

`` heroku pgbackups:url -a source-app``

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:57:06.537

登录您的 heroku 控制面板并确保您拥有的 PGbackup 版本没有贬值

# c# - JSON序列化：类包含泛型类型的泛型集合

> ID：13650869
> 
> 赞同：5
> 
> 时间：2012-11-30T18:19:33.767
> 
> 标签：c#, json, generics, json.net

我正在尝试将 .NET 类序列化为 JSON，其中包含一个属性，该属性是泛型类型的通用列表。

我的泛型类型定义如下：

```
public interface IFoo {}

public class Foo<T>: IFoo
{
  public string Name {get; set;}
  public string ValueType {get; set;}
  public T Value {get; set:}

    public Foo(string name, T value)
    {
      Name = name;
      Value = value;
      ValueType = typeof(T).ToString();
    }
} 
```

然后，如下：

```
public class Fum
{
  public string FumName {get; set;}
  public list<IFoo> Foos {get; set;}
} 
```

我创建实例如下：

```
myFum = new Fum();
myFum.FumName = "myFum";
myFum.Foos.Add(new Foo<int>("intFoo", 2);
myFum.Foos.Add(new Foo<bool>("boolFoo", true);
myFum.Foos.Add(new Foo<string>("stringFoo", "I'm a string"); 
```

然后...

我正在尝试使用 NewtonSoft JSON 库进行序列化，如下所示：

```
string strJson = JsonConvert.SerializeObject(data, 
                  Formatting.Indented, new JsonSerializerSettings
        {
            NullValueHandling = NullValueHandling.Include,
            TypeNameHandling = TypeNameHandling.All,
            TypeNameAssemblyFormat = FormatterAssemblyStyle.Simple
        }); 
```

在生成的 JSON 字符串中，每个 Foo 实例的 Name 和 ValueType 属性都已正确序列化 - 但是，输出中始终省略 Value：

```
{
  "FumName": "myFum",
  "Foos" : [
    {
      "Name": "intFoo",
      "ValueType": "System.Int32"
    },
    {
      "Name": "boolFoo",
      "ValueType": "System.Boolean"
    },
    {
      "Name": "stringFoo",
      "ValueType": "System.String"
    }
  ]
} 
```

任何人都可以提出一种方法，使我能够正确序列化泛型类型实例列表以便包含 Value 属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:18:23.480

默认情况下，Json.NET 可能会忽略泛型类型，使用 [JsonProperty] 属性对其进行标记可以解决此问题。只是一个想法，它可能会或可能不会起作用。我现在无法测试它，但我会尝试并告诉你它是否真的有效。

**编辑：**我认为它可能是您正在使用的 json.net 版本，因为我刚刚使用 NuGet 的版本测试了您的代码并收到以下输出：

```
{
  "$type": "Testing.Fum, Testing",
  "FumName": "myFum",
  "Foos": {
    "$type": "System.Collections.Generic.List`1[[Testing.IFoo, Testing]], mscorlib",
    "$values": [
      {
        "$type": "Testing.Foo`1[[System.Int32, mscorlib]], Testing",
        "Name": "intFoo",
        "ValueType": "System.Int32",
        "Value": 2
      },
      {
        "$type": "Testing.Foo`1[[System.Boolean, mscorlib]], Testing",
        "Name": "boolFoo",
        "ValueType": "System.Boolean",
        "Value": true
      },
      {
        "$type": "Testing.Foo`1[[System.String, mscorlib]], Testing",
        "Name": "stringFoo",
        "ValueType": "System.String",
        "Value": "I'm a string!"
      }
    ]
  }
} 
```

# git - 让 git 不合并二进制文件但保留两者？

> ID：13650871
> 
> 赞同：0
> 
> 时间：2012-11-30T18:19:42.767
> 
> 标签：git, merge, binaryfiles

目前我们将二进制文件提交到源代码管理中，这些文件将由不同的人更改，然后重新提交。但是，这会产生合并冲突。

实际上，由于这些文件包含图像之类的内容，因此合并它们没有意义。

我想知道是否有一个 git 命令允许二进制文件之间可能的合并冲突。

IE：有两个存储库和一个用于共享的裸远程存储库。有一个文件 image.png，两个存储库的用户分别对其进行更改并提交。然后他们拉取所做的更改，然后将更改推送到远程仓库。显然，这会为其中一个用户产生合并冲突。但这对图像文件没有意义，是否有可能最新的提交可以是最新的，而较旧的提交可以添加到分支的历史记录中？

我很清楚这不是应该如何完成的事情，但这是我所处的情况，所以我想知道是否有人有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:45:42.737

是的。 `git reset`只是您想要取代的版本的冲突路径（），提交，然后添加（或重置为）替换（即正确）版本并提交结果。如果您不喜欢在主线上进行人工且已知不一致的提交，您还可以*仅对*被取代的文件进行孤儿提交（提交消息说明它们的情况）并将其添加为合并父级在您的主分支上使用所选版本的提交。继续阅读并了解如何做到这一点，这实际上非常简单。`git reset`*`thecommitwiththesupersededfiles`*`--`*`paths`**`git mktree``git commit-tree`*

# linux - linux中的部分目录列表

> ID：13650872
> 
> 赞同：8
> 
> 时间：2012-11-30T18:19:43.300
> 
> 标签：linux, shell

如果我有一个包含数百个文件的目录，请使用`ls`,`ls-l`或`dir`给我一个对于命令终端屏幕来说太长的列表，因此我无法看到目录中的大部分文件。

我记得有一些争论`ls`允许人们以短增量滚动列表，但似乎找不到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T18:21:35.713

一种选择是将输出通过管道传输到`less`或`more`

```
ls | less 
```

或者

```
ls | more 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:22:42.843

尝试在[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中执行此操作：

```
ls -1 | less 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:25:24.193

另一种方法是将输出重定向`ls`到一个临时文件，然后使用您选择的任何编辑器查看该文件 - 这样您也可以进行搜索等：

```
ls > res.tmp
vim res.tmp
emacs res.tmp
gedit res.tmp
grep "pattern" res.tmp 
```

# php - 为什么在三元上下文中使用时我的变量没有被分配正确的值？

> ID：13650875
> 
> 赞同：0
> 
> 时间：2012-11-30T18:19:54.153
> 
> 标签：php, variable-assignment, ternary-operator

我很困惑为什么这段代码：

```
$mapped_class = ( $mapped_field_index = array_search( $field_name, $automapped_header ) !== false ) ? " mapped mapped_to-" . $mapped_field_index : ""; 
```

... 始终`1`以`$mapped_field_index`（适用时）返回

鉴于此，扩展代码：

```
$mapped_field_index = array_search( $field_name, $automapped_header );
$mapped_class = $mapped_field_index !== false ? " mapped mapped_to-" . $mapped_field_index : ""; 
```

... 将正确的搜索索引显示为`$mapped_field_index`.

我认为在 PHP 中，IF 上下文中的赋值也被评估为表达式并返回分配的值。这在这两个例子中似乎都是正确的，因为在没有结果`$mapped_class`的情况下是空白的。`array_search()`

但我希望在这两种情况下都`$mapped_field_index`包含正确的`array_search()`索引，而不是仅仅`1`以三元形式（这似乎表明 TRUE 而不是实际的索引）。

三元运算符在这里有贡献吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:44:36.953

`$mapped_field_index`在这两种情况下没有被设置为相同的值。在第一个示例中，`$mapped_field_index`等于

`array_search( $field_name, $automapped_header ) !== false`

在第二个例子中，它相当于

`array_search( $field_name, $automapped_header )`

如果您修改第二个示例，则第一行显示为：

`$mapped_field_index = array_search( $field_name, $automapped_header ) !== false;`

那么在这种情况下你也总是会得到 1 。

在这种没有效率差异的情况下，你最好使用更冗长但更易读的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:24:15.997

比较运算符的优先级高于赋值。见[http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

（您的 !== 子句在您的 = 子句之前分组）

尝试像这样添加括号（不是 100% 确定它会起作用，但它可能会）

```
$mapped_class = ( ($mapped_field_index = array_search( $field_name, $automapped_header )) !== false ) ? " mapped mapped_to-" . $mapped_field_index : ""; 
```

# random - 如何从随机位生成器生成随机数并保证终止？

> ID：13650876
> 
> 赞同：1
> 
> 时间：2012-11-30T18:19:54.763
> 
> 标签：random, complexity-theory, theory

假设我有一个返回随机位的函数，是否可以编写一个在一定范围内统一生成随机数并始终终止的函数？

我知道如何做到这一点，以便它应该（并且可能会）终止。我只是想知道是否有可能编写一个保证终止（并且它不必特别有效。它会有什么复杂性？

这是不总是终止版本的代码

```
int random(int n)
{
  while(true)
  {
    int r = 0;
    for (int i = 0; i < ceil(log(n)); i++)
    {
      r = r<<1;
      r = r|getRandomBit();
    }

    if(r<n)
    {
      return r;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:54:54.890

我认为这会起作用：

假设您要生成范围内的数字`[a,b]`

使用二进制基数生成`r`范围内的分数。`[0,1}`这意味着使用您的随机函数生成许多表格`0.x1x2x3....`，其中每个表格`x`都是 0 或 1。

`[0,b-a]`一旦你有了它，你可以通过计算轻松地生成范围内的数字`ceil(r*(b-a))`，然后简单地添加`a`以获取范围内的数字`[a,b]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:13:03.677

如果范围的大小不是 2 的幂，则您无法获得完全均匀的分布，除非通过相当于拒绝抽样的方式。但是，您可以通过从大范围中采样一次，然后将较小的范围划分为该范围来尽可能接近均匀。

例如，虽然您无法在 1 到 10 之间进行均匀采样，但您可以通过选择 10 个随机位轻松地在 1 到 1024 之间进行采样，并找出某种方法将其公平地划分为 10 个大小大致相同的间隔。

选择额外的位具有将您在选择中必须看到的最大误差（来自真正的均匀性）减半的效果......因此，当您选择更多位时，误差会呈指数下降。

# python - bash 脚本如何在管道中接收 python 的输出

> ID：13650879
> 
> 赞同：-1
> 
> 时间：2012-11-30T18:20:09.537
> 
> 标签：python, bash, input, pipe, output

我有两个文件：myPython.py && myBash.sh

我想让 myPython.py 输出一个 XML 文件，myBash.sh 接收这个 XML 文件作为输入，然后对它做某事。

我想在控制台中做的是这样的

`myPython.py | myBash.sh`

问题是：如何在 python 文件中返回一个值？以及如何在管道中接收 myBash.sh 的 XML 文件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:25:00.990

如果您只是做一个简单的“打印”，它应该可以工作。例如：

`python -c 'print "foo"' | cat`

# macos - 在 64 位环境下编译 32 位 OS X 二进制文件

> ID：13650888
> 
> 赞同：6
> 
> 时间：2012-11-30T18:20:58.507
> 
> 标签：macos, gcc, compilation, 64-bit, 32-bit

在 64 位命令行环境中编译 32 位 Intel OS X 二进制文件涉及什么？`-m32`加个flag就这么简单吗？我没有使用 Xcode，但可以使用它来安装`gcc`可以使用的库（如果需要）。谢谢你的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T14:18:47.510

如果您使用 Apple 的 GCC 实现在 Macintosh 计算机上进行编译，您可以传递的额外选项之一是“ `-arch`”参数。

[手册页](https://www.unix.com/man-page/osx/1/gcc/)是这样说的：

```
-arch arch
   Compile for the specified target architecture arch.  
   The allowable values are i386, x86_64, ppc and ppc64\.  
   Multiple options work, and direct the compiler to produce "universal" 
   binaries including object code for each architecture specified with -arch.  
   This option only works if assembler and libraries are available 
   for each architecture specified.  (APPLE ONLY) 
```

# javascript - 尝试将对象中多个键的值相加

> ID：13650889
> 
> 赞同：0
> 
> 时间：2012-11-30T18:21:11.597
> 
> 标签：javascript, jquery, object, javascript-objects

我正在创建一个模拟购物车，但我在更新购物车的功能上遇到了一些问题。当用户将某些东西添加到购物车时，**商品名称**和所需**数量**将存储在一个`sessionStorage`对象中。该`updateCart()`函数使用来自该对象的数据。

我正在尝试：
1\. 遍历`sessionStorage`对象并获取项目名称和数量
2\. 将数量乘以每个项目的价格
3\. 将所有项目总计加起来为一个总计

第三部分很棘手。

**HTML**

```
<div id="Burger">6.50</div>
<div id="Cheeseburger">7.50</div>
<div id="Hotdog">4.00</div> 
```

**会话存储对象**

```
{
    "Burger" : "2",
    "Cheeseburger" : "3",
    "Hotdog" : "1"
} 
```

**JavaScript**

```
function updateCart() {

    var storage = window.sessionStorage;
    var sumtotal = 0;

    for ( var i in storage ) {

        var item = new Object();

        item.name = i;
        item.quantity = parseFloat( storage[i] );
        item.price = parseFloat( $("#" + item.name).text() );
        item.total = item.price * item.quantity;

        sumtotal = parseFloat( sumtotal + item.total );

        console.log(sumtotal);

    }
} 
```

似乎无法使总计/总和起作用。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:54:37.840

就是这一行：

```
sumtotal = parseFloat( sumtotal + item.total ); 
```

应该：

```
sumtotal += parseFloat( item.total ); 
```

现在你只得到 的最后一个值`item.total`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:03:20.003

我认为这不是您应该使用 sessionStorage 的方式。相反，您需要创建一个对象 - 例如称为 order - 将托管您的号码：

```
var storage=JSON.parse(sessionStorage.getItem("order")); 
```

查看[现场演示](http://jsfiddle.net/Xd82V/2/)。

# java - 这些库来自哪里

> ID：13650890
> 
> 赞同：-2
> 
> 时间：2012-11-30T18:21:16.587
> 
> 标签：java, enterprise-library

我在一个项目的 Eclipse 中缺少一堆库。有谁知道这些罐子是从哪里来的？

```
adobe-livecycle-client.jar
adobe-bmc-client.jar    
adobe-convertpdf-client.jar
adobe-distiller-client.jar
adobe-encryption-client.jar
adobe-formdataintegration-client.jar
adobe-forms-client.jar
adobe-generatepdf-client.jar
adobe-jobmanager-client-sdk.jar
adobe-livecycle-client.jar
adobe-output-client.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:31:20.303

它们是 Adob​​e Livecycle 的一部分：http: [//www.adobe.com/products/livecycle/](http://www.adobe.com/products/livecycle/)

我不知道它是如何销售的，但下载页面上似乎有一个 SDK：

[http://www.adobe.com/devnet/livecycle/downloads.html](http://www.adobe.com/devnet/livecycle/downloads.html)

# java - 在 Quartz 调度程序 API 中运行的作业中是否有特定的日志机制？

> ID：13650893
> 
> 赞同：0
> 
> 时间：2012-11-30T18:21:37.810
> 
> 标签：java, logging, quartz-scheduler

我正在开发一个运行许多 Quartz 作业的系统。一切似乎都运行良好，但我不清楚 Quartz 希望我如何记录。

Quartz 本身是否有某种日志记录机制、首选的日志记录框架，还是我只是像在任何其他项目中一样使用我的普通旧日志记录库？

似乎最好将每个作业拆分到自己的日志文件中，甚至在每个日志消息之前附加有关作业的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:28:14.760

1.  你可以使用任何你想要的日志框架，例如[logback](/questions/tagged/logback "显示标记为“logback”的问题")或[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")

2.  Quartz 只是一个 Java 库，它不会对您的代码强制任何编程风格或限制，包括特定的日志记录 API

3.  有一组[Quartz 插件](http://nurkiewicz.blogspot.no/2012/04/quartz-scheduler-plugins-hidden.html)处理每个触发器/作业开始和结束的日志记录

4.  如果您想将日志从不同的作业/作业类型中分离出来，请查看[Logback 中的 MDC 功能](http://logback.qos.ch/manual/mdc.html)。

# php - 如何通过着墨选择索引链接和更新输入框？

> ID：13650894
> 
> 赞同：0
> 
> 时间：2012-11-30T18:21:38.087
> 
> 标签：php, jquery, select, input, options

输入框值如何通过 if 值链接到选择？在下面的代码中，JQuery 为每个选择选项采用错误的索引，该选项应该只更新它自己的链接输入框中的文本。非常感谢您的帮助！

```
<html>
<head>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function(){

$("select[name='item[]']").change(function() {

    // Link per each Item selection and its value base on if, to the input boxes, based on the index

    if ($(this).val() === 'None') {
         $("input[name='fee[]']").eq($(this).index("select")).val('0');
        }

    if ($(this).val() === 'Boots') {
         $("input[name='fee[]']").eq($(this).index("select")).val('125');
        }

    if ($(this).val() === 'Poles') {
         $("input[name='fee[]']").eq($(this).index("select")).val('150');
        }

    if ($(this).val() === 'Helmet') {
         $("input[name='fee[]']").eq($(this).index("select")).val('175');
        }

    if ($(this).val() === 'Jacket') {
         $("input[name='fee[]']").eq($(this).index("select")).val('275');
        }

    if ($(this).val() === 'Gloves') {
         $("input[name='fee[]']").eq($(this).index("select")).val('75');
        }

    if ($(this).val() === 'Mittens') {
         $("input[name='fee[]']").eq($(this).index("select")).val('85');
        }
    }).change()

    // Debugging : change bgcolor on hover
    $("select[name='item[]']").hover(function() {
        $("input[name='fee[]']").eq($(this).index("select")).css("background","#a6955d");
        }, function() {
        $("input[name='fee[]']").eq($(this).index("select")).css("background","white");
    });

$("select[name='duration[]']").change(function() {

    // Link per each Item Duratin selection and its value base on if, to the input boxes, based on the index

    if ($(this).val() === '0') {
         $("input[name='time[]']").eq($(this).index("select")).val('0');
        }

    if ($(this).val() === '1') {
         $("input[name='time[]']").eq($(this).index("select")).val('1');
        }

    if ($(this).val() === '2') {
         $("input[name='time[]']").eq($(this).index("select")).val('2');
        }

    if ($(this).val() === '3') {
         $("input[name='time[]']").eq($(this).index("select")).val('3');
        }
    }).change()

    // Debugging : change bgcolor on hover
    $("select[name='duration[]']").hover(function() {
        $("input[name='time[]']").eq($(this).index("select")).css("background","#a6955d");
        }, function() {
        $("input[name='time[]']").eq($(this).index("select")).css("background","white");
    });

}); 
</script>

</head>
<body>
<h1 style="align:middle;">Welcome to Mountain Ski Resort</h1>
<form method="post">
<table border="1">
<tr><thead><th>Row ID</th>
<th>Item</th>
<th>Fee</th>
<th colspan="2">Duratin</th>
</thead>
</tr>

<?php
// Create the form with Selections and Input rows
 for($i=1; $i<=10; $i++){
?>
<tr>
<td align="right"><?php echo $i ?></td>
<td>
<select name="item[]">
<option value='None' selected>Select Item</option>
<option value='Boots'>Boots</option>
<option value='Poles'>Poles</option>
<option value='Helmet'>Helmet</option>
<option value='Jacket'>Jacket</option>
<option value='Gloves'>Gloves</option>
<option value='Mittens'>Mittens</option>
</select></td>
<td><input name="fee[]" size="10" readonly></td>
<td>
<select name="duration[]">
<option value='0' selected>Select Duration</option>
<option value='1'>One Hour</option>
<option value='2'>Two Hours</option>
<option value='3'>Three Hours</option>
</select></td>
<td><input name="time[]" size="10" readonly></td>
</tr>
<?php
}
?>

<tr><td colspan="5" align="middle"><input type="submit" value="Submit" /></td></tr>
</table>
</form>

<?php

//  Echo the submitted data to view

echo '<h2>Submitted data:</h2>';

echo '<table border="1">
<tr><thead><th>Row ID</th>
<th>Item</th>
<th>Fee</th>
<th colspan="2">Duration</th>
<th>Total</th>
</thead>
</tr>';

for ($i=0;$i < count($_POST['item']);$i++){

$row=$i+1;

// Calculate Totals based on fees multiplied by duration
$fee = $_POST['fee'][$i];
$duration = $_POST['duration'][$i];
$total = $fee * $duration; 

// Format outputs
$fee_formatted = '$' . number_format(intval($fee), 2, '.', ',');
$total_formatted = '$' . number_format($total, 2, '.', ',');
$duration_formatted = $duration . ':00';

// Output all data submitted and calculation into a table to view
echo '<tr>
<td align="right">' . $row .
'</td><td>' . $_POST['item'][$i] .
'</td><td align="right">' . $fee_formatted .
'</td><td colspan="2" align="right">' . $duration_formatted .
'</td><td align="right">' . $total_formatted .
'</td></tr>';
}

echo '</table>';

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:06:06.313

这是一个功能齐全的简单演示解决方案，我设法为对同一问题感兴趣的任何人整理。它展示了一个带有“租赁设备”的“滑雪场”。它用于将值`JavaScript`链接`Select Options`到`Text Inputs`值并进行计算，包括将数字输出到单词。欢迎提出意见和建议。

```
<?php
// Numbers to Words basic
$words = array('0'=> '' ,'1'=> 'one' ,'2'=> 'two' ,'3' => 'three',
'4' => 'four','5' => 'five','6' => 'six','7' => 'seven','8' => 'eight',
'9' => 'nine','10' => 'ten','11' => 'eleven','12' => 'twelve','13' => 'thirteen',
'14' => 'fourteen','15' => 'fifteen','16' => 'sixteen','17' => 'seventeen',
'18' => 'eighteen','19' => 'nineteen','20' => 'twenty','30' => 'thirty','40' => 'forty',
'50' => 'fifty','60' => 'sixty','70' => 'seventy','80' => 'eighty','90' => 'ninety','100' => 'hundred',
'1000' => 'thousand','100000' => 'hundred thousand','10000000' => 'ten million');

function NumWords($num)
{    
    global $words;

    if($num == 0){

        return '';

        } else {        

        $NumValue='';
        $HighNum=$num;
        $RemainNum=0;
        $valueHundred=100;
        $valueThousand=1000;

            while($num>=100)    {

                if(($valueHundred <= $num) &&($num  < $valueThousand))    {
                    $NumValue=$words["$valueHundred"];
                    $HighNum = (int)($num/$valueHundred);
                    $RemainNum = $num % $valueHundred;
                    break;
                }
                    $valueHundred= $valueThousand;
                    $valueThousand = $valueHundred * 100;
                }       

          if(array_key_exists("$HighNum",$words)){
              return $words["$HighNum"]." ".$NumValue." ".NumWords($RemainNum);
         } else {
             $unit=$HighNum%10;
             $ten =(int)($HighNum/10)*10;            
             return $words["$ten"]." ".$words["$unit"]." ".$NumValue." ".NumWords($RemainNum);
           }
    }
}
?>

<html>
<head>

<script type="text/javascript">

        // To link per index, get value per selection index and set value per input index (Item to Fee)
        function itemAmount(){

        objitem = document.getElementsByName("item[]"); // Array of elements named Items
        objfee = document.getElementsByName("fee[]"); // Array of elements named Fees

        for (var i = 0; i < objitem.length; i++) {

                selindex = objitem[i].options[objitem[i].selectedIndex]; // Get the current selected option index

                // Following lines will get values per index of selection and set the value we assign, 
                // to the input with the same index

                if(selindex.value=='None'){ 
                objfee[i].value = '0';
                }

                if(selindex.value=='Boots'){
                objfee[i].value = '125';
                }

                if(selindex.value=='Poles'){
                objfee[i].value = '150';            
                }

                if(selindex.value=='Helmet'){
                objfee[i].value = '175';
                }

                if(selindex.value=='Jacket'){
                objfee[i].value = '200';
                }               

                if(selindex.value=='Gloves'){
                objfee[i].value = '75';
                }               

                if(selindex.value=='Mittens'){
                objfee[i].value = '115';
                }               

            }

        }

        // To link per index, get value per selection index and set value per input index (Duration to Time)
        function durationTime(){

        objduration = document.getElementsByName("duration[]");
        objtime = document.getElementsByName("time[]");

        for (var i = 0; i < objduration.length; i++) {

                selindex = objduration[i].options[objduration[i].selectedIndex];
                objtime[i].value = selindex.value;

            }

        }

</script>

</head>
<body>
<center>
<h1>Welcome to Mountain Ski Resort</h1>
<form method="post">
<fieldset style="width: 200px; height: 400px;">
  <legend>Equipment Rentals</legend>
<table border="1">
<tr><thead><th>Row ID</th>
<th>Item</th>
<th>Fee</th>
<th colspan="2">Duration</th>
</thead>
</tr>
<?php
// Create the form with 10 Rows of Selections and Input - Can be decreased/increased to any desired number
 for($i=1; $i<=10; $i++){
?>
<tr>
<td align="right"><?php echo $i ?></td>
<td>
<select name="item[]" onchange="itemAmount()">
<option value='None' selected>Select Item</option>
<option value='Boots'>Boots</option>
<option value='Poles'>Poles</option>
<option value='Helmet'>Helmet</option>
<option value='Jacket'>Jacket</option>
<option value='Gloves'>Gloves</option>
<option value='Mittens'>Mittens</option>
</select></td>
<td><input name="fee[]" size="10" value="0" readonly></td>
<td>
<select name="duration[]" onchange="durationTime()">
<option value='0' selected>Select Duration</option>
<option value='1'>One Hour</option>
<option value='2'>Two Hours</option>
<option value='3'>Three Hours</option>
</select></td>
<td><input name="time[]" size="10" value="0" readonly></td>
</tr>
<?php
}
?>

<tr><td colspan="5" align="middle"><input type="submit" value="Submit" /></td></tr>
</table>
</fieldset>
</form>

<?php

//  Echo the submitted data to view

echo '<fieldset style="width: 300px;">
 <legend>Submitted data</legend>
<table border="1">
<tr><thead><th>Row ID</th>
<th>Item</th>
<th>Fee</th>
<th colspan="2">Duration</th>
<th>Total</th>
</thead>
</tr>';

$grandTotal = 0;

for ($i=0;$i < count($_POST['item']);$i++){

$row=$i+1;

// Calculate Row Totals based on fees multiplied by duration
$fee = $_POST['fee'][$i];
$duration = $_POST['duration'][$i];
$total = $fee * $duration;

// Addup Totals Column for a Grand Total
$grandTotal += $total;

// Format outputs
$fee_formatted = '$' . number_format(intval($fee), 2, '.', ',');
$total_formatted = '$' . number_format($total, 2, '.', ',');
$duration_formatted = $duration . ':00';
$grandTotal_formatted =  '$' . number_format($grandTotal, 2, '.', ',');

// Output all data submitted and calculation into a table to view
echo '<tr>
<td align="right">' . $row .
'</td><td>' . $_POST['item'][$i] .
'</td><td align="right">' . $fee_formatted .
'</td><td colspan="2" align="right">' . $duration_formatted .
'</td><td align="right">' . $total_formatted .
'</td></tr>';

}

echo '<tr><td colspan="5">Grand Total US$:&nbsp;' . NumWords($grandTotal) . '</td>' .
'<td align="right">'. $grandTotal_formatted .'</td></tr>';

echo '</table></fieldset>';

?>
</center>
</body>
</html> 
```

# python - 使用 SQLite 查询日期时出现 ValueError

> ID：13650896
> 
> 赞同：1
> 
> 时间：2012-11-30T18:21:47.930
> 
> 标签：python, sqlite

一个简单的例子：

```
import sqlite3, datetime, csv
import pandas.io.sql as sql
from dateutil.parser import parse

my_db = 'test_db.db'

connection=sqlite3.connect(my_db,detect_types=sqlite3.PARSE_DECLTYPES|sqlite3.PARSE_COLNAMES)
cursor = connection.cursor()

cursor.execute('''CREATE TABLE test_table (Id  INTEGER PRIMARY KEY, Date DATE);''')

date_str = '1/1/2011'
date_parsed = parse(date_str)

cursor.execute('INSERT into test_table (Id, Date) values(?,?)',(1,date_parsed))

cursor.execute('SELECT * FROM test_table') 
```

产量：

```
ValueError: invalid literal for int() with base 10: '01 00:00:00' 
```

我只是想让 SQL 数据库以日期时间格式返回我的日期，以便我可以对它们执行过滤查询。

我已经阅读了这篇相关文章以供参考：

[SQLite 日期存储和转换](https://stackoverflow.com/questions/4272908/sqlite-date-storage-and-conversion)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:39:52.073

在你的内部`CREATE TABLE`，你正在使用`Date DATE`

```
CREATE TABLE test_table (Id  INTEGER PRIMARY KEY, Date DATE) 
```

这样做的问题是，它试图映射到`datetime.date`您的格式不是的，如果您将格式更改为使用 a `TIMESTAMP`，那么它可以正常工作并尝试使其成为`datetime.datetime`...

```
CREATE TABLE test_table (Id  INTEGER PRIMARY KEY, Date TIMESTAMP) 
```

# php - 使用相同的var后PHP通过引用错误

> ID：13650898
> 
> 赞同：2
> 
> 时间：2012-11-30T18:22:19.123
> 
> 标签：php, reference

看看这段代码，帮助我理解结果

```
$x = array('hello', 'beautiful', 'world');
$y = array('bye bye','world', 'harsh');

foreach ($x as $n => &$v) { }

$v = "DONT CHANGE!";

foreach ($y as $n => $v){ }

print_r($x);
die; 
```

它打印：

```
Array
(
    [0] => hello
    [1] => beautiful
    [2] => harsh
) 
```

为什么它会改变 $x 的 LAST 元素？它只是不遵循任何逻辑！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:28:35.187

```
// ...
$v = "DONT CHANGE!";
unset($v);
// ... 
```

因为`$v`仍然是一个引用，它稍后会获取最后一个 foreach 循环中的最后一项。

**编辑：**查看它读取[的参考](http://php.net/manual/en/control-structures.foreach.php)（在代码块中）

> `unset($value); // break the reference with the last element`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T18:28:35.260

执行此循环后：

```
foreach ($x as $n => &$v) { } 
```

`$v`最终作为对`$x[2]`. 无论你分配给什么，`$v`实际上都会被分配`$x[2]`。所以在第二个循环的每次迭代中：

```
foreach ($y as $n => $v) { } 
```

`$v`（或者我应该说`$x[2]`）变成：

*   `'bye bye'`
*   `'world'`
*   `'harsh'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T19:01:32.717

Foreach 循环不是函数。foreach 中的 & 符号不能像函数一样保留值。因此，即使您在第二个 foreach () 中有 $var，也不要期望它像循环之外的“幽灵”。

# sql - 基于多个字段（Where And）选择数据

> ID：13650899
> 
> 赞同：4
> 
> 时间：2012-11-30T18:22:24.157
> 
> 标签：sql, forms, vba, select

我有大量数据试图根据两个级联组合框进行分类。我收到错误`Microsoft Access can't find the field '|1' referred to in your expression`，它指向我：

```
ElseIf [Forms]![Send To GE]![cboFil] = "LCP" Then
strSQL = "Select * From [To_GE] Where [Community] = " & Chr(34) & Me.cboSubFil.Value & Chr(34) And [LCP] = "& Chr(34) & Me.cboSSubFil.Value & Chr(34)"
Set rst = db.OpenRecordset(strSQL) 
```

似乎`And`应该为此工作。是什么导致了这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:47:26.707

```
strSQL = "Select * From [To_GE] Where [Community] = " & Chr(34) & Me.cboSubFil.Value &     Chr(34) And [LCP] = "& Chr(34) & Me.cboSSubFil.Value & Chr(34)" 
```

也许应该是

```
strSQL = "Select * From [To_GE] Where [Community] = " & Chr(34) & Me.cboSubFil.Value & Chr(34) & " And [LCP] = " & Chr(34) & Me.cboSSubFil.Value & Chr(34) 
```

为了使事情更容易阅读，尽管我建议您在查询中转义引号或切换到单引号

```
strSQL = "Select * From [To_GE] Where [Community] = '" & Me.cboSubFil.Value & "' And [LCP] = '" & Me.cboSSubFil.Value & "'" 
```

# android - View.resolveSizeAndState() 的第三个参数有什么用处？

> ID：13650903
> 
> 赞同：12
> 
> 时间：2012-11-30T18:22:50.877
> 
> 标签：android

我去了官方文档页面[android google official doc](http://developer.android.com/reference/android/view/View.html#resolveSizeAndState%28int,%20int,%20int%29)，但似乎他们犯了一个严重的错字：我们没有关于该方法的第三个参数的信息。所以我只是想知道是否有人已经知道如何定义第三个 int 参数。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-30T19:07:38.100

`childMeasuredState`是返回的值`View.getMeasuredState()`。布局将使用 聚合其子测量状态`View.combineMeasuredStates()`。这是一个例子：

```
int childState = 0;

for (int i = 0; i < count; i++) {
    final View child = getChildAt(i);
    if (child.getVisibility() != GONE) {
        measureTheChild(child);
        childState = combineMeasuredStates(childState, child.getMeasuredState());
    }
} 
```

但是，在大多数情况下，您可以简单地传递 0。子状态当前仅用于判断 View 的测量尺寸是否小于它想要的尺寸。如果需要，此信息又用于调整对话框的大小。在您的特定情况下，您不必担心。

# java - 具有 getter 但没有 setter 的休眠实体属性：PropertyNotFoundException

> ID：13650905
> 
> 赞同：3
> 
> 时间：2012-11-30T18:23:02.627
> 
> 标签：java, hibernate, coding-style

我想要一个实体属性，休眠保存到数据库，但在重建对象时不尝试设置。

我有这样的课；

```
@Entity
class Quote {
    private int itemCost;
    private int quantity;

    public Quote(int itemCost, int quantity) {
        this.itemCost = itemCost;
        this.quantity = quantity;
    }

    public void setItemCost(int itemCost) {
        this.itemCost = itemCost;
    }

    public void setQuantity(int quantity) {
        this.quantity = quantity;
    }

    public int getItemCost() {
        return this.itemCost;
    }

    public int getQuantity() {
        return this.quantity;
    }

    // This attribute "totalCost" has a getter only, no setter. 
    // It causes a runtime error (see below). 
    public int getTotalCost() {
        return this.itemCost * this.quantity;
    }
} 
```

我想要以下数据库表；

```
quotes
itemCost   | quantity    | totalCost
------------------------------------
100        | 7           | 700
10         | 2           | 20
6          | 3           | 18 
```

如您所见，“totalCost”字段可以取自`getTotalCost()`，但我不想有一个`setTotalCost()`方法，在我的应用程序中它没有任何意义。

我希望将一个字段写入不再存在的数据库的原因是`set`，该值可用于共享数据库的其他应用程序（即图形界面）。

显然，在运行时我目前收到此错误：

`org.hibernate.PropertyNotFoundException: Could not find a setter for property totalCost in class Quote`

我可以有一个空的二传手，但这是不干净的。在我的真实代码中，大约有 13 个像这样的“只读”属性，我不希望 13 个空白设置器弄乱我的代码。

有一个优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-04T09:48:51.173

请参阅[当有 getter 时，Hibernate 是否总是需要一个 setter？](https://stackoverflow.com/questions/2676689)：

关于课堂使用

> @Entity(access = AccessType.FIELD) 并注释您的属性。

或者

> 您可以使用 @Transient 注释来标记不应存储在数据库中的字段。您甚至可以使用 @Formula 注释让 Hibernate 为您派生字段（它通过使用它发送到数据库的查询中的公式来完成此操作）。

# windows-8 - 在 DOMContentLoaded 或 onactivate 事件之后调用 WinJS.UI.processAll()

> ID：13650907
> 
> 赞同：2
> 
> 时间：2012-11-30T18:23:08.370
> 
> 标签：windows-8, winjs

我见过的大多数 MSDN WinJS 应用示例都`WinJS.UI.processAll()`在应用`activated`事件发生后调用。我还看到了一些`WinJS.UI.processAll()`在事件发生后调用的非 MSDN 教程`DOMContentLoaded`。

是否有任何实际理由使用一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:49:58.197

这是一个时间问题；我个人在 DOMContentLoaded 上调用它：

```
WinJS.Utilities.ready().done(function() {
    WinJS.UI.processAll();
}); 
```

主要原因之一是您可以将 Promise 返回给激活处理程序（`setPromise`您在模板中看到的调用），以便启动屏幕在`WinJS.UI.processAll`完成之前保持更长时间。这可以更好地从初始屏幕过渡到完整的内容，而不会看到部分构建的 UI。

但是，如果您的 UI 会根据激活类型发生变化，您可能希望将其延迟到您已经构建了 DOM 之前。由于您需要激活类型来产生这些差异，因此您需要在引发激活事件后调用它。

# java - 在 JSP 中动态建立 Oracle DB 连接

> ID：13650909
> 
> 赞同：0
> 
> 时间：2012-11-30T18:23:14.857
> 
> 标签：java, oracle, jsp, jdbc

动态连接数据库jsp

嗨，我正在尝试动态连接到数据库。因此，当用户从索引页面单击链接时，它将发送参数“OS”，因此我的测试页面将接收参数 OS，在具有数据库信息列表的文本文件中查找匹配项，例如

```
XP-jdbc:oracle:thin@xx.xxx.xx.xx:xxxx:XPXP1-XP_user-XP_pass
W7-jdbc:oracle:thin@YY.YYY.YY.YY:YYYY:W7W71-W7_user-W7_pass
MAC-jdbc:oracle:thin@ZZ.ZZZ.ZZ.ZZ:ZZZZ:MACO1-MAC_user-MAC_pass
LINNUX-jdbc:oracle:thin@AA.AAA.A.AA:AAAA:LINN1-LINNUX_user-LINNUX_ph1 
```

我的尝试：

```
String userName = request.getParameter("OS");
try{
    String db = "";
    String[] temp1;
    String dblist = root + "\\" + "dblist.txt";
    BufferedReader dbin = new BufferedReader(new FileReader(dblist));
    while ((db = dbin.readLine()) != null){
        temp1=db.split("-");
        if ((temp1[0].equals(userName))){
             connString = temp1[1].toString();
             connUser = temp1[2].toString();
             connPass = temp1[3].toString();
        }
     }
     dbin.close();
}catch (IOException ex) {
    System.out.println(ex);
}

try{
    DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
    Connection conn = DriverManager.getConnection(connString, connUser, connPass);
    Statement stmt = conn.createStatement();

} 
```

我的问题是，这不起作用！我得到 java.sql.SQLException: Invalid Oracle URL specified when I open my web page....我做错了什么？

显然我的属性文件被损坏了>.>这就是为什么我的属性文件只读取了它的一半组件的原因......无论如何感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T04:31:39.570

你可以使用**Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");** 而不是**DriverManager.registerDriver(new oracle.jdbc.OracleDriver());**

另外，您是否检查过 YY.YYY.YY.YY:YYYY 是否被正确的 IP 和端口替换？

# iphone - Admob 插页式广告在 ios6 中不起作用

> ID：13650912
> 
> 赞同：0
> 
> 时间：2012-11-30T18:23:21.190
> 
> 标签：iphone, ios6, admob

我正在为 ios 使用最新的 admob SDK(V 6.2.1)。ios6 上不显示广告并给出错误`Request Error: No ad to show`。

即使测试模式设置为 YES 或 NO，这也只会在 ios 6 上发生。广告在低于 ios6 的版本上运行良好。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:29:23.673

Test mode doesn't work on iOS 6 devices as per this [forum post](https://groups.google.com/forum/?fromgroups=#!searchin/google-admob-ads-sdk/test%2420ios%24206/google-admob-ads-sdk/WaW00YBVL6I/fYpukjJBPSoJ).

If you want to get test ads to show up, you will have to use `testDevices` and pass in the ID you get from the AdSupport library (instructions [here](https://developers.google.com/mobile-ads-sdk/docs/admob/best-practices#testmode)).

If you want to test your ad click flow though I'd take the forum post's suggestion and create a house ad campaign fully allocated to a test publisher ID, and use the test publisher ID into your applications to test.

# c# - 从 RequiredRole 和其他策略中捕获异常以使用 Fluent Security 进行重定向

> ID：13650915
> 
> 赞同：2
> 
> 时间：2012-11-30T18:23:34.543
> 
> 标签：c#, asp.net-mvc-3, exception-handling, fluent-security

使用 Fluent Security，我已经使用 DenyAnonymousAccess、DenyAuthenticationAccess 和 RequireRole 配置了网站访问。

```
SecurityConfigurator.Configure(configuration =>
{
    configuration.ResolveServicesUsing(new FluentSecurityServiceLocator());
    configuration.GetAuthenticationStatusFrom(CurrentUser.IsAuthenticated);

    configuration.GetRolesFrom(CurrentUser.Roles);

    configuration.For<HomeController>().DenyAnonymousAccess();
    configuration.For<ReportsController>().RequireRole(UserRole.Administrator);
    configuration.For<AccountController>().DenyAuthenticatedAccess();

    configuration.For<AccountController>(x => x.ChangePassword()).DenyAnonymousAccess();
}); 
```

我已经处理了 DenyAnonymousAccess 的 PolictyViolationException 并重定向到登录页面。

```
public ActionResult Handle(PolicyViolationException exception)
{
    return new RedirectToRouteResult(
       new RouteValueDictionary(new { action = "Login", controller = "Account" })
       );
} 
```

但我不确定从 RequireRole 捕获异常是否是同一个过程？如果违反了 RequireRole，我需要重定向。

此外，当用户未登录并单击附加到角色的链接时，我会得到未处理版本的拒绝匿名访问异常。我在配置和实现中做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T05:47:53.943

您必须正确定义违规处理程序类的名称。这取决于需要处理的违规行为。如果您正在处理 DenyAnonymousAccessPolicy 的违规，您的违规处理程序类的名称必须以策略名称开头，并且它必须实现 IPolicyViolationHandler。对于所有此类违反政策的行为，必须遵守此规则：

```
public class DenyAnonymousAccessPolicyViolationHandler : IPolicyViolationHandler
{
    public ActionResult Handle(PolicyViolationException exception)
    {

        //Log the violation, send mail etc. etc.
        var rvd = new RouteValueDictionary(new
        {
            area = "",
            controller = "Account",
            action = "LogOn",
            statusDescription = exception.Message
        });
        return new RedirectToRouteResult(rvd);

    }
} 
```

对于 RequireRolePolicy，处理程序应如下所示：

```
public class RequireRolePolicyViolationHandler : IPolicyViolationHandler
{
    public ActionResult Handle(PolicyViolationException exception)
    {

        //Log the violation, send mail etc. etc.
        var rvd = new RouteValueDictionary(new
        {
            area = "",
            controller = "Home",
            action = "Home",
            statusDescription = exception.Message
        });
        return new RedirectToRouteResult(rvd);

    }
} 
```

检查此链接以进一步了解流畅的安全策略违规处理程序。

[https://github.com/kristofferahl/FluentSecurity/wiki/Policy-violation-handlers-2.0](https://github.com/kristofferahl/FluentSecurity/wiki/Policy-violation-handlers-2.0)

希望能帮助到你！！！

# java - Java应用的用户注册设计

> ID：13650920
> 
> 赞同：0
> 
> 时间：2012-11-30T18:23:53.457
> 
> 标签：java, registration

我有一个独立的开源 Java 应用程序。我通过网站分发软件。目前，要求用户在下载软件之前在网站上提交他们的姓名和电子邮件地址。我使用此电子邮件列表向人们发送有关更新等的信息。我的问题是，尽管采取了安全措施，网站注册还是会收到大量垃圾邮件。

作为替代方案，我想在软件中有一个注册页面，并让软件将注册信息发送到我服务器上的数据库。这部分很容易实现，但我担心的是连接字符串将在开源应用程序中进行硬编码。我的数据库将暴露给任何获得源代码的人。有谁知道如何让我的独立应用程序将用户信息发送到数据库而不会出现这个安全问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:31:06.303

如何将`data (say JSON)`java 应用程序推送到 a`webservice`并让`webservice`数据推送到您的`remote database`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:32:39.523

你永远不应该公开你的数据库端口，更不用说它的登录凭据，所以你是对的，这不是你想要做的。这是你能做的最不安全的事情。

话虽如此，您可以编写一个位于您的服务器上并接受连接的 Java 应用程序，有点像您的数据库的代理，它接受 HTTP 请求，然后让客户端在用户输入他的信息时向服务器发送 HTTP 请求。这将确保您的数据库不公开，并且您不会公开用户数据或登录信息。

一个简单的方法可能是使用[Apache 的 HttpComponents library 之](http://hc.apache.org/)类的东西。

# umbraco - 后台成员

> ID：13650923
> 
> 赞同：4
> 
> 时间：2012-11-30T18:23:59.893
> 
> 标签：umbraco, member

我正在 Umbraco 开发一个应用程序，我需要从外部现有数据库中获取我的成员。我已经成功地制作了一个用于验证用户的自定义会员提供程序。

我现在想做的是让外部数据库中的成员列表在后台的成员区域中可见。这是可能的，如果有的话，关于如何实现它的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:30:58.793

很不幸的是，不行。

要实现这一点，您必须为 Umbraco 构建一个自定义成员应用程序。

== 根据要求编辑 ==

成员 gui 被显式构建用于处理 Umbraco 成员对象，这些对象可以使用与 Umbraco 中所有对象相同的数据类型的属性进行扩展。这个 gui 不能简单地与常规的 asp.net 会员提供程序一起使用，因为它们不兼容。

为了最好地匹配这个，你应该扩展*umbraco.providers.members*。**UmbracoMembershipProvider**类而不是普通的 asp.net 成员资格提供程序。

现在，您可以从 UmbracoMembershipProvider 向任何 asp.net 会员提供者进行调用，但这是对架构和哲学的讨论 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:57:11.073

我在之前的项目中也有类似的要求。我们创建了一个计划任务，该任务使用安全的 Web 服务来收集用户，然后以编程方式将它们添加到 Umbraco 后台。计划任务必须检查现有用户以避免重复条目。

此外，用户的密码需要以纯文本形式提供，以便将它们添加到 Umbraco。如果不是，那么您将需要为每个用户创建一个新密码，这可能是不切实际的。

[有关会员 api](http://our.umbraco.org/wiki/how-tos/membership-providers)的更多信息，请参见此处。

# php - 致命错误：由于代码错误，php中允许的内存大小错误

> ID：13650924
> 
> 赞同：0
> 
> 时间：2012-11-30T18:24:09.257
> 
> 标签：php, mysqli

我对 PHP 非常熟悉，但我刚刚开始用它做一些面向对象的东西。我想建立一个单例数据库连接，但遇到了问题和错误。“致命错误：允许的内存大小为 134217728 字节用尽（试图分配 523800 字节）”我知道我不应该用完内存我正在运行的查询是

```
$con = getConnection();
$stmt = $con->prepare("SELECT gene_name,jgi_protein_id FROM   jgi_transcriptid_proteinid_match where our_protein_id = ?"); 
```

这是该类的代码。

```
class Connection
{
    // Store the single instance of connection 
    private static $connection;

    private function __construct()
    {
        $connection = new mysqli(HOSTNAME, DBUSER, PASSWORD, DBNAME);

        if ($connection->connect_errno)
            die("Failed to connect to MySQL: (" . $connection->connect_errno . ") " . $connection->connect_error);
    }

    public static function getInstance() 
    { 
        if (!self::$connection) 
            self::$connection = new Connection(); 

        return self::$connection; 
    }

    public function prepare($query) 
    {
        $statement = $this->prepare($query);
        return $statement; 
    }
} 
```

我正在使用 mysqli 作为数据库的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:34:45.013

这段代码有几个问题：

**无限递归**

```
public function prepare($query) 
{
  $statement = $this->prepare($query);
  return $statement; 
} 
```

**引用局部变量，而不是静态变量**
代码可能应该引用`self::$connection`. 但是，基于课程，我不确定，因为`self::$connection`在 中以不同的方式使用`getInstance()`，我看不到任何地方都被称为。

```
private function __construct()
    {
        $connection = new mysqli(HOSTNAME, DBUSER, PASSWORD, DBNAME);

        if ($connection->connect_errno)
            die("Failed to connect to MySQL: (" . $connection->connect_errno . ") " . $connection->connect_error);
    } 
```

**命名混淆**
类名为`Connection`，它包含一个名为 的静态变量`$connection`，该变量存储该类的单例实例。构造函数包含另一个`$connection`，而是一个**mysqli**连接。

**重构类 - 未经测试的修复**
下面的类未经**测试**，仅用于说明目的。使用风险自负。

class Connection { // 存储类的单个实例 private static $instance; // 存储 mysqli 连接 private $connection;

```
public function __construct() {
    // NOTE: it would be better to pass connection parameters as arguments
    $this->connection = new mysqli(HOSTNAME, DBUSER, PASSWORD, DBNAME);

    if ($this->connection->connect_errno)
        die("Failed to connect to MySQL: (" . $this->connection->connect_errno . ") " . $this->connection->connect_error);
}

public static function getInstance() { 
    if(empty(self::$instance)) {
        self::$instance = new Connection(); 
    }

    return self::$instance; 
}

public function prepare($query) {
    $statement = $this->connection->prepare($query);
    return $statement; 
} 
```

}

# c# - 当返回类型显式时，在返回不同类型的方法之间调用不明确

> ID：13650925
> 
> 赞同：0
> 
> 时间：2012-11-30T18:24:13.393
> 
> 标签：c#, ambiguous-call

> **可能重复：**
> [关于 C# 中模糊调用的问题](https://stackoverflow.com/questions/887044/question-about-ambiguous-calls-in-c-sharp)

我有这两种方法：

```
TypeA MyMethod(string s) {}
TypeB MyMethod(string s) {} 
```

以下调用给了我“方法之间的歧义”错误：

```
TypeA ta = MyMethod("some string"); 
```

当我要求一个`TypeA`对象显式返回而不是通过`var`或以其他方式返回时，这是如何发生的？

* * *

`TypeA`并且`TypeB`是单独的类，它们没有任何共同点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T18:31:30.657

从 C# 规范 v4.0，第 1.6.6 节：

> 方法的签名在声明该方法的类中必须是唯一的。方法的签名由方法的名称、类型参数的数量及其参数的数量、修饰符和类型组成。方法的签名不包括返回类型。

您有两个具有相同签名的方法，因为它们仅在返回类型上有所不同。这是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:31:13.307

如果您以这种方式调用方法，则不能重载返回类型

```
TypeA ta = MyMethod("some string"); 
```

那么编译器很明显可以选择一个方法。但是如果你以这种方式调用它会发生什么

```
MyMethod("some string"); 
```

你没有使用方法返回的值，那么编译器将无法选择合适的方法来调用，这就是为什么它是一个模棱两可的调用

# ssis - SSIS 填充日期时间格式：“hh mm ss nnn cc yy mm dd”

> ID：13650927
> 
> 赞同：5
> 
> 时间：2012-11-30T18:24:23.067
> 
> 标签：ssis

这可能是一个非常简单的问题，但是：

我正在尝试命名文件 TestSheet.hhmmssnnnccyymmdd

我在 SSIS 中设置了一个变量，我在表达式生成器中的表达式设置为：

`@[User::str_Var] + Right("0" + (DT_STR,4,1252) DatePart("hh",getdate()),2) + Right("0" + (DT_STR,4,1252) DatePart("mi",getdate()),2) + Right("0" + (DT_STR,4,1252) DatePart("ss",getdate()),2) + ".txt"`

而且我知道 ：

`Right("0" + (DT_STR,4,1252) DatePart("m",getdate()),2) + Right("0" + (DT_STR,4,1252) DatePart("d",getdate()),2)`

会得到我“mm”和dd“

我的问题是..我有“hh mm ss mm dd”，我如何得到“nnnccyy”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:06:17.770

即使您要求纳秒（十亿分之一），我假设您的意思是毫秒（千分之一）精度。[DATEPART](http://msdn.microsoft.com/en-us/library/ms137586.aspx)仅提供毫秒精度的切片器。

使用表达式，构建格式字符串的位将如下所示

```
Right("0" + (DT_STR,2,1252) DatePart("hh",getdate()),2) 
+ Right("0" + (DT_STR,2,1252) DatePart("mi",getdate()),2) 
+ Right("0" + (DT_STR,4,1252) DatePart("ss",getdate()),2) 
+ Right("000" + (DT_STR,3,1252) datepart("Ms", getdate()),3) 
+ (DT_STR,4,1252) datepart("yyyy", getdate()) 
+ (DT_STR,2,1252) datepart("mm", getdate()) 
+ (DT_STR,2,1252) datepart("dd", getdate()) 
```

我不知道 getdate 在内部是如何工作的，但在研究中我确实发现了这个问题[What is the best way to measure how long code takes to perform?](https://stackoverflow.com/questions/2072361/what-is-the-best-way-to-measure-how-long-code-takes-to-execute/2072367) 但我认为它基本上`DateTime.Now` 是从 Eric Lippert 那里调用 Money 报价，但这个是最相关的。

> 请注意，由 DateTime 测量的“挂钟时间”仅精确到 30 毫秒。DateTime 用于表示墙上的时钟或您上次编辑文件的时间；它不必具有纳秒精度，因此它不需要

如果您必须达到纳秒级精度，那么快乐狩猎，但表情不会削减它。正如@fegemo 所指出的，脚本任务可以让您获得千分之一的[自定义格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)，但这仍然比您想要的精度低两个数量级。

```
this.Dts.Variables["User::CustomFormat"].Value = DateTime.Now.ToString("HHmmssfffffyyyyMMdd"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:35:15.203

根据文档[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ms139875.aspx)，`GetDate()`返回类型中的日期`DT_DBTIMESTAMP`，其精度为秒后最多 3 位小数：

> 由年、月、日、小时、分钟、秒和小数秒组成的时间戳结构。小数秒的最大刻度为 3 位数。[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ms141036.aspx)

您可以使用小数位来确定您需要的部分信息：

```
DT_DBTIMESTAMP        yyyy-mm-dd hh:mm:ss[.fff] 
```

脚步：

1.  使用获取毫秒数`DATEPART("Ms", GetDate())`
2.  将结果除以`10^6`（将毫秒转换为纳秒）
3.  将结果转换为`DT_I4`, 以仅获取整数部分。

不幸的是，`000`由于`DT_DBTIMESTAMP`.

但是，我不知道如何以您需要的精度从系统中获取当前日期。

# django - Selenium：find_element_by_link_text - TypeError：“WebElement”类型的对象没有 len()

> ID：13650929
> 
> 赞同：2
> 
> 时间：2012-11-30T18:24:27.430
> 
> 标签：django, selenium

我正在为 Django 做一个测试开发教程。 [http://www.tdd-django-tutorial.com/tutorial/1/](http://www.tdd-django-tutorial.com/tutorial/1/)

当我运行测试时，我遇到了 find_element_by_link_text 的问题。错误显示：

```
find_element_by_link_text - TypeError: Object of type 'WebElement' has no len() 
```

测试失败的部分是这个：

```
 polls_links = self.browser.find_element_by_link_text('Polls')
    self.assertEquals(len(polls_links), 2) 
```

如果我删除这些行，测试会正常工作，那么会在管理员中添加 Polls 模型。在管理站点中，在 Selenium 测试期间，有 2 个链接带有文本“投票”。

问题似乎不是它没有识别它们，问题似乎是 find_element_by_link_text 返回的...我不知道

谁能指出我正确的方向？我做了一些研究，显然它与 Firefox 的 Selenium 驱动程序有关，但我无法清除它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T22:37:23.663

It's

```
polls_links = self.browser.find_elements_by_link_text('Polls') 
```

i.e. `elements` (with an `s`) and not `element`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:36:51.097

这条线是你的问题。

```
polls_links = self.browser.find_element_by_link_text('Polls') 
```

您需要添加`.text`方法来返回元素的文本，而不是元素本身。

```
polls_links = self.browser.find_element_by_link_text('Polls').text 
```

# xml-parsing - 如何在我的休眠 xml 文件中包含另一个 xml 文件

> ID：13650930
> 
> 赞同：2
> 
> 时间：2012-11-30T18:24:36.593
> 
> 标签：xml-parsing, hibernate-mapping

我想要两个休眠配置文件，一个指向主数据库，另一个指向从数据库。我不想将所有表格拼出两次，而是在自己的文件中指定表格并将其包含在两个配置文件中。

我试过使用实体

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"
    [ <!ENTITY targetfilename SYSTEM "targetfilename.xml"> ]>
<hibernate-configuration>
    <session-factory>
        &targetfilename;
    </session-factory>
</hibernate-configuration> 
```

尽管它能够创建引用，但它正在尝试解析我的 apache bin 目录中的文件名：

`/Users/me/Environment/apache-tomcat-6.0.35/bin/targetfilename.xml`

那是行不通的，因为我的本地机器上的路径与我的 prod 环境上的路径不同。包含的文件与主休眠配置文件位于同一目录中。

我尝试使用`xi:include`，但它似乎与休眠 xml DTD 不兼容，因为我收到错误`Attribute "xmlns" must be declared for element type "hibernate-configuration".`

我也试过

```
[ <!ENTITY targetfilename SYSTEM "./targetfilename.xml"> ]> 
```

但这也不起作用。

我欢迎任何有用的想法。谢谢！

# java - XSD 到 HTML 表单

> ID：13650933
> 
> 赞同：2
> 
> 时间：2012-11-30T18:24:44.363
> 
> 标签：java, xml, web-services, xslt, xsd

我的任务是构建一个基于 Web 的交互式 SDK，以加快我们 RESPful Web 服务 API 的客户端开发。部分解决方案需要一个能够读取 XSD 并动态生成可编辑 html 表单的引擎。这个想法是让用户填写在线表单以生成有效的 XML 文档。我希望找到一个产品或库来帮助我们到达那里，而不是从头开始构建它。我们希望将其集成到 tomcat/jsp/java 环境中。以下是一些要求：

> (1) 支持 XSD 包含和分组元素（100 多个服务在包含绑定的 2 个 XSD 文件中）
> (2) 允许选择（通过配置）元素节点生成表单（XSD 的子集）
> (3) 表单应该允许数据元素和属性的条目
> （4）支持0到表单中任何类型的未绑定出现（添加/删除/折叠）
> （5）表单小部件：
>    a。选项 b的单选按钮
>    。
>    布尔值c的复选框。枚举的下拉列表
>    d. Datepickers for Dates
> (6) 允许在表单上添加默认数据
> (7) XSD 验证应集成在表单中突出显示错误字段
> (8) 开源和可扩展

*约束：我正在现有服务之上构建一个层，我无权修改 XSD。

我查看了 xsd-forms ( [code.google.com/p/xsd-forms](http://code.google.com/p/xsd-forms) )，它看起来很有希望，但它处于 pre-alpha 状态。还查看 XSDForm ( [www.ilerian.com/xsd-web-form-overview](http://www.ilerian.com/xsd-web-form-overview) )，但它可能难以与我们的技术堆栈集成，并且只完成我们需要的部分功能（但仍在查看它）。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-20T15:03:25.377

我知道这是一个老问题，但我自己遇到了这个问题，找不到令人满意的开源解决方案。我最终编写了自己的实现[XSD2HTML2XML](https://github.com/MichielCM/xsd2html2xml)。据我所知，它是最完整的工具。它支持很多主题启动者要求的内容（以及更多:)）：

1.  从 XSD 自动生成 HTML 表单；支持包括和组。
2.  不支持选择 XSD 的子集。
3.  元素和属性都受支持。
4.  minOccurs 和 maxOccurs 都受支持。
5.  GUI 元素由类型决定，因此单选按钮、复选框、下拉列表和日期选择器都受支持。
6.  支持默认（和固定）数据。这包括来自外部 XML 文档的数据。
7.  HTML5 属性（模式、最小值、最大值等）用于验证。如何向用户显示验证取决于浏览器的实现。
8.  在 MIT 许可下开源。

如果您更喜欢开箱即用的解决方案而不是自己编写解决方案，请参阅我的实现[XML Schema Form Generator](http://www.michielmeulendijk.nl/xml-schema-form-generator/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:30:04.333

所有 Web 浏览器都可以将 XML 文档解析为 DOM 树，您可以从 JavaScript 访问该树。如果您感到困惑，这可能是与实际可见页面的 DOM 树完全不同的 DOM 树。

我会直接从 Web 服务器加载 XSD，并用 JavaScript 编写一个自定义应用程序来编辑基于它的表单，JavaScript 会为 XSD 动态创建页面和表单元素。

然后，应用程序可以为完成的表单创建另一个 DOM 树，并在此和可见表单元素之间打乱值。

最后，当用户完成表单时，它可以将表单的 XML 文档转储回服务器。

多年来为各种公司开发了 CMS 系统，我发现这是最简单的方法。它对用户输入也非常敏感，并允许您在非常基本的硬件上运行它。

让我知道您是否需要任何帮助，或者对我所说的内容进行任何澄清。我真的很喜欢编写这类系统！

# java - 使用插件将消息从 Bukkit 服务器传输到 IRC

> ID：13650937
> 
> 赞同：2
> 
> 时间：2012-11-30T18:25:02.193
> 
> 标签：java, plugins, irc, bukkit

我的朋友不久前让我写一个插件，最近（大约五分钟前）他让我添加一个功能，人们可以登录到 esper.net 上的特定 IRC 并在上面聊天。一切都设置好了 - 我有一个命令让他们登录，它会让他们使用他们在 MineCraft 中的用户名的昵称加入。服务器使用聊天机器人登录用户，以便他们可以聊天，我已经设置好所有内容，以便当输入命令 (/irc login ) 时，他们会向机器人发送正确的消息（具体来说，它看起来像是他们写的/msg 在 IRC 聊天中识别）。好吧，我让插件设置了一个所有内容都已格式化的字符串，但我需要知道如何实际将消息发送到 IRC。下面是我的代码（当用户输入命令“/irc”和“player”时，整个事情都会触发 是玩家输入任何命令时设置的对象）。我还想要一些代码来接收机器人发回的内容，这样我就知道玩家是否成功登录。

```
if(args[0].equalsIgnoreCase("login") && args.length == 3) {
    String msg = "/msg <bot name> login " + args[1] + " " + args[2];
    //args[1] is the username and args[2] is the password
    String userName = args[1];
    //Creating the connection with a nickname of userName
    //Here is where I need to send that message through IRC
}
else {
    String msg;
    for(int i = 0; i <= args.length; i++) {
        msg += args[i] + " ";
    }
} 
```

顺便说一句，我还不知道这个机器人的名字，因为我的朋友还在为它写代码。我想当我得到它时我可以把它放进去。此外，域名仍有待确定，因为他需要购买网站并进行设置。任何使此代码功能更快的建议也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:49:17.807

我认为您应该研究 Java 套接字连接

但这是一个基本的 IRC 连接

```
class IRC
{
      //Connection Details
      String server = "IRC ADDRESS";
      String nick = "NICKNAME";
      String login = "LOGIN";
      String Pass = "PASS";  
      String channel = "CHANNLE";

  //Socket Stuff
  Socket socket;
  BufferedWriter writer;
  BufferedReader reader;

      public void HandleChat() throws Exception 
      {
           socket = new Socket(server, 6667);

           writer = new BufferedWriter(
               new OutputStreamWriter(socket.getOutputStream( )));

           reader = new BufferedReader(
               new InputStreamReader(socket.getInputStream( )));

           // Log on to the server.      
           writer.write("PASS " + Pass + "\r\n");
           writer.write("NICK " + nick + "\r\n");
           writer.write("USER " + login +"\r\n");
           writer.flush( );

           // Read lines from the server until it tells us we have connected.
           String line = null;

           while (((line = reader.readLine( )) != null))
           {
           }            
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T09:36:03.603

这是一些可以连接到服务器的类。您可以使用它并根据需要对其进行修改。您需要做的就是创建一个新的 ChatClient 实例并为其提供正确的参数，然后它将与服务器连接。

## 聊天客户端

```
 package com.weebly.foxgenesis.src;
import java.net.*;
import java.io.*;

public final class ChatClient
{  
    private Socket socket = null;
    private DataOutputStream streamOut = null;
    private ChatClientThread client = null;
    private String serverName = "localhost";
    private int serverPort = -1;
    private final ChatReciever output;

/**
 * Create a new ChatClient that connects to a given server and receives UTF-8 encoded messages
 * @param a Client class
 */
public ChatClient(ChatReciever chatReciever)
{ 
    output = chatReciever;
    serverPort = chatReciever.getPort();
    serverName = chatReciever.getHost();
    connect(serverName, serverPort);
}

private void connect(String serverName, int serverPort)
{  
    output.handleLog("Establishing connection. Please wait ...");
    try
    {  
        socket = new Socket(serverName, serverPort);
        output.handle("Connected to chat server");
        open();
    }
    catch(UnknownHostException uhe)
    {  
        output.handleError("Host unknown: " + uhe.getMessage()); 
    }
    catch(IOException ioe)
    {  
        output.handleError("Unexpected exception: " + ioe.getMessage()); 
    } 
}

/**
 * Sends a message to the server through bytes in UTF-8 encoding 
 * @param msg message to send to the server
 */
public void send(String msg) throws IOException
{  
    streamOut.writeUTF(msg); 
    streamOut.flush();
}

/**
 * forces the ChatReciever to listen to a message (NOTE: this does not send anything to the server)
 * @param msg message to send
 */
public void handle(String msg)
{  
    output.handle(msg);
}

private void open() throws IOException
{   
    streamOut = new DataOutputStream(socket.getOutputStream());
    client = new ChatClientThread(this, socket); 
}

/**
 * tries to close 
 */
public void close() throws IOException
{  
    if (streamOut != null)  
        streamOut.close();
    if (socket    != null)  
        socket.close(); 
}

/**
 * closes the client connection
 */
@SuppressWarnings("deprecation")
public void stop()
{
    if(client != null)
        client.stop();
    client = null;
}

/**
 * checks if the ChatClient is currently connected to the server
 * @return Boolean is connected
 */
public boolean isConnected()
{
    return client == null ?(false) : (true);
}
} 
```

## 聊天服务器线程

```
 package com.weebly.foxgenesis.src;
import java.net.*;
import java.io.*;

public final class ChatClientThread extends Thread
{  
    private Socket           socket   = null;
    private ChatClient       client   = null;
    private DataInputStream  streamIn = null;

    public ChatClientThread(ChatClient _client, Socket _socket)
    {  
        client   = _client;
        socket   = _socket;
        open();  
        start();
    }
    public void open()
    {  
        try
        {  
            streamIn  = new DataInputStream(socket.getInputStream());
        }
        catch(IOException ioe)
        {  
            System.out.println("Error getting input stream: " + ioe);
            client.stop();
        }
    }
    public void close()
    {  
        try
        {  
            if (streamIn != null) streamIn.close();
        }
        catch(IOException ioe)
        {  
            System.out.println("Error closing input stream: " + ioe);
        }
    }
    public void run()
    {  
        while (true)
        {  
            try
            {  
                client.handle(streamIn.readUTF());
            }
            catch(IOException ioe)
            { 
                System.out.println("Listening error: " + ioe.getMessage());
                client.stop();
            }
        }
    }
} 
```

## 聊天接收者

```
package com.weebly.foxgenesis.src;

public interface ChatReciever 
{
    /**
     * gets the IP address of the host
     * @return String IP address
     */
    public String getHost();

    /**
     * gets the port of the host
     * @return Integer port of host
     */
    public int getPort();

    /**
     * sends a message from the server to the implementing class
     * @param msg message from the server
     */
    public void handle(String msg);

    /**
     * sends an error to the implementing class
     * @param errorMsg error message
     */
    public void handleError(String errorMsg);

    /**
     * Sends a message to the log
     * @param msg message to send
     */
    public void handleLog(Object msg);
} 
```

# c++ - 通过引用传递数组？

> ID：13650943
> 
> 赞同：7
> 
> 时间：2012-11-30T18:25:19.867
> 
> 标签：c++, arrays, pointers

我对 C++ 很陌生，最近遇到了这个问题。

这段代码显然可以工作：

```
void setvalues(int *c, int *d)
{
    (*c) = 1;
    (*d) = 2;
}
int main()
{
    int a, b;
    setvalues(&a, &b);
    std::cout << a << b;
} 
```

那么为什么这会返回错误呢？Visual C++ 2010 错误：

> `C2664: 'setvalues' : cannot convert parameter 1 from 'int (*)[2]' to 'int *[]'`

```
void setvalues(int *c[2], int *d[2])
{
   (*c[1]) = 1;
   (*d[1]) = 2;
}
int main()
{
    int a[2], b[2];
    setvalues(&a, &b);
    std::cout << a[1] << b[1];
} 
```

指向数组的指针有什么不同？我四处寻找，但没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T18:30:14.510

类型`int *a[2]`表示*指向 2 的指针的数组`int`*`&a`，但带有定义的表达式`int a[2]`表示*指向 2 的数组的指针`int`*。两者都是不同的类型，它们之间没有转换。正如 Vlad 已经提到的，要提供正确的类型，您需要添加括号：

```
void setvalues( int (*c)[2] ) 
```

或者您可以在 C++ 中使用实际*引用：*

```
void setvalues( int (&c)[2] ) 
```

在后一种情况下，您不需要在函数内使用*地址*运算符或取消引用它`setvalue`：

```
int a[2];
setvalues(a); // this is a reference to the array 
```

编写代码的一种更简单的方法是使用`typedef`：

```
typedef int twoints[2];
void setvalue( toints& c );
int main() {
   twoints a; // this is int a[2];
   setvalue(a);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T18:26:33.700

它需要`void setvalues(int (&c)[2], int (&d)[2])`通过引用传递。来电者必须是`setvalues(a, b);`。否则，您最多只能通过指针传递指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T18:27:33.040

这是你修复它的方法：

```
void setvalues(int c[], int d[])
{
   c[1] = 1;
   d[1] = 2;
}
int main()
{
    int a[2],b[2];
    setvalues(a, b);
    std::cout<<a[1]<<b[1];
} 
```

当您声明这样的数组时：`int a[2],b[2];`，然后`a`和`b`已经是指向这些数组开头的指针。

当你这样做时`a[0]`，那是你实际上在某个偏移量处尊重数组以访问数组中的元素的时候。`a[1]`，例如，与`*(a+1)`

参考：[http ://www.cplusplus.com/doc/tutorial/arrays/](http://www.cplusplus.com/doc/tutorial/arrays/)

# many-to-many - Silverstripe S3：DataObject 添加 many_many 关系

> ID：13650948
> 
> 赞同：1
> 
> 时间：2012-11-30T18:25:52.343
> 
> 标签：many-to-many, relationship, belongs-to, silverstripe

我正在尝试以 $many_many / $belong_many_many 关系以编程方式将 DataObject 添加到另一个 DataObject 。Silverstripe-3 似乎对该任务有问题。

```
//Object 1 
<?php 
class ProductSubCategory extends DataObject { 

   static $db = array( 
      'Name' => 'Text', 
      'Description' => 'Text', 
      'RemoteIndexId'=>'varchar', 
      'LegalName' => 'Text', 
      'CodeName' => 'Text' 
); 
static $many_many = array('Ingredients'=>'Ingredient');

function addIngredients($ingredientsArray){

   foreach($ingredientsArray as $k=>$value){ 
         $newIngredient = new Ingredient(); 
         $newIngredient->RemoteIndexId = $value->id; 
         $newIngredient->Name = $value->name; 
         $newIngredient->CodeName = $value->code_name; 
         $newIngredient->Description = $value->description;                   
         $this->Ingredients()->add($newIngredient); 
      } 
   }

} 
//Object 2 
    <?php 
    class Ingredient extends DataObject { 
   static $db = array( 
      'Name' => 'Text', 
      'RemoteIndexId'=>'Varchar', 
      'ScientificName' => 'Text', 
      'Description'=>'Text', 
      'Percentage'=>'Varchar', 
      'CodeName'=>'Varchar' 
   );

   static $belong_many_many = array('ProductSubCategory' => 'ProductSubCategory');

    //....(some fields for the UI)... 
    } 
```

问题描述： 1\. 成分没有被写入数据库。2\. 表 ProductSubCategory_Ingredient 获取记录，但它们仅包含 ProductSubCategoryID 的 id，不包含 IngredientID 3\. 没有错误消息

我这几天一直在寻找解决方案，但无济于事，
请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T00:15:55.660

There is a typo in your variable name. You are missing an `s` in `belongs`.

This:

```
static $belong_many_many = array('ProductSubCategory' => 'ProductSubCategory'); 
```

Should be this:

```
static $belongs_many_many = array('ProductSubCategory' => 'ProductSubCategory'); 
```

Here is a good resource on many-to-many relationships in SS3:
[http://fake-media.com/2014/01/18/silverstripe-3-many-many-a-comprehensive-example/](http://fake-media.com/2014/01/18/silverstripe-3-many-many-a-comprehensive-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:26:38.603

@3dg00 是对的，应该`$belongs_many_many`带有一个“s”，你还必须打电话

`$this->write(null, null, null, true);`

在您的 foreach 循环之后，将内容写入数据库。 [http://api.silverstripe.org/3.0/framework/model/DataObject.html#methodwrite](http://api.silverstripe.org/3.0/framework/model/DataObject.html#methodwrite)

# backup - 似曾相识的备份：UnicodeDecodeError“数据意外结束”

> ID：13650951
> 
> 赞同：0
> 
> 时间：2012-11-30T18:26:05.747
> 
> 标签：backup, ubuntu-12.04, duplicity

我正在使用 ubuntu 12.04 和 deja 备份。

在准备备份期间遇到错误：

```
Backup failed: unknown reason:
File "/usr/lib/python2.7/dist-packages/duplicity/selection.py", line 187, in Iterate
log.Debug(_("Selecting %s") % subpath.name)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 48: unexpected end of data 
```

完整报告见下文。

我怀疑这是因为文件名未正确编码。

你知道如何纠正这个问题，或者至少让 deja 备份忽略这个问题吗？

谢谢！

.

```
Traceback (most recent call last):
File "/usr/bin/duplicity", line 1403, in <module>
with_tempdir(main)
File "/usr/bin/duplicity", line 1396, in with_tempdir
fn()
File "/usr/bin/duplicity", line 1366, in main
full_backup(col_stats)
File "/usr/bin/duplicity", line 491, in full_backup
bytes_written = dummy_backup(tarblock_iter)
File "/usr/bin/duplicity", line 197, in dummy_backup
while tarblock_iter.next():
File "/usr/lib/python2.7/dist-packages/duplicity/diffdir.py", line 507, in next
result = self.process(self.input_iter.next(), size)
File "/usr/lib/python2.7/dist-packages/duplicity/diffdir.py", line 188, in get_delta_iter
for new_path, sig_path in collated:
File "/usr/lib/python2.7/dist-packages/duplicity/diffdir.py", line 281, in collate2iters
for relem1 in riter1:
File "/usr/lib/python2.7/dist-packages/duplicity/selection.py", line 187, in Iterate
log.Debug(_("Selecting %s") % subpath.name)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 48: unexpected end of data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:27:49.983

我有一个解决方法，

您可以在调用 duplicity 之前更改会话语言

```
declare -x LANG="en_US.UTF-8" 
```

它对我有用，我的默认 LANG 是“es_ES.UTF-8”，并且重复失败。使用“en_US.UTF-8”有效。

见：[https ://bugs.launchpad.net/ubuntu/+source/duplicity/+bug/1050509](https://bugs.launchpad.net/ubuntu/+source/duplicity/+bug/1050509)

# asp.net - 如果 Request.Form 在页面上不起作用（ASP.net）

> ID：13650953
> 
> 赞同：0
> 
> 时间：2012-11-30T18:26:14.083
> 
> 标签：asp.net, forms, post

我是 ASP.net 的新手，并且在页面上有此代码：

```
<% IF (Request.Form("clicked")="clicked") %>

<script>
jQuery(document).ready(function(){
  jQuery.colorbox({
    iframe      : true,
    innerWidth  : 430,
    innerHeight : 208,
    href        : "/v/browse_market.asp"
  });
});
</script>
<%ELSE%>
<%END IF%> 
```

基本上，如果用户通过单击的表单按钮进入页面，我只希望加载 Colorbox。上一页的表格在这里：

```
<form method="post" action="/clothing_s/1814.htm">
<input type="hidden" name="clicked" value="clicked" />
<input type="submit" name="submit" value="Browse Products" />
</form> 
```

即使我没有提交表单，还有其他方法可以访问该页面并加载 Colorbox。我的语法正确吗？我对条件结构等非常熟悉，但主要是 PHP 用户，所以不确定我是否完全正确（与我看到的示例相关，这看起来是正确的，这就是我问的原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:53:06.987

等等。为什么您的 FORM 标签看起来像这样：

```
 <form method="post" action="/clothing_s/1814.htm"> 
```

该操作应针对在 IIS 下运行的有效 ASP.Net 网页。如果您在自己的机器（本地）上运行 ASP.Net 页面，则有效的 FORM 标记可能看起来像这样。

```
 <form method="post" action="http://localhost:4650/My-ASP.Net-In-IIS/default.aspx"> 
```

其余代码似乎很好，它应该可以工作。

话虽如此，我并不是说你写的任何东西都应该这样写。您以 PHP 风格编写 ASP.Net，这是不正确的。但它至少必须有效。

我希望这回答了你的问题。如果是，请将其标记为“已回答”。

# c++ - 来自 QPushButton 的信号 QGraphicsViewPaintEvent

> ID：13650956
> 
> 赞同：0
> 
> 时间：2012-11-30T18:26:26.107
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

我使用 QProxyWidget 在我的 QGraphicsScene 中嵌入了一个 QPushButton。当我单击按钮时，我想更改全局游戏状态对象，然后发出视图的绘制事件，以更新整个游戏。实现这一目标的最佳方法是什么？

这是我的按钮 mousePressEvent：

```
void Button::mousePressEvent(QMouseEvent * event) {

    /**
        Trying to signal the QGRaphicsView from here
    **/

} 
```

任何帮助将不胜感激，我似乎无法在网上找到任何关于如何手动强制绘制事件的文档。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:13:55.373

为什么不直接将按钮的`pressed()`信号连接到图形视图`update()`或`repaint()`插槽？

# spring - Mule ESB 3 事务流单个 Jdbc 资源不回滚（MSSQL 和 jtds）

> ID：13650959
> 
> 赞同：0
> 
> 时间：2012-11-30T18:27:01.903
> 
> 标签：spring, jdbc, transactions, esb, mule

**编辑**：这只发生在 MSSQL 和 jtds 1.2.6 仍在调查中...
**重复的：[Mule 3.3.0 Jdbc 事务不需要的提交](https://stackoverflow.com/questions/12421936/mule-3-3-0-jdbc-transaction-undesired-commit)
**Mule 文档很烂。

我想回滚具有多个数据库端点的流中的所有内容。
我有一个单一的 JDBC 数据源资源（即不需要花哨的 XA、2PC 等）。
我已经设法将 Mule 配置为，至少不会抱怨没有配置事务管理器等......但是：它不起作用；即发生异常时它不会回滚事务。
由于我是独立运行 Mule，我没有花哨的 weblogic、jboss 等事务管理器，所以我想我可以使用 Spring 的 DataSourceTransactionManager。对此我还有什么选择？

这是我的流程（flow1 仅用于触发 flow2，这是我想要交易的流程）：

![流动](../Images/5688e664c4729b4d4ebdb720643b43e6.png)

和 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule version="CE-3.3.0">
    <spring:beans>
        <spring:bean id="transactionManager"
            class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
            <spring:property name="dataSource" ref="dataSource" />
        </spring:bean>

        <spring:bean id="transactionFactory"
            class="org.mule.module.spring.transaction.SpringTransactionFactory">
            <spring:property name="manager" ref="transactionManager" />
        </spring:bean>

        <spring:bean id="dataSource" name="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <spring:property name="driverClassName" value="com.mysql.jdbc.Driver"/>
            <spring:property name="url" value="jdbc:mysql://localhost/mydb"/>
            <spring:property name="username" value="sa"/>
            <spring:property name="password" value=""/>
        </spring:bean>    
    </spring:beans>

    <jdbc:connector name="jdbcConnector" dataSource-ref="dataSource"
        transactionPerMessage="true" queryTimeout="20000" pollingFrequency="10000"
        doc:name="Database" validateConnections="false"></jdbc:connector>
    <flow name="flow1" doc:name="flow1">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP"/>
        <vm:outbound-endpoint exchange-pattern="request-response" path="toFlow2" doc:name="VM"/>
    </flow>
    <flow name="flow2" doc:name="flow2">
        <vm:inbound-endpoint exchange-pattern="request-response" path="toFlow2" doc:name="VM">
        <custom-transaction factory-ref="transactionFactory" action="ALWAYS_BEGIN" timeout="10"/>
    </vm:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="query1" queryTimeout="-1" connector-ref="jdbcConnector" doc:name="Database">
            <jdbc:query key="query1" value="insert into Foo (field1) values ('bar')"/>
            <jdbc:transaction action="ALWAYS_JOIN"/>
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="query2" queryTimeout="-1" connector-ref="jdbcConnector" doc:name="Database">
            <jdbc:query key="query2" value="insert into Bar (field1) values ('foo')"/>
            <jdbc:transaction action="ALWAYS_JOIN"/>
        </jdbc:outbound-endpoint>
    </flow>

</mule> 
```

这里没有显示，我还有一个默认的异常捕获策略，它只是将错误的有效负载写入文件。我不知道我是否需要明确地回滚，但我没有找到方法。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T02:39:54.173

经过两天的头撞骡子后，我终于成功地完成了这项工作。
结论：

*   您需要使用[jTDS](http://jtds.sourceforge.net/)自己的 DataSource (net.sourceforge.jtds.jdbcx.JtdsDataSource)
*   你需要使用mule的TransactionFactory (org.mule.transport.jdbc.JdbcTransactionFactory)
*   您需要使用未记录（或至少记录不足）的标签来开始交易
*   [jTDS](http://jtds.sourceforge.net/) ando/或 Mule 很烂（我不知道谁对这个特定问题负责）。
*   Mule 文档很糟糕：[这个](http://www.mulesoft.org/documentation/display/MULE3USER/Transaction+Management)和[这个](http://www.mulesoft.org/documentation/display/MULE3USER/Transactions+Configuration+Reference)
*   MuleStudio 很浪费时间（Sloooow，有缺陷，无法通过 GUI 连接事务，断言异常，如果您拖放脚本，流程会变得混乱，等等）。

最终工作流程：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting" xmlns:jdbc="http://www.mulesoft.org/schema/mule/jdbc" xmlns:http="http://www.mulesoft.org/schema/mule/http"
    xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans"
    version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/jdbc http://www.mulesoft.org/schema/mule/jdbc/current/mule-jdbc.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd ">

    <spring:beans>
        <spring:bean id="jtdsDataSource" name="jtdsDataSource" class="net.sourceforge.jtds.jdbcx.JtdsDataSource">
            <spring:property name="user" value="your_user" />
            <spring:property name="password" value="your_password" />
            <spring:property name="databaseName" value="your_database" />
            <spring:property name="serverName" value="your_host" />
        </spring:bean>

        <spring:bean id="transactionFactory" name="transactionFactory" class="org.mule.transport.jdbc.JdbcTransactionFactory" />

    </spring:beans>

    <jdbc:connector name="dbConnector" dataSource-ref="jtdsDataSource" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database" />

    <flow name="TriggerTxFlow" doc:name="TriggerTxFlow">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP" />
        <vm:outbound-endpoint exchange-pattern="request-response" path="toTxFlow" doc:name="VM" />
    </flow>
    <flow name="TxFlow" doc:name="TxFlow">
        <vm:inbound-endpoint exchange-pattern="request-response" path="toTxFlow" doc:name="VM">
            <custom-transaction factory-ref="transactionFactory" action="ALWAYS_BEGIN" timeout="10" />
        </vm:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert" queryTimeout="-1" connector-ref="dbConnector" doc:name="Database">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert" value="insert into test values (1, 'Test 1')" />
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="insert2" queryTimeout="-1" connector-ref="dbConnector" doc:name="Database">
            <jdbc:transaction action="ALWAYS_JOIN" />
            <jdbc:query key="insert2" value="insert into test values (2, 'Test 2')" />
        </jdbc:outbound-endpoint>
    </flow>
</mule> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:29:09.817

在 Mule 中，您可以访问事务管理器。例如，您可以通过将其添加到配置中来配置 jboss 事务管理器：

```
<jbossts:transaction-manager/> 
```

使用 XA 不需要自定义事务。您只需要在每个端点内使用 xa-transaction 元素。

在这里，您已更新配置以使用 Mule 中的 xa 事务。

```
<?xml version="1.0" encoding="UTF-8"?>
<mule version="CE-3.3.0">

    <jdbc:connector name="jdbcConnector" dataSource-ref="dataSource"
        transactionPerMessage="true" queryTimeout="20000" pollingFrequency="10000"
        doc:name="Database" validateConnections="false">
    </jdbc:connector>

    <flow name="flow1" doc:name="flow1">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost"      port="8081" doc:name="HTTP"/>
        <vm:outbound-endpoint exchange-pattern="request-response" path="toFlow2" doc:name="VM"/>
    </flow>

    <flow name="flow2" doc:name="flow2">
        <vm:inbound-endpoint exchange-pattern="request-response" path="toFlow2" doc:name="VM">
            <xa-transaction action="ALWAYS_BEGIN" timeout="10"/>
        </vm:inbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="query1" queryTimeout="-1" connector-ref="jdbcConnector" doc:name="Database">
            <jdbc:query key="query1" value="insert into Foo (field1) values ('bar')"/>
            <xa-transaction action="ALWAYS_JOIN"/>
        </jdbc:outbound-endpoint>
        <jdbc:outbound-endpoint exchange-pattern="request-response" queryKey="query2" queryTimeout="-1" connector-ref="jdbcConnector" doc:name="Database">
            <jdbc:query key="query2" value="insert into Bar (field1) values ('foo')"/>
            <xa-transaction action="ALWAYS_JOIN"/>
         </jdbc:outbound-endpoint>
     </flow> 
```

我同意文档不如应有的那么好，但它正在变得更好。事实上，你提到的第一页是从头开始重写的。

HTH，巴勃罗。

# php - 将php结果显示为链接

> ID：13650967
> 
> 赞同：2
> 
> 时间：2012-11-30T18:27:38.913
> 
> 标签：php, hyperlink

我使用 PHP、Appache 和 PHPMyAdmin 构建了一个相当基本的数据库驱动网站。该站点允许用户上传两种格式的 cad 详细文件。除了文件路径，他们还可以上传文件名、相关服务组以及详细 ID。

基本上一切都很顺利，除了我似乎无法将搜索结果显示为链接。

下面附加的屏幕截图链接显示了当前结果。我希望将“PDF”和“DWG”显示为链接，而不仅仅是文件路径。

![在此处输入图像描述](../Images/557f30cb467a78123ff4f2312c3853e3.png)

任何帮助将不胜感激。

```
$output = "";
while($row = mysqli_fetch_array($results))
{
    $output .= "<br /><b>Detail ID:</b> " . $row['id'] . "<br /><br />";
    $output .= "<b>Name:</b> " . $row['name'] . "<br /><br />";
    $output .= "<b>Service Group:</b> " . $row['service'] . "<br /><br />";
    $output .= "<b>PDF:</b> " . $row['pdf'] . "<br /><br />";
    $output .= "<b>DWG:</b> " . $row['dwg'] . "<br /><br /><hr />"; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:32:08.377

```
$output = "";
while($row = mysqli_fetch_array($results))
{
    $output .= "<br /><b>Detail ID:</b> " . $row['id'] . "<br /><br />";
    $output .= "<b>Name:</b> " . $row['name'] . "<br /><br />";
    $output .= "<b>Service Group:</b> " . $row['service'] . "<br /><br />";
    $output .= "<b>PDF:</b> <a href='" . $row['pdf'] . "'>" . $row['pdf'] . "</a><br /><br />";
    $output .= "<b>DWG:</b> <a href='" . $row['dwg'] . "'>" . $row['dwg'] . "</a><br /><br /><hr />"; 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:32:56.720

正如@Matt Ball 所说，链接需要`<a>`元素。我假设您的表格`pdf`的`dwg`列将包含文件的 URL。

所以你应该使用它链接这个：

```
$output .= "<b>PDF:</b> "."<a href='".$row['pdf']."'>" . $row['pdf'] . "</a><br /><br />"; 
```

输出将是这样的：

```
<b>PDF:</b> <a href="URL">URL</a><br /><br /> 
```

# powershell - Powershell scipt 打开 power point 并播放幻灯片

> ID：13650968
> 
> 赞同：4
> 
> 时间：2012-11-30T18:27:49.123
> 
> 标签：powershell, powerpoint

嘿，谁能告诉我如何打开电源点和播放幻灯片

我有以下代码，但它不起作用

```
$ppAdvanceOnTime = 2
 $ppShowTypeKiosk = 3
 $ppSlideShowDone = 5

Add-type -AssemblyName office
$Application = New-Object -ComObject powerpoint.application
$application.visible = [Microsoft.Office.Core.MsoTriState]::msoTrue
$path = "C:\Users\asuribha\Desktop\Web.pptx"

 $presentation = $application.Presentations.open($path)

$presentation.SlideShowSettings.AdvanceMode = $ppAdvanceOnTime 
$presentation.SlideShowSettings.ShowType =  $ppShowTypeKiosk 

$presentation.SlideShowSettings.StartingSlide = 1
$presentation.SlideShowSettings.EndingSlide = $presentation.Slides.Count

Do
 {
    $presenatation.SlideShowSettings.Run.View.
    if (Err<>0)
    {
        Exit Do
    }

}       

 until ($presenatation.SlideShowSettings.Run.View.State = $ppSlideShowDone)

$application.quit()

[gc]::collect()
[gc]::WaitForPendingFinalizers() 
```

此代码打开 power point 但不播放幻灯片！我也有这个问题，它有时会自动关闭电源点。这个你能帮我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-15T19:54:56.920

我在各个站点上遇到了很多上述问题，最终发现这是最快的并且没有问题，即使 powerpoint 没有运行它仍然能够继续运行的机器。我基本上想运行一个脚本，接待员可以在没有任何复杂性的情况下输入详细信息，只需一个输入框，然后在完成后它将在演示屏幕上运行另一个 powershell。

这是接待员输入 powershell 输入。

```
Add-Type -AssemblyName Microsoft.VisualBasic
$PPTFile = [Microsoft.VisualBasic.Interaction]::InputBox('Enter FileName', 'Powerpoint File', "$env")
$pptx = "d:\Presentations"+($pptfile)+".pptx"
$pptx | Out-File "\\(machine name)\Scripts\Powerpoint.txt" 
```

我以后可能可以通过远程运行 powershell 来简化它，但目前作为一个 powershell 新手，我在另一端运行另一个脚本并且一切运行良好。

```
Stop-Process -name "POWERPNT"
$Power = Get-Content "d:\Scripts\Powerpoint.txt"
write-output $Power
$powerptx = "/s "+($Power) 
```

启动进程 powerpnt.exe -ArgumentList "$powerptx"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T01:47:45.677

所以我不是 powershell 的忠实粉丝，但我使用这个脚本在我们拥有的显示器上旋转演示文稿：

```
$ppt = "c:\presentation.pptx"
$new_file = "c:\new.pptx"

function runloop {       
    $running = get-process POWERPNT
    $killed = $false
    if (Test-Path $new_file) {
          Write-Host "Killing"
          kill -name POWERPNT          
          Start-Sleep -s 2
          Move-Item $new_file $ppt -force
          $killed = $true
    }    
    if (!$running -or $killed) {
          Write-Host "Not running"
          $app = New-Object -ComObject powerpoint.application
          $pres = $app.Presentations.open($ppt)
          $app.visible = "msoTrue"
          $pres.SlideShowSettings.Run()                         
          $pres.visible = "msoTrue"
    }    
    Write-Host "Done"
}

runloop; 
```

哈基，但它对我有用。希望这可以帮助。

# php - 尽管设置了环境变量，zf & PHP 仍无法识别

> ID：13650972
> 
> 赞同：1
> 
> 时间：2012-11-30T18:28:01.580
> 
> 标签：php, zend-framework, wamp

[我在这个 youtube 教程](http://www.youtube.com/watch?v=m7svJHmgJqs)的帮助下使用 WAMP 在我的 Windows 机器上安装 zend但是，我去了我的电脑 -> 属性 -> 高级 -> 环境变量并编辑了“PATH”。目前它看起来像这样：

> %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\Program Files\TortoiseSVN\bin;C:\wamp\bin\php\php5.3.13;C:\wamp\bin\php\ zend_framework\bin;

我已经将我的 zend 复制到 C:\wamp\bin\php 就像教程一样

但是我得到

> 'php' 不是内部或外部命令、可运行程序或批处理文件。

对于cmd 上的**zf**和**php -v**

请帮助iv被困在这个问题上超过2天

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:39:07.147

我认为我们需要首先关注 PHP。ZF可以跟进。

的失败`php -v`意味着您的任何目录都不`PATH`包含可执行文件`php.exe`。因此，首先要找到包含该可执行文件的目录并确保它出现在您的`PATH`变量中（如`My Computer -> Properties -> Advanced -> Environment Variables`.`PATH`会议。）

ZF 也有类似的情况。从您的 ZF 发行版中找到该`zf.bat`文件，并确保包含目录出现在`PATH`.

注意：在 Windows 上，我发现我经常不得不使用`zf.bat`. YMMV。

# javascript - 如果它们设置为“是”，我如何组合两个单选按钮来显示相同 的元素？

> ID：13650978
> 
> 赞同：1
> 
> 时间：2012-11-30T18:28:33.310
> 
> 标签：javascript, jquery, html, coldfusion

这是我在 jQuery 中所拥有的：

```
$(document).ready(function(){
    $("input[name='DifficultyObtainingCMELicenseRenewal']").change(function() {
      $("#DifficultyObtainingCME").toggle(this.value == "Yes");
    });
    $("input[name='DifficultyObtainingCMEBoardCertification']").change(function() {
      $("#DifficultyObtainingCME").toggle(this.value == "Yes");
    });
}); 
```

这是HTML：

```
 <tr>
    <th><label>Do you have difficulty obtaining enough CME required for Iowa license renewal?</label></th>
    <td>
        <label><input type="radio" name="DifficultyObtainingCMELicenseRenewal" value="Yes" class="checkbox"/> Yes</label><br />
        <label><input type="radio" name="DifficultyObtainingCMELicenseRenewal" value="No" class="checkbox"/> No</label>
    </td>
  </tr>
  <tr>
    <th><label>Do you have difficulty obtaining enough CME required for your specialty board certification/re-certification?</label></th>
    <td>
        <label><input type="radio" name="DifficultyObtainingCMEBoardCertification" value="Yes" class="checkbox"/> Yes</label><br />
        <label><input type="radio" name="DifficultyObtainingCMEBoardCertification" value="No" class="checkbox"/> No</label>
    </td>
  </tr>
  <tr id="DifficultyObtainingCME" style="display:none">
    <th class="altTH"><label>Please elaborate on the difficulties you are experiencing:</label></th>
    <td class="altTD">
        <cftextarea name="DifficultyObtainingCMEOther" rows="3" cols="20"></cftextarea>
    </td>
  </tr> 
```

因此，现在如果您在其中一个框上按“是”，它会显示额外的字段，但在另一个框上按“否”会使其消失，反之亦然。我该如何做到这一点，只要其中任何一个设置为“是”，它就会保持打开状态？

这是一个链接：http: [//jsfiddle.net/madcaesar/hcZXf/](http://jsfiddle.net/madcaesar/hcZXf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:35:40.890

只需确保在更改发生时选中“是”选项：

```
var thingToToggle = $("#DifficultyObtainingCME");
var allRadios = $('input[type="radio"]');

allRadios.change(function () {
    if (allRadios.filter(function () {
        return this.checked && this.value === 'Yes';
    }).length > 0) {
        thingToToggle.show();
    } else {
        thingToToggle.hide();
    } 
}); 
```

[http://jsfiddle.net/JptF8/](http://jsfiddle.net/JptF8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:31:03.997

```
$('input[type="radio"]').change(function() {
if ($('input[type="radio"][value="Yes"]:checked').length > 0) {
    $("#DifficultyObtainingCME").show();
} else {
    $("#DifficultyObtainingCME").hide();
}
}); 
```

Of course, if you add more radio buttons later this will apply to those too. In that case, add a class to the ones you want this apply to (e.g. $('.toggleRadioClass[value="Yes"]:checked')). Not sure what the $("#DifficultyObtainingCME").toggle(this.value == "Yes"); is supposed to do, but my code will actually show and hide the element.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:44:22.677

`:checked`基于yes-radio的存在可见性：

```
var $radios = $("input[name^='DifficultyObtainingCME']"),
    $toggle = $("#DifficultyObtainingCME");

$radios.on("change", function(){
    $toggle.toggle(!!$radios.filter("[value='Yes']:checked").length);
}); 
```

小提琴：http: [//jsfiddle.net/8wD8D/3/](http://jsfiddle.net/8wD8D/3/)

# python - matplotlib 在 3D 中反转 y 轴会丢失标签。需要解决此已知错误的方法

> ID：13650981
> 
> 赞同：1
> 
> 时间：2012-11-30T18:28:43.433
> 
> 标签：python, 3d, matplotlib

matplotlib 中有一个尚未修复的[已知错误。](https://github.com/matplotlib/matplotlib/issues/570)

考虑这个代码片段。通过反转 y 轴，刻度消失并且 z 轴上的填充发生变化。

```
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

ax.set_xlim3d(0,1)
ax.set_ylim3d(0,1)
ax.set_ylim3d(1,0)
plt.show() 
```

在此期间有人有解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:45:27.530

Maybe you can bring your data to [0,1] range (or [yourmin, yourmax] where yourmin < yourmax) and then just change axis ticks labels:

```
 import matplotlib.pyplot as plt
    from mpl_toolkits.mplot3d import Axes3D
    import numpy as np

    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')

    ax.set_xlim3d(0,1)
    ax.set_ylim3d(0,1)
    # setting ticks positions
    ax.set_xticks(np.arange(0,1.1,0.2))
    ax.set_yticks(np.arange(0,1.1,0.2))
    # setting ticks labels
    ax.set_xticklabels(np.arange(1, -.1,-.2,).round(1))
    ax.set_yticklabels(np.arange(1, -.1,-.2,).round(1))

    plt.show() 
```

# python - 记录未显示在模板中

> ID：13650986
> 
> 赞同：1
> 
> 时间：2012-11-30T18:29:02.223
> 
> 标签：python, django, django-generic-views

我在 Windows 7 上使用 Python 2.7.2 和 Django 1.4.1 运行它。

我在 sqlite 数据库中有几条记录，我正在尝试使用通用类视图 ListView 显示它们。我已经消除了它不可能的东西，并将所有东西都剥离为最简单的格式，但我不确定去哪里弄清楚它可能是什么。

模型：

```
class DMG_New_Inv (models.Model): # DMG's
def __init__(self, *args, **kwargs):
    super(DMG_New_Inv, self).__init__(*args, **kwargs)
    self.objects = None

model_num = models.ForeignKey(DMG_Models_Default, verbose_name='Model')
serial_num = models.CharField(max_length=25, verbose_name='Serial Number')
date_in = models.DateField(auto_now_add=True) #this will set the date to the creation date automaticly
date_out = models.DateField(blank=True, null=True) # the date is was removed from inventory
status = models.CharField(max_length=2, verbose_name='Asset Status', choices=DMG_ASSET_STATUS) # see list above
company = models.CharField(max_length=50, verbose_name='Company', blank=True, null=True) # the company or person who received the product
notes = models.CharField(max_length=255, verbose_name='Notes',  blank=True, null=True)
pass
class Meta:
    verbose_name = 'DMG'
    verbose_name_plural = 'DMGs' 
```

看法：

```
from django.views.generic import list
from django.views.generic import ListView
from django.shortcuts import get_object_or_404

from inventory.models import DMG_New_Inv

class dmg_new_status(ListView):

context_object_name = "dmg_new_status"
template_name = 'inventory/dmg_inv.html'

def get_queryset(self):
    status = get_object_or_404(DMG_New_Inv, status__iexact=self.args[0])
    return DMG_New_Inv.objects.filter(status__iexact=status) 
```

内容：

```
{% block content %}

<div id="content">

<table cellspacing="3" cellpadding="3">
    <tr align="center">
        <th>Model</th><th>Serial Number</th><th>Date In</th><th>Date Out</th><th>Status</th><th>Company</th><th>Notes</th>
    </tr>
    {% for dmg in dmg_new_status %}

    <tr align="center">
        <td>{{ dmg.model_num }}</td>
        <td>{{ dmg.serial_num }}</td>
        <td>{{ dmg.date_in }}</td>
        <td>{{ dmg.date_out }}</td>
        <td>{{ dmg.status }}</td>
        <td> {{ dmg.company }}</td>
        <td> {{ dmg.notes }}</td>
    </tr>
    {% empty %}
    No DMG's in this list
    {% endfor %}
</table> 
```

{% 端块 %}

网址：

```
(r'^inventory/dmg/(\w+)/$', dmg_new_status.as_view()), #status page 
```

我确定这不是路径问题，因为我添加了空选项，它显示表标题但没有记录。如果我不得不猜测并且我在猜测，我不会返回任何东西，因此数组是空的。我不确定如何进一步解决此问题。我打开一个控制台，导入所有内容并以这种方式运行 query_set 函数，但什么也没得到，这就是为什么我相信错误在那里。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:48:08.340

看起来您在 get_queryset(self) 中有问题...第一行获取 DMG_New_Inv 对象，但您将其分配给变量状态。

最后一行不应该是......

```
return DMG_New_Inv.objects.filter(status__iexact=status.status) 
```

（您可能还想使用与“状态”不同的变量）

# c++ - 不使用系统的数据集

> ID：13650991
> 
> 赞同：-1
> 
> 时间：2012-11-30T18:29:34.417
> 
> 标签：c++, dataset

我试图找到一个不以任何方式使用 .NET 的数据集实现示例。原因是，我想创建一个可以在多个平台上使用的应用程序，而不仅仅是 Windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:53:47.850

我担心这是不可能的。您要使用的 DataSet 类在 C++ 编程语言中不能用作基本类型或类。[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.data.dataset%28v=vs.71%29.aspx)显示 Microsoft 在 .NET Framework 版本 1.1 中引入了 DataSet 类。在 .NET Framework 之外找到提供相同功能的 C++ 类并不容易。

我不熟悉这个特定的类，但在提供的页面上，该类被描述为*“表示内存中的数据缓存”。*如果你想创建一个多平台应用程序，我会考虑 Java。然后可以在[此 Stackoverflow 帖子](https://stackoverflow.com/questions/575685/looking-for-simple-java-in-memory-cache)中找到 Microsoft DataSet 类的替代方案。

# jquery - 从类选择器中获取每个元素值

> ID：13650992
> 
> 赞同：0
> 
> 时间：2012-11-30T18:29:36.180
> 
> 标签：jquery

> **可能重复：**
> [使用 jQuery 从元素选择中获取属性值作为数组](https://stackoverflow.com/questions/1258676/get-attribute-values-as-array-from-selection-of-elements-using-jquery)

我正在尝试从元素列表中获取 id

我有

```
<div class='test' id='123'> </div>
<div class='test' id='1243'> </div>

<div class='test' id='1223'> </div>
<div class='test' id='1423'> </div>
<div class='test' id='1223'> </div>
<div class='test' id='1253'> </div> 
```

我想为每个 div 获取 id

我有

```
var idarray=[];

var id= $('.test').attr('id'); //would only get the first 123 id.

idarray.push(id) 
```

在我的情况下，如何将每个 id 获取到 idarray ？谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:34:16.403

您可以使用

```
var idarray = $('.test').map(function(){return this.id}).get(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:33:16.817

您可以使用 jquery[`.map()`](http://api.jquery.com/map/)函数来创建您的数组，如下所示：

```
var id = $('.test').map(function() {
   return $(this).attr('id');
}).get(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T18:33:59.793

您可以通过一个简单的 each 循环来完成此操作。

```
var idarray=[];
$('.test').each(function(){idarray.push(this.id);}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T18:33:06.973

使用`.each`循环，如下所示：

```
var idarray = [];

$(".test").each(function() {
    idarray.push($(this).attr("id"));
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T18:34:54.767

这是一个可能的解决方案：

```
ids = [];
$("div").each(function() {
    $this = $(this);
    ids.push($this.attr("id"));
}); 
```

这将产生一个`id`s 数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T18:36:26.590

使用下面的代码在 idarray 中标识

```
var idarray = [];
$.each($(".test"),function(index,value)
   {
idarray.push($(value).attr("id"));
   }); 
```

检查小提琴

[http://jsfiddle.net/E8Rjs/5/](http://jsfiddle.net/E8Rjs/5/) 谢谢

# c# - Google 机器人搜索返回本地结果

> ID：13650993
> 
> 赞同：1
> 
> 时间：2012-11-30T18:29:39.127
> 
> 标签：c#

我用 C# 编写了一个在 Google 搜索中返回搜索结果的工具。但是，即使我关闭了 cookie 并删除了浏览器历史记录。它仍然返回我当地的搜索结果：芝加哥。我使用的网址是：

URL = "https://www.google.com/search?q=health and beauty&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a&start=0&num=9&gl=us "

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Accept = "application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*";
request.Headers["Accept-Language"] = "en-US";
//request.UserAgent = "Mozilla/6.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/16.0.2";
request.UserAgent = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)";    
request.KeepAlive = true;
request.AllowAutoRedirect =true;
request.Timeout = 60000;
request.Method = "GET";

HttpWebResponse response = (HttpWebResponse)request.GetResponse();

if (response.StatusCode == HttpStatusCode.OK)
{
    Stream responseStream = response.GetResponseStream();
    StreamReader myStreamReader = new StreamReader(responseStream);
    responseData = myStreamReader.ReadToEnd();
}
response.Close(); 
```

在该工具中，它不断为我提供芝加哥的结果。有没有办法让我得到美国而不是芝加哥的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:37:40.307

不要点击 google.com，而是点击 google.ca，但继续传入 gl=us 参数。所以你的 URL 看起来像：

[https://www.google.ca/search?q=health](https://www.google.ca/search?q=health) and beauty&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a&start=0&num=9&gl=us

这似乎绕过了我测试过的搜索词的地理定位。