# StackOverflow 问答 14904000-14904999

# selenium-webdriver - WebDriver：使用嵌入在字符串中的动态 ID 定位元素

> ID：14904001
> 
> 赞同：0
> 
> 时间：2013-02-15T21:56:52.140
> 
> 标签：selenium-webdriver

谁能建议我如何找到具有以下 html 代码的元素“ToBeSelected”：

```
<div id="Locate-17-tab-info" class="tab active" data-tab-name="tobeselected"> ToBeSelected </div> 
```

XPath driver.findElement(By.xpath("input[contains(@id, '-tab-info')]")).click();

我没有成功通过 XPath 找到 - 开始和结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:22:30.437

你可以试试

```
driver.findElement(By.xpath(//input[contains(@id,'Locate') and text()='ToBeSelected'])).click(); 
```

# reporting-services - 当我尝试打开 .rdl 时显示 SSRS 2005“未找到报告元素”html

> ID：14904002
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:56:55.140
> 
> 标签：reporting-services, reportingservices-2005

我刚开始与其他开发人员合作。当他们将 .rdl 文件发回给我并且我尝试通过 Visual Studio 2005 打开该文件时，它会显示一些原始 html 而不是设计视图。html 说：

加载设计器时遇到一个或多个错误。下面列出了错误。 **未找到报告元素。**

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:02:36.890

对于任何有同样问题的人，我想通了：

开发人员使用“报表生成器”(v. 3.0) 进行了修改和保存。Report Builder 3.0 旨在仅支持 SSRS 2008 R2，并支持新版本的 RDL 架构，该架构与 SSRS 2005 不兼容。因此，我不得不改用 SQL Server 2008 R2 Reporting Services。

# usb - 简单的操纵杆隐藏报告描述符不起作用

> ID：14904009
> 
> 赞同：4
> 
> 时间：2013-02-15T21:57:09.417
> 
> 标签：usb, report, hid, joystick, usb-descriptor

使用 atmega8 芯片和 V-USB 库，我做了一个小桥将我的 NES 游戏手柄连接到 USB。起初，我使用其中一个示例作为我的隐藏描述符，因此...当我将设备设置为与此 HID 报告描述符握手时，我在 Windows 中正确识别了我的设备

```
PROGMEM const char usbHidReportDescriptor[100] = {
    0x05, 0x01,                    // USAGE_PAGE (Generic Desktop)
    0x15, 0x00,                    // LOGICAL_MINIMUM (0)
    0x09, 0x04,                    // USAGE (Joystick)
    0xa1, 0x01,                    // COLLECTION (Application)
    0x05, 0x02,                    //   USAGE_PAGE (Simulation Controls)
    0x09, 0xbb,                    //   USAGE (Throttle)
    0x15, 0x81,                    //   LOGICAL_MINIMUM (-127)
    0x25, 0x7f,                    //   LOGICAL_MAXIMUM (127)
    0x75, 0x08,                    //   REPORT_SIZE (8)
    0x95, 0x01,                    //   REPORT_COUNT (1)
    0x81, 0x02,                    //   INPUT (Data,Var,Abs)
    0x05, 0x01,                    //   USAGE_PAGE (Generic Desktop)
    0x09, 0x01,                    //   USAGE (Pointer)
    0xa1, 0x00,                    //   COLLECTION (Physical)
    0x09, 0x30,                    //     USAGE (X)
    0x09, 0x31,                    //     USAGE (Y)
    0x95, 0x02,                    //     REPORT_COUNT (2)
    0x81, 0x02,                    //     INPUT (Data,Var,Abs)
    0xc0,                          //   END_COLLECTION
    0x09, 0x39,                    //   USAGE (Hat switch)
    0x15, 0x00,                    //   LOGICAL_MINIMUM (0)
    0x25, 0x03,                    //   LOGICAL_MAXIMUM (3)
    0x35, 0x00,                    //   PHYSICAL_MINIMUM (0)
    0x46, 0x0e, 0x01,              //   PHYSICAL_MAXIMUM (270)
    0x65, 0x14,                    //   UNIT (Eng Rot:Angular Pos)
    0x75, 0x04,                    //   REPORT_SIZE (4)
    0x95, 0x01,                    //   REPORT_COUNT (1)
    0x81, 0x02,                    //   INPUT (Data,Var,Abs)
    0x05, 0x09,                    //   USAGE_PAGE (Button)
    0x19, 0x01,                    //   USAGE_MINIMUM (Button 1)
    0x29, 0x04,                    //   USAGE_MAXIMUM (Button 4)
    0x15, 0x00,                    //   LOGICAL_MINIMUM (0)
    0x25, 0x01,                    //   LOGICAL_MAXIMUM (1)
    0x75, 0x01,                    //   REPORT_SIZE (1)
0x95, 0x04,                    //   REPORT_COUNT (4)
0x55, 0x00,                    //   UNIT_EXPONENT (0)
0x65, 0x00,                    //   UNIT (None)
0x81, 0x02,                    //   INPUT (Data,Var,Abs)
0xc0                           // END_COLLECTION
}; 
```

和这个报告类型

```
typedef struct{
    char    throttle;
    char    x;
    char    y;
    uchar    hatSwitchAndButtons;
}report_t; 
```

但是当我让它变得更简单时：

```
PROGMEM const char usbHidReportDescriptor[48] =  {
    0x05, 0x01,                    // USAGE_PAGE (Generic Desktop)
    0x09, 0x04,                    // USAGE (Joystick)
    0xa1, 0x01,                    // COLLECTION (Application)
    0x15, 0x81,                    //   LOGICAL_MINIMUM (-127)
    0x25, 0x7f,                    //   LOGICAL_MAXIMUM (127)
    0x05, 0x01,                    //   USAGE_PAGE (Generic Desktop)
    0x09, 0x01,                    //   USAGE (Pointer)
    0xa1, 0x00,                    //   COLLECTION (Physical)
    0x09, 0x30,                    //     USAGE (X)
    0x09, 0x31,                    //     USAGE (Y)
    0x75, 0x08,                    //     REPORT_SIZE (8)
    0x95, 0x02,                    //     REPORT_COUNT (2)
    0x81, 0x02,                    //     INPUT (Data,Var,Abs)
    0xc0,                          //   END_COLLECTION
    0x05, 0x09,                    //   USAGE_PAGE (Button)
    0x19, 0x01,                    //   USAGE_MINIMUM (Button 1)
    0x29, 0x04,                    //   USAGE_MAXIMUM (Button 8)
    0x15, 0x00,                    //   LOGICAL_MINIMUM (0)
    0x25, 0x01,                    //   LOGICAL_MAXIMUM (1)
    0x75, 0x01,                    //   REPORT_SIZE (1)
    0x95, 0x04,                    //   REPORT_COUNT (8)
    0x55, 0x00,                    //   UNIT_EXPONENT (0)
    0x65, 0x00,                    //   UNIT (None)
    0x81, 0x02,                    //   INPUT (Data,Var,Abs)
    0xc0                           // END_COLLECTION
};

typedef struct{
    char    x;
    char    y;
    uchar    buttons;
}report_t; 
```

Windows 一直无法安装我的游戏杆。它仍然可以识别它的名称，但无法完成安装。

我很困惑，因为 USB Hid Tool 验证了这个报告描述符。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T13:26:39.450

```
0x29, 0x04,                    //   USAGE_MAXIMUM (Button 8)
0x95, 0x04,                    //   REPORT_COUNT (8) 
```

哎呀，看起来像有人用评论编程。:) 将 0x04 更改为 0x08。并观察，以便每个报告大小可以除以 8（8、16、24、32 等）

# sql - 从 WHERE 语句中取出几个“用户 ID”并放入变量中

> ID：14904010
> 
> 赞同：2
> 
> 时间：2013-02-15T21:57:11.427
> 
> 标签：sql, variables

我有以下查询可以正常工作。

```
SELECT ui.userID, 
    ui.lockedInd, 
    ui.lockedBy, 
    ui.lockedReason, 
    ui.updatedDtTm,
    ui.updatedBy,
    ua.password,
    ua.updatedDtTm,
    ua.updatedBy 
FROM userInfo ui 
JOIN userAuthentication ua 
    ON ui.userinfoseqid = ua.userinfoseqid
WHERE ui.userID IN (
    'userOne',
    'userTwo'
) 
```

我想将用户名放入顶部声明的变量中。我有点困惑如何创建变量并添加到它，因为我总是只使用一个值完成变量。须藤代码如下

```
DECLARE @userIDs
SET @userIDs = "'userOne', 'userTwo'"

SELECT ui.userID, 
    ui.lockedInd, 
    ui.lockedBy, 
    ui.lockedReason, 
    ui.updatedDtTm,
    ui.updatedBy,
    ua.password,
    ua.updatedDtTm,
    ua.updatedBy 
FROM userInfo ui 
JOIN userAuthentication ua 
    ON ui.userinfoseqid = ua.userinfoseqid
WHERE ui.userID = @userIDs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:00:33.247

使用表变量应该适合您。

```
DECLARE @UserIDS TABLE 
(
    UserId VARCHAR(40)
)

INSERT INTO @UserIDS
(
UserId
)
SELECT 'UserOne'
UNION ALL SELECT 'UserTwo'
UNION ALL SELECT 'UserThree'

SELECT ui.userID, 
    ui.lockedInd, 
    ui.lockedBy, 
    ui.lockedReason, 
    ui.updatedDtTm,
    ui.updatedBy,
    ua.password,
    ua.updatedDtTm,
    ua.updatedBy 
FROM userInfo ui 
JOIN userAuthentication ua 
    ON ui.userinfoseqid = ua.userinfoseqid
WHERE ui.userID IN @UserIDS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:04:54.567

您可以使用临时表，有更多信息：[http ://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/](http://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/)

例如，创建一个表变量：

```
DECLARE @UserIDs TABLE (ID nvarchar(50))
INSERT INTO @UserIDs VALUES ('userOne'), ('userTwo')

SELECT ui.userID
FROM userInfo ui 
JOIN userAuthentication ua 
    ON ui.userinfoseqid = ua.userinfoseqid
WHERE ui.userID IN (SELECT ID FROM @UserIDs) 
```

# python - 不要退出python程序，而是继续运行

> ID：14904012
> 
> 赞同：0
> 
> 时间：2013-02-15T21:57:17.947
> 
> 标签：python

我已经看到了其中一些问题，但还没有找到真正的答案。

我有一个启动 gstreamer 管道的应用程序，然后监听它发回的数据。

在我基于我的示例应用程序中，它以这段代码结束：

```
gtk.main() 
```

没有 gtk 窗口，但这段代码确实导致它继续运行。没有它，程序就会退出。

现在，我已经阅读了有关使用`while True:`的构造，但它们包含`sleep`命令，如果我没记错的话，这将导致我的应用程序在睡眠期间冻结，所以......

有没有更好的方法，不使用 gtk.main()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:42:12.807

`gtk.main()`运行一个事件循环。它不会退出，也不会只是冻结什么都不做，因为它里面有这样的代码：

```
while True:
    timeout = timers.earliest() - datetime.now()
    try:
        message = wait_for_next_gui_message(timeout)
    except TimeoutError:
        handle_any_expired_timers()
    else:
        handle_message(message) 
```

该`wait_for_next_gui_message`函数是围绕不同平台特定函数的包装器，这些函数等待 X11、WindowServer、Windows 中的未命名事物等传递诸如“用户单击您的按钮”或“用户按下 ctrl-Q”之类的消息。

如果你在 a ,等上调用`http.serve_forever()`或类似的东西，它做的事情完全一样，除了它是一个函数，它包装了类似的东西，你的所有套接字的列表在哪里。`twisted``HTTPServer``wait_for_next_network_message(sources, timeout)``select.select``sources`

如果你在一个 gstreamer 管道上收听，你`sources`可以只是那个管道，而`wait_for_next`函数只是`select.select`.

或者，当然，您可以使用像`twisted`.

* * *

但是，您*不需要*以这种方式设计您的应用程序。如果您不需要等待多个来源，则可以阻止：

```
while True:
    data = pipe.read()
    handle_data(data) 
```

只要确保管道没有设置为非阻塞。如果您不确定，您可以`setblocking`在套接字、`fcntl`Unix 管道上使用，或者在 Windows 管道上使用我想不起来的东西来确定。

事实上，即使您需要等待多个来源，您也可以通过将每个来源的阻塞循环放入单独的线程（或进程）中来做到这一点。这不适用于数千个套接字（尽管在这种情况下您可以使用 greenlets 而不是线程），但对于 3 个或 30 个都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:00:40.293

我已经成为 Cmd 类的粉丝。它为您的程序提供一个 shell 提示符，并在等待输入时停留在循环中。这是[文档的链接](http://docs.python.org/2/library/cmd.html)。它可能会做你想做的事。

# android - 使用 ActivityForResult()

> ID：14904017
> 
> 赞同：1
> 
> 时间：2013-02-15T21:57:29.867
> 
> 标签：android, android-intent, android-activity

当单击 startActivityForResult() 时，我正在使用带有 OnClickListener() 的多个按钮。在 OnActivityResult() 方法中，需要执行不同的操作。我如何获得正确的按钮来获得正确的结果？

```
 @Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
case R.id.camImgButton:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, picture);
        break;

    case R.id.galImgButton:
        i = new Intent();
        i.setType("image/*");
        i.setAction(Intent.ACTION_GET_CONTENT);
        i.addCategory(Intent.CATEGORY_OPENABLE);
        startActivityForResult(i, REQUEST_CODE);
        break;
    case R.id.txtButton:

    }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    switch (       ) {
    case        :

    if (resultCode == RESULT_OK) {
        // We need to recyle unused bitmaps
        if (bmp != null) {
            bmp.recycle();
        }
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        display.setImageBitmap(bmp);
        break;
        case        :

        InputStream stream = null;
    if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
        try {
        // We need to recyle unused bitmaps
        if (bmp != null) {
        bmp.recycle();
        }
    stream = getContentResolver().openInputStream(data.getData());
    bmp = BitmapFactory.decodeStream(stream);

                    display.setImageBitmap(bmp);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } finally {
                    if (stream != null)
                        try {
                            stream.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:03:16.330

您可以使用每个按钮的不同请求代码启动结果活动，并在您的`OnActivityResult`方法中检查发回的 requestCode 并将其与您想要的操作相匹配，我认为您的代码中已经有了

# ruby-on-rails - 路由测试失败，路由匹配

> ID：14904019
> 
> 赞同：1
> 
> 时间：2013-02-15T21:57:38.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, routes, omniauth

我的路线中有这行代码

```
namespace :api, defaults: {format: 'json'} do
  namespace :v1 do
    match '/auth/:provider/callback', to: 'sign_in#authenticate'
  end
end 
```

我的测试为

```
require 'spec_helper'

describe "Routing" do
  it "should route to sign_in#authenticate" do
    expect(post: 'api/v1/auth/:provider/callback').to route_to({ controller: 'api/v1/sign_in', action: 'authenticate',  format: 'json' })
  end

end 
```

但是，无论我做什么，我都会不断收到错误

```
No route matches "/api/v1/auth/:provider/callback" 
```

为了使该测试通过，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:39:22.540

我相信您遇到的错误是因为 match 默认为 GET 请求，但您正在测试规范中的 POST 请求。您应该能够通过将路由更改为：

```
match '/auth/:provider/callback', to: 'sign_in#authenticate', via: :post 
```

我个人的偏好是使用 post 方法而不是 match，它对我来说更好读：

```
post '/auth/:provider/callback' => 'sign_in#authenticate' 
```

# shell - 我的语法是关闭的还是我只是做错了？

> ID：14904022
> 
> 赞同：0
> 
> 时间：2013-02-15T21:57:53.580
> 
> 标签：shell, unix

```
var1= grep "$1" ./[FILE] | wc -l
if [ -s ./[FILE] ] && [ "$var1" -eq 1 ] 
```

然后

```
echo "it worked"

fi 
```

我正在尝试使用以下命令使 var1 具有整数值：

```
 grep "$1" ./[FILE] | wc -l 
```

我不确定它是否真的将值设置为我假设命令正在输出的值，因为在我的 echo "$var1" 中它正在回显我期望的值。但是，在我的 if 语句中：

```
if [ -s ./[FILE] ] && [ "$var1" -eq 1] 
```

我不断收到非法号码错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:07:51.553

你可能会更好

```
var1=$(grep -c "$1" ./[FILE]) 
```

> ```
> -c, --count
>          Only a count of selected lines is written to standard output. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:21:19.250

对此：

```
var1= grep "$1" ./[FILE] | wc -l
if [ -s ./[FILE] ] && [ "$var1" -eq 1 ] 
```

`=`在 shell 脚本中，赋值的两边都不能有空格。第一行的读取方式是`grep`在将空字符串分配给`var1`. 我怀疑您的意图是捕获 的输出`wc`并将该值分配给`var1`，正如另一个答案中所指出的那样：

```
var1=$(grep "$1" ./[FILE] | wc -l) 
```

但是，正如还指出的那样，您可以`wc`通过将其更改为来跳过该部分

```
var1=$(grep -c "$1" ./[FILE]) 
```

一个额外的观察 - 如果你`[FILE]`的大小为零`grep`，无论如何都不会找到任何东西，所以真的不需要整个`if ... && ...`构造。相反，这两行可能只是：

```
if (( $(grep -c "$1" ./[FILE]) == 1 ))
then
  echo "it worked"
.... 
```

如果该`echo`位是一个命令，甚至可以缩短为：

```
(( $(grep -c "$1" ./[FILE]) == 1 )) && echo "it worked" 
```

# java - 使用 7zip 扩展文件

> ID：14904026
> 
> 赞同：0
> 
> 时间：2013-02-15T21:58:11.893
> 
> 标签：java, 7zip

我正在尝试使用 7zip 扩展 zip 文件，但我不断收到 7zip Usage 打印输出。

zip 存在于 c:\temp

相同的命令在批处理窗口中成功：

```
C:\TEMP>7z x "tryThis.zip" 
```

我尝试将工作目录路径添加到文件中，也没有工作目录，没有任何帮助。- 我可能可以使用 CMD/c 命令运行它，但我更喜欢保持代码干净

我究竟做错了什么？

谢谢！

```
String  pathTo7ZipExe = "c:\\program files\\7-zip\\7z.exe";
String fileName ="tryThis.zip";
String workingDir = "c:\\temp\\";

Process process = Runtime.getRuntime().exec(
                                     new String[]{pathTo7ZipExe},
                                     new String[]{" x \"" + fileName +"\""},
                                     new File(workingDir)); 

BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));  
String line;  
while ((line = in.readLine()) != null) {  
      System.out.println(line);  
}  
// wait for zip to end.
int exitVal = process.waitFor(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:06:56.237

请查看[Runtime.exec的文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20java.io.File%29)

您实际尝试做的是不带参数调用 7-zip 并将参数提供为您的环境。环境类似于 Windows PATH 等。

所以你可能想要做类似的事情：

```
Runtime.getRuntime().exec(new String[]{pathToZipExe, "x", fileName}, null, new File(workingDir)); 
```

另一方面，我强烈建议您查看java 中包含的[ZipInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipInputStream.html) - 使用它您还可以解压缩 zip 文件。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:08:53.600

您正在调用`exec`接受`envp`数组作为第二个参数的重载。这个`envp`数组根本不用于参数，所以实际上你没有传递任何参数：这就是你得到用法打印输出的原因。

引号和空格本身不是参数的一部分：它们用于分隔`argv`（稍有保留，Windows 也是如此：这就是`CommandLineToArgW`工作原理，即使带有引号和空格的完整原始命令行始终可用）。

所以它应该是这样的：

```
Runtime.getRuntime().exec(new String[]{pathTo7ZipExe, "x", fileName},
                  new String[]{}, new File(workingDir)); 
```

（太糟糕了，我不懂 Java，所以代码可能是单一的，但它应该可以工作）。

# matlab - 'uint8' 类型的输入参数的未定义函数'log'

> ID：14904030
> 
> 赞同：4
> 
> 时间：2013-02-15T21:58:19.650
> 
> 标签：matlab, input, arguments, undefined

我一直在尝试生成图像。

```
C1 = imread(InputImage);
NumberOfGrayLevels=32;
I= 0.299*C1(:,:,1)+0.587*C1(:,:,2)+0.114*C1(:,:,3);
C = 0;
I=(C*log(I+1))';
new=uint8(mat2gray(I)*(NumberOfGrayLevels-1));
[m,n]= size(new);
rgb = zeros(m,n,3);
rgb(:,:,1) = new;
rgb(:,:,2) = rgb(:,:,1);
rgb(:,:,3) = rgb(:,:,2);
new = rgb/256;
imshow(new,[]);

no9=figure;
image(new); 
```

错误显示在 I=(C*log(I+1))';..你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:27:27.477

很可能`C1`是 type `uint8`。你应该转换它，即：

```
C1 = imread(InputImage);
C1 = double(C1);
NumberOfGrayLevels = 32;
I = 0.299*C1(:,:,1) + 0.587*C1(:,:,2) + 0.114*C1(:,:,3);
..... 
```

如果您不转换`C1`为`double`, then`I`也将是类型`uint8`- 它不会包含您想要的内容，并且`log`功能将无法使用它。

# php - 混杂图像

> ID：14904032
> 
> 赞同：1
> 
> 时间：2013-02-15T21:58:28.243
> 
> 标签：php, image, image-manipulation

所以我希望能够将图像弄乱以扭曲原始图像。我的意思是这个。加载图像，遍历图像并获取 32x32 块并将每个单独的块存储在数组中。然后将它们重新组合成一张新图片，其中的块以随机顺序排列。

这是我目前必须从原始图像中获取和存储块然后创建重新组装图像的代码（注意这还没有随机化部分）。但由于某种原因，它不能正确输出。

```
<?php

$name = "pic.jpg";

$src = imagecreatefromjpeg($name);
list($width, $height, $type, $attr) = getimagesize($name);

$x_size = floor($width/32);
$y_size = floor($height/32);

$mixed = array();

$new_image = imagecreatetruecolor(32,32);

$x = 0;
$y = 0;

for($y = 0; $y < $height; $y+= 32) {
    for($x = 0; $x < $width; $x+=32) {
        imagecopy($new_image, $src, 0, 0, $x, $y, 32, 32); 
        array_push($mixed, $new_image);
    }
}

$final_image = imagecreatetruecolor($width, $height);

$i = 0;
$x1 = 0;
$y1 = 0;

for($i = 0; $i < sizeof($mixed); $i++) {

    $x1++;

    if($x1 >= $x_size) {
        $x1 = 0;
        $y1++;
    }

    imagecopymerge($final_image, $mixed[$i], $x1, $y1, 0,0,32,32,100); 
}

header('Content-Type: image/jpeg');
imagejpeg($final_image);

?> 
```

原图：

[http://puu.sh/236XS](http://puu.sh/236XS)

输出：

[http://puu.sh/236YO](http://puu.sh/236YO)

如果您能提供帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:56:48.240

我使用以下代码解决了我自己的问题：

```
<?php
include("test.php");
//global variables
$name = "pic.jpg";
$size = 64;
$x = 0;
$y = 0;

$spots = array("0,0", "0,1", "0,2", "0,3",
               "1,0", "1,1", "1,2", "1,3",
               "2,0", "2,1", "2,2", "2,3",
               "3,0", "3,1", "3,2", "3,3");

//open image from file (Original image)
$src = imagecreatefromjpeg($name);
//load image details
list($width, $height, $type, $attr) = getimagesize($name);

//calculate amount of tiles on x/y axis.
$x_size = floor($width/$size);
$y_size = floor($height/$size);

$new_image = imagecreatetruecolor($size,$size);
$final_image = imagecreatetruecolor($width, $height);
$used = array();

for($y = 0; $y < $height; $y+= $size) {
    for($x = 0; $x < $width; $x+= $size) {

            //generate random x/y coordinates
            redo:
            $spot = rand(0, sizeof($spots)-1);

            if(!in_array($spot, $used)) {
                $coords = explode(",", $spots[$spot]);

                //grab 32x32 square from original image
                imagecopy($new_image, $src, 0, 0, $x, $y, $size, $size); 
                //place 32x32 square into new image at randomly generated coordinates
                imagecopy($final_image, $new_image, $coords[0]*$size, $coords[1]*$size, 0,0,$size,$size); 
                array_push($used, $spot);

            } else {
                goto redo;
            }

    }
}

//display final image

header('Content-Type: image/jpeg');
imagejpeg($final_image);

print_r($used);
?> 
```

可能不是最有效的代码，但它可以工作:)

# python - 如何使用 Python 批量插入 Oracle 数据库？

> ID：14904033
> 
> 赞同：16
> 
> 时间：2013-02-15T21:58:37.443
> 
> 标签：python, oracle, python-2.7, cx-oracle, batch-insert

我有一些每月的天气数据，我想插入到 Oracle 数据库表中，但我想批量插入相应的记录以提高效率。谁能建议我如何在 Python 中执行此操作？

例如，假设我的表有四个字段：一个站 ID、一个日期和两个值字段。记录由站 ID 和日期字段（复合键）唯一标识。我必须为每个站点插入的值将保存在一个包含 X 个完整年数据的列表中，例如，如果有两年的值，那么值列表将包含 24 个值。

如果我想一次插入一条记录，我假设下面是我这样做的方式：

```
connection_string = "scott/tiger@testdb"
connection = cx_Oracle.Connection(connection_string)
cursor = cx_Oracle.Cursor(connection)
station_id = 'STATION_1'
start_year = 2000

temps = [ 1, 3, 5, 7, 9, 1, 3, 5, 7, 9, 1, 3 ]
precips = [ 2, 4, 6, 8, 2, 4, 6, 8, 2, 4, 6, 8 ]
number_of_years = len(temps) / 12
for i in range(number_of_years):
    for j in range(12):
        # make a date for the first day of the month
        date_value = datetime.date(start_year + i, j + 1, 1)
        index = (i * 12) + j
        sql_insert = 'insert into my_table (id, date_column, temp, precip) values (%s, %s, %s, %s)', (station_id, date_value, temps[index], precips[index]))
        cursor.execute(sql_insert)
connection.commit() 
```

有没有办法做我上面正在做的事情，但是以一种执行批量插入以提高效率的方式？顺便说一句，我的经验是使用 Java/JDBC/Hibernate，所以如果有人可以给出与 Java 方法相比的解释/示例，那么它会特别有帮助。

编辑：也许我需要使用 cursor.executemany() 如此[处](http://www.oracle.com/technetwork/articles/dsl/python-091105.html)所述？

提前感谢您的任何建议、意见等。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-16T01:07:29.607

这是我想出的似乎效果很好的方法（但如果有改进的方法，请发表评论）：

```
# build rows for each date and add to a list of rows we'll use to insert as a batch 
rows = [] 
numberOfYears = endYear - startYear + 1
for i in range(numberOfYears):
    for j in range(12):
        # make a date for the first day of the month
        dateValue = datetime.date(startYear + i, j + 1, 1)
        index = (i * 12) + j
        row = (stationId, dateValue, temps[index], precips[index])
        rows.append(row)

# insert all of the rows as a batch and commit
ip = '192.1.2.3' 
port = 1521
SID = 'my_sid'
dsn = cx_Oracle.makedsn(ip, port, SID)
connection = cx_Oracle.connect('username', 'password', dsn)
cursor = cx_Oracle.Cursor(connection)
cursor.prepare('insert into ' + database_table_name + ' (id, record_date, temp, precip) values (:1, :2, :3, :4)')
cursor.executemany(None, rows)
connection.commit()
cursor.close()
connection.close() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-15T22:31:21.633

使用`Cursor.prepare()`和`Cursor.executemany()`。

从[cx_Oracle 文档](http://cx-oracle.sourceforge.net/html/cursor.html)：

> `Cursor.prepare`（*声明*[，*标签*]）
> 
> 这可以在调用 execute() 之前使用，以定义将要执行的语句。完成后，当使用 None 或与语句相同的字符串对象调用 execute() 时，将不会执行准备阶段。[...]
> 
> `Cursor.executemany`（*语句*，*参数*）
> 
> 准备针对数据库执行的语句，然后针对在序列参数中找到的所有参数映射或序列执行它。该语句的管理方式与 execute() 方法管理它的方式相同。

因此，使用上述两个函数，您的代码变为：

```
connection_string = "scott/tiger@testdb"
connection = cx_Oracle.Connection(connection_string)
cursor = cx_Oracle.Cursor(connection)
station_id = 'STATION_1'
start_year = 2000

temps = [ 1, 3, 5, 7, 9, 1, 3, 5, 7, 9, 1, 3 ]
precips = [ 2, 4, 6, 8, 2, 4, 6, 8, 2, 4, 6, 8 ]
number_of_years = len(temps) / 12

# list comprehension of dates for the first day of the month
date_values = [datetime.date(start_year + i, j + 1, 1) for i in range(number_of_years) for j in range(12)]

# second argument to executemany() should be of the form:
# [{'1': value_a1, '2': value_a2}, {'1': value_b1, '2': value_b2}]
dict_sequence = [{'1': date_values[i], '2': temps[i], '3': precips[i]} for i in range(1, len(temps))]

sql_insert = 'insert into my_table (id, date_column, temp, precip) values (%s, :1, :2, :3)', station_id)
cursor.prepare(sql_insert)
cursor.executemany(None, dict_sequence)
connection.commit() 
```

另请参阅 Oracle 的[Mastering Oracle+Python](http://www.oracle.com/technetwork/articles/dsl/mastering-oracle-python-1391323.html)系列文章。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-26T05:08:10.213

仅供参考我的测试结果：

我插入 5000 行。每行 3 列。

1.  运行 insert 5000 次，耗时 1.24 分钟。
2.  使用 executemany 运行，耗时 0.125 秒。
3.  使用插入所有代码运行：花费 4.08 分钟。

python 代码，它设置 sql 就像 insert all into t(a,b,c) select :1, :2, :3 from dual union all select :4, :5: :6 from daul ...

设置这个长 sql 的 python 代码花费了 0.145329 秒。

我在一台非常旧的 sun 机器上测试我的代码。中央处理器：1415 兆赫。

在第三种情况下，我检查了数据库端，等待事件是“SQL*Net more data from client”。这意味着服务器正在等待来自客户端的更多数据。

第三种方法的结果在没有测试的情况下对我来说是难以置信的。

所以我的简短建议就是使用executemany。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-17T18:44:51.803

正如其中一条评论所说，考虑使用`INSERT ALL`. 据说它会比使用`executemany()`.

例如：

```
INSERT ALL
  INTO mytable (column1, column2, column_n) VALUES (expr1, expr2, expr_n)
  INTO mytable (column1, column2, column_n) VALUES (expr1, expr2, expr_n)
  INTO mytable (column1, column2, column_n) VALUES (expr1, expr2, expr_n)
SELECT * FROM dual; 
```

[http://www.techonthenet.com/oracle/questions/insert_rows.php](http://www.techonthenet.com/oracle/questions/insert_rows.php)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-08T17:55:20.610

我将使用联合创建一个大型 SQL 插入语句：

```
insert into mytable(col1, col2, col3)
select a, b, c from dual union
select d, e, f from dual union
select g, h, i from dual 
```

您可以在 python 中构建字符串并将其作为要执行的语句提供给 oracle。

# mysql - mysql中的左外连接问题

> ID：14904044
> 
> 赞同：0
> 
> 时间：2013-02-15T21:59:11.727
> 
> 标签：mysql, join, sql-like, outer-join

我试图获取parts_keywords 中未包含在parts_questions 中的所有行。不幸的是，我得到了两个表的所有行。

```
SELECT *FROM parts_keywords 
    LEFT OUTER JOIN parts_questions ON parts_keywords.ID = parts_questions.question_id
     WHERE parts_questions.question_id IS NULL
     AND parts_keywords.term  LIKE '%where%' || parts_keywords.term LIKE '%how%' || parts_keywords.term LIKE '%who%' || parts_keywords.term LIKE '%what%' 
    ORDER BY parts_keywords.ID DESC lIMIT 15 
```

我尝试使用 OR 而不是 ||。我也尝试过使用 MATCH 而不是 LIKE 无济于事。

当我只使用一个 LIKE 元素时，例如“谁”，我会得到正确的结果。但是，将所有 LIKE 元素的结果放在一起对我来说很重要。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:01:53.703

您在 OR 子句周围缺少 ()

```
SELECT *
FROM parts_keywords 
  LEFT OUTER JOIN parts_questions ON parts_keywords.ID = parts_questions.question_id
WHERE parts_questions.question_id IS NULL
AND (parts_keywords.term  LIKE '%where%' 
 OR parts_keywords.term LIKE '%how%'
 OR parts_keywords.term LIKE '%who%'
 OR parts_keywords.term LIKE '%what%')
ORDER BY parts_keywords.ID DESC lIMIT 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:06:01.407

尝试使用括号

```
SELECT * FROM parts_keywords pk
LEFT OUTER JOIN parts_questions pq ON pk.ID = pq.question_id
WHERE pq.question_id IS NULL
AND ( pk.term LIKE '%where%' OR pk.term LIKE '%how%' OR pk.term LIKE '%who%' OR pk.term     LIKE '%what%' )
ORDER BY parts_keywords.ID DESC lIMIT 15 
```

# django - 将现有 auth.User 数据迁移到新的 Django 1.5 自定义用户模型？

> ID：14904046
> 
> 赞同：34
> 
> 时间：2013-02-15T21:59:33.033
> 
> 标签：django, postgresql, django-south, django-1.5

我不想破坏我网站上的所有用户。但我想利用 Django 1.5 的自定义可插拔用户模型。这是我的新用户模型：

```
class SiteUser(AbstractUser):
    site = models.ForeignKey(Site, null=True) 
```

在新安装时，一切都适用于我的新模型（我有其他代码，以及这样做的充分理由——所有这些在这里都无关紧要）。但是，如果我将它放在我的实时站点上并进行同步数据库和迁移，我将失去所有用户，或者至少他们将位于与为我的新模型创建的新表不同的孤立表中。

我对 South 很熟悉，但根据[这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/south-users/CTpNthRf9Kc)和我的一些试验，它的数据迁移目前似乎不适合这种特定的迁移。因此，我正在寻找某种方法来让 South 为此工作或进行一些非 South 迁移（原始 SQL、dumpdata/loaddata 或其他），我可以在我的每台服务器（Postgres 9.2）上运行以迁移用户一旦创建了新表，而旧的 auth.User 表仍在数据库中。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-25T02:49:34.917

South 能够为您完成迁移，但您需要聪明并分阶段进行。这是分步指南：（本指南假定您是子类`AbstractUser`，而不是`AbstractBaseUser`）

1.  在进行切换之前，请确保在包含您的自定义用户模型的应用程序中启用了南支持（为了指南，我们将调用它`accounts`和模型`User`）。此时，您应该**还没有**自定义用户模型。

    ```
    $ ./manage.py schemamigration accounts --initial
    Creating migrations directory at 'accounts/migrations'...
    Creating __init__.py in 'accounts/migrations'...
    Created 0001_initial.py.

    $ ./manage.py migrate accounts [--fake if you've already syncdb'd this app]
     Running migrations for accounts:
     - Migrating forwards to 0001_initial.
     > accounts:0001_initial
     - Loading initial data for accounts. 
    ```

2.  在帐户应用程序中创建一个新的空白用户迁移。

    ```
    $ ./manage.py schemamigration accounts --empty switch_to_custom_user
    Created 0002_switch_to_custom_user.py. 
    ```

3.  在应用程序中创建您的自定义`User`模型`accounts`，但请确保将其定义为：

    ```
    class SiteUser(AbstractUser): pass 
    ```

4.  使用以下代码填写空白迁移。

    ```
    # encoding: utf-8
    from south.db import db
    from south.v2 import SchemaMigration

    class Migration(SchemaMigration):

        def forwards(self, orm):
            # Fill in the destination name with the table name of your model
            db.rename_table('auth_user', 'accounts_user')
            db.rename_table('auth_user_groups', 'accounts_user_groups')
            db.rename_table('auth_user_user_permissions', 'accounts_user_user_permissions')

        def backwards(self, orm):
            db.rename_table('accounts_user', 'auth_user')
            db.rename_table('accounts_user_groups', 'auth_user_groups')
            db.rename_table('accounts_user_user_permissions', 'auth_user_user_permissions')

        models = { ....... } # Leave this alone 
    ```

5.  运行迁移

    ```
    $ ./manage.py migrate accounts
     - Migrating forwards to 0002_switch_to_custom_user.
     > accounts:0002_switch_to_custom_user
     - Loading initial data for accounts. 
    ```

6.  现在对您的用户模型进行任何更改。

    ```
    # settings.py
    AUTH_USER_MODEL = 'accounts.User'

    # accounts/models.py
    class SiteUser(AbstractUser):
        site = models.ForeignKey(Site, null=True) 
    ```

7.  为此更改创建并运行迁移

    ```
    $ ./manage.py schemamigration accounts --auto
     + Added field site on accounts.User
    Created 0003_auto__add_field_user_site.py.

    $ ./manage.py migrate accounts
     - Migrating forwards to 0003_auto__add_field_user_site.
     > accounts:0003_auto__add_field_user_site
     - Loading initial data for accounts. 
    ```

老实说，如果您已经对您的设置有很好的了解并且已经使用了 south，那么它应该就像将以下迁移添加到您的帐户模块一样简单。

```
# encoding: utf-8
from south.db import db
from south.v2 import SchemaMigration
from django.db import models

class Migration(SchemaMigration):

    def forwards(self, orm):
        # Fill in the destination name with the table name of your model
        db.rename_table('auth_user', 'accounts_user')
        db.rename_table('auth_user_groups', 'accounts_user_groups')
        db.rename_table('auth_user_permissions', 'accounts_user_permissions')
        # == YOUR CUSTOM COLUMNS ==
        db.add_column('accounts_user', 'site_id',
            models.ForeignKey(orm['sites.Site'], null=True, blank=False)))

    def backwards(self, orm):
        db.rename_table('accounts_user', 'auth_user')
        db.rename_table('accounts_user_groups', 'auth_user_groups')
        db.rename_table('accounts_user_user_permissions', 'auth_user_user_permissions')
        # == YOUR CUSTOM COLUMNS ==
        db.remove_column('accounts_user', 'site_id')

    models = { ....... } # Leave this alone 
```

编辑 2/5/13：为 auth_user_group 表添加了重命名。由于 db 约束，FK 将自动更新以指向正确的表，但 M2M 字段的表名是从 2 个最终表的名称生成的，并且需要以这种方式手动更新。

编辑 2：感谢 @Tuttle 和 @pix0r 的更正。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-25T06:47:59.580

我这样做的非常懒惰的方式：

1.  创建一个新模型（用户），扩展 AbstractUser。在新模型中，在它的 Meta 中，覆盖[db_table](https://docs.djangoproject.com/en/dev/ref/models/options/#db-table)并设置为“auth_user”。

2.  使用 South 创建初始迁移。

3.  迁移，但伪造迁移，`--fake`在运行迁移时使用。

4.  添加新字段，创建迁移，正常运行。

这超出了懒惰，但有效。您现在有一个 1.5 兼容的用户模型，它只使用旧的用户表。您还拥有适当的迁移历史记录。

您可以稍后通过手动迁移来重命名表来解决此问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T22:11:16.577

我认为您已经正确地确定了像 South 这样的迁移框架是正确的方法。假设您使用的是 South，您应该能够使用[数据迁移](http://south.readthedocs.org/en/0.7.6/tutorial/part3.html#data-migrations)功能将旧用户移植到新模型。

具体来说，我会添加一个`forwards`方法来将用户表中的所有行复制到新表中。类似于以下内容：

```
def forwards(self, orm):
    for user in orm.User.objects.all():
        new_user = SiteUser(<initialize your properties here>)
        new_user.save() 
```

您也可以使用该[`bulk_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)方法来加快速度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T17:33:39.797

我厌倦了与 South 的斗争，所以实际上我最终以不同的方式做这件事，并且对于我的特殊情况来说效果很好：

首先，我使用 ./manage.py 转储数据，修复转储，然后使用 ./manage.py 加载数据，它有效。然后我意识到我可以用一个独立的脚本来做基本相同的事情，它只加载必要的 django 设置并直接进行序列化/反序列化。

# 自包含的python脚本

```
## userconverter.py ##

import json
from django.conf import settings

settings.configure(
    DATABASES={ 
            # copy DATABASES configuration from your settings file here, or import it directly from your settings file (but not from django.conf.settings) or use dj_database_url
            },
    SITE_ID = 1, # because my custom user implicates contrib.sites (which is why it's in INSTALLED_APPS too)
    INSTALLED_APPS = ['django.contrib.sites', 'django.contrib.auth', 'myapp'])

# some things you have to import after you configure the settings
from django.core import serializers
from django.contrib.auth.models import User

# this isn't optimized for huge amounts of data -- use streaming techniques rather than loads/dumps if that is your case
old_users = json.loads(serializers.serialize('json', User.objects.all()))
for user in old_users:
    user['pk'] = None
    user['model'] = "myapp.siteuser"
    user['fields']["site"] = settings['SITE_ID']

for new_user in serializers.deserialize('json', json.dumps(old_users)):
    new_user.save() 
```

# 使用转储数据/加载数据

我做了以下事情：

1) ./manage.py 转储数据 auth.User

2) 将 auth.user 数据转换为新用户的脚本。（或者只是在你最喜欢的文本编辑器或 grep 中手动搜索和替换）我的看起来像：

```
def convert_user_dump(filename, site_id):
    file = open(filename, 'r')
    contents = file.read()
    file.close()
    user_list = json.loads(contents)
    for user in user_list:
        user['pk'] = None  # it will auto-increment
        user['model'] = "myapp.siteuser"
        user['fields']["site"] = side_id
    contents = json.dumps(user_list)
    file = open(filename, 'w')
    file.write(contents)
    file.close() 
```

3) ./manage.py 加载数据文件名

4) 设置 AUTH_USER_MODEL

*旁注：无论您使用哪种技术（South、序列化/修改/反序列化或其他），进行此类迁移的一个关键部分是，只要您在当前设置中将 AUTH_USER_MODEL 设置为自定义模型，django将您与 auth.User 断开连接，即使该表仍然存在。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-13T17:18:49.630

我们决定在我们的 Django 1.6/Django-CMS 3 项目中切换到自定义用户模型，可能有点晚了，因为我们的数据库中有我们不想丢失的数据（一些 CMS 页面等）。

在我们将 AUTH_USER_MODEL 切换到我们的自定义模型之后，我们遇到了很多我们没有预料到的问题，因为很多其他表都有旧表的外键，而旧`auth_user`表没有被删除。因此，尽管表面上看起来一切正常，但实际上发生了很多事情：发布页面、向页面添加图像、添加用户等，因为他们试图在仍然有一个外键的表中创建一个条目`auth_user`，但实际上并没有将匹配的记录插入`auth_user`.

我们找到了一种快速而肮脏的方法来重建所有表和关系，并复制我们的旧数据（用户除外）：

*   对您的数据库进行完整备份`mysqldump`
*   在没有`CREATE TABLE`语句的情况下进行另一次备份，并排除重建后不存在或将`syncdb --migrate`在新数据库上填充的一些表：
    *   `south_migrationhistory`
    *   `auth_user`
    *   `auth_user_groups`
    *   `auth_user_user_permissions`
    *   `auth_permission`
    *   `django_content_types`
    *   `django_site`
    *   属于您从项目中删除的应用程序的任何其他表（您可能只有通过试验才能发现）
*   删除数据库
*   重新创建数据库（例如`manage.py syncdb --migrate`）
*   创建空数据库的转储（以便更快地再次循环此循环）
*   尝试加载您在上面创建的数据转储
*   如果由于重复的主键或缺少表而无法加载，则：
    *   使用文本编辑器编辑转储
    *   删除锁定、转储和解锁该表的语句
    *   重新加载空的数据库转储
    *   尝试再次加载数据转储
    *   重复直到数据转储加载没有错误

我们运行的命令（对于 MySQL）是：

```
mysqldump <database> > ~/full-backup.sql
mysqldump <database> \
    --no-create-info \
    --ignore-table=<database>.south_migrationhistory \
    --ignore-table=<database>.auth_user \
    --ignore-table=<database>.auth_user_groups \
    --ignore-table=<database>.auth_user_user_permissions \
    --ignore-table=<database>.auth_permission \
    --ignore-table=<database>.django_content_types \
    --ignore-table=<database>.django_site \
> ~/data-backup.sql

./manage.py sqlclear
./manage.py syncdb --migrate
mysqldump <database> > ~/empty-database.sql

./manage.py dbshell < ~/data-backup.sql

(edit ~/data-backup.sql to remove data dumped from a table that no longer exists)

./manage.py dbshell < ~/empty-database.sql
./manage.py dbshell < ~/data-backup.sql

(repeat until clean) 
```

# haskell - 打印带有变量名的 AST

> ID：14904048
> 
> 赞同：9
> 
> 时间：2013-02-15T21:59:34.807
> 
> 标签：haskell, dsl

我正在尝试在 Haskell 中实现 EDSL。我想用绑定的变量名漂亮地打印 AST（如果我不能得到真实的名字，那么一些生成的名字就可以了）。

这是我通过一个简单的例子已经走了多远：

```
import Control.Monad.State

data Free f a = Roll (f (Free f a))
              | Pure a

instance Functor f => Monad (Free f) where
  return         = Pure
  (Pure a) >>= f = f a
  (Roll f) >>= g = Roll $ fmap (>>= g) f

data Expr a = I a
            | Plus (Expr a) (Expr a)
            deriving (Show)

data StackProgram a next = Pop  (a -> next)
                         | Push a next

instance Functor (StackProgram a) where
  fmap f (Pop    k) = Pop (f.k)
  fmap f (Push i x) = Push i (f x)

liftF :: Functor f => f a -> Free f a
liftF l = Roll $ fmap return l

push :: a -> Free (StackProgram a) ()
push i = liftF $ Push i ()

pop :: Free (StackProgram a) a
pop = liftF $ Pop id

prog3 :: Free (StackProgram (Expr Int)) (Expr Int)
prog3 = do
  push (I 3)
  push (I 4)
  a <- pop
  b <- pop
  return (Plus a b)

showSP' :: (Show a, Show b) => Free (StackProgram a) b -> [a] -> State Int String
showSP' (Pure a)           _        = return $ "return " ++ show a
showSP' (Roll (Pop f))    (a:stack) = do 
  i <- get
  put (i+1)
  rest <- showSP' (f a) stack
  return $ "var" ++ show i ++ " <- pop " ++ show (a:stack) ++ "\n" ++ rest
showSP' (Roll (Push i n))  stack    = do
  rest <- showSP' n (i:stack) 
  return $ "push " ++ show i ++ " " ++ show stack ++ "\n" ++ rest

showSP :: (Show a, Show b) => Free (StackProgram a) b -> [a] -> String
showSP prg stk = fst $ runState (showSP' prg stk) 0 
```

运行这个给出：

```
*Main> putStrLn $ showSP prog3 []
push I 3 []
push I 4 [I 3]
var0 <- pop [I 4,I 3]
var1 <- pop [I 3]
return Plus (I 4) (I 3) 
```

所以我想要的是替换`Plus (I 4) (I 3)`为`Plus var0 var1`. 我曾考虑过遍历树的其余部分并用名称-值元组替换绑定变量，但我不能 100% 确定这是否/如何工作。我也更喜欢保留原始变量名，但我想不出一种简单的方法来做到这一点。我希望在 haskell 中有一个相当轻量级的语法（如上所述）。

我也很感激那些教我如何最好地做这些事情的材料的指针。我已经阅读了一些关于免费单子和 GADT 的内容，但我想我想念如何将它们放在一起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T00:30:25.353

使用您拥有的结构，您无法在“纯”Haskell 代码中执行此操作，因为一旦您的代码被编译，您就无法区分`(Plus a b)`并`(Plus (I 4) (I 3))`保持“引用透明性”——变量及其值的可互换性。

然而，有一些不安全的技巧——即不能保证有效——可以让你做这种事情。[它们通常以“可观察共享”的名称命名，并且基于使用StableName](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.6.0.1/System-Mem-StableName.html)访问值如何表示的内部结构。本质上，这为您提供了一个指针相等操作，允许您区分`a`对 value 的引用和新副本`(I 4)`。

一个有助于完成此功能的包是[data-reify](http://hackage.haskell.org/package/data-reify)。

在您的源代码中使用的实际变量名称将在编译期间不可挽回地丢失。在[Paradise](http://urchin.earth.li/~ganesh/icfp08.pdf)中，我们使用预处理器在编译前进行翻译`foo <~ bar`，`foo <- withName "foo" $ bar`但它很笨拙，并且会大大减慢构建速度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T14:23:10.330

我是根据@Gabriel Gonzales 的[链接回答得出](https://stackoverflow.com/a/14084654/1026598)的。基本思想是在 Expr 类型中引入一个新的*变量*构造函数，并在解释树时为它们分配一个唯一的 id。这和清理代码有点给出：

```
import Control.Monad.Free
import Data.Map

newtype VInt = VInt Int

data Expr = IntL Int
          | IntV VInt
          | Plus Expr Expr

instance Show Expr where
  show (IntL i)        = show i
  show (IntV (VInt i)) = "var" ++ show i
  show (Plus e1 e2)    = show e1 ++ " + " ++ show e2

data StackProgF next = Pop  (VInt -> next)
                     | Push Expr next

instance Functor StackProgF where
  fmap f (Pop    k) = Pop (f.k)
  fmap f (Push e x) = Push e (f x)

type StackProg = Free StackProgF
type Stack = [Expr]

push :: Expr -> StackProg ()
push e = liftF $ Push e ()

pop :: StackProg Expr
pop = liftF $ Pop IntV

prog3 :: StackProg Expr
prog3 = do
  push (IntL 3)
  push (IntL 4)
  a <- pop
  b <- pop
  return (Plus a b)

showSP :: StackProg Expr -> String
showSP prg = go 0 prg []
  where
    go i (Pure a)          _     = show a
    go i (Free (Pop n))    (h:t) = "var" ++ show i ++ " <- pop " ++ show (h:t) ++ "\n" ++ 
                                   go (i+1) (n (VInt i)) t
    go i (Free (Pop _))    []    = "error: pop on empty stack\n"
    go i (Free (Push e n)) stk   = "push " ++ show e ++ ", " ++ show stk ++ "\n" ++ go i n (e:stk)

type Env = Map Int Expr

evalExpr :: Expr -> Env -> Int
evalExpr (IntL i)        _   = i
evalExpr (IntV (VInt k)) env = evalExpr (env ! k) env
evalExpr (Plus e1 e2)    env = evalExpr e1 env + evalExpr e2 env

evalSP :: StackProg Expr -> Int
evalSP prg = go 0 prg [] empty
  where
    go i (Free (Pop _))    []    env = error "pop on empty stack\n"    
    go i (Free (Pop n))    (h:t) env = go (i+1) (n (VInt i)) t       (insert i h env)
    go i (Free (Push e n)) stk   env = go i     n            (e:stk) env
    go i (Pure a)          _stk  env = evalExpr a env 
```

漂亮的打印和运行：

```
*Main> putStrLn $ showSP prog3
push 3, []
push 4, [3]
var0 <- pop [4,3]
var1 <- pop [3]
var0 + var1
*Main> evalSP prog3
7 
```

# multithreading - Qt - 注册多个信号，当它们全部发出时会产生一个连接到一个插槽的巨大信号

> ID：14904050
> 
> 赞同：0
> 
> 时间：2013-02-15T21:59:38.187
> 
> 标签：multithreading, qt, signals, signals-slots, slots

在我的应用程序中，我有以下情况：

*   物体发出信号`removeCharacter`
*   `removeCharacter`有 A 部分和 B 部分，A 部分完成后会触发信号`removePath`
*   插槽`onRemovePath`连接到信号`removePath`并将删除角色的路径，然后触发信号`pathRemoved`
*   插槽`finishRemovingCharacter`连接到信号`pathRemoved`并将完成字符删除过程的其余部分
*   我不想`finishRemovingCharacter`在触发`removePath`信号时总是执行这个逻辑

是否有一些通用的方法来实现上述目标，最好是 Qt 可能已经有的东西？

编辑：我希望有一种通用的方法来指定信号和槽处理的序列，而不是需要一个中间槽来发送一个信号，它已经完成，以便下一步可以执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:21:35.363

在我看来，只有两种方法可以处理这种情况。

选项 1：为事件
使用两个信号。`pathRemoved`例如`finishRemovingCharacter`连接到`pathRemoved`但不连接到`pathRemovedSpecial`.

选项 2：
向`pathRemoved`信号添加适当的参数，然后在`finishRemovingCharacter`插槽中检查它是否应该继续或忽略此事件，在这种情况下您只需`return;`.

# java - Java 类说明

> ID：14904056
> 
> 赞同：-1
> 
> 时间：2013-02-15T21:59:59.020
> 
> 标签：java, class, inheritance

我不是在寻找代码或任何东西，只是对所有这些如何工作的一些解释。

它是一个家庭作业。

我应该创建一个住宅区（就像一个家庭社区）。每栋房子都像联排别墅。

小区有名字，有一些房子，有一些车库，有保安。

每个房子都有自己的特点，比如房间数量、租金等。每个员工都有自己的特点，比如员工类型、姓名等。

我需要能够创建多个复合体，并且房屋/员工必须像数组列表一样动态，以便我可以添加或删除。

我可以查找什么来帮助我入门？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:03:31.697

看看 java 如何实现面向对象的编程概念：

[甲骨文教程](http://docs.oracle.com/javase/tutorial/java/concepts/class.html)

就像一个类可以有一个字段`int`一样

```
public class Person {
    public int age;
} 
```

它也可以有一个类类型的字段，如`Person`

```
public class Person {
    public int age;
    public Person bestFriend;
    // or
    public List<Person> otherFriends;
} 
```

继续阅读[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/classes.html)的主题。

# php - 简单的 ORM 结构 Codeigniter

> ID：14904060
> 
> 赞同：1
> 
> 时间：2013-02-15T22:00:12.550
> 
> 标签：php, codeigniter, properties, undefined

这是我的代码：

```
<?php

class VortexORM {

    private static $orm = null;

    public function __get($name) {
        return $this->$name;
    }

    public function __set($name, $value) {
        $this->$name = $value;
    }

    public static function getInstance() {
        if (VortexORM::$orm == null)
            VortexORM::$orm = new VortexORM();
        return VortexORM::$orm;
    }

    public static function set($name, $value) {
        $orm = VortexORM::getInstance();
        //echo "Setting [ <b>{$name}</b> ::   <i>{$value}</i>]";
        $orm->$name = $value;
    }

    public static function get($name) {
        $orm = VortexORM::getInstance();
        // echo "Getting [ <b>{$name}</b> ::   <i>{$orm->$name}</i>]";
        return $orm->$name;
    }

} 
```

要获取我使用的数据：

```
var_dump(VortexORM::get('admin_links'));
var_dump(VortexORM::get('admin')); 
```

要设置我使用的数据：

```
VortexORM::set('admin_links',array(....)); 
```

但是，我收到以下警告：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined property: VortexORM::$admin_links
Filename: Vortex/VortexORM.php
Line Number: 8
NULL
A PHP Error was encountered
Severity: Notice
Message: Undefined property: VortexORM::$admin
Filename: Vortex/VortexORM.php
Line Number: 8 
```

为什么我会收到这些警告？

我希望能够在 CodeIgniter 中像这样作为静态函数访问它：

```
$this->vortexorm->admin_links = array(....); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-16T07:51:20.453

好的，我刚刚测试了这段代码：

```
 <?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

class VortexORM {

    private static $orm = null;

    public function __get($name) {
        return $this->$name;
    }

    public function __set($name, $value) {
        $this->$name = $value;
    }

    public static function getInstance() {
        if (VortexORM::$orm == null)
            VortexORM::$orm = new VortexORM();
        return VortexORM::$orm;
    }

    public static function set($name, $value) {
        $orm = VortexORM::getInstance();
        //echo "Setting [ <b>{$name}</b> ::   <i>{$value}</i>]";
        $orm->$name = $value;
    }

    public static function get($name) {
        $orm = VortexORM::getInstance();
        // echo "Getting [ <b>{$name}</b> ::   <i>{$orm->$name}</i>]";
        return $orm->$name;
    }

}

VortexORM::set('admin_links',"test");

var_dump(VortexORM::get('admin_links')); 
```

它对我来说很好用。给出以下输出：

```
string(4) "test" 
```

所以，我想，你可能只是想在设置之前检索一个属性？或者请分享更多细节。另外，您为什么要尝试创建新的 ORM，我们可以在其中轻松地[使用带有 codeigniter 的学说](http://codesamplez.com/development/using-doctrine-with-codeigniter)？

# java - 在运行时更改方法执行 (Java)

> ID：14904065
> 
> 赞同：0
> 
> 时间：2013-02-15T22:00:35.057
> 
> 标签：java

我是一名测试软件工程师，我正在尝试编写可以替换生产端方法的代码，以便测试可以执行这些代码。基本上，我不想为了可测试性而修改生产代码。

这是一个简单的场景：

```
public class Foo {

     public static void foo() {
         printA();
     }

     public static void printA() {
         System.out.println("A");
     }

     public static void printB() {
         System.out.println("B");
     }
}

public class Foobar {

    public Foobar() {

    }

    public void test() {
        Foo.foo();
    }

    public static void main(String[] args) {
        //Try changing the method here

        new Foobar().test();
    }

} 
```

如您所见，当 main 执行时，它将打印“A”，因为它在静态方法 foo() 上调用方法 printA。现在在运行时，有没有一种方法可以注入或修改，以便 foo 调用 printB 而不是 printA？

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:04:05.150

看看[AspectJ](http://www.eclipse.org/aspectj/)。

它提供了`advices`，可用于在方法*周围*执行一些代码（在执行之前和之后），包括完全绕过对原始方法的调用并返回一些任意值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:03:11.763

如果您只是为了测试类而这样做，则可以使用模拟框架来模拟服务器上的类。我喜欢[Mockito](http://code.google.com/p/mockito/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:03:24.363

您可以使用 java 反射 api 自己完成，也可以使用[PowerMock](http://code.google.com/p/powermock/)之类的工具。

# mysql - MySQL在一个查询中删除多行，每行唯一的条件

> ID：14904067
> 
> 赞同：72
> 
> 时间：2013-02-15T22:00:39.790
> 
> 标签：mysql, unique-constraint, multiple-records

所以我知道在[MySQL](http://www.mysql.com/)中可以在一个查询中插入多行，如下所示：

```
INSERT INTO table (col1,col2) VALUES (1,2),(3,4),(5,6) 
```

我想以类似的方式删除多行。我知道可以根据每行完全相同的条件删除多行，即

```
DELETE FROM table WHERE col1='4' and col2='5' 
```

或者

```
DELETE FROM table WHERE col1 IN (1,2,3,4,5) 
```

但是，如果我想在一个查询中删除多行，而每一行都有一组自身独有的条件，该怎么办？我正在寻找这样的东西：

```
DELETE FROM table WHERE (col1,col2) IN (1,2),(3,4),(5,6) 
```

有谁知道这样做的方法？还是不可能？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-02-15T22:20:12.783

你非常接近，你可以使用这个：

```
DELETE FROM table WHERE (col1,col2) IN ((1,2),(3,4),(5,6)) 
```

请看这个[小提琴](http://sqlfiddle.com/#!2/28eba/1)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-10T08:03:31.423

对给出的答案进行了轻微扩展，因此希望对提问者和其他任何人有用。

您还可以`SELECT`删除要删除的值。但请注意错误 1093 - 您无法在 FROM 子句中指定要更新的目标表。

```
DELETE FROM
    orders_products_history
WHERE
    (branchID, action) IN (
    SELECT
        branchID,
        action
    FROM
        (
        SELECT
            branchID,
            action
        FROM
            orders_products_history
        GROUP BY
            branchID,
            action
        HAVING
            COUNT(*) > 10000
        ) a
    ); 
```

我想删除单个操作/分支的历史记录数超过 10,000 的所有历史记录。多亏了这个问题和选择的答案，我可以。

希望这是有用的。

理查德。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-16T15:51:54.643

进行了很多谷歌搜索，但是当我想使用值列表从单个表中删除多个项目时，这是我在 Python for MySql 中所做的。

```
#create some empty list
values = []
#continue to append the values you want to delete to it
#BUT you must ensure instead of a string it's a single value tuple
values.append(([Your Variable],))
#Then once your array is loaded perform an execute many
cursor.executemany("DELETE FROM YourTable WHERE ID = %s", values) 
```

# javascript - 闪烁 - 更改窗口滚动上的 CSS 背景位置

> ID：14904069
> 
> 赞同：2
> 
> 时间：2013-02-15T22:00:40.143
> 
> 标签：javascript, css, parallax

由于缺乏观点，我将重新提出我的问题。有谁知道为什么在 Chrome 和 IE 的窗口滚动上修改背景位置有时会导致闪烁？

基本上这样的事情总是会导致 Chrome 和 IE 闪烁：

```
$(window).scroll(function(){$(divwithbg).css('background-position','center '+positiveinteger+px')}); 
```

这样的事情在任何主流浏览器中似乎都不会闪烁：

```
$(window).scroll(function(){$(divwithbg).css('background-position','center '+negativeinteger+px')}); 
```

如果您想查看此问题，请尝试下面的示例代码以及附加图像。如果您设置 data-parallaxdirection="0"，那将是无抖动的。如果你设置 data-parallaxdirection="1"，就会有抖动。我已将我使用的图像附加到这篇文章中。

```
<!DOCTYPE html>
<html>
<head>
        <style type="text/css">
        .parallax-container {width:100%; position:relative; display:block; overflow:hidden; background-color:black; background-position:center center; background-repeat:no-repeat;}

        </style>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <script type="text/javascript">
var CONTAINER = window;
var AVAILHEIGHT;
$(document).ready(function(){
    $(window).scroll(ParallaxScrollEvent);
    AVAILHEIGHT = $(window).height();
    $('.parallax-container').height(AVAILHEIGHT/1.1);
});

function ParallaxScroll(obj)
{
    var containerTop = $(obj).position().top;
    var containerHeight = $(obj).height();
    var parallaxspace = parseInt($(obj).attr('data-parallaxspace'));
    var goforward = parseInt($(obj).attr('data-parallaxdirection'));
    var scrollTop =  $(window).scrollTop() + AVAILHEIGHT;

//  var links = $('.location-links'); //on contact page

    if( scrollTop > containerTop)
    {
            var pos = 0;
            if(goforward)
            {
                            // why does this cause flickering?
                var scrolled = $(window).scrollTop() - containerTop;
                pos = 1.2*scrolled;

            }
            else
            {
                            // why is this flicker free?
                pos = -1*(scrollTop-containerTop)*parallaxspace/(2*containerHeight);
            }
            $(obj).css('background-position', 'center '+pos+'px');
    }
}

function ParallaxScrollEvent()
{
    var parallaxcontainer = $('.parallax-container');
    for(var c=0; c< parallaxcontainer.length; c++)
        ParallaxScroll(parallaxcontainer[c]);
}

        </script>

</head>
<body>
<div class="parallax-container" style="background-image:url(images/location/2.jpg);" data-parallaxdirection="1" data-parallaxspace="800">
            </div>
            <div class="parallax-container" style="background-image:url(images/location/2.jpg);" data-parallaxdirection="1" data-parallaxspace="800">
            </div>
            <div class="parallax-container" style="background-image:url(images/location/2.jpg);" data-parallaxdirection="1" data-parallaxspace="800">
            </div>

</body>
</html> 
```

![在此处输入图像描述](../Images/ccc5eff9666bece79ee90d63ed191b13.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T17:23:24.277

我解决了这个问题。

我`background-attachment:fixed`在我的`.parallax-container`.

# git - 如何在 GNU Emacs 中停用 vc-git？

> ID：14904071
> 
> 赞同：7
> 
> 时间：2013-02-15T22:00:49.100
> 
> 标签：git, version-control, emacs, magit

我用我的 Emacs 文本文件为该文件夹创建了一个 Git 存储库，然后安装了 git.el 和 Magit。

Emacs 似乎变慢了很多，我一直`loading vc-git...done`在 minibuffer 中看到消息。

我认为与 Git 交互是导致 Emacs 速度变慢的原因是否正确？

我实际上并不需要使用 Emacs 来与 Git 交互，反正我通常只使用 GitHub。我从 .emacs 文件中删除了对 git.el 和 magit.el 的引用，但我仍然收到消息。

如何在 Emacs 中禁用 vc-git，以便再次快速工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T22:31:18.867

我把它保存在我的`.emacs`：

```
(setq vc-handled-backends ()) 
```

我确信有一种更优雅的方式来`vc-git`专门禁用，但由于我从不通过 Emacs 使用版本控制，它对我有用。

# php - pecl - gearman - 无法加载动态库？

> ID：14904072
> 
> 赞同：2
> 
> 时间：2013-02-15T22:00:57.550
> 
> 标签：php, pecl, gearman

我正在为新的 Amazon Elastic Beanstalk 集群设置默认实例，但是我在通过 pecl 安装 gearman php 客户端时遇到问题。

我运行`pecl install mongo`没有任何问题，但运行后`pecl install gearman`出现以下错误：

```
[root@ip ~]# php
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/gearman.so' - libgearman.so.8: cannot open shared object file: No such file or directory in Unknown on line 0 
```

我确实安装了gearmand，只是php客户端给我带来了麻烦。php 模块 gearman.so 也在“/usr/lib64/php/modules/”文件夹中。

任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:14:34.057

不幸的是， gearman 安装起来有点复杂。即使您不打算将当前服务器用于 gearman，您也需要下载并编译 gearman 服务器。它提供了您缺少的库。

如果您查看错误消息，它的缺失`libgearman.so.8`不是`gearman.so`

# .net - .NET 4 出现“找不到指定的过程”错误

> ID：14904080
> 
> 赞同：4
> 
> 时间：2013-02-15T22:01:34.370
> 
> 标签：.net, dllimport, dll

我正在使用 Visual Studio 2012（11.0.51106.01 Update 1）在 64 位 Windows 7 机器上进行开发。

我有一个将一些 C 代码编译成（32 位）DLL 的支持项目。在我的标题中，我有：

```
#define RET_TYPE(type) _declspec(dllexport) type __stdcall

RET_TYPE(int) test_dll_call(int invar); 
```

在我的 C 文件中，我有：

```
RET_TYPE(int) test_dll_call(int invar)
{
   int retVal = 4 * invar;

   return retVal;
} 
```

我还有一个（32 位）WPF C# 应用程序，它在类中加载 DLL，如下所示：

```
[DllImport("MyDll.dll", CharSet = CharSet.Ansi, BestFitMapping = true, ThrowOnUnmappableChar = true)]
public static extern int test_dll_call(int invar); 
```

包装如下：

```
public void Wrap_TestDllCall()
{
   try
   {
      int outTest = 0;
      int invar = 3;

      outTest = test_dll_call(invar);
   }
   catch (Exception ex)
   {
      dllError = ex.ToString();
   }
} 
```

当我在开发盒的调试器中运行它时，它工作正常。如果我将所有相关文件复制到一个单独的文件夹并从那里运行它，它工作正常。

如果我将所有必要的文件夹复制到另一台运行 32 位 Windows XP SP3 的计算机上，我会收到以下错误：

```
System.DllNotFoundException: Unable to load DLL 'MyDll.dll': The specified procedure could not be found. (Exception from HRESULT: 0x8007007F)
   at MyNamespace.MyClass.test_dll_call(Int32 invar)
   at MyNamespace.MyClass.Wrap_TestDllCall() 
```

我在编译的 exe 和 dll 上都使用了依赖 walker；它发现的唯一丢失的 dll 是`wer.dll`and `ieshims.dll`，根据我的研究，XP 不需要这些 dll。

我已经安装了 VS2012 C++ Redistributable、.NET 4 和 .NET 4.0.3 更新。仍然没有运气。

**编辑**正如汉斯指出的那样，这*似乎*是应用程序无法在 DLL 中找到该过程；我也试过：

```
[DllImport("MyDll.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern int test_dll_call(int invar); 
```

和

```
__declspec(dllexport) int __cdecl test_dll_call(int invar); 
```

这在我的开发盒上也可以正常工作，但在 WinXP 盒上也会出现同样的错误。

帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T04:21:33.917

问题解决了。在我完成故障排除步骤时需要注意的一些事项，以供将来偶然发现此问题的人使用。

1.  此错误不一定意味着它无法找到过程`X`- 而是可能意味着它无法`Y`从另一个 dll 中找到由`X`.
2.  确保在“发布”模式下编译 DLL，因为 C++ 可再发行组件不包含调试 DLL。
3.  从一个 shell 函数开始，然后一个接一个地添加。

在我上面的测试示例中，问题是我正在编译为调试版本。

但是，在我的完整功能中，该更改并没有解决问题。事实证明，我错过了一些依赖 walker 没有捕获的 DLL。

# wcf - 从测试控制台调用时如何通过 DTO 从 WCF 服务获取数据

> ID：14904091
> 
> 赞同：0
> 
> 时间：2013-02-15T22:02:25.007
> 
> 标签：wcf, wcf-data-services

我是 .net 和 WCF 的新手。我正在尝试构建一个 WCF 服务原型，该原型将从数据库表中获取数据，并根据数据使用 SMTP 交换发送电子邮件。
对于原型，我创建了一个接口和服务，并在 IIS 5.1 中托管了 WCF 服务。对于我的测试控制台，我已经引用了这个服务。现在，当我运行我的应用程序时，我从控制台收到错误消息。

这是代码的样子：

```
namespace MyWcfConsoleApp
{
class Program
{
    static void Main(string[] args)
    {
        // Create a proxy object and connect to the service
        EmailServiceClient proxy = new EmailServiceClient();

        // Test the operations in the service
        Console.WriteLine("Test1");
        //BulkEmailDTOList EmailInfo = proxy.GetBulkEmailInfo(1);

        EmailService.IEmailService EmailInfo = ServiceLocator.Resolve<IEmailService>();
        BulkEmailDTOList result = new BulkEmailDTOList();
        result = EmailInfo.GetBulkEmailInfo(1); 
```

这就是我在控制台应用程序中的 App.Config 中的内容：

```
 <configuration>
    <configSections>
    <section name="Dependency" type="WW.EnterpriseLibrary.Dependency.ServiceLocatorConfigurationSection, WW.EnterpriseLibrary"/>
  </configSections>
  <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IEmailService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
                  <security mode="TransportCredentialOnly">
                    <transport clientCredentialType="Windows" proxyCredentialType="None" realm=""/>
                    <message clientCredentialType="UserName" algorithmSuite="Default"/>
                  </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
        <endpoint address="http://localhost/WCFEmailService/BulkEmailService.svc/EmailService" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IEmailService" contract="EmailService.IEmailService" name="BasicHttpBinding_IEmailService"/>
        </client>
    </system.serviceModel>
  <startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
  <Dependency>
    <dependencies>
      <add name="IEmailService" type="C:\BulkEmailPrototype\TestWcfEmailService\TestWcfEmailServiceLibrary.WW.Common.Service.Impl.EmailService, C:\BulkEmailPrototype\TestWcfEmailService\TestWcfEmailServiceLibrary.WW.Common.Service.Impl" />
    </dependencies>
  </Dependency>
</configuration> 
```

请让我知道我做错了什么。有什么简单的方法可以调用 DTO 来检索我的数据吗？正如我所说，我对此很陌生，所以度过了艰难的时光..

这是我的实现：

```
using BulkEmailDac = WW.Common.DataAccess.Impl.BulkEmailDac;

namespace WW.Common.Service.Impl
{
public class EmailService : IEmailService
{

    private BulkEmailDac emailDac;
    ErrorMsg err_msg = new ErrorMsg();

    public EmailService()
    {
        emailDac = new BulkEmailDac();
    }

                 public BulkEmailDTOList GetBulkEmailInfo(int recordLimit)
         {

             try
             {

                 return emailDac.GetBulkEmailInfo(recordLimit);
             }
             catch (Exception ex)
             {
                 if (ex is FaultException<OperationFault>)
                 {
                     throw;
                 }
                 else
                 {

                     //LOG AND THROW AN UNKNOWN EXCEPTION
                     ApplicationLog.WriteError(DateTime.Now.ToString() + "|"
                                               + "GetBulkEmailInfo" + "|"
                                               + ex.Message + "|"
                                               + ex.StackTrace);
                     throw new FaultException<OperationFault>(new OperationFault(ex.Message, ErrorMessages.Unknown_Error_Code));
                 }
             } 
```

这是合同：

```
namespace WW.Common.Service.Contract
{
   [ServiceContract]
    public interface IEmailService
    {

     [OperationContract]
     double Add(double n1, double n2);

     [OperationContract]
     double Subtract(double n1, double n2);

     [OperationContract]
     double Multiply(double n1, double n2);

     [OperationContract]
     double Divide(double n1, double n2);

     [OperationContract]
     [FaultContractAttribute(typeof(OperationFault))]
     BulkEmailDTOList GetBulkEmailInfo(int recordLimit);

     [OperationContract]
     string Abc(string s1);

    } 
```

这是我的服务中的 Web.Config 文件：

```
 <configuration>
  <configSections>
    <section name="Dependency" type="WW.EnterpriseLibrary.Dependency.ServiceLocatorConfigurationSection, WW.EnterpriseLibrary"/>
  </configSections>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel.MessageLogging" switchValue="Warning, ActivityTracing">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelMessageLoggingListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel" switchValue="Warning,ActivityTracing"
        propagateActivity="true">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelTraceListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="c:\bulkemailprototype\testwcfemailservice\wcfemailservice\web_messages.svclog"
        type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
        name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
        <filter type="" />
      </add>
      <add initializeData="c:\bulkemailprototype\testwcfemailservice\wcfemailservice\web_tracelog.svclog"
        type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
        name="ServiceModelTraceListener" traceOutputOptions="Timestamp">
        <filter type="" />
      </add>
    </sharedListeners>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <connectionStrings>
    <add name="WWDbConnect"
         connectionString="Data Source=(labdev0320);USER ID = wwsa; Password = trex777sa;Max Pool Size=200;"
         providerName="System.Data.OracleClient" />
  </connectionStrings>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBindingWithNoSecurity" maxBufferPoolSize="524288" maxReceivedMessageSize="500000">
          <security mode="Transport">
            <transport clientCredentialType="Certificate" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client/>
    <services>
        <service name="WW.Common.Service.Impl.EmailService" behaviorConfiguration="EmailService">
          <host>
            <baseAddresses>
              <add baseAddress="http://localhost:8270/Design_Time_Addresses/TestWcfEmailServiceLibrary/EmailService/"   />
            </baseAddresses>
          </host>
          <endpoint address="EmailService" binding="basicHttpBinding" contract="WW.Common.Service.Contract.IEmailService" />
          <endpoint address="mex" binding="basicHttpBinding"
                    name="mexEndpoint" contract="IMetadataExchange" />
        </service>
      </services>
      <behaviors>
      <serviceBehaviors>
          <behavior name="EmailService">
            <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true"/>
            <serviceMetadata httpGetEnabled="true" />
            <serviceSecurityAudit auditLogLocation="Application"
               suppressAuditFailure="true"
               serviceAuthorizationAuditLevel="Success"
               messageAuthenticationAuditLevel="Success" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <diagnostics>
      <messageLogging logEntireMessage="true" logMalformedMessages="false"
        logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true"
        maxMessagesToLog="3000" />
    </diagnostics>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <Dependency>
    <dependencies>
      <add name="IEmailService" type="WW.Common.Service.Impl.EmailService, WW.Common.Service.Impl" />
    </dependencies>
  </Dependency>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:18:50.933

首先，您的端点看起来不正确。

在服务的 Web 配置中， in 的值是`relativeAddress`什么`<serviceActivations>`？这是您应该从客户端应用程序中找到的真正路径。

此外，测试 WCF 服务的一种快速而肮脏的方法是使用位于 VISUAL_STUDIO_INSTALL_PATH\Common7\IDE 中的 WCFTestClient。一旦你知道你真正的端点，你就可以从这个应用程序中测试它。

# mysql - 用于 MySQL 的 Perl DBI $dbh->column_info：未返回默认值？

> ID：14904092
> 
> 赞同：0
> 
> 时间：2013-02-15T22:02:30.297
> 
> 标签：mysql, perl, metadata, default-value, dbi

参考[CPAN DBI doc](http://search.cpan.org/~timb/DBI-1.623/DBI.pm#Catalog_Methods)，我正在阅读有关`column_info`数据库对象的方法，并且在我看来它没有返回**COLUMN_DEFAULT**。**它是information_schema.COLUMNS**中的一列。这是故意的吗？有没有办法得到它，除了查询信息模式，那就是？

# css - 将 Bootstrap 表单的提交按钮修改为自定义 css

> ID：14904096
> 
> 赞同：2
> 
> 时间：2013-02-15T22:03:07.130
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap-rails

我一直在学习并使用 Hartl 的[Rails 教程](http://ruby.railstutorial.org/chapters/following-users#sec-following_and_followers_pages)中的元素来获得自己的应用程序和学习经验。在本教程中，为了关注用户，默认选项是单击 Rails`form_for`助手旁边的 Bootstrap-Sass 按钮，如下所示：

```
<%= form_for(current_user.relationships.build(followed_id: @user.id)) do |f| %>
  <div><%= f.hidden_field :followed_id %></div>
  <%= f.submit "Follow", class: "btn btn-large btn-primary" %>
<% end %> 
```

但是，我想将输入修改为自定义按钮，并将类从 更改`btn btn-large btn-primary`为`.follow-button`.

我的CSS`follow-button`如下。正如评论中所指出的，我在修改透明度、字体大小和颜色等基本元素时遇到了麻烦（字体似乎默认为基本的 Bootstrap 字体），而其他元素（例如悬停方面）确实起作用。如何覆盖表单的一些默认引导设置，以便我的所有自定义元素都出来？谢谢！

```
.follow-button{
     background: transparent;
     border: 1px solid #e8e8e8;
     display: block;
     float: right;
      &:hover { 
      background: #0089d1;
    }
      a {
      color: #006faa;
      font-weight: 400;
      font-size: 1.4em; //font size does not change
      display: block;
      padding: 0px 4px 0px 4px; //modification doesn't show..
      text-decoration: none;
      &:hover { 
      color: rgb(229, 246, 255);
      }
    }
  } 
```

* * *

**编辑：**

使用更新的 CSS 代码：

```
.follow-button{
     background: transparent;
     border: 1px solid #e8e8e8;
     display: block;
     float: right;
      &:hover { 
      background: #0089d1;
    }
    input[type='submit'] {
      color: #006faa;
      font-weight: 400;
      font-size: 1.4em; //font size does not change
      display: block;
      padding: 0px 4px 0px 4px; //modification doesn't show..
      text-decoration: none;
      &:hover { 
      color: rgb(229, 246, 255);
      }
    }
  } 
```

Rails 提交表单：

```
<%= form_for(current_user.relationships.build(followed_id: @course.id)) do |f| %>
  <div><%= f.hidden_field :followed_id %></div>
  <%= f.submit "Follow", class: "follow-button" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:10:30.013

您正在为`.follow-button`包含链接 ( `a`) 的 a 设置样式。但`f.submit`会创建提交的输入类型。由于现在有“a”，它永远不会匹配您的样式选择器。

```
<%= f.submit "Follow", class: "follow-button" %> 
```

进而

```
.follow-button{
     background: transparent;
     border: 1px solid #e8e8e8;
     display: block;
     float: right;
      background: #0089d1;
      color: #006faa;
      font-weight: 400;
      font-size: 1.4em; //font size does not change
      display: block;
      padding: 0px 4px 0px 4px; //modification doesn't show..
      text-decoration: none;
      &:hover { 
        color: rgb(229, 246, 255);
        background: #0089d1;
      }
  } 
```

# php - iso-8859-2 编码问题

> ID：14904097
> 
> 赞同：0
> 
> 时间：2013-02-15T22:03:08.193
> 
> 标签：php, html, apache, web, xhtml

我在我的 html 中使用以下代码：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2;" />
<meta http-equiv="Content-Language" Content="hu" /> 
```

我的问题是查看页面时只有以下字母无法正确呈现：“Ő”和“Ű”。它们只是显示为“O”和“U”。

但是 á é í ó ö ú ü 工作得很好。

我不明白为什么会这样。我搜索了谷歌和网站，但没有找到解决方案。

解决方案可能在 php.ini 或 apache http.conf 文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:23:49.813

这对我来说很好：

```
<html>
    <head>
        <title>Őűá</title>
        <meta HTTP-EQUIV="Content-Type" Content="text/html; Charset=utf-8" />
        <meta HTTP-EQUIV="Content-Language" Content="hu" />
    </head>

    <body>
        őŐűŰáÁ
    </body>
</html> 
```

# angularjs - Angular JS 控制器设置用于具有渲染地图的动态生成视图

> ID：14904098
> 
> 赞同：0
> 
> 时间：2013-02-15T22:03:10.423
> 
> 标签：angularjs, leaflet

我是 Angular 新手，

我有一个名为 Playgrounds 的数据模型，它通过我的控制器作为 json 交付。现在，在每个 id 的详细视图上，我希望在视图中动态加载游乐场键值“lng”和“lat”以呈现地图。我正在努力解决如何设置控制器以在详细视图中获取特定于 id 的 lng 和 lat 值。

控制器

```
function PlaygroundDetailCtrl($scope, $routeParams, $http) {
    $http.get('playgrounds/playgrounds.json').success(function(data){
        angular.forEach(data, function(item) {
          if (item.id == $routeParams.playgroundId) 
            $scope.playground = item;
        });
    });

    angular.extend($scope, {
    center: { lat, lng },
    marker: { lat: 40.0948, lng: -3.8232 },
    zoom: 12
    });
} 
```

看法

```
 <h2>{{playground.id}}</h2>

<leaflet marker="marker" center="center" zoom="zoom"></leaflet> 
```

JSON（片段）

```
[
    {
    "id": 1,
    "lng": 12.3677,
    "lat": 51.4524 
    }
] 
```

提前致谢

# python - 正则表达式帮助将列表拆分为两个元组

> ID：14904099
> 
> 赞同：2
> 
> 时间：2013-02-15T22:03:10.687
> 
> 标签：python, regex

给定一个演员列表，他们的角色名称在括号中，用分号 (;) 或逗号 (,) 分隔：

```
Shelley Winters [Ruby]; Millicent Martin [Siddie]; Julia Foster [Gilda]; 
Jane Asher [Annie]; Shirley Ann Field [Carla]; Vivien Merchant [Lily]; 
Eleanor Bron [Woman Doctor], Denholm Elliott [Mr. Smith; abortionist]; 
Alfie Bass [Harry] 
```

我如何将其解析为 [(actor, character),...] 形式的两种类型的列表

```
--> [('Shelley Winters', 'Ruby'), ('Millicent Martin', 'Siddie'), 
     ('Denholm Elliott', 'Mr. Smith; abortionist')] 
```

我原来有：

```
actors = [item.strip().rstrip(']') for item in re.split('\[|,|;',data['actors'])]
data['actors'] = [(actors[i], actors[i + 1]) for i in range(0, len(actors), 2)] 
```

但这并不完全奏效，因为它还将括号内的项目分开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:17:21.253

您可以使用以下内容：

```
>>> re.findall(r'(\w[\w\s\.]+?)\s*\[([\w\s;\.,]+)\][,;\s$]*', s)
[('Shelley Winters', 'Ruby'),
 ('Millicent Martin', 'Siddie'),
 ('Julia Foster', 'Gilda'),
 ('Jane Asher', 'Annie'),
 ('Shirley Ann Field', 'Carla'),
 ('Vivien Merchant', 'Lily'),
 ('Eleanor Bron', 'Woman Doctor'),
 ('Denholm Elliott', 'Mr. Smith; abortionist'),
 ('Alfie Bass', 'Harry')] 
```

还可以通过以下方式简化一些事情`.*?`：

```
re.findall(r'(\w.*?)\s*\[(.*?)\][,;\s$]*', s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:17:06.623

```
inputData = inputData.replace("];", "\n")
inputData = inputData.replace("],", "\n")
inputData = inputData[:-1]
for line in inputData.split("\n"):
    actorList.append(line.partition("[")[0])
    dataList.append(line.partition("[")[2])
togetherList = zip(actorList, dataList) 
```

这有点小技巧，我相信你可以从这里清理它。我将逐步介绍这种方法，以确保您了解我在做什么。

我将 the`;`和 the都替换`,`为换行符，稍后我将使用它来将每一对拆分为自己的行。假设您的内容没有充满错误`];`或`],`' 这应该有效。但是，您会注意到最后一行`]`末尾有 a，因为它不需要逗号或分号。因此，我将它与第三行拼接起来。

然后，仅使用我们在输入字符串中创建的每一行的分区函数，我们将左侧部分分配给参与者列表，将右侧部分分配给数据列表并忽略括号（位于位置 1）。

之后，Python 非常有用的 zip 函数应该为我们完成这项工作，方法是`i`将每个列表的第 th 个元素关联到一个匹配的元组列表中。

# ruby-on-rails - Rails 应用程序中的多个同时 Oauth？

> ID：14904104
> 
> 赞同：6
> 
> 时间：2013-02-15T22:03:22.467
> 
> 标签：ruby-on-rails, oauth, devise, omniauth

我的最终目标是让用户同时拥有多个第 3 方身份验证。

现在，我正在使用 Devise 创建用户。用户可以通过电子邮件、脸书或谷歌注册，并且可以使用。但是现在，在他们已经注册之后，我还需要他们通过 youtube 或 soundcloud 进行验证。所以用户是用设计创建的，但我还需要他们用其他东西来验证。

由于 Devise 出于自己的目的占用了omniauth，因此我不能同时使用omniauth。

在我看来，我有三个选择：

*   尝试猴子补丁设计并让它允许同时对一个用户进行多个身份验证
*   在与当前设计实现相邻的一侧手动执行 oauth
*   Scrap 设计并做一些不同的事情

我将不胜感激任何建议或其他选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:17:40.047

> 尝试猴子补丁设计并让它在一次使用中同时允许多个身份验证

你不需要猴子补丁设计——你可以拥有自己的 oauth 控制器

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController

  def facebook
    # handle if already a twitter user
    # handle if a new user
    # use the `sign_in user` to sign_in the user
  end

  def twitter
    # handle if already a facebook user
    # handle if a new user
  end
end 
```

并在路线中使用它

```
devise_for :user, 
         :controllers => {
           :omniauth_callbacks => "users/omniauth_callbacks"
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:25:41.060

我认为这可能是您需要的：http: [//blog.joshsoftware.com/2010/12/16/multiple-applications-with-devise-omniauth-and-single-sign-on/](http://blog.joshsoftware.com/2010/12/16/multiple-applications-with-devise-omniauth-and-single-sign-on/)

他们也开源了他们的代码！

提供者：[https](https://github.com/joshsoftware/sso-devise-omniauth-provider) ://github.com/joshsoftware/sso-devise-omniauth-provider 客户端：[https ://github.com/joshsoftware/sso-devise-omniauth-client](https://github.com/joshsoftware/sso-devise-omniauth-client)

或者更好的是，看看这个：http: [//communityguides.heroku.com/articles/16](http://communityguides.heroku.com/articles/16)

# javascript - 从标签切换到折叠以进行响应

> ID：14904109
> 
> 赞同：6
> 
> 时间：2013-02-15T22:03:51.310
> 
> 标签：javascript, twitter-bootstrap, tabs, collapse

目标是在站点宽度小于 676 像素时从选项卡切换到手风琴式折叠。我们正在使用引导程序。

我们将分别用 css 隐藏 ul.nav-tabs 和 a.accordtion-toggle。选项卡在这里工作，但 a.accordion-toggle 不起作用。有任何想法吗？

```
<ul class="nav nav-tabs" id="myTab" data-tabs="tabs">
  <li class="active"><a href="#panel1" data-toggle="tab">Panel 1</a></li>    
  <li class="active"><a href="#panel2" data-toggle="tab">Panel 2</a></li> 
</ul>

<a class="accordion-toggle" data-toggle="collapse" data-target="#panel>Panel 1</a>
  <div class="tab-pane collapse" id="panel1">
 Panel 1 Content
  </div>
<a class="accordion-toggle" data-toggle="collapse" data-target="#pane2>Panel 2</a>
  <div class="tab-pane collapse" id="panel2">
 Panel 2 Content
  </div>

<script>
  jQuery(document).ready(function ($) {
    if (document.documentElement.clientWidth <  767) {
        $('#myTab a').click(function (e) {
          e.preventDefault();
        }

        $(".collapse").collapse();
     }              
  });
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-19T17:42:50.483

就我而言，只是将标签内容复制到隐藏的手风琴中效果很好。

这是我提取到小插件的源代码 - [Bootstrap Tab Collapse](https://github.com/okendoken/bootstrap-tabcollapse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:46:03.497

我在[这个 jsfiddle](http://jsfiddle.net/Sherbrow/FQa3G/)上尝试了一些，但**让两个插件一起工作似乎很复杂**。

最好选择其中一个插件，仅使用该插件的类和 JS，然后实现您自己的触发器以完成默认行为。

* * *

我认为折叠插件的手风琴行为需要`.accordion-group > .collapse.in`结构才能正常工作 - 如果您不使用自己的 JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:33:44.313

不确定它是否有帮助，但您可以使用 window.onresize = function() {} 并检查主容器的宽度。当它小于某个宽度时，您可以使用 js 替换内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T19:07:35.560

我最终将选项卡触发器嵌套在一个带有选项卡内容（而不是上面的列表）的 div 中，并使用 css 将它们定位为全屏视图的选项卡。不理想，但只要数据切换和数据目标到位就可以工作。

# xcode - 使用包含 UITextField 名称的变量来寻址 UITextField

> ID：14904114
> 
> 赞同：0
> 
> 时间：2013-02-15T22:04:24.913
> 
> 标签：xcode, sqlite, uitextfield

我以编程方式创建了几个`UITextFields`显示来自 SQLite 的信息。SQLite 中的名称是 P01, P02, P03, P04,... 因为我不想复制我的源代码，所以我喜欢使用变量来存储 SQLite 名称，然后将值传递给`UITextField`. 像这样的东西：

```
NSString *strName;

for (int iValue= 0; ....
  strName = NSString withFormat:@"P0%d", iValue....
  uitextfield.text = &strName 
```

结果将显示来自属性 P01 的 SQLite 值

这可能吗？如果可以，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T07:28:46.390

首先将您从 SQLite 获得的所有数据保存在 NSMutableArray 中。让我们将其命名为 nameArray。然后做这样的事情，

```
for(int i=0;i<=nameArray.count;i++)
{
UITextField *movieView=[[UITextField alloc] init ];
 movieView.frame=CGRectMake(5,  20*i, 259, 20);
[movieView setBackgroundColor:[UIColor clearColor]];
[movieView setTextAlignment:NSTextAlignmentCenter];
[movieView setText:[nameArray objectAtIndex:i]];
 [self.view addSubview:movieView];

} 
```

# c# - 是否可以在命令提示符上输出不同的颜色？C# 编程

> ID：14904117
> 
> 赞同：2
> 
> 时间：2013-02-15T22:04:32.303
> 
> 标签：c#, console-application

假设您想用 C# 编写一个程序并使用命令提示符编译它。假设简单的程序只说；

```
 Console.WriteLine("a" + "b" + "c" + "d"); 
```

是否可以在命令提示符下以不同颜色打印 a、b、c、d？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:07:20.930

是的。您必须更改颜色并打印文本，例如：

```
Console.ForegroundColor = ConsoleColor.White;
Console.WriteLine("a");
Console.ForegroundColor = ConsoleColor.Red;
Console.WriteLine("b");
.
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:10:40.497

将[`Console.ForegroundColor`](http://msdn.microsoft.com/en-us/library/system.console.foregroundcolor.aspx)属性与[`ConsoleColor`](http://msdn.microsoft.com/en-us/library/system.consolecolor.aspx)枚举一起使用。

> 获取或设置控制台的前景色。

喜欢;

```
 public static void Main(string[] args)
    {
        Console.ForegroundColor = ConsoleColor.White;
        string a = "a";
        Console.WriteLine(a);
        Console.ForegroundColor = ConsoleColor.Blue;
        string b = "b";
        Console.WriteLine(b);
        Console.ForegroundColor = ConsoleColor.DarkGreen;
        string c = "c";
        Console.WriteLine(c);
        Console.ForegroundColor = ConsoleColor.Red;
        string d = "d";
        Console.WriteLine(d);
    } 
```

输出将是；

![在此处输入图像描述](../Images/cb1e7beec524748cc6cdd8d7b137565b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:09:10.670

该类`Console`具有`ForegroundColor`您可以使用的属性：

```
Console.ForegroundColor = ConsoleColor.Blue;
Console.Write(a);
Console.ForegroundColor = ConsoleColor.Red;
Console.Write(b);
Console.ForegroundColor = ConsoleColor.Green;
Console.Write(c);
Console.ForegroundColor = ConsoleColor.White;
Console.WriteLine(d); 
```

# python - 可以描述字符串的正则表达式

> ID：14904119
> 
> 赞同：2
> 
> 时间：2013-02-15T22:04:35.673
> 
> 标签：python, regex

我有一个字母表`{A, B, C}`和这个字母表上的（大量）单词：（
`AAABBCABBCCCCAA, ABBBCCC, BBBBCACAC, ...`不同的长度，不同的组合）

我正在寻找一组可以描述这些词的正则表达式（越小越好）。我更喜欢紧凑（`(BC)+`over `BCBC`）。这不是家庭作业。

1.  有什么好方法可以做到这一点？
2.  是否有一个 Python 包已经这样做了？

我发现[这个问题](https://stackoverflow.com/questions/7626800/finding-regular-expressions-for-languages-otherwise-described)是相关的。

**更新**：当我说我更喜欢时，我可能会`(BC)+`匆忙`BCBC`。我更喜欢使用尽可能少的表达式（在最坏的情况下，每个字符串有一个正则表达式），因此对 , 或 describe 之一的偏好`A+`（`AA`例如`AA+`）`AA`应该取决于其他字符串显示的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:21:16.140

如果我正确理解您的问题，那么您有一个字母表和该字母表上的字符串列表，并且您想要构建一个与这些字符串完全匹配的模式。

您可能可以为每个字符串构造一个[确定性有限自动机，从中构造一个](http://en.wikipedia.org/wiki/Deterministic_finite_automata)[非确定性有限自动机](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)，它是所有这些[DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automata)的组合。[然后将DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automata)简化为[NFA](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)。然后只需将 NFA 转换为模式。

如果您已经有模式而不是字符串，这甚至会起作用。但是，不能保证您会得到尽可能小的图案。

我不知道有任何库可以在 Python中操作[DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automata)或[NFA 。](http://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:43:25.880

以下是处理带有这些单词的字符串的几种方法，但只有第一种需要正则表达式：

```
strings =['AAABBCABBCCCCAA', 'ABBBCCC', 'BBBBCACAC']

import re
for string in strings:
    matches = re.findall(r'([A-C]+)', string)
    if matches:
        print matches[0] 
```

输出：

```
AAABBCABBCCCCAA
ABBBCCC
BBBBCACAC 
```

或者，您可以使用类似这样的东西，具体取决于您打算对单词的正则表达式做什么：

```
from itertools import groupby
results = [(string, [''.join(g) for k, g in groupby(string)]) for string in strings]
print
for result in results:
    print '{}: {}'.format(*result) 
```

输出：

```
AAABBCABBCCCCAA: ['AAA', 'BB', 'C', 'A', 'BB', 'CCCC', 'AA']
ABBBCCC: ['A', 'BBB', 'CCC']
BBBBCACAC: ['BBBB', 'C', 'A', 'C', 'A', 'C'] 
```

# c - 警告：格式参数不是指针（参数 2）？

> ID：14904124
> 
> 赞同：-1
> 
> 时间：2013-02-15T22:05:01.697
> 
> 标签：c, pointers, char, printf

我收到错误：警告：格式参数不是指针（参数 2）

用这条线：`printf("%s \n", *(group_list->name));`

**考虑到名称**是指向字符的指针，我不明白为什么这是一个问题。使用**s**有问题吗？我必须使用不同的说明符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:06:07.840

改用这个：

```
printf("%s \n", group_list->name); 
```

`s`转换说明符期望 a`char *`不是`char`.

# javascript - Javascript数学检查

> ID：14904125
> 
> 赞同：1
> 
> 时间：2013-02-15T22:05:02.120
> 
> 标签：javascript, math

我正在尝试用javascript构建一个ROMI（营销投资回报计算器），如果有人能告诉我我做错了什么，我将不胜感激。我正在尝试从表单中获取一个值，将其传递给“leadGeneration”，然后使用下面的公式对其进行操作，然后将输出“msRomi”显示在文本框中。我想添加一个免责声明，我不是网络开发人员，我是营销分析师，所以对于任何无端错误或新手错误，我深表歉意。我环顾四周，根据来自这个站点和几个教程站点的资源，这个代码应该是有效的（它只是碰巧不是）你能告诉我我做错了什么和/或如何解决它?

```
var leadGeneration = $("leadGeneration");
var conversionTools = $("conversionTools");
var brandRecognition = $("brandRecognition");
var loyalityBuilding = $("loyalityBuilding");
var marketingSpending = $("marketingSpending");

var deltaLg = 375;
var deltaCt = 75;
var deltaBr = 93.75;
var deltaLb = 56.25;
var totalPms = 100000;

var msPercent = parseFloat(marketingSpending) / parseFloat(totalPms);

var lgromi= (((msPercent * (leadGeneration)) * parseFloat(deltaLg) * (2280) / ((parseFloat(msPercent) * (parseFloat(leadGeneration)))
var ctRomi= ((msPercent) * (conversionTools)) * parseFloat(deltaCt) * (2280) / ((parseFloat(msPercent) * (parseFloat(leadGeneration)))
var brRomi= ((msPercent) * (brandRecognition)) * parseFloat(deltaBr) * (2280) / ((parseFloat(msPercent) * (parseFloat(leadGeneration)))
var lbRomi= ((msPercent) * (loyalityBuilding)) * parseFloat(deltaLb) * (2280) / ((parseFloat(msPercent) * (parseFloat(leadGeneration)))

var msRomi= parseFloat(lgRomi) + parseFloat(ctRomi) + parseFloat(brRomi) + parseFloat(lbRomi) 
```

HTML

```
<div class="marketingSpending" style="align: center">Marketing Spending:</div>
<input type="range" name="marketingSpending" min="5000" max="100000" step="1000" style="width: 70px">
</div>

<div class="inputForm" id="calcValues" style="align: right">
<form id="romiForm">

<div class="percentName" style="align: left">Lead Generation:</div>
<form action="" class="percentSelection">
<select name="leadGeneration" id="leadGeneration">
<option value="10" selected>10%</option>
<option value="20">20%</option>
<option value="30">30%</option>
<option value="40">40%</option>
<option value="50">50%</option>
<option value="60">60%</option>
<option value="70">70%</option>
<option value="80">80%</option>
<option value="90">90%</option>
<option value="100">100%</option>
</select>
</form>

<div class="percentName" style="align: right">Conversion Tools:</div>
<form action="" class="percentSelection">
<select name="conversionTools" id="conversionTools">
<option value="10" selected>10%</option>
<option value="20">20%</option>
<option value="30">30%</option>
<option value="40">40%</option>
<option value="50">50%</option>
<option value="60">60%</option>
<option value="70">70%</option>
<option value="80">80%</option>
<option value="90">90%</option>
<option value="100">100%</option>
</select>
</form>

<div class="percentName">Brand Recognition:</div>
<form action="" class="percentSelection">
<select name="brandRecognition" id="brandRecognition">
<option value="10" selected>10%</option>
<option value="20">20%</option>
<option value="30">30%</option>
<option value="40">40%</option>
<option value="50">50%</option>
<option value="60">60%</option>
<option value="70">70%</option>
<option value="80">80%</option>
<option value="90">90%</option>
<option value="100">100%</option>
</select>
</form>

<div class="percentName">Customer Loyalty:</div>
<form action="" class="percentSelection">
<select name="customerLoyalty" id="customerLoyalty">
<option value="10" selected>10%</option>
<option value="20">20%</option>
<option value="30">30%</option>
<option value="40">40%</option>
<option value="50">50%</option>
<option value="60">60%</option>
<option value="70">70%</option>
<option value="80">80%</option>
<option value="90">90%</option>
<option value="100">100%</option>
</select>
</form>

</form>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T22:12:26.080

您的元素必须由`id`或选择`class`。如果不查看您的 HTML，我不确定它需要是哪个，但我猜想`id`：

```
var leadGeneration = $("#leadGeneration"); ... 
```

注意`#`表示元素的`id`属性。此外，@bfavaretto 的评论是正确的，我们正在创建的这些 jQuery 对象包含的内容远远超过其内容的价值，因此我们无法对它们进行常规数学运算。从这些对象中提取值的示例如下：

```
var leadGenerationVal = leadGeneration.val() 
```

或者，如果您不想对页面上的对象执行任何其他操作，我们可以在创建 jQuery 对象的同一行提取值：

```
var leadGeneration = $("#leadGeneration").val(); 
```

以上面的代码行为例，您应该能够使脚本的其余部分正常工作。

# ios - 从字典到 NSString 的 iOS 转换

> ID：14904126
> 
> 赞同：1
> 
> 时间：2013-02-15T22:05:22.683
> 
> 标签：ios, nsstring, nsdictionary

我有一个 NSMutableDictionary 保存图片中的 EXIF 元数据。一个例子：

```
const CFStringRef kCGImagePropertyExifExposureTime; 
```

我不想单独访问每个键，而是只想将整个字典内容写入标签。当我想将此数据写入控制台时，我会使用：

```
NSLog(@"EXIF Dic Properties: %@",EXIFDictionary ); 
```

这很好用，但如果我使用：

```
NSString *EXIFString = [NSString stringWithFormat:(@"EXIF Properties: %@", EXIFDictionary)]; 
```

我收到警告说结果不是字面上的字符串，如果我尝试使用该字符串来设置我的 label.text，程序会崩溃。

知道我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:07:50.233

`[NSString stringWithFormat:(@"EXIF Properties: %@", EXIFDictionary)]`正如您可能认为的那样，它不是具有两个参数的方法。这是一种只有一个参数的方法。那个参数是`(@"EXIF Properties: %@", EXIFDictionary)`，它使用[逗号运算符](https://en.wikipedia.org/wiki/Comma_operator)并最终返回`EXIFDictionary`。所以本质上你有

```
[NSString stringWithFormat:EXIFDictionary] 
```

这显然是错误的。这也是您收到警告的原因。该警告告诉您格式参数不是字符串文字，因为使用变量作为格式字符串是常见的错误来源。但更重要的是，这个参数根本就不是一个字符串，所以它崩溃了。

删除括号，一切都会好起来的。看起来像

```
[NSString stringWithFormat:@"EXIF Properties: %@", EXIFDictionary]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T22:08:55.713

> 我收到警告说结果不是字面上的字符串

不。您会收到一条警告，指出格式字符串 of`stringWithFormat:`不是字符串*文字。*那是因为您不知道逗号运算符（和可变参数函数）是如何工作的（这就是为什么在尝试制作 iOS 应用程序之前应该掌握 C 语言的原因）。基本上你在这里有什么：

```
[NSString stringWithFormat:(@"EXIF Properties: %@", EXIFDictionary)] 
```

是，由于逗号运算符的行为，相当于

```
[NSString stringWithFormat:EXIFDictionary] 
```

这显然是错误的。省略括号，就可以了：

```
[NSString stringWithFormat:@"EXIF Properties: %@", EXIFDictionary] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T22:07:59.147

你不想要那些括号：

```
NSString *EXIFString = [NSString stringWithFormat:@"EXIF Properties: %@", EXIFDictionary]; 
```

# ruby - 在 Web 应用程序中测试链接

> ID：14904131
> 
> 赞同：1
> 
> 时间：2013-02-15T22:05:33.657
> 
> 标签：ruby, automated-tests, hyperlink

我需要测试 Web 应用程序中的链接。我查看了几个工具（Xenu、各种浏览器插件、链接检查器（ruby））。没有什么能完全满足我的需求，我将在下面详细说明。

*   我需要通过登录表单
*   需要为不同类型的用户重新运行测试（多组登录凭据）
*   想在 ci 服务器 (Jenkins) 下自动执行此操作
*   蜘蛛网站的能力

有没有人有任何想法？如果我可以使用 Ruby 来做到这一点，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:08:18.347

一旦你投入了蜘蛛网站的能力，你所要求的就超出了大多数测试工具。

最后的要求将您推向了手工编码的领域。使用 Mechanize gem，您可以做所有这些事情，但是，您需要编写大量网站导航的代码。

Mechanize 在内部使用 Nokogiri，因此很容易抓取页面中的所有链接，您可以将其存储在数据库中以由不同的线程或一些后续代码检查。也就是说，如果您是所访问页面的所有者，那么编写蜘蛛程序并不难，因为您可以非常残酷地访问服务器并让代码全速运行，而不必担心因过度使用带宽而被禁止.

# vim - Vim 上下文高亮

> ID：14904133
> 
> 赞同：24
> 
> 时间：2013-02-15T22:05:40.863
> 
> 标签：vim, ide, editor, syntax-highlighting, highlighting

我认为标准突出显示是有用的——在某种程度上。在使用回调和嵌套结构进行编程时，这无济于事。关键字和字符串，它们无处不在，当它们以不同的颜色显示时会有所帮助，但这些颜色并不能说明我在哪个范围内，从词汇的角度来看我在哪里。

我在 Douglas Crockford 的一次谈话中听说过*上下文突出显示*，我不记得它的网址了。这个想法是，突出范围的词汇级别。顶层定义用*color0*着色，内部层块语句用*color1*着色，并且每次引入新的范围级别时都会递归重复。下面是一个例子，使用了一些虚构的节点库。*（现在添加了一个（ish（或 scheme lisp））示例）*

![例子。](../Images/abc3b8c43cb179fe74af736203dc2d32.png) ![伪方案多括号示例](../Images/a6feda58b84ac3e7dd427f9a1f89a32c.png)

这不一定适用于节点或 javascript。我想知道是否有实现这种功能的编辑器/vim 插件。我不知道*上下文突出显示*是否是这个词，但我不能只找到一个。谷歌搜索上下文突出显示了基于通用标记的突出显示和 ConTeXt（我对此一无所知）的结果。

这存在吗？有编辑器实现这个吗？更重要的是，我可以在 vim 中使用它吗？

*另一个与我相同的问题，没有真正的答案：[Crockford 风格的上下文着色是否在任何代码编辑器中实现？](https://stackoverflow.com/questions/13882241/is-crockford-style-context-coloring-implemented-in-any-code-editor)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-23T01:39:07.627

我也找不到类似的东西，所以我写了一个：

[rainbow_levels.vim](https://github.com/thiagoalessio/rainbow_levels.vim)：一种不同的代码高亮方法。

当然这是一个非常简单的实现，只考虑缩进级别而不是实际上下文，但它完成了工作；D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:12:02.247

不完全符合您的要求，但代码折叠是一项强大的功能，可让您专注于代码的特定级别。Vim 支持折叠[http://vim.wikia.com/wiki/Folding](http://vim.wikia.com/wiki/Folding)

缩进指南也非常方便，用于专注于代码的特定部分。崇高的文本编辑器有这个（[http://sublimetext.userecho.com/topic/98136-indent-guide-highlighting-changed/](http://sublimetext.userecho.com/topic/98136-indent-guide-highlighting-changed/)）

我看到这个 vim 插件（[https://github.com/nathanaelkane/vim-indent-guides](https://github.com/nathanaelkane/vim-indent-guides)）似乎做同样的事情。

你可以创建一个语法高亮，使用这个插件的缩进逻辑来改变配色方案。您所描述的内容更多地涉及它不仅需要在缩进之外工作，还需要像语言解析器一样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T11:31:21.613

现在在 VIM 中有一个名为[vim-js-context-coloring](https://github.com/bigfish/vim-js-context-coloring)的插件。我只是玩了一点，还没有给人留下深刻的印象，但它看起来很有希望！

注意：需要在安装插件的目录下安装`npm`然后运行。`npm install`很遗憾，安装时忘记阅读说明。

# compare - 比较多个文件的通用代码

> ID：14904134
> 
> 赞同：4
> 
> 时间：2013-02-15T22:05:40.507
> 
> 标签：compare, diff, codebase

我有两个项目，每个项目都有一个庞大的代码库。我想运行一个工具来检查每个项目中的所有文件，并向我展示项目中哪些文件具有相似的代码。我什至不确定是否存在这样的东西，但我记得在学校里，老师们有一个工具可以在多个学生的所有代码上运行，以确定他们的代码有多相似（以抓住作弊者）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:11:46.260

你想要的是一个[克隆检测工具](http://en.wikipedia.org/wiki/Duplicate_code)。这些工具可以找到在任何文件集中重复的代码。对于您的任务，您将获取两个项目的文件，并在该集合中进行克隆检测。

[根据实际经验编辑 2019 年，正是做 OP 想做的事情]。

如果在一个项目的文件中找到一个克隆，它对应于在另一个项目的文件中找到的克隆，那么您已经找到了它们的共同点。

对来自两个项目的所有文件进行直接克隆检测的一个缺陷是，您会发现从一个项目到同一个项目的大量克隆。根据您的问题，这些并不有趣，例如误报。

我公司提供名为[CloneDR](http://www.semdesigns.com/Products/Clone/)的商业克隆检测器。它（恕我直言）是一个非常好的检测器，可以找到其他检测器无法找到的克隆（例如，它不会被注释更改、代码布局、数字基数、变量重命名甚至插入或删除代码片段所迷惑）。但它还有另一个非常好的特性：它可以选择仅检测跨两个项目代码库的克隆。通过将这两个项目视为一个项目，您不会得到误报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:31:40.590

许多编辑器都有并排比较工具。这些是喜欢的 WinMerge 嵌入式版本。记事本++ 和SublimeText2 浮现在脑海中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:07:39.963

你在[想像 WinMerge](http://winmerge.org/)这样的东西吗？这可以比较整个目录树的文件价值。

# c# - 使用 C# .NET 4.0 修剪简单的文本日志文件

> ID：14904137
> 
> 赞同：0
> 
> 时间：2013-02-15T22:05:52.683
> 
> 标签：c#, .net, file-io, .net-4.0

我使用的一个外部 Windows 服务维护一个基于文本的日志文件，它会不断地附加到该日志文件中。此日志文件会随着时间的推移无限增长。我想定期修剪此日志文件以维护，例如最近的 5mb 日志条目。如何有效地在 C# .NET 4.0 中实现文件 I/O 代码以将文件修剪为 5mb？

更新：设置服务依赖项的方式，我的服务总是在外部服务之前启动。这意味着如果需要，我可以独占访问日志文件以截断它。一旦外部服务启动，我将不会访问日志文件。我可以在桌面启动时获得对文件的独占访问权限。问题是 - 日志文件的大小可能有几 GB，我正在寻找一种有效的方法来截断它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:50:45.253

它将占用您要存储的内存量来处理“新”日志文件，但如果您只想要 5Mb，那么它应该没问题。如果您在谈论 Gb+，那么您可能还有其他问题；但是，它仍然可以使用临时文件和一些锁定来完成。

如前所述，您可能会遇到竞争条件，但如果这是写入此文件的唯一线程，则情况并非如此。这将替换您当前对文件的写入。

```
const int MAX_FILE_SIZE_IN_BYTES = 5 * 1024 * 1024; //5Mb;
const string LOG_FILE_PATH = @"ThisFolder\log.txt";
string newLogMessage = "Hey this happened";

#region Use one or the other, I mean you could use both below if you really want to.
//Use this one to save an extra character
if (!newLogMessage.StartsWith(Environment.NewLine))
    newLogMessage = Environment.NewLine + newLogMessage;

//Use this one to imitate a write line
if (!newLogMessage.EndsWith(Environment.NewLine))
    newLogMessage = newLogMessage + Environment.NewLine; 
#endregion

int newMessageSize = newLogMessage.Length*sizeof (char);
byte[] logMessage = new byte[MAX_FILE_SIZE_IN_BYTES];
//Append new log to end of "file"
System.Buffer.BlockCopy(newLogMessage.ToCharArray(), 0, logMessage, MAX_FILE_SIZE_IN_BYTES - newMessageSize, logMessage.Length);

FileStream logFile = File.Open(LOG_FILE_PATH, FileMode.Open, FileAccess.ReadWrite);

int sizeOfRetainedLog = (int)Math.Min(MAX_FILE_SIZE_IN_BYTES - newMessageSize, logFile.Length);
//Set start position/offset of the file
logFile.Position = logFile.Length - sizeOfRetainedLog;
//Read remaining portion of file to beginning of buffer
logFile.Read(logMessage, logMessage.Length, sizeOfRetainedLog);

//Clear the file
logFile.SetLength(0); 
logFile.Flush();

//Write the file
logFile.Write(logMessage, 0, logMessage.Length); 
```

我写得很快，如果我在某处落后 1 点，我深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:19:43.773

取决于它被写入的频率，我会说您可能面临修改文件而不损坏日志的竞争条件。您总是可以尝试编写一个服务来监视文件大小，一旦达到某个点锁定文件，欺骗并清除整个内容并关闭它。然后将数据存储在服务轻松控制大小的另一个文件中。或者，您可以查看外部服务是否有记录到数据库的选项，这将使推出最旧的数据变得非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:25:09.783

您可以使用文件观察器来监视文件：

```
FileSystemWatcher logWatcher = new FileSystemWatcher();
        logWatcher.Path = @"c:\example.log"
        logWatcher.Changed += logWatcher_Changed; 
```

然后，当引发事件时，您可以使用 StreamReader 读取文件

```
private void logWatcher_Changed(object sender, FileSystemEventArgs e)
    {
     using (StreamReader readFile = new StreamReader(path))
        {
            string line;
            string[] row;
            while ((line = readFile.ReadLine()) != null)
            {
               // Here you delete the lines you want or move it to another file, so that your log keeps small. Then save the file. 
            }
        }
    } 
```

这是一个选择。

# jquery - CKEditor 不断给出未定义的错误

> ID：14904138
> 
> 赞同：1
> 
> 时间：2013-02-15T22:05:55.250
> 
> 标签：jquery, ckeditor

我创建了一个我想在其上启动 CKEditor 的文本区域。我还有一个简单的按钮，当用户单击时，来自 CKEditor 的数据将存储在一个变量中。

问题是我不断收到未定义的错误：

```
TypeError: CKEDITOR.instances.Textarea is undefined
[Break On This Error]   
var data = CKEDITOR.instances.Textarea.getData(); 
```

在过去的 3 个小时里，这一直让我发疯，任何帮助将不胜感激。

提前致谢

**HTML**

```
<div id='texteditor-container'>
<textarea id='texteditor-textarea' name='Textarea'></textarea>
</div>

//save button
<a class='texteditor-save-button' href='#'>Save</a> 
```

**查询**

```
//enables ckeditor on text area */
CKEDITOR.replace('Textarea'); 

// clicking save will send  data to database 
jQuery('.texteditor-save-button').click(function() {

//saves the content of the  editor 

var data = CKEDITOR.instances.Textarea.getData();
alert(data);    

return false;   

}); //end click 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:11:27.803

也许使用 textarea 字段的 id 而不是名称（'texteditor-textarea' 而不是'Textarea'？

# angularjs - 等待加载 angularjs 指令模板

> ID：14904139
> 
> 赞同：2
> 
> 时间：2013-02-15T22:05:56.050
> 
> 标签：angularjs

我想要做的是推迟加载指令的角度 js 模板，直到我真的需要它。我什至可能根本不需要它。有没有一种方法可以仅在需要时才加载指令的模板。服务会是做到这一点的方法吗？我的应用程序已经加载了很多指令模板，除非我需要，否则我想避免加载太多东西。手头的确切问题是为登录表单加载模板。如果用户点击一个按钮并且他/她没有登录我想slideOpen（使用jQuery）一个登录表单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T18:37:13.557

在绝大多数情况下，动态加载静态指令模板没有任何价值。它们是如此之小，以至于这样做没有意义。但是，这是可能的。但是，大多数情况下，此策略用于动态模板。

它需要`$http`获取模板并将`$compile`其连接到 AngularJS。

```
app.directive('testDirective', function($http,$compile) {
  return {
    scope: { show: '&' },
    link: function( scope, element, attrs ) {
      var tpl,
          url = 'testDirective.tpl.html';

      scope.$watch( 'show()', function (show) {
        if ( show ) {
          showTheDirective();
        }
      });

      function showTheDirective () {
        if ( !tpl ) {
          $http.get( url ).then( function ( response ) {
            tpl = $compile( response.data )( scope );
            element.append(tpl);
          });
        }
      }
    }
  };
}); 
```

这是一个证明它有效的[Plunker 。](http://plnkr.co/edit/IWHGqsSAI8ZLKlVfu12o?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-24T06:59:42.823

你为什么不尝试并`ng-if`执行指令。

```
<your-directive ng-if='userLoggedIn'></your-directive> 
```

在你的控制器中

```
app.controller('yourCtrl', function($scope, service){
    $scope.dataHasLoaded = false;

    service.yourUserLoginFuntion(params).then(function (data) {
         //your login api
         $scope.userLoggedIn = true
    });
}); 
```

`userLoggedIn` 仅当您需要加载指令时，范围变量才为真。

# linux - 导出另一个文件中定义的变量

> ID：14904142
> 
> 赞同：15
> 
> 时间：2013-02-15T22:06:00.887
> 
> 标签：linux, bash, shell

我有一个脚本，其中包含几个需要设置为环境变量的变量

变量列表不断变化，我无法修改它。知道我会怎么做吗？

示例文件 foo.sh

```
FOO="FOOFOO"
BAR="BARBAR" 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-16T02:09:33.860

变量和环境变量是有区别的。如果您执行`. foo.sh`并`foo.sh`包含该行`FOO=value`，则该变量`FOO`将在当前进程中分配。它不是环境变量。要成为环境变量（因此可用于子 shell），它必须被导出。但是，shell 提供了一个选项，它使所有变量赋值都将变量提升为环境变量，所以如果你只是这样做：

```
set -a
. foo.sh
set +a 
```

那么 foo.sh 中的所有变量分配都将成为当前进程中的环境变量。请注意，这并非完全正确：在 bash 中，导出变量使其成为当前 shell 中的环境变量，但在其他 shell（例如破折号）中，导出变量不会使其成为当前 shell 中的环境变量。（但是，它确实会导致在子shell 的环境中对其进行设置。）但是，在shell 的上下文中，变量是否是当前进程中的环境变量并不重要。如果它被导出（并因此设置在任何子流程的环境中），则不在环境中的变量在功能上等同于环境变量。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-15T22:09:29.133

您在寻找“。” 命令（在 中也拼写为“源” `bash`）：

```
source foo.sh 
```

由于您还需要将它们导出到环境中，因此您可能需要做一些额外的工作：

```
while read -r line; do
    export "$line"
done < foo.sh 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-23T12:05:23.330

如果您只想导出具有公共前缀的变量，例如：

```
BAZ_FOO="FOOFOO"
BAZ_BAR="BARBAR" 
```

你可以简单地这样做：

```
. foo.sh
variable_list=()
variable_list=( $(set -o posix ; set  |\
                  grep "BAZ_"         |\
                  cut -d= -f1) )
for variable in "${variable_list[@]}"
do
  export "$variable"
done 
```

# php - 为什么使用签名和使用私钥加密的结果不同

> ID：14904146
> 
> 赞同：2
> 
> 时间：2013-02-15T22:06:02.807
> 
> 标签：php, encryption, signature

我正在使用 openssl 进行编码，我想知道为什么 openssl_sign 函数给出的结果与`openssl_private_encrypt`逻辑意义上的不同。

特别是 openssl_sign：

```
$fp = fopen("i.pem", "r");  //i.pem is the private key file
$priv_key = fread($fp, 8192);
fclose($fp);
$pkeyid = openssl_get_privatekey($priv_key);

$data="f2e140eb-2b09-44ab-8504-87b25d81914c";
openssl_sign($data, $signature, $pkeyid);
$reto22 = base64_encode($signature);    //this gives UNmlEfwISea9hoGfiwdM....... 
```

特别是 openssl_private_encrypt：

```
$llave_priv = file_get_contents("i.pem");  //i.pem is the private key file
$plaintext = "f2e140eb-2b09-44ab-8504-87b25d81914c";
openssl_private_encrypt($plaintext, $encrypted, $llave_priv);
$reto = base64_encode($encrypted);  //this gives ugSMAsCQlIKIlQ17exIvSEqkA60....... 
```

为什么不`reto22`一样`$reto`？他们应该是一样的，不是吗？`priv key = sign`据我所知，用 加密

感谢您澄清马里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:04:55.367

一般来说，公钥系统中的加密是用公钥进行的（这样私钥可以用来解密它），而签名是用私钥完成的（这样可以用公钥来验证它）

使用 openssl 的签名涉及加密消息的散列。因此，即使使用相同的密钥，输出也会有所不同，因为虽然`openssl_private_encrypt`确实像在签名方案中那样使用私钥加密，但它不会散列消息，或者（可能，不确定）执行相同的填充签名方案将执行。

坚持使用`openssl_sign`，因为与滚动您自己的签名方案相比，它会更有效且更不容易受到潜在的侧信道攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T21:01:07.020

看到这个答案：

[https://stackoverflow.com/a/2706636/1359088](https://stackoverflow.com/a/2706636/1359088)

这很有帮助，因为它解释了`openssl_sign`在返回签名之前在内部对数据执行散列，而`openssl_private_encrypt`需要您自己执行散列。我从概念上理解你为什么`openssl_sign`要这样做（因为加密通常是用公钥完成的，而签名是用私钥完成的），但我快疯了，因为 SSCrypto 有一个名为的方法返回与而不是`sign`相同的数据，并且上面的答案帮助我解决了这个问题。我正在一个 iPhone 应用程序中签署一条消息，该应用程序将由 PHP 验证；我用于签名和验证，但我正在测试，因为我需要数据与工作相同。`openssl_private_encrypt``openssl_sign``SSCrypto``openssl_verify``openssl_sign`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-15T22:11:32.413

你可以用面粉做面包，也可以用面粉做面糊。然而，面包不是面粉糊，面粉糊也不是面包。

同样，加密不是签名，签名也不是加密。

# mysql - 电话号码转换和比较

> ID：14904152
> 
> 赞同：0
> 
> 时间：2013-02-15T22:06:29.803
> 
> 标签：mysql, .net, vb.net, datagridview

我有两列要比较：第一列是以 (555) 555-5555 的格式出现的住宅号码，第二列是以 5555555555.00 的格式出现的。我想比较第三列中每个数字的前 6 位，如果前 6 位匹配，则显示 TRUE，如果不匹配，则显示 false。我已经完成了查询，但是将列转换为相同的格式让我很生气。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:12:11.383

在 MySql 中，一个快速的解决方案是这样的：

```
SELECT
  col1,
  col2,
  CASE WHEN
    LEFT(
      REPLACE(REPLACE(REPLACE(REPLACE(col1, '(', ''), ')', ''), '-', ''), ' ', ''),
      6) = LEFT(col2,6)
    THEN 'True'
    ELSE 'False'
  END Matches
FROM yourtable 
```

请看这个[小提琴](http://sqlfiddle.com/#!2/37080/5)。

# javascript - 将 createElement 用于 iframe 时无法设置 allowTransparency

> ID：14904153
> 
> 赞同：0
> 
> 时间：2013-02-15T22:06:31.067
> 
> 标签：javascript, iframe, createelement

我正在`document.createElement`插入一个 iframe，但我无法设置`allowTransparency`. 这是我正在使用的代码：

```
var iframe = document.createElement('iframe');
iframe.className = 'example';
iframe.allowTransparency = 'true';
iframe.frameBorder = '0';
iframe.scrolling = 'no';
iframe.style.width = '260px';
iframe.style.height = '120px';
iframe.style.border = 'none';
iframe.src = '//example.com/page';
document.body.appendChild(iframe); 
```

但根据 Web Inspector 的说法，输出只是：

```
<iframe class="example" frameborder="0" scrolling="no" style="width: 260px; height: 120px; border: none; " src="//example.com/page"></iframe> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:11:57.367

试试这个：

```
iframe.setAttribute('allowtransparency', 'true'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T22:11:12.483

你用 jQuery 试过这个吗？它会很简单

```
$(".example").attr("allowTransparency", "true"); 
```

您的 Javascript 示例似乎是正确的。

# r - 单个数字上的核密度图

> ID：14904156
> 
> 赞同：2
> 
> 时间：2013-02-15T22:06:35.973
> 
> 标签：r

我一直在尝试使用 R 绘制简单的密度图：

```
plot(density(Data$X1),col="red")
plot(density(Data$X2),col="green") 
```

由于我想比较，我想将两者都绘制在一个图中。但是“matplot”不起作用！！我还尝试使用 ggplot2 作为：

```
library(ggplot2)
qplot(Data$X1, geom="density")
qplot(Data$X2, add = TRUE, geom="density") 
```

同样在这种情况下，图单独出现（尽管我写了 add=TRUE）！！请问有人能想出一个简单的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:18:31.610

你可以试试：

`plot(density(Data$X1),col="red")`

`points(density(Data$X2),col="green")`

我必须补充一点，理想情况下应该将`xlim`and`ylim`值设置为包括 X1 和 X2 的范围，可以按如下方式完成：

`foo <- density(Data$X1)`

`bar <- density(Data$X2)`

`plot(foo,col="red", xlim=c(min(foo$x,bar$x),max(foo$x,bar$x)) ylim=c(min(foo$y,bar$y),max(foo$y,bar$y))`

`points(bar,col="green")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T22:46:49.853

`ggplot2`或者`lattice`您需要重塑数据以支持它们。

例如 ：

```
 dat <- data.frame(X1= rnorm(100),X2=rbeta(100,1,1))
    library(reshape2)
    dat.m <- melt(dat) 
```

使用“格子”

```
 densityplot(~value , groups = variable, data=dat.m,auto.key = T) 
```

![在此处输入图像描述](../Images/a2ea81f1e28a446cd97efdcfa7921651.png)

使用“ggplot2”

```
 ggplot(data=dat.m)+geom_density(aes(x=value, color=variable)) 
```

![在此处输入图像描述](../Images/256b0aaf49f7542f72e3b3801306ca5d.png) **编辑**添加 X1+X2

使用 lattice 和扩展的 formua 接口，非常容易做到这一点：

```
densityplot(~X1+X2+I(X1+X2) , data=dat)   ## no need to reshape data!! 
```

![在此处输入图像描述](../Images/87fada80528033953ee1593db5d0d2ec.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:16:32.843

在基本图形中，如果您保持范围相同并`par(new=TRUE)`在它们之间使用，您可以覆盖密度图。我认为这`add=TRUE`是一种基本图形策略，某些功能但并非全部都会兑现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T23:28:34.483

如果您在调用中指定`n`、`from`和并确保它们在两个调用之间匹配，那么您应该能够使用一步绘制两者（您需要将 2 组 y 值绑定到单个矩阵中） .`to``density``matplot`

# android - Phonegap 项目到 Eclipse

> ID：14904162
> 
> 赞同：0
> 
> 时间：2013-02-15T22:07:11.097
> 
> 标签：android, eclipse, phonegap-build

我真的可以在这里使用一些帮助..我正在使用Phonegap构建来构建我的（android）应用程序，其中包含几乎一些JS、HTML5和CSS..我完成了这个项目并通过扫描二维码并将其放在我的身上来测试它安卓。无论如何一切都很好，我准备上传到安卓市场。尝试上传 apk 后，我收到一条错误消息，说应用程序已在调试模式下声明（即使我从未在 phonegap 中启用调试），经过更多研究后，我发现我需要在 Eclipse 中运行它并且它需要签名。所以我阅读了关于签名的 android 文档，但我不知道如何克服这个困难。

我就像一只迷路的小狗，因为我不知道 eclipse 并且应用程序已经完成。所以我尝试将我已经完成的文件导入到 Eclipse 中，我认为我应该如何导入它，我收到错误消息 AndroidManifest.xml 找不到。我不知道接下来需要采取的步骤，我猜我只需要将这只小狗导入 Eclipse 以便我签名，然后我假设我将能够上传到市场？

有什么建议可以让我知道我在项目中的位置以及我需要做些什么来实现这个目标？我是一个完全的菜鸟，感觉很失落。

**[编辑]**可能值得注意的是，我使用 Phonegap build 构建了它，虽然我没有 AndroidManifest.xml，但我确实有 config.xml，我真正需要知道的是如何应用我的签名密钥，我想保留谷歌市场将其视为处于“调试”模式。

谢谢阅读

# javascript - javascript中的Xpath评估相对于某些元素不起作用

> ID：14904164
> 
> 赞同：0
> 
> 时间：2013-02-15T22:07:16.440
> 
> 标签：javascript, dom, xpath, selenium

下面的代码将到达“之前”和“之间”警报，但不会到达“之后”警报。

```
alert("before")

var test = document.evaluate('.//*',document,document.createNSResolver(document),XPathResult.ANY_TYPE,null)
alert(element.tagName)//alerts "TABLE" 
alert("between")
test = document.evaluate('.//*',element,document.createNSResolver(document),XPathResult.ANY_TYPE,null)
alert("after") 
```

这是作为 selenium 扩展的一部分编写的。并且在代码中给出了与在 firebug 中运行时`alert(document)`不同的结果。`alert(document)`[对象 XULDocument] 与 [对象 HTMLDocument]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:39:10.880

您的第二个测试有一个未定义的变量`element`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:57:36.453

解决了。

`document`不引用 selenium 扩展中的 HTML 文档。但是，每个元素都有对拥有它的文档的引用。在这种情况下

```
test = document.evaluate('.//*',element,document.createNSResolver(document),
XPathResult.ANY_TYPE,null) 
```

变成

```
test = element.ownerDocument.evaluate('.//*',element,
element.ownerDocument.createNSResolver(element.ownerDocument),
XPathResult.ANY_TYPE,null) 
```

等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T14:44:50.483

没有解析器的 Zackkenyon 答案的变体似乎可以工作。

```
var rangee = table.ownerDocument.evaluate("./tbody/tr", table, null,
XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue; 
```

# c# - Linq Any() 与 foreach

> ID：14904165
> 
> 赞同：3
> 
> 时间：2013-02-15T22:07:18.437
> 
> 标签：c#

只是想知道哪种方法使用起来更快更好，或者您更喜欢哪种方法

```
bool userHavePermission = user.Permissions.Any(x => x.UpperName == "ADMINISTRATOR"); 
```

或者

```
foreach (Permission p in _Permissions)
{
    if (p.UpperName == name.ToUpper())
       return true;
}
return false; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T22:10:35.253

它几乎是相同的代码，唯一的区别是，如果变量是因为您将在空实例上调用该方法，那么您将`NullReferenceException`在运行时获得第二个代码片段。第一个看起来更短，更安全，更易读，这是我会使用的。并确保不会有任何 NRE：`name``null``.ToUpper()`

```
return user
    .Permissions
    .Any(x => string.Equals(x.UpperName, name, StringComparison.OrdinalIgnoreCase)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:13:57.717

使用 Any 是更好的方法，因为它是一条线。它更容易阅读并且占用更少的空间。

此外，尚不清楚 Permissions 对象是什么，但如果它是表示数据库表的某种实体，那么 Any 肯定会更好，因为您只返回查询的结果，foreach 将在迭代开始之前解决整个 Permissions 列表.

# java - 在 Java 构造函数中导入文本文件

> ID：14904169
> 
> 赞同：0
> 
> 时间：2013-02-15T22:07:22.773
> 
> 标签：java

我不确定问题是从哪里产生的。我有两个类，一个称为 testFriends 类，另一个称为 GUIapp 类。在每个类中，我的目标是导入文件以供使用。在 testFriends 类中，我在 main 方法中导入文件，它解析它并且一切正常。在我的 GUIapp 类中，我尝试做同样的事情，但是在构造函数方法中导入它，它告诉我文件不存在。这两个文件类都位于同一个 src 文件夹中，我正在使用：

```
BufferedReader in = new BufferedReader(new FileReader(inputFile)); 
```

其中 inputFile 只是一个字符串“friends.txt”。

这是两个类：

```
//This class works

public class temp {

public static void main(String[] args) throws ParseException {
    try {
        System.out.println("hey");
        BufferedReader in = new BufferedReader(new FileReader("friends.txt"));  //create string buffer for reading
        String line = in.readLine(); //reading first line
        System.out.println(line);
    } catch (IOException e) {
        System.out.println("Fail Import.");
    }

}

}

//////////The one below doesn't...

public class GUIapp extends JApplet{
//** PANEL **//
private JPanel outerPanel;

//** Button **//
private JButton button1;

/*
 * Constructor for Getting all the friends set up
 */
public GUIapp() throws ParseException, FileNotFoundException{
    BufferedReader in = new BufferedReader(new FileReader("friends.txt"));//Error Line

}

/*
 * Create Stuff
 */
public void createStuff() {
    outerPanel = new JPanel(); //create outer panel
    button1 = new JButton("Click Me");
    outerPanel.add(button1,BorderLayout.SOUTH);
}

/*
 * Initialize Stuff
 */
public void init(){
    createStuff(); //initialize create stuff
    this.add (outerPanel); 
}

} 
```

任何想法为什么当两者都在同一个目录中工作时，一个可以读取而另一个不能？

谢谢，

编辑：下面是我运行 GUIapp 类时抛出的异常：

```
java.io.FileNotFoundException: friends.txt (No such file or directory)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:120)
at java.io.FileInputStream.<init>(FileInputStream.java:79)
at java.io.FileReader.<init>(FileReader.java:41)
at GUIapp.<init>(GUIapp.java:50)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at java.lang.Class.newInstance0(Class.java:355)
at java.lang.Class.newInstance(Class.java:308)
at sun.applet.AppletPanel.createApplet(AppletPanel.java:807)
at sun.applet.AppletPanel.runLoader(AppletPanel.java:714)
at sun.applet.AppletPanel.run(AppletPanel.java:368)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:13:11.600

在运行时，您的小程序没有您要查找的文件。确保文件在运行时存在。

请将此方法添加到您的代码中，以便您可以获取文件

```
public void readFile(String fileToRead){
  String line;
  URL url = null;
  try{
  url = new URL(getCodeBase(), fileToRead);
  }
  catch(MalformedURLException e){}

  try{
  InputStream in = url.openStream();
  BufferedReader bf = new BufferedReader(new InputStreamReader(in));

  // your business logic here
  }
  catch(IOException e){
  e.printStackTrace();
  }
 } 
```

/* * 设置所有朋友的构造函数 */

```
public GUIapp() throws ParseException, FileNotFoundException{
    readFile("friends.txt")
} 
```

有关更多详细信息，请查看 Javase 中的此图像 ![在此处输入图像描述](../Images/4e62549101e9aa3d40f744d69ae10518.png)

要创建使用 imgDir 下的 a.gif 图像文件的 Image 对象，小程序可以使用以下代码：

```
Image image = getImage(getCodeBase(), "imgDir/a.gif"); 
```

# c# - 是否可以使用 WinForms 中的设计器访问来自不同项目的资源？

> ID：14904170
> 
> 赞同：20
> 
> 时间：2013-02-15T22:07:31.273
> 
> 标签：c#, winforms, resources

我有一个相当大的解决方案，其中包含许多项目。理想情况下，我想创建一个 Resources 项目，其中包含我在整个应用程序中需要的所有嵌入式图标。

我读过人们通过代码引用它们的文章，但是是否可以在设计器中访问该项目的资源？换句话说，我想在设计器中单击表单的 BackgroundImage 属性时选择资源。

如果不是，在尝试将资源与主项目分离时，我应该考虑哪种架构？每次我修改一两行代码时发布一个 100mb 的可执行文件可能不是一个聪明的主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-20T10:47:51.233

我找到了一种在许多项目之间共享资源文件并保持 VS Designer 兼容性（适用于 VS 2012）的工作方式，这并不复杂：

1.  在源项目中创建一个新的资源文件（在我的示例*SharedResources.resx*中命名）

2.  在 Designer 中打开*SharedResources.resx*并更改`Access Modifier`为`Public` ![](../Images/ecb0b64b8e22fcd028762669a7b2023f.png)

3.  使用记事本打开`.csproj`您的新项目文件并将以下代码添加到`<ItemGroup>`其中包含`<compile Include="MyForm.cs">`：（将包括 *.resx 和 *.Designer.cs 作为链接，无需编译且具有特殊命名空间）

    ```
    <EmbeddedResource Include="MY_SOURCE_PROJECT_FOLDER\Properties\SharedResources.resx">
      <Generator>PublicResXFileCodeGenerator</Generator>
      <Link>SharedResources.resx</Link>
      <LastGenOutput>SharedResources.Designer.cs</LastGenOutput>
      <SubType>Designer</SubType>
      <CustomToolNamespace>MY_SOURCE_PROJECT_NAMESPACE.Properties</CustomToolNamespace>
    </EmbeddedResource>
    <None Include="MY_SOURCE_PROJECT_FOLDER\Properties\SharedResources.Designer.cs">
      <AutoGen>True</AutoGen>
      <DependentUpon>SharedResources.resx</DependentUpon>
      <DesignTime>True</DesignTime>
    </None> 
    ```

4.  替换`MY_SOURCE_PROJECT_FOLDER`为包含资源的项目的相对路径，并替换`MY_SOURCE_PROJECT_NAMESPACE`为生成文件中指定的命名空间`SharedResources.Designer.cs`（应该是您的全局项目的命名空间）

5.  享受 ！

    ![](../Images/9423de3c58f1a7c0120893a547551faf.png)

**警告 ：**

有时 VS 在 **.Designer.cs* 共享文件中进行其他自动更改会导致失败，请确保属性`ResourceManager`仍然指向根共享文件。 [![在此处输入图像描述](../Images/25ec99ee68e36a72b3d39ce75882bf1d.png)](https://i.stack.imgur.com/upSJv.png)

**重要的 ：**

*   当您在 resx 文件中添加新资源时，请从**源项目**中打开它，否则文件将添加到错误的文件夹中！
*   当你刚刚添加了一个新资源，如果它没有出现在新项目中，只需重启VS，它应该可以工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T09:15:05.413

据我所知，您不能在设计器中操作来自其他程序集的资源。仅来自当前项目的那些。

这是我的做法：

创建一个类库项目。在库中，添加 | 新品 | 资源文件。将资源（图像、图标）添加到该文件（例如：Resource1.resx）。在该库的类中添加返回资源的公共成员。

```
public static class Class1
{
    public static Bitmap Image1 { get { return Resource1.Image1; } }
    public static Bitmap Image2 { get { return Resource1.Image2; } }
} 
```

现在在您的项目中引用类库，现在可以在运行时以编程方式设置资源。

```
public Form1()
{
    InitializeComponent();

    this.BackgroundImage = ClassLibrary1.Class1.Image1;
} 
```

但不幸的是，您不能使用设计器。:( 但是，通过这样做，如果您不对其中的资源进行任何更改，则无需重新分发该 dll。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T00:45:02.403

> 我想创建一个资源项目，其中包含我在整个应用程序中需要的所有嵌入图标。...我想在设计器中单击表单的 BackgroundImage 属性时选择资源。

您可以使用来自另一个程序集的资源，*但*不幸的是，由于下面解释的原因，您无法通过设计器进行操作。

![在此处输入图像描述](../Images/751130ad338d3b508559c5bbb675e8b0.png)

在您的资源项目中添加一个带有图片框的表单并设置背景图像。这只是为了将图像添加到项目 Resouces.resx 和 Resouces.Designer.cs。将图片添加为资源后，我们可以删除带有图片框的表单。

在 Resources 项目中，转到 Resouces.Designer.cs 并将类范围更改为 Public，并将图像方法范围从 Internal 更改为 Public：

```
public static System.Drawing.Bitmap SO_down {
    get {
        object obj = ResourceManager.GetObject("SO down", resourceCulture);
        return ((System.Drawing.Bitmap)(obj));
    }
} 
```

在使用资源 DLL 的项目中，您需要将 BackGroundImages 设置为不使用自己的资源：

前：

```
this.pictureBox1.BackgroundImage = global::WinFormWithSatelliteResources.Properties.Resources.SO_down; 
```

后：

```
this.pictureBox1.BackgroundImage = global::SatResources.Properties.Resources.SO_down; 
```

> 当我试图将我的资源与我的主要项目分离时，我应该考虑什么样的架构？每次我修改一两行代码时发布一个 100mb 的可执行文件可能不是一个聪明的主意。

如今，大多数企业都乐于依赖互联网。您知道如何对资源进行版本控制，例如 MyStyle22022013.CSS 和 webbrowsers 如果他们已经有一个最新的副本将不会获取资源。建议我采用类似的策略，将所有这些图像资源放到网上，这样您就可以更新资源而无需打包和部署它们。

当你这样想的时候，为什么还要为一个充满资源的程序集而烦恼呢？迷宫很好只是从互联网上提取资源并从文件系统中使用它们。

如果初始互联网访问（用于下载资源）不是一个选项@jross 答案似乎完全可行。这些天来，虽然我不认为你打算在 CD 上发布这个。

# c# - 从 URL 读取 xml

> ID：14904171
> 
> 赞同：5
> 
> 时间：2013-02-15T22:07:37.047
> 
> 标签：c#, xml

这就是我到目前为止所拥有的。我试图从 URL 中读取 XML 并获取例如温度、湿度……等等……但是每次我尝试其他方法时都会出现错误。我想检索信息并将其放入标签中。

```
namespace WindowsFormsApplication1 {
    public partial class Form1: Form {
        public Form1() {
            InitializeComponent();
        }
        private void btnSubmit_Click(object sender, EventArgs e) {
            String zip = txtZip.Text;
            XmlDocument weatherURL = new XmlDocument();
            weatherURL.Load("http://api.wunderground.com/api/"
            your_key "/conditions/q/" + zip + ".xml");
            foreach(XmlNode nodeselect in weatherURL.SelectNodes("response/current_observation"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T00:51:11.087

我花了一些试验和错误，但我明白了。在 C# 中确保您使用 - ***using System.Xml;***

这是使用 wunderground API 的代码。为了使它起作用，请确保您注册了一个密钥，否则它将不起作用。你在哪里说这个 your_key 就是你把你的钥匙放在哪里。它应该看起来像这样。我使用了一个按钮和三个标签来显示信息。

```
namespace wfats2

{

  public partial class Form1 : Form

{

 public Form1()

        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            XmlDocument doc1 = new XmlDocument();
            doc1.Load("http://api.wunderground.com/api/your_key/conditions/q/92135.xml");
            XmlElement root = doc1.DocumentElement;
            XmlNodeList nodes = root.SelectNodes("/response/current_observation");

            foreach (XmlNode node in nodes)
            {
                string tempf = node["temp_f"].InnerText;
                string tempc = node["temp_c"].InnerText;
                string feels = node["feelslike_f"].InnerText;

                label2.Text = tempf;
                label4.Text = tempc;
                label6.Text = feels;
            }

        }
    }
} 
```

当您按下按钮时，您将获得标签分配中显示的信息。我仍在尝试，您可以不时地进行某种刷新，而不是每次都按下按钮来获取更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:35:43.453

首先，是的，您需要在问题中提供更多信息，但我可以看到您的 URL 中有“your_key”。您可能需要用您的 API 密钥替换它才能正常工作。

# django - APP Engine 上的 Django - 将 URL 路径重定向到 views.py 中的现有函数时出错（在 urls.py 上）

> ID：14904181
> 
> 赞同：0
> 
> 时间：2013-02-15T22:08:11.823
> 
> 标签：django, google-app-engine

当我尝试将 URL 路径重定向到 views.py 文件中的现有函数时出现错误。

我知道问题出在哪里，但我不知道如何解决它。

我的项目中有以下文件夹结构：

```
my_app_gae
  app.yaml
  main.py
  settings.py
  urls.py
  my_app_django (<-- here is my django project)
    dashboard
      views.py
    models
      models.py 
```

问题来了：

当我编辑 urls.py 文件时，当我尝试将特定 URL 路径重定向到 views.py （登陆）内的现有函数时，我收到以下错误：

```
Request Method: GET
Request URL:    http://localhost:8090/landing/
Exception Type: ImportError
Exception Value:    No module named my_app_django 
```

我的Python Path的值是：V:\Python~1\my_app_gae（我之前写的文件夹结构所在的地方）。

我试图执行的 url.py 值是：

```
from django.conf.urls.defaults import *
from my_app_django.dashboard.views import landing

urlpatterns = patterns(
    '',
    (r'^landing/$', landing),
) 
```

如果我直接在 my_app_gae 目录上复制 views.py 文件，它就可以工作。当 views.py 文件位于其他目录中时，问题就出现了。

非常感谢。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:23:52.770

要被识别为 Python 包，您需要`__init__.py`在每个子目录中命名为空文件。

# c# - ObjectDataSource RemoveByID 不起作用，DataKeyNames 有问题吗？

> ID：14904183
> 
> 赞同：1
> 
> 时间：2013-02-15T22:08:24.407
> 
> 标签：c#, asp.net, gridview, objectdatasource

使用 ASP.NET/C#/nHibernate 体系结构 - 我有一个`GridView`，`ObjectDataSource`并且在使删除方法工作时遇到问题。

当我简单地使用`Remove(T entity)`在我的服务层中声明的函数（然后调用我的 nHibernate 存储库）时，`GridView_RowDeleting()`会调用该方法，然后调用 ，`ObjectDataSource_Deleting()`然后调用服务层函数并正确删除业务对象。

但是，当我尝试使用该`RemoveByID(int ID)`函数时，在调用`GridView_RowDeleting()`and`ObjectDataSource_Deleting()`方法之后，服务层永远不会被调用。

我认为这与`ObjectDataSource.DeleteParameters`, 但我似乎无法正确处理。

下面是 GridView 和 ObjectDataSource 的代码片段。如您所见，我`pkChapter7ID`在 GridView 中列出了业务对象的主键`DataKeyNames`：

```
 <asp:GridView ID="gvChapter7" runat="server" DataSourceID="odsChapter7" DataKeyNames="pkChapter7ID">
    <Columns>
      <asp:BoundField DataField="pkChapter7ID" HeaderText="pkChapter7ID" SortExpression="pkChapter7ID"/>
      ...
    </Columns>
  </asp:GridView>

  <asp:ObjectDataSource ID="odsChapter7" runat="server"
    DeleteMethod="RemoveByID" OldValuesParameterFormatString="original_{0}"
    SelectMethod="FindAllForProjectID" TypeName="CLS.Services.Chapter7Service">
    <DeleteParameters>
      <asp:Parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <SelectParameters>
      <asp:SessionParameter Name="ID" SessionField="ProjectID" Type="Int32" />
    </SelectParameters>
  </asp:ObjectDataSource> 
```

我的通用服务层的相关部分（调用 nHibernate 存储库，一旦我到达那里就可以正常工作）：

```
 [DataObjectMethod(DataObjectMethodType.Delete, false)]
    public virtual void Remove(T entity)
    {
        _repository.Remove(entity);
    }

    [DataObjectMethod(DataObjectMethodType.Delete, true)]
    public virtual void RemoveByID(int ID)
    {
        T entity = FindBy(ID);
        if (entity != null)
            _repository.Remove(entity);
    } 
```

我尝试`DeleteParameters`在 _RowDeleting 方法中设置：

```
protected void gvChapter7_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    odsChapter7.DeleteParameters["ID"].DefaultValue = e.Keys["pkChapter7ID"].ToString();
} 
```

以及在 aspx 页面中设置 ObjectDataSource 控件参数的多种方法，例如：

```
<DeleteParameters>
  <asp:ControlParameter ControlID="gvChapter7" Name="ID" PropertyName="SelectedDataKey" Type="Int32" />
</DeleteParameters> 
```

谁能看到我错过了什么？

# java - 从主类启动 osgi bundle 而不是实现 BundleActivator

> ID：14904185
> 
> 赞同：2
> 
> 时间：2013-02-15T22:08:31.863
> 
> 标签：java, bundle, fuseesb, jbossfuse

我有一个名为 Floodlight.jar 的 jar 文件。我可以在 cmd 行中运行它：java -jar floodlight.jar。现在我想将它转换成一个捆绑包以使用 FUSE ESB 容器进行部署。这是我到目前为止所做的：

1.  转变：

    ```
     java -jar bnd.jar wrap floodlight.jar 
    ```

    生成一个名为 floodlight.bar 的包。将名称更改为 Floodlight.jar

2.  部署

    ```
    FuseESB:karaf@root> osgi:install -s file:/home/usr/Dir/to/floodlight.jar 
    ```

我希望捆绑包可以像我在 cmd 行中所做的那样做同样的事情：java -jar floodlight.jar 一旦它开始。但是，它是活动的，没有做任何事情。它的行为就像一个图书馆。

我想知道如何让捆绑包启动后运行主类。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:11:36.030

OSGi 应用程序的入口点是 BundleActivator 的。您不能像在标准 Java 应用程序中那样调用 main-method。但是，您可以在包的 start(BundleContext) 方法的 main 方法中执行所有操作。

因此，实现 BundleActivator 接口并将其添加到您的清单中。

# javascript - .bind 函数与 CoffeeScript

> ID：14904189
> 
> 赞同：1
> 
> 时间：2013-02-15T22:08:51.013
> 
> 标签：javascript, coffeescript

当我尝试转换以下代码片段时...

```
result.pause = function() {        
  cachedValue = this();
  isPaused(true);
}.bind(result); 
```

使用[http://js2coffee.org/](http://js2coffee.org/)它返回

```
result.pause = ->
  cachedValue = this()
  isPaused true
.bind(result) 
```

但是，当您尝试编译时该代码不正确，您会返回 Error Unexpected '.'

在这种情况下使用 CoffeeScript 使用 .bind 函数的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T22:13:23.290

```
result.pause = (->
  cachedValue = this()
  isPaused true)
.bind(result) 
```

# vb.net - 串口回车

> ID：14904190
> 
> 赞同：1
> 
> 时间：2013-02-15T22:08:51.713
> 
> 标签：vb.net, serial-port, carriage-return

我正在 VB.NET 中创建一个超级终端类型的应用程序，但串行连接有问题。当我向设备发送数据时，我得到了我期望的响应，但响应中有一个额外的 CR。即，如果我在超级终端中发送命令，我会得到响应，例如；

```
response one
response two 
```

但在我的应用程序中它会返回；

```
response one

response two 
```

代码如下；

```
Private Sub textSend_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles textSend.KeyPress

        If e.KeyChar = Convert.ToChar(Keys.Enter) Then 

            connSerial.Write(textSend.Text & vbCr)
            textSend.Text = ""

            e.Handled = True 

        End If

    End Sub 
```

和

```
Private Sub connSerial_DataReceived(ByVal sender As Object, ByVal e As System.IO.Ports.SerialDataReceivedEventArgs) Handles connSerial.DataReceived
        ReceivedText(connSerial.ReadExisting()) 
    End Sub
    Private Sub ReceivedText(ByVal [text] As String)
        If Me.textReply.InvokeRequired Then
            Dim x As New SetTextCallback(AddressOf ReceivedText)
            Me.Invoke(x, New Object() {(text)})
        Else
            textReply.AppendText([text])
        End If

    End Sub 
```

我使用的是 1200 波特率，实际上每一行都被另一行分隔，但是如果我将波特率提高到 57600，它只会偶尔发生。IE;

```
response 1
response 2
response 3

response 4
response 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:38:09.590

您可以使用[`WriteLine Method`](https://www.google.com.ph/search?q=.WriteLine&oq=.WriteLine&aqs=chrome.0.57&sourceid=chrome&ie=UTF-8)代替`Write Method`

```
 If e.KeyChar = Convert.ToChar(Keys.Enter) Then 
        connSerial.WriteLine(textSend.Text & vbCr)
        textSend.Clear();
        e.Handled = True 
   End If 
```

# sql - delphi中另一个Group By列的列总和

> ID：14904198
> 
> 赞同：0
> 
> 时间：2013-02-15T22:09:10.917
> 
> 标签：sql, delphi

我正在使用一个简单的 delphi 表单来创建每日资产负债表，因此我使用的是 DBGrid，其列来自表并包含：日期、输入、输出..我想要做的是按日期分组并计算每个日期的进出，以保持平衡。

例子：

```
 1/01/2013 in (100) out (0),
     1/01/2013 in (200) out (0),
     1/01/2013 in (0) out (100), 
```

我希望结果是 1/01/2013 in (300) out (100)

任何帮助请导致我在分组日期后遇到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:49:59.420

`SUM`您多次使用聚合表达式 ( )：

```
SELECT 
  YourDateField, 
  Sum(in) as InAmount, 
  Sum(Out) as OutAmount,
  Sum(In) - Sum(Out) as Balance
FROM 
  YourTable
GROUP BY
   YourDateField 
```

输出：

```
YourDateField    InAmount    OutAmount
=============    ========    =========
01/01/2013       300         100 
```

当然，用您的日期列和实际表的名称以及列别名（、 和）`YourDateField`替换您想要的任何名称。`YourTable``InAmount``OutAmount``Balance`

# protobuf-net - 在 Compact Framework 3.5 中使用 protobuf-net 获取“未找到无参数构造函数”

> ID：14904200
> 
> 赞同：4
> 
> 时间：2013-02-15T22:09:16.223
> 
> 标签：protobuf-net

我正在尝试反序列化作为集合的对象。集合中包含的类是从基类继承的类。

```
Public MustInherit Class EntityBase
    Protected Sub New()
        Initialize()
    End Sub
End Class

Partial Public Class [BarEntity]
    Inherits EntityBase
    Public Sub New()
        MyBase.New()
    End Sub
End Class 
```

在这种情况下，集合包含 BarEntity 类。但是当时我像这样在protobuf-net中调用反序列化器

```
Dim byteafter() As Byte = Convert.FromBase64String(CType(oWSResult.Obj, String))
Dim ms As New MemoryStream(byteafter)
myList = Serializer.Deserialize(Of BarEntityCollection)(ms) 
```

正在抛出这个**No parameterless constructor found for EntityBase**

此代码正在 Compact Framework 3.5 应用程序中执行。

任何帮助将不胜感激。谢谢。

# java - 为什么 setLastModified(time) 不适用于此文件？

> ID：14904203
> 
> 赞同：6
> 
> 时间：2013-02-15T22:09:31.177
> 
> 标签：java, file, date

为什么以下代码中文件的日期没有改变？

`fLocal.location`= C:\ 中的现有文件

`fLocal.date`= 以 Long 形式设置的日期

```
boolean x = new File(fLocal.location).setLastModified(Long.parseLong(fLocal.date));
System.out.println("Changed: " + x);
System.out.println(new Date(new File(fLocal.location).lastModified()));
System.out.println(new Date(Long.parseLong(fLocal.date))); 
```

输出：

```
Changed: false
Fri Feb 15 23:02:51 CET 2013
Fri Feb 15 22:49:34 CET 2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:34:27.713

根据我之前的评论，请遵循以下检查：

1.  您的代码是否具有对该文件的写入权限？
2.  文件是否处于打开状态？
3.  在您执行此操作时，您当前是否正在使用任何其他应用程序读取（或写入！）该文件？

这些都是可能阻止您更改文件时间的项目。

用单行文本创建一个简单的纯文本文件，保存并关闭编辑器。然后尝试在您的应用程序中使用该文件。确保在尝试更改时间之前先调用`exists()`您的文件，以确保您确实拥有有效的文件。`File` `Object`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:01:20.840

在我的本地测试您的代码并且它可以工作......我更改了系统上非常旧文件的修改日期......

-查看文件是否正在其他地方使用... -检查您是否对文件有权限

```
import java.io.File;
import java.io.IOException;
import java.util.Date;

class Test
{
    private class flocalClass
    {

        public String date;
        public String location="c:/Test/cascade.xyz";

    }
    public static void main (String[]args) throws IOException
    {
        flocalClass fLocal = new Test().new flocalClass();
        fLocal.date = Long.toString(new Date().getTime());
        boolean x = new File(fLocal.location).setLastModified(Long.parseLong(fLocal.date));
        System.out.println("Changed: " + x);
        System.out.println(new Date(new File(fLocal.location).lastModified()));
        System.out.println(new Date(Long.parseLong(fLocal.date)));
    }
} 
```

# html - 输入类型 =“电子邮件”的约束验证 API？

> ID：14904205
> 
> 赞同：2
> 
> 时间：2013-02-15T22:09:45.753
> 
> 标签：html, forms, validation, constraints

使用 HTML5 约束验证 API 验证表单字段`type="email"`，我注意到 Chrome 接受“aa@a”作为正确的电子邮件地址。
这样做的目的是什么 - 这是一个错误吗？定义自定义模式是不好的做法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T01:10:38.070

> 这是什么目的

不排除有效的电子邮件地址。

> 这是一个错误吗

不 ，这是HTML5 兼容浏览器应使用[的有效电子邮件地址的定义。](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#valid-e-mail-address)该定义存在一个[未解决的缺陷](https://www.w3.org/Bugs/Public/show_bug.cgi?id=19117)，但即使已修复`aa@a`，仍然是格式有效的电子邮件地址。请记住，[电子邮件最早出现在 60 年代中期](http://en.wikipedia.org/wiki/Email)，我们[直到 8 世纪中期才获得 DNS](http://en.wikipedia.org/wiki/Domain_Name_System)，许多“@ 右侧”现在对我们来说看起来有点奇怪的东西在这些旧环境中完全有效。

> 定义自定义模式是不好的做法吗？

当然，如果您的要求比“所有有效格式的电子邮件地址”更严格，您可以，但电子邮件验证很容易出错，尤其是[今年所有新的顶级域都上线了](http://en.wikipedia.org/wiki/Top-level_domain#Proposed_domains)。如果您真的关心有效的电子邮件地址（而不是有效格式的电子邮件地址），那么唯一的解决方案是将实际电子邮件发送到该地址并确认它到达（通过某种基于令牌的确认 URL，用户必须单击）。

# c# - 将文本写入另一个窗口

> ID：14904208
> 
> 赞同：1
> 
> 时间：2013-02-15T22:10:10.907
> 
> 标签：c#, text, output

我想向当前选择的应用程序写入文本，但它的写入垃圾并导致发生奇怪的事情。

```
using System;
using System.Windows.Forms;
using System.Collections.Generic;
using System.Threading;
using System.Linq;
using System.Runtime.InteropServices;

namespace i_allbwn
{
    class Program
    {

        static void Main(string[] args)
        {
            Thread.Sleep(500);
            ActionWithChance.brif_allbwn();

            Console.ReadKey();
        }
    }
    class ActionWithChance
    {
        [DllImport("user32.dll", SetLastError = true)]
        static extern void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

        public const int KEYEVENTF_EXTENDEDKEY = 0x0001; //Key down flag
        public const int KEYEVENTF_KEYUP = 0x0002; //Key up flag

        public static void brif_allbwn()
        {
            argraffu(new String[] {
                    "line1",
                    "line2",
                    "line3",

            }
                    );
        }

        public static void allbwn(Byte[] Name)
        {
            for (int i = 0; i < Name.Length; i++)
            {
                Console.WriteLine("Writing   " + (Char)Name[i]);
                keybd_event((Byte)Name[i], 0, KEYEVENTF_EXTENDEDKEY, 0);
                Thread.Sleep(10);
                keybd_event((Byte)Name[i], 0, KEYEVENTF_KEYUP, 0);
            }
        }
        public static void argraffu(String[] text)
        {
            foreach (String s in text)
            {
                allbwn(ToByteArray(s));
                keybd_event((Byte)'\r', 0, KEYEVENTF_EXTENDEDKEY, 0);
                Thread.Sleep(10);
                keybd_event((Byte)'\r', 0, KEYEVENTF_KEYUP, 0);
            }
        }

        public static Byte[] ToByteArray(String StringToConvert)
        {

            Char[] CharArray = StringToConvert.ToCharArray();

            Byte[] ByteArray = new Byte[CharArray.Length];

            for (int i = 0; i < CharArray.Length; i++)
            {

                ByteArray[i] = Convert.ToByte(CharArray[i]);

            }

            return ByteArray;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:22:18.883

我这样做的功能是这样的：

```
 public const Int32 WM_CHAR = 0x0102;

    public void SendKeys(string message)
    {
        foreach (char c in message)
        {
            int charValue = c;
            IntPtr val = new IntPtr((Int32)c);
            SendMessage(WindowHandle, WM_CHAR, val, new IntPtr(0));
        }
    } 
```

基本上我正在做的是获取应用程序的句柄，例如：

```
 Process proc = Process.GetProcessesByName("Notepad")[0]; 
```

然后使用 proc.MainModule.Handle() 获取句柄

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-23T00:57:48.020

Autoit 库使与外部窗口的交互变得非常容易。

安装名为`AutoItX.Dotnet`

那么这只是一个问题：

```
using AutoIt;

class Program
{
    static void Main(string[] args)
    {
        AutoItX.Run("notepad.exe", null);
        AutoItX.WinWait("Untitled - Notepad");
        AutoItX.ControlSend("Untitled - Notepad", "", "[CLASSNN:Edit1]", "testing");

        //ControlSend is the ideal way to send text, but you can also pretend text was typed into the keyboard:
        AutoItX.Send("howdy pilgrim");
    }
} 
```

# java - android找到特定的标签值并替换为资源值

> ID：14904209
> 
> 赞同：0
> 
> 时间：2013-02-15T22:10:12.760
> 
> 标签：java, android, regex

我想使用 Html.fromhtml 在 textview 中显示一些 html 文本，例如：

```
<font color=royalblue>hello</font> a royalblue color ... 
```

android资源文件中定义了royalblue，还有很多其他颜色

```
<color name="royalblue">#A0B4F0</color> a royalblue color ... 
```

我想找到所有的color=xxx，替换成color=颜色资源文件中对应的值

```
<font color="#A0B4F0">hello</font> 
```

所以`Html.fromhtml()`可以正确处理字体标签。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:12:59.940

```
String tv = textview.getText();
tv = tv.replace("royalblue", "#A0B4F0");

textview.setText(tv); 
```

# responsive-design - 将 em 用于类型以外的事物的响应式样式

> ID：14904215
> 
> 赞同：0
> 
> 时间：2013-02-15T22:11:07.920
> 
> 标签：responsive-design, less, em

有时我希望我可以只更改媒体查询中的一个变量，然后

HTML：

```
<div id="wrap">
  <div class="child1"></div>
  <div class="child2"></div>
</div> 
```

**少（不起作用）：**

```
@base: 1000px;

@media all and (max-width: 768px) {
  @base: 600px;
}

.child1 {
  // 500px normally, 300px on small screens
  height: 0.5 * @base;
}
.child2 {
  // 250px normally, 150px on small screens
  height: 0.25 * @base; 
  } 
```

这当然行不通，因为在编译时，`@base`已设置并应用于所有类。但是，我遇到了这种肮脏的解决方法：

**较少的：**

```
#wrap 
    {
    font-size: 1000px;
    @media all and (max-width: 768px) {
      font-size: 600px;
    }
    .child1 {
      // 500px normally, 300px on small screens
      height: 0.5em;
    }
    .child2 {
      // 250px normally, 150px on small screens
      height: 0.25em; 
      }
    } 
```

假设我的元素中实际上没有任何文本（或者文本仅出现在叶节点中并明确设置它们的字体大小），使用这种方法是否有任何严重的缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:42:27.043

我不能肯定地证明，但所提出的`em`方法对我的口味来说似乎太老套了（而且它不会使编码器轻松确定元素的高度）。我建议使用媒体查询，因为它们打算使用，并且只需构建一个 mixin 来获取值，如下所示：

**较少的**

```
@base: 1000px;
@smallBase: 600px;

.childHeights(@base) {
  // 500px normally, 300px on small screens
  .child1 {
  height: 0.5 * @base;
  }
  // 250px normally, 150px on small screens
  .child2 {
    height: 0.25 * @base;
  }
}

@media all and (max-width: 768px) {
  .childHeights(@smallBase);
}

.childHeights(@base); 
```

**CSS 输出**

```
@media all and (max-width: 768px) {
  .child1 {
    height: 300px;
  }
  .child2 {
    height: 150px;
  }
}
.child1 {
  height: 500px;
}
.child2 {
  height: 250px;
} 
```

# javascript - 将 JavaScript 连接到 Web API

> ID：14904218
> 
> 赞同：0
> 
> 时间：2013-02-15T22:11:22.430
> 
> 标签：javascript, html, visual-studio-2012, asp.net-web-api

我是 Web 开发领域的新手，我希望能够通过 . 我在这方面真的没有成功。

我按照本教程能够建立这种连接：[http ://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)

我所需要的只是将一些来自 HTML 页面的输入发送到一个 web api，该 web api 接受这些参数并返回一个对象

我正在使用此代码

```
$.getJSON("api/GeneratorController/setparameters/"+firstparameter+"/"+secondparameter+"/"+thirdparameter+"/"+fourthparameter+"/"+fifthparameter+"/"+sixthparameter,
function (data) {
   alert(data); //never comes here
}).fail(function (jqXHR, textStatus, err) {
   alert("All checks are correct, image was not generated. jqXHR = " + jqXHR.valueOf() + " textStatus=" + textStatus + " Error" + err);
}); 
```

它总是进入失败部分，我附上了由此产生的警报消息

![错误信息](../Images/41968b3216d9ffddd3152c7a2794eebb.png)

有什么理由这样做吗？

@smartmeta（我更改了错字，谢谢）我听从了您的建议，这是警报的输出（如预期的那样，显示了我插入的值）： ![在此处输入图像描述](../Images/860905291aa49cdf8fe0ee2ff7921f97.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:51:03.613

您的 url 需要以您的域开头，而不是`'api/generatorcontroller/...'`. 如果你在本地开发，类似`http://localhost:[port]/api/generatorController/...`.

此外，webApi 映射到 url 动词（get、post、put、delete..），而不是 setparameters 之类的函数，除非您在 get() 函数上方有一个 [name=setparameters]。

另外，我很确定您没有路由设置来处理带有所有这些参数的 url。您想要查看的，就像您使用 jQuery 一样，是[jQuery.get](http://api.jquery.com/jQuery.get/)文档。靠近底部的第二个示例显示了放置参数的位置。如果它们不在查询字符串中，WebAPI 将在正文中检查它们。所以它最终看起来像：

`$.getJSON("http://"+window.location.host+"/api/GeneratorController/setparameters", {parameter1: parameter1, parameter2:parameter2 ...});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:18:51.397

嗯，首先要检查的是确保您的服务器端函数返回您期望的值。您可以使用 Chrome 的开发者工具或 Firebug Firefox 扩展来做到这一点，我认为 IE10 也有类似的东西。转到“net”选项卡，找到与您的 API 调用对应的请求，然后查看服务器响应的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:33:22.880

请添加行

```
 alert("api/GeneratorController/setparameters/"+firstparemeter+"/"+secondparameter+"/"+thirdparameter+"/"+fourthparameter+"/"+fifthparameter+"/"+sixthparameter) 
```

然后调用您的脚本并将警报的输出带到浏览器中。然后检查您的应用程序是否处理该路由。

顺便说一句，我认为你有一个错字。我想它应该是第一个参数。

我假设你想做

```
"api/GeneratorController?foo=Bar 
```

但是，当您对此不熟悉时，我建议您首先尝试该示例。之后你就可以开始改变细节了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T07:32:59.337

所以我发现我的代码有什么问题

两件事情 ：

1-当我调用我的 API 时，我不应该使用“控制器”这个词，它应该是`api/Generator/...`

2- 函数名称需要以“get”而不是“set”开头，因为它“获取”来自 api 的返回值

谢谢大家！

# html - 强制输入元素的宽度调整为其内容/值

> ID：14904219
> 
> 赞同：6
> 
> 时间：2013-02-15T22:11:22.953
> 
> 标签：html, css, input, autosize, angular-ui

我正在尝试取消输入元素的样式，使其文本看起来像纯文本/内联文本，并且我已经重置了它可以拥有的几乎所有 css 属性，但我无法让输入的宽度调整/缩小到它内容（`input { width:auto; min-width:0; }`不起作用）。它遵循任意宽度，例如`input { width: 10px; }`，因此显然它的宽度是可调节的。

我看到[人们试图用javascript来做](https://stackoverflow.com/q/10833768/758177)（答案中的小提琴不再起作用），所以我想知道我想要的是否可能。

这是一个**[小提琴](http://jsfiddle.net/jshado1/2fQgY/)**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:39:48.513

玩过这个。做不到。你想达到什么目的？你知道`contenteditable`属性吗？

这可能会为您提供所需的东西。

[https://developer.mozilla.org/en-US/docs/HTML/Content_Editable](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:37:08.153

如果您只是避免整个样式混乱并进行一些文本改组怎么办？您已经拥有了 jQuery 所需的一切。

[http://jsfiddle.net/2fQgY/8/](http://jsfiddle.net/2fQgY/8/)

```
The date is <span class="dateSpoof"></span><input class="myDate" type="hidden" value="foo" />. 
Thanks for coming.

$('.myDate').datepicker({
    showOn: 'button',
    buttonText: 'select...',
    onClose: function () {
        var dateText = $(this).val();
        $('.dateSpoof').html(dateText);
        $('.ui-datepicker-trigger').hide();
    },
    dateFormat: 'd M yy'
}); 
```

这是一个可重置的示例：http: [//jsfiddle.net/2fQgY/11](http://jsfiddle.net/2fQgY/11)

这是一个全是文本，只有文本：http: [//jsfiddle.net/2fQgY/14](http://jsfiddle.net/2fQgY/14)

# windows-phone-8 - 模拟器正在关闭我的以太网连接

> ID：14904221
> 
> 赞同：0
> 
> 时间：2013-02-15T22:11:30.467
> 
> 标签：windows-phone-8, hyper-v, windows-phone-8-emulator

我正在学习 windows phone 编程，当我运行模拟器时，它会关闭笔记本电脑上的以太网连接，但 wifi 仍然可以工作。

如何解决？

可能是 Hyper-V 的问题？

以太网控制器：RealTek PCIe GBE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:30:52.930

最简单的方法是删除网络连接的模拟器自定义，然后让它恢复它们！

*   在主机上，打开 Hyper-V 管理器
*   单击操作 -> 虚拟交换机管理器
*   删除列表中显示的 3 个虚拟交换机

完成此步骤后，互联网连接显示已恢复；下次您打开模拟器时，它将允许您重新添加这些虚拟交换机。

**注意：**请注意，如果 Hyper-V 实际被其他应用程序使用而不是 Windows Phone 模拟器，您可能会有更多条目！

# javascript - 什么是 javascript 中的 GetOrganizationService

> ID：14904223
> 
> 赞同：0
> 
> 时间：2013-02-15T22:11:35.510
> 
> 标签：javascript, dynamics-crm

我正在查看 [https://stackoverflow.com/questions/10978236/pass-a-parameter-to-a-crm-2011-workflow-via-the-api提供的代码](https://stackoverflow.com/questions/10683977/set-and-get-notes-field-in-crm-2011-javascript)

这应该通过javascript创建一个注释。在这段代码中有一行内容如下：

```
var orgService = GetOrganizationService(); 
```

我必须有另一个功能“GetOrganizationService”吗？如果是这样，有人可以告诉我如何做到这一点吗？或者这是一种可以理解的内置 CRM 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:03:30.660

我不知道任何这样的函数，我猜该方法是某人创建的 API 的一部分，用于抽象所有工作以通过 Javascript 调用例如 CRM 的 Web 服务。例如一个api检查这篇[文章](http://www.bizforward.cws-international.com/2011/01/26/creating-records-in-crm-2011-using-javascript/)有一个annotation的例子。

我知道通过 Javascript 创建实体记录的两种方法：

通过 CRM 的 Web 服务：

*   [http://msdn.microsoft.com/en-us/library/cc677070.aspx](http://msdn.microsoft.com/en-us/library/cc677070.aspx)

通过 Odata：

*   [http://lakshmanindian.wordpress.com/2012/10/07/create-noteannotation-using-jscript-in-microsoft-dynamics-crm-2011/](http://lakshmanindian.wordpress.com/2012/10/07/create-noteannotation-using-jscript-in-microsoft-dynamics-crm-2011/)

# javascript - 无限滚动 + Swipe.js

> ID：14904229
> 
> 赞同：0
> 
> 时间：2013-02-15T22:12:03.383
> 
> 标签：javascript, slider, swipe, infinite-scroll

背景：我正在使用 Swipe.js 和 Infinite Ajax Scroll (JQ) 创建一个投资组合网站。

问题：当额外页面的内容被加载到当前页面时，已经加载的 Swipe.js 脚本不会对其进行处理。这意味着新内容的标记没有改变（需要滑动功能才能工作）。

我想我需要在每个页面重新加载后触发 Swipe.js 脚本。那能解决吗？请像我 8 岁一样向我解释这一点。JS不是强项...

演示： [http ://hatchcreative.co.nz/tomo](http://hatchcreative.co.nz/tomo)

您可以看到，当页面加载新内容时，滑块两侧的按钮不再起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:27:48.377

是的，您是对的，加载图像后，您必须在这些新元素上创建一个新的 Swipe 实例（因为它们在开始时不存在，当页面加载时）。
根据无限滚动的文档，您可以使用[`onRenderComplete`](https://github.com/webcreate/infinite-ajax-scroll#onrendercomplete).

所以你的`jQuery.ias`构造函数是这样的：

```
jQuery.ias({
  // ... your settings...
  onRenderComplete: function(items) {
    $(items).each(function(index, element) {
      new Swipe(element);
    });
  }
}); 
```

这应该以某种方式工作，但我不确定；我还没有使用这些库。

**编辑**：
在对您的代码进行更多检查后，我看到您有一些内联点击处理程序，例如：`onclick='two.prev();return false;'`。

您需要删除它并将您的`onclick`句柄添加到相同的`onRenderComplete`函数中。

```
onRenderComplete: function(items) {
  var swipe;
  $(items).each(function(index, element) {
    swipe = new Swipe(element);
  });

  // find tags with the class 'forward' inside the current element and add the handler
  $(element).find('.forward').on('click', function() {
     swipe.next();
  });
  // ... also for previous
} 
```

* * *

*顺便说一句*：通常你应该为你的重要代码部分提供一个[**jsFiddle**](http://jsfiddle.net)，这样我们更容易解决问题，并且当链接页面发生变化时问题不会过时。

# objective-c - 应用程序生命周期任务的 GCD dispatch_async？

> ID：14904231
> 
> 赞同：0
> 
> 时间：2013-02-15T22:12:05.567
> 
> 标签：objective-c, grand-central-dispatch

我之前使用过 GCD`dispatch_async`来处理后台线程工作单元，例如解析来自网络请求（例如 JSON 或 XML）的数据，它非常棒。但是，如果我有一个要在应用程序的整个期间运行的后台任务怎么办？`dispatch_async`仍然适合这种情况，还是有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:16:59.813

当然可以，但要为它创建自己的调度队列。（如果您使用全局队列，您可能会永远占用该队列 - 或其线程之一。）

```
dispatch_queue_t dispatchQueue = dispatch_queue_create("com.mycompany.myapp.ForeverOperation", DISPATCH_QUEUE_SERIAL);
dispatch_async(dispatchQueue, ^{
    // worker routine 
}); 
```

更传统地，您会为此创建一个显式线程，如果它将永远运行，那可能会更“有意义”。但结果基本相同。

```
NSThread * myWorkerThread = [[NSThread alloc] initWithTarget:...
[myWorkerThread start]; 
```

如果您需要与其他线程/队列通信，一如既往，可能需要标准同步技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:17:24.793

这实际上与 无关`dispatch_async`，这只是在后台线程中做某事的一种方法。如果您想在后台线程中执行某些操作，请在后台线程中执行！请注意，经常这样做可能会拖累您的应用程序，因为您只有这么多的处理时间和这么多的处理器；你可能最终不得不在 Instruments 中学习。你可能想把你的任务分解成小块，每隔一段时间就做一小块。GCD 和 NSOperation 都可以提供帮助。

# scala - coursera的Scala函数式编程原理中的pascal函数中的列和行是如何计算的？

> ID：14904233
> 
> 赞同：1
> 
> 时间：2013-02-15T22:12:11.207
> 
> 标签：scala

我在学习 Scala 中的 Coursera[函数式编程原理课程时正在学习 Scala](https://www.coursera.org/course/progfun)。

第一个练习说：

> ```
>  1
>    1 1
>   1 2 1
>  1 3 3 1
> 1 4 6 4 1 
> ```
> 
> 三角形边上的数字都是1，三角形里面的每个数字都是上面两个数字的和。编写一个函数，通过递归过程计算帕斯卡三角形的元素。
> 
> 通过在 Main.scala 中实现 pascal 函数来完成这个练习，该函数接受 c 列和 r 行，从 0 开始计数并返回三角形中该点的数字。例如，pascal(0,2)=1、pascal(1,2)=2 和 pascal(1,3)=3。

一开始，我理解，因为他指的是我们都熟悉的“数字”，但后来他继续使用“元素”这个词。他这是什么意思？他要我计算什么？

我假设他对“数字”这个词感到厌烦，并认为，在将三角形中数字的名称定义为“数字”之后，他只是想使用新的东西，即“元素”，但无论我怎么数我都不能让参考工作。

我什至无法真正理解“列”这个词，因为这些数字不是垂直向上的。

你能解释一下他是怎么得到的`pascal(1,3) == 3`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:30:12.390

你在考虑列有点错误。“第 x 列”是指“给定行中的第 x 个条目。

因此，如果您正在查看 function `pascal(c,r)`，您可能想弄清楚第 r 行中的第 c 个数字是多少。

因此，例如：

`pascal(1,2)`对应于第三行的第二个条目

```
 1
    1   1
  1  *2*  1 
```

`pascal(1,3)`希望您查看第 4 行中的第二个条目。

```
 1
     1   1
   1   2   1
 1  *3*  3   1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T09:37:28.917

您可以简单地将三角形制作为“矩形”，一切都会变得显而易见：

```
cols-> 0 1 2 3 4

row-0  1
row-1  1 1
row-2  1 2 1
row-3  1 3 3 1
row-4  1 4 6 4 1 
```

你说得对，三角形的“元素”是由数字组成的，虽然有细微的差别，但在这种情况下是微不足道的。

*PS*我个人建议更喜欢课程论坛来解决此类问题：

1.  它将避免有关荣誉代码的争议性问题。
2.  您的课程学员将更快地了解手头的问题
3.  他们将有机会获得那些不参加课程的人无法获得的材料
4.  这将有助于在课程学生中建立会员意识，并让你们有机会创造新的、可能富有成果的重新认识

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T22:20:00.890

只从左边数。(0,2) 是行中最左边的数字

> **1** 2 1

所以 (1,3) 将是第二个数字

> 1 **3** 3 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T22:19:14.780

您要问的是违反 Coursera 荣誉守则：[https](https://www.coursera.org/maestro/auth/normal/tos.php#honorcode) [://www.coursera.org/maestro/auth/normal/tos.php#honorcode http://www.aiqus.com/questions/41299/coursera-cheatating -scala课程](http://www.aiqus.com/questions/41299/coursera-cheating-scala-course)

# ruby - 字符串中的 Ruby 日期时间转换为以毫秒为单位的日期时间

> ID：14904235
> 
> 赞同：9
> 
> 时间：2013-02-15T22:12:51.587
> 
> 标签：ruby

这是一个 Ruby 问题 (1.9.1)

我在字符串中有以下日期和时间：

```
29 Sep 2013 12:25:00.367 
```

我首先想将它从字符串转换为日期和时间，然后添加 10 秒并将其转换回与上述相同的字符串格式。

我写了这段代码：

```
format = "%d %b %Y %H:%M:%S"
date_time = "29 Sep 2013 22:11:30.195"
parsed_time = DateTime.strptime(date_time, format)
puts " new date time is #{parsed_time}" 
```

哪个输出：

```
new date time is 2013-09-29T22:11:30+00:00 
```

我没有看到“195”。我试过`format = "%d %b %Y %H:%M:%S.%3N"`了，这给出了：

```
fileOpTest:34:in `strptime': invalid date (ArgumentError) from fileOpTest:34:in `<main>' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T22:35:19.930

这可以使用[Time 类](http://www.ruby-doc.org/core-1.9.3/Time.html)很容易地完成。您可以通过添加秒来添加时间。然后使用#strftime

```
t= Time.parse('29 Sep 2013 12:25:00.367')
=> 2013-09-29 12:25:00 -0400
t=t + 10
=> 2013-09-29 12:25:10 -0400
t.strftime("%d %b %Y %H:%M:%S.%3N")
=> "29 Sep 2013 12:25:10.367" 
```

# java - 打印格式化数组

> ID：14904236
> 
> 赞同：3
> 
> 时间：2013-02-15T22:12:54.590
> 
> 标签：java, arrays, printing

我试图通过在for循环中使用嵌套for循环遍历它来打印出一个二维数组。

```
char[][] largeArray = {{'&','&','^','#','@','@','@','@','&','*','*','*'},
                       {'#','&','&','^','@','@','@','@','*','*','*','*'}}

for (int r = 0; r < 2; r++)
{
    for (int c = 0; c < 12; c++)
    {
        System.out.print(largeArray[r][c]);
    }
} 
```

它打印出的是该数组中所有内容的单行

有没有办法打印该数组的第一行（第一个括号中的所有内容）然后是下一行或下一个括号？我不希望第一行和第二行之间有任何额外的空间。所以我真的不能只使用`System.out.println();`

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:13:44.893

您需要在打印每一行后打印一个换行符：

```
for(int r = 0; r < 8; r++)
{
    for(int c = 0; c < 12; c++)
    {
        System.out.print(largeArray[r][c]);
    }
    System.out.println(); // Add this outside the inner loop
} 
```

* * *

您还可以考虑使用`Arrays.toString`方法来打印您的数组，以避免使用这样的嵌套循环：

```
for(int r = 0; r < 2; r++) {
    System.out.println(Arrays.toString(largeArray[r]));
} 
```

* * *

此外，为了进一步使您的代码看起来更好，您可以使用增强的 for 循环，而不是旧循环，以避免像这样索引数组：

```
for (char[] arr: largeArray) {
    System.out.println(Arrays.toString(arr));
} 
```

# xml - 如何将 Magento 页面标题移动到侧边栏上方

> ID：14904237
> 
> 赞同：2
> 
> 时间：2013-02-15T22:12:58.343
> 
> 标签：xml, magento, php

我正在尝试拆分类别页面上的 2-columns-left 模板。

现在它看起来像这样：

```
_________________________________
|          |                    |
|          | Page Title         |
|          |                    |
|(sidebar) | (main content)     |
|          |                    |
|          |                    |
|__________|____________________| 
```

我需要将类别名称和描述向上移动到左侧菜单上，并将宽度填充为 100%，如下所示：

```
_________________________________
|                               |
| Page Title                    |
|_______________________________|
|          |                    |
|(sidebar) | (main content)     |
|          |                    |
|          |                    |
|__________|____________________| 
```

我不知道从哪里开始。当我查看 XML 时，它似乎不是可以放在其他地方的单独部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:22:04.383

首先更新目录布局以使用单列模板。然后将 catalog.leftnav 块复制到 category.products 块中。

```
<!-- {THEME_PATH}/design/layout/catalog.xml -->
<catalog_category_default translate="label">

    <!-- Update the layout to use the single column template -->
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>

    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <!-- Move the catalog navigation block into the category view block -->
            <block type="catalog/navigation" name="catalog.leftnav" before="-" template="catalog/navigation/left.phtml"/>
        </block>
    </reference>

</catalog_category_default> 
```

一旦 catalog.leftnav 块是 category.products 块的子块，您就可以使用 getChildHtml() 方法在 category.products 视图模板中显示它。

```
<!-- {THEME_PATH}/design/template/catalog/category/view.phtml -->
<div class="category-view">

    <div class="page-header">
        ...
    </div>

    <div class="category-nav">
        <?php echo $this->getChildHtml('catalog.leftnav'); ?>
    </div>

    <div class="category-content">
        ...
        <?php echo $this->getProductListHtml(); ?>
        ...
    </div>

</div> 
```

风格随你喜欢。希望有帮助。

# ios - 让 UITableView 在一段时间内从上到下滚动？

> ID：14904244
> 
> 赞同：3
> 
> 时间：2013-02-15T22:13:52.747
> 
> 标签：ios, objective-c, uitableview, animation, scroll

我试图让我`UITableView`以稳定的速度慢慢向下滚动，我可以指定。我用过`scrollToRowAtIndexPath`，但无论我是否选择对其进行动画处理，它几乎都是即时的动作。我正在看一些移动得更慢的东西。

我确实想知道是否可以对 UIView 动画块做一些事情，一次移动一个`indexPath.row`，但由于我的单元格高度不同，这会导致动画速度不均匀。

我还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:25:18.400

我用这个得到它..

```
[NSTimer scheduledTimerWithTimeInterval: 0.025 target:self selector:@selector(scrollTableView) userInfo:nil repeats:YES]; 
```

和..

```
- (void) scrollTableView {

    float w = 1;

    CGPoint scrollPoint = self.tableView.contentOffset;
    scrollPoint.y = scrollPoint.y + w;
    if (scrollPoint.y >= self.tableView.contentSize.height - (self.tableView.frame.size.height - 100)  || scrollPoint.x <= -self.tableView.frame.size.height + 924) {
    w *= -1;
    }
    [self.tableView setContentOffset: scrollPoint animated: NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:22:46.883

您始终可以随时间递减 contentOffset y 轴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T05:18:16.017

给你，伙计。只需将 animateWithDuration 更改为更高的秒数，例如 1 或 1.5，看看它是否达到了您想要的效果。确保包含 QuartzCore 库和`#import <QuartzCore/QuartzCore.h>`*.m 文件。这很容易

```
-(IBAction)modeTableSlowly
{

    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveLinear animations:^{

            //here tblSimpleTable2 is tableView
            [tblSimpleTable2 setFrame:CGRectMake(183, 56, 137, 368)];

    } completion:nil];

} 
```

# c - Qt Creator中的Gstreamer rtsp服务器链接

> ID：14904246
> 
> 赞同：0
> 
> 时间：2013-02-15T22:14:05.467
> 
> 标签：c, qt, rtsp, gstreamer

我已经安装了 Gstreamer sdk 并尝试编译此代码：

```
#include <gst/gst.h>
#include <gst/rtsp-server/rtsp-server.h>

int main (int argc, char *argv[])
{
  GMainLoop *loop;
  GstRTSPServer *server;
  GstRTSPMediaMapping *mapping;
  GstRTSPMediaFactory *factory;

  gst_init (&argc, &argv);
  loop = g_main_loop_new (NULL, FALSE);
  server = gst_rtsp_server_new ();
  mapping = gst_rtsp_server_get_media_mapping (server);
  factory = gst_rtsp_media_factory_new ();
  gst_rtsp_media_factory_set_launch (factory,
        "( videotestsrc is-live=1 ! x264enc ! rtph264pay )");

  gst_rtsp_media_factory_set_shared (factory, TRUE);
  gst_rtsp_media_mapping_add_factory (mapping, "/test", factory);
  g_object_unref (mapping);
  gst_rtsp_server_attach (server, NULL);
  g_main_loop_run (loop);

  return 0;
} 
```

我遇到了像[这个问题](https://stackoverflow.com/questions/7143581/gst-rtsp-server-programming)一样的错误，

> 在函数“主”中：
> 
> test-launch01.c:(.text+0x64): 未定义的引用
> 
> `gst_rtsp_server_new' test-launch01.c:(.text+0x74): 未定义
> 
> 参考`gst_rtsp_server_get_media_mapping'
> 
> test-launch01.c:(.text+0x7d): 未定义的引用
> 
> `gst_rtsp_media_factory_new' test-launch01.c:(.text+0x95): 未定义
> 
> 参考`gst_rtsp_media_factory_set_shared'
> 
> test-launch01.c:(.text+0xad): 未定义的引用
> 
> `gst_rtsp_media_factory_set_launch' test-launch01.c:(.text+0xc9):
> 
> 未定义对“gst_rtsp_media_mapping_add_factory”的引用
> 
> test-launch01.c:(.text+0xe9): 未定义的引用
> 
> `gst_rtsp_server_attach' collect2: ld 返回 1 个退出状态

我正在使用 Qt Creator，这是我的 .pro 文件：

> QT += 核心
> 
> QT -= gui
> 
> 目标 = gstreamer 配置 += 控制台配置 -= app_bundle
> 
> CONFIG+=link_pkgconfig
> 
> PKGCONFIG += gstreamer-0.10
> 
> 模板 = 应用程序
> 
> 来源 += main.cpp
> 
> INCLUDEPATH += /home/kato/ew-gst-sdk-linux-x86_64-2012.03-0/include/gstreamer-0.10
> 
> INCLUDEPATH += /usr/include/glib-2.0 INCLUDEPATH += /usr/lib/x86_64-linux-gnu/glib-2.0/include INCLUDEPATH += /usr/include/libxml2
> 
> LIBS += -L/home/kato/ew-gst-sdk-linux-x86_64-2012.03-0/lib \ -lgstreamer-0.10 \ -lgstrtsp-0.10

链接***`pkg-config gstreamer-rtsp-0.10 --libs`*** 正确吗？？

我得到了同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:57:52.467

我的 .pro 文件是：

```
 QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = Gestion_Flux_Video
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    streaming.cpp

HEADERS  += mainwindow.h \
    streaming.h

FORMS    += mainwindow.ui

INCLUDEPATH += /opt/gstreamer-sdk/include \
        /opt/gstreamer-sdk/include/gstreamer-0.10 \
        /opt/gstreamer-sdk/lib/glib-2.0/include \
        /opt/gstreamer-sdk/include/glib-2.0 \
        /opt/gstreamer-sdk/include/libxml2

LIBS += -L/opt/gstreamer-sdk/lib -lglib-2.0 \
                                -lgstreamer-0.10 \
                                -lgobject-2.0 \
                                -lgtk-x11-2.0 \
                                -lgstrtsp-0.10 \
                                -lgstapp-0.10 \
        -L/opt/gstreamer-sdk/include/gstreamer-0.10/gst/rtsp-server -lgstrtspserver-0.10 
```

编译对我来说很好。

# wpf - 当数据上下文更改时，如何防止滚动条丢失其状态？

> ID：14904255
> 
> 赞同：1
> 
> 时间：2013-02-15T22:14:48.457
> 
> 标签：wpf, binding, view, scrollbar, state

如果我有一个最终会以一种或另一种形式使用滚动条的数据模板，那么当数据上下文来回更改时，如何保留滚动条的位置？

我读过您通常将 UI 的状态存储在 ViewModel 中。这对于诸如选定项目或扩展类型状态之类的东西是有意义的，但我不确定如何将它应用于滚动条状态。

我已经在下面发布了我的意思的示例。当您选择一个选项卡并移动滚动条时，然后选择另一个选项卡并移动其滚动条。返回第一个选项卡后，滚动条已移动。

我相信这是由于视图被共享，所以它保留了从前一个视图滚动的百分比？

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <TabControl ItemsSource="{Binding Data}">

        <TabControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Count}"/>
            </DataTemplate>
        </TabControl.ItemTemplate>

        <TabControl.ContentTemplate>
            <DataTemplate>
                <ListBox ItemsSource="{Binding}"/>
            </DataTemplate>
        </TabControl.ContentTemplate>
    </TabControl>
</Window>

namespace WpfApplication13
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Data = new List<string[]>();

            for (int i = 1; i < 10; ++i)
            {
                string[] strings = new string[i * 10];
                for (int j = 0; j < i * 10; ++j)
                {
                    strings[j] = new string('z', 100);
                }

                Data.Add(strings);
            }

            DataContext = this;
        }

        public List<string[]> Data
        {
            get;
            set;
        }
    }
} 
```

编辑：我注意到一些控件有一个“进入视图”选项，我猜它可以用来向后滚动，但是这需要实际选择一些东西，但情况并非总是如此

# laravel - Laravel4 API 与捆绑包

> ID：14904256
> 
> 赞同：1
> 
> 时间：2013-02-15T22:15:05.070
> 
> 标签：laravel, laravel-4

所以我使用 Laravel 4 来编写一个 Web 应用程序。这个 Web 应用程序也有一个 API。如果我使用 Laravel 3，我会简单地创建一个包。我在 Laravel 4 中做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T09:02:10.920

您可以创建一个包，如果您遵循文档，这并不难。[http://four.laravel.com/docs/packages](http://four.laravel.com/docs/packages)

# neo4j - 根据相关节点的属性过滤

> ID：14904258
> 
> 赞同：2
> 
> 时间：2013-02-15T22:15:11.943
> 
> 标签：neo4j, cypher

我有一种情况，我试图过滤掉与具有特定属性的节点无关的节点。例如，假设我有一个查询可以让我找到所有的人，但我想过滤到只有那些有棕色皮毛的狗的人。我*想做*的是这样的：

```
//For simplicity's sake, assume nodes 1,2,3 are the potentials I care about
START person=node(1,2,3)  
WHERE person-[:has]->(dog{furColor:"Brown"})  // <-- would be nice to use
RETURN person 
```

但是，这不起作用。解析器明确告诉我：

> MATCH 中不允许使用模式元素的属性。

（有趣的是，当我使用“WHERE”时，它引用了“MATCH”，但无论如何）。所以你不能以这种方式引用节点的属性。我还有什么其他选择？我能够通过添加 MATCH 子句来模拟我想要的东西......

```
START person=node(1,2,3) 
MATCH person-[:has]->dog
WHERE dog.furColor! = "Brown"
RETURN person 
```

...但是对我来说，我必须匹配其他路径然后再次将它们过滤掉，这似乎很奇怪且效率低下。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:10:45.767

恐怕没有其他方法可以`WHERE`在图形设计中使用该子句。

但考虑到您可以更改并且您确实想要更改，您可以使属性成为节点`furColor`的关系类型。`Brown`因此，您可以为所有颜色创建额外的节点，而不是将信息保留在属性中，而不仅仅是将狗节点与 furColor 类型的关系与这些颜色节点相关联。比，对于 MATCH 子句的查询会更快`MATCH person-[:has]->dog-[:furColor]->brown`（当您还在 START 阶段指定棕色节点时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:33:12.030

你可以试试这个，但要根据比赛表现来衡量它。

where 中的路径表达式返回路径集合，您可以使用集合函数`extract`和集合谓词对该路径集合进行操作。`all`

```
START person=node(1,2,3)  
WHERE ALL(dog in extract( path in person-[:has]->() : last(path) // last node of path
           WHERE dog.furColor! = "Brown"
         )
RETURN person 
```

# javascript - jQuery选择一种类型的所有div并附加事件

> ID：14904260
> 
> 赞同：-1
> 
> 时间：2013-02-15T22:15:14.923
> 
> 标签：javascript, jquery

```
 $('#tags').each(function(i,element){

            $(this).on('click',function(){

              $('.otherdiv').toggle();

        }); 
```

如何将点击处理程序附加到所有带有标签 ID 的 div？出于某种原因，这仅针对第一个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T22:17:12.617

不需要每个，只需执行以下操作：

```
$('.tags').on('click',function(){
    $('.otherdiv').toggle();
}); 
```

并对`tags`每个 div 应用一个类，你不应该有多个具有相同 id 的 div。

然后，这会将点击绑定应用到具有`tags`类的所有 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:17:34.083

您不应拥有多个 ID。

改用类。

```
$(".tags").click(function() {
       $('.otherdiv').toggle();
}); 
```

将 css 类归因于您想要的每个元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:17:29.437

ID 是唯一的。您不应该有超过 1 个具有任何给定 ID 的元素。如其他答案所述，请改用`class`选择多个元素。

# ms-access - 是否应该在每台客户端机器上设置对 DAO 的引用？

> ID：14904262
> 
> 赞同：1
> 
> 时间：2013-02-15T22:15:29.230
> 
> 标签：ms-access, reference, dao, frontend

我有 Access DB，前端在客户端机器上，后端在服务器上。

我从来不需要使用对 DAO 的引用，但这次我将不得不使用它来让 ConcatRelated 模块工作。我将不得不部署更新的前端，但我不确定我在我的机器上设置的引用是否适用于其他机器。

我对此没有任何经验，我不知道是否必须在每台机器上设置参考（其中许多使用不同版本的 Access：2003、2007、2010），否则它将直接从前面获取信息-结尾。

如果必须在任何地方设置它，很可能我将不得不找到另一个没有 DAO 的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T17:55:27.287

我在一些用户使用 XP 而一些用户使用 Win7 的环境中工作。一些使用 Access 2003 一些使用 Access 2010。在部署我的数据库时，损坏的引用是一个常见问题。

我的解决方法是使用 CreateObject 而不是通过引用来声明我的对象。

以下示例是您在引用中有 ADO 时将使用的示例。

```
Dim rst as new ADODB.Recordset 
```

以下示例说明如何在没有引用的情况下使用 ADO 记录集：

```
Dim rst as Object
Set rst = CreateObject("ADODB.Recordset") 
```

这让操作系统可以确定正确的库。您的代码完成不适用于此方法 - 因此编写代码、测试它然后执行 CreateObject 技巧可能更容易。

# vb.net - winforms webbrowser 控件实现 IAuthenticate 导航失败，并尝试读取或写入受保护的内存

> ID：14904264
> 
> 赞同：1
> 
> 时间：2013-02-15T22:15:46.750
> 
> 标签：vb.net, winforms, webbrowser-control

我有一个显示图像的应用程序，我们将它们移动到不同的服务器。在现有服务器上，他们可以查看任意数量的图像，并且不会要求他们再次登录。在新服务器上，即使浏览器控件有他们的凭据，它也会要求他们在查看图像之前登录。如果我将 Web 浏览器的 absoluteUri 属性的值粘贴到 IE 中，它会在不要求登录的情况下加载图像。

我正在尝试通过实现 IAuthenticate 将用户 ID 和密码凭据传递给表单上的 webBrowser 控件，并且我在网上找到的所有示例都在 C# 中。在试图缩小问题所在的范围时，我已经注释掉了 IAuthenticate 实现，因为它在调用实现之前就出现了错误。现在我有：

```
Imports System.Runtime.InteropServices

<ComImport(),
Guid("00000112-0000-0000-C000-000000000046"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown)>
Public Interface IOleObject
    Sub SetClientSite(pClientSite As IOleClientSite)
    Sub GetClientSite(ppClientSite As IOleClientSite)
    Sub SetHostNames(szContainerApp As Object, szContainerObj As Object)
    Sub Close(dwSaveOption As UInteger)
    Sub SetMoniker(dwWhichMoniker As UInteger, pmk As Object)
    Sub GetMoniker(dwAssign As UInteger, dwWhichMoniker As UInteger, ppmk As Object)
    Sub InitFromData(pDataObject As IDataObject, fCreation As Boolean, dwReserved As UInteger)
    Sub GetClipboardData(dwReserved As UInteger, ppDataObject As IDataObject)
    Sub DoVerb(iVerb As UInteger, lpmsg As UInteger, pActiveSite As Object, lindex As UInteger, hwndParent As UInteger, lprcPosRect As UInteger)
    Sub EnumVerbs(ppEnumOleVerb As Object)
    Sub Update()
    Sub IsUpToDate()
    Sub GetUserClassID(pClsid As UInteger)
    Sub GetUserType(dwFormOfType As UInteger, pszUserType As UInteger)
    Sub SetExtent(dwDrawAspect As UInteger, psizel As UInteger)
    Sub GetExtent(dwDrawAspect As UInteger, psizel As UInteger)
    Sub Advise(pAdvSink As Object, pdwConnection As UInteger)
    Sub Unadvise(dwConnection As UInteger)
    Sub EnumAdvise(ppenumAdvise As Object)
    Sub GetMiscStatus(dwAspect As UInteger, pdwStatus As UInteger)
    Sub SetColorScheme(pLogpal As Object)
End Interface

<ComImport(),
Guid("00000118-0000-0000-C000-000000000046"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown)>
Public Interface IOleClientSite
    Sub SaveObject()
    Sub GetMoniker(ByVal dwAssign As Integer, ByVal dwWhichMoniker As Integer, ByRef ppmk As Object)
    Sub GetContainer(ByRef ppContainer As Object)
    Sub ShowObject()
    Sub OnShowWindow(ByVal fShow As Boolean)
    Sub RequestNewObjectLayout()
End Interface

<ComImport(),
Guid("6d5140c1-7436-11ce-8034-00aa006009fa"),
InterfaceType(ComInterfaceType.InterfaceIsIUnknown)>
Public Interface IServiceProvider
    <PreserveSig()>
    Sub QueryService(ByRef guidService As Guid, ByRef riid As Guid,
          <Out(), MarshalAs(UnmanagedType.Interface)> ByRef ppvObject As Object)
End Interface

<ComImport> _
<Guid("79EAC9D0-BAF9-11CE-8C82-00AA004BA90B")> _
<InterfaceType(ComInterfaceType.InterfaceIsIUnknown)>
Public Interface IAuthenticate
    '<MethodImpl(MethodImplOptions.InternalCall, MethodCodeType = MethodCodeType.Runtime)
Sub Authenticate(phwnd As IntPtr,
<MarshalAs(UnmanagedType.LPWStr)> ByRef pszUsername As String,
<MarshalAs(UnmanagedType.LPWStr)> ByRef pszPassword As String)
End Interface

Public Class frmIE
    Implements IOleClientSite
    Implements IServiceProvider

    Public Shared IID_IAuthenticate As New Guid("79eac9d0-baf9-11ce-8c82-00aa004ba90b")

    Private _user As String
    Private _pwd As String

    Friend WriteOnly Property url(user As String, pwd As String) As System.Uri
        Set(ByVal value As System.Uri)
            Dim oc As IOleObject

            webIE.Navigate("about:blank")       ' iAuthenticate not always called on first run
            oc = DirectCast(webIE.ActiveXInstance, IOleObject)
            ' if I comment the following line out, it loads the image ok and asks for credentials
            oc.SetClientSite(DirectCast(Me, IOleClientSite))   ' instead of trycast, so can see error: An unhandled exception of type 'System.ExecutionEngineException' occurred in System.Windows.Forms.dll

            _user = user
            _pwd = pwd
            webIE.Navigate(value)
        End Set
    End Property

    Public Sub GetContainer(ByRef ppContainer As Object) Implements IOleClientSite.GetContainer
        ppContainer = Me   ' doesn't reach stop placed here
    End Sub

    Public Sub GetMoniker(dwAssign As Integer, dwWhichMoniker As Integer, ByRef ppmk As Object) Implements IOleClientSite.GetMoniker
        Dim i As Integer
        i = 0           ' doesn't reach stop placed here
    End Sub
    Public Sub OnShowWindow(fShow As Boolean) Implements IOleClientSite.OnShowWindow
        Dim i As Integer
        i = 0          ' doesn't reach stop placed here
    End Sub
    Public Sub RequestNewObjectLayout() Implements IOleClientSite.RequestNewObjectLayout
        Dim i As Integer
        i = 0           ' doesn't reach stop placed here
    End Sub
    Public Sub SaveObject() Implements IOleClientSite.SaveObject
        Dim i As Integer
        i = 0          ' doesn't reach stop placed here
    End Sub
    Public Sub ShowObject() Implements IOleClientSite.ShowObject
        Dim i As Integer
        i = 0         ' doesn't reach stop placed here
    End Sub

    Public Sub QueryService(ByRef guidService As System.Guid, ByRef riid As System.Guid,
                             <Out(), MarshalAs(UnmanagedType.Interface)> ByRef ppvObject As Object) Implements IServiceProvider.QueryService
        If guidService.CompareTo(IID_IAuthenticate) = 0 AndAlso riid.CompareTo(IID_IAuthenticate) = 0 Then
            'ppvObject = Marshal.GetComInterfaceForObject(Me, GetType(IAuthenticate))   ' doesn't reach stop placed here
        Else
            ppvObject = IntPtr.Zero        ' does reach stop placed here, 2x
            ' 1st guid is 4c96be40-915c-11cf-99d3-00aa004ae837 = SID_SToplevelBrowser 
            ' 1st riid is 02ba3b52-0547-11d1-b833-00c04fc9b31f
            ' 2nd guid is SID_SToplevelBrowser
            ' 2nd riid is 6d5140c1-7436-11ce-8034-00aa006009fa
        End If
    End Sub
End Class 
```

但它给了我一个在线错误

```
oc.SetClientSite(DirectCast(Me, IOleClientSite)) 
```

说“System.Windows.Forms.dll 中发生'System.ExecutionEngineException' 类型的未处理异常”这看起来像是一个可能有很多原因的一般错误。

我假设我错过了一些声明或使用细节，但我不知道在哪里或者这是否真的是问题所在。

所有帮助表示赞赏，

-贝丝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:40:32.663

我们最终向 webBrowser 对象的 navigate 方法传递了一个字符串，而不是一个新的 system.uri 对象，这为我们修复了它。

# mysql - MySQL - 授予数据库上所有用户的访问权限

> ID：14904266
> 
> 赞同：2
> 
> 时间：2013-02-15T22:15:52.410
> 
> 标签：mysql, database, privileges

我创建了一个包含表和函数的数据库，我希望每个用户都可以访问。然后我使用此命令向所有用户授予所有权限：

```
GRANT SELECT,INSERT,UPDATE,DELETE,REFERENCES,INDEX,CREATE TEMPORARY TABLES,LOCK TABLES,EXECUTE ON  `dbname`.* TO ''@'localhost' WITH GRANT OPTION; 
```

我可以访问其他用户的表，但是当我执行一个函数时，我得到了这个错误：

```
execute command denied to user 'myuser'@'localhost' for routine 'dbname.functionname' 
```

该功能适用​​于拥有自己特权的 root 用户。

如何让所有用户执行我的功能？

# c++ - 为什么这个 C++ 代码不能编译？

> ID：14904267
> 
> 赞同：1
> 
> 时间：2013-02-15T22:15:54.837
> 
> 标签：c++, gtk, header-files

我正在使用 GTK+，由于某种原因，我的屏幕捕获功能无法编译并出现以下错误：

> main.cpp:17:97：错误：“gdk_pixbuf_get_from_drawable”未在此范围内声明

gdk_pixbuf_get_from_drawable 在哪个 .H 文件中声明？下面是代码：

```
#include <libCrossLibs.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <gdk/gdk.h>
#include <gtk/gtk.h>

ILibraryInstance* inst;

GdkPixbuf* get_screenshot() {
    GdkPixbuf* screenshot;
    GdkWindow* rootWindow;
    gint x_orig, y_orig;
    rootWindow = gdk_get_default_root_window();
    gint width, height;
    width = gdk_window_get_width(rootWindow);
    height = gdk_window_get_height(rootWindow);
    gdk_window_get_origin(rootWindow,&x_orig,&y_orig);

    screenshot =  gdk_pixbuf_get_from_drawable(NULL, rootWindow, 
        NULL, x_orig, y_orig, 0, 0, width, height);

    return screenshot;
}

int main(void) {
    inst = InitializeLibraries();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:22:10.613

编译器认为该函数不`gdk_pixbuf_get_from_drawable`存在。要么你拼错了，要么你错过了一个`#include`，或者你的平台不提供那个功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:32:13.630

显然 gdk_pixbuf_get_from_drawable 已被 gdk_pixbuf_get_from_window 取代。来源：[GNOME 文档](http://developer.gnome.org/gdk3/stable/gdk3-Pixbufs.html#gdk-pixbuf-get-from-window)

# c# - C# 单元测试嵌套函数

> ID：14904269
> 
> 赞同：0
> 
> 时间：2013-02-15T22:16:03.523
> 
> 标签：c#, unit-testing

我有一个从不同类调用另一个方法的方法。

我应该如何为这些方法编写单元测试？我应该为这两种方法编写不同的测试用例还是应该只为`LoadService.InitiateManualRun`功能编写测试用例？

一个例子会很有帮助。

```
class LoadService
{    
    public StagingLoadStatistics InitiateManualRun(string currentUser, string startDate, string endDate)
    {
        var response = _repository.InitiateManualRun(currentUser, startDate, endDate);

        return response;
    }
}

class LoadRepository
{     
    public StagingLoadStatistics InitiateManualRun(string currentUser, string startDate, string endDate)
    {
        _webServiceObject.InitiateManualRun(currentUser, startDate, endDate);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:51:24.350

您的代码示例并没有从您的额外抽象级别中显示出太多附加值，但我承认您可能为了简洁起见而遗漏了一些细节。

如果我正在测试一个调用另一个类函数的函数，我主要关心的是外部函数为内部函数提供了预期的输入，或者外部函数使用内部函数的输出执行了正确的操作，或者两者兼而有之。*测试内部函数不是测试外部函数的关注点，我会自己测试那个类和函数。*

我将使用模拟/存根**隔离**我的外部函数，以确保我正在测试我认为我正在测试的内容，并且任何失败都将是*该*函数做错事的结果，而不是某些嵌套依赖项。我对嵌套依赖项的测试将向我揭示该区域中的错误。

鉴于您的原始代码，我将公开我的依赖项

```
class LoadService
{    
    ILoadRepository _repository;

    public LoadService(ILoadRepository repository)
    {
         _repository = repository;
    }

    public StagingLoadStatistics InitiateManualRun(string currentUser, string startDate, string endDate)
    {
        var response = _repository.InitiateManualRun(currentUser, startDate, endDate);
        return response;
    }
} 
```

根据这段代码，我的担忧很简单（当然，您的实际代码可能会有所不同）。看来我只需要验证我的参数是否正确传递给我的依赖项，然后返回依赖项的结果。这是一个非常容易编写的测试，但是您需要编写依赖项的假实现，或者使用模拟库。但我的测试可能如下所示：

```
var fakeRepository = new FakeRepository();
var expectedArguments = Tuple.Create(someUser, someStartDate, someEndDate);
var expectedOutput = new StagingLoadStatistics();
fakeRepository.SetOutputForExpectedArguments(expectedArguments, expectedOutput);

var service = new LoadService(fakeRepository);
var result = service.InitiateManualRun(someUser, someStartDate, someEndDate);
Assert.AreSame(expectedOutput, result); 
```

你的赝品可以有多种口味，你也可以自己制作或使用图书馆。当我自己滚动时，我通常只在假货中使用一个支持字典来存储期望和结果，然后在满足期望时返回结果。如果适用，这允许存储多个期望/结果对。但是，如果您选择朝着这个方向进行高度隔离的测试，那么您将需要研究围绕虚假实现的所有选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:17:42.747

您应该为该`LoadService.InitiateManualRun`方法编写单元测试。

这将有助于在更高级别验证行为并进行更灵活的测试，如果您更改嵌套方法的签名或其他实现细节，这些测试不会中断。您的单元测试应该验证程序的用例或行为。

话虽如此，在您共享的代码中只有一个执行分支，所以我不确定您的单元测试会验证什么。

# jquery - 在使用百分比时阻止 CSS 调整大小

> ID：14904271
> 
> 赞同：0
> 
> 时间：2013-02-15T22:16:05.530
> 
> 标签：jquery, html, css, layout, space

当我在 CSS 中使用百分比时，如何让我的页面不调整大小？我还有其他方法可以做到这一点吗？当页面调整大小时，Divs 相互碰撞，图片被压扁。这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <link rel="StyleSheet" href="StyleSheets/StyleSheet.css" />
    <title>TeraShare</title>
    <script type="text/javascript" src="JQuery/JQuery.js"></script>
    <script type="text/javascript" src="Scripts/JavaScript.js"></script>
</head>
<body>
    <div id="Container">
        <div id="Menu">
            <div id="Logo"><a href=""><img src="Pictures/Logo.png"></a></div>
            <div id="Buttons">
                <a href="LogIn/"><div class="Button">LogIn</div></a>
                <a href="Register/"><div class="Button">Register</div></a>
            </div>
        </div>
        <div id="Wrap">
            <div id="Content">
                <div id="Slide">
                    <div><img src="Pictures/Cloud1.jpg" class="Slide"></div>
                    <div><img src="Pictures/Cloud2.jpg" class="Slide"></div>
                    <div><img src="Pictures/Cloud3.jpg" class="Slide"></div>
                </div>
            </div>
            <div id="Footer">
                <table>
                    <tr><td><h4 class="Text">Support</h4></td><td class="TD"><h4 class="Text">Legal</h4></td></tr>
                    <tr><td><a href="Contact.php" class="Link">Contact Us</a></td><td class="TD"><a href="Terms.html" class="Link">Terms of Service</a></td></tr>
                    <tr><td></td><td class="TD"><a href="Privacy.html" class="Link">Privacy Policy</a></td></tr>
                </table>
            </div>
        </div>
    </div>
</body> 
```

CSS：

```
 body
{
    padding:0px;
    margin:0px;
    overflow-x:hidden;
    word-wrap:break-word; 
}

img
{
    border:none;    
}

#Menu
{
    position:fixed;
    top:0px;
    left:0px;
    width:100%;
    height:49px;
    border-bottom:rgba(82,82,82,1);
    box-shadow:0 2px 3px rgba(182, 182, 182, 0.75);
    background-color:rgb(68, 68, 68);
    z-index:100;
}

#Container
{
    padding:0px;
    margin:0px; 
}

#Content
{
    width:100%;
    height:auto;
    background:url(../Pictures/Grid.gif);
}

#Footer
{
    box-shadow: inset 0 20px 20px -20px #CCC;
    box-sizing:border-box;
    border-top:2px solid #666;
    width:100%;
    height:auto;
    padding:20px;
}

#Wrap
{
    position:absolute;
    top:50px;
    left:0px;
    width:100%;
    height:auto;
}

#Buttons
{
    position:absolute;
    right:20px;
}

#Logo
{
    position:absolute;
    top:0px;
    left:20px;
}

.Slide
{
    width:100%;
    height:100%;
    margin:0px;
    padding:0px;
    display:block;
}

.Button
{
    margin-left:5px;
    float:left;
    line-height:20px;
    padding:10px;
    color:#FFF;
    width:auto;
    height:20px;
    background-color:#347EBA;
    font-family:arial;
    font-size:14px;
}

.Button:hover
{
    cursor:pointer;
    background-color:#347EDA;   
}

.Link
{
    color:#666;
    text-decoration:none;
    font-size:13px;
    font-family:Arial;
    font-weight:bold;
}

.Link:hover
{
    text-decoration:underline;  
}

.Text
{
    font-family:Arial;
    font-weight:bold;
    color:#333; 
}

.TD
{
    padding-left:30px;
    padding-bottom:5px; 
} 
```

查询：

```
 $(document).ready(function()
{
    var Height = $(document).height();
    var Width = $(document).width();
    var BHeight = $('#Buttons').height();

    $('#Container').css({"height" : Height, "width" : Width});
    $('#MWrap').css({"left" : Width/2 - 956/2});
    $('#Buttons').css({"top" : 50/2 - BHeight/2});
    $('#Content').css({"height" : Height - 50});

    $("#Slide > div:gt(0)").hide();

    setInterval(function() { 
      $('#Slide > div:first')
        .fadeOut(1000)
        .next()
        .fadeIn(1000)
        .end()
        .appendTo('#Slide');
    },  5000);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:19:18.897

百分比是流动的。阻止它们重新调整大小的唯一方法是将`min-width`或`max-width`特定像素值设置为相关元素或其父容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:21:11.967

一个快速的解决方法可能是将 的宽度设置为`body`静态宽度。

```
body{
    width: 1000px;
    margin: 0 auto;
    position:relative;
} 
```

这样，您的百分比将基于静态值

# lambda - 跟踪 lambda 表达式求值

> ID：14904272
> 
> 赞同：3
> 
> 时间：2013-02-15T22:16:12.067
> 
> 标签：lambda, scheme, sicp, operator-precedence, interpreted-language

我在 Scheme 中遇到了一些看起来很棘手的 lambda 表达式，我想看看解释器是如何评估它们的。

我希望 Scheme 解释器打印所有评估步骤，如[SICP 第 1.1.5 节“过程应用的替代模型”](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-10.html#%_sec_1.1.5)中所示。

我正在寻找使用任何方案解释器的解决方案。我已经尝试过[Racket 的跟踪](http://docs.racket-lang.org/reference/debugging.html#%28mod-path._racket%2Ftrace%29)，但它只跟踪过程调用，而不是每个表达式。

**激励例子**

[鉴于SICP 练习 2.6](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-14.html#%_thm_2.6)中教会数字的定义：

```
(define zero (lambda (f) (lambda (x) x)))

(define (add-1 n)
  (lambda (f) (lambda (x) (f ((n f) x))))) 
```

和任务：

> 直接定义`one`and `two`（不是根据`zero`and `add-1`）。

我希望检查我的定义，`one`并`two`对照评估`(add-1 zero)`和的结果`(add-1 (add-1 zero))`。

这就是我希望 Scheme 解释器打印出来的内容：

```
> (add-1 zero)
(add-1 (lambda (f) (lambda (x) x)))
(lambda (f) (lambda (x) (f (((lambda (f) (lambda (x) x)) f) x))))
(lambda (f) (lambda (x) (f ((lambda (x) x) x))))
(lambda (f) (lambda (x) (f x)))
> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:40:32.537

试试 Racket 的内置步进器，这个[答案](https://stackoverflow.com/a/14657535/201359)中有一些操作方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:11:23.473

使用类似组合器的方程，这很容易（[我相信](http://books.google.com/books?isbn=0521277248)[曾经被称为*应用风格*](http://books.google.com/books?isbn=0521277248)）

```
zero f x = x
add1 n f x = f (n f x)

one f x = add1 zero f x = f (zero f x) = f x         **(1)**
two f x = add1 one f x = f (one f x) = f (f x)       **(2)** 
```

使用组合器，一切都被柯里化了：`a b c d`实际上是`(((a b) c) d)`并且`a b c = d`等价于`(define a (lambda (b) (lambda (c) d)))`.

现在很清楚`f`and的预期含义是什么`x`：`x`代表“零”数据元素`f`的具体实现，并且代表“后继”操作的具体实现，与给定的“零”具体实现兼容。`f`并且`x`应该真正以助记符命名：

```
zero s z = z
add1 n s z = s (n s z) 
```

看起来不再那么棘手了，语法更方便，对吧？`lambda`无论如何，这本身就是一个印刷事故。现在，

```
one s z = s z         ; e.g. (1+ 0)
two s z = s (s z)     ; e.g. (1+ (1+ 0)) 
```

* * *

根据[SICP 1.1.3 组合评估](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-10.html#%_sec_1.1.3)程序跟踪步骤，

*   要评估组合，请执行以下操作：
    1.  评估组合的子表达式。
    2.  将作为最左边子表达式（运算符）的值的过程应用于作为其他子表达式（操作数）的值的参数。

[1.1.5 程序应用](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-10.html#%_sec_1.1.5)的替代模型

*   要将复合过程应用于参数，请评估过程的主体，并将每个形式参数替换为相应的参数。

我们得到

```
add1 zero = 
  ( n f x => f (n f x) ) ( f x => x ) =
  ( f x => f ( ( f x => x ) f x ) ) 
```

在这里替换实际上停止了，因为结果是一个简单的 lambda 表达式，即不是组合。只有当再提供两个参数时，才会完整地进行评估：

```
add1 zero s z = 
  ( n f x => f (n f x) ) ( f x => x ) s z =
  ( f x => f ( ( f x => x ) f x ) ) s z =
  ( x => {s} ( ( f x => x ) {s} x ) ) z =    ; {s} is definition-of s
  {s} ( ( f x => x ) {s} {z} ) =             ; {z} is definition-of z
  ; must find the value of the operand in combination
  {s} ( ( x => x ) {z} ) = 
  {s} {z} 
```

然后根据 和 的实际定义进行`s`计算`z`。这就是上面显示的等式**(1)用较短的符号表示的内容。**

# android - Android边距开始/结束和右/左有什么区别？

> ID：14904273
> 
> 赞同：146
> 
> 时间：2013-02-15T22:16:32.417
> 
> 标签：android, android-layout

Android边距开始和右边（或边距结束和左边）有什么区别？

这是一个微不足道的问题，但我似乎无法从[文档](http://developer.android.com/reference/android/view/ViewGroup.MarginLayoutParams.html)中了解视图开始/结束和左/右之间的区别。可能是我只是不明白某些东西，但我根本无法在这方面取得任何进展。

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-02-15T22:54:10.350

对于从左到右的流程，start=left，end=right。

对于从右到左的流程，start=right，end=left。

作为[Android 4.2 对 RTL 布局支持的](http://developer.android.com/about/versions/android-4.2.html#RTL)一部分，API 级别 17 中添加了“开始”和“结束”概念。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2018-06-14T04:22:54.207

Android 支持来自 API 17+ 即 Android 4.2 (Jelly Bean) 的 RTL 布局。当我们使我们的布局同时支持 RTL 和 LTR 时，我们不能使用 layout_marginleft 和 layout_marginRight 我们使用 layout_marginstart 和 layout_maginend 。

[![图片](../Images/46f62f8db534b892e545324b794239dc.png)](https://i.stack.imgur.com/kbV1I.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T15:29:46.127

这是一个有用的答案。我正在考虑它并且阅读文档无法得到答案。所以左边的边距是英语和类似语言的边距开始

# c# - 如何复制项目？

> ID：14904276
> 
> 赞同：0
> 
> 时间：2013-02-15T22:16:39.203
> 
> 标签：c#, interop, copy, ms-project

我需要一个项目的副本，但我没有找到类似`Clone()`或其他的方法。这是我的代码：

```
 private void Change(ArrayList SecuenciasIniciales, Project pj)
        {
            Project pjTemp = pj; //not make a copy else the same reference   

            for (int i = 0; i < SecuenciasIniciales.Count;i++ )
            {
                int[] secuencia = (int[])SecuenciasIniciales[i];
                ChangeProjectTemp(secuencia,ref pjTemp,pj);

                pjTemp.Application.LevelingOptions(false, true, true, PjLevelOrder.pjLevelPriority, true, Type.Missing, Type.Missing, PjLevelPeriodBasis.pjDayByDay, true, false, Type.Missing);
                pjTemp.Application.LevelNow(true);

                if (Directory.Exists(Server.MapPath("") + "\\sample.mpp"))
                {
                    System.IO.File.Delete(Server.MapPath("") + "\\sample.mpp");
                }

                pjTemp.Application.FileSaveAs(Server.MapPath("") + "\\sample.mpp", PjFileFormat.pjMPP, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

                pjTemp.Application.FileSave();
                pjTemp.Application.DocClose();
                pjTemp.Application.Quit(PjSaveType.pjDoNotSave);

              }
} 
```

我不想要那种`pj`改变。解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:21:30.410

我相信你正在寻找这个

[C# 中的深度克隆对象](https://stackoverflow.com/questions/78536/deep-cloning-objects-in-c-sharp)

这里的这个链接也可能有用

[深克隆与浅克隆](http://developerscon.blogspot.com/2008/06/c-object-clone-wars.html)

此代码来自我评论中的链接 - 为了您的缘故，已更改为 Project。

一个可能对您有用的浅拷贝示例：

```
class Project : ICloneable
{
   //rest of your class
   int blah;
   string blah2;

   public Project()
   {

   }
   //rest of your class

   public object Clone()
   {
      return this.MemberwiseClone();      // call clone method
   }
} 
```

然后在您展示的代码中执行此操作-

```
 Project pjTemp = (Project)pj.Clone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:32:48.637

如何制作项目的副本有两种可能的选择，它们都可以解决不同的任务。

**任务 1：**由于 COM 调用速度较慢，您想要制作一个项目的副本以对项目执行更快的分析。

**解决方案：**通过 MS Project COM 接口阅读所有您想了解的项目信息，将数据保存到您自己的数据结构中，然后对数据结构做任何您想做的事情。该任务的替代解决方案可能是将项目保存为 XML 并将 XML 反序列化为数据结构。

**任务 2：**您想要制作项目的副本以使用它，就像使用 MS Project API 的新项目一样。例如，您的初始项目是一个模板。

**解决方案：**使用`Application.FileSaveAs`并稍后使用新创建的文件。

重要的是要了解您使用 API 到 MS Project 来操作您的项目，但 MS Project 不是 .NET 应用程序，并且没有任何类似的 .NET 功能`IClonable`可供`Object.MemberwiseClone`您使用。你只能告诉 MS Project 要做什么，它会以某种方式做到这一点，但没人知道怎么做。

# android - MapFragment 错误 - CameraUpdateFactory 未初始化

> ID：14904277
> 
> 赞同：2
> 
> 时间：2013-02-15T22:16:40.117
> 
> 标签：android, android-fragments

尝试为手机创建 ListFragment --> MapFragment 活动。MapFragment 代码如下：

```
public class MapFragment extends SupportMapFragment {
    private GoogleMap mMap;

    @Override
    public void onCreate(Bundle bundle){
        super.onCreate(bundle);

        try {
            MapsInitializer.initialize(this.getActivity());
        } catch (GooglePlayServicesNotAvailableException e){ 
            e.printStackTrace();
        }

        setRetainInstance(true);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);
        if(getMap() != null){
            Log.v(TAG, "Map ready for use!");
            mMap = getMap();
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View root = super.onCreateView(inflater, container, savedInstanceState);
        return root;
    }

    public void animateTo(double lat, double lng){
            Log.d(TAG, "mMap animating...");
            LatLng mCurrentPosition = new LatLng(lat, lng);
            mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(mCurrentPosition, 16));
    }
} 
```

但我收到以下错误---

```
02-15 17:12:53.232: E/AndroidRuntime(6913): FATAL EXCEPTION: main
02-15 17:12:53.232: E/AndroidRuntime(6913): java.lang.NullPointerException: CameraUpdateFactory is not initialized
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.google.android.gms.internal.at.a(Unknown Source)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.google.android.gms.maps.CameraUpdateFactory.J(Unknown Source)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.google.android.gms.maps.CameraUpdateFactory.newLatLngZoom(Unknown Source)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.test.app.MapFragment.animateTo(MapFragment.java:113)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.test.app.MapActivity.onListItemClick(MapActivity.java:270)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.test.app.SimpleListFragment.onListItemClick(SimpleListFragment.java:65)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.os.Handler.handleCallback(Handler.java:725)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.os.Looper.loop(Looper.java:137)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at java.lang.reflect.Method.invokeNative(Native Method)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at java.lang.reflect.Method.invoke(Method.java:511)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-15 17:12:53.232: E/AndroidRuntime(6913):     at dalvik.system.NativeStart.main(Native Method) 
```

我认为调用 MapInitializer 可以解决它，但似乎没有奏效。这与调用`getMap()`方法的时机有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:43:42.010

在这里改变了实现。使用了一个新布局，该布局在 FrameLayout 中同时具有 listFragment 和 MapFragment 的片段类。然后通过他们的 FragmentIds 找到这些，然后使用显示/隐藏与添加到后台堆栈以使地图/列表显示给用户。我不确定使用显示/隐藏的两组片段会产生什么开销，但似乎在 Nexus4 上工作得很好:)

此处提供代码： [https ://github.com/codedawg82/AndroidFragments/](https://github.com/codedawg82/AndroidFragments/)

# c - C：如果语句不起作用

> ID：14904285
> 
> 赞同：1
> 
> 时间：2013-02-15T22:17:11.593
> 
> 标签：c, if-statement, divide-by-zero

```
if (num2 != 0)
    printf("\nInput 3 / Input 2 (int)    %12d", divide);
else if (num2 == 0)
    printf("\nInput 3 / Input 2 (int)    DIV/0");

if (flt4 != 0)
    printf("\nInput 2 / Input 1 (double) %16.3f", divide2);
else if (flt4 == 0)
    printf("\nInput 2 / Input 1 (double)    DIV/0"); 
```

当我将 num2 或 flt4 设置为 0 时，程序崩溃。否则它工作得很好。我正在查看有关 if/else 语句的阅读内容，我相信我的格式是正确的，但显然存在错误。

谢谢。

编辑：

我定义除法的代码是：

```
void calculate (int num1, int num2, int num3, float flt4,int* sum,int* mult,
            int* mod,int* divide,double* mult2,double* divide2)
{

*sum = num1 + flt4;
*mult = num1 * num3;
*mod = (num1/10)%10;
*divide= num3 / num2;
*mult2= num1 * flt4;
*divide2= (double)num2 / num1;
return;
} 
```

那么我的问题是，我如何构造这个程序，所以如果它除以零，我可以在打印函数中显示它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T22:22:35.050

你很可能被零除。该`divide`变量在“if”之前设置，并且无论如何您都执行该操作。把它放在第一个'if'中，所以它会除以`num2`iff`num2`不是零。

编辑：它应该是这样的：

```
if (num2 != 0) {
    divide = something / num2;
    printf("\nInput 3 / Input 2 (int)    %12d", divide);
} 
```

# logging - Web 角色日志记录 - Nlog - 访问配置文件

> ID：14904288
> 
> 赞同：3
> 
> 时间：2013-02-15T22:17:20.847
> 
> 标签：logging, azure, nlog, azure-web-roles

在 Web 应用项目的早期，我决定使用 Nlog 作为我的日志记录解决方案，并且非常喜欢在我的代码中调用记录器类，然后在运行时决定记录什么和在哪里记录的想法。然后我们决定这个应用程序应该以 Web 角色的形式托管在 Windows Azure 中，以利用所有这些优惠。现在，我意识到 Nlog 不会像我预想的那样工作。以下是变更引发的问题：

*   它无法记录到标准日志文件夹中的文本文件，因为这些文件夹是只读的，即使它们不是，它们也会依赖于实例而不是持久的，因为实例和实例本地存储的方式是已配置，将在回收时消失。
*   因为这些配置文件是只读的，所以我无法利用 Nlog 最强大的功能，即在运行时决定如何配置输出的能力。

我找到了一些解决登录位置问题的方法。将目标配置为记录到 Azure 诊断表或角色的表存储。虽然这可能是我们必须这样做的方式，但它似乎非常有限，因为您似乎只能登录到单个表（角色的诊断或自定义表）。有人知道更好的解决方案吗？记录到 AzureSQL 数据库的成本太高。

另外，如果我想临时登录到数据库或 SMS、电子邮件等，如果我无法编辑配置文件，我该如何配置 Nlog。我知道您可以将信息存储在 ServiceConfiguration.cscfg 文件中，并且可以在运行时访问和编辑它，但是 AFAIK，这不是 Nlog 配置的选项。有没有办法为所有实例编辑已部署的 web.cfg 或 Nlog 配置文件？

由于这些限制，是否最好放弃使用 Nlog，并使用不同的、更兼容的日志记录方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:58:59.027

理查德，

对于第一个问题，您可以设置一个本地存储资源来存储日志文件。您可以将本地资源配置为在角色重新启动时不清除，这有助于您的日志存活足够长的时间以发挥作用。

我不认为将日志记录配置存储在 .cscfg 文件中是一个好方法，除非您有一个允许您一次更新所有配置的管理解决方案。更好的方法是将配置文件保存在 blob 存储中，然后通过进程检查 blob 是否已更改。如果有，请下载文件并使用它。

埃里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T01:07:26.580

我知道这是一个老问题，但我会放弃我的两分钱。

我们正在使用[logentries.com](https://logentries.com)服务来保存我们的日志。免费套餐将您的数据保留一周，这对我们来说足够长了。我们确实将记录器的配置保存在单独的日志文件中，但我们在部署时不必更改记录器配置文件。

就在今天，我偶然发现了允许您将 nlog 配置文件存储在 .cscfg 中的项目。我自己还没有尝试过，但我会为我的新项目试一试。这是链接：[NLog.Config.Azure](https://github.com/chrisdostert/NLog.Config.Azure)

# objective-c - 突然不兼容的类型编译器错误

> ID：14904292
> 
> 赞同：2
> 
> 时间：2013-02-15T22:17:28.873
> 
> 标签：objective-c, compiler-errors

我正在尝试将[CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack "可可伐木工")集成到我继承的项目中。过去我已经看到它在其他项目中运行良好，但由于某种原因，我在 CocoaLumberjack 的代码中遇到了几个错误。示例包括：

*   突然，当传入 C 字符串时，我收到“从不兼容的类型 'const char [1]' 分配给 'void *'”的编译错误。
*   我在 C 字符串的 C 数组上收到警告说“从字符串文字转换为 'char *' 已贬值。
*   “class”突然变成了关键字（小写版）

有没有人见过类似的东西？项目的构建设置肯定有所改变，但我不确定做了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:33:40.007

您是否有可能不小心将代码编译为 C++/Obj-C++？`class`成为关键字的第三点使这听起来很合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T16:46:37.913

我在 vs 中发生过这种情况，当编译器运行源代码时，错误会从最新到最旧出现。尝试如果你做这样的事情总是记得追踪到第一个错误并从那里开始。通过在包含语句后放置分号 (;)，我得到了一些非常疯狂的结果

IE

```
<string>;
<vector>; 
```

如果它在错误的地方会抛出一组疯狂的错误。

# z3 - 约束规划网状网络

> ID：14904300
> 
> 赞同：3
> 
> 时间：2013-02-15T22:17:45.563
> 
> 标签：z3, constraint-programming, sat-solvers

我有一个如图所示的网状网络。现在，我正在为这个 sat 网络中的所有边分配值。我想在我的程序中提出，我的分配中没有闭环。例如，左上角最正方形的约束可以写成 -

`E0 = 0 or E3 = 0 or E4 = 0 or E7 = 0`，因此任何一个链接都必须处于非活动状态才能不形成循环。然而，在这种网络中，存在许多可能的环路。

例如由边缘形成的循环 - `E0, E3, E7, E11, E15, E12, E5, E1`。

现在我的问题是我必须描述这个网络中可能发生的每个可能的循环组合。我试图在一个可能的公式中编写约束，但是我无法成功。

如果有可能的方法来编码这种情况，任何人都可以抛出任何指针吗？仅供参考，我正在使用 Z3 Sat Solver。

![网状网络](../Images/8f0e95450e0618e8363d6f9a46e6d04a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T08:54:03.813

以下编码可用于任何具有`N`节点和`M`边的图。它使用`(N+1)*M`变量和`2*M*M`3-SAT 子句。[这个](http://nbviewer.ipython.org/url/svn.clifford.at/handicraft/2014/stackex/q14904300.ipynb)ipython 笔记本通过比较 SAT 求解器结果（存在循环时为 UNSAT，否则为 SAT）与直接循环查找算法的结果来演示编码。

免责声明：此编码是我对该问题的临时解决方案。我很确定它是正确的，但我不知道它在性能方面与其他编码相比如何解决这个问题。由于我的解决方案适用于任何图形，因此可以预期存在更好的解决方案，该解决方案使用 OP 感兴趣的图形类的某些属性。

**变量：**

每条边都有一个变量。如果设置了相应的变量，则边缘是“活动的”或“使用的”。在我的参考实现中，边缘有索引`0..(M-1)`，而这个变量有索引`1..M`：

```
def edge_state_var(edge_idx):
    assert 0 <= edge_idx < M
    return 1 + edge_idx 
```

然后我`M`为每条边设置一个位宽的状态变量，或者总共有一个`N*M`状态位（节点和位也使用从零开始的索引）：

```
def node_state_var(node_idx, bit_idx):
    assert 0 <= node_idx < N
    assert 0 <=  bit_idx < M
    return 1 + M + node_idx*M + bit_idx 
```

**条款：**

当一条边处于活动状态时，它将连接的两个节点的状态变量链接在一起。与该节点具有相同索引的状态位必须在两侧不同，并且其他状态位必须等于其在另一个节点上的对应伙伴。在python代码中：

```
# which edge connects which nodes
connectivity = [
    ( 0,  1), # edge E0
    ( 1,  2), # edge E1
    ( 2,  3), # edge E2
    ( 0,  4), # edge E3
    ...
]

cnf = list()

for i in range(M):
    eb = edge_state_var(i)
    p, q = connectivity[i]
    for k in range(M):
        pb = node_state_var(p, k)
        qb = node_state_var(q, k)
        if k == i:
            # eb -> (pb != qb)
            cnf.append([-eb, -pb, -qb])
            cnf.append([-eb, +pb, +qb])
        else:
            # eb -> (pb == qb)
            cnf.append([-eb, -pb, +qb])
            cnf.append([-eb, +pb, -qb]) 
```

所以基本上每条边都试图将它所在的图分割成位于边一侧的一半，并将与该边相对应的所有状态位设置为 1 和位于另一侧的一半，并且将对应于边的状态位设置为 0。对于循环中的所有节点都可以从循环中每个边的两侧到达的循环来说，这是不可能的。

# c# - Spec Explorer - 行为的抽象规范

> ID：14904301
> 
> 赞同：0
> 
> 时间：2013-02-15T22:17:47.860
> 
> 标签：c#, testing, specifications, mbt

我目前正在评估 Spec Explorer，但我遇到了一个关于函数行为抽象规范的问题。我有类似的东西：

```
[TypeBinding("Implementation.ImplementationElement")]
public class ModelElement
{ /*... */ }
public class ModelBehaviour
{
  [Rule]
  public static void doSomething()
  {
    ModelElement sel = SelectElement(elements);
    // ... do something with sel
  }
  private static Set<ModelElement> elements = new Set<ModelElement>();
} 
```

现在我不想`SelectElement(Set<ModelElement> e)`在模型程序中明确定义。我宁愿用类似的后置条件来指定它`elements.contains(\result);`。这有可能吗？

明确定义的问题是我会强制执行选择策略。

我试图通过以下方式避免这个问题（也许我只是错过了一些小东西，有人可以给我一个提示以正确地做到这一点）：

1.  添加一个参数`ModelElement e`到`doSomething`
2.  添加条件`Condition.IsTrue(elements.Contains(e))`到`doSomething`
3.  在配置脚本中定义一个动作`SelectElement`
4.  在 config-Script 中定义一台机器`SelectAndDo`，如下所示：

    ```
    machine SelectAndDo() : Main
    {
      let ImplementationElement e 
          Where {.Condition.IsTrue(e.Equals(SelectElement()));.} 
          in doSomething(e)
    } 
    ```

5.  使用`SelectAndDo`代替`doSomething`

但是，这不起作用，因为对相应模型的探索进入了错误状态。如果这根本不起作用，那么 Windows 上的 Spec Explorer 是否有一个很好的替代品，最好是稳定的？是否可以推荐 FsCheck 用于测试有状态系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:11:09.957

我弄清楚了问题所在。上面概述的解决方案实际上有效，但是我`null`从`SelectElement()`if 元素为空返回，因此无法满足 where 子句中的条件。因此，我决定返回一个类似于 Null 对象的“非法”元素，而不是返回 null。所以我的整个解决方案看起来像这样：

机器：

```
machine Full() : Main
{
  Init(); CreateElement();CreateOtherElement();CreateIllegal(); SelectAndDo* || ModelProgram
} 
```

这`CreateIllegal()`是 afaik 需要的，这样`SelectAndDo`才能满足条件。

除此之外，我在模型程序中添加了对这个非法值的检查。

**编辑：**

实际上有一种更好、更直接的使用方式`Choice.Some<T>`，我不知道。

# windows - vbscript 从外部磁盘复制文件

> ID：14904303
> 
> 赞同：1
> 
> 时间：2013-02-15T22:17:55.483
> 
> 标签：windows, vbscript

我和一个朋友开始构建一个 VBScript，目标是当我们在计算机上插入外部硬盘或 USB 时复制任何打开的文件/某些特定格式的文档（如 pdf、pptx）。我们的脚本仅将特定格式的所有文档从外部硬盘/USB 复制到我的计算机，但我们必须在插入外部硬盘/USB 后手动执行脚本。

我们希望脚本执行的操作：

1.  插入外部硬盘/USB 时自动启动
2.  复制后不显示弹出窗口
3.  可能只复制用户打开的文件（pdf、jpeg、pptx）

这是我们到目前为止所做的：

```
' foreach.vbs
' Testing the for each function on files
'

' BEGIN

' Create a File System Object to handle files and folders
Set fso = CreateObject("Scripting.FileSystemObject")

' Some vars
src = "C:\" ' The source of search, should be changed before use
dest = "c:\temp\1\" ' destination where we will copy files to

' It would be a bright idead to force and/or create dest before
' starting copy
fso.CreateFolder(dest)

Set ofolder = fso.GetFolder(src) ' set as object
' get all files inside the specified folder
Set allfiles = ofolder.Files 
' Enter a For Each Loop that will process each of the files
For Each sfile in allfiles
' Better get all extensions in lower case
If LCASE(fso.GetExtensionName(sfile.Name)) = "bat" then
' Print out what we find
wscript.echo sfile.Name
fso.CopyFile sfile, dest
End If
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:00:33.737

如果我猜对了，您的实际问题是**如何检测 USB 驱动器已插入**？

你需要一些事件驱动的语言来做到这一点，不幸的是不是 VBScript。但是，如果您不想编程，为什么不使用[Task Scheduler](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)。

PS 实际上，[这个话题](https://stackoverflow.com/questions/8277765/finding-usb-drive-letter-with-vbscript)（我不喜欢无限循环，但是）是一个可能的答案。

# osgi - 如何以及在何处通过“apache felix configAdmin”配置捆绑包

> ID：14904309
> 
> 赞同：1
> 
> 时间：2013-02-15T22:18:46.207
> 
> 标签：osgi, apache-felix

我尝试在我的项目中使用 OSGi 的“Apache Felix”实现，我从可分发的 jar (/bin /felix.jar) 启动框架。我创建了简单的示例包来在注册表中注册或使用服务。我想使用配置管理服务所以我在框架中安装了bundle“org.apache.felix.configadmin”felix，然后我不知道如何以及将另一个bundle的配置文件放在哪里，例如我想安装包“org.apache.felix.http.jetty”然后我想通过configAdmin配置这个包，那么我如何重命名我的配置文件，以及放在哪里？

另一个问题，设置有什么区别，例如使用框架属性（conf/config.properties）设置码头包的属性“org.osgi.service.http.port”或通过配置管理员的包配置它服务。

最好的祝福，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:53:13.507

您可能还需要 felix 的文件安装程序来获取配置文件。如果您想查看一个工作示例，请查看 Apache Karaf。它是一个 OSGi 容器，具有许多不错的预配置功能。配置管理服务开箱即用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T12:53:31.800

通常，您将[felix 配置管理服务](http://felix.apache.org/site/apache-felix-config-admin.html)与[felix fileinstall](http://felix.apache.org/documentation/subprojects/apache-felix-file-install.html)一起使用。所以 fileinstall 负责监视配置文件的目录，并移交给配置管理员以使其在 OSGi 中作为配置可用。

有关完整的工作示例，请查看[Apache Karaf](http://karaf.apache.org/)。在那里，您可以看到协同工作所需的配置。你也可以考虑简单地将你自己的包安装到 karaf 中，因为它使管理 felix 框架变得更加容易。

# c# - TPL 返回值和异常

> ID：14904313
> 
> 赞同：0
> 
> 时间：2013-02-15T22:19:03.683
> 
> 标签：c#, .net, task-parallel-library

我已经开发了一个连接设备并与之操作的库。例如：

```
public bool Connect(string ip)
{
    try
    {
        // try connect to device
    }
    catch (Exception ex)
    {
        // trow custom exception
    }
} 
```

这没关系，但现在我决定将 TPL 包含在我的库中。

我面临的问题是如何返回值的逻辑。您将传递一个 IP 列表，而不是传递一个 IP。想象一下，您想连接 10 台设备，其中 5 台正常，而另外 5 台出现故障，我想象的代码如下：

```
public Dictionary<Device, bool> Connect(List<Device> device)
{
    try
    {
        // TPL try connect to device
    }
    catch (AggregatedException ex)
    {
        // trow custom exception
    }
} 
```

如果有人调用此方法，他们只会收到例外情况，在这种情况下，这很容易，但例如，如果我有另一种方法，例如`Dictionary<Device, List<Logs>> GetLogs(List<Device> device)`我将有 5 台设备有数据和 5 台设备出现故障。

返回正确连接结果和故障连接错误的最佳方法是什么？连接失败可能有多种原因。

更新

我试过这个：

```
 public Dictionary<int, Task<string>> GetData3(int value)
    {
        Dictionary<int, Task<string>> dic = new Dictionary<int, Task<string>>();
        Task<string>[] tasks = new Task<string>[value];
        for (int i = 0; i < value; i++)
        {
            tasks[i] = Task.Factory.StartNew<string>((stateObject) =>
            {
                var a = (int)stateObject;
                return a + " Test";
            }, value);
            dic.Add(i, tasks[i]);
        }
        Task.WaitAll(tasks);

        return dic;
    } 
```

在 WS 客户端中：

```
 Service1Client sc = new Service1Client();
        var a = sc.GetData3(5); 
```

如果我闯入`return dic`我可以看到结果：

```
Id = 1, Status = RanToCompletion, Method = "{null}", Result = "5 Test" 
```

但在`var a`我只看到：

```
Id = 1, Status = WaitingForActivation, Method = "{null}", Result = "{Not yet computed}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:26:51.473

您可以返回一个`Dictionary<Device, Task<Whatever>>`（`Whatever`每个设备的结果在哪里）。您可以*立即*返回，已开始连接到每个设备。然后，任务将代表（基于每个设备）连接是否已完成、失败或仍在进行中。

除此之外，使用异步结果的任务几乎是使用 TPL 的惯用方式......并且在 C# 5 中通过 async/await 变得更容易。

如果调用者想要等待所有任务完成并聚合任何异常，他们可以这样做。

# java - 检测浏览器与。软件 PHP

> ID：14904314
> 
> 赞同：0
> 
> 时间：2013-02-15T22:19:06.153
> 
> 标签：java, php, url, browser

所以。我正在访问一个 PHP 页面并使用 Java URL() 对象从中读取一些数据。我想知道是否有人可以告诉我如何使用 PHP 检查查看页面的人是从 Java 应用程序还是从真正的 Web 浏览器访问它（如果他们是，我不希望他们看到数据）使用网络浏览器）。

我当前的 Java 代码是：

```
 try{
        URL url = new URL("http://www.mysite.com/myurl.php");
        Scanner s = new Scanner(url.openStream());
        while(s.hasNext()){
            String auths = s.next();
            String real = "test";
            if(auths.equalsIgnoreCase(real)){
                return true;
            }else{
                return false;
            }
        }
        return false;
    }catch(Exception e){
        return false;
    } 
```

我在“ [http://www.mysite.com/myurl.php](http://www.mysite.com/myurl.php) ”的 PHP 文件有这样的代码：

```
<?php echo "test"; ?> 
```

问题是，我只希望 PHP 文件输出“测试”，如果它是从 Java 应用程序访问的。谁能帮帮我？..谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:23:43.560

**对于您正在尝试做的事情，没有万无一失的解决方案。**

话虽如此，您可以使用[get_browser()](http://php.net/manual/en/function.get-browser.php)或`$_SERVER['HTTP_USER_AGENT']`读取`user-agent`请求标头。

# java - 如何在 Java 中读取没有名称的元素的 JSON 响应（SurveyGizmo 调查响应 API）

> ID：14904328
> 
> 赞同：0
> 
> 时间：2013-02-15T22:20:15.523
> 
> 标签：java, json

我正在使用surveygizmo API 来检索调查回复，但是在他们的JSON 回复（下面的示例）中我遇到了两个问题。

1.  我将如何遍历问题：答案对，似乎没有与之关联的字段名称，因此我无法执行 JSONObject.getJSONObject("fieldname"); 或 JSONArray.getJSONArray("fieldname"); 由于调查的跳过逻辑，我不知道我需要输入什么问题 ID，所以我也无法通过“问题（#）”获得。

2.  我需要问题的 questionId，但是鉴于密钥是“[question(#)]”，我将如何获取 questionId，因为我不相信它既不是 JSONObject 也不是 JSONArray，我应该将其视为字符串吗？进行正则表达式搜索以检索“question()”中的#？

JSON响应示例

```
{
    "result_ok":true,
    "total_count":"1",
    "page":1,
    "total_pages":1,
    "results_per_page":50,
    "data":[{
        "id":"1",
        "contact_id":"",
        "status":"Complete",
        "is_test_data":"1",
        "datesubmitted":"2013-02-07 12:00:00",
        "sResponseComment":"",
        "[question(3)]":"15",
        "[question(4), option(10003)]":"Baseball",
        "[question(4), option(10007)]":"Basketball",
        "[question(4), option(10009)]":"Hockey",
        "[question(12)]":"No",
        "[question(14)]":"Yes",
        "[question(15)]":"Abc",
        "[question(16)]":"No"
   }]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:31:20.450

我一直在做一个类似的项目。这是我到目前为止所拥有的。

模型.cs：

```
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

namespace DeSerializer
{
    [JsonObject]
    public class Responses
    {
        public bool result_ok { get; set; }
        public string total_count { get; set; }
    public int page { get; set; }
    public int total_pages { get; set; }
    public int results_per_page { get; set; }
    public SurveyResponse[] Data { get; set; }
}

[JsonObject]
// Here is the magic: When you see this type, use this class to read it.
// If you want, you can also define the JsonConverter by adding it to
// a JsonSerializer, and parsing with that.
[JsonConverter(typeof(DataItemConverter))]
public class SurveyResponse
{
    public string id { get; set; }
    public string contact_id { get; set; }
    public string status { get; set; }
    public string is_test_data { get; set; }
    public DateTime datesubmitted { get; set; }
    public string sResponseComment { get; set; }
    public List<SurveyQuestion> SurveyQuestions { get; set; }
    public List<SurveyUrl> SurveyUrls { get; set; }
    public List<SurveyGeoData> SurveyGeoDatas { get; set; }
    public List<SurveyVariable> SurveyVariables { get; set; }
    public List<SurveyVariableShown> SurveyVariableShowns { get; set; }
    public List<SurveyQuestionHidden> SurveyQuestionHiddens { get; set; }
    public List<SurveyQuestionOption> SurveyQuestionOptions { get; set; }
    public List<SurveyQuestionMulti> SurveyQuestionMulties { get; set; }
}

public class SurveyQuestion
{
    [Key]
    public int QuestionID { get; set; }
    public string QuestionResponse { get; set; }
}

public class SurveyUrl
{
    [Key]
    public int SurveyUrlID { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
}

public class SurveyGeoData
{
    [Key]
    public int SurveyGeoDataID { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
}

public class SurveyVariable
{
    [Key]
    public int SurveyVariableID { get; set; }
    public string Value { get; set; }
}

public class SurveyVariableShown
{
    [Key]
    public int SurveyVariableShownID { get; set; }
    public string Name { get; set; }
    public string Value { get; set; }
}

public class SurveyQuestionHidden
{
    [Key]
    public int QuestionID { get; set; }
    public string QuestionResponse { get; set; }
}

public class SurveyQuestionOption
{
    [Key]
    public int OptionID { get; set; }
    public int QuestionID { get; set; }
    public string QuestionResponse { get; set; }
}

public class SurveyQuestionMulti
{
    [Key]
    public int OptionID { get; set; }
    public int QuestionID { get; set; }
    public string QuestionResponse { get; set; }
}

public class DataItemConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(SurveyResponse);
    }

    public override bool CanRead
    {
        get { return true; }
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var value = (SurveyResponse)existingValue;
        if (value == null)
        {
            value = new SurveyResponse();
            value.SurveyQuestions = new List<SurveyQuestion>();
            value.SurveyUrls = new List<SurveyUrl>();
            value.SurveyGeoDatas = new List<SurveyGeoData>();
            value.SurveyVariables = new List<SurveyVariable>();
            value.SurveyVariableShowns = new List<SurveyVariableShown>();
            value.SurveyQuestionHiddens = new List<SurveyQuestionHidden>();
            value.SurveyQuestionOptions = new List<SurveyQuestionOption>();
            value.SurveyQuestionMulties = new List<SurveyQuestionMulti>();
        }

        // Skip opening {
        reader.Read();

        while (reader.TokenType == JsonToken.PropertyName)
        {
            var name = reader.Value.ToString();
            reader.Read();

            // Here is where you do your magic
            string input = name;

            //[question(1)]
            //[question(11)]
            //[question(111)]
            //[question(1234)]
            //[question(12345)]
            //[url(12345)]
            //[variable(12345)]
            //SINGLE ANSWER
            Match matchSingleAnswer = Regex.Match(input, @"\[(question|calc|comment)\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\)]",
                RegexOptions.IgnoreCase);

            //SINGLE VARIABLE
            Match matchSingleVariable = Regex.Match(input, @"\[(variable)\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\)]",
                RegexOptions.IgnoreCase);

            //URL
            Match matchUrl = Regex.Match(input, @"\[url",
                RegexOptions.IgnoreCase);

            //GEO DATA
            Match matchGeo = Regex.Match(input, @"\[variable\(""STANDARD_",
                RegexOptions.IgnoreCase);

            //VARIABLES SHOWN
            Match matchVariables = Regex.Match(input, @"\[variable",
                RegexOptions.IgnoreCase);

            //[question(1), option(\"1
            //[question(11), option(\"2
            //[question(111), option(\"1
            //[question(1234), option(\"1
            //[question(12345), option(\"1
            ////////////////////////////////////////////
            ////////The \ values are being removed.
            ////////////////////////////////////////////
            //OPTIONAL ANSWERS
            string myReg = @"\[(question|url|variable|calc|comment)\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\),\ option\(""[0-9]";
            Match matchOption = Regex.Match(input, myReg,
                RegexOptions.IgnoreCase);

            //[question(1), option(1
            //[question(11), option(2
            //[question(111), option(1
            //[question(1234), option(1
            //[question(12345), option(1
            //MULTIPLE CHOICE
            Match matchMultiSelect = Regex.Match(input, @"\[question\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\),\ option\([0-9]",
                RegexOptions.IgnoreCase);

            //[question(1), option(0)
            //[question(11), option(0)
            //[question(111), option(0)
            //[question(1234), option(0)
            //[question(12345), option(0)
            //HIDDEN
            Match matchHiddenValue = Regex.Match(input, @"\[question\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\),\ option\(0\)",
                RegexOptions.IgnoreCase);

            if (matchSingleAnswer.Success)
            {
                int index = int.Parse(name.Substring(10, name.IndexOf(')') - 10));
                SurveyQuestion sq = new SurveyQuestion();
                sq.QuestionID = index;
                sq.QuestionResponse = serializer.Deserialize<string>(reader);
                value.SurveyQuestions.Add(sq);
            }
            else if (matchUrl.Success)
            {
                string urlName = name.Substring(6, name.Length - 9);
                SurveyUrl su = new SurveyUrl();
                su.Name = urlName;
                su.Value = serializer.Deserialize<string>(reader);
                value.SurveyUrls.Add(su);
            }
            else if (matchGeo.Success)
            {
                string geoName = name.Substring(11, name.Length - 14);
                SurveyGeoData sgd = new SurveyGeoData();
                sgd.Name = geoName;
                sgd.Value = serializer.Deserialize<string>(reader);
                value.SurveyGeoDatas.Add(sgd);
            }
            else if (matchSingleVariable.Success)
            {
                int index = int.Parse(name.Substring(10, name.IndexOf(')') - 10));
                SurveyVariable sv = new SurveyVariable();
                sv.SurveyVariableID = index;
                sv.Value = serializer.Deserialize<string>(reader);
                value.SurveyVariables.Add(sv);
            }
            else if (matchVariables.Success)
            {
                string varName = name.Substring(11, name.Length - 14);
                SurveyVariableShown svs = new SurveyVariableShown();
                svs.Name = varName;
                svs.Value = serializer.Deserialize<string>(reader);
                value.SurveyVariableShowns.Add(svs);
            }
            else if (matchHiddenValue.Success)
            {
                int index = int.Parse(name.Substring(10, name.IndexOf(')') - 10));
                SurveyQuestionHidden sqh = new SurveyQuestionHidden();
                sqh.QuestionID = index;
                sqh.QuestionResponse = serializer.Deserialize<string>(reader);
                value.SurveyQuestionHiddens.Add(sqh);
            }
            else if (matchMultiSelect.Success)
            {
                //Multiple choice question selections
                string[] nameArray = name.Split(')');
                string questionPart = nameArray[0];
                string optionPart = nameArray[1];
                int index = int.Parse(questionPart.Substring(10, questionPart.Length - 10));
                int indexSub = int.Parse(optionPart.Substring(9, optionPart.Length - 9));

                SurveyQuestionMulti sqm = new SurveyQuestionMulti();
                sqm.OptionID = indexSub;
                sqm.QuestionID = index;
                sqm.QuestionResponse = serializer.Deserialize<string>(reader);
                value.SurveyQuestionMulties.Add(sqm);

                //NEED TO ADD A BASE QUESTION TO POINT TO ALL THE MULTI
                //SurveyQuestion sq = new SurveyQuestion();
                //sq.QuestionID = sqm.QuestionID;
                //sq.QuestionResponse = "";
                //value.SurveyQuestions.Add(sq);
            }
            else if (matchOption.Success)
            {
                //Optional text value for a given question
                string[] nameArray = name.Split(')');
                string questionPart = nameArray[0];
                string optionPart = nameArray[1];
                int index = int.Parse(questionPart.Substring(10, questionPart.Length - 10));
                int indexSub = int.Parse(optionPart.Substring(10, 5));

                SurveyQuestionOption sqo = new SurveyQuestionOption();
                sqo.OptionID = indexSub;
                sqo.QuestionID = index;
                sqo.QuestionResponse = serializer.Deserialize<string>(reader);
                value.SurveyQuestionOptions.Add(sqo);
            }
            else
            {
                var property = typeof(SurveyResponse).GetProperty(name);
                if (property != null)
                    property.SetValue(value, serializer.Deserialize(reader, property.PropertyType), null);
            }

            // Skip the , or } if we are at the end
            reader.Read();
        }

        return value;
    }

    public override bool CanWrite
    {
        get { return false; }
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }
}
} 
```

并且，program.cs 文件中的 Main 函数：

```
 string webReq = String.Empty;

        //Office Energy - Allan Testing
        webReq += "https://restapi.surveygizmo.com/head/survey/xxxxxx";
        webReq += "/surveyresponse/";
        webReq += "?user:pass=xxxxxxxx:xxxxxxx";
        webReq += "&page=101&resultsperpage=1";

        HttpWebRequest request = WebRequest.Create(webReq) as HttpWebRequest;
        var results = String.Empty;
        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {
            StreamReader reader = new StreamReader(response.GetResponseStream());
            results += reader.ReadToEnd();
        }

        Responses responses = new JavaScriptSerializer().Deserialize<Responses>(results);

        Console.WriteLine("FEED HEADERS:");
        Console.WriteLine("");
        Console.WriteLine("result_ok: " + responses.result_ok);
        Console.WriteLine("total_count: " + responses.total_count);
        Console.WriteLine("page: " + responses.page);
        Console.WriteLine("total_pages: " + responses.total_pages);
        Console.WriteLine("results_per_page: " + responses.results_per_page);
        Console.WriteLine("");
        Console.WriteLine("");

        foreach (var item in responses.Data)
        {
            Console.WriteLine("id: " + item.id);
            Console.WriteLine("contact_id: " + item.contact_id);
            Console.WriteLine("status: " + item.status);
            Console.WriteLine("is_test_data: " + item.is_test_data);
            Console.WriteLine("datesubmitted: " + item.datesubmitted);
            Console.WriteLine("sResponseComment: " + item.sResponseComment);
            Console.WriteLine("");
        }

        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();

        //using live stream
        var result = JsonConvert.DeserializeObject<Responses>(results);
        //local results (not using live stream)
        //var result = JsonConvert.DeserializeObject<Responses>(localResults);

        //want to calcualte the highest kay number for the loop
        //http://stackoverflow.com/questions/2805703/good-way-to-get-the-key-of-the-highest-value-of-a-dictionary-in-c-sharp
        //var max = result.Data[0].questions[0].Aggregate((l, r) => l.Key > r.Key ? l : r).Key;

        foreach (var item in result.Data[0].SurveyQuestions)
        {
            string label = "QuestionID = " + item.QuestionID;
            string val = "QuestionResponse = " + item.QuestionResponse;
            Console.WriteLine(label);
            Console.WriteLine(val);
            Console.WriteLine("");

            //Question Option
            var listOptions = result.Data[0].SurveyQuestionOptions;
            var listLocalQuestionOptions = from o in listOptions
                                           where o.QuestionID == item.QuestionID
                                           select o;
            foreach (var itemSub in listLocalQuestionOptions)
            {
                Console.WriteLine("  OPTIONAL");
                string labelSub1 = "  OptionID = " + itemSub.OptionID;
                string labelSub2 = "  QuestionID = " + itemSub.QuestionID;
                string valSub1 = "  QuestionResponse = " + itemSub.QuestionResponse;
                Console.WriteLine(labelSub1);
                Console.WriteLine(labelSub2);
                Console.WriteLine(valSub1);
                Console.WriteLine("");
            }

            //Question Multi
            var listMulties = result.Data[0].SurveyQuestionMulties;
            var listLocalQuestionMulties = from m in listMulties
                                           where m.QuestionID == item.QuestionID
                                           select m;
            foreach (var itemSub in listLocalQuestionMulties)
            {
                Console.WriteLine("MULTIES");
                string labelSub1 = "  OptionID = " + itemSub.OptionID;
                string labelSub2 = "  QuestionID = " + itemSub.QuestionID;
                string valSub1 = "  QuestionResponse = " + itemSub.QuestionResponse;
                Console.WriteLine(labelSub1);
                Console.WriteLine(labelSub2);
                Console.WriteLine(valSub1);
                Console.WriteLine("");
            }

        }

        //Console.WriteLine("");
        //Console.WriteLine("");
        //Console.WriteLine("");
        //Console.WriteLine("");

        //foreach (var item in result.Data[0].SurveyQuestionOptions)
        //{
        //    string label = "OptionID = " + item.OptionID;
        //    string label2 = "QuestionID = " + item.QuestionID;
        //    string val = "QuestionResponse = " + item.QuestionResponse;
        //    Console.WriteLine(label);
        //    Console.WriteLine(label2);
        //    Console.WriteLine(val);
        //    Console.WriteLine("");
        //}

        //Console.WriteLine("");

        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();

        Console.WriteLine("");
        Console.WriteLine("");
        Console.WriteLine("HIDDENS");
        Console.WriteLine("");

        foreach (var item in result.Data[0].SurveyQuestionHiddens)
        {
            string label = "QuestionID = " + item.QuestionID;
            string val = "QuestionResponse = " + item.QuestionResponse;
            Console.WriteLine(label);
            Console.WriteLine(val);
            Console.WriteLine("");
        }

        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();
        Console.WriteLine("");
        Console.WriteLine("");
        Console.WriteLine("MULTIES");
        Console.WriteLine("");

        foreach (var item in result.Data[0].SurveyQuestionMulties)
        {
            string label = "OptionID = " + item.OptionID;
            string label2 = "QuestionID = " + item.QuestionID;
            string val = "QuestionResponse = " + item.QuestionResponse;
            Console.WriteLine(label);
            Console.WriteLine(label2);
            Console.WriteLine(val);
            Console.WriteLine("");
        }

        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();
        Console.WriteLine("");
        Console.WriteLine("");
        Console.WriteLine("URL VALUES");
        Console.WriteLine("");

        foreach (var item in result.Data[0].SurveyUrls)
        {
            string label = "SurveyUrlID = " + item.SurveyUrlID;
            string label2 = "Name = " + item.Name;
            string val = "Value = " + item.Value;
            Console.WriteLine(label);
            Console.WriteLine(label2);
            Console.WriteLine(val);
            Console.WriteLine("");
        }

        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();
        Console.WriteLine("");
        Console.WriteLine("");
        Console.WriteLine("GEO VALUES");
        Console.WriteLine("");

        foreach (var item in result.Data[0].SurveyGeoDatas)
        {
            string label = "SurveyGeoDataID = " + item.SurveyGeoDataID;
            string label2 = "Name = " + item.Name;
            string val = "Value = " + item.Value;
            Console.WriteLine(label);
            Console.WriteLine(label2);
            Console.WriteLine(val);
            Console.WriteLine("");
        }

        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();
        Console.WriteLine("");
        Console.WriteLine("");
        Console.WriteLine("VARIABLES");
        Console.WriteLine("");

        foreach (var item in result.Data[0].SurveyVariables)
        {
            string label = "SurveyVariableID = " + item.SurveyVariableID;
            string val = "Value = " + item.Value;
            Console.WriteLine(label);
            Console.WriteLine(val);
            Console.WriteLine("");
        }

        Console.WriteLine("Press enter to continue...");
        Console.ReadLine();
        Console.WriteLine("");
        Console.WriteLine("");
        Console.WriteLine("VARIABLES SHOWN");
        Console.WriteLine("");

        foreach (var item in result.Data[0].SurveyVariableShowns)
        {
            string label = "SurveyVariableShownID = " + item.SurveyVariableShownID;
            string label2 = "Name = " + item.Name;
            string val = "Value = " + item.Value;
            Console.WriteLine(label);
            Console.WriteLine(label2);
            Console.WriteLine(val);
            Console.WriteLine("");
        }

        Console.WriteLine("");
        Console.WriteLine("Press enter to exit...");
        Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T15:09:56.083

我已经将艾伦的代码放在一个类库中。我们在我工作的公司内部将其用于调查报告工具。它在 Github 上[https://github.com/tntp/NSurveyGizmo](https://github.com/tntp/NSurveyGizmo)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:14:08.197

您需要手动解析问题“数字”关键数据。

如果您预计该格式不会有很多可变性，则可以使用正则表达式，或者您可以构建一个简单的“解析器”，以逗号分隔并使用解析的数据构建 POJO。

# django - Django：在所有查询集对象上运行一个方法

> ID：14904329
> 
> 赞同：2
> 
> 时间：2013-02-15T22:20:16.850
> 
> 标签：django, django-rest-framework

我想知道以下是否可能以及是否有人可以解释如何。我正在使用[Django REST 框架](http://django-rest-framework.org/)

我有一个模型，在那个模型中我有一个名为**Product**的类。产品具有称为**is_product_safe_for_user**的方法。它需要用户对象和自我（产品）。

**模型.py**

```
class Product(models.Model):

    title = models.CharField(max_length=60, help_text="Title of the product.")
    for_age = models.CharField(max_length=2,)

    def is_product_safe_for_user(self, user):
        if self.for_age > user.age
        return "OK" 
```

（忽略上面的语法，它只是给你一个想法）

我想要做的是对所有查询集对象运行该方法，如下所示，但我不知道如何......

```
class ProductListWithAge(generics.ListAPIView):
    permission_classes = (permissions.IsAuthenticated,)
    model = Product
    serializer_class = ProductSerializer

    def get_queryset(self):

      Product.is_product_safe_for_user(self,user)

       # then somehow apply this to my queryset

        return Product.objects.filter() 
```

有时我只想在一个对象上运行方法。

**还是应该进入序列化器？如果有怎么办？...**

```
class ProductSerializer(serializers.ModelSerializer):

    safe = serializers.Field(Product='is_product_safe_for_user(self,user)')

    class Meta:
        model = Product
        fields = ('id', 'title', 'active', 'safe') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:37:03.110

您可以为您的模型编写[自定义管理器。](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers)像这样的东西：

```
class OnlySafeObjects(models.Manager):
    def filter_by_user(self, user):
        return super(OnlySafeObjects, self).get_query_set().filter(for_age__gte=user.age)

class Product(models.Model):
     # your normal stuff
     onlysafeobjects = OnlySafeObjects() 
```

然后你会像这样使用它：

```
safe_products = Product.onlysafeobjects.filter_by_user(request.user) 
```

# javascript - 我需要解码一个编码的 js

> ID：14904332
> 
> 赞同：-1
> 
> 时间：2013-02-15T22:20:41.453
> 
> 标签：javascript

我下载了一个 html 主题，它在 jquery 文件的末尾有一段编码的 javascript。我需要知道如何解码它

这是代码：

```
[]['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72']['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72'](self['\x75\x6e\x65\x73\x63\x61\x70\x65']('%69%66%28%7e%6c%6f%63%61%74%69%6f%6e%2e%70%72%6f%74%6f%63%6f%6c%2e%69%6e%64%65%78%4f%66%28%27%68%74%74%70%3a%27%29%26%26%7e%6c%6f%63%61%74%69%6f%6e%2e%68%6f%73%74%2e%69%6e%64%65%78%4f%66%28%27%74%65%6d%70%6c%61%74%65%2d%68%65%6c%70%2e%63%6f%6d%27%29%29%7b%7d%65%6c%73%65%28%6c%6f%63%61%74%69%6f%6e%2e%68%72%65%66%3d%27%68%74%74%70%3a%2f%2f%74%65%6d%70%6c%61%74%65%6d%6f%6e%73%74%65%72%2e%63%6f%6d%27%29'))() 
```

关于如何解码的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:23:50.423

只需将其包装在一个字符串中并打印出来：

```
> "['\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72']"
  "['constructor']" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:24:39.113

只需删除最后一个“()”并在浏览器的 Web 控制台中复制/粘贴代码（对于 Firefox，Ctrl+Shift+K，对于 Chrome，Ctrl+Shift+J）。

它输出：

```
(function anonymous() {
if(~location.protocol.indexOf('http:')&&~location.host.indexOf('template-help.com')){}else(location.href='http://templatemonster.com')
}) 
```

# php - Laravel routes.php 越来越大

> ID：14904333
> 
> 赞同：27
> 
> 时间：2013-02-15T22:20:47.670
> 
> 标签：php, laravel

随着您不断向 Routes.php 添加越来越多的路由，它会变得越来越大。你如何组织它们？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-15T20:50:44.747

我创建了一个目录 /application/routes/ 并在其中添加了文件。每个文件只是一组路由。然后在 routes.php 我添加了以下代码以将它们全部包含在内：

```
// Dynamically include all files in the routes directory
foreach (new DirectoryIterator(__DIR__.DS.'routes') as $file)
{
    if (!$file->isDot() && !$file->isDir() && $file->getFilename() != '.gitignore')
    {
        require_once __DIR__.DS.'routes'.DS.$file->getFilename();
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-22T19:27:27.590

即使采用了其他答案中提到的所有最佳实践，即：使用资源控制器、路由组等。

您可以以旧方式简单地“包含”路由文件。正如 Chris G 在此评论中提到的那样。

您可以创建简单的目录结构并将路由文件包含在 route.php 文件中。

```
../myroutes
 --route-type-1.php
 --route-type-2.php 
```

在 route.php 文件中

```
include('myroutes/route-type-1.php'); 
```

它没有任何问题。这就是路由包含在包中的方式。

[http://laravel.com/docs/packages#package-routing](http://laravel.com/docs/packages#package-routing)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-16T01:02:20.423

我通常使用[组路由](http://laravel.com/docs/routing#controller-routing)（因为如果控制器相关，它们往往需要相同类型的过滤）来组织它们，或者如果您希望/可以拥有一个较小的路由文件，您可能想要[注册您的控制器](http://laravel.com/docs/routing#controller-routing)并进行额外的验证检查控制器本身内部的 URL 参数。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-22T14:47:53.743

实际上溃败应该保持苗条。只需将您的代码移动到控制器并使用路由注册并重定向到它们。惯例是每个文件存储一个控制器，这样您的代码就会自动组织起来。

看看这个

```
//  application/controllers/sample.php
class Sample_Controller extends Base_Controller
{
    public function action_index()
    {
        echo "Wellcome to the root" //www.testapp.com/sample
    }

    public function action_edit()
    {
        echo "Some editing functions here." //www.testapp.com/sample/edit
    }

     public function action_whatsoever()
    {
        echo "Put here whatever you like." //www.testapp.com/sample/whatsoever
    }

} 
```

控制器动作路由可以像这样注册：

```
//application/routs.php
Route::controller('admin::home'); 
```

非常直接和舒适。

**更新：**

您还可以使用此行为整个应用程序自动注册所有控制器：

```
Route::controller(Controller::detect()); 
```

或具有所有操作的控制器：

```
Route::controller(Controller::detect('yourcontroller')); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-18T03:18:33.453

或者，您可以将路由存储在不同的文件中，然后使用包含获取这些文件：

```
Route::group(stuff,function(){
  include __DIR__.DS.'routes1.php';
  include __DIR__.DS.'routes2.php';
}); 
```

当代码太多时，这提供了一种很好且干净的方式来排序处理，您也可以提一下

```
Route::controller(Controller::detect()); 
```

然后相应地构造你的控制器：

```
class Account_Controller extends Base_Controller {
  public function action_login() {
      //Login
  }

  public function action_logout() {
      ...
  } 
```

如果您必须将参数传递给某个函数：

```
 public function dosomething($input){
     ...
  } 
```

您可以像这样访问这些功能：

```
 http://yourapp/account/login
  http://yourapp/account/logout 
```

然后您可以通过将参数附加到 URL 来调用该函数，

```
 http://yourapp.account/dosomething/somedata 
```

如果您需要保护某些方法，请在没有 action_ 的情况下附加它们，以便公众无法访问它们。

或者，您可以切换到 restful 方法，这基本上是一种根据您获得的查询类型来响应某些输入的方法，例如，当您收到对登录页面的“GET”请求时，这意味着用户需要查看登录屏幕，当您收到“POST”请求时，这通常意味着用户正在发布登录数据，因此您可以做出响应，这将帮助您减少函数数量以获取更多关于 restful 方法的信息，您可以阅读这篇精彩的文章作者：Ryan Tomayako 在[http://tomayko.com/writings/rest-to-my-wife](http://tomayko.com/writings/rest-to-my-wife)

要使用 restful 方法，您需要将 restful 设置为 true，然后在函数名称之前附加 action 关键字。

```
public $restful = true;
public function get_login() {
 return View::make('login');
 //This function is accessible using GET request to http://yourapp/login
}

public function post_login() {
   $data = Input::get();
   //do something using the Input data
   //This function is accessible using a POST request to http://yourapp/login
} 
```

这样，您就可以消除对处理和验证用户凭据的其他途径的需要！

如果您不希望使用 restful 方法访问某些方法，那么只需不要在函数名称中包含 action 关键字 (get,post,...)。

将 restful 方法与智能路由相结合是保持代码清洁和安全的最有效方法。

# php - CodeIgniter 不需要模板引擎

> ID：14904334
> 
> 赞同：2
> 
> 时间：2013-02-15T22:20:55.980
> 
> 标签：php, codeigniter, phpmyadmin, cakephp-1.3, codeigniter-2

请解释什么是模板引擎，以及它的用途。下面的段落想表达什么？我不听作者的解释。

> 尽管 CodeIgniter 确实带有一个可以选择使用的简单模板解析器，但它并不强制您使用它。模板引擎根本无法与原生 PHP 的性能相提并论，使用模板引擎必须学习的语法通常只比学习 PHP 的基础知识稍微容易一些。考虑这个 PHP 代码块：
> 
> ```
> <ul>
> 
> <?php foreach ($addressbook as $name):?>
> 
> <li><?=$name?></li>
> 
> <?php endforeach; ?>
> 
> </ul> 
> ```
> 
> 将此与模板引擎使用的伪代码进行对比：
> 
> ```
> <ul>
> 
> {foreach from=$addressbook item="name"}
> 
> <li>{$name}</li>
> 
> {/foreach}
> 
> </ul> 
> ```
> 
> 是的，模板引擎示例更简洁一些，但它是以性能为代价的，因为必须将伪代码转换回 PHP 才能运行。由于我们的目标之一是最大化性能，我们选择不使用模板引擎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:33:06.360

模板引擎只是将后端代码嵌入到 html 中的一种方式。这在 Python 和 Ruby 等语言中比 PHP 更常见，因为 PHP 已经支持在 html 代码中嵌入。

对于那些来自其他后端语言的人来说，特定的模板引擎可能更容易，特别是 Python 或 Ruby，因为 Django 和 Rails 的模板语法看起来非常相似。

虽然不一定是“模板引擎”，但我通常组织我的 Codeigniter 项目，其中我有一个包含骨架布局的 template.php 视图，并且站点/应用程序的每个页面的内容是在模板中加载的单独视图。 .php 文件。这样我就不会在每一页上重写代码。

模板引擎都是关于个人喜好的——它们不是必需的，但是如果他们习惯了，有些人会觉得使用它们会更舒服。人们越少考虑他们的工作流程，他们就越有效率！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:01:30.123

在 CodeIgniter 用户指南中描述 CodeIgniter 确实带有一个可以选择使用的简单模板解析器，它不会强迫您使用一个。

但是如果你想使用模板，我建议使用这个库，它非常简单。

[http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)

# jquery-mobile - jQuery 移动自动完成不显示我的 websql 数据

> ID：14904336
> 
> 赞同：0
> 
> 时间：2013-02-15T22:21:03.810
> 
> 标签：jquery-mobile, autocomplete, web-sql

```
$("#username").autocomplete({

target: $('#usersss'),

source: function() {
            var db = decoara.webdb.db;

            db.transaction(function(tx) {
                tx.executeSql("SELECT codigo as value, fantasia as label, tabela FROM clientes WHERE fantasia LIKE '%"+$("#username").val()+"%' LIMIT 4",null, 

                    function (tx, results) {
                        jsonClientes = '[';
                        console.log('Rows:'+results.rows.length);

                        for (i=0; i<results.rows.length; i++) {
                            row = results.rows.item(i);
                            jsonClientes += '{"value":'+row['value']+',"label":"'+row['label']+'"}';

                            if (i!=results.rows.length-1)
                                jsonClientes += ',';
                        }
                        jsonClientes += ']';
                        console.log(jsonClientes);
                        return $.parseJSON(jsonClientes);
                    },function (tx, e) {
                        console.log('error: ' + e.message);
                    }
                );  
            });
        },
        link: 'xxx.html?ops=',
        minLength: 1
    }); 
```

源函数返回此 json 代码：

```
 [{"value":27,"label":"NARDIM"},{"value":38,"label":"MORO"},{"value":39,"label":"MH"},{"value":40,"label":"IRMAO SAPIENZA"}] 
```

但是列表视图只是没有出现。当我使用相同的 JSON 数据将源更改为 var 时，它工作正常：

```
var autocompleteData = $.parseJSON('[{"value":27,"label":"NARDIM"},{"value":38,"label":"MORO"},{"value":39,"label":"MH"},{"value":40,"label":"IRMAO SAPIENZA"}]');

source: autocompleteData, 
```

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:53:05.290

Try declaring the jsonClientes as an array and then use .push to store values inside it. i.e

```
var jsonClientes = [];
                        console.log('Rows:'+results.rows.length);

                        for (i=0; i<results.rows.length; i++) {
                            row = results.rows.item(i);
                            jsonClientes.push ('{"value:"'+row.value+'",label:"'+row.label+'"},');
                        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T09:48:04.850

数据库的东西是异步发生的。当 .autocomplete() 被调用时，“源”上的函数被调用，并在那里执行数据库查询。但是这个数据库查询 tx.executeSql() 将在未来的任何时候完成（异步）并且自动完成的“源”不会有结果。

不幸的是，我还没有找到如何解决这类 jquery 插件的问题，所以我继续围绕我的特定数据库查询构建一个自动完成功能。基本上，我从数据库查询开始，并为 tx.executeSql() 提供一个回调，它将填充我的自动完成下拉列表。

# wpf - 用于集合的 WPF 数据模板

> ID：14904340
> 
> 赞同：4
> 
> 时间：2013-02-15T22:21:25.073
> 
> 标签：wpf, binding, collections, datatemplate

我现在必须低下头，因为我已经搜索了谷歌几个小时，但仍然不知道我做错了什么。

```
<DataTemplate DataType="{x:Type local:Controllers}">
    <ListBox>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <WrapPanel>
                    <TextBlock Text="{Binding Path=Port}" />
                </WrapPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</DataTemplate> 
```

我*要做*的是在此列表中显示任意数量的控制器对象。“Controllers”只是“List<Controller>”的别名。“端口”是每个“控制器”对象的属性，但当然不会出现在列表中。项目被正确地添加到列表所基于的集合中（集合实际上存储为显示此对象集合的 ContentControl 的 Content 属性），但集合本身中没有项目被显示。

起初我认为这可能是一个更新问题——集合在其初始的空状态下正确显示，但事实并非如此；如果我从已经填充的集合开始，我仍然没有得到任何项目。

帮帮我，欧比万。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:37:31.313

你需要绑定一些东西到`ListBox`. that something is just `{Binding}`，它指的是在运行时传入的`DataTemplate`s的实例。`DataType`

```
<DataTemplate DataType="{x:Type local:Controllers}">
    <ListBox ItemsSource="{Binding}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <WrapPanel>
                    <TextBlock Text="{Binding Path=Port}" />
                </WrapPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</DataTemplate> 
```

# java - 从文本文件中读取用户名和密码

> ID：14904344
> 
> 赞同：0
> 
> 时间：2013-02-15T22:21:37.243
> 
> 标签：java, testing, qa

我有一个具有以下格式的文本文件： `UserName` `Password` 在两个单独的行上。我正在尝试将用户名输入用户名字段（显然），并且仅在密码字段中输入密码。我的测试曾经`String`为每个元素定义了一个元素，一切都很好，因为我会简单地调用 String 元素。问题是我无法签入我的代码，因为它有我的个人活动目录登录信息。所以我试图从文本文件中读取它。我有以下代码来执行此操作：

```
 try
    {
        FileInputStream fstream = new FileInputStream(".../Documents/userInfo.txt");
        // Use DataInputStream to read binary NOT text.
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
        String strLine;
        int count = 0;
        strLine = br.readLine();
        count++;

        while(strLine!= null)
        {
            //Enter userName
            WebElement userName = driver.findElement(By.id("username"));
            userName.clear();
            userName.sendKeys(strLine);
            System.out.println(strLine);

            strLine = br.readLine();
            count++;
            //Enter Password
            WebElement password = driver.findElement(By.id("pword"));
            password.clear();
            password.sendKeys(strLine);
            System.out.println(strLine);
        }
        in.close();
        br.close();
    }
    catch (Exception e)
    {
        System.err.println("Error: " + e.getMessage());
    } 
```

我遇到的问题是它输入了用户名和密码，然后再次运行它，只将密码输入到用户名字段中。我知道这可能是我正在寻找的简单的东西。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:38:01.970

您是否尝试过使用 java.util.Properties 类从文本文件中读取密钥？它专为这些目的而设计，可用于读取/写入属性

示例代码

```
 Properties prop = new Properties();
        prop.load(new FileInputStream(".../Documents/userInfo.txt"));
        String userName = prop.getProperty("username");
        // Password should always be stored in the char array.
        char[] password = null;
        if (prop.getProperty("pword") != null) {
            password = prop.getProperty("pword").toCharArray();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:39:08.383

替换为以下代码：

```
 try
            {
                FileInputStream fstream = new FileInputStream("c:/Test/userInfo.txt");
                // Use DataInputStream to read binary NOT text.
                BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
                String strLine;
                int count = 0;

                count++;

                while((strLine = br.readLine())!= null)
                {
                    //Enter userName
                    WebElement userName = driver.findElement(By.id("username"));
                    userName.clear();
                    userName.sendKeys(strLine);
                    System.out.println(strLine);

                    strLine = br.readLine();
                    count++;
                    //Enter Password
                    WebElement password = driver.findElement(By.id("pword"));
                    password.clear();
                    password.sendKeys(strLine);
                    System.out.println(strLine);
                }
                in.close();
                br.close();
            }
            catch (Exception e)
            {
                System.err.println("Error: " + e.getMessage());
            }

    } 
```

但是我不明白你为什么要循环。您的文件中只有一个用户名/密码……还是有很多用户名/密码？

# iphone - 谷歌分析不发送数据！获得 0 个活跃用户

> ID：14904345
> 
> 赞同：2
> 
> 时间：2013-02-15T22:21:38.717
> 
> 标签：iphone, ios, google-analytics, google-analytics-api

我在我的-didFinishLaunchingWithOptions 中使用以下代码。但我在 GA 中看不到任何活跃用户。我需要添加更多配置吗？

注意：UAYourTrackingID 是正确的。

```
 // Optional: automatically send uncaught exceptions to Google Analytics.
[GAI sharedInstance].trackUncaughtExceptions = YES;
// Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
[GAI sharedInstance].dispatchInterval = 20;
// Optional: set debug to YES for extra debugging information.
[GAI sharedInstance].debug = YES;
// Create tracker instance.
[[GAI sharedInstance] trackerWithTrackingId:UAYourTrackingID];

[[[GAI sharedInstance] defaultTracker] sendView:@"RootView"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:01:21.773

我认为您的问题出在谷歌分析管理员上。

由于“v2”测试版，您需要在您的谷歌分析管理员中添加一个“应用”配置文件。所以现在你有了“web”配置文件和“app”配置文件。

你不需要改变你的“UAYourTrackingID”，它只是为了区分“web”和“app”。

检查此网页： http: [//support.google.com/analytics/bin/answer.py ?hl=en&answer=2614741](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2614741)

我希望这是你的问题^^

编辑：您可以在此“v2 迁移”页面 [https://developers.google.com/analytics/devguides/collection/ios/v2/migration上找到它的解释](https://developers.google.com/analytics/devguides/collection/ios/v2/migration)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T13:20:32.053

你不会在第一天看到他们。请耐心等待，直到第二天，您就会列出所有内容，至少对于我而言。活跃用户也需要一些时间才能出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T15:05:34.317

试试这个以防万一：

> id tracker = [[GAI sharedInstance] trackerWithTrackingId:@"YOUR ID"];
> [tracker sendView:@"you text"];

在您的应用程序委托中导入以下内容：

> 导入“GAI.h”
> 导入“GAITrackedViewController.h”

但是，请确保您的 GA 跟踪 ID**不是**用于网页……它必须是***特定于移动应用程序的。***

我希望它有帮助，祝你好运！

# c# - JsonConvert.SerializeObject 和 json.stringify 之间的怪异

> ID：14904346
> 
> 赞同：2
> 
> 时间：2013-02-15T22:21:43.017
> 
> 标签：c#, json.net

我正在使用 JavaScript 客户端和 ac# 套接字服务器以 JSON 格式来回发送消息。

在服务器上，我有一个多维数组，如下所示：

```
MapData[0,0,0] = 1;
MapData[0,0,1] = 2; 
```

它的尺寸是 900x900x2

如果我这样做，在 JavaScript 中我会`json.stringify(MapData)`得到这样的

`[[[1,2],[3,4]]]`ETC

但是c#`jsonconvert.serializeobject(MapData)`给了我这样的：[1,2,3,4]

有人可以解释为什么 c# serialize 和 JavaScript stringify 给出不同的值吗？

我试过了

```
int[][][] MapData = new int[900][][];
// Zero out the map
for (int variable1 = 0; variable1 <= 899; variable1++) {
    for (int variable2 = 0; variable2 <= 899; variable2++) {
        MapData[variable1][variable2][0] = 0;
    }
} 
```

但它在 MapData[variable1][variable2][0] = 0 处引发未处理的空异常；

终于在杰夫的帮助下弄明白了

```
int[][][] MapData = new int[900][][];
// Zero out the map
for (int a = 0; a < MapData.Length; a++)
{
    MapData[a] = new int[900][];
    for (int b = 0; b < MapData[a].Length; b++)
    {
        MapData[a][b] = new int[2];
        for (int c = 0; c < MapData[a][b].Length; c++)
                MapData[a][b][c] = 0;
    }
} 
```

然后 JsonConvert.SerializeObject(MapData) 像我想要的那样工作

谢谢你指出我正确的方向杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:30:27.213

`JsonConvert.SerializeObject()`只需使用迭代器来获取数组的内容并将其序列化。多维数组实现 IEnumerable，这就是您看到这种行为的原因。

`JsonConvert.SerializeObject()`会给你一个锯齿状数组，即你期望的结果`MapData[0][0][1]`。

如果将您的 .NET 代码更改为使用锯齿状数组是可行的，那么我建议您这样做。如果没有，您可以在序列化之前进行即时转换：

```
var jagged =  
    Enumerable.Range(0, MapData.GetLength(0)).Select(
        i => Enumerable.Range(0, MapData.GetLength(1)).Select(
            j => Enumerable.Range(0, MapData.GetLength(2)).Select(
                k => MapData[i,j,k]).ToArray()).ToArray()).ToArray();
JsonConvert.SerializeObject(jagged) 
```

# php - PHP没有将Base64图像写入html文件

> ID：14904347
> 
> 赞同：0
> 
> 时间：2013-02-15T22:21:44.420
> 
> 标签：php, png, base64, fwrite

我有这个带有一些和弦及其名称的数据字符串：

> $html="< img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAA4AQMAAAB31mwxAAAABlBMVEX///8AAABVwtN+AAAAAXRSTlMAQObYZgAAAEVJREFUeF5jIApwgDCIEAFhEKEEwkoIEYQaLID/PxD8AMmDARpDBsaww8JAqMHUTsBkGRkow84Ok4FQQ5zJZDAG0GTCAADwOiM87WVzggAAAABJRU5ErkJggg==" alt="E" /> E

当我尝试将其放入文件中时

> file_put_contents("data2.html",$html);

我只是创建一个空文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:26:08.320

`$html`将您的变量更改为：

```
$html = '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAA4AQMAAAB31mwxAAAABlBMVEX///8AAABVwtN+AAAAAXRSTlMAQObYZgAAAEVJREFUeF5jIApwgDCIEAFhEKEEwkoIEYQaLID/PxD8AMmDARpDBsaww8JAqMHUTsBkGRkow84Ok4FQQ5zJZDAG0GTCAADwOiM87WVzggAAAABJRU5ErkJggg==" alt="E" /> E'; 
```

然后做`file_put_contents('data2.html', $html);`部分。

我们在这里所做的是将双引号替换为单引号，这样您就不需要转义字符串中的双引号。我还用分号结束了你的字符串，这是丢失的。永远记得在你开始的时候结束一个陈述。

# php - 其他函数中的php函数变量

> ID：14904348
> 
> 赞同：0
> 
> 时间：2013-02-15T22:21:47.793
> 
> 标签：php, function, variables

```
function drop_2($drop_var2)
{

...

}

function drop_3($drop_var3)
{

...

}

function drop_4($drop_var4)
{

...

} 
```

如何在 drop_3 函数中使用 $drop_var2？+ $drop_var2 和 $drop_var3 在 drop_4 函数中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:30:01.267

你可以声明一个全局变量

```
function drop_4($drop_var4)
{
   global  $drop_var2,$drop_3;
...

} 
```

# lua - 确定模块文件位置

> ID：14904349
> 
> 赞同：4
> 
> 时间：2013-02-15T22:21:49.270
> 
> 标签：lua

在 Lua 中加载模块后，我想确定它对应的模块文件。在 python 中，您可以使用如下代码执行此操作：

```
import module_name
module_name.__file__ 
```

所以在Lua中，如果我做类似的事情

```
require 'math' 
```

接下来我应该放什么来确定这个模块的位置？顺便说一句，我实际上并不需要数学的位置，而是下载了一些其他第三方包，并且想知道在我调用 Lua 时实际使用了哪些构建文件副本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:56:07.180

`package`图书馆可能会给你你需要的东西。

例如，如果我`util.lua`的 Lua 路径中有这样我可以写：

```
require 'util' 
```

我可以像这样获取文件的路径：

```
print(package.searchpath('util', package.path)) 
```

# c# - 实体框架 Code First 和 Fluent API 使用小数类型有困难？

> ID：14904354
> 
> 赞同：1
> 
> 时间：2013-02-15T22:22:14.047
> 
> 标签：c#, code-first, entity-framework-4.3, fluent-interface

我需要帮助！

当我读取数据库的十进制值时，它会为 C# 返回不同的值。

例如：在数据库中值为 0.0000，而在 C# 代码中读取的值为 0.1200。

我需要知道什么地方都找不到。下面是代码：

C# 实体

```
public class Material
{
  public decimal SizeTub { get; set; }
} 
```

C# 映射

```
Property(e => e.SizeTub).HasColumnName("SIZE_TUB").HasPrecision(8, 4); 
```

C# 传递值

```
Material mat = new Material;
mat.SizeTub = 0.0000; 
```

C# 存储库保存

```
dbContext.Set<Material>().Add(mat);
dbContext.SaveChanges(); 
```

C# 存储库读取

```
returnMat = dbContext.Set<Material>().ToList(); 
```

C# 返回值

```
decimal sizeTub = returnMat[0].SizeTub; // sizeTub equals 0.12M 
```

记录的值是正确的，但是当我读取值时返回的值与记录的不同。

我明白了吗？

感谢您的帮助！

# java - 使用反射从另一个 .java 文件中获取变量

> ID：14904360
> 
> 赞同：1
> 
> 时间：2013-02-15T22:22:34.933
> 
> 标签：java, reflection

我已经设法通过获取和格式化 toString() 方法所在的类中的变量来使反射工作。

```
public class ReadFile {

public int test1 =0;
public String test2 = "hello";
Boolean test3 = false;
int test4 = 1;

public static void main(String[] args) throws IOException{

    ReadFile test = new ReadFile();

    System.out.println(test);

}

public String toString(){

    //Make a string builder so we can build up a string
    StringBuilder result = new StringBuilder();
    //Declare a new line constant
    final String NEW_LINE = System.getProperty("line.separator");

    //Gets the name of THIS Object
    result.append(this.getClass().getName() );
    result.append(" Class {" );
    result.append(NEW_LINE);

    //Determine fields declared in this class only (no fields of superclass)
    Field[] fields = this.getClass().getDeclaredFields();

    //Print field names paired with their values
    for ( Field field : fields  ) {
        result.append("  ");
        try {
            result.append(field.getType() + " "); 
            result.append( field.getName() );
            result.append(": ");
            //requires access to private field:
            result.append( field.get(this) );
        } catch ( IllegalAccessException ex ) {
            System.out.println(ex);
        }
        result.append(NEW_LINE);
    }
    result.append("}");

    return result.toString();
}
} 
```

但是我想知道是否可以在目录中指定一个特定的文件`toString()`来处理？

我已经尝试获取一个文件并将其插入，`System.out.println()`但我看到它的方式是您需要创建一个类的实例并为其提供实例以使其工作。所以我不确定如何以编程方式完成。

我一直在尝试这样的事情：

```
 Path path = FileSystems.getDefault().getPath("D:\\Directory\\Foo\\Bar\\Test.java", args);

    File file = path.toFile();

    System.out.println(file); 
```

但是我并没有走得太远，我主要是看看我是否可以将文件转换成任何可用的东西，但我不确定我需要做什么！

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:32:17.843

我认为您需要查看 ClassLoader API - 您需要获取一个新的[URLClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)并要求它将您的 .java 文件加载到 JVM 中。然后你可以反思一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:28:24.067

您可以尝试从文件 (D:\Directory\Foo\Bar\Test.java) 中读取包信息，然后尝试按其名称加载类：

```
Class.forName(nameOfTheClass) 
```

[Java API 类](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)

# php - 使用单选按钮

> ID：14904364
> 
> 赞同：0
> 
> 时间：2013-02-15T22:23:00.257
> 
> 标签：php, html, radio-button

我正在使用单选按钮进行安全检查，即使我认为不应该出现错误，它也会返回错误。知道我做错了什么吗？

这是要更新的课程

```
public function set ($iStatus)
{
    $this->iStatus = $iStatus;
}
public function create ()
{
    if ($this->iStatus != 0 || $this->iStatus != 1 || $this->iStatus != 2)
    {
        echo "Your idea must have a valid status";
    }
    else
    {
        //update the database
    }
} 
```

然后是html表单

```
if (isset($_POST["submit"]))
{
    $class->set($_POST["status"]);
    $class->create();
}
else
{
    <input type="radio" name="status" value="0" checked/> 
    <input type="radio" name="status" value="1" /> 
    <input type="radio" name="status" value="2" /> 
} 
```

并返回错误有效状态。我想也许输入将所有内容都保存为字符串或字符，所以我重新检查错误说

```
if ($this->iStatus != '0') { /*blah*/ } 
```

但这也没有用。所以我很困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:24:47.087

错误在 if 语句中。您应该替换 || 和 ＆＆

否则您将始终收到错误消息

因为即使它是 0 你的 if 语句也会返回 true 因为 != 1 是 true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:34:21.910

你的逻辑是倒退的：

```
if ($this->iStatus != 0 || $this->iStatus != 1 || $this->iStatus != 2) 
```

应该：

```
if ($this->iStatus != 0 && $this->iStatus != 1 && $this->iStatus != 2) 
```

全面测试：

```
<?php
class foo{
    private $iStatus;

    public function set($iStatus){
        $this->iStatus = $iStatus;
    }
    public function create(){
        if ($this->iStatus != 0 && $this->iStatus != 1 && $this->iStatus != 2){
            echo "Your idea must have a valid status";
        }else{
            echo "All good";
        }
    }
}

if (isset($_POST["submit"])){
    $class = new foo;
    $class->set($_POST["status"]);
    $class->create();
}else{
    echo '
    <form method="post" action="./">
    <input type="radio" name="status" value="0" checked>
    <input type="radio" name="status" value="1"> 
    <input type="radio" name="status" value="2">
    <input type="radio" name="status" value="3">
    <input name="submit" type="submit">
    </form>';
}?> 
```

# java - 如何重新加载java应用程序？

> ID：14904365
> 
> 赞同：0
> 
> 时间：2013-02-15T22:23:18.600
> 
> 标签：java

我想在我的应用程序中有一个简单地重新加载应用程序的按钮。

本质上，我只想重新运行 JAR 和 System.exit() - 但我不想使用 Runtime.exec() 执行此操作，因为我需要它在多个操作系统上工作。

我真的什么都想不出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T12:26:38.763

您可以更改哪个是您的主类，并在写入文件后关闭旧的主类，或者让它返回一个布尔值，以显示按钮是否被按下，所以新的主类可以简单地有一个while 循环启动旧的主类。

# c# - 删除字符串的某个部分

> ID：14904369
> 
> 赞同：1
> 
> 时间：2013-02-15T22:23:32.973
> 
> 标签：c#, string

共有三种字符串：

*   字符串(1)_2013-02-15
*   另一个字符串（2）_2013-02-15
*   yetAnotherString(3)_2013-02-15

直到左括号，每个字符串都是常数。括号之间的数字会改变，所有三个字符串的长度可以是一个、两个或三个字符。日期将是当天的日期。

我想删除括号和它们之间的数字。期望的结果如下：

*   string_2013-02-15
*   另一个String_2013-02-15
*   yetAnotherString_2013-02-15

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:27:59.310

```
string MyString = "string(1)_2013-02-15";
int firstParenIndex = MyString.IndexOf("(");
int secondParenIndex = MyString.IndexOf(")");
string String1 = MyString.Substring(0,firstParenIndex);
string String2 = MyString.Substring(seconParenIndex+1);
string finalString = String1 + String2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:29:21.627

使用简单的`String`方法：

```
int leftBrace =  str1.IndexOf('(');
int rightBrace = str1.IndexOf(')', leftBrace);
str1 = str1.Remove(leftBrace, rightBrace - leftBrace + 1); 
```

[**演示**](http://ideone.com/3hL14X)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T22:29:43.903

```
var input = "string(1)_2013-02-15";
var result = Regex.Replace(input, "\\([0-9]+\\)", string.Empty); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T22:27:33.140

您可以使用 string.split('(') 并以这种方式删除，例如，如果您知道只有一组括号：

```
public string RemoveBrackets(string Message)
{
    string temp1 = Message.Split('(')[0];
    string temp2 = Message.Split(')')[1];
    string newMessage = temp1 + temp2;
    return newMessage;
} 
```

反正就是这样的：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T22:28:09.973

试试这个：

```
int index1 = test2.IndexOf('(');
int index2 = test2.LastIndexOf(')', index1 + 1);
string result2 = test2.Remove(index1, index2 - index1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T22:52:56.233

考虑到 9999 年之前的日期部分的恒定长度已经足够远，您可以通过减少一次调用来优化代码（找到第二个括号的位置如下：

```
string s = "something(123)_2013-02-16";
string result = s.Substring(0, s.IndexOf("(")) + s.Substring((s.Length - 11), 11); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T23:04:29.280

即使字符串的第一部分包含*和/或*，使用`Substring()`and方法也有效。`LastIndexOf()``(` *`)`*

 *```
string s = "string(1)_2013-02-15";
s = s.Substring(0, s.LastIndexOf('(')) + s.Substring(s.LastIndexOf(')')+1); 
```*

# oop - class Foo {this: SomeTraitType => 是什么意思？

> ID：14904370
> 
> 赞同：1
> 
> 时间：2013-02-15T22:23:34.403
> 
> 标签：oop, scala, traits

我有这个问题是基于 Akka Concurrency 预印本（最终版本尚不可用），这里没有解释就使用了。

在该课程的第 1 版中，它们具有：

```
class Altimeter extends Actor with ActorLogging with EventSource{
...
} 
```

声称 Altimeter 现在与 EventSource 紧密结合，因此测试 Altimeter 还需要测试 EventSource。修复的建议更改如下：

```
--- a/src/main/scala/Altimeter.scala
+++ b/src/main/scala/Altimeter.scala
@@ -9,9 +9,10 @@ import  scala.concurrent.ExecutionContext.Implicits.global
 object Altimeter{
   case class RateChange(amount: Float) //sent to Altimeter
   case class AltitudeUpdate(altitude: Double)
+  def apply() = new Altimeter with ProductionEventSource
 }

-class Altimeter extends Actor with ActorLogging with EventSource{
+class Altimeter extends Actor with ActorLogging{ this: EventSource =>
   import Altimeter._

   val ceiling = 43000       //feet
diff --git a/src/main/scala/EventSource.scala b/src/main/scala/EventSource.scala
index 1fd5578..ded4f38 100755
--- a/src/main/scala/EventSource.scala
+++ b/src/main/scala/EventSource.scala
@@ -8,7 +8,12 @@ object EventSource{
   case class UnregisterListener(listener: ActorRef)
 }

-trait EventSource { this: Actor =>
+trait EventSource{
+  def sendEvent[T](event: T): Unit
+  def eventSourceReceive: Actor.Receive
+}
+
+trait ProductionEventSource { this: Actor =>
   import EventSource._ 
```

我的第一个问题是我不明白`this: SomeTraitType =>`完成了什么。字面意思是说该类是 SomeTraitType 类型吗？

我的第二个问题是，that 和 using 有什么区别`extends SomeTraitType`，为什么它有优势？如果我知道前者的意思，也许这会很明显。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:41:58.393

该表示法 ( `this: EventSource => ...`) 被称为“自类型注解”，它限制了一个特征可以混合到另一个继承结构中的方式。`this`可以使用任何名称（不仅仅是）。`self`是另一种常见的。

这种使用或多或少是蛋糕模式（或其简化）。使用该术语，您可以找到许多有助于解释其用途的资源。

自类型注释的另一种用法（通常不受约束，简单地`self => ...`）创建一个别名，`this`该别名可用于嵌套范围（嵌套类）中，其中外部`this`被屏蔽。

# javascript - 获取脚本标签的数据属性？

> ID：14904378
> 
> 赞同：38
> 
> 时间：2013-02-15T22:23:58.433
> 
> 标签：javascript, script-tag

假设我有以下脚本标签：

```
<script async data-id="p3PkBtuA" src="//example.com/embed.js"></script> 
```

在该`embed.js`文件中，如何获取`data-id`属性的值？

我试图让`embed.js`文件尽可能轻，所以理想情况下它不需要使用某种 javascript 库。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-03-30T13:38:45.217

对于支持 html5 的现代浏览器，您可以使用它[`document.currentScript`](https://developer.mozilla.org/en-US/docs/Web/API/document.currentScript)来获取当前脚本元素。

否则，使用[`querySelector()`](https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector)通过**id**或**attribute**选择您的脚本元素。

请注意，我们不使用该`src`属性，因为如果您通过 CDN 交付或在开发和生产环境之间存在差异，则该属性可能很脆弱。

**嵌入.js**

```
(function(){
    // We look for:
    //  A `script` element
    //  With a `data-id` attribute
    //  And a `data-name` attribute equal to "MyUniqueName"
    var me = document.querySelector('script[data-id][data-name="MyUniqueName"]');
    var id = me.getAttribute('data-id');
})(); 
```

**在主机 html 中：**

```
<script async 
  data-id="p3PkBtuA" 
  data-name="MyUniqueName" 
  src="//example.com/embed.js">
</script> 
```

这种方法的缺点是您无法成功嵌入两个相同的脚本。这是一个非常罕见的情况，但可能会发生。

请注意，我个人`data-id`会选择脚本而不是传递数据，并将唯一数据放在更具描述性的标签中：

```
<script async 
  data-id="MyUniqueName" 
  data-token="p3PkBtuA" 
  src="//example.com/embed.js">
</script> 
```

这将让我使用以下内容：

```
var token = document
  .querySelector('script[data-id="MyUniqueName"][data-token]')
  .getAttribute('data-token'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T22:26:30.927

这`embed.js`是在 DOM 中呈现的，因此您可以完全访问它。要么给它一个`id`并`document.getElementById`使用`querySelctorAll`要么`getElementsByTagName`

在你的内部`embed.js`，你可以有类似的东西：

```
 var scripts = document.getElementsByTagName('script');
  for(var i = 0, l = scripts.length; i < l; i++){
    if(scripts[i].src === '//example.com/embed.js'){
      alert(scripts[i].getAttribute('data-id'));
      break;
    }
  } 
```

你明白了

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-19T16:23:04.180

```
var attributeValue = Array.prototype.slice.apply(document.scripts).filter(
     function(script){
         return script.src.indexOf('script.source.com/big/') > -1;
     })[0].attributes["atrributeName"].value; 
```

脚本标签在哪里`<sript src="www.script.source.com/big/dud/baa.js" atrributeName="some value"><script>`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T22:25:10.333

> 在那个 embed.js 文件中，如何获取 data-id 属性的值？

您必须解析 DOM 并查找相应的`<script>`标签，然后从中获取属性。看看[`document.getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)这将允许您检索`<script>`当前页面上的所有元素。然后循环这个方法返回的结果数组，使用`src`属性匹配正确的脚本元素，然后读取你感兴趣的其他属性。

```
var scripts = document.getElementsByTagName('script');
for (var i = 0; i < scripts.length; i++) {
    var script = scripts[i];
    // you might consider using a regex here
    if (script.getAttribute('src') == '//example.com/embed.js') {
        // we've got a match
        var dataId = script.getAttribute('data-id');
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-14T20:20:32.577

```
var scripts = document.getElementsByTagName('script'); // load into a variable all the scripts of the page
for (var i = 0; i < scripts.length; i++) { // parse all scripts
        var script = scripts[i];
        if (script.getAttribute('src') == '//example.com/embed.js') {
            alert(script.dataset.id); // Show only specified script
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-11T05:25:05.100

## 使用[currentScript](https://developer.mozilla.org/en-US/docs/Web/API/Document/currentScript)

脚本标签：

```
<script async data-id="p3PkBtuA" data-foo ="bar" src="//example.com/example.js"></script> 
```

在 example.js 文件中：

```
let id = document.currentScript.getAttribute('data-id');
let foo = document.currentScript.getAttribute('data-foo');  

console.log(id) // p3PkBtuA
console.log(foo) // bar 
```

# flash - IE8 自动启动无法控制的“幻影”flash 视频

> ID：14904393
> 
> 赞同：1
> 
> 时间：2013-02-15T22:25:23.577
> 
> 标签：flash, internet-explorer, internet-explorer-8, swfobject

我有一个项目，它有一个自动启动的 Flash 视频，带有暂停/重播/静音/取消静音的控件。它使用 cookie 来跟踪用户更改，因此如果用户将其关闭，它就不会自动启动。

但在 Internet Explorer 8 中，无论如何它都会以某种方式自动播放音频版本。我无法定位幻影视频，但我可以完全控制我看到的视频；我可以开始、暂停、倒带、静音等。

* * *

## 我想弄清楚的是：

*   IE8是怎么自动开始播放的？
*   有没有办法瞄准幻象音频并将其静音？
*   有没有办法停止所有计算机音频，然后重新开始视频？

如果您有任何我可以使用的不同攻击计划，或者对此有任何想法，我将不胜感激。

开发站点位于 ** 已删除 ** 这只是 IE8 及以下版本中的错误；我只关心在 IE8 中修复它。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T02:15:36.190

因此，我通过针对 IE8 及更低版本并将自动启动设置为关闭来解决此问题。然后，我找到了脚本创建函数以与 flash 交互的位置，并将它们调整为以 IE8 为目标，如果 cookie 设置为自动启动，则启动电影。

效果很好。

如果有人需要示例，我可以发布更多信息。

# c++ - 是什么导致指针复位？

> ID：14904395
> 
> 赞同：-2
> 
> 时间：2013-02-15T22:25:56.323
> 
> 标签：c++, inheritance, linked-list

我正在开发一个类程序，该程序从模板类中创建一个链接列表，以保存有关学生、教师和管理的信息。Student、Administrator 和 Faculty 都继承了一个名为 Person 的类。我的问题在我的列表类和我的 RecordsOffice 类中，当程序离开 addToList 函数时，头指针重置它的数据，我看不到我刚刚添加到列表中的内容。

这是 TemplatedList 类

```
//Author:Angelo Todaro
//TemplatedList.h
//Header file for the TemplatedList class

#include "person.h"
#include "student.h"
#include "administrator.h"
#include "faculty.h"

using namespace std;
#ifndef TemplatedList_H
#define TemplatedList_H

template<class T> 
struct Node{
    T *data;
    Node *next;
};

template <class T, typename T2>
class TemplatedList{
public:
    /*Default Constructor
    *Constructs an object of the TemplatedList class*/
    TemplatedList();

    /*Default Destructor
    *Destructs an object of the TemplatedList class*/
    ~TemplatedList();

    /*Accessor Method for head node
    *Provides user access to the value of the head node*/
    T getHead() const;

    /*Modifier Method for head node
    *Provides the user access to change the value of the head node*/
    void setHead(T *newHead);

    /*addToList
    *Adds a Student to the list*/
    void addToList(T *newStudent);

    /*deleteFromList
    *Deletes a Student from the list*/
    void deleteFromList(T2 number);

    /*printStudent
    *prints the information of the specified student*/
    void printSingle(T2 number);

    /*printList
    *prints the entire list of students*/
    void printList();

private:
    T *head;
};

#endif

/*Default Constructor
*Constructs an object of the TemplatedList class*/
template <class T, typename T2>
TemplatedList<T,T2>::TemplatedList(){
    head = new T;
    head->next=NULL;
    head->data=NULL;
}

/*Default Destructor
*Destructs an object of the TemplatedList class*/
template <class T, typename T2>
TemplatedList<T,T2>::~TemplatedList(){
    delete head;
    head=NULL;
}

/*Accessor Method for head node
*Provides user access to the value of the head node*/
template <class T, typename T2>
T TemplatedList<T,T2>::getHead() const{
    return head;
}

/*Modifier Method for head node
*Provides the user access to change the value of the head node*/
template <class T, typename T2>
void TemplatedList<T,T2>::setHead(T *newHead){
    head=newHead;
}

/*addToList
*Adds a Person to the list*/
template <class T, typename T2>
void TemplatedList<T,T2>::addToList(T *newPerson){
    T *curr=head;
    T *prev=curr;
    cout << "Adding ";
    newPerson->data->print();
    cout << endl;
    if(head->next==NULL && head->data==NULL)//if list has not been initialized
    {

        head->data=newPerson->data;
        head->data->print();
        head->next=NULL;
    }
    //if new Person's M Number is less than the head's MNumber
    else if(newPerson->data->getMNumber()<head->data->getMNumber())
    {
        newPerson->next=head->next;
        head = newPerson;
    }
    else //all other cases
    {
        while(curr!=NULL && 
                newPerson->data->getMNumber()>curr->data->getMNumber())
        {
            prev=curr;
            curr=curr->next;
        }
            newPerson->next=curr;
            prev->next= newPerson;
        if(curr==NULL)
            newPerson->next=NULL;
    }

}

/*deleteFromList
*Deletes a Person from the list*/
template <class T, typename T2>
void TemplatedList<T,T2>::deleteFromList(T2 number){
    T *curr=head;
    T *prev=head;
    if(head==NULL||head->next==NULL){
        cout << "Can not delete Person (M" << number << "), NOT found!" << endl;
    }
    //if first Person is equal to the selected one to delete
    else if(curr->data->getMNumber()==number)
    {
        prev->next=curr->next;
        delete curr;
        curr=NULL;
    }
    else
    {
        while(curr!=NULL &&
            curr->data->getMNumber()!=number)
        {
            prev=curr;
            curr=curr->next;
        }
        if(curr!=NULL)//If not at end of list
        {
            prev->next=curr->next;
            delete curr;
            curr = NULL;

        }
        else//there is no listing
        {
            cout << "Can not delete Person (M" << number << "), NOT found!" << endl;
        }
    }
    cout << endl;
}

/*printPerson
*prints the information of the specified Person*/
template <class T, typename T2>
void TemplatedList<T,T2>::printSingle(T2 number){
    T *curr=head;
    T *prev=curr;
    while(curr!=NULL && curr->data->getMNumber()!=number)
    {
        prev=curr;
        curr=curr->next;
    }
    if(curr!=NULL)//if match is found
    {
        curr->data->print();
    }
    else//there is no listing
    {
        cout << "Can not print person (M" << number << "), NOT found!" << endl << endl;
    }

}

/*printList
*prints the entire list of Persons*/
template <class T, typename T2>
void TemplatedList<T,T2>::printList(){
    T *curr=head;
    T *prev=curr;
    while(curr!=NULL)
    {
        curr->data->print();
        prev=curr;
        curr=curr->next;
    }
    cout << endl;
} 
```

这是 RecordsOffice 类的实现

```
//Author:Angelo Todaro
//recordsOffice.cpp
//Implementation file for the RecordsOffice class

#include <iostream>
#include <fstream>
#include <cassert>
#include "recordsOffice.h"

/*Default Constructor
Creates an object of the RecordsOffice class*/
RecordsOffice::RecordsOffice(){

}

/*Default Destructor
*Destructs an object of the RecordsOffice class*/
RecordsOffice::~RecordsOffice(){

}

/*Accessor Method for List of Persons
*Provides the user with a way to retrieve m_List*/
TemplatedList<Node<Person>,int> RecordsOffice::getList() const{
    return m_List;
}

/*Modifier Method for List of Persons
*provides a way for the user to modify m_List*/
void RecordsOffice::setList(TemplatedList<Node<Person>,int> newList){
    m_List = newList;
}

/*parseCommands
*parses the command entered and calls appropriate function*/
void RecordsOffice::parseCommands(string fileName){
    ifstream infile;//create new file stream
    infile.open(fileName);//opens file
    assert(infile);//check for valid file
    char command;//stores the value of the current command

    while(infile >> command)
    {
        if(command=='A')
        {
            string name, email, title;//temporary strings  to hold values of Person
            int mnumber;//temporary ints to hold values of Person
            infile >> name >> mnumber >> email >> title;
            Administrator admin = Administrator(name,mnumber,email,title);
            Node<Person> *newper = new Node<Person>;
            newper->data=&admin;
            newper->next=NULL;
            m_List.addToList(newper);
        }
        else if(command=='F')
        {

            string name, email, department;//temporary strings  to hold values of Person
            int mnumber;//temporary ints to hold values of Person
            bool tenured;
            infile >> name >> mnumber >> email >> department >> tenured;
            Faculty fac= Faculty(name,mnumber,email,tenured,department);
            Node<Person> *newper = new Node<Person>;
            newper->data=&fac;
            newper->next=NULL;
            m_List.addToList(newper);
        }
        else if(command=='S')
        {
            string name, email, major;//temporary strings  to hold values of Person
            int mnumber, year;//temporary ints to hold values of Person
            infile >> name >> mnumber >> email >> year >> major;
            Student stu= Student(name,mnumber,email,year,major);
            Node<Person> *newper = new Node<Person>;
            newper->data=&stu;
            newper->next=NULL;
            m_List.addToList(newper);
        }
        else if(command=='D')
        {
                int mnum;//int to store mnumber
                infile >> mnum;
                cout << "Deleting M" << mnum << endl;
                m_List.deleteFromList(mnum);
        }
        else if(command=='P')
        {
                int mnum;//int to store mnumber
                infile >> mnum;
                cout << "Printing M" << mnum << endl;
                m_List.printSingle(mnum);
        }
        else if(command=='L')
        {
                cout << "Listing all Persons" << endl;
                m_List.printList();
        }

    }
} 
```

程序正在读取的文件包含

```
A   Doe 4444    jdoe3@mtsu.com  President
L
P   4444
F   Johnson 2222    cjLittle@mtsu.com   English 0
P   2222
S   Reed    9999    reed@mtsu.com   1   History
P   9999
L
D   9999
D   2222
D   4444 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:32:06.903

`newper->data`总是指向局部变量，当局部变量超出范围时，它们实际上是被释放的，`newper->data`不再指向有效数据。您需要使用动态存储持续时间`new`。

```
Administrator admin = Administrator(name,mnumber,email,title);
newper->data=&admin;

Faculty fac= Faculty(name,mnumber,email,tenured,department);
newper->data=&fac;

Student stu= Student(name,mnumber,email,year,major);
newper->data=&stu; 
```

尝试：

```
Person *admin = new Administrator(name,mnumber,email,title);
newper->data = admin;

Person *fac = new Faculty(name,mnumber,email,tenured,department);
newper->data = fac;

Person * stu = new Student(name,mnumber,email,year,major);
newper->data=stu; 
```

# mysql - 如何在同一张桌子上加入两个选择

> ID：14904398
> 
> 赞同：1
> 
> 时间：2013-02-15T22:26:07.837
> 
> 标签：mysql

我有两个选择语句，例如

```
Select author_id, count(text) from posts group by author_id

select author_id, count(text) from posts where postcounter =1 group by author_id 
```

有没有办法在一个查询中组合这两个语句？结果长度不同，因此需要在第二个结果集中插入一些 0。

非常感谢您的帮助

最好的问候，西蒙娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:28:23.260

这是你要找的吗？

```
select author_id, 
   sum(case when postcounter = 1 then 1 else 0 end) count1, 
   sum(case when postcounter <> 1 then 1 else 0 end) count2,
   count(text) allcount
from posts  
group by author_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:29:42.743

您应该能够在单个查询中使用：

```
Select author_id, 
  count(text) TextCount,
  count(case when postcounter=1 then text end) PostCount
from posts 
group by author_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:30:05.793

您可以尝试使用 union all 语句吗？

```
 SELECT `id`,sum(`count`) FROM (
Select  author_id as `id`, count(text) as `count` from posts group by author_id 
UNION ALL 
select author_id as `id`, count(text) as `count` from posts where postcounter =1 group by author_id
    ) 
```

# php - 使用 HTACCESS 根据变量重定向到 url

> ID：14904404
> 
> 赞同：0
> 
> 时间：2013-02-15T22:27:09.070
> 
> 标签：php, .htaccess, redirect, social-networking

我想提供一项服务，允许用户获得直接链接来执行诸如关注或订阅之类的操作（出于明显的原因不告诉）。

因此使用 htaccess 或 php（哪个更好），我怎样才能执行以下 example.com/insertusernamehere 自动重定向到 somepopularsocialmediasite.com/?follow_user=blahblahblah

请务必注意，example.com 站点与 somepopularsocialmediasite.com 位于不同的服务器上。

我还想要一些 .html 页面，包括 index.html、about.html 等，所以我需要一种方法来排除某些查询/文件的重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:43:42.707

我假设您可以以某种方式将用户名存储在变量中，因此我们可以执行以下操作：

```
$current_url = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
$username = 'some_username_you_get_somehow';
$url_username = substr(strrchr($current_url, '/'), 1);

if ($url_username == $username)
{
    header("Location: http://somepopularsocialmediasite.com/?follow_user={$username}/");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:15:32.137

如果您的服务器上存在的所有页面（`index.html`等）都具有`.html`扩展名，您可以简单地执行以下操作：

```
RewriteRule ^([a-zA-Z0-9]+)$ http://socialsite.com/?follow_user=$1 [R=301, L] 
```

基本上，该规则不会匹配任何包含扩展名的内容，因为它只查找不区分大小写的字母和数字。如果您愿意，您甚至可以在其中添加连字符。

# javascript - 标记中的附加属性以将值传递给函数

> ID：14904406
> 
> 赞同：1
> 
> 时间：2013-02-15T22:27:20.237
> 
> 标签：javascript, html

```
 <td><img 
    name="Brown Corkboard"
    title="800.00"
    id="nikolas"
    src="materials/corkboardtexture.png"
    alt="600"
    onclick="reply_click(this.src,this.name,this.title,this.alt)"
    width="200"
    height="150" 
```

我在 HTML 表格中有这张图片。我正在使用属性标题和 alt 来指定执行单击​​图像时调用的函数所需的一些值。

我一定走错路了。我希望在单击图像时将许多不同的变量发送到我的函数。但是我没有选择，因为我已经用完了 title 属性和 alt 属性。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:29:31.657

您可以添加任何您想要的任意属性，并将它们用作参数。

```
<img data-count="1" data-tree="oak" ... onclick=('reply_click(this);')> 
```

或任何你喜欢的。

```
function reply_click(clicked_thing) {
    var tree = clicked_thing.getAttribute('data-tree');
    console.log(tree);
} 
```

通常我不在`onclick`我的图像标签中使用，而是使用 javascript 将函数绑定到事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:29:42.183

这些天的标准是`data-*`，例如：

```
<tr data-id="6"><td data-desc="Test blah blah blah">Test</td></tr>
<tr data-id="7"><td data-desc="Gary the disabled penguin">Gary</td></tr> 
```

是常用的。这取决于您的确切需求，但我通常会建议数据属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:13:49.740

正如其他人所回答`data-`的那样，*如果*您需要在 HTML 属性中携带任意数据，则属性是您的选择。和属性根本不应该用于此类目的，因为这会干扰定义的含义和这些属性的使用`alt`。`title`

该示例没有说明为什么您不能简单地将数据写为函数调用中的参数，例如`onclick="reply_click(this.src, this.name, 800.00, 600)`.

或者，您可以在 DOM 内部或外部的 JavaScript 对象中写入数据，并让您的函数直接获取它们，例如使用`id`属性值作为键。

# javascript - 调整 javascript 横幅广告的大小

> ID：14904413
> 
> 赞同：0
> 
> 时间：2013-02-15T22:27:49.903
> 
> 标签：javascript, html, css

我应该在我们网站的侧面板上放一个广告，该广告实际上是 PayPal 提供的一段 javascript。这是脚本：

```
<script type="text/javascript" data-pp-pubid="xxxxxxx" data-pp-placementtype="190x100"> (function (d, t) {
"use strict";
var s = d.getElementsByTagName(t)[0], n = d.createElement(t);
n.src = "//paypal.adtag.where.com/merchant.js";
s.parentNode.insertBefore(n, s);
}(document, "script"));
</script> 
```

问题是我们在网站上没有适合他们提供的任何横幅尺寸的空间。上面那个是最接近的，但我需要它宽 10px。您不能只更改脚本中的大小，如果您这样做，它将不会显示，我假设 PayPal 结束检查中的某些内容，如果脚本已被更改，则不会显示它。

我认为必须有一种方法可以将它放在一个`<div>`或一个表格中并强制大小为 200px 宽，但我似乎无法让任何一种方法起作用。有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:58:58.467

~~[找到这个网站](http://comments.gmane.org/gmane.user-groups.linux.ilug.general/47427)~~（死链接）

哪个有答案。我对其进行了一些调整（并修正了一个错字），但它确实起到了作用。我一直在尝试相同的一般想法，但没有成功，一定是语法，或者只是对 CSS 的某些部分理解不佳。

```
 <div id='paypal-banner'>
   <style  type='text/css'>
      div#paypal-banner img { width: 200px }
   </style>
    <script type="text/javascript" data-pp-pubid="xxxxxxxxxx" data-pp- placementtype="190x100"> (function (d, t) {
"use strict";
var s = d.getElementsByTagName(t)[0], n = d.createElement(t);
n.src = "//paypal.adtag.where.com/merchant.js";
s.parentNode.insertBefore(n, s);
}(document, "script"));
</script> 
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T17:47:07.913

```
<script type="text/javascript" data-pp-pubid="4bb40d075a" data-pp-placementtype="190x100">
(function (d, t) {"use strict";var s = d.getElementsByTagName(t)[0], n = d.createElement(t);n.src = "//paypal.adtag.where.com/merchant.js";s.parentNode.insertBefore(n,s);}(document, "script"));
</script> 
```

# php - 进入存储过程，需要帮助转换查询

> ID：14904416
> 
> 赞同：2
> 
> 时间：2013-02-15T22:28:05.113
> 
> 标签：php, mysql, stored-procedures

我从未使用过存储过程，但是当我需要将查询移至服务器时，我面临着现实。请协助。

这是我通过 PHP 创建的函数：

```
function getResults($userid) {
        $query = "select * from myTable where iduser= ?";
        $stmt = $this->openDb()->prepare($query);
        $stmt->bindValue(1, $userid, PDO::PARAM_INT);
        $stmt->execute();
        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
        return $rows;
    } 
```

我从未使用过存储过程，也不知道如何处理：

1.  如何将此作为存储过程添加到 MySQL，以便我可以向它提交一个整数变量
2.  如何“准备”我将提交给存储过程的整数变量
3.  如何将结果集从存储过程检索回 php 函数。

如果您能提供帮助，我将审查您的解决方案，并能够自行继续。

我检查了谷歌，我发现要创建一个存储过程，我需要像这样开始：

```
CREATE PROCEDURE `getResults` (IN userid INT)  
BEGIN  

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:24:24.310

**MYSQL：**

```
DELIMITER $$

DROP PROCEDURE IF EXISTS getResults$$

CREATE PROCEDURE getResults(IN I_USERID INT(10))
BEGIN
    SELECT * FROM `myTable` WHERE iduser = I_USERID;
END$$

DELIMITER ; 
```

**PHP：**

```
$sql = "CALL getResults(?)";
$stmt = $this->openDb()->prepare($sql);
$stmt->execute(array($userid));

while ($row = $stmt->fetchObject()) {
    //use fields like this: $row->fieldname1, $row->fieldname2...
}
$stmt->closeCursor(); 
```

附带说明一下，我建议明确命名您的字段，而不是`*`在查询中使用选择器。

希望有帮助，S。

# html - 在标题中使用标题标签和大字体有什么区别？ 标签？

> ID：14904417
> 
> 赞同：3
> 
> 时间：2013-02-15T22:28:05.283
> 
> 标签：html

在标签中使用像 h1、h6 这样的标题标签和大字体有什么区别`<p>`？

我感兴趣的是它不仅会影响代码的可读性，还会影响其他导致创建标题标签而不是在标签中使用更大字体的问题`<p>`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T22:29:39.863

> 在标签中使用标题标签和大字体有什么区别`<p>`？

[语义](http://en.wikipedia.org/wiki/Semantic_HTML)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T22:31:01.143

从功能上讲，什么都没有。语义上，一切。 `<p>`描述一个段落，并`<h*>`描述标题。如果要使用您的 HTML，那将有很大的不同。查看[HTML 大纲](http://gsnedders.html5.org/outliner/)，了解搜索引擎/无头浏览器/无 CSS 浏览器将如何解释`<p>`vs.`<h*>`标签以及它如何布置您的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:31:23.017

这不仅会影响其他开发人员或读者的可读性，而且对搜索引擎来说也很重要。您想为代码赋予语义含义。让更重要的词更有分量。当搜索引擎蜘蛛抓取您的网站时，更容易识别您的内容是关于什么的。这是 SEO 的好习惯。

# java - Vineet Reynolds / java-ee-6-galleria 项目使用 MySQL 而不是 Derby 运行

> ID：14904424
> 
> 赞同：0
> 
> 时间：2013-02-15T22:28:21.423
> 
> 标签：java, hibernate, maven, jpa, eclipselink

我正在尝试关注/了解有关 Java EE 的更多信息，并找到了一篇非常好的文章[http://blog.eisele.net/2012/03/java-ee-6-running-galleria-on-glassfish.html](http://blog.eisele.net/2012/03/java-ee-6-running-galleria-on-glassfish.html)这是一篇如何在 Glassfish 上运行它的分步指南。原始源代码可以在“hg clone [https://bitbucket.org/VineetReynolds/java-ee-6-galleria](https://bitbucket.org/VineetReynolds/java-ee-6-galleria) ”找到

但是，现在我想将 Derby 数据库更改为 MySQL 和 Eclipselink，因为我更熟悉它。我已成功运行 *IntegrationTest(s) 但未运行单元测试 RepositoryTest(s)。

我已将 persistence-test.xml 文件更改为：

```
 <?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
  version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

  <persistence-unit name="galleria-ejb" transaction-type="JTA">  

  <!-- <persistence-unit name="galleria-ejb" transaction-type="RESOURCE_LOCAL"> -->
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>jdbc/galleriaDS</jta-data-source> <!-- Added -->

    <class>info.galleria.domain.Album</class>
    <class>info.galleria.domain.Group</class>
    <class>info.galleria.domain.Photo</class>
    <class>info.galleria.domain.User</class>

    <properties>        
        <property name="eclipselink.ddl-generation" value="none" />        
        <property name="eclipselink.logging.level" value="FINEST" />  

    </properties>
  </persistence-unit>

</persistence> 
```

当我运行 mvn clean test -Dtest=AlbumRepositoryTest#testCreateNewAlbum 我得到以下信息：

> EL Info]：2013-02-15 23:20:16.615--ServerSession(4248874)--Thread(Thread[main,5,main])--EclipseLink，版本：Eclipse Persistence Services - 2.3.2.v20111125-r10461 org.omg.CORBA.COMM_FAILURE：FINE：IOP00410001：连接失败：socketType：IIOP_CLEAR_TEXT；主机名：本地主机；端口：3700 vmcid：OMG 次要代码：1 已完成：在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 在 java.lang.reflect.Constructor.newInstance 的 sun.reflect.GeneratedConstructorAccessor29.newInstance(Unknown Source) 没有(Constructor.java:525) 在 com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248) 在 com.sun.corba.ee.spi.orbutil.logex.corba .CorbaExtension.makeException(CorbaExtension.java:95) 在 com.sun.corba.ee.spi.orbutil.logex。

所以我真正的问题是：有没有人可以告诉我如何使用 mysql 而不是 derby 运行 Vineet Reynolds / java-ee-6-galleria 项目？Hibernate 或 Eclipselink 无所谓，我只想运行 mysql 而不是 derby =)

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T17:28:04.857

它有效..愚蠢的错误，刚刚从头开始，它解决了问题..

# php - 未设置 PHP 关联数组键

> ID：14904427
> 
> 赞同：0
> 
> 时间：2013-02-15T22:28:37.903
> 
> 标签：php, arrays, key, associative

在这个片段中，$opt 是一个从这个标签创建的 xpath 节点：

```
<option name="all">1</option>

//...
$this->permissions = array();
$key = $opt['name'];
$value = $opt[0];
echo $key . "=" . $value;
$this->permissions[$key] = $value;
echo $this->permissions['all'];
//... 
```

从这些 echo 语句中，我得到以下返回：

```
all=1 
```

这是第一个回声所预期的，但第二个什么也没打印。

当我这样做时： echo array_keys($this->permissions);

我得到：数组

当我这样做时： var_dump($this->permissions);

我得到：数组（0）{}

当我这样做时： print_r($this->permissions); 或： print_r(array_keys($this->permissions));

我得到：数组（）

任何想法，任何人？为什么键作为数组返回？我在这里想念什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:59:54.567

尝试

```
var_dump($opt); 
```

并回传结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:31:00.073

尝试像这样转储：

```
var_dump(array_keys($this->permissions)); 
```

查看数组的结构。

# regex - 这个用户忽略 Mercurial 的文件有什么问题？

> ID：14904428
> 
> 赞同：0
> 
> 时间：2013-02-15T22:28:43.163
> 
> 标签：regex, mercurial, hgignore

现在我已经适应了 Mercurial，有点回顾。忘记忘记文件与`hg remove`. 这是疯狂的和低音的。`hg remove`一旦您确定某个忘记文件中的某些内容不会忘记，您就可以使用该文件，因为在创建原始存储库之前已跟踪相关项目。注意`hg remove`有效地清除跟踪状态，但它还会安排文件删除从您的存储库中获得更改的任何内容。如果被忽略，但是跟踪停用仍然会发生，但删除我的更改集将永远不会到达另一个 repo，并且由于某种原因永远不会删除你的 IMO 是违反直觉的。这是一个非常确定的迹象，表明有人和我不认识这些人，不愿意在 DUH 设计问题上妥协。要理解的重要一点是，你不能确定什么是重要的，Mercurial 会。当然，除非您合并拉动。那么这完全合理。但我离题了...

Ignore-file/remove 对于已经跟踪但非常具体的文件来说是一个很好的组合，但如果您要处理大量使用更广泛模式确定的构建文件，则不值得冒险。只需使用双重存储库，然后`pull -u`从远程存储库到同步存储库，然后`pull -u`从您的工作仓库提交并合并到一个仓库中，其唯一目的是合并更改并将它们传递到您不完全跟踪或未跟踪的文件的地方（拉动而不是推送时的行为当然是不同的，因为嘿，为什么要保持一致?) 不会引起挫败感。相信我。你应该有两个回购才能完成的想法是有充分理由的，而且我们这么多人正在这样做应该表明一个严重的设计问题！@#$ing 设计问题，但它比其他所有问题都少得多可怕的事情会让你后悔寻找一个明智的选择。

并使用`hg help`. 它实际上是 Mercurial 的最佳功能，并且通常比互联网（我不会因为对所有事物的混淆而感到困惑）更好地获得这个 VCS 中所有令人困惑和违反直觉的东西的答案。

**/回顾**

```
# switch to regexp syntax.
syntax: regexp

#Config Files

#.Net
^somecompany\.Net[\\/]MasterSolution[\\/]SomeSolution[\\/]SomeApp[\\/]app\.config
^somecompany\.Net[\\/]MasterSolution[\\/]SomeSolution[\\/]SomeApp_test[\\/]App\.config

#and more of the same following 
```

在我的用户目录根目录下的 mercurial.ini 中

```
[ui]
username = ereppen
merge = bcomp
ignore = C:\<path to user ignore file>\.hgignore-config 
```

语境：

我在 node.js 中编写了一个自动配置实用程序。我只想更改它更改的文件以被忽略。我们有两个团队，并且两者都不在同一个页面上，使这成为一个通用的东西，所以它现在需要特定于用户。

配置文件已到位并由我的 ini 文件指向。我克隆。我运行配置实用程序并更改文件，stat 显示每个文件的列表，旁边有一个 M。我认为这是 utf-8 的东西，并明确地将文件设置为 utf-16 little endian。我不认为我正在使用 regEx，任何值得实际调用 regEx 的现代风格的 regEx 都不支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T03:43:02.220

该`.hgignore`文件对被跟踪的文件没有影响。它的功能是阻止您看到您希望忽略的文件列为“未跟踪”。如果你看到“M”，那么它们已经被添加（你用克隆得到它们）所以`.hgignore`什么都不做。

处理因机器而异的配置文件的常用方法是`app.config.sample`在源代码管理中`app.config`放入，`.hgignore`并让人们在进行配置编辑时进行复制。

或者，如果您的配置文件允许包含和覆盖，您可以用`include app-local.config`a 结束它们并覆盖`app-local.config`您不添加和包含在`.hgignore`.

# asp.net - 如何使用 ASP.Net 中的弹出窗口使用向下钻取功能（Fusion Charts）

> ID：14904438
> 
> 赞同：0
> 
> 时间：2013-02-15T22:29:35.760
> 
> 标签：asp.net, fusioncharts

我正在使用向下钻取功能，我可以在其中单击条形图，它将打开带有新子图的新页面。但我不想要的是打开一个新窗口，我想要的只是使用一个带有子图表的弹出窗口。我从 fusion-chart 网站上看到了一些示例，但他们使用的是 xml 格式，我无法按照他们的示例进行操作。这是我的整个代码，它工作正常，但我唯一需要更改而不是打开新页面；我只需要使用一个弹出窗口。我怎样才能做到这一点？请帮助并感谢您的时间..这是我的主页代码：

```
//aspx code
    <asp:Literal ID="chart_from_db" runat="server">        
            </asp:Literal>
 //code behind   
     protected void Page_Load(object sender, EventArgs e)
        {
           SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);        
            StringBuilder xmlStr = new StringBuilder();      
            xmlStr.Append("<chart caption='Total Revenue' palette='3' showValues='0' numberPrefix='$' useRoundEdges='1'>");
            {

                string sqlStatement = "SELECT Category, AvgNumbers FROM Table1";
                SqlCommand cmd = new SqlCommand(sqlStatement, con);
                con.Open();
                SqlDataReader reader = cmd.ExecuteReader();

                while (reader.Read())
                {             
                    xmlStr.AppendFormat("<set label='{0}' value='{1}' link='{2}'/>", reader["Category"].ToString(), reader["AvgNumbers"].ToString(), Server.UrlEncode("DrillDown1.aspx?AvgDays=" + reader["Category"].ToString()));
                }            
                xmlStr.Append("</chart>");           
                reader.Close();
                con.Close();            
                FusionCharts.SetRenderer("javascript");
                chart_from_db.Text = FusionCharts.RenderChart(
                    "FusionChartsXT/Column3D.swf", // Path to chart's SWF
                    "", // Page which returns chart data. Leave blank when using Data String.
                    xmlStr.ToString(), // String containing the chart data. Leave blank when using Data URL.
                    "annual_revenue",   // Unique chart ID
                    "640", "340",       // Width & Height of chart
                    false,              // Disable Debug Mode
                    true);              // Register with JavaScript object
            } 
```

这是单击图表时打开的子页面。

```
// ASPX code
    <div>
    <asp:Literal ID="MyChart" runat="server">        
            </asp:Literal>
//code benind    
 protected void Page_Load(object sender, EventArgs e)
        {
            SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
            String AvgDays = Request.QueryString["AvgDays"];
            StringBuilder xmlStr = new StringBuilder();
            xmlStr.Append("<chart caption='Total Revenue' palette='3' showValues='0' numberPrefix='$' useRoundEdges='1'>");

            {

                string sqlStatement = "select MonthYear, AvgNumbers from Table2 where AvgDays= '" + AvgDays.ToString() + "'";
                SqlCommand cmd = new SqlCommand(sqlStatement, con);
                con.Open();
                SqlDataReader reader = cmd.ExecuteReader();            
                while (reader.Read())
                {
                    // Construct the chart data in XML format
                    xmlStr.AppendFormat("<set label='{0}' value='{1}' link='{1}'/>", reader["MonthYear"].ToString(), reader["AvgNumbers"].ToString());
                }

                // End the XML string
                xmlStr.Append("</chart>");

                // Close the result set Reader object and the Connection object
                reader.Close();
                con.Close();

                // Set the rendering mode to JavaScript, from the default Flash.
                FusionCharts.SetRenderer("javascript");

                // Call the RenderChart method, pass the correct parameters, and write the return value to the Literal tag
                MyChart.Text = FusionCharts.RenderChart(
                    "FusionChartsXT/Column3D.swf", // Path to chart's SWF
                    "", // Page which returns chart data. Leave blank when using Data String.
                    xmlStr.ToString(), // String containing the chart data. Leave blank when using Data URL.
                    "crab",   // Unique chart ID
                    "640", "340",       // Width & Height of chart
                    false,              // Disable Debug Mode
                    true);              // Register with JavaScript object
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T12:18:59.253

请参考下面的链接。，。 [http://docs.fusioncharts.com/charts/contents/JavaScript/JS_LinkedCharts.html](http://docs.fusioncharts.com/charts/contents/JavaScript/JS_LinkedCharts.html)

-ExtJS 窗口中的 LinkedCharts -在 jQuery PrettyPhoto 中打开 LinkedCharts -在 jQuery 对话框中打开 LinkedCharts

我希望...这可以帮助你！

# javascript - 使用 Java 脚本：如何更改我的内容替换功能以获得我想要的结果？

> ID：14904439
> 
> 赞同：0
> 
> 时间：2013-02-15T22:29:35.730
> 
> 标签：javascript, replace

当您复制和粘贴

```
<tt>1<tt>2<tt>3<tt> 
```

进入这个功能：

```
function process() {
var content=
document.getElementById('content').value;

content= content. replace(/<tt>)(.*?)(<tt>(.*?)<tt>(.*?)<tt>/g, '<$2><$2><$2>');

document.getElementById('content').value=content;
} 
```

HTML

```
<textarea id="content" cols="48" rows="8">
</textarea><br/>
<input type="button" value="Process"
onclick="process()"/> 
```

并单击过程，您将产生以下结果：

```
<1><1><1> 
```

我怎样才能产生这个结果呢？

```
<1><2><1> 
```

我不能简单地使用这个内容。替换

```
content= content. replace(/<tt>)(.*?)(<tt>(.*?)<tt>(.*?)<tt>/g, '<$2><2><$2>'); 
```

产生我想要的结果，因为数字可能会发生变化：例如，有一天它们可能是

```
<tt>2<tt>5648<tt>19897<tt> 
```

目前会产生这个结果：

```
<2><2><2> 
```

虽然我希望它产生这个结果：

```
<2><5648><2> 
```

总结我的问题，我怎样才能让第一个和第三个数字都变为第一个数字，而第二个数字始终保持不变。我将提供一个指向我当前设置的示例的链接[http://jsfiddle.net/WVUYX/35/](http://jsfiddle.net/WVUYX/35/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:32:34.707

试试这个：

```
.replace(/<tt>(\d+)<tt>(\d+)<tt>\d+<tt>/,"<$1><$2><$1>") 
```

# javascript - IE10 - F12 工具可以用来对动态添加的 JavaScript 进行 deub 吗？

> ID：14904451
> 
> 赞同：1
> 
> 时间：2013-02-15T22:30:07.367
> 
> 标签：javascript, internet-explorer-10

我对 IE-10 不太熟悉，我正在尝试使用 F12 工具对一些代码进行故障排除。我找不到在 Ajaxed 的脚本中进行调试（即设置断点等）然后附加到 DOM 的方法。

我可以使用更常规的方式下载它，`<script>`但不更改内容会更容易一些。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:32:11.270

我能想到的最简单的方法是`debugger;`在动态添加的脚本文件的顶部临时添加一个命令。这将导致它在该脚本开始执行时立即进入调试器。一旦它进入调试器，您就可以在尚未执行的已加载脚本中设置断点。

# ios - 将文本从 uitextfield 存储到字典键

> ID：14904464
> 
> 赞同：0
> 
> 时间：2013-02-15T22:31:12.717
> 
> 标签：ios, objective-c, dictionary

有没有办法从 uitextfield 获取文本并将其保存到某个键的字典中？我尝试了很多组合，但它们要么失败，要么不输入文本。这是我现在无法正常工作的内容：

```
NSString *string = self.userName.text;
string = [registration objectForKey:@"Username"]; 
```

但它根本不输入信息。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:33:44.730

假设您已经实例化了`NSMutableDictionary`for的一个实例`registration`：

```
[registration setObject:string forKey:@"Username"]; 
```

将为给定键将值放入字典中，并且

```
string = [registration objectForKey:@"Username"]; 
```

将检索它。

# apache - .htaccess 将 .abc.local 附加到 URL

> ID：14904465
> 
> 赞同：0
> 
> 时间：2013-02-15T22:31:18.267
> 
> 标签：apache, .htaccess

我试图让我的 htaccess 将 .abc.local 附加到我的内部站点，而用户没有。因此，可以说`http://kb`我希望重定向 URL 或其他方法`http://kb.abc.local`。这是可能的还是我应该朝另一个方向看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:29:34.503

这种域名突变由本地 DNS 解析器通过其“域搜索后缀”选项处理。这是由客户端操作系统处理的，它的行为不能被服务器修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:21:11.423

```
RewriteCond %{HTTP_HOST} ^kb$
RewriteRule ^(.*)$ http://kb.abc.local$1 [R=301, L] 
```

那应该这样做。

# knockout.js - Breeze with Knockout 计算值未定义

> ID：14904471
> 
> 赞同：1
> 
> 时间：2013-02-15T22:31:44.613
> 
> 标签：knockout.js, breeze

我在 Breeze 中创建计算值并使用 Knockout 绑定到它们时遇到问题。

我正在使用 NoDb 示例项目，可以在[此处](http://www.breezejs.com/documentation/download)下载， Breeze 文档中的[扩展实体](http://www.breezejs.com/documentation/extending-entities)文章是我的主要信息来源。

在 todo.datacontext.js 文件中，我进行了以下更改：（我已经包含了第一行和最后一行，以指导我将代码放置在何处）

```
...
configureManagerToSaveModifiedItemImmediately();

metadataStore.registerEntityTypeCtor('TodoItem', function () { }, todoItemInitializer);

function todoItemInitializer(todoItem) {
    todoItem.participantName = ko.computed(function () {
        return 'John' + ' ' + 'Smith';
    });
};

var datacontext = {
... 
```

在 Index.html 中，我添加了：

```
...
<ul data-bind="foreach: todos">
   <li>
       <p data-bind="text: participantName" />
       <input type="checkbox" data-bind="checked: isDone" />
... 
```

但是，我收到此错误：

> 检索待办事项列表时出错：无法解析绑定。消息：ReferenceError：参与者名称未定义；绑定值：文本：参与者名称

我也注意到，如果我执行这个：

```
metadataStore.getEntityType('TodoItem'); 
```

它告诉我这种类型不存在，即使我正在注册它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:11:41.910

深入研究文档和示例项目，我发现如果服务器不提供任何元数据，则必须在客户端手动创建和注册。请参阅 todo.model.js。以下是代码中最相关的部分：

```
var et = new EntityType({
            shortName: "TodoItem",
            namespace: "NoDb.Models",
            autoGeneratedKeyType: AutoGeneratedKeyType.Identity
        });

...

store.addEntityType(et);
store.registerEntityTypeCtor("TodoItem", null, todoItemInitializer); 
```

然后初始化程序按预期工作，并正确识别 ko.computed 值。当然，这会让你不得不声明你将要使用的每一个属性。常规操作和绑定在没有任何此代码的情况下工作。

# android - 如何组合多个形状并添加浮雕？

> ID：14904472
> 
> 赞同：3
> 
> 时间：2013-02-15T22:31:56.940
> 
> 标签：android

目标是创建复合形状并添加浮雕效果。我可以成功创建如下图所示的形状。

```
 woodPaint = new Paint();
    woodPaint.setAntiAlias(true);
    woodBitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.wood);
    woodShader = new BitmapShader(woodBitmap, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT);
    woodPaint.setShader(woodShader);

    ...

    @Override
    protected void onDraw(Canvas canvas) {

        canvas.drawCircle(handleX, radius, radius, woodPaint);
        canvas.drawRoundRect(baseRectF, 25, 25, woodPaint);

        super.onDraw(canvas);
    } 
```

图片：
![](../Images/738024ffed90abebbdb30c7766cc3670.png)

然后我添加一个 EmbossMaskFilter

```
 paintEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 }, 0.1f, 8f, 5f);
    woodPaint.setMaskFilter(paintEmboss); 
```

图片：
![](../Images/e642122d284fcc422e8e923902cba372.png)

如您所见，浮雕蒙版分别应用于两个形状。如何将形状组合在一起并将浮雕应用于整个对象？我尝试将 xfer 模式设置为某种风格的搬运工 duff 但这不会影响浮雕蒙版分别应用于每个形状的事实。

谢谢你的帮助！

**编辑：** 如 Orabîg 所示，您必须使用已设置浮雕过滤器的油漆绘制一条路径。注意：方法 setMaskFilter() 是少数在硬件加速打开时不起作用的方法之一。我通过禁用活动的硬件加速解决了我在手机运行果冻豆时遇到的问题。您可以在您选择的任何[级别](http://developer.android.com/guide/topics/graphics/hardware-accel.html)禁用硬件加速：

*   应用
*   活动
*   窗户
*   看法

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T00:18:57.740

好吧，你只需要一种浮雕效果，所以你应该只画一种形状。

所以你应该使用 Canvas.drawPath() 方法。

您只需要定义一个 Path 对象，使用以下方法： ![路径定义步骤](../Images/8523cee99d5c233f29fff0b0d0d64a0e.png) 首先定义 3 个 RectF 对象，它们将是最左边圆的边界框（想象它后面的圆）、最右边的一个和滑动的： ![框定义](../Images/3f52d0687e6707dbefcebf2d3b7509f0.png) 您可能需要做一些额外的数学运算来确定用于 box2 的正确角度（它们取决于圆和整个矩形的各自大小）

祝你好运 ！

# cakephp - 在 CakePHP 中重定向到上一页，autoRedirect 设置为 false

> ID：14904481
> 
> 赞同：1
> 
> 时间：2013-02-15T22:32:35.977
> 
> 标签：cakephp, authentication, redirect, login

我想记录用户的最后一次登录，所以我正在做一些相当标准的事情。在我的用户控制器中：

```
if ($this->Auth->login()) {
    $this->User->id = $this->Auth->user('id');
    $this->User->saveField('last_login', date(DATE_ATOM));
    $this->Session->setFlash('Yay!'));
    $this->redirect( $this->Auth->redirectUrl() );
} 
```

另外，我`'autoRedirect' => false`在我的 AppController 中进行了设置，这是保存数据所必需的。问题是，用户在进入登录页面之前并没有被带回他们所在的页面。

发生的情况是，登录页面出于某种原因认为引用者是登录页面，这导致用户被踢回我的应用程序的“主页”。

我很迷惑。如何确保在登录时，用户在进入登录屏幕之前被带到他们所在的页面，使用`'autoRedirect' => false`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:32:26.250

这似乎是最可靠的方法。

登录页面的链接：

```
echo $this->Html->link('Login', '/login?redirect='.$this->here); 
```

在登录表单中：

```
echo $this->Form->input('redirect', array('type' => 'hidden', 'value' => $this->request->query['redirect'])); 
```

在控制器的登录动作中

```
if (isset($this->request->data['User']['redirect'])) {
    $this->redirect( $this->request->data['User']['redirect'] );
} else {
    $this->redirect( $this->Auth->redirectUrl() );
} 
```

# input - FORTRAN 90 - 输入语法错误

> ID：14904484
> 
> 赞同：0
> 
> 时间：2013-02-15T22:32:41.703
> 
> 标签：input, io, syntax-error, fortran90

这应该很简单。我不明白为什么我的 read 语句有语法错误。我有一个 7477 行长的文件，我希望这些变量中的每一个都像我的格式指定的那样在每一行中对应。这里的任何帮助都会很棒。谢谢！

```
implicit none

integer :: spe, flen = 7477, i
real, dimension (7477)::  wnum,s,A,abh
character :: other
integer :: lun = 11

write(*,*) 'Opening File!'
open(lun,file ='h2o_allbands',status = 'old',action ='read')
write(*,*) 'Success!'

17 format (1x,i2,3x,F9.6,1x,E9.3,1x,E9.3,F5.5,A120)

do i = 1, 7477
   read(lun,17) spe(i),wnum(i),s(i),A(i),abh(i),other
   write(*,*) wnum(i)
 end do 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:04:32.473

读取具有`spe(i)`作为输入列表项。 `spe`未声明为数组，因此编译器可能认为`spe(i)`是对整数函数的引用。您无法“读入”普通整数函数的结果。

也许`spe`应该声明为数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T07:12:32.317

如果没有从您的输入文件中看到一行，很难说出确切的问题是什么：但是：

*   首先，您在*读取*`format`实体时不应使用语句（除非在特殊情况下），因为如果您的行因任何原因格式不正确，这可能会导致各种不同的错误。所以只需将读取行替换为：

     *```
    read(lun,*) spe(i), wnum(i), s(i), A(i), abh(i), other 
    ```* 
**   如果所有行都与最后一行完全分开，请确保在最后一行的末尾有一个换行符。*

# dart - 有没有人尝试过在 Dart 中使用 Firebase javascript 库？

> ID：14904486
> 
> 赞同：7
> 
> 时间：2013-02-15T22:32:47.103
> 
> 标签：dart, firebase

[Firebase](http://www.firebase.com)键值存储看起来很有趣，与 Dart 的 HTML 框架一起使用会很有趣。

他们提供了一个 JavaScript 库来读取/写入他们的模型。有没有人尝试将它与 Dart 一起使用？

我的计划（基于很少的 Dart 知识）是：

*   在我的 html 中包含他们的库
*   加载 js.dart 包
*   通过 js.dart 实例化一个模型
*   通过模型读写。

这看起来是正确的方法吗？或者，有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-16T11:27:52.333

您可以通过[js 包](http://pub.dartlang.org/packages/js)使用任何 Javascript 库。

对于[Firebase](http://www.firebase.com/)，您必须：

*   将[js 包](http://pub.dartlang.org/packages/js)添加到您的`pubspec.yaml`

```
dependencies:
  js: any 
```

*   将以下内容添加`<script>`到您的 html 页面：

```
<script src='https://cdn.firebase.com/v0/firebase.js'></script>
<script type="application/dart" src="youDartCode.dart"></script>
<script src="packages/browser/dart.js"></script>
<script src="packages/browser/interop.js"></script> 
```

*   通过[js 包](http://pub.dartlang.org/packages/js)使用[Firebase Javascript SDK](https://www.firebase.com/docs/javascript/firebase/index.html)。就像是 ：

```
import 'package:js/js.dart' as js;

void main() {
  final myDataRef = new js.Proxy(js.context.Firebase,
      'https://xxx.firebaseio-demo.com/');
  myDataRef.on('child_added', (snapshot, String previousChildName) {
    final message = snapshot.val();
    print("${message.name} : ${message.text}");
  });
  myDataRef.push(js.map({"name": 'myName', "text": 'js interop rocks'}));
} 
```

上面的 Dart 代码等价于下面的 JavaScript 代码：

```
var myDataRef = new Firebase('https://xxx.firebaseio-demo.com/');
myDataRef.on('child_added', function(snapshot, previousChildName) {
  var message = snapshot.val();
  console.log(message.name + " : " + message.text);
}));
myDataRef.push({name: 'myName', text: 'js interop rocks'}); 
```

* * *

基本上 ：

*   当您必须实例化 Javascript 对象时，请使用`new js.Proxy(js.context.MyJavascriptObjectName, arg1, arg2, arg3))`,

*   当您必须提供 Javascript 匿名对象时，请使用`js.map({'attr1', value1}, {'attr2', value2})`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T19:38:21.730

现在 Dart 中有一个 firebase.js 库的包装器：[https](https://github.com/firebase/firebase-dart/) ://github.com/firebase/firebase-dart/ （也可以在 pub 上找到）。它使用 dart:js ，如本线程中所述，因此仍然需要包含 firebase.js！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T00:03:46.750

当 Dart 到达这里时，我收到错误消息“异常中断：ReferenceError：ReceivePortSync 未定义”。

```
 js.scoped (() {

    }); 
```

需要一行额外的代码才能将 Firebase 与 Dart 结合使用。添加行“packages/browser/interop.js”

```
 <script type="application/dart" src="ScrollViewDemo.dart"></script>
    <script src="packages/browser/dart.js"></script>
    <script src="packages/browser/interop.js"></script>   
    <script src='https://cdn.firebase.com/v0/firebase.js'></script> 
```

----------------- 编辑 8 月 15 日 ----------

```
js.scoped is no longer needed in the newer version of interopt.js 
```

# clojure - 为什么 (nil) 的评估不同于 ((println "foo"))

> ID：14904487
> 
> 赞同：2
> 
> 时间：2013-02-15T22:32:51.227
> 
> 标签：clojure

为什么下面最后两行的差异？评估异常是从 REPL 粘贴的。我正在使用 Clojure 1.4

```
(println "foo") ;; evals to nil

(nil)  ;; CompilerException java.lang.IllegalArgumentException: Can't call nil
((println "foo")) ;; NullPointerException 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T22:46:19.830

一是编译时异常；另一个是运行时异常。

在`(nil)`编译器看到您正在尝试调用函数`nil`并给您一个编译错误的情况下。

在`((println "foo"))`编译器不尝试推断内部形式`(println "foo")`将返回什么的情况下。据它所知，它可以返回一个函数，因此不会在编译时进行检查。异常发生在运行时确实`println`返回 a`nil`并且您尝试调用它。

作为一种动态语言意味着您通常不会尝试在编译时检测变量的类型错误。

观察：

```
(.setDynamic #'println)

(binding [println 
           (fn [x] 
             (when (pos? (rand-int 2)) 
               (fn [] (print "bar\n"))))] 
  ((println "foo"))) 
```

它将随机打印 "bar" 并返回`nil`没有运行时异常或不打印任何内容并抛出 run-time `NullPointerException`。很明显，这个人为`println`的没有静态返回类型供编译器检测。

但是编译器仍然可以检测到只涉及值的类型错误。

# javascript - $('#id') 返回 [object Object]

> ID：14904490
> 
> 赞同：0
> 
> 时间：2013-02-15T22:33:01.677
> 
> 标签：javascript, jquery, dom

这是代码：

```
<!DOCTYPE html>
<html>
<head>

   <title>Pixgalery</title>

   <link rel="shortcut icon" href="/favbar.png" />

   <link rel='stylesheet' href='/stylesheets/style.css'/>
   <!-- JavaScript -->
   <script src="http://code.jquery.com/jquery-latest.js"></script>
   <script type="text/javascript">

            alert($('#fh'));

   </script>
   <script src="/stylesheets/bootstrap/js/bootstrap.min.js"></script>
   <!-- CSS -->
   <link href="/stylesheets/bootstrap/css/bootstrap.min.css" rel="stylesheet"
   media="screen">
   <link href="/stylesheets/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href="/stylesheets/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

   <style type="text/css">

      body {

        <% if(user.background == ''){ %>

            background: rgb(241, 241, 241) url('/noise_filter.png');

        <% } else {%>

            background: url('.<%= user.paths %><%= user.background %>') fixed;

        <% } %>

       }

  </style>

</head>
<body>
<div class="navbar-static-top navbar-inverse navbar">
  <div class="navbar-inner">
   <div class="container">

  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>

  <a class="brand" href="#">Pixgalery</a>

  <div class="nav-collapse collapse">
  <ul class="nav">
  <li><a href="/home">Home</a></li>
  <li><a href="/<%= req %>">Profile</a></li>
  <li><a href="#">Messages</a></li>
  </ul>  
  <ul class="nav pull-left">
    <form class="navbar-search pull-left">
       <input type="text" class="search-query" placeholder="Search...">
    </form>
  </ul>

  </div>

 </div>
 </div>
</div>

<div style="margin-top: 15px;" class="container-fluid">
 <div class="row-fluid">
  <div class="span1"></div>
  <div class="span6">

  </div>
  </div>

<div class="span4">

    <aside>

         <center><h2 style="margin-top: 0px;"><%= photo.author %></h2></center>
         <table style="margin-top: 5px" class="table">
         <tbody style="background: white;">
            <tr>
              <td>
                    <h4>Views <small><%= photo.views %></small></h4>
              </td>
            </tr>
            <tr>
              <td>
               <h4>Favourites <small><%= photo.fav %></small></h4>  
                    <button class="btn btn-inverse" id="fh">
                       <i style="margin-right: 5px;" class="icon-heart icon-white"></i>
                        Favorite</button> 
              </td>
            </tr>
            <tr>
            </tr>
         </tbody>
        </table>
    </aside>

   </div>
  </div>
 </div>

 </head>
</body> 
```

当我收到警报`alert($('#fh'))`时，警报会显示给我`[object Object]`，或者即使我收到了，我也会`alert(document.getElementById('fh')`收到`null`，因此，我无法通过诸如`click()`. 当我输入控制台`$('#fh')'时，我得到了元素，但我不知道为什么，例如这不起作用：

```
 $('#fh').click(function(){

      alert('alert!');

  }) 
```

我该如何解决这个...？

谢谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:34:16.427

确保您已将代码包装在 document.ready 回调中，因为在您执行代码时，DOM 尚未加载：

```
<script type="text/javascript">
     $(function() {
         alert($('#fh'));
     });
</script> 
```

但我建议您将所有 javascript 文件放在 DOM 的末尾（例如 jsu 在结束`</body>`标记之前），而不是放在该`<head>`部分中。这样您就不需要将它们包装在 document.ready 回调中。

就`[Object] [Object]`而言，我建议您使用 a`console.log();`而不是`alert`来调试您的 javascript 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:37:51.360

这里有两个问题。

一，您没有使用 jQuery 的文档就绪功能。原因是，javascript 在找到时执行。当您调用 $("#fh") 时，尚未从服务器下载该元素。**这也是**您的`document.getElementById(...)`调用返回 null 的原因，因为*在执行时*这是正确的。

使用文档就绪方法将等到文档下载并解析之后再执行代码：

```
$(document).ready(function() {
   // Code here
}); 
```

或者

```
$(function() {
   // Code here
}); 
```

另一个问题是您对 jQuery 的工作方式感到困惑。

当你使用`$("#fh")`选择器时，它总是会返回一个 jQuery 对象，即使它找不到元素。`[object Object]`输出只是 Firefox 不知道如何将对象表示为字符串。

您需要检查`.length`返回的 jQuery 对象以判断是否确实选择了某些东西来注册事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:42:45.830

在我开始之前，我假设您想要打印出 DOM 元素本身而不是 DOM 元素中的文本，因为您没有说其他明智的。

因为从技术上讲，您正在返回一个 html dom 元素，而 alert() 函数实际上并没有如何处理您可以通过以下两种方式之一解决此问题。最简单的方法是

```
console.log($('#fh')); 
```

您可以在位于其调试器中的浏览器控制台中查看（在 firefox 或 chrome 中按 ctr+shift+c）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T22:36:20.787

将尝试访问元素的代码包装在`document.ready`. jQuery 内置了执行此操作的方法：

```
$(document).ready(function () { 
```

甚至只是

```
$(function  () { 
```

***或者***将您的 JavaScript 移到前面`</body>`，以确保加载其余的 DOM 内容。

`alert(document.getElementById('fh'))`是`null`因为当您尝试获取该元素时，该元素在 DOM 中不存在。 即使集合为空，也`$()` *总是返回一个 jQuery 集合对象。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T22:36:48.273

开始在`$(document).ready(function(){})...`. 只有在这里您才知道页面已完全加载。尝试这个：

```
$(document).ready(function() {
   $('#fh').click(function(){
      alert('alert!');
   }) ;
}) ; 
```

# testing - Sikuli 可以用于移动网络测试吗？

> ID：14904495
> 
> 赞同：0
> 
> 时间：2013-02-15T22:33:14.847
> 
> 标签：testing, mobile, mobile-website, sikuli

我知道 Sikuli 用于移动应用程序测试，有没有人使用它在移动设备上使用 iOS Safari 或 Android 浏览器进行移动 Web 测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:02:12.747

我使用 Sikuli 来测试移动应用程序（不仅仅是网络）。

它以这种方式工作（所有操作都使用 Sikuli 执行）：

1）启动手机模拟器；

2）部署应用程序（如果需要）；

3) 启动应用程序；

4）运行测试用例（点击某处，输入文本，滑动，检查是否得到预期等）；

5) 密切应用；

6）关闭模拟器。

我喜欢的 - 可以使用 Sikuli 执行滑动和/或拖放操作。

# ruby-on-rails - Rails 跨计算字段的活动记录计数

> ID：14904498
> 
> 赞同：1
> 
> 时间：2013-02-15T22:33:34.923
> 
> 标签：ruby-on-rails, rails-activerecord, arel

使用 AREL / Rails[计算](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html)我正在尝试执行以下操作：

```
SELECT to_char(timestamp, 'YYYY-MM-DD') AS segment, COUNT(*) AS counter 
FROM pages
GROUP BY segment
ORDER BY segment 
```

我可以运行类似的东西：

```
Page.order(FIELD).count(group: FIELD) 
{ a: 1, b: 4, c: 1 } 
```

但是，我无法跨计算字段进行此操作。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:43:08.753

想出了这个：

```
Page.count(:all, from: "(SELECT to_char(#{SEGMENT}, 'YYYY-MM-DD')  AS segment FROM pages) AS pages", group: "segment", order: "segment")
> SELECT COUNT(*) AS count_all, segment AS segment FROM (SELECT to_char(created_at, 'YYYY-MM-DD') AS segment FROM pages) AS pages GROUP BY segment ORDER BY segment 
```

# php - 限制分页 (1 2 3 4 5 .. 30 31 32 33)

> ID：14904501
> 
> 赞同：1
> 
> 时间：2013-02-15T22:33:46.060
> 
> 标签：php, javascript, ajax, jquery

我在 php、ajax 和 jquery 中有一个系统。该系统将搜索每页 5 的数据库查询并将结果分成几页。问题是结果越多，显示的页面就越多。在当前代码中，分页是这样的：first 1 2 3 4 5 6 last。我想保持这样：第一个 1 2 ... 5 6 最后一个。即我想限制分页。如果我在有更多结果时不限制分页，则如下所示：1234567891011 ...

编码：

```
<script type="text/javascript">
$(document).ready(function(){

    function showLoader(){

        $('.search-background').fadeIn(200);
    }

    function hideLoader(){

        $('.search-background').fadeOut(200);
    };

    $(".pagcon li").click(function(){

        showLoader();

        $(".pagcon li").removeClass('current');
        $(this).addClass("current");

        $("#resultado").load("data.php?page=" + this.id, hideLoader)

        return false;
    });

    $("#1").addClass("current");
    showLoader();
    $("#resultado").load("data.php?page=1", hideLoader);

});
</script>

<style type="text/css">
#consultas {
    width:780px;
    min-height:245px;
    overflow:hidden;
}   
.search-background {
    background:#FFF;
    display:none;
    height:154px;
    position:absolute;
    padding-top:84px;
    text-align:center;
    opacity:0.5;
    filter:alpha(opacity=50);
    width:780px;
    z-index:999;
}   
</style>

<div id="consultas">
 <?php
 $per_page = 5;
 $sql = "select * from consultas ";
 $rsd = mysql_query($sql);
 $count = mysql_num_rows($rsd);
 $pages = ceil($count/$per_page);
 ?>
 <div class="search-background">
 <label><img title="Carregando..." src="loader.gif" alt="" /></label>
 </div>
 <div id="resultado">
 &nbsp;
 </div>

 </div>

 <ul class="pagination clearfix pagcon">
 <?php
 //Show page links
 echo '<li id="1"><a title="Página 1" href="#">Primeiro</a></li>';
 for($i=1; $i<=$pages; $i++)
 {
 echo '<li id="'.$i.'"><a href="#">'.$i.'</a></li>';
 }
 echo '<li id="'.$pages.'"><a title="Página '.$pages.'" href="#">Último</a></li>';
 ?>
 </ul> 
```

数据.php：

```
<?php
include_once("config.php"); //MYSQL CONFIG

$per_page = 5;
$sqlc = "show columns from consultas";
$rsdc = mysql_query($sqlc);
$cols = mysql_num_rows($rsdc);
$page = $_REQUEST['page'];

$start = ($page-1)*5;
$sql = "select * from consultas ORDER BY data DESC LIMIT $start,5";
$rsd = mysql_query($sql);
?>

<?php
while ($rows = mysql_fetch_assoc($rsd))
{?>
    <div class="message status success">

       <span><b><?php echo $rows['consulta']; ?> (<font color="#8D4B19"><?php echo $rows['codigo']; ?></font>)</b></span>
       <span><?php if(strlen($rows['user']) >= 30){ echo substr($rows['user'], 0, 30)."..."; } else { echo $rows['user']; } ?></span>
       <span><b><?php echo $rows['operacao']; ?></b></span>
       <span><?php echo date("d/m/Y", strtotime($rows['data'])); ?></span>
       <span>R$ <?php echo $rows['valor']; ?></span> 

    </div>
<?php
}?>

<script type="text/javascript">
$(document).ready(function(){

    var Timer  = '';
    var selecter = 0;
    var Main =0;

    bring(selecter);

});

function bring ( selecter )
{   
 $('div.status:eq(' + selecter + ')').stop().animate({ opacity: '1.0', height: '34px' },300,function(){
 if(selecter < 6)
 {
 $('div.status').stop().animate({ opacity: '1.0', height: '17px' },300);
 clearTimeout(Timer); 
 }
});

selecter++;
var Func = function(){ bring(selecter); };
Timer = setTimeout(Func, 20);
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:46:02.477

尝试

```
$threshold=1;
for($i=1; $i<=$threshold+1; $i++)
{
    echo '<li id="'.$i.'"><a href="#">'.$i.'</a></li>';
}
echo "&nbsp;...&nbsp;";
for($i=$pages-$threshold; $i<=$pages; $i++)
{
    echo '<li id="'.$i.'"><a href="#">'.$i.'</a></li>';
} 
```

通过改变`$threshold`您可以改变可用页面链接的数量。

`first ... 3 4 5 ... last`但是，如果用户在第四页上，最好将结果呈现出来。这样他们就可以轻松地在相邻页面之间移动。您也可以减少循环运行的次数。`$current_page`是您所在的当前页面。这需要以某种方式提供给分页代码。

```
$threshold=1;
$lower_limit=(($current_page-$threshold)>1)?$current_page-$threshold:1;
$upper_limit=(($current_page+$threshold)<$pages)?$current_page-$threshold:$pages;
for($i=$lower_limit; $i<=$upper_limit; $i++)
{
    echo '<li id="'.$i.'"><a href="#">'.$i.'</a></li>';
} 
```

**为了这个特定的问题而**编辑****

 **您的分页是一次并且不会在 ajax 中重新加载。为了实现这种减少的分页，您需要

1.  只加载几个链接元素，如上述任一选择并添加新的链接元素或
2.  加载所有链接元素，但在需要它们之前隐藏不必要的链接。

对于后者：

php

```
$threshold=1;
for($i=1; $i<=$threshold+1; $i++)
{
    echo '<li id="'.$i.'"><a href="#">'.$i.'</a></li>';
}
echo "&nbsp;...&nbsp;";
for($i; $i<=$pages; $i++)
{
    echo '<li id="'.$i.'"'.($i<($pages-$threshold)?'style="display:none"':'')'><a href="#">'.$i.'</a></li>';
} 
```

javascript

```
$(".pagcon li").click(function(){

    showLoader();
    $(".pagcon li").hide();//hide all links
    $(".pagcon li").removeClass('current');
    $(this).addClass("current").show();
    var id=parse_int($(this).attr(id));
    $(".pagcon li:first, .pagcon li:first, .pagcon li#"+(id-1)+" .pagcon li#"+(id+1)).show();//show adjacent links and 'First' and 'Last'
    $("#resultado").load("data.php?page=" + this.id, hideLoader)

    return false;
}); 
```**

# lucene - 如何让我的 lucene 在 liferay 中搜索“全局”（即所有组）？

> ID：14904502
> 
> 赞同：1
> 
> 时间：2013-02-15T22:33:50.343
> 
> 标签：lucene, liferay

我在搜索容器中使用以下内容来查找给定组中的项目：

```
SearchContext searchContext = SearchContextFactory.getInstance(request);
searchContext.setStart(searchContainer.getStart());
searchContext.setKeywords(keywords);
searchContext.setEnd(searchContainer.getEnd());

results = ProjectLocalServiceUtil.getSearchedProjects(searchContext); 
total = ProjectLocalServiceUtil.getSearchedProjectsCount(searchContext); 
```

getSearchedProjects 方法将搜索结果转换为项目列表：

```
public List<Project> getSearchedProjects(SearchContext context) throws SearchException {
    Indexer indexer = IndexerRegistryUtil.getIndexer(Project.class);
    Hits results = indexer.search(context);
    List<Project> projects = new ArrayList<Project>();
    for (int i = 0; i < results.getDocs().length; i++) {
        com.liferay.portal.kernel.search.Document doc = results.doc(i);
        long projectId=GetterUtil.getLong(doc.get(Field.ENTRY_CLASS_PK));
        Project project = null;
        try {
            project = ProjectLocalServiceUtil.getProject(projectId);
            projects.add(project);
        } catch (Exception e) {
            e.printStackTrace();
            continue;
        }
    }
    return projects;
} 
```

当搜索 portlet 放置在我在 projectIndexer 的 doGetDocument 方法中设置的组中引用的组中时，结果与我预期的一样：

```
document.addKeyword(Field.GROUP_ID, groupId);
document.addKeyword(Field.SCOPE_GROUP_ID, groupId); 
```

但我想使用 portlet 从另一个组中搜索。

我尝试在 portlet 中设置 groupIds 列表，使用

```
searchContext.setGroupIds(new long[] {projectHolder.getGroupId()}); 
```

但我仍然没有在搜索中得到任何结果。

关于如何搜索“跨组”的任何指示？

阿兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:19:31.143

我找到了我的问题的答案。为了

```
searchContext.setGroupIds(new long[] {group1ID, group2Id}); 
```

为了产生效果，searchContext 不应将 groupId 作为其属性之一。SearchContextFactory 在属性中添加了 GroupId（参见下面的摘录），因此在调用 getInstance 之后，您需要从属性中删除 groupId：

```
SearchContext searchContext = SearchContextFactory.getInstance(request);
Map<String, Serializable> attributes = searchContext.getAttributes();
attributes.remove("groupId"); 
```

希望有一天这对某人有所帮助。阿兰

* * *

下面，来自 SearchContextFactory.getInstance(HttpServletRequest request) 的摘录（我相信 - 没有调试它）从参数中设置 groupId 属性：

```
// Extract from SearchContextFactory.java
Map<String, String[]> parameters = request.getParameterMap();
    for (Map.Entry<String, String[]> entry : parameters.entrySet()) {
    String name = entry.getKey();
    String[] values = entry.getValue();
        if ((values != null) && (values.length > 0)) {
        if (values.length == 1) {
            attributes.put(name, values[0]);
        }
        else {
            attributes.put(name, values);
        }
    }
}
searchContext.setAttributes(attributes); 
```

# javascript - 使用 FB.api 将 Facebook 好友添加到好友列表

> ID：14904503
> 
> 赞同：0
> 
> 时间：2013-02-15T22:33:51.083
> 
> 标签：javascript, facebook, post

如何使用 JavaScript SDK 将好友添加到好友列表？我找到了这个使用 POST 方法将消息发布到提要的示例：

```
var body = 'Reading JS SDK documentation';
FB.api('/me/feed', 'post', { message: body }, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

但是，我不明白它是如何工作的。Ehat 是 { message: body } 中的“消息”以及它如何适应此矩阵“/FRIENDLIST_ID/members?members=1,2,3”（来自 FB.api 示例 ar [https://developers.facebook .com/docs/reference/javascript/FB.api/](https://developers.facebook.com/docs/reference/javascript/FB.api/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T05:48:11.057

这对我有用。确保密钥包含在引号内。在这种情况下是“成员”。虽然我能够创建列表，但尝试将成员添加到创建的列表时会不断抛出异常，并显示“需要 Manage_friendlists 权限”的消息以为我拥有该权限。事实证明，还需要发布流权限才能使其正常工作。这在任何地方都没有提到。希望这可以帮助。

```
FB.api('/' + friendlistID + '/members', 'post', {'members': members}, function(response) {
  console.log(response);
  if (!response || response.error) {
    alert('Could not save members!');
  } else {
    alert('Members added to list!');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:27:02.553

只需更改端点和您发送的数据。

您使用的 Graph Endpoint 是[FriendList](https://developers.facebook.com/docs/reference/api/FriendList/)

```
friendlist_id = 1435134523451;
FB.api('/'friendlist_id+'/members', 'post', {members:'comma,separated,ids,of,friends,to,add,to,list'}, function(response) {
  console.log(response);
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('yay!');
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:30:04.607

我认为

```
FB.api('/FRIENDLIST_ID/members?members=1,2,3', 'post', function(response) { … }); 
```

应该这样做。

# sql - 将 HH:MM:SS 除以一个整数

> ID：14904518
> 
> 赞同：1
> 
> 时间：2013-02-15T22:34:43.580
> 
> 标签：sql

我有一列 ,`Col1`格式为`HH:MM:SS`，还有一个整数列`Col2`。我正在尝试以`Col1 / Col2`格式计算`HH:MM:SS`。我怎样才能做到这一点？

我尝试使用转换函数，但是下面的查询忽略了转换的值。这是我使用的转换语句：

```
CONVERT(VARCHAR,Col1 / 1920) + ':' + RIGHT('00' + CONVERT(VARCHAR, Col1% 60), 2) AS Time, 
```

我正在使用以下查询来尝试进行除法

```
select (DateTime),(Col1),(Col2),
cast((Col2 - Col1 ) as int) 
    / case when [CallsHandledHalf] = 0 then null 
           else [Col2] end as [AVG]
from Table
where ValueID ='5122'
and DateTime between '11/01/12 05:00' and '11/30/12 16:30' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:59:38.500

假设您使用的是 sql server（2008 或更高版本），也许以下内容会为您解决问题：

```
-- starting with a string in HH:MM:SS format
declare @s varchar(8)
set @s = '12:00:00'

-- set a divisor
declare @d int
set @d = 2

-- divide the total seconds by the divisor
set @s = convert(time(0), dateadd(second, datediff(second, 0, @s) / @d, 0))

-- output the results   '06:00:00'
print @s 
```

请注意，您确实应该一`time`开始就将时间值保留在数据类型中，但是允许隐式转换让您像这样来回切换。

# python - 检测导入模块中的 ImportError

> ID：14904521
> 
> 赞同：2
> 
> 时间：2013-02-15T22:35:01.987
> 
> 标签：python, exception-handling, stack-trace

如果 Python 模块存在，我想导入它，但`ImportError`如果它不存在则忽略它。但是，如果导入的模块本身引发了`ImportError`，这个错误也将被忽略，这不是我需要的（即如果模块**存在**，但**有一些错误**，我想知道）。

```
for app in INSTALLED_APPS:
    try:
        module = __import__('{}.mycustommodule'.format(app))
        # Do something with it
    except ImportError:
        traceback = sys.exc_info()[2]
        if ( ? ):  # if the exception occurred in app.mycustommodel, raise
            raise
        pass       # otherwise, ignore 
```

我检查了[sys.exc_info](http://docs.python.org/2/library/sys.html#sys.exc_info)和[traceback](http://docs.python.org/2/library/traceback.html)的文档，但没有找到任何有用的信息。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:35:01.987

如果异常发生在捕获它的同一函数中，则堆栈跟踪将只有一帧。否则，它将有多个帧。在查看了[相关问题](https://stackoverflow.com/q/10115022/520779)并进行了一些测试后，我发现检查 if `tb_next`is就足够了`None`：

```
except ImportError:
    traceback = sys.exc_info()[2]
    if ( traceback.tb_next ):
        raise
    pass 
```

**注意：**虽然文档`tb_next`很少（在 文档中看到了对它的引用[`inspect`](http://docs.python.org/3.1/library/inspect.html)，但没有指定什么构成回溯“级别”），上述行为在[Python 2.7.3](http://ideone.com/E7zABo)、[Python 3.2.3](http://ideone.com/0lEdfR)、 Jython 2.5.3之间是一致的、IronPython 2.7.3 和 PyPy 1.8.0。

# python - 如何执行长请求

> ID：14904523
> 
> 赞同：0
> 
> 时间：2013-02-15T22:35:09.383
> 
> 标签：python, flask

我正在通过我从用户那里获取输入来构建一个 gui/仪表板类型的东西。当用户按下提交时。我收集响应并在后端启动一个工作。我希望实现的是..当用户按下提交时：并且正在处理那个长作业，我会显示类似：“您的作业已成功提交）提交并且完成时..我刷新页面以采取用户访问该页面。

这是我的 route.py 片段的样子

```
@app.route('/',methods=['POST'])
def get_data():
    data = request.form
    for data_tuple in data:

            requests_to_gb[data_tuple] = data[data_tuple]
    flag = execute_request(requests_to_gb) <---Fires a job

    if flag:
        flash("Your request has been submitted")

    else:
        flash("request could not be completed!")
    return render_template('request_submitted.html') 
```

但问题是..我 execute_request() 的那条线需要很长时间才能处理.. 一切都停止了，直到完成？我该如何处理？以及如何自动刷新到新页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:43:30.757

使用[`celery`](http://www.celeryproject.org/)哪个是分布式任务队列。[快速入门指南](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html)应该可以帮助您。

简而言之，它允许您将任务卸载到在后台运行的工作人员，这样您就不会阻塞您的主用户界面（这是您试图阻止的）。

好消息是它很容易与flask（或django，或其他任何东西）集成，因为它是用Python编写的。

# django - Django：prefetch_related结果按中间表的字段排序

> ID：14904525
> 
> 赞同：7
> 
> 时间：2013-02-15T22:35:25.903
> 
> 标签：django, orm, many-to-many, has-many-through, graph-databases

如何在 Django 中预取相关对象并按中间表中的字段对它们进行排序？

这是我正在使用的模型：

```
class Node(models.Model):
    name = models.CharField(max_length=255)
    edges = models.ManyToManyField('self', through='Edge', symmetrical=False)

class Edge(models.Model):
    from_node = models.ForeignKey(Node, related_name='from_node')
    to_node = models.ForeignKey(Node, related_name='to_node')

    weight = models.FloatField(default=0) 
```

给定一个节点，我想预取所有相关节点，按重量排序。

当我使用这个查询时：

```
n = Node.objects.prefetch_related('to_node').order_by('edge__weight').get(name='x') 
```

order_by 无效。

**编辑：**

到目前为止我最好的答案

```
n = Node.objects.get(name='x')
edges = Edge.objects.filter(from_node=n).prefetch_related('to_node').order_by('weight') 
```

然后不是迭代`n.edges`（如我所愿），我迭代`edges.to_node`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-03-30T18:44:07.090

如今，您还可以使用 Prefetch 类来实现这一点：

[https://docs.djangoproject.com/en/1.10/ref/models/querysets/#django.db.models.Prefetch](https://docs.djangoproject.com/en/1.10/ref/models/querysets/#django.db.models.Prefetch)

或者，如果您想始终默认执行此操作，您可以查看中间表上的元排序，例如：

```
class SomeThroughModel(models.Model):
    order = models.IntegerField("Order", default=0, blank=False, null=False)
    ...

    class Meta:
        ordering = ['order']  # order is the field holding the order 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T16:16:45.713

只是一个概念性的想法（凭记忆写的）。

问题是，`order_by`指的是节点模型。

但是，有一种方法可以

```
Node.objects.get(name='x').edges.extra(select={'weight':'%s.weight' % Edge._meta.db_table}).order_by('weight') 
```

这将迫使 ORM：

1.  添加“重量”字段，通常会被省略。
2.  按它排序结果。

查询的数量应该和`prefetch_query`工作的一样，一个获取节点，第二个获取相关节点。

不幸的是，这不是一个非常“干净”的解决方案，因为我们需要使用`_meta`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:45:14.143

虽然不是很干净。。

```
//Untested Code
Node n = Node.objects.get(name="x")

//This would return To Node IDs' ordered by weight

n.edges.filter(from_node = n).values_list('to_node', flat=True).order_by('weight') 
```

# c# - 如何在不两次读取同一个文件的情况下计算两个哈希？

> ID：14904537
> 
> 赞同：4
> 
> 时间：2013-02-15T22:36:25.183
> 
> 标签：c#, hash, md5, sha1

我有一个程序将用于非常大的文件（当前测试数据为 250GB）。我需要能够计算这些文件的 MD5 和 SHA1 哈希值。目前我的代码将流放入 MD5.Create().ComputeHash(Stream stream)，然后对于 SHA1 也是如此。据我所知，这些以 4096 字节块的形式将文件读取到散列函数内部的缓冲区，直到流结束。

问题是，一个接一个地做这个需要很长时间！在将新块读入缓冲区之前，有什么方法可以将数据放入缓冲区并将缓冲区提供给两种算法？

请彻底解释，因为我不是经验丰富的编码器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T22:41:47.840

当然。您可以`TransformBlock`反复调用，然后`TransformFinalBlock`在结束时再使用`Hash`以获取最终哈希。所以像：

```
using (var md5 = MD5.Create()) // Or MD5Cng.Create
using (var sha1 = SHA1.Create()) // Or SHA1Cng.Create
using (var input = File.OpenRead("file.data"))
{
    byte[] buffer = new byte[8192];
    int bytesRead;
    while ((bytesRead = input.Read(buffer, 0, buffer.Length()) > 0)
    {
        md5.TransformBlock(buffer, 0, bytesRead, buffer, 0);
        sha1.TransformBlock(buffer, 0, bytesRead, buffer, 0);
    }
    // We have to call TransformFinalBlock, but we don't have any
    // more data - just provide 0 bytes.
    md5.TransformFinalBlock(buffer, 0, 0, buffer, 0);
    sha1.TransformFinalBlock(buffer, 0, 0, buffer, 0);

    byte[] md5Hash = md5.Hash;
    byte[] sha1Hash = sha1.Hash;
} 
```

`MD5Cng.Create`and调用将围绕本机实现创建包装器，这可能比and`SHA1Cng.Create`返回的实现更快，但可移植性较差（例如，对于 PCL）。`MD5.Create``SHA1.Create`

# c# - 提取始终遵循特定字符串的信息

> ID：14904541
> 
> 赞同：0
> 
> 时间：2013-02-15T22:36:42.343
> 
> 标签：c#, string, file, search

我试图在文件中的特定字符串之后提取信息。以下是包含字符串的段：

```
<Plane TheZ="0" TheT="0" TheC="0" DeltaT="0.2056"/><TiffData FirstT="0" FirstZ="0" 
```

我试图提取的信息`0.2056`总是跟随`DeltaT="` 我希望这个搜索尽可能快。所以我想知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:39:25.233

你可以使用正则表达式

```
var regex = new Regex(@"DeltaT=""(.*?)""");
foreach (Match m in regex.Matches(inputText))
{
    Console.WriteLine(m.Groups[1].Value);
} 
```

但是，由于它看起来***可能***是 X(HT)ML，因此如果可能，请首选 Linq-To-Xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:42:06.720

另一种方法是构建读取 XML 的应用程序。

```
var doc = new XmlDocument();
doc.LoadXml(myXmlFile);
Console.WriteLine(doc.SelectSingleNode("/@DeltaT").Value); 
```

这是一个示例：

[http://www.codeproject.com/KB/cpp/myXPath.aspx](http://www.codeproject.com/KB/cpp/myXPath.aspx)

# java - 配置从 URL 导入 bean 定义失败

> ID：14904543
> 
> 赞同：1
> 
> 时间：2013-02-15T22:36:46.947
> 
> 标签：java, spring, hibernate

我们在应用程序中有 Spring2 jar 文件。将所有 Jar 文件升级到最新版本并开始看到以下错误消息。检查了我的 Buildpath 和类路径，从那里找不到任何东西。

以下是我的 spring-context.xml。xsd 版本以前是 2.5，我将所有 xsd 版本更改为 3.0（取决于 spring-webflow 的最新版本 3.0 和 2.3）。

附上我的堆栈跟踪。任何帮助是极大的赞赏！

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <import resource="classpath:dao-hbm.xml"/>
    <import resource="classpath:spring-ws-endpoints.xml"/>  
    <context:annotation-config/>

</beans>

SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath:dao-hbm.xml]
Offending resource: ServletContext resource [/WEB-INF/spring-context.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [dao-hbm.xml]; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:245)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:196)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:181)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:530)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:444)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:388)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:293)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [dao-hbm.xml]; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:239)
    ... 27 more
Caused by: java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1148)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1643)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser$AopAutoProxyConfigurer.configureAutoProxyCreator(AnnotationDrivenBeanDefinitionParser.java:126)
    at org.springframework.transaction.config.AnnotationDrivenBeanDefinitionParser.parse(AnnotationDrivenBeanDefinitionParser.java:84)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1423)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1413)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    ... 32 more
Caused by: java.lang.ClassNotFoundException: org.aopalliance.intercept.MethodInterceptor
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    ... 50 more
Feb 15, 2013 5:30:20 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:49:58.870

> ```
> java.lang.ClassNotFoundException: org.aopalliance.intercept.MethodInterceptor 
> ```

添加[`aopalliance-1.0.jar`](http://repo1.maven.org/maven2/aopalliance/aopalliance/1.0/aopalliance-1.0.jar)到您的 CLASSPATH。

# php - php 和 mysql 允许成功登录带有 _ 和其他特殊字符的电子邮件

> ID：14904548
> 
> 赞同：0
> 
> 时间：2013-02-15T22:37:21.100
> 
> 标签：php, mysql

嗨，有人可以帮帮我。我有一个登录脚本，当我为它设置用户名时`eric@email.com`它工作正常，但如果他们的电子邮件是`eric_1@email.com`和其他特殊字符，它会回显计数错误 1，它表示表单中有一个错误。

我怎样才能让我的脚本`_`在他们的电子邮件或任何其他特殊字符中成功登录用户？我对 php 和 mysql 真的很陌生，如果有人能告诉我如何解决这个问题，我会非常感激。

```
<?php

    if (logged_in()) 
{ 
$_SESSION['login_message']="<div class=\"login-overlay\"></div><div class=\"login-box\"><div class=\"loginframe2\">
<h1>Login You In Securely </h1>
<p> PlaytimeBoys.com is login you in securely. Please wait.<br/><br/>
<div class=\"login-logo\">
  <img src=\"assets/css/photobox/loading.gif\" width=\"24\" height=\"24\"><div class=\"login-text-logo\">Login You In. Please Wait</div></div>
</div></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

}

    include_once("includes/form_functions.php");

    // START FORM PROCESSING
    if (isset($_POST['submit'])) { // Form has been submitted.
        $errors = array();

        // perform validations on the form data
        $required_fields = array('email', 'password');
        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

        $fields_with_lengths = array('email' => 30, 'password' => 30);
        $errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST));

        $email = trim(mysql_prep($_POST['email']));
        $password = trim(mysql_prep($_POST['password']));
        $hashed_password = md5($password);

        if ( empty($errors) ) {
            // Check database to see if email and the hashed password exist there.
            $query = "SELECT id, email, close_account ";
            $query .= "FROM ptb_users ";
            $query .= "WHERE email = '{$email}' ";
            $query .= "AND password = '{$hashed_password}' ";
            $query .= "AND close_account = '0' ";
            $query .= "LIMIT 1";
            $result_set = mysql_query($query);
            confirm_query($result_set);
            if (mysql_num_rows($result_set) == 1) {
                // email/password authenticated
                // and only 1 match
                $found_user = mysql_fetch_array($result_set);
                $_SESSION['user_id'] = $found_user['id'];
                $_SESSION['email'] = $found_user['email'];
                $_SESSION['sub_expires'] = $found_user['subscription_expires'];

                $result = mysql_query("UPDATE ptb_users SET user_online='Online' WHERE id=".$_SESSION['user_id']."") 
or die(mysql_error());

if($result) 
{ 
$_SESSION['login_message']="<div class=\"login-overlay\"></div><div class=\"login-box\"><div class=\"loginframe2\">
<h1>Login You In Securely </h1>
<p>login you in securely. Please wait.<br/><br/>
<div class=\"login-logo\">
  <img src=\"assets/css/photobox/loading.gif\" width=\"24\" height=\"24\"><div class=\"login-text-logo\">Login You In. Please Wait</div></div>
</div></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

}

            }else{

                // email/password combo was not found in the database
                $message = "<div class=\"infobox_out\"><strong>Email / Password combination incorrect.</strong><br />
                    Please make sure your caps lock key is off and try again.</div>";
                    echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>";

            }

                } else {
            if (count($errors) == 1) {
                $message = "<div class=\"infobox_out\">There was 1 error in the form.<div>";

            } else {
                $message = "<div class=\"infobox_out\">There were " . count($errors) . " errors in the form.<div>";
            }
        }

    } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 1) {
            $message = "<div class=\"infobox\">You are now logged out.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close3\"></div></a>";

            } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 5) {
            $message = "<div class=\"infobox-noprofile2\"><strong>Account Banned -</strong> We could not log you in because your account's<br/> been banned. Contact us at: <a href=\"mailto:Support@PlaytimeBoys.com\">Support@admin.com</a>.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close12\"></div></a>";

            } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 6) {
            $message = "<div class=\"infobox-noprofile2\"><strong>Account Warning -</strong> You recently violated a condition in our User Policy. Due to this you are receiving this warning. If you continue to violate any policy<br/> your account will be banned. <a href=\"terms.php\">Review User Policy</a> and<br/>login when ready.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close12\"></div></a>";

    } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 2) {
            $message = "<div class=\"infobox_out\">Sorry, we've had to log you out. Your session has expired.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close2\"></div></a>";

            } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 1) {
            $message = "<div class=\"infobox\">You are now logged out.</div>";
            echo "<a href=\"#\"><div class=\"infobox-close3\"></div></a>";

        }

        } 

    }
            }
            }

        $email = "";
        $password = "";
    }
?>

<br/>
            <?php if (!empty($message)) {echo "<p class=\"message\">" . $message . "</p>";} ?>

 <form action="login.php" rel="shadowbox;height=300;width=500" method="post" >

                <div class="row email">
                    <input type="email" id="email" name="email" placeholder="Email" value="<?php echo htmlentities($email); ?>" />
                </div>

                <div class="row password">
                    <input type="password" id="password" name="password" placeholder="Password" value="<?php echo htmlentities($email); ?>" />
                </div>
                <input type="submit" name="submit" value="Login >"  />
            </form>
            <?php if (!empty($errors)) { display_errors($errors); } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:42:38.967

我不知道我是否可以为您找到一个实际的答案，但我在这里看不到您使用转义字符串，这意味着您的代码可能会受到 SQL 注入的影响。如果问题与下划线是一个特殊字符有关，你应该这样做（你应该这样做，真的！）

```
$myescapedstring = escapestring($mystring) 
```

您应该对传递到数据库进行查询的任何内容执行此操作。

你会像这样实现它：

```
$email = escapestring(trim(mysql_prep($_POST['email'])));
$password = escapestring(trim(mysql_prep($_POST['password'])));
$hashed_password = md5($password); 
```

# ios - 为什么在隐藏状态栏的屏幕顶部未检测到触摸？

> ID：14904553
> 
> 赞同：1
> 
> 时间：2013-02-15T22:37:58.507
> 
> 标签：ios, uikit

在我们的应用中，我们展示了占据整个屏幕的模态窗口，此时我们隐藏了状态栏。但是，放置在屏幕顶部的按钮减少了点击区域：它们的顶部不会检测到触摸。这适用于导航控制器中的自定义按钮和按钮。

是什么阻止了对这些触摸的检测？

仅供参考：我还有另外两个窗口，一个 HUD 视图和一个状态栏叠加层，它们都是隐藏的。我也尝试将状态栏覆盖层放在主窗口后面。问题依然存在。

更新：至少在某些情况下，此问题是由隐藏状态栏引起的，同时滚动视图仍具有 scrollsToTop 设置为 YES。尽管我发现即使在为所有常驻滚动视图禁用 scrollsToTop 后问题仍然存在。（我编写了一个简单的方法来遍历视图层次结构以查找所有滚动视图并报告它们当前的 scrollsToTop 设置。）

# ios - UIScrollView 在 iOS 5 中自动滚动随机量

> ID：14904555
> 
> 赞同：0
> 
> 时间：2013-02-15T22:38:05.903
> 
> 标签：ios, ios5, uiscrollview, uikit

我有一个以纵向模式启动的 iPhone 应用程序。当应用程序旋转为横向时，会使用以下方式推送新视图：

```
 [self presentModalViewController:viewController animated:YES]; 
```

这个横向视图包含一个在横向位置垂直滚动的 UIScrollView。滚动视图框架高度等于横向高度（320 点），滚动视图的内容大小高度是横向高度的 3 倍（即 960 点）。我启用了垂直分页，所以有 3 页。

当视图出现时，滚动视图会像我预期的那样滚动到顶部。但是在 iOS 5 中，滚动视图会随机跳转到向上滚动的某个位置。我已经注释掉了我的 viewDidAppear 方法，它仍然这样做。在 iOS 6 中它运行良好，但不会发生这种情况。

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:01:49.010

因此，在 viewWillAppear（或其他地方）中添加一个 [scrollView setContentOffset:CGPointZero]。

可以提供帮助，但不是处理它的最佳方法;-)

# python - 在 Fabric 中，如何检查 Debian 或 Ubuntu 软件包是否存在，如果不存在则安装它？

> ID：14904560
> 
> 赞同：3
> 
> 时间：2013-02-15T22:38:13.840
> 
> 标签：python, ubuntu, debian, fabric

我需要它来快速安装 memcached，作为设置测试服务器的 Fabric 脚本的一部分。想我会把它记录在这里以供将来参考。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T22:38:13.840

将此[超级用户评论](https://superuser.com/questions/427318/#comment490784_427339)和此[stackoverflow 答案](https://stackoverflow.com/a/10439058/1093087)拼凑在一起。（注意：我正在运行`root`而不是使用`sudo`）：

```
def package_installed(pkg_name):
    """ref: http:superuser.com/questions/427318/#comment490784_427339"""
    cmd_f = 'dpkg-query -l "%s" | grep -q ^.i'
    cmd = cmd_f % (pkg_name)
    with settings(warn_only=True):
        result = run(cmd)
    return result.succeeded

def yes_install(pkg_name):
    """ref: https://stackoverflow.com/a/10439058/1093087"""
    run('apt-get --force-yes --yes install %s' % (pkg_name))

def make_sure_memcached_is_installed_and_running():
    if not package_installed('memcached'):
        yes_install('memcached')
    with settings(warn_only=True):
        run('/etc/init.d/memcached restart', pty=False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-27T19:29:01.597

[Fabtools](http://fabtools.readthedocs.io/en/0.19.0/)是一个非常有用的 Python 模块，我将它添加到我所有的 Fabric 项目中。

它有一个方法[deb.is_installed](https://github.com/fabtools/fabtools/blob/master/fabtools/deb.py#L39-L51)来检查是否安装了 Debian 软件包。很高兴在我的所有项目中使用这种标准方法，并且 Fabtools 还提供了一些其他有用的包管理助手，您可能会喜欢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T23:40:51.833

至于检查是否安装了软件包（在本地运行以进行测试）

```
import re

def is_package_installed(pkgname):
    output = local('dpkg -s {}'.format(pkgname), capture=True)
    match = re.search(r'Status: (\w+.)*', output)
    if match and 'installed' in match.group(0).lower():
        return True
    return False 
```

# python - 相当于 OpenERP 6.1 中自定义报告的 base_report_creator 模块

> ID：14904564
> 
> 赞同：0
> 
> 时间：2013-02-15T22:38:57.040
> 
> 标签：python, openerp

我们正在将我们的 OpenERP 安装从 5.0 版迁移到 6.1 版，并且我们使用`base_report_creator`5.0 版中的模块创建了几个自定义报告。该模块似乎已在 6.1 版本中删除，那么有替代方案吗？仪表板是否应该取代自定义报告？如果是这样，我如何在 GTK 客户端中查看仪表板？

看起来有人已经开始在[Google Project Hosting](https://code.google.com/p/my-openerp-addons/source/browse/#svn/trunk/base_report_creator)上将其迁移到 6.1 版，但似乎还没有完成。是否还有其他正在进行的事情，或者我应该从那里开始并尝试完成迁移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:15:14.163

实际上，[Google Project Hosting](https://code.google.com/p/my-openerp-addons/source/browse/#svn/trunk/base_report_creator)上的版本几乎是完美的。我将它复制到我们的[自定义模块](http://bazaar.launchpad.net/~zaber/openobject-addons/zaber-custom/files)分支，并进行了一些小的调整以使其正常工作。最大的障碍是解决[表](https://stackoverflow.com/q/14948028/4794)[上的访问规则更改`ir_values`](https://stackoverflow.com/q/14948028/4794)，以及实现排序和搜索。

# html-table - 如何使用 ASP.NET 网页制作可编辑的表格？

> ID：14904573
> 
> 赞同：1
> 
> 时间：2013-02-15T22:39:30.793
> 
> 标签：html-table, forms, asp.net-webpages

我对 html 开发相当陌生，不知道如何解决这个问题。我需要创建一个包含一些可编辑单元格的表格。然后我需要根据编辑的行更新数据库表中的特定行。我已经创建了一些可行的解决方案，我几乎可以肯定没有使用正确的方法来解决问题，所以我需要知道如何才能做到这一点。注意**重复的形式**。我希望只有一个表单和一个提交按钮来仅更新那些已编辑的行。

```
@using Oracle.DataAccess.Client;
@using Oracle.DataAccess.Types;
@{

    string some_conn = "SomeConnectionString";
    OracleConnection conn = new OracleConnection(some_conn);
    var comm = new OracleCommand("select * from some_table",conn);
    conn.Open();

    if(IsPost){
        var some_id = Request.Form["some_id"];
        var some_value = Request["some_value"];

        var update_comm = new OracleCommand("update some_table"+
                                            "   set some_value ='"+some_value+"'" +
                                            " where some_id ='" + some_id + "'", conn ) ;
        update_comm.ExecuteNonQuery();
    }
    var dr = comm.ExecuteReader();
}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>

        <table>
            @while(dr.Read()){
                <tr>
                @for(int i= 0; i < 7 ; i++){
                    if(i != 5){
                        <td> @(Convert.ToString(dr.GetValue(i)))</td>    
                    }
                }
                    <form method="post" action="">

                    <td> <input type="text" name="some_id" contenteditable="false" value="@(Convert.ToString(dr.GetValue(5)))"></td>
                    <td><textarea name="some_value" cols="10" rows="10">@(Convert.ToString(dr.GetValue(7)))</textarea></td>  
                    <td> <input type="submit" value="update"></td>
                    </form>
            </tr>
            }
        </table>
    </body>
</html>
@{
    conn.Close();
    conn.Dispose();

} 
```

# c# - 在一个查询中根据 Linq 中的外部列表过滤给定列表

> ID：14904574
> 
> 赞同：1
> 
> 时间：2013-02-15T22:39:41.780
> 
> 标签：c#, linq, entity-framework, ef-code-first, sql-server-ce

我有一个清单：

```
List<Student> lstStudents = GetConditionalStudents(); 
```

我还有一个清单：

```
List<School> allSchools  = dbContext.Schools.ToList(); 
```

每个学校都有学生名单

```
public class School
{
   ///other properties
   public List<Student> {get;set;}
} 
```

我被迫这样做：

```
List<School> schools = from p in allSchools
                       where p.LocationId==this.LocationId
                       where p.Students.Any(d=>lstStudents.Contains(d))
                       select p; 
```

但它不起作用：给出错误

```
unable to create a constant value for .. only primitive types 
```

# 编辑

我可以这样做：

```
List<int> integers = lstStudents.Select(s=>s.Id).ToList();
List<School> schools = from p in allSchools
                       where p.LocationId == this.LocationId
                       where p.Students.Any(d=>integers.Contains(d.Id))
                       select p; 
```

但我不想使用它，因为我遇到了必须比较超过 2 个 ID 的情况，这意味着，我必须分开 2 个以上`primitive datatype List`并在查询中使用它们，这是我不想要的.

如何在 linq 查询中直接使用外部列表。？？

我不能使用这个：

```
allSchools.Where(s=>s.LocationId==this.LocationId ||
lstStudents.Contains(s)).ToList(); 
```

请帮助...我经历了[这个](https://stackoverflow.com/questions/2535552/building-an-external-list-while-filtering-in-linq)和[这个](https://stackoverflow.com/questions/10862491/unable-to-create-a-constant-value-only-primitive-types)..但它们对我没有帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:39:15.733

问题是实体框架无法将您的学生列表转换为有效的 SQL 语句 - 显然数据库服务器对您的课程一无所知`Student`，因此实体框架无法将 LINQ 查询转换为数据库服务器可以理解的内容。有三种解决方案。

1.  如果可能，请摆脱您的方法`GetConditionalStudents()`并直接将构建此列表的查询包含在主查询中。

2.  通过调用相应的查询和使用 LINQ to Objects 处理这两个列表，`lstStudents`将这两个列表提取到内存中。`allSchools``ToList()`

3.  使用对象 ID 而不是对象，因为 Entity Framework 能够将整数、字符串等列表转换为`IN`语句。

在我看来，您似乎已经在执行选项二，但显然您不是因为代码失败，但我无法确定确切的缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:13:03.857

尝试：

```
var schools = from p in allSchools
              where (p.LocationId==this.LocationId && p.Students.Any(s => lstStudents.Contains(s)))
              select p; 
```

# ios - 动画 UIView 大小跳跃

> ID：14904577
> 
> 赞同：0
> 
> 时间：2013-02-15T22:39:59.657
> 
> 标签：ios, objective-c, uiview, caanimation

通过更改 UIView 的高度和位置来为 UIView 设置动画。第一个动画跳跃？我在 Storyboards 中将 UIView (theView) 的大小设置为 216 的高度。因此应用程序加载并显示 theView。我单击 theView，它的高度迅速跃升至 200+ 像素，然后按应有的动画效果？

```
- (void)singleTapAction:(UIGestureRecognizer *)singleTap {
UIView *view = singleTap.view;
[UIView animateWithDuration:1.2 delay:0 options:UIViewAnimationCurveLinear | UIViewAnimationOptionAllowUserInteraction animations:^{
    CGRect theFrame = self.theView.frame;
    theFrame.size.height += 100.f;  <!-- when it hits here the view jumps then animates
    self.theView.frame = theFrame;
}
                 completion:^(BOOL finished) {
                     if(finished){
                         [UIView animateWithDuration:1.2 delay:0 options:UIViewAnimationCurveLinear | UIViewAnimationOptionAllowUserInteraction animations:^{
                             CGRect theFrame = self.theView.frame;
                             theFrame.origin.y -= 100.f;
                             self.theView.frame = theFrame;
                         }
                                          completion:^(BOOL finished) {
                                              NSLog(@"animations complete");
                                          }];
                     }
                 }]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:00:11.013

尝试移动线条

```
CGRect theFrame = self.theView.frame;
theFrame.size.height += 100.f;  <!-- when it hits here the view jumps then animates 
```

块外。将它放在调用动画方法之前。

# javascript - Jquery - 嵌入的 Youtube 链接

> ID：14904578
> 
> 赞同：0
> 
> 时间：2013-02-15T22:40:04.040
> 
> 标签：javascript, jquery, html

试图将 youtube 链接转为嵌入，但我的 jquery 似乎没有从链接中获取视频 ID

我的查询：

```
$('.a').html(function(i, html) {
return html.replace(/(?:http:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,'<iframe width="150" height="150" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>');
}); 
```

我的 HTML：

```
<div class="a">http://www.youtube.com/watch?v=w_yudtBvhCsc</div>
<div class="a">http://www.youtube.com/watch?v=w_yudtBvhCsd</div> 
```

我一无所知...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:58:52.013

你可以只使用拆分..

```
$('.a').html(function(i,v){
    var id = v.split('watch?v=')[1]; // get the id so you can add to iframe
    return '<iframe width="150" height="150" src="http://www.youtube.com/embed/' + id + '" frameborder="0" allowfullscreen></iframe>';
}); 
```

[http://jsfiddle.net/nzvYv/](http://jsfiddle.net/nzvYv/)

# cakephp - 在 CakePHP 中使用 Auth 和 admin 前缀时出现奇怪的重定向问题

> ID：14904579
> 
> 赞同：3
> 
> 时间：2013-02-15T22:40:13.800
> 
> 标签：cakephp, authentication, redirect

我`admin`在我的 Cakephp 应用程序中使用前缀，用于一些管理视图。我还使用 Auth 来限制对这些视图的访问，基于`role`User 表中的一个字段。很标准。

问题是，当未经授权的用户尝试访问时，例如`admin/users`，（在这种情况下禁止索引操作），他们会被重定向到`/admin/users/login`当然不存在的用户。

没有管理员前缀的操作不会发生这种情况。那些表现得很好。

为什么将用户发送到以管理员前缀和禁止操作为前缀的登录名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T18:27:54.783

[任何对此仍有问题的人，根据文档，您可以在 loginAction （文档](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#AuthComponent%3a%3a%24loginAction)）中使用数组或字符串。

使用数组并设置 'admin' => false 仍然给我带来麻烦，所以我尝试使用字符串来代替：

```
public $components = array(
    'Auth' => array(
        'loginRedirect'  => array('controller' => 'dashboards', 'action' => 'home'),
        'logoutRedirect' => array('controller' => 'users', 'action' => 'login'),
        'loginAction'    => '/users/login',
        'authorize'      => array('Actions')
    ),
); 
```

这最终解决了我的问题。希望它也适用于你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T05:29:57.333

您需要覆盖路由数组中的特定前缀。

```
$this->Auth->loginAction = array(
   'controller' => 'users', 
   'action' => 'login', 
   'admin' => false
); 
```

或者，如果您使用多个前缀，则可以像这样动态删除前缀名称：

```
$this->Auth->loginAction = array(
   'controller' => 'users', 
   'action' => 'login', 
   $this->request->prefix => false
); 
```

# azure - 将 Azure Blob 与 Azure 网站结合使用

> ID：14904580
> 
> 赞同：3
> 
> 时间：2013-02-15T22:40:14.693
> 
> 标签：azure, asp.net-mvc-4, azure-blob-storage

我正在制作一个涉及用户上传图像的**MVC Windows Azure网站。**我想将图像存储在 blob 中。我搜索了教程，但大多数都是处理*Webapps*而不是 MVC 网站。

我发现的唯一有用的教程是：http: [//www.codeproject.com/Articles/490178/How-to-Use-Azure-Blob-Storage-with-Azure-Web-Sites](http://www.codeproject.com/Articles/490178/How-to-Use-Azure-Blob-Storage-with-Azure-Web-Sites)

我是整个 MVC/Windows Azure/Visual Studio 场景的新手，在第 7 步我必须连接到云存储帐户时感到困惑。

```
var storageAccount = CloudStorageAccount.Parse(
    ConfigurationManager.ConnectionStrings["StorageConnection"].ConnectionString); 
```

我不知道我应该把那段代码放在哪里。

第 8 步中的代码相同：创建容器

```
blobStorage = storageAccount.CreateCloudBlobClient();
CloudBlobContainer container = blobStorage.GetContainerReference("productimages");
if (container.CreateIfNotExist())
{
    // configure container for public access
    var permissions = container.GetPermissions();
    permissions.PublicAccess = BlobContainerPublicAccessType.Container;
    container.SetPermissions(permissions);
} 
```

第 9 步：将图像保存到 BLOB

```
string uniqueBlobName = string.Format("productimages/image_{0}{1}", 
   Guid.NewGuid().ToString(), Path.GetExtension(image.FileName));
CloudBlockBlob blob = blobStorage.GetBlockBlobReference(uniqueBlobName);
blob.Properties.ContentType = image.ContentType;
blob.UploadFromStream(image.InputStream); 
```

任何帮助将不胜感激。也欢迎任何其他相关教程的链接。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T16:51:14.173

我假设您已将[Windows Azure Storage NuGet 包](http://nuget.org/packages/WindowsAzure.Storage/)添加到您的 Web 应用项目？在您引用的参考文献中，这似乎并不明确，但如果您不这样做，您会看到一堆未解决的编译器错误。

就代码的去向而言，这完全取决于您。to 的赋值`storageAccount`就像设置一个数据库连接字符串；没有任何事情发生，因此您可以设置一次，并使其在整个应用程序中作为某个静态类实例的一部分可用。

在创建容器方面，只要您想存储数据，就可以这样做 - 认为它等同于在文件系统中创建文件夹或在关系数据库中创建表。如果您的应用程序始终将信息存储在同一个“硬编码”容器中，您可以提前在门户中设置容器，而不是在代码中创建。

将这样的代码放入其中可以提供一些弹性，以防容器通过某些外部进程被删除；就像使用 SQL Server 的应用程序*可以*在更新/检索之前检查 Employee 表是否存在一样，因为有可能（但不太可能）有人通过其他一些 SQL 工具删除了 Employee 表。

将图像保存到 blob 将直接放在负责启动该操作的任何控制器后面。这是你做“真正”工作的地方。您的示例中的代码专门引用了一个容器`productimages`，因此如果您想确定容器没有被删除（例如，通过门户网站），则可以在步骤 8 中的代码之前立即执行该代码。同样，这类似于每次访问传统客户端/服务器代码中的数据库表时检查其中的数据是否存在（我们大多数人可能认为这有点矫枉过正，我们会求助于异常处理来应对这种意外情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T17:25:55.067

老问题，但仍然可以帮助新手！

Azure Webapps 接受 MVC 应用程序。Azure 上的 Webapps 只是一个容器，我确信它可以采用不同类型的基于 ASP.NET 的应用程序、Forms 或 MVC、C# 或 VB.net。

假设您了解 MVC 应用程序的基础知识，您可以创建 Azure Webapp 并将其发布到那里。就这么直截了当。

这段代码：

```
var storageAccount = CloudStorageAccount.Parse(
    ConfigurationManager.ConnectionStrings["StorageConnection"].ConnectionString); 
```

和这个：

```
blobStorage = storageAccount.CreateCloudBlobClient();
CloudBlobContainer container = blobStorage.GetContainerReference("productimages");
if (container.CreateIfNotExist())
{
    // configure container for public access
    var permissions = container.GetPermissions();
    permissions.PublicAccess = BlobContainerPublicAccessType.Container;
    container.SetPermissions(permissions);
} 
```

可以进入一个专门用于 Blob 服务的新类，例如将其称为 blobServices.cs 并将其保存在 MVC 应用程序的根目录中，它看起来像这样：

```
 var storageAccount = CloudStorageAccount.Parse(
            ConfigurationManager.ConnectionStrings["StorageConnection"].ConnectionString);

    blobStorage = storageAccount.CreateCloudBlobClient();
    CloudBlobContainer container = blobStorage.GetContainerReference("productimages");
    if (container.CreateIfNotExist())
    {
        // configure container for public access
        var permissions = container.GetPermissions();
        permissions.PublicAccess = BlobContainerPublicAccessType.Container;
        container.SetPermissions(permissions);
    } 
```

这可能是最好的做法。从那里开始，在 MVC 应用程序的 Controller/s 中，您可以执行以下操作：

```
namespace blabla.cs
{

   public controller myBlobController
    {

      //instantiate the blob service
      BlobProfileImageServices _blobServices = new BlobProfileImageServices();

       public public ActionResult Index()
        {

            //call your blob storage service
            //and loop through each blob
            CloudBlobContainer blobContainer = _blobServices.GetCloudBlobContainer();
            List<string> blobs = new List<string>();
            foreach (var blobItem in blobContainer.ListBlobs())
            {
                blobs.Add(blobItem.Uri.ToString());

            }

      }

    }
} 
```

# rake-task - Faker“不知道如何构建任务？

> ID：14904583
> 
> 赞同：0
> 
> 时间：2013-02-15T22:40:39.060
> 
> 标签：rake-task, faker

我检查了关于这个主题已经提出的问题，“有很多”，但我没有找到解决方案。

我有一个相当大的任务，文件名是'sample_employee_data.rake'......所以这里是：

```
 namespace :db do 
        desc "Fill database with sample Employee data"
        task populate: :environment do

          @gender = ["Male", "Female"]
          @role = ["Staff", "Support", "Team_Leader", "Manager", "Director"]
          @marital_status = ["Single", "Married"]
          @primary_position = ["Household", "Job Developer", "Job Coach", 
                     "Job Support", "Personal Care"]
          @trained_position = ["Household", "Job Developer", "Job Coach", 
                     "Job Support", "Personal Care"]
          @emer_contact_relationship = ["Friend", "Brother", "Sister", "Aunt", 
                              "Uncle", "Cousin", "Nephew", "Father",
                              "Mother", "Spouse"]

          def randomDate(params={})
            years_back = params[:year_range] || 5
            latest_year = params[:year_latest]  || 0
            year = (rand * (years_back)).ceil + 
            (Time.now.year - latest_year - years_back)
             month = (rand * 12).ceil
             day = (rand * 31).ceil
             series = [date = Time.local(year, month, day)]
             if params[:series]
               params[:series].each do |some_time_after|
                 series << series.last + (rand * some_time_after).ceil
               end
               return series
              end
              date
            end

            Employee.create!(first_name:      "Shelly",
                 last_name:                   "Houghton",
                 mi:                          "M",
                 full_name:                   "Shelly M Houghton",
                 marital_status:              "Single",                  
                 gender:                      "Female",
                 hire_date:                   "2000-04-16",
                 primary_position:            "Manager",
                 trained_position:            "Job Developer",
                 email:                       "shoughton@example.com",
                 active:                      true,
                 address1:                    "76th Ave",
                 city:                        "Frave",
                 zip_code:                    "54806",
                 state:                       "WI",
                 emp_home_ph:                 "1-111-111-1111",
                 emp_mobile_ph:               "1-222-222-2222",
                 emer_contact_first_name:     "Kenneth",
                 emer_contact_last_name:      "Koening",
                 emer_contact_relationship:   "Friend",
                 emer_contact_ph:             "1-333-333-3333",
                 role:                        "Manager",
                 birth_date:                  "1982-08-21",
                 admin:                       true,
                 password:                    "90nothguoh",
                 password_confirmation:       "90nothguoh")

         99.times do |n|
           first_name = Faker::Name.first_name
           last_name = Faker::Name.last_name
           mi = ("A".."Z").to_a[rand(26)]
           full_name = Faker::Name.full_name
           marital_status = @marital_status[rand(2)].to_s
           gender = @gender[rand(2)].to_s
           hire_date = randomDate(:year_range => 60, :year_latest => 12)
           birth_date = randomDate(:year_range => 60, :year_latest => 22)
           primary_position = @primary_position[rand(5)].to_s
           trained_position = @trained_position[rand(5)].to_s
           email = "emp-#{n+1}@example.org"
           active = [true, false][rand(2)]
           admin = (1 == rand(2) ? true : false)
           role = @role[rand(5)].to_s
           address1 = "Seaview-#{n+5}Way"
           city = Faker::Lorem.words(1).to_s.capitalize
           state = Faker::Address.us_state()
           zip_code = Faker::Address.zip_code
           emp_home_ph = Faker::PhoneNumber.phone_number
           emp_mobile_ph = Faker::PhoneNumber.phone_number
           emer_contact_first_name = Faker::Name.first_name
           emer_contact_last_name = Faker::Name.last_name
           emer_contact_relationship = @emer_contact_relationship[rand(10)].to_s
           emer_contact_ph = Faker::PhoneNumber.phone_number
           password = "uniqueone"
           Employee.create!(first_name: first_name, mi: mi, last_name: last_name,
                   full_name: full_name, marital_status: marital_status,
                   gender: gender, birth_date: birth_date, hire_date: hire_date,
                   primary_position: primary_position, trained_position: 
                   trained_position, email: email, role: role, address1:
                   address1, city: city, state: state, zip_code: zip_code, 
                   emp_home_ph: emp_home_ph, emp_mobile_ph: emp_mobile_ph,
                   emer_contact_first_name: emer_contact_first_name, 
                   emer_contact_last_name: emer_contact_last_name, 
                   emer_contact_relationship: emer_contact_relationship,
                   emer_contact_ph: emer_contact_ph, password: password, 
                   password_confirmation: password)
         end
       end
     end 
```

我跑了：

```
 rake sample_employee_data.rake 
```

我得到了这个标志：

```
 rake aborted!
  Don't know how to build task 'sample_employee_data.rake'
  home/me/.rvm/gems/ruby-1.9.3-p385@rails3212/bin/ruby_noexec_wrapper:14:in 'eval'
  home/me/.rvm/gems/ruby-1.9.3-p385@rails3212/bin/ruby_noexec_wrapper:14:in '<main>' 
```

谁能发现这个问题……我为这么长的文件道歉。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:28:42.233

这里发生了几件事。

当您运行时，`$ rake sample_employee_data.rake`您要求 rake 对您的文件进行 rake - 但 rake 会响应任务：

`$ rake some_namespace:some_task_in_that_namespace`

您还使用了 custom`.rake file`而不是传统的`Rakefile`- 这很好，但这意味着您需要明确告诉 rake 您没有使用它的 default `Rakefile`。

`$ rake --rakefile your_custom_rake_file.rake some_task`

所以在你的情况下，你需要像这样发出一个 rake 命令：

`$ rake --rakefile sample_employee_data.rake db:populate`

# c# - 使用我的密钥上传到 imgur 时出现问题？

> ID：14904587
> 
> 赞同：0
> 
> 时间：2013-02-15T22:40:51.127
> 
> 标签：c#, imgur

```
var values = new NameValueCollection
{
    { "key", "key_edited_for_security" },
    { "image", Convert.ToBase64String(ms.ToArray()) }
};

byte[] response = w.UploadValues("https://api.imgur.com/2/upload.xml", values); 
```

这工作得很好，关键来自几年前某人创建的另一个 stackoverflow 帖子（[上传到 imgur.com](https://stackoverflow.com/questions/2073519/uploading-to-imgur-com)），我已经在 imgur 注册了我的应用程序，[但是](https://api.imgur.com/oauth2/addclient)当我使用我的客户端 ID 或客户端密码 ID 时，我得到错误 400（错误请求）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:18:06.363

我确实测试了上面的代码，似乎工作正常

```
 static void Main(string[] args)
    {

        WebClient client = new WebClient();
        NameValueCollection values = new NameValueCollection();
        values["image"] = Convert.ToBase64String(File.ReadAllBytes(@"C:\test.jpg"));
        values["key"] = "the_key";
        byte[] responseBytes = client.UploadValues("https://api.imgur.com/2/upload.xml", values);
        string response = Encoding.Default.GetString(responseBytes);
        client.Dispose();
        /* Content of response 
        <?xml version="1.0" encoding="utf-8"?>
        <upload><image><name/><title/><caption/><hash>E63BcFm</hash><deletehash>zWO2xnca2co0VcB</deletehash><datetime>2013-02-15 23:15:45</datetime><type>image/jpeg</type><animated>false</animated><width>677</width><height>342</height><size>29513</size><views>0</views><bandwidth>0</bandwidth></image><links><original>http://i.imgur.com/E63BcFm.jpg</original><imgur_page>http://imgur.com/E63BcFm</imgur_page><delete_page>http://imgur.com/delete/zWO2xnca2co0VcB</delete_page><small_square>http://i.imgur.com/E63BcFms.jpg</small_square><large_thumbnail>http://i.imgur.com/E63BcFml.jpg</large_thumbnail></links></upload>
        */
    } 
```

# r - 避免字符串替换中的for循环？

> ID：14904588
> 
> 赞同：5
> 
> 时间：2013-02-15T22:40:52.823
> 
> 标签：r

我有数据、一个字符向量（最终我会折叠它，所以我不在乎它是保持向量还是被视为单个字符串）、一个模式向量和一个替换向量。我希望数据中的每个模式都被其各自的替换所替换。我用一个`stringr`和一个 for 循环完成了它，但是有没有更像 R 的方法呢？

```
require(stringr)
start_string <- sample(letters[1:10], 10)
my_pattern <- c("a", "b", "c", "z")
my_replacement <- c("[this was an a]", "[this was a b]", "[this was a c]", "[no z!]")
str_replace(start_string, pattern = my_pattern, replacement = my_replacement)
# bad lengths, doesn't work

str_replace(paste0(start_string, collapse = ""),
    pattern = my_pattern, replacement = my_replacement)
# vector output, not what I want in this case

my_result <- start_string
for (i in 1:length(my_pattern)) {
    my_result <- str_replace(my_result,
        pattern = my_pattern[i], replacement = my_replacement[i])
}
> my_result
 [1] "[this was a c]"  "[this was an a]" "e"               "g"               "h"               "[this was a b]" 
 [7] "d"               "j"               "f"               "i"   

# This is what I want, but is there a better way? 
```

就我而言，我知道每种模式最多会出现一次，但并非每种模式都会出现。我知道`str_replace_all`如果模式可能不止一次出现，我可以使用；我希望解决方案也能提供该选项。我还想要一个使用`my_pattern`and的解决方案，`my_replacement`以便它可以成为以这些向量作为参数的函数的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:49:27.013

我敢打赌还有另一种方法可以做到这一点，但我的第一个想法是**gsubfn**：

```
my_repl <- function(x){
    switch(x,a = "[this was an a]",
             b = "[this was a b]",
             c = "[this was a c]",
             z = "[this was a z]")
}

library(gsubfn)    
start_string <- sample(letters[1:10], 10)
gsubfn("a|b|c|z",my_repl,x = start_string) 
```

如果您正在为列表元素搜索可接受的有效名称的模式，这也将起作用：

```
names(my_replacement) <- my_pattern
gsubfn("a|b|c|z",as.list(my_replacement),start_string) 
```

**编辑**

但坦率地说，如果我真的必须在我自己的代码中做很多事情，我可能只会做`for`循环的事情，包装在一个函数中。`sub`这是一个使用and`gsub`而不是**stringr**中的函数的简单版本：

```
vsub <- function(pattern,replacement,x,all = TRUE,...){
  FUN <- if (all) gsub else sub
  for (i in seq_len(min(length(pattern),length(replacement)))){
    x <- FUN(pattern = pattern[i],replacement = replacement[i],x,...)
  }
  x
}

vsub(my_pattern,my_replacement,start_string) 
```

但是，当然，没有众所周知的内置函数的原因之一可能是像这样的顺序替换不能非常脆弱，因为它们是如此依赖于顺序：

```
vsub(rev(my_pattern),rev(my_replacement),start_string)
 [1] "i"                                          "[this w[this was an a]s [this was an a] c]"
 [3] "[this was an a]"                            "g"                                         
 [5] "j"                                          "d"                                         
 [7] "f"                                          "[this w[this was an a]s [this was an a] b]"
 [9] "h"                                          "e" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:39:03.080

这是一个基于`gregrexpr`、`regmatches`和的选项`regmatches<-`。请注意，可以匹配的正则表达式的长度是有限制的，因此如果您尝试匹配太多长模式，这将不起作用。

```
replaceSubstrings <- function(patterns, replacements, X) {
    pat <- paste(patterns, collapse="|")
    m <- gregexpr(pat, X)
    regmatches(X, m) <- 
        lapply(regmatches(X,m),
               function(XX) replacements[match(XX, patterns)])
    X
}

## Try it out
patterns <- c("cat", "dog")
replacements <- c("tiger", "coyote")
sentences <- c("A cat", "Two dogs", "Raining cats and dogs")
replaceSubstrings(patterns, replacements, sentences)
## [1] "A tiger"                    "Two coyotes"               
## [3] "Raining tigers and coyotes" 
```

# javascript - mongodb 如何处理 HTML5/Javascript 类型的数组？

> ID：14904589
> 
> 赞同：0
> 
> 时间：2013-02-15T22:40:55.123
> 
> 标签：javascript, html, mongodb

我正在通过 Javascript 与 mongodb 交互。

以下两种说法有区别吗？

```
myCollection.insert({tiles: new Int32Array(256)});
myCollection.insert({tiles: new Array(256)}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:47:58.953

是的，这是非常不同的。

第一个 using`Int32Array`不是当前驱动程序使用/理解的 JavaScript 类型，而是投影到一个对象中，其属性遵循数组的索引：

```
"tiles" : { "0" : 0, "1" : 0, "2" : 0.... } 
```

第二个转换为 MongoDB 中的数组，[类型为](http://docs.mongodb.org/manual/reference/glossary/#term-bson-types) `Null`。

```
"tiles": [ null, null, null .... ] 
```

因此，第一个不会保留为数组，而第二个会保留。

# java - vagrant 对 java/javaee 开发人员有用吗？

> ID：14904590
> 
> 赞同：23
> 
> 时间：2013-02-15T22:41:05.560
> 
> 标签：java, virtual-machine, vagrant

使用 java/javaee 时，通常的开发环境设置是在本地拥有一切（jdk 安装、数据库、应用服务器等）。我知道 ruby​​/js 世界中有很多人使用虚拟机进行开发（主要是 vagrant）。

我想知道是否有一种有效的方法可以为 java/javaee 设置类似的环境。我怀疑我可以很容易地在这样的虚拟机上安装数据库服务器和应用程序服务器以及 jdk 版本，但是常规开发呢？我仍然需要在本地安装jdk，对吗？（我需要我的 IDE 才能正常工作）我需要 maven 来构建我的项目，所以我需要完整的 maven 本地 repo。然后我需要在虚拟机的应用服务器上部署我的应用。

我在这里看不到真正的优势（两台机器上仍然有一些环境）。你有这方面的经验可以和我分享吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-15T23:22:22.830

Vagrant 基本上是一个设置 VirtualBox 虚拟机的工具。它带来了快速配置 VM 的能力以及将配置方案传递给其他人的能力。

这在 Ruby/JS 社区中非常有用，因为它们没有编译步骤。我们使用它的方式是代码保留在我的本地机器上，所有运行时都在 VM 上完成。如果我在本地计算机上进行更改，VM 上正在运行的程序会立即获取更改并修改运行时，就像代码仅在 VM 上一样。从字面上看，我什至不必在我的计算机上安装 Ruby/JS。

在 Java/.Net 世界中，你有一个编译步骤，所以你说你需要 Java 和你需要在你的机器上编译的所有 jars。这减少了设置的一些有用性。

另一方面，您通常拥有正在使用的数据库、消息队列、容器等，并且在团队中，发送电子邮件并说将您的数据库更新到此版本并加载新的示例数据可能会很痛苦。在 Vagrant 中，只有一个人需要进行更新，然后他们可以告诉您获取新的 VM，而您不必自己执行任何升级步骤。

所以它在编译语言中仍然有用，但不如在脚本语言中有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:57:57.053

就答案而言，您具体要寻找什么并不完全清楚。

IMO 虚拟机的价值不在于*开发*环境，而在于*运行时*环境。消息/队列、服务器、数据库、云服务器（例如，Swift）等。

这与语言无关。例如，我们有虚拟机（不是基于 Vagrant），包括 Hadoop/HDFS/HBase、Swift、RabbitMQ 和各种容器。

我们可能会*部署*到这些机器上，但开发工具是在本地运行的。IMO 几乎没有理由在虚拟机上进行开发，尽管你没有理由*不能这样做*，特别是如果你对 Vim/Emacs/etc 感到满意的话。

我知道有一个用于 Vagrant 的 Tomcat 容器，虽然我没有使用它。

# php - 在返回另一个值的函数内返回数组

> ID：14904592
> 
> 赞同：1
> 
> 时间：2013-02-15T22:41:14.367
> 
> 标签：php

为什么以下脚本不起作用？

```
$arr = array();

function collect( $array , $val) {
    $array[] = $val;
    return $array;
}

function checkFoo( $s ) {

    $valid = true;

    if ( strlen( $s ) === 0 ) {
        $isValid = false;
        collectFoo( $arr , $s );
    }

    return $valid;
}

function checkBar( $t ) {

    $valid = true;

    if ( strlen( $s ) != 10 ) {
        $isValid = false;
        collectFoo( $arr , $t );
    }

    return $valid;
}

if ( checkFoo( $that ) && checkBar( $this ) ) {

    echo "success"; 

} else {

    print_r( $error );

} 
```

我总是得到

```
Notice: Undefined variable: error in /my.php on line 12 
```

其中第 12 行类似于第二次出现`collect(...)`;

我知道一个函数只能返回一个值，但是如果一个函数在一个返回一些东西的函数中返回一些东西呢？因为`collect`返回`$array`里面`checkBar`那个返回`$valid`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:49:46.640

你正在使用一个全局变量（$arr），所以你需要这样声明它。例子：

```
function checkFoo( $s ) {
    global $arr; // declare $arr to be usable inside this function scope
    $valid = true;

    if ( strlen( $s ) === 0 ) {
        $isValid = false;
        collectFoo( $arr , $s );
    }

    return $valid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:02:50.237

**已编辑**

您需要更多练习，因为您的代码完全不正确！您必须更改代码的这一部分：

```
$arr = array();

function collectFoo( $arr , $val) {
    global $arr;

    $arr[] = $val;
}

function checkFoo( $s ) {
    global $arr;

    $valid = false;
    if ( strlen( $s ) === 0 ) {
        $valid = false;
        collectFoo( $arr , $s );
    }
    return $valid;
}

function checkBar( $t ) {
    global $arr;

    $valid = true;
    if ( strlen( $t ) != 10 ) {
        $valid = false;
        collectFoo( $arr , $t );
    }
    return $valid;
}

$a = checkFoo( $that );
$b = checkBar( $this );
if ( $a && $b ) {
    echo 'Success !';
} else {
    print_r( $err );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:04:06.197

您没有`$arr`在使用它的函数中将变量声明为全局变量。[你可以在这里](http://php.net/manual/en/language.variables.scope.php)找到一些关于它的信息。

此外，看起来您实际上并没有使用 的返回值`collect`，所以我会说您的问题是要么`checkBar`返回false，要么使用未初始化的变量`checkFoo`，这使您陷入函数.`print_r``$error`

最后，在我看来，你的`collect`函数实际上并没有对`$arr`变量做任何事情，因为你没有通过`collect`引用传递它。[您可以在此处](http://php.net/manual/en/language.references.pass.php)通过引用阅读有关传递变量的信息。这里还有一个关于这个的[问题](https://stackoverflow.com/questions/2030906/are-arrays-in-php-passed-by-value-or-by-reference)。

# php - 请求表列时获取额外列“require_validation”

> ID：14904597
> 
> 赞同：0
> 
> 时间：2013-02-15T22:41:38.590
> 
> 标签：php, mysql

使用查询时

```
select distinct(column_name) as column_name, data_type from information_schema.columns
where table_name='reg_add_ons' order by ordinal_position 
```

我的开发服务器上有一个额外的列。在我的本地服务器上一切正常。这是唯一发生这种情况的表。我已经尝试删除表格并使用此语句再次添加它

```
delimiter $$

CREATE TABLE `reg_add_ons` (
  `add_on_id` int(10) NOT NULL AUTO_INCREMENT,
  `eventcode` varchar(20) DEFAULT NULL,
  `add_on_desc` varchar(250) DEFAULT NULL,
  `add_on_price` decimal(10,2) DEFAULT NULL,
  `add_on_detail` text,
  `add_on_label` varchar(100) DEFAULT NULL,
  `add_on_choices` varchar(200) DEFAULT NULL,
  `image_name` varchar(100) DEFAULT NULL,
  `internal_only` varchar(2) DEFAULT NULL,
  `assign_code` text,
  `reg_status` varchar(50) DEFAULT 'Active',
  PRIMARY KEY (`add_on_id`)
) ENGINE=MyISAM AUTO_INCREMENT=89 DEFAULT CHARSET=latin1$$ 
```

我有点流感，所以现在这对我来说没有意义。

开发盒是运行 MySQL 5.6.10 的 Windows 7 机器 本地主机是运行 MySQL 5.5.24 的 Windows 7 生产服务器是 Linux MySQL 5.0.45

只有这台机器（Dev）上的这张表有问题。什么是字段 require_validation？它从何而来？

任何见解表示赞赏

# android - 为什么在 Android 4 上使用语音搜索时，APP_DATA 包没有传递给搜索结果活动？

> ID：14904599
> 
> 赞同：2
> 
> 时间：2013-02-15T22:41:40.780
> 
> 标签：android, search, android-4.0-ice-cream-sandwich, voice

我有一个在 Android 2.2 上运行良好的可搜索应用程序。我可以通过键入或使用语音搜索进行搜索，并且我传递给的包[`startSearch`](http://developer.android.com/reference/android/app/Activity.html#startSearch%28java.lang.String,%20boolean,%20android.os.Bundle,%20boolean%29)在搜索结果活动的意图附加项中可用（在`SearchManager.APP_DATA`键下）。

但是，当在运行 Android 4.0.4 的设备上运行相同的应用程序时（我尝试了两种不同的设备 - 一种 HTC 和一种三星），该捆绑包仅在使用键盘搜索时传递给结果活动。使用语音搜索它丢失了。我已确认正在创建捆绑包并将其传递给`startSearch`. 在那之后的某个时候它会消失。

对于它的价值，这是我的`searchable.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
            android:label="@string/app_name"
            android:hint="@string/search_hint"
            android:voiceSearchMode="showVoiceSearchButton|launchRecognizer"
            android:voiceLanguageModel="web_search"
            android:voiceLanguage="en">
</searchable> 
```

这就是我调用的地方`startSearch`：

```
@Override
public boolean onSearchRequested()
{
    Bundle data = new Bundle();
    data.putParcelable(URI_EXTRA, getIntent().getParcelableExtra(URI_EXTRA));
    data.putString(NAME_EXTRA, getIntent().getStringExtra(NAME_EXTRA));
    startSearch(null, false, data, false);
    return true;
} 
```

在`onCreate`搜索结果活动中，我尝试按如下方式检索捆绑包，但它为空：

```
Bundle data = getIntent().getBundleExtra(SearchManager.APP_DATA); 
```

任何想法可能导致此问题或知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:54:07.890

我相信这个问题已经通过以下提交在 android 源代码中得到修复[https://github.com/android/platform_frameworks_base/commit/1bcfe84179417cda57176fe8661a4a749cb843b6](https://github.com/android/platform_frameworks_base/commit/1bcfe84179417cda57176fe8661a4a749cb843b6)

# java - 大多数编程语言的时间复杂度？

> ID：14904606
> 
> 赞同：2
> 
> 时间：2013-02-15T22:42:21.557
> 
> 标签：java, performance, complexity-theory

我在很多书中读到了时间复杂度模运算。有件事我不明白。我在一些书中读到以下内容

**对于任何 a mod N，a 有一个乘法逆模 N 当且仅当它与 N 互质。 N 的位）通过运行扩展的欧几里得算法。** 我的问题围绕****扩展欧几里得算法**** **是 O(n^3)* *

当我用与netbeans或C#或C++程序集成的java编写这一行时

```
A = B.modInverse(N) //here by java syntax 
```

一般来说。我可以说通常这条线的时间复杂度为 O(n^3)。

或者有必要编写相同的步骤扩展欧几里得算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:42:04.823

除非该`modInverse`方法的文档明确保证其时间复杂度，否则您通常不能对其运行时间做出任何假设。根据运行时/库甚至运行时的版本，实现可能会完全不同。

如果您有权访问源代码，则可以验证使用的是哪种算法。您还可以针对不同的输入大小运行自己的基准测试，您将获得关于具体实现的渐近行为的非常好的画面。

也就是说，用于任意精度算术的流行库很可能使用最知名的算法进行基本运算，例如`modInverse`.

# web - 滚动到顶部代码

> ID：14904612
> 
> 赞同：-1
> 
> 时间：2013-02-15T22:42:59.153
> 
> 标签：web, scroll, photo

我希望当用户点击画廊上的缩略图时，页面应该自动滚动到顶部。这是代码：

```
 <div id="gallery" class="content">
                   <div class="wrapper">
                       <div class="slideshow-c``ontainer">
                            <div id="slideshow" class="slideshow"></div>
                        </div>
                    </div>
                </div>
                <div id="thumbs" class="navigation">
                    <h3>Gallery</h3>
                    <ul class="thumbs noscript">
                        <li>
                            <a class="thumb" href="images/slider-img1.jpg" title=""> <img src="images/page1-img1.jpg" alt="" /><span></span> </a>
                        </li> 
                        <li>
                            <a class="thumb" href="images/slider-img2.jpg" title=""> <img src="images/page2-img1.jpg" alt="" /> <span></span></a>
                        </li> 
                        <li>
                            <a class="thumb" href="images/slider-img3.jpg" title=""> <img src="images/page2-img2.jpg" alt="" /> <span></span></a>
                        </li> 
                        <li class="last">
                            <a class="thumb" href="images/slider-img4.jpg" title=""> <img src="images/page3-img1.jpg" alt="" /> <span></span></a>
                        </li>
                        <li>
                            <a class="thumb" href="images/slider-img5.jpg" title=""> <img src="images/page1-img2.jpg" alt="" /> <span></span></a>
                        </li> 
                        <li>
                            <a class="thumb" href="images/slider-img6.jpg" title=""> <img src="images/page1-img3.jpg" alt="" /> <span></span></a>
                        </li>
                        <li>
                            <a class="thumb" href="images/slider-img7.jpg" title=""> <img src="images/page1-img4.jpg" alt="" /><span></span> </a>
                        </li> 
                        <li class="last">
                            <a class="thumb" href="images/slider-img8.jpg" title=""> <img src="images/page1-img5.jpg" alt="" /> <span></span></a>
                        </li>  
                        <li>
                            <a class="thumb" href="images/slider-img9.jpg" title=""> <img src="images/page1-img6.jpg" alt="" /><span></span> </a>
                        </li> 
                        <li>
                            <a class="thumb" href="images/slider-img10.jpg" title=""> <img src="images/page1-img7.jpg" alt="" /> <span></span></a>
                        </li> 
                        <li>
                            <a class="thumb" href="images/slider-img11.jpg" title=""> <img src="images/page1-img8.jpg" alt="" /> <span></span></a>
                        </li> 
                        <li class="last">
                            <a class="thumb" href="images/slider-img12.jpg" title=""> <img src="images/page1-img9.jpg" alt="" /> <span></span></a>
                        </li>  
                        <li class="last2">
                            <a class="thumb" href="images/slider-img13.jpg" title=""> <img src="images/page1-img10.jpg" alt="" /> <span></span></a>
                        </li> 
                        <li class="last2">
                            <a class="thumb" href="images/slider-img14.jpg" title=""> <img src="images/page1-img11.jpg" alt="" /> <span></span></a>
                        </li>
                        <li class="last2">
                            <a class="thumb" href="images/slider-img15.jpg" title=""> <img src="images/page1-img12.jpg" alt="" /><span></span> </a>
                        </li> 
                        <li class="last last2">
                            <a class="thumb" href="images/slider-img16.jpg" title=""> <img src="images/page1-img13.jpg" alt="" /> <span></span></a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <div class="block"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:50:23.053

您将标签中的 href 设置为图像本身。这不只是在它自己的页面上加载图像吗？

您可以使用 id 来定位页面的特定区域以滚动到。

```
<a href="#someid">Scroll</a>

More page content

<div id="someid">
    Content to scroll too
</div> 
```

# javascript - 使用 javascript 我想更改特别是 div 标签的图像的大小

> ID：14904615
> 
> 赞同：0
> 
> 时间：2013-02-15T22:43:12.333
> 
> 标签：javascript, css, html

在 HTML 文档中，很少有 id 为 DIV1、DIV2 的 div 标签在 DIV1 中有 2 个图像。在 DIV2 中只有一个图像。使用 javascript 我想将 DIV1 中的图像大小更改为 100px。如何指定该特定 div 标签中的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:46:27.873

假设那些是`id`s：

```
#div1 img {
    width: 100px;
] 
```

或者，如果您愿意（出于某种原因，尽管您*应该为此使用 CSS*），您可以使用 JavaScript：

```
var div1Images document.getElementById('div1').getElementsByTagName('img');
for (var i = 0, len = div1Images; i < len; i++){
     div1Images[i].style.width = '100px';
} 
```

我只设置*一个*维度 ( `width`) 的原因是，这样图像`height`将自动调整以适应保持自然纵横比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:46:32.803

```
document.querySelectorAll('.div1 img') 
```

这将为您提供>``NodeList`中所有`img`元素的对象（显然根据需要进行更改）。`<div class=div`您可以像普通数组一样对其进行迭代，并将元素宽度更新为您想要的任何内容.. 甚至是 100 像素！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:53:49.703

如果你想使用 jQuery，它应该很简单：

```
$(document).ready(function () {  
 //select images and adjust height & width however you want, or use just width to scale proportionately  
   $('#div1 img').width('100px');
   $('#div1 img').height('100px');
}); 
```

这是一个 jfiddle 示例：http: [//jsfiddle.net/t9pUL/4/](http://jsfiddle.net/t9pUL/4/)

但是，我同意 David Thomas 的观点，除非您有真正的理由使用 javascript，否则您可能应该为此使用 css。

# php - PHP代码中未定义的索引？

> ID：14904616
> 
> 赞同：-1
> 
> 时间：2013-02-15T22:43:14.710
> 
> 标签：php, indexing

我的 PHP 代码有一些问题。我有一个变量“$total”的未定义索引错误。我需要一些帮助来解决这个问题。这是我的整个 PHP 代码。

```
<?php
include('inc/connect.php');
session_start();
?>
<html>
<head>
    <title>Cart</title>
    <link rel='stylesheet' href='css/main.css' />
</head>
<body>
    <?php
    $page = 'index.php';

    if(isset($_GET['add'])){
        $add_id = $_GET['add'];
        $quantity = mysql_query("SELECT id, quantity FROM products WHERE id='$add_id'");
        while($quantity_row = mysql_fetch_assoc($quantity)){
            if($quantity_row['quantity'] !=@$_SESSION['cart_'.$add_id]){
                @$_SESSION['cart_'.$_GET['add']]+='1';
                header('Location: index.php');
            }
            else{
                header('Location: index.php?err=max');
            }
        }

    }

    if(isset($_GET['remove'])){
        $_SESSION['cart_'.(int)$_GET['remove']]--;
        header("Location: index.php");
    }

    if(isset($_GET['delete'])){
        $_SESSION['cart_'.(int)$_GET['delete']]='0';
        header('Location: index.php');
    }

    function products(){
        $get = mysql_query("SELECT id, name, description, price FROM products WHERE quantity > 0 ORDER BY id DESC");
        if(mysql_num_rows($get) == 0){
            echo "There are no products to display.";
        }
        else{
            while($get_row = mysql_fetch_assoc($get)){
                echo '<p>'.$get_row['name'].'<br />'.$get_row['description'].'<br />$'.$get_row['price'].' <a href="cart.php?add='.$get_row['id'].'">Add</a></p>';
            }
        }
    }

    function cart(){
        foreach($_SESSION as $name => $value){
            if($value>0){
                if(substr($name, 0, 5)=='cart_'){
                    $id = substr($name, 5, strlen($name)-5);
                    $get = mysql_query("SELECT id, name, price FROM products WHERE id='$id'");
                    while($get_row = mysql_fetch_assoc($get)){
                        $sub = $get_row['price']*$value;
                        echo $get_row['name'].' x '.$value.' @ $'.number_format($get_row['price'], 2).' = $'.$sub.' <a href="cart.php?add='.$id.'">[+]</a> <a href="cart.php?remove='.$id.'">[-]</a> <a href="cart.php?delete='.$id.'">[Delete]</a>';
                    }
                }
                $total += $sub; 
            }
        }
        echo '<br />'.$total;
    }

    ?>
</body> 
```

提前感谢您的帮助。在不久的将来，我可能需要更多帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:44:48.220

代码第一次尝试执行的操作`$total+=$sub`未定义`$total`。

您需要在函数`$total`顶部设置：`cart()`

```
function cart(){
    $total = 0;
    /// rest of code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:48:53.240

在您的功能购物车（）中：

先声明变量`$total`。

例如`$total = 0 ;` ，然后开始增加它`$total += $sub ;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T06:53:14.317

```
<?php
include('inc/connect.php');
session_start();
?>
<html>
<head>
    <title>Cart</title>
    <link rel='stylesheet' href='css/main.css' />
</head>
<body>
    <?php
    $page = 'index.php';

    if(isset($_GET['add'])){
        $add_id = $_GET['add'];
        $quantity = mysql_query("SELECT id, quantity FROM products WHERE id='$add_id'");
        while($quantity_row = mysql_fetch_assoc($quantity)){
            if($quantity_row['quantity'] !=@$_SESSION['cart_'.$add_id]){
                @$_SESSION['cart_'.$_GET['add']]+='1';
                header('Location: index.php');
            }
            else{
                header('Location: index.php?err=max');
            }
        }

    }

    if(isset($_GET['remove'])){
        $_SESSION['cart_'.(int)$_GET['remove']]--;
        header("Location: index.php");
    }

    if(isset($_GET['delete'])){
        $_SESSION['cart_'.(int)$_GET['delete']]='0';
        header('Location: index.php');
    }

    function products(){
        $get = mysql_query("SELECT id, name, description, price FROM products WHERE quantity > 0 ORDER BY id DESC");
        if(mysql_num_rows($get) == 0){
            echo "There are no products to display.";
        }
        else{
            while($get_row = mysql_fetch_assoc($get)){
                echo '<p>'.$get_row['name'].'<br />'.$get_row['description'].'<br />$'.$get_row['price'].' <a href="cart.php?add='.$get_row['id'].'">Add</a></p>';
            }
        }
    }

    function cart(){
    $total = 0;
        foreach($_SESSION as $name => $value){
            if($value>0){
                if(substr($name, 0, 5)=='cart_'){
                    $id = substr($name, 5, strlen($name)-5);
                    $get = mysql_query("SELECT id, name, price FROM products WHERE id='$id'");
                    while($get_row = mysql_fetch_assoc($get)){
                        $sub = $get_row['price']*$value;
                        echo $get_row['name'].' x '.$value.' @ $'.number_format($get_row['price'], 2).' = $'.$sub.' <a href="cart.php?add='.$id.'">[+]</a> <a href="cart.php?remove='.$id.'">[-]</a> <a href="cart.php?delete='.$id.'">[Delete]</a>';
                    }
                }
                $total += $sub; 
            }
        }
        echo '<br />'.$total;
    }

    ?>
</body> 
```

为您修复了代码。

# cakephp - 从 URL 传递参数的 Cakephp 路由问题

> ID：14904617
> 
> 赞同：1
> 
> 时间：2013-02-15T22:43:17.387
> 
> 标签：cakephp, routing, controller

对于 cakePHP 路由，我知道如果你这样做

```
Router::connect(
    '/:controller/:id',
    array('action' => 'view'),
    array('id' => '[0-9]+')
); 
```

这将映射到[http://www.mywebsite.com/controller/view/id](http://www.mywebsite.com/controller/view/id)的任何网址，

但是映射 URL 是[http://www.mywebsite.com/controller/id/action](http://www.mywebsite.com/controller/id/action)怎么样？

例如：[http ://www.mywebsite.com/classes/3/create/2](http://www.mywebsite.com/classes/3/create/2)

在我的类控制器中的创建函数中，

它将接收参数 $id，在本例中为 3，以及 $count，在本例中为 2，

```
public function create( $id, $count ) {
    ....
    // i can here create a total number of $count students
    // and assign them class_id $id

    // so  student1.class_id = 3
    // and student2.class_id = 3
} 
```

我试过了，

```
Router::connect(
'/:controller/:id/:action',
    array('id' => '[0-9]+'),
    array('count' => '[0-9]{,2}')
); 
```

它对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:38:31.303

为了让 Cake 将 id 和 count 传递给你的控制器动作，你必须让路由知道它们是传递的参数。为此，请`pass`按照您希望它们传递的顺序将它们包含在最后一个选项的数组中。

你也错过`:count`了你的路线，所以如果你通过了计数，它就不会匹配。

您的新路线应如下所示：

```
Router::connect(
    '/:controller/:id/:action/:count',
    array(),
    array(
  'pass' => array('id', 'count'),
  'id' => '[0-9]+',
      'count' => '[0-9]{,2}'
)
); 
```

# html - 检测纵横比 - HTML5 视频

> ID：14904623
> 
> 赞同：8
> 
> 时间：2013-02-15T22:43:34.147
> 
> 标签：html, video, html5-video, aspect-ratio

是否可以检测 HTML5 视频元素的纵横比？

我知道视频只会缩小以适应`<video>`元素的尺寸，但我想检测源视频的纵横比。

这样你就可以删除任何黑条。

抱歉，我在其他任何地方都没有看到这个答案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-15T22:47:09.380

从另一个 StackOverflow 答案粘贴： [https ://stackoverflow.com/a/4129189/1353189](https://stackoverflow.com/a/4129189/1353189)

```
<video id="foo" src="foo.mp4"></video>

var vid = document.getElementById("foo");
vid.videoHeight; // returns the intrinsic height of the video
vid.videoWidth; // returns the intrinsic width of the video 
```

来源（HTML5 规范）：[http ://www.w3.org/TR/html5/video.html#video](http://www.w3.org/TR/html5/video.html#video)

然后，您可以通过将宽度除以高度来计算纵横比。

# php - 使用字符串作为数组索引 PHP

> ID：14904624
> 
> 赞同：0
> 
> 时间：2013-02-15T22:43:41.927
> 
> 标签：php, arrays

我真的被这个难住了。我有这个数组变量`$banner_image_description`。当我打印它时，我得到`Array ( ['title'] => dafha ['price'] => adhfadhf )`.

现在，我要做的是检查'title'处值的长度并确保它大于2。所以当我运行时：

```
if (isset($this->request->post['banner_image'])) 
    {
        foreach ($this->request->post['banner_image'] as $banner_image_id => $banner_image) 
        {
            foreach ($banner_image['banner_image_description'] as $language_id => $banner_image_description) 
            {   
                print_r($banner_image_description);
                echo('<br/>');
                if ((utf8_strlen($banner_image_description['title']) < 2) || (utf8_strlen($banner_image_description['title']) > 64)) 
                { 

                    $this->error['banner_image'][$banner_image_id][$language_id] = $this->language->get('error_title'); 
                }                   
            }
        }   
    } 
```

我明白`Notice: Undefined index: title`了，我不知道为什么。我认为这是获取“标题”值的正确方法，我知道索引就在那里，价值就在那里。

我很确定该数组是通过 POSTing 表单值填充的：

```
if (isset($this->request->post['banner_image'])) 
{
    $banner_images = $this->request->post['banner_image'];
} 
```

以下是表单值的样子：

```
<input type="text" 
 name="banner_image[<?php echo $image_row; ?>][banner_image_description][<?php echo $language['language_id']; ?>]['title']" 
 value="<?php echo isset(
 $banner_image['banner_image_description'][$language['language_id']]['title']) ? 
 $banner_image['banner_image_description'][$language['language_id']]['title'] : ''; ?>" />
 <img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:50:59.463

这是一个警告，它是糟糕的编程，但不会破坏任何东西。

这样做，它将确保密钥已设置并具有值。请记住，如果未设置此项，则密钥没有值，您的 echo 语句将不会触发。

```
if (isset($banner_image_description['title']) && (utf8_strlen($banner_image_description['title']) < 2)) 
{ 
    echo 'too short!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:46:31.033

`var_dump()`透露关键是包括'所以if语句应该设置为

```
if ((utf8_strlen($banner_image_description["'title'"]) < 2) || (utf8_strlen($banner_image_description["'title'"]) > 64)) 
```

# ios - Objective-C 从字符串中获取电子邮件地址

> ID：14904626
> 
> 赞同：1
> 
> 时间：2013-02-15T22:43:47.557
> 
> 标签：ios, objective-c

我有一个 NSString 包含几个电子邮件地址和一些其他随机文本。我希望能够只提取电子邮件地址。它们都具有相同的域，例如@business.com。最好的方法是什么？

示例字符串 (HTML)

```
 <td colspan="2" bgcolor="#000000">
        <p align="center"><b><font color="#FFFFFF" size="2">title</font></b></p></td>
    </tr>

    <tr>
        <td valign="top">

<font size="2"><b>lastname</b>, firstname A.,&nbsp;name@business.com</font><br>

<font size="2"><b>lastname</b>, firstname A.,&nbsp;name@business.com</font><br>

<font size="2"><b>lastname</b>, firstname,&nbsp;name@business.com</font><br>

<font size="2"><b>lastname</b>, firstname,&nbsp;name@business.com</font><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:47:43.410

看看使用[查找电子邮件地址](http://www.regular-expressions.info/email.html)[`NSRegularExpression`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:18:14.790

由于我自己感兴趣，所以我冒昧地为您创建了一个示例：

```
NSString *someHTML = @"<b>lastname</b>, firstname,&nbsp;test1@business.com</font><b>lastname</b>, firstname,&nbsp;test2@business.com</font><b>lastname</b>, firstname,&nbsp;test3@business.com</font>";
NSRegularExpression *regex   = [NSRegularExpression regularExpressionWithPattern:@"(\\w*@business.com)" options: NSRegularExpressionUseUnixLineSeparators error:nil];
NSArray *matches = [regex matchesInString:someHTML options:NSMatchingWithTransparentBounds range:NSMakeRange(0, someHTML.length)];
for (NSTextCheckingResult *result in matches)
{
    NSString *email = [someHTML substringWithRange:[result range]];
    NSLog(email);
} 
```

# java - java, 使用 gui 连接到另一台计算机/服务器的文件系统

> ID：14904636
> 
> 赞同：0
> 
> 时间：2013-02-15T22:44:57.463
> 
> 标签：java, user-interface, connection

解决方案？

- 看起来我可以在 jsch 中使用 x-11 转发，并使用 java Desktop 类来启动文件浏览器。不确定这是否可行。

我想要做的是，在 java 应用程序中，打开与服务器或另一台计算机的连接。我找到了一种方法来打开一个终端窗口，但我想要的是一个类似于 gui/explorer/finder 的窗口，它允许我在机器之间拖放文件。

--Edit-- 一个例子：当我使用 sftp 应用程序时，我可以打开一个图形窗口并将文件从我的计算机拖到远程服务器上的文件夹中。就像资源管理器或查找器窗口一样。我正在寻找一种在 java 中实现此类功能的方法。我想打开到远程机器的连接，然后打开一个图形窗口来浏览文件系统

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:00:40.633

您可以使用[JSch](http://www.jcraft.com/jsch/)通过 SSH 与服务器通信 1\. 创建自己的 GUI 或 2\. 使用 X11 转发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:49:59.200

您需要在每台机器上安装两个应用程序，您可以通过 TLS 连接来执行此操作。但是，它需要客户机器（可拖动）中的等待线程来从 Tls 端口获取文件并将其流式传输到新位置，或者如果您只想在一台机器上使用 gui，您可以使用旧的 applet 或 java Fx。

# asp.net - 如何将图像“打印”到 ASP.NET 更新面板页面？

> ID：14904639
> 
> 赞同：0
> 
> 时间：2013-02-15T22:45:23.147
> 
> 标签：asp.net

我创建了一个图表，并将其保存在路径 server.mappath("/images/chart/chartname.png") 中，如果我转到该路径，图像就在那里，我可以在我的计算机上打开它，但是我真正想做的是在我创建它之后在页面上显示图像，最好是异步的。我尝试在更新面板中放置一个 asp:image 控件并更改 url，但这不起作用。我尝试了很多不同的方法，如果有人能指出我正确的方向，那就太好了。我不会发布任何简单的代码，因为到目前为止我正在工作。一旦我开始尝试打印图像，如果我有答案，我会发布片段。

编辑：这是一些代码

启动整个事情的按钮事件：

```
Protected Sub btnCreate_Click(sender As Object, e As EventArgs) Handles btnCreate.Click

    Dim worker As New backgroundWorker

    'Check input

    worker.RunWorker({})

    Session("worker") = worker

    Timer1.Enabled = True

End Sub 
```

这将启动生成图表的工作人员，并启动用于更新面板的计时器。最终在该代码中，会发生这种情况

```
Dim imgpath As String = Server.MapPath("images/chart/test.png")
chart.SaveImage(imgpath, ChartImageFormat.Png)
chartImg.ImageUrl = "~/images/chart/test.png" 
```

现在，我知道执行此代码后面板正在更新，因为我将一些消息输出到多行文本框，并且它们确实出现了。所有这些控件也在 updatePanel 的 contentTemplate 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:14:16.507

根据我的经验，文件上传在异步模式下不起作用。您应该使用 Jquery 库来异步上传文件。

检查此链接。

```
http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:33:42.353

我不知道 ajax 但你可以在 javascript 的帮助下做到这一点。这是我在我的系统上测试的代码，它运行良好。

```
<body>
<p>
    welcome to judge site</p>
<form id="form1" runat="server">
<script language="javascript" type="text/javascript">
    function PrintImage()
    {
        printWindow = window.open ("", "mywindow","location=1,status=1,scrollbars=1,width=600,height=600");
        printWindow.document.write("<div style='width:100%;'>");
        printWindow.document.write("<img id='img' src='" + document.getElementById('iconId').src + "'/>");
        printWindow.document.write("</div>");
        printWindow.document.close();
        printWindow.print();
    }
</script>
<div>
    <img id="iconId" alt="photo" src="iconId.png" style="width: 500px; height: 360px" /><br />
    <input type="button" id="btnPrint" value="Print Image" onclick="PrintImage()" />
</div>
</form> 
```

您可以在以下链接上找到其他更多示例（以上代码也来自此来源，但由我编辑以使其在我的系统上运行）

访问[http://forums.asp.net/p/1463001/3369521.aspx](http://forums.asp.net/p/1463001/3369521.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T20:42:40.657

在更新面板中设置`ImageUrl`ASP.Net 图像控件的属性应该可以做到这一点，而不必使用 Javascript，尽管这种方法可能非常有效。UpdatePanel 倾向于“繁重”，即 ScriptManager、UpdatePanel 和 ASP.Net ViewState 倾向于通过它们的 AJAX 方法来回发送大量信息。[您可以通过使用Fiddler](http://www.fiddler2.com/fiddler2/)来查看您的网络流量来了解我的意思。

话虽如此，我能够通过以下方式达到预期的效果。我有两个静态图像，Image1.jpg 和 Image2.jpg，但只要 URL 正确，它应该可以与您动态生成的图像一起使用。

这是我的 ASPX 页面的文本：

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<div>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Image ID="Image1" runat="server" ImageUrl="~/Image1.jpg" Width="300"></asp:Image><br />
            <asp:Button runat="server" ID="btnSwitchImage" Text="Switch" />
        </ContentTemplate>
    </asp:UpdatePanel>

</div>
</form> 
```

这是代码隐藏：

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load( object sender, EventArgs e )
    {
        btnSwitchImage.Click += new EventHandler( btnSwitchImage_Click );
    }

    void btnSwitchImage_Click( object sender, EventArgs e )
    {
        Image1.ImageUrl = "~/Image2.jpg";
    }
} 
```

只要按钮和图像控件在 UpdatePanel 中，`ContentTemplate`所有内容都应该通过 AJAX 传递。再次使用 Fiddler 确认这一点。

如果此示例适用于您，但您仍然无法让您的应用程序正常工作，请尝试在您的问题中发布一些代码。它可能会帮助每个人直接分析问题。

# android - 内容提供者不工作

> ID：14904640
> 
> 赞同：-1
> 
> 时间：2013-02-15T22:45:29.620
> 
> 标签：android

我正在使用在 ICS 上运行的 Xperia。这是我编写的一个应用程序，用于了解内容提供者的工作方式。该应用程序在 GingerBread 模拟器上运行良好，但在我的手机中没有显示任何内容。导致应用程序表现得这样的问题是什么？这是android清单的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="legacy_systems.contentprovider"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.READ_CONTACTS"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="legacy_systems.contentprovider.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

以及布局代码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView 
        android:id="@+id/android:lst"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:stackFromBottom="false"
        android:transcriptMode="normal" />

    <TextView
        android:id="@+id/con_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold" />

    <TextView 
        android:id="@+id/con_id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

最后是java源文件的代码。

```
package legacy_systems.contentprovider;

import android.os.Bundle;
import android.view.Menu;
import android.app.ListActivity;
import android.content.CursorLoader;
import android.database.Cursor;
import android.net.Uri;
import android.provider.ContactsContract;
import android.widget.CursorAdapter;
import android.widget.SimpleCursorAdapter;

public class MainActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Uri allCont = Uri.parse("content://contacts/people");
        Cursor c;
        if(android.os.Build.VERSION.SDK_INT <11){
            c = managedQuery(allCont, null, null, null, null);
        }
        else{
            CursorLoader cl = new CursorLoader(this,
                    allCont,
                    null,
                    null,
                    null,
                    null);

            c = cl.loadInBackground();
        }
        String[] columns = new String[]{ContactsContract.Contacts.DISPLAY_NAME, ContactsContract.Contacts._ID};
        int views[]=new int[]{R.id.con_name, R.id.con_id};
        SimpleCursorAdapter ada;

        if(android.os.Build.VERSION.SDK_INT<11){
            ada = new SimpleCursorAdapter(this, R.layout.activity_main,c, columns, views);
        }
            else
            {
                ada = new SimpleCursorAdapter(this, R.layout.activity_main,c, columns, views, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
            }
        this.setListAdapter(ada);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

我无法解决其中的问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:09:20.863

您将 ListView 的 ID 设置为`@+android:id/lst`. 我想你的意思是输入`list`. 如果您没有使用`+`那里，资源编译器将能够告诉您您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:12:40.643

你已经很近了，只是还没到。

1.  您应该避免使用自己定义的常量作为 Contacts Provider 的内容 URI。
2.  您应该在 android.support.v4.content.CursorLoader 中使用 CursorLoader 的支持库实现，而根本不使用 managedQuery。
3.  您没有正确使用 CursorLoader。[在http://developer.android.com/training/load-data-background/index.html](http://developer.android.com/training/load-data-background/index.html)有一个 CursorLoader 的培训课程，展示了如何使用支持库版本

可能发生的情况是您正在使用 Honeycomb 或更低版本的平台版本运行模拟器，然后使用 managedQuery。这样可行。您的设备可能正在使用更高的平台版本，然后尝试使用 CursorLoader，但失败了。

你有正确的想法，你只需要使用正确的策略！

# vba - VBA 错误 1004 - Range 类的 PasteSpecial 方法

> ID：14904641
> 
> 赞同：0
> 
> 时间：2013-02-15T22:45:55.953
> 
> 标签：vba, excel-2007

最近我开始收到错误`1004: PasteSpecial method of Range class failed`。我知道人们之前说过，它可能是在没有活动表的情况下试图粘贴到活动表，但是，正如你所看到的，一切都是基于这样的`ThisWorkbook`，所以这不应该是问题。当 Excel 没有焦点时，它会发生更多。

```
'references the Microsoft Forms Object Library
Sub SetGlobals()
    Set hwb = ThisWorkbook' home workbook
    Set mws = hwb.Worksheets("Code Numbers") ' main worksheet
    Set hws = hwb.Worksheets("Sheet3") ' home worksheet (Scratch pad)
    Set sws = hwb.Worksheets("Status") ' Status sheet
    Set aws = hwb.Worksheets("Addresses") ' Addresses sheet
End Sub
Sub Import()

    Call SetGlobals
    hws.Select
    'a bunch of code to do other stuff here.
    For Each itm In itms
        Set mitm = itm
        body = Replace(mitm.HTMLBody, "<img border=""0"" src=""http://www.simplevoicecenter.com/images/svc_st_logo.jpg"">", "")
        Call Buf.SetText(body)
        Call Buf.PutInClipboard
        Call hws.Cells(k, 1).Select
        Call hws.Cells(k, 1).PasteSpecial

        For Each shape In hws.Shapes
            shape.Delete
        Next shape

        'Some code to set the value of k 
        'and do a bunch of other stuff.
    Next itm
End Sub 
```

**更新：** mitm 和 itm 有两种不同的类型，所以我这样做是为了智能感知，谁知道还有什么。此代码获取电子邮件列表并将它们粘贴到 excel 中，以便 excel 解析 html（包含表格）并将其直接粘贴到 excel 中。因此，数据直接进入工作表，我可以对其进行排序和解析以及我想要的任何其他内容。

我想我基本上是在询问任何知道另一种方法的人，除了将它放在一个 html 文件中发布它。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:13:38.337

这可能不会完全回答您的问题 - 但我注意到您的源代码中的一些内容太长而无法放在评论中，所以就在这里。其中一些肯定是因为您在示例中省略了它，但我还是会提到它，以防万一：

*   使用`Option Explicit`- 这将避免很多错误，因为它会强制您声明每个变量
*   `Call SetGlobals`可以简化为`SetGlobals`- 相同的`Call Buf.SetText(body)`=`Bof.SetText Body`等。
*   无需“选择”任何内容 - 您可以直接通过工作表/范围/形状对象访问所有内容（这是最佳实践），因此不要选择 ( `hws.Select`, `hws.Cells(k,1).Select`)
*   为什么`Set mitm = itm`？`mitm`因此将是相同的对象`itm`- 所以你可以简单地使用`itm`
*   您将多次删除所有形状`hws`- 对于`itms`. 但是，一次就足够了，所以将删除循环移到 For Each 循环之外
*   无需将某些内容放入剪贴板然后将其粘贴到单元格中，只需直接分配它即可：`hws.Cells(k, 1).Value = body` **-这应该可以解决您的错误！**
*   不用为您在“SetGlobals”中分配的工作表使用全局变量，只需使用 Excel 本地提供的工作表对象：如果您使用项目树查看 VBE 中的右侧窗口，您会看到工作表节点`Sheet1 (sheetname)`、`Sheet2 (sheetname)`等。您可以重命名这些对象 - 转到它们的属性 ( `F4`) 并将其更改为有意义的名称 - 或您当前的名称 ( `hwb`, `mws`, ...) 如果需要。然后，您可以在整个代码中访问它们而无需任何分配！即使您将名称更改为`Sheet3`有意义的名称，它也会在以后起作用！;-)

因此，考虑到这一切，我最终得到以下代码，做同样的事情：

```
Option Explicit

Sub Import()

    'a bunch of code to do other stuff here.

    For Each shape In hws.Shapes
        shape.Delete
    Next shape

    For Each itm In itms
        Call hws.Cells(k, 1) = Replace(itm.HTMLBody, "<img border=""0"" src=""http://www.simplevoicecenter.com/images/svc_st_logo.jpg"">", "")

        'Some code to set the value of k 
        'and do a bunch of other stuff.
    Next itm
End Sub 
```

# c# - SLF 释放文件锁

> ID：14904642
> 
> 赞同：1
> 
> 时间：2013-02-15T22:46:00.867
> 
> 标签：c#, file-locking

我有一个使用 SLF 进行日志记录的程序。该程序 24/7 运行，我想每天晚上将日志文件上传到远程服务器以供以后查看。

我的问题是，如何在不关闭程序的情况下释放日志的文件锁？

我希望暂停日志记录，上传日志，删除日志文件或擦除内容，然后恢复日志记录。

```
ILogger logger = LoggerService.GetLogger(typeof(TaskScheduler).FullName);

// Other initialization here

foreach (var task in managedTasks.OrderBy(t => t.Priority))
{
    if (task.NextRunTime <= DateTime.Now)
    {
        dataManager.CurrentStatus = AppStatus.Running;
        if (task.Name == "Log Sender")
        {
             logger = null;
        }

        // Run the task

        if (task.Name == "Log Sender")
        {
            logger = LoggerService.GetLogger(typeof(TaskScheduler).FullName);
        }

        dataManager.CurrentStatus = AppStatus.Idle;
    }
} 
```

目前，当我这样做时，我仍然收到 IOException，因为该文件仍被任务计划程序锁定。

编辑：如果有帮助，我会在 log4net 上使用 SLF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:06:49.033

我认为这是一个设计问题，而不是技术问题。将每天的事件记录在一个单独的文件中，第二天您可以使用昨天的日志文件做任何您想做的事情。您可以根据需要缩小日志周期（例如每 12 小时一次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:50:49.597

在发布此问题并获得重新考虑我的设计的建议后。我开始考虑为每个日期创建一个滚动日志文件。我遇到了这个，这完全解决了我的问题：

```
<appender name="InfoRollingLogFileAppender" type="log4net.Appender.RollingFileAppender,log4net">
  <param name="File" value="log.txt" />
  <param name="StaticLogFileName" value="true"/>
  <maximumFileSize value="1024KB" />
  <appendToFile value="true" />
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%logger: %date{dd MMM yyyy HH:mm:ss} [%thread] %-5level - %message %newline" />
  </layout>
</appender> 
```

我在我的 app.config 中配置了 log4net appender 以遵循 lockingModel 以包含一个“MinimalLock”，这使我能够提取日志的内容，将它们上传到服务器，然后擦除本地日志，而无需创建单独的日志文件指定的时间/日期跨度。

再次感谢大家的帮助，如果没有您的建议，我不会偶然发现这个方便的更改。

# git - 如何使用 vimdiff 解决 git 合并冲突？

> ID：14904644
> 
> 赞同：205
> 
> 时间：2013-02-15T22:46:13.093
> 
> 标签：git, vim, git-merge, mergetool, git-merge-conflict

我刚刚在 git 中将一个分支合并到我的 master 中，`Automatic merge failed; fix conflicts and then commit the result.`现在我运行`git mergetool`并打开了 vimdiff，如下图所示。我不知道如何使用 vimdiff。这里的每个面板是什么意思，我应该如何着手解决合并冲突？

![在此处输入图像描述](../Images/51d00512b41dfe1fe2d4798cd0c883f6.png)

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-02-15T23:36:31.023

所有四个缓冲区都提供了同一文件的不同视图。左上角的缓冲区 (LOCAL) 是文件在目标分支中的外观（您正在合并的内容）。右上角的缓冲区 (REMOTE) 是文件在您的源分支（您要合并的位置）中的外观。中间缓冲区 (BASE) 是两者的共同祖先（因此您可以比较左右版本的差异）。

我可能会误解以下几点。我认为合并冲突的根源是两个文件自 BASE 以来都更改了文件的同一部分；LOCAL 将引号从双引号更改为单引号，REMOTE 进行了相同的更改，但也将背景值从颜色更改为 URL。（我认为合并不够聪明，无法注意到对 LOCAL 的所有更改也存在于 REMOTE 中；它只知道 LOCAL 自 BASE 以来在 REMOTE 具有的相同位置进行了更改）。

在任何情况下，底部缓冲区都包含您可以实际编辑的文件——位于您的工作目录中的文件。您可以进行任何您喜欢的更改；`vim`正在向您展示它与每个顶视图有何不同，这是自动合并无法处理的区域。如果您不想进行远程更改，请从 LOCAL 中提取更改。如果您更喜欢 LOCAL 更改，请从 REMOTE 中提取更改。如果您认为 REMOTE 和 LOCAL 都错误，请从 BASE 中提取。如果您有更好的主意，请做一些完全不同的事情！最后，您在此处所做的更改是实际提交的更改。

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2017-07-25T16:52:05.853

@chepner 的回答很好，我想在问题的“我应该如何着手解决合并冲突”部分添加一些细节。如果您研究在这种情况下如何实际使用 vimdiff，它会在下面进行。

* * *

首先，解决“中止一切”选项 - 如果您不想使用“vimdiff”并想中止合并：按`Esc`，然后键入`:qa!`并点击`Enter`。（另见[如何退出 Vim 编辑器？](https://stackoverflow.com/questions/11828270/how-to-exit-the-vim-editor#11828573)）。Git 会询问你合并是否完成，回复`n`.

* * *

如果你想使用 vimdiff，这里有一些有用的快捷方式。这假设您了解 Vim 的基础知识（导航和插入/正常模式）：

*   导航到底部缓冲区（合并结果）：`Ctrl-W` `j`
*   `j`使用/导航到下一个差异`k`；或者，更好的是，分别使用`]` `c`和`[` `c`导航到下一个和上一个差异
*   `z` `o`如果您想查看更多上下文，请使用while 折叠打开它
*   对于每个差异，根据@chepner 的回答，您可以从本地、远程或基本版本获取代码，也可以对其进行编辑并按照您认为合适的方式重做
    *   要从本地版本中获取它，请使用`:diffget LO`
    *   从远程：`:diffget RE`
    *   从基地：`:diffget BA`
    *   或者，如果您想自己编辑代码，请先从 local/remote/base 获取一个版本，然后进入插入模式并编辑其余部分
*   完成后，保存合并结果，并退出所有窗口`:wqa`
    *   如果您想中止合并当前文件并且不将其标记为已解决，请`:cquit`改为退出：[如何取消外部 git diff？](https://stackoverflow.com/questions/2786619/how-do-you-cancel-an-external-git-diff)
*   通常，git 检测到合并已完成并创建合并提交

如果没有复制粘贴或自定义快捷方式，似乎无法同时添加本地和远程冲突块：[https ://vi.stackexchange.com/questions/10534/is-there-a-way-to-take-both- when-using-vim-as-merge-tool](https://vi.stackexchange.com/questions/10534/is-there-a-way-to-take-both-when-using-vim-as-merge-tool)这是一种耻辱，因为 add add 是一种常见的冲突类型。

为了防止 vimdiff 每次启动时都要求您按 enter，请添加到您的`.vimrc`：

```
set shortmess=Ot 
```

如所述：[https ://vi.stackexchange.com/questions/771/how-can-i-suppress-the-press-enter-prompt-when-opening-files-in-diff-mode](https://vi.stackexchange.com/questions/771/how-can-i-suppress-the-press-enter-prompt-when-opening-files-in-diff-mode)

您可以在 Internet 上搜索其他 vimdiff 快捷方式。我发现这个很有用：[https ://gist.github.com/hyamamoto/7783966](https://gist.github.com/hyamamoto/7783966)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-06-14T15:52:35.963

**替代 vimdiff 的终极合并工具**

这有点开玩笑，但这是我在尝试 vimdiff 后最终收敛为 vimer 的内容。

要解决合并冲突，我几乎总是需要查看：

*   偏僻的
*   当地的
*   两个差异：
    *   差异基础遥控器
    *   差异基础本地

然后尝试将它们放在一起。

虽然 vimdiff 确实在屏幕上显示 BASE、LOCAL 和 REMOTE：

```
 +--------------------------------+
    | LOCAL  |     BASE     | REMOTE |
    +--------------------------------+
    |             MERGED             |
    +--------------------------------+ 
```

我不知道如何使它清楚地显示我需要的这两个差异，除了通过左右看几次。

此外，本地和远程已经在 git 合并冲突标记中可见，所以我没有从再次显示它们的工具中获得太多。

因此，我创建了自己的微型“difftool”，它实际上显示了我缺少的差异：

~/bin/cirosantilli-mergetool

```
#!/usr/bin/env bash
BASE="$1"
LOCAL="$2"
REMOTE="$3"
diff --color -u "$BASE" "$LOCAL"
diff --color -u "$BASE" "$REMOTE"
exit 1 
```

[GitHub 上游](https://github.com/cirosantilli/dotfiles/blob/bd63ecd2f8adc4e318134381f01e3d2f0e32282d/home/bin/cirosantilli-mergetool).

并安装它：

```
git config --global mergetool.cirosantilli-mergetool.cmd 'cirosantilli-mergetool $BASE $LOCAL $REMOTE'
git config --global mergetool.cirosantilli-mergetool.trustExitCode true
# If you want this to become your default mergetool.
#git config --global merge.tool 'cirosantilli-mergetool' 
```

现在，当你这样做时：

```
git mergetool -t cirosantilli-mergetool 
```

它显示了我想要在终端上的两个差异，例如：

```
--- ./src/dev/arm/RealView_BASE_15560.py        2019-12-27 13:46:41.967021591 +0000
+++ ./src/dev/arm/RealView_LOCAL_15560.py       2019-12-27 13:46:41.979021479 +0000
@@ -994,7 +994,7 @@                                                              

     def setupBootLoader(self, cur_sys, loc):
         if not cur_sys.boot_loader:                           
-            cur_sys.boot_loader = [ loc('boot_emm.arm64'), loc('boot_emm.arm') ]
+            cur_sys.boot_loader = [ loc('boot.arm64'), loc('boot.arm') ]
         cur_sys.atags_addr = 0x8000000                  
         cur_sys.load_offset = 0x80000000                    

@@ -1054,7 +1054,7 @@                                           
             ]                                                     

     def setupBootLoader(self, cur_sys, loc):
-        cur_sys.boot_loader = [ loc('boot_emm_v2.arm64') ]
+        cur_sys.boot_loader = [ loc('boot_v2.arm64') ]
         super(VExpress_GEM5_V2_Base,self).setupBootLoader(
                 cur_sys, loc)                             

--- ./src/dev/arm/RealView_BASE_15560.py        2019-12-27 13:46:41.967021591 +0000
+++ ./src/dev/arm/RealView_REMOTE_15560.py      2019-12-27 13:46:41.991021366 +0000
@@ -610,10 +610,10 @@           
     def attachIO(self, *args, **kwargs):              
         self._attach_io(self._off_chip_devices(), *args, **kwargs)

-    def setupBootLoader(self, cur_sys, loc):
-        cur_sys.boot_loader = loc('boot.arm') 
-        cur_sys.atags_addr = 0x100                           
-        cur_sys.load_offset = 0       
+    def setupBootLoader(self, cur_sys, boot_loader, atags_addr, load_offset):
+        cur_sys.boot_loader = boot_loader      
+        cur_sys.atags_addr = atags_addr     
+        cur_sys.load_offset = load_offset 
```

所以你可以在这里看到转储到终端的两个差异：

*   `RealView_BASE_15560.py`对比`RealView_LOCAL_15560.py`
*   `RealView_BASE_15560.py`对比`RealView_REMOTE_15560.py`

如果差异很大，我会用[我的 tmux superpowers](https://superuser.com/questions/231002/how-can-i-search-within-the-output-buffer-of-a-tmux-shell/1253137#1253137)搜索。

TODO：要实现 Nirvana，剩下的最后一件事就是只为冲突的大块显示差异。因为如果差异很大但只有很小的块冲突，那么找到它会很烦人。

是的，您确实丢失了 vimdiff 提供的一些快捷方式，但通常解决冲突需要从两个版本中仔细复制粘贴，我可以在带有 git 冲突标记的普通 vim 会话中很好地完成。

**`vimdiff`在运行时观察和比较文件**

在我坐下来并使用 自动化我的完美设置之前`cirosantilli-mergetool`，这就是我为获得所需的两个差异所做的工作。

在`git mergetool`运行`vimdiff`时，如果名为 的文件发生冲突`main.py`，git 会为每个版本生成文件，命名为：

```
main_BASE_1367.py
main_LOCAL_1367.py
main_REMOTE_1367.py 
```

在与 git mergetool 的 PID 相同的目录中`main.py`，`1367`因此是一个“随机”整数，如以下所述：[在 git 合并冲突中，生成的 BACKUP、BASE、LOCAL 和 REMOTE 文件是什么？](https://stackoverflow.com/questions/20381677/in-a-git-merge-conflict-what-are-the-backup-base-local-and-remote-files-that)

因此，要查看我想要的差异，我首先使用 找到生成的文件`git status`，然后打开新终端并在我关心的文件对之间执行 vimdiff：

```
vim -d main_BASE_1367.py main_LOCAL_1367.py
vim -d main_BASE_1367.py main_REMOTE_1367.py 
```

与 一起`git mergetool`，这些信息有助于 A LOT 快速了解发生了什么！

此外，即使 mergetool 正在运行，您也可以打开文件：

```
vim main.py 
```

如果您觉得使用更大的编辑器窗口会更容易，请直接在此处进行编辑。

**直接跳转合并冲突**

虽然`]c`跳转到 vimdiff 中的下一个差异点，但那里并不总是存在合并冲突。

为了解决这个问题，我在我的`~/.vimrc`：

```
# Git Merge conflict
nnoremap <leader>gm /\v^\<\<\<\<\<\<\< \|\=\=\=\=\=\=\=$\|\>\>\>\>\>\>\> /<cr> 
```

直接找到冲突。

**git imerge**

也许最好的选择是放弃使用 vimdiff 并依赖常规的 vim + [git imerge](https://github.com/mhagger/git-imerge)，这在：[如何找出哪些 Git 提交导致冲突？](https://stackoverflow.com/questions/18162930/how-can-i-find-out-which-git-commits-cause-conflicts/18163075#18163075)因为 vimdiff 的学习曲线很烦人，而且它没有完成我们最需要的功能。

# c# - 使用 Alphavss 的卷影复制错误

> ID：14904652
> 
> 赞同：2
> 
> 时间：2013-02-15T22:46:37.820
> 
> 标签：c#, volume-shadow-service

我正在尝试使用网站[alphavss](http://alphavss.codeplex.com/)上提供的示例代码。我正在尝试包含 VssBackup.cs 类，然后在我的程序中使用它。很可能我错过了一个 dll 引用，但我在使用组件时没有收到任何错误。任何人都知道问题可能是什么？

我收到 3 个错误：

**找不到类型或命名空间名称“快照”（您是否缺少 using 指令或程序集引用？）**

```
Snapshot _snap; 
```

**找不到类型或命名空间名称“IVssAsync”（您是否缺少 using 指令或程序集引用？**

```
 using (IVssAsync async = _backup.GatherWriterMetadata())
     {....... 
```

**找不到类型或命名空间名称“快照”（您是否缺少 using 指令或程序集引用？）**

```
_snap = new Snapshot(_backup); 
```

**类 ** *VssBackup.cs***站点提供的 C# 示例代码**

```
/* Copyright (c) 2008-2012 Peter Palotas
 *  
 *  Permission is hereby granted, free of charge, to any person obtaining a copy
 *  of this software and associated documentation files (the "Software"), to deal
 *  in the Software without restriction, including without limitation the rights
 *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 *  copies of the Software, and to permit persons to whom the Software is
 *  furnished to do so, subject to the following conditions:
 *  
 *  The above copyright notice and this permission notice shall be included in
 *  all copies or substantial portions of the Software.
 *  
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 *  THE SOFTWARE.
 */

#region Copyright Notice
/*
 * AlphaVSS Sample Code
 * Written by Jay Miller
 * 
 * This code is hereby released into the public domain, This applies
 * worldwide.
 */
#endregion

using System;
using System.Diagnostics;
using System.Collections.Generic;
using Alphaleonis.Win32.Vss;
using Alphaleonis.Win32.Filesystem;

namespace VssSample
{
   /// <summary>
   /// This class encapsulates some simple VSS logic.  Its goal is to allow
   /// a user to backup a single file from a shadow copy (presumably because
   /// that file is otherwise unavailable on its home volume).
   /// </summary>
   /// <example>
   /// This code creates a shadow copy and copies a single file from
   /// the new snapshot to a location on the D drive.  Here we're
   /// using the AlphaFS library to make a full-file copy of the file.
   /// <code>
   /// string source_file = @"C:\Windows\system32\config\sam";
   /// string backup_root = @"D:\Backups";
   /// string backup_path = Path.Combine(backup_root,
   ///       Path.GetFilename(source_file));
   ///
   /// // Initialize the shadow copy subsystem.
   /// using (VssBackup vss = new VssBackup())
   /// {
   ///    vss.Setup(Path.GetPathRoot(source_file));
   ///    string snap_path = vss.GetSnapshotPath(source_file);
   /// 
   ///    // Here we use the AlphaFS library to make the copy.
   ///    Alphaleonis.Win32.Filesystem.File.Copy(snap_path, backup_path);
   /// }
   /// </code>
   /// This code creates a shadow copy and opens a stream over a file
   /// on the new snapshot volume.
   /// <code>
   /// string source_file = @"C:\Windows\system32\config\sam";
   /// 
   /// // Initialize the shadow copy subsystem.
   /// using (VssBackup vss = new VssBackup())
   /// {
   ///    vss.Setup(Path.GetPathRoot(filename));
   ///    
   ///    // We can now access the shadow copy by either retrieving a stream:
   ///    using (Stream s = vss.GetStream(filename))
   ///    {
   ///       Debug.Assert(s.CanRead == true);
   ///       Debug.Assert(s.CanWrite == false);
   ///    }
   /// }
   /// </code>
   /// </example>
   public class VssBackup : IDisposable
   {
      /// <summary>
      /// Setting this flag to true will enable 'component mode', which
      /// does not, in this example, do much of any substance.
      /// </summary>
      /// <remarks>
      /// VSS has the ability to selectively disable VSS-compatible
      /// components according to the specifics of the current backup.  One
      /// might, for example, only quiesce Outlook if only the Outlook PST
      /// file is intended to be backed up.  The ExamineComponents() method
      /// provides a framework for this sort of mode if you're interested.
      /// Otherwise, this example code quiesces all VSS-compatible components
      /// before making its shadow copy.
      /// </remarks>
      bool ComponentMode = false;

      /// <summary>A reference to the VSS context.</summary>
      IVssBackupComponents _backup;

      /// <summary>Some persistent context for the current snapshot.</summary>
      Snapshot _snap;

      /// <summary>
      /// Constructs a VssBackup object and initializes some of the necessary
      /// VSS structures.
      /// </summary>
      public VssBackup()
      {
         InitializeBackup();
      }

      /// <summary>
      /// Sets up a shadow copy against the specified volume.
      /// </summary>
      /// <remarks>
      /// This methods is separated out from the constructor because if it
      /// throws, we still want the Dispose() method to be called.
      /// </remarks>
      /// <param name="volumeName">Name of the volume to copy.</param>
      public void Setup(string volumeName)
      {
         Discovery(volumeName);
         PreBackup();
      }

      /// <summary>
      /// The disposal of this object involves sending completion notices
      /// to the writers, removing the shadow copies from the system and
      /// finally releasing the BackupComponents object.  This method must
      /// be called when this class is no longer used.
      /// </summary>
      public void Dispose()
      {
         try { Complete(true); } catch { }

         if (_snap != null)
         {
            _snap.Dispose();
            _snap = null;
         }

         if (_backup != null)
         {
            _backup.Dispose();
            _backup = null;
         }
      }

      /// <summary>
      /// This stage initializes both the requester (this program) and 
      /// any writers on the system in preparation for a backup and sets
      /// up a communcation channel between the two.
      /// </summary>
      void InitializeBackup()
      {
         // Here we are retrieving an OS-dependent object that encapsulates
         // all of the VSS functionality.  The OS indepdence that this single
         // factory method provides is one of AlphaVSS's major strengths!
         IVssImplementation vss = VssUtils.LoadImplementation();

         // Now we create a BackupComponents object to manage the backup.
         // This object will have a one-to-one relationship with its backup
         // and must be cleaned up when the backup finishes (ie. it cannot
         // be reused).
         //
         // Note that this object is a member of our class, as it needs to
         // stick around for the full backup.
         _backup = vss.CreateVssBackupComponents();

         // Now we must initialize the components.  We can either start a
         // fresh backup by passing null here, or we could resume a previous
         // backup operation through an earlier use of the SaveXML method.
         _backup.InitializeForBackup(null);

         // At this point, we're supposed to establish communication with
         // the writers on the system.  It is possible before this step to
         // enable or disable specific writers via the BackupComponents'
         // Enable* and Disable* methods.
         //
         // Note the 'using' construct here to dispose of the asynchronous
         // comm link once we no longer need it.
         using (IVssAsync async = _backup.GatherWriterMetadata())
         {
            // Because allowing writers to prepare their metadata can take
            // a while, we are given a VssAsync object that gives us some
            // status on the background operation.  In this case, we just
            // wait for it to finish.
            async.Wait();
         }
      }

      /// <summary>
      /// This stage involes the requester (us, again) processing the
      /// information it received from writers on the system to find out
      /// which volumes - if any - must be shadow copied to perform a full
      /// backup.
      /// </summary>
      void Discovery(string fullPath)
      {
         if (ComponentMode)
            // In component mode, we would need to enumerate through each
            // component and decide whether it should be added to our
            // backup document.
            ExamineComponents(fullPath);
         else
            // Once we are finished with the writer metadata, we can dispose
            // of it.  If we were in component mode, we would want to keep it
            // around so that we could notify the writers of our success or
            // failure when we finish the backup.
            _backup.FreeWriterMetadata();

         // Now we use our helper class to add the appropriate volume to the
         // shadow copy set.
         _snap = new Snapshot(_backup);
         _snap.AddVolume(Path.GetPathRoot(fullPath));
      }

      /// <summary>
      /// This method is optional in this implementation, and in fact does
      /// nothing of substance.  It does demonstrate how one might parse
      /// through the various writers on the system and add them to the
      /// backup document if necessary.
      /// </summary>
      /// <param name="fullPath">The full path of the file to back up.</param>
      void ExamineComponents(string fullPath)
      {
         // At this point it is the requester's duty to examine what the
         // writers have prepared for us.  The WriterMetadata property
         // (in place of the C API's 'GetWriterMetadata' function) collects
         // metadata from each writer behind a list interface.
         IList<IVssExamineWriterMetadata> writer_mds = _backup.WriterMetadata;

         // If you receive a "bad state" error when enumerating, you might
         // have a registry inconsistency from a program that improperly
         // uninstalled itself.  If your event log is showing an error like,
         // "ContentIndexingService called routine RegQueryValueExW which
         // failed," you'll want to read Microsoft's KB article #907574.
         foreach (IVssExamineWriterMetadata metadata in writer_mds)
         {
            // We can see the name of the writer, if we like.
            Trace.WriteLine("Examining metadata for " + metadata.WriterName);

            // The important bit of the writers' metadata is the list of
            // components each writer is broken into.  These components are
            // responsible for some number of files, so going through this
            // data allows us to construct an initial list of files for our
            // shadow copies.
            foreach (IVssWMComponent cmp in metadata.Components)
            {
               // Print out some info for each component.
               Trace.WriteLine("  Component: " + cmp.ComponentName);
               Trace.WriteLine("  Component info: " + cmp.Caption);

               // If a component is available for backup, it's then up to us to
               // decide whether it is relevant to the current backup.  To do
               // this, we may examine the files each component manages.
               foreach (VssWMFileDescription file in cmp.Files)
               {
                  // The idea here is to find out whether these files are
                  // relevant to whatever purpose your application holds.  If
                  // they are, you should a) add this component to your backup
                  // set so VSS involves it in the shadow copy operation, and
                  // b) record the files' volume names so you know later which
                  // volumes need to be shadow copied.

                  // I'm not worried about that stuff for this example, though,
                  // so instead I'm printing out the stuff you might need to
                  // examine if you have requirements of that sort.
                  Trace.WriteLine("    Path: " + file.Path);
                  Trace.WriteLine("       Spec: " + file.FileSpecification);

                  // Here we might insert some logic to:
                  //
                  //  1\. Check whether the AlternateLocation property is valid.
                  //  2\. Expand environment vairables in either Path.or
                  //     AlternateLocation, as appropriate.
                  //  3\. Considering the FileSpecification and the IsRecursive
                  //     properties, decide whether this component manages
                  //     the file(s) you wish to backup (in this case, the
                  //     fullPath argument).
                  //
                  // If this component is relevant, add it with AddComponent().

                  // (The FileToPathSpecification method below might help with
                  // some of these steps.)
               }
            }
         }
      }

      /// <summary>
      /// This phase of the backup is focused around creating the shadow copy.
      /// We will notify writers of the impending snapshot, after which they
      /// have a short period of time to get their on-disk data in order and
      /// then quiesce writing.
      /// </summary>
      void PreBackup()
      {
         Debug.Assert(_snap != null);

         // This next bit is a way to tell writers just what sort of backup
         // they should be preparing for.  The important parts for us now
         // are the first and third arguments: we want to do a full,
         // backup and, depending on whether we are in component mode, either
         // a full-volume backup or a backup that only requires specific
         // components.
         _backup.SetBackupState(ComponentMode,
               true, VssBackupType.Full, false);

         // From here we just need to send messages to each writer that our
         // snapshot is imminent,
         using (IVssAsync async = _backup.PrepareForBackup())
         {
            // As before, the 'using' statement automatically disposes of
            // our comm link.  Also as before, we simply block while the
            // writers to complete their background preparations.
            async.Wait();
         }

         // It's now time to create the snapshot.  Each writer will have to
         // freeze its I/O to the selected volumes for up to 10 seconds
         // while this process takes place.
         _snap.Copy();
      }

      /// <summary>
      /// This simple method uses a bit of string manipulation to turn a
      /// full, local path into its corresponding snapshot path.  This
      /// method may help users perform full file copies from the snapsnot.
      /// </summary>
      /// <remarks>
      /// Note that the System.IO methods are not able to access files on
      /// the snapshot.  Instead, you will need to use the AlphaFS library
      /// as shown in the example.
      /// </remarks>
      /// <example>
      /// This code creates a shadow copy and copies a single file from
      /// the new snapshot to a location on the D drive.  Here we're
      /// using the AlphaFS library to make a full-file copy of the file.
      /// <code>
      /// string source_file = @"C:\Windows\system32\config\sam";
      /// string backup_root = @"D:\Backups";
      /// string backup_path = Path.Combine(backup_root,
      ///       Path.GetFilename(source_file));
      ///
      /// // Initialize the shadow copy subsystem.
      /// using (VssBackup vss = new VssBackup())
      /// {
      ///    vss.Setup(Path.GetPathRoot(source_file));
      ///    string snap_path = vss.GetSnapshotPath(source_file);
      /// 
      ///    // Here we use the AlphaFS library to make the copy.
      ///    Alphaleonis.Win32.Filesystem.File.Copy(snap_path, backup_path);
      /// }
      /// </code>
      /// </example>
      /// <seealso cref="GetStream"/>
      /// <param name="localPath">The full path of the original file.</param>
      /// <returns>A full path to the same file on the snapshot.</returns>
      public string GetSnapshotPath(string localPath)
      {
         Trace.WriteLine("New volume: " + _snap.Root);

         // This bit replaces the file's normal root information with root
         // info from our new shadow copy.
         if (Path.IsPathRooted(localPath))
         {
            string root = Path.GetPathRoot(localPath);
            localPath = localPath.Replace(root, String.Empty);
         }
         string slash = Path.DirectorySeparatorChar.ToString();
         if (!_snap.Root.EndsWith(slash) && !localPath.StartsWith(slash))
            localPath = localPath.Insert(0, slash);
         localPath = localPath.Insert(0, _snap.Root);

         Trace.WriteLine("Converted path: " + localPath);

         return localPath;
      }

      /// <summary>
      /// This method opens a stream over the shadow copy of the specified
      /// file.
      /// </summary>
      /// <example>
      /// This code creates a shadow copy and opens a stream over a file
      /// on the new snapshot volume.
      /// <code>
      /// string source_file = @"C:\Windows\system32\config\sam";
      /// 
      /// // Initialize the shadow copy subsystem.
      /// using (VssBackup vss = new VssBackup())
      /// {
      ///    vss.Setup(Path.GetPathRoot(filename));
      ///    
      ///    // We can now access the shadow copy by either retrieving a stream:
      ///    using (Stream s = vss.GetStream(filename))
      ///    {
      ///       Debug.Assert(s.CanRead == true);
      ///       Debug.Assert(s.CanWrite == false);
      ///    }
      /// }
      /// </code>
      /// </example>
      public System.IO.Stream GetStream(string localPath)
      {
         // GetSnapshotPath() returns a very funky-looking path.  The
         // System.IO methods can't handle these sorts of paths, so instead
         // we're using AlphaFS, another excellent library by Alpha Leonis.
         // Note that we have no 'using System.IO' at the top of the file.
         // (The Stream it returns, however, is just a System.IO stream.)
         return File.OpenRead(GetSnapshotPath(localPath));
      }

      /// <summary>
      /// The final phase of the backup involves some cleanup steps.
      /// If we're in component mode, we're supposed to notify each of the
      /// writers of the outcome of the backup.  Once that's done, or if
      /// we're not in component mode, we send the BackupComplete event to
      /// all of the writers.
      /// </summary>
      /// <param name="succeeded">Success value for all of the writers.</param>
      void Complete(bool succeeded)
      {
         if (ComponentMode)
         {
            // As before, we iterate through all of the writers on the system.
            // A more efficient method might only iterate through those writers
            // that were actually involved in this backup.
            IList<IVssExamineWriterMetadata> writers = _backup.WriterMetadata;
            foreach (IVssExamineWriterMetadata metadata in writers)
            {
               foreach (IVssWMComponent component in metadata.Components)
               {
                  // The BackupSucceeded call should mirror the AddComponent
                  // call that was called during the discovery phase.
                  _backup.SetBackupSucceeded(
                        metadata.InstanceId, metadata.WriterId,
                        component.Type, component.LogicalPath,
                        component.ComponentName, succeeded);
               }
            }

            // Finally, we can dispose of the writer metadata.
            _backup.FreeWriterMetadata();
         }

         try
         {
            // The BackupComplete event must be sent to all of the writers.
            using (IVssAsync async = _backup.BackupComplete())
               async.Wait();
         }
         // Not sure why, but this throws a VSS_BAD_STATE on XP and W2K3.
         // Per some forum posts about this, I'm just ignoring it.
         catch (VssBadStateException) { }
      }

      /// <summary>
      /// This method takes the information in a file description and
      /// converts it to a full path specification - with wildcards.
      /// </summary>
      /// <remarks>
      /// Using the wildcard-to-regex library found at
      /// http://www.codeproject.com/KB/string/wildcmp.aspx on the
      /// output of this method might be very helpful.
      /// </remarks>
      /// <param name="file">Object describing a component's file.</param>
      /// <returns>
      /// Returns a full path, potentially including DOS wildcards.  Eg.
      /// 'c:\windows\config\*'.
      /// </returns>
      string FileToPathSpecification(VssWMFileDescription file)
      {
         // Environment variables (eg. "%windir%") are common.
         string path = Environment.ExpandEnvironmentVariables(file.Path);

         // Use the alternate location if it's present.
         if (!String.IsNullOrEmpty(file.AlternateLocation))
            path = Environment.ExpandEnvironmentVariables(
                  file.AlternateLocation);

         // Normalize wildcard usage.
         string spec = file.FileSpecification.Replace("*.*", "*");

         // Combine the file specification and the directory name.
         return Path.Combine(path, file.FileSpecification);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-04T20:41:19.933

我在尝试使用该示例代码时遇到了同样的问题。您应该注意，除了链接和添加对 AlphaVss 所需的引用的引用之外，此代码还使用[AlphaFS](http://alphafs.codeplex.com/)。特别是，您应该从该包中链接和引用 AlphaFS.dll。

找不到 Snapshot 类...您应该将示例中的 Snapshot.cs 文件引入您的项目。

但是等等……还有更多……

这有点令人沮丧，直到我在[1.1 版的更改日志](http://alphavss.codeplex.com/SourceControl/latest#Release/1.1/ChangeLog.txt)中发现了一些巧妙的注释。

"* 重大更改：VssWMFileDescription 类已重命名为 VssWMFileDescriptor

*   重大更改：IVssAsync 接口已被删除。以前返回 IVssAsync 的任何方法现在都是同步的并返回 void。这些方法的异步版本已添加了 BeginXXX、EndXXX 的标准 APM 命名方案，其中 Begin 方法返回实现标准 IAsyncResult 接口的 IVssAsyncResult 实例。"

用“VssWMFileDescriptor”替换“VssWMFileDescription”会让你成功一半。

要使此代码能够编译和运行，请按以下模式更改消息：

```
using (IVssAsync async = _backup.GatherWriterMetadata())
{
    // Because allowing writers to prepare their metadata can take
    // a while, we are given a VssAsync object that gives us some
    // status on the background operation.  In this case, we just
    // wait for it to finish.
    async.Wait();
} 
```

至

```
_backup.GatherWriterMetadata(); 
```

简而言之，这些方法现在是同步的，因此以不同的方式调用它们就可以了。

我希望这有帮助。我有我的 VssSample 代码来处理这些更改。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T01:35:35.453

您添加了对所有 AlphaVSS 文件的引用？AlphaVSS.Common 通过`IVssImplementation vss = VssUtils.LoadImplementation();`.

AlphaVSS 1.1 的列表（添加对所有这些的引用）：

*   AlphaVSS.Common
*   AlphaVSS.51.x86
*   AlphaVSS.52.x64
*   AlphaVSS.52.x86
*   AlphaVSS.60.x64
*   AlphaVSS.60.x86

# php - php 代码在写入 txt 文档时将所有 1 替换为空

> ID：14904653
> 
> 赞同：0
> 
> 时间：2013-02-15T22:46:38.967
> 
> 标签：php, text-files

所以，昨天我的代码非常适合我的网站......直到我意识到文档中没有人（1）出现！！！我已经搜索了整个代码，似乎没有任何问题！

我不知道这是否是 PHP (5.3) 中的错误，还是什么......它必须得到修复！

回顾：所有的（1）将因未知原因被删除）

我的代码在这里：

```
 echo "Please wait while we submit your recipe...";

  //getting form data
  $thedate = Date("d-m-Y_H:i:s");
  $title = $_POST['Title'];
  $description = $_POST['Descript'];
  $ingredients = $_POST['Ingredients'];
  $instructions =$_POST['Instructions'];
  $notes = $_POST['Notes'];
  $name = $_POST['Name'];

  //replacement for extra characters
  $title = str_replace("\'" && "\"", "" , $title);
  $description = str_replace("\'" && "\"", "" , $description);
  $ingredients = str_replace("\'" && "\"", "" , $ingredients);
  $instructions = str_replace("\'" && "\"", "" , $instructions);
  $notes = str_replace("\'" && "\"", "" , $notes);
  $name = str_replace("\'" && "\"", "" , $name);
  $title = str_replace("\\", "" , $title);
  $the_recipe_url="RecibaseWaitingList/".$thedate."--".$title.".txt";
  $the_recipe_url = str_replace("'", "" , $the_recipe_url);
  $the_recipe_url = str_replace("\"", "" , $the_recipe_url);
  $the_recipe_url = str_replace("?", "" , $the_recipe_url);
  $the_recipe_url = str_replace(chr(10), "_", $the_recipe_url);

  //bugs show up before or after this 
  echo '...';

    //Checking to see if all required fields are filled
    if($title !== '')
    {
        if($ingredients !=='')
        {
            if($instructions !=='')
            {
                          //writing to the file
                          $writetothefile = fopen($the_recipe_url, 'c');
                          fwrite($writetothefile, $name." submitted this recipe on ".$thedate." \r\n \r\n "); 
                          fwrite($writetothefile, "Title: ".$title." \r\n ");
                          fwrite($writetothefile, $description." \r\n ");
                          fwrite($writetothefile, " \r\n ");
                          fwrite($writetothefile, "Ingredents:\r\n".$ingredients." \r\n");
                          fwrite($writetothefile, " \r\n ");
                          fwrite($writetothefile, "Instructions: \r\n ".$instructions." \r\n ");
                          fwrite($writetothefile, "\r\n ");
                          fwrite($writetothefile, "Notes: \r\n" . $notes . "\r\n \r\n ");
                          fwrite($writetothefile, "Thank you ".$name." for submitting this recipe! \r\n \r\n When you're done with the recipe, just click the back button.");
                          fclose($writetothefile);

                          //echo's for the user to see      
                          echo '<br />Your recibase recipe url is <a href="' . $the_recipe_url . '">' . $the_recipe_url . '</a>.';
                          echo "<br />";
                          echo "<br />";                      
                          echo "Thank you for being so generous with your time and entering your recipe. We hope you enjoy using the rest of the site!< br />"; 
                          echo "<br />";                
                          echo '<a href="http://recibase.musicsuper.org/input.php">Click Here</a> to enter in another recipe.<br />';
                          echo "...and we're done!";
             }else{echo "Go back, and enter the <b><i>Instructions</i></b> of your recipe please!".'<br><br><a href="javascript:history.go(-1);">'.'<--- Go Back</a>';}
          }else{echo "Go back, and enter the <b><i>Ingredients</i></b> in your recipe please!".'<br><br><a href="javascript:history.go(-1);">'.'<--- Go Back</a>';}
      }else{echo "Go back, and enter the <b><i>Title</i></b> of your recipe please!".'<br><br><a href="javascript:history.go(-1);">'.'<--- Go Back</a>'; 
```

是什么导致1的消失？为什么会这样？

任何想法将不胜感激。

如果您想通过示例配方查看此代码的产品，请访问此处：[http ://recibase.musicsuper.org/AllOfYourRecipes/RecibaseWaitingList/15-02-2013_13:38:17--Deer%20Liver% 20Pate.txt](http://recibase.musicsuper.org/AllOfYourRecipes/RecibaseWaitingList/15-02-2013_13:38:17--Deer%20Liver%20Pate.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:50:59.633

`&&`是一个逻辑运算符。

`$title = str_replace("\'" && "\"", "" , $title);`

如果您将`&&`两个字符串评估为 (boolean) `true`，则结果将为`true`. 转换回字符串将是`1`. 所以实际上你正在删除所有`1`s.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:51:13.747

你的问题是`str_replace`，尤其是`"\'" && "\""`。这个语句相当于`1`，所以你`str_replace`是有效的`str_replace(1, "" , $title);`。

你会想要使用一个数组，所以代码将是

```
str_replace(array("\'", "\""), "" , $title); 
```

正如您所期望的那样，这将用空字符串替换所有出现的数组元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:57:12.063

我可能发现了你的问题：

你不能这样使用这个函数：

```
str_replace("\'" && "\"", "" , $ingredients); 
```

`("\'" && "\"")`被评估`TRUE`为布尔值和`"1"`字符串。

将数组传递给函数：

```
str_replace(array("\'", "\""), "" , $ingredients); 
```

# uml - UML 模型元素与可执行 UML 模型元素

> ID：14904655
> 
> 赞同：2
> 
> 时间：2013-02-15T22:46:41.837
> 
> 标签：uml

如何在 UML 中构建可执行模型？

它与绘制类、SD 等时使用的 UML 模型元素不同吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-14T08:46:08.573

通过模型元素，我假设您的意思是某种 UML 表示法，如类、状态、活动等。当您在可执行上下文中使用图形表示法时，它不会发生太大变化，但基本含义（语义）可能会发生变化。为了使符号可执行，您需要一组语义，在 UML 符号的某个子集上建立可执行行为。（一旦你开始考虑执行，你就不需要一切了）。在 Executable UML: A Foundation for Model Driven Architecture, Mellor/Balcer, Addison-Wesley 2002（我强烈推荐）一书中，定义了这样一组语义。如果您想查看可执行 UML 模型的示例以及如何使用开源工具将它们转换为代码，请查看模型到代码（没有神秘的空白），Starr/Mangogna/Mellor，2017。您可能还想看看在可执行文件。

# function - 在函数中间更改参数的值

> ID：14904656
> 
> 赞同：1
> 
> 时间：2013-02-15T22:46:43.827
> 
> 标签：function, powershell, switch-statement, string-formatting

尝试创建一个 PowerShell 函数，该函数将使用多组前后颜色输出单行文本。我有一个定义颜色集的开关。

该函数有一个定义开关值的参数和另一个参数，如果我可以让它工作，则使用相同的开关定义下一个颜色集：

```
 function Write-Custom
    {
        param($Say,$ThenSay,$Level,$ExtraLevel)
        switch([array]$level)
        {
            none {$c = 'Black','White'}
            name {$c = 'Cyan','DarkBlue'}
            good {$c = 'White','DarkGreen'}
            note {$c = 'Gray','White'}
            info {$c = 'White','DarkGray'}  
            warn {$c = 'Yellow','Black'}
            fail {$c = 'Black','Red'}
        }
        $s = " $Say"
        $ts = " $ThenSay "
        Write-Host $s -ForegroundColor $c[0] -BackgroundColor $c[1]  -NoNewLine
        Clear-Variable Level
        $Level = $ExtraLevel
        Write-Host $ts -ForegroundColor $c[0] -BackgroundColor $c[1]    
    }

    Write-Custom -Say 'hi there' -Level 'name' -ThenSay 'stranger ' -ExtraLevel 'warn' 
```

似乎无法清除并重新定义 $level 变量。似乎输出'你好'应该有一个青色/深蓝色的前景/背景，'陌生人'部分是黄色/黑色......但整个字符串都是青色/深蓝色。

我需要创建一个更精细的开关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T00:37:56.897

您需要每次调用开关以获得不同的颜色集。一种方法是在你的函数中放置一个函数，例如：

```
function Write-Custom
{
    param($Say,$ThenSay,$Level,$ExtraLevel)

    function GetColors([string]$level)
    {
        switch([array]$level)
        {
            none {'Black','White'}
            name {'Cyan','DarkBlue'}
            good {'White','DarkGreen'}
            note {'Gray','White'}
            info {'White','DarkGray'}  
            warn {'Yellow','Black'}
            fail {'Black','Red'}
            default { throw "Unrecognized level $level" }
        }
    }

    $c = GetColors($Level)
    Write-Host " $Say" -ForegroundColor $c[0] -BackgroundColor $c[1]

    $c = GetColors($ExtraLevel)
    Write-Host " $ThenSay " -ForegroundColor $c[0] -BackgroundColor $c[1]
} 
```

# ember.js - Handlebars 使用 Ember rc1 预编译版本错误

> ID：14904657
> 
> 赞同：4
> 
> 时间：2013-02-15T22:46:45.147
> 
> 标签：ember.js

将 Ember 升级到 1.0.0-rc1 会导致以下错误：

```
Uncaught Template was precompiled with an older version of Handlebars 
than the current runtime. Please update your precompiler to a newer 
version (>= 1.0.0-rc.3) or downgrade your runtime to an older version (<= 1.0.rc.2). 
```

我正在使用应该根据上面的错误消息工作的车把版本：

```
DEBUG: Ember.VERSION : 1.0.0-rc.1 ember.js:339
DEBUG: Handlebars.VERSION : 1.0.0-rc.3 ember.js:339
DEBUG: jQuery.VERSION : 1.9.1 
```

我还将我的`ember-rails`宝石升级为`0.9.2`

如何解决此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T23:52:10.803

这是由`barber`使用把手 rc2 进行模板预编译的 gem 引起的。[我已经提出了一个](https://github.com/tchak/barber/pull/6)修复它的请求请求。如果你现在需要这个工作，你可以使用我的 fork :)

### 更新：使用 darthdeus fork 的说明：

1）将以下内容添加到您的 Gemfile 中：

```
gem "barber", :git => "git://github.com/darthdeus/barber.git", :branch => "update-handlebars-to-rc3" 
```

2）清除您的 tmp 目录

```
rm -rf tmp 
```

3）重启你的服务器

**编辑：**对于未来的读者，这些更改现在已经合并，所以使用官方 repo 中的 master 分支应该可以工作。

# r - ggplot 误差条未显示在图表上，因为它超出 y 轴限制

> ID：14904658
> 
> 赞同：1
> 
> 时间：2013-02-15T22:46:48.013
> 
> 标签：r, ggplot2

我正在尝试创建一个具有预定义 Y 轴限制的图。我注意到，当误差线超过这些 Y 轴边界时，*不会*绘制整个误差线，而不仅仅是将其裁剪到 Y 轴边界。

使用 ToothGrowth 数据集的示例（另请参见[http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/](http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/)）：

```
df <- ToothGrowth
dfc <- summarySE(df, measurevar="len", groupvars=c("supp","dose"))  
ggplot(dfc, aes(x=dose, y=len, colour=supp)) +
      geom_errorbar(aes(ymin=len-se, ymax=len+se), width=.1) +
      geom_line() +
      geom_point() +
      scale_y_continuous(limits=c(7.5,26.5)) 
```

我希望剂量= 2.0 点的误差线从它们的底点开始（注意水平标记线在那里），一直延伸到绘图的边界（即 Y 轴上限）。我怎样才能做到这一点？（VC 系列中的剂量 = 0.5 点也是如此。）

# serial-port - beaglebone 串口中断

> ID：14904662
> 
> 赞同：0
> 
> 时间：2013-02-15T22:47:18.460
> 
> 标签：serial-port, beagleboard, uart, interruption

我需要在 Beaglebone 中为串行（uart）端口设置中断，这样当串行端口接收到任何信息时，会自动激活中断（功能），对接收到的数据进行处理。

我已经搜索了这样做的方法，但没有成功。我曾在微控制器中处理 uart 端口的中断问题，尽管我可以在 Beaglebone 中做同样的事情。

有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-03T18:34:52.030

使用

```
select() or poll() 
```

*对tty*文件进行轮询的系统调用。一旦任何数据到达设备文件，您就可以获取数据并执行您打算执行的操作。

或者，您可以运行一个专用*线程*，不断轮询 uart 并处理数据。

# scala - JSON 渲染 Scala/Play 2.1

> ID：14904663
> 
> 赞同：1
> 
> 时间：2013-02-15T22:47:35.713
> 
> 标签：scala, playframework, playframework-2.1

我正在做一个小项目，尝试让 Scala/Play 后端正常工作。我试图让它返回并在 Web 服务端处理 JSON。我似乎无法弄清楚如何让 JSON 编组和解组工作。有人可以帮我解决这个问题吗？我正在使用 Play 2.1 和 Scala 2.10。我得到的错误是“重写方法读取类型的特征读取（json：play.api.libs.json.JsValue）play.api.libs.json.JsResult [models.Address]；方法读取具有不兼容的类型”

*   已编辑。其他人给了我解决方案。对于阅读，您必须使用 JsSuccess，而不是 JsResult。

    ```
    case class Address(id: Long, name: String)

    object Address {

    implicit object AddressFormat extends Format[Address] {
    def reads(json: JsValue):Address = JsSuccess(Address(
        (json \ "id").as[Long],
        (json \ "name").as[String]
    ))

    def writes(address: Address): JsValue = JsObject(Seq(
        "id" -> JsNumber(address.id),
        "name" -> JsString(address.name)
    ))
    }
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:29:34.643

使用 Play 2.1，您可以简化代码：

```
import play.api.libs.json._
import play.api.libs.functional.syntax._

implicit val addressFormat = (
  (__ \ "id").format[String] and
  (__ \ "name").format[Long]
)(Address.apply, unlift(Address.unapply)) 
```

更详细的信息可以在这里找到：[ScalaJsonCombinators](http://www.playframework.com/documentation/2.1.0/ScalaJsonCombinators)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T20:54:33.877

您可以使用宏进一步简化代码，尽管它们被标记为实验性的：

```
import play.api.libs.json._
import play.api.libs.functional.syntax._

case class Address(id: Long, name: String)

implicit val addressFormat = Json.format[Address] 
```

Play 官方文档中[有关此技术的更多详细信息。](http://www.playframework.com/documentation/2.1.0/ScalaJsonInception)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T21:30:36.687

Hey my solution would be:

```
import play.api.libs.json.JsonNaming.SnakeCase
import play.api.libs.json._

object Test {

  implicit val config = JsonConfiguration(SnakeCase)
  implicit val userFormat: OFormat[Test] = Json.format[Test]

}

case class Test(
                 testName: String,
                 testWert: String,
                 testHaus: String
               ) 
```

In conclusion, you get a compenion object. The config converts all keys of the case class into snakecase. The implicit values ensure that a valid Json can be parsed into a model. So you get your test model back.

The Json should look like this:

```
{
    "test_name" : "Hello",
    "test_wert": "Hello",
    "test_haus": "Hello"
} 
```

[https://www.playframework.com/documentation/2.6.x/ScalaJsonAutomated](https://www.playframework.com/documentation/2.6.x/ScalaJsonAutomated)

# php - 通过 iframe 发送 js 变量？

> ID：14904666
> 
> 赞同：0
> 
> 时间：2013-02-15T22:48:13.757
> 
> 标签：php, mysql, variables, iframe

我有一个图片上传，它使用 iframe + php 上传图片 + 在页面上显示而不刷新（有点像预览）。

我希望能够向 iframe 和 php 脚本发送一个变量（它始终是一个整数，它是一个自动递增的 mysql ID），这样任何编辑/重新上传等都会像以前一样影响同一个表行。

所以澄清一下：

1.  我有一个整数存储在 js 变量中
2.  在文件输入的“更改”上，我需要以某种方式通过 iframe 将此变量发送到 php 脚本，php 脚本可以在其中解释和使用它。

**编辑：**

这是我的代码的一些精简版本来帮助解释。首先，带有文件输入的实际页面：

```
<form id="file_upload_form" method="post" enctype="multipart/form-data" action="last-id-test.php" target="upload_target">
<input name="file" id="file" size="27" type="file" /><br />
<input type="submit" name="action" value="Upload" /><br />
<iframe id="upload_target" name="upload_target" src="" style="width:100px;height:100px;border:1px solid #c9cfdd;"></iframe>
</form> 
```

因此，当提交表单时，它使用 last-id-test.php 脚本进行实际的上传/插入数据库，但通过其目标 iframe 'upload_target' 来避免页面重新加载。

- 发生了一些 php 的事情，但我得到了上传的 mysqli_insert_id() 并将其发送回页面，它存储在“insertID”变量中：

```
function uploadDone() { //Function will be called when iframe is loaded
var returnedValues = frames['upload_target'].document.getElementsByTagName("body") [0].innerHTML.split('@');
insertID = returnedValues[0];
imgName = returnedValues[1];
makeImage =$('<img>').attr('src','images/listing-images/'+imgName);

makeImage.appendTo($('#image-preview'));
} 
```

在这里，我还添加了图像的预览。

那么如何在文件输入的“更改”时将 insertID 变量发送到 php 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:39:45.660

我通过隐藏输入实现了这一点，动态生成并将其 value 属性设置为返回的 insertID 变量：

```
function uploadDone() { //Function will be called when iframe is loaded
var returnedValues = frames['upload_target'].document.getElementsByTagName("body")[0].innerHTML.split('@');
var insertID = returnedValues[0];
var imgName = returnedValues[1];
var makeImage =$('<img>').attr('src','images/listing-images/'+imgName);

makeImage.appendTo($('#image-preview'));

var makeInput = $('<input>').attr('type','hidden').attr('id','insertID').attr('value',insertID).attr('name','insertID');

makeInput.appendTo($('#file_upload_form'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:51:16.777

将其作为查询变量发送，例如`/viewImage.php?image_id=123`

在 PHP 中，您可以将这些查询变量读取为`$_GET['image_id']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:36:25.517

您是否使用ajax 提交表单？如果是这样，您可以使用 onclick 函数传递变量。

这可能会有所帮助 [http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

# c - C：在读取字符串时，对整个 ascii 表进行频率计数（尽可能接近）的可读方法是什么

> ID：14904674
> 
> 赞同：0
> 
> 时间：2013-02-15T22:48:55.560
> 
> 标签：c, string, count

从这个网站 [http://www.programmingsimplified.com/c-program-find-characters-frequency](http://www.programmingsimplified.com/c-program-find-characters-frequency) 他们有一个例子可以计算 a - z 但不计算 AZ 或空格或标准标点符号。

```
 while ( string[c] != '\0' )
  {
     /* Considering characters from 'a' to 'z' only */

     if ( string[c] >= 'a' && string[c] <= 'z' ) 
        count[string[c]-'a']++;

     c++;
  }

  for ( c = 0 ; c < 26 ; c++ )
  {
     if( count[c] != 0 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:52:26.163

要计算字符串中的所有字符，请使用 an`int a[256]`并将字符串的字符用作数组的索引并递增：

```
int counts[256] = { 0 }; /* Initialize all elements to zero. */

while (string[c]) counts[(unsigned char)string[c++]]++; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T22:52:13.193

我不确定我是否理解你的问题，但我担心在提问之前我没有看到任何尝试解决它。

```
int count[ 256 ] ; // - make sure you change your declaration from [ 26 ]!

while ( string[c] != '\0' )
{
   count[( unsigned char )string[c]]++;
   c++;
}

for ( c = 1 ; c < 256 ; c++ ) // no point to check c == 0
{
   if( count[c] != 0 ) 
```

# sql - Toad 在 sql 中只给出日期

> ID：14904677
> 
> 赞同：2
> 
> 时间：2013-02-15T22:49:14.360
> 
> 标签：sql, database, oracle, datetime, toad

当我`SELECT t.NAME, t.SOME_DATE FROM MY_TABLE t`在 toad 中进行查询时，我会得到`14-FEB-13`没有时间信息的日期！在表格浏览器中，它给出了完整的日期和时间。这怎么能改变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T22:57:08.243

这是会话的默认设置。如果你想改变它，

```
ALTER SESSION SET NLS_DATE_FORMAT='DD-MON-YYYY HH24:MI:SS'; 
```

或者，将您的查询更改为

```
SELECT t.NAME, to_char(t.SOME_DATE,'DD-MON-YYYY HH24:MI:SS') FROM MY_TABLE t 
```

（以上只是一个例子，你可以在格式字符串中以任何你想要的方式格式化，即'MM/DD/YYYY等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-22T02:06:18.887

如果您想在直接执行 SQL（不更改设置）时看到与在表浏览器中看到的结果相同的结果，请使用“Editor\Execute Statement (F9)”而不是“Editor\Execute as Script”。

“执行语句”在 Toad 网格中显示数据，因此格式将始终与您在表浏览器中看到的格式相同，而“执行脚本”使用您的会话信息，如[OldProgrammer 的](https://stackoverflow.com/users/1745544/oldprogrammer) [回答](https://stackoverflow.com/a/14904768/622391)中所述。

**执行语句：**

![执行语句](../Images/6781e0d4196f83fbf753f587fd03b7df.png)

**执行脚本：**

![执行脚本](../Images/ee845dbbdf573723610140ab956c4b34.png)

# sql-server-2008 - SQL Server 触发器将数据从一个表中插入行的列复制到另一个表的行

> ID：14904679
> 
> 赞同：0
> 
> 时间：2013-02-15T22:49:20.133
> 
> 标签：sql-server-2008

我有一个网络表单，它将用户输入到各个字段中，并将它们作为单独的列放入表中。然后我需要获取这行数据并将列中的数据作为行复制到另一个表中。第一个表中的列与第二个表中的一个 id 相关联（该 id 用于与表无关的其他目的，并且是一个静态集）。

我很难解决这个问题，所以我确信我上面的描述不是很清楚。这是一个简化的示例：

**表格1**

```
street_address | city | state | zip 
```

*扳机*

**表 2**

```
street_address | 1  
city | 2  
state| 3  
zip | 4 
```

如果表 1 中的一列留空，则根本不应该在表 2 中创建行。

同样，表 2 中使用的 id 已经设置（即，表 1 中的每一列都将匹配表 2 中的预定 id）。

对此的任何帮助都会很棒。如果我没有很好地解释这一切，我很抱歉。我会在问题出现时澄清问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T02:40:12.510

听起来您的触发器需要`UNPIVOT`从`INSERTED`表到另一个表。请记住，您需要将选择列表中的所有列转换为最长列的长度。这是一个[SQL 小提琴](http://sqlfiddle.com/#!3/7e361/3)

```
SELECT colName, value
FROM(
  SELECT 
     street_address
    ,CAST(city AS VARCHAR(100)) AS city
    ,CAST(state AS VARCHAR(100)) AS state
    ,CAST(zip AS VARCHAR(100)) AS zip
  FROM Table1
)AS p
UNPIVOT(
  value FOR colName IN(street_address, city, state, zip)
)AS unpvt 
```

# javascript - 如何正确地将最小日期纳入我的 MVC 操作

> ID：14904691
> 
> 赞同：0
> 
> 时间：2013-02-15T22:50:21.710
> 
> 标签：javascript, .net, datetime

我想在 javascript 中表示一个 .NET 最小日期 (1-1-1)，并在我调用我的操作时让 .NET 正确解析它。在 javascript 中，如果我创建一个等于 1-1-1 的日期对象，.NET 会将其解析为 1-1-2001，而不是第 1 年（即 0001）。如何让 .NET 将其解析为实际的 DateTime.MinDate 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:55:52.313

采用：

```
"1-1-0001"

DateTime.Parse("1-1-0001") will result in DateTime.MinValue 
```

# c++ - 应该在 ServiceMain 上创建一个新线程？

> ID：14904693
> 
> 赞同：5
> 
> 时间：2013-02-15T22:50:32.250
> 
> 标签：c++, windows, winapi, windows-services

MSDN 说：

“ServiceMain 函数应该创建一个全局事件，在此事件上调用 RegisterWaitForSingleObject 函数，然后退出。这将终止正在运行 ServiceMain 函数的线程，但不会终止服务......”

那么问题来了：应该在ServiceMain函数内部创建一个新线程来执行服务代码，或者我可以简单地将服务设置为RUNNING状态并使用ServiceMain线程来运行服务代码？如果使用 ServiceMain 线程运行服务代码，SCM 将保持锁定状态，即使服务状态设置为 RUNNING？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T02:44:31.820

我不认为 MSDN 中该声明所描述的实现服务的方式是唯一可能的方式。这与[http://msdn.microsoft.com/en-us/library/windows/desktop/bb540476(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb540476(v=vs.85).aspx)上的 MSDN 服务示例相矛盾。在示例中，服务在调用 ServiceMain 的同一线程中等待事件。这种方式可能更适合在单线程中正常工作的简单服务。

如果您选择使用 RegisterWaitForSingleObject 方式，则不必显式创建线程。RegisterWaitForSingleObject 的 MSDN 页面说：“需要时会自动创建新的等待线程。” 在退出 ServiceMain 之前，您必须打开您所服务的 I/O 通道，并将它们的句柄绑定到线程池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:47:12.683

MSDN[说](http://msdn.microsoft.com/en-us/library/ms685138%28VS.85%29.aspx)：“服务控制管理器 (SCM) 一直等到服务报告状态`SERVICE_RUNNING`。建议服务尽快报告此状态，因为在此期间系统中需要与 SCM 交互的其他组件将被阻止时间。”

控制调度程序创建一个新线程来执行服务的 ServiceMain 函数。ServiceMain 函数应执行[以下](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685984%28v=vs.85%29.aspx)任务。

> 5.. 执行服务任务，或者，如果没有待处理的任务，则将控制权返回给调用者。服务状态的任何变化都需要调用`SetServiceStatus`以报告新的状态信息。

从[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687414%28v=vs.85%29.aspx)示例中可以看出，您可以在 ServiceMain 函数中执行更复杂的初始化任务，例如创建额外的线程。

创建[多线程服务](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684264%28v=vs.85%29.aspx)的指南。

# url - 自动搜索网站字段并获取结果 URL

> ID：14904697
> 
> 赞同：0
> 
> 时间：2013-02-15T22:50:47.903
> 
> 标签：url, web, automation

我想在[http://www.drugbank.ca/](http://www.drugbank.ca/)上自动搜索一个字符串并获取结果 URL（搜索字段位于页面顶部）。仅通过操作 URL 无法搜索该网站。有没有基于服务器的方法来做到这一点？我想创建自己的网页，其中包含一个输入字段和“搜索 DrugBank for X 并获取 URL”的按钮。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:57:05.123

您需要获取以下内容：

[http://www.drugbank.ca/search?query=searchstring](http://www.drugbank.ca/search?query=searchstring)

您不能使用 javascript 执行此操作，浏览器不允许查询不同域的站点（由于：[http](http://en.wikipedia.org/wiki/Same_origin_policy) ://en.wikipedia.org/wiki/Same_origin_policy ）。

我会用 php 来做，并创建一个像 searchDrugBank.php 这样的文件：

```
<?php
$urlContent = file_get_contents('http://www.drugbank.ca/search?query=' . $_GET['q']);
// process $urlContent however you want
?> 
```

然后你把你的网站：

```
<form method="get" action="searchDrugBank.php">
<input type="text" name="q" />
<input type="submit" value="Search drugbank"/>
</form> 
```

**（既然你问了）**

为了找到我要查询的 URL，我去了该站点，并查看了当我按下搜索时提交的表单（查看源代码，或者在搜索框或搜索按钮上很容易执行“检查元素”） .

我发现表格是：

```
<form accept-charset="UTF-8" action="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>
      <strong>Search:</strong> 
      <input id="query" name="query" placeholder="Search DrugBank" size="30" type="search">
      <input name="commit" type="submit" value="Search">&nbsp;
      <a href="/search/advanced">Help / Advanced</a>
</form> 
```

这意味着当您按下搜索时，确切的情况是您将执行**GET**请求，因为*method="get"*和 get 请求意味着请求一个 url，如果需要参数，它们应该在 URL ( [http ://en.wikipedia.org/wiki/Query_string#Web_forms](http://en.wikipedia.org/wiki/Query_string#Web_forms)）。

将要查询的 URL 是**/search**，因为 action 是*action="/search"*其余的 url 将使用这里提供的参数构建，它只是：

```
<input id="query" name="query" placeholder="Search DrugBank" size="30" type="search"> 
```

在那里你可以看到应该提供来进行搜索的参数**名称，即****“查询”**！

# facebook - Facebook 应用程序请求对话框不再向用户发送通知

> ID：14904701
> 
> 赞同：0
> 
> 时间：2013-02-15T22:51:00.620
> 
> 标签：facebook, notifications, facebook-app-requests, fb.ui

去年，当我们的 Facebook 画布应用程序使用 FB.ui 请求对话框 API 发送应用程序请求时，该请求显示在 3 个收件人的位置：

*   通知宝石已更新
*   在右上角
*   在应用中心

当您向某人发送应用请求时，Facebook 似乎已删除该通知。我已经在两个不同的应用程序上对此进行了测试，并且发送应用程序请求不会导致向收件人发送通知。

两个问题：

1.  任何人都可以验证这是当前的行为吗？
2.  这是什么时候改变的？（是否有引用此内容的重大更改描述？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:58:08.710

这绝对是一个错误：[https ://developers.facebook.com/bugs/532388000129311](https://developers.facebook.com/bugs/532388000129311)

现在看来已经解决了。如果你问我，Facebook 平台的一个非常令人发指的破坏。

# remote-access - 从两个位置处理 python 代码

> ID：14904705
> 
> 赞同：0
> 
> 时间：2013-02-15T22:51:14.007
> 
> 标签：remote-access

我正在研究一个一直运行的python代码。但我在我的家用机器上运行它，这是固定的。当我在不同的位置时，我想在我的家用机器上进行更改/监控程序。

有远程控制/云服务吗？免费是首选:)

最好的祝福，

RS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:55:12.783

使用登录来获得远程访问然后您可以从任何计算机上打开它...因为它有免费版本，可以让您免费远程访问。

[https://secure.logmein.com/](https://secure.logmein.com/)

# html - xslt 旋转 xml 表难题

> ID：14904706
> 
> 赞同：1
> 
> 时间：2013-02-15T22:51:16.640
> 
> 标签：html, xslt, xmltable

我知道这应该不会太难，但我还是 XSLT 的新手。我有一个 XML 文件，其架构如下：

```
<xs:element id="ALL_DATA">
    <xs:complexType>
        <xs:element name="INPUT_REPORT">
            <xs:complexType>
                <xs:element name="VALUE_NAME"></xs:element>
                <xs:element name="VALUE_DATE"></xs:element>
                <xs:element name="VALUE_FAME"></xs:element>
                <xs:element name="VALUE_GLORY"></xs:element>
                <xs:element name="VALUE_GOLDEN_STARS"></xs:element>
            </xs:complexType>
        </xs:element>
    </xs:complexType>
</xs:element> 
```

XML 文件看起来像这样（缩写）：

```
<ALL_DATA>
    <INPUT_REPORT>
        <VALUE_NAME>Bob Painter</VALUE_NAME>
        <VALUE_FAME>NOBODY</VALUE_FAME>
    </INPUT_REPORT>
    <INPUT_REPORT>
        <VALUE_NAME>Norman Normal</VALUE_NAME>
        <VALUE_FAME>SOMEBODY</VALUE_FAME>
        <VALUE_GLORY>Sunny</VALUE_GLORY>
        <VALUE_GOLDEN_STAR>SOMEBODY</VALUE_GOLDEN-STAR>
    </INPUT_REPORT>
</ALL_DATA> 
```

棘手的部分是我试图让它像这样显示为 html 表格

```
VALUE_NAME         Bob Painter Norman Normal
VALUE_DATE
VALUE_FAME         NOBODY      SOMEBODY
VALUE_GLORY                    Sunny
VALUE_GOLDEN_STARS 
```

我找到了一些用于打印默认值的代码，这些代码可以生成空白，但是如果没有任何报告具有该数据，则这无助于我打印该行。有任何想法吗？

```
<xsl:variable name="show_comments">
  <xsl:choose>
    <xsl:when test="//QUERY_STRING/show_comments"><xsl:value-of select="//QUERY_STRING/show_comments"/></xsl:when>
    <xsl:otherwise>0</xsl:otherwise> <!-- default value -->
  </xsl:choose>
</xsl:variable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:20:18.630

即使没有任何报告具有值，以下转换也会打印该行：

```
<html xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xsl:version="2.0">
    <head><title>All data</title></head>
    <body>
        <table>
            <tr>
                <td>VALUE_NAME</td>
                <xsl:for-each select="//INPUT_REPORT">
                    <td><xsl:value-of select="VALUE_NAME"/></td>
                </xsl:for-each>
            </tr>
            <tr>
                <td>VALUE_DATE</td>
                <xsl:for-each select="//INPUT_REPORT">
                    <td>
                        <xsl:choose>
                            <xsl:when test="VALUE_DATE">
                                <xsl:value-of select="VALUE_DATE"/>
                            </xsl:when>
                            <xsl:otherwise>_nodate_</xsl:otherwise>
                        </xsl:choose>
                    </td>
                </xsl:for-each>
            </tr>
            <tr>
                <td>VALUE_FAME</td>
                <xsl:for-each select="//INPUT_REPORT">
                    <td>
                        <xsl:choose>
                            <xsl:when test="VALUE_FAME">
                                <xsl:value-of select="VALUE_FAME"/>
                            </xsl:when>
                            <xsl:otherwise>_nofame_</xsl:otherwise>
                        </xsl:choose>
                    </td>
                </xsl:for-each>
            </tr>
            <tr>
                <td>VALUE_GLORY</td>
                <xsl:for-each select="//INPUT_REPORT">
                    <td>
                        <xsl:choose>
                            <xsl:when test="VALUE_GLORY">
                                <xsl:value-of select="VALUE_GLORY"/>
                            </xsl:when>
                            <xsl:otherwise>_noglory_</xsl:otherwise>
                        </xsl:choose>
                    </td>
                </xsl:for-each>
            </tr>
            <tr>
                <td>VALUE_GOLDEN_STARS</td>
                <xsl:for-each select="//INPUT_REPORT">
                    <td>
                        <xsl:choose>
                            <xsl:when test="VALUE_GOLDEN_STAR">
                                <xsl:value-of select="VALUE_GOLDEN_STAR"/>
                            </xsl:when>
                            <xsl:otherwise>_nostar_</xsl:otherwise>
                        </xsl:choose>
                    </td>
                </xsl:for-each>
            </tr>
        </table>
    </body>
</html> 
```

请注意，我对此 XML 进行了转换：

```
<?xml version="1.0" encoding="UTF-8"?>
<ALL_DATA>
    <INPUT_REPORT>
        <VALUE_NAME>Bob Painter</VALUE_NAME>
        <VALUE_FAME>NOBODY</VALUE_FAME>
    </INPUT_REPORT>
    <INPUT_REPORT>
        <VALUE_NAME>Norman Normal</VALUE_NAME>
        <VALUE_FAME>SOMEBODY</VALUE_FAME>
        <VALUE_GLORY>Sunny</VALUE_GLORY>
    <VALUE_GOLDEN_STAR>SOMEBODY</VALUE_GOLDEN_STAR>
    </INPUT_REPORT>
</ALL_DATA> 
```

输入包含一些拼写错误，所以我不知道该使用什么。您实际需要的转换应该非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:41:45.950

以下**XSLT 1.0**样式表使用与元素匹配的通用模板，`INPUT_REPORT`并使用参数值来创建第一列并为每个匹配的元素选择适当的子`INPUT_REPORT`元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="html" indent="yes"/>
<xsl:template match="ALL_DATA">
    <html>
        <head></head>
        <body>
            <table>
                <tr>
                    <xsl:apply-templates select="INPUT_REPORT">
                        <xsl:with-param name="column" select="'VALUE_NAME'"/>
                    </xsl:apply-templates>
                </tr>
                <tr>
                    <xsl:apply-templates select="INPUT_REPORT">
                        <xsl:with-param name="column" select="'VALUE_DATE'"/>
                    </xsl:apply-templates>
                </tr>
                <tr>
                    <xsl:apply-templates select="INPUT_REPORT">
                        <xsl:with-param name="column" select="'VALUE_FAME'"/>
                    </xsl:apply-templates>
                </tr>
                <tr>
                    <xsl:apply-templates select="INPUT_REPORT">
                        <xsl:with-param name="column" select="'VALUE_GLORY'"/>
                    </xsl:apply-templates>
                </tr>
                <tr>
                    <xsl:apply-templates select="INPUT_REPORT">
                        <xsl:with-param name="column" select="'VALUE_GOLDEN_STARS'"/>
                    </xsl:apply-templates>
                </tr>
            </table>
        </body>
    </html>
</xsl:template>

<xsl:template match="INPUT_REPORT">
    <xsl:param name="column"/>
    <xsl:if test="position()=1">
        <td><xsl:value-of select="$column"/></td>
    </xsl:if>
    <td><xsl:apply-templates select="*[local-name()=$column]"/></td>
</xsl:template>

</xsl:stylesheet> 
```

**如果您可以选择 XSLT 2.0**，那么这个样式表会更简洁一些：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="2.0">
    <xsl:output method="html" indent="yes"/>
<xsl:template match="ALL_DATA">
    <html>
        <head></head>
        <body>
            <table>
                <xsl:variable name="inputReports" select="INPUT_REPORT" />
                <xsl:for-each select="('VALUE_NAME','VALUE_DATE','VALUE_FAME','VALUE_GLORY','VALUE_GOLDEN_STARS')">
                    <tr>
                        <xsl:apply-templates select="$inputReports">
                            <xsl:with-param name="column" select="."/>
                        </xsl:apply-templates>
                    </tr>
                </xsl:for-each>
            </table>
        </body>
    </html>
</xsl:template>

<xsl:template match="INPUT_REPORT">
    <xsl:param name="column"/>
    <xsl:if test="position()=1">
        <td><xsl:value-of select="$column"/></td>
    </xsl:if>
    <td><xsl:apply-templates select="*[local-name()=$column]"/></td>
</xsl:template>

</xsl:stylesheet> 
```

当应用于示例 XML 输入时，它们都产生以下 HTML 输出：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   </head>
   <body>
      <table>
         <tr>
            <td>VALUE_NAME</td>
            <td>Bob Painter</td>
            <td>Norman Normal</td>
         </tr>
         <tr>
            <td>VALUE_DATE</td>
            <td></td>
            <td></td>
         </tr>
         <tr>
            <td>VALUE_FAME</td>
            <td>NOBODY</td>
            <td>SOMEBODY</td>
         </tr>
         <tr>
            <td>VALUE_GLORY</td>
            <td></td>
            <td>Sunny</td>
         </tr>
         <tr>
            <td>VALUE_GOLDEN_STARS</td>
            <td></td>
            <td></td>
         </tr>
      </table>
   </body>
</html> 
```

# java - （高）maxHttpHeaderSize 有缺点吗？

> ID：14904709
> 
> 赞同：1
> 
> 时间：2013-02-15T22:51:22.740
> 
> 标签：java, performance, tomcat, tomcat6, tomcat7

将 maxHttpHeaderSize 设置为高/无穷大值会导致任何问题吗？

# javascript - 加载 Sharrre 按钮时显示微调器

> ID：14904710
> 
> 赞同：0
> 
> 时间：2013-02-15T22:51:22.813
> 
> 标签：javascript, jquery, html

我想使用 Sharrre jQuery 插件在我的网站上共享页面。但是，这些按钮需要一两秒钟才能加载，并且一次加载一个，每个按钮都会排成一行。

这是一个不幸的影响。我宁愿隐藏 div 的内容，直到加载所有按钮，而不是显示微调器或其他一些适当的分心。

我不知道如何检测 sharrre 插件何时完成加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:51:48.747

我浏览了文档并看到了仅在完成渲染时才会运行的渲染方法。（我假设渲染也包括加载图像）。

你可以试试这样的

```
$('#share').sharrre({
   share: {
     googlePlus: true,
     facebook: true,
     twitter: true
   },
   url: 'http://sharrre.com/'
   render: function() {$('i.spinner').remove()}
 }); 
```

或者就像您要求的那样，您可以最初使容器 div 透明并在渲染方法中将不透明度设置为 1。

# java - 从 My SQL 中搜索两个日期之间的数据

> ID：14904718
> 
> 赞同：-1
> 
> 时间：2013-02-15T22:51:41.007
> 
> 标签：java, mysql, sql

当我在一个月内的两个日期之间（例如 between `02-02-2013`and `09-02-2013`）进行搜索时，结果显示 from `03-01-2013`to`08-01-2013`和`03-02-2013`to `08-02-2013`。

下面是我的代码：

```
try {
    dconfig dcf=new dconfig();
    java.sql.Connection connection;
    Class.forName(dcf.driver);
    connection=(com.mysql.jdbc.Connection) DriverManager.getConnection(dcf.StrUrl,dcf.StrUid,dcf.StrPwd);
    ResultSet rs = null;
    ResultSet rscount;
    String StrQr="";

    if (jobnamesearch.getText().trim().length()>0 ) {
        StrQr=StrQr + " and job_name like '%" + jobnamesearch.getText().trim() +"%' ";
    }

    if (datetosearch.getText().trim().length()>0) {
        StrQr=StrQr + " and date > '" + datesearch.getText().toString()+"' ";
        StrQr=StrQr + " and date < '" + datetosearch.getText().toString()+"' ";
    }

    if (datesearch.getText().trim().length()>0 && datetosearch.getText().trim().length()==0) {
        StrQr=StrQr + " and date like '%" + datesearch.getText().trim().toString()+ "%' ";
    }

    if (dwsearch.getText().trim().length()>0 ) {
        StrQr=StrQr + " and dw_no like '%" + dwsearch.getText().trim() +  "%' ";
    }

    if (remsearch.getText().trim().length()>0 ) {
        StrQr=StrQr + " and rem_no like '%" + remsearch.getText().trim() +  "%' ";
    }

    if (typesearch.getSelectedItem().toString().length()<11) {
        StrQr=StrQr + " and type like '%" + typesearch.getSelectedItem().toString() +  "%' ";
    }

    if (usersearch.getSelectedItem().toString().length()>0) {
        StrQr=StrQr + " and user like '%" + usersearch.getSelectedItem().toString() +  "%' ";
    }

    java.sql.PreparedStatement stmt=connection.prepareStatement("SELECT ID,job_name,details,type,dw_no,rem_no,user,date FROM tracker  where 1=1 " + StrQr +" order by ID DESC");
    java.sql.PreparedStatement stmtcount=connection.prepareStatement("SELECT Count(*) FROM tracker  where 1=1 " + StrQr +"");
    rs = stmt.executeQuery();

    rscount = stmtcount.executeQuery();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:07:18.560

如果我不得不猜测，我会说它在这里：

```
if (datetosearch.getText().trim().length()>0) {
    StrQr=StrQr + " and date > '" + datesearch.getText().toString()+"' ";
    StrQr=StrQr + " and date < '" + datetosearch.getText().toString()+"' ";
} 
```

你说的是日期>——试着把它改成>=和<=。

```
if (datetosearch.getText().trim().length()>0) {
    StrQr=StrQr + " and date >= '" + datesearch.getText().toString()+"' ";
    StrQr=StrQr + " and date <= '" + datetosearch.getText().toString()+"' ";
} 
```

此外，如果您在数据库中的日期是日期时间，那么 <= 也不起作用。您需要为其添加一天或附加 23:59，因为它将在当天午夜搜索。

希望这可以帮助。

顺便说一句——这很容易受到 SQL 注入的攻击。考虑改用参数化查询。

# ios - 声明字段/变量的位置之间的差异

> ID：14904720
> 
> 赞同：0
> 
> 时间：2013-02-15T22:52:03.960
> 
> 标签：ios, ios5, uiview

简单的问题，因为我是 IOS 新手。

声明变量/字段等的位置有什么区别？

选项 1（头文件）

```
@interface ViewController : UIViewController {
UIView *testView;
} 
```

选项 2（头文件）

```
@interface ViewController : UIViewController
@property UIView *testView; 
```

选项 3（实现文件）

```
@implementation ViewController {
UIView *testView;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:00:32.230

没有真正的区别，因为它们都完成了相同的结果。但这里是细节：

**选项 1 与选项 2：**

声明 iVar 是多余的，因为属性会为您创建它。属性的主要工作是自动创建访问器方法（setX 和 getX），并且可以进一步定义如何访问这些方法（原子地或非原子地）或值如何存储在内存中（像任何 ivar 一样简单地分配？强还是弱？）。我的建议是您忘记选项 1 并始终坚持选项 2，例如

```
@property (nonatomic, strong) UIView *yourView; 
```

--

**选项 2 与选项 3**

*（让我们跳过您的选项 3 是另一个 iVar 的事实，并假设您在这里声明了一个 @property，因为这更有趣）*

除了如果您在实现文件 (.m) 中声明该属性，其他包含您的标头的人将看不到它，即它是“某种私有的”，没有什么区别。（有时称为“私有接口”）。事实上，它并不是真正私有的，因为仍然可以调用选择器（obj-c 的动态特性）。尽管如此，隐藏您的实现并仅公开头文件中真正需要的内容是一种很好的做法。

因此，将*选项 3*用于内部内容，将*选项 2*用于外部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:57:57.767

选项 1：这是一个成员字段，没有属性访问器（即 getter/setter）。您必须将其访问为`someInstanceOfViewController->testView`（尽管在's 的实现中，这可能会因为隐式`ViewController`而缩短）。`testView``self`

选项 2：这是一个公共 get/set 属性，这意味着您可以使用`someInstanceOfViewController.testView`. 您可以自定义有关属性的 getter/setter 方法的几件事。其中最常用的是`readonly`，`retain`（意味着如果您将该属性设置为某个对象，自动生成的 setter 方法会自动保留该对象，并释放该属性包含的旧对象），以及`assign`（没有自动保留/释放语义） . 声明属性后，您可以使用自动生成的 getter/setter，也可以编写自己的，通过实现`-(UIView *)testView`(getter) 和/或`-(void)setTestView:(UIView *)testView`.

选项 3：私有属性，所有行为都与选项 #2 相同，但编译器强制要求只能从实现文件内部访问。

# vb6 - 更快地填充两个网格

> ID：14904721
> 
> 赞同：2
> 
> 时间：2013-02-15T22:52:04.503
> 
> 标签：vb6, grid, vbaccelerator

我有大约 10K 条记录，我必须在两个 vbaccelerators sgrids 中填充这些记录，我目前使用以下代码

```
With grdList
     .Clear
     If colTasks Is Nothing Then Exit Sub
     .ReDraw = False
     For i = 1 To colTasks.Count
      AddItem colTasks(i)
    Next
  .ReDraw = True
End With 
```

两个网格的 additem 子例程是不同的，这是所填充的数据所特有的。看起来像这样

```
 Dim lCol   As Long
    Dim bIsDue As Boolean
    Dim sCat   As String
   sCat = cboCat.Text
   With grdList
       If IsEqual(sCat, oItem.Category) Or IsEqual(sCat, "all") Then
            ' Show/Remove Completed
           If Not IsNullOrEmpty(oItem.DueDate) Then
               sCat = DateDiff("d", oItem.DueDate, DateValue(Now))
               bIsDue = (CLng(sCat) > 0)
               If ShowDueOnly And Not bIsDue Then Exit Function
            End If
        Else
            Exit Function
        End If
      If lRow > .Rows Or lRow = 0 Then
          grdList.AddRow
          lRow = .Rows
        End If
        If Not IsNullOrEmpty(oItem.DueDate) Then
            lCol = .ColumnIndex("DueDate")
          lColor = IIf(bIsDue, vbRed, vbBlack)
          sCat = Format$(oItem.DueDate, "MM/dd/yyyy")
          .CellDetails lRow, lCol, CDate(sCat), DT_LEFT, IconIndex("ARROW"), , lColor
        End If
      lCol = .ColumnIndex("Privacy")
      .CellIcon(lRow, lCol) = IIf(oItem.IsPrivate, IconIndex("LOCK"), -1)
      'completed
      lCol = .ColumnIndex("Complete")
     .CellIcon(lRow, lCol) = IIf(oItem.Completed, IconIndex("CHECK"), -1)         
    End With 
```

填充网格大约需要 20 秒，无论如何我可以让它更快

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T04:29:16.017

[sGrid](http://www.vbaccelerator.com/home/VB/Code/Controls/S_Grid_2/S_Grid_2/article.asp)的文档说“如果您可以按顺序添加行，您可以选择让 SGrid 为您预先分配一些行，而不是单独添加每一行，这可以提高性能。为此，请设置 Rows 属性到你想要的行数。”

# wpf - WPF MVVM 数据绑定问题

> ID：14904726
> 
> 赞同：0
> 
> 时间：2013-02-15T22:52:39.307
> 
> 标签：wpf, mvvm, binding

有人可以解释为什么在使用以下代码实现的 WPF 扩展控件“BusyIndi​​cator”中未使用在 CodeBehind 中分配的 ViewModel：

视图模型实现：

```
public partial class App : Application {

        private void OnStartup(object sender, StartupEventArgs seArgs) {
            MainWindowView mwv = new MainWindowView();
            mwv.DataContext = new DataSetViewModel(new DataSetModel());
            mwv.Show();

        }

    } 
```

XAML：

```
<kit:BusyIndicator IsBusy="True" DisplayAfter="0" >

            <kit:BusyIndicator.BusyContentTemplate>
                    <DataTemplate>
                        <StackPanel Margin="4">
                            <TextBlock Text="{Binding Path=WaitProgressUploadTitle}" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <StackPanel Margin="4">
                                <TextBlock Text="{Binding Path=WaitProgressUploadContent}" />
                                <ProgressBar Value="40" Height="15"/>
                            </StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Button Grid.Column="0" Content="Pause" HorizontalAlignment="Right" Margin="0 0 2 0"/>
                                <Button Grid.Column="1" Content="Cancel" HorizontalAlignment="Left" Margin="2 0 0 0"/>
                            </Grid>
                        </StackPanel>
                    </DataTemplate>
                </kit:BusyIndicator.BusyContentTemplate>
                <kit:BusyIndicator.OverlayStyle>
                    <Style TargetType="Rectangle">
                        <Setter Property="Fill" Value="#ffffeeee"/>
                    </Style>
                </kit:BusyIndicator.OverlayStyle>
                <kit:BusyIndicator.ProgressBarStyle>
                    <Style TargetType="ProgressBar">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </Style>
                </kit:BusyIndicator.ProgressBarStyle>

                <StackPanel>
                    <kitdg:DataGridControl Name="DataPreview" ItemsSource="{Binding Path=dvLbSelection}" Visibility="{Binding Path=FileOpenBad,Converter={StaticResource errorVisibility}}" ReadOnly="True"  />
                    <TextBlock Text="{Binding Path=FileOpenText}" Margin="0,100,0,0" HorizontalAlignment="Center" MaxWidth="675" TextAlignment="Center" FontSize="20" Visibility="{Binding Path=FileOpenGood,Converter={StaticResource errorVisibility}}" />
                </StackPanel>

            </kit:BusyIndicator> 
```

在 VS2010 的输出窗口中显示以下内容：

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“字符串”（HashCode=-1880398257）上找不到“WaitProgressUploadTitle”属性。绑定表达式：路径=WaitProgressUploadTitle；DataItem='String' (HashCode=-1880398257); 目标元素是'TextBlock'（名称=''）；目标属性是“文本”（类型“字符串”） System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“字符串”（HashCode=-1880398257）上找不到“WaitProgressUploadContent”属性。BindingExpression:Path=WaitProgressUploadContent; DataItem='String' (HashCode=-1880398257); 目标元素是'TextBlock'（名称=''）；目标属性是“文本”（类型“字符串”） System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“DataSetViewModel”（HashCode=3476046）上找不到“connectionStringValidity”属性。绑定表达式：路径=连接字符串有效性；DataItem='DataSetViewModel' (HashCode=3476046); 目标元素是“图像”（名称=“errorInvalidSQLConnection”）；目标属性是“工具提示”（类型“对象”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:32:37.133

你没有设置`DataContext`你的`BusyIndicator`控制。您将其设置在`MainWindowView`对象上。您可以做的是在`MainWindowView`内部命名并设置控件的名称（显然替换为`DataContext`您在内部为窗口提供的任何名称）：`BusyIndicator``NameOfMainWindowView`

```
<kit:BusyIndicator DataContext="{Binding DataContext, ElementName=NameOfMainWindowView}"
IsBusy="True" DisplayAfter="0" > 
```

# javascript - 将 PDF 存储到 Google 云端硬盘

> ID：14904727
> 
> 赞同：1
> 
> 时间：2013-02-15T22:52:40.100
> 
> 标签：javascript, google-apps-script

有人知道如何从 Google Doc 创建 PDF 并将其存储到 Google Drive 中的脚本吗？这是我的功能

```
 var Folder = DocsList.getFolder(FOLDER);

  var doc = DocsList.getFileById(DOC_ID);
 var docName = doc.getName();
  var pdf = doc.getAs('application/pdf').getBytes();

 //This suppose to be the accion, but such function cant be found 
 pdf.addToFolder(Folder); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:56:28.697

尝试

```
var pdf = doc.getAs('application/pdf');
Folder.createFile(pdf); 
```

为了简单起见，您希望将文件内容保留为 Blob。（即不要调用`getBytes()`. 然后使用 Blob 创建一个文件。`Folder.createFile(...)`是您正在寻找的功能。

# html - 使用 Bootstrap 将阴影添加到顶部固定的导航栏

> ID：14904731
> 
> 赞同：40
> 
> 时间：2013-02-15T22:53:07.417
> 
> 标签：html, css, twitter-bootstrap

我正在尝试通过 Bootstrap 向我的导航栏添加阴影，但我似乎无法弄清楚。也许有人可以指出我正确的方向。我见过的所有其他关于类似主题的问题都有非常冗长的混乱代码响应，但必须有一种简单的方法来做到这一点，这不是 Bootstrap 的全部意义所在。

这是与我的导航相关的 HTML：

```
<div class="navbar navbar-inverse navbar-fixed-top" id="custom-nav">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="index.html">eService</a>
      <div class="nav-collapse">
        <ul class="nav pull-right">
          <li><a href="index.html">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  Services
                  <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Stage Design & Build</a></li>
              <li><a href="#">Event Planning & Management</a></li>
              <li><a href="#">Video Production</a></li>
              <li><a href="#">Audio Production</a></li>
              <li><a href="#">Lighting Production</a></li>
            </ul>
          </li><!-- dropdown -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  Events
                  <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Corporate Events</a></li>
              <li><a href="#">Civic Events</a></li>
              <li><a href="#">Charity Events</a></li>
              <li><a href="#">Grand Openings</a></li>
              <li><a href="#">Concerts</a></li>
            </ul>
          </li><!-- dropdown -->
        </ul><!-- /.nav -->
      </div><!--/.nav-collapse -->
    </div><!-- /.container -->
  </div><!-- /.navbar-inner -->
</div><!-- /.navbar --> 
```

这是我与导航栏相关的 CSS：

```
#custom-nav {
    -webkit-box-shadow: 20px 20px 20px #FC0;
    -moz-box-shadow:    20px 20px 20px #FC0;
    box-shadow:         20px 20px 20px #FC0;
    z-index:999;
} 
```

我知道，使用我为阴影设置的当前 px 尺寸，它看起来像一个实心块。一旦我可以让这该死的东西发挥作用，我计划进行调整。感谢您的任何帮助或指点。

多爱。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2015-05-26T18:19:55.437

在您的 css 中将以下内容添加到您的 .navbar 类规则中

```
.navbar {
    -webkit-box-shadow: 0 8px 6px -6px #999;
    -moz-box-shadow: 0 8px 6px -6px #999;
    box-shadow: 0 8px 6px -6px #999;

    /* the rest of your styling */
} 
```

## 编辑

有一个很棒的在线工具可以生成盒子阴影代码（感谢[cssmatic.com](http://www.cssmatic.com)的人们）。您可以调整阴影的外观，它将生成所需的所有代码以及任何特定的浏览器前缀（webkit、mozilla 等）。然后，您可以将代码复制到您的 css 中。

[http://www.cssmatic.com/box-shadow](http://www.cssmatic.com/box-shadow)

您还可以在同一站点中找到其他 css 效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-06-06T18:18:29.653

要在导航栏中保持阴影，只需调整 box-shadow 属性

```
.navbar{
    box-shadow: 0px 8px 8px -6px rgba(0,0,0,.5);
    } 
```

这里首先`0px`是使中心的阴影调整它以获得右侧和左侧的阴影

然后，`8px`是阴影的高度

之后是阴影的硬度和不`8px`透明度`-6px`

`(0,0,0,0.5)`是简单的 rgba(red,green,blue,alpha) 颜色和**alpha，**它是为了保持阴影的**透明度，它从****0.0**（完全透明）到**1.0**（完全不透明）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-31T19:44:24.150

您的导航栏标记与默认的 Bootstrap 导航栏标记有点不同，例如，

您将整个导航栏包装在一个名为的类中，`navbar-inner`而不是将切换和品牌包装在一个`navbar-header`类中，然后是可折叠的菜单项。

您的标记应如下所示：

```
<div class="navbar navbar-inverse navbar-fixed-top" id="custom-nav" role="navigation">
   <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" 
         data-target="#example-navbar-collapse">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">eService</a>
   </div>
   <div class="collapse navbar-collapse" id="example-navbar-collapse">
      <ul class="nav navbar-nav">
         <li><a href="index.html">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  Services
                  <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Stage Design & Build</a></li>
              <li><a href="#">Event Planning & Management</a></li>
              <li><a href="#">Video Production</a></li>
              <li><a href="#">Audio Production</a></li>
              <li><a href="#">Lighting Production</a></li>
            </ul>
          </li><!-- dropdown -->
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  Events
                  <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Corporate Events</a></li>
              <li><a href="#">Civic Events</a></li>
              <li><a href="#">Charity Events</a></li>
              <li><a href="#">Grand Openings</a></li>
              <li><a href="#">Concerts</a></li>
            </ul>
          </li><!-- dropdown -->
        </ul><!-- /.nav -->
   </div>
</div> 
```

这是一个带有上述代码的jsfiddle：[https ://jsfiddle.net/AndrewL32/e0d8my79/36/](https://jsfiddle.net/AndrewL32/e0d8my79/36/)

还，

将您的自定义 css 文件保存在引导 css 文件**下方**，以避免引导程序的默认样式覆盖您的样式。

```
<link rel="stylesheet" type="text/css" href="bootstrap.css"> <!--call your bootstrap first-->
<link rel="stylesheet" type="text/css" href="mystyle.css"><!-- followed by your custom css after--> 
```

# c# - 在 C# 中创建复合索引

> ID：14904733
> 
> 赞同：15
> 
> 时间：2013-02-15T22:53:16.240
> 
> 标签：c#, .net, mongodb, mongodb-.net-driver, compound-index

我想创建一个复合索引，其中一个键应该按升序排列，第二个键应该按降序排列。

我怎样才能做到这一点？

我有一个包含用户选择的属性名称的字符串。

```
collection.EnsureIndex(IndexKeys.Descending(selectedProperties[0]),
                IndexKeys.Ascending(selectedProperties[1])),
IndexOptions....... 
```

不工作

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-10-02T16:46:46.470

在驱动程序的 v2.x 中，他们完全更改了 API，因此目前异步创建复合索引的方法（首选）是：

```
await collection.Indexes.CreateOneAsync(
    Builders<Hamster>.IndexKeys.Ascending(_ => _.Name).Descending(_ => _.Age),
    new CreateIndexOptions { Background = true }); 
```

并同步：

```
collection.Indexes.CreateOne(
    Builders<Hamster>.IndexKeys.Ascending(_ => _.Name).Descending(_ => _.Age),
    new CreateIndexOptions { Sparse = true }); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-16T01:09:01.267

这是一种方法：

```
var keys = new IndexKeysBuilder();

keys.Ascending(keyName1);
keys.Descending(keyName2);

var options = new IndexOptionsBuilder();
options.SetSparse(true);
options.SetUnique(false);
collection.EnsureIndex(keys, options); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-12T14:07:49.800

`EnsureIndex`现在已经过时了，所以`CreateIndex`应该改用。还有支持流畅使用的静态构建器类：`IndexKeys`和`IndexOptions`.

所以最干净的选择是：

```
collection.CreateIndex(
    IndexKeys.Ascending(keyName1).Descending(keyName2),
    IndexOptions.SetSparse(true).SetUnique(false)); 
```

对于通用类型安全选项：

```
collection.CreateIndex(
    IndexKeys<Document>.Ascending(d => d.Property1).Descending(d => d.Property2),
    IndexOptions.SetSparse(true).SetUnique(false)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-28T21:37:16.490

创建索引

```
var indexModel = new CreateIndexModel<T>(keys.Ascending(x => x.Property1).Ascending(x=>x.Property2));

collection.Indexes.CreateOne(indexModel); 
```

# installation - 构建 Visual Studio 2010 安装项目：“错误：无法更新项目的依赖项”

> ID：14904736
> 
> 赞同：1
> 
> 时间：2013-02-15T22:53:49.330
> 
> 标签：installation

我希望有人能指出我解决这个问题的正确方向。我通过使用 Google 找到了许多解决方法，甚至是热修复，但是没有一个可以解决问题。我不知道该怎么办。

我试过这个修补程序：[http ://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=30681](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=30681)

我尝试清除 .vdproj 文件中的层次结构/文件内容

我已经尝试了此博客中列出的建议：http: [//binglongx.wordpress.com/2011/09/22/building-visual-studio-2010-setup-project-error-unable-to-update-the-dependencies-项目/](http://binglongx.wordpress.com/2011/09/22/building-visual-studio-2010-setup-project-error-unable-to-update-the-dependencies-of-the-project/)

我已经尝试完全从解决方案中转储该 .vdproj 并创建一个新的。这个会构建，但是当我尝试部署时，我遇到了一个我找不到解决方案的新问题。（应用程序不会作为服务安装，它应该安装）。我想让原始设置项目工作，看看它是否会正确安装。

有没有人有我上面没有列出的解决方案或解决方法？或者，谁能告诉我什么会导致安装项目无法按预期部署为服务？我过去曾在其他服务中这样做过，而且效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-30T09:04:30.363

1-通过 IDE 界面从您的解决方案中删除安装程序项目 2-将安装程序项目添加回您的解决方案（添加 > 现有项目...） 3-重建它几乎每次都对我有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:12:57.763

能够使用以下知识库文章解决它。

[http://support.microsoft.com/kb/816169](http://support.microsoft.com/kb/816169)

# python - 如何操作 numpy 数组以与 ESRI 的 arcpy.da.NumPyArrayToTable 一起使用

> ID：14904743
> 
> 赞同：3
> 
> 时间：2013-02-15T22:54:25.950
> 
> 标签：python, numpy, arcgis, arcpy

ESRI 允许访问将数据从表移动到数组并返回。我有一个脚本，它从 api 调用中获取人口普查数据并将其转换为数组，进行一些简单的数学运算，然后理想情况下将其放入表格中。要进行数学运算，数组不能是 rec 数组。vstack、hstack 或 concatenate 的组合似乎都没有给出好的结果。我求助于创建单独的一维数组作为recarrays，然后使用np.lib.recfunctions.merge_arrays 中的合并函数。肯定有更好的方法。

ESRI 从 TableToNumPyArray 的返回：

```
>>> testArray
array([ (41039000100.0, 2628.0, 100.0, 2339.0, 135.0, 18.0, 22.0, 16.0, 25.0, 0.0, 92.0, 0.0, 92.0, 0.0, 92.0, 0.0, 92.0, 6.0, 9.0, 249.0, 90.0, 0.0, 92.0, 1, u'41039000100'),
...
dtype=[('Geo_id', '<f8'), ('TotalUnits', '<f8'), ('MOE_Total', '<f8'), >('Total_1_detached', '<f8'), ('MOE_Total_1_detached', '<f8'), ('Total_1_attached', >'<f8'), ('MOE_Total_1_attached', '<f8'), ('Total_2', '<f8'), ('MOE_Total_2', '<f8'), >('Total_3_or_4', '<f8'), ('MOE_Total_3_or_4', '<f8'), ('Total_5_to_9', '<f8'), >('MOE_Total_5_to_9', '<f8'), ('Total_10_to_19', '<f8'), ('MOE_Total_10_to_19', '<f8'), >('Total_20_to_49', '<f8'), ('MOE_Total_20_to_49', '<f8'), ('Total_50_or_more', '<f8'), >('MOE_Total_50_or_more', '<f8'), ('Total_Mobile_home', '<f8'), ('MOE_Total_Mobile_home', '<f8'), ('Total_Boat_RV_van_etc', '<f8'), ('MOE_Total_Boat_RV_van_etc', '<f8'), >('ObjectID', '<i4'), ('geo_id_t', '<U50')]) 
```

我的代码片段看起来像

```
try:

    # Assign Geo_id array
    Geo_id_array = B25008_001E_array[...,0]
    Tpop_array = B25008_001E_array[...,1]
    Tunits_array = B25024_001E_array[...,1]
    # divide by sero is possible for real rowns and definite for the end-of-file
    # tract, so convert nan's in the HHsize_array to zero's with nan_to_num
    # HHsize_array = Tpop_array.view(np.float32)/Tunits_array.view(np.float32)
    HHsize_array = Tpop_array/Tunits_array
    HHsize_array = nan_to_num(HHsize_array)
    # Table_array = array(vstack((Geo_id_array, Tpop_array, Tunits_array, HHsize_array)), dtype = ([('Geo_id', '|S13'), ('Tpop', np.int32), ('Tunits_array', np.int32), ('HHsize', np.float32)]))
    # Table_array = np.hstack((Geo_id_array, Tpop_array, Tunits_array, HHsize_array))
    Geo_id_recarray = np.array(Geo_id_array, dtype = ([('Geo_id', '|S13')]))
    Tpop_recarray = np.array(Tpop_array, dtype = ([('Tpop', np.int32)]))
    Tunits_recarray = np.array(Tunits_array, dtype = ([('Tunits_array', np.int32)]))
    HHsize_recarray = np.array(HHsize_array, dtype = ([('HHsize', np.float32)]))
    arrays = [Geo_id_recarray, Tpop_recarray, Tunits_recarray, HHsize_recarray]
    MergedArray = np.lib.recfunctions.merge_arrays(arrays, usemask=False)
    print
    print

except Exception as e:
    # If an error occurred, print line number and error message
    import traceback, sys
    tb = sys.exc_info()[2]
    print "An error occured on line %i" % tb.tb_lineno
    print str(e) 
```

我想，我更喜欢在构建数组之前合并/加入/堆叠数组。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:54:41.560

您应该能够使用结构化数组（从技术上讲，您不使用[recarrays](http://www.scipy.org/Cookbook/Recarray)）来进行“简单数学运算”。我不确定你是否展示了你想做的数学，但例如，如果你想做：

```
HHsize_array = Tpop_array/Tunits_array 
```

但是不想拥有所有这些单独的数组，您可以简单地对主（合并数组）的[视图](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.view.html)进行数学运算，我们称之为`data`：

```
data['HHsize'] = data['Tpop']/data['Tunits'] 
```

其中`HHsize`,`Tpop`和`Tunits`是一个名为 的结构化数组中的所有字段名称`data`，这样您就有

```
>>> data.dtype
dtype([('Geo_id', '|S13'), ('Tpop', np.int32), ('Tunits_array', np.int32), ('HHsize', np.float32)]) 
```

# r - 在R中创建具有相同轴的多个散点图

> ID：14904748
> 
> 赞同：5
> 
> 时间：2013-02-15T22:55:02.237
> 
> 标签：r, graphics, plot, rpy2

我试图在 R 中以 2 x 2 排列绘制四个散点图（我实际上是通过 rpy2 绘制的）。我希望每个的纵横比都为 1，但也具有相同的比例，因此所有子图的 X 和 Y 刻度相同，以便可以比较它们。我试图这样做`par`：

```
par(mfrow=c(2,2))
# scatter 1
plot(x, y, "p", asp=1)
# scatter 2
plot(a, b, "p", asp=1)
# ... 
```

**编辑：**

这是我现在拥有的直接示例：

```
> par(mfrow=c(2,2))
> for (n in 1:4) { plot(iris$Petal.Width, rnorm(length(iris$Petal.Width)), "p", asp=1) } 
```

它创建了正确类型的散点图，但具有不同的比例。在上面的每次调用中设置`ylim`和相同*并*不能解决问题。您仍然会在每个轴上看到非常不同的刻度线和刻度数，这使得散布图难以解释。我希望 X 轴和 Y 轴相同。例如，这个：`xlim``plot`

 *`for (n in 1:4) { plot(iris$Petal.Width, rnorm(length(iris$Petal.Width)), "p", asp=1, xlim=c(-4, 6), ylim=c(-2, 4)) }`

生成错误的结果：

![在此处输入图像描述](../Images/add088e0b444149aee0ec4d9cac738c0.png)

确保在所有子图中使用相同轴的最佳方法是什么？

我所寻找的只是一个`axis=same`类似于 to的参数`par(mfrow=...)`，这听起来像是 的默认行为`lattice`，以使轴在每个子图中共享且相同。

lgautier 用 ggplot 提供了很好的代码，但它需要提前知道轴。我想澄清一下，我想避免遍历每个子图中的数据并自己计算要绘制的正确刻度。如果必须提前知道，那么 ggplot 解决方案比仅仅使用`plot`和显式绘图要复杂得多

agstudy 给出了一个带有 lattice 的解决方案。这看起来最接近我想要的，因为您不必显式地预先计算每个散点的刻度位置，但是作为一个新用户，我无法弄清楚如何使格子看起来像一个普通的图。我得到的最接近的是：

```
> xyplot(y~x|group, data =dat, type='p',
        between =list(y=2,x=2),
        layout=c(2,2), aspect=1,
               scales =list(y = list(relation='same'), alternating=FALSE)) 
```

产生：

![在此处输入图像描述](../Images/eda52e4baba7551cc821e8055a508a16.png)

我怎样才能让它看起来像 R 基础？我不希望这些`group`字幕出现在每个子图的顶部，或者不希望在每个散点图的顶部和右侧悬挂未标记的刻度，我只希望散点图的每个 x 和 y 都被标记。我也不是在寻找 X 和 Y 的共享标签——每个子图都有自己的 X 和 Y 标签。并且每个散点中的轴标签必须相同，尽管此处选择的数据没有意义。

除非有一种简单的方法可以使格子看起来像 R 基础，否则听起来答案是没有办法做我在 R 中尝试做的事情（令人惊讶），而不预先计算每个子图中每个刻度的确切位置，这需要提前遍历数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:50:40.293

和你需要重塑数据`lattice`。`ggplot2`例如：

1.  创建 4 个 data.frame(x=x1,y=y1)...
2.  为每个 data.frame 添加一个 group 列，group=1,2,...
3.  一次rbind 4个data.frame

这是一个使用示例`lattice`

```
dat <- data.frame(x = rep(sample(1:100,size=10),4),
                  y = rep(rnorm(40)),
                  group = rep(1:4,each =10))

xyplot(y~x|group,       ## conditional formula to get 4 panels
       data =dat,       ## data
       type='l',        ## line type for plot
       groups=group,     ## group ti get differents colors
       layout=c(2,2))   ## equivalent to par or layout 
```

![在此处输入图像描述](../Images/771d299abaed9f556349705e637ee9ca.png)

PS：不需要设置sacles。在`xyplot`默认的 sacles 设置中是`same`（所有面板都使用相同的 sacles）。您可以修改它，例如：

```
xyplot(y~x|group, data =dat, type='l',groups=group,
       layout=c(2,2), scales =list(y = list(relation='free'))) 
```

**编辑**

格子绘图函数有大量参数可以控制绘图的许多细节，例如我自定义：

1.  用于标签和标题的文本
2.  轴刻度标签的大小和位置，
3.  面板的列和行之间的间隙大小。

    ```
    xyplot(y~x|group, data =dat, type='l',groups=group,
          between =list(y=2,x=2),
          layout=c(2,2), 
          strip = myStrip,
          scales =list(y = list(relation='same',alternating= c(3,3)))) 
    ```

在哪里

```
myStrip <- function(var.name,which.panel, which.given,...) {
  var.name <- paste(var.name ,which.panel)
  strip.default(which.given,which.panel,var.name,...)
  } 
```

![在此处输入图像描述](../Images/7f138ede0f498874c6fd22001438f435.png)

**编辑**为了得到一个格子图基础图形图，你可以试试这个：

```
xyplot(y~x|group, data =dat, type='l',groups=group,
       between=list(y=2,x=2),
       layout=c(2,2), 
       strip =FALSE,
       xlab=c('a','a'),
       xlab.top=c('a','a'),
       ylab=c('b','b'),
       ylab.right = c('b','b'),
       main=c('plot1','plot2'),
       sub=c('plot3','plot4'),
       scales =list(y = list(alternating= c(3,3)),
                    x = list(alternating= c(3,3)))) 
```

![在此处输入图像描述](../Images/9f05e8db6a021cdf37c499805d15558b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T07:46:56.943

如果开始，ggplot2 可能具有最高的漂亮/简单比率。

rpy2 示例：

```
from rpy2.robjects.lib import ggplot2
from rpy2.robjects import r, Formula

iris = r('iris')

p = ggplot2.ggplot(iris) + \
    ggplot2.geom_point(ggplot2.aes_string(x="Sepal.Length", y="Sepal.Width")) + \
    ggplot2.facet_wrap(Formula('~ Species'), ncol=2, nrow = 2) + \
    ggplot2.GBaseObject(r('ggplot2::coord_fixed')()) # aspect ratio
# coord_fixed() missing from the interface, 
# therefore the hack. This should be fixed in rpy2-2.3.3

p.plot() 
```

阅读对先前答案的评论，我发现您的意思可能是完全分开的图。使用 R 的默认绘图系统，`par(mfrow(c(2,2))`或者`par(mfcol(c(2,2)))`最简单的方法，并通过通常的固定方式保持纵横比、轴范围和刻度线一致。

在 R 中绘制的最灵活的系统可能是`grid`. 它并不像看起来那么糟糕，把它想象成一个场景图。使用 rpy2、ggplot2 和网格：

```
from rpy2.robjects.vectors import FloatVector

from rpy2.robjects.lib import grid
grid.newpage()
lt = grid.layout(2,2) # 2x2 layout
vp = grid.viewport(layout = lt)
vp.push()

# limits for axes and tickmarks have to be known or computed beforehand
xlims = FloatVector((4, 9))
xbreaks = FloatVector((4,6,8))
ylims = FloatVector((-3, 3))
ybreaks = FloatVector((-2, 0, 2))

# first panel
vp_p = grid.viewport(**{'layout.pos.col':1, 'layout.pos.row': 1})
p = ggplot2.ggplot(iris) + \
    ggplot2.geom_point(ggplot2.aes_string(x="Sepal.Length",
                                          y="rnorm(nrow(iris))")) + \
    ggplot2.GBaseObject(r('ggplot2::coord_fixed')()) + \
    ggplot2.scale_x_continuous(limits = xlims, breaks = xbreaks) + \
    ggplot2.scale_y_continuous(limits = ylims, breaks = ybreaks)
p.plot(vp = vp_p)
# third panel
vp_p = grid.viewport(**{'layout.pos.col':2, 'layout.pos.row': 2})
p = ggplot2.ggplot(iris) + \
    ggplot2.geom_point(ggplot2.aes_string(x="Sepal.Length",
                                          y="rnorm(nrow(iris))")) + \
    ggplot2.GBaseObject(r('ggplot2::coord_fixed')()) + \
    ggplot2.scale_x_continuous(limits = xlims, breaks = xbreaks) + \
    ggplot2.scale_y_continuous(limits = ylims, breaks = ybreaks)
p.plot(vp = vp_p) 
```

[rpy2 文档中有关 graphics](http://rpy.sourceforge.net/rpy2/doc-dev/html/graphics.html)的更多文档，以及 ggplot2 和网格文档中的更多文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-10T20:15:15.647

尽管已经选择了一个答案，但该答案使用`ggplot`而不是基数 R，这正是 OP 想要的。虽然`ggplot`非常适合快速绘图，但对于发布，您通常希望对绘图进行更好的控制而不是`ggplot`提供。这就是基础情节擅长的地方。

我建议阅读[Sean Anderson 对](http://seananderson.ca/courses/11-multipanel/multipanel.pdf)可以巧妙使用 的魔法的解释`par`，以及其他一些不错的技巧，例如使用`layout()`and `split.screen()`。

使用他的解释，我想出了这个：

```
# Assume that you are starting with some data, 
# rather than generating it on the fly
data_mat <- matrix(rnorm(600), nrow=4, ncol=150)
x_val <- iris$Petal.Width

Ylim <- c(-3, 3)
Xlim <- c(0, 2.5)

# You'll need to make the ylimits the same if you want to share axes

par(mfrow=c(2,2))
par(mar=c(0,0,0,0), oma=c(4,4,0.5,0.5))
par(mgp=c(1, 0.6, 0.5))
for (n in 1:4) { 
  plot(x_val, data_mat[n,], "p", asp=1, axes=FALSE, ylim=Ylim, xlim=Xlim)
  box()
  if(n %in% c(1,3)){
    axis(2, at=seq(Ylim[1]+0.5, Ylim[2]-0.5, by=0.5))
  }
  if(n %in% c(3,4)){
    axis(1, at=seq(min(x_val), max(x_val), by=0.1))
  }
} 
```

![具有共享边距的绘图](../Images/0801e65dd57ce1ad1a2fdbe71f0b631a.png)

这里还有一些工作要做。就像在 OP 中一样，数据在中间出现挤压。当然，调整一些东西以便使用完整的绘图区域会很好。*

# objective-c - Mac OSX：确定用户帐户是 Active Directory 用户还是使用 Objective-c 的本地用户

> ID：14904749
> 
> 赞同：4
> 
> 时间：2013-02-15T22:55:07.350
> 
> 标签：objective-c, macos, active-directory

使用`dsconfigad -show`它可以解析输出并确定计算机是否绑定到 Active Directory 域。

**问题是即使用户作为本地用户帐户登录，也会返回 Active Directory 域。**

注意：理想情况下，我需要一个同样适用于 10.5 的解决方案。

**不回答问题的类似帖子：**

[如何获取通过 Active Directory 登录 Mac 的用户的域名](https://stackoverflow.com/questions/2953378/how-can-i-get-the-domain-name-for-a-user-logged-into-a-mac-via-active-directory?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T00:21:42.603

我正在寻找如何检测用户是否有本地帐户或任何网络目录帐户（ActiveDir 或 OpenDir）。所以我使用 Open Directory 框架所做的事情是这样的：

1.  获取默认 ODSession 会话
2.  获取本地节点 - kODNodeTypeLocalNodes（我不想一直向服务器发送查询）
3.  kODAttributeTypeNFSHomeDirectory 的查询节点，查询值设置为当前用户的主目录
4.  如果找到，则表示用户是本地的，如果不是（因为我们只查询本地节点）——用户有网络帐户

所以是这样的：

```
static BOOL  isLocalUser = NO;
static BOOL shouldKeepRunning = YES;        // global

-(BOOL)isLocalUser
{
    isLocalUser = NO;   // set default to NO here
    NSError* err;
    ODSession *mySession = [ODSession defaultSession];
    ODNode *myNode = [ODNode nodeWithSession:mySession type:kODNodeTypeLocalNodes error:&err];
    ODQuery *myQuery = [ODQuery  queryWithNode: myNode
                                forRecordTypes: kODRecordTypeUsers
                                     attribute: kODAttributeTypeNFSHomeDirectory
                                     matchType: kODMatchEqualTo
                                   queryValues: NSHomeDirectory()
                              returnAttributes: kODAttributeTypeStandardOnly
                                maximumResults: 0
                                         error: &err];

    [myQuery retain];
    [myQuery setDelegate: self];
    [myQuery scheduleInRunLoop: [NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    NSRunLoop *theRunLoop = [NSRunLoop currentRunLoop];
    while (shouldKeepRunning && [theRunLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]);

    return isLocalUser;
}

- (void)query:(ODQuery *)inSearch foundResults:(NSArray *)inResults error:(NSError *)inError
{

     if (!inResults && !inError)
     {
        [inSearch removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [inSearch release];
        shouldKeepRunning = NO;  // end of search
     }

     ...
     // check what you found here
     // if found any nodes, user is local so
     isLocalUser = YES;
} 
```

另一个想法是使用身份服务：

1.  获取当前用户的身份（CSIdentityQueryCreateForCurrentUser）
2.  从中获取权限 (CSIdentityGetAuthority)
3.  看看它是否是本地权威（CSGetLocalIdentityAuthority）

希望这可以帮助。

# php - drupal 6表主题（）输出

> ID：14904753
> 
> 赞同：1
> 
> 时间：2013-02-15T22:55:23.390
> 
> 标签：php, drupal, drupal-6

我正在制作一个 drupal 表并查找 drupal_theme() 并尝试遵循使用以下代码构建表的规则：

```
 $data = array('value', 'values');
  $header = array ($data);
  $rows = array(
    // Simple row
    array(
      'Cell 1', 'Cell 2', 'Cell 3'
    ),
    // Row with attributes on the row and some of its cells.
    array(
      'data' => array('Cell 1', array('data' => 'Cell 2', 'colspan' => 2)),
      'class' => 'funky'
    )
      );

  //$output = theme('table', $header, $rows, $attributes = array(), 
  //$caption = NULL);
  $table_t = theme_table($header, $rows, $attributes = array(), $caption = NULL);
  //return $output;
  return $table_t; 
```

但是，该表不包含我预期的行和列标题。怎么了？？

截屏： ![在此处输入图像描述](../Images/b6947f04a4a6547a1a310a7cd3afd643.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:00:45.020

我不确定这是否会有所帮助，但这是我在我的一个模块中使用的表头的代码。

```
 $header = array(
    array('data' => t('One')),
    array('data' => t('Two')),
    array('data' => t('Three')),
    array('data' => t('Four')),
  ); 
```

看看这是否适合你。

另外，`theme_table($header, $rows, $attributes = array(), $caption = NULL)`也可以`theme_table($header, $rows)`

# python - Pymongo MongoClient：如果通过 URI 放入数据库，如何将其取出？

> ID：14904754
> 
> 赞同：2
> 
> 时间：2013-02-15T22:55:28.797
> 
> 标签：python, mongodb

的文档`MongoClient`说有人可能会说“host=”并给出完整的 MongoDB URI。其中包括数据库名称。一旦我这样做了，有没有办法从 MongoClient 对象中提取数据库名称？我没有在源代码中发现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:58:01.437

我相信您正在寻找的内容可以在`pymongo.uri_parser`. 特别是看一下[parse_uri](http://api.mongodb.org/python/current/api/pymongo/uri_parser.html#pymongo.uri_parser.parse_uri)函数。`parse_uri`将 MongoDB URI 作为参数并返回包含值的字典，例如`username`,`password`和最重要的`database`.

例子：

```
from pymongo.uri_parser import parse_uri

mongo_uri = 'mongodb://james:brewer@localhost/test'

for k, v in parse_uri(mongo_uri).items():
    print k, ':', v 
```

将打印

```
username : james
nodelist : [('localhost', 27017)]
database : test
connection : None
password : brewer
options : {} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-08T21:58:23.573

该类`MongoClient`有一个[称为`get_default_database(default=None, [...other options...])`](https://pymongo.readthedocs.io/en/stable/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient.get_default_database)记录为的方法：

> 获取 MongoDB 连接 URI 中命名的数据库。

`MongoClient`还有一个[名为 的方法`.get_database(name=None, [... other options...])`](https://pymongo.readthedocs.io/en/stable/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient.get_database) ，其中`name=None`参数定义为：

> name（可选）：数据库的名称 - 一个字符串。如果 None （默认值），则返回 MongoDB 连接 URI 中命名的数据库。

因此，如果您只有 URI，但该 URI 包含数据库名称，您可以像这样获取 MongoDB 数据库：

```
 mongo_database = pymongo.MongoClient(host=mongo_uri).get_default_database() 
```

或者像这样：

```
 mongo_database = pymongo.MongoClient(host=mongo_uri).get_database() 
```

`default=`上面第一个方法中的参数`name=`和第二个方法中的参数执行相同的功能：允许应用程序程序员覆盖 URI 中指定的数据库，或者如果 URI 中没有提供数据库，则对其进行补充。

# c++ - Mac 上的 OpenGL/GLUT 应用程序无法获得焦点

> ID：14904759
> 
> 赞同：0
> 
> 时间：2013-02-15T22:55:58.663
> 
> 标签：c++, macos, opengl, glut

我在后台线程中运行 OpenGL 并使用 CGL 来确保当前上下文设置正确（甚至使用 CGLLockContext 等）。我的应用程序渲染良好，但 GLUT 创建的窗口无法获得焦点。你不能点击它，不能使用键盘功能，或者任何东西。当鼠标悬停在窗口上时，它总是会显示一个旋转的轮子。这是一个从命令行运行的 c++ 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:26:45.287

弄清楚了！如果我使用 freeglut 而不是 glut 我没有这个问题。我认为它的出现是因为 glut 需要`glutMainLoop`在主线程中调用，而 freeglut 可以更好地处理在 pthread 中调用它

# sql - Perl DBI 常量 - 如何访问？

> ID：14904761
> 
> 赞同：2
> 
> 时间：2013-02-15T22:56:14.797
> 
> 标签：sql, perl, dbi, subroutine

[获取类型信息](http://search.cpan.org/~timb/DBI-1.623/DBI.pm#type_info_all)的文档包括这段用于获取代码和整数之间映射的建议代码：

```
foreach (@{ $DBI::EXPORT_TAGS{sql_types} }) {
    printf "%s=%d\n", $_, &{"DBI::$_"};
} 
```

但是 perl 5.16.2 不允许这样做：

```
Can't use string ("DBI::SQL_GUID") as a subroutine ref while "strict refs" in use 
```

我不知道如何关闭**严格的 refs**，而且我怀疑任何人这样做都不是作者的本意。这个子程序调用如何完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:02:20.150

您可以通过这样做关闭严格的“参考”

```
{
    no strict 'refs';
    foreach (@{ $DBI::EXPORT_TAGS{sql_types} }) {
        printf "%s=%d\n", $_, &{"DBI::$_"};
    }   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T23:45:44.173

为什么要放在`no strict 'refs';`外面？以下是更合适的用法`no strict 'refs';`：

```
for (@{ $DBI::EXPORT_TAGS{sql_types} }) {
    no strict 'refs';
    printf "%s=%d\n", $_, &{"DBI::$_"};
} 
```

（不要说 jmcneirney 快了 1 微秒，因为那是错误的。）

或者，由于`\&`不受严格的裁判检查，

```
for (@{ $DBI::EXPORT_TAGS{sql_types} }) {
    my $ref = \&{"DBI::$_"};
    printf "%s=%d\n", $_, $ref->();
} 
```

# node.js - azure node.js 辅助角色上的自定义性能计数器

> ID：14904763
> 
> 赞同：2
> 
> 时间：2013-02-15T22:56:26.070
> 
> 标签：node.js, azure

我正在使用 socket.io 在 Azure 工作者角色上构建一个 node.js 项目，并希望监视一些计数器，例如请求计数和成功计数。Azure node.js lib 是否提供此类支持，或者我可以利用任何第三部分库来创建和记录自定义性能计数器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:13:22.550

[测量](https://github.com/felixge/node-measured)支持几种不同类型的指标（量具、计数器、仪表、直方图）。

其他可以在这里找到：[https ://npmjs.org/](https://npmjs.org/)

# php - 同位素wordpress

> ID：14904765
> 
> 赞同：0
> 
> 时间：2013-02-15T22:56:52.843
> 
> 标签：php, jquery, wordpress

我目前正在使用 IKROS 模板在 wordpress 中开发一个网站。我已经达到了我无法理解的程度。我想要帮助开始工作的是对 ISOTOPE 实施 JQUERY BBQ。最终产品将是来自其他页面的可链接类别，可将您带到过滤后的类别页面。我认为让我失望的是 php。我似乎可以将 JQUERY BBQ 集成到我的 wordpress 中。有人在这个领域取得过成功吗？

```
<code><div id="portfolio">

        <ul class="filter">
        <li><a class="active" href="#" data-filter="*">All</a></li>
        <?php 
        $portfolio_categories = get_categories(array('taxonomy'=>'portfolio_category'));
        foreach($portfolio_categories as $portfolio_category)
            echo '<li><a href="#" data-filter=".' . $portfolio_category->slug . '">' . $portfolio_category->name . '</a></li>';
        ?>
    </ul></code> 
```

这是投资组合模板中生成类别链接的行。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T11:02:05.737

您需要更改列表的 html 并应用他的 jQuery，[查看源代码以查看他的 html 和他的 jQuery](http://view-source:http://isotope.metafizzy.co/v1/tests/combo-sort-history.html)

# java - 在 Java 中初始化 final 字段

> ID：14904771
> 
> 赞同：15
> 
> 时间：2013-02-15T22:57:22.443
> 
> 标签：java

我有一个包含许多最终成员的类，可以使用两个构造函数之一对其进行实例化。构造函数共享一些代码，这些代码存储在第三个构造函数中。

```
// SubTypeOne and SubTypeTwo both extend SuperType

public class MyClass {
    private final SomeType one;
    private final SuperType two;

    private MyClass(SomeType commonArg) {
        one = commonArg;
    }

    public MyClass(SomeType commonArg, int intIn) {
        this(commonArg);

        two = new SubTypeOne(intIn);
    }

    public MyClass(SomeType commonArg, String stringIn) {
        this(commonArg);

        two = new SubTypeTwo(stringIn);
    } 
```

问题是这段代码无法编译：`Variable 'two' might not have been initialized.`有人可能会从 MyClass 内部调用第一个构造函数，然后新对象将没有“两个”字段集。

那么在这种情况下，在构造函数之间共享代码的首选方式是什么？通常我会使用辅助方法，但共享代码必须能够设置最终变量，这只能从构造函数中完成。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T23:01:49.470

这个怎么样？（针对更改的问题进行了更新）

```
public class MyClass {

    private final SomeType one;
    private final SuperType two;

    public MyClass (SomeType commonArg, int intIn) {
        this(commonArg, new SubTypeOne(intIn));
    }

    public MyClass (SomeType commonArg, String stringIn) {
        this(commonArg, new SubTypeTwo(stringIn));
    }

    private MyClass (SomeType commonArg, SuperType twoIn) {
        one = commonArg;
        two = twoIn;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T23:04:29.093

您需要确保在每个构造函数中都初始化所有最终变量。我要做的是有一个构造函数来初始化所有变量，并让所有其他构造函数调用它，`null`如果有一个字段没有为其赋值，则传入或传递一些默认值。

例子：

```
public class MyClass {
    private final SomeType one;
    private final SuperType two;

    //constructor that initializes all variables
    public MyClas(SomeType _one, SuperType _two) {
        one = _one;
        two = _two;
    }

    private MyClass(SomeType _one) {
        this(_one, null);
    }

    public MyClass(SomeType _one, SubTypeOne _two) {
        this(_one, _two);
    }

    public MyClass(SomeType _one, SubTypeTwo _two) {
        this(_one, _two);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:01:33.427

您需要做的就是确保“两个”被初始化。在第一个构造函数中，只需添加：

```
two = null; 
```

除非在仅调用第一个构造函数的情况下，您想给它一些其他值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T23:03:04.380

您会收到此错误，因为如果您调用了`MyClass(SomeType oneIn)`,`two`未初始化。

# ruby-on-rails - Rails 辅助方法：嵌套哈希到嵌套 HTML 列表

> ID：14904772
> 
> 赞同：4
> 
> 时间：2013-02-15T22:57:28.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试编写一个 Rails 辅助方法来将嵌套的哈希转换为嵌套的 HTML 列表。

例如：

```
{
  :parent => "foo",
  :children => [
    {
      :parent => "bar",
      :children => [
        {
          :parent => "baz",
          :children => []
        }
      ]
    }
  ]
} 
```

应该变成：

```
<ul>
  <li>foo</li>
  <ul>
    <li>bar</li>
    <ul>
      <li>baz</li>
    </ul>
  </ul>
</ul> 
```

散列可以有任意数量的级别，每个级别可以有任意数量的父级。

请问实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T23:11:19.703

您可以使用递归方法将散列渲染到一组嵌套列表。把它放在你的相关助手中：

```
def hash_list_tag(hash)
  html = content_tag(:ul) {
    ul_contents = ""
    ul_contents << content_tag(:li, hash[:parent])
    hash[:children].each do |child|
      ul_contents << hash_list_tag(child)
    end

    ul_contents.html_safe
  }.html_safe
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T19:08:55.973

Zach Kemp 的回答非常有效地解决了这个问题。如果您正在寻找更通用的东西（您不会知道键名的嵌套哈希），就像我一样，以下模块可能会有所帮助（也在[https://github.com/sjohnson/auto_hash_display](https://github.com/sjohnson/auto_hash_display)与更多细节）：

```
module HashFormatHelper
  # These methods add classes to the HTML structure that are defined in Bootstrap (and can be defined for other CSS frameworks)
  def format_hash(hash, html = '')
    hash.each do |key, value|
      next if value.blank?
      if value.is_a?(String) || value.is_a?(Numeric)
        html += content_tag(:ul, class: 'list-group') {
          ul_contents = ''
          ul_contents << content_tag(:li, content_tag(:h3, key.to_s.underscore.humanize.titleize), class: 'list-group-item')
          ul_contents << content_tag(:li, value, class: 'list-group-item')

          ul_contents.html_safe
        }
      elsif value.is_a?(Hash)
        html += content_tag(:ul, class: 'list-group') {
          ul_contents = ''
          ul_contents << content_tag(:li, content_tag(:h3, key.to_s.underscore.humanize.titleize), class: 'list-group-item')
          inner = content_tag(:li, format_hash(value), class: 'list-group-item')
          ul_contents << inner

          ul_contents.html_safe
        }
      elsif value.is_a?(Array)
        html += format_array(value)
      else
        Rails.logger.info "Unexpected value in format_hash: #{value.inspect}"
        Rails.logger.info "value type: #{value.class.name}"
      end
    end
    html.html_safe
  end

  def format_array(array, html = '')
    array.each do |value|
      if value.is_a?(String)
        html += content_tag(:div, value).html_safe
      elsif value.is_a?(Hash)
        html += format_hash(value)
      elsif value.is_a?(Array)
        html += format_array(value)
      else
        Rails.logger.info "Unexpected value in format_array: #{value.inspect}"
        Rails.logger.info "value type: #{value.class.name}"
      end
    end
    html
  end
end 
```

此代码还可用于显示 XML，方法是将哈希值设置为等于 Hash.from_xml(your_xml_data)，然后将其传递给 format_hash(hash)。

请注意，from_xml 方法可能会去除 XML 标记属性，因此它最适用于没有属性的 XML。

# javascript - 使用 jsoup 解析 JavaScript

> ID：14904776
> 
> 赞同：15
> 
> 时间：2013-02-15T22:58:04.310
> 
> 标签：javascript, java, html, kotlin, jsoup

在一个`HTML`页面中，我想选择一个`javascript`变量的值。
以下是`HTML`页面片段：

```
<input id="hidval" value="" type="hidden"> 
<form method="post" style="padding: 0px;margin: 0px;" name="profile" autocomplete="off">
<input name="pqRjnA" id="pqRjnA" value="" type="hidden">
<script type="text/javascript">
    key="pqRjnA";
</script> 
```

`key`我的目标是使用从该页面读取变量的值`jsoup`。
有可能`jsoup`吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-17T20:43:04.320

由于 jsoup 不是 javascript 库，因此您有两种方法可以解决此问题：

## A. 使用 javascript 库

*   **临：**

    *   完整的 Javascript 支持
*   **缺点：**

    *   附加库/依赖项

## B.使用Jsoup+手动解析

*   **临：**

    *   不需要额外的库
    *   足够简单的任务
*   **缺点：**

    *   不如 javascript 库灵活

这是一个如何`key`使用 jsoup 和一些*“手动”*代码获取的示例：

```
Document doc = ...
Element script = doc.select("script").first(); // Get the script part

Pattern p = Pattern.compile("(?is)key=\"(.+?)\""); // Regex for the value of the key
Matcher m = p.matcher(script.html()); // you have to use html here and NOT text! Text will drop the 'key' part

while( m.find() )
{
    System.out.println(m.group()); // the whole key ('key = value')
    System.out.println(m.group(1)); // value only
} 
```

**输出（使用您的 html 部分）：**

```
key="pqRjnA"
pqRjnA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-14T16:27:46.030

[Kotlin 问题](https://stackoverflow.com/q/65007018/8583692)被标记为重复，并针对此问题。
所以，这就是我使用 Kotlin 的方法：

```
val (key, value) = document
    .select("script")
    .map(Element::data)
    .first { "key" in it } // OR single { "key" in it }
    .split("=")
    .map(String::trim)
val pureValue = value.replace(Regex("""["';]"""), "")
println("$key::$pureValue") // key::pqRjnA 
```

另一个版本：

```
val (key, value) = document
    .select("script")
    .first { Regex("""key\s*=\s*["'].*["'];""") in it.data() }
    .data()
    .split("=")
    .map { it.replace(Regex("""[\s"';]"""), "") }
println("$key::$value") // key::pqRjnA 
```

#### 脚注

要获取文档，您可以执行以下操作：

*   从一个文件：

    ```
    val input = File("my-document.html")
    val document = Jsoup.parse(input, "UTF-8") 
    ```

*   从服务器：

    ```
    val document = Jsoup.connect("the/target/url")
        .userAgent("Mozilla")
        .get() 
    ```

# c# - 为什么下面的代码总是在 if 块里面？

> ID：14904777
> 
> 赞同：-2
> 
> 时间：2013-02-15T22:58:10.260
> 
> 标签：c#

谁能告诉我如何解决这个问题？

```
int a = 3;
if(a != 1 || a!=2 || a!=3 )
{
    //Comes in here ? Why ? When a=3 ?
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T23:03:17.533

你的逻辑是错误的，这是一个常见的错误。当自然地说话时，你会说你希望`if`-block 在`a`不是 1、2 或 3 时执行。然而，自然语言可能会导致混淆和歧义，在将其翻译成正式的布尔表达式时必须小心。在布尔逻辑中，正确的表达式是：

```
if( !(a == 1 || a == 2 || a == 3) ) { ... } 
```

使用[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，我们可以将这个否定重写为：

```
if( a != 1 && a != 2 && a != 3 ) { ... } 
```

在这里，原子 ( `a == 1`,`a == 2`和`a == 3`) 被取反，析取 ( `||`) 变成连词 ( `&&`)。

乍一看，这似乎违反直觉，但仔细观察，这确实是正确的表达是合乎逻辑的。

您的原始表达式将评估为`true`if`a != 1`或 if`a != 2`或 if `a != 3`。显然，如果其中一个原子失败（例如，`a = 1`返回`a != 1`）`false`，另一个原子必须成功（`a != 2`以及`a != 3`何时`a == 1`）。析取 ( `||`) 评估`true`是否（至少）其中一个原子返回`true`。正如我们刚刚展示的，总是至少有一个原子是`true`，因此整个析取总是`true`。这是一个[重言式](http://en.wikipedia.org/wiki/Tautology_%28logic%29)，不完全是我们想要的。

正确的表达式将评估为`true`if`a != 1` *和* `a != 2` *and* `a != 3`。*如果所有*原子都成功，则连词 ( `&&`) 成功。例如，如果，第一个原子失败，因此整个合取失败。这就是我们想要的。*`a == 1`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:00:58.920

因为`a != 1`.

使用`||`(or) 运算符时，当任何条件为 时，代码将进入`if`块`true`。由于条件之一将始终为`true`，因此它将始终进入 if 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:00:55.880

**如果 a 不是 1、a 不是 2或**a 不是 3 ，您要求代码运行。

因此该代码将始终运行，因为没有任何值可以同时为所有这些条件返回 false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T23:00:16.957

它进去是因为你正在使用`or` `||`

所以第一个陈述`a != 1`是真的，它继续下去。

如果您不希望它这样做然后更改`||`为`==`then 它不会进入，直到所有陈述都是真实的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T23:03:08.267

因为`a != 1`和`a != 2`。

```
int a = 3;
if(a != 1 && a!=2 && a!=3 )
{
    // Wont run
} 
```*

# ruby-on-rails - Rails 中的动态选择菜单/级联下拉菜单？

> ID：14904780
> 
> 赞同：2
> 
> 时间：2013-02-15T22:58:23.787
> 
> 标签：ruby-on-rails, ruby, drop-down-menu

有人可以建议使用最佳实践在 Rails 中实现动态选择菜单/级联下拉的指南/教程吗？或者可能是最近围绕同一主题的 Stackoverflow 问题。可能我正在搜索错误的术语。

我看过这个 railscast：[#88 Dynamic Select Menus (revised)](http://railscasts.com/episodes/88-dynamic-select-menus-revised?view=asciicast)但我不相信使用 csv 文件来存储选项是最好的方法。

我发现的有关下拉列表的所有其他内容似乎都不完整或已过时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-26T21:44:51.503

或者，您可能对这个 RESTful Rails 4 解决方案感兴趣：[带有 Rails 4 的动态选择框](http://kernelgarden.wordpress.com/2014/02/26/dynamic-select-boxes-in-rails-4/)。

基本上，选择框是从模型中填充的，控制器添加一个动作来选择一致的数据子集，并且通过 AJAX 请求刷新视图。

# android - 在 AutoFocusCallback 中调用 takePicture 会导致错误 100

> ID：14904782
> 
> 赞同：1
> 
> 时间：2013-02-15T22:58:29.190
> 
> 标签：android, camera, android-camera, autofocus

我遇到了我认为是特定于设备的问题，但我想看看其他人以前是否见过这种行为。下面是我用来在相机活动中捕获 JPEG 的代码：

```
surfaceView.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        camera.autoFocus(new AutoFocusCallback() {

            @Override
            public void onAutoFocus(boolean success, Camera camera) {
                if(success)
                {                           
                    Log.d(TAG, "Focusing...successful.");
                    camera.takePicture(null, null, null, jpegCallback);
                }
                else
                {
                    Log.d(TAG, "Focusing...failed.");
                }

            }

        });
    }
}); 
```

此代码在我的 Nexus 4 上运行良好，但今天下午我在三星 Galaxy S3 上尝试了它，相机服务器崩溃并显示以下错误消息：

```
Focusing...successful.
Camera server died!
ICamera died
Error 100 
```

从 LogCat 中可以看出，失败发生在`camera.takePicture(...)`被调用时（即`jpegCallback`从未被调用）。后来我找了一个朋友用三星 Galaxy Note 试用它，它在他们的手机上运行良好。

我不应该从自动对焦回调中拍照吗？这似乎是放置它的合适位置。这里的任何见解都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:34:55.930

我不久前想出了这个问题，并想让其他人知道如何解决这个问题。导致崩溃的原因是将预览尺寸设置为大于设备的屏幕尺寸。这就是为什么三星 Galaxy S3 会崩溃，而不是 Nexus 4。下面是我更改的相关代码：

```
private Camera.Size getBestPreviewSize(List<Camera.Size> previewSizes, int width, int height) {
                double targetAspect = (double)width / (double)height;

        ArrayList<Camera.Size> matchedPreviewSizes = new ArrayList<Camera.Size>();
        final double ASPECT_TOLERANCE = 0.1;
        for(Size previewSize : previewSizes) {
                double previewAspect = (double)previewSize.width / (double)previewSize.height;

                // Original broken code.
                //if(Math.abs(targetAspect - previewAspect) < ASPECT_TOLERANCE) {
                //        matchedPreviewSizes.add(previewSize);
                //}

                // Working code.
                if(Math.abs(targetAspect - previewAspect) < ASPECT_TOLERANCE &&
                            previewSize.width <= width && previewSize.height <= height) {
                        matchedPreviewSizes.add(previewSize);
                }
        }

        Camera.Size bestPreviewSize;
        if(!matchedPreviewSizes.isEmpty()) {
                bestPreviewSize = Collections.max(matchedPreviewSizes, sizeComparator);
        } else {
                bestPreviewSize = Collections.max(previewSizes, sizeComparator);
        }

        return bestPreviewSize;
}

private Comparator<Camera.Size> sizeComparator = new Comparator<Camera.Size>() {

    @Override
    public int compare(Size lhs, Size rhs) {
        long lhsArea = lhs.height*lhs.width;
        long rhsArea = rhs.height*rhs.width;

        if(lhsArea > rhsArea) {
            return 1;
        } else if(lhsArea < rhsArea) {
            return -1;
        } else {
            return 0;
        }
    }

}; 
```

在上面的代码中，我展示了原始损坏的代码以及导致我的函数尊重设备最大屏幕尺寸的工作代码。这样做修复了各种设备上发生的崩溃。

希望有帮助！

# iphone - Xcode如何将另一个视图控制器的这个布尔值设置为否？

> ID：14904784
> 
> 赞同：0
> 
> 时间：2013-02-15T22:58:29.907
> 
> 标签：iphone, ios, xcode

我的应用程序委托中有这个 bool 函数，我试图在某个视图控制器上返回 no。这是我在视图控制器中的代码，没有错误，但它不会将布尔“开关”返回为否。

```
 [(Appdelegate*)[[UIApplication sharedApplication] delegate]switch]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:53:06.260

如果`switch`是您的应用程序委托中的属性，则您没有为其分配值。例如：

```
[(Appdelegate*)[[UIApplication sharedApplication] delegate] switch]; 
```

将编译没有错误，但它没有做任何事情。

以下将 bool 属性设置`switch`为`NO`：

```
Appdelegate* appDelegate = (Appdelegate*)[[UIApplication sharedApplication] delegate];
appDelegate.switch = NO; 
```

如果`switch`是一个方法，那么您的代码将再次编译而没有错误，但它不会在应用程序委托中设置布尔值。

# tcp - 如何从 Linux 中的用户空间获取 TCP 初始序列号？

> ID：14904786
> 
> 赞同：3
> 
> 时间：2013-02-15T22:58:41.430
> 
> 标签：tcp, linux-kernel

为了跟踪穿越网络的 TCP 会话，我想知道会话的初始序列号。我编写了一些代码来在创建 TCP 会话时简单地将 ISN 复制到 tcp_sock 结构中，然后添加代码将该值复制到由 getsockopt() 返回的 tcp_info 结构中。这似乎可行，但我想知道是否有更好的方法。我看到 snt_isn 和 rcv_isn 存储在结构 tcp_request_sock 中。有没有办法从getsockopt() 中的tp 结构访问tcp_request_sock 结构？

在此先感谢 bvs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T23:15:16.300

不，用户空间无法通过套接字 API（例如，通过 setsockopt 或 tcp_info，...）获取（或设置）序列号。

读取它的唯一方法是使用 tcpdump 捕获跟踪。

# html - 如何访问 MySQL 目录

> ID：14904790
> 
> 赞同：0
> 
> 时间：2013-02-15T22:59:16.460
> 
> 标签：html, directory

我正在使用在 myphpadmin 中应用的这句话在我的服务器中创建一个文件，当然它会创建一个文件

```
SELECT column1, column2
INTO OUTFILE 'outfile.csv'
FIELDS TERMINATED BY ','
FROM table_name; 
```

但文件存储在 var/lib/mysql

我怎样才能从兄弟那里访问那个目录 VAR/LIB/MYSQL 就像我们访问 www 目录之后的域一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:06:34.800

`var/lib/mysql`是没有外部 (www) 访问权限的本地目录。如果您使用的是 phpMyAdmin，则应使用导出功能。

# android-ndk - 使用 NDK 工具链构建 SDL2

> ID：14904791
> 
> 赞同：7
> 
> 时间：2013-02-15T22:59:26.870
> 
> 标签：android-ndk, build-process, sdl, automake, toolchain

我想知道是否有人设法使用 Android NDK(r8d) 的工具链构建了新的 SDL2。

[SDL2 似乎非常接近发布（从昨天开始，它不再是“正在建设中： http](http://hg.libsdl.org/SDL/rev/0a3d2ec7af6d) ://hg.libsdl.org/SDL/rev/0a3d2ec7af6d ）。它带有一个 Android.mk 并且可以很好地编译以下捆绑的 README.android 文件中的说明。我的问题是，是否真的没有可用的基于 automake 的构建可用或者可以在 Android 上编译它，或者我的工具链设置有什么问题？

我已按照位于 $NDK/doc/STANDALONE-TOOLCHAIN.html 的文档说明安装了 NDK 工具链。我正在使用 gcc 4.6。这是我使用的一个环境：

```
#!/bin/sh
export TOOLCHAIN=$HOME/Android/android-14-arm
export PATH=$TOOLCHAIN/bin:$PATH
export SYSROOT=$TOOLCHAIN/sysroot
export CROSS_COMPILE="arm-linux-androideabi"
export CC=$CROSS_COMPILE-gcc
export CXX=$CROSS_COMPILE-g++
export CPP=$CROSS_COMPILE-cpp
export CFLAGS="-march=armv7-a -mfloat-abi=softfp -mfpu=neon"
export LDFLAGS="-march=armv7-a -Wl,--fix-cortex-a8"
echo "Compiler set up for ARM 14" 
```

配置参数：

```
./configure --host=arm-linux-androideabi --prefix=$SYSROOT/usr/local 
```

使用相同的配置，我成功构建了 libjpeg-turbo v8 和 SDL_image。配置脚本识别交叉编译器，并构建 makefile，但是，它发现 X11 支持，看不到 OpenGL ES ... make 失败：

```
In file included from /usr/include/features.h:378:0,
             from /usr/include/sys/types.h:27,
             from ./include/SDL_stdinc.h:35,
... 
```

我检查了配置日志，我不知道“/usr/include”来自哪里。但实际上，生成的 makefile 会将 EXTRA_CFLAGS 中的那一行添加到编译器中。NDK 文档将 --with-sysroot=$SYSROOT 称为可选，我已将其包含在内以查看它是否解决了问题，但这没有帮助。作为最后的努力，我手动编辑了 Makefile，修复了该引用，现在编译器抱怨 X11.h。AFAIK Android 与 X11 无关，所以我猜整个构建树完全不适合与 NDK 一起使用。

我也尝试了不同的配置，在[这里](https://stackoverflow.com/questions/8973582/building-sdl-for-arm-using-android-standalone-toolchain)的旧线程中找到。既没有定义 -DANDROID -mandroid -fomit-frame-pointer 也没有改回 -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -mthumb" 解决了这个问题。

在以前的项目中，我必须刷新 config.guess 和 config.sub 才能让我的编译器被识别。SDL 似乎没有使用这些。此外，没有 Makefile.ac 或 Makefile.am 可以使用 SDL，也没有其他平台的模板可以作为创建我自己的 makefile 的良好起点。另外，我从来不用处理makefile，我真的没有机会解决这些问题。即使它成功了，我也可能需要一个配置工具，因为我不知道 ndk-build 如何在没有配置脚本的情况下安装 SDL2。

将 SDL 源代码与项目一起编译是唯一可行但丑陋的解决方案。我想通过 make install 部署必要的 lib 和头文件。

我希望解决方案是我没有想到的非常简单和明显的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-16T03:14:17.413

此问题已在[http://hg.libsdl.org/SDL/rev/4e57cfd9fca8](http://hg.libsdl.org/SDL/rev/4e57cfd9fca8)得到修复，预计在 2.0.4 版本中出现。请注意，有一些更新的修订版包含一些关于定义的相关修复。

# .htaccess - .htaccess 从一个子文件夹重定向到另一个子文件夹

> ID：14904793
> 
> 赞同：14
> 
> 时间：2013-02-15T22:59:33.837
> 
> 标签：.htaccess, redirect

我知道这听起来像很多其他问题，但我似乎找不到答案。

假设您在：www.domain.com/folderA/folder2/folder3/

我希望它重定向到：www.domain.com/folderB/folder2/folder3/

所以整个结构保持不变..它只是重定向。现在到目前为止我有：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/folderA [NC]
RewriteRule ^(.*)$ /folderB/$1 [R=301,L] 
```

但是当我使用它时，它只会做 www.domain.com/folderB/folderA/folder2/folder3/

我究竟做错了什么？我如何摆脱那个文件夹A？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-15T23:02:47.953

该模式`^(.*)$`还包括前缀`folderA`。您必须`folderA`在模式中明确指定并仅捕获 RewriteRule 中的后半部分。然后你可以删除 RewriteCond

```
RewriteEngine on
RewriteRule ^/?folderA/(.*)$ /folderB/$1 [R,L] 
```

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

# mysql - MySQL MyISAM - 无法向表中添加新列

> ID：14904795
> 
> 赞同：2
> 
> 时间：2013-02-15T22:59:43.837
> 
> 标签：mysql, myisam, alter-table

我有下表：

```
mysql> show create table keyword_links\G
*************************** 1\. row ***************************
       Table: keyword_links
Create Table: CREATE TABLE `keyword_links` (
  `keyword_id` int(11) NOT NULL AUTO_INCREMENT,
  `keyword` tinytext NOT NULL,
  `link` tinytext,
  `weight` smallint(6) NOT NULL DEFAULT '0',
  `class_id` smallint(6) NOT NULL DEFAULT '0',
  `category_id` smallint(6) NOT NULL DEFAULT '0',
  `timestamp` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`keyword_id`),
  KEY `class_id` (`class_id`),
  KEY `category_id` (`category_id`),
  KEY `idx_keyword` (`keyword`(333))
) ENGINE=MyISAM AUTO_INCREMENT=5082 DEFAULT CHARSET=utf8 
```

我正在尝试向其中添加一个新列，但失败了：

```
mysql> ALTER TABLE keyword_links ADD COLUMN list_id INT UNSIGNED NOT NULL DEFAULT 0;
ERROR 1170 (42000): BLOB/TEXT column 'keyword' used in key specification without a key length 
```

列上的索引`keyword`确实具有 333 的键长度，那么为什么它会失败以及如何修复它？

**更新**

我尝试将列上的索引大小`keyword`从 333 减小到 255，现在我可以成功添加新列：

```
ALTER TABLE keyword_links DROP INDEX idx_keyword;
CREATE INDEX index_keyword ON keyword_links (keyword(255));
ALTER TABLE keyword_links ADD COLUMN list_id INT UNSIGNED NOT NULL DEFAULT 0; 
```

但我还是想知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:30:01.213

我假设索引键只允许 255 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:38:42.753

这是因为 myisam 的索引长度限制为 1000 字节（[请参阅此链接](http://mysql.rjweb.org/doc.php/myisam2innodb)）

请注意，这都是关于字节的，一个字符可能需要 2、3 甚至 4 个字节，具体取决于您的编码，并且 INT[将始终为 4 个字节](https://stackoverflow.com/q/5634104/1291428)。

# bash - 将目录的内容打印到具有元素类型的文件

> ID：14904800
> 
> 赞同：0
> 
> 时间：2013-02-15T23:00:28.233
> 
> 标签：bash, terminal

我正在阅读[这篇](http://reviews.cnet.com/8301-13727_7-10402034-263.html)文章，但我不明白如何结合`ls -l /users/Thomas/desktop`将`ls > ~/FILE.txt`桌面的内容保存到桌面（或其他地方）上的文件中。另外，有没有办法保存列出的元素类型（文件或文件夹）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:18:19.053

将`ls`参数与重定向相结合：

```
ls -l /users/Thomas/desktop > ~/FILE.txt 
```

`-p`选项添加类型指示符，显示目录的尾随`/`：

```
ls -lp /users/Thomas/desktop > ~/FILE.txt 
```

`~/FILE.txt`在您的主目录中创建（`echo "$HOME"`这是了解它在哪里的好方法）。

[回答评论中的一个额外问题]：有许多短选项（单字母选项）控制排序顺序：`-t`、和`-S`，具有共同的长格式等效项。此外，指定用于/的时间*类型*。`-U``-X``--sort=time|size|none|extension``--time=atime|access|use`*`ls -t``ls --sort=time`*

# php - 无法让我的 javascript/php onchange 函数工作

> ID：14904803
> 
> 赞同：0
> 
> 时间：2013-02-15T23:00:32.477
> 
> 标签：php, javascript, onchange

我已经在不超过 2 小时前就这个问题发表了一篇文章，但我真的需要尽快完成。

我要做的是在苏格兰创建一个由32个不同位置的下拉容器。一个 div WHERE 位置 = 格拉斯哥。

目前我没有每个位置的 URL。

选择新选项时出现以下消息：“加载结果：成功 ||| 200 OK”

有人可以为我提供这个令人沮丧的难题的最后一块吗？

这是我正在使用的文件：

头文件.php

```
<html>
<head>
<script src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('#location').change(function(){
    //Retrieve Content from the back-end PHP page, and pass the ID selected
    var url = 'location.php?location=' + $(this).val();
    $('#txtHint').load(url, function (response, status, xhr) { alert("Load result: " + status + " ||| " + xhr.status + " " + xhr.statusText); 
    });
  });
});    
</script>

</head>
<body>
    <div id="header">
        <div class="headerLeftContent">
            <select id="location">
                    <option value="Glasgow">Glasgow</option>
                    <option value="x">x</option>
                    <option value="test">test</option>
                    <option value="Edinburgh">Edinburgh</option>
            </select>
            <div id='txtHint'></div>
        </div>          
    </div>

</body>
</html> 
```

位置.php

```
<?php
$connect = mysql_connect('xxx', 'xxx', 'xxx');
$select_db = mysql_select_db('xxx');

$location = $_REQUEST['location'];

$query = "SELECT * FROM podContent WHERE location = '.$location.'";

$result = mysql_query( $query, $connect );

while($row = mysql_fetch_array($result))
{
echo $row['text'];
}

?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:52:55.113

两件事情：

1.  `$query = "SELECT * FROM podContent WHERE location = '.$location.'";`有两个额外的点。应该是`$query = "SELECT * FROM podContent WHERE location = '$location'";`。
2.  在使用`$location`来自用户的值之前，您应该使用[`mysql_real_escape_string()`](http://php.net/manual/function.mysql-real-escape-string.php). 请注意，此函数已弃用，并将在 PHP 的未来版本中删除。您应该查看[`PDO`](http://www.php.net/manual/book.pdo.php)并准备好声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:08:33.353

纠正这个

```
$query = "SELECT * FROM podContent WHERE location = ".$location; 
```

# python - 在python中拆分列表元素

> ID：14904804
> 
> 赞同：0
> 
> 时间：2013-02-15T23:00:34.770
> 
> 标签：python

python中有一个元素列表，格式如下：

```
['96\t00:00:00:19\t-16,894725\t15,201475\t26,976\t52,471\t10,081275\t42,177475\t32,0962']
['97\t00:00:00:19\t-17,007775\t15,198775\t26,979\t52,471\t9,971225\t42,177775\t32,20655']
['98\t00:00:00:19\t-17,010475\t15,204175\t26,977\t52,471\t9,966525\t42,181175\t32,21465']
['99\t00:00:00:19\t-16,9997\t15,1907\t26,981\t52,473\t9,9813\t42,1717\t32,1904']
['100\t00:00:00:20\t-17,0024\t15,17995\t26,979\t52,476\t9,9766\t42,15895\t32,18235'] 
```

更新：

我正在使用以下代码：

```
import os
import csv

dirlisting=os.listdir(os.getcwd())

for fname in dirlisting:
if fname.endswith(".csv"):
    print "Processing: " + fname
    fi=open(fname, 'rb')
    data=fi.read()
    fi.close()
    fo=open(fname, 'wb')
    fo.write(data.replace('\x00', ''))
    fo.close()

    with open(fname, 'rb') as csvfile:
        sreader=csv.reader(csvfile, delimiter=' ')             
        rows=[r for r in sreader]
        for row in range(6, len(rows)):
            print rows[row] 
```

我需要拆分此列表元素或将它们转换为其他形式，以便进一步处理它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:03:11.247

在什么分隔符上？你见过[`split()`](http://docs.python.org/2/library/stdtypes.html#str.split)所有字符串都可用的方法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:22:40.100

如果您`\t`用作分隔符，则应更改该行

```
sreader = csv.reader(csvfile, delimiter=' ') 
```

到

```
sreader = csv.reader(csvfile, delimiter='\t') 
```

无需后处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:15:58.467

我假设您拥有的是一个字符串列表，而不是您在问题中提出的一系列单元素列表。你可以这样做：

```
strings = ['96\t00:00:00:19\t-16,894725\t15,201475\t26,976\t52,471\t10,081275\t42,177475\t32,0962',
  '97\t00:00:00:19\t-17,007775\t15,198775\t26,979\t52,471\t9,971225\t42,177775\t32,20655',
  '98\t00:00:00:19\t-17,010475\t15,204175\t26,977\t52,471\t9,966525\t42,181175\t32,21465',
  '99\t00:00:00:19\t-16,9997\t15,1907\t26,981\t52,473\t9,9813\t42,1717\t32,1904',
  '100\t00:00:00:20\t-17,0024\t15,17995\t26,979\t52,476\t9,9766\t42,15895\t32,18235']
split_strings = [string.split('\t') for string in strings] 
```

这将产生一个列表列表：

```
[['96', '00:00:00:19', '-16,894725', '15,201475', '26,976', '52,471', '10,081275', '42,177475', '32,0962'],
 ['97', '00:00:00:19', '-17,007775', '15,198775', '26,979', '52,471', '9,971225', '42,177775', '32,20655'],
 ['98', '00:00:00:19', '-17,010475', '15,204175', '26,977', '52,471', '9,966525', '42,181175', '32,21465'],
 ['99', '00:00:00:19', '-16,9997', '15,1907', '26,981', '52,473', '9,9813', '42,1717', '32,1904'],
 ['100', '00:00:00:20', '-17,0024', '15,17995', '26,979', '52,476', '9,9766', '42,15895', '32,18235']] 
```

我希望这可以帮助您入门。

# php - 在浏览器级别将数据从一个网站发送到另一个网站

> ID：14904807
> 
> 赞同：1
> 
> 时间：2013-02-15T23:00:48.750
> 
> 标签：php, javascript, html, ajax

我需要在浏览器级别从一个网站向另一个网站发送数据量（不超过 5000 个符号）。我该怎么做？

我可以将任何 PHP 代码放在第一台服务器上，但由于性能和稳定性原因，数据处理不应在服务器级别（不是 SOAP、curl 等）（页面需要快速加载，数据传输应仅在加载后完成）。

所以，在第一台服务器上我有数据，我需要“即时”发送，第二台我有 PHP 服务器来捕捉它。没有必要从服务器捕获响应。

据我所知，AJAX 只能在同一个域上完成。

我知道的一种方法是在第二台服务器上使用 src = some file 创建标签。像 www.test.com/myimage.png?param="testtsttest"。但是 GET 有局限性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T00:34:48.047

您可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)，它允许您在 2 个服务器之间传输 JSON 数据。

# android-layout - Android：从 sdcard 中选择图像并将其显示在 Fragment 中

> ID：14904811
> 
> 赞同：1
> 
> 时间：2013-02-15T23:01:02.770
> 
> 标签：android-layout, android-intent

我正在使用片段（API 4.1），我想让用户按下一个按钮，访问他/她的画廊，选择一个图像，并让该图像在按钮出现的原始片段上显示一个图像视图。我正在使用以下代码：

```
public class FillBox1Frag extends Fragment {
Button addPics, placeBox;
ImageView imgView;
Bitmap b;
Uri photoUri;
LinearLayout fillBoxLayout;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    if (container == null) {
        return null;
    }

    fillBoxLayout = (LinearLayout) inflater.inflate(R.layout.fillbox1_frag,
            container, false);
    newBin = new Bin();
    addPics = (Button) fillBoxLayout.findViewById(R.id.bPics);
    imgView = (ImageView) fillBoxLayout.findViewById(R.id.imageView1);
    addPics.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent picChooser = new Intent(Intent.ACTION_GET_CONTENT,
                    MediaStore.Images.Media.INTERNAL_CONTENT_URI);
            picChooser.setType("image/*");
            startActivityForResult(picChooser, 12345);
        }
    });
    return fillBoxLayout;
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case 12345:
        if (resultCode == 12345) {
            photoUri = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };
            Cursor cursor = FillBox1Frag.this.getActivity()
                    .getContentResolver()
                    .query(photoUri, filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();
            b = BitmapFactory.decodeFile(filePath);
            imgView.setImageBitmap(b);
        }
    }
} 
```

我访问图库，但在选择后，它只是返回到原始片段并且不显示图像。这是我的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/fillbox"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:tag="fillbox" >

<Button
    android:id="@+id/bPics"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="89dp"
    android:background="@drawable/buttonpics" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

我找到了很多处理类似问题的答案，但没有任何东西能够帮助我了解如何使用片段创建这个过程。关于如何让我选择的图像出现在 ImageView 中的任何想法？谢谢您的帮助！

# python-3.x - NameError：未定义全局名称“long”

> ID：14904814
> 
> 赞同：71
> 
> 时间：2013-02-15T23:01:21.150
> 
> 标签：python-3.x, long-integer, nameerror

我有一个 Python 版本 3.3.0，我不知道为什么它不能让我在这里为 b 和 m 做很长时间......我试图在这里查找答案，但没有任何帮助......谢谢

我收到一个错误说

```
NameError: global name 'long' is not defined

power = long(b) % long(m) 
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-02-15T23:02:53.167

在 Python 3.x 中，使用`int`而不是`long`.

来自[Python 3.0 的新增功能，整数](https://docs.python.org/3/whatsnew/3.0.html#integers)：

> *   [PEP 237](https://www.python.org/dev/peps/pep-0237)：本质上，`long`重命名为`int`. 也就是说，只有一种内置整数类型，名为`int`; 但它的行为大多像旧`long`类型。

# jquery - 特定网页的 dom.ready 处理程序

> ID：14904816
> 
> 赞同：0
> 
> 时间：2013-02-15T23:01:23.680
> 
> 标签：jquery, html, client-side

轻视我的挣扎。

*   我有客户端 JS 和 $(function() {...}); 里面的处理程序
*   我有 4 个不同的网页。第1页 第2页 第3页 第4页
*   每个页面都有自己的 dom 元素，每个元素都有客户端 jQuery/JS 处理程序
*   现在我在 dom.ready 处理程序中注册这些回调/处理程序
*   我的问题是 dom.ready 处理程序不区分黑白渲染哪个页面，并将按顺序注册所有页面的所有**回调.** 我不确定我是否应该这样想。

问题;

1.  渲染特定页面时，我可以调用特定的 dom.ready 处理程序吗？
2.  这是一个好习惯吗？

请帮助并轻视我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:24:12.597

虽然它可能不是最好的例子，但过去对我们有用的事情是如果我们在页面上查找特定元素。最简单的做法是给每个页面一个唯一的 ID，然后简单地查找它，例如：

```
<body id="page1">
<script type="text/javascript">

$(function() {

    var el = document.getElementById('page1');

    if (el) {
        // Do only Page 1 stuff...
    }

});

</script>
</body> 
```

# actionscript-3 - 带有 as3 类的 flsh 组件滑块——嗯？

> ID：14904819
> 
> 赞同：0
> 
> 时间：2013-02-15T23:01:34.573
> 
> 标签：actionscript-3, slider

试图将 Flash 组件滑块添加到我的 as 3 类中，但我在网上找不到任何示例。我对我看到的许多时髦的自制滑块感到惊讶。也许flash组件和as 3有问题？如果这是可行的，您能否留下一个便条，以及您可以提供的任何粗略方向。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:40:34.213

[AS3 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/Slider.html#includeExamplesSummary)中的示例应该为您提供所需的信息。

不使用滑块组件的原因：

*   它使您的 SWF 大小增加了 32KB。在文件大小至关重要的情况下，这不是一个很好的选择。
*   编写一个更适合您需求的滑块并不难。

不过，我不会（没有）害怕使用内置的滑块组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T20:12:38.057

在编译之前，您确实需要确保该组件在您的 FLA 库中。在你的 AS 中包含代码是行不通的，因为我相信 Flash 需要所有的视觉元素。

# entity-framework - 如何在 Visual Studio 2012 Express for Web 中添加 mysql 数据源

> ID：14904823
> 
> 赞同：0
> 
> 时间：2013-02-15T23:02:02.680
> 
> 标签：entity-framework, visual-studio-2012, mysql-connector, connector-net

我正在尝试将 mysql 连接添加到我的 asp.net mvc 4 项目，但我在数据源窗口中看不到它。

在为 web 安装了 Visual Studio 2012 Express 之后，我通过 nuget 添加了 mysql Connector/Net。我想添加到 mysql db 的新连接，但我确实在数据源窗口列表中看到了 mysql 数据源。搜索后我意识到我有 v6.6.4 并且它支持 6.6.5 所以我从 nuget 卸载它并从 mysql 网站安装 6.6.5（完整安装）。它没有帮助..我也尝试卸载并重新安装它，但它没有改变任何事情。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:08:24.193

通过 nuget 添加 Connector/NET 不会安装任何 Visual Studio 集成内容，因为您需要运行 Connector/NET 安装程序（可在[http://dev.mysql.com/downloads/connector/net/ 获得](http://dev.mysql.com/downloads/connector/net/)）。

但是，由于 Microsoft 的法律限制，无法与 Visual Studio Express 版本集成（您需要 Visual Studio 的非 Express 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:57:57.543

问题是它是一个快速版本。我安装了一个非快递版本，它工作。

# bash - Bash：将具有相应名称的数字相加

> ID：14904825
> 
> 赞同：0
> 
> 时间：2013-02-15T23:02:11.960
> 
> 标签：bash

我有一个看起来像这样的文件（已排序）：

```
alma-court, 1, 0, 8
alma-court, 4, 2, 24
atlantic-house, 99, 1, 340
diamond, 2, 2, 16
iminds-zuiderpoort, 0, 1, 0
north-plaza, 18, 3, 718
north-plaza, 90, 2, 19 
```

我想为每个相同的第一列做一个垂直总计。

所以对于alma-court，我想得到1+4、0+2和8+24的总数。atlantic-house 已经很好了，因为它是唯一出现的。而北广场应该是18+90、3+2和718+19。

并像这样打印所有内容：

```
alma-court, 5, 2, 32
atlantic-house, 99, 1, 340
... 
```

有人可以给我使用 Bash 的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:55:37.150

你可以以此为基础`bash script`

```
set -u
tr -d "," < data2 | while read name col1 col2 col3 ; do
    echo name=$name col1=$col1 col2=$col2 col3=$col3
done 
```

`data2`您的排序文件在哪里。

它给出了以下内容，从那里您应该能够检测到“名称”的变化并进行数学计算。

```
name=alma-court col1=1 col2=0 col3=8
name=alma-court col1=4 col2=2 col3=24
name=atlantic-house col1=99 col2=1 col3=340
name=diamond col1=2 col2=2 col3=16
name=iminds-zuiderpoort col1=0 col2=1 col3=0
name=north-plaza col1=18 col2=3 col3=718
name=north-plaza col1=90 col2=2 col3=19 
```

这些事情通常在 Perl/Python/Awk 中做得更好。

* * *

## 编辑添加 Perl 版本以确保完整性。

* * *

```
use strict;
my %names;
while(<>) {
    my @F = split(',');
    my $name = shift @F;
    foreach my $x (0..$#F) {
        $names{$name}[$x] += $F[$x];
    }
}
foreach my $key ( sort keys %names ){
    print $key, " ", join(" ", @{$names{$key}}), "\n";
} 
```

使用 as`perl myperl.pl < yourdata`给

```
alma-court 5 2 32
atlantic-house 99 1 340
diamond 2 2 16
iminds-zuiderpoort 0 1 0
north-plaza 108 5 737 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T00:48:16.733

使用`awk`（除非您知道或想学习 Perl 或 Python）：

```
awk '{ sum[$1,0] += $2; sum[$1,1] += $3; sum[$1,2] += $4; names[$1] = 1; }
     END { for (name in names)
               printf "%s %d, %d, %d\n", name, sum[name,0], sum[name,1], sum[name,2];
         }' <<EOF
alma-court, 1, 0, 8
alma-court, 4, 2, 24
atlantic-house, 99, 1, 340
diamond, 2, 2, 16
iminds-zuiderpoort, 0, 1, 0
north-plaza, 18, 3, 718
north-plaza, 90, 2, 19
EOF 
```

输出：

```
iminds-zuiderpoort, 0, 1, 0
alma-court, 5, 2, 32
north-plaza, 108, 5, 737
atlantic-house, 99, 1, 340
diamond, 2, 2, 16 
```

如果您希望名称按特定顺序排列，请对输出进行排序。请注意，名称包含尾随逗号，因此打印格式不会在名称后添加逗号。

* * *

纯`bash`(4.x) 实现

```
{
declare -A sum
declare -A names

IFS=,
while read name v1 v2 v3
do
    names[$name]="$name"
    ((sum[${name}1] += $v1))
    ((sum[${name}2] += $v2))
    ((sum[${name}3] += $v3))
done 

for name in "${names[@]}"
do
    printf "%s, %d, %d, %d\n" $name ${sum[${name}1]} ${sum[${name}2]} ${sum[${name}3]}
done
} <<EOF
alma-court, 1, 0, 8
alma-court, 4, 2, 24
atlantic-house, 99, 1, 340
diamond, 2, 2, 16
iminds-zuiderpoort, 0, 1, 0
north-plaza, 18, 3, 718
north-plaza, 90, 2, 19
EOF 
```

输出：

```
diamond, 2, 2, 16
atlantic-house, 99, 1, 340
north-plaza, 108, 5, 737
alma-court, 5, 2, 32
iminds-zuiderpoort, 0, 1, 0 
```

幸运的是，`awk`和`bash`脚本的输出是相同的，给出或接受数据的排序顺序。

该`bash`脚本使用关联数组，这是 4.x 的一个特性，在3.x`bash`中不存在。`bash`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T01:08:53.097

```
groups=( $( cut -d ',' -f 1 count.txt | sort -u ) )

for group in "${groups[@]}"
do
  grep $group count.txt | awk '{ sum1+=$2; sum2+=$3; sum3+=$4;} END {print $1 " " sum1 ", " sum2 ", " sum3}'
done

anew@buddha:~/dev/so$ bash so.sh 
alma-court, 5, 2, 32
atlantic-house, 99, 1, 340
diamond, 2, 2, 16
iminds-zuiderpoort, 0, 1, 0
north-plaza, 108, 5, 737 
```

# ios - 如何使 NSSortDescriptor for Array 工作？

> ID：14904827
> 
> 赞同：1
> 
> 时间：2013-02-15T23:02:19.340
> 
> 标签：ios, objective-c, nsarray, nssortdescriptor

我设法创建了一个`Array`对象`MyLocation`，它们的距离属性设置在`tabBarController`. 在我的第二个标签中，我得到了这样的结果`viewDidLoad`：

```
[self setAnnotationsToSort:myDelegate.annotationsToSort]; 
```

在这一行之后，我调用了这个方法：

```
-(void)sort{
    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"distance" ascending:YES] autorelease];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    NSArray *sortedArray;
    sortedArray = [self.annotationsToSort sortedArrayUsingDescriptors:sortDescriptors];
    [self.tableView reloadData];
} 
```

这应该对我的`Array`. 但是，我`tableView`目前加载的 , 的未排序`Array`版本`self.annotationsToSort`。如何重新加载`tableView`但强制它使用新的`sortedArray`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T23:05:07.113

你没有做任何事情`sortedArray`。尝试

```
self.annotationsToSort = [self.annotationsToSort sortedArrayUsingDescriptors:sortDescriptors]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:05:54.977

称呼：

`self.annotationsToSort = sortedArray;`

在你打电话之前`[self.tableView reloadData];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T00:12:00.350

我错过了这一步：

```
self.annotationsToSort = [(NSArray*)sortedArray mutableCopy]; 
```

多谢你们

# c# - 从 SQL Server 读取数据的通用函数

> ID：14904829
> 
> 赞同：0
> 
> 时间：2013-02-15T23:02:21.030
> 
> 标签：c#, .net

可以说我有两个看起来像这样的类。

```
class Foo1
{
   public String P1 { get; set; }
   public String P2 { get; set; }
}

class Foo2
{
   public String P3 { get; set; }
   public String P4 { get; set; }
} 
```

**P1、P2、P3 和 P4**没有任何关系。与**Foo1**和**Foo2**相同。它们代表完全不同的对象。

我有两个数据库表，其中包含 Foo1 和 Foo2 对象的列表。我必须创建一个 `List<Foo1>`和`List<Foo2>`

返回 Foo1 和 Foo2 的存储过程的输入是不同的。

这是我的问题-我想创建一个通用函数，该函数将连接到数据库并根据需要获取 Foo1 或 Foo2 列表

最初我想到了这样的事情

```
internal static SqlDataReader GetData(String Proc,NameValueCollection InputParams,SqlConnection conn, ref String Err)
{

    using (SqlCommand cmd = conn.CreateCommand())
    {
        try
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = Proc;
            conn.Open();

            SqlCommandBuilder.DeriveParameters(cmd);

            foreach (SqlParameter p in cmd.Parameters)
            {
                if (p.Direction == ParameterDirection.Input)
                {

                    if (InputParams[p.ParameterName.ToLower().Substring(1)] != String.Empty)
                    {
                        p.Value = InputParams[p.ParameterName.ToLower().Substring(1)];
                        p.DbType = DbType.AnsiString;
                    }
                    else
                    {
                        Err += "<argumentnotfound>" + p.ParameterName + "</argumentnotfound>";                                    
                    }
                }
                else p.Value = DBNull.Value;

            }
            return cmd.ExecuteReader();
        }
        catch (Exception e)
        {
            return null;
        }       
    }   
} 
```

我不喜欢在此函数之外返回 SqlDataReader 或创建和关闭 SqlConnection 的想法。

理想情况下，我想在此函数中遍历“阅读器”对象，但返回`List<Foo1>`or `List<Foo2>`。我能想到的一个解决方案是

```
 internal static List<Object> GetData(NameValueCollection InputParams, ref String Err, String ClassName, String Proc)
{
    List<Object> [] objectlist = new List<Object>();
    using (SqlConnection conn = getConnection())
    {
        using (SqlCommand cmd = conn.CreateCommand())
        {
            try
            {
                /*
                    ~~ Same as before
                */
                SqlDataReader reader =  cmd.ExecuteReader();
                while(reader.Read())
                {

                    if(ClassName == "Foo1")
                    {
                        Foo1 f = new Foo1();
                        f.P1 = reader["p1"].ToString();
                        objectList.Add(f1);
                    }
                    else if(ClassName == "Foo2")
                    {
                        /* Create and initialize Foo2 object*/
                        objectList.Add(f2);
                    }

                }
                return objectList;
            }
            catch (Exception e)
            {

            }
            finally
            {
                conn.Close();
            }
        }
    }

    return null;
} 
```

有更好/优雅的方法吗？

**编辑**

我忘了提到的是——我的最终目标是为来自 Javascript的**AJAX**调用创建**JSON 。**我的计划是遍历 Foo1 和 Foo2 对象列表来为每个请求创建 Json 数据。

 **我认为我可以在存储过程中创建 JSON 并将其作为 varchar(max) 返回并使用 JSON2.js 在客户端创建 JSOn 对象。**我在这里看到的缺点是 varchar 的 8000 字符限制。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:14:53.107

我认为您不会购买太多试图将其通用化。`Foo1`在创建和`Foo2`创建/关闭`Connection`和的过程之间真正共同的唯一部分`DataReader`。他们将有不同的 SQL 命令和不同`DataReader`的类之间的映射。

我的建议是要么使用已经抽象出数据库垃圾的 NHibernate 或实体框架之类的库，要么抽象出这些部分并`Foo1`拥有`Foo2`从`DataReader`. 否则，您最终会得到一堆开关，这些开关会根据您尝试创建的对象类型（这是您要走的路）或使用反射自动将属性映射到数据库列来更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:06:57.147

不幸的是，我不是专家，但我想我明白你想要做什么。我的建议（尽管它可能不是最好的）是创建一个数据类型的枚举，然后在通用函数中搜索它以查找提交，然后您可以将表名用于您输入的字符串。

我使用类似的方法来存储这种性质的信息，它看起来像这样......

功能：

```
 public UInt32 getKeyCode(string Key)
    {
        Constants.KeyboardControls keynum;
        if (Enum.TryParse<Constants.KeyboardControls>(Key, true, out keynum))
        {
            return (UInt32)(keynum);
        }
        else
        {
            return new UInt32();
        }
    } 
```

枚举：

```
 public enum KeyboardControls : uint
    {
        F1 = 0x70,
        F2 = 0x71,
        F3 = 0x72,
        F4 = 0x73,
        F5 = 0x74,
        F6 = 0x75,
        F7 = 0x76,
        F8 = 0x77,
        F9 = 0x78,
        F10 = 0x79,
        F11 = 0x7A,
        F12 = 0x7B,
        left = 0x25,
        up = 0x26,
        right = 0x27,
        down = 0x28
    } 
```

我希望这至少会有所帮助，您可以在枚举中列出任何对象，只需将 uint 更改为您的对象类型，左侧几乎是字符串。**

# http - AngularJS服务http成功函数使用错误的“this”范围

> ID：14904830
> 
> 赞同：14
> 
> 时间：2013-02-15T23:02:41.377
> 
> 标签：http, service, angularjs

a 的成功函数`$http.put`无权访问`this`它在内部被调用的服务范围。我需要在 PUT 请求的回调中更新服务的属性。

这是我在服务中尝试做的一个简化示例：

```
var myApp = angular.module('myApp', function($routeProvider) {
// route provider stuff
}).service('CatalogueService', function($rootScope, $http) {
    // create an array as part of my catalogue
    this.items = [];

    // make a call to get some data for the catalogue
    this.add = function(id) {
        $http.put(
            $rootScope.apiURL,
            {id:id}
        ).success(function(data,status,headers,config) {
             // on success push the data to the catalogue
             // when I try to access "this" - it treats it as the window
             this.items.push(data);
        }).success(function(data,status,headers,config) {
            alert(data);
        });
    }
} 
```

对不起，如果JS中有一些错误，主要是我如何从成功回调内部访问服务范围？

**编辑**：虽然这个问题的答案是正确的，但我改用`factory`了 Josh 和 Mark 推荐的方法

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-15T23:08:43.367

据我所知，你不能。但无论如何我都不会尝试以这种方式运行服务。这是一种更清洁的方法：

```
.factory('CatalogueService', function($rootScope, $http) {
  // We first define a private API for our service.

  // Private vars.
  var items = [];

  // Private methods.
  function add( id ) {
    $http.put( $rootScope.apiURL, {id:id} )
    .success(function(data,status,headers,config) { items.push(data); })
    .then(function(response) { console.log(response.data); });
  }

  function store( obj ) {
    // do stuff
  }

  function remove( obj ) {
    // do stuff
  }

  // We now return a public API for our service.
  return {
    add: add,
    store: store,
    rm: remove
  };
}; 
```

这是在 AngularJS 中开发服务的一种*非常常见*`this`的模式，在这些情况下不需要任何使用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-16T18:32:58.697

`that`在分配给的变量（通常称为 ）上创建一个闭包，`this`以便您的回调函数可以访问您的服务对象：

```
app.service('CatalogueService', function($rootScope, $http) {
    var that = this;
    ...
        ).success(function(data,status,headers,config) {
          that.items.push(data); 
```

这是一个使用 $timeout 而不是 $http 的[Plunker](http://plnkr.co/edit/eOA3skxTPm2K3RjrdxZo?p=preview)来演示。

# codeigniter-2 - 在 Codeigniter 中隐藏默认语言 ID

> ID：14904840
> 
> 赞同：0
> 
> 时间：2013-02-15T23:03:15.837
> 
> 标签：codeigniter-2

我正在使用 Codeigniter 2，我想知道如何隐藏默认语言的隐藏语言 ID：`www.domain.com/page.html`对于其他语言，我可以让它像正常一样`www.domain.com/es/page.html`，，`www.domain.com/fr/page.html`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:03:48.857

嗨使用这个语言库可以解决这个问题

[多语言库](http://ellislab.com/forums/viewthread/225196/)

# xcode - 在 IOS6.1 上为 iPad 存储“动态”生成的 PDF

> ID：14904844
> 
> 赞同：0
> 
> 时间：2013-02-15T23:03:32.057
> 
> 标签：xcode, ipad, pdf

我正在尝试使用 xcode 4.6 从 iPad 应用程序创建 PDF 报告。我知道在模拟器上运行时正在创建一个有效的 pdf 文件，因为我可以将其挖掘出来并进行预览。注释掉的代码就是这样做的。问题是我不能把它写在我可以在 iPad 上找到的地方。

我尝试改用 UIGraphicsBeginPDFContextToData 并尝试将图像写到 PhotoAlbum 中。这里的问题是，当我将 NSMutableData 转换为图像时，它返回 nil。

这是代码。感谢你给与我的帮助。

```
- (IBAction)makePDF:(UIButton *)sender
{
    CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, (CFStringRef)self.labelCopyright.text, NULL);

    if (currentText)
    {
        CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);
        if (framesetter)
        {
//            NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, //NSUserDomainMask, YES) objectAtIndex:0];
//            NSString *pdfPath = [rootPath stringByAppendingPathComponent:@"Nick.pdf"];
//            NSLog(@"pdf is at %@",pdfPath);
//            UIGraphicsBeginPDFContextToFile(pdfPath, CGRectZero, nil);
            NSMutableData *data = [[NSMutableData alloc] initWithCapacity:100000];
            UIGraphicsBeginPDFContextToData(data, CGRectZero, nil);
            CFRange currentRange = CFRangeMake(0, 0);
            NSInteger currentPage = 0;
            BOOL done = NO;

            do
            {
                UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 612, 792), nil);
                currentPage++;
//                [self drawPageNumber:currentPage];

                currentRange = [self renderPage:currentPage withTextRange:currentRange andFramesetter:framesetter];               
                if (currentRange.location == CFAttributedStringGetLength((CFAttributedStringRef)currentText)) done = YES;
            }
            while (!done);
            UIGraphicsEndPDFContext();
            UIImage* image = [UIImage imageWithData:data];
            assert(image);
            UIImageWriteToSavedPhotosAlbum(image, self, nil, nil);
            CFRelease(framesetter);
        }
        else NSLog(@"Could not create the framesetter needed to lay out the atrributed string.");
        CFRelease(currentText);
    }
    else NSLog(@"Could not create the attributed string for the framesetter");
}

- (CFRange)renderPage:(NSInteger)pageNum withTextRange:(CFRange)currentRange andFramesetter:(CTFramesetterRef)framesetter
{
    CGContextRef currentContext = UIGraphicsGetCurrentContext();
    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);
    CGRect frameRect = CGRectMake(72, 72, 468, 648);
    CGMutablePathRef framePath = CGPathCreateMutable();

    CGPathAddRect(framePath, NULL, frameRect);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);

    CGPathRelease(framePath);
    CGContextTranslateCTM(currentContext, 0, 792);
    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CTFrameDraw(frameRef, currentContext);
    currentRange = CTFrameGetVisibleStringRange(frameRef);
    currentRange.location += currentRange.length;
    currentRange.length = 0;
    CFRelease(frameRef);

    return currentRange;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:42:08.303

不要将 PDF`NSMutableData`写入对象，而是使用`UIGraphicsBeginPDFContextToFile`.

第一个参数是文件路径。最好的地方是`Documents`目录。然后有许多不同的方法可以将文件从应用程序中取出：

1.  iTunes 文件共享
2.  电子邮件
3.  iCloud
4.  发送到第三方服务器（Dropbox、Box、Google Drive 等）
5.  使用 .在另一个 iOS 应用程序中打开`UIDocumentInteractionController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T05:48:06.263

将可变数据保存到您的文档目录

`[data writeToFile:filePath atomically:YES]`

这是一个例子：

```
+(void) saveData: (NSData*) data ToFileName: (NSString*) filename {

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent: filename];

    // instructs the mutable data object to write its context to a file on disk
    [data writeToFile:documentDirectoryFilename atomically:YES];
    //NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
} 
```

至于在设备上显示生成的 PDF，该`UIWebView`对象支持从`NSData`. 这是一个例子：

```
[self.webView loadData:pdfData MIMEType:@"application/pdf" textEncodingName:@"utf-8" baseURL:nil]; 
```

也可以将`NSData`对象附加到电子邮件。这是一个例子：

```
//Check if we can send e-mails
if ([MFMailComposeViewController canSendMail]) {

    //Create the Email view controller
    MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
    controller.mailComposeDelegate = self;

    //Set the subject and body
    [controller setSubject:@"Email Subject"];
    [controller setMessageBody:@"Email body" isHTML:NO];

    //Set the email address
    [controller setToRecipients:@"test@test.com"];

    //Add the current PDF as an attachment
    NSString *fileName = @"file.pdf";

    [controller addAttachmentData:self.retrievedPDF mimeType:@"application/pdf" fileName:fileName];

    // show the email controller modally
    [self.navigationController presentModalViewController: controller animated: YES];

} 
```

# php - php foreach 无法与爆炸一起正常工作

> ID：14904845
> 
> 赞同：1
> 
> 时间：2013-02-15T23:03:40.533
> 
> 标签：php, foreach, explode

好的，下面有一些 php 代码。

```
$user_pass = "
vortex90:OPFY4MB8
jimmy3:3M7ISWof
dave-ish-mental:YEnMMXua
cindybaby:rRHxrErp
claire-x:H4VrT8Xx
icemonster:ODId9N17
";

$token = 'token';    
$ex = explode("\r", $user_pass);

foreach ($ex as $info) {
   print "username=" . str_replace(":", "&password=", $info) . "&token=" . $token . "\n";
} 
```

我想要 foreach() 做的是为每个爆炸显示

```
username=username&password=password&token=token 
```

但下面是返回的内容。

```
vortex90&password=OPFY4MB8
jimmy3&password=3M7ISWof
dave-ish-mental&password=YEnMMXua
cindybaby&password=rRHxrErp
claire-x&password=H4VrT8Xx
icemonster&password=ODId9N17 
```

为什么它没有按预期返回？欢迎所有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:25:52.467

这对我有用，最好使用 PHP_EOL：

```
$token = "bla";
$user_pass = "
vortex90:OPFY4MB8
jimmy3:3M7ISWof
dave-ish-mental:YEnMMXua
cindybaby:rRHxrErp
claire-x:H4VrT8Xx
icemonster:ODId9N17
";

$explode = explode(PHP_EOL, $user_pass);

foreach($explode as $i) {
$replace_shit  = str_replace(array("\r","\n",":"), array("","","&password="), $i);
$user_info = "username=".$replace_shit."&token=".$token."<br>\n";

echo $user_info;
} 
```

演示：[http ://sandbox.onlinephpfunctions.com/code/02f6663f7fa69c158a90fde2ab421cf52a78f7ce](http://sandbox.onlinephpfunctions.com/code/02f6663f7fa69c158a90fde2ab421cf52a78f7ce)

# c# - 将 C# 字符串解析为数组/SQL 数据库

> ID：14904851
> 
> 赞同：0
> 
> 时间：2013-02-15T23:04:31.180
> 
> 标签：c#, sql, sql-server-2008, fileparsing

我有一堆格式如下的文件：

```
20130201:14:58:47 I search: xx ('ID'= (xxxxxxxx) )
20130201:14:58:56 I request: search | For ID | Search
20130201:14:58:56 I search: xx ('ID'= (xxxxxxx) ) 
```

C# 中是否有类似于 python 中称为 restkey 的东西？我想获取前三个项目（日期时间、我（称为操作）、搜索/请求）并将每个项目插入到 SQL 表中它们自己的列中，然后在第 4 列中放入该行的其余部分。

在 python 中，这很容易，但我无法处理我必须跳过的所有箍，才能将其插入到我的 sql 表中。所以我转向了 C#，在那里连接到 SSMS 更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:37:45.690

尽管`String.Split()`这可能是一种很好且简单的方法，但我更喜欢使用`Regex`这种解析方式。在这种情况下，像这样的模式：

`(?<DateTime>\d{8}\:\d{2}\:\d{2}\:\d{2})\s(?<Action>\w)\s(?<SearchOrRequest>search|request)\:\s(?<RestOfTheLine>.*)`

为您提供所需的一切，很好地分为“DateTime”、“Action”、“SearchOrRequest”和“RestOfLine”匹配组。

```
var pattern = "(?<DateTime>\d{8}\:\d{2}\:\d{2}\:\d{2})\s(?<Action>\w)\s(?<SearchOrRequest>search|request)\:\s(?<RestOfTheLine>.*)";
var regex = new Regex(pattern);
var match = regex.Match(inputString);

var theDate = match.Groups["DateTime"].Value;
var theAction = match.Groups["Action"].Value;
var theChoice = match.Groups["SearchOrRequest"].Value;
var theRest = match.Groups["RestOfTheLine"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:15:20.387

使用 string.Split 方法

```
string myString = "20130201:14:58:47 I search: xx (\'ID\'= (xxxxxxxx) )"

string[] strarr = myString.split(' ');

string theLetterIVariableThing = strarr[1];

string iddate = strarr[0];

StringBuilder sb = new StringBuilder();

for (int i = 1; i < strarr.Length; i++)
{
    sb.Append(strarr[i]);
    sb.Append(" ");
}

string trailingText = sb.ToString();

string id = iddate.split(':')[0];

sb.Clear();

for (int i = 1; i < 4; i++)
{
    sb.Append(iddate.split(':'))[i];
}

string date = sb.ToString(); 
```

我认为这会奏效，但这可能是很长的路要走。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:33:37.940

您可以使用 .NET 函数[String.Split()](http://msdn.microsoft.com/en-us/library/b873y76a%28v=vs.100%29.aspx)来实现。

假设您的日期字符串是固定长度的，这应该有效：

```
 //string inputStr = "20130201:14:58:47 I search: xx ('ID'= (xxxxxxxx) )";
        //string inputStr = "20130201:14:58:56 I request: search | For ID | Search";
        string inputStr = "20130201:14:58:56 I search: xx ('ID'= (xxxxxxx) )";

        string dateStr = inputStr.Substring(0, 17);
        string[] splitStr = inputStr.Substring(18).Split(new char[] { ':' });

        string actionStr = splitStr[0].Substring(0, splitStr[0].IndexOf(' '));
        string userStr = splitStr[0].Substring(2);
        string restStr = splitStr[1].TrimStart();

        // print out what we parsed
        Console.WriteLine(inputStr);
        Console.WriteLine(dateStr);
        Console.WriteLine(actionStr);
        Console.WriteLine(userStr);
        Console.WriteLine(restStr); 
```

输出：

```
20130201:14:58:56 I search: xx ('ID'= (xxxxxxx) )
20130201:14:58:56
I
search
xx ('ID'= (xxxxxxx) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T23:36:30.017

我尝试了一种稍微不同的方法。我创建了一个控制台程序，可以将这些文件转换为完全限定的 csv 文件。然后你可以很容易地使用 ssms 导入到 sql 中。

```
static void Main(string[] args)
    {
        if (args.Length == 2)
        {
            using (StreamWriter sw = new StreamWriter(args[1]))
            {
                using (StreamReader sr = new StreamReader(args[0]))
                {
                    String line;

                    while ((line = sr.ReadLine()) != null)
                    {
                        int index = 0;
                        int oldIndex = 0;
                        string dateTime = null;
                        string action = null;
                        string task = null;
                        string details = null;

                        index = line.IndexOf(' ', oldIndex);
                        dateTime = line.Substring(oldIndex, index - oldIndex);
                        oldIndex = index + 1;

                        index = line.IndexOf(' ', oldIndex);
                        action = line.Substring(oldIndex, index - oldIndex);
                        oldIndex = index + 1;

                        index = line.IndexOf(':', oldIndex);
                        task = line.Substring(oldIndex, index - oldIndex);
                        oldIndex = index + 1;

                        details = line.Substring(oldIndex + 1);

                        sw.WriteLine("\"{0}\",\"{1}\",\"{2}\",\"{3}\"", dateTime, action, task, details);
                    }
                }

            }
        }
        else
        {
            Console.WriteLine("Usage: program <input> <output>");
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T23:46:47.820

在这种情况下，正则表达式可能是正确的使用方式。

```
var testVectors = new[]
{
    "20130201:14:58:47 I search: xx ('ID'= (xxxxxxxx) )",
    "20130201:14:58:56 I request: search | For ID | Search",
    "20130201:14:58:56 I search: xx ('ID'= (xxxxxxx) )"
};

var expression = @"^(?<TimeStamp>[0-9]{8}(:[0-9]{2}){3}) (?<Action>[^ ]+) (?<Type>search|request): (?<Rest>.*)$";

var regex = new Regex(expression);

foreach (var testVector in testVectors)
{
    var match = regex.Match(testVector);

    Console.WriteLine(match.Groups["Timestamp"]);
    Console.WriteLine(match.Groups["Action"]);
    Console.WriteLine(match.Groups["Type"]);
    Console.WriteLine(match.Groups["Rest"]);
} 
```

使用的表达式做了一些假设——你所说的动作是一个不包含任何空格的字符序列，并且只是`search`我`request`所说的类型的有效值。但是，如果任何假设不成立，采用该表达式应该很容易。

# ios - 在 iOS 上使用 NEON 改进代码 - 使用 VCEQ 然后 VBIT

> ID：14904852
> 
> 赞同：2
> 
> 时间：2013-02-15T23:04:36.247
> 
> 标签：ios, arm, neon

我正在编写一个类似直方图的函数，它查看矢量数据，然后根据元素最接近的范围将元素放入预定义的“直方图”桶中。

我显然可以使用 if 条件来做到这一点，但我正在尝试使用 NEON 来改进它，因为这些是图像缓冲区。

一种方法是先使用 VCEQ，然后使用 VBIT，但遗憾的是我在 neon 的标题中找不到 VBIT。或者，我认为我可以获取 VCEQ 结果并使用 1 的向量进行异与运算，然后使用 VBIF :-) 但 VBIF 也不存在！

这里有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:19:09.380

`VBIT`, `VBIF`, 并且`VBSL`都执行相同的操作，直到源的排列；您可以使用`vbsl*`内在函数来获取三个操作中的任何一个。

# image - 使用 kineticjs 保存图像的用户友好方法

> ID：14904853
> 
> 赞同：0
> 
> 时间：2013-02-15T23:04:36.777
> 
> 标签：image, kineticjs, save

有一个关于如何使用 kineticJS 更轻松地保存图像的问题，顺便说一下，它被证明是一个很棒的框架。有了它，我创建了这个应用程序，使我们的教授开发课程的教师能够创建教室地图并将其保存为图像：

[http://courses.edtechleaders.org/html_cores/trainingcores/multimedia/classroom_app/](http://courses.edtechleaders.org/html_cores/trainingcores/multimedia/classroom_app/)

问题是当包含图像的新窗口打开时，很多老师都会遇到问题。有些最终会阻止窗口、保存错误的文件或找不到文件。我想知道是否有办法打开文件引用窗口（或出现保存按钮），以便用户可以通过单击将图像保存到他/她的本地计算机，而无需处理弹出窗口。我尝试从这里处理一些代码 -

[http://greenethumb.com/article/1429/user-friendly-image-saving-from-the-canvas/](http://greenethumb.com/article/1429/user-friendly-image-saving-from-the-canvas/)

但是我不断收到关于我设置的 PHP 文件的“找不到文件”消息和其他神秘的错误消息。所以我正在寻找一个我们知道与 kineticJS 很好地融合的解决方案（并希望使用最少甚至没有 php。）任何帮助将不胜感激！

谢谢！

内文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T17:46:25.547

这些天来，许多浏览器不推荐并且不支持弹出窗口。

此外，您无法选择将图像保存在客户端计算机上的位置。这是一个很大的安全问题。

想想看，如果你点击这个链接，在用户的机器上保存一个密码程序。严重的，对吧？相反，我会推荐以下步骤。

1.  `div`在 html 的末尾或任何地方添加一个隐藏对话框

    ```
    <div id="popup"></div> 
    ```

2.  创建一个图像并添加到此弹出窗口，然后使用 JQuery UI 显示它。

    ```
    stage.toDataURL({
       callback: function (dataUrl) {
          $("#popup").html( $("<img />").attr("src", dataUrl) );
          $("#popup").append("To save image, right-click, Save Image As");
          $("#popup").dialog();
        },
        mimeType: 'image/png',
        quality: 1
    }); 
    ```

3.  我没有测试上述内容，但根据我的经验，它应该可以工作。

# html - 如何使用 CSS 制作不同的翻转动画？

> ID：14904854
> 
> 赞同：0
> 
> 时间：2013-02-15T23:04:54.780
> 
> 标签：html, css, animation

我想使用 CSS3 制作动画，将 3D 空间中的元素翻转为介绍动画。谷歌搜索将显示许多不同的网站，解释如何制作翻转动画 - 这是最重要的结果：[http ://davidwalsh.name/css-flip](http://davidwalsh.name/css-flip)

但问题是这不是我想要的样子。所有这些翻盖的中心都位于中间，就像铰链在中心的旋转门一样。

我想要的翻转动画应该像一扇打开的门一样开始（因为它垂直于屏幕所以不可见），铰链在左侧 - 然后门关闭，你看到关闭的门的前面，然后它停在那里. 就我而言，用户将单击一个按钮，然后该元素将使用动画作为介绍出现。

解决方案应该使用 CSS3（javascript 也可以），并且只在 Webkit 中工作是可以的（我将在其他浏览器上做一些完全不同的动画）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:11:53.143

使用`transform-origin`：`-webkit-transform-origin: 0% 50%`上`.flipper`。只看兼容性。caniuse.com 没有列出`transform-origin`。记住供应商前缀。

# asp.net-mvc - KendoUI：TabStrip HtmlHelper 添加部分视图

> ID：14904859
> 
> 赞同：3
> 
> 时间：2013-02-15T23:05:14.817
> 
> 标签：asp.net-mvc, kendo-ui

在 MVC 3 的 KendoUI 中，我需要为每个选项卡添加一个局部视图作为该选项卡的内容。

这是如何完成的，文档似乎没有显示方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T14:30:43.473

```
@{
    var partialData = Html.Partial("/Views/Templates/_p_myView.cshtml");
}
@(Html.Kendo().TabStrip()
    .Name("Contents from partital")
    .Items(tabstrip =>
    {
        tabstrip.Add().Text("Hello Partial")
            .Content(partialData .ToString());
    })
) 
```

# android - 如何在前置和后置摄像头之间切换？

> ID：14904861
> 
> 赞同：0
> 
> 时间：2013-02-15T23:05:31.713
> 
> 标签：android, android-camera

我需要在我的应用程序中切换前置和后置摄像头。我的问题是，我可以打开前置摄像头，也可以打开后置摄像头。但是一旦相机已经打开，我就无法切换预览中显示的内容。作为概念证明，我只是想让我已经打开的后置摄像头预览切换到前置。我正在尝试编写一个看起来像这样的方法 toggleCamera：

```
public void toggleCamera(){
    mCamera.stopPreview();
    int frontCameraId = 0;
    for (int camNo = 0; camNo < Camera.getNumberOfCameras(); camNo++) {
    CameraInfo camInfo = new CameraInfo();
        Camera.getCameraInfo(camNo, camInfo);
        if (camInfo.facing==(Camera.CameraInfo.CAMERA_FACING_FRONT)) {
            frontCameraId = camNo;
        }
    }
    mCamera.release();
    mCamera = Camera.open(frontCameraId);
    mCamera.startPreview();
    Log.d(TAG + "Restarting camera", ""+frontCameraId);
} 
```

现在，发生这种情况时，相机就会冻结。我在几个地方看到我应该设置cameraParameter“camera-id”但这对我不起作用，我发现没有支持这一点的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:10:32.483

我只是在动态[切换后/前摄像头](https://stackoverflow.com/questions/6599454/switch-back-front-camera-on-fly)的帮助下实现这一点，希望它也能对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:46:11.573

切换相机时，您需要再次设置 PreviewDisplay 和 PreviewListener （如本答案所示：[how to switch between front and back camera when using MediaRecorder android](https://stackoverflow.com/questions/7471025/how-to-switch-between-front-and-back-camera-when-using-mediarecorder-android/10300921#10300921)），因为您正在创建一个新的 Camera 对象：

```
mCamera = Camera.open(frontCameraId);
// added code 
mCamera.setPreviewDisplay([reference to your SurfaceHolder object]);
mCamera.setPreviewCallback([reference to your Camera.PreviewCallback object]);
// end added code
mCamera.startPreview();
Log.d(TAG + "Restarting camera", ""+frontCameraId); 
```

# javascript - 是否可以更改默认溢出：隐藏边框？

> ID：14904862
> 
> 赞同：0
> 
> 时间：2013-02-15T23:05:35.917
> 
> 标签：javascript, html, css, overflow

当我`overflow:hidden`在内部带有图像滑块的容器 div 上使用时，它完美地隐藏了溢出的内容，但在右侧创建了一个大约 50px 宽的白色边框。

我希望图像一直延伸到页面边缘，或者尽可能靠近。

是否可以使`overflow:hidden`创建透明的“边框”或使其变窄？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:51:49.173

嗯..Animuson是对的。溢出：隐藏；不添加任何边框。如果图像是链接，则它可能有边框（但默认颜色不是白色）。但是，是的，请为其添加一些源代码。在不知道完整场景的情况下，这样的事情可能会帮助您：

HTML：

```
 <div id="section1">
       <img alt="foobar" src="the_URL" />
    </div> 
```

CSS：

```
 #section1       {overflow: hidden; width: 100px; display: block; }
    #section1 img   {width: 100px; border: none; outline: none; display: block;} 
```

# 没有测试...

让我知道它是否有帮助。如果不是，请详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:13:54.263

事实证明，解决这个问题的方法是：

将外部容器设置为宽度：100%，

将内部容器设置为比总页面宽度大 60px，并且溢出：隐藏

根据内部容器的宽度，这将“边框”（右边距空白）减少到我设置的任何 px 宽度。

代码：[http ://www.benphilippi.com](http://www.benphilippi.com)

# php - 根据营业时间确定营业是否开放/关闭

> ID：14904864
> 
> 赞同：21
> 
> 时间：2013-02-15T23:05:57.333
> 
> 标签：php, date, datetime, strtotime

如果时间是上午到下午（例如：上午 11 点 - 晚上 10 点），我的代码可以正常工作，但如果营业时间是上午到上午（例如：上午 9 点 - 上午 1 点），它会中断。这是我的代码：

```
$datedivide = explode(" - ", $day['hours']); //$day['hours'] Example 11:00 AM - 10:00 PM
$from = ''.$day['days'].' '.$datedivide[0].'';
$to = ''.$day['days'].' '.$datedivide[1].'';
$date = date('l g:i A');
$date = is_int($date) ? $date : strtotime($date);
$from = is_int($from) ? $from : strtotime($from);
$to = is_int($to) ? $to : strtotime($to);
if (($date > $from) && ($date < $to) && ($dateh != 'Closed')) {
    ?>
    <script type="text/javascript">
    $(document).ready(function(){
        $('.entry-title-container').append('<div class="column two"><h2 style="color:green;text-align: left;margin: 0;">OPEN<br /><span style="color:#222;font-size:12px;display: block;">Closes at <?php echo $datedivide[1]; ?></span></h2></div><br clear="all" />');
    });
    </script>
    <?php
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-18T02:59:28.830

您首先需要创建一个数组来保存您的星期几，以及它们各自的收盘/开盘时间范围。

```
/**
 * I setup the hours for each day if they carry-over)
 * everyday is open from 09:00 AM - 12:00 AM
 * Sun/Sat open extra from 12:00 AM - 01:00 AM
 */
$storeSchedule = [
    'Sun' => ['12:00 AM' => '01:00 AM', '09:00 AM' => '12:00 AM'],
    'Mon' => ['09:00 AM' => '12:00 AM'],
    'Tue' => ['09:00 AM' => '12:00 AM'],
    'Wed' => ['09:00 AM' => '12:00 AM'],
    'Thu' => ['09:00 AM' => '12:00 AM'],
    'Fri' => ['09:00 AM' => '12:00 AM'],
    'Sat' => ['12:00 AM' => '01:00 AM', '09:00 AM' => '12:00 AM']
]; 
```

然后循环当前日期的时间范围并检查当前时间或提供的时间戳是否在一个范围内。为此，您可以使用[**DateTime**](http://php.net/manual/en/class.datetime.php)类为每个时间范围的开始/结束时间生成一个*DateTime对象。*

下面将执行此操作并允许您指定时间戳，以防您想要检查提供的时间戳而不是当前时间。

```
// current or user supplied UNIX timestamp
$timestamp = time();

// default status
$status = 'closed';

// get current time object
$currentTime = (new DateTime())->setTimestamp($timestamp);

// loop through time ranges for current day
foreach ($storeSchedule[date('D', $timestamp)] as $startTime => $endTime) {

    // create time objects from start/end times
    $startTime = DateTime::createFromFormat('h:i A', $startTime);
    $endTime   = DateTime::createFromFormat('h:i A', $endTime);

    // check if current time is within a range
    if (($startTime < $currentTime) && ($currentTime < $endTime)) {
        $status = 'open';
        break;
    }
}

echo "We are currently: $status"; 
```

见上面的[**DEMO**](http://3v4l.org/jdi2s)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-06T18:34:33.060

从接受的答案修改为在我们的商店营业时间实际上是 EST 的 AWS Debian 服务器（位于西海岸）上使用......也放入了一个 PHP 函数。

```
/*
 * decide based upon current EST if the store is open
 *
 * @return bool
 */
function storeIsOpen() {
    $status = FALSE;
    $storeSchedule = [
        'Mon' => ['08:00 AM' => '05:00 PM'],
        'Tue' => ['08:00 AM' => '05:00 PM'],
        'Wed' => ['08:00 AM' => '05:00 PM'],
        'Thu' => ['08:00 AM' => '05:00 PM'],
        'Fri' => ['08:00 AM' => '05:00 PM']
    ];

    //get current East Coast US time
    $timeObject = new DateTime('America/New_York');
    $timestamp = $timeObject->getTimeStamp();
    $currentTime = $timeObject->setTimestamp($timestamp)->format('H:i A');

    // loop through time ranges for current day
    foreach ($storeSchedule[date('D', $timestamp)] as $startTime => $endTime) {

        // create time objects from start/end times and format as string (24hr AM/PM)
        $startTime = DateTime::createFromFormat('h:i A', $startTime)->format('H:i A');
        $endTime = DateTime::createFromFormat('h:i A', $endTime)->format('H:i A');

        // check if current time is within the range
        if (($startTime < $currentTime) && ($currentTime < $endTime)) {
            $status = TRUE;
            break;
        }
    }
    return $status;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-24T13:11:09.217

您应该将所有营业时间重新组合成一个数组，因为如果您在午夜之后继续营业，昨天的营业时间可能会产生影响。也有可能每天有几个开放时间可能很方便。

```
<?php

$times = array(
    'mon' => '9:00 AM - 12:00 AM',
    'tue' => '9:00 AM - 12:00 AM',
    'wed' => '9:00 AM - 12:00 AM',
    'thu' => '9:00 AM - 12:00 AM',
    'fri' => '9:00 AM - 1:00 AM',
    'sat' => '9:00 AM - 1:00 PM, 2:00 PM - 1:00 AM',
    'sun' => 'closed'
);

function compileHours($times, $timestamp) {
    $times = $times[strtolower(date('D',$timestamp))];
    if(!strpos($times, '-')) return array();
    $hours = explode(",", $times);
    $hours = array_map('explode', array_pad(array(),count($hours),'-'), $hours);
    $hours = array_map('array_map', array_pad(array(),count($hours),'strtotime'), $hours, array_pad(array(),count($hours),array_pad(array(),2,$timestamp)));
    end($hours);
    if ($hours[key($hours)][0] > $hours[key($hours)][1]) $hours[key($hours)][1] = strtotime('+1 day', $hours[key($hours)][1]);
    return $hours;
}

function isOpen($now, $times) {
    $open = 0; // time until closing in seconds or 0 if closed
    // merge opening hours of today and the day before
    $hours = array_merge(compileHours($times, strtotime('yesterday',$now)),compileHours($times, $now)); 

    foreach ($hours as $h) {
        if ($now >= $h[0] and $now < $h[1]) {
            $open = $h[1] - $now;
            return $open;
        } 
    }
    return $open;
}

$now = strtotime('7:59pm');
$open = isOpen($now, $times);

if ($open == 0) {
    echo "Is closed";
} else {
    echo "Is open. Will close in ".ceil($open/60)." minutes";
}

?> 
```

另一方面，如果您只想用时间解决问题，`9am - 5am`您应该检查是否并在必要时`$from > $to`添加 1 天。`$to`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-29T17:28:09.267

有点晚了，但我有其他人的解决方案，如果这里的人不太适合他们的需求。我确实喜欢在午夜后关闭的日子里设置多个时间集的解决方案，但这会增加额外的数据处理来显示小时数。您首先必须检查是否有多个可用的时间集，然后确认它们已连接（中间没有时间）。

我的解决方案是编写一个函数，传递打开时间、关闭时间和有问题的时间，它将返回 true 表示打开，返回 false 表示关闭：

```
function is_open($open, $close, $query_time){
    $open = new DateTime($open);
    $close = new DateTime($close);
    $query_time = new DateTime($query_time);
    $is_open = false;
    //Determine if open time is before close time in a 24 hour period
    if($open < $close){
        //If so, if the query time is between open and closed, it is open
        if($query_time > $open){
            if($query_time < $close){
                $is_open = true;
            }
        }
    }
    elseif($open > $close){
        $is_open = true;
        //If not, if the query time is between close and open, it is closed
        if($query_time < $open){
            if($query_time > $close){
                $is_open = false;
            }
        }
    }
    return $is_open;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-27T17:13:35.567

也许这个？我在[这里](https://stackoverflow.com/a/17974889/5990870)找到了它并对其进行了一些调整。

```
 <?php
    date_default_timezone_set('Europe/Stockholm'); // timezone 
    $today = date(N); // today ex. 6

    //Opening hours
    $opening_hours[1] = "12:00"; $closing_hours[1] = "00:00";
    $opening_hours[2] = "12:00"; $closing_hours[2] = "00:00";
    $opening_hours[3] = "12:00"; $closing_hours[3] = "00:00";
    $opening_hours[4] = "12:00"; $closing_hours[4] = "02:00";
    $opening_hours[5] = "12:00"; $closing_hours[5] = "04:00";
    $opening_hours[6] = "13:00"; $closing_hours[6] = "04:00";
    $opening_hours[7] = "13:00"; $closing_hours[7] = "00:00";

    // correction for opening hours after midnight.
    if(intval($closing_hours[$today - 1]) > 0)
        $today = date(N,strtotime("-".intval($closing_hours[$today - 1])." hours"));

    // now check if the current time is after openingstime AND smaller than closing hours of tomorrow
            if (

    (date("H:i") > $opening_hours[$today] && 
    ((date("Y-m-d H:i") < date("Y-m-d H:i", strtotime('tomorrow +'.intval($closing_hours[$today]).' hours')))) 
    ) ||
    date("H:i") < $closing_hours[$today] && 
    ((date("Y-m-d H:i") < date("Y-m-d H:i", strtotime('today +'.intval($opening_hours[$today]).' hours'))))

    )  {
        $label = "label-success";   
        $label_text = "OPEN";
        $label_time = $closing_hours[$today];
    } else {
        $label = "label-danger";
        $label_text = "GESLOTEN";
        $label_time = $opening_hours[$today];
    }
    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-29T19:44:22.257

我用几种不同的方式尝试了这段代码一天，发现这对我来说是一个解决方案。发布它以防它可能对其他人有帮助。将时间从 AM/PM 格式转换回 UNIX 时间非常重要。

我使用从数据库中提取的时间，因此您必须定义`$startTime`和`$endTime`.

```
//  define each days time like so
$monsta = "07:00 AM";
$monend = "05:00 PM";

$storeSchedule = [
    'Mon' => ["$monsta" => "$monend"],
    'Tue' => ["$tuessta" => "$tuesend"],
    'Wed' => ["$wedssta" => "$wedsend"],
    'Thu' => ["$thurssta" => "$thursend"],
    'Fri' => ["$frista" => "$friend"],
    'Sat' => ["$satsta" => "$satend"],
    'Sun' => ["$sunsta" => "$sunend"]
];

// default time zone
$timestamp = time() - 18000; 

// default status
$status = 'Closed';

// loop through time ranges for current day
foreach ($storeSchedule[date('D', $timestamp)] as $startTime => $endTime) {

// create time objects from start/end times
$startTime = strtotime($startTime);
$endTime = strtotime($endTime);

// check if current time is within a range
if ($startTime <= $timestamp && $timestamp <= $endTime ) {
    $status = 'Open';

    }
}   

echo '<p><b>Today\'s Hours</b><br />'.$days[$d].'<br />';
echo "<b>We are currently: $status </b></p>"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-14T07:44:02.803

这是我的版本，因为 12 小时时间格式不适合我。请注意 $pancits[] 来自我的数据库

```
$status = 'Closed';
// get current time object
$timestamp = time();
// $currentTime = (new DateTime())->setTimestamp($timestamp);
$currentTime = date('H:i');

$startTime = date('H:i', strtotime($pancits['p_oTime']));
$endTime   = date('H:i', strtotime($pancits['p_cTime']));

if (($startTime <= $currentTime) && ($currentTime <= $endTime)) {
    $status = 'Open';
    //echo $status;
}

echo "<b>Currently $status</b>";

echo '
    <p><b>Time Open: </b>'.date('h:ia', strtotime($pancits['p_oTime'])).'</p>
    <p><b>Time Close: </b>'.date('h:ia', strtotime($pancits['p_cTime'])).'</p>
'; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-16T00:15:07.403

我建议使用 PHP 的[`DateTime`](http://php.net/manual/en/class.datetime.php)类。它的开发是为了解决所有这些问题，通过提供一个简单的界面来完成这样的任务。

# php - memcached igbinary 支持

> ID：14904865
> 
> 赞同：1
> 
> 时间：2013-02-15T23:05:59.297
> 
> 标签：php, linux, memcached, igbinary

下面是我的 memcached 的 phpinfo() 输出

```
memcached

memcached support   enabled
Version 2.1.0
libmemcached version    1.0.4
Session support yes
igbinary support    no
json support    no 
```

我正在使用基于 redhat 的 AWS Linux AMI，我相信它并使用 YUM。

如何启用 igbinary 支持？

这是否必须在 memcached 安装时发生？我的 memcached 已经在工作了，所以现在有办法添加这个支持吗？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:22:00.787

我曾经手动编译 memcached 堆栈，其中包括 igbinary。这是在我开始使用 remi repo 之前，它提供了更新的包，没有手动编译的所有开销。

以下是我以前手动编译 igbinary 时使用的注释：

```
Had to scp the source from another computer due to lack of direct links, the next steps assume pecl/memcached files are local and extracted
$ -> wget http://pecl.php.net/get/igbinary-1.1.1.tgz
$ -> tar -xzvf igbinary-1.1.1.tgz
$ -> cd igbinary-1.1.1
$ -> phpize
$ -> ./configure # No need for extra config params
$ -> make
$ -> make install # This should copy the resulting .so file to the php dir where all modules are stored
$ -> /etc/init.d/httpd restart # I remember having to do this for phpinfo to reflect the setting correctly after the udpate 
```

现在，如果您查看您的 phpinfo（或 cli 中的 php -i），应将 igbinary 支持设置为 yes。

- 更新 -

确保在 php.ini 或 igbinary.ini 中有以下行，php 可以读取它：

```
; Enable igbinary extension module
extension=igbinary.so 
```

-- 更新#2 --

忘了提一下，您需要使用以下标志编译 memcached 才能使用 igbinary：

```
--enable-memcached-igbinary 
```

-- 更新#3 --

以防将来有人偶然发现这一点。手动维护 PHP 堆栈以及常用的扩展是一件痛苦的事情，而且通常不值得付出额外的努力。您最好使用发行版的包管理器来处理所有繁重的工作，安装带有 igbinary 支持的 memcached 的 php 的示例如下所示：

```
yum install php php-cli php-pecl-memcached php-pecl-igbinary 
```

如果您发行版的 php 上游版本较旧并且您希望使用更新版本，请查看 REMI 存储库：http: [//blog.famillecollet.com/pages/Config-en](http://blog.famillecollet.com/pages/Config-en)

# vim - vim 语法脚本“采购”另一个，但仅用于匹配行

> ID：14904868
> 
> 赞同：0
> 
> 时间：2013-02-15T23:06:46.283
> 
> 标签：vim, vim-syntax-highlighting

我正在编写一个 vim 语法脚本，我希望能够使行匹配某个模式，比如 ' `^>`'、“source”或模仿 markdown 语法突出显示。

有没有办法在语法脚本级别做到这一点？我是否需要手动复制并粘贴并进行适当的调整？这是否需要实际文件上的模式行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T08:51:51.547

看看`:help :syn-include`。它允许您将现有语法（例如*markdown*）导入到您自己的语法中的语法集群中，然后您可以分配语法区域（如果我理解正确的话，那将是一个`/^>/`以行`/$/`）到它。

请注意，不能保证成功；您需要从包含的语法中进行一些协作。（例如，如果 markdown 语法将其模式锚定在`^`，但现在它包含在`>`前缀后面，它将不再匹配。）在最坏的情况下，您必须修改包含的语法或将其完全复制到您自己的语法中.

# html - html img src 使用 ?参数

> ID：14904875
> 
> 赞同：0
> 
> 时间：2013-02-15T23:07:28.430
> 
> 标签：html, image

对于同一张图片，我有 3 种不同的尺寸。

我可以实现以下目标：

```
<img src='/path/to/image.jpg'></img>
<img src='/path/to/image.jpg?small'></img>
<img src='/path/to/image.jpg?large'></img> 
```

我已经尝试了上述方法，但它反而显示`image.jpg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:09:57.970

浏览器不理解您要执行的操作。为什么不将大小附加到图像的末尾，如下所示：

```
<img src='/path/to/image.jpg></img>
<img src='/path/to/image.jpg_small></img>
<img src='/path/to/image.jpg_large></img> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T00:26:01.013

我建议保留相同的图像并为每个图像添加一些 css 样式，而不是从路径中调用相同的图像 3 次，例如：

html代码

```
<div>
    <img src="/path/image.jpg" width="100" height="100">
</div>

<div id="scale-up" style="height: 230px">
    <img src="/path/image.jpg">
</div>

<div id="scale-down" style="height: 57px">
    <img src="/path/image.jpg"> 
```

CSS代码

```
img {
    vertical-align: middle;
    height: 100%;
}
#scale-up {
    height: 230px;
}
#scale-down {
    height: 57px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-11T11:51:37.670

如果您希望文件名看起来像（在服务器上）：

```
fd11f91bb8361030bdc09d8b8ed4f88e?w=200&h=76&f=png 
```

向服务器请求时，您需要对它们进行 url 编码。例如使用[http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

所以 url 编码的文件看起来像：

```
fd11f91bb8361030bdc09d8b8ed4f88e%3Fw%3D200%26h%3D76%26f%3Dpng 
```

所以在你的情况下应该是：

```
<img src='/path/to/image.jpg'></img>
<img src='/path/to/image.jpg%3Fsmall'></img>
<img src='/path/to/image.jpg%3Flarge'></img> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-11T11:58:38.710

就像@Leo 提到的那样，在这里使用 html-tags (或 css) 比基于 url 的方法容易得多。（这需要服务器逻辑）

html-tag 调整大小如下所示：

```
<img src="/path/to/image.jpg" width="100" height="100"> 
```

您提到您不喜欢这可能会增加带宽使用量。只要您的网站在图像上使用缓存，这应该不是问题。（它只会下载一次图像，然后在本地为不同的标签调整相同的图像大小）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-15T23:12:00.350

我会建议

```
<img src="/path/to/image.jpg"></img>
<img src="/path/to/image_small.jpg"></img>
<img src="/path/to/image_large.jpg"></img> 
```

保留文件扩展名。

# python - 一个属性可以访问另一个属性吗？

> ID：14904878
> 
> 赞同：3
> 
> 时间：2013-02-15T23:07:40.250
> 
> 标签：python, class, attributes

我刚开始接触 Python，这是一个关于类的逻辑和实现的非常普遍的问题。我为这个问题的基本层面道歉，但希望它对其他人也有用。这里有一些上下文可以更清楚地说明：

## 语境

*   我想创建一个代表图像的类。此图像包括 3 个波段（R、G、B，与 3 个不同的文件相关联）和一些元数据（一个文件，其中包含 3 个波段文件的文件路径和其他信息，如相机、地理位置等）。

*   对于我思考问题的方式，Image 类应该包含一个 Metadata 类型的属性和三个 Band 类型的属性。

*   类元数据应该具有读取和返回各种信息的方法

*   Class Band 应该有对每个栅格波段进行分析和处理的方法。但是，**这些方法可能需要访问 Metadata 中包含的信息**。

## 我的代码

所以这就是我要做的：

```
class Metadata:
    def __init__(self, meta_file_path):
        self.Path = meta_file_path
    def ReadBandPath(self,band_number):
        [...]
    def ReadLocation(self):
        [...]
    def ReadCameraInfo(self):
        [...]
    def GetSomeOtherInfo(self):
        [...]

class Band:
    def __init__(self,Metadata, band_number):
        self.Meta = Metadata
        self.Number = band_number
        self.Path = self.Meta.ReadBandPath(self.Number)
    def DoSomething(self):
        self.Meta.GetSomeOtherInfo()
        [...]

class Image:  
    def __init__(self, meta_file_path)
        self.Meta = Metadata(meta_file_path)
        self.Band1 = Band(self.Meta, 1)
        self.Band2 = Band(self.Meta, 2)
        self.Band3 = Band(self.Meta, 3)
    def SaveAsPng(dest_file):
        [...] 
```

## 我的问题

我的方式对我来说似乎有点多余，更重要的是它似乎是“静态的”。看起来如果我在创建 Image.BandN 之后更新 Image.Meta 中的一些信息，那么 Image.BandN.Meta 不会同时更新，对吧？

1.  我是否正确设置和实施问题？
2.  以动态方式将元数据属性传递给 Band 对象的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:35:09.390

OP问：1：我是否正确设置和实施问题？
我想
通过使用继承为您的类实现提供一个替代方案（较少冗余）。
下面的代码是用 Python 2.7.3 编写的

```
class Metadata(object):
    def __init__(self, meta_file_path):
        self.Path= meta_file_path
    def ReadBandPath(self,band_number):
        print 'ReadBandPath: ', str(band_number)
    def ReadLocation(self):
        print 'ReadLocation'
    def ReadCameraInfo(self):
        print 'ReadCameraInfo'
    def GetSomeOtherInfo(self):
        print 'GetSomeOtherInfo'

class Band(Metadata):
    def __init__(self, file_path, band_number):
        Metadata.__init__(self, file_path )
        self.number= band_number
        self.Path= self.ReadBandPath(self.number)
    def DoSomething(self):
        self.GetSomeOtherInfo()

class Image(Band):  
    def __init__(self, file_path, band_number, destfile):
        Band.__init__(self, file_path, band_number)
        self.pngfile= destfile
    def SaveAsPng(self):
        print 'Saved as png : ', self.pngfile  

# Now you can create instances of Image like this:
Band1= Image('samplepath1',1,'file4.png')
Band2= Image('samplepath2',2,'filex.png')
Band3= Image('samplepath3',3,'afile.png')
# Methods and attributes from Metadata , Band and Image  : 
Band3.SaveAsPng()
Band2.DoSomething()
Band1.ReadCameraInfo()
print 'Band1: ',Band1.number
print 'Band2: ',Band2.number
print 'Band3: ',Band3.number  
# etc... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:13:32.223

> 看起来如果我在创建 Image.BandN 之后更新 Image.Meta 中的一些信息，那么 Image.BandN.Meta 不会同时更新，对吧？

这取决于您如何进行更新。创建您的`Image`实例（我将调用它`img`）后，`img.Meta`它们`img.BandN.Meta`是同一个对象。

如果您为其分配新值，`img.Meta`则`img.BandN.Meta`不会更新，因为`img.Meta`现在是一个新对象并且`img.BandN.Meta`仍然是原始对象。

但是，如果您修改`img.Meta`，例如`img.Meta.some_attribute = new_value`， then`img.BandN.Meta`也将被更新，因为它们仍然是同一个对象。

只要您正在修改`img.Meta`而不是给它一个新值，您的代码看起来就很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:17:36.727

> 看起来如果我在创建 Image.BandN 之后更新 Image.Meta 中的一些信息，那么 Image.BandN.Meta 不会同时更新，对吧？

不，这不是问题；`my_image.Band1.Meta`将是对与 相同的对象的引用`my_image.Meta`。

只有当您重新分配`my_mage.Meta`以命名*不同*的对象（而不是改变它命名的对象）时，您才会遇到问题。

但是您可以自己测试，通过打印`id(my_image.Meta)`and`id(my_image.Band1.Meta)`或检查`my_image.Meta is my_image.Band1.Meta`.

> 我的方式对我来说似乎有点多余，更重要的是它似乎是“静态的”。

嗯，它有点多余和静态，因为它只处理三个波段，如果你想为 CMYK 使用相同的代码，则需要在所有地方进行更改。如果这是您可能想要做的事情，您可能需要考虑：

```
self.Bands = []
self.Bands.append(Band(self.Meta, 1))
self.Bands.append(Band(self.Meta, 2))
self.Bands.append(Band(self.Meta, 3)) 
```

或者：

```
self.Bands = [Band(self.Meta, i) for i in range(3)] 
```

或者，如果 RGB 是固有且不可更改的部分，您可能希望使用名称而不是数字（只是`'R'`', `'G'`, `'B'`）。然后，您可能*仍*希望将它们放入集合而不是单独的变量中：

```
self.Bands = {name: Band(self.Meta, name) for name in ('R', 'G', 'B')} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T23:18:22.840

这一切似乎都是合理的。

的任何方法`Band`，如果需要查阅元数据，都可以通过`self.Meta`引用进行。

顺便说一句，考虑采用 Python Style Guide 中的命名约定，即，只为类名保留 CapitalizedWords；对参数、属性、方法和变量使用 lower_case_with_underscores。（`Metadata`参数 to`Band.__init__`正在隐藏`Metadata`类。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T09:44:25.687

您已经将图像分解为三个类，但是 Band 和 MetaData 是紧密耦合的，而 Image 并没有做太多的事情。可能 Band 更简单地表示为整数或浮点数的数组。

我不会尝试设计对象和类层次结构，而是从最简单的实现开始。如果类变得太大或代码变得笨拙，那么您可以开始分离类。您会发现，一旦您到了需要清理它的地步，简单、扁平的代码比精心设计的对象层次结构更容易重塑。

```
class Image(object):
    def __init__(self, meta_file_path):
        self.meta_file_path = meta_file_path
        self.bands = {}
        for b in 'RGB':
            self.bands[b] = self.load_band(b)

    def read_location(self):
        ...

    def process_band(self, b):
        ... 
```

# c++ - 在野牛中使用 C++ api 的多个解析器，与 stack.hh 冲突

> ID：14904879
> 
> 赞同：1
> 
> 时间：2013-02-15T23:07:47.163
> 
> 标签：c++, parsing, bison

当您运行野牛时，它会在“stack.hh”中为您创建一个堆栈类。文件名是固定的，但内容被包装在您选择的命名空间中。

如果您使用 bison 生成 2 个单独的语法（即 2 个 *.y 文件）并使用 C++ 模式，“stack.hh”文件会发生冲突并被覆盖。

自动生成的“location.hh”和“position.hh”类也会发生类似的事情，但在 bison 2.7 中有一个解决方法

```
%define api.location.type "foo::location" 
```

这使您可以在`foo`语法命名空间中重用语法命名`bar`空间。

但是在处理“stack.hh”文件时，我无论如何都找不到做这个练习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:44:42.637

处理此问题的最简单方法是将 Bison 文件放在两个单独的目录中。然后，当您生成代码时，文件不会发生冲突，假设每组文件都生成在与相应 Bison 文件相同的位置。

# php - 查看表中的数据生成codeigniter

> ID：14904882
> 
> 赞同：0
> 
> 时间：2013-02-15T23:08:10.733
> 
> 标签：php, codeigniter

我在使用 codeigniter 时遇到了困难，因为我躺在这里。我想包含在表格视图中，但是表格有问题。

这个源代码自己

```
$set_tabelx = array ('table_open' => "<table cellspacing='0' cellpadding='0' id='area_admin' border='1'>");
$this->table->set_template($set_tabelx);
if(isset($halaman)){
    $hal = $this->load->view('admin/'.$halaman);
}
$atas = "<div id='judul_utama'>".$judul_atas."<div class='kanan'><img src='".base_url()."images/icon_system/37.png' /> Hai, ".$this->session->userdata('username')."</div></div>";
$menu = $this->load->file("application/views/admin/menu.php", true);
$isi = "<div id='jp-container' class='jp-container'><div id='isi_admin'>".$hal."</div></div><br />";
$bawah = $this->load->file("application/views/admin/footer.php", true);

$this->table->add_row(array('data' => $atas, 'colspan' => 2));
$this->table->add_row(
    array('data' => $menu, 'valign' => "top", 'id' => "jp-menu", 'class' => "jp-menu bg_menu"),
    array( 'valign' => "top", 'class' => "bg_isi", 'data' => "<div id='jp-container' class='jp-container'><div id='isi_admin'>".$hal."</div></div><br />"));
$this->table->add_row(array('data' => $bawah, 'colspan' => 2));
echo $this->table->generate(); 
```

这个问题

```
if(isset($halaman)){
    $hal = $this->load->view('admin/'.$halaman);
}
$this->table->add_row(
    array('data' => $menu, 'valign' => "top", 'id' => "jp-menu", 'class' => "jp-menu bg_menu"),
    array( 'valign' => "top", 'class' => "bg_isi", 'data' => "<div id='jp-container' class='jp-container'><div id='isi_admin'>".$hal."</div></div><br />")); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:09:32.260

通过第三个参数将视图作为字符串返回：

```
$hal = $this->load->view('admin/'.$halaman, NULL, TRUE); 
```

# mysql - MySQL：相关表和非相关表之间的区别

> ID：14904894
> 
> 赞同：0
> 
> 时间：2013-02-15T23:08:51.340
> 
> 标签：mysql, table-relationships

我有 2 个表：“catalog”和“press”是“press”子表，我在“press”中通过 id_catalog（指向目录中的“id”）将它们关联起来。

我设法在目录（“名称”）和他们的“新闻”孩子上获得一个字段来测试海豚：

```
$query="SELECT catalog.book_title, press.* FROM catalog, press WHERE press.id_catalog = $id";

$book_title = mysql_result($result,$i,"_catalog.book_title");
$media_name = mysql_result($result,$i,"_press.media");
$type = mysql_result($result,$i,"_press.type");
$url = mysql_result($result,$i,"_press.url");

echo $book_title $media_name $type $url;

$book_title = mysql_result($result,$i+1,"catalog.book_title");
$media_name = mysql_result($result,$i+1,"press.media");
$type = mysql_result($result,$i*+1*,"press.type");
$url = mysql_result($result,$i*+1*,"press.url");

echo $book_title $media_name $type $url; 
```

在查询中，$id 由 GET_[] 传递，它返回预期的内容

问题来了：如果我不在数据库中建立关系怎么办？（使用 id_catalog 上的 INDEX）查询会起作用吗？

我正在回答这个问题，因为我认为如果我不做这个关系，我可以匹配这些字段并让它工作......或者不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:11:54.840

我认为您的问题与索引无关（尽管它有助于提高性能）。我认为问题是这个查询正在产生一个笛卡尔积——你没有关联这两个表：

```
SELECT catalog.book_title, press.* 
FROM catalog, press WHERE press.id_catalog = $id 
```

相反，它应该是这样的：

```
SELECT catalog.book_title, press.* 
FROM catalog 
   JOIN press ON catalog.id = press.id_catalog
WHERE press.id_catalog = $id 
```

# ruby-on-rails - 部署到 capistrano 时如何调试？

> ID：14904899
> 
> 赞同：3
> 
> 时间：2013-02-15T23:09:46.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, capistrano

部署到生产服务器时出现此错误：

```
$ cap production deploy
    triggering load callbacks
  * ←[32m2013-02-16 00:06:00 executing `production'←[0m
    triggering start callbacks for `deploy'
  * ←[32m2013-02-16 00:06:00 executing `multistage:ensure'←[0m
  * ←[32m2013-02-16 00:06:00 executing `deploy'←[0m
  * ←[32m2013-02-16 00:06:00 executing `deploy:update'←[0m
 ** transaction: start
  * ←[32m2013-02-16 00:06:00 executing `deploy:update_code'←[0m
    updating the cached checkout on all servers
    ←[33mexecuting locally: "git ls-remote git@github.com:user/app.git
production"←[0m
    ←[2;37mcommand finished in 3350ms←[0m
  * ←[33mexecuting "if [ -d /var/www/app/shared/cached-copy ]; then cd /var/
www/app/shared/cached-copy && git fetch -q origin && git fetch --tags -q ori
gin && git reset -q --hard f736340ecbsadasd948234f370c9d2bb && git clean
 -q -d -x -f; else git clone -q git@github.com:user/app.git /var/www/app/shared/cached-copy && cd /var/www/app/shared/cached-copy && git checko
ut -q -b deploy f736340ecasdsadasf795761f370c9d2bb; fi"←[0m
    servers: ["x"]
Password:
    [x] executing command
 ** ←[31m[x :: out] error: cannot open .git/FETCH_HEAD: Permission d
enied←[0m
    ←[2;37mcommand finished in 570ms←[0m
*** [←[34mdeploy:update_code←[0m] ←[34mrolling back←[0m
  * ←[33mexecuting "rm -rf /var/www/app/releases/20130215230611; true"←[0m
    servers: ["x"]
    [x] executing command
    ←[2;37mcommand finished in 176ms←[0m
failed: "sh -c 'if [ -d /var/www/app/shared/cached-copy ]; then cd /var/www/
app/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin
&& git reset -q --hard f736340342af1bsad79453761f370c9d2bb && git clean -q
-d -x -f; else git clone -q git@github.com:user/app.git /var/www/app
o/shared/cached-copy && cd /var/www/app/shared/cached-copy && git checkout -
q -b deploy f736340ecb6af1bgaasd5549d2bb; fi'" on x
$ 
```

但错误并不那么重要，它只是告诉我 gem 文件/捆绑安装存在问题。

如何获得更详细的错误日志，我可以在其中准确地看到问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T13:32:40.313

看起来您已经使用 运行了其中一个命令`sudo`，这会导致 的权限错误`/var/www/app/shared/cached-copy/.git/FETCH_HEAD`，最简单的修复方法很可能是清理整个目录：

```
sudo rm -rf /var/www/app/shared/cached-copy 
```

如果问题在其他目录中重复出现，请尝试：

```
sudo chown -R $USER: /var/www/app 
```

# c++ - 解析文件 I/O

> ID：14904906
> 
> 赞同：0
> 
> 时间：2013-02-15T23:11:15.003
> 
> 标签：c++, file-io, io

我编写了一个 C++ 程序，该程序需要能够从 .txt 文件中读取，并解析输入以便能够从每一行获取命令和参数。

说我有 Animals.txt

```
A cat1 3
A dog1 4
A cat2 1
D cat1 
```

我希望能够获取这个文件，然后为第一个字母创建一组 if 语句，以便我可以在主类中调用与第一个字母对应的函数，并将该行的其余部分传递为论据。

我正在尝试做的一个例子：

```
if(line[0].compare("A")==0){
    add(line[1],line[2]);
}
if(line[0].compare("D")==0){
    delete(line[1])
} 
```

我尝试使用 strtok 和 stringstream 类，但要么我不知道如何实现我的需要，要么它们不能满足我的需要，因为值被放入不在开头的 line[0] 中文本文件的行。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:18:37.420

首先，您需要`std::ifstream`打开文件。然后你需要`std::getline`从文件中提取行：

```
std::ifstream file("Animals.txt");
std::string line;
while (std::getline(file, line)) {
  // ...
} 
```

然后在 while 循环中，将行插入 a`std::stringstream`并提取您需要的值：

```
std::stringstream ss(line);
char letter;
ss >> letter;
// And so on... 
```

对于 a你可以在你的陈述`char`中做简单`==`的比较：`if`

```
if (letter == 'A') {
  // ...
} 
```

如果您将字母提取到 a`std::string`中，请确保您与`"A"`.

我会让你把它们都插在一起，然后弄清楚剩下的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:19:08.747

创建一个`istringstream`对象来分割每一行：

```
std::istringstream line(my_line);
std::string line0;
std::string line1;
std::string line2;

line >> token;
if (line0 == "A") {
    line >> line1 >> line2;
    add(line1, line2);
} else if (line0 == "D") {
    line >> line1;
    remove(line1);
} 
```

# python - 构建 Python OOP 代码和模块

> ID：14904911
> 
> 赞同：0
> 
> 时间：2013-02-15T23:11:40.563
> 
> 标签：python, module, packages

```
packageName\
    __init__.py
    src\
        __init__.py
        someFile.py
        classes\
            __init__.py
            engine1.py
            engine2.py
            engine.py
    tests\
        __init__.py
        myTests.py
    temp\ 
```

我正在使用 Python 进行 OOP，我有几个问题。

我知道`__init__.py`将文件夹定义为一个模块，但我不明白这对我有什么好处。

`myTests.py`如果需要从文件夹中导入类，我将如何运行`packageName/src/classes`？

```
$  python packageName/tests/myTests.py 
```

上面的调用是我想我打算如何运行我的测试。如果结构是这样，我该如何导入类？

```
from ..src.classes.engine1 import * 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T08:00:06.563

# c++ - 了解 C++ 库和 usr/local

> ID：14904917
> 
> 赞同：-1
> 
> 时间：2013-02-15T23:12:01.100
> 
> 标签：c++, boost, shared-libraries, static-libraries

我正在安装一个需要[Boost](http://www.boost.org)作为先决条件的程序。在我花更多时间处理本地权限和其他模糊文件之前，我想了解我正在更改的内容。

我从“当我在 Intro to Programming 中创建银行账户程序时，我们无法使用堆栈 stl”的意义上理解 C++ 库，但我想我对这些库的作用并没有深入了解。

所以，问题是：
（1）我如何理解，例如，根据vector stl之类的库来理解Boost？
(2) usr/local 目录是什么？
(a) 像 Boost 这样的库对这个目录做了什么？

任何和所有帮助，或相关文献的指针都表示赞赏.c++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:30:21.300

### 一般信息（适用于所有平台）

C++ 中的库由两种类型的文件组成：

1.  头文件。这些是你的东西`#include`，并包含库的接口。这些是`*.h`or`*.hpp`文件，尽管它们可以有任何扩展名（包括根本没有扩展名）。编译器需要这些文件才能知道库的接口。

2.  目标文件（可选）。这些可能包含实现库的代码。这些是从`*.cpp`or`*.cxx`文件创建的。（同样，文件扩展名可以是任何东西。）链接器需要这些文件才能将编译的库代码加载到您的程序中，或者告诉加载程序编译代码的位置。

### Unix 特定信息（在 Linux 上为真，在 OS X 上大部分为真，在 Windows 上不同）

头文件通常位于`/usr/include`, 和`/usr/local/include`. 你可以把它们放在任何地方，但是编译器会自动搜索这些地方。

库对象文件通常位于`/lib`、`/usr/lib`和`/usr/local/lib`. 你可以把它们放在任何地方，但是链接器和加载器会自动搜索这些地方。

它们之间的区别是：

*   `/lib`适用于您的系统需要启动的基本内容。

*   `/usr/include`并且`/usr/lib`适用于包管理器安装的软件。

*   `/usr/local/include`并且`/usr/local/lib`适用于系统管理员（例如您）安装的软件。

*   记住：你可以选择在任何你想要的地方安装库，你只需要记住告诉编译器和链接器在哪里可以找到它们。

# iphone - 如何从应用程序中本地访问 json 文件

> ID：14904919
> 
> 赞同：0
> 
> 时间：2013-02-15T23:12:27.670
> 
> 标签：iphone, ios, objective-c, json, initwithcontentsoffile

我试图弄清楚如何从应用程序中本地访问 json 文件。目前我一直在从这样的服务器远程使用 json 文件：

```
jsonStringCategory = @"http://****categories?country=us";
    }

    // Download the JSON file
    NSString *jsonString = [NSString
                            stringWithContentsOfURL:[NSURL URLWithString:jsonStringCategory]
                            encoding:NSStringEncodingConversionAllowLossy|NSUTF8StringEncoding
                            error:nil];

    NSLog(@"jsonStringCategory is %@", jsonStringCategory);

    NSMutableArray *itemsTMP = [[NSMutableArray alloc] init];

    // Create parser 
    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];

    itemsTMP = [results objectForKey:@"results"];

    self.arForTable = [itemsTMP copy];

    [self.tableView reloadData]; 
```

我试过这个：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"categoriesus" ofType:@"json"];

    jsonStringCategory = [[NSString alloc] initWithContentsOfFile:filePath]; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T23:39:40.057

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"json"];
NSData *jsonData = [NSData dataWithContentsOfFile:filePath];
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:25:12.427

你可以再详细一点吗？您尝试访问哪个文件？你已经保存了吗？

1/ 对于您的主要问题：您可以使用文件路径创建字典或数组

```
[NSDictionary dictionaryWithContentsOfFile:<#(NSString *)#>]
[NSArray arrayWithContentsOfFile:<#(NSString *)#>] 
```

2 / 但是，您可以在编写时从文件中读取“字符串”内容，然后最终解析它。为此，您需要（例如）这样的路径（对于“目录”目录，可能是“缓存”目录）

```
NSArray *array = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *pathToFile = [ [ [ [ array objectAtIndex:0 ] stringByAppendingPathComponent:@"nameOfTheFile" ] stringByAppendingString:@".ext" ] retain ]; 
```

然后在我的 1/ 示例中使用“pathToFile”。

3/ 对于您的互联网访问，我建议您检查 AFNetworking。最好进行异步下载;-)（你的是同步的）

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T23:28:28.487

我喜欢使用 CoreData。请按照以下步骤操作：

1-)首先创建一个模型，并添加名称为jsonvalue的属性String类型。

2-)创建这个函数来保存你的json文件：

```
 -(void)saveJson:(NSString*)d
    {

       NSString * data = [d retain];

       NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:[NSEntityDescription entityForName:@"NameObjectModel" inManagedObjectContext:context]];

    NSError *error = nil;
    NSArray *results = [context executeFetchRequest:request error:&error];
    [request release];
    // error handling code
    if(error){

    }
    else{
        Session* favoritsGrabbed = [results objectAtIndex:0];
        favoritsGrabbed.jsonvalue = data;
    }

    if(![context save:&error]){
        NSLog(@"data saved.");
    }
} 
```

3-）创建一个函数来加载你的json：

```
-(void)loadJSONFromFile
{

    //Recover data from core data.

    // Define our table/entity to use
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"NameObjectModel" inManagedObjectContext:context];

    // Setup the fetch request
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];

    // Define how we will sort the records - atributo que sera recuperado
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"jsonvalue" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [request setSortDescriptors:sortDescriptors];
    [sortDescriptor release];

    // Fetch the records and handle an error
    NSError *error;
    NSMutableArray *mutableFetchResults = [[NSMutableArray alloc]initWithArray:[context executeFetchRequest:request error:&error]];

    if (!mutableFetchResults) {
        // Handle the error.
        // This is a serious error and should advise the user to restart the application
    }

    if(mutableFetchResults.count == 0)
    {
        NSLog(@"the archive is null");
    }

    else if(mutableFetchResults.count > 0)
    {
        NameObjectModel *entity = [mutableFetchResults objectAtIndex:0];
        //NSLog(@"%@",[[entity jsonvalue] JSONValue]);
        NSDictionary * aux = [[entity jsonvalue] JSONValue];

        if([entity jsonvalue]== nil)
        {
            NSLog(@"json is nil");
            NSLog(@"the archive exists but json is nil");
        }

        else {
            // set current json data cache
            [self setJsonCache:aux]; // add to recovery list
        }

    }
    [mutableFetchResults release];
    [request release];
} 
```

不要忘记： NameObjectModel = NSManagedObject 的名称。

# image - 如何让我的 SVG 路径缩放以适应？

> ID：14904923
> 
> 赞同：9
> 
> 时间：2013-02-15T23:12:47.737
> 
> 标签：image, image-processing, svg

我已尽力将其简化为一个最小的工作示例，但请原谅底部的代码墙。我有一组路径，在这种特殊情况下，它们拼写单词“DOG”。我想在*不保留纵横比*的情况下缩放它们以适应盒子。例如，使用合适的`DOG`I 定义：

```
 <g>
   <svg height="141.23" width="400.0" x="0.0" y="0.0">
     <rect height="100%" width="100%"
      stroke='black' fill='purple'/>
     <use xlink:href="#DOG"/>
   </svg>

   <svg height="73.34" width="210.81" x="189.18" y="273.94">
     <rect height="100%" width="100%"
       stroke='black' fill='purple'/>
     <use xlink:href="#DOG"/>
   </svg>
 </g> 
```

![在此处输入图像描述](../Images/1ffec4c5918581fb22dc606beb9d022e.png)

我无法弄清楚，使用`preserveAspectRatio='none'`或任何其他技巧来让我`DOG`在（下部）窗口中完全适合。结果总是被剪裁。我可以尝试猜测，`viewBox`但这很脆弱，我不应该在这里的 DOM 的上层做到这一点吗？

下面列出了 SVG 的完整代码：

```
<svg version="1.2" width="400.0pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <g>
   <svg height="141.23" width="400.0" x="0.0" y="0.0">
     <rect height="100%" width="100%"
      stroke='black' fill='purple'/>
     <use xlink:href="#DOG"/>
   </svg>

   <svg height="73.34" width="210.81" x="189.18" y="273.94">
     <rect height="100%" width="100%"
       stroke='black' fill='purple'/>
     <use xlink:href="#DOG"/>
   </svg>
 </g>

 <defs>

  <symbol id="DOG">
   <defs>
    <g>
     <symbol id="letter_D" overflow="visible">
      <path d="M 131.5 -66.953125 C 131.5 -104.609375 106.203125 -136.09375 73.71875 -136.09375 L 10.359375 -136.09375 L 10.359375 -130.90625 C 24.109375 -130.90625 26.296875 -130.90625 26.296875 -121.9375 L 26.296875 -14.140625 C 26.296875 -5.1875 24.109375 -5.1875 10.359375 -5.1875 L 10.359375 0 L 73.71875 0 C 105.796875 0 131.5 -29.484375 131.5 -66.953125 Z M 116.765625 -66.953125 C 116.765625 -38.859375 108.59375 -27.5 104.8125 -22.109375 C 100.03125 -15.9375 88.671875 -5.1875 69.734375 -5.1875 L 47.421875 -5.1875 C 39.453125 -5.1875 39.046875 -6.171875 39.046875 -12.953125 L 39.046875 -123.140625 C 39.046875 -129.90625 39.453125 -130.90625 47.421875 -130.90625 L 69.734375 -130.90625 C 86.28125 -130.90625 116.765625 -121.140625 116.765625 -66.953125 Z " style="stroke:none;">
      </path>
     </symbol>
     <symbol id="letter_O" overflow="visible">
      <path d="M 134.09375 -67.75 C 134.09375 -108.59375 104.8125 -139.28125 71.734375 -139.28125 C 37.859375 -139.28125 9.171875 -108.1875 9.171875 -67.75 C 9.171875 -27.296875 38.25 3.1875 71.53125 3.1875 C 105.609375 3.1875 134.09375 -27.890625 134.09375 -67.75 Z M 118.953125 -70.328125 C 118.953125 -22.3125 93.640625 -0.40625 71.734375 -0.40625 C 49.015625 -0.40625 24.3125 -23.109375 24.3125 -70.328125 C 24.3125 -117.359375 51.40625 -135.6875 71.53125 -135.6875 C 92.65625 -135.6875 118.953125 -116.765625 118.953125 -70.328125 Z " style="stroke:none;">
      </path>
     </symbol>
     <symbol id="letter_G" overflow="visible">
      <path d="M 136.6875 -48.21875 L 136.6875 -53.40625 C 131.90625 -53 121.140625 -53 115.765625 -53 L 87.078125 -53.40625 L 87.078125 -48.21875 L 93.046875 -48.21875 C 110.1875 -48.21875 110.578125 -46.03125 110.578125 -38.859375 L 110.578125 -25.703125 C 110.578125 -3.78125 84.6875 -2 78.5 -2 C 57.984375 -2 24.3125 -16.140625 24.3125 -68.140625 C 24.3125 -120.140625 57.390625 -134.09375 76.71875 -134.09375 C 99.21875 -134.09375 115.5625 -114.5625 119.34375 -86.875 C 119.75 -84.484375 119.75 -84.078125 121.546875 -84.078125 C 123.734375 -84.078125 123.734375 -84.484375 123.734375 -88.0625 L 123.734375 -135.296875 C 123.734375 -138.875 123.53125 -139.078125 122.34375 -139.078125 C 121.546875 -139.078125 121.34375 -138.875 119.953125 -136.484375 L 111.1875 -119.75 C 101.421875 -132.109375 89.46875 -139.28125 74.125 -139.28125 C 40.046875 -139.28125 9.171875 -109.1875 9.171875 -68.140625 C 9.171875 -27.296875 39.453125 3.1875 74.515625 3.1875 C 90.65625 3.1875 106.40625 -2.59375 112.578125 -13.953125 C 115.96875 -5.78125 121.546875 -0.203125 122.53125 -0.203125 C 123.53125 -0.203125 123.734375 -0.40625 123.734375 -3.984375 L 123.734375 -39.65625 C 123.734375 -47.21875 124.328125 -48.21875 136.6875 -48.21875 Z " style="stroke:none;">
      </path>
     </symbol>
    </g>
   </defs>
   <g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
     <use x="-10.359" xlink:href="#letter_D" y="139.247"/>
     <use x="130.512871" xlink:href="#letter_O" y="139.247"/>
     <use x="273.975031" xlink:href="#letter_G" y="139.247"/>
   </g>
  </symbol>
 </defs>

</svg> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-22T11:43:23.160

你也可以使用[`ViewBox`](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)with[`preserveAspectRatio="none"`](http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute)来获得一个结果，在我看来，它几乎总是给我想要的结果。这样您就不必进行计算来指定转换，而是决定您绘制的画布有多大，然后自动将其缩放到所需的大小......

例子：

```
<svg style="width: 500px; height: 800px;" viewBox="0 0 610 1340" preserveAspectRatio="none"> 
```

您知道您的绘图将在 viewBox 大小内绘制，但结果必须适合 500x800 大小的窗口，无论是否保留纵横比。

编辑：我知道你说“不保留纵横比”，但你仍然需要决定你想要做什么。您可以缩放/拉伸或剪辑。这些选项在 preserveAspectRatio 规范下进行了概述。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-15T23:15:52.853

[`transform`](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)在外部`<g>`容器的属性中使用比例。

```
transform="scale(x, y)" 
```

使用一点 JavaScript，您可以找到任意路径的维度：

```
var box = path.getBBox();
var eleWidth = box.width, eleHeight = box.height; 
```

# wpf - 平台特定行为的接口定义

> ID：14904929
> 
> 赞同：1
> 
> 时间：2013-02-15T23:13:33.230
> 
> 标签：wpf, design-patterns, interface

我正在将旧的编辑器类型应用程序从 WinForms 转换为 WPF。它有一些工具（如 Photoshop 中的那种），您可以在其中选择它们，它们有一些行为，并且它们有一个光标图标。

我已经将我的域逻辑分离到一个 BLL 中，因此那里有一个用于工具行为的接口以及一些不依赖于 WPF 的实现。我试图弄清楚如何在不将 BLL 绑定到 WPF 的情况下实现光标行为。

似乎与绘图有关的一切都是特定于平台的——绘图上下文、图像等。这意味着我无法将任何方法或参数类型放入 BLL 的接口中。我不打算再次实际使用 WinForms，而且我将来也没有计划其他平台，但我想把这段代码写得好，就好像那是可能的一样。

示例代码：我在 BLL 中有这个界面：

```
public interface IToolProvider
{
    IToolBehavior Tool { get; }
} 
```

然后这个：

```
public interface IToolBehavior
{
    void Click(ScreenDocument screen, Point location);
    void Move(ScreenDocument screen, Point location);
    void Release(ScreenDocument screen);
    void RightClick(ScreenDocument screen, Point location);
} 
```

（我在`Point`这里使用自己的实现，基本上是由于每个平台都有自己的 Point 类的确切问题。）

我想`IToolCursor Cursor { get; }`在`IToolProvider`界面中添加类似的东西，但我不知道`IToolCursor`界面中可以与 WPF 和其他平台同时工作的内容。

# jsp - Scriplet 阻止网站启动

> ID：14904931
> 
> 赞同：0
> 
> 时间：2013-02-15T23:13:39.817
> 
> 标签：jsp, jsp-tags, scriptlet

我的 index.jsp 上有一个脚本，脚本应该做的是从“session.getAttribute”获取信息并显示在 div 上，但即使没有用户登录，index.jsp 仍应运行

这是脚本

```
<div class="templatemo_content_left_section">
40:  <h1>Bem Vindo</h1>

40:  <%= session.getAttribute("currentSessionUser")%>
41:   <%if (session.getAttribute("currentSessionUser").equals("")){%>
42: <a href="Login.jsp"><b>Login</b></a>
43:<%}
44: else{%>
45:<a href="logout.jsp"><b>Logout</b></a>
46:<%
47:}
48:%> 
```

我得到的日志显示错误“消息在第 43 行处理 JSP 页面/Index.jsp 时发生异常”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:28:17.673

`session.getAttribute()`如果属性不存在，则返回 null。这是[明确记录](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getAttribute%28java.lang.String%29)的。所以很明显，如果你调用`equals()`结果，你会得到一个 NUllPointerException。将结果与 null 进行比较：

```
 <%if (session.getAttribute("currentSessionUser") == null) 
```

或者更好的是，使用 JSP EL 和 JSTL。应避免使用 Scriptlet：

```
<c:choose>
    <c:when test="${empty sessionScope.currentSessionUser}">
        <a href="Login.jsp"><b>Login</b></a>
    </c:when>
    <c:otherwise> 
        <a href="logout.jsp"><b>Logout</b></a>
    </c:otherwise>
</c:choose> 
```

# jquery - jQuery 的 .each() 循环

> ID：14904933
> 
> 赞同：0
> 
> 时间：2013-02-15T23:14:07.643
> 
> 标签：jquery, ajax, arrays, if-statement, each

我有这个脚本，它在其中循环遍历一个数组，它应该检查数组中的每个值是否是带有此函数的电子邮件：

```
function isEmail(email) {
  var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
  return regex.test(email);
} 
```

应该通过数组查看：

```
$.each(arrayEmail,function(i){

    var checkEmail = isEmail(arrayEmail[i]);
    if(checkEmail != false){
    alert(arrayEmail[i]);
    var message = $('#sendMsg textarea.emailMsg').val();
        $.ajax({
            type:'post',
            url:'ajax_inviteMsg.php',
            data: 'to='+$.trim(arrayEmail[i])+'&message='+message,
            success: function(data){
                  alert(data);
            }

    });
    }
}); 
```

`alert(arrayEmail[i]);`检查电子邮件是否为假后仅显示第一个值，这告诉我它仅迭代 if 语句之一，但是，我已经测试了电子邮件并且应该可以正常工作并没有通过该 if 语句。

如果在每个函数之后立即发出警报，它会正确地遍历这些值。

同样，电子邮件是真实的，应该通过 if 语句作为真实的迭代。

我只想知道我做错了什么，如果数组中有多个值，它只会传递一次 if 语句。

谢谢

编辑

我在每个函数之前也有这个

```
<div>test@gmail.com, fresh@hotmail.com</div>

var emails = $('div').text();
var arrayEmail = emails.split(','); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:39:56.543

拆分 div 元素的文本后，您的数组变为： element0 = "test@gmail.com" element1 = "fresh@hotmail.com"

第二个元素有前导空格并且无法匹配正则表达式。

试试这个 div：test@gmail.com,fresh@hotmail.com 没有空格，你会明白的。

在验证它之前在结束修剪字符串上。

# java - 并发，随机化/改组队列？

> ID：14904936
> 
> 赞同：5
> 
> 时间：2013-02-15T23:14:21.567
> 
> 标签：java, data-structures

我正在寻找一种`java.util.Queue`可以同时访问以及元素在哪里`added`和/或`removed`随机访问的实现。也就是说，我正在寻找一种**不**遵循 FIFO 约束的实现，但要确保在当前包含的条目中随机播放一个新条目。

^(^(请注意，[根据`java.util.Queue`合同](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)，“队列通常但不一定以 FIFO（先进先出）方式对元素进行排序”。))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:48:47.773

我认为您可以基于 java.util.concurrent.PriorityBlockingQueue 实现自己的版本，就像这样

```
class ConcurrenRandomizingQueue<E> extends AbstractQueue<E> {
    static Random r = new Random();
    Queue<Entry> q = new PriorityBlockingQueue<Entry>();

    static class Entry implements Comparable<Entry> {
        Object e;
        int p;

        Entry(Object e) {
            this.e = e;
            this.p = r.nextInt();
        }

        public int compareTo(Entry e) {
            return Integer.compare(p, e.p);
        }
    }

    public boolean offer(E e) {
        return q.offer(new Entry(e));
    }

    public E poll() {
        Entry e = q.poll();
        if (e == null)
            return null;
        return (E) e.e;
    }

    public E peek() {
    Entry e = q.peek();
    if (e == null)
        return null;
    return (E) e.e;
    }

    public int size() {
        return q.size();
    }

    public Iterator<E> iterator() {
        return null; // TODO
    }
} 
```

# spring-webflow - Grails 子流重新启动到第一个状态

> ID：14904937
> 
> 赞同：0
> 
> 时间：2013-02-15T23:14:26.137
> 
> 标签：spring-webflow, grails-2.0

我有一个使用子流的流。就像是：

*初始状态 -> 子流 -> 下一个状态*

当我在子流中时，我可以来回前进，甚至可以毫无问题地返回“初始状态”。但是，一旦我退出子流程并处于“下一个状态”，任何返回的尝试都会将我直接发送到“初始状态”，而不是子流程的最后一步。

对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:32:45.227

找出问题所在。“下一个状态”是最后一个状态，这就是重新启动流程的原因。

# eclipse - eclipse indigo中jar的选项“构建路径”在哪里？

> ID：14904939
> 
> 赞同：0
> 
> 时间：2013-02-15T23:14:32.987
> 
> 标签：eclipse

我将一个新的 jar 文件放在 dir libs（连同 android jar）中，但是......我还需要构建路径。“构建路径”选项在哪里？通常右键单击目录就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:23:58.687

右键单击该项目。或者转到 Eclipse Preferences，然后搜索 Build Path。

# php - TypeError：非本地范围对象

> ID：14904945
> 
> 赞同：1
> 
> 时间：2013-02-15T23:15:00.393
> 
> 标签：php, javascript, jquery, jwplayer

我有时会在我的 jwplayer 中收到此错误：`TypeError: non-native scope object`

这意味着我无法加载多个视频中的一个视频。这使得它不可靠。我的问题是有没有办法让它更可靠并永久修复这个错误？

下面是代码：

```
<?php

$key = $_GET['key'];
$i = $_GET['i'];
$v = $_GET['v'];

?>
<div id="myElement-<?php echo $key.'-'.$i; ?>">Loading the player...

<script type="text/javascript">
jwplayer("myElement-<?php echo $key.'-'.$i; ?>").setup({
    file: "<?php echo 'VideoFiles/'.$v; ?>",
    width: 480,
    height: 270
});

</script>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T10:36:45.903

如果您使用启用了 firebug 的 firefox，这可能是一个 firebug 问题吗？，看[这里](https://stackoverflow.com/questions/14007062/mysterious-type-error-non-native-scope-object-in-firebug)

# c# - 为什么使用“as”运算符进行强制转换会导致强制转换的对象在 C# 动力学中为空

> ID：14904946
> 
> 赞同：4
> 
> 时间：2013-02-15T23:15:01.597
> 
> 标签：c#, .net

例如，

假设 group.SupportedProducts 是 ["test", "hello", "world"]

```
var products = (string[]) group.SupportedProducts; 
```

导致“products”正确地成为包含上述 3 个元素的字符串数组 - “test”、“hello”和“world”

然而，

```
var products= group.SupportedProducts as string[]; 
```

导致产品为空。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T23:16:39.717

大概*实际上*`group.SupportedProducts`不是a ，但它支持自定义转换为.*`string[]``string[]`*

 *`as` *从不*调用自定义转换，而强制转换会。

示例来证明这一点：

```
using System;

class Foo
{
    private readonly string name;

    public Foo(string name)
    {
        this.name = name;
    }

    public static explicit operator string(Foo input)
    {
        return input.name;
    }
}

class Test
{
    static void Main()
    {
        dynamic foo = new Foo("name");
        Console.WriteLine("Casting: {0}", (string) foo);
        Console.WriteLine("As: {0}", foo as string);
    }
} 
```*

# django - Django 1.5 覆盖 abstractuser 电子邮件字段是必需且唯一的

> ID：14904947
> 
> 赞同：6
> 
> 时间：2013-02-15T23:15:12.053
> 
> 标签：django, django-forms

我有一个扩展 AbstractUser 的自定义用户模型。我添加了两个自定义字段。但我希望默认电子邮件字段是唯一的并且是必需的。我在网上搜索了很多，但找不到好的建议。

使用覆盖的“clean_email”方法在扩展的用户创建表单中这样做是正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-28T16:18:10.277

我面临同样的问题，我正在扩展 AbstractUser 因为我只需要添加信息。这是唯一对我有用的东西：

```
AbstractUser._meta.get_field('email')._unique = True 
```

这解决了独特的问题，但我仍然无法使其成为必需，当您扩展 AbstractUser 时，它的电子邮件字段不是，如果您从管理员添加扩展用户，并且因为表单不采用这种方式，则会注意到它。

我试过了

```
AbstractUser._meta.get_field('email')._blank = False
AbstractUser._meta.get_field('email')._null = False 
```

但这似乎不起作用。

编辑：出于某种原因，独特的作品与'_'，但空白和空不，我只是试过这个

```
AbstractUser._meta.get_field('email').blank = False
AbstractUser._meta.get_field('email').null = False 
```

它奏效了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T17:29:51.890

`email`已经在`AbstractUser.REQUIRED_FIELDS`.

为了使它独一无二：

```
class User(AbstractUser):
    ...

(emailField,) = (f for f in User._meta.fields if f.name == "email")
emailField.unique = True 
```

有点hacky，但应该可以

或者您可以使用自定义调整简单地扩展`AbstractBaseUser`并添加自己缺少的东西`AbstractUser`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:27:00.220

也许您可以覆盖`__init__`模型上的 以使该字段成为必需且唯一的。

更新

在玩了一会儿之后，我发现这说起来容易做起来难（我还没有找到一种方法来`required = False`在父类中创建子类中的字段）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T20:43:54.593

这里给出的有点老套但有效的解决方案在 Django 1.7 中不起作用

```
User._meta.get_field('email')._unique = True 
```

这是因为在模块范围内访问模型违反了 AppRegistry 断言，即在加载完成之前不应修改模型：

```
django.core.exceptions.AppRegistryNotReady: Models aren't loaded yet. 
```

您可以使用新的[App Loading](https://docs.djangoproject.com/en/1.7/ref/applications/)功能为您执行此操作。使用在您的应用程序目录`ready`中执行猴子补丁的方法定义一个 AppConfig 类。`apps.py`

```
from django.apps import AppConfig

class YourAppConfig(AppConfig):
    name="your_app_name"

    def ready(self):
        from .models import MyAbstractUser
        MyAbstractUser._meta.get_field_by_name('email')[0]._unique=True 
```

这假设`MyAbstractUser`是 的子类`AbstractUser`。

您还必须`__init__.py`在应用程序的目录中进行修改：

```
default_app_config = 'your_app_name.apps.YourAppConfig' 
```

如果你忘记了你的新`ready`方法将不会被调用。

现在您的系统检查应该通过了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T10:38:06.107

mderk 的回答并不完全适合我 - 我得到了`AttributeError: can't set attribute`. 原因是 Django 在内部将`unique`' 值保存在`self._unique`.

所以长话短说：

```
class User(AbstractUser):
    ...

(emailField,) = (f for f in User._meta.fields if f.name == "email")
emailField._unique = True 
```

作品。

**甚至更好**：

```
User._meta.get_field('email')._unique = True 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-02T08:53:44.533

```
AbstractUser._meta.get_field('email')._unique = True
AbstractUser._meta.get_field('email').blank = False
AbstractUser._meta.get_field('email').null = False 
```

它起作用了，我检查了数据库。但是，当我从默认管理页面创建用户时，它将毫无问题地创建它并且电子邮件字段为空。它只会在您尝试保存时询问电子邮件。但它仍然是一个 goog 解决方案。我什至不需要 sudo。我建议确保在从视图创建新用户时需要电子邮件。*使用 django 1.10 和 SQlite3

这也将使您了解可以覆盖的字段：

（如果有人在您创建时找到了一种方法来制作必填字段，请发表评论:)）

```
dir(User._meta.get_field('email'))
Out[3]: 
['__class__',
 '__copy__',
 '__deepcopy__',
 '__delattr__',
 '__dict__',
 '__doc__',
 '__eq__',
 '__format__',
 '__ge__',
 '__getattribute__',
 '__gt__',
 '__hash__',
 '__init__',
 '__le__',
 '__lt__',
 '__module__',
 '__new__',
 '__reduce__',
 '__reduce_ex__',
 '__repr__',
 '__setattr__',
 '__sizeof__',
 '__str__',
 '__subclasshook__',
 '__unicode__',
 '__weakref__',
 '_blank',
 '_check_backend_specific_checks',
 '_check_choices',
 '_check_db_index',
 '_check_deprecation_details',
 '_check_field_name',
 '_check_max_length_attribute',
 '_check_null_allowed_for_primary_keys',
 '_description',
 '_error_messages',
 '_get_flatchoices',
 '_get_lookup',
 '_get_val_from_obj',
 '_unique',
 '_unregister_lookup',
 '_validators',
 '_verbose_name',
 'attname',
 'auto_created',
 'auto_creation_counter',
 'blank',
 'cached_col',
 'check',
 'choices',
 'class_lookups',
 'clean',
 'clone',
 'column',
 'concrete',
 'contribute_to_class',
 'creation_counter',
 'db_check',
 'db_column',
 'db_index',
 'db_parameters',
 'db_tablespace',
 'db_type',
 'db_type_suffix',
 'deconstruct',
 'default',
 'default_error_messages',
 'default_validators',
 'description',
 'editable',
 'empty_strings_allowed',
 'empty_values',
 'error_messages',
 'flatchoices',
 'formfield',
 'get_attname',
 'get_attname_column',
 'get_cache_name',
 'get_choices',
 'get_col',
 'get_db_converters',
 'get_db_prep_save',
 'get_db_prep_value',
 'get_default',
 'get_filter_kwargs_for_object',
 'get_internal_type',
 'get_lookup',
 'get_pk_value_on_save',
 'get_prep_value',
 'get_transform',
 'has_default',
 'help_text',
 'hidden',
 'is_relation',
 'many_to_many',
 'many_to_one',
 'max_length',
 'model',
 'name',
 'null',
 'one_to_many',
 'one_to_one',
 'pre_save',
 'primary_key',
 'register_lookup',
 'rel',
 'rel_db_type',
 'related_model',
 'remote_field',
 'run_validators',
 'save_form_data',
 'select_format',
 'serialize',
 'set_attributes_from_name',
 'system_check_deprecated_details',
 'system_check_removed_details',
 'to_python',
 'unique',
 'unique_for_date',
 'unique_for_month',
 'unique_for_year',
 'validate',
 'validators',
 'value_from_object',
 'value_to_string',
 'verbose_name'] 
```

# css - 在 div 中垂直居中文本

> ID：14904950
> 
> 赞同：2
> 
> 时间：2013-02-15T23:15:37.850
> 
> 标签：css, html, alignment, text-alignment

我正在尝试显示文本“我是来自英国伦敦的 iOS 工程师和 Web 开发人员”，该文本在`div`id 为“伦敦”的情况下集中对齐。但是，我正在努力寻找这样做的好方法。水平对齐很容易，因为我只需要设置`text-align`'london' 的属性`div`。但是，当尝试垂直对齐时，我无法设置`width`和`height`属性，这意味着我不能`margin: 0 auto;`用来垂直对齐文本，因为我正在使用`span`元素。

请你能告诉我完成这个的最佳方法吗？

这是我目前拥有的 JSFiddle：http: [//jsfiddle.net/5aX7p/](http://jsfiddle.net/5aX7p/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T23:21:35.537

您可以执行以下操作：

HTML：

```
<div class="outer">
    <span class="inner">This is vertically centered.</span>
</div> 
```

CSS：

```
.outer {
    display: table;
}
.inner {
    display: table-cell;
    vertical-align: middle;
} 
```

我在这里改变了你的小提琴：

[http://jsfiddle.net/5aX7p/5/](http://jsfiddle.net/5aX7p/5/)

请注意，使用 CSS 表格（恕我直言）比更改 line-height 或 padding 或 margin 或其他更好，因为它始终垂直居中内部跨度，即使它换行到多行。使用其他解决方案，如果内容的大小发生变化，您必须调整 line-height 或 padding 或 margin 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:20:43.457

如果您的`#london`分区总是 200px 高，您可以更改`height: 200px`为`line-height: 200px`，它将使行中的文本垂直居中。

见这里：http: [//jsfiddle.net/5BDcr/](http://jsfiddle.net/5BDcr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T23:20:57.910

这是一个中心对齐的版本（取自您的小提琴）：

```
<div id="london">
            <span class="light" style="display: inline-block; vertical-align: middle; line-height: 1.2;">I’m an 
                <span class="heavy">iOS Engineer &amp; Web Developer</span>
                <span class="light"> from London, UK</span>
            </span>
</div> 
```

将此添加到#london 的 CSS 中：

```
line-height: 200px; 
```

# c# - 使用 LINQ to XML 从 XML 文件中检索多个属性，将每个属性写入行

> ID：14904951
> 
> 赞同：1
> 
> 时间：2013-02-15T23:15:51.767
> 
> 标签：c#, linq-to-xml

我在同一天晚上的第二个帖子，道歉！

我有一个 XML 文件，其中包含各种软件条目的几位信息（如下所示的片段）。

```
<software>
    <software_entry
    name="Adobe Acrobat X Standard"
    path="Applications\Acrobat\Acrobat X Standard\AcroStan.msi"
    type="msi"
    switches="/qn ALLUSERS=1"
    />
    <software_entry
    name="Adobe Acrobat X Professional"
    path="Applications\Acrobat\Acrobat X Pro\AcroPro.msi"
    type="msi"
    switches="/qn ALLUSERS=1"
    />
</software> 
```

我正在使用 LINQ to XML 加载 XML 文件。在我的应用程序中，我有两个列表框，第一个列表框 (listBox1) 填充了此 XML 文件中每个条目的名称。然后，用户可以将这些条目从一个列表框移动到另一个列表框 (listBox2)。

我正在尝试编写一个方法来遍历 listBox2 中的每个条目，在 XML 文件中找到匹配的条目，然后检索该条目的所有其他属性。例如，用户已将 Adob​​e Acrobat X Professional 添加到第二个列表框。该方法应该查看 XML 文件，找到与列表中的内容匹配的属性“名称”的条目，并写入其他数据（路径、类型、开关）或将它们设置为字符串的值。到目前为止，经过多次调整，我取得的成就很少。我设法得到了一些非常乱码的输出。

到目前为止，我的代码如下。

```
private void writeBatchFile()
{
    // Get temp folder location
    string tempPath = Path.GetTempPath();

    // Create batch file
    using (StreamWriter writer = File.CreateText(tempPath + @"\swInstaller.cmd"))
    {
        // Loop through entries in listBox2
        foreach (string item in listBox2.Items)
        {
            var dataFromXML = from data in document.Descendants("software_entry")
                               where data.Element("name").Value == item
                               select new
                               {
                                   fileName = (string) data.Element("name"),
                                   filePath = (string) data.Element("path"),
                                   fileType = (string) data.Element("type"),
                                   fileSwitches = (string) data.Element("switches")
                               };

            // Write to batch file
            writer.WriteLine(fileName + filePath + fileType + fileSwitches);
        }
    }
} 
```

在代码中，我为 listBox2 中的文本值提供了一个 foreach 循环。然后，我尝试在 XML 中查找该值等于“名称”值的位置，然后在找到时将该值的其他属性设置为这些字符串（路径为 filePath，类型为 fileType 等）。最后，我试图将这些字符串写入文本文件。通过这种特殊的尝试，我得到的只是 5 个空白行。谁能指出我做错了什么的正确方向？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T23:26:08.913

您正在尝试读取 XML 属性，而不是元素。改用[Attribute](http://msdn.microsoft.com/en-au/library/system.xml.linq.xelement.attribute.aspx)方法：

```
var dataFromXML = Enumerable.Single
(
    from data in document.Descendants("software_entry")
    where data.Attribute("name").Value == item
    select new
    {
        fileName = data.Attribute("name").Value,
        filePath = data.Attribute("path").Value,
        fileType = data.Attribute("type").Value,
        fileSwitches = data.Attribute("switches").Value
    }
);

writer.WriteLine(dataFromXML.fileName); 
```

您还需要进行这些额外的更改：

*   使用[Enumerable.Single()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)表示您只希望 1 个元素与给定名称匹配。否则`dataFromXML`可能包含多个元素，您需要使用循环或索引来访问它们。
*   您需要访问`fileName`和其他变量作为变量的成员`dataFromXML`。它们自己没有局部变量，所以这就是你收到你提到的错误消息的原因。
*   您不需要转换为 a `string`，因为默认情况下从 XML 属性读取的值已经是字符串。

# mysql - 重写 SQL 查询以显示未找到 match=1 的行

> ID：14904958
> 
> 赞同：1
> 
> 时间：2013-02-15T23:16:52.857
> 
> 标签：mysql

我正在尝试查找 ts_request.day_id 和 ts_request.period_id 不等于 1 且不存在的行。

我该怎么做呢？

我当前的 SQL 查询看起来像是在搜索找到匹配的行 - 我正在寻找匹配不是圆形的行（因为该行不存在）。

```
SELECT COUNT(*) totalCount FROM ts_room 
JOIN ts_roompref
ON ts_room.id = ts_roompref.room_id 
JOIN ts_request 
ON ts_roompref.request_id = ts_request.roompref_id
WHERE ts_request.day_id = 1 
AND ts_request.period_id = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:20:16.240

如果该行不存在，则需要将 INNER JOIN 更改为 LEFT OUTER JOIN。因为 INNER JOIN 的定义是它只带回连接条件评估为 true 的那些记录。

然后，要仅获取没有匹配行的记录，请在 WHERE 子句中添加一个或多个条件。

```
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 

  JOIN ts_roompref
  ON ts_room.id = ts_roompref.room_id 

  LEFT JOIN ts_request 
  ON ts_roompref.request_id = ts_request.roompref_id
WHERE 
  ts_request.day_id IS NULL; 
```

* * *

编写上述查询的另一种方法是：

```
SELECT 
  COUNT(*) totalCount 
FROM 
  ts_room 

  JOIN ts_roompref
  ON ts_room.id = ts_roompref.room_id 

WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_request 
    WHERE ts_roompref.request_id = ts_request.roompref_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:23:13.597

嗨使用 <> 等同于不等于... where <> 1 理解或你需要一个例子

# azure - Azure 表定价 - 很多很多表

> ID：14904961
> 
> 赞同：1
> 
> 时间：2013-02-15T23:17:04.223
> 
> 标签：azure, azure-storage

问题，

我们设计我们的服务是为了创建很多 Azure 表。Azure 门户仅显示与存储大小相关的成本。但是是否有与保留大量表相关的任何额外费用（AWS 确实按表收费）。

我们希望的是，我们创建 100,000 个小型 Azure 表（比如说全部合并为 100G）与 1 个 100G 表的成本相同。

这是真的？

谢谢。蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:59:18.237

afaik，它只是基于大小，与表的数量无关。

除了存储大小之外，您还必须考虑交易成本和出站流量......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:59:38.060

azure 存储费用与存储的字节数有关，而不是与表本身的数量有关。每个表名确实占用了极少量的存储空间（字节），因此从技术上讲是收费的，但即使是这么多也可以忽略不计。可以说这与分区键名称相同（即 1 个表，具有 100k 个分区将需要与 100k 个表，每个表具有一个分区）相同的空间）

这里解释：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)

公式为：12 字节 + Len(TableName) * 2 字节

因此，假设您使用诸如“table000001”、“table000002”等之类的东西，那么 100k 表的价格大约是每月 0.01 美元。

# boost - 使用 zlib 作为静态库构建 Boost 1.52

> ID：14904962
> 
> 赞同：2
> 
> 时间：2013-02-15T23:17:09.613
> 
> 标签：boost, build, zlib

我正在使用 vs2012 通过 python 构建脚本运行所有构建的 Windows 中工作。我正在尝试构建 Boost 1.52，我需要静态链接 zlib。我有一个 zlib 的构建，默认情况下它创建了静态库 zlib.lib 和带有关联 zdll.lib 的 dll zlib1.dll。然后我用开关构建boost库：

```
-sZLIB_BINARY=zlib -sZLIB_INCLUDE=%s -sZLIB_LIBPATH=%s 
```

其中 %s 被替换为适当的文件夹。我相信这应该会导致指向静态 zlib.lib 文件的链接。我有一个使用所有这些的应用程序。我链接zlib.lib并运行最终exe的依赖walker并获取zlib1.dll。我对 zlib 没有其他依赖项，所以这是唯一可以来自的地方。我还添加了开关

```
-sNO_ZLIB=0 
```

我已经查看了[http://www.boost.org/doc/libs/1_43_0/libs/iostreams/doc/installation.html](http://www.boost.org/doc/libs/1_43_0/libs/iostreams/doc/installation.html)上的安装文档，但找不到我遗漏的任何其他内容。

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:30:22.957

我已经通过以下方式解决了这个问题......在寻找其他链接时，我发现在 boost 中有一个

```
#  pragma comment(lib, BOOST_STRINGIZE(BOOST_ZLIB_BINARY)) 
```

并且这个标志 BOOST_ZLIB_BINARY 是在 devenv 的预处理器设置中设置的，用于我的最终项目到 zdll.lib。我将其调整为 zlib.lib，一切正常。

# twitter-bootstrap - 禁用引导数据属性 API？

> ID：14904963
> 
> 赞同：4
> 
> 时间：2013-02-15T23:17:11.293
> 
> 标签：twitter-bootstrap, api, attributes

引导[文档](http://twitter.github.com/bootstrap/javascript.html#overview)说，您可以使用以下代码轻松禁用数据 API：

`$('body').off('.data-api');`

当其他 javascript 使用相同的数据属性时，我认为这在某些情况下真的很酷。您只需在特殊区域中禁用 bootstrap-API。

例如在每个 a-Tag 中禁用 API：

```
<html>
  <head>
    <title>Bootstrap - Test - Disable The API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {
        //This is working: $(document).off('.data-api');

        //This is not working:
        $('a').off('.data-api');
      });
    </script>
  </head>
  <body>

    <!-- Button to open the modal -->
    <a id="clickBtn" href="#myModal" data-toggle="modal">Launch demo modal</a>

    <!-- Modal -->
    <div id="myModal" class="modal hide fade">
      This is just a little test
    </div>

  </body>
</html> 
```

但它没有用。

还有一个`clickEvent`用于模态的。谁能告诉我我做错了什么？

它对任何一个都不起作用`$('#clickBtn').off('.data-api');`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:08:56.393

好的，我想我自己解决了这个问题。Bootstrap 将事件处理程序附加到文档根：

```
 $(document).on('click.modal.data-api', '[data-toggle="modal"]', function (e) {
      ...
  }) 
```

当然你不能用

`$('body').off('.data-api');`或者`$('#clickBtn').off('.data-api');`

因为处理程序附加到文档根而不是正文或元素本身。

如果要禁用特殊元素的 API（在我的示例中为 a-Tag），则必须从 off-method 定义选择器参数：

```
$(document).off('.data-api','a'); 
```

似乎引导文档有点令人困惑......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T00:43:31.133

以下代码不起作用：

```
$(document).off('.data-api','a'); 
```

您只能像这样禁用单个插件。

```
e.g. $(document).off('.modal.data-api'); 
```

不是 html 元素。

但是，您可以使用 jQuery 覆盖导致引导数据属性与来自其他脚本的数据属性冲突的问题。使用您的链接示例，以下操作可以使链接变得不可点击，该元素具有来自非引导插件的脚本的数据属性：

```
$('.selected-areas a').filter('[href]').click(function(){
    window.location.href = $(this).attr('href');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-19T11:48:18.723

如果您只想在 DOM 树的特定部分下使用 Bootstrap 的数据 API，您可以尝试将事件处理程序移动到其他一些共同的祖先。这段代码对我来说效果很好，但请注意 -[如此处所述](https://stackoverflow.com/a/2518441/954377)-这种方法使用未记录的 jQuery 功能来获取分配给**object****的事件处理程序`document`**。

```
function moveBootstrapEventHandlersTo(target) {
    /* undocumented jQuery feature below */
    var eventHandlers = $._data(document, "events");

    $.each(eventHandlers, function() {
        $.each(this, function() {
            $(target).on(
                this.origType + "." + this.namespace,
                this.selector,
                this.data,
                this.handler
            );
    });
}); 
```

您现在可以默认禁用数据 api 并使用一些类名启用它。记住不要嵌套这些元素。所有事件都在冒泡，所以 - 当嵌套时 - 同一个事件处理程序被多次调用。

```
<body>
    <div class="with-bs-data-api">
        // bootstrap data api works here
    </div>
    <div class="some-other-class">
        // but doesn't work here
    </div>
    <footer>
        <div class="with-bs-data-api">
            // and here it works again
        </div>
    </footer>
    <script type="text/javascript">
        moveBootstrapEventHandlersTo(".with-bs-data-api");
        $(document).off('.data-api');
    </script>
</body> 
```

# .net - .NET 相当于 Ruby 的 begin/rescue/else

> ID：14904965
> 
> 赞同：3
> 
> 时间：2013-02-15T23:17:13.293
> 
> 标签：.net, ruby

Ruby 有一个 else 块，可以进入 begin/rescue（.NET 人员的 try/catch）

```
begin
 #some code
rescue
 #oh noes! Catches errors like catch blocks in .NET
else
 #only executes when NO errors have occured
ensure
 #always executes - just like the finally in .NET
end 
```

else 块中的代码只有在没有引发错误的情况下才会执行。.NET 中是否有提供此功能的构造？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:26:30.000

在 .NET 中，您可以在以下代码之后列出代码`#some code`：

```
try
{
   // some code
   // Only executes when NO errors have occurred
}
catch (Exception e)
{
    // Catches errors
}
finally
{
    // Always executes
} 
```

内部的任何异常都`// some code`将阻止“仅执行”部分的发生，因为它会跳转到`catch`then `finally`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:51:54.680

关于异常处理，有些事情在其他语言中是可能的，但在 C# 中是不可能的。一个这样的例子是[`fault`处理程序](http://weblogs.asp.net/kennykerr/archive/2004/09/15/introduction-to-msil-part-5-exception-handling.aspx)——在 IL 中，可以定义一个处理程序，该处理程序仅在出现错误时才会触发。

这`fault`似乎与您想要的相反，但您可以构建逻辑，以便某些代码仅在发生错误时执行，而不管您如何处理异常。`try..fault`.NET 将为迭代器生成一个块。Bart De Smet 曾向他博客的读者提出挑战，试图模拟故障处理程序，您可以[在此处](http://bartdesmet.net/blogs/bart/archive/2009/12/06/reader-challenge-fault-handlers-in-c.aspx)阅读更多相关信息。

# c# - 来自用户控件的会话变量直到刷新才加载

> ID：14904968
> 
> 赞同：1
> 
> 时间：2013-02-15T23:17:42.027
> 
> 标签：c#, asp.net

我是 asp.net 的新手，想知道处理这个问题的正确方法。

当用户登录时，他们会被发送到仪表板。我的母版页中有一个用户控件，它自动将用户帐户加载到会话变量中（它是一个下拉列表，因此他们可以选择多个帐户）。

我的仪表板有以下代码

```
if (Session["SiteID"] != null)
{
    SiteID = int.Parse(Session["SiteID"].ToString());
    PopulateAccountData();
    PopulateAccountInformation2();
    PopulateSiteNodes();
    PopulateSiteMap();
}

else
{
    LabelSiteName.Text = "No Site Selected";

} 
```

首次加载时，页面始终显示未选择站点。如果我点击刷新它会正确填充页面。

如何让它在首次加载时使用会话变量？

更新 - 这是我的用户控制代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

namespace WebApp
{
public partial class SitePicker : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        DataSet ClientList;
        // if never loaded, go get it and stash it
        if (Session["dsClientList"] == null)
        {
            ClientList = GetClientListFromDB();
            Session["dsClientList"] = ClientList;
            Session["ClientID"] = (int)ClientList.Tables[0].Rows[0]["ClientID"];
        }
        else
        {
            ClientList = (DataSet)Session["dsClientList"];
        }

        if (DropDownListClient.Items.Count == 0)
        {
            DropDownListClient.DataSource = ClientList;
            DropDownListClient.DataValueField = "ClientID";
            DropDownListClient.DataTextField = "ClientName";
            DropDownListClient.DataBind();
        }
        //ClientButton.Text = DropDownListClient.SelectedItem.Text;

        DataSet SiteList;
        if (Session["dsSiteList"] == null)
        {
            SiteList = GetSiteListFromDB();
            Session["dsSiteList"] = SiteList;
            Session["SiteID"] = (int)SiteList.Tables[0].Rows[0]["SiteID"];
        }
        else
            SiteList = (DataSet)Session["dsSiteList"];

        if (DropDownListSite.Items.Count == 0)
        {
         //   SiteButton.Text = DropDownListSite.SelectedItem.Text;
            DropDownListSite.DataSource = SiteList;
            DropDownListSite.DataValueField = "SiteID";
            DropDownListSite.DataTextField = "SiteName";
            DropDownListSite.DataBind();
            DropDownListSite.SelectedValue = Session["SiteID"].ToString();
        }
    }

    protected void LoadSite()
    {
//            Response.Redirect(Request.RawUrl);
//            Response.Redirect(".");
        Response.Redirect(Request.RawUrl, true);
        //Server.Transfer(".");
    }

    protected void ClientButton_Click(object sender, EventArgs e)
    {
        //DropDownListClient.Visible = true;
        //ClientButton.Visible = false;
    }

    DataSet GetClientListFromDB()
    {
        DataAccess da = new DataAccess();
        da.AddParameter("portaluserid", Page.User.Identity.Name, DataAccess.SQLDataType.SQLString, 256);
        DataSet ClientList = da.runSPDataSet("Portal_SitePickerClientList");
        return ClientList;
    }

    protected void DropDownListClient_SelectedIndexChanged(object sender, EventArgs e)
    {
        //ClientButton.Enabled = true;
        //DropDownListClient.Visible = false;
        int ClientID = int.Parse(DropDownListClient.SelectedItem.Value);
        ClientButton.Text = DropDownListClient.SelectedItem.Text;
        //ClientButton.Visible = true;
        Session["ClientID"] = ClientID;
        Session["ClientName"] = DropDownListClient.SelectedItem.Text;
        PopulateSiteList();
    }

    DataSet GetSiteListFromDB()
    {
        DataAccess da = new DataAccess();
        da.AddParameter("portaluserid", Page.User.Identity.Name, DataAccess.SQLDataType.SQLString, 256);
        da.AddParameter("ClientID", Session["ClientID"], DataAccess.SQLDataType.SQLInteger, 4);
        DataSet SiteList = da.runSPDataSet("Portal_SitePickerSiteList");
        return SiteList;
    }

    void PopulateSiteList()
    {
//            DataSet SiteList;
        //if (Session["dsSiteList"] != null)
        //    SiteList = (DataSet)Session["dsSiteList"];
        //else
        //    SiteList = GetSiteListFromDB();
        //DropDownListSite.DataSource = SiteList;
        //DropDownListSite.DataValueField = "SiteID";
        //DropDownListSite.DataTextField = "SiteName";
        //DropDownListSite.DataBind();
        //DropDownListSite.Visible = true;
        //SiteButton.Visible = false;
        //DropDownListSite.SelectedIndex = 1;
    }

    protected void DropDownListSite_SelectedIndexChanged(object sender, EventArgs e)
    {
        //DropDownListSite.Visible = false;
        //SiteButton.Visible = true;
        int SiteID = int.Parse(DropDownListSite.SelectedItem.Value);
        SiteButton.Text = DropDownListSite.SelectedItem.Text;
        Session["SiteID"] = SiteID;
        Session["SiteName"] = DropDownListSite.SelectedItem.Text;
        LoadSite();
    }

    protected void SiteButton_Click(object sender, EventArgs e)
    {
        //if (DropDownListSite.Visible == false)
            //PopulateSiteList();
        //SiteButton.Visible = false;
        if (Session["SiteID"] != null)
        {
            int SiteID = (int)Session["SiteID"];
            DropDownListSite.SelectedValue = SiteID.ToString();
        }
    }

    protected void GetClientAndSiteFromSiteID()
    {
        DataAccess da = new DataAccess();
        da.AddParameter("SiteID", (int)Session["SiteID"], DataAccess.SQLDataType.SQLInteger, 4);
        DataSet ds = da.runSPDataSet("NavigationGetClientSiteFromSiteID");
        Session["ClientID"] = (int)ds.Tables[0].Rows[0]["ClientID"];
        Session["ClientName"] = ds.Tables[0].Rows[0]["ClientName"];
        Session["SiteName"] = ds.Tables[0].Rows[0]["SiteName"];
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:56:58.323

问题出在：母版页在用户控件*之前加载。*这意味着母版页中的 Page_Load 事件发生在用户控件中的 Page_Load 事件之前。因此，当您尝试阅读会话时，尚未填充会话。

一种解决方案是在 ASP.NET 生命周期中选择稍后的事件。我会选择 PreRender 事件，因为它发生在 Load 事件之后。换句话说，母版页中的 Page_PreRender 发生在用户控件中的 Page_Load 之后。

看看[这张](http://blogs.thesitedoctor.co.uk/tim/2006/06/30/Complete+Lifecycle+Of+An+ASPNet+Page+And+Controls.aspx)超详细的 ASP.NET 生命周期图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:57:34.733

您设置会话变量的最早点可能是罪魁祸首。在 Session_Start 的 Global.asax 文件中设置一个会话变量，以便您的会话从应用程序启动一直持续到您销毁它。像 Session["start"] = DateTime.Now;

# javascript - 在较小的分辨率上禁用fancybox

> ID：14904972
> 
> 赞同：0
> 
> 时间：2013-02-15T23:18:08.940
> 
> 标签：javascript, fancybox

我正在使用这个插件，成功：

[http://www.fancyapps.com/fancybox/](http://www.fancyapps.com/fancybox/)

我只是想知道是否有任何方法可以禁用 JS，如果用户在小于 767px 的屏幕上——也就是说，只是链接到图像本身而不提升灯箱？我已经查看了所有类似的问题，但他们的解决方案都没有真正奏效，我也不知道如何实施它们。

如果有帮助，我可以下载并使用 Modernizr...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:54:38.267

我不确定您必须支持哪些浏览器，但您可以使用“window.matchMedia”。您可以在此处找到支持的浏览器：http: [//caniuse.com/matchmedia](http://caniuse.com/matchmedia)。

至于在您的情况下如何使用它：

```
if (window.matchMedia( "(min-width: 767px)" ).matches) {
    // Initialize fancyBox.
} 
```

我没有看到您必须处理屏幕尺寸更改的任何地方，但如果您这样做，您可以添加一个监听器，如下所示：

```
var mediaQuery = window.matchMedia( "(min-width: 767px)" );
mediaQuery.addListener(handleWidthChanges);
handleWidthChanges(mediaQuery);

function handleWidthChanges(mediaQuery) {
    if (mediaQuery.match) {
        // Do nothing if fancyBox already initialized otherwise disable.
    } else {
        // Disable fancyBox if it's initialized otherwise do nothing.
    }
} 
```

如果您必须支持当前支持“window.matchMedia”的浏览器以外的浏览器，Modernizr 有这个： http: [//modernizr.com/docs/#mq](http://modernizr.com/docs/#mq)，您可以依赖它。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-03T15:55:47.117

刚刚找到了一个纯 CSS 的解决方案：

```
@media handheld, only screen and (max-width: 540px){
    .fancybox {
        pointer-events: none;
    }
} 
```

# sql - sqlite 连接在几分钟不活动后自动关闭

> ID：14904975
> 
> 赞同：0
> 
> 时间：2013-02-15T23:18:26.927
> 
> 标签：sql, database, vb.net, sqlite, database-connection

我对 vb.net 和 sqlite 有一个奇怪的问题。在我的应用程序中，如果我保持连接打开并且不使用我的应用程序，几分钟后，读取或写入数据库需要很长时间。这个问题的原因可能是什么？与骗局有关。暂停 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:03:19.807

如果连接已关闭，您之后将无法使用它。

Windows 以积极换出它认为可能不会很快使用的程序、数据和文件缓存而闻名。根据您的描述，这似乎是发生的事情。

# python - 如何删除excel电子表格中满足某些条件的行？

> ID：14904977
> 
> 赞同：17
> 
> 时间：2013-02-15T23:18:37.660
> 
> 标签：python, openpyxl

我想创建一个 Excel (xlsx) 电子表格的“简化”版本（即通过根据某些标准删除一些行），我想知道这是否可以用`openpyxl`.

在（pythonish）伪代码中，我想要做的看起来像：

```
wb = openpyxl.reader.excel.load_workbook('/path/to/workbook.xlsx')
sh = wb.get_sheet_by_name('someworksheet')

# weed out the rows of sh according to somecriterion
sh.rows[:] = [r for r in sh.rows if somecriterion(r)]

# save the workbook, with the weeded-out sheet
wb.save('/path/to/workbook_reduced.xlsx') 
```

可以用 来完成这样的事情`openpyxl`，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-03-19T18:41:39.943

2018更新：我今天正在搜索如何删除一行，发现该功能是在openpyxl 2.5.0-b2中添加的。刚刚尝试过，效果很好。这是我找到答案的链接：[https ://bitbucket.org/openpyxl/openpyxl/issues/964/delete_rows-does-not-work-on-deleting](https://bitbucket.org/openpyxl/openpyxl/issues/964/delete_rows-does-not-work-on-deleting)

这是删除一行的语法：

```
ws.delete_rows(index, 1) 
```

其中：“ws”是工作表，“index”是行号，“1”是要删除的行数。

还有删除列的功能，但我没有尝试过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T07:29:59.440

内部`openpyxl`似乎没有“行”的概念，它与单元格一起工作并跟踪尺寸，如果你使用[`Worksheet.rows`](http://openpyxl.readthedocs.org/en/latest/api/openpyxl.worksheet.html#openpyxl.worksheet.worksheet.Worksheet.rows)它，它会从中计算出一个二维单元格数组。您可以改变数组，但它不会更改工作表。

如果要在工作表中执行此操作，则需要将值从旧位置复制到新位置，并将不再需要的单元格的值设置为`''`or`None`和调用[`Worksheet.garbage_collect()`](http://openpyxl.readthedocs.org/en/latest/api/openpyxl.worksheet.html#openpyxl.worksheet.worksheet.Worksheet.garbage_collect)。

如果您的数据集很小且具有统一的性质（例如所有字符串），您可能最好将相关单元格（内容）复制到新工作表中，删除旧的并将新的标题设置为刚刚的标题删了一个。

恕我直言，最优雅的做法是`Worksheet`使用方法扩展或子类`delete_rows`。我会通过改变它的坐标来实现这样的方法`Cell`。但如果`openpyxl`内部结构发生变化，这可能会中断。

# java - 如何在多态树中使用 Java 泛型类型参数

> ID：14904978
> 
> 赞同：0
> 
> 时间：2013-02-15T23:18:42.747
> 
> 标签：java, dynamic, types, bounded-types

我有一个看起来像树的大型数据结构。我有一个实现所有树行为、链接、取消链接、导航等的根类 TreeElement。树中的实际节点将是 TreeElement 类的专门子类。给定的父节点将有不止一种类型的子节点。这是一个示例树：

```
NodeTypeA
+ NodeTypeB
  + NodeTypeC
  + NodeTypeC
+ NodeTypeB
  + NodeTypeC
+ NodeTypeD
  + NodeTypeE 
```

如您所见，NodeTypeA 具有 B 和 D 类型（可能还有其他类型）的孩子，而 NodeTypeB 具有 C 类型（可能还有其他）的孩子。NodeTypeD 具有 E 类型的子级（可能还有其他）。所有这些都是 TreeElement 的子类。专门的子类对他们被允许拥有的孩子的种类有一些了解。

基本类型 TreeElement 有一个方法

```
Vector getChildren(String kind, Class nodeType); 
```

这将返回一个向量，其中填充了所有用 kind 的值标记的子项，以及用传入的类指定的类。返回的向量将始终包含传入的类的元素。问题是我正在尝试实现正确的一种类型安全，我不清楚如何为此使用 java 的动态类型功能。

在 NodeTypeA 类中，我想要一个这样的方法来获取 NodeTypeB 的子级：

```
Vector<NodeTypeB> getSpecialChildren() {
    Vector<NodeTypeB> vb = getChildren("special", NodeTypeB.class);
    return vb;
} 
```

当我编写上述内容时，我在 Eclipse 中收到需要类型转换的警告。所以我可以添加一个类型转换：

```
Vector<NodeTypeB> getSpecialChildren() {
    Vector<NodeTypeB> vb = (Vector<NodeTypeB>) getChildren("special", NodeTypeB.class);
    return vb;
} 
```

但是，我也有 Eclipse 的“删除不必要的演员表”的功能，这个功能删除了这个演员表。这似乎有点奇怪，Eclipse 认为它没有必要，但如果它不存在就会发出警告。但这只是一个烦恼。

我真正想做的是使用Java的动态类型机制（这是'有界类型参数'???）来使这项工作正常进行。我根本不知道如何在 TreeElement 类中声明 getChildren 方法以实现这种具有完全类型安全性的机制——我假设消除了类参数。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:25:47.337

修复 getChildren 声明的方法是：

```
public <T extends TreeElement> Vector<T> getChildren(String string, Class<T> nodeType) 
```

这将使编译器在您使用时不会出现类型警告。

该方法的实现仍然会有一些警告，因为泛型是一个编译时特性，并且您提供了一个运行时类型参数，但这些警告至少会在该方法中被隔离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T23:24:14.373

您应该考虑实现嵌套集树或邻接树。我为嵌套集树做了一些类，这些类使用非常有用且易于重新利用的泛型。

它的核心看起来像：

```
public class NestedSetTree<? extends NestedSetTree<T>> 
```

那么节点就是T。你可以实现所有的基础，比如getParent()、getAncestorOfType(NodeType type)等。

# actionscript-3 - 如何在计时器类中添加 hitTestObject 语句？

> ID：14904980
> 
> 赞同：0
> 
> 时间：2013-02-15T23:19:02.043
> 
> 标签：actionscript-3, flash, timer, hittest

如果这是一个非常明显的问题，请道歉。

我想在迷你游戏中添加一个 hitTestObject if 循环。障碍物是一个数组中的 3 个项目，所有 3 个项目都是以 1 秒的计时器类延迟连续单独播放的电影剪辑。但是由于循环（我假设）hitTestObject if 语句没有返回跟踪“命中”或任何错误 - 我应该如何解决这个问题？

先感谢您！

```
function randomSort(a:*, b:*):Number
{
    if (Math.random() < 0.5) return -1;
    else return 1;
}
var obstacleArray:Array = [obstacleCar,obstacleCar2,obstacleCar3];
obstacleArray.sort(randomSort);

//(no need for the shuffledLetters[] Array)
trace(obstacleArray);
trace(obstacleArray.length);

//OBSTACLE START DELAY
var timerPlay:Timer = new Timer(1000,1);
timerPlay.addEventListener(TimerEvent.TIMER, ontimerPlay);
timerPlay.start();
var i:int = 0;
var timerDelay:Timer = new Timer(1000, 3);
function ontimerPlay(evt:TimerEvent):void{
    if (carTarget.hitTestObject(obstacleArray[i]) == true){
    trace("HIT!");
    }
    //FOR EACH OBSTACLE

    timerDelay.addEventListener(TimerEvent.TIMER, ontimerDelay);
    timerDelay.start();

}
function ontimerDelay(evt:TimerEvent):void{
    obstacleArray[i].play();
    trace(i);
    i++;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T03:30:24.887

您创建的第一个计时器仅持续一秒钟。这意味着您只有效地检查一次碰撞，并且在您的障碍物开始播放之前也是如此。因此，当您的障碍物正在播放时，不会调用第一个计时器处理程序。您可以跟踪以验证这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:06:10.863

现在，您正在执行一次命中测试，在任何障碍影片剪辑播放之前。您可能希望每帧重复执行命中测试。

将此添加到**onTimerDelay()**：

```
if(i === 0) {
    stage.addEventListener(Event.ENTER_FRAME, enterFrameListener)
} 
```

然后在 ontimerDelay() 之外创建侦听器函数，并将命中测试放在那里：

```
function enterFrameListener(evt:Event):void {
    var index:int = Math.max(0, i - 1);
    if (carTarget.hitTestObject(obstacleArray[index]) == true){
        trace("HIT!");
    }
} 
```

这将在 carTarget 和当前播放的障碍物之间的每一帧执行一次命中测试。

关于你的词汇的注释：

1.  您的代码中没有任何循环。“if”语句不是循环，它被称为“条件语句”。
2.  ontimerDelay() 将被调用 3 次，但它并不是真正的循环，即使它被重复调用。
3.  在您的代码中，您没有向计时器类添加命中测试。类是一种用于制作类实例（timerPlay 和 timerDelay）的蓝图。您正在向使用计时器类的“实例”注册的“事件侦听器”添加命中测试。

**编辑**

关于您在评论中提到的错误，我之前的示例是错误的。我指的是当前播放的影片剪辑，索引为 i，但实际上应该是 i - 1。每次播放新的障碍影片剪辑时，都会增加 i，因此 i 不再是当前播放的影片剪辑的索引. 唯一不需要减去 1 的情况是当 i 为 0 时。我更新了我之前的示例。

我还将事件侦听器注册移动到 onTimerDelay 中并将其包装在 if 语句中，以便在第一个影片剪辑开始播放之前不会执行命中测试。

**编辑**

如果您只想在两个对象开始接触时跟踪“Hit”，则需要跟踪最后一次碰撞测试的结果。在 enterFrameListener 中，您可以检查最后一帧是否有命中。如果上一帧没有命中而当前帧有命中，则可以追踪“命中”。如果在最后一帧中命中并且在当前帧中命中，则可以跳过跟踪语句。

```
var lastHitTestResult:Boolean = false;

function enterFrameListener(evt:Event):void {
    var index:int = Math.max(0, i - 1);
    var currentHitTestResult:Boolean = carTarget.hitTestObject(obstacleArray[index])
    if(lastHitTestResult === false && currentHitTestResult === true) {
        trace("HIT!")
    }
    lastHitTestResult = currentHitTestResult
} 
```

只需确保在 onTimerDelay 中将 lastHitTestResult 重置为 false

# r - 如何检查下载的文件是否存在

> ID：14904983
> 
> 赞同：75
> 
> 时间：2013-02-15T23:19:14.570
> 
> 标签：r

我创建了一个 R markdown 文件，该文件首先从 Web 加载文件。我发现 cache=TRUE 有点不稳定，所以我想在下载文件之前输入一个 if 条件来检查下载的文件。

**当前代码 - 始终下载文件**

```
fileURL <- "https://dl.dropbox.com/u/7710864/courseraPublic/samsungData.rda"
setInternet2(TRUE)
download.file(fileURL ,destfile="./data/samsungData.rda",method="auto")
load("./data/samsungData.rda") 
```

**所需代码 - 仅在尚未下载时才上传**

```
 destfile="./data/samsungData.rda"    
 fileURL <-
 "https://dl.dropbox.com/u/7710864/courseraPublic/samsungData.rda"   
 if (destFile doesNotExist) {
    setInternet2(TRUE)
    download.file(fileURL ,destfile,method="auto") }
    load("./data/samsungData.rda")
 }
 load(destfile) 
```

什么语法会给我条件“destFile doesNotExist”

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-02-16T00:07:18.387

您可以使用`tryCatch`

```
 if(!file.exists(destfile)){
    res <- tryCatch(download.file(fileURL,
                              destfile="./data/samsungData.rda",
                              method="auto"),
                error=function(e) 1)
    if(dat!=1) load("./data/samsungData.rda") 
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-16T12:43:40.110

根据@agstudy 给出的答案

```
 destfile="./data/samsungData.rda" 
 fileURL <-
 "https://dl.dropbox.com/u/7710864/courseraPublic/samsungData.rda"   
 if (!file.exists(destfile)) {
    setInternet2(TRUE)
    download.file(fileURL ,destfile,method="auto") }
    load("./data/samsungData.rda")
 }
 load(destfile) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-10-21T10:57:23.650

检查工作目录中是否存在文件的简单方法是： which(list.files() == "nameofile.csv")

这并不能完全回答他的问题，但我认为这可能对只想检查其目录中是否存在特定文件的人有所帮助。

# javascript - 无法让 RegExp 在 GWT 中匹配

> ID：14904984
> 
> 赞同：1
> 
> 时间：2013-02-15T23:19:23.293
> 
> 标签：javascript, regex, gwt, negative-lookbehind

示例文本：在公园里，孩子们在玩耍。孩子个子高。孩子看着另一个孩子玩耍。

我想匹配第一句中的“child”，第二句和第三句中的“Child”，而不是第三句中的“child”。或者换句话说，匹配“Child”或“child”，但如果以“another”开头，则不匹配

我以为我可以用消极的眼神来做到这一点

```
 ((?<\!another) [Cc]hild) 
```

但似乎无法使语法正确以生成有效的正则表达式。

即使我能得到正确的语法，我也不确定我能在 GWT 中做到这一点。这是来自 GWT Javadoc 的片段

> 正则表达式语法中特定于 Java 的构造（例如`[a-z&&[^bc]], (?<=foo), \A, \Q)`，仅在纯 Java 实现中有效，在 GWT 实现中无效，...

任何帮助或见解将不胜感激。

更新：

科林的回答几乎有效，但并不完全正确。

Colin 的正则表达式确实匹配“孩子”和“孩子”，而不是像我问的那样匹配“另一个孩子”。不过也有一些问题。

我想要做的是匹配“孩子”和“孩子”，这样它们就可以替换为孩子的名字或正确的代词他/她，这取决于孩子的性别。

Colin 的正则表达式的问题在于它匹配“，child”和“.child”。如果那是文本中的第一个单词，它也不匹配“Child”。例如：

“孩子去了公园。在公园里，孩子在玩耍。孩子很高。孩子看着另一个孩子在玩耍。”

第一个 Child 不匹配。随后的匹配项是“, child”、“.child”和“.child”。

我研究了 Colin 想出的正则表达式，试图让它只匹配“child”或“Child”，但不能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:00:30.037

GWT 中的正则表达式与 RegExp JavaScript 具有相同级别的支持，因为它只[调用原生 JavaScript 类](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/regexp/shared/RegExp.html)。

鉴于 JavaScript 正则表达式不支持后视或所有格量词，我想不出直接在正则表达式中拒绝“另一个孩子”的方法。

因此，我将编写一个正则表达式，这样，如果“另一个”出现在“孩子”之前，那么“另一个”肯定会匹配；否则，只会匹配“child”。然后，您可以过滤掉超过 5 个字符的匹配项。

```
RegExp.compile("(?:another +)?[Cc]hild", "g") 
```

请注意，字符串“some children”中的“child”也将被匹配。如果 "another" 被嵌入到一个较长的字符串中，例如 "ranother" ¹，那么我们将盲目地拾取该片段。为了防止这种情况，我们需要添加单词边界检查`\b`²：

```
RegExp.compile("(?:\\banother +)?\\b[Cc]hild\\b", "g")
                   ---           ---        ---
                    |             |          |
            prevent "ranother"  prevent "children"
              from matching        or "nochild"
                                  from matching 
```

`i`您还可以允许使用标志进行不区分大小写的匹配（这对于文本来说是非常合理的） 。但是，我将由您决定。

使用上面的正则表达式，我们总是会在匹配“child”之前匹配“another child”。因此，当匹配只包含“child”时，我们知道“another”**不在**它之前。因此，我们可以过滤掉长度大于 5 的匹配项，只剩下有效的字符串。

**脚注**

1.  我用一个虚构的词作为例子。在任意字符串中是完全正常的，但我不知道英语中是否有任何嵌入“another”的单词。

2.  这里有一个警告。"child4" 或 "child_something" 使用时将不匹配`\b`。而“_another child”或“5another child”中的“another”不会被正则表达式拾取（并且只有“child”匹配，这意味着您接受匹配）。可以解决此问题，如果您要求，我会这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T23:53:46.757

> 匹配“Child”或“child”，但如果以“another”开头则不匹配

```
([^(?:another)] [Cc]hild) 
```

这将捕获一个不以`another`（使用非捕获组的否定字符集）开头的组，然后是空格，然后是单词`child`，大写与否。空间有要求吗？您在原始版本中拥有它，并且它出现在您的示例中的所有四个测试用例中。让这个稍微有用一点（你实际上想捕捉什么？），开始围绕孩子的唯一捕捉组：

```
[^(?:another)] ([Cc]hild) 
```

在支持的浏览器正则表达式功能上使用 MDN 文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

测试用例：

```
public void testHomeworkRegex() {
  String sample = "In the park, child plays. Child is tall. Child watches another child at play.";
  RegExp regex = RegExp.compile("[^(?:another)] ([Cc]hild)", "g");//using global flag to match multiple times

  MatchResult result1 = regex.exec(sample);
  assertNotNull(result1);
  assertEquals("child", result1.getGroup(1));

  MatchResult result2 = regex.exec(sample);
  assertNotNull(result2);
  assertEquals("Child", result2.getGroup(1));

  MatchResult result3 = regex.exec(sample);
  assertNotNull(result3);
  assertEquals("Child", result3.getGroup(1));

  MatchResult result4 = regex.exec(sample);
  assertNull(result4);
} 
```

# soa - NServiceBus，分片主数据

> ID：14904985
> 
> 赞同：0
> 
> 时间：2013-02-15T23:19:31.733
> 
> 标签：soa, nservicebus

假设 Service1 管理某种对象类型的 AZ。然后，Client1 和 client2 可以向 Service1 发送查询和更新命令。如果 Service1 发布事件，则客户端可以订阅。

如果对 Service1 进行分片以使 Service1a 具有 AM 而 Service1b 具有 NZ，应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:49:46.370

如果我理解正确，并且您想要一个与客户端的通用接口，那么应该向客户端公开一个端点，并且该端点应该负责处理存储数据的方式和位置。听起来这可能是某种基于内容的路由。

只要事件不重叠，就会从任一服务发布事件。这意味着只有一个逻辑发布者。客户将订阅所有事件，并丢弃他们不关心的事件。

# wordpress - 限制 wordpress 用户只编辑具有相同元键值的用户

> ID：14904987
> 
> 赞同：0
> 
> 时间：2013-02-15T23:20:00.847
> 
> 标签：wordpress, admin, user-roles

我设置了一个 wordpress 站点，里面有一个主管理员，然后我有用户角色管理器来更改订阅者角色以便能够添加新用户。然后，我成功地将订阅者限制为仅使新用户具有我创建的“播放器”的新角色。

然后，我为每个用户添加了一个名为“游戏”的自定义字段。订阅者只能更改他和“玩家”的自定义字段。玩家不能改变这个值。

当订阅者登录时，我需要更改“所有用户”页面，以仅显示“游戏”具有相同自定义字段值的用户列表。

我尝试了各种不同的插件，并尝试了我自己的代码更改，但没有任何效果:(

任何帮助表示赞赏

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:02:31.387

得到此问答中的代码，[**删除其他用户在用户列表中查看管理员的能力？**](https://wordpress.stackexchange.com/a/41444/12615).

您需要对其进行一些调整以适应您的角色和能力，很可能会更改`meta_key`和`meta_value`值。我添加了检查`$pagenow`只是为了确保这只会在`/wp-admin/users.php`.

```
add_action( 'pre_user_query', 'filter_users_wpse_10742' );

function filter_users_wpse_10742( $user_search ) 
{
    global $pagenow;
    if( 'users.php' != $pagenow)
        return;

    $user = wp_get_current_user();

    if ( $user->roles[0] != 'administrator' ) 
    { 
        global $wpdb;

        $user_search->query_where = 
        str_replace('WHERE 1=1', 
            "WHERE 1=1 AND {$wpdb->users}.ID IN (
                 SELECT {$wpdb->usermeta}.user_id FROM $wpdb->usermeta 
                    WHERE {$wpdb->usermeta}.meta_key = '{$wpdb->prefix}user_level' 
                    AND {$wpdb->usermeta}.meta_value != 10)", 
            $user_search->query_where
        );
    }
} 
```

# shell - sh- 3.2# 而不是 #?

> ID：14904993
> 
> 赞同：1
> 
> 时间：2013-02-15T23:20:26.157
> 
> 标签：shell, ubuntu, root

我正在尝试通过缓冲区溢出调用 root shell。我得到 sh- 3.2$ 而不是 #。似乎 sh- 3.2$ 类似于 # 因为它也发出命令。但是，它似乎永久卡住了。退出命令不起作用。sh-3.2$ 是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:31:25.270

要么 要么`#`是`sh-3.2#`你的shell提示符，存储在`$PS1`变量中。默认提示将取决于您的系统和帐户的配置方式。 `$PS1`通常设置为`/etc/profile`, `$HOME/.profile`, `$HOME/.bashrc`,`$HOME/.bash_profile`等中的任何一个。

`#`通常表示根外壳；`$`通常表示非 root shell。 `3.2`是外壳版本。所以`sh-3.2$`告诉你你*没有*root shell。（打字`whoami`也会告诉你。）

如果您正在使用 bash（您可能是），则 Bash 手册`$PS1`中记录[了](http://www.gnu.org/software/bash/manual/html_node/Printing-a-Prompt.html)`info bash`of 的语法 -- 或者如果您的系统上安装了 Bash 文档，请键入。

# rally - 为 WsapiDataStore 的过滤器配置选项使用函数

> ID：14904997
> 
> 赞同：0
> 
> 时间：2013-02-15T23:20:35.037
> 
> 标签：rally

使用 SDK 2.0。

我需要帮助找出在 WsapiDataStore 的“过滤器：”配置选项中使用函数的方法。当我运行下面的代码时，我得到了错误。如果我删除“过滤器：”选项，则没有错误。

我需要使用一个函数，因为我必须检查一个条件或另一个条件。

任何人都知道如何让这个工作？

谢谢！

```
 Ext.define('CustomApp', {
    extend: 'Rally.app.App',
    componentCls: 'app',
    launch: function() {

        var features = Ext.create('Rally.data.WsapiDataStore', {
            model: 'portfolioitem/feature',
            autoLoad: true,
            remoteSort: false,
            filters: [
                function (item) {
                return true;
                }
            ],
            listeners: {
                load: function(store, data, success) {
                    console.log('Store loaded in launch:', store);
                },
                scope: this
            }
        });             
    }
}); 
```

这是错误。

```
Uncaught TypeError: Cannot call method 'toString' of undefined sdk.js:4
a.define._createQueryString sdk.js:4
a.define.toString sdk.js:4
a.define.encodeFilters sdk.js:4
a.define.encodeFilters sdk.js:4
Ext.define.getParams sdk.js:4
Ext.define.buildRequest sdk.js:4
b.implement.callParent sdk.js:4
a.define.buildRequest sdk.js:4
Ext.define.doRequest sdk.js:4
Ext.define.read sdk.js:4
Ext.define.load sdk.js:4
b.implement.callParent sdk.js:4
Ext.define.load sdk.js:4
b.implement.callParent sdk.js:4
a.define.load sdk.js:4
b.implement.callParent sdk.js:4
a.define.load sdk.js:4
a.define.load.Rally.data.ModelFactory.getModel.success sdk.js:4
b sdk.js:4
(anonymous function) sdk.js:4
d sdk.js:4
a.define._onTypeDefinitionsRetrieved sdk.js:4
a.define._fetchTypeDefinitions.Rally.environment.getIoProvider.httpGet.success sdk.js:4
Ext.apply.callback sdk.js:4
e sdk.js:4
Ext.apply.callback sdk.js:4
Ext.define.onComplete sdk.js:4
Ext.define.onStateChange sdk.js:4
(anonymous function) sdk.js:4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:08:14.827

查看：

[Rally.data.QueryFilter](http://developer.help.rallydev.com/apps/2.0p4/doc/#!/api/Rally.data.QueryFilter)

连同这个 Stackoverflow 答案：

[Rally App SDK 2.0：初始创建后无法修改 QueryFilter 对象](https://stackoverflow.com/questions/10804321/rally-app-sdk-2-0-cannot-modify-queryfilter-object-after-initial-creation)

这显示了一个使用 Rally.data.QueryFilter 准备表示多个条件的过滤器数组的好例子。您可以将该逻辑包装在一个函数中，并可能实现您想要的最终结果。